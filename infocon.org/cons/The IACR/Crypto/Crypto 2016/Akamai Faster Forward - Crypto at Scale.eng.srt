1
00:00:03,780 --> 00:00:07,380
hi I'm Brian I'm here from industry and

2
00:00:07,380 --> 00:00:09,530
from the ruthless practical world

3
00:00:09,530 --> 00:00:12,299
somewhere on the East Coast hello thank

4
00:00:12,299 --> 00:00:13,830
you all for having me

5
00:00:13,830 --> 00:00:16,800
I am not at least in this room I'm not a

6
00:00:16,800 --> 00:00:18,869
cryptographer maybe I can pass outside

7
00:00:18,869 --> 00:00:20,760
and I see some faces here who tried to

8
00:00:20,760 --> 00:00:22,110
teach me crypto but I'm not good enough

9
00:00:22,110 --> 00:00:24,030
at math so I had to go into computer

10
00:00:24,030 --> 00:00:26,610
security instead so now I have a lot of

11
00:00:26,610 --> 00:00:28,620
computers and I'm responsible for their

12
00:00:28,620 --> 00:00:29,280
security

13
00:00:29,280 --> 00:00:31,980
I don't expect you folks to know what

14
00:00:31,980 --> 00:00:35,250
Akamai is Akamai sort of a stagehand for

15
00:00:35,250 --> 00:00:36,690
the internet it succeeds when other

16
00:00:36,690 --> 00:00:40,170
people shine so when I say crypto at

17
00:00:40,170 --> 00:00:43,620
scale by scale what I mean is a quarter

18
00:00:43,620 --> 00:00:46,230
million or so computers like this when

19
00:00:46,230 --> 00:00:47,579
you wake up in the morning you want to

20
00:00:47,579 --> 00:00:49,620
see how the Olympics went so do a couple

21
00:00:49,620 --> 00:00:51,600
billion other people if a billion web

22
00:00:51,600 --> 00:00:54,030
requests all hit the Olympics web

23
00:00:54,030 --> 00:00:56,280
servers at the same time or nbc.com at

24
00:00:56,280 --> 00:00:58,530
the same time NBC operators have a

25
00:00:58,530 --> 00:01:02,519
really bad day right but folks want to

26
00:01:02,519 --> 00:01:03,899
watch the Olympics here at a certain

27
00:01:03,899 --> 00:01:06,600
time and they want to go to NBC maybe

28
00:01:06,600 --> 00:01:09,030
folks in London want to watch the

29
00:01:09,030 --> 00:01:11,159
Olympics on the BBC and folks on the

30
00:01:11,159 --> 00:01:12,390
other side of the world on something

31
00:01:12,390 --> 00:01:12,689
else

32
00:01:12,689 --> 00:01:15,479
so they can all share capacity in some

33
00:01:15,479 --> 00:01:18,390
sort of hierarchy of web caches and if

34
00:01:18,390 --> 00:01:20,070
you're using the web you're probably

35
00:01:20,070 --> 00:01:22,380
talking to Akamai computers not whoever

36
00:01:22,380 --> 00:01:24,530
else you might expect to be talking to

37
00:01:24,530 --> 00:01:28,409
when I say at scale what I mean is on

38
00:01:28,409 --> 00:01:30,869
the order of a quadrillion requests a

39
00:01:30,869 --> 00:01:34,369
year about two quadrillion in 2015 and

40
00:01:34,369 --> 00:01:36,539
roughly doubling a little faster than

41
00:01:36,539 --> 00:01:38,460
Moore's law and every request is about

42
00:01:38,460 --> 00:01:41,490
60 kilobytes so that's a lot of TLS

43
00:01:41,490 --> 00:01:43,049
handshakes right about a quarter of

44
00:01:43,049 --> 00:01:46,229
those turn into a TLS handshake so 250

45
00:01:46,229 --> 00:01:46,829
billion

46
00:01:46,829 --> 00:01:50,369
right 250 trillion TLS handshakes in a

47
00:01:50,369 --> 00:01:53,100
year all done on about a quarter million

48
00:01:53,100 --> 00:01:55,740
machines most of them are web servers

49
00:01:55,740 --> 00:01:57,210
the other chunk or some sort of

50
00:01:57,210 --> 00:02:00,090
infrastructure behind that of those

51
00:02:00,090 --> 00:02:03,179
about 80,000 or one hierarchy like I

52
00:02:03,179 --> 00:02:06,240
just showed you and they all share one

53
00:02:06,240 --> 00:02:08,310
certificate name so you can reuse

54
00:02:08,310 --> 00:02:09,929
handshakes and you can redo session

55
00:02:09,929 --> 00:02:13,470
cookies with that the slides will

56
00:02:13,470 --> 00:02:14,790
happily be online later if you want to

57
00:02:14,790 --> 00:02:16,490
instead of taking pictures too

58
00:02:16,490 --> 00:02:18,300
why do you why would you want to use

59
00:02:18,300 --> 00:02:19,860
this you use this if you're putting

60
00:02:19,860 --> 00:02:21,510
image tags in a webpage and you don't

61
00:02:21,510 --> 00:02:22,710
want to serve all of them so that maybe

62
00:02:22,710 --> 00:02:24,150
for social media all those profile

63
00:02:24,150 --> 00:02:26,250
pictures all those come from this you

64
00:02:26,250 --> 00:02:27,750
use this if you want to do streaming

65
00:02:27,750 --> 00:02:29,790
video all the Olympic stuff is coming

66
00:02:29,790 --> 00:02:31,740
back for this something we're end users

67
00:02:31,740 --> 00:02:34,110
aren't going to see the host name but

68
00:02:34,110 --> 00:02:36,090
there's a harder problem if you want to

69
00:02:36,090 --> 00:02:38,070
do a whole website delivered over this

70
00:02:38,070 --> 00:02:40,440
sort of hierarchy you have this problem

71
00:02:40,440 --> 00:02:43,260
because of historical realities about

72
00:02:43,260 --> 00:02:45,900
SSL and TLS and so we end up with maybe

73
00:02:45,900 --> 00:02:49,050
50,000 servers for vanity names right so

74
00:02:49,050 --> 00:02:52,020
if you want example.com to work we put

75
00:02:52,020 --> 00:02:54,150
that on this system so this is what I

76
00:02:54,150 --> 00:02:56,220
mean when I say scale maybe five

77
00:02:56,220 --> 00:02:58,260
thousand points of presence hosting ten

78
00:02:58,260 --> 00:03:00,390
thousand names on about 50 thousand

79
00:03:00,390 --> 00:03:02,370
machines backed by a big pile of

80
00:03:02,370 --> 00:03:05,280
infrastructure a consequence on that is

81
00:03:05,280 --> 00:03:07,050
that we're sitting on at this point

82
00:03:07,050 --> 00:03:08,820
between half a percent and 1 percent of

83
00:03:08,820 --> 00:03:11,460
all ipv4 addresses so when you heard a

84
00:03:11,460 --> 00:03:12,930
year or so ago that the world had run

85
00:03:12,930 --> 00:03:15,630
out of ipv4 addresses that was sort of a

86
00:03:15,630 --> 00:03:18,420
peak oil moment for us of realizing that

87
00:03:18,420 --> 00:03:20,220
well we've been doing something for ten

88
00:03:20,220 --> 00:03:21,630
years and we're gonna have to do

89
00:03:21,630 --> 00:03:24,240
something else for the next ten but all

90
00:03:24,240 --> 00:03:26,220
of that together is maybe 20% of web

91
00:03:26,220 --> 00:03:30,150
traffic and this sort of graphic is the

92
00:03:30,150 --> 00:03:31,440
kind of thing that we have to use to

93
00:03:31,440 --> 00:03:33,570
steer and explain it to ourselves each

94
00:03:33,570 --> 00:03:34,890
one of those little cam bells is a place

95
00:03:34,890 --> 00:03:37,080
where we have servers and you can see

96
00:03:37,080 --> 00:03:38,670
they're kind of concentrated in places

97
00:03:38,670 --> 00:03:40,440
where there's a lot of people and maybe

98
00:03:40,440 --> 00:03:41,610
they're sparse or in places where you

99
00:03:41,610 --> 00:03:44,910
don't see so much so much IP use ok

100
00:03:44,910 --> 00:03:48,270
that's scale what's crypto crypto in

101
00:03:48,270 --> 00:03:50,430
general is a tool for making things not

102
00:03:50,430 --> 00:03:52,670
work

103
00:03:53,040 --> 00:03:55,330
now when I give this talk in a room that

104
00:03:55,330 --> 00:03:57,160
isn't entirely cryptographers I say

105
00:03:57,160 --> 00:03:59,830
that's a cryptographers definition maybe

106
00:03:59,830 --> 00:04:01,600
maybe not in this room

107
00:04:01,600 --> 00:04:03,790
TLS in particular is a tool for making

108
00:04:03,790 --> 00:04:06,580
the web not work if that's me and that's

109
00:04:06,580 --> 00:04:08,260
a web server that I want to talk to I

110
00:04:08,260 --> 00:04:10,360
want one arrow to work and I want the

111
00:04:10,360 --> 00:04:12,550
other one to not work what do I use for

112
00:04:12,550 --> 00:04:14,980
that that's crypto crypto is the worst

113
00:04:14,980 --> 00:04:17,350
possible tool for all of the things that

114
00:04:17,350 --> 00:04:19,269
we use it for and I mean that very

115
00:04:19,269 --> 00:04:20,529
seriously right because of all the

116
00:04:20,529 --> 00:04:22,240
expense and all of the the

117
00:04:22,240 --> 00:04:24,010
impracticality of multi-party

118
00:04:24,010 --> 00:04:25,750
computations and and public key crypto

119
00:04:25,750 --> 00:04:27,850
and all of that if we could possibly get

120
00:04:27,850 --> 00:04:29,440
away with using another tool if I could

121
00:04:29,440 --> 00:04:31,510
just air-gap things to keep them

122
00:04:31,510 --> 00:04:33,520
separate why I'd be delighted to use an

123
00:04:33,520 --> 00:04:36,040
air-gap instead if I could have a safe

124
00:04:36,040 --> 00:04:38,020
in my office and put my secrets in there

125
00:04:38,020 --> 00:04:40,060
and I lock the door I have much more

126
00:04:40,060 --> 00:04:42,910
faith in that safe and in the sheer

127
00:04:42,910 --> 00:04:44,710
physicality of its walls and the

128
00:04:44,710 --> 00:04:46,660
geography to access it instead of

129
00:04:46,660 --> 00:04:48,430
encrypting something and posting it to

130
00:04:48,430 --> 00:04:51,970
Dropbox right so we only use crypto when

131
00:04:51,970 --> 00:04:53,410
we have to and as a result it's the

132
00:04:53,410 --> 00:04:54,910
worst possible tool for everything that

133
00:04:54,910 --> 00:04:58,210
we use it for my marketing people also

134
00:04:58,210 --> 00:04:59,470
don't seem to like this explanation

135
00:04:59,470 --> 00:05:01,870
somehow when I say we want to to market

136
00:05:01,870 --> 00:05:03,700
the new encrypted secure websites and

137
00:05:03,700 --> 00:05:05,230
they're not going to work nearly as much

138
00:05:05,230 --> 00:05:07,090
as the other ones did the product people

139
00:05:07,090 --> 00:05:08,260
tell me that I'm not allowed to talk to

140
00:05:08,260 --> 00:05:10,060
the customers anymore so we have that in

141
00:05:10,060 --> 00:05:10,330
common

142
00:05:10,330 --> 00:05:12,550
all right I would like to tell you some

143
00:05:12,550 --> 00:05:15,280
stories crypto in its function of having

144
00:05:15,280 --> 00:05:18,400
things not work has over the last five

145
00:05:18,400 --> 00:05:20,800
years or so had a number of really bad

146
00:05:20,800 --> 00:05:24,340
days mostly days were either something

147
00:05:24,340 --> 00:05:26,530
worked that absolutely should not have

148
00:05:26,530 --> 00:05:29,590
worked should have worked or now I'm

149
00:05:29,590 --> 00:05:31,930
confused right something shouldn't have

150
00:05:31,930 --> 00:05:35,650
worked indeed and so we get things like

151
00:05:35,650 --> 00:05:38,290
heartbleed or something should have

152
00:05:38,290 --> 00:05:40,300
worked and crypto got in its way and

153
00:05:40,300 --> 00:05:42,700
didn't and things failed it should have

154
00:05:42,700 --> 00:05:44,830
worked and that's some of the other ones

155
00:05:44,830 --> 00:05:48,100
up here we're gonna look at this bottom

156
00:05:48,100 --> 00:05:50,200
row of the big icons and I'd like to

157
00:05:50,200 --> 00:05:52,720
tell you three stories and out of those

158
00:05:52,720 --> 00:05:55,020
three stories I'd like to bring some

159
00:05:55,020 --> 00:05:58,270
challenges from industry to say as well

160
00:05:58,270 --> 00:06:00,720
as we understand you and that limited

161
00:06:00,720 --> 00:06:03,000
here's what we love to have from

162
00:06:03,000 --> 00:06:04,680
you and some ideas that we'd love to

163
00:06:04,680 --> 00:06:06,750
work with you on on how to take stuff

164
00:06:06,750 --> 00:06:08,580
from crypto research and bring it out to

165
00:06:08,580 --> 00:06:09,990
where the rest of the world can use it

166
00:06:09,990 --> 00:06:12,390
right places where we have no tool and

167
00:06:12,390 --> 00:06:14,190
so we want the worst possible tool

168
00:06:14,190 --> 00:06:16,160
because it leaves that's a possible tool

169
00:06:16,160 --> 00:06:18,810
so let's start with the big one from

170
00:06:18,810 --> 00:06:20,070
2014

171
00:06:20,070 --> 00:06:24,090
right as of the middle of 2014 people

172
00:06:24,090 --> 00:06:25,740
thought that the world might be ending

173
00:06:25,740 --> 00:06:27,630
for practical computer security that we

174
00:06:27,630 --> 00:06:29,730
were gonna have years going on like this

175
00:06:29,730 --> 00:06:32,910
now since this is not a sysadmin realm

176
00:06:32,910 --> 00:06:34,850
let me remind you what was heartbleed

177
00:06:34,850 --> 00:06:37,830
heartbleed was a bug in a popular crypto

178
00:06:37,830 --> 00:06:40,080
implementation called open SSL it was a

179
00:06:40,080 --> 00:06:41,880
common sort of bug the sort of bug you

180
00:06:41,880 --> 00:06:44,400
might expect static analysis programs

181
00:06:44,400 --> 00:06:46,530
from all over the world to find and when

182
00:06:46,530 --> 00:06:48,720
consulted they in fact did find it so

183
00:06:48,720 --> 00:06:50,790
maybe we've learned something there the

184
00:06:50,790 --> 00:06:52,500
important thing to know about it is that

185
00:06:52,500 --> 00:06:54,930
it as a result of this bug there was

186
00:06:54,930 --> 00:06:58,290
information flow from server memory to

187
00:06:58,290 --> 00:07:01,110
clients that shouldn't have been what

188
00:07:01,110 --> 00:07:02,820
was conveyed in this information flow

189
00:07:02,820 --> 00:07:06,060
well we're not sure really anything that

190
00:07:06,060 --> 00:07:08,430
the server knew about might have gotten

191
00:07:08,430 --> 00:07:11,910
conveyed to some clients long-term TLS

192
00:07:11,910 --> 00:07:14,040
secrets other web requests that were

193
00:07:14,040 --> 00:07:16,020
being handled if this was a mail server

194
00:07:16,020 --> 00:07:18,690
somebody else's email or whatever the

195
00:07:18,690 --> 00:07:20,430
sysadmin was typing at the console right

196
00:07:20,430 --> 00:07:21,750
pretty much anything that might have

197
00:07:21,750 --> 00:07:23,820
been sitting around in memory might get

198
00:07:23,820 --> 00:07:26,400
leaked out to the clients no one ever

199
00:07:26,400 --> 00:07:30,660
saw heartbleed used in anger but we all

200
00:07:30,660 --> 00:07:33,090
knew that it might have been and it was

201
00:07:33,090 --> 00:07:36,810
so obvious that even though it it had

202
00:07:36,810 --> 00:07:38,220
been live for a couple years before it

203
00:07:38,220 --> 00:07:40,320
got discovered it was so obvious that

204
00:07:40,320 --> 00:07:43,050
surely somebody else might have a must

205
00:07:43,050 --> 00:07:45,419
have discovered this and used it so this

206
00:07:45,419 --> 00:07:48,150
gives us a natural experiment if you

207
00:07:48,150 --> 00:07:51,000
tell the world that your keys and

208
00:07:51,000 --> 00:07:54,030
secrets are compromised and everybody

209
00:07:54,030 --> 00:07:56,850
knows it right it's really easy to tell

210
00:07:56,850 --> 00:07:58,830
from outside who was exposed to

211
00:07:58,830 --> 00:07:59,280
heartbleed

212
00:07:59,280 --> 00:08:01,740
so tens of thousands of organizations

213
00:08:01,740 --> 00:08:04,380
got told your keys might have leaked

214
00:08:04,380 --> 00:08:07,140
probably leaked and everybody knows that

215
00:08:07,140 --> 00:08:09,210
they did it isn't just like you

216
00:08:09,210 --> 00:08:11,190
accidentally lost a disk on the subway

217
00:08:11,190 --> 00:08:12,919
that had your TLS private keys on it

218
00:08:12,919 --> 00:08:15,210
everything's out there and so you should

219
00:08:15,210 --> 00:08:16,370
probably rotate

220
00:08:16,370 --> 00:08:18,710
everything so we get to see what happens

221
00:08:18,710 --> 00:08:21,820
when we tell people that the answer is

222
00:08:21,820 --> 00:08:24,979
the answer is alarming so this is a

223
00:08:24,979 --> 00:08:27,680
graph over time of how many of those

224
00:08:27,680 --> 00:08:30,590
10,000 or so vanity name certs get

225
00:08:30,590 --> 00:08:33,440
rotated and what you see here use the

226
00:08:33,440 --> 00:08:36,380
laser pointer and said because we could

227
00:08:36,380 --> 00:08:37,429
turn up the chance to use a laser like

228
00:08:37,429 --> 00:08:39,049
this all right what you see is a couple

229
00:08:39,049 --> 00:08:40,880
days of nothing happening

230
00:08:40,880 --> 00:08:42,950
that's nothing happening because we

231
00:08:42,950 --> 00:08:44,300
thought maybe we don't need to rotate

232
00:08:44,300 --> 00:08:46,760
everybody certificates after all nobody

233
00:08:46,760 --> 00:08:49,070
saw heartbleed used in anger and we had

234
00:08:49,070 --> 00:08:50,720
certificate authorities calling us up

235
00:08:50,720 --> 00:08:52,790
and saying look we didn't build the

236
00:08:52,790 --> 00:08:55,640
insert capacity we can issue at maybe

237
00:08:55,640 --> 00:08:58,190
our normal rate maybe twice our normal

238
00:08:58,190 --> 00:09:00,380
rate there's no way we can reissue all

239
00:09:00,380 --> 00:09:02,120
of the certificates used by all public

240
00:09:02,120 --> 00:09:04,820
websites in a matter of days we just

241
00:09:04,820 --> 00:09:06,170
don't have the people for it there's

242
00:09:06,170 --> 00:09:07,970
physical protocols involved in carrying

243
00:09:07,970 --> 00:09:10,100
keys between machines can't be done

244
00:09:10,100 --> 00:09:12,800
okay then news stories started hitting

245
00:09:12,800 --> 00:09:14,930
and pundits started talking and so

246
00:09:14,930 --> 00:09:17,120
within about a week or two all the keys

247
00:09:17,120 --> 00:09:19,580
that we can rotate all by our lonesome

248
00:09:19,580 --> 00:09:21,260
have been rotated right so it's a little

249
00:09:21,260 --> 00:09:23,870
more than half the population over the

250
00:09:23,870 --> 00:09:25,970
next couple of weeks there's a lot of

251
00:09:25,970 --> 00:09:27,650
phone calls and a lot of explanations of

252
00:09:27,650 --> 00:09:29,900
customers who need to rotate things but

253
00:09:29,900 --> 00:09:32,839
sometime around mid-may certainly by 45

254
00:09:32,839 --> 00:09:36,860
days after the event it slows down and

255
00:09:36,860 --> 00:09:39,260
this right here is the ordinary keys

256
00:09:39,260 --> 00:09:42,110
expiring after two years right so what

257
00:09:42,110 --> 00:09:44,029
that means is the by who subtract that

258
00:09:44,029 --> 00:09:45,650
out the rate of the real update rate

259
00:09:45,650 --> 00:09:48,110
ends around the end of May from April

260
00:09:48,110 --> 00:09:51,770
14th initiation so 45 days after if you

261
00:09:51,770 --> 00:09:53,360
didn't rotate by then you weren't going

262
00:09:53,360 --> 00:09:54,830
to you were just gonna wait for your

263
00:09:54,830 --> 00:09:56,990
keys to expire and move on from there

264
00:09:56,990 --> 00:09:58,880
and you can even imagine the face of

265
00:09:58,880 --> 00:10:00,650
somebody who realizes let's say they

266
00:10:00,650 --> 00:10:02,270
were on an extended vacation and they

267
00:10:02,270 --> 00:10:04,010
got back after 90 days away they left

268
00:10:04,010 --> 00:10:06,529
April 13th a Friday bad choice they get

269
00:10:06,529 --> 00:10:08,330
back 90 days later they're in here and

270
00:10:08,330 --> 00:10:11,140
they're looking at well now what do I do

271
00:10:11,140 --> 00:10:13,760
well maybe his certificate only expires

272
00:10:13,760 --> 00:10:15,230
over here so he says he'll wait it's

273
00:10:15,230 --> 00:10:16,610
been 90 days already what's another 10

274
00:10:16,610 --> 00:10:21,230
or 20 or 60 but here we have about 25%

275
00:10:21,230 --> 00:10:24,530
of the population don't usefully rotate

276
00:10:24,530 --> 00:10:29,240
at least 15% don't respond to public

277
00:10:29,240 --> 00:10:30,410
notice that there

278
00:10:30,410 --> 00:10:32,480
turn keys are compromised by doing

279
00:10:32,480 --> 00:10:35,300
anything about it isn't that neat right

280
00:10:35,300 --> 00:10:36,920
I always used to think that the sort of

281
00:10:36,920 --> 00:10:39,830
protocols that said we'll use a long

282
00:10:39,830 --> 00:10:42,080
term key as a identifier with somebody

283
00:10:42,080 --> 00:10:44,830
and we'll have some number of

284
00:10:44,830 --> 00:10:47,090
compromised parties in the network I

285
00:10:47,090 --> 00:10:48,890
wondered about how realistic that was

286
00:10:48,890 --> 00:10:52,670
and this is a new translation of that

287
00:10:52,670 --> 00:10:56,570
model that at least 15% of people in the

288
00:10:56,570 --> 00:10:58,010
world who heard that their keys were

289
00:10:58,010 --> 00:11:00,080
compromised didn't do anything about it

290
00:11:00,080 --> 00:11:01,880
right they're not actively malicious

291
00:11:01,880 --> 00:11:03,250
they're just passively malicious and

292
00:11:03,250 --> 00:11:06,620
this is the best case this is for people

293
00:11:06,620 --> 00:11:08,480
where you could look from outside and

294
00:11:08,480 --> 00:11:11,300
see that their keys were compromised and

295
00:11:11,300 --> 00:11:12,230
they knew it and they knew that

296
00:11:12,230 --> 00:11:14,480
recursively right if you look at a

297
00:11:14,480 --> 00:11:18,140
protocol on the back end that real like

298
00:11:18,140 --> 00:11:20,420
streaming video you've been watching the

299
00:11:20,420 --> 00:11:21,950
Olympics this week right the way

300
00:11:21,950 --> 00:11:23,660
streaming video works in the modern

301
00:11:23,660 --> 00:11:26,000
world is all over web protocols there's

302
00:11:26,000 --> 00:11:27,970
a camera pointed in an athlete and that

303
00:11:27,970 --> 00:11:31,280
camera is connected by a big thick cable

304
00:11:31,280 --> 00:11:33,950
to a machine called an encoder and an

305
00:11:33,950 --> 00:11:35,930
encoder is a translator from the sort of

306
00:11:35,930 --> 00:11:38,090
protocols that a video camera speaks to

307
00:11:38,090 --> 00:11:41,060
internet like protocols and the encoders

308
00:11:41,060 --> 00:11:44,450
are terrible right so if you're a camera

309
00:11:44,450 --> 00:11:45,800
person and you're a streaming video

310
00:11:45,800 --> 00:11:48,500
person you care about your lenses you

311
00:11:48,500 --> 00:11:50,360
care about the sensors in your camera

312
00:11:50,360 --> 00:11:52,340
you don't really care about the encoder

313
00:11:52,340 --> 00:11:53,960
the encoder is there as a sort of a

314
00:11:53,960 --> 00:11:56,930
piece of magic the encoders make that

315
00:11:56,930 --> 00:11:58,670
video available to something like Akamai

316
00:11:58,670 --> 00:12:03,170
and they do it over HTTP with basic

317
00:12:03,170 --> 00:12:05,780
authentication maybe maybe they use TLS

318
00:12:05,780 --> 00:12:07,310
and if they do maybe they check the

319
00:12:07,310 --> 00:12:09,020
certs maybe not but so you should think

320
00:12:09,020 --> 00:12:10,400
about this as there's a password

321
00:12:10,400 --> 00:12:13,310
embedded in that and if you looked

322
00:12:13,310 --> 00:12:15,380
around on paste bin and the dark corners

323
00:12:15,380 --> 00:12:18,410
of the web you can find the URLs for

324
00:12:18,410 --> 00:12:20,360
those encoders or that the encoders used

325
00:12:20,360 --> 00:12:22,340
to talk to Akamai and I devoutly hope

326
00:12:22,340 --> 00:12:24,350
you can't find the password because if

327
00:12:24,350 --> 00:12:26,690
you can find the password you can have

328
00:12:26,690 --> 00:12:28,910
your video stream go out instead of

329
00:12:28,910 --> 00:12:32,270
Symone vials and that'll be exciting for

330
00:12:32,270 --> 00:12:36,070
everybody especially me

331
00:12:36,070 --> 00:12:38,300
we had some heart attacks about that

332
00:12:38,300 --> 00:12:39,650
this year right people who set up new

333
00:12:39,650 --> 00:12:41,210
encoders and it wasn't working right and

334
00:12:41,210 --> 00:12:42,950
whole countries were getting the wrong

335
00:12:42,950 --> 00:12:43,390
thing

336
00:12:43,390 --> 00:12:44,830
set of the Olympic stream all kinds of

337
00:12:44,830 --> 00:12:47,920
excitement not NBC thank goodness but

338
00:12:47,920 --> 00:12:49,690
there's a problem if you want to rotate

339
00:12:49,690 --> 00:12:51,670
that password let's say I accidentally

340
00:12:51,670 --> 00:12:54,250
tell you that the password for NBC for

341
00:12:54,250 --> 00:12:56,530
the Olympics is actually the word NBC

342
00:12:56,530 --> 00:13:00,730
password please don't try that and now

343
00:13:00,730 --> 00:13:02,500
I've got to change the thing right so

344
00:13:02,500 --> 00:13:04,630
there's a relatively ordinary three-step

345
00:13:04,630 --> 00:13:07,750
process to go from alright client and

346
00:13:07,750 --> 00:13:09,640
server agree that the password is a the

347
00:13:09,640 --> 00:13:11,290
server starts accepting two passwords

348
00:13:11,290 --> 00:13:13,180
the client starts sending the new one

349
00:13:13,180 --> 00:13:15,100
the server stops accepting the old one

350
00:13:15,100 --> 00:13:16,660
right and just straight forward three

351
00:13:16,660 --> 00:13:18,070
steps to rotate a password this should

352
00:13:18,070 --> 00:13:21,370
be normal there's a problem the encoders

353
00:13:21,370 --> 00:13:23,200
are terrible the encoders only have one

354
00:13:23,200 --> 00:13:24,910
password field right many of these

355
00:13:24,910 --> 00:13:26,380
encoders were literally purchased in the

356
00:13:26,380 --> 00:13:27,820
90s and set up there's some sort of

357
00:13:27,820 --> 00:13:30,760
appliance you may not be able to get a

358
00:13:30,760 --> 00:13:32,140
replacement the people who made it are

359
00:13:32,140 --> 00:13:34,210
out of business there's no software for

360
00:13:34,210 --> 00:13:36,760
them you could buy a new one right if

361
00:13:36,760 --> 00:13:38,530
this will only win one way if it were

362
00:13:38,530 --> 00:13:40,360
just a matter of getting right that the

363
00:13:40,360 --> 00:13:42,220
client here only ever has to know one

364
00:13:42,220 --> 00:13:44,020
password at a time right so that could

365
00:13:44,020 --> 00:13:45,070
be the solution

366
00:13:45,070 --> 00:13:46,900
Akamai can accept two passwords and

367
00:13:46,900 --> 00:13:48,160
you'll just set up a new encoder or

368
00:13:48,160 --> 00:13:50,620
you'll change it over doesn't work that

369
00:13:50,620 --> 00:13:51,010
way

370
00:13:51,010 --> 00:13:53,560
typically the encoders the server and

371
00:13:53,560 --> 00:13:56,140
the what you would think of as the web

372
00:13:56,140 --> 00:13:57,700
servers the Akamai stuff is all pulling

373
00:13:57,700 --> 00:13:59,440
from there so you can't rotate it

374
00:13:59,440 --> 00:14:01,930
most of these that are used for live

375
00:14:01,930 --> 00:14:04,390
video round-the-clock are feeding into

376
00:14:04,390 --> 00:14:06,610
things like satellite installations and

377
00:14:06,610 --> 00:14:09,070
into local television and because of

378
00:14:09,070 --> 00:14:10,570
consequences of the protocol I don't

379
00:14:10,570 --> 00:14:13,300
want to go into here if you rotate that

380
00:14:13,300 --> 00:14:15,280
password you have to restart the stream

381
00:14:15,280 --> 00:14:18,970
on the encoder and that requires someone

382
00:14:18,970 --> 00:14:21,070
at every other endpoint to push a button

383
00:14:21,070 --> 00:14:24,130
just one button in order to start the

384
00:14:24,130 --> 00:14:26,440
stream working again that means to

385
00:14:26,440 --> 00:14:28,570
change that password if I actually do

386
00:14:28,570 --> 00:14:30,550
tell you the NBC Olympics password

387
00:14:30,550 --> 00:14:33,160
someone at every local tell of NBC

388
00:14:33,160 --> 00:14:34,690
affiliate television station in the

389
00:14:34,690 --> 00:14:36,970
United States needs to push a button to

390
00:14:36,970 --> 00:14:40,390
say try again right so we considered

391
00:14:40,390 --> 00:14:42,040
sending out a great number of

392
00:14:42,040 --> 00:14:43,900
undergraduate interns or something to do

393
00:14:43,900 --> 00:14:45,430
with like a drinky bird that could push

394
00:14:45,430 --> 00:14:48,940
the button but what actually happens in

395
00:14:48,940 --> 00:14:50,710
reality is these passwords have not been

396
00:14:50,710 --> 00:14:52,780
rotated in typically more than 15 years

397
00:14:52,780 --> 00:14:56,530
and cannot be right anyone who adopted

398
00:14:56,530 --> 00:14:57,070
lives

399
00:14:57,070 --> 00:14:58,630
reaming video in the early days of

400
00:14:58,630 --> 00:15:00,070
streaming video on the Internet is

401
00:15:00,070 --> 00:15:05,650
pretty much stuck with this the empty

402
00:15:05,650 --> 00:15:09,610
string of course and I see you all wrote

403
00:15:09,610 --> 00:15:13,990
it down so this is all of these those

404
00:15:13,990 --> 00:15:15,610
passwords were of course in memory when

405
00:15:15,610 --> 00:15:17,470
heartbleed happened so all those folks

406
00:15:17,470 --> 00:15:19,720
we also caught in contact with and said

407
00:15:19,720 --> 00:15:21,700
maybe you want to do something like if

408
00:15:21,700 --> 00:15:22,930
you were thinking about deploying a new

409
00:15:22,930 --> 00:15:24,550
encoder Hardware maybe now is the time

410
00:15:24,550 --> 00:15:26,830
it's april the summer sports season is

411
00:15:26,830 --> 00:15:29,530
starting up you maybe want to do this

412
00:15:29,530 --> 00:15:31,120
before the World Cup because you can't

413
00:15:31,120 --> 00:15:33,310
do it during the World Cup you could

414
00:15:33,310 --> 00:15:34,690
advertise it as you're offering new

415
00:15:34,690 --> 00:15:36,550
ultra HD whatever other features you're

416
00:15:36,550 --> 00:15:38,800
gonna pack in and the answer was we

417
00:15:38,800 --> 00:15:40,570
can't do it we're not gonna do it

418
00:15:40,570 --> 00:15:42,220
nobody's road hitting passwords on is

419
00:15:42,220 --> 00:15:44,050
their stuff so I could show you a graph

420
00:15:44,050 --> 00:15:46,030
for this for uptake of rotated passwords

421
00:15:46,030 --> 00:15:47,830
for streaming but it's just a flat line

422
00:15:47,830 --> 00:15:50,920
nobody did literally nobody and there's

423
00:15:50,920 --> 00:15:52,840
about 300 other secret classes that we

424
00:15:52,840 --> 00:15:55,510
were tracking over the the months after

425
00:15:55,510 --> 00:15:58,450
heartbleed to see what happened when you

426
00:15:58,450 --> 00:16:00,760
tell the world basically everybody who's

427
00:16:00,760 --> 00:16:02,230
using open SSL you have to change your

428
00:16:02,230 --> 00:16:02,740
secrets

429
00:16:02,740 --> 00:16:04,540
you should rotate them even if you were

430
00:16:04,540 --> 00:16:05,980
using something like Windows s channel

431
00:16:05,980 --> 00:16:07,390
that didn't get compromised your

432
00:16:07,390 --> 00:16:09,280
counterparties receiving open SSL so you

433
00:16:09,280 --> 00:16:11,320
should change that and the answer is at

434
00:16:11,320 --> 00:16:13,750
the best-case 15 percent of people

435
00:16:13,750 --> 00:16:15,970
ignore you in the more typical case

436
00:16:15,970 --> 00:16:17,410
nearly everybody ignores you and

437
00:16:17,410 --> 00:16:19,120
sometimes absolutely everybody ignores

438
00:16:19,120 --> 00:16:22,210
you so much for long term secrets as

439
00:16:22,210 --> 00:16:25,330
identities next crisis some of the

440
00:16:25,330 --> 00:16:27,040
people I demoed this on said they wanted

441
00:16:27,040 --> 00:16:28,060
to know why I was putting a duck

442
00:16:28,060 --> 00:16:29,920
astronomer on the slides this is not a

443
00:16:29,920 --> 00:16:31,780
duck astronomer as anyone can tell this

444
00:16:31,780 --> 00:16:34,780
is a poodle carefully hand-drawn I don't

445
00:16:34,780 --> 00:16:36,000
know why he's looking at the stars

446
00:16:36,000 --> 00:16:39,040
poodle was another event that happened

447
00:16:39,040 --> 00:16:41,260
later in 2014 and poodles really

448
00:16:41,260 --> 00:16:43,150
interesting because poodle in a lot of

449
00:16:43,150 --> 00:16:46,120
ways isn't a technical failure poodle

450
00:16:46,120 --> 00:16:48,940
was the world finding out that SSL 3

451
00:16:48,940 --> 00:16:51,940
from the 90s was broken now everybody

452
00:16:51,940 --> 00:16:54,010
here knew that SSL 3 from the 90 was

453
00:16:54,010 --> 00:16:56,470
broken that's why we built TLS 1 & 1 1 &

454
00:16:56,470 --> 00:16:59,410
1 2 and so on right but this was a case

455
00:16:59,410 --> 00:17:02,770
where there was a crisis of faith crypto

456
00:17:02,770 --> 00:17:05,410
is about belief and about faith and that

457
00:17:05,410 --> 00:17:07,510
faith in that belief around SSL 3 was

458
00:17:07,510 --> 00:17:10,329
suddenly shaken and so everybody's got

459
00:17:10,329 --> 00:17:10,869
to run off

460
00:17:10,869 --> 00:17:13,959
the revival tent and make absolution

461
00:17:13,959 --> 00:17:16,059
somehow and sacrifice a goat or a poodle

462
00:17:16,059 --> 00:17:19,000
and try to get proper security again but

463
00:17:19,000 --> 00:17:20,980
it gives us another natural experiment

464
00:17:20,980 --> 00:17:23,530
what happens when the whole world has a

465
00:17:23,530 --> 00:17:25,359
crisis of belief and they suddenly

466
00:17:25,359 --> 00:17:27,670
believe they've got to turn off SSL 3 in

467
00:17:27,670 --> 00:17:30,610
like a weekend I did come out I think a

468
00:17:30,610 --> 00:17:33,040
Friday night and I have dark memories of

469
00:17:33,040 --> 00:17:34,510
walking the wrong way into the office

470
00:17:34,510 --> 00:17:35,800
building against the tide of people

471
00:17:35,800 --> 00:17:37,240
leaving because we were gonna go try to

472
00:17:37,240 --> 00:17:40,660
deal with this what we saw I can't quite

473
00:17:40,660 --> 00:17:42,670
show you I have this image in my head

474
00:17:42,670 --> 00:17:44,530
but it was from our live telemetry

475
00:17:44,530 --> 00:17:46,510
systems and I didn't think to take a

476
00:17:46,510 --> 00:17:48,640
screenshot so I've sketched where I was

477
00:17:48,640 --> 00:17:50,440
looking at the night that the world

478
00:17:50,440 --> 00:17:53,920
found out SSL 3 is broken here's a

479
00:17:53,920 --> 00:17:56,590
specific way that it's broken and we

480
00:17:56,590 --> 00:17:58,809
think we're going to see exploitation of

481
00:17:58,809 --> 00:18:01,420
this at national borders within 3 days

482
00:18:01,420 --> 00:18:04,150
right our threat Intel teams went and

483
00:18:04,150 --> 00:18:05,590
made some phone calls and I came back to

484
00:18:05,590 --> 00:18:08,020
us and they said we think that SSL 3

485
00:18:08,020 --> 00:18:10,210
across national borders by the end of

486
00:18:10,210 --> 00:18:12,790
the weekend by Monday morning the the

487
00:18:12,790 --> 00:18:14,080
Americans will have something up that

488
00:18:14,080 --> 00:18:15,309
the Chinese will have something up the

489
00:18:15,309 --> 00:18:16,870
Russians the French whatever and so all

490
00:18:16,870 --> 00:18:18,550
the national board or tapping points are

491
00:18:18,550 --> 00:18:20,320
going to be seeing poodle exploitation

492
00:18:20,320 --> 00:18:22,809
in like 72 hours so you have to move now

493
00:18:22,809 --> 00:18:25,960
now now now now now that didn't happen

494
00:18:25,960 --> 00:18:27,970
and there's a separate operational talk

495
00:18:27,970 --> 00:18:29,800
about why the threat Intel predictions

496
00:18:29,800 --> 00:18:31,720
were wrong there but this is what I saw

497
00:18:31,720 --> 00:18:33,250
that night trying to make that decision

498
00:18:33,250 --> 00:18:35,470
so I want you to ask yourself what you

499
00:18:35,470 --> 00:18:37,690
would do we've you got that message this

500
00:18:37,690 --> 00:18:41,410
is a locus of a population and it's log

501
00:18:41,410 --> 00:18:43,840
log mostly because that lets you see a

502
00:18:43,840 --> 00:18:45,250
big line across that otherwise it just

503
00:18:45,250 --> 00:18:47,920
looks like a great big letter you that

504
00:18:47,920 --> 00:18:51,760
this says nearly all of those 10,000

505
00:18:51,760 --> 00:18:53,559
vanity domain names those 10,000

506
00:18:53,559 --> 00:18:54,100
websites

507
00:18:54,100 --> 00:18:56,320
call them roughly the biggest 10,000

508
00:18:56,320 --> 00:18:57,610
websites on the Internet

509
00:18:57,610 --> 00:19:00,010
nearly all of them get basically no SSL

510
00:19:00,010 --> 00:19:02,260
v3 traffic they get a little bit right

511
00:19:02,260 --> 00:19:04,120
there's little tiny fractions that come

512
00:19:04,120 --> 00:19:07,330
in from somebody writing a script in

513
00:19:07,330 --> 00:19:09,550
like Java 6 or something and running

514
00:19:09,550 --> 00:19:11,500
that and they'd only speak SSL 3 or

515
00:19:11,500 --> 00:19:13,570
somebody who's behind some horrible

516
00:19:13,570 --> 00:19:15,490
academic proxy at that horrible

517
00:19:15,490 --> 00:19:17,679
university and it only does SSL 3 going

518
00:19:17,679 --> 00:19:19,000
forward some abandoned hardware whatever

519
00:19:19,000 --> 00:19:20,710
so there's a little bit but essentially

520
00:19:20,710 --> 00:19:21,790
they get known and they wouldn't notice

521
00:19:21,790 --> 00:19:24,080
or care if we turn it off

522
00:19:24,080 --> 00:19:28,130
maybe a hundred customers or so have 1%

523
00:19:28,130 --> 00:19:30,640
of the traffic as slv-3 and then

524
00:19:30,640 --> 00:19:33,380
basically nobody has more than 10% of

525
00:19:33,380 --> 00:19:36,620
their traffic as slv-3 except for six or

526
00:19:36,620 --> 00:19:38,419
seven hundred stalwart diehards who

527
00:19:38,419 --> 00:19:40,070
thought that SSL three got it right and

528
00:19:40,070 --> 00:19:41,960
they're not okay with ever switching to

529
00:19:41,960 --> 00:19:44,720
TLS and so they're still running their

530
00:19:44,720 --> 00:19:47,269
entire website is running on SSL v3 so

531
00:19:47,269 --> 00:19:48,799
they're using a 16 year old dead

532
00:19:48,799 --> 00:19:51,110
protocol but maybe they too have now had

533
00:19:51,110 --> 00:19:52,970
a crisis of belief so you might imagine

534
00:19:52,970 --> 00:19:55,429
we want to break this into chunks and

535
00:19:55,429 --> 00:19:57,049
sort of handle these by parts right

536
00:19:57,049 --> 00:19:58,519
maybe you do a different thing for that

537
00:19:58,519 --> 00:20:00,139
set of people than for this set of

538
00:20:00,139 --> 00:20:02,840
people and what we can do to try to help

539
00:20:02,840 --> 00:20:05,330
that bulk of population is we can see

540
00:20:05,330 --> 00:20:09,169
where can we turn off SSL v3 right how

541
00:20:09,169 --> 00:20:11,360
what percentage long a point do I draw

542
00:20:11,360 --> 00:20:13,519
the line right anyone think we should

543
00:20:13,519 --> 00:20:16,850
draw it at 10% can I see hands no all

544
00:20:16,850 --> 00:20:19,909
right how about 1% someone bold good a

545
00:20:19,909 --> 00:20:23,630
couple people tenth of a percent how

546
00:20:23,630 --> 00:20:25,460
about what a million the rest of you

547
00:20:25,460 --> 00:20:27,620
I've put you to sleep god I'm so sorry

548
00:20:27,620 --> 00:20:31,340
no no no wait good a hundred percent

549
00:20:31,340 --> 00:20:32,630
oh just oh I'm sorry you're right just

550
00:20:32,630 --> 00:20:34,159
turn it off for everybody all right so

551
00:20:34,159 --> 00:20:36,080
what we found was there's few enough

552
00:20:36,080 --> 00:20:38,149
people over in that camp that they can

553
00:20:38,149 --> 00:20:39,919
all get a phone call right that night

554
00:20:39,919 --> 00:20:42,260
and be told hey this portal thing is

555
00:20:42,260 --> 00:20:43,850
happening you need to do something about

556
00:20:43,850 --> 00:20:46,399
SSL v3 and your entire website seems to

557
00:20:46,399 --> 00:20:48,500
run on SSL v3 maybe you should do

558
00:20:48,500 --> 00:20:50,330
something about that right because to

559
00:20:50,330 --> 00:20:52,639
fix it is from the server point of view

560
00:20:52,639 --> 00:20:54,769
is a couple checkboxes in a web portal

561
00:20:54,769 --> 00:20:56,510
and then you fix whatever your clients

562
00:20:56,510 --> 00:20:58,190
are and of course a number of them said

563
00:20:58,190 --> 00:20:59,779
to us things like I can't do that my

564
00:20:59,779 --> 00:21:01,580
clients are deployed hardware and we

565
00:21:01,580 --> 00:21:02,899
said well what are they and they said oh

566
00:21:02,899 --> 00:21:07,929
they automate a teller machines oh okay

567
00:21:07,929 --> 00:21:10,669
we can't fix that why what are yours Oh

568
00:21:10,669 --> 00:21:12,679
city buses that are reporting in where

569
00:21:12,679 --> 00:21:16,639
they are oh okay so what we said is

570
00:21:16,639 --> 00:21:19,250
we're gonna draw the line at 1% we

571
00:21:19,250 --> 00:21:20,929
looked in it somewhere the data was and

572
00:21:20,929 --> 00:21:22,639
we saw that a lot of what was hitting

573
00:21:22,639 --> 00:21:25,850
those 1% unless sites was web spiders

574
00:21:25,850 --> 00:21:28,220
right sort of competitors to Google and

575
00:21:28,220 --> 00:21:29,630
DuckDuckGo and being and that sort of

576
00:21:29,630 --> 00:21:31,610
thing who were crawling the web but they

577
00:21:31,610 --> 00:21:33,260
were like little tiny ones that nobody

578
00:21:33,260 --> 00:21:35,149
had ever heard of and as far as we could

579
00:21:35,149 --> 00:21:37,450
tell we had no way to contact them

580
00:21:37,450 --> 00:21:39,430
the couple of customers we spot checked

581
00:21:39,430 --> 00:21:41,290
in with had no idea who they were and

582
00:21:41,290 --> 00:21:42,760
said that's undesirable traffic so go

583
00:21:42,760 --> 00:21:44,650
ahead and turn it off so we set the line

584
00:21:44,650 --> 00:21:46,480
at one percenter we turned it off and I

585
00:21:46,480 --> 00:21:48,900
almost ended up on the job market

586
00:21:48,900 --> 00:21:51,670
because it took about 90 minutes from

587
00:21:51,670 --> 00:21:53,320
pulling that that lever over at about

588
00:21:53,320 --> 00:21:54,820
2:00 in the morning right when not a lot

589
00:21:54,820 --> 00:21:56,260
of people were using it but more

590
00:21:56,260 --> 00:21:57,580
importantly when none of the operators

591
00:21:57,580 --> 00:21:59,740
are watching so about 90 minutes later

592
00:21:59,740 --> 00:22:01,570
we start getting phone calls hey

593
00:22:01,570 --> 00:22:03,370
something broke you have to turn it back

594
00:22:03,370 --> 00:22:08,170
on and what a list they went through of

595
00:22:08,170 --> 00:22:13,180
what had broken of I need SSL 3 why you

596
00:22:13,180 --> 00:22:14,800
only we saw you only have one SSL 3

597
00:22:14,800 --> 00:22:17,530
transaction a month yeah but that one a

598
00:22:17,530 --> 00:22:19,570
month is how I do payroll for my company

599
00:22:19,570 --> 00:22:26,710
oh ok or I use SSL v3 came in several of

600
00:22:26,710 --> 00:22:28,120
the national banks from Venezuela and

601
00:22:28,120 --> 00:22:29,650
like big big commercial and retail banks

602
00:22:29,650 --> 00:22:32,440
from South America came in and they said

603
00:22:32,440 --> 00:22:35,680
we need SSL v3 why our client population

604
00:22:35,680 --> 00:22:37,780
often has devices that can only speak

605
00:22:37,780 --> 00:22:38,950
asses over a 3 right they might be

606
00:22:38,950 --> 00:22:40,570
banking for like an old mobile phone or

607
00:22:40,570 --> 00:22:41,860
something like a feature phone says

608
00:22:41,860 --> 00:22:43,150
Nokia on it

609
00:22:43,150 --> 00:22:46,900
so how do we help those people well you

610
00:22:46,900 --> 00:22:48,220
got to get them new phones and until

611
00:22:48,220 --> 00:22:50,200
then we have to have SSL 3 on for

612
00:22:50,200 --> 00:22:52,240
banking even if that hurts the people

613
00:22:52,240 --> 00:22:53,980
who are using modern protocols to talk

614
00:22:53,980 --> 00:22:56,710
to you - yeah even so I can't turn off 5

615
00:22:56,710 --> 00:22:59,980
10 percent of my user population oh ok

616
00:22:59,980 --> 00:23:05,140
or are the best ones I a video game

617
00:23:05,140 --> 00:23:06,550
company called in that makes both

618
00:23:06,550 --> 00:23:09,730
set-top boxes and small portable devices

619
00:23:09,730 --> 00:23:12,160
and they said our entire infrastructure

620
00:23:12,160 --> 00:23:14,590
all of our little handheld gaming

621
00:23:14,590 --> 00:23:16,360
platforms and all of the the set-top

622
00:23:16,360 --> 00:23:18,790
boxes the whole there's a big Web Store

623
00:23:18,790 --> 00:23:20,020
you can put in a credit card number and

624
00:23:20,020 --> 00:23:21,880
download apps and so on and play the

625
00:23:21,880 --> 00:23:25,270
great games of the 80s all of those use

626
00:23:25,270 --> 00:23:27,010
SSL 3 and they can't speak anything else

627
00:23:27,010 --> 00:23:29,860
and we don't have the engineering

628
00:23:29,860 --> 00:23:31,690
resources to put out something new which

629
00:23:31,690 --> 00:23:32,950
at ok we've got to turn it back on for

630
00:23:32,950 --> 00:23:34,120
them and so we're turning back on spot

631
00:23:34,120 --> 00:23:36,550
checks here they are there and then the

632
00:23:36,550 --> 00:23:37,960
world's second largest router

633
00:23:37,960 --> 00:23:39,760
manufacturer called back and said you

634
00:23:39,760 --> 00:23:41,830
have to turn it back on and we said what

635
00:23:41,830 --> 00:23:43,930
how could you possibly and they said

636
00:23:43,930 --> 00:23:45,840
well we missed something

637
00:23:45,840 --> 00:23:49,990
ok that the update mechanism to update

638
00:23:49,990 --> 00:23:51,100
firmware on their router

639
00:23:51,100 --> 00:23:54,400
use ssl 3 it also had end-to-end checks

640
00:23:54,400 --> 00:23:56,440
but it would only who they said it's ok

641
00:23:56,440 --> 00:23:58,240
for us to not upgrade this because it's

642
00:23:58,240 --> 00:24:00,130
fragile why break it if we break this we

643
00:24:00,130 --> 00:24:01,919
have to ship disks to a billion people

644
00:24:01,919 --> 00:24:04,330
so we'll just leave it in place after

645
00:24:04,330 --> 00:24:05,919
all there's an end-to-end signature so

646
00:24:05,919 --> 00:24:07,299
there's an end-to-end integrity check so

647
00:24:07,299 --> 00:24:09,160
we didn't care so much that it was SSL 3

648
00:24:09,160 --> 00:24:11,919
but now we need it to work over SSL 3 so

649
00:24:11,919 --> 00:24:13,840
that we can continue pushing updates we

650
00:24:13,840 --> 00:24:15,429
swear we'll get another update out and

651
00:24:15,429 --> 00:24:17,770
then you can turn it off ok how long

652
00:24:17,770 --> 00:24:21,850
will that take 18 months ok and that's

653
00:24:21,850 --> 00:24:24,610
again from mass consciousness within the

654
00:24:24,610 --> 00:24:26,620
computer security community that said

655
00:24:26,620 --> 00:24:30,309
this has to go this weekend and we ended

656
00:24:30,309 --> 00:24:32,320
up with a Swiss cheese array have turned

657
00:24:32,320 --> 00:24:34,390
off and turned on and pulling people

658
00:24:34,390 --> 00:24:39,250
aside to try to fix this and the core

659
00:24:39,250 --> 00:24:43,450
issue that made this so dangerous for

660
00:24:43,450 --> 00:24:45,520
the world was that the same keys are

661
00:24:45,520 --> 00:24:47,110
used for sl3

662
00:24:47,110 --> 00:24:49,990
and Teela's 1 and 1 1 and 1 2 right so

663
00:24:49,990 --> 00:24:51,250
the next time that you write a paper and

664
00:24:51,250 --> 00:24:53,049
an introduction you say uncompromised

665
00:24:53,049 --> 00:24:54,789
here means that these keys are used only

666
00:24:54,789 --> 00:24:57,070
in accordance with the protocol remember

667
00:24:57,070 --> 00:24:58,299
that on my side of the world that never

668
00:24:58,299 --> 00:25:00,370
happens because the same keys get used

669
00:25:00,370 --> 00:25:03,760
across many iterations ok one more

670
00:25:03,760 --> 00:25:05,559
disaster and this one should be news for

671
00:25:05,559 --> 00:25:06,700
most of the folks in the room that's a

672
00:25:06,700 --> 00:25:09,970
fossil fossil is an acronym for fix ores

673
00:25:09,970 --> 00:25:13,270
and SSL this is one that now I can talk

674
00:25:13,270 --> 00:25:15,850
about in public the issue is if there's

675
00:25:15,850 --> 00:25:17,860
end users who are talking to some

676
00:25:17,860 --> 00:25:21,100
intermediate proxy whether that's Akamai

677
00:25:21,100 --> 00:25:23,169
or a local Bluecoat proxy or whatever's

678
00:25:23,169 --> 00:25:24,400
on the resident things that I see

679
00:25:24,400 --> 00:25:25,539
messing with my connection from the

680
00:25:25,539 --> 00:25:28,480
dormitories to get outs to the internet

681
00:25:28,480 --> 00:25:31,990
then there's a man in the middle right

682
00:25:31,990 --> 00:25:33,929
and approved 1 an acceptable one maybe

683
00:25:33,929 --> 00:25:36,070
who's between the end users and the

684
00:25:36,070 --> 00:25:38,289
origins and there's been this wonderful

685
00:25:38,289 --> 00:25:40,900
set of work from people like Ivan rush

686
00:25:40,900 --> 00:25:43,960
ticket Qualis who did SSL labs this for

687
00:25:43,960 --> 00:25:45,909
those who don't run a web server this is

688
00:25:45,909 --> 00:25:47,470
a website you can go to when you tell it

689
00:25:47,470 --> 00:25:50,530
a server name and it examines it and it

690
00:25:50,530 --> 00:25:52,390
does all of the automated checks you

691
00:25:52,390 --> 00:25:53,950
want an expert to do to tell you how

692
00:25:53,950 --> 00:25:56,049
good that TLS endpoint is this is

693
00:25:56,049 --> 00:25:58,179
fantastic because it tells people by the

694
00:25:58,179 --> 00:26:00,010
way you're terrible oh I didn't know I

695
00:26:00,010 --> 00:26:02,200
was terrible click here for instructions

696
00:26:02,200 --> 00:26:03,940
to not be terrible so I do and it says

697
00:26:03,940 --> 00:26:04,540
we saw

698
00:26:04,540 --> 00:26:05,560
here's the server version you're running

699
00:26:05,560 --> 00:26:07,630
here's a set of configuration inputs you

700
00:26:07,630 --> 00:26:09,460
should put in I do that I run it again

701
00:26:09,460 --> 00:26:10,960
and it says you're great I love being

702
00:26:10,960 --> 00:26:13,120
told that right so this is something

703
00:26:13,120 --> 00:26:15,420
that really moved the bar for operators

704
00:26:15,420 --> 00:26:19,530
but what we found was that very many of

705
00:26:19,530 --> 00:26:22,600
the customers who were using services

706
00:26:22,600 --> 00:26:24,490
like us or other proxies had configured

707
00:26:24,490 --> 00:26:27,190
the proxies to not check their origin

708
00:26:27,190 --> 00:26:29,620
SSL configuration at all

709
00:26:29,620 --> 00:26:32,650
right so some a tool like Ivan's light

710
00:26:32,650 --> 00:26:34,660
like the koalas SSL lab scanner can't

711
00:26:34,660 --> 00:26:36,760
see what's behind Akamai it sees the

712
00:26:36,760 --> 00:26:38,500
Akamai edge and that looks wonderful he

713
00:26:38,500 --> 00:26:39,820
tells us we're great I love it I checked

714
00:26:39,820 --> 00:26:42,190
every morning but when you go to look

715
00:26:42,190 --> 00:26:44,980
behind the Akamai system back to those

716
00:26:44,980 --> 00:26:47,200
origins nobody was looking at that and

717
00:26:47,200 --> 00:26:49,180
so the SIS admin's of that population

718
00:26:49,180 --> 00:26:51,940
had not had that social feedback cycle

719
00:26:51,940 --> 00:26:53,740
of a customer calling them out and

720
00:26:53,740 --> 00:26:55,630
saying you're terrible fix it so they

721
00:26:55,630 --> 00:26:57,790
had baked in crypto decisions often in

722
00:26:57,790 --> 00:26:59,920
the 90s early 2000s we're still living

723
00:26:59,920 --> 00:27:01,600
with them even better

724
00:27:01,600 --> 00:27:06,100
they often told Akamai don't ever break

725
00:27:06,100 --> 00:27:07,900
a connection going forward to the origin

726
00:27:07,900 --> 00:27:10,240
right there's a little checkbox you can

727
00:27:10,240 --> 00:27:11,980
use when you're configuring a proxy like

728
00:27:11,980 --> 00:27:14,310
Akamai you can either set the switch to

729
00:27:14,310 --> 00:27:17,410
check the origin sir in which case it'll

730
00:27:17,410 --> 00:27:19,810
break when the origin sort expires it'll

731
00:27:19,810 --> 00:27:21,850
break if the name is wrong it'll break

732
00:27:21,850 --> 00:27:23,440
if it'll break the connection if it

733
00:27:23,440 --> 00:27:25,270
should be broken or you can set the

734
00:27:25,270 --> 00:27:27,520
switch to don't do that make it always

735
00:27:27,520 --> 00:27:30,190
work all right we're gonna do a show of

736
00:27:30,190 --> 00:27:31,840
hands again who thinks that everybody

737
00:27:31,840 --> 00:27:33,460
had that one set too so we're equipped

738
00:27:33,460 --> 00:27:36,040
it will break things good very well

739
00:27:36,040 --> 00:27:38,020
really all right who thinks that it was

740
00:27:38,020 --> 00:27:41,110
maybe about half and half all right do I

741
00:27:41,110 --> 00:27:45,240
hear in ninety ten ninety nine percent

742
00:27:45,240 --> 00:27:49,750
five not five percent five there were

743
00:27:49,750 --> 00:27:52,030
five customers who did get it right

744
00:27:52,030 --> 00:27:53,530
one of them was optimized on

745
00:27:53,530 --> 00:27:55,600
infrastructure the other for our

746
00:27:55,600 --> 00:27:57,190
wonderful wonderful businesses that care

747
00:27:57,190 --> 00:28:00,700
a lot about end-user security but let's

748
00:28:00,700 --> 00:28:02,290
just say that your bank and your

749
00:28:02,290 --> 00:28:05,620
newspaper and your email provider maybe

750
00:28:05,620 --> 00:28:06,760
could have looked at this setting a

751
00:28:06,760 --> 00:28:08,370
little more carefully and thought harder

752
00:28:08,370 --> 00:28:11,080
right statistically everybody got it

753
00:28:11,080 --> 00:28:12,430
wrong and we had known right we shipped

754
00:28:12,430 --> 00:28:14,080
this ethically we shipped a manual for

755
00:28:14,080 --> 00:28:15,700
how to use the setting and we discovered

756
00:28:15,700 --> 00:28:17,680
that basically everybody given that

757
00:28:17,680 --> 00:28:20,650
choice got it wrong so we called some of

758
00:28:20,650 --> 00:28:22,240
them up we flew out we visited we said

759
00:28:22,240 --> 00:28:24,010
what were you thinking like - you know

760
00:28:24,010 --> 00:28:25,750
major banks right so we walked on Wall

761
00:28:25,750 --> 00:28:27,070
Street across the street back and forth

762
00:28:27,070 --> 00:28:28,600
through the banks said excuse me we want

763
00:28:28,600 --> 00:28:30,430
to talk to you we in a routine review of

764
00:28:30,430 --> 00:28:32,110
your security configuration we

765
00:28:32,110 --> 00:28:34,420
discovered that you don't actually check

766
00:28:34,420 --> 00:28:36,640
anything with TLS when it crosses most

767
00:28:36,640 --> 00:28:38,260
of the internet right so an end-users

768
00:28:38,260 --> 00:28:40,480
getting to if you go to access your bank

769
00:28:40,480 --> 00:28:42,370
from on campus here there's Akamai

770
00:28:42,370 --> 00:28:44,770
servers on UCSB property so you're

771
00:28:44,770 --> 00:28:46,450
talking to those with TLS and then the

772
00:28:46,450 --> 00:28:48,220
long haul back to New York is happening

773
00:28:48,220 --> 00:28:49,920
with no authentication and no integrity

774
00:28:49,920 --> 00:28:54,670
whoops so we found this happens we'd

775
00:28:54,670 --> 00:28:56,710
like to fix it and they said oh they

776
00:28:56,710 --> 00:28:58,450
talked to us they told us stories about

777
00:28:58,450 --> 00:29:00,790
how they put it this way in test mode to

778
00:29:00,790 --> 00:29:02,800
set up right they wanted to make sure

779
00:29:02,800 --> 00:29:05,110
that the site even could work because

780
00:29:05,110 --> 00:29:06,670
they think of crypto as a tool to break

781
00:29:06,670 --> 00:29:09,460
things and then after that it tested

782
00:29:09,460 --> 00:29:11,020
successfully and they never got around

783
00:29:11,020 --> 00:29:13,060
to shutting it off we said it's been 12

784
00:29:13,060 --> 00:29:15,540
years and they said oh all right

785
00:29:15,540 --> 00:29:19,180
so it took four and a half years to move

786
00:29:19,180 --> 00:29:20,710
everybody across to where that's fixed

787
00:29:20,710 --> 00:29:23,650
and to where now essentially all of

788
00:29:23,650 --> 00:29:26,100
those forward connections use TLS right

789
00:29:26,100 --> 00:29:28,360
overwhelmingly they can pin a key

790
00:29:28,360 --> 00:29:30,400
there's no need for PKI in this it's a

791
00:29:30,400 --> 00:29:32,860
much simpler problem than major web

792
00:29:32,860 --> 00:29:34,690
crypto because there's only two parties

793
00:29:34,690 --> 00:29:37,720
right if example Bank comes to us and

794
00:29:37,720 --> 00:29:39,070
says they want to be a customer they

795
00:29:39,070 --> 00:29:40,300
show us what key they're gonna use they

796
00:29:40,300 --> 00:29:41,350
never have to rotate it there's no need

797
00:29:41,350 --> 00:29:43,210
for certificates and dates it's just

798
00:29:43,210 --> 00:29:44,410
here's the key I'm gonna use look for

799
00:29:44,410 --> 00:29:46,360
that so it's just plain old public key

800
00:29:46,360 --> 00:29:49,390
crypto and still for years and more to

801
00:29:49,390 --> 00:29:55,060
get folks to adopt it so what do we

802
00:29:55,060 --> 00:29:55,630
learn from that

803
00:29:55,630 --> 00:29:57,700
if you imagine a stereotypical

804
00:29:57,700 --> 00:30:00,520
cryptographic protocol and and forgive

805
00:30:00,520 --> 00:30:02,679
me I'm from a sort of more algebraic

806
00:30:02,679 --> 00:30:05,170
world of someone's gonna send a message

807
00:30:05,170 --> 00:30:06,940
and there's a little proof and you send

808
00:30:06,940 --> 00:30:07,960
a message and there's a little proof

809
00:30:07,960 --> 00:30:09,100
before you send the message right and

810
00:30:09,100 --> 00:30:10,150
those proofs may be buying some

811
00:30:10,150 --> 00:30:11,200
variables that you're gonna put in those

812
00:30:11,200 --> 00:30:13,270
messages if at all possible

813
00:30:13,270 --> 00:30:14,710
some implementer will leave out all the

814
00:30:14,710 --> 00:30:16,120
proofs and they'll just send the

815
00:30:16,120 --> 00:30:17,860
syntactic messages and they'll see that

816
00:30:17,860 --> 00:30:19,780
it worked right so simulation based

817
00:30:19,780 --> 00:30:21,280
proofs of security are a lot closer to

818
00:30:21,280 --> 00:30:23,740
reality than we thought you can in fact

819
00:30:23,740 --> 00:30:25,750
operate as a cryptographic endpoint on

820
00:30:25,750 --> 00:30:28,650
the internet with no brain as we proof

821
00:30:28,650 --> 00:30:31,480
so that's an issue and where we're

822
00:30:31,480 --> 00:30:33,520
starting to see some bending in that and

823
00:30:33,520 --> 00:30:35,710
some flex he's around algorithms where

824
00:30:35,710 --> 00:30:38,350
you can't forget to check it right where

825
00:30:38,350 --> 00:30:39,610
you're gonna we're gonna give you

826
00:30:39,610 --> 00:30:41,440
something for secrecy and integrity and

827
00:30:41,440 --> 00:30:44,110
you can't possibly decrypt the secret

828
00:30:44,110 --> 00:30:45,970
without calculating the integrity

829
00:30:45,970 --> 00:30:47,920
checksum along the way that's a way to

830
00:30:47,920 --> 00:30:49,390
get these endpoints to actually do an

831
00:30:49,390 --> 00:30:51,370
integrity check some if they can skip it

832
00:30:51,370 --> 00:30:53,170
they will write even if they have to

833
00:30:53,170 --> 00:30:55,360
calculate it and send it back where they

834
00:30:55,360 --> 00:30:57,760
don't have to compare themselves someone

835
00:30:57,760 --> 00:31:01,090
will find a way to skip it we heard the

836
00:31:01,090 --> 00:31:03,940
most amazing explanations about why

837
00:31:03,940 --> 00:31:06,100
people didn't want to upgrade their

838
00:31:06,100 --> 00:31:08,530
origins to actually do the crypto and

839
00:31:08,530 --> 00:31:10,690
actually check provide certificates and

840
00:31:10,690 --> 00:31:12,580
get them checked some of us said well I

841
00:31:12,580 --> 00:31:15,490
can't put SSL there some of them even

842
00:31:15,490 --> 00:31:17,380
insist and you have to downgrade SSL

843
00:31:17,380 --> 00:31:18,460
comes in and we want you to go forward

844
00:31:18,460 --> 00:31:21,280
over a plain old HTTP I can't I'd have

845
00:31:21,280 --> 00:31:22,150
to pay for it

846
00:31:22,150 --> 00:31:24,520
who here operates a web server of some

847
00:31:24,520 --> 00:31:28,240
sort okay yeah all of you are using

848
00:31:28,240 --> 00:31:29,740
either open SSL or you're using

849
00:31:29,740 --> 00:31:32,230
Microsoft s channel right anyone else

850
00:31:32,230 --> 00:31:34,690
okay so if you said to me I can't turn

851
00:31:34,690 --> 00:31:36,790
on SSL I'd have to pay for the SSL

852
00:31:36,790 --> 00:31:40,780
software module that's weird right like

853
00:31:40,780 --> 00:31:42,280
if you took go talk to operators that

854
00:31:42,280 --> 00:31:44,770
sounds bizarre until you hit the largest

855
00:31:44,770 --> 00:31:46,870
end of the scale and it turns out that a

856
00:31:46,870 --> 00:31:49,180
huge number of them were using defunct

857
00:31:49,180 --> 00:31:52,870
web servers and they baked in things

858
00:31:52,870 --> 00:31:55,150
right like AOL web server AOL server

859
00:31:55,150 --> 00:31:57,700
with tickle baked in and so in order to

860
00:31:57,700 --> 00:31:59,020
switch web servers to something that

861
00:31:59,020 --> 00:32:01,000
supports modern crypto they'd have to

862
00:32:01,000 --> 00:32:02,800
port all of their code from tickle to

863
00:32:02,800 --> 00:32:06,280
perl or something else or they had a

864
00:32:06,280 --> 00:32:10,000
caching a load balancer and the load

865
00:32:10,000 --> 00:32:12,130
balancer is a TLS man-in-the-middle just

866
00:32:12,130 --> 00:32:14,320
like our caching proxies and they didn't

867
00:32:14,320 --> 00:32:15,550
have a service contract for it right

868
00:32:15,550 --> 00:32:16,480
they bought one they took it off the

869
00:32:16,480 --> 00:32:18,370
shelf the vendor says you

870
00:32:18,370 --> 00:32:19,600
shouldn't use this unless you have a

871
00:32:19,600 --> 00:32:20,980
service contract there's software

872
00:32:20,980 --> 00:32:22,330
patches will happen right it's a complex

873
00:32:22,330 --> 00:32:23,980
machine that speaks like four different

874
00:32:23,980 --> 00:32:26,050
TLS state machines going at once there

875
00:32:26,050 --> 00:32:28,000
are bugs in it well we didn't decided

876
00:32:28,000 --> 00:32:29,410
not to buy any of those so you've just

877
00:32:29,410 --> 00:32:32,290
had it running since 2002 and they went

878
00:32:32,290 --> 00:32:33,490
out of business and we need a new ones

879
00:32:33,490 --> 00:32:36,250
we'd have to pay for it we saw a huge

880
00:32:36,250 --> 00:32:37,780
number of folks from regulated

881
00:32:37,780 --> 00:32:40,090
industries who came in and said I don't

882
00:32:40,090 --> 00:32:41,740
want to have to do this you can't make

883
00:32:41,740 --> 00:32:42,400
me do this

884
00:32:42,400 --> 00:32:44,770
I'm regulated we said what does that

885
00:32:44,770 --> 00:32:45,940
mean they said well they checked me out

886
00:32:45,940 --> 00:32:47,920
for my security and we said how did you

887
00:32:47,920 --> 00:32:51,940
get this past them and they said well we

888
00:32:51,940 --> 00:32:54,760
did my Assessor says it has to be SSL

889
00:32:54,760 --> 00:32:58,000
they didn't say it has to be good SSL so

890
00:32:58,000 --> 00:32:59,559
one of them told us my Assessor says it

891
00:32:59,559 --> 00:33:01,330
has to be SSL so I can't change to this

892
00:33:01,330 --> 00:33:05,830
TLS thing we had a conversation with

893
00:33:05,830 --> 00:33:07,000
that assessment managed to help them

894
00:33:07,000 --> 00:33:09,340
smooth that one out we heard my next

895
00:33:09,340 --> 00:33:11,559
change window was in 2018 and remember

896
00:33:11,559 --> 00:33:12,640
in some cases we were hearing this in

897
00:33:12,640 --> 00:33:16,059
2012 in some cases we heard yeah we

898
00:33:16,059 --> 00:33:17,679
fixed it switch it and we'd switch it

899
00:33:17,679 --> 00:33:20,020
and they'd say oh my god switch it back

900
00:33:20,020 --> 00:33:23,140
why well we said we discovered we had

901
00:33:23,140 --> 00:33:25,270
another data center we lost it we'd

902
00:33:25,270 --> 00:33:26,890
wondered where that operating budget was

903
00:33:26,890 --> 00:33:28,390
going it turns out we had another 10

904
00:33:28,390 --> 00:33:30,700
machines in Chicago and they haven't

905
00:33:30,700 --> 00:33:32,140
been updated in ages and they can't

906
00:33:32,140 --> 00:33:33,400
speak modern protocols so we're gonna

907
00:33:33,400 --> 00:33:35,830
have to work on that oh but but they

908
00:33:35,830 --> 00:33:37,360
have access to all of your this was a

909
00:33:37,360 --> 00:33:38,740
bank but they have access to like all

910
00:33:38,740 --> 00:33:41,920
the customer data oh yeah

911
00:33:41,920 --> 00:33:43,750
I closed an account after that one and

912
00:33:43,750 --> 00:33:46,000
the best ones were I'm paying you to

913
00:33:46,000 --> 00:33:47,620
deal with the security I shouldn't have

914
00:33:47,620 --> 00:33:51,940
to do anything and and a number of those

915
00:33:51,940 --> 00:33:53,860
explained they they couldn't change it

916
00:33:53,860 --> 00:33:55,660
they did not control their TLS tax so

917
00:33:55,660 --> 00:33:56,860
this was people operating some of the

918
00:33:56,860 --> 00:33:58,870
biggest content sites on the web or a

919
00:33:58,870 --> 00:34:01,300
major media organization said I can't

920
00:34:01,300 --> 00:34:03,160
change my TLS configuration my origin

921
00:34:03,160 --> 00:34:05,320
why not I have no control over it well

922
00:34:05,320 --> 00:34:09,159
who does the IT department what well so

923
00:34:09,159 --> 00:34:10,480
apparently their IT department is

924
00:34:10,480 --> 00:34:12,370
staffed with more locks right and so

925
00:34:12,370 --> 00:34:13,989
that's them over there and they have an

926
00:34:13,989 --> 00:34:15,760
IT department that in some cases even

927
00:34:15,760 --> 00:34:17,830
ran a CDN of their own right they

928
00:34:17,830 --> 00:34:19,210
deployed thousands of machines around

929
00:34:19,210 --> 00:34:21,399
the world or the service area but

930
00:34:21,399 --> 00:34:23,639
they're paying us and we're not cheap

931
00:34:23,639 --> 00:34:26,320
they're paying us piles of money to use

932
00:34:26,320 --> 00:34:29,020
us as a CDN instead why because if

933
00:34:29,020 --> 00:34:30,409
you're the marketing department or the

934
00:34:30,409 --> 00:34:32,329
content Department one of these then

935
00:34:32,329 --> 00:34:34,609
it's much cheaper to pay us in money

936
00:34:34,609 --> 00:34:36,319
instead of you and you get to talk to

937
00:34:36,319 --> 00:34:38,299
some of our see care people instead of

938
00:34:38,299 --> 00:34:40,369
using the free service which is run by

939
00:34:40,369 --> 00:34:44,510
Morlocks and there's a message here for

940
00:34:44,510 --> 00:34:47,149
the enterprise IT groups of learning

941
00:34:47,149 --> 00:34:48,409
something about when they when they cut

942
00:34:48,409 --> 00:34:50,719
staffing and they let the Morlocks talk

943
00:34:50,719 --> 00:34:52,369
to the content Department then what

944
00:34:52,369 --> 00:34:54,109
happens is the content Department

945
00:34:54,109 --> 00:34:55,280
interprets that is damaged and routes

946
00:34:55,280 --> 00:34:59,480
around it that one I don't have a

947
00:34:59,480 --> 00:35:00,680
solution for and I don't think there's a

948
00:35:00,680 --> 00:35:02,030
crypto solution for that right that

949
00:35:02,030 --> 00:35:04,880
one's gonna be a social problem okay I

950
00:35:04,880 --> 00:35:06,650
said I would tell three stories but this

951
00:35:06,650 --> 00:35:08,450
tells me I have ten minutes left I have

952
00:35:08,450 --> 00:35:11,450
room for one more this is a story about

953
00:35:11,450 --> 00:35:13,730
something called SNI and if you read

954
00:35:13,730 --> 00:35:15,829
carefully that says hello your name is

955
00:35:15,829 --> 00:35:19,190
insert value here s and I is an

956
00:35:19,190 --> 00:35:22,309
extension to TLS and here's what it's

957
00:35:22,309 --> 00:35:24,829
for this is a really basic cryptographic

958
00:35:24,829 --> 00:35:26,960
principle that says you should mention

959
00:35:26,960 --> 00:35:28,910
the names of the parties you're talking

960
00:35:28,910 --> 00:35:32,660
about original SSL and TLS client sends

961
00:35:32,660 --> 00:35:34,849
to the server hello to some IP address

962
00:35:34,849 --> 00:35:36,920
the server says back hello here's a

963
00:35:36,920 --> 00:35:38,930
certificate proving I'm example.com and

964
00:35:38,930 --> 00:35:41,569
the client says example.com I don't want

965
00:35:41,569 --> 00:35:45,140
to talk to them I wanted ya Korg huh so

966
00:35:45,140 --> 00:35:47,900
that broke a lot and in the same way as

967
00:35:47,900 --> 00:35:49,910
ilion's of other protocols from Needham

968
00:35:49,910 --> 00:35:51,170
Schroeder's or Kerberos and everything

969
00:35:51,170 --> 00:35:52,760
else get fixed by mentioning the name a

970
00:35:52,760 --> 00:35:54,799
little bit more the client should say to

971
00:35:54,799 --> 00:35:55,400
the server

972
00:35:55,400 --> 00:35:57,890
hello IP address I want a particular

973
00:35:57,890 --> 00:35:59,869
site and the server can respond with oh

974
00:35:59,869 --> 00:36:01,039
yeah sure I've got that certificate

975
00:36:01,039 --> 00:36:02,660
available here I'll be that persona I

976
00:36:02,660 --> 00:36:04,819
don't talk to you alright so all of the

977
00:36:04,819 --> 00:36:07,130
places you know that are using many many

978
00:36:07,130 --> 00:36:09,309
host names on a small number of servers

979
00:36:09,309 --> 00:36:11,599
like folks like us who are sitting on to

980
00:36:11,599 --> 00:36:13,940
the 24th IP addresses we're doing that

981
00:36:13,940 --> 00:36:15,980
because most clients because some

982
00:36:15,980 --> 00:36:17,720
clients don't do this server name

983
00:36:17,720 --> 00:36:19,069
indication feature they don't support

984
00:36:19,069 --> 00:36:21,910
SMI okay how bad is it

985
00:36:21,910 --> 00:36:25,369
well SN I got designed and introduced

986
00:36:25,369 --> 00:36:28,609
this probably I recognized in 2001 it's

987
00:36:28,609 --> 00:36:30,559
still not commercially viable why not

988
00:36:30,559 --> 00:36:34,309
it takes about five years before most

989
00:36:34,309 --> 00:36:37,700
clients actually start shipping SNI it

990
00:36:37,700 --> 00:36:41,299
takes another five years before every

991
00:36:41,299 --> 00:36:43,030
browser you would plaza

992
00:36:43,030 --> 00:36:45,369
by Hughes has it when Android ships it

993
00:36:45,369 --> 00:36:47,920
in 2010 three years after that the

994
00:36:47,920 --> 00:36:49,840
standard Python and Java implementations

995
00:36:49,840 --> 00:36:52,869
still didn't support sni over they both

996
00:36:52,869 --> 00:36:54,010
didn't ship it near there near the tail

997
00:36:54,010 --> 00:36:57,730
end of 2014 first weeks of 2015 it never

998
00:36:57,730 --> 00:36:59,619
made it in Windows XP and it never made

999
00:36:59,619 --> 00:37:01,630
it this one's gonna be key into Android

1000
00:37:01,630 --> 00:37:04,660
2 to now Android 2 2 is old right if

1001
00:37:04,660 --> 00:37:05,950
you're carrying an Android device and

1002
00:37:05,950 --> 00:37:08,109
you're in this room the operating system

1003
00:37:08,109 --> 00:37:10,570
probably starts with like an H or K or

1004
00:37:10,570 --> 00:37:11,950
something right it's way later than

1005
00:37:11,950 --> 00:37:13,440
Froyo

1006
00:37:13,440 --> 00:37:16,450
but in huge chunks of the world if you

1007
00:37:16,450 --> 00:37:19,210
go to buy a smartphone you are probably

1008
00:37:19,210 --> 00:37:20,830
getting a device that still runs to this

1009
00:37:20,830 --> 00:37:24,100
day Android 2 - why because in 2/3 the

1010
00:37:24,100 --> 00:37:26,050
licensing terms changed and Google gets

1011
00:37:26,050 --> 00:37:28,540
more control over what's on them so - 2

1012
00:37:28,540 --> 00:37:30,580
is in some cases the last free Android

1013
00:37:30,580 --> 00:37:31,630
rights there's a lot of folks out there

1014
00:37:31,630 --> 00:37:33,700
still buying those phones this is what

1015
00:37:33,700 --> 00:37:37,390
we saw across the middle of 2014 now

1016
00:37:37,390 --> 00:37:40,840
what happened right around the end of

1017
00:37:40,840 --> 00:37:48,190
April in 2014 anybody know no it's not

1018
00:37:48,190 --> 00:37:49,240
heartbleed actually this is a couple

1019
00:37:49,240 --> 00:37:51,040
weeks after heartbleed that's not

1020
00:37:51,040 --> 00:37:53,230
heartbleed that is Microsoft killing off

1021
00:37:53,230 --> 00:37:55,690
Windows XP that is the expiration of

1022
00:37:55,690 --> 00:37:57,609
service for Windows XP was courageous it

1023
00:37:57,609 --> 00:37:59,830
really was if you look before that time

1024
00:37:59,830 --> 00:38:02,500
like I fit a line over it but it's sort

1025
00:38:02,500 --> 00:38:04,180
of an unhappy looking line with a lot of

1026
00:38:04,180 --> 00:38:06,100
outliers right you see these things

1027
00:38:06,100 --> 00:38:07,660
banging up and down all over the place

1028
00:38:07,660 --> 00:38:10,630
and if anything sni adoption is trending

1029
00:38:10,630 --> 00:38:15,060
downwards how the hell can that be well

1030
00:38:15,060 --> 00:38:17,410
that's that there were more Android -

1031
00:38:17,410 --> 00:38:19,180
two machines showing up on the internet

1032
00:38:19,180 --> 00:38:21,990
then there were machines getting fixed

1033
00:38:21,990 --> 00:38:26,350
but then Windows XP service ends and

1034
00:38:26,350 --> 00:38:28,720
within seven days after that huge

1035
00:38:28,720 --> 00:38:30,670
numbers of Windows XP machines vanish

1036
00:38:30,670 --> 00:38:32,770
from the internet now I can't tell where

1037
00:38:32,770 --> 00:38:34,180
they went right I can just tell they

1038
00:38:34,180 --> 00:38:36,670
stopped talking to me so it might be

1039
00:38:36,670 --> 00:38:38,320
someone pulled the power cable I hope

1040
00:38:38,320 --> 00:38:39,940
this is what happened it might be

1041
00:38:39,940 --> 00:38:41,470
someone pulled the network cable and

1042
00:38:41,470 --> 00:38:42,550
they're still running but they're not on

1043
00:38:42,550 --> 00:38:44,250
the Internet and so maybe they're safe

1044
00:38:44,250 --> 00:38:47,050
it might be that they got stuck behind

1045
00:38:47,050 --> 00:38:49,840
some proxy so we're doing like TLS 1.0

1046
00:38:49,840 --> 00:38:51,100
locally and then they're doing something

1047
00:38:51,100 --> 00:38:51,609
more modern

1048
00:38:51,609 --> 00:38:54,310
outbound could be maybe that's not the

1049
00:38:54,310 --> 00:38:54,940
end of the world

1050
00:38:54,940 --> 00:38:56,140
well they vanished

1051
00:38:56,140 --> 00:38:57,970
what's also notable is that the variance

1052
00:38:57,970 --> 00:39:01,360
drops enormous Lee why is that the

1053
00:39:01,360 --> 00:39:02,950
variance before when you see these big

1054
00:39:02,950 --> 00:39:04,720
outliers that's where my sampling

1055
00:39:04,720 --> 00:39:08,070
technology caught things on weekends and

1056
00:39:08,070 --> 00:39:11,230
what we observed before that date is

1057
00:39:11,230 --> 00:39:13,120
that people had wonderful cryptographic

1058
00:39:13,120 --> 00:39:14,980
tools available to them on Saturday and

1059
00:39:14,980 --> 00:39:18,190
Sunday and at evenings but Monday to

1060
00:39:18,190 --> 00:39:20,050
Friday their cryptographic tools suck

1061
00:39:20,050 --> 00:39:22,780
that's because they were using Windows

1062
00:39:22,780 --> 00:39:25,000
XP often and that was the best tool they

1063
00:39:25,000 --> 00:39:27,460
had often paired with really atrocious

1064
00:39:27,460 --> 00:39:30,070
intermediate proxies right and then

1065
00:39:30,070 --> 00:39:31,660
after that we see the variants dropping

1066
00:39:31,660 --> 00:39:35,140
enormous ly there's still some and when

1067
00:39:35,140 --> 00:39:36,790
I looked at this I pulled this data

1068
00:39:36,790 --> 00:39:39,100
around October 2014 and I said okay

1069
00:39:39,100 --> 00:39:41,410
thank God that Microsoft actually did

1070
00:39:41,410 --> 00:39:43,150
that now I need to get someone to do

1071
00:39:43,150 --> 00:39:45,340
that to Android 2 - which is open source

1072
00:39:45,340 --> 00:39:47,320
software so who do I find to be the act

1073
00:39:47,320 --> 00:39:49,660
as the vendor for that so we'd started

1074
00:39:49,660 --> 00:39:51,040
some conversations talking about it

1075
00:39:51,040 --> 00:39:52,720
those conversations went on long enough

1076
00:39:52,720 --> 00:39:55,120
that we got more data and this is what

1077
00:39:55,120 --> 00:39:58,360
we see now so you can still see that

1078
00:39:58,360 --> 00:40:00,910
jump that jump that I just looked at is

1079
00:40:00,910 --> 00:40:03,790
this jump right and so before that all

1080
00:40:03,790 --> 00:40:05,710
the way back to 2013 there's some sort

1081
00:40:05,710 --> 00:40:07,900
of it's vaguely sinusoidal I don't know

1082
00:40:07,900 --> 00:40:10,150
what this is there's some annual cycle

1083
00:40:10,150 --> 00:40:12,690
related to like summer vacations maybe

1084
00:40:12,690 --> 00:40:15,310
and then even that damps out and

1085
00:40:15,310 --> 00:40:17,350
sometime around January 2015

1086
00:40:17,350 --> 00:40:19,570
you start seeing something that you can

1087
00:40:19,570 --> 00:40:22,210
at least pretend is exponential fall off

1088
00:40:22,210 --> 00:40:24,370
in the number of old machines that don't

1089
00:40:24,370 --> 00:40:27,520
support SN I so we're winning it's up

1090
00:40:27,520 --> 00:40:30,310
around 97 and a half 98 percent right

1091
00:40:30,310 --> 00:40:33,310
now and and trending smaller and most of

1092
00:40:33,310 --> 00:40:35,680
what's left there are the same things

1093
00:40:35,680 --> 00:40:37,450
that I made fun of on the SSL v3 slide

1094
00:40:37,450 --> 00:40:40,120
right so if we hadn't had the poodle

1095
00:40:40,120 --> 00:40:41,740
experience I'd say great we're almost

1096
00:40:41,740 --> 00:40:44,470
down to 1% when it's hit hits 1% just

1097
00:40:44,470 --> 00:40:45,670
turn off all the old ones no one will

1098
00:40:45,670 --> 00:40:48,970
care maybe a little wiser now we've

1099
00:40:48,970 --> 00:40:50,650
heard all right we shouldn't do that but

1100
00:40:50,650 --> 00:40:52,060
the neat thing here is this one's more

1101
00:40:52,060 --> 00:40:54,010
server controlled so this is that you

1102
00:40:54,010 --> 00:40:54,790
can do it

1103
00:40:54,790 --> 00:40:56,380
server my serve our customer by customer

1104
00:40:56,380 --> 00:40:58,390
all right so if you wanted a stand up an

1105
00:40:58,390 --> 00:41:00,910
e-commerce site now you could have a

1106
00:41:00,910 --> 00:41:02,470
perfectly profitable e-commerce site

1107
00:41:02,470 --> 00:41:05,530
that only used SNI today right in the US

1108
00:41:05,530 --> 00:41:07,480
now I hear that there are some user

1109
00:41:07,480 --> 00:41:10,370
populations say those were IT

1110
00:41:10,370 --> 00:41:11,540
only comes in to upgrade the computers

1111
00:41:11,540 --> 00:41:13,910
every one or two years maybe they don't

1112
00:41:13,910 --> 00:41:15,170
have this world yet right in that world

1113
00:41:15,170 --> 00:41:16,400
you might see 10% of the population

1114
00:41:16,400 --> 00:41:20,510
can't do sni the browser vendors have a

1115
00:41:20,510 --> 00:41:22,040
slightly different view because they get

1116
00:41:22,040 --> 00:41:23,660
telemetry from the browsers that tells

1117
00:41:23,660 --> 00:41:26,330
them what's happening but big

1118
00:41:26,330 --> 00:41:27,860
enterprises turn that off and don't send

1119
00:41:27,860 --> 00:41:29,960
the telemetry right so there is probably

1120
00:41:29,960 --> 00:41:31,700
a hidden population out there of people

1121
00:41:31,700 --> 00:41:33,410
who are behind proxies so I can't see

1122
00:41:33,410 --> 00:41:35,390
them not sending telemetry so the

1123
00:41:35,390 --> 00:41:37,000
browser vendors can't see them and

1124
00:41:37,000 --> 00:41:39,470
taking no updates so they're exactly the

1125
00:41:39,470 --> 00:41:41,930
ones who really need help for them I

1126
00:41:41,930 --> 00:41:45,730
advocate prayer will replace hardware

1127
00:41:45,730 --> 00:41:51,350
okay from that what can we learn it what

1128
00:41:51,350 --> 00:41:54,610
can we try to take forward first problem

1129
00:41:54,610 --> 00:41:56,870
overwhelmingly people don't actually

1130
00:41:56,870 --> 00:41:59,330
rotate compromised secrets even if the

1131
00:41:59,330 --> 00:42:02,750
fact of the compromise becomes public so

1132
00:42:02,750 --> 00:42:05,000
the mathematical model that says we're

1133
00:42:05,000 --> 00:42:06,470
gonna associate a person with a long

1134
00:42:06,470 --> 00:42:11,080
term key and that's the identity doesn't

1135
00:42:11,080 --> 00:42:13,490
hold right it's a it's a it's a useful

1136
00:42:13,490 --> 00:42:14,780
model it tells you some useful things

1137
00:42:14,780 --> 00:42:18,170
but we're hitting its limits when we try

1138
00:42:18,170 --> 00:42:19,850
to look at scale and how people are

1139
00:42:19,850 --> 00:42:22,280
actually using crypto you knew people

1140
00:42:22,280 --> 00:42:24,380
shared passwords I'm here to tell you

1141
00:42:24,380 --> 00:42:25,460
maybe you've done it yourself very

1142
00:42:25,460 --> 00:42:27,950
naughty I'm here to tell you that there

1143
00:42:27,950 --> 00:42:29,210
are people who are sharing cryptographic

1144
00:42:29,210 --> 00:42:31,280
keys in exactly the ways that we don't

1145
00:42:31,280 --> 00:42:35,170
want them to second thing to learn

1146
00:42:35,170 --> 00:42:37,760
protocols are gonna live for 10 to 15

1147
00:42:37,760 --> 00:42:42,410
years it took SNI and heartbleed and

1148
00:42:42,410 --> 00:42:46,010
poodle to kill off SSL v2 and v3 right

1149
00:42:46,010 --> 00:42:49,160
that was the worst crises we thought we

1150
00:42:49,160 --> 00:42:51,980
could imagine at the time so bad that

1151
00:42:51,980 --> 00:42:54,170
even if someone walks in at one of the

1152
00:42:54,170 --> 00:42:55,670
post pontem sessions and says by the way

1153
00:42:55,670 --> 00:42:57,560
I brought my three kilobit quantum

1154
00:42:57,560 --> 00:42:59,780
computer let me tell you your RSA keys

1155
00:42:59,780 --> 00:43:02,750
factors it will be ten years from that

1156
00:43:02,750 --> 00:43:05,750
date before we can get RSA off the

1157
00:43:05,750 --> 00:43:07,850
public Internet at least right because

1158
00:43:07,850 --> 00:43:09,650
we had similar crises for these other

1159
00:43:09,650 --> 00:43:11,600
protocols and we couldn't move we have

1160
00:43:11,600 --> 00:43:13,520
better infrastructure now it's true but

1161
00:43:13,520 --> 00:43:14,870
we have more people and we have more

1162
00:43:14,870 --> 00:43:17,000
weird old devices too so the best model

1163
00:43:17,000 --> 00:43:19,390
for the future is the recent past and

1164
00:43:19,390 --> 00:43:22,789
I'm here from industry to say that the

1165
00:43:22,789 --> 00:43:27,199
quantum crypto world we need from you a

1166
00:43:27,199 --> 00:43:30,079
decision is it super singularities is it

1167
00:43:30,079 --> 00:43:32,929
lattice based is a code based we need

1168
00:43:32,929 --> 00:43:35,329
something that we can start shipping and

1169
00:43:35,329 --> 00:43:37,759
working with it's wonderful to see that

1170
00:43:37,759 --> 00:43:39,380
Google and Mozilla and a handful of

1171
00:43:39,380 --> 00:43:41,779
others are playing at the edges but we

1172
00:43:41,779 --> 00:43:43,519
need from the theory world to know now

1173
00:43:43,519 --> 00:43:45,529
because we have this terrible feeling

1174
00:43:45,529 --> 00:43:47,390
the quantum computer people tell us that

1175
00:43:47,390 --> 00:43:49,579
they're 10 15 years out which means the

1176
00:43:49,579 --> 00:43:50,900
time to start shipping mainstream

1177
00:43:50,900 --> 00:43:53,059
browsers and mainstream crypto endpoints

1178
00:43:53,059 --> 00:43:56,779
with post quantum crypto in it is now it

1179
00:43:56,779 --> 00:43:57,769
would be really good if we could do that

1180
00:43:57,769 --> 00:44:03,619
this summer so your later moreover Keys

1181
00:44:03,619 --> 00:44:05,479
will be shared between versions of the

1182
00:44:05,479 --> 00:44:07,640
same protocol now there's social hacks

1183
00:44:07,640 --> 00:44:09,559
we can do on that right that's not the

1184
00:44:09,559 --> 00:44:11,390
next version of TLS that's called quick

1185
00:44:11,390 --> 00:44:13,219
instead so that should use different

1186
00:44:13,219 --> 00:44:15,439
keys half work half didn't work people

1187
00:44:15,439 --> 00:44:16,729
actually shared key between quick and

1188
00:44:16,729 --> 00:44:21,769
TLS a bit too there's a common meaning

1189
00:44:21,769 --> 00:44:23,390
of uncompromised is use only in

1190
00:44:23,390 --> 00:44:25,249
accordance with this protocol we have

1191
00:44:25,249 --> 00:44:26,929
these composability frameworks that tell

1192
00:44:26,929 --> 00:44:29,419
us where you can bend around that we

1193
00:44:29,419 --> 00:44:32,269
could really use some more theoretical

1194
00:44:32,269 --> 00:44:34,939
work to explain to industry what does it

1195
00:44:34,939 --> 00:44:38,059
mean when I share keys between TLS 1.0 1

1196
00:44:38,059 --> 00:44:40,489
1 1 2 1 3 what does it mean when I'm

1197
00:44:40,489 --> 00:44:42,469
speaking HTTP over that most of the time

1198
00:44:42,469 --> 00:44:45,049
but sometimes something else and we're

1199
00:44:45,049 --> 00:44:46,640
mixing those keys together we could use

1200
00:44:46,640 --> 00:44:48,739
some help in understanding that and the

1201
00:44:48,739 --> 00:44:50,989
last lesson is implementers we'll skip

1202
00:44:50,989 --> 00:44:53,419
all imaginable checks and some that are

1203
00:44:53,419 --> 00:44:55,609
even not imaginable we have this model

1204
00:44:55,609 --> 00:44:58,339
of honest but curious I'd like to ask

1205
00:44:58,339 --> 00:44:59,989
for some help on people who are honest

1206
00:44:59,989 --> 00:45:01,789
but flaky right people who are

1207
00:45:01,789 --> 00:45:04,640
simulating a protocol participant but

1208
00:45:04,640 --> 00:45:06,319
they want to send every possible message

1209
00:45:06,319 --> 00:45:07,489
they can and I haven't really done their

1210
00:45:07,489 --> 00:45:12,099
homework first cool

1211
00:45:12,619 --> 00:45:15,450
relatedly um what checks could we make

1212
00:45:15,450 --> 00:45:17,400
unskipable right in the same way that

1213
00:45:17,400 --> 00:45:19,440
some of the aad constructions do how

1214
00:45:19,440 --> 00:45:20,549
could we make it so that you can't

1215
00:45:20,549 --> 00:45:22,470
possibly get the secret unless the

1216
00:45:22,470 --> 00:45:24,630
integrity check worked and the more that

1217
00:45:24,630 --> 00:45:26,249
we can build protocols that way the

1218
00:45:26,249 --> 00:45:27,690
safer we can feel about what some of

1219
00:45:27,690 --> 00:45:29,069
these horrible horrible implementers

1220
00:45:29,069 --> 00:45:31,319
like me are doing thank you all very

1221
00:45:31,319 --> 00:45:33,150
much for your time I'll be here through

1222
00:45:33,150 --> 00:45:34,619
Wednesday night I'd love to talk more

1223
00:45:34,619 --> 00:45:35,940
and I'm really happy to take questions

1224
00:45:35,940 --> 00:45:39,229
and then we'll go have some lunch

