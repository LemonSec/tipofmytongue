1
00:00:00,320 --> 00:00:02,639
all right up next

2
00:00:02,639 --> 00:00:04,799
we have randy parkman

3
00:00:04,799 --> 00:00:07,359
with delicious pretzels

4
00:00:07,359 --> 00:00:10,639
and devious packets hi randy

5
00:00:10,639 --> 00:00:12,160
hi angela

6
00:00:12,160 --> 00:00:14,080
hi everybody at pancakes con this has

7
00:00:14,080 --> 00:00:16,079
been such a fun experience today and

8
00:00:16,079 --> 00:00:17,520
we're looking forward to adding a little

9
00:00:17,520 --> 00:00:19,680
bit to it

10
00:00:19,680 --> 00:00:21,039
so

11
00:00:21,039 --> 00:00:23,279
let me

12
00:00:23,279 --> 00:00:26,080
start sharing my screen

13
00:00:26,080 --> 00:00:27,680
all right i think you should be able to

14
00:00:27,680 --> 00:00:30,000
see that everybody see that all right

15
00:00:30,000 --> 00:00:32,719
looks good all right my name is randy

16
00:00:32,719 --> 00:00:33,920
i'm lindsay

17
00:00:33,920 --> 00:00:35,600
we're going to share with you one of our

18
00:00:35,600 --> 00:00:37,440
favorite recipes for making soft

19
00:00:37,440 --> 00:00:39,680
pretzels at home and if we have some

20
00:00:39,680 --> 00:00:41,040
time at the end we might tell a little

21
00:00:41,040 --> 00:00:43,040
bit story a few stories about pretzels

22
00:00:43,040 --> 00:00:44,480
but we're going to try and get through

23
00:00:44,480 --> 00:00:46,480
this live baking experience first and

24
00:00:46,480 --> 00:00:48,320
leave enough time at the end to talk

25
00:00:48,320 --> 00:00:50,320
about domain fronting which is a lot of

26
00:00:50,320 --> 00:00:51,680
fun too

27
00:00:51,680 --> 00:00:53,680
all right so we're going to talk over

28
00:00:53,680 --> 00:00:55,680
these videos of this dough that we made

29
00:00:55,680 --> 00:00:57,039
yesterday

30
00:00:57,039 --> 00:01:00,320
you start off with one cup of milk we

31
00:01:00,320 --> 00:01:03,199
use almond milk because we have lots of

32
00:01:03,199 --> 00:01:05,119
people who are lactose intolerant and it

33
00:01:05,119 --> 00:01:07,200
comes out really good and you want the

34
00:01:07,200 --> 00:01:09,520
almond milk or the regular milk to be

35
00:01:09,520 --> 00:01:12,960
warm at about 115 degrees fahrenheit the

36
00:01:12,960 --> 00:01:14,720
reason for the warmth is to activate the

37
00:01:14,720 --> 00:01:17,200
yeast but if you make it too hot then it

38
00:01:17,200 --> 00:01:19,680
can kill the yeast so that's one of the

39
00:01:19,680 --> 00:01:21,680
reasons why you watch the yeast and make

40
00:01:21,680 --> 00:01:25,600
sure that it rises or proofs right

41
00:01:25,600 --> 00:01:27,360
next thing that you're going to do is

42
00:01:27,360 --> 00:01:30,079
add the yeast and if you've got a

43
00:01:30,079 --> 00:01:32,079
package of yeast you can just rip it

44
00:01:32,079 --> 00:01:34,799
open and put it right in um but if you

45
00:01:34,799 --> 00:01:37,200
have like a you know a baking problem

46
00:01:37,200 --> 00:01:38,880
like us and you have a lot of yeast in

47
00:01:38,880 --> 00:01:41,119
your refrigerator you can use a teaspoon

48
00:01:41,119 --> 00:01:43,280
measure and do two and a quarter

49
00:01:43,280 --> 00:01:45,600
teaspoons of yeast which is the same as

50
00:01:45,600 --> 00:01:47,600
a

51
00:01:47,600 --> 00:01:49,680
single packet yup sorry about the dog

52
00:01:49,680 --> 00:01:51,680
we'll get her quiet

53
00:01:51,680 --> 00:01:54,720
um she's wanting some more treats

54
00:01:54,720 --> 00:01:56,399
which is her reward for sitting through

55
00:01:56,399 --> 00:01:57,680
pancakes con

56
00:01:57,680 --> 00:01:59,600
so next we're going to put in some brown

57
00:01:59,600 --> 00:02:01,759
sugar the brown sugar has a couple of

58
00:02:01,759 --> 00:02:04,479
different reasons um in this recipe one

59
00:02:04,479 --> 00:02:06,000
is to make the pretzels a little bit

60
00:02:06,000 --> 00:02:08,399
sweet this is debatable whether you want

61
00:02:08,399 --> 00:02:09,919
a sweet pretzel or not but this is

62
00:02:09,919 --> 00:02:12,319
something that we really enjoy

63
00:02:12,319 --> 00:02:14,080
it also feeds the yeast it gives the

64
00:02:14,080 --> 00:02:15,599
yeast something to

65
00:02:15,599 --> 00:02:18,319
consume and yeast does a better job of

66
00:02:18,319 --> 00:02:20,239
rising the dough so it's soft and then

67
00:02:20,239 --> 00:02:21,680
the last thing that it does is it helps

68
00:02:21,680 --> 00:02:23,680
the pretzels brown up really nicely in

69
00:02:23,680 --> 00:02:26,000
the oven so that's why we use the brown

70
00:02:26,000 --> 00:02:27,280
sugar

71
00:02:27,280 --> 00:02:29,120
um next you're gonna wait about five

72
00:02:29,120 --> 00:02:30,400
minutes and make sure that the yeast

73
00:02:30,400 --> 00:02:32,239
gets foamy um this is called proofing

74
00:02:32,239 --> 00:02:34,879
the yeast and it's really uh useful so

75
00:02:34,879 --> 00:02:36,959
that you don't end up if you've got bad

76
00:02:36,959 --> 00:02:39,120
yeast or if you've killed it or done

77
00:02:39,120 --> 00:02:40,720
something wrong you don't want to go

78
00:02:40,720 --> 00:02:42,000
through all the trouble of making

79
00:02:42,000 --> 00:02:43,360
pretzels and then have them come out

80
00:02:43,360 --> 00:02:46,720
like hard pretzels in the end right

81
00:02:46,720 --> 00:02:47,519
so

82
00:02:47,519 --> 00:02:49,840
uh next we're gonna mix in some flour

83
00:02:49,840 --> 00:02:52,239
with the yeast and we start off with one

84
00:02:52,239 --> 00:02:54,640
cup of flour

85
00:02:54,640 --> 00:02:56,879
and measure that carefully and then put

86
00:02:56,879 --> 00:02:59,840
that into a big bowl and add the yeast

87
00:02:59,840 --> 00:03:02,720
and milk mixture into that and then stir

88
00:03:02,720 --> 00:03:05,040
it together with a wooden spoon

89
00:03:05,040 --> 00:03:07,280
now you can also do this in an electric

90
00:03:07,280 --> 00:03:09,519
stand mixer if you have one but we

91
00:03:09,519 --> 00:03:12,239
purposely did it this way by hand so

92
00:03:12,239 --> 00:03:14,000
that you can see that even if you don't

93
00:03:14,000 --> 00:03:16,080
have the fancy equipment

94
00:03:16,080 --> 00:03:17,840
you can still have a lot of fun and do

95
00:03:17,840 --> 00:03:20,319
baking at home it just takes longer and

96
00:03:20,319 --> 00:03:22,720
you have to be able to or be willing to

97
00:03:22,720 --> 00:03:24,640
put in a little bit more elbow grease

98
00:03:24,640 --> 00:03:26,480
yeah and this isn't your full dough yet

99
00:03:26,480 --> 00:03:28,400
you're just adding the flour to get a

100
00:03:28,400 --> 00:03:30,879
good start and get your

101
00:03:30,879 --> 00:03:33,519
liquids mixed in properly before you

102
00:03:33,519 --> 00:03:36,480
finalize your dough

103
00:03:36,480 --> 00:03:38,480
all right so next we're going to add in

104
00:03:38,480 --> 00:03:41,360
butter and again we used a vegan butter

105
00:03:41,360 --> 00:03:43,120
a plant butter because we wanted it to

106
00:03:43,120 --> 00:03:45,120
be lactose free and it comes out just

107
00:03:45,120 --> 00:03:47,840
fine but if you want to use regular

108
00:03:47,840 --> 00:03:50,319
butter i'm sure that is just fine too if

109
00:03:50,319 --> 00:03:52,000
you use regular butter and it's coming

110
00:03:52,000 --> 00:03:53,519
out of the refrigerator you might want

111
00:03:53,519 --> 00:03:55,760
to let it come to room temperature first

112
00:03:55,760 --> 00:03:58,159
so that it'll melt but the plant butter

113
00:03:58,159 --> 00:04:00,159
is soft enough already that it melts

114
00:04:00,159 --> 00:04:02,640
really easily remember you started off

115
00:04:02,640 --> 00:04:05,599
with 110 degree milk so this is already

116
00:04:05,599 --> 00:04:07,920
pretty warm and

117
00:04:07,920 --> 00:04:10,239
the butter melts pretty well in there so

118
00:04:10,239 --> 00:04:12,000
just keep stirring it until it's pretty

119
00:04:12,000 --> 00:04:13,360
well melted

120
00:04:13,360 --> 00:04:16,560
um and one of the reasons for butter in

121
00:04:16,560 --> 00:04:18,399
any kind of bread is to make it really

122
00:04:18,399 --> 00:04:21,519
soft this changes the consistency of it

123
00:04:21,519 --> 00:04:23,600
and this is a consistency that we really

124
00:04:23,600 --> 00:04:25,520
like in our pretzels so that's why we

125
00:04:25,520 --> 00:04:28,080
put the butter in

126
00:04:28,080 --> 00:04:29,919
next you're going to add the rest of the

127
00:04:29,919 --> 00:04:32,160
flour so it's about a cup and a half of

128
00:04:32,160 --> 00:04:33,440
flour

129
00:04:33,440 --> 00:04:36,240
and one teaspoon salt and i've read in a

130
00:04:36,240 --> 00:04:38,479
fancy bread baking book that you really

131
00:04:38,479 --> 00:04:41,120
shouldn't measure flour by volume you

132
00:04:41,120 --> 00:04:43,360
should really measure it by weight but

133
00:04:43,360 --> 00:04:45,040
that's really too much trouble we never

134
00:04:45,040 --> 00:04:46,400
do it and

135
00:04:46,400 --> 00:04:48,160
it seems to work out just fine so i'd

136
00:04:48,160 --> 00:04:49,600
say just do it whatever way is the

137
00:04:49,600 --> 00:04:51,600
easiest way for you

138
00:04:51,600 --> 00:04:53,360
and for us that's just use the cup

139
00:04:53,360 --> 00:04:54,720
measure

140
00:04:54,720 --> 00:04:56,400
so the reason that we're putting in the

141
00:04:56,400 --> 00:04:59,280
salt later is because we don't want to

142
00:04:59,280 --> 00:05:02,000
kill the yeast if you put in too high a

143
00:05:02,000 --> 00:05:04,240
concentration of salt to yeast it can

144
00:05:04,240 --> 00:05:06,479
kill the yeast early on but as long as

145
00:05:06,479 --> 00:05:08,720
the yeast has been diluted with the

146
00:05:08,720 --> 00:05:10,639
flour you've got a lot of volume in

147
00:05:10,639 --> 00:05:12,400
there you can put salt in without any

148
00:05:12,400 --> 00:05:14,639
problem for the yeast

149
00:05:14,639 --> 00:05:16,560
after you've combined this second

150
00:05:16,560 --> 00:05:19,600
edition of flour it's going to be really

151
00:05:19,600 --> 00:05:20,720
shaggy

152
00:05:20,720 --> 00:05:22,960
sticky mess and that's exactly where you

153
00:05:22,960 --> 00:05:25,039
want to be

154
00:05:25,039 --> 00:05:28,080
so it looks like this

155
00:05:28,479 --> 00:05:29,520
which is

156
00:05:29,520 --> 00:05:32,560
not pretzel consistency yet but this is

157
00:05:32,560 --> 00:05:33,919
exactly where you want to be at this

158
00:05:33,919 --> 00:05:36,919
moment

159
00:05:38,880 --> 00:05:41,120
all right so now we're gonna show how to

160
00:05:41,120 --> 00:05:44,000
knead uh the dough it takes about five

161
00:05:44,000 --> 00:05:46,960
minutes we timed it yesterday um and

162
00:05:46,960 --> 00:05:49,360
we'll just show you most of that um

163
00:05:49,360 --> 00:05:52,479
there's me i got in the video too

164
00:05:52,479 --> 00:05:53,919
and

165
00:05:53,919 --> 00:05:55,759
the i think the worst part about this or

166
00:05:55,759 --> 00:05:57,280
the part that might turn you off the

167
00:05:57,280 --> 00:05:59,039
most if you don't do this is that it's

168
00:05:59,039 --> 00:06:01,120
sticky dough and so it sticks to your

169
00:06:01,120 --> 00:06:04,080
hands so you definitely want to use

170
00:06:04,080 --> 00:06:05,840
plenty of flour be generous with the

171
00:06:05,840 --> 00:06:06,800
flour

172
00:06:06,800 --> 00:06:07,759
um

173
00:06:07,759 --> 00:06:09,280
lindsay actually taught me something

174
00:06:09,280 --> 00:06:10,880
with this yesterday i usually just make

175
00:06:10,880 --> 00:06:13,280
a mess of my hands um and have some

176
00:06:13,280 --> 00:06:15,120
flour kind of stacked up on the side of

177
00:06:15,120 --> 00:06:17,360
the the countertop

178
00:06:17,360 --> 00:06:19,199
but the better way to do it

179
00:06:19,199 --> 00:06:20,560
you'll see that i'm kneading the dough

180
00:06:20,560 --> 00:06:23,039
with my left hand until i can get it

181
00:06:23,039 --> 00:06:25,199
past the really sticky point so i can

182
00:06:25,199 --> 00:06:27,039
keep putting my right hand back into the

183
00:06:27,039 --> 00:06:29,280
flour container to add more and you'll

184
00:06:29,280 --> 00:06:30,639
notice that after i've added a little

185
00:06:30,639 --> 00:06:32,400
bit i dump the rest of it on the side so

186
00:06:32,400 --> 00:06:33,440
i don't have to reach back into the

187
00:06:33,440 --> 00:06:36,479
container repeatedly and once it's there

188
00:06:36,479 --> 00:06:38,720
exactly where my hands i can get both

189
00:06:38,720 --> 00:06:41,120
hands into the dough i no longer have to

190
00:06:41,120 --> 00:06:43,680
worry about reaching in as often and

191
00:06:43,680 --> 00:06:45,680
you'll notice that even after i've added

192
00:06:45,680 --> 00:06:47,840
the flour that's on the counter

193
00:06:47,840 --> 00:06:50,080
is still going to be a sticky dough i'll

194
00:06:50,080 --> 00:06:52,000
show you my palms in the video in just a

195
00:06:52,000 --> 00:06:53,280
minute and there's still a lot of dough

196
00:06:53,280 --> 00:06:56,400
stuck to me which is okay this is the

197
00:06:56,400 --> 00:06:58,240
kind of consistency that you're looking

198
00:06:58,240 --> 00:07:01,039
for and it will start to come together

199
00:07:01,039 --> 00:07:05,039
after you've needed that five minutes

200
00:07:05,680 --> 00:07:08,000
all right um again if you've got a stand

201
00:07:08,000 --> 00:07:10,319
mixer this just becomes super easy you

202
00:07:10,319 --> 00:07:11,520
don't have to really get your hands

203
00:07:11,520 --> 00:07:14,080
messy at all and you just let it go do

204
00:07:14,080 --> 00:07:16,000
we do it for five or like three minutes

205
00:07:16,000 --> 00:07:17,520
i i probably only ran it for three

206
00:07:17,520 --> 00:07:20,000
minutes quite regularly i leave this the

207
00:07:20,000 --> 00:07:21,919
dough quite sticky in the stand mixer

208
00:07:21,919 --> 00:07:24,000
and then let it rise in the stand mixer

209
00:07:24,000 --> 00:07:26,160
so this is actually adding more flour

210
00:07:26,160 --> 00:07:28,000
than i normally do

211
00:07:28,000 --> 00:07:29,840
but but it's still the consistency turns

212
00:07:29,840 --> 00:07:31,759
out the same yeah you can always add

213
00:07:31,759 --> 00:07:33,520
more flour later but you can't take the

214
00:07:33,520 --> 00:07:34,720
flour out

215
00:07:34,720 --> 00:07:36,319
um or at least not through any method

216
00:07:36,319 --> 00:07:38,560
that i'm aware of yeah um and if you put

217
00:07:38,560 --> 00:07:40,319
too much flour in the problem is that

218
00:07:40,319 --> 00:07:42,560
the dough gets heavy and thick and it's

219
00:07:42,560 --> 00:07:47,360
going to end up dry and just not as as

220
00:07:47,360 --> 00:07:49,759
risen right it's going to be more of a

221
00:07:49,759 --> 00:07:52,720
dense kind of a a packed um finished

222
00:07:52,720 --> 00:07:53,759
product

223
00:07:53,759 --> 00:07:56,720
and then if you look at the video here

224
00:07:56,720 --> 00:07:59,120
the the amount of stickiness here this

225
00:07:59,120 --> 00:08:00,879
is exactly what you're looking for if

226
00:08:00,879 --> 00:08:03,120
you're needing it by hand um it still

227
00:08:03,120 --> 00:08:05,199
comes cleanly off the counter or the

228
00:08:05,199 --> 00:08:06,560
cutting board or whatever you're needing

229
00:08:06,560 --> 00:08:09,599
it on um but it sticks just a little bit

230
00:08:09,599 --> 00:08:11,520
and then we're putting it into

231
00:08:11,520 --> 00:08:13,280
a bowl that is greased

232
00:08:13,280 --> 00:08:15,039
with plant butter or with whatever

233
00:08:15,039 --> 00:08:17,280
butter or you know anything will work

234
00:08:17,280 --> 00:08:18,800
you just don't want it to become a real

235
00:08:18,800 --> 00:08:20,160
sticky mess

236
00:08:20,160 --> 00:08:22,160
and then the last thing is to cover it

237
00:08:22,160 --> 00:08:25,360
up you could put a wet tea towel on it

238
00:08:25,360 --> 00:08:27,039
or you could put some plastic wrap like

239
00:08:27,039 --> 00:08:28,160
we did

240
00:08:28,160 --> 00:08:30,400
and then you let it sit and the recipe

241
00:08:30,400 --> 00:08:32,559
says to let it sit for an hour in a warm

242
00:08:32,559 --> 00:08:34,719
house it almost always takes two hours

243
00:08:34,719 --> 00:08:36,159
in our house i don't know why maybe it's

244
00:08:36,159 --> 00:08:38,080
just cooler we're in seattle and there's

245
00:08:38,080 --> 00:08:40,080
higher humidity and it's not ever very

246
00:08:40,080 --> 00:08:43,599
warm yeah so um we're gonna stop the

247
00:08:43,599 --> 00:08:46,080
video share and then just share our live

248
00:08:46,080 --> 00:08:48,480
video um here we go

249
00:08:48,480 --> 00:08:49,600
all right

250
00:08:49,600 --> 00:08:51,920
so now is the live baking time we're

251
00:08:51,920 --> 00:08:54,000
gonna take the dough that we made before

252
00:08:54,000 --> 00:08:55,839
and we're gonna make two different kinds

253
00:08:55,839 --> 00:08:58,320
of pretzels um i really like the kind of

254
00:08:58,320 --> 00:09:00,080
pretzels that

255
00:09:00,080 --> 00:09:02,160
are sort of the traditional shape

256
00:09:02,160 --> 00:09:05,760
um and lindsay does a pretzel knot that

257
00:09:05,760 --> 00:09:08,160
quite honestly it tastes better um but i

258
00:09:08,160 --> 00:09:09,839
like i kind of like making the shape

259
00:09:09,839 --> 00:09:11,360
because it's a lot of fun it doesn't

260
00:09:11,360 --> 00:09:14,240
taste better there's just a lot more

261
00:09:14,240 --> 00:09:16,720
soft dough that's right so if you if you

262
00:09:16,720 --> 00:09:18,560
like the crunchy outside of the pretzel

263
00:09:18,560 --> 00:09:20,399
more make the traditional shake if you

264
00:09:20,399 --> 00:09:22,800
like the center part that's really soft

265
00:09:22,800 --> 00:09:24,880
uh make the pretzel knot but we're going

266
00:09:24,880 --> 00:09:26,880
to show you both the other thing we want

267
00:09:26,880 --> 00:09:28,399
to show you is a technique that we

268
00:09:28,399 --> 00:09:31,360
learned from watching at auntie anne's

269
00:09:31,360 --> 00:09:32,959
auntie anne's if you're not in the

270
00:09:32,959 --> 00:09:35,920
united states i guess um is a a chain

271
00:09:35,920 --> 00:09:38,320
restaurant that uh makes fresh pretzels

272
00:09:38,320 --> 00:09:40,320
and always smells really good in malls

273
00:09:40,320 --> 00:09:42,080
and airports it sucks me in every time

274
00:09:42,080 --> 00:09:43,839
like i i have to buy a pretzel from

275
00:09:43,839 --> 00:09:44,880
auntie

276
00:09:44,880 --> 00:09:46,959
so we watched uh we had been doing

277
00:09:46,959 --> 00:09:48,880
pretzels for quite a while and we've

278
00:09:48,880 --> 00:09:50,880
been rolling the dough out into this

279
00:09:50,880 --> 00:09:52,959
really long snake and it just took a

280
00:09:52,959 --> 00:09:55,120
long time and then we watched uh the

281
00:09:55,120 --> 00:09:57,680
antis do it and they just

282
00:09:57,680 --> 00:09:59,920
made like a log of the dough like this

283
00:09:59,920 --> 00:10:02,000
well it's still really soft yep and then

284
00:10:02,000 --> 00:10:05,040
they used a knife or

285
00:10:05,040 --> 00:10:06,720
what is that thing called this is a

286
00:10:06,720 --> 00:10:08,959
bench scraper bench scraper whatever and

287
00:10:08,959 --> 00:10:10,720
you just cut off a long piece and it's

288
00:10:10,720 --> 00:10:13,519
already ready to go and then

289
00:10:13,519 --> 00:10:15,200
you don't hardly have to roll it at all

290
00:10:15,200 --> 00:10:17,680
you can just kind of like tap it like

291
00:10:17,680 --> 00:10:21,360
this and look i've got a perfect pretzel

292
00:10:21,360 --> 00:10:23,200
um tube

293
00:10:23,200 --> 00:10:25,279
um that is just about right uh without

294
00:10:25,279 --> 00:10:27,440
hardly doing any work at all okay so

295
00:10:27,440 --> 00:10:29,279
here's a giant pretzel yeah i know it's

296
00:10:29,279 --> 00:10:31,600
gonna be fun i like making big pretzels

297
00:10:31,600 --> 00:10:34,240
okay so here's the part that looks like

298
00:10:34,240 --> 00:10:35,839
it's really complicated but it's not

299
00:10:35,839 --> 00:10:37,920
just take the two ends

300
00:10:37,920 --> 00:10:39,040
and then

301
00:10:39,040 --> 00:10:42,480
you cross them cross them twice so

302
00:10:42,480 --> 00:10:43,680
then you've got something that looks

303
00:10:43,680 --> 00:10:47,040
like this and then you just loop

304
00:10:47,040 --> 00:10:49,839
the top of it down over the bottom

305
00:10:49,839 --> 00:10:52,320
and voila i've got a pretzel

306
00:10:52,320 --> 00:10:54,160
all right so lindsay you want to show

307
00:10:54,160 --> 00:10:56,800
how to make yeah the pretzel knot so

308
00:10:56,800 --> 00:10:59,279
usually i cut off a small round of dough

309
00:10:59,279 --> 00:11:00,800
on the end of them

310
00:11:00,800 --> 00:11:03,360
when i'm making a batch that's the size

311
00:11:03,360 --> 00:11:06,560
i usually get uh the batch cut in half

312
00:11:06,560 --> 00:11:08,560
and then i can make

313
00:11:08,560 --> 00:11:11,040
usually eight out of these if i'm making

314
00:11:11,040 --> 00:11:12,880
larger rolls if i want something big

315
00:11:12,880 --> 00:11:15,120
then i'm going to only make six so i'll

316
00:11:15,120 --> 00:11:17,360
cut it in half and then cut three pieces

317
00:11:17,360 --> 00:11:18,959
but this is this is usually about the

318
00:11:18,959 --> 00:11:20,640
size of a piece of dough that i work

319
00:11:20,640 --> 00:11:22,720
with so i'm going to try to get it to

320
00:11:22,720 --> 00:11:24,640
relax use the gluten

321
00:11:24,640 --> 00:11:25,920
but i don't want to stretch it out as

322
00:11:25,920 --> 00:11:27,760
far as randy did then what i'm going to

323
00:11:27,760 --> 00:11:29,040
do

324
00:11:29,040 --> 00:11:31,680
is take my dough and i'm going to tie it

325
00:11:31,680 --> 00:11:34,000
into a knot a granny knot

326
00:11:34,000 --> 00:11:35,839
then i'm going to take

327
00:11:35,839 --> 00:11:37,360
part of it and i'm going to stretch it a

328
00:11:37,360 --> 00:11:38,399
little further and i'm going to go

329
00:11:38,399 --> 00:11:40,320
around again

330
00:11:40,320 --> 00:11:44,720
through the dough see if i can do this

331
00:11:44,720 --> 00:11:46,079
through the middle and then i'm going to

332
00:11:46,079 --> 00:11:47,760
go on the back side of the dough and i'm

333
00:11:47,760 --> 00:11:49,920
going to press the two ends together and

334
00:11:49,920 --> 00:11:51,600
i'm going to put them behind the dough

335
00:11:51,600 --> 00:11:53,839
so what you end up with

336
00:11:53,839 --> 00:11:54,839
looks like

337
00:11:54,839 --> 00:11:57,839
this and as we set them on the counter

338
00:11:57,839 --> 00:11:59,680
and we're working in between i'll make

339
00:11:59,680 --> 00:12:03,120
another one uh they'll start to rise and

340
00:12:03,120 --> 00:12:05,440
the the dough itself

341
00:12:05,440 --> 00:12:07,360
was quite

342
00:12:07,360 --> 00:12:09,680
volume filling in the bowl it was

343
00:12:09,680 --> 00:12:11,440
voluminous

344
00:12:11,440 --> 00:12:12,800
but as you hit it on the counter and

345
00:12:12,800 --> 00:12:14,079
you're working with it you're taking a

346
00:12:14,079 --> 00:12:16,320
lot of that extra air out of it you

347
00:12:16,320 --> 00:12:18,480
don't need to allow a second rise on

348
00:12:18,480 --> 00:12:20,720
this particular dome it will do a lot of

349
00:12:20,720 --> 00:12:23,440
rising in the oven itself

350
00:12:23,440 --> 00:12:24,399
all right

351
00:12:24,399 --> 00:12:26,880
so the next part is where you get the

352
00:12:26,880 --> 00:12:30,240
outside crunchiness of the pretzel um

353
00:12:30,240 --> 00:12:31,920
and we're gonna get a couple of these

354
00:12:31,920 --> 00:12:34,160
going did you get it yeah i did i got

355
00:12:34,160 --> 00:12:35,760
hot water is this enough water i look

356
00:12:35,760 --> 00:12:38,240
good yeah okay cool um so the

357
00:12:38,240 --> 00:12:40,639
crunchiness actually also helps the

358
00:12:40,639 --> 00:12:43,040
inside to stay really moist because the

359
00:12:43,040 --> 00:12:44,800
outside sort of crusts and it doesn't

360
00:12:44,800 --> 00:12:47,279
lose as much moisture from the pretzel

361
00:12:47,279 --> 00:12:49,519
so there's two ways to do this there's

362
00:12:49,519 --> 00:12:51,519
the german way which is probably the

363
00:12:51,519 --> 00:12:52,880
right way and then there's the american

364
00:12:52,880 --> 00:12:55,519
way that we do it um so i'm going to

365
00:12:55,519 --> 00:12:56,720
show you both actually and we're going

366
00:12:56,720 --> 00:12:58,160
to do an experiment and make two

367
00:12:58,160 --> 00:12:59,920
pretzels and you can see the difference

368
00:12:59,920 --> 00:13:01,760
when they come out of the oven so the

369
00:13:01,760 --> 00:13:04,240
american way to do it is to put some

370
00:13:04,240 --> 00:13:07,120
baking soda baking soda okay i always

371
00:13:07,120 --> 00:13:08,880
get mixed up baking powder and baking

372
00:13:08,880 --> 00:13:09,760
soda

373
00:13:09,760 --> 00:13:13,360
uh baking soda in warm water um and you

374
00:13:13,360 --> 00:13:15,519
don't want the pretzel to touch the

375
00:13:15,519 --> 00:13:17,600
solid baking soda so you kind of let it

376
00:13:17,600 --> 00:13:19,760
settle in the bottom and try not to get

377
00:13:19,760 --> 00:13:22,720
the pretzel um on that otherwise it it

378
00:13:22,720 --> 00:13:24,800
tastes too much like the baking soda

379
00:13:24,800 --> 00:13:26,880
yeah you pick up the residue from the

380
00:13:26,880 --> 00:13:29,440
bottom of the container and it um it'll

381
00:13:29,440 --> 00:13:30,240
actually

382
00:13:30,240 --> 00:13:32,480
even leave like a white mark on the

383
00:13:32,480 --> 00:13:34,880
pretzel or the knot

384
00:13:34,880 --> 00:13:37,040
um from the residue

385
00:13:37,040 --> 00:13:38,800
all right so i'm gonna get my pan ready

386
00:13:38,800 --> 00:13:40,639
because it's gonna be a little bit messy

387
00:13:40,639 --> 00:13:42,720
can i move that over just a little bit

388
00:13:42,720 --> 00:13:44,240
yep

389
00:13:44,240 --> 00:13:45,680
thank you

390
00:13:45,680 --> 00:13:48,800
okay so i'm going to take

391
00:13:48,800 --> 00:13:50,000
the

392
00:13:50,000 --> 00:13:51,279
pretzel i'm trying to make sure

393
00:13:51,279 --> 00:13:52,480
everything's here where you can see it

394
00:13:52,480 --> 00:13:54,320
on the video and take the pretzel and i

395
00:13:54,320 --> 00:13:56,079
pick it up by the two legs here so that

396
00:13:56,079 --> 00:13:58,000
it doesn't completely fall apart

397
00:13:58,000 --> 00:13:59,920
and then just dip it

398
00:13:59,920 --> 00:14:01,360
into

399
00:14:01,360 --> 00:14:04,639
the baking soda water

400
00:14:04,639 --> 00:14:06,880
and so i messed some up because i didn't

401
00:14:06,880 --> 00:14:08,800
get some on here but that's all right

402
00:14:08,800 --> 00:14:11,120
and then it's going to be a little bit

403
00:14:11,120 --> 00:14:13,519
misshapen which is fine because it still

404
00:14:13,519 --> 00:14:15,600
tastes good but i like to sort of shape

405
00:14:15,600 --> 00:14:17,440
it up a little bit too all right so

406
00:14:17,440 --> 00:14:19,440
that's the american way to do it the

407
00:14:19,440 --> 00:14:21,440
german way to do it which i'm sure is

408
00:14:21,440 --> 00:14:22,720
more proper

409
00:14:22,720 --> 00:14:23,519
um

410
00:14:23,519 --> 00:14:26,320
and does get a more of a crunch but it

411
00:14:26,320 --> 00:14:27,839
really grossed me out the first time

412
00:14:27,839 --> 00:14:30,639
that i heard about it is to use lye so

413
00:14:30,639 --> 00:14:32,560
this is food grade lie and i got it from

414
00:14:32,560 --> 00:14:34,639
a german uh

415
00:14:34,639 --> 00:14:36,880
delicatessen specifically for making

416
00:14:36,880 --> 00:14:39,040
pretzels um

417
00:14:39,040 --> 00:14:41,199
and i'm just going to brush this on here

418
00:14:41,199 --> 00:14:43,519
because i'm not going to make enough lye

419
00:14:43,519 --> 00:14:46,160
to dip a whole pretzel into and so when

420
00:14:46,160 --> 00:14:48,639
these come out of the oven um at the end

421
00:14:48,639 --> 00:14:50,079
of this presentation you should see the

422
00:14:50,079 --> 00:14:52,800
difference the bigger one is the one bit

423
00:14:52,800 --> 00:14:54,800
dipped in the baking soda and the

424
00:14:54,800 --> 00:14:57,519
smaller one is the one with ly brushed

425
00:14:57,519 --> 00:14:59,040
on here

426
00:14:59,040 --> 00:15:01,360
yup move this for you thank you

427
00:15:01,360 --> 00:15:03,519
thank you

428
00:15:03,519 --> 00:15:06,000
all right

429
00:15:06,079 --> 00:15:07,839
so we'll get that and then of course the

430
00:15:07,839 --> 00:15:10,160
last and most important step is to

431
00:15:10,160 --> 00:15:12,639
sprinkle coarse salt on the top of the

432
00:15:12,639 --> 00:15:14,720
pretzel because the most important part

433
00:15:14,720 --> 00:15:16,959
of the pretzel is that saltiness well i

434
00:15:16,959 --> 00:15:18,720
don't know maybe it's the crunch but i

435
00:15:18,720 --> 00:15:20,720
like the salt a lot

436
00:15:20,720 --> 00:15:23,040
um the nice thing about this is when

437
00:15:23,040 --> 00:15:24,639
you're making your pretzels at home you

438
00:15:24,639 --> 00:15:26,160
get to choose how much salt you really

439
00:15:26,160 --> 00:15:28,000
want to put on there i think some of the

440
00:15:28,000 --> 00:15:29,600
pretzels that i've gotten before have

441
00:15:29,600 --> 00:15:31,759
just been too salty as much as i like

442
00:15:31,759 --> 00:15:33,680
salt i don't want it like

443
00:15:33,680 --> 00:15:35,279
drinking the ocean

444
00:15:35,279 --> 00:15:37,199
um but

445
00:15:37,199 --> 00:15:40,079
we are going to use just some regular um

446
00:15:40,079 --> 00:15:42,320
i have it oh thank you

447
00:15:42,320 --> 00:15:44,000
we're just gonna use some regular coarse

448
00:15:44,000 --> 00:15:46,639
uh morton salt what'd you get um kosher

449
00:15:46,639 --> 00:15:47,680
salt

450
00:15:47,680 --> 00:15:49,360
um if you live someplace that's really

451
00:15:49,360 --> 00:15:51,440
cold you might know this from sprinkling

452
00:15:51,440 --> 00:15:53,120
sprinkling it on your front porch that

453
00:15:53,120 --> 00:15:55,040
it doesn't ice

454
00:15:55,040 --> 00:15:57,600
i'll get some of that too

455
00:15:57,600 --> 00:15:59,519
we just use a pinch bowl because it's a

456
00:15:59,519 --> 00:16:02,160
little easier than uh having a large

457
00:16:02,160 --> 00:16:04,079
container for your

458
00:16:04,079 --> 00:16:05,519
um

459
00:16:05,519 --> 00:16:08,079
extras

460
00:16:08,079 --> 00:16:11,040
and go for it right thank you very much

461
00:16:11,040 --> 00:16:13,279
and shake some of this flour off i made

462
00:16:13,279 --> 00:16:15,759
a mess by putting the pan too close to

463
00:16:15,759 --> 00:16:17,040
the flour

464
00:16:17,040 --> 00:16:18,800
but that'll work out the other thing is

465
00:16:18,800 --> 00:16:20,839
we use parchment

466
00:16:20,839 --> 00:16:24,079
paper parchment paper helps save you a

467
00:16:24,079 --> 00:16:26,079
lot you'll see when the the pretzels

468
00:16:26,079 --> 00:16:28,240
come out of the oven that

469
00:16:28,240 --> 00:16:31,040
crustiness that you get from the baking

470
00:16:31,040 --> 00:16:34,079
soda actually kind of caramelizes around

471
00:16:34,079 --> 00:16:36,079
the edges and it'll bake into your pan

472
00:16:36,079 --> 00:16:37,600
and leave you with

473
00:16:37,600 --> 00:16:38,720
these

474
00:16:38,720 --> 00:16:40,480
hard to scrub out

475
00:16:40,480 --> 00:16:42,720
issues later so it's a lot faster if you

476
00:16:42,720 --> 00:16:44,959
just use the parchment paper for clean

477
00:16:44,959 --> 00:16:46,320
up purposes

478
00:16:46,320 --> 00:16:47,920
and we'll show you yeah i've scrubbed a

479
00:16:47,920 --> 00:16:49,519
lot of pans after making pretzels and i

480
00:16:49,519 --> 00:16:51,440
do not recommend it the other thing i

481
00:16:51,440 --> 00:16:53,920
want to mention is if all of this seems

482
00:16:53,920 --> 00:16:55,920
way too intimidating like wow that was a

483
00:16:55,920 --> 00:16:58,320
lot of steps and you know like mixing

484
00:16:58,320 --> 00:17:00,079
these things and taking all this time i

485
00:17:00,079 --> 00:17:02,880
want to give you an easy option too so

486
00:17:02,880 --> 00:17:06,720
this is a box of pre-made pretzel mix

487
00:17:06,720 --> 00:17:08,240
the only thing you need to add to this

488
00:17:08,240 --> 00:17:10,799
is water and some oil so we didn't even

489
00:17:10,799 --> 00:17:12,640
put oil but we put butter in ours which

490
00:17:12,640 --> 00:17:14,240
kind of serves the same purpose as far

491
00:17:14,240 --> 00:17:15,839
as keeping it soft

492
00:17:15,839 --> 00:17:17,679
this also comes with the lye and the

493
00:17:17,679 --> 00:17:18,640
salt

494
00:17:18,640 --> 00:17:19,679
and

495
00:17:19,679 --> 00:17:21,839
everything else is pre-measured so it is

496
00:17:21,839 --> 00:17:24,880
super easy in my opinion

497
00:17:24,880 --> 00:17:27,599
this is pretty good but if i was gonna

498
00:17:27,599 --> 00:17:29,520
make pretzels for my family for dinner i

499
00:17:29,520 --> 00:17:31,039
think i would do it from scratch even

500
00:17:31,039 --> 00:17:32,559
though it's more trouble just because we

501
00:17:32,559 --> 00:17:34,320
like that recipe but that's personal

502
00:17:34,320 --> 00:17:35,360
preference

503
00:17:35,360 --> 00:17:37,760
um also i say if you want to get really

504
00:17:37,760 --> 00:17:39,520
good pretzels and you get the

505
00:17:39,520 --> 00:17:42,160
opportunity to go to germany or you know

506
00:17:42,160 --> 00:17:43,679
somebody who's lived there and really

507
00:17:43,679 --> 00:17:45,600
knows how to make them the german way

508
00:17:45,600 --> 00:17:48,240
that's a fantastic pretzel and i don't

509
00:17:48,240 --> 00:17:50,559
want to take any thunder away from

510
00:17:50,559 --> 00:17:53,120
german bavarian pretzels yeah those are

511
00:17:53,120 --> 00:17:54,640
really good um the other thing we'll

512
00:17:54,640 --> 00:17:56,000
show you when they come out of the oven

513
00:17:56,000 --> 00:17:58,559
is mustards because there's a lot of fun

514
00:17:58,559 --> 00:18:01,520
to be had dipping pretzels in mustard so

515
00:18:01,520 --> 00:18:04,160
i'm going to switch topics now

516
00:18:04,160 --> 00:18:07,039
and i'll take my apron off and go to it

517
00:18:07,039 --> 00:18:08,720
into my

518
00:18:08,720 --> 00:18:10,880
cyber defender mode

519
00:18:10,880 --> 00:18:12,880
i'm going to share

520
00:18:12,880 --> 00:18:15,840
um about domain fronting

521
00:18:15,840 --> 00:18:18,080
so hopefully you can see my screen again

522
00:18:18,080 --> 00:18:21,520
there we go so it is actually a law that

523
00:18:21,520 --> 00:18:23,440
every cyber security presentation has to

524
00:18:23,440 --> 00:18:25,679
have memes and i realized late last

525
00:18:25,679 --> 00:18:27,760
night that i didn't have any at all so i

526
00:18:27,760 --> 00:18:29,280
just added a whole bunch on the title

527
00:18:29,280 --> 00:18:30,799
slide i hope you will forgive me for

528
00:18:30,799 --> 00:18:32,480
last minute meaning

529
00:18:32,480 --> 00:18:35,039
all right so let's talk about domain

530
00:18:35,039 --> 00:18:37,440
fronting first of all uh let me provide

531
00:18:37,440 --> 00:18:39,919
an example and uh shout out to brett

532
00:18:39,919 --> 00:18:41,679
fitzpatrick for putting this out on

533
00:18:41,679 --> 00:18:42,400
twitter

534
00:18:42,400 --> 00:18:45,520
um a couple of months ago now i guess i

535
00:18:45,520 --> 00:18:47,760
noticed this come across and um used

536
00:18:47,760 --> 00:18:49,760
this as part of my threat hunting

537
00:18:49,760 --> 00:18:52,799
looking for this cobalt strike beacon

538
00:18:52,799 --> 00:18:54,720
and i thought it was really nice of

539
00:18:54,720 --> 00:18:57,440
brett to share this information and um

540
00:18:57,440 --> 00:19:00,559
having parsed the um

541
00:19:00,559 --> 00:19:02,799
beacon configuration file he was able to

542
00:19:02,799 --> 00:19:04,559
share also the

543
00:19:04,559 --> 00:19:07,760
um back-end domain and all of the um or

544
00:19:07,760 --> 00:19:09,679
it was an ip address i think in the end

545
00:19:09,679 --> 00:19:11,039
that it went to

546
00:19:11,039 --> 00:19:13,840
but also kudos to fastly for taking this

547
00:19:13,840 --> 00:19:16,480
thing down pretty fast um the the

548
00:19:16,480 --> 00:19:17,840
content delivery networks have been

549
00:19:17,840 --> 00:19:19,919
doing a better and better job trying to

550
00:19:19,919 --> 00:19:21,440
detect some of this stuff and especially

551
00:19:21,440 --> 00:19:23,200
when it's known that people are using it

552
00:19:23,200 --> 00:19:24,880
for evil purposes

553
00:19:24,880 --> 00:19:26,799
and try to cut that off so kudos to

554
00:19:26,799 --> 00:19:29,039
anybody who is doing that but first of

555
00:19:29,039 --> 00:19:30,400
all you might be wondering what is

556
00:19:30,400 --> 00:19:32,880
domain fronting if you are not familiar

557
00:19:32,880 --> 00:19:34,960
with it and you're like wow that's just

558
00:19:34,960 --> 00:19:36,400
kind of a term it doesn't mean anything

559
00:19:36,400 --> 00:19:38,320
to me i want to explain it with an

560
00:19:38,320 --> 00:19:41,039
analogy so imagine that you are a

561
00:19:41,039 --> 00:19:43,200
chaperone or a teacher on a middle

562
00:19:43,200 --> 00:19:44,240
school

563
00:19:44,240 --> 00:19:46,960
field trip and billy

564
00:19:46,960 --> 00:19:49,120
the student who is most devious in the

565
00:19:49,120 --> 00:19:50,160
class

566
00:19:50,160 --> 00:19:52,880
says to you hey teacher i really need to

567
00:19:52,880 --> 00:19:54,799
use the restroom where is the closest

568
00:19:54,799 --> 00:19:57,200
restroom and you look around and you see

569
00:19:57,200 --> 00:20:00,160
oh it's in this mall over here um

570
00:20:00,160 --> 00:20:01,280
and you say

571
00:20:01,280 --> 00:20:03,679
sorry about the dog you say billy you

572
00:20:03,679 --> 00:20:05,679
can go into the mall and use the

573
00:20:05,679 --> 00:20:07,280
restroom just make sure you come right

574
00:20:07,280 --> 00:20:09,360
back well what do you think is going to

575
00:20:09,360 --> 00:20:11,919
happen in this scenario with the arcade

576
00:20:11,919 --> 00:20:14,559
in the same space as the mall of course

577
00:20:14,559 --> 00:20:16,400
billy is going to go into the arcade

578
00:20:16,400 --> 00:20:18,080
he's going to pretend like he's going to

579
00:20:18,080 --> 00:20:19,840
the bathroom because he goes toward the

580
00:20:19,840 --> 00:20:21,440
mall but he's actually going to play

581
00:20:21,440 --> 00:20:23,120
games until his quarters run out or

582
00:20:23,120 --> 00:20:24,799
until you go and catch him

583
00:20:24,799 --> 00:20:27,360
that's what domain fronting is it's

584
00:20:27,360 --> 00:20:29,760
telling the authority or showing on the

585
00:20:29,760 --> 00:20:32,480
outside that you want to go to a certain

586
00:20:32,480 --> 00:20:34,960
place on the internet by making a dns

587
00:20:34,960 --> 00:20:36,080
request

588
00:20:36,080 --> 00:20:38,960
and then actually going to a different

589
00:20:38,960 --> 00:20:39,840
place

590
00:20:39,840 --> 00:20:41,760
well how does that work you might wonder

591
00:20:41,760 --> 00:20:42,799
like

592
00:20:42,799 --> 00:20:44,880
if you know anything about dns you know

593
00:20:44,880 --> 00:20:47,039
that you make a request for some domain

594
00:20:47,039 --> 00:20:49,200
name and it returns an ip address

595
00:20:49,200 --> 00:20:50,559
there's more to it than that and then

596
00:20:50,559 --> 00:20:52,559
you connect to the ip address the

597
00:20:52,559 --> 00:20:54,880
difference really is what's it called a

598
00:20:54,880 --> 00:20:57,360
content delivery network so here is the

599
00:20:57,360 --> 00:20:59,919
requisite very busy diagram hopefully

600
00:20:59,919 --> 00:21:01,679
this will all make sense

601
00:21:01,679 --> 00:21:04,159
the evil application or all i won't say

602
00:21:04,159 --> 00:21:06,480
evil how about devious application is on

603
00:21:06,480 --> 00:21:07,840
the left side of the screen and let's

604
00:21:07,840 --> 00:21:10,480
just call that billy so that you uh keep

605
00:21:10,480 --> 00:21:12,320
the analogy in mind

606
00:21:12,320 --> 00:21:15,120
billy makes a dns request that says i

607
00:21:15,120 --> 00:21:18,000
need to go to dotnet.microsoft.com

608
00:21:18,000 --> 00:21:19,840
and the real reason billy says that is

609
00:21:19,840 --> 00:21:20,960
just like the request to go to the

610
00:21:20,960 --> 00:21:22,840
bathroom going to

611
00:21:22,840 --> 00:21:25,280
anything.microsoft.com seems safe and i

612
00:21:25,280 --> 00:21:27,600
want to pause here and say i am not pity

613
00:21:27,600 --> 00:21:29,520
on microsoft microsoft is doing a really

614
00:21:29,520 --> 00:21:33,280
good job and lots of other cdns support

615
00:21:33,280 --> 00:21:35,760
domain fronting as well um

616
00:21:35,760 --> 00:21:37,280
i'm not going to name all of them out

617
00:21:37,280 --> 00:21:39,760
but it's it's not like a microsoft

618
00:21:39,760 --> 00:21:41,520
problem that we're talking about here

619
00:21:41,520 --> 00:21:44,240
okay so um he says i need to go to

620
00:21:44,240 --> 00:21:47,159
dotnet.microsoft.com

621
00:21:47,159 --> 00:21:48,799
net.microsoft.com

622
00:21:48,799 --> 00:21:50,159
i've said that too many times now

623
00:21:50,159 --> 00:21:51,120
haven't i

624
00:21:51,120 --> 00:21:52,000
um

625
00:21:52,000 --> 00:21:54,480
is hosted on a content delivery network

626
00:21:54,480 --> 00:21:56,880
that is also run by microsoft content

627
00:21:56,880 --> 00:21:59,600
delivery networks allow

628
00:21:59,600 --> 00:22:01,520
people all around the world millions and

629
00:22:01,520 --> 00:22:03,200
millions of people to be making lots of

630
00:22:03,200 --> 00:22:06,000
requests for web pages and for those to

631
00:22:06,000 --> 00:22:08,559
be delivered by a server that is closest

632
00:22:08,559 --> 00:22:10,480
to them geographically so that it is

633
00:22:10,480 --> 00:22:12,480
fast and so it takes the load off of a

634
00:22:12,480 --> 00:22:14,640
single server you don't want people all

635
00:22:14,640 --> 00:22:16,960
over the world having to you know go

636
00:22:16,960 --> 00:22:18,720
multiple hops through routers to get to

637
00:22:18,720 --> 00:22:20,640
your website if they could get a cached

638
00:22:20,640 --> 00:22:23,280
copy from a local server so for that

639
00:22:23,280 --> 00:22:24,159
reason

640
00:22:24,159 --> 00:22:27,520
there are lots and lots of domain names

641
00:22:27,520 --> 00:22:30,880
that all resolve to the same localized

642
00:22:30,880 --> 00:22:32,320
ip addresses

643
00:22:32,320 --> 00:22:34,400
so i'm going to show you in a minute um

644
00:22:34,400 --> 00:22:37,640
the ipaddressthat.net.microsoft.com

645
00:22:38,480 --> 00:22:42,880
resolves to um there are like 9 000 plus

646
00:22:42,880 --> 00:22:44,880
other domain names that also resolve to

647
00:22:44,880 --> 00:22:46,880
those so that's where the confusion can

648
00:22:46,880 --> 00:22:47,840
come in

649
00:22:47,840 --> 00:22:50,320
so the dns server responds with here's

650
00:22:50,320 --> 00:22:52,559
the ip address that you need to go to

651
00:22:52,559 --> 00:22:55,760
and then the application billy says okay

652
00:22:55,760 --> 00:22:57,360
i'll go to that ip address and make a

653
00:22:57,360 --> 00:22:59,120
connection but when it's made the

654
00:22:59,120 --> 00:23:01,600
connection it's going to send to the

655
00:23:01,600 --> 00:23:04,080
server that it actually wants to go to a

656
00:23:04,080 --> 00:23:05,600
different domain

657
00:23:05,600 --> 00:23:06,880
because

658
00:23:06,880 --> 00:23:09,440
billy knows that that other domain is

659
00:23:09,440 --> 00:23:11,200
hosted and can be accessed through that

660
00:23:11,200 --> 00:23:14,000
same ip address because of the cdn

661
00:23:14,000 --> 00:23:16,559
that's why it works so there's actually

662
00:23:16,559 --> 00:23:18,320
some detail here that's important to

663
00:23:18,320 --> 00:23:20,960
understand there's two different other

664
00:23:20,960 --> 00:23:24,000
places where that domain name that billy

665
00:23:24,000 --> 00:23:27,120
actually wants to go to can be specified

666
00:23:27,120 --> 00:23:28,720
and we're going to assume that they're

667
00:23:28,720 --> 00:23:29,760
using

668
00:23:29,760 --> 00:23:32,559
tls encrypted connections or https

669
00:23:32,559 --> 00:23:33,840
because that's the most common and

670
00:23:33,840 --> 00:23:35,280
that's mostly what attackers are going

671
00:23:35,280 --> 00:23:36,960
to want to use too

672
00:23:36,960 --> 00:23:41,120
so if you are using https or tls

673
00:23:41,120 --> 00:23:42,559
you've got two different places you can

674
00:23:42,559 --> 00:23:44,159
put the actual domain to say where you

675
00:23:44,159 --> 00:23:45,120
want to go

676
00:23:45,120 --> 00:23:49,200
one is in the tls sni header sni stands

677
00:23:49,200 --> 00:23:52,000
for the server name indicator and it's

678
00:23:52,000 --> 00:23:54,159
unencrypted it comes in the part of the

679
00:23:54,159 --> 00:23:56,159
network communication where you are

680
00:23:56,159 --> 00:23:59,039
negotiating the encryption protocol

681
00:23:59,039 --> 00:24:01,360
and saying hey i want to

682
00:24:01,360 --> 00:24:03,039
exchange these keys and by the way

683
00:24:03,039 --> 00:24:04,960
here's where i want to go to it's

684
00:24:04,960 --> 00:24:07,520
important that it's there because the

685
00:24:07,520 --> 00:24:09,520
cdn needs to know

686
00:24:09,520 --> 00:24:12,000
which server certificate to serve up so

687
00:24:12,000 --> 00:24:15,120
it's it's necessary that the sni goes

688
00:24:15,120 --> 00:24:17,360
across the wire unencrypted before you

689
00:24:17,360 --> 00:24:20,240
start that encryption process so that's

690
00:24:20,240 --> 00:24:24,080
one place the other place is inside of

691
00:24:24,080 --> 00:24:25,919
the encrypted packets and that's the

692
00:24:25,919 --> 00:24:29,039
http host header that's what's telling

693
00:24:29,039 --> 00:24:30,400
the server that you've actually

694
00:24:30,400 --> 00:24:32,480
connected to this is the host that i

695
00:24:32,480 --> 00:24:34,000
want you to serve up

696
00:24:34,000 --> 00:24:35,840
if you've ever hosted websites you know

697
00:24:35,840 --> 00:24:37,840
you can have lots of different websites

698
00:24:37,840 --> 00:24:39,760
at the exact same server at this exact

699
00:24:39,760 --> 00:24:42,240
same ip address and the only way to tell

700
00:24:42,240 --> 00:24:44,159
which one is which and which content to

701
00:24:44,159 --> 00:24:47,039
serve up is by that http host header

702
00:24:47,039 --> 00:24:49,039
that says which of these websites do i

703
00:24:49,039 --> 00:24:51,840
want to go to so as a defender as a

704
00:24:51,840 --> 00:24:53,679
threat hunter the important thing for

705
00:24:53,679 --> 00:24:55,279
you to know is

706
00:24:55,279 --> 00:24:58,240
if the different domain is put into the

707
00:24:58,240 --> 00:25:01,039
sni header you can absolutely detect

708
00:25:01,039 --> 00:25:03,600
that even if you are not decrypting tls

709
00:25:03,600 --> 00:25:05,919
traffic on your network because it has

710
00:25:05,919 --> 00:25:08,159
to go across the wire unencrypted you

711
00:25:08,159 --> 00:25:09,600
need to be monitoring your network

712
00:25:09,600 --> 00:25:12,559
traffic to be able to do this at all but

713
00:25:12,559 --> 00:25:14,480
this is a really good place for you to

714
00:25:14,480 --> 00:25:15,440
catch it

715
00:25:15,440 --> 00:25:18,080
now the threat actor or whoever's doing

716
00:25:18,080 --> 00:25:18,799
the

717
00:25:18,799 --> 00:25:21,120
domain fronting doesn't need to put it

718
00:25:21,120 --> 00:25:22,799
in there they could actually put the

719
00:25:22,799 --> 00:25:25,279
same misleading domain name the fronted

720
00:25:25,279 --> 00:25:27,440
domain in the sni header

721
00:25:27,440 --> 00:25:28,480
and then

722
00:25:28,480 --> 00:25:30,240
they could put the domain they actually

723
00:25:30,240 --> 00:25:33,360
want to go to in the http header

724
00:25:33,360 --> 00:25:35,840
if they do that the only way that you as

725
00:25:35,840 --> 00:25:38,159
a defender are going to be able to spot

726
00:25:38,159 --> 00:25:42,000
it is if you decrypt the tls traffic you

727
00:25:42,000 --> 00:25:43,520
need to have like a man in the middle

728
00:25:43,520 --> 00:25:45,679
that's decrypting those packets so that

729
00:25:45,679 --> 00:25:47,600
you can tell if there is a difference

730
00:25:47,600 --> 00:25:50,799
between the sni and the http host header

731
00:25:50,799 --> 00:25:52,640
now the other thing is if the attacker

732
00:25:52,640 --> 00:25:53,840
does that

733
00:25:53,840 --> 00:25:56,480
the cdn provider like microsoft or

734
00:25:56,480 --> 00:25:58,480
fastly or whatever else

735
00:25:58,480 --> 00:26:00,000
they can actually tell that there's some

736
00:26:00,000 --> 00:26:01,760
domain fronting going on because there's

737
00:26:01,760 --> 00:26:03,279
they have to see both of those they see

738
00:26:03,279 --> 00:26:05,520
the s and i header and then they see the

739
00:26:05,520 --> 00:26:08,559
http host header oh those pretzels look

740
00:26:08,559 --> 00:26:11,039
good careful it's hot thank you

741
00:26:11,039 --> 00:26:12,640
um and

742
00:26:12,640 --> 00:26:15,120
so if the attacker decides to do that

743
00:26:15,120 --> 00:26:17,200
they're putting their account at risk

744
00:26:17,200 --> 00:26:19,520
that the cdn is going to take them down

745
00:26:19,520 --> 00:26:21,440
okay hopefully that's enough explanation

746
00:26:21,440 --> 00:26:24,159
about what it is and how it works if you

747
00:26:24,159 --> 00:26:26,480
want to try this out on your own

748
00:26:26,480 --> 00:26:28,400
corporate network if you want to see if

749
00:26:28,400 --> 00:26:30,159
you can detect this and you want to see

750
00:26:30,159 --> 00:26:32,159
like what do your controls look like you

751
00:26:32,159 --> 00:26:33,600
can actually do that and i've written a

752
00:26:33,600 --> 00:26:35,200
program to help you

753
00:26:35,200 --> 00:26:36,960
so first you need to find a printable

754
00:26:36,960 --> 00:26:38,480
domain

755
00:26:38,480 --> 00:26:40,480
i'm going to use microsoft not because

756
00:26:40,480 --> 00:26:41,919
i'm picking on microsoft but actually

757
00:26:41,919 --> 00:26:43,679
because they've got a really nice easy

758
00:26:43,679 --> 00:26:46,080
to use interface for creating your own

759
00:26:46,080 --> 00:26:47,840
cdn

760
00:26:47,840 --> 00:26:49,919
service and it doesn't cost a whole lot

761
00:26:49,919 --> 00:26:53,039
and i actually really like it as a cdn

762
00:26:53,039 --> 00:26:54,000
so

763
00:26:54,000 --> 00:26:56,880
um you go to your azure portal create a

764
00:26:56,880 --> 00:27:00,000
new cdn endpoint um and you give it

765
00:27:00,000 --> 00:27:01,520
whatever name you want i'm calling it

766
00:27:01,520 --> 00:27:03,760
devious c2 server here which is of

767
00:27:03,760 --> 00:27:05,200
course not what you'd want you want to

768
00:27:05,200 --> 00:27:08,240
pick a more subtle name than that and

769
00:27:08,240 --> 00:27:10,640
then you figure out

770
00:27:10,640 --> 00:27:12,720
once you've created it what is the ip

771
00:27:12,720 --> 00:27:15,679
address or the range of ip addresses you

772
00:27:15,679 --> 00:27:17,279
probably get several

773
00:27:17,279 --> 00:27:19,679
that it resolves to then you use passive

774
00:27:19,679 --> 00:27:21,120
dns i want to

775
00:27:21,120 --> 00:27:23,200
do a shout out here to mac from open

776
00:27:23,200 --> 00:27:25,520
source context who gave me a free api

777
00:27:25,520 --> 00:27:27,440
key so i could show you this there were

778
00:27:27,440 --> 00:27:31,520
actually 9 317 results for domains that

779
00:27:31,520 --> 00:27:33,919
resolved to these ip addresses when i

780
00:27:33,919 --> 00:27:36,200
set this up so i just picked

781
00:27:36,200 --> 00:27:38,240
dotnet.microsoft.com because it looked

782
00:27:38,240 --> 00:27:39,919
really friendly

783
00:27:39,919 --> 00:27:41,840
all right so now you want to generate

784
00:27:41,840 --> 00:27:44,159
the traffic you can actually do this

785
00:27:44,159 --> 00:27:46,320
with a c2 framework like create an

786
00:27:46,320 --> 00:27:48,399
implant but that can be a little bit

787
00:27:48,399 --> 00:27:50,159
difficult to test and you might set off

788
00:27:50,159 --> 00:27:52,080
all of your antivirus and everything

789
00:27:52,080 --> 00:27:53,919
else so if you want a nice friendly

790
00:27:53,919 --> 00:27:55,840
completely benign program that all it

791
00:27:55,840 --> 00:27:57,360
does is generate network traffic it

792
00:27:57,360 --> 00:27:59,279
doesn't do anything else it doesn't you

793
00:27:59,279 --> 00:28:00,720
know allow

794
00:28:00,720 --> 00:28:03,200
the attacker to or anybody to control

795
00:28:03,200 --> 00:28:04,880
your computer it doesn't you know come

796
00:28:04,880 --> 00:28:06,799
with any risks you can use this program

797
00:28:06,799 --> 00:28:08,960
that i wrote or write your own and i

798
00:28:08,960 --> 00:28:11,279
open sourced it so i hope people will

799
00:28:11,279 --> 00:28:13,919
contribute to it i put the

800
00:28:13,919 --> 00:28:16,320
address to it on github here and i will

801
00:28:16,320 --> 00:28:18,559
pop that into the slack chat when our

802
00:28:18,559 --> 00:28:20,159
presentation is done

803
00:28:20,159 --> 00:28:21,360
here are all the different command line

804
00:28:21,360 --> 00:28:23,600
arguments you can choose if you want to

805
00:28:23,600 --> 00:28:26,080
put the fronting in the sni or not if

806
00:28:26,080 --> 00:28:28,640
you want to use https or not

807
00:28:28,640 --> 00:28:30,320
if you want it to look like a beacon how

808
00:28:30,320 --> 00:28:32,720
often do you want it to um

809
00:28:32,720 --> 00:28:34,960
uh go like what's the polling interval

810
00:28:34,960 --> 00:28:37,760
how how long to pause in between

811
00:28:37,760 --> 00:28:38,640
uh

812
00:28:38,640 --> 00:28:41,039
connections um you can put some jitter

813
00:28:41,039 --> 00:28:42,880
into it in case you wanna you know put

814
00:28:42,880 --> 00:28:45,039
some variability like uh the polling

815
00:28:45,039 --> 00:28:47,200
interval changes by 15 every time or

816
00:28:47,200 --> 00:28:49,520
something like that so um i hope you

817
00:28:49,520 --> 00:28:51,279
will go check that out and use it it's

818
00:28:51,279 --> 00:28:52,880
written in go so you can compile for

819
00:28:52,880 --> 00:28:55,760
windows linux mac whatever i've used it

820
00:28:55,760 --> 00:28:57,919
on all of those um the next thing i want

821
00:28:57,919 --> 00:29:00,080
to show you is how would we detect this

822
00:29:00,080 --> 00:29:02,320
um so on that same github if you go

823
00:29:02,320 --> 00:29:05,760
there i've copied my most recent kql

824
00:29:05,760 --> 00:29:08,320
kuso query language threat hunting query

825
00:29:08,320 --> 00:29:10,640
to find these differences and like i

826
00:29:10,640 --> 00:29:12,720
mentioned before you need to be track

827
00:29:12,720 --> 00:29:14,320
you need to be capturing network traffic

828
00:29:14,320 --> 00:29:15,600
because that's the only place you're

829
00:29:15,600 --> 00:29:17,279
really going to see this

830
00:29:17,279 --> 00:29:19,679
um i use surakata because it is open

831
00:29:19,679 --> 00:29:21,200
source and free but there's lots of

832
00:29:21,200 --> 00:29:22,480
other things you could use you could use

833
00:29:22,480 --> 00:29:24,399
zeek or pretty much anything else that

834
00:29:24,399 --> 00:29:26,799
is inspecting network traffic um in

835
00:29:26,799 --> 00:29:29,200
suricata there's these nice headers that

836
00:29:29,200 --> 00:29:30,640
are nice fields that have already been

837
00:29:30,640 --> 00:29:33,840
created called the tls sni and the http

838
00:29:33,840 --> 00:29:38,000
host um and so you can key off of that

839
00:29:38,000 --> 00:29:39,360
and it looks like we've still got enough

840
00:29:39,360 --> 00:29:43,679
time so i'm going to dive into a live

841
00:29:43,679 --> 00:29:44,720
um

842
00:29:44,720 --> 00:29:46,320
uh threat hunt and we'll show you what

843
00:29:46,320 --> 00:29:48,320
it looks like in azure sentinel and then

844
00:29:48,320 --> 00:29:50,159
when we're getting close to time uh

845
00:29:50,159 --> 00:29:52,720
we'll go back to pretzels and show you

846
00:29:52,720 --> 00:29:54,559
some mustard so

847
00:29:54,559 --> 00:29:56,799
um i want to ask if there are any

848
00:29:56,799 --> 00:29:58,320
questions if you want to put it in the

849
00:29:58,320 --> 00:30:00,640
chat and if the moderator doesn't mind

850
00:30:00,640 --> 00:30:02,720
um you'll pop it in with those questions

851
00:30:02,720 --> 00:30:04,240
i will be happy to answer those

852
00:30:04,240 --> 00:30:07,039
questions while i'm doing the

853
00:30:07,039 --> 00:30:08,640
threat hunting

854
00:30:08,640 --> 00:30:09,679
so

855
00:30:09,679 --> 00:30:11,679
give me just a moment to switch screens

856
00:30:11,679 --> 00:30:14,320
that i'm sharing

857
00:30:17,840 --> 00:30:20,399
here we go

858
00:30:21,200 --> 00:30:22,960
all right and i hope you will pardon me

859
00:30:22,960 --> 00:30:24,480
for looking away from the camera because

860
00:30:24,480 --> 00:30:26,080
i need to look at the screen for doing

861
00:30:26,080 --> 00:30:26,960
this

862
00:30:26,960 --> 00:30:28,320
um so

863
00:30:28,320 --> 00:30:31,279
this is uh microsoft sentinel and we're

864
00:30:31,279 --> 00:30:33,760
looking at my lab environment where we

865
00:30:33,760 --> 00:30:35,440
do a lot of testing i've tried to

866
00:30:35,440 --> 00:30:36,799
comment this query so that it makes

867
00:30:36,799 --> 00:30:38,880
sense but it'll also really make sense

868
00:30:38,880 --> 00:30:42,000
if we just kind of take it bit by bit so

869
00:30:42,000 --> 00:30:43,600
i'm just going to take off the last part

870
00:30:43,600 --> 00:30:45,120
of that query and we'll just run the

871
00:30:45,120 --> 00:30:47,279
first part of it the first part is

872
00:30:47,279 --> 00:30:50,559
looking for dns answers so when somebody

873
00:30:50,559 --> 00:30:52,960
requests some

874
00:30:52,960 --> 00:30:54,799
dns question you know resolve this

875
00:30:54,799 --> 00:30:57,360
hostname i want to get back any of the

876
00:30:57,360 --> 00:31:00,000
records of type a or quadruple a that's

877
00:31:00,000 --> 00:31:03,440
the ip address for ipv4 and ipv6

878
00:31:03,440 --> 00:31:04,960
respectively

879
00:31:04,960 --> 00:31:06,640
and you can see back

880
00:31:06,640 --> 00:31:08,159
you can see that i'm getting a whole lot

881
00:31:08,159 --> 00:31:09,919
of results here right so it's just

882
00:31:09,919 --> 00:31:12,320
showing me the date and time what was

883
00:31:12,320 --> 00:31:14,799
the dns question

884
00:31:14,799 --> 00:31:17,279
what type did we get back and then what

885
00:31:17,279 --> 00:31:18,880
was the answer which should be an ip

886
00:31:18,880 --> 00:31:22,720
address so this is in other words just

887
00:31:22,720 --> 00:31:25,600
passive dns in my own environment and

888
00:31:25,600 --> 00:31:27,200
you can do stuff like this to gather

889
00:31:27,200 --> 00:31:29,600
passive dns in your own network

890
00:31:29,600 --> 00:31:31,120
environment which is a really handy

891
00:31:31,120 --> 00:31:32,559
thing to do

892
00:31:32,559 --> 00:31:34,720
the next thing that we're going to do

893
00:31:34,720 --> 00:31:37,039
is join that together with all of our

894
00:31:37,039 --> 00:31:39,440
tls connections i've got another query

895
00:31:39,440 --> 00:31:43,360
that's for unencrypted http um in that

896
00:31:43,360 --> 00:31:45,039
case it's never going to be encrypted

897
00:31:45,039 --> 00:31:46,559
you can always see everything and you

898
00:31:46,559 --> 00:31:48,480
can just key off of the host header

899
00:31:48,480 --> 00:31:52,320
there's not going to be an sni field for

900
00:31:52,320 --> 00:31:55,519
unencrypted http but for this demo let's

901
00:31:55,519 --> 00:31:58,399
just stick with tls https because it is

902
00:31:58,399 --> 00:31:59,679
the most common

903
00:31:59,679 --> 00:32:02,159
so what i'm going to do now

904
00:32:02,159 --> 00:32:04,480
is join that together

905
00:32:04,480 --> 00:32:07,840
with the the tls record so this is every

906
00:32:07,840 --> 00:32:10,080
time there's been a tls connection

907
00:32:10,080 --> 00:32:13,440
we're going to look at the tls sni

908
00:32:13,440 --> 00:32:15,919
header and we're going to look for

909
00:32:15,919 --> 00:32:19,200
any records where the dns name the

910
00:32:19,200 --> 00:32:20,240
question

911
00:32:20,240 --> 00:32:23,679
does not match what was in the tls sni

912
00:32:23,679 --> 00:32:24,559
header

913
00:32:24,559 --> 00:32:26,000
you might think this is all we need to

914
00:32:26,000 --> 00:32:28,080
do but it turns out that that's pretty

915
00:32:28,080 --> 00:32:29,760
busy too

916
00:32:29,760 --> 00:32:31,840
and um the other thing that i'm going to

917
00:32:31,840 --> 00:32:33,180
do whoops

918
00:32:33,180 --> 00:32:36,159
[Music]

919
00:32:36,159 --> 00:32:38,159
what happened here

920
00:32:38,159 --> 00:32:40,000
okay uh sentinel i think was just

921
00:32:40,000 --> 00:32:41,600
hiccuping for a moment the other thing

922
00:32:41,600 --> 00:32:44,080
that we're doing is we're looking at

923
00:32:44,080 --> 00:32:46,080
only those records where the dns

924
00:32:46,080 --> 00:32:49,279
question and the tls connection happened

925
00:32:49,279 --> 00:32:51,440
less than 10 seconds apart the reason

926
00:32:51,440 --> 00:32:54,240
for this is because with cdns ip

927
00:32:54,240 --> 00:32:56,559
addresses change all the time and we're

928
00:32:56,559 --> 00:32:58,000
only interested in those things that are

929
00:32:58,000 --> 00:32:59,679
happening pretty much like right

930
00:32:59,679 --> 00:33:01,760
together so if somebody's trying to do

931
00:33:01,760 --> 00:33:03,039
domain printing they're going to do a

932
00:33:03,039 --> 00:33:04,880
dns lookup and then they're going to

933
00:33:04,880 --> 00:33:06,960
make the tls connection pretty much

934
00:33:06,960 --> 00:33:08,880
immediately you know less than a second

935
00:33:08,880 --> 00:33:10,799
after we're just giving it 10 seconds

936
00:33:10,799 --> 00:33:12,399
just for good measure

937
00:33:12,399 --> 00:33:14,640
also because this is all coming from the

938
00:33:14,640 --> 00:33:16,720
same source surakana i know that it's

939
00:33:16,720 --> 00:33:18,000
time synchronized so i don't need to

940
00:33:18,000 --> 00:33:20,320
worry about if one clock on one computer

941
00:33:20,320 --> 00:33:22,399
is 10 seconds off from the other one

942
00:33:22,399 --> 00:33:24,960
okay so now we've got a little bit more

943
00:33:24,960 --> 00:33:26,480
information here and you can see we've

944
00:33:26,480 --> 00:33:29,279
still got a lot of records um there's

945
00:33:29,279 --> 00:33:32,000
174 pages with 50

946
00:33:32,000 --> 00:33:33,600
records in each one

947
00:33:33,600 --> 00:33:36,640
but we've added on to it here is what

948
00:33:36,640 --> 00:33:39,519
was in the tls sni field

949
00:33:39,519 --> 00:33:40,480
um

950
00:33:40,480 --> 00:33:43,360
compared to what was in the dns request

951
00:33:43,360 --> 00:33:45,440
and for each one of these it should be

952
00:33:45,440 --> 00:33:47,200
different and it kind of gives you an

953
00:33:47,200 --> 00:33:49,360
idea when you start doing this just how

954
00:33:49,360 --> 00:33:52,000
common cdns are and like this is just a

955
00:33:52,000 --> 00:33:54,000
lab this isn't even like a big

956
00:33:54,000 --> 00:33:56,159
enterprise network you see a whole lot

957
00:33:56,159 --> 00:33:58,320
of this traffic all the time um it's

958
00:33:58,320 --> 00:33:59,919
really quite fascinating and it's

959
00:33:59,919 --> 00:34:02,080
wonderful engineering that the cdn

960
00:34:02,080 --> 00:34:04,159
creators have put together but still

961
00:34:04,159 --> 00:34:06,399
we've got way too much stuff to look for

962
00:34:06,399 --> 00:34:08,320
so the next thing i'm going to do

963
00:34:08,320 --> 00:34:10,800
is i'm going to take away

964
00:34:10,800 --> 00:34:14,960
everything that had a cname dns lookup

965
00:34:14,960 --> 00:34:16,960
response and i've created this custom

966
00:34:16,960 --> 00:34:18,399
function which i've also shared on

967
00:34:18,399 --> 00:34:19,599
github

968
00:34:19,599 --> 00:34:23,119
which will give you all of the

969
00:34:23,119 --> 00:34:24,800
cname

970
00:34:24,800 --> 00:34:27,679
responses for dns lookups you might be

971
00:34:27,679 --> 00:34:29,199
wondering what does cma mean if you're

972
00:34:29,199 --> 00:34:31,199
not familiar with dns but

973
00:34:31,199 --> 00:34:33,599
this is a really useful concept to learn

974
00:34:33,599 --> 00:34:34,879
especially if you're doing any kind of

975
00:34:34,879 --> 00:34:37,599
network threat hunting cname stands for

976
00:34:37,599 --> 00:34:40,560
canonical name and the easiest way to

977
00:34:40,560 --> 00:34:43,119
look to think about this is when you

978
00:34:43,119 --> 00:34:45,679
look up some easy to remember domain

979
00:34:45,679 --> 00:34:47,320
name you know like

980
00:34:47,320 --> 00:34:48,960
binarydefense.com

981
00:34:48,960 --> 00:34:52,480
and um behind the scenes it is more

982
00:34:52,480 --> 00:34:54,560
useful for that to go to this really

983
00:34:54,560 --> 00:34:56,560
long kind of difficult to remember name

984
00:34:56,560 --> 00:34:58,799
like

985
00:34:59,480 --> 00:35:01,599
cdn-02-us west

986
00:35:01,599 --> 00:35:03,920
dash binarydefense.com whatever i'm

987
00:35:03,920 --> 00:35:06,000
making this up but

988
00:35:06,000 --> 00:35:08,240
it basically makes dns a little bit

989
00:35:08,240 --> 00:35:09,839
easier to use

990
00:35:09,839 --> 00:35:11,040
uh by

991
00:35:11,040 --> 00:35:13,760
being able to answer the c name question

992
00:35:13,760 --> 00:35:15,280
differently depending on where in the

993
00:35:15,280 --> 00:35:17,040
world you are so that it can be served

994
00:35:17,040 --> 00:35:19,599
from someplace that is closer to you

995
00:35:19,599 --> 00:35:22,000
and also re relieves human beings of

996
00:35:22,000 --> 00:35:24,160
having to remember these really long

997
00:35:24,160 --> 00:35:25,760
uh domain names you don't want to have

998
00:35:25,760 --> 00:35:27,280
to remember hey when i'm in the western

999
00:35:27,280 --> 00:35:28,560
part of the united states i should use

1000
00:35:28,560 --> 00:35:30,320
this really long domain name and if i'm

1001
00:35:30,320 --> 00:35:31,599
in the eastern half i should do this

1002
00:35:31,599 --> 00:35:33,440
other thing except if i'm in tennessee

1003
00:35:33,440 --> 00:35:35,280
and it's something special so you don't

1004
00:35:35,280 --> 00:35:37,040
want to have to remember that cname just

1005
00:35:37,040 --> 00:35:38,400
takes care of that it's like record

1006
00:35:38,400 --> 00:35:40,960
keeping behind the scenes so here is a

1007
00:35:40,960 --> 00:35:42,960
really keen observation about the way

1008
00:35:42,960 --> 00:35:45,200
that domain fronting works it almost

1009
00:35:45,200 --> 00:35:48,800
never uses these c names as uh as part

1010
00:35:48,800 --> 00:35:51,359
of the lookup where the answer to the

1011
00:35:51,359 --> 00:35:52,960
cname is

1012
00:35:52,960 --> 00:35:55,200
the actual domain that they're trying to

1013
00:35:55,200 --> 00:35:56,800
the back-end domain that they're trying

1014
00:35:56,800 --> 00:35:58,240
to hide from you right because they

1015
00:35:58,240 --> 00:35:59,599
don't they won't

1016
00:35:59,599 --> 00:36:01,280
don't want you to see that however the

1017
00:36:01,280 --> 00:36:03,520
cname lookup is really common in these

1018
00:36:03,520 --> 00:36:06,960
other circumstances so we put that cname

1019
00:36:06,960 --> 00:36:09,520
on and basically we're just taking off

1020
00:36:09,520 --> 00:36:11,599
anything where that question and answer

1021
00:36:11,599 --> 00:36:14,400
for cname came up in

1022
00:36:14,400 --> 00:36:16,880
our results that cuts it down a lot and

1023
00:36:16,880 --> 00:36:18,079
then the last thing that we're going to

1024
00:36:18,079 --> 00:36:20,400
do is join it together with sysmond

1025
00:36:20,400 --> 00:36:21,920
records so that we can see from the

1026
00:36:21,920 --> 00:36:23,920
endpoint perspective what was the

1027
00:36:23,920 --> 00:36:26,240
process that was responsible for this

1028
00:36:26,240 --> 00:36:28,160
connection and that tells us a lot about

1029
00:36:28,160 --> 00:36:31,599
whether this is suspicious or not so

1030
00:36:31,599 --> 00:36:33,440
remember i had you know hundreds of

1031
00:36:33,440 --> 00:36:36,400
pages um and thousands of responses

1032
00:36:36,400 --> 00:36:37,920
before this takes a little bit longer

1033
00:36:37,920 --> 00:36:39,200
because we're putting together lots of

1034
00:36:39,200 --> 00:36:41,680
different tables but in the end now

1035
00:36:41,680 --> 00:36:43,920
we've just got one page and these are

1036
00:36:43,920 --> 00:36:46,400
all of our results right here so you can

1037
00:36:46,400 --> 00:36:48,800
see there this is still not all devious

1038
00:36:48,800 --> 00:36:51,280
but it is a reasonable amount to look

1039
00:36:51,280 --> 00:36:53,200
through for this environment and you

1040
00:36:53,200 --> 00:36:55,040
could narrow it down some more by

1041
00:36:55,040 --> 00:36:57,040
looking for you know particular things

1042
00:36:57,040 --> 00:36:58,960
that are common in your environment and

1043
00:36:58,960 --> 00:37:00,880
uh taking those out of the results or

1044
00:37:00,880 --> 00:37:03,359
whatever but we're going to go through

1045
00:37:03,359 --> 00:37:04,720
these really quick i'm just going to

1046
00:37:04,720 --> 00:37:06,240
hide the ip addresses because i don't

1047
00:37:06,240 --> 00:37:08,320
think that's useful to anybody right now

1048
00:37:08,320 --> 00:37:10,160
it's useful if you're gonna you know do

1049
00:37:10,160 --> 00:37:12,079
some more investigation though

1050
00:37:12,079 --> 00:37:13,760
and then i'm gonna expand this a little

1051
00:37:13,760 --> 00:37:16,000
bit more so you can see the process path

1052
00:37:16,000 --> 00:37:18,160
and i'm going to give that give the

1053
00:37:18,160 --> 00:37:19,680
results some more of my screen real

1054
00:37:19,680 --> 00:37:22,160
estate so the way to read this is left

1055
00:37:22,160 --> 00:37:23,200
to right

1056
00:37:23,200 --> 00:37:25,520
this is the dns name that somebody asked

1057
00:37:25,520 --> 00:37:26,640
for

1058
00:37:26,640 --> 00:37:29,200
this is what they actually connected to

1059
00:37:29,200 --> 00:37:30,960
as far as the tls

1060
00:37:30,960 --> 00:37:35,040
sni field and then here are the programs

1061
00:37:35,040 --> 00:37:37,280
that um we're doing that so we can see

1062
00:37:37,280 --> 00:37:40,400
teams comes up in this a whole lot

1063
00:37:40,400 --> 00:37:43,040
and then let me scroll down since we're

1064
00:37:43,040 --> 00:37:46,160
getting close on time i want to show you

1065
00:37:46,160 --> 00:37:48,160
some of these results okay

1066
00:37:48,160 --> 00:37:51,200
so this is actually an example of the

1067
00:37:51,200 --> 00:37:52,880
fronting domain that i was using and i

1068
00:37:52,880 --> 00:37:55,359
pulled this right out of a

1069
00:37:55,359 --> 00:37:58,640
tutorial on how to set up a domain front

1070
00:37:58,640 --> 00:38:02,400
uh natick cdn.azureedge.net

1071
00:38:02,400 --> 00:38:04,079
which is the same as

1072
00:38:04,079 --> 00:38:07,079
natick.research.microsoft.com

1073
00:38:07,280 --> 00:38:09,680
and then the tls sni is

1074
00:38:09,680 --> 00:38:12,680
vsupdateserver.azureedge.net

1075
00:38:13,200 --> 00:38:15,760
which is the cdn endpoint that i created

1076
00:38:15,760 --> 00:38:18,160
myself in the lab and now i'll just time

1077
00:38:18,160 --> 00:38:19,920
it to see how long it takes microsoft to

1078
00:38:19,920 --> 00:38:21,760
take that down and that's fine if they

1079
00:38:21,760 --> 00:38:24,640
do this is for experimentation only the

1080
00:38:24,640 --> 00:38:26,320
next thing that i want you to see is

1081
00:38:26,320 --> 00:38:28,000
what was the process

1082
00:38:28,000 --> 00:38:30,160
um that was responsible for that so any

1083
00:38:30,160 --> 00:38:31,839
of you watching this who are threat

1084
00:38:31,839 --> 00:38:33,520
hunters you probably just got goosebumps

1085
00:38:33,520 --> 00:38:35,119
on the back of your neck

1086
00:38:35,119 --> 00:38:36,839
because anytime you see

1087
00:38:36,839 --> 00:38:38,800
svchost.exe showing up someplace that

1088
00:38:38,800 --> 00:38:40,560
it's not supposed to be it's probably a

1089
00:38:40,560 --> 00:38:42,079
bad day

1090
00:38:42,079 --> 00:38:45,200
so this is definitely our example of uh

1091
00:38:45,200 --> 00:38:47,760
domain fronting um i think we're going

1092
00:38:47,760 --> 00:38:49,200
to wrap it up there because we're almost

1093
00:38:49,200 --> 00:38:51,200
done and we want to take any questions

1094
00:38:51,200 --> 00:38:53,040
that we have so any questions that have

1095
00:38:53,040 --> 00:38:55,440
come up in the chat

1096
00:38:55,440 --> 00:38:58,240
hi randy yes there have been quite a few

1097
00:38:58,240 --> 00:39:00,480
for the two of you um

1098
00:39:00,480 --> 00:39:02,720
let me just pull it back up

1099
00:39:02,720 --> 00:39:04,960
this is wonderful by the way

1100
00:39:04,960 --> 00:39:05,920
thank you

1101
00:39:05,920 --> 00:39:07,440
um first was for the pretzels what kind

1102
00:39:07,440 --> 00:39:09,440
of flour if you have a recommendation

1103
00:39:09,440 --> 00:39:12,000
wow we use king arthur flour um i think

1104
00:39:12,000 --> 00:39:13,440
that's really good

1105
00:39:13,440 --> 00:39:16,079
um have we used anything else no no

1106
00:39:16,079 --> 00:39:17,839
that's pretty much it king arthur flower

1107
00:39:17,839 --> 00:39:18,960
yeah

1108
00:39:18,960 --> 00:39:22,000
any recommended places to get pretzels

1109
00:39:22,000 --> 00:39:24,240
around seattle or possibly leavenworth

1110
00:39:24,240 --> 00:39:26,720
oh yeah oh i'm sure leavenworth you can

1111
00:39:26,720 --> 00:39:28,640
get them everywhere i think they grow on

1112
00:39:28,640 --> 00:39:30,320
the trees in leavenworth um and if

1113
00:39:30,320 --> 00:39:31,520
you're not from the seattle area

1114
00:39:31,520 --> 00:39:34,400
leavenworth is like a um

1115
00:39:34,400 --> 00:39:37,119
bavarian town yeah bavarian town it's

1116
00:39:37,119 --> 00:39:39,440
super cool we love going there um in

1117
00:39:39,440 --> 00:39:42,400
seattle area go to bakery nouveau

1118
00:39:42,400 --> 00:39:45,200
and you have to order the pretzels ahead

1119
00:39:45,200 --> 00:39:47,200
of time uh the day before and then

1120
00:39:47,200 --> 00:39:48,720
they'll make the variant pretzels for

1121
00:39:48,720 --> 00:39:49,520
you

1122
00:39:49,520 --> 00:39:52,640
oh wow or if you are in the south

1123
00:39:52,640 --> 00:39:54,240
seattle area and you would like one of

1124
00:39:54,240 --> 00:39:57,359
these pretzels uh hit me up and i will

1125
00:39:57,359 --> 00:40:00,079
go meet you somewhere with a pretzel

1126
00:40:00,079 --> 00:40:02,720
i'm gonna call you in a minute all right

1127
00:40:02,720 --> 00:40:03,320
um

1128
00:40:03,320 --> 00:40:06,079
[Music]

1129
00:40:06,079 --> 00:40:07,920
somebody oh i think somebody asked about

1130
00:40:07,920 --> 00:40:09,680
the dog where's the dog what's the dog's

1131
00:40:09,680 --> 00:40:11,839
name what kind of dog is it

1132
00:40:11,839 --> 00:40:13,520
her name is prim

1133
00:40:13,520 --> 00:40:16,560
she's a rescue dog she's about 50 pounds

1134
00:40:16,560 --> 00:40:18,240
she's somewhere

1135
00:40:18,240 --> 00:40:21,280
we love the dog all right yes

1136
00:40:21,280 --> 00:40:23,920
he came from tijuana and she now lives

1137
00:40:23,920 --> 00:40:26,000
in seattle and so she's always cold and

1138
00:40:26,000 --> 00:40:28,000
she wears a coat yeah that makes it and

1139
00:40:28,000 --> 00:40:29,359
now she's scared she doesn't want to

1140
00:40:29,359 --> 00:40:31,520
come on the camera

1141
00:40:31,520 --> 00:40:34,640
just had opinions i get it um

1142
00:40:34,640 --> 00:40:36,800
best places to learn kql

1143
00:40:36,800 --> 00:40:38,960
ooh that's really good so actually i

1144
00:40:38,960 --> 00:40:40,800
would say subscribe to the microsoft

1145
00:40:40,800 --> 00:40:44,480
security um oh it's not webcast i guess

1146
00:40:44,480 --> 00:40:46,560
i don't remember what they call it but

1147
00:40:46,560 --> 00:40:48,960
they put on really regular webcasts um

1148
00:40:48,960 --> 00:40:50,560
and they have recordings available and

1149
00:40:50,560 --> 00:40:52,560
they'll do a live share with like

1150
00:40:52,560 --> 00:40:54,720
experts and some really cool people who

1151
00:40:54,720 --> 00:40:57,440
know a lot about kql

1152
00:40:57,440 --> 00:41:00,000
and they recently did one where they

1153
00:41:00,000 --> 00:41:02,240
did some kql exploration through jupiter

1154
00:41:02,240 --> 00:41:04,079
notebooks which i thought was a really

1155
00:41:04,079 --> 00:41:06,319
interesting way to go about it but very

1156
00:41:06,319 --> 00:41:07,359
effective

1157
00:41:07,359 --> 00:41:11,920
um the other thing that i would say is

1158
00:41:11,920 --> 00:41:14,480
i will share on twitter

1159
00:41:14,480 --> 00:41:17,200
there's a good reference book for kql

1160
00:41:17,200 --> 00:41:19,119
which you kind of learn by example and

1161
00:41:19,119 --> 00:41:21,119
then i would say that the best way to do

1162
00:41:21,119 --> 00:41:23,119
it is just dive in and start playing

1163
00:41:23,119 --> 00:41:24,560
around with it

1164
00:41:24,560 --> 00:41:27,680
it's pretty simple there's a

1165
00:41:27,680 --> 00:41:30,000
azure lab that you can just kind of roll

1166
00:41:30,000 --> 00:41:33,839
out in the free tier of azure i get like

1167
00:41:33,839 --> 00:41:36,720
200 credit for 30 days and you can use

1168
00:41:36,720 --> 00:41:38,079
it all within that just make sure to

1169
00:41:38,079 --> 00:41:40,000
cancel it after 30 days you don't pay

1170
00:41:40,000 --> 00:41:44,240
the bill um and it's got uh like sample

1171
00:41:44,240 --> 00:41:46,839
data in there and all kinds of

1172
00:41:46,839 --> 00:41:49,280
stuff next question was if you're in

1173
00:41:49,280 --> 00:41:50,720
seattle why is it so bright in there

1174
00:41:50,720 --> 00:41:52,240
which oh cause we've got all these

1175
00:41:52,240 --> 00:41:53,760
lights i wish i could show you like how

1176
00:41:53,760 --> 00:41:57,119
many lamps we put up so that we could uh

1177
00:41:57,119 --> 00:42:01,040
light uh properly yeah

1178
00:42:01,200 --> 00:42:02,960
rest assured it's totally cloudy and

1179
00:42:02,960 --> 00:42:05,280
rainy outside yeah

1180
00:42:05,280 --> 00:42:08,400
do any of the cdn providers mitigate

1181
00:42:08,400 --> 00:42:11,280
what you're doing on ipv6 by using a

1182
00:42:11,280 --> 00:42:13,440
unique ip address per domain

1183
00:42:13,440 --> 00:42:16,079
oh i don't know i you know what i didn't

1184
00:42:16,079 --> 00:42:17,440
experiment with that i would love to

1185
00:42:17,440 --> 00:42:19,440
know the answer to that too all right um

1186
00:42:19,440 --> 00:42:21,520
i think there's a lot of opportunity and

1187
00:42:21,520 --> 00:42:24,160
i've seen cbn's like taking a harder

1188
00:42:24,160 --> 00:42:26,400
approach to this i also want to mention

1189
00:42:26,400 --> 00:42:28,480
like the main fronting isn't

1190
00:42:28,480 --> 00:42:30,560
a bad thing necessarily it also helps

1191
00:42:30,560 --> 00:42:33,119
people in countries that are oppressive

1192
00:42:33,119 --> 00:42:35,520
to get around restrictions and you know

1193
00:42:35,520 --> 00:42:36,800
pretend like they're going to one side

1194
00:42:36,800 --> 00:42:38,319
and actually go to another so they can

1195
00:42:38,319 --> 00:42:40,720
get their news so it has a proper place

1196
00:42:40,720 --> 00:42:42,880
it's just often misused

1197
00:42:42,880 --> 00:42:45,599
okay and then are cdn's generally

1198
00:42:45,599 --> 00:42:47,520
starting to block domain fronting from

1199
00:42:47,520 --> 00:42:48,640
working

1200
00:42:48,640 --> 00:42:50,640
um yeah they're doing a lot more and i

1201
00:42:50,640 --> 00:42:52,640
did see a public statement from

1202
00:42:52,640 --> 00:42:54,560
microsoft that said that they are going

1203
00:42:54,560 --> 00:42:55,760
to

1204
00:42:55,760 --> 00:42:58,800
take measures to prevent people abusing

1205
00:42:58,800 --> 00:43:01,119
their cdn for domain fronting so as a

1206
00:43:01,119 --> 00:43:02,880
defender i would love that day i would

1207
00:43:02,880 --> 00:43:04,880
like all the cdns to just figure out a

1208
00:43:04,880 --> 00:43:08,480
way to not allow people to do that but

1209
00:43:08,480 --> 00:43:10,160
the reason i was showing the differences

1210
00:43:10,160 --> 00:43:12,079
between like putting the fronted domain

1211
00:43:12,079 --> 00:43:16,480
in the uh sni field or not is because

1212
00:43:16,480 --> 00:43:18,800
depending on how you do it you're either

1213
00:43:18,800 --> 00:43:20,720
as the attacker you're either giving

1214
00:43:20,720 --> 00:43:23,280
more visibility or possibility of

1215
00:43:23,280 --> 00:43:26,000
visibility to the defenders locally or

1216
00:43:26,000 --> 00:43:29,599
to the cdn if you put the fronted domain

1217
00:43:29,599 --> 00:43:32,160
in the sni and you have the back-end

1218
00:43:32,160 --> 00:43:33,839
domain in the

1219
00:43:33,839 --> 00:43:36,400
host header you're telling the cdn i'm

1220
00:43:36,400 --> 00:43:38,000
doing domain printing and they if

1221
00:43:38,000 --> 00:43:38,800
they're

1222
00:43:38,800 --> 00:43:40,319
mining their data they can stop you from

1223
00:43:40,319 --> 00:43:44,400
doing that if you don't if you put the

1224
00:43:44,400 --> 00:43:47,280
backend domain in the sni field and you

1225
00:43:47,280 --> 00:43:50,480
just do the dns request as the fronted

1226
00:43:50,480 --> 00:43:51,440
domain

1227
00:43:51,440 --> 00:43:53,680
now you're putting more of the onus on

1228
00:43:53,680 --> 00:43:55,839
the local defenders to detect that and

1229
00:43:55,839 --> 00:43:57,599
you're not giving the cdn as much to

1230
00:43:57,599 --> 00:43:59,040
work with

1231
00:43:59,040 --> 00:44:01,599
makes sense awesome thank you um i know

1232
00:44:01,599 --> 00:44:03,680
you said something about mustard we're

1233
00:44:03,680 --> 00:44:06,319
at we're at time okay

1234
00:44:06,319 --> 00:44:08,319
so i put it on twitter too but okay i'll

1235
00:44:08,319 --> 00:44:10,960
show you hondlemeyer this is fantastic

1236
00:44:10,960 --> 00:44:12,560
if you like sweet mustard this is not

1237
00:44:12,560 --> 00:44:14,800
spicy at all there's also some really

1238
00:44:14,800 --> 00:44:17,200
good inglehoffer spicy mustard if you

1239
00:44:17,200 --> 00:44:18,400
like that

1240
00:44:18,400 --> 00:44:20,800
um so yeah we don't need to demonstrate

1241
00:44:20,800 --> 00:44:23,359
mustard but but you can you can buy this

1242
00:44:23,359 --> 00:44:25,200
online get it shipped to you it's pretty

1243
00:44:25,200 --> 00:44:26,960
good but the one thing i do want to show

1244
00:44:26,960 --> 00:44:29,520
you is um this is the one this is the

1245
00:44:29,520 --> 00:44:31,200
pretzel with the lye this is the pretzel

1246
00:44:31,200 --> 00:44:33,280
with the baking soda it pretty much came

1247
00:44:33,280 --> 00:44:35,200
out the same it's not a whole lot of

1248
00:44:35,200 --> 00:44:37,680
difference and what you really want

1249
00:44:37,680 --> 00:44:42,079
is to have a nice soft interior

1250
00:44:42,079 --> 00:44:44,720
so thank you so much for your attention

1251
00:44:44,720 --> 00:44:46,319
and hope to share some pretzels with

1252
00:44:46,319 --> 00:44:48,240
some people thank you both beautiful

1253
00:44:48,240 --> 00:44:51,839
pretzels great info

