1
00:00:01,199 --> 00:00:03,760
let's see we have a first-time speaker

2
00:00:03,760 --> 00:00:06,799
uh joel leon joe is an offensive

3
00:00:06,799 --> 00:00:08,320
security engineer

4
00:00:08,320 --> 00:00:10,960
with 40 north security where he works on

5
00:00:10,960 --> 00:00:13,040
red team assessments pen testing and

6
00:00:13,040 --> 00:00:15,599
web app assessments he's also a master

7
00:00:15,599 --> 00:00:16,079
student

8
00:00:16,079 --> 00:00:18,880
at nyu and previously taught at black

9
00:00:18,880 --> 00:00:21,199
hat usa 2019

10
00:00:21,199 --> 00:00:24,880
and the way west wild west hack and fest

11
00:00:24,880 --> 00:00:28,160
ah and today he is talking about living

12
00:00:28,160 --> 00:00:30,640
off the land with a side of bubble tea

13
00:00:30,640 --> 00:00:32,320
just about every month there's a bunch

14
00:00:32,320 --> 00:00:34,640
of new posts about ways to repurpose

15
00:00:34,640 --> 00:00:36,800
legitimate microsoft signed binaries to

16
00:00:36,800 --> 00:00:38,559
achieve some malicious goal

17
00:00:38,559 --> 00:00:41,520
such as executing arbitrary code in this

18
00:00:41,520 --> 00:00:43,280
talk we'll venture beyond the basics of

19
00:00:43,280 --> 00:00:44,000
cert util

20
00:00:44,000 --> 00:00:46,800
and run dll-32 and look at how attackers

21
00:00:46,800 --> 00:00:47,280
use

22
00:00:47,280 --> 00:00:50,559
ms build and wmic to execute arbitrary

23
00:00:50,559 --> 00:00:52,239
c-sharp code

24
00:00:52,239 --> 00:00:53,920
this is a fundamental concept in red

25
00:00:53,920 --> 00:00:55,760
teaming and internal pen testing and

26
00:00:55,760 --> 00:00:57,280
important for all junior analysts to

27
00:00:57,280 --> 00:00:58,719
understand

28
00:00:58,719 --> 00:01:00,879
and during the second half of this talk

29
00:01:00,879 --> 00:01:02,559
we'll learn about

30
00:01:02,559 --> 00:01:05,600
is passion bubble tea prior to visiting

31
00:01:05,600 --> 00:01:07,439
any new city i always google for bubble

32
00:01:07,439 --> 00:01:09,360
tea shops i've been drinking bubble tea

33
00:01:09,360 --> 00:01:11,520
since 2005 but many people have never

34
00:01:11,520 --> 00:01:13,040
tasted this delicious

35
00:01:13,040 --> 00:01:16,000
milky tapioca drink i'll share the

36
00:01:16,000 --> 00:01:17,200
origins of bubble tea

37
00:01:17,200 --> 00:01:19,280
explain how to order as well as how to

38
00:01:19,280 --> 00:01:22,240
make your own version at home

39
00:01:22,240 --> 00:01:26,080
so joe you ready to present now

40
00:01:26,080 --> 00:01:29,520
yes sir getting the uh webcam up too

41
00:01:29,520 --> 00:01:31,680
in case people want to want to see i

42
00:01:31,680 --> 00:01:32,880
don't know if anybody can see

43
00:01:32,880 --> 00:01:35,600
but is the audio coming in clear audio

44
00:01:35,600 --> 00:01:36,240
is clear

45
00:01:36,240 --> 00:01:39,040
so without any further ado i give you

46
00:01:39,040 --> 00:01:40,240
joseph leon

47
00:01:40,240 --> 00:01:42,399
with living off the land with a side of

48
00:01:42,399 --> 00:01:45,040
bubble tea

49
00:01:45,200 --> 00:01:47,520
thank you very much welcome everybody

50
00:01:47,520 --> 00:01:49,759
i'm excited this is my first talk

51
00:01:49,759 --> 00:01:52,799
uh so without much to do let's jump in

52
00:01:52,799 --> 00:01:54,159
uh i already had a bit of

53
00:01:54,159 --> 00:01:56,560
background on me in addition to what you

54
00:01:56,560 --> 00:01:57,200
just heard

55
00:01:57,200 --> 00:01:59,360
um i just wanted to mention also that a

56
00:01:59,360 --> 00:02:00,399
couple of my interests

57
00:02:00,399 --> 00:02:03,360
in information security social

58
00:02:03,360 --> 00:02:05,119
engineering i actually started my career

59
00:02:05,119 --> 00:02:06,000
in sales

60
00:02:06,000 --> 00:02:08,318
learned a lot of the basic foundations

61
00:02:08,318 --> 00:02:09,679
of social engineering so that's a big

62
00:02:09,679 --> 00:02:11,280
passion of mine as well

63
00:02:11,280 --> 00:02:14,400
also built a small sas company so web

64
00:02:14,400 --> 00:02:15,520
app testing

65
00:02:15,520 --> 00:02:17,200
is another passion and then i would say

66
00:02:17,200 --> 00:02:18,640
number three on that list is what we're

67
00:02:18,640 --> 00:02:20,080
going to talk about today

68
00:02:20,080 --> 00:02:22,560
living off the land i'm really excited

69
00:02:22,560 --> 00:02:23,920
to share that with you guys and then

70
00:02:23,920 --> 00:02:24,879
later on we'll

71
00:02:24,879 --> 00:02:27,840
we'll get into my non-work passion of

72
00:02:27,840 --> 00:02:29,040
bubble tea

73
00:02:29,040 --> 00:02:32,800
okay so living off the land before we

74
00:02:32,800 --> 00:02:34,879
jump in anymore i just want to share a

75
00:02:34,879 --> 00:02:36,160
little bit about the goals of what i

76
00:02:36,160 --> 00:02:36,879
thought

77
00:02:36,879 --> 00:02:38,720
would be that i want you guys to gain

78
00:02:38,720 --> 00:02:40,640
from this talk so first and foremost

79
00:02:40,640 --> 00:02:43,040
what is living off the land just being

80
00:02:43,040 --> 00:02:44,560
able to describe and understand

81
00:02:44,560 --> 00:02:47,840
it also why is it important why is this

82
00:02:47,840 --> 00:02:49,599
a concept that a lot of folks talk about

83
00:02:49,599 --> 00:02:51,599
that there's a lot of research on

84
00:02:51,599 --> 00:02:54,720
why should you care about it and then

85
00:02:54,720 --> 00:02:57,440
this is the most important part let's

86
00:02:57,440 --> 00:02:58,959
see some concrete examples

87
00:02:58,959 --> 00:03:00,640
i want to show you cert util which is a

88
00:03:00,640 --> 00:03:02,400
super basic example

89
00:03:02,400 --> 00:03:03,680
but i also want to go beyond that i want

90
00:03:03,680 --> 00:03:06,480
to show you ms build as well as wemmick

91
00:03:06,480 --> 00:03:09,280
um and how those two binaries can be

92
00:03:09,280 --> 00:03:09,920
used

93
00:03:09,920 --> 00:03:12,560
to execute arbitrary code on a target

94
00:03:12,560 --> 00:03:13,280
machine

95
00:03:13,280 --> 00:03:14,879
and last but not least for those of you

96
00:03:14,879 --> 00:03:16,800
that are a bit more experienced with

97
00:03:16,800 --> 00:03:20,000
living off the land and lobos stuff

98
00:03:20,000 --> 00:03:22,080
conducted a bit of original research in

99
00:03:22,080 --> 00:03:23,360
the last few months

100
00:03:23,360 --> 00:03:26,159
published a post last month on a new way

101
00:03:26,159 --> 00:03:27,519
to use ms build

102
00:03:27,519 --> 00:03:29,280
and wanted to make sure that those of

103
00:03:29,280 --> 00:03:30,560
you that are more experienced have

104
00:03:30,560 --> 00:03:32,080
something to take home as well

105
00:03:32,080 --> 00:03:33,519
so we'll go over the basics and then

106
00:03:33,519 --> 00:03:34,560
i'll share a little bit about that

107
00:03:34,560 --> 00:03:35,920
research just briefly

108
00:03:35,920 --> 00:03:37,599
uh as well so that might be something

109
00:03:37,599 --> 00:03:39,920
new for the more experienced folks

110
00:03:39,920 --> 00:03:42,879
so with that let us jump in the core of

111
00:03:42,879 --> 00:03:44,560
what we're talking about today

112
00:03:44,560 --> 00:03:48,000
is repurposing microsoft signed binaries

113
00:03:48,000 --> 00:03:50,000
to do something that we want that's it

114
00:03:50,000 --> 00:03:51,840
that's the main idea

115
00:03:51,840 --> 00:03:53,280
of what we're talking about but i want

116
00:03:53,280 --> 00:03:54,799
to get really tangible so let's jump

117
00:03:54,799 --> 00:03:56,159
into an example

118
00:03:56,159 --> 00:03:59,360
uh let's say i asked you or you had a

119
00:03:59,360 --> 00:04:00,000
requirement

120
00:04:00,000 --> 00:04:02,720
of downloading a web page from a web

121
00:04:02,720 --> 00:04:03,519
server

122
00:04:03,519 --> 00:04:05,200
via the command line and let's just say

123
00:04:05,200 --> 00:04:06,720
that's google's home page

124
00:04:06,720 --> 00:04:09,519
in this case if you're on a linux

125
00:04:09,519 --> 00:04:10,720
machine

126
00:04:10,720 --> 00:04:13,760
it's pretty easy we have curl wget it's

127
00:04:13,760 --> 00:04:14,000
not

128
00:04:14,000 --> 00:04:17,440
that tough to get a a web page down so

129
00:04:17,440 --> 00:04:20,238
there's a just a quick example

130
00:04:20,238 --> 00:04:22,000
but if i ask you to do that on windows

131
00:04:22,000 --> 00:04:23,440
on the command line you're going to

132
00:04:23,440 --> 00:04:24,320
pause

133
00:04:24,320 --> 00:04:26,720
because there's not a good tool default

134
00:04:26,720 --> 00:04:28,240
installed everywhere

135
00:04:28,240 --> 00:04:31,440
to do that uh there is no curl and w get

136
00:04:31,440 --> 00:04:31,919
arts

137
00:04:31,919 --> 00:04:34,400
installed by default everywhere so what

138
00:04:34,400 --> 00:04:35,919
would you do

139
00:04:35,919 --> 00:04:38,080
that's where cert util comes in uh so

140
00:04:38,080 --> 00:04:39,120
this will be your first

141
00:04:39,120 --> 00:04:40,880
low boss if this is new or low bass

142
00:04:40,880 --> 00:04:42,479
depending on how you pronounce it and

143
00:04:42,479 --> 00:04:43,840
don't worry what that means i'll explain

144
00:04:43,840 --> 00:04:44,720
that in a second i

145
00:04:44,720 --> 00:04:46,720
might be able to guess uh but let's

146
00:04:46,720 --> 00:04:48,720
first look at certain utility what is

147
00:04:48,720 --> 00:04:49,440
this

148
00:04:49,440 --> 00:04:50,960
what's this about what's this used for

149
00:04:50,960 --> 00:04:52,240
you probably haven't even heard of it

150
00:04:52,240 --> 00:04:53,120
before

151
00:04:53,120 --> 00:04:56,160
unless you know about this

152
00:04:56,160 --> 00:04:58,800
repurposing of the binary so this is a

153
00:04:58,800 --> 00:05:00,720
screenshot right from microsoft stock

154
00:05:00,720 --> 00:05:01,919
documentation

155
00:05:01,919 --> 00:05:04,000
so basically as as you can read it's a

156
00:05:04,000 --> 00:05:05,520
command line program dealing with

157
00:05:05,520 --> 00:05:06,720
certificate services

158
00:05:06,720 --> 00:05:10,479
so downloading certificates uh decoding

159
00:05:10,479 --> 00:05:11,360
them

160
00:05:11,360 --> 00:05:13,840
backing up and restoring components like

161
00:05:13,840 --> 00:05:16,000
that's what this binary does

162
00:05:16,000 --> 00:05:18,160
and like so what like who who cares like

163
00:05:18,160 --> 00:05:20,560
why is this relevant well

164
00:05:20,560 --> 00:05:23,680
this is what if you run this command so

165
00:05:23,680 --> 00:05:24,479
cert util

166
00:05:24,479 --> 00:05:26,000
dash or tac depending on that you want

167
00:05:26,000 --> 00:05:28,000
to say attack url cache

168
00:05:28,000 --> 00:05:31,360
tag split tac f and then the domain or

169
00:05:31,360 --> 00:05:31,680
the

170
00:05:31,680 --> 00:05:33,199
like the web page the path to the web

171
00:05:33,199 --> 00:05:35,919
page you can actually download

172
00:05:35,919 --> 00:05:38,240
uh an html file from a web server or any

173
00:05:38,240 --> 00:05:40,479
file from our web server for that matter

174
00:05:40,479 --> 00:05:43,600
um and that's pretty cool right so we

175
00:05:43,600 --> 00:05:45,919
went from not having wget or curl on a

176
00:05:45,919 --> 00:05:47,280
windows machine

177
00:05:47,280 --> 00:05:49,680
to now being able to use this built-in

178
00:05:49,680 --> 00:05:51,520
binary cert util

179
00:05:51,520 --> 00:05:54,400
to download a web page and that's the

180
00:05:54,400 --> 00:05:55,759
core of what we're going to be talking

181
00:05:55,759 --> 00:05:57,759
about for the next like say 15 minutes

182
00:05:57,759 --> 00:05:59,440
before bubble tea

183
00:05:59,440 --> 00:06:01,120
is how can we use some of these

184
00:06:01,120 --> 00:06:02,960
microsoft signed binaries these

185
00:06:02,960 --> 00:06:04,000
applications that are

186
00:06:04,000 --> 00:06:06,720
already on windows and repurpose them to

187
00:06:06,720 --> 00:06:08,160
do something that we want

188
00:06:08,160 --> 00:06:09,600
so there's the command in case you're

189
00:06:09,600 --> 00:06:11,360
interested in trying this out on a

190
00:06:11,360 --> 00:06:12,720
windows machine

191
00:06:12,720 --> 00:06:14,160
but let's take a step back before any

192
00:06:14,160 --> 00:06:16,400
more examples

193
00:06:16,400 --> 00:06:17,919
and just make sure we're all very

194
00:06:17,919 --> 00:06:19,680
crystal clear on what the basic

195
00:06:19,680 --> 00:06:21,919
general definition is of living off the

196
00:06:21,919 --> 00:06:22,800
land

197
00:06:22,800 --> 00:06:24,800
the idea is that excuse me the idea is

198
00:06:24,800 --> 00:06:26,720
we're not dropping our own

199
00:06:26,720 --> 00:06:28,479
custom written malware we're not

200
00:06:28,479 --> 00:06:31,120
bringing some random tools and dropping

201
00:06:31,120 --> 00:06:32,880
them on our target host

202
00:06:32,880 --> 00:06:35,039
instead we're using what's already there

203
00:06:35,039 --> 00:06:36,479
these existing

204
00:06:36,479 --> 00:06:38,960
microsoft applications binaries and

205
00:06:38,960 --> 00:06:40,960
we're repurposing them to conduct

206
00:06:40,960 --> 00:06:43,360
whatever we need to do download the file

207
00:06:43,360 --> 00:06:44,639
like you just saw

208
00:06:44,639 --> 00:06:47,360
execute code it really just depends on

209
00:06:47,360 --> 00:06:50,240
what you're trying to accomplish

210
00:06:50,240 --> 00:06:53,680
to live off the land a a binary an

211
00:06:53,680 --> 00:06:55,520
application or file needs to be

212
00:06:55,520 --> 00:06:57,599
signed by microsoft so it's a microsoft

213
00:06:57,599 --> 00:06:59,039
application

214
00:06:59,039 --> 00:07:01,199
typically these need to be installed

215
00:07:01,199 --> 00:07:02,319
already installed

216
00:07:02,319 --> 00:07:04,560
but there are some um there are some

217
00:07:04,560 --> 00:07:05,759
microsoft applications that

218
00:07:05,759 --> 00:07:07,599
theoretically you could download

219
00:07:07,599 --> 00:07:09,360
to the machine that are microsoft

220
00:07:09,360 --> 00:07:11,039
products that we could repurpose

221
00:07:11,039 --> 00:07:12,720
microsoft teams is a great example

222
00:07:12,720 --> 00:07:14,639
that's not installed globally

223
00:07:14,639 --> 00:07:16,960
a lot of enterprise environments use it

224
00:07:16,960 --> 00:07:18,160
but if it's not on

225
00:07:18,160 --> 00:07:20,960
a host that you are targeting uh once

226
00:07:20,960 --> 00:07:21,759
you're on the machine

227
00:07:21,759 --> 00:07:23,280
it'd be possible to potentially download

228
00:07:23,280 --> 00:07:24,960
it and then repurpose that

229
00:07:24,960 --> 00:07:27,520
so again microsoft signed binaries we're

230
00:07:27,520 --> 00:07:28,880
typically looking for those already

231
00:07:28,880 --> 00:07:30,080
installed

232
00:07:30,080 --> 00:07:31,919
but theoretically if you could download

233
00:07:31,919 --> 00:07:33,440
it and it's a microsoft product that

234
00:07:33,440 --> 00:07:34,639
would

235
00:07:34,639 --> 00:07:36,880
suit the same purpose and most

236
00:07:36,880 --> 00:07:38,319
importantly we're looking for

237
00:07:38,319 --> 00:07:39,440
functionality

238
00:07:39,440 --> 00:07:42,479
that can be misused or

239
00:07:42,479 --> 00:07:45,360
repurposed as i like to say for whatever

240
00:07:45,360 --> 00:07:46,639
we're trying to do

241
00:07:46,639 --> 00:07:48,240
on the right you'll see there's this

242
00:07:48,240 --> 00:07:50,000
logo low boss low pass

243
00:07:50,000 --> 00:07:51,520
depending on how you want to pronounce

244
00:07:51,520 --> 00:07:54,319
it uh this is an awesome project so that

245
00:07:54,319 --> 00:07:54,879
stands for

246
00:07:54,879 --> 00:07:56,879
living off the land of binaries and

247
00:07:56,879 --> 00:07:58,000
scripts

248
00:07:58,000 --> 00:07:59,840
if you just google lobos you'll find

249
00:07:59,840 --> 00:08:01,759
this page this is awesome

250
00:08:01,759 --> 00:08:03,440
when you're looking for a resource to

251
00:08:03,440 --> 00:08:04,800
learn more about this

252
00:08:04,800 --> 00:08:06,479
this is where you should start there's

253
00:08:06,479 --> 00:08:07,919
an awesome little search bar there that

254
00:08:07,919 --> 00:08:10,560
you could search by the binary name

255
00:08:10,560 --> 00:08:12,240
application or you could search by the

256
00:08:12,240 --> 00:08:13,919
functionality so

257
00:08:13,919 --> 00:08:16,160
let's say you don't want to use cert

258
00:08:16,160 --> 00:08:17,759
util to download a file

259
00:08:17,759 --> 00:08:20,319
well maybe you could search for download

260
00:08:20,319 --> 00:08:22,639
and find out bits admin could do it too

261
00:08:22,639 --> 00:08:25,039
um really just depends on what you're

262
00:08:25,039 --> 00:08:27,039
trying to accomplish but this is a great

263
00:08:27,039 --> 00:08:28,879
place and good resource to start and

264
00:08:28,879 --> 00:08:32,319
it's constantly being updated too

265
00:08:32,719 --> 00:08:34,559
so when are we going to use this concept

266
00:08:34,559 --> 00:08:36,640
of living off the land

267
00:08:36,640 --> 00:08:38,799
first and foremost initial access is a

268
00:08:38,799 --> 00:08:40,320
great place to start when we're gaining

269
00:08:40,320 --> 00:08:41,120
entry

270
00:08:41,120 --> 00:08:45,120
um i've put an ms build bypass which

271
00:08:45,120 --> 00:08:46,720
i'll explain in the next

272
00:08:46,720 --> 00:08:49,120
section in macros before which has been

273
00:08:49,120 --> 00:08:49,760
very useful

274
00:08:49,760 --> 00:08:52,080
it's great for persistence and lateral

275
00:08:52,080 --> 00:08:53,839
movement that might be even the most

276
00:08:53,839 --> 00:08:56,880
used uh example honestly when we're

277
00:08:56,880 --> 00:08:57,200
trying

278
00:08:57,200 --> 00:08:58,800
bilateral movement i mean moving from

279
00:08:58,800 --> 00:09:00,480
one host to another

280
00:09:00,480 --> 00:09:02,880
within a network um so really at any

281
00:09:02,880 --> 00:09:04,880
stage throughout the attack life cycle

282
00:09:04,880 --> 00:09:07,680
we could use this concept of living off

283
00:09:07,680 --> 00:09:09,440
the land

284
00:09:09,440 --> 00:09:11,440
but why does it matter like so we've

285
00:09:11,440 --> 00:09:12,880
gotten through the fundamentals we know

286
00:09:12,880 --> 00:09:14,320
what it is like but why

287
00:09:14,320 --> 00:09:15,920
like why do you care like why would you

288
00:09:15,920 --> 00:09:18,399
do it um and i boiled it down to four

289
00:09:18,399 --> 00:09:20,320
points i'm sure there's more

290
00:09:20,320 --> 00:09:24,720
but number one if our traffic looks very

291
00:09:24,720 --> 00:09:26,880
similar to a normal user's traffic

292
00:09:26,880 --> 00:09:30,000
so for example if a machine commonly

293
00:09:30,000 --> 00:09:32,000
uses ms built for example and now we're

294
00:09:32,000 --> 00:09:33,440
using ms build

295
00:09:33,440 --> 00:09:34,880
in an illegitimate way or just

296
00:09:34,880 --> 00:09:36,800
repurposing it that traffic kind of

297
00:09:36,800 --> 00:09:38,080
blends in together

298
00:09:38,080 --> 00:09:39,839
so defenders have a bit more difficult

299
00:09:39,839 --> 00:09:42,080
of a time to identify what's malicious

300
00:09:42,080 --> 00:09:42,800
versus

301
00:09:42,800 --> 00:09:46,080
not malicious second going off of that

302
00:09:46,080 --> 00:09:48,560
is attribution

303
00:09:48,560 --> 00:09:51,680
if an attacker drops custom malware it's

304
00:09:51,680 --> 00:09:53,040
kind of like there's like a fingerprint

305
00:09:53,040 --> 00:09:54,959
associated with that malware often

306
00:09:54,959 --> 00:09:57,519
and not saying that it's easy to

307
00:09:57,519 --> 00:09:59,279
attribute anything because it's not

308
00:09:59,279 --> 00:10:01,519
but that's a lot different than if an

309
00:10:01,519 --> 00:10:03,200
attacker is repurposing

310
00:10:03,200 --> 00:10:05,440
existing tools that all of us are using

311
00:10:05,440 --> 00:10:06,480
to conduct their

312
00:10:06,480 --> 00:10:08,480
malicious activities it's a lot harder

313
00:10:08,480 --> 00:10:09,600
to attribute

314
00:10:09,600 --> 00:10:12,480
you know those actions to one group

315
00:10:12,480 --> 00:10:14,880
because all of us could use it

316
00:10:14,880 --> 00:10:17,040
third and i love this just on a course

317
00:10:17,040 --> 00:10:18,240
on this recently it's called application

318
00:10:18,240 --> 00:10:18,959
whitelist

319
00:10:18,959 --> 00:10:20,880
so for those of you that don't know like

320
00:10:20,880 --> 00:10:22,959
we could talk about this for hours

321
00:10:22,959 --> 00:10:26,000
um but super brief

322
00:10:26,000 --> 00:10:27,600
application wipe listing is where you

323
00:10:27,600 --> 00:10:30,079
basically uh network or sysadmin

324
00:10:30,079 --> 00:10:32,160
lists out the binaries say like there's

325
00:10:32,160 --> 00:10:33,920
100 binaries let's say that they want to

326
00:10:33,920 --> 00:10:34,959
allow

327
00:10:34,959 --> 00:10:38,000
um to run on a host and if a binary is

328
00:10:38,000 --> 00:10:39,279
not on that list

329
00:10:39,279 --> 00:10:40,800
it won't run it just won't at all it

330
00:10:40,800 --> 00:10:42,720
won't execute and so

331
00:10:42,720 --> 00:10:44,560
if we're in an application whitelisting

332
00:10:44,560 --> 00:10:46,959
environment we could repurpose a tool

333
00:10:46,959 --> 00:10:47,279
like

334
00:10:47,279 --> 00:10:50,560
ms build or wimik or microsoft workflow

335
00:10:50,560 --> 00:10:51,360
compiler

336
00:10:51,360 --> 00:10:54,800
to execute some arbitrary code basically

337
00:10:54,800 --> 00:10:57,440
the same result as a custom executable

338
00:10:57,440 --> 00:10:58,720
that we would have dropped

339
00:10:58,720 --> 00:11:00,480
but instead we can actually repurpose a

340
00:11:00,480 --> 00:11:01,839
microsoft sign binary

341
00:11:01,839 --> 00:11:04,000
to accomplish that in that environment

342
00:11:04,000 --> 00:11:04,880
and last like

343
00:11:04,880 --> 00:11:06,560
just out of laziness like your tool

344
00:11:06,560 --> 00:11:07,519
set's already there you don't have to

345
00:11:07,519 --> 00:11:09,279
bring anything with you so you might as

346
00:11:09,279 --> 00:11:10,160
well

347
00:11:10,160 --> 00:11:11,519
learn to use the tools that are already

348
00:11:11,519 --> 00:11:14,640
at your disposal

349
00:11:14,640 --> 00:11:16,320
and before the last slide before we get

350
00:11:16,320 --> 00:11:17,839
into some more examples the tangible

351
00:11:17,839 --> 00:11:19,680
examples just want to share why i chose

352
00:11:19,680 --> 00:11:20,720
this talk

353
00:11:20,720 --> 00:11:23,600
um first this is a critical skill for

354
00:11:23,600 --> 00:11:24,240
anyone

355
00:11:24,240 --> 00:11:27,279
looking to get into offensive security

356
00:11:27,279 --> 00:11:28,880
especially for internal penetration

357
00:11:28,880 --> 00:11:30,240
tests and red team assessments it's

358
00:11:30,240 --> 00:11:31,839
absolutely critical to know

359
00:11:31,839 --> 00:11:35,200
uh second i started out um

360
00:11:35,200 --> 00:11:37,600
pen testing just on linux machines right

361
00:11:37,600 --> 00:11:38,560
and the oscp

362
00:11:38,560 --> 00:11:40,160
was a good intro to some windows

363
00:11:40,160 --> 00:11:42,399
machines but um

364
00:11:42,399 --> 00:11:43,519
i didn't have that much experience with

365
00:11:43,519 --> 00:11:44,959
windows and i started hearing people

366
00:11:44,959 --> 00:11:46,560
talk about living off the land

367
00:11:46,560 --> 00:11:48,320
and conceptually i understood i don't

368
00:11:48,320 --> 00:11:49,440
think it's that hard to conceptually

369
00:11:49,440 --> 00:11:51,279
understand what living off the land is

370
00:11:51,279 --> 00:11:53,279
it's just the tangible examples i didn't

371
00:11:53,279 --> 00:11:54,639
have that many

372
00:11:54,639 --> 00:11:55,839
and that's what i wanted to share with

373
00:11:55,839 --> 00:11:57,200
you all so that whenever you hear this

374
00:11:57,200 --> 00:11:57,760
term

375
00:11:57,760 --> 00:11:59,839
there's no doubt in your mind what it

376
00:11:59,839 --> 00:12:01,680
means how it can be used

377
00:12:01,680 --> 00:12:03,200
what are a few examples i think that's

378
00:12:03,200 --> 00:12:05,680
really important and last and i bolded

379
00:12:05,680 --> 00:12:06,560
this for a reason because i'm going to

380
00:12:06,560 --> 00:12:07,920
share a little bit of research that i've

381
00:12:07,920 --> 00:12:08,800
done

382
00:12:08,800 --> 00:12:10,480
it really doesn't matter how much you

383
00:12:10,480 --> 00:12:12,560
experience you have in this field

384
00:12:12,560 --> 00:12:14,240
you could actually do original research

385
00:12:14,240 --> 00:12:16,240
tomorrow on this there are so many

386
00:12:16,240 --> 00:12:18,240
microsoft binaries out there

387
00:12:18,240 --> 00:12:21,600
that have unexplored functionality that

388
00:12:21,600 --> 00:12:23,200
as long as you have enough time and

389
00:12:23,200 --> 00:12:25,279
patience to dig into the documentation

390
00:12:25,279 --> 00:12:26,480
on microsoft's

391
00:12:26,480 --> 00:12:29,680
website you can probably find something

392
00:12:29,680 --> 00:12:33,279
some feature some like flag in this

393
00:12:33,279 --> 00:12:35,440
you know the command line that you could

394
00:12:35,440 --> 00:12:38,000
repurpose to achieve something

395
00:12:38,000 --> 00:12:40,560
uh and so bring it up because it's a

396
00:12:40,560 --> 00:12:41,920
good way especially for more junior

397
00:12:41,920 --> 00:12:42,480
folks

398
00:12:42,480 --> 00:12:44,000
to publish some original research things

399
00:12:44,000 --> 00:12:45,839
that you know haven't really been seen

400
00:12:45,839 --> 00:12:47,360
at least publicly before

401
00:12:47,360 --> 00:12:49,200
um and perhaps even give a talk like

402
00:12:49,200 --> 00:12:51,440
it's a great way to to get started

403
00:12:51,440 --> 00:12:54,079
um getting your name out there so with

404
00:12:54,079 --> 00:12:54,880
that

405
00:12:54,880 --> 00:12:56,160
let me share some examples we're going

406
00:12:56,160 --> 00:12:57,920
to talk about ms build first

407
00:12:57,920 --> 00:13:00,800
so i love this one ms build stands for

408
00:13:00,800 --> 00:13:01,680
microsoft

409
00:13:01,680 --> 00:13:04,399
build engine um it's included with

410
00:13:04,399 --> 00:13:05,760
dotnet version 2

411
00:13:05,760 --> 00:13:08,959
and newer it's in that general path to

412
00:13:08,959 --> 00:13:10,959
see windows microsoft and that framework

413
00:13:10,959 --> 00:13:13,600
path and the general idea is it's

414
00:13:13,600 --> 00:13:15,200
building projects you can pass

415
00:13:15,200 --> 00:13:18,880
in a dot proj p r o j or dot

416
00:13:18,880 --> 00:13:22,399
c cs proj project file and it will build

417
00:13:22,399 --> 00:13:23,680
that in fact if you load up

418
00:13:23,680 --> 00:13:26,160
a project in visual studio and you hit

419
00:13:26,160 --> 00:13:27,360
build

420
00:13:27,360 --> 00:13:29,760
it's invoking ms build in the back

421
00:13:29,760 --> 00:13:30,959
that's what's happening so that's what

422
00:13:30,959 --> 00:13:33,279
ms bill does is it builds projects

423
00:13:33,279 --> 00:13:36,800
in addition to passing in a dot c

424
00:13:36,800 --> 00:13:39,040
project file name you could also pass in

425
00:13:39,040 --> 00:13:40,480
an xml

426
00:13:40,480 --> 00:13:42,800
file and what that xml file would be is

427
00:13:42,800 --> 00:13:43,600
schema

428
00:13:43,600 --> 00:13:45,440
to define how the build process should

429
00:13:45,440 --> 00:13:47,360
go and as you can imagine when you're

430
00:13:47,360 --> 00:13:48,079
building

431
00:13:48,079 --> 00:13:50,800
there might be a task that you want to

432
00:13:50,800 --> 00:13:52,639
to conduct so like maybe it's setting up

433
00:13:52,639 --> 00:13:53,519
like

434
00:13:53,519 --> 00:13:54,800
i don't know some data structure or

435
00:13:54,800 --> 00:13:56,240
something something that you need set up

436
00:13:56,240 --> 00:13:57,920
during the build process

437
00:13:57,920 --> 00:14:00,399
but what we're going to do is create an

438
00:14:00,399 --> 00:14:01,199
xml

439
00:14:01,199 --> 00:14:03,760
schema project file for ms build and in

440
00:14:03,760 --> 00:14:05,120
the tasks

441
00:14:05,120 --> 00:14:07,279
section in a task section uh we're going

442
00:14:07,279 --> 00:14:08,399
to insert

443
00:14:08,399 --> 00:14:11,360
some arbitrary code in this case it'll

444
00:14:11,360 --> 00:14:13,120
just be to open up the calculator app

445
00:14:13,120 --> 00:14:13,360
and

446
00:14:13,360 --> 00:14:14,800
in fact all the examples will but it

447
00:14:14,800 --> 00:14:16,560
could be any malicious

448
00:14:16,560 --> 00:14:19,600
c-sharp code that you so

449
00:14:19,600 --> 00:14:22,000
in case that wasn't very clear i want to

450
00:14:22,000 --> 00:14:23,680
show an example because i think that's

451
00:14:23,680 --> 00:14:24,959
the best way to learn

452
00:14:24,959 --> 00:14:26,720
so i'm going to get super concrete here

453
00:14:26,720 --> 00:14:27,920
first thing we're going to do is create

454
00:14:27,920 --> 00:14:29,279
an xml file

455
00:14:29,279 --> 00:14:30,800
this you could find this general

456
00:14:30,800 --> 00:14:33,120
template online very easily

457
00:14:33,120 --> 00:14:36,480
um basically don't there's a lot of like

458
00:14:36,480 --> 00:14:37,839
at the beginning and the bottom like

459
00:14:37,839 --> 00:14:39,040
don't worry about all this stuff i'll

460
00:14:39,040 --> 00:14:40,480
show you exactly what they're focusing

461
00:14:40,480 --> 00:14:41,040
on

462
00:14:41,040 --> 00:14:43,199
it's this in the box this execute

463
00:14:43,199 --> 00:14:44,160
function

464
00:14:44,160 --> 00:14:45,839
that's going to be the key now this is

465
00:14:45,839 --> 00:14:47,519
written in c sharp for those of you that

466
00:14:47,519 --> 00:14:49,040
aren't familiar with c-sharp or the

467
00:14:49,040 --> 00:14:51,680
net framework don't worry if you have

468
00:14:51,680 --> 00:14:52,079
any

469
00:14:52,079 --> 00:14:53,199
programming background it really

470
00:14:53,199 --> 00:14:54,800
shouldn't be difficult to follow along

471
00:14:54,800 --> 00:14:56,079
at least

472
00:14:56,079 --> 00:14:58,079
definitely in this presentation but also

473
00:14:58,079 --> 00:15:00,079
just kind of generally online looking at

474
00:15:00,079 --> 00:15:01,760
kind of templates to get started

475
00:15:01,760 --> 00:15:03,600
shouldn't be that difficult

476
00:15:03,600 --> 00:15:06,480
um but in this case what we're doing is

477
00:15:06,480 --> 00:15:07,600
we're creating this

478
00:15:07,600 --> 00:15:11,040
public function or method called execute

479
00:15:11,040 --> 00:15:13,440
and all we're doing is calling process

480
00:15:13,440 --> 00:15:14,320
dot star

481
00:15:14,320 --> 00:15:16,079
and that's just starting the calculator

482
00:15:16,079 --> 00:15:18,880
application so this is the xml file

483
00:15:18,880 --> 00:15:20,880
the beginning part looks very standard

484
00:15:20,880 --> 00:15:23,199
for an ms build xml file

485
00:15:23,199 --> 00:15:25,600
and then we're creating this task and in

486
00:15:25,600 --> 00:15:26,959
this task

487
00:15:26,959 --> 00:15:28,639
we happen to be including some code that

488
00:15:28,639 --> 00:15:31,680
we want executed

489
00:15:32,800 --> 00:15:34,720
to actually execute that code we're

490
00:15:34,720 --> 00:15:36,160
going to call the ms go binary we're

491
00:15:36,160 --> 00:15:39,120
going to pass in the xml file path

492
00:15:39,120 --> 00:15:42,079
and that's pretty simple two steps one

493
00:15:42,079 --> 00:15:43,839
let's define this

494
00:15:43,839 --> 00:15:47,279
xml file include our code and two we'll

495
00:15:47,279 --> 00:15:48,320
call the binary

496
00:15:48,320 --> 00:15:49,839
so i'm gonna show a quick like five

497
00:15:49,839 --> 00:15:51,519
second example in the back you can see

498
00:15:51,519 --> 00:15:52,800
this

499
00:15:52,800 --> 00:15:55,360
uh xml file the same one you just saw

500
00:15:55,360 --> 00:15:56,880
and then you can see the command line

501
00:15:56,880 --> 00:15:59,759
argument that i'm going to call

502
00:16:03,519 --> 00:16:05,440
so you'll see that the build succeeded

503
00:16:05,440 --> 00:16:06,800
in the back you can see it's green and

504
00:16:06,800 --> 00:16:10,240
then the calculator app opened up

505
00:16:11,199 --> 00:16:12,639
okay so do people actually use this i

506
00:16:12,639 --> 00:16:14,160
feel like i'm always asking that when i

507
00:16:14,160 --> 00:16:15,759
see presentation like this like yeah

508
00:16:15,759 --> 00:16:17,360
like that was so easy like are people

509
00:16:17,360 --> 00:16:18,240
using this

510
00:16:18,240 --> 00:16:20,720
yes like we use it a lot obviously we

511
00:16:20,720 --> 00:16:22,000
use it in a much more complex

512
00:16:22,000 --> 00:16:25,440
way um but that general principle is

513
00:16:25,440 --> 00:16:26,880
used all the time

514
00:16:26,880 --> 00:16:28,399
um like i mentioned you can even embed

515
00:16:28,399 --> 00:16:30,639
it in a macro like this there's a lot of

516
00:16:30,639 --> 00:16:32,160
different ways you could you could use

517
00:16:32,160 --> 00:16:33,519
this

518
00:16:33,519 --> 00:16:36,800
okay next example wimmick

519
00:16:36,800 --> 00:16:39,040
okay so we can pronounce winnick like

520
00:16:39,040 --> 00:16:41,199
i'm saying uh it's located there's two

521
00:16:41,199 --> 00:16:42,800
versions there's a system 32

522
00:16:42,800 --> 00:16:45,040
directory version and then the syslog 64

523
00:16:45,040 --> 00:16:46,800
directory version it stands for the

524
00:16:46,800 --> 00:16:48,800
windows management instrumentation

525
00:16:48,800 --> 00:16:50,560
command line utility

526
00:16:50,560 --> 00:16:53,600
it's a lot to unpack but the basic

527
00:16:53,600 --> 00:16:56,000
general idea is it allows network

528
00:16:56,000 --> 00:16:57,600
administrators to query

529
00:16:57,600 --> 00:17:00,880
a local or remote machine for some type

530
00:17:00,880 --> 00:17:02,320
of information

531
00:17:02,320 --> 00:17:05,439
for example process listing uh

532
00:17:05,439 --> 00:17:08,400
total physical memory what's the os

533
00:17:08,400 --> 00:17:09,119
version

534
00:17:09,119 --> 00:17:10,799
things like that it just lets them query

535
00:17:10,799 --> 00:17:12,880
information and so we're going to misuse

536
00:17:12,880 --> 00:17:13,599
women

537
00:17:13,599 --> 00:17:16,480
as well here's an example of women using

538
00:17:16,480 --> 00:17:18,000
being used in a legitimate fashion

539
00:17:18,000 --> 00:17:21,039
so this is just a process listing pretty

540
00:17:21,039 --> 00:17:23,520
standard

541
00:17:24,160 --> 00:17:26,480
okay so the first variation uh this is

542
00:17:26,480 --> 00:17:28,319
not my favorite but i just wanted to

543
00:17:28,319 --> 00:17:29,760
call it out there because it's an easy

544
00:17:29,760 --> 00:17:32,320
way to get started um when it

545
00:17:32,320 --> 00:17:34,559
basically built in will let you spin up

546
00:17:34,559 --> 00:17:35,679
a new application

547
00:17:35,679 --> 00:17:37,120
pretty quickly or create a new process

548
00:17:37,120 --> 00:17:39,520
rather so we make process call create

549
00:17:39,520 --> 00:17:41,280
and then the name of the application

550
00:17:41,280 --> 00:17:43,520
that gets you started pretty quickly uh

551
00:17:43,520 --> 00:17:45,840
and maybe that's a good place to start

552
00:17:45,840 --> 00:17:47,600
uh but to me that's not super exciting

553
00:17:47,600 --> 00:17:51,120
i'd rather talk about this so

554
00:17:51,120 --> 00:17:53,520
this was in the previous slide about the

555
00:17:53,520 --> 00:17:54,640
process listing

556
00:17:54,640 --> 00:17:57,360
there was this format flag and it says

557
00:17:57,360 --> 00:17:58,000
list

558
00:17:58,000 --> 00:18:01,440
and what that says is we're going to

559
00:18:01,440 --> 00:18:04,320
style the output as a list so that's why

560
00:18:04,320 --> 00:18:05,840
it's nice and orderly if i didn't have

561
00:18:05,840 --> 00:18:06,480
that

562
00:18:06,480 --> 00:18:08,080
it'd be all jumbled up it'd be hard to

563
00:18:08,080 --> 00:18:10,480
read but i said make the output format

564
00:18:10,480 --> 00:18:11,840
in list format

565
00:18:11,840 --> 00:18:13,760
and so that's very helpful for reading

566
00:18:13,760 --> 00:18:14,880
legitimate

567
00:18:14,880 --> 00:18:18,000
commands uh output however

568
00:18:18,000 --> 00:18:20,400
we can misuse that so in addition to the

569
00:18:20,400 --> 00:18:22,000
slash format list

570
00:18:22,000 --> 00:18:25,760
you can also pass in an xsl file um

571
00:18:25,760 --> 00:18:28,000
so i had no idea what an xsl file was

572
00:18:28,000 --> 00:18:29,200
before this

573
00:18:29,200 --> 00:18:32,880
just think of as css is to html right

574
00:18:32,880 --> 00:18:35,200
cascading style sheets cascade cells

575
00:18:35,200 --> 00:18:36,480
styling sheets

576
00:18:36,480 --> 00:18:40,400
is to html xsl is to xml

577
00:18:40,400 --> 00:18:43,440
so xml is the output from wimmick and so

578
00:18:43,440 --> 00:18:47,039
xsl is styling the xml output from linux

579
00:18:47,039 --> 00:18:49,200
so what we can do is create a malicious

580
00:18:49,200 --> 00:18:50,640
xsl file

581
00:18:50,640 --> 00:18:52,880
and it can execute the code embedded in

582
00:18:52,880 --> 00:18:54,960
there very similar to the xml file we

583
00:18:54,960 --> 00:18:56,240
just created

584
00:18:56,240 --> 00:19:00,480
so let me show you a concrete example

585
00:19:00,480 --> 00:19:02,400
don't worry about the the top or the

586
00:19:02,400 --> 00:19:04,799
bottom part of this that's just like the

587
00:19:04,799 --> 00:19:05,520
xsl

588
00:19:05,520 --> 00:19:07,760
preamble like the ending the closing

589
00:19:07,760 --> 00:19:08,559
text

590
00:19:08,559 --> 00:19:10,640
the key is in the center so in this

591
00:19:10,640 --> 00:19:12,240
situation or this uh

592
00:19:12,240 --> 00:19:15,679
in this example we are using jsprint now

593
00:19:15,679 --> 00:19:18,160
jscript and javascript have similar

594
00:19:18,160 --> 00:19:18,880
origins

595
00:19:18,880 --> 00:19:21,280
but they're not the same language i'm

596
00:19:21,280 --> 00:19:22,960
not an expert in it so i will leave it

597
00:19:22,960 --> 00:19:25,039
there but it's not the same thing

598
00:19:25,039 --> 00:19:27,200
uh so just wanted to call that out there

599
00:19:27,200 --> 00:19:29,280
but i'm not an expert so i won't explain

600
00:19:29,280 --> 00:19:29,919
it anymore

601
00:19:29,919 --> 00:19:32,160
but jscript is used quite a bit uh in

602
00:19:32,160 --> 00:19:33,360
our work

603
00:19:33,360 --> 00:19:36,320
um and in this case we're calling out um

604
00:19:36,320 --> 00:19:38,000
the same thing we're just creating a

605
00:19:38,000 --> 00:19:38,960
calculator

606
00:19:38,960 --> 00:19:40,799
application process to we're just

607
00:19:40,799 --> 00:19:42,000
creating a process

608
00:19:42,000 --> 00:19:44,320
and running calculator application in it

609
00:19:44,320 --> 00:19:46,720
uh via an active x object and the w

610
00:19:46,720 --> 00:19:47,840
strip shell

611
00:19:47,840 --> 00:19:50,480
so we're using jscrip to do that so

612
00:19:50,480 --> 00:19:51,360
again

613
00:19:51,360 --> 00:19:52,880
if you're not familiar with jscrip don't

614
00:19:52,880 --> 00:19:54,880
worry uh but this is doing the same

615
00:19:54,880 --> 00:19:55,520
thing as

616
00:19:55,520 --> 00:20:01,120
process dash not start as before

617
00:20:01,919 --> 00:20:04,240
and here all we need to do to execute it

618
00:20:04,240 --> 00:20:06,640
is call a legitimate limit command

619
00:20:06,640 --> 00:20:08,000
i showed you a different command this

620
00:20:08,000 --> 00:20:09,520
time instead of processed yet just to

621
00:20:09,520 --> 00:20:10,960
show you something different

622
00:20:10,960 --> 00:20:13,120
so this is computer system get total

623
00:20:13,120 --> 00:20:14,799
physical memory so it's a legitimate

624
00:20:14,799 --> 00:20:15,679
command

625
00:20:15,679 --> 00:20:17,600
to get the as you can imagine the total

626
00:20:17,600 --> 00:20:20,240
physical memory on the host

627
00:20:20,240 --> 00:20:22,880
and the format is for passing in our

628
00:20:22,880 --> 00:20:24,480
malicious xsl file

629
00:20:24,480 --> 00:20:27,760
that's the key and let me show you a

630
00:20:27,760 --> 00:20:29,919
quick example

631
00:20:29,919 --> 00:20:32,320
so again this is the same exact from the

632
00:20:32,320 --> 00:20:33,679
screenshots it's the same

633
00:20:33,679 --> 00:20:35,919
xsl file in the background and then you

634
00:20:35,919 --> 00:20:38,000
can see the command is the same in

635
00:20:38,000 --> 00:20:41,120
the command prompt and then let's see uh

636
00:20:41,120 --> 00:20:43,918
let's see it happen

637
00:20:46,400 --> 00:20:47,760
so importantly in the background you can

638
00:20:47,760 --> 00:20:49,039
see the command actually ran

639
00:20:49,039 --> 00:20:50,000
successfully

640
00:20:50,000 --> 00:20:51,280
you can't actually see the total

641
00:20:51,280 --> 00:20:52,799
physical memory because the calculator

642
00:20:52,799 --> 00:20:54,000
is blocking it

643
00:20:54,000 --> 00:20:56,559
but it it conducted that query and then

644
00:20:56,559 --> 00:20:58,159
it formatted it

645
00:20:58,159 --> 00:20:59,840
meaning it executed our jscript which

646
00:20:59,840 --> 00:21:02,640
created our calculator function

647
00:21:02,640 --> 00:21:04,320
so once again are people actually using

648
00:21:04,320 --> 00:21:05,760
this yes

649
00:21:05,760 --> 00:21:07,840
and i'll tell you why if you look down

650
00:21:07,840 --> 00:21:10,080
here in jscript that section

651
00:21:10,080 --> 00:21:12,559
there's a lot of ways to take c sharp

652
00:21:12,559 --> 00:21:13,120
code

653
00:21:13,120 --> 00:21:15,520
and turn that into jscript right so we

654
00:21:15,520 --> 00:21:16,880
could start with

655
00:21:16,880 --> 00:21:18,960
c-sharp source code like whatever we

656
00:21:18,960 --> 00:21:20,799
want and we could run it through

657
00:21:20,799 --> 00:21:22,080
document to jscript

658
00:21:22,080 --> 00:21:24,080
gadget to jscript i think shell shell

659
00:21:24,080 --> 00:21:25,440
code to jscript there's a few different

660
00:21:25,440 --> 00:21:27,679
tools out there which will take our

661
00:21:27,679 --> 00:21:31,280
c-sharp code and convert it into jscript

662
00:21:31,280 --> 00:21:35,360
and so that enables us to use wimik to

663
00:21:35,360 --> 00:21:38,400
execute arbitrary c sharp code

664
00:21:38,400 --> 00:21:40,240
okay so i promise those of you that are

665
00:21:40,240 --> 00:21:41,760
a bit more advanced i would share

666
00:21:41,760 --> 00:21:44,080
quickly some original research so this

667
00:21:44,080 --> 00:21:47,439
is another ms build

668
00:21:47,600 --> 00:21:50,880
code execution technique um

669
00:21:50,880 --> 00:21:53,039
this is published on the 49 security

670
00:21:53,039 --> 00:21:55,200
blog just about a month ago

671
00:21:55,200 --> 00:21:58,400
and let me quickly show you so we had

672
00:21:58,400 --> 00:21:59,840
this xml file before

673
00:21:59,840 --> 00:22:02,240
if you remember and i highlighted this

674
00:22:02,240 --> 00:22:03,919
execute function where we're calling the

675
00:22:03,919 --> 00:22:06,000
calculators

676
00:22:06,000 --> 00:22:09,120
application to start well

677
00:22:09,120 --> 00:22:10,720
also in this file there was this thing

678
00:22:10,720 --> 00:22:12,799
called using task there's this tag right

679
00:22:12,799 --> 00:22:14,640
using task defining a task

680
00:22:14,640 --> 00:22:18,080
to run that happens to be executing our

681
00:22:18,080 --> 00:22:20,320
code and starting the calculator app

682
00:22:20,320 --> 00:22:23,039
um and we were on assessment in december

683
00:22:23,039 --> 00:22:23,840
and

684
00:22:23,840 --> 00:22:25,919
they caught us when we were trying to

685
00:22:25,919 --> 00:22:27,440
run this this this

686
00:22:27,440 --> 00:22:31,120
bypass and my guess is something was

687
00:22:31,120 --> 00:22:33,360
signatured based on this using task

688
00:22:33,360 --> 00:22:36,159
or task being in the xml file could be

689
00:22:36,159 --> 00:22:36,640
wrong

690
00:22:36,640 --> 00:22:37,919
but i was like you know what i want to

691
00:22:37,919 --> 00:22:39,840
find a way that i can do the same thing

692
00:22:39,840 --> 00:22:42,159
but not have to define an inline task

693
00:22:42,159 --> 00:22:44,000
which is what we're doing here

694
00:22:44,000 --> 00:22:46,720
so i did a bit of research on ms build

695
00:22:46,720 --> 00:22:48,080
on microsoft site

696
00:22:48,080 --> 00:22:50,240
and i came across this other task called

697
00:22:50,240 --> 00:22:51,840
unregister assembly

698
00:22:51,840 --> 00:22:53,200
and as you can read it says it

699
00:22:53,200 --> 00:22:55,679
unregisters these specified assemblies

700
00:22:55,679 --> 00:22:57,760
for com interop purposes

701
00:22:57,760 --> 00:23:00,080
too much to unpack in like a couple

702
00:23:00,080 --> 00:23:01,120
minutes but

703
00:23:01,120 --> 00:23:04,320
suffice to say if we define a function

704
00:23:04,320 --> 00:23:07,520
that is com visible and it unregisters

705
00:23:07,520 --> 00:23:10,720
this com object then it maybe

706
00:23:10,720 --> 00:23:13,679
it does it will execute the code inside

707
00:23:13,679 --> 00:23:15,200
the unregistered function

708
00:23:15,200 --> 00:23:16,799
that was my hypothesis it turned out to

709
00:23:16,799 --> 00:23:18,400
be true um

710
00:23:18,400 --> 00:23:19,600
and so that's that's kind of the

711
00:23:19,600 --> 00:23:22,080
research that we're doing so also on

712
00:23:22,080 --> 00:23:22,559
that

713
00:23:22,559 --> 00:23:25,200
same webpage about um unregister

714
00:23:25,200 --> 00:23:26,240
assembly

715
00:23:26,240 --> 00:23:28,559
it gave us some sample xml so this is

716
00:23:28,559 --> 00:23:30,480
just like the xml file i showed you

717
00:23:30,480 --> 00:23:31,360
before

718
00:23:31,360 --> 00:23:33,440
and this is straight from microsoft site

719
00:23:33,440 --> 00:23:34,840
and there's no task

720
00:23:34,840 --> 00:23:37,679
anywhere technically unregister assembly

721
00:23:37,679 --> 00:23:38,799
is still a task

722
00:23:38,799 --> 00:23:40,640
but we're not defining an inline task

723
00:23:40,640 --> 00:23:42,159
this looks totally different

724
00:23:42,159 --> 00:23:45,120
than the previous method and so let me

725
00:23:45,120 --> 00:23:46,799
walk you through how this actually work

726
00:23:46,799 --> 00:23:48,240
would work so first we want to create

727
00:23:48,240 --> 00:23:50,480
some c-sharp code

728
00:23:50,480 --> 00:23:52,400
again we're not doing anything that fun

729
00:23:52,400 --> 00:23:53,760
we're just opening the calculator

730
00:23:53,760 --> 00:23:54,640
application

731
00:23:54,640 --> 00:23:57,440
but the key here is we're defining

732
00:23:57,440 --> 00:23:59,360
unlike before when it's in this execute

733
00:23:59,360 --> 00:24:00,159
function

734
00:24:00,159 --> 00:24:02,799
we're defining our malicious code in

735
00:24:02,799 --> 00:24:03,440
this

736
00:24:03,440 --> 00:24:06,000
comm unregister function uh in this

737
00:24:06,000 --> 00:24:07,600
public unregister

738
00:24:07,600 --> 00:24:10,720
yeah function so after we define that

739
00:24:10,720 --> 00:24:12,799
or save that source code we're going to

740
00:24:12,799 --> 00:24:14,720
compile it into a.net assembly in this

741
00:24:14,720 --> 00:24:16,240
case a library

742
00:24:16,240 --> 00:24:18,799
to a dll file that would be the command

743
00:24:18,799 --> 00:24:21,200
to do it

744
00:24:21,360 --> 00:24:23,600
then we're going to adjust our xml file

745
00:24:23,600 --> 00:24:25,279
i l literally

746
00:24:25,279 --> 00:24:28,000
copied that from microsoft's website all

747
00:24:28,000 --> 00:24:28,880
we're going to do is

748
00:24:28,880 --> 00:24:31,200
change the output path and file name to

749
00:24:31,200 --> 00:24:33,039
go right to our dll file

750
00:24:33,039 --> 00:24:35,200
nothing else has to change and then just

751
00:24:35,200 --> 00:24:37,760
like before we invoked ms gobinary

752
00:24:37,760 --> 00:24:40,960
and provided the xml file path

753
00:24:40,960 --> 00:24:42,880
and here is a quick example just to

754
00:24:42,880 --> 00:24:44,240
orient you on what's going on in the

755
00:24:44,240 --> 00:24:45,120
screen

756
00:24:45,120 --> 00:24:48,159
middle left is the c sharp source code

757
00:24:48,159 --> 00:24:49,600
same thing as before we're going to

758
00:24:49,600 --> 00:24:52,000
first compile that using csc

759
00:24:52,000 --> 00:24:54,480
and in the background is the xml file

760
00:24:54,480 --> 00:24:55,840
that already references

761
00:24:55,840 --> 00:24:58,480
a the dll that we are going to compile

762
00:24:58,480 --> 00:25:01,840
so i will run that real quick

763
00:25:06,000 --> 00:25:08,159
so that file's been compiled we

764
00:25:08,159 --> 00:25:10,080
directory list we can see that dll is

765
00:25:10,080 --> 00:25:11,919
there now

766
00:25:11,919 --> 00:25:13,840
and since that dll is already referenced

767
00:25:13,840 --> 00:25:15,679
in the xml file and we call ms build

768
00:25:15,679 --> 00:25:16,720
against it

769
00:25:16,720 --> 00:25:18,720
succeeds and the calculator application

770
00:25:18,720 --> 00:25:20,480
opens so

771
00:25:20,480 --> 00:25:22,240
that's some new research new in that we

772
00:25:22,240 --> 00:25:23,679
haven't found any public

773
00:25:23,679 --> 00:25:27,600
um blogs or anything about it i imagine

774
00:25:27,600 --> 00:25:29,279
some advanced threat actor has used it

775
00:25:29,279 --> 00:25:30,640
before but it's not something that i've

776
00:25:30,640 --> 00:25:31,760
seen

777
00:25:31,760 --> 00:25:34,960
and so that's just an example of i dug

778
00:25:34,960 --> 00:25:36,880
into this ms build binary

779
00:25:36,880 --> 00:25:38,720
a little extra looked through some

780
00:25:38,720 --> 00:25:40,480
documentation and found something

781
00:25:40,480 --> 00:25:42,799
something new um and so i encourage all

782
00:25:42,799 --> 00:25:43,919
of you to

783
00:25:43,919 --> 00:25:46,080
to do that as well and there's just so

784
00:25:46,080 --> 00:25:47,919
many binaries that you could do this

785
00:25:47,919 --> 00:25:48,640
with

786
00:25:48,640 --> 00:25:50,400
in terms of resources like i mentioned

787
00:25:50,400 --> 00:25:51,760
that lobos project

788
00:25:51,760 --> 00:25:53,840
i would say is number one derby con 3

789
00:25:53,840 --> 00:25:57,039
living off the land is kind of like the

790
00:25:57,039 --> 00:25:59,039
seminal talk i guess i it's like one of

791
00:25:59,039 --> 00:26:01,279
the first talks of the modern era about

792
00:26:01,279 --> 00:26:01,919
this

793
00:26:01,919 --> 00:26:03,440
uh if you're going to follow two people

794
00:26:03,440 --> 00:26:04,799
on twitter related this stuff i would

795
00:26:04,799 --> 00:26:06,559
recommend casey smith at subtee and matt

796
00:26:06,559 --> 00:26:07,360
braber

797
00:26:07,360 --> 00:26:09,039
at manifestation and if you're

798
00:26:09,039 --> 00:26:11,039
interested in reading our research on

799
00:26:11,039 --> 00:26:14,559
that new ms build bypass on its blog

800
00:26:14,559 --> 00:26:19,120
on our website okay enough tech stuff

801
00:26:19,120 --> 00:26:21,279
bubble tea all right so just like before

802
00:26:21,279 --> 00:26:22,720
a little background on myself or lady

803
00:26:22,720 --> 00:26:24,000
the bubble tea

804
00:26:24,000 --> 00:26:25,440
i've been consuming bubble tea since

805
00:26:25,440 --> 00:26:28,480
2005 i'm approaching a thousand lifetime

806
00:26:28,480 --> 00:26:30,240
bubble teas consumed which is quite a

807
00:26:30,240 --> 00:26:31,440
milestone

808
00:26:31,440 --> 00:26:33,440
uh and there's a map that i put together

809
00:26:33,440 --> 00:26:35,200
all the different cities where i have

810
00:26:35,200 --> 00:26:36,400
consumed

811
00:26:36,400 --> 00:26:38,400
bubble tea so obviously heavy in the u.s

812
00:26:38,400 --> 00:26:40,320
where i'm from but also in europe uh

813
00:26:40,320 --> 00:26:41,600
throughout asia

814
00:26:41,600 --> 00:26:44,080
um haven't traveled uh very much to

815
00:26:44,080 --> 00:26:45,360
other parts of the world otherwise you

816
00:26:45,360 --> 00:26:45,760
would

817
00:26:45,760 --> 00:26:49,679
you would see uh dots there as well

818
00:26:49,679 --> 00:26:50,960
okay so bubble tea if you don't know

819
00:26:50,960 --> 00:26:53,279
what bubble tea is let me explain it

820
00:26:53,279 --> 00:26:54,320
because i feel like

821
00:26:54,320 --> 00:26:55,600
folks that don't know what it is they

822
00:26:55,600 --> 00:26:57,039
hear it and they just kind of like write

823
00:26:57,039 --> 00:26:58,400
it off because it's like what is that

824
00:26:58,400 --> 00:26:59,679
that's so confusing like what do you

825
00:26:59,679 --> 00:27:00,400
mean bubble

826
00:27:00,400 --> 00:27:02,799
what what bubbles so first off bubble

827
00:27:02,799 --> 00:27:04,159
tea is literally tea

828
00:27:04,159 --> 00:27:07,200
like iced tea often or hot tea with milk

829
00:27:07,200 --> 00:27:08,159
maybe

830
00:27:08,159 --> 00:27:12,400
or some fruit flavor maybe or just plain

831
00:27:12,400 --> 00:27:14,320
that's the tea and then you add a

832
00:27:14,320 --> 00:27:15,600
topping

833
00:27:15,600 --> 00:27:17,679
which honestly is a misnomer because

834
00:27:17,679 --> 00:27:19,440
it's not really a topping if it sinks to

835
00:27:19,440 --> 00:27:20,159
the bottom

836
00:27:20,159 --> 00:27:22,399
which always happens in fact these

837
00:27:22,399 --> 00:27:24,000
photos are extremely misleading because

838
00:27:24,000 --> 00:27:24,640
like

839
00:27:24,640 --> 00:27:26,159
i don't know whenever they put bubbles

840
00:27:26,159 --> 00:27:27,600
in my drinks they always fall to the

841
00:27:27,600 --> 00:27:28,080
bottom

842
00:27:28,080 --> 00:27:31,200
but anyway so a topping could be bubbles

843
00:27:31,200 --> 00:27:34,000
uh could be jelly red beans basil seeds

844
00:27:34,000 --> 00:27:35,279
like there's a lot of different things

845
00:27:35,279 --> 00:27:37,919
that it could be

846
00:27:38,399 --> 00:27:40,480
so what are the bubbles so traditional

847
00:27:40,480 --> 00:27:41,600
the traditional topping

848
00:27:41,600 --> 00:27:45,279
is boba or bubbles or tapioca pearls

849
00:27:45,279 --> 00:27:47,279
so what these are are small black

850
00:27:47,279 --> 00:27:49,360
spheres made of tapioca

851
00:27:49,360 --> 00:27:52,480
starch now what is tapioca starch that

852
00:27:52,480 --> 00:27:54,640
comes from the cassava root

853
00:27:54,640 --> 00:27:57,679
what is cassava cassava is a shrub from

854
00:27:57,679 --> 00:27:59,360
south america but it's also known as

855
00:27:59,360 --> 00:28:00,640
yucca you might have

856
00:28:00,640 --> 00:28:03,600
had it before yuca fries or boiled yuka

857
00:28:03,600 --> 00:28:05,440
is a common side dish

858
00:28:05,440 --> 00:28:07,760
highly recommend trying that also as

859
00:28:07,760 --> 00:28:08,640
another side note

860
00:28:08,640 --> 00:28:10,399
highly recommend trying tapioca pudding

861
00:28:10,399 --> 00:28:11,760
if your grandma never made it for you

862
00:28:11,760 --> 00:28:12,880
because it's incredible

863
00:28:12,880 --> 00:28:14,640
cozy shack there's no justice to my

864
00:28:14,640 --> 00:28:16,159
grandma's tapioca pudding

865
00:28:16,159 --> 00:28:19,440
but feel free to start there and

866
00:28:19,440 --> 00:28:20,960
what we're doing is we're taking this

867
00:28:20,960 --> 00:28:23,520
tapioca starch from the kosova

868
00:28:23,520 --> 00:28:26,240
shrub and we're combining it with water

869
00:28:26,240 --> 00:28:27,360
and food coloring

870
00:28:27,360 --> 00:28:29,520
and sugar and then we're rolling it and

871
00:28:29,520 --> 00:28:32,000
molding it into these like little sheeps

872
00:28:32,000 --> 00:28:34,480
and those are called tapioca pearls or

873
00:28:34,480 --> 00:28:35,440
boba

874
00:28:35,440 --> 00:28:38,000
and then they're hard like they're um

875
00:28:38,000 --> 00:28:39,120
like they're raw

876
00:28:39,120 --> 00:28:40,480
and then what we'll do to cook them is

877
00:28:40,480 --> 00:28:42,320
we'll cook kind of like rice like we'll

878
00:28:42,320 --> 00:28:44,159
boil some water

879
00:28:44,159 --> 00:28:45,679
throw them in there let it boil a little

880
00:28:45,679 --> 00:28:48,240
bit let it simmer for maybe 15 minutes

881
00:28:48,240 --> 00:28:49,919
and then let it sit in some sugar for

882
00:28:49,919 --> 00:28:51,279
another 15 minutes

883
00:28:51,279 --> 00:28:54,480
and then then you're good to go um

884
00:28:54,480 --> 00:28:56,960
a quick side note here so boba is a term

885
00:28:56,960 --> 00:28:58,159
that i mentioned so

886
00:28:58,159 --> 00:29:01,360
boba could refer to both uh

887
00:29:01,360 --> 00:29:04,399
the tapioca pearls like the bubbles or

888
00:29:04,399 --> 00:29:06,159
it could refer to the entire drink so

889
00:29:06,159 --> 00:29:07,200
like the cup

890
00:29:07,200 --> 00:29:10,399
the tea the ice the toppings

891
00:29:10,399 --> 00:29:12,320
the straw like that whole thing could be

892
00:29:12,320 --> 00:29:13,840
called boba too it really depends i

893
00:29:13,840 --> 00:29:15,360
think on where you're from

894
00:29:15,360 --> 00:29:18,559
so just to clarify in addition to

895
00:29:18,559 --> 00:29:20,799
boba or bubbles there's a lot of other

896
00:29:20,799 --> 00:29:22,799
toppings like there's aloe vera

897
00:29:22,799 --> 00:29:25,279
there's grass jelly there's basil seeds

898
00:29:25,279 --> 00:29:26,960
red beans which i think are really weird

899
00:29:26,960 --> 00:29:28,240
but apparently they're good there's

900
00:29:28,240 --> 00:29:28,799
pudding

901
00:29:28,799 --> 00:29:31,200
you could put flan in there yogurt like

902
00:29:31,200 --> 00:29:32,799
it's all types of crazy you can do

903
00:29:32,799 --> 00:29:34,240
anything that you want in there

904
00:29:34,240 --> 00:29:36,080
and it might sound really random all

905
00:29:36,080 --> 00:29:39,120
these topics but they're not

906
00:29:39,120 --> 00:29:42,159
q q you're like what

907
00:29:42,159 --> 00:29:45,279
q q like the letter q the letter q

908
00:29:45,279 --> 00:29:48,880
it's a taiwanese word that stands for

909
00:29:48,880 --> 00:29:51,840
chewy or bouncy springy basically

910
00:29:51,840 --> 00:29:53,360
anything that like

911
00:29:53,360 --> 00:29:55,600
it's soft but gives some resistance as

912
00:29:55,600 --> 00:29:56,640
you're biting into it

913
00:29:56,640 --> 00:29:59,760
that texture is called qq

914
00:29:59,760 --> 00:30:02,720
and so that term originated in taiwan uh

915
00:30:02,720 --> 00:30:03,440
it's that

916
00:30:03,440 --> 00:30:06,559
chewy texture and i found two quotes in

917
00:30:06,559 --> 00:30:07,760
a new york times article that i thought

918
00:30:07,760 --> 00:30:08,240
were

919
00:30:08,240 --> 00:30:10,240
helpful in explaining what this is so

920
00:30:10,240 --> 00:30:12,159
cute texture is to taiwanese

921
00:30:12,159 --> 00:30:14,320
what umami is a japanese and albente is

922
00:30:14,320 --> 00:30:15,200
to italians

923
00:30:15,200 --> 00:30:18,559
like it's just critical to the culinary

924
00:30:18,559 --> 00:30:22,480
arts in taiwan and also uh a mr liu i'm

925
00:30:22,480 --> 00:30:24,399
honestly not sure who mr wu is

926
00:30:24,399 --> 00:30:25,679
to be fair but it's in the article but

927
00:30:25,679 --> 00:30:27,840
he says you can tell if bubble milk tea

928
00:30:27,840 --> 00:30:29,919
is good based on how cute the tapioca

929
00:30:29,919 --> 00:30:32,080
pearls are like that's critical right

930
00:30:32,080 --> 00:30:33,919
that's how they describe the texture and

931
00:30:33,919 --> 00:30:34,720
it's very

932
00:30:34,720 --> 00:30:36,480
very act like you would soft and bite

933
00:30:36,480 --> 00:30:38,080
into but there's resistance

934
00:30:38,080 --> 00:30:41,760
that's qq a little more history

935
00:30:41,760 --> 00:30:44,880
um the exact origin of bubble tea is a

936
00:30:44,880 --> 00:30:46,000
little disputed

937
00:30:46,000 --> 00:30:48,080
primarily probably because folks want to

938
00:30:48,080 --> 00:30:49,520
take credit for it and there's

939
00:30:49,520 --> 00:30:52,240
conflicting stories but generally folks

940
00:30:52,240 --> 00:30:54,080
will agree that it came from a taiwanese

941
00:30:54,080 --> 00:30:56,240
tea house in the mid-1980s

942
00:30:56,240 --> 00:30:57,760
tea houses have been in taiwan for a

943
00:30:57,760 --> 00:31:00,000
long time milk tea had been consumed in

944
00:31:00,000 --> 00:31:01,279
taiwan as well

945
00:31:01,279 --> 00:31:03,279
and the basic story goes that one day

946
00:31:03,279 --> 00:31:05,360
somebody had this tapioca

947
00:31:05,360 --> 00:31:07,840
dessert and they poured it into their

948
00:31:07,840 --> 00:31:08,559
tea

949
00:31:08,559 --> 00:31:11,279
and they're like wow this is incredibles

950
00:31:11,279 --> 00:31:12,720
uh and that's where we have bubble tea

951
00:31:12,720 --> 00:31:13,840
today

952
00:31:13,840 --> 00:31:15,360
it's spread throughout asia europe

953
00:31:15,360 --> 00:31:17,440
globally i would say in the u.s

954
00:31:17,440 --> 00:31:18,799
california i would say probably the

955
00:31:18,799 --> 00:31:20,559
capital um

956
00:31:20,559 --> 00:31:22,320
had some really good bubble tea in

957
00:31:22,320 --> 00:31:23,760
california but they are

958
00:31:23,760 --> 00:31:25,679
they are everywhere bubble tea shops are

959
00:31:25,679 --> 00:31:27,679
everywhere here are a few logos of

960
00:31:27,679 --> 00:31:29,679
various bubble tea

961
00:31:29,679 --> 00:31:32,480
uh tea shops so like i've been to all of

962
00:31:32,480 --> 00:31:34,399
these except fat straws fat straws had a

963
00:31:34,399 --> 00:31:35,440
cool logo and a cool

964
00:31:35,440 --> 00:31:36,640
concept and i was doing this research

965
00:31:36,640 --> 00:31:38,480
that based out of portland i believe

966
00:31:38,480 --> 00:31:40,880
um but all these other brands are solid

967
00:31:40,880 --> 00:31:42,159
places to go and i would bet

968
00:31:42,159 --> 00:31:44,840
most of you have at least in the united

969
00:31:44,840 --> 00:31:46,960
states

970
00:31:46,960 --> 00:31:48,399
yeah at least in the us most of you

971
00:31:48,399 --> 00:31:50,000
probably have one of these within an

972
00:31:50,000 --> 00:31:52,720
hour drive or less

973
00:31:52,720 --> 00:31:54,720
so deciphering the menu is a little

974
00:31:54,720 --> 00:31:56,159
difficult so i wanted to share a little

975
00:31:56,159 --> 00:31:56,960
bit about how

976
00:31:56,960 --> 00:32:01,039
i approach it uh and this is from uh

977
00:32:01,039 --> 00:32:03,120
a shop called cert called served which i

978
00:32:03,120 --> 00:32:04,960
believe is in texas

979
00:32:04,960 --> 00:32:06,480
um the key first is you want to figure

980
00:32:06,480 --> 00:32:07,760
out what type of drink are you

981
00:32:07,760 --> 00:32:08,799
interested in

982
00:32:08,799 --> 00:32:11,519
just regular tea is it milk tea maybe

983
00:32:11,519 --> 00:32:12,399
you want coffee

984
00:32:12,399 --> 00:32:14,720
uh or a smoothie like all of these are

985
00:32:14,720 --> 00:32:15,519
on the table

986
00:32:15,519 --> 00:32:17,039
so you choose your base and then you

987
00:32:17,039 --> 00:32:18,720
choose your flavor so if you're just

988
00:32:18,720 --> 00:32:19,760
having plain tea

989
00:32:19,760 --> 00:32:21,279
typically you could add in a fruity

990
00:32:21,279 --> 00:32:23,679
flavor like lychee or pineapple

991
00:32:23,679 --> 00:32:25,120
if you're having milk tea it's more

992
00:32:25,120 --> 00:32:26,880
common to do like chai milk tea or

993
00:32:26,880 --> 00:32:28,559
matcha milk tea or coconut milk tea or

994
00:32:28,559 --> 00:32:29,760
taro milk tea

995
00:32:29,760 --> 00:32:31,840
if you're doing coffee like typical

996
00:32:31,840 --> 00:32:34,720
coffee flavors hazelnut caramel etc

997
00:32:34,720 --> 00:32:36,880
once you decide your base in your flavor

998
00:32:36,880 --> 00:32:38,480
you go to the toppings

999
00:32:38,480 --> 00:32:40,559
so this store happens to have a lot of

1000
00:32:40,559 --> 00:32:42,480
extra toppings they have protein

1001
00:32:42,480 --> 00:32:45,840
they have chia seeds wheat grass flan

1002
00:32:45,840 --> 00:32:47,039
they're putting in here

1003
00:32:47,039 --> 00:32:48,559
for some reason like there's a lot of

1004
00:32:48,559 --> 00:32:50,080
different options

1005
00:32:50,080 --> 00:32:53,679
there another example kung fu tea

1006
00:32:53,679 --> 00:32:56,640
so similar menu style a little less

1007
00:32:56,640 --> 00:32:58,480
clear but it's the basic same principle

1008
00:32:58,480 --> 00:32:59,840
if you look through the bottom half on

1009
00:32:59,840 --> 00:33:00,320
the white

1010
00:33:00,320 --> 00:33:03,200
background area classics on the left

1011
00:33:03,200 --> 00:33:04,080
side

1012
00:33:04,080 --> 00:33:06,000
that's basically your plain tea or maybe

1013
00:33:06,000 --> 00:33:08,960
tea with honey below it's your milk tea

1014
00:33:08,960 --> 00:33:11,279
on the right you've got your plain tea

1015
00:33:11,279 --> 00:33:13,600
plus some fruit flavor that's the punch

1016
00:33:13,600 --> 00:33:15,360
section and then below are slushies so

1017
00:33:15,360 --> 00:33:17,120
that's kind of more like a

1018
00:33:17,120 --> 00:33:19,440
smoothie i guess and then up top you can

1019
00:33:19,440 --> 00:33:20,480
choose your toppings

1020
00:33:20,480 --> 00:33:22,840
similar toppings like we talked about

1021
00:33:22,840 --> 00:33:24,399
before

1022
00:33:24,399 --> 00:33:26,720
and then last the boba guys um this is

1023
00:33:26,720 --> 00:33:29,120
only a small portion of their menu but

1024
00:33:29,120 --> 00:33:30,960
basically you would at up to this point

1025
00:33:30,960 --> 00:33:32,960
you would have chosen your base and your

1026
00:33:32,960 --> 00:33:33,760
flavor

1027
00:33:33,760 --> 00:33:35,360
and now you choose your chopping i

1028
00:33:35,360 --> 00:33:37,200
brought this one in here because milk

1029
00:33:37,200 --> 00:33:39,840
um that's important to some people

1030
00:33:39,840 --> 00:33:41,360
people of different tolerances to dairy

1031
00:33:41,360 --> 00:33:42,000
milk so

1032
00:33:42,000 --> 00:33:43,679
just a few different places have

1033
00:33:43,679 --> 00:33:44,960
different options like the boba guys

1034
00:33:44,960 --> 00:33:46,799
will do oat milk or almond milk or just

1035
00:33:46,799 --> 00:33:48,880
cow's milk and then you can specify the

1036
00:33:48,880 --> 00:33:51,519
sweetness level

1037
00:33:51,600 --> 00:33:53,519
so what are you gonna order this is the

1038
00:33:53,519 --> 00:33:54,640
top 10 from

1039
00:33:54,640 --> 00:33:57,919
kung fu which is one of my favorites um

1040
00:33:57,919 --> 00:34:00,080
all of these look good to me except the

1041
00:34:00,080 --> 00:34:01,120
um

1042
00:34:01,120 --> 00:34:02,240
winter melon one i don't think that

1043
00:34:02,240 --> 00:34:03,519
one's for me but all the rest look

1044
00:34:03,519 --> 00:34:04,480
pretty good

1045
00:34:04,480 --> 00:34:06,240
uh but my two favorites are the bottom

1046
00:34:06,240 --> 00:34:07,760
right too honey green tea and

1047
00:34:07,760 --> 00:34:10,719
taro milk tea taro slush so if i had to

1048
00:34:10,719 --> 00:34:12,320
give you guys two recommendations to

1049
00:34:12,320 --> 00:34:13,599
start i would say

1050
00:34:13,599 --> 00:34:15,839
give taro milk tea a try if you don't

1051
00:34:15,839 --> 00:34:17,599
know what taro is it's a root vegetable

1052
00:34:17,599 --> 00:34:18,719
that forms

1053
00:34:18,719 --> 00:34:20,960
um it's like it's it ends up being

1054
00:34:20,960 --> 00:34:21,918
purple

1055
00:34:21,918 --> 00:34:23,760
it's like slightly sweet a little bit of

1056
00:34:23,760 --> 00:34:25,280
a nutty flavor kind of like

1057
00:34:25,280 --> 00:34:27,918
kind of vanilla ish and it forms the

1058
00:34:27,918 --> 00:34:30,000
base of a lot of asian desserts

1059
00:34:30,000 --> 00:34:31,679
and in the taro milk tea you would

1060
00:34:31,679 --> 00:34:34,000
typically find some type of milk

1061
00:34:34,000 --> 00:34:37,199
ice tea um

1062
00:34:37,199 --> 00:34:38,879
taro flavoring it could be powder it

1063
00:34:38,879 --> 00:34:40,960
could be a syrup maybe it could be

1064
00:34:40,960 --> 00:34:44,480
actual taro depends on realistically it

1065
00:34:44,480 --> 00:34:46,159
depends on how expensive the drink is if

1066
00:34:46,159 --> 00:34:47,760
it's like three dollars it's probably

1067
00:34:47,760 --> 00:34:48,000
just

1068
00:34:48,000 --> 00:34:50,079
powdered flavoring and if it's like

1069
00:34:50,079 --> 00:34:51,440
seven dollars and it's probably the

1070
00:34:51,440 --> 00:34:53,520
actual taro root potentially

1071
00:34:53,520 --> 00:34:56,079
and then you put bubbles in that uh my

1072
00:34:56,079 --> 00:34:57,760
second recommendation and this is my

1073
00:34:57,760 --> 00:34:58,640
go-to

1074
00:34:58,640 --> 00:35:00,400
my favorite and i just say this is

1075
00:35:00,400 --> 00:35:01,839
probably a place to start if you like

1076
00:35:01,839 --> 00:35:03,040
iced tea

1077
00:35:03,040 --> 00:35:06,160
is get green tea honey black tea so

1078
00:35:06,160 --> 00:35:07,920
that's just plain green or plain black

1079
00:35:07,920 --> 00:35:10,160
tea with honey added to it some ice

1080
00:35:10,160 --> 00:35:12,079
and then you can add a topping to it so

1081
00:35:12,079 --> 00:35:14,000
the bubbles the tapioca is great

1082
00:35:14,000 --> 00:35:16,079
i like aloe vera lychee jelly is good

1083
00:35:16,079 --> 00:35:17,520
you could really experiment with that

1084
00:35:17,520 --> 00:35:18,880
one but it's a pretty like neutral

1085
00:35:18,880 --> 00:35:19,440
flavor

1086
00:35:19,440 --> 00:35:22,400
to then add toppings to um in terms of

1087
00:35:22,400 --> 00:35:24,800
tips for ordering

1088
00:35:24,800 --> 00:35:27,040
first and foremost i would say be

1089
00:35:27,040 --> 00:35:28,480
mindful of the sugar level

1090
00:35:28,480 --> 00:35:30,640
when i introduce folks to bubble tea for

1091
00:35:30,640 --> 00:35:31,520
the first time

1092
00:35:31,520 --> 00:35:33,119
i always forget to tell them about the

1093
00:35:33,119 --> 00:35:35,359
sugar level if a store allows you to

1094
00:35:35,359 --> 00:35:36,880
tell you tell them how much sugar to put

1095
00:35:36,880 --> 00:35:38,400
in i usually opt for like

1096
00:35:38,400 --> 00:35:41,920
0 to 10 or 20 percent um if you go with

1097
00:35:41,920 --> 00:35:43,200
the regular amount of sugar sometimes

1098
00:35:43,200 --> 00:35:44,880
they dump in like a quarter half cup of

1099
00:35:44,880 --> 00:35:46,480
sugar it's like insane it's like really

1100
00:35:46,480 --> 00:35:47,040
sweet

1101
00:35:47,040 --> 00:35:49,359
if you like that by all means go for it

1102
00:35:49,359 --> 00:35:50,880
just fair warning

1103
00:35:50,880 --> 00:35:52,480
uh you can also choose between hot and

1104
00:35:52,480 --> 00:35:54,320
cold i think cold's better

1105
00:35:54,320 --> 00:35:56,800
generally but you could do either

1106
00:35:56,800 --> 00:35:57,839
there's a whole bunch of different

1107
00:35:57,839 --> 00:35:59,599
toppings start with the bubbles but try

1108
00:35:59,599 --> 00:36:00,960
something else too

1109
00:36:00,960 --> 00:36:02,640
and like i mentioned before like if if

1110
00:36:02,640 --> 00:36:04,320
dairy is a concern just check what milk

1111
00:36:04,320 --> 00:36:05,680
they use a lot of places will use

1112
00:36:05,680 --> 00:36:07,280
powdered non-dairy creamer which might

1113
00:36:07,280 --> 00:36:08,320
be fine

1114
00:36:08,320 --> 00:36:10,560
um and some of the higher-end tea shops

1115
00:36:10,560 --> 00:36:11,599
will use like

1116
00:36:11,599 --> 00:36:15,440
milk in like cow's milk or soy milk or

1117
00:36:15,440 --> 00:36:18,079
whatever milk um just you can just ask i

1118
00:36:18,079 --> 00:36:19,359
would recommend

1119
00:36:19,359 --> 00:36:21,200
um and then the straws don't forget the

1120
00:36:21,200 --> 00:36:22,960
straws so these straws are a lot

1121
00:36:22,960 --> 00:36:25,359
it's kind of hard to tell this is a

1122
00:36:25,359 --> 00:36:26,800
zoomed in picture but like

1123
00:36:26,800 --> 00:36:28,800
they're pretty thick and obviously it's

1124
00:36:28,800 --> 00:36:30,400
to soak up the or this

1125
00:36:30,400 --> 00:36:32,720
scoop up the tops so make sure you grab

1126
00:36:32,720 --> 00:36:34,240
a straw because you can't use like any

1127
00:36:34,240 --> 00:36:34,800
normal

1128
00:36:34,800 --> 00:36:38,720
straw with this experience um and then

1129
00:36:38,720 --> 00:36:40,880
my main tip for drinking once you get

1130
00:36:40,880 --> 00:36:42,079
the bubble tea

1131
00:36:42,079 --> 00:36:43,440
and i wish i had one here it's hard to

1132
00:36:43,440 --> 00:36:45,359
get one right now but um

1133
00:36:45,359 --> 00:36:47,520
the way they do it is they like they'll

1134
00:36:47,520 --> 00:36:49,280
take a plastic cup to pour your drink in

1135
00:36:49,280 --> 00:36:51,040
then they put in a machine

1136
00:36:51,040 --> 00:36:54,960
that um kind of like taps over a lid

1137
00:36:54,960 --> 00:36:56,560
and the lid could be plastic or thick

1138
00:36:56,560 --> 00:36:58,800
paper and you got to pierce the lid with

1139
00:36:58,800 --> 00:37:00,320
your straw and the straw is like a

1140
00:37:00,320 --> 00:37:01,520
pointy end

1141
00:37:01,520 --> 00:37:03,119
and so you want to be very quick and

1142
00:37:03,119 --> 00:37:05,359
decisive with piercing that lid with

1143
00:37:05,359 --> 00:37:06,800
your straw otherwise

1144
00:37:06,800 --> 00:37:08,160
it can like really make a mess like if

1145
00:37:08,160 --> 00:37:09,200
you pierce it just a little bit it

1146
00:37:09,200 --> 00:37:10,960
spills everywhere it's a disaster

1147
00:37:10,960 --> 00:37:14,480
and it shows that you are a uh a novice

1148
00:37:14,480 --> 00:37:16,480
at the bubble tea experience so like

1149
00:37:16,480 --> 00:37:18,079
definitely like quick decisive

1150
00:37:18,079 --> 00:37:20,560
piercing of the lid uh and then last

1151
00:37:20,560 --> 00:37:22,640
year um

1152
00:37:22,640 --> 00:37:24,800
when i when people are like what is

1153
00:37:24,800 --> 00:37:26,079
bubble tea like for those of you that

1154
00:37:26,079 --> 00:37:26,880
haven't had it

1155
00:37:26,880 --> 00:37:29,119
i like created this flow chart to think

1156
00:37:29,119 --> 00:37:31,040
about whether someone that i know would

1157
00:37:31,040 --> 00:37:32,880
like bubble tea so the first thing i

1158
00:37:32,880 --> 00:37:35,280
would ask and you can self reflect

1159
00:37:35,280 --> 00:37:37,520
do you like gummy candy and i think

1160
00:37:37,520 --> 00:37:39,200
gummy bears are the right texture like

1161
00:37:39,200 --> 00:37:40,880
do you like that texture

1162
00:37:40,880 --> 00:37:42,320
if you like that texture and you like

1163
00:37:42,320 --> 00:37:44,640
tea you are going to love bubble tea

1164
00:37:44,640 --> 00:37:46,320
if you like that texture and you don't

1165
00:37:46,320 --> 00:37:48,560
like tea you probably will still like it

1166
00:37:48,560 --> 00:37:49,359
but try like

1167
00:37:49,359 --> 00:37:51,760
coffee or try like if you like coffee or

1168
00:37:51,760 --> 00:37:52,800
like

1169
00:37:52,800 --> 00:37:55,359
a slush like or a milk tea something

1170
00:37:55,359 --> 00:37:57,359
that like might be more milk shaky

1171
00:37:57,359 --> 00:37:59,680
um give that a shot if you don't like

1172
00:37:59,680 --> 00:38:00,640
gummies

1173
00:38:00,640 --> 00:38:04,720
gummy candy um and you like tea

1174
00:38:04,720 --> 00:38:06,320
maybe i don't know what to tell you

1175
00:38:06,320 --> 00:38:07,680
maybe you would want a different topping

1176
00:38:07,680 --> 00:38:09,119
and not tapioca

1177
00:38:09,119 --> 00:38:11,280
um if you don't like gummy candy and you

1178
00:38:11,280 --> 00:38:12,880
don't like tea like that's a weird

1179
00:38:12,880 --> 00:38:14,320
choice but i respect it

1180
00:38:14,320 --> 00:38:15,839
you're not gonna like it this is not for

1181
00:38:15,839 --> 00:38:18,640
you i'm sorry i wasted uh 20 minutes of

1182
00:38:18,640 --> 00:38:20,320
your time but at least you know

1183
00:38:20,320 --> 00:38:22,640
but still you might want to try it and

1184
00:38:22,640 --> 00:38:24,640
just to recap everything so we're taking

1185
00:38:24,640 --> 00:38:25,200
tea

1186
00:38:25,200 --> 00:38:26,720
maybe we're adding milk maybe we're

1187
00:38:26,720 --> 00:38:28,560
adding fruit flavor we're adding some

1188
00:38:28,560 --> 00:38:29,359
topping like

1189
00:38:29,359 --> 00:38:32,400
cooked tapioca taking a thick straw

1190
00:38:32,400 --> 00:38:34,079
and that's bubble tea like plain and

1191
00:38:34,079 --> 00:38:36,160
simple that is bubble tea

1192
00:38:36,160 --> 00:38:38,400
um just want to mention all the images

1193
00:38:38,400 --> 00:38:39,359
that i got unless i

1194
00:38:39,359 --> 00:38:42,880
took it from microsoft are from png guru

1195
00:38:42,880 --> 00:38:45,040
and with that thank you all very much

1196
00:38:45,040 --> 00:38:46,160
for your time i'm

1197
00:38:46,160 --> 00:38:47,680
at joe lee on junior on twitter and

1198
00:38:47,680 --> 00:38:49,760
github and

1199
00:38:49,760 --> 00:38:50,640
hopefully you guys enjoyed the

1200
00:38:50,640 --> 00:38:52,880
presentation

1201
00:38:52,880 --> 00:38:55,920
fantastic thank you very much uh so

1202
00:38:55,920 --> 00:38:57,839
uh we do have one question from the

1203
00:38:57,839 --> 00:39:00,000
audience uh are the juice flavors

1204
00:39:00,000 --> 00:39:02,000
a mixture or just plain juice and

1205
00:39:02,000 --> 00:39:04,480
toppings

1206
00:39:04,480 --> 00:39:06,800
so typically what happens is you will

1207
00:39:06,800 --> 00:39:09,359
choose green tea or black tea or oolong

1208
00:39:09,359 --> 00:39:11,119
tea or some type of base tea and then

1209
00:39:11,119 --> 00:39:12,079
they will have

1210
00:39:12,079 --> 00:39:15,119
a typically what i've seen is like

1211
00:39:15,119 --> 00:39:17,200
um you know like at starbucks or a

1212
00:39:17,200 --> 00:39:18,320
coffee shop or they like

1213
00:39:18,320 --> 00:39:20,800
squirt in the like the syrup it's kind

1214
00:39:20,800 --> 00:39:22,160
of like that where they have a flavored

1215
00:39:22,160 --> 00:39:23,680
syrup for whatever

1216
00:39:23,680 --> 00:39:26,640
um juice like whatever fruit you want

1217
00:39:26,640 --> 00:39:28,000
and then pour some in there

1218
00:39:28,000 --> 00:39:30,320
some places will actually use fresh

1219
00:39:30,320 --> 00:39:31,520
fruit which is great

1220
00:39:31,520 --> 00:39:34,960
um and i don't get it too often

1221
00:39:34,960 --> 00:39:38,000
to be honest the fruit flavors um but

1222
00:39:38,000 --> 00:39:39,680
i imagine you could ask them to combine

1223
00:39:39,680 --> 00:39:40,800
them like there's no reason why you

1224
00:39:40,800 --> 00:39:42,400
couldn't do like lychee and

1225
00:39:42,400 --> 00:39:44,000
strawberry or something whatever

1226
00:39:44,000 --> 00:39:46,960
whatever you wanted to do

1227
00:39:50,079 --> 00:39:53,040
fantastic and uh question question from

1228
00:39:53,040 --> 00:39:54,160
me

1229
00:39:54,160 --> 00:39:57,359
uh have you ever tried uh avocado

1230
00:39:57,359 --> 00:40:00,800
or durian for this

1231
00:40:00,800 --> 00:40:03,839
so durian uh not a huge fan of uh that

1232
00:40:03,839 --> 00:40:04,480
has

1233
00:40:04,480 --> 00:40:07,599
been tried but avocado i have heard

1234
00:40:07,599 --> 00:40:09,200
and that's just my personal opinion like

1235
00:40:09,200 --> 00:40:12,319
a lot of people love

1236
00:40:12,720 --> 00:40:15,119
balti now that's not for a first timer i

1237
00:40:15,119 --> 00:40:15,920
would say

1238
00:40:15,920 --> 00:40:18,800
uh but avocados interesting i haven't

1239
00:40:18,800 --> 00:40:20,240
i've seen that many times i just

1240
00:40:20,240 --> 00:40:22,000
actually haven't ventured to try it

1241
00:40:22,000 --> 00:40:23,359
because like i found a few that i really

1242
00:40:23,359 --> 00:40:24,960
like and i just constantly get those but

1243
00:40:24,960 --> 00:40:26,560
i do need to venture out more

1244
00:40:26,560 --> 00:40:28,880
uh but uh i have not have you have you

1245
00:40:28,880 --> 00:40:31,680
tried it before

1246
00:40:32,640 --> 00:40:35,760
oh yeah i love it i'm kind of a ringer

1247
00:40:35,760 --> 00:40:36,560
here because

1248
00:40:36,560 --> 00:40:38,079
we have a lot of this in southern

1249
00:40:38,079 --> 00:40:40,000
california

1250
00:40:40,000 --> 00:40:44,079
sorry yeah yep i know you got yeah

1251
00:40:44,079 --> 00:40:47,680
so yeah um personally i have the like

1252
00:40:47,680 --> 00:40:50,240
almond

1253
00:40:50,800 --> 00:40:52,480
yeah that's a great a great flavor as

1254
00:40:52,480 --> 00:40:54,000
well i mean there's so many there's so

1255
00:40:54,000 --> 00:40:55,760
many options like literally any

1256
00:40:55,760 --> 00:40:57,680
any taste that you have for like

1257
00:40:57,680 --> 00:40:59,119
anything sweet related they

1258
00:40:59,119 --> 00:41:02,480
they can probably accommodate there

1259
00:41:03,200 --> 00:41:05,760
fantastic well great to hear from you

1260
00:41:05,760 --> 00:41:06,240
and

1261
00:41:06,240 --> 00:41:10,240
uh so just a quick bit of organizational

1262
00:41:10,240 --> 00:41:13,119
stuff we are working on getting the next

1263
00:41:13,119 --> 00:41:14,800
talk set up there's been a

1264
00:41:14,800 --> 00:41:17,920
technical issue so we may be a minute

1265
00:41:17,920 --> 00:41:21,200
uh but at any rate uh joe thanks very

1266
00:41:21,200 --> 00:41:22,480
much for your talk

1267
00:41:22,480 --> 00:41:24,319
and uh very glad to have that

1268
00:41:24,319 --> 00:41:27,279
information from you

1269
00:41:27,359 --> 00:41:29,599
alrighty thank you so uh while we get

1270
00:41:29,599 --> 00:41:30,400
set up here

1271
00:41:30,400 --> 00:41:32,640
i'll go ahead and bounce the recording

1272
00:41:32,640 --> 00:41:35,200
and uh we'll start working on

1273
00:41:35,200 --> 00:41:37,920
getting the next presenters set up for

1274
00:41:37,920 --> 00:41:38,640
you

1275
00:41:38,640 --> 00:41:41,359
scheduled presenter will be scheduled at

1276
00:41:41,359 --> 00:41:42,720
least scheduled to start

1277
00:41:42,720 --> 00:41:44,720
in about four minutes it may take us a

1278
00:41:44,720 --> 00:41:47,839
minute or two longer

