1
00:00:00,040 --> 00:00:00,680
[Applause]

2
00:00:00,680 --> 00:00:03,300
so hello everyone thank you for being

3
00:00:03,300 --> 00:00:05,819
here for my presentation so I'm French

4
00:00:05,819 --> 00:00:08,460
I'm Tomas well this is my first time in

5
00:00:08,460 --> 00:00:11,580
Canada in Quebec my talk is in English

6
00:00:11,580 --> 00:00:14,429
but I can spin fresh please excuse them

7
00:00:14,429 --> 00:00:16,830
as I'm French is excuse my ready broken

8
00:00:16,830 --> 00:00:19,470
English even may break in front French I

9
00:00:19,470 --> 00:00:21,689
guess don't hesitate to switch switch

10
00:00:21,689 --> 00:00:24,560
language if you have some question so

11
00:00:24,560 --> 00:00:28,470
let's start so just before before really

12
00:00:28,470 --> 00:00:30,390
stunning whoever in this room already

13
00:00:30,390 --> 00:00:34,680
heard about I do owe a lot of people

14
00:00:34,680 --> 00:00:37,590
great so we'll talk about a dupe in

15
00:00:37,590 --> 00:00:39,719
security and penetration pentesting

16
00:00:39,719 --> 00:00:41,910
adieu and comment on averages on this

17
00:00:41,910 --> 00:00:45,719
frame rock so first I'm Tomas I'm French

18
00:00:45,719 --> 00:00:47,730
consultant in penetration tester and

19
00:00:47,730 --> 00:00:51,960
insolent responder I like to to craft to

20
00:00:51,960 --> 00:00:53,730
build some tools in four sectors so

21
00:00:53,730 --> 00:00:57,750
here's my get up if you ever or will use

22
00:00:57,750 --> 00:00:59,850
any of my tool just come say hello and

23
00:00:59,850 --> 00:01:03,930
we'll add we'll have a beer so the end

24
00:01:03,930 --> 00:01:06,000
of the agenda for today so first let's

25
00:01:06,000 --> 00:01:09,020
talk about for newcomers I think there's

26
00:01:09,020 --> 00:01:11,909
not not many newcomers to adopt today

27
00:01:11,909 --> 00:01:14,880
but it is important to to outline the

28
00:01:14,880 --> 00:01:18,119
security model and then we will see how

29
00:01:18,119 --> 00:01:20,939
can you fool how can you pen test

30
00:01:20,939 --> 00:01:24,390
another cluster and the last part there

31
00:01:24,390 --> 00:01:25,770
will be some confusion some high level

32
00:01:25,770 --> 00:01:29,670
confusion so for defenders mostly so

33
00:01:29,670 --> 00:01:31,799
let's start so what is that you from

34
00:01:31,799 --> 00:01:33,180
definition a loop is an open source

35
00:01:33,180 --> 00:01:34,710
framework that allows for the

36
00:01:34,710 --> 00:01:37,409
distributed processing of large datasets

37
00:01:37,409 --> 00:01:39,990
across the cluster using simple

38
00:01:39,990 --> 00:01:42,540
programming models so it refers to what

39
00:01:42,540 --> 00:01:44,360
is called Big Data

40
00:01:44,360 --> 00:01:47,729
what is this rooted processing it is

41
00:01:47,729 --> 00:01:50,369
based on the MapReduce algorithm based

42
00:01:50,369 --> 00:01:53,189
itself on two things to function map and

43
00:01:53,189 --> 00:01:57,180
reduce described in 2004 by to Google

44
00:01:57,180 --> 00:01:58,590
engineers in order to sort and index

45
00:01:58,590 --> 00:02:01,229
webpages here's the model you can find

46
00:02:01,229 --> 00:02:05,219
easily and on that picture that what

47
00:02:05,219 --> 00:02:07,590
does the MapReduce algorithm it sorts

48
00:02:07,590 --> 00:02:10,199
and it allows for multiple nodes to

49
00:02:10,199 --> 00:02:12,420
perform the same task here just to sort

50
00:02:12,420 --> 00:02:13,180
by

51
00:02:13,180 --> 00:02:16,000
different step so the simple programming

52
00:02:16,000 --> 00:02:18,340
model use the MapReduce you map you have

53
00:02:18,340 --> 00:02:20,140
a map function doing the job and then

54
00:02:20,140 --> 00:02:22,890
you have a rigid function that merge

55
00:02:22,890 --> 00:02:27,099
merge all intermediate values with the

56
00:02:27,099 --> 00:02:29,620
same intermediate key that's the part if

57
00:02:29,620 --> 00:02:30,819
she understood is you understand

58
00:02:30,819 --> 00:02:32,640
everything in a loop and in MapReduce

59
00:02:32,640 --> 00:02:36,250
first light then the open source aspect

60
00:02:36,250 --> 00:02:39,549
of a dupe like Linux in enterprise you

61
00:02:39,549 --> 00:02:42,730
have Linux which is open source and free

62
00:02:42,730 --> 00:02:44,769
and you have distributors like reddit

63
00:02:44,769 --> 00:02:46,989
that serves you supports and sends you

64
00:02:46,989 --> 00:02:50,739
distribution in a dupe this is totally

65
00:02:50,739 --> 00:02:52,599
the same you have three major today

66
00:02:52,599 --> 00:02:54,819
three major providers Claudia

67
00:02:54,819 --> 00:02:58,810
often words in mapper the two first the

68
00:02:58,810 --> 00:03:00,579
business is speed between the the Claude

69
00:03:00,579 --> 00:03:02,230
Lorrain often works they have different

70
00:03:02,230 --> 00:03:04,840
model I won't say too much things on it

71
00:03:04,840 --> 00:03:08,049
but Pradera use proprietary stuff and

72
00:03:08,049 --> 00:03:11,290
try to to develop some high value-added

73
00:03:11,290 --> 00:03:14,680
stuff often works only packages only

74
00:03:14,680 --> 00:03:17,799
open-source components so technically

75
00:03:17,799 --> 00:03:20,680
the license is cheaper for often hogs

76
00:03:20,680 --> 00:03:23,139
and cloudier and mapper is doing a dupe

77
00:03:23,139 --> 00:03:26,680
without ado ado please are not really

78
00:03:26,680 --> 00:03:28,599
focused on that but Hadoop is just a

79
00:03:28,599 --> 00:03:30,609
connector map early does not need that

80
00:03:30,609 --> 00:03:32,349
high concentration but a dupe is just

81
00:03:32,349 --> 00:03:34,690
another connector the common point

82
00:03:34,690 --> 00:03:36,400
between a distribution is the use of a

83
00:03:36,400 --> 00:03:37,540
Duke off framework

84
00:03:37,540 --> 00:03:40,389
well we'll see just after what is the

85
00:03:40,389 --> 00:03:42,970
adecco framework Hadoop is just doing

86
00:03:42,970 --> 00:03:45,819
only two things store data and process

87
00:03:45,819 --> 00:03:48,310
data and again if you understood this if

88
00:03:48,310 --> 00:03:49,599
you understood this you understood

89
00:03:49,599 --> 00:03:51,970
everything about a loop in real life

90
00:03:51,970 --> 00:03:54,489
what does that sound vermin looks like

91
00:03:54,489 --> 00:03:56,590
the first thing I hope with this

92
00:03:56,590 --> 00:03:58,930
presentation I will demystify some stuff

93
00:03:58,930 --> 00:04:01,780
such as big data is fast nobody data is

94
00:04:01,780 --> 00:04:03,400
not fast you are seeing the demos I have

95
00:04:03,400 --> 00:04:05,260
a lot of demos just to show you some

96
00:04:05,260 --> 00:04:09,040
stuff bill data is not is not fast be

97
00:04:09,040 --> 00:04:11,530
that I what is big data is a collection

98
00:04:11,530 --> 00:04:14,290
of technologies and methods to process

99
00:04:14,290 --> 00:04:17,500
large data set this is the best

100
00:04:17,500 --> 00:04:19,180
definition I can give about big data is

101
00:04:19,180 --> 00:04:24,279
behind and beyond the buzzword behind

102
00:04:24,279 --> 00:04:26,590
the buzzword be that eyes

103
00:04:26,590 --> 00:04:28,000
I'm saying the correction of

104
00:04:28,000 --> 00:04:31,120
technologies that you have to use in

105
00:04:31,120 --> 00:04:33,490
order to process data sets and you

106
00:04:33,490 --> 00:04:35,830
cannot you could not process such data

107
00:04:35,830 --> 00:04:37,900
sets without B data that's the best

108
00:04:37,900 --> 00:04:40,660
definition I can give in real life what

109
00:04:40,660 --> 00:04:42,430
what is a bit of time Vermont looks like

110
00:04:42,430 --> 00:04:46,419
you have a lot of CPU Ram disk on top of

111
00:04:46,419 --> 00:04:50,139
it you put a dupe Co framework to

112
00:04:50,139 --> 00:04:51,370
support the data life second the

113
00:04:51,370 --> 00:04:54,130
platform so in the in the life cycle at

114
00:04:54,130 --> 00:04:55,570
different phases that's not saying

115
00:04:55,570 --> 00:04:56,229
nothing new

116
00:04:56,229 --> 00:04:58,360
first the acquisition here you can see

117
00:04:58,360 --> 00:05:01,720
you will see a lot of modules 80 90

118
00:05:01,720 --> 00:05:03,940
percent of this module are open source

119
00:05:03,940 --> 00:05:05,650
and free and comes from the Apache

120
00:05:05,650 --> 00:05:08,229
foundation that's for you maybe today

121
00:05:08,229 --> 00:05:09,910
Apache is just a web server for me

122
00:05:09,910 --> 00:05:14,110
Apache the main provider of big data and

123
00:05:14,110 --> 00:05:16,780
open source technology so you have

124
00:05:16,780 --> 00:05:18,880
different modules like flume Kafka cap

125
00:05:18,880 --> 00:05:21,160
Kaiser is a renowned module five

126
00:05:21,160 --> 00:05:24,310
position scooped again then you have

127
00:05:24,310 --> 00:05:27,039
storage so storage in the core framework

128
00:05:27,039 --> 00:05:29,590
means HDFS a dupe this rooted file

129
00:05:29,590 --> 00:05:31,600
system will see just after what really

130
00:05:31,600 --> 00:05:35,080
is HDFS then for processing what you

131
00:05:35,080 --> 00:05:37,270
want so you want to process data in such

132
00:05:37,270 --> 00:05:39,430
environments so you have a lot again lot

133
00:05:39,430 --> 00:05:42,700
of modules some are ready

134
00:05:42,700 --> 00:05:45,190
fancy some already hold technologies

135
00:05:45,190 --> 00:05:48,520
keeps changing names are changing every

136
00:05:48,520 --> 00:05:49,150
three months

137
00:05:49,150 --> 00:05:51,099
I guess that's very disturbing to be

138
00:05:51,099 --> 00:05:53,440
fair when I entered this in this world

139
00:05:53,440 --> 00:05:57,520
is ecosystem a batch stock is the the

140
00:05:57,520 --> 00:05:59,830
most fanciest module it you can process

141
00:05:59,830 --> 00:06:02,260
everything in RAM instead of Io so it's

142
00:06:02,260 --> 00:06:04,349
faster and it's really fancy today

143
00:06:04,349 --> 00:06:07,030
Apache drill Apache drill two performs

144
00:06:07,030 --> 00:06:10,060
on distributed SQL request again a fancy

145
00:06:10,060 --> 00:06:12,220
module then you have indexation I guess

146
00:06:12,220 --> 00:06:13,330
point the accession you already know

147
00:06:13,330 --> 00:06:16,000
about a bash bash dollar elasticsearch

148
00:06:16,000 --> 00:06:19,690
listen oak and so on for consultation

149
00:06:19,690 --> 00:06:21,430
which is really important and in the end

150
00:06:21,430 --> 00:06:22,690
you don't process that F of file you

151
00:06:22,690 --> 00:06:25,000
just process data for end-users so you

152
00:06:25,000 --> 00:06:27,370
have different modules just known as

153
00:06:27,370 --> 00:06:30,400
Jupiter formerly ipython notebook so it

154
00:06:30,400 --> 00:06:33,700
gives you an interpreter and and fancy

155
00:06:33,700 --> 00:06:36,820
you again sexy graphs in all inner HTML

156
00:06:36,820 --> 00:06:40,060
pages you have credere you

157
00:06:40,060 --> 00:06:42,370
she's famous tableaus the spread for us

158
00:06:42,370 --> 00:06:45,310
brand we are which are proprietary stuff

159
00:06:45,310 --> 00:06:48,460
and legacy stuff except Splunk which is

160
00:06:48,460 --> 00:06:51,669
still rolling data eco which is which

161
00:06:51,669 --> 00:06:53,500
was a French or French visualization

162
00:06:53,500 --> 00:06:56,620
technology and then for discretion each

163
00:06:56,620 --> 00:06:58,540
distribution as is adminstration module

164
00:06:58,540 --> 00:07:00,520
you have cried our manager I'm very

165
00:07:00,520 --> 00:07:02,530
attached Jamboree for often works

166
00:07:02,530 --> 00:07:06,100
gesture mapper for Nagar and then we

167
00:07:06,100 --> 00:07:08,650
have what security so the first thing is

168
00:07:08,650 --> 00:07:11,260
you can see security there's only four

169
00:07:11,260 --> 00:07:14,740
modules compared to hundred hundred of

170
00:07:14,740 --> 00:07:17,320
module for everything else and among

171
00:07:17,320 --> 00:07:20,260
these four modules I could say that 200

172
00:07:20,260 --> 00:07:23,919
so you just have Knox and Ranger are

173
00:07:23,919 --> 00:07:26,440
still surviving a great mules they are

174
00:07:26,440 --> 00:07:29,710
not made for the same use case and they

175
00:07:29,710 --> 00:07:32,110
are the only diggers security solution

176
00:07:32,110 --> 00:07:37,419
for defender so live with it a dupe core

177
00:07:37,419 --> 00:07:39,460
under the hood so you have young

178
00:07:39,460 --> 00:07:43,270
MapReduce and HDFS yun and MapReduce job

179
00:07:43,270 --> 00:07:44,979
distribution and job scheduler across

180
00:07:44,979 --> 00:07:47,620
the platform yon is a complex a complex

181
00:07:47,620 --> 00:07:50,110
stuff I could make a transition only on

182
00:07:50,110 --> 00:07:53,380
yon security to be fair it's been like

183
00:07:53,380 --> 00:07:55,380
three or four years I'm digging that a

184
00:07:55,380 --> 00:07:58,390
dupe stuff I still don't master anything

185
00:07:58,390 --> 00:08:00,220
in Jung because it's very way too

186
00:08:00,220 --> 00:08:03,100
complex this is a complete operating

187
00:08:03,100 --> 00:08:05,950
system beta MapReduce you saw it just

188
00:08:05,950 --> 00:08:07,810
before is the job algorithm situation

189
00:08:07,810 --> 00:08:09,700
for destruction and for storage

190
00:08:09,700 --> 00:08:11,289
everything is simple just as in the

191
00:08:11,289 --> 00:08:13,900
Linux fading every fine if every data is

192
00:08:13,900 --> 00:08:16,300
a5 and every fight is divided in

193
00:08:16,300 --> 00:08:18,850
multiple parts to type you have to type

194
00:08:18,850 --> 00:08:21,490
point of not in HDFS some data nodes

195
00:08:21,490 --> 00:08:24,250
storing actual five parts and one single

196
00:08:24,250 --> 00:08:27,460
active name node which stores a mapping

197
00:08:27,460 --> 00:08:30,669
list of five parts and the location so

198
00:08:30,669 --> 00:08:33,190
as you can understand a single active

199
00:08:33,190 --> 00:08:35,279
means a single point of failure

200
00:08:35,279 --> 00:08:39,279
that's that true and from few versions

201
00:08:39,279 --> 00:08:40,809
ago a dupes

202
00:08:40,809 --> 00:08:43,059
introduced cylinder in and named not

203
00:08:43,059 --> 00:08:45,610
passive for redundancy stuff but you

204
00:08:45,610 --> 00:08:46,870
have to understand that if the name node

205
00:08:46,870 --> 00:08:49,390
is crashed nothing works in a loop

206
00:08:49,390 --> 00:08:51,730
everything goes and everything works

207
00:08:51,730 --> 00:08:52,870
through a name now

208
00:08:52,870 --> 00:08:55,090
every time you request a file it goes

209
00:08:55,090 --> 00:08:56,860
through the nominal which gives you the

210
00:08:56,860 --> 00:08:59,140
actual file location so if you crash if

211
00:08:59,140 --> 00:09:01,390
you do so if you does the name not your

212
00:09:01,390 --> 00:09:03,940
does the cluster so so far you can say

213
00:09:03,940 --> 00:09:06,130
yeah that's cool really interesting but

214
00:09:06,130 --> 00:09:09,490
really who uses I do today and anyway so

215
00:09:09,490 --> 00:09:10,510
you have wait

216
00:09:10,510 --> 00:09:13,660
and I would say formerly only web

217
00:09:13,660 --> 00:09:17,710
giant's retail Adobe eBay Yahoo these

218
00:09:17,710 --> 00:09:21,280
are actual numbers from the ado page but

219
00:09:21,280 --> 00:09:22,870
the thing you have to understand is that

220
00:09:22,870 --> 00:09:25,780
before only web Giants would have such

221
00:09:25,780 --> 00:09:27,610
capacity to process large data sets

222
00:09:27,610 --> 00:09:29,590
today every company banks insurance

223
00:09:29,590 --> 00:09:32,500
whatever you want they want to perform

224
00:09:32,500 --> 00:09:34,750
and they want to to process data like

225
00:09:34,750 --> 00:09:39,610
Google like eBay so classical companies

226
00:09:39,610 --> 00:09:41,920
I would say bank insurance do and will

227
00:09:41,920 --> 00:09:44,530
implement a do cluster for their own it

228
00:09:44,530 --> 00:09:46,360
that's why it's very interesting for us

229
00:09:46,360 --> 00:09:49,690
what occurs in testers because you find

230
00:09:49,690 --> 00:09:51,910
you actually find I do clusters on

231
00:09:51,910 --> 00:09:55,560
cooperate networks in banks insurance

232
00:09:55,560 --> 00:09:58,720
retailers and so on that's not only for

233
00:09:58,720 --> 00:10:01,030
weddings today so then the security

234
00:10:01,030 --> 00:10:03,340
model the first thing you have to

235
00:10:03,340 --> 00:10:05,080
understand the the main thing about

236
00:10:05,080 --> 00:10:06,340
Hadoop security there's no

237
00:10:06,340 --> 00:10:09,280
authentication by default is it it is

238
00:10:09,280 --> 00:10:10,720
called the simple at altercation

239
00:10:10,720 --> 00:10:13,240
I'm just letting giving you two seconds

240
00:10:13,240 --> 00:10:14,860
to read the sentence here to understand

241
00:10:14,860 --> 00:10:18,820
if it is rare actual security or not so

242
00:10:18,820 --> 00:10:21,310
by default simplification means you can

243
00:10:21,310 --> 00:10:24,430
pretend a whoever you want you just have

244
00:10:24,430 --> 00:10:26,320
to give a parameter saying who you want

245
00:10:26,320 --> 00:10:29,680
to be you are that user because you know

246
00:10:29,680 --> 00:10:31,990
that this is simple authentication so at

247
00:10:31,990 --> 00:10:34,360
the root I do haven't understood what a

248
00:10:34,360 --> 00:10:38,320
complication is simplification is by

249
00:10:38,320 --> 00:10:42,550
default genius genius stuff superstition

250
00:10:42,550 --> 00:10:44,290
equals a notification equals you can be

251
00:10:44,290 --> 00:10:46,620
whoever you want on the cluster I'm

252
00:10:46,620 --> 00:10:49,810
apart from any security or ACL or

253
00:10:49,810 --> 00:10:51,790
whatever if you have simple application

254
00:10:51,790 --> 00:10:53,950
that's the game over and that's for you

255
00:10:53,950 --> 00:10:55,330
each few seconds to check if you are

256
00:10:55,330 --> 00:10:57,550
from the configuration file if you are

257
00:10:57,550 --> 00:11:00,520
in simple application or in the sole

258
00:11:00,520 --> 00:11:03,030
proper authentication module proof

259
00:11:03,030 --> 00:11:06,040
foreseen and expected which is Kerberos

260
00:11:06,040 --> 00:11:08,500
as he implemented their implemented a

261
00:11:08,500 --> 00:11:11,980
lot of stuff for Kerberos again I could

262
00:11:11,980 --> 00:11:14,500
make a talk on itself on cameras on I do

263
00:11:14,500 --> 00:11:16,600
but if you are if you don't have cameras

264
00:11:16,600 --> 00:11:18,250
that's already game over on your cluster

265
00:11:18,250 --> 00:11:22,449
that's the first point for you have to

266
00:11:22,449 --> 00:11:25,000
watch out because you can have cameras

267
00:11:25,000 --> 00:11:27,759
implemented but on the core but not on

268
00:11:27,759 --> 00:11:29,709
the enterprise and the surrounding

269
00:11:29,709 --> 00:11:33,279
interfaces you can have core on cables

270
00:11:33,279 --> 00:11:35,860
and the surrounding in stealing simple

271
00:11:35,860 --> 00:11:37,630
application so you have to to check

272
00:11:37,630 --> 00:11:40,779
several values just to understand if

273
00:11:40,779 --> 00:11:44,920
Kerberos is fully enforced on it then

274
00:11:44,920 --> 00:11:47,860
for authorization each module you

275
00:11:47,860 --> 00:11:50,589
remember of the module is I show you I

276
00:11:50,589 --> 00:11:53,680
shall use four different the hundreds of

277
00:11:53,680 --> 00:11:55,180
module each module has this

278
00:11:55,180 --> 00:11:57,459
authorization model again for the

279
00:11:57,459 --> 00:12:00,190
founders that's a pain for instance for

280
00:12:00,190 --> 00:12:02,680
HDFS which is pretty simple and free at

281
00:12:02,680 --> 00:12:05,500
the root of a dupe it is very like Linux

282
00:12:05,500 --> 00:12:07,660
on the you POSIX permissions like yugioh

283
00:12:07,660 --> 00:12:11,430
user group folder and since a dupe 2.5

284
00:12:11,430 --> 00:12:13,180
IGFs also support

285
00:12:13,180 --> 00:12:16,600
POSIX ACL extended attributes that's for

286
00:12:16,600 --> 00:12:22,029
final grain a CL then let's take another

287
00:12:22,029 --> 00:12:22,690
example

288
00:12:22,690 --> 00:12:27,100
I what is I is the relational DBMS of a

289
00:12:27,100 --> 00:12:31,180
dupe like the MySQL of a dupe the

290
00:12:31,180 --> 00:12:33,399
original model is based on web SQL verbs

291
00:12:33,399 --> 00:12:35,410
select object create and so on so you

292
00:12:35,410 --> 00:12:38,079
can't you have to set some issues on

293
00:12:38,079 --> 00:12:41,760
this verb again defenders you're welcome

294
00:12:41,760 --> 00:12:44,199
so you need the third party component to

295
00:12:44,199 --> 00:12:47,230
manage everything you can say yeah I

296
00:12:47,230 --> 00:12:49,240
guess there's a lot of solution it would

297
00:12:49,240 --> 00:12:51,220
perform the same no there's only one

298
00:12:51,220 --> 00:12:53,079
solution which is called Apache Ranger

299
00:12:53,079 --> 00:12:56,939
this is the only service product today

300
00:12:56,939 --> 00:13:00,220
the bad news is if you don't have a knot

301
00:13:00,220 --> 00:13:03,310
on works faster it is not it is not

302
00:13:03,310 --> 00:13:04,810
expected by default you have to in

303
00:13:04,810 --> 00:13:07,180
studied by yourself that's the that's

304
00:13:07,180 --> 00:13:09,310
the point today the point of version of

305
00:13:09,310 --> 00:13:12,040
security onida professor so a passenger

306
00:13:12,040 --> 00:13:13,930
it's pretty sexy and pretty nice and

307
00:13:13,930 --> 00:13:16,209
that's the nice open source project so

308
00:13:16,209 --> 00:13:19,240
you have a CL here and you have another

309
00:13:19,240 --> 00:13:21,490
which is audit which centralize your

310
00:13:21,490 --> 00:13:26,339
logs so you can perform some analysis on

311
00:13:26,339 --> 00:13:29,589
they were they are some other product

312
00:13:29,589 --> 00:13:31,179
which are called Apache sentry or

313
00:13:31,179 --> 00:13:34,360
federal career record services but to be

314
00:13:34,360 --> 00:13:36,149
fair there are almost there

315
00:13:36,149 --> 00:13:39,009
maybe even then I guess and let's use a

316
00:13:39,009 --> 00:13:41,709
ferny so more erupt Ron so as a security

317
00:13:41,709 --> 00:13:43,300
professional you don't want this kind of

318
00:13:43,300 --> 00:13:46,839
tha that's for that our protection by

319
00:13:46,839 --> 00:13:48,759
default you don't have any encryption in

320
00:13:48,759 --> 00:13:52,059
transit RS but find transit you have I

321
00:13:52,059 --> 00:13:54,399
won't detail also be because this is a

322
00:13:54,399 --> 00:13:57,189
subject by itself but you can perform

323
00:13:57,189 --> 00:13:59,619
you can have all your flows encrypted

324
00:13:59,619 --> 00:14:04,990
that's a good starting point whereas TLS

325
00:14:04,990 --> 00:14:07,660
is not natively enforced it is natively

326
00:14:07,660 --> 00:14:10,449
offered on most of what you is so you

327
00:14:10,449 --> 00:14:14,139
can enable it by default for the

328
00:14:14,139 --> 00:14:16,089
communication with data node you have

329
00:14:16,089 --> 00:14:18,550
worked as proprietary open-source

330
00:14:18,550 --> 00:14:20,860
proprietary specific protocol named DGP

331
00:14:20,860 --> 00:14:23,050
data transfer protocol which involves

332
00:14:23,050 --> 00:14:24,970
two phases you just look at the

333
00:14:24,970 --> 00:14:27,129
algorithm and make your own confusion on

334
00:14:27,129 --> 00:14:30,879
it the thing is nothing is performed by

335
00:14:30,879 --> 00:14:33,999
default then fart rest this is not

336
00:14:33,999 --> 00:14:36,009
complicated this is really simple you

337
00:14:36,009 --> 00:14:39,339
have different keys but the thing is for

338
00:14:39,339 --> 00:14:43,649
the cold storage it to prevent someone

339
00:14:43,649 --> 00:14:46,449
stealing their drive to be able to read

340
00:14:46,449 --> 00:14:49,269
it you have HDFS transparent encryption

341
00:14:49,269 --> 00:14:53,799
from a dupe 2.6 you have tricky freaky

342
00:14:53,799 --> 00:14:56,980
one for a Tron cryptic directory want to

343
00:14:56,980 --> 00:14:58,749
encrypt the file and want to encrypt the

344
00:14:58,749 --> 00:15:01,540
other key that's pretty simple you just

345
00:15:01,540 --> 00:15:04,149
have to understand that it may sound

346
00:15:04,149 --> 00:15:06,459
complicated I hope it's not but

347
00:15:06,459 --> 00:15:08,559
everything relies on ACS on the KMS

348
00:15:08,559 --> 00:15:13,119
nothing new in 2017 so if you can prune

349
00:15:13,119 --> 00:15:15,970
if you can attack if the KMS which is a

350
00:15:15,970 --> 00:15:17,740
found out several I'm not talking about

351
00:15:17,740 --> 00:15:20,470
HSM if you can point that saga you have

352
00:15:20,470 --> 00:15:21,429
access to everything

353
00:15:21,429 --> 00:15:23,559
it's not about cryptography is just

354
00:15:23,559 --> 00:15:25,839
about ACS you just have to understand it

355
00:15:25,839 --> 00:15:30,699
and the core message here is if you want

356
00:15:30,699 --> 00:15:32,350
to implement a dupe

357
00:15:32,350 --> 00:15:34,360
don't secure another cluster don't start

358
00:15:34,360 --> 00:15:37,510
with encryption at rest this is jino for

359
00:15:37,510 --> 00:15:39,760
a specific scenario someone stealing you

360
00:15:39,760 --> 00:15:41,290
are driving you data centers that's not

361
00:15:41,290 --> 00:15:44,140
the first scenario the most expected

362
00:15:44,140 --> 00:15:46,960
tonight so let's talk about practical

363
00:15:46,960 --> 00:15:50,740
stuff now let's map the textual phrase

364
00:15:50,740 --> 00:15:53,080
so you are connected you are engaged for

365
00:15:53,080 --> 00:15:56,620
our mission for for among da like you

366
00:15:56,620 --> 00:15:59,680
say here you won't first map that extra

367
00:15:59,680 --> 00:16:00,880
face so you're plugged into the

368
00:16:00,880 --> 00:16:02,500
corporate network and you have a list of

369
00:16:02,500 --> 00:16:05,470
your own an IP of your target what you

370
00:16:05,470 --> 00:16:07,120
want to say first thing is you have to

371
00:16:07,120 --> 00:16:13,270
to figure out which topologies the your

372
00:16:13,270 --> 00:16:15,930
client is using so from our experience

373
00:16:15,930 --> 00:16:19,420
you have three topologies the first one

374
00:16:19,420 --> 00:16:21,160
is the whole exposed in the corporate

375
00:16:21,160 --> 00:16:23,260
network which can translate as no

376
00:16:23,260 --> 00:16:24,580
segregation and I don't give a

377
00:16:24,580 --> 00:16:28,360
about Network segregation this is a

378
00:16:28,360 --> 00:16:32,470
common stuff so here everything is just

379
00:16:32,470 --> 00:16:34,840
plugged on the network so if you are not

380
00:16:34,840 --> 00:16:36,400
occur you may be just on the same link

381
00:16:36,400 --> 00:16:38,920
ok that's as you can understand that a

382
00:16:38,920 --> 00:16:40,990
wide attack surface and there's a high

383
00:16:40,990 --> 00:16:43,600
probability of illegitimately access any

384
00:16:43,600 --> 00:16:46,540
steal anything that's good for you

385
00:16:46,540 --> 00:16:48,040
that's not that's not a good stuff for

386
00:16:48,040 --> 00:16:50,800
the company then you have a better

387
00:16:50,800 --> 00:16:55,390
approach most I would say less cost

388
00:16:55,390 --> 00:16:57,280
effective than the first but still from

389
00:16:57,280 --> 00:16:58,630
the security point of view it is cost

390
00:16:58,630 --> 00:16:59,110
effective

391
00:16:59,110 --> 00:17:01,600
you just have only necessary the

392
00:17:01,600 --> 00:17:04,569
end-user services exposed so you have

393
00:17:04,569 --> 00:17:07,740
Webbys as I said you cloud era you

394
00:17:07,740 --> 00:17:09,940
Jupiter the plane which are data

395
00:17:09,940 --> 00:17:12,280
consultation stuff from a browser that's

396
00:17:12,280 --> 00:17:15,369
it and you just have I haven't talked

397
00:17:15,369 --> 00:17:17,230
about edge not today edge not is just

398
00:17:17,230 --> 00:17:19,270
jump server do you know what is a jump

399
00:17:19,270 --> 00:17:22,089
server for classical administration and

400
00:17:22,089 --> 00:17:24,730
network stuff this is the best we can

401
00:17:24,730 --> 00:17:27,670
also call this a bastion so you have to

402
00:17:27,670 --> 00:17:30,130
authenticate on that server from that

403
00:17:30,130 --> 00:17:33,130
server you can bounce on any server on

404
00:17:33,130 --> 00:17:35,320
the internal side so an edge node is the

405
00:17:35,320 --> 00:17:37,690
same for data scientists who are the

406
00:17:37,690 --> 00:17:38,260
technologists

407
00:17:38,260 --> 00:17:40,330
people are that are using other clusters

408
00:17:40,330 --> 00:17:43,060
and they do need that you need a console

409
00:17:43,060 --> 00:17:45,190
a shell an SSH to perform some

410
00:17:45,190 --> 00:17:48,100
request and so on so here the network

411
00:17:48,100 --> 00:17:50,920
exposition is better just necessary

412
00:17:50,920 --> 00:17:53,410
stuff are exposed you don't have data

413
00:17:53,410 --> 00:17:55,720
nodes in name not on on directly on the

414
00:17:55,720 --> 00:17:58,000
corporate network so that exercise is

415
00:17:58,000 --> 00:18:00,370
really reduced and you must exploit some

416
00:18:00,370 --> 00:18:03,010
travel or default present shuttle or web

417
00:18:03,010 --> 00:18:05,800
minorities or I guess some outdated

418
00:18:05,800 --> 00:18:08,050
stuff from the edge nod which is a which

419
00:18:08,050 --> 00:18:09,570
can be a plain Linux or Windows server

420
00:18:09,570 --> 00:18:12,850
so it is better for security and then

421
00:18:12,850 --> 00:18:14,350
you have the island segregated from the

422
00:18:14,350 --> 00:18:17,470
copyrighted work okay I'm paranoid about

423
00:18:17,470 --> 00:18:20,140
security of a dupe and I don't want

424
00:18:20,140 --> 00:18:23,140
anyone to to leak any file contained on

425
00:18:23,140 --> 00:18:26,010
the aduke cluster which most likely

426
00:18:26,010 --> 00:18:29,050
Tara's hundreds of terrorists like

427
00:18:29,050 --> 00:18:33,030
almost Pita Pit out petabytes of data so

428
00:18:33,030 --> 00:18:36,310
here it is even more complicated what

429
00:18:36,310 --> 00:18:38,470
occurs you have to compromise first a

430
00:18:38,470 --> 00:18:41,680
real bastion a Citrix something you can

431
00:18:41,680 --> 00:18:43,990
just only have a keyboard and mouse on

432
00:18:43,990 --> 00:18:46,750
it and then you have the internal stuff

433
00:18:46,750 --> 00:18:48,580
of a dupe so the H node the web apps and

434
00:18:48,580 --> 00:18:50,470
so on but so you can understand that

435
00:18:50,470 --> 00:18:54,580
this this topologies gives you a minimal

436
00:18:54,580 --> 00:18:56,980
at extra phase so your scenario will

437
00:18:56,980 --> 00:19:01,600
have the least probability then so

438
00:19:01,600 --> 00:19:03,820
that's okay you figure out your figure

439
00:19:03,820 --> 00:19:05,860
out your topology you're stuck in your

440
00:19:05,860 --> 00:19:06,780
in AppScan

441
00:19:06,780 --> 00:19:11,170
in a group has a turn or shitload of pot

442
00:19:11,170 --> 00:19:13,450
and this is what you will see in this

443
00:19:13,450 --> 00:19:15,460
slide is a tiny example the the most

444
00:19:15,460 --> 00:19:17,170
necessary ports but this is a tiny

445
00:19:17,170 --> 00:19:19,720
extract so you have thoughts related to

446
00:19:19,720 --> 00:19:22,930
a GFS to yarn and some old stuff from

447
00:19:22,930 --> 00:19:23,620
MapReduce

448
00:19:23,620 --> 00:19:26,290
version 1 which if you can find this

449
00:19:26,290 --> 00:19:28,330
kind of sport it's again good news for

450
00:19:28,330 --> 00:19:30,670
you because it means that the cluster is

451
00:19:30,670 --> 00:19:33,370
quite old so quite outdated so you

452
00:19:33,370 --> 00:19:37,450
better enable the villages you can you

453
00:19:37,450 --> 00:19:40,500
will see here that's a good news for you

454
00:19:40,500 --> 00:19:43,180
so on the data on the name node you

455
00:19:43,180 --> 00:19:44,440
commonly find this and this kind of

456
00:19:44,440 --> 00:19:46,990
stuff which again I repeat is one or two

457
00:19:46,990 --> 00:19:49,540
server normal then for that a node which

458
00:19:49,540 --> 00:19:53,980
can be hundred thousand you have four

459
00:19:53,980 --> 00:19:56,860
GFS several ports again to transfer some

460
00:19:56,860 --> 00:19:57,880
data

461
00:19:57,880 --> 00:20:00,130
you have again some yarn and some other

462
00:20:00,130 --> 00:20:02,970
stuff for my producer my producer port

463
00:20:02,970 --> 00:20:07,480
so each each pot has a function to be

464
00:20:07,480 --> 00:20:10,090
fair from a network map and form a

465
00:20:10,090 --> 00:20:12,100
mapping point of view you have you have

466
00:20:12,100 --> 00:20:14,980
to find that that service is because it

467
00:20:14,980 --> 00:20:17,710
gives you a nice web UI you will see

468
00:20:17,710 --> 00:20:19,840
just after this is pretty convenient you

469
00:20:19,840 --> 00:20:21,850
have to find this service and for name

470
00:20:21,850 --> 00:20:23,530
not for that you have to find this

471
00:20:23,530 --> 00:20:24,760
service because again it gives you a

472
00:20:24,760 --> 00:20:29,230
nice web UI and because as you seen as I

473
00:20:29,230 --> 00:20:31,660
showed you in the first and the first

474
00:20:31,660 --> 00:20:34,210
night there's a lot of modules among

475
00:20:34,210 --> 00:20:35,650
that what you'll not every merger is

476
00:20:35,650 --> 00:20:37,600
interesting from a security model point

477
00:20:37,600 --> 00:20:38,020
of view

478
00:20:38,020 --> 00:20:41,130
only few are really interesting such as

479
00:20:41,130 --> 00:20:45,310
such a loose one so web is gfs you will

480
00:20:45,310 --> 00:20:47,950
see just after ways web ETFs Apache note

481
00:20:47,950 --> 00:20:50,350
that's the same for the remainder if you

482
00:20:50,350 --> 00:20:52,000
want to manage in to administer your

483
00:20:52,000 --> 00:20:54,070
cluster attached on bar read the same a

484
00:20:54,070 --> 00:20:56,620
passenger you want for Security

485
00:20:56,620 --> 00:20:58,140
Administration which is another topic

486
00:20:58,140 --> 00:21:00,610
cloud era you because it is an end user

487
00:21:00,610 --> 00:21:03,550
interface and you see because it's

488
00:21:03,550 --> 00:21:05,230
something related with job scheduling

489
00:21:05,230 --> 00:21:08,350
and job definition so that it can gives

490
00:21:08,350 --> 00:21:10,330
you access to to remote command

491
00:21:10,330 --> 00:21:14,890
execution from so you ready you have to

492
00:21:14,890 --> 00:21:18,250
find that you web UI here I can show you

493
00:21:18,250 --> 00:21:23,410
just now what what is this web UI so

494
00:21:23,410 --> 00:21:24,070
this is it

495
00:21:24,070 --> 00:21:26,500
you have several technical stuff so you

496
00:21:26,500 --> 00:21:30,790
can find here the version the topology I

497
00:21:30,790 --> 00:21:33,100
guess in that a node you can find here I

498
00:21:33,100 --> 00:21:36,010
just have for the most often proposed I

499
00:21:36,010 --> 00:21:38,260
just have anything in a fact package

500
00:21:38,260 --> 00:21:41,020
unique virtual machine but here you can

501
00:21:41,020 --> 00:21:44,860
find the capacities and you can find how

502
00:21:44,860 --> 00:21:46,570
much they how much capacity you can have

503
00:21:46,570 --> 00:21:48,340
on this cluster that very interesting

504
00:21:48,340 --> 00:21:50,560
any here we see just after but you can

505
00:21:50,560 --> 00:21:52,840
browse the file system because as I said

506
00:21:52,840 --> 00:21:55,240
HDFS is a PI system just like Linux but

507
00:21:55,240 --> 00:21:57,220
it is best to reach it and you can pass

508
00:21:57,220 --> 00:21:59,140
in browse and everything you can access

509
00:21:59,140 --> 00:22:01,690
any data here I have a permission denied

510
00:22:01,690 --> 00:22:06,040
you would see that this is not a border

511
00:22:06,040 --> 00:22:08,380
for you but still so you have to find

512
00:22:08,380 --> 00:22:11,020
this this web UI the other web UI are

513
00:22:11,020 --> 00:22:11,620
still

514
00:22:11,620 --> 00:22:16,210
a bit roots you can least sexy well

515
00:22:16,210 --> 00:22:18,790
you're here verb then you have technical

516
00:22:18,790 --> 00:22:21,070
stuff you cannot perform anything

517
00:22:21,070 --> 00:22:23,620
anything researching on this web UI but

518
00:22:23,620 --> 00:22:25,780
it gives you a lot of information it is

519
00:22:25,780 --> 00:22:28,510
they are meant to track jobs launched on

520
00:22:28,510 --> 00:22:30,340
the cluster is that for debugging stuff

521
00:22:30,340 --> 00:22:32,140
debugging and following your tribe or

522
00:22:32,140 --> 00:22:34,740
your job which are what is the stages

523
00:22:34,740 --> 00:22:39,040
appending ok successfully not honor but

524
00:22:39,040 --> 00:22:41,530
not other web UI you have to find this

525
00:22:41,530 --> 00:22:42,790
kind of web UI give you a lot of

526
00:22:42,790 --> 00:22:44,950
information about you know if it is a

527
00:22:44,950 --> 00:22:49,390
name node that a node and so on to ease

528
00:22:49,390 --> 00:22:50,370
the pain

529
00:22:50,370 --> 00:22:55,230
we developed some fingerprinting scripts

530
00:22:55,230 --> 00:22:59,170
added in head map a trunk that you can

531
00:22:59,170 --> 00:23:01,300
you can map easily and you can find

532
00:23:01,300 --> 00:23:03,760
easily this kind of services just with

533
00:23:03,760 --> 00:23:06,400
the HTTP onion a big script to begin the

534
00:23:06,400 --> 00:23:07,990
script so it gives you this kind of

535
00:23:07,990 --> 00:23:10,900
answer if this kind of output so you can

536
00:23:10,900 --> 00:23:14,050
easily see here just for one virtual

537
00:23:14,050 --> 00:23:16,179
machine so it doesn't reflect the rarity

538
00:23:16,179 --> 00:23:18,100
but still you will find for each pot

539
00:23:18,100 --> 00:23:20,800
what is the function of that service and

540
00:23:20,800 --> 00:23:23,559
where are you on the data node name node

541
00:23:23,559 --> 00:23:27,100
start Pattie stuff I don't know you also

542
00:23:27,100 --> 00:23:29,440
have some other scripts that we haven't

543
00:23:29,440 --> 00:23:32,670
developed for each Basin from a system

544
00:23:32,670 --> 00:23:35,650
then surfing the data rake it gets

545
00:23:35,650 --> 00:23:37,450
better so you are a bit that attacker

546
00:23:37,450 --> 00:23:39,400
what you want you want data how would

547
00:23:39,400 --> 00:23:40,929
like to access it through browser

548
00:23:40,929 --> 00:23:43,330
because you are lazy bastard like me so

549
00:23:43,330 --> 00:23:45,490
you have to use you want to use the web

550
00:23:45,490 --> 00:23:48,130
HDFS protocol what is what is DFS from

551
00:23:48,130 --> 00:23:51,220
you that's really simple it's a way to

552
00:23:51,220 --> 00:23:53,710
access web widget to access HDFS through

553
00:23:53,710 --> 00:23:57,040
a web browser that's a REST API to

554
00:23:57,040 --> 00:23:58,420
access anything and to perform any

555
00:23:58,420 --> 00:24:00,730
action on the data like that italic

556
00:24:00,730 --> 00:24:03,790
means the HDFS

557
00:24:03,790 --> 00:24:07,390
the HDFS filesystem from the fa space I

558
00:24:07,390 --> 00:24:10,059
guess where can you see some ways with

559
00:24:10,059 --> 00:24:13,300
HDFS services several port

560
00:24:13,300 --> 00:24:15,520
several modules always the saying you

561
00:24:15,520 --> 00:24:17,470
cannot you can call the API and access

562
00:24:17,470 --> 00:24:20,200
everything if it is in simple

563
00:24:20,200 --> 00:24:23,560
authentication mode use and okay now if

564
00:24:23,560 --> 00:24:25,480
the cluster only

565
00:24:25,480 --> 00:24:28,500
and forces simple authentication you and

566
00:24:28,500 --> 00:24:31,720
you can see this kind of services what

567
00:24:31,720 --> 00:24:35,080
you can do you just you can spoof any

568
00:24:35,080 --> 00:24:37,690
user you want with the user that name

569
00:24:37,690 --> 00:24:39,700
parameter that's not the bird that's

570
00:24:39,700 --> 00:24:41,799
another classification feature you can

571
00:24:41,799 --> 00:24:44,169
specify where any user you want in you

572
00:24:44,169 --> 00:24:45,490
will be that user because you're in

573
00:24:45,490 --> 00:24:47,530
simple of application that's easy as

574
00:24:47,530 --> 00:24:50,320
easy as as this so let's have some demo

575
00:24:50,320 --> 00:24:53,679
times so I'm just going back here so you

576
00:24:53,679 --> 00:24:55,750
can you can see there's some Tarachand

577
00:24:55,750 --> 00:24:58,299
denied okay I'm just browsing through

578
00:24:58,299 --> 00:25:00,940
the root so the web way so that's not

579
00:25:00,940 --> 00:25:02,320
pretty convenient I cannot perform

580
00:25:02,320 --> 00:25:03,610
anything you know you don't see any

581
00:25:03,610 --> 00:25:05,919
parameter here let's call the Latrell

582
00:25:05,919 --> 00:25:10,690
Pia so I'm just taking this and here

583
00:25:10,690 --> 00:25:14,200
this is very simple I want to access

584
00:25:14,200 --> 00:25:18,160
that slash user slash HDFS repository

585
00:25:18,160 --> 00:25:20,770
and space and the operation is these

586
00:25:20,770 --> 00:25:22,660
statues okay

587
00:25:22,660 --> 00:25:26,620
the permission is denied because I'm not

588
00:25:26,620 --> 00:25:28,840
really a fancy cated I'm Doctor Who

589
00:25:28,840 --> 00:25:30,640
which is a default user in a dupe I

590
00:25:30,640 --> 00:25:35,350
don't know why if you can if if there's

591
00:25:35,350 --> 00:25:37,600
simple application you can you can type

592
00:25:37,600 --> 00:25:40,809
what I'm tapping and say yeah so the

593
00:25:40,809 --> 00:25:43,720
folder belongs to HDFS you know that's

594
00:25:43,720 --> 00:25:47,020
playing Linux I see a POSIX edge here so

595
00:25:47,020 --> 00:25:51,669
I'll be HDFS ok I can access everything

596
00:25:51,669 --> 00:25:54,760
that's that's simple as this so you can

597
00:25:54,760 --> 00:25:57,640
here you can find some some facts so I

598
00:25:57,640 --> 00:26:01,179
do have I do have a quest file you will

599
00:26:01,179 --> 00:26:03,040
see the content just after but here it

600
00:26:03,040 --> 00:26:05,470
works so I just can I can specify this

601
00:26:05,470 --> 00:26:11,679
GFS that's as simple as this from from I

602
00:26:11,679 --> 00:26:12,460
guess so

603
00:26:12,460 --> 00:26:15,880
from the HTTP version that's it we

604
00:26:15,880 --> 00:26:17,980
created the damn script named HDFS

605
00:26:17,980 --> 00:26:20,350
browser in order to list everything that

606
00:26:20,350 --> 00:26:22,570
you know in simple application it will

607
00:26:22,570 --> 00:26:25,299
automatically of field we use on and is

608
00:26:25,299 --> 00:26:26,890
all that name parameter and we'll give

609
00:26:26,890 --> 00:26:29,110
you a nice field we list says we are

610
00:26:29,110 --> 00:26:32,650
free of the repository now if you want

611
00:26:32,650 --> 00:26:35,080
to do the same through three CLI because

612
00:26:35,080 --> 00:26:38,799
Hadoop and the beginning in less than s

613
00:26:38,799 --> 00:26:39,430
but

614
00:26:39,430 --> 00:26:41,320
everything was in July and you have

615
00:26:41,320 --> 00:26:43,750
native added science you can perform the

616
00:26:43,750 --> 00:26:46,450
same you just have to export the

617
00:26:46,450 --> 00:26:47,620
environment virap

618
00:26:47,620 --> 00:26:51,190
viable that's the same so let's see here

619
00:26:51,190 --> 00:26:53,890
I'm just I'm from I'm from the attacking

620
00:26:53,890 --> 00:26:58,660
machine I can say I do just let me check

621
00:26:58,660 --> 00:27:06,370
the list attacks okay that command we

622
00:27:06,370 --> 00:27:09,370
just try to to display the access file

623
00:27:09,370 --> 00:27:11,560
I haven't specified in user name and

624
00:27:11,560 --> 00:27:15,010
what does it say it's a permission did I

625
00:27:15,010 --> 00:27:17,170
because I'm currently root the root user

626
00:27:17,170 --> 00:27:19,930
of my Linux attacking stuff I'm not the

627
00:27:19,930 --> 00:27:22,170
good guy I'm not the HDFS guy so okay

628
00:27:22,170 --> 00:27:25,000
that's not that's not the broader I just

629
00:27:25,000 --> 00:27:26,950
have to input a dupe username bigger

630
00:27:26,950 --> 00:27:33,190
equal HDFS and talam arrow at rest so

631
00:27:33,190 --> 00:27:35,110
that's the same again that's not a

632
00:27:35,110 --> 00:27:37,800
security vulnerability that's a feature

633
00:27:37,800 --> 00:27:39,790
because you're in simple ossification

634
00:27:39,790 --> 00:27:46,750
let's move on so with this kind of stuff

635
00:27:46,750 --> 00:27:48,280
you are pretty happy because you can

636
00:27:48,280 --> 00:27:51,730
browse any any data in your folder you

637
00:27:51,730 --> 00:27:54,400
can you want and on a GFS but you can do

638
00:27:54,400 --> 00:27:54,850
better

639
00:27:54,850 --> 00:27:58,600
remember Hadoop is a framework to store

640
00:27:58,600 --> 00:28:00,610
and process data processing mean

641
00:28:00,610 --> 00:28:03,190
executing some code executing some code

642
00:28:03,190 --> 00:28:05,560
for an attacker it means I won't execute

643
00:28:05,560 --> 00:28:08,110
am interpreter or whatever I want so if

644
00:28:08,110 --> 00:28:09,940
there are simple application and you can

645
00:28:09,940 --> 00:28:14,080
find the correct services which are not

646
00:28:14,080 --> 00:28:16,690
the wavy GFS one which are author a

647
00:28:16,690 --> 00:28:19,650
which are named IPC inter-process

648
00:28:19,650 --> 00:28:22,690
communication services you can execute

649
00:28:22,690 --> 00:28:26,620
freely any comment on on encruster

650
00:28:26,620 --> 00:28:29,110
through MapReduce jobs the question is

651
00:28:29,110 --> 00:28:32,590
how can i specify MapReduce job I don't

652
00:28:32,590 --> 00:28:34,270
want to write any Java code because you

653
00:28:34,270 --> 00:28:36,460
know like me Java is a pain Java slow

654
00:28:36,460 --> 00:28:40,000
and Java is ugly so I would like to use

655
00:28:40,000 --> 00:28:43,570
there's an tiny utility named a dupe

656
00:28:43,570 --> 00:28:46,420
streaming what's the function was equal

657
00:28:46,420 --> 00:28:49,240
of the auditioning is to create and run

658
00:28:49,240 --> 00:28:51,520
MapReduce jobs with any executable

659
00:28:51,520 --> 00:28:52,830
script as

660
00:28:52,830 --> 00:28:55,590
or and all the reducer so I won't fight

661
00:28:55,590 --> 00:28:58,530
I won't write any Java code I just can

662
00:28:58,530 --> 00:29:00,300
input everything I want so the command

663
00:29:00,300 --> 00:29:02,870
is here so you just have to specify the

664
00:29:02,870 --> 00:29:06,000
path on your local machine to the Hadoop

665
00:29:06,000 --> 00:29:07,950
streaming job you have an input file and

666
00:29:07,950 --> 00:29:09,780
not put five a mapper reducer so

667
00:29:09,780 --> 00:29:12,720
technically this camera will lodge a

668
00:29:12,720 --> 00:29:14,150
MapReduce job

669
00:29:14,150 --> 00:29:17,160
these checks for the job result because

670
00:29:17,160 --> 00:29:19,260
that's the trickiest part here is when

671
00:29:19,260 --> 00:29:21,450
you execute a task you don't have some

672
00:29:21,450 --> 00:29:23,790
outputs which everything is written and

673
00:29:23,790 --> 00:29:27,660
read in fact so you have to to cut some

674
00:29:27,660 --> 00:29:29,910
output files you don't have the direct

675
00:29:29,910 --> 00:29:31,860
answer honestly out it doesn't exist so

676
00:29:31,860 --> 00:29:34,380
you have to check that the output file

677
00:29:34,380 --> 00:29:36,060
is created and then you have to cut the

678
00:29:36,060 --> 00:29:40,460
file through a dupe FS cat information

679
00:29:40,460 --> 00:29:43,860
so that's okay I can I can execute any

680
00:29:43,860 --> 00:29:45,840
criminal I want that's a good point

681
00:29:45,840 --> 00:29:48,150
but now I want to for for convenience I

682
00:29:48,150 --> 00:29:49,440
want to execute a metal plate or

683
00:29:49,440 --> 00:29:53,100
something from Metasploit with the metro

684
00:29:53,100 --> 00:29:54,750
critter you have session session ending

685
00:29:54,750 --> 00:29:56,970
which is really convenient again for as

686
00:29:56,970 --> 00:29:59,550
an attacker you cannot you can use

687
00:29:59,550 --> 00:30:02,010
instead of the bin cat it's password

688
00:30:02,010 --> 00:30:03,810
here you can specify your own

689
00:30:03,810 --> 00:30:06,440
meterpreter file your own payload but

690
00:30:06,440 --> 00:30:09,600
for some reasons unknown reasons and

691
00:30:09,600 --> 00:30:12,840
none another effort sometimes meta free

692
00:30:12,840 --> 00:30:14,790
table doesn't work so you just you just

693
00:30:14,790 --> 00:30:17,340
have to use a plain shell reverse TCP

694
00:30:17,340 --> 00:30:19,110
payload it works the same but you don't

695
00:30:19,110 --> 00:30:22,200
have the six years mr. pritter Agha so I

696
00:30:22,200 --> 00:30:24,030
won't explain you how to generate a

697
00:30:24,030 --> 00:30:26,490
pillowed on your attacking machine you

698
00:30:26,490 --> 00:30:28,740
just have to set up some stuff so me

699
00:30:28,740 --> 00:30:30,330
either me chip return or just shell

700
00:30:30,330 --> 00:30:34,410
slash reverse TCP so technically this

701
00:30:34,410 --> 00:30:36,690
can on again with the loop trimming you

702
00:30:36,690 --> 00:30:38,430
have a file this time you don't input a

703
00:30:38,430 --> 00:30:40,200
command you in you have to upload a file

704
00:30:40,200 --> 00:30:42,630
first you have the file option to send

705
00:30:42,630 --> 00:30:45,900
your payload on the server not for

706
00:30:45,900 --> 00:30:48,840
assert you have to again it will start

707
00:30:48,840 --> 00:30:52,080
it will execute your payload but there's

708
00:30:52,080 --> 00:30:53,280
the time I would value you know you

709
00:30:53,280 --> 00:30:56,700
cannot execute things for eternally I

710
00:30:56,700 --> 00:30:59,670
could guess so you have to type the -

711
00:30:59,670 --> 00:31:03,060
background option because just in order

712
00:31:03,060 --> 00:31:04,440
to start the job without without

713
00:31:04,440 --> 00:31:06,340
finishing for its completion

714
00:31:06,340 --> 00:31:09,580
let's have a demo time so you will see

715
00:31:09,580 --> 00:31:14,139
with this demo that's no be that is not

716
00:31:14,139 --> 00:31:20,409
fast so here I won't you on

717
00:31:20,409 --> 00:31:22,659
your on your attacking machine you set

718
00:31:22,659 --> 00:31:26,169
up your meter spell stuff so I do I use

719
00:31:26,169 --> 00:31:28,779
the rivers TCP or payload

720
00:31:28,779 --> 00:31:31,359
I'm just saying up my IP I'm just

721
00:31:31,359 --> 00:31:33,070
starting there's nothing interesting

722
00:31:33,070 --> 00:31:36,549
here here I will launch that command the

723
00:31:36,549 --> 00:31:39,429
command I showed you more trusted

724
00:31:39,429 --> 00:31:42,849
because just to use the tool to hope

725
00:31:42,849 --> 00:31:45,339
that the demo God will be with me just

726
00:31:45,339 --> 00:31:50,139
typing the config file inputting the jar

727
00:31:50,139 --> 00:31:52,289
the jar file auditioning nothing new

728
00:31:52,289 --> 00:31:55,659
giving the ver shot giving the inputs I

729
00:31:55,659 --> 00:31:58,629
have to give anonymity inputs in order

730
00:31:58,629 --> 00:32:00,099
to process a job when I hope that's it

731
00:32:00,099 --> 00:32:03,099
so I'm giving the LOA quest file I will

732
00:32:03,099 --> 00:32:05,139
I want to write the research in whatever

733
00:32:05,139 --> 00:32:08,139
file I don't care and I just want to add

734
00:32:08,139 --> 00:32:11,289
a mapper executors emissive payload as

735
00:32:11,289 --> 00:32:13,539
an and I'm I am in attacker and not a

736
00:32:13,539 --> 00:32:15,070
real data scientist I don't care about

737
00:32:15,070 --> 00:32:16,809
reducer I don't want you know the full

738
00:32:16,809 --> 00:32:18,639
map rule MapReduce algorithm I don't

739
00:32:18,639 --> 00:32:20,859
care about searching sorting out and

740
00:32:20,859 --> 00:32:22,929
merging some kids I don't care just want

741
00:32:22,929 --> 00:32:24,700
my interpreter to be executed so I'm

742
00:32:24,700 --> 00:32:28,389
sending my pill out here and now I just

743
00:32:28,389 --> 00:32:31,409
have to wait so I'm sending my my job

744
00:32:31,409 --> 00:32:34,629
here I'm waiting let's hope for the

745
00:32:34,629 --> 00:32:38,049
reverse shell to come what can I do just

746
00:32:38,049 --> 00:32:40,690
for demonstration purposes is just to

747
00:32:40,690 --> 00:32:43,779
show on the server side obviously as an

748
00:32:43,779 --> 00:32:45,039
attacker you don't have access to this

749
00:32:45,039 --> 00:32:47,349
kind of information but just to monitor

750
00:32:47,349 --> 00:32:49,059
the execution you will see that it is

751
00:32:49,059 --> 00:32:51,690
not very fast

752
00:32:51,690 --> 00:32:54,489
and here I just monitor that the job is

753
00:32:54,489 --> 00:32:59,409
very created okay but still not

754
00:32:59,409 --> 00:33:01,210
processed so I will go on on the

755
00:33:01,210 --> 00:33:03,039
presentation I would just come back in

756
00:33:03,039 --> 00:33:07,359
few minutes and to see if my shell came

757
00:33:07,359 --> 00:33:10,149
on it just checking out now now still

758
00:33:10,149 --> 00:33:14,488
not so

759
00:33:14,560 --> 00:33:17,110
the important thing to understand is

760
00:33:17,110 --> 00:33:19,510
that due to the distributed nature of a

761
00:33:19,510 --> 00:33:21,700
MapReduce job MapReduce was invented to

762
00:33:21,700 --> 00:33:24,220
distribute some tasks among a cluster to

763
00:33:24,220 --> 00:33:26,470
use the most resource you can you can

764
00:33:26,470 --> 00:33:29,710
have it is not possible to specify a

765
00:33:29,710 --> 00:33:32,140
specific target you know a specific

766
00:33:32,140 --> 00:33:34,150
server a specific node of the cluster

767
00:33:34,150 --> 00:33:36,940
you want to execute code on it so you're

768
00:33:36,940 --> 00:33:38,380
just launching your job you don't know

769
00:33:38,380 --> 00:33:41,200
where it will end anyway on one at one

770
00:33:41,200 --> 00:33:43,780
of the data node but you cannot specify

771
00:33:43,780 --> 00:33:47,260
that limitation that can be that can be

772
00:33:47,260 --> 00:33:50,650
harsh in certain situation so so the

773
00:33:50,650 --> 00:33:52,870
prerequisites for the attack I showed

774
00:33:52,870 --> 00:33:54,820
you and I hope I will have my shell just

775
00:33:54,820 --> 00:33:57,190
after is to have a working and complete

776
00:33:57,190 --> 00:33:59,500
crystal configuration on client side on

777
00:33:59,500 --> 00:34:01,720
your machine this is not a limitation

778
00:34:01,720 --> 00:34:04,930
because if you request slash come from

779
00:34:04,930 --> 00:34:09,100
any web UI I can show you here any

780
00:34:09,100 --> 00:34:13,239
native iwi spits the configuration

781
00:34:13,239 --> 00:34:16,899
that's not a security problem it is I am

782
00:34:16,899 --> 00:34:19,540
I never found any secret here it is not

783
00:34:19,540 --> 00:34:21,850
the place to to store some secret some

784
00:34:21,850 --> 00:34:25,000
passwords young young if you can find

785
00:34:25,000 --> 00:34:27,870
really interested because they it's it

786
00:34:27,870 --> 00:34:31,149
translate a real problem but it's not

787
00:34:31,149 --> 00:34:32,320
you're not supposed to find any

788
00:34:32,320 --> 00:34:33,370
interesting stuff in here

789
00:34:33,370 --> 00:34:35,350
this is just for connecting and for

790
00:34:35,350 --> 00:34:37,239
topology stuff nothing very interesting

791
00:34:37,239 --> 00:34:43,239
Oh so let's let's move back to our meta

792
00:34:43,239 --> 00:34:44,500
Prieta here

793
00:34:44,500 --> 00:34:46,540
I received my my job is i've been

794
00:34:46,540 --> 00:34:50,100
executed and what do I have here a shell

795
00:34:50,100 --> 00:34:55,418
as I am in simple ossification I'm by

796
00:34:55,418 --> 00:34:57,790
default the young user John is the

797
00:34:57,790 --> 00:34:59,740
operating system is leaking some tasks

798
00:34:59,740 --> 00:35:03,610
so um I'm this user if there were cables

799
00:35:03,610 --> 00:35:06,370
enforced on this cluster I would be the

800
00:35:06,370 --> 00:35:08,830
user I would pretend to be so I wouldn't

801
00:35:08,830 --> 00:35:10,750
need a key tab at fabulous key tab and I

802
00:35:10,750 --> 00:35:13,930
would be that user so here um Yanni's

803
00:35:13,930 --> 00:35:18,220
has a lot of right and privileges on on

804
00:35:18,220 --> 00:35:20,110
the machine so if you have this kind of

805
00:35:20,110 --> 00:35:22,120
user we can perform a again it's game

806
00:35:22,120 --> 00:35:23,950
over on the cluster you just executed

807
00:35:23,950 --> 00:35:25,360
your meterpreter in your stuff on the

808
00:35:25,360 --> 00:35:26,050
cluster

809
00:35:26,050 --> 00:35:26,890
game over

810
00:35:26,890 --> 00:35:29,660
so I just show you with it

811
00:35:29,660 --> 00:35:31,820
Who am I so I'm I'm young I do have a

812
00:35:31,820 --> 00:35:35,870
and I do have a share that's cool so for

813
00:35:35,870 --> 00:35:38,810
the configuration either you input slash

814
00:35:38,810 --> 00:35:41,600
come from any web UI oh you can find

815
00:35:41,600 --> 00:35:43,820
some there some vulnerabilities on

816
00:35:43,820 --> 00:35:47,540
certain and management platforms such as

817
00:35:47,540 --> 00:35:49,550
flow there are manager you can download

818
00:35:49,550 --> 00:35:52,610
if you cannot for some reason see the

819
00:35:52,610 --> 00:35:56,270
service here you can you can if you can

820
00:35:56,270 --> 00:35:59,330
see the federal manager you can use that

821
00:35:59,330 --> 00:36:00,770
Verner in order to download the

822
00:36:00,770 --> 00:36:03,350
configuration file so that's not again

823
00:36:03,350 --> 00:36:06,040
that's not the limitation as an attacker

824
00:36:06,040 --> 00:36:09,470
as we want convenience again we

825
00:36:09,470 --> 00:36:11,270
developed a dumb script again to

826
00:36:11,270 --> 00:36:13,220
retrieve a minimum configuration from

827
00:36:13,220 --> 00:36:15,890
for iterating interacting with another

828
00:36:15,890 --> 00:36:18,500
cluster you would see at the end we

829
00:36:18,500 --> 00:36:20,450
documented everything so don't worry you

830
00:36:20,450 --> 00:36:22,580
will have any script you want the thing

831
00:36:22,580 --> 00:36:25,400
is you need this case three files in

832
00:36:25,400 --> 00:36:28,010
order to interact with call site map

833
00:36:28,010 --> 00:36:30,080
read site and eunsang not to to be able

834
00:36:30,080 --> 00:36:31,910
to execute your your your stuff on the

835
00:36:31,910 --> 00:36:36,770
cluster you can say ok that's cool but

836
00:36:36,770 --> 00:36:39,590
come on who exposes such services anyway

837
00:36:39,590 --> 00:36:42,260
because as I showed you you have to see

838
00:36:42,260 --> 00:36:44,030
some specific services and you can be

839
00:36:44,030 --> 00:36:46,370
doubtful now just to say yeah but

840
00:36:46,370 --> 00:36:48,080
everyone is doing Network segregation

841
00:36:48,080 --> 00:36:51,920
and I won't find any internet cluster

842
00:36:51,920 --> 00:36:54,290
based on a loop that's course if you can

843
00:36:54,290 --> 00:36:56,810
put some shot and stuff just look at the

844
00:36:56,810 --> 00:36:59,150
results I don't know if you can see but

845
00:36:59,150 --> 00:37:02,390
with that simple pot that simple pot is

846
00:37:02,390 --> 00:37:05,240
the word uija showed you just before you

847
00:37:05,240 --> 00:37:06,920
can find a lot of stuff on at least on

848
00:37:06,920 --> 00:37:12,800
show them again and now we show them is

849
00:37:12,800 --> 00:37:15,800
good but we perform not as kind of poor

850
00:37:15,800 --> 00:37:17,810
the internet I would like to but I have

851
00:37:17,810 --> 00:37:20,690
to I will I will - I will have to scan

852
00:37:20,690 --> 00:37:23,000
the entire internet for a do cluster but

853
00:37:23,000 --> 00:37:27,470
we quickly discovered almost 200 I do

854
00:37:27,470 --> 00:37:28,970
cluster on the Internet freely

855
00:37:28,970 --> 00:37:32,480
accessible so what what do I mean by

856
00:37:32,480 --> 00:37:35,050
freely accessible I mean that I can

857
00:37:35,050 --> 00:37:37,100
retrieve any data on it and execute

858
00:37:37,100 --> 00:37:38,410
anything I want on it

859
00:37:38,410 --> 00:37:40,250
so because

860
00:37:40,250 --> 00:37:45,130
why can i anything on it on this cluster

861
00:37:45,130 --> 00:37:50,150
among the 185 cluster found in the

862
00:37:50,150 --> 00:37:52,490
internet that's a real real quick scan

863
00:37:52,490 --> 00:37:55,520
real quick the quickest can ever you can

864
00:37:55,520 --> 00:37:58,670
see the security of application so for

865
00:37:58,670 --> 00:38:01,070
the hot majority is simple simple means

866
00:38:01,070 --> 00:38:03,590
nothing important it's game over simple

867
00:38:03,590 --> 00:38:05,870
means we can execute anything on it you

868
00:38:05,870 --> 00:38:07,550
can execute a botnet you can exit you

869
00:38:07,550 --> 00:38:09,590
can store some fight some terabytes of

870
00:38:09,590 --> 00:38:12,830
file on it for five cluster we found

871
00:38:12,830 --> 00:38:15,380
them they were enforcing Kerberos which

872
00:38:15,380 --> 00:38:18,680
isn't a tiny figure but still the same

873
00:38:18,680 --> 00:38:22,280
and more importantly on the on the five

874
00:38:22,280 --> 00:38:27,560
cable roast cable rised cluster zero

875
00:38:27,560 --> 00:38:30,770
we're enforcing Kerberos from end to end

876
00:38:30,770 --> 00:38:33,500
even and the cameras cluster we could

877
00:38:33,500 --> 00:38:37,310
find that for HTTP MTF verses they were

878
00:38:37,310 --> 00:38:40,040
in simple authentication so still again

879
00:38:40,040 --> 00:38:43,280
okay thank you so still as not security

880
00:38:43,280 --> 00:38:48,290
and this is in the news in see if you

881
00:38:48,290 --> 00:38:51,470
don't secure I'd open the Internet there

882
00:38:51,470 --> 00:38:54,110
will be some guy deleting it or putting

883
00:38:54,110 --> 00:38:56,740
putting a Russian one somewhere on this

884
00:38:56,740 --> 00:39:00,020
run some encrypting petabytes of file

885
00:39:00,020 --> 00:39:02,420
does exist and on the internet for open

886
00:39:02,420 --> 00:39:07,190
a new cluster so now another vector to

887
00:39:07,190 --> 00:39:09,680
attack her another cluster is to exploit

888
00:39:09,680 --> 00:39:12,980
travel Verena rages on a dupe cluster I

889
00:39:12,980 --> 00:39:15,620
do is call it in Java is an open source

890
00:39:15,620 --> 00:39:17,390
project developers are not really

891
00:39:17,390 --> 00:39:20,510
sensitive to security so what can what

892
00:39:20,510 --> 00:39:24,020
do you expect the narrative for a

893
00:39:24,020 --> 00:39:26,870
specific for specific version don't

894
00:39:26,870 --> 00:39:29,570
don't think that it is ten years ago no

895
00:39:29,570 --> 00:39:32,330
this is very current and under specific

896
00:39:32,330 --> 00:39:33,880
conditions

897
00:39:33,880 --> 00:39:36,110
loop you have a nice privilege

898
00:39:36,110 --> 00:39:39,080
escalation vulnerable or ridiculous one

899
00:39:39,080 --> 00:39:41,140
I would just show you just a just after

900
00:39:41,140 --> 00:39:47,360
if if the cluster use the property shell

901
00:39:47,360 --> 00:39:51,110
based unique group mapping as the group

902
00:39:51,110 --> 00:39:53,590
mapping feature

903
00:39:53,590 --> 00:39:57,340
this is very horrible to that CV that

904
00:39:57,340 --> 00:39:59,870
cofunction is used is called for each

905
00:39:59,870 --> 00:40:02,060
user action on the cluster so when you

906
00:40:02,060 --> 00:40:04,760
want to add to to into download to a

907
00:40:04,760 --> 00:40:06,620
Prada fight to execute some stuff it

908
00:40:06,620 --> 00:40:09,350
will ask first that function if you are

909
00:40:09,350 --> 00:40:11,810
the right user or not that right user is

910
00:40:11,810 --> 00:40:15,230
that function that shell based unique

911
00:40:15,230 --> 00:40:17,750
stuff is vulnerable there's another

912
00:40:17,750 --> 00:40:20,480
implementation which is based on Java

913
00:40:20,480 --> 00:40:23,320
native interfaces so as a su code

914
00:40:23,320 --> 00:40:26,750
compiled in in an elf binary it's not

915
00:40:26,750 --> 00:40:28,600
vulnerable

916
00:40:28,600 --> 00:40:31,970
can you spot the variety here so you

917
00:40:31,970 --> 00:40:33,860
have a common name HDFS groups something

918
00:40:33,860 --> 00:40:38,260
and the something is the user no escape

919
00:40:38,260 --> 00:40:41,690
so if you are an unprivileged user you

920
00:40:41,690 --> 00:40:44,360
type that current that command is

921
00:40:44,360 --> 00:40:49,160
executed as HDFS IGFs is not the root

922
00:40:49,160 --> 00:40:51,710
user on the UNIX system is the root user

923
00:40:51,710 --> 00:40:54,380
on a Hadoop file system which is even

924
00:40:54,380 --> 00:40:54,620
worse

925
00:40:54,620 --> 00:40:57,020
to be fair so which with the IGFs user

926
00:40:57,020 --> 00:40:58,460
you can access everything and perform

927
00:40:58,460 --> 00:41:00,500
anything you want so here I was an

928
00:41:00,500 --> 00:41:02,780
unprivileged user and I'm going to be

929
00:41:02,780 --> 00:41:06,200
HDFS so remember HDFS is not is the real

930
00:41:06,200 --> 00:41:09,020
root user of the filesystem we are not

931
00:41:09,020 --> 00:41:10,730
the finder we just documented the

932
00:41:10,730 --> 00:41:11,990
exploit

933
00:41:11,990 --> 00:41:14,480
even though Apache Hadoop is a open

934
00:41:14,480 --> 00:41:16,400
source stuff they are not ready fair and

935
00:41:16,400 --> 00:41:18,500
on documenting some stuff so we wanted

936
00:41:18,500 --> 00:41:22,720
to document this let's have a demo now

937
00:41:22,720 --> 00:41:24,920
now that you have your shell

938
00:41:24,920 --> 00:41:27,920
I will just here

939
00:41:27,920 --> 00:41:32,120
make it here for convenience I'll be a

940
00:41:32,120 --> 00:41:35,060
plain user Toto no privilege ever

941
00:41:35,060 --> 00:41:38,450
nothing I cannot perform anything I'm

942
00:41:38,450 --> 00:41:41,510
not rude I didn't have anything yes with

943
00:41:41,510 --> 00:41:44,810
just that come on I'm triggering the

944
00:41:44,810 --> 00:41:47,720
Vanara G here I will try to see which

945
00:41:47,720 --> 00:41:52,550
user an ID so you recognize the exploit

946
00:41:52,550 --> 00:41:55,730
I showed you just before so let's check

947
00:41:55,730 --> 00:42:02,210
a my HDFS yeah I am HDFS I was to talk

948
00:42:02,210 --> 00:42:04,850
and I have the the privileges of HDFS

949
00:42:04,850 --> 00:42:06,590
this is ridiculous

950
00:42:06,590 --> 00:42:10,520
in that clear to you the the most

951
00:42:10,520 --> 00:42:14,330
ridiculous he ever I guess so as you

952
00:42:14,330 --> 00:42:16,340
would say okay so your condition was to

953
00:42:16,340 --> 00:42:18,110
be unchecked based unique group stuff

954
00:42:18,110 --> 00:42:20,960
okay but it is not the default value in

955
00:42:20,960 --> 00:42:23,240
the documentation so on the internet I

956
00:42:23,240 --> 00:42:25,040
will not find in cluster with it which

957
00:42:25,040 --> 00:42:27,290
is not the deferred stuff come on again

958
00:42:27,290 --> 00:42:29,720
some figures from our own study showed

959
00:42:29,720 --> 00:42:32,060
that if you want purple you have

960
00:42:32,060 --> 00:42:34,580
vulnerable to this flow currently so you

961
00:42:34,580 --> 00:42:36,380
have some real figures and I don't know

962
00:42:36,380 --> 00:42:38,380
why I cannot explain why there's

963
00:42:38,380 --> 00:42:41,180
one-third of the fun stuff which is

964
00:42:41,180 --> 00:42:43,010
using not the different value I don't

965
00:42:43,010 --> 00:42:48,250
know then you still have if you are not

966
00:42:48,250 --> 00:42:50,540
not if this kind of run is not

967
00:42:50,540 --> 00:42:52,310
sufficient you asked to attack

968
00:42:52,310 --> 00:42:54,470
third-party modules Apache Ranger

969
00:42:54,470 --> 00:42:56,630
security module the only security module

970
00:42:56,630 --> 00:43:00,200
ever remember to this complicated

971
00:43:00,200 --> 00:43:04,400
Vernor eg in 2016

972
00:43:04,400 --> 00:43:07,190
so for post exploit stuff you can

973
00:43:07,190 --> 00:43:09,440
diffuse a credential okay thank you

974
00:43:09,440 --> 00:43:11,210
you can dump user credentials that's

975
00:43:11,210 --> 00:43:12,770
good but not very interesting or just

976
00:43:12,770 --> 00:43:14,840
dumb decision cookies and still and

977
00:43:14,840 --> 00:43:16,850
impersonate the people so that's better

978
00:43:16,850 --> 00:43:18,470
I don't have to track anything I don't

979
00:43:18,470 --> 00:43:19,910
want to spend spending energy from the

980
00:43:19,910 --> 00:43:22,550
planet to waste energy for the planet so

981
00:43:22,550 --> 00:43:26,000
just raise the cookie again a passenger

982
00:43:26,000 --> 00:43:28,340
was a secure is a security module for

983
00:43:28,340 --> 00:43:29,810
cloud there are you another vector which

984
00:43:29,810 --> 00:43:33,770
is R interesting most of the time an

985
00:43:33,770 --> 00:43:36,830
edge node is deployed for as I said to

986
00:43:36,830 --> 00:43:38,360
you that has some data scientist to

987
00:43:38,360 --> 00:43:40,190
access the cluster most of the time

988
00:43:40,190 --> 00:43:42,380
cloud are you is installed on the edge

989
00:43:42,380 --> 00:43:45,800
node which is a wrong or wrong design

990
00:43:45,800 --> 00:43:48,650
consideration because there are two

991
00:43:48,650 --> 00:43:51,020
unfixed still unfixed virologist for

992
00:43:51,020 --> 00:43:54,320
fedora you you will see I'm just I'm not

993
00:43:54,320 --> 00:43:56,120
even reading this you can steal any

994
00:43:56,120 --> 00:43:58,940
cookie of any people on failure are you

995
00:43:58,940 --> 00:44:01,970
end user because the you that any

996
00:44:01,970 --> 00:44:03,800
configuration file is readable for

997
00:44:03,800 --> 00:44:06,890
anyone so in this kind of value have

998
00:44:06,890 --> 00:44:11,480
database is the table sees credential in

999
00:44:11,480 --> 00:44:13,610
this credential in these databases you

1000
00:44:13,610 --> 00:44:16,070
what what you will find again session

1001
00:44:16,070 --> 00:44:18,620
cookie I think it's ready to Python

1002
00:44:18,620 --> 00:44:19,620
jungle it's not

1003
00:44:19,620 --> 00:44:21,000
even related to Claire are you I don't

1004
00:44:21,000 --> 00:44:23,130
know maybe there's it's been one year

1005
00:44:23,130 --> 00:44:24,990
I'm saying this but maybe this is a zero

1006
00:44:24,990 --> 00:44:27,780
teen Python jungle for the storing

1007
00:44:27,780 --> 00:44:29,820
because the first one the first variant

1008
00:44:29,820 --> 00:44:32,490
is okay not to read the the fight falls

1009
00:44:32,490 --> 00:44:33,930
off or the you dot ini' configuration

1010
00:44:33,930 --> 00:44:36,840
but but the second one is to store the

1011
00:44:36,840 --> 00:44:38,060
cookie I don't understand why people

1012
00:44:38,060 --> 00:44:41,340
stop session cooking databases I don't

1013
00:44:41,340 --> 00:44:41,880
understand

1014
00:44:41,880 --> 00:44:45,600
so still you can spoof end-user stealing

1015
00:44:45,600 --> 00:44:48,990
is cookie and trust me or not

1016
00:44:48,990 --> 00:44:50,480
and the is Eartha there are officially

1017
00:44:50,480 --> 00:44:52,970
uncertainties renovate is no fix them

1018
00:44:52,970 --> 00:44:55,920
mitigation and set the rich for the rich

1019
00:44:55,920 --> 00:44:58,410
father you that any permission okay and

1020
00:44:58,410 --> 00:45:01,170
more importantly do not deploy cloud era

1021
00:45:01,170 --> 00:45:03,720
you on an edge not just not because I'm

1022
00:45:03,720 --> 00:45:05,520
not bullshitting you I'm just showing

1023
00:45:05,520 --> 00:45:07,590
you from the sherry here

1024
00:45:07,590 --> 00:45:11,490
oh the shell terminated okay I'm just if

1025
00:45:11,490 --> 00:45:15,600
we will input it here it's not a made-up

1026
00:45:15,600 --> 00:45:16,310
linearity

1027
00:45:16,310 --> 00:45:19,380
the the you that any file is still

1028
00:45:19,380 --> 00:45:21,510
readable for anyone so here you can find

1029
00:45:21,510 --> 00:45:26,250
some password I think it's in the

1030
00:45:26,250 --> 00:45:30,660
beginning yeah you you do have you do

1031
00:45:30,660 --> 00:45:33,600
have a lot of stuff on it so still on

1032
00:45:33,600 --> 00:45:37,320
fix okay and last but not least our most

1033
00:45:37,320 --> 00:45:41,220
elite attack is that command I can

1034
00:45:41,220 --> 00:45:43,650
understand we are it works every time

1035
00:45:43,650 --> 00:45:46,410
most of the time it works every time it

1036
00:45:46,410 --> 00:45:48,510
you can we are searching for key tap

1037
00:45:48,510 --> 00:45:51,180
file for Kerberos files which are read

1038
00:45:51,180 --> 00:45:54,120
for readable for author and in real life

1039
00:45:54,120 --> 00:45:56,910
it gives you that kind of results so you

1040
00:45:56,910 --> 00:45:58,920
don't have to exploit anything no no

1041
00:45:58,920 --> 00:46:01,050
 no shita I've been showing you

1042
00:46:01,050 --> 00:46:02,730
just before just typed that come on and

1043
00:46:02,730 --> 00:46:04,680
you will have any access to through the

1044
00:46:04,680 --> 00:46:08,550
entire cluster so mitigation this is

1045
00:46:08,550 --> 00:46:12,540
more like education do not make your

1046
00:46:12,540 --> 00:46:14,910
user owner of the home directories

1047
00:46:14,910 --> 00:46:16,590
because they will they will share some

1048
00:46:16,590 --> 00:46:19,290
stuff they will SH mod 777 stuff and

1049
00:46:19,290 --> 00:46:21,660
tell people Kerberos fight when cameras

1050
00:46:21,660 --> 00:46:24,210
key tab is like a password file you know

1051
00:46:24,210 --> 00:46:28,470
read falls are please so just for that

1052
00:46:28,470 --> 00:46:31,380
command you you have to input it you can

1053
00:46:31,380 --> 00:46:32,900
find this kind of result in locale

1054
00:46:32,900 --> 00:46:35,900
on local system and also on HDFS system

1055
00:46:35,900 --> 00:46:38,780
for for HDFS the command is the same

1056
00:46:38,780 --> 00:46:43,280
because here I'm showing you here you

1057
00:46:43,280 --> 00:46:46,040
have an adult FS fine canal which is

1058
00:46:46,040 --> 00:46:47,690
used the sense which uses the same

1059
00:46:47,690 --> 00:46:51,170
syntax as Linux so please type that

1060
00:46:51,170 --> 00:46:54,440
canal in locale and also need GFS you

1061
00:46:54,440 --> 00:46:57,680
will have some incredible results so I

1062
00:46:57,680 --> 00:46:59,930
hope to have encouraged you to start to

1063
00:46:59,930 --> 00:47:01,480
join us in the Venn diagram to

1064
00:47:01,480 --> 00:47:04,060
challenging for a number which is

1065
00:47:04,060 --> 00:47:05,990
deploying an environment could be

1066
00:47:05,990 --> 00:47:08,360
obtained please use a free package as

1067
00:47:08,360 --> 00:47:10,550
I'm using here a prepackaged I do prefer

1068
00:47:10,550 --> 00:47:13,610
a nonce just choose some either erotic

1069
00:47:13,610 --> 00:47:15,740
stuff or a GP sandbox on my person box

1070
00:47:15,740 --> 00:47:17,270
everything is packaged in a unique

1071
00:47:17,270 --> 00:47:18,020
virtual machine

1072
00:47:18,020 --> 00:47:20,180
you don't need Terra's or whatever it

1073
00:47:20,180 --> 00:47:21,560
just applying the simple virtual

1074
00:47:21,560 --> 00:47:25,010
machines you need like at least 5 5 gigs

1075
00:47:25,010 --> 00:47:26,570
of ram because there's a lot of stuff

1076
00:47:26,570 --> 00:47:29,060
inside but use this kind of environment

1077
00:47:29,060 --> 00:47:31,610
if you want to start to to to to to

1078
00:47:31,610 --> 00:47:33,470
practice and to train yourself to pen

1079
00:47:33,470 --> 00:47:36,140
tests on a tube stop everything I've

1080
00:47:36,140 --> 00:47:38,630
been talking today is already published

1081
00:47:38,630 --> 00:47:41,330
on our github copper details so more

1082
00:47:41,330 --> 00:47:44,090
more even more than vulnerabilities we

1083
00:47:44,090 --> 00:47:46,040
are documenting techniques and

1084
00:47:46,040 --> 00:47:48,410
procedures with intelligible words and

1085
00:47:48,410 --> 00:47:51,200
not only scripts we are eager for you

1086
00:47:51,200 --> 00:47:54,800
feedback and hope you like you like the

1087
00:47:54,800 --> 00:47:56,630
varieties I'm just taking two minutes

1088
00:47:56,630 --> 00:47:59,990
for the conclusion I do what is that do

1089
00:47:59,990 --> 00:48:01,730
I do P the technology not built on

1090
00:48:01,730 --> 00:48:04,370
secure on upon security there's a lot of

1091
00:48:04,370 --> 00:48:06,860
insecurity by default notification no

1092
00:48:06,860 --> 00:48:09,500
encryption nothing there is systemic

1093
00:48:09,500 --> 00:48:12,470
fragmented a patch arranger you can have

1094
00:48:12,470 --> 00:48:14,210
a patch Avenger this is the sole

1095
00:48:14,210 --> 00:48:16,700
security solution only if you have not

1096
00:48:16,700 --> 00:48:20,210
on works faster that's a pain there's a

1097
00:48:20,210 --> 00:48:21,980
relative energy routine secure

1098
00:48:21,980 --> 00:48:23,870
development even in security modules

1099
00:48:23,870 --> 00:48:25,880
remember the SQL injection in Apache

1100
00:48:25,880 --> 00:48:28,880
under the fraggle one and there's a

1101
00:48:28,880 --> 00:48:30,380
complex operational security because

1102
00:48:30,380 --> 00:48:32,930
mostly people even if you camera is even

1103
00:48:32,930 --> 00:48:34,130
if you do your job as a security

1104
00:48:34,130 --> 00:48:36,560
procedure practitioner people will miss

1105
00:48:36,560 --> 00:48:38,630
use Kerberos Keita's because they don't

1106
00:48:38,630 --> 00:48:40,190
know how to behave with Gabreski table

1107
00:48:40,190 --> 00:48:42,770
so they will read for everything as a

1108
00:48:42,770 --> 00:48:44,990
not as an attacker with a simple search

1109
00:48:44,990 --> 00:48:46,250
fine come on we

1110
00:48:46,250 --> 00:48:48,440
find any read for sake tabs that's a

1111
00:48:48,440 --> 00:48:51,260
thing some ways recommendation if you

1112
00:48:51,260 --> 00:48:53,330
want to start securing your cluster aloe

1113
00:48:53,330 --> 00:48:55,910
defender cameras your cluster first and

1114
00:48:55,910 --> 00:48:59,150
remove all simple authentication HTTP

1115
00:48:59,150 --> 00:49:02,780
call anyone reduce a v6 position just

1116
00:49:02,780 --> 00:49:04,640
don't use the all exposed on the

1117
00:49:04,640 --> 00:49:07,430
cooperate network topology don't give

1118
00:49:07,430 --> 00:49:10,850
Richard because if you know for certain

1119
00:49:10,850 --> 00:49:13,250
projects there are some reach for other

1120
00:49:13,250 --> 00:49:15,890
configuration file that's a pain don't

1121
00:49:15,890 --> 00:49:17,600
deploy application on edge not manage

1122
00:49:17,600 --> 00:49:19,460
node is just a simple bastion jam server

1123
00:49:19,460 --> 00:49:21,530
nothing installed on it no application

1124
00:49:21,530 --> 00:49:24,530
on it prevent and detect termination

1125
00:49:24,530 --> 00:49:26,180
wishes and caviar ski tabs elope from

1126
00:49:26,180 --> 00:49:29,510
jobs and try to harden component and

1127
00:49:29,510 --> 00:49:31,820
patch your patch off faster that's a not

1128
00:49:31,820 --> 00:49:32,950
a simple task

1129
00:49:32,950 --> 00:49:35,270
thank you for attention I hope it

1130
00:49:35,270 --> 00:49:35,780
pleased you

1131
00:49:35,780 --> 00:49:39,130
I'm open to question thank you

1132
00:49:45,110 --> 00:49:48,890
do we have some questions

1133
00:49:51,840 --> 00:49:56,810
okay thank you

