1
00:00:00,000 --> 00:00:07,850
there are dudes I don't know what they
are probably $10 a month but to the bar

2
00:00:07,850 --> 00:00:25,278
tab maybe like you know because we won't
be recorded in to get all the cursing

3
00:00:25,279 --> 00:00:34,149
out of my system now 63 backwards I'm
like oh my god you're on Mike ok good

4
00:00:34,149 --> 00:00:39,489
and it looks like you're probably
streaming now so now without any further

5
00:00:39,489 --> 00:00:45,718
do I would like to introduce JPL so
please give a warm drink on welcome to

6
00:00:45,719 --> 00:00:52,449
jail

7
00:00:52,449 --> 00:01:02,539
hi I'm Jay we're going to try to not
have too much feedback things off so ok

8
00:01:02,539 --> 00:01:06,689
so any feedback is me my phone on me

9
00:01:06,689 --> 00:01:14,380
ok so cold so you'll notice the funky
keyboard the monkey Wacom tablet if it

10
00:01:14,380 --> 00:01:20,759
comes down to it the ninja wrist braces
of do those are for if there any fights

11
00:01:20,759 --> 00:01:27,080
that broke out afterwards they're not
actually if if any of you have god awful

12
00:01:27,080 --> 00:01:31,670
tendinitis issues please see me after I
will give you all kinds of awesome

13
00:01:31,670 --> 00:01:36,700
advice including standing desks which
should be a little higher dose

14
00:01:36,700 --> 00:01:42,969
think they just did it for my ok so I'm
gonna talk to you about to talk to you

15
00:01:42,969 --> 00:01:46,600
about something that I've been finding
really really cool which is playing with

16
00:01:46,600 --> 00:01:51,298
containers this is this is something
that I've had a lot of fun with and I'm

17
00:01:51,299 --> 00:01:56,770
hoping that what you'll get from this is
a little tiny bit of my infectious joy

18
00:01:56,770 --> 00:02:03,329
at having found a cool new toy so I
wasn't a couple different people

19
00:02:03,329 --> 00:02:08,280
different toys here and one of those is
one of those is basically looking what

20
00:02:08,280 --> 00:02:13,880
you can do with doctor to add security
not how to secure doctor but rather how

21
00:02:13,880 --> 00:02:23,819
to secure system with trainers becoming
a doctor or out of alexi LXT so so how

22
00:02:23,819 --> 00:02:28,310
do I get into this-- I got into this
because by the way whose awakened here

23
00:02:28,310 --> 00:02:31,989
is anybody awake I want to make sure
that like I speak to the people who are

24
00:02:31,989 --> 00:02:36,420
awake and they don't like so too much
noise people are still trying to sleep

25
00:02:36,420 --> 00:02:42,369
or get over the hangover who's awake
awake again and how many of you are

26
00:02:42,370 --> 00:02:44,100
hungover

27
00:02:44,100 --> 00:02:52,410
occasion is clearly calming down last
time I spoke here but Keith Myers tore

28
00:02:52,410 --> 00:02:58,740
it up last night and I don't believe I'm
awake hungover was not an option for me

29
00:02:58,740 --> 00:03:06,130
but okay so this is so so basically I
come at this from a whole long history

30
00:03:06,130 --> 00:03:10,510
of playing with Linux UNIX hardening and
one of the big ways that we are in

31
00:03:10,510 --> 00:03:15,489
systems with you know that we locked on
individual programs in SoCal take that

32
00:03:15,490 --> 00:03:17,340
for most require a privilege

33
00:03:17,340 --> 00:03:20,810
let's take another true J let's do this
let's do that and so what I want to do

34
00:03:20,810 --> 00:03:28,380
is do some of that with trainers and and
the issue basically anybody anybody got

35
00:03:28,380 --> 00:03:34,960
nowhere to reduce ok processes you know
making processes file system we say this

36
00:03:34,960 --> 00:03:38,270
subject to the policies met your new
route you can't see out of that we hope

37
00:03:38,270 --> 00:03:42,400
the difficulty so they're couple
difficult to the jurors want to maintain

38
00:03:42,400 --> 00:03:48,040
his little bit of a pain but the other
is that if the program does if in the

39
00:03:48,040 --> 00:03:52,549
truth manages to get to root access
whether it was running that way in the

40
00:03:52,550 --> 00:03:56,050
first place or they find a sec UAT
finery or something that lets them get

41
00:03:56,050 --> 00:04:01,890
up to root at this point the game is
trivially over by all this and that's

42
00:04:01,890 --> 00:04:08,500
your technique so so basically what I
when I come around you is like looking

43
00:04:08,500 --> 00:04:13,010
at using Linux containers and Linux
containers are a whole bunch of changes

44
00:04:13,010 --> 00:04:18,370
to the kernel that let you start taking
the taking a Linux machine

45
00:04:18,370 --> 00:04:23,199
and using it a little bit more like a
well-disciplined beast or you can put

46
00:04:23,199 --> 00:04:28,990
different programs in different things
and then control those things ok so I'm

47
00:04:28,990 --> 00:04:36,460
saying things to Swansea containers more
than 58 59 times in this talk ok so the

48
00:04:36,460 --> 00:04:40,340
big deal with containers as their
partner is still evolving technology I

49
00:04:40,340 --> 00:04:44,929
think doctors getting pretty relatively
mature women come around and talk about

50
00:04:44,930 --> 00:04:50,250
LXD you can hear me talk about you know
how it's very much really really still

51
00:04:50,250 --> 00:04:56,210
under development and it's kind of shows
so let's containers basically revolves

52
00:04:56,210 --> 00:05:01,440
around namespaces and controllers so
namespaces was very like the truth and

53
00:05:01,440 --> 00:05:07,010
the truth he said ok I'm going to take a
portion of the file system of the

54
00:05:07,010 --> 00:05:11,860
filesystem wanna see that portion of it
that's yours and the rest of the system

55
00:05:11,860 --> 00:05:14,870
can see it but you can't see the rest of
the system

56
00:05:14,870 --> 00:05:19,750
namespaces says how bout we just have a
bunch of orthogonal things whether those

57
00:05:19,750 --> 00:05:25,330
are file systems whether those are
actually down to process IP network and

58
00:05:25,330 --> 00:05:27,349
network interfaces and so on

59
00:05:27,349 --> 00:05:31,630
you can even break that down to users
where a set of user IDs that are

60
00:05:31,630 --> 00:05:37,010
reserved for individual containers and
are used and basically you buy anything

61
00:05:37,010 --> 00:05:41,050
else on the system are used by this
container and other container that has a

62
00:05:41,050 --> 00:05:47,400
whole separate set of you at ease the
other side has control over and control

63
00:05:47,400 --> 00:05:53,710
groups were basically created to give
you a way of saying okay I'm gonna think

64
00:05:53,710 --> 00:05:57,530
of think of your I think of what we do
with hypervisors I'm gonna run five

65
00:05:57,530 --> 00:06:01,400
different things in the system I want
this one's only have this much RAM at

66
00:06:01,400 --> 00:06:04,090
most and I want to take this much
storage space at the most and I want

67
00:06:04,090 --> 00:06:08,109
this one to have this and it's basically
taking what we learned and hypervisors

68
00:06:08,110 --> 00:06:11,900
what we've really enjoyed hypervisors
and now bringing it just in to the you

69
00:06:11,900 --> 00:06:12,529
know bringing it

70
00:06:12,529 --> 00:06:18,469
the 42 and operating system so all of
this is basically focused their three

71
00:06:18,469 --> 00:06:22,389
purposes for control groups one was to
like basically let you do your

72
00:06:22,389 --> 00:06:26,029
bean-counting like you say ok well how
much did each thing use and if you're

73
00:06:26,029 --> 00:06:29,219
actually billing people if you're doing
something you're doing some kind of

74
00:06:29,219 --> 00:06:32,659
platform as a service that you want to
build each customer for you want to

75
00:06:32,659 --> 00:06:35,759
build the one customers running all the
different things on this the right

76
00:06:35,759 --> 00:06:37,349
amounts for the right things

77
00:06:37,349 --> 00:06:42,329
another is to say another is basically
control I don't want to be resource

78
00:06:42,329 --> 00:06:46,799
control part how many more rampant this
and that's kind of a welcome change

79
00:06:46,799 --> 00:06:50,628
because when I started in this field a
very very long time ago

80
00:06:50,629 --> 00:06:57,109
15 years it was and I know that's not
that long ago but the college to do you

81
00:06:57,109 --> 00:07:03,008
like home who but you know you could
take a system down if you just simply

82
00:07:03,009 --> 00:07:08,129
wrote a little more detail each of the
nature of the processes that came out of

83
00:07:08,129 --> 00:07:11,439
that for themselves and bail for
themselves and the whole system which

84
00:07:11,439 --> 00:07:17,159
the outer space and it was toast so
control groups are kind of a very long

85
00:07:17,159 --> 00:07:23,619
so anyway this is this is the end of the
day's end up with these with containers

86
00:07:23,619 --> 00:07:28,659
and so container takes control groups to
take names basis and it's ok I can start

87
00:07:28,659 --> 00:07:34,688
chopping the system up into these into
these things turn off their phones come

88
00:07:34,689 --> 00:07:40,949
on so well after that

89
00:07:40,949 --> 00:07:43,560
grown

90
00:07:43,560 --> 00:07:51,700
anyway yeah we're not awake enough to
grow yeah okay so containers so

91
00:07:51,700 --> 00:07:56,940
containers are basically that next
evolutionary step for their intended as

92
00:07:56,940 --> 00:08:03,000
a next evolutionary step the on virtual
machines virtual machine was the first

93
00:08:03,000 --> 00:08:06,200
way we all started using hardware whole
lot more efficiently like well I've got

94
00:08:06,200 --> 00:08:11,270
my webserver on that on that silicone
over there and got my mail server on

95
00:08:11,270 --> 00:08:14,859
that silicon over there and yeah there
are times where each of them you know

96
00:08:14,860 --> 00:08:18,500
there are times where each of them don't
do as much work and it might be might be

97
00:08:18,500 --> 00:08:22,310
the ones working a lot harder it at the
other isn't and so on they really could

98
00:08:22,310 --> 00:08:26,419
kind of shearing machine but all the
screen people saying never do that and

99
00:08:26,419 --> 00:08:30,320
you know and how we manage system had
that many things that one of them could

100
00:08:30,320 --> 00:08:32,520
cause the other ones have problems

101
00:08:32,520 --> 00:08:36,309
well so we eventually we said we're
going to take one set of so we're gonna

102
00:08:36,309 --> 00:08:40,819
chop it up into a bunch of machines will
emulate it will emulate five or 10

103
00:08:40,820 --> 00:08:44,540
machines per piece of silicon and you
know and each one of us will have its

104
00:08:44,540 --> 00:08:48,569
own thing well okay that means that each
one of us has its own kernel each one of

105
00:08:48,570 --> 00:08:53,760
those has its own virtualized hardware
each one of those has all of these other

106
00:08:53,760 --> 00:08:55,380
little bits of what

107
00:08:55,380 --> 00:09:02,710
whole system a system called nos nos and
well to do all that so we can do is

108
00:09:02,710 --> 00:09:06,400
basically say ok let's just take one
system and and that's what we're doing

109
00:09:06,400 --> 00:09:11,630
the containers let's just take one
system or in my case 1 p.m. and start

110
00:09:11,630 --> 00:09:16,089
chopping it off and saying okay this is
the webservice gonna run in here and the

111
00:09:16,089 --> 00:09:19,220
other parts of the system gonna run in
the rest of the system but that web

112
00:09:19,220 --> 00:09:22,480
server forgets it's the one thing on the
system it's actually getting talked to

113
00:09:22,480 --> 00:09:23,520
from the network

114
00:09:23,520 --> 00:09:26,530
let's just make it that if it does get
top maybe they can have the rest of the

115
00:09:26,530 --> 00:09:30,770
system and maybe that makes it a heck of
a lot less useful system it also means

116
00:09:30,770 --> 00:09:33,400
getting two routes a whole lot harder
'cause there's nothing in there running

117
00:09:33,400 --> 00:09:37,010
as root and we're gonna come to that i'm
gonna play so we're gonna be pretty demo

118
00:09:37,010 --> 00:09:42,740
happy I promise I'll stop doing . a
second so many of you this is this is

119
00:09:42,740 --> 00:09:47,000
a slide we're trying to head off
questions many people are using

120
00:09:47,000 --> 00:09:53,550
containers for multi-tenancy for letting
ok well this customer can view this

121
00:09:53,550 --> 00:09:57,380
customer can be in can be in this
container this customer the same this

122
00:09:57,380 --> 00:10:03,820
container on the same p.m. on the same
hardware and no I don't I don't

123
00:10:03,820 --> 00:10:06,850
recommend that I think it's mature
enough and honestly

124
00:10:06,850 --> 00:10:10,490
reason I say that is because I'm still
nervous about the whole like

125
00:10:10,490 --> 00:10:15,790
multi-tenancy you know multi-tenancy
with hypervisors in guardians was you

126
00:10:15,790 --> 00:10:19,649
know one of the first to do a public
break out of a hypervisor we broke out

127
00:10:19,649 --> 00:10:24,390
of them we're a long long time ago that
everybody else but that was you know

128
00:10:24,390 --> 00:10:29,839
that took the took almost an especially
of effort and and now it's trivial

129
00:10:29,839 --> 00:10:33,920
announced built into now it's built into
penetration testing frameworks you know

130
00:10:33,920 --> 00:10:40,360
that's not even more money for that
split so yeah break out of a hypervisor

131
00:10:40,360 --> 00:10:44,560
in a heck of a lot more as a heck of a
lot more containment going on there I'm

132
00:10:44,560 --> 00:10:49,000
I don't want multi-tenancy here i mean
you have to understand how paranoid I am

133
00:10:49,000 --> 00:10:53,200
as far as I'm concerned if I am you know
using one of the

134
00:10:53,200 --> 00:10:57,950
infrastructure-as-a-service things
happen that but they all those virtual

135
00:10:57,950 --> 00:11:03,920
machines virtual machines on that he
said ok well most of us don't get that

136
00:11:03,920 --> 00:11:05,920
but I like it

137
00:11:05,920 --> 00:11:10,349
ok so there are a bunch of new ways to
manage containers there have been a pile

138
00:11:10,350 --> 00:11:13,860
of them the most popular one lately
doctors just been really really taking

139
00:11:13,860 --> 00:11:19,260
the world by storm and partly as you'll
see it's really fun to use but i wanna

140
00:11:19,260 --> 00:11:23,670
talk to you about two of these in
particular which has been around for a

141
00:11:23,670 --> 00:11:24,430
little while

142
00:11:24,430 --> 00:11:31,140
LXD which is kind of Canonical's answer
to doctor they're basically saying can

143
00:11:31,140 --> 00:11:35,819
we use when we do see as a container
thing but can we create a team and that

144
00:11:35,820 --> 00:11:37,830
makes it just as much fun to use in it

145
00:11:37,830 --> 00:11:41,310
and able to take our containers and make
images of course those images other

146
00:11:41,310 --> 00:11:45,479
places and pull them down into all kinds
of funky stuff so you'll see that part

147
00:11:45,480 --> 00:11:52,310
of the reason that I put LSD in this
talk was that I wanted I wanted to I

148
00:11:52,310 --> 00:11:55,439
like that of doing doctor for
containment instead of the troops on

149
00:11:55,440 --> 00:11:59,840
partial it means an added another team
into the system and I like ripping

150
00:11:59,840 --> 00:12:04,950
pieces out of systems not adding new
ones in so my goal is to say I would

151
00:12:04,950 --> 00:12:08,440
like to actually be running things now
let's see where I can do without her

152
00:12:08,440 --> 00:12:12,740
system daemon sixties and ice gateway
drug for that so I can start out with

153
00:12:12,740 --> 00:12:19,870
LXDE which is using LIC underneath but
and do it that way so I like that alot

154
00:12:19,870 --> 00:12:28,620
ok saddam's basically jump right into Dr
show you all doctors to talk about what

155
00:12:28,620 --> 00:12:33,190
we can how you can use doctor has a
security tool and then I'll get into

156
00:12:33,190 --> 00:12:38,220
doing the same thing with that likes D
and yeah let's do it so tiny bit more

157
00:12:38,220 --> 00:12:43,750
theory so first you've got containers
and containers are those kinds of

158
00:12:43,750 --> 00:12:46,860
lightweight virtual machines right
containers in the things I'm gonna walk

159
00:12:46,860 --> 00:12:51,830
programs into the container has a
persistent states that persistent state

160
00:12:51,830 --> 00:12:55,650
is called the image of the images kind
of basically the file system any other

161
00:12:55,650 --> 00:13:01,220
configuration stop in the world that
would kinda like containers the images

162
00:13:01,220 --> 00:13:06,990
indicate probably be an x-files and
doctors here's the here's one of the

163
00:13:06,990 --> 00:13:09,750
things that i'm gonna get into the one
of things that container technologies

164
00:13:09,750 --> 00:13:14,900
products is a union mounted filesystem
and the Union mount of filesystem is

165
00:13:14,900 --> 00:13:20,840
really really fun you basically get a
whole bunch of layers and you start out

166
00:13:20,840 --> 00:13:22,960
with you start with a layer

167
00:13:22,960 --> 00:13:28,210
and you can start a machine from it you
know and that layer you can now

168
00:13:28,210 --> 00:13:31,910
basically say I'm going to make some
changes the changes will exist in this

169
00:13:31,910 --> 00:13:36,650
layer and it's kind of like a copy on
write mechanism where the stuff that's

170
00:13:36,650 --> 00:13:42,040
in that next layer of the file system in
it overrides anything below and changes

171
00:13:42,040 --> 00:13:45,300
override whatever is below but you're
only store in that month so if you want

172
00:13:45,300 --> 00:13:51,020
to end up reading if you say I got an
image and I want to set up a hundred

173
00:13:51,020 --> 00:13:53,400
different you know a hundred containers
a hundred

174
00:13:53,400 --> 00:13:58,280
virtual machines a hundred containers
that are all running from that image all

175
00:13:58,280 --> 00:14:02,520
hundred containers could run I'll be
using that plus whatever changes they've

176
00:14:02,520 --> 00:14:05,900
made as they run and so those changes
they make as they run will end up being

177
00:14:05,900 --> 00:14:10,530
really really small and so it ends up
being really like way ok so many do a

178
00:14:10,530 --> 00:14:15,620
lot of this demo format you're gonna see
me off of the slides but I've left a lot

179
00:14:15,620 --> 00:14:19,620
of the skin slides and try to make the
slides look a lot like the demo so that

180
00:14:19,620 --> 00:14:21,690
you can follow along afterwards

181
00:14:21,690 --> 00:14:26,330
my goal in giving this was to make
something that's very very useful so if

182
00:14:26,330 --> 00:14:30,020
you were to bust out your laptop right
now we're here to go back home later on

183
00:14:30,020 --> 00:14:33,880
in your laptop and drink some caffeine
and try to wipe the sleep out of your

184
00:14:33,880 --> 00:14:37,990
eyes from last night's epic party right
you'd be able to actually use this and

185
00:14:37,990 --> 00:14:45,660
do fun things with it it's not like I'm
gonna download a whole freaking ISO or a

186
00:14:45,660 --> 00:14:47,850
whole freaking p.m. it's gonna take
forever

187
00:14:47,850 --> 00:14:55,110
things are much much smaller r ok so my
iPad so that I can see my copy of the

188
00:14:55,110 --> 00:14:59,730
slides and have a reference to not fat
finger too many things so let's just

189
00:14:59,730 --> 00:15:11,680
start so this is my role 7 system which
I've gotta say is a little this is a

190
00:15:11,680 --> 00:15:26,888
little small

191
00:15:26,889 --> 00:15:46,990
that's it PowerPoint screwing with the
PowerPoint screen with a resolution

192
00:15:46,990 --> 00:15:49,200
yup

193
00:15:49,200 --> 00:15:52,010
how's that size

194
00:15:52,010 --> 00:16:01,350
burger burger house that people are back
how are you feeling okay I mean you're

195
00:16:01,350 --> 00:16:08,750
supposed to have a little feeling myopia
back there you know supposed to hurt a

196
00:16:08,750 --> 00:16:19,830
little

197
00:16:19,830 --> 00:16:27,650
reason my redhead p.m. but now my moon 2
p.m. links to all walking at work

198
00:16:27,650 --> 00:16:34,680
ok so don't do this at home you should
be running super never commands you get

199
00:16:34,680 --> 00:16:42,670
nice logging but OK

200
00:16:42,670 --> 00:16:50,370
the password is your password wine

201
00:16:50,370 --> 00:16:56,130
Security Department the security guys
won't let me have password anymore and

202
00:16:56,130 --> 00:17:00,770
that's even when I put a folder instead
of the air and dollar signs instead of

203
00:17:00,770 --> 00:17:07,809
the asses and you know it but they still
say that the source kiddies will figure

204
00:17:07,809 --> 00:17:08,609
it out

205
00:17:08,609 --> 00:17:19,149
ok so here we go so I i've preceded this
machine so what's that make it big again

206
00:17:19,150 --> 00:17:39,910
that matter even more there are there
are open seats in the first half of the

207
00:17:39,910 --> 00:17:42,990
room and I think the person saying that
might be the one operating the camera

208
00:17:42,990 --> 00:17:52,530
and that once a little harder ok so
doctorow interactive terminal to choose

209
00:17:52,530 --> 00:17:56,850
what image I wanna run on a say I'd like
the canonical sent off seven by

210
00:17:56,850 --> 00:18:02,899
Canonical I don't mean to people I mean
like the actual one from doctor that is

211
00:18:02,900 --> 00:18:09,800
built by the Redhawks so if I ran that
command the first time I run that

212
00:18:09,800 --> 00:18:13,059
command it's gonna take a little while
to say okay I'm pulling down sent off

213
00:18:13,059 --> 00:18:16,770
setting and the central seven poles down
it's not that big its like a hundred

214
00:18:16,770 --> 00:18:21,980
banks but once I pulled it down once
once I pull it down once I get to just

215
00:18:21,980 --> 00:18:25,740
keep using an array using it and this is
and will talk about this with the union

216
00:18:25,740 --> 00:18:29,660
mounted filesystems so I run that and
now I'm in a container in this container

217
00:18:29,660 --> 00:18:34,410
has a really great name because you're
16 GB 41 ok this is you know everyone's

218
00:18:34,410 --> 00:18:37,900
gonna remember this is a great name

219
00:18:37,900 --> 00:18:43,530
so these are the programs that are in
the container I've got back when I

220
00:18:43,530 --> 00:18:48,620
started on it and I've got my GPS that I
just ran

221
00:18:48,620 --> 00:18:54,139
control PQ and don't worry that key
combos and slides now I'm back in my

222
00:18:54,140 --> 00:18:59,710
rail system so and I was in my rail
system before but now I'm out of the

223
00:18:59,710 --> 00:19:17,880
container and if you look if I go
looking for my bash shell ok so I will

224
00:19:17,880 --> 00:19:24,650
let's see let's look at my doctor thing
so my doctor said dr. basically goes and

225
00:19:24,650 --> 00:19:28,530
gives every container if you don't give
a name it gives every container and name

226
00:19:28,530 --> 00:19:33,910
the name is a random active in a random
famous person so this is sad but not so

227
00:19:33,910 --> 00:19:39,220
I will so I'm gonna go and say ok I'm
gonna attach to say so

228
00:19:39,220 --> 00:19:47,050
doctor jack which had been talked back
in two minutes

229
00:19:47,050 --> 00:19:54,418
control PQ accept cash now

230
00:19:54,419 --> 00:19:59,789
so there's my sleepy still running it's
it's a process on the system

231
00:19:59,789 --> 00:20:09,259
the interesting thing for me is like
okay well what what's the SELinux what's

232
00:20:09,259 --> 00:20:17,159
the SELinux contacts that's running in
is that my so the other sleep is running

233
00:20:17,159 --> 00:20:22,109
on the system is running in this context
but the context I'm running in here is

234
00:20:22,109 --> 00:20:25,759
expert I'm gonna come back to that later
so anyway

235
00:20:25,759 --> 00:20:33,169
ok so I've got this I've got this image
that's running sad but oh well let's

236
00:20:33,169 --> 00:20:37,070
let's going to start another one right
so let's that's running from the central

237
00:20:37,070 --> 00:20:41,379
seven so I'm gonna do I'm going to start
another one doctor run I T so

238
00:20:41,379 --> 00:20:54,939
interactive terminal ok 2007 in bash ok
I'll be Q Dr BS so I've got two of these

239
00:20:54,940 --> 00:21:02,389
running for a noble and Saginaw ok so
these are two vs two containers I really

240
00:21:02,389 --> 00:21:07,580
ICBM I almost always need containers but
not always gonna have to get into a

241
00:21:07,580 --> 00:21:09,570
contest

242
00:21:09,570 --> 00:21:16,220
if any of you updated its kind of the
same the communication is just going to

243
00:21:16,220 --> 00:21:22,560
be that imperfect we're gonna try really
hard but it's gonna be that she thought

244
00:21:22,560 --> 00:21:26,330
that college kids who might be a little
there were dating and be like it's going

245
00:21:26,330 --> 00:21:32,710
ok so ok so let's do something let's
make a change in each of these so

246
00:21:32,710 --> 00:21:47,000
attached to attach too sad

247
00:21:47,000 --> 00:22:00,910
ok and inside I'm going to put the
contents jail and if you and doctor

248
00:22:00,910 --> 00:22:03,820
attached by the way this is cool

249
00:22:03,820 --> 00:22:10,760
Dr tax FDR have this type of all kinds
of stuff here it makes this really fun

250
00:22:10,760 --> 00:22:14,950
ok so now we're in this cat food there's
no food here

251
00:22:14,950 --> 00:22:25,380
ok let's put in it is not J into / flu
ok so now I've got these two containers

252
00:22:25,380 --> 00:22:30,750
and obviously they're gonna have
different versions and i dont wanna go

253
00:22:30,750 --> 00:22:38,910
back into PowerPoint so I'm going to
pull off because I think that won't

254
00:22:38,910 --> 00:22:47,640
screw with our that won't screw the
resolution somebody remind me how to

255
00:22:47,640 --> 00:22:59,930
grow screen ok so this is where we get
the Union mounted filesystems right so

256
00:22:59,930 --> 00:23:04,950
we start out the way these doctor works
as you get layers and we're gonna look

257
00:23:04,950 --> 00:23:08,520
at doctor finally you can see that every
entering the doctor file basically goes

258
00:23:08,520 --> 00:23:12,370
breeds another intermediate layer and
part of the reason it does that all of

259
00:23:12,370 --> 00:23:16,850
these players are basically saved and
they're saved so that you can do

260
00:23:16,850 --> 00:23:20,000
something and then start another
container and do the exact same things

261
00:23:20,000 --> 00:23:24,070
and take way less time because we'll
have to wait for another man to complete

262
00:23:24,070 --> 00:23:29,040
his doctor basically keeps track of if I
started this if I started this file

263
00:23:29,040 --> 00:23:33,600
system and I run this command I get to
this one ok cool let's just skip and go

264
00:23:33,600 --> 00:23:37,090
to this one is called the cash it's
really need but we're gonna skip but for

265
00:23:37,090 --> 00:23:41,889
right now and basically say this is how
the images were Cuban image made up of

266
00:23:41,890 --> 00:23:44,300
multiple layers the first layer in both

267
00:23:44,300 --> 00:23:48,950
views in both these containers at
started out with that sent off seven

268
00:23:48,950 --> 00:23:53,670
layer gonna skip for this unescapes the
next one I haven't added a proxy server

269
00:23:53,670 --> 00:23:58,160
either one but then a better read write
later on both of them and so if I want

270
00:23:58,160 --> 00:24:02,820
to I can basically build you know a
whole new in a whole new containers

271
00:24:02,820 --> 00:24:07,060
using any of the intervening layers and
so that's what I've done is it basically

272
00:24:07,060 --> 00:24:10,270
use that first layer and somehow got two
containers they're both running from my

273
00:24:10,270 --> 00:24:14,310
first layer they got a read-write layer
on top and that read write later isn't

274
00:24:14,310 --> 00:24:18,960
persistent you can make that regret
later persistent basically by committing

275
00:24:18,960 --> 00:24:21,940
it gonna show you that next but right
now this is what we've got

276
00:24:21,940 --> 00:24:25,170
so this has caused the delay reuse you
can basically have two different images

277
00:24:25,170 --> 00:24:30,410
to different containers bulk containers
now have different file systems are

278
00:24:30,410 --> 00:24:38,110
sharing their sharing their sharing the
bottom layers so unless we persist

279
00:24:38,110 --> 00:24:43,889
unless we commit the images not
persistent so let's stop these so doctor

280
00:24:43,890 --> 00:24:58,150
PST by their names again let's stop her
noble and then let's stop sad but you

281
00:24:58,150 --> 00:25:09,520
get some really funny names after a
while is really is pretty cool

282
00:25:09,520 --> 00:25:15,290
ok they both stopped at all chip in pas
de deux shopping P S minus a I'm gonna

283
00:25:15,290 --> 00:25:22,399
come in each of these I'm gonna commit
the first one yeah sad and I'm gonna

284
00:25:22,400 --> 00:25:29,080
call that he's gay and I'm gonna commit
and this is basically implementing these

285
00:25:29,080 --> 00:25:43,840
to my local repository so I'm mad about
noble to who isn't a really creative and

286
00:25:43,840 --> 00:25:51,100
then remove the containers so dr. Arya
sad but not for a noble and I'm gonna

287
00:25:51,100 --> 00:26:04,290
run Dr images and it's gonna be hard to
read because the number of enemies

288
00:26:04,290 --> 00:26:11,370
do that ok so this is what that's going
to look like the repository repository

289
00:26:11,370 --> 00:26:15,850
who is in jail and got a repository who
is Jay there are tagged their image I

290
00:26:15,850 --> 00:26:22,760
tease there are sizes you'll notice
these same size so now what I want to do

291
00:26:22,760 --> 00:26:28,629
is like let's just restart I can I can
start a container from one of these so

292
00:26:28,630 --> 00:26:40,960
doctor run accused who is jay jay and if
I look at the other one I see the same

293
00:26:40,960 --> 00:26:55,720
thing now let's do a doctor history on
who is J so who is J as who is Jay has

294
00:26:55,720 --> 00:27:01,430
the base layer but then on top of that
it's got welcome and it's kind of an

295
00:27:01,430 --> 00:27:07,210
OAuth adding bash but then it's got four
bytes let's look at the history and who

296
00:27:07,210 --> 00:27:14,250
isn't a look it's got one that's got
that middle layer but then it's got 16

297
00:27:14,250 --> 00:27:18,470
bytes and so that's that's where they
differ and it's kind of it's kind of

298
00:27:18,470 --> 00:27:22,830
neat I can basically so I just done
doctor history it shows me like the

299
00:27:22,830 --> 00:27:26,659
history of container history of an image
doctors

300
00:27:26,660 --> 00:27:31,970
other things is and he does this to my
Run Dr inspect and say it like to know a

301
00:27:31,970 --> 00:27:38,330
lot about who is J and when I get yours
all this information

302
00:27:38,330 --> 00:27:45,610
oh wait and it's in JSON ok so let's do
that with an actual container so doctor

303
00:27:45,610 --> 00:27:51,399
inspect a statement released on that
Frankie Rosalinda surname now and I get

304
00:27:51,400 --> 00:27:52,450
even more information

305
00:27:52,450 --> 00:27:58,680
10 use the most on this one uses the
most for honestly I use this mostly get

306
00:27:58,680 --> 00:28:01,910
IP address the cool things when you
start dealing with containers and darker

307
00:28:01,910 --> 00:28:06,510
you end up being able to contain you can
interrogate each of the containers

308
00:28:06,510 --> 00:28:09,660
you'll end up with a pile of containers
and you'll want to I like he was your IP

309
00:28:09,660 --> 00:28:15,150
address what's your hours what what
shared memory what shared what what what

310
00:28:15,150 --> 00:28:19,590
shared memory we have access to and you
can start looking in together or you can

311
00:28:19,590 --> 00:28:21,850
possibly keep them separated murder case

312
00:28:21,850 --> 00:28:29,330
michael's keep them darn separated so
the next show is a doctor file and let's

313
00:28:29,330 --> 00:28:40,370
actually I made a few ahead of time so
doctor file is meant to look very much

314
00:28:40,370 --> 00:28:46,149
like a makefile this is if you if you
can't figure out the developers really

315
00:28:46,150 --> 00:28:51,690
really love this stuff it's like like
read it love it love it its they do so

316
00:28:51,690 --> 00:28:56,390
so what doctor doesn't says starting
this base image and then each of these

317
00:28:56,390 --> 00:29:01,130
commands is another basically adds
another layer and doesn't stop there

318
00:29:01,130 --> 00:29:04,660
what I was seeing in Dr history is
looking at the image this is take sent

319
00:29:04,660 --> 00:29:05,810
all seven

320
00:29:05,810 --> 00:29:12,000
update at our web server overnight like
to also exposed port 80 cuz otherwise

321
00:29:12,000 --> 00:29:15,970
none of the port certain other ports
available from base operating system and

322
00:29:15,970 --> 00:29:20,920
then entry point basically says it like
to run this command so I can that's my

323
00:29:20,920 --> 00:29:27,880
doctor file I can build something from
at Dr Phil and a call this my image so I

324
00:29:27,880 --> 00:29:33,480
remember that it's an image not a
container ok so all of those things are

325
00:29:33,480 --> 00:29:39,020
running super fast because like I said
earlier doctor like already knows it

326
00:29:39,020 --> 00:29:44,940
says I started in 2007 run and run these
commands before so I know what to do to

327
00:29:44,940 --> 00:29:49,390
get to their past that now you can
override the cash but in this case I

328
00:29:49,390 --> 00:29:52,130
really want the cash because I'm in a
room and it will have to rely on

329
00:29:52,130 --> 00:29:57,670
bandwidth and once I've done this just
now if I'm gonna go and built six more

330
00:29:57,670 --> 00:30:03,240
these well then I'd like that too so i
dont this thing and now I want to do is

331
00:30:03,240 --> 00:30:04,190
basically say

332
00:30:04,190 --> 00:30:09,840
hey let's look at doctor images again we
have my image at the top so let's run it

333
00:30:09,840 --> 00:30:14,889
by a doctor on and said if I T manda CD
which puts us in the background emo

334
00:30:14,889 --> 00:30:23,399
basically named my container and I
started from by image ok I've now got

335
00:30:23,399 --> 00:30:30,189
that running so let's find out what the
IP addresses on my on on my container so

336
00:30:30,190 --> 00:30:39,159
doctor inspects my container it's gonna
be 1705 whore so let's go into the

337
00:30:39,159 --> 00:30:53,789
virtual machine that I can ssh into and
172 17 0 what was it 54 and there's my

338
00:30:53,789 --> 00:30:58,139
webserver this is a web service running
inside the container I can enter the

339
00:30:58,139 --> 00:31:02,750
container and go take a look at it so if
I want if I went into the container I

340
00:31:02,750 --> 00:31:08,340
was doing the I was doing an attack so
let's do that let's or rather instead of

341
00:31:08,340 --> 00:31:12,899
you need hot don't have a terminal let's
just add one out of process to the

342
00:31:12,899 --> 00:31:17,560
container Case of Dr Jekyll I T my
container and

343
00:31:17,560 --> 00:31:23,179
and lets out a shell so now my container
is my Apache web server relevance

344
00:31:23,180 --> 00:31:27,710
prophecies and my shell and I can be
looking around here and basically saying

345
00:31:27,710 --> 00:31:32,170
okay so I must not have enough studying
here

346
00:31:32,170 --> 00:31:37,480
well then but this is this is what I got
going in the container what I can do at

347
00:31:37,480 --> 00:31:41,930
this point let me just before that
container and I'm say wait what if I

348
00:31:41,930 --> 00:31:49,270
want you actually want to expose that or
not just to the Linux machines I had to

349
00:31:49,270 --> 00:31:52,389
go into my room seven boxes I'm on my
back and I don't want to be like that

350
00:31:52,390 --> 00:31:57,180
it's gonna be like using the browser on
my Mac that seems easier so when I run

351
00:31:57,180 --> 00:32:04,210
publish any 123 24 days i'm saying is
basically hey I'd like to start of

352
00:32:04,210 --> 00:32:13,420
another image and let's call this one my
web server from the start of another

353
00:32:13,420 --> 00:32:18,420
container from that image and to say hey
to the port 80 on that likely to be port

354
00:32:18,420 --> 00:32:22,950
8123 on the host ok and so that's
running and so I'll bring up my

355
00:32:22,950 --> 00:32:33,570
handy-dandy chrome on the Mac and well
7123 ok cool so now I've got access to

356
00:32:33,570 --> 00:32:37,980
the access the web servers running on
the containers by going to 123 so

357
00:32:37,980 --> 00:32:46,590
there's so now I've got a problem
there's no sis long-running in there but

358
00:32:46,590 --> 00:32:52,830
it's that I got my own syslog and I
don't need to I don't need to actually a

359
00:32:52,830 --> 00:32:56,659
separate syslog inside the container so
what if I want to do that this is going

360
00:32:56,660 --> 00:33:01,120
to be accessed udev log on the host or
outside of the container so basically

361
00:33:01,120 --> 00:33:06,020
what I can do as I can say okay doctor
run the same stuff I was just doing but

362
00:33:06,020 --> 00:33:10,700
let's do this let's do doctor ron and I
just started a new container from food

363
00:33:10,700 --> 00:33:16,600
is Jay but I'm gonna say I'd like to
have log on the host to be shared as

364
00:33:16,600 --> 00:33:19,409
deadlock in the container so

365
00:33:19,410 --> 00:33:44,180
who is J den Bosch Dominican trainer
just run logger log messages and there's

366
00:33:44,180 --> 00:33:50,130
my ok and so there's my log and that's
how do I know that volume alan is

367
00:33:50,130 --> 00:33:51,190
actually

368
00:33:51,190 --> 00:33:59,110
volume and actually stands oh my god
even though having the most fun time

369
00:33:59,110 --> 00:34:10,969
with the projector and now director J

370
00:34:10,969 --> 00:34:16,299
I want my slide back and I'm too dumb to
figure it out because I'm in

371
00:34:16,300 --> 00:34:22,320
presentation mode where you lose a lot
of IQ points

372
00:34:22,320 --> 00:34:29,450
and you rely rely a heck of a lot on the
people out there to be like that do no

373
00:34:29,449 --> 00:34:32,889
no no it's the other 10 thanks guys

374
00:34:32,889 --> 00:34:38,170
so this is all your mounts basically you
can take a directory or file or a bunch

375
00:34:38,170 --> 00:34:42,930
of them one by one and share them in and
that's kind of how you handle the fact

376
00:34:42,929 --> 00:34:47,629
you got this containment happening so
I'm gonna do a little bit I'm going to

377
00:34:47,630 --> 00:34:51,800
kind of break off of demo little bit
right now and say and just tell you some

378
00:34:51,800 --> 00:35:01,920
or so and I like this a lot you can
actually turn this off and tele2 you'd

379
00:35:01,920 --> 00:35:06,210
like to write all the other tables rules
yourself it also default containers talk

380
00:35:06,210 --> 00:35:10,790
to each other on the network creates
iptables rules that say any container

381
00:35:10,790 --> 00:35:15,640
can talk to any of the container on the
bridge and so you can basically what you

382
00:35:15,640 --> 00:35:23,600
get us out of publishing reports and you
get NAT rules and so on and so when we

383
00:35:23,600 --> 00:35:31,950
will publishing a poor but we ended up
getting was not rules for free so what

384
00:35:31,950 --> 00:35:40,000
else the next thing I want to do is a
container without root

385
00:35:40,000 --> 00:35:47,580
I'm sorry was that my outside branch ok
so I got all these I've got i've got

386
00:35:47,580 --> 00:35:59,680
contenders and running but let's let's
make a new doctor file and I F soccer

387
00:35:59,680 --> 00:36:04,830
file three against doctor file to you
can see what's changed what I'm gonna do

388
00:36:04,830 --> 00:36:08,720
now is it gonna take a doctor file and
say I'm gonna expose himself exposing

389
00:36:08,720 --> 00:36:13,980
port 80 minutes put exposed port 8009
run some commands that the Apache user

390
00:36:13,980 --> 00:36:21,540
own some files instead of route and so
now I'm gonna do doctor bill I'll call

391
00:36:21,540 --> 00:36:29,170
this 11 p.m. and I'll build it takes
longer because it doesn't have these

392
00:36:29,170 --> 00:36:38,370
things crashed and I just said expose
8,000 and change permissions on a few

393
00:36:38,370 --> 00:36:47,060
vials ok and now all Run Dr run dynasty
forward even when exposed port 80 on the

394
00:36:47,060 --> 00:36:57,970
rail 7 system support $8,000 on this and
say this is gonna run as user patchy and

395
00:36:57,970 --> 00:37:07,629
so now this one is called elated Corona
so I've got a leading Corona let's go

396
00:37:07,630 --> 00:37:14,950
and take a look so is looking at real
781 23 before

397
00:37:14,950 --> 00:37:22,779
and there's real 780 so this is running
so right now I'm serving a port 80 on my

398
00:37:22,780 --> 00:37:27,800
host but if you look at the container
let's go take a look at it

399
00:37:27,800 --> 00:37:33,030
ok doctor jack I T and what was this
thing

400
00:37:33,030 --> 00:37:36,609
deleted then Bosch

401
00:37:36,609 --> 00:37:44,609
that's not a Rochelle user patchy oh
everything's running as user patchy so

402
00:37:44,609 --> 00:37:48,230
this is where I get this is this is the
kind of thing I'm starting excited about

403
00:37:48,230 --> 00:37:54,130
my weight tho whole container basically
patchy didn't like before doesn't

404
00:37:54,130 --> 00:38:00,079
nonlinear system it it starts this route
and its sponsor port 80 its bonds whole

405
00:38:00,079 --> 00:38:05,180
bunch of workers and they all don't run
as root and you say okay for dr. busts a

406
00:38:05,180 --> 00:38:09,040
robust one of those workers you hope
that they can somehow get to the master

407
00:38:09,040 --> 00:38:13,369
and turn that into internet internet
access will this thing didn't start as

408
00:38:13,369 --> 00:38:16,550
root it started his own room and
actually in the container there in

409
00:38:16,550 --> 00:38:21,839
basically doesn't isn't better I won't
find anything running as root because

410
00:38:21,839 --> 00:38:26,109
everything into dinner starts at Apache
the whole containers Apache bus to shell

411
00:38:26,109 --> 00:38:29,700
and you get user patchy you don't just
get user patchy you're stuck in this

412
00:38:29,700 --> 00:38:33,609
little monkey file system that isn't
really that isn't the real hosts and if

413
00:38:33,609 --> 00:38:37,310
there are other containers running on
here well you're not in those either and

414
00:38:37,310 --> 00:38:40,180
you don't have anywhere near as much
network access as you might have had

415
00:38:40,180 --> 00:38:44,368
before so before the container like
what's one of the first iptables rules

416
00:38:44,369 --> 00:38:48,250
they like if you ever look at the vendor
or even your own iptables rules set on a

417
00:38:48,250 --> 00:38:52,280
Linux machine but one of the most
critical it seems like you always have

418
00:38:52,280 --> 00:38:57,380
to have a small local host everything on
localhost talk to localhost as I mean it

419
00:38:57,380 --> 00:39:00,369
means that any program on the box if
compromise can talk to any other network

420
00:39:00,369 --> 00:39:06,390
available program on the box so the
point here is we're now able to start

421
00:39:06,390 --> 00:39:10,390
creating firewall rules around
individual processes we take a process

422
00:39:10,390 --> 00:39:14,109
was taking a container the computer good
so it gets its own IP address that IP

423
00:39:14,109 --> 00:39:17,569
addresses that is that programs only way
to the internet it's really it's only

424
00:39:17,569 --> 00:39:20,480
when it's only way to the land you throw
on a table

425
00:39:20,480 --> 00:39:24,930
and say ok this process only these IP
addresses can reach it can only reach

426
00:39:24,930 --> 00:39:29,118
these IP addresses and now you start
getting things that we all want to do it

427
00:39:29,119 --> 00:39:34,420
or DMZ like down to not just on the
system but now down to the program and

428
00:39:34,420 --> 00:39:41,320
that's that's where that's where it's
not going well so I'm trying I'm gonna

429
00:39:41,320 --> 00:39:47,800
try and make up a little at a time by
taking us back into sliding mode so the

430
00:39:47,800 --> 00:39:50,140
next thing you can do is you can
basically say hey I want to start

431
00:39:50,140 --> 00:39:53,549
dropping capabilities and so I can say
that the entire container the same way

432
00:39:53,550 --> 00:39:58,230
as I said the entire containers non-root
if you do need to run as root but you

433
00:39:58,230 --> 00:40:02,130
can say well the entire container
basically is reportedly gets these

434
00:40:02,130 --> 00:40:06,450
capabilities we can do white lists we
can do blacklists I'm a big fan of the

435
00:40:06,450 --> 00:40:10,029
of the whitelist you basically said the
only reason that have to root access

436
00:40:10,030 --> 00:40:15,900
we'll find the port 80 cool you can have
just one capability that lets you find

437
00:40:15,900 --> 00:40:19,940
otherwise you're running as user root
and you can't actually modify these

438
00:40:19,940 --> 00:40:24,600
files in the file system unless they're
owned by root and that's really really

439
00:40:24,600 --> 00:40:27,759
fun to watch route like be like out
sorry don't have access to that file is

440
00:40:27,760 --> 00:40:34,060
owned by this user patch you know like
ok fine so anyway so the capabilities

441
00:40:34,060 --> 00:40:38,460
dropping is really need the nice thing
is doctor drops everything drops like

442
00:40:38,460 --> 00:40:42,260
everything by default except for this
list but I really like making it a much

443
00:40:42,260 --> 00:40:45,380
much smaller last year's your exercise
starter in container

444
00:40:45,380 --> 00:40:54,470
tables come and watch it not work so you
can use cap drop cap at the next part is

445
00:40:54,470 --> 00:41:00,868
that on rail so Linux system do the same
thing with Alex to you without with a

446
00:41:00,869 --> 00:41:04,720
farmer you start out you end up with a
profile

447
00:41:04,720 --> 00:41:12,319
you end up with your with your types and
what happens when she looks like I'm

448
00:41:12,320 --> 00:41:15,570
what so ever

449
00:41:15,570 --> 00:41:23,920
instead of all the different types the
programs would be withdrawn at each get

450
00:41:23,920 --> 00:41:29,830
their own page get their own compartment
with their own MCS compartment set and

451
00:41:29,830 --> 00:41:34,190
so you're able to say okay at the file
system level a container can't you know

452
00:41:34,190 --> 00:41:37,560
one container can't touch another
container stock obviously people were

453
00:41:37,560 --> 00:41:41,570
truly really going for platform as a
service here but you can use that too

454
00:41:41,570 --> 00:41:45,290
and I really enjoy that the nice thing
is that if you want you can actually

455
00:41:45,290 --> 00:41:49,840
specify whatever SELinux context you
want so if you create some nice limits

456
00:41:49,840 --> 00:41:54,530
context or given program when you want
just that you can say okay that's what

457
00:41:54,530 --> 00:41:58,580
this container runs as if this container
only runs Apache I don't need to run

458
00:41:58,580 --> 00:42:04,109
with a Spurs you know Alex CNET I can
just say I want to run we have a super

459
00:42:04,109 --> 00:42:10,549
day like to see you only get something
it's even more doubt and you end up with

460
00:42:10,550 --> 00:42:13,740
much much easier and actually honestly
if you wanted outside the container the

461
00:42:13,740 --> 00:42:18,060
whole system before and then inside the
container the thing that's actually talk

462
00:42:18,060 --> 00:42:20,869
to the network you end up having
something that's really really really

463
00:42:20,869 --> 00:42:25,950
really tight again it's just like wow I
can drop the system up I'm not going to

464
00:42:25,950 --> 00:42:29,330
move tendencies I can shop the system up
and make its that my attacker I guess I

465
00:42:29,330 --> 00:42:33,040
am able to kind of see i'm saying that
I'm on the system and my doctors on the

466
00:42:33,040 --> 00:42:36,830
system and I'd like to keep us away from
each other well at least I like to keep

467
00:42:36,830 --> 00:42:42,900
him away from me I'd like screwing him
as much as I like and so the next the

468
00:42:42,900 --> 00:42:48,089
next thing is as long as container
action going on you've got a sec you'll

469
00:42:48,089 --> 00:42:52,750
be able to start doing ideas so I you
know to do ideas in their host based on

470
00:42:52,750 --> 00:42:56,630
our face but I'm gonna choose host based
whole thing is network-based like oh ok

471
00:42:56,630 --> 00:43:00,550
well I can just on this system I could
be running stored outside if I like and

472
00:43:00,550 --> 00:43:04,339
I could have just just watched detainers
the containers network interface and I

473
00:43:04,339 --> 00:43:07,570
can see what's going in and out of you
know that that starts giving me

474
00:43:07,570 --> 00:43:08,500
something

475
00:43:08,500 --> 00:43:13,280
OSX how would I do this you have two
options with OSX you can either run OSX

476
00:43:13,280 --> 00:43:14,540
outside of all of your

477
00:43:14,540 --> 00:43:19,100
owners and haven't watched the logs and
given that it's kind of like a log based

478
00:43:19,100 --> 00:43:23,279
IDS that's really really powerful when
you're like wait a second what about all

479
00:43:23,280 --> 00:43:26,530
but about watching all the files there
watching all the files that's actually

480
00:43:26,530 --> 00:43:30,410
kind of done better inside the container
but I've got something that's running

481
00:43:30,410 --> 00:43:34,009
with a given level privilege I have to
figure out so I could call you mounted

482
00:43:34,010 --> 00:43:38,570
it's a tricky thing but the primary
purpose of the OS X we're watching logs

483
00:43:38,570 --> 00:43:41,950
you can do this with containers and you
can have a whole pile of containers and

484
00:43:41,950 --> 00:43:44,850
the great thing is that its second
actually most powerful when you're

485
00:43:44,850 --> 00:43:48,100
aggregating when you see lots and lots
of data if you've got a system that

486
00:43:48,100 --> 00:43:53,569
systems got 20 containers running on it
there you go let's do something let's do

487
00:43:53,570 --> 00:43:55,080
something else

488
00:43:55,080 --> 00:44:00,380
Josh I'm running low on time is
struggling to figure out take this

489
00:44:00,380 --> 00:44:05,390
exercise and do it it's really freaking
cool just basically take your one image

490
00:44:05,390 --> 00:44:11,129
and spin up say 20 containers and watch
them all boo'd up in about 25 seconds

491
00:44:11,130 --> 00:44:14,620
and then they're all running and you're
like this isn't like running 20 PM's on

492
00:44:14,620 --> 00:44:22,940
one machine like I 16 gigs of ram i cant
get 28 2010 if you want you can get two

493
00:44:22,940 --> 00:44:27,530
thousand and so this is the first time
given I'm giving this talk but my neck

494
00:44:27,530 --> 00:44:31,650
the next time I do it I wanna do it we
have a Raspberry Pi and see how many

495
00:44:31,650 --> 00:44:35,290
containers I can get running on a
Raspberry Pi I'd like a good hundred of

496
00:44:35,290 --> 00:44:38,660
them because I don't think you're gonna
get that many BM's on it

497
00:44:38,660 --> 00:44:42,600
ok so I've also included a whole bunch
of information for you one of the cool

498
00:44:42,600 --> 00:44:46,380
things with doctor is it's got amazing
man pages it's really really really well

499
00:44:46,380 --> 00:44:51,559
documented and now I'm gonna talk about
Alex D lightning talk format

500
00:44:51,559 --> 00:44:59,400
so he's actually elect deeds basically
Canonical's answer to this end up using

501
00:44:59,400 --> 00:45:03,769
containers in end up looking a lot like
doctor uses containers that run a lot

502
00:45:03,769 --> 00:45:06,258
more programs but it doesn't have to run
whatever you'd like a two-run

503
00:45:06,259 --> 00:45:08,829
first-inning

504
00:45:08,829 --> 00:45:12,729
a whole lot like dr. it didn't start out
that way but it's but it ended up that

505
00:45:12,729 --> 00:45:15,299
way as well you get a hold of people
using doctor and they want to actually

506
00:45:15,299 --> 00:45:19,619
have things look like the way they look
it ends up being slower than the caching

507
00:45:19,619 --> 00:45:22,670
but you can say I want to launch that
image could pull down from Central Falls

508
00:45:22,670 --> 00:45:27,469
Rhode Island's containers stored and now
you're running so once you start once

509
00:45:27,469 --> 00:45:30,489
you pull down some images this is what
you mention it might look like jealousy

510
00:45:30,489 --> 00:45:35,499
image list you can say listen and say
show me from a road Alex D server and

511
00:45:35,499 --> 00:45:38,799
actually LXT ends up being a bit more
powerful than doctor and enable the

512
00:45:38,799 --> 00:45:42,749
table how are you can have five
different systems at all running Alex do

513
00:45:42,749 --> 00:45:45,618
you get taken him and pulled down from
one pushed up to another pushed up to

514
00:45:45,619 --> 00:45:50,589
another and action star running commands
against them so we can talk inspector

515
00:45:50,589 --> 00:45:55,308
delicacy in phone and without see Config
show you notice that you end up getting

516
00:45:55,309 --> 00:46:00,319
Yemen and you end up getting JSON this
LXD actually pulls in a REST API that is

517
00:46:00,319 --> 00:46:07,119
fully document is really need to somehow
the commands but the REST API oil change

518
00:46:07,119 --> 00:46:13,119
stations the only way to put anything
anything its doors to all so you do the

519
00:46:13,119 --> 00:46:16,769
same thing doctor to doctor jack now
you're now alexei exact running she'll

520
00:46:16,769 --> 00:46:20,859
look when we look at that show we see a
lot more process these modalities

521
00:46:20,859 --> 00:46:24,869
basically been lightweight virtual
machines with all the pieces you can do

522
00:46:24,869 --> 00:46:29,170
them dr. style so we had a lot more
process easy to screw things running but

523
00:46:29,170 --> 00:46:33,039
the cool thing is that LSD is actually
running usernames basis so that you've

524
00:46:33,039 --> 00:46:35,949
got a rude in there but it's the same
reason the file system it's a route with

525
00:46:35,949 --> 00:46:40,140
its wholly different uid and that's
really really need so the other cool

526
00:46:40,140 --> 00:46:44,549
thing that you get out of containers and
especially easy in the LXD model or the

527
00:46:44,549 --> 00:46:45,509
LG mo

528
00:46:45,509 --> 00:46:49,750
snapshot of you can snap shot it you can
go and read runs

529
00:46:49,750 --> 00:46:54,020
and restore you can take a snapshot you
can publish the same way we did with

530
00:46:54,020 --> 00:46:58,310
daughter where we were committing in
sixty we publish and then delete

531
00:46:58,310 --> 00:47:01,549
original container you got that image
the cool thing is that once you could

532
00:47:01,550 --> 00:47:05,060
publish you can go and say it like
taking that election that thing a

533
00:47:05,060 --> 00:47:08,259
committed and pushed up another elegy
server to push them through their LXT

534
00:47:08,260 --> 00:47:12,790
server and then launched that server
from here you launch a container on that

535
00:47:12,790 --> 00:47:16,390
server over there and start running
commands on as if you were over there I

536
00:47:16,390 --> 00:47:19,000
know it sounds like SSH but this is
actually built right into the whole

537
00:47:19,000 --> 00:47:22,340
you've got like an orchestration
framework and it ends up being really

538
00:47:22,340 --> 00:47:26,470
really need you've got a partner in
SELinux and Alex D it's very very

539
00:47:26,470 --> 00:47:30,230
similar there do they already do the
same kind of thing I freaking love a

540
00:47:30,230 --> 00:47:35,140
farmer I like SELinux too but the cool
thing is you can start saying for that

541
00:47:35,140 --> 00:47:40,089
container I want this profile you get
capability dropping just the same way so

542
00:47:40,090 --> 00:47:45,880
you can basically created container in
elec- Stephen only has one thing lax

543
00:47:45,880 --> 00:47:49,300
stop

544
00:47:49,300 --> 00:47:53,140
you can firewall there's my wrap up
slide thank you very much

