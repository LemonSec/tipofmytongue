1
00:00:01,709 --> 00:00:09,000
thank you thank<font color="#CCCCCC"> you thank</font><font color="#E5E5E5"> you for coming</font>

2
00:00:04,580 --> 00:00:12,270
<font color="#CCCCCC">it's a little bit hot here so for those</font>

3
00:00:09,000 --> 00:00:15,780
<font color="#CCCCCC">of</font><font color="#E5E5E5"> you who will</font><font color="#CCCCCC"> be very</font><font color="#E5E5E5"> active</font><font color="#CCCCCC"> I have</font>

4
00:00:12,270 --> 00:00:19,710
this one<font color="#E5E5E5"> and trust me it it may help</font>

5
00:00:15,780 --> 00:00:24,470
here<font color="#CCCCCC"> so today</font><font color="#E5E5E5"> I'm going to talk to you</font>

6
00:00:19,710 --> 00:00:35,430
about<font color="#E5E5E5"> key league's key leaks from</font><font color="#CCCCCC"> the</font>

7
00:00:24,470 --> 00:00:37,860
cloud infrastructures before oh<font color="#E5E5E5"> okay</font>

8
00:00:35,430 --> 00:00:40,890
so before we can start let me introduce

9
00:00:37,860 --> 00:00:43,320
<font color="#CCCCCC">myself</font><font color="#E5E5E5"> my name is</font><font color="#CCCCCC"> Pavel Sherpa</font><font color="#E5E5E5"> and I'm</font>

10
00:00:40,890 --> 00:00:46,140
from securing and the senior<font color="#E5E5E5"> security</font>

11
00:00:43,320 --> 00:00:48,510
consultant<font color="#CCCCCC"> on my</font><font color="#E5E5E5"> daily basis I'm doing</font>

12
00:00:46,140 --> 00:00:52,290
penetration tests however<font color="#E5E5E5"> recently also</font>

13
00:00:48,510 --> 00:00:55,710
<font color="#E5E5E5">I'm cuz I'm doing a consultancy job in</font>

14
00:00:52,290 --> 00:00:59,550
cloud<font color="#CCCCCC"> security you can find some of my</font>

15
00:00:55,710 --> 00:01:02,219
<font color="#CCCCCC">articles</font><font color="#E5E5E5"> on the medium all my programs</font>

16
00:00:59,550 --> 00:01:05,610
<font color="#CCCCCC">today</font><font color="#E5E5E5"> I'm gonna release</font><font color="#CCCCCC"> I'm going to</font>

17
00:01:02,219 --> 00:01:08,280
talk<font color="#E5E5E5"> about two of my tools</font><font color="#CCCCCC"> you can find</font>

18
00:01:05,610 --> 00:01:12,090
it on<font color="#CCCCCC"> my github account and</font><font color="#E5E5E5"> if you're</font>

19
00:01:08,280 --> 00:01:17,150
using Twitter<font color="#E5E5E5"> here's here's the nickname</font>

20
00:01:12,090 --> 00:01:17,150
<font color="#CCCCCC">you can find me</font><font color="#E5E5E5"> there</font><font color="#CCCCCC"> all</font><font color="#E5E5E5"> right</font>

21
00:01:21,290 --> 00:01:31,920
sorry guys but<font color="#CCCCCC"> it doesn't work</font><font color="#E5E5E5"> okay</font>

22
00:01:27,200 --> 00:01:34,409
so what<font color="#E5E5E5"> are we going to</font><font color="#CCCCCC"> talk today</font><font color="#E5E5E5"> first</font>

23
00:01:31,920 --> 00:01:36,780
<font color="#E5E5E5">of all I'm gonna tell you about the key</font>

24
00:01:34,409 --> 00:01:39,810
leaks<font color="#E5E5E5"> how it is</font><font color="#CCCCCC"> possible the key leaks</font>

25
00:01:36,780 --> 00:01:41,909
in your<font color="#E5E5E5"> company and it is regardless the</font>

26
00:01:39,810 --> 00:01:44,759
service provider so no matter if you<font color="#CCCCCC"> are</font>

27
00:01:41,909 --> 00:01:49,500
using the AWS no matter if you<font color="#CCCCCC"> are using</font>

28
00:01:44,759 --> 00:01:53,280
Asia or<font color="#CCCCCC"> GCP whatever the problem is not</font>

29
00:01:49,500 --> 00:01:57,000
in<font color="#E5E5E5"> the</font><font color="#CCCCCC"> service provider and after all I</font>

30
00:01:53,280 --> 00:01:59,579
want to propose my solution to<font color="#CCCCCC"> it</font><font color="#E5E5E5"> and</font>

31
00:01:57,000 --> 00:02:02,970
also<font color="#CCCCCC"> few countermeasures that you can</font>

32
00:01:59,579 --> 00:02:05,070
implement in<font color="#CCCCCC"> your company</font><font color="#E5E5E5"> so what is the</font>

33
00:02:02,970 --> 00:02:08,848
plan first of all what<font color="#E5E5E5"> is the difference</font>

34
00:02:05,070 --> 00:02:12,540
<font color="#CCCCCC">between the passwords and keys key leaks</font>

35
00:02:08,848 --> 00:02:14,670
from<font color="#CCCCCC"> the public</font><font color="#E5E5E5"> not</font><font color="#CCCCCC"> only public</font><font color="#E5E5E5"> from the</font>

36
00:02:12,540 --> 00:02:18,220
<font color="#E5E5E5">storage containers</font>

37
00:02:14,670 --> 00:02:20,500
what<font color="#E5E5E5"> about one of our employee account</font>

38
00:02:18,220 --> 00:02:23,320
will<font color="#CCCCCC"> be compromised</font>

39
00:02:20,500 --> 00:02:27,390
what about<font color="#E5E5E5"> killings from the web</font>

40
00:02:23,320 --> 00:02:30,640
applications<font color="#E5E5E5"> and other external services</font>

41
00:02:27,390 --> 00:02:34,510
keylex<font color="#CCCCCC"> /</font><font color="#E5E5E5"> Fred parties like the github</font>

42
00:02:30,640 --> 00:02:37,000
<font color="#E5E5E5">pastebin and whatever then I will try to</font>

43
00:02:34,510 --> 00:02:40,660
<font color="#E5E5E5">explain you what the entropy</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> the</font>

44
00:02:37,000 --> 00:02:44,590
whole background<font color="#E5E5E5"> of entropy</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> how can</font>

45
00:02:40,660 --> 00:02:48,670
<font color="#E5E5E5">we implement it in some solution after</font>

46
00:02:44,590 --> 00:02:51,550
<font color="#CCCCCC">all I will talk to tell you some about</font>

47
00:02:48,670 --> 00:02:55,600
<font color="#CCCCCC">my tool dumpster diver which you can</font>

48
00:02:51,550 --> 00:02:58,810
<font color="#E5E5E5">find on github</font><font color="#CCCCCC"> and hope it will help</font><font color="#E5E5E5"> you</font>

49
00:02:55,600 --> 00:03:02,470
<font color="#E5E5E5">in</font><font color="#CCCCCC"> your companies after all there will</font>

50
00:02:58,810 --> 00:03:05,260
be countermeasures<font color="#E5E5E5"> and also one extras</font>

51
00:03:02,470 --> 00:03:08,800
but<font color="#E5E5E5"> it will be at the end so so stay</font>

52
00:03:05,260 --> 00:03:09,790
with<font color="#E5E5E5"> me</font><font color="#CCCCCC"> ok so first of all what is</font>

53
00:03:08,800 --> 00:03:13,030
<font color="#CCCCCC">difference</font><font color="#E5E5E5"> what is</font><font color="#CCCCCC"> the difference</font>

54
00:03:09,790 --> 00:03:16,420
<font color="#CCCCCC">between passwords</font><font color="#E5E5E5"> and access keys first</font>

55
00:03:13,030 --> 00:03:20,190
of all the<font color="#CCCCCC"> D access key ID</font><font color="#E5E5E5"> is actually</font>

56
00:03:16,420 --> 00:03:23,708
the same as<font color="#CCCCCC"> login</font><font color="#E5E5E5"> however it is the</font>

57
00:03:20,190 --> 00:03:26,760
random string<font color="#E5E5E5"> and the secret access key</font>

58
00:03:23,709 --> 00:03:33,880
is a password<font color="#CCCCCC"> however</font><font color="#E5E5E5"> it is even longer</font>

59
00:03:26,760 --> 00:03:37,200
<font color="#E5E5E5">even longer random string so maybe there</font>

60
00:03:33,880 --> 00:03:42,160
is no big difference<font color="#CCCCCC"> at the first</font><font color="#E5E5E5"> glance</font>

61
00:03:37,200 --> 00:03:44,649
however what is so<font color="#E5E5E5"> special the keys are</font>

62
00:03:42,160 --> 00:03:48,160
always hard-coded we are we are<font color="#CCCCCC"> learned</font>

63
00:03:44,650 --> 00:03:51,250
<font color="#E5E5E5">we are taught not</font><font color="#CCCCCC"> to hard-code passwords</font>

64
00:03:48,160 --> 00:03:53,049
and actually it is<font color="#CCCCCC"> not very common to</font>

65
00:03:51,250 --> 00:03:56,410
find<font color="#CCCCCC"> hard-coded passwords however</font>

66
00:03:53,049 --> 00:04:01,650
regarding access<font color="#E5E5E5"> keys it is really</font>

67
00:03:56,410 --> 00:04:04,750
really common<font color="#CCCCCC"> what is more we are forced</font>

68
00:04:01,650 --> 00:04:07,450
usually we<font color="#CCCCCC"> are forced to rotate</font>

69
00:04:04,750 --> 00:04:11,440
passwords<font color="#CCCCCC"> like changing the password</font>

70
00:04:07,450 --> 00:04:15,820
every 90 days<font color="#CCCCCC"> however</font><font color="#E5E5E5"> regarding access</font>

71
00:04:11,440 --> 00:04:19,000
<font color="#E5E5E5">keys it is really really rather</font>

72
00:04:15,820 --> 00:04:22,690
situation<font color="#E5E5E5"> that you are forced to rotate</font>

73
00:04:19,000 --> 00:04:25,450
your your keys especially if you<font color="#E5E5E5"> are if</font>

74
00:04:22,690 --> 00:04:27,669
you have<font color="#E5E5E5"> a couple of services</font><font color="#CCCCCC"> which are</font>

75
00:04:25,450 --> 00:04:28,420
interacting<font color="#CCCCCC"> with interacting with</font><font color="#E5E5E5"> each</font>

76
00:04:27,669 --> 00:04:31,289
other

77
00:04:28,420 --> 00:04:33,730
<font color="#E5E5E5">and those keys are not rotated and</font>

78
00:04:31,290 --> 00:04:37,630
another<font color="#E5E5E5"> interesting thing is the</font>

79
00:04:33,730 --> 00:04:39,670
multi-factor authentication<font color="#CCCCCC"> it is very</font>

80
00:04:37,630 --> 00:04:41,620
trivial example when we<font color="#CCCCCC"> are talking</font>

81
00:04:39,670 --> 00:04:44,260
about the normal login password and the

82
00:04:41,620 --> 00:04:46,120
multi-factor authentication<font color="#CCCCCC"> however if</font>

83
00:04:44,260 --> 00:04:51,240
we<font color="#CCCCCC"> are talking about the programmatic</font>

84
00:04:46,120 --> 00:04:54,610
<font color="#E5E5E5">access for AWS user or the</font><font color="#CCCCCC"> aja</font><font color="#E5E5E5"> user</font>

85
00:04:51,240 --> 00:04:58,120
multi-factor authentication<font color="#E5E5E5"> is really</font>

86
00:04:54,610 --> 00:05:00,430
difficult to<font color="#E5E5E5"> implement so you have to</font>

87
00:04:58,120 --> 00:05:02,770
implement<font color="#E5E5E5"> a separate</font><font color="#CCCCCC"> policy which will</font>

88
00:05:00,430 --> 00:05:05,980
be<font color="#CCCCCC"> enforcing</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> to use this</font>

89
00:05:02,770 --> 00:05:09,370
multi-factor<font color="#E5E5E5"> to use the MFA device I</font>

90
00:05:05,980 --> 00:05:13,330
wrote a little<font color="#E5E5E5"> guide</font><font color="#CCCCCC"> about it so if</font><font color="#E5E5E5"> any</font>

91
00:05:09,370 --> 00:05:15,880
<font color="#E5E5E5">one</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> you is interested in how to</font>

92
00:05:13,330 --> 00:05:19,330
implement it<font color="#E5E5E5"> you can you</font><font color="#CCCCCC"> can find</font><font color="#E5E5E5"> it on</font>

93
00:05:15,880 --> 00:05:22,360
medium now let's talk about<font color="#E5E5E5"> the key</font>

94
00:05:19,330 --> 00:05:27,490
leaks from<font color="#CCCCCC"> the</font><font color="#E5E5E5"> storage containers so</font>

95
00:05:22,360 --> 00:05:32,440
here's some very basic graph however

96
00:05:27,490 --> 00:05:37,840
sometimes giving the IIM<font color="#E5E5E5"> role giving the</font>

97
00:05:32,440 --> 00:05:40,240
access control is<font color="#CCCCCC"> difficult but if you</font>

98
00:05:37,840 --> 00:05:43,030
give the<font color="#CCCCCC"> public</font><font color="#E5E5E5"> access it is it always</font>

99
00:05:40,240 --> 00:05:46,330
works<font color="#CCCCCC"> so there</font><font color="#E5E5E5"> are still administrators</font>

100
00:05:43,030 --> 00:05:48,869
who<font color="#CCCCCC"> believe that</font><font color="#E5E5E5"> okay well if I give the</font>

101
00:05:46,330 --> 00:05:51,820
public<font color="#E5E5E5"> access it will</font><font color="#CCCCCC"> always work and</font>

102
00:05:48,870 --> 00:05:56,140
yeah they are still doing<font color="#E5E5E5"> it what is</font>

103
00:05:51,820 --> 00:06:00,430
more amazing<font color="#E5E5E5"> also</font><font color="#CCCCCC"> they created a group</font>

104
00:05:56,140 --> 00:06:03,960
<font color="#E5E5E5">any authenticated AWS user and literally</font>

105
00:06:00,430 --> 00:06:07,720
it means<font color="#CCCCCC"> exactly how it</font><font color="#E5E5E5"> sounds</font><font color="#CCCCCC"> so any</font>

106
00:06:03,960 --> 00:06:11,380
authenticated AWS user<font color="#E5E5E5"> that means that</font>

107
00:06:07,720 --> 00:06:14,940
if I create the free tier account that

108
00:06:11,380 --> 00:06:17,530
means<font color="#E5E5E5"> I'm</font><font color="#CCCCCC"> in this group and a lot of</font>

109
00:06:14,940 --> 00:06:22,000
<font color="#E5E5E5">administrators believe that there's</font><font color="#CCCCCC"> no</font>

110
00:06:17,530 --> 00:06:25,989
point in such group<font color="#E5E5E5"> so most likely</font><font color="#CCCCCC"> it</font>

111
00:06:22,000 --> 00:06:28,930
will referring only to my people with to

112
00:06:25,990 --> 00:06:33,790
my users which I created<font color="#E5E5E5"> under my root</font>

113
00:06:28,930 --> 00:06:36,610
account but it doesn't so this group

114
00:06:33,790 --> 00:06:38,820
<font color="#CCCCCC">currently it is</font><font color="#E5E5E5"> removed from from the UI</font>

115
00:06:36,610 --> 00:06:41,710
<font color="#E5E5E5">from the UI console when you are</font>

116
00:06:38,820 --> 00:06:42,169
configuring<font color="#CCCCCC"> the I</font><font color="#E5E5E5"> am role however you</font>

117
00:06:41,710 --> 00:06:46,099
can

118
00:06:42,169 --> 00:06:48,979
still assign it using the<font color="#CCCCCC"> I AWS CLI what</font>

119
00:06:46,099 --> 00:06:51,800
is more<font color="#E5E5E5"> this group existed from the 2006</font>

120
00:06:48,979 --> 00:06:56,930
<font color="#E5E5E5">so from the very beginning of the</font><font color="#CCCCCC"> s free</font>

121
00:06:51,800 --> 00:07:00,830
service<font color="#CCCCCC"> till the meet of 2017 11 years</font>

122
00:06:56,930 --> 00:07:06,189
<font color="#E5E5E5">so a lot of administrators use this</font>

123
00:07:00,830 --> 00:07:10,460
group now<font color="#E5E5E5"> so if we have this public</font>

124
00:07:06,189 --> 00:07:13,159
public storage<font color="#E5E5E5"> containers and well I</font>

125
00:07:10,460 --> 00:07:17,109
think<font color="#E5E5E5"> I decided to check if I can</font><font color="#CCCCCC"> find</font>

126
00:07:13,159 --> 00:07:19,669
<font color="#CCCCCC">anything interesting in</font><font color="#E5E5E5"> this so I</font>

127
00:07:17,110 --> 00:07:23,870
defined<font color="#E5E5E5"> a target like the low-hanging</font>

128
00:07:19,669 --> 00:07:29,120
<font color="#E5E5E5">fruits like any file containing backup</font>

129
00:07:23,870 --> 00:07:31,669
words so first of all there wasn't

130
00:07:29,120 --> 00:07:36,860
<font color="#E5E5E5">available as</font><font color="#CCCCCC"> scanner</font><font color="#E5E5E5"> so I created my own</font>

131
00:07:31,669 --> 00:07:41,120
<font color="#E5E5E5">which</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> the which</font><font color="#CCCCCC"> is the</font><font color="#E5E5E5"> bucket scanner</font>

132
00:07:36,860 --> 00:07:44,629
and it verifies the privileges to the

133
00:07:41,120 --> 00:07:53,060
object in the<font color="#CCCCCC"> s free bucket so here's</font>

134
00:07:44,629 --> 00:07:56,479
the manual<font color="#E5E5E5"> let's say and you</font><font color="#CCCCCC"> can define</font>

135
00:07:53,060 --> 00:07:59,300
a list of buckets<font color="#E5E5E5"> and it will simply</font>

136
00:07:56,479 --> 00:08:02,990
read the<font color="#E5E5E5"> content of the bucket if it has</font>

137
00:07:59,300 --> 00:08:05,870
the privileges<font color="#E5E5E5"> to it and also you</font><font color="#CCCCCC"> can</font>

138
00:08:02,990 --> 00:08:11,169
specify a regular<font color="#CCCCCC"> expression for each</font>

139
00:08:05,870 --> 00:08:15,110
object it will find in the bucket so<font color="#E5E5E5"> I</font>

140
00:08:11,169 --> 00:08:19,099
created a<font color="#E5E5E5"> simple list where you</font><font color="#CCCCCC"> can</font><font color="#E5E5E5"> find</font>

141
00:08:15,110 --> 00:08:22,909
those<font color="#E5E5E5"> two buckets there are test ones so</font>

142
00:08:19,099 --> 00:08:25,729
nothing spectacular now<font color="#CCCCCC"> so</font><font color="#E5E5E5"> here you are</font>

143
00:08:22,909 --> 00:08:28,399
<font color="#E5E5E5">defining the list to the list of those</font>

144
00:08:25,729 --> 00:08:32,740
buckets and<font color="#CCCCCC"> the regular</font><font color="#E5E5E5"> expression</font><font color="#CCCCCC"> to</font>

145
00:08:28,399 --> 00:08:35,269
any file containing a word<font color="#E5E5E5"> backup</font>

146
00:08:32,740 --> 00:08:39,019
<font color="#E5E5E5">another interesting thing that you can</font>

147
00:08:35,269 --> 00:08:42,709
do this<font color="#CCCCCC"> scan</font><font color="#E5E5E5"> as</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> anonymous user or you</font>

148
00:08:39,019 --> 00:08:46,519
can specify the keys so for example you

149
00:08:42,708 --> 00:08:52,219
want to<font color="#E5E5E5"> check inside</font><font color="#CCCCCC"> your company if one</font>

150
00:08:46,519 --> 00:08:55,520
user has access<font color="#CCCCCC"> to</font><font color="#E5E5E5"> those objects so in</font>

151
00:08:52,220 --> 00:08:58,460
this short<font color="#E5E5E5"> demo it it found that</font>

152
00:08:55,520 --> 00:09:05,500
<font color="#E5E5E5">okay it is collectible</font><font color="#CCCCCC"> then file backup</font>

153
00:08:58,460 --> 00:09:10,300
dot zip or the backup<font color="#CCCCCC"> target</font><font color="#E5E5E5"> cool but</font>

154
00:09:05,500 --> 00:09:14,320
now we need now we need at least an

155
00:09:10,300 --> 00:09:17,959
enormous list containing<font color="#E5E5E5"> a lot of</font>

156
00:09:14,320 --> 00:09:20,420
buckets<font color="#CCCCCC"> how we can find them first</font><font color="#E5E5E5"> of</font>

157
00:09:17,960 --> 00:09:22,490
all finding a bucket<font color="#E5E5E5"> in the Amazon</font>

158
00:09:20,420 --> 00:09:27,229
infrastructure<font color="#E5E5E5"> is actually</font><font color="#CCCCCC"> finding a</font>

159
00:09:22,490 --> 00:09:29,270
<font color="#E5E5E5">subdomain of s free Amazon</font><font color="#CCCCCC"> AWS calm you</font>

160
00:09:27,230 --> 00:09:33,680
<font color="#E5E5E5">can also refer to the bucket</font>

161
00:09:29,270 --> 00:09:37,340
using the AWS<font color="#CCCCCC"> endpoint and then the</font>

162
00:09:33,680 --> 00:09:41,599
bucket<font color="#CCCCCC"> name</font><font color="#E5E5E5"> however you this this this</font>

163
00:09:37,340 --> 00:09:45,520
one I'm using both<font color="#E5E5E5"> of both of those</font>

164
00:09:41,600 --> 00:09:48,830
links<font color="#E5E5E5"> for</font><font color="#CCCCCC"> example</font><font color="#E5E5E5"> there were a lot of</font>

165
00:09:45,520 --> 00:09:54,189
leaks<font color="#E5E5E5"> like for</font><font color="#CCCCCC"> example if you type</font><font color="#E5E5E5"> the</font>

166
00:09:48,830 --> 00:09:58,270
<font color="#E5E5E5">Chicago DB couple months ago</font><font color="#CCCCCC"> you found</font><font color="#E5E5E5"> a</font>

167
00:09:54,190 --> 00:10:02,090
<font color="#E5E5E5">backup of</font><font color="#CCCCCC"> the database containing almost</font>

168
00:09:58,270 --> 00:10:05,630
<font color="#CCCCCC">two million</font><font color="#E5E5E5"> private data of almost two</font>

169
00:10:02,090 --> 00:10:11,120
million voters in Chicago<font color="#E5E5E5"> so</font><font color="#CCCCCC"> the company</font>

170
00:10:05,630 --> 00:10:15,770
which is which was which<font color="#E5E5E5"> responsible</font><font color="#CCCCCC"> for</font>

171
00:10:11,120 --> 00:10:20,930
the technical<font color="#E5E5E5"> side</font><font color="#CCCCCC"> of voting in the US</font>

172
00:10:15,770 --> 00:10:28,130
<font color="#E5E5E5">they put their backup the backup data in</font>

173
00:10:20,930 --> 00:10:30,560
the open<font color="#E5E5E5"> bucket so if we know that we</font>

174
00:10:28,130 --> 00:10:34,850
have to find the subdomain<font color="#CCCCCC"> of s free a</font>

175
00:10:30,560 --> 00:10:37,310
AWS<font color="#E5E5E5"> comm we have some</font><font color="#CCCCCC"> options</font><font color="#E5E5E5"> for</font>

176
00:10:34,850 --> 00:10:41,030
<font color="#E5E5E5">example we can carry the third parties</font>

177
00:10:37,310 --> 00:10:44,750
like<font color="#CCCCCC"> the Google Yahoo virustotal</font><font color="#E5E5E5"> being</font>

178
00:10:41,030 --> 00:10:47,089
<font color="#E5E5E5">whoever uses being and certificate</font>

179
00:10:44,750 --> 00:10:52,550
transparency<font color="#CCCCCC"> locks</font><font color="#E5E5E5"> who's using sub</font>

180
00:10:47,090 --> 00:10:54,740
<font color="#CCCCCC">Lister anyone okay so the</font><font color="#E5E5E5"> Amos is much</font>

181
00:10:52,550 --> 00:10:56,870
better than say blister so you<font color="#E5E5E5"> stop</font>

182
00:10:54,740 --> 00:11:00,320
using sub Lister because Amos is much

183
00:10:56,870 --> 00:11:04,970
better it is actually released<font color="#E5E5E5"> it's</font>

184
00:11:00,320 --> 00:11:07,820
quite new to but it<font color="#E5E5E5"> really rules so Amos</font>

185
00:11:04,970 --> 00:11:09,230
is asking all those<font color="#CCCCCC"> French parties but</font>

186
00:11:07,820 --> 00:11:13,550
<font color="#CCCCCC">also the certificate</font>

187
00:11:09,230 --> 00:11:16,960
<font color="#E5E5E5">parents</font><font color="#CCCCCC"> locks bucket stream only</font><font color="#E5E5E5"> asks</font>

188
00:11:13,550 --> 00:11:19,250
the trial certificate transparency locks

189
00:11:16,960 --> 00:11:25,300
<font color="#E5E5E5">basically the certificate transparency</font>

190
00:11:19,250 --> 00:11:28,700
logs<font color="#E5E5E5"> is a pool containing all the</font><font color="#CCCCCC"> HTTPS</font>

191
00:11:25,300 --> 00:11:33,439
domains<font color="#CCCCCC"> so if you are if you create a</font>

192
00:11:28,700 --> 00:11:35,630
new<font color="#E5E5E5"> HTTPS domain you can find it in the</font>

193
00:11:33,440 --> 00:11:40,580
<font color="#E5E5E5">certificate transparency logs which has</font>

194
00:11:35,630 --> 00:11:42,830
an open<font color="#CCCCCC"> API and you can ask so you</font><font color="#E5E5E5"> can</font>

195
00:11:40,580 --> 00:11:48,590
ask it so it's a great source of

196
00:11:42,830 --> 00:11:51,800
subdomains<font color="#CCCCCC"> what</font><font color="#E5E5E5"> is more you</font><font color="#CCCCCC"> can</font><font color="#E5E5E5"> find you</font>

197
00:11:48,590 --> 00:11:55,610
can<font color="#E5E5E5"> ask the</font><font color="#CCCCCC"> wayback machine</font><font color="#E5E5E5"> so wayback</font>

198
00:11:51,800 --> 00:11:57,800
machine is<font color="#E5E5E5"> actually the archive.org</font><font color="#CCCCCC"> it's</font>

199
00:11:55,610 --> 00:12:01,160
the<font color="#CCCCCC"> bots which scrolling all the</font>

200
00:11:57,800 --> 00:12:05,150
<font color="#E5E5E5">internet finding the picture or file and</font>

201
00:12:01,160 --> 00:12:09,339
doing a copy of it<font color="#E5E5E5"> however if this bot</font>

202
00:12:05,150 --> 00:12:12,829
finds just one photo of<font color="#E5E5E5"> in your bucket</font>

203
00:12:09,340 --> 00:12:16,040
<font color="#CCCCCC">then you can just pull the name of the</font>

204
00:12:12,830 --> 00:12:21,410
bucket<font color="#E5E5E5"> from it and see if if it contains</font>

205
00:12:16,040 --> 00:12:24,650
much more<font color="#CCCCCC"> than</font><font color="#E5E5E5"> just those photo so I did</font>

206
00:12:21,410 --> 00:12:27,650
such little research use only those

207
00:12:24,650 --> 00:12:33,590
methods<font color="#E5E5E5"> that appear</font><font color="#CCCCCC"> here and I found</font>

208
00:12:27,650 --> 00:12:36,890
almost 25,000 valid buckets<font color="#CCCCCC"> 21% of them</font>

209
00:12:33,590 --> 00:12:39,830
so far more<font color="#E5E5E5"> than</font><font color="#CCCCCC"> 5,000 has</font><font color="#E5E5E5"> their public</font>

210
00:12:36,890 --> 00:12:44,260
<font color="#E5E5E5">read access of course not all of them</font>

211
00:12:39,830 --> 00:12:48,260
contain<font color="#E5E5E5"> something sensitive however I</font>

212
00:12:44,260 --> 00:12:50,270
found thousands<font color="#E5E5E5"> of backup files and they</font>

213
00:12:48,260 --> 00:12:54,650
are still<font color="#CCCCCC"> there nobody is doing anything</font>

214
00:12:50,270 --> 00:12:58,939
with<font color="#E5E5E5"> it and inside</font><font color="#CCCCCC"> of those backup files</font>

215
00:12:54,650 --> 00:13:02,840
there are<font color="#CCCCCC"> a lot of scripts config files</font>

216
00:12:58,940 --> 00:13:06,130
containing passwords to services

217
00:13:02,840 --> 00:13:10,250
containing private keys SSH keys

218
00:13:06,130 --> 00:13:13,790
<font color="#E5E5E5">containing whole databases</font><font color="#CCCCCC"> even if the</font>

219
00:13:10,250 --> 00:13:18,680
password is is hashed<font color="#E5E5E5"> it is not there is</font>

220
00:13:13,790 --> 00:13:22,730
no no salt used so what about Asia

221
00:13:18,680 --> 00:13:23,550
maybe<font color="#E5E5E5"> Amazon sucks and Asia is better so</font>

222
00:13:22,730 --> 00:13:25,920
first of all

223
00:13:23,550 --> 00:13:30,750
there's no groups like any authenticated

224
00:13:25,920 --> 00:13:34,949
Asian or user<font color="#E5E5E5"> that's good and to find</font>

225
00:13:30,750 --> 00:13:38,340
also the to be<font color="#CCCCCC"> able</font><font color="#E5E5E5"> to list the content</font>

226
00:13:34,950 --> 00:13:40,530
of the container you<font color="#CCCCCC"> have to find two</font>

227
00:13:38,340 --> 00:13:43,320
variables<font color="#CCCCCC"> so the storage account name</font>

228
00:13:40,530 --> 00:13:46,220
<font color="#E5E5E5">and the container name however the</font>

229
00:13:43,320 --> 00:13:49,260
<font color="#E5E5E5">problem is still there that still</font>

230
00:13:46,220 --> 00:13:53,940
administrators<font color="#E5E5E5"> believe that it is</font>

231
00:13:49,260 --> 00:13:55,740
<font color="#E5E5E5">undetectable</font><font color="#CCCCCC"> but it is</font><font color="#E5E5E5"> okay</font><font color="#CCCCCC"> he leaks</font><font color="#E5E5E5"> via</font>

232
00:13:53,940 --> 00:13:57,930
compromised account if you remember this

233
00:13:55,740 --> 00:14:00,960
is<font color="#CCCCCC"> my little research</font><font color="#E5E5E5"> at the bucket</font>

234
00:13:57,930 --> 00:14:07,550
scanner the tool that I show<font color="#CCCCCC"> you</font><font color="#E5E5E5"> it also</font>

235
00:14:00,960 --> 00:14:12,120
has the possibility to<font color="#E5E5E5"> test the upload</font>

236
00:14:07,550 --> 00:14:17,160
upload the upload privileges<font color="#E5E5E5"> and 6% of</font>

237
00:14:12,120 --> 00:14:21,720
<font color="#E5E5E5">those 25,000 buckets allows me to write</font>

238
00:14:17,160 --> 00:14:24,480
file<font color="#CCCCCC"> write and overwrite file</font><font color="#E5E5E5"> so even if</font>

239
00:14:21,720 --> 00:14:26,940
I<font color="#CCCCCC"> don't</font><font color="#E5E5E5"> have a privilege to delete a</font>

240
00:14:24,480 --> 00:14:30,410
file<font color="#E5E5E5"> I can</font><font color="#CCCCCC"> overwrite it with</font><font color="#E5E5E5"> the empty</font>

241
00:14:26,940 --> 00:14:35,340
file<font color="#E5E5E5"> right which is basically the same</font>

242
00:14:30,410 --> 00:14:40,020
<font color="#CCCCCC">so now imagine</font><font color="#E5E5E5"> the following scenario if</font>

243
00:14:35,340 --> 00:14:41,790
all the employees be<font color="#E5E5E5"> trust the bucket</font>

244
00:14:40,020 --> 00:14:45,360
<font color="#CCCCCC">because</font><font color="#E5E5E5"> this is the bucket of the</font>

245
00:14:41,790 --> 00:14:48,510
company right so if I<font color="#CCCCCC"> overwrite a</font>

246
00:14:45,360 --> 00:14:51,720
trusted file then it will go to the all

247
00:14:48,510 --> 00:14:55,770
employees right<font color="#E5E5E5"> so it's a great source</font>

248
00:14:51,720 --> 00:14:58,590
of distribution<font color="#E5E5E5"> malware and if it is</font>

249
00:14:55,770 --> 00:15:03,990
used by<font color="#CCCCCC"> the</font><font color="#E5E5E5"> external service then you</font>

250
00:14:58,590 --> 00:15:08,700
can go<font color="#E5E5E5"> to your customers all right so of</font>

251
00:15:03,990 --> 00:15:12,210
course there<font color="#E5E5E5"> are numerous</font><font color="#CCCCCC"> ways to to in</font>

252
00:15:08,700 --> 00:15:15,540
fact employees computer you<font color="#CCCCCC"> are the</font>

253
00:15:12,210 --> 00:15:17,790
experts yourself<font color="#E5E5E5"> you know exactly how it</font>

254
00:15:15,540 --> 00:15:20,339
works<font color="#E5E5E5"> however</font><font color="#CCCCCC"> on the compromised</font>

255
00:15:17,790 --> 00:15:23,969
computer there are you can find<font color="#CCCCCC"> always</font>

256
00:15:20,340 --> 00:15:28,950
the local config files<font color="#E5E5E5"> and is also</font><font color="#CCCCCC"> if if</font>

257
00:15:23,970 --> 00:15:32,010
you are<font color="#E5E5E5"> using the AWS there is dot AWS</font>

258
00:15:28,950 --> 00:15:35,130
credentials<font color="#E5E5E5"> and all the keys are stored</font>

259
00:15:32,010 --> 00:15:37,080
there so<font color="#E5E5E5"> enforcing multi-factor</font>

260
00:15:35,130 --> 00:15:40,830
authentication is a must

261
00:15:37,080 --> 00:15:44,490
it may be quite problematic<font color="#CCCCCC"> however</font>

262
00:15:40,830 --> 00:15:49,200
still<font color="#E5E5E5"> I'm I wrote this this guide how to</font>

263
00:15:44,490 --> 00:15:53,640
implement such policy<font color="#CCCCCC"> hope it is quite</font>

264
00:15:49,200 --> 00:15:59,250
<font color="#CCCCCC">easy</font><font color="#E5E5E5"> to implement interesting attitude</font>

265
00:15:53,640 --> 00:16:02,819
<font color="#E5E5E5">to manage the privileges is the Netflix</font>

266
00:15:59,250 --> 00:16:07,050
<font color="#CCCCCC">wrap up it so it uses</font><font color="#E5E5E5"> the access</font><font color="#CCCCCC"> advisor</font>

267
00:16:02,820 --> 00:16:09,840
<font color="#E5E5E5">and basically if I you if I have a lot</font>

268
00:16:07,050 --> 00:16:12,810
of privileges<font color="#E5E5E5"> a lot of roles assigned to</font>

269
00:16:09,840 --> 00:16:15,780
my account then<font color="#E5E5E5"> the wrap up</font><font color="#CCCCCC"> it verifies</font>

270
00:16:12,810 --> 00:16:20,280
<font color="#CCCCCC">ok you didn't use this this rule this</font>

271
00:16:15,780 --> 00:16:25,380
role for 30 days<font color="#CCCCCC"> so it is really it is</font>

272
00:16:20,280 --> 00:16:28,040
<font color="#E5E5E5">streamed from your account</font><font color="#CCCCCC"> killings from</font>

273
00:16:25,380 --> 00:16:32,730
<font color="#E5E5E5">the web applications this is not very</font>

274
00:16:28,040 --> 00:16:36,329
well<font color="#CCCCCC"> known so this is actually example</font>

275
00:16:32,730 --> 00:16:38,460
of one<font color="#CCCCCC"> of my project</font><font color="#E5E5E5"> which I have so</font>

276
00:16:36,330 --> 00:16:40,590
there was a web application<font color="#CCCCCC"> which has</font>

277
00:16:38,460 --> 00:16:43,530
the<font color="#CCCCCC"> bad</font><font color="#E5E5E5"> simple functionality</font><font color="#CCCCCC"> of</font>

278
00:16:40,590 --> 00:16:47,220
<font color="#E5E5E5">uploading the file however when you</font>

279
00:16:43,530 --> 00:16:50,339
intercept<font color="#E5E5E5"> the traffic you could observe</font>

280
00:16:47,220 --> 00:16:53,460
that there is a<font color="#CCCCCC"> Java Script which is</font>

281
00:16:50,340 --> 00:16:55,680
actually<font color="#CCCCCC"> asking the external IP for the</font>

282
00:16:53,460 --> 00:16:58,410
keys it verifies my cookie if I'm

283
00:16:55,680 --> 00:17:05,089
authenticated<font color="#E5E5E5"> any vs it gives me the</font>

284
00:16:58,410 --> 00:17:09,659
keys<font color="#E5E5E5"> and STS token and having it I I was</font>

285
00:17:05,089 --> 00:17:13,050
<font color="#E5E5E5">directly uploading files to</font><font color="#CCCCCC"> the bucket</font>

286
00:17:09,660 --> 00:17:15,990
however with those keys<font color="#E5E5E5"> and the STS</font>

287
00:17:13,050 --> 00:17:23,430
token<font color="#E5E5E5"> I was</font><font color="#CCCCCC"> able</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> read all the content</font>

288
00:17:15,990 --> 00:17:27,720
of these buckets<font color="#CCCCCC"> and another topic which</font>

289
00:17:23,430 --> 00:17:31,560
<font color="#CCCCCC">is only</font><font color="#E5E5E5"> can be only visible in cloud</font>

290
00:17:27,720 --> 00:17:35,510
infrastructure<font color="#CCCCCC"> Keys vehicle eeks</font><font color="#E5E5E5"> via</font>

291
00:17:31,560 --> 00:17:38,399
metadata so there are some

292
00:17:35,510 --> 00:17:42,660
vulnerabilities like unattended proxy or

293
00:17:38,400 --> 00:17:46,560
the server site request forgery<font color="#CCCCCC"> and they</font>

294
00:17:42,660 --> 00:17:49,080
can they can become extremely<font color="#E5E5E5"> dangerous</font>

295
00:17:46,560 --> 00:17:50,879
<font color="#E5E5E5">in cloud so imagine the following</font>

296
00:17:49,080 --> 00:17:54,840
situation there is a web

297
00:17:50,880 --> 00:17:56,850
application<font color="#E5E5E5"> and your customer says</font><font color="#CCCCCC"> okay</font>

298
00:17:54,840 --> 00:17:59,370
my application doesn't<font color="#CCCCCC"> he doesn't</font>

299
00:17:56,850 --> 00:18:04,350
interact with<font color="#E5E5E5"> any other services there</font>

300
00:17:59,370 --> 00:18:07,139
<font color="#E5E5E5">is no back end there is no DMZ so I can</font>

301
00:18:04,350 --> 00:18:10,949
accept the<font color="#CCCCCC"> risk of server site request</font>

302
00:18:07,140 --> 00:18:14,190
forgery<font color="#CCCCCC"> okay</font><font color="#E5E5E5"> but then they move to</font><font color="#CCCCCC"> the</font>

303
00:18:10,950 --> 00:18:19,860
cloud and using the same vulnerability

304
00:18:14,190 --> 00:18:25,140
<font color="#CCCCCC">you can</font><font color="#E5E5E5"> access the metadata now how it's</font>

305
00:18:19,860 --> 00:18:29,699
how it can look like<font color="#E5E5E5"> so imagine there is</font>

306
00:18:25,140 --> 00:18:34,350
<font color="#E5E5E5">a web application and after the proxy</font>

307
00:18:29,700 --> 00:18:37,790
parameter<font color="#E5E5E5"> you can type any resource like</font>

308
00:18:34,350 --> 00:18:43,850
for<font color="#CCCCCC"> example the webpage and it</font><font color="#E5E5E5"> will be</font>

309
00:18:37,790 --> 00:18:48,000
reflected<font color="#E5E5E5"> reflected using via this</font>

310
00:18:43,850 --> 00:18:53,909
application so if I access the metadata

311
00:18:48,000 --> 00:19:00,660
of<font color="#E5E5E5"> the</font><font color="#CCCCCC"> web application there you</font><font color="#E5E5E5"> can</font>

312
00:18:53,910 --> 00:19:05,580
find<font color="#E5E5E5"> the credentials of a user which is</font>

313
00:19:00,660 --> 00:19:09,690
<font color="#E5E5E5">assigned to this to this instance on</font>

314
00:19:05,580 --> 00:19:13,290
which the application is hosted so here

315
00:19:09,690 --> 00:19:17,340
are the metadata<font color="#E5E5E5"> and the security</font>

316
00:19:13,290 --> 00:19:21,480
credentials<font color="#E5E5E5"> in the security credentials</font>

317
00:19:17,340 --> 00:19:24,240
there is a role assigned to the<font color="#CCCCCC"> two</font>

318
00:19:21,480 --> 00:19:30,330
today instance<font color="#E5E5E5"> on which the application</font>

319
00:19:24,240 --> 00:19:33,180
is hosted and inside of<font color="#E5E5E5"> it</font><font color="#CCCCCC"> you can</font><font color="#E5E5E5"> find</font>

320
00:19:30,330 --> 00:19:38,730
the access keys<font color="#CCCCCC"> the secret access</font><font color="#E5E5E5"> keys</font>

321
00:19:33,180 --> 00:19:41,640
and token so now let's let's go through

322
00:19:38,730 --> 00:19:45,360
through it<font color="#CCCCCC"> again with with little more</font>

323
00:19:41,640 --> 00:19:49,500
explanation<font color="#E5E5E5"> so metadata is the data</font>

324
00:19:45,360 --> 00:19:55,199
about your instance<font color="#E5E5E5"> so the private IP</font>

325
00:19:49,500 --> 00:20:00,990
address the MAC address<font color="#CCCCCC"> etc</font><font color="#E5E5E5"> and the same</font>

326
00:19:55,200 --> 00:20:04,290
concept works in AWS and Asia<font color="#CCCCCC"> you can</font>

327
00:20:00,990 --> 00:20:07,790
refer using this special<font color="#CCCCCC"> other</font>

328
00:20:04,290 --> 00:20:12,500
<font color="#E5E5E5">to your metadata now who can tell me</font>

329
00:20:07,790 --> 00:20:12,500
what<font color="#E5E5E5"> is so</font><font color="#CCCCCC"> special about</font><font color="#E5E5E5"> this address</font>

330
00:20:12,530 --> 00:20:21,870
sorry indeed indeed

331
00:20:18,060 --> 00:20:26,610
first it's for you<font color="#E5E5E5"> enjoy</font>

332
00:20:21,870 --> 00:20:29,820
exactly<font color="#E5E5E5"> it it is not Ruta below dress so</font>

333
00:20:26,610 --> 00:20:32,909
it works only in one network segment

334
00:20:29,820 --> 00:20:35,790
that means that if if you<font color="#E5E5E5"> are logged</font>

335
00:20:32,910 --> 00:20:38,820
<font color="#CCCCCC">into</font><font color="#E5E5E5"> your ec2 instance then</font><font color="#CCCCCC"> you can</font>

336
00:20:35,790 --> 00:20:41,159
refer the metadata<font color="#E5E5E5"> of this instance</font>

337
00:20:38,820 --> 00:20:45,350
however if I type the<font color="#CCCCCC"> same address</font><font color="#E5E5E5"> in my</font>

338
00:20:41,160 --> 00:20:49,530
<font color="#E5E5E5">local browser it will shows me nothing</font>

339
00:20:45,350 --> 00:20:53,399
<font color="#CCCCCC">and talking</font><font color="#E5E5E5"> about the</font><font color="#CCCCCC"> asier</font><font color="#E5E5E5"> here is not</font>

340
00:20:49,530 --> 00:20:56,730
<font color="#E5E5E5">the I am but identity however still you</font>

341
00:20:53,400 --> 00:20:59,220
can refer you<font color="#CCCCCC"> can access it using the</font>

342
00:20:56,730 --> 00:21:04,560
the same address and<font color="#CCCCCC"> access the shirt</font>

343
00:20:59,220 --> 00:21:09,410
<font color="#E5E5E5">key</font><font color="#CCCCCC"> okay</font><font color="#E5E5E5"> how can we sell how can we such</font>

344
00:21:04,560 --> 00:21:13,200
catch such<font color="#CCCCCC"> leaks</font><font color="#E5E5E5"> automated tools will</font>

345
00:21:09,410 --> 00:21:16,590
<font color="#CCCCCC">usually fail and</font><font color="#E5E5E5"> steal penetration tests</font>

346
00:21:13,200 --> 00:21:21,030
are a medium so<font color="#E5E5E5"> pen testers don't be</font>

347
00:21:16,590 --> 00:21:26,850
afraid of cloud helix<font color="#E5E5E5"> over third parties</font>

348
00:21:21,030 --> 00:21:31,740
so we<font color="#CCCCCC"> are used to use services like</font>

349
00:21:26,850 --> 00:21:34,770
<font color="#CCCCCC">Stack Overflow right so we people</font><font color="#E5E5E5"> type</font>

350
00:21:31,740 --> 00:21:38,220
the snippet of<font color="#CCCCCC"> the code to the</font><font color="#E5E5E5"> Stack</font>

351
00:21:34,770 --> 00:21:41,280
<font color="#E5E5E5">Overflow and</font><font color="#CCCCCC"> asks hey</font><font color="#E5E5E5"> mama did this code</font>

352
00:21:38,220 --> 00:21:44,610
doesn't work<font color="#CCCCCC"> can you</font><font color="#E5E5E5"> help me or on forum</font>

353
00:21:41,280 --> 00:21:48,540
or<font color="#CCCCCC"> on paste bin or whatever else</font>

354
00:21:44,610 --> 00:21:52,679
however in cloud you have<font color="#CCCCCC"> to type the</font>

355
00:21:48,540 --> 00:21:57,330
access<font color="#E5E5E5"> keys there to be able to run this</font>

356
00:21:52,680 --> 00:22:02,010
script<font color="#E5E5E5"> and unfortunately it is a source</font>

357
00:21:57,330 --> 00:22:05,939
<font color="#E5E5E5">of many key leaks</font><font color="#CCCCCC"> for example here's the</font>

358
00:22:02,010 --> 00:22:09,780
paste bin<font color="#E5E5E5"> and someone just shirt</font><font color="#CCCCCC"> in a</font>

359
00:22:05,940 --> 00:22:12,000
secure way<font color="#CCCCCC"> keys</font><font color="#E5E5E5"> right however the</font><font color="#CCCCCC"> paste</font>

360
00:22:09,780 --> 00:22:16,200
<font color="#CCCCCC">Biscay still can be</font><font color="#E5E5E5"> you know</font><font color="#CCCCCC"> it is</font>

361
00:22:12,000 --> 00:22:18,870
analyzed all the<font color="#CCCCCC"> time by both</font>

362
00:22:16,200 --> 00:22:20,760
and this is quite<font color="#E5E5E5"> interesting</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> you</font>

363
00:22:18,870 --> 00:22:24,779
don't have to use<font color="#E5E5E5"> github to see your</font>

364
00:22:20,760 --> 00:22:26,970
<font color="#E5E5E5">kids there and this is</font><font color="#CCCCCC"> the story from</font>

365
00:22:24,779 --> 00:22:29,490
the<font color="#CCCCCC"> previous year</font><font color="#E5E5E5"> from the company</font>

366
00:22:26,970 --> 00:22:34,230
called<font color="#E5E5E5"> all in</font><font color="#CCCCCC"> data</font><font color="#E5E5E5"> has anyone heard</font>

367
00:22:29,490 --> 00:22:39,720
<font color="#E5E5E5">about this all in data company</font><font color="#CCCCCC"> okay</font><font color="#E5E5E5"> not</font>

368
00:22:34,230 --> 00:22:43,080
a lot<font color="#CCCCCC"> so there was they</font><font color="#E5E5E5"> were hiring a</font>

369
00:22:39,720 --> 00:22:46,860
new engineer<font color="#E5E5E5"> okay so the</font><font color="#CCCCCC"> Walter who is</font>

370
00:22:43,080 --> 00:22:50,490
<font color="#E5E5E5">the CEO of this company</font><font color="#CCCCCC"> he decided that</font>

371
00:22:46,860 --> 00:22:54,570
<font color="#E5E5E5">he will create a user for the</font>

372
00:22:50,490 --> 00:22:58,049
interviewee<font color="#E5E5E5"> he gives him</font><font color="#CCCCCC"> the access</font><font color="#E5E5E5"> keys</font>

373
00:22:54,570 --> 00:23:01,139
and this interviewee has to solve some

374
00:22:58,049 --> 00:23:04,710
problem<font color="#E5E5E5"> so he has to write a solution</font>

375
00:23:01,139 --> 00:23:07,889
<font color="#E5E5E5">and then this solution will be analyzed</font>

376
00:23:04,710 --> 00:23:10,200
by<font color="#CCCCCC"> the engineers from Olin data and they</font>

377
00:23:07,889 --> 00:23:13,469
will decide if<font color="#E5E5E5"> this guy knows knows the</font>

378
00:23:10,200 --> 00:23:16,289
<font color="#CCCCCC">staff or</font><font color="#E5E5E5"> not</font><font color="#CCCCCC"> however this guy he</font>

379
00:23:13,470 --> 00:23:20,820
<font color="#E5E5E5">uploaded all the his solution</font><font color="#CCCCCC"> to his</font>

380
00:23:16,289 --> 00:23:23,789
public github right<font color="#E5E5E5"> and he shared with</font>

381
00:23:20,820 --> 00:23:26,760
the engineer from<font color="#CCCCCC"> Olin data only the</font>

382
00:23:23,789 --> 00:23:31,110
link to his github so of course the

383
00:23:26,760 --> 00:23:34,740
engineer<font color="#E5E5E5"> was senior enough to report it</font>

384
00:23:31,110 --> 00:23:37,699
<font color="#E5E5E5">to Walter said oh wait our keys are on</font>

385
00:23:34,740 --> 00:23:41,909
<font color="#CCCCCC">the</font><font color="#E5E5E5"> public github so they are already</font>

386
00:23:37,700 --> 00:23:45,450
<font color="#E5E5E5">leaked Walter was very busy</font><font color="#CCCCCC"> because it</font>

387
00:23:41,909 --> 00:23:48,809
was the Friday afternoon<font color="#E5E5E5"> so he said ok I</font>

388
00:23:45,450 --> 00:23:51,779
will do it<font color="#CCCCCC"> after after the weekend</font><font color="#E5E5E5"> now</font>

389
00:23:48,809 --> 00:24:02,330
question to you what happened<font color="#E5E5E5"> after</font><font color="#CCCCCC"> the</font>

390
00:23:51,779 --> 00:24:07,590
<font color="#E5E5E5">weekend</font><font color="#CCCCCC"> and his suggestions sorry indeed</font>

391
00:24:02,330 --> 00:24:13,168
<font color="#E5E5E5">so after just one weekend</font><font color="#CCCCCC"> by the</font><font color="#E5E5E5"> way</font>

392
00:24:07,590 --> 00:24:17,250
it's for<font color="#E5E5E5"> you so to come later</font><font color="#CCCCCC"> ok after</font>

393
00:24:13,169 --> 00:24:20,730
<font color="#CCCCCC">the weekend so after just 2 3 days</font><font color="#E5E5E5"> if he</font>

394
00:24:17,250 --> 00:24:26,039
saw<font color="#E5E5E5"> that there is he's supposed to pay</font>

395
00:24:20,730 --> 00:24:28,640
almost<font color="#CCCCCC"> $100,000</font><font color="#E5E5E5"> why because the role was</font>

396
00:24:26,039 --> 00:24:33,950
<font color="#CCCCCC">given which was given this</font>

397
00:24:28,640 --> 00:24:38,380
him the possibility to run<font color="#E5E5E5"> any new</font>

398
00:24:33,950 --> 00:24:42,230
instance<font color="#E5E5E5"> so the criminals they took and</font>

399
00:24:38,380 --> 00:24:44,990
started<font color="#E5E5E5"> the biggest instance in every</font>

400
00:24:42,230 --> 00:24:50,000
<font color="#CCCCCC">region in the world</font><font color="#E5E5E5"> and then started</font>

401
00:24:44,990 --> 00:24:54,410
mining cryptocurrency<font color="#CCCCCC"> so now you can see</font>

402
00:24:50,000 --> 00:24:57,860
how that well<font color="#E5E5E5"> it is it is quite usual</font>

403
00:24:54,410 --> 00:25:01,550
<font color="#CCCCCC">and</font><font color="#E5E5E5"> actually</font><font color="#CCCCCC"> during one of</font><font color="#E5E5E5"> our project</font>

404
00:24:57,860 --> 00:25:03,709
<font color="#CCCCCC">we'll</font><font color="#E5E5E5"> also observed that on our own</font>

405
00:25:01,550 --> 00:25:09,129
infrastructure of<font color="#CCCCCC"> our</font><font color="#E5E5E5"> customer there is</font>

406
00:25:03,710 --> 00:25:12,170
<font color="#E5E5E5">running active</font><font color="#CCCCCC"> cryptocurrency miner</font>

407
00:25:09,130 --> 00:25:15,440
<font color="#CCCCCC">alright so how can</font><font color="#E5E5E5"> we catch such leaks</font>

408
00:25:12,170 --> 00:25:19,730
<font color="#E5E5E5">of course we have tools like truffle hog</font>

409
00:25:15,440 --> 00:25:22,910
<font color="#E5E5E5">has anyone uses truffle hog</font><font color="#CCCCCC"> two people</font>

410
00:25:19,730 --> 00:25:27,500
<font color="#E5E5E5">okay</font><font color="#CCCCCC"> so there is</font><font color="#E5E5E5"> also the get secret</font>

411
00:25:22,910 --> 00:25:30,650
which which<font color="#CCCCCC"> is</font><font color="#E5E5E5"> analyzing</font><font color="#CCCCCC"> the your github</font>

412
00:25:27,500 --> 00:25:33,800
<font color="#E5E5E5">and github repository and it is</font>

413
00:25:30,650 --> 00:25:38,630
<font color="#CCCCCC">analyzing also the logs of it so if if</font>

414
00:25:33,800 --> 00:25:42,500
you type in<font color="#CCCCCC"> if any comet</font><font color="#E5E5E5"> includes the</font>

415
00:25:38,630 --> 00:25:45,290
keys then those tools will find it<font color="#E5E5E5"> so it</font>

416
00:25:42,500 --> 00:25:49,190
is a good way to before publishing<font color="#E5E5E5"> any</font>

417
00:25:45,290 --> 00:25:52,250
repository<font color="#CCCCCC"> it is a good way to scan it</font>

418
00:25:49,190 --> 00:25:55,640
using such tools<font color="#E5E5E5"> however I thought wait</font>

419
00:25:52,250 --> 00:25:58,280
<font color="#CCCCCC">I found</font><font color="#E5E5E5"> keys not only in the github</font>

420
00:25:55,640 --> 00:26:02,560
repositories<font color="#E5E5E5"> so I would like to see</font><font color="#CCCCCC"> a</font>

421
00:25:58,280 --> 00:26:06,680
tool which is able<font color="#CCCCCC"> to find those keys in</font>

422
00:26:02,560 --> 00:26:11,169
any readable file so I decided<font color="#E5E5E5"> to create</font>

423
00:26:06,680 --> 00:26:15,580
<font color="#CCCCCC">my own now</font><font color="#E5E5E5"> how entropy can help us</font>

424
00:26:11,170 --> 00:26:20,270
so before before this<font color="#CCCCCC"> lets do a</font><font color="#E5E5E5"> little</font>

425
00:26:15,580 --> 00:26:23,840
challenge<font color="#E5E5E5"> that showing that manual</font>

426
00:26:20,270 --> 00:26:27,110
search is<font color="#CCCCCC"> ineffective</font><font color="#E5E5E5"> so we as a human</font>

427
00:26:23,840 --> 00:26:29,689
beings are working like<font color="#CCCCCC"> that that first</font>

428
00:26:27,110 --> 00:26:31,879
of all we have to define a target<font color="#E5E5E5"> let's</font>

429
00:26:29,690 --> 00:26:35,300
say it will be the empty Pepsi bottle

430
00:26:31,880 --> 00:26:39,380
<font color="#CCCCCC">okay now what is specific</font><font color="#E5E5E5"> about this</font>

431
00:26:35,300 --> 00:26:42,230
<font color="#CCCCCC">object well the</font><font color="#E5E5E5"> logo for sure right so</font>

432
00:26:39,380 --> 00:26:45,500
now there<font color="#CCCCCC"> is there is a little challenge</font>

433
00:26:42,230 --> 00:26:49,190
remind you that there are<font color="#E5E5E5"> awards to win</font>

434
00:26:45,500 --> 00:26:52,340
<font color="#E5E5E5">so fight</font><font color="#CCCCCC"> an empty Pepsi bottle</font><font color="#E5E5E5"> on the</font>

435
00:26:49,190 --> 00:26:53,870
<font color="#E5E5E5">next slide okay so hooves who finds it</font>

436
00:26:52,340 --> 00:26:56,178
please raise<font color="#CCCCCC"> your hand I will</font><font color="#E5E5E5"> give you a</font>

437
00:26:53,870 --> 00:26:58,449
pointer you<font color="#E5E5E5"> will show</font><font color="#CCCCCC"> me and I give you</font>

438
00:26:56,179 --> 00:27:04,160
anything good you can<font color="#E5E5E5"> we choose even the</font>

439
00:26:58,450 --> 00:27:13,990
NFC NFC toolkit<font color="#E5E5E5"> all right three two</font><font color="#CCCCCC"> one</font>

440
00:27:04,160 --> 00:27:24,049
let's start<font color="#CCCCCC"> where's the Pepsi yeah we're</font>

441
00:27:13,990 --> 00:27:31,630
back yeah come on it's it's it's a mute

442
00:27:24,049 --> 00:27:31,629
box<font color="#E5E5E5"> it's not Pepsi it's a milk box where</font>

443
00:27:32,380 --> 00:27:48,500
again<font color="#CCCCCC"> exactly</font><font color="#E5E5E5"> it's there</font><font color="#CCCCCC"> ah</font><font color="#E5E5E5"> yeah for you</font>

444
00:27:41,049 --> 00:27:50,600
<font color="#E5E5E5">do you have them yeah now you know there</font>

445
00:27:48,500 --> 00:27:53,120
are those<font color="#E5E5E5"> those services intelligence</font>

446
00:27:50,600 --> 00:27:56,299
services that can<font color="#E5E5E5"> detect any</font><font color="#CCCCCC"> object in</font>

447
00:27:53,120 --> 00:27:58,850
the<font color="#E5E5E5"> images right now it will be quite</font>

448
00:27:56,299 --> 00:28:03,889
challenging<font color="#E5E5E5"> for</font><font color="#CCCCCC"> all those intelligent</font>

449
00:27:58,850 --> 00:28:07,010
engines<font color="#CCCCCC"> so going back to our research</font>

450
00:28:03,890 --> 00:28:12,200
<font color="#E5E5E5">now what characteristics we</font><font color="#CCCCCC"> can say</font>

451
00:28:07,010 --> 00:28:16,090
<font color="#CCCCCC">about the access keys so what is so</font>

452
00:28:12,200 --> 00:28:16,090
<font color="#E5E5E5">special about them any suggestions</font>

453
00:28:16,570 --> 00:28:31,909
perfect high entropy what else<font color="#CCCCCC"> okay</font>

454
00:28:25,520 --> 00:28:34,730
thank<font color="#E5E5E5"> you</font><font color="#CCCCCC"> any other suggestions so the</font>

455
00:28:31,910 --> 00:28:36,940
high entropy<font color="#CCCCCC"> we will go</font><font color="#E5E5E5"> back</font><font color="#CCCCCC"> to it what</font>

456
00:28:34,730 --> 00:28:36,940
else

457
00:28:37,000 --> 00:28:43,940
base64 what else<font color="#E5E5E5"> and the length</font><font color="#CCCCCC"> exactly</font>

458
00:28:41,140 --> 00:28:46,640
<font color="#CCCCCC">so we found all of them so they have</font>

459
00:28:43,940 --> 00:28:49,970
<font color="#E5E5E5">fixed length</font><font color="#CCCCCC"> all of the keys are always</font>

460
00:28:46,640 --> 00:28:53,030
the<font color="#CCCCCC"> same length what</font><font color="#E5E5E5"> is more the keys</font>

461
00:28:49,970 --> 00:28:55,280
<font color="#CCCCCC">the car the characters from from the</font>

462
00:28:53,030 --> 00:28:56,360
keys are always coming from<font color="#E5E5E5"> the</font><font color="#CCCCCC"> base64</font>

463
00:28:55,280 --> 00:29:00,050
<font color="#E5E5E5">cars</font>

464
00:28:56,360 --> 00:29:05,540
and they are random<font color="#E5E5E5"> what means they have</font>

465
00:29:00,050 --> 00:29:09,730
high entropy<font color="#E5E5E5"> so yeah guys you replied</font>

466
00:29:05,540 --> 00:29:12,710
good who<font color="#E5E5E5"> who else was</font><font color="#CCCCCC"> with good yeah</font>

467
00:29:09,730 --> 00:29:16,540
<font color="#E5E5E5">okay come</font><font color="#CCCCCC"> to me later</font><font color="#E5E5E5"> okay that's that's</font>

468
00:29:12,710 --> 00:29:20,270
two<font color="#CCCCCC"> of them waiting for you now</font>

469
00:29:16,540 --> 00:29:28,430
what is the entropy<font color="#E5E5E5"> any suggestions what</font>

470
00:29:20,270 --> 00:29:33,250
<font color="#E5E5E5">is the entropy so some random</font>

471
00:29:28,430 --> 00:29:33,250
<font color="#CCCCCC">information</font><font color="#E5E5E5"> okay maybe an</font><font color="#CCCCCC"> easier</font><font color="#E5E5E5"> yeah</font>

472
00:29:43,660 --> 00:29:50,780
yeah yeah you pretty good<font color="#E5E5E5"> the definition</font>

473
00:29:47,840 --> 00:29:52,639
is quite quite long but<font color="#CCCCCC"> it's pretty</font><font color="#E5E5E5"> good</font>

474
00:29:50,780 --> 00:29:57,170
I<font color="#E5E5E5"> can give you later that you are</font>

475
00:29:52,640 --> 00:30:00,050
<font color="#E5E5E5">whatever you like but simplifying</font><font color="#CCCCCC"> to</font>

476
00:29:57,170 --> 00:30:05,060
your<font color="#CCCCCC"> definition the entropy means</font>

477
00:30:00,050 --> 00:30:10,629
disorder<font color="#E5E5E5"> so this this shows much higher</font>

478
00:30:05,060 --> 00:30:16,340
entropy than<font color="#CCCCCC"> this one right makes sense</font>

479
00:30:10,630 --> 00:30:19,100
so going to<font color="#E5E5E5"> be more scientific</font><font color="#CCCCCC"> Yuki we</font>

480
00:30:16,340 --> 00:30:22,459
can use the probability<font color="#CCCCCC"> so for example</font>

481
00:30:19,100 --> 00:30:26,300
<font color="#CCCCCC">imagine the three</font><font color="#E5E5E5"> boxes and let's count</font>

482
00:30:22,460 --> 00:30:28,790
the probability of taking<font color="#E5E5E5"> any ball so</font>

483
00:30:26,300 --> 00:30:31,010
for<font color="#E5E5E5"> example in the first you can see</font>

484
00:30:28,790 --> 00:30:33,409
that only white balls there so the

485
00:30:31,010 --> 00:30:37,930
<font color="#CCCCCC">probability of finding the</font><font color="#E5E5E5"> white ball is</font>

486
00:30:33,410 --> 00:30:42,080
<font color="#E5E5E5">one so there is low entropy yeah here</font>

487
00:30:37,930 --> 00:30:47,210
<font color="#CCCCCC">most</font><font color="#E5E5E5"> likely you will find the white ball</font>

488
00:30:42,080 --> 00:30:50,030
<font color="#E5E5E5">however however it is still the more the</font>

489
00:30:47,210 --> 00:30:55,430
more biggest<font color="#E5E5E5"> probability is to find a</font>

490
00:30:50,030 --> 00:30:58,639
bloody white ball<font color="#CCCCCC"> and indeed</font><font color="#E5E5E5"> third</font>

491
00:30:55,430 --> 00:31:02,330
<font color="#E5E5E5">bucket is the highest entropy comparing</font>

492
00:30:58,640 --> 00:31:04,760
all those<font color="#CCCCCC"> free</font><font color="#E5E5E5"> buckets</font><font color="#CCCCCC"> so there was a</font>

493
00:31:02,330 --> 00:31:08,000
guy<font color="#CCCCCC"> called cloud Shannon do</font><font color="#E5E5E5"> you know</font>

494
00:31:04,760 --> 00:31:09,960
this guy<font color="#CCCCCC"> oh yeah you</font><font color="#E5E5E5"> should know him</font>

495
00:31:08,000 --> 00:31:13,770
he's he's a father<font color="#E5E5E5"> only</font>

496
00:31:09,960 --> 00:31:17,490
of information theory<font color="#E5E5E5"> so he found the</font>

497
00:31:13,770 --> 00:31:20,700
formula<font color="#E5E5E5"> how to count the entropy first</font>

498
00:31:17,490 --> 00:31:23,549
of all it takes the probability and<font color="#E5E5E5"> the</font>

499
00:31:20,700 --> 00:31:27,360
<font color="#CCCCCC">end number is the number of</font><font color="#E5E5E5"> classes</font><font color="#CCCCCC"> so</font>

500
00:31:23,549 --> 00:31:30,149
if we go<font color="#E5E5E5"> to our example here we have two</font>

501
00:31:27,360 --> 00:31:32,729
classes<font color="#CCCCCC"> so one class is finding a black</font>

502
00:31:30,149 --> 00:31:37,139
black ball and finding a white ball is

503
00:31:32,730 --> 00:31:41,460
another one if we have the<font color="#CCCCCC"> BAE base64</font>

504
00:31:37,140 --> 00:31:43,529
then it will be naturally all the

505
00:31:41,460 --> 00:31:46,380
<font color="#E5E5E5">classes all</font><font color="#CCCCCC"> the characters that it's</font>

506
00:31:43,529 --> 00:31:50,370
possible<font color="#E5E5E5"> to</font><font color="#CCCCCC"> find in the base64 cars it</font>

507
00:31:46,380 --> 00:31:53,850
so as I said he's he's<font color="#CCCCCC"> the information</font>

508
00:31:50,370 --> 00:31:57,239
theory father<font color="#E5E5E5"> and he found for</font><font color="#CCCCCC"> example</font>

509
00:31:53,850 --> 00:31:59,399
the signal sampling<font color="#E5E5E5"> theory so thanks to</font>

510
00:31:57,240 --> 00:32:02,370
<font color="#E5E5E5">this guy we have the digital</font><font color="#CCCCCC"> signal link</font>

511
00:31:59,399 --> 00:32:06,270
currently so every IT guy I believe<font color="#CCCCCC"> he</font>

512
00:32:02,370 --> 00:32:09,689
<font color="#CCCCCC">should know</font><font color="#E5E5E5"> the cloud channel</font><font color="#CCCCCC"> alright</font><font color="#E5E5E5"> so</font>

513
00:32:06,270 --> 00:32:14,549
how to count it in practice here is the

514
00:32:09,690 --> 00:32:20,340
<font color="#CCCCCC">40 byte hash</font><font color="#E5E5E5"> and using this formula this</font>

515
00:32:14,549 --> 00:32:22,679
hash has three dot<font color="#CCCCCC"> 57 entropy using the</font>

516
00:32:20,340 --> 00:32:29,059
string<font color="#E5E5E5"> like Chuck</font><font color="#CCCCCC"> Norris</font><font color="#E5E5E5"> counted to</font>

517
00:32:22,679 --> 00:32:33,870
infinity<font color="#E5E5E5"> 20 twice has 3.81 entropy</font>

518
00:32:29,059 --> 00:32:37,139
here's another string with shrug<font color="#E5E5E5"> but it</font>

519
00:32:33,870 --> 00:32:42,178
contains characters out of<font color="#E5E5E5"> base64 so we</font>

520
00:32:37,140 --> 00:32:47,730
shouldn't analyze it<font color="#E5E5E5"> and comparing</font><font color="#CCCCCC"> to it</font>

521
00:32:42,179 --> 00:32:51,090
the AWS secret key has the 4.67 entropy

522
00:32:47,730 --> 00:32:54,500
<font color="#CCCCCC">alright so you can see the significant</font>

523
00:32:51,090 --> 00:32:57,510
difference between<font color="#E5E5E5"> the</font><font color="#CCCCCC"> other strings and</font>

524
00:32:54,500 --> 00:33:00,270
when I was<font color="#E5E5E5"> doing those experiments</font><font color="#CCCCCC"> on</font>

525
00:32:57,510 --> 00:33:02,940
many AWS secret<font color="#CCCCCC"> keys so I was rotating</font>

526
00:33:00,270 --> 00:33:05,639
it<font color="#CCCCCC"> and rotating it and content and</font><font color="#E5E5E5"> I</font>

527
00:33:02,940 --> 00:33:13,080
found that they have always entropy

528
00:33:05,640 --> 00:33:15,990
higher than 4.3 so finally we are going

529
00:33:13,080 --> 00:33:19,080
<font color="#E5E5E5">to to the tool which I want to present</font>

530
00:33:15,990 --> 00:33:21,500
you the dumpster diver<font color="#CCCCCC"> it has even the</font>

531
00:33:19,080 --> 00:33:23,970
ASCII art

532
00:33:21,500 --> 00:33:26,610
main features<font color="#CCCCCC"> first</font><font color="#E5E5E5"> of all it's open</font>

533
00:33:23,970 --> 00:33:29,510
source<font color="#E5E5E5"> so it's free so on the MIT</font>

534
00:33:26,610 --> 00:33:32,399
license so<font color="#CCCCCC"> you can do whatever you like</font>

535
00:33:29,510 --> 00:33:35,400
<font color="#E5E5E5">it uses Shannon entropy to find the</font>

536
00:33:32,400 --> 00:33:38,790
private keys<font color="#E5E5E5"> in any readable file it</font>

537
00:33:35,400 --> 00:33:41,190
will search any<font color="#E5E5E5"> archive so if it is a</font>

538
00:33:38,790 --> 00:33:45,180
zipped without password<font color="#E5E5E5"> or any other</font>

539
00:33:41,190 --> 00:33:48,000
protection it will it will unpack it and

540
00:33:45,180 --> 00:33:50,850
<font color="#E5E5E5">analyze every file inside of this</font>

541
00:33:48,000 --> 00:33:53,580
archive it searches also<font color="#E5E5E5"> for the</font><font color="#CCCCCC"> Geats</font>

542
00:33:50,850 --> 00:33:56,309
repositories so if you are using the

543
00:33:53,580 --> 00:33:58,860
truffle<font color="#CCCCCC"> hawk</font><font color="#E5E5E5"> then this tool</font><font color="#CCCCCC"> I believe</font>

544
00:33:56,309 --> 00:34:01,260
it's<font color="#E5E5E5"> like the truffle</font><font color="#CCCCCC"> hawk</font><font color="#E5E5E5"> on steroids</font>

545
00:33:58,860 --> 00:34:08,879
<font color="#CCCCCC">so it will analyze every file but also</font>

546
00:34:01,260 --> 00:34:12,030
<font color="#E5E5E5">find the key leaks in the in the in the</font>

547
00:34:08,879 --> 00:34:15,960
<font color="#E5E5E5">gig it locks</font><font color="#CCCCCC"> and what is more</font><font color="#E5E5E5"> it</font>

548
00:34:12,030 --> 00:34:17,760
supports advanced search<font color="#CCCCCC"> but regarding</font>

549
00:34:15,960 --> 00:34:22,918
<font color="#E5E5E5">this I will show you in a moment</font>

550
00:34:17,760 --> 00:34:29,669
<font color="#E5E5E5">so quick demo quick demo</font><font color="#CCCCCC"> of dumpster</font>

551
00:34:22,918 --> 00:34:31,918
diver<font color="#CCCCCC"> so this is Python</font><font color="#E5E5E5"> 3 and it is</font>

552
00:34:29,668 --> 00:34:35,580
<font color="#E5E5E5">pretty pretty simple right so</font><font color="#CCCCCC"> you're</font>

553
00:34:31,918 --> 00:34:38,219
<font color="#E5E5E5">specifying the local path</font><font color="#CCCCCC"> so let's say</font>

554
00:34:35,580 --> 00:34:41,668
you are<font color="#E5E5E5"> downloading the content</font><font color="#CCCCCC"> of all</font>

555
00:34:38,219 --> 00:34:43,918
<font color="#CCCCCC">the buckets to your</font><font color="#E5E5E5"> local disk and then</font>

556
00:34:41,668 --> 00:34:49,109
you are specifying<font color="#E5E5E5"> using the parameter</font>

557
00:34:43,918 --> 00:34:52,830
you are<font color="#CCCCCC"> specifying the path</font><font color="#E5E5E5"> to this yeah</font>

558
00:34:49,110 --> 00:34:56,429
<font color="#E5E5E5">so let's let's let's check out it in</font>

559
00:34:52,830 --> 00:35:00,840
practice here you can see yeah you<font color="#CCCCCC"> can</font>

560
00:34:56,429 --> 00:35:04,530
see some<font color="#CCCCCC"> test</font><font color="#E5E5E5"> folder and inside</font><font color="#CCCCCC"> of it I</font>

561
00:35:00,840 --> 00:35:10,560
hide bucket scanner zip and the mail

562
00:35:04,530 --> 00:35:16,470
mail file<font color="#E5E5E5"> ok so such two files one file</font>

563
00:35:10,560 --> 00:35:19,850
<font color="#CCCCCC">one archive and in less than</font><font color="#E5E5E5"> second in</font>

564
00:35:16,470 --> 00:35:23,250
less than second<font color="#E5E5E5"> it found it found the</font>

565
00:35:19,850 --> 00:35:25,049
entropy<font color="#E5E5E5"> the high entropy</font><font color="#CCCCCC"> what is so</font>

566
00:35:23,250 --> 00:35:28,340
special about this tool you can specify

567
00:35:25,050 --> 00:35:31,109
the length<font color="#CCCCCC"> an intrical</font><font color="#E5E5E5"> hoc</font><font color="#CCCCCC"> it's it's</font>

568
00:35:28,340 --> 00:35:33,210
generated a lot of<font color="#E5E5E5"> false</font><font color="#CCCCCC"> positives</font>

569
00:35:31,109 --> 00:35:34,980
<font color="#E5E5E5">however in the dumpster diver you can</font>

570
00:35:33,210 --> 00:35:38,040
specify the length so for exam

571
00:35:34,980 --> 00:35:40,859
you are searching<font color="#E5E5E5"> only</font><font color="#CCCCCC"> 40 byte strings</font>

572
00:35:38,040 --> 00:35:43,259
<font color="#E5E5E5">so only the AWS</font><font color="#CCCCCC"> keys but</font><font color="#E5E5E5"> if you are</font>

573
00:35:40,859 --> 00:35:46,230
<font color="#CCCCCC">searching</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> injure keys you</font><font color="#E5E5E5"> are</font>

574
00:35:43,260 --> 00:35:52,830
<font color="#CCCCCC">specifying the length of</font><font color="#E5E5E5"> your keys</font><font color="#CCCCCC"> so it</font>

575
00:35:46,230 --> 00:35:55,470
can be customized<font color="#E5E5E5"> okay now</font><font color="#CCCCCC"> so here yeah</font>

576
00:35:52,830 --> 00:35:58,740
<font color="#CCCCCC">it's it shows that it is in the</font>

577
00:35:55,470 --> 00:36:01,080
extracted file so it created<font color="#E5E5E5"> the another</font>

578
00:35:58,740 --> 00:36:04,080
folder where all the extracted files

579
00:36:01,080 --> 00:36:06,930
from the archive<font color="#CCCCCC"> are put first of all</font>

580
00:36:04,080 --> 00:36:10,799
let's see in<font color="#E5E5E5"> the in the mail file so it</font>

581
00:36:06,930 --> 00:36:15,419
<font color="#E5E5E5">found in the mail file we are going</font>

582
00:36:10,800 --> 00:36:18,480
and yes the<font color="#E5E5E5"> origina brinda so the same</font>

583
00:36:15,420 --> 00:36:23,280
f2 started the string starting from f2

584
00:36:18,480 --> 00:36:28,200
it found it<font color="#E5E5E5"> found this this string right</font>

585
00:36:23,280 --> 00:36:32,940
<font color="#CCCCCC">another one is the in this zip archive</font>

586
00:36:28,200 --> 00:36:37,109
there was a git repository<font color="#CCCCCC"> I know it is</font>

587
00:36:32,940 --> 00:36:40,650
not<font color="#E5E5E5"> very readable</font><font color="#CCCCCC"> however it the idea is</font>

588
00:36:37,109 --> 00:36:46,440
only<font color="#E5E5E5"> to point it that you can find the</font>

589
00:36:40,650 --> 00:36:49,530
access keys in the git repository<font color="#E5E5E5"> so so</font>

590
00:36:46,440 --> 00:36:52,260
going<font color="#E5E5E5"> to more so having such information</font>

591
00:36:49,530 --> 00:37:00,530
you can manually simply go to the git

592
00:36:52,260 --> 00:37:07,500
folder so let's unzip the archive then

593
00:37:00,530 --> 00:37:10,290
you are<font color="#E5E5E5"> finding a bucket scanner folder</font>

594
00:37:07,500 --> 00:37:14,180
and in the bucket scanner<font color="#E5E5E5"> there is the</font>

595
00:37:10,290 --> 00:37:18,630
dot<font color="#E5E5E5"> gate</font><font color="#CCCCCC"> ok folder so going there and</font>

596
00:37:14,180 --> 00:37:22,100
<font color="#E5E5E5">using the get lock -</font><font color="#CCCCCC"> P you can</font><font color="#E5E5E5"> see the</font>

597
00:37:18,630 --> 00:37:25,890
differences in<font color="#E5E5E5"> the comet so in the comet</font>

598
00:37:22,100 --> 00:37:28,440
which is tagged with<font color="#E5E5E5"> message oops forgot</font>

599
00:37:25,890 --> 00:37:35,040
to remove<font color="#E5E5E5"> keys you can find that those</font>

600
00:37:28,440 --> 00:37:37,109
keys really<font color="#CCCCCC"> exists there ok so I</font>

601
00:37:35,040 --> 00:37:40,980
mentioned<font color="#E5E5E5"> the dumpster diver also has</font>

602
00:37:37,109 --> 00:37:43,230
the ability<font color="#CCCCCC"> to do an advanced search so</font>

603
00:37:40,980 --> 00:37:45,780
what is the advanced<font color="#E5E5E5"> search first of all</font>

604
00:37:43,230 --> 00:37:47,180
it<font color="#E5E5E5"> can do a simple grep so if you are</font>

605
00:37:45,780 --> 00:37:51,710
analyzing

606
00:37:47,180 --> 00:37:53,680
<font color="#CCCCCC">a lot a lot of files</font><font color="#E5E5E5"> then you can for</font>

607
00:37:51,710 --> 00:37:58,010
example<font color="#CCCCCC"> just want to</font><font color="#E5E5E5"> simply grab</font>

608
00:37:53,680 --> 00:38:01,460
something right<font color="#CCCCCC"> you can create a simple</font>

609
00:37:58,010 --> 00:38:04,160
<font color="#CCCCCC">rules like for example the</font><font color="#E5E5E5"> mail leaks</font><font color="#CCCCCC"> so</font>

610
00:38:01,460 --> 00:38:09,579
if it<font color="#CCCCCC"> finds in the file types</font><font color="#E5E5E5"> like DB or</font>

611
00:38:04,160 --> 00:38:12,200
<font color="#E5E5E5">SQL</font><font color="#CCCCCC"> more</font><font color="#E5E5E5"> than</font><font color="#CCCCCC"> ten males</font><font color="#E5E5E5"> then it will</font>

612
00:38:09,579 --> 00:38:15,200
that the rule will be<font color="#CCCCCC"> triggered and you</font>

613
00:38:12,200 --> 00:38:19,520
will be<font color="#E5E5E5"> notified and of course we it</font>

614
00:38:15,200 --> 00:38:22,368
supports<font color="#E5E5E5"> the wildcards and you can you</font>

615
00:38:19,520 --> 00:38:24,559
can specify a lot of them so if any of

616
00:38:22,369 --> 00:38:28,790
<font color="#E5E5E5">it will be triggered then you will be</font>

617
00:38:24,559 --> 00:38:31,400
notified<font color="#CCCCCC"> okay so use case you use case</font>

618
00:38:28,790 --> 00:38:34,040
scenario which I see scanning big

619
00:38:31,400 --> 00:38:37,520
volumes of data manually is<font color="#E5E5E5"> quite</font>

620
00:38:34,040 --> 00:38:39,380
ineffective<font color="#E5E5E5"> so</font><font color="#CCCCCC"> damn survivor will</font>

621
00:38:37,520 --> 00:38:43,940
quickly do it<font color="#E5E5E5"> for you because it</font>

622
00:38:39,380 --> 00:38:48,290
supports multi processing<font color="#CCCCCC"> another way</font>

623
00:38:43,940 --> 00:38:51,799
how<font color="#CCCCCC"> you</font><font color="#E5E5E5"> can use it is to create a quasi</font>

624
00:38:48,290 --> 00:38:53,779
data leak prevention system<font color="#E5E5E5"> so imagine</font>

625
00:38:51,799 --> 00:38:56,270
the following situation you have a

626
00:38:53,780 --> 00:38:59,450
bucket all the employees<font color="#CCCCCC"> are putting the</font>

627
00:38:56,270 --> 00:39:03,319
files to<font color="#E5E5E5"> this bucket and if a new file</font>

628
00:38:59,450 --> 00:39:07,220
is in<font color="#CCCCCC"> the</font><font color="#E5E5E5"> bucket then the</font><font color="#CCCCCC"> la AWS lambda</font>

629
00:39:03,319 --> 00:39:12,500
or<font color="#E5E5E5"> HR functions is triggered the file is</font>

630
00:39:07,220 --> 00:39:14,660
scant<font color="#E5E5E5"> and if it if it contains some some</font>

631
00:39:12,500 --> 00:39:17,569
<font color="#E5E5E5">grey pink words which</font><font color="#CCCCCC"> you don't want or</font>

632
00:39:14,660 --> 00:39:21,828
the high entropy then<font color="#E5E5E5"> it will be blocked</font>

633
00:39:17,569 --> 00:39:23,900
<font color="#E5E5E5">and your and you will</font><font color="#CCCCCC"> be notified if not</font>

634
00:39:21,829 --> 00:39:29,809
then it<font color="#CCCCCC"> will be placed in the right</font>

635
00:39:23,900 --> 00:39:33,829
bucket<font color="#E5E5E5"> now</font><font color="#CCCCCC"> this tool</font><font color="#E5E5E5"> is quite fresh so</font>

636
00:39:29,809 --> 00:39:36,589
any<font color="#E5E5E5"> feedback about</font><font color="#CCCCCC"> it any suggestions</font>

637
00:39:33,829 --> 00:39:41,020
what this tool can do are more than

638
00:39:36,589 --> 00:39:44,359
welcome<font color="#CCCCCC"> yeah this tool is on an MIT</font>

639
00:39:41,020 --> 00:39:46,119
license so if you want just just go do

640
00:39:44,359 --> 00:39:51,348
whatever you<font color="#CCCCCC"> are you like</font>

641
00:39:46,119 --> 00:39:53,930
countermeasures so first of<font color="#E5E5E5"> all set</font>

642
00:39:51,349 --> 00:39:56,780
proper access<font color="#CCCCCC"> to your resources</font><font color="#E5E5E5"> it</font><font color="#CCCCCC"> is</font>

643
00:39:53,930 --> 00:40:00,470
easier to say than to do however<font color="#E5E5E5"> if you</font>

644
00:39:56,780 --> 00:40:03,109
have<font color="#E5E5E5"> the</font><font color="#CCCCCC"> large and complex</font><font color="#E5E5E5"> architecture</font>

645
00:40:00,470 --> 00:40:05,799
however you can you can use like<font color="#CCCCCC"> the</font>

646
00:40:03,109 --> 00:40:09,290
repo<font color="#CCCCCC"> kit from the Netflix to help you</font>

647
00:40:05,800 --> 00:40:11,840
encrypt<font color="#E5E5E5"> files at rest it seems to be</font>

648
00:40:09,290 --> 00:40:15,560
<font color="#CCCCCC">obvious but</font><font color="#E5E5E5"> still too little too little</font>

649
00:40:11,840 --> 00:40:19,070
people are doing it<font color="#CCCCCC"> allow access only</font>

650
00:40:15,560 --> 00:40:21,890
<font color="#E5E5E5">from VPN seems to be trivial</font><font color="#CCCCCC"> enforce</font>

651
00:40:19,070 --> 00:40:24,560
<font color="#E5E5E5">using multi-factor authentication</font><font color="#CCCCCC"> again</font>

652
00:40:21,890 --> 00:40:28,609
if you have<font color="#E5E5E5"> the problems with setting it</font>

653
00:40:24,560 --> 00:40:31,670
up in the AWS infrastructure<font color="#E5E5E5"> read my</font>

654
00:40:28,609 --> 00:40:34,880
guide<font color="#CCCCCC"> create</font><font color="#E5E5E5"> a process of verifying</font>

655
00:40:31,670 --> 00:40:37,609
stored data<font color="#CCCCCC"> so so every</font><font color="#E5E5E5"> every file</font><font color="#CCCCCC"> that</font>

656
00:40:34,880 --> 00:40:42,200
you are<font color="#CCCCCC"> going to publish</font><font color="#E5E5E5"> to store</font>

657
00:40:37,609 --> 00:40:46,310
scan it<font color="#CCCCCC"> ok and above all test</font><font color="#E5E5E5"> your</font>

658
00:40:42,200 --> 00:40:49,460
environment<font color="#E5E5E5"> if you want to practice</font><font color="#CCCCCC"> your</font>

659
00:40:46,310 --> 00:40:52,369
<font color="#CCCCCC">skills</font><font color="#E5E5E5"> there was a challenge before the</font>

660
00:40:49,460 --> 00:40:56,660
confidence called<font color="#CCCCCC"> krk analytical who</font><font color="#E5E5E5"> is</font>

661
00:40:52,369 --> 00:41:01,640
playing it okay just just few<font color="#CCCCCC"> of them</font><font color="#E5E5E5"> a</font>

662
00:40:56,660 --> 00:41:03,680
few<font color="#CCCCCC"> of you ok so if you</font><font color="#E5E5E5"> however I got</font>

663
00:41:01,640 --> 00:41:07,490
quite positive feedback about this

664
00:41:03,680 --> 00:41:10,129
<font color="#CCCCCC">challenge so we decided to</font><font color="#E5E5E5"> leave</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> the</font>

665
00:41:07,490 --> 00:41:13,569
infrastructure<font color="#CCCCCC"> of it and you</font><font color="#E5E5E5"> are very</font>

666
00:41:10,130 --> 00:41:15,530
welcome<font color="#CCCCCC"> to</font><font color="#E5E5E5"> play it so here's the</font>

667
00:41:13,570 --> 00:41:23,960
<font color="#CCCCCC">description of the challenge</font>

668
00:41:15,530 --> 00:41:26,750
go find<font color="#CCCCCC"> legally Keys ok so that's all</font>

669
00:41:23,960 --> 00:41:34,970
<font color="#E5E5E5">from my side do you guys have any</font>

670
00:41:26,750 --> 00:41:36,530
questions<font color="#E5E5E5"> yeah just wanted</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> ask about</font>

671
00:41:34,970 --> 00:41:51,500
the first tool you<font color="#CCCCCC"> are showing this</font>

672
00:41:36,530 --> 00:41:54,650
bucket scanner for sure yeah why because

673
00:41:51,500 --> 00:41:57,170
actually it is just just exchanging the

674
00:41:54,650 --> 00:42:00,320
<font color="#CCCCCC">de method this is responsible for</font>

675
00:41:57,170 --> 00:42:03,770
<font color="#E5E5E5">reading</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> d object so if you change</font>

676
00:42:00,320 --> 00:42:07,880
<font color="#E5E5E5">these change</font><font color="#CCCCCC"> these</font><font color="#E5E5E5"> the methods reading</font>

677
00:42:03,770 --> 00:42:10,180
back that<font color="#E5E5E5"> I</font><font color="#CCCCCC"> denoted a drop box</font><font color="#E5E5E5"> then</font><font color="#CCCCCC"> it</font>

678
00:42:07,880 --> 00:42:13,200
will it will

679
00:42:10,180 --> 00:42:15,598
of course on MIT<font color="#E5E5E5"> I</font>

680
00:42:13,200 --> 00:42:17,939
all the tools<font color="#E5E5E5"> aren't publishing I'm</font>

681
00:42:15,599 --> 00:42:21,300
doing<font color="#CCCCCC"> always on</font><font color="#E5E5E5"> MIT</font><font color="#CCCCCC"> I still</font><font color="#E5E5E5"> believe that</font>

682
00:42:17,940 --> 00:42:23,520
<font color="#E5E5E5">we</font><font color="#CCCCCC"> as a community should</font><font color="#E5E5E5"> give to the</font>

683
00:42:21,300 --> 00:42:26,070
<font color="#E5E5E5">something to</font><font color="#CCCCCC"> the community I'm using a</font>

684
00:42:23,520 --> 00:42:28,920
lot of<font color="#E5E5E5"> open source</font><font color="#CCCCCC"> tools so it would be</font>

685
00:42:26,070 --> 00:42:31,260
awesome<font color="#E5E5E5"> if anyone can use mine</font><font color="#CCCCCC"> ok so the</font>

686
00:42:28,920 --> 00:42:33,540
second<font color="#CCCCCC"> question</font><font color="#E5E5E5"> is also connected a bit</font>

687
00:42:31,260 --> 00:42:35,520
to the community thing because I seen<font color="#CCCCCC"> on</font>

688
00:42:33,540 --> 00:42:37,740
your<font color="#CCCCCC"> I think</font><font color="#E5E5E5"> second slide that the</font>

689
00:42:35,520 --> 00:42:39,990
access<font color="#E5E5E5"> keys differ from the passwords</font>

690
00:42:37,740 --> 00:42:43,290
<font color="#E5E5E5">because they are stored they are used to</font>

691
00:42:39,990 --> 00:42:45,029
be stored<font color="#E5E5E5"> in plain text in different so</font>

692
00:42:43,290 --> 00:42:47,339
perhaps we should<font color="#E5E5E5"> try to encourage</font>

693
00:42:45,030 --> 00:42:55,470
everyone not<font color="#CCCCCC"> to do this</font><font color="#E5E5E5"> so for example</font>

694
00:42:47,339 --> 00:42:57,420
we are using<font color="#E5E5E5"> vault to protect that could</font>

695
00:42:55,470 --> 00:43:02,700
be used but I guess we should avoid

696
00:42:57,420 --> 00:43:05,369
<font color="#E5E5E5">slice like this and yes definitely</font>

697
00:43:02,700 --> 00:43:08,578
thank you very<font color="#E5E5E5"> much</font><font color="#CCCCCC"> and for 2</font><font color="#E5E5E5"> questions</font>

698
00:43:05,369 --> 00:43:17,430
<font color="#E5E5E5">you have a special</font><font color="#CCCCCC"> prize</font><font color="#E5E5E5"> yes thank you</font>

699
00:43:08,579 --> 00:43:23,430
any other questions yeah<font color="#E5E5E5"> right now</font>

700
00:43:17,430 --> 00:43:28,529
<font color="#E5E5E5">putting false case seems to be effective</font>

701
00:43:23,430 --> 00:43:31,649
tactic to make<font color="#E5E5E5"> noise to trigger</font><font color="#CCCCCC"> false</font>

702
00:43:28,530 --> 00:43:33,900
positive on<font color="#E5E5E5"> all files if I put false</font>

703
00:43:31,650 --> 00:43:39,109
<font color="#CCCCCC">Keys</font><font color="#E5E5E5"> yeah high entropy strings on all</font>

704
00:43:33,900 --> 00:43:42,540
files<font color="#CCCCCC"> indeed it would generate</font><font color="#E5E5E5"> a lot of</font>

705
00:43:39,109 --> 00:43:47,520
right now it would<font color="#E5E5E5"> work work right yes</font>

706
00:43:42,540 --> 00:43:50,220
yes<font color="#E5E5E5"> however well again</font><font color="#CCCCCC"> where for example</font>

707
00:43:47,520 --> 00:43:53,759
<font color="#E5E5E5">when you are testing the truffle hog it</font>

708
00:43:50,220 --> 00:43:56,578
was<font color="#E5E5E5"> scanning it was giving you a lot of</font>

709
00:43:53,760 --> 00:43:59,760
<font color="#E5E5E5">false</font><font color="#CCCCCC"> positives</font><font color="#E5E5E5"> because it was for</font>

710
00:43:56,579 --> 00:44:03,240
example<font color="#CCCCCC"> seeing the high entropy in the</font>

711
00:43:59,760 --> 00:44:07,800
<font color="#E5E5E5">base64 files so if you put in your code</font>

712
00:44:03,240 --> 00:44:10,740
<font color="#CCCCCC">by</font><font color="#E5E5E5"> the image which</font><font color="#CCCCCC"> is seen by 64 then</font>

713
00:44:07,800 --> 00:44:14,280
truffle hog is reporting<font color="#E5E5E5"> it as as a</font>

714
00:44:10,740 --> 00:44:17,430
false positive<font color="#E5E5E5"> so</font><font color="#CCCCCC"> Pierre yeah I decided</font>

715
00:44:14,280 --> 00:44:19,829
<font color="#E5E5E5">to allow</font><font color="#CCCCCC"> to just limit those false</font>

716
00:44:17,430 --> 00:44:22,109
positives<font color="#CCCCCC"> but actually you cannot you</font>

717
00:44:19,829 --> 00:44:24,270
<font color="#CCCCCC">know you cannot</font><font color="#E5E5E5"> be sure that if it</font>

718
00:44:22,109 --> 00:44:26,788
reports then there<font color="#E5E5E5"> will be no false</font>

719
00:44:24,270 --> 00:44:30,390
positives<font color="#CCCCCC"> if you have the belt the bet</font>

720
00:44:26,789 --> 00:44:32,819
idea the better attitude<font color="#E5E5E5"> to evenly limit</font>

721
00:44:30,390 --> 00:44:40,219
them the false positives more please

722
00:44:32,819 --> 00:44:40,219
tell me any other questions

723
00:44:40,699 --> 00:44:45,500
<font color="#CCCCCC">okay guys</font><font color="#E5E5E5"> so thank you very much and</font>

724
00:44:44,429 --> 00:44:47,880
<font color="#E5E5E5">enjoy the</font><font color="#CCCCCC"> show</font>

725
00:44:45,500 --> 00:44:47,880
[Applause]

