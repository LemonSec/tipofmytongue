1
00:00:13,519 --> 00:00:15,440
red team is the thing that i would like

2
00:00:15,440 --> 00:00:17,680
to talk about i worked in jet and bison

3
00:00:17,680 --> 00:00:21,039
and here i would like to shatter

4
00:00:21,039 --> 00:00:25,199
your imagination about the hidden

5
00:00:25,199 --> 00:00:26,720
tester

6
00:00:26,720 --> 00:00:30,320
initially i wanted to come up with this

7
00:00:30,320 --> 00:00:32,640
booth

8
00:00:32,719 --> 00:00:35,040
it's very difficult to install

9
00:00:35,040 --> 00:00:36,960
a booth here so it's much easier to

10
00:00:36,960 --> 00:00:39,680
prepare a 15 minute long

11
00:00:39,680 --> 00:00:41,840
presentation here and later

12
00:00:41,840 --> 00:00:43,600
please come up to me with questions if

13
00:00:43,600 --> 00:00:45,280
you like it's more philosophical

14
00:00:45,280 --> 00:00:47,360
presentation than technical that i would

15
00:00:47,360 --> 00:00:49,280
like to deliver but i hope you'll be

16
00:00:49,280 --> 00:00:51,520
interested why do we need this hidden

17
00:00:51,520 --> 00:00:53,440
approach why do you need a hidden

18
00:00:53,440 --> 00:00:54,960
approach for

19
00:00:54,960 --> 00:00:56,320
the white head

20
00:00:56,320 --> 00:00:59,039
in a red team just to

21
00:00:59,039 --> 00:01:00,960
have no contradictions so that we are

22
00:01:00,960 --> 00:01:04,239
not thrown away and we don't find other

23
00:01:04,239 --> 00:01:06,960
points of entry but we can have

24
00:01:06,960 --> 00:01:09,360
different

25
00:01:10,479 --> 00:01:13,040
tasks to perform like encryption

26
00:01:13,040 --> 00:01:16,159
solutions etc but this hidden

27
00:01:16,159 --> 00:01:20,320
aspect is not constant just a wrong move

28
00:01:20,320 --> 00:01:23,360
a wrong alert one mistake

29
00:01:23,360 --> 00:01:24,240
and

30
00:01:24,240 --> 00:01:26,960
they block our accounts and we are not

31
00:01:26,960 --> 00:01:29,759
allowed any permissions so this time

32
00:01:29,759 --> 00:01:32,560
let's talk about the red team without

33
00:01:32,560 --> 00:01:36,799
any hidden aspect whatsoever

34
00:01:37,439 --> 00:01:39,439
when we work without

35
00:01:39,439 --> 00:01:40,960
a hidden ass

36
00:01:40,960 --> 00:01:44,079
aspect we can just work

37
00:01:44,079 --> 00:01:47,360
short but effective for one night

38
00:01:47,360 --> 00:01:49,119
serious

39
00:01:49,119 --> 00:01:51,200
protection starts in the morning that's

40
00:01:51,200 --> 00:01:53,680
when it kicks in because the first line

41
00:01:53,680 --> 00:01:54,799
of s

42
00:01:54,799 --> 00:01:56,719
o c works

43
00:01:56,719 --> 00:01:59,520
not 27

44
00:01:59,520 --> 00:02:01,439
by four

45
00:02:01,439 --> 00:02:03,600
24 by seven i mean

46
00:02:03,600 --> 00:02:05,040
they cannot react

47
00:02:05,040 --> 00:02:07,280
very quickly because they don't have

48
00:02:07,280 --> 00:02:09,199
enough competence they don't they have

49
00:02:09,199 --> 00:02:12,079
limited access

50
00:02:12,400 --> 00:02:13,920
so if

51
00:02:13,920 --> 00:02:16,319
it's not true and they have specialists

52
00:02:16,319 --> 00:02:18,800
that are ready to

53
00:02:18,800 --> 00:02:20,560
counteract

54
00:02:20,560 --> 00:02:23,760
attackers 24x7 it's very often an

55
00:02:23,760 --> 00:02:25,840
exception

56
00:02:25,840 --> 00:02:29,280
commercial services offer this

57
00:02:29,280 --> 00:02:30,239
fast

58
00:02:30,239 --> 00:02:31,920
reaction

59
00:02:31,920 --> 00:02:36,959
within hours 24x7 but normally such

60
00:02:36,959 --> 00:02:38,959
solutions are very expensive and no one

61
00:02:38,959 --> 00:02:40,720
buys them

62
00:02:40,720 --> 00:02:43,280
protection tools protection tools

63
00:02:43,280 --> 00:02:44,319
may

64
00:02:44,319 --> 00:02:47,120
be used in different modes like block

65
00:02:47,120 --> 00:02:48,480
and alert

66
00:02:48,480 --> 00:02:50,400
those who use the block

67
00:02:50,400 --> 00:02:53,599
mode is a very rare case

68
00:02:53,599 --> 00:02:56,400
to protect against very obvious attacks

69
00:02:56,400 --> 00:02:59,280
maybe we should put this in the alert

70
00:02:59,280 --> 00:03:02,480
mode so that the i.t experts later will

71
00:03:02,480 --> 00:03:05,040
react and it will give us some time it

72
00:03:05,040 --> 00:03:07,760
will give us some time uh just for one

73
00:03:07,760 --> 00:03:11,040
night while everyone is asleep or while

74
00:03:11,040 --> 00:03:13,200
is everyone asleep at work

75
00:03:13,200 --> 00:03:15,680
like we all know and

76
00:03:15,680 --> 00:03:17,519
their production tools are screaming

77
00:03:17,519 --> 00:03:19,680
with alerts we can

78
00:03:19,680 --> 00:03:23,040
absolutely hack this system before

79
00:03:23,040 --> 00:03:24,319
dawn

80
00:03:24,319 --> 00:03:26,959
my report is a little bit of a cheat

81
00:03:26,959 --> 00:03:30,159
sheet i will put it in a github

82
00:03:30,159 --> 00:03:33,159
later

83
00:03:34,879 --> 00:03:36,480
and we can just

84
00:03:36,480 --> 00:03:38,640
speak about it differently but it's just

85
00:03:38,640 --> 00:03:41,599
a classification

86
00:03:42,239 --> 00:03:44,640
and here are the stages

87
00:03:44,640 --> 00:03:46,480
they are not going

88
00:03:46,480 --> 00:03:49,200
in this particular order they just uh

89
00:03:49,200 --> 00:03:51,760
listed randomly depending on your access

90
00:03:51,760 --> 00:03:53,360
to this segment

91
00:03:53,360 --> 00:03:56,159
they iterate before we reach the goal

92
00:03:56,159 --> 00:03:59,760
goal like anywhere in the pin test

93
00:03:59,760 --> 00:04:01,840
in the red team

94
00:04:01,840 --> 00:04:04,239
in actual facts

95
00:04:04,239 --> 00:04:06,720
the most important stage here is of

96
00:04:06,720 --> 00:04:09,760
course preparation

97
00:04:09,840 --> 00:04:12,000
those guys who are playing standoff i

98
00:04:12,000 --> 00:04:15,920
was a part of standoff in 2018

99
00:04:15,920 --> 00:04:18,000
they know that automation is everything

100
00:04:18,000 --> 00:04:19,199
about it

101
00:04:19,199 --> 00:04:20,478
and it

102
00:04:20,478 --> 00:04:23,199
bri and it brightly manifests in

103
00:04:23,199 --> 00:04:25,600
standoff previously those

104
00:04:25,600 --> 00:04:26,880
who could

105
00:04:26,880 --> 00:04:30,080
exploit a typical vulnerability patched

106
00:04:30,080 --> 00:04:31,280
it

107
00:04:31,280 --> 00:04:33,280
and hide it

108
00:04:33,280 --> 00:04:35,919
immediately triumphs and that was the

109
00:04:35,919 --> 00:04:38,320
reason why we actually lost that

110
00:04:38,320 --> 00:04:40,800
standoff once in practice we're not

111
00:04:40,800 --> 00:04:43,600
going to patch anything but speed here

112
00:04:43,600 --> 00:04:46,080
is important so we automate

113
00:04:46,080 --> 00:04:48,720
all the inspections all the checkups

114
00:04:48,720 --> 00:04:49,919
with our

115
00:04:49,919 --> 00:04:51,600
updates

116
00:04:51,600 --> 00:04:54,240
we can do it but automate automate and

117
00:04:54,240 --> 00:04:56,240
automate again and we need to have

118
00:04:56,240 --> 00:04:58,639
maximum number of logs we need to log

119
00:04:58,639 --> 00:05:01,840
everything i'm white and i'll have to

120
00:05:01,840 --> 00:05:04,639
write a report if i lose a part of kill

121
00:05:04,639 --> 00:05:07,120
chain because of logs it will complicate

122
00:05:07,120 --> 00:05:11,840
my explanation to the customer of course

123
00:05:12,400 --> 00:05:14,960
and when automation works uh in the

124
00:05:14,960 --> 00:05:17,520
wrong way after the project we can check

125
00:05:17,520 --> 00:05:20,479
the logs and see what had gone wrong

126
00:05:20,479 --> 00:05:22,800
because sometimes we have glitches and

127
00:05:22,800 --> 00:05:24,479
logs and sometimes they

128
00:05:24,479 --> 00:05:26,080
misperform

129
00:05:26,080 --> 00:05:27,919
and of course we'll prepare

130
00:05:27,919 --> 00:05:30,960
the brute force farm that's the

131
00:05:30,960 --> 00:05:32,720
thinnest

132
00:05:32,720 --> 00:05:34,560
and narrowest

133
00:05:34,560 --> 00:05:37,199
point if we don't have a powerful brute

134
00:05:37,199 --> 00:05:39,840
force farm we'll be losing a lot of time

135
00:05:39,840 --> 00:05:41,440
there and will be

136
00:05:41,440 --> 00:05:43,680
a recipe for disaster

137
00:05:43,680 --> 00:05:45,680
and of course we need to have a lot of

138
00:05:45,680 --> 00:05:48,639
caffeine in our blood need to

139
00:05:48,639 --> 00:05:53,440
rest properly prepare be physically fit

140
00:05:53,440 --> 00:05:55,280
have automation

141
00:05:55,280 --> 00:05:56,639
logs on

142
00:05:56,639 --> 00:05:58,960
we have a brute force farm and still we

143
00:05:58,960 --> 00:06:02,000
have some time just to analyze what's in

144
00:06:02,000 --> 00:06:03,919
broadcasts and

145
00:06:03,919 --> 00:06:06,560
gather information but we do not

146
00:06:06,560 --> 00:06:09,120
actively act from that host because we

147
00:06:09,120 --> 00:06:12,000
need to hide if there is a very simple

148
00:06:12,000 --> 00:06:13,039
scan

149
00:06:13,039 --> 00:06:15,520
we will be detected and people will not

150
00:06:15,520 --> 00:06:18,240
leave their workplaces and they will

151
00:06:18,240 --> 00:06:19,840
catch

152
00:06:19,840 --> 00:06:22,239
active

153
00:06:23,199 --> 00:06:25,680
intelligence

154
00:06:25,680 --> 00:06:26,479
in a

155
00:06:26,479 --> 00:06:29,520
pen test everyone scans whatever they

156
00:06:29,520 --> 00:06:31,680
want to scan and they run these scans

157
00:06:31,680 --> 00:06:35,360
for hours and days

158
00:06:35,360 --> 00:06:38,160
it's not our story we will be losing

159
00:06:38,160 --> 00:06:40,160
some services and during the course of

160
00:06:40,160 --> 00:06:42,080
our scan it doesn't matter it's just a

161
00:06:42,080 --> 00:06:44,479
matter of finding the more

162
00:06:44,479 --> 00:06:47,120
that we would like to work with so maybe

163
00:06:47,120 --> 00:06:49,759
we will not have a 100 scan coverage

164
00:06:49,759 --> 00:06:51,520
we'll just be scanning all the major

165
00:06:51,520 --> 00:06:52,479
ports

166
00:06:52,479 --> 00:06:55,120
everything that the customer has in the

167
00:06:55,120 --> 00:06:57,520
infrastructure and we will be scanning

168
00:06:57,520 --> 00:07:00,240
the most widespread ports and we'll be

169
00:07:00,240 --> 00:07:01,199
seeing

170
00:07:01,199 --> 00:07:04,479
the speed of network we would put it in

171
00:07:04,479 --> 00:07:06,800
the very aggressive scan mode we'll just

172
00:07:06,800 --> 00:07:08,639
need to very quickly gather initial

173
00:07:08,639 --> 00:07:09,840
information

174
00:07:09,840 --> 00:07:12,000
gather intel and start work

175
00:07:12,000 --> 00:07:14,160
rce

176
00:07:14,160 --> 00:07:18,960
the most uh important thing is rc rc rc

177
00:07:18,960 --> 00:07:21,199
services like blue keeper

178
00:07:21,199 --> 00:07:24,400
ethanol blue proxy shell etc so we use

179
00:07:24,400 --> 00:07:26,960
them scan the entire network some of you

180
00:07:26,960 --> 00:07:30,639
have custom scanners so if you

181
00:07:30,639 --> 00:07:32,960
scan

182
00:07:33,120 --> 00:07:36,479
it through ethernet blue but

183
00:07:36,479 --> 00:07:37,680
in

184
00:07:37,680 --> 00:07:40,080
amazon there is a bison solution i'm not

185
00:07:40,080 --> 00:07:42,560
trying to promote it but it's been there

186
00:07:42,560 --> 00:07:45,280
for a while and it just uses ruby and it

187
00:07:45,280 --> 00:07:48,560
scans real fast scans uh

188
00:07:48,560 --> 00:07:51,360
fast with

189
00:07:51,599 --> 00:07:53,520
that solution you can

190
00:07:53,520 --> 00:07:55,759
use such scanners and you need to be

191
00:07:55,759 --> 00:07:58,400
familiar with those that scan fast

192
00:07:58,400 --> 00:08:00,000
potential

193
00:08:00,000 --> 00:08:04,800
rce vulnerable services like redis 1c

194
00:08:04,800 --> 00:08:07,120
dbms etc

195
00:08:07,120 --> 00:08:10,080
1c actually can run the code through

196
00:08:10,080 --> 00:08:11,199
external

197
00:08:11,199 --> 00:08:13,840
shells but i'll speak about it later

198
00:08:13,840 --> 00:08:15,599
what we will be addressing during the

199
00:08:15,599 --> 00:08:18,960
course of scan we may be encountering

200
00:08:18,960 --> 00:08:20,800
older hosts

201
00:08:20,800 --> 00:08:22,720
the older versions of

202
00:08:22,720 --> 00:08:23,680
os

203
00:08:23,680 --> 00:08:25,759
immediately we detect it if especially

204
00:08:25,759 --> 00:08:29,520
if you have experience some shadow id

205
00:08:29,520 --> 00:08:32,000
will be our entry ports

206
00:08:32,000 --> 00:08:35,200
entry points most likely

207
00:08:35,200 --> 00:08:39,519
we will not be scanning 65 000 ports

208
00:08:39,519 --> 00:08:42,240
we will not be scanning udp ports we

209
00:08:42,240 --> 00:08:44,399
will not be scanning any in

210
00:08:44,399 --> 00:08:47,760
nasa's rapid seven expose max product

211
00:08:47,760 --> 00:08:49,440
these solutions are not going to be used

212
00:08:49,440 --> 00:08:51,279
they are very expensive

213
00:08:51,279 --> 00:08:54,000
and of course to analyze this

214
00:08:54,000 --> 00:08:57,200
too much time will take

215
00:08:57,200 --> 00:08:58,959
i will take too much time we'll be

216
00:08:58,959 --> 00:09:00,080
spending

217
00:09:00,080 --> 00:09:04,080
we will be not doing that and

218
00:09:04,080 --> 00:09:06,640
inside if you just dig up the web

219
00:09:06,640 --> 00:09:08,160
services it's going to be one of the

220
00:09:08,160 --> 00:09:10,640
best ways to lose your time if because

221
00:09:10,640 --> 00:09:13,279
if you started digging the web you must

222
00:09:13,279 --> 00:09:16,959
have lost something much more easy to

223
00:09:16,959 --> 00:09:20,560
catch so we ignore web vulnerabilities

224
00:09:20,560 --> 00:09:23,839
we ignore printers we ignore ip cameras

225
00:09:23,839 --> 00:09:25,920
ups

226
00:09:25,920 --> 00:09:28,160
they will not get us let through because

227
00:09:28,160 --> 00:09:29,760
we have a different

228
00:09:29,760 --> 00:09:32,080
task to perform we only have one night

229
00:09:32,080 --> 00:09:34,000
to hack

230
00:09:34,000 --> 00:09:36,959
as we develop this attack as we get more

231
00:09:36,959 --> 00:09:38,320
advanced

232
00:09:38,320 --> 00:09:39,279
uh

233
00:09:39,279 --> 00:09:41,279
we definitely try

234
00:09:41,279 --> 00:09:42,800
ntlm

235
00:09:42,800 --> 00:09:45,279
element error spoofing this thing still

236
00:09:45,279 --> 00:09:48,160
works we work at night and at night

237
00:09:48,160 --> 00:09:50,000
number of caches is not going to be

238
00:09:50,000 --> 00:09:52,640
great because there are no active users

239
00:09:52,640 --> 00:09:54,399
online probably there will be some

240
00:09:54,399 --> 00:09:57,839
admins monitoring or some network tools

241
00:09:57,839 --> 00:10:00,000
with

242
00:10:00,240 --> 00:10:01,360
accounts

243
00:10:01,360 --> 00:10:02,839
so it's going

244
00:10:02,839 --> 00:10:06,079
to let us through and

245
00:10:06,079 --> 00:10:09,200
let us propagate through our network

246
00:10:09,200 --> 00:10:11,600
we try to use exploits to all of the

247
00:10:11,600 --> 00:10:14,399
hosts if for example it says that this

248
00:10:14,399 --> 00:10:16,160
host is

249
00:10:16,160 --> 00:10:18,399
not vulnerable to the scanner don't

250
00:10:18,399 --> 00:10:20,480
believe it try to exploit anything

251
00:10:20,480 --> 00:10:22,959
anything you can can be exploited i

252
00:10:22,959 --> 00:10:25,200
don't even remember how many times i've

253
00:10:25,200 --> 00:10:27,760
seen it but it was very frequent when

254
00:10:27,760 --> 00:10:30,880
people's when the scanner says it's not

255
00:10:30,880 --> 00:10:34,000
vulnerable it's

256
00:10:35,040 --> 00:10:38,720
resistant but it passes it passes by it

257
00:10:38,720 --> 00:10:40,640
gets through through automation

258
00:10:40,640 --> 00:10:43,200
everything works

259
00:10:43,200 --> 00:10:45,600
so we also try to

260
00:10:45,600 --> 00:10:46,720
check

261
00:10:46,720 --> 00:10:47,519
the

262
00:10:47,519 --> 00:10:50,880
default 1c settings and the default

263
00:10:50,880 --> 00:10:55,600
passwords in the dbms it's a great thing

264
00:10:55,600 --> 00:10:58,000
default passwords

265
00:10:58,000 --> 00:11:00,720
and it allows us to understand how to

266
00:11:00,720 --> 00:11:02,880
check it quickly and it allows us to

267
00:11:02,880 --> 00:11:05,440
propagate through network really quickly

268
00:11:05,440 --> 00:11:08,640
what we should not do or

269
00:11:08,640 --> 00:11:10,240
do the least

270
00:11:10,240 --> 00:11:11,760
a

271
00:11:11,760 --> 00:11:15,279
are peace proofing very often

272
00:11:15,279 --> 00:11:17,440
your your port will be blocked if you

273
00:11:17,440 --> 00:11:20,000
use that and then it's all done for you

274
00:11:20,000 --> 00:11:21,279
it's all finished

275
00:11:21,279 --> 00:11:23,839
we're not going to get through

276
00:11:23,839 --> 00:11:25,519
shared folders

277
00:11:25,519 --> 00:11:27,680
uh you'll be losing too much time in the

278
00:11:27,680 --> 00:11:30,399
shared folders so there may be some

279
00:11:30,399 --> 00:11:33,600
configuration files but most unlikely

280
00:11:33,600 --> 00:11:35,760
you can run a search through it but

281
00:11:35,760 --> 00:11:38,000
that's the most

282
00:11:38,000 --> 00:11:40,160
and please check

283
00:11:40,160 --> 00:11:43,760
default passwords to web services and

284
00:11:43,760 --> 00:11:48,480
if there is automated solution use it

285
00:11:48,480 --> 00:11:51,600
don't try to brute force ssh

286
00:11:51,600 --> 00:11:53,120
snmp is

287
00:11:53,120 --> 00:11:56,240
not the solution here either and using

288
00:11:56,240 --> 00:11:59,360
other spoofing methods

289
00:11:59,360 --> 00:12:02,320
when we got the first

290
00:12:03,440 --> 00:12:04,720
accounts

291
00:12:04,720 --> 00:12:08,079
it allows us to investigate even more we

292
00:12:08,079 --> 00:12:10,480
get bloodhound we understand what we

293
00:12:10,480 --> 00:12:13,760
have in active directory we start using

294
00:12:13,760 --> 00:12:15,279
it everything that we had scanned

295
00:12:15,279 --> 00:12:18,240
previously can be ignored and we take a

296
00:12:18,240 --> 00:12:21,360
local dump to work with it

297
00:12:21,360 --> 00:12:23,920
in the group policy please check if

298
00:12:23,920 --> 00:12:25,360
there is the

299
00:12:25,360 --> 00:12:28,480
account of the local administrator

300
00:12:28,480 --> 00:12:31,839
in gpo even in the 21st century they

301
00:12:31,839 --> 00:12:33,200
still have it

302
00:12:33,200 --> 00:12:34,959
and what's this tool from microsoft

303
00:12:34,959 --> 00:12:37,040
called that

304
00:12:37,040 --> 00:12:38,720
saves

305
00:12:38,720 --> 00:12:40,639
local admin

306
00:12:40,639 --> 00:12:43,040
accounts it's called labs right everyone

307
00:12:43,040 --> 00:12:45,120
needs to have labs but still not all of

308
00:12:45,120 --> 00:12:46,959
the people have it

309
00:12:46,959 --> 00:12:50,240
try pass the hash overpass the hash ps

310
00:12:50,240 --> 00:12:53,680
exec etc because sometimes it allows us

311
00:12:53,680 --> 00:12:55,040
to move on

312
00:12:55,040 --> 00:12:56,560
even if we

313
00:12:56,560 --> 00:13:01,200
did not brute force them completely

314
00:13:01,200 --> 00:13:02,320
so

315
00:13:02,320 --> 00:13:03,440
we need to

316
00:13:03,440 --> 00:13:06,079
check all the available hosts see

317
00:13:06,079 --> 00:13:07,600
everything there

318
00:13:07,600 --> 00:13:09,600
try to use all of the hosts available

319
00:13:09,600 --> 00:13:10,480
for

320
00:13:10,480 --> 00:13:14,079
our account use each and every account

321
00:13:14,079 --> 00:13:16,000
to the most

322
00:13:16,000 --> 00:13:18,800
don't do anything manually like i said

323
00:13:18,800 --> 00:13:22,480
don't try to dig through shaled folders

324
00:13:22,480 --> 00:13:25,279
and email especially if they are not

325
00:13:25,279 --> 00:13:28,000
emails from an admin you will not find

326
00:13:28,000 --> 00:13:30,399
anything interesting there anyway

327
00:13:30,399 --> 00:13:33,040
you are not working with the email

328
00:13:33,040 --> 00:13:35,040
servers

329
00:13:35,040 --> 00:13:38,160
active directory there is a very little

330
00:13:38,160 --> 00:13:39,680
attention you are paying to some

331
00:13:39,680 --> 00:13:43,040
accountants your task is just to

332
00:13:43,040 --> 00:13:46,079
come up to the domain admin

333
00:13:46,079 --> 00:13:50,720
tech support admin etc etc internet

334
00:13:50,720 --> 00:13:52,160
security

335
00:13:52,160 --> 00:13:53,600
accounts

336
00:13:53,600 --> 00:13:55,600
in the windows environment and the

337
00:13:55,600 --> 00:13:58,720
windows hosts we try to increase

338
00:13:58,720 --> 00:14:01,360
our access rights and there is a bunch

339
00:14:01,360 --> 00:14:02,560
of tools

340
00:14:02,560 --> 00:14:05,199
to do that

341
00:14:06,000 --> 00:14:08,480
we can start from mpi and we can end

342
00:14:08,480 --> 00:14:12,399
with the very interesting tools like uh

343
00:14:12,399 --> 00:14:15,199
imp packets so start with mini cats and

344
00:14:15,199 --> 00:14:18,000
and with impact

345
00:14:18,000 --> 00:14:22,079
and please address wim

346
00:14:22,320 --> 00:14:23,680
win peace

347
00:14:23,680 --> 00:14:26,320
so if you use these tools you'll be

348
00:14:26,320 --> 00:14:28,079
granted

349
00:14:28,079 --> 00:14:30,720
privileged access

350
00:14:30,720 --> 00:14:34,000
how do we bypass antiviral solutions

351
00:14:34,000 --> 00:14:36,000
we're not trying to

352
00:14:36,000 --> 00:14:37,920
get into heuristics

353
00:14:37,920 --> 00:14:39,519
not really

354
00:14:39,519 --> 00:14:42,480
we try to bypass it by standard ways by

355
00:14:42,480 --> 00:14:44,800
analyzing the exceptions

356
00:14:44,800 --> 00:14:47,440
there is a solution that microsoft

357
00:14:47,440 --> 00:14:50,639
somehow launched a cheat sheet

358
00:14:50,639 --> 00:14:53,839
of accepting items or antiviruses what

359
00:14:53,839 --> 00:14:56,000
would be best to include so that

360
00:14:56,000 --> 00:14:58,639
everything works in the domain

361
00:14:58,639 --> 00:15:00,639
in my experience almost all of the

362
00:15:00,639 --> 00:15:03,120
customers take this cheat sheet

363
00:15:03,120 --> 00:15:06,480
upload it to the anti-virus software and

364
00:15:06,480 --> 00:15:09,600
live with it but even half of the

365
00:15:09,600 --> 00:15:11,839
software for microsoft

366
00:15:11,839 --> 00:15:13,199
is not there but there are some

367
00:15:13,199 --> 00:15:15,360
exceptions granted to the folders and by

368
00:15:15,360 --> 00:15:17,760
these exceptions you can run anything

369
00:15:17,760 --> 00:15:20,240
you can so extra

370
00:15:20,240 --> 00:15:21,519
exceptions

371
00:15:21,519 --> 00:15:23,839
is the best thing to bypass the

372
00:15:23,839 --> 00:15:27,839
antivirus solution very often it works

373
00:15:28,240 --> 00:15:30,959
and of course there is a point of

374
00:15:30,959 --> 00:15:32,160
going through

375
00:15:32,160 --> 00:15:36,399
hardcore password protected files

376
00:15:36,399 --> 00:15:37,360
but

377
00:15:37,360 --> 00:15:39,680
metasploit and

378
00:15:39,680 --> 00:15:42,160
homegrown solutions are suitable for

379
00:15:42,160 --> 00:15:44,320
that but don't do it manually don't do

380
00:15:44,320 --> 00:15:47,519
it manually use automatics here

381
00:15:47,519 --> 00:15:49,759
of course we can bypass

382
00:15:49,759 --> 00:15:52,480
signatures but

383
00:15:52,480 --> 00:15:53,680
we'll

384
00:15:53,680 --> 00:15:56,160
get stuck in the heuristics phase

385
00:15:56,160 --> 00:15:59,199
so try anything you can try

386
00:15:59,199 --> 00:16:01,120
it doesn't really matter we don't care

387
00:16:01,120 --> 00:16:03,519
if we get caught

388
00:16:03,519 --> 00:16:06,480
so we try and try and try if this

389
00:16:06,480 --> 00:16:09,040
antivirus does not allow us to check the

390
00:16:09,040 --> 00:16:11,680
paths if standard microsoft paths have

391
00:16:11,680 --> 00:16:13,360
no exceptions for you

392
00:16:13,360 --> 00:16:15,120
try to

393
00:16:15,120 --> 00:16:18,079
use a non-standard software solution and

394
00:16:18,079 --> 00:16:20,240
put it in that folder and try to launch

395
00:16:20,240 --> 00:16:21,120
it

396
00:16:21,120 --> 00:16:23,839
and execute it and very often it gives

397
00:16:23,839 --> 00:16:26,000
very funny results and it's going to be

398
00:16:26,000 --> 00:16:28,000
much easier than

399
00:16:28,000 --> 00:16:30,480
bypassing the heuristics

400
00:16:30,480 --> 00:16:32,720
in linux

401
00:16:32,720 --> 00:16:35,519
we can use a similar approach we can use

402
00:16:35,519 --> 00:16:38,079
lean peas

403
00:16:38,079 --> 00:16:39,199
from which

404
00:16:39,199 --> 00:16:41,440
you can set the priorities

405
00:16:41,440 --> 00:16:43,519
and they will be

406
00:16:43,519 --> 00:16:46,079
colored approximately

407
00:16:46,079 --> 00:16:48,320
linux exploits gesture is one of the

408
00:16:48,320 --> 00:16:52,240
options and you can

409
00:16:52,320 --> 00:16:54,959
find something in the chrome tab

410
00:16:54,959 --> 00:16:56,160
check

411
00:16:56,160 --> 00:16:59,199
what sudo can launch and find some

412
00:16:59,199 --> 00:17:01,360
passwords in history

413
00:17:01,360 --> 00:17:02,160
by

414
00:17:02,160 --> 00:17:03,360
running

415
00:17:03,360 --> 00:17:05,359
a scan

416
00:17:05,359 --> 00:17:07,439
in linux it's

417
00:17:07,439 --> 00:17:09,359
most frequently

418
00:17:09,359 --> 00:17:11,679
launching the exploits

419
00:17:11,679 --> 00:17:13,599
that's what helps there all the other

420
00:17:13,599 --> 00:17:15,520
things are optional you just check the

421
00:17:15,520 --> 00:17:16,720
splits

422
00:17:16,720 --> 00:17:19,280
if this exploit doesn't work don't

423
00:17:19,280 --> 00:17:20,640
believe it

424
00:17:20,640 --> 00:17:23,039
give it a try and again i repeat don't

425
00:17:23,039 --> 00:17:25,679
do anything manually save your time

426
00:17:25,679 --> 00:17:26,559
and

427
00:17:26,559 --> 00:17:29,600
and when we're approaching

428
00:17:29,600 --> 00:17:31,280
the finish line

429
00:17:31,280 --> 00:17:33,039
and we get

430
00:17:33,039 --> 00:17:36,559
close to the privileged users status we

431
00:17:36,559 --> 00:17:37,360
check

432
00:17:37,360 --> 00:17:40,720
it with black hound and

433
00:17:40,720 --> 00:17:41,919
bloodhound

434
00:17:41,919 --> 00:17:44,480
will prompt you what to do and we find

435
00:17:44,480 --> 00:17:47,760
passwords from privileged accounts

436
00:17:47,760 --> 00:17:49,039
like for example

437
00:17:49,039 --> 00:17:50,720
backup

438
00:17:50,720 --> 00:17:52,000
copy

439
00:17:52,000 --> 00:17:55,200
software passwords and you'll be able

440
00:17:55,200 --> 00:17:57,760
even to find the password

441
00:17:57,760 --> 00:18:00,320
to shut down the anti-virus it will help

442
00:18:00,320 --> 00:18:02,000
you find it and

443
00:18:02,000 --> 00:18:05,039
don't waste your time on accountants

444
00:18:05,039 --> 00:18:06,400
accounts

445
00:18:06,400 --> 00:18:07,840
pardon my pun

446
00:18:07,840 --> 00:18:10,320
so we get the rights we get the token we

447
00:18:10,320 --> 00:18:12,240
get the session of

448
00:18:12,240 --> 00:18:14,559
the system admin and this is how it

449
00:18:14,559 --> 00:18:15,840
works

450
00:18:15,840 --> 00:18:18,880
this is a great recommendation

451
00:18:18,880 --> 00:18:20,400
we do not go to

452
00:18:20,400 --> 00:18:22,960
complicated hosts

453
00:18:22,960 --> 00:18:25,440
so we ignore them and

454
00:18:25,440 --> 00:18:27,840
we don't need to break each and every

455
00:18:27,840 --> 00:18:30,720
solution we are not going to show how

456
00:18:30,720 --> 00:18:32,640
cool we are just cracking this

457
00:18:32,640 --> 00:18:34,720
vulnerability wasting eight hours on

458
00:18:34,720 --> 00:18:37,120
that that's not the point the result is

459
00:18:37,120 --> 00:18:39,840
important for us we try anything that's

460
00:18:39,840 --> 00:18:42,240
automated if there's nothing automated

461
00:18:42,240 --> 00:18:44,720
we tried ourselves and

462
00:18:44,720 --> 00:18:46,080
we do not

463
00:18:46,080 --> 00:18:48,559
interfere with the spoofing attacks

464
00:18:48,559 --> 00:18:50,960
there

465
00:18:53,679 --> 00:18:56,960
and quick checks quick checks versus

466
00:18:56,960 --> 00:18:58,720
long checks uh

467
00:18:58,720 --> 00:19:01,440
we move forward set the priorities right

468
00:19:01,440 --> 00:19:03,679
we delegate

469
00:19:03,679 --> 00:19:06,880
we work in a team we spread it by hosts

470
00:19:06,880 --> 00:19:08,880
we do not check and verify each other we

471
00:19:08,880 --> 00:19:10,960
trust our colleagues

472
00:19:10,960 --> 00:19:13,120
very quickly and very often update

473
00:19:13,120 --> 00:19:15,679
bloodhound database

474
00:19:15,679 --> 00:19:17,360
very quickly we can

475
00:19:17,360 --> 00:19:19,120
get access to the server which we

476
00:19:19,120 --> 00:19:23,439
control and steal a session from the

477
00:19:23,520 --> 00:19:25,919
domain admin and

478
00:19:25,919 --> 00:19:28,559
all these stop list checks

479
00:19:28,559 --> 00:19:29,760
are useful

480
00:19:29,760 --> 00:19:32,640
sometimes sometimes they don't give you

481
00:19:32,640 --> 00:19:35,280
a high priority quickly

482
00:19:35,280 --> 00:19:39,360
so what would be the trick of this speed

483
00:19:39,360 --> 00:19:40,799
brute force run

484
00:19:40,799 --> 00:19:43,760
maybe we just use it

485
00:19:43,760 --> 00:19:46,960
as a contingency

486
00:19:47,120 --> 00:19:51,120
we run as fast as we can and try to

487
00:19:51,120 --> 00:19:54,240
crack the nut before we get kicked out

488
00:19:54,240 --> 00:19:56,640
and such fast activities

489
00:19:56,640 --> 00:19:59,280
are not familiar to those who try to

490
00:19:59,280 --> 00:20:01,039
protect the system my colleagues shared

491
00:20:01,039 --> 00:20:03,120
this idea with me they almost

492
00:20:03,120 --> 00:20:06,480
uh 40 minutes behind reacting to our

493
00:20:06,480 --> 00:20:08,640
moves if we run too quickly they will

494
00:20:08,640 --> 00:20:10,960
not kick us away

495
00:20:10,960 --> 00:20:14,559
and it actually impresses the customer

496
00:20:14,559 --> 00:20:16,240
enormously when they wake up in the

497
00:20:16,240 --> 00:20:18,960
morning and see wow what's happened

498
00:20:18,960 --> 00:20:21,360
and what about the customer

499
00:20:21,360 --> 00:20:22,640
well the customer of course will

500
00:20:22,640 --> 00:20:26,720
evaluate the speed of recovery and

501
00:20:26,720 --> 00:20:30,159
they know which tools it's best to set

502
00:20:30,159 --> 00:20:31,760
to block

503
00:20:31,760 --> 00:20:35,039
status not alert and if it works the

504
00:20:35,039 --> 00:20:36,480
result will be like you see in the

505
00:20:36,480 --> 00:20:38,640
screen and it will puzzle the customer

506
00:20:38,640 --> 00:20:42,080
enormously thank you i'm done

