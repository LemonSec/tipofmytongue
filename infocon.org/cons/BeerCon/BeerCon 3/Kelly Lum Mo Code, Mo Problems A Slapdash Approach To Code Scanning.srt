1
00:00:00,160 --> 00:00:03,360
we have kelly love yeah joining us next

2
00:00:03,360 --> 00:00:05,920
aka eloria to

3
00:00:05,920 --> 00:00:08,160
doxat twitter which is not doxing

4
00:00:08,160 --> 00:00:09,599
because it's public

5
00:00:09,599 --> 00:00:10,719
but um

6
00:00:10,719 --> 00:00:12,880
hopefully she's in the room she's in the

7
00:00:12,880 --> 00:00:13,920
room

8
00:00:13,920 --> 00:00:15,679
wonderful afternoon

9
00:00:15,679 --> 00:00:17,520
so kelly if you've got

10
00:00:17,520 --> 00:00:19,279
a deck you want to share

11
00:00:19,279 --> 00:00:21,359
uh i just guess i'll just share my whole

12
00:00:21,359 --> 00:00:23,039
screen

13
00:00:23,039 --> 00:00:24,400
fantastic

14
00:00:24,400 --> 00:00:27,279
but what will happen is we'll shut up

15
00:00:27,279 --> 00:00:30,960
when you're ready all right so

16
00:00:30,960 --> 00:00:34,480
welcome kelly hello thank you

17
00:00:34,480 --> 00:00:36,320
so we think you've got quite

18
00:00:36,320 --> 00:00:38,559
um a different perspective which is in

19
00:00:38,559 --> 00:00:40,879
the title of the talk here so without

20
00:00:40,879 --> 00:00:42,000
further ado

21
00:00:42,000 --> 00:00:42,960
we'll

22
00:00:42,960 --> 00:00:45,039
show up and hand it over to yourself

23
00:00:45,039 --> 00:00:47,360
thank you

24
00:00:51,360 --> 00:00:54,600
all right

25
00:00:58,399 --> 00:01:00,640
uh yeah whenever

26
00:01:00,640 --> 00:01:02,239
you want to start

27
00:01:02,239 --> 00:01:04,640
i guess

28
00:01:11,280 --> 00:01:12,880
we go

29
00:01:12,880 --> 00:01:14,720
we're good oh we're good we're good so

30
00:01:14,720 --> 00:01:16,640
the participants can see my screen right

31
00:01:16,640 --> 00:01:19,119
i assume

32
00:01:19,520 --> 00:01:21,680
yeah okay yeah yeah this is this is a

33
00:01:21,680 --> 00:01:23,040
new like the breakout room thing and

34
00:01:23,040 --> 00:01:25,200
zoom it's a new piece of functionality

35
00:01:25,200 --> 00:01:27,439
pretty awesome though

36
00:01:27,439 --> 00:01:31,600
anyway um so hi um my name is kelly also

37
00:01:31,600 --> 00:01:34,720
known as lauria um on the internet for

38
00:01:34,720 --> 00:01:36,000
some reason

39
00:01:36,000 --> 00:01:39,680
and so uh this presentation is entitled

40
00:01:39,680 --> 00:01:41,600
mo code mode problems

41
00:01:41,600 --> 00:01:45,600
um a slap dash approach to code scanning

42
00:01:45,600 --> 00:01:47,759
i will not be using this talk to get

43
00:01:47,759 --> 00:01:49,520
into a

44
00:01:49,520 --> 00:01:52,240
debate about

45
00:01:52,240 --> 00:01:55,360
the pros and cons of various code

46
00:01:55,360 --> 00:01:57,840
scanners there are a zillion of them out

47
00:01:57,840 --> 00:01:58,640
there

48
00:01:58,640 --> 00:02:01,200
they are they all um

49
00:02:01,200 --> 00:02:03,600
equally kind of suck and also are

50
00:02:03,600 --> 00:02:06,159
equally kind of great um at various

51
00:02:06,159 --> 00:02:09,038
degrees of what you would consider great

52
00:02:09,038 --> 00:02:10,720
or bad

53
00:02:10,720 --> 00:02:12,000
so um

54
00:02:12,000 --> 00:02:14,959
let's get into it

55
00:02:15,760 --> 00:02:18,400
how do i oh there's my mouse two screens

56
00:02:18,400 --> 00:02:19,920
very good

57
00:02:19,920 --> 00:02:23,040
so this is the obligatory introduction

58
00:02:23,040 --> 00:02:25,120
slide about why

59
00:02:25,120 --> 00:02:27,440
uh you would care about anything i have

60
00:02:27,440 --> 00:02:28,560
to say

61
00:02:28,560 --> 00:02:31,200
um so i am the director of security

62
00:02:31,200 --> 00:02:33,040
somewhere that for a company that you've

63
00:02:33,040 --> 00:02:36,480
probably never heard of that

64
00:02:36,480 --> 00:02:39,280
services companies that you probably use

65
00:02:39,280 --> 00:02:40,879
quite often

66
00:02:40,879 --> 00:02:42,720
but this talk has nothing to do with my

67
00:02:42,720 --> 00:02:43,760
employer

68
00:02:43,760 --> 00:02:46,160
this is something that i have

69
00:02:46,160 --> 00:02:48,720
found challenges in my old own private

70
00:02:48,720 --> 00:02:50,879
research as well as multiple companies

71
00:02:50,879 --> 00:02:52,239
i've worked for

72
00:02:52,239 --> 00:02:53,519
that

73
00:02:53,519 --> 00:02:56,080
want to do code scanning for either

74
00:02:56,080 --> 00:02:59,040
compliance reasons or for me my own

75
00:02:59,040 --> 00:03:01,519
personal i'm lazy and i don't want to

76
00:03:01,519 --> 00:03:02,879
read code

77
00:03:02,879 --> 00:03:04,800
please let me find the low-hanging fruit

78
00:03:04,800 --> 00:03:07,519
and so i can rabbit hole that way

79
00:03:07,519 --> 00:03:09,599
um i've been working it officially in

80
00:03:09,599 --> 00:03:12,560
infosec meaning that somebody cut me a

81
00:03:12,560 --> 00:03:15,599
paycheck uh since 2003

82
00:03:15,599 --> 00:03:19,799
uh el hombre del sol

83
00:03:20,400 --> 00:03:22,159
a man with a hat sent me told me very

84
00:03:22,159 --> 00:03:23,920
interesting stories i don't know why i

85
00:03:23,920 --> 00:03:26,480
put that in there

86
00:03:26,480 --> 00:03:28,000
anywho

87
00:03:28,000 --> 00:03:32,519
so here's the problem um

88
00:03:32,720 --> 00:03:34,400
let's say you want to scan a lot of

89
00:03:34,400 --> 00:03:36,640
things let's say you want to scan a lot

90
00:03:36,640 --> 00:03:38,480
of code bases

91
00:03:38,480 --> 00:03:40,000
um

92
00:03:40,000 --> 00:03:43,120
for whatever reason so for example um

93
00:03:43,120 --> 00:03:44,400
you know if you're doing personal

94
00:03:44,400 --> 00:03:46,799
research maybe you just want to like

95
00:03:46,799 --> 00:03:50,080
cast a wide net and you know see

96
00:03:50,080 --> 00:03:51,599
what stuff you can find in those code

97
00:03:51,599 --> 00:03:52,720
bases

98
00:03:52,720 --> 00:03:56,159
maybe there are a handful of maybe

99
00:03:56,159 --> 00:03:59,040
competing applications that you're

100
00:03:59,040 --> 00:04:00,799
interested in and you want to find the

101
00:04:00,799 --> 00:04:03,200
one that is going to be the least

102
00:04:03,200 --> 00:04:07,360
problematic in terms of code quality

103
00:04:07,360 --> 00:04:08,799
code scanners can

104
00:04:08,799 --> 00:04:10,560
not only help you find vulnerabilities

105
00:04:10,560 --> 00:04:13,920
in code but they can also help you find

106
00:04:13,920 --> 00:04:15,519
buggy code

107
00:04:15,519 --> 00:04:18,238
inefficient code so you know maybe you

108
00:04:18,238 --> 00:04:20,560
have four or five things that

109
00:04:20,560 --> 00:04:22,160
kind of do the same kind of

110
00:04:22,160 --> 00:04:24,240
functionality but you're not really sure

111
00:04:24,240 --> 00:04:26,560
which one to pick and as a

112
00:04:26,560 --> 00:04:28,560
security or a

113
00:04:28,560 --> 00:04:31,520
um you know productivity-minded person

114
00:04:31,520 --> 00:04:33,199
you want to

115
00:04:33,199 --> 00:04:34,880
find the one that that makes you the

116
00:04:34,880 --> 00:04:36,960
most comfortable using it

117
00:04:36,960 --> 00:04:39,680
the other problem is is that when you're

118
00:04:39,680 --> 00:04:42,720
evaluating multiple different code bases

119
00:04:42,720 --> 00:04:45,919
they are usually in a lot of different

120
00:04:45,919 --> 00:04:48,240
languages obviously

121
00:04:48,240 --> 00:04:51,360
um building the code

122
00:04:51,360 --> 00:04:53,840
is always a little bit different

123
00:04:53,840 --> 00:04:55,520
uh depending on

124
00:04:55,520 --> 00:04:57,360
one depending on the language but also

125
00:04:57,360 --> 00:04:59,120
depending on

126
00:04:59,120 --> 00:05:01,280
the um

127
00:05:01,280 --> 00:05:03,919
different build steps so uh for this

128
00:05:03,919 --> 00:05:06,320
just for the for this presentation i've

129
00:05:06,320 --> 00:05:08,240
decided to go with the

130
00:05:08,240 --> 00:05:10,000
one that i found the most paid in the

131
00:05:10,000 --> 00:05:10,880
ass

132
00:05:10,880 --> 00:05:15,360
um which is dot net um i have a long um

133
00:05:15,360 --> 00:05:17,840
and storied history love hate

134
00:05:17,840 --> 00:05:19,520
relationship with

135
00:05:19,520 --> 00:05:22,000
dot net um so

136
00:05:22,000 --> 00:05:24,720
that's these are the some of the ones

137
00:05:24,720 --> 00:05:27,600
that i've chosen

138
00:05:27,600 --> 00:05:29,600
and we'll get into a little bit about

139
00:05:29,600 --> 00:05:32,560
why it's why some code code building

140
00:05:32,560 --> 00:05:33,840
processes

141
00:05:33,840 --> 00:05:37,960
can be quite difficult

142
00:05:38,400 --> 00:05:39,120
so

143
00:05:39,120 --> 00:05:41,039
you know we have i already said this but

144
00:05:41,039 --> 00:05:43,600
we have so much code you know multiple

145
00:05:43,600 --> 00:05:45,600
languages you need to run different

146
00:05:45,600 --> 00:05:46,800
commands

147
00:05:46,800 --> 00:05:48,960
uh they may have different steps in

148
00:05:48,960 --> 00:05:51,919
building so for example i have project a

149
00:05:51,919 --> 00:05:54,560
and all you need to do is do like make

150
00:05:54,560 --> 00:05:57,199
make build or whatever

151
00:05:57,199 --> 00:06:00,080
um for net you may need to restore some

152
00:06:00,080 --> 00:06:02,400
packages where this is probably true of

153
00:06:02,400 --> 00:06:04,720
java but java and i

154
00:06:04,720 --> 00:06:06,560
don't talk to each other anymore

155
00:06:06,560 --> 00:06:08,880
um you know i have found no contact with

156
00:06:08,880 --> 00:06:11,840
java um

157
00:06:11,919 --> 00:06:14,479
the other problem is that you know

158
00:06:14,479 --> 00:06:17,280
scanning as well as builds take a long

159
00:06:17,280 --> 00:06:19,759
time to run generally and the larger

160
00:06:19,759 --> 00:06:22,639
your code base um and the larger the

161
00:06:22,639 --> 00:06:25,039
complexity that you have

162
00:06:25,039 --> 00:06:25,840
um

163
00:06:25,840 --> 00:06:27,840
is

164
00:06:27,840 --> 00:06:28,960
going to make

165
00:06:28,960 --> 00:06:32,080
both of those steps um very time

166
00:06:32,080 --> 00:06:34,319
consuming so you know you have tiny

167
00:06:34,319 --> 00:06:36,560
little

168
00:06:36,800 --> 00:06:39,840
i don't know like 10 lines of code

169
00:06:39,840 --> 00:06:41,360
bash script

170
00:06:41,360 --> 00:06:43,280
probably not not even

171
00:06:43,280 --> 00:06:46,000
worth running a code scanner on but you

172
00:06:46,000 --> 00:06:47,759
know for a small project you would have

173
00:06:47,759 --> 00:06:49,120
issues with

174
00:06:49,120 --> 00:06:50,080
um

175
00:06:50,080 --> 00:06:52,800
you know figuring out how to um to scan

176
00:06:52,800 --> 00:06:55,120
it uh for a larger pro

177
00:06:55,120 --> 00:06:57,440
um i'm sorry i just completely lost my

178
00:06:57,440 --> 00:07:00,000
transport um for a larger project

179
00:07:00,000 --> 00:07:01,599
project you know not only do you have to

180
00:07:01,599 --> 00:07:04,319
figure out how to scan it um it's going

181
00:07:04,319 --> 00:07:05,919
to take a lot of time

182
00:07:05,919 --> 00:07:06,960
and

183
00:07:06,960 --> 00:07:08,319
it is

184
00:07:08,319 --> 00:07:09,680
if you want to

185
00:07:09,680 --> 00:07:12,000
scan a lot of things or at least you

186
00:07:12,000 --> 00:07:14,080
know more than you know two or three

187
00:07:14,080 --> 00:07:16,160
things you want to probably find an

188
00:07:16,160 --> 00:07:18,800
efficient way to do that rather than you

189
00:07:18,800 --> 00:07:20,160
know

190
00:07:20,160 --> 00:07:21,919
sometimes it's a great excuse i i

191
00:07:21,919 --> 00:07:24,479
remember that not that i'm a fan of xkcb

192
00:07:24,479 --> 00:07:26,080
but there's they're like why are you

193
00:07:26,080 --> 00:07:28,960
guys you know fighting with swords and

194
00:07:28,960 --> 00:07:30,639
oh we're waiting for our code to compile

195
00:07:30,639 --> 00:07:32,240
you know sometimes you just want to want

196
00:07:32,240 --> 00:07:34,960
to get it done efficiently

197
00:07:34,960 --> 00:07:37,840
and this is very true in

198
00:07:37,840 --> 00:07:39,919
a work environment

199
00:07:39,919 --> 00:07:40,800
um

200
00:07:40,800 --> 00:07:43,280
so this is this slide talks more to the

201
00:07:43,280 --> 00:07:44,800
work environment that we're going

202
00:07:44,800 --> 00:07:46,479
through um

203
00:07:46,479 --> 00:07:48,160
that applies to your personal stuff i

204
00:07:48,160 --> 00:07:49,680
mean with your personal stuff you

205
00:07:49,680 --> 00:07:51,440
probably you know can set it and forget

206
00:07:51,440 --> 00:07:53,680
it come back and look at the results

207
00:07:53,680 --> 00:07:54,639
later

208
00:07:54,639 --> 00:07:55,440
but

209
00:07:55,440 --> 00:07:58,800
what if you are trying to do this in a

210
00:07:58,800 --> 00:08:01,440
you know for somewhere that you work or

211
00:08:01,440 --> 00:08:03,440
you know maybe you're just a part of an

212
00:08:03,440 --> 00:08:04,960
open source project that you want to

213
00:08:04,960 --> 00:08:06,720
contribute to

214
00:08:06,720 --> 00:08:07,759
so

215
00:08:07,759 --> 00:08:09,919
one of the questions when i started

216
00:08:09,919 --> 00:08:12,240
figuring out how to automate this for my

217
00:08:12,240 --> 00:08:14,479
specific um

218
00:08:14,479 --> 00:08:17,680
usage of running it locally uh is like

219
00:08:17,680 --> 00:08:20,080
well why don't you just put the scanner

220
00:08:20,080 --> 00:08:22,319
in your

221
00:08:22,319 --> 00:08:23,440
continuous

222
00:08:23,440 --> 00:08:25,199
integration and you can use development

223
00:08:25,199 --> 00:08:27,199
pipeline you know why don't we you use

224
00:08:27,199 --> 00:08:29,520
what the company is using to build their

225
00:08:29,520 --> 00:08:30,720
projects

226
00:08:30,720 --> 00:08:32,159
um

227
00:08:32,159 --> 00:08:33,599
you know

228
00:08:33,599 --> 00:08:35,519
anyway like they they need to

229
00:08:35,519 --> 00:08:37,200
i'm sorry it's it's continuous deploy

230
00:08:37,200 --> 00:08:39,760
not continuous development um but why

231
00:08:39,760 --> 00:08:41,440
don't you just use you know what they're

232
00:08:41,440 --> 00:08:43,039
using to build and release their

233
00:08:43,039 --> 00:08:45,200
projects well first you got to find the

234
00:08:45,200 --> 00:08:48,240
people who own that pipeline

235
00:08:48,240 --> 00:08:51,519
to implement scanning

236
00:08:51,920 --> 00:08:54,640
the other thing is like i said before

237
00:08:54,640 --> 00:08:56,480
adding scan steps

238
00:08:56,480 --> 00:09:00,160
will slow down the build servers usually

239
00:09:00,160 --> 00:09:02,640
and anything that you do

240
00:09:02,640 --> 00:09:03,680
that

241
00:09:03,680 --> 00:09:06,160
slows down

242
00:09:06,160 --> 00:09:10,000
your um your builds slows down um any

243
00:09:10,000 --> 00:09:11,839
work is going to lead to anger

244
00:09:11,839 --> 00:09:14,080
developers which is

245
00:09:14,080 --> 00:09:16,640
obviously

246
00:09:17,440 --> 00:09:18,240
like

247
00:09:18,240 --> 00:09:20,560
understandable right you know like we're

248
00:09:20,560 --> 00:09:22,399
we're all working really hard

249
00:09:22,399 --> 00:09:24,240
we all have deadlines that we need to

250
00:09:24,240 --> 00:09:26,480
meet we're all just kind of

251
00:09:26,480 --> 00:09:28,720
um you know anything that kind of throws

252
00:09:28,720 --> 00:09:32,320
you know a wrench in in the gears is

253
00:09:32,320 --> 00:09:34,240
gonna piss me off and then certainly

254
00:09:34,240 --> 00:09:36,640
gonna piss developers off

255
00:09:36,640 --> 00:09:39,040
and the same kind of thing is why not

256
00:09:39,040 --> 00:09:41,839
just you know take your scanner and

257
00:09:41,839 --> 00:09:44,560
build it you know add it as a plug-in or

258
00:09:44,560 --> 00:09:48,560
you know link it somehow with the ide

259
00:09:48,560 --> 00:09:51,920
not every developer uses one um i don't

260
00:09:51,920 --> 00:09:54,399
i write my own code for a lot of

261
00:09:54,399 --> 00:09:57,920
security work stuff and i use either

262
00:09:57,920 --> 00:10:00,080
sublime text or vim

263
00:10:00,080 --> 00:10:01,440
um

264
00:10:01,440 --> 00:10:04,320
not every scanner has compatibility or

265
00:10:04,320 --> 00:10:06,320
an ide plug-in

266
00:10:06,320 --> 00:10:08,880
and you know most people don't want

267
00:10:08,880 --> 00:10:10,560
their

268
00:10:10,560 --> 00:10:13,760
laptop to suddenly become a space heater

269
00:10:13,760 --> 00:10:16,240
or sound like a jet um

270
00:10:16,240 --> 00:10:20,800
going off and the other thing is that

271
00:10:20,800 --> 00:10:24,399
both of these steps require

272
00:10:24,560 --> 00:10:25,360
a

273
00:10:25,360 --> 00:10:28,959
collaboration or um participation by by

274
00:10:28,959 --> 00:10:31,680
the individuals who are writing the code

275
00:10:31,680 --> 00:10:33,839
you have to convince them that this is

276
00:10:33,839 --> 00:10:35,279
something that

277
00:10:35,279 --> 00:10:36,880
you know is

278
00:10:36,880 --> 00:10:39,680
meaningful and is is valuable uh and it

279
00:10:39,680 --> 00:10:41,519
is worth their time to

280
00:10:41,519 --> 00:10:43,680
to accept and

281
00:10:43,680 --> 00:10:46,000
how can you do that when you yourself

282
00:10:46,000 --> 00:10:48,399
have not evaluated

283
00:10:48,399 --> 00:10:51,279
the scanning tool like i said before a

284
00:10:51,279 --> 00:10:54,320
lot of scanning tools are of you know

285
00:10:54,320 --> 00:10:56,720
varying levels of suckage and varying

286
00:10:56,720 --> 00:10:58,800
levels of awesomeness

287
00:10:58,800 --> 00:11:00,800
so

288
00:11:00,800 --> 00:11:02,720
since i want to before i go to a

289
00:11:02,720 --> 00:11:05,519
developer or go to the ci cd team and

290
00:11:05,519 --> 00:11:09,200
say yo um this tool is awesome i should

291
00:11:09,200 --> 00:11:11,600
have facts to back that up and i should

292
00:11:11,600 --> 00:11:14,240
see how painful that tool is so if you

293
00:11:14,240 --> 00:11:15,920
need to evaluate a lot of different

294
00:11:15,920 --> 00:11:16,959
scanners

295
00:11:16,959 --> 00:11:18,720
find the right one whether it be a

296
00:11:18,720 --> 00:11:21,040
scanner that's free so the example i'm

297
00:11:21,040 --> 00:11:22,480
going to use in this presentation is

298
00:11:22,480 --> 00:11:23,760
sonar cube

299
00:11:23,760 --> 00:11:26,640
or the scanner that um maybe you're

300
00:11:26,640 --> 00:11:27,760
actually going gonna have to shell out

301
00:11:27,760 --> 00:11:30,959
some money for so um you know do i

302
00:11:30,959 --> 00:11:33,200
really you gotta justify the people who

303
00:11:33,200 --> 00:11:35,040
are gonna you know actually write the

304
00:11:35,040 --> 00:11:37,360
check and pay the company saying like

305
00:11:37,360 --> 00:11:40,079
you need to usually provide verifiable

306
00:11:40,079 --> 00:11:42,480
results i mean maybe some places you're

307
00:11:42,480 --> 00:11:45,279
like oh yeah kelly said that's cool um

308
00:11:45,279 --> 00:11:46,959
yeah let's buy it and and then they're

309
00:11:46,959 --> 00:11:48,880
like oh yeah um

310
00:11:48,880 --> 00:11:50,959
the scanner actually mines bitcoin and

311
00:11:50,959 --> 00:11:52,639
now we're all

312
00:11:52,639 --> 00:11:56,120
pardon my french

313
00:11:57,440 --> 00:11:58,480
okay

314
00:11:58,480 --> 00:12:00,320
and i don't think this this is going to

315
00:12:00,320 --> 00:12:03,279
take um 30 minutes because um

316
00:12:03,279 --> 00:12:04,639
you know

317
00:12:04,639 --> 00:12:07,440
it's it's a relatively simple topic

318
00:12:07,440 --> 00:12:10,440
but

319
00:12:10,800 --> 00:12:14,800
we'll see the solution so i wrote two

320
00:12:14,800 --> 00:12:17,200
little python scripts of relatively

321
00:12:17,200 --> 00:12:18,800
little python scripts

322
00:12:18,800 --> 00:12:20,639
to um

323
00:12:20,639 --> 00:12:23,360
basically evaluate uh various code

324
00:12:23,360 --> 00:12:24,720
scanning tools

325
00:12:24,720 --> 00:12:26,639
one i wanted to see what the quality of

326
00:12:26,639 --> 00:12:28,320
the results were

327
00:12:28,320 --> 00:12:31,279
um so you know is this going to just

328
00:12:31,279 --> 00:12:33,360
produce a lot of crap that i have to

329
00:12:33,360 --> 00:12:35,600
sort through and filter through maybe

330
00:12:35,600 --> 00:12:37,360
some of the results are useful but then

331
00:12:37,360 --> 00:12:40,079
i need to come up with a strategy to

332
00:12:40,079 --> 00:12:41,120
let's say

333
00:12:41,120 --> 00:12:43,120
you know triage the results throw out

334
00:12:43,120 --> 00:12:45,120
the stuff that sucks throw up the stuff

335
00:12:45,120 --> 00:12:47,440
that uh keep the stuff that's useful

336
00:12:47,440 --> 00:12:49,920
um also i want to evaluate

337
00:12:49,920 --> 00:12:51,680
whether this is something that i can

338
00:12:51,680 --> 00:12:54,800
reasonably ask people to use

339
00:12:54,800 --> 00:12:57,839
whether it be in their ide or their cicd

340
00:12:57,839 --> 00:12:59,360
pipeline

341
00:12:59,360 --> 00:13:02,160
and that's a met that's a combination of

342
00:13:02,160 --> 00:13:04,079
is this going to slow stuff down so that

343
00:13:04,079 --> 00:13:05,920
people can't get work done in a timely

344
00:13:05,920 --> 00:13:06,959
fashion

345
00:13:06,959 --> 00:13:10,000
um and just get frustrated and totally

346
00:13:10,000 --> 00:13:11,920
hate me and you know send me you know

347
00:13:11,920 --> 00:13:14,959
glitter bombs or flaming boot bags or i

348
00:13:14,959 --> 00:13:15,920
don't know

349
00:13:15,920 --> 00:13:17,839
um

350
00:13:17,839 --> 00:13:21,279
and also um are these results just going

351
00:13:21,279 --> 00:13:23,040
to completely

352
00:13:23,040 --> 00:13:24,079
like

353
00:13:24,079 --> 00:13:27,360
confuse them which creates more work for

354
00:13:27,360 --> 00:13:29,519
me or creates more work for the security

355
00:13:29,519 --> 00:13:31,279
team because they're come back they're

356
00:13:31,279 --> 00:13:32,800
totally freaked out because it's like

357
00:13:32,800 --> 00:13:34,959
sonar cube gave me a grade and my grade

358
00:13:34,959 --> 00:13:36,079
is f

359
00:13:36,079 --> 00:13:38,399
what does that mean like i thought i was

360
00:13:38,399 --> 00:13:40,320
doing a good job and it's like well yeah

361
00:13:40,320 --> 00:13:42,079
you probably are doing a good job but

362
00:13:42,079 --> 00:13:44,800
sonar cube has a couple weird ways of

363
00:13:44,800 --> 00:13:47,600
you know um

364
00:13:47,600 --> 00:13:49,920
ranking things so um

365
00:13:49,920 --> 00:13:52,800
for example center cube will compare

366
00:13:52,800 --> 00:13:54,800
the

367
00:13:54,800 --> 00:13:57,199
last scan to the current scan and if you

368
00:13:57,199 --> 00:13:59,440
introduced a certain level a certain

369
00:13:59,440 --> 00:14:03,040
threshold of new problems it will

370
00:14:03,040 --> 00:14:05,199
lower your score depending on what kind

371
00:14:05,199 --> 00:14:08,319
of problems you're

372
00:14:09,040 --> 00:14:11,600
basically introducing

373
00:14:11,600 --> 00:14:15,880
in that new in that new scan

374
00:14:16,160 --> 00:14:19,040
so again i'm i'm just focusing just for

375
00:14:19,040 --> 00:14:20,800
the sake of time maybe that was a bad

376
00:14:20,800 --> 00:14:22,320
idea because again i said i don't think

377
00:14:22,320 --> 00:14:23,760
this is actually going to take 30

378
00:14:23,760 --> 00:14:24,880
minutes

379
00:14:24,880 --> 00:14:26,800
um i apologize

380
00:14:26,800 --> 00:14:30,480
for for i did not provide enough beef um

381
00:14:30,480 --> 00:14:32,720
so this is just the example of saraki

382
00:14:32,720 --> 00:14:35,120
like some scanners you basically point

383
00:14:35,120 --> 00:14:37,360
them to a folder where all your scan

384
00:14:37,360 --> 00:14:39,279
lives or you put point them to a github

385
00:14:39,279 --> 00:14:42,240
repository and it just scans it

386
00:14:42,240 --> 00:14:44,399
with sonar cube it actually tries to be

387
00:14:44,399 --> 00:14:46,720
a little bit more intelligent than that

388
00:14:46,720 --> 00:14:49,360
where they in most cases there there is

389
00:14:49,360 --> 00:14:51,199
actually a counter example for this that

390
00:14:51,199 --> 00:14:52,560
we'll get into

391
00:14:52,560 --> 00:14:53,839
um

392
00:14:53,839 --> 00:14:55,519
what they'll actually do is when you

393
00:14:55,519 --> 00:14:57,440
build your code

394
00:14:57,440 --> 00:14:58,720
then um

395
00:14:58,720 --> 00:15:02,480
it'll basically spy on your code build

396
00:15:02,480 --> 00:15:05,120
you know see what is actually you know

397
00:15:05,120 --> 00:15:08,160
what is being pulled when and where and

398
00:15:08,160 --> 00:15:10,880
sort of just kind of create like a oh

399
00:15:10,880 --> 00:15:13,279
okay so i i see especially when you're

400
00:15:13,279 --> 00:15:14,959
rebuilding code that this is where it

401
00:15:14,959 --> 00:15:17,279
becomes like very helpful because it's

402
00:15:17,279 --> 00:15:19,279
like oh i see they're only you know

403
00:15:19,279 --> 00:15:20,480
touching these files they're not

404
00:15:20,480 --> 00:15:21,920
touching these files so i don't need to

405
00:15:21,920 --> 00:15:24,320
scan the whole thing i just need to look

406
00:15:24,320 --> 00:15:26,800
at the stuff that's changed um so that's

407
00:15:26,800 --> 00:15:29,839
good for efficiency um as well as you

408
00:15:29,839 --> 00:15:32,399
know knowing what to target when they do

409
00:15:32,399 --> 00:15:33,279
uh

410
00:15:33,279 --> 00:15:37,279
the actual processing of the uh

411
00:15:37,279 --> 00:15:38,959
scan results

412
00:15:38,959 --> 00:15:40,959
um so sarnar cube the way that sonarky

413
00:15:40,959 --> 00:15:42,160
works i should have put a network

414
00:15:42,160 --> 00:15:44,639
diagram in here uh hindsight is always

415
00:15:44,639 --> 00:15:47,040
2020 whereas the french call it let's

416
00:15:47,040 --> 00:15:49,199
there the escalator which means

417
00:15:49,199 --> 00:15:51,360
staircase wit where you remember a funny

418
00:15:51,360 --> 00:15:53,440
joke after you've left the party

419
00:15:53,440 --> 00:15:55,279
um you need to start the scanner so

420
00:15:55,279 --> 00:15:57,360
you'll have your sonar cube where you

421
00:15:57,360 --> 00:16:00,079
keep all your scan results on some sort

422
00:16:00,079 --> 00:16:02,320
of server or a virtual machine running

423
00:16:02,320 --> 00:16:03,920
on your desktop if you're just doing it

424
00:16:03,920 --> 00:16:06,479
locally

425
00:16:07,040 --> 00:16:08,720
so you need to know where to send those

426
00:16:08,720 --> 00:16:10,959
results so when you start the scanner

427
00:16:10,959 --> 00:16:12,800
you need to tell it

428
00:16:12,800 --> 00:16:15,120
where the results need to be sent

429
00:16:15,120 --> 00:16:18,320
and uh you need a key to authenticate to

430
00:16:18,320 --> 00:16:20,240
it so it knows that you're not just some

431
00:16:20,240 --> 00:16:21,759
sort of random

432
00:16:21,759 --> 00:16:22,880
sending

433
00:16:22,880 --> 00:16:24,560
what looks like certain repeat results

434
00:16:24,560 --> 00:16:26,880
there so they use the api key to

435
00:16:26,880 --> 00:16:29,199
authenticate and if the api key is valid

436
00:16:29,199 --> 00:16:30,639
then they will allow you to upload

437
00:16:30,639 --> 00:16:31,839
results

438
00:16:31,839 --> 00:16:33,360
uh the other thing that i should have

439
00:16:33,360 --> 00:16:35,360
put in here that i forgot is that you're

440
00:16:35,360 --> 00:16:38,399
also going to need a consistent product

441
00:16:38,399 --> 00:16:40,560
name and this is important if you're

442
00:16:40,560 --> 00:16:43,199
going to be doing incremental scans so

443
00:16:43,199 --> 00:16:45,440
not just like one baseline scan and then

444
00:16:45,440 --> 00:16:47,360
you're done and you don't care anymore

445
00:16:47,360 --> 00:16:49,440
but let's say you know i have my code

446
00:16:49,440 --> 00:16:52,240
base let's call it i don't know um taco

447
00:16:52,240 --> 00:16:53,199
city

448
00:16:53,199 --> 00:16:55,920
uh and then i add more code to taco city

449
00:16:55,920 --> 00:16:57,759
and rescan it then it can actually do

450
00:16:57,759 --> 00:17:00,560
comparisons about how the code base is

451
00:17:00,560 --> 00:17:02,720
getting better or worse and that's the

452
00:17:02,720 --> 00:17:04,640
sort of like letter grade example that i

453
00:17:04,640 --> 00:17:07,199
was talking about previously

454
00:17:07,199 --> 00:17:10,559
so after that you run the build um

455
00:17:10,559 --> 00:17:13,839
sonar cube again recommends that you um

456
00:17:13,839 --> 00:17:15,520
after the first time you build it you

457
00:17:15,520 --> 00:17:18,000
run it as a rebuild not not a complete

458
00:17:18,000 --> 00:17:21,280
build but either ways it will look and

459
00:17:21,280 --> 00:17:23,119
see and i should probably pause at this

460
00:17:23,119 --> 00:17:25,599
moment and say i'm not a i'm not getting

461
00:17:25,599 --> 00:17:27,679
paid by center cube

462
00:17:27,679 --> 00:17:29,440
to advocate for their

463
00:17:29,440 --> 00:17:32,400
um software um i have mixed feelings

464
00:17:32,400 --> 00:17:34,559
about sonar cube as i'm sure anybody's

465
00:17:34,559 --> 00:17:36,080
ever used it does

466
00:17:36,080 --> 00:17:37,440
um so

467
00:17:37,440 --> 00:17:40,000
this is just for example fake because

468
00:17:40,000 --> 00:17:42,160
this is one of the more complicated code

469
00:17:42,160 --> 00:17:45,200
scanners that i've had to interact with

470
00:17:45,200 --> 00:17:48,080
um i'm sure other things like barricode

471
00:17:48,080 --> 00:17:50,000
are

472
00:17:50,000 --> 00:17:53,280
probably also require a lot of steps but

473
00:17:53,280 --> 00:17:55,679
this is because soner cube it does have

474
00:17:55,679 --> 00:17:57,840
a free community edition i thought this

475
00:17:57,840 --> 00:18:00,559
would be a little bit more practical um

476
00:18:00,559 --> 00:18:03,039
but anyway so then you run the build um

477
00:18:03,039 --> 00:18:05,280
and it depends on what you're building

478
00:18:05,280 --> 00:18:08,240
so for example if i am just um some

479
00:18:08,240 --> 00:18:10,160
things don't have to be built like a

480
00:18:10,160 --> 00:18:11,840
python script

481
00:18:11,840 --> 00:18:14,640
you just run it right like i guess you

482
00:18:14,640 --> 00:18:16,960
could post compile it i i know you can

483
00:18:16,960 --> 00:18:18,720
do that for for other interpretive

484
00:18:18,720 --> 00:18:20,960
languages but if you're using something

485
00:18:20,960 --> 00:18:23,440
like let's say.net uh you know if you

486
00:18:23,440 --> 00:18:25,840
need to um you know maybe upgrade your

487
00:18:25,840 --> 00:18:28,799
packages you need to find the solution

488
00:18:28,799 --> 00:18:31,039
file uh sometimes things will have

489
00:18:31,039 --> 00:18:34,080
multiple solution files um

490
00:18:34,080 --> 00:18:36,320
and

491
00:18:36,320 --> 00:18:37,360
basically

492
00:18:37,360 --> 00:18:39,280
build it um

493
00:18:39,280 --> 00:18:41,440
you know for c c or c plus plus then

494
00:18:41,440 --> 00:18:43,039
you're gonna have to compile it using

495
00:18:43,039 --> 00:18:45,440
you know gcc or whatever you're using

496
00:18:45,440 --> 00:18:48,320
but um again if you're processing things

497
00:18:48,320 --> 00:18:50,400
in a lot of different languages then you

498
00:18:50,400 --> 00:18:53,039
need to have different steps so rather

499
00:18:53,039 --> 00:18:54,880
than manually sitting at the keyboard

500
00:18:54,880 --> 00:18:56,640
typing out all those commands this is

501
00:18:56,640 --> 00:18:59,280
why i built franken code and monster

502
00:18:59,280 --> 00:19:00,240
mash

503
00:19:00,240 --> 00:19:01,120
um

504
00:19:01,120 --> 00:19:03,600
this is just uh this is a coincidence

505
00:19:03,600 --> 00:19:04,960
that all of these things are sort of

506
00:19:04,960 --> 00:19:06,799
halloween themed i actually built these

507
00:19:06,799 --> 00:19:09,200
maybe like a year ago um and have been

508
00:19:09,200 --> 00:19:10,960
working on them since

509
00:19:10,960 --> 00:19:12,559
but um

510
00:19:12,559 --> 00:19:15,200
yes um nice timing there kelly i'm

511
00:19:15,200 --> 00:19:17,280
finding myself on the back

512
00:19:17,280 --> 00:19:19,039
okay so after your build runs you need

513
00:19:19,039 --> 00:19:21,280
to initiate processing and this is where

514
00:19:21,280 --> 00:19:25,039
the results will be um generated so um

515
00:19:25,039 --> 00:19:27,760
after so center cube is going to scan uh

516
00:19:27,760 --> 00:19:29,760
spy on all the stuff you're doing to

517
00:19:29,760 --> 00:19:32,559
build your code and then collect the

518
00:19:32,559 --> 00:19:34,799
information that it needs to actually

519
00:19:34,799 --> 00:19:38,160
you know evaluate the results

520
00:19:38,160 --> 00:19:41,280
of that build so what it's going to do

521
00:19:41,280 --> 00:19:44,080
or what it does is it will pull down

522
00:19:44,080 --> 00:19:47,600
um from your sonar cube server and again

523
00:19:47,600 --> 00:19:49,440
i apologize for not having a screenshot

524
00:19:49,440 --> 00:19:51,360
of this

525
00:19:51,360 --> 00:19:53,280
because some of the stuff i've

526
00:19:53,280 --> 00:19:57,360
i have redacted a lot of content here um

527
00:19:57,360 --> 00:19:58,880
it's going to pull down your rule sets

528
00:19:58,880 --> 00:20:00,240
you know there may be rules that you

529
00:20:00,240 --> 00:20:01,840
have disabled because you really don't

530
00:20:01,840 --> 00:20:04,400
care about them there may be rules that

531
00:20:04,400 --> 00:20:06,640
you have found to

532
00:20:06,640 --> 00:20:09,360
um be

533
00:20:09,600 --> 00:20:11,280
not applied to

534
00:20:11,280 --> 00:20:13,360
a particular codebase or a particular

535
00:20:13,360 --> 00:20:15,600
thing that you're looking for

536
00:20:15,600 --> 00:20:16,559
and

537
00:20:16,559 --> 00:20:17,440
you know

538
00:20:17,440 --> 00:20:19,679
again it's just way too noisy there may

539
00:20:19,679 --> 00:20:21,760
be things that you basically maybe you

540
00:20:21,760 --> 00:20:23,679
want everything maybe you want

541
00:20:23,679 --> 00:20:25,440
a specific amount of things maybe you

542
00:20:25,440 --> 00:20:27,919
want a mix of the two um so it'll

543
00:20:27,919 --> 00:20:30,080
actually say oh okay what are the rules

544
00:20:30,080 --> 00:20:33,120
that i need to um actually run against

545
00:20:33,120 --> 00:20:35,679
uh the build and then generate the

546
00:20:35,679 --> 00:20:39,280
results and upload them i'm going to

547
00:20:39,280 --> 00:20:41,520
actually interject one additional

548
00:20:41,520 --> 00:20:42,640
thought here

549
00:20:42,640 --> 00:20:46,240
is that if you are running sonar cube um

550
00:20:46,240 --> 00:20:48,080
somewhere i mean you have to run the

551
00:20:48,080 --> 00:20:50,000
sarah cube server somewhere

552
00:20:50,000 --> 00:20:52,400
if you are running it on a very very

553
00:20:52,400 --> 00:20:54,720
large code base um

554
00:20:54,720 --> 00:20:56,400
one of the largest code bases that i've

555
00:20:56,400 --> 00:20:59,280
run sonar cube on is in

556
00:20:59,280 --> 00:21:02,000
is more than one million and less than

557
00:21:02,000 --> 00:21:03,919
10 million lines of code

558
00:21:03,919 --> 00:21:04,720
and

559
00:21:04,720 --> 00:21:05,679
um

560
00:21:05,679 --> 00:21:06,559
if

561
00:21:06,559 --> 00:21:08,400
basically send

562
00:21:08,400 --> 00:21:10,720
the local run of sarah cube the local

563
00:21:10,720 --> 00:21:12,880
scan actually will

564
00:21:12,880 --> 00:21:17,120
try to send it in like one entire

565
00:21:17,120 --> 00:21:19,760
um http post

566
00:21:19,760 --> 00:21:23,039
to the server so

567
00:21:23,039 --> 00:21:24,799
make sure that like whether you're

568
00:21:24,799 --> 00:21:28,400
running nginx or whatever um

569
00:21:28,400 --> 00:21:31,120
for your um

570
00:21:31,120 --> 00:21:33,440
web server uh for the sonarcube server

571
00:21:33,440 --> 00:21:35,280
make sure you increase

572
00:21:35,280 --> 00:21:37,760
the the size of of the amount of packets

573
00:21:37,760 --> 00:21:40,960
it accepts to the maximum value uh that

574
00:21:40,960 --> 00:21:43,200
you think that that server can handle

575
00:21:43,200 --> 00:21:44,960
because

576
00:21:44,960 --> 00:21:48,799
yeah it's a lot it's like

577
00:21:49,200 --> 00:21:51,039
i'm just going to throw you this whole

578
00:21:51,039 --> 00:21:52,559
car

579
00:21:52,559 --> 00:21:56,159
not like here's the no

580
00:21:56,159 --> 00:21:58,400
that was a bad analogy i apologize

581
00:21:58,400 --> 00:22:00,880
it's early

582
00:22:00,880 --> 00:22:04,159
so let's take a look at this code um

583
00:22:04,159 --> 00:22:08,080
and i will show you what i've done here

584
00:22:08,080 --> 00:22:10,880
so hopefully you can all still see

585
00:22:10,880 --> 00:22:14,880
my and again this is

586
00:22:14,880 --> 00:22:17,440
not the i i know that there are some

587
00:22:17,440 --> 00:22:20,559
people who who do python like quite a

588
00:22:20,559 --> 00:22:23,600
bit and this is not the my most pythonic

589
00:22:23,600 --> 00:22:27,039
code this is not the cleanest code

590
00:22:27,039 --> 00:22:28,559
um

591
00:22:28,559 --> 00:22:29,840
again i

592
00:22:29,840 --> 00:22:31,919
wrote this just so i could get stuff

593
00:22:31,919 --> 00:22:34,559
done not to have the most beautiful

594
00:22:34,559 --> 00:22:37,760
elegant solution possible because for my

595
00:22:37,760 --> 00:22:40,880
purposes this was more for proving that

596
00:22:40,880 --> 00:22:43,360
um the scanner was something that i

597
00:22:43,360 --> 00:22:45,360
actually wanted to

598
00:22:45,360 --> 00:22:47,120
um

599
00:22:47,120 --> 00:22:50,240
impose upon developers you know um like

600
00:22:50,240 --> 00:22:53,039
make it make basically demonstrate that

601
00:22:53,039 --> 00:22:54,720
it was worth the pain that they would be

602
00:22:54,720 --> 00:22:57,360
experiencing and i think that's that's

603
00:22:57,360 --> 00:22:59,600
really important um for any security

604
00:22:59,600 --> 00:23:01,520
professional not just with code scanners

605
00:23:01,520 --> 00:23:03,200
just to be my

606
00:23:03,200 --> 00:23:04,080
brief

607
00:23:04,080 --> 00:23:06,640
like 10 second ted talk is you really

608
00:23:06,640 --> 00:23:09,120
get a lot more receptive when developers

609
00:23:09,120 --> 00:23:11,679
get the sense that you're not there to

610
00:23:11,679 --> 00:23:14,000
play like mall cop right around on your

611
00:23:14,000 --> 00:23:15,840
little motor scooter and you're like

612
00:23:15,840 --> 00:23:18,480
yeah i know this sucks but you know it's

613
00:23:18,480 --> 00:23:20,559
important and

614
00:23:20,559 --> 00:23:23,200
it's really gonna lead to you know you

615
00:23:23,200 --> 00:23:25,600
having to do less work in the future

616
00:23:25,600 --> 00:23:27,840
and the analogy i always use is like

617
00:23:27,840 --> 00:23:29,200
when

618
00:23:29,200 --> 00:23:30,640
you know when i make a meal in the

619
00:23:30,640 --> 00:23:32,720
kitchen i always wipe down the counters

620
00:23:32,720 --> 00:23:34,559
afterwards rather than letting it build

621
00:23:34,559 --> 00:23:36,400
up and do like one big clean at the end

622
00:23:36,400 --> 00:23:38,320
of the week it's just like

623
00:23:38,320 --> 00:23:40,240
a lot easier

624
00:23:40,240 --> 00:23:42,559
um

625
00:23:42,720 --> 00:23:44,000
you know you're not getting in there

626
00:23:44,000 --> 00:23:44,880
with the

627
00:23:44,880 --> 00:23:47,200
like the gasoline and the

628
00:23:47,200 --> 00:23:48,320
um

629
00:23:48,320 --> 00:23:50,159
what are they called magic erasers and

630
00:23:50,159 --> 00:23:51,919
like putting in a lot of elbow grease

631
00:23:51,919 --> 00:23:53,279
just wipe off

632
00:23:53,279 --> 00:23:55,120
stove every time you cook

633
00:23:55,120 --> 00:23:56,880
anywho um

634
00:23:56,880 --> 00:23:58,799
so as you can see here

635
00:23:58,799 --> 00:24:00,480
this is where i'm passing in and this is

636
00:24:00,480 --> 00:24:03,039
not a real api key because you know i

637
00:24:03,039 --> 00:24:06,640
like to not uh tell people where

638
00:24:06,640 --> 00:24:08,480
my actual stuff lives

639
00:24:08,480 --> 00:24:11,279
um if you want this is basic c4 encoded

640
00:24:11,279 --> 00:24:14,000
if you want to find the easter egg there

641
00:24:14,000 --> 00:24:16,000
um you probably want to screenshot that

642
00:24:16,000 --> 00:24:19,039
real quick um and this is the location

643
00:24:19,039 --> 00:24:21,600
of the sarah cube server there is if you

644
00:24:21,600 --> 00:24:23,279
try to go to this url you will not get

645
00:24:23,279 --> 00:24:24,960
anything probably should have just like

646
00:24:24,960 --> 00:24:26,960
posted like a quick like

647
00:24:26,960 --> 00:24:30,159
you know joke page at this sub domain

648
00:24:30,159 --> 00:24:30,960
but

649
00:24:30,960 --> 00:24:34,640
um yeah yeah again hindsight's 20 20. um

650
00:24:34,640 --> 00:24:36,799
for this one i'm actually accepting two

651
00:24:36,799 --> 00:24:38,159
different commands

652
00:24:38,159 --> 00:24:39,360
so um

653
00:24:39,360 --> 00:24:41,200
this one scans

654
00:24:41,200 --> 00:24:43,200
dot net core

655
00:24:43,200 --> 00:24:44,240
um

656
00:24:44,240 --> 00:24:47,200
and also it scans things that are just

657
00:24:47,200 --> 00:24:48,640
not.net

658
00:24:48,640 --> 00:24:49,679
at all

659
00:24:49,679 --> 00:24:51,279
so

660
00:24:51,279 --> 00:24:53,760
for example some things will be um

661
00:24:53,760 --> 00:24:55,919
powershell scripts some things will be

662
00:24:55,919 --> 00:24:58,799
just yeah uh are they powerful no some

663
00:24:58,799 --> 00:25:00,400
things will be you know like um some

664
00:25:00,400 --> 00:25:01,919
things will be python scripts some

665
00:25:01,919 --> 00:25:03,919
things will be other non

666
00:25:03,919 --> 00:25:06,400
um compiled languages i think i have

667
00:25:06,400 --> 00:25:09,360
some php crap in there at one point

668
00:25:09,360 --> 00:25:10,400
um

669
00:25:10,400 --> 00:25:13,039
and then i just list out

670
00:25:13,039 --> 00:25:15,200
the projects that i want to scan again i

671
00:25:15,200 --> 00:25:17,919
have reacted the name of the um projects

672
00:25:17,919 --> 00:25:20,080
that i actually did

673
00:25:20,080 --> 00:25:22,080
um and then i defined the start command

674
00:25:22,080 --> 00:25:24,480
because if you're scanning.net4 you need

675
00:25:24,480 --> 00:25:26,240
a different command

676
00:25:26,240 --> 00:25:27,200
than

677
00:25:27,200 --> 00:25:29,840
um for scanning um interpretive

678
00:25:29,840 --> 00:25:31,440
languages

679
00:25:31,440 --> 00:25:33,840
and then i say here's the build command

680
00:25:33,840 --> 00:25:35,039
so it's just

681
00:25:35,039 --> 00:25:37,200
straight up.net build

682
00:25:37,200 --> 00:25:38,960
and then the end command is actually

683
00:25:38,960 --> 00:25:41,440
what initializes the post processing and

684
00:25:41,440 --> 00:25:44,559
says you know hey i i'm done building

685
00:25:44,559 --> 00:25:46,799
please analyze my stuff

686
00:25:46,799 --> 00:25:49,440
and send it to the center group server

687
00:25:49,440 --> 00:25:52,799
where the results will be stored

688
00:25:52,799 --> 00:25:57,200
now for the other so not net stuff

689
00:25:57,200 --> 00:26:00,480
um i again i list my projects

690
00:26:00,480 --> 00:26:01,600
um

691
00:26:01,600 --> 00:26:03,919
one thing i forgot to mention is that

692
00:26:03,919 --> 00:26:07,360
let me see if i can find it

693
00:26:08,799 --> 00:26:12,000
yeah so here um so some of my some of

694
00:26:12,000 --> 00:26:14,320
some of the things that um i have are

695
00:26:14,320 --> 00:26:16,400
like basically mixed content so some of

696
00:26:16,400 --> 00:26:18,159
them had like c

697
00:26:18,159 --> 00:26:22,960
um or c plus plus code so this these um

698
00:26:22,960 --> 00:26:24,799
and also there there was one that had

699
00:26:24,799 --> 00:26:27,919
objective c yeah um but these are sorry

700
00:26:27,919 --> 00:26:30,640
i didn't even say you um

701
00:26:30,640 --> 00:26:32,799
these are

702
00:26:32,799 --> 00:26:34,720
needs to be run by a different scanner

703
00:26:34,720 --> 00:26:36,559
and right at this point i didn't care

704
00:26:36,559 --> 00:26:39,600
about those um but either way i could

705
00:26:39,600 --> 00:26:41,039
not

706
00:26:41,039 --> 00:26:43,440
scan crc plus plus because sonar cube

707
00:26:43,440 --> 00:26:46,320
requires that if if something

708
00:26:46,320 --> 00:26:47,840
should be

709
00:26:47,840 --> 00:26:51,039
compiled then it will refuse to

710
00:26:51,039 --> 00:26:52,960
do anything with it if you're running

711
00:26:52,960 --> 00:26:54,960
the one for interpreted languages which

712
00:26:54,960 --> 00:26:55,760
is

713
00:26:55,760 --> 00:26:59,039
a sonar scanner

714
00:27:00,480 --> 00:27:02,640
now again there's no build command so

715
00:27:02,640 --> 00:27:04,880
i'm not doing any build

716
00:27:04,880 --> 00:27:08,080
then i have this weird thing here um

717
00:27:08,080 --> 00:27:11,039
basically this is the this is every

718
00:27:11,039 --> 00:27:14,240
every if you actually do you know like

719
00:27:14,240 --> 00:27:17,120
code analysis this is probably

720
00:27:17,120 --> 00:27:18,960
a little piece i'm sorry i should have

721
00:27:18,960 --> 00:27:21,760
put a content warning here um

722
00:27:21,760 --> 00:27:24,000
you have basically a bunch of nestled

723
00:27:24,000 --> 00:27:26,480
ifs so i go through every project

724
00:27:26,480 --> 00:27:28,240
um

725
00:27:28,240 --> 00:27:31,840
i first say you know okay

726
00:27:33,360 --> 00:27:36,080
assuming that it will fail i say hey uh

727
00:27:36,080 --> 00:27:38,559
fail uh starting center cube that would

728
00:27:38,559 --> 00:27:40,799
fail uh if it cannot get access to the

729
00:27:40,799 --> 00:27:43,600
server um if there is a problem

730
00:27:43,600 --> 00:27:47,600
also with the servers um

731
00:27:47,600 --> 00:27:50,960
tls certificate uh so like if there's a

732
00:27:50,960 --> 00:27:53,120
certificate mismatcher or whatever then

733
00:27:53,120 --> 00:27:55,200
sonarcube is is not going to be happy

734
00:27:55,200 --> 00:27:57,919
with you um it

735
00:27:57,919 --> 00:27:59,760
i believe

736
00:27:59,760 --> 00:28:02,000
it refuses to talk to us on our cube

737
00:28:02,000 --> 00:28:03,919
server if it's not over an encrypted

738
00:28:03,919 --> 00:28:05,039
connection

739
00:28:05,039 --> 00:28:07,840
so then i am just doing um i'm running

740
00:28:07,840 --> 00:28:08,720
these

741
00:28:08,720 --> 00:28:10,720
i'm creating the start command so

742
00:28:10,720 --> 00:28:13,440
basically saying start the command and

743
00:28:13,440 --> 00:28:17,039
then um this is the project

744
00:28:17,039 --> 00:28:19,279
then i run the command so now i have

745
00:28:19,279 --> 00:28:21,840
assumed that the center cube start has

746
00:28:21,840 --> 00:28:24,399
happened so now i'm going to say failed

747
00:28:24,399 --> 00:28:25,360
build

748
00:28:25,360 --> 00:28:28,080
because the build might fail

749
00:28:28,080 --> 00:28:29,440
and

750
00:28:29,440 --> 00:28:31,919
my run command where's my

751
00:28:31,919 --> 00:28:34,159
oh it's right here so run command is

752
00:28:34,159 --> 00:28:36,000
just doing a

753
00:28:36,000 --> 00:28:39,600
sub process in python um it is

754
00:28:39,600 --> 00:28:41,679
essentially running the command that i

755
00:28:41,679 --> 00:28:44,799
throw to it um if there is an error

756
00:28:44,799 --> 00:28:45,760
then

757
00:28:45,760 --> 00:28:47,840
i can get it using this

758
00:28:47,840 --> 00:28:51,039
basically process communicate

759
00:28:51,039 --> 00:28:53,520
i can get the status and then i can

760
00:28:53,520 --> 00:28:54,559
return

761
00:28:54,559 --> 00:28:57,520
that status so that i can say here's

762
00:28:57,520 --> 00:28:59,600
what messed up you know here's the error

763
00:28:59,600 --> 00:29:00,799
that i got

764
00:29:00,799 --> 00:29:03,440
of from running this uh from attempting

765
00:29:03,440 --> 00:29:06,320
to run this command

766
00:29:06,559 --> 00:29:09,360
so then i attempt the build and if that

767
00:29:09,360 --> 00:29:14,080
runs then i start post-processing again

768
00:29:14,080 --> 00:29:16,960
just putting this as an error in case

769
00:29:16,960 --> 00:29:20,159
uh post-processing fails the one-time

770
00:29:20,159 --> 00:29:21,840
there there are a few reasons why

771
00:29:21,840 --> 00:29:23,600
post-processing fails i already

772
00:29:23,600 --> 00:29:26,320
mentioned one where um the sonar cube

773
00:29:26,320 --> 00:29:29,360
server uh can't accept the large payload

774
00:29:29,360 --> 00:29:31,520
that you're sending it uh the other one

775
00:29:31,520 --> 00:29:34,000
is maybe just the server is down

776
00:29:34,000 --> 00:29:36,720
um maybe your computer lost internet

777
00:29:36,720 --> 00:29:39,840
access or whatever maybe you need to

778
00:29:39,840 --> 00:29:41,919
send it over the beep over a vpn your

779
00:29:41,919 --> 00:29:44,480
vpn connection is it's not there

780
00:29:44,480 --> 00:29:47,360
um and then if that actually succeeds

781
00:29:47,360 --> 00:29:50,080
then success and at the end i will give

782
00:29:50,080 --> 00:29:52,399
the results basically saying you know

783
00:29:52,399 --> 00:29:54,640
nuggets success

784
00:29:54,640 --> 00:29:57,120
uh attendees fail and here's where it

785
00:29:57,120 --> 00:29:58,960
failed here's the step in this process

786
00:29:58,960 --> 00:30:00,399
where it failed

787
00:30:00,399 --> 00:30:02,159
um

788
00:30:02,159 --> 00:30:04,240
and then i can also put in put an error

789
00:30:04,240 --> 00:30:05,760
message

790
00:30:05,760 --> 00:30:07,600
if i want to

791
00:30:07,600 --> 00:30:10,000
i did not do this

792
00:30:10,000 --> 00:30:12,640
um there is one thing that i that you

793
00:30:12,640 --> 00:30:14,799
can add if you want to get the full

794
00:30:14,799 --> 00:30:16,399
output so if you actually i did this

795
00:30:16,399 --> 00:30:17,760
just because i didn't want to see like

796
00:30:17,760 --> 00:30:19,760
stuff scrolling over and over again in

797
00:30:19,760 --> 00:30:22,000
my powershell window which is where i

798
00:30:22,000 --> 00:30:24,799
will run it because i'm an insane person

799
00:30:24,799 --> 00:30:26,799
but you can actually add sd out

800
00:30:26,799 --> 00:30:30,480
subprocess pipe um into here

801
00:30:30,480 --> 00:30:32,159
um

802
00:30:32,159 --> 00:30:33,679
or actually no i'm sorry you could take

803
00:30:33,679 --> 00:30:35,520
this out

804
00:30:35,520 --> 00:30:37,760
if you want the full output right now

805
00:30:37,760 --> 00:30:40,480
i'm basically saying i just want

806
00:30:40,480 --> 00:30:41,760
the stuff that i'm printing down here

807
00:30:41,760 --> 00:30:44,240
let me just make sure i'm okay okay cool

808
00:30:44,240 --> 00:30:45,760
and then it's basically the same thing

809
00:30:45,760 --> 00:30:47,440
for monster mash i broke this out

810
00:30:47,440 --> 00:30:50,480
because this is net dotnetframework.net

811
00:30:50,480 --> 00:30:51,440
core

812
00:30:51,440 --> 00:30:53,600
and um

813
00:30:53,600 --> 00:30:57,120
so not only do you need to know

814
00:30:57,120 --> 00:30:58,960
the name of the project and again this

815
00:30:58,960 --> 00:31:00,159
is the name of the project that's

816
00:31:00,159 --> 00:31:04,559
assigned in sonarqube uh the name of the

817
00:31:04,559 --> 00:31:05,600
um

818
00:31:05,600 --> 00:31:07,919
if you do not have that project already

819
00:31:07,919 --> 00:31:10,399
set up and you scan the same code base

820
00:31:10,399 --> 00:31:12,480
but you give it a different project name

821
00:31:12,480 --> 00:31:13,440
it's gonna

822
00:31:13,440 --> 00:31:16,320
automatically um create that new project

823
00:31:16,320 --> 00:31:18,559
name with the scan results and you won't

824
00:31:18,559 --> 00:31:20,799
get the advantage of having uh

825
00:31:20,799 --> 00:31:22,799
incremental builds where you can

826
00:31:22,799 --> 00:31:26,000
contrast uh differences between between

827
00:31:26,000 --> 00:31:27,039
versions

828
00:31:27,039 --> 00:31:29,679
the other thing about.net

829
00:31:29,679 --> 00:31:31,840
framework is sometimes you'll have a

830
00:31:31,840 --> 00:31:34,640
bunch of different solution files and

831
00:31:34,640 --> 00:31:37,200
there would be a master solution file

832
00:31:37,200 --> 00:31:38,399
that um

833
00:31:38,399 --> 00:31:40,799
runs all of the other ones

834
00:31:40,799 --> 00:31:42,960
essentially just kind of

835
00:31:42,960 --> 00:31:45,519
simplifying it a little bit so then i i

836
00:31:45,519 --> 00:31:46,799
basically say

837
00:31:46,799 --> 00:31:48,320
because

838
00:31:48,320 --> 00:31:50,320
ms build doesn't if there are multiple

839
00:31:50,320 --> 00:31:52,320
solution files ms bill doesn't know

840
00:31:52,320 --> 00:31:54,080
which one to use

841
00:31:54,080 --> 00:31:55,039
then

842
00:31:55,039 --> 00:31:56,159
um

843
00:31:56,159 --> 00:31:59,760
you need to basically specify it again

844
00:31:59,760 --> 00:32:01,120
i am

845
00:32:01,120 --> 00:32:03,840
going to talk to sonar cube again see

846
00:32:03,840 --> 00:32:06,080
here that i'm using sonar scanner.ms

847
00:32:06,080 --> 00:32:07,039
build

848
00:32:07,039 --> 00:32:08,799
rather than

849
00:32:08,799 --> 00:32:10,880
um

850
00:32:10,880 --> 00:32:13,120
dot net soner scanner

851
00:32:13,120 --> 00:32:14,240
because they're different commands

852
00:32:14,240 --> 00:32:15,760
because they're different languages

853
00:32:15,760 --> 00:32:17,679
essentially and then i have my n

854
00:32:17,679 --> 00:32:19,840
commands and basically i'm doing the

855
00:32:19,840 --> 00:32:22,320
exact same thing and the other one but

856
00:32:22,320 --> 00:32:24,080
in addition to

857
00:32:24,080 --> 00:32:27,799
adding the

858
00:32:29,039 --> 00:32:31,200
um the name of the project i'm also

859
00:32:31,200 --> 00:32:34,320
adding i i'm appending the project key

860
00:32:34,320 --> 00:32:36,720
to the command for the build

861
00:32:36,720 --> 00:32:37,840
and then

862
00:32:37,840 --> 00:32:40,399
same thing happens um

863
00:32:40,399 --> 00:32:43,279
it lets me know which one screwed up

864
00:32:43,279 --> 00:32:44,240
and

865
00:32:44,240 --> 00:32:47,200
then hopefully my results will be in

866
00:32:47,200 --> 00:32:48,799
sonar scanner

867
00:32:48,799 --> 00:32:51,799
um

868
00:32:57,679 --> 00:32:59,519
cool

869
00:32:59,519 --> 00:33:00,960
so um

870
00:33:00,960 --> 00:33:03,039
i know that that time is a little a

871
00:33:03,039 --> 00:33:04,880
little short here i

872
00:33:04,880 --> 00:33:06,960
forgot when i was supposed to end but um

873
00:33:06,960 --> 00:33:08,080
i will

874
00:33:08,080 --> 00:33:10,559
um see if anybody has any questions

875
00:33:10,559 --> 00:33:12,240
uh again i'm sorry that i couldn't show

876
00:33:12,240 --> 00:33:16,320
you the actual server or um you know

877
00:33:16,320 --> 00:33:18,799
the stuff actually running um just

878
00:33:18,799 --> 00:33:20,320
because

879
00:33:20,320 --> 00:33:24,640
um this is heavily redacted for um

880
00:33:24,640 --> 00:33:27,600
reasons i will not i will not split

881
00:33:27,600 --> 00:33:28,799
for reasons

882
00:33:28,799 --> 00:33:30,399
no problem

883
00:33:30,399 --> 00:33:32,080
and um

884
00:33:32,080 --> 00:33:34,240
it's an age-old problem isn't it dealing

885
00:33:34,240 --> 00:33:38,159
with security or apsec in pre-production

886
00:33:38,159 --> 00:33:40,159
environments and

887
00:33:40,159 --> 00:33:42,320
any tool to do the job is sometimes the

888
00:33:42,320 --> 00:33:43,600
appropriate pro

889
00:33:43,600 --> 00:33:44,799
approach

890
00:33:44,799 --> 00:33:47,679
um yeah so it's fascinating stuff and

891
00:33:47,679 --> 00:33:50,159
and coverage he talks about you

892
00:33:50,159 --> 00:33:52,799
between 1 and 10 million lines of code

893
00:33:52,799 --> 00:33:53,600
you know

894
00:33:53,600 --> 00:33:55,360
there are many examples of this and how

895
00:33:55,360 --> 00:33:57,919
you achieve the coverage is the

896
00:33:57,919 --> 00:34:00,720
challenge really we do have one question

897
00:34:00,720 --> 00:34:02,799
um sean would you mind reading that out

898
00:34:02,799 --> 00:34:04,159
because you probably see it a little bit

899
00:34:04,159 --> 00:34:08,079
better than me from nikos that one i'm

900
00:34:08,079 --> 00:34:09,440
not reading that one

901
00:34:09,440 --> 00:34:10,480
all right

902
00:34:10,480 --> 00:34:12,079
the question i have

903
00:34:12,079 --> 00:34:14,719
is that a lot of rule there's a lot of

904
00:34:14,719 --> 00:34:17,040
rules in sonarqu

905
00:34:17,040 --> 00:34:18,639
that can be tweaked

906
00:34:18,639 --> 00:34:20,879
meaning that a score won't hold

907
00:34:20,879 --> 00:34:22,879
everywhere how to

908
00:34:22,879 --> 00:34:26,000
deal with potentially uneven evaluation

909
00:34:26,000 --> 00:34:28,639
standards when it comes to providing

910
00:34:28,639 --> 00:34:32,879
assurances that x code is good code so

911
00:34:32,879 --> 00:34:34,399
basically

912
00:34:34,399 --> 00:34:37,440
rules can be modified how do you ensure

913
00:34:37,440 --> 00:34:39,440
those

914
00:34:39,440 --> 00:34:41,119
metrics around those rules are

915
00:34:41,119 --> 00:34:42,320
consistent

916
00:34:42,320 --> 00:34:44,239
across the organization so the great

917
00:34:44,239 --> 00:34:46,560
thing about um

918
00:34:46,560 --> 00:34:48,159
i shouldn't say great but one of one of

919
00:34:48,159 --> 00:34:50,239
the one of one of the helpful features

920
00:34:50,239 --> 00:34:52,399
of sonar cube is

921
00:34:52,399 --> 00:34:54,639
that you can actually create rules that

922
00:34:54,639 --> 00:34:57,119
are specific to a portfolio

923
00:34:57,119 --> 00:35:00,240
so you create a portfolio and you put

924
00:35:00,240 --> 00:35:02,079
all of your all the things you're

925
00:35:02,079 --> 00:35:03,760
scanning all your projects under that

926
00:35:03,760 --> 00:35:06,320
portfolio so you can make sure that and

927
00:35:06,320 --> 00:35:08,320
then you apply your rule set to that

928
00:35:08,320 --> 00:35:10,960
portfolio so that um basically

929
00:35:10,960 --> 00:35:12,560
everything is being held to the same

930
00:35:12,560 --> 00:35:14,720
standard um if you have different

931
00:35:14,720 --> 00:35:17,520
standards for you know different things

932
00:35:17,520 --> 00:35:19,359
basically like hey this is mission

933
00:35:19,359 --> 00:35:21,520
critical stuff i need to be a little bit

934
00:35:21,520 --> 00:35:22,400
more

935
00:35:22,400 --> 00:35:24,640
uh hard assed about it again apologize

936
00:35:24,640 --> 00:35:26,240
my language i don't think anybody gives

937
00:35:26,240 --> 00:35:28,160
a but you know i'm a new yorker we

938
00:35:28,160 --> 00:35:31,440
curse um but um you know like so like

939
00:35:31,440 --> 00:35:33,200
say this is this is mission critical we

940
00:35:33,200 --> 00:35:35,440
need to like have all the rules and you

941
00:35:35,440 --> 00:35:37,280
know because our auditors are going to

942
00:35:37,280 --> 00:35:38,720
get pissed off if they find out we

943
00:35:38,720 --> 00:35:41,359
disabled it or you know this stuff okay

944
00:35:41,359 --> 00:35:43,440
this stuff is experimental we mostly

945
00:35:43,440 --> 00:35:45,920
just care about you know best practices

946
00:35:45,920 --> 00:35:46,640
and

947
00:35:46,640 --> 00:35:48,560
um you know making sure that there

948
00:35:48,560 --> 00:35:50,800
aren't any bugs that that would you know

949
00:35:50,800 --> 00:35:54,000
make it not perform well you know you

950
00:35:54,000 --> 00:35:56,079
can make a separate portfolio for that

951
00:35:56,079 --> 00:35:58,720
so i hope hopefully i'm understanding

952
00:35:58,720 --> 00:36:01,040
and answering the question accurately

953
00:36:01,040 --> 00:36:02,160
um

954
00:36:02,160 --> 00:36:04,240
but yeah so um

955
00:36:04,240 --> 00:36:06,160
you can apply different rule sets to

956
00:36:06,160 --> 00:36:07,680
either different portfolios or different

957
00:36:07,680 --> 00:36:09,359
projects but if you want them to be

958
00:36:09,359 --> 00:36:11,760
consistent then you know just lump

959
00:36:11,760 --> 00:36:13,040
everything that you need to be

960
00:36:13,040 --> 00:36:15,520
consistent around the same thing

961
00:36:15,520 --> 00:36:16,480
um

962
00:36:16,480 --> 00:36:18,640
into the same portfolio the other thing

963
00:36:18,640 --> 00:36:20,640
that i would say is

964
00:36:20,640 --> 00:36:21,440
um

965
00:36:21,440 --> 00:36:24,800
i recommend and probably do this on a

966
00:36:24,800 --> 00:36:27,359
smaller code base to start with is just

967
00:36:27,359 --> 00:36:29,440
running it with the full gamut of rules

968
00:36:29,440 --> 00:36:31,200
just like all of them

969
00:36:31,200 --> 00:36:33,040
and you know just carefully going

970
00:36:33,040 --> 00:36:36,160
through and looking at the ones that

971
00:36:36,160 --> 00:36:37,920
you find valuable

972
00:36:37,920 --> 00:36:39,839
if there is somebody that you need to

973
00:36:39,839 --> 00:36:42,000
justify you know why something is

974
00:36:42,000 --> 00:36:44,160
valuable or not valuable then i would

975
00:36:44,160 --> 00:36:45,839
you know just like make like a google

976
00:36:45,839 --> 00:36:48,000
doc or you know some some notes

977
00:36:48,000 --> 00:36:50,400
somewhere basically saying we disabled

978
00:36:50,400 --> 00:36:52,560
this rule because of

979
00:36:52,560 --> 00:36:55,280
x-rays we kept this rule

980
00:36:55,280 --> 00:36:57,359
um this rule should never be disabled

981
00:36:57,359 --> 00:36:59,359
for example of um

982
00:36:59,359 --> 00:37:00,640
why reason

983
00:37:00,640 --> 00:37:03,119
and you know have that document

984
00:37:03,119 --> 00:37:05,920
documentation out there uh one because

985
00:37:05,920 --> 00:37:08,079
you know if you get hit by a bus um you

986
00:37:08,079 --> 00:37:09,280
don't want somebody ringing your cell

987
00:37:09,280 --> 00:37:11,599
phone while you're you know in uh

988
00:37:11,599 --> 00:37:12,320
and

989
00:37:12,320 --> 00:37:13,839
in hospital

990
00:37:13,839 --> 00:37:16,880
but also um

991
00:37:16,880 --> 00:37:18,480
because you know people will come back

992
00:37:18,480 --> 00:37:20,320
and say oh wait but you turned this rule

993
00:37:20,320 --> 00:37:22,079
off and you know like you can just turn

994
00:37:22,079 --> 00:37:25,280
off whatever you want and you know

995
00:37:25,280 --> 00:37:26,960
make your results you know look better

996
00:37:26,960 --> 00:37:29,280
than what the what it actually is so you

997
00:37:29,280 --> 00:37:30,560
know how

998
00:37:30,560 --> 00:37:31,680
obviously everybody should be

999
00:37:31,680 --> 00:37:33,920
documenting everything um but it but it

1000
00:37:33,920 --> 00:37:36,160
also comes back and so you can say hey

1001
00:37:36,160 --> 00:37:37,680
yeah um

1002
00:37:37,680 --> 00:37:40,400
i turned these off i had these people

1003
00:37:40,400 --> 00:37:44,000
agree that it's okay to turn them off um

1004
00:37:44,000 --> 00:37:46,240
and

1005
00:37:46,560 --> 00:37:47,760
you know

1006
00:37:47,760 --> 00:37:51,520
i'm not trying to do anything shady here

1007
00:37:51,680 --> 00:37:53,920
hey but when i turn all the rules

1008
00:37:53,920 --> 00:37:55,680
nothing else yeah exactly it's great

1009
00:37:55,680 --> 00:37:57,839
that's great i get no i get no yeah yeah

1010
00:37:57,839 --> 00:37:59,359
all right kelly

1011
00:37:59,359 --> 00:38:01,280
yeah that's fantastic

1012
00:38:01,280 --> 00:38:03,760
okay we've run out of time but thank you

1013
00:38:03,760 --> 00:38:06,720
ever so much for your time sharing your

1014
00:38:06,720 --> 00:38:08,400
wisdom on a very

1015
00:38:08,400 --> 00:38:10,079
well very important topic

1016
00:38:10,079 --> 00:38:12,320
so thank you very much thanks everybody

1017
00:38:12,320 --> 00:38:15,760
uh thank you cheers

