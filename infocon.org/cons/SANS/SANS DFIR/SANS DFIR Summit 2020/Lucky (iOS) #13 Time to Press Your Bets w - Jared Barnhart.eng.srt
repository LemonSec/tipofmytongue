1
00:00:01,040 --> 00:00:07,429
[Music]

2
00:00:12,240 --> 00:00:14,960
um i

3
00:00:12,960 --> 00:00:16,800
actually met jared i think at the

4
00:00:14,960 --> 00:00:18,160
jackalope well no that's when i really

5
00:00:16,800 --> 00:00:20,720
got to know you he was my student at the

6
00:00:18,160 --> 00:00:22,560
d for summit a few years ago

7
00:00:20,720 --> 00:00:24,560
really got to know the real jared at

8
00:00:22,560 --> 00:00:25,119
jackalope so austin kind of takes us

9
00:00:24,560 --> 00:00:26,799
back

10
00:00:25,119 --> 00:00:29,279
i'm really excited for his talk he's a

11
00:00:26,800 --> 00:00:31,920
brilliant mobile researcher

12
00:00:29,279 --> 00:00:33,760
and he's finally spreading the goodness

13
00:00:31,920 --> 00:00:36,880
back into the deeper community

14
00:00:33,760 --> 00:00:38,000
so go ahead jared all right thank you

15
00:00:36,880 --> 00:00:45,840
very much

16
00:00:38,000 --> 00:00:45,840
heather make sure i can drive here

17
00:00:52,640 --> 00:00:57,120
that's great good to go all right thank

18
00:00:54,480 --> 00:00:58,398
you so uh yeah my name is jared barnhart

19
00:00:57,120 --> 00:01:00,239
and i

20
00:00:58,399 --> 00:01:02,480
appreciate the opportunity to be able to

21
00:01:00,239 --> 00:01:04,640
do a talk here at the sands summit

22
00:01:02,480 --> 00:01:05,920
um thank you heather for that you know

23
00:01:04,640 --> 00:01:08,960
the kind words and yeah we

24
00:01:05,920 --> 00:01:11,680
you know meeting heather in austin and

25
00:01:08,960 --> 00:01:13,199
the jackalope all great memories but

26
00:01:11,680 --> 00:01:14,479
just very briefly about myself

27
00:01:13,200 --> 00:01:16,240
i'm a retired police officer from

28
00:01:14,479 --> 00:01:18,720
maryland and now i'm

29
00:01:16,240 --> 00:01:19,679
a forensic engineer for parsons

30
00:01:18,720 --> 00:01:22,240
corporation

31
00:01:19,680 --> 00:01:24,000
completely focused on mobile research so

32
00:01:22,240 --> 00:01:26,000
this talk today is going to be about

33
00:01:24,000 --> 00:01:27,920
some of the artifacts that are revealed

34
00:01:26,000 --> 00:01:31,119
to us in ios 13

35
00:01:27,920 --> 00:01:33,520
and partly and thanks to the

36
00:01:31,119 --> 00:01:35,280
checkmate exploit or vulnerability that

37
00:01:33,520 --> 00:01:37,200
was discovered last year

38
00:01:35,280 --> 00:01:39,119
so this tweet went out last year last

39
00:01:37,200 --> 00:01:40,640
september and it sort of changed the

40
00:01:39,119 --> 00:01:43,439
culture for ios

41
00:01:40,640 --> 00:01:45,520
research jailbreaking forensics all

42
00:01:43,439 --> 00:01:47,199
together

43
00:01:45,520 --> 00:01:49,600
the part that i want to focus on here is

44
00:01:47,200 --> 00:01:51,520
that this exploit affects hundreds of

45
00:01:49,600 --> 00:01:54,320
millions of idevices

46
00:01:51,520 --> 00:01:56,000
so we spent a lot of time looking into

47
00:01:54,320 --> 00:01:58,240
third-party applications and looking

48
00:01:56,000 --> 00:01:59,840
into all sorts of other things about our

49
00:01:58,240 --> 00:02:01,759
devices

50
00:01:59,840 --> 00:02:03,280
but hundreds of millions of devices on

51
00:02:01,759 --> 00:02:06,000
the same operating system essentially

52
00:02:03,280 --> 00:02:09,280
have hundreds of millions of the same

53
00:02:06,000 --> 00:02:10,160
native files the same directories and

54
00:02:09,280 --> 00:02:12,480
the same

55
00:02:10,160 --> 00:02:13,440
databases and things that we should be

56
00:02:12,480 --> 00:02:16,319
excellent at

57
00:02:13,440 --> 00:02:18,000
and if we're not excellent at them um

58
00:02:16,319 --> 00:02:19,119
then i feel like we're sort of missing

59
00:02:18,000 --> 00:02:21,200
the boat

60
00:02:19,120 --> 00:02:22,560
so when this was released it it was

61
00:02:21,200 --> 00:02:25,599
announced sort of right after

62
00:02:22,560 --> 00:02:26,800
uh the ios 13 release not ios 13's fault

63
00:02:25,599 --> 00:02:27,440
at all it's a vulnerability that

64
00:02:26,800 --> 00:02:30,480
affected

65
00:02:27,440 --> 00:02:32,319
devices going way back

66
00:02:30,480 --> 00:02:34,959
it's great for us in that we don't have

67
00:02:32,319 --> 00:02:38,640
to necessarily hyper focus

68
00:02:34,959 --> 00:02:40,480
on ios versioning anymore and

69
00:02:38,640 --> 00:02:41,920
you know check and pray and hope for a

70
00:02:40,480 --> 00:02:43,040
jailbreak so you can continue certain

71
00:02:41,920 --> 00:02:45,760
research

72
00:02:43,040 --> 00:02:47,440
uh and you know constantly shuffling

73
00:02:45,760 --> 00:02:49,679
around your versions and hoping that you

74
00:02:47,440 --> 00:02:52,079
get a jailbreak at the right time

75
00:02:49,680 --> 00:02:54,080
we have almost immediate jailbreak

76
00:02:52,080 --> 00:02:55,519
access and that really gives us

77
00:02:54,080 --> 00:02:58,480
access to the full file system which

78
00:02:55,519 --> 00:03:00,239
gives us access to those native files

79
00:02:58,480 --> 00:03:01,920
this talk is not about checkmate but it

80
00:03:00,239 --> 00:03:05,040
sort of pivots from that

81
00:03:01,920 --> 00:03:05,440
to the access that we have matia did a

82
00:03:05,040 --> 00:03:07,280
talk

83
00:03:05,440 --> 00:03:08,800
did a talk that was recorded that i

84
00:03:07,280 --> 00:03:11,519
mentioned here

85
00:03:08,800 --> 00:03:13,760
but this is really great for us so now

86
00:03:11,519 --> 00:03:16,159
that we have the access

87
00:03:13,760 --> 00:03:18,079
and lots of people have the ability i'm

88
00:03:16,159 --> 00:03:19,519
encouraging everyone to go all in on

89
00:03:18,080 --> 00:03:22,640
native artifacts

90
00:03:19,519 --> 00:03:24,080
um if there's something you're

91
00:03:22,640 --> 00:03:24,480
interested in if you look at your device

92
00:03:24,080 --> 00:03:26,560
and you

93
00:03:24,480 --> 00:03:28,159
and you ever wonder how is apple doing

94
00:03:26,560 --> 00:03:30,720
that how does it know that

95
00:03:28,159 --> 00:03:32,159
i really am about to drive to that place

96
00:03:30,720 --> 00:03:34,319
it's in a file it's

97
00:03:32,159 --> 00:03:36,239
it's in there somewhere so i encourage

98
00:03:34,319 --> 00:03:37,518
you to figure out where to figure out

99
00:03:36,239 --> 00:03:39,920
why

100
00:03:37,519 --> 00:03:41,599
okay and through this quote in there

101
00:03:39,920 --> 00:03:43,839
just try to be comical but

102
00:03:41,599 --> 00:03:45,040
i have been doing research for a little

103
00:03:43,840 --> 00:03:46,720
while now and

104
00:03:45,040 --> 00:03:48,319
what's difficult is to put yourself out

105
00:03:46,720 --> 00:03:50,560
there and i figured there's no

106
00:03:48,319 --> 00:03:51,920
no better place to start than a sans d

107
00:03:50,560 --> 00:03:53,360
for summit with

108
00:03:51,920 --> 00:03:55,518
tens of thousands of people signed up

109
00:03:53,360 --> 00:03:57,200
seemed like a good good starting point

110
00:03:55,519 --> 00:03:58,840
so here i am sort of putting myself out

111
00:03:57,200 --> 00:04:00,879
there and sharing some research with the

112
00:03:58,840 --> 00:04:04,799
community

113
00:04:00,879 --> 00:04:04,798
what this does for us is it allows

114
00:04:06,319 --> 00:04:11,679
full access and it's pretty cheap so

115
00:04:09,840 --> 00:04:13,120
for the cost of an iphone 10 which is

116
00:04:11,680 --> 00:04:14,799
just a couple hundred dollars

117
00:04:13,120 --> 00:04:16,320
and assuming that you have some sort of

118
00:04:14,799 --> 00:04:19,440
machine that can i can

119
00:04:16,320 --> 00:04:21,199
interact with the device you can do

120
00:04:19,440 --> 00:04:23,040
your own testing and verification please

121
00:04:21,199 --> 00:04:24,880
don't take anything that i give you here

122
00:04:23,040 --> 00:04:26,320
today and say it's absolutely correct

123
00:04:24,880 --> 00:04:27,120
there's no doubt about it because jared

124
00:04:26,320 --> 00:04:29,040
said it

125
00:04:27,120 --> 00:04:30,240
test it verify and i'm going to show you

126
00:04:29,040 --> 00:04:32,800
some really interesting things and then

127
00:04:30,240 --> 00:04:36,479
say those caveats to that being correct

128
00:04:32,800 --> 00:04:37,040
all right so let's let's get right into

129
00:04:36,479 --> 00:04:39,039
it

130
00:04:37,040 --> 00:04:40,639
um there's sort of four artifacts that

131
00:04:39,040 --> 00:04:42,320
i'm going to try to to get through here

132
00:04:40,639 --> 00:04:45,120
today um

133
00:04:42,320 --> 00:04:46,000
my list was like eight and four is even

134
00:04:45,120 --> 00:04:48,080
packed

135
00:04:46,000 --> 00:04:50,080
we could talk about the photos for a

136
00:04:48,080 --> 00:04:51,280
full few hours if we needed to

137
00:04:50,080 --> 00:04:53,359
um but the first one we're gonna talk

138
00:04:51,280 --> 00:04:55,840
about is uh the photos uh

139
00:04:53,360 --> 00:04:57,440
on your ios device but specific to the

140
00:04:55,840 --> 00:04:58,960
facial recognition feature so i'm

141
00:04:57,440 --> 00:05:00,560
going to sort of build from taking a

142
00:04:58,960 --> 00:05:02,400
photo and walk you through the point

143
00:05:00,560 --> 00:05:03,520
where it says that photo has this person

144
00:05:02,400 --> 00:05:05,120
in it

145
00:05:03,520 --> 00:05:06,719
from there we'll talk about recoverable

146
00:05:05,120 --> 00:05:08,479
deleted images on ios

147
00:05:06,720 --> 00:05:09,680
and this is just sort of an interesting

148
00:05:08,479 --> 00:05:10,880
artifact that i wanted to point out

149
00:05:09,680 --> 00:05:12,880
because i didn't know about it until

150
00:05:10,880 --> 00:05:14,320
very recently

151
00:05:12,880 --> 00:05:17,120
the third one is the personalization

152
00:05:14,320 --> 00:05:20,639
portrait which

153
00:05:17,120 --> 00:05:22,240
it it's a beast and it's weird and it's

154
00:05:20,639 --> 00:05:22,960
constantly changing it's extremely

155
00:05:22,240 --> 00:05:24,880
challenging

156
00:05:22,960 --> 00:05:26,000
i spent a full day just writing queries

157
00:05:24,880 --> 00:05:28,719
that failed on that

158
00:05:26,000 --> 00:05:30,160
thing because it's just difficult and

159
00:05:28,720 --> 00:05:32,639
then the last one i'm going to do is

160
00:05:30,160 --> 00:05:33,440
is a file called three bars which allows

161
00:05:32,639 --> 00:05:36,479
us to do some

162
00:05:33,440 --> 00:05:37,759
wi-fi location tracking

163
00:05:36,479 --> 00:05:39,199
so let's dive right into the photos

164
00:05:37,759 --> 00:05:39,680
analysis so i'm going to sort of build

165
00:05:39,199 --> 00:05:43,199
from the

166
00:05:39,680 --> 00:05:45,039
point where you take one photo and then

167
00:05:43,199 --> 00:05:46,320
show some of the processes and analysis

168
00:05:45,039 --> 00:05:48,639
that happen in the background

169
00:05:46,320 --> 00:05:50,840
and walk you through uh to where you're

170
00:05:48,639 --> 00:05:52,639
seeing it in your nice gallery on your

171
00:05:50,840 --> 00:05:54,400
device um so

172
00:05:52,639 --> 00:05:55,919
when you open if if you're an iphone

173
00:05:54,400 --> 00:05:56,799
user you open that photos application

174
00:05:55,919 --> 00:05:59,039
there's a lot there

175
00:05:56,800 --> 00:06:00,720
it's not just a basic repository of

176
00:05:59,039 --> 00:06:02,560
photos and videos anymore

177
00:06:00,720 --> 00:06:04,720
it's intelligent there's obviously

178
00:06:02,560 --> 00:06:06,960
analysis that's happening

179
00:06:04,720 --> 00:06:08,639
it's making smart categories uh it's

180
00:06:06,960 --> 00:06:12,080
building memories for you

181
00:06:08,639 --> 00:06:12,639
it is telling you a certain person is in

182
00:06:12,080 --> 00:06:13,919
a photo

183
00:06:12,639 --> 00:06:16,000
and of course the location data is

184
00:06:13,919 --> 00:06:18,080
something that we always cling to um

185
00:06:16,000 --> 00:06:20,080
you're able to keyword search so you

186
00:06:18,080 --> 00:06:21,599
type dog and somehow it produces photos

187
00:06:20,080 --> 00:06:23,758
that have dogs in it

188
00:06:21,600 --> 00:06:24,800
right so i'm gonna break apart little

189
00:06:23,759 --> 00:06:26,880
pieces of that

190
00:06:24,800 --> 00:06:30,720
and hopefully make a little bit of sense

191
00:06:26,880 --> 00:06:33,680
or give you something to do more work on

192
00:06:30,720 --> 00:06:35,440
so when you take a photo right this is

193
00:06:33,680 --> 00:06:37,199
just me pressing the button and the file

194
00:06:35,440 --> 00:06:37,520
system that i was monitoring at the time

195
00:06:37,199 --> 00:06:40,639
just

196
00:06:37,520 --> 00:06:41,039
runs with changes and then i close the

197
00:06:40,639 --> 00:06:43,680
app

198
00:06:41,039 --> 00:06:45,520
and it runs with changes and depending

199
00:06:43,680 --> 00:06:47,120
on if you have cloud photo

200
00:06:45,520 --> 00:06:48,960
library turned on and some of those

201
00:06:47,120 --> 00:06:50,479
other things will depend on exactly what

202
00:06:48,960 --> 00:06:51,919
file system changes are happening

203
00:06:50,479 --> 00:06:54,880
but at the end of the day you take a

204
00:06:51,919 --> 00:06:57,680
photo and it writes to a directory

205
00:06:54,880 --> 00:06:58,880
okay very very simple all right you can

206
00:06:57,680 --> 00:06:59,840
change some settings and make it a

207
00:06:58,880 --> 00:07:00,319
little bit different but the end of the

208
00:06:59,840 --> 00:07:03,440
day

209
00:07:00,319 --> 00:07:05,520
you wrote a file right easy so let's get

210
00:07:03,440 --> 00:07:08,880
into the good stuff

211
00:07:05,520 --> 00:07:10,799
so when i go into my photos and i search

212
00:07:08,880 --> 00:07:12,319
like in the top left of the screen there

213
00:07:10,800 --> 00:07:14,560
you see i just typed the letter g

214
00:07:12,319 --> 00:07:16,160
and immediately it populates green bay

215
00:07:14,560 --> 00:07:19,199
another location

216
00:07:16,160 --> 00:07:21,599
uh in the fir the next one down you see

217
00:07:19,199 --> 00:07:23,039
garment grown up grass oh yeah that

218
00:07:21,599 --> 00:07:24,479
picture is of a dog and the dog is

219
00:07:23,039 --> 00:07:27,840
laying in a bunch of grass

220
00:07:24,479 --> 00:07:29,680
so how's that happening moving over i

221
00:07:27,840 --> 00:07:31,679
searched j and i did some other things

222
00:07:29,680 --> 00:07:33,440
and then on the far right i did sand

223
00:07:31,680 --> 00:07:34,960
and it picked up some photos that are

224
00:07:33,440 --> 00:07:36,000
sourced back by the location of san

225
00:07:34,960 --> 00:07:39,120
francisco

226
00:07:36,000 --> 00:07:41,440
but then it also found santa claus so

227
00:07:39,120 --> 00:07:43,360
how does it know it's santa claus right

228
00:07:41,440 --> 00:07:46,160
like it's really interesting a lot of

229
00:07:43,360 --> 00:07:47,680
analysis and a lot of potential here

230
00:07:46,160 --> 00:07:49,919
so the first piece that i want to talk

231
00:07:47,680 --> 00:07:54,720
about is the media analysis

232
00:07:49,919 --> 00:07:54,719
db sqlite database file the

233
00:07:54,800 --> 00:07:58,240
this database is essentially grading and

234
00:07:57,599 --> 00:08:00,479
scoring

235
00:07:58,240 --> 00:08:02,000
and producing results for all the photos

236
00:08:00,479 --> 00:08:04,639
that are in your library

237
00:08:02,000 --> 00:08:05,440
so once this analysis happens it will

238
00:08:04,639 --> 00:08:06,879
determine

239
00:08:05,440 --> 00:08:08,639
if there's a likelihood that there's a

240
00:08:06,879 --> 00:08:10,319
human in it if there's a likelihood that

241
00:08:08,639 --> 00:08:12,240
there's a face in the photo

242
00:08:10,319 --> 00:08:13,440
potentially if there's a pet if it's a

243
00:08:12,240 --> 00:08:16,560
high quality photo

244
00:08:13,440 --> 00:08:18,000
or if it's blurry things like that when

245
00:08:16,560 --> 00:08:20,960
we look at the results

246
00:08:18,000 --> 00:08:22,560
table within this database on the left

247
00:08:20,960 --> 00:08:25,198
side you see asset id

248
00:08:22,560 --> 00:08:25,759
and you see the number three that number

249
00:08:25,199 --> 00:08:29,120
three

250
00:08:25,759 --> 00:08:32,399
is one file so for that one file

251
00:08:29,120 --> 00:08:35,039
there were results of type one type two

252
00:08:32,399 --> 00:08:35,760
type four type five six seven nine ten

253
00:08:35,039 --> 00:08:37,760
okay

254
00:08:35,760 --> 00:08:39,439
for each one of those results type

255
00:08:37,760 --> 00:08:43,599
there's a blob

256
00:08:39,440 --> 00:08:46,320
the blob is a binary p list so when we

257
00:08:43,599 --> 00:08:47,200
take those results type numbers and look

258
00:08:46,320 --> 00:08:50,480
at the blobs

259
00:08:47,200 --> 00:08:50,800
we can sort of figure out what that file

260
00:08:50,480 --> 00:08:52,640
that

261
00:08:50,800 --> 00:08:54,160
is being analyzed potentially contains

262
00:08:52,640 --> 00:08:56,560
just from here

263
00:08:54,160 --> 00:08:58,000
so i took the blob and i saved it out as

264
00:08:56,560 --> 00:09:00,479
a plist

265
00:08:58,000 --> 00:09:02,080
printed the plist as a text file and you

266
00:09:00,480 --> 00:09:02,640
can see at the bottom with the red star

267
00:09:02,080 --> 00:09:05,279
it says

268
00:09:02,640 --> 00:09:07,680
attributes face bounds face pose face

269
00:09:05,279 --> 00:09:09,600
position face quality

270
00:09:07,680 --> 00:09:11,040
so whatever file that was that was

271
00:09:09,600 --> 00:09:12,720
number three

272
00:09:11,040 --> 00:09:15,439
probably has a face in it because this

273
00:09:12,720 --> 00:09:19,120
result is there

274
00:09:15,440 --> 00:09:20,720
so then i repeated that process for all

275
00:09:19,120 --> 00:09:22,480
the plists

276
00:09:20,720 --> 00:09:23,680
that i have on my device uh some of

277
00:09:22,480 --> 00:09:24,720
those i didn't have data for i'm not

278
00:09:23,680 --> 00:09:26,239
sure

279
00:09:24,720 --> 00:09:28,240
what that possibly is but i didn't have

280
00:09:26,240 --> 00:09:30,000
data for some and i sort of broke out a

281
00:09:28,240 --> 00:09:31,279
generic description of what a lot of

282
00:09:30,000 --> 00:09:32,880
those results types are

283
00:09:31,279 --> 00:09:35,760
and then build it into a really big ugly

284
00:09:32,880 --> 00:09:38,399
query if you're awesome at sql queries

285
00:09:35,760 --> 00:09:39,839
feel free to fix this but it works so

286
00:09:38,399 --> 00:09:41,600
there it is

287
00:09:39,839 --> 00:09:43,839
and it just simply breaks apart the

288
00:09:41,600 --> 00:09:45,839
different results types

289
00:09:43,839 --> 00:09:47,839
when you look at the results types you

290
00:09:45,839 --> 00:09:50,480
can then sort it to a certain type

291
00:09:47,839 --> 00:09:52,000
so just show me the the assets that have

292
00:09:50,480 --> 00:09:54,399
been analyzed that have

293
00:09:52,000 --> 00:09:56,720
attributes of human bounds or confidence

294
00:09:54,399 --> 00:09:59,200
so that probably have a human in them

295
00:09:56,720 --> 00:10:00,160
the local identifier that you see on the

296
00:09:59,200 --> 00:10:01,920
left side

297
00:10:00,160 --> 00:10:03,680
is going to match up to the unique

298
00:10:01,920 --> 00:10:06,479
identifier listed for

299
00:10:03,680 --> 00:10:08,000
the photos in the photos.sqlite database

300
00:10:06,480 --> 00:10:09,680
so this database

301
00:10:08,000 --> 00:10:10,959
is doing its own work and doing its own

302
00:10:09,680 --> 00:10:14,959
analysis but it's pushing out

303
00:10:10,959 --> 00:10:14,959
information to the photos.sqlite

304
00:10:15,040 --> 00:10:20,319
so how often is this happening when i

305
00:10:18,399 --> 00:10:21,600
took a look at this table it had

306
00:10:20,320 --> 00:10:25,040
happened 2200

307
00:10:21,600 --> 00:10:28,720
or it had looked at 2200 files that day

308
00:10:25,040 --> 00:10:30,480
so it's a constant churn of your data to

309
00:10:28,720 --> 00:10:31,680
i guess come up with what's best you

310
00:10:30,480 --> 00:10:33,279
know how many times do you take five

311
00:10:31,680 --> 00:10:34,880
photos at one time and one of them is

312
00:10:33,279 --> 00:10:36,640
truly the best

313
00:10:34,880 --> 00:10:38,000
circle around a year later and they're

314
00:10:36,640 --> 00:10:40,319
showing you the memories from that day

315
00:10:38,000 --> 00:10:43,200
they tend to show you the good one right

316
00:10:40,320 --> 00:10:45,519
so i think that's what's happening here

317
00:10:43,200 --> 00:10:47,160
but how does the keyword search work

318
00:10:45,519 --> 00:10:48,800
so there's a different file called

319
00:10:47,160 --> 00:10:52,000
psi.sqlite

320
00:10:48,800 --> 00:10:54,319
and what this file is doing is it is

321
00:10:52,000 --> 00:10:55,519
essentially creating strings that equal

322
00:10:54,320 --> 00:10:58,880
objects that are found

323
00:10:55,519 --> 00:11:00,480
in your photos this is not user

324
00:10:58,880 --> 00:11:02,240
generated in that the user isn't

325
00:11:00,480 --> 00:11:04,800
necessarily typing

326
00:11:02,240 --> 00:11:05,760
and creating strings but instead when i

327
00:11:04,800 --> 00:11:10,000
take a photo

328
00:11:05,760 --> 00:11:12,319
of a vehicle it associates that photo

329
00:11:10,000 --> 00:11:14,160
with having a vehicle in it so it finds

330
00:11:12,320 --> 00:11:16,399
the object so when you search dog

331
00:11:14,160 --> 00:11:17,839
it finds the photos with dogs or

332
00:11:16,399 --> 00:11:20,240
potentially it misses and

333
00:11:17,839 --> 00:11:22,800
you don't get all the returns for dogs

334
00:11:20,240 --> 00:11:24,240
but when we dig into the file

335
00:11:22,800 --> 00:11:26,160
looking specifically at the word

336
00:11:24,240 --> 00:11:28,399
embedding table it has a bunch of blob

337
00:11:26,160 --> 00:11:30,480
data words and extended words

338
00:11:28,399 --> 00:11:31,440
just simply printing that out to a csv

339
00:11:30,480 --> 00:11:34,240
we can see

340
00:11:31,440 --> 00:11:36,800
um that they're sort of building out

341
00:11:34,240 --> 00:11:38,160
subcategories that point back to a major

342
00:11:36,800 --> 00:11:39,439
category so like an anniversary is a

343
00:11:38,160 --> 00:11:42,000
type of celebration and probably like a

344
00:11:39,440 --> 00:11:43,760
birthday would be a type of celebration

345
00:11:42,000 --> 00:11:45,120
so that when you search for german

346
00:11:43,760 --> 00:11:46,959
shepherd it searches for dog

347
00:11:45,120 --> 00:11:48,480
type of a thing all right but these

348
00:11:46,959 --> 00:11:50,719
values are not just

349
00:11:48,480 --> 00:11:52,320
pre-populated and filled up when you buy

350
00:11:50,720 --> 00:11:54,800
a device

351
00:11:52,320 --> 00:11:56,000
it adds new values as you use your

352
00:11:54,800 --> 00:11:57,199
device and as you take photos

353
00:11:56,000 --> 00:11:59,120
that have different types of objects

354
00:11:57,200 --> 00:12:01,519
that it knows how to recognize so

355
00:11:59,120 --> 00:12:03,120
it is indicative at least in part of

356
00:12:01,519 --> 00:12:04,720
user activity

357
00:12:03,120 --> 00:12:06,639
but you're relying on apple's analysis

358
00:12:04,720 --> 00:12:10,639
of photos and telling you what objects

359
00:12:06,639 --> 00:12:12,800
are in them so just be careful

360
00:12:10,639 --> 00:12:13,920
when i searched for g in that screenshot

361
00:12:12,800 --> 00:12:15,359
before it

362
00:12:13,920 --> 00:12:16,639
populated green bay and that isn't super

363
00:12:15,360 --> 00:12:17,680
exciting because i have an album that i

364
00:12:16,639 --> 00:12:19,440
named green bay

365
00:12:17,680 --> 00:12:21,359
but when i tried to find green bay it

366
00:12:19,440 --> 00:12:22,800
got really interesting

367
00:12:21,360 --> 00:12:25,279
because i took my device to green bay

368
00:12:22,800 --> 00:12:27,199
wisconsin one time and i went to

369
00:12:25,279 --> 00:12:30,160
an nfl football game where the green bay

370
00:12:27,200 --> 00:12:32,079
packers played the miami dolphins

371
00:12:30,160 --> 00:12:33,839
when i found green bay in the group's

372
00:12:32,079 --> 00:12:34,638
table here on the right side you can see

373
00:12:33,839 --> 00:12:37,200
green

374
00:12:34,639 --> 00:12:38,320
green bay packers versus miami dolphins

375
00:12:37,200 --> 00:12:39,920
now

376
00:12:38,320 --> 00:12:42,000
sure apple can figure out that my device

377
00:12:39,920 --> 00:12:44,000
is at an nfl stadium and somehow map in

378
00:12:42,000 --> 00:12:45,760
you know what game was played that day

379
00:12:44,000 --> 00:12:47,760
but i also took some photos that had

380
00:12:45,760 --> 00:12:50,000
in the background people wearing certain

381
00:12:47,760 --> 00:12:51,200
types of jerseys for both teams

382
00:12:50,000 --> 00:12:52,560
i don't know what's happening

383
00:12:51,200 --> 00:12:54,480
specifically but it's very interesting

384
00:12:52,560 --> 00:12:54,880
to me that they helped me out and added

385
00:12:54,480 --> 00:12:58,639
in here

386
00:12:54,880 --> 00:12:59,920
green bay packers versus miami dolphins

387
00:12:58,639 --> 00:13:02,240
and then it's going to get creepy so

388
00:12:59,920 --> 00:13:06,000
just stand by okay

389
00:13:02,240 --> 00:13:07,360
so photos.sqlite this is an old topic uh

390
00:13:06,000 --> 00:13:09,200
people talk about it all the time you

391
00:13:07,360 --> 00:13:10,399
could have a whole day of talk on this

392
00:13:09,200 --> 00:13:12,800
one this one file

393
00:13:10,399 --> 00:13:14,560
it's a sqlite database and on mine it's

394
00:13:12,800 --> 00:13:17,920
over 300 megs in size

395
00:13:14,560 --> 00:13:19,839
um it has potential to tell you when a

396
00:13:17,920 --> 00:13:21,199
stranger was creeping on your baby so

397
00:13:19,839 --> 00:13:22,720
just stick by on that

398
00:13:21,200 --> 00:13:24,800
uh here's just a screenshot showing you

399
00:13:22,720 --> 00:13:26,399
the overall look of the database

400
00:13:24,800 --> 00:13:28,160
but it's huge tons of tables tons of

401
00:13:26,399 --> 00:13:30,639
columns you can get lost in this

402
00:13:28,160 --> 00:13:33,040
this thing and spend weeks it's great

403
00:13:30,639 --> 00:13:36,240
but just be careful don't get lost

404
00:13:33,040 --> 00:13:38,480
we're going to focus on the faces so

405
00:13:36,240 --> 00:13:40,160
uh the z detected face table within the

406
00:13:38,480 --> 00:13:42,320
the photos of sql light has

407
00:13:40,160 --> 00:13:44,000
certain values that indicate age hair

408
00:13:42,320 --> 00:13:46,880
color baldness things like that

409
00:13:44,000 --> 00:13:48,160
okay measurements of the face uh and a

410
00:13:46,880 --> 00:13:51,439
person identifier

411
00:13:48,160 --> 00:13:51,680
so in here i was able to take pieces of

412
00:13:51,440 --> 00:13:53,199
it

413
00:13:51,680 --> 00:13:55,680
i didn't tackle hair color because it

414
00:13:53,199 --> 00:13:55,680
seemed like

415
00:13:55,760 --> 00:13:58,959
it would be extremely difficult to come

416
00:13:57,440 --> 00:14:00,880
up with what they were doing with that

417
00:13:58,959 --> 00:14:02,959
but i tried to do the most of the rest

418
00:14:00,880 --> 00:14:04,399
of them age is a little bit weird

419
00:14:02,959 --> 00:14:05,760
sometimes when i have really short hair

420
00:14:04,399 --> 00:14:06,480
i'm not quarantine hair it thinks i'm a

421
00:14:05,760 --> 00:14:09,040
kid

422
00:14:06,480 --> 00:14:12,320
other times it rates me as an adult but

423
00:14:09,040 --> 00:14:14,319
it's really neat what it does with

424
00:14:12,320 --> 00:14:15,680
age gender eyeglasses and things like

425
00:14:14,320 --> 00:14:18,639
that

426
00:14:15,680 --> 00:14:19,279
so the person association that's

427
00:14:18,639 --> 00:14:21,839
happening

428
00:14:19,279 --> 00:14:23,760
from those photos on the last one in the

429
00:14:21,839 --> 00:14:25,519
detected face it has a value that says

430
00:14:23,760 --> 00:14:28,240
potentially there's a person here when

431
00:14:25,519 --> 00:14:30,639
you go look at the z person table

432
00:14:28,240 --> 00:14:32,399
it's essentially tracking how many times

433
00:14:30,639 --> 00:14:35,040
that face has been seen

434
00:14:32,399 --> 00:14:36,720
so in mine my immediate family close

435
00:14:35,040 --> 00:14:38,079
friends it has names associated with

436
00:14:36,720 --> 00:14:40,959
them

437
00:14:38,079 --> 00:14:41,760
but other people so when i take a photo

438
00:14:40,959 --> 00:14:43,920
that

439
00:14:41,760 --> 00:14:45,120
is of one specifically was my brother

440
00:14:43,920 --> 00:14:47,839
and my holding my kid

441
00:14:45,120 --> 00:14:49,440
but right behind them was my uncle who

442
00:14:47,839 --> 00:14:51,600
was bald

443
00:14:49,440 --> 00:14:53,680
it populated in the analysis of that

444
00:14:51,600 --> 00:14:55,120
photo that there was a bald male that it

445
00:14:53,680 --> 00:14:57,199
doesn't know there was no name and he

446
00:14:55,120 --> 00:14:59,519
got a unique identifier

447
00:14:57,199 --> 00:15:00,800
when it has the same person that it

448
00:14:59,519 --> 00:15:02,480
thinks but it doesn't know who it is

449
00:15:00,800 --> 00:15:04,560
you'll see a value continue to count up

450
00:15:02,480 --> 00:15:06,399
saying we have this face 30 couple times

451
00:15:04,560 --> 00:15:08,399
but we don't know who it is yet

452
00:15:06,399 --> 00:15:09,839
at some point it has a way to convert

453
00:15:08,399 --> 00:15:11,600
itself to a known person

454
00:15:09,839 --> 00:15:15,199
and points all of those unique

455
00:15:11,600 --> 00:15:16,880
identifiers to one with a name

456
00:15:15,199 --> 00:15:18,880
if it is a known person there is

457
00:15:16,880 --> 00:15:20,720
potential to get contact information

458
00:15:18,880 --> 00:15:22,560
from the binary plist blob in the

459
00:15:20,720 --> 00:15:24,399
contact matching dictionary column that

460
00:15:22,560 --> 00:15:27,040
you see here on your screen

461
00:15:24,399 --> 00:15:28,160
so in this one i was able to find my

462
00:15:27,040 --> 00:15:30,000
mother-in-law's

463
00:15:28,160 --> 00:15:31,360
first name last name and phone number

464
00:15:30,000 --> 00:15:33,199
being sourced from the contact

465
00:15:31,360 --> 00:15:35,360
associated with the photo that was taken

466
00:15:33,199 --> 00:15:38,079
of my mother-in-law

467
00:15:35,360 --> 00:15:38,720
so this is a query again focused on

468
00:15:38,079 --> 00:15:41,040
faces

469
00:15:38,720 --> 00:15:42,560
so the at the bottom right of your

470
00:15:41,040 --> 00:15:44,639
screen it says where

471
00:15:42,560 --> 00:15:45,599
z face area points is greater than zero

472
00:15:44,639 --> 00:15:49,199
what i found is that

473
00:15:45,600 --> 00:15:50,880
face area points having a positive value

474
00:15:49,199 --> 00:15:53,680
indicated that faces have been found in

475
00:15:50,880 --> 00:15:54,320
the photo when you see the baby toddler

476
00:15:53,680 --> 00:15:57,120
part

477
00:15:54,320 --> 00:15:58,720
um on the left side or child young adult

478
00:15:57,120 --> 00:15:59,199
be careful with that it's not exactly

479
00:15:58,720 --> 00:16:02,000
right

480
00:15:59,199 --> 00:16:03,199
um same with facial hair my kids wearing

481
00:16:02,000 --> 00:16:04,880
a hat that has

482
00:16:03,199 --> 00:16:06,319
sort of like a furry flaps down the

483
00:16:04,880 --> 00:16:08,800
cheeks can make facial hair

484
00:16:06,320 --> 00:16:10,639
i've seen shadows make facial hair the

485
00:16:08,800 --> 00:16:13,758
gender can be wrong

486
00:16:10,639 --> 00:16:16,079
but when it works and it works a lot

487
00:16:13,759 --> 00:16:16,800
and is really good at finding faces it's

488
00:16:16,079 --> 00:16:18,399
pretty neat

489
00:16:16,800 --> 00:16:20,399
so in this photo i chopped off a lot of

490
00:16:18,399 --> 00:16:22,000
the results but i focused on just a few

491
00:16:20,399 --> 00:16:24,480
this is a photo of me and my two

492
00:16:22,000 --> 00:16:26,720
daughters you can see the file name

493
00:16:24,480 --> 00:16:28,720
in the list above is all the same file

494
00:16:26,720 --> 00:16:30,240
so in this file they found three people

495
00:16:28,720 --> 00:16:32,959
there's three people are an adult and

496
00:16:30,240 --> 00:16:36,240
two babies or toddlers as i estimated it

497
00:16:32,959 --> 00:16:38,319
gender male and two females the name me

498
00:16:36,240 --> 00:16:39,759
and it had my daughter's names and then

499
00:16:38,320 --> 00:16:41,920
face count

500
00:16:39,759 --> 00:16:43,759
it says it sees me 387 times and i know

501
00:16:41,920 --> 00:16:45,599
that there's a lot of photos of me

502
00:16:43,759 --> 00:16:47,839
that it hasn't been able to use to

503
00:16:45,600 --> 00:16:49,120
identify as being me yet

504
00:16:47,839 --> 00:16:51,040
and then you can tell which one is my

505
00:16:49,120 --> 00:16:52,720
first kid because it's the one with 1700

506
00:16:51,040 --> 00:16:54,560
face showings and the second kid well

507
00:16:52,720 --> 00:16:56,720
you know how second kids go

508
00:16:54,560 --> 00:16:58,800
uh glasses type i'm wearing sunglasses

509
00:16:56,720 --> 00:17:01,279
it will it will

510
00:16:58,800 --> 00:17:03,439
list out no glasses eyeglasses or

511
00:17:01,279 --> 00:17:05,520
sunglasses

512
00:17:03,440 --> 00:17:06,720
and then facial hair again can be tricky

513
00:17:05,520 --> 00:17:08,000
but then there was this one where it's

514
00:17:06,720 --> 00:17:09,439
like hey there's a stranger looking at

515
00:17:08,000 --> 00:17:12,640
my baby so i took the picture

516
00:17:09,439 --> 00:17:14,319
of the of my kid and when i ran this i

517
00:17:12,640 --> 00:17:16,319
saw that there was an adult showing and

518
00:17:14,319 --> 00:17:17,839
it was susie colbert the espn analyst in

519
00:17:16,319 --> 00:17:19,839
the background

520
00:17:17,839 --> 00:17:21,119
of the photo so just really interesting

521
00:17:19,839 --> 00:17:21,678
that it's able to say hey we see a

522
00:17:21,119 --> 00:17:24,319
female

523
00:17:21,679 --> 00:17:25,520
in a baby and it picks out that sort of

524
00:17:24,319 --> 00:17:28,480
blurry not great

525
00:17:25,520 --> 00:17:29,600
woman that's standing behind the baby so

526
00:17:28,480 --> 00:17:32,640
let's get into recover

527
00:17:29,600 --> 00:17:33,760
recoverable deleted images and i'll

528
00:17:32,640 --> 00:17:35,600
start by saying

529
00:17:33,760 --> 00:17:37,039
an allocated space on ios devices is

530
00:17:35,600 --> 00:17:38,559
encrypted it's not something that we can

531
00:17:37,039 --> 00:17:42,320
recover

532
00:17:38,559 --> 00:17:45,120
okay so this is the caveat to that

533
00:17:42,320 --> 00:17:47,280
typically when we deal with recovering

534
00:17:45,120 --> 00:17:49,439
deleted photos on mobile devices

535
00:17:47,280 --> 00:17:51,600
we are carving them out of unallocated

536
00:17:49,440 --> 00:17:53,600
space now just very basic and quickly on

537
00:17:51,600 --> 00:17:54,879
an allocated space if you take a photo

538
00:17:53,600 --> 00:17:55,760
and it writes into your file system it's

539
00:17:54,880 --> 00:17:57,120
allocated

540
00:17:55,760 --> 00:17:58,960
the file system can track it it can

541
00:17:57,120 --> 00:18:00,639
recall it whenever you need to see it

542
00:17:58,960 --> 00:18:02,240
when you delete it and you really delete

543
00:18:00,640 --> 00:18:03,760
it not send it to the recently deleted

544
00:18:02,240 --> 00:18:06,960
folder

545
00:18:03,760 --> 00:18:08,720
the data where that file existed

546
00:18:06,960 --> 00:18:10,559
is potentially still there it's just no

547
00:18:08,720 --> 00:18:11,520
longer allocated or tracked by the file

548
00:18:10,559 --> 00:18:13,039
system

549
00:18:11,520 --> 00:18:15,120
so if in that moment you were able to

550
00:18:13,039 --> 00:18:16,720
grab a physical extraction of the entire

551
00:18:15,120 --> 00:18:18,559
flash memory

552
00:18:16,720 --> 00:18:20,080
you would get that unallocated space and

553
00:18:18,559 --> 00:18:21,600
then we could potentially carve out the

554
00:18:20,080 --> 00:18:22,799
whole file or pieces of your picture

555
00:18:21,600 --> 00:18:25,199
file

556
00:18:22,799 --> 00:18:27,120
on the ios device that area outside of

557
00:18:25,200 --> 00:18:29,919
the allocated space is encrypted

558
00:18:27,120 --> 00:18:31,918
so we can't recover uh deleted photos

559
00:18:29,919 --> 00:18:35,840
except for this

560
00:18:31,919 --> 00:18:38,960
so um this was brought to my attention

561
00:18:35,840 --> 00:18:41,280
by a old co-worker of mine um

562
00:18:38,960 --> 00:18:42,000
sergeant ryan sox shout out to him it's

563
00:18:41,280 --> 00:18:43,600
not necessarily

564
00:18:42,000 --> 00:18:45,039
new when i mentioned this to heather she

565
00:18:43,600 --> 00:18:46,000
seemed to know about it but i hadn't

566
00:18:45,039 --> 00:18:47,520
heard of it and i think it's really

567
00:18:46,000 --> 00:18:49,120
interesting so i threw it in here

568
00:18:47,520 --> 00:18:50,480
so within your messaging application on

569
00:18:49,120 --> 00:18:52,000
ios at the top you're going to have some

570
00:18:50,480 --> 00:18:52,640
sort of a visual indicator of who you're

571
00:18:52,000 --> 00:18:54,799
talking to

572
00:18:52,640 --> 00:18:56,640
the contact name photo whatever it is if

573
00:18:54,799 --> 00:18:58,480
you press that and there's a little drop

574
00:18:56,640 --> 00:19:00,480
down there's a small eye in a circle

575
00:18:58,480 --> 00:19:02,880
that opens information about

576
00:19:00,480 --> 00:19:05,200
uh that contact and the thread of

577
00:19:02,880 --> 00:19:07,440
messaging that you have going with them

578
00:19:05,200 --> 00:19:08,480
when you do that if you have media files

579
00:19:07,440 --> 00:19:11,440
that are in that thread

580
00:19:08,480 --> 00:19:12,080
it shows them to you if it shows them to

581
00:19:11,440 --> 00:19:13,840
you

582
00:19:12,080 --> 00:19:15,360
it is rewriting those files to a

583
00:19:13,840 --> 00:19:16,959
secondary location

584
00:19:15,360 --> 00:19:19,439
and what we found is that when you

585
00:19:16,960 --> 00:19:21,360
delete the file from the thread

586
00:19:19,440 --> 00:19:22,880
it does not touch the secondary location

587
00:19:21,360 --> 00:19:26,000
so they persist through

588
00:19:22,880 --> 00:19:28,559
the deletion so i'll walk you through it

589
00:19:26,000 --> 00:19:30,320
brand new device set up for testing and

590
00:19:28,559 --> 00:19:32,480
i started a message thread essentially

591
00:19:30,320 --> 00:19:35,120
with myself on a second test device

592
00:19:32,480 --> 00:19:36,160
uh very basic uh the path just to go

593
00:19:35,120 --> 00:19:39,199
back here

594
00:19:36,160 --> 00:19:41,919
is our uh mobile sms previews uh

595
00:19:39,200 --> 00:19:43,280
search directory so when i go look for

596
00:19:41,919 --> 00:19:44,720
it it's just not there it doesn't exist

597
00:19:43,280 --> 00:19:47,360
brand new device i've never touched the

598
00:19:44,720 --> 00:19:50,480
eye this directory isn't there yet

599
00:19:47,360 --> 00:19:52,559
so then i sent a photo from one

600
00:19:50,480 --> 00:19:54,160
device to the other upon doing that i

601
00:19:52,559 --> 00:19:55,360
was monitoring the directory and it

602
00:19:54,160 --> 00:19:57,520
showed me that

603
00:19:55,360 --> 00:19:58,799
uh there was a preview image that was

604
00:19:57,520 --> 00:20:00,480
populated it's pink

605
00:19:58,799 --> 00:20:02,480
that's a whole another problem in a

606
00:20:00,480 --> 00:20:05,440
discussion but there's still no search

607
00:20:02,480 --> 00:20:08,960
directory that was created

608
00:20:05,440 --> 00:20:09,679
so then i went back in and monitored the

609
00:20:08,960 --> 00:20:11,520
file system

610
00:20:09,679 --> 00:20:12,880
while pressing that little i and when i

611
00:20:11,520 --> 00:20:14,559
did that it

612
00:20:12,880 --> 00:20:15,919
shows me the picture in the information

613
00:20:14,559 --> 00:20:17,678
screen

614
00:20:15,919 --> 00:20:19,200
on the right you can see that the

615
00:20:17,679 --> 00:20:21,120
previews and search directory was just

616
00:20:19,200 --> 00:20:24,000
then created

617
00:20:21,120 --> 00:20:25,840
so then i checked the previews search

618
00:20:24,000 --> 00:20:28,159
directory and now it has a photo search

619
00:20:25,840 --> 00:20:29,918
search section at and then a guide dot

620
00:20:28,159 --> 00:20:32,080
png

621
00:20:29,919 --> 00:20:33,039
when you look at that it is the image

622
00:20:32,080 --> 00:20:36,080
file

623
00:20:33,039 --> 00:20:37,600
great nothing crazy then i went back in

624
00:20:36,080 --> 00:20:41,199
and deleted it

625
00:20:37,600 --> 00:20:44,240
so imagine someone sent you a photo

626
00:20:41,200 --> 00:20:45,600
that you wanted for a time or you didn't

627
00:20:44,240 --> 00:20:47,360
want at all

628
00:20:45,600 --> 00:20:49,760
and then you delete it but at some point

629
00:20:47,360 --> 00:20:51,280
you press the i

630
00:20:49,760 --> 00:20:52,799
whether to recall all the pictures that

631
00:20:51,280 --> 00:20:53,600
have been sent whatever the reason may

632
00:20:52,799 --> 00:20:55,120
be

633
00:20:53,600 --> 00:20:57,280
when i delete this photo and you can see

634
00:20:55,120 --> 00:20:59,520
it's clearly gone and there's no image

635
00:20:57,280 --> 00:21:01,120
in the information pane anymore

636
00:20:59,520 --> 00:21:02,799
it's still able to be pulled from the

637
00:21:01,120 --> 00:21:04,080
directory

638
00:21:02,799 --> 00:21:06,158
then i went back and i deleted the

639
00:21:04,080 --> 00:21:07,600
entire thread so not just taking the

640
00:21:06,159 --> 00:21:08,320
photo and removing it from the thread

641
00:21:07,600 --> 00:21:10,719
but there was

642
00:21:08,320 --> 00:21:11,760
no no messaging threads at all and it's

643
00:21:10,720 --> 00:21:13,200
still here

644
00:21:11,760 --> 00:21:14,879
attribution is difficult but i'll take

645
00:21:13,200 --> 00:21:18,559
that deleted photo all day

646
00:21:14,880 --> 00:21:21,039
okay all right

647
00:21:18,559 --> 00:21:22,320
moving on to personalization portrait so

648
00:21:21,039 --> 00:21:25,679
this thing is a beast

649
00:21:22,320 --> 00:21:28,080
and it's challenging um but it also

650
00:21:25,679 --> 00:21:30,799
holds a ton of data

651
00:21:28,080 --> 00:21:31,280
so there's the path to it at the top and

652
00:21:30,799 --> 00:21:34,720
this

653
00:21:31,280 --> 00:21:36,879
directory showed up on ios 12

654
00:21:34,720 --> 00:21:38,960
but it didn't have this file in it when

655
00:21:36,880 --> 00:21:39,440
ios 13 came up and i started to review

656
00:21:38,960 --> 00:21:42,320
it

657
00:21:39,440 --> 00:21:43,919
uh i saw that this file existed and it

658
00:21:42,320 --> 00:21:47,520
had some interesting information in

659
00:21:43,919 --> 00:21:49,600
it um the name personalization

660
00:21:47,520 --> 00:21:51,440
makes me think this is helping out with

661
00:21:49,600 --> 00:21:54,480
all the stuff that i want my phone to do

662
00:21:51,440 --> 00:21:56,159
for me that i'm happy as a consumer

663
00:21:54,480 --> 00:21:58,640
when i swipe and look at my widgets and

664
00:21:56,159 --> 00:22:01,280
it's just the news that i want to see

665
00:21:58,640 --> 00:22:03,280
and when i get in my car and plug it in

666
00:22:01,280 --> 00:22:05,440
at a certain time of day and it knows

667
00:22:03,280 --> 00:22:07,120
where i'm about to navigate to like the

668
00:22:05,440 --> 00:22:08,720
personalized piece

669
00:22:07,120 --> 00:22:10,639
when i open my photos and it has the

670
00:22:08,720 --> 00:22:12,799
memories ready for me from a year ago

671
00:22:10,640 --> 00:22:14,000
when i was in las vegas

672
00:22:12,799 --> 00:22:16,400
that we all wish we were somewhere like

673
00:22:14,000 --> 00:22:16,880
that now uh but this is constantly

674
00:22:16,400 --> 00:22:19,600
churning

675
00:22:16,880 --> 00:22:21,360
i implore you to be careful because the

676
00:22:19,600 --> 00:22:24,000
time stamps on this

677
00:22:21,360 --> 00:22:24,559
are when the personalization analysis

678
00:22:24,000 --> 00:22:27,840
ran

679
00:22:24,559 --> 00:22:29,520
most of the time so it checks and says

680
00:22:27,840 --> 00:22:31,280
let's look at the photos and see what's

681
00:22:29,520 --> 00:22:31,760
upcoming for a memory or let's see where

682
00:22:31,280 --> 00:22:33,600
this

683
00:22:31,760 --> 00:22:36,000
uh great photos from a year ago and then

684
00:22:33,600 --> 00:22:38,080
it time stamps potentially right now

685
00:22:36,000 --> 00:22:39,360
photos from a year ago now the photo

686
00:22:38,080 --> 00:22:40,480
sequel light isn't going to have that

687
00:22:39,360 --> 00:22:41,678
problem

688
00:22:40,480 --> 00:22:43,200
but if you get in here and be like oh

689
00:22:41,679 --> 00:22:44,400
great it was three days ago and they

690
00:22:43,200 --> 00:22:45,360
took these pictures you're probably

691
00:22:44,400 --> 00:22:47,600
wrong

692
00:22:45,360 --> 00:22:49,199
because it's probably a memory or

693
00:22:47,600 --> 00:22:51,678
something that was being pulled back

694
00:22:49,200 --> 00:22:53,039
so be careful but the interesting part

695
00:22:51,679 --> 00:22:54,559
about this is that it comes out in

696
00:22:53,039 --> 00:22:56,720
itunes backup

697
00:22:54,559 --> 00:22:58,080
and that's exciting because it has

698
00:22:56,720 --> 00:22:59,919
routine data in it

699
00:22:58,080 --> 00:23:01,520
which we typically only see in our our

700
00:22:59,919 --> 00:23:02,799
full file systems with our routine d

701
00:23:01,520 --> 00:23:05,120
folder

702
00:23:02,799 --> 00:23:06,158
so with our routine data is where we see

703
00:23:05,120 --> 00:23:07,840
a lot of the

704
00:23:06,159 --> 00:23:09,360
significant location type of stuff the

705
00:23:07,840 --> 00:23:10,240
places that you enter and exit most

706
00:23:09,360 --> 00:23:12,320
frequently

707
00:23:10,240 --> 00:23:13,520
uh and sarah edwards has a bunch of work

708
00:23:12,320 --> 00:23:16,000
done on on the

709
00:23:13,520 --> 00:23:17,039
local and cloud sqlite files that's

710
00:23:16,000 --> 00:23:18,480
awesome

711
00:23:17,039 --> 00:23:19,679
but it's essentially the same type of

712
00:23:18,480 --> 00:23:21,600
data and with these you can see the

713
00:23:19,679 --> 00:23:23,039
binary p list that show you when it was

714
00:23:21,600 --> 00:23:25,039
entered when it was exited or the

715
00:23:23,039 --> 00:23:27,120
expiration date for these locations

716
00:23:25,039 --> 00:23:28,240
when you take those specific pieces and

717
00:23:27,120 --> 00:23:29,918
throw it into a map

718
00:23:28,240 --> 00:23:31,360
i can tell you that my device absolutely

719
00:23:29,919 --> 00:23:32,400
was at all these places but you know it

720
00:23:31,360 --> 00:23:34,399
wasn't there

721
00:23:32,400 --> 00:23:36,080
on the time that you see that's when

722
00:23:34,400 --> 00:23:37,840
this analysis occurred

723
00:23:36,080 --> 00:23:39,678
but we're seeing data here coming from a

724
00:23:37,840 --> 00:23:40,720
backup file that potentially we wouldn't

725
00:23:39,679 --> 00:23:44,400
be able to see otherwise

726
00:23:40,720 --> 00:23:46,159
so i like it and then here's a query

727
00:23:44,400 --> 00:23:47,360
that produced the results you just saw

728
00:23:46,159 --> 00:23:48,480
just thrown those in there for reference

729
00:23:47,360 --> 00:23:50,158
later

730
00:23:48,480 --> 00:23:51,919
another interesting piece about this is

731
00:23:50,159 --> 00:23:54,640
that it's grabbing out

732
00:23:51,919 --> 00:23:56,640
third-party data as well so i had

733
00:23:54,640 --> 00:23:57,679
installed the crew messaging application

734
00:23:56,640 --> 00:24:00,080
which is sort of like a

735
00:23:57,679 --> 00:24:00,799
like a slack uh and i set a notification

736
00:24:00,080 --> 00:24:03,039
to only

737
00:24:00,799 --> 00:24:04,480
give me or i set a geofence to only give

738
00:24:03,039 --> 00:24:06,960
me notifications and include me in

739
00:24:04,480 --> 00:24:08,799
conversations when i am at work

740
00:24:06,960 --> 00:24:10,080
well it pulled out the correct address

741
00:24:08,799 --> 00:24:10,639
and the name of that group that i

742
00:24:10,080 --> 00:24:12,320
created

743
00:24:10,640 --> 00:24:13,840
from that third party app and it was

744
00:24:12,320 --> 00:24:15,520
listing it here in the location record

745
00:24:13,840 --> 00:24:18,720
so that's super interesting

746
00:24:15,520 --> 00:24:18,720
we see other files

747
00:24:18,960 --> 00:24:22,480
referencing third-party apps all the

748
00:24:20,640 --> 00:24:23,360
time but to actually have content from

749
00:24:22,480 --> 00:24:27,039
the third party app

750
00:24:23,360 --> 00:24:27,039
pulled within here is quite interesting

751
00:24:27,279 --> 00:24:30,880
one other table in this personalization

752
00:24:29,120 --> 00:24:31,199
portrait that i wanted to point out is

753
00:24:30,880 --> 00:24:32,960
this

754
00:24:31,200 --> 00:24:34,480
n e which i think means name records

755
00:24:32,960 --> 00:24:36,720
table so

756
00:24:34,480 --> 00:24:37,919
in this example i opened a safari tab

757
00:24:36,720 --> 00:24:39,279
and i did a couple searches just trying

758
00:24:37,919 --> 00:24:41,039
to populate data

759
00:24:39,279 --> 00:24:43,039
and then i filtered this down to just

760
00:24:41,039 --> 00:24:44,240
the safari content

761
00:24:43,039 --> 00:24:45,919
and you can see the names that it

762
00:24:44,240 --> 00:24:46,400
grabbed out of the article that i was on

763
00:24:45,919 --> 00:24:48,080
that's

764
00:24:46,400 --> 00:24:50,400
sort of underlined a few of them to so

765
00:24:48,080 --> 00:24:52,480
they jump out at you but it

766
00:24:50,400 --> 00:24:54,240
is tracking the names or the objects of

767
00:24:52,480 --> 00:24:55,279
the names of objects or people or places

768
00:24:54,240 --> 00:24:56,640
or things

769
00:24:55,279 --> 00:24:58,400
and it's tracking how many times they

770
00:24:56,640 --> 00:25:01,120
occur in the source

771
00:24:58,400 --> 00:25:03,600
interesting but then i found this other

772
00:25:01,120 --> 00:25:05,918
piece where i had been in an sms text

773
00:25:03,600 --> 00:25:08,000
message conversation with my uncle

774
00:25:05,919 --> 00:25:09,440
in my phone my uncle was saved as rodney

775
00:25:08,000 --> 00:25:11,279
and then his last name and it's not my

776
00:25:09,440 --> 00:25:14,799
it's not the same as mine

777
00:25:11,279 --> 00:25:16,480
um in the actual text that i sent to him

778
00:25:14,799 --> 00:25:18,000
i called him uncle rodney

779
00:25:16,480 --> 00:25:21,039
well this database pulled out uncle

780
00:25:18,000 --> 00:25:23,039
rodney and wrote his last name with it

781
00:25:21,039 --> 00:25:25,360
why i have no idea but it's interesting

782
00:25:23,039 --> 00:25:27,360
that it's learning

783
00:25:25,360 --> 00:25:30,158
that name and pulling it aside to

784
00:25:27,360 --> 00:25:32,000
associate it to something later i think

785
00:25:30,159 --> 00:25:33,200
and a query for that the last piece of

786
00:25:32,000 --> 00:25:33,679
this that i'm going to cover for this

787
00:25:33,200 --> 00:25:35,120
talk

788
00:25:33,679 --> 00:25:36,320
and again this is this thing's a beast

789
00:25:35,120 --> 00:25:37,120
and it's weird and it's constantly

790
00:25:36,320 --> 00:25:39,520
changing

791
00:25:37,120 --> 00:25:41,600
uh is this tp records table which i

792
00:25:39,520 --> 00:25:43,840
think means topic

793
00:25:41,600 --> 00:25:45,039
in here one piece of this and you can

794
00:25:43,840 --> 00:25:47,039
sort of join this to a bunch of other

795
00:25:45,039 --> 00:25:48,799
tables and make it interesting

796
00:25:47,039 --> 00:25:50,879
but one piece of this that i picked out

797
00:25:48,799 --> 00:25:52,720
was that you essentially can track back

798
00:25:50,880 --> 00:25:54,320
your the ios version history for the

799
00:25:52,720 --> 00:25:56,159
device back to

800
00:25:54,320 --> 00:25:58,879
so for my device it was back in when i

801
00:25:56,159 --> 00:26:02,080
got it so it was able to track back

802
00:25:58,880 --> 00:26:05,200
to when i was on ios 13 as a start

803
00:26:02,080 --> 00:26:06,559
um and then by joining in a different

804
00:26:05,200 --> 00:26:08,480
date and time for another table i can

805
00:26:06,559 --> 00:26:09,600
essentially benchmark when i upgraded my

806
00:26:08,480 --> 00:26:11,360
device

807
00:26:09,600 --> 00:26:13,039
it also is able to pull in my cloud

808
00:26:11,360 --> 00:26:16,879
connected mac

809
00:26:13,039 --> 00:26:18,879
artifacts so by running the query you

810
00:26:16,880 --> 00:26:20,400
potentially can pull out

811
00:26:18,880 --> 00:26:22,960
a rough estimate you see these go back

812
00:26:20,400 --> 00:26:24,400
to 2019 a rough estimate of when the

813
00:26:22,960 --> 00:26:25,520
device was on certain versions and

814
00:26:24,400 --> 00:26:26,799
there's some other files i can do this

815
00:26:25,520 --> 00:26:28,000
for us as well but it's just interesting

816
00:26:26,799 --> 00:26:30,480
this piece is built in

817
00:26:28,000 --> 00:26:32,320
and you can join that to other data uh

818
00:26:30,480 --> 00:26:34,159
as you work through this file

819
00:26:32,320 --> 00:26:36,840
i already wrote a blog article on this

820
00:26:34,159 --> 00:26:38,000
on that sarah hosted for me on

821
00:26:36,840 --> 00:26:39,918
macfarin6.com

822
00:26:38,000 --> 00:26:43,200
this thing is is extremely challenging

823
00:26:39,919 --> 00:26:45,840
but it's also extremely interesting

824
00:26:43,200 --> 00:26:48,240
the last artifact that i want to discuss

825
00:26:45,840 --> 00:26:51,600
is the three bars

826
00:26:48,240 --> 00:26:52,799
how many apparently just three so

827
00:26:51,600 --> 00:26:54,080
the screenshot that you see here is

828
00:26:52,799 --> 00:26:55,679
something that i was lucky enough to

829
00:26:54,080 --> 00:26:57,360
capture and you may have

830
00:26:55,679 --> 00:26:59,440
when you see that think yeah i see that

831
00:26:57,360 --> 00:27:01,439
pop up in my device well let's start in

832
00:26:59,440 --> 00:27:05,120
ios 13

833
00:27:01,440 --> 00:27:07,039
and when it's sort of as

834
00:27:05,120 --> 00:27:08,239
the new ios versions release and those

835
00:27:07,039 --> 00:27:11,279
new things like

836
00:27:08,240 --> 00:27:12,400
uh sent by siri and those little things

837
00:27:11,279 --> 00:27:13,360
that are just different about the new

838
00:27:12,400 --> 00:27:15,360
version

839
00:27:13,360 --> 00:27:16,959
those of us who do this type of research

840
00:27:15,360 --> 00:27:17,840
sort of obsessed on figuring out what

841
00:27:16,960 --> 00:27:19,360
happened and why

842
00:27:17,840 --> 00:27:20,959
well this sort of drove me nuts a little

843
00:27:19,360 --> 00:27:23,760
bit um that

844
00:27:20,960 --> 00:27:25,520
they were offering me wi-fi okay great

845
00:27:23,760 --> 00:27:26,960
but you can see that i have great lte

846
00:27:25,520 --> 00:27:29,360
service when they're offering me wi-fi

847
00:27:26,960 --> 00:27:30,480
so why are they doing this and how

848
00:27:29,360 --> 00:27:32,559
i don't know for sure but i have a

849
00:27:30,480 --> 00:27:34,880
pretty good guess so here's the path to

850
00:27:32,559 --> 00:27:38,960
a file called threebars.sqlite

851
00:27:34,880 --> 00:27:42,000
and it tends to be

852
00:27:38,960 --> 00:27:44,880
commercial not residential but what this

853
00:27:42,000 --> 00:27:48,640
file is doing is it's providing

854
00:27:44,880 --> 00:27:50,159
the geocoordinates and bssids for

855
00:27:48,640 --> 00:27:53,600
wireless access points

856
00:27:50,159 --> 00:27:55,919
roughly where your phone is um

857
00:27:53,600 --> 00:27:56,719
i did take a test device and went for a

858
00:27:55,919 --> 00:27:58,640
drive

859
00:27:56,720 --> 00:28:00,799
that is not internet connected and it

860
00:27:58,640 --> 00:28:02,720
did not populate any data even after it

861
00:28:00,799 --> 00:28:04,158
was reconnected to the internet on where

862
00:28:02,720 --> 00:28:06,240
it had been

863
00:28:04,159 --> 00:28:08,240
so essentially what's happening here is

864
00:28:06,240 --> 00:28:09,840
as i'd if i picked my phone up right now

865
00:28:08,240 --> 00:28:12,080
and drove an hour to my west

866
00:28:09,840 --> 00:28:12,879
whenever i get to my destination it's

867
00:28:12,080 --> 00:28:15,199
going to populate

868
00:28:12,880 --> 00:28:17,600
information about these wi-fi networks

869
00:28:15,200 --> 00:28:19,440
that are available that are near me

870
00:28:17,600 --> 00:28:21,678
so you're able to use that to somewhat

871
00:28:19,440 --> 00:28:24,159
track locations

872
00:28:21,679 --> 00:28:25,679
but um when you look at the query that's

873
00:28:24,159 --> 00:28:29,200
here and then the results

874
00:28:25,679 --> 00:28:29,520
it's giving you the time and it tends to

875
00:28:29,200 --> 00:28:31,440
be

876
00:28:29,520 --> 00:28:32,960
like a global time like when i got to

877
00:28:31,440 --> 00:28:33,919
that new place it's like all right he's

878
00:28:32,960 --> 00:28:37,120
here and

879
00:28:33,919 --> 00:28:38,960
populate but it rates the access points

880
00:28:37,120 --> 00:28:40,239
based on a popularity score so there's

881
00:28:38,960 --> 00:28:41,520
potentially some research that could be

882
00:28:40,240 --> 00:28:43,200
done there to figure out the rating i

883
00:28:41,520 --> 00:28:44,960
saw like a mcdonald's out of 31 and a

884
00:28:43,200 --> 00:28:46,799
high school at a 588 i'm not sure

885
00:28:44,960 --> 00:28:48,240
exactly how they're scoring it maybe by

886
00:28:46,799 --> 00:28:49,520
how many devices show up there i don't

887
00:28:48,240 --> 00:28:51,840
know

888
00:28:49,520 --> 00:28:52,799
but does that wireless network have a

889
00:28:51,840 --> 00:28:54,959
captive login

890
00:28:52,799 --> 00:28:56,158
it's tracked here does it move things

891
00:28:54,960 --> 00:28:57,440
like that but it's giving you the

892
00:28:56,159 --> 00:28:59,360
coordinates of where it is and it's

893
00:28:57,440 --> 00:29:02,880
giving me the bss id

894
00:28:59,360 --> 00:29:05,760
now what's interesting about that is

895
00:29:02,880 --> 00:29:07,120
it's not necessarily right exactly where

896
00:29:05,760 --> 00:29:09,679
you are

897
00:29:07,120 --> 00:29:10,399
so when i went from where i live up in

898
00:29:09,679 --> 00:29:14,159
the top left

899
00:29:10,399 --> 00:29:15,678
down to where i don't live it wrote some

900
00:29:14,159 --> 00:29:17,600
places that were really really close to

901
00:29:15,679 --> 00:29:20,880
where i actually was

902
00:29:17,600 --> 00:29:22,240
but apply that to sort of i guess

903
00:29:20,880 --> 00:29:24,320
security locations and

904
00:29:22,240 --> 00:29:26,399
talk about that more in just a second

905
00:29:24,320 --> 00:29:29,279
but using this as location tracking

906
00:29:26,399 --> 00:29:30,559
maybe probably not can you yeah roughly

907
00:29:29,279 --> 00:29:32,799
in the top left you have

908
00:29:30,559 --> 00:29:33,678
the personalization portrait and those

909
00:29:32,799 --> 00:29:36,158
routine d

910
00:29:33,679 --> 00:29:37,679
points that are definitely where i was i

911
00:29:36,159 --> 00:29:40,000
was there

912
00:29:37,679 --> 00:29:41,360
on the right you see just three bars

913
00:29:40,000 --> 00:29:44,640
just this and it's like

914
00:29:41,360 --> 00:29:47,360
yeah i also was vaguely at those places

915
00:29:44,640 --> 00:29:48,960
if you zoom in it's it's not that great

916
00:29:47,360 --> 00:29:50,678
and then compare those two

917
00:29:48,960 --> 00:29:52,159
in the middle to adding in the

918
00:29:50,679 --> 00:29:54,880
cache.sqlite

919
00:29:52,159 --> 00:29:57,039
file and you can see how granular and

920
00:29:54,880 --> 00:29:59,360
how perfect that cache that sql light

921
00:29:57,039 --> 00:30:01,039
seems to be compared to these other two

922
00:29:59,360 --> 00:30:02,399
but by looking at how accurate that is

923
00:30:01,039 --> 00:30:05,120
does it make these other two wrong

924
00:30:02,399 --> 00:30:06,320
or also right in their own ways i think

925
00:30:05,120 --> 00:30:07,520
they're right in their own ways and it's

926
00:30:06,320 --> 00:30:10,080
interesting

927
00:30:07,520 --> 00:30:12,320
so for this specific file the question i

928
00:30:10,080 --> 00:30:14,000
want to ask you is do you care

929
00:30:12,320 --> 00:30:15,918
if you have a fence or a gate and behind

930
00:30:14,000 --> 00:30:18,720
that gate is things that you expect

931
00:30:15,919 --> 00:30:19,919
people's devices can't reach

932
00:30:18,720 --> 00:30:22,000
i challenge you to take a look at this

933
00:30:19,919 --> 00:30:24,559
file because there is potential

934
00:30:22,000 --> 00:30:26,880
that when that device gets close to and

935
00:30:24,559 --> 00:30:30,240
by close to it in some instances i saw

936
00:30:26,880 --> 00:30:32,640
miles close to a location

937
00:30:30,240 --> 00:30:33,919
it potentially is beaconing out your bss

938
00:30:32,640 --> 00:30:35,760
ids where they are

939
00:30:33,919 --> 00:30:37,440
and some other basic information about

940
00:30:35,760 --> 00:30:38,320
them and again i challenge you do you

941
00:30:37,440 --> 00:30:41,840
care

942
00:30:38,320 --> 00:30:43,760
um and i will end with that

943
00:30:41,840 --> 00:30:44,959
so i want to express huge thanks to

944
00:30:43,760 --> 00:30:47,200
sarah edwards a

945
00:30:44,960 --> 00:30:48,320
great friend and mentor of mine um and

946
00:30:47,200 --> 00:30:50,000
then everyone else knows

947
00:30:48,320 --> 00:30:51,918
heather briggs josh hickman for putting

948
00:30:50,000 --> 00:30:53,440
out uh the

949
00:30:51,919 --> 00:30:56,000
public images and then all those other

950
00:30:53,440 --> 00:30:59,200
resources that i use all the time

951
00:30:56,000 --> 00:31:00,159
and so if this has you know sparked any

952
00:30:59,200 --> 00:31:01,760
interest for you

953
00:31:00,159 --> 00:31:04,080
please reach out to me my twitter

954
00:31:01,760 --> 00:31:06,000
handle's there i'm gonna post some of

955
00:31:04,080 --> 00:31:07,600
some follow-up stuff to this on sarah's

956
00:31:06,000 --> 00:31:09,279
website she's been gracious enough to

957
00:31:07,600 --> 00:31:11,360
offer to host some stuff

958
00:31:09,279 --> 00:31:12,720
but just uh if you're feeling lucky

959
00:31:11,360 --> 00:31:17,959
let's let's go all in and let's figure

960
00:31:12,720 --> 00:31:22,789
out these ios devices

961
00:31:17,960 --> 00:31:22,789
[Music]

962
00:31:28,320 --> 00:31:30,399
you

