1
00:00:03,900 --> 00:00:05,200
[Applause]

2
00:00:05,200 --> 00:00:07,279
so it's a great pleasure of course to be

3
00:00:07,279 --> 00:00:10,400
here so as you heard my name is romeric

4
00:00:10,400 --> 00:00:12,400
duveno

5
00:00:12,400 --> 00:00:14,799
i come from france but i live here in

6
00:00:14,799 --> 00:00:17,199
gothenburg actually the second city so

7
00:00:17,199 --> 00:00:18,720
not stockholm

8
00:00:18,720 --> 00:00:20,880
as you can see i'm assistant professor

9
00:00:20,880 --> 00:00:23,840
in chalmers so the university in

10
00:00:23,840 --> 00:00:25,359
gothenburg

11
00:00:25,359 --> 00:00:27,760
enough about me now about some

12
00:00:27,760 --> 00:00:31,320
interesting things

13
00:00:31,599 --> 00:00:34,399
so i will start the talk actually by

14
00:00:34,399 --> 00:00:36,160
kind of a story

15
00:00:36,160 --> 00:00:39,680
imagine you are at your favorite cafe

16
00:00:39,680 --> 00:00:40,879
right

17
00:00:40,879 --> 00:00:43,520
the first thing you do perhaps

18
00:00:43,520 --> 00:00:47,200
might be logging like getting internet

19
00:00:47,200 --> 00:00:49,039
with the the cafe

20
00:00:49,039 --> 00:00:50,160
wi-fi

21
00:00:50,160 --> 00:00:51,600
so you go to

22
00:00:51,600 --> 00:00:53,840
the hot to the hotspot of the cafe let's

23
00:00:53,840 --> 00:00:54,800
say

24
00:00:54,800 --> 00:00:55,840
and

25
00:00:55,840 --> 00:00:59,199
the cafe starbucks and the password is

26
00:00:59,199 --> 00:01:00,640
password

27
00:01:00,640 --> 00:01:03,440
so i have to precise i already gave this

28
00:01:03,440 --> 00:01:05,760
talk and i changed the password this

29
00:01:05,760 --> 00:01:06,640
time

30
00:01:06,640 --> 00:01:08,960
because it's security conference so i

31
00:01:08,960 --> 00:01:10,479
put a

32
00:01:10,479 --> 00:01:13,600
stronger password this type

33
00:01:13,600 --> 00:01:16,159
okay you log in on your

34
00:01:16,159 --> 00:01:18,640
on the wi-fi

35
00:01:18,640 --> 00:01:20,400
first thing you you do of course is you

36
00:01:20,400 --> 00:01:22,960
want to watch your favorite videos

37
00:01:22,960 --> 00:01:24,840
and what's your favorite streaming

38
00:01:24,840 --> 00:01:27,759
service is svg play of course the

39
00:01:27,759 --> 00:01:31,200
swedish streaming service

40
00:01:31,200 --> 00:01:34,960
so here you are watching your video

41
00:01:34,960 --> 00:01:37,840
your favorite series i guess

42
00:01:37,840 --> 00:01:39,040
i don't know

43
00:01:39,040 --> 00:01:43,119
traveling hey sorry for my swedish

44
00:01:43,119 --> 00:01:45,280
okay all good

45
00:01:45,280 --> 00:01:47,200
so far

46
00:01:47,200 --> 00:01:49,680
and uh since uh yeah you're a bit tech

47
00:01:49,680 --> 00:01:51,040
friendly

48
00:01:51,040 --> 00:01:53,119
tech savvy you you look and you see a

49
00:01:53,119 --> 00:01:55,119
little lock somewhere

50
00:01:55,119 --> 00:01:57,759
saying that what you are doing right now

51
00:01:57,759 --> 00:02:00,640
is being streamed with https

52
00:02:00,640 --> 00:02:04,240
and everyone knows https is encrypted

53
00:02:04,240 --> 00:02:05,280
that means

54
00:02:05,280 --> 00:02:06,880
everything you see here

55
00:02:06,880 --> 00:02:09,520
is encrypted if someone is being

56
00:02:09,520 --> 00:02:12,160
listening to it i will not be able to

57
00:02:12,160 --> 00:02:14,720
see what is going on most wonderful

58
00:02:14,720 --> 00:02:17,040
things

59
00:02:17,840 --> 00:02:18,800
yeah

60
00:02:18,800 --> 00:02:22,680
exactly at the right moment

61
00:02:22,720 --> 00:02:24,560
but of course the world is not that

62
00:02:24,560 --> 00:02:25,840
simple

63
00:02:25,840 --> 00:02:28,160
and there are some bad guys

64
00:02:28,160 --> 00:02:30,959
and here you see

65
00:02:30,959 --> 00:02:32,560
a change

66
00:02:32,560 --> 00:02:35,360
so i should stop

67
00:02:35,440 --> 00:02:37,040
here you see the bad guys so what can

68
00:02:37,040 --> 00:02:38,480
the bad guys do

69
00:02:38,480 --> 00:02:40,480
here is that they can listen to your

70
00:02:40,480 --> 00:02:41,840
traffic

71
00:02:41,840 --> 00:02:44,560
and uh i don't know if i can point yes

72
00:02:44,560 --> 00:02:47,440
and they can find what's the the series

73
00:02:47,440 --> 00:02:50,480
or even the show you are being uh you

74
00:02:50,480 --> 00:02:52,879
are you are watching and even recover

75
00:02:52,879 --> 00:02:55,200
the timestamps so normally this is not

76
00:02:55,200 --> 00:02:57,760
possible with https

77
00:02:57,760 --> 00:03:02,160
uh and that's the purpose of the talk

78
00:03:02,400 --> 00:03:05,440
um i have to say

79
00:03:05,440 --> 00:03:07,840
usually we say magicians don't give

80
00:03:07,840 --> 00:03:09,440
their tricks

81
00:03:09,440 --> 00:03:12,000
i think researchers will be really bad

82
00:03:12,000 --> 00:03:14,640
magicians because we spend

83
00:03:14,640 --> 00:03:16,560
all our time doing that

84
00:03:16,560 --> 00:03:19,280
we reveal all our tricks that's a bit a

85
00:03:19,280 --> 00:03:21,519
shame

86
00:03:27,120 --> 00:03:30,760
yeah the slides

87
00:03:44,959 --> 00:03:47,840
okay

88
00:03:49,120 --> 00:03:52,480
the shortcut is not working

89
00:03:59,360 --> 00:04:01,840
no

90
00:04:03,760 --> 00:04:06,079
okay

91
00:04:09,040 --> 00:04:10,959
yeah we can we can do like this i don't

92
00:04:10,959 --> 00:04:13,760
know what's happening

93
00:04:13,760 --> 00:04:18,238
we just try it out one second ago

94
00:04:23,840 --> 00:04:26,000
okay let's try to understand how this is

95
00:04:26,000 --> 00:04:27,280
possible

96
00:04:27,280 --> 00:04:29,199
so first i have to say a bit of

97
00:04:29,199 --> 00:04:30,960
advertisement for

98
00:04:30,960 --> 00:04:32,639
a great group of students that i

99
00:04:32,639 --> 00:04:34,720
supervise last

100
00:04:34,720 --> 00:04:36,240
term and

101
00:04:36,240 --> 00:04:38,560
what i will present today basically is

102
00:04:38,560 --> 00:04:41,040
their work in the terms of

103
00:04:41,040 --> 00:04:43,440
they they had been the one coded it i've

104
00:04:43,440 --> 00:04:45,120
been supervising and

105
00:04:45,120 --> 00:04:47,120
they did a great job and they made this

106
00:04:47,120 --> 00:04:49,040
thing working

107
00:04:49,040 --> 00:04:52,560
so let's recall first https

108
00:04:52,560 --> 00:04:54,320
so

109
00:04:54,320 --> 00:04:57,600
just the basics okay take the data it

110
00:04:57,600 --> 00:04:59,600
uses tls so it means everything is

111
00:04:59,600 --> 00:05:01,840
encrypted

112
00:05:01,840 --> 00:05:04,639
that means in particular the http header

113
00:05:04,639 --> 00:05:07,840
where you find for example the urls the

114
00:05:07,840 --> 00:05:10,080
things you are the in your address bar

115
00:05:10,080 --> 00:05:12,160
for example so that would be an obvious

116
00:05:12,160 --> 00:05:13,919
way to find the video but this is

117
00:05:13,919 --> 00:05:16,720
encrypted and everything else the data

118
00:05:16,720 --> 00:05:19,199
part is also encrypted so you don't see

119
00:05:19,199 --> 00:05:20,240
the video

120
00:05:20,240 --> 00:05:21,120
though

121
00:05:21,120 --> 00:05:24,560
it uh it does not protect the network

122
00:05:24,560 --> 00:05:26,000
layer information

123
00:05:26,000 --> 00:05:28,720
so that is the ip addresses of the

124
00:05:28,720 --> 00:05:30,639
server you are communicating with

125
00:05:30,639 --> 00:05:33,199
you can you can see them you can see it

126
00:05:33,199 --> 00:05:35,440
and it does not protect the payload of

127
00:05:35,440 --> 00:05:37,520
the packets if someone is listening to

128
00:05:37,520 --> 00:05:38,400
the network

129
00:05:38,400 --> 00:05:41,280
i can see okay those packets have

130
00:05:41,280 --> 00:05:43,759
this size and that's exactly the kind of

131
00:05:43,759 --> 00:05:45,840
information we can exploit

132
00:05:45,840 --> 00:05:46,720
to

133
00:05:46,720 --> 00:05:49,520
retrieve the videos that you are being

134
00:05:49,520 --> 00:05:51,120
watching

135
00:05:51,120 --> 00:05:54,160
second part dash protocol so the dash

136
00:05:54,160 --> 00:05:56,800
protocol dynamic adaptive streaming of

137
00:05:56,800 --> 00:05:58,160
http

138
00:05:58,160 --> 00:06:01,440
is one of the popular protocols

139
00:06:01,440 --> 00:06:02,639
uh to

140
00:06:02,639 --> 00:06:05,039
stream data over the internet for video

141
00:06:05,039 --> 00:06:08,639
streaming and the basic of it is that

142
00:06:08,639 --> 00:06:11,600
it's adaptive it will adapt the rate at

143
00:06:11,600 --> 00:06:13,919
which it downloads content

144
00:06:13,919 --> 00:06:16,240
to your bandwidth so it means if your

145
00:06:16,240 --> 00:06:18,560
bandwidth decrease it will send you

146
00:06:18,560 --> 00:06:21,280
video content in a lower quality if it

147
00:06:21,280 --> 00:06:23,199
increase the opposite

148
00:06:23,199 --> 00:06:25,919
and this is why in services like svt

149
00:06:25,919 --> 00:06:28,720
play but the same works on phase on

150
00:06:28,720 --> 00:06:30,319
netflix for example

151
00:06:30,319 --> 00:06:32,240
you don't have a quality you don't

152
00:06:32,240 --> 00:06:34,400
choose your quality yourself this is

153
00:06:34,400 --> 00:06:37,759
automatically done by this protocol

154
00:06:37,759 --> 00:06:39,520
so how does it work

155
00:06:39,520 --> 00:06:41,360
it just it's simple it just divides the

156
00:06:41,360 --> 00:06:43,600
video in smaller chunks

157
00:06:43,600 --> 00:06:46,240
usually like a few seconds long two

158
00:06:46,240 --> 00:06:48,639
between two and 15 seconds

159
00:06:48,639 --> 00:06:51,520
and each chunk is encoded in different

160
00:06:51,520 --> 00:06:53,360
qualities

161
00:06:53,360 --> 00:06:55,120
so different

162
00:06:55,120 --> 00:06:57,440
different uncoded for each chunk and

163
00:06:57,440 --> 00:06:59,680
then when my bandwidth is decreasing

164
00:06:59,680 --> 00:07:02,000
then i will just download and a lower

165
00:07:02,000 --> 00:07:03,520
quality chunk

166
00:07:03,520 --> 00:07:05,599
how do i know where to download all this

167
00:07:05,599 --> 00:07:08,240
information all those chunks that's why

168
00:07:08,240 --> 00:07:11,039
i use a manifest file it's just an a

169
00:07:11,039 --> 00:07:14,160
file that contains all this information

170
00:07:14,160 --> 00:07:16,319
typically the servers that i need to

171
00:07:16,319 --> 00:07:18,479
contact to download the chunks

172
00:07:18,479 --> 00:07:20,080
and what are the different qualities

173
00:07:20,080 --> 00:07:22,240
that i can have access to so once you

174
00:07:22,240 --> 00:07:24,479
have the manifest file everything is

175
00:07:24,479 --> 00:07:26,560
done by the client the client will

176
00:07:26,560 --> 00:07:28,960
switch between the different servers

177
00:07:28,960 --> 00:07:30,400
just picking the one

178
00:07:30,400 --> 00:07:32,960
the with the quality that you want to

179
00:07:32,960 --> 00:07:35,280
use right now so it's that's the

180
00:07:35,280 --> 00:07:37,680
adaptive part and actually

181
00:07:37,680 --> 00:07:39,599
that's also the weakness that we'll see

182
00:07:39,599 --> 00:07:42,960
that we can exploit this part

183
00:07:42,960 --> 00:07:46,080
third part svt play that's the service

184
00:07:46,080 --> 00:07:48,800
the attack was designed on but we know

185
00:07:48,800 --> 00:07:51,280
that it's also working on on netflix

186
00:07:51,280 --> 00:07:54,960
because it uses the same protocol

187
00:07:55,039 --> 00:07:56,720
a few words for those that don't know

188
00:07:56,720 --> 00:07:59,840
svt play that's the streaming service

189
00:07:59,840 --> 00:08:02,560
it's like the swedish netflix no i don't

190
00:08:02,560 --> 00:08:04,080
think so

191
00:08:04,080 --> 00:08:05,039
it's it

192
00:08:05,039 --> 00:08:07,440
it's it's hosted um

193
00:08:07,440 --> 00:08:11,120
it hosts 20 000 videos it's

194
00:08:11,120 --> 00:08:12,960
provided by the swedish

195
00:08:12,960 --> 00:08:16,319
national broadcaster svt

196
00:08:16,319 --> 00:08:17,680
and

197
00:08:17,680 --> 00:08:21,039
interesting for us it uses dash as

198
00:08:21,039 --> 00:08:24,840
default protocol to stream the videos

199
00:08:24,840 --> 00:08:27,599
um usually it

200
00:08:27,599 --> 00:08:30,400
divides the videos into four seconds

201
00:08:30,400 --> 00:08:32,399
chunks

202
00:08:32,399 --> 00:08:34,399
and each tank is then encoded in five

203
00:08:34,399 --> 00:08:35,919
qualities

204
00:08:35,919 --> 00:08:37,279
details

205
00:08:37,279 --> 00:08:40,479
uh it uses its own cdn to

206
00:08:40,479 --> 00:08:44,560
to host the videos and also external one

207
00:08:44,560 --> 00:08:45,680
and

208
00:08:45,680 --> 00:08:47,680
but those are details that we we don't

209
00:08:47,680 --> 00:08:51,040
really care what we care is that how can

210
00:08:51,040 --> 00:08:54,160
we make this attack possible to make

211
00:08:54,160 --> 00:08:55,519
this attack possible i show at the

212
00:08:55,519 --> 00:08:58,399
beginning so that means retrieving

213
00:08:58,399 --> 00:09:00,240
what is the video being watched right

214
00:09:00,240 --> 00:09:03,279
now what we need is actually being

215
00:09:03,279 --> 00:09:05,760
built building a database

216
00:09:05,760 --> 00:09:07,839
of all the information about the

217
00:09:07,839 --> 00:09:09,040
segments

218
00:09:09,040 --> 00:09:11,680
that is hosted by svt

219
00:09:11,680 --> 00:09:13,920
and that's a very big bunch of

220
00:09:13,920 --> 00:09:15,120
information

221
00:09:15,120 --> 00:09:17,920
and what what will help us in the way to

222
00:09:17,920 --> 00:09:19,839
gather all this information

223
00:09:19,839 --> 00:09:22,399
is the manifest file these things that

224
00:09:22,399 --> 00:09:24,959
gather all information about one video

225
00:09:24,959 --> 00:09:27,200
so once i have a manifest file of one

226
00:09:27,200 --> 00:09:29,839
video i know what are the servers i need

227
00:09:29,839 --> 00:09:32,480
to contact to get the the segments

228
00:09:32,480 --> 00:09:35,200
and that's what we'll uh again exploit

229
00:09:35,200 --> 00:09:37,519
to build a database that will contain

230
00:09:37,519 --> 00:09:39,839
information about all segments of all

231
00:09:39,839 --> 00:09:42,800
videos of svt

232
00:09:42,800 --> 00:09:45,839
and that's a lot of segments

233
00:09:45,839 --> 00:09:49,920
but first let's uh do a small example of

234
00:09:49,920 --> 00:09:52,640
bob trying to download the video just to

235
00:09:52,640 --> 00:09:53,839
situate

236
00:09:53,839 --> 00:09:55,760
so the first thing it does is of course

237
00:09:55,760 --> 00:09:58,720
it will browse svt website so that's

238
00:09:58,720 --> 00:10:00,880
usually contacting some servers in the

239
00:10:00,880 --> 00:10:02,160
cloud

240
00:10:02,160 --> 00:10:05,200
to retrieve the manifest file once we

241
00:10:05,200 --> 00:10:07,760
got the manifest file then i can contact

242
00:10:07,760 --> 00:10:10,640
directly the cdn that are hosting the

243
00:10:10,640 --> 00:10:12,720
video

244
00:10:12,720 --> 00:10:15,040
so all information is gathered in this

245
00:10:15,040 --> 00:10:16,480
manifest file

246
00:10:16,480 --> 00:10:18,560
the next step in the attack was to build

247
00:10:18,560 --> 00:10:19,440
this

248
00:10:19,440 --> 00:10:22,000
large database of all information

249
00:10:22,000 --> 00:10:24,160
basically about the videos

250
00:10:24,160 --> 00:10:25,680
in svt

251
00:10:25,680 --> 00:10:29,200
um so we said around 20 000 videos

252
00:10:29,200 --> 00:10:31,120
imagine that you have

253
00:10:31,120 --> 00:10:33,920
a segment every four seconds so it's

254
00:10:33,920 --> 00:10:37,120
around 39 million segments

255
00:10:37,120 --> 00:10:40,880
if you in terms of data it's around 33

256
00:10:40,880 --> 00:10:43,120
terabytes of data

257
00:10:43,120 --> 00:10:44,800
and of course we didn't download

258
00:10:44,800 --> 00:10:47,600
everything from svt play and that's good

259
00:10:47,600 --> 00:10:50,000
that that will take quite a while

260
00:10:50,000 --> 00:10:52,079
so we use a simple trick

261
00:10:52,079 --> 00:10:54,000
kind of a magician trick

262
00:10:54,000 --> 00:10:56,240
so instead of downloading all the data

263
00:10:56,240 --> 00:10:58,399
we didn't need the data we need only to

264
00:10:58,399 --> 00:11:02,240
know how large was each segment

265
00:11:02,240 --> 00:11:04,880
then you don't need to to do a get then

266
00:11:04,880 --> 00:11:08,480
just do a http head and get the size of

267
00:11:08,480 --> 00:11:09,920
each segment

268
00:11:09,920 --> 00:11:11,839
so the students

269
00:11:11,839 --> 00:11:15,360
just program a small quarter you go on

270
00:11:15,360 --> 00:11:17,279
you don't have a list of all svt play

271
00:11:17,279 --> 00:11:19,040
videos you have to go on the website

272
00:11:19,040 --> 00:11:21,760
look at the program pass the web page

273
00:11:21,760 --> 00:11:24,320
get all the links to the videos

274
00:11:24,320 --> 00:11:26,160
then retrieve the manifest files and

275
00:11:26,160 --> 00:11:28,800
then when we have the manifest bombard

276
00:11:28,800 --> 00:11:32,240
the cdn servers we've get request we've

277
00:11:32,240 --> 00:11:35,440
had requests to get all the size of all

278
00:11:35,440 --> 00:11:37,839
the segments of all videos

279
00:11:37,839 --> 00:11:40,480
hosted on svt

280
00:11:40,480 --> 00:11:42,000
that takes a bit of a while the first

281
00:11:42,000 --> 00:11:43,279
time you do it

282
00:11:43,279 --> 00:11:45,519
uh 80 hours but on four computers it

283
00:11:45,519 --> 00:11:47,360
took 20.

284
00:11:47,360 --> 00:11:49,519
but then once you have that

285
00:11:49,519 --> 00:11:51,279
of course there is a rollout of of

286
00:11:51,279 --> 00:11:53,680
content every three months or every two

287
00:11:53,680 --> 00:11:55,920
months of copyright reason they change

288
00:11:55,920 --> 00:11:58,399
they remove they add some stuff but the

289
00:11:58,399 --> 00:12:00,640
difference is not that big so actually

290
00:12:00,640 --> 00:12:02,959
updating this database is not that

291
00:12:02,959 --> 00:12:05,518
costly

292
00:12:06,399 --> 00:12:08,800
so okay imagine you have almost all

293
00:12:08,800 --> 00:12:11,839
videos to be precise we just remove

294
00:12:11,839 --> 00:12:14,639
some news they were exactly they were

295
00:12:14,639 --> 00:12:17,040
showing exactly the same thing here

296
00:12:17,040 --> 00:12:18,720
there is no chance we'll be able to

297
00:12:18,720 --> 00:12:21,360
identify the video because there will be

298
00:12:21,360 --> 00:12:23,279
exactly the same footage

299
00:12:23,279 --> 00:12:25,920
and just a couple of long videos but

300
00:12:25,920 --> 00:12:28,160
yeah almost everything that is hosted on

301
00:12:28,160 --> 00:12:31,360
svt we know the size of every single

302
00:12:31,360 --> 00:12:34,320
segment how can we exploit this to make

303
00:12:34,320 --> 00:12:37,120
the recognition work

304
00:12:37,120 --> 00:12:39,839
second trick what we do is we'll not use

305
00:12:39,839 --> 00:12:43,040
segments by themself but we'll gather

306
00:12:43,040 --> 00:12:44,959
consecutive segments in what we call a

307
00:12:44,959 --> 00:12:46,800
window

308
00:12:46,800 --> 00:12:48,800
in the work they have used windows of

309
00:12:48,800 --> 00:12:50,240
different sizes

310
00:12:50,240 --> 00:12:52,240
between let's say three so three

311
00:12:52,240 --> 00:12:55,040
segments is like 12 seconds of video and

312
00:12:55,040 --> 00:12:58,240
this is the first size that works so if

313
00:12:58,240 --> 00:13:00,480
i have 12 seconds on traffic i can

314
00:13:00,480 --> 00:13:03,519
already infer with 98 percent

315
00:13:03,519 --> 00:13:06,399
what is going on on svt if i increase

316
00:13:06,399 --> 00:13:10,399
the size i can reach almost yeah 100

317
00:13:10,399 --> 00:13:13,120
if i do let's say 30 seconds of video

318
00:13:13,120 --> 00:13:15,040
etc so this controls

319
00:13:15,040 --> 00:13:16,160
how much

320
00:13:16,160 --> 00:13:19,040
traffic i need to listen to get a data

321
00:13:19,040 --> 00:13:21,760
point that i will look in my database

322
00:13:21,760 --> 00:13:23,920
how do i organize all those windows to

323
00:13:23,920 --> 00:13:25,760
do a really quick search

324
00:13:25,760 --> 00:13:28,160
i will use a data structure

325
00:13:28,160 --> 00:13:31,440
in in k dimension where k will be the

326
00:13:31,440 --> 00:13:34,639
size of the windows and thanks to this

327
00:13:34,639 --> 00:13:36,079
data structure

328
00:13:36,079 --> 00:13:38,959
i can look really fast in my database of

329
00:13:38,959 --> 00:13:41,600
all the segments what is what are the

330
00:13:41,600 --> 00:13:44,880
the segments that look very similar

331
00:13:44,880 --> 00:13:47,279
exactly i will look what are the let's

332
00:13:47,279 --> 00:13:48,800
say five

333
00:13:48,800 --> 00:13:51,120
windows that are the closest to the 12

334
00:13:51,120 --> 00:13:53,760
seconds of traffic i just recorded and

335
00:13:53,760 --> 00:13:55,519
we know that there will be several

336
00:13:55,519 --> 00:13:57,760
candidates

337
00:13:57,760 --> 00:14:01,120
sometimes it might be that the closest

338
00:14:01,120 --> 00:14:03,040
is not the good match we saw in the

339
00:14:03,040 --> 00:14:05,040
example at the beginning usually you

340
00:14:05,040 --> 00:14:06,800
don't have the right match you need

341
00:14:06,800 --> 00:14:08,800
several iteration and sometimes you will

342
00:14:08,800 --> 00:14:10,959
converge to the right match

343
00:14:10,959 --> 00:14:13,680
so to to determine if we have a match we

344
00:14:13,680 --> 00:14:15,279
use another trick

345
00:14:15,279 --> 00:14:17,279
that is dispersion correlation just

346
00:14:17,279 --> 00:14:19,279
something to measure distance basically

347
00:14:19,279 --> 00:14:21,760
between the the windows so once you

348
00:14:21,760 --> 00:14:24,240
retrieve in your data structure the

349
00:14:24,240 --> 00:14:25,440
closest

350
00:14:25,440 --> 00:14:28,480
points you just say okay are they close

351
00:14:28,480 --> 00:14:30,480
enough and when they are close enough

352
00:14:30,480 --> 00:14:33,040
it's a match and you say okay i found

353
00:14:33,040 --> 00:14:34,959
what you are currently watching

354
00:14:34,959 --> 00:14:36,959
and that's traveling hey

355
00:14:36,959 --> 00:14:39,920
the first episode

356
00:14:40,079 --> 00:14:42,880
okay now you need to make it work in

357
00:14:42,880 --> 00:14:44,720
practice so

358
00:14:44,720 --> 00:14:46,880
for the cap for the

359
00:14:46,880 --> 00:14:50,800
for the capture of traffic tcp damp not

360
00:14:50,800 --> 00:14:53,760
completely classic tool nothing fancy

361
00:14:53,760 --> 00:14:57,279
you just capture all tcp traffic

362
00:14:57,279 --> 00:14:59,680
then you have to somehow synchronize

363
00:14:59,680 --> 00:15:02,000
with the window with with the the stream

364
00:15:02,000 --> 00:15:03,199
remember

365
00:15:03,199 --> 00:15:04,880
dash is sending

366
00:15:04,880 --> 00:15:08,000
data roughly about four seconds of video

367
00:15:08,000 --> 00:15:09,680
then there will be nothing then there

368
00:15:09,680 --> 00:15:12,399
will be four seconds nothing etc so the

369
00:15:12,399 --> 00:15:15,680
trick here will be to listen to the

370
00:15:15,680 --> 00:15:18,000
packet trace listen to the traffic and

371
00:15:18,000 --> 00:15:20,560
if you see a high burst and then a

372
00:15:20,560 --> 00:15:22,240
period with nothing

373
00:15:22,240 --> 00:15:24,320
then you will say okay next time i will

374
00:15:24,320 --> 00:15:27,360
count how many bytes i receive within

375
00:15:27,360 --> 00:15:28,720
four seconds

376
00:15:28,720 --> 00:15:31,360
and that will give me a segment size and

377
00:15:31,360 --> 00:15:33,199
then i will do this three times let's

378
00:15:33,199 --> 00:15:35,519
say that will give me a window and then

379
00:15:35,519 --> 00:15:38,880
i can look in my caddy tree

380
00:15:39,120 --> 00:15:40,959
lots of tricks actually that's how

381
00:15:40,959 --> 00:15:43,360
magics work

382
00:15:43,360 --> 00:15:48,560
so i have a demonstration a video

383
00:15:50,959 --> 00:15:52,639
that i couldn't do here because it's

384
00:15:52,639 --> 00:15:55,839
with several computers

385
00:16:00,720 --> 00:16:02,720
what you see here is like three

386
00:16:02,720 --> 00:16:04,560
computers

387
00:16:04,560 --> 00:16:05,600
streaming

388
00:16:05,600 --> 00:16:06,720
uh

389
00:16:06,720 --> 00:16:09,519
some videos from sbt play

390
00:16:09,519 --> 00:16:10,480
and

391
00:16:10,480 --> 00:16:12,720
the the students here they run the the

392
00:16:12,720 --> 00:16:16,240
kd3 the identifier

393
00:16:16,639 --> 00:16:18,560
and they can retrieve what is being

394
00:16:18,560 --> 00:16:20,560
watched on the three those three are

395
00:16:20,560 --> 00:16:23,360
being streaming traffic on a wi-fi

396
00:16:23,360 --> 00:16:25,839
network

397
00:16:28,320 --> 00:16:29,759
so the students there have also

398
00:16:29,759 --> 00:16:32,560
implemented a nice web interface where

399
00:16:32,560 --> 00:16:34,720
you can actually see

400
00:16:34,720 --> 00:16:40,000
live what is going on on on the network

401
00:16:40,079 --> 00:16:42,320
i just modified a bit their code so that

402
00:16:42,320 --> 00:16:44,160
i have the outputs in

403
00:16:44,160 --> 00:16:45,759
the console i didn't like the web

404
00:16:45,759 --> 00:16:46,959
interface

405
00:16:46,959 --> 00:16:48,399
it's demo

406
00:16:48,399 --> 00:16:51,279
so here you have the three videos being

407
00:16:51,279 --> 00:16:52,240
uh

408
00:16:52,240 --> 00:16:54,079
identified you see

409
00:16:54,079 --> 00:16:56,560
uh i i think i think they use a large

410
00:16:56,560 --> 00:16:59,279
window so it took maybe 30 seconds

411
00:16:59,279 --> 00:17:02,240
and for each trace you can see how many

412
00:17:02,240 --> 00:17:03,279
uh

413
00:17:03,279 --> 00:17:05,679
bytes were received in in a short

414
00:17:05,679 --> 00:17:08,559
duration of time

415
00:17:09,679 --> 00:17:11,679
a bit scary now i think when you will

416
00:17:11,679 --> 00:17:15,039
watch content you will think about it

417
00:17:15,039 --> 00:17:16,839
i hope so

418
00:17:16,839 --> 00:17:19,039
actually okay let's go back to the

419
00:17:19,039 --> 00:17:21,439
slides

420
00:17:23,679 --> 00:17:26,880
okay the web interface we can we can

421
00:17:26,880 --> 00:17:29,440
continue but yeah a nice thing this just

422
00:17:29,440 --> 00:17:30,640
shows that

423
00:17:30,640 --> 00:17:32,960
yeah i just think to make you think of

424
00:17:32,960 --> 00:17:35,200
what you watch maybe someone in front of

425
00:17:35,200 --> 00:17:38,240
you is being is is watching the same

426
00:17:38,240 --> 00:17:40,320
thing

427
00:17:40,320 --> 00:17:42,160
just a few words

428
00:17:42,160 --> 00:17:44,160
i guess a lot of you are like yeah but

429
00:17:44,160 --> 00:17:46,080
why didn't you use machine learning you

430
00:17:46,080 --> 00:17:48,480
hear machine learning everywhere

431
00:17:48,480 --> 00:17:51,039
yeah actually we did implement this with

432
00:17:51,039 --> 00:17:53,919
classic machine learning like svm

433
00:17:53,919 --> 00:17:56,720
and the answer is that

434
00:17:56,720 --> 00:17:59,600
the result is not working as well as a

435
00:17:59,600 --> 00:18:02,160
classic kd3 something very well known

436
00:18:02,160 --> 00:18:04,240
for years

437
00:18:04,240 --> 00:18:08,000
much much faster to boot much faster to

438
00:18:08,000 --> 00:18:09,840
compute the kd3

439
00:18:09,840 --> 00:18:12,160
it's we talk about one minute whereas

440
00:18:12,160 --> 00:18:14,799
training the svm model

441
00:18:14,799 --> 00:18:16,799
we were talking hours

442
00:18:16,799 --> 00:18:19,280
and the svm was not even able to

443
00:18:19,280 --> 00:18:20,400
actually

444
00:18:20,400 --> 00:18:23,120
load the full database the full svt

445
00:18:23,120 --> 00:18:24,960
database is not possible to do it with

446
00:18:24,960 --> 00:18:27,919
just a commodity hardware whereas the

447
00:18:27,919 --> 00:18:31,039
very classic kd3 simple data structure

448
00:18:31,039 --> 00:18:33,200
everything can be done on on on small

449
00:18:33,200 --> 00:18:34,799
hardware i think it only needs two

450
00:18:34,799 --> 00:18:37,760
gigabytes of memory for the for the full

451
00:18:37,760 --> 00:18:40,799
database of svt

452
00:18:40,799 --> 00:18:42,880
yeah sometimes machine learning is not

453
00:18:42,880 --> 00:18:44,559
the answer try to

454
00:18:44,559 --> 00:18:47,120
teach that

455
00:18:47,520 --> 00:18:50,640
why is this useful you may wonder yeah

456
00:18:50,640 --> 00:18:52,720
maybe some of you think not that useful

457
00:18:52,720 --> 00:18:55,360
hey i don't care some people watch what

458
00:18:55,360 --> 00:18:56,960
i'm watching

459
00:18:56,960 --> 00:18:58,559
right but

460
00:18:58,559 --> 00:19:00,080
think a little bit

461
00:19:00,080 --> 00:19:02,720
actually if someone knows it's like

462
00:19:02,720 --> 00:19:05,120
website fingerprinting it's exactly it's

463
00:19:05,120 --> 00:19:07,039
roughly the same kind of

464
00:19:07,039 --> 00:19:08,480
vulnerabilities

465
00:19:08,480 --> 00:19:09,760
if someone

466
00:19:09,760 --> 00:19:11,840
knows what you are watching

467
00:19:11,840 --> 00:19:13,200
then he can

468
00:19:13,200 --> 00:19:16,320
uh she or he can create attacks

469
00:19:16,320 --> 00:19:19,280
based on what you are watching typically

470
00:19:19,280 --> 00:19:21,600
spear phishing attacks where i will send

471
00:19:21,600 --> 00:19:24,960
you targeted emails for example because

472
00:19:24,960 --> 00:19:26,799
you like treville hill you i would send

473
00:19:26,799 --> 00:19:29,120
you emails about that but

474
00:19:29,120 --> 00:19:31,280
more likely about if you are looking for

475
00:19:31,280 --> 00:19:33,919
a job i would send you job offers and of

476
00:19:33,919 --> 00:19:36,480
course the job offer will be malwares

477
00:19:36,480 --> 00:19:38,720
and you will be less

478
00:19:38,720 --> 00:19:39,840
um

479
00:19:39,840 --> 00:19:42,240
attentive to the emails because you

480
00:19:42,240 --> 00:19:44,799
thought that this this didn't look like

481
00:19:44,799 --> 00:19:46,640
a spam right

482
00:19:46,640 --> 00:19:48,559
and the same if

483
00:19:48,559 --> 00:19:50,480
for website fingerprinting you can see

484
00:19:50,480 --> 00:19:51,520
that

485
00:19:51,520 --> 00:19:54,720
you can retrieve someone's

486
00:19:54,720 --> 00:19:56,880
like medical records this has been shown

487
00:19:56,880 --> 00:19:59,679
etc so the same with videos you can

488
00:19:59,679 --> 00:20:02,640
retrieve a lot of information just if

489
00:20:02,640 --> 00:20:04,880
you know what kind of videos you are you

490
00:20:04,880 --> 00:20:06,000
are

491
00:20:06,000 --> 00:20:07,760
watching

492
00:20:07,760 --> 00:20:09,440
here i would like also to mention

493
00:20:09,440 --> 00:20:11,120
another work i'm doing

494
00:20:11,120 --> 00:20:13,440
that is actually that will be published

495
00:20:13,440 --> 00:20:16,559
soon and instead of only retrieving the

496
00:20:16,559 --> 00:20:18,960
video titles we are also able to

497
00:20:18,960 --> 00:20:20,640
retrieve video

498
00:20:20,640 --> 00:20:23,520
jaws to classify the videos into

499
00:20:23,520 --> 00:20:26,080
categories and we are doing this much

500
00:20:26,080 --> 00:20:28,240
faster the titles because the categories

501
00:20:28,240 --> 00:20:29,440
are larger

502
00:20:29,440 --> 00:20:31,919
so i can so this can be used you can

503
00:20:31,919 --> 00:20:34,240
think by good guys for example if you

504
00:20:34,240 --> 00:20:36,559
want to retrieve really fast even over

505
00:20:36,559 --> 00:20:38,080
encrypted traffic

506
00:20:38,080 --> 00:20:40,559
if for example facebook videos

507
00:20:40,559 --> 00:20:43,039
are about terror attacks or something or

508
00:20:43,039 --> 00:20:45,520
some illegal content if you classify

509
00:20:45,520 --> 00:20:47,919
those videos do this approach even if

510
00:20:47,919 --> 00:20:49,280
it's encrypted

511
00:20:49,280 --> 00:20:51,679
you can still match them and you can

512
00:20:51,679 --> 00:20:54,960
still really fast have an answer

513
00:20:54,960 --> 00:20:57,679
of course everything has like two sides

514
00:20:57,679 --> 00:20:59,840
you can think this can also be used

515
00:20:59,840 --> 00:21:02,960
for restraining freedom of speech if i

516
00:21:02,960 --> 00:21:05,600
can categorize videos as

517
00:21:05,600 --> 00:21:07,679
politically incorrect i can even

518
00:21:07,679 --> 00:21:11,280
retrieve them over encrypted channels

519
00:21:11,280 --> 00:21:13,918
think about it

520
00:21:15,679 --> 00:21:17,760
so to summarize what we've presented

521
00:21:17,760 --> 00:21:18,720
today

522
00:21:18,720 --> 00:21:21,280
presented something working on svt i can

523
00:21:21,280 --> 00:21:24,240
tell you we made it work on netflix also

524
00:21:24,240 --> 00:21:25,840
um we use

525
00:21:25,840 --> 00:21:28,080
also tested with machine learning

526
00:21:28,080 --> 00:21:30,000
take home message not always the

527
00:21:30,000 --> 00:21:31,360
solution

528
00:21:31,360 --> 00:21:33,280
yeah yeah and then it's up to you to

529
00:21:33,280 --> 00:21:34,720
decide if it's

530
00:21:34,720 --> 00:21:37,120
nice to do some research research on

531
00:21:37,120 --> 00:21:39,039
that

532
00:21:39,039 --> 00:21:40,400
so of course

533
00:21:40,400 --> 00:21:43,760
since i'm a researcher

534
00:21:43,760 --> 00:21:44,480
i

535
00:21:44,480 --> 00:21:47,039
i did a slides for questions and then i

536
00:21:47,039 --> 00:21:49,280
heard but there are no questions here

537
00:21:49,280 --> 00:21:51,679
i didn't know about that but if you have

538
00:21:51,679 --> 00:21:53,840
any questions i'm here you can see me

539
00:21:53,840 --> 00:21:55,360
around

540
00:21:55,360 --> 00:21:57,280
and and there is a mic so actually you

541
00:21:57,280 --> 00:21:59,919
can ask your questions now

542
00:21:59,919 --> 00:22:02,799
and i have a special thanks to give to

543
00:22:02,799 --> 00:22:05,120
to the six students that that work on

544
00:22:05,120 --> 00:22:07,039
that project

545
00:22:07,039 --> 00:22:10,330
thank you very much

546
00:22:10,330 --> 00:22:15,679
[Applause]

547
00:22:15,679 --> 00:22:17,440
so any questions from the audience yeah

548
00:22:17,440 --> 00:22:19,919
we have one over here we'll see if we

549
00:22:19,919 --> 00:22:22,480
can go over there

550
00:22:22,480 --> 00:22:26,120
compost mike

551
00:22:28,400 --> 00:22:29,280
hello

552
00:22:29,280 --> 00:22:31,039
okay works good

553
00:22:31,039 --> 00:22:33,200
um thank you very nice

554
00:22:33,200 --> 00:22:34,240
lecture

555
00:22:34,240 --> 00:22:37,520
and my question is this

556
00:22:37,520 --> 00:22:40,559
as a private person

557
00:22:40,559 --> 00:22:42,880
i have unlimited internet

558
00:22:42,880 --> 00:22:45,200
so does this mean it's much safer for me

559
00:22:45,200 --> 00:22:47,520
to always just use my own internet and

560
00:22:47,520 --> 00:22:50,879
not use the public wifis

561
00:22:52,159 --> 00:22:54,320
can you repeat i can't hear well here

562
00:22:54,320 --> 00:22:56,559
with the sound of the i know where is

563
00:22:56,559 --> 00:22:58,080
the

564
00:22:58,080 --> 00:23:01,760
okay yes can you hear me yes it's

565
00:23:01,760 --> 00:23:03,840
just discovered by the sound over there

566
00:23:03,840 --> 00:23:06,960
so as a private person yes is it better

567
00:23:06,960 --> 00:23:09,200
for me to always use my own internet

568
00:23:09,200 --> 00:23:12,000
provider than using the wi-fi

569
00:23:12,000 --> 00:23:13,039
out

570
00:23:13,039 --> 00:23:14,159
at all

571
00:23:14,159 --> 00:23:16,799
in public areas

572
00:23:16,799 --> 00:23:18,240
good question

573
00:23:18,240 --> 00:23:21,280
but actually it has been proven that

574
00:23:21,280 --> 00:23:24,159
some of the attacks not that large scale

575
00:23:24,159 --> 00:23:27,360
can also be done on cellular networks

576
00:23:27,360 --> 00:23:29,280
so basically

577
00:23:29,280 --> 00:23:31,520
yeah it could be an easy solution i'm

578
00:23:31,520 --> 00:23:34,000
not using wi-fi i'm safe

579
00:23:34,000 --> 00:23:36,480
but actually you can you can do also

580
00:23:36,480 --> 00:23:39,600
some of those attacks on serial networks

581
00:23:39,600 --> 00:23:42,720
basically this is always a game of when

582
00:23:42,720 --> 00:23:45,039
the attack is construed

583
00:23:45,039 --> 00:23:47,039
like dangerous enough that they will

584
00:23:47,039 --> 00:23:49,600
start to say okay we have to rethink our

585
00:23:49,600 --> 00:23:50,799
protocols

586
00:23:50,799 --> 00:23:52,240
we have maybe to harm a bit the

587
00:23:52,240 --> 00:23:55,520
performance to make it um

588
00:23:55,520 --> 00:23:57,120
less vulnerable to

589
00:23:57,120 --> 00:23:59,760
those kind of attacks so

590
00:23:59,760 --> 00:24:02,640
my advice would be don't be worried of

591
00:24:02,640 --> 00:24:04,480
wi-fi just connect

592
00:24:04,480 --> 00:24:07,280
for now it's not well known enough

593
00:24:07,280 --> 00:24:09,280
that they have changed their protocol so

594
00:24:09,280 --> 00:24:11,760
they consider it's fine

595
00:24:11,760 --> 00:24:14,799
after it's up to you

596
00:24:15,840 --> 00:24:18,840
yes

597
00:24:26,799 --> 00:24:29,679
so if this vulnerability is in the dash

598
00:24:29,679 --> 00:24:30,960
protocol

599
00:24:30,960 --> 00:24:33,279
is this enough to make the dash protocol

600
00:24:33,279 --> 00:24:35,679
obsolete or is it widely used enough

601
00:24:35,679 --> 00:24:38,720
that it's still worth using

602
00:24:38,720 --> 00:24:40,400
okay good question

603
00:24:40,400 --> 00:24:43,279
i think i think dash might become

604
00:24:43,279 --> 00:24:46,480
obsolete in the coming years i mean it

605
00:24:46,480 --> 00:24:49,120
was the main protocol but internet

606
00:24:49,120 --> 00:24:51,760
explorer was the main browser

607
00:24:51,760 --> 00:24:54,640
it doesn't exist anymore right

608
00:24:54,640 --> 00:24:56,880
so it's the apple standard actually that

609
00:24:56,880 --> 00:24:59,520
is kind of now it has been open so now

610
00:24:59,520 --> 00:25:02,400
it's kind of taking over so it might

611
00:25:02,400 --> 00:25:04,880
dash might disappear

612
00:25:04,880 --> 00:25:06,559
does that mean we don't will not have

613
00:25:06,559 --> 00:25:08,320
those attacks

614
00:25:08,320 --> 00:25:10,480
unfortunately no there are some works

615
00:25:10,480 --> 00:25:13,120
working on on hls that

616
00:25:13,120 --> 00:25:14,799
apple's protocol

617
00:25:14,799 --> 00:25:17,360
also the problem is really because

618
00:25:17,360 --> 00:25:19,919
videos if you want to code them and

619
00:25:19,919 --> 00:25:22,159
compress them you need to do something

620
00:25:22,159 --> 00:25:24,480
viable bit rate so you need to change

621
00:25:24,480 --> 00:25:27,360
the bit rate every second let's say so

622
00:25:27,360 --> 00:25:29,520
there is still a bit of

623
00:25:29,520 --> 00:25:31,360
inside videos

624
00:25:31,360 --> 00:25:34,080
except if somehow you will compress them

625
00:25:34,080 --> 00:25:36,720
in constant bit rate but that is not as

626
00:25:36,720 --> 00:25:40,720
efficient so it's always a balance

627
00:25:40,720 --> 00:25:43,360
okay uh thank you very much and a big

628
00:25:43,360 --> 00:25:45,520
round of applause

629
00:25:45,520 --> 00:25:45,810
[Applause]

630
00:25:45,810 --> 00:25:48,960
[Music]

