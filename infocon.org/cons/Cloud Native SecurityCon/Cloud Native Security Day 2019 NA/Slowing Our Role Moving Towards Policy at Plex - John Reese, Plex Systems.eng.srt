1
00:00:00,030 --> 00:00:03,419
all right thank you so much yeah my name

2
00:00:03,419 --> 00:00:05,190
is John Reese I'm gonna be talking to

3
00:00:05,190 --> 00:00:08,580
you about our company's approach to

4
00:00:08,580 --> 00:00:11,219
policy coming from a very roll heavy

5
00:00:11,219 --> 00:00:14,880
focus security model again name is John

6
00:00:14,880 --> 00:00:17,789
Reese work at plex the manufacturing

7
00:00:17,789 --> 00:00:20,699
cloud get that a lot we're not the media

8
00:00:20,699 --> 00:00:24,600
server we are actually a ERP system for

9
00:00:24,600 --> 00:00:26,910
manufacturers enterprise resource

10
00:00:26,910 --> 00:00:30,090
planning so we handle anything from the

11
00:00:30,090 --> 00:00:32,520
shop floor all the way to the CEO so

12
00:00:32,520 --> 00:00:34,890
thing shipping accounting their their HR

13
00:00:34,890 --> 00:00:36,899
system anything they need to do to run

14
00:00:36,899 --> 00:00:38,700
their business that's kind of our

15
00:00:38,700 --> 00:00:41,879
wheelhouse I also love the go

16
00:00:41,879 --> 00:00:44,430
programming language so if you love go

17
00:00:44,430 --> 00:00:45,930
and then we're already best of friends

18
00:00:45,930 --> 00:00:50,489
and we should hang out sometime so again

19
00:00:50,489 --> 00:00:53,539
this is really gonna be how we have

20
00:00:53,539 --> 00:00:55,890
approached security over the years the

21
00:00:55,890 --> 00:00:58,590
company's been around since like 1995 or

22
00:00:58,590 --> 00:01:02,370
so so little over 20 years and we've

23
00:01:02,370 --> 00:01:04,019
gone through a lot of growing pains

24
00:01:04,019 --> 00:01:06,450
going from different security models and

25
00:01:06,450 --> 00:01:09,330
to into where we are now so to do that

26
00:01:09,330 --> 00:01:11,220
I'm just going to kind of start where we

27
00:01:11,220 --> 00:01:13,500
started from relating to roles and

28
00:01:13,500 --> 00:01:16,140
security moving in to where we are today

29
00:01:16,140 --> 00:01:18,509
and kind of where our mindsets are and

30
00:01:18,509 --> 00:01:22,500
then where we really want to be and get

31
00:01:22,500 --> 00:01:26,790
to in terms of security so for some

32
00:01:26,790 --> 00:01:29,610
background in the beginning roles just

33
00:01:29,610 --> 00:01:31,229
controlled everything within the system

34
00:01:31,229 --> 00:01:35,689
so again we are a full solution for

35
00:01:35,689 --> 00:01:39,060
manufacturers and we built everything

36
00:01:39,060 --> 00:01:41,430
for them this includes again their their

37
00:01:41,430 --> 00:01:43,350
HR system their therein out system

38
00:01:43,350 --> 00:01:45,509
everything that they need to do they

39
00:01:45,509 --> 00:01:47,189
would log into our system and they would

40
00:01:47,189 --> 00:01:51,630
use us . this also means that early on

41
00:01:51,630 --> 00:01:55,189
we as a company also used everything

42
00:01:55,189 --> 00:01:57,990
within the system so maybe not the

43
00:01:57,990 --> 00:01:59,490
greatest idea because we're a software

44
00:01:59,490 --> 00:02:03,090
company not a manufacturing company but

45
00:02:03,090 --> 00:02:05,579
that also means that everything that you

46
00:02:05,579 --> 00:02:07,950
needed to do in that system was role

47
00:02:07,950 --> 00:02:11,400
based if you needed to log in to to

48
00:02:11,400 --> 00:02:13,710
check in if you needed to do any

49
00:02:13,710 --> 00:02:15,210
action with the system through is gonna

50
00:02:15,210 --> 00:02:17,280
be a role for that and honestly it

51
00:02:17,280 --> 00:02:19,740
looked a lot more like permissions more

52
00:02:19,740 --> 00:02:24,030
so than roles we had a lot of them and

53
00:02:24,030 --> 00:02:26,820
even again we put our deployment system

54
00:02:26,820 --> 00:02:28,890
in here we put everything you needed to

55
00:02:28,890 --> 00:02:34,350
do in the system and so in a way for us

56
00:02:34,350 --> 00:02:35,970
roles were way of assigning

57
00:02:35,970 --> 00:02:38,490
responsibilities if if you were given a

58
00:02:38,490 --> 00:02:40,710
role that was kind of your wheelhouse of

59
00:02:40,710 --> 00:02:43,830
what of what you had to do so so for

60
00:02:43,830 --> 00:02:46,470
example we had this idea of a module

61
00:02:46,470 --> 00:02:48,300
champion you can think of a module as

62
00:02:48,300 --> 00:02:50,340
just an area of the system right you

63
00:02:50,340 --> 00:02:53,130
have an accounting module champion they

64
00:02:53,130 --> 00:02:55,170
are responsible for the entire stack in

65
00:02:55,170 --> 00:02:57,960
that area and I pulled the definition

66
00:02:57,960 --> 00:03:00,180
from our internal wiki which again we

67
00:03:00,180 --> 00:03:03,060
also built and it's essentially saying

68
00:03:03,060 --> 00:03:05,460
it's an individual developer responsible

69
00:03:05,460 --> 00:03:08,370
for that module and so this means if a

70
00:03:08,370 --> 00:03:10,950
feature request came in that's on you if

71
00:03:10,950 --> 00:03:14,910
something went down that's on you and so

72
00:03:14,910 --> 00:03:18,300
this was a pretty good approach to start

73
00:03:18,300 --> 00:03:20,640
but as we grew is just you can't handle

74
00:03:20,640 --> 00:03:24,270
all that information but there's a

75
00:03:24,270 --> 00:03:25,710
slight problem with that is that we also

76
00:03:25,710 --> 00:03:28,550
had this idea of a standard member and

77
00:03:28,550 --> 00:03:31,260
they were responsible for our language

78
00:03:31,260 --> 00:03:32,790
standards you can think of this as where

79
00:03:32,790 --> 00:03:35,100
the braces go in JavaScript or tabs or

80
00:03:35,100 --> 00:03:37,530
spaces but they were also responsible

81
00:03:37,530 --> 00:03:39,840
for deploying restricted source code and

82
00:03:39,840 --> 00:03:42,090
we defined restricted source code as

83
00:03:42,090 --> 00:03:45,390
really any code that we felt could

84
00:03:45,390 --> 00:03:47,760
negatively impact the system in a large

85
00:03:47,760 --> 00:03:51,660
way so for example the the menu system

86
00:03:51,660 --> 00:03:54,450
that was a module and a menu is pretty

87
00:03:54,450 --> 00:03:56,250
much going to be everywhere throughout

88
00:03:56,250 --> 00:03:57,810
your system it's how your users navigate

89
00:03:57,810 --> 00:04:00,020
so that would be a restricted

90
00:04:00,020 --> 00:04:02,430
restriction module that a standard

91
00:04:02,430 --> 00:04:04,470
member would have to deploy because they

92
00:04:04,470 --> 00:04:08,460
know how to deploy restricted code but

93
00:04:08,460 --> 00:04:11,070
the problem with this again we have this

94
00:04:11,070 --> 00:04:14,460
very clear definition of roles is that

95
00:04:14,460 --> 00:04:16,798
we had this situation where someone who

96
00:04:16,798 --> 00:04:19,230
owns this system who knows everything

97
00:04:19,230 --> 00:04:22,470
about it can actually deploy the change

98
00:04:22,470 --> 00:04:24,870
so you have this guy on the standards

99
00:04:24,870 --> 00:04:26,550
team who doesn't know anything about the

100
00:04:26,550 --> 00:04:27,240
change itself

101
00:04:27,240 --> 00:04:28,710
doesn't know anything about why the

102
00:04:28,710 --> 00:04:30,449
feature came in but it's his

103
00:04:30,449 --> 00:04:33,000
responsibility to deploy restricted code

104
00:04:33,000 --> 00:04:35,130
because again he knows how to deploy a

105
00:04:35,130 --> 00:04:40,530
restricted code rolls were often a

106
00:04:40,530 --> 00:04:43,080
solution for us to prevent problems from

107
00:04:43,080 --> 00:04:46,770
happening again so to put simply if you

108
00:04:46,770 --> 00:04:48,990
have an employee who does a thing and

109
00:04:48,990 --> 00:04:52,440
that thing didn't go right we would

110
00:04:52,440 --> 00:04:55,250
generally create a thing do a role and

111
00:04:55,250 --> 00:04:57,419
it seems a little extreme but that's

112
00:04:57,419 --> 00:05:01,319
kind of how things evolved if we would

113
00:05:01,319 --> 00:05:03,419
give employees a lot of privileges

114
00:05:03,419 --> 00:05:04,560
because we trust them

115
00:05:04,560 --> 00:05:08,520
and in the event that they didn't do

116
00:05:08,520 --> 00:05:10,710
something right maybe it's their own

117
00:05:10,710 --> 00:05:12,840
fault or not we would all get into a

118
00:05:12,840 --> 00:05:14,580
room and would be like hey how can we

119
00:05:14,580 --> 00:05:15,930
solve this problem how can we make sure

120
00:05:15,930 --> 00:05:17,849
that this thing doesn't happen again and

121
00:05:17,849 --> 00:05:20,250
you would we'd all be like boom that guy

122
00:05:20,250 --> 00:05:21,750
like he's in that he is now the thing

123
00:05:21,750 --> 00:05:23,520
doer it is your responsibility to make

124
00:05:23,520 --> 00:05:25,409
sure that thing doesn't ever happen

125
00:05:25,409 --> 00:05:25,889
again

126
00:05:25,889 --> 00:05:31,340
and so this created a lot of problems

127
00:05:31,340 --> 00:05:33,599
again as the company grew and grew and

128
00:05:33,599 --> 00:05:35,699
grew where simple tasks would just

129
00:05:35,699 --> 00:05:40,409
involve multiple multiple people so true

130
00:05:40,409 --> 00:05:43,889
story we have a developer who who simply

131
00:05:43,889 --> 00:05:45,990
just they asked the the network engineer

132
00:05:45,990 --> 00:05:48,509
for a new domain this is the internal

133
00:05:48,509 --> 00:05:50,280
domain it's gonna be with inside our

134
00:05:50,280 --> 00:05:53,099
four walls he's just asking hey I need

135
00:05:53,099 --> 00:05:56,669
to get this made we are using Azure so

136
00:05:56,669 --> 00:05:58,050
in this case he needs to create a

137
00:05:58,050 --> 00:06:00,060
resource group resource groups in Azure

138
00:06:00,060 --> 00:06:01,530
are kind of where you put all the

139
00:06:01,530 --> 00:06:03,330
resources it's responsible for for

140
00:06:03,330 --> 00:06:04,620
billing and you can put some more

141
00:06:04,620 --> 00:06:06,360
restrictions on it but because a

142
00:06:06,360 --> 00:06:08,340
resource group isn't a networking

143
00:06:08,340 --> 00:06:10,680
concern the network engineer cannot

144
00:06:10,680 --> 00:06:13,349
create resource groups so he has to go

145
00:06:13,349 --> 00:06:15,150
over to the system engineer and be like

146
00:06:15,150 --> 00:06:17,280
okay yeah sure yep I'm gonna create one

147
00:06:17,280 --> 00:06:20,520
for you comes back all set

148
00:06:20,520 --> 00:06:23,729
realized hey this is a dev domain HTTP

149
00:06:23,729 --> 00:06:25,770
like can I make a cert so he asked the

150
00:06:25,770 --> 00:06:27,389
engineering managers who's responsible

151
00:06:27,389 --> 00:06:29,009
for approving these types of requests

152
00:06:29,009 --> 00:06:33,900
he's like yeah sure I guess cool domain

153
00:06:33,900 --> 00:06:35,400
gets added and then this comes back to

154
00:06:35,400 --> 00:06:39,580
me the developer and so

155
00:06:39,580 --> 00:06:42,520
what to realize here is that you know

156
00:06:42,520 --> 00:06:46,930
all these steps take time maybe you'll

157
00:06:46,930 --> 00:06:48,610
get lucky and it's instant if they just

158
00:06:48,610 --> 00:06:51,030
got nothing going on I could take a day

159
00:06:51,030 --> 00:06:53,950
it could be a week if that individual in

160
00:06:53,950 --> 00:06:56,530
that role just isn't there so a very

161
00:06:56,530 --> 00:06:57,670
simple task me to put in perspective

162
00:06:57,670 --> 00:06:59,860
this should have taken a couple minutes

163
00:06:59,860 --> 00:07:01,690
to go with the log into Azure add some

164
00:07:01,690 --> 00:07:04,150
resources and when we're good to go it

165
00:07:04,150 --> 00:07:06,940
took like two weeks which is again it's

166
00:07:06,940 --> 00:07:13,720
a very sad story and so so one thing but

167
00:07:13,720 --> 00:07:16,540
I'd really like to to kind of highlight

168
00:07:16,540 --> 00:07:18,730
especially to to newer devs or just when

169
00:07:18,730 --> 00:07:20,440
people are complaining at the company or

170
00:07:20,440 --> 00:07:22,180
even to everyone else right is like

171
00:07:22,180 --> 00:07:25,210
these were probably the right choices at

172
00:07:25,210 --> 00:07:26,950
the time I mean again the company's been

173
00:07:26,950 --> 00:07:30,370
around for a really long time I have a

174
00:07:30,370 --> 00:07:32,290
paycheck because of these decisions when

175
00:07:32,290 --> 00:07:33,700
we are thriving because of these

176
00:07:33,700 --> 00:07:36,010
decisions but you know there comes a

177
00:07:36,010 --> 00:07:37,330
time where you actually do need to

178
00:07:37,330 --> 00:07:39,370
change and need to evolve so when you

179
00:07:39,370 --> 00:07:40,810
when you're working on like a legacy

180
00:07:40,810 --> 00:07:42,460
system you're like how did they ever

181
00:07:42,460 --> 00:07:44,350
make these decisions why would they ever

182
00:07:44,350 --> 00:07:46,780
ever do this I mean there's a lot of

183
00:07:46,780 --> 00:07:50,410
factors back in the day that create

184
00:07:50,410 --> 00:07:54,280
these types of decisions so that's kind

185
00:07:54,280 --> 00:07:56,860
of a a look into what we what we did

186
00:07:56,860 --> 00:07:59,650
back then you know still a little bit

187
00:07:59,650 --> 00:08:01,690
today but for the most part we have a

188
00:08:01,690 --> 00:08:05,020
very different mindset so at the heart

189
00:08:05,020 --> 00:08:08,130
of it it's automatic approvals through

190
00:08:08,130 --> 00:08:12,010
policy so think of it as we had that

191
00:08:12,010 --> 00:08:13,540
previous slide where we have to go

192
00:08:13,540 --> 00:08:15,190
through every single individual step and

193
00:08:15,190 --> 00:08:19,660
those are pretty much all approvals but

194
00:08:19,660 --> 00:08:22,420
we do this because policy really

195
00:08:22,420 --> 00:08:24,880
enforces what we actually care about and

196
00:08:24,880 --> 00:08:28,660
this was really I feel a a green light a

197
00:08:28,660 --> 00:08:30,910
a light bulb for us when we really

198
00:08:30,910 --> 00:08:32,620
started looking into policy as to how to

199
00:08:32,620 --> 00:08:35,919
secure our resources where you don't

200
00:08:35,919 --> 00:08:38,799
really necessarily need an individual to

201
00:08:38,799 --> 00:08:40,990
to stand these concerns up if you like a

202
00:08:40,990 --> 00:08:44,169
virtual machine or a repository or any

203
00:08:44,169 --> 00:08:46,870
any sort of thing that you might want to

204
00:08:46,870 --> 00:08:49,780
request when you ask for those the

205
00:08:49,780 --> 00:08:51,370
person in charge of that is just going

206
00:08:51,370 --> 00:08:52,750
to make sure that the

207
00:08:52,750 --> 00:08:54,550
the constraints are within reason you're

208
00:08:54,550 --> 00:08:56,920
not asking for a ton of resources maybe

209
00:08:56,920 --> 00:08:59,079
it's name correctly you know whatever

210
00:08:59,079 --> 00:09:01,509
they care about in terms of like their

211
00:09:01,509 --> 00:09:03,009
domain that's what they're looking for

212
00:09:03,009 --> 00:09:04,959
and if you meet all the criteria they're

213
00:09:04,959 --> 00:09:07,019
just probably gonna do it for you

214
00:09:07,019 --> 00:09:12,220
so to kind of tackle this problem it all

215
00:09:12,220 --> 00:09:14,649
starts with OPA for us open policy agent

216
00:09:14,649 --> 00:09:16,750
if you're not familiar you can really

217
00:09:16,750 --> 00:09:19,660
think of it as a yes/no engine for the

218
00:09:19,660 --> 00:09:22,629
most part you give it a you give you

219
00:09:22,629 --> 00:09:25,240
some data and then you have red go files

220
00:09:25,240 --> 00:09:28,240
which are your policies and then given

221
00:09:28,240 --> 00:09:30,970
those those to it will say can you do

222
00:09:30,970 --> 00:09:35,649
this or can you not do this and so as an

223
00:09:35,649 --> 00:09:37,980
example this is a really simple

224
00:09:37,980 --> 00:09:40,329
regulatory to kind of show you how a

225
00:09:40,329 --> 00:09:43,329
policy might look this is a kubernetes

226
00:09:43,329 --> 00:09:46,269
manifest for for a namespace and this is

227
00:09:46,269 --> 00:09:49,420
saying if input kind is namespace and

228
00:09:49,420 --> 00:09:53,199
there does not exist a labels field

229
00:09:53,199 --> 00:09:55,959
vanish it should it should deny and say

230
00:09:55,959 --> 00:09:58,839
namespaces must have labels so one of

231
00:09:58,839 --> 00:10:00,279
the really powerful things about about

232
00:10:00,279 --> 00:10:01,589
reg o is that it doesn't necessarily

233
00:10:01,589 --> 00:10:05,139
care about the the structure of the data

234
00:10:05,139 --> 00:10:06,459
coming in that's something that you

235
00:10:06,459 --> 00:10:09,069
define so input here is in blue because

236
00:10:09,069 --> 00:10:11,559
that is a key word it's the input to reg

237
00:10:11,559 --> 00:10:14,199
oh but you know kind is just something

238
00:10:14,199 --> 00:10:17,079
that that we set because that is what is

239
00:10:17,079 --> 00:10:19,149
in a community's manifest you have kind

240
00:10:19,149 --> 00:10:20,709
operations but you also have metadata

241
00:10:20,709 --> 00:10:22,809
labels but anything to the right can

242
00:10:22,809 --> 00:10:26,410
really be anything and so in our case of

243
00:10:26,410 --> 00:10:28,600
creating a namespace you can say here's

244
00:10:28,600 --> 00:10:31,089
this manifest it's a namespace does it

245
00:10:31,089 --> 00:10:37,300
have a label yes or no and so two to use

246
00:10:37,300 --> 00:10:39,100
all these tools together we use

247
00:10:39,100 --> 00:10:41,459
something called called comp test and

248
00:10:41,459 --> 00:10:45,100
the the power of this tool for us when

249
00:10:45,100 --> 00:10:46,990
we were introduced to it was the fact

250
00:10:46,990 --> 00:10:50,290
that it supports just a wide arrange of

251
00:10:50,290 --> 00:10:52,509
file format so to really kind of

252
00:10:52,509 --> 00:10:55,300
showcase what can happen with files you

253
00:10:55,300 --> 00:10:59,230
have yam all JSON I and I and docker

254
00:10:59,230 --> 00:11:01,689
files for example and so we can take any

255
00:11:01,689 --> 00:11:03,730
sort of structured data where we know

256
00:11:03,730 --> 00:11:05,019
what the data is going to look like

257
00:11:05,019 --> 00:11:06,780
throw it at com

258
00:11:06,780 --> 00:11:09,720
contest has our policies in it and it

259
00:11:09,720 --> 00:11:13,230
can tell us does this file violate our

260
00:11:13,230 --> 00:11:17,010
policies so a really simple pipeline

261
00:11:17,010 --> 00:11:19,260
could be that a developer is going to

262
00:11:19,260 --> 00:11:21,150
submit a pull request and that pull

263
00:11:21,150 --> 00:11:22,350
request is going to contain their

264
00:11:22,350 --> 00:11:24,090
terraform it's gonna contain their

265
00:11:24,090 --> 00:11:27,600
kubernetes resources and then when they

266
00:11:27,600 --> 00:11:29,760
submit it contest itself will validate

267
00:11:29,760 --> 00:11:33,690
the PR the key thing to note here and to

268
00:11:33,690 --> 00:11:35,490
really highlight again maintain errs

269
00:11:35,490 --> 00:11:37,220
define their policies because again

270
00:11:37,220 --> 00:11:40,320
policies are really just a brain dump

271
00:11:40,320 --> 00:11:42,720
for what the maintainer wants the

272
00:11:42,720 --> 00:11:45,030
maintainer the person who might have had

273
00:11:45,030 --> 00:11:47,700
that role is the person creating these

274
00:11:47,700 --> 00:11:50,730
policies so as a developer I contribute

275
00:11:50,730 --> 00:11:53,100
to your to your repository I must abide

276
00:11:53,100 --> 00:11:56,130
by your policies and then if it

277
00:11:56,130 --> 00:11:57,780
validates then you're just you're off to

278
00:11:57,780 --> 00:12:00,600
the races because if you are within spec

279
00:12:00,600 --> 00:12:02,220
everything is named correctly you have

280
00:12:02,220 --> 00:12:04,380
all the right labels etc it's just going

281
00:12:04,380 --> 00:12:06,990
to go off and do it in this case now a

282
00:12:06,990 --> 00:12:08,850
lot of our a lot of our implementations

283
00:12:08,850 --> 00:12:10,380
are using terraform so we can just say

284
00:12:10,380 --> 00:12:12,240
hey this is valid terraform do a

285
00:12:12,240 --> 00:12:15,450
terraform apply good to go

286
00:12:15,450 --> 00:12:17,250
so again to really showcase some of the

287
00:12:17,250 --> 00:12:18,780
other use cases that you have for this

288
00:12:18,780 --> 00:12:22,470
that we do talked a lot about terraform

289
00:12:22,470 --> 00:12:24,690
we have a means for if a developer wants

290
00:12:24,690 --> 00:12:27,480
a repository and azure devops we don't

291
00:12:27,480 --> 00:12:30,030
have an azure devops guy creating

292
00:12:30,030 --> 00:12:32,910
repositories anymore we used to but now

293
00:12:32,910 --> 00:12:36,240
that's all automated where the the

294
00:12:36,240 --> 00:12:39,510
DevOps guys wrote a terraform source

295
00:12:39,510 --> 00:12:42,510
module so they define how they want

296
00:12:42,510 --> 00:12:44,670
their repositories to look and so when

297
00:12:44,670 --> 00:12:46,170
you request a new one we just have to

298
00:12:46,170 --> 00:12:48,600
make sure to say hey are you using the

299
00:12:48,600 --> 00:12:49,710
Plex

300
00:12:49,710 --> 00:12:51,990
source module for this for this

301
00:12:51,990 --> 00:12:55,620
repository the the other use cases again

302
00:12:55,620 --> 00:12:57,090
because it doesn't really matter what

303
00:12:57,090 --> 00:12:57,690
the input is

304
00:12:57,690 --> 00:12:59,880
we have kubernetes manifests that say

305
00:12:59,880 --> 00:13:02,490
you have to have these labels and also

306
00:13:02,490 --> 00:13:04,560
again docker files you can make sure

307
00:13:04,560 --> 00:13:07,800
that it has a label for origin some

308
00:13:07,800 --> 00:13:09,330
other examples could be the docker file

309
00:13:09,330 --> 00:13:11,490
has to come from blessed images so if

310
00:13:11,490 --> 00:13:14,550
you at your company have only images

311
00:13:14,550 --> 00:13:17,730
that you allow your employees to use you

312
00:13:17,730 --> 00:13:19,680
can make sure that like the from tag is

313
00:13:19,680 --> 00:13:20,550
actually from

314
00:13:20,550 --> 00:13:23,730
list of approved images super super

315
00:13:23,730 --> 00:13:25,950
powerful if you're interested in

316
00:13:25,950 --> 00:13:28,500
learning more about the tool itself this

317
00:13:28,500 --> 00:13:31,200
talk just like blew my mind when it came

318
00:13:31,200 --> 00:13:34,080
to came to policy aging and comp test

319
00:13:34,080 --> 00:13:37,070
because we were working through this

320
00:13:37,070 --> 00:13:39,870
just at this moment when I believe that

321
00:13:39,870 --> 00:13:41,519
this talk came out where we were we were

322
00:13:41,519 --> 00:13:44,010
thinking we knew we wanted to apply

323
00:13:44,010 --> 00:13:45,660
policy especially at the at the

324
00:13:45,660 --> 00:13:47,790
kubernetes level we knew that we wanted

325
00:13:47,790 --> 00:13:50,279
to make sure that our policies are our

326
00:13:50,279 --> 00:13:53,519
llamó files had specified labels on them

327
00:13:53,519 --> 00:13:57,450
but we were really afraid of the fact

328
00:13:57,450 --> 00:14:00,630
that how would we put this to the left

329
00:14:00,630 --> 00:14:02,160
shifted to the left for developers

330
00:14:02,160 --> 00:14:04,500
because we didn't really like the idea

331
00:14:04,500 --> 00:14:07,230
of developers writing writing code

332
00:14:07,230 --> 00:14:08,820
writing manifest and then they didn't

333
00:14:08,820 --> 00:14:10,290
know it was actually going to violate

334
00:14:10,290 --> 00:14:13,110
spec until it actually went to the

335
00:14:13,110 --> 00:14:15,300
cluster and we were really afraid of

336
00:14:15,300 --> 00:14:17,700
that but calm test again it can be run

337
00:14:17,700 --> 00:14:19,230
on your local because it's just a binary

338
00:14:19,230 --> 00:14:21,980
it can be running your CI CD pipelines

339
00:14:21,980 --> 00:14:25,649
and then once it's deployed that's kind

340
00:14:25,649 --> 00:14:27,149
of where the wheelhouse for for comp

341
00:14:27,149 --> 00:14:31,770
test ends the other approach we are

342
00:14:31,770 --> 00:14:34,110
taking is not only the creation of

343
00:14:34,110 --> 00:14:37,020
resources but also the configuration of

344
00:14:37,020 --> 00:14:38,220
those resources once they're already

345
00:14:38,220 --> 00:14:41,760
created so this is actually pretty

346
00:14:41,760 --> 00:14:44,810
pretty new for us we are doing

347
00:14:44,810 --> 00:14:46,220
repository

348
00:14:46,220 --> 00:14:49,500
policies through a policies that yamo

349
00:14:49,500 --> 00:14:53,370
file where we can say in the root of

350
00:14:53,370 --> 00:14:55,320
your repository these are the things

351
00:14:55,320 --> 00:14:57,450
that I want set so you don't really need

352
00:14:57,450 --> 00:14:59,610
any sort of entry 'extra permission

353
00:14:59,610 --> 00:15:01,079
aside from being able to contribute to

354
00:15:01,079 --> 00:15:04,440
your repository and once you make these

355
00:15:04,440 --> 00:15:07,020
changes we have an azure function that

356
00:15:07,020 --> 00:15:09,779
was basically monitoring for pushes to

357
00:15:09,779 --> 00:15:12,180
policies yeah Mille it will notice say

358
00:15:12,180 --> 00:15:14,310
hey did did anything change and if it

359
00:15:14,310 --> 00:15:18,420
did validate against our ops team's set

360
00:15:18,420 --> 00:15:21,630
policies even if it doesn't then you can

361
00:15:21,630 --> 00:15:23,430
go ahead and you can modify that

362
00:15:23,430 --> 00:15:25,680
repository so it's end-to-end

363
00:15:25,680 --> 00:15:27,570
essentially of you can create this

364
00:15:27,570 --> 00:15:29,370
repository and then once it's up and

365
00:15:29,370 --> 00:15:31,529
running you can still make changes to it

366
00:15:31,529 --> 00:15:33,990
you don't need to say hey yes we we

367
00:15:33,990 --> 00:15:35,490
this repository but now we need to make

368
00:15:35,490 --> 00:15:37,350
a change to it can you update this value

369
00:15:37,350 --> 00:15:39,630
for me we can all do it through here

370
00:15:39,630 --> 00:15:41,900
because again we used to have to say hey

371
00:15:41,900 --> 00:15:44,640
we used to have two approvers but now we

372
00:15:44,640 --> 00:15:46,170
want three and that's gonna be it no

373
00:15:46,170 --> 00:15:47,730
suite so we use service now so yeah

374
00:15:47,730 --> 00:15:49,890
service now ticket like update this

375
00:15:49,890 --> 00:15:51,390
number from 2 to 3 that's just not a

376
00:15:51,390 --> 00:15:55,710
good use of someone's time the the last

377
00:15:55,710 --> 00:15:58,340
thing for for policy that we're really

378
00:15:58,340 --> 00:16:01,910
starting to get into is is a tool called

379
00:16:01,910 --> 00:16:07,230
gatekeeper and this is this essentially

380
00:16:07,230 --> 00:16:11,460
picks up where comp tests stopped so

381
00:16:11,460 --> 00:16:13,770
again we use com test for everything for

382
00:16:13,770 --> 00:16:16,860
like local and CIC d and then gatekeeper

383
00:16:16,860 --> 00:16:18,660
is responsible for enforcing those like

384
00:16:18,660 --> 00:16:20,490
in the cluster themselves this is what

385
00:16:20,490 --> 00:16:23,460
we were going to use for the actual

386
00:16:23,460 --> 00:16:25,800
application of the policies and we

387
00:16:25,800 --> 00:16:27,180
didn't know what to do with the the CI

388
00:16:27,180 --> 00:16:31,100
CD part until contest but this is

389
00:16:31,100 --> 00:16:33,480
allowing you to use the same policies

390
00:16:33,480 --> 00:16:36,690
because both tools are built off OPA and

391
00:16:36,690 --> 00:16:38,880
built off reco again reco doesn't really

392
00:16:38,880 --> 00:16:41,130
care what the data is

393
00:16:41,130 --> 00:16:43,440
OPA just reads it so you can shut any

394
00:16:43,440 --> 00:16:44,880
kind of data and you can use the same

395
00:16:44,880 --> 00:16:47,970
policies wherever because again policies

396
00:16:47,970 --> 00:16:49,380
might change from an environment

397
00:16:49,380 --> 00:16:50,760
environment and you can configure that

398
00:16:50,760 --> 00:16:53,190
but for the most part if you say that

399
00:16:53,190 --> 00:16:55,380
you don't want a late or you need a

400
00:16:55,380 --> 00:16:58,230
label somewhere you shouldn't have to

401
00:16:58,230 --> 00:17:00,180
rewrite that policy for for everything

402
00:17:00,180 --> 00:17:01,740
you shouldnt have to deploy this to

403
00:17:01,740 --> 00:17:03,360
gatekeeper and deploy this to comp test

404
00:17:03,360 --> 00:17:06,150
you can have a central policy location

405
00:17:06,150 --> 00:17:08,550
that has that defines all of your

406
00:17:08,550 --> 00:17:13,260
policies in kind of to the point of like

407
00:17:13,260 --> 00:17:14,459
it doesn't make sense for someone to do

408
00:17:14,459 --> 00:17:17,550
this the the thing that really resonates

409
00:17:17,550 --> 00:17:21,240
for me is that a bit another big push of

410
00:17:21,240 --> 00:17:23,790
this again we want employees to innovate

411
00:17:23,790 --> 00:17:25,230
and not just approve request right we

412
00:17:25,230 --> 00:17:28,290
these individuals are incredibly smart

413
00:17:28,290 --> 00:17:32,040
we we pay them well and we shouldn't

414
00:17:32,040 --> 00:17:34,650
have to take away their time just to

415
00:17:34,650 --> 00:17:36,630
approve request right there they're

416
00:17:36,630 --> 00:17:39,300
working on highly complex things they

417
00:17:39,300 --> 00:17:41,820
they see a list come in and in email

418
00:17:41,820 --> 00:17:43,500
saying hey you need to approve this they

419
00:17:43,500 --> 00:17:45,180
probably don't really want to they want

420
00:17:45,180 --> 00:17:47,040
to be off doing this thing but if they

421
00:17:47,040 --> 00:17:47,920
don't approve it it's

422
00:17:47,920 --> 00:17:50,530
everybody down so with this type of

423
00:17:50,530 --> 00:17:52,600
approach we can just make it so we

424
00:17:52,600 --> 00:17:54,670
remove that load from them and they're

425
00:17:54,670 --> 00:17:57,580
able to do what they actually want to do

426
00:17:57,580 --> 00:18:00,970
I like to call I'll call this out too

427
00:18:00,970 --> 00:18:03,850
because again it's not like rolls are

428
00:18:03,850 --> 00:18:05,500
dead and Paul and policies everything

429
00:18:05,500 --> 00:18:07,360
for for us it was really just a

430
00:18:07,360 --> 00:18:10,770
different way of thinking about security

431
00:18:10,770 --> 00:18:13,690
again early early days was we would

432
00:18:13,690 --> 00:18:15,730
implement a feature and we would say

433
00:18:15,730 --> 00:18:18,070
okay well this is new now we have to add

434
00:18:18,070 --> 00:18:19,780
some role for that you know the the

435
00:18:19,780 --> 00:18:21,220
thing doer this thing has to be

436
00:18:21,220 --> 00:18:23,680
protected and who's gonna do this and

437
00:18:23,680 --> 00:18:25,480
just everything was very locked down

438
00:18:25,480 --> 00:18:26,530
from the get-go

439
00:18:26,530 --> 00:18:29,410
whereas now we take very much the

440
00:18:29,410 --> 00:18:32,920
approach of why can't we open this up

441
00:18:32,920 --> 00:18:34,660
why can't we open this up to everybody

442
00:18:34,660 --> 00:18:36,930
what are the things that we actually

443
00:18:36,930 --> 00:18:41,080
care about and then take it from there

444
00:18:41,080 --> 00:18:44,620
and again policy can use roles I mean

445
00:18:44,620 --> 00:18:45,910
it's it could be very possible that you

446
00:18:45,910 --> 00:18:48,040
have someone who is a kubernetes

447
00:18:48,040 --> 00:18:50,290
operator and that's a role and you have

448
00:18:50,290 --> 00:18:52,720
a policy saying that you must be in the

449
00:18:52,720 --> 00:18:54,460
kubernetes operator role and you must

450
00:18:54,460 --> 00:18:57,610
have have Eastfield on your gamal they

451
00:18:57,610 --> 00:19:02,500
can work together so so for going

452
00:19:02,500 --> 00:19:05,530
forward um then the easy bit of it is

453
00:19:05,530 --> 00:19:07,240
that we just really want to continue

454
00:19:07,240 --> 00:19:09,790
adopting policy we want to make sure

455
00:19:09,790 --> 00:19:13,870
that that we are trying to remove manual

456
00:19:13,870 --> 00:19:15,580
sign-off and just implement policy where

457
00:19:15,580 --> 00:19:18,400
we can for me the the more interesting

458
00:19:18,400 --> 00:19:19,600
part and where we're going to be

459
00:19:19,600 --> 00:19:21,400
spending most of our time I believe

460
00:19:21,400 --> 00:19:23,260
going forward is actually moving those

461
00:19:23,260 --> 00:19:26,260
policies into the application level and

462
00:19:26,260 --> 00:19:28,660
so what I what I mean by that is not

463
00:19:28,660 --> 00:19:30,400
only do we have this role problem

464
00:19:30,400 --> 00:19:33,580
internally here at our company but since

465
00:19:33,580 --> 00:19:35,950
both systems are pretty much the same

466
00:19:35,950 --> 00:19:38,590
that our customers also feel this like

467
00:19:38,590 --> 00:19:41,110
they have a lot of roles that they have

468
00:19:41,110 --> 00:19:43,990
to manage because our system is meant to

469
00:19:43,990 --> 00:19:45,730
run their business and every business

470
00:19:45,730 --> 00:19:47,500
has different policies different

471
00:19:47,500 --> 00:19:50,020
security rules and so we give them the

472
00:19:50,020 --> 00:19:53,590
ability to to define how their business

473
00:19:53,590 --> 00:19:56,050
works but really only we have to do that

474
00:19:56,050 --> 00:19:58,020
is to say hey like you can create roles

475
00:19:58,020 --> 00:20:00,400
and then we have to check all those in

476
00:20:00,400 --> 00:20:01,600
our systems so it

477
00:20:01,600 --> 00:20:04,620
be really really cool if we can say

478
00:20:04,620 --> 00:20:07,980
these are your policies you can kind of

479
00:20:07,980 --> 00:20:10,180
define those how you want them to be and

480
00:20:10,180 --> 00:20:13,030
maybe we could even set our own global

481
00:20:13,030 --> 00:20:15,270
policies if you will of like this is how

482
00:20:15,270 --> 00:20:17,650
typically manufacturers solve this

483
00:20:17,650 --> 00:20:19,180
problem but if you want to make

484
00:20:19,180 --> 00:20:21,010
modifications to it then you're more

485
00:20:21,010 --> 00:20:22,630
than welcome to to write your own

486
00:20:22,630 --> 00:20:24,370
policies and get them out of this this

487
00:20:24,370 --> 00:20:30,880
very very roll heavy world so that's all

488
00:20:30,880 --> 00:20:34,210
I had these are all be the links to the

489
00:20:34,210 --> 00:20:37,540
tooling that I introduced OPA contest

490
00:20:37,540 --> 00:20:39,700
gatekeeper and then Garris talk on

491
00:20:39,700 --> 00:20:42,730
contest thank you so much I'm gonna be

492
00:20:42,730 --> 00:20:43,780
here all week

493
00:20:43,780 --> 00:20:46,300
we have time for questions now otherwise

494
00:20:46,300 --> 00:20:50,250
we do okay all right

495
00:20:50,250 --> 00:20:53,380
how do you how do you address like

496
00:20:53,380 --> 00:20:56,610
emergence for example emergencies and

497
00:20:56,610 --> 00:21:03,100
within the people needing to make like a

498
00:21:03,100 --> 00:21:07,110
manufacturer hey something updated tons

499
00:21:07,110 --> 00:21:13,810
is it like an Esso something you're

500
00:21:13,810 --> 00:21:15,550
cutting out a lot really sorry oh I'm

501
00:21:15,550 --> 00:21:15,910
sorry

502
00:21:15,910 --> 00:21:17,680
how do you how do you identify how do

503
00:21:17,680 --> 00:21:19,140
you adjust for like an emergency

504
00:21:19,140 --> 00:21:22,270
something that wouldn't necessarily fit

505
00:21:22,270 --> 00:21:26,200
like an SOP style policy okay how

506
00:21:26,200 --> 00:21:29,470
quickly adjust for those those

507
00:21:29,470 --> 00:21:32,080
emergencies changes so like if you need

508
00:21:32,080 --> 00:21:33,520
to make a change there like violate

509
00:21:33,520 --> 00:21:36,010
policy yes um well yeah I mean there's

510
00:21:36,010 --> 00:21:37,930
obviously always going to be like we

511
00:21:37,930 --> 00:21:39,640
overrides I mean the we get this is our

512
00:21:39,640 --> 00:21:42,280
this is our typical CI CD pipeline the

513
00:21:42,280 --> 00:21:44,860
individuals in these roles still have

514
00:21:44,860 --> 00:21:46,120
full full access

515
00:21:46,120 --> 00:21:48,640
again the so much of it again is the

516
00:21:48,640 --> 00:21:50,770
maintainer z' defining their policies so

517
00:21:50,770 --> 00:21:52,680
if you essentially if you were a

518
00:21:52,680 --> 00:21:54,700
contributor someone who is trying to

519
00:21:54,700 --> 00:21:56,350
contribute to the repository well then

520
00:21:56,350 --> 00:21:58,720
just its policy full stop but you as a

521
00:21:58,720 --> 00:22:00,850
maintainer you as someone who

522
00:22:00,850 --> 00:22:03,760
as you know you can push the master you

523
00:22:03,760 --> 00:22:05,380
will still have those permissions but

524
00:22:05,380 --> 00:22:06,850
anything came up like you still had the

525
00:22:06,850 --> 00:22:09,550
ability to violate policy there's

526
00:22:09,550 --> 00:22:10,750
actually not a really cool thing about

527
00:22:10,750 --> 00:22:13,360
about gatekeeper lis specifically is

528
00:22:13,360 --> 00:22:14,920
that in even the previous talks and

529
00:22:14,920 --> 00:22:16,780
continues compliance that if that ever

530
00:22:16,780 --> 00:22:19,180
happens we are actually looking into

531
00:22:19,180 --> 00:22:21,100
ways of running continuous compliance

532
00:22:21,100 --> 00:22:23,230
and making sure that no one did just go

533
00:22:23,230 --> 00:22:25,600
run cube cuddle add some things and

534
00:22:25,600 --> 00:22:27,970
change configurations manually because

535
00:22:27,970 --> 00:22:29,790
you want to be aware of those of those

536
00:22:29,790 --> 00:22:32,410
changes but but yeah for the most part

537
00:22:32,410 --> 00:22:33,640
yet they still have permission to do

538
00:22:33,640 --> 00:22:35,790
that

539
00:22:45,840 --> 00:22:49,320
how did you go about adding the new

540
00:22:49,320 --> 00:22:57,000
requirement now that I regel itself new

541
00:22:57,000 --> 00:23:00,750
learnings adding that low how did that

542
00:23:00,750 --> 00:23:07,260
slowly out yeah so I mean for for us it

543
00:23:07,260 --> 00:23:10,130
was I mean it was very slow a few people

544
00:23:10,130 --> 00:23:12,930
it was definitely not an overnight thing

545
00:23:12,930 --> 00:23:15,330
I mean these are these are approaches

546
00:23:15,330 --> 00:23:16,950
that you can take at a team by team

547
00:23:16,950 --> 00:23:18,750
level or even like a repository by

548
00:23:18,750 --> 00:23:21,750
repository level so so for example the

549
00:23:21,750 --> 00:23:23,370
the first thing that we ever did was

550
00:23:23,370 --> 00:23:26,040
just a policy around our docker file

551
00:23:26,040 --> 00:23:28,020
because we have a we have a policy that

552
00:23:28,020 --> 00:23:30,030
docker files must have an Origin

553
00:23:30,030 --> 00:23:33,510
repository gen label and so the owners

554
00:23:33,510 --> 00:23:35,460
of that repository said okay I'm gonna

555
00:23:35,460 --> 00:23:37,920
add comp tests into my CI CD pipeline

556
00:23:37,920 --> 00:23:39,840
I'm gonna write a policy folder that

557
00:23:39,840 --> 00:23:42,480
says that and we're good right and then

558
00:23:42,480 --> 00:23:44,790
that just kind of naturally evolved and

559
00:23:44,790 --> 00:23:47,820
grows throughout the system and then

560
00:23:47,820 --> 00:23:50,310
even now I mean it's like we are as more

561
00:23:50,310 --> 00:23:52,230
and more pot repositories are created we

562
00:23:52,230 --> 00:23:54,570
are just leveraging this tool more and

563
00:23:54,570 --> 00:23:56,640
more as we as we naturally grow there's

564
00:23:56,640 --> 00:23:57,780
not like a hard department that thou

565
00:23:57,780 --> 00:24:02,730
must do this we see it as a way to allow

566
00:24:02,730 --> 00:24:05,010
you to not have to do this manually so

567
00:24:05,010 --> 00:24:07,590
again it's not a company requirement but

568
00:24:07,590 --> 00:24:10,950
if it's appealing to to the end user to

569
00:24:10,950 --> 00:24:12,270
the maintainer which I would hope it

570
00:24:12,270 --> 00:24:14,930
would be they get they can implement it

571
00:24:14,930 --> 00:24:17,580
other questions got time for at least

572
00:24:17,580 --> 00:24:26,460
one more yes this is member friends to

573
00:24:26,460 --> 00:24:28,710
your repository policy can you elaborate

574
00:24:28,710 --> 00:24:31,530
on how the you guys make decisions went

575
00:24:31,530 --> 00:24:34,080
to update your repository based on

576
00:24:34,080 --> 00:24:36,750
spirit policy so say you're expecting a

577
00:24:36,750 --> 00:24:38,880
three but they put it too I've been in

578
00:24:38,880 --> 00:24:40,860
situations where it's not simply be a

579
00:24:40,860 --> 00:24:42,600
range of values how do you guys come to

580
00:24:42,600 --> 00:24:45,240
that decision you decide how to update

581
00:24:45,240 --> 00:24:49,020
that value so I mean in in that use case

582
00:24:49,020 --> 00:24:51,300
that was definitely that's up to the

583
00:24:51,300 --> 00:24:53,940
team from like approving from two to

584
00:24:53,940 --> 00:24:54,900
three for example I think you were

585
00:24:54,900 --> 00:24:57,480
saying yeah but in a that's a very

586
00:24:57,480 --> 00:24:59,350
simple keep like ranges right

587
00:24:59,350 --> 00:25:00,940
but they put it in two but how do you

588
00:25:00,940 --> 00:25:02,290
know it was supposed to be a three if

589
00:25:02,290 --> 00:25:04,000
there's range one through five how did

590
00:25:04,000 --> 00:25:05,980
you guys go to that process sure I mean

591
00:25:05,980 --> 00:25:08,080
so yeah I think the best way to put it

592
00:25:08,080 --> 00:25:10,180
is that it's it's up to the team I mean

593
00:25:10,180 --> 00:25:12,100
we can have you if you have a really

594
00:25:12,100 --> 00:25:14,590
simple project that a team of response

595
00:25:14,590 --> 00:25:17,020
before they can say hey this project we

596
00:25:17,020 --> 00:25:19,030
don't really care about its internal

597
00:25:19,030 --> 00:25:22,150
it's used in very small areas that's

598
00:25:22,150 --> 00:25:24,490
just going to be one where as this is we

599
00:25:24,490 --> 00:25:26,620
as a team we own this really critical

600
00:25:26,620 --> 00:25:29,230
piece of software we think it should be

601
00:25:29,230 --> 00:25:32,770
five or some number right the for us and

602
00:25:32,770 --> 00:25:35,320
kind of the whole takeaway for this is

603
00:25:35,320 --> 00:25:38,140
it allows teams to make it make those

604
00:25:38,140 --> 00:25:39,640
choices and can figure out how they want

605
00:25:39,640 --> 00:25:42,430
without bringing in the the actual owner

606
00:25:42,430 --> 00:25:44,680
of the overall platform to look at me in

607
00:25:44,680 --> 00:25:47,500
this case a sure so I mean I don't know

608
00:25:47,500 --> 00:25:49,120
how like they would have made it that

609
00:25:49,120 --> 00:25:52,990
decision from I know from my perspective

610
00:25:52,990 --> 00:25:56,140
for on these types of projects that yeah

611
00:25:56,140 --> 00:25:58,210
if we feel that something needs to we

612
00:25:58,210 --> 00:26:00,040
say it's too otherwise it's just gonna

613
00:26:00,040 --> 00:26:02,230
be one or three or whatever the team

614
00:26:02,230 --> 00:26:06,100
decides to do alright thank you very

615
00:26:06,100 --> 00:26:07,770
much big round of applause

616
00:26:07,770 --> 00:26:15,150
[Applause]

