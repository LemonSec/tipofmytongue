1
00:00:00,240 --> 00:00:02,760
welcome everyone I hope you had a great

2
00:00:02,760 --> 00:00:03,780
lunch

3
00:00:03,780 --> 00:00:06,060
um our goal is to defeat the lunch dip

4
00:00:06,060 --> 00:00:08,580
and talk about Network policies The Not

5
00:00:08,580 --> 00:00:10,200
So Hard Way

6
00:00:10,200 --> 00:00:13,679
um with psyllium why it's different and

7
00:00:13,679 --> 00:00:15,540
how you can effectively secure your

8
00:00:15,540 --> 00:00:17,940
workloads in your clusters today with me

9
00:00:17,940 --> 00:00:20,160
is Tracy home so like to introduce Tracy

10
00:00:20,160 --> 00:00:22,800
she's going to run the actual lab with

11
00:00:22,800 --> 00:00:25,380
you guys I'm going to first start with

12
00:00:25,380 --> 00:00:27,359
the presentation my name is Raymond Dion

13
00:00:27,359 --> 00:00:29,640
I'm from isof valence I'm a Solutions

14
00:00:29,640 --> 00:00:31,920
architect and I'm here today to talk

15
00:00:31,920 --> 00:00:34,079
about Network policies

16
00:00:34,079 --> 00:00:36,660
so the agenda first we'll talk about

17
00:00:36,660 --> 00:00:39,620
psyllium and ebpf as an introduction

18
00:00:39,620 --> 00:00:41,940
talk about security and observability

19
00:00:41,940 --> 00:00:44,340
what feature celium has for you to

20
00:00:44,340 --> 00:00:45,780
secure your workloads to observe your

21
00:00:45,780 --> 00:00:47,700
workloads then a little bit about

22
00:00:47,700 --> 00:00:49,379
strategies for Designing and working

23
00:00:49,379 --> 00:00:52,140
with network policies after which we

24
00:00:52,140 --> 00:00:54,960
sure have a short demo using Hubble UI

25
00:00:54,960 --> 00:00:55,860
as well

26
00:00:55,860 --> 00:00:58,320
after which we will dive into the lab

27
00:00:58,320 --> 00:01:01,980
with Tracy and we want you to also do

28
00:01:01,980 --> 00:01:05,580
the lab alongside with us and for that

29
00:01:05,580 --> 00:01:08,400
purpose I would like you to ask already

30
00:01:08,400 --> 00:01:11,520
to go to isofelion.com forward slash

31
00:01:11,520 --> 00:01:12,840
labs

32
00:01:12,840 --> 00:01:15,299
and then start the getting started with

33
00:01:15,299 --> 00:01:18,240
psyllium OSS labs it takes a few minutes

34
00:01:18,240 --> 00:01:20,400
for the labs to be actually be created

35
00:01:20,400 --> 00:01:22,200
it's an actual lab running on kinds

36
00:01:22,200 --> 00:01:24,659
based clusters for that to be proficient

37
00:01:24,659 --> 00:01:26,340
with a group it makes sense for people

38
00:01:26,340 --> 00:01:28,140
to already start it just wait to

39
00:01:28,140 --> 00:01:30,360
continue before Tracy will start to live

40
00:01:30,360 --> 00:01:32,400
with you

41
00:01:32,400 --> 00:01:35,900
okay back to the presentation

42
00:01:37,140 --> 00:01:39,479
cool silium and eppf introduction so

43
00:01:39,479 --> 00:01:41,220
we're from ISO Finance We're The

44
00:01:41,220 --> 00:01:43,560
Originators from psyllium we invented

45
00:01:43,560 --> 00:01:45,380
psyllium and donated it to the community

46
00:01:45,380 --> 00:01:48,720
and celium is widely used amongst

47
00:01:48,720 --> 00:01:50,220
multiple different environments for

48
00:01:50,220 --> 00:01:52,340
different use cases among security

49
00:01:52,340 --> 00:01:56,220
psyllium is based on ebpf and ebpf is a

50
00:01:56,220 --> 00:01:58,799
technology what we like to say is that

51
00:01:58,799 --> 00:02:00,979
it's a technology similar to JavaScript

52
00:02:00,979 --> 00:02:05,700
to the browser psyllium or eppf is to

53
00:02:05,700 --> 00:02:07,680
the kernel and it makes the kernel

54
00:02:07,680 --> 00:02:09,360
programmable in a very efficient way

55
00:02:09,360 --> 00:02:13,140
without actually changing the kernel

56
00:02:13,140 --> 00:02:15,120
and it's very powerful because it can

57
00:02:15,120 --> 00:02:18,000
run on kernel events so anything a

58
00:02:18,000 --> 00:02:20,520
process opening a socket or a network

59
00:02:20,520 --> 00:02:22,560
device sending a packet those are

60
00:02:22,560 --> 00:02:24,180
currently events where we can attach

61
00:02:24,180 --> 00:02:27,720
evpf programs on and that's very

62
00:02:27,720 --> 00:02:29,580
powerful because we can do things with

63
00:02:29,580 --> 00:02:32,280
that we can expose metrics we can see

64
00:02:32,280 --> 00:02:35,040
identities we can observe flows as we

65
00:02:35,040 --> 00:02:37,760
will show today

66
00:02:38,280 --> 00:02:41,819
psyllium is built on evpf and you don't

67
00:02:41,819 --> 00:02:43,739
have to be an ebpf engineer to use

68
00:02:43,739 --> 00:02:46,080
celium because psyllium abstracts that

69
00:02:46,080 --> 00:02:49,260
complex technology for you it will

70
00:02:49,260 --> 00:02:51,840
automatically program the required evpf

71
00:02:51,840 --> 00:02:54,180
programs depending on what you configure

72
00:02:54,180 --> 00:02:56,340
and it provides a software-defined

73
00:02:56,340 --> 00:02:58,319
networking solution for the cloud native

74
00:02:58,319 --> 00:03:01,379
Edge including external workloads

75
00:03:01,379 --> 00:03:04,260
and obviously kubernetes environments it

76
00:03:04,260 --> 00:03:09,739
takes care of identities instead of ips

77
00:03:10,019 --> 00:03:12,599
has a lot of functionalities and

78
00:03:12,599 --> 00:03:14,720
features of which of networking

79
00:03:14,720 --> 00:03:16,800
observabilities with Hubble which we'll

80
00:03:16,800 --> 00:03:19,019
show and demonstrate today as well and

81
00:03:19,019 --> 00:03:20,879
we've introduced a service mesh solution

82
00:03:20,879 --> 00:03:23,720
which is a sidecar less implementation

83
00:03:23,720 --> 00:03:27,180
powered with ebpf to accelerate the

84
00:03:27,180 --> 00:03:29,400
surface mesh capabilities to do layer 7

85
00:03:29,400 --> 00:03:32,519
pathway routing providing Ingress out of

86
00:03:32,519 --> 00:03:34,860
out of the box without using a sidecar

87
00:03:34,860 --> 00:03:37,140
which three to four times improves

88
00:03:37,140 --> 00:03:39,120
latency and performance and obviously

89
00:03:39,120 --> 00:03:41,540
removes

90
00:03:41,540 --> 00:03:43,440
resources you may need for running

91
00:03:43,440 --> 00:03:47,000
sidecars in your clusters

92
00:03:47,220 --> 00:03:49,200
so let's talk about security with

93
00:03:49,200 --> 00:03:51,140
psyllium psyllium provides an

94
00:03:51,140 --> 00:03:54,180
identity-based solution in kubernetes

95
00:03:54,180 --> 00:03:56,580
clusters IPS come and go they are

96
00:03:56,580 --> 00:03:59,519
ephemeral such as with the workloads

97
00:03:59,519 --> 00:04:02,159
what silion does is for each unique set

98
00:04:02,159 --> 00:04:04,260
of labels attached to your workloads

99
00:04:04,260 --> 00:04:07,200
think about tier front-ends application

100
00:04:07,200 --> 00:04:10,019
nginx that you you unique set of labels

101
00:04:10,019 --> 00:04:12,239
will result in an identity

102
00:04:12,239 --> 00:04:15,239
and psyllium uses this identity to

103
00:04:15,239 --> 00:04:18,060
attach this identity using ebpf to the

104
00:04:18,060 --> 00:04:21,418
actual IP packet and we're able to also

105
00:04:21,418 --> 00:04:24,479
observe and identify indent that

106
00:04:24,479 --> 00:04:26,960
identity for example on the destination

107
00:04:26,960 --> 00:04:29,759
so front end reaching out to a back end

108
00:04:29,759 --> 00:04:31,740
means that the front end gets that

109
00:04:31,740 --> 00:04:34,800
identity attached and the back end will

110
00:04:34,800 --> 00:04:37,259
be able to inspect that identity when to

111
00:04:37,259 --> 00:04:40,080
get traffic goes inbound and depending

112
00:04:40,080 --> 00:04:41,699
on the network policies you configure it

113
00:04:41,699 --> 00:04:44,840
allows organize that traffic

114
00:04:46,199 --> 00:04:48,840
furthermore psyllium provides API aware

115
00:04:48,840 --> 00:04:50,520
authorization and what that means is

116
00:04:50,520 --> 00:04:53,400
that not only layer 3 on IPS or lay ends

117
00:04:53,400 --> 00:04:55,979
or layer 4 on ports we also provide

118
00:04:55,979 --> 00:04:58,620
layer 7 rules and capabilities to be

119
00:04:58,620 --> 00:05:02,360
able to filter HTTP requests on specific

120
00:05:02,360 --> 00:05:06,840
calls methods on specific Buffs

121
00:05:06,840 --> 00:05:08,520
and this is an example of a psyllium

122
00:05:08,520 --> 00:05:12,240
Network policy where we have a HTTP

123
00:05:12,240 --> 00:05:15,900
aware rule for a namespace demo where we

124
00:05:15,900 --> 00:05:17,759
apply this rule to an applications

125
00:05:17,759 --> 00:05:20,520
called server match labels app equals

126
00:05:20,520 --> 00:05:23,039
server and then have a rule Ingress from

127
00:05:23,039 --> 00:05:26,280
endpoints clients to Port 80 and then

128
00:05:26,280 --> 00:05:29,759
notice the rules HTTP method gets on the

129
00:05:29,759 --> 00:05:31,440
path forward slash so this is a rule

130
00:05:31,440 --> 00:05:33,740
example where we only allow the specific

131
00:05:33,740 --> 00:05:36,539
method on this specific path and nothing

132
00:05:36,539 --> 00:05:38,940
else in the lab you will see there are

133
00:05:38,940 --> 00:05:42,600
some some examples of this as well

134
00:05:42,600 --> 00:05:45,360
another example is a constant Cassandra

135
00:05:45,360 --> 00:05:48,240
Syrian Network policy so besides HTTP we

136
00:05:48,240 --> 00:05:50,699
also support Cassandra to only allow

137
00:05:50,699 --> 00:05:53,400
specific query action on a specific

138
00:05:53,400 --> 00:05:56,160
table we can also filter on Kafka topics

139
00:05:56,160 --> 00:06:00,860
or grpc calls amongst others

140
00:06:01,320 --> 00:06:03,120
furthermore what's very powerful is the

141
00:06:03,120 --> 00:06:04,979
psyllium Network policies which are DNS

142
00:06:04,979 --> 00:06:07,320
aware which means that for example

143
00:06:07,320 --> 00:06:09,020
you're running

144
00:06:09,020 --> 00:06:12,180
storage workloads on S3 buckets

145
00:06:12,180 --> 00:06:14,400
as you may know IPS of those buckets

146
00:06:14,400 --> 00:06:17,300
change all the time so securing those

147
00:06:17,300 --> 00:06:20,100
resources is hard to track

148
00:06:20,100 --> 00:06:21,900
using fully qualified domain names

149
00:06:21,900 --> 00:06:23,880
however you can filter traffic to a

150
00:06:23,880 --> 00:06:25,740
specific bucket and that means that

151
00:06:25,740 --> 00:06:27,840
using DNS aware serial Network policies

152
00:06:27,840 --> 00:06:30,900
you can secure access to a given fully

153
00:06:30,900 --> 00:06:32,699
qualified domain name

154
00:06:32,699 --> 00:06:34,860
how it works is that one front end does

155
00:06:34,860 --> 00:06:39,000
a query for for specific domain we're

156
00:06:39,000 --> 00:06:41,819
able to intercept that and based on that

157
00:06:41,819 --> 00:06:44,220
we're using eppf allow organized

158
00:06:44,220 --> 00:06:46,880
specific traffic

159
00:06:48,000 --> 00:06:50,940
besides slavery layer free matching

160
00:06:50,940 --> 00:06:53,940
capabilities were also able to match on

161
00:06:53,940 --> 00:06:55,860
things like Cloud providers labels such

162
00:06:55,860 --> 00:06:58,199
as instance labels subnet soup net names

163
00:06:58,199 --> 00:07:00,660
soup net decks or other security group

164
00:07:00,660 --> 00:07:03,539
names as well and we also have logical

165
00:07:03,539 --> 00:07:06,000
identities things like worlds or

166
00:07:06,000 --> 00:07:09,180
localhost remote hosts Ingress and such

167
00:07:09,180 --> 00:07:11,639
which are also useful in some specific

168
00:07:11,639 --> 00:07:13,680
use cases working with psyllium Network

169
00:07:13,680 --> 00:07:16,280
policies

170
00:07:17,280 --> 00:07:19,259
senior Network policies are very

171
00:07:19,259 --> 00:07:20,940
powerful but without the right

172
00:07:20,940 --> 00:07:24,419
observability tools you're still lost

173
00:07:24,419 --> 00:07:26,699
applying a specific configuration of

174
00:07:26,699 --> 00:07:28,860
security on your workloads

175
00:07:28,860 --> 00:07:30,199
CDM

176
00:07:30,199 --> 00:07:33,380
sorry how about you how about is our

177
00:07:33,380 --> 00:07:36,180
observability solution uh on top of

178
00:07:36,180 --> 00:07:39,120
psyllium and we provide a UI which shows

179
00:07:39,120 --> 00:07:42,060
a surface dependency map

180
00:07:42,060 --> 00:07:43,740
um allows you to see the flows between

181
00:07:43,740 --> 00:07:46,860
surfaces on protocol level depending on

182
00:07:46,860 --> 00:07:49,259
the policies you set you can even see

183
00:07:49,259 --> 00:07:53,520
flows for layer 7 rules as well

184
00:07:53,520 --> 00:07:55,520
for more advanced

185
00:07:55,520 --> 00:07:58,319
use cases troubleshooting or or

186
00:07:58,319 --> 00:08:00,960
inspection we also support a CLI which

187
00:08:00,960 --> 00:08:02,639
allows you to also do extensive

188
00:08:02,639 --> 00:08:04,860
filtering and also be able to allow

189
00:08:04,860 --> 00:08:07,139
output to Json

190
00:08:07,139 --> 00:08:08,940
and the Hubble metrics components

191
00:08:08,940 --> 00:08:10,979
everything related to getting metrics

192
00:08:10,979 --> 00:08:14,280
out of Cillian and Hubble and Export

193
00:08:14,280 --> 00:08:16,500
them through Prometheus to gravana for

194
00:08:16,500 --> 00:08:19,440
example or in advanced use cases also to

195
00:08:19,440 --> 00:08:21,900
sim platforms to get alerts for example

196
00:08:21,900 --> 00:08:25,758
in Splunk on security incidents

197
00:08:26,160 --> 00:08:28,500
this is how the CLI looks like I'm not

198
00:08:28,500 --> 00:08:29,879
going to talk a lot about this because

199
00:08:29,879 --> 00:08:32,039
you also discovered this in the lab but

200
00:08:32,039 --> 00:08:33,360
what you will see and what's important

201
00:08:33,360 --> 00:08:35,719
to notice is that we're able to identify

202
00:08:35,719 --> 00:08:38,700
the HTTP course the fully qualified

203
00:08:38,700 --> 00:08:41,640
domain names being accessed and also the

204
00:08:41,640 --> 00:08:44,219
identities being attached to those

205
00:08:44,219 --> 00:08:46,820
workloads

206
00:08:47,279 --> 00:08:49,620
this is a quick example of a surface map

207
00:08:49,620 --> 00:08:51,600
where we can see the dependencies of

208
00:08:51,600 --> 00:08:53,459
surfaces the communication between

209
00:08:53,459 --> 00:08:55,920
services and also note that in some

210
00:08:55,920 --> 00:08:58,140
examples for example the core API we can

211
00:08:58,140 --> 00:09:00,720
see these specific URLs and specific

212
00:09:00,720 --> 00:09:03,959
methods being used to reach that surface

213
00:09:03,959 --> 00:09:06,540
and this provides you the tools to get

214
00:09:06,540 --> 00:09:08,100
started with your securing your

215
00:09:08,100 --> 00:09:09,899
workloads without breaking your

216
00:09:09,899 --> 00:09:12,380
applications

217
00:09:12,899 --> 00:09:14,700
this is an example of Hubble metrics if

218
00:09:14,700 --> 00:09:16,860
we have time today I've also an example

219
00:09:16,860 --> 00:09:20,339
of policy verdict metrics so using

220
00:09:20,339 --> 00:09:23,040
rafana we're also able to track policy

221
00:09:23,040 --> 00:09:25,380
verdicts things like allows or denied

222
00:09:25,380 --> 00:09:27,660
which should match your policies where

223
00:09:27,660 --> 00:09:31,320
you can see how many policies are

224
00:09:31,320 --> 00:09:33,540
actually matching and also what kind of

225
00:09:33,540 --> 00:09:36,740
domains are being reached out

226
00:09:38,399 --> 00:09:41,760
so working with psyllium Network policy

227
00:09:41,760 --> 00:09:43,560
or network policies in general can be a

228
00:09:43,560 --> 00:09:45,600
very big challenge

229
00:09:45,600 --> 00:09:47,339
um you don't want to be in the way of

230
00:09:47,339 --> 00:09:49,140
your developers but on the other side

231
00:09:49,140 --> 00:09:50,640
you have requirements that you need to

232
00:09:50,640 --> 00:09:52,980
secure your applications

233
00:09:52,980 --> 00:09:55,680
um if you deploy a deny all policy it's

234
00:09:55,680 --> 00:09:57,779
most likely to become very difficult and

235
00:09:57,779 --> 00:10:00,240
hard to for each independent service and

236
00:10:00,240 --> 00:10:03,180
application to introduce a cilium

237
00:10:03,180 --> 00:10:06,600
Network policy and to troubleshoot that

238
00:10:06,600 --> 00:10:08,820
you also need to keep them up to date

239
00:10:08,820 --> 00:10:10,740
you need to know when an application

240
00:10:10,740 --> 00:10:14,160
changes what is actually changed and and

241
00:10:14,160 --> 00:10:15,839
what you need to do to change your

242
00:10:15,839 --> 00:10:18,060
cilium Network policy

243
00:10:18,060 --> 00:10:19,800
and how do you prove that and what are

244
00:10:19,800 --> 00:10:21,720
the risks

245
00:10:21,720 --> 00:10:23,100
so

246
00:10:23,100 --> 00:10:25,260
our goal of today is also to talk a bit

247
00:10:25,260 --> 00:10:26,640
more about

248
00:10:26,640 --> 00:10:29,580
some mechanisms to understand or

249
00:10:29,580 --> 00:10:31,800
approach this Challenge and to be

250
00:10:31,800 --> 00:10:34,380
effectively secure workloads and I want

251
00:10:34,380 --> 00:10:37,980
to talk about four risks of risk

252
00:10:37,980 --> 00:10:40,019
exposure obviously from the internet

253
00:10:40,019 --> 00:10:42,600
when you're exposing Services that's a

254
00:10:42,600 --> 00:10:43,800
huge risk

255
00:10:43,800 --> 00:10:46,019
from internal networks if you just

256
00:10:46,019 --> 00:10:48,060
expose from any destination that can be

257
00:10:48,060 --> 00:10:49,920
a risk people accessing data which they

258
00:10:49,920 --> 00:10:51,660
are not allowed to

259
00:10:51,660 --> 00:10:53,820
if we look at the intra cluster or

260
00:10:53,820 --> 00:10:55,440
between cluster we have lateral movement

261
00:10:55,440 --> 00:10:59,100
risk or egress risk for workloads

262
00:10:59,100 --> 00:11:00,959
reaching resources in external network

263
00:11:00,959 --> 00:11:03,660
for example a physical database and

264
00:11:03,660 --> 00:11:05,640
obviously things like reaching back to

265
00:11:05,640 --> 00:11:07,079
internet as well you want to avoid

266
00:11:07,079 --> 00:11:09,540
people being able to openly open a

267
00:11:09,540 --> 00:11:12,740
reverse shelf for example

268
00:11:12,959 --> 00:11:15,180
so the goal is to reduce you unused

269
00:11:15,180 --> 00:11:16,980
access

270
00:11:16,980 --> 00:11:19,019
um which creates exposure without being

271
00:11:19,019 --> 00:11:21,600
required for the application to work

272
00:11:21,600 --> 00:11:23,940
so we also want to reduce the blast

273
00:11:23,940 --> 00:11:26,040
radius right so if a bolt gets

274
00:11:26,040 --> 00:11:27,860
compromised it can

275
00:11:27,860 --> 00:11:30,120
expose or

276
00:11:30,120 --> 00:11:32,160
move on to pots in the same name space

277
00:11:32,160 --> 00:11:34,560
But even with Beyond namespaces or

278
00:11:34,560 --> 00:11:36,839
Beyond clusters so we also want to limit

279
00:11:36,839 --> 00:11:40,200
the blast radius

280
00:11:40,200 --> 00:11:41,760
so there are different ways you can do

281
00:11:41,760 --> 00:11:44,339
it for example the denial is is very

282
00:11:44,339 --> 00:11:46,500
effective but will be very hard to work

283
00:11:46,500 --> 00:11:47,279
with

284
00:11:47,279 --> 00:11:49,019
so what we try to work with our

285
00:11:49,019 --> 00:11:51,120
customers is to get a starting policy

286
00:11:51,120 --> 00:11:55,820
which is good enough reducing risks only

287
00:11:55,820 --> 00:11:59,459
exposing to get started for example puts

288
00:11:59,459 --> 00:12:02,399
between for within a given name space

289
00:12:02,399 --> 00:12:04,980
for both being able to reach out to each

290
00:12:04,980 --> 00:12:07,140
others to allow service to service

291
00:12:07,140 --> 00:12:09,720
communication within a given namespace

292
00:12:09,720 --> 00:12:12,300
but deny Ingres and egress from a

293
00:12:12,300 --> 00:12:13,560
namespace

294
00:12:13,560 --> 00:12:15,959
accept things for example Prometheus

295
00:12:15,959 --> 00:12:18,420
which needs to monitor workloads and

296
00:12:18,420 --> 00:12:20,579
obviously Cube DNS being used to resolve

297
00:12:20,579 --> 00:12:22,680
DNS requests

298
00:12:22,680 --> 00:12:25,680
and then you can basically start with a

299
00:12:25,680 --> 00:12:27,980
coarse grained per namespace policy

300
00:12:27,980 --> 00:12:31,260
where using Hubble you can start with

301
00:12:31,260 --> 00:12:33,540
opening ports to

302
00:12:33,540 --> 00:12:37,019
um observe traffic and then move move on

303
00:12:37,019 --> 00:12:39,959
to slowly introducing more specific

304
00:12:39,959 --> 00:12:42,660
firewall rules for for your workloads

305
00:12:42,660 --> 00:12:44,760
and the goal is then to move to a fine

306
00:12:44,760 --> 00:12:48,060
grade namespace policy where you don't

307
00:12:48,060 --> 00:12:50,820
only allow on a specific IB IP and Port

308
00:12:50,820 --> 00:12:53,040
but even better on a specific fully

309
00:12:53,040 --> 00:12:55,620
qualified domain name and only allow an

310
00:12:55,620 --> 00:12:57,180
or explosive service through a load

311
00:12:57,180 --> 00:12:59,820
balance on a given board as such

312
00:12:59,820 --> 00:13:01,620
and I will show and demonstrate this a

313
00:13:01,620 --> 00:13:04,560
bit in a demo as well

314
00:13:04,560 --> 00:13:07,079
obviously acidium can be very powerful

315
00:13:07,079 --> 00:13:09,540
in github's kind of operation devops

316
00:13:09,540 --> 00:13:11,880
security devops operations using GitHub

317
00:13:11,880 --> 00:13:14,760
and gitlab integration using Argo or

318
00:13:14,760 --> 00:13:18,899
flux to basically automate

319
00:13:18,899 --> 00:13:21,839
um PR from serial Network policies which

320
00:13:21,839 --> 00:13:24,300
have for example any as a destination or

321
00:13:24,300 --> 00:13:26,519
zero zero zero for zero and

322
00:13:26,519 --> 00:13:29,519
automatically denied a PR for it to be

323
00:13:29,519 --> 00:13:33,480
changed to a more specific DNA DNS

324
00:13:33,480 --> 00:13:36,600
so with that I'm going to move to a

325
00:13:36,600 --> 00:13:38,639
short demo as an introduction to the

326
00:13:38,639 --> 00:13:39,779
actual lab

327
00:13:39,779 --> 00:13:42,300
so the overview is that we have deployed

328
00:13:42,300 --> 00:13:45,060
a namespace with a starting Network

329
00:13:45,060 --> 00:13:47,399
policy which allows traffic from that

330
00:13:47,399 --> 00:13:50,339
namespace and I'm slowly going to use

331
00:13:50,339 --> 00:13:52,560
Hubble or I'm going to use Hubble to

332
00:13:52,560 --> 00:13:54,360
slowly introduce more specific psyllium

333
00:13:54,360 --> 00:13:56,339
Network policies to secure that

334
00:13:56,339 --> 00:13:58,980
namespace and eventually remove the

335
00:13:58,980 --> 00:14:01,139
allow all rule to have that specific

336
00:14:01,139 --> 00:14:03,740
policy

337
00:14:04,440 --> 00:14:07,320
all right let's hope the demo gods are

338
00:14:07,320 --> 00:14:10,079
with us I hope everyone can see this in

339
00:14:10,079 --> 00:14:10,980
the back

340
00:14:10,980 --> 00:14:14,700
please let me know if it's big enough

341
00:14:14,700 --> 00:14:17,279
a little bit more okay cool give me a

342
00:14:17,279 --> 00:14:18,480
second

343
00:14:18,480 --> 00:14:20,220
so I've set up a

344
00:14:20,220 --> 00:14:22,579
demo cluster on gke

345
00:14:22,579 --> 00:14:25,800
installing psyllium 1.12

346
00:14:25,800 --> 00:14:27,899
also with Hubble

347
00:14:27,899 --> 00:14:32,779
so I will demonstrate the application

348
00:14:33,000 --> 00:14:35,940
so this is a simple example we see we've

349
00:14:35,940 --> 00:14:38,399
deployed this namespace called my app we

350
00:14:38,399 --> 00:14:40,760
have a simple client server

351
00:14:40,760 --> 00:14:42,899
application running

352
00:14:42,899 --> 00:14:45,300
and we can see traffic from the client

353
00:14:45,300 --> 00:14:47,820
to the server on Port 80 most likely

354
00:14:47,820 --> 00:14:52,199
HTTP but we don't see it yet and TCP

355
00:14:52,199 --> 00:14:53,279
traffic

356
00:14:53,279 --> 00:14:55,139
and we see that the client is also

357
00:14:55,139 --> 00:14:57,180
reaching out to some kind of

358
00:14:57,180 --> 00:15:00,480
destinations outside the cluster perhaps

359
00:15:00,480 --> 00:15:01,980
even on the internet so we want to know

360
00:15:01,980 --> 00:15:03,300
more

361
00:15:03,300 --> 00:15:05,760
looking on the flows the live flows we

362
00:15:05,760 --> 00:15:09,360
can see it's actually public IPS so we

363
00:15:09,360 --> 00:15:11,220
need to investigate that a bit

364
00:15:11,220 --> 00:15:15,060
so to do that we need to have some

365
00:15:15,060 --> 00:15:18,600
specific policies in place

366
00:15:18,600 --> 00:15:20,100
is this big enough as well for the

367
00:15:20,100 --> 00:15:21,180
audience

368
00:15:21,180 --> 00:15:23,160
good

369
00:15:23,160 --> 00:15:26,820
sorry there we go cool

370
00:15:26,820 --> 00:15:30,060
so for starters we want to see the

371
00:15:30,060 --> 00:15:32,880
external axis so what I wanted to

372
00:15:32,880 --> 00:15:34,860
introduce is that I'm going to introduce

373
00:15:34,860 --> 00:15:37,800
a cilium Network policy which is going

374
00:15:37,800 --> 00:15:39,120
to inspect

375
00:15:39,120 --> 00:15:42,839
that's DNS traffic from that client so

376
00:15:42,839 --> 00:15:45,600
what I do I select all endpoints using

377
00:15:45,600 --> 00:15:48,959
this and then specify egress to allow

378
00:15:48,959 --> 00:15:52,620
access to cube system to Port 53 but I

379
00:15:52,620 --> 00:15:55,579
also specifically have a rules section

380
00:15:55,579 --> 00:15:58,920
which specifically matches for DNS and

381
00:15:58,920 --> 00:16:00,660
using this wild card I'm able to allow

382
00:16:00,660 --> 00:16:04,279
DNS requests but I'll also see

383
00:16:04,279 --> 00:16:07,620
the fqdns being reached out to so I can

384
00:16:07,620 --> 00:16:09,839
take further action based on that so

385
00:16:09,839 --> 00:16:11,220
let's apply

386
00:16:11,220 --> 00:16:14,040
this policy

387
00:16:14,040 --> 00:16:16,199
so it's the dns.gmo

388
00:16:16,199 --> 00:16:18,360
I've applied it

389
00:16:18,360 --> 00:16:20,220
good

390
00:16:20,220 --> 00:16:22,019
check of if I'm still in the same

391
00:16:22,019 --> 00:16:24,060
namespace

392
00:16:24,060 --> 00:16:26,279
I'm not actually

393
00:16:26,279 --> 00:16:28,620
check that

394
00:16:28,620 --> 00:16:31,620
um let me first

395
00:16:31,620 --> 00:16:34,760
change namespace

396
00:16:36,899 --> 00:16:39,500
all right

397
00:16:40,019 --> 00:16:41,519
all right so

398
00:16:41,519 --> 00:16:46,579
I'm playing I'm applying this policy

399
00:16:47,940 --> 00:16:49,800
now we already can see that psyllium

400
00:16:49,800 --> 00:16:51,779
detects or hobo detects automatically

401
00:16:51,779 --> 00:16:53,459
that we're now reaching out to

402
00:16:53,459 --> 00:16:57,000
isovalent.com and psyllium.io so we have

403
00:16:57,000 --> 00:16:59,160
better information what this client is

404
00:16:59,160 --> 00:17:02,180
trying to reach out to

405
00:17:02,519 --> 00:17:04,319
so with this information you can make a

406
00:17:04,319 --> 00:17:06,480
more specific

407
00:17:06,480 --> 00:17:09,059
um informed decision on how to secure

408
00:17:09,059 --> 00:17:12,260
the specific workloads

409
00:17:13,020 --> 00:17:15,299
on the client side we do see that the

410
00:17:15,299 --> 00:17:17,400
client is not only reaching out to eyes

411
00:17:17,400 --> 00:17:19,619
available to psyllium but also to the

412
00:17:19,619 --> 00:17:21,540
server on Port 80. so with this

413
00:17:21,540 --> 00:17:23,880
information I'm not going to apply this

414
00:17:23,880 --> 00:17:26,760
helium Network policy which is applied

415
00:17:26,760 --> 00:17:29,460
to the clients

416
00:17:29,460 --> 00:17:33,059
note this Ingress part using this I'll

417
00:17:33,059 --> 00:17:36,000
deny everything Ingress for the specific

418
00:17:36,000 --> 00:17:38,460
endpoint

419
00:17:38,460 --> 00:17:43,440
and an egress I allow the server to

420
00:17:43,440 --> 00:17:46,559
sorry allow egress connectivity to the

421
00:17:46,559 --> 00:17:48,900
server on Port 80 and I also need

422
00:17:48,900 --> 00:17:52,320
obviously to allow Cube API access and

423
00:17:52,320 --> 00:17:55,919
now I can actually add the two follow

424
00:17:55,919 --> 00:17:57,900
qualified domain names piece where I

425
00:17:57,900 --> 00:18:00,600
only allow these two domains

426
00:18:00,600 --> 00:18:04,039
on board four for three

427
00:18:06,000 --> 00:18:07,919
like this

428
00:18:07,919 --> 00:18:10,140
so this won't change anything in Hubble

429
00:18:10,140 --> 00:18:13,140
but I've applied this policy and next is

430
00:18:13,140 --> 00:18:14,460
server part

431
00:18:14,460 --> 00:18:18,120
I want to secure Ingress to the server

432
00:18:18,120 --> 00:18:21,740
and considering time I will start with

433
00:18:21,740 --> 00:18:25,200
applying a policy on the server also

434
00:18:25,200 --> 00:18:28,980
explicitly deny egress connectivity but

435
00:18:28,980 --> 00:18:32,280
allow Ingress from the clients to Port

436
00:18:32,280 --> 00:18:34,639
80

437
00:18:42,000 --> 00:18:47,400
so again this won't change anything here

438
00:18:47,400 --> 00:18:49,980
and now I've applied a client rule a

439
00:18:49,980 --> 00:18:52,799
server rule a DNS rule which should mean

440
00:18:52,799 --> 00:18:57,000
that I also have secured all workloads

441
00:18:57,000 --> 00:18:59,640
so what I can now do is remove the two

442
00:18:59,640 --> 00:19:02,400
broadly specified allow all rule which I

443
00:19:02,400 --> 00:19:06,000
applied for the application to function

444
00:19:06,000 --> 00:19:08,640
and if I did things correctly I should

445
00:19:08,640 --> 00:19:11,580
not see any drops

446
00:19:11,580 --> 00:19:13,559
and this means that now

447
00:19:13,559 --> 00:19:16,260
the client's application is working the

448
00:19:16,260 --> 00:19:18,179
surf application is working and it is

449
00:19:18,179 --> 00:19:21,240
allowed to access external resources but

450
00:19:21,240 --> 00:19:23,760
let's say we have another application

451
00:19:23,760 --> 00:19:26,720
being introduced

452
00:19:26,760 --> 00:19:30,120
so let me quickly go through this and

453
00:19:30,120 --> 00:19:32,039
then

454
00:19:32,039 --> 00:19:34,140
so let's say there's another namespace

455
00:19:34,140 --> 00:19:36,480
another client application wanting to

456
00:19:36,480 --> 00:19:39,539
reach out to the server application

457
00:19:39,539 --> 00:19:40,260
um

458
00:19:40,260 --> 00:19:43,140
and it's being introduced but

459
00:19:43,140 --> 00:19:44,820
um

460
00:19:44,820 --> 00:19:48,179
we can now see this another app tries to

461
00:19:48,179 --> 00:19:50,700
reach to the server but it's not able to

462
00:19:50,700 --> 00:19:52,980
reach we see drops and we can click on

463
00:19:52,980 --> 00:19:55,679
Hubble UI to zoom in on this on other

464
00:19:55,679 --> 00:19:57,360
app workloads

465
00:19:57,360 --> 00:19:59,820
and you see drops and forward you may

466
00:19:59,820 --> 00:20:03,360
wonder why is that well it's because the

467
00:20:03,360 --> 00:20:05,940
another app doesn't have any policies

468
00:20:05,940 --> 00:20:08,700
applied to it yet so egress from that

469
00:20:08,700 --> 00:20:12,360
app is allowed but Ingress on the server

470
00:20:12,360 --> 00:20:13,860
is obviously denied because we didn't

471
00:20:13,860 --> 00:20:17,659
allow that specific destination

472
00:20:17,940 --> 00:20:20,580
so let's suppose this is required so we

473
00:20:20,580 --> 00:20:22,559
need to allow this

474
00:20:22,559 --> 00:20:26,000
that means that we need to go back to

475
00:20:26,000 --> 00:20:28,500
the policies directory

476
00:20:28,500 --> 00:20:31,260
I've stored them

477
00:20:31,260 --> 00:20:34,980
so let's allow

478
00:20:36,480 --> 00:20:39,000
we know this endpoint we allow this

479
00:20:39,000 --> 00:20:41,580
another app to reach from the namespace

480
00:20:41,580 --> 00:20:42,840
another app

481
00:20:42,840 --> 00:20:45,780
to Port 80 and we also know we've been

482
00:20:45,780 --> 00:20:49,080
informed that they are running http

483
00:20:49,080 --> 00:20:52,380
for Access so we also allow that only

484
00:20:52,380 --> 00:20:56,660
HTTP on layer 7 is allowed

485
00:20:56,820 --> 00:21:01,379
so we're updating the server policy

486
00:21:04,260 --> 00:21:07,980
and now we can check in Hubble

487
00:21:07,980 --> 00:21:10,940
what this means

488
00:21:11,220 --> 00:21:13,679
I think the drops are already gone

489
00:21:13,679 --> 00:21:17,100
yep everything is being allowed

490
00:21:17,100 --> 00:21:19,380
and we also see we now also have the

491
00:21:19,380 --> 00:21:21,600
layer 7 visibility because we can see

492
00:21:21,600 --> 00:21:25,200
that we this client on other app client

493
00:21:25,200 --> 00:21:28,080
is reaching um does a get call on the

494
00:21:28,080 --> 00:21:30,980
default path

495
00:21:32,880 --> 00:21:36,480
okay so depth concludes the demo a way

496
00:21:36,480 --> 00:21:39,480
for securing your workloads and from

497
00:21:39,480 --> 00:21:42,539
here I will hand over to Tracy to go

498
00:21:42,539 --> 00:21:44,760
through the lab with you so you get more

499
00:21:44,760 --> 00:21:47,460
hands-on experience yourself

500
00:21:47,460 --> 00:21:50,220
um with a Star Wars based example secure

501
00:21:50,220 --> 00:21:52,620
and get workload

502
00:21:52,620 --> 00:21:55,679
you see here you go thank you so if you

503
00:21:55,679 --> 00:21:56,940
haven't done that already go to

504
00:21:56,940 --> 00:21:59,280
isovalent.com forward slash labs to

505
00:21:59,280 --> 00:22:02,820
start the getting started on OSS lab we

506
00:22:02,820 --> 00:22:05,059
also have Duffy if you have an issue

507
00:22:05,059 --> 00:22:08,039
Duffy's helped me to help as well if you

508
00:22:08,039 --> 00:22:10,820
run into an issue in the lab let us know

509
00:22:10,820 --> 00:22:13,679
and we can support you I'll come to you

510
00:22:13,679 --> 00:22:15,600
to help you as well for those of you

511
00:22:15,600 --> 00:22:17,220
that can't see Duffy's face he was just

512
00:22:17,220 --> 00:22:20,100
as surprised as I was to hear that one

513
00:22:20,100 --> 00:22:24,199
um so let's see

514
00:22:33,200 --> 00:22:36,360
quick question

515
00:22:36,360 --> 00:22:39,320
hold on just a second

516
00:22:40,140 --> 00:22:42,740
yo

517
00:22:42,960 --> 00:22:45,380
yeah

518
00:22:50,760 --> 00:22:51,980
all right

519
00:22:51,980 --> 00:22:54,720
has anyone here not ever touched

520
00:22:54,720 --> 00:22:57,179
psyllium like raise your hand

521
00:22:57,179 --> 00:22:59,340
oh this is going to be good okay

522
00:22:59,340 --> 00:23:01,919
has anyone in here never used instruct

523
00:23:01,919 --> 00:23:03,539
before

524
00:23:03,539 --> 00:23:07,080
okay so first things first Ray told you

525
00:23:07,080 --> 00:23:09,179
all about the URL when we first started

526
00:23:09,179 --> 00:23:11,940
if you hit launch when he first started

527
00:23:11,940 --> 00:23:14,700
talking go back out and go back in what

528
00:23:14,700 --> 00:23:16,380
instruct will do is if when you get to a

529
00:23:16,380 --> 00:23:17,820
certain time limit it will kick you out

530
00:23:17,820 --> 00:23:19,500
and I don't want that to happen to you

531
00:23:19,500 --> 00:23:20,640
all while you're in the middle of the

532
00:23:20,640 --> 00:23:22,820
lab

533
00:23:24,059 --> 00:23:28,918
the URL again is

534
00:23:30,919 --> 00:23:36,059
isovalent.com forward slash labs

535
00:23:36,059 --> 00:23:37,919
and the very first one on the left side

536
00:23:37,919 --> 00:23:39,480
of the grid is getting started with

537
00:23:39,480 --> 00:23:41,700
psyllium OSS

538
00:23:41,700 --> 00:23:43,280
cool

539
00:23:43,280 --> 00:23:46,919
this is not a terribly long lab

540
00:23:46,919 --> 00:23:48,659
um so if you if you do have questions

541
00:23:48,659 --> 00:23:50,880
while I'm going through Ray is still

542
00:23:50,880 --> 00:23:54,080
miked up he can help Duffy here with the

543
00:23:54,080 --> 00:23:57,299
amazing black hat that he is known for

544
00:23:57,299 --> 00:24:00,260
will also help

545
00:24:00,419 --> 00:24:02,880
URL in bigger Tech you want to see it

546
00:24:02,880 --> 00:24:05,100
see it okay gotcha

547
00:24:05,100 --> 00:24:06,780
thank you

548
00:24:06,780 --> 00:24:10,460
let's see what I can do

549
00:24:13,140 --> 00:24:14,880
I never use this app but it might come

550
00:24:14,880 --> 00:24:17,600
in handy this time

551
00:24:31,440 --> 00:24:34,580
that's not helping

552
00:24:35,640 --> 00:24:38,280
oh that's because I'm not in the font

553
00:24:38,280 --> 00:24:41,120
y'all saw nothing

554
00:24:45,780 --> 00:24:48,860
that's the URL

555
00:24:49,440 --> 00:24:51,120
how many Advocates does it take to

556
00:24:51,120 --> 00:24:53,340
change the font size on something can

557
00:24:53,340 --> 00:24:54,780
everyone see it now

558
00:24:54,780 --> 00:24:56,580
yes no

559
00:24:56,580 --> 00:24:59,480
yes okay

560
00:25:04,080 --> 00:25:05,760
all right this is getting started with

561
00:25:05,760 --> 00:25:10,520
psyllium lab as you all well no

562
00:25:11,820 --> 00:25:15,419
I will read the majority of this just in

563
00:25:15,419 --> 00:25:16,799
case I don't know if English is

564
00:25:16,799 --> 00:25:19,020
everyone's first language so therefore

565
00:25:19,020 --> 00:25:20,460
you those of you that are watching

566
00:25:20,460 --> 00:25:22,320
hopefully you can understand me the

567
00:25:22,320 --> 00:25:23,880
other thing is I am a fan of typing

568
00:25:23,880 --> 00:25:25,020
things out

569
00:25:25,020 --> 00:25:26,039
so

570
00:25:26,039 --> 00:25:27,480
if you've never used instruct before

571
00:25:27,480 --> 00:25:29,340
when we get to the first page I'm going

572
00:25:29,340 --> 00:25:30,539
to show you something to make sure you

573
00:25:30,539 --> 00:25:33,240
don't miss any of the commands that's

574
00:25:33,240 --> 00:25:35,159
that are on the right side of the page

575
00:25:35,159 --> 00:25:36,840
so

576
00:25:36,840 --> 00:25:39,240
ensuring Security on kubernetes

577
00:25:39,240 --> 00:25:40,860
um how do you enforce policies

578
00:25:40,860 --> 00:25:42,480
troubleshoot the network and stay secure

579
00:25:42,480 --> 00:25:44,400
with minimal effort

580
00:25:44,400 --> 00:25:46,740
a new approach is needed you get to talk

581
00:25:46,740 --> 00:25:49,580
about silly in the day

582
00:25:49,980 --> 00:25:51,539
I'm not going to go through this however

583
00:25:51,539 --> 00:25:53,940
Ray just told you all about this that

584
00:25:53,940 --> 00:25:55,380
would be redundant you are free to

585
00:25:55,380 --> 00:25:57,480
review that while my environment is

586
00:25:57,480 --> 00:25:58,679
creating because that's going to take

587
00:25:58,679 --> 00:26:01,520
about a minute or two

588
00:26:02,820 --> 00:26:05,159
yeah Ray you you covered all this thank

589
00:26:05,159 --> 00:26:07,340
you

590
00:26:07,620 --> 00:26:09,960
and you all have already met Hubble so

591
00:26:09,960 --> 00:26:12,539
hopefully you're getting into the labs

592
00:26:12,539 --> 00:26:15,980
well this is happening

593
00:26:22,320 --> 00:26:25,140
oh yeah so you will also have quizzes

594
00:26:25,140 --> 00:26:27,059
I'm gonna need you all to yell out an

595
00:26:27,059 --> 00:26:28,679
answer or a letter or something to make

596
00:26:28,679 --> 00:26:30,120
sure that I'm I'm getting green before

597
00:26:30,120 --> 00:26:32,820
we go through so just know that I will

598
00:26:32,820 --> 00:26:35,418
stop and ask

599
00:26:37,500 --> 00:26:39,299
again now we just have to wait so sorry

600
00:26:39,299 --> 00:26:41,720
about that

601
00:26:45,000 --> 00:26:46,740
I would sing background music but I'm

602
00:26:46,740 --> 00:26:49,460
horrible I thought

603
00:26:52,140 --> 00:26:53,940
Ray I think you jinxed my environment

604
00:26:53,940 --> 00:26:56,419
setup

605
00:26:57,779 --> 00:26:59,880
no it's it's creating it's just taking a

606
00:26:59,880 --> 00:27:02,000
minute

607
00:27:06,980 --> 00:27:10,620
that's very helpful thank you

608
00:27:10,620 --> 00:27:13,580
so maybe it's just me

609
00:27:28,039 --> 00:27:30,960
there we go all right so start sorry

610
00:27:30,960 --> 00:27:32,039
about that thank you all for being

611
00:27:32,039 --> 00:27:33,539
patient I didn't have any jokes ready I

612
00:27:33,539 --> 00:27:35,220
apologize

613
00:27:35,220 --> 00:27:36,720
um so for those of you that never use

614
00:27:36,720 --> 00:27:38,460
instruct if you look on the right side

615
00:27:38,460 --> 00:27:40,980
where you see the kind cluster you'll

616
00:27:40,980 --> 00:27:42,900
notice there are drop down arrows for

617
00:27:42,900 --> 00:27:44,900
everything if you want to work ahead

618
00:27:44,900 --> 00:27:47,820
absolutely fine however make sure that

619
00:27:47,820 --> 00:27:49,679
you scroll down because some of the text

620
00:27:49,679 --> 00:27:52,679
will hide things that you need to expand

621
00:27:52,679 --> 00:27:55,200
before you can move on got it

622
00:27:55,200 --> 00:28:00,059
yes yes okay good not all right so we're

623
00:28:00,059 --> 00:28:02,460
running a kind kubernetes cluster and on

624
00:28:02,460 --> 00:28:04,380
top of that we're running psyllium so

625
00:28:04,380 --> 00:28:07,559
while the kind cluster is finishing its

626
00:28:07,559 --> 00:28:11,039
start let's look at the config

627
00:28:11,039 --> 00:28:14,419
I'm not typing that out

628
00:28:18,600 --> 00:28:20,100
and that is too small for those of you

629
00:28:20,100 --> 00:28:21,900
that are trying to see that

630
00:28:21,900 --> 00:28:23,880
let's do this

631
00:28:23,880 --> 00:28:25,919
is that better or worse

632
00:28:25,919 --> 00:28:28,880
better okay

633
00:28:28,919 --> 00:28:31,679
a lot better all right so in the notes

634
00:28:31,679 --> 00:28:32,760
section you can see that the cluster

635
00:28:32,760 --> 00:28:34,559
consists of three nodes

636
00:28:34,559 --> 00:28:36,120
one control plane node and that's

637
00:28:36,120 --> 00:28:39,120
running the case control plane and two

638
00:28:39,120 --> 00:28:40,980
worker nodes that will use to deploy the

639
00:28:40,980 --> 00:28:43,400
applications

640
00:28:43,860 --> 00:28:45,480
in the networking section in the config

641
00:28:45,480 --> 00:28:47,820
file the default cn9 has been disabled

642
00:28:47,820 --> 00:28:49,620
so the cluster won't have any pod

643
00:28:49,620 --> 00:28:51,419
Network when it starts instead psyllium

644
00:28:51,419 --> 00:28:52,980
is being deployed to the cluster to

645
00:28:52,980 --> 00:28:55,500
provide this functionality so psyllium

646
00:28:55,500 --> 00:28:57,960
will be your cni so let's see if the

647
00:28:57,960 --> 00:28:59,700
kind cluster is ready hopefully it

648
00:28:59,700 --> 00:29:01,320
doesn't take as long as the lab did the

649
00:29:01,320 --> 00:29:03,480
startup uh and we'll make sure that the

650
00:29:03,480 --> 00:29:05,220
cluster is running properly so we're

651
00:29:05,220 --> 00:29:08,000
going to list those nodes

652
00:29:09,960 --> 00:29:12,480
control V does work in this for pasting

653
00:29:12,480 --> 00:29:15,120
you can also just copy the command

654
00:29:15,120 --> 00:29:18,419
whenever you see the code

655
00:29:18,419 --> 00:29:21,179
the copy button should pop up so you can

656
00:29:21,179 --> 00:29:23,340
copy it that way if you'd like

657
00:29:23,340 --> 00:29:24,899
all right so you see all three of the

658
00:29:24,899 --> 00:29:26,340
nodes appear so you see those on the

659
00:29:26,340 --> 00:29:29,460
screen all are marked not ready that's

660
00:29:29,460 --> 00:29:32,279
normal the cni is disabled and after

661
00:29:32,279 --> 00:29:33,659
this page we're going to install a

662
00:29:33,659 --> 00:29:35,520
psyllium so if you don't see all the

663
00:29:35,520 --> 00:29:37,320
nodes they might still be joining the

664
00:29:37,320 --> 00:29:38,360
cluster

665
00:29:38,360 --> 00:29:41,760
and hey since we have a cluster let's go

666
00:29:41,760 --> 00:29:44,480
install psyllium

667
00:29:52,080 --> 00:29:55,020
all right so what we'll be using if

668
00:29:55,020 --> 00:29:56,640
you've ever if you've never worked

669
00:29:56,640 --> 00:29:58,860
through one of our getting started

670
00:29:58,860 --> 00:30:00,360
guides in the docs there are a couple of

671
00:30:00,360 --> 00:30:03,240
ways to get to this point

672
00:30:03,240 --> 00:30:05,340
uh there's actually a brew command

673
00:30:05,340 --> 00:30:07,620
install psyllium or at least get the

674
00:30:07,620 --> 00:30:09,000
agent there

675
00:30:09,000 --> 00:30:11,340
um or also like a curl command so that's

676
00:30:11,340 --> 00:30:12,659
what's already been done in the

677
00:30:12,659 --> 00:30:14,820
background after that step is where

678
00:30:14,820 --> 00:30:16,020
we're at so

679
00:30:16,020 --> 00:30:18,419
Salem CLI tool is provided to install

680
00:30:18,419 --> 00:30:19,860
and check the status of psyllium in the

681
00:30:19,860 --> 00:30:21,260
cluster so we can know what's going on

682
00:30:21,260 --> 00:30:24,600
but it'll also

683
00:30:24,600 --> 00:30:27,299
it helps us install and update sodium

684
00:30:27,299 --> 00:30:29,940
but you can also like enable Hubble and

685
00:30:29,940 --> 00:30:33,440
cluster mesh from the CLI

686
00:30:33,840 --> 00:30:35,880
so let's go do some of that

687
00:30:35,880 --> 00:30:38,100
and you are literally typing psyllium

688
00:30:38,100 --> 00:30:40,760
install

689
00:30:47,159 --> 00:30:49,399
that's going to take about

690
00:30:49,399 --> 00:30:52,260
30-45 seconds to get done

691
00:30:52,260 --> 00:30:53,520
um and it will let you know that it's

692
00:30:53,520 --> 00:30:55,380
installed and ready after that we can

693
00:30:55,380 --> 00:30:56,820
check the status to make sure that

694
00:30:56,820 --> 00:30:58,799
everything is is nice and healthy and

695
00:30:58,799 --> 00:31:01,340
and happy

696
00:31:03,179 --> 00:31:05,220
everybody with me so far

697
00:31:05,220 --> 00:31:08,240
yeah okay cool

698
00:31:10,860 --> 00:31:12,360
also if there are any terms you don't

699
00:31:12,360 --> 00:31:14,640
understand again I have very very nice

700
00:31:14,640 --> 00:31:16,200
people in here including some that

701
00:31:16,200 --> 00:31:17,580
probably have on shirts that are hiding

702
00:31:17,580 --> 00:31:19,200
and don't want to be called on in case

703
00:31:19,200 --> 00:31:20,940
you need help for definitions or

704
00:31:20,940 --> 00:31:23,720
anything like that

705
00:31:30,840 --> 00:31:32,640
I honestly think psyllium's mad at me

706
00:31:32,640 --> 00:31:34,820
right

707
00:31:35,580 --> 00:31:38,100
the labs don't like me anymore

708
00:31:38,100 --> 00:31:40,799
there we go I have to fuss okay it'll

709
00:31:40,799 --> 00:31:43,080
even tell you what to type to to view

710
00:31:43,080 --> 00:31:45,600
the installation help so I'll just

711
00:31:45,600 --> 00:31:48,000
follow the instructions from the command

712
00:31:48,000 --> 00:31:49,980
line so let's do psyllium status and see

713
00:31:49,980 --> 00:31:52,460
what's going on

714
00:31:53,880 --> 00:31:55,020
all right

715
00:31:55,020 --> 00:31:57,299
so the very first two things you see are

716
00:31:57,299 --> 00:31:59,279
that psyllium is in okay

717
00:31:59,279 --> 00:32:01,740
and operator's doing okay we haven't

718
00:32:01,740 --> 00:32:03,960
enabled Hubble and we haven't enabled

719
00:32:03,960 --> 00:32:05,399
cluster mesh so those are going to show

720
00:32:05,399 --> 00:32:08,640
as disabled so now that we're functional

721
00:32:08,640 --> 00:32:12,140
let's go deploy the demo app

722
00:32:14,220 --> 00:32:17,220
I love instruct it tells me well done

723
00:32:17,220 --> 00:32:19,080
thank you instruct

724
00:32:19,080 --> 00:32:22,580
ah quiz number one

725
00:32:23,640 --> 00:32:27,600
the psyllium CLI allows us to and we can

726
00:32:27,600 --> 00:32:29,340
have multiple answers if needed so which

727
00:32:29,340 --> 00:32:31,740
one should I click first

728
00:32:31,740 --> 00:32:34,679
top one all right

729
00:32:34,679 --> 00:32:37,520
anything else

730
00:32:38,399 --> 00:32:39,840
check the psyllium status is that what

731
00:32:39,840 --> 00:32:40,860
somebody said

732
00:32:40,860 --> 00:32:43,260
middle one okay

733
00:32:43,260 --> 00:32:46,020
anything else

734
00:32:46,020 --> 00:32:47,399
no

735
00:32:47,399 --> 00:32:50,479
all right let's see what happens

736
00:32:51,480 --> 00:32:55,039
gold star thank you so much

737
00:32:56,820 --> 00:32:58,440
if you don't already know we're fans of

738
00:32:58,440 --> 00:33:00,600
Star Wars here at night

739
00:33:00,600 --> 00:33:02,700
so everything going forward if you're a

740
00:33:02,700 --> 00:33:06,120
Trekkie I apologize in advance so to

741
00:33:06,120 --> 00:33:07,559
learn how to use and enforce policies

742
00:33:07,559 --> 00:33:09,539
with psyllium we have prepared a demo

743
00:33:09,539 --> 00:33:11,580
example uh we're gonna have three

744
00:33:11,580 --> 00:33:13,019
microservice applications that's going

745
00:33:13,019 --> 00:33:14,340
to be the death star TIE fighter and

746
00:33:14,340 --> 00:33:16,620
X-Wing

747
00:33:16,620 --> 00:33:20,100
Death Star service is it runs the HTTP

748
00:33:20,100 --> 00:33:22,440
web service on Port 80. that's exposed

749
00:33:22,440 --> 00:33:24,179
as a case service to load balance

750
00:33:24,179 --> 00:33:26,460
requests to death star across two pod

751
00:33:26,460 --> 00:33:28,980
replicas the Death Star service provides

752
00:33:28,980 --> 00:33:30,720
Landing services to the Empire

753
00:33:30,720 --> 00:33:33,480
spaceships so that they can request a

754
00:33:33,480 --> 00:33:35,899
landing port

755
00:33:36,419 --> 00:33:38,820
the Tie Fighter pod represents a landing

756
00:33:38,820 --> 00:33:40,080
request client service on a typical

757
00:33:40,080 --> 00:33:42,000
Empire ship X-Wing represents a similar

758
00:33:42,000 --> 00:33:43,679
service on an alliance ship and with

759
00:33:43,679 --> 00:33:45,059
this setup we can test different

760
00:33:45,059 --> 00:33:47,880
security policies for Access Control to

761
00:33:47,880 --> 00:33:50,399
death star Landing services

762
00:33:50,399 --> 00:33:51,840
it's just like your house you don't want

763
00:33:51,840 --> 00:33:52,919
people going in and out of your house

764
00:33:52,919 --> 00:33:55,799
that don't that should navigate right

765
00:33:55,799 --> 00:33:58,140
it's basically what we're doing just the

766
00:33:58,140 --> 00:34:01,019
Star Wars version all right so

767
00:34:01,019 --> 00:34:02,340
let's check to make sure that all the

768
00:34:02,340 --> 00:34:03,840
components have been properly deployed

769
00:34:03,840 --> 00:34:06,899
let me move this over so you all can see

770
00:34:06,899 --> 00:34:08,639
some of this there we go

771
00:34:08,639 --> 00:34:10,679
uh it may take a few seconds to display

772
00:34:10,679 --> 00:34:13,020
the results you all are very patient

773
00:34:13,020 --> 00:34:14,760
and have been so I don't think that's

774
00:34:14,760 --> 00:34:17,720
going to be an issue

775
00:34:17,760 --> 00:34:19,859
all right so Loom successfully rolled

776
00:34:19,859 --> 00:34:23,339
out let's deploy the demo app so you'll

777
00:34:23,339 --> 00:34:25,679
know which is what is what

778
00:34:25,679 --> 00:34:27,839
because of the labels so the Death Star

779
00:34:27,839 --> 00:34:29,639
is going to be the Empire org and it's

780
00:34:29,639 --> 00:34:31,859
going to be just our class

781
00:34:31,859 --> 00:34:34,080
the Imperial Tie fighters also in the

782
00:34:34,080 --> 00:34:36,480
same org so it's an Empire organization

783
00:34:36,480 --> 00:34:37,800
and it's going to be a different class

784
00:34:37,800 --> 00:34:40,080
it's TIE fighter and then the X-Wing is

785
00:34:40,080 --> 00:34:42,719
the alliance organization

786
00:34:42,719 --> 00:34:45,719
and the class of course is X-Wing so the

787
00:34:45,719 --> 00:34:47,159
deployment will also have a death star

788
00:34:47,159 --> 00:34:48,899
service what we just talked about and

789
00:34:48,899 --> 00:34:50,159
that's going to load balance all the

790
00:34:50,159 --> 00:34:52,980
traffic to all of the pods with the

791
00:34:52,980 --> 00:34:54,379
label

792
00:34:54,379 --> 00:34:56,399
equals Empire

793
00:34:56,399 --> 00:34:58,680
and that's our class so let's install

794
00:34:58,680 --> 00:35:01,140
everything there's a manifest in the

795
00:35:01,140 --> 00:35:03,839
background yaml

796
00:35:03,839 --> 00:35:06,660
um and we are going to

797
00:35:06,660 --> 00:35:09,200
install

798
00:35:10,560 --> 00:35:12,000
so

799
00:35:12,000 --> 00:35:14,280
all of our objects are in are created

800
00:35:14,280 --> 00:35:16,079
let's see that everything's actually

801
00:35:16,079 --> 00:35:19,520
deployed the way that it should be

802
00:35:21,000 --> 00:35:24,680
ah I can't type

803
00:35:25,500 --> 00:35:28,500
see this is why I don't type stuff

804
00:35:28,500 --> 00:35:31,320
a bit of a copy it works

805
00:35:31,320 --> 00:35:34,020
well that was just rude there we go all

806
00:35:34,020 --> 00:35:35,520
right so

807
00:35:35,520 --> 00:35:36,960
at this point it's already saying

808
00:35:36,960 --> 00:35:39,240
running but each bottle go through

809
00:35:39,240 --> 00:35:40,619
several States until it reaches running

810
00:35:40,619 --> 00:35:43,800
at the point that pot is ready so let's

811
00:35:43,800 --> 00:35:44,960
try it again

812
00:35:44,960 --> 00:35:47,760
well if you need to try it again until

813
00:35:47,760 --> 00:35:49,800
you see that everything has a running

814
00:35:49,800 --> 00:35:52,099
status

815
00:35:52,260 --> 00:35:53,900
each bottle also be represented

816
00:35:53,900 --> 00:35:56,820
represented in psyllium as an endpoint

817
00:35:56,820 --> 00:35:58,500
so we want to see a list of all the

818
00:35:58,500 --> 00:36:00,359
endpoints that are managed by psyllium

819
00:36:00,359 --> 00:36:03,960
the psyllium endpoint or sep cep

820
00:36:03,960 --> 00:36:06,300
resource can also be used I will tell

821
00:36:06,300 --> 00:36:08,160
you now I try to manually type in and it

822
00:36:08,160 --> 00:36:09,839
did not work earlier so you might want

823
00:36:09,839 --> 00:36:11,460
to copy and paste this one

824
00:36:11,460 --> 00:36:13,079
and I promise I actually typed it

825
00:36:13,079 --> 00:36:15,500
correctly

826
00:36:18,960 --> 00:36:21,359
and it did that earlier

827
00:36:21,359 --> 00:36:24,119
yeah

828
00:36:24,119 --> 00:36:25,859
it does work the second time thank you

829
00:36:25,859 --> 00:36:27,180
because that happened to me earlier and

830
00:36:27,180 --> 00:36:29,579
I was like who hates me all right let's

831
00:36:29,579 --> 00:36:31,260
try it again I had the same to this

832
00:36:31,260 --> 00:36:33,599
morning yeah okay I think there's a

833
00:36:33,599 --> 00:36:35,520
small delay thank you for that I

834
00:36:35,520 --> 00:36:37,859
appreciate that all right so as you can

835
00:36:37,859 --> 00:36:40,140
see we've got our demo app installed and

836
00:36:40,140 --> 00:36:42,119
so let's go check on to our first test

837
00:36:42,119 --> 00:36:44,760
yeah before you do that notice the

838
00:36:44,760 --> 00:36:47,180
identities as well right so you can see

839
00:36:47,180 --> 00:36:50,220
the Death Star have similar labels

840
00:36:50,220 --> 00:36:52,859
because it's two pots so they have the

841
00:36:52,859 --> 00:36:56,220
same identity being allocated to the

842
00:36:56,220 --> 00:36:59,280
Death Star so that's almost a unique

843
00:36:59,280 --> 00:37:02,099
identity for similar workloads so with

844
00:37:02,099 --> 00:37:03,660
this command you can actually

845
00:37:03,660 --> 00:37:05,940
point and troubleshoot this did you all

846
00:37:05,940 --> 00:37:07,500
hear him over on that side

847
00:37:07,500 --> 00:37:11,000
kinda okay cool

848
00:37:11,640 --> 00:37:13,619
all right so let's go launch our first

849
00:37:13,619 --> 00:37:15,859
test

850
00:37:20,900 --> 00:37:23,880
all right so let's talk about death star

851
00:37:23,880 --> 00:37:25,500
access from the perspective of the Death

852
00:37:25,500 --> 00:37:27,359
Star service only the ships with the

853
00:37:27,359 --> 00:37:29,520
label org equals Empire or anything

854
00:37:29,520 --> 00:37:31,320
that's an Empire org are allowed to

855
00:37:31,320 --> 00:37:35,300
connect and request a landing

856
00:37:35,400 --> 00:37:37,920
but we don't have any rules in Forest so

857
00:37:37,920 --> 00:37:40,619
like what will happen if not only the

858
00:37:40,619 --> 00:37:43,680
Tie Fighter but also the X-Wing request

859
00:37:43,680 --> 00:37:48,020
landing so let's find out

860
00:37:49,800 --> 00:37:52,680
so instead of actually running the full

861
00:37:52,680 --> 00:37:54,420
connectivity test we're going to be

862
00:37:54,420 --> 00:37:55,320
using

863
00:37:55,320 --> 00:37:58,380
um curl to execute some API calls so

864
00:37:58,380 --> 00:38:00,359
let's see if we can land our TIE fighter

865
00:38:00,359 --> 00:38:02,220
on the Death Star by running the

866
00:38:02,220 --> 00:38:05,060
following command

867
00:38:09,480 --> 00:38:12,599
ship landed all right so the command

868
00:38:12,599 --> 00:38:14,280
above get lets us get a shell on the Tie

869
00:38:14,280 --> 00:38:16,619
Fighter pod and run an HTTP post request

870
00:38:16,619 --> 00:38:18,540
to the Death Star service to request

871
00:38:18,540 --> 00:38:20,520
landing the command should work because

872
00:38:20,520 --> 00:38:21,960
the Tie Fighter and death star are all

873
00:38:21,960 --> 00:38:24,780
on the same side of you know the war

874
00:38:24,780 --> 00:38:27,180
also known as the bad guys which I hate

875
00:38:27,180 --> 00:38:28,200
because I'm a Boba Fett person but

876
00:38:28,200 --> 00:38:29,099
anyway

877
00:38:29,099 --> 00:38:33,240
um now test if we can land the X-Wing

878
00:38:33,240 --> 00:38:34,740
the good guys what do you all think is

879
00:38:34,740 --> 00:38:36,599
going to happen

880
00:38:36,599 --> 00:38:40,400
it's gonna work all right so let's see

881
00:38:41,579 --> 00:38:44,040
and you are correct

882
00:38:44,040 --> 00:38:46,740
so that's good for the rebels because

883
00:38:46,740 --> 00:38:48,300
they can get where they technically

884
00:38:48,300 --> 00:38:49,980
shouldn't be

885
00:38:49,980 --> 00:38:51,720
um but unfettered access to the Death

886
00:38:51,720 --> 00:38:55,140
Star is not great for them

887
00:38:55,140 --> 00:38:58,500
so apparently a security policy is

888
00:38:58,500 --> 00:39:00,800
missing

889
00:39:06,599 --> 00:39:09,480
all right so let's here's a brief blurb

890
00:39:09,480 --> 00:39:11,700
about identities in Cloud native IP

891
00:39:11,700 --> 00:39:13,740
addresses are no longer relevant for

892
00:39:13,740 --> 00:39:15,119
cloud native workloads because security

893
00:39:15,119 --> 00:39:16,920
policies need something else they just

894
00:39:16,920 --> 00:39:19,859
do selling provides this cylinder uses

895
00:39:19,859 --> 00:39:21,300
the labels assigned to the pots to

896
00:39:21,300 --> 00:39:24,240
define the security policies

897
00:39:24,240 --> 00:39:26,099
we're going to start with a basic policy

898
00:39:26,099 --> 00:39:27,780
restricting the Death Star Landing

899
00:39:27,780 --> 00:39:29,640
requests to only the ships that have the

900
00:39:29,640 --> 00:39:31,800
label or Gables Empire

901
00:39:31,800 --> 00:39:34,200
this should block or this blocks any

902
00:39:34,200 --> 00:39:36,119
ships without the label to even connect

903
00:39:36,119 --> 00:39:38,160
to the Death Star service it's a simple

904
00:39:38,160 --> 00:39:39,839
policy that well I'm not even say simple

905
00:39:39,839 --> 00:39:42,839
policy it's a policy that filters only

906
00:39:42,839 --> 00:39:44,520
on network layer three so that's the IP

907
00:39:44,520 --> 00:39:46,980
protocol and network layer 4 which is a

908
00:39:46,980 --> 00:39:49,440
TCP protocol so it's often referred to

909
00:39:49,440 --> 00:39:52,920
as an l304 network security policy

910
00:39:52,920 --> 00:39:55,680
and so this is what it looks like

911
00:39:55,680 --> 00:39:59,180
it has a graphic

912
00:39:59,700 --> 00:40:02,400
so let's go do some more stuff

913
00:40:02,400 --> 00:40:04,020
all right so the first things first

914
00:40:04,020 --> 00:40:05,760
we're going to start with that policy to

915
00:40:05,760 --> 00:40:07,619
restrict Death Star Landing requests to

916
00:40:07,619 --> 00:40:09,599
the ships that only have the label org

917
00:40:09,599 --> 00:40:11,760
equals Empire before we start changing

918
00:40:11,760 --> 00:40:12,960
policies right away let's think about

919
00:40:12,960 --> 00:40:15,119
what that looks like or should look like

920
00:40:15,119 --> 00:40:16,619
I should say

921
00:40:16,619 --> 00:40:18,119
I'm going to expand this just a little

922
00:40:18,119 --> 00:40:20,220
bit come on Mouse you like me today

923
00:40:20,220 --> 00:40:21,180
right

924
00:40:21,180 --> 00:40:22,980
there we go so we need to match on

925
00:40:22,980 --> 00:40:26,760
Empire ships only so that label is what

926
00:40:26,760 --> 00:40:28,920
we need to match on and that's what that

927
00:40:28,920 --> 00:40:30,240
would look like

928
00:40:30,240 --> 00:40:33,599
match labels or Empire class Death Star

929
00:40:33,599 --> 00:40:35,220
we also have to make sure that Ingress

930
00:40:35,220 --> 00:40:36,660
from the endpoints with the label Empire

931
00:40:36,660 --> 00:40:39,720
are also allowed to Port 80 for protocol

932
00:40:39,720 --> 00:40:42,379
TCP

933
00:40:42,960 --> 00:40:46,579
we see that in the image

934
00:40:46,920 --> 00:40:50,520
so while this example is relatively

935
00:40:50,520 --> 00:40:52,020
simple

936
00:40:52,020 --> 00:40:53,880
operators sometimes find it difficult to

937
00:40:53,880 --> 00:40:56,579
understand and to build Network policies

938
00:40:56,579 --> 00:40:57,960
um and psyllium has a solution for this

939
00:40:57,960 --> 00:41:00,300
so if you look at the top where you see

940
00:41:00,300 --> 00:41:02,880
terminal right next to that you will see

941
00:41:02,880 --> 00:41:05,280
the network policy editor what I will

942
00:41:05,280 --> 00:41:07,260
say is if you learn something that has a

943
00:41:07,260 --> 00:41:08,280
size

944
00:41:08,280 --> 00:41:10,380
a MacBook Air size screen

945
00:41:10,380 --> 00:41:13,560
you are going to need to collapse

946
00:41:13,560 --> 00:41:15,900
right here you're going to use that to

947
00:41:15,900 --> 00:41:18,119
collapse so you can actually see the

948
00:41:18,119 --> 00:41:21,420
visualization or else it won't show up

949
00:41:21,420 --> 00:41:24,420
don't ask me how I know

950
00:41:24,420 --> 00:41:26,339
thought something was wrong earlier

951
00:41:26,339 --> 00:41:29,700
so I'm going to go through this blurb

952
00:41:29,700 --> 00:41:31,380
first and then just show you what the

953
00:41:31,380 --> 00:41:35,040
the netball editor looks like

954
00:41:35,040 --> 00:41:35,760
um

955
00:41:35,760 --> 00:41:37,380
so you can all click on that while I'm

956
00:41:37,380 --> 00:41:38,760
reading through this so click on the to

957
00:41:38,760 --> 00:41:39,839
see a visual and interactive

958
00:41:39,839 --> 00:41:42,180
representation of your policy and change

959
00:41:42,180 --> 00:41:43,260
some of the values if you want to play

960
00:41:43,260 --> 00:41:44,700
around and better understand what the

961
00:41:44,700 --> 00:41:46,320
policy is doing and I'm going to be

962
00:41:46,320 --> 00:41:48,180
completely honest with you networking

963
00:41:48,180 --> 00:41:50,460
has never been my forte I used to cry

964
00:41:50,460 --> 00:41:52,740
for Cisco stuff like it just hasn't

965
00:41:52,740 --> 00:41:55,619
break fix is my thing the one thing I

966
00:41:55,619 --> 00:41:57,599
did like when I started using psyllium

967
00:41:57,599 --> 00:41:58,859
or starting learning psyllium because

968
00:41:58,859 --> 00:42:00,960
honestly I'm still learning is this

969
00:42:00,960 --> 00:42:02,460
editor that you all are looking at

970
00:42:02,460 --> 00:42:04,380
because it was easier for me to follow

971
00:42:04,380 --> 00:42:07,260
along with what everything was going on

972
00:42:07,260 --> 00:42:10,500
some people are visual and I just happen

973
00:42:10,500 --> 00:42:12,720
to be one of those people

974
00:42:12,720 --> 00:42:13,920
um so the central part of the diagram

975
00:42:13,920 --> 00:42:16,320
represents the network policy selector

976
00:42:16,320 --> 00:42:18,240
and then each side will show

977
00:42:18,240 --> 00:42:20,280
respectively which Ingress and egress

978
00:42:20,280 --> 00:42:22,500
are allowed for the workload so you

979
00:42:22,500 --> 00:42:23,700
basically want to verify that your

980
00:42:23,700 --> 00:42:25,020
current selector

981
00:42:25,020 --> 00:42:27,119
which are the Oregon's Empire class

982
00:42:27,119 --> 00:42:28,800
equals Death Star are only allowed

983
00:42:28,800 --> 00:42:30,839
English track of it from pods labeled as

984
00:42:30,839 --> 00:42:32,520
org equals Empire

985
00:42:32,520 --> 00:42:35,880
and that's what that would look like

986
00:42:35,880 --> 00:42:37,800
um you can also check the corresponding

987
00:42:37,800 --> 00:42:39,960
Network policy manifest in the editor

988
00:42:39,960 --> 00:42:41,760
below

989
00:42:41,760 --> 00:42:45,660
and note you can either use the psyllium

990
00:42:45,660 --> 00:42:48,180
Network policy or you could use the

991
00:42:48,180 --> 00:42:51,119
kubernetes network policy

992
00:42:51,119 --> 00:42:52,980
the other thing is if you're ever at

993
00:42:52,980 --> 00:42:54,660
home and you want to use something like

994
00:42:54,660 --> 00:42:56,280
this without having to spend a lot of

995
00:42:56,280 --> 00:42:59,000
things up we do have

996
00:42:59,000 --> 00:43:00,780
editor.cillium.io and I'm going to click

997
00:43:00,780 --> 00:43:02,339
on that before I actually show you the

998
00:43:02,339 --> 00:43:04,800
one in instruct because it's very very

999
00:43:04,800 --> 00:43:06,660
easy to use and I talk about it all the

1000
00:43:06,660 --> 00:43:10,680
time so you'll get this most times

1001
00:43:10,680 --> 00:43:12,839
whenever you get on here but this is

1002
00:43:12,839 --> 00:43:15,119
what this looks like I'm not sure you

1003
00:43:15,119 --> 00:43:16,560
would want to do try to do it from a

1004
00:43:16,560 --> 00:43:19,020
mobile device but outside of that it's

1005
00:43:19,020 --> 00:43:21,060
very very helpful and whenever you have

1006
00:43:21,060 --> 00:43:22,440
the policy you want you can actually

1007
00:43:22,440 --> 00:43:24,599
download it or just copy and paste it

1008
00:43:24,599 --> 00:43:27,859
into your Yamaha

1009
00:43:28,260 --> 00:43:29,940
all right so this is what it looks like

1010
00:43:29,940 --> 00:43:32,040
on the tutorial side

1011
00:43:32,040 --> 00:43:33,540
it's basically the same thing I just

1012
00:43:33,540 --> 00:43:34,980
showed you it just doesn't have anything

1013
00:43:34,980 --> 00:43:37,579
preloaded

1014
00:43:40,680 --> 00:43:42,300
and that's that

1015
00:43:42,300 --> 00:43:45,960
all right so let's enforce the policy

1016
00:43:45,960 --> 00:43:46,740
and we're going to do that actually

1017
00:43:46,740 --> 00:43:48,359
using the terminal so you might want to

1018
00:43:48,359 --> 00:43:50,700
go back to the terminal tab

1019
00:43:50,700 --> 00:43:52,800
and we can apply the pre-configured

1020
00:43:52,800 --> 00:43:55,140
network policy with the values that we

1021
00:43:55,140 --> 00:43:57,240
just talked about for the demo system so

1022
00:43:57,240 --> 00:44:00,140
let's copy and paste that

1023
00:44:03,119 --> 00:44:05,160
'll let you know that it was created and

1024
00:44:05,160 --> 00:44:07,800
let's try to land the Empire TIE fighter

1025
00:44:07,800 --> 00:44:09,599
again

1026
00:44:09,599 --> 00:44:12,619
to the Death Star

1027
00:44:13,500 --> 00:44:15,359
which she'll still which should still

1028
00:44:15,359 --> 00:44:16,619
work

1029
00:44:16,619 --> 00:44:20,460
ship has landed now if you try to

1030
00:44:20,460 --> 00:44:22,079
request a lending with your X-Wing

1031
00:44:22,079 --> 00:44:24,420
however you should see that it's going

1032
00:44:24,420 --> 00:44:26,400
to hang like nothing at all should

1033
00:44:26,400 --> 00:44:27,960
happen at this point and we still got

1034
00:44:27,960 --> 00:44:29,280
ships Landing that means I probably

1035
00:44:29,280 --> 00:44:32,780
copied and pasted something incorrectly

1036
00:44:33,599 --> 00:44:35,280
and as you see nothing is happening

1037
00:44:35,280 --> 00:44:38,460
happening so that means that our rule

1038
00:44:38,460 --> 00:44:40,020
actually did what it was supposed to do

1039
00:44:40,020 --> 00:44:43,940
to get out of that control C

1040
00:44:44,940 --> 00:44:47,520
so we've blocked the access to the Death

1041
00:44:47,520 --> 00:44:49,800
Star from an X-Wing so let's see if we

1042
00:44:49,800 --> 00:44:51,900
can make it a bit more fine-grained

1043
00:44:51,900 --> 00:44:53,040
those of you that work in government

1044
00:44:53,040 --> 00:44:55,200
separation of duties

1045
00:44:55,200 --> 00:44:58,079
that's basically what we're about to do

1046
00:44:58,079 --> 00:45:01,140
or any other place somewhere

1047
00:45:01,140 --> 00:45:02,700
all right so it was sufficient to give

1048
00:45:02,700 --> 00:45:04,500
either the Tie Fighter X-Wing full

1049
00:45:04,500 --> 00:45:06,839
access to death star's API or no access

1050
00:45:06,839 --> 00:45:09,960
at all but are you absolutely sure that

1051
00:45:09,960 --> 00:45:11,640
you can trust all of the TIE fighter

1052
00:45:11,640 --> 00:45:13,619
pilots of the entire Empire you're not

1053
00:45:13,619 --> 00:45:14,700
because you don't know all of them if

1054
00:45:14,700 --> 00:45:16,859
you do we got bigger problems uh we must

1055
00:45:16,859 --> 00:45:18,839
provide the strongest security so

1056
00:45:18,839 --> 00:45:20,760
enforce least privilege between

1057
00:45:20,760 --> 00:45:22,440
microservices and each service that

1058
00:45:22,440 --> 00:45:24,480
calls the death star's API should be

1059
00:45:24,480 --> 00:45:27,119
limited to making only the set of HTTP

1060
00:45:27,119 --> 00:45:30,780
requests it requires for legitimate uh

1061
00:45:30,780 --> 00:45:33,260
operation

1062
00:45:33,900 --> 00:45:35,339
so we just need to filter the actual

1063
00:45:35,339 --> 00:45:38,339
HTTP request and that's what this will

1064
00:45:38,339 --> 00:45:40,500
look like

1065
00:45:40,500 --> 00:45:43,460
so let's go do that

1066
00:45:45,480 --> 00:45:46,980
all right so think about this the Death

1067
00:45:46,980 --> 00:45:48,540
Star service exposes some maintenance

1068
00:45:48,540 --> 00:45:51,420
apis which should not be called by

1069
00:45:51,420 --> 00:45:54,060
random Empire ships to see why those

1070
00:45:54,060 --> 00:45:55,859
apis are sensitive

1071
00:45:55,859 --> 00:45:59,280
we're going to run this Cube cuddle yes

1072
00:45:59,280 --> 00:46:01,440
cuddle

1073
00:46:01,440 --> 00:46:03,060
say it again we're going to run this cue

1074
00:46:03,060 --> 00:46:05,540
cuddle don't shake your head at me Tuffy

1075
00:46:05,540 --> 00:46:09,200
uh command

1076
00:46:10,319 --> 00:46:11,880
and the very first thing you see is

1077
00:46:11,880 --> 00:46:13,260
there's a panic because the Death Star

1078
00:46:13,260 --> 00:46:15,480
exploded this is why something should

1079
00:46:15,480 --> 00:46:18,599
not be touched by everyone all right so

1080
00:46:18,599 --> 00:46:20,520
this is an illustrative example and yeah

1081
00:46:20,520 --> 00:46:22,500
it's kind of dramatic but unauthorized

1082
00:46:22,500 --> 00:46:24,780
access such as a book can have adverse

1083
00:46:24,780 --> 00:46:26,940
security repercussions things can blow

1084
00:46:26,940 --> 00:46:29,040
up uh so we need to enforce some

1085
00:46:29,040 --> 00:46:31,740
policies on the HTTP layer which is

1086
00:46:31,740 --> 00:46:35,579
layer seven to limit what exact apis

1087
00:46:35,579 --> 00:46:37,319
the typewriter is allowed to call and

1088
00:46:37,319 --> 00:46:39,660
which ones they aren't

1089
00:46:39,660 --> 00:46:41,819
so we're going to extend the existing

1090
00:46:41,819 --> 00:46:45,000
policy with an HTTP rule that looks like

1091
00:46:45,000 --> 00:46:46,920
this

1092
00:46:46,920 --> 00:46:48,839
and that should restrict the API access

1093
00:46:48,839 --> 00:46:51,480
to Only The Landing path and thus

1094
00:46:51,480 --> 00:46:53,579
prevent users from accessing the exhaust

1095
00:46:53,579 --> 00:46:55,020
Port which is why we had something blow

1096
00:46:55,020 --> 00:46:58,200
up a little while ago so again

1097
00:46:58,200 --> 00:46:59,280
we're going to go back to the network

1098
00:46:59,280 --> 00:47:01,859
policy tab

1099
00:47:01,859 --> 00:47:05,220
and it should be pre-filled I'm I'm just

1100
00:47:05,220 --> 00:47:06,540
going to show the image because you all

1101
00:47:06,540 --> 00:47:08,640
know how to get there at this point

1102
00:47:08,640 --> 00:47:10,500
um but you want to verify that the

1103
00:47:10,500 --> 00:47:11,880
policy will filter access to the Death

1104
00:47:11,880 --> 00:47:15,020
Star by its path

1105
00:47:16,619 --> 00:47:18,660
all right so now let's enforce it so

1106
00:47:18,660 --> 00:47:20,460
we're back in the terminal

1107
00:47:20,460 --> 00:47:22,740
and we are going to apply the updated

1108
00:47:22,740 --> 00:47:25,279
policy

1109
00:47:25,440 --> 00:47:27,960
hey hey I said apply

1110
00:47:27,960 --> 00:47:29,880
oh now you're just being me hold on

1111
00:47:29,880 --> 00:47:30,720
please

1112
00:47:30,720 --> 00:47:32,520
here we go

1113
00:47:32,520 --> 00:47:35,160
I copied a paste a copy to blank space

1114
00:47:35,160 --> 00:47:37,200
that's what I did

1115
00:47:37,200 --> 00:47:39,839
apologies let me get that

1116
00:47:39,839 --> 00:47:43,400
there we go there we go

1117
00:47:43,619 --> 00:47:45,660
it'll let you know that's configured and

1118
00:47:45,660 --> 00:47:47,160
then we're going to run the same test

1119
00:47:47,160 --> 00:47:50,960
that we ran at the beginning

1120
00:47:51,900 --> 00:47:54,180
and now you see access is denied which

1121
00:47:54,180 --> 00:47:56,700
is what we wanted so with L7 security

1122
00:47:56,700 --> 00:47:58,560
policies we're able to restrict the

1123
00:47:58,560 --> 00:48:00,540
access only to the required API

1124
00:48:00,540 --> 00:48:03,119
resources on Deathstar and that may we

1125
00:48:03,119 --> 00:48:04,740
that way we've implemented at least

1126
00:48:04,740 --> 00:48:07,380
privileged uh security approach for the

1127
00:48:07,380 --> 00:48:09,420
communication between the microservices

1128
00:48:09,420 --> 00:48:10,619
and I think we're about to have another

1129
00:48:10,619 --> 00:48:13,440
quiz are we

1130
00:48:13,440 --> 00:48:15,920
I think

1131
00:48:16,619 --> 00:48:19,380
yes all right you all got me an a last

1132
00:48:19,380 --> 00:48:21,300
time let's see what happens this time

1133
00:48:21,300 --> 00:48:23,640
all right what's the first one I need to

1134
00:48:23,640 --> 00:48:25,440
check Network policies can block or

1135
00:48:25,440 --> 00:48:28,560
allow traffic between pods yes or no

1136
00:48:28,560 --> 00:48:30,619
all right

1137
00:48:30,619 --> 00:48:34,079
l304 Network policies can filter HTTP

1138
00:48:34,079 --> 00:48:36,300
requests

1139
00:48:36,300 --> 00:48:38,760
okay we got some yups and a yeses

1140
00:48:38,760 --> 00:48:41,880
L7 Network policies can filter on HTTP

1141
00:48:41,880 --> 00:48:44,420
paths

1142
00:48:44,520 --> 00:48:45,900
yes okay

1143
00:48:45,900 --> 00:48:48,180
and the last one is psyllium supports

1144
00:48:48,180 --> 00:48:51,480
standard kubernetes Network policies

1145
00:48:51,480 --> 00:48:54,540
all right I got let's see what we got

1146
00:48:54,540 --> 00:48:56,040
they could have just given us an all of

1147
00:48:56,040 --> 00:48:58,880
the above but you know

1148
00:48:58,880 --> 00:49:03,140
ah one of these is wrong

1149
00:49:03,540 --> 00:49:05,579
the second one all right let's try

1150
00:49:05,579 --> 00:49:08,540
taking out the second one

1151
00:49:10,560 --> 00:49:13,680
you get a gold star thanks so much

1152
00:49:13,680 --> 00:49:15,119
let's move on to the next part we're

1153
00:49:15,119 --> 00:49:16,260
almost through

1154
00:49:16,260 --> 00:49:19,680
actually I think we are through so we

1155
00:49:19,680 --> 00:49:21,900
saved the Death Star and we made the

1156
00:49:21,900 --> 00:49:23,280
Empire a safe place and I think you know

1157
00:49:23,280 --> 00:49:24,180
what

1158
00:49:24,180 --> 00:49:26,700
we all deserve a gold star for that and

1159
00:49:26,700 --> 00:49:29,760
some good coffee uh so let's let me hit

1160
00:49:29,760 --> 00:49:31,380
this because I want to show you

1161
00:49:31,380 --> 00:49:33,619
something

1162
00:49:33,660 --> 00:49:35,220
so if you want to know more about

1163
00:49:35,220 --> 00:49:37,140
psyllium and I think Ray has one more

1164
00:49:37,140 --> 00:49:39,240
slide that he wanted to show you all for

1165
00:49:39,240 --> 00:49:40,800
Hubble which I really think is a really

1166
00:49:40,800 --> 00:49:42,540
good uh UI

1167
00:49:42,540 --> 00:49:43,980
um

1168
00:49:43,980 --> 00:49:46,319
if you go to

1169
00:49:46,319 --> 00:49:49,560
the psyllium website it'll give you

1170
00:49:49,560 --> 00:49:51,839
breakdown of what psyllium is

1171
00:49:51,839 --> 00:49:53,400
um it's going to give you a link to our

1172
00:49:53,400 --> 00:49:54,420
Slack

1173
00:49:54,420 --> 00:49:58,319
our slack is huge but everyone in there

1174
00:49:58,319 --> 00:50:00,000
is exceptionally helpful especially to

1175
00:50:00,000 --> 00:50:02,339
beginners I still ask beginner questions

1176
00:50:02,339 --> 00:50:04,140
all the time

1177
00:50:04,140 --> 00:50:05,640
um but the other thing is if you want to

1178
00:50:05,640 --> 00:50:06,960
contribute if you want to see the

1179
00:50:06,960 --> 00:50:09,000
documentation or if you want to know how

1180
00:50:09,000 --> 00:50:11,760
to install on K like k3s for example or

1181
00:50:11,760 --> 00:50:14,359
I like I use Rancher desktop it also has

1182
00:50:14,359 --> 00:50:16,980
instructions to do that also so please

1183
00:50:16,980 --> 00:50:18,839
go check it out um and if you have any

1184
00:50:18,839 --> 00:50:21,359
questions you are free to tweet me and

1185
00:50:21,359 --> 00:50:23,640
I'm going to let Ray come back up

1186
00:50:23,640 --> 00:50:26,220
thank you thank you and as a bonus and

1187
00:50:26,220 --> 00:50:29,220
anyone completing the challenge we're

1188
00:50:29,220 --> 00:50:31,500
working on some batches to correctly

1189
00:50:31,500 --> 00:50:34,859
digital badges so as soon they become

1190
00:50:34,859 --> 00:50:38,040
available you will award that batch for

1191
00:50:38,040 --> 00:50:40,260
this lab as well but be patient with us

1192
00:50:40,260 --> 00:50:42,119
we need some work to do there to make it

1193
00:50:42,119 --> 00:50:43,500
work

1194
00:50:43,500 --> 00:50:46,020
um So yeah thank you Tracy thank you for

1195
00:50:46,020 --> 00:50:47,940
running the lab I hope you all liked it

1196
00:50:47,940 --> 00:50:50,460
please provide feedback to us if you

1197
00:50:50,460 --> 00:50:53,220
want to know more there are I think

1198
00:50:53,220 --> 00:50:57,000
already 10 Labs we provide both open

1199
00:50:57,000 --> 00:50:59,880
source and Enterprise Labs on different

1200
00:50:59,880 --> 00:51:02,819
topics also cluster mesh egress Gateway

1201
00:51:02,819 --> 00:51:06,599
things like a bgp and advanced

1202
00:51:06,599 --> 00:51:08,400
networking

1203
00:51:08,400 --> 00:51:11,950
so let me plug in my screen

1204
00:51:11,950 --> 00:51:14,520
[Applause]

1205
00:51:14,520 --> 00:51:17,640
not always fine

1206
00:51:17,640 --> 00:51:20,819
so besides slack we have on this

1207
00:51:20,819 --> 00:51:22,440
conference two booths we have a psyllium

1208
00:51:22,440 --> 00:51:25,440
Booth we have an ISO Valen Booth feel

1209
00:51:25,440 --> 00:51:27,559
free to to visit us

1210
00:51:27,559 --> 00:51:31,200
if you want to know more about ebpf we

1211
00:51:31,200 --> 00:51:32,520
provide

1212
00:51:32,520 --> 00:51:35,400
um the cap the option or the opportunity

1213
00:51:35,400 --> 00:51:38,460
I would say to get the what is ebpf book

1214
00:51:38,460 --> 00:51:41,640
signed by Liz and we also have Natalya

1215
00:51:41,640 --> 00:51:43,099
who has the security

1216
00:51:43,099 --> 00:51:46,380
Advanced ebpf book so if you want to

1217
00:51:46,380 --> 00:51:48,180
know really more about that technology

1218
00:51:48,180 --> 00:51:50,640
how it actually work I recommend to

1219
00:51:50,640 --> 00:51:52,980
visit it as as us at the booth and even

1220
00:51:52,980 --> 00:51:54,540
get it signed by Liz

1221
00:51:54,540 --> 00:51:56,640
for Enterprise Solutions go to

1222
00:51:56,640 --> 00:51:59,940
isovania.com and to know more about that

1223
00:51:59,940 --> 00:52:01,920
and that concludes this session thank

1224
00:52:01,920 --> 00:52:04,079
you Tracy thank you Duffy for helping

1225
00:52:04,079 --> 00:52:07,020
out I hope you liked it enjoy kubecon

1226
00:52:07,020 --> 00:52:09,460
and thanks for joining

1227
00:52:09,460 --> 00:52:15,639
[Applause]

1228
00:52:17,400 --> 00:52:20,579
good good points

1229
00:52:20,579 --> 00:52:23,040
no question

1230
00:52:23,040 --> 00:52:26,040
happy to ask answer questions no all

1231
00:52:26,040 --> 00:52:29,160
right okay oh wait you got one

1232
00:52:29,160 --> 00:52:33,680
oh you want to see Hubble Hubble yeah

1233
00:52:35,520 --> 00:52:38,720
this is humble UI

1234
00:52:38,760 --> 00:52:42,059
um did I share that or did you join a

1235
00:52:42,059 --> 00:52:43,619
bit later

1236
00:52:43,619 --> 00:52:45,300
is there something specific you want to

1237
00:52:45,300 --> 00:52:46,619
see

1238
00:52:46,619 --> 00:52:48,300
oh wait did you want to see the CLI or

1239
00:52:48,300 --> 00:52:50,460
did you want to see the UI

1240
00:52:50,460 --> 00:52:53,700
you are yeah okay yeah yeah so so to to

1241
00:52:53,700 --> 00:52:55,920
to give it a bit more so on the left

1242
00:52:55,920 --> 00:52:58,559
here on the top you can select namespace

1243
00:52:58,559 --> 00:53:00,720
system monitor so I can also monitor

1244
00:53:00,720 --> 00:53:03,540
Cube system if I like

1245
00:53:03,540 --> 00:53:06,660
um but let's go back to the app example

1246
00:53:06,660 --> 00:53:09,540
so basically the top section allows you

1247
00:53:09,540 --> 00:53:10,800
to filter

1248
00:53:10,800 --> 00:53:13,680
either by selecting components and

1249
00:53:13,680 --> 00:53:16,680
services or entering

1250
00:53:16,680 --> 00:53:21,180
a filter you can filter on vertex drop

1251
00:53:21,180 --> 00:53:23,700
forward and such

1252
00:53:23,700 --> 00:53:27,599
um the top section shows life flows and

1253
00:53:27,599 --> 00:53:30,420
if you click on specific surface it will

1254
00:53:30,420 --> 00:53:32,760
focus the view for that given surface

1255
00:53:32,760 --> 00:53:35,760
and it will focus all the flows as well

1256
00:53:35,760 --> 00:53:37,740
Ingress and egress from that given

1257
00:53:37,740 --> 00:53:38,579
service

1258
00:53:38,579 --> 00:53:40,200
does that help

1259
00:53:40,200 --> 00:53:43,819
good okay another question

1260
00:53:45,839 --> 00:53:48,200
so

1261
00:53:57,780 --> 00:54:00,000
it's the actual traffic does it matter

1262
00:54:00,000 --> 00:54:01,920
if it's allowed or denied we can already

1263
00:54:01,920 --> 00:54:04,740
using ebpf observed flows between them

1264
00:54:04,740 --> 00:54:07,939
between surfaces

1265
00:54:08,280 --> 00:54:11,579
so if I would have a deny policy or not

1266
00:54:11,579 --> 00:54:13,200
allowing specific traffic you would see

1267
00:54:13,200 --> 00:54:14,240
drops

1268
00:54:14,240 --> 00:54:17,119
continuing in the flows

1269
00:54:17,119 --> 00:54:19,859
appearing and if it allows it will just

1270
00:54:19,859 --> 00:54:23,000
forward and show it as well

1271
00:54:25,559 --> 00:54:28,020
you have to have

1272
00:54:28,020 --> 00:54:30,000
traffic okay yeah you have to have

1273
00:54:30,000 --> 00:54:33,180
traffic to have a Hubble observe that

1274
00:54:33,180 --> 00:54:35,099
traffic

1275
00:54:35,099 --> 00:54:36,839
welcome

1276
00:54:36,839 --> 00:54:39,799
any other question

1277
00:54:40,200 --> 00:54:42,740
yes please

1278
00:54:48,540 --> 00:54:52,980
I'm no no not on on on on that layer for

1279
00:54:52,980 --> 00:54:55,980
jwdt

1280
00:55:01,740 --> 00:55:04,440
so with sidecar you mean you or Surface

1281
00:55:04,440 --> 00:55:07,140
mesh you mean yeah so so authorization

1282
00:55:07,140 --> 00:55:09,780
out authentication is coming in psyllium

1283
00:55:09,780 --> 00:55:14,520
1.13 so that's a road map implementation

1284
00:55:14,520 --> 00:55:17,520
foreign

1285
00:55:23,579 --> 00:55:26,520
cool thank you for again for joining us

1286
00:55:26,520 --> 00:55:29,540
enjoy your day

1287
00:55:29,840 --> 00:55:30,850
[Music]

1288
00:55:30,850 --> 00:55:33,480
[Applause]

