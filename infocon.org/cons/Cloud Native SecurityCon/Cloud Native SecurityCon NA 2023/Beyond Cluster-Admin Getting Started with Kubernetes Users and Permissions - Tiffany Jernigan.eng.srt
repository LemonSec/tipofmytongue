1
00:00:00,000 --> 00:00:03,899
hi I am Tiffany Jernigan I am a

2
00:00:03,899 --> 00:00:06,600
developer Advocate at VMware

3
00:00:06,600 --> 00:00:08,160
you can ask me what that means if you

4
00:00:08,160 --> 00:00:10,620
don't know afterward but includes doing

5
00:00:10,620 --> 00:00:12,860
stuff like this so yeah

6
00:00:12,860 --> 00:00:16,440
I have my Twitter up on there on further

7
00:00:16,440 --> 00:00:20,460
slides there's also my Mastodon which I

8
00:00:20,460 --> 00:00:21,720
wish it was shorter but you know it's

9
00:00:21,720 --> 00:00:24,420
the whole thing but it's there so yeah

10
00:00:24,420 --> 00:00:27,180
I'm going to be talking about like

11
00:00:27,180 --> 00:00:29,580
getting started with kubernetes users

12
00:00:29,580 --> 00:00:32,220
and permissions without just using

13
00:00:32,220 --> 00:00:35,360
cluster admin

14
00:00:37,020 --> 00:00:39,180
if all right come on

15
00:00:39,180 --> 00:00:42,440
I try to

16
00:00:43,440 --> 00:00:44,760
there we go

17
00:00:44,760 --> 00:00:47,460
all right so we have two different types

18
00:00:47,460 --> 00:00:49,739
of authors authentication or authen

19
00:00:49,739 --> 00:00:53,219
which is who are you so it could be any

20
00:00:53,219 --> 00:00:55,440
one of you people it could be like a

21
00:00:55,440 --> 00:00:58,199
robot or whatnot and then there is

22
00:00:58,199 --> 00:01:00,660
authorization or Aussie and that is what

23
00:01:00,660 --> 00:01:02,699
are you allowed to do for instance you

24
00:01:02,699 --> 00:01:05,760
could be like hey you are you Bob are

25
00:01:05,760 --> 00:01:07,439
allowed to be at this conference and

26
00:01:07,439 --> 00:01:10,020
attend someone's talk but no you're not

27
00:01:10,020 --> 00:01:12,000
allowed to throw like food at the

28
00:01:12,000 --> 00:01:15,140
speaker or something like that

29
00:01:15,780 --> 00:01:17,340
all right so first I'm going to talk

30
00:01:17,340 --> 00:01:20,280
about authen and provisioning users

31
00:01:20,280 --> 00:01:23,159
so kubernetes is very flexible here you

32
00:01:23,159 --> 00:01:26,100
can use TLS certs maybe with your own CA

33
00:01:26,100 --> 00:01:29,040
or not but since the kubernetes API

34
00:01:29,040 --> 00:01:31,799
server doesn't support revocation you

35
00:01:31,799 --> 00:01:33,540
should definitely use short-lived certs

36
00:01:33,540 --> 00:01:35,220
don't have ones that are like here I'm

37
00:01:35,220 --> 00:01:36,659
going to have this last for like five

38
00:01:36,659 --> 00:01:38,820
years and cross your fingers and hope

39
00:01:38,820 --> 00:01:41,520
nobody else gets access to that instead

40
00:01:41,520 --> 00:01:42,659
of trying to do something maybe that

41
00:01:42,659 --> 00:01:44,579
like you get a new one every hour or

42
00:01:44,579 --> 00:01:47,100
something like that you could also use

43
00:01:47,100 --> 00:01:50,159
oidc tokens with any oidc provider it's

44
00:01:50,159 --> 00:01:51,600
something like in-house for instance

45
00:01:51,600 --> 00:01:54,720
like dext or key cloak or SAS like OCTA

46
00:01:54,720 --> 00:01:57,840
and then that in turn can plug into your

47
00:01:57,840 --> 00:02:00,720
Cloud's IAM for example you can map your

48
00:02:00,720 --> 00:02:03,299
cloud provider users to your kubernetes

49
00:02:03,299 --> 00:02:04,920
users

50
00:02:04,920 --> 00:02:07,200
you can also deal with service accounts

51
00:02:07,200 --> 00:02:10,139
to provision users as well so as a

52
00:02:10,139 --> 00:02:12,300
little fun note in kubernetes you don't

53
00:02:12,300 --> 00:02:14,700
really create a user

54
00:02:14,700 --> 00:02:17,520
you give for example create pods

55
00:02:17,520 --> 00:02:21,180
permissions to say Bob and as long as

56
00:02:21,180 --> 00:02:23,160
someone shows up with a valid search or

57
00:02:23,160 --> 00:02:26,700
like an oidc token for Bob

58
00:02:26,700 --> 00:02:30,500
then they can create pods

59
00:02:31,560 --> 00:02:34,440
so there's like two main site things

60
00:02:34,440 --> 00:02:37,800
that interact with like kubernetes that

61
00:02:37,800 --> 00:02:40,500
are either humans which I as far as I'm

62
00:02:40,500 --> 00:02:43,319
aware is probably all of you

63
00:02:43,319 --> 00:02:45,480
um and then there's robots I don't know

64
00:02:45,480 --> 00:02:47,040
we'll see

65
00:02:47,040 --> 00:02:48,959
um so for humans you can do things with

66
00:02:48,959 --> 00:02:52,620
like TLS uh ODC service cans Etc with

67
00:02:52,620 --> 00:02:54,120
robots that's basically usually used

68
00:02:54,120 --> 00:02:57,379
with service accounts

69
00:02:57,720 --> 00:03:01,019
so starting off with certificates so the

70
00:03:01,019 --> 00:03:04,319
commands here show you how to create a

71
00:03:04,319 --> 00:03:06,000
certificate signing request you might

72
00:03:06,000 --> 00:03:08,040
see that listed as CSR in short in a lot

73
00:03:08,040 --> 00:03:08,940
of places

74
00:03:08,940 --> 00:03:11,760
this example is using openssl because

75
00:03:11,760 --> 00:03:13,860
it's super widespread and you probably

76
00:03:13,860 --> 00:03:15,959
have it on your machine by default I'm

77
00:03:15,959 --> 00:03:18,540
using a Mac and it was already there I

78
00:03:18,540 --> 00:03:20,580
didn't have to download anything many

79
00:03:20,580 --> 00:03:21,900
folks though might prefer using

80
00:03:21,900 --> 00:03:24,000
something like CF SSL which is

81
00:03:24,000 --> 00:03:25,980
cloudflare's or maybe they want to use

82
00:03:25,980 --> 00:03:28,200
Vault or some other certificate

83
00:03:28,200 --> 00:03:30,780
Authority and that's usually shortened

84
00:03:30,780 --> 00:03:31,920
to ca

85
00:03:31,920 --> 00:03:34,440
and then after that you then transfer

86
00:03:34,440 --> 00:03:37,739
the CSR to the CA and depending on what

87
00:03:37,739 --> 00:03:39,239
kind of cluster you have this can be

88
00:03:39,239 --> 00:03:41,900
done differently

89
00:03:42,000 --> 00:03:44,280
so for example if you are using a

90
00:03:44,280 --> 00:03:46,440
self-hosted cluster or you're using like

91
00:03:46,440 --> 00:03:48,000
Cube ADM

92
00:03:48,000 --> 00:03:50,280
basically where you have access to the

93
00:03:50,280 --> 00:03:52,739
nodes of the control plane and if you

94
00:03:52,739 --> 00:03:54,120
want to do like some experimentation

95
00:03:54,120 --> 00:03:56,640
here is a specific example that you

96
00:03:56,640 --> 00:03:58,260
could be using

97
00:03:58,260 --> 00:04:00,780
this example assumes that we have a

98
00:04:00,780 --> 00:04:02,879
cluster deployed with cubeadm for this

99
00:04:02,879 --> 00:04:05,400
one and that the ca Keys live

100
00:04:05,400 --> 00:04:08,459
specifically in Etsy kubernetes pki on

101
00:04:08,459 --> 00:04:10,140
the control plane

102
00:04:10,140 --> 00:04:12,180
and you get and then like for instance

103
00:04:12,180 --> 00:04:13,799
the one two three four you could have as

104
00:04:13,799 --> 00:04:17,540
something actually meaningful to you

105
00:04:18,660 --> 00:04:21,298
so another method with certificates is

106
00:04:21,298 --> 00:04:24,360
going through the CSR API so this is

107
00:04:24,360 --> 00:04:25,740
what if you want a deal certificates

108
00:04:25,740 --> 00:04:27,240
this is the route you'd have to go down

109
00:04:27,240 --> 00:04:29,220
if you're using a managed cluster since

110
00:04:29,220 --> 00:04:31,919
you can't actually get again inside of

111
00:04:31,919 --> 00:04:34,979
the control plane on a managed cluster

112
00:04:34,979 --> 00:04:36,960
like this one works for managed and

113
00:04:36,960 --> 00:04:38,820
self-hosted basically

114
00:04:38,820 --> 00:04:41,340
um so the CSR API is in the kubernetes

115
00:04:41,340 --> 00:04:43,500
API so you can get certificates from it

116
00:04:43,500 --> 00:04:46,440
it basically makes kubernetes act as a

117
00:04:46,440 --> 00:04:48,000
CA

118
00:04:48,000 --> 00:04:50,340
and this is what you would apply with

119
00:04:50,340 --> 00:04:52,320
Cube cuddle it might be a little harder

120
00:04:52,320 --> 00:04:54,000
to read back there there's a bunch of

121
00:04:54,000 --> 00:04:56,460
lines but basically what it's doing is

122
00:04:56,460 --> 00:04:58,500
it's giving you the request which is

123
00:04:58,500 --> 00:05:01,800
that uh file that we the CSR file that

124
00:05:01,800 --> 00:05:04,440
had been dumped out from openssl

125
00:05:04,440 --> 00:05:05,400
previously

126
00:05:05,400 --> 00:05:08,699
and it uses that so like this whole part

127
00:05:08,699 --> 00:05:10,919
dealing with the CSR API you're

128
00:05:10,919 --> 00:05:12,720
interacting with kubernetes with Cube

129
00:05:12,720 --> 00:05:14,400
cuddle

130
00:05:14,400 --> 00:05:17,460
so after you create the CSR then you

131
00:05:17,460 --> 00:05:19,740
need to actually go and approve it

132
00:05:19,740 --> 00:05:22,560
so you could do Cube cuddle certificate

133
00:05:22,560 --> 00:05:24,539
approve and then like my thing is like

134
00:05:24,539 --> 00:05:26,940
user Eagles a Lovelace the user equals

135
00:05:26,940 --> 00:05:29,639
is just so that like it's not required

136
00:05:29,639 --> 00:05:31,800
you could just have it a Lovelace or

137
00:05:31,800 --> 00:05:33,300
whatever you wanted there it's just so

138
00:05:33,300 --> 00:05:34,500
like if you were searching and you

139
00:05:34,500 --> 00:05:35,940
wanted to go based on what you're

140
00:05:35,940 --> 00:05:38,280
defining as a user you could see all the

141
00:05:38,280 --> 00:05:40,320
people are like that

142
00:05:40,320 --> 00:05:42,300
um and then what you need to do is to

143
00:05:42,300 --> 00:05:44,220
retrieve the certificate

144
00:05:44,220 --> 00:05:48,300
so then you just do a get on the CSR

145
00:05:48,300 --> 00:05:51,060
you'd get the search and then you would

146
00:05:51,060 --> 00:05:54,900
do a base64 to code on user.drt and then

147
00:05:54,900 --> 00:05:58,500
you give that file back to the user

148
00:05:58,500 --> 00:06:01,740
so once you actually have that

149
00:06:01,740 --> 00:06:04,860
um then you can pass in your key and the

150
00:06:04,860 --> 00:06:08,699
CRT file over to cube cuddle config

151
00:06:08,699 --> 00:06:10,080
which is basically adding the

152
00:06:10,080 --> 00:06:12,240
certificate and the key to your

153
00:06:12,240 --> 00:06:15,139
cubeconfig file

154
00:06:15,840 --> 00:06:18,600
all right so now certificates are out of

155
00:06:18,600 --> 00:06:21,479
the way for a bit so the other one of

156
00:06:21,479 --> 00:06:22,979
the other things is tokens

157
00:06:22,979 --> 00:06:24,300
so if you have a conceptual

158
00:06:24,300 --> 00:06:26,280
understanding of TLS then you probably

159
00:06:26,280 --> 00:06:28,800
have one for oidc as well

160
00:06:28,800 --> 00:06:30,900
things are different depending whether

161
00:06:30,900 --> 00:06:33,180
you're using a self-hosted cluster or if

162
00:06:33,180 --> 00:06:35,460
you're not and if you are there's two

163
00:06:35,460 --> 00:06:38,699
flags up there that you need to add so

164
00:06:38,699 --> 00:06:41,819
one for the oidc issuer URL and one for

165
00:06:41,819 --> 00:06:45,060
the oidc client ID

166
00:06:45,060 --> 00:06:47,940
on manage clusters you want to use the

167
00:06:47,940 --> 00:06:50,280
oedc with the provider basically there

168
00:06:50,280 --> 00:06:53,400
is often like a quasi transparent

169
00:06:53,400 --> 00:06:56,160
like integration with IIM and generally

170
00:06:56,160 --> 00:06:58,979
that is with using oidc under the hood

171
00:06:58,979 --> 00:07:01,460
and it will then automatically be using

172
00:07:01,460 --> 00:07:04,380
IM or something else and just like do

173
00:07:04,380 --> 00:07:05,759
that for you

174
00:07:05,759 --> 00:07:07,440
um there's some links that tell you a

175
00:07:07,440 --> 00:07:08,940
little bit more about it like one is

176
00:07:08,940 --> 00:07:11,100
like it's specific for

177
00:07:11,100 --> 00:07:14,039
um uh eks but obviously there's there

178
00:07:14,039 --> 00:07:15,479
should be guides for all the other ones

179
00:07:15,479 --> 00:07:17,220
as well there's just kind of limited

180
00:07:17,220 --> 00:07:20,099
space on this slide so I just picked one

181
00:07:20,099 --> 00:07:21,539
um so and then if you're not using a

182
00:07:21,539 --> 00:07:23,639
cluster like that then if you are say

183
00:07:23,639 --> 00:07:25,560
already using something like Vault

184
00:07:25,560 --> 00:07:27,300
inserts or you're just like truly

185
00:07:27,300 --> 00:07:29,520
invested inserts already you probably

186
00:07:29,520 --> 00:07:31,380
still want to just keep using TLS starts

187
00:07:31,380 --> 00:07:32,819
versus starting and trying to figure out

188
00:07:32,819 --> 00:07:36,840
everything with tokens whether I do see

189
00:07:36,840 --> 00:07:40,319
and if you're not already using TLS

190
00:07:40,319 --> 00:07:43,020
darts you may not want to get started

191
00:07:43,020 --> 00:07:46,380
there just for that at that point

192
00:07:46,380 --> 00:07:48,479
um service accounts are typically used

193
00:07:48,479 --> 00:07:51,479
for say like processes programs sources

194
00:07:51,479 --> 00:07:54,000
that are running autonomously on a

195
00:07:54,000 --> 00:07:57,599
cluster but nothing's going to stop us

196
00:07:57,599 --> 00:08:00,180
from using them to manage access and

197
00:08:00,180 --> 00:08:02,160
permissions for users

198
00:08:02,160 --> 00:08:03,960
even if that's not really what they were

199
00:08:03,960 --> 00:08:05,819
meant for in the first place but you can

200
00:08:05,819 --> 00:08:09,060
do it so for the demo I'll be doing I'll

201
00:08:09,060 --> 00:08:10,620
be using them for demo purses and you

202
00:08:10,620 --> 00:08:12,120
can too

203
00:08:12,120 --> 00:08:14,460
um if you don't like want to go the

204
00:08:14,460 --> 00:08:15,720
right way through like setting up a

205
00:08:15,720 --> 00:08:17,400
bunch of Hoops to actually deal with

206
00:08:17,400 --> 00:08:20,160
setting up TLS certificates or IDC based

207
00:08:20,160 --> 00:08:21,599
authentication so like if you're

208
00:08:21,599 --> 00:08:22,919
especially just trying to start and

209
00:08:22,919 --> 00:08:24,180
figure stuff out of the beginning it's a

210
00:08:24,180 --> 00:08:26,340
really good way to go about it

211
00:08:26,340 --> 00:08:28,680
um so a service count is yeah it's just

212
00:08:28,680 --> 00:08:30,660
a user with some funny looking name

213
00:08:30,660 --> 00:08:33,479
thing there um it's like system service

214
00:08:33,479 --> 00:08:35,760
account and then whatever namespace that

215
00:08:35,760 --> 00:08:37,799
you're in and then the name of the

216
00:08:37,799 --> 00:08:40,140
service account

217
00:08:40,140 --> 00:08:42,719
so then there's since we're talking

218
00:08:42,719 --> 00:08:44,640
about tokens in this space so there's

219
00:08:44,640 --> 00:08:47,580
also service account tokens they are

220
00:08:47,580 --> 00:08:50,160
Json web tokens or jots

221
00:08:50,160 --> 00:08:52,440
they're like oidt tokens but they are

222
00:08:52,440 --> 00:08:54,120
generated by the kubernetes control

223
00:08:54,120 --> 00:08:56,820
plane specifically it's a controller in

224
00:08:56,820 --> 00:08:58,440
the controller manager

225
00:08:58,440 --> 00:09:00,720
and by default

226
00:09:00,720 --> 00:09:03,540
um kubernetes will on like if within

227
00:09:03,540 --> 00:09:05,399
your container pod uh kubernetes will

228
00:09:05,399 --> 00:09:07,320
automatically place the token in that in

229
00:09:07,320 --> 00:09:09,240
a file specifically under that location

230
00:09:09,240 --> 00:09:10,680
which we'll actually take a look at

231
00:09:10,680 --> 00:09:12,300
during the demo

232
00:09:12,300 --> 00:09:14,640
and that token is a token for the

233
00:09:14,640 --> 00:09:16,440
service account of the Pod that that

234
00:09:16,440 --> 00:09:19,760
container belongs to

235
00:09:22,800 --> 00:09:23,880
all right

236
00:09:23,880 --> 00:09:26,160
so enough about

237
00:09:26,160 --> 00:09:28,320
that type of auth now let's go to the

238
00:09:28,320 --> 00:09:30,839
other type of so we're gonna look at

239
00:09:30,839 --> 00:09:33,180
Aussie and specifically role-based

240
00:09:33,180 --> 00:09:35,459
access control or our back for short if

241
00:09:35,459 --> 00:09:36,600
you hadn't noticed there's a lot of

242
00:09:36,600 --> 00:09:39,480
acronyms they love the acronyms

243
00:09:39,480 --> 00:09:42,959
so a high-level idea of it on kubernetes

244
00:09:42,959 --> 00:09:46,019
is that first you define a role or a

245
00:09:46,019 --> 00:09:47,459
cholesterol so like a role would be

246
00:09:47,459 --> 00:09:49,140
specific to a namespace a cholesterol

247
00:09:49,140 --> 00:09:51,839
would be well for your cluster and that

248
00:09:51,839 --> 00:09:53,519
is a collection of permissions like

249
00:09:53,519 --> 00:09:56,820
things that can be done so things like

250
00:09:56,820 --> 00:09:59,339
listing pods creating deployments

251
00:09:59,339 --> 00:10:02,040
setting the scaling for like a specific

252
00:10:02,040 --> 00:10:05,000
deployment and a bunch of other things

253
00:10:05,000 --> 00:10:07,920
after you create that role or cluster

254
00:10:07,920 --> 00:10:10,560
role then you would like it exists but

255
00:10:10,560 --> 00:10:12,839
it doesn't actually do anything so you

256
00:10:12,839 --> 00:10:14,700
need to be able to bind that role or

257
00:10:14,700 --> 00:10:17,100
cluster role to say like a user or a

258
00:10:17,100 --> 00:10:19,800
group or a service account with using a

259
00:10:19,800 --> 00:10:23,719
role binding or a cluster role binding

260
00:10:24,120 --> 00:10:26,160
if you're wondering oh hey what can I

261
00:10:26,160 --> 00:10:28,500
actually do so say my resource is a pod

262
00:10:28,500 --> 00:10:30,839
what can I do with a pod like how do I

263
00:10:30,839 --> 00:10:33,360
see whether I can do a get or a list or

264
00:10:33,360 --> 00:10:34,980
a watch or a patch or whatever those

265
00:10:34,980 --> 00:10:37,080
things are you can actually find that

266
00:10:37,080 --> 00:10:40,320
out using Cube cuddle and it'll

267
00:10:40,320 --> 00:10:42,540
basically spit out a thing of what you

268
00:10:42,540 --> 00:10:44,339
can actually do with it

269
00:10:44,339 --> 00:10:46,320
and you can depending on like where the

270
00:10:46,320 --> 00:10:48,899
group is like maybe it's in V1 maybe

271
00:10:48,899 --> 00:10:50,760
it's not if you're wondering hey where

272
00:10:50,760 --> 00:10:52,920
is located you could just do Cube cuddle

273
00:10:52,920 --> 00:10:55,860
API space API resources and figure out

274
00:10:55,860 --> 00:10:58,399
where it's located

275
00:10:58,860 --> 00:11:01,140
all right so this is the default service

276
00:11:01,140 --> 00:11:02,700
account that gets created for whatever

277
00:11:02,700 --> 00:11:05,640
namespace you are creating so this is

278
00:11:05,640 --> 00:11:08,839
cnsc because that's a short abbreviation

279
00:11:08,839 --> 00:11:11,459
uh for this conference

280
00:11:11,459 --> 00:11:12,720
um and then it just creates a default

281
00:11:12,720 --> 00:11:14,040
one

282
00:11:14,040 --> 00:11:16,200
then here is an example role for getting

283
00:11:16,200 --> 00:11:20,579
pods so you can see like in resource you

284
00:11:20,579 --> 00:11:22,140
have pods and then the verbs are again

285
00:11:22,140 --> 00:11:24,720
list so the reason you have both is say

286
00:11:24,720 --> 00:11:28,200
if you were like I have an nginx pod if

287
00:11:28,200 --> 00:11:31,800
I have just git I could do a cube cuddle

288
00:11:31,800 --> 00:11:34,980
get pod nginx if I try doing keep get

289
00:11:34,980 --> 00:11:37,920
I'll get pods it doesn't it can't do

290
00:11:37,920 --> 00:11:39,779
that any of the list

291
00:11:39,779 --> 00:11:41,399
and then you need to have the roll

292
00:11:41,399 --> 00:11:43,260
binding so you can see that this

293
00:11:43,260 --> 00:11:45,779
basically has the role that get pods

294
00:11:45,779 --> 00:11:47,160
roll and then it has the service count

295
00:11:47,160 --> 00:11:48,720
which is the one that I've been talking

296
00:11:48,720 --> 00:11:50,040
about

297
00:11:50,040 --> 00:11:51,839
um there's also fun stuff with auditing

298
00:11:51,839 --> 00:11:54,060
and of course I noticed that I hadn't

299
00:11:54,060 --> 00:11:55,380
fixed this before we got here and I

300
00:11:55,380 --> 00:11:57,480
didn't fix it now the first line is

301
00:11:57,480 --> 00:11:59,640
supposed to say Cube cuddle off

302
00:11:59,640 --> 00:12:02,880
space canine dash dash list

303
00:12:02,880 --> 00:12:05,040
um I'll fix that later but um and then

304
00:12:05,040 --> 00:12:06,060
there's a bunch of other tools that

305
00:12:06,060 --> 00:12:07,500
aren't specifically built in that you

306
00:12:07,500 --> 00:12:10,500
can get like plugins for

307
00:12:10,500 --> 00:12:14,480
all right so demo time

308
00:12:18,660 --> 00:12:21,899
after I fix that

309
00:12:21,899 --> 00:12:23,640
there we go let's pretend that never

310
00:12:23,640 --> 00:12:25,200
happened

311
00:12:25,200 --> 00:12:27,740
all right

312
00:12:30,360 --> 00:12:32,220
I clear it and then it just comes right

313
00:12:32,220 --> 00:12:34,920
back all right so first uh let's make

314
00:12:34,920 --> 00:12:37,260
sure that I did delete the namespace so

315
00:12:37,260 --> 00:12:39,420
if we get namespaces all right cool so

316
00:12:39,420 --> 00:12:41,279
there's just a bunch of the initial

317
00:12:41,279 --> 00:12:44,040
stuff so if I do okay create namespace

318
00:12:44,040 --> 00:12:48,199
of like Cloud native security con

319
00:12:49,560 --> 00:12:50,880
all right

320
00:12:50,880 --> 00:12:52,260
um so there's this really cool tool

321
00:12:52,260 --> 00:12:55,079
called Cuban s that Ahmed Al Balkan

322
00:12:55,079 --> 00:12:56,700
created that makes it so that you can

323
00:12:56,700 --> 00:12:58,920
switch between name spaces that you're

324
00:12:58,920 --> 00:13:00,240
currently in so you don't have to do the

325
00:13:00,240 --> 00:13:01,680
dash n and then give it the namespace

326
00:13:01,680 --> 00:13:03,060
every time which can be really annoying

327
00:13:03,060 --> 00:13:05,639
so if I do a Cuban s

328
00:13:05,639 --> 00:13:09,540
and then that so now I am in that one so

329
00:13:09,540 --> 00:13:11,639
I've actually just ran Cuban s you can

330
00:13:11,639 --> 00:13:13,620
see that I'm specifically in there okay

331
00:13:13,620 --> 00:13:14,820
so I'm just going to create some

332
00:13:14,820 --> 00:13:15,899
deployments

333
00:13:15,899 --> 00:13:21,079
we will see why in a bit

334
00:13:22,019 --> 00:13:25,279
how's the internet everybody

335
00:13:30,180 --> 00:13:32,459
all right so I'm just they're both using

336
00:13:32,459 --> 00:13:34,320
nginx because they are

337
00:13:34,320 --> 00:13:35,820
they spin up I don't have to do anything

338
00:13:35,820 --> 00:13:37,800
weird to make sure that it stays running

339
00:13:37,800 --> 00:13:39,000
and whatnot

340
00:13:39,000 --> 00:13:41,700
all right so if I did okay get odds oh

341
00:13:41,700 --> 00:13:43,079
yeah and I can't remember very much of

342
00:13:43,079 --> 00:13:46,079
this uh the K is me being lazy and

343
00:13:46,079 --> 00:13:48,959
aliasing Cube cuddle 2K because I don't

344
00:13:48,959 --> 00:13:50,160
want to type that

345
00:13:50,160 --> 00:13:51,959
I already like my tab completion and

346
00:13:51,959 --> 00:13:53,760
everything else so um all right if we do

347
00:13:53,760 --> 00:13:56,779
a k get pods

348
00:13:57,000 --> 00:13:59,220
you can see the two that are running

349
00:13:59,220 --> 00:14:00,959
there right now

350
00:14:00,959 --> 00:14:03,180
so like basically

351
00:14:03,180 --> 00:14:04,740
um however my cluster is set up I have

352
00:14:04,740 --> 00:14:06,779
an effect like cluster admin permissions

353
00:14:06,779 --> 00:14:08,700
I can if I wanted I can go and delete

354
00:14:08,700 --> 00:14:10,620
these I can scale the deployments there

355
00:14:10,620 --> 00:14:12,779
are there all that fun stuff

356
00:14:12,779 --> 00:14:16,139
how about what if we go inside of a pod

357
00:14:16,139 --> 00:14:19,079
so if I do

358
00:14:19,079 --> 00:14:21,680
oh my gosh

359
00:14:23,100 --> 00:14:25,740
okay so there's this cool thing called

360
00:14:25,740 --> 00:14:28,380
nyx3. Dev it basically ends up giving

361
00:14:28,380 --> 00:14:31,320
you a container image that has these

362
00:14:31,320 --> 00:14:33,300
things that you list with slashes

363
00:14:33,300 --> 00:14:35,339
installed in it already so like shell

364
00:14:35,339 --> 00:14:40,459
Cube cuddle curl JQ it's really handy

365
00:14:44,040 --> 00:14:46,079
the internet was nicer to me when I demo

366
00:14:46,079 --> 00:14:47,160
on this

367
00:14:47,160 --> 00:14:49,320
all right so now if we tried to do a

368
00:14:49,320 --> 00:14:51,540
cube cuddle

369
00:14:51,540 --> 00:14:54,319
oh my God

370
00:14:57,480 --> 00:15:00,260
oh my goodness

371
00:15:01,380 --> 00:15:02,459
okay

372
00:15:02,459 --> 00:15:05,579
so I'm on the same cluster

373
00:15:05,579 --> 00:15:08,339
but now it's it's throwing up and saying

374
00:15:08,339 --> 00:15:10,620
I can't do this so like it might be hard

375
00:15:10,620 --> 00:15:12,660
to read because of how it's wrapping it

376
00:15:12,660 --> 00:15:15,540
but basically it's saying that my that

377
00:15:15,540 --> 00:15:18,540
weird name my user like with my name

378
00:15:18,540 --> 00:15:21,000
space of cnsc and default which is again

379
00:15:21,000 --> 00:15:25,019
the default essay that gets created uh I

380
00:15:25,019 --> 00:15:28,380
don't have the ability to uh list like

381
00:15:28,380 --> 00:15:30,779
pods in this namespace

382
00:15:30,779 --> 00:15:34,860
so basically we need to fix that so we

383
00:15:34,860 --> 00:15:38,160
can do that by creating a role in a role

384
00:15:38,160 --> 00:15:39,959
binding so we don't right now we don't

385
00:15:39,959 --> 00:15:41,339
have to create a service account because

386
00:15:41,339 --> 00:15:42,300
well

387
00:15:42,300 --> 00:15:44,399
I'm just going to use the default one

388
00:15:44,399 --> 00:15:48,360
so if I do K create role

389
00:15:48,360 --> 00:15:50,040
all right so this thing I'm just calling

390
00:15:50,040 --> 00:15:52,560
it get pods verb is just whatever type

391
00:15:52,560 --> 00:15:54,600
of action you're going to be doing so I

392
00:15:54,600 --> 00:15:55,980
want to be able to do a get and I want

393
00:15:55,980 --> 00:15:57,899
to be able to do a list and I want it

394
00:15:57,899 --> 00:16:01,139
specifically for the pods resource

395
00:16:01,139 --> 00:16:02,639
so I created that if you want to take a

396
00:16:02,639 --> 00:16:05,060
look at it

397
00:16:07,620 --> 00:16:09,899
um we can see basically the API groups

398
00:16:09,899 --> 00:16:12,180
the resources are pods and that I want

399
00:16:12,180 --> 00:16:14,160
to be able to do a git in a list

400
00:16:14,160 --> 00:16:15,540
so then

401
00:16:15,540 --> 00:16:17,639
now so we have the essay we have the

402
00:16:17,639 --> 00:16:19,740
role now we actually need to bind them

403
00:16:19,740 --> 00:16:24,620
together so if I create role binding

404
00:16:24,899 --> 00:16:26,820
so this one you give it the role and

405
00:16:26,820 --> 00:16:28,320
then you give it that service count so

406
00:16:28,320 --> 00:16:29,399
that's the name of the service can that

407
00:16:29,399 --> 00:16:32,060
where you have right now

408
00:16:32,820 --> 00:16:36,420
so now if I do a cube pedal get pods I

409
00:16:36,420 --> 00:16:38,339
can actually see them

410
00:16:38,339 --> 00:16:42,720
okay so that's cool so now let's it has

411
00:16:42,720 --> 00:16:45,540
has anyone tried using like Dash V6 or

412
00:16:45,540 --> 00:16:48,300
like UPS the verbosity on a cube cuddle

413
00:16:48,300 --> 00:16:50,040
command before

414
00:16:50,040 --> 00:16:53,579
all right see two people all right so if

415
00:16:53,579 --> 00:16:55,800
we did the get pods again if we do Dash

416
00:16:55,800 --> 00:16:58,740
like V6 you can actually see what

417
00:16:58,740 --> 00:17:02,100
address is being used for these requests

418
00:17:02,100 --> 00:17:06,540
so if I go and copy this

419
00:17:06,540 --> 00:17:10,380
I could go and try doing a curl I'm

420
00:17:10,380 --> 00:17:12,540
going to do test h k which is

421
00:17:12,540 --> 00:17:15,839
technically Dash insecure because like I

422
00:17:15,839 --> 00:17:18,540
know this is my cluster I trust it this

423
00:17:18,540 --> 00:17:21,240
is a demo um I don't really like I'm not

424
00:17:21,240 --> 00:17:23,520
worried that whatever the API is there

425
00:17:23,520 --> 00:17:26,040
or is giving back to me is like garbage

426
00:17:26,040 --> 00:17:28,079
or some crazy stuff

427
00:17:28,079 --> 00:17:29,880
for now

428
00:17:29,880 --> 00:17:33,419
um so if I do Dash K and then I give it

429
00:17:33,419 --> 00:17:37,799
the URL there so okay now it it's

430
00:17:37,799 --> 00:17:40,980
failing so like what's going on here I

431
00:17:40,980 --> 00:17:43,320
just did a cube cuddle command to get

432
00:17:43,320 --> 00:17:46,260
pods I haven't uh I have my role binding

433
00:17:46,260 --> 00:17:49,440
everything but it's telling me I can't

434
00:17:49,440 --> 00:17:51,840
do it if you specifically look there it

435
00:17:51,840 --> 00:17:54,780
says that you are system anonymous

436
00:17:54,780 --> 00:17:56,340
it's because it doesn't actually know

437
00:17:56,340 --> 00:17:57,900
who you are

438
00:17:57,900 --> 00:18:00,360
so in order to fix that you need to

439
00:18:00,360 --> 00:18:01,860
actually give it the service account

440
00:18:01,860 --> 00:18:03,360
token

441
00:18:03,360 --> 00:18:06,240
so and remember that this right side is

442
00:18:06,240 --> 00:18:09,179
within a pod that's in this cluster if

443
00:18:09,179 --> 00:18:11,520
we look in

444
00:18:11,520 --> 00:18:13,740
this one location

445
00:18:13,740 --> 00:18:16,440
we can see this lovely token this

446
00:18:16,440 --> 00:18:17,880
looking at this you're just like okay

447
00:18:17,880 --> 00:18:19,860
it's a bunch of gibberish like I guess

448
00:18:19,860 --> 00:18:24,740
that's your token if we go and copy this

449
00:18:25,740 --> 00:18:28,620
and Slide the correct direction there we

450
00:18:28,620 --> 00:18:31,980
go if you go to jwt.io you can actually

451
00:18:31,980 --> 00:18:35,520
dump it your encoded stuff in there and

452
00:18:35,520 --> 00:18:38,940
dump it out and actually mean something

453
00:18:38,940 --> 00:18:40,440
um so I'm not sure if it's really

454
00:18:40,440 --> 00:18:43,080
legible so basically you can see I need

455
00:18:43,080 --> 00:18:45,299
I'm using a gke cluster

456
00:18:45,299 --> 00:18:47,340
um you can see the namespace is the NSD

457
00:18:47,340 --> 00:18:49,140
tester is that pod that I am currently

458
00:18:49,140 --> 00:18:50,100
in

459
00:18:50,100 --> 00:18:52,799
and then my default service account and

460
00:18:52,799 --> 00:18:55,580
you can see all that there

461
00:18:56,039 --> 00:18:58,980
all right cool so we have that great so

462
00:18:58,980 --> 00:19:01,679
now what we do with our new with our

463
00:19:01,679 --> 00:19:05,179
curl is now we give it a header

464
00:19:08,100 --> 00:19:10,799
so authorization Bearer I always could

465
00:19:10,799 --> 00:19:12,539
do this wrong okay I need to save my

466
00:19:12,539 --> 00:19:13,740
token

467
00:19:13,740 --> 00:19:18,500
so I can just call it like this

468
00:19:25,500 --> 00:19:29,039
come on laptop I have faith in you

469
00:19:29,039 --> 00:19:31,640
sometimes

470
00:19:31,799 --> 00:19:34,580
no faith

471
00:19:35,640 --> 00:19:38,660
fine be that way

472
00:19:39,840 --> 00:19:43,340
what did what did you say I did

473
00:19:44,039 --> 00:19:45,419
uh

474
00:19:45,419 --> 00:19:47,400
oh yeah

475
00:19:47,400 --> 00:19:50,059
whoops

476
00:19:50,100 --> 00:19:54,660
tired all right okay token

477
00:19:54,660 --> 00:19:57,480
um yeah so uh back to what I was saying

478
00:19:57,480 --> 00:20:01,679
is we and so we do if we do the curl

479
00:20:01,679 --> 00:20:04,679
give it Dash h

480
00:20:04,679 --> 00:20:06,679
a

481
00:20:07,679 --> 00:20:10,679
authorization

482
00:20:11,760 --> 00:20:13,500
bear

483
00:20:13,500 --> 00:20:15,720
token

484
00:20:15,720 --> 00:20:19,340
I did I throw

485
00:20:21,000 --> 00:20:22,440
this is why people shouldn't let me type

486
00:20:22,440 --> 00:20:25,740
all right so if I pass that into JQ and

487
00:20:25,740 --> 00:20:27,900
gave it the items

488
00:20:27,900 --> 00:20:32,940
dot metadata dot name

489
00:20:32,940 --> 00:20:36,200
man this is so slow

490
00:20:36,419 --> 00:20:38,780
hello

491
00:20:42,419 --> 00:20:45,600
okay yeah so there you can see the pods

492
00:20:45,600 --> 00:20:48,720
that we had before okay so with the

493
00:20:48,720 --> 00:20:51,240
whole dash k thing let's get rid of that

494
00:20:51,240 --> 00:20:55,260
now if we look in this same folder

495
00:20:55,260 --> 00:20:59,000
oh my goodness hello

496
00:21:10,260 --> 00:21:12,860
trying

497
00:21:15,299 --> 00:21:18,059
not okay wow all right

498
00:21:18,059 --> 00:21:19,860
um You can see here that there's a CA

499
00:21:19,860 --> 00:21:23,460
CRT file in here so instead of this

500
00:21:23,460 --> 00:21:26,299
lovely Dash k

501
00:21:27,179 --> 00:21:31,039
we do see a cert

502
00:21:31,200 --> 00:21:34,159
oh my goodness

503
00:21:44,220 --> 00:21:46,740
and it still works

504
00:21:46,740 --> 00:21:49,440
okay so um as of one of the more recent

505
00:21:49,440 --> 00:21:51,900
versions of kubernetes service account

506
00:21:51,900 --> 00:21:54,179
tokens are bound by default

507
00:21:54,179 --> 00:21:56,940
so let me show you what that means so

508
00:21:56,940 --> 00:21:58,860
this token basically is bound to that

509
00:21:58,860 --> 00:22:03,860
pod so if I were to go over here

510
00:22:04,440 --> 00:22:07,140
and basically I'm creating another pod

511
00:22:07,140 --> 00:22:09,299
just like the other one and

512
00:22:09,299 --> 00:22:11,640
so if I were to go and just make token

513
00:22:11,640 --> 00:22:14,880
equals to that same thing oh not not

514
00:22:14,880 --> 00:22:17,179
that

515
00:22:31,020 --> 00:22:33,780
and then if I go and copy this exact

516
00:22:33,780 --> 00:22:36,260
command

517
00:22:40,679 --> 00:22:43,140
you can see that I can still run it

518
00:22:43,140 --> 00:22:43,860
right

519
00:22:43,860 --> 00:22:46,559
so now what happens if I decide that I

520
00:22:46,559 --> 00:22:49,280
don't want this pod anymore

521
00:22:50,820 --> 00:22:53,580
depending on how slow my internet is

522
00:22:53,580 --> 00:22:55,740
um this might take a million years to go

523
00:22:55,740 --> 00:22:57,980
away

524
00:23:07,440 --> 00:23:10,220
go away

525
00:23:10,919 --> 00:23:12,120
um but yeah so that wasn't a thing

526
00:23:12,120 --> 00:23:14,880
before like it I think I can't remember

527
00:23:14,880 --> 00:23:17,700
specifically it may have been 1.21 but

528
00:23:17,700 --> 00:23:20,580
you'll need to verify that

529
00:23:20,580 --> 00:23:23,159
um depending okay wait

530
00:23:23,159 --> 00:23:25,820
let's see

531
00:23:26,940 --> 00:23:28,559
all right it's gone all right so now if

532
00:23:28,559 --> 00:23:31,380
I were to try doing that again

533
00:23:31,380 --> 00:23:33,780
I now got unauthorized because that

534
00:23:33,780 --> 00:23:36,000
token was bound to that pod and it now

535
00:23:36,000 --> 00:23:38,940
has vomited and no longer works

536
00:23:38,940 --> 00:23:40,380
okay

537
00:23:40,380 --> 00:23:42,360
so that's just like that basic stuff

538
00:23:42,360 --> 00:23:44,100
with that so and since everything's

539
00:23:44,100 --> 00:23:45,240
going slowly I'm going to see what I can

540
00:23:45,240 --> 00:23:46,799
quickly get through in the next I

541
00:23:46,799 --> 00:23:48,419
believe I have 10 minutes

542
00:23:48,419 --> 00:23:49,559
because

543
00:23:49,559 --> 00:23:51,840
technology it loves you and it hates you

544
00:23:51,840 --> 00:23:53,760
all right so we were using a default

545
00:23:53,760 --> 00:23:56,100
service token so now let's go and create

546
00:23:56,100 --> 00:23:59,460
one so if I create a say so I can call

547
00:23:59,460 --> 00:24:01,140
it scalar

548
00:24:01,140 --> 00:24:02,700
um basically what I'm going to do is

549
00:24:02,700 --> 00:24:05,280
create something that I can go and scale

550
00:24:05,280 --> 00:24:06,539
a deployment

551
00:24:06,539 --> 00:24:09,900
so if there's some built-in cluster

552
00:24:09,900 --> 00:24:11,880
roles and cholesterol bindings for

553
00:24:11,880 --> 00:24:13,679
instance like there's like if you did

554
00:24:13,679 --> 00:24:16,799
like I'll just do it okay get a cluster

555
00:24:16,799 --> 00:24:18,240
roll

556
00:24:18,240 --> 00:24:21,440
grab video

557
00:24:23,159 --> 00:24:25,020
maybe I shouldn't try doing a thing like

558
00:24:25,020 --> 00:24:26,940
that and getting her up but there's a

559
00:24:26,940 --> 00:24:29,039
thing that you have that is called view

560
00:24:29,039 --> 00:24:32,580
so I could do K create cluster

561
00:24:32,580 --> 00:24:36,299
roll binding I can give it that cluster

562
00:24:36,299 --> 00:24:38,340
role that already exists which lets me

563
00:24:38,340 --> 00:24:39,840
view a bunch of stuff and do nothing

564
00:24:39,840 --> 00:24:42,240
else it's basically read permissions and

565
00:24:42,240 --> 00:24:45,260
give it to my service account

566
00:24:47,640 --> 00:24:51,080
and while we do that

567
00:24:56,760 --> 00:24:59,120
everything

568
00:25:02,100 --> 00:25:05,940
okay so if you are specifically dealing

569
00:25:05,940 --> 00:25:08,580
with uh if you're trying to create a pod

570
00:25:08,580 --> 00:25:10,200
with a specific service account since

571
00:25:10,200 --> 00:25:12,059
this one isn't the default one anymore I

572
00:25:12,059 --> 00:25:13,860
there used to be a way to do dash dash

573
00:25:13,860 --> 00:25:15,480
service count I don't know why I got

574
00:25:15,480 --> 00:25:17,400
removed I wish it didn't so now you have

575
00:25:17,400 --> 00:25:20,159
to actually do the overrides which is

576
00:25:20,159 --> 00:25:23,039
special so yay Json

577
00:25:23,039 --> 00:25:26,600
um so then I give it that

578
00:25:28,980 --> 00:25:33,080
I swear it's way faster an hour ago

579
00:25:37,620 --> 00:25:39,539
I hope everyone's first day of this

580
00:25:39,539 --> 00:25:42,559
conference is going well

581
00:25:43,559 --> 00:25:46,260
um yay okay so if we

582
00:25:46,260 --> 00:25:48,120
do a

583
00:25:48,120 --> 00:25:50,100
oh my goodness

584
00:25:50,100 --> 00:25:52,939
hello letters

585
00:25:58,080 --> 00:26:00,240
I guess worst case if this if this

586
00:26:00,240 --> 00:26:01,520
actually fails I can walk you through

587
00:26:01,520 --> 00:26:03,900
what actually happens because I threw

588
00:26:03,900 --> 00:26:08,360
all this stuff into my slides too

589
00:26:09,720 --> 00:26:12,799
oh my goodness

590
00:26:14,580 --> 00:26:16,200
I feel like I've gone back to the early

591
00:26:16,200 --> 00:26:18,860
2000s

592
00:26:22,980 --> 00:26:24,120
okay

593
00:26:24,120 --> 00:26:26,580
well that's there we go so get all

594
00:26:26,580 --> 00:26:27,840
doesn't actually do get all but it gets

595
00:26:27,840 --> 00:26:30,000
a bunch of stuff so my view is letting

596
00:26:30,000 --> 00:26:31,740
me see all of that stuff

597
00:26:31,740 --> 00:26:34,140
um I'm not going to try typing in if I

598
00:26:34,140 --> 00:26:35,640
were to try deleting stuff right now it

599
00:26:35,640 --> 00:26:36,960
would fail I'm not going to try that

600
00:26:36,960 --> 00:26:40,200
because I'm just gonna fail so

601
00:26:40,200 --> 00:26:41,760
um what I want is to be able to create a

602
00:26:41,760 --> 00:26:43,980
deploy a way to scale so I could create

603
00:26:43,980 --> 00:26:47,059
a role

604
00:26:47,460 --> 00:26:49,440
all right so

605
00:26:49,440 --> 00:26:51,900
so I can call that scalar because I'm

606
00:26:51,900 --> 00:26:54,240
lazy um so when you're messing with

607
00:26:54,240 --> 00:26:56,880
something like replicas uh you which or

608
00:26:56,880 --> 00:26:59,340
like scaling you would do a patch so it

609
00:26:59,340 --> 00:27:01,140
gets the resource of deployment slash

610
00:27:01,140 --> 00:27:03,480
scale and then I want to do it only on

611
00:27:03,480 --> 00:27:04,740
the nginx one because you're a member of

612
00:27:04,740 --> 00:27:06,600
nginx knife web

613
00:27:06,600 --> 00:27:10,158
so I create that

614
00:27:13,200 --> 00:27:15,120
I guess while it's doing that if I do a

615
00:27:15,120 --> 00:27:16,620
cute pedal

616
00:27:16,620 --> 00:27:20,580
Bill deploy except the problem is I have

617
00:27:20,580 --> 00:27:21,960
typing issues

618
00:27:21,960 --> 00:27:25,700
so all right scale nginx

619
00:27:25,700 --> 00:27:30,080
replicas equals two

620
00:27:37,380 --> 00:27:40,159
yay internet

621
00:27:41,460 --> 00:27:43,679
so what will eventually happen if I run

622
00:27:43,679 --> 00:27:45,240
that right now it's going to vomit

623
00:27:45,240 --> 00:27:46,980
because I don't have the permissions to

624
00:27:46,980 --> 00:27:48,960
do it oh wow unable to connect to the

625
00:27:48,960 --> 00:27:50,820
server

626
00:27:50,820 --> 00:27:52,380
yeah internet

627
00:27:52,380 --> 00:27:55,700
there we go okay

628
00:28:00,299 --> 00:28:02,100
raise your hand if you had a demo be

629
00:28:02,100 --> 00:28:06,000
this painful at a conference sweet

630
00:28:06,000 --> 00:28:08,760
thanks for commiserating

631
00:28:08,760 --> 00:28:11,039
okay so if I tried doing right now it

632
00:28:11,039 --> 00:28:13,260
says that I can't patch deployment scale

633
00:28:13,260 --> 00:28:16,260
in there so if I go and create that roll

634
00:28:16,260 --> 00:28:18,799
binding

635
00:28:21,900 --> 00:28:24,299
now I can scale that and if I were to

636
00:28:24,299 --> 00:28:25,320
try

637
00:28:25,320 --> 00:28:28,080
scaling web

638
00:28:28,080 --> 00:28:29,940
it fails because I specifically named

639
00:28:29,940 --> 00:28:31,740
the resource

640
00:28:31,740 --> 00:28:32,760
okay

641
00:28:32,760 --> 00:28:35,340
so now okay we have that but right now

642
00:28:35,340 --> 00:28:36,960
I'm using like view that means I can see

643
00:28:36,960 --> 00:28:38,159
everything what if I only want to be

644
00:28:38,159 --> 00:28:39,419
able to just get that specific

645
00:28:39,419 --> 00:28:41,039
deployment so what I would want to do is

646
00:28:41,039 --> 00:28:42,179
first delete

647
00:28:42,179 --> 00:28:44,940
uh that cluster role binding if I were

648
00:28:44,940 --> 00:28:47,520
to try

649
00:28:47,520 --> 00:28:50,960
scaling this back down to one

650
00:28:53,340 --> 00:28:57,179
I can't because like in order to be able

651
00:28:57,179 --> 00:28:58,559
to actually do anything that I have to

652
00:28:58,559 --> 00:29:00,000
first be able to see it I can't actually

653
00:29:00,000 --> 00:29:03,440
get it so what we could do is we could

654
00:29:03,440 --> 00:29:06,240
do an edit on the role that we have

655
00:29:06,240 --> 00:29:08,159
called scalar

656
00:29:08,159 --> 00:29:12,720
I can use my really terrible VMS Vim

657
00:29:12,720 --> 00:29:15,360
skills copy this

658
00:29:15,360 --> 00:29:18,139
paste it

659
00:29:21,299 --> 00:29:26,299
change that to just deployments and get

660
00:29:28,860 --> 00:29:32,939
so now theoretically

661
00:29:34,140 --> 00:29:36,600
I can scale that but so if I did a cube

662
00:29:36,600 --> 00:29:39,059
cuddle get

663
00:29:39,059 --> 00:29:41,039
like say if I tried get all again

664
00:29:41,039 --> 00:29:43,559
I can't do that if I did a cube cuddle

665
00:29:43,559 --> 00:29:47,340
get deployments can't do that if I want

666
00:29:47,340 --> 00:29:49,020
to do nginx I can and I can scale that

667
00:29:49,020 --> 00:29:51,059
and that's basically all that I can do

668
00:29:51,059 --> 00:29:53,580
with that

669
00:29:53,580 --> 00:29:54,720
um

670
00:29:54,720 --> 00:29:56,520
let's see

671
00:29:56,520 --> 00:30:00,600
yeah so I think that's everything for

672
00:30:00,600 --> 00:30:02,279
that part

673
00:30:02,279 --> 00:30:03,539
um and if you just wanted to see what

674
00:30:03,539 --> 00:30:07,320
would happen if you did the Raw

675
00:30:07,320 --> 00:30:09,720
um it's kind of like thrown out the

676
00:30:09,720 --> 00:30:10,740
show's a bunch of stuff but like say

677
00:30:10,740 --> 00:30:12,840
what for instance Services slash proxy

678
00:30:12,840 --> 00:30:14,220
you can see what the verbs are that you

679
00:30:14,220 --> 00:30:16,740
can actually go and use and then also

680
00:30:16,740 --> 00:30:18,600
now that I have these permissions if I

681
00:30:18,600 --> 00:30:21,500
do a cube cuddle

682
00:30:23,159 --> 00:30:24,960
off

683
00:30:24,960 --> 00:30:27,000
can I and then you can do what you can

684
00:30:27,000 --> 00:30:28,679
do a can I and then like do a specific

685
00:30:28,679 --> 00:30:31,980
thing there's also eventually a way to

686
00:30:31,980 --> 00:30:35,539
do dash dash list

687
00:30:40,260 --> 00:30:41,880
maybe if you hit enter more than once

688
00:30:41,880 --> 00:30:44,600
it'll make it work

689
00:30:54,240 --> 00:30:57,179
there we go okay

690
00:30:57,179 --> 00:30:59,159
um so you can see down so there's a

691
00:30:59,159 --> 00:31:01,200
bunch of stuff that is here by default

692
00:31:01,200 --> 00:31:02,700
um that you will normally see like the

693
00:31:02,700 --> 00:31:06,419
ones up here apis Etc but the ones that

694
00:31:06,419 --> 00:31:08,039
I these ones here

695
00:31:08,039 --> 00:31:10,740
are specifically there because I added

696
00:31:10,740 --> 00:31:14,299
them with my role in my roll binding

697
00:31:14,760 --> 00:31:16,500
okay

698
00:31:16,500 --> 00:31:21,440
um if we go back over here

699
00:31:30,720 --> 00:31:33,539
oh yeah so yeah demo that that just

700
00:31:33,539 --> 00:31:35,399
happened

701
00:31:35,399 --> 00:31:38,520
um it's kind of janky I will try making

702
00:31:38,520 --> 00:31:40,140
it look better when I actually post it

703
00:31:40,140 --> 00:31:41,880
but I thought it would be useful for

704
00:31:41,880 --> 00:31:43,320
because a lot of times people post

705
00:31:43,320 --> 00:31:45,659
here's my code for my slides and then

706
00:31:45,659 --> 00:31:47,039
they put the word demo and then it's

707
00:31:47,039 --> 00:31:48,840
like well if you don't have to say you

708
00:31:48,840 --> 00:31:50,039
don't have a video or you don't like

709
00:31:50,039 --> 00:31:51,299
watching videos

710
00:31:51,299 --> 00:31:54,960
okay where's the demo so I attempted uh

711
00:31:54,960 --> 00:31:56,700
last night

712
00:31:56,700 --> 00:31:58,860
um to do this so basically it goes

713
00:31:58,860 --> 00:32:00,720
through every single thing that I did

714
00:32:00,720 --> 00:32:02,880
today

715
00:32:02,880 --> 00:32:04,200
um hopefully there's nothing wrong that

716
00:32:04,200 --> 00:32:05,820
I have comments and stuff in there too

717
00:32:05,820 --> 00:32:07,919
but yeah it's just all basically all

718
00:32:07,919 --> 00:32:10,919
things with the default namespace uh

719
00:32:10,919 --> 00:32:12,840
service account balance service account

720
00:32:12,840 --> 00:32:14,399
tokens

721
00:32:14,399 --> 00:32:17,640
um creating new essay like Factory roles

722
00:32:17,640 --> 00:32:20,100
so like as in like using that

723
00:32:20,100 --> 00:32:21,960
cholesterol that's already there as you

724
00:32:21,960 --> 00:32:24,299
noticed even in my demo I did not give

725
00:32:24,299 --> 00:32:28,440
cluster admin permissions don't do that

726
00:32:28,440 --> 00:32:30,840
and scalar

727
00:32:30,840 --> 00:32:32,760
and yeah it's just a bunch of slides of

728
00:32:32,760 --> 00:32:33,600
that

729
00:32:33,600 --> 00:32:36,360
um this is so I learned through uh

730
00:32:36,360 --> 00:32:38,039
Bernard's talk that apparently you can

731
00:32:38,039 --> 00:32:39,600
actually there's actually a way to like

732
00:32:39,600 --> 00:32:42,179
put a review on the sched app didn't

733
00:32:42,179 --> 00:32:43,140
know that

734
00:32:43,140 --> 00:32:44,220
I don't know how many people actually

735
00:32:44,220 --> 00:32:46,799
are logged in and it only has smiley

736
00:32:46,799 --> 00:32:49,559
face sad face or a line so you don't

737
00:32:49,559 --> 00:32:52,440
have to log in so here's a little link

738
00:32:52,440 --> 00:32:54,659
thing I would super appreciate if you

739
00:32:54,659 --> 00:32:57,659
could give me some feedback because I

740
00:32:57,659 --> 00:32:59,340
would like this is my second ever

741
00:32:59,340 --> 00:33:01,200
security talk and I want to improve on

742
00:33:01,200 --> 00:33:02,940
what I'm doing

743
00:33:02,940 --> 00:33:04,200
so

744
00:33:04,200 --> 00:33:05,399
yeah

745
00:33:05,399 --> 00:33:06,580
thank you everybody

746
00:33:06,580 --> 00:33:13,790
[Applause]

