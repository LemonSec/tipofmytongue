1
00:00:11,929 --> 00:00:18,270
I'm gonna get some examples were wide

2
00:00:14,099 --> 00:00:21,750
this talk<font color="#E5E5E5"> even exist straight so this is</font>

3
00:00:18,270 --> 00:00:25,170
<font color="#CCCCCC">an example of a QR thread yeah that's</font>

4
00:00:21,750 --> 00:00:26,460
<font color="#E5E5E5">about the right reaction actually the</font>

5
00:00:25,170 --> 00:00:28,140
costs<font color="#CCCCCC"> have been much higher for folks</font>

6
00:00:26,460 --> 00:00:29,789
that have been hacked but the

7
00:00:28,140 --> 00:00:31,380
interesting<font color="#E5E5E5"> thing about this thread is</font>

8
00:00:29,789 --> 00:00:33,360
that when you read through<font color="#CCCCCC"> it time after</font>

9
00:00:31,380 --> 00:00:37,649
time folks were like yep<font color="#E5E5E5"> this happened</font>

10
00:00:33,360 --> 00:00:39,300
to me also interesting is that if<font color="#E5E5E5"> you're</font>

11
00:00:37,649 --> 00:00:40,440
hacked and you fail to do even some of

12
00:00:39,300 --> 00:00:42,480
<font color="#E5E5E5">the basic</font><font color="#CCCCCC"> things that we're going to</font>

13
00:00:40,440 --> 00:00:44,879
talk about here you could be fiscally

14
00:00:42,480 --> 00:00:46,559
responsible or financially obligated to

15
00:00:44,879 --> 00:00:48,269
pay that out an AWS won't refund you

16
00:00:46,559 --> 00:00:51,750
because you didn't do<font color="#E5E5E5"> anything to</font>

17
00:00:48,270 --> 00:00:54,899
prevent this from happening so it's an

18
00:00:51,750 --> 00:00:58,050
interesting<font color="#E5E5E5"> thread code space is very</font>

19
00:00:54,899 --> 00:00:59,160
very<font color="#CCCCCC"> well known example of</font><font color="#E5E5E5"> a company who</font>

20
00:00:58,050 --> 00:01:02,899
just splat out went out of business

21
00:00:59,160 --> 00:01:06,720
after their AWS account was hacked and

22
00:01:02,899 --> 00:01:09,360
this was an interesting one the moral of

23
00:01:06,720 --> 00:01:11,880
this story was small company rails

24
00:01:09,360 --> 00:01:16,439
developer<font color="#E5E5E5"> outsource development to</font>

25
00:01:11,880 --> 00:01:19,048
somebody that person would be overly

26
00:01:16,439 --> 00:01:21,380
permissive intended to be like s3 creds

27
00:01:19,049 --> 00:01:24,180
but they were super overly permissive

28
00:01:21,380 --> 00:01:25,408
and gave access to the environment they

29
00:01:24,180 --> 00:01:28,189
put<font color="#CCCCCC"> that</font><font color="#E5E5E5"> in the source code</font><font color="#CCCCCC"> and then</font>

30
00:01:25,409 --> 00:01:33,840
publish<font color="#E5E5E5"> that source code publicly so</font>

31
00:01:28,189 --> 00:01:36,570
just some examples so<font color="#CCCCCC"> on the</font><font color="#E5E5E5"> CTO of a</font>

32
00:01:33,840 --> 00:01:39,090
security company we use AWS this talk

33
00:01:36,570 --> 00:01:41,158
originated not be not only because of

34
00:01:39,090 --> 00:01:43,500
our needs but what we kind of solved

35
00:01:41,159 --> 00:01:46,560
happening<font color="#CCCCCC"> to companies right but a lot</font>

36
00:01:43,500 --> 00:01:49,649
<font color="#CCCCCC">of this is</font><font color="#E5E5E5"> just sort of my experience in</font>

37
00:01:46,560 --> 00:01:52,649
trying to secure AWS AWS does have a

38
00:01:49,649 --> 00:01:55,259
secure framework guide<font color="#E5E5E5"> I encourage you</font>

39
00:01:52,649 --> 00:01:56,820
to<font color="#E5E5E5"> check it out and it kind</font><font color="#CCCCCC"> of walks</font>

40
00:01:55,259 --> 00:02:01,110
through some of this stuff but<font color="#E5E5E5"> this is</font>

41
00:01:56,820 --> 00:02:04,020
<font color="#E5E5E5">sort of</font><font color="#CCCCCC"> my interpretation of well we'll</font>

42
00:02:01,110 --> 00:02:06,780
walk through hopefully cool stuff so I'm

43
00:02:04,020 --> 00:02:08,549
former military and I've talked about if

44
00:02:06,780 --> 00:02:11,430
you're<font color="#E5E5E5"> familiar with rails go I created</font>

45
00:02:08,550 --> 00:02:12,450
<font color="#CCCCCC">that</font><font color="#E5E5E5"> talk a lot about DevOps security if</font>

46
00:02:11,430 --> 00:02:13,440
you're going to be an RSA I'll be

47
00:02:12,450 --> 00:02:16,769
talking about

48
00:02:13,440 --> 00:02:19,020
oops with Chris gates and we're going<font color="#CCCCCC"> to</font>

49
00:02:16,770 --> 00:02:22,040
be walking<font color="#E5E5E5"> through different DevOps</font>

50
00:02:19,020 --> 00:02:26,430
tooling that's misconfigured and how we

51
00:02:22,040 --> 00:02:28,109
hack that stuff and<font color="#E5E5E5"> I</font><font color="#CCCCCC"> was scared so the</font>

52
00:02:26,430 --> 00:02:29,640
general<font color="#E5E5E5"> gist on how this is happening</font>

53
00:02:28,110 --> 00:02:31,710
I've kind<font color="#E5E5E5"> of put the cough kind of</font>

54
00:02:29,640 --> 00:02:34,230
categorized that common ways this occurs

55
00:02:31,710 --> 00:02:37,530
what is through exposed credentials

56
00:02:34,230 --> 00:02:38,369
leaked somehow miss configuration we're

57
00:02:37,530 --> 00:02:40,890
<font color="#E5E5E5">going to walk through that but that's</font>

58
00:02:38,370 --> 00:02:43,860
really just you know using<font color="#E5E5E5"> AWS services</font>

59
00:02:40,890 --> 00:02:45,450
in securely and then mobile applications

60
00:02:43,860 --> 00:02:48,960
and systems for walk through<font color="#CCCCCC"> that as</font>

61
00:02:45,450 --> 00:02:51,329
well right so expose credentials if

62
00:02:48,960 --> 00:02:53,430
you're a developer working in AWS these

63
00:02:51,330 --> 00:02:57,150
are some common places where credentials

64
00:02:53,430 --> 00:03:00,540
are stored right and if your box is

65
00:02:57,150 --> 00:03:01,400
stolen or lost and you haven't done some

66
00:03:00,540 --> 00:03:04,260
of things we're going<font color="#E5E5E5"> to talk about</font>

67
00:03:01,400 --> 00:03:06,630
these files are open game but

68
00:03:04,260 --> 00:03:08,310
interestingly<font color="#E5E5E5"> it's doing a quick github</font>

69
00:03:06,630 --> 00:03:09,840
search people are committing these files

70
00:03:08,310 --> 00:03:13,920
because they were like I want to<font color="#CCCCCC"> backup</font>

71
00:03:09,840 --> 00:03:17,280
<font color="#CCCCCC">my dot files to get hub publicly alright</font>

72
00:03:13,920 --> 00:03:19,350
so in searching through for these files

73
00:03:17,280 --> 00:03:20,790
I found like<font color="#E5E5E5"> all these those files are</font>

74
00:03:19,350 --> 00:03:23,130
just mentioned and then the credentials

75
00:03:20,790 --> 00:03:25,530
I should note that a lot of<font color="#CCCCCC"> the</font>

76
00:03:23,130 --> 00:03:29,130
credentials have been revoked because

77
00:03:25,530 --> 00:03:30,239
AWS does have<font color="#CCCCCC"> bots scouring the web for</font>

78
00:03:29,130 --> 00:03:31,769
exposure credentials and they try to

79
00:03:30,239 --> 00:03:34,410
protect you from this kind<font color="#E5E5E5"> of stuff</font>

80
00:03:31,770 --> 00:03:36,030
because<font color="#CCCCCC"> it's very prevalent here's some</font>

81
00:03:34,410 --> 00:03:37,470
source code I mean I have so many

82
00:03:36,030 --> 00:03:40,709
examples<font color="#E5E5E5"> of this is just source code</font>

83
00:03:37,470 --> 00:03:42,900
with credentials inside of it miss

84
00:03:40,709 --> 00:03:45,630
configuration so here's I want to give

85
00:03:42,900 --> 00:03:47,880
<font color="#CCCCCC">credit to Chris gates here for kind of</font>

86
00:03:45,630 --> 00:03:49,470
<font color="#E5E5E5">talking about this and and discovering</font>

87
00:03:47,880 --> 00:03:52,620
it basically he was using an enumeration

88
00:03:49,470 --> 00:03:54,390
tool to enumerate s3 buckets right if

89
00:03:52,620 --> 00:03:56,940
they exist you can see some<font color="#E5E5E5"> exists some</font>

90
00:03:54,390 --> 00:03:58,768
don't interestingly enough the

91
00:03:56,940 --> 00:04:01,200
permissions on these buckets were set so

92
00:03:58,769 --> 00:04:03,330
that you know any authenticated user

93
00:04:01,200 --> 00:04:04,980
could access those buckets but when we

94
00:04:03,330 --> 00:04:06,450
say any authenticated user we don't mean

95
00:04:04,980 --> 00:04:09,450
like any authenticated user in your

96
00:04:06,450 --> 00:04:12,660
environment doing any authenticated user

97
00:04:09,450 --> 00:04:13,980
so just be aware of things like<font color="#E5E5E5"> that</font>

98
00:04:12,660 --> 00:04:16,980
we're going to walk through how to

99
00:04:13,980 --> 00:04:18,238
detect that and prevent that but it

100
00:04:16,980 --> 00:04:22,140
happens over and over again right like

101
00:04:18,238 --> 00:04:24,750
RTS so database is exposed publicly with

102
00:04:22,140 --> 00:04:26,770
default credentials security groups

103
00:04:24,750 --> 00:04:28,750
which are like firewall rules this can

104
00:04:26,770 --> 00:04:32,560
figured happens over and over and<font color="#CCCCCC"> over</font>

105
00:04:28,750 --> 00:04:35,050
and<font color="#CCCCCC"> over</font><font color="#E5E5E5"> again okay so vulnerable</font>

106
00:04:32,560 --> 00:04:37,360
applications and systems systems meaning

107
00:04:35,050 --> 00:04:39,190
unpatched somebody<font color="#CCCCCC"> use metasploit or</font>

108
00:04:37,360 --> 00:04:41,770
whatever and they got a shell on<font color="#E5E5E5"> that</font>

109
00:04:39,190 --> 00:04:43,360
box applications referring to an

110
00:04:41,770 --> 00:04:45,448
application that has maybe command

111
00:04:43,360 --> 00:04:48,039
injection remote code execution

112
00:04:45,449 --> 00:04:53,229
something of that nature which allowed

113
00:04:48,039 --> 00:04:54,789
an attacker to get on the box and once

114
00:04:53,229 --> 00:04:57,280
you're on the<font color="#E5E5E5"> box once you've</font>

115
00:04:54,789 --> 00:04:59,590
compromised it I think it's maybe well

116
00:04:57,280 --> 00:05:03,698
known if<font color="#E5E5E5"> not we're going to cover it but</font>

117
00:04:59,590 --> 00:05:04,989
<font color="#E5E5E5">an attacker can grab metadata they can</font>

118
00:05:03,699 --> 00:05:06,460
act as<font color="#E5E5E5"> metadata which has security</font>

119
00:05:04,990 --> 00:05:09,180
credentials in it and from there they

120
00:05:06,460 --> 00:05:13,150
can pivot throughout your network so

121
00:05:09,180 --> 00:05:16,300
this is an example of what URL you would

122
00:05:13,150 --> 00:05:18,460
browse to if you had popped will say an

123
00:05:16,300 --> 00:05:21,340
ec2 instance you can grab some

124
00:05:18,460 --> 00:05:23,440
credentials and depending on what could

125
00:05:21,340 --> 00:05:26,198
those credentials have access to that's

126
00:05:23,440 --> 00:05:28,569
where you're going to pivot I'm<font color="#E5E5E5"> going to</font>

127
00:05:26,199 --> 00:05:30,280
butcher his name the creator of w3 a.m.

128
00:05:28,569 --> 00:05:32,740
that's that's what all that's what<font color="#E5E5E5"> I'm</font>

129
00:05:30,280 --> 00:05:35,559
saying he had a black hat<font color="#E5E5E5"> talk about</font>

130
00:05:32,740 --> 00:05:37,120
doing this so these slides are available

131
00:05:35,560 --> 00:05:39,039
you'll be able<font color="#E5E5E5"> to go view if you haven't</font>

132
00:05:37,120 --> 00:05:41,919
seen it<font color="#CCCCCC"> but he built a tool to automate</font>

133
00:05:39,039 --> 00:05:44,259
pivoting throughout networks<font color="#CCCCCC"> all right</font>

134
00:05:41,919 --> 00:05:45,880
so in summary plenty of ways to get in

135
00:05:44,259 --> 00:05:47,710
happens all the time let's get<font color="#CCCCCC"> started</font>

136
00:05:45,880 --> 00:05:49,330
<font color="#CCCCCC">on talking about a preventive and</font>

137
00:05:47,710 --> 00:05:51,909
detective we're gonna go<font color="#CCCCCC"> through</font>

138
00:05:49,330 --> 00:05:55,270
monitoring and then hardening<font color="#E5E5E5"> we'll open</font>

139
00:05:51,909 --> 00:05:57,819
<font color="#E5E5E5">it up for Q&A in the end</font><font color="#CCCCCC"> all right</font><font color="#E5E5E5"> so to</font>

140
00:05:55,270 --> 00:06:00,159
the two primary services we're going to

141
00:05:57,819 --> 00:06:02,259
talk about our<font color="#E5E5E5"> cloud watch and cloud</font>

142
00:06:00,159 --> 00:06:03,130
trail in terms of monitoring i'm going

143
00:06:02,259 --> 00:06:04,419
<font color="#E5E5E5">to give you links to previous</font>

144
00:06:03,130 --> 00:06:06,190
presentations where i go through like

145
00:06:04,419 --> 00:06:09,400
<font color="#CCCCCC">you can consider you all</font><font color="#E5E5E5"> these different</font>

146
00:06:06,190 --> 00:06:11,169
setups for cloud watch alarms but in

147
00:06:09,400 --> 00:06:14,198
this talk we're going to kind<font color="#E5E5E5"> of work</font>

148
00:06:11,169 --> 00:06:16,240
with lambda and whatnot for cloud trail

149
00:06:14,199 --> 00:06:18,099
cloud trail is essentially<font color="#CCCCCC"> a log of all</font>

150
00:06:16,240 --> 00:06:19,840
the activity that<font color="#E5E5E5"> occurs within your AWS</font>

151
00:06:18,099 --> 00:06:22,240
environment the very top here of this

152
00:06:19,840 --> 00:06:23,979
slide you can see<font color="#E5E5E5"> that if you access the</font>

153
00:06:22,240 --> 00:06:26,919
AWS environment through<font color="#E5E5E5"> the console or</font>

154
00:06:23,979 --> 00:06:28,690
through the API you are touching some

155
00:06:26,919 --> 00:06:31,299
service that activity gets logged to

156
00:06:28,690 --> 00:06:34,090
<font color="#CCCCCC">contrail it all dumps down in the bottom</font>

157
00:06:31,300 --> 00:06:35,800
the contrail to get started with it you

158
00:06:34,090 --> 00:06:37,089
just navigate to cloud trailed turned on

159
00:06:35,800 --> 00:06:39,940
and there are<font color="#E5E5E5"> some very easy</font>

160
00:06:37,089 --> 00:06:40,510
configuration options naming bucket<font color="#E5E5E5"> that</font>

161
00:06:39,940 --> 00:06:44,010
you wanted<font color="#E5E5E5"> to</font>

162
00:06:40,510 --> 00:06:47,110
<font color="#E5E5E5">to et cetera I'm going to ask you</font><font color="#CCCCCC"> to</font>

163
00:06:44,010 --> 00:06:49,180
give a log grip name and then you're

164
00:06:47,110 --> 00:06:50,710
going to allow<font color="#CCCCCC"> it to create</font><font color="#E5E5E5"> an i am role</font>

165
00:06:49,180 --> 00:06:53,980
and we are<font color="#E5E5E5"> going to talk about IM roles</font>

166
00:06:50,710 --> 00:06:59,140
<font color="#E5E5E5">i am roles at the towards Native this</font>

167
00:06:53,980 --> 00:07:01,180
presentation how to use<font color="#E5E5E5"> them so I have a</font>

168
00:06:59,140 --> 00:07:03,669
problem<font color="#CCCCCC"> with the</font><font color="#E5E5E5"> previous versions of</font>

169
00:07:01,180 --> 00:07:04,840
this talk and operationally a problem

170
00:07:03,670 --> 00:07:08,080
with the fact that this is<font color="#E5E5E5"> the best</font>

171
00:07:04,840 --> 00:07:11,289
alert that<font color="#E5E5E5"> I get which is alarm</font>

172
00:07:08,080 --> 00:07:14,340
threshold crossed this<font color="#E5E5E5"> is for</font>

173
00:07:11,290 --> 00:07:16,900
unauthorized activity by<font color="#E5E5E5"> the way</font>

174
00:07:14,340 --> 00:07:19,090
threshold cross data point<font color="#CCCCCC"> 1 point 0 is</font>

175
00:07:16,900 --> 00:07:20,349
greater than your doesn't help I don't

176
00:07:19,090 --> 00:07:21,669
know who's doing what I don't know where

177
00:07:20,350 --> 00:07:23,680
it's coming from I don't know what user

178
00:07:21,670 --> 00:07:26,710
did<font color="#CCCCCC"> what what they tried to</font><font color="#E5E5E5"> access I</font>

179
00:07:23,680 --> 00:07:28,420
have none of that information so this<font color="#E5E5E5"> is</font>

180
00:07:26,710 --> 00:07:30,310
what we really want right we've got<font color="#E5E5E5"> an</font>

181
00:07:28,420 --> 00:07:31,900
IP address and event ID so we can go

182
00:07:30,310 --> 00:07:33,430
into cloud trail we can parse through

183
00:07:31,900 --> 00:07:35,469
cloud show real quickly with that event

184
00:07:33,430 --> 00:07:37,150
ID and pull up the event and see what

185
00:07:35,470 --> 00:07:39,370
happened but more importantly we got a

186
00:07:37,150 --> 00:07:41,830
source IP you've got the AWS account

187
00:07:39,370 --> 00:07:43,780
that this occurred on because if your

188
00:07:41,830 --> 00:07:46,000
organization has multiple<font color="#E5E5E5"> a SS accounts</font>

189
00:07:43,780 --> 00:07:47,020
which is pretty prevalent these days

190
00:07:46,000 --> 00:07:50,500
you're going to want to know that and

191
00:07:47,020 --> 00:07:54,580
then details on the user what they tried

192
00:07:50,500 --> 00:07:56,830
to do so now I'm pretty happy by the way

193
00:07:54,580 --> 00:08:00,640
this<font color="#CCCCCC"> is not the easiest thing to figure</font>

194
00:07:56,830 --> 00:08:03,400
out for me so<font color="#E5E5E5"> hopefully you get some use</font>

195
00:08:00,640 --> 00:08:05,229
out of this with alarms what I want to

196
00:08:03,400 --> 00:08:07,210
explain real briefly is alarms clutch

197
00:08:05,230 --> 00:08:09,490
alarms trigger every time you put in

198
00:08:07,210 --> 00:08:12,190
some filter and they work and every<font color="#E5E5E5"> time</font>

199
00:08:09,490 --> 00:08:14,170
something goes wrong or you know<font color="#E5E5E5"> you</font>

200
00:08:12,190 --> 00:08:17,730
have<font color="#E5E5E5"> some malicious activity potentially</font>

201
00:08:14,170 --> 00:08:20,890
they triggered but again<font color="#E5E5E5"> the alerts are</font>

202
00:08:17,730 --> 00:08:23,500
there nothing to write home about the

203
00:08:20,890 --> 00:08:27,460
events however so cloud watch events and

204
00:08:23,500 --> 00:08:29,350
creating event rules they are what I

205
00:08:27,460 --> 00:08:31,840
would describe as maybe a ninety percent

206
00:08:29,350 --> 00:08:33,070
solution so they don't trigger every

207
00:08:31,840 --> 00:08:34,360
time and<font color="#E5E5E5"> this has to do with the</font>

208
00:08:33,070 --> 00:08:37,000
interest has anybody had to deal with

209
00:08:34,360 --> 00:08:41,979
AWS events and the different formats of

210
00:08:37,000 --> 00:08:45,910
the JSON nobody<font color="#E5E5E5"> okay so one one person</font>

211
00:08:41,979 --> 00:08:48,040
yeah thank<font color="#E5E5E5"> you so that basically it's</font>

212
00:08:45,910 --> 00:08:50,740
different depending<font color="#E5E5E5"> on the event source</font>

213
00:08:48,040 --> 00:08:53,219
meaning what AWS service has been

214
00:08:50,740 --> 00:08:55,649
interacted with and what version

215
00:08:53,220 --> 00:08:57,360
of that event they're posting to it

216
00:08:55,649 --> 00:08:59,100
looks a little different so again it's

217
00:08:57,360 --> 00:09:01,920
<font color="#E5E5E5">like a ninety percent solution we go to</font>

218
00:08:59,100 --> 00:09:03,720
parse this it may often times it will

219
00:09:01,920 --> 00:09:06,269
work sometimes it won't so I<font color="#E5E5E5"> just want</font>

220
00:09:03,720 --> 00:09:11,310
you<font color="#E5E5E5"> to be aware</font><font color="#CCCCCC"> that that's why you want</font>

221
00:09:06,269 --> 00:09:13,110
both alarms and events event rules so

222
00:09:11,310 --> 00:09:15,149
for cloud watch we're going to go

223
00:09:13,110 --> 00:09:17,720
<font color="#CCCCCC">through setting up</font><font color="#E5E5E5"> in a high a.m. alarm</font>

224
00:09:15,149 --> 00:09:20,129
for unauthorized unauthorized activity

225
00:09:17,720 --> 00:09:23,730
we're going<font color="#E5E5E5"> to set up a similar alarm</font>

226
00:09:20,129 --> 00:09:25,439
for events get those granular details

227
00:09:23,730 --> 00:09:26,550
that we want and then we're going to

228
00:09:25,439 --> 00:09:28,740
<font color="#E5E5E5">talk about some other events that you</font>

229
00:09:26,550 --> 00:09:31,139
might want to monitor for and we've

230
00:09:28,740 --> 00:09:34,110
already kind of<font color="#E5E5E5"> beat that one so going</font>

231
00:09:31,139 --> 00:09:36,000
into cloud watch you've got logs on the

232
00:09:34,110 --> 00:09:38,850
left as<font color="#CCCCCC"> well as metrics and there are</font>

233
00:09:36,000 --> 00:09:40,410
two<font color="#E5E5E5"> different</font><font color="#CCCCCC"> types of things</font><font color="#E5E5E5"> that</font>

234
00:09:38,850 --> 00:09:42,329
you're going<font color="#CCCCCC"> to filter for right so logs</font>

235
00:09:40,410 --> 00:09:43,709
when you go to logs and we walk<font color="#CCCCCC"> through</font>

236
00:09:42,329 --> 00:09:47,250
this we're<font color="#E5E5E5"> going to show creating a</font>

237
00:09:43,709 --> 00:09:49,560
custom alarm a custom filter for that

238
00:09:47,250 --> 00:09:51,899
one when you go into metrics<font color="#E5E5E5"> its</font>

239
00:09:49,560 --> 00:09:53,939
predefined things that AWS things that

240
00:09:51,899 --> 00:09:55,439
you probably would want to look for for

241
00:09:53,939 --> 00:09:56,790
instance Billings under there so if you

242
00:09:55,439 --> 00:09:58,740
go into metrics on the<font color="#CCCCCC"> Left you'll</font><font color="#E5E5E5"> go</font>

243
00:09:56,790 --> 00:10:00,689
under billing and you'll pull out the

244
00:09:58,740 --> 00:10:03,529
metrics that you want like if you exceed

245
00:10:00,689 --> 00:10:05,969
certain spend within a certain<font color="#CCCCCC"> timeframe</font>

246
00:10:03,529 --> 00:10:08,639
anyway so you go to logs you choose the

247
00:10:05,970 --> 00:10:10,860
<font color="#CCCCCC">Law Group put in a filter pattern this</font>

248
00:10:08,639 --> 00:10:14,339
one is just<font color="#CCCCCC"> as if the error code is</font>

249
00:10:10,860 --> 00:10:16,680
unauthorized access or if it's a access

250
00:10:14,339 --> 00:10:19,889
denied then we're going<font color="#CCCCCC"> to go ahead and</font>

251
00:10:16,680 --> 00:10:22,109
trigger an alarm assign a metric to that

252
00:10:19,889 --> 00:10:24,420
give<font color="#E5E5E5"> it some naming convention very</font>

253
00:10:22,110 --> 00:10:26,189
simple stuff to follow and then<font color="#E5E5E5"> at this</font>

254
00:10:24,420 --> 00:10:28,319
<font color="#CCCCCC">point</font><font color="#E5E5E5"> after you've created that filter</font>

255
00:10:26,189 --> 00:10:30,660
like what you<font color="#E5E5E5"> want to look</font><font color="#CCCCCC"> for then</font><font color="#E5E5E5"> you</font>

256
00:10:28,319 --> 00:10:31,979
go in and create dealing<font color="#E5E5E5"> and when you</font>

257
00:10:30,660 --> 00:10:34,170
want to<font color="#CCCCCC"> create new on this example shows</font>

258
00:10:31,980 --> 00:10:37,199
we've got it we've got<font color="#E5E5E5"> the name I you</font>

259
00:10:34,170 --> 00:10:39,149
know description and we give it

260
00:10:37,199 --> 00:10:41,008
somewhere to go meaning if this alarm

261
00:10:39,149 --> 00:10:43,199
gets triggered at the bottom left<font color="#E5E5E5"> you</font>

262
00:10:41,009 --> 00:10:45,050
can see that<font color="#CCCCCC"> we send some SMS group and</font>

263
00:10:43,199 --> 00:10:47,790
that's just<font color="#E5E5E5"> a notification service and</font>

264
00:10:45,050 --> 00:10:49,229
depending on the type of activity that

265
00:10:47,790 --> 00:10:51,089
<font color="#CCCCCC">you want to</font><font color="#E5E5E5"> learn on you may want that</font>

266
00:10:49,230 --> 00:10:53,279
to be a text message you may want that

267
00:10:51,089 --> 00:10:56,120
to be an email or something<font color="#E5E5E5"> else so</font>

268
00:10:53,279 --> 00:10:59,809
that's what SMS essentially gives you

269
00:10:56,120 --> 00:11:03,420
and as I<font color="#CCCCCC"> said it works</font><font color="#E5E5E5"> really well and</font>

270
00:10:59,809 --> 00:11:06,439
it will not fail on you I've never had

271
00:11:03,420 --> 00:11:08,599
<font color="#CCCCCC">this fail and it's not been an issue</font>

272
00:11:06,440 --> 00:11:10,010
here is an example of the details and<font color="#E5E5E5"> if</font>

273
00:11:08,600 --> 00:11:11,420
you actually were to review the raw

274
00:11:10,010 --> 00:11:13,330
event from a cloud watch alarm again

275
00:11:11,420 --> 00:11:17,449
this is what it looks like it's just

276
00:11:13,330 --> 00:11:19,910
metric information it's again nothing

277
00:11:17,450 --> 00:11:21,320
that you can really<font color="#CCCCCC"> use actually</font><font color="#E5E5E5"> it</font>

278
00:11:19,910 --> 00:11:24,829
doesn't give you<font color="#CCCCCC"> a vent ID I mean it's</font>

279
00:11:21,320 --> 00:11:27,080
not the<font color="#CCCCCC"> greatest so a little</font><font color="#E5E5E5"> upset about</font>

280
00:11:24,830 --> 00:11:29,660
<font color="#E5E5E5">that</font><font color="#CCCCCC"> alright but then I learn about</font>

281
00:11:27,080 --> 00:11:32,390
cloud watch event rules so we're going

282
00:11:29,660 --> 00:11:35,480
<font color="#E5E5E5">to basically walk through creating a</font>

283
00:11:32,390 --> 00:11:38,330
rule setting up the lambda and slack

284
00:11:35,480 --> 00:11:42,260
integration parsing the event<font color="#E5E5E5"> and then</font>

285
00:11:38,330 --> 00:11:43,670
<font color="#CCCCCC">doing something from there so the way</font>

286
00:11:42,260 --> 00:11:46,030
this is<font color="#E5E5E5"> work as you go to cloud watch go</font>

287
00:11:43,670 --> 00:11:48,920
to<font color="#E5E5E5"> the event rules on the left side and</font>

288
00:11:46,030 --> 00:11:51,680
this is what an event typically sorry i

289
00:11:48,920 --> 00:11:53,780
had to redact a lot but it's<font color="#E5E5E5"> essentially</font>

290
00:11:51,680 --> 00:11:56,180
a JSON blob but it's very it's a very

291
00:11:53,780 --> 00:11:58,040
informative JSON blob so this<font color="#E5E5E5"> is what</font>

292
00:11:56,180 --> 00:12:01,040
we're<font color="#E5E5E5"> going to parse for to send to</font>

293
00:11:58,040 --> 00:12:03,560
lambda how this came about was actually

294
00:12:01,040 --> 00:12:05,110
has<font color="#CCCCCC"> anyone ever tried to dude it like</font>

295
00:12:03,560 --> 00:12:09,439
<font color="#E5E5E5">gone to this link and tried to actually</font>

296
00:12:05,110 --> 00:12:15,500
automatically fantastic try to

297
00:12:09,440 --> 00:12:17,690
automatically revoke access to

298
00:12:15,500 --> 00:12:19,370
somebody's account based off of an<font color="#E5E5E5"> IM</font>

299
00:12:17,690 --> 00:12:22,670
alert saying there's unauthorized

300
00:12:19,370 --> 00:12:24,170
activity as anyone tried that<font color="#CCCCCC"> okay well</font>

301
00:12:22,670 --> 00:12:26,479
<font color="#E5E5E5">it's a good way to get started it kind</font>

302
00:12:24,170 --> 00:12:28,069
of helped credit to the person that

303
00:12:26,480 --> 00:12:30,460
wrote this because it really<font color="#E5E5E5"> helped me</font>

304
00:12:28,070 --> 00:12:33,290
get started it's pretty<font color="#E5E5E5"> cool so</font>

305
00:12:30,460 --> 00:12:35,570
essentially someone tries to<font color="#E5E5E5"> do</font>

306
00:12:33,290 --> 00:12:37,579
something specifically in I am<font color="#E5E5E5"> no other</font>

307
00:12:35,570 --> 00:12:39,500
event source not like ec2 nothing else

308
00:12:37,580 --> 00:12:41,480
specifically in I and they try to do

309
00:12:39,500 --> 00:12:43,220
something they<font color="#CCCCCC"> don't have permissions to</font>

310
00:12:41,480 --> 00:12:44,750
do anything<font color="#E5E5E5"> and</font><font color="#CCCCCC"> I am and so at that</font>

311
00:12:43,220 --> 00:12:46,430
<font color="#E5E5E5">point you revoke their access that's the</font>

312
00:12:44,750 --> 00:12:49,010
general gist of that link i would check

313
00:12:46,430 --> 00:12:51,579
it out what it's<font color="#E5E5E5"> not exactly what</font><font color="#CCCCCC"> we</font>

314
00:12:49,010 --> 00:12:53,810
want we want<font color="#E5E5E5"> those event details so</font>

315
00:12:51,580 --> 00:12:56,350
before<font color="#CCCCCC"> we get into that we got to talk</font>

316
00:12:53,810 --> 00:12:59,000
about lambda we gotta buff slack so

317
00:12:56,350 --> 00:13:01,790
three pieces to this we got to configure

318
00:12:59,000 --> 00:13:04,250
the<font color="#E5E5E5"> black web hook we have to grab the</font>

319
00:13:01,790 --> 00:13:06,589
URL<font color="#E5E5E5"> for that web hook and because we're</font>

320
00:13:04,250 --> 00:13:08,900
not<font color="#E5E5E5"> going to store a sensitive piece of</font>

321
00:13:06,589 --> 00:13:11,270
information like a web hook URL which is

322
00:13:08,900 --> 00:13:13,189
essentially credentials in plain text

323
00:13:11,270 --> 00:13:14,569
and source code we've got<font color="#E5E5E5"> to use KMS</font>

324
00:13:13,190 --> 00:13:17,930
which is the key management service from

325
00:13:14,570 --> 00:13:20,310
AWS in order to encrypt that URL and

326
00:13:17,930 --> 00:13:24,180
<font color="#CCCCCC">then be able</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> access it</font><font color="#E5E5E5"> via our lamb</font>

327
00:13:20,310 --> 00:13:27,000
function so in flat<font color="#E5E5E5"> going start</font>

328
00:13:24,180 --> 00:13:28,589
configuring your incoming webhook add

329
00:13:27,000 --> 00:13:31,410
some configuration details<font color="#E5E5E5"> I put like a</font>

330
00:13:28,590 --> 00:13:34,410
little<font color="#E5E5E5"> image gave</font><font color="#CCCCCC"> it a name things like</font>

331
00:13:31,410 --> 00:13:35,819
that<font color="#E5E5E5"> and choose that the room you know</font>

332
00:13:34,410 --> 00:13:37,170
this is<font color="#E5E5E5"> an engineering room I'm trying</font>

333
00:13:35,820 --> 00:13:40,200
to send these notifications to choose

334
00:13:37,170 --> 00:13:45,089
the room and then you've<font color="#CCCCCC"> got a web post</font>

335
00:13:40,200 --> 00:13:47,220
URL pretty useful now on the KMS side of

336
00:13:45,089 --> 00:13:51,570
things it's like<font color="#CCCCCC"> a four step process you</font>

337
00:13:47,220 --> 00:13:53,310
go<font color="#E5E5E5"> in you create KMS key and you add in</font>

338
00:13:51,570 --> 00:13:54,870
some details one of the<font color="#E5E5E5"> things that's</font>

339
00:13:53,310 --> 00:13:57,270
not<font color="#E5E5E5"> shown on</font><font color="#CCCCCC"> here</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> that you set up a</font>

340
00:13:54,870 --> 00:13:58,589
role<font color="#CCCCCC"> for you name it the role</font>

341
00:13:57,270 --> 00:14:01,110
appropriately in that role essentially

342
00:13:58,589 --> 00:14:03,720
been allowed lambda lambda function to

343
00:14:01,110 --> 00:14:07,040
call out to this KMS key and decrypt it

344
00:14:03,720 --> 00:14:12,300
so that you can make your calls to slag

345
00:14:07,040 --> 00:14:14,400
so<font color="#E5E5E5"> after you've gotten the this</font>

346
00:14:12,300 --> 00:14:16,339
configuration<font color="#E5E5E5"> setup the KMS encrypting</font>

347
00:14:14,400 --> 00:14:18,870
follow those very easy to follow steps

348
00:14:16,339 --> 00:14:22,020
you've got to provide<font color="#E5E5E5"> some information</font>

349
00:14:18,870 --> 00:14:23,820
you've got to use the AWS CLI to go

350
00:14:22,020 --> 00:14:28,170
ahead<font color="#E5E5E5"> and encrypt that your own it's</font>

351
00:14:23,820 --> 00:14:30,390
very easy to follow and very hard to see

352
00:14:28,170 --> 00:14:32,459
from here but basically<font color="#E5E5E5"> you're giving it</font>

353
00:14:30,390 --> 00:14:34,050
the name of the k ms keya here they're

354
00:14:32,460 --> 00:14:35,730
wanting to encrypt what it gives you

355
00:14:34,050 --> 00:14:36,839
back as a ciphertext block that's the

356
00:14:35,730 --> 00:14:38,850
important thing<font color="#E5E5E5"> to take away from the</font>

357
00:14:36,839 --> 00:14:41,970
slide a big ciphertext blob is

358
00:14:38,850 --> 00:14:45,930
essentially an encrypted web hook URL

359
00:14:41,970 --> 00:14:51,200
with a base64 encoding to normalize the

360
00:14:45,930 --> 00:14:53,069
data so we'll<font color="#E5E5E5"> have to go into lambda and</font>

361
00:14:51,200 --> 00:14:56,910
talked about<font color="#E5E5E5"> the fact that there will be</font>

362
00:14:53,070 --> 00:14:58,800
<font color="#CCCCCC">a need to decode and decrypt this URL so</font>

363
00:14:56,910 --> 00:15:00,360
when you go into lambda you can by the

364
00:14:58,800 --> 00:15:01,800
way if you've never dealt with lambda

365
00:15:00,360 --> 00:15:03,300
and you've never dealt with templates

366
00:15:01,800 --> 00:15:06,479
they've got templates for everything

367
00:15:03,300 --> 00:15:08,160
this is for<font color="#CCCCCC"> our purposes I'm going</font><font color="#E5E5E5"> to</font>

368
00:15:06,480 --> 00:15:10,709
give<font color="#E5E5E5"> you the code so you can just</font><font color="#CCCCCC"> go in</font>

369
00:15:08,160 --> 00:15:14,280
<font color="#E5E5E5">and create a blank function or a blank</font>

370
00:15:10,709 --> 00:15:16,469
template just choose<font color="#CCCCCC"> the default all</font>

371
00:15:14,280 --> 00:15:20,250
that's all you need to do here and then

372
00:15:16,470 --> 00:15:22,529
this<font color="#E5E5E5"> just has all of the code basically</font>

373
00:15:20,250 --> 00:15:24,420
when<font color="#CCCCCC"> you paste in the code</font><font color="#E5E5E5"> that I've</font>

374
00:15:22,529 --> 00:15:25,800
<font color="#E5E5E5">given you you know you get some again</font>

375
00:15:24,420 --> 00:15:27,540
it's<font color="#E5E5E5"> just easy stuff like a name</font>

376
00:15:25,800 --> 00:15:29,339
description but the important<font color="#CCCCCC"> part is in</font>

377
00:15:27,540 --> 00:15:32,280
<font color="#E5E5E5">this code there are two pieces that you</font>

378
00:15:29,339 --> 00:15:34,050
want<font color="#E5E5E5"> to sell in one is the web hook URL</font>

379
00:15:32,280 --> 00:15:35,550
that blob that cipher

380
00:15:34,050 --> 00:15:38,069
splob and the other is<font color="#CCCCCC"> just the name of</font>

381
00:15:35,550 --> 00:15:39,329
engineering channel that<font color="#CCCCCC"> you are the</font>

382
00:15:38,070 --> 00:15:41,670
name of the slack channel that you

383
00:15:39,330 --> 00:15:44,700
<font color="#E5E5E5">actually want to post these messages</font>

384
00:15:41,670 --> 00:15:46,709
into and then this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> the point at which</font>

385
00:15:44,700 --> 00:15:49,050
you<font color="#E5E5E5"> choose the role the role that's</font>

386
00:15:46,709 --> 00:15:55,130
going to be able<font color="#E5E5E5"> to call KMS and decrypt</font>

387
00:15:49,050 --> 00:15:58,500
this specific key so let's do<font color="#CCCCCC"> it yay so</font>

388
00:15:55,130 --> 00:16:01,050
interesting fact here if you've never if

389
00:15:58,500 --> 00:16:02,940
you've never dealt<font color="#E5E5E5"> with this it took me</font>

390
00:16:01,050 --> 00:16:04,769
particularly<font color="#E5E5E5"> like an embarrassing</font>

391
00:16:02,940 --> 00:16:07,170
embarrassing<font color="#CCCCCC"> Lee long time to figure</font>

392
00:16:04,769 --> 00:16:10,399
this<font color="#E5E5E5"> out but when you go to create a</font>

393
00:16:07,170 --> 00:16:12,750
rule and you choose your event source

394
00:16:10,399 --> 00:16:17,070
there's a predefined like I can only

395
00:16:12,750 --> 00:16:22,050
take events from excerpt services right

396
00:16:17,070 --> 00:16:24,779
from<font color="#CCCCCC"> EXA event sources however</font><font color="#E5E5E5"> if you</font>

397
00:16:22,050 --> 00:16:26,370
directly go and click the show<font color="#CCCCCC"> Advanced</font>

398
00:16:24,779 --> 00:16:28,589
<font color="#CCCCCC">Options</font><font color="#E5E5E5"> which again it was took me a</font>

399
00:16:26,370 --> 00:16:30,149
little longer than it should of you've

400
00:16:28,589 --> 00:16:31,589
got an edit option and you<font color="#E5E5E5"> can directly</font>

401
00:16:30,149 --> 00:16:33,690
edit the JSON that's we're going to do

402
00:16:31,589 --> 00:16:35,070
so when you directly edit the JSON this

403
00:16:33,690 --> 00:16:37,140
is where that parsing comes into play

404
00:16:35,070 --> 00:16:39,660
when this event JSON blob start to

405
00:16:37,140 --> 00:16:41,880
change it may or may not catch it<font color="#CCCCCC"> I</font>

406
00:16:39,660 --> 00:16:43,140
again<font color="#E5E5E5"> I would say probably nine ninety</font>

407
00:16:41,880 --> 00:16:45,870
percent of time<font color="#E5E5E5"> it's</font><font color="#CCCCCC"> Kotik for this</font>

408
00:16:43,140 --> 00:16:46,890
specific event unauthorized activity so

409
00:16:45,870 --> 00:16:48,870
you put in the same thing<font color="#E5E5E5"> to do before</font>

410
00:16:46,890 --> 00:16:51,170
with the error code being like an

411
00:16:48,870 --> 00:16:54,089
unauthorized or sorry<font color="#E5E5E5"> X tonight and</font>

412
00:16:51,170 --> 00:16:55,439
unauthorized operation and then most

413
00:16:54,089 --> 00:16:57,779
importantly at the end you choose the

414
00:16:55,440 --> 00:16:59,100
function you want<font color="#CCCCCC"> to send it to so our</font>

415
00:16:57,779 --> 00:17:02,100
target is going to be the lambda

416
00:16:59,100 --> 00:17:04,699
function that we created at this point

417
00:17:02,100 --> 00:17:08,939
give it a name give it a description and

418
00:17:04,699 --> 00:17:10,740
test so this<font color="#CCCCCC"> is us going in with a</font>

419
00:17:08,939 --> 00:17:11,880
account that has no permissions it

420
00:17:10,740 --> 00:17:16,199
shouldn't be able<font color="#E5E5E5"> to</font><font color="#CCCCCC"> access anything is</font>

421
00:17:11,880 --> 00:17:19,650
trying to create a user<font color="#E5E5E5"> and this is the</font>

422
00:17:16,199 --> 00:17:22,470
output<font color="#CCCCCC"> of that so</font><font color="#E5E5E5"> hopefully that's of</font>

423
00:17:19,650 --> 00:17:24,360
some use that that<font color="#E5E5E5"> should give you</font><font color="#CCCCCC"> some</font>

424
00:17:22,470 --> 00:17:27,750
information on how to notify folks

425
00:17:24,359 --> 00:17:28,979
pretty immediately I've before this when

426
00:17:27,750 --> 00:17:30,690
we're using cloud watch alarms the

427
00:17:28,980 --> 00:17:32,429
process was we didn't alert and we're

428
00:17:30,690 --> 00:17:34,110
like who<font color="#E5E5E5"> did what you know who's who's</font>

429
00:17:32,429 --> 00:17:35,520
going<font color="#E5E5E5"> in there and tinkering then we</font>

430
00:17:34,110 --> 00:17:40,559
have<font color="#E5E5E5"> to go</font><font color="#CCCCCC"> back to your</font><font color="#E5E5E5"> logs and slung</font>

431
00:17:35,520 --> 00:17:45,179
process so yeah I'm happy<font color="#CCCCCC"> okay so</font><font color="#E5E5E5"> cloud</font>

432
00:17:40,559 --> 00:17:47,460
wash takeaways um pretty pretty simple

433
00:17:45,179 --> 00:17:49,409
edit go into the event<font color="#E5E5E5"> rules</font>

434
00:17:47,460 --> 00:17:50,880
something you want<font color="#E5E5E5"> to parse for go</font>

435
00:17:49,409 --> 00:17:52,649
through the document<font color="#E5E5E5"> lengthy</font>

436
00:17:50,880 --> 00:17:55,409
documentation to figure out exactly what

437
00:17:52,649 --> 00:17:57,449
you want to do instead<font color="#E5E5E5"> of both most</font>

438
00:17:55,409 --> 00:18:01,110
importantly do not dismiss alarms use

439
00:17:57,450 --> 00:18:03,029
both alarms an event rules in the

440
00:18:01,110 --> 00:18:05,070
previous so I<font color="#E5E5E5"> mentioned previous tops</font>

441
00:18:03,029 --> 00:18:07,380
these are<font color="#CCCCCC"> just some things that I think</font>

442
00:18:05,070 --> 00:18:09,539
<font color="#CCCCCC">at a minimum every</font><font color="#E5E5E5"> organization should</font>

443
00:18:07,380 --> 00:18:11,100
be<font color="#E5E5E5"> checking for for instance if your</font>

444
00:18:09,539 --> 00:18:13,440
billing if your normal spin is like a

445
00:18:11,100 --> 00:18:15,990
thousand dollars a month probably<font color="#CCCCCC"> if</font>

446
00:18:13,440 --> 00:18:18,809
overnight it goes up to 50,000 there's

447
00:18:15,990 --> 00:18:20,429
an<font color="#E5E5E5"> issue in terms of root account usage</font>

448
00:18:18,809 --> 00:18:22,200
this isn't<font color="#E5E5E5"> actually so this is actually</font>

449
00:18:20,429 --> 00:18:23,690
<font color="#CCCCCC">an interesting one because i didn't</font>

450
00:18:22,200 --> 00:18:26,490
realize so many people were<font color="#CCCCCC"> using</font>

451
00:18:23,690 --> 00:18:29,070
accounts operationally if you are using

452
00:18:26,490 --> 00:18:32,039
them operationally stop don't<font color="#E5E5E5"> do that</font>

453
00:18:29,070 --> 00:18:35,158
and<font color="#CCCCCC"> then alert on it if they are used</font>

454
00:18:32,039 --> 00:18:37,350
and we did this internally and what's

455
00:18:35,159 --> 00:18:39,360
interesting is if anybody ever uses the

456
00:18:37,350 --> 00:18:41,779
root<font color="#CCCCCC"> account for any reason</font><font color="#E5E5E5"> sometimes in</font>

457
00:18:39,360 --> 00:18:44,459
very remote situations it's<font color="#CCCCCC"> uh it's</font>

458
00:18:41,779 --> 00:18:47,460
necessary<font color="#E5E5E5"> and they say don't tell</font>

459
00:18:44,460 --> 00:18:48,630
<font color="#E5E5E5">somebody they're going to</font><font color="#CCCCCC"> use it we all</font>

460
00:18:47,460 --> 00:18:50,760
live each other it<font color="#E5E5E5"> doesn't matter</font><font color="#CCCCCC"> what</font>

461
00:18:48,630 --> 00:18:52,350
<font color="#E5E5E5">time of the day does work in the sense</font>

462
00:18:50,760 --> 00:18:54,240
that we're all like who did what and you

463
00:18:52,350 --> 00:18:56,219
know who's doing this you know you<font color="#E5E5E5"> don't</font>

464
00:18:54,240 --> 00:18:59,700
know about<font color="#E5E5E5"> it</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> it's kind of kind of</font>

465
00:18:56,220 --> 00:19:02,700
this alert created it almost a culture

466
00:18:59,700 --> 00:19:05,100
of urgency that<font color="#E5E5E5"> makes sense and then</font>

467
00:19:02,700 --> 00:19:06,360
failed login attempts that's just<font color="#CCCCCC"> a</font>

468
00:19:05,100 --> 00:19:07,709
simple one if someone's trying to brute

469
00:19:06,360 --> 00:19:11,658
force which we are going to talk about

470
00:19:07,710 --> 00:19:15,659
multi-factor authentication in stock so

471
00:19:11,659 --> 00:19:17,510
hardening if you've never checked out

472
00:19:15,659 --> 00:19:21,299
Amazon's free resources they do have a

473
00:19:17,510 --> 00:19:22,770
security fundamentals free like CVT that

474
00:19:21,299 --> 00:19:24,779
you can go<font color="#CCCCCC"> through and</font><font color="#E5E5E5"> it helps walk</font>

475
00:19:22,770 --> 00:19:26,129
<font color="#E5E5E5">through not at a granular level the</font>

476
00:19:24,779 --> 00:19:28,679
things we're<font color="#CCCCCC"> talking about</font><font color="#E5E5E5"> but at like a</font>

477
00:19:26,130 --> 00:19:29,970
high level as somebody who may just need

478
00:19:28,679 --> 00:19:32,549
to put out some policies and make sure

479
00:19:29,970 --> 00:19:35,850
<font color="#CCCCCC">that the folks who are doing technical</font>

480
00:19:32,549 --> 00:19:39,870
work are doing you know doing the proper

481
00:19:35,850 --> 00:19:42,240
things it's a good resource we're<font color="#CCCCCC"> going</font>

482
00:19:39,870 --> 00:19:44,939
<font color="#E5E5E5">to talk about hardening now moving on</font>

483
00:19:42,240 --> 00:19:47,130
from<font color="#E5E5E5"> monitoring so like I said don't use</font>

484
00:19:44,940 --> 00:19:49,380
the root account every environment has

485
00:19:47,130 --> 00:19:51,390
one don't use it<font color="#E5E5E5"> if I absolutely asked</font>

486
00:19:49,380 --> 00:19:52,710
you happen set up the alert alarm and

487
00:19:51,390 --> 00:19:55,950
then notify your team first before you

488
00:19:52,710 --> 00:19:57,659
have to use it disable or delete the

489
00:19:55,950 --> 00:19:59,370
access<font color="#CCCCCC"> keys there's no reason that the</font>

490
00:19:57,659 --> 00:20:01,290
root<font color="#CCCCCC"> account would need those access</font>

491
00:19:59,370 --> 00:20:03,030
keys and

492
00:20:01,290 --> 00:20:05,070
I guess it's really<font color="#E5E5E5"> all to talk about on</font>

493
00:20:03,030 --> 00:20:07,230
that now when we<font color="#CCCCCC"> talk about auditing I</font>

494
00:20:05,070 --> 00:20:09,600
and permissions if anyone had the joy of

495
00:20:07,230 --> 00:20:14,790
auditing<font color="#E5E5E5"> I am permissions for their AWS</font>

496
00:20:09,600 --> 00:20:18,179
environment yeah super<font color="#E5E5E5"> fun yeah so this</font>

497
00:20:14,790 --> 00:20:20,610
is<font color="#CCCCCC"> a basic breakdown of a single user a</font>

498
00:20:18,180 --> 00:20:22,860
single user can have managed policies

499
00:20:20,610 --> 00:20:24,600
they can have inline policies they can

500
00:20:22,860 --> 00:20:26,399
belong to groups multiple groups that

501
00:20:24,600 --> 00:20:29,850
each have managed policies and<font color="#E5E5E5"> inline</font>

502
00:20:26,400 --> 00:20:31,920
policies yeah that's about<font color="#E5E5E5"> how I feel</font>

503
00:20:29,850 --> 00:20:34,320
<font color="#CCCCCC">about that it's terrible</font><font color="#E5E5E5"> doing that work</font>

504
00:20:31,920 --> 00:20:37,140
stinks<font color="#E5E5E5"> I'll give you some code though to</font>

505
00:20:34,320 --> 00:20:38,790
<font color="#E5E5E5">make this easier so for managed policies</font>

506
00:20:37,140 --> 00:20:40,440
essentially their policies can be

507
00:20:38,790 --> 00:20:42,120
attached to multiple users or groups and

508
00:20:40,440 --> 00:20:44,700
for inline policies just for one

509
00:20:42,120 --> 00:20:48,780
specific persons<font color="#E5E5E5"> it's specific to that</font>

510
00:20:44,700 --> 00:20:50,790
person this just has code in it that

511
00:20:48,780 --> 00:20:52,950
will allow you<font color="#E5E5E5"> to create a CSV file</font>

512
00:20:50,790 --> 00:20:54,659
provides you with user names in line

513
00:20:52,950 --> 00:20:57,150
policies<font color="#CCCCCC"> manage policies in a detailed</font>

514
00:20:54,660 --> 00:20:59,730
JSON structure and then the groups that

515
00:20:57,150 --> 00:21:03,800
they<font color="#E5E5E5"> belong</font><font color="#CCCCCC"> to here's the</font><font color="#E5E5E5"> tool output</font>

516
00:20:59,730 --> 00:21:06,720
and this is real data this is sanitized

517
00:21:03,800 --> 00:21:11,580
and I change the names to protect the

518
00:21:06,720 --> 00:21:14,640
guilty type deal that's one person oh my

519
00:21:11,580 --> 00:21:15,990
god stinks and one<font color="#CCCCCC"> thing and we're going</font>

520
00:21:14,640 --> 00:21:17,850
to<font color="#E5E5E5"> talk about in cryptid volumes and one</font>

521
00:21:15,990 --> 00:21:19,350
thing we realized was like okay well

522
00:21:17,850 --> 00:21:21,929
we're you know these folks are storing

523
00:21:19,350 --> 00:21:24,510
all of this sensitive PII and financial

524
00:21:21,930 --> 00:21:28,350
data on<font color="#CCCCCC"> ec2 machines that have</font>

525
00:21:24,510 --> 00:21:29,820
unencrypted volumes EBS volumes and you

526
00:21:28,350 --> 00:21:31,199
know theoretically people shouldn't<font color="#CCCCCC"> have</font>

527
00:21:29,820 --> 00:21:35,189
you know the wrong people should have

528
00:21:31,200 --> 00:21:36,420
<font color="#E5E5E5">ssh access to those boxes but then they</font>

529
00:21:35,190 --> 00:21:38,370
have the ability in these perc with

530
00:21:36,420 --> 00:21:40,470
these permissions to then attach these

531
00:21:38,370 --> 00:21:42,929
spun down EBS volumes to an instance

532
00:21:40,470 --> 00:21:44,220
they do have<font color="#E5E5E5"> access to so going</font><font color="#CCCCCC"> through</font>

533
00:21:42,930 --> 00:21:45,900
these permissions determining where

534
00:21:44,220 --> 00:21:47,520
sensitive data and from sensitive data

535
00:21:45,900 --> 00:21:50,940
is stored and then like who has access

536
00:21:47,520 --> 00:21:53,240
to<font color="#CCCCCC"> it can</font><font color="#E5E5E5"> be quite a challenge that's</font>

537
00:21:50,940 --> 00:21:56,400
pretty<font color="#CCCCCC"> much how I fell by that so</font>

538
00:21:53,240 --> 00:21:58,020
auditing user policies it's<font color="#E5E5E5"> kind of what</font>

539
00:21:56,400 --> 00:21:59,790
I just<font color="#E5E5E5"> said audit where you're sent to</font>

540
00:21:58,020 --> 00:22:03,180
<font color="#E5E5E5">the data is figure out who have access</font>

541
00:21:59,790 --> 00:22:05,990
<font color="#E5E5E5">and figure out what that access could</font>

542
00:22:03,180 --> 00:22:08,280
allow in kind of like a theoretical way

543
00:22:05,990 --> 00:22:10,980
from all right it's essentially what it

544
00:22:08,280 --> 00:22:13,830
is all right multi-factor authentication

545
00:22:10,980 --> 00:22:15,270
and so this<font color="#CCCCCC"> is essentially two-factor up</font>

546
00:22:13,830 --> 00:22:17,760
had somebody make a joke about

547
00:22:15,270 --> 00:22:21,120
there's like<font color="#E5E5E5"> three four different types</font>

548
00:22:17,760 --> 00:22:23,010
of authentic authentication no this is

549
00:22:21,120 --> 00:22:24,989
it's<font color="#E5E5E5"> just their their terminology</font><font color="#CCCCCC"> it's</font>

550
00:22:23,010 --> 00:22:26,610
two-factor authentication you can use

551
00:22:24,990 --> 00:22:27,870
virtual apps like<font color="#E5E5E5"> duel or Google</font>

552
00:22:26,610 --> 00:22:31,260
Authenticator or you can<font color="#E5E5E5"> get hardware</font>

553
00:22:27,870 --> 00:22:32,520
devices from<font color="#CCCCCC"> Gemalto so let's set this</font>

554
00:22:31,260 --> 00:22:33,750
up and<font color="#CCCCCC"> then I'm going to</font><font color="#E5E5E5"> move into the</font>

555
00:22:32,520 --> 00:22:35,550
more important in my opinion more

556
00:22:33,750 --> 00:22:37,980
important piece which is<font color="#E5E5E5"> the API and</font>

557
00:22:35,550 --> 00:22:41,220
multi-factor authentication<font color="#CCCCCC"> all right so</font>

558
00:22:37,980 --> 00:22:43,130
to get this done you navigate<font color="#CCCCCC"> to the</font>

559
00:22:41,220 --> 00:22:47,670
security credentials section under I am

560
00:22:43,130 --> 00:22:51,060
you go to<font color="#E5E5E5"> manage an MFA device select</font>

561
00:22:47,670 --> 00:22:52,980
the virtual device or hardware device if

562
00:22:51,060 --> 00:22:54,629
<font color="#E5E5E5">you've selected a virtual device is just</font>

563
00:22:52,980 --> 00:22:56,580
a QR code for Google Authenticator

564
00:22:54,630 --> 00:22:59,540
entering the authentication<font color="#E5E5E5"> code twice</font>

565
00:22:56,580 --> 00:23:01,560
and now MFA is on your account but

566
00:22:59,540 --> 00:23:07,230
anybody who's actually had to do this

567
00:23:01,560 --> 00:23:09,990
realizes that is a pain so if you don't

568
00:23:07,230 --> 00:23:11,940
<font color="#E5E5E5">have I am access you can't do that</font><font color="#CCCCCC"> to</font>

569
00:23:09,990 --> 00:23:14,370
your account so what do you do hopefully

570
00:23:11,940 --> 00:23:17,040
not screen share or send emails with

571
00:23:14,370 --> 00:23:21,780
pictures of<font color="#E5E5E5"> a QR code to an admin which</font>

572
00:23:17,040 --> 00:23:23,580
does happen we<font color="#E5E5E5"> found and so there is a</font>

573
00:23:21,780 --> 00:23:25,560
way to get around that and that<font color="#CCCCCC"> is to</font>

574
00:23:23,580 --> 00:23:27,929
use this policy and attach that to<font color="#E5E5E5"> a</font>

575
00:23:25,560 --> 00:23:29,129
user<font color="#E5E5E5"> and then at that point they can</font>

576
00:23:27,930 --> 00:23:31,950
manage your<font color="#CCCCCC"> own device everybody</font><font color="#E5E5E5"> got</font>

577
00:23:29,130 --> 00:23:33,930
that I got a link in here for that

578
00:23:31,950 --> 00:23:35,520
policy you can change some details

579
00:23:33,930 --> 00:23:37,230
specific to that user attach it to<font color="#E5E5E5"> their</font>

580
00:23:35,520 --> 00:23:38,670
attached to that<font color="#E5E5E5"> user and that user can</font>

581
00:23:37,230 --> 00:23:41,670
manage their MFA device but they can't

582
00:23:38,670 --> 00:23:44,220
do anything<font color="#E5E5E5"> else</font><font color="#CCCCCC"> all right so if you</font>

583
00:23:41,670 --> 00:23:45,450
need and you totally should need you

584
00:23:44,220 --> 00:23:46,620
know if you've<font color="#CCCCCC"> got</font><font color="#E5E5E5"> mobile people who</font>

585
00:23:45,450 --> 00:23:49,920
need access to root account you should

586
00:23:46,620 --> 00:23:52,320
be using the totp protocol to your

587
00:23:49,920 --> 00:23:55,050
advantage and you know share out the

588
00:23:52,320 --> 00:23:57,810
two-factor code for that for that

589
00:23:55,050 --> 00:23:59,879
account so that<font color="#E5E5E5"> really count</font><font color="#CCCCCC"> alright so</font>

590
00:23:57,810 --> 00:24:02,480
this is where you that the the stuff

591
00:23:59,880 --> 00:24:05,580
that's a little bit interesting so when

592
00:24:02,480 --> 00:24:08,400
leaked credentials occur and<font color="#E5E5E5"> somebody is</font>

593
00:24:05,580 --> 00:24:10,889
accessing the environment typically it

594
00:24:08,400 --> 00:24:12,120
happens through the API right you've<font color="#E5E5E5"> got</font>

595
00:24:10,890 --> 00:24:14,970
access<font color="#CCCCCC"> keys that's what it gives you</font>

596
00:24:12,120 --> 00:24:16,709
access to the API so most of<font color="#E5E5E5"> the time if</font>

597
00:24:14,970 --> 00:24:18,270
people do enable multi-factor

598
00:24:16,710 --> 00:24:19,710
authentication I say most the time and

599
00:24:18,270 --> 00:24:22,139
just in my experience most of the time

600
00:24:19,710 --> 00:24:24,500
right people will use MFA for the

601
00:24:22,140 --> 00:24:28,390
console but not necessarily for the API

602
00:24:24,500 --> 00:24:30,400
and you know

603
00:24:28,390 --> 00:24:32,890
really problem right nobody<font color="#CCCCCC"> elbers don't</font>

604
00:24:30,400 --> 00:24:36,040
store keys and source code right not an

605
00:24:32,890 --> 00:24:40,330
issue so how did how to actually enable

606
00:24:36,040 --> 00:24:41,409
this on the individual or the policy

607
00:24:40,330 --> 00:24:43,270
that<font color="#CCCCCC"> you want</font><font color="#E5E5E5"> to attach this to you</font><font color="#CCCCCC"> and</font>

608
00:24:41,410 --> 00:24:45,250
put it<font color="#CCCCCC"> on like the admin policy or</font>

609
00:24:43,270 --> 00:24:47,080
whatever this line specifically is the

610
00:24:45,250 --> 00:24:50,950
important<font color="#CCCCCC"> one and when you put that on</font>

611
00:24:47,080 --> 00:24:52,629
you effectively say hey i am<font color="#CCCCCC"> going to</font>

612
00:24:50,950 --> 00:24:54,520
require<font color="#CCCCCC"> that if you log into the console</font>

613
00:24:52,630 --> 00:24:55,770
or if you try to access the API now you

614
00:24:54,520 --> 00:25:00,330
<font color="#E5E5E5">have to use multi-factor authentication</font>

615
00:24:55,770 --> 00:25:03,180
so Google Authenticator or whatever I

616
00:25:00,330 --> 00:25:06,159
feel like there's something<font color="#E5E5E5"> I miss there</font>

617
00:25:03,180 --> 00:25:09,120
and we're good<font color="#E5E5E5"> all right so doing this</font>

618
00:25:06,160 --> 00:25:11,770
at first can be painful very painful

619
00:25:09,120 --> 00:25:13,570
things that used to work will not and

620
00:25:11,770 --> 00:25:15,190
that is<font color="#E5E5E5"> just the way it works but</font>

621
00:25:13,570 --> 00:25:18,330
security token service if you've never

622
00:25:15,190 --> 00:25:20,920
used it essentially what happens is you

623
00:25:18,330 --> 00:25:22,720
you give it some credentials and it

624
00:25:20,920 --> 00:25:26,200
gives you back a new set of potentials

625
00:25:22,720 --> 00:25:29,020
that last for as long<font color="#CCCCCC"> as</font><font color="#E5E5E5"> you are ok with</font>

626
00:25:26,200 --> 00:25:30,760
them however long it's configured for so

627
00:25:29,020 --> 00:25:33,160
you give it your access key ID and

628
00:25:30,760 --> 00:25:35,379
secret and a two-factor authentication

629
00:25:33,160 --> 00:25:38,290
code and then you get<font color="#E5E5E5"> back some new</font>

630
00:25:35,380 --> 00:25:40,120
credentials this just right here<font color="#E5E5E5"> is code</font>

631
00:25:38,290 --> 00:25:41,500
that shows you<font color="#CCCCCC"> how to do that this is</font>

632
00:25:40,120 --> 00:25:43,659
what it looks like this is<font color="#E5E5E5"> just a basic</font>

633
00:25:41,500 --> 00:25:45,090
proof of concept obviously it's not you

634
00:25:43,660 --> 00:25:48,790
know you would be using this every day

635
00:25:45,090 --> 00:25:50,020
but<font color="#E5E5E5"> like I said all</font><font color="#CCCCCC"> of the things that</font>

636
00:25:48,790 --> 00:25:54,070
<font color="#E5E5E5">you need to fill in there the region's</font>

637
00:25:50,020 --> 00:25:55,930
you want log into X key ID secret serial

638
00:25:54,070 --> 00:25:57,879
number is important because<font color="#E5E5E5"> when you set</font>

639
00:25:55,930 --> 00:26:00,130
<font color="#CCCCCC">up that</font><font color="#E5E5E5"> MF a device you get back this</font>

640
00:25:57,880 --> 00:26:01,480
long arm and that's what this serial

641
00:26:00,130 --> 00:26:03,730
number is looking for something<font color="#E5E5E5"> for this</font>

642
00:26:01,480 --> 00:26:05,710
very long piece<font color="#CCCCCC"> of information says this</font>

643
00:26:03,730 --> 00:26:07,300
is the<font color="#CCCCCC"> MFA device attached to you know</font>

644
00:26:05,710 --> 00:26:08,200
associated with these keys and this is

645
00:26:07,300 --> 00:26:11,139
what you're<font color="#E5E5E5"> going to</font><font color="#CCCCCC"> use and here's</font><font color="#E5E5E5"> your</font>

646
00:26:08,200 --> 00:26:13,150
two factor authentication codes here's

647
00:26:11,140 --> 00:26:15,790
the output of the<font color="#E5E5E5"> script so like I said</font>

648
00:26:13,150 --> 00:26:19,060
you get an access key I be a secret<font color="#E5E5E5"> and</font>

649
00:26:15,790 --> 00:26:21,610
then session<font color="#CCCCCC"> token another big long blob</font>

650
00:26:19,060 --> 00:26:25,419
and use those<font color="#E5E5E5"> three things and in tandem</font>

651
00:26:21,610 --> 00:26:27,639
to tax us the environment this is<font color="#E5E5E5"> just</font>

652
00:26:25,420 --> 00:26:30,580
an example of using the old easy to

653
00:26:27,640 --> 00:26:32,170
describe instances tool just to show you

654
00:26:30,580 --> 00:26:35,110
that it works that<font color="#E5E5E5"> you can still</font><font color="#CCCCCC"> use</font>

655
00:26:32,170 --> 00:26:39,070
things as you would normally in case you

656
00:26:35,110 --> 00:26:41,270
<font color="#CCCCCC">don't like Ruby for you specifically for</font>

657
00:26:39,070 --> 00:26:44,570
you<font color="#CCCCCC"> ok</font>

658
00:26:41,270 --> 00:26:46,480
here people<font color="#E5E5E5"> use it</font><font color="#CCCCCC"> now but all jokes</font>

659
00:26:44,570 --> 00:26:49,280
aside this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> like iphone & bash</font>

660
00:26:46,480 --> 00:26:51,890
combination and the point<font color="#E5E5E5"> of</font><font color="#CCCCCC"> this repo</font>

661
00:26:49,280 --> 00:26:53,030
is to basically offer operationalize

662
00:26:51,890 --> 00:26:55,970
what I just talked about<font color="#E5E5E5"> so that</font>

663
00:26:53,030 --> 00:26:57,139
<font color="#E5E5E5">everyday folks can go through the</font>

664
00:26:55,970 --> 00:27:00,760
process of getting new credentials

665
00:26:57,140 --> 00:27:05,290
easily and work without having these

666
00:27:00,760 --> 00:27:08,180
creds that they're you know exposing so

667
00:27:05,290 --> 00:27:10,460
elastic Beanstalk does not work with sts

668
00:27:08,180 --> 00:27:13,550
but there is a workaround if you<font color="#E5E5E5"> use</font>

669
00:27:10,460 --> 00:27:18,410
code pipeline you can pull from github

670
00:27:13,550 --> 00:27:19,970
you can pull from<font color="#CCCCCC"> co commit s3 and then</font>

671
00:27:18,410 --> 00:27:21,590
essentially if you push to whatever

672
00:27:19,970 --> 00:27:23,720
branch that you're triggering on in that

673
00:27:21,590 --> 00:27:25,100
repo it'll pull your code in and then

674
00:27:23,720 --> 00:27:26,450
you<font color="#E5E5E5"> don't have to deal with sts because</font>

675
00:27:25,100 --> 00:27:29,300
again it just doesn't work with the last

676
00:27:26,450 --> 00:27:36,920
<font color="#CCCCCC">gamestop or didn't the last</font><font color="#E5E5E5"> time</font><font color="#CCCCCC"> I</font>

677
00:27:29,300 --> 00:27:39,800
checked yes and essentially it's only

678
00:27:36,920 --> 00:27:41,180
going to protect you against the web and

679
00:27:39,800 --> 00:27:44,149
not the API unless you set up that

680
00:27:41,180 --> 00:27:45,740
<font color="#E5E5E5">policy that I showed you the IM piece</font>

681
00:27:44,150 --> 00:27:48,320
there a<font color="#E5E5E5"> little one liner in that</font>

682
00:27:45,740 --> 00:27:52,490
conditional<font color="#CCCCCC"> alright so this is I am</font>

683
00:27:48,320 --> 00:27:54,260
rules<font color="#CCCCCC"> okay so</font><font color="#E5E5E5"> roles if you've never</font>

684
00:27:52,490 --> 00:27:56,810
worked them they're like a user right

685
00:27:54,260 --> 00:27:59,060
they've got<font color="#E5E5E5"> got something some set of</font>

686
00:27:56,810 --> 00:28:00,950
<font color="#E5E5E5">things that they</font><font color="#CCCCCC"> can</font><font color="#E5E5E5"> access the</font>

687
00:27:59,060 --> 00:28:02,899
difference is is you don't<font color="#E5E5E5"> need to put</font>

688
00:28:00,950 --> 00:28:05,210
credentials in your source code the

689
00:28:02,900 --> 00:28:07,960
potentials rotate and you can be very

690
00:28:05,210 --> 00:28:12,860
specific in what that role can access

691
00:28:07,960 --> 00:28:14,750
it's very<font color="#E5E5E5"> useful as i said the</font>

692
00:28:12,860 --> 00:28:17,990
credentials automatically rotate the<font color="#E5E5E5"> STS</font>

693
00:28:14,750 --> 00:28:21,830
that so the interesting is the thing

694
00:28:17,990 --> 00:28:23,180
that kind of<font color="#E5E5E5"> like hurts you right where</font>

695
00:28:21,830 --> 00:28:24,620
an attacker can get on the box and they

696
00:28:23,180 --> 00:28:26,570
can go to<font color="#E5E5E5"> that link and they can grab</font>

697
00:28:24,620 --> 00:28:30,830
those credentials it's kind of actually

698
00:28:26,570 --> 00:28:34,730
<font color="#CCCCCC">how roles work so it's</font><font color="#E5E5E5"> like blood sword</font>

699
00:28:30,830 --> 00:28:36,590
I'd say if you're using AWS sdk like a

700
00:28:34,730 --> 00:28:39,650
gym or a<font color="#CCCCCC"> python egg or whatever the</font>

701
00:28:36,590 --> 00:28:41,600
cases all of this<font color="#E5E5E5"> is handled for you as</font>

702
00:28:39,650 --> 00:28:43,430
long<font color="#E5E5E5"> as you're using that code so what I</font>

703
00:28:41,600 --> 00:28:45,590
mean to say is if you attach a role to

704
00:28:43,430 --> 00:28:47,270
an instance and you make some calls with

705
00:28:45,590 --> 00:28:49,220
that code it'll recognize that you've

706
00:28:47,270 --> 00:28:50,840
got these temporary credentials use them

707
00:28:49,220 --> 00:28:53,600
and then again you don't<font color="#E5E5E5"> have to hard</font>

708
00:28:50,840 --> 00:28:55,110
<font color="#E5E5E5">code your keys inside your source if</font>

709
00:28:53,600 --> 00:28:57,480
you're using something like

710
00:28:55,110 --> 00:28:59,669
clip you're going to want to<font color="#CCCCCC"> use fog</font>

711
00:28:57,480 --> 00:29:02,429
because<font color="#CCCCCC"> paperclip and this whole setup</font>

712
00:28:59,670 --> 00:29:05,390
don't mix but if you use fog you'll be

713
00:29:02,429 --> 00:29:07,740
all right there's a link on that<font color="#E5E5E5"> and</font>

714
00:29:05,390 --> 00:29:09,360
again not<font color="#E5E5E5"> the easy to see but here's an</font>

715
00:29:07,740 --> 00:29:10,950
example of policy it's a very granular

716
00:29:09,360 --> 00:29:12,990
policy says you can only access these

717
00:29:10,950 --> 00:29:14,429
things for this rule and<font color="#CCCCCC"> you set that</font><font color="#E5E5E5"> up</font>

718
00:29:12,990 --> 00:29:16,650
with an<font color="#E5E5E5"> eye and when you create the rule</font>

719
00:29:14,429 --> 00:29:18,600
and<font color="#CCCCCC"> then this is an example of using</font>

720
00:29:16,650 --> 00:29:19,830
elastic<font color="#E5E5E5"> Beanstalk just this is one</font>

721
00:29:18,600 --> 00:29:20,879
example you can do this with ec2

722
00:29:19,830 --> 00:29:23,189
instances<font color="#E5E5E5"> you can really apply this</font>

723
00:29:20,880 --> 00:29:24,809
wherever you want and then this<font color="#E5E5E5"> is a</font>

724
00:29:23,190 --> 00:29:26,340
this example we're just going into<font color="#E5E5E5"> the</font>

725
00:29:24,809 --> 00:29:30,020
configuration of that elastic Beanstalk

726
00:29:26,340 --> 00:29:32,549
machine dropping down choosing the

727
00:29:30,020 --> 00:29:34,020
specific role that does some things in

728
00:29:32,549 --> 00:29:36,240
this instance this role was built to

729
00:29:34,020 --> 00:29:39,330
spin up some VC to machines and to make

730
00:29:36,240 --> 00:29:41,520
<font color="#E5E5E5">some you know cloud watch alarm changes</font>

731
00:29:39,330 --> 00:29:43,889
and things of that nature<font color="#E5E5E5"> but that's all</font>

732
00:29:41,520 --> 00:29:46,770
I can<font color="#CCCCCC"> do and</font><font color="#E5E5E5"> this</font><font color="#CCCCCC"> is sort of like a</font>

733
00:29:43,890 --> 00:29:48,679
miscellaneous section right so this code

734
00:29:46,770 --> 00:29:51,270
right here you'll<font color="#CCCCCC"> have access to</font>

735
00:29:48,679 --> 00:29:53,190
essentially just allows you to automate

736
00:29:51,270 --> 00:29:55,650
the process of looking<font color="#E5E5E5"> for and sorting</font>

737
00:29:53,190 --> 00:29:58,140
unencrypted volumes EBS volumes and then

738
00:29:55,650 --> 00:30:01,080
encrypted volumes again incredibly

739
00:29:58,140 --> 00:30:04,140
important if your housing sensitive

740
00:30:01,080 --> 00:30:07,470
information on ec2 box and then this<font color="#E5E5E5"> one</font>

741
00:30:04,140 --> 00:30:09,720
<font color="#CCCCCC">is to review as three buckets to</font>

742
00:30:07,470 --> 00:30:11,809
determine the policy attach them and if

743
00:30:09,720 --> 00:30:14,610
you're not familiar with this

744
00:30:11,809 --> 00:30:16,799
essentially just know that if<font color="#CCCCCC"> you</font><font color="#E5E5E5"> need</font>

745
00:30:14,610 --> 00:30:18,330
to store some sensitive information in

746
00:30:16,799 --> 00:30:19,620
s3 you don't need to rely<font color="#CCCCCC"> on somebody</font>

747
00:30:18,330 --> 00:30:21,449
doing their due diligence and like

748
00:30:19,620 --> 00:30:22,739
<font color="#E5E5E5">clicking the encryption option and all</font>

749
00:30:21,450 --> 00:30:24,090
that you<font color="#E5E5E5"> can actually enforce that on</font>

750
00:30:22,740 --> 00:30:26,309
<font color="#CCCCCC">buckets so if you're a security</font><font color="#E5E5E5"> person</font>

751
00:30:24,090 --> 00:30:28,020
and you want to enforce that everybody's

752
00:30:26,309 --> 00:30:29,428
going that route<font color="#CCCCCC"> and cryptic and</font>

753
00:30:28,020 --> 00:30:32,340
encrypting whatever they're placing in

754
00:30:29,429 --> 00:30:36,510
s3 you can create that policy and attach

755
00:30:32,340 --> 00:30:38,939
it to that<font color="#CCCCCC"> okay so in summary I really</font>

756
00:30:36,510 --> 00:30:41,910
do hope this talk was helpful for all of

757
00:30:38,940 --> 00:30:43,710
you I really mean that<font color="#CCCCCC"> because the snow</font>

758
00:30:41,910 --> 00:30:46,309
point in me coming up<font color="#CCCCCC"> here if it isn't</font>

759
00:30:43,710 --> 00:30:49,950
so<font color="#E5E5E5"> I do hope it was useful for you</font>

760
00:30:46,309 --> 00:30:51,418
there's many things that<font color="#E5E5E5"> we could talk</font>

761
00:30:49,950 --> 00:30:53,280
about<font color="#E5E5E5"> which is monitoring hardening but</font>

762
00:30:51,419 --> 00:30:55,260
would one thing I<font color="#E5E5E5"> kind of cut out was</font>

763
00:30:53,280 --> 00:30:57,809
disaster recovery and I was actually

764
00:30:55,260 --> 00:31:00,179
afraid about afraid a three-day<font color="#E5E5E5"> legacy</font>

765
00:30:57,809 --> 00:31:01,889
exceed my time<font color="#CCCCCC"> limits so i put this link</font>

766
00:31:00,179 --> 00:31:05,040
in it's a really great talk from der

767
00:31:01,890 --> 00:31:06,570
beek on about how to deal with incident

768
00:31:05,040 --> 00:31:08,500
response and disaster recovery should

769
00:31:06,570 --> 00:31:10,480
the worst happen which you should all

770
00:31:08,500 --> 00:31:12,040
to have a plan right you can do all the

771
00:31:10,480 --> 00:31:13,420
things in the world but there's always

772
00:31:12,040 --> 00:31:17,710
that chance something goes wrong so have

773
00:31:13,420 --> 00:31:20,260
a plan now<font color="#E5E5E5"> open it up for Q&A and I</font>

774
00:31:17,710 --> 00:31:27,400
looked<font color="#CCCCCC"> a little fast and done early so</font>

775
00:31:20,260 --> 00:31:28,810
awesome question sure so the question

776
00:31:27,400 --> 00:31:31,710
<font color="#CCCCCC">was going to put the slide link back up</font>

777
00:31:28,810 --> 00:31:31,710
I'm going<font color="#E5E5E5"> to do that right now</font>

778
00:31:38,040 --> 00:31:47,220
<font color="#E5E5E5">alright that's one any other questions</font>

779
00:31:41,820 --> 00:32:01,679
ah alright cool thanks everyone

780
00:31:47,220 --> 00:32:04,950
appreciate it oh<font color="#E5E5E5"> yeah application what</font>

781
00:32:01,680 --> 00:32:08,490
you hosting coaching on this how that

782
00:32:04,950 --> 00:32:11,780
will open the loopholes you get to the

783
00:32:08,490 --> 00:32:15,060
<font color="#CCCCCC">accounts right so two questions one</font>

784
00:32:11,780 --> 00:32:18,090
piece itself how much effort or you know

785
00:32:15,060 --> 00:32:21,990
approximation in terms of whatever the

786
00:32:18,090 --> 00:32:24,060
scripting and automation you did so how

787
00:32:21,990 --> 00:32:27,150
<font color="#E5E5E5">long does it take how many people in</font>

788
00:32:24,060 --> 00:32:29,250
second is how much work still need to

789
00:32:27,150 --> 00:32:31,710
cut out<font color="#CCCCCC"> in</font><font color="#E5E5E5"> terms of that place</font><font color="#CCCCCC"> and what</font>

790
00:32:29,250 --> 00:32:33,660
we will<font color="#E5E5E5"> not boast on those to make sure</font>

791
00:32:31,710 --> 00:32:42,420
that that<font color="#E5E5E5"> doesn't end up affecting this</font>

792
00:32:33,660 --> 00:32:44,120
part ok so my approximation of the folks

793
00:32:42,420 --> 00:32:47,370
I mean if you if you set up monitoring

794
00:32:44,120 --> 00:32:49,199
like that that's not that hard great and

795
00:32:47,370 --> 00:32:52,139
against<font color="#E5E5E5"> all these links and that's just</font>

796
00:32:49,200 --> 00:32:53,820
initial setup at that point<font color="#E5E5E5"> I mean</font>

797
00:32:52,140 --> 00:32:55,740
really<font color="#E5E5E5"> it's just a process of having</font>

798
00:32:53,820 --> 00:32:57,600
people that respond to that<font color="#CCCCCC"> i would i'd</font>

799
00:32:55,740 --> 00:33:00,540
argue i guess the configuration itself

800
00:32:57,600 --> 00:33:02,550
is easier then the actual response and

801
00:33:00,540 --> 00:33:04,260
again that's why it's sort of like put

802
00:33:02,550 --> 00:33:06,180
in that slack notification or whatever

803
00:33:04,260 --> 00:33:09,420
you want<font color="#E5E5E5"> to do using lambda however you</font>

804
00:33:06,180 --> 00:33:10,920
<font color="#E5E5E5">want notify people instantly because the</font>

805
00:33:09,420 --> 00:33:13,620
overhead associated with some of this

806
00:33:10,920 --> 00:33:15,600
stuff like if you enable config which we

807
00:33:13,620 --> 00:33:19,500
<font color="#CCCCCC">we didn't talk about which is</font><font color="#E5E5E5"> like asset</font>

808
00:33:15,600 --> 00:33:21,719
inventory the be noise is incredibly

809
00:33:19,500 --> 00:33:24,360
high and it's hard<font color="#E5E5E5"> to filter out that</font>

810
00:33:21,720 --> 00:33:25,770
information so it's<font color="#E5E5E5"> not hard to do the</font>

811
00:33:24,360 --> 00:33:26,969
configuration it's hard to keep up<font color="#CCCCCC"> with</font>

812
00:33:25,770 --> 00:33:29,280
the notifications and sort of<font color="#E5E5E5"> line</font>

813
00:33:26,970 --> 00:33:31,050
synopsis on that<font color="#E5E5E5"> i was just</font><font color="#CCCCCC"> wondering</font>

814
00:33:29,280 --> 00:33:34,080
<font color="#E5E5E5">some of the thing what you mentioned to</font>

815
00:33:31,050 --> 00:33:39,690
have the EBS volume encrypted and some

816
00:33:34,080 --> 00:33:42,000
of those protections like those so for

817
00:33:39,690 --> 00:33:44,340
that three itself but let's say<font color="#CCCCCC"> if we</font>

818
00:33:42,000 --> 00:33:47,940
have the application what we goes they

819
00:33:44,340 --> 00:33:51,230
do themselves and<font color="#CCCCCC"> click the database or</font>

820
00:33:47,940 --> 00:33:53,270
whatever they're using to<font color="#CCCCCC"> show the data</font>

821
00:33:51,230 --> 00:33:55,820
and is that in another level<font color="#E5E5E5"> of</font>

822
00:33:53,270 --> 00:33:58,190
encryption you still recommend like a

823
00:33:55,820 --> 00:34:01,610
protection you still recommend or it's

824
00:33:58,190 --> 00:34:02,990
<font color="#E5E5E5">okay to leave it up to the the thai</font>

825
00:34:01,610 --> 00:34:07,520
place and which is actually go straight

826
00:34:02,990 --> 00:34:08,960
on those behaviors itself because it

827
00:34:07,520 --> 00:34:12,020
affects the performance and<font color="#E5E5E5"> let them see</font>

828
00:34:08,960 --> 00:34:14,300
the terms are you talking about like I'm

829
00:34:12,020 --> 00:34:17,389
sorry it's kind<font color="#E5E5E5"> of hard for me to hear</font>

830
00:34:14,300 --> 00:34:20,990
are<font color="#E5E5E5"> you saying should you enforce</font>

831
00:34:17,389 --> 00:34:23,240
encryption on like RTS or enforce

832
00:34:20,989 --> 00:34:27,529
encryption on various services that were

833
00:34:23,239 --> 00:34:29,540
you yeah<font color="#E5E5E5"> I mean even the encryption on</font>

834
00:34:27,530 --> 00:34:31,550
the volumes itself right<font color="#CCCCCC"> right some of</font>

835
00:34:29,540 --> 00:34:33,830
<font color="#E5E5E5">them are not encrypted right but then</font>

836
00:34:31,550 --> 00:34:36,379
what is too long the volume itself we

837
00:34:33,830 --> 00:34:41,119
include that<font color="#E5E5E5"> part then do we need</font><font color="#CCCCCC"> to</font>

838
00:34:36,379 --> 00:34:42,889
have the whole volume encrypted encrypt

839
00:34:41,119 --> 00:34:49,760
just a piece of the<font color="#CCCCCC"> volumes out your</font>

840
00:34:42,889 --> 00:34:51,500
something yeah in what way<font color="#CCCCCC"> we can take</font>

841
00:34:49,760 --> 00:34:53,540
<font color="#E5E5E5">it offline by the armature yeah a value</font>

842
00:34:51,500 --> 00:34:55,429
on<font color="#E5E5E5"> yeah all right</font><font color="#CCCCCC"> yeah cuz I'm feeling</font>

843
00:34:53,540 --> 00:35:02,740
that goes deeper than yeah and this<font color="#CCCCCC"> this</font>

844
00:34:55,429 --> 00:35:06,560
yes oh yeah<font color="#CCCCCC"> it's used to repeating back</font>

845
00:35:02,740 --> 00:35:11,299
that so you mentioned the cloud trail

846
00:35:06,560 --> 00:35:14,119
and the certain number of like it covers

847
00:35:11,300 --> 00:35:15,800
<font color="#E5E5E5">the number of actions and services is</font>

848
00:35:14,119 --> 00:35:17,780
there any kind<font color="#CCCCCC"> of</font><font color="#E5E5E5"> known holds like I've</font>

849
00:35:15,800 --> 00:35:19,250
you use cloud trail to audit and stuff

850
00:35:17,780 --> 00:35:20,990
like that<font color="#E5E5E5"> it felt like I wasn't seeing</font>

851
00:35:19,250 --> 00:35:23,540
everything is there any<font color="#E5E5E5"> kind of known</font>

852
00:35:20,990 --> 00:35:29,509
<font color="#CCCCCC">holes</font><font color="#E5E5E5"> or known areas that you need to</font>

853
00:35:23,540 --> 00:35:31,040
supplement so I've not heard that<font color="#E5E5E5"> one</font>

854
00:35:29,510 --> 00:35:34,340
yet that<font color="#E5E5E5"> clock shop might be missing</font>

855
00:35:31,040 --> 00:35:36,740
some pieces I would add that you should

856
00:35:34,340 --> 00:35:39,470
enforce<font color="#E5E5E5"> VPC flow logs you should enable</font>

857
00:35:36,740 --> 00:35:41,299
<font color="#E5E5E5">VPC flow logs because actually</font><font color="#CCCCCC"> I had</font>

858
00:35:39,470 --> 00:35:42,529
somebody do that and they reach back out

859
00:35:41,300 --> 00:35:44,030
and like you had a second<font color="#E5E5E5"> and turn that</font>

860
00:35:42,530 --> 00:35:45,560
on I realized<font color="#E5E5E5"> that people are scanning</font>

861
00:35:44,030 --> 00:35:47,270
us all day long right because its

862
00:35:45,560 --> 00:35:49,160
network level information that they're

863
00:35:47,270 --> 00:35:53,150
they're catching so to augment I guess

864
00:35:49,160 --> 00:35:56,359
what I'm saying<font color="#E5E5E5"> is to augment dogmen</font>

865
00:35:53,150 --> 00:35:58,580
macleod trail logs enable VPC flow logs

866
00:35:56,359 --> 00:35:59,578
I didn't<font color="#E5E5E5"> talk about it because I don't</font>

867
00:35:58,580 --> 00:36:01,499
<font color="#CCCCCC">want to</font>

868
00:35:59,579 --> 00:36:05,069
again I was actually<font color="#E5E5E5"> really afraid on</font>

869
00:36:01,499 --> 00:36:07,499
time but<font color="#CCCCCC"> splunk</font><font color="#E5E5E5"> I have in the link to</font>

870
00:36:05,069 --> 00:36:10,589
those previous talks I have a link to

871
00:36:07,499 --> 00:36:13,669
how to configure in spunk be set up with

872
00:36:10,589 --> 00:36:16,140
like SQS and has<font color="#CCCCCC"> a mess and so that</font>

873
00:36:13,670 --> 00:36:17,849
<font color="#CCCCCC">Splunk can get all of the information</font>

874
00:36:16,140 --> 00:36:20,969
and you can configure spunk to alert

875
00:36:17,849 --> 00:36:23,160
alert on it so that is a backup that I

876
00:36:20,969 --> 00:36:28,829
use<font color="#E5E5E5"> I have spunk have all of this</font>

877
00:36:23,160 --> 00:36:34,229
information as well Jason what's<font color="#E5E5E5"> up Adam</font>

878
00:36:28,829 --> 00:36:37,349
thanks for coming<font color="#E5E5E5"> any other parts around</font>

879
00:36:34,229 --> 00:36:40,939
<font color="#CCCCCC">skim on AWS likes I'll integrity</font>

880
00:36:37,349 --> 00:36:40,940
monitoring and then what<font color="#E5E5E5"> you do there</font>

881
00:36:41,059 --> 00:36:46,920
using AWS or something else using AWS is

882
00:36:45,209 --> 00:36:48,328
there a tool suite that you<font color="#E5E5E5"> use their or</font>

883
00:36:46,920 --> 00:36:51,900
a third party that<font color="#E5E5E5"> you would suggest</font>

884
00:36:48,329 --> 00:36:55,739
using not on AWS know for a third party

885
00:36:51,900 --> 00:36:58,109
I honestly<font color="#CCCCCC"> I'm probably not the the best</font>

886
00:36:55,739 --> 00:37:00,089
source on that cool<font color="#E5E5E5"> yeah I tried to keep</font>

887
00:36:58,109 --> 00:37:01,828
it pretty specific to AWS so again

888
00:37:00,089 --> 00:37:03,180
another part of<font color="#E5E5E5"> his</font><font color="#CCCCCC"> like I was trying</font>

889
00:37:01,829 --> 00:37:04,499
not to throw a bunch of brands in here

890
00:37:03,180 --> 00:37:08,489
so people are like oh i don't know like

891
00:37:04,499 --> 00:37:16,618
a<font color="#E5E5E5"> nascar like sponsored by oh</font><font color="#CCCCCC"> yeah</font>

892
00:37:08,489 --> 00:37:18,660
thanks yeah any other questions cool

893
00:37:16,619 --> 00:37:19,529
well thank you again<font color="#E5E5E5"> i really appreciate</font>

894
00:37:18,660 --> 00:37:22,459
hope you got something out of this

895
00:37:19,529 --> 00:37:22,459
thanks thanks everyone

896
00:37:29,200 --> 00:37:31,259
you

