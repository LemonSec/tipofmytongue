1
00:00:03,520 --> 00:00:06,640
so

2
00:00:04,400 --> 00:00:08,880
a little bit about myself um i do

3
00:00:06,640 --> 00:00:12,000
security stuff i'm not into the whole

4
00:00:08,880 --> 00:00:15,040
get my whole life feel um so uh

5
00:00:12,000 --> 00:00:16,960
but i do do it quite a bit on twitter um

6
00:00:15,040 --> 00:00:21,038
so there's my twitter handle

7
00:00:16,960 --> 00:00:24,720
and i do blogging so quite a few posts

8
00:00:21,039 --> 00:00:26,150
uh various technical non-technical

9
00:00:24,720 --> 00:00:28,400
so that's where our blog gets

10
00:00:26,150 --> 00:00:31,278
[Music]

11
00:00:28,400 --> 00:00:33,040
so just a few things first uh what i'm

12
00:00:31,279 --> 00:00:35,680
going to talk about today is nothing new

13
00:00:33,040 --> 00:00:36,480
uh it's already been talking about uh

14
00:00:35,680 --> 00:00:38,559
several people

15
00:00:36,480 --> 00:00:39,839
have written about in blog posts

16
00:00:38,559 --> 00:00:42,879
including myself

17
00:00:39,840 --> 00:00:45,520
um but i've never seen this actually

18
00:00:42,879 --> 00:00:47,039
talked about in an actual talk um so i

19
00:00:45,520 --> 00:00:50,239
thought that trial

20
00:00:47,039 --> 00:00:52,399
um so along with that

21
00:00:50,239 --> 00:00:53,760
not as i said it's not new it's not

22
00:00:52,399 --> 00:00:56,960
thought provoking

23
00:00:53,760 --> 00:00:58,800
people are aware of this but as i see

24
00:00:56,960 --> 00:01:00,160
more and more news coming out about dns

25
00:00:58,800 --> 00:01:02,160
over https

26
00:01:00,160 --> 00:01:03,358
i think it's important to share some of

27
00:01:02,160 --> 00:01:08,399
the shortcomings

28
00:01:03,359 --> 00:01:08,400
uh that may be uh part of the protocol

29
00:01:08,479 --> 00:01:12,320
and as we get towards the end you'll see

30
00:01:10,880 --> 00:01:15,039
there's some control

31
00:01:12,320 --> 00:01:16,639
controversy about this some people are

32
00:01:15,040 --> 00:01:18,720
not happy about it and the direction

33
00:01:16,640 --> 00:01:20,880
it's going but i'll cover that later

34
00:01:18,720 --> 00:01:22,158
and there may be some nudity no i'm

35
00:01:20,880 --> 00:01:25,679
joking

36
00:01:22,159 --> 00:01:30,079
but there is assad dodgy site which

37
00:01:25,680 --> 00:01:31,920
will censor all right so as i said um

38
00:01:30,079 --> 00:01:34,320
it's nothing new people have blogged

39
00:01:31,920 --> 00:01:35,759
about this um so

40
00:01:34,320 --> 00:01:38,240
to apologize if you're expecting some

41
00:01:35,759 --> 00:01:42,479
zero day or something like that

42
00:01:38,240 --> 00:01:46,158
um which is not right so

43
00:01:42,479 --> 00:01:48,799
dns over https uh

44
00:01:46,159 --> 00:01:50,799
it's been touted as privacy first

45
00:01:48,799 --> 00:01:53,680
default

46
00:01:50,799 --> 00:01:54,479
privacy by default and there's several

47
00:01:53,680 --> 00:01:57,600
articles

48
00:01:54,479 --> 00:01:58,159
uh headlines um out there with with some

49
00:01:57,600 --> 00:02:01,119
of them

50
00:01:58,159 --> 00:02:01,439
uh a more recent one is saying how the

51
00:02:01,119 --> 00:02:03,439
uh

52
00:02:01,439 --> 00:02:04,960
dns of https is going to help prevent

53
00:02:03,439 --> 00:02:08,399
isps snooping on for

54
00:02:04,960 --> 00:02:08,720
people the purpose of this talk is to

55
00:02:08,399 --> 00:02:11,760
show

56
00:02:08,720 --> 00:02:12,560
that's not quite the case um just

57
00:02:11,760 --> 00:02:14,959
highlighting

58
00:02:12,560 --> 00:02:15,680
several ways that isps could possibly

59
00:02:14,959 --> 00:02:19,120
use

60
00:02:15,680 --> 00:02:22,160
or other actors such as nation states

61
00:02:19,120 --> 00:02:25,440
um or even attackers uh criminal

62
00:02:22,160 --> 00:02:29,359
organizations and that can use

63
00:02:25,440 --> 00:02:32,800
so we can't go further without

64
00:02:29,360 --> 00:02:36,239
first talking about dns right so

65
00:02:32,800 --> 00:02:40,400
dns acronym for the name and name

66
00:02:36,239 --> 00:02:42,560
server system this dates back to opennet

67
00:02:40,400 --> 00:02:44,400
so arpanet is the origins of the

68
00:02:42,560 --> 00:02:47,599
internet

69
00:02:44,400 --> 00:02:49,519
uh for the mandatory based system

70
00:02:47,599 --> 00:02:51,119
connectivity of computers and that was

71
00:02:49,519 --> 00:02:54,480
the foundation of the internet

72
00:02:51,120 --> 00:02:57,519
as we know today um and the basis of

73
00:02:54,480 --> 00:03:00,720
the internet is tcps transmission

74
00:02:57,519 --> 00:03:04,000
control protocol and internet

75
00:03:00,720 --> 00:03:05,519
internet protocol address the rpa is

76
00:03:04,000 --> 00:03:07,280
going to be really important

77
00:03:05,519 --> 00:03:09,599
because you'll see it's like going to be

78
00:03:07,280 --> 00:03:10,080
the foundation of a lot of the ways of

79
00:03:09,599 --> 00:03:13,280
to

80
00:03:10,080 --> 00:03:17,440
work out uh dns records

81
00:03:13,280 --> 00:03:20,319
uh when using dns over https

82
00:03:17,440 --> 00:03:22,079
so i'm going to start with a question

83
00:03:20,319 --> 00:03:22,879
who can give me the rpa address of

84
00:03:22,080 --> 00:03:27,200
google

85
00:03:22,879 --> 00:03:33,840
the uk version of google anyone

86
00:03:27,200 --> 00:03:33,839
nope uh

87
00:03:34,799 --> 00:03:39,280
off the top of your head so as you can

88
00:03:36,319 --> 00:03:42,560
see we have a problem

89
00:03:39,280 --> 00:03:44,080
computers talk rp to rp but humans don't

90
00:03:42,560 --> 00:03:46,480
know rpgs it's going to be very

91
00:03:44,080 --> 00:03:47,599
difficult to remember rp address so if

92
00:03:46,480 --> 00:03:49,599
you're interested

93
00:03:47,599 --> 00:03:51,119
well that was the rp address i don't

94
00:03:49,599 --> 00:03:52,959
know if it is still but that was the

95
00:03:51,120 --> 00:03:56,400
update just when i did these slides

96
00:03:52,959 --> 00:03:58,319
um and you can see it really difficult

97
00:03:56,400 --> 00:04:00,319
that's one slot we've got thousands of

98
00:03:58,319 --> 00:04:03,839
sites it's just never gonna

99
00:04:00,319 --> 00:04:03,839
scale so

100
00:04:05,920 --> 00:04:11,679
domain name is a human readable format

101
00:04:09,680 --> 00:04:13,439
that allows it makes it easier for

102
00:04:11,680 --> 00:04:17,040
humans to

103
00:04:13,439 --> 00:04:20,478
be able to look up an rp address

104
00:04:17,040 --> 00:04:23,520
so go to a system

105
00:04:20,478 --> 00:04:23,919
get the details i want and allow system

106
00:04:23,520 --> 00:04:26,960
to

107
00:04:23,919 --> 00:04:26,960
system communication

108
00:04:28,400 --> 00:04:37,679
so sorry i was meant to ask questions

109
00:04:32,400 --> 00:04:38,960
as you can see um www.google.com.uk is a

110
00:04:37,680 --> 00:04:42,720
lot simpler

111
00:04:38,960 --> 00:04:44,479
to look up and remember i'm pretty sure

112
00:04:42,720 --> 00:04:46,479
most people in this room would have

113
00:04:44,479 --> 00:04:49,840
mentioned that if i ask them

114
00:04:46,479 --> 00:04:52,159
what is the host name for the google uk

115
00:04:49,840 --> 00:04:52,159
search

116
00:04:55,199 --> 00:04:59,440
so dns is a way to resolve these host

117
00:04:58,080 --> 00:05:02,479
names so it's mapping

118
00:04:59,440 --> 00:05:04,160
hostname to rp address and you can

119
00:05:02,479 --> 00:05:05,169
see this when you actually do a dns

120
00:05:04,160 --> 00:05:06,560
query um

121
00:05:05,170 --> 00:05:10,320
[Music]

122
00:05:06,560 --> 00:05:14,160
so there's a deck that gives a utility

123
00:05:10,320 --> 00:05:17,199
um based on linux uh that you can use to

124
00:05:14,160 --> 00:05:19,680
do dns lookups um so just

125
00:05:17,199 --> 00:05:20,960
a big nice name and that will return the

126
00:05:19,680 --> 00:05:23,039
rp address

127
00:05:20,960 --> 00:05:24,560
there are different options you can make

128
00:05:23,039 --> 00:05:27,680
it easier and less

129
00:05:24,560 --> 00:05:30,080
noisy than that but that's the basic

130
00:05:27,680 --> 00:05:30,080
premise

131
00:05:31,840 --> 00:05:37,679
so this is all well um

132
00:05:35,520 --> 00:05:40,960
but there's the problem with this does

133
00:05:37,680 --> 00:05:40,960
anyone know what the problem is

134
00:05:42,000 --> 00:05:51,759
anyone yes right

135
00:05:46,080 --> 00:05:54,159
yes so it's transmitted in plain text

136
00:05:51,759 --> 00:05:54,800
so this means anyone that is able to

137
00:05:54,160 --> 00:05:57,600
snap

138
00:05:54,800 --> 00:05:59,199
that traffic be it man in the middle or

139
00:05:57,600 --> 00:06:01,440
a star channel

140
00:05:59,199 --> 00:06:03,120
attacks where they can double some of

141
00:06:01,440 --> 00:06:05,360
the traffic

142
00:06:03,120 --> 00:06:06,319
and view that traffic they'll be able to

143
00:06:05,360 --> 00:06:09,759
view

144
00:06:06,319 --> 00:06:12,080
the dns lookups so the host names

145
00:06:09,759 --> 00:06:13,199
that were looked at now from privacy

146
00:06:12,080 --> 00:06:17,359
point of view

147
00:06:13,199 --> 00:06:20,720
they saw something because let's say

148
00:06:17,360 --> 00:06:24,400
you're dodging or you know trying to uh

149
00:06:20,720 --> 00:06:26,000
view sites that are questionable um

150
00:06:24,400 --> 00:06:28,719
i'm not gonna say whatever and judge

151
00:06:26,000 --> 00:06:30,800
people but um

152
00:06:28,720 --> 00:06:32,479
you might want to keep that private

153
00:06:30,800 --> 00:06:34,319
obviously if it's all plain text i can

154
00:06:32,479 --> 00:06:36,560
see what you're viewing

155
00:06:34,319 --> 00:06:38,319
um and then the other thing is this is

156
00:06:36,560 --> 00:06:39,680
for more mana in the middle so you would

157
00:06:38,319 --> 00:06:41,199
have to get 9 in the middle you can

158
00:06:39,680 --> 00:06:44,639
tamper with that so

159
00:06:41,199 --> 00:06:47,199
i look up host a and it should go to

160
00:06:44,639 --> 00:06:48,960
machine x y z but attacker could change

161
00:06:47,199 --> 00:06:52,319
it to their rogue machine

162
00:06:48,960 --> 00:06:55,198
um and that's the way of diverting uh

163
00:06:52,319 --> 00:06:56,560
users to malicious servers and phishing

164
00:06:55,199 --> 00:06:57,120
sites and that kind of thing well not

165
00:06:56,560 --> 00:07:00,840
efficient

166
00:06:57,120 --> 00:07:03,840
but malicious servers posing as a real

167
00:07:00,840 --> 00:07:03,840
server

168
00:07:04,000 --> 00:07:09,599
so as i mentioned um plain text

169
00:07:07,280 --> 00:07:12,159
there's the privacy aspect and you'll

170
00:07:09,599 --> 00:07:12,159
find a lot of

171
00:07:12,319 --> 00:07:16,240
actors whatever you want to turn them

172
00:07:15,039 --> 00:07:19,199
use this

173
00:07:16,240 --> 00:07:20,400
for several reasons isps perhaps

174
00:07:19,199 --> 00:07:22,800
marketing

175
00:07:20,400 --> 00:07:23,758
governments especially repressive

176
00:07:22,800 --> 00:07:27,759
regimes

177
00:07:23,759 --> 00:07:29,520
spanish citizens vendors again

178
00:07:27,759 --> 00:07:31,039
i'm not going to mention names but i

179
00:07:29,520 --> 00:07:34,318
think we'll kind of

180
00:07:31,039 --> 00:07:36,318
know some that use this for further

181
00:07:34,319 --> 00:07:38,560
marketing purposes and as i mentioned

182
00:07:36,319 --> 00:07:40,639
bad actors they could use this to form

183
00:07:38,560 --> 00:07:43,280
a profile someone or even do man in the

184
00:07:40,639 --> 00:07:46,800
middle of attacks

185
00:07:43,280 --> 00:07:50,159
so we also have to remember dns

186
00:07:46,800 --> 00:07:50,879
is an old protocol um it dates around

187
00:07:50,160 --> 00:07:53,759
back to

188
00:07:50,879 --> 00:07:54,400
arp net which i forgot the exact yeah i

189
00:07:53,759 --> 00:07:58,960
think it was

190
00:07:54,400 --> 00:08:01,919
70s or 80s um so it's quite old now

191
00:07:58,960 --> 00:08:02,878
and it works well in the in this in the

192
00:08:01,919 --> 00:08:05,039
beginning

193
00:08:02,879 --> 00:08:06,400
i mean in the beginning we never had

194
00:08:05,039 --> 00:08:08,240
things like

195
00:08:06,400 --> 00:08:09,599
organized crime and all these things

196
00:08:08,240 --> 00:08:13,280
that we have to worry about today

197
00:08:09,599 --> 00:08:15,919
from a security point of view um so

198
00:08:13,280 --> 00:08:17,198
fits the ball perfectly in those days

199
00:08:15,919 --> 00:08:19,120
but as we move into

200
00:08:17,199 --> 00:08:20,560
the more modern world and times are

201
00:08:19,120 --> 00:08:22,800
changing um

202
00:08:20,560 --> 00:08:25,120
we need to retrofit it you'll find a lot

203
00:08:22,800 --> 00:08:26,240
of protocols are retrofitted http being

204
00:08:25,120 --> 00:08:29,199
one of them it's

205
00:08:26,240 --> 00:08:31,520
kind of a bolt-on security um so now

206
00:08:29,199 --> 00:08:35,039
we're heading to that stage with dns

207
00:08:31,520 --> 00:08:38,640
and that's where dns over https um

208
00:08:35,039 --> 00:08:41,679
is comes about

209
00:08:38,640 --> 00:08:44,800
some people will cringe at this

210
00:08:41,679 --> 00:08:45,519
and do cringe at this um again cover

211
00:08:44,800 --> 00:08:47,519
that later

212
00:08:45,519 --> 00:08:48,720
but the basic premise is instead of

213
00:08:47,519 --> 00:08:52,160
sending the dns

214
00:08:48,720 --> 00:08:56,160
in a plain text transmission

215
00:08:52,160 --> 00:08:58,880
you're encapsulating http uh https

216
00:08:56,160 --> 00:08:59,760
um transmission so then that way it's

217
00:08:58,880 --> 00:09:03,040
encrypted

218
00:08:59,760 --> 00:09:06,880
so technically lauren should be able to

219
00:09:03,040 --> 00:09:06,880
view that or tamper with it

220
00:09:07,040 --> 00:09:11,519
so then this should help from a privacy

221
00:09:09,760 --> 00:09:14,160
point of view right

222
00:09:11,519 --> 00:09:17,120
no one should be able to see what dns

223
00:09:14,160 --> 00:09:17,120
requests are making

224
00:09:21,279 --> 00:09:27,150
so ah mr

225
00:09:25,040 --> 00:09:28,480
demo sorry um

226
00:09:27,150 --> 00:09:31,519
[Music]

227
00:09:28,480 --> 00:09:37,839
before i begin let me show you two

228
00:09:31,519 --> 00:09:37,839
parts so one i'm gonna do

229
00:09:41,519 --> 00:09:54,560
if i cannot again

230
00:09:51,760 --> 00:09:56,319
okay so what i haven't set up here is

231
00:09:54,560 --> 00:09:59,119
kind of mimicking a man in the middle

232
00:09:56,320 --> 00:09:59,680
so i have a rafael pineapple all costing

233
00:09:59,120 --> 00:10:02,320
out

234
00:09:59,680 --> 00:10:04,000
uh and this computer is connected to it

235
00:10:02,320 --> 00:10:07,040
so all traffic is going by

236
00:10:04,000 --> 00:10:09,680
my wi-fi panel through my my laptop

237
00:10:07,040 --> 00:10:11,120
um and now to the internet so this way i

238
00:10:09,680 --> 00:10:13,359
can see requests going

239
00:10:11,120 --> 00:10:14,720
back and forth i can also tamper with

240
00:10:13,360 --> 00:10:15,920
them but i'm not going to show you that

241
00:10:14,720 --> 00:10:19,519
i'm just going to show you

242
00:10:15,920 --> 00:10:22,160
the um request viewing them

243
00:10:19,519 --> 00:10:23,279
so the very first thing i'm going to do

244
00:10:22,160 --> 00:10:27,600
is

245
00:10:23,279 --> 00:10:27,600
do a packet down

246
00:10:31,040 --> 00:10:47,839
and i lost connectivity once

247
00:10:34,079 --> 00:10:47,839
i can

248
00:10:51,279 --> 00:10:55,360
okay so i'm on the pineapple

249
00:10:57,200 --> 00:11:05,360
and i'm gonna do a tcp dump

250
00:11:00,880 --> 00:11:05,360
i'm just going to write it to a dns

251
00:11:09,360 --> 00:11:12,480
okay so what that's going to do is

252
00:11:11,040 --> 00:11:13,760
capture all the packets

253
00:11:12,480 --> 00:11:16,560
that are going through the waffle

254
00:11:13,760 --> 00:11:21,360
pineapple and

255
00:11:16,560 --> 00:11:21,359
i'm going to do a quick look up

256
00:11:22,720 --> 00:11:29,839
on the system

257
00:11:38,510 --> 00:11:57,839
[Music]

258
00:11:41,519 --> 00:11:57,839
i'm and view that in my shock

259
00:12:10,000 --> 00:12:25,839
um sorry

260
00:12:52,480 --> 00:12:54,720
all right

261
00:13:03,680 --> 00:13:11,839
okay so now we have

262
00:13:07,519 --> 00:13:13,920
the packet capture we can

263
00:13:11,839 --> 00:13:16,720
now view it in wireshark i'm going to

264
00:13:13,920 --> 00:13:20,399
simply query out

265
00:13:16,720 --> 00:13:22,000
dns requests and the one request that i

266
00:13:20,399 --> 00:13:25,600
looked at was to google

267
00:13:22,000 --> 00:13:28,880
and you can see it quite clearly here

268
00:13:25,600 --> 00:13:30,399
that the query was for google and

269
00:13:28,880 --> 00:13:33,519
there's a response so

270
00:13:30,399 --> 00:13:37,040
as you can see dns over there

271
00:13:33,519 --> 00:13:42,240
is is um plain text

272
00:13:37,040 --> 00:13:47,120
so the next thing i'm going to do

273
00:13:42,240 --> 00:13:50,560
is i'm going to stop this capture

274
00:13:47,120 --> 00:13:50,560
i'm going to do a new one

275
00:13:52,000 --> 00:13:57,120
we've got a dot and i'm actually going

276
00:13:54,800 --> 00:13:57,120
to do

277
00:13:57,680 --> 00:14:00,560
that didn't start

278
00:14:01,600 --> 00:14:06,639
you know what okay i'm

279
00:14:04,720 --> 00:14:08,480
gonna give up on the live demo i have a

280
00:14:06,639 --> 00:14:11,040
backup um

281
00:14:08,480 --> 00:14:11,920
well just revert back to the dev backup

282
00:14:11,040 --> 00:14:14,800
um

283
00:14:11,920 --> 00:14:15,599
i at least wanted to show at least one

284
00:14:14,800 --> 00:14:18,800
um

285
00:14:15,600 --> 00:14:31,440
that was live

286
00:14:18,800 --> 00:14:35,040
all right

287
00:14:31,440 --> 00:14:37,519
all right so 1.1.1

288
00:14:35,040 --> 00:14:40,240
is cloudflare and cloudflare provides

289
00:14:37,519 --> 00:14:43,360
dns over tls

290
00:14:40,240 --> 00:14:46,880
and a dns of https

291
00:14:43,360 --> 00:14:49,600
now if you now view this you can see

292
00:14:46,880 --> 00:14:50,800
that it is now encrypted you're not

293
00:14:49,600 --> 00:14:54,079
going to be able to see

294
00:14:50,800 --> 00:14:56,839
what the query was um and that was

295
00:14:54,079 --> 00:14:58,560
to my own blog post that actual dns

296
00:14:56,839 --> 00:15:02,240
lookup

297
00:14:58,560 --> 00:15:07,279
so you can see that from that aspect

298
00:15:02,240 --> 00:15:12,720
it's great it provides

299
00:15:07,279 --> 00:15:14,480
privacy right

300
00:15:12,720 --> 00:15:16,000
and as i briefly mentioned there's also

301
00:15:14,480 --> 00:15:17,680
dns over tls

302
00:15:16,000 --> 00:15:20,639
so the difference being is instead of

303
00:15:17,680 --> 00:15:23,680
using https to encapsulate it

304
00:15:20,639 --> 00:15:24,720
it uses tls some people view this as a

305
00:15:23,680 --> 00:15:27,359
better means

306
00:15:24,720 --> 00:15:29,600
because it's less overhead and they just

307
00:15:27,360 --> 00:15:32,000
view it as the cleaner way of doing it

308
00:15:29,600 --> 00:15:33,680
um but then at the end of the day it

309
00:15:32,000 --> 00:15:36,399
kind of accomplishes the same thing

310
00:15:33,680 --> 00:15:38,239
it encapsulates in an encrypted channel

311
00:15:36,399 --> 00:15:40,399
you try to view that

312
00:15:38,240 --> 00:15:42,320
and you're not going to be able to view

313
00:15:40,399 --> 00:15:45,600
match

314
00:15:42,320 --> 00:15:49,759
so question does anyone think the souls

315
00:15:45,600 --> 00:15:49,759
the privacy aspect

316
00:15:49,839 --> 00:15:58,320
see a few shakes in the head few nodes

317
00:15:53,279 --> 00:15:58,320
okay well it doesn't

318
00:16:00,480 --> 00:16:06,480
all right um so if we take a step back

319
00:16:04,720 --> 00:16:08,000
and let's look at the way the internet

320
00:16:06,480 --> 00:16:11,199
works remember at the beginning

321
00:16:08,000 --> 00:16:13,680
i said tcprp now

322
00:16:11,199 --> 00:16:15,680
we go back to the network classes i'm

323
00:16:13,680 --> 00:16:18,319
sure many of you have seen these type of

324
00:16:15,680 --> 00:16:18,719
diagrams if you've been university or

325
00:16:18,320 --> 00:16:22,480
studied

326
00:16:18,720 --> 00:16:23,040
network courses um so this is the osr

327
00:16:22,480 --> 00:16:25,040
model

328
00:16:23,040 --> 00:16:27,439
for those who don't know it's a model

329
00:16:25,040 --> 00:16:31,279
that represents kind of a network stack

330
00:16:27,440 --> 00:16:32,959
um and dns typically operates at the

331
00:16:31,279 --> 00:16:35,519
application level

332
00:16:32,959 --> 00:16:36,399
somewhat argue presentation level or

333
00:16:35,519 --> 00:16:38,560
lower down

334
00:16:36,399 --> 00:16:39,600
but the point is it's kind of at least

335
00:16:38,560 --> 00:16:42,880
the first

336
00:16:39,600 --> 00:16:45,600
top three rp on the other hand

337
00:16:42,880 --> 00:16:47,199
operates at the network level now why

338
00:16:45,600 --> 00:16:48,959
this is important is

339
00:16:47,199 --> 00:16:50,319
the encryption is happening at the

340
00:16:48,959 --> 00:16:52,880
application level

341
00:16:50,320 --> 00:16:55,759
which is higher up and you have the rp

342
00:16:52,880 --> 00:16:55,759
at the lower level

343
00:16:56,000 --> 00:17:00,560
looking at another model which is

344
00:16:57,360 --> 00:17:04,000
perhaps of akina the tcprp model

345
00:17:00,560 --> 00:17:05,760
same thing the dns of

346
00:17:04,000 --> 00:17:07,679
hdbs is happening at the application

347
00:17:05,760 --> 00:17:10,879
level and your actual

348
00:17:07,679 --> 00:17:11,600
raw data transfers happen at the tcprp

349
00:17:10,880 --> 00:17:14,720
level

350
00:17:11,599 --> 00:17:15,520
you not i mean technically the network

351
00:17:14,720 --> 00:17:18,079
level the

352
00:17:15,520 --> 00:17:18,879
interface level but just for the purpose

353
00:17:18,079 --> 00:17:21,198
of this talk

354
00:17:18,880 --> 00:17:22,720
we'll focus on the rp level so the thing

355
00:17:21,199 --> 00:17:25,839
is

356
00:17:22,720 --> 00:17:27,919
the rp will always be sent with all

357
00:17:25,839 --> 00:17:31,200
requests

358
00:17:27,919 --> 00:17:33,520
now this is important because with that

359
00:17:31,200 --> 00:17:36,640
rp

360
00:17:33,520 --> 00:17:39,440
you can start working backwards there's

361
00:17:36,640 --> 00:17:41,520
several things that you can use uh from

362
00:17:39,440 --> 00:17:42,640
that rp lookups that you can do with

363
00:17:41,520 --> 00:17:45,280
that rp

364
00:17:42,640 --> 00:17:46,320
and then you can start trying to reverse

365
00:17:45,280 --> 00:17:49,280
back to get their

366
00:17:46,320 --> 00:17:49,280
original host name

367
00:17:49,600 --> 00:17:52,879
there are a bit of caveats to this that

368
00:17:51,760 --> 00:17:56,240
kind of throw announced

369
00:17:52,880 --> 00:17:57,120
you know into it um so today with cloud

370
00:17:56,240 --> 00:18:00,080
computing

371
00:17:57,120 --> 00:18:00,799
kind of makes this a lot harder because

372
00:18:00,080 --> 00:18:04,720
you have

373
00:18:00,799 --> 00:18:07,600
random rp's that changing all the time

374
00:18:04,720 --> 00:18:11,039
and you have sometimes the same rp being

375
00:18:07,600 --> 00:18:11,039
used for multiple services

376
00:18:12,080 --> 00:18:15,678
and then also multiple certificates to a

377
00:18:14,320 --> 00:18:18,879
host

378
00:18:15,679 --> 00:18:22,720
well codes sam

379
00:18:18,880 --> 00:18:24,320
but you'll see those in a bit so

380
00:18:22,720 --> 00:18:26,840
the very first example i'm going to show

381
00:18:24,320 --> 00:18:29,760
you is just using pain

382
00:18:26,840 --> 00:18:43,840
http now

383
00:18:29,760 --> 00:18:43,840
this one's going to be pretty trivial

384
00:18:54,160 --> 00:18:58,080
okay so this up here can anyone tell me

385
00:18:57,200 --> 00:19:01,679
what's

386
00:18:58,080 --> 00:19:01,678
where was the host name when i used it

387
00:19:03,520 --> 00:19:08,799
can you read that scripting.com there we

388
00:19:07,679 --> 00:19:11,600
go

389
00:19:08,799 --> 00:19:12,559
i didn't use any dns lookups there i

390
00:19:11,600 --> 00:19:15,760
worked it out

391
00:19:12,559 --> 00:19:16,160
so as isp i can start as i come to the

392
00:19:15,760 --> 00:19:19,520
end

393
00:19:16,160 --> 00:19:20,240
start formulating a table of rpe to host

394
00:19:19,520 --> 00:19:25,840
names

395
00:19:20,240 --> 00:19:25,840
for my own dns lookup

396
00:19:28,720 --> 00:19:35,520
the other one that i want to show you

397
00:19:33,280 --> 00:19:35,520
sorry

398
00:19:37,600 --> 00:19:42,240
is a single hosted rp now

399
00:19:40,640 --> 00:19:44,559
i was going to show you this i do have

400
00:19:42,240 --> 00:19:45,840
an example but i don't know if i'm

401
00:19:44,559 --> 00:19:49,280
allowed to show it so

402
00:19:45,840 --> 00:19:50,480
i decided not to um i want to avoid

403
00:19:49,280 --> 00:19:53,120
being in trouble

404
00:19:50,480 --> 00:19:53,760
so that one's out so but the idea behind

405
00:19:53,120 --> 00:19:57,039
this is

406
00:19:53,760 --> 00:20:00,480
simple uh you take the rp that's in

407
00:19:57,039 --> 00:20:02,158
your packet capture and you just do a

408
00:20:00,480 --> 00:20:02,880
reverse lookup so you can do this with

409
00:20:02,159 --> 00:20:05,679
dig

410
00:20:02,880 --> 00:20:06,880
just do it with a minus capital x and it

411
00:20:05,679 --> 00:20:09,200
will return the

412
00:20:06,880 --> 00:20:10,159
the hostname that that rp typically

413
00:20:09,200 --> 00:20:12,480
resolves to

414
00:20:10,159 --> 00:20:14,880
so you'll find cases where our ip will

415
00:20:12,480 --> 00:20:17,440
always resolve to a single voice name

416
00:20:14,880 --> 00:20:20,480
so when you do a reverse lookup you'll

417
00:20:17,440 --> 00:20:24,799
find that rp

418
00:20:20,480 --> 00:20:26,799
now that's all very well and good but

419
00:20:24,799 --> 00:20:28,080
how is it going to help when you can't

420
00:20:26,799 --> 00:20:30,960
use our piece

421
00:20:28,080 --> 00:20:32,480
well there's another channel that you

422
00:20:30,960 --> 00:20:35,600
can use for this

423
00:20:32,480 --> 00:20:37,039
and that is certificates so as we see

424
00:20:35,600 --> 00:20:39,760
the the internet moving

425
00:20:37,039 --> 00:20:41,600
towards more and more encrypted web

426
00:20:39,760 --> 00:20:45,520
certificates can actually help

427
00:20:41,600 --> 00:20:45,520
in some aspect of working at the rp

428
00:20:47,600 --> 00:20:50,639
and that's because of the way

429
00:20:49,360 --> 00:20:52,158
certificates work

430
00:20:50,640 --> 00:20:55,280
so when a client's connecting to a

431
00:20:52,159 --> 00:20:56,720
server the server presents a certificate

432
00:20:55,280 --> 00:20:59,120
the client's saying hey i want to

433
00:20:56,720 --> 00:21:00,960
connect to server xyz

434
00:20:59,120 --> 00:21:04,559
the server will present a certificate

435
00:21:00,960 --> 00:21:04,559
saying i'm xyz

436
00:21:04,880 --> 00:21:08,240
so if you can work out the server

437
00:21:06,880 --> 00:21:10,080
they're connecting to you can get the

438
00:21:08,240 --> 00:21:13,440
certificate you can work out what

439
00:21:10,080 --> 00:21:16,559
they were requesting

440
00:21:13,440 --> 00:21:16,880
now it's not always as simple as connect

441
00:21:16,559 --> 00:21:19,039
to

442
00:21:16,880 --> 00:21:19,919
a server you found a host name because

443
00:21:19,039 --> 00:21:22,240
there are different

444
00:21:19,919 --> 00:21:23,360
things that come in certificates that

445
00:21:22,240 --> 00:21:25,440
allow for

446
00:21:23,360 --> 00:21:26,719
multiple hosts to be used for a single

447
00:21:25,440 --> 00:21:30,480
certificate

448
00:21:26,720 --> 00:21:31,200
so things like wildfires so a wild card

449
00:21:30,480 --> 00:21:34,960
means

450
00:21:31,200 --> 00:21:37,159
any um sub domain within

451
00:21:34,960 --> 00:21:38,480
the wild card so if you had like

452
00:21:37,159 --> 00:21:41,919
start.google.com

453
00:21:38,480 --> 00:21:43,200
you could have serverabc.google.com

454
00:21:41,919 --> 00:21:44,880
that will be allowable for the

455
00:21:43,200 --> 00:21:46,559
certificate and then you also have

456
00:21:44,880 --> 00:21:49,120
subject alternative names

457
00:21:46,559 --> 00:21:51,360
so there's multiple dns or hostnames for

458
00:21:49,120 --> 00:21:53,199
certificate

459
00:21:51,360 --> 00:21:55,760
but there are ways around that i'll show

460
00:21:53,200 --> 00:21:55,760
you in a bit

461
00:21:56,159 --> 00:22:03,760
all right so

462
00:21:59,440 --> 00:22:07,200
single host name on a certificate

463
00:22:03,760 --> 00:22:10,960
so i have an example of this um well

464
00:22:07,200 --> 00:22:13,440
it has a wild card but it

465
00:22:10,960 --> 00:22:27,840
kind of obvious straight away when you

466
00:22:13,440 --> 00:22:27,840
view it

467
00:22:34,400 --> 00:22:41,840
just want to make sure i get it

468
00:22:52,880 --> 00:22:55,840
okay

469
00:22:55,919 --> 00:23:02,080
so you can see a certificate of science

470
00:22:58,720 --> 00:23:02,080
and you can view the certificates

471
00:23:04,000 --> 00:23:09,520
pretty obvious what they guys did so

472
00:23:07,280 --> 00:23:12,480
if that's kind of really it's like a

473
00:23:09,520 --> 00:23:12,480
pornhub dot com

474
00:23:14,559 --> 00:23:21,520
and that and that was using dns of https

475
00:23:18,480 --> 00:23:24,400
so it's kind of leveraging this

476
00:23:21,520 --> 00:23:25,039
and this is the thing about hacking in a

477
00:23:24,400 --> 00:23:27,840
sense

478
00:23:25,039 --> 00:23:29,200
leveraging the system against itself um

479
00:23:27,840 --> 00:23:31,280
this is the thing i find

480
00:23:29,200 --> 00:23:32,720
often most fascinating about attacking

481
00:23:31,280 --> 00:23:36,720
and finding means of

482
00:23:32,720 --> 00:23:38,960
exploiting something you can often use

483
00:23:36,720 --> 00:23:40,000
things within the system to exploit

484
00:23:38,960 --> 00:23:42,880
itself

485
00:23:40,000 --> 00:23:42,880
and i always love that

486
00:23:44,000 --> 00:23:47,679
so the next example i'm going to show

487
00:23:46,559 --> 00:23:49,360
you

488
00:23:47,679 --> 00:23:50,960
is what happens if you have multiple

489
00:23:49,360 --> 00:23:54,240
domains or host names

490
00:23:50,960 --> 00:23:56,480
for certificates so as i mentioned

491
00:23:54,240 --> 00:23:57,600
i mean the last example was kind of the

492
00:23:56,480 --> 00:23:58,799
example

493
00:23:57,600 --> 00:24:01,039
but it's pretty obvious what the

494
00:23:58,799 --> 00:24:03,440
person's doing but say you had something

495
00:24:01,039 --> 00:24:03,440
like

496
00:24:03,600 --> 00:24:08,799
this now

497
00:24:06,960 --> 00:24:10,240
believe it or not that was google's

498
00:24:08,799 --> 00:24:13,200
certificate uh

499
00:24:10,240 --> 00:24:14,799
i think two years ago uh each one of

500
00:24:13,200 --> 00:24:17,200
those is a wild card in

501
00:24:14,799 --> 00:24:18,158
a sign entry so that's thousands of

502
00:24:17,200 --> 00:24:20,400
servers

503
00:24:18,159 --> 00:24:22,960
um good luck trying to work out a single

504
00:24:20,400 --> 00:24:26,559
rp from that

505
00:24:22,960 --> 00:24:30,080
but there's a way so the way i view that

506
00:24:26,559 --> 00:24:32,559
is kind of like post quotes right

507
00:24:30,080 --> 00:24:33,600
if i give up postcode in this case that

508
00:24:32,559 --> 00:24:38,320
certificate

509
00:24:33,600 --> 00:24:41,600
it will give me a idea of

510
00:24:38,320 --> 00:24:44,960
a region or a

511
00:24:41,600 --> 00:24:45,520
collection of servers that pertain to a

512
00:24:44,960 --> 00:24:49,840
single

513
00:24:45,520 --> 00:24:52,080
rp address and

514
00:24:49,840 --> 00:24:54,000
if i can find something within the

515
00:24:52,080 --> 00:24:57,120
traffic that helps me narrow it down

516
00:24:54,000 --> 00:25:00,559
further then i can pinpoint it

517
00:24:57,120 --> 00:25:03,520
even further uh

518
00:25:00,559 --> 00:25:03,520
such as like a

519
00:25:04,240 --> 00:25:11,919
such as like a uh actual address

520
00:25:08,159 --> 00:25:11,919
as you associate with postcode

521
00:25:12,480 --> 00:25:19,360
and this is the server name indicator uh

522
00:25:15,760 --> 00:25:23,120
indication so this is a

523
00:25:19,360 --> 00:25:26,399
field that gets sent with a request that

524
00:25:23,120 --> 00:25:29,918
then tells the server that's you

525
00:25:26,400 --> 00:25:32,450
requesting hostname x or whatever

526
00:25:29,919 --> 00:25:33,919
and all fair to appropriate uh

527
00:25:32,450 --> 00:25:36,400
[Music]

528
00:25:33,919 --> 00:25:37,440
certificates and data associated with

529
00:25:36,400 --> 00:25:40,840
that so

530
00:25:37,440 --> 00:25:42,080
um the important thing is that's not

531
00:25:40,840 --> 00:25:45,760
encrypted

532
00:25:42,080 --> 00:25:47,918
so in the case of that massive list of

533
00:25:45,760 --> 00:25:49,600
google things i will be able to then

534
00:25:47,919 --> 00:25:52,159
pinpoint

535
00:25:49,600 --> 00:25:54,639
that single certificate or sorry single

536
00:25:52,159 --> 00:25:54,640
hostname

537
00:25:55,200 --> 00:26:02,880
that they were going to

538
00:25:58,320 --> 00:26:02,879
so i will

539
00:26:02,960 --> 00:26:11,840
not try to demonstrate that

540
00:26:32,970 --> 00:26:36,089
[Music]

541
00:26:36,840 --> 00:26:39,840
um

542
00:26:41,279 --> 00:26:46,729
so i'm just trying to find the

543
00:26:43,660 --> 00:26:46,729
[Music]

544
00:26:50,840 --> 00:26:53,840
certificate

545
00:27:18,880 --> 00:27:35,840
sorry one second

546
00:27:38,000 --> 00:27:42,080
i'm just going to narrow down the rp

547
00:27:39,919 --> 00:27:49,840
address

548
00:27:42,080 --> 00:27:49,840
to make it easier to filter

549
00:28:02,180 --> 00:28:05,239
[Music]

550
00:28:21,200 --> 00:28:28,399
okay and there we go

551
00:28:25,120 --> 00:28:30,158
so there's a snr request

552
00:28:28,399 --> 00:28:31,760
and as you can quite clearly see there's

553
00:28:30,159 --> 00:28:35,120
the host name um

554
00:28:31,760 --> 00:28:36,799
that's visible because it's uh

555
00:28:35,120 --> 00:28:39,199
plain text and that's same with the

556
00:28:36,799 --> 00:28:41,440
request uh

557
00:28:39,200 --> 00:28:42,240
now the interesting thing with this and

558
00:28:41,440 --> 00:28:45,760
i'll

559
00:28:42,240 --> 00:28:49,120
show it in the slide is this now

560
00:28:45,760 --> 00:28:51,679
also presents a new problem with tls103

561
00:28:49,120 --> 00:28:53,279
um so as you saw in the previous example

562
00:28:51,679 --> 00:28:56,559
you could see the certificate

563
00:28:53,279 --> 00:29:00,320
um that was tls102 um that's all

564
00:28:56,559 --> 00:29:02,000
kind of viewable in plain text tls1.3

565
00:29:00,320 --> 00:29:04,158
i spent ages trying to find the

566
00:29:02,000 --> 00:29:07,760
certificate wondering where it was in

567
00:29:04,159 --> 00:29:09,120
the packet capture and i couldn't figure

568
00:29:07,760 --> 00:29:12,240
out why

569
00:29:09,120 --> 00:29:13,600
and it turns out tls1.3 encrypts the

570
00:29:12,240 --> 00:29:17,039
certificate within

571
00:29:13,600 --> 00:29:18,480
the transmission so

572
00:29:17,039 --> 00:29:20,240
heads up if you're looking for that in

573
00:29:18,480 --> 00:29:22,720
tls 1.3

574
00:29:20,240 --> 00:29:27,710
but the important thing is the smr is

575
00:29:22,720 --> 00:29:30,849
still in plain text

576
00:29:27,710 --> 00:29:30,849
[Music]

577
00:29:32,240 --> 00:29:37,039
all right so i've highlighted some

578
00:29:35,679 --> 00:29:40,240
examples where you

579
00:29:37,039 --> 00:29:42,879
can find the host name from rp address

580
00:29:40,240 --> 00:29:44,640
or request there's some other things

581
00:29:42,880 --> 00:29:47,120
that you can use

582
00:29:44,640 --> 00:29:48,320
so mixed content so if you load a page

583
00:29:47,120 --> 00:29:50,320
of https

584
00:29:48,320 --> 00:29:52,480
some of the content within that page may

585
00:29:50,320 --> 00:29:54,799
still be called over http

586
00:29:52,480 --> 00:29:56,240
going back to the very first example i

587
00:29:54,799 --> 00:29:58,480
gave you could

588
00:29:56,240 --> 00:30:00,320
see the clear host name and often

589
00:29:58,480 --> 00:30:02,960
they'll share the same hostname

590
00:30:00,320 --> 00:30:02,960
for content

591
00:30:03,840 --> 00:30:10,480
you can try to calls

592
00:30:06,960 --> 00:30:13,360
to the http itself

593
00:30:10,480 --> 00:30:14,720
even though the site's over https so one

594
00:30:13,360 --> 00:30:18,080
of the stipulations with

595
00:30:14,720 --> 00:30:21,679
hsts is a redirect

596
00:30:18,080 --> 00:30:25,120
to http https

597
00:30:21,679 --> 00:30:29,919
is that that site must

598
00:30:25,120 --> 00:30:31,520
always redirect from http to https

599
00:30:29,919 --> 00:30:33,919
so what you can do is call the rp

600
00:30:31,520 --> 00:30:35,679
address http

601
00:30:33,919 --> 00:30:38,799
rp address and then you'll see a

602
00:30:35,679 --> 00:30:41,039
redirect with the actual host name on it

603
00:30:38,799 --> 00:30:41,918
um other things that you can use at your

604
00:30:41,039 --> 00:30:45,360
disposal

605
00:30:41,919 --> 00:30:47,760
uh show that uh really great tool

606
00:30:45,360 --> 00:30:48,639
uh internet search engine uh there's

607
00:30:47,760 --> 00:30:51,679
census

608
00:30:48,640 --> 00:30:53,039
so i typically rely on multiple tools uh

609
00:30:51,679 --> 00:30:55,600
when i'm doing things

610
00:30:53,039 --> 00:30:58,480
so i'd recommend using showdown in

611
00:30:55,600 --> 00:31:01,678
conjunction with things like census

612
00:30:58,480 --> 00:31:03,279
immunity web is also pretty cool they

613
00:31:01,679 --> 00:31:05,440
have several tools

614
00:31:03,279 --> 00:31:06,960
one of the really nifty tools is the

615
00:31:05,440 --> 00:31:10,960
ability to map out

616
00:31:06,960 --> 00:31:10,960
kind of a clustered post

617
00:31:11,039 --> 00:31:14,640
um and then this is coming back to the

618
00:31:13,120 --> 00:31:17,439
point i made originally

619
00:31:14,640 --> 00:31:17,920
um where you can kind of have lookup

620
00:31:17,440 --> 00:31:19,120
tables

621
00:31:17,920 --> 00:31:20,880
[Music]

622
00:31:19,120 --> 00:31:22,879
so using all this information to

623
00:31:20,880 --> 00:31:25,760
generate lookup tables

624
00:31:22,880 --> 00:31:28,799
and then you can use that to kind of

625
00:31:25,760 --> 00:31:28,799
form your own dns

626
00:31:29,519 --> 00:31:32,880
but if you're going to do that one thing

627
00:31:31,519 --> 00:31:35,919
to consider is

628
00:31:32,880 --> 00:31:37,039
as i mentioned in the beginning with

629
00:31:35,919 --> 00:31:40,320
cloud architecture

630
00:31:37,039 --> 00:31:44,960
especially you get very dynamic nature

631
00:31:40,320 --> 00:31:47,918
so nrp today i'm not going to host xyz

632
00:31:44,960 --> 00:31:49,679
but in 24 hours it might be recycled and

633
00:31:47,919 --> 00:31:52,880
go to somewhere else

634
00:31:49,679 --> 00:31:55,279
so that could

635
00:31:52,880 --> 00:31:58,720
cause a problem with trying to

636
00:31:55,279 --> 00:31:58,720
circumvent dns over to

637
00:31:58,840 --> 00:32:01,840
https

638
00:32:02,000 --> 00:32:06,000
so what can you do to make sure that

639
00:32:04,159 --> 00:32:09,360
you're still private well

640
00:32:06,000 --> 00:32:12,880
the one thing i recommend is use a vpn

641
00:32:09,360 --> 00:32:15,439
now i know many people

642
00:32:12,880 --> 00:32:17,039
are vocal against using vpn especially

643
00:32:15,440 --> 00:32:20,080
vpn services

644
00:32:17,039 --> 00:32:20,879
i recommend using your own sure um i'm

645
00:32:20,080 --> 00:32:23,120
sure

646
00:32:20,880 --> 00:32:24,000
most of us in this room can set up our

647
00:32:23,120 --> 00:32:28,080
own vpn

648
00:32:24,000 --> 00:32:31,200
service but many typical users can't

649
00:32:28,080 --> 00:32:33,519
uh so there are still some

650
00:32:31,200 --> 00:32:34,880
relatively decent vendors out there you

651
00:32:33,519 --> 00:32:36,000
just gotta make sure you do your own

652
00:32:34,880 --> 00:32:39,200
work

653
00:32:36,000 --> 00:32:41,279
um and the last thing about vpn

654
00:32:39,200 --> 00:32:42,480
encrypts the entire traffic so there's

655
00:32:41,279 --> 00:32:45,679
nothing that

656
00:32:42,480 --> 00:32:48,799
anyone can get if between the vpn server

657
00:32:45,679 --> 00:32:50,159
and the client someone did mention the

658
00:32:48,799 --> 00:32:52,799
encrypted

659
00:32:50,159 --> 00:32:54,240
uh the encrypted server naming

660
00:32:52,799 --> 00:32:56,320
indication

661
00:32:54,240 --> 00:32:58,480
there is a protocol for that it is

662
00:32:56,320 --> 00:32:59,600
supported in the later versions of

663
00:32:58,480 --> 00:33:02,960
firefox

664
00:32:59,600 --> 00:33:10,480
i believe and chrome okay

665
00:33:02,960 --> 00:33:14,720
and is that chromium so imagine

666
00:33:10,480 --> 00:33:15,279
yeah so um it's not widely adopted

667
00:33:14,720 --> 00:33:18,480
though

668
00:33:15,279 --> 00:33:21,440
that's the problem um so as we've seen

669
00:33:18,480 --> 00:33:22,080
hopefully it will be um as we're moving

670
00:33:21,440 --> 00:33:27,120
towards

671
00:33:22,080 --> 00:33:30,158
tls 1.3 a lot more science is doing that

672
00:33:27,120 --> 00:33:32,559
encrypted smr and

673
00:33:30,159 --> 00:33:34,480
hsts and you've got a really kind of

674
00:33:32,559 --> 00:33:37,519
robust

675
00:33:34,480 --> 00:33:40,399
method of protecting your users

676
00:33:37,519 --> 00:33:42,159
tall being another one well knowing full

677
00:33:40,399 --> 00:33:43,600
privacy

678
00:33:42,159 --> 00:33:45,440
and then the other thing is a virtual

679
00:33:43,600 --> 00:33:47,678
machine try

680
00:33:45,440 --> 00:33:49,519
it's so a lot of this is looking up hey

681
00:33:47,679 --> 00:33:50,559
this request belongs to this host but

682
00:33:49,519 --> 00:33:54,240
you still need to

683
00:33:50,559 --> 00:33:56,639
associate that request with a entity

684
00:33:54,240 --> 00:33:57,600
so if you're constantly changing who's

685
00:33:56,640 --> 00:33:59,360
making the requests

686
00:33:57,600 --> 00:34:01,519
it's going to be very difficult to tie

687
00:33:59,360 --> 00:34:05,519
that request to a specific

688
00:34:01,519 --> 00:34:07,360
entity so using virtual machines using

689
00:34:05,519 --> 00:34:10,320
virtual machines in cloud

690
00:34:07,360 --> 00:34:11,118
um dynamically changing quite a bit may

691
00:34:10,320 --> 00:34:13,200
help

692
00:34:11,119 --> 00:34:14,320
it's not going to solve it but it could

693
00:34:13,199 --> 00:34:16,799
go a bit

694
00:34:14,320 --> 00:34:16,800
to help it

695
00:34:18,560 --> 00:34:22,879
and as i said some of this is

696
00:34:20,800 --> 00:34:25,200
controversial

697
00:34:22,879 --> 00:34:29,040
mentioned dns of https in many

698
00:34:25,199 --> 00:34:29,040
organizations and you just have people

699
00:34:30,560 --> 00:34:33,918
[Music]

700
00:34:31,918 --> 00:34:35,199
some of the arguments against this is

701
00:34:33,918 --> 00:34:39,839
they're not going to be able to

702
00:34:35,199 --> 00:34:42,560
intercept or view the the requests

703
00:34:39,839 --> 00:34:44,000
then thus work out the host names and i

704
00:34:42,560 --> 00:34:46,719
get this

705
00:34:44,000 --> 00:34:49,520
so organizations will use blacklisting

706
00:34:46,719 --> 00:34:53,520
to make sure their employees don't visit

707
00:34:49,520 --> 00:34:55,440
gaming sites or malicious sites

708
00:34:53,520 --> 00:34:59,440
my counter argument to that is set up

709
00:34:55,440 --> 00:35:00,800
your own dns over https server

710
00:34:59,440 --> 00:35:03,040
if you do that you're protecting your

711
00:35:00,800 --> 00:35:06,480
users you can still manage to

712
00:35:03,040 --> 00:35:08,240
do your blacklisting um

713
00:35:06,480 --> 00:35:10,720
there's some other weird stuff out there

714
00:35:08,240 --> 00:35:13,439
so one of them was firefox for

715
00:35:10,720 --> 00:35:13,759
implementing ens of hcbs last year they

716
00:35:13,440 --> 00:35:17,200
were

717
00:35:13,760 --> 00:35:20,240
awarded the internet villain and to me

718
00:35:17,200 --> 00:35:20,240
this made no sense

719
00:35:20,320 --> 00:35:23,680
firefox is using the ns of https where

720
00:35:22,560 --> 00:35:26,160
we i've shown you

721
00:35:23,680 --> 00:35:28,399
can kind of still work things out but

722
00:35:26,160 --> 00:35:30,720
vpn providers weren't

723
00:35:28,400 --> 00:35:31,440
lost to that and some of the arguments

724
00:35:30,720 --> 00:35:34,799
were

725
00:35:31,440 --> 00:35:35,359
i mean i get it legitimate um you can't

726
00:35:34,800 --> 00:35:39,280
see

727
00:35:35,359 --> 00:35:40,640
people being sites that may be related

728
00:35:39,280 --> 00:35:44,560
to child pornography

729
00:35:40,640 --> 00:35:47,440
or other nasty sites and i get that

730
00:35:44,560 --> 00:35:49,920
um but there are other services out

731
00:35:47,440 --> 00:35:49,920
there so

732
00:35:52,880 --> 00:35:57,119
and this actually just came out i think

733
00:35:54,560 --> 00:35:59,440
it was this week last week

734
00:35:57,119 --> 00:36:00,400
um so firefox is writing our dns of

735
00:35:59,440 --> 00:36:04,000
https

736
00:36:00,400 --> 00:36:06,880
by default four years customers

737
00:36:04,000 --> 00:36:08,720
um so they'll have this enabled by

738
00:36:06,880 --> 00:36:11,200
default

739
00:36:08,720 --> 00:36:13,279
touching this as privacy first and all

740
00:36:11,200 --> 00:36:16,480
of this

741
00:36:13,280 --> 00:36:21,200
yeah um it's still possible

742
00:36:16,480 --> 00:36:21,200
to get the dns um so

743
00:36:21,520 --> 00:36:25,359
yeah i'll leave you to make up your own

744
00:36:23,760 --> 00:36:28,960
minds about that

745
00:36:25,359 --> 00:36:31,200
all right um so

746
00:36:28,960 --> 00:36:32,640
as we come stand i want to keep everyone

747
00:36:31,200 --> 00:36:35,839
from lunch

748
00:36:32,640 --> 00:36:38,879
uh my final thoughts on this uh

749
00:36:35,839 --> 00:36:42,480
i think it's a good thing it

750
00:36:38,880 --> 00:36:44,720
as we're moving forward we need to start

751
00:36:42,480 --> 00:36:45,839
retrofiting we're coming up with new

752
00:36:44,720 --> 00:36:48,799
protocols

753
00:36:45,839 --> 00:36:50,880
on what's really decades-old protocols

754
00:36:48,800 --> 00:36:53,200
they were never designed to be secure

755
00:36:50,880 --> 00:36:54,079
or just designed to work we have to

756
00:36:53,200 --> 00:36:57,520
start designing

757
00:36:54,079 --> 00:37:00,160
secure protocols so anything that trying

758
00:36:57,520 --> 00:37:03,759
to move that needle in that direction

759
00:37:00,160 --> 00:37:06,640
is great um some of the harper on it

760
00:37:03,760 --> 00:37:08,560
maybe not so much but it is still a step

761
00:37:06,640 --> 00:37:12,400
in the right direction

762
00:37:08,560 --> 00:37:14,400
um and it could provide a platform to

763
00:37:12,400 --> 00:37:18,160
build a better foundation

764
00:37:14,400 --> 00:37:21,280
so bold opponents have something

765
00:37:18,160 --> 00:37:24,480
more secure so as i mentioned have

766
00:37:21,280 --> 00:37:27,839
dns over tls or dns over https

767
00:37:24,480 --> 00:37:31,359
with encrypted smr you got and a

768
00:37:27,839 --> 00:37:33,920
https tls vu 1.3 you've got a pretty

769
00:37:31,359 --> 00:37:36,000
robust system

770
00:37:33,920 --> 00:37:38,160
attackers may be able to work out the

771
00:37:36,000 --> 00:37:39,599
host name if they're really tried

772
00:37:38,160 --> 00:37:40,960
but it's going to be difficult for them

773
00:37:39,599 --> 00:37:41,760
and is it going to be worth their time

774
00:37:40,960 --> 00:37:44,720
they might just

775
00:37:41,760 --> 00:37:44,720
go to something else

776
00:37:45,680 --> 00:37:49,040
along as i mentioned before the media

777
00:37:48,400 --> 00:37:51,280
hub

778
00:37:49,040 --> 00:37:52,720
so it's not the magical privacy bullet

779
00:37:51,280 --> 00:37:56,240
it's been made out

780
00:37:52,720 --> 00:37:59,520
um and like all things

781
00:37:56,240 --> 00:38:01,439
there's pros and cons to this

782
00:37:59,520 --> 00:38:04,320
yeah organizations might have a hard

783
00:38:01,440 --> 00:38:07,280
time but it is starting to protect users

784
00:38:04,320 --> 00:38:08,240
like the one thing that h dns over hdbs

785
00:38:07,280 --> 00:38:10,079
is going to prevent is

786
00:38:08,240 --> 00:38:12,560
things like dns poisoning by a man in

787
00:38:10,079 --> 00:38:15,760
the middle you can't tamper with that

788
00:38:12,560 --> 00:38:19,599
so if i get a a dns response saying

789
00:38:15,760 --> 00:38:20,880
host x is abc host x is abc

790
00:38:19,599 --> 00:38:23,440
it's not going to be some attackers

791
00:38:20,880 --> 00:38:27,359
machine so there is that

792
00:38:23,440 --> 00:38:27,359
sort of thinking to think about as well

793
00:38:28,320 --> 00:38:36,000
so again apologies for

794
00:38:31,839 --> 00:38:39,200
the issues um

795
00:38:36,000 --> 00:38:42,640
word of advice try avoid live demos

796
00:38:39,200 --> 00:38:42,640
and if you do have backups

797
00:38:42,880 --> 00:38:46,480
especially if you're doing multiple

798
00:38:44,560 --> 00:38:50,240
systems and across multiple screens

799
00:38:46,480 --> 00:38:52,560
it's not easy so apologies for that

800
00:38:50,240 --> 00:38:52,560
um

801
00:38:53,599 --> 00:39:01,040
before i do the last slide um well

802
00:38:57,280 --> 00:39:03,280
are there any questions

803
00:39:01,040 --> 00:39:05,680
so we do have one question so if you're

804
00:39:03,280 --> 00:39:07,839
running a proxy infrastructure

805
00:39:05,680 --> 00:39:10,078
where you're providing a master

806
00:39:07,839 --> 00:39:12,240
certificate so you can decode

807
00:39:10,079 --> 00:39:13,119
all of the potential traffic coming

808
00:39:12,240 --> 00:39:16,160
across

809
00:39:13,119 --> 00:39:19,839
how does uh dns over https

810
00:39:16,160 --> 00:39:22,240
impact that setup so typically the way

811
00:39:19,839 --> 00:39:23,520
those proxies work is you'd have a ca

812
00:39:22,240 --> 00:39:26,160
certificate

813
00:39:23,520 --> 00:39:26,560
that you install in that proxy you need

814
00:39:26,160 --> 00:39:29,680
that

815
00:39:26,560 --> 00:39:31,520
public key so the certificate

816
00:39:29,680 --> 00:39:34,078
that ca certificate installed on all the

817
00:39:31,520 --> 00:39:35,759
clients absolute trust certificates

818
00:39:34,079 --> 00:39:38,160
signed by that proxy

819
00:39:35,760 --> 00:39:39,119
um those proxies typically receive the

820
00:39:38,160 --> 00:39:41,200
certificate

821
00:39:39,119 --> 00:39:42,480
and then i'll try to make it as closely

822
00:39:41,200 --> 00:39:46,240
as possible so

823
00:39:42,480 --> 00:39:48,160
they typically don't do dns lookups um

824
00:39:46,240 --> 00:39:49,919
well they'll probably have to in order

825
00:39:48,160 --> 00:39:50,720
to connect out and validate the

826
00:39:49,920 --> 00:39:52,480
certificate

827
00:39:50,720 --> 00:39:54,480
but when generating the certificate

828
00:39:52,480 --> 00:39:56,400
itself they try and match the

829
00:39:54,480 --> 00:39:59,760
certificate lock for lock other than

830
00:39:56,400 --> 00:39:59,760
it's done by that ca

831
00:40:01,680 --> 00:40:05,759
what are your thoughts on uh so you

832
00:40:04,480 --> 00:40:08,880
mentioned the privacy aspect

833
00:40:05,760 --> 00:40:11,200
of the the whole

834
00:40:08,880 --> 00:40:12,319
centralization and dns stuff because of

835
00:40:11,200 --> 00:40:15,200
the operators

836
00:40:12,319 --> 00:40:15,599
effectively cloudflare and google and

837
00:40:15,200 --> 00:40:18,480
sort of

838
00:40:15,599 --> 00:40:20,000
passed over them yeah that's a very good

839
00:40:18,480 --> 00:40:21,359
point i actually forgot about

840
00:40:20,000 --> 00:40:23,680
i mentioned that i was going to mention

841
00:40:21,359 --> 00:40:26,720
that so thank you

842
00:40:23,680 --> 00:40:30,000
that is certainly one argument

843
00:40:26,720 --> 00:40:31,919
i don't know how i feel about that um so

844
00:40:30,000 --> 00:40:34,400
i mean people worry about google

845
00:40:31,920 --> 00:40:36,560
facebook and that for privacy

846
00:40:34,400 --> 00:40:39,119
and roughly so i mean that whole model

847
00:40:36,560 --> 00:40:42,560
is based on your data

848
00:40:39,119 --> 00:40:43,599
cloudflare is their model based on your

849
00:40:42,560 --> 00:40:46,720
data

850
00:40:43,599 --> 00:40:52,000
they sell good examples

851
00:40:46,720 --> 00:40:54,720
yeah it's

852
00:40:52,000 --> 00:40:56,000
and even still i mean you're going to

853
00:40:54,720 --> 00:40:59,520
still have to go to some

854
00:40:56,000 --> 00:41:01,920
dns server somewhere so

855
00:40:59,520 --> 00:41:07,440
is it cloudflare is it sky your home

856
00:41:01,920 --> 00:41:09,200
broadband provider

857
00:41:07,440 --> 00:41:12,079
maybe it's time to set up a

858
00:41:09,200 --> 00:41:15,118
community-based dns server

859
00:41:12,079 --> 00:41:17,440
she's not watching this hey

860
00:41:15,119 --> 00:41:17,440
either

861
00:41:18,960 --> 00:41:21,839
any other questions

862
00:41:24,960 --> 00:41:28,400
all right i was gonna do one last test

863
00:41:28,000 --> 00:41:31,520
but

864
00:41:28,400 --> 00:41:35,760
um connectivity issues

865
00:41:31,520 --> 00:41:38,480
um so again apologies

866
00:41:35,760 --> 00:41:39,440
so thank you for coming um it's great

867
00:41:38,480 --> 00:41:41,760
giving the talk and

868
00:41:39,440 --> 00:41:43,359
thanks for having me and everyone rush

869
00:41:41,760 --> 00:41:49,839
off to lunch and go eat and

870
00:41:43,359 --> 00:41:49,839
ignore my rambling

