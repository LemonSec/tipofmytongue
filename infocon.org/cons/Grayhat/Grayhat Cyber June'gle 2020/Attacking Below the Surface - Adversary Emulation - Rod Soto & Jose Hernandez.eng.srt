1
00:00:00,000 --> 00:00:02,399
Podcast is now starting all attendees

2
00:00:02,399 --> 00:00:04,019
are in listen-only mode

3
00:00:04,019 --> 00:00:09,870
oh sorry is that okay yeah sure

4
00:00:09,870 --> 00:00:12,030
hey everybody home are you want to

5
00:00:12,030 --> 00:00:16,500
introduce Jose and rod yeah how do you

6
00:00:16,500 --> 00:00:19,400
guys want to be introduced

7
00:00:19,880 --> 00:00:23,640
I'm a security researcher that's pretty

8
00:00:23,640 --> 00:00:25,320
much what I do yeah we're already

9
00:00:25,320 --> 00:00:28,199
broadcasting so go ahead and announce oh

10
00:00:28,199 --> 00:00:32,700
okay so good morning everybody and thank

11
00:00:32,700 --> 00:00:35,730
you for being here on a Sunday

12
00:00:35,730 --> 00:00:39,710
I'm here with Jose and today we're gonna

13
00:00:39,710 --> 00:00:42,870
will then speak about the adversary

14
00:00:42,870 --> 00:00:46,129
emulation adversarial emulation using

15
00:00:46,129 --> 00:00:50,039
this blunt attack range as a tool you

16
00:00:50,039 --> 00:00:51,840
want to talk a little bit about yourself

17
00:00:51,840 --> 00:00:56,690
what's that yeah I'm holding Hernandez a

18
00:00:56,690 --> 00:01:00,050
colleague here of rod and Splunk

19
00:01:00,050 --> 00:01:03,690
principal researchers and yeah just

20
00:01:03,690 --> 00:01:07,290
super excited here to share how we're

21
00:01:07,290 --> 00:01:10,320
using the attack pinch analysis

22
00:01:10,320 --> 00:01:11,580
obviously revelations about how you can

23
00:01:11,580 --> 00:01:15,750
use it as well okay Jose I think you're

24
00:01:15,750 --> 00:01:17,369
said to be able to present if you want

25
00:01:17,369 --> 00:01:22,740
to go ahead and present yep yeah we can

26
00:01:22,740 --> 00:01:23,759
see your presentation

27
00:01:23,759 --> 00:01:26,490
um just so everybody knows all the

28
00:01:26,490 --> 00:01:28,860
support for this will be done in the

29
00:01:28,860 --> 00:01:30,570
discord channel so please join the

30
00:01:30,570 --> 00:01:31,680
discord channel if you don't know how to

31
00:01:31,680 --> 00:01:34,380
join it it's pretty simple go to jungle

32
00:01:34,380 --> 00:01:38,250
die oh and it's misspelt jungle it's

33
00:01:38,250 --> 00:01:39,869
June because we're in the month of June

34
00:01:39,869 --> 00:01:43,500
Ju any and then GL e dot IO if you go to

35
00:01:43,500 --> 00:01:46,380
jungle die oh you'll see join discord

36
00:01:46,380 --> 00:01:48,780
servers click on that and then join the

37
00:01:48,780 --> 00:01:51,979
Texas cyber discord channel and hop into

38
00:01:51,979 --> 00:01:55,140
track 1 and we'll have a team there

39
00:01:55,140 --> 00:01:57,780
helping answer questions and answers and

40
00:01:57,780 --> 00:02:00,799
rod and Jose you guys are in there right

41
00:02:00,799 --> 00:02:03,780
yeah yes I'll be in there as well to

42
00:02:03,780 --> 00:02:08,190
help you so I will stop talking and hand

43
00:02:08,190 --> 00:02:11,068
it over to you guys and also Omar's in

44
00:02:11,068 --> 00:02:12,540
the channel in case so you need any

45
00:02:12,540 --> 00:02:13,390
other

46
00:02:13,390 --> 00:02:16,980
assistance everyone

47
00:02:17,920 --> 00:02:21,130
so uh so basically what we're going to

48
00:02:21,130 --> 00:02:21,819
do today

49
00:02:21,819 --> 00:02:23,350
yeah I can see I can see the screen

50
00:02:23,350 --> 00:02:27,160
we're ready to go so today we're gonna

51
00:02:27,160 --> 00:02:29,730
we're gonna talked about adversarial

52
00:02:29,730 --> 00:02:34,330
emulation and we're gonna do a lab that

53
00:02:34,330 --> 00:02:42,970
is built on a Splunk attack range this

54
00:02:42,970 --> 00:02:47,709
is a tool that was developed by this

55
00:02:47,709 --> 00:02:49,989
blanc security research team and it's

56
00:02:49,989 --> 00:02:52,709
open source available to everybody and

57
00:02:52,709 --> 00:02:57,190
and you can modify it and you can use it

58
00:02:57,190 --> 00:03:00,280
for all kinds of things and you will see

59
00:03:00,280 --> 00:03:03,900
that will go in very detail on it

60
00:03:03,900 --> 00:03:10,780
next slide please so this is who we are

61
00:03:10,780 --> 00:03:16,019
I am a principal security researcher

62
00:03:16,019 --> 00:03:19,299
engineer I work with Jose at the Splunk

63
00:03:19,299 --> 00:03:21,370
research team I worked at pearl x''k

64
00:03:21,370 --> 00:03:26,019
which is now Akamai used to work at a UB

65
00:03:26,019 --> 00:03:28,390
a startup called Cass PETA was acquired

66
00:03:28,390 --> 00:03:33,370
by Splunk currently Splunk one of the

67
00:03:33,370 --> 00:03:35,670
co-founders about Miami Pacific hackers

68
00:03:35,670 --> 00:03:38,769
meetups and conferences and I create a

69
00:03:38,769 --> 00:03:42,250
coherent control and no quarter CTF will

70
00:03:42,250 --> 00:03:44,230
say that you want to go ahead and do

71
00:03:44,230 --> 00:03:49,299
this yourself it yeah also most kulonga

72
00:03:49,299 --> 00:03:55,030
relax ik engineer like sega ended up

73
00:03:55,030 --> 00:03:57,160
actually that's blocked for a long time

74
00:03:57,160 --> 00:04:00,880
and then decided a co found my own

75
00:04:00,880 --> 00:04:02,709
company caused damage which got recently

76
00:04:02,709 --> 00:04:06,160
acquired by Oracle was now there who

77
00:04:06,160 --> 00:04:07,930
Application Firewall indeed offs call

78
00:04:07,930 --> 00:04:10,660
service and then came back to Splunk to

79
00:04:10,660 --> 00:04:13,320
focus on producing better detections and

80
00:04:13,320 --> 00:04:18,789
yeah all right so next please

81
00:04:18,789 --> 00:04:21,160
alright so what is this Blanc attack

82
00:04:21,160 --> 00:04:22,870
branch you spoke at that range it's a

83
00:04:22,870 --> 00:04:25,510
framework that allows two security

84
00:04:25,510 --> 00:04:27,370
analyst in our operator

85
00:04:27,370 --> 00:04:33,699
to quickly and repeatedly replicate or

86
00:04:33,699 --> 00:04:36,699
emulate attacks and generate data as

87
00:04:36,699 --> 00:04:40,930
close as what is called in machine

88
00:04:40,930 --> 00:04:42,760
learning groans roof ground truth is

89
00:04:42,760 --> 00:04:45,790
basically as close to reality as you can

90
00:04:45,790 --> 00:04:49,169
get data this is a fundamental problem

91
00:04:49,169 --> 00:04:51,669
not only for analysts but for

92
00:04:51,669 --> 00:04:54,419
researchers we're always we're always

93
00:04:54,419 --> 00:04:58,449
dealing with synthetic data synthetic

94
00:04:58,449 --> 00:05:01,180
data is logs that are produced by

95
00:05:01,180 --> 00:05:03,880
scripts or things that are too

96
00:05:03,880 --> 00:05:06,220
artificial usually they do not have any

97
00:05:06,220 --> 00:05:08,830
type of noise like you have in a normal

98
00:05:08,830 --> 00:05:11,979
or real network for example or you have

99
00:05:11,979 --> 00:05:15,370
a lot of applications that would run

100
00:05:15,370 --> 00:05:18,520
into a standard workstation and we're

101
00:05:18,520 --> 00:05:20,260
going to talk about it

102
00:05:20,260 --> 00:05:23,320
as we move on and we would we would

103
00:05:23,320 --> 00:05:26,680
revise the concept of gold and what a

104
00:05:26,680 --> 00:05:28,930
building images is why it's important

105
00:05:28,930 --> 00:05:33,030
when you are replicating or emulating

106
00:05:33,030 --> 00:05:37,600
adversarial techniques so sorry the the

107
00:05:37,600 --> 00:05:39,850
reason this was developed was to try to

108
00:05:39,850 --> 00:05:43,139
get as close as possible to ground truth

109
00:05:43,139 --> 00:05:46,840
and also produce some sort of data that

110
00:05:46,840 --> 00:05:50,139
was readable that was part that was able

111
00:05:50,139 --> 00:05:52,960
to be analyzed and as you will see yes

112
00:05:52,960 --> 00:05:55,560
well you'll be able to build upon it

113
00:05:55,560 --> 00:05:59,560
responses so it's we do have a plug-ins

114
00:05:59,560 --> 00:06:05,470
for force or as well so next where can

115
00:06:05,470 --> 00:06:08,020
you find it you can find this point at

116
00:06:08,020 --> 00:06:11,169
that range and get up basically what you

117
00:06:11,169 --> 00:06:16,539
do is you clone the repository and all

118
00:06:16,539 --> 00:06:20,590
the code will be there where we will go

119
00:06:20,590 --> 00:06:23,410
in detail how you customize it in order

120
00:06:23,410 --> 00:06:27,190
to make it happen but it is public and

121
00:06:27,190 --> 00:06:29,979
available for everybody you feel you can

122
00:06:29,979 --> 00:06:33,550
do that right now so let's continue

123
00:06:33,550 --> 00:06:35,910
please

124
00:06:37,670 --> 00:06:42,440
better the of the architecture so main

125
00:06:42,440 --> 00:06:44,840
leader there are two ways to build that

126
00:06:44,840 --> 00:06:48,530
at the attack range you can do vagrant

127
00:06:48,530 --> 00:06:52,910
and vagrant will build it locally or you

128
00:06:52,910 --> 00:06:55,310
can do terraform which will build it in

129
00:06:55,310 --> 00:06:59,900
the cloud so if I do patron and both of

130
00:06:59,900 --> 00:07:05,620
them are based on architecture a in a

131
00:07:05,620 --> 00:07:08,150
from the or construction perspective and

132
00:07:08,150 --> 00:07:14,210
ansible they you can you can on both

133
00:07:14,210 --> 00:07:17,630
modes you can you can have you have a

134
00:07:17,630 --> 00:07:20,540
Splunk server you have a domain

135
00:07:20,540 --> 00:07:24,230
controller you may have a Windows server

136
00:07:24,230 --> 00:07:25,970
without the main controller and you can

137
00:07:25,970 --> 00:07:27,980
have a Windows client which is one to

138
00:07:27,980 --> 00:07:33,770
stay for station you also get a as like

139
00:07:33,770 --> 00:07:35,810
I said before long server which is based

140
00:07:35,810 --> 00:07:38,240
on Ubuntu and in this one server you

141
00:07:38,240 --> 00:07:43,600
have included in adversarial of

142
00:07:43,600 --> 00:07:48,350
emulation framework known as caldera

143
00:07:48,350 --> 00:07:52,310
which is developed by Michael we do have

144
00:07:52,310 --> 00:07:54,380
plans at one point you do Mac OS but

145
00:07:54,380 --> 00:07:58,280
that's not released yet on the terraform

146
00:07:58,280 --> 00:08:04,610
part you you can build as well a Active

147
00:08:04,610 --> 00:08:07,070
Directory domain controller a Windows

148
00:08:07,070 --> 00:08:13,880
Server in Windows client a would do when

149
00:08:13,880 --> 00:08:14,750
coderre

150
00:08:14,750 --> 00:08:18,680
in a Splunk

151
00:08:18,680 --> 00:08:22,610
oh and colleague you can actually have a

152
00:08:22,610 --> 00:08:24,920
Kali machine that we will be seeing

153
00:08:24,920 --> 00:08:29,900
examples of how to use the Kali inside

154
00:08:29,900 --> 00:08:34,340
the the internal or the the network that

155
00:08:34,340 --> 00:08:36,710
is created or configure when you build

156
00:08:36,710 --> 00:08:44,510
up the attack range let's move on so so

157
00:08:44,510 --> 00:08:45,570
I'm not sure if you

158
00:08:45,570 --> 00:08:47,610
to jump in here who say and it's playing

159
00:08:47,610 --> 00:08:50,100
a little bit about the server less

160
00:08:50,100 --> 00:08:52,730
infrastructure in the core Nettie spar

161
00:08:52,730 --> 00:08:58,170
but this is also a part of a word we're

162
00:08:58,170 --> 00:09:00,810
developing is eventually we're gonna

163
00:09:00,810 --> 00:09:03,660
have and I can keep a little bit of a

164
00:09:03,660 --> 00:09:09,410
hint we're gonna have a a cloud-based

165
00:09:09,410 --> 00:09:12,960
and attacks

166
00:09:12,960 --> 00:09:15,900
Splunk attack range meaning we're not

167
00:09:15,900 --> 00:09:17,460
gonna have it we're just not gonna have

168
00:09:17,460 --> 00:09:19,190
what what we have or not which is

169
00:09:19,190 --> 00:09:23,970
heavily based on endpoint and some

170
00:09:23,970 --> 00:09:26,670
network but we're also gonna have cloud

171
00:09:26,670 --> 00:09:28,920
base attacks so we're gonna where we're

172
00:09:28,920 --> 00:09:32,220
working on emulating the infrastructure

173
00:09:32,220 --> 00:09:36,180
in the environments that are usually

174
00:09:36,180 --> 00:09:40,350
found on on the cloud vendors and

175
00:09:40,350 --> 00:09:41,970
eventually we're gonna we're gonna

176
00:09:41,970 --> 00:09:44,040
release where we're very close to do a

177
00:09:44,040 --> 00:09:49,110
big release of a cloud based attacks

178
00:09:49,110 --> 00:09:52,590
attack branch that's common and we have

179
00:09:52,590 --> 00:09:55,260
a colleague named Patrick arise who is

180
00:09:55,260 --> 00:09:57,810
doing an amazing job at developing and

181
00:09:57,810 --> 00:10:00,030
leading this effort as well as Jose so

182
00:10:00,030 --> 00:10:01,860
you should expect this in the near

183
00:10:01,860 --> 00:10:04,350
future we're now gonna focus today on

184
00:10:04,350 --> 00:10:06,900
the cloud based attacks verse important

185
00:10:06,900 --> 00:10:08,910
for you to know that that is coming next

186
00:10:08,910 --> 00:10:12,900
one actually rotc before we jump out I I

187
00:10:12,900 --> 00:10:15,900
just want to make a note so maybe

188
00:10:15,900 --> 00:10:17,280
something I wouldn't wasn't necessary to

189
00:10:17,280 --> 00:10:19,340
explicit and just to add a little color

190
00:10:19,340 --> 00:10:22,080
the vagrant mode of the attack range is

191
00:10:22,080 --> 00:10:24,810
mainly built for local development

192
00:10:24,810 --> 00:10:27,780
meanwhile the terraform mode as well

193
00:10:27,780 --> 00:10:30,990
pointed out it's heavy focus on the

194
00:10:30,990 --> 00:10:32,700
click it's a lot of endpoint data that

195
00:10:32,700 --> 00:10:34,290
you get out of it so it's mainly focused

196
00:10:34,290 --> 00:10:37,590
for endpoints this cloud the cloud

197
00:10:37,590 --> 00:10:39,120
attack range it's really built around

198
00:10:39,120 --> 00:10:42,060
collecting data and and large

199
00:10:42,060 --> 00:10:45,900
simulations against specifically native

200
00:10:45,900 --> 00:10:48,390
cloud services right so elastic

201
00:10:48,390 --> 00:10:55,140
container storage a CCS also the service

202
00:10:55,140 --> 00:10:58,050
last components of that so my god s3

203
00:10:58,050 --> 00:10:59,310
lambda

204
00:10:59,310 --> 00:11:02,670
the services and and and two rods point

205
00:11:02,670 --> 00:11:05,100
up the code the code is already out

206
00:11:05,100 --> 00:11:07,710
there um a clearly straight we're still

207
00:11:07,710 --> 00:11:10,050
testing and we're still building attack

208
00:11:10,050 --> 00:11:11,700
simulations for these kind of

209
00:11:11,700 --> 00:11:13,350
environments but the code to build the

210
00:11:13,350 --> 00:11:14,640
environment is out there so if you ever

211
00:11:14,640 --> 00:11:16,440
wanted to do manual testing um you can

212
00:11:16,440 --> 00:11:18,660
get started with that tomorrow or today

213
00:11:18,660 --> 00:11:24,900
actually oh alright so here's a little

214
00:11:24,900 --> 00:11:30,660
bit of more architecture and this can

215
00:11:30,660 --> 00:11:33,960
get a little bit extensive to be honest

216
00:11:33,960 --> 00:11:37,620
I can tell you this as a researcher as a

217
00:11:37,620 --> 00:11:41,310
pen tester I say at one point there was

218
00:11:41,310 --> 00:11:45,750
a heavy IR person when I was at the plx

219
00:11:45,750 --> 00:11:49,650
earth it's it's is fundamental for

220
00:11:49,650 --> 00:11:53,910
anybody to understand adversaries and

221
00:11:53,910 --> 00:11:56,339
attacks to have your own lab you know

222
00:11:56,339 --> 00:11:58,020
they say that in martial arts you can

223
00:11:58,020 --> 00:12:01,110
only fight what you train so if you're

224
00:12:01,110 --> 00:12:03,060
if you don't have any anywhere to

225
00:12:03,060 --> 00:12:07,080
replicate the attacks to understand to

226
00:12:07,080 --> 00:12:10,050
see the logs to see how an attack looks

227
00:12:10,050 --> 00:12:14,480
like it's it's definitely a disadvantage

228
00:12:14,480 --> 00:12:18,690
it requires this is an ability that is

229
00:12:18,690 --> 00:12:22,110
only acquired by experienced by somebody

230
00:12:22,110 --> 00:12:23,730
that has been in the field for many

231
00:12:23,730 --> 00:12:26,250
years and and because they've been

232
00:12:26,250 --> 00:12:28,980
exposed to this type of technologies and

233
00:12:28,980 --> 00:12:32,339
seeing the logs and and and tamper with

234
00:12:32,339 --> 00:12:34,020
then they kind of recognize it but if

235
00:12:34,020 --> 00:12:36,600
you are starting or even if you are good

236
00:12:36,600 --> 00:12:38,880
at certain platforms but not good at

237
00:12:38,880 --> 00:12:41,940
others it's still a disadvantage so the

238
00:12:41,940 --> 00:12:44,370
this block at that range is in my

239
00:12:44,370 --> 00:12:49,800
opinion is it it's a battle feeling

240
00:12:49,800 --> 00:12:51,720
Hansard because this will help you

241
00:12:51,720 --> 00:12:54,240
prepare this will help you understand

242
00:12:54,240 --> 00:12:56,250
how their locks look like this will help

243
00:12:56,250 --> 00:12:58,830
you replicate a technique and then find

244
00:12:58,830 --> 00:13:02,339
it like we're gonna see in Splunk aceo

245
00:13:02,339 --> 00:13:04,650
so this is the event ID I need to look

246
00:13:04,650 --> 00:13:07,440
for or oh this is the the process that

247
00:13:07,440 --> 00:13:10,110
gets honored this is the directory I

248
00:13:10,110 --> 00:13:11,790
need to look for if I'm trying to catch

249
00:13:11,790 --> 00:13:12,380
some

250
00:13:12,380 --> 00:13:16,250
so in in this environments like I said

251
00:13:16,250 --> 00:13:19,150
before we had Windows domain controller

252
00:13:19,150 --> 00:13:22,400
Windows Server Windows workstation a

253
00:13:22,400 --> 00:13:24,800
Kali machine as flung server and a

254
00:13:24,800 --> 00:13:28,340
phantom server I had to warn you if you

255
00:13:28,340 --> 00:13:31,370
decide to do this by a bakery

256
00:13:31,370 --> 00:13:36,740
you better have like all kinds of great

257
00:13:36,740 --> 00:13:38,930
hard work with you because it can get

258
00:13:38,930 --> 00:13:43,520
very big and that may slow your machine

259
00:13:43,520 --> 00:13:48,680
so our suggestion is if you because many

260
00:13:48,680 --> 00:13:52,790
times talking about code that's

261
00:13:52,790 --> 00:13:55,970
infrastructure type of tool you can

262
00:13:55,970 --> 00:13:58,790
destroy and deploy these things you have

263
00:13:58,790 --> 00:14:00,650
to keep them up and you'll see that very

264
00:14:00,650 --> 00:14:04,400
soon you can you can you can enable it

265
00:14:04,400 --> 00:14:06,440
build it do your thing

266
00:14:06,440 --> 00:14:08,870
destroy it you had to keep this running

267
00:14:08,870 --> 00:14:11,960
on the local part it might be a little

268
00:14:11,960 --> 00:14:13,760
more difficult because you are gonna

269
00:14:13,760 --> 00:14:15,920
have to download all these images you're

270
00:14:15,920 --> 00:14:19,940
gonna have to start all this all these

271
00:14:19,940 --> 00:14:22,700
operating systems and it will be there

272
00:14:22,700 --> 00:14:24,560
for you but you know unless you have

273
00:14:24,560 --> 00:14:27,860
like 32 or 64 gigs of RAM and a bite so

274
00:14:27,860 --> 00:14:30,380
hard to write this can be a problem now

275
00:14:30,380 --> 00:14:33,260
this is a good problem to have in during

276
00:14:33,260 --> 00:14:33,890
my career

277
00:14:33,890 --> 00:14:35,600
there were times that I had to basically

278
00:14:35,600 --> 00:14:39,530
request an entire ESXi server right you

279
00:14:39,530 --> 00:14:41,930
talked about the ESX ID and and be aware

280
00:14:41,930 --> 00:14:44,900
hypervisors now it's legacy right what

281
00:14:44,900 --> 00:14:47,240
we used to do you have to put a request

282
00:14:47,240 --> 00:14:49,580
you have to really even look at the the

283
00:14:49,580 --> 00:14:52,010
rack space and see if they have space

284
00:14:52,010 --> 00:14:55,310
for an ESX I server so this is we have

285
00:14:55,310 --> 00:14:57,650
come a long way from that now basically

286
00:14:57,650 --> 00:15:02,720
you just have a code that you adjust and

287
00:15:02,720 --> 00:15:05,120
he built this up downloads the iessons

288
00:15:05,120 --> 00:15:07,970
your deck will be ready your users and

289
00:15:07,970 --> 00:15:10,280
passwords will be already configured and

290
00:15:10,280 --> 00:15:11,960
you will be ready to go the only thing

291
00:15:11,960 --> 00:15:14,000
I'm going to warn you is that if you're

292
00:15:14,000 --> 00:15:14,840
gonna do this

293
00:15:14,840 --> 00:15:16,760
locally you gotta be careful because

294
00:15:16,760 --> 00:15:19,640
it's quite a bit of a load for a

295
00:15:19,640 --> 00:15:21,020
workstation and unless you have

296
00:15:21,020 --> 00:15:25,640
something that is 32 or 64

297
00:15:25,640 --> 00:15:29,190
gigs of RAM at least you're gonna have

298
00:15:29,190 --> 00:15:32,550
trouble it's gonna slow down but you can

299
00:15:32,550 --> 00:15:36,089
do easily a window server a collie

300
00:15:36,089 --> 00:15:37,650
machine and this plump server that

301
00:15:37,650 --> 00:15:41,089
shouldn't take you that much

302
00:15:42,110 --> 00:15:44,130
not sure if you want to make some

303
00:15:44,130 --> 00:15:46,290
comment on the on the sources and source

304
00:15:46,290 --> 00:15:47,610
types that I'm seeing there I was gonna

305
00:15:47,610 --> 00:15:50,790
touch on them yeah yeah actually if you

306
00:15:50,790 --> 00:15:52,080
don't mind before we jump into the

307
00:15:52,080 --> 00:15:56,130
source types I make a note that this is

308
00:15:56,130 --> 00:16:00,450
the full acceptable environment but for

309
00:16:00,450 --> 00:16:03,240
example if you're using vagrant towards

310
00:16:03,240 --> 00:16:04,860
point you probably don't want to spin

311
00:16:04,860 --> 00:16:06,720
all of this up it's it's gonna make any

312
00:16:06,720 --> 00:16:10,020
decent MacBook Pro hot enough to fry an

313
00:16:10,020 --> 00:16:12,779
egg but but you can pick and choose what

314
00:16:12,779 --> 00:16:14,339
comes up and actually by default the

315
00:16:14,339 --> 00:16:17,430
attack range only brings up the Splunk

316
00:16:17,430 --> 00:16:20,550
server and an active directory server ah

317
00:16:20,550 --> 00:16:23,370
to attack so and thus plug server as

318
00:16:23,370 --> 00:16:24,900
well as point we pointed out a little

319
00:16:24,900 --> 00:16:28,230
bit earlier also contains caldera

320
00:16:28,230 --> 00:16:30,120
so it's Blanc server has a basically

321
00:16:30,120 --> 00:16:31,830
it's gonna collect all the events from

322
00:16:31,830 --> 00:16:34,440
from Mac the dairy and also Haskell

323
00:16:34,440 --> 00:16:35,850
there for you to attack and now tell me

324
00:16:35,850 --> 00:16:37,890
red team on the active directory for you

325
00:16:37,890 --> 00:16:39,480
to be able to attack to do it too as

326
00:16:39,480 --> 00:16:43,350
well Carly Carly the Windows 10 servers

327
00:16:43,350 --> 00:16:45,510
or the regular Windows server and

328
00:16:45,510 --> 00:16:48,270
phantom are all optional instances then

329
00:16:48,270 --> 00:16:50,600
you can just flip on if you need to

330
00:16:50,600 --> 00:16:52,860
right if it's ok we do I can dig into

331
00:16:52,860 --> 00:16:54,920
the data sources that we're seeing here

332
00:16:54,920 --> 00:16:58,410
yeah well if you want you want to tell

333
00:16:58,410 --> 00:17:02,190
us a little bit basically what are we

334
00:17:02,190 --> 00:17:08,369
looking for as far as maybe we should

335
00:17:08,369 --> 00:17:09,689
start with Windows and then talk a

336
00:17:09,689 --> 00:17:11,609
little bit of a the future widow likes

337
00:17:11,609 --> 00:17:17,910
query so one of the cool things and one

338
00:17:17,910 --> 00:17:19,619
of the reasons again we build the attack

339
00:17:19,619 --> 00:17:21,630
we were seeing ourselves like building

340
00:17:21,630 --> 00:17:23,880
attack environments consistently and it

341
00:17:23,880 --> 00:17:26,369
would take us days and we need it

342
00:17:26,369 --> 00:17:28,230
usually clean environments to test new

343
00:17:28,230 --> 00:17:29,490
attacks on right we didn't

344
00:17:29,490 --> 00:17:30,900
when environments are were tainting with

345
00:17:30,900 --> 00:17:33,059
Paris attacks we're emulating in it and

346
00:17:33,059 --> 00:17:35,610
and so in order to do that we really

347
00:17:35,610 --> 00:17:39,270
needed like a really good set ups

348
00:17:39,270 --> 00:17:41,250
cific we started windows which is where

349
00:17:41,250 --> 00:17:49,380
we do a lot of the analysis on but it

350
00:17:49,380 --> 00:17:53,580
looks like we lost your audio let's say

351
00:17:53,580 --> 00:17:56,270
okay I can pick up on here

352
00:17:56,270 --> 00:18:00,960
so what we have on the on the window

353
00:18:00,960 --> 00:18:06,810
stand side is a number of search types

354
00:18:06,810 --> 00:18:10,380
the star Francis mom windows and then

355
00:18:10,380 --> 00:18:18,680
logs and atomic read team results and

356
00:18:18,680 --> 00:18:21,870
all of this is grabbed by the universal

357
00:18:21,870 --> 00:18:26,250
forwarder and send interest plunk won

358
00:18:26,250 --> 00:18:29,370
this is sent to Splunk obviously you had

359
00:18:29,370 --> 00:18:34,370
to have a depending on the source types

360
00:18:34,370 --> 00:18:37,950
they're applicable technology additions

361
00:18:37,950 --> 00:18:40,640
that you can download for us plug base

362
00:18:40,640 --> 00:18:44,130
the common information model application

363
00:18:44,130 --> 00:18:47,730
if applicable the AES EU which is the

364
00:18:47,730 --> 00:18:51,110
enterprise security content updates and

365
00:18:51,110 --> 00:18:59,910
there's a new there's a new a framework

366
00:18:59,910 --> 00:19:03,780
which would allow us to streamline new

367
00:19:03,780 --> 00:19:07,940
content new searches by a CI CD process

368
00:19:07,940 --> 00:19:14,490
so I think who says back yeah yeah sorry

369
00:19:14,490 --> 00:19:21,390
Oh conquers doesn't like you today but

370
00:19:21,390 --> 00:19:23,790
uh well yeah exactly to the point I

371
00:19:23,790 --> 00:19:26,850
don't not sure where I left off but you

372
00:19:26,850 --> 00:19:28,560
know data sources in there our system on

373
00:19:28,560 --> 00:19:31,560
and and we use out of the box Swiss on

374
00:19:31,560 --> 00:19:34,050
security system on configuration so it's

375
00:19:34,050 --> 00:19:38,580
pretty realistic on the network side we

376
00:19:38,580 --> 00:19:41,160
use Splunk streams which is very very

377
00:19:41,160 --> 00:19:44,370
feature parallel to to xik actually one

378
00:19:44,370 --> 00:19:45,900
of the one of the one of our bucket list

379
00:19:45,900 --> 00:19:48,180
items is to add Zeke or Zeke server

380
00:19:48,180 --> 00:19:51,690
until you're at a Grinch and and then we

381
00:19:51,690 --> 00:19:52,960
have a bunch of like rather

382
00:19:52,960 --> 00:19:54,340
mentioned earlier we all a bunch of

383
00:19:54,340 --> 00:19:57,190
other TAS to collect acquaintances event

384
00:19:57,190 --> 00:20:00,399
logs windows application logs so we

385
00:20:00,399 --> 00:20:02,289
cover at the end point specifically

386
00:20:02,289 --> 00:20:04,210
endpoint events with assessment process

387
00:20:04,210 --> 00:20:07,080
creation memory access we cover

388
00:20:07,080 --> 00:20:09,940
operating system s of application logs

389
00:20:09,940 --> 00:20:13,299
secure logs etc etc and then also the

390
00:20:13,299 --> 00:20:16,419
network stack using using streams the

391
00:20:16,419 --> 00:20:19,510
stream is also yeah it is just important

392
00:20:19,510 --> 00:20:22,919
to mention that for the standard

393
00:20:22,919 --> 00:20:26,919
baseline inbuilt of this you don't have

394
00:20:26,919 --> 00:20:30,370
to install anything by the time you spin

395
00:20:30,370 --> 00:20:33,909
up the range all the appropriate TAS and

396
00:20:33,909 --> 00:20:36,789
Adams and applications will be installed

397
00:20:36,789 --> 00:20:39,130
but it's important for you to know that

398
00:20:39,130 --> 00:20:42,539
you can always add more or customize it

399
00:20:42,539 --> 00:20:44,529
do you want to tell us a little bit

400
00:20:44,529 --> 00:20:46,659
about the future work with the Mac OS

401
00:20:46,659 --> 00:20:50,230
because there seems to be a shift mostly

402
00:20:50,230 --> 00:20:51,640
in circum Bali

403
00:20:51,640 --> 00:20:55,149
towards what I called it a Mac OS type

404
00:20:55,149 --> 00:20:58,950
of authentication type of model where

405
00:20:58,950 --> 00:21:03,640
companies are walking away from Windows

406
00:21:03,640 --> 00:21:06,809
based networks

407
00:21:08,280 --> 00:21:11,130
you there it looks like he's having

408
00:21:11,130 --> 00:21:14,700
trouble again okay so so basically I can

409
00:21:14,700 --> 00:21:19,890
I can add a little bit the the the

410
00:21:19,890 --> 00:21:21,930
future work that we're looking at would

411
00:21:21,930 --> 00:21:25,170
include OS query and it would include OS

412
00:21:25,170 --> 00:21:30,090
query because I said that you said it

413
00:21:30,090 --> 00:21:33,510
there is definitely it shift and many

414
00:21:33,510 --> 00:21:36,030
companies at least that we've seen in

415
00:21:36,030 --> 00:21:38,790
Silicon Valley where they're using other

416
00:21:38,790 --> 00:21:43,970
type of domain type of authentication

417
00:21:43,970 --> 00:21:47,280
Federation authentication mostly using

418
00:21:47,280 --> 00:21:50,250
things such as octave for example or

419
00:21:50,250 --> 00:21:53,160
ping or any other type of product and

420
00:21:53,160 --> 00:21:56,430
the worst stations are no longer windows

421
00:21:56,430 --> 00:22:00,060
in the last two startups that I've been

422
00:22:00,060 --> 00:22:02,130
which of course are not enterprises but

423
00:22:02,130 --> 00:22:05,750
they definitely at one point reach a

424
00:22:05,750 --> 00:22:10,290
nice size we only had a Windows computer

425
00:22:10,290 --> 00:22:12,630
or it was actually at one point it was a

426
00:22:12,630 --> 00:22:15,090
victim machine for the accountant we

427
00:22:15,090 --> 00:22:17,430
didn't even need we even use Windows for

428
00:22:17,430 --> 00:22:19,560
anything so and this is happening it's

429
00:22:19,560 --> 00:22:22,170
happening and we know about it so we're

430
00:22:22,170 --> 00:22:23,790
trying to look at other sources and

431
00:22:23,790 --> 00:22:25,950
other types of authentication

432
00:22:25,950 --> 00:22:28,620
environments to add them to the range as

433
00:22:28,620 --> 00:22:37,260
well so let's sorry I is suffering but

434
00:22:37,260 --> 00:22:39,930
uh yeah we're working basically I mean

435
00:22:39,930 --> 00:22:42,570
we're working heavily on trying to get a

436
00:22:42,570 --> 00:22:45,990
us queries basically server instance and

437
00:22:45,990 --> 00:22:48,510
agents deployed as part of the attack

438
00:22:48,510 --> 00:22:50,340
range so we can collect specifically

439
00:22:50,340 --> 00:22:55,110
like a Mac OS or even Linux endpoint

440
00:22:55,110 --> 00:22:57,990
loads using this and that's that's some

441
00:22:57,990 --> 00:23:00,870
of the Mac work there's a big challenge

442
00:23:00,870 --> 00:23:06,300
with Mac OS emulation that AWS doesn't

443
00:23:06,300 --> 00:23:08,580
today support the ability freedom spin

444
00:23:08,580 --> 00:23:13,590
up a Mac OS instance in ec2 so one of

445
00:23:13,590 --> 00:23:14,520
the things we've been looking at is how

446
00:23:14,520 --> 00:23:16,800
do we how do we do that right act in

447
00:23:16,800 --> 00:23:20,850
terraform mode Meili is built and sent

448
00:23:20,850 --> 00:23:22,169
around running in a double

449
00:23:22,169 --> 00:23:24,840
and because we cannot emulate a Mac OS

450
00:23:24,840 --> 00:23:27,359
instance in there it kind of limits us

451
00:23:27,359 --> 00:23:30,749
so likely at the beginning mac OS

452
00:23:30,749 --> 00:23:32,399
support will be limited to the vagrant

453
00:23:32,399 --> 00:23:35,879
mode and eventually expand it but where

454
00:23:35,879 --> 00:23:37,919
were somewhat at the mercy of the cloud

455
00:23:37,919 --> 00:23:40,259
provider that we leverage out of the box

456
00:23:40,259 --> 00:23:45,799
here right all right let's move on

457
00:23:47,290 --> 00:23:51,200
all right so so here's maybe you can

458
00:23:51,200 --> 00:23:53,150
chime in here as well because you you

459
00:23:53,150 --> 00:23:55,490
you you have a deeper knowledge of me on

460
00:23:55,490 --> 00:24:01,640
the on the AWS cost a cost uh the cost

461
00:24:01,640 --> 00:24:06,610
jungle to call it a certain way yes so

462
00:24:06,610 --> 00:24:11,330
the attack range instance type I saw it

463
00:24:11,330 --> 00:24:14,540
first enter from what we built its plot

464
00:24:14,540 --> 00:24:17,059
for AWS and the instance type we use is

465
00:24:17,059 --> 00:24:23,570
a t2 to excel so that if you price out

466
00:24:23,570 --> 00:24:26,030
the cost of running at t2 to excel

467
00:24:26,030 --> 00:24:29,450
instance and specifically you know

468
00:24:29,450 --> 00:24:32,000
usually again we average out you're

469
00:24:32,000 --> 00:24:33,290
gonna be you're gonna be running the

470
00:24:33,290 --> 00:24:36,110
attack range for about three hours four

471
00:24:36,110 --> 00:24:37,790
hours will be again like the typical

472
00:24:37,790 --> 00:24:39,290
workflow were like will take about three

473
00:24:39,290 --> 00:24:40,429
or four hours to develop the detection

474
00:24:40,429 --> 00:24:45,830
then destroy it rebuilt it and a month

475
00:24:45,830 --> 00:24:47,350
and if you do this a few times a month

476
00:24:47,350 --> 00:24:50,570
there's a cost estimate calculator down

477
00:24:50,570 --> 00:24:52,280
there but it roughly comes out to no

478
00:24:52,280 --> 00:24:54,500
more than uh because like two hundred

479
00:24:54,500 --> 00:24:56,660
dollars a month if you build if you're

480
00:24:56,660 --> 00:24:58,790
building a full range consistent where

481
00:24:58,790 --> 00:25:01,130
you're doing this everyday in a daily

482
00:25:01,130 --> 00:25:02,510
users were again you're building it for

483
00:25:02,510 --> 00:25:03,950
three or four hours just trying it good

484
00:25:03,950 --> 00:25:06,429
thing to do four hours more destroying

485
00:25:06,429 --> 00:25:09,020
and this is specific again for this one

486
00:25:09,020 --> 00:25:11,870
server a phantom or colleague or so so

487
00:25:11,870 --> 00:25:15,380
usually well usually we don't use both

488
00:25:15,380 --> 00:25:17,470
typically play sometimes you do so i

489
00:25:17,470 --> 00:25:20,390
factor it in one or the other and it

490
00:25:20,390 --> 00:25:22,760
went some sort of windows endpoint when

491
00:25:22,760 --> 00:25:24,700
it's flying or Windows domain controller

492
00:25:24,700 --> 00:25:27,740
if you just leave those up again 24/7

493
00:25:27,740 --> 00:25:29,750
running look at about two hundred dollar

494
00:25:29,750 --> 00:25:32,600
costs again if your workflow is usually

495
00:25:32,600 --> 00:25:37,130
built destroy your now it usually that

496
00:25:37,130 --> 00:25:39,170
actually drops down a whole lot more

497
00:25:39,170 --> 00:25:40,610
since says you're not keeping those

498
00:25:40,610 --> 00:25:42,920
insistence running and and if they could

499
00:25:42,920 --> 00:25:45,020
just also be like sixteen dollars

500
00:25:45,020 --> 00:25:48,080
roughly a month again depending on your

501
00:25:48,080 --> 00:25:49,640
usage and how long you keep the

502
00:25:49,640 --> 00:25:52,550
instances up cool

503
00:25:52,550 --> 00:25:57,610
let's move on so he

504
00:25:57,610 --> 00:26:00,650
something that they're you you certainly

505
00:26:00,650 --> 00:26:03,440
want to look at right now and and I know

506
00:26:03,440 --> 00:26:05,240
you're probably having your coffee in

507
00:26:05,240 --> 00:26:08,420
and waking up but this is something that

508
00:26:08,420 --> 00:26:09,980
you need to look at right now because

509
00:26:09,980 --> 00:26:13,490
when we start doing the exercises here's

510
00:26:13,490 --> 00:26:17,510
what you find it evil the evil or the

511
00:26:17,510 --> 00:26:20,180
data from the attacks will go into the

512
00:26:20,180 --> 00:26:22,550
following indexes the index will be

513
00:26:22,550 --> 00:26:24,740
equal win we're gonna we're gonna walk

514
00:26:24,740 --> 00:26:26,870
you through this by the way but you need

515
00:26:26,870 --> 00:26:30,080
to understand when you look at this blog

516
00:26:30,080 --> 00:26:33,440
search that when you type index equal

517
00:26:33,440 --> 00:26:38,000
well win or main or attack here's what

518
00:26:38,000 --> 00:26:40,970
the locks are gonna go and in case and

519
00:26:40,970 --> 00:26:44,120
this happens sometimes with you this is

520
00:26:44,120 --> 00:26:46,460
common with a female environment

521
00:26:46,460 --> 00:26:48,590
sometimes there are hiccups sometimes

522
00:26:48,590 --> 00:26:51,350
you know you are for example pulling an

523
00:26:51,350 --> 00:26:54,170
app from an specific website you get a

524
00:26:54,170 --> 00:26:56,690
either four to three or four oh four and

525
00:26:56,690 --> 00:26:59,120
then the environment gets built put the

526
00:26:59,120 --> 00:27:01,370
the app is missing so it's important for

527
00:27:01,370 --> 00:27:04,160
you to understand the index you say

528
00:27:04,160 --> 00:27:05,570
you're gonna be looking at and there

529
00:27:05,570 --> 00:27:08,090
should be data in it if there is no data

530
00:27:08,090 --> 00:27:10,280
in it we have an issue so if you have

531
00:27:10,280 --> 00:27:12,800
for example if you're building for

532
00:27:12,800 --> 00:27:16,130
example this out of AWS you simply

533
00:27:16,130 --> 00:27:17,750
destroy the environment and to redo it

534
00:27:17,750 --> 00:27:20,540
again this is this is almost a this is a

535
00:27:20,540 --> 00:27:24,230
tip when when operating the range many

536
00:27:24,230 --> 00:27:27,110
times because of latency or the internet

537
00:27:27,110 --> 00:27:28,340
or what have you

538
00:27:28,340 --> 00:27:31,100
errors in the in disturbers there might

539
00:27:31,100 --> 00:27:32,960
be hiccups where certain things cannot

540
00:27:32,960 --> 00:27:35,360
install if you don't see them my

541
00:27:35,360 --> 00:27:37,700
suggestion is to destroy it remember

542
00:27:37,700 --> 00:27:41,870
this is a female doesn't matter why you

543
00:27:41,870 --> 00:27:43,310
what will happen is you would think

544
00:27:43,310 --> 00:27:45,950
obviously will take you another it take

545
00:27:45,950 --> 00:27:48,020
us an average of ten or fifty manage to

546
00:27:48,020 --> 00:27:53,030
build a full range from AWS but if you

547
00:27:53,030 --> 00:27:55,190
see things like this like for example

548
00:27:55,190 --> 00:27:57,320
you go to index equals win and for

549
00:27:57,320 --> 00:27:59,840
example you don't see PowerShell logs if

550
00:27:59,840 --> 00:28:01,540
you had secured it obviously a

551
00:28:01,540 --> 00:28:06,070
PowerShell base attack or if you look at

552
00:28:06,070 --> 00:28:08,840
network locks bias belong stream and

553
00:28:08,840 --> 00:28:09,779
remember

554
00:28:09,779 --> 00:28:11,549
when you're looking at stream stream has

555
00:28:11,549 --> 00:28:14,639
to be configured to see specific ports

556
00:28:14,639 --> 00:28:18,299
so if you're looking at you're trying to

557
00:28:18,299 --> 00:28:21,090
emulate for example a specific attack

558
00:28:21,090 --> 00:28:24,169
that is no it's not under this standard

559
00:28:24,169 --> 00:28:26,519
you may have to modify a little bit of

560
00:28:26,519 --> 00:28:28,830
stream in order to see it on the system

561
00:28:28,830 --> 00:28:32,609
on logs we use I believe this a policy

562
00:28:32,609 --> 00:28:35,539
for sis law forces Mon that is the the

563
00:28:35,539 --> 00:28:40,349
heaviest and the highest on auditing and

564
00:28:40,349 --> 00:28:42,269
getting locks from the workstations and

565
00:28:42,269 --> 00:28:45,089
servers and those all of those go in to

566
00:28:45,089 --> 00:28:46,529
index equal wins

567
00:28:46,529 --> 00:28:51,330
so remember when does workstation sis

568
00:28:51,330 --> 00:28:53,759
Mon lost PowerShell logs go into the

569
00:28:53,759 --> 00:28:57,059
wind index the network logs with Splunk

570
00:28:57,059 --> 00:28:59,190
string go into main and of course the

571
00:28:59,190 --> 00:29:01,320
attack simulation logs from atomic read

572
00:29:01,320 --> 00:29:05,719
gene remember we have to attack

573
00:29:05,719 --> 00:29:08,309
adversary simulation frameworks one of

574
00:29:08,309 --> 00:29:11,399
them is atomic red team and colera

575
00:29:11,399 --> 00:29:13,679
and we'll go over it in a few minutes

576
00:29:13,679 --> 00:29:25,649
next slide please so again we are at one

577
00:29:25,649 --> 00:29:28,019
point and this is again something that

578
00:29:28,019 --> 00:29:30,509
we are developing up but would want you

579
00:29:30,509 --> 00:29:32,639
to understand that we're trying to

580
00:29:32,639 --> 00:29:35,700
attack this framework to obviously

581
00:29:35,700 --> 00:29:37,619
what's happening in the in the market in

582
00:29:37,619 --> 00:29:39,690
the industry and in the field the the

583
00:29:39,690 --> 00:29:43,429
goal is to get you the closest

584
00:29:43,429 --> 00:29:46,109
environment to ground truth and that's

585
00:29:46,109 --> 00:29:49,379
what will make a word and leverage your

586
00:29:49,379 --> 00:29:52,830
research and your defense posture so one

587
00:29:52,830 --> 00:29:54,539
of the things that that we're doing is

588
00:29:54,539 --> 00:29:56,309
there will be there is there will be a

589
00:29:56,309 --> 00:29:59,249
deployment with kubernetes that can be

590
00:29:59,249 --> 00:30:02,519
activated by an attack regio I will show

591
00:30:02,519 --> 00:30:05,969
you in a minute how we do that we will

592
00:30:05,969 --> 00:30:08,309
be working with an amazing tool

593
00:30:08,309 --> 00:30:10,349
developed by a by some others from the

594
00:30:10,349 --> 00:30:11,639
partners correspond connect for

595
00:30:11,639 --> 00:30:13,289
kubernetes basically these kids

596
00:30:13,289 --> 00:30:15,450
absolutely everything inside a cluster

597
00:30:15,450 --> 00:30:17,339
if you're auditing it and we also

598
00:30:17,339 --> 00:30:20,899
working on server best deployment

599
00:30:20,899 --> 00:30:23,120
basically based on land and

600
00:30:23,120 --> 00:30:28,830
recipe is using DynamoDB s and s three

601
00:30:28,830 --> 00:30:32,340
buckets but we're not gonna we're not

602
00:30:32,340 --> 00:30:36,840
gonna do and do that but for those who

603
00:30:36,840 --> 00:30:40,500
are new into the AWS world usually the

604
00:30:40,500 --> 00:30:42,929
main sources of logs are either Club

605
00:30:42,929 --> 00:30:46,889
watch or clout trail they I'm sure at

606
00:30:46,889 --> 00:30:49,380
one point we will come up with a a

607
00:30:49,380 --> 00:30:51,480
seminar for the cloud base attacks but

608
00:30:51,480 --> 00:30:52,649
not right now

609
00:30:52,649 --> 00:31:01,950
next all right so what do I do now that

610
00:31:01,950 --> 00:31:06,120
I want to build the attack range the

611
00:31:06,120 --> 00:31:08,610
attack range as I said before can be

612
00:31:08,610 --> 00:31:13,799
found on github you can basically clone

613
00:31:13,799 --> 00:31:16,519
it like you see in the prerequisite

614
00:31:16,519 --> 00:31:20,399
range is based on Python 3 and if you

615
00:31:20,399 --> 00:31:22,860
you still have an environmental Python

616
00:31:22,860 --> 00:31:27,299
2.7 you may have to use a Python module

617
00:31:27,299 --> 00:31:31,490
called virtual EMV and create a Python 3

618
00:31:31,490 --> 00:31:35,340
environment activate it and then you can

619
00:31:35,340 --> 00:31:39,149
use the popular packet install

620
00:31:39,149 --> 00:31:42,809
management tool for Python pick and then

621
00:31:42,809 --> 00:31:44,070
install the requirements

622
00:31:44,070 --> 00:31:46,379
once you start the requirements it will

623
00:31:46,379 --> 00:31:50,309
basically have your older binaries and

624
00:31:50,309 --> 00:31:53,100
all the libraries that you need you

625
00:31:53,100 --> 00:31:58,230
still if you're in using AWS you had to

626
00:31:58,230 --> 00:32:00,840
to initiate their form as well you have

627
00:32:00,840 --> 00:32:03,659
to go into the terraform folder and

628
00:32:03,659 --> 00:32:07,740
initiate it if you're using vagrant you

629
00:32:07,740 --> 00:32:11,370
can do brew and you're gonna need filter

630
00:32:11,370 --> 00:32:17,549
box as well and again when you are

631
00:32:17,549 --> 00:32:21,330
looking at the bay current execution of

632
00:32:21,330 --> 00:32:25,230
this please make sure you do not over

633
00:32:25,230 --> 00:32:29,309
configure the range you do if you put

634
00:32:29,309 --> 00:32:32,429
everything in it we're talking several

635
00:32:32,429 --> 00:32:34,980
machines it will take quite a bit of

636
00:32:34,980 --> 00:32:36,720
time it will probably

637
00:32:36,720 --> 00:32:39,780
slow your computer to a crawl so I would

638
00:32:39,780 --> 00:32:42,330
suggest not to if you have for example

639
00:32:42,330 --> 00:32:45,780
standard usual a standard-issue MacBook

640
00:32:45,780 --> 00:32:49,799
pearl which move don't give you 16

641
00:32:49,799 --> 00:32:52,799
gigabytes of RAM probably around 500

642
00:32:52,799 --> 00:32:55,520
gigabytes up to a terabyte of hard drive

643
00:32:55,520 --> 00:32:57,750
and no more than three machines

644
00:32:57,750 --> 00:33:00,030
periphery per iteration and then you may

645
00:33:00,030 --> 00:33:01,620
have to destroy it or configure it

646
00:33:01,620 --> 00:33:06,059
that's the price you know limitation and

647
00:33:06,059 --> 00:33:09,600
in in terms of resources if you if

648
00:33:09,600 --> 00:33:13,320
you're using a windows-based computer

649
00:33:13,320 --> 00:33:16,200
you you I will say that the same rule

650
00:33:16,200 --> 00:33:19,200
applies I'm not sure if will say if you

651
00:33:19,200 --> 00:33:24,590
want to add on do this yeah I mean so

652
00:33:24,590 --> 00:33:27,289
specifically for configuring big

653
00:33:27,289 --> 00:33:29,190
configuring the establishment in Vega

654
00:33:29,190 --> 00:33:31,260
and it's pretty straightforward the main

655
00:33:31,260 --> 00:33:33,270
requirement here is to have a virtual

656
00:33:33,270 --> 00:33:37,530
box and vagrant obviously it's again for

657
00:33:37,530 --> 00:33:40,340
those of you not familiar way again it's

658
00:33:40,340 --> 00:33:43,049
basically utility allows you to manage

659
00:33:43,049 --> 00:33:45,090
through command line interface that from

660
00:33:45,090 --> 00:33:47,580
VirtualBox machines and they call them

661
00:33:47,580 --> 00:33:50,159
boxes well actually not just VirtualBox

662
00:33:50,159 --> 00:33:51,990
make and suppose also VMware and a few

663
00:33:51,990 --> 00:33:53,220
other remediation local emulation

664
00:33:53,220 --> 00:33:55,350
engines but uh mainly was built

665
00:33:55,350 --> 00:33:57,780
originally around VirtualBox everything

666
00:33:57,780 --> 00:33:58,890
else pretty straightforward is you know

667
00:33:58,890 --> 00:34:02,220
clone the project we typically we

668
00:34:02,220 --> 00:34:04,950
recommend and we want to use virtual

669
00:34:04,950 --> 00:34:06,450
environments for Python when installing

670
00:34:06,450 --> 00:34:08,429
our requirements you don't want to taint

671
00:34:08,429 --> 00:34:09,949
your system libraries with the

672
00:34:09,949 --> 00:34:12,629
dependencies that the system at the the

673
00:34:12,629 --> 00:34:14,639
attack which has so which is the second

674
00:34:14,639 --> 00:34:16,260
step in prerequisites right you install

675
00:34:16,260 --> 00:34:17,790
but your environment you activate a

676
00:34:17,790 --> 00:34:20,070
Python 3 virtual environment and then

677
00:34:20,070 --> 00:34:21,510
you go ahead and sell the requirements

678
00:34:21,510 --> 00:34:23,730
but besides that is again if you're

679
00:34:23,730 --> 00:34:25,230
running if you're running installation

680
00:34:25,230 --> 00:34:28,679
on Mac OS it's as simple as a again

681
00:34:28,679 --> 00:34:30,389
there's also some sorry this also since

682
00:34:30,389 --> 00:34:32,280
your improved but the simple is used to

683
00:34:32,280 --> 00:34:35,040
improve VirtualBox but through install

684
00:34:35,040 --> 00:34:39,179
vagrant and and just editing the the con

685
00:34:39,179 --> 00:34:43,800
file right and also sorry

686
00:34:43,800 --> 00:34:47,000
one quick comment as you move on with

687
00:34:47,000 --> 00:34:50,980
with your environment or your life

688
00:34:50,980 --> 00:34:54,010
and I can tell you there's more in next

689
00:34:54,010 --> 00:34:57,549
based on my experience if if you are

690
00:34:57,549 --> 00:34:59,829
updating or your or you're building new

691
00:34:59,829 --> 00:35:01,770
machines it is important that you keep

692
00:35:01,770 --> 00:35:05,260
not only Begaren for virtualbox of today

693
00:35:05,260 --> 00:35:07,780
if not you may have issues so almost

694
00:35:07,780 --> 00:35:16,089
remember that next yeah you want to add

695
00:35:16,089 --> 00:35:18,299
something

696
00:35:18,390 --> 00:35:22,980
on the side I yeah so today later later

697
00:35:22,980 --> 00:35:26,220
out the slides and we walked and walked

698
00:35:26,220 --> 00:35:28,080
and we're we're gonna give you a range

699
00:35:28,080 --> 00:35:29,070
in telephone you should have already

700
00:35:29,070 --> 00:35:31,100
said at the beginning I'm sorry but uh

701
00:35:31,100 --> 00:35:33,810
the terraform installation instruction

702
00:35:33,810 --> 00:35:36,630
is it's a little bit more there's a lot

703
00:35:36,630 --> 00:35:39,000
more stuff simple involved but it's

704
00:35:39,000 --> 00:35:40,440
somewhat like riding the bike once

705
00:35:40,440 --> 00:35:42,150
you've configured at once firstly never

706
00:35:42,150 --> 00:35:44,070
have to configure it again unless you

707
00:35:44,070 --> 00:35:46,320
change accounts but it's pretty

708
00:35:46,320 --> 00:35:49,200
straightforward to do afterwards the the

709
00:35:49,200 --> 00:35:50,490
installation structure here is the

710
00:35:50,490 --> 00:35:52,890
purposes are the same you know clone the

711
00:35:52,890 --> 00:35:56,280
project it stopped virtual and and then

712
00:35:56,280 --> 00:35:57,390
install the dependencies of the

713
00:35:57,390 --> 00:35:59,940
laboratory environment if you're running

714
00:35:59,940 --> 00:36:04,350
on Mac OS Mac OS X oh sorry Mac OS you

715
00:36:04,350 --> 00:36:07,620
do a brew install terraform to get the

716
00:36:07,620 --> 00:36:09,870
to get the actual terraform binary or

717
00:36:09,870 --> 00:36:12,900
you can just literally download it from

718
00:36:12,900 --> 00:36:14,850
the terminal side and put it in in in

719
00:36:14,850 --> 00:36:19,470
local bin but you the step of this if

720
00:36:19,470 --> 00:36:21,930
you basically initialize terraform and

721
00:36:21,930 --> 00:36:25,140
this the second step here run from a NIC

722
00:36:25,140 --> 00:36:27,810
what it does is it uh it's gonna go

723
00:36:27,810 --> 00:36:30,630
ahead and and pull out all the plugins

724
00:36:30,630 --> 00:36:32,700
that perform is gonna use and start it

725
00:36:32,700 --> 00:36:35,160
locally and then the next step is

726
00:36:35,160 --> 00:36:37,590
install installing in the AWS CLI since

727
00:36:37,590 --> 00:36:39,750
the terraforming installation under the

728
00:36:39,750 --> 00:36:43,650
hood leverages AWS boto for doing a lot

729
00:36:43,650 --> 00:36:47,310
of building and instantiating so did you

730
00:36:47,310 --> 00:36:49,020
saw it the bacilli then you do the base

731
00:36:49,020 --> 00:36:52,200
configure you pass along your API key

732
00:36:52,200 --> 00:36:56,720
said you generated in AWS under my user

733
00:36:56,720 --> 00:36:58,920
once you have they have my user

734
00:36:58,920 --> 00:37:01,500
configure and or greg SS configure

735
00:37:01,500 --> 00:37:04,110
locally then you key gen you can

736
00:37:04,110 --> 00:37:06,720
generate a key pair that key pair you're

737
00:37:06,720 --> 00:37:09,180
gonna go ahead and upload on the region

738
00:37:09,180 --> 00:37:12,480
that you're going to build on you give

739
00:37:12,480 --> 00:37:14,430
it whatever name by default we call we

740
00:37:14,430 --> 00:37:15,900
call the keeper and the come file the

741
00:37:15,900 --> 00:37:18,540
attack range key pair because we're not

742
00:37:18,540 --> 00:37:23,340
creative or names but but but you can

743
00:37:23,340 --> 00:37:24,750
also alternatively also create the

744
00:37:24,750 --> 00:37:26,550
keeper in AWS and download and locally

745
00:37:26,550 --> 00:37:29,040
as long as again it's it's as long as

746
00:37:29,040 --> 00:37:31,320
you set the right key pair on the attack

747
00:37:31,320 --> 00:37:32,280
range calm

748
00:37:32,280 --> 00:37:35,190
the parameter in there to actually point

749
00:37:35,190 --> 00:37:37,440
to what key pair what poverty are using

750
00:37:37,440 --> 00:37:40,200
and again but that key needs to exist on

751
00:37:40,200 --> 00:37:45,810
there on AWS and then the last step step

752
00:37:45,810 --> 00:37:49,770
before it the last year is just accept

753
00:37:49,770 --> 00:37:53,670
the terms for using the Ubuntu a my

754
00:37:53,670 --> 00:37:55,620
images for AWS account otherwise when

755
00:37:55,620 --> 00:37:57,150
you build you get some weird error

756
00:37:57,150 --> 00:37:58,320
saying yeah you got to go to the

757
00:37:58,320 --> 00:37:59,970
marketplace for AWS to actually use

758
00:37:59,970 --> 00:38:02,720
these images it's it's an interesting

759
00:38:02,720 --> 00:38:06,000
and and that's I mean that's that's

760
00:38:06,000 --> 00:38:07,890
pretty much it the final step is again

761
00:38:07,890 --> 00:38:09,270
just just make sure you change your

762
00:38:09,270 --> 00:38:13,380
passwords and and it said any allowed

763
00:38:13,380 --> 00:38:16,140
list under the attack off and obviously

764
00:38:16,140 --> 00:38:17,580
update whatever if you change your key

765
00:38:17,580 --> 00:38:19,200
pair name to something else be sure that

766
00:38:19,200 --> 00:38:20,880
it's listed on there and and configure

767
00:38:20,880 --> 00:38:23,820
the environment again there's a whole

768
00:38:23,820 --> 00:38:27,090
lot more steps involved by da1 at the

769
00:38:27,090 --> 00:38:28,470
end of this I can walk you through

770
00:38:28,470 --> 00:38:30,690
building one from scratch but will also

771
00:38:30,690 --> 00:38:34,200
be providing hope whoever is in the shop

772
00:38:34,200 --> 00:38:35,610
in the workshop here will be providing

773
00:38:35,610 --> 00:38:37,080
already people ranges so you can see

774
00:38:37,080 --> 00:38:38,280
what the configuration looks like

775
00:38:38,280 --> 00:38:41,970
anyways um I'm also going to drop in

776
00:38:41,970 --> 00:38:43,680
this course I'm also going to drop in

777
00:38:43,680 --> 00:38:46,470
this code I wrote a wiki page yesterday

778
00:38:46,470 --> 00:38:49,380
and how don't start up like that has a

779
00:38:49,380 --> 00:38:51,150
little script a little quick Ubuntu

780
00:38:51,150 --> 00:38:52,470
script ihara like automatically build

781
00:38:52,470 --> 00:38:54,350
the attention on the point to 1800 for

782
00:38:54,350 --> 00:38:56,880
instance so if you wanted again to do

783
00:38:56,880 --> 00:38:59,670
this right now on your own your own AWS

784
00:38:59,670 --> 00:39:01,470
instance there's all place that wiki

785
00:39:01,470 --> 00:39:08,390
page in there as well you go right oh

786
00:39:08,390 --> 00:39:10,760
sure so

787
00:39:10,760 --> 00:39:14,420
it's another alternative that you're

788
00:39:14,420 --> 00:39:16,340
gonna have to use if you were gonna need

789
00:39:16,340 --> 00:39:20,570
the binary and sort of perform a similar

790
00:39:20,570 --> 00:39:25,790
run on Stalin Packer and you always need

791
00:39:25,790 --> 00:39:28,130
if you're using when you're interacting

792
00:39:28,130 --> 00:39:31,100
with any cloud then they're most likely

793
00:39:31,100 --> 00:39:34,760
you're gonna need their SDK other CLI so

794
00:39:34,760 --> 00:39:37,310
in this case as you can see you're gonna

795
00:39:37,310 --> 00:39:41,240
need two AWS CLI and you're gonna have

796
00:39:41,240 --> 00:39:43,900
to configure like Jose said previously

797
00:39:43,900 --> 00:39:48,710
your SSH keys I actually took the time

798
00:39:48,710 --> 00:39:51,770
to put a screen shot exactly where you

799
00:39:51,770 --> 00:39:53,840
had to configure the SSH keys we're

800
00:39:53,840 --> 00:39:55,940
gonna see that in a minute because that

801
00:39:55,940 --> 00:39:58,130
for me at first was one of the

802
00:39:58,130 --> 00:40:00,850
challenges because you had to provide

803
00:40:00,850 --> 00:40:07,130
the the right SSH keys that match with

804
00:40:07,130 --> 00:40:09,680
the name of the SSH keys that you

805
00:40:09,680 --> 00:40:12,380
register in 8 of years if you do not do

806
00:40:12,380 --> 00:40:14,030
that you're not gonna be able to

807
00:40:14,030 --> 00:40:17,300
communicate with your instances so it's

808
00:40:17,300 --> 00:40:21,010
important sometimes because of

809
00:40:21,010 --> 00:40:25,070
configuration errors it may look like a

810
00:40:25,070 --> 00:40:27,470
network error or it may look like a

811
00:40:27,470 --> 00:40:30,350
hiccup but it's not it means you had not

812
00:40:30,350 --> 00:40:33,700
placed the SSH keys the correct SSH keys

813
00:40:33,700 --> 00:40:38,150
within the the code and we'll go over

814
00:40:38,150 --> 00:40:42,890
about it in just a few seconds you may

815
00:40:42,890 --> 00:40:45,860
also want to change this Blanc admin

816
00:40:45,860 --> 00:40:50,210
password when password within attack on

817
00:40:50,210 --> 00:40:53,930
the score range kampf if you're building

818
00:40:53,930 --> 00:40:56,180
something that you're gonna use for

819
00:40:56,180 --> 00:40:58,640
10-15 minutes probably you don't have to

820
00:40:58,640 --> 00:40:59,630
worry about it

821
00:40:59,630 --> 00:41:02,060
but we have seen cases where

822
00:41:02,060 --> 00:41:05,330
unfortunately you know with the there

823
00:41:05,330 --> 00:41:06,860
are people on the internet looking at

824
00:41:06,860 --> 00:41:09,230
this they and they had put the passwords

825
00:41:09,230 --> 00:41:13,130
and access the the instances and you

826
00:41:13,130 --> 00:41:14,750
don't want that you're gonna get a nasty

827
00:41:14,750 --> 00:41:17,450
alert from the a through us security

828
00:41:17,450 --> 00:41:19,820
team because most likely well they're

829
00:41:19,820 --> 00:41:21,200
gonna try to do is install either a

830
00:41:21,200 --> 00:41:23,750
quick the minor or something

831
00:41:23,750 --> 00:41:26,750
but it is important we're working on

832
00:41:26,750 --> 00:41:31,400
creating random random passwords as we

833
00:41:31,400 --> 00:41:33,290
build it but it's something that you

834
00:41:33,290 --> 00:41:40,190
want to pay attention to so next person

835
00:41:40,190 --> 00:41:43,010
I'll color about white Packer exists in

836
00:41:43,010 --> 00:41:45,440
the attack range so we attack mention we

837
00:41:45,440 --> 00:41:48,369
mainly have again two modes which is

838
00:41:48,369 --> 00:41:50,720
vagrant you build the locally or

839
00:41:50,720 --> 00:41:53,150
telephone to build in AWS the main

840
00:41:53,150 --> 00:41:56,480
reason we build Packer was to speed up

841
00:41:56,480 --> 00:41:59,240
the build I mean it in in AWS or using

842
00:41:59,240 --> 00:42:01,730
terraform well pack the packer mode does

843
00:42:01,730 --> 00:42:03,109
is it's no different than tariffs or

844
00:42:03,109 --> 00:42:04,700
mode and in the end result you get the

845
00:42:04,700 --> 00:42:07,340
same excited environment but the

846
00:42:07,340 --> 00:42:09,410
difference is the process it how it does

847
00:42:09,410 --> 00:42:12,170
the UM the tariff or mode it spins up

848
00:42:12,170 --> 00:42:13,820
all the machines and then it uses

849
00:42:13,820 --> 00:42:16,550
ansible to provision them Packer mode

850
00:42:16,550 --> 00:42:19,359
what it does is it builds a.m. eyes

851
00:42:19,359 --> 00:42:21,800
provisions VM eyes and then spins them

852
00:42:21,800 --> 00:42:24,109
up so the M eyes already pre-built why

853
00:42:24,109 --> 00:42:26,000
why do we introduce pack a packer makes

854
00:42:26,000 --> 00:42:29,140
it really fast to consistently be

855
00:42:29,140 --> 00:42:31,790
destroying and creating ranges because

856
00:42:31,790 --> 00:42:33,710
the first time around you're building an

857
00:42:33,710 --> 00:42:36,440
ami takes about the same time as using

858
00:42:36,440 --> 00:42:38,570
careful mode but any other subsequent

859
00:42:38,570 --> 00:42:41,390
destroy and create it's about a minute

860
00:42:41,390 --> 00:42:43,580
long biotech range it takes about 15

861
00:42:43,580 --> 00:42:46,210
minutes in total for it to fully come up

862
00:42:46,210 --> 00:42:50,900
and so and so and so we can we introduce

863
00:42:50,900 --> 00:42:52,700
a mainly for for for that kind of

864
00:42:52,700 --> 00:42:53,630
workflow where you're you're

865
00:42:53,630 --> 00:42:55,310
continuously you know you test something

866
00:42:55,310 --> 00:42:57,170
you built it up and then you destroy it

867
00:42:57,170 --> 00:42:59,270
and build it up again the story one

868
00:42:59,270 --> 00:43:01,940
caveat here is if if anything gets

869
00:43:01,940 --> 00:43:03,859
changed like if you change anything on

870
00:43:03,859 --> 00:43:05,089
the configuration for an attacker

871
00:43:05,089 --> 00:43:08,030
intercom then Packer will have to

872
00:43:08,030 --> 00:43:10,160
rebuild those a.m. eyes since the

873
00:43:10,160 --> 00:43:12,410
environments now has changed essentially

874
00:43:12,410 --> 00:43:14,660
but besides that this this is why this

875
00:43:14,660 --> 00:43:21,830
mode exists yeah cool okay so here's the

876
00:43:21,830 --> 00:43:23,900
comment that let me bring back the

877
00:43:23,900 --> 00:43:25,910
comment that I was making what you see

878
00:43:25,910 --> 00:43:28,849
here is where you're gonna place your

879
00:43:28,849 --> 00:43:32,780
creds this is very very important when

880
00:43:32,780 --> 00:43:37,839
you clone the repo for the attack range

881
00:43:37,839 --> 00:43:40,750
there's specifically a file which you're

882
00:43:40,750 --> 00:43:43,950
gonna have to modify to your convenient

883
00:43:43,950 --> 00:43:46,210
you're doing this because you're gonna

884
00:43:46,210 --> 00:43:48,880
have to tell the attack range okay maybe

885
00:43:48,880 --> 00:43:49,750
I don't need Kali

886
00:43:49,750 --> 00:43:52,750
maybe I just need this Blanc server that

887
00:43:52,750 --> 00:43:53,920
brings caldera

888
00:43:53,920 --> 00:43:58,150
and atomic reteam obviously you need a

889
00:43:58,150 --> 00:44:00,760
host were you going to execute this

890
00:44:00,760 --> 00:44:04,390
attacks that will be either a client or

891
00:44:04,390 --> 00:44:09,849
either a server and then in order for

892
00:44:09,849 --> 00:44:13,540
you to communicate with those instances

893
00:44:13,540 --> 00:44:16,059
you're gonna need your keys

894
00:44:16,059 --> 00:44:17,950
the keys where are the keys the keys are

895
00:44:17,950 --> 00:44:21,339
registered and you can create it there

896
00:44:21,339 --> 00:44:23,680
are two ways of doing it a a Tobias can

897
00:44:23,680 --> 00:44:25,890
generate them for you or you can

898
00:44:25,890 --> 00:44:30,160
generate them yourself and upload them

899
00:44:30,160 --> 00:44:36,040
to AWS so specifically on their range

900
00:44:36,040 --> 00:44:38,710
settings there is key underscore name

901
00:44:38,710 --> 00:44:42,760
equals that's where your public aww

902
00:44:42,760 --> 00:44:46,569
scheme name I repeat name is where it

903
00:44:46,569 --> 00:44:47,079
goes

904
00:44:47,079 --> 00:44:49,569
so even though you see the dot Papa

905
00:44:49,569 --> 00:44:53,440
extension I named that exactly the same

906
00:44:53,440 --> 00:44:56,650
when I registered and uploaded my keys

907
00:44:56,650 --> 00:44:58,420
to AWS it's important for you to

908
00:44:58,420 --> 00:45:01,240
understand that if it doesn't match its

909
00:45:01,240 --> 00:45:03,010
you're gonna get errors it's gonna give

910
00:45:03,010 --> 00:45:07,930
you oh I couldn't SSH into X host e on

911
00:45:07,930 --> 00:45:11,049
their private underscore key underscore

912
00:45:11,049 --> 00:45:16,349
path you can see what I store my actual

913
00:45:16,349 --> 00:45:19,569
private key and I created that this is

914
00:45:19,569 --> 00:45:22,030
something that I do every time I'm

915
00:45:22,030 --> 00:45:24,160
working with client environments I had

916
00:45:24,160 --> 00:45:26,349
keys for every single car bomb I don't I

917
00:45:26,349 --> 00:45:28,359
don't share my keys with different

918
00:45:28,359 --> 00:45:29,740
environments and I just do this and

919
00:45:29,740 --> 00:45:31,780
usually sometimes I even destroy the

920
00:45:31,780 --> 00:45:35,319
keys as I create new environments so

921
00:45:35,319 --> 00:45:37,930
remember if you look at this the

922
00:45:37,930 --> 00:45:40,420
screenshot on the top right you will be

923
00:45:40,420 --> 00:45:43,150
able to see the structure of the files

924
00:45:43,150 --> 00:45:46,720
and directories when you clone the

925
00:45:46,720 --> 00:45:49,809
repository and on the left is when you

926
00:45:49,809 --> 00:45:51,310
write a cat or nano

927
00:45:51,310 --> 00:45:57,190
them attack underscore rage Kampf so

928
00:45:57,190 --> 00:46:02,860
remember that next up please here so it

929
00:46:02,860 --> 00:46:07,390
is even clearer there is like I said

930
00:46:07,390 --> 00:46:10,530
before that I in order not to confuse

931
00:46:10,530 --> 00:46:13,570
even though it has dot and extension it

932
00:46:13,570 --> 00:46:17,020
is exactly the same name so I you had to

933
00:46:17,020 --> 00:46:20,800
go into your what are called the GUI

934
00:46:20,800 --> 00:46:23,740
rather the console and then you had to

935
00:46:23,740 --> 00:46:26,380
register your key pairs and your keepers

936
00:46:26,380 --> 00:46:29,410
I generated my own I uploaded it and

937
00:46:29,410 --> 00:46:31,240
named it and that's the name that goes

938
00:46:31,240 --> 00:46:34,390
into the configuration next up please

939
00:46:34,390 --> 00:46:41,170
okay so what we're about to see here and

940
00:46:41,170 --> 00:46:44,170
we're getting close to the ball we're

941
00:46:44,170 --> 00:46:45,570
gonna start getting hands on with this

942
00:46:45,570 --> 00:46:48,940
is important things that you had to look

943
00:46:48,940 --> 00:46:53,440
within attack on the score attack range

944
00:46:53,440 --> 00:46:56,650
configuration so the administrator

945
00:46:56,650 --> 00:46:59,290
password as you can see it's pretty

946
00:46:59,290 --> 00:47:01,720
standard remember the comment I said you

947
00:47:01,720 --> 00:47:05,230
you you you should change those

948
00:47:05,230 --> 00:47:06,580
passwords to something that you remember

949
00:47:06,580 --> 00:47:09,820
and it is not easy to assemble otherwise

950
00:47:09,820 --> 00:47:11,410
I promise you if you leave these things

951
00:47:11,410 --> 00:47:15,070
overnight you're probably accessed and

952
00:47:15,070 --> 00:47:18,520
probably compromised remember when we

953
00:47:18,520 --> 00:47:22,360
use infrastructure a code one of the

954
00:47:22,360 --> 00:47:25,110
premises or infrastructure is good is

955
00:47:25,110 --> 00:47:29,500
it's a female it means it doesn't stay

956
00:47:29,500 --> 00:47:31,750
there it's it gets useful what it needs

957
00:47:31,750 --> 00:47:34,390
to be used and it gets destroyed this is

958
00:47:34,390 --> 00:47:36,310
this these are not instances that are

959
00:47:36,310 --> 00:47:39,670
meant to stay there unless of course you

960
00:47:39,670 --> 00:47:42,340
want to keep them but because it's

961
00:47:42,340 --> 00:47:45,940
flexible and it's callable you you you

962
00:47:45,940 --> 00:47:49,330
don't wanna you want to use them for one

963
00:47:49,330 --> 00:47:51,400
you need to use them I understand it

964
00:47:51,400 --> 00:47:53,290
takes 10-15 minutes but if you save your

965
00:47:53,290 --> 00:47:56,200
configurations and once you get it

966
00:47:56,200 --> 00:47:58,600
acquainted or how to use it

967
00:47:58,600 --> 00:48:01,470
you can build it anytime you want so

968
00:48:01,470 --> 00:48:03,940
some of the things that you have to look

969
00:48:03,940 --> 00:48:04,930
is for

970
00:48:04,930 --> 00:48:07,480
their windows settings is the username

971
00:48:07,480 --> 00:48:10,630
will be administrator the password as

972
00:48:10,630 --> 00:48:14,020
it's specified there it tells you where

973
00:48:14,020 --> 00:48:17,319
to download the applications for

974
00:48:17,319 --> 00:48:18,760
somebody you can see clearly what is

975
00:48:18,760 --> 00:48:20,910
down modern da Splunk forward

976
00:48:20,910 --> 00:48:25,000
it tells you for example the wid this

977
00:48:25,000 --> 00:48:28,329
Mont template like I said before will

978
00:48:28,329 --> 00:48:32,109
you see the the template for system

979
00:48:32,109 --> 00:48:35,040
configuration which is one of the

980
00:48:35,040 --> 00:48:38,680
tightest and highest on on Auditing and

981
00:48:38,680 --> 00:48:41,859
obviously producing verbosity on locks

982
00:48:41,859 --> 00:48:44,140
and that's that's that's that it gets

983
00:48:44,140 --> 00:48:45,849
done for you you don't have to do I

984
00:48:45,849 --> 00:48:47,800
remember when I used to I used to have

985
00:48:47,800 --> 00:48:49,990
to download an ISO then I had to apply

986
00:48:49,990 --> 00:48:52,329
this again over and over and over it is

987
00:48:52,329 --> 00:48:55,150
tiring in this case you just had to

988
00:48:55,150 --> 00:48:57,760
configure where even locally you just

989
00:48:57,760 --> 00:49:00,670
have to configure what if this is U 1 it

990
00:49:00,670 --> 00:49:02,140
would download and it will build then

991
00:49:02,140 --> 00:49:05,500
and it will be ready to go and one more

992
00:49:05,500 --> 00:49:07,450
thing as you can see here the botton if

993
00:49:07,450 --> 00:49:08,730
you wanted to stuff for example

994
00:49:08,730 --> 00:49:12,790
enterprise security 0 is thought one is

995
00:49:12,790 --> 00:49:17,710
yes so let's move on in the next one so

996
00:49:17,710 --> 00:49:22,630
here's before we get on to this this is

997
00:49:22,630 --> 00:49:25,510
why would you tell this software what

998
00:49:25,510 --> 00:49:27,670
you want so for example I want to find a

999
00:49:27,670 --> 00:49:29,799
server I need to place one in it

1000
00:49:29,799 --> 00:49:31,480
I wanted the main controller by the

1001
00:49:31,480 --> 00:49:32,980
fault that will be in one if you don't

1002
00:49:32,980 --> 00:49:35,680
want it you place 0 if you want a

1003
00:49:35,680 --> 00:49:38,650
Windows server you place 1 or 0 if you

1004
00:49:38,650 --> 00:49:40,720
want it or not Kali machine the same

1005
00:49:40,720 --> 00:49:42,160
thing so you should remember you gotta

1006
00:49:42,160 --> 00:49:43,990
go to attack on this corner age don't

1007
00:49:43,990 --> 00:49:48,940
come and that is where you modify the

1008
00:49:48,940 --> 00:49:52,210
environment that you want to build so if

1009
00:49:52,210 --> 00:49:55,359
you if you do not modify this by default

1010
00:49:55,359 --> 00:49:57,400
you will get a domain controller and a

1011
00:49:57,400 --> 00:49:58,960
Splunk server that's pretty much what

1012
00:49:58,960 --> 00:50:01,210
you get you will now get the Kali or the

1013
00:50:01,210 --> 00:50:05,770
fan turn so these are things that you

1014
00:50:05,770 --> 00:50:09,040
had to look at before you execute that's

1015
00:50:09,040 --> 00:50:13,049
not so let's go

1016
00:50:13,049 --> 00:50:16,049
I'm Nursery simulation before we go into

1017
00:50:16,049 --> 00:50:20,880
our hands-on exercises the reason again

1018
00:50:20,880 --> 00:50:25,769
we did this was basically to get ground

1019
00:50:25,769 --> 00:50:29,279
proof about replication of attacks and

1020
00:50:29,279 --> 00:50:32,519
and in this case we have selected two

1021
00:50:32,519 --> 00:50:36,299
frameworks one Escalera obviously

1022
00:50:36,299 --> 00:50:38,339
developed by Michael which might or is

1023
00:50:38,339 --> 00:50:42,140
the leading company and TTP nomenclature

1024
00:50:42,140 --> 00:50:46,140
mitre is a creator attack framework

1025
00:50:46,140 --> 00:50:50,459
creator of holder of the CBE database

1026
00:50:50,459 --> 00:50:57,929
and many other information security tool

1027
00:50:57,929 --> 00:50:59,849
techniques and procedures nomenclature

1028
00:50:59,849 --> 00:51:04,499
so what we want to do is basically use

1029
00:51:04,499 --> 00:51:07,699
this industry effective framework

1030
00:51:07,699 --> 00:51:10,890
nomenclature replicate it operationally

1031
00:51:10,890 --> 00:51:13,559
in actions and these actions are usually

1032
00:51:13,559 --> 00:51:17,759
attributed to an S Pacific adversary

1033
00:51:17,759 --> 00:51:21,019
right so what we want to do is

1034
00:51:21,019 --> 00:51:24,899
conceptually is applied this replicate

1035
00:51:24,899 --> 00:51:28,409
this attacks into a sample host now the

1036
00:51:28,409 --> 00:51:30,509
sample hose and this is something that I

1037
00:51:30,509 --> 00:51:32,909
mentioned when we started the

1038
00:51:32,909 --> 00:51:34,939
presentation should be a golden image

1039
00:51:34,939 --> 00:51:38,130
what is a golden image all the image is

1040
00:51:38,130 --> 00:51:43,649
a an ISO or welcome can be a container

1041
00:51:43,649 --> 00:51:46,229
depending on the on the on the

1042
00:51:46,229 --> 00:51:47,789
environment you are a virtual machine

1043
00:51:47,789 --> 00:51:54,119
that were even a bare-metal if you have

1044
00:51:54,119 --> 00:51:58,880
two that represent your info set policy

1045
00:51:58,880 --> 00:52:02,009
posture and harden procedures so for

1046
00:52:02,009 --> 00:52:07,259
example if I am in a company and I want

1047
00:52:07,259 --> 00:52:10,199
to make sure that when I test this this

1048
00:52:10,199 --> 00:52:16,259
attacks they keep the results give me a

1049
00:52:16,259 --> 00:52:23,539
true a real information on how my

1050
00:52:23,539 --> 00:52:26,510
enterprise how my company will be

1051
00:52:26,510 --> 00:52:29,390
affected if this attack was performed I

1052
00:52:29,390 --> 00:52:35,150
had to do this on in a Goulding image so

1053
00:52:35,150 --> 00:52:38,180
in order to create a golden image most

1054
00:52:38,180 --> 00:52:41,330
likely you gotta have to go to your IT

1055
00:52:41,330 --> 00:52:43,460
department or SEC of the department it

1056
00:52:43,460 --> 00:52:45,290
depends upon your organization and

1057
00:52:45,290 --> 00:52:47,120
you're gonna you're gonna have to ask

1058
00:52:47,120 --> 00:52:48,800
them all most of you who work who have

1059
00:52:48,800 --> 00:52:50,360
worked on an enterprise to work on an

1060
00:52:50,360 --> 00:52:52,070
enterprise you know that when you're

1061
00:52:52,070 --> 00:52:55,250
deliver in acid being a lot OB in our

1062
00:52:55,250 --> 00:52:58,090
station or being a surfer there is a

1063
00:52:58,090 --> 00:53:00,110
configuration there is an inventory

1064
00:53:00,110 --> 00:53:02,120
there's a number of tools that are

1065
00:53:02,120 --> 00:53:04,730
placed in it that were purchased

1066
00:53:04,730 --> 00:53:06,800
maintained and managed by your

1067
00:53:06,800 --> 00:53:09,080
organization so if you want to make this

1068
00:53:09,080 --> 00:53:12,860
truly truly closer to one what the real

1069
00:53:12,860 --> 00:53:16,940
thing will be do you wanna do this on a

1070
00:53:16,940 --> 00:53:18,850
golden image

1071
00:53:18,850 --> 00:53:24,930
next up and all

1072
00:53:24,930 --> 00:53:27,900
reason why you want to do this is

1073
00:53:27,900 --> 00:53:30,059
because it will represent your attack

1074
00:53:30,059 --> 00:53:32,579
surface it will test your attack

1075
00:53:32,579 --> 00:53:35,250
telemetry it will test your incident

1076
00:53:35,250 --> 00:53:38,040
response rules it will validate your

1077
00:53:38,040 --> 00:53:40,349
defense rules many times you can you can

1078
00:53:40,349 --> 00:53:42,300
apply your own defense procedures into

1079
00:53:42,300 --> 00:53:45,059
this environment and see how well you're

1080
00:53:45,059 --> 00:53:47,819
doing including for example if you're

1081
00:53:47,819 --> 00:53:50,339
looking at how to prevent escalation of

1082
00:53:50,339 --> 00:53:52,859
privileges do you have the right appeals

1083
00:53:52,859 --> 00:53:54,960
in place in order to prevent this our

1084
00:53:54,960 --> 00:53:57,030
range can now give you that because our

1085
00:53:57,030 --> 00:53:59,819
range basically gives you the benchmark

1086
00:53:59,819 --> 00:54:03,540
where to apply this defense procedures

1087
00:54:03,540 --> 00:54:05,670
where to apply these defense measures

1088
00:54:05,670 --> 00:54:08,130
that apply only to your organization so

1089
00:54:08,130 --> 00:54:10,040
this is important for your understand

1090
00:54:10,040 --> 00:54:12,450
that it's almost like we're giving you

1091
00:54:12,450 --> 00:54:14,579
the dough you had to make the you had to

1092
00:54:14,579 --> 00:54:16,770
make the bread you had to work on this

1093
00:54:16,770 --> 00:54:21,390
and the the the the more detail the more

1094
00:54:21,390 --> 00:54:24,059
customized you make it according to your

1095
00:54:24,059 --> 00:54:26,490
own organization that much better for

1096
00:54:26,490 --> 00:54:34,200
you in order to gauge the resilience of

1097
00:54:34,200 --> 00:54:38,819
your organization so in some cases for

1098
00:54:38,819 --> 00:54:40,530
example this also may help for the fruit

1099
00:54:40,530 --> 00:54:43,400
I had have some analysts that I have

1100
00:54:43,400 --> 00:54:45,540
there are certain environments for

1101
00:54:45,540 --> 00:54:47,640
example that you cannot pen test or they

1102
00:54:47,640 --> 00:54:51,030
you cannot use specific attacks in this

1103
00:54:51,030 --> 00:54:54,569
type of environments if this type of

1104
00:54:54,569 --> 00:54:58,170
tools come in handy because yeah you

1105
00:54:58,170 --> 00:54:59,880
cannot attack them but you could

1106
00:54:59,880 --> 00:55:02,130
simulate the closest you can so this is

1107
00:55:02,130 --> 00:55:06,290
a great tool for blue teamers next up

1108
00:55:06,290 --> 00:55:09,630
and then right before we go into the

1109
00:55:09,630 --> 00:55:12,960
hands-on stuff it is important for us to

1110
00:55:12,960 --> 00:55:15,720
disclose to you that a visceral

1111
00:55:15,720 --> 00:55:17,579
simulation does not prevents your lace

1112
00:55:17,579 --> 00:55:20,490
would remember we're replicating stuff

1113
00:55:20,490 --> 00:55:22,950
that's already published we are

1114
00:55:22,950 --> 00:55:27,750
replicating stuff that is available this

1115
00:55:27,750 --> 00:55:30,599
however if you get for example an

1116
00:55:30,599 --> 00:55:32,520
exploit for exploit Aveda you can

1117
00:55:32,520 --> 00:55:35,010
download for example or you can op the

1118
00:55:35,010 --> 00:55:37,619
Metasploit via colleague you can test

1119
00:55:37,619 --> 00:55:38,760
right away

1120
00:55:38,760 --> 00:55:40,710
something that's been published and you

1121
00:55:40,710 --> 00:55:42,540
can also do exploitive element as well

1122
00:55:42,540 --> 00:55:44,880
if you had that sort of capability that

1123
00:55:44,880 --> 00:55:47,370
sort of knowledge or skills in your

1124
00:55:47,370 --> 00:55:50,430
environment this does not replace pen

1125
00:55:50,430 --> 00:55:52,560
testing or Bhagavan T or red teaming is

1126
00:55:52,560 --> 00:55:55,050
it's an additional tool that you can use

1127
00:55:55,050 --> 00:55:57,900
and it would definitely if I want in my

1128
00:55:57,900 --> 00:56:01,800
years of blue teaming this is this is

1129
00:56:01,800 --> 00:56:05,220
this was very important because if you

1130
00:56:05,220 --> 00:56:07,110
don't have the resources you cannot have

1131
00:56:07,110 --> 00:56:09,170
a pen test you don't have these skills

1132
00:56:09,170 --> 00:56:11,990
this will give you a little bit of a

1133
00:56:11,990 --> 00:56:15,240
visibility of what will happen and of

1134
00:56:15,240 --> 00:56:18,450
course remember this many times if you

1135
00:56:18,450 --> 00:56:22,650
turn off your EB Rav you know the this

1136
00:56:22,650 --> 00:56:26,280
this is an accuracy question of accuracy

1137
00:56:26,280 --> 00:56:29,730
how accurate this is because many times

1138
00:56:29,730 --> 00:56:32,040
because I'm sure many of you heard the

1139
00:56:32,040 --> 00:56:36,120
word golden immature said well my golden

1140
00:56:36,120 --> 00:56:39,030
image has ground strike or it has Damian

1141
00:56:39,030 --> 00:56:42,030
or it has carbon black okay well

1142
00:56:42,030 --> 00:56:44,160
sometimes you may have to turn this off

1143
00:56:44,160 --> 00:56:46,560
in order to see the extent of damage so

1144
00:56:46,560 --> 00:56:48,630
this this is something that actually

1145
00:56:48,630 --> 00:56:50,790
question the the other side of

1146
00:56:50,790 --> 00:56:54,290
replication tools and again these tools

1147
00:56:54,290 --> 00:56:56,940
partially depict sophisticated adversary

1148
00:56:56,940 --> 00:56:58,650
actions this is not the entire picture

1149
00:56:58,650 --> 00:57:02,520
this is simply an additional tool it's

1150
00:57:02,520 --> 00:57:08,160
the next up okay so included adversary

1151
00:57:08,160 --> 00:57:10,050
simulation engines we have Coderre

1152
00:57:10,050 --> 00:57:13,830
Kadare developed by mike ER and we will

1153
00:57:13,830 --> 00:57:16,080
see in a minute how to use choleric

1154
00:57:16,080 --> 00:57:20,700
Adara has a an agent this agent is

1155
00:57:20,700 --> 00:57:23,820
installed at the host and then you have

1156
00:57:23,820 --> 00:57:26,010
to choose a number of profiles to

1157
00:57:26,010 --> 00:57:30,530
execute and then you get results next up

1158
00:57:32,790 --> 00:57:36,570
and we included atomic Red Team atomic

1159
00:57:36,570 --> 00:57:38,160
Red Team has recalled the atomic

1160
00:57:38,160 --> 00:57:41,340
stomachs are basically replication

1161
00:57:41,340 --> 00:57:47,960
heavily heavily employed based TTP's

1162
00:57:47,960 --> 00:57:51,750
which is our base on the iron actually

1163
00:57:51,750 --> 00:57:54,330
categorized with a miter attack

1164
00:57:54,330 --> 00:57:57,440
framework so if you if you for example

1165
00:57:57,440 --> 00:58:01,050
are within an organization that will

1166
00:58:01,050 --> 00:58:03,770
tell you hey I need you to give me a

1167
00:58:03,770 --> 00:58:06,150
report how we will do if the following

1168
00:58:06,150 --> 00:58:08,640
techniques are performing against us

1169
00:58:08,640 --> 00:58:12,170
this is a great reference this is a

1170
00:58:12,170 --> 00:58:18,630
pretty easy to test and to record and

1171
00:58:18,630 --> 00:58:24,990
analyze and sir so here's I was

1172
00:58:24,990 --> 00:58:27,150
mentioning that the the mica attack

1173
00:58:27,150 --> 00:58:29,240
framework keeps expanding and expanding

1174
00:58:29,240 --> 00:58:32,340
obviously we we can't possibly think

1175
00:58:32,340 --> 00:58:34,980
that we can include the entire universe

1176
00:58:34,980 --> 00:58:37,710
of attacks and once I always tell people

1177
00:58:37,710 --> 00:58:40,230
that once they an attack has been

1178
00:58:40,230 --> 00:58:43,200
recorded categorized and named and

1179
00:58:43,200 --> 00:58:45,240
likely will not be repeated by this

1180
00:58:45,240 --> 00:58:47,400
thing they're saying either because

1181
00:58:47,400 --> 00:58:48,930
obviously what would you what would you

1182
00:58:48,930 --> 00:58:50,850
do that you will get caught but that's

1183
00:58:50,850 --> 00:58:54,290
that doesn't mean we cannot learn from

1184
00:58:54,290 --> 00:58:56,730
this techniques that doesn't mean we

1185
00:58:56,730 --> 00:58:59,370
cannot have an idea of what they have

1186
00:58:59,370 --> 00:59:01,980
tried to do and be prepared for it so

1187
00:59:01,980 --> 00:59:07,680
next up alright so here's what we're

1188
00:59:07,680 --> 00:59:11,340
gonna we're gonna give you a a run on

1189
00:59:11,340 --> 00:59:14,460
the actually how to build it run it

1190
00:59:14,460 --> 00:59:18,630
we're gonna show four to basically hand

1191
00:59:18,630 --> 00:59:22,050
and hold it how to do how you operate it

1192
00:59:22,050 --> 00:59:23,790
and then we're going to go into the real

1193
00:59:23,790 --> 00:59:28,580
deal so what we want to show now is

1194
00:59:28,580 --> 00:59:31,320
you're gonna build it you're not

1195
00:59:31,320 --> 00:59:32,580
performing at that simulation we're

1196
00:59:32,580 --> 00:59:34,020
going to search it we're going to

1197
00:59:34,020 --> 00:59:34,830
destroy it

1198
00:59:34,830 --> 00:59:38,070
or you can stop at a resume it so let's

1199
00:59:38,070 --> 00:59:42,760
go ahead and next so here's

1200
00:59:42,760 --> 00:59:46,270
the commands I'm gonna pass for a second

1201
00:59:46,270 --> 00:59:49,060
these are the commands the basic command

1202
00:59:49,060 --> 00:59:52,390
that you need you can always and Jose

1203
00:59:52,390 --> 00:59:55,690
will probably will go over it in a

1204
00:59:55,690 --> 00:59:56,200
minute

1205
00:59:56,200 --> 00:59:59,140
you always obviously remember you you

1206
00:59:59,140 --> 01:00:04,240
clone it you you build the virtual

1207
01:00:04,240 --> 01:00:07,540
environment Python 3 it's applicable you

1208
01:00:07,540 --> 01:00:10,839
execute it get your libraries get your

1209
01:00:10,839 --> 01:00:17,680
binaries modify your comms use the mode

1210
01:00:17,680 --> 01:00:21,790
terraform a cloud or use bacon is local

1211
01:00:21,790 --> 01:00:24,790
and then basically what you're gonna do

1212
01:00:24,790 --> 01:00:27,130
is execute the attack underscore rage

1213
01:00:27,130 --> 01:00:30,700
the pie and that you have to tell it

1214
01:00:30,700 --> 01:00:34,540
okay if I'm using a local then the mode

1215
01:00:34,540 --> 01:00:37,780
or dash M will be Begaren if I'm using

1216
01:00:37,780 --> 01:00:41,530
the cloud the mode will be terraform

1217
01:00:41,530 --> 01:00:43,450
right so the first command that you're

1218
01:00:43,450 --> 01:00:46,420
seeing there is how to build it the

1219
01:00:46,420 --> 01:00:49,420
second command and this is also very

1220
01:00:49,420 --> 01:00:52,260
important because usually you know it's

1221
01:00:52,260 --> 01:00:54,339
exciting to be able dis but it's also

1222
01:00:54,339 --> 01:00:57,700
quadrants tested you had to do the the

1223
01:00:57,700 --> 01:00:59,770
sequence the appropriate sequence which

1224
01:00:59,770 --> 01:01:01,300
is basically you have to tell that okay

1225
01:01:01,300 --> 01:01:03,339
well more am i using my using the cloud

1226
01:01:03,339 --> 01:01:06,069
am i using local and then in action

1227
01:01:06,069 --> 01:01:08,410
that's a what am i doing and by building

1228
01:01:08,410 --> 01:01:11,470
it am i destroying it or am i simulating

1229
01:01:11,470 --> 01:01:14,020
so in this case if i'm performing a

1230
01:01:14,020 --> 01:01:16,599
simulation with attach a simulate and

1231
01:01:16,599 --> 01:01:18,250
then SD which is the simulation

1232
01:01:18,250 --> 01:01:20,770
technique and it will give you then you

1233
01:01:20,770 --> 01:01:23,829
can place the remember one we were

1234
01:01:23,829 --> 01:01:28,390
looking at at the miter attack matrix

1235
01:01:28,390 --> 01:01:31,300
you can actually pick up numbers from

1236
01:01:31,300 --> 01:01:32,770
there not all of them there's some

1237
01:01:32,770 --> 01:01:34,510
there's there isn't a specific number of

1238
01:01:34,510 --> 01:01:36,480
Atomics they don't reproduce the entire

1239
01:01:36,480 --> 01:01:40,780
gamut of the my craft had put a lot of

1240
01:01:40,780 --> 01:01:42,099
them i have to say the coverage is

1241
01:01:42,099 --> 01:01:44,440
pretty good for it for to get you

1242
01:01:44,440 --> 01:01:46,540
started and then finally you need to

1243
01:01:46,540 --> 01:01:48,730
tell the attacker did the target sorry

1244
01:01:48,730 --> 01:01:51,339
that the target will show once you

1245
01:01:51,339 --> 01:01:53,680
finish building and i will show you that

1246
01:01:53,680 --> 01:01:55,240
in a second

1247
01:01:55,240 --> 01:01:58,030
once you finish building the attack rage

1248
01:01:58,030 --> 01:02:00,340
environment there will be a printout

1249
01:02:00,340 --> 01:02:02,200
that tells you the name of the machine

1250
01:02:02,200 --> 01:02:04,750
and their IP address so you're ready to

1251
01:02:04,750 --> 01:02:06,030
interact with it

1252
01:02:06,030 --> 01:02:09,100
Jose I'm not sure if you wanna chime on

1253
01:02:09,100 --> 01:02:13,980
this one or yeah yeah definitely uh so I

1254
01:02:13,980 --> 01:02:17,920
know this court but the the goes at the

1255
01:02:17,920 --> 01:02:20,740
end there so I'll walk everyone through

1256
01:02:20,740 --> 01:02:22,960
building one from scratch I'm an

1257
01:02:22,960 --> 01:02:31,270
environment and looks like we had

1258
01:02:31,270 --> 01:02:35,619
another issue with Lucas but that's fine

1259
01:02:35,619 --> 01:02:37,630
I can I can pick it up with it don't

1260
01:02:37,630 --> 01:02:39,040
worry about it we're gonna we're gonna

1261
01:02:39,040 --> 01:02:41,590
want to walk you through this and we're

1262
01:02:41,590 --> 01:02:48,310
gonna make sure that we cover the the

1263
01:02:48,310 --> 01:02:50,770
what you need to know in order to build

1264
01:02:50,770 --> 01:02:54,730
it from the scratch and operate on it

1265
01:02:54,730 --> 01:02:58,630
let's see so the other two things that

1266
01:02:58,630 --> 01:03:01,119
are important what we gave hostess I'm

1267
01:03:01,119 --> 01:03:04,590
trying to come back is you want to

1268
01:03:04,590 --> 01:03:07,270
destroy it if you are and I'm telling

1269
01:03:07,270 --> 01:03:10,150
you this this is this is if this is a

1270
01:03:10,150 --> 01:03:11,830
terraform for example if you're in a

1271
01:03:11,830 --> 01:03:13,600
company and you know you're a tight

1272
01:03:13,600 --> 01:03:16,660
budget and you know it may cost a little

1273
01:03:16,660 --> 01:03:20,280
bit if you leave a domain controller a

1274
01:03:20,280 --> 01:03:23,830
window server a claw machine Windows

1275
01:03:23,830 --> 01:03:27,040
client for a month or so they make you

1276
01:03:27,040 --> 01:03:29,830
know may cost a lot of money so you want

1277
01:03:29,830 --> 01:03:32,710
to destroy it and in order to destroy it

1278
01:03:32,710 --> 01:03:36,670
you had to go into you had to execute

1279
01:03:36,670 --> 01:03:41,680
Python attack on this core range the PI

1280
01:03:41,680 --> 01:03:48,670
and hola looks like he's you can you

1281
01:03:48,670 --> 01:03:54,130
hear me Jose yeah okay cool cool okay so

1282
01:03:54,130 --> 01:03:57,100
I was actually going through the other

1283
01:03:57,100 --> 01:03:58,930
process of destroying it and how it is

1284
01:03:58,930 --> 01:04:01,090
important to understand it that when you

1285
01:04:01,090 --> 01:04:04,570
are in the cloud and because there are

1286
01:04:04,570 --> 01:04:06,040
also one of the things that you can

1287
01:04:06,040 --> 01:04:08,140
modify by the way is where are you

1288
01:04:08,140 --> 01:04:09,160
downloading

1289
01:04:09,160 --> 01:04:11,200
is Oh sperm so as long as these things

1290
01:04:11,200 --> 01:04:13,420
are ecstatic you people you who always

1291
01:04:13,420 --> 01:04:16,000
would build them anytime you want and I

1292
01:04:16,000 --> 01:04:17,829
there's one thing also that it's at

1293
01:04:17,829 --> 01:04:20,530
least Richard I can tell you there might

1294
01:04:20,530 --> 01:04:23,559
be issues with licensing depending on

1295
01:04:23,559 --> 01:04:25,740
why you are loading to the cloud and

1296
01:04:25,740 --> 01:04:29,460
also I know it's not easy at times

1297
01:04:29,460 --> 01:04:33,069
usually when you are doing exploitation

1298
01:04:33,069 --> 01:04:37,270
research you you may want to work with

1299
01:04:37,270 --> 01:04:40,270
vulnerable machines and there are a lot

1300
01:04:40,270 --> 01:04:44,849
of scanners and there are mitigation I

1301
01:04:44,849 --> 01:04:48,549
guess technologies in place that and may

1302
01:04:48,549 --> 01:04:50,470
not allow you to do that you may want to

1303
01:04:50,470 --> 01:04:54,990
do that locally not sure if you want to

1304
01:04:54,990 --> 01:05:01,450
chime in now hoser yeah yeah so again

1305
01:05:01,450 --> 01:05:02,829
probably wanna end up building these

1306
01:05:02,829 --> 01:05:05,500
things locally if you're your own

1307
01:05:05,500 --> 01:05:07,359
interesting specific like like one

1308
01:05:07,359 --> 01:05:11,109
specific guitar and two rods point if

1309
01:05:11,109 --> 01:05:15,539
also when you when you built this on on

1310
01:05:15,539 --> 01:05:19,029
AWS what the attack I'm just gonna doing

1311
01:05:19,029 --> 01:05:21,730
is it's kind of it's gonna attach the

1312
01:05:21,730 --> 01:05:23,680
way the way knows what it builds itself

1313
01:05:23,680 --> 01:05:27,819
it's gonna attach like its name like a

1314
01:05:27,819 --> 01:05:31,059
tank attack range something and and your

1315
01:05:31,059 --> 01:05:32,410
bacon key right so the name of the

1316
01:05:32,410 --> 01:05:34,750
instance bro so big Europe's are you SSH

1317
01:05:34,750 --> 01:05:39,339
SSH key is what what if filter spy when

1318
01:05:39,339 --> 01:05:41,410
when it lists what servers are available

1319
01:05:41,410 --> 01:05:43,390
and also when you go destroy because

1320
01:05:43,390 --> 01:05:44,500
it's using Seraphim of the hood is gonna

1321
01:05:44,500 --> 01:05:46,150
have a really good it's it's gonna know

1322
01:05:46,150 --> 01:05:48,670
what state your environment is built on

1323
01:05:48,670 --> 01:05:49,900
this so it knows exactly what's the

1324
01:05:49,900 --> 01:05:52,450
story afterwards and essentially when

1325
01:05:52,450 --> 01:05:53,349
you take it when you destroy you

1326
01:05:53,349 --> 01:05:55,779
basically cleans out everything when the

1327
01:05:55,779 --> 01:05:57,700
range is building on terraform its

1328
01:05:57,700 --> 01:05:59,980
building on its own V PC so it doesn't

1329
01:05:59,980 --> 01:06:01,240
really it will never conflict with

1330
01:06:01,240 --> 01:06:02,440
whatever you have running also in your

1331
01:06:02,440 --> 01:06:04,450
account makes it really really easy to

1332
01:06:04,450 --> 01:06:07,329
run like a again free running some other

1333
01:06:07,329 --> 01:06:08,260
application mean this is your own

1334
01:06:08,260 --> 01:06:09,970
personal WS are using even your

1335
01:06:09,970 --> 01:06:12,400
company's AWS account you don't have to

1336
01:06:12,400 --> 01:06:13,779
create an account to run the range it's

1337
01:06:13,779 --> 01:06:15,609
it's gonna run everything its own unique

1338
01:06:15,609 --> 01:06:18,099
separate V PC with its own subnets its

1339
01:06:18,099 --> 01:06:21,359
own a route gateway so on and so forth

1340
01:06:21,359 --> 01:06:22,510
which

1341
01:06:22,510 --> 01:06:24,610
is pretty convenient because that if

1342
01:06:24,610 --> 01:06:27,370
you're near route to cloud environment

1343
01:06:27,370 --> 01:06:30,550
this is a it can be a pain to configure

1344
01:06:30,550 --> 01:06:31,960
of this it would take you some time to

1345
01:06:31,960 --> 01:06:35,980
get there no honesty let's move on

1346
01:06:35,980 --> 01:06:42,660
please okay so this is what I what I had

1347
01:06:42,660 --> 01:06:45,280
mentioned before this is what you would

1348
01:06:45,280 --> 01:06:48,100
see and now we're we're finally entering

1349
01:06:48,100 --> 01:06:50,230
on the walk through before we get them

1350
01:06:50,230 --> 01:06:51,730
the of the hand so on and we'll give you

1351
01:06:51,730 --> 01:06:54,790
the SSH keys and you go away and play

1352
01:06:54,790 --> 01:06:59,610
with it so what you see below is the

1353
01:06:59,610 --> 01:07:02,560
command that I used to build it and what

1354
01:07:02,560 --> 01:07:06,310
you see on top is the last print out the

1355
01:07:06,310 --> 01:07:08,260
last print out basically says you have

1356
01:07:08,260 --> 01:07:10,540
this ec2 obviously we're using Amazon

1357
01:07:10,540 --> 01:07:13,990
ec2 and this is what you have in this

1358
01:07:13,990 --> 01:07:17,860
case I configure a colleague I configure

1359
01:07:17,860 --> 01:07:20,890
a Splunk server which is where caldera

1360
01:07:20,890 --> 01:07:24,040
is by the way a bore eight eight eight

1361
01:07:24,040 --> 01:07:27,580
eight and then I configure a Windows

1362
01:07:27,580 --> 01:07:29,920
domain controller if you look on the

1363
01:07:29,920 --> 01:07:31,810
right you see the status and you most

1364
01:07:31,810 --> 01:07:35,560
importantly you you see the ideas at one

1365
01:07:35,560 --> 01:07:37,510
point you may want to access this things

1366
01:07:37,510 --> 01:07:46,860
right so next please here's a simulation

1367
01:07:46,860 --> 01:07:48,850
remember what I told you about the

1368
01:07:48,850 --> 01:07:51,400
target machines there were you have the

1369
01:07:51,400 --> 01:07:53,650
name remember remember the last screen

1370
01:07:53,650 --> 01:07:55,690
shot I show you because those are the

1371
01:07:55,690 --> 01:07:57,460
names of your machines unless you decide

1372
01:07:57,460 --> 01:08:00,490
of changing those are the names of your

1373
01:08:00,490 --> 01:08:03,010
machines so when you when you look at

1374
01:08:03,010 --> 01:08:03,850
that printout

1375
01:08:03,850 --> 01:08:06,160
you may have to make a mental note of

1376
01:08:06,160 --> 01:08:09,580
the IP addresses and the names so when

1377
01:08:09,580 --> 01:08:11,830
you perform the simulation you will know

1378
01:08:11,830 --> 01:08:14,500
the target that you're performing it

1379
01:08:14,500 --> 01:08:18,609
against so as we said before in the in

1380
01:08:18,609 --> 01:08:23,920
the actual following the wiki you

1381
01:08:23,920 --> 01:08:27,009
basically had to execute attack attack

1382
01:08:27,009 --> 01:08:29,380
on the score range the PI in this case

1383
01:08:29,380 --> 01:08:33,339
the mold is terraform the action is to

1384
01:08:33,339 --> 01:08:36,310
simulate and the target in this case

1385
01:08:36,310 --> 01:08:39,250
the domain controller and then the

1386
01:08:39,250 --> 01:08:45,130
simulation technique is t10 103 which is

1387
01:08:45,130 --> 01:08:49,240
credential dumping also you can also if

1388
01:08:49,240 --> 01:08:51,250
in case because what happens sometimes

1389
01:08:51,250 --> 01:08:52,720
when you're doing all this attacks you

1390
01:08:52,720 --> 01:08:54,460
get you get this very large pronounced

1391
01:08:54,460 --> 01:08:57,760
if you do Python space attack on the

1392
01:08:57,760 --> 01:09:02,979
score range the pie space - LM will give

1393
01:09:02,979 --> 01:09:05,080
you all the lists of machines again so

1394
01:09:05,080 --> 01:09:07,569
we'll listing them then the idea vs. and

1395
01:09:07,569 --> 01:09:10,149
then the name of the machines is you can

1396
01:09:10,149 --> 01:09:13,689
see in this printout we have been able

1397
01:09:13,689 --> 01:09:20,950
to successfully execute T 1003 and it

1398
01:09:20,950 --> 01:09:24,910
tells you what host you can see it below

1399
01:09:24,910 --> 01:09:28,149
it tells you yeah I executed an atomic

1400
01:09:28,149 --> 01:09:32,220
regime and that is the actual result

1401
01:09:32,220 --> 01:09:35,340
next up

1402
01:09:36,210 --> 01:09:41,939
and now the nice part of this which is

1403
01:09:41,939 --> 01:09:47,050
we have where our team has done an

1404
01:09:47,050 --> 01:09:49,750
amazing job building - force so

1405
01:09:49,750 --> 01:09:52,060
basically it would tell you exactly what

1406
01:09:52,060 --> 01:09:54,850
simulations have you run what type of

1407
01:09:54,850 --> 01:09:59,850
techniques have your on and then you can

1408
01:09:59,850 --> 01:10:02,800
delve into this you can actually look at

1409
01:10:02,800 --> 01:10:05,070
the interest I previously mentioned and

1410
01:10:05,070 --> 01:10:08,080
actually found the data from the attacks

1411
01:10:08,080 --> 01:10:09,760
that you executed so what we're looking

1412
01:10:09,760 --> 01:10:13,990
at right there is a standard dashboard

1413
01:10:13,990 --> 01:10:15,610
that you're gonna get once you build the

1414
01:10:15,610 --> 01:10:17,100
attack by H remember it's balanc

1415
01:10:17,100 --> 01:10:20,650
this one were where the your downloader

1416
01:10:20,650 --> 01:10:22,920
is free you have to pay for any of this

1417
01:10:22,920 --> 01:10:28,120
and you have included with it you have a

1418
01:10:28,120 --> 01:10:30,850
sx you have stream you have security

1419
01:10:30,850 --> 01:10:33,280
essentials you have ES content updates

1420
01:10:33,280 --> 01:10:35,320
the attack rates reporting which is what

1421
01:10:35,320 --> 01:10:36,460
we're looking at and of course is

1422
01:10:36,460 --> 01:10:38,530
searching reporting not sure if Jose

1423
01:10:38,530 --> 01:10:40,360
wants to talk a little bit about AES X

1424
01:10:40,360 --> 01:10:43,930
but this is what you'll be looking at

1425
01:10:43,930 --> 01:10:48,430
once you start executing attacks that's

1426
01:10:48,430 --> 01:10:50,610
up

1427
01:10:51,620 --> 01:10:57,750
there is now that we have executed at

1428
01:10:57,750 --> 01:11:03,300
the command line based the atomic now we

1429
01:11:03,300 --> 01:11:04,920
can take a look what you're looking at

1430
01:11:04,920 --> 01:11:09,120
here is a table that is under that

1431
01:11:09,120 --> 01:11:11,940
dashboard that you just saw so in this

1432
01:11:11,940 --> 01:11:14,550
table you have the atomic test that was

1433
01:11:14,550 --> 01:11:17,550
performed as you can see it was a power

1434
01:11:17,550 --> 01:11:21,080
show me McCants and G sector on the

1435
01:11:21,080 --> 01:11:23,660
right side of it is the hostname

1436
01:11:23,660 --> 01:11:25,710
remember that we build a domain

1437
01:11:25,710 --> 01:11:28,050
controller right so we're putting all

1438
01:11:28,050 --> 01:11:31,980
together now the miter ID which is T

1439
01:11:31,980 --> 01:11:34,770
1003 is we knew it was credential

1440
01:11:34,770 --> 01:11:37,260
dumping he tells you exactly where we

1441
01:11:37,260 --> 01:11:39,989
got this from he tell you that he tells

1442
01:11:39,989 --> 01:11:42,630
you the tactic credential axis the

1443
01:11:42,630 --> 01:11:45,270
technique and then the test name so that

1444
01:11:45,270 --> 01:11:47,489
way you have a reference okay this is

1445
01:11:47,489 --> 01:11:51,150
these are the things I had tested so we

1446
01:11:51,150 --> 01:11:56,970
go from a execute the attack to B which

1447
01:11:56,970 --> 01:11:59,460
is okay what I execute it what is it

1448
01:11:59,460 --> 01:12:02,000
record it and and we can build even more

1449
01:12:02,000 --> 01:12:09,540
next up we can even look remember

1450
01:12:09,540 --> 01:12:11,850
remember the the indexes I mentioned at

1451
01:12:11,850 --> 01:12:15,450
one point look at this you can go in the

1452
01:12:15,450 --> 01:12:18,330
index and he we told you what the

1453
01:12:18,330 --> 01:12:20,400
technique the technique was there was a

1454
01:12:20,400 --> 01:12:22,410
security and the event tells you the

1455
01:12:22,410 --> 01:12:24,480
time that it was executed the holes that

1456
01:12:24,480 --> 01:12:27,560
was executed this the the specific

1457
01:12:27,560 --> 01:12:30,540
attack that was done and the number of

1458
01:12:30,540 --> 01:12:32,489
times that it was done so this is for an

1459
01:12:32,489 --> 01:12:34,080
analyst if you're if you're trying to

1460
01:12:34,080 --> 01:12:35,400
produce a report or how we're doing

1461
01:12:35,400 --> 01:12:37,890
against there let's say you try to

1462
01:12:37,890 --> 01:12:41,300
choose a column within the attack matrix

1463
01:12:41,300 --> 01:12:44,540
for my gir this makes it way easier

1464
01:12:44,540 --> 01:12:52,080
netra all right so we're gonna go back

1465
01:12:52,080 --> 01:12:54,000
this plunk in a little man in a little

1466
01:12:54,000 --> 01:12:56,130
bit but I wanted to show you a little

1467
01:12:56,130 --> 01:12:58,560
bit also of the framework that we

1468
01:12:58,560 --> 01:13:01,130
include that you already sold the attack

1469
01:13:01,130 --> 01:13:03,059
atomic protein

1470
01:13:03,059 --> 01:13:05,909
it's by the phone included in it but we

1471
01:13:05,909 --> 01:13:07,800
also have by the phone

1472
01:13:07,800 --> 01:13:09,920
cold air cold air it's obviously

1473
01:13:09,920 --> 01:13:11,940
developed by Michael they are the

1474
01:13:11,940 --> 01:13:15,679
original creators of this nomenclature

1475
01:13:15,679 --> 01:13:18,239
along obviously we have consensus in the

1476
01:13:18,239 --> 01:13:21,270
industry but but basically this is what

1477
01:13:21,270 --> 01:13:24,239
we are following nowadays and I wanted

1478
01:13:24,239 --> 01:13:28,050
to give you a little view of how to use

1479
01:13:28,050 --> 01:13:31,530
code era when you install the

1480
01:13:31,530 --> 01:13:36,809
environment automatically the the there

1481
01:13:36,809 --> 01:13:39,360
would be a caldera agent at the host

1482
01:13:39,360 --> 01:13:41,969
that you choose to bill so a way I'm

1483
01:13:41,969 --> 01:13:47,969
showing you there is a an agent look how

1484
01:13:47,969 --> 01:13:50,400
it tells you what the hostess write this

1485
01:13:50,400 --> 01:13:53,659
is the host when they win - TC remember

1486
01:13:53,659 --> 01:13:58,230
we specify all this before we build it

1487
01:13:58,230 --> 01:14:00,270
so this is important this is why we

1488
01:14:00,270 --> 01:14:04,590
decided to go from A to Z showing you

1489
01:14:04,590 --> 01:14:07,909
step by step and you can you can have

1490
01:14:07,909 --> 01:14:11,550
your c2 connection by a HTTP or TCP in

1491
01:14:11,550 --> 01:14:15,690
this case this is TCP it tells you what

1492
01:14:15,690 --> 01:14:17,880
type of privilege the aging is running

1493
01:14:17,880 --> 01:14:19,440
at this is important if you're doing

1494
01:14:19,440 --> 01:14:23,699
test obviously and the PID the process

1495
01:14:23,699 --> 01:14:24,030
ID

1496
01:14:24,030 --> 01:14:31,170
next up so now that I have my agent

1497
01:14:31,170 --> 01:14:33,539
running remember you cannot wrong tool

1498
01:14:33,539 --> 01:14:35,789
there if you don't have an agent at the

1499
01:14:35,789 --> 01:14:37,829
host you have you need to have an agent

1500
01:14:37,829 --> 01:14:38,280
at the host

1501
01:14:38,280 --> 01:14:42,510
sometimes that refer to this attack

1502
01:14:42,510 --> 01:14:44,639
simulation frameworks they remind me of

1503
01:14:44,639 --> 01:14:48,869
all school banking Trojans like a spy or

1504
01:14:48,869 --> 01:14:52,409
Sue's or or Andrew rad stuff like that

1505
01:14:52,409 --> 01:14:55,440
it's basically you have a c2 panel and

1506
01:14:55,440 --> 01:14:56,639
then you have an agent and then your

1507
01:14:56,639 --> 01:14:58,949
execute actions on it so in this case

1508
01:14:58,949 --> 01:15:02,520
we're doing this in a in a much more I

1509
01:15:02,520 --> 01:15:08,460
guess defensive focus way so so in this

1510
01:15:08,460 --> 01:15:11,329
case it for you to basically apply this

1511
01:15:11,329 --> 01:15:15,289
first they got repeat you had to have a

1512
01:15:15,289 --> 01:15:16,449
agent

1513
01:15:16,449 --> 01:15:18,790
add the hopes that you decided to bill

1514
01:15:18,790 --> 01:15:21,580
when you modify attack on the score

1515
01:15:21,580 --> 01:15:24,810
ratio calm then then once you login into

1516
01:15:24,810 --> 01:15:26,070
cólera

1517
01:15:26,070 --> 01:15:29,590
which is the same IP address of this

1518
01:15:29,590 --> 01:15:32,980
block server but the port instead of

1519
01:15:32,980 --> 01:15:35,350
being 8,000 that's the poor for Splunk

1520
01:15:35,350 --> 01:15:38,590
8,000 the port for caldera is eight

1521
01:15:38,590 --> 01:15:40,900
eight eight eight so once you want to

1522
01:15:40,900 --> 01:15:43,210
log in and you check out that your agent

1523
01:15:43,210 --> 01:15:45,580
is working if the agent is not working

1524
01:15:45,580 --> 01:15:47,230
you will see that you see it and read

1525
01:15:47,230 --> 01:15:49,540
the PID will show him red so that means

1526
01:15:49,540 --> 01:15:53,290
you may probably had to reinstall the

1527
01:15:53,290 --> 01:15:56,679
agent or deploy another agent and the

1528
01:15:56,679 --> 01:16:00,070
way to do that is basically if you look

1529
01:16:00,070 --> 01:16:02,290
at the menu basically it will give you a

1530
01:16:02,290 --> 01:16:04,420
code and you're gonna have to access

1531
01:16:04,420 --> 01:16:08,050
directly your host so if we were to

1532
01:16:08,050 --> 01:16:09,820
access directly our host who had to

1533
01:16:09,820 --> 01:16:12,520
already be in one of the IP addresses

1534
01:16:12,520 --> 01:16:15,699
that you saw in the printer so you you

1535
01:16:15,699 --> 01:16:17,710
met you are gonna need an RDP client

1536
01:16:17,710 --> 01:16:21,070
it's a full-blown machine by the way

1537
01:16:21,070 --> 01:16:22,510
full-blown with this machine you can

1538
01:16:22,510 --> 01:16:23,890
access it you can show whatever you want

1539
01:16:23,890 --> 01:16:26,620
in it and you have to basically execute

1540
01:16:26,620 --> 01:16:30,460
their code in order to redeploy the

1541
01:16:30,460 --> 01:16:32,650
actual agent so once I have my agent

1542
01:16:32,650 --> 01:16:35,080
working now I want an adversary profile

1543
01:16:35,080 --> 01:16:38,170
this adversary of profiles will tell me

1544
01:16:38,170 --> 01:16:40,870
mmm what is it that I'm looking for

1545
01:16:40,870 --> 01:16:44,800
collection discovery a number a they

1546
01:16:44,800 --> 01:16:48,699
have several applicable profiles of

1547
01:16:48,699 --> 01:16:51,429
actions of abilities they call it

1548
01:16:51,429 --> 01:16:54,130
abilities that you can execute on the

1549
01:16:54,130 --> 01:16:57,160
host ones you have a running agent and

1550
01:16:57,160 --> 01:17:03,449
this is the an example of it next up in

1551
01:17:03,449 --> 01:17:06,790
this case I decided to use the discovery

1552
01:17:06,790 --> 01:17:09,699
profile and what you're about to see

1553
01:17:09,699 --> 01:17:15,420
here is basically me executing a

1554
01:17:15,420 --> 01:17:17,800
discovery profile of actions on a

1555
01:17:17,800 --> 01:17:20,170
Windows host this Windows host as you

1556
01:17:20,170 --> 01:17:23,739
know is the wind that's DC and then I

1557
01:17:23,739 --> 01:17:26,739
name my test so once you execute it as

1558
01:17:26,739 --> 01:17:30,250
you can see on the right it goes by

1559
01:17:30,250 --> 01:17:32,170
time and it tells you exactly what is

1560
01:17:32,170 --> 01:17:34,750
using you can see what things have been

1561
01:17:34,750 --> 01:17:38,080
on green have been identified for a

1562
01:17:38,080 --> 01:17:40,450
simple identify local users identify a

1563
01:17:40,450 --> 01:17:42,610
active user so the green ones are the

1564
01:17:42,610 --> 01:17:45,220
things that was able to be we're able to

1565
01:17:45,220 --> 01:17:48,070
be achieved and the other ones I were

1566
01:17:48,070 --> 01:17:53,320
not right so in the top part you have

1567
01:17:53,320 --> 01:17:56,050
the percentage of the entire simulation

1568
01:17:56,050 --> 01:17:58,120
so it tells you okay these are the

1569
01:17:58,120 --> 01:17:59,790
actions that I'm performing and this is

1570
01:17:59,790 --> 01:18:02,980
the how long I had to go in order to

1571
01:18:02,980 --> 01:18:04,360
complete it to say it in a certain way

1572
01:18:04,360 --> 01:18:13,180
so next up and then this is this is a

1573
01:18:13,180 --> 01:18:15,820
little better they extra work but you

1574
01:18:15,820 --> 01:18:17,160
can do this as well

1575
01:18:17,160 --> 01:18:21,070
once you if we can go back for a second

1576
01:18:21,070 --> 01:18:24,719
to the last slide please

1577
01:18:25,440 --> 01:18:29,830
if you look on to the left menu at one

1578
01:18:29,830 --> 01:18:34,030
point once you finish and depending on

1579
01:18:34,030 --> 01:18:36,100
the settings say you have you you can

1580
01:18:36,100 --> 01:18:40,390
download the report the report uh you

1581
01:18:40,390 --> 01:18:42,250
see the there's a green icon there and

1582
01:18:42,250 --> 01:18:44,200
once you download the report the report

1583
01:18:44,200 --> 01:18:47,800
would be a CSV file so now we can move

1584
01:18:47,800 --> 01:18:52,090
on to the next slide and as we see the

1585
01:18:52,090 --> 01:18:54,520
next line what I did is basically

1586
01:18:54,520 --> 01:18:56,530
uploaded the report we're trying to find

1587
01:18:56,530 --> 01:18:58,810
ways to automate this we had have some

1588
01:18:58,810 --> 01:19:01,750
hiccups with some of the releases from

1589
01:19:01,750 --> 01:19:04,360
from from colera they sometimes the code

1590
01:19:04,360 --> 01:19:06,790
changes and it's what you're trying to

1591
01:19:06,790 --> 01:19:10,800
figure out then pulling were the the

1592
01:19:10,800 --> 01:19:12,880
specifically with the the reporter

1593
01:19:12,880 --> 01:19:14,320
stores look at this historian memory

1594
01:19:14,320 --> 01:19:17,320
we're not able to pull it but we're

1595
01:19:17,320 --> 01:19:18,930
working on it so that way we

1596
01:19:18,930 --> 01:19:22,060
automatically import this report and

1597
01:19:22,060 --> 01:19:23,890
what what it did is that you download it

1598
01:19:23,890 --> 01:19:27,820
you go to settings add data you so spike

1599
01:19:27,820 --> 01:19:31,180
this CSV and then I basically Splunk

1600
01:19:31,180 --> 01:19:34,030
will parse it and from there I created a

1601
01:19:34,030 --> 01:19:36,630
table and then in this table you can see

1602
01:19:36,630 --> 01:19:39,040
it tells you what the privileges are if

1603
01:19:39,040 --> 01:19:39,850
you look at the left

1604
01:19:39,850 --> 01:19:42,490
this is elevated or this user it tells

1605
01:19:42,490 --> 01:19:43,850
you the platform it

1606
01:19:43,850 --> 01:19:46,580
tells you the host it tells you what was

1607
01:19:46,580 --> 01:19:50,780
done he tells you the adult detected it

1608
01:19:50,780 --> 01:19:53,900
tells you the ability name so basically

1609
01:19:53,900 --> 01:19:56,930
we have a full report or what happened

1610
01:19:56,930 --> 01:19:59,840
and he tells you look if you look to the

1611
01:19:59,840 --> 01:20:01,670
right you can see a display now you see

1612
01:20:01,670 --> 01:20:05,540
wing that's DC anti-authority system so

1613
01:20:05,540 --> 01:20:08,300
we can more we can't guys so we can get

1614
01:20:08,300 --> 01:20:09,950
more granular than this this is pretty

1615
01:20:09,950 --> 01:20:12,950
much showing you what happened and what

1616
01:20:12,950 --> 01:20:16,100
one from A to C from the the creation of

1617
01:20:16,100 --> 01:20:18,140
the environment replication or the

1618
01:20:18,140 --> 01:20:21,020
attack recording or what happened so

1619
01:20:21,020 --> 01:20:26,480
next up and of course for those who like

1620
01:20:26,480 --> 01:20:29,240
to play with exploitation you can always

1621
01:20:29,240 --> 01:20:31,520
call him so I put this for the sake of

1622
01:20:31,520 --> 01:20:33,320
it I put this so you guys can see this

1623
01:20:33,320 --> 01:20:35,350
is what you see here's me exploiting a

1624
01:20:35,350 --> 01:20:39,170
the Windows Server using Metasploit but

1625
01:20:39,170 --> 01:20:41,150
of course is the this opens the doors

1626
01:20:41,150 --> 01:20:43,490
because once you have Kali you can do

1627
01:20:43,490 --> 01:20:45,350
whatever you want you can you can stall

1628
01:20:45,350 --> 01:20:48,340
you can download you can use for example

1629
01:20:48,340 --> 01:20:50,750
I'm not sure if some of you guys

1630
01:20:50,750 --> 01:20:55,130
remember they would say a a recent

1631
01:20:55,130 --> 01:20:59,720
Windows privilege escalation exploit

1632
01:20:59,720 --> 01:21:02,600
have to do with a print process and you

1633
01:21:02,600 --> 01:21:04,970
have to store the new version of empire

1634
01:21:04,970 --> 01:21:07,910
you can do all that here you can do all

1635
01:21:07,910 --> 01:21:10,490
that here and then you can record it at

1636
01:21:10,490 --> 01:21:13,760
the at the at the sprung level video

1637
01:21:13,760 --> 01:21:15,500
corner because its audit that already by

1638
01:21:15,500 --> 01:21:18,020
assessment so there are many things the

1639
01:21:18,020 --> 01:21:21,200
the possibilities for you are quite a

1640
01:21:21,200 --> 01:21:23,270
bit expensive because now you have the

1641
01:21:23,270 --> 01:21:25,730
freedom to test all this you have to do

1642
01:21:25,730 --> 01:21:30,680
this if you're in an enterprise where

1643
01:21:30,680 --> 01:21:33,680
you there are so many constraints about

1644
01:21:33,680 --> 01:21:35,600
what you can do what you can now do this

1645
01:21:35,600 --> 01:21:38,200
is done and a private VPC in the cloud

1646
01:21:38,200 --> 01:21:41,420
the tools are there ready you had to

1647
01:21:41,420 --> 01:21:43,970
take hours and hours configuring

1648
01:21:43,970 --> 01:21:47,300
downloading stuff to this is the wonder

1649
01:21:47,300 --> 01:21:49,850
of this tool and now we can replicate a

1650
01:21:49,850 --> 01:21:55,330
tax bill exploitation test new malware

1651
01:21:55,330 --> 01:21:57,500
ransomware whatever you want

1652
01:21:57,500 --> 01:22:00,100
so I wanted to show you all the

1653
01:22:00,100 --> 01:22:03,410
possibilities that you can do with this

1654
01:22:03,410 --> 01:22:06,350
tool also and we're not touching really

1655
01:22:06,350 --> 01:22:11,930
on this today but you can actually add

1656
01:22:11,930 --> 01:22:13,850
phantom and with fountain you can

1657
01:22:13,850 --> 01:22:16,310
actually add responses to this attacks

1658
01:22:16,310 --> 01:22:17,750
that that would be something that we

1659
01:22:17,750 --> 01:22:21,890
will present in the future and I think

1660
01:22:21,890 --> 01:22:24,230
with this we're ready to go let's see

1661
01:22:24,230 --> 01:22:24,710
what's next

1662
01:22:24,710 --> 01:22:31,460
oh this I think this is my basically a

1663
01:22:31,460 --> 01:22:34,850
slide where what I just executed by the

1664
01:22:34,850 --> 01:22:38,780
way you can see I named what I created

1665
01:22:38,780 --> 01:22:41,600
the the payload when I created the

1666
01:22:41,600 --> 01:22:43,520
payload for Metasploit basically name it

1667
01:22:43,520 --> 01:22:48,740
attack range dot exe and this the there

1668
01:22:48,740 --> 01:22:52,220
is the the data that comes by a syslog I

1669
01:22:52,220 --> 01:22:55,910
did this on purpose obviously to show a

1670
01:22:55,910 --> 01:22:58,340
proof of concept that how even if you're

1671
01:22:58,340 --> 01:23:00,650
not just replicating adversarial

1672
01:23:00,650 --> 01:23:03,080
simulation techniques and you are not

1673
01:23:03,080 --> 01:23:04,520
doing your own attacks you can still

1674
01:23:04,520 --> 01:23:08,720
find the data at the name host and with

1675
01:23:08,720 --> 01:23:14,270
that I think we are left I'm so Jose

1676
01:23:14,270 --> 01:23:17,660
take it away thank you Thank You rod

1677
01:23:17,660 --> 01:23:21,410
yeah so so yeah that's let's stop

1678
01:23:21,410 --> 01:23:23,810
playing with sting I'm sure I'm sure but

1679
01:23:23,810 --> 01:23:25,970
it's excited to just get their hands on

1680
01:23:25,970 --> 01:23:28,640
it really quickly I just have three

1681
01:23:28,640 --> 01:23:32,000
three quick slides so we have some

1682
01:23:32,000 --> 01:23:34,820
pre-built lab environments and and then

1683
01:23:34,820 --> 01:23:36,560
I'm also gonna build one life here and

1684
01:23:36,560 --> 01:23:38,180
you can follow along and building it on

1685
01:23:38,180 --> 01:23:39,730
your own if you're gonna follow along

1686
01:23:39,730 --> 01:23:42,350
you're going to need an AWS account if

1687
01:23:42,350 --> 01:23:46,040
you don't have one go build one while

1688
01:23:46,040 --> 01:23:47,180
you're listening to the left please

1689
01:23:47,180 --> 01:23:49,670
slice if you can I'm sorry go sign up

1690
01:23:49,670 --> 01:23:51,680
for our but I don't really have level

1691
01:23:51,680 --> 01:23:55,010
the lab we will be providing you or will

1692
01:23:55,010 --> 01:23:56,780
be building is essentially we're gonna

1693
01:23:56,780 --> 01:23:58,940
be first building up an instance of I'm

1694
01:23:58,940 --> 01:24:00,560
calling because I'm not creative with

1695
01:24:00,560 --> 01:24:01,460
names here at the attack which

1696
01:24:01,460 --> 01:24:03,020
controller that's what we're actually

1697
01:24:03,020 --> 01:24:05,420
gonna use to build our range and control

1698
01:24:05,420 --> 01:24:07,610
it you can obviously do this on your

1699
01:24:07,610 --> 01:24:09,260
local machine if you're doing it on your

1700
01:24:09,260 --> 01:24:11,449
own the sake of the lab I

1701
01:24:11,449 --> 01:24:13,159
I just wanted everybody to jump on one

1702
01:24:13,159 --> 01:24:14,389
machine that has everything out of the

1703
01:24:14,389 --> 01:24:17,119
box for them going so your BS fishing

1704
01:24:17,119 --> 01:24:18,800
into this controller and then from this

1705
01:24:18,800 --> 01:24:20,420
controller you can launch attacks to the

1706
01:24:20,420 --> 01:24:21,650
Windows domain controller instance

1707
01:24:21,650 --> 01:24:23,869
that's already built or again here you

1708
01:24:23,869 --> 01:24:25,219
can beat open these if you're following

1709
01:24:25,219 --> 01:24:28,130
along you can also SSH into Kali Linux

1710
01:24:28,130 --> 01:24:30,170
again I'll give the credentials out in

1711
01:24:30,170 --> 01:24:33,800
in a second and you can also reach via

1712
01:24:33,800 --> 01:24:35,959
RDP as Rob mentioned earlier you can

1713
01:24:35,959 --> 01:24:39,469
grab the IDP client for Mac if you're

1714
01:24:39,469 --> 01:24:41,690
using Mac OS or you can just use the

1715
01:24:41,690 --> 01:24:44,269
windows remote desktop the remote

1716
01:24:44,269 --> 01:24:46,010
desktop client as well

1717
01:24:46,010 --> 01:24:51,260
/ Clinics I think IT PC works or at the

1718
01:24:51,260 --> 01:24:54,349
PX I don't remember but um yeah just

1719
01:24:54,349 --> 01:24:56,389
copy I met you you know your your

1720
01:24:56,389 --> 01:24:58,610
favorite are you are you gonna provide a

1721
01:24:58,610 --> 01:25:01,130
list and assign it to each person that's

1722
01:25:01,130 --> 01:25:03,800
in is an attendee or how are you gonna

1723
01:25:03,800 --> 01:25:07,849
handle the access my my request was a

1724
01:25:07,849 --> 01:25:10,760
just have whomever wants to have the

1725
01:25:10,760 --> 01:25:13,219
people of instance we're going to DME

1726
01:25:13,219 --> 01:25:16,059
and then I'll assign them a team okay

1727
01:25:16,059 --> 01:25:19,280
make sure you guys do that and yeah make

1728
01:25:19,280 --> 01:25:23,090
sure you do that in discord guys yes yes

1729
01:25:23,090 --> 01:25:25,459
DME in this court I have a slide on this

1730
01:25:25,459 --> 01:25:27,590
the discord instructions and and my user

1731
01:25:27,590 --> 01:25:29,659
name in a second so you don't get lost

1732
01:25:29,659 --> 01:25:33,440
they're just a great point thank you

1733
01:25:33,440 --> 01:25:35,180
um so yeah this is high level

1734
01:25:35,180 --> 01:25:38,000
environment you can reach Splunk on HTTP

1735
01:25:38,000 --> 01:25:40,610
8000 not listed here you can reach

1736
01:25:40,610 --> 01:25:46,699
caldera on the same ip but I'm for 8 so

1737
01:25:46,699 --> 01:25:48,710
on the ranges that I'll be providing in

1738
01:25:48,710 --> 01:25:51,140
a minute here's what's done for you we

1739
01:25:51,140 --> 01:25:53,630
installed the OS dependencies we very

1740
01:25:53,630 --> 01:25:55,550
configure terraform we've already

1741
01:25:55,550 --> 01:25:56,870
pre-configured the attack which the

1742
01:25:56,870 --> 01:26:00,380
console and be very built a range if you

1743
01:26:00,380 --> 01:26:02,030
can always destroy those if you wanted

1744
01:26:02,030 --> 01:26:03,350
to see what the process looks like but

1745
01:26:03,350 --> 01:26:06,130
just FYI this is already done for you

1746
01:26:06,130 --> 01:26:08,690
again how do I get started discord

1747
01:26:08,690 --> 01:26:12,710
shadow DM me a div I'll be handing off

1748
01:26:12,710 --> 01:26:15,080
credentials in the next in the next few

1749
01:26:15,080 --> 01:26:17,870
minutes and again once you get those

1750
01:26:17,870 --> 01:26:20,840
credentials the first step is you you'll

1751
01:26:20,840 --> 01:26:22,850
be able to SSH into the domain

1752
01:26:22,850 --> 01:26:25,489
controller you can log in log into

1753
01:26:25,489 --> 01:26:27,620
Splunk check out the results again I'll

1754
01:26:27,620 --> 01:26:28,850
give you credentials for all these and

1755
01:26:28,850 --> 01:26:32,690
IPS for your respective team and and run

1756
01:26:32,690 --> 01:26:35,360
the tensions off of a Splunk another

1757
01:26:35,360 --> 01:26:37,730
security content updates you can play

1758
01:26:37,730 --> 01:26:41,000
with more complex tasks etc etc so right

1759
01:26:41,000 --> 01:26:45,110
now go to discord message me I'm gonna

1760
01:26:45,110 --> 01:26:47,060
I'm gonna pause this video right here so

1761
01:26:47,060 --> 01:26:48,290
I can start providing credentials back

1762
01:26:48,290 --> 01:26:51,290
out and in and then two minutes I'm

1763
01:26:51,290 --> 01:26:52,580
gonna start building a range from

1764
01:26:52,580 --> 01:26:54,980
scratch if you're following along okay

1765
01:26:54,980 --> 01:27:01,940
so alright thank you I'm good Thank You

1766
01:27:01,940 --> 01:27:05,830
Jules yeah no problem

1767
01:27:06,730 --> 01:27:08,479
so we got

1768
01:27:08,479 --> 01:27:12,699
sixty-two people in is attendees so

1769
01:27:12,699 --> 01:27:16,999
attendees head over to discord make sure

1770
01:27:16,999 --> 01:27:17,989
you message

1771
01:27:17,989 --> 01:27:20,840
make sure you DM direct message don't do

1772
01:27:20,840 --> 01:27:28,539
it in chan d 1v and he will get you an

1773
01:27:28,539 --> 01:27:31,898
instant setup

1774
01:27:36,880 --> 01:27:38,800
so full disclosure there's the ball

1775
01:27:38,800 --> 01:27:41,620
we're gonna try to cap about ten

1776
01:27:41,620 --> 01:27:45,580
individuals per shared environment per

1777
01:27:45,580 --> 01:27:50,670
lab that we're heading out here so

1778
01:28:00,650 --> 01:28:09,980
that didn't pack itself here I must

1779
01:28:09,980 --> 01:28:18,320
share off [ __ ] with you

1780
01:28:25,870 --> 01:28:28,760
realize I copied basic from Google she

1781
01:28:28,760 --> 01:28:32,360
says doesn't pretty print things and in

1782
01:28:32,360 --> 01:28:35,690
this quote so I'll give you both a

1783
01:28:35,690 --> 01:28:38,690
screenshot and the text focus who likes

1784
01:28:38,690 --> 01:28:42,250
to copy and paste your screenshots

1785
01:29:06,239 --> 01:29:08,299
you

1786
01:29:16,830 --> 01:29:18,890
you

1787
01:30:10,320 --> 01:30:11,920
you

1788
01:30:11,920 --> 01:30:13,300
you

1789
01:30:13,300 --> 01:30:15,360
you

1790
01:30:24,690 --> 01:30:29,830
all right I have deemed ranges most of

1791
01:30:29,830 --> 01:30:32,410
our credentials to go so you have

1792
01:30:32,410 --> 01:30:36,370
message me the rest who are following

1793
01:30:36,370 --> 01:30:40,989
along I will let me get my my terminal

1794
01:30:40,989 --> 01:30:42,340
here already so we can start building

1795
01:30:42,340 --> 01:30:45,730
one from scratch again we're we're

1796
01:30:45,730 --> 01:30:47,770
assuming that that you're already

1797
01:30:47,770 --> 01:30:50,130
starting with a inaudible yes account if

1798
01:30:50,130 --> 01:30:52,239
you don't have one

1799
01:30:52,239 --> 01:31:00,100
please go create one we'll get started

1800
01:31:00,100 --> 01:31:12,340
in just one more minute here was there

1801
01:31:12,340 --> 01:31:13,369
you're going to start from the

1802
01:31:13,369 --> 01:31:15,110
good actor or you're gonna show the

1803
01:31:15,110 --> 01:31:18,710
built-up environment I'm gonna start

1804
01:31:18,710 --> 01:31:21,650
from scratch rod I'm gonna angle yeah

1805
01:31:21,650 --> 01:31:23,719
I'm gonna build the controller and

1806
01:31:23,719 --> 01:31:29,239
everything from scratch that's great you

1807
01:31:29,239 --> 01:31:32,050
should go over the attack.com thing

1808
01:31:32,050 --> 01:31:34,969
attack on the scored range comp and so

1809
01:31:34,969 --> 01:31:38,360
they can see it and absolutely good

1810
01:31:38,360 --> 01:31:39,260
point good point

1811
01:31:39,260 --> 01:31:43,070
and again I'm also gonna be on on the

1812
01:31:43,070 --> 01:31:47,540
slack here oh I don't still getting DMS

1813
01:31:47,540 --> 01:31:52,360
for her labs so bear with me

1814
01:31:54,120 --> 01:31:56,180
you

1815
01:31:58,130 --> 01:32:00,190
you

1816
01:32:04,219 --> 01:32:06,280
you

1817
01:32:09,939 --> 01:32:14,019
now I uh you know what I have to send

1818
01:32:14,019 --> 01:32:19,179
out the SSH keys as well to all those

1819
01:32:19,179 --> 01:32:22,329
who are requesting labs so let me get

1820
01:32:22,329 --> 01:32:25,809
you those right now realize I'm giving

1821
01:32:25,809 --> 01:32:31,209
you a picture of the of the actual of

1822
01:32:31,209 --> 01:32:33,219
the actual domain is that the actual IP

1823
01:32:33,219 --> 01:32:36,809
is but not the the SSH key

1824
01:32:44,330 --> 01:32:45,640
you

1825
01:32:45,640 --> 01:32:47,430
you

1826
01:32:47,430 --> 01:32:49,490
you

1827
01:32:56,020 --> 01:32:58,080
you

1828
01:33:00,120 --> 01:33:02,180
you

1829
01:33:05,570 --> 01:33:07,630
you

1830
01:33:13,860 --> 01:33:15,990
yeah happy happy fun time sorry thank

1831
01:33:15,990 --> 01:33:18,210
you thank you I'll paste the password

1832
01:33:18,210 --> 01:33:19,710
right now yeah

1833
01:33:19,710 --> 01:33:22,650
another it's kind of annoying to copy

1834
01:33:22,650 --> 01:33:27,230
and paste from start a copy from here J

1835
01:33:27,230 --> 01:33:30,469
there we go

1836
01:36:25,530 --> 01:36:29,360
all right I think we're I think most of

1837
01:36:29,360 --> 01:36:33,770
most of everyone I reply back to the DME

1838
01:36:33,770 --> 01:36:37,230
you should have a range let's get

1839
01:36:37,230 --> 01:36:38,790
started a building who marries following

1840
01:36:38,790 --> 01:36:42,390
along to building your own so let me

1841
01:36:42,390 --> 01:36:45,690
start sharing my Firefox again here you

1842
01:36:45,690 --> 01:36:54,240
should be seeing AWS console anybody's

1843
01:36:54,240 --> 01:36:57,330
rockin you scream yeah yeah I can see it

1844
01:36:57,330 --> 01:37:04,950
it's not full screen but yeah yeah

1845
01:37:04,950 --> 01:37:06,000
that's much better

1846
01:37:06,000 --> 01:37:10,380
there you see okay so first thing we're

1847
01:37:10,380 --> 01:37:11,610
gonna do here is we're gonna build our

1848
01:37:11,610 --> 01:37:13,380
controller again if you remember from

1849
01:37:13,380 --> 01:37:16,470
from the presentation here we're gonna

1850
01:37:16,470 --> 01:37:18,990
build this giant purple box first and

1851
01:37:18,990 --> 01:37:20,610
then we'll get the range started on this

1852
01:37:20,610 --> 01:37:26,340
controller for the most part I I I'm

1853
01:37:26,340 --> 01:37:29,490
using Ubuntu 18 or for images but I need

1854
01:37:29,490 --> 01:37:32,730
Linux and it should work just fine up

1855
01:37:32,730 --> 01:37:34,590
here so I'm gonna go with the bun to

1856
01:37:34,590 --> 01:37:35,910
1804 LT yes

1857
01:37:35,910 --> 01:37:39,210
and again because all of this machine is

1858
01:37:39,210 --> 01:37:41,070
gonna do is just a loss to install a

1859
01:37:41,070 --> 01:37:42,750
command line interface and run commands

1860
01:37:42,750 --> 01:37:44,400
in it we really don't need a whole lot

1861
01:37:44,400 --> 01:37:47,160
of woosh power in it the feet here at T

1862
01:37:47,160 --> 01:37:49,170
2 micro should be just fine

1863
01:37:49,170 --> 01:37:54,420
so let's proceed with this one actually

1864
01:37:54,420 --> 01:37:58,170
so really what we want to do here is on

1865
01:37:58,170 --> 01:38:01,200
the security group again make sure you

1866
01:38:01,200 --> 01:38:04,290
restrict this to your IP address I will

1867
01:38:04,290 --> 01:38:07,980
leave it open for for the sake of the

1868
01:38:07,980 --> 01:38:10,890
example here but just again just make

1869
01:38:10,890 --> 01:38:12,540
sure you restrict this to your own

1870
01:38:12,540 --> 01:38:15,540
environment I'm gonna destroys right

1871
01:38:15,540 --> 01:38:16,920
after this example so I don't really

1872
01:38:16,920 --> 01:38:18,780
mind too much but you're gonna keep this

1873
01:38:18,780 --> 01:38:21,120
around for a bit you want to shake that

1874
01:38:21,120 --> 01:38:26,040
off storage doesn't really matter again

1875
01:38:26,040 --> 01:38:27,510
we're gonna be installing the CLI here

1876
01:38:27,510 --> 01:38:29,820
so the 8 gigs the standard works just

1877
01:38:29,820 --> 01:38:34,770
fine I'm gonna call this then I'm gonna

1878
01:38:34,770 --> 01:38:38,960
give it a name of a tag inch

1879
01:38:38,969 --> 01:38:41,550
six because we already have some we have

1880
01:38:41,550 --> 01:38:43,019
five pre-built labs so there's gonna be

1881
01:38:43,019 --> 01:38:48,630
my six and I can set 24 22 perfect open

1882
01:38:48,630 --> 01:38:50,219
to the world the way I can share this if

1883
01:38:50,219 --> 01:38:53,099
anybody else DMS oscillator and asking

1884
01:38:53,099 --> 01:38:55,559
for another environment and lunch now

1885
01:38:55,559 --> 01:38:59,999
here's the part where again it starts

1886
01:38:59,999 --> 01:39:01,320
getting not necessarily tricky but just

1887
01:39:01,320 --> 01:39:03,300
make sure I'm gonna create a key pair

1888
01:39:03,300 --> 01:39:06,179
for this and this is same key pair we're

1889
01:39:06,179 --> 01:39:09,360
gonna use for the range so just FYI I'm

1890
01:39:09,360 --> 01:39:12,199
going to call this key pair attack range

1891
01:39:12,199 --> 01:39:17,099
and six again when I was lucky looking

1892
01:39:17,099 --> 01:39:19,380
one who joins a and ask for another DM

1893
01:39:19,380 --> 01:39:20,999
for another environment I'll just I'll

1894
01:39:20,999 --> 01:39:23,820
give him this keys so got a nice set of

1895
01:39:23,820 --> 01:39:25,920
keys here boom

1896
01:39:25,920 --> 01:39:28,170
I'm gonna go ahead and download the key

1897
01:39:28,170 --> 01:39:31,789
pair and then launch the instance

1898
01:39:32,280 --> 01:39:36,059
while this instance is coming up I am

1899
01:39:36,059 --> 01:39:40,320
going to grab the therapy let me switch

1900
01:39:40,320 --> 01:39:48,019
over to my terminal here

1901
01:39:55,720 --> 01:40:00,520
and every once in my terminal

1902
01:40:01,060 --> 01:40:04,380
yeah sweet so

1903
01:40:04,380 --> 01:40:08,070
confirming um for the sake of arguing

1904
01:40:08,070 --> 01:40:09,990
I'm just putting all of my keys and this

1905
01:40:09,990 --> 01:40:13,230
jungle folder for so I'm I downloaded

1906
01:40:13,230 --> 01:40:15,510
the key earlier that we just grabbed

1907
01:40:15,510 --> 01:40:17,220
from did you generated from a good rest

1908
01:40:17,220 --> 01:40:20,700
attack range six top and put it here and

1909
01:40:20,700 --> 01:40:22,350
I'm going to start as a saging into this

1910
01:40:22,350 --> 01:40:28,500
instance so I'll pass it by key and you

1911
01:40:28,500 --> 01:40:30,810
can able don't - and then the IP address

1912
01:40:30,810 --> 01:40:33,390
I it can't be the IP I reserved of the

1913
01:40:33,390 --> 01:40:35,910
puppy idea is the machine which I had

1914
01:40:35,910 --> 01:40:38,310
thought are copied maybe sure

1915
01:40:38,310 --> 01:40:40,440
since the machine that the controller we

1916
01:40:40,440 --> 01:40:44,940
just went up we go oh I forgot solution

1917
01:40:44,940 --> 01:40:46,440
conditions on my sister she couldn't

1918
01:40:46,440 --> 01:40:48,510
make this fit stuff it needs to be read

1919
01:40:48,510 --> 01:40:51,900
on the other way this ish won't want to

1920
01:40:51,900 --> 01:40:55,710
use it alright so now we got a very

1921
01:40:55,710 --> 01:40:59,550
clean brand-new Ubuntu machine first

1922
01:40:59,550 --> 01:41:01,560
thing we want to do here again this is

1923
01:41:01,560 --> 01:41:03,360
going to be the mission you start the

1924
01:41:03,360 --> 01:41:04,200
attack on charm

1925
01:41:04,200 --> 01:41:08,420
we're gonna run an update

1926
01:41:09,480 --> 01:41:13,739
I think lady skrap the latest packages

1927
01:41:13,739 --> 01:41:15,330
and then the next thing we want to do is

1928
01:41:15,330 --> 01:41:17,670
start installing some OS dependencies a

1929
01:41:17,670 --> 01:41:19,739
lot of this again gets covered by that

1930
01:41:19,739 --> 01:41:22,880
bloom to installation script

1931
01:41:22,880 --> 01:41:24,810
specifically we're going to go that

1932
01:41:24,810 --> 01:41:28,500
install when you Python 3 dev we need

1933
01:41:28,500 --> 01:41:30,890
the head of hospital when he Python 3

1934
01:41:30,890 --> 01:41:34,050
I'm just going to any one sip

1935
01:41:34,050 --> 01:41:37,800
we're gonna need pip Python pip we're

1936
01:41:37,800 --> 01:41:41,100
going to meet the AWS qli and the Python

1937
01:41:41,100 --> 01:41:45,010
virtual environment

1938
01:41:45,010 --> 01:41:48,820
there you go it's gonna take a minute

1939
01:41:48,820 --> 01:41:51,309
since the spike on headers are not small

1940
01:41:51,309 --> 01:41:52,989
I think this whole thing is about three

1941
01:41:52,989 --> 01:41:55,900
four hundred Meg's total packages were

1942
01:41:55,900 --> 01:41:58,749
bringing them if you have any questions

1943
01:41:58,749 --> 01:42:01,179
as you're following along I'm in this

1944
01:42:01,179 --> 01:42:05,070
cord on the track 1h just ask away I

1945
01:42:05,070 --> 01:42:07,090
haven't checked in a few minutes or oh

1946
01:42:07,090 --> 01:42:09,099
wow this is going on man go ahead and

1947
01:42:09,099 --> 01:42:11,190
check

1948
01:42:20,610 --> 01:42:24,659
the yoke cactus

1949
01:42:33,290 --> 01:42:35,880
well thank you sir I think they gave me

1950
01:42:35,880 --> 01:42:38,910
the SSH keys I hope pretty sure they

1951
01:42:38,910 --> 01:42:40,050
just double-check

1952
01:42:40,050 --> 01:42:45,450
Oh Steve welcome Steve give me two

1953
01:42:45,450 --> 01:42:47,820
seconds let me just give them sir

1954
01:42:47,820 --> 01:42:56,250
credentials will continue two seconds

1955
01:42:56,250 --> 01:42:59,550
here also it gives everybody a little

1956
01:42:59,550 --> 01:43:02,100
time to catch up if you haven't spun the

1957
01:43:02,100 --> 01:43:03,780
server a cessation and start the

1958
01:43:03,780 --> 01:43:08,480
packages go for now

1959
01:43:21,539 --> 01:43:25,269
okay so let's keep going so once we have

1960
01:43:25,269 --> 01:43:28,899
our our prerequisites installed let's go

1961
01:43:28,899 --> 01:43:31,809
grab our people peter boys dependencies

1962
01:43:31,809 --> 01:43:34,599
installed let's go grab platform so it

1963
01:43:34,599 --> 01:43:36,659
literally just W get the terraform

1964
01:43:36,659 --> 01:43:40,119
binary right from them and the reason we

1965
01:43:40,119 --> 01:43:41,739
installed on step is just to run sit

1966
01:43:41,739 --> 01:43:44,919
with little file here - Polly found a

1967
01:43:44,919 --> 01:43:46,419
better ways to do this by the way and

1968
01:43:46,419 --> 01:43:48,879
this is very easy to script Dalek shared

1969
01:43:48,879 --> 01:43:51,639
on the wiki alright again for the sake

1970
01:43:51,639 --> 01:43:55,269
of of the workshop I'm doing everything

1971
01:43:55,269 --> 01:43:58,119
manually so I just moved here for Monday

1972
01:43:58,119 --> 01:44:01,719
use a local bin so obviously we came

1973
01:44:01,719 --> 01:44:07,839
right to this route and then pretty much

1974
01:44:07,839 --> 01:44:12,459
ready here to start our setup on tack

1975
01:44:12,459 --> 01:44:14,679
range you got all the us stuff out of

1976
01:44:14,679 --> 01:44:16,479
the way so we're gonna get clone attack

1977
01:44:16,479 --> 01:44:18,269
range right from github

1978
01:44:18,269 --> 01:44:23,589
and then I see I'm currently on the

1979
01:44:23,589 --> 01:44:24,849
attack reach project

1980
01:44:24,849 --> 01:44:26,499
the next thing we're gonna do is again

1981
01:44:26,499 --> 01:44:28,239
we're going to go to terraform and this

1982
01:44:28,239 --> 01:44:31,599
is for minute all of these basically

1983
01:44:31,599 --> 01:44:33,429
started the configuration at this point

1984
01:44:33,429 --> 01:44:36,579
of terraform since we got the whole OS

1985
01:44:36,579 --> 01:44:38,349
of prerequisites out the way so if

1986
01:44:38,349 --> 01:44:39,909
you're following along if you want to

1987
01:44:39,909 --> 01:44:41,559
follow a wiki page that's the wiki page

1988
01:44:41,559 --> 01:44:42,339
follow the

1989
01:44:42,339 --> 01:44:45,579
terraform configuration wiki page so

1990
01:44:45,579 --> 01:44:46,780
we're gonna go ahead and tell 4-minute

1991
01:44:46,780 --> 01:44:48,849
like I mentioned earlier this we

1992
01:44:48,849 --> 01:44:51,039
mentioned earlier this goes ahead and

1993
01:44:51,039 --> 01:44:52,329
downloads the different plugins that

1994
01:44:52,329 --> 01:44:53,739
we're going to be using under the hood

1995
01:44:53,739 --> 01:44:55,649
for telephone to build the environment

1996
01:44:55,649 --> 01:45:01,119
and that's done next here is a less

1997
01:45:01,119 --> 01:45:02,649
creative virtual environment so you can

1998
01:45:02,649 --> 01:45:05,530
start the project dependencies so to

1999
01:45:05,530 --> 01:45:06,609
create a virtual environment you

2000
01:45:06,609 --> 01:45:09,699
virtualize that's the python version you

2001
01:45:09,699 --> 01:45:12,339
want to run this is one of my favorite

2002
01:45:12,339 --> 01:45:14,979
things honestly for python that you can

2003
01:45:14,979 --> 01:45:16,510
you can separate whatever that's

2004
01:45:16,510 --> 01:45:19,749
happening on your project away from your

2005
01:45:19,749 --> 01:45:22,959
loss ever had the experience of ruining

2006
01:45:22,959 --> 01:45:24,609
your OSS Python like I've had in the

2007
01:45:24,609 --> 01:45:26,679
past and they bien that's something that

2008
01:45:26,679 --> 01:45:30,459
you may never come back so this is good

2009
01:45:30,459 --> 01:45:33,110
practice so I

2010
01:45:33,110 --> 01:45:34,489
just create a virtual environment called

2011
01:45:34,489 --> 01:45:37,280
VM I'm gonna go ahead now and activate

2012
01:45:37,280 --> 01:45:40,429
it which means that now I am actually if

2013
01:45:40,429 --> 01:45:41,750
I do with Python you can see what's

2014
01:45:41,750 --> 01:45:42,469
gonna happen here

2015
01:45:42,469 --> 01:45:46,400
my pit I'm sorry which pip pip is very

2016
01:45:46,400 --> 01:45:48,290
now pointing to user bin which is my

2017
01:45:48,290 --> 01:45:50,179
sister's pit but at the moment that I

2018
01:45:50,179 --> 01:45:52,670
activate this environment they [ __ ]

2019
01:45:52,670 --> 01:45:57,409
take another Grich pit now pip is the

2020
01:45:57,409 --> 01:45:59,840
pit that we installed in bed if I'm so

2021
01:45:59,840 --> 01:46:01,730
now I can do this fancy thing you could

2022
01:46:01,730 --> 01:46:03,679
install the requirements which actually

2023
01:46:03,679 --> 01:46:06,920
it's it's all be actually libraries that

2024
01:46:06,920 --> 01:46:11,270
attack depends on for python like things

2025
01:46:11,270 --> 01:46:13,520
are constable which is what we used to

2026
01:46:13,520 --> 01:46:15,610
orchestrate the builds under the hood

2027
01:46:15,610 --> 01:46:17,960
and a bunch of stuff this this is gonna

2028
01:46:17,960 --> 01:46:20,090
take a minute

2029
01:46:20,090 --> 01:46:23,960
so let it run there

2030
01:46:32,699 --> 01:46:34,759
you

2031
01:46:44,100 --> 01:46:46,160
you

2032
01:46:46,520 --> 01:46:48,580
you

2033
01:46:49,940 --> 01:46:52,000
you

2034
01:46:54,480 --> 01:47:01,380
all right good point

2035
01:47:01,380 --> 01:47:05,699
Java on dependency so I've done all over

2036
01:47:05,699 --> 01:47:09,870
dependencies have been installed now the

2037
01:47:09,870 --> 01:47:12,210
next steps again I'm just doing this for

2038
01:47:12,210 --> 01:47:13,620
twelve your life I'm going to change my

2039
01:47:13,620 --> 01:47:16,440
post name on this machine I'm gonna call

2040
01:47:16,440 --> 01:47:21,600
it the tag managed controller sips and

2041
01:47:21,600 --> 01:47:23,760
then the next thing we need to do which

2042
01:47:23,760 --> 01:47:25,560
this machine doesn't have right now is

2043
01:47:25,560 --> 01:47:30,600
the SSH keys the SSH keys that we

2044
01:47:30,600 --> 01:47:33,659
downloaded earlier from AWS and this

2045
01:47:33,659 --> 01:47:35,219
machine is going to need it because on

2046
01:47:35,219 --> 01:47:37,350
this machine we're gonna well I suppose

2047
01:47:37,350 --> 01:47:39,150
running it's gonna actually SSH in and

2048
01:47:39,150 --> 01:47:41,219
start building the environment it's

2049
01:47:41,219 --> 01:47:44,630
gonna split my terminal here and go to D

2050
01:47:44,630 --> 01:47:55,949
just look at it course and display my

2051
01:47:55,949 --> 01:47:57,750
private key here for the world is these

2052
01:47:57,750 --> 01:47:59,489
price key he's gonna live about the life

2053
01:47:59,489 --> 01:48:03,799
of this event so I don't mind

2054
01:48:05,480 --> 01:48:10,850
there we go so I copied my key over

2055
01:48:10,850 --> 01:48:14,850
again as a sage not like teams that are

2056
01:48:14,850 --> 01:48:17,639
readable by the world I'm gonna make it

2057
01:48:17,639 --> 01:48:21,360
as readable to my user is chmod search

2058
01:48:21,360 --> 01:48:24,150
engines permission and the next step

2059
01:48:24,150 --> 01:48:29,100
here is AWS configure I'm going to

2060
01:48:29,100 --> 01:48:31,040
configure 8w so we can actually operate

2061
01:48:31,040 --> 01:48:34,710
terraform it's asking me for a key so

2062
01:48:34,710 --> 01:48:38,190
I'm gonna go ahead and flip back to my

2063
01:48:38,190 --> 01:48:44,030
browser and create a a key on AWS

2064
01:48:45,179 --> 01:48:48,510
give me one second let me share Firefox

2065
01:48:48,510 --> 01:48:50,850
again everybody should be seen my

2066
01:48:50,850 --> 01:48:54,239
Firefox now so I am going to create a

2067
01:48:54,239 --> 01:48:57,360
key a an API key so we can actually

2068
01:48:57,360 --> 01:48:59,550
build the Ranger terraform so I'll go to

2069
01:48:59,550 --> 01:49:05,219
I am identity management and and here's

2070
01:49:05,219 --> 01:49:07,889
a little bit of a tricky part we don't

2071
01:49:07,889 --> 01:49:10,409
have today we don't have necessarily a

2072
01:49:10,409 --> 01:49:13,679
good set of policies to to assign for

2073
01:49:13,679 --> 01:49:15,270
AWS the ranges are

2074
01:49:15,270 --> 01:49:17,010
other components a little bit for UWL so

2075
01:49:17,010 --> 01:49:20,190
I hate to say it but just give it I'm in

2076
01:49:20,190 --> 01:49:22,410
rights for now this is something we

2077
01:49:22,410 --> 01:49:24,330
definitely want to post eventually on on

2078
01:49:24,330 --> 01:49:27,300
the wiki where we get very specific as

2079
01:49:27,300 --> 01:49:30,420
to what roles you're providing your AWS

2080
01:49:30,420 --> 01:49:32,940
user but for now just go full-blown and

2081
01:49:32,940 --> 01:49:35,010
then to avoid any potential issues when

2082
01:49:35,010 --> 01:49:38,970
I call this attack range Team six this

2083
01:49:38,970 --> 01:49:41,640
user again a programmatic access we're

2084
01:49:41,640 --> 01:49:42,870
looking for the access key and secret

2085
01:49:42,870 --> 01:49:46,830
and I already have people the group just

2086
01:49:46,830 --> 01:49:49,590
for admin rights administrative access

2087
01:49:49,590 --> 01:49:51,960
is the etosha policy as long as I think

2088
01:49:51,960 --> 01:49:54,470
it has a c2 admin it should be okay

2089
01:49:54,470 --> 01:49:57,720
doesn't need a name I just need

2090
01:49:57,720 --> 01:50:01,790
credentials created a user

2091
01:50:01,790 --> 01:50:04,890
life is good I have a key probably a

2092
01:50:04,890 --> 01:50:08,280
user key here sweet so this is what I'm

2093
01:50:08,280 --> 01:50:11,310
gonna paste over then he's the secret

2094
01:50:11,310 --> 01:50:15,260
I'm gonna paste the secret over as well

2095
01:50:15,530 --> 01:50:18,150
my region in this case I'm building on

2096
01:50:18,150 --> 01:50:24,270
us keys to one one big thing of

2097
01:50:24,270 --> 01:50:26,010
importance is make sure whatever region

2098
01:50:26,010 --> 01:50:28,770
you set one again you created your SSH

2099
01:50:28,770 --> 01:50:30,930
key under the region earlier back I

2100
01:50:30,930 --> 01:50:32,610
should have pointed that out but where

2101
01:50:32,610 --> 01:50:36,060
we're working on us is to and then also

2102
01:50:36,060 --> 01:50:38,220
when you configure attack wench would

2103
01:50:38,220 --> 01:50:40,140
you see in a second when I jump into a

2104
01:50:40,140 --> 01:50:42,000
configuration file you want to set your

2105
01:50:42,000 --> 01:50:44,190
your region and they're very explicitly

2106
01:50:44,190 --> 01:50:45,960
otherwise you're gonna get errors so

2107
01:50:45,960 --> 01:50:49,680
then the AWS configured region needs to

2108
01:50:49,680 --> 01:50:51,840
match the attack range configured region

2109
01:50:51,840 --> 01:50:56,160
as well as the region tequila so now

2110
01:50:56,160 --> 01:50:59,220
that we are configured AWS all we're

2111
01:50:59,220 --> 01:51:00,570
missing is is configuring the attack

2112
01:51:00,570 --> 01:51:02,760
page and what's been a minute here I

2113
01:51:02,760 --> 01:51:05,190
kind of want to walk through I want to

2114
01:51:05,190 --> 01:51:07,500
walk this config so one thing first

2115
01:51:07,500 --> 01:51:12,690
things first the key name oh I just

2116
01:51:12,690 --> 01:51:15,780
realized I've been five horses inside

2117
01:51:15,780 --> 01:51:23,120
so sorry the middle back here yeah so

2118
01:51:23,120 --> 01:51:25,430
it's going back here for a second

2119
01:51:25,430 --> 01:51:28,680
basically copied and pasted our SSH over

2120
01:51:28,680 --> 01:51:32,820
and then I ran AWS configured you didn't

2121
01:51:32,820 --> 01:51:37,440
see it's a bigger region so next up here

2122
01:51:37,440 --> 01:51:45,600
is attacking comp and here we'll first

2123
01:51:45,600 --> 01:51:47,790
the name of the key here needs to match

2124
01:51:47,790 --> 01:51:51,180
the key that we created in AWS so attack

2125
01:51:51,180 --> 01:51:54,540
pinch six again I'm just gonna flip

2126
01:51:54,540 --> 01:51:57,390
really quickly back to AWS here if we go

2127
01:51:57,390 --> 01:52:04,080
to the ec2 service and we've got a key

2128
01:52:04,080 --> 01:52:07,590
pairs you see that there is an attacker

2129
01:52:07,590 --> 01:52:10,820
interesting six key and this name

2130
01:52:10,820 --> 01:52:14,130
specifically needs to match the name

2131
01:52:14,130 --> 01:52:19,590
that we provided over here the whitelist

2132
01:52:19,590 --> 01:52:22,380
again highly highly recommend if you

2133
01:52:22,380 --> 01:52:24,630
build this on your own you restricted to

2134
01:52:24,630 --> 01:52:29,280
your own IP attack man just get attack

2135
01:52:29,280 --> 01:52:31,920
if you build them up actually by BOTS

2136
01:52:31,920 --> 01:52:34,920
with their parties and also make sure we

2137
01:52:34,920 --> 01:52:36,210
lose in a second but make sure you

2138
01:52:36,210 --> 01:52:38,970
change the passwords I know that this

2139
01:52:38,970 --> 01:52:40,680
already landed it somewhere list and I

2140
01:52:40,680 --> 01:52:44,640
said like ROM mention earlier you if you

2141
01:52:44,640 --> 01:52:45,870
leave your winch up and you don't change

2142
01:52:45,870 --> 01:52:48,450
your IP address your whitelist here and

2143
01:52:48,450 --> 01:52:50,400
you're in your default password you're

2144
01:52:50,400 --> 01:52:51,990
probably going to let me arrange to some

2145
01:52:51,990 --> 01:52:54,270
Bitcoin miner or somebody's going to

2146
01:52:54,270 --> 01:52:55,470
essentially use it for something else

2147
01:52:55,470 --> 01:52:57,690
here we have ready guy we've already got

2148
01:52:57,690 --> 01:53:01,200
some instances of AWS and he knows the

2149
01:53:01,200 --> 01:53:04,400
messages that our stuff was accessed so

2150
01:53:04,400 --> 01:53:09,360
remember that I'm changes out of

2151
01:53:09,360 --> 01:53:11,790
experience not don't make the same

2152
01:53:11,790 --> 01:53:17,070
mistakes I did so again I changed up the

2153
01:53:17,070 --> 01:53:20,940
region to point to us east just like

2154
01:53:20,940 --> 01:53:23,430
where my keys are and we're configuring

2155
01:53:23,430 --> 01:53:25,230
WSI and I'm gonna generate a quick

2156
01:53:25,230 --> 01:53:29,510
password here give me one second

2157
01:53:29,510 --> 01:53:33,600
and then not sure this is one of the

2158
01:53:33,600 --> 01:53:36,980
reasons I love them little them click

2159
01:53:36,980 --> 01:53:41,210
percentage pass allows you to run regex

2160
01:53:41,210 --> 01:53:44,120
like said finally please

2161
01:53:44,120 --> 01:53:46,890
finally place every instance of the word

2162
01:53:46,890 --> 01:53:47,670
attack

2163
01:53:47,670 --> 01:53:49,350
I like attacking which is the password

2164
01:53:49,350 --> 01:53:53,940
we use by default web bang at the end it

2165
01:53:53,940 --> 01:53:55,770
is generated at random partially I just

2166
01:53:55,770 --> 01:54:00,030
got and boom I want the entire file and

2167
01:54:00,030 --> 01:54:02,130
change I like the attack range so

2168
01:54:02,130 --> 01:54:05,100
default password is no more let me just

2169
01:54:05,100 --> 01:54:11,660
grab this one and set it aside and then

2170
01:54:11,660 --> 01:54:14,880
continuing here are a configuration so

2171
01:54:14,880 --> 01:54:17,490
we configure the region I've already

2172
01:54:17,490 --> 01:54:19,800
saved the SSH key under is file if you

2173
01:54:19,800 --> 01:54:21,450
recall earlier this is the file I ended

2174
01:54:21,450 --> 01:54:23,160
up editing you can I see each put

2175
01:54:23,160 --> 01:54:25,710
jessfishy in any other location you you

2176
01:54:25,710 --> 01:54:27,240
want right long like let's say you want

2177
01:54:27,240 --> 01:54:29,790
to use you have and there the private

2178
01:54:29,790 --> 01:54:31,470
key path you some other key because

2179
01:54:31,470 --> 01:54:32,760
you're using their server you building

2180
01:54:32,760 --> 01:54:34,350
on for something else you can always

2181
01:54:34,350 --> 01:54:37,380
pass it another pathway and just FYI and

2182
01:54:37,380 --> 01:54:39,240
I'm not gonna change even though I said

2183
01:54:39,240 --> 01:54:40,710
like sometimes to change it I'm going to

2184
01:54:40,710 --> 01:54:42,840
change it just because I began we've

2185
01:54:42,840 --> 01:54:44,340
been sharing this ranges for everybody

2186
01:54:44,340 --> 01:54:47,880
to play on so so so I want to keep it

2187
01:54:47,880 --> 01:54:51,000
open just for the sake of this lab I'm

2188
01:54:51,000 --> 01:54:52,530
following continuing here on the

2189
01:54:52,530 --> 01:54:55,290
configuration of the range of the config

2190
01:54:55,290 --> 01:54:58,380
file again a set every place of the file

2191
01:54:58,380 --> 01:55:00,000
password so the spawn password change

2192
01:55:00,000 --> 01:55:02,880
and all the other ones but um coping

2193
01:55:02,880 --> 01:55:03,840
about the range it allows you to

2194
01:55:03,840 --> 01:55:06,540
configure all kinds of stuff like you

2195
01:55:06,540 --> 01:55:08,700
know what Splunk version do you want to

2196
01:55:08,700 --> 01:55:12,750
install we grab all the apps instead of

2197
01:55:12,750 --> 01:55:14,280
from Splunk base we drive around from an

2198
01:55:14,280 --> 01:55:15,200
s3 bucket

2199
01:55:15,200 --> 01:55:17,790
Splunk base doesn't have an api today so

2200
01:55:17,790 --> 01:55:19,380
so this makes it really easy to just

2201
01:55:19,380 --> 01:55:21,090
grab apps and and also freeze the

2202
01:55:21,090 --> 01:55:23,070
version that we're using but if you

2203
01:55:23,070 --> 01:55:25,470
wanted a you know roll your own app into

2204
01:55:25,470 --> 01:55:27,840
Splunk you can set your own s3 bucket

2205
01:55:27,840 --> 01:55:29,820
and put the app in it as long as you you

2206
01:55:29,820 --> 01:55:33,870
pass the right name in here a question

2207
01:55:33,870 --> 01:55:36,060
will say a we we live in the binaries

2208
01:55:36,060 --> 01:55:41,310
for everybody we live in the Panda

2209
01:55:41,310 --> 01:55:43,110
this book is open to the

2210
01:55:43,110 --> 01:55:46,920
so okay yes sorry I'm not sure if I got

2211
01:55:46,920 --> 01:55:48,810
was the question well meaning meaning

2212
01:55:48,810 --> 01:55:52,260
you know they wanna do binaries for

2213
01:55:52,260 --> 01:55:56,010
example for for for the iso's and stuff

2214
01:55:56,010 --> 01:55:57,270
like that because i know things change

2215
01:55:57,270 --> 01:55:59,940
die pretty quick

2216
01:55:59,940 --> 01:56:01,980
there was a gentleman asking a question

2217
01:56:01,980 --> 01:56:05,100
about caldera we had to do some

2218
01:56:05,100 --> 01:56:07,440
adjustments because as the versions

2219
01:56:07,440 --> 01:56:12,360
change it affects our configuration so

2220
01:56:12,360 --> 01:56:14,820
that my question is we're trying to

2221
01:56:14,820 --> 01:56:17,550
provide stability on the on the lab

2222
01:56:17,550 --> 01:56:19,440
itself so we're leaving them there am I

2223
01:56:19,440 --> 01:56:22,380
correct yes that's correct

2224
01:56:22,380 --> 01:56:26,610
and actually to further that point we we

2225
01:56:26,610 --> 01:56:29,700
are we fork itami red team we're not

2226
01:56:29,700 --> 01:56:34,470
using itami red team as it is on the

2227
01:56:34,470 --> 01:56:37,200
project life we keep up work just for

2228
01:56:37,200 --> 01:56:38,790
stability purposes as you mentioned and

2229
01:56:38,790 --> 01:56:41,880
then same thing with caldera leave

2230
01:56:41,880 --> 01:56:44,610
before caldera as well and again this is

2231
01:56:44,610 --> 01:56:46,650
to avoid like any potential upstream

2232
01:56:46,650 --> 01:56:48,780
changes breaking the attack range build

2233
01:56:48,780 --> 01:56:52,140
process we typically update any fork we

2234
01:56:52,140 --> 01:56:57,210
have on a monthly Candice sometimes that

2235
01:56:57,210 --> 01:56:59,100
happens to be in two months but we

2236
01:56:59,100 --> 01:57:00,930
usually try to avoid you know slipping

2237
01:57:00,930 --> 01:57:02,850
on two months away from whatever the

2238
01:57:02,850 --> 01:57:06,780
projects I have is and and again for the

2239
01:57:06,780 --> 01:57:08,970
for this blonde cast we just keep a copy

2240
01:57:08,970 --> 01:57:12,930
of them on this open s3 bucket again all

2241
01:57:12,930 --> 01:57:14,820
of these are completely free and

2242
01:57:14,820 --> 01:57:18,600
available off Splunk base marketplace

2243
01:57:18,600 --> 01:57:22,110
but they again they don't offer an API

2244
01:57:22,110 --> 01:57:24,240
so is much easier it's good I got the

2245
01:57:24,240 --> 01:57:26,960
lava bucket

2246
01:57:27,090 --> 01:57:30,430
few more little notes here if have you

2247
01:57:30,430 --> 01:57:32,620
heard before about the bots dataset and

2248
01:57:32,620 --> 01:57:34,180
and some other cool work that the

2249
01:57:34,180 --> 01:57:36,550
specialists do security specialist is

2250
01:57:36,550 --> 01:57:39,100
plunk to UM you can have the boss

2251
01:57:39,100 --> 01:57:41,080
dataset pre-built which makes it this is

2252
01:57:41,080 --> 01:57:43,720
a set of data set already comes like

2253
01:57:43,720 --> 01:57:46,680
rebuilt attack scenarios then you can

2254
01:57:46,680 --> 01:57:49,239
install on the range of this blog server

2255
01:57:49,239 --> 01:57:50,680
as it comes up automatically if you

2256
01:57:50,680 --> 01:57:52,600
wanted a test with data that's already

2257
01:57:52,600 --> 01:57:54,730
there and available good explanation on

2258
01:57:54,730 --> 01:57:57,220
the right on the we meet again phantom

2259
01:57:57,220 --> 01:58:00,070
server pretty straightforward it's gonna

2260
01:58:00,070 --> 01:58:02,110
need a phantom community username and

2261
01:58:02,110 --> 01:58:03,820
password if you have to install other

2262
01:58:03,820 --> 01:58:06,310
apps and together to ralph anthem since

2263
01:58:06,310 --> 01:58:08,590
phantom I think it is paper but there's

2264
01:58:08,590 --> 01:58:11,650
a free version for it he's starting to

2265
01:58:11,650 --> 01:58:16,140
login to the community and then Windows

2266
01:58:16,140 --> 01:58:18,370
again we're also passing the windows

2267
01:58:18,370 --> 01:58:19,930
forward or you're all here right you can

2268
01:58:19,930 --> 01:58:22,030
change whatever forward or you want to

2269
01:58:22,030 --> 01:58:23,320
put whatever version for do you want to

2270
01:58:23,320 --> 01:58:27,070
use for for Splunk and and system on

2271
01:58:27,070 --> 01:58:28,870
another thing that we're doing with this

2272
01:58:28,870 --> 01:58:30,280
man and this is again something that

2273
01:58:30,280 --> 01:58:33,250
just completely bit us as well was right

2274
01:58:33,250 --> 01:58:35,440
now we were starting system all right

2275
01:58:35,440 --> 01:58:38,400
from our from our s3 bucket but that's

2276
01:58:38,400 --> 01:58:41,100
again because we had a situation where

2277
01:58:41,100 --> 01:58:44,260
version 11 us as mom had a bug

2278
01:58:44,260 --> 01:58:45,880
we were downloading it right from

2279
01:58:45,880 --> 01:58:48,210
Microsoft Microsoft doesn't provide

2280
01:58:48,210 --> 01:58:50,620
version or the previous version of

2281
01:58:50,620 --> 01:58:52,750
system on and so you're all you only

2282
01:58:52,750 --> 01:58:54,460
always pull it from the latest and this

2283
01:58:54,460 --> 01:58:58,239
thi point for about two days so right

2284
01:58:58,239 --> 01:59:00,250
now we're just kind of freezing I think

2285
01:59:00,250 --> 01:59:04,510
we're on version 1.0 sorry eleven point

2286
01:59:04,510 --> 01:59:07,000
zero one they just released point zero

2287
01:59:07,000 --> 01:59:10,300
two recently so we're about one minor

2288
01:59:10,300 --> 01:59:13,989
release behind on so smart again if you

2289
01:59:13,989 --> 01:59:15,220
want to just download it right into your

2290
01:59:15,220 --> 01:59:17,170
bucket this you can point right back to

2291
01:59:17,170 --> 01:59:18,250
your bucket here you don't have to use

2292
01:59:18,250 --> 01:59:21,130
harsh you're not to trust us okay and

2293
01:59:21,130 --> 01:59:23,620
and then the system on the system on

2294
01:59:23,620 --> 01:59:26,110
configuration for a Taylor Swift you

2295
01:59:26,110 --> 01:59:27,489
just pass the file here I'll show in a

2296
01:59:27,489 --> 01:59:29,260
second where this file is coming from is

2297
01:59:29,260 --> 01:59:31,510
not very obvious but we have some people

2298
01:59:31,510 --> 01:59:34,410
come fix for six months already like the

2299
01:59:34,410 --> 01:59:37,480
forum's Roth server and Waystation

2300
01:59:37,480 --> 01:59:40,570
config taylor swift and also all

2301
01:59:40,570 --> 01:59:44,920
hard times as well if you want to play

2302
01:59:44,920 --> 01:59:46,360
with an upper security something that

2303
01:59:46,360 --> 01:59:47,970
you can just turn on this does require

2304
01:59:47,970 --> 01:59:51,220
this does require enterprise security

2305
01:59:51,220 --> 01:59:52,960
download and installed under the apps

2306
01:59:52,960 --> 01:59:55,360
folder on this project a guy on a

2307
01:59:55,360 --> 01:59:57,720
persecute is paid for its punks them and

2308
01:59:57,720 --> 02:00:00,490
it does change the way you reach plunk

2309
02:00:00,490 --> 02:00:03,930
to use HTTPS instead of HTTP by default

2310
02:00:03,930 --> 02:00:06,370
and when you pass it whatever you put in

2311
02:00:06,370 --> 02:00:07,600
the folder make sure the file name

2312
02:00:07,600 --> 02:00:11,440
matches the found in here this setting

2313
02:00:11,440 --> 02:00:12,940
allows you installed in this Blanca

2314
02:00:12,940 --> 02:00:16,080
machine learning toolkit again flip 1-0

2315
02:00:16,080 --> 02:00:18,240
do some machine stuff

2316
02:00:18,240 --> 02:00:23,920
this allows you to configure splines

2317
02:00:23,920 --> 02:00:25,240
data stream processing so if you want to

2318
02:00:25,240 --> 02:00:30,160
send data out of a DSP I I'm gonna jump

2319
02:00:30,160 --> 02:00:31,300
through this so there's a lot of

2320
02:00:31,300 --> 02:00:33,400
features in here but I'm gonna I want

2321
02:00:33,400 --> 02:00:35,320
for the sake of time I want to focus on

2322
02:00:35,320 --> 02:00:38,230
the the main main stuff which is here

2323
02:00:38,230 --> 02:00:43,570
the environment configuration the

2324
02:00:43,570 --> 02:00:48,220
environment the Palazzo in the

2325
02:00:48,220 --> 02:00:52,990
environment configuration you can jump

2326
02:00:52,990 --> 02:00:53,290
around

2327
02:00:53,290 --> 02:00:56,440
that's it again you can select phantom

2328
02:00:56,440 --> 02:00:58,300
servers on a build one if you want to

2329
02:00:58,300 --> 02:00:59,860
build by default we build the domain

2330
02:00:59,860 --> 02:01:02,440
controller a windows server or a column

2331
02:01:02,440 --> 02:01:03,880
machine in this case i want to build a

2332
02:01:03,880 --> 02:01:05,800
colleague machine so i'm going to go

2333
02:01:05,800 --> 02:01:08,130
ahead and

2334
02:01:10,970 --> 02:01:16,190
I'm going to set this to one as well and

2335
02:01:16,190 --> 02:01:17,630
then everything else here is like if you

2336
02:01:17,630 --> 02:01:20,330
want to shoot the private the private

2337
02:01:20,330 --> 02:01:23,720
IDs when they come out or I wouldn't

2338
02:01:23,720 --> 02:01:25,630
recommend you to pay too much with this

2339
02:01:25,630 --> 02:01:27,740
honest you really know what you're doing

2340
02:01:27,740 --> 02:01:29,510
but it's all kinds of settings are like

2341
02:01:29,510 --> 02:01:31,400
parameters like you know what was

2342
02:01:31,400 --> 02:01:34,190
version of my image you want to use if

2343
02:01:34,190 --> 02:01:36,250
you want the clients to join the domain

2344
02:01:36,250 --> 02:01:39,410
again the cloud attack wench environment

2345
02:01:39,410 --> 02:01:40,730
is set up there as well

2346
02:01:40,730 --> 02:01:42,140
it's usable we just don't have any

2347
02:01:42,140 --> 02:01:45,890
simulation ninjas for it out of box but

2348
02:01:45,890 --> 02:01:47,810
that's the config file again the

2349
02:01:47,810 --> 02:01:49,010
parameters we ended up changing where

2350
02:01:49,010 --> 02:01:52,040
the key just going real quick let me go

2351
02:01:52,040 --> 02:01:56,180
back up the the key name and the region

2352
02:01:56,180 --> 02:01:57,820
in this case and the default password

2353
02:01:57,820 --> 02:02:02,840
let me let's get building so I mentioned

2354
02:02:02,840 --> 02:02:05,980
earlier building takes about 15 minutes

2355
02:02:05,980 --> 02:02:09,650
so we likely won't finish building but I

2356
02:02:09,650 --> 02:02:10,850
am gonna go jump into another

2357
02:02:10,850 --> 02:02:12,260
environment just to show you attack

2358
02:02:12,260 --> 02:02:16,880
simulation and how that looks so no tear

2359
02:02:16,880 --> 02:02:20,290
form because this were prepping for

2360
02:02:20,290 --> 02:02:26,900
action build and there we go it throws a

2361
02:02:26,900 --> 02:02:28,430
message about Baker not being there

2362
02:02:28,430 --> 02:02:29,750
because we never installed it we're not

2363
02:02:29,750 --> 02:02:33,230
building this for me good but see if I

2364
02:02:33,230 --> 02:02:35,030
did everything right this should just

2365
02:02:35,030 --> 02:02:36,860
start going yep it looks like a lease

2366
02:02:36,860 --> 02:02:39,800
terraform was able to start working so

2367
02:02:39,800 --> 02:02:41,630
it's now creating all the different

2368
02:02:41,630 --> 02:02:45,290
pieces in AWS for this range if we were

2369
02:02:45,290 --> 02:02:51,580
select V PC the subnets the route tables

2370
02:02:58,930 --> 02:03:01,520
the main controller just I think the

2371
02:03:01,520 --> 02:03:02,059
machines

2372
02:03:02,059 --> 02:03:04,340
if I flip over to Firefox you're gonna

2373
02:03:04,340 --> 02:03:07,670
see this stuff come up here let me let

2374
02:03:07,670 --> 02:03:10,520
me let me show you what this looks up on

2375
02:03:10,520 --> 02:03:15,619
there under AWS I'm just gonna filter by

2376
02:03:15,619 --> 02:03:25,010
our key name the FAQ range 6 and I

2377
02:03:25,010 --> 02:03:30,409
should be getting machine's going so

2378
02:03:30,409 --> 02:03:33,400
this isn't terribly wrong

2379
02:03:35,230 --> 02:03:42,679
it takes a little bit yeah it takes a

2380
02:03:42,679 --> 02:03:52,389
little bit see here

2381
02:03:53,500 --> 02:03:55,720
you know I must have done something

2382
02:03:55,720 --> 02:04:02,550
because I don't see I don't see the

2383
02:04:02,550 --> 02:04:04,960
machines come down they may be coming up

2384
02:04:04,960 --> 02:04:11,830
in another region you're you're no

2385
02:04:11,830 --> 02:04:15,010
higher you're in Ohio are you the usual

2386
02:04:15,010 --> 02:04:17,520
at the East well East if you say loser

2387
02:04:17,520 --> 02:04:23,760
okay yeah us is too

2388
02:04:23,910 --> 02:04:25,990
he's gonna get a minute it's only around

2389
02:04:25,990 --> 02:04:29,730
for a minute so I mean not even being

2390
02:04:30,150 --> 02:04:38,350
let's give it a minute I said unless I

2391
02:04:38,350 --> 02:04:41,050
didn't say but this is good a minute

2392
02:04:41,050 --> 02:04:44,230
well this is going I want to show again

2393
02:04:44,230 --> 02:04:45,520
for the sake of time I'm gonna jump into

2394
02:04:45,520 --> 02:04:49,600
another range this guy's building I mean

2395
02:04:49,600 --> 02:04:50,950
again you can run this on your local

2396
02:04:50,950 --> 02:04:52,660
machine if you're interested or just as

2397
02:04:52,660 --> 02:04:55,000
try and rebuild the career angel we

2398
02:04:55,000 --> 02:04:57,310
shared you'll see the process but it's a

2399
02:04:57,310 --> 02:05:00,190
lot of cool stuff like again it created

2400
02:05:00,190 --> 02:05:03,970
the instances in this case it's it's

2401
02:05:03,970 --> 02:05:05,410
here you see it trying to connect to the

2402
02:05:05,410 --> 02:05:07,440
instances actually I think that's yeah

2403
02:05:07,440 --> 02:05:09,850
another just trying to connect to the

2404
02:05:09,850 --> 02:05:11,560
different instances then it runs ansible

2405
02:05:11,560 --> 02:05:13,630
to provision a and then it goes ahead

2406
02:05:13,630 --> 02:05:14,950
and starts like in this case is building

2407
02:05:14,950 --> 02:05:17,230
the domain controller which you're

2408
02:05:17,230 --> 02:05:19,480
looking at the Amazon you have to switch

2409
02:05:19,480 --> 02:05:26,380
to the CLI yeah so yeah you see here

2410
02:05:26,380 --> 02:05:29,800
again gonna do all the aw stuff bring up

2411
02:05:29,800 --> 02:05:32,190
the past and try to connect to it and

2412
02:05:32,190 --> 02:05:34,450
you see here trying to connect this is

2413
02:05:34,450 --> 02:05:35,620
waiting for the mission to I should come

2414
02:05:35,620 --> 02:05:40,410
up and then OSS age into the Machine and

2415
02:05:41,950 --> 02:05:46,320
yes yes I can actually

2416
02:05:47,360 --> 02:05:50,710
we see is that a little better

2417
02:05:51,430 --> 02:05:53,730
that's wise

2418
02:05:55,710 --> 02:05:58,930
there you so it's it's it's it's coming

2419
02:05:58,930 --> 02:06:01,390
up you see at stake disable Windows

2420
02:06:01,390 --> 02:06:02,650
Defender we disable Windows Defender

2421
02:06:02,650 --> 02:06:03,730
because sometimes when you're emulating

2422
02:06:03,730 --> 02:06:06,900
certain stuff you know you don't want

2423
02:06:06,900 --> 02:06:09,430
your like interpretation to get in the

2424
02:06:09,430 --> 02:06:11,950
way but are you can go in there and turn

2425
02:06:11,950 --> 02:06:14,290
it on so that's actually smaller if you

2426
02:06:14,290 --> 02:06:17,920
want to make it a little bigger it's

2427
02:06:17,920 --> 02:06:22,780
actually smaller sorry the one that you

2428
02:06:22,780 --> 02:06:26,230
had before was better that's better

2429
02:06:26,230 --> 02:06:29,110
okay that's right there that's not

2430
02:06:29,110 --> 02:06:35,040
better yeah yeah

2431
02:06:39,399 --> 02:06:43,030
all right so let's just what this this

2432
02:06:43,030 --> 02:06:45,789
range is building here why don't we go

2433
02:06:45,789 --> 02:06:51,369
and launch an attack against Warner and

2434
02:06:51,369 --> 02:06:52,539
then we'll figure out what this one

2435
02:06:52,539 --> 02:06:53,739
landed I almost made a mistake I don't

2436
02:06:53,739 --> 02:06:57,639
know why it's I'm not seen it me through

2437
02:06:57,639 --> 02:06:59,800
propaganda fact that this is get rid of

2438
02:06:59,800 --> 02:07:03,280
my two monitors water so so I have

2439
02:07:03,280 --> 02:07:05,919
another range of another four range

2440
02:07:05,919 --> 02:07:10,449
running on there under another

2441
02:07:10,449 --> 02:07:14,319
controller so I'm just gonna association

2442
02:07:14,319 --> 02:07:15,639
to it this has already been built

2443
02:07:15,639 --> 02:07:22,439
let me just grab IP address for it and

2444
02:07:22,439 --> 02:07:25,800
jump rent it

2445
02:07:34,610 --> 02:07:38,030
so controller one I'm going to see D in

2446
02:07:38,030 --> 02:07:40,280
this case to the attack range directory

2447
02:07:40,280 --> 02:07:43,900
I kind of enacted a I'm gonna activate

2448
02:07:43,900 --> 02:07:46,730
my environment that we have on the

2449
02:07:46,730 --> 02:07:50,960
dependency so which Python should be my

2450
02:07:50,960 --> 02:07:53,780
hip my environments Python and if I run

2451
02:07:53,780 --> 02:07:58,610
the attack linear mode terraform going

2452
02:07:58,610 --> 02:08:01,160
to and then I'm going to run this

2453
02:08:01,160 --> 02:08:03,470
machine plug so LM means list machines

2454
02:08:03,470 --> 02:08:07,040
this is the flag that actually prints

2455
02:08:07,040 --> 02:08:09,260
out what's running for you so you'll see

2456
02:08:09,260 --> 02:08:10,520
in a second in this auditorium you know

2457
02:08:10,520 --> 02:08:13,970
when this finishes up that we get the

2458
02:08:13,970 --> 02:08:16,070
same print off but let me make this a

2459
02:08:16,070 --> 02:08:21,070
little bit bigger since I know that I

2460
02:08:21,070 --> 02:08:24,400
clearly hasn't been perfectly like oh

2461
02:08:24,400 --> 02:08:27,230
yeah that letters were not necessarily

2462
02:08:27,230 --> 02:08:32,540
perfectly was him but odd okay this

2463
02:08:32,540 --> 02:08:34,250
machine so that the one thing I wanted

2464
02:08:34,250 --> 02:08:36,200
to share here let's let's try to launch

2465
02:08:36,200 --> 02:08:38,990
an attack and and and see what that

2466
02:08:38,990 --> 02:08:41,030
looks like but before we launch the

2467
02:08:41,030 --> 02:08:42,950
attack it I mean browse to the Splunk

2468
02:08:42,950 --> 02:08:45,470
server and just verify that everything

2469
02:08:45,470 --> 02:08:47,900
is running that's it it shouldn't be

2470
02:08:47,900 --> 02:08:50,600
happy any attacks in it yet so let's

2471
02:08:50,600 --> 02:08:53,060
let's let's flip back to firefox and do

2472
02:08:53,060 --> 02:08:55,270
that

2473
02:08:58,389 --> 02:09:04,489
- HTTP 40,000 the AP from the server

2474
02:09:04,489 --> 02:09:07,639
that I just copy and pasted and in this

2475
02:09:07,639 --> 02:09:11,630
case is I'm man let me grab the password

2476
02:09:11,630 --> 02:09:19,750
for this range one second here

2477
02:09:19,750 --> 02:09:23,949
all right got the password in there

2478
02:09:25,079 --> 02:09:27,570
I usually copy the password somewhere

2479
02:09:27,570 --> 02:09:30,210
once I put it in the config cuz then you

2480
02:09:30,210 --> 02:09:36,210
forget about it yeah so by default Raj

2481
02:09:36,210 --> 02:09:38,369
showed us this earlier but you see like

2482
02:09:38,369 --> 02:09:41,070
this nice like a boot up launcher we're

2483
02:09:41,070 --> 02:09:42,869
like how many simulations with rounds so

2484
02:09:42,869 --> 02:09:45,690
on and so forth if I go to the search

2485
02:09:45,690 --> 02:09:49,139
and reporting first block here we'll see

2486
02:09:49,139 --> 02:09:50,130
there's really bunch of advanced

2487
02:09:50,130 --> 02:09:51,449
spending index because this range has

2488
02:09:51,449 --> 02:09:52,679
been running for two or three days now

2489
02:09:52,679 --> 02:09:55,650
and and you've seen under source types

2490
02:09:55,650 --> 02:09:57,900
really we have Windows event logs we

2491
02:09:57,900 --> 02:09:59,809
have network logs from streams and B&S

2492
02:09:59,809 --> 02:10:04,099
and and and some of this assessment and

2493
02:10:04,099 --> 02:10:06,360
specifically there's an index that we

2494
02:10:06,360 --> 02:10:07,739
ship with the range called a tap and

2495
02:10:07,739 --> 02:10:09,840
that and this is what actually has the

2496
02:10:09,840 --> 02:10:11,400
different attacks it's now completely

2497
02:10:11,400 --> 02:10:15,000
empty so that's what I would expect so

2498
02:10:15,000 --> 02:10:16,320
let's let's put a black and start

2499
02:10:16,320 --> 02:10:20,790
hammering hammering this range go python

2500
02:10:20,790 --> 02:10:27,030
attack range lower terraform and then in

2501
02:10:27,030 --> 02:10:29,489
this case action similar right we're not

2502
02:10:29,489 --> 02:10:30,750
when i building in this case we're

2503
02:10:30,750 --> 02:10:33,210
simulating and then we're gonna pass it

2504
02:10:33,210 --> 02:10:36,300
the simulation technique being lazy in

2505
02:10:36,300 --> 02:10:37,290
this case i'm going to take the whole

2506
02:10:37,290 --> 02:10:39,750
thing but that's a show hand for st and

2507
02:10:39,750 --> 02:10:41,639
the simulation technique in this case

2508
02:10:41,639 --> 02:10:43,590
let's launch it for the demo credential

2509
02:10:43,590 --> 02:10:47,300
dumping and and again just for clarity

2510
02:10:47,300 --> 02:10:49,380
what's happening under the world in a

2511
02:10:49,380 --> 02:10:51,150
second I'll show you once the attack

2512
02:10:51,150 --> 02:10:54,119
runs but this reference comes from the

2513
02:10:54,119 --> 02:10:56,280
miter technique but specifically the the

2514
02:10:56,280 --> 02:10:59,460
the mighty technique eg that belongs to

2515
02:10:59,460 --> 02:11:03,119
an atomic and ultimately I'll show up

2516
02:11:03,119 --> 02:11:04,650
again I'll share in a second where this

2517
02:11:04,650 --> 02:11:06,420
specifically comes from so you can see

2518
02:11:06,420 --> 02:11:08,670
what simulation techniques are available

2519
02:11:08,670 --> 02:11:10,500
out of the box in the range but let's

2520
02:11:10,500 --> 02:11:12,480
try credential dumping this is gonna run

2521
02:11:12,480 --> 02:11:14,219
I think about 17 different ways the

2522
02:11:14,219 --> 02:11:16,739
credential nothing happens and then

2523
02:11:16,739 --> 02:11:20,010
we're gonna give it a target a target

2524
02:11:20,010 --> 02:11:21,630
machine in this case is the domain

2525
02:11:21,630 --> 02:11:27,300
controller if I can copy

2526
02:11:27,300 --> 02:11:33,469
Kirk target boom so

2527
02:11:34,630 --> 02:11:36,699
here we go it's gonna it's going to

2528
02:11:36,699 --> 02:11:40,840
start launching the attack just give it

2529
02:11:40,840 --> 02:11:43,860
a few seconds

2530
02:11:46,540 --> 02:11:49,540
hoping their works could have

2531
02:11:49,540 --> 02:11:53,950
fail such as life at the now did not get

2532
02:11:53,950 --> 02:11:57,290
my often to them or got this morning so

2533
02:11:57,290 --> 02:11:59,350
you

2534
02:11:59,610 --> 02:12:03,910
underdog machine died at some point that

2535
02:12:03,910 --> 02:12:05,100
is also possible

2536
02:12:05,100 --> 02:12:07,450
since usually you get like some

2537
02:12:07,450 --> 02:12:10,559
connection screen right afterwards

2538
02:12:10,710 --> 02:12:13,270
well this is going let me let me double

2539
02:12:13,270 --> 02:12:15,430
check water cross like what our progress

2540
02:12:15,430 --> 02:12:16,690
is so far on the other Ranger than

2541
02:12:16,690 --> 02:12:19,019
building

2542
02:12:19,420 --> 02:12:21,670
all right so this is still burning the

2543
02:12:21,670 --> 02:12:26,440
windows server again the domain

2544
02:12:26,440 --> 02:12:28,390
controller it's about nine minutes in

2545
02:12:28,390 --> 02:12:31,210
good finish like I mentioned usually

2546
02:12:31,210 --> 02:12:34,890
I'll take my own 15 for the whole thing

2547
02:12:35,670 --> 02:12:38,670
okay

2548
02:12:39,000 --> 02:12:48,070
I'm matter how to demo failure you know

2549
02:12:48,070 --> 02:12:50,770
what let me try to IDP or first let me

2550
02:12:50,770 --> 02:12:52,810
make sure this is still running on each

2551
02:12:52,810 --> 02:12:54,610
other RDP into this instance it may be

2552
02:12:54,610 --> 02:12:58,390
that I just have to bump it give me one

2553
02:12:58,390 --> 02:13:02,350
second remote desktop like Rob mentioned

2554
02:13:02,350 --> 02:13:04,180
earlier these machines are these

2555
02:13:04,180 --> 02:13:05,860
distances are full-blown machines

2556
02:13:05,860 --> 02:13:11,020
there's nothing there's not no

2557
02:13:11,020 --> 02:13:12,790
difference between full-blown machine

2558
02:13:12,790 --> 02:13:16,330
and this that's it's running this means

2559
02:13:16,330 --> 02:13:18,400
it's running a full PC to Windows Server

2560
02:13:18,400 --> 02:13:24,070
Oh finally connected never mind I just

2561
02:13:24,070 --> 02:13:26,290
wait a second I took quite some time

2562
02:13:26,290 --> 02:13:29,100
it's really pretty fast

2563
02:13:29,160 --> 02:13:31,220
you

2564
02:13:33,500 --> 02:13:37,730
hey so first thing it's gonna go ahead

2565
02:13:37,730 --> 02:13:40,280
and install like a time we're a team if

2566
02:13:40,280 --> 02:13:43,070
it's not installed on the box the agent

2567
02:13:43,070 --> 02:13:45,770
and and then once its installed it like

2568
02:13:45,770 --> 02:13:47,530
doesn't like minor configurations and

2569
02:13:47,530 --> 02:13:50,660
something went wrong this scene this

2570
02:13:50,660 --> 02:13:51,920
were like when our I'm sometimes will

2571
02:13:51,920 --> 02:13:54,530
crash let me let me restart that

2572
02:13:54,530 --> 02:13:57,560
instance specifically this Windows

2573
02:13:57,560 --> 02:13:59,540
domain controller this range specific

2574
02:13:59,540 --> 02:14:01,310
around for a few days so I you suspect

2575
02:14:01,310 --> 02:14:03,110
something wasn't gone wrong with that

2576
02:14:03,110 --> 02:14:06,050
instance so let's just find it here in

2577
02:14:06,050 --> 02:14:09,080
Firefox to tell you did you do

2578
02:14:09,080 --> 02:14:12,650
I'm specifically Justin stands up now

2579
02:14:12,650 --> 02:14:23,000
last year you'd rather write this is

2580
02:14:23,000 --> 02:14:40,870
there I'm in the wrong I can't let me

2581
02:14:40,870 --> 02:14:43,130
and I don't want to destroy our me build

2582
02:14:43,130 --> 02:14:44,150
it because we're gonna be another ten

2583
02:14:44,150 --> 02:14:46,850
minutes here waiting for this to destroy

2584
02:14:46,850 --> 02:14:49,090
and rebuild

2585
02:14:55,809 --> 02:15:00,050
two minutes I'm logging into WS account

2586
02:15:00,050 --> 02:15:03,469
for assistance so I can go ahead and I

2587
02:15:03,469 --> 02:15:06,189
mean I just hardly put that instance ton

2588
02:15:06,189 --> 02:15:10,070
Microsoft Windows instance during the

2589
02:15:10,070 --> 02:15:11,719
meantime let's just keep checking the

2590
02:15:11,719 --> 02:15:15,439
status on our other inch build it's

2591
02:15:15,439 --> 02:15:19,030
getting close to being almost done

2592
02:15:22,820 --> 02:15:24,880
you

2593
02:15:29,000 --> 02:15:31,990
we go

2594
02:15:34,660 --> 02:15:36,720
you

2595
02:15:50,780 --> 02:15:54,630
just to show you I visited the main

2596
02:15:54,630 --> 02:15:56,840
controls gonna go ahead and reboot them

2597
02:15:56,840 --> 02:15:59,699
and hopefully you know when in doubt

2598
02:15:59,699 --> 02:16:02,790
reboot three times should probably RDP

2599
02:16:02,790 --> 02:16:04,410
into it but I just for sake of time I'm

2600
02:16:04,410 --> 02:16:06,510
gonna go and troubleshoot I'm just gonna

2601
02:16:06,510 --> 02:16:07,560
be booted if it doesn't come up with

2602
02:16:07,560 --> 02:16:10,110
just wait for this guy to finish it was

2603
02:16:10,110 --> 02:16:13,519
just this awesome example for attacking

2604
02:16:13,699 --> 02:16:16,110
away for this range to finish but the

2605
02:16:16,110 --> 02:16:19,370
worst case scenario let's see what that

2606
02:16:19,370 --> 02:16:23,130
that's coming up let me just do a list

2607
02:16:23,130 --> 02:16:28,500
machine let's try to IDP make sure again

2608
02:16:28,500 --> 02:16:32,000
the server comes up and it works well

2609
02:16:44,740 --> 02:16:48,699
she looks like it's back up

2610
02:16:51,218 --> 02:16:54,968
I'm gonna go ahead and copy the password

2611
02:16:54,968 --> 02:16:57,509
for it

2612
02:17:03,780 --> 02:17:05,840
you

2613
02:17:11,718 --> 02:17:13,778
you

2614
02:17:13,841 --> 02:17:17,180
should be seen now there's a Windows

2615
02:17:17,180 --> 02:17:20,770
kind of login screen

2616
02:17:21,189 --> 02:17:26,019
roar can you confirm for me yeah I see

2617
02:17:26,019 --> 02:17:27,728
the login screen you're already being

2618
02:17:27,728 --> 02:17:28,379
right

2619
02:17:28,379 --> 02:17:32,978
yeah I'm just yeah it has to create a

2620
02:17:32,978 --> 02:17:34,599
profile if you're logging for the first

2621
02:17:34,599 --> 02:17:37,119
time and then it should be the splash

2622
02:17:37,119 --> 02:17:37,779
there you go

2623
02:17:37,779 --> 02:17:43,269
you are great sweet yeah are there and

2624
02:17:43,269 --> 02:17:45,789
was completely unplanned shutdown yeah

2625
02:17:45,789 --> 02:17:49,679
yeah I was implying yes sorry

2626
02:17:49,679 --> 02:17:53,978
alright so okay so let's see if this

2627
02:17:53,978 --> 02:17:55,989
actually took care of a little hang-up

2628
02:17:55,989 --> 02:17:59,859
earlier I'm gonna flip back to I'm gonna

2629
02:17:59,859 --> 02:18:02,639
flip back to my terminal

2630
02:18:05,990 --> 02:18:09,570
all right so let's try to launch this

2631
02:18:09,570 --> 02:18:16,200
attack one more time there you go

2632
02:18:16,200 --> 02:18:17,790
this time we're gonna have luck I hope

2633
02:18:17,790 --> 02:18:20,849
ya went through yeah yeah yeah usually

2634
02:18:20,849 --> 02:18:22,410
against is really pretty instant that

2635
02:18:22,410 --> 02:18:24,150
you know what I've seen happen I think

2636
02:18:24,150 --> 02:18:30,840
I'll win on dice it's Oh Phil again this

2637
02:18:30,840 --> 02:18:34,849
seems to have any winner image section

2638
02:18:34,849 --> 02:18:46,709
credentials here we have a word I made a

2639
02:18:46,709 --> 02:18:51,510
mistake in that sensational they they

2640
02:18:51,510 --> 02:18:56,180
complete Association

2641
02:18:56,180 --> 02:19:07,280
you failed this guy no public key thank

2642
02:19:07,280 --> 02:19:16,850
you my SSH keys yep yes that is we don't

2643
02:19:16,850 --> 02:19:27,080
yes fish okay and who is the sugar you

2644
02:19:27,080 --> 02:19:28,750
know one second let me just verify this

2645
02:19:28,750 --> 02:19:33,260
server oh one right one nice thing is

2646
02:19:33,260 --> 02:19:37,250
when things fail at times when you run

2647
02:19:37,250 --> 02:19:38,719
through from you may not have to rebuild

2648
02:19:38,719 --> 02:19:41,570
from scratch it's not necessarily a

2649
02:19:41,570 --> 02:19:44,719
requirement which is critical the

2650
02:19:44,719 --> 02:19:46,280
terraformer know like just to rebuild

2651
02:19:46,280 --> 02:19:57,720
that instance that went bad I'm checking

2652
02:19:57,720 --> 02:20:00,210
really quickly just to see which is the

2653
02:20:00,210 --> 02:20:03,140
one that I fell to log into

2654
02:20:06,780 --> 02:20:12,460
change oh you know what that's the

2655
02:20:12,460 --> 02:20:15,490
problem I got it on the wrong region you

2656
02:20:15,490 --> 02:20:19,931
see I don't see this phone I must I must

2657
02:20:19,931 --> 02:20:26,471
look at it and I say bit I'm just sure

2658
02:20:26,471 --> 02:20:27,580
I'm in the right yeah well that's

2659
02:20:27,580 --> 02:20:32,740
exactly what happened how are we doing

2660
02:20:32,740 --> 02:20:35,590
on time I just want to show even more

2661
02:20:35,590 --> 02:20:37,650
cutting into another person first home

2662
02:20:37,650 --> 02:20:41,051
nope you have plenty of time yeah what

2663
02:20:41,051 --> 02:20:43,570
sample will stay as long as we you know

2664
02:20:43,570 --> 02:20:46,210
it's very comfortable with know you guys

2665
02:20:46,210 --> 02:20:49,150
have yeah you guys have it into you too

2666
02:20:49,150 --> 02:20:52,480
you're done Thank You Joseph yeah this

2667
02:20:52,480 --> 02:20:56,830
is this is this is uh this is good this

2668
02:20:56,830 --> 02:20:59,950
is part of the process yep you're not

2669
02:20:59,950 --> 02:21:01,181
gonna you're not learning if you're not

2670
02:21:01,181 --> 02:21:02,801
breaking something or running into

2671
02:21:02,801 --> 02:21:07,690
problems yeah I made a mistake here I'd

2672
02:21:07,690 --> 02:21:09,940
never saved the complete power and I got

2673
02:21:09,940 --> 02:21:11,650
so excited and around my build right

2674
02:21:11,650 --> 02:21:15,521
without it without this H key well

2675
02:21:15,521 --> 02:21:17,410
without the key or without the actual

2676
02:21:17,410 --> 02:21:21,511
region which is why I was never known

2677
02:21:22,620 --> 02:21:30,011
yeah yeah all my people might do the

2678
02:21:30,011 --> 02:21:31,660
same thing now they're learning from

2679
02:21:31,660 --> 02:21:38,110
that so here we are I am going to again

2680
02:21:38,110 --> 02:21:39,521
just run through the steps of what I can

2681
02:21:39,521 --> 02:21:40,690
pretty earlier and I'm gonna go ahead

2682
02:21:40,690 --> 02:21:44,610
and change my passwords I'm gonna put my

2683
02:21:44,610 --> 02:21:51,580
clinician in here and then I'm gonna go

2684
02:21:51,580 --> 02:22:00,370
ahead and just remove the let me do a

2685
02:22:00,370 --> 02:22:04,021
destroy for these if I do an hour ago

2686
02:22:04,021 --> 02:22:11,070
goes ahead and destroy servers there now

2687
02:22:12,420 --> 02:22:14,479
you

2688
02:22:16,689 --> 02:22:21,160
you know let me just short out the first

2689
02:23:06,370 --> 02:23:08,660
I'm just building the hotel from thing

2690
02:23:08,660 --> 02:23:11,600
right now it looks like I broke it

2691
02:23:11,600 --> 02:23:28,820
pretty bad here we go and you should do

2692
02:23:28,820 --> 02:23:31,880
another build this time around hopefully

2693
02:23:31,880 --> 02:23:35,210
were in the right region let me login to

2694
02:23:35,210 --> 02:23:38,450
AWS again and see this thing come up

2695
02:23:38,450 --> 02:23:41,410
again

2696
02:23:54,271 --> 02:24:02,681
Lapeer my so at our Grange teen six how

2697
02:24:02,681 --> 02:24:04,301
there you go now we've seen the actual

2698
02:24:04,301 --> 02:24:06,190
machines come up that's why I was

2699
02:24:06,190 --> 02:24:07,931
reinterred I'm like hey why isn't where

2700
02:24:07,931 --> 02:24:09,160
do I see the machines right so now it's

2701
02:24:09,160 --> 02:24:10,771
actually creating them

2702
02:24:10,771 --> 02:24:12,870
alright let's just give it another whirl

2703
02:24:12,870 --> 02:24:15,250
while this is going I'm gonna go ahead

2704
02:24:15,250 --> 02:24:20,200
and destroy destroy the other instance

2705
02:24:20,200 --> 02:24:23,920
that we left dangling around and uswest

2706
02:24:23,920 --> 02:24:25,561
give me two seconds

2707
02:24:25,561 --> 02:24:29,561
just so I can do some cleanup and then

2708
02:24:29,561 --> 02:24:31,391
let me again just double check here the

2709
02:24:31,391 --> 02:24:32,980
build process make sure I was just

2710
02:24:32,980 --> 02:24:35,551
looking okay

2711
02:24:48,630 --> 02:24:51,800
all right

2712
02:24:51,800 --> 02:24:54,939
also let me double check this cord

2713
02:24:54,939 --> 02:25:05,770
anybody there's no dang

2714
02:25:08,721 --> 02:25:13,051
all right so this is coming back up this

2715
02:25:13,051 --> 02:25:16,561
is good this range I don't know what

2716
02:25:16,561 --> 02:25:18,570
ended up happening here with the team

2717
02:25:18,570 --> 02:25:23,700
one so the controller one we can do it

2718
02:25:23,700 --> 02:25:26,601
destroy and rebuild - why not

2719
02:25:26,601 --> 02:25:30,779
little got sound of two ranges

2720
02:25:30,779 --> 02:25:32,820
a lot of one

2721
02:25:32,820 --> 02:25:34,880
you

2722
02:25:37,910 --> 02:25:42,240
who doesn't like to multitask destroyed

2723
02:25:42,240 --> 02:25:43,110
by though it's pretty straightforward

2724
02:25:43,110 --> 02:25:45,900
you see here AG action destroy and it's

2725
02:25:45,900 --> 02:25:47,729
gonna literally undo everything you did

2726
02:25:47,729 --> 02:25:52,280
on your AWS account straight out tables

2727
02:25:52,280 --> 02:25:56,250
the PPC the Rugby Association the actual

2728
02:25:56,250 --> 02:26:01,439
server for Splunk Kali so on and so

2729
02:26:01,439 --> 02:26:06,270
forth slowly looking the environment

2730
02:26:06,270 --> 02:26:14,550
from orbit I'm sorry I just I flipped

2731
02:26:14,550 --> 02:26:16,350
back to the build this is already

2732
02:26:16,350 --> 02:26:20,070
building colleague nice building

2733
02:26:20,070 --> 02:26:23,120
colleague loving just Blanc search head

2734
02:26:23,120 --> 02:26:25,010
and the wind sir

2735
02:26:25,010 --> 02:26:27,360
so things look like they're progressing

2736
02:26:27,360 --> 02:26:32,670
okay just flipping back here if faced by

2737
02:26:32,670 --> 02:26:36,450
looking us East to and I look at the

2738
02:26:36,450 --> 02:26:44,210
attack range T six

2739
02:26:44,260 --> 02:26:49,720
running there initializing decent back

2740
02:26:49,720 --> 02:26:54,520
to term right so all this this is

2741
02:26:54,520 --> 02:26:57,040
building attacker intersects let's look

2742
02:26:57,040 --> 02:27:00,100
at my destruction of one is going I said

2743
02:27:00,100 --> 02:27:05,410
this is done destroy 34 resources I'm

2744
02:27:05,410 --> 02:27:09,279
gonna rebuild a type each one again to

2745
02:27:09,279 --> 02:27:10,450
is probably better than one but actually

2746
02:27:10,450 --> 02:27:12,069
before we build that I I told me I

2747
02:27:12,069 --> 02:27:13,470
didn't talk about a little earlier is uh

2748
02:27:13,470 --> 02:27:16,359
the helpful here though the CLI hopeful

2749
02:27:16,359 --> 02:27:18,040
and the different commands really other

2750
02:27:18,040 --> 02:27:20,260
takes in um we kind of talked a lot

2751
02:27:20,260 --> 02:27:21,430
about this in the beginning of the

2752
02:27:21,430 --> 02:27:24,520
presentation but they are two there's

2753
02:27:24,520 --> 02:27:26,529
really two main modes we would expect

2754
02:27:26,529 --> 02:27:28,149
everybody to use right vagrant and

2755
02:27:28,149 --> 02:27:29,649
terraformed that's the flag you see me

2756
02:27:29,649 --> 02:27:32,560
continue the path right - then there's

2757
02:27:32,560 --> 02:27:34,450
really only two require flies mode and

2758
02:27:34,450 --> 02:27:36,880
action and the mode is again bacon if

2759
02:27:36,880 --> 02:27:39,189
you doing things locally terraform if

2760
02:27:39,189 --> 02:27:42,760
you're doing things using AWS we highly

2761
02:27:42,760 --> 02:27:44,260
highly recommend anything that you know

2762
02:27:44,260 --> 02:27:45,250
you're going to share with teams and

2763
02:27:45,250 --> 02:27:46,479
stuff like that you're gonna be using

2764
02:27:46,479 --> 02:27:48,910
terraform long as you doing some def

2765
02:27:48,910 --> 02:27:52,210
work vagrant um typically don't this

2766
02:27:52,210 --> 02:27:53,920
Packer unless you're doing something

2767
02:27:53,920 --> 02:27:56,319
consistently we're thinking about

2768
02:27:56,319 --> 02:27:58,510
deprecating Parker in the future just

2769
02:27:58,510 --> 02:28:00,399
FYI big and we added this is some

2770
02:28:00,399 --> 02:28:03,010
optimization but terraform is gone in so

2771
02:28:03,010 --> 02:28:04,120
fast right now we could do it in 15

2772
02:28:04,120 --> 02:28:07,149
minutes it used to be dirty bad that now

2773
02:28:07,149 --> 02:28:08,560
Parker's becoming less and less of a

2774
02:28:08,560 --> 02:28:11,410
need on the action side again there's a

2775
02:28:11,410 --> 02:28:12,729
few actions you can run this thing you

2776
02:28:12,729 --> 02:28:14,529
can build it you can destroy it you can

2777
02:28:14,529 --> 02:28:19,270
run simulations stop and su-mei we

2778
02:28:19,270 --> 02:28:20,649
really didn't cover a whole lot there's

2779
02:28:20,649 --> 02:28:24,040
other options like search test building

2780
02:28:24,040 --> 02:28:26,080
a nice an australian mines I'm building

2781
02:28:26,080 --> 02:28:27,910
my sanatorium eyes is very specific to

2782
02:28:27,910 --> 02:28:31,210
Packer we're introducing the ability to

2783
02:28:31,210 --> 02:28:34,390
run almost the attack range assays again

2784
02:28:34,390 --> 02:28:36,160
as a part of a CI pipeline so you could

2785
02:28:36,160 --> 02:28:38,740
pass it like a unit test and what what

2786
02:28:38,740 --> 02:28:40,899
that would do is you can bring it up all

2787
02:28:40,899 --> 02:28:43,330
the time when you pass it a test file or

2788
02:28:43,330 --> 02:28:44,770
bring it up and then reading from the

2789
02:28:44,770 --> 02:28:46,779
test file it launches a specific

2790
02:28:46,779 --> 02:28:49,149
environment that builds a specific

2791
02:28:49,149 --> 02:28:50,740
environment and launches a specific set

2792
02:28:50,740 --> 02:28:52,840
of attacks against it and you declare in

2793
02:28:52,840 --> 02:28:55,569
the test file against the set of targets

2794
02:28:55,569 --> 02:28:57,760
you declare and then it checks

2795
02:28:57,760 --> 02:29:00,100
or whether the detections that you

2796
02:29:00,100 --> 02:29:01,899
specified on the test file cut that

2797
02:29:01,899 --> 02:29:04,270
attacker now so that's a pretty cool

2798
02:29:04,270 --> 02:29:06,010
feature that I'm I'm super excited about

2799
02:29:06,010 --> 02:29:08,319
finishing off and sharing with everyone

2800
02:29:08,319 --> 02:29:10,510
it's it's how we plan to do automated

2801
02:29:10,510 --> 02:29:15,279
testing no meditations on the on the

2802
02:29:15,279 --> 02:29:16,870
other flag when I made your flag against

2803
02:29:16,870 --> 02:29:18,220
when you're running simulations or

2804
02:29:18,220 --> 02:29:20,590
simulate you gotta pass the target

2805
02:29:20,590 --> 02:29:21,970
otherwise wouldn't work and you saw me

2806
02:29:21,970 --> 02:29:23,950
do that a little earlier the simulation

2807
02:29:23,950 --> 02:29:26,740
technique is the technique from itami a

2808
02:29:26,740 --> 02:29:30,220
team actually I forgot to share with us

2809
02:29:30,220 --> 02:29:32,080
coming from because we had that error

2810
02:29:32,080 --> 02:29:34,000
but I'll come back to it I haven't

2811
02:29:34,000 --> 02:29:36,550
totally haven't hasn't put it up my mind

2812
02:29:36,550 --> 02:29:40,029
um I'm not even gonna cover safesearch

2813
02:29:40,029 --> 02:29:42,310
name we're thinking about that vacating

2814
02:29:42,310 --> 02:29:44,350
search name and the search feature for

2815
02:29:44,350 --> 02:29:47,500
in lieu of trust if you had another

2816
02:29:47,500 --> 02:29:48,970
config file somewhere else you can pass

2817
02:29:48,970 --> 02:29:51,880
it again the path name here the test

2818
02:29:51,880 --> 02:29:54,399
file it's for the test feature and then

2819
02:29:54,399 --> 02:29:55,840
the other flags you saw is a list

2820
02:29:55,840 --> 02:29:57,279
machine earlier which actually prints

2821
02:29:57,279 --> 02:29:59,080
out everything that's been built how or

2822
02:29:59,080 --> 02:30:01,060
what the current status is and then this

2823
02:30:01,060 --> 02:30:04,029
searches again a.m. eyes for the Packer

2824
02:30:04,029 --> 02:30:05,770
feature which also would like to get

2825
02:30:05,770 --> 02:30:07,750
deprecated this is spending a nice clean

2826
02:30:07,750 --> 02:30:10,899
up let me flip back here okay this is

2827
02:30:10,899 --> 02:30:13,630
still building so let me well this is

2828
02:30:13,630 --> 02:30:15,609
building I'm gonna I'm just gonna go

2829
02:30:15,609 --> 02:30:18,340
ahead and start building also the clean

2830
02:30:18,340 --> 02:30:20,770
ones attack range if you're following

2831
02:30:20,770 --> 02:30:22,510
along and you have your own attack range

2832
02:30:22,510 --> 02:30:23,770
and you're playing with this with you

2833
02:30:23,770 --> 02:30:25,180
this training building again any

2834
02:30:25,180 --> 02:30:26,859
questions comments jump it's locked

2835
02:30:26,859 --> 02:30:30,880
message message therefore Trahan we're

2836
02:30:30,880 --> 02:30:35,710
both in there while team one and Team

2837
02:30:35,710 --> 02:30:40,000
two builds out let me talk about how the

2838
02:30:40,000 --> 02:30:42,340
atomic red team

2839
02:30:42,340 --> 02:30:46,220
technique flag works a little bit

2840
02:30:46,220 --> 02:30:49,890
so when you will you pass at a a flag

2841
02:30:49,890 --> 02:30:52,020
like T like a sorry simulation to me

2842
02:30:52,020 --> 02:30:54,990
like t101 what's really happening under

2843
02:30:54,990 --> 02:30:57,479
the hood is it's gonna go ahead and

2844
02:30:57,479 --> 02:31:00,210
actually sorry t 0 0 3 it's gonna go

2845
02:31:00,210 --> 02:31:03,270
ahead and leverage one of these Atomics

2846
02:31:03,270 --> 02:31:05,430
and this is coming right from the red

2847
02:31:05,430 --> 02:31:09,510
Canaries github project automata team

2848
02:31:09,510 --> 02:31:13,710
and if we open for example in Berea now

2849
02:31:13,710 --> 02:31:17,520
a tumblr team is support some sub

2850
02:31:17,520 --> 02:31:19,050
techniques if you're familiar premiere

2851
02:31:19,050 --> 02:31:22,140
with a miter saw tiny springy but if we

2852
02:31:22,140 --> 02:31:25,260
open 0 3 here um they have two files the

2853
02:31:25,260 --> 02:31:27,240
llamo is the actual configuration the

2854
02:31:27,240 --> 02:31:31,200
runs and then re marked on file the

2855
02:31:31,200 --> 02:31:34,590
markdown file walks you through the

2856
02:31:34,590 --> 02:31:38,370
different kinds of simulations that are

2857
02:31:38,370 --> 02:31:40,080
really happening or attacks basically

2858
02:31:40,080 --> 02:31:42,000
are really happening when you pass this

2859
02:31:42,000 --> 02:31:45,060
technique so when when we specify to 0 0

2860
02:31:45,060 --> 02:31:47,399
3 it's really running these two attacks

2861
02:31:47,399 --> 02:31:50,069
to Atomics so they call it uh powershell

2862
02:31:50,069 --> 02:31:53,430
mimi cats and jisuk Dom right click on

2863
02:31:53,430 --> 02:31:54,810
partial minicar to see a nice

2864
02:31:54,810 --> 02:31:56,790
description of what that means what that

2865
02:31:56,790 --> 02:32:00,689
does the actual command that is invoking

2866
02:32:00,689 --> 02:32:05,670
on the system and and again the usual

2867
02:32:05,670 --> 02:32:08,490
pretty extremely well documented just

2868
02:32:08,490 --> 02:32:09,930
what is it trying to accomplish with

2869
02:32:09,930 --> 02:32:12,500
quote unquote that attack like rod said

2870
02:32:12,500 --> 02:32:14,970
earlier and he goes also mention in this

2871
02:32:14,970 --> 02:32:17,689
court the fact that a family team is

2872
02:32:17,689 --> 02:32:20,250
launching a sample of an attack doesn't

2873
02:32:20,250 --> 02:32:21,560
mean that this is what all the

2874
02:32:21,560 --> 02:32:23,490
invocations is that this attack looks

2875
02:32:23,490 --> 02:32:26,370
like so this is for like oberoi table

2876
02:32:26,370 --> 02:32:28,470
stakes or a table stakes for like the

2877
02:32:28,470 --> 02:32:30,569
most basic of detections

2878
02:32:30,569 --> 02:32:33,330
this is different at a deep and wide

2879
02:32:33,330 --> 02:32:35,370
view of what kind of potential attacks

2880
02:32:35,370 --> 02:32:37,830
can happen for example like he's in G

2881
02:32:37,830 --> 02:32:40,170
stack them that's where other more

2882
02:32:40,170 --> 02:32:42,510
complex simulation and just really take

2883
02:32:42,510 --> 02:32:46,740
hold like again they can airy your ex I

2884
02:32:46,740 --> 02:32:51,990
or attack IQ I'm gonna click here on

2885
02:32:51,990 --> 02:32:53,430
another simulation technique for example

2886
02:32:53,430 --> 02:32:54,890
like this is one of those sub techniques

2887
02:32:54,890 --> 02:32:57,710
as part of a

2888
02:32:57,710 --> 02:32:59,420
densha dumping and this is a specific

2889
02:32:59,420 --> 02:33:01,490
credential dumping for the security

2890
02:33:01,490 --> 02:33:04,760
account manager which includes dumping

2891
02:33:04,760 --> 02:33:07,820
registries using reg wxe dumping

2892
02:33:07,820 --> 02:33:10,090
registry using against secret sat down

2893
02:33:10,090 --> 02:33:13,840
PW contacts and and little really again

2894
02:33:13,840 --> 02:33:16,820
really good examples and pigmentation as

2895
02:33:16,820 --> 02:33:22,850
to how this works I'll be using this to

2896
02:33:22,850 --> 02:33:24,710
thermal simulation in one second and out

2897
02:33:24,710 --> 02:33:27,470
there more detection as well let me jump

2898
02:33:27,470 --> 02:33:31,610
back to the terminal make sure that the

2899
02:33:31,610 --> 02:33:34,190
old is going okay alright so look so

2900
02:33:34,190 --> 02:33:35,660
we're about nine minutes will perform

2901
02:33:35,660 --> 02:33:38,300
minutes left roughly on on this build

2902
02:33:38,300 --> 02:33:44,780
and this is still going this is still

2903
02:33:44,780 --> 02:33:48,800
building the machines out all right this

2904
02:33:48,800 --> 02:33:52,880
is wait wait it out any questions so far

2905
02:33:52,880 --> 02:33:58,550
I jump over here to discord and make

2906
02:33:58,550 --> 02:33:59,470
sure that I uh

2907
02:33:59,470 --> 02:34:12,800
anybody questions there's one open about

2908
02:34:12,800 --> 02:34:17,350
an agent from caldera I'm building up a

2909
02:34:17,350 --> 02:34:21,140
arrange myself and because we've been

2910
02:34:21,140 --> 02:34:22,990
having that issue for some time where

2911
02:34:22,990 --> 02:34:27,140
the HDP connect back works for a minute

2912
02:34:27,140 --> 02:34:28,940
it shows like it's working in the

2913
02:34:28,940 --> 02:34:32,120
interface but then it dies so the way

2914
02:34:32,120 --> 02:34:35,270
around that is usually you will encode

2915
02:34:35,270 --> 02:34:39,050
era look at the the code RDP into the

2916
02:34:39,050 --> 02:34:43,370
windows paste it in the command line and

2917
02:34:43,370 --> 02:34:45,260
then it connects back so I'm gonna

2918
02:34:45,260 --> 02:34:48,110
replicate it and impose the screenshots

2919
02:34:48,110 --> 02:34:53,300
on the on the actual discord I'm just

2920
02:34:53,300 --> 02:34:55,070
waiting for the the branch to finish it

2921
02:34:55,070 --> 02:34:56,979
should be finished soon

2922
02:34:56,979 --> 02:35:00,320
righto you can walk me through here to I

2923
02:35:00,320 --> 02:35:04,550
you know I don't think of take a look

2924
02:35:04,550 --> 02:35:07,190
yeah I can actually show it let me uh

2925
02:35:07,190 --> 02:35:10,610
let me get in and and no I'll do it

2926
02:35:10,610 --> 02:35:11,600
because I had to deal with

2927
02:35:11,600 --> 02:35:15,529
I was building the the wiki so it's not

2928
02:35:15,529 --> 02:35:18,140
happening it started happening like you

2929
02:35:18,140 --> 02:35:22,909
know like any vendor they push new neo

2930
02:35:22,909 --> 02:35:26,689
code and then certain things don't work

2931
02:35:26,689 --> 02:35:32,659
the same way anymore so we that's what

2932
02:35:32,659 --> 02:35:35,270
we decided to fork one of the

2933
02:35:35,270 --> 02:35:38,000
restaurants of caldera Patrick and I

2934
02:35:38,000 --> 02:35:41,540
were we're talking about it but let me

2935
02:35:41,540 --> 02:35:45,590
once I get it in lock in I would I will

2936
02:35:45,590 --> 02:35:50,899
show I will show a him thank you mom

2937
02:35:50,899 --> 02:35:52,970
you wanna you want to go over the the

2938
02:35:52,970 --> 02:35:56,659
dashboard or to show the dashboard where

2939
02:35:56,659 --> 02:36:01,460
the it shows the the actual results from

2940
02:36:01,460 --> 02:36:06,260
the execution I yeah yeah it's no way

2941
02:36:06,260 --> 02:36:09,229
and so after ranges to build going now

2942
02:36:09,229 --> 02:36:11,210
I'm in a way most likely this is gonna

2943
02:36:11,210 --> 02:36:12,800
finish any minute now there I think it's

2944
02:36:12,800 --> 02:36:15,649
doing the last like question of the

2945
02:36:15,649 --> 02:36:17,180
install which is set small on the domain

2946
02:36:17,180 --> 02:36:19,189
controller and I'm not launching attack

2947
02:36:19,189 --> 02:36:20,600
I'm show dashboards and I show the

2948
02:36:20,600 --> 02:36:23,330
attack these floats in there and then

2949
02:36:23,330 --> 02:36:24,770
maybe we can we can do if you don't mind

2950
02:36:24,770 --> 02:36:26,930
but what we do is cut the ratio you can

2951
02:36:26,930 --> 02:36:30,590
show everyone like a so run it and run

2952
02:36:30,590 --> 02:36:32,750
into it and how you resolve it if you do

2953
02:36:32,750 --> 02:36:34,989
a home

2954
02:36:37,030 --> 02:36:39,190
yeah let me let me get them to this

2955
02:36:39,190 --> 02:36:42,190
there's the color server give me a

2956
02:36:42,190 --> 02:36:44,551
second

2957
02:36:46,940 --> 02:36:49,900
go

2958
02:36:51,490 --> 02:36:55,210
most curious I

2959
02:36:57,331 --> 02:37:00,070
actually I have another Ranger you show

2960
02:37:00,070 --> 02:37:03,070
the dashboard in Oh No

2961
02:37:03,070 --> 02:37:05,230
how's everybody else's environment is

2962
02:37:05,230 --> 02:37:07,841
doing hope you have better luck them I

2963
02:37:07,841 --> 02:37:13,171
did with my my team one environment

2964
02:37:23,870 --> 02:37:27,080
we go

2965
02:37:28,020 --> 02:37:31,620
I have zero patience very interesting to

2966
02:37:31,620 --> 02:37:33,060
finish which is the result of the hacker

2967
02:37:33,060 --> 02:37:37,020
mode and uh and I a lot of the wait time

2968
02:37:37,020 --> 02:37:38,760
is there's not necessarily it's just

2969
02:37:38,760 --> 02:37:40,590
things when Windows machine takes a long

2970
02:37:40,590 --> 02:37:42,960
time and Inc of us oh there you go

2971
02:37:42,960 --> 02:37:46,530
Team six is built again successfully

2972
02:37:46,530 --> 02:37:48,920
this time which is great

2973
02:37:48,920 --> 02:37:52,140
alright so so let's get us plunk really

2974
02:37:52,140 --> 02:37:54,899
quickly again just make sure dad hey

2975
02:37:54,899 --> 02:37:59,689
came up and we can we can see it

2976
02:38:00,109 --> 02:38:08,370
thousand username is admin let me copy

2977
02:38:08,370 --> 02:38:10,290
and paste the password that is said

2978
02:38:10,290 --> 02:38:19,710
earlier there you go zero attacks so far

2979
02:38:19,710 --> 02:38:22,979
great and again just running to lose

2980
02:38:22,979 --> 02:38:24,420
again I always make sure that data's

2981
02:38:24,420 --> 02:38:27,240
coming in so we got a little bit of data

2982
02:38:27,240 --> 02:38:32,939
in there let's launch an attack flip

2983
02:38:32,939 --> 02:38:35,899
back to the terminal

2984
02:38:35,899 --> 02:38:41,370
actions stimulated a technique let's do

2985
02:38:41,370 --> 02:38:44,189
teaser 0 I mentioned earlier 0 2 which

2986
02:38:44,189 --> 02:38:46,920
is the credential dumping for us from

2987
02:38:46,920 --> 02:38:49,560
the security account manager sub

2988
02:38:49,560 --> 02:38:52,260
technique and then the target is going

2989
02:38:52,260 --> 02:38:56,069
to be our domain controller passes in

2990
02:38:56,069 --> 02:39:03,050
your controller let's see

2991
02:39:04,350 --> 02:39:06,050
and then afterward

2992
02:39:06,050 --> 02:39:08,210
some words let's view the hopefully when

2993
02:39:08,210 --> 02:39:10,280
this race let's view the the resultant

2994
02:39:10,280 --> 02:39:11,810
and we can jump into cold air and do

2995
02:39:11,810 --> 02:39:14,470
something out there

2996
02:39:17,230 --> 02:39:20,690
so again it checks whether time-wasting

2997
02:39:20,690 --> 02:39:22,160
installed can it go ahead and stop it if

2998
02:39:22,160 --> 02:39:24,380
it's now

2999
02:39:24,380 --> 02:39:28,860
and then run the actual attack there you

3000
02:39:28,860 --> 02:39:29,160
go

3001
02:39:29,160 --> 02:39:31,080
ran the technique correctly is cleaning

3002
02:39:31,080 --> 02:39:33,210
up and so we successfully executed

3003
02:39:33,210 --> 02:39:36,210
technique there's T zero three zero two

3004
02:39:36,210 --> 02:39:39,240
against the target let's flip back to

3005
02:39:39,240 --> 02:39:42,470
Splunk and we should see that that our

3006
02:39:42,470 --> 02:39:44,910
whole launcher page now we should see an

3007
02:39:44,910 --> 02:39:49,320
actual attack in here or not just

3008
02:39:49,320 --> 02:39:51,500
kidding

3009
02:39:54,109 --> 02:39:55,670
it takes about a minute for that they

3010
02:39:55,670 --> 02:40:01,689
don't come and get indexed you know what

3011
02:40:01,689 --> 02:40:08,300
let's just search the index so if you go

3012
02:40:08,300 --> 02:40:12,880
to index attack see the last 15 minutes

3013
02:40:15,489 --> 02:40:18,609
mmm interesting

3014
02:40:18,609 --> 02:40:22,039
it makes let's see if I find logs for

3015
02:40:22,039 --> 02:40:26,859
this should be seen mine the rice favor

3016
02:40:27,939 --> 02:40:34,239
- 7 - 49 yep

3017
02:40:35,711 --> 02:40:48,230
oh you know what I think I'm

3018
02:40:48,230 --> 02:40:49,851
is it two zeroes in the simulation

3019
02:40:49,851 --> 02:40:54,200
technique me see here I was four

3020
02:40:54,200 --> 02:40:57,860
oh yeah it is okay oops let's try it

3021
02:40:57,860 --> 02:41:01,221
let's try this again I messed up the you

3022
02:41:01,221 --> 02:41:05,870
a simulation technique I D it's two

3023
02:41:05,870 --> 02:41:17,421
zeroes two or three digits right I seem

3024
02:41:17,421 --> 02:41:20,900
to have worked again let's go back to

3025
02:41:20,900 --> 02:41:33,051
Splunk and refresh this but now I got me

3026
02:41:33,051 --> 02:41:33,680
an error

3027
02:41:33,680 --> 02:41:36,160
progress

3028
02:41:45,830 --> 02:41:53,399
you gotta index attack range oh there

3029
02:41:53,399 --> 02:41:55,680
you go okay perfect so you can see again

3030
02:41:55,680 --> 02:41:57,390
we write all the attacks into this index

3031
02:41:57,390 --> 02:41:59,699
um and we can see here though we

3032
02:41:59,699 --> 02:42:03,710
launched to test just wanted to

3033
02:42:03,710 --> 02:42:06,210
specifically the registry dump of Sam

3034
02:42:06,210 --> 02:42:08,340
creds and secrets and registry posh with

3035
02:42:08,340 --> 02:42:12,300
pi PI cuts and if we flip over to Atami

3036
02:42:12,300 --> 02:42:15,119
red team on this technique does exactly

3037
02:42:15,119 --> 02:42:17,279
the to variously dump of sam present

3038
02:42:17,279 --> 02:42:19,140
secrets and registry parts with pi pi

3039
02:42:19,140 --> 02:42:22,859
cuts now if you wanted to see what this

3040
02:42:22,859 --> 02:42:25,649
a detection search looks like for this

3041
02:42:25,649 --> 02:42:30,090
technique we have one and and I never

3042
02:42:30,090 --> 02:42:33,029
security content update this is when I

3043
02:42:33,029 --> 02:42:34,710
go better with the bread we make first

3044
02:42:34,710 --> 02:42:36,920
plunk our detections for these attacks

3045
02:42:36,920 --> 02:42:42,779
and we have specifically a use case here

3046
02:42:42,779 --> 02:42:46,500
for credential dumping has a bunch of

3047
02:42:46,500 --> 02:42:49,409
detections and I know they're Houseman

3048
02:42:49,409 --> 02:42:51,960
specifically for that technique of

3049
02:42:51,960 --> 02:42:53,489
registry dumping through the Reg that

3050
02:42:53,489 --> 02:42:57,029
exe is you gotta find it here it is so

3051
02:42:57,029 --> 02:43:01,080
this is the search um I think this

3052
02:43:01,080 --> 02:43:02,460
should work out of the box but I may

3053
02:43:02,460 --> 02:43:04,020
have to modify it slightly but this is

3054
02:43:04,020 --> 02:43:05,790
looking oh there you go it worked

3055
02:43:05,790 --> 02:43:08,069
perfect so this search is looking for

3056
02:43:08,069 --> 02:43:11,550
any process commands with reg that exe V

3057
02:43:11,550 --> 02:43:13,800
or command that exe that has the

3058
02:43:13,800 --> 02:43:16,140
keywords safe I'm there any of these

3059
02:43:16,140 --> 02:43:18,960
registry keys okay local machine

3060
02:43:18,960 --> 02:43:21,479
security or HK local missions a memory

3061
02:43:21,479 --> 02:43:27,420
location system and you see here there

3062
02:43:27,420 --> 02:43:30,090
are a few instances where the command C

3063
02:43:30,090 --> 02:43:32,300
CMD or right there you see actually will

3064
02:43:32,300 --> 02:43:36,090
ran what looks like a time test

3065
02:43:36,090 --> 02:43:38,310
dumps right and again this is how my red

3066
02:43:38,310 --> 02:43:40,949
team doing it so this detection works

3067
02:43:40,949 --> 02:43:44,130
awesome as we would expect it so we

3068
02:43:44,130 --> 02:43:47,310
launched an attack you you saw what that

3069
02:43:47,310 --> 02:43:49,260
attack looked like and and this is the

3070
02:43:49,260 --> 02:43:54,689
detection attack now let's let's look a

3071
02:43:54,689 --> 02:43:55,380
caldera

3072
02:43:55,380 --> 02:43:59,410
stick a caldera knife simulation engine

3073
02:43:59,410 --> 02:44:01,660
support a send out over with

3074
02:44:01,660 --> 02:44:04,090
instructions from MERS are running on

3075
02:44:04,090 --> 02:44:06,780
their own range because I again I

3076
02:44:06,780 --> 02:44:08,950
replaced all the passwords with my own

3077
02:44:08,950 --> 02:44:12,010
password I'm gonna use that password in

3078
02:44:12,010 --> 02:44:15,750
here and there I came up

3079
02:44:16,790 --> 02:44:21,710
I got it if you if you want I think that

3080
02:44:21,710 --> 02:44:23,270
you threw up can show where the pencil

3081
02:44:23,270 --> 02:44:25,250
well let me know what you want to do

3082
02:44:25,250 --> 02:44:27,680
yeah yeah please guide me so I'm I'm

3083
02:44:27,680 --> 02:44:30,620
here on there okay right so as you can

3084
02:44:30,620 --> 02:44:33,890
see there the PID is showing that the

3085
02:44:33,890 --> 02:44:38,390
agents are are dead right so click what

3086
02:44:38,390 --> 02:44:40,580
is just click here to the blue agent on

3087
02:44:40,580 --> 02:44:46,990
the left and then select click on it I

3088
02:44:46,990 --> 02:44:50,660
don't see the menu yet coming down you

3089
02:44:50,660 --> 02:44:52,729
have to click on the white yeah on the

3090
02:44:52,729 --> 02:44:53,090
arrow

3091
02:44:53,090 --> 02:44:55,460
I think it's not sure because it's

3092
02:44:55,460 --> 02:45:01,069
sharing interesting well let me uh look

3093
02:45:01,069 --> 02:45:02,720
at mine I can tell you exactly where you

3094
02:45:02,720 --> 02:45:05,330
need to click on see you and to say in

3095
02:45:05,330 --> 02:45:08,750
your gonna select man next how about now

3096
02:45:08,750 --> 02:45:10,490
can you can you see I think it's

3097
02:45:10,490 --> 02:45:11,810
something to do with it the way is

3098
02:45:11,810 --> 02:45:17,840
sharing you can see it but I can select

3099
02:45:17,840 --> 02:45:25,189
man X which is reverse shell okay by a

3100
02:45:25,189 --> 02:45:30,740
TCP pressure agent okay right now scroll

3101
02:45:30,740 --> 02:45:34,550
down until you see the windows icon and

3102
02:45:34,550 --> 02:45:39,560
see TCP you see that it's a reverse show

3103
02:45:39,560 --> 02:45:42,020
violet it should be yeah so go ahead and

3104
02:45:42,020 --> 02:45:45,399
copy copy all that code okay all of it

3105
02:45:45,399 --> 02:45:47,720
alright so now what we're going to do

3106
02:45:47,720 --> 02:45:49,880
something that RDP into the Windows

3107
02:45:49,880 --> 02:45:57,950
Server okay give me two seconds to me so

3108
02:45:57,950 --> 02:46:02,060
I'm gonna share IDP here let me let me

3109
02:46:02,060 --> 02:46:09,200
find my Windows server IP address two

3110
02:46:09,200 --> 02:46:14,140
seconds go ahead and add a maybe see

3111
02:46:17,050 --> 02:46:18,930
that

3112
02:46:18,930 --> 02:46:25,020
his creator and the password right two

3113
02:46:25,020 --> 02:46:26,120
seconds

3114
02:46:26,120 --> 02:46:29,279
that's weird right

3115
02:46:29,279 --> 02:46:33,870
continue so once you log in I'll tell

3116
02:46:33,870 --> 02:46:40,199
you a second we need to do Windows is

3117
02:46:40,199 --> 02:46:41,760
just login I'm not sure if you've seen

3118
02:46:41,760 --> 02:46:43,830
that or you CNA yeah you may have to

3119
02:46:43,830 --> 02:46:55,770
change the the actual screen how about

3120
02:46:55,770 --> 02:46:57,180
no there we go

3121
02:46:57,180 --> 02:47:00,050
so good to do this go what it says

3122
02:47:00,050 --> 02:47:03,210
Windows key you did type run or do right

3123
02:47:03,210 --> 02:47:10,590
click run right click on it just double

3124
02:47:10,590 --> 02:47:16,370
fingers there you go I know that enter

3125
02:47:16,370 --> 02:47:18,090
you see no

3126
02:47:18,090 --> 02:47:21,119
coming out paste the code let me let me

3127
02:47:21,119 --> 02:47:29,579
go grab it again sorry right for those

3128
02:47:29,579 --> 02:47:31,529
who are asking you you have to select

3129
02:47:31,529 --> 02:47:34,319
the code that is to the operating system

3130
02:47:34,319 --> 02:47:36,060
we're trying to get to so in this case

3131
02:47:36,060 --> 02:47:37,470
it's window now you want to go to the

3132
02:47:37,470 --> 02:47:40,229
beginning of the string and then you're

3133
02:47:40,229 --> 02:47:41,729
gonna change the IP address which is

3134
02:47:41,729 --> 02:47:49,279
this 0 0 0 to 10.0 the Wando 12 and then

3135
02:47:49,279 --> 02:47:51,540
yeah that's what the fall this plum

3136
02:47:51,540 --> 02:47:53,970
server called era you see what is you

3137
02:47:53,970 --> 02:47:57,649
see hold on hold on we're not done yet

3138
02:47:57,840 --> 02:48:01,590
and then that one as well 10 does 0 to 1

3139
02:48:01,590 --> 02:48:11,369
to 12 now do edit select all ok copy now

3140
02:48:11,369 --> 02:48:16,439
go back go to windows the windows menu

3141
02:48:16,439 --> 02:48:22,050
and then do right click run or yeah CMD

3142
02:48:22,050 --> 02:48:27,079
and now once it opens type powershell

3143
02:48:27,079 --> 02:48:32,369
powershell and hit enter excellent paste

3144
02:48:32,369 --> 02:48:40,579
it enter and now go to your code era

3145
02:48:40,940 --> 02:48:44,029
[Music]

3146
02:48:44,029 --> 02:48:48,569
yeah we're kind of going around this go

3147
02:48:48,569 --> 02:48:52,159
to your code era and now go to agents

3148
02:48:52,159 --> 02:48:58,770
refresh there it is yeah Thank You rod

3149
02:48:58,770 --> 02:49:01,590
of course man now then it should be

3150
02:49:01,590 --> 02:49:04,500
right you okay do you know how to do the

3151
02:49:04,500 --> 02:49:06,239
operation right you go we had to go to

3152
02:49:06,239 --> 02:49:09,270
adversaries and then on adversaries

3153
02:49:09,270 --> 02:49:11,939
we're gonna select a profile and we're

3154
02:49:11,939 --> 02:49:14,369
gonna save this profile so do a nice you

3155
02:49:14,369 --> 02:49:16,649
want that or you can do several so they

3156
02:49:16,649 --> 02:49:18,149
can see it because as you select

3157
02:49:18,149 --> 02:49:19,890
different profiles you will see the

3158
02:49:19,890 --> 02:49:21,390
operations with the abilities like

3159
02:49:21,390 --> 02:49:24,989
colera Micra says that you can do so you

3160
02:49:24,989 --> 02:49:28,170
should we can do one the the discoveries

3161
02:49:28,170 --> 02:49:30,300
you should pretty nice to get started so

3162
02:49:30,300 --> 02:49:31,800
you selected the profile

3163
02:49:31,800 --> 02:49:35,040
discovery and and you can enter a

3164
02:49:35,040 --> 02:49:39,930
profile description and save it any okay

3165
02:49:39,930 --> 02:49:42,750
so I'll pick like discovery so if you

3166
02:49:42,750 --> 02:49:47,460
see in the in the actual discovery those

3167
02:49:47,460 --> 02:49:50,399
abilities would tell you things such as

3168
02:49:50,399 --> 02:49:52,470
it's gonna try to be you admin shares

3169
02:49:52,470 --> 02:49:54,390
it's gonna try to find if it's a domain

3170
02:49:54,390 --> 02:49:56,370
controller it's gonna sort of find if it

3171
02:49:56,370 --> 02:50:00,090
is an anti a buyers program now notice

3172
02:50:00,090 --> 02:50:03,810
that there are icons and this icons tell

3173
02:50:03,810 --> 02:50:06,270
you if this is applicable for the

3174
02:50:06,270 --> 02:50:08,880
operating system and in the target that

3175
02:50:08,880 --> 02:50:12,930
host word we're running are what we're

3176
02:50:12,930 --> 02:50:16,109
Ronnie or agent right so let's say

3177
02:50:16,109 --> 02:50:20,840
discovery and now we'll go to campaigns

3178
02:50:21,350 --> 02:50:25,859
and what we want to do now uh-huh and

3179
02:50:25,859 --> 02:50:34,790
I'll go to campaigns operation yeah okay

3180
02:50:34,790 --> 02:50:38,880
so now select and operations discovery

3181
02:50:38,880 --> 02:50:46,800
or no you should be able to see it okay

3182
02:50:46,800 --> 02:50:50,130
for operation name test mm-hmm and then

3183
02:50:50,130 --> 02:50:56,250
click on basic options and then so you

3184
02:50:56,250 --> 02:50:58,140
can see for example the groups you can

3185
02:50:58,140 --> 02:51:01,080
devise of the agents for example you can

3186
02:51:01,080 --> 02:51:03,720
select profiles like we looked at so

3187
02:51:03,720 --> 02:51:06,479
click on the profile for example that's

3188
02:51:06,479 --> 02:51:11,280
company yeah it's drag you go you can

3189
02:51:11,280 --> 02:51:13,850
you can tell and keep open forever or

3190
02:51:13,850 --> 02:51:16,109
there are other options and then you can

3191
02:51:16,109 --> 02:51:19,080
do run immediately and once you hit

3192
02:51:19,080 --> 02:51:21,660
start watch it

3193
02:51:21,660 --> 02:51:24,240
it shows up on the right and they will

3194
02:51:24,240 --> 02:51:25,859
show you the progress and what's

3195
02:51:25,859 --> 02:51:27,600
happening like right now he's trying to

3196
02:51:27,600 --> 02:51:31,109
identify the active user right see four

3197
02:51:31,109 --> 02:51:34,859
percent you see how he change so this is

3198
02:51:34,859 --> 02:51:39,050
how you do your operations basically

3199
02:51:41,940 --> 02:51:45,160
all right a percent yeah you just

3200
02:51:45,160 --> 02:51:51,640
working on yeah pink so this is running

3201
02:51:51,640 --> 02:51:54,010
rod all these discovery exercises

3202
02:51:54,010 --> 02:51:56,620
basically rat basin the profile you

3203
02:51:56,620 --> 02:51:59,440
selected there are others there is warm

3204
02:51:59,440 --> 02:52:03,790
like behavior there is actually I

3205
02:52:03,790 --> 02:52:07,021
believe there might be a specific of

3206
02:52:07,021 --> 02:52:14,101
adversarial emulation but inversely

3207
02:52:14,101 --> 02:52:17,710
interestingly enough it's not like the

3208
02:52:17,710 --> 02:52:20,460
atomic where you get the the identify

3209
02:52:20,460 --> 02:52:23,380
technique that surprised me a little bit

3210
02:52:23,380 --> 02:52:25,660
I was expecting to see a menu with the

3211
02:52:25,660 --> 02:52:27,160
techniques and then go for it but it's

3212
02:52:27,160 --> 02:52:28,930
not I'm sure they will put it at some

3213
02:52:28,930 --> 02:52:32,050
point so now that that that we finish

3214
02:52:32,050 --> 02:52:34,240
this is what I did at the end of my

3215
02:52:34,240 --> 02:52:37,000
presentation which basically you notice

3216
02:52:37,000 --> 02:52:38,710
that you weren't able to view I've been

3217
02:52:38,710 --> 02:52:42,280
chairs so that failed right so we can

3218
02:52:42,280 --> 02:52:44,680
actually look at index on the index of

3219
02:52:44,680 --> 02:52:46,510
wind index and you will see the

3220
02:52:46,510 --> 02:52:50,470
execution of the of the agent which you

3221
02:52:50,470 --> 02:52:52,811
can find by basically going back into

3222
02:52:52,811 --> 02:52:55,540
the agent and looking at the name of it

3223
02:52:55,540 --> 02:52:58,540
and then searching it with an index

3224
02:52:58,540 --> 02:53:01,570
equal win and you will see what the what

3225
02:53:01,570 --> 02:53:04,840
what it's been doing basically I'm gonna

3226
02:53:04,840 --> 02:53:08,980
go ahead under you can search do you

3227
02:53:08,980 --> 02:53:10,540
remember to them the name of the agent

3228
02:53:10,540 --> 02:53:13,271
if you go right I don't think that's a

3229
02:53:13,271 --> 02:53:15,640
company name but you can always go back

3230
02:53:15,640 --> 02:53:25,240
to the agents and rocket I don't start

3231
02:53:25,240 --> 02:53:35,110
with that let's see so now you have the

3232
02:53:35,110 --> 02:53:38,170
yeah the you had the for Magilla you go

3233
02:53:38,170 --> 02:53:41,950
from the building to the execution to

3234
02:53:41,950 --> 02:53:45,940
the we're finding it if you process ID

3235
02:53:45,940 --> 02:53:49,420
gives you the the executable so this is

3236
02:53:49,420 --> 02:53:51,730
I a an amazing tool for researchers I

3237
02:53:51,730 --> 02:53:54,430
love this I it's I always wish I had

3238
02:53:54,430 --> 02:53:55,359
some fun like this

3239
02:53:55,359 --> 02:53:57,669
it took a lot of time in the industry to

3240
02:53:57,669 --> 02:53:59,919
to get to this point and obviously we

3241
02:53:59,919 --> 02:54:02,109
didn't have the technologies we have

3242
02:54:02,109 --> 02:54:07,569
nowadays so ruddy the agent in this case

3243
02:54:07,569 --> 02:54:11,800
is the hostname as that is that what it

3244
02:54:11,800 --> 02:54:15,249
matches on the field trying to know the

3245
02:54:15,249 --> 02:54:17,260
age should be under an exit euro

3246
02:54:17,260 --> 02:54:27,399
oh yeah maybe if I don't specify an

3247
02:54:27,399 --> 02:54:30,189
index wonder if this shows up anywhere

3248
02:54:30,189 --> 02:54:32,619
else did you show some what else do you

3249
02:54:32,619 --> 02:54:36,609
see in there in this area are you yeah

3250
02:54:36,609 --> 02:54:38,770
so it's showing up in the system on

3251
02:54:38,770 --> 02:54:44,260
events to partial execution bypass and

3252
02:54:44,260 --> 02:54:48,810
then some command cool very cool

3253
02:54:48,810 --> 02:54:52,180
yeah it's a little tricky and the guys

3254
02:54:52,180 --> 02:54:54,819
we're dealing with this as you are

3255
02:54:54,819 --> 02:54:57,069
you can see the operation still going

3256
02:54:57,069 --> 02:55:00,489
and some things will apply some others

3257
02:55:00,489 --> 02:55:04,060
would not again I want to emphasize this

3258
02:55:04,060 --> 02:55:06,669
when you do this you want to use your

3259
02:55:06,669 --> 02:55:12,300
golden image your golden image is your

3260
02:55:13,859 --> 02:55:19,890
ISO your bare metal workstation your

3261
02:55:19,890 --> 02:55:23,199
inventory approve of whitelisting

3262
02:55:23,199 --> 02:55:26,709
blacklisting applications that you're

3263
02:55:26,709 --> 02:55:31,869
gonna run against this test in order for

3264
02:55:31,869 --> 02:55:34,029
you to know oh if we were attacked by

3265
02:55:34,029 --> 02:55:36,069
this then this is what would happen

3266
02:55:36,069 --> 02:55:39,100
right so always remember that if you if

3267
02:55:39,100 --> 02:55:41,680
you don't use the molding image you I'm

3268
02:55:41,680 --> 02:55:43,959
not getting a representative result or

3269
02:55:43,959 --> 02:55:46,119
what happened within your environment if

3270
02:55:46,119 --> 02:55:47,560
you are a blue Tina for example if

3271
02:55:47,560 --> 02:55:49,419
you're a researcher and you're not

3272
02:55:49,419 --> 02:55:52,029
looking at this is a perspective of the

3273
02:55:52,029 --> 02:55:54,729
fans but it's a different focus you look

3274
02:55:54,729 --> 02:55:58,479
at this mostly front from the writing a

3275
02:55:58,479 --> 02:56:03,270
signature or like we're doing a Splunk

3276
02:56:03,270 --> 02:56:09,420
do some SPL the kungfu and finding

3277
02:56:09,420 --> 02:56:11,830
maliciousness to creating tables of

3278
02:56:11,830 --> 02:56:19,180
dashboard great I I'm gonna end it here

3279
02:56:19,180 --> 02:56:22,630
it's ok rod I think I did we covered

3280
02:56:22,630 --> 02:56:27,670
quite a bit um I'm actually kind of

3281
02:56:27,670 --> 02:56:29,110
happy and thankful that things didn't

3282
02:56:29,110 --> 02:56:30,610
work exactly how we expected because

3283
02:56:30,610 --> 02:56:32,140
everybody got a good a taste of like

3284
02:56:32,140 --> 02:56:33,670
what troubleshooting the attack meant

3285
02:56:33,670 --> 02:56:37,450
she looks like also but yeah this should

3286
02:56:37,450 --> 02:56:38,860
give you a really good experience to

3287
02:56:38,860 --> 02:56:40,120
like how you know how do you build

3288
02:56:40,120 --> 02:56:42,010
things how do you launch an attack how

3289
02:56:42,010 --> 02:56:46,090
is it pieced together again we're we're

3290
02:56:46,090 --> 02:56:47,770
we're we're gonna be around in this

3291
02:56:47,770 --> 02:56:49,180
chord if you're still playing with this

3292
02:56:49,180 --> 02:56:52,930
thing the goal is to destroy all the

3293
02:56:52,930 --> 02:56:55,960
provider labs by first thing tomorrow

3294
02:56:55,960 --> 02:56:57,610
morning so they'll be around for a

3295
02:56:57,610 --> 02:56:59,250
little while again if you want to keep

3296
02:56:59,250 --> 02:57:03,760
kicking around inside of them and yeah

3297
02:57:03,760 --> 02:57:05,950
again rod and I will beat this court

3298
02:57:05,950 --> 02:57:07,920
otherwise you can find us on Twitter

3299
02:57:07,920 --> 02:57:13,540
this this was fun yes guys was gonna say

3300
02:57:13,540 --> 02:57:17,350
thank you Joseph and you know the Texas

3301
02:57:17,350 --> 02:57:19,479
cyber summit team that you guys have

3302
02:57:19,479 --> 02:57:20,770
done an amazing jump on this been

3303
02:57:20,770 --> 02:57:25,300
together no thank you guys I mean you're

3304
02:57:25,300 --> 02:57:27,550
you've provided a lot of resources for

3305
02:57:27,550 --> 02:57:30,010
the attendees to be able to learn we're

3306
02:57:30,010 --> 02:57:31,270
not charging for this you're not

3307
02:57:31,270 --> 02:57:32,950
charging for this so this is all about

3308
02:57:32,950 --> 02:57:35,040
taking care of the community

3309
02:57:35,040 --> 02:57:37,630
yeah that's gonna reach out to us

3310
02:57:37,630 --> 02:57:40,840
anytime and expect more from this tool

3311
02:57:40,840 --> 02:57:43,630
we're gonna be delivering more then

3312
02:57:43,630 --> 02:57:45,040
there will be other stuff that we'll be

3313
02:57:45,040 --> 02:57:47,070
adding to the attack range hopefully

3314
02:57:47,070 --> 02:57:49,360
with this tool you will be able now to

3315
02:57:49,360 --> 02:57:51,220
create your own signatures and you'll be

3316
02:57:51,220 --> 02:57:52,570
able to share them with everybody

3317
02:57:52,570 --> 02:57:54,520
same thing with new research and your

3318
02:57:54,520 --> 02:57:56,380
expectations or wish you good luck and

3319
02:57:56,380 --> 02:58:00,160
success using this tool Thank You rod

3320
02:58:00,160 --> 02:58:04,210
and Jose you guys have a great rest of

3321
02:58:04,210 --> 02:58:08,188
your Sunday thank you

