1
00:00:02,990 --> 00:00:21,080
[Music]

2
00:00:18,130 --> 00:00:23,119
if you'd like<font color="#CCCCCC"> you can navigate to this</font>

3
00:00:21,080 --> 00:00:25,459
URL and have the slides available

4
00:00:23,120 --> 00:00:28,160
because usually when I come to<font color="#E5E5E5"> these</font>

5
00:00:25,460 --> 00:00:30,440
type of events projectors kind of fail

6
00:00:28,160 --> 00:00:32,540
you so if you want<font color="#E5E5E5"> to download that</font>

7
00:00:30,440 --> 00:00:42,380
there's a link I'll leave<font color="#CCCCCC"> it up for</font>

8
00:00:32,540 --> 00:00:47,390
another few seconds so all right so

9
00:00:42,380 --> 00:00:49,390
<font color="#E5E5E5">fairies good</font><font color="#CCCCCC"> all right so a few</font><font color="#E5E5E5"> things I</font>

10
00:00:47,390 --> 00:00:54,290
<font color="#CCCCCC">want to mention before we get started</font>

11
00:00:49,390 --> 00:00:57,650
the doubletree at an<font color="#CCCCCC"> Austin here is run</font>

12
00:00:54,290 --> 00:01:01,850
by Satan themselves they'll sell your

13
00:00:57,650 --> 00:01:04,759
room without telling you you'll be woken

14
00:01:01,850 --> 00:01:11,690
up at all hours of the evening if you do

15
00:01:04,759 --> 00:01:19,130
manage to get a room so some of those

16
00:01:11,690 --> 00:01:20,420
are more suggestions and yeah we came in

17
00:01:19,130 --> 00:01:21,860
yesterday three of us came in and they

18
00:01:20,420 --> 00:01:23,990
sold our rooms they didn't<font color="#E5E5E5"> even tell</font><font color="#CCCCCC"> us</font>

19
00:01:21,860 --> 00:01:25,550
so things got interesting does it

20
00:01:23,990 --> 00:01:29,440
actually did have a room where woke up

21
00:01:25,550 --> 00:01:40,520
at 5am so<font color="#CCCCCC"> yeah with to a fire alarm</font><font color="#E5E5E5"> so</font>

22
00:01:29,440 --> 00:01:44,539
anyways yeah who knows right there are a

23
00:01:40,520 --> 00:01:47,350
lot of questions uh I<font color="#E5E5E5"> don't answer</font>

24
00:01:44,539 --> 00:01:51,170
questions where our rooms go yeah so

25
00:01:47,350 --> 00:01:53,750
about this presentation<font color="#E5E5E5"> it's for your</font>

26
00:01:51,170 --> 00:01:55,220
benefit that's why I'm here<font color="#E5E5E5"> so let's</font>

27
00:01:53,750 --> 00:01:57,470
keep it interactive if you want to ask

28
00:01:55,220 --> 00:02:00,170
<font color="#CCCCCC">questions let's</font><font color="#E5E5E5"> not do QA at the end</font>

29
00:01:57,470 --> 00:02:03,050
stop me<font color="#E5E5E5"> will will cover write that in</font>

30
00:02:00,170 --> 00:02:04,759
there I was like 150 slides so what I'm

31
00:02:03,050 --> 00:02:07,069
going to try<font color="#CCCCCC"> to do is give you some</font>

32
00:02:04,759 --> 00:02:09,709
broad overview of some of the things I'm

33
00:02:07,069 --> 00:02:11,990
talking about<font color="#E5E5E5"> then dig down where</font>

34
00:02:09,709 --> 00:02:15,530
applicable and stay of that when we're

35
00:02:11,990 --> 00:02:17,540
not so seats you have is Ian they

36
00:02:15,530 --> 00:02:19,400
covered that things I like to<font color="#E5E5E5"> talk about</font>

37
00:02:17,540 --> 00:02:20,900
our<font color="#E5E5E5"> dev if you I don't know if you go to</font>

38
00:02:19,400 --> 00:02:22,819
any of you have<font color="#CCCCCC"> seen some of</font><font color="#E5E5E5"> the dev</font><font color="#CCCCCC"> ops</font>

39
00:02:20,900 --> 00:02:25,819
stuff<font color="#E5E5E5"> I've talked about before I really</font>

40
00:02:22,819 --> 00:02:29,519
like breaking into dev ops tooling

41
00:02:25,819 --> 00:02:33,140
that's really fun<font color="#E5E5E5"> wrote rails goat</font>

42
00:02:29,520 --> 00:02:35,790
and obviously I'm in a day AWS security

43
00:02:33,140 --> 00:02:36,839
<font color="#CCCCCC">alright so I'm the CTO of a security</font>

44
00:02:35,790 --> 00:02:38,940
company that comes with its own

45
00:02:36,840 --> 00:02:40,020
challenges but then using AWS and being

46
00:02:38,940 --> 00:02:41,550
responsible for<font color="#CCCCCC"> the security that</font>

47
00:02:40,020 --> 00:02:43,770
infrastructure a whole other set of

48
00:02:41,550 --> 00:02:48,180
challenges right things are changing

49
00:02:43,770 --> 00:02:50,730
pretty pretty quickly pretty often and

50
00:02:48,180 --> 00:02:54,930
<font color="#CCCCCC">we respond responsible for keeping that</font>

51
00:02:50,730 --> 00:02:57,440
secure so what<font color="#E5E5E5"> I have come across from</font>

52
00:02:54,930 --> 00:02:59,990
other security teams is situation and

53
00:02:57,440 --> 00:03:02,010
stop me if this sounds familiar

54
00:02:59,990 --> 00:03:05,780
basically you've got developers who are

55
00:03:02,010 --> 00:03:08,519
<font color="#E5E5E5">saying hey we want to push into AWS and</font>

56
00:03:05,780 --> 00:03:10,860
security doesn't necessarily have that

57
00:03:08,520 --> 00:03:12,540
AWS background rate of us security

58
00:03:10,860 --> 00:03:15,330
<font color="#E5E5E5">experience and</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> trying to catch</font><font color="#CCCCCC"> up</font>

59
00:03:12,540 --> 00:03:19,320
or<font color="#E5E5E5"> maybe you</font><font color="#CCCCCC"> have a little</font><font color="#E5E5E5"> bit of</font>

60
00:03:15,330 --> 00:03:22,010
experience<font color="#E5E5E5"> but still a challenge for</font><font color="#CCCCCC"> you</font>

61
00:03:19,320 --> 00:03:24,780
install this something that's new so I

62
00:03:22,010 --> 00:03:27,510
figure give you some<font color="#E5E5E5"> of this the</font>

63
00:03:24,780 --> 00:03:31,740
practical lessons I learned maybe that

64
00:03:27,510 --> 00:03:32,730
will help you<font color="#CCCCCC"> all right so high level</font>

65
00:03:31,740 --> 00:03:34,920
going to<font color="#E5E5E5"> prevent bad stuff from</font>

66
00:03:32,730 --> 00:03:38,790
happening alert ourselves if it's

67
00:03:34,920 --> 00:03:42,350
happening and then recover from it you

68
00:03:38,790 --> 00:03:44,640
know if the worst case does happen so

69
00:03:42,350 --> 00:03:46,019
basically the practical plan consists of

70
00:03:44,640 --> 00:03:50,220
hardening the environment so it's hard

71
00:03:46,020 --> 00:03:52,110
<font color="#E5E5E5">to get to monitoring for changes that</font>

72
00:03:50,220 --> 00:03:54,750
are security impacting monitoring for

73
00:03:52,110 --> 00:03:57,030
people trying to<font color="#E5E5E5"> attack you and then</font>

74
00:03:54,750 --> 00:04:01,950
being able to restore from an actual

75
00:03:57,030 --> 00:04:03,990
<font color="#CCCCCC">attack so um if you have</font><font color="#E5E5E5"> not taken it</font>

76
00:04:01,950 --> 00:04:06,269
have not seen it AWS does a great job of

77
00:04:03,990 --> 00:04:08,070
offering different CVTs this one's free

78
00:04:06,270 --> 00:04:09,810
and it's a security fundamentals course

79
00:04:08,070 --> 00:04:12,540
I really recommend it covers a lot of

80
00:04:09,810 --> 00:04:14,490
things<font color="#E5E5E5"> at a high level</font><font color="#CCCCCC"> and some a little</font>

81
00:04:12,540 --> 00:04:17,099
bit lower level so it's it's pretty good

82
00:04:14,490 --> 00:04:18,870
<font color="#CCCCCC">but they give you their security plan</font>

83
00:04:17,100 --> 00:04:22,020
and a lot of<font color="#E5E5E5"> what I talk about falls in</font>

84
00:04:18,870 --> 00:04:24,660
line with their security plan so nice<font color="#E5E5E5"> to</font>

85
00:04:22,019 --> 00:04:28,140
see the practicality matches up with AWS

86
00:04:24,660 --> 00:04:30,930
<font color="#E5E5E5">as a security course</font><font color="#CCCCCC"> all right so things</font>

87
00:04:28,140 --> 00:04:33,750
are not going to talk about s3 bucket

88
00:04:30,930 --> 00:04:36,270
policies SSH security or start security

89
00:04:33,750 --> 00:04:38,340
groups and ssh keys and things of that

90
00:04:36,270 --> 00:04:40,590
nature<font color="#E5E5E5"> that's not really what I want to</font>

91
00:04:38,340 --> 00:04:42,330
get<font color="#E5E5E5"> into not saying they don't have a</font>

92
00:04:40,590 --> 00:04:42,960
place but there's tons of checklist and

93
00:04:42,330 --> 00:04:45,330
there's

94
00:04:42,960 --> 00:04:46,739
ends of resources out there and this is

95
00:04:45,330 --> 00:04:48,719
really kind of<font color="#E5E5E5"> low-hanging fruit and</font>

96
00:04:46,740 --> 00:04:51,479
speaking of that trusted advisor will

97
00:04:48,720 --> 00:04:53,940
help you detect those low hanging fruit

98
00:04:51,479 --> 00:04:56,190
issues so<font color="#E5E5E5"> I really recommend an urge you</font>

99
00:04:53,940 --> 00:04:57,930
to use<font color="#E5E5E5"> it and there are two checklists</font>

100
00:04:56,190 --> 00:04:59,490
which I believe are fairly important

101
00:04:57,930 --> 00:05:01,050
that everybody should be kind<font color="#E5E5E5"> of</font>

102
00:04:59,490 --> 00:05:03,030
following along with in<font color="#E5E5E5"> their 80s</font>

103
00:05:01,050 --> 00:05:04,380
environment those are the operational

104
00:05:03,030 --> 00:05:06,929
checklist and the security auditing

105
00:05:04,380 --> 00:05:09,780
checklist offered by amazon and updated

106
00:05:06,930 --> 00:05:12,900
periodically and as I said<font color="#E5E5E5"> there's</font>

107
00:05:09,780 --> 00:05:15,448
security fundamentals course free cbt so

108
00:05:12,900 --> 00:05:17,250
how we're not<font color="#E5E5E5"> going to cover the basics</font>

109
00:05:15,449 --> 00:05:19,320
those are some<font color="#E5E5E5"> of the things that you</font>

110
00:05:17,250 --> 00:05:21,300
know you probably already know we are

111
00:05:19,320 --> 00:05:27,840
going<font color="#CCCCCC"> to</font><font color="#E5E5E5"> cover hardening monitoring in</font>

112
00:05:21,300 --> 00:05:33,389
recovery just pause to<font color="#CCCCCC"> take a sip of</font>

113
00:05:27,840 --> 00:05:36,719
water have that get up there<font color="#CCCCCC"> all right</font>

114
00:05:33,389 --> 00:05:39,120
so I am<font color="#CCCCCC"> hardening basics making it</font>

115
00:05:36,720 --> 00:05:42,569
difficult to reach our environment<font color="#CCCCCC"> all</font>

116
00:05:39,120 --> 00:05:44,460
<font color="#CCCCCC">right so number one don't use the root</font>

117
00:05:42,569 --> 00:05:45,810
account for operational purposes we're

118
00:05:44,460 --> 00:05:47,340
gonna talk<font color="#E5E5E5"> about some of the things you</font>

119
00:05:45,810 --> 00:05:51,710
<font color="#E5E5E5">can do with the root</font><font color="#CCCCCC"> account to secure</font>

120
00:05:47,340 --> 00:05:53,580
it auditing your I am<font color="#E5E5E5"> user policies</font>

121
00:05:51,710 --> 00:05:55,859
we're gonna<font color="#E5E5E5"> talk</font><font color="#CCCCCC"> about multi-factor</font>

122
00:05:53,580 --> 00:05:59,820
authentication and some other things<font color="#E5E5E5"> so</font>

123
00:05:55,860 --> 00:06:02,550
the root<font color="#CCCCCC"> account every AWS organization</font>

124
00:05:59,820 --> 00:06:05,430
or sorry every AWS environment has a

125
00:06:02,550 --> 00:06:07,289
root account we all know<font color="#E5E5E5"> this only</font><font color="#CCCCCC"> use</font>

126
00:06:05,430 --> 00:06:08,820
it when you<font color="#E5E5E5"> absolutely have to use</font><font color="#CCCCCC"> it</font>

127
00:06:07,289 --> 00:06:10,590
though there are only certain situations

128
00:06:08,820 --> 00:06:13,110
in which the root account is actually

129
00:06:10,590 --> 00:06:14,969
required for most operational tasks root

130
00:06:13,110 --> 00:06:17,490
accounts<font color="#E5E5E5"> not required and there's a</font>

131
00:06:14,969 --> 00:06:20,099
<font color="#E5E5E5">reason for this when we go throughout</font>

132
00:06:17,490 --> 00:06:22,199
setting up alerts we want to<font color="#E5E5E5"> know that</font>

133
00:06:20,099 --> 00:06:24,120
the root accounts has<font color="#E5E5E5"> been you the root</font>

134
00:06:22,199 --> 00:06:26,070
account has been used and so you want to

135
00:06:24,120 --> 00:06:28,919
<font color="#E5E5E5">tell your developers or you want to tell</font>

136
00:06:26,070 --> 00:06:30,270
<font color="#E5E5E5">your team rather ahead of time hey we're</font>

137
00:06:28,919 --> 00:06:33,539
going<font color="#E5E5E5"> to have to use the root account</font>

138
00:06:30,270 --> 00:06:35,698
<font color="#E5E5E5">for this specific reason and if nobody</font>

139
00:06:33,539 --> 00:06:37,409
tells you<font color="#E5E5E5"> that you know hey the root</font>

140
00:06:35,699 --> 00:06:39,840
account is going to be used and you get

141
00:06:37,409 --> 00:06:42,889
an alert that it has been<font color="#CCCCCC"> used you know</font>

142
00:06:39,840 --> 00:06:48,258
to freak out at least<font color="#E5E5E5"> that's my approach</font>

143
00:06:42,889 --> 00:06:51,060
so removing this is pretty<font color="#E5E5E5"> basic remove</font>

144
00:06:48,259 --> 00:06:53,130
so remove the access keys but one thing

145
00:06:51,060 --> 00:06:54,599
I<font color="#CCCCCC"> don't mention</font><font color="#E5E5E5"> here is also enable MFA</font>

146
00:06:53,130 --> 00:06:56,169
on the root<font color="#CCCCCC"> account that's a</font><font color="#E5E5E5"> no brainer</font>

147
00:06:54,599 --> 00:06:58,180
<font color="#E5E5E5">and I'll give you a</font>

148
00:06:56,169 --> 00:07:01,469
<font color="#CCCCCC">some more information on that we talked</font>

149
00:06:58,180 --> 00:07:06,310
about<font color="#E5E5E5"> mfa multi-factor authentication</font>

150
00:07:01,469 --> 00:07:10,930
<font color="#CCCCCC">okay so</font><font color="#E5E5E5"> I am user permissions this is a</font>

151
00:07:06,310 --> 00:07:14,169
really I really find this to be super

152
00:07:10,930 --> 00:07:16,810
complex in the<font color="#E5E5E5"> sense that okay so each</font>

153
00:07:14,169 --> 00:07:18,878
user has managed policy and they have in

154
00:07:16,810 --> 00:07:21,279
online<font color="#CCCCCC"> policies sorry I shouldn't say it</font>

155
00:07:18,879 --> 00:07:24,009
in a in a singular<font color="#CCCCCC"> formats a plural form</font>

156
00:07:21,279 --> 00:07:26,379
so every user has you know they<font color="#E5E5E5"> can have</font>

157
00:07:24,009 --> 00:07:27,909
managed policies in line policies that

158
00:07:26,379 --> 00:07:30,339
can belong to groups that also have

159
00:07:27,909 --> 00:07:32,289
additional managed policies and in line

160
00:07:30,339 --> 00:07:33,870
policies and if you have if ever<font color="#E5E5E5"> you had</font>

161
00:07:32,289 --> 00:07:37,900
to audit this in a real organization

162
00:07:33,870 --> 00:07:39,999
using AWS it can become this<font color="#E5E5E5"> web of</font>

163
00:07:37,900 --> 00:07:42,279
complexity and you don't actually<font color="#E5E5E5"> know</font>

164
00:07:39,999 --> 00:07:44,289
what<font color="#E5E5E5"> people have access to and obviously</font>

165
00:07:42,279 --> 00:07:47,199
that's a that's a problem and to briefly

166
00:07:44,289 --> 00:07:48,878
describe managed policies are policies

167
00:07:47,199 --> 00:07:51,370
that can be attached to multiple users

168
00:07:48,879 --> 00:07:54,969
groups roles<font color="#E5E5E5"> whereas in line policies</font>

169
00:07:51,370 --> 00:07:58,749
are attached only to one user group a

170
00:07:54,969 --> 00:08:00,339
role I wrote some code it's<font color="#E5E5E5"> not the most</font>

171
00:07:58,749 --> 00:08:01,810
beautiful code I mean I'm<font color="#E5E5E5"> not sitting</font>

172
00:08:00,339 --> 00:08:04,149
<font color="#E5E5E5">here and saying I'm proud</font><font color="#CCCCCC"> of it but it</font>

173
00:08:01,810 --> 00:08:07,240
does do the job it'll create a CSV file

174
00:08:04,149 --> 00:08:10,509
that actually maps out a<font color="#CCCCCC"> user name and a</font>

175
00:08:07,240 --> 00:08:12,370
double us to manage policies to inline

176
00:08:10,509 --> 00:08:18,009
policies and then the groups that they

177
00:08:12,370 --> 00:08:19,210
belong to it's up on github and this is

178
00:08:18,009 --> 00:08:22,839
what it<font color="#E5E5E5"> looks like so it gives you these</font>

179
00:08:19,210 --> 00:08:25,448
four columns as I said this is zooming

180
00:08:22,839 --> 00:08:27,399
in<font color="#CCCCCC"> now this</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> a real</font><font color="#E5E5E5"> this a scrub</font>

181
00:08:25,449 --> 00:08:31,389
<font color="#E5E5E5">sanitized data from a real client and</font>

182
00:08:27,399 --> 00:08:34,089
you<font color="#CCCCCC"> can see how much how many different</font>

183
00:08:31,389 --> 00:08:37,899
<font color="#E5E5E5">things are in this one in line policy</font>

184
00:08:34,089 --> 00:08:42,760
for this one user so it's a<font color="#E5E5E5"> little bit</font>

185
00:08:37,899 --> 00:08:46,149
<font color="#E5E5E5">of a little bit of a</font><font color="#CCCCCC"> catastrophe so why</font>

186
00:08:42,760 --> 00:08:47,769
are I am user policies important so if

187
00:08:46,149 --> 00:08:49,149
your organization that how sensitive

188
00:08:47,769 --> 00:08:51,699
data and I am<font color="#E5E5E5"> and you have to actually</font>

189
00:08:49,149 --> 00:08:54,510
audit who has access to<font color="#CCCCCC"> what they may</font>

190
00:08:51,699 --> 00:08:57,459
have<font color="#E5E5E5"> more access than you realize right</font>

191
00:08:54,510 --> 00:08:59,199
you know I've seen basically a situation

192
00:08:57,459 --> 00:09:02,410
where there were some encrypted volumes

193
00:08:59,199 --> 00:09:03,760
and some encrypted instances or sorry

194
00:09:02,410 --> 00:09:05,079
<font color="#CCCCCC">encrypt there were instances that had</font>

195
00:09:03,760 --> 00:09:07,720
encrypted volumes that had limited

196
00:09:05,079 --> 00:09:10,589
access problem is there were snapshots

197
00:09:07,720 --> 00:09:13,000
taking taken of those

198
00:09:10,589 --> 00:09:14,800
sorry unencrypted volumes that were

199
00:09:13,000 --> 00:09:16,480
should have been encrypted and those

200
00:09:14,800 --> 00:09:19,510
unencrypted<font color="#E5E5E5"> volume snap shots were taken</font>

201
00:09:16,480 --> 00:09:21,670
and the problem<font color="#E5E5E5"> is that anybody with EC</font>

202
00:09:19,510 --> 00:09:23,740
to access can spin up an ec2 instance

203
00:09:21,670 --> 00:09:26,110
and attach an unencrypted volume when

204
00:09:23,740 --> 00:09:28,779
you encrypt the volume however you have

205
00:09:26,110 --> 00:09:31,660
this KMS set up with<font color="#E5E5E5"> an AWS which means</font>

206
00:09:28,779 --> 00:09:33,910
to access the key used to encrypt that

207
00:09:31,660 --> 00:09:35,770
that volume you actually have to be

208
00:09:33,910 --> 00:09:40,480
explicitly allowed to do that as a user

209
00:09:35,770 --> 00:09:43,120
so having sensitive data knowing who has

210
00:09:40,480 --> 00:09:46,180
access<font color="#E5E5E5"> to what super important you need</font>

211
00:09:43,120 --> 00:10:16,600
to audit that pretty frequently uh what

212
00:09:46,180 --> 00:10:17,709
<font color="#E5E5E5">I will say is too much accent yeah and</font>

213
00:10:16,600 --> 00:10:20,290
actually that's mentioned in the

214
00:10:17,709 --> 00:10:21,849
incident response it's like the one of

215
00:10:20,290 --> 00:10:23,529
the very last slides but I'm glad<font color="#E5E5E5"> you</font>

216
00:10:21,850 --> 00:10:25,540
brought it<font color="#E5E5E5"> up because yeah it's there's</font>

217
00:10:23,529 --> 00:10:28,060
<font color="#E5E5E5">my code by the way it's not super pretty</font>

218
00:10:25,540 --> 00:10:30,370
but that output is and also security

219
00:10:28,060 --> 00:10:34,469
monkey has great chain change management

220
00:10:30,370 --> 00:10:34,470
<font color="#CCCCCC">tracking and it's open source by</font><font color="#E5E5E5"> Netflix</font>

221
00:10:47,010 --> 00:10:53,850
yep<font color="#CCCCCC"> okay so did everybody hear that AWS</font>

222
00:10:51,700 --> 00:10:56,680
has a framework what's it called the

223
00:10:53,850 --> 00:10:59,500
<font color="#CCCCCC">well architected framework that you</font>

224
00:10:56,680 --> 00:11:01,349
should look up and talks a bit about

225
00:10:59,500 --> 00:11:05,770
some<font color="#E5E5E5"> of the</font><font color="#CCCCCC"> stuff that we're recovering</font>

226
00:11:01,350 --> 00:11:08,290
<font color="#CCCCCC">okay so AWS is a</font><font color="#E5E5E5"> flexible environment as</font>

227
00:11:05,770 --> 00:11:09,819
well so as that changes you obviously

228
00:11:08,290 --> 00:11:11,410
knew things get spun up you need<font color="#E5E5E5"> to know</font>

229
00:11:09,820 --> 00:11:13,990
<font color="#E5E5E5">who has access it's just a good idea</font><font color="#CCCCCC"> to</font>

230
00:11:11,410 --> 00:11:16,810
<font color="#E5E5E5">know who has access to what we talk talk</font>

231
00:11:13,990 --> 00:11:18,160
about<font color="#CCCCCC"> multi-factor authentication for</font>

232
00:11:16,810 --> 00:11:20,369
some use a super simple you already know

233
00:11:18,160 --> 00:11:22,120
how to do<font color="#CCCCCC"> this for those that don't</font>

234
00:11:20,370 --> 00:11:23,500
multi-factor authentication is

235
00:11:22,120 --> 00:11:24,910
essentially<font color="#CCCCCC"> two factor</font>

236
00:11:23,500 --> 00:11:26,980
authentication if your credentials<font color="#CCCCCC"> are</font>

237
00:11:24,910 --> 00:11:30,010
guests<font color="#CCCCCC"> or stolen</font><font color="#E5E5E5"> this protects you as</font>

238
00:11:26,980 --> 00:11:32,230
any two-factor authentication piece

239
00:11:30,010 --> 00:11:34,540
would you can use Google Authenticator

240
00:11:32,230 --> 00:11:36,850
<font color="#CCCCCC">gemalto hardware Google Authenticator</font>

241
00:11:34,540 --> 00:11:39,339
being one version of like the virtual

242
00:11:36,850 --> 00:11:42,670
device and<font color="#CCCCCC"> Gemalto being the like</font>

243
00:11:39,340 --> 00:11:45,460
hardware device for two factor auth put

244
00:11:42,670 --> 00:11:47,380
a full list in here so we're going<font color="#E5E5E5"> to</font>

245
00:11:45,460 --> 00:11:49,210
demonstrate enabling MFA real quick on a

246
00:11:47,380 --> 00:11:51,700
high am account for one single account

247
00:11:49,210 --> 00:11:56,020
you go down to security<font color="#E5E5E5"> grant chills you</font>

248
00:11:51,700 --> 00:11:58,320
click manage MFA device click on choose

249
00:11:56,020 --> 00:12:00,880
the type of device virtual or hardware

250
00:11:58,320 --> 00:12:02,770
if you've<font color="#E5E5E5"> done a virtual device take a</font>

251
00:12:00,880 --> 00:12:06,870
<font color="#E5E5E5">picture with your phone of the QR code</font>

252
00:12:02,770 --> 00:12:10,660
and type in your authentication code

253
00:12:06,870 --> 00:12:12,340
you're good to go so one problem though

254
00:12:10,660 --> 00:12:13,630
is that<font color="#E5E5E5"> unless you have the</font><font color="#CCCCCC"> ia and</font>

255
00:12:12,340 --> 00:12:16,320
permissions<font color="#E5E5E5"> you won't actually be</font>

256
00:12:13,630 --> 00:12:18,460
allowed to do this right unless you're

257
00:12:16,320 --> 00:12:20,260
less you're an administrator or you have

258
00:12:18,460 --> 00:12:22,690
<font color="#E5E5E5">those</font><font color="#CCCCCC"> I am permissions you're kind of</font>

259
00:12:20,260 --> 00:12:29,560
out of luck so here's a policy that can

260
00:12:22,690 --> 00:12:32,710
<font color="#E5E5E5">actually fix that so I've got a link in</font>

261
00:12:29,560 --> 00:12:36,010
here for that and this will<font color="#E5E5E5"> allow a user</font>

262
00:12:32,710 --> 00:12:38,110
to manage their<font color="#E5E5E5"> own MFA device now back</font>

263
00:12:36,010 --> 00:12:41,380
to multi-factor authentication for<font color="#CCCCCC"> root</font>

264
00:12:38,110 --> 00:12:42,520
you<font color="#E5E5E5"> can use</font><font color="#CCCCCC"> TOTP TOTP protocols</font>

265
00:12:41,380 --> 00:12:46,570
essentially what they used<font color="#E5E5E5"> to generate</font>

266
00:12:42,520 --> 00:12:49,290
those MFA tokens or can be shared as

267
00:12:46,570 --> 00:12:54,430
well in like LastPass and one password

268
00:12:49,290 --> 00:12:58,180
and I like 1password so all right so<font color="#CCCCCC"> API</font>

269
00:12:54,430 --> 00:13:00,099
and mfa multi-factor authentication is

270
00:12:58,180 --> 00:13:01,930
typically thought of for the<font color="#E5E5E5"> web console</font>

271
00:13:00,100 --> 00:13:03,730
but what a lot of people don't realize

272
00:13:01,930 --> 00:13:05,859
<font color="#CCCCCC">is that you can actually put</font>

273
00:13:03,730 --> 00:13:09,160
multi-factor authentication on to the

274
00:13:05,860 --> 00:13:10,570
API the API being what's used when you

275
00:13:09,160 --> 00:13:12,040
don't need<font color="#E5E5E5"> to log in</font><font color="#CCCCCC"> a web console you</font>

276
00:13:10,570 --> 00:13:13,720
want to automate tasks which usually

277
00:13:12,040 --> 00:13:17,170
means you want to write some code that

278
00:13:13,720 --> 00:13:19,350
does<font color="#E5E5E5"> something and we all know</font><font color="#CCCCCC"> Keys</font>

279
00:13:17,170 --> 00:13:23,530
never get stored in source code so

280
00:13:19,350 --> 00:13:26,080
should<font color="#E5E5E5"> be fine what happens if keys do</font>

281
00:13:23,530 --> 00:13:30,310
get disclosed anybody heard of code

282
00:13:26,080 --> 00:13:32,740
spaces<font color="#E5E5E5"> 12 nobody else that makes sense</font>

283
00:13:30,310 --> 00:13:35,319
they<font color="#CCCCCC"> closed down because somebody stole</font>

284
00:13:32,740 --> 00:13:36,880
our secret<font color="#E5E5E5"> keys burned down there a</font>

285
00:13:35,320 --> 00:13:38,810
two-base environment and then

286
00:13:36,880 --> 00:13:41,090
that was it for them they<font color="#CCCCCC"> just went out</font>

287
00:13:38,810 --> 00:13:42,589
of<font color="#E5E5E5"> business granted though that's not</font>

288
00:13:41,090 --> 00:13:43,910
the usually<font color="#CCCCCC"> that what</font><font color="#E5E5E5"> happens in the</font>

289
00:13:42,590 --> 00:13:45,140
<font color="#CCCCCC">worst-case scenario what usually happens</font>

290
00:13:43,910 --> 00:13:47,540
if somebody wakes up and<font color="#E5E5E5"> they're like it</font>

291
00:13:45,140 --> 00:13:49,189
we got 10,000 20,000 $50,000 and

292
00:13:47,540 --> 00:13:50,540
expenses that now we're a couple for

293
00:13:49,190 --> 00:13:51,860
allow before because we didn't do

294
00:13:50,540 --> 00:13:54,949
<font color="#CCCCCC">anything to secure our eight of us</font>

295
00:13:51,860 --> 00:13:59,240
<font color="#E5E5E5">firemen that's the most likely</font><font color="#CCCCCC"> situation</font>

296
00:13:54,950 --> 00:14:00,500
so let's talk about and by<font color="#E5E5E5"> the way you</font>

297
00:13:59,240 --> 00:14:02,500
will mention you will notice i have

298
00:14:00,500 --> 00:14:05,300
mentioned you're financially responsible

299
00:14:02,500 --> 00:14:06,620
later I'll show you a thread that talks

300
00:14:05,300 --> 00:14:07,790
a little bit i'll give you a link to<font color="#CCCCCC"> a</font>

301
00:14:06,620 --> 00:14:08,900
thread that talks a little bit about

302
00:14:07,790 --> 00:14:13,579
that and<font color="#CCCCCC"> why you're financially</font>

303
00:14:08,900 --> 00:14:17,750
responsible or it could be so all right

304
00:14:13,580 --> 00:14:21,380
so put the put enable basically in force

305
00:14:17,750 --> 00:14:24,200
so we talking about enforcing<font color="#CCCCCC"> mfa this</font>

306
00:14:21,380 --> 00:14:29,120
actually enforces<font color="#E5E5E5"> mfa the policy about</font>

307
00:14:24,200 --> 00:14:30,860
to show you on on<font color="#CCCCCC"> and on whoever has</font>

308
00:14:29,120 --> 00:14:33,260
this policy attached to their account so

309
00:14:30,860 --> 00:14:35,750
this will require you'll see this line

310
00:14:33,260 --> 00:14:37,550
right here it says condition boolean

311
00:14:35,750 --> 00:14:39,110
multi-factor authentication present when

312
00:14:37,550 --> 00:14:41,390
that's on a<font color="#CCCCCC"> policy and</font><font color="#E5E5E5"> then attached</font><font color="#CCCCCC"> to</font>

313
00:14:39,110 --> 00:14:43,430
a group or user whatever the cases they

314
00:14:41,390 --> 00:14:47,030
have<font color="#E5E5E5"> to use multi-factor authentication</font>

315
00:14:43,430 --> 00:14:49,459
for the web and the API but it's kind of

316
00:14:47,030 --> 00:14:51,319
a<font color="#CCCCCC"> pain it kind of causes problems so</font>

317
00:14:49,460 --> 00:14:53,150
<font color="#E5E5E5">really be careful</font><font color="#CCCCCC"> of where you want to</font>

318
00:14:51,320 --> 00:14:57,340
actually or who you want<font color="#E5E5E5"> to attach this</font>

319
00:14:53,150 --> 00:14:59,600
to that's for<font color="#E5E5E5"> sure but you can use sts</font><font color="#CCCCCC"> I</font>

320
00:14:57,340 --> 00:15:02,840
have<font color="#CCCCCC"> I'll give you some code that</font>

321
00:14:59,600 --> 00:15:04,130
actually here's a gist so<font color="#E5E5E5"> I'll give you</font>

322
00:15:02,840 --> 00:15:05,660
some code and walk you through it real

323
00:15:04,130 --> 00:15:06,890
quick it's just a<font color="#E5E5E5"> proof of concept</font>

324
00:15:05,660 --> 00:15:08,959
obviously you're not going to<font color="#E5E5E5"> use this</font>

325
00:15:06,890 --> 00:15:13,460
<font color="#CCCCCC">everyday for operational purposes but it</font>

326
00:15:08,960 --> 00:15:15,290
does explain how sts works with<font color="#CCCCCC"> mfa so</font>

327
00:15:13,460 --> 00:15:17,360
essentially you've got this I've got the

328
00:15:15,290 --> 00:15:19,310
screenshot of code and you put in your

329
00:15:17,360 --> 00:15:23,000
access key ID you put in your access key

330
00:15:19,310 --> 00:15:27,229
secret the serial<font color="#CCCCCC"> number of your MFA</font>

331
00:15:23,000 --> 00:15:28,460
device and the MFA codes so your google

332
00:15:27,230 --> 00:15:32,530
authenticator code or whatever you're

333
00:15:28,460 --> 00:15:36,170
using and then when you run this for

334
00:15:32,530 --> 00:15:37,819
3600 seconds this is going<font color="#E5E5E5"> to</font><font color="#CCCCCC"> be your</font>

335
00:15:36,170 --> 00:15:40,910
the credentials you get back will<font color="#CCCCCC"> be</font>

336
00:15:37,820 --> 00:15:43,610
valid right so it what you get<font color="#E5E5E5"> back when</font>

337
00:15:40,910 --> 00:15:46,339
you run this script r is a new<font color="#E5E5E5"> access</font>

338
00:15:43,610 --> 00:15:48,490
key ID a new<font color="#CCCCCC"> access secret and a session</font>

339
00:15:46,340 --> 00:15:50,899
token and it's again

340
00:15:48,490 --> 00:15:53,870
pretty much available for y'all data to

341
00:15:50,899 --> 00:15:55,190
use and you can<font color="#E5E5E5"> obviously change the</font>

342
00:15:53,870 --> 00:15:56,810
duration of how long those temporary

343
00:15:55,190 --> 00:15:59,089
credentials are actually good for this

344
00:15:56,810 --> 00:16:02,660
is an example of using it this is a ec2

345
00:15:59,089 --> 00:16:04,550
API tools that AWS put out passing a few

346
00:16:02,660 --> 00:16:06,589
<font color="#CCCCCC">options we actually we actually get a</font>

347
00:16:04,550 --> 00:16:10,189
response back so we know sts does work

348
00:16:06,589 --> 00:16:12,920
with MFA and if you don't like<font color="#E5E5E5"> Ruby you</font>

349
00:16:10,190 --> 00:16:16,610
can use Python or Python and bash I

350
00:16:12,920 --> 00:16:18,319
think it's a combination SDS does not

351
00:16:16,610 --> 00:16:20,330
work with the last bean stock so if you

352
00:16:18,320 --> 00:16:23,390
are using elastic Beanstalk the<font color="#E5E5E5"> answer</font>

353
00:16:20,330 --> 00:16:26,899
would be to use code pipeline and that

354
00:16:23,390 --> 00:16:31,040
pulls from sa wsss three from code

355
00:16:26,899 --> 00:16:35,810
commit and then also from github um and

356
00:16:31,040 --> 00:16:38,449
then yeah<font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> not going to come so</font>

357
00:16:35,810 --> 00:16:40,880
password policy real quickly password

358
00:16:38,450 --> 00:16:42,410
policies should have some level of

359
00:16:40,880 --> 00:16:44,899
complexity I've seen orgs with no

360
00:16:42,410 --> 00:16:46,699
password policies here's an example

361
00:16:44,899 --> 00:16:48,649
password policy<font color="#E5E5E5"> don't want to spend all</font>

362
00:16:46,700 --> 00:16:50,870
the time in<font color="#E5E5E5"> the world on it but it's it</font>

363
00:16:48,649 --> 00:16:53,330
is still something to mention so again

364
00:16:50,870 --> 00:16:54,980
make<font color="#E5E5E5"> credentials hard to guess make them</font>

365
00:16:53,330 --> 00:16:59,240
harder to use if they are stolen and

366
00:16:54,980 --> 00:17:02,320
protect your King which is<font color="#CCCCCC"> a room so</font>

367
00:16:59,240 --> 00:17:08,270
this<font color="#E5E5E5"> is like sort of the more fun for</font><font color="#CCCCCC"> me</font>

368
00:17:02,320 --> 00:17:09,679
section<font color="#CCCCCC"> alright so assuming prevention</font>

369
00:17:08,270 --> 00:17:12,849
<font color="#E5E5E5">is failed so like let's say an access</font>

370
00:17:09,679 --> 00:17:14,900
key of<font color="#CCCCCC"> Abdullah here is stolen I</font>

371
00:17:12,849 --> 00:17:17,089
people's guy work with him<font color="#E5E5E5"> i'm putting</font>

372
00:17:14,900 --> 00:17:18,890
them on the<font color="#E5E5E5"> spot so let's say your</font>

373
00:17:17,089 --> 00:17:21,379
access key is stolen I want to<font color="#E5E5E5"> know that</font>

374
00:17:18,890 --> 00:17:23,329
if you're somebody's using those keys to

375
00:17:21,380 --> 00:17:26,540
do something bad inside the environment

376
00:17:23,329 --> 00:17:27,829
I want to<font color="#CCCCCC"> know</font><font color="#E5E5E5"> about it right so there</font>

377
00:17:26,540 --> 00:17:30,050
are four services we're going to talk

378
00:17:27,829 --> 00:17:32,440
about and then we're going<font color="#E5E5E5"> to show some</font>

379
00:17:30,050 --> 00:17:35,000
integration and some different things so

380
00:17:32,440 --> 00:17:35,990
one thing to mention is some of the

381
00:17:35,000 --> 00:17:40,220
things<font color="#E5E5E5"> going to show you have a lot of</font>

382
00:17:35,990 --> 00:17:43,490
noise so<font color="#E5E5E5"> when we get to lambda that</font>

383
00:17:40,220 --> 00:17:45,380
should help<font color="#E5E5E5"> you avoid some that noise by</font>

384
00:17:43,490 --> 00:17:49,309
pin pinpointing what you want to

385
00:17:45,380 --> 00:17:51,200
actually hear<font color="#CCCCCC"> okay so cloud trail that's</font>

386
00:17:49,309 --> 00:17:55,070
essentially logs<font color="#CCCCCC"> to where you store your</font>

387
00:17:51,200 --> 00:17:56,800
logs S&S is used for sending

388
00:17:55,070 --> 00:18:01,100
notifications that's a messaging service

389
00:17:56,800 --> 00:18:01,789
config that's like a that pretty much

390
00:18:01,100 --> 00:18:04,070
tells you

391
00:18:01,789 --> 00:18:05,389
what is changing what has changed and<font color="#E5E5E5"> it</font>

392
00:18:04,070 --> 00:18:07,460
does<font color="#CCCCCC"> that for every resource if you'd</font>

393
00:18:05,389 --> 00:18:08,928
like<font color="#CCCCCC"> it to inside of</font><font color="#E5E5E5"> AWS and then</font>

394
00:18:07,460 --> 00:18:12,559
there's cloud watch which is for very

395
00:18:08,929 --> 00:18:15,259
pinpointed fine-grained alerting<font color="#CCCCCC"> okay so</font>

396
00:18:12,559 --> 00:18:17,509
at a high level it's sort<font color="#E5E5E5"> of all of</font>

397
00:18:15,259 --> 00:18:20,600
these services feeding down into cloud

398
00:18:17,509 --> 00:18:22,279
trail logs being stored and then that

399
00:18:20,600 --> 00:18:24,428
information being parsed to actually

400
00:18:22,279 --> 00:18:28,639
provide you with some notifications

401
00:18:24,429 --> 00:18:30,440
we're really<font color="#E5E5E5"> going to focus on is taking</font>

402
00:18:28,639 --> 00:18:33,258
with config and cloud watch from those

403
00:18:30,440 --> 00:18:36,409
cloud trail logs pushing to S&S which

404
00:18:33,259 --> 00:18:42,440
will send you notifications so cloud

405
00:18:36,409 --> 00:18:44,659
trail basically to use it you<font color="#E5E5E5"> just turn</font>

406
00:18:42,440 --> 00:18:46,970
it<font color="#E5E5E5"> on you give it a name</font><font color="#CCCCCC"> you walk</font>

407
00:18:44,659 --> 00:18:49,429
through<font color="#E5E5E5"> a few steps configure a law</font>

408
00:18:46,970 --> 00:18:52,279
group allow creation of the IM role that

409
00:18:49,429 --> 00:18:53,749
happens automatically and you've got

410
00:18:52,279 --> 00:18:55,549
cloud trail enabled really that easy

411
00:18:53,749 --> 00:19:00,169
it's probably one of the easiest things

412
00:18:55,549 --> 00:19:01,519
in AWS to actually do so<font color="#CCCCCC"> S&S now when</font><font color="#E5E5E5"> we</font>

413
00:19:00,169 --> 00:19:03,019
talk<font color="#E5E5E5"> about SNS there are a few ways that</font>

414
00:19:01,519 --> 00:19:04,849
<font color="#CCCCCC">you can be notified it's actually more</font>

415
00:19:03,019 --> 00:19:10,369
in a few ways but my favorite ways are

416
00:19:04,849 --> 00:19:12,950
SMS email and now lambda which<font color="#E5E5E5"> i really</font>

417
00:19:10,369 --> 00:19:15,678
really do like fact that we can push

418
00:19:12,950 --> 00:19:16,729
<font color="#CCCCCC">tool and lambda with SMS and then if you</font>

419
00:19:15,679 --> 00:19:20,359
want to post your own application

420
00:19:16,729 --> 00:19:23,539
<font color="#E5E5E5">jason's available</font><font color="#CCCCCC"> json requests you can</font>

421
00:19:20,359 --> 00:19:25,820
receive so basically when you've got

422
00:19:23,539 --> 00:19:27,049
really important things<font color="#CCCCCC"> happening in</font>

423
00:19:25,820 --> 00:19:28,970
<font color="#E5E5E5">your environment when things that you</font>

424
00:19:27,049 --> 00:19:32,299
should be really worried about are

425
00:19:28,970 --> 00:19:33,590
happening this will have<font color="#E5E5E5"> the ability</font><font color="#CCCCCC"> to</font>

426
00:19:32,299 --> 00:19:34,789
alert you in real time that something's

427
00:19:33,590 --> 00:19:39,439
<font color="#CCCCCC">going wrong like if you</font><font color="#E5E5E5"> want a text</font>

428
00:19:34,789 --> 00:19:41,239
<font color="#E5E5E5">message so in order to create a topic</font>

429
00:19:39,440 --> 00:19:45,049
inside of so a topic is something that

430
00:19:41,239 --> 00:19:46,429
you subscribe to<font color="#CCCCCC"> a topic topic is a</font><font color="#E5E5E5"> root</font>

431
00:19:45,049 --> 00:19:48,289
account usage the rube accounts being

432
00:19:46,429 --> 00:19:52,539
used so<font color="#CCCCCC"> I'm gonna</font><font color="#E5E5E5"> create this topic and</font>

433
00:19:48,289 --> 00:19:54,349
<font color="#CCCCCC">then</font><font color="#E5E5E5"> let's to subscribe to it so</font>

434
00:19:52,539 --> 00:19:56,749
basically you can have multiple

435
00:19:54,349 --> 00:19:58,820
subscribers for one topic so you can

436
00:19:56,749 --> 00:20:00,889
have like your<font color="#E5E5E5"> VP of engineering or your</font>

437
00:19:58,820 --> 00:20:02,119
head of security<font color="#CCCCCC"> or whatever subscribe</font>

438
00:20:00,889 --> 00:20:05,539
to a topic and<font color="#E5E5E5"> they'll know that route</font>

439
00:20:02,119 --> 00:20:08,478
accounts being used in this case picture

440
00:20:05,539 --> 00:20:10,940
of SMS email<font color="#CCCCCC"> all right so config we're</font>

441
00:20:08,479 --> 00:20:14,570
<font color="#E5E5E5">moving on to config I'm kind of having</font>

442
00:20:10,940 --> 00:20:15,440
to burn through here so config is like I

443
00:20:14,570 --> 00:20:18,649
said

444
00:20:15,440 --> 00:20:20,539
a tool that just tracks anything that's

445
00:20:18,649 --> 00:20:23,209
that at all is changing based off of

446
00:20:20,539 --> 00:20:25,129
what it's used in cloud trail it's

447
00:20:23,210 --> 00:20:27,620
really<font color="#E5E5E5"> nice for compliance purposes for</font>

448
00:20:25,129 --> 00:20:29,899
instance incident response what<font color="#CCCCCC"> I can</font>

449
00:20:27,620 --> 00:20:31,610
<font color="#CCCCCC">say is that there are these prepackaged</font>

450
00:20:29,899 --> 00:20:34,129
rules and that list started it like

451
00:20:31,610 --> 00:20:35,059
seven and now it's growing<font color="#E5E5E5"> and the ones</font>

452
00:20:34,129 --> 00:20:36,559
i wanted to point out<font color="#CCCCCC"> that i actually</font>

453
00:20:35,059 --> 00:20:38,779
think are really interesting is config

454
00:20:36,559 --> 00:20:41,149
will let you know<font color="#E5E5E5"> if</font><font color="#CCCCCC"> like root account</font>

455
00:20:38,779 --> 00:20:43,370
<font color="#E5E5E5">mfa is no longer enabled or if it</font>

456
00:20:41,149 --> 00:20:45,979
becomes an if there's any<font color="#CCCCCC"> change in the</font>

457
00:20:43,370 --> 00:20:48,080
<font color="#E5E5E5">root account having</font><font color="#CCCCCC"> MFA attached to it</font>

458
00:20:45,980 --> 00:20:50,840
you'll know<font color="#CCCCCC"> about it I think it's really</font>

459
00:20:48,080 --> 00:20:53,720
<font color="#E5E5E5">cool that you know RDS those databases</font>

460
00:20:50,840 --> 00:20:56,449
<font color="#CCCCCC">write my sequel postgres taken care of</font>

461
00:20:53,720 --> 00:20:58,669
by AWS a service hosted service for AWS

462
00:20:56,450 --> 00:21:00,769
<font color="#E5E5E5">hosts that for you if encryption is no</font>

463
00:20:58,669 --> 00:21:05,000
longer turned on it'll let you know I

464
00:21:00,769 --> 00:21:07,159
think that's really<font color="#E5E5E5"> cool but that list</font>

465
00:21:05,000 --> 00:21:08,629
is available<font color="#CCCCCC"> here and you can see how</font>

466
00:21:07,159 --> 00:21:14,049
it's growing you can see what other

467
00:21:08,629 --> 00:21:17,330
prepackaged rules you can choose<font color="#E5E5E5"> from so</font>

468
00:21:14,049 --> 00:21:20,418
things<font color="#E5E5E5"> that you can be really explicit</font>

469
00:21:17,330 --> 00:21:23,809
about any changes in a firewall security

470
00:21:20,419 --> 00:21:25,580
group any changes<font color="#CCCCCC"> in the VPC or anything</font>

471
00:21:23,809 --> 00:21:28,700
at all so this is me saying hey I want

472
00:21:25,580 --> 00:21:31,789
<font color="#E5E5E5">to know about changes in the network ACL</font>

473
00:21:28,700 --> 00:21:35,779
and VPS in the VPC but when i<font color="#E5E5E5"> get to the</font>

474
00:21:31,789 --> 00:21:37,370
this other option<font color="#CCCCCC"> i say</font><font color="#E5E5E5"> no</font><font color="#CCCCCC"> i want to</font>

475
00:21:35,779 --> 00:21:39,889
know about<font color="#E5E5E5"> everything if anything at all</font>

476
00:21:37,370 --> 00:21:41,840
changes and this is super noisy if

477
00:21:39,889 --> 00:21:44,928
<font color="#E5E5E5">anything changes let me know about it</font><font color="#CCCCCC"> I</font>

478
00:21:41,840 --> 00:21:48,408
started with this and then had to sort

479
00:21:44,929 --> 00:21:52,519
of refine it from there because that you

480
00:21:48,409 --> 00:21:54,799
get a lot of notifications so these

481
00:21:52,519 --> 00:21:56,120
steps again you can go back through the

482
00:21:54,799 --> 00:21:59,960
slides but we're<font color="#E5E5E5"> going to create a</font>

483
00:21:56,120 --> 00:22:02,870
bucket assign it to an SMS topic allow

484
00:21:59,960 --> 00:22:04,879
the role<font color="#CCCCCC"> to be created and that is the</font>

485
00:22:02,870 --> 00:22:07,518
gist with clout watch oh sorry config

486
00:22:04,879 --> 00:22:08,928
now cloud watch this is that where where

487
00:22:07,519 --> 00:22:10,490
it gets<font color="#CCCCCC"> fine grain we're going to talk</font>

488
00:22:08,929 --> 00:22:13,610
about so the few things we talked about

489
00:22:10,490 --> 00:22:15,399
are putting alarms on like root account

490
00:22:13,610 --> 00:22:19,309
usage we're going to put an alarm on

491
00:22:15,399 --> 00:22:21,469
unauthorized activity failed logins and

492
00:22:19,309 --> 00:22:26,389
then we're going<font color="#E5E5E5"> to show integration of</font>

493
00:22:21,470 --> 00:22:28,760
slack and lambda<font color="#CCCCCC"> alright so</font>

494
00:22:26,390 --> 00:22:31,220
we can be very particular about what we

495
00:22:28,760 --> 00:22:33,530
want<font color="#E5E5E5"> to see these are</font><font color="#CCCCCC"> the four alerts</font>

496
00:22:31,220 --> 00:22:35,420
we're going to walk through let's go

497
00:22:33,530 --> 00:22:37,129
right<font color="#CCCCCC"> to building alarm so why do</font><font color="#E5E5E5"> you</font>

498
00:22:35,420 --> 00:22:39,230
care about a billing alarm if you start

499
00:22:37,130 --> 00:22:41,420
spending a lot of money<font color="#E5E5E5"> and your</font>

500
00:22:39,230 --> 00:22:43,010
organization<font color="#CCCCCC"> what let's say your limit</font>

501
00:22:41,420 --> 00:22:43,880
per month<font color="#E5E5E5"> you usually spend fifteen</font>

502
00:22:43,010 --> 00:22:45,470
hundred dollars and all the sudden

503
00:22:43,880 --> 00:22:47,780
you're spending three thirty thousand

504
00:22:45,470 --> 00:22:49,670
dollars clearly something's up I mean

505
00:22:47,780 --> 00:22:52,160
<font color="#E5E5E5">even if it's not a security issue you</font>

506
00:22:49,670 --> 00:22:55,910
obviously need to know about this so

507
00:22:52,160 --> 00:22:59,150
this<font color="#CCCCCC"> is a very basic minimum alarm you</font>

508
00:22:55,910 --> 00:23:02,690
should have so you can navigate to

509
00:22:59,150 --> 00:23:05,000
billing and alerts you'd enable your

510
00:23:02,690 --> 00:23:07,670
account to receive billing alerts you go

511
00:23:05,000 --> 00:23:11,780
in and you create a SMS topic called

512
00:23:07,670 --> 00:23:13,880
billing alert subscribe to the topic now

513
00:23:11,780 --> 00:23:15,260
this part i always like to<font color="#CCCCCC"> be very clear</font>

514
00:23:13,880 --> 00:23:17,210
about on the left you<font color="#CCCCCC"> see I've</font>

515
00:23:15,260 --> 00:23:19,490
highlighted metrics there are two ways

516
00:23:17,210 --> 00:23:22,460
<font color="#CCCCCC">that you primarily build these cloud</font>

517
00:23:19,490 --> 00:23:25,430
watch alarms logs are cloud trail logs

518
00:23:22,460 --> 00:23:26,870
their cloud trails streams log streams

519
00:23:25,430 --> 00:23:28,940
and that's where<font color="#CCCCCC"> you want</font><font color="#E5E5E5"> to actually</font>

520
00:23:26,870 --> 00:23:30,560
put in a filter or it's almost like a

521
00:23:28,940 --> 00:23:31,940
regular<font color="#CCCCCC"> expression where you say hey I</font>

522
00:23:30,560 --> 00:23:33,139
want<font color="#E5E5E5"> to be</font><font color="#CCCCCC"> looking for these specific</font>

523
00:23:31,940 --> 00:23:35,570
things pull them out of the logs

524
00:23:33,140 --> 00:23:37,880
<font color="#CCCCCC">crockett send a notification off when</font>

525
00:23:35,570 --> 00:23:40,490
that<font color="#CCCCCC"> thing happens metrics on the other</font>

526
00:23:37,880 --> 00:23:45,140
hand are predetermined values that you

527
00:23:40,490 --> 00:23:48,980
are going<font color="#E5E5E5"> to configure some thresholds</font>

528
00:23:45,140 --> 00:23:50,570
on and<font color="#CCCCCC"> we'll show that so when we click</font>

529
00:23:48,980 --> 00:23:52,310
on metrics we can go to billing we can

530
00:23:50,570 --> 00:23:55,280
go and choose the currency this is<font color="#CCCCCC"> u.s.</font>

531
00:23:52,310 --> 00:23:56,870
dollars we can go in and<font color="#E5E5E5"> say hey if our</font>

532
00:23:55,280 --> 00:24:01,010
<font color="#CCCCCC">spend goes above sixteen hundred dollars</font>

533
00:23:56,870 --> 00:24:03,219
cool create an alarm and the exact exact

534
00:24:01,010 --> 00:24:07,190
steps on all of this can be found here

535
00:24:03,220 --> 00:24:09,410
but again<font color="#E5E5E5"> this is sort of the threshold</font>

536
00:24:07,190 --> 00:24:14,690
metric portion of what i was talking

537
00:24:09,410 --> 00:24:16,430
<font color="#E5E5E5">about root login alright so i'm going to</font>

538
00:24:14,690 --> 00:24:19,370
tell<font color="#E5E5E5"> you real quick how it works at my</font>

539
00:24:16,430 --> 00:24:20,810
organization if you<font color="#CCCCCC"> login in my</font>

540
00:24:19,370 --> 00:24:22,909
organization and you've not told

541
00:24:20,810 --> 00:24:24,230
somebody that you're going<font color="#E5E5E5"> to use the</font>

542
00:24:22,910 --> 00:24:25,580
root account and you might have a valid

543
00:24:24,230 --> 00:24:28,670
reason<font color="#CCCCCC"> for it but if you've not told</font>

544
00:24:25,580 --> 00:24:31,220
anybody we all go into<font color="#E5E5E5"> panic mode we all</font>

545
00:24:28,670 --> 00:24:32,270
we we know the limited<font color="#CCCCCC"> amount of people</font>

546
00:24:31,220 --> 00:24:35,240
that actually have access to<font color="#CCCCCC"> that</font>

547
00:24:32,270 --> 00:24:38,060
account and yeah it's you have to

548
00:24:35,240 --> 00:24:39,830
respond because we'll keep trying you to

549
00:24:38,060 --> 00:24:40,070
make<font color="#E5E5E5"> sure that it is actually you</font><font color="#CCCCCC"> and we</font>

550
00:24:39,830 --> 00:24:43,129
start

551
00:24:40,070 --> 00:24:44,419
to go into like I our mode if<font color="#E5E5E5"> after a</font>

552
00:24:43,130 --> 00:24:47,570
couple minutes if we're not hearing from

553
00:24:44,420 --> 00:24:49,190
someone so this isn't necessary like a

554
00:24:47,570 --> 00:24:51,230
policy we put together but when we

555
00:24:49,190 --> 00:24:53,780
enabled<font color="#E5E5E5"> this alert is a sort of a</font>

556
00:24:51,230 --> 00:25:01,610
byproduct and behavior of what came out

557
00:24:53,780 --> 00:25:04,700
of that so to actually enable this you

558
00:25:01,610 --> 00:25:06,919
want to go to the log section on the

559
00:25:04,700 --> 00:25:09,950
left instead of the metrics choose your

560
00:25:06,920 --> 00:25:12,410
actual cloud trail log go in put in the

561
00:25:09,950 --> 00:25:13,610
filter pattern that makes sense<font color="#E5E5E5"> to you</font>

562
00:25:12,410 --> 00:25:16,310
it's very<font color="#E5E5E5"> hard to see on this and I</font>

563
00:25:13,610 --> 00:25:20,510
apologize for that but essentially it's

564
00:25:16,310 --> 00:25:24,350
like this big long regex looking string

565
00:25:20,510 --> 00:25:26,450
a little bit easier<font color="#CCCCCC"> to</font><font color="#E5E5E5"> see here so</font>

566
00:25:24,350 --> 00:25:28,429
you're<font color="#CCCCCC"> going you'll there's really</font><font color="#E5E5E5"> all</font>

567
00:25:26,450 --> 00:25:31,130
of<font color="#E5E5E5"> this is very very straightforward you</font>

568
00:25:28,430 --> 00:25:34,820
give it a metric namespace a metric name

569
00:25:31,130 --> 00:25:36,050
and a filter name right then after

570
00:25:34,820 --> 00:25:39,590
that's done you go and you create an

571
00:25:36,050 --> 00:25:44,060
alarm go in and basically what<font color="#E5E5E5"> I'm going</font>

572
00:25:39,590 --> 00:25:47,179
to<font color="#E5E5E5"> stay here</font><font color="#CCCCCC"> is that if for if somebody</font>

573
00:25:44,060 --> 00:25:49,610
logs in with the root account more<font color="#E5E5E5"> than</font>

574
00:25:47,180 --> 00:25:51,050
once within a five-minute period trigger

575
00:25:49,610 --> 00:25:54,830
this alarm and when this alarm goes off

576
00:25:51,050 --> 00:25:58,070
hits S&S S&S hits us so this is really

577
00:25:54,830 --> 00:26:00,460
immediate so the exact steps again have

578
00:25:58,070 --> 00:26:04,580
kept the links all of this inside the

579
00:26:00,460 --> 00:26:06,080
presentation failed logins so this<font color="#E5E5E5"> is</font>

580
00:26:04,580 --> 00:26:08,090
really when someone's either fat

581
00:26:06,080 --> 00:26:10,629
fingering their password or they're

582
00:26:08,090 --> 00:26:13,820
actually trying to guess credentials

583
00:26:10,630 --> 00:26:15,560
these steps are fairly are pretty much

584
00:26:13,820 --> 00:26:17,419
the<font color="#CCCCCC"> same as the root login in fact I'm</font>

585
00:26:15,560 --> 00:26:20,090
not<font color="#E5E5E5"> going to waste your time by covering</font>

586
00:26:17,420 --> 00:26:21,950
those over and over and over<font color="#E5E5E5"> again the</font>

587
00:26:20,090 --> 00:26:24,260
<font color="#E5E5E5">filter pattern howrse differ is</font>

588
00:26:21,950 --> 00:26:27,590
different and so the filter just

589
00:26:24,260 --> 00:26:28,850
basically says hey if somebody<font color="#E5E5E5"> is trying</font>

590
00:26:27,590 --> 00:26:33,230
to log into the console and there's a

591
00:26:28,850 --> 00:26:38,570
failed login then alert us and exact

592
00:26:33,230 --> 00:26:40,940
steps once again here<font color="#CCCCCC"> okay so the last</font>

593
00:26:38,570 --> 00:26:44,450
so at absa qsa Chris gates and I talked

594
00:26:40,940 --> 00:26:48,140
<font color="#CCCCCC">about essentially DevOps the talk was</font>

595
00:26:44,450 --> 00:26:51,170
called DevOps redox right so we talked

596
00:26:48,140 --> 00:26:54,320
about<font color="#CCCCCC"> a lot of fixes for</font><font color="#E5E5E5"> insecurity and</font>

597
00:26:51,170 --> 00:26:57,610
DevOps tooling but we also kind

598
00:26:54,320 --> 00:26:59,960
to talk a little<font color="#E5E5E5"> bit about attacking and</font>

599
00:26:57,610 --> 00:27:02,269
one of the tools that Chris wrote was

600
00:26:59,960 --> 00:27:04,730
ADA an AWS interrogate tool essentially

601
00:27:02,269 --> 00:27:06,169
he found tons and tons and tons of

602
00:27:04,730 --> 00:27:07,580
access keys out there on the internet

603
00:27:06,169 --> 00:27:09,529
and so what he did is he Bill a little

604
00:27:07,580 --> 00:27:12,470
Python tool that allowed him to and it's

605
00:27:09,529 --> 00:27:14,149
out its out<font color="#CCCCCC"> there on github they put</font><font color="#E5E5E5"> in</font>

606
00:27:12,470 --> 00:27:17,049
the secret key and you can sort<font color="#E5E5E5"> of</font>

607
00:27:14,149 --> 00:27:20,779
enumerate what each user has access to

608
00:27:17,049 --> 00:27:22,149
so while he was building that you know I

609
00:27:20,779 --> 00:27:25,399
was like well what can<font color="#E5E5E5"> we do to actually</font>

610
00:27:22,149 --> 00:27:26,989
alert pretty fairly instantaneously

611
00:27:25,399 --> 00:27:28,969
about about the fact that you're<font color="#E5E5E5"> doing</font>

612
00:27:26,990 --> 00:27:33,460
<font color="#E5E5E5">that so that's what this alarm is</font>

613
00:27:28,970 --> 00:27:33,460
actually about<font color="#CCCCCC"> it's why it came about so</font>

614
00:27:33,610 --> 00:27:39,110
alerts us to win somebody's trying that

615
00:27:36,580 --> 00:27:40,549
steps are pretty much like I said

616
00:27:39,110 --> 00:27:42,590
exactly<font color="#E5E5E5"> the same as root long and it</font>

617
00:27:40,549 --> 00:27:45,139
failed logins filter pattern is

618
00:27:42,590 --> 00:27:49,399
different as always I keep a slide<font color="#CCCCCC"> in</font>

619
00:27:45,139 --> 00:27:52,789
here I keep a link in these slides to

620
00:27:49,399 --> 00:27:57,049
how to do this but this is interesting

621
00:27:52,789 --> 00:28:00,590
to me<font color="#E5E5E5"> running the AWS interrogate</font>

622
00:27:57,049 --> 00:28:02,809
enumeration tool when you get back some

623
00:28:00,590 --> 00:28:04,039
<font color="#CCCCCC">information about hey this was possible</font>

624
00:28:02,809 --> 00:28:07,460
this<font color="#E5E5E5"> wasn't possible with this user</font>

625
00:28:04,039 --> 00:28:09,259
account but I get and my team gets email

626
00:28:07,460 --> 00:28:10,909
and this is<font color="#E5E5E5"> actually this was us running</font>

627
00:28:09,259 --> 00:28:12,559
the tool<font color="#CCCCCC"> on us respond waiting for the</font>

628
00:28:10,909 --> 00:28:14,210
response<font color="#E5E5E5"> from a double yes to tell us</font>

629
00:28:12,559 --> 00:28:16,580
hey something Bad's going<font color="#E5E5E5"> on so we got</font>

630
00:28:14,210 --> 00:28:18,110
an email email it<font color="#E5E5E5"> tells us hey something</font>

631
00:28:16,580 --> 00:28:22,309
Bad's going<font color="#E5E5E5"> on we have the ability to</font>

632
00:28:18,110 --> 00:28:26,120
see what I am user ID it is in numerical

633
00:28:22,309 --> 00:28:27,500
form wish excuse your name but yeah it's

634
00:28:26,120 --> 00:28:29,779
a numeric form shapes kind of trace that

635
00:28:27,500 --> 00:28:31,070
back but again instantaneously we know

636
00:28:29,779 --> 00:28:32,809
someone's trying to<font color="#E5E5E5"> do something pretty</font>

637
00:28:31,070 --> 00:28:37,668
bad which makes<font color="#CCCCCC"> me sleep better at night</font>

638
00:28:32,809 --> 00:28:38,750
and yeah it's very nice so what I'm

639
00:28:37,669 --> 00:28:40,279
going<font color="#E5E5E5"> to talk about next though is</font>

640
00:28:38,750 --> 00:28:44,960
<font color="#CCCCCC">actually doing</font><font color="#E5E5E5"> this with lambda and</font>

641
00:28:40,279 --> 00:28:46,070
slack<font color="#E5E5E5"> okay</font><font color="#CCCCCC"> so however</font><font color="#E5E5E5"> if you want to</font>

642
00:28:44,960 --> 00:28:47,690
build your<font color="#E5E5E5"> own alarms because it's</font><font color="#CCCCCC"> just</font>

643
00:28:46,070 --> 00:28:50,779
a starting<font color="#CCCCCC"> point these felt this link</font>

644
00:28:47,690 --> 00:28:52,639
will give you the filters set so you can

645
00:28:50,779 --> 00:28:57,289
go<font color="#CCCCCC"> through and</font><font color="#E5E5E5"> build</font><font color="#CCCCCC"> your own alarms</font>

646
00:28:52,639 --> 00:28:59,809
<font color="#E5E5E5">okay so lambda and slack I want to talk</font>

647
00:28:57,289 --> 00:29:02,269
<font color="#CCCCCC">about</font><font color="#E5E5E5"> this at a</font><font color="#CCCCCC"> high level real quick so</font>

648
00:28:59,809 --> 00:29:06,019
what really<font color="#E5E5E5"> happens is you are going to</font>

649
00:29:02,269 --> 00:29:08,480
go first into we're going to go<font color="#CCCCCC"> into</font>

650
00:29:06,019 --> 00:29:11,840
lambda you're going to

651
00:29:08,480 --> 00:29:13,640
create a function and that function is

652
00:29:11,840 --> 00:29:16,010
going<font color="#E5E5E5"> to use a blueprint blueprint is a</font>

653
00:29:13,640 --> 00:29:20,330
template of code that's already written

654
00:29:16,010 --> 00:29:24,770
for you there's already a slack and

655
00:29:20,330 --> 00:29:26,480
cloud watch blueprint in there so all

656
00:29:24,770 --> 00:29:28,879
you<font color="#CCCCCC"> really have to do is you'll go in</font>

657
00:29:26,480 --> 00:29:30,110
there you'll and you can see it here you

658
00:29:28,880 --> 00:29:32,780
go<font color="#CCCCCC"> in there you'll choose the cloud</font>

659
00:29:30,110 --> 00:29:35,030
watch slack alarm and then you'll

660
00:29:32,780 --> 00:29:37,280
proceed through<font color="#CCCCCC"> the following steps so</font>

661
00:29:35,030 --> 00:29:40,250
you're going to<font color="#E5E5E5"> have to go into KMS and</font>

662
00:29:37,280 --> 00:29:44,389
create a KMS being AWS encryption key

663
00:29:40,250 --> 00:29:47,000
management service<font color="#E5E5E5"> they'll create a key</font>

664
00:29:44,390 --> 00:29:49,450
KMS key you'll say here are the people

665
00:29:47,000 --> 00:29:55,250
that are allowed to<font color="#CCCCCC"> administer that key</font>

666
00:29:49,450 --> 00:29:56,720
you'll use that key to create so you'll

667
00:29:55,250 --> 00:29:59,299
go to slack and you know say hey I want

668
00:29:56,720 --> 00:30:01,520
to use the incoming<font color="#E5E5E5"> webhooks tool and</font>

669
00:29:59,299 --> 00:30:03,200
we'll<font color="#E5E5E5"> walk through all this but it'll</font>

670
00:30:01,520 --> 00:30:05,030
say okay well if<font color="#CCCCCC"> you want an incoming</font>

671
00:30:03,200 --> 00:30:07,070
web hook that's going to send a<font color="#E5E5E5"> message</font>

672
00:30:05,030 --> 00:30:09,139
to some slack channel then here's the

673
00:30:07,070 --> 00:30:11,720
<font color="#E5E5E5">URL that you should use so what you do</font>

674
00:30:09,140 --> 00:30:14,020
is you go in with KMS that key that you

675
00:30:11,720 --> 00:30:17,780
just created and<font color="#E5E5E5"> you say ok I'm going to</font>

676
00:30:14,020 --> 00:30:19,668
encrypt this URL slack gave me I'm going

677
00:30:17,780 --> 00:30:20,600
<font color="#E5E5E5">it's going to come back base64 encoded</font>

678
00:30:19,669 --> 00:30:22,549
<font color="#CCCCCC">I'm going to put that into this</font>

679
00:30:20,600 --> 00:30:25,459
blueprint this already<font color="#E5E5E5"> written up code</font>

680
00:30:22,549 --> 00:30:27,260
and then that code whenever the alarm

681
00:30:25,460 --> 00:30:28,700
gets triggered whatever alarm I've

682
00:30:27,260 --> 00:30:32,059
chosen which in our case is<font color="#E5E5E5"> going to be</font>

683
00:30:28,700 --> 00:30:34,240
unauthorized access attempts then<font color="#E5E5E5"> I'll</font>

684
00:30:32,059 --> 00:30:38,500
push that over to slack using the

685
00:30:34,240 --> 00:30:42,740
encrypted URL your encrypted base64

686
00:30:38,500 --> 00:30:45,290
encoded URL that you've<font color="#E5E5E5"> given me all</font>

687
00:30:42,740 --> 00:30:47,780
right so like I said choose your

688
00:30:45,290 --> 00:30:49,820
blueprint go in and configure a trigger

689
00:30:47,780 --> 00:30:52,850
in this case is going<font color="#E5E5E5"> to be SNS to</font>

690
00:30:49,820 --> 00:30:55,809
lambda I'm going<font color="#E5E5E5"> to choose my SNS topic</font>

691
00:30:52,850 --> 00:30:59,809
which is unauthorized access attempts

692
00:30:55,809 --> 00:31:01,960
I'm going<font color="#E5E5E5"> to get my blueprint my set of</font>

693
00:30:59,809 --> 00:31:04,879
code that's already pre written for me

694
00:31:01,960 --> 00:31:10,160
go over<font color="#CCCCCC"> to slack choose incoming web</font>

695
00:31:04,880 --> 00:31:11,179
hooks add a configuration choose the

696
00:31:10,160 --> 00:31:12,830
room that<font color="#E5E5E5"> you want to send it to you you</font>

697
00:31:11,179 --> 00:31:17,059
can do things<font color="#E5E5E5"> like you can also on this</font>

698
00:31:12,830 --> 00:31:19,010
page like put a picture associated with

699
00:31:17,059 --> 00:31:20,210
the<font color="#E5E5E5"> bot that's going in there or you can</font>

700
00:31:19,010 --> 00:31:21,139
change the name you can do things<font color="#CCCCCC"> like</font>

701
00:31:20,210 --> 00:31:25,970
that

702
00:31:21,139 --> 00:31:31,998
and then you can grab the web hook URL

703
00:31:25,970 --> 00:31:36,360
go into KMS inside of AWS create a key

704
00:31:31,999 --> 00:31:39,299
given an alias in this case of his slack

705
00:31:36,360 --> 00:31:43,258
alerts<font color="#E5E5E5"> okay now this is using the AWS</font>

706
00:31:39,299 --> 00:31:45,330
KMS encrypt tool notice i ate my own dog

707
00:31:43,259 --> 00:31:47,850
food and well maybe you can't notice but

708
00:31:45,330 --> 00:31:50,549
for the profile for<font color="#E5E5E5"> the credentials</font>

709
00:31:47,850 --> 00:31:53,340
profile i used sts to actually run this

710
00:31:50,549 --> 00:31:55,230
so i<font color="#E5E5E5"> actually did what I'm recommending</font>

711
00:31:53,340 --> 00:31:58,699
here and had a<font color="#E5E5E5"> temporary set of</font>

712
00:31:55,230 --> 00:32:01,169
credentials to run this KMS encrypt with

713
00:31:58,700 --> 00:32:04,110
encrypting the slack webhook URL command

714
00:32:01,169 --> 00:32:05,850
so<font color="#CCCCCC"> i give back the ciphertext blob that</font>

715
00:32:04,110 --> 00:32:07,649
blob is what<font color="#CCCCCC"> i want to use and put</font>

716
00:32:05,850 --> 00:32:11,748
inside of this code right here this is

717
00:32:07,649 --> 00:32:15,629
<font color="#CCCCCC">the actual lambda code says it's got</font>

718
00:32:11,749 --> 00:32:17,039
encrypted encoded URL or encrypted go to

719
00:32:15,629 --> 00:32:18,779
your own slack channel so you put those

720
00:32:17,039 --> 00:32:21,539
two<font color="#E5E5E5"> options in and that's it that you're</font>

721
00:32:18,779 --> 00:32:23,249
good<font color="#E5E5E5"> at that point to go so the result</font>

722
00:32:21,539 --> 00:32:24,539
is in slack I mean there's a few other

723
00:32:23,249 --> 00:32:25,769
steps but if you just follow along

724
00:32:24,539 --> 00:32:28,440
through everything I just<font color="#E5E5E5"> showed you</font>

725
00:32:25,769 --> 00:32:30,029
it's very<font color="#E5E5E5"> simple this is a slack alert</font>

726
00:32:28,440 --> 00:32:31,440
and just basically says and I didn't get

727
00:32:30,029 --> 00:32:35,299
very descriptive here there's really no

728
00:32:31,440 --> 00:32:37,590
reason to this is like the basic

729
00:32:35,299 --> 00:32:38,908
template<font color="#E5E5E5"> alarm that comes with it you</font>

730
00:32:37,590 --> 00:32:41,039
can get<font color="#CCCCCC"> a little</font><font color="#E5E5E5"> bit more specific on</font>

731
00:32:38,909 --> 00:32:42,269
like who<font color="#E5E5E5"> was doing that and more</font>

732
00:32:41,039 --> 00:32:44,669
information that you might want that

733
00:32:42,269 --> 00:32:46,980
anyways there's a notification in slack

734
00:32:44,669 --> 00:32:47,909
a couple<font color="#E5E5E5"> minutes after</font><font color="#CCCCCC"> I had tried</font><font color="#E5E5E5"> to do</font>

735
00:32:46,980 --> 00:32:52,019
something<font color="#E5E5E5"> that wasn't supposed to do</font>

736
00:32:47,909 --> 00:32:52,980
with a test account so it works<font color="#CCCCCC"> all</font>

737
00:32:52,019 --> 00:32:55,619
<font color="#CCCCCC">right so now I'm</font><font color="#E5E5E5"> going to</font><font color="#CCCCCC"> move</font><font color="#E5E5E5"> onto</font>

738
00:32:52,980 --> 00:32:57,619
<font color="#CCCCCC">splunk last parts of this or splunk</font><font color="#E5E5E5"> I</font>

739
00:32:55,619 --> 00:33:00,959
just want to<font color="#E5E5E5"> quickly talk about that</font>

740
00:32:57,619 --> 00:33:05,249
then we're going<font color="#E5E5E5"> to talk about incident</font>

741
00:33:00,960 --> 00:33:09,690
response and then recovery and then<font color="#E5E5E5"> I'll</font>

742
00:33:05,249 --> 00:33:12,210
be it so<font color="#CCCCCC"> alright so splunk i really</font><font color="#E5E5E5"> like</font>

743
00:33:09,690 --> 00:33:15,419
it<font color="#E5E5E5"> i'm</font><font color="#CCCCCC"> sure you go y'all are using it I</font>

744
00:33:12,210 --> 00:33:17,460
like the<font color="#CCCCCC"> splunk app for AWS and spunk</font>

745
00:33:15,419 --> 00:33:20,190
<font color="#E5E5E5">add on the</font><font color="#CCCCCC"> things</font><font color="#E5E5E5"> that allows you to do</font>

746
00:33:17,460 --> 00:33:23,129
<font color="#E5E5E5">I'll show you some pictures but you can</font>

747
00:33:20,190 --> 00:33:25,049
see everything<font color="#CCCCCC"> from I am activity SSH</font>

748
00:33:23,129 --> 00:33:27,149
key pair activity whatever it is you

749
00:33:25,049 --> 00:33:29,490
want<font color="#E5E5E5"> to see they've got a pretty graphic</font>

750
00:33:27,149 --> 00:33:31,159
for it it can even automate building

751
00:33:29,490 --> 00:33:32,510
your network<font color="#E5E5E5"> topology</font>

752
00:33:31,160 --> 00:33:37,910
and<font color="#CCCCCC"> I'll show you</font><font color="#E5E5E5"> a screenshot for that</font>

753
00:33:32,510 --> 00:33:40,970
as well<font color="#E5E5E5"> so pretty screenshot 1 this is</font>

754
00:33:37,910 --> 00:33:42,350
your you sit usage of your abs

755
00:33:40,970 --> 00:33:45,530
environment to put together<font color="#E5E5E5"> it's really</font>

756
00:33:42,350 --> 00:33:47,570
nice and<font color="#CCCCCC"> pretty this is the network</font>

757
00:33:45,530 --> 00:33:50,300
topology<font color="#E5E5E5"> diagram I was talking</font><font color="#CCCCCC"> about</font>

758
00:33:47,570 --> 00:33:58,550
that's really nice and then this<font color="#E5E5E5"> is your</font>

759
00:33:50,300 --> 00:34:01,190
billing information pretty much out of

760
00:33:58,550 --> 00:34:05,510
the box there is<font color="#E5E5E5"> a little bit</font>

761
00:34:01,190 --> 00:34:06,980
configuration from your side for for AWS

762
00:34:05,510 --> 00:34:09,860
specifically it's actually nothing to do

763
00:34:06,980 --> 00:34:11,360
with splunk but yeah out of the box<font color="#E5E5E5"> it's</font>

764
00:34:09,860 --> 00:34:12,410
you do have to<font color="#CCCCCC"> have</font><font color="#E5E5E5"> smoked enterprise</font>

765
00:34:11,360 --> 00:34:13,700
obviously because if you don't<font color="#E5E5E5"> have a</font>

766
00:34:12,409 --> 00:34:20,928
spunk enterprise you can't install an

767
00:34:13,699 --> 00:34:27,259
app<font color="#E5E5E5"> I don't know where you are you</font>

768
00:34:20,929 --> 00:34:30,110
hosting<font color="#CCCCCC"> splunk we may or may not have</font>

769
00:34:27,260 --> 00:34:31,400
multiple<font color="#CCCCCC"> splunk or multiple AWS</font>

770
00:34:30,110 --> 00:34:38,030
environments maybe maybe not I don't

771
00:34:31,400 --> 00:34:41,389
<font color="#E5E5E5">know sorry security conference there's</font>

772
00:34:38,030 --> 00:34:42,620
only so much i'll say but that's a good

773
00:34:41,389 --> 00:34:44,060
<font color="#E5E5E5">point though i think what you're driving</font>

774
00:34:42,620 --> 00:34:52,069
at is don't put<font color="#CCCCCC"> splunk inside of the</font>

775
00:34:44,060 --> 00:34:59,350
environment you want to secure say that

776
00:34:52,070 --> 00:34:59,350
last part again uh-huh right

777
00:35:00,920 --> 00:35:08,510
<font color="#CCCCCC">and now as your hostage so how big</font><font color="#E5E5E5"> is</font>

778
00:35:06,860 --> 00:35:14,630
funked appointment is running into the

779
00:35:08,510 --> 00:35:18,290
<font color="#E5E5E5">u.s. how expensive is</font><font color="#CCCCCC"> that okay not very</font>

780
00:35:14,630 --> 00:35:20,090
expensive and<font color="#E5E5E5"> you can go with your that</font>

781
00:35:18,290 --> 00:35:27,080
what's the smallest here like one gig a

782
00:35:20,090 --> 00:35:29,170
month<font color="#E5E5E5"> it's 10 gigabits yeah so that I</font>

783
00:35:27,080 --> 00:35:31,279
think it's one gig for the<font color="#E5E5E5"> lowest tiered</font>

784
00:35:29,170 --> 00:35:32,930
paid for version you get away<font color="#E5E5E5"> with that</font>

785
00:35:31,280 --> 00:35:34,580
<font color="#E5E5E5">we're I think even the free version you</font>

786
00:35:32,930 --> 00:35:36,830
probably be fine with so it's actually

787
00:35:34,580 --> 00:35:38,120
<font color="#CCCCCC">not that you're</font><font color="#E5E5E5"> not really held so by</font>

788
00:35:36,830 --> 00:35:40,040
the<font color="#E5E5E5"> way everything you can do inside of</font>

789
00:35:38,120 --> 00:35:41,480
<font color="#CCCCCC">splunk you can do inside of AWS it's not</font>

790
00:35:40,040 --> 00:35:43,820
necessarily held hostage but sometimes

791
00:35:41,480 --> 00:35:47,030
like you you know it's<font color="#CCCCCC"> just one place to</font>

792
00:35:43,820 --> 00:35:49,790
go that maybe or second place to go that

793
00:35:47,030 --> 00:35:52,250
you might<font color="#CCCCCC"> like I think it's the</font><font color="#E5E5E5"> easy</font>

794
00:35:49,790 --> 00:35:54,130
button frankly and it shows you so much

795
00:35:52,250 --> 00:35:57,050
without you having to do very much<font color="#E5E5E5"> so</font>

796
00:35:54,130 --> 00:35:58,760
and<font color="#E5E5E5"> actually on that note</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> create the</font>

797
00:35:57,050 --> 00:36:01,880
account so you create an accountant's

798
00:35:58,760 --> 00:36:03,770
inside of AWS for splunk so<font color="#CCCCCC"> splunk can</font>

799
00:36:01,880 --> 00:36:05,690
grab information and basically there's a

800
00:36:03,770 --> 00:36:09,920
policy that you attach to specifically

801
00:36:05,690 --> 00:36:11,420
for this bunk user and yeah attached<font color="#CCCCCC"> to</font>

802
00:36:09,920 --> 00:36:12,710
them they'll attach to that spunk user

803
00:36:11,420 --> 00:36:14,450
they'll have the permission to grab what

804
00:36:12,710 --> 00:36:16,490
they need and you going to configure you

805
00:36:14,450 --> 00:36:18,049
configure<font color="#E5E5E5"> per service on how you want to</font>

806
00:36:16,490 --> 00:36:20,390
let stuff<font color="#E5E5E5"> two feet in there's a little</font>

807
00:36:18,050 --> 00:36:22,760
bit of<font color="#E5E5E5"> extra work which i'm not talking</font>

808
00:36:20,390 --> 00:36:26,089
about side of AWS which involves SQS and

809
00:36:22,760 --> 00:36:27,890
SNS to build that like<font color="#E5E5E5"> a few things that</font>

810
00:36:26,090 --> 00:36:29,450
builds on top but you know there's

811
00:36:27,890 --> 00:36:31,100
instructions with splunk the<font color="#CCCCCC"> splunk app</font>

812
00:36:29,450 --> 00:36:36,319
to do all this so it's not too

813
00:36:31,100 --> 00:36:39,290
complicated and then yeah which is kind

814
00:36:36,320 --> 00:36:42,500
of<font color="#E5E5E5"> what I'm kind of just drove at so</font>

815
00:36:39,290 --> 00:36:45,080
again I<font color="#CCCCCC"> love yourself when things change</font>

816
00:36:42,500 --> 00:36:48,170
things will get noisy do instant

817
00:36:45,080 --> 00:36:52,730
alerting when when necessary or when it

818
00:36:48,170 --> 00:36:53,810
makes sense to this<font color="#CCCCCC"> queue</font><font color="#E5E5E5"> or thread so</font>

819
00:36:52,730 --> 00:36:55,670
this is<font color="#E5E5E5"> like one of my favorite things</font>

820
00:36:53,810 --> 00:36:57,740
<font color="#E5E5E5">to read about this topic because there's</font>

821
00:36:55,670 --> 00:37:00,140
a there's a few things<font color="#E5E5E5"> to highlight so</font>

822
00:36:57,740 --> 00:37:01,279
one is everybody if you go to this

823
00:37:00,140 --> 00:37:03,140
thread you'll see everybody saying the

824
00:37:01,280 --> 00:37:06,920
same thing yes my access keys were

825
00:37:03,140 --> 00:37:09,379
stolen or they were leaked I run<font color="#E5E5E5"> it ran</font>

826
00:37:06,920 --> 00:37:11,560
up a huge bill with AWS over and over

827
00:37:09,380 --> 00:37:13,880
and over<font color="#E5E5E5"> again another thing is</font><font color="#CCCCCC"> that AWS</font>

828
00:37:11,560 --> 00:37:14,759
apparently has a board or they can

829
00:37:13,880 --> 00:37:16,440
review your case

830
00:37:14,760 --> 00:37:18,990
and if you've done nothing too hard in

831
00:37:16,440 --> 00:37:20,250
<font color="#E5E5E5">your environment or you've</font><font color="#CCCCCC"> been you just</font>

832
00:37:18,990 --> 00:37:21,479
haven't taken advantage of any of the

833
00:37:20,250 --> 00:37:24,240
things they offer<font color="#E5E5E5"> protect your account</font>

834
00:37:21,480 --> 00:37:26,430
you and your organization can be held

835
00:37:24,240 --> 00:37:30,270
legally liable for the<font color="#CCCCCC"> costs that you've</font>

836
00:37:26,430 --> 00:37:31,980
<font color="#E5E5E5">incurred and then I think one thing we</font>

837
00:37:30,270 --> 00:37:33,270
all in this room get but whenever I'm

838
00:37:31,980 --> 00:37:36,060
talking to developers I kind of just

839
00:37:33,270 --> 00:37:38,370
mentioned it is that you know there's

840
00:37:36,060 --> 00:37:41,100
bots out there scouring the web his

841
00:37:38,370 --> 00:37:42,270
name's Chris gates and he's looking<font color="#E5E5E5"> for</font>

842
00:37:41,100 --> 00:37:45,089
<font color="#CCCCCC">your access keys and I getting your</font>

843
00:37:42,270 --> 00:37:50,250
environment so all right so restoration

844
00:37:45,090 --> 00:37:51,570
and recovery you should know this these

845
00:37:50,250 --> 00:37:53,280
are<font color="#CCCCCC"> some basic things not necessarily a</font>

846
00:37:51,570 --> 00:37:54,780
double yes specific<font color="#E5E5E5"> know who to contact</font>

847
00:37:53,280 --> 00:37:58,170
know the channels in which to

848
00:37:54,780 --> 00:38:01,410
communicate over practice that and<font color="#E5E5E5"> know</font>

849
00:37:58,170 --> 00:38:03,690
<font color="#E5E5E5">where to go to restore data and what how</font>

850
00:38:01,410 --> 00:38:06,870
to figure out like go back<font color="#E5E5E5"> through logs</font>

851
00:38:03,690 --> 00:38:08,940
and figure out what happened so my one

852
00:38:06,870 --> 00:38:11,130
recommendation talking about multiple

853
00:38:08,940 --> 00:38:13,410
AWS environments is do not use<font color="#CCCCCC"> the same</font>

854
00:38:11,130 --> 00:38:15,860
AWS environment to<font color="#E5E5E5"> backup your AWS</font>

855
00:38:13,410 --> 00:38:18,690
environment<font color="#CCCCCC"> that'd be huge mistake a</font>

856
00:38:15,860 --> 00:38:20,550
disaster in fact but what I have heard

857
00:38:18,690 --> 00:38:23,430
<font color="#CCCCCC">people are doing is creating a secondary</font>

858
00:38:20,550 --> 00:38:26,280
or tertiary account using glacier and s3

859
00:38:23,430 --> 00:38:28,080
to move their backups over to that

860
00:38:26,280 --> 00:38:30,210
account and that account is highly

861
00:38:28,080 --> 00:38:32,160
restricted to just a couple<font color="#CCCCCC"> people or a</font>

862
00:38:30,210 --> 00:38:33,960
few people may be a security maybe the

863
00:38:32,160 --> 00:38:38,970
heads of<font color="#CCCCCC"> the engineering organization</font>

864
00:38:33,960 --> 00:38:40,490
whatever the<font color="#E5E5E5"> cases so there are</font><font color="#CCCCCC"> some</font>

865
00:38:38,970 --> 00:38:42,660
resources for actually performing

866
00:38:40,490 --> 00:38:43,830
backups but the problem is I can't give

867
00:38:42,660 --> 00:38:45,960
you<font color="#CCCCCC"> a silver bullet there's no product</font>

868
00:38:43,830 --> 00:38:48,990
that I'd love to tell<font color="#E5E5E5"> you about a</font>

869
00:38:45,960 --> 00:38:50,520
product that somebody had built that is

870
00:38:48,990 --> 00:38:51,870
a<font color="#E5E5E5"> silver bullet and backs everything up</font>

871
00:38:50,520 --> 00:38:53,340
for you seamlessly does it<font color="#CCCCCC"> off-site</font><font color="#E5E5E5"> or</font>

872
00:38:51,870 --> 00:38:54,810
<font color="#E5E5E5">whatever the</font><font color="#CCCCCC"> case is but there's really</font>

873
00:38:53,340 --> 00:38:59,510
nothing out there so if anybody's

874
00:38:54,810 --> 00:39:02,100
looking for a product<font color="#E5E5E5"> ideas there you go</font>

875
00:38:59,510 --> 00:39:03,600
and<font color="#E5E5E5"> then in terms of incident response I</font>

876
00:39:02,100 --> 00:39:09,150
don't<font color="#E5E5E5"> really want to talk about this</font><font color="#CCCCCC"> in</font>

877
00:39:03,600 --> 00:39:11,009
depth because back to scout to Alex

878
00:39:09,150 --> 00:39:13,550
<font color="#CCCCCC">McCormick at Derby konnen Andrew Krug</font>

879
00:39:11,010 --> 00:39:17,070
had this awesome awesome talk on

880
00:39:13,550 --> 00:39:19,560
<font color="#CCCCCC">Incident Response</font><font color="#E5E5E5"> inside of AWS there's</font>

881
00:39:17,070 --> 00:39:22,170
a youtube video right it's a really<font color="#E5E5E5"> good</font>

882
00:39:19,560 --> 00:39:24,000
<font color="#E5E5E5">talk kudos to them so</font><font color="#CCCCCC"> I really recommend</font>

883
00:39:22,170 --> 00:39:25,470
you go and check out that talk

884
00:39:24,000 --> 00:39:27,120
everything you know about instant

885
00:39:25,470 --> 00:39:27,830
response within AWS I think they'll

886
00:39:27,120 --> 00:39:31,279
cover it

887
00:39:27,830 --> 00:39:37,040
really high level<font color="#E5E5E5"> okay presentation</font>

888
00:39:31,280 --> 00:39:41,240
recap I think we all<font color="#E5E5E5"> know not to stay at</font>

889
00:39:37,040 --> 00:39:48,170
the hilton<font color="#E5E5E5"> the deviltry</font><font color="#CCCCCC"> hilton just my</font>

890
00:39:41,240 --> 00:39:51,950
personal opinion what<font color="#CCCCCC"> Zack you'd</font><font color="#E5E5E5"> have</font>

891
00:39:48,170 --> 00:39:56,600
free cookies probably laced with saying

892
00:39:51,950 --> 00:39:59,600
anymore anyways so real recap make your

893
00:39:56,600 --> 00:40:01,819
environment harder to reach limit access

894
00:39:59,600 --> 00:40:05,660
if somebody has stolen some credentials

895
00:40:01,820 --> 00:40:08,270
and it's gotten in have a plan<font color="#CCCCCC"> for you</font>

896
00:40:05,660 --> 00:40:10,549
know<font color="#E5E5E5"> obviously if things go wrong and I</font>

897
00:40:08,270 --> 00:40:11,840
<font color="#E5E5E5">hope also if you have questions and you</font>

898
00:40:10,550 --> 00:40:13,970
don't really want to talk about it here

899
00:40:11,840 --> 00:40:16,820
<font color="#E5E5E5">just I'm at the conference today and</font>

900
00:40:13,970 --> 00:40:18,859
tomorrow just you know come up or after

901
00:40:16,820 --> 00:40:20,650
this or whatever and will hopefully

902
00:40:18,860 --> 00:40:23,530
answer the question I don't<font color="#CCCCCC"> know so</font>

903
00:40:20,650 --> 00:40:26,800
that's my information thanks<font color="#E5E5E5"> again</font>

904
00:40:23,530 --> 00:40:26,800
appreciate it thanks

905
00:40:27,360 --> 00:40:34,809
[Applause]

