1
00:00:02,990 --> 00:00:19,650
[Music]

2
00:00:17,250 --> 00:00:20,700
so my<font color="#CCCCCC"> name is</font><font color="#E5E5E5"> Jordan and before we get</font>

3
00:00:19,650 --> 00:00:22,619
started I'd like to do something a

4
00:00:20,700 --> 00:00:24,930
little bit different because I've kind

5
00:00:22,619 --> 00:00:26,939
<font color="#E5E5E5">of a confession to make this is my first</font>

6
00:00:24,930 --> 00:00:30,360
last time so let's get started so we are

7
00:00:26,939 --> 00:00:32,520
here to descale IV fee for for free data

8
00:00:30,360 --> 00:00:35,309
to free shells hopefully that's<font color="#CCCCCC"> the talk</font>

9
00:00:32,520 --> 00:00:37,500
you came to if it's<font color="#E5E5E5"> not the one you want</font>

10
00:00:35,309 --> 00:00:40,169
to just consider it destiny it's

11
00:00:37,500 --> 00:00:41,010
probably<font color="#E5E5E5"> good thing that you're here so</font>

12
00:00:40,170 --> 00:00:42,809
we'll<font color="#E5E5E5"> get started with a little bit</font>

13
00:00:41,010 --> 00:00:45,599
about me my<font color="#CCCCCC"> name is Jordan</font><font color="#E5E5E5"> I am an R&D</font>

14
00:00:42,809 --> 00:00:47,550
engineer at duo security so part of my

15
00:00:45,600 --> 00:00:50,550
job is<font color="#CCCCCC"> to think you know what do we have</font>

16
00:00:47,550 --> 00:00:52,019
<font color="#CCCCCC">8 10 12</font><font color="#E5E5E5"> months down the line what kind</font>

17
00:00:50,550 --> 00:00:55,828
of problems do we need<font color="#E5E5E5"> to solve and can</font>

18
00:00:52,020 --> 00:00:58,200
we solve those in an elegant way so in

19
00:00:55,829 --> 00:01:00,059
my spare time security is<font color="#CCCCCC"> my hobby I'm a</font>

20
00:00:58,200 --> 00:01:02,969
<font color="#E5E5E5">security researcher I publish everything</font>

21
00:01:00,059 --> 00:01:05,369
to a personal<font color="#E5E5E5"> blog and I'm also a huge</font>

22
00:01:02,969 --> 00:01:07,860
fan of<font color="#CCCCCC"> open source development</font><font color="#E5E5E5"> I firmly</font>

23
00:01:05,369 --> 00:01:11,220
<font color="#E5E5E5">believe that a lot</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> the best security</font>

24
00:01:07,860 --> 00:01:14,250
tools do come from open source so I

25
00:01:11,220 --> 00:01:15,869
published a few myself and I stay very

26
00:01:14,250 --> 00:01:20,250
active on github so feel free to check

27
00:01:15,869 --> 00:01:21,990
out some of my projects there and also

28
00:01:20,250 --> 00:01:27,479
<font color="#CCCCCC">just realized</font><font color="#E5E5E5"> that I apparently only own</font>

29
00:01:21,990 --> 00:01:29,610
one shirt I promise I didn't do that

30
00:01:27,479 --> 00:01:33,929
intentionally that was I didn't take

31
00:01:29,610 --> 00:01:35,340
<font color="#E5E5E5">that picture 5 minutes ago so really</font>

32
00:01:33,930 --> 00:01:37,380
<font color="#E5E5E5">quick let's</font><font color="#CCCCCC"> have a quick shameless plug</font>

33
00:01:35,340 --> 00:01:40,409
these<font color="#E5E5E5"> are some of the projects that are</font>

34
00:01:37,380 --> 00:01:42,780
made on my<font color="#E5E5E5"> own personal time so you'll</font>

35
00:01:40,409 --> 00:01:44,610
<font color="#E5E5E5">find these out on on github the first is</font>

36
00:01:42,780 --> 00:01:46,950
dumped on you may have seen it's a

37
00:01:44,610 --> 00:01:49,590
<font color="#E5E5E5">Twitter bot the crawl space bin and</font>

38
00:01:46,950 --> 00:01:51,990
other pasting sites<font color="#CCCCCC"> for</font><font color="#E5E5E5"> password dunks</font>

39
00:01:49,590 --> 00:01:54,450
so if it finds a valid password dump or

40
00:01:51,990 --> 00:01:56,789
other sensitive information it'll

41
00:01:54,450 --> 00:01:59,520
aggregate it and then tweet it out to

42
00:01:56,790 --> 00:02:01,470
kind<font color="#E5E5E5"> of bring attention to it</font><font color="#CCCCCC"> I also</font>

43
00:01:59,520 --> 00:02:03,149
wrote an email library for the go

44
00:02:01,470 --> 00:02:04,979
programming language<font color="#E5E5E5"> other you go</font>

45
00:02:03,149 --> 00:02:08,759
programmers in here it's<font color="#E5E5E5"> kind of an</font>

46
00:02:04,979 --> 00:02:10,079
up-and-coming you'll get there that was

47
00:02:08,758 --> 00:02:11,429
kind of a prerequisite for the next one

48
00:02:10,079 --> 00:02:14,549
which was go fish it's a fishing

49
00:02:11,430 --> 00:02:16,920
framework written and go it's an

50
00:02:14,549 --> 00:02:18,150
<font color="#E5E5E5">open-source fishing framework it kind of</font>

51
00:02:16,920 --> 00:02:21,359
helps you measure your exposure to

52
00:02:18,150 --> 00:02:22,709
fishing and finally I you know the

53
00:02:21,360 --> 00:02:24,870
reason that I mentioned these projects

54
00:02:22,709 --> 00:02:26,489
at all is for the<font color="#E5E5E5"> last one elastic honey</font>

55
00:02:24,870 --> 00:02:29,220
it was kind of a small project that I

56
00:02:26,489 --> 00:02:29,440
made on a per need basis and we'll see

57
00:02:29,220 --> 00:02:32,200
what

58
00:02:29,440 --> 00:02:33,490
means here<font color="#E5E5E5"> in a few minutes but it's</font>

59
00:02:32,200 --> 00:02:36,929
what i would call kind<font color="#E5E5E5"> of a low to</font>

60
00:02:33,490 --> 00:02:40,810
medium interaction honey pot for

61
00:02:36,930 --> 00:02:43,660
<font color="#E5E5E5">elasticsearch so attackers will connect</font>

62
00:02:40,810 --> 00:02:46,180
<font color="#E5E5E5">to the</font><font color="#CCCCCC"> honeypot they can try to do what</font>

63
00:02:43,660 --> 00:02:47,980
attackers do<font color="#E5E5E5"> will try to exploit what</font>

64
00:02:46,180 --> 00:02:50,560
they think is an elastic search instance

65
00:02:47,980 --> 00:02:52,480
it will record everything about it and

66
00:02:50,560 --> 00:02:55,060
it has the option to log things locally

67
00:02:52,480 --> 00:02:57,790
it also has the option to send things to

68
00:02:55,060 --> 00:03:01,810
a web server or ironically to another

69
00:02:57,790 --> 00:03:03,400
real elasticsearch instance but let's

70
00:03:01,810 --> 00:03:05,110
take a step back you know<font color="#CCCCCC"> why are we</font>

71
00:03:03,400 --> 00:03:06,910
here today we're going to talk about

72
00:03:05,110 --> 00:03:08,580
data we're going<font color="#CCCCCC"> to talk about a lot of</font>

73
00:03:06,910 --> 00:03:11,530
data we're<font color="#E5E5E5"> going to talk about systems</font>

74
00:03:08,580 --> 00:03:13,480
but more<font color="#E5E5E5"> specifically we're going</font><font color="#CCCCCC"> to</font>

75
00:03:11,530 --> 00:03:14,860
talk about<font color="#CCCCCC"> some hip ways to store data</font>

76
00:03:13,480 --> 00:03:17,320
we're<font color="#E5E5E5"> going to talk about some</font><font color="#CCCCCC"> of the</font>

77
00:03:14,860 --> 00:03:20,250
you know<font color="#E5E5E5"> the cool new hip things people</font>

78
00:03:17,320 --> 00:03:22,120
are doing to make their data access fast

79
00:03:20,250 --> 00:03:24,370
and then we're going to talk about what

80
00:03:22,120 --> 00:03:26,620
happens whenever you realize what a

81
00:03:24,370 --> 00:03:28,630
grave mistake you made using some of

82
00:03:26,620 --> 00:03:30,880
<font color="#E5E5E5">those things the wrong way and we'll</font><font color="#CCCCCC"> see</font>

83
00:03:28,630 --> 00:03:33,609
what<font color="#CCCCCC"> we see on the internet in terms of</font>

84
00:03:30,880 --> 00:03:35,769
exposed data will also take a look at

85
00:03:33,610 --> 00:03:36,910
vulnerable systems so data is one side

86
00:03:35,770 --> 00:03:38,590
of<font color="#E5E5E5"> the story</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> we're going to look at</font>

87
00:03:36,910 --> 00:03:41,829
the system's themselves and really

88
00:03:38,590 --> 00:03:46,350
measure out the problem of how big this

89
00:03:41,830 --> 00:03:48,310
idea of its both services is across ipv4

90
00:03:46,350 --> 00:03:49,480
and then we're going to<font color="#E5E5E5"> look at it kind</font>

91
00:03:48,310 --> 00:03:52,090
of holistically we're going to talk

92
00:03:49,480 --> 00:03:54,040
about why is this happening you know is

93
00:03:52,090 --> 00:03:55,540
<font color="#CCCCCC">there some kind of a root cause if we</font>

94
00:03:54,040 --> 00:03:58,570
can nail down that's causing this

95
00:03:55,540 --> 00:04:00,190
problem to occur and finally we always

96
00:03:58,570 --> 00:04:02,320
like to end things with you<font color="#CCCCCC"> know what</font>

97
00:04:00,190 --> 00:04:03,550
can what can we do about<font color="#E5E5E5"> it you know how</font>

98
00:04:02,320 --> 00:04:05,230
do we make<font color="#CCCCCC"> this better how can we</font>

99
00:04:03,550 --> 00:04:07,150
protect ourselves and<font color="#CCCCCC"> our own</font>

100
00:04:05,230 --> 00:04:10,209
<font color="#CCCCCC">organizations from having our own data</font>

101
00:04:07,150 --> 00:04:14,320
exposed and having<font color="#E5E5E5"> our own</font><font color="#CCCCCC"> systems made</font>

102
00:04:10,209 --> 00:04:15,940
vulnerable so to get started a real

103
00:04:14,320 --> 00:04:18,880
quick question<font color="#E5E5E5"> how many people in here</font>

104
00:04:15,940 --> 00:04:20,649
<font color="#E5E5E5">have ever made a web app just in</font><font color="#CCCCCC"> general</font>

105
00:04:18,880 --> 00:04:22,210
even if<font color="#E5E5E5"> it's just a toy project</font>

106
00:04:20,649 --> 00:04:24,609
something<font color="#E5E5E5"> some a lot of people here</font>

107
00:04:22,210 --> 00:04:26,500
<font color="#E5E5E5">right it's always funny because the</font>

108
00:04:24,610 --> 00:04:28,120
first<font color="#CCCCCC"> thing that</font><font color="#E5E5E5"> I hear from</font><font color="#CCCCCC"> people</font>

109
00:04:26,500 --> 00:04:30,450
whenever they make a web app is how do I

110
00:04:28,120 --> 00:04:32,710
make it<font color="#E5E5E5"> fast they want it to be snappy</font>

111
00:04:30,450 --> 00:04:35,620
<font color="#E5E5E5">you know it's been a lot i spend way too</font>

112
00:04:32,710 --> 00:04:36,789
much<font color="#E5E5E5"> time on reddit on different</font>

113
00:04:35,620 --> 00:04:40,090
subreddits where people come in they say

114
00:04:36,790 --> 00:04:42,020
hey I'm starting up a new company<font color="#E5E5E5"> I need</font>

115
00:04:40,090 --> 00:04:43,758
a programming stack because I need my

116
00:04:42,020 --> 00:04:47,930
web application be fast i'm planning on

117
00:04:43,759 --> 00:04:49,370
scaling to millions<font color="#E5E5E5"> of users now of</font>

118
00:04:47,930 --> 00:04:52,069
course<font color="#E5E5E5"> that's that's a bigger problem</font>

119
00:04:49,370 --> 00:04:54,740
than making a web app fast but this is a

120
00:04:52,069 --> 00:04:57,620
big need people want their applications

121
00:04:54,740 --> 00:04:59,620
to be quick and easy now granted you

122
00:04:57,620 --> 00:05:02,000
<font color="#CCCCCC">know we all know that the real reason</font>

123
00:04:59,620 --> 00:05:04,220
web apps aren't fast in general is

124
00:05:02,000 --> 00:05:05,539
because you're using node and<font color="#E5E5E5"> JavaScript</font>

125
00:05:04,220 --> 00:05:09,199
was never meant to be a server-side

126
00:05:05,539 --> 00:05:10,430
language but all that<font color="#CCCCCC"> aside let's look</font>

127
00:05:09,199 --> 00:05:11,900
at the you know the core problem that

128
00:05:10,430 --> 00:05:14,780
people are mostly<font color="#E5E5E5"> I may have offended</font>

129
00:05:11,900 --> 00:05:17,299
some people let's look at the core

130
00:05:14,780 --> 00:05:18,979
problem of you know what about access to

131
00:05:17,300 --> 00:05:20,569
memory usually that's<font color="#E5E5E5"> what people mean</font>

132
00:05:18,979 --> 00:05:23,840
whenever they want their web app to feel

133
00:05:20,569 --> 00:05:25,729
fast I have a lot of data I need<font color="#CCCCCC"> to load</font>

134
00:05:23,840 --> 00:05:28,369
it quickly I need to be able to

135
00:05:25,729 --> 00:05:30,919
manipulate it and query it in search on

136
00:05:28,370 --> 00:05:32,810
it quickly in an interesting<font color="#E5E5E5"> ways so</font>

137
00:05:30,919 --> 00:05:35,000
that's<font color="#E5E5E5"> the part of my web application</font>

138
00:05:32,810 --> 00:05:39,259
that<font color="#CCCCCC"> I want to be quick and I want to be</font>

139
00:05:35,000 --> 00:05:41,210
<font color="#E5E5E5">snappy so this is</font><font color="#CCCCCC"> a big need and there's</font>

140
00:05:39,259 --> 00:05:42,409
been a<font color="#E5E5E5"> lot of solutions and key things</font>

141
00:05:41,210 --> 00:05:45,560
to look at<font color="#E5E5E5"> it depending on who you talk</font>

142
00:05:42,409 --> 00:05:46,669
to you know though recommend all sorts

143
00:05:45,560 --> 00:05:48,620
of different<font color="#CCCCCC"> options it's kind of like a</font>

144
00:05:46,669 --> 00:05:50,389
pre-workout you know the shinier it<font color="#E5E5E5"> is</font>

145
00:05:48,620 --> 00:05:52,060
you have<font color="#CCCCCC"> no idea what's in it but you're</font>

146
00:05:50,389 --> 00:05:54,469
<font color="#CCCCCC">told us the best you got to go with it</font>

147
00:05:52,060 --> 00:05:56,539
so there's two kind<font color="#E5E5E5"> of ways that</font><font color="#CCCCCC"> we're</font>

148
00:05:54,469 --> 00:05:58,969
seeing the industry move in terms of

149
00:05:56,539 --> 00:06:02,120
storing data but first is key value

150
00:05:58,969 --> 00:06:05,060
stores these store data in memory

151
00:06:02,120 --> 00:06:07,190
generally and they are<font color="#E5E5E5"> just that they're</font>

152
00:06:05,060 --> 00:06:09,080
meant to be simple they're meant for me

153
00:06:07,190 --> 00:06:10,969
<font color="#CCCCCC">to be able to say here's some kind of</font>

154
00:06:09,080 --> 00:06:13,099
<font color="#E5E5E5">identifier which is a key let's call it</font>

155
00:06:10,969 --> 00:06:15,139
foo then i say i want<font color="#E5E5E5"> to store this</font>

156
00:06:13,099 --> 00:06:17,779
piece of data a<font color="#E5E5E5"> simple piece of data</font>

157
00:06:15,139 --> 00:06:20,900
called bar according<font color="#E5E5E5"> to that key and</font>

158
00:06:17,779 --> 00:06:22,729
<font color="#E5E5E5">then i can do lookups over time the</font>

159
00:06:20,900 --> 00:06:24,948
benefit of having something be so simple

160
00:06:22,729 --> 00:06:27,800
and being stored<font color="#CCCCCC"> a</font><font color="#E5E5E5"> memory is</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> i can</font>

161
00:06:24,949 --> 00:06:29,960
<font color="#CCCCCC">use it for things like caching if</font><font color="#E5E5E5"> i have</font>

162
00:06:27,800 --> 00:06:33,650
data that zach says over and over and

163
00:06:29,960 --> 00:06:35,739
over again<font color="#E5E5E5"> like let's say a new product</font>

164
00:06:33,650 --> 00:06:38,270
comes out and<font color="#E5E5E5"> i'm an e-commerce site</font>

165
00:06:35,740 --> 00:06:40,219
that product is getting hit by everyone

166
00:06:38,270 --> 00:06:42,469
who comes to my site maybe<font color="#CCCCCC"> i want</font><font color="#E5E5E5"> to</font>

167
00:06:40,219 --> 00:06:43,849
<font color="#E5E5E5">cache the content of that page and it's</font>

168
00:06:42,469 --> 00:06:46,190
even quicker so<font color="#E5E5E5"> i don't have to go to</font>

169
00:06:43,849 --> 00:06:48,500
the database every time someone wants to

170
00:06:46,190 --> 00:06:50,330
access the details<font color="#E5E5E5"> for that product</font>

171
00:06:48,500 --> 00:06:52,150
that's an example of what a key value

172
00:06:50,330 --> 00:06:55,359
store can be used for

173
00:06:52,150 --> 00:06:57,909
the other one is temporary data so a lot

174
00:06:55,360 --> 00:07:00,040
of people<font color="#CCCCCC"> may use something like a key</font>

175
00:06:57,910 --> 00:07:03,250
value<font color="#E5E5E5"> store for storing sessions so</font>

176
00:07:00,040 --> 00:07:06,130
storing user<font color="#E5E5E5"> state session cookies it's</font>

177
00:07:03,250 --> 00:07:07,930
a very valid use case because the key is

178
00:07:06,130 --> 00:07:10,810
is pretty<font color="#E5E5E5"> basic you can have it be your</font>

179
00:07:07,930 --> 00:07:12,880
user ID and<font color="#CCCCCC"> then the value could be the</font>

180
00:07:10,810 --> 00:07:15,760
<font color="#CCCCCC">the session token or session cookie or</font>

181
00:07:12,880 --> 00:07:18,460
reverse so that's key value stores the

182
00:07:15,760 --> 00:07:20,230
other<font color="#E5E5E5"> way is no sequel databases these</font>

183
00:07:18,460 --> 00:07:22,810
are more<font color="#E5E5E5"> on the persistent side of</font>

184
00:07:20,230 --> 00:07:24,670
things these aren't meant to be more

185
00:07:22,810 --> 00:07:27,790
temporary data like the key value stores

186
00:07:24,670 --> 00:07:30,040
these<font color="#CCCCCC"> stored data</font><font color="#E5E5E5"> on disk and they do is</font>

187
00:07:27,790 --> 00:07:32,050
<font color="#E5E5E5">kind of called document storage so it</font>

188
00:07:30,040 --> 00:07:34,720
seems like the general idea was that we

189
00:07:32,050 --> 00:07:35,920
got so tired of specifying schema and

190
00:07:34,720 --> 00:07:38,350
having to deal with all these pesky

191
00:07:35,920 --> 00:07:40,050
tables and columns that we just<font color="#E5E5E5"> said</font>

192
00:07:38,350 --> 00:07:42,310
let's just<font color="#E5E5E5"> throw</font><font color="#CCCCCC"> JSON it the whole thing</font>

193
00:07:40,050 --> 00:07:45,280
let's call<font color="#E5E5E5"> it document storage and we'll</font>

194
00:07:42,310 --> 00:07:47,140
go about our day and so that's the way

195
00:07:45,280 --> 00:07:48,909
that<font color="#CCCCCC"> no</font><font color="#E5E5E5"> sequel databases work a lot</font><font color="#CCCCCC"> of</font>

196
00:07:47,140 --> 00:07:51,969
them<font color="#E5E5E5"> are schema list you can just store</font>

197
00:07:48,910 --> 00:07:54,400
the data that<font color="#E5E5E5"> you</font><font color="#CCCCCC"> want in them and these</font>

198
00:07:51,970 --> 00:07:56,560
<font color="#E5E5E5">are your actual application data these</font>

199
00:07:54,400 --> 00:07:59,349
are your product details these are your

200
00:07:56,560 --> 00:08:00,370
user profile information these are you

201
00:07:59,350 --> 00:08:02,700
know<font color="#E5E5E5"> anything</font><font color="#CCCCCC"> that your application</font>

202
00:08:00,370 --> 00:08:06,730
<font color="#CCCCCC">needs to store for long periods of time</font>

203
00:08:02,700 --> 00:08:10,780
no sequel is a way to<font color="#E5E5E5"> go for this</font>

204
00:08:06,730 --> 00:08:13,900
<font color="#E5E5E5">technology so what should you use you</font>

205
00:08:10,780 --> 00:08:15,820
<font color="#E5E5E5">know you go to reddit stack overflow and</font>

206
00:08:13,900 --> 00:08:17,979
you say hey I want<font color="#CCCCCC"> to make a</font><font color="#E5E5E5"> start up I</font>

207
00:08:15,820 --> 00:08:20,890
need my web app to be fast what

208
00:08:17,980 --> 00:08:22,630
technology should<font color="#E5E5E5"> I use and you're going</font>

209
00:08:20,890 --> 00:08:24,820
<font color="#E5E5E5">to have</font><font color="#CCCCCC"> ten opinions if you talk to two</font>

210
00:08:22,630 --> 00:08:27,219
people right<font color="#E5E5E5"> because it all depends on</font>

211
00:08:24,820 --> 00:08:29,770
you know like any question in our<font color="#E5E5E5"> entire</font>

212
00:08:27,220 --> 00:08:31,240
industry the answer is it depends you

213
00:08:29,770 --> 00:08:33,939
know<font color="#E5E5E5"> it depends on what you need there's</font>

214
00:08:31,240 --> 00:08:36,190
no real clear-cut answer but here are

215
00:08:33,940 --> 00:08:38,020
some examples on<font color="#E5E5E5"> the Left we have</font>

216
00:08:36,190 --> 00:08:40,240
reticent memcached if anyone heard of

217
00:08:38,020 --> 00:08:41,650
these<font color="#CCCCCC"> technologies before</font><font color="#E5E5E5"> okay good so</font>

218
00:08:40,240 --> 00:08:44,080
<font color="#E5E5E5">that's a good start it's</font><font color="#CCCCCC"> we're going to</font>

219
00:08:41,650 --> 00:08:45,550
talk about them how about any of these

220
00:08:44,080 --> 00:08:48,550
on the<font color="#CCCCCC"> right hand</font><font color="#E5E5E5"> side for no sequel</font>

221
00:08:45,550 --> 00:08:51,819
database is Mongo anybody then there's a

222
00:08:48,550 --> 00:08:53,709
few others<font color="#CCCCCC"> CouchDB Cassandra I'll see a</font>

223
00:08:51,820 --> 00:08:55,210
few hands getting raised and then some

224
00:08:53,710 --> 00:08:57,160
people<font color="#CCCCCC"> will get</font><font color="#E5E5E5"> mad at</font><font color="#CCCCCC"> me for including</font>

225
00:08:55,210 --> 00:08:58,480
elasticsearch because they're<font color="#E5E5E5"> going to</font>

226
00:08:57,160 --> 00:09:02,680
say it's a<font color="#CCCCCC"> full-text search engine it's</font>

227
00:08:58,480 --> 00:09:04,750
not a no sequel database it's<font color="#E5E5E5"> it's my</font>

228
00:09:02,680 --> 00:09:07,050
talk so for this talk it's<font color="#CCCCCC"> a</font><font color="#E5E5E5"> no sequel</font>

229
00:09:04,750 --> 00:09:07,050
database

230
00:09:07,230 --> 00:09:12,310
so you know let's let's be real here you

231
00:09:10,629 --> 00:09:14,199
know what<font color="#CCCCCC"> should you actually use and we</font>

232
00:09:12,310 --> 00:09:15,638
all know the real answer is just

233
00:09:14,199 --> 00:09:18,790
whatever is on the front page<font color="#E5E5E5"> of hacker</font>

234
00:09:15,639 --> 00:09:21,100
news that day I call it whatever the

235
00:09:18,790 --> 00:09:22,599
heck<font color="#E5E5E5"> Jas you know it's probably open</font>

236
00:09:21,100 --> 00:09:27,250
source that day has like two thousand

237
00:09:22,600 --> 00:09:28,389
stars you<font color="#E5E5E5"> can trust it it's the best but</font>

238
00:09:27,250 --> 00:09:30,639
for this talk we're going to talk about

239
00:09:28,389 --> 00:09:31,600
these technologies so we're going<font color="#E5E5E5"> to go</font>

240
00:09:30,639 --> 00:09:34,420
<font color="#CCCCCC">through them and we're going to kind of</font>

241
00:09:31,600 --> 00:09:37,360
figure out how popular are they because

242
00:09:34,420 --> 00:09:40,410
these are according<font color="#CCCCCC"> to</font><font color="#E5E5E5"> the one website i</font>

243
00:09:37,360 --> 00:09:44,319
looked at the most popular technologies

244
00:09:40,410 --> 00:09:45,490
being used today so let's<font color="#E5E5E5"> take a step</font>

245
00:09:44,319 --> 00:09:46,870
back and let's<font color="#E5E5E5"> talk about the problem</font>

246
00:09:45,490 --> 00:09:48,220
you know why are we here what<font color="#E5E5E5"> are we</font>

247
00:09:46,870 --> 00:09:52,209
talking about what's the purpose of this

248
00:09:48,220 --> 00:09:54,459
<font color="#E5E5E5">talk the problem is twofold the first is</font>

249
00:09:52,209 --> 00:09:58,599
that there's a ton of sensitive data

250
00:09:54,459 --> 00:10:00,430
being exposed to the<font color="#CCCCCC"> Internet probably</font>

251
00:09:58,600 --> 00:10:02,379
not intentionally or if it's

252
00:10:00,430 --> 00:10:05,500
intentionally that's an<font color="#E5E5E5"> even bigger</font>

253
00:10:02,379 --> 00:10:07,449
<font color="#CCCCCC">problem right the second part of</font><font color="#E5E5E5"> the</font>

254
00:10:05,500 --> 00:10:09,550
problem is that<font color="#E5E5E5"> thousands of systems are</font>

255
00:10:07,449 --> 00:10:11,949
vulnerable so we're going<font color="#E5E5E5"> to look across</font>

256
00:10:09,550 --> 00:10:14,439
<font color="#E5E5E5">the entire ipv4 space and we're going to</font>

257
00:10:11,949 --> 00:10:18,639
say how how bad are<font color="#CCCCCC"> we at patching</font>

258
00:10:14,439 --> 00:10:20,529
software how exposed are we in terms of

259
00:10:18,639 --> 00:10:22,930
vulnerabilities and not the kind<font color="#E5E5E5"> of</font>

260
00:10:20,529 --> 00:10:26,050
vulnerabilities like a<font color="#CCCCCC"> logout see Sir</font>

261
00:10:22,930 --> 00:10:28,750
vulnerability or a reflected cross-site

262
00:10:26,050 --> 00:10:30,819
scripting that affects nobody you<font color="#CCCCCC"> know</font>

263
00:10:28,750 --> 00:10:33,279
these are remote code execution

264
00:10:30,819 --> 00:10:36,219
vulnerability unauthenticated remote

265
00:10:33,279 --> 00:10:39,130
code execution vulnerabilities if you

266
00:10:36,220 --> 00:10:41,889
were in let's say you're on the red team

267
00:10:39,130 --> 00:10:43,600
there's four words they just make your

268
00:10:41,889 --> 00:10:45,069
day and those are it<font color="#E5E5E5"> on authenticating</font>

269
00:10:43,600 --> 00:10:47,350
remote code execution because you have

270
00:10:45,069 --> 00:10:50,079
to do nothing<font color="#CCCCCC"> to</font><font color="#E5E5E5"> get</font><font color="#CCCCCC"> access to the house</font>

271
00:10:47,350 --> 00:10:51,250
<font color="#E5E5E5">right it's it's a</font><font color="#CCCCCC"> pay day</font><font color="#E5E5E5"> and we'll talk</font>

272
00:10:50,079 --> 00:10:55,420
a little bit more<font color="#E5E5E5"> about</font><font color="#CCCCCC"> what these look</font>

273
00:10:51,250 --> 00:10:56,800
like here in a few<font color="#CCCCCC"> minutes but</font><font color="#E5E5E5"> first</font>

274
00:10:55,420 --> 00:10:58,300
let's talk<font color="#E5E5E5"> about the first part</font><font color="#CCCCCC"> of the</font>

275
00:10:56,800 --> 00:11:03,939
problem which is that sensitive data is

276
00:10:58,300 --> 00:11:06,370
exposed this is what 2015 and 2016 have

277
00:11:03,939 --> 00:11:08,769
seemed like recently if you've been

278
00:11:06,370 --> 00:11:10,629
watching<font color="#E5E5E5"> the news I kind of call 2015</font>

279
00:11:08,769 --> 00:11:13,240
the year of the voter databases right

280
00:11:10,629 --> 00:11:15,069
<font color="#E5E5E5">because it seemed like so often there</font>

281
00:11:13,240 --> 00:11:18,130
was a new voter registration database

282
00:11:15,069 --> 00:11:20,229
being exposed by some other company

283
00:11:18,130 --> 00:11:21,730
and granted some of this is<font color="#E5E5E5"> public</font>

284
00:11:20,230 --> 00:11:24,580
information or information that you can

285
00:11:21,730 --> 00:11:26,200
pay for but there's a problem<font color="#CCCCCC"> whenever</font>

286
00:11:24,580 --> 00:11:28,660
those kind of details are just left<font color="#E5E5E5"> out</font>

287
00:11:26,200 --> 00:11:30,280
in the<font color="#CCCCCC"> open unintentionally so this</font><font color="#E5E5E5"> is</font>

288
00:11:28,660 --> 00:11:32,140
an example<font color="#E5E5E5"> of what</font><font color="#CCCCCC"> that landscape looked</font>

289
00:11:30,280 --> 00:11:35,079
like I'm<font color="#E5E5E5"> not going to go through</font><font color="#CCCCCC"> all of</font>

290
00:11:32,140 --> 00:11:36,610
these but you can see and these<font color="#E5E5E5"> aren't</font>

291
00:11:35,080 --> 00:11:37,960
all of them by the<font color="#E5E5E5"> way these</font><font color="#CCCCCC"> are just I</font>

292
00:11:36,610 --> 00:11:40,210
wanted to fit it in a slide so you can

293
00:11:37,960 --> 00:11:42,340
read<font color="#E5E5E5"> it these are</font><font color="#CCCCCC"> some of</font><font color="#E5E5E5"> the bigger</font>

294
00:11:40,210 --> 00:11:45,490
<font color="#CCCCCC">ones that we saw in 2015 and there was a</font>

295
00:11:42,340 --> 00:11:47,730
<font color="#E5E5E5">single guy named Chris</font><font color="#CCCCCC"> Vickery who did a</font>

296
00:11:45,490 --> 00:11:50,830
lot of really good research in<font color="#E5E5E5"> terms of</font>

297
00:11:47,730 --> 00:11:53,560
looking for exposed mongo databases and

298
00:11:50,830 --> 00:11:56,260
looking for exposed you know similar to

299
00:11:53,560 --> 00:11:59,589
what we're talking<font color="#CCCCCC"> about today what he</font>

300
00:11:56,260 --> 00:12:03,340
found were these exposed information so

301
00:11:59,590 --> 00:12:04,870
you<font color="#E5E5E5"> have things like the voter records</font>

302
00:12:03,340 --> 00:12:06,550
we talked about you know the modern

303
00:12:04,870 --> 00:12:10,360
business solutions which is their entire

304
00:12:06,550 --> 00:12:12,880
clientele you have the mac keeper which

305
00:12:10,360 --> 00:12:14,950
is a lot of their user information so a

306
00:12:12,880 --> 00:12:16,660
lot of sensitive exposed databases and

307
00:12:14,950 --> 00:12:18,010
it just seemed like it was MongoDB all

308
00:12:16,660 --> 00:12:19,449
over the place you<font color="#E5E5E5"> know you just</font>

309
00:12:18,010 --> 00:12:20,920
<font color="#E5E5E5">couldn't get away from it right it was</font>

310
00:12:19,450 --> 00:12:24,820
it was a payday<font color="#E5E5E5"> any time you want it to</font>

311
00:12:20,920 --> 00:12:27,189
look for so all<font color="#E5E5E5"> that being said what</font>

312
00:12:24,820 --> 00:12:30,790
kind<font color="#E5E5E5"> of data is exposed you know what</font>

313
00:12:27,190 --> 00:12:32,200
are we looking at here and so on the

314
00:12:30,790 --> 00:12:34,329
right you'll notice that you can't read

315
00:12:32,200 --> 00:12:36,760
that picture<font color="#E5E5E5"> and that's on purpose</font>

316
00:12:34,330 --> 00:12:41,290
that's because there are so many rows in

317
00:12:36,760 --> 00:12:43,000
that in that schema that I can't list

318
00:12:41,290 --> 00:12:45,730
them all out in a nutshell you can just

319
00:12:43,000 --> 00:12:48,130
envision it is everything<font color="#E5E5E5"> about you is</font>

320
00:12:45,730 --> 00:12:49,840
in there and being exposed but here's

321
00:12:48,130 --> 00:12:51,670
some of the highlights personal

322
00:12:49,840 --> 00:12:53,770
information is huge these are things

323
00:12:51,670 --> 00:12:58,390
<font color="#E5E5E5">like your standard p I name address</font>

324
00:12:53,770 --> 00:13:00,040
email phone number date of birth in some

325
00:12:58,390 --> 00:13:02,530
cases in one voter registration your

326
00:13:00,040 --> 00:13:06,370
religious affiliation what party you

327
00:13:02,530 --> 00:13:08,110
voted for your history<font color="#CCCCCC"> of voting a lot</font>

328
00:13:06,370 --> 00:13:11,650
of this<font color="#E5E5E5"> information that you don't want</font>

329
00:13:08,110 --> 00:13:15,160
released in a mass format this so easy

330
00:13:11,650 --> 00:13:16,540
to obtain right and then you have the

331
00:13:15,160 --> 00:13:20,160
<font color="#E5E5E5">other side of the spectrum which isn't</font>

332
00:13:16,540 --> 00:13:23,230
necessarily personal information but its

333
00:13:20,160 --> 00:13:24,459
application data you have like I said<font color="#E5E5E5"> a</font>

334
00:13:23,230 --> 00:13:26,380
<font color="#CCCCCC">mongo you know people store their</font>

335
00:13:24,460 --> 00:13:27,940
profile information there that includes

336
00:13:26,380 --> 00:13:28,870
your<font color="#CCCCCC"> user name</font><font color="#E5E5E5"> that includes your email</font>

337
00:13:27,940 --> 00:13:30,400
address

338
00:13:28,870 --> 00:13:32,950
and that includes<font color="#CCCCCC"> your hashed password</font>

339
00:13:30,400 --> 00:13:36,100
so if<font color="#E5E5E5"> this is left out on the</font><font color="#CCCCCC"> internet I</font>

340
00:13:32,950 --> 00:13:37,210
don't have to<font color="#E5E5E5"> go find some kind of you</font>

341
00:13:36,100 --> 00:13:39,279
know if its relation I don't have to go

342
00:13:37,210 --> 00:13:41,290
find<font color="#E5E5E5"> some sequel injection or some you</font>

343
00:13:39,279 --> 00:13:43,029
<font color="#CCCCCC">know Mongo JavaScript injection or</font>

344
00:13:41,290 --> 00:13:45,699
something crazy like that to go dump<font color="#E5E5E5"> the</font>

345
00:13:43,029 --> 00:13:47,260
database I can use the standard tools to

346
00:13:45,700 --> 00:13:48,970
connect to it and just download it<font color="#E5E5E5"> it's</font>

347
00:13:47,260 --> 00:13:53,050
public it's out there there's no

348
00:13:48,970 --> 00:13:54,670
authentication for it so all<font color="#E5E5E5"> that being</font>

349
00:13:53,050 --> 00:13:56,800
said how much date are we talking<font color="#CCCCCC"> about</font>

350
00:13:54,670 --> 00:13:59,829
you know and it really kind of depends

351
00:13:56,800 --> 00:14:01,930
on<font color="#E5E5E5"> who you ask there's two organizations</font>

352
00:13:59,830 --> 00:14:03,160
and to kind<font color="#CCCCCC"> of commercial offerings that</font>

353
00:14:01,930 --> 00:14:05,920
have looked at<font color="#E5E5E5"> this kind of data in the</font>

354
00:14:03,160 --> 00:14:07,750
past the first is<font color="#CCCCCC"> shoten have anyone has</font>

355
00:14:05,920 --> 00:14:09,219
<font color="#E5E5E5">anyone heard of shoten before it's</font>

356
00:14:07,750 --> 00:14:11,680
<font color="#E5E5E5">pretty it's going to be pretty popular</font>

357
00:14:09,220 --> 00:14:12,790
right it's a powerful<font color="#E5E5E5"> tool for those of</font>

358
00:14:11,680 --> 00:14:14,680
you who haven't heard about it it's

359
00:14:12,790 --> 00:14:17,319
basically think of<font color="#E5E5E5"> it like a search</font>

360
00:14:14,680 --> 00:14:20,229
engine<font color="#CCCCCC"> for devices so you can search</font>

361
00:14:17,320 --> 00:14:21,580
through metadata about a device like the

362
00:14:20,230 --> 00:14:24,250
banner that it returns whenever you

363
00:14:21,580 --> 00:14:26,529
connect to<font color="#CCCCCC"> a service so showed ins done</font>

364
00:14:24,250 --> 00:14:29,410
some work in this area and the other is

365
00:14:26,529 --> 00:14:32,620
one called binary edge they're<font color="#E5E5E5"> kind of</font>

366
00:14:29,410 --> 00:14:34,660
an up-and-coming firm they have

367
00:14:32,620 --> 00:14:36,610
<font color="#E5E5E5">something a product similar to shoten</font>

368
00:14:34,660 --> 00:14:38,650
but<font color="#E5E5E5"> I kind of look at it like showed him</font>

369
00:14:36,610 --> 00:14:40,330
on steroids because<font color="#E5E5E5"> it does a lot of</font>

370
00:14:38,650 --> 00:14:43,209
correlation on the back end it does a

371
00:14:40,330 --> 00:14:45,670
lot of additional metadata gathering but

372
00:14:43,209 --> 00:14:49,510
it's a more commercial tool that costs

373
00:14:45,670 --> 00:14:51,430
money to access their the results so all

374
00:14:49,510 --> 00:14:53,020
<font color="#E5E5E5">that being said it depends on who you</font>

375
00:14:51,430 --> 00:14:55,599
ask in terms of how much data they found

376
00:14:53,020 --> 00:14:57,310
and not<font color="#E5E5E5"> only that but this stuff changes</font>

377
00:14:55,600 --> 00:14:59,080
every day you know<font color="#E5E5E5"> people will expose</font>

378
00:14:57,310 --> 00:15:00,760
new services or they delete data they

379
00:14:59,080 --> 00:15:03,490
add data you know you're never<font color="#E5E5E5"> going to</font>

380
00:15:00,760 --> 00:15:05,050
be able to pin point in time just how

381
00:15:03,490 --> 00:15:08,470
much data is out there<font color="#E5E5E5"> and keep it</font>

382
00:15:05,050 --> 00:15:10,839
accurate so looking<font color="#E5E5E5"> at the two</font><font color="#CCCCCC"> different</font>

383
00:15:08,470 --> 00:15:12,760
sides of the story kind of averaging it

384
00:15:10,839 --> 00:15:14,860
out it seems like in a nutshell we're

385
00:15:12,760 --> 00:15:18,100
looking at the amount of data that is

386
00:15:14,860 --> 00:15:21,339
stored in these devices is around<font color="#E5E5E5"> 700</font>

387
00:15:18,100 --> 00:15:23,650
terabytes and some of this data is is

388
00:15:21,339 --> 00:15:25,390
sensitive shore and some of its not some

389
00:15:23,650 --> 00:15:27,430
of<font color="#E5E5E5"> us just generic testator stuff you</font>

390
00:15:25,390 --> 00:15:29,290
don't care about but<font color="#E5E5E5"> it's clear that</font>

391
00:15:27,430 --> 00:15:30,939
there's a<font color="#E5E5E5"> big problem it's clear there's</font>

392
00:15:29,290 --> 00:15:33,400
a lot of data<font color="#E5E5E5"> to sift through it's clear</font>

393
00:15:30,940 --> 00:15:34,480
that there's a lot of data exposed and

394
00:15:33,400 --> 00:15:36,750
there's<font color="#E5E5E5"> something</font><font color="#CCCCCC"> that needs to be</font><font color="#E5E5E5"> done</font>

395
00:15:34,480 --> 00:15:36,750
about it

396
00:15:36,900 --> 00:15:42,699
so the burning question is what do we

397
00:15:40,000 --> 00:15:46,420
<font color="#E5E5E5">mean by exposed you know what qualifies</font>

398
00:15:42,700 --> 00:15:49,630
as exposed data in<font color="#E5E5E5"> our case there's a</font>

399
00:15:46,420 --> 00:15:52,120
few things the first<font color="#E5E5E5"> is a service</font>

400
00:15:49,630 --> 00:15:53,710
listening on all interfaces so not<font color="#CCCCCC"> just</font>

401
00:15:52,120 --> 00:15:57,070
down the<font color="#E5E5E5"> localhost I can reach</font><font color="#CCCCCC"> it from</font>

402
00:15:53,710 --> 00:15:58,480
across the internet if<font color="#E5E5E5"> I want to the</font>

403
00:15:57,070 --> 00:16:00,400
second is that there's no authentication

404
00:15:58,480 --> 00:16:01,720
it's just left out<font color="#E5E5E5"> I don't have to know</font>

405
00:16:00,400 --> 00:16:05,170
any credentials I don't have to know a

406
00:16:01,720 --> 00:16:06,670
password to<font color="#E5E5E5"> access this device the third</font>

407
00:16:05,170 --> 00:16:09,880
is it<font color="#CCCCCC"> a storing sensitive information</font>

408
00:16:06,670 --> 00:16:11,410
that's optional<font color="#E5E5E5"> right and then it could</font>

409
00:16:09,880 --> 00:16:14,200
<font color="#E5E5E5">also be running a vulnerable version of</font>

410
00:16:11,410 --> 00:16:17,350
software and the last is<font color="#E5E5E5"> the one that</font>

411
00:16:14,200 --> 00:16:20,680
kills<font color="#CCCCCC"> me none of this</font><font color="#E5E5E5"> software needs to</font>

412
00:16:17,350 --> 00:16:23,080
be run as root it doesn't we run at<font color="#E5E5E5"> this</font>

413
00:16:20,680 --> 00:16:25,060
route because it's it's easy right it's

414
00:16:23,080 --> 00:16:27,250
<font color="#E5E5E5">the easy thing to do it works and so</font>

415
00:16:25,060 --> 00:16:28,900
then we leave it but then they're

416
00:16:27,250 --> 00:16:30,400
leaving an exposed service that's

417
00:16:28,900 --> 00:16:32,160
potentially vulnerable to an

418
00:16:30,400 --> 00:16:35,470
authenticator remote code execution as

419
00:16:32,160 --> 00:16:36,819
root so at that point is came over you

420
00:16:35,470 --> 00:16:39,130
know that point the attacker completely

421
00:16:36,820 --> 00:16:41,080
owns a box and you have no choice if you

422
00:16:39,130 --> 00:16:42,670
want to remediate the problem then wipe

423
00:16:41,080 --> 00:16:45,850
it because of<font color="#CCCCCC"> that point you can't trust</font>

424
00:16:42,670 --> 00:16:48,069
a thing on<font color="#E5E5E5"> that box so that's what we</font>

425
00:16:45,850 --> 00:16:49,930
<font color="#E5E5E5">mean by exposed and if you do all that</font>

426
00:16:48,070 --> 00:16:53,190
<font color="#E5E5E5">as a picture suggests you will have a</font>

427
00:16:49,930 --> 00:16:55,030
bad time so let's<font color="#E5E5E5"> look at a few examples</font>

428
00:16:53,190 --> 00:16:57,310
let's go<font color="#E5E5E5"> through some of this technology</font>

429
00:16:55,030 --> 00:16:59,829
let's talk about some<font color="#CCCCCC"> of the ways that</font>

430
00:16:57,310 --> 00:17:02,199
we if we want<font color="#E5E5E5"> it to be attackers could</font>

431
00:16:59,830 --> 00:17:05,319
expose you know every single<font color="#E5E5E5"> piece of</font>

432
00:17:02,200 --> 00:17:08,069
<font color="#E5E5E5">data in these in these software let's</font>

433
00:17:05,319 --> 00:17:11,020
<font color="#CCCCCC">start</font><font color="#E5E5E5"> with Mongo anytime I talk about</font>

434
00:17:08,069 --> 00:17:13,599
<font color="#CCCCCC">accessing data my first thought is can I</font>

435
00:17:11,020 --> 00:17:14,949
just bulk export this the stuff right if

436
00:17:13,599 --> 00:17:16,359
<font color="#E5E5E5">I'm an attack and I just want download</font>

437
00:17:14,949 --> 00:17:19,510
the entire database do they give me

438
00:17:16,359 --> 00:17:22,208
tools to do that and the good<font color="#CCCCCC"> news is</font>

439
00:17:19,510 --> 00:17:24,849
that backups are a real problem and

440
00:17:22,209 --> 00:17:26,500
people like making backups than me so

441
00:17:24,849 --> 00:17:28,119
they need tools to make backups well

442
00:17:26,500 --> 00:17:30,580
that's exactly<font color="#CCCCCC"> the tool that I'm going</font>

443
00:17:28,119 --> 00:17:32,050
<font color="#E5E5E5">to use to download all</font><font color="#CCCCCC"> their data</font>

444
00:17:30,580 --> 00:17:34,929
because that's what's proven to work

445
00:17:32,050 --> 00:17:35,980
that's its job so that's going to be<font color="#E5E5E5"> the</font>

446
00:17:34,930 --> 00:17:37,570
first<font color="#E5E5E5"> thing that I look for and for</font>

447
00:17:35,980 --> 00:17:40,360
Mongo they have a<font color="#E5E5E5"> great tool called</font>

448
00:17:37,570 --> 00:17:42,370
Mongo dump it's just a command-line tool

449
00:17:40,360 --> 00:17:45,219
it makes<font color="#E5E5E5"> just that it's a copy of the</font>

450
00:17:42,370 --> 00:17:46,719
entire Mongo database you can<font color="#CCCCCC"> then use a</font>

451
00:17:45,220 --> 00:17:47,900
tool called Mongo restore if you want to

452
00:17:46,720 --> 00:17:50,210
restore<font color="#CCCCCC"> it</font><font color="#E5E5E5"> to your own</font>

453
00:17:47,900 --> 00:17:54,320
instance and start poking around you can

454
00:17:50,210 --> 00:17:56,210
do that otherwise you know for this is

455
00:17:54,320 --> 00:17:57,710
<font color="#E5E5E5">proud this is basically how Mongo dump</font>

456
00:17:56,210 --> 00:17:59,780
works but even if you were<font color="#E5E5E5"> using a</font>

457
00:17:57,710 --> 00:18:01,550
client library the general gist is that

458
00:17:59,780 --> 00:18:03,889
you're going<font color="#E5E5E5"> to say for every database</font>

459
00:18:01,550 --> 00:18:06,560
that you're storing on your Mongo

460
00:18:03,890 --> 00:18:09,170
instance how many collections do you

461
00:18:06,560 --> 00:18:11,120
have these are kind of like tables right

462
00:18:09,170 --> 00:18:12,470
and i'm<font color="#E5E5E5"> going to say for every single</font>

463
00:18:11,120 --> 00:18:14,840
one of those collections i'm going to

464
00:18:12,470 --> 00:18:18,740
<font color="#E5E5E5">download the the contents of that</font>

465
00:18:14,840 --> 00:18:20,600
collection let's move on to memcache

466
00:18:18,740 --> 00:18:22,880
this one's a little bit<font color="#E5E5E5"> more tricky and</font>

467
00:18:20,600 --> 00:18:26,389
the<font color="#E5E5E5"> reason is tricky is because memcache</font>

468
00:18:22,880 --> 00:18:28,130
stores data in an interesting way if you

469
00:18:26,390 --> 00:18:31,940
<font color="#E5E5E5">ever look into the internals of how MIM</font>

470
00:18:28,130 --> 00:18:33,620
cash does what it does it's kind<font color="#E5E5E5"> of it's</font>

471
00:18:31,940 --> 00:18:35,720
interesting they have to run their own

472
00:18:33,620 --> 00:18:37,850
memory allocation they have to manage

473
00:18:35,720 --> 00:18:40,150
<font color="#E5E5E5">their own memory and so they do it in a</font>

474
00:18:37,850 --> 00:18:42,889
way where they set up objects that

475
00:18:40,150 --> 00:18:44,270
reference pieces of data in different

476
00:18:42,890 --> 00:18:46,640
places i'm not going<font color="#CCCCCC"> to</font><font color="#E5E5E5"> go into the</font>

477
00:18:44,270 --> 00:18:48,490
details we only have 40 minutes<font color="#CCCCCC"> and</font>

478
00:18:46,640 --> 00:18:50,840
quite frankly<font color="#CCCCCC"> i'm</font><font color="#E5E5E5"> not an expert on it</font>

479
00:18:48,490 --> 00:18:52,430
but all<font color="#E5E5E5"> that being said all you need to</font>

480
00:18:50,840 --> 00:18:55,879
know about<font color="#CCCCCC"> is</font><font color="#E5E5E5"> this not as simple as just</font>

481
00:18:52,430 --> 00:18:57,530
hitting it in immediately downloading

482
00:18:55,880 --> 00:18:59,030
everything you have to use some<font color="#CCCCCC"> of their</font>

483
00:18:57,530 --> 00:19:01,220
<font color="#CCCCCC">special tools that know all the nooks</font>

484
00:18:59,030 --> 00:19:03,889
and crannies of how to access the

485
00:19:01,220 --> 00:19:05,240
information to<font color="#E5E5E5"> memcached fortunately</font>

486
00:19:03,890 --> 00:19:07,640
there is one<font color="#E5E5E5"> that was released is called</font>

487
00:19:05,240 --> 00:19:10,580
memcache tool and it does that by

488
00:19:07,640 --> 00:19:12,740
recursively enumerated these places that

489
00:19:10,580 --> 00:19:14,540
store data in memcache calls them slabs

490
00:19:12,740 --> 00:19:16,130
all you have to know<font color="#E5E5E5"> about them is they</font>

491
00:19:14,540 --> 00:19:19,909
are placeholders that point to where the

492
00:19:16,130 --> 00:19:23,270
data is right and this is actually<font color="#CCCCCC"> a a</font>

493
00:19:19,910 --> 00:19:24,920
big point that we need<font color="#E5E5E5"> to talk</font><font color="#CCCCCC"> about too</font>

494
00:19:23,270 --> 00:19:27,440
often we see people roll out these key

495
00:19:24,920 --> 00:19:28,520
value storage solutions saying no<font color="#E5E5E5"> one</font>

496
00:19:27,440 --> 00:19:29,900
can dump the<font color="#CCCCCC"> data mean they would have</font>

497
00:19:28,520 --> 00:19:32,570
<font color="#CCCCCC">to know</font><font color="#E5E5E5"> the keys right they would have</font>

498
00:19:29,900 --> 00:19:34,910
<font color="#CCCCCC">to know how to access the data that's</font>

499
00:19:32,570 --> 00:19:37,040
not true you know there<font color="#CCCCCC"> is a way for me</font>

500
00:19:34,910 --> 00:19:39,230
<font color="#E5E5E5">to list out all the keys and now that I</font>

501
00:19:37,040 --> 00:19:42,050
have<font color="#E5E5E5"> the keys I can list out all the</font>

502
00:19:39,230 --> 00:19:44,240
values as<font color="#CCCCCC"> well so exposing these key</font>

503
00:19:42,050 --> 00:19:46,700
value databases or the key value

504
00:19:44,240 --> 00:19:48,350
solutions even<font color="#CCCCCC"> if they're meant to</font><font color="#E5E5E5"> be</font>

505
00:19:46,700 --> 00:19:50,330
temporary data if you're storing

506
00:19:48,350 --> 00:19:52,159
sensitive information in them it's

507
00:19:50,330 --> 00:19:55,280
possible<font color="#CCCCCC"> to</font><font color="#E5E5E5"> download that and have that</font>

508
00:19:52,160 --> 00:19:57,590
stolen from you and finally have a link

509
00:19:55,280 --> 00:19:59,360
<font color="#E5E5E5">to a tool i'll be releasing these slides</font>

510
00:19:57,590 --> 00:20:00,939
by the way so<font color="#E5E5E5"> i have some links in here</font>

511
00:19:59,360 --> 00:20:04,060
<font color="#E5E5E5">of a tool from since</font>

512
00:20:00,940 --> 00:20:06,430
post it's called a go der / and it is

513
00:20:04,060 --> 00:20:07,840
basically<font color="#CCCCCC"> like</font><font color="#E5E5E5"> min cash tool it's</font>

514
00:20:06,430 --> 00:20:12,520
another tool you can use<font color="#E5E5E5"> to exfiltrate</font>

515
00:20:07,840 --> 00:20:14,470
data from memcached now we'll look at

516
00:20:12,520 --> 00:20:16,900
Redis is will speak through this one

517
00:20:14,470 --> 00:20:19,420
since it's really similar to Mongo in

518
00:20:16,900 --> 00:20:21,070
terms of there's no real backup solution

519
00:20:19,420 --> 00:20:23,560
because it's it's a key value<font color="#E5E5E5"> store it's</font>

520
00:20:21,070 --> 00:20:25,120
meant to hold temporary data but it<font color="#E5E5E5"> has</font>

521
00:20:23,560 --> 00:20:26,590
client libraries that you can use<font color="#CCCCCC"> to</font>

522
00:20:25,120 --> 00:20:29,739
list all your keys and then<font color="#E5E5E5"> dump all the</font>

523
00:20:26,590 --> 00:20:31,000
values from those keys ignore the three

524
00:20:29,740 --> 00:20:33,670
bullet points<font color="#E5E5E5"> those are wrong that's not</font>

525
00:20:31,000 --> 00:20:36,820
<font color="#E5E5E5">how register was data that's what you</font>

526
00:20:33,670 --> 00:20:38,590
get one of you duplicate slides but red

527
00:20:36,820 --> 00:20:40,210
is kind of sets a tone and this is how

528
00:20:38,590 --> 00:20:42,459
you can expose data for anything this<font color="#CCCCCC"> is</font>

529
00:20:40,210 --> 00:20:44,050
what you can start thinking about any

530
00:20:42,460 --> 00:20:46,180
time you encounter a new technology that

531
00:20:44,050 --> 00:20:47,980
you want<font color="#E5E5E5"> to access data</font><font color="#CCCCCC"> from do they</font>

532
00:20:46,180 --> 00:20:50,680
<font color="#E5E5E5">have a backup solution do they have some</font>

533
00:20:47,980 --> 00:20:52,870
<font color="#E5E5E5">kind of a bulk export if they don't do</font>

534
00:20:50,680 --> 00:20:54,940
they offer client libraries then how do

535
00:20:52,870 --> 00:20:57,129
I use those libraries to get to the data

536
00:20:54,940 --> 00:20:58,960
I care about if you can put all those

537
00:20:57,130 --> 00:21:00,730
together especially<font color="#E5E5E5"> with the client</font>

538
00:20:58,960 --> 00:21:03,730
libraries you can start talking<font color="#E5E5E5"> about</font>

539
00:21:00,730 --> 00:21:04,990
<font color="#E5E5E5">scanning on a mass scale and getting the</font>

540
00:21:03,730 --> 00:21:08,670
data<font color="#E5E5E5"> that you care about to do your</font>

541
00:21:04,990 --> 00:21:11,080
analysis<font color="#CCCCCC"> and that's exactly what we did</font>

542
00:21:08,670 --> 00:21:13,750
so<font color="#E5E5E5"> we decided to look for ourselves and</font>

543
00:21:11,080 --> 00:21:16,330
here's kind<font color="#E5E5E5"> of our</font><font color="#CCCCCC"> setup at a two</font>

544
00:21:13,750 --> 00:21:19,630
million foot view this is a technical

545
00:21:16,330 --> 00:21:21,250
slide on the left hand side we<font color="#CCCCCC"> have our</font>

546
00:21:19,630 --> 00:21:24,220
technologies you have Mongo

547
00:21:21,250 --> 00:21:27,370
elasticsearch<font color="#CCCCCC"> couchbase Redis Cassandra</font>

548
00:21:24,220 --> 00:21:29,140
and memcache and we have you can imagine

549
00:21:27,370 --> 00:21:30,669
these being shown in results because we

550
00:21:29,140 --> 00:21:33,910
<font color="#E5E5E5">leverage show them for our analysis</font>

551
00:21:30,670 --> 00:21:36,100
feeding into a crawler that<font color="#CCCCCC"> we built its</font>

552
00:21:33,910 --> 00:21:37,600
kind of showed an agnostic it doesn't

553
00:21:36,100 --> 00:21:39,310
have to be that but it's anywhere that

554
00:21:37,600 --> 00:21:42,580
you can get results for these services

555
00:21:39,310 --> 00:21:44,230
listening on the<font color="#CCCCCC"> internet and then our</font>

556
00:21:42,580 --> 00:21:46,689
crawler went out to each one<font color="#E5E5E5"> of those</font>

557
00:21:44,230 --> 00:21:48,610
<font color="#E5E5E5">instances and it gathered the metadata</font>

558
00:21:46,690 --> 00:21:50,980
that we cared about things like what

559
00:21:48,610 --> 00:21:52,959
version are<font color="#CCCCCC"> you on how much free space</font>

560
00:21:50,980 --> 00:21:54,520
if I can tell how much free space is

561
00:21:52,960 --> 00:21:57,580
<font color="#CCCCCC">available how much data do</font><font color="#E5E5E5"> you have</font>

562
00:21:54,520 --> 00:21:59,740
stored in you and then in certain<font color="#E5E5E5"> cases</font>

563
00:21:57,580 --> 00:22:02,320
we would also say like let's take Mongo

564
00:21:59,740 --> 00:22:04,360
as an example what are the names of<font color="#E5E5E5"> your</font>

565
00:22:02,320 --> 00:22:06,790
databases what are the names<font color="#E5E5E5"> of your</font>

566
00:22:04,360 --> 00:22:09,340
collection inside of your databases dump

567
00:22:06,790 --> 00:22:11,230
those out for us as well<font color="#E5E5E5"> and after we</font>

568
00:22:09,340 --> 00:22:12,500
had that information about all of these

569
00:22:11,230 --> 00:22:14,630
services on the internet

570
00:22:12,500 --> 00:22:16,250
we could then go through<font color="#CCCCCC"> and analyze it</font>

571
00:22:14,630 --> 00:22:17,630
and kind<font color="#E5E5E5"> of pick and choose and sample</font>

572
00:22:16,250 --> 00:22:19,880
some of the data because our goal isn't

573
00:22:17,630 --> 00:22:22,010
to dump every single database that's not

574
00:22:19,880 --> 00:22:24,170
the intention at all it's not<font color="#E5E5E5"> our it's</font>

575
00:22:22,010 --> 00:22:26,750
not how we like to do things so we would

576
00:22:24,170 --> 00:22:30,770
sample it we would say okay there's one

577
00:22:26,750 --> 00:22:33,800
called example<font color="#E5E5E5"> Corp dot users and it's a</font>

578
00:22:30,770 --> 00:22:35,300
huge collection let's take the first two

579
00:22:33,800 --> 00:22:37,430
records and the last two records of that

580
00:22:35,300 --> 00:22:39,230
let's kind of<font color="#E5E5E5"> see what they're storing</font>

581
00:22:37,430 --> 00:22:40,490
to see if it's sensitive or not if it's

582
00:22:39,230 --> 00:22:41,780
sensitive let's tell<font color="#E5E5E5"> them about it</font>

583
00:22:40,490 --> 00:22:45,140
<font color="#E5E5E5">because that's something they probably</font>

584
00:22:41,780 --> 00:22:46,700
don't want exposed this is from what I

585
00:22:45,140 --> 00:22:48,340
could gather how Chris victory did his

586
00:22:46,700 --> 00:22:53,150
research exposing all these databases

587
00:22:48,340 --> 00:22:54,939
back towards the tail end of 2015 so all

588
00:22:53,150 --> 00:22:58,780
<font color="#E5E5E5">that being said we like to think that</font>

589
00:22:54,940 --> 00:23:01,160
you know we're past this it's 2016

590
00:22:58,780 --> 00:23:04,100
there's no way that there could still be

591
00:23:01,160 --> 00:23:06,680
a ton of sensitive information right ya

592
00:23:04,100 --> 00:23:08,750
know the total<font color="#CCCCCC"> eso so as soon as</font><font color="#E5E5E5"> we</font>

593
00:23:06,680 --> 00:23:11,540
started scanning it was clear that this

594
00:23:08,750 --> 00:23:14,060
<font color="#CCCCCC">is still</font><font color="#E5E5E5"> a huge problem you know we had</font>

595
00:23:11,540 --> 00:23:15,470
right off<font color="#E5E5E5"> the bat the the sensitive</font>

596
00:23:14,060 --> 00:23:18,260
information started<font color="#E5E5E5"> pouring in things</font>

597
00:23:15,470 --> 00:23:20,060
like session cookies being stored so

598
00:23:18,260 --> 00:23:22,310
these<font color="#CCCCCC"> are you know if I can</font><font color="#E5E5E5"> take this</font>

599
00:23:20,060 --> 00:23:25,250
plug it in my browser I'm that user I

600
00:23:22,310 --> 00:23:28,010
have access<font color="#CCCCCC"> to the application we also</font>

601
00:23:25,250 --> 00:23:29,240
had a auth tokens this was huge people

602
00:23:28,010 --> 00:23:31,190
don't think<font color="#E5E5E5"> there's a risk and storing</font>

603
00:23:29,240 --> 00:23:33,110
OAuth tokens in their key value stores

604
00:23:31,190 --> 00:23:36,350
<font color="#E5E5E5">or they don't things are risk storing</font>

605
00:23:33,110 --> 00:23:38,689
those persistence in manga there is<font color="#E5E5E5"> I</font>

606
00:23:36,350 --> 00:23:40,310
can take those and have arbitrary

607
00:23:38,690 --> 00:23:43,250
permissions on your<font color="#E5E5E5"> social networking</font>

608
00:23:40,310 --> 00:23:45,820
site these are for whenever I list these

609
00:23:43,250 --> 00:23:48,110
details these aren't for tens of users

610
00:23:45,820 --> 00:23:50,060
these are for hundreds of thousands<font color="#E5E5E5"> or</font>

611
00:23:48,110 --> 00:23:53,330
millions you know so<font color="#E5E5E5"> this is a pretty</font>

612
00:23:50,060 --> 00:23:54,620
large scale problem we also saw the case

613
00:23:53,330 --> 00:23:56,600
that we talked about earlier which was

614
00:23:54,620 --> 00:23:59,570
full profile information so<font color="#CCCCCC"> username</font>

615
00:23:56,600 --> 00:24:02,240
<font color="#E5E5E5">password hash email addresses security</font>

616
00:23:59,570 --> 00:24:04,939
questions those were there too so it's

617
00:24:02,240 --> 00:24:06,470
good that<font color="#CCCCCC"> you can fall back on those and</font>

618
00:24:04,940 --> 00:24:08,390
<font color="#E5E5E5">then we also had interesting data like</font>

619
00:24:06,470 --> 00:24:10,670
location<font color="#E5E5E5"> data there's a lot</font><font color="#CCCCCC"> of apps out</font>

620
00:24:08,390 --> 00:24:14,060
there that track where you go every<font color="#CCCCCC"> day</font>

621
00:24:10,670 --> 00:24:16,760
so they publish that information up<font color="#E5E5E5"> it's</font>

622
00:24:14,060 --> 00:24:19,280
stored I have a unique identifier<font color="#E5E5E5"> for</font>

623
00:24:16,760 --> 00:24:21,520
which user it is and then I have the GPS

624
00:24:19,280 --> 00:24:24,020
coordinates for the past 30 days 60 days

625
00:24:21,520 --> 00:24:25,490
and I can track them over time I'd

626
00:24:24,020 --> 00:24:26,119
consider that to be somewhat sensitive

627
00:24:25,490 --> 00:24:28,819
and<font color="#CCCCCC"> form a</font>

628
00:24:26,119 --> 00:24:30,499
and finally we have detailed device

629
00:24:28,819 --> 00:24:32,809
heartbeats so a lot of devices

630
00:24:30,499 --> 00:24:34,249
especially embedded devices will ping

631
00:24:32,809 --> 00:24:37,329
out to a central server with some

632
00:24:34,249 --> 00:24:39,199
information<font color="#CCCCCC"> about their state usage</font>

633
00:24:37,329 --> 00:24:40,819
configuration information that's where

634
00:24:39,199 --> 00:24:43,689
it becomes<font color="#E5E5E5"> kind of sensitive especially</font>

635
00:24:40,819 --> 00:24:47,299
if they're exposed externally as well

636
00:24:43,689 --> 00:24:48,939
and we're not done so we also have what

637
00:24:47,299 --> 00:24:52,939
I would call semi sensitive information

638
00:24:48,939 --> 00:24:56,149
this is things like in some examples we

639
00:24:52,939 --> 00:24:57,409
saw cases where there were millions and

640
00:24:56,149 --> 00:25:01,399
in fact there was one case<font color="#CCCCCC"> where was</font>

641
00:24:57,409 --> 00:25:04,039
about 300<font color="#CCCCCC"> million scraped public social</font>

642
00:25:01,399 --> 00:25:06,799
networking profiles so for a large

643
00:25:04,039 --> 00:25:08,299
social network it was a single one now

644
00:25:06,799 --> 00:25:10,459
it's public information you know all

645
00:25:08,299 --> 00:25:13,069
that<font color="#E5E5E5"> being said but having 300 million</font>

646
00:25:10,459 --> 00:25:15,559
records or scraped profiles in one place

647
00:25:13,069 --> 00:25:17,779
is not only a clear sign of abuse by

648
00:25:15,559 --> 00:25:20,689
some party you know because that's can't

649
00:25:17,779 --> 00:25:22,189
do that but it's also people<font color="#E5E5E5"> don't</font>

650
00:25:20,689 --> 00:25:24,229
<font color="#E5E5E5">really like having that kind of data</font>

651
00:25:22,189 --> 00:25:26,059
aggregate and exposed in that kind of

652
00:25:24,229 --> 00:25:29,269
format it makes it too easy in a lot<font color="#E5E5E5"> of</font>

653
00:25:26,059 --> 00:25:31,009
cases we also had a ton of analytics and

654
00:25:29,269 --> 00:25:33,799
click tracking logs and web server

655
00:25:31,009 --> 00:25:38,359
access logs so these are you know semi

656
00:25:33,799 --> 00:25:40,189
sensitive but it is one of this let's

657
00:25:38,359 --> 00:25:43,309
put the problem on its head right if we

658
00:25:40,189 --> 00:25:45,739
<font color="#E5E5E5">can see data maybe we can store data as</font>

659
00:25:43,309 --> 00:25:47,089
well a lot of people<font color="#E5E5E5"> talk about exposed</font>

660
00:25:45,739 --> 00:25:49,279
data but they don't<font color="#E5E5E5"> talk about exposed</font>

661
00:25:47,089 --> 00:25:50,688
free space you<font color="#E5E5E5"> know my hard drive is</font>

662
00:25:49,279 --> 00:25:52,459
already bursting at the seams so I'll

663
00:25:50,689 --> 00:25:53,959
kind<font color="#E5E5E5"> of like the idea</font><font color="#CCCCCC"> of maybe I mean</font>

664
00:25:52,459 --> 00:25:56,419
there's these servers are out there they

665
00:25:53,959 --> 00:25:59,299
have some memory how much storage is

666
00:25:56,419 --> 00:26:00,649
available so again it kind of depends on

667
00:25:59,299 --> 00:26:03,019
<font color="#E5E5E5">who you ask and it depends on when you</font>

668
00:26:00,649 --> 00:26:05,059
do it your analysis<font color="#E5E5E5"> showed and came out</font>

669
00:26:03,019 --> 00:26:07,969
and just looked at memcached this was

670
00:26:05,059 --> 00:26:09,859
back<font color="#E5E5E5"> on the tail</font><font color="#CCCCCC"> end of 2015 and the</font>

671
00:26:07,969 --> 00:26:14,839
author<font color="#CCCCCC"> john mad early said there's about</font>

672
00:26:09,859 --> 00:26:16,658
47 petabytes of exposed free space that

673
00:26:14,839 --> 00:26:19,639
you can use to<font color="#CCCCCC"> store information</font>

674
00:26:16,659 --> 00:26:21,409
petabytes is a large<font color="#E5E5E5"> number that's a lot</font>

675
00:26:19,639 --> 00:26:23,629
of data right you're not<font color="#E5E5E5"> going to get</font>

676
00:26:21,409 --> 00:26:26,179
<font color="#CCCCCC">that with your Amazon Prime photos free</font>

677
00:26:23,629 --> 00:26:28,039
that<font color="#CCCCCC"> you have so we decided to</font><font color="#E5E5E5"> do the</font>

678
00:26:26,179 --> 00:26:30,139
same<font color="#E5E5E5"> test and we only have two</font>

679
00:26:28,039 --> 00:26:32,599
technologies because not all

680
00:26:30,139 --> 00:26:35,839
technologies expose the available space

681
00:26:32,599 --> 00:26:37,218
<font color="#CCCCCC">and their file system through an API it</font>

682
00:26:35,839 --> 00:26:38,990
is what it<font color="#E5E5E5"> is but we ran it through</font>

683
00:26:37,219 --> 00:26:41,750
memcached and we actually<font color="#E5E5E5"> only found</font>

684
00:26:38,990 --> 00:26:43,940
point one petabytes but we also found

685
00:26:41,750 --> 00:26:46,670
the number<font color="#E5E5E5"> of memcached instances kind</font>

686
00:26:43,940 --> 00:26:49,429
of haft since<font color="#CCCCCC"> John's post so that may</font>

687
00:26:46,670 --> 00:26:50,780
have contributed quite a bit and then we

688
00:26:49,429 --> 00:26:52,340
also looked at elasticsearch and we

689
00:26:50,780 --> 00:26:56,090
found close to six point six petabytes

690
00:26:52,340 --> 00:26:58,040
of available space now all<font color="#E5E5E5"> that being</font>

691
00:26:56,090 --> 00:26:59,899
said let's kind of think you know let's

692
00:26:58,040 --> 00:27:02,450
think of what we<font color="#E5E5E5"> can do with this could</font>

693
00:26:59,900 --> 00:27:05,990
we theoretically put some<font color="#E5E5E5"> kind of a</font>

694
00:27:02,450 --> 00:27:08,330
<font color="#CCCCCC">filesystem layer on top of this that</font>

695
00:27:05,990 --> 00:27:10,130
just stores data you know our documents

696
00:27:08,330 --> 00:27:13,129
and our folders in these exposed

697
00:27:10,130 --> 00:27:16,190
technologies right basically<font color="#E5E5E5"> making a</font>

698
00:27:13,130 --> 00:27:18,670
nice file system for us and someone

699
00:27:16,190 --> 00:27:21,260
definitely already did that they made

700
00:27:18,670 --> 00:27:23,090
they made a fuse file system for

701
00:27:21,260 --> 00:27:25,850
memcached so if you have a mem cached

702
00:27:23,090 --> 00:27:27,379
instance it only supports one but you

703
00:27:25,850 --> 00:27:29,178
can use it<font color="#E5E5E5"> to store the contents of</font>

704
00:27:27,380 --> 00:27:31,730
files and directories you can navigate

705
00:27:29,179 --> 00:27:33,980
it like a standard file system so

706
00:27:31,730 --> 00:27:36,650
imagine what we could do if we took the

707
00:27:33,980 --> 00:27:39,200
same concept of storing things in one

708
00:27:36,650 --> 00:27:43,700
min<font color="#CCCCCC"> cashton sins and we made</font><font color="#E5E5E5"> it not only</font>

709
00:27:39,200 --> 00:27:45,290
distributed but technology<font color="#E5E5E5"> agnostic what</font>

710
00:27:43,700 --> 00:27:48,770
we end up is with<font color="#E5E5E5"> it's like the biggest</font>

711
00:27:45,290 --> 00:27:50,030
cloud drive ever which is<font color="#E5E5E5"> amazing and</font>

712
00:27:48,770 --> 00:27:51,679
here's kind<font color="#E5E5E5"> of you know at a high level</font>

713
00:27:50,030 --> 00:27:55,100
what it might look like let's say<font color="#E5E5E5"> we</font>

714
00:27:51,679 --> 00:27:56,540
have our<font color="#E5E5E5"> PC and then we have the</font>

715
00:27:55,100 --> 00:27:58,760
software which would just be called<font color="#E5E5E5"> like</font>

716
00:27:56,540 --> 00:28:01,490
a fuse controller and it just keeps a

717
00:27:58,760 --> 00:28:04,250
mapping of where the exposed instances

718
00:28:01,490 --> 00:28:07,460
<font color="#CCCCCC">you know it's constantly scanning where</font>

719
00:28:04,250 --> 00:28:09,470
is you know where are my files stored we

720
00:28:07,460 --> 00:28:10,610
could store our direct reason key values

721
00:28:09,470 --> 00:28:12,890
because that kind<font color="#CCCCCC"> of make sense</font><font color="#E5E5E5"> they</font>

722
00:28:10,610 --> 00:28:14,689
<font color="#E5E5E5">just have to know here's a folder here's</font>

723
00:28:12,890 --> 00:28:16,340
where the data is stored and then you

724
00:28:14,690 --> 00:28:17,809
can store<font color="#CCCCCC"> your actual documents and</font>

725
00:28:16,340 --> 00:28:20,000
somewhere that offers a little<font color="#E5E5E5"> bit more</font>

726
00:28:17,809 --> 00:28:22,010
persistence I'm not saying do this

727
00:28:20,000 --> 00:28:23,870
<font color="#E5E5E5">because there's so many things wrong</font>

728
00:28:22,010 --> 00:28:25,250
with this but if you think<font color="#CCCCCC"> about it you</font>

729
00:28:23,870 --> 00:28:26,870
have<font color="#CCCCCC"> a lot of storage and you have</font><font color="#E5E5E5"> great</font>

730
00:28:25,250 --> 00:28:30,050
backup options you don't have to worry

731
00:28:26,870 --> 00:28:31,459
about storing things there right so

732
00:28:30,050 --> 00:28:34,909
there's a<font color="#E5E5E5"> lot of benefit to doing</font>

733
00:28:31,460 --> 00:28:35,990
something like that now let's<font color="#CCCCCC"> take a</font>

734
00:28:34,910 --> 00:28:37,730
<font color="#CCCCCC">look at</font><font color="#E5E5E5"> the other side of the problem</font>

735
00:28:35,990 --> 00:28:40,670
we've talked about data let's talk about

736
00:28:37,730 --> 00:28:43,400
systems right and here's a claim there

737
00:28:40,670 --> 00:28:46,370
are thousands<font color="#E5E5E5"> of systems vulnerable on</font>

738
00:28:43,400 --> 00:28:48,140
the internet and I know what you're

739
00:28:46,370 --> 00:28:49,340
thinking right<font color="#E5E5E5"> I'm in formal systems</font><font color="#CCCCCC"> who</font>

740
00:28:48,140 --> 00:28:51,290
<font color="#CCCCCC">cares</font><font color="#E5E5E5"> like this there's no</font>

741
00:28:49,340 --> 00:28:53,570
new we've seen some we've seen<font color="#E5E5E5"> some</font>

742
00:28:51,290 --> 00:28:56,210
instances like that but let's talk about

743
00:28:53,570 --> 00:28:58,159
<font color="#E5E5E5">what makes these valuable but first is</font>

744
00:28:56,210 --> 00:28:59,960
that they're easy to exploit we talked

745
00:28:58,160 --> 00:29:02,330
about<font color="#E5E5E5"> it this isn't some kind of really</font>

746
00:28:59,960 --> 00:29:05,390
complex exploit chain that works

747
00:29:02,330 --> 00:29:08,240
sometimes works not other times these

748
00:29:05,390 --> 00:29:11,720
are exploiting functionality in<font color="#CCCCCC"> the</font>

749
00:29:08,240 --> 00:29:14,300
software<font color="#E5E5E5"> itself that's meant to execute</font>

750
00:29:11,720 --> 00:29:16,340
code and it just doesn't it doesn't

751
00:29:14,300 --> 00:29:18,800
restrict it to anybody so that<font color="#E5E5E5"> just</font>

752
00:29:16,340 --> 00:29:21,560
gives us full remote code execution on

753
00:29:18,800 --> 00:29:23,440
these<font color="#CCCCCC"> devices so they're easy to exploit</font>

754
00:29:21,560 --> 00:29:25,970
that makes them extremely were mobile

755
00:29:23,440 --> 00:29:27,350
since there's no real effort needed you

756
00:29:25,970 --> 00:29:29,990
can script them and automate it really

757
00:29:27,350 --> 00:29:32,209
quickly you also have intentionally

758
00:29:29,990 --> 00:29:33,950
beefy machines as we saw there's a lot

759
00:29:32,210 --> 00:29:37,430
of memory available on these but they're

760
00:29:33,950 --> 00:29:38,990
also meant<font color="#CCCCCC"> to be powerful boxes and the</font>

761
00:29:37,430 --> 00:29:40,700
last is that<font color="#E5E5E5"> as we'll see they're going</font>

762
00:29:38,990 --> 00:29:42,590
to be really<font color="#CCCCCC"> good entry points into</font>

763
00:29:40,700 --> 00:29:44,240
other parts of<font color="#E5E5E5"> the network these</font><font color="#CCCCCC"> usually</font>

764
00:29:42,590 --> 00:29:45,980
sit behind your<font color="#E5E5E5"> web server since your</font>

765
00:29:44,240 --> 00:29:47,660
web server wants to hit it and then you

766
00:29:45,980 --> 00:29:49,130
also want some of your internal boxes to

767
00:29:47,660 --> 00:29:52,580
hit them<font color="#E5E5E5"> as well giving you a great</font>

768
00:29:49,130 --> 00:29:54,260
pivot so here's the claim<font color="#CCCCCC"> that there's</font>

769
00:29:52,580 --> 00:29:56,750
tons of systems available this may be a

770
00:29:54,260 --> 00:29:59,140
little<font color="#E5E5E5"> bit hard to see but on the left</font>

771
00:29:56,750 --> 00:30:02,900
hand side the scale goes from<font color="#CCCCCC"> zero to</font>

772
00:29:59,140 --> 00:30:04,310
<font color="#CCCCCC">one hundred thousand so on the Left will</font>

773
00:30:02,900 --> 00:30:07,400
see memcached it's the biggest it's

774
00:30:04,310 --> 00:30:09,980
right around 77,000 followed by Redis

775
00:30:07,400 --> 00:30:12,770
and then a Mongo<font color="#E5E5E5"> and elastic search and</font>

776
00:30:09,980 --> 00:30:15,920
then you have couch and Cassandra so

777
00:30:12,770 --> 00:30:18,260
there's a lot<font color="#E5E5E5"> of systems available let's</font>

778
00:30:15,920 --> 00:30:19,430
look at what some of these exploits tips

779
00:30:18,260 --> 00:30:21,590
look like what are the vulnerabilities

780
00:30:19,430 --> 00:30:23,270
that we're talking<font color="#E5E5E5"> about right so this</font>

781
00:30:21,590 --> 00:30:25,610
is Mongo admittedly this is an old one

782
00:30:23,270 --> 00:30:26,780
we didn't<font color="#CCCCCC"> even I</font><font color="#E5E5E5"> don't think I even</font>

783
00:30:25,610 --> 00:30:28,070
checked to see how many<font color="#CCCCCC"> are still</font>

784
00:30:26,780 --> 00:30:30,440
vulnerable to this because<font color="#E5E5E5"> it was such</font>

785
00:30:28,070 --> 00:30:31,610
an old vulnerability but<font color="#E5E5E5"> it was kind of</font>

786
00:30:30,440 --> 00:30:34,940
clever<font color="#E5E5E5"> at leverage server-side</font>

787
00:30:31,610 --> 00:30:36,620
<font color="#E5E5E5">JavaScript injection to gain access to</font>

788
00:30:34,940 --> 00:30:39,470
some sensitive parts of code which let

789
00:30:36,620 --> 00:30:41,419
it execute arbitrary commands I have the

790
00:30:39,470 --> 00:30:42,590
blog post<font color="#E5E5E5"> on the right we won't talk too</font>

791
00:30:41,420 --> 00:30:44,540
much about this<font color="#E5E5E5"> one since it's kind of</font>

792
00:30:42,590 --> 00:30:47,629
older but feel free to go check this one

793
00:30:44,540 --> 00:30:49,430
out it was a great<font color="#E5E5E5"> write-up this is what</font>

794
00:30:47,630 --> 00:30:51,170
I want to talk<font color="#CCCCCC"> about a little bit more I</font>

795
00:30:49,430 --> 00:30:53,660
have<font color="#E5E5E5"> kind of a history with elastic</font>

796
00:30:51,170 --> 00:30:56,120
search you'll notice<font color="#E5E5E5"> on the right as a</font>

797
00:30:53,660 --> 00:30:58,670
blog post that's actually pointing to my

798
00:30:56,120 --> 00:31:00,070
personal blog so full disclosure this is

799
00:30:58,670 --> 00:31:02,320
the<font color="#E5E5E5"> other confession that I have to make</font>

800
00:31:00,070 --> 00:31:04,720
the way that<font color="#CCCCCC"> I came across this was that</font>

801
00:31:02,320 --> 00:31:06,909
I<font color="#E5E5E5"> had an elastic search instance exposed</font>

802
00:31:04,720 --> 00:31:09,970
to the internet but I was<font color="#E5E5E5"> sitting behind</font>

803
00:31:06,910 --> 00:31:11,770
a web server that required basic auth so

804
00:31:09,970 --> 00:31:15,760
I was proxying it to elasticsearch not

805
00:31:11,770 --> 00:31:17,800
exposing it directly<font color="#E5E5E5"> I only have elastic</font>

806
00:31:15,760 --> 00:31:19,450
search listening on localhost so you had

807
00:31:17,800 --> 00:31:22,120
you couldn't hit<font color="#CCCCCC"> it from from outside</font>

808
00:31:19,450 --> 00:31:24,730
but whenever I upgraded it it asked me

809
00:31:22,120 --> 00:31:27,459
do you want<font color="#E5E5E5"> to use the new config or do</font>

810
00:31:24,730 --> 00:31:29,290
you<font color="#E5E5E5"> want to use your config</font><font color="#CCCCCC"> some me</font>

811
00:31:27,460 --> 00:31:31,270
thinking like maybe<font color="#E5E5E5"> it's new maybe like</font>

812
00:31:29,290 --> 00:31:32,800
it has features I don't know about maybe

813
00:31:31,270 --> 00:31:35,190
it'll break if I use my own let's use a

814
00:31:32,800 --> 00:31:37,090
new one I'll go make the changes later

815
00:31:35,190 --> 00:31:39,040
part<font color="#E5E5E5"> of that means that I got their</font>

816
00:31:37,090 --> 00:31:42,490
default config which listens on all

817
00:31:39,040 --> 00:31:44,230
interfaces<font color="#E5E5E5"> it's problem one so that</font>

818
00:31:42,490 --> 00:31:46,270
exposed my elasticsearch instance out

819
00:31:44,230 --> 00:31:48,790
about a day later<font color="#E5E5E5"> I got a note from</font>

820
00:31:46,270 --> 00:31:50,980
<font color="#E5E5E5">digitalocean saying hey your box was</font>

821
00:31:48,790 --> 00:31:52,570
participating in a DDoS attack we went

822
00:31:50,980 --> 00:31:53,740
ahead and shut it<font color="#E5E5E5"> down put it in</font>

823
00:31:52,570 --> 00:31:57,010
forensic mode you're going to have to go

824
00:31:53,740 --> 00:31:58,000
pull your files off and wipe the box so

825
00:31:57,010 --> 00:32:01,120
that's<font color="#CCCCCC"> really weird you know how to</font>

826
00:31:58,000 --> 00:32:03,100
engine X at SSH with key based off you

827
00:32:01,120 --> 00:32:05,919
know fail2ban the whole setup and then<font color="#E5E5E5"> I</font>

828
00:32:03,100 --> 00:32:07,389
had elasticsearch so digging through the

829
00:32:05,920 --> 00:32:09,220
logs I saw some really weird entries

830
00:32:07,390 --> 00:32:11,370
that looked like exploit attempts as

831
00:32:09,220 --> 00:32:14,950
soon as you see<font color="#E5E5E5"> W get a temp directory</font>

832
00:32:11,370 --> 00:32:17,439
GCC and you know weird<font color="#E5E5E5"> URLs you know</font>

833
00:32:14,950 --> 00:32:19,090
you're<font color="#E5E5E5"> in for a bad time and so I</font>

834
00:32:17,440 --> 00:32:20,950
started<font color="#E5E5E5"> digging and started looking did</font>

835
00:32:19,090 --> 00:32:22,120
I miss something and it turns out<font color="#E5E5E5"> this</font>

836
00:32:20,950 --> 00:32:25,270
vulnerability wasn't really well

837
00:32:22,120 --> 00:32:26,590
advertised it wasn't it wasn't made

838
00:32:25,270 --> 00:32:28,780
known to a lot of<font color="#E5E5E5"> people</font><font color="#CCCCCC"> just</font><font color="#E5E5E5"> kind of</font>

839
00:32:26,590 --> 00:32:30,970
hidden in release notes and I found<font color="#E5E5E5"> a</font>

840
00:32:28,780 --> 00:32:32,230
single blog post in a foreign language

841
00:32:30,970 --> 00:32:36,670
that was<font color="#E5E5E5"> kind of describing the</font>

842
00:32:32,230 --> 00:32:38,230
vulnerability with decent detail so i

843
00:32:36,670 --> 00:32:39,580
had to rip apart elasticsearch dig

844
00:32:38,230 --> 00:32:41,650
through the<font color="#E5E5E5"> changes to try to figure out</font>

845
00:32:39,580 --> 00:32:43,659
<font color="#E5E5E5">what happened what's causing</font><font color="#CCCCCC"> this to</font>

846
00:32:41,650 --> 00:32:46,210
occur and having to<font color="#E5E5E5"> reverse-engineer</font>

847
00:32:43,660 --> 00:32:47,620
that vulnerability to figure out what

848
00:32:46,210 --> 00:32:50,500
happened to<font color="#E5E5E5"> my box and so I wrote</font><font color="#CCCCCC"> about</font>

849
00:32:47,620 --> 00:32:52,989
it there the important thing to<font color="#CCCCCC"> note is</font>

850
00:32:50,500 --> 00:32:55,120
<font color="#E5E5E5">that oh and</font><font color="#CCCCCC"> by the way the way this</font><font color="#E5E5E5"> one</font>

851
00:32:52,990 --> 00:32:57,760
worked is that elasticsearch thought we

852
00:32:55,120 --> 00:33:00,010
should allow people to run arbitrary

853
00:32:57,760 --> 00:33:02,410
groovy scripts which is basically like

854
00:33:00,010 --> 00:33:04,640
<font color="#CCCCCC">Java and they had a sandbox which had a</font>

855
00:33:02,410 --> 00:33:07,320
black list of things that<font color="#E5E5E5"> you could run</font>

856
00:33:04,640 --> 00:33:08,970
and so it was pretty pretty easy to

857
00:33:07,320 --> 00:33:11,189
bypass you know and that's a pretty

858
00:33:08,970 --> 00:33:12,570
nasty design decision since job is

859
00:33:11,190 --> 00:33:15,240
pretty<font color="#CCCCCC"> powerful and you can do a</font><font color="#E5E5E5"> lot of</font>

860
00:33:12,570 --> 00:33:18,210
<font color="#E5E5E5">things</font><font color="#CCCCCC"> with it including owning the box</font>

861
00:33:15,240 --> 00:33:20,490
and this was an elastic searches first

862
00:33:18,210 --> 00:33:22,710
rodeo in fact they've<font color="#CCCCCC"> had three CVS</font>

863
00:33:20,490 --> 00:33:25,320
which all have unauthenticated remote

864
00:33:22,710 --> 00:33:28,169
code execution which at that point it's

865
00:33:25,320 --> 00:33:30,120
game over to everyone running even<font color="#CCCCCC"> the</font>

866
00:33:28,169 --> 00:33:32,760
<font color="#E5E5E5">most current version of elastic search</font>

867
00:33:30,120 --> 00:33:33,989
out there and<font color="#E5E5E5"> these are actively scanned</font>

868
00:33:32,760 --> 00:33:36,090
and<font color="#CCCCCC"> Exploited will see that here in a</font>

869
00:33:33,990 --> 00:33:37,679
second but the one the cool thing<font color="#CCCCCC"> about</font>

870
00:33:36,090 --> 00:33:39,750
elasticsearch is that there's some case

871
00:33:37,679 --> 00:33:41,039
studies where<font color="#CCCCCC"> it's really come back to</font>

872
00:33:39,750 --> 00:33:43,530
bite some people it's<font color="#CCCCCC"> been the</font>

873
00:33:41,039 --> 00:33:45,929
<font color="#E5E5E5">low-hanging fruit it's been the the easy</font>

874
00:33:43,530 --> 00:33:48,000
to exploit thing in the case of imager

875
00:33:45,929 --> 00:33:50,280
or imgur however you choose to pronounce

876
00:33:48,000 --> 00:33:52,590
it their bug<font color="#CCCCCC"> bounty someone found and</font>

877
00:33:50,280 --> 00:33:54,510
exposed elasticsearch instance manage

878
00:33:52,590 --> 00:33:57,480
that to get<font color="#E5E5E5"> credentials push their way</font>

879
00:33:54,510 --> 00:33:59,730
into the<font color="#E5E5E5"> fraud database the other one</font>

880
00:33:57,480 --> 00:34:01,710
was in verse offs hack this it was a

881
00:33:59,730 --> 00:34:04,320
company who put<font color="#E5E5E5"> out a here's how to set</font>

882
00:34:01,710 --> 00:34:06,299
<font color="#CCCCCC">up a secure server you should set it</font><font color="#E5E5E5"> up</font>

883
00:34:04,320 --> 00:34:08,580
in this way<font color="#CCCCCC"> we'll give you a macbook if</font>

884
00:34:06,299 --> 00:34:10,649
you can break in and so what someone did

885
00:34:08,580 --> 00:34:12,659
instead was they went after<font color="#E5E5E5"> the</font>

886
00:34:10,649 --> 00:34:15,839
company's infrastructure found an

887
00:34:12,659 --> 00:34:18,179
exposed elasticsearch instance pop that

888
00:34:15,839 --> 00:34:20,940
box use that to gain access to another

889
00:34:18,179 --> 00:34:22,918
<font color="#E5E5E5">system which gave them the I think we</font>

890
00:34:20,940 --> 00:34:25,560
think the reason why note give them the

891
00:34:22,918 --> 00:34:27,179
creds to<font color="#E5E5E5"> go into the actual panel that</font>

892
00:34:25,560 --> 00:34:30,418
was<font color="#E5E5E5"> running their secure server and</font>

893
00:34:27,179 --> 00:34:34,379
extract out that information they got

894
00:34:30,418 --> 00:34:36,089
the macbook so we talked about<font color="#E5E5E5"> it being</font>

895
00:34:34,379 --> 00:34:37,739
actively scan and<font color="#CCCCCC"> Exploited this is an</font>

896
00:34:36,089 --> 00:34:39,839
example and this is where elastic honey

897
00:34:37,739 --> 00:34:41,310
comes into play as soon as I found out

898
00:34:39,839 --> 00:34:42,929
what<font color="#CCCCCC"> was going on</font><font color="#E5E5E5"> I built this honey pot</font>

899
00:34:41,310 --> 00:34:44,699
to measure how much this is being

900
00:34:42,929 --> 00:34:47,429
exploited and it turned out it<font color="#E5E5E5"> was quite</font>

901
00:34:44,699 --> 00:34:51,149
a bit there were a<font color="#E5E5E5"> lot of actors trying</font>

902
00:34:47,429 --> 00:34:53,580
to exploit<font color="#CCCCCC"> the device download generic</font>

903
00:34:51,149 --> 00:34:56,129
you know malware that communicates back

904
00:34:53,580 --> 00:34:59,009
to a<font color="#E5E5E5"> CNC is just your standard IRC kind</font>

905
00:34:56,129 --> 00:35:00,890
of stuff but they had tens of thousands

906
00:34:59,010 --> 00:35:02,940
if<font color="#E5E5E5"> not hundreds of thousands of nodes</font>

907
00:35:00,890 --> 00:35:05,700
actively reporting to them in any given

908
00:35:02,940 --> 00:35:07,349
time this is<font color="#CCCCCC"> because no one really knew</font>

909
00:35:05,700 --> 00:35:09,910
to upgrade you know it wasn't really

910
00:35:07,349 --> 00:35:12,590
<font color="#E5E5E5">made known that this is an issue</font>

911
00:35:09,910 --> 00:35:14,060
and moving<font color="#CCCCCC"> forward we actually uh we did</font>

912
00:35:12,590 --> 00:35:16,340
some interesting work with<font color="#CCCCCC"> Redis result</font>

913
00:35:14,060 --> 00:35:20,090
we<font color="#E5E5E5"> talk about key value stores storing</font>

914
00:35:16,340 --> 00:35:22,160
data in in memory right but red is also

915
00:35:20,090 --> 00:35:25,250
stores in on disk and that's kind of

916
00:35:22,160 --> 00:35:26,990
advertised for persistence there's a

917
00:35:25,250 --> 00:35:30,010
<font color="#E5E5E5">problem with this whenever people decide</font>

918
00:35:26,990 --> 00:35:33,319
to run Redis as root which they do a lot

919
00:35:30,010 --> 00:35:37,130
because<font color="#E5E5E5"> then I can also remotely</font>

920
00:35:33,320 --> 00:35:40,400
configure Redis using its API I can tell

921
00:35:37,130 --> 00:35:43,310
it here's where I want you<font color="#E5E5E5"> to store your</font>

922
00:35:40,400 --> 00:35:44,660
copy of<font color="#E5E5E5"> the database on disk and so what</font>

923
00:35:43,310 --> 00:35:46,790
I'm going to do is an attacker and this

924
00:35:44,660 --> 00:35:48,259
is there's kind of some irony because

925
00:35:46,790 --> 00:35:50,720
the person who came up with this attack

926
00:35:48,260 --> 00:35:51,980
wrote Redis and so they published this

927
00:35:50,720 --> 00:35:54,439
blog post saying here's how you could

928
00:35:51,980 --> 00:35:56,450
hack<font color="#CCCCCC"> brightest and someone promptly you</font>

929
00:35:54,440 --> 00:35:59,690
know made it into a worm and owned all

930
00:35:56,450 --> 00:36:01,370
these Redis boxes but what they said is

931
00:35:59,690 --> 00:36:04,550
you could<font color="#E5E5E5"> store it in the authorized</font>

932
00:36:01,370 --> 00:36:05,900
<font color="#CCCCCC">keys file for the root user if I'm</font>

933
00:36:04,550 --> 00:36:09,080
running his route I have permission<font color="#CCCCCC"> to</font>

934
00:36:05,900 --> 00:36:11,210
right there and ssh whenever accepting

935
00:36:09,080 --> 00:36:13,610
an inbound connection it ignores any<font color="#E5E5E5"> any</font>

936
00:36:11,210 --> 00:36:16,610
garbage that's left over so what I'll do

937
00:36:13,610 --> 00:36:19,910
is I'll set a key and the value of<font color="#E5E5E5"> it is</font>

938
00:36:16,610 --> 00:36:21,860
going to<font color="#CCCCCC"> be my public key and so then I</font>

939
00:36:19,910 --> 00:36:23,569
can I have access<font color="#CCCCCC"> to the host I can just</font>

940
00:36:21,860 --> 00:36:25,760
ssh to it at that point and do whatever

941
00:36:23,570 --> 00:36:28,580
I want because Redis wrote my public key

942
00:36:25,760 --> 00:36:29,870
to the authorized<font color="#CCCCCC"> keys file and so</font><font color="#E5E5E5"> SSH</font>

943
00:36:28,580 --> 00:36:32,750
is going to honor it whenever I try to

944
00:36:29,870 --> 00:36:35,870
hop out of the box and<font color="#CCCCCC"> that gives you a</font>

945
00:36:32,750 --> 00:36:38,210
remote code execution so what we found

946
00:36:35,870 --> 00:36:40,190
is it it was<font color="#E5E5E5"> kind of an interesting case</font>

947
00:36:38,210 --> 00:36:42,470
people were breaking into Redis boxes

948
00:36:40,190 --> 00:36:44,960
and<font color="#E5E5E5"> then they were doing what i call</font>

949
00:36:42,470 --> 00:36:47,149
fake ransomware which means they deleted

950
00:36:44,960 --> 00:36:49,370
a whole bunch of files and left a ransom

951
00:36:47,150 --> 00:36:50,900
note saying if you want your files back

952
00:36:49,370 --> 00:36:52,850
you have<font color="#E5E5E5"> to pay us money and then we've</font>

953
00:36:50,900 --> 00:36:55,670
encrypted them and send them on to our

954
00:36:52,850 --> 00:36:57,259
own secure servers for storage we'll

955
00:36:55,670 --> 00:36:59,780
give them back to you after you pay the

956
00:36:57,260 --> 00:37:01,580
money in<font color="#E5E5E5"> Bitcoin the key is that if</font>

957
00:36:59,780 --> 00:37:03,980
you're a victim you don't know that they

958
00:37:01,580 --> 00:37:05,630
were deleted you think I mean in your

959
00:37:03,980 --> 00:37:08,060
mind if<font color="#CCCCCC"> you</font><font color="#E5E5E5"> don't have a backup you have</font>

960
00:37:05,630 --> 00:37:10,190
no other option than to say maybe they

961
00:37:08,060 --> 00:37:12,170
really did take the files<font color="#E5E5E5"> you know I</font>

962
00:37:10,190 --> 00:37:13,580
really<font color="#CCCCCC"> don't know because</font><font color="#E5E5E5"> chances are</font>

963
00:37:12,170 --> 00:37:15,220
they're not going<font color="#E5E5E5"> to have a</font><font color="#CCCCCC"> pcap running</font>

964
00:37:13,580 --> 00:37:17,630
<font color="#E5E5E5">on that server to see what's going on</font>

965
00:37:15,220 --> 00:37:18,788
fortunately we did we we made a honey

966
00:37:17,630 --> 00:37:19,749
pot again I kind<font color="#E5E5E5"> of</font>

967
00:37:18,789 --> 00:37:22,569
kind of my thing I kind<font color="#E5E5E5"> of like doing</font>

968
00:37:19,749 --> 00:37:24,098
<font color="#E5E5E5">that and we saw the attackers coming in</font>

969
00:37:22,569 --> 00:37:25,779
we<font color="#E5E5E5"> recorded the whole session and they</font>

970
00:37:24,099 --> 00:37:28,509
they were just deleting the files there

971
00:37:25,779 --> 00:37:33,099
were rmr effing entire directories and

972
00:37:28,509 --> 00:37:34,689
then dropping the ransom note this<font color="#E5E5E5"> one's</font>

973
00:37:33,099 --> 00:37:36,309
fun this was actually kind of good time

974
00:37:34,689 --> 00:37:40,689
for<font color="#CCCCCC"> me but crappy time for everyone has</font>

975
00:37:36,309 --> 00:37:41,589
memcache instance<font color="#E5E5E5"> uh two days ago I was</font>

976
00:37:40,689 --> 00:37:42,879
going to come up<font color="#CCCCCC"> here</font><font color="#E5E5E5"> and say you know</font>

977
00:37:41,589 --> 00:37:44,979
memcached actually has a really<font color="#E5E5E5"> good</font>

978
00:37:42,880 --> 00:37:46,150
track record and<font color="#E5E5E5"> it does you know as</font>

979
00:37:44,979 --> 00:37:49,569
we'll see people haven't really had a

980
00:37:46,150 --> 00:37:51,400
need<font color="#CCCCCC"> to upgrade memcached until today in</font>

981
00:37:49,569 --> 00:37:53,380
which case if<font color="#CCCCCC"> you have one stop</font>

982
00:37:51,400 --> 00:37:56,439
listening go upgrade your mem cached

983
00:37:53,380 --> 00:37:58,359
instance because Cisco's Talos team

984
00:37:56,439 --> 00:38:00,788
released multiple integer<font color="#CCCCCC"> overflow</font>

985
00:37:58,359 --> 00:38:03,788
vulnerabilities which can be exploited

986
00:38:00,789 --> 00:38:04,989
<font color="#E5E5E5">to get remote code execution so you just</font>

987
00:38:03,789 --> 00:38:07,359
have to fiddle with a<font color="#E5E5E5"> memory a little</font>

988
00:38:04,989 --> 00:38:10,029
bit<font color="#E5E5E5"> its exploit math that's above my</font>

989
00:38:07,359 --> 00:38:12,519
head but all<font color="#E5E5E5"> that being said this is a</font>

990
00:38:10,029 --> 00:38:14,169
perfect example in a great thing to look

991
00:38:12,519 --> 00:38:16,359
out for because<font color="#E5E5E5"> this will be weaponized</font>

992
00:38:14,169 --> 00:38:17,859
we talked about memcached being<font color="#E5E5E5"> vin</font>

993
00:38:16,359 --> 00:38:19,390
number one software that we're seeing

994
00:38:17,859 --> 00:38:22,449
out there with close to seventy seven

995
00:38:19,390 --> 00:38:24,098
thousand exposed instances as soon as

996
00:38:22,449 --> 00:38:26,499
someone releases a weaponized

997
00:38:24,099 --> 00:38:29,829
proof-of-concept it's going to be a bad

998
00:38:26,499 --> 00:38:32,229
day now<font color="#E5E5E5"> cisco already released proof of</font>

999
00:38:29,829 --> 00:38:34,329
concepts<font color="#E5E5E5"> that i can confirm i tested it</font>

1000
00:38:32,229 --> 00:38:36,578
myself they just they drop the box a

1001
00:38:34,329 --> 00:38:37,929
segfault it it's not meant<font color="#E5E5E5"> to run a</font>

1002
00:38:36,579 --> 00:38:40,809
command it's just meant<font color="#E5E5E5"> to show you hey</font>

1003
00:38:37,929 --> 00:38:42,609
this exists and<font color="#E5E5E5"> it'll crash or server so</font>

1004
00:38:40,809 --> 00:38:44,559
if<font color="#CCCCCC"> people really wanted to they could</font>

1005
00:38:42,609 --> 00:38:45,819
<font color="#E5E5E5">just go and drop every min cached</font>

1006
00:38:44,559 --> 00:38:49,839
instance out there<font color="#E5E5E5"> because the code</font>

1007
00:38:45,819 --> 00:38:51,219
<font color="#E5E5E5">already exists so all that being said</font>

1008
00:38:49,839 --> 00:38:53,799
let's take<font color="#CCCCCC"> a look</font><font color="#E5E5E5"> at the landscape what</font>

1009
00:38:51,219 --> 00:38:54,849
did<font color="#E5E5E5"> we find so here's Redis you may not</font>

1010
00:38:53,799 --> 00:38:57,159
<font color="#E5E5E5">always be</font><font color="#CCCCCC"> able</font><font color="#E5E5E5"> to see the vulnerable</font>

1011
00:38:54,849 --> 00:39:00,390
versions but I have them down at the

1012
00:38:57,159 --> 00:39:04,449
bottom kind of grouped by major release

1013
00:39:00,390 --> 00:39:07,029
so read it out that they<font color="#CCCCCC"> listened on</font><font color="#E5E5E5"> all</font>

1014
00:39:04,449 --> 00:39:08,769
in all all interfaces that people<font color="#E5E5E5"> run of</font>

1015
00:39:07,029 --> 00:39:10,390
this route and that they don't put

1016
00:39:08,769 --> 00:39:12,098
authentication in front of it and people

1017
00:39:10,390 --> 00:39:14,408
are having<font color="#E5E5E5"> a</font><font color="#CCCCCC"> problem they put</font><font color="#E5E5E5"> in</font>

1018
00:39:12,099 --> 00:39:16,179
something called<font color="#E5E5E5"> protected mode this is</font>

1019
00:39:14,409 --> 00:39:18,309
just<font color="#E5E5E5"> where if it sees all three of those</font>

1020
00:39:16,179 --> 00:39:20,499
it immediately drops you down to

1021
00:39:18,309 --> 00:39:22,839
localhost only until you set a specific

1022
00:39:20,499 --> 00:39:26,319
flag that says<font color="#E5E5E5"> I really want to get</font>

1023
00:39:22,839 --> 00:39:27,840
owned right so that's so that's whenever

1024
00:39:26,319 --> 00:39:31,560
<font color="#E5E5E5">protected mode came out let's see</font>

1025
00:39:27,840 --> 00:39:34,560
who all has that as an option so all of

1026
00:39:31,560 --> 00:39:36,480
those do<font color="#CCCCCC"> not have that as an option in a</font>

1027
00:39:34,560 --> 00:39:40,160
majority of those<font color="#E5E5E5"> are going to be</font>

1028
00:39:36,480 --> 00:39:42,780
<font color="#E5E5E5">running his route and are already owned</font>

1029
00:39:40,160 --> 00:39:44,670
let's talk about elasticsearch this is

1030
00:39:42,780 --> 00:39:47,910
actually<font color="#E5E5E5"> a pretty good story it's not as</font>

1031
00:39:44,670 --> 00:39:49,410
<font color="#E5E5E5">bad because the vulnerable versions or</font>

1032
00:39:47,910 --> 00:39:50,850
you know it's not<font color="#E5E5E5"> as much people</font><font color="#CCCCCC"> are</font>

1033
00:39:49,410 --> 00:39:53,129
actually upgrading elasticsearch much

1034
00:39:50,850 --> 00:39:54,600
better now after the first two initial

1035
00:39:53,130 --> 00:39:59,160
remote code execution vulnerabilities

1036
00:39:54,600 --> 00:40:02,520
came out and finally let's look at mem

1037
00:39:59,160 --> 00:40:04,170
cached this is kind of fun before<font color="#CCCCCC"> we</font>

1038
00:40:02,520 --> 00:40:06,540
<font color="#E5E5E5">talk about how many are vulnerable</font>

1039
00:40:04,170 --> 00:40:07,680
because<font color="#E5E5E5"> I'm sure you can</font><font color="#CCCCCC"> guess let's</font>

1040
00:40:06,540 --> 00:40:09,330
look at what the landscape looks like

1041
00:40:07,680 --> 00:40:10,529
now these are the<font color="#E5E5E5"> years you don't have</font>

1042
00:40:09,330 --> 00:40:12,960
to even know<font color="#E5E5E5"> the version numbers these</font>

1043
00:40:10,530 --> 00:40:15,180
are the years that they came<font color="#E5E5E5"> out</font><font color="#CCCCCC"> and so</font>

1044
00:40:12,960 --> 00:40:18,600
you'll see<font color="#CCCCCC"> the top two came out in 2009</font>

1045
00:40:15,180 --> 00:40:20,220
7 years ago<font color="#E5E5E5"> people haven't really needed</font>

1046
00:40:18,600 --> 00:40:21,960
to<font color="#E5E5E5"> upgrade them because in the pastures</font>

1047
00:40:20,220 --> 00:40:23,970
never really been an urgent need to<font color="#E5E5E5"> do</font>

1048
00:40:21,960 --> 00:40:25,860
<font color="#CCCCCC">that I'm sure there's performance and</font>

1049
00:40:23,970 --> 00:40:30,089
improvement source functionality but who

1050
00:40:25,860 --> 00:40:33,440
cares about<font color="#E5E5E5"> that it works right so in</font>

1051
00:40:30,090 --> 00:40:35,850
terms<font color="#E5E5E5"> of being vulnerable all of them</font>

1052
00:40:33,440 --> 00:40:37,860
every single version that you<font color="#E5E5E5"> see is</font>

1053
00:40:35,850 --> 00:40:40,740
included in the one that's vulnerable to

1054
00:40:37,860 --> 00:40:42,300
remote code execution so<font color="#E5E5E5"> I can't stress</font>

1055
00:40:40,740 --> 00:40:44,850
this enough keep on<font color="#CCCCCC"> the lookout and</font>

1056
00:40:42,300 --> 00:40:46,650
that's three examples we didn't want<font color="#CCCCCC"> to</font>

1057
00:40:44,850 --> 00:40:49,350
<font color="#E5E5E5">go into all</font><font color="#CCCCCC"> of them cassandra also had</font>

1058
00:40:46,650 --> 00:40:51,050
one because it allowed for system

1059
00:40:49,350 --> 00:40:53,400
commands to be<font color="#E5E5E5"> sent over their</font><font color="#CCCCCC"> api</font>

1060
00:40:51,050 --> 00:40:56,880
listen on all interfaces and<font color="#E5E5E5"> their</font><font color="#CCCCCC"> own</font>

1061
00:40:53,400 --> 00:40:58,560
<font color="#CCCCCC">authenticated so what's the what's</font>

1062
00:40:56,880 --> 00:41:00,570
what's<font color="#E5E5E5"> the root cause right why does</font>

1063
00:40:58,560 --> 00:41:02,160
this happen and<font color="#CCCCCC"> we'll kind</font><font color="#E5E5E5"> of move</font>

1064
00:41:00,570 --> 00:41:03,750
forward in the interest of time<font color="#E5E5E5"> but in a</font>

1065
00:41:02,160 --> 00:41:05,910
nutshell we've talked about<font color="#E5E5E5"> it default</font>

1066
00:41:03,750 --> 00:41:07,890
configs listen everywhere there is no

1067
00:41:05,910 --> 00:41:09,680
authentication being configured some

1068
00:41:07,890 --> 00:41:12,480
support it but they're not configured

1069
00:41:09,680 --> 00:41:14,279
the software<font color="#CCCCCC"> is</font><font color="#E5E5E5"> still kind of new is</font>

1070
00:41:12,480 --> 00:41:16,860
lacking a little bit<font color="#E5E5E5"> of that maturity</font>

1071
00:41:14,280 --> 00:41:18,330
that<font color="#CCCCCC"> it is gaining over time and at the</font>

1072
00:41:16,860 --> 00:41:21,210
<font color="#E5E5E5">end of the day whenever you follow the</font>

1073
00:41:18,330 --> 00:41:23,400
<font color="#CCCCCC">QuickStart it works it just</font><font color="#E5E5E5"> works it</font>

1074
00:41:21,210 --> 00:41:25,410
does what the business<font color="#E5E5E5"> needs security</font>

1075
00:41:23,400 --> 00:41:27,420
the<font color="#CCCCCC"> security section is always at the</font>

1076
00:41:25,410 --> 00:41:29,339
bottom after the<font color="#E5E5E5"> QuickStart so many</font>

1077
00:41:27,420 --> 00:41:32,550
people probably don't get there and they

1078
00:41:29,340 --> 00:41:33,570
just<font color="#E5E5E5"> leave their box open now it's</font>

1079
00:41:32,550 --> 00:41:34,800
important to note<font color="#CCCCCC"> that things are</font>

1080
00:41:33,570 --> 00:41:36,480
<font color="#CCCCCC">getting better you know we've talked</font>

1081
00:41:34,800 --> 00:41:37,440
about<font color="#E5E5E5"> you know things are burning things</font>

1082
00:41:36,480 --> 00:41:40,050
are<font color="#E5E5E5"> things there's a</font>

1083
00:41:37,440 --> 00:41:41,760
problem but in the grand scheme of

1084
00:41:40,050 --> 00:41:43,950
things things are getting better we are

1085
00:41:41,760 --> 00:41:46,790
seeing the number of<font color="#E5E5E5"> available instances</font>

1086
00:41:43,950 --> 00:41:48,919
go down and<font color="#E5E5E5"> this isn't</font><font color="#CCCCCC"> like the scale of</font>

1087
00:41:46,790 --> 00:41:52,290
let's<font color="#E5E5E5"> just call like</font><font color="#CCCCCC"> Internet of Things</font>

1088
00:41:48,920 --> 00:41:54,260
right which<font color="#CCCCCC"> is a catastrophic trainwreck</font>

1089
00:41:52,290 --> 00:41:57,180
happening<font color="#CCCCCC"> in</font><font color="#E5E5E5"> slow motion all around us</font>

1090
00:41:54,260 --> 00:41:59,250
this isn't as bad right and<font color="#CCCCCC"> people are</font>

1091
00:41:57,180 --> 00:42:01,049
<font color="#E5E5E5">starting to wise up these breaches and</font>

1092
00:41:59,250 --> 00:42:04,349
these these exposed data are wising

1093
00:42:01,050 --> 00:42:05,970
people up to<font color="#E5E5E5"> I should review if my date</font>

1094
00:42:04,349 --> 00:42:08,730
is exposed so we're seeing things

1095
00:42:05,970 --> 00:42:10,799
improved we're also seeing it in the

1096
00:42:08,730 --> 00:42:13,319
<font color="#E5E5E5">software itself like I mentioned right</font>

1097
00:42:10,800 --> 00:42:15,119
us has a protected mode we're also

1098
00:42:13,319 --> 00:42:16,800
seeing default config start to<font color="#E5E5E5"> listen on</font>

1099
00:42:15,119 --> 00:42:19,349
localhost which is a huge improvement

1100
00:42:16,800 --> 00:42:22,560
<font color="#E5E5E5">because by default now everyone can't</font>

1101
00:42:19,349 --> 00:42:24,510
get to it large data breaches are being

1102
00:42:22,560 --> 00:42:27,690
cleaned up in software is becoming more

1103
00:42:24,510 --> 00:42:30,150
mature so let's talk about<font color="#E5E5E5"> how to</font>

1104
00:42:27,690 --> 00:42:32,609
<font color="#E5E5E5">protect yourself in a nutshell it comes</font>

1105
00:42:30,150 --> 00:42:34,349
down to basic security hygiene all those

1106
00:42:32,609 --> 00:42:35,819
things that<font color="#E5E5E5"> we talked about just make</font>

1107
00:42:34,349 --> 00:42:37,710
sure<font color="#CCCCCC"> that you're not</font><font color="#E5E5E5"> doing that you know</font>

1108
00:42:35,819 --> 00:42:39,599
<font color="#E5E5E5">make</font><font color="#CCCCCC"> sure that if you don't</font><font color="#E5E5E5"> need your</font>

1109
00:42:37,710 --> 00:42:41,819
data exposed externally don't<font color="#E5E5E5"> make it</font>

1110
00:42:39,599 --> 00:42:43,500
exposed externally a lot<font color="#E5E5E5"> of these</font>

1111
00:42:41,819 --> 00:42:45,240
<font color="#E5E5E5">technologies have authentication in</font>

1112
00:42:43,500 --> 00:42:47,730
front of<font color="#E5E5E5"> them use the authentication</font>

1113
00:42:45,240 --> 00:42:49,229
<font color="#E5E5E5">repair them find their security best</font>

1114
00:42:47,730 --> 00:42:50,849
practices and run<font color="#E5E5E5"> through that list and</font>

1115
00:42:49,230 --> 00:42:52,740
<font color="#E5E5E5">make sure that you're doing</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> and</font>

1116
00:42:50,849 --> 00:42:54,829
constantly check for new additions as

1117
00:42:52,740 --> 00:42:56,700
they come<font color="#E5E5E5"> out and upgrade your software</font>

1118
00:42:54,829 --> 00:42:58,410
if you want to do any kind of future

1119
00:42:56,700 --> 00:43:00,270
work showed it has a nice page where

1120
00:42:58,410 --> 00:43:01,440
they list their searches right there for

1121
00:43:00,270 --> 00:43:03,710
you you<font color="#CCCCCC"> don't have to know the syntax</font>

1122
00:43:01,440 --> 00:43:05,520
you can just click the button and

1123
00:43:03,710 --> 00:43:08,190
finally I include some helpful resources

1124
00:43:05,520 --> 00:43:10,109
so these are links to the security best

1125
00:43:08,190 --> 00:43:12,390
practices for each of those products<font color="#E5E5E5"> if</font>

1126
00:43:10,109 --> 00:43:13,589
any of those are<font color="#E5E5E5"> being used by your</font>

1127
00:43:12,390 --> 00:43:17,400
organization feel free to poke through

1128
00:43:13,589 --> 00:43:19,140
those so see the right on time let's

1129
00:43:17,400 --> 00:43:20,490
open up the floor whatever<font color="#E5E5E5"> questions you</font>

1130
00:43:19,140 --> 00:43:22,970
have thank you all for coming<font color="#E5E5E5"> to the</font>

1131
00:43:20,490 --> 00:43:22,970
talk by the way

1132
00:43:27,240 --> 00:43:29,299
you

