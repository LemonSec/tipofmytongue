1
00:00:02,990 --> 00:00:21,519
[Music]

2
00:00:17,910 --> 00:00:24,970
and everyone hear me okay awesome<font color="#CCCCCC"> hi</font>

3
00:00:21,519 --> 00:00:28,060
<font color="#E5E5E5">everyone</font><font color="#CCCCCC"> so about</font><font color="#E5E5E5"> me not gonna bore you</font>

4
00:00:24,970 --> 00:00:31,810
<font color="#E5E5E5">with that bit but gocubs anyone in here</font>

5
00:00:28,060 --> 00:00:34,839
a Cubs fan<font color="#E5E5E5"> come on</font><font color="#CCCCCC"> woo</font><font color="#E5E5E5"> sports ball</font>

6
00:00:31,810 --> 00:00:38,199
<font color="#CCCCCC">alright so I work for a</font><font color="#E5E5E5"> company called</font>

7
00:00:34,839 --> 00:00:43,390
slack<font color="#CCCCCC"> who here doesn't</font><font color="#E5E5E5"> know what slack</font>

8
00:00:38,199 --> 00:00:46,540
is okay<font color="#E5E5E5"> so it's a we sell men's pants</font>

9
00:00:43,390 --> 00:00:48,790
online<font color="#CCCCCC"> as what slack does</font><font color="#E5E5E5"> know we all</font>

10
00:00:46,540 --> 00:00:50,350
know it's just<font color="#E5E5E5"> web IRC so I'll just move</font>

11
00:00:48,790 --> 00:00:52,390
on here there's some additional

12
00:00:50,350 --> 00:00:54,010
<font color="#CCCCCC">information at the end of this talk it's</font>

13
00:00:52,390 --> 00:00:55,839
in the form of<font color="#E5E5E5"> a github gist don't</font>

14
00:00:54,010 --> 00:00:57,489
bother<font color="#E5E5E5"> trying to write down notes or</font>

15
00:00:55,839 --> 00:00:59,559
links I didn't put any in here<font color="#E5E5E5"> they're</font>

16
00:00:57,489 --> 00:01:03,099
all in the gist at the end to save you

17
00:00:59,559 --> 00:01:04,929
some<font color="#E5E5E5"> time did anyone</font><font color="#CCCCCC"> here</font><font color="#E5E5E5"> I wrote a blog</font>

18
00:01:03,100 --> 00:01:06,610
<font color="#CCCCCC">post back in March of</font><font color="#E5E5E5"> this year called</font>

19
00:01:04,930 --> 00:01:10,150
distributed security alerting did anyone

20
00:01:06,610 --> 00:01:13,630
happen<font color="#E5E5E5"> to see that</font><font color="#CCCCCC"> so cool so</font><font color="#E5E5E5"> so this</font>

21
00:01:10,150 --> 00:01:15,130
talk has some bits from that expands on

22
00:01:13,630 --> 00:01:16,149
it a bit<font color="#E5E5E5"> but you should you should take</font>

23
00:01:15,130 --> 00:01:17,890
a look at<font color="#E5E5E5"> it when you have some time</font>

24
00:01:16,150 --> 00:01:19,720
it's a really<font color="#E5E5E5"> quick read and it just</font>

25
00:01:17,890 --> 00:01:20,500
talks about<font color="#E5E5E5"> how we implemented</font><font color="#CCCCCC"> some of</font>

26
00:01:19,720 --> 00:01:22,840
<font color="#E5E5E5">this stuff</font>

27
00:01:20,500 --> 00:01:25,600
one other thing is next<font color="#E5E5E5"> week at a</font><font color="#CCCCCC"> rally</font>

28
00:01:22,840 --> 00:01:26,950
<font color="#E5E5E5">Amsterdam we're gonna be releasing some</font>

29
00:01:25,600 --> 00:01:28,179
<font color="#CCCCCC">of the tools I'm</font><font color="#E5E5E5"> talking about finally</font>

30
00:01:26,950 --> 00:01:31,300
so I've<font color="#CCCCCC"> been promising this for about</font>

31
00:01:28,180 --> 00:01:32,729
<font color="#E5E5E5">six</font><font color="#CCCCCC"> months and now it's actually finally</font>

32
00:01:31,300 --> 00:01:36,460
happening because there's a deadline<font color="#CCCCCC"> so</font>

33
00:01:32,729 --> 00:01:39,280
so look<font color="#E5E5E5"> for</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> next week I want to</font>

34
00:01:36,460 --> 00:01:43,030
<font color="#E5E5E5">start the talk by by doing</font><font color="#CCCCCC"> a little</font>

35
00:01:39,280 --> 00:01:44,830
<font color="#E5E5E5">discussion about breaches how does a</font>

36
00:01:43,030 --> 00:01:47,200
<font color="#CCCCCC">company know when it's been hacked</font><font color="#E5E5E5"> this</font>

37
00:01:44,830 --> 00:01:49,570
is rhetorical there are a<font color="#E5E5E5"> few ways and</font>

38
00:01:47,200 --> 00:01:52,720
I'm<font color="#CCCCCC"> gonna order these from</font><font color="#E5E5E5"> what I think</font>

39
00:01:49,570 --> 00:01:54,699
is sort of<font color="#E5E5E5"> best case</font><font color="#CCCCCC"> to worst case so</font>

40
00:01:52,720 --> 00:01:56,950
the<font color="#E5E5E5"> best case</font><font color="#CCCCCC"> to me is the company's</font>

41
00:01:54,700 --> 00:01:59,440
employees<font color="#E5E5E5"> notice something strange</font><font color="#CCCCCC"> this</font>

42
00:01:56,950 --> 00:02:01,650
<font color="#E5E5E5">is best case because it means that</font><font color="#CCCCCC"> maybe</font>

43
00:01:59,440 --> 00:02:04,390
your tooling worked and caught something

44
00:02:01,650 --> 00:02:06,580
but but regardless<font color="#E5E5E5"> of</font><font color="#CCCCCC"> how you how you</font>

45
00:02:04,390 --> 00:02:09,220
noticed the best thing about this<font color="#E5E5E5"> is you</font>

46
00:02:06,580 --> 00:02:12,310
control<font color="#CCCCCC"> the messaging</font><font color="#E5E5E5"> you you don't have</font>

47
00:02:09,220 --> 00:02:14,049
<font color="#E5E5E5">to</font><font color="#CCCCCC"> worry</font><font color="#E5E5E5"> about rushing to to notify that</font>

48
00:02:12,310 --> 00:02:15,819
<font color="#E5E5E5">kind</font><font color="#CCCCCC"> of thing well you do in some cases</font>

49
00:02:14,049 --> 00:02:18,310
but you<font color="#E5E5E5"> you basically have a lot of</font>

50
00:02:15,819 --> 00:02:20,200
advantages<font color="#CCCCCC"> here that you</font><font color="#E5E5E5"> don't have if a</font>

51
00:02:18,310 --> 00:02:22,629
<font color="#E5E5E5">third party contacts the company because</font>

52
00:02:20,200 --> 00:02:26,799
they<font color="#E5E5E5"> notice something</font><font color="#CCCCCC"> strange here nose</font>

53
00:02:22,629 --> 00:02:28,870
crabs<font color="#E5E5E5"> or of crabs yeah so hearing from</font>

54
00:02:26,800 --> 00:02:30,819
Brian<font color="#E5E5E5"> crabs he's an amazingly nice nice</font>

55
00:02:28,870 --> 00:02:32,709
person<font color="#E5E5E5"> but hearing from Brian crabs</font>

56
00:02:30,819 --> 00:02:34,149
not something<font color="#CCCCCC"> most people you know</font><font color="#E5E5E5"> what</font>

57
00:02:32,709 --> 00:02:37,689
<font color="#E5E5E5">they don't want</font><font color="#CCCCCC"> an email</font><font color="#E5E5E5"> or a call from</font>

58
00:02:34,150 --> 00:02:39,189
<font color="#E5E5E5">Brian</font><font color="#CCCCCC"> and and so a third party party</font>

59
00:02:37,689 --> 00:02:41,499
noticing something<font color="#E5E5E5"> strange isn't great</font>

60
00:02:39,189 --> 00:02:44,200
<font color="#E5E5E5">because it means that the effects of the</font>

61
00:02:41,499 --> 00:02:49,120
breach have probably extended beyond<font color="#E5E5E5"> a</font>

62
00:02:44,200 --> 00:02:51,159
small group or your company this<font color="#E5E5E5"> is this</font>

63
00:02:49,120 --> 00:02:53,709
is worse

64
00:02:51,159 --> 00:02:54,608
so hackers<font color="#E5E5E5"> contact the company because</font>

65
00:02:53,709 --> 00:02:56,799
they want them<font color="#CCCCCC"> to</font><font color="#E5E5E5"> notice something</font>

66
00:02:54,609 --> 00:02:58,810
<font color="#E5E5E5">strange</font><font color="#CCCCCC"> I mean if you're in this</font><font color="#E5E5E5"> thing</font>

67
00:02:56,799 --> 00:02:59,919
<font color="#CCCCCC">that means</font><font color="#E5E5E5"> they've done whatever the</font>

68
00:02:58,810 --> 00:03:03,780
heck they want<font color="#E5E5E5"> to do and now they're</font>

69
00:02:59,919 --> 00:03:06,569
<font color="#CCCCCC">showing off don't</font><font color="#E5E5E5"> don't be in this state</font>

70
00:03:03,780 --> 00:03:10,389
but<font color="#E5E5E5"> guess what there's</font><font color="#CCCCCC"> one that's worse</font>

71
00:03:06,569 --> 00:03:12,429
<font color="#E5E5E5">they don't so I I don't want to be a</font>

72
00:03:10,389 --> 00:03:13,750
security nihilist but you know we we

73
00:03:12,430 --> 00:03:15,340
probably all<font color="#E5E5E5"> realized</font><font color="#CCCCCC"> that there are a</font>

74
00:03:13,750 --> 00:03:18,250
<font color="#CCCCCC">number of companies out</font><font color="#E5E5E5"> there that have</font>

75
00:03:15,340 --> 00:03:20,230
<font color="#E5E5E5">ongoing breaches and probably have no</font>

76
00:03:18,250 --> 00:03:22,239
idea<font color="#CCCCCC"> this is happening</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> know it's</font>

77
00:03:20,230 --> 00:03:23,798
it's<font color="#E5E5E5"> just kind of the landscape we deal</font>

78
00:03:22,239 --> 00:03:26,620
with<font color="#E5E5E5"> these days but this to me is the</font>

79
00:03:23,799 --> 00:03:28,209
<font color="#E5E5E5">worst case because it means the hackers</font>

80
00:03:26,620 --> 00:03:29,739
could notify<font color="#E5E5E5"> you anytime</font><font color="#CCCCCC"> like</font><font color="#E5E5E5"> you know</font>

81
00:03:28,209 --> 00:03:31,480
there are a lot<font color="#CCCCCC"> of things but it just</font>

82
00:03:29,739 --> 00:03:32,739
<font color="#CCCCCC">means that you have</font><font color="#E5E5E5"> absolutely</font><font color="#CCCCCC"> no</font>

83
00:03:31,480 --> 00:03:34,840
control<font color="#CCCCCC"> over this</font><font color="#E5E5E5"> you also have no</font>

84
00:03:32,739 --> 00:03:35,680
chance<font color="#E5E5E5"> to remediate anything here</font>

85
00:03:34,840 --> 00:03:38,889
<font color="#E5E5E5">because you don't even know what's</font>

86
00:03:35,680 --> 00:03:42,489
happening the important factor<font color="#CCCCCC"> here is</font>

87
00:03:38,889 --> 00:03:44,620
time<font color="#E5E5E5"> and and by the way I was I gave</font>

88
00:03:42,489 --> 00:03:47,259
<font color="#E5E5E5">this talk recently that's that's the</font>

89
00:03:44,620 --> 00:03:49,750
clock in front of Big Ben I was<font color="#E5E5E5"> wrong</font>

90
00:03:47,259 --> 00:03:53,319
Big Ben is not<font color="#E5E5E5"> the tower or the clock</font>

91
00:03:49,750 --> 00:03:54,970
it's the<font color="#CCCCCC"> Bell so fun fact I</font><font color="#E5E5E5"> got that</font>

92
00:03:53,319 --> 00:03:58,060
wrong<font color="#E5E5E5"> last time somebody</font><font color="#CCCCCC"> from the UK</font>

93
00:03:54,970 --> 00:04:00,579
corrected me and now<font color="#CCCCCC"> I didn't mention</font>

94
00:03:58,060 --> 00:04:03,099
their name I'm sorry so how did<font color="#CCCCCC"> it get</font>

95
00:04:00,579 --> 00:04:04,180
in this is this is also important how

96
00:04:03,099 --> 00:04:06,250
<font color="#E5E5E5">many people here think</font><font color="#CCCCCC"> it's super</font>

97
00:04:04,180 --> 00:04:12,220
hackers our super hackers breaking<font color="#CCCCCC"> into</font>

98
00:04:06,250 --> 00:04:18,759
things not even<font color="#CCCCCC"> one person</font><font color="#E5E5E5"> yes sir</font>

99
00:04:12,220 --> 00:04:20,858
I disagree so so it's not super<font color="#E5E5E5"> accurate</font>

100
00:04:18,759 --> 00:04:22,990
<font color="#CCCCCC">it's it's not</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> guy with the the</font>

101
00:04:20,858 --> 00:04:26,080
laptop and the the<font color="#E5E5E5"> balaclava and</font>

102
00:04:22,990 --> 00:04:28,419
everything sitting<font color="#CCCCCC"> is</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> board it's</font>

103
00:04:26,080 --> 00:04:31,090
it's it's usually much simpler than<font color="#CCCCCC"> that</font>

104
00:04:28,419 --> 00:04:32,830
<font color="#CCCCCC">this</font><font color="#E5E5E5"> is a contentious report that comes</font>

105
00:04:31,090 --> 00:04:34,989
out<font color="#CCCCCC"> every year</font><font color="#E5E5E5"> but one thing it</font><font color="#CCCCCC"> seems to</font>

106
00:04:32,830 --> 00:04:36,699
say every year<font color="#CCCCCC"> is</font><font color="#E5E5E5"> that most of these</font>

107
00:04:34,990 --> 00:04:39,849
<font color="#E5E5E5">breaches are due to very simple things</font>

108
00:04:36,699 --> 00:04:42,460
like credential theft if<font color="#E5E5E5"> you're if</font>

109
00:04:39,849 --> 00:04:43,719
<font color="#E5E5E5">you're an attacker</font><font color="#CCCCCC"> it's a lot easier to</font>

110
00:04:42,460 --> 00:04:46,090
steal someone's<font color="#E5E5E5"> password</font>

111
00:04:43,720 --> 00:04:48,610
than to write a<font color="#CCCCCC"> zero-day exploit</font><font color="#E5E5E5"> for</font>

112
00:04:46,090 --> 00:04:50,859
<font color="#CCCCCC">Chrome so just a fact of how</font><font color="#E5E5E5"> things</font><font color="#CCCCCC"> work</font>

113
00:04:48,610 --> 00:04:56,380
<font color="#E5E5E5">and this is this is what leads to a lot</font>

114
00:04:50,860 --> 00:04:59,650
<font color="#CCCCCC">of this stuff so this is an amazing</font>

115
00:04:56,380 --> 00:05:01,210
<font color="#CCCCCC">vector graphic and the NSA's</font><font color="#E5E5E5"> graphics</font>

116
00:04:59,650 --> 00:05:02,650
<font color="#CCCCCC">department did an amazing job because</font>

117
00:05:01,210 --> 00:05:05,739
every<font color="#CCCCCC"> time</font><font color="#E5E5E5"> I show this slide</font><font color="#CCCCCC"> I'm</font>

118
00:05:02,650 --> 00:05:08,530
<font color="#E5E5E5">impressed how good it looks</font><font color="#CCCCCC"> and you know</font>

119
00:05:05,740 --> 00:05:11,620
great<font color="#CCCCCC"> PR on their part the reason it's</font>

120
00:05:08,530 --> 00:05:13,479
on<font color="#E5E5E5"> here did anyone see the talk from the</font>

121
00:05:11,620 --> 00:05:17,290
head<font color="#E5E5E5"> of tailored access operations at</font>

122
00:05:13,480 --> 00:05:19,570
<font color="#E5E5E5">enigma or or see the video of it</font><font color="#CCCCCC"> cool so</font>

123
00:05:17,290 --> 00:05:21,700
so<font color="#E5E5E5"> not a lot</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> people that I've spoken</font>

124
00:05:19,570 --> 00:05:24,370
<font color="#E5E5E5">to</font><font color="#CCCCCC"> have seen</font><font color="#E5E5E5"> this talk and I highly</font>

125
00:05:21,700 --> 00:05:26,409
<font color="#E5E5E5">recommend</font><font color="#CCCCCC"> checking</font><font color="#E5E5E5"> it out it's it's in</font>

126
00:05:24,370 --> 00:05:28,270
the notes at the<font color="#E5E5E5"> end and it's I</font><font color="#CCCCCC"> think</font>

127
00:05:26,410 --> 00:05:31,180
it's 20 or<font color="#E5E5E5"> 30 minutes</font><font color="#CCCCCC"> really good talk</font>

128
00:05:28,270 --> 00:05:32,919
<font color="#E5E5E5">but what it points</font><font color="#CCCCCC"> out is that the</font><font color="#E5E5E5"> NSA</font>

129
00:05:31,180 --> 00:05:35,110
doesn't use zero data break into<font color="#CCCCCC"> your</font>

130
00:05:32,920 --> 00:05:37,260
systems<font color="#CCCCCC"> they study your network they</font>

131
00:05:35,110 --> 00:05:39,669
understand it better<font color="#CCCCCC"> than you do they</font>

132
00:05:37,260 --> 00:05:42,190
<font color="#E5E5E5">they wait</font><font color="#CCCCCC"> for you to do something wrong</font>

133
00:05:39,669 --> 00:05:43,539
like hey a vendor needs<font color="#CCCCCC"> access to this</font>

134
00:05:42,190 --> 00:05:45,640
temporarily so we'll just<font color="#CCCCCC"> open it real</font>

135
00:05:43,540 --> 00:05:47,760
quick<font color="#CCCCCC"> I just look for that</font><font color="#E5E5E5"> and then when</font>

136
00:05:45,640 --> 00:05:50,320
you've opened it<font color="#E5E5E5"> oh hey thanks we're in</font>

137
00:05:47,760 --> 00:05:51,969
<font color="#CCCCCC">this</font><font color="#E5E5E5"> isn't to say</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> the NSA should be</font>

138
00:05:50,320 --> 00:05:56,020
in<font color="#CCCCCC"> your threat model it actually really</font>

139
00:05:51,970 --> 00:05:58,330
shouldn't but it's that easy<font color="#E5E5E5"> for them to</font>

140
00:05:56,020 --> 00:06:00,190
<font color="#CCCCCC">break in and it's that easy</font><font color="#E5E5E5"> for a lot</font><font color="#CCCCCC"> of</font>

141
00:05:58,330 --> 00:06:02,320
adversaries to do this exact<font color="#CCCCCC"> same thing</font>

142
00:06:00,190 --> 00:06:04,060
<font color="#CCCCCC">so watch that</font><font color="#E5E5E5"> talk because it's</font>

143
00:06:02,320 --> 00:06:08,440
practical<font color="#CCCCCC"> beyond just</font><font color="#E5E5E5"> protecting you</font>

144
00:06:04,060 --> 00:06:10,630
from the NSA<font color="#E5E5E5"> the rest of talk is is sort</font>

145
00:06:08,440 --> 00:06:13,600
<font color="#CCCCCC">of one example of what</font><font color="#E5E5E5"> we do for</font>

146
00:06:10,630 --> 00:06:14,950
<font color="#CCCCCC">security monitoring this is a rough</font>

147
00:06:13,600 --> 00:06:17,080
breakdown of what we're gonna go through

148
00:06:14,950 --> 00:06:22,599
and and there should be<font color="#CCCCCC"> plenty of time</font>

149
00:06:17,080 --> 00:06:24,969
for Q at the<font color="#E5E5E5"> end r0 getting started so I</font>

150
00:06:22,600 --> 00:06:28,930
was the the first<font color="#E5E5E5"> security employee at</font>

151
00:06:24,970 --> 00:06:31,180
<font color="#E5E5E5">slack back in October of 2014 there were</font>

152
00:06:28,930 --> 00:06:33,130
50<font color="#E5E5E5"> people there</font><font color="#CCCCCC"> and and</font><font color="#E5E5E5"> it was small</font><font color="#CCCCCC"> and</font>

153
00:06:31,180 --> 00:06:35,620
<font color="#E5E5E5">one of the nice things</font><font color="#CCCCCC"> about this was it</font>

154
00:06:33,130 --> 00:06:37,750
was<font color="#CCCCCC"> very greenfield this the group that</font>

155
00:06:35,620 --> 00:06:40,180
created slack is actually the the folks

156
00:06:37,750 --> 00:06:41,830
that<font color="#E5E5E5"> created Flickr and and some other</font>

157
00:06:40,180 --> 00:06:43,270
<font color="#E5E5E5">stuff so they dealt with like you</font><font color="#CCCCCC"> know</font>

158
00:06:41,830 --> 00:06:45,609
web vulnerabilities they actually had a

159
00:06:43,270 --> 00:06:47,740
pretty<font color="#E5E5E5"> good grasp on you know don't</font>

160
00:06:45,610 --> 00:06:48,970
<font color="#E5E5E5">excess use CSRF crumbs all this stuff</font>

161
00:06:47,740 --> 00:06:51,789
<font color="#E5E5E5">right they were doing a lot of things</font>

162
00:06:48,970 --> 00:06:54,010
really<font color="#E5E5E5"> well</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> that was part of what</font><font color="#CCCCCC"> I</font>

163
00:06:51,789 --> 00:06:55,810
really<font color="#E5E5E5"> liked about it the other</font><font color="#CCCCCC"> thing</font>

164
00:06:54,010 --> 00:06:57,340
<font color="#CCCCCC">here is that with Greenfield you don't</font>

165
00:06:55,810 --> 00:06:59,139
have to deal<font color="#CCCCCC"> with legacy systems and</font>

166
00:06:57,340 --> 00:07:01,210
it's great you can just start fresh and

167
00:06:59,139 --> 00:07:02,770
implement a lot of a lot of<font color="#E5E5E5"> the stuff</font>

168
00:07:01,210 --> 00:07:06,580
you've always wanted<font color="#CCCCCC"> to do maybe</font><font color="#E5E5E5"> it</font>

169
00:07:02,770 --> 00:07:08,500
previous jobs<font color="#CCCCCC"> so one of the goals</font><font color="#E5E5E5"> I had</font>

170
00:07:06,580 --> 00:07:10,060
when I<font color="#CCCCCC"> started</font><font color="#E5E5E5"> out again one security</font>

171
00:07:08,500 --> 00:07:12,340
employee<font color="#CCCCCC"> we</font><font color="#E5E5E5"> already had a decent</font><font color="#CCCCCC"> number</font>

172
00:07:10,060 --> 00:07:15,100
of people<font color="#E5E5E5"> using slack at that point</font><font color="#CCCCCC"> but</font>

173
00:07:12,340 --> 00:07:16,840
I didn't want to<font color="#E5E5E5"> create a dashboard</font><font color="#CCCCCC"> so I</font>

174
00:07:15,100 --> 00:07:18,580
wanted people<font color="#E5E5E5"> I wanted the ability</font><font color="#CCCCCC"> to</font>

175
00:07:16,840 --> 00:07:20,260
<font color="#E5E5E5">watch a lot</font><font color="#CCCCCC"> of things a lot of</font><font color="#E5E5E5"> different</font>

176
00:07:18,580 --> 00:07:22,900
<font color="#CCCCCC">things but</font><font color="#E5E5E5"> I didn't want a dashboard</font>

177
00:07:20,260 --> 00:07:27,099
<font color="#E5E5E5">that you</font><font color="#CCCCCC"> burn through</font><font color="#E5E5E5"> all the time</font><font color="#CCCCCC"> I</font>

178
00:07:22,900 --> 00:07:31,150
won't say I hate<font color="#E5E5E5"> Sims next slide</font>

179
00:07:27,100 --> 00:07:33,460
so so this is<font color="#E5E5E5"> I</font><font color="#CCCCCC"> lied a little</font><font color="#E5E5E5"> bit we do</font>

180
00:07:31,150 --> 00:07:35,049
have a dashboard<font color="#E5E5E5"> but this is this is</font>

181
00:07:33,460 --> 00:07:38,020
what it generally looks like and it's

182
00:07:35,050 --> 00:07:40,210
<font color="#E5E5E5">almost on</font><font color="#CCCCCC"> the weekends it's almost</font>

183
00:07:38,020 --> 00:07:42,940
always empty<font color="#E5E5E5"> and during the</font><font color="#CCCCCC"> weekday it's</font>

184
00:07:40,210 --> 00:07:45,219
relatively<font color="#E5E5E5"> empty</font><font color="#CCCCCC"> and the idea here is</font>

185
00:07:42,940 --> 00:07:46,719
<font color="#CCCCCC">that when something happens and is</font>

186
00:07:45,220 --> 00:07:50,169
important enough<font color="#E5E5E5"> to go up here somebody</font>

187
00:07:46,720 --> 00:07:52,060
looks<font color="#E5E5E5"> at it remediates it but the issue</font>

188
00:07:50,169 --> 00:07:53,590
is like don't be net cool

189
00:07:52,060 --> 00:07:55,090
<font color="#E5E5E5">all right so how many people that nobody</font>

190
00:07:53,590 --> 00:07:57,760
<font color="#E5E5E5">how many people have heard of neck wall</font>

191
00:07:55,090 --> 00:08:00,880
<font color="#CCCCCC">I'll be surprised oh hello do you work</font>

192
00:07:57,760 --> 00:08:06,090
for the<font color="#E5E5E5"> company</font><font color="#CCCCCC"> that makes</font><font color="#E5E5E5"> net cool</font><font color="#CCCCCC"> ok</font>

193
00:08:00,880 --> 00:08:08,370
thank so my one of my first Jobs was

194
00:08:06,090 --> 00:08:13,210
because I just<font color="#CCCCCC"> would say a v-neck cool</font>

195
00:08:08,370 --> 00:08:16,539
<font color="#CCCCCC">so one of</font><font color="#E5E5E5"> the first places I worked was</font>

196
00:08:13,210 --> 00:08:18,190
<font color="#E5E5E5">Orbitz calm and that was back</font><font color="#CCCCCC"> in 2001 we</font>

197
00:08:16,539 --> 00:08:19,750
had<font color="#E5E5E5"> this</font><font color="#CCCCCC"> thing net cool</font><font color="#E5E5E5"> and it was sort</font>

198
00:08:18,190 --> 00:08:20,860
<font color="#E5E5E5">of it wasn't security at all it was</font><font color="#CCCCCC"> just</font>

199
00:08:19,750 --> 00:08:22,599
like monitoring<font color="#E5E5E5"> for all of our</font>

200
00:08:20,860 --> 00:08:26,050
infrastructure bla bla bla<font color="#CCCCCC"> what</font><font color="#E5E5E5"> you do</font>

201
00:08:22,599 --> 00:08:27,820
is on hosts or in software<font color="#CCCCCC"> you'd</font><font color="#E5E5E5"> send</font>

202
00:08:26,050 --> 00:08:31,030
alerts to<font color="#E5E5E5"> it and they'd go on to a</font>

203
00:08:27,820 --> 00:08:32,169
dashboard<font color="#E5E5E5"> and and it's great because you</font>

204
00:08:31,030 --> 00:08:33,939
have<font color="#E5E5E5"> all the operators looking at the</font>

205
00:08:32,169 --> 00:08:36,039
dashboard<font color="#CCCCCC"> until it's</font><font color="#E5E5E5"> not great because</font>

206
00:08:33,940 --> 00:08:37,360
<font color="#E5E5E5">there's 30,000 alerts on the dashboard</font>

207
00:08:36,039 --> 00:08:38,650
and<font color="#E5E5E5"> nobody's paying attention any of</font>

208
00:08:37,360 --> 00:08:41,260
them well people<font color="#E5E5E5"> are paying attention to</font>

209
00:08:38,650 --> 00:08:43,718
<font color="#E5E5E5">the Reds which are criticals and that</font>

210
00:08:41,260 --> 00:08:46,029
just<font color="#E5E5E5"> means that now if I'm writing a new</font>

211
00:08:43,719 --> 00:08:48,670
alert<font color="#E5E5E5"> I'm gonna make it a critical so it</font>

212
00:08:46,029 --> 00:08:51,310
goes<font color="#CCCCCC"> to</font><font color="#E5E5E5"> the top yeah it just leads to</font>

213
00:08:48,670 --> 00:08:53,560
<font color="#E5E5E5">like apathy and and nobody's</font><font color="#CCCCCC"> actually</font>

214
00:08:51,310 --> 00:08:55,779
monitoring anything and this really kind

215
00:08:53,560 --> 00:08:57,670
<font color="#E5E5E5">of shaped how I think</font><font color="#CCCCCC"> about</font><font color="#E5E5E5"> monitoring</font>

216
00:08:55,779 --> 00:09:00,160
if you're super<font color="#E5E5E5"> noisy nobody is ever</font>

217
00:08:57,670 --> 00:09:02,260
<font color="#E5E5E5">gonna pay attention</font><font color="#CCCCCC"> so don't be net cool</font>

218
00:09:00,160 --> 00:09:04,060
or don't be sorry<font color="#CCCCCC"> I should I should have</font>

219
00:09:02,260 --> 00:09:05,500
<font color="#CCCCCC">mend this don't be our implementation of</font>

220
00:09:04,060 --> 00:09:09,630
net cool I'm sure you can use<font color="#CCCCCC"> it to do</font>

221
00:09:05,500 --> 00:09:10,930
great things this<font color="#E5E5E5"> is our data center</font>

222
00:09:09,630 --> 00:09:15,430
this

223
00:09:10,930 --> 00:09:17,170
<font color="#CCCCCC">is our other data center so when we when</font>

224
00:09:15,430 --> 00:09:18,819
<font color="#CCCCCC">we set it when slack was set up it was</font>

225
00:09:17,170 --> 00:09:20,979
<font color="#E5E5E5">set up on an AWS account right we're</font>

226
00:09:18,820 --> 00:09:22,990
hosted in AWS and when I started doing

227
00:09:20,980 --> 00:09:25,270
<font color="#CCCCCC">some of the stuff</font><font color="#E5E5E5"> I wanted my</font><font color="#CCCCCC"> own AWS</font>

228
00:09:22,990 --> 00:09:27,490
account<font color="#CCCCCC"> beyond mining Bitcoin this is</font>

229
00:09:25,270 --> 00:09:30,069
great because<font color="#CCCCCC"> you're</font><font color="#E5E5E5"> not dependent on</font>

230
00:09:27,490 --> 00:09:31,600
anything in production infrastructure<font color="#E5E5E5"> to</font>

231
00:09:30,070 --> 00:09:33,490
do your job it also means that you can

232
00:09:31,600 --> 00:09:35,830
<font color="#E5E5E5">give a limited number</font><font color="#CCCCCC"> of people</font><font color="#E5E5E5"> access</font>

233
00:09:33,490 --> 00:09:39,279
to<font color="#CCCCCC"> this environment right so the second</font>

234
00:09:35,830 --> 00:09:42,880
environment<font color="#E5E5E5"> is I want to say</font><font color="#CCCCCC"> today there</font>

235
00:09:39,279 --> 00:09:44,860
are<font color="#E5E5E5"> five people that</font><font color="#CCCCCC"> have credentials</font>

236
00:09:42,880 --> 00:09:47,680
<font color="#E5E5E5">that that can access</font><font color="#CCCCCC"> this environment</font>

237
00:09:44,860 --> 00:09:49,899
and what that really<font color="#E5E5E5"> helps with we're</font>

238
00:09:47,680 --> 00:09:51,250
not<font color="#E5E5E5"> trying to be you know super secret</font>

239
00:09:49,899 --> 00:09:53,500
squirrel about a lot<font color="#E5E5E5"> of this stuff but</font>

240
00:09:51,250 --> 00:09:54,790
if you if you give every engineer access

241
00:09:53,500 --> 00:09:57,190
to the same<font color="#CCCCCC"> environment where you're</font>

242
00:09:54,790 --> 00:09:58,870
monitoring for security things<font color="#CCCCCC"> that's</font>

243
00:09:57,190 --> 00:10:00,399
not great<font color="#CCCCCC"> the other thing you</font><font color="#E5E5E5"> can do is</font>

244
00:09:58,870 --> 00:10:02,770
like there are a lot of permissions I

245
00:10:00,399 --> 00:10:04,930
don't have in prod<font color="#CCCCCC"> so you don't have</font><font color="#E5E5E5"> the</font>

246
00:10:02,770 --> 00:10:06,910
situation<font color="#E5E5E5"> where the watcher is watching</font>

247
00:10:04,930 --> 00:10:09,459
<font color="#CCCCCC">himself right and that's also that's</font>

248
00:10:06,910 --> 00:10:12,579
also<font color="#CCCCCC"> a nice advantage</font><font color="#E5E5E5"> we we actually run</font>

249
00:10:09,459 --> 00:10:15,189
<font color="#E5E5E5">some some critical</font><font color="#CCCCCC"> path software there</font>

250
00:10:12,580 --> 00:10:16,870
<font color="#E5E5E5">too so we use some</font><font color="#CCCCCC"> things that that</font>

251
00:10:15,190 --> 00:10:18,700
<font color="#E5E5E5">production depends on and that means we</font>

252
00:10:16,870 --> 00:10:21,010
<font color="#CCCCCC">actually have a strong</font><font color="#E5E5E5"> operational team</font>

253
00:10:18,700 --> 00:10:25,209
<font color="#CCCCCC">within within security that does a lot</font>

254
00:10:21,010 --> 00:10:28,870
<font color="#E5E5E5">of</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> work</font><font color="#CCCCCC"> so how do we</font><font color="#E5E5E5"> collect the</font>

255
00:10:25,209 --> 00:10:30,310
data<font color="#E5E5E5"> from our hosts the first</font><font color="#CCCCCC"> step in</font>

256
00:10:28,870 --> 00:10:34,390
this should be to set up a reliable

257
00:10:30,310 --> 00:10:36,670
logging pipeline<font color="#E5E5E5"> how many of you have</font>

258
00:10:34,390 --> 00:10:38,709
have written logs<font color="#E5E5E5"> to var log and not</font>

259
00:10:36,670 --> 00:10:39,910
right now maybe maybe<font color="#E5E5E5"> your your</font><font color="#CCCCCC"> boss is</font>

260
00:10:38,709 --> 00:10:41,589
here<font color="#E5E5E5"> but how many of you have written</font>

261
00:10:39,910 --> 00:10:45,130
logs to var log and<font color="#CCCCCC"> just never looked at</font>

262
00:10:41,589 --> 00:10:49,390
them<font color="#CCCCCC"> okay a</font><font color="#E5E5E5"> lot of liars in the room</font>

263
00:10:45,130 --> 00:10:50,860
that's<font color="#E5E5E5"> fine</font><font color="#CCCCCC"> so so having</font><font color="#E5E5E5"> a reliable</font>

264
00:10:49,390 --> 00:10:52,330
<font color="#E5E5E5">logging pipeline is important especially</font>

265
00:10:50,860 --> 00:10:53,529
when<font color="#E5E5E5"> you have sort of infrastructure at</font>

266
00:10:52,330 --> 00:10:55,300
scale right you should be shipping<font color="#E5E5E5"> those</font>

267
00:10:53,529 --> 00:10:57,700
logs somewhere and a lot<font color="#E5E5E5"> of times they</font>

268
00:10:55,300 --> 00:10:59,829
just<font color="#E5E5E5"> sit on a host and whatever</font><font color="#CCCCCC"> the</font>

269
00:10:57,700 --> 00:11:01,930
other<font color="#E5E5E5"> the other part about this is you</font>

270
00:10:59,829 --> 00:11:04,750
<font color="#CCCCCC">know</font><font color="#E5E5E5"> the reliable bit is important this</font>

271
00:11:01,930 --> 00:11:05,979
<font color="#E5E5E5">logs great and it sends UDP messages and</font>

272
00:11:04,750 --> 00:11:07,810
they might get there but they're<font color="#CCCCCC"> there</font>

273
00:11:05,980 --> 00:11:09,160
actually other ways<font color="#CCCCCC"> you</font><font color="#E5E5E5"> can do this</font><font color="#CCCCCC"> so</font>

274
00:11:07,810 --> 00:11:13,540
we use<font color="#E5E5E5"> our syslog with something called</font>

275
00:11:09,160 --> 00:11:16,380
relp<font color="#E5E5E5"> which stands for reliable</font><font color="#CCCCCC"> help I</font>

276
00:11:13,540 --> 00:11:16,380
<font color="#E5E5E5">actually</font>

277
00:11:16,870 --> 00:11:21,260
sorry I<font color="#CCCCCC"> used that's</font><font color="#E5E5E5"> almost a cam joke at</font>

278
00:11:19,550 --> 00:11:24,380
this point but I still<font color="#E5E5E5"> forget to look up</font>

279
00:11:21,260 --> 00:11:26,330
what it stands for<font color="#E5E5E5"> every single time</font><font color="#CCCCCC"> the</font>

280
00:11:24,380 --> 00:11:27,470
reliable is the important<font color="#E5E5E5"> bit</font><font color="#CCCCCC"> and what</font>

281
00:11:26,330 --> 00:11:29,660
this does is<font color="#CCCCCC"> you</font>

282
00:11:27,470 --> 00:11:33,380
it's a TCP connection<font color="#CCCCCC"> to the farside</font>

283
00:11:29,660 --> 00:11:36,020
syslog receiver<font color="#E5E5E5"> and it ensures delivery</font>

284
00:11:33,380 --> 00:11:38,120
<font color="#E5E5E5">if it gets cut off it spools to disk</font>

285
00:11:36,020 --> 00:11:39,410
<font color="#E5E5E5">temporarily and then sends them and the</font>

286
00:11:38,120 --> 00:11:42,470
way we<font color="#CCCCCC"> actually handle this is we</font><font color="#E5E5E5"> don't</font>

287
00:11:39,410 --> 00:11:44,329
we we accept<font color="#E5E5E5"> via our syslog on the</font><font color="#CCCCCC"> host</font>

288
00:11:42,470 --> 00:11:45,620
<font color="#E5E5E5">we accept all the messages locally we</font>

289
00:11:44,330 --> 00:11:47,660
don't actually<font color="#E5E5E5"> write them to disk unless</font>

290
00:11:45,620 --> 00:11:49,580
we have to despoil them<font color="#E5E5E5"> they just</font><font color="#CCCCCC"> get</font>

291
00:11:47,660 --> 00:11:54,140
sent off host immediately<font color="#E5E5E5"> I also think</font>

292
00:11:49,580 --> 00:11:56,120
<font color="#E5E5E5">that's a relatively</font><font color="#CCCCCC"> useful property and</font>

293
00:11:54,140 --> 00:11:57,590
then what do we<font color="#E5E5E5"> do with them</font><font color="#CCCCCC"> so that set</font>

294
00:11:56,120 --> 00:12:01,850
<font color="#E5E5E5">cups</font><font color="#CCCCCC"> cloud I was talking about</font><font color="#E5E5E5"> there's</font>

295
00:11:57,590 --> 00:12:03,350
one major gate sorry<font color="#CCCCCC"> there there VPC</font>

296
00:12:01,850 --> 00:12:05,950
<font color="#E5E5E5">period if you know what Amazon</font><font color="#CCCCCC"> does with</font>

297
00:12:03,350 --> 00:12:09,290
<font color="#CCCCCC">PTC and there's there's basically one</font>

298
00:12:05,950 --> 00:12:13,700
<font color="#CCCCCC">Inlet two</font><font color="#E5E5E5"> sec ops from production which</font>

299
00:12:09,290 --> 00:12:15,500
is relp<font color="#CCCCCC"> right so we expose port that all</font>

300
00:12:13,700 --> 00:12:18,140
of<font color="#E5E5E5"> these hosts</font><font color="#CCCCCC"> in production can connect</font>

301
00:12:15,500 --> 00:12:20,300
to directly and every single<font color="#E5E5E5"> one we're</font>

302
00:12:18,140 --> 00:12:21,830
<font color="#E5E5E5">about five thousand instances</font><font color="#CCCCCC"> now in AWS</font>

303
00:12:20,300 --> 00:12:24,680
every single one<font color="#E5E5E5"> of them has their own</font>

304
00:12:21,830 --> 00:12:26,420
stream<font color="#CCCCCC"> directly across into our relp</font>

305
00:12:24,680 --> 00:12:27,650
receiver on the<font color="#E5E5E5"> other side and what we</font>

306
00:12:26,420 --> 00:12:30,410
use that for<font color="#CCCCCC"> that is something called</font>

307
00:12:27,650 --> 00:12:31,670
<font color="#E5E5E5">stream stash which was written by</font><font color="#CCCCCC"> Nate</font>

308
00:12:30,410 --> 00:12:33,770
who's one of<font color="#E5E5E5"> my colleagues he actually</font>

309
00:12:31,670 --> 00:12:35,360
wrote<font color="#E5E5E5"> it for his previous employer</font>

310
00:12:33,770 --> 00:12:38,630
<font color="#E5E5E5">because</font><font color="#CCCCCC"> they were also collecting</font>

311
00:12:35,360 --> 00:12:40,940
massive<font color="#E5E5E5"> volumes of</font><font color="#CCCCCC"> blogs</font><font color="#E5E5E5"> and and it's</font>

312
00:12:38,630 --> 00:12:43,670
performant<font color="#E5E5E5"> it's it's easy to set up and</font>

313
00:12:40,940 --> 00:12:45,590
it does everything<font color="#CCCCCC"> we need so</font><font color="#E5E5E5"> you can</font>

314
00:12:43,670 --> 00:12:48,199
also<font color="#E5E5E5"> use log stash for this I don't</font><font color="#CCCCCC"> want</font>

315
00:12:45,590 --> 00:12:50,480
to like be<font color="#CCCCCC"> too mean</font><font color="#E5E5E5"> about log stash but</font>

316
00:12:48,200 --> 00:12:52,070
we we didn't get close to the

317
00:12:50,480 --> 00:12:53,150
<font color="#CCCCCC">performance we wanted out of log stash</font>

318
00:12:52,070 --> 00:12:55,700
we had to we had<font color="#CCCCCC"> to</font><font color="#E5E5E5"> run a lot more</font>

319
00:12:53,150 --> 00:12:57,230
<font color="#E5E5E5">instances that could be you know because</font>

320
00:12:55,700 --> 00:13:00,290
Nate's an expert in his own thing and

321
00:12:57,230 --> 00:13:01,700
<font color="#E5E5E5">you</font><font color="#CCCCCC"> know whatever but I think log stash</font>

322
00:13:00,290 --> 00:13:02,150
was a bit heavy<font color="#E5E5E5"> for what we were trying</font>

323
00:13:01,700 --> 00:13:04,130
<font color="#CCCCCC">to do</font>

324
00:13:02,150 --> 00:13:06,110
so check out stream stash it's on github

325
00:13:04,130 --> 00:13:09,320
it's free<font color="#E5E5E5"> everything</font><font color="#CCCCCC"> on</font><font color="#E5E5E5"> here will</font>

326
00:13:06,110 --> 00:13:11,450
eventually be<font color="#CCCCCC"> on github this is just a</font>

327
00:13:09,320 --> 00:13:14,480
fun little<font color="#E5E5E5"> graph the details aren't</font>

328
00:13:11,450 --> 00:13:16,820
super important the<font color="#CCCCCC"> the bottom right</font>

329
00:13:14,480 --> 00:13:17,930
there<font color="#CCCCCC"> is Rob connections</font><font color="#E5E5E5"> and so that's</font>

330
00:13:16,820 --> 00:13:19,280
what it<font color="#CCCCCC"> looks like right you have all</font>

331
00:13:17,930 --> 00:13:20,780
<font color="#CCCCCC">these</font><font color="#E5E5E5"> TCP connections that are just</font>

332
00:13:19,280 --> 00:13:22,640
always<font color="#E5E5E5"> open to the relp receivers on the</font>

333
00:13:20,780 --> 00:13:23,949
other side<font color="#E5E5E5"> we do we actually do quite</font><font color="#CCCCCC"> a</font>

334
00:13:22,640 --> 00:13:27,280
bit<font color="#CCCCCC"> more mana</font>

335
00:13:23,950 --> 00:13:29,830
this was back<font color="#E5E5E5"> in March and as you can</font>

336
00:13:27,280 --> 00:13:32,170
<font color="#E5E5E5">see at that back in March we had</font><font color="#CCCCCC"> 27</font>

337
00:13:29,830 --> 00:13:34,840
<font color="#CCCCCC">hundred and</font><font color="#E5E5E5"> some-odd servers each one</font>

338
00:13:32,170 --> 00:13:37,000
with the with a connection<font color="#E5E5E5"> to</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> this</font>

339
00:13:34,840 --> 00:13:38,470
<font color="#E5E5E5">environment and and we</font><font color="#CCCCCC"> monitor for</font>

340
00:13:37,000 --> 00:13:40,450
<font color="#E5E5E5">things like the processing rate that</font>

341
00:13:38,470 --> 00:13:42,430
filter times all<font color="#CCCCCC"> of that and can alert</font>

342
00:13:40,450 --> 00:13:44,710
if if there's something like<font color="#E5E5E5"> a potential</font>

343
00:13:42,430 --> 00:13:46,329
local<font color="#CCCCCC"> dass like if you fork bomb a box</font>

344
00:13:44,710 --> 00:13:47,710
right you might you might<font color="#E5E5E5"> make those</font>

345
00:13:46,330 --> 00:13:50,230
climbs so we look for stuff<font color="#CCCCCC"> like that</font>

346
00:13:47,710 --> 00:13:52,960
and then all this<font color="#CCCCCC"> goes</font><font color="#E5E5E5"> into</font>

347
00:13:50,230 --> 00:13:57,730
<font color="#E5E5E5">elasticsearch</font><font color="#CCCCCC"> how many people here use</font>

348
00:13:52,960 --> 00:14:01,210
<font color="#E5E5E5">elasticsearch cool</font><font color="#CCCCCC"> we do two so</font>

349
00:13:57,730 --> 00:14:02,530
<font color="#E5E5E5">elasticsearch is great it's it's scaled</font>

350
00:14:01,210 --> 00:14:03,460
well for us there<font color="#E5E5E5"> were so there was a</font>

351
00:14:02,530 --> 00:14:04,750
bit<font color="#E5E5E5"> of a learning curve</font><font color="#CCCCCC"> to get</font>

352
00:14:03,460 --> 00:14:06,310
elasticsearch up and running and

353
00:14:04,750 --> 00:14:11,320
reliable<font color="#E5E5E5"> once you get there it's</font><font color="#CCCCCC"> a</font>

354
00:14:06,310 --> 00:14:14,469
pretty handy<font color="#CCCCCC"> tool but what data do we</font>

355
00:14:11,320 --> 00:14:16,510
send to this thing<font color="#E5E5E5"> so this is like sort</font>

356
00:14:14,470 --> 00:14:22,270
<font color="#E5E5E5">of my favorite part how many people here</font>

357
00:14:16,510 --> 00:14:24,670
<font color="#CCCCCC">use</font><font color="#E5E5E5"> audit deep yes</font><font color="#CCCCCC"> okay new friends so a</font>

358
00:14:22,270 --> 00:14:26,260
lot<font color="#CCCCCC"> of</font><font color="#E5E5E5"> people don't and what's great</font>

359
00:14:24,670 --> 00:14:28,000
<font color="#E5E5E5">about audit D is you already have it</font>

360
00:14:26,260 --> 00:14:29,230
right like almost certainly it's<font color="#CCCCCC"> very</font>

361
00:14:28,000 --> 00:14:31,240
old it's<font color="#E5E5E5"> been around since like kernel</font>

362
00:14:29,230 --> 00:14:32,890
2.6 you almost<font color="#CCCCCC"> already have it it's</font>

363
00:14:31,240 --> 00:14:34,120
right next to<font color="#CCCCCC"> se Linux</font><font color="#E5E5E5"> app armor and all</font>

364
00:14:32,890 --> 00:14:36,460
that other you've turned<font color="#E5E5E5"> off on</font>

365
00:14:34,120 --> 00:14:39,870
your<font color="#CCCCCC"> host like it is right there ready</font>

366
00:14:36,460 --> 00:14:42,940
<font color="#E5E5E5">to use</font><font color="#CCCCCC"> but it's it's a bit complicated</font>

367
00:14:39,870 --> 00:14:45,790
<font color="#CCCCCC">so this</font><font color="#E5E5E5"> isn't too bad</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> is this is</font>

368
00:14:42,940 --> 00:14:48,250
<font color="#E5E5E5">audits ETL and this is it this</font><font color="#CCCCCC"> is a bit</font>

369
00:14:45,790 --> 00:14:50,020
that you used to<font color="#E5E5E5"> like insert rules for</font>

370
00:14:48,250 --> 00:14:52,150
sis calls you<font color="#E5E5E5"> want to watch so you're</font>

371
00:14:50,020 --> 00:14:55,060
telling the<font color="#E5E5E5"> kernel</font><font color="#CCCCCC"> I want to know about</font>

372
00:14:52,150 --> 00:14:57,970
every<font color="#E5E5E5"> 64 bit execution so this is every</font>

373
00:14:55,060 --> 00:15:01,359
time<font color="#CCCCCC"> a new 64-bit process is spawned</font><font color="#E5E5E5"> or</font>

374
00:14:57,970 --> 00:15:03,340
every<font color="#CCCCCC"> 32-bit process is bond or this</font>

375
00:15:01,360 --> 00:15:06,970
<font color="#E5E5E5">last</font><font color="#CCCCCC"> ones</font><font color="#E5E5E5"> not useful but it's like okay</font>

376
00:15:03,340 --> 00:15:09,990
I want<font color="#CCCCCC"> to know every time I've the</font><font color="#E5E5E5"> CPU</font>

377
00:15:06,970 --> 00:15:12,940
<font color="#E5E5E5">in file has CPU info file is written to</font>

378
00:15:09,990 --> 00:15:15,430
appended or accessed and<font color="#E5E5E5"> oh sorry</font><font color="#CCCCCC"> read</font>

379
00:15:12,940 --> 00:15:17,350
and appended I think<font color="#E5E5E5"> and so you can set</font>

380
00:15:15,430 --> 00:15:20,109
these<font color="#CCCCCC"> up it's</font><font color="#E5E5E5"> pretty handy and some</font>

381
00:15:17,350 --> 00:15:21,700
people do this<font color="#CCCCCC"> for like sort of cystic</font>

382
00:15:20,110 --> 00:15:23,050
style looking at like what's happening

383
00:15:21,700 --> 00:15:24,520
with a with a network<font color="#E5E5E5"> connection like</font>

384
00:15:23,050 --> 00:15:26,290
<font color="#CCCCCC">you can't catch it quickly enough</font><font color="#E5E5E5"> in</font>

385
00:15:24,520 --> 00:15:29,050
<font color="#CCCCCC">netstat so you set one of these up</font><font color="#E5E5E5"> and</font>

386
00:15:26,290 --> 00:15:30,819
look<font color="#CCCCCC"> for it but but just you know it's</font>

387
00:15:29,050 --> 00:15:34,530
<font color="#E5E5E5">it's a</font><font color="#CCCCCC"> little</font><font color="#E5E5E5"> bit cumbersome to set up</font>

388
00:15:30,820 --> 00:15:36,000
and then<font color="#CCCCCC"> this is what you get</font>

389
00:15:34,530 --> 00:15:38,130
let me clean that<font color="#CCCCCC"> up a</font><font color="#E5E5E5"> little bit I</font>

390
00:15:36,000 --> 00:15:41,640
<font color="#CCCCCC">think that's out of D message</font><font color="#E5E5E5"> so this is</font>

391
00:15:38,130 --> 00:15:44,010
what you get<font color="#CCCCCC"> gold</font><font color="#E5E5E5"> star for the first</font>

392
00:15:41,640 --> 00:15:46,740
<font color="#E5E5E5">person that can tell</font><font color="#CCCCCC"> me how many</font><font color="#E5E5E5"> events</font>

393
00:15:44,010 --> 00:15:48,020
<font color="#E5E5E5">are on that that listing like how many</font>

394
00:15:46,740 --> 00:15:57,390
unique events does that represent

395
00:15:48,020 --> 00:15:58,980
<font color="#E5E5E5">somebody yelling number three</font><font color="#CCCCCC"> so this</font>

396
00:15:57,390 --> 00:16:01,050
log format is not<font color="#E5E5E5"> my favorite I'm gonna</font>

397
00:15:58,980 --> 00:16:04,890
try the mouse cursor<font color="#CCCCCC"> oh yeah look at</font>

398
00:16:01,050 --> 00:16:09,150
<font color="#CCCCCC">that so see this</font><font color="#E5E5E5"> see this thing here the</font>

399
00:16:04,890 --> 00:16:11,160
<font color="#CCCCCC">6500 733 that tells you that it is</font>

400
00:16:09,150 --> 00:16:12,810
<font color="#E5E5E5">associated</font><font color="#CCCCCC"> with</font><font color="#E5E5E5"> this one that says it</font>

401
00:16:11,160 --> 00:16:15,569
and this one that says it<font color="#E5E5E5"> bla bla bla</font>

402
00:16:12,810 --> 00:16:19,829
<font color="#E5E5E5">yeah this is super fun</font><font color="#CCCCCC"> parsed</font><font color="#E5E5E5"> because</font>

403
00:16:15,570 --> 00:16:22,200
it's a second item<font color="#E5E5E5"> inside the print</font>

404
00:16:19,830 --> 00:16:24,060
after the<font color="#CCCCCC"> :</font><font color="#E5E5E5"> and technically like this</font>

405
00:16:22,200 --> 00:16:25,620
time stamp<font color="#E5E5E5"> is also the same across time</font>

406
00:16:24,060 --> 00:16:27,719
so<font color="#E5E5E5"> like it's it's technically the whole</font>

407
00:16:25,620 --> 00:16:30,900
thing but this<font color="#E5E5E5"> is actually an identifier</font>

408
00:16:27,720 --> 00:16:32,370
that<font color="#E5E5E5"> the</font><font color="#CCCCCC"> colonel's tracks and</font><font color="#E5E5E5"> I don't</font>

409
00:16:30,900 --> 00:16:34,110
<font color="#CCCCCC">know when the timestamps associated so</font>

410
00:16:32,370 --> 00:16:35,610
this is what we care about<font color="#E5E5E5"> the point</font>

411
00:16:34,110 --> 00:16:37,560
here is<font color="#E5E5E5"> like we could take this data and</font>

412
00:16:35,610 --> 00:16:40,860
<font color="#CCCCCC">try</font><font color="#E5E5E5"> to make use of it but it's pretty</font>

413
00:16:37,560 --> 00:16:44,729
hard so we don't we we went<font color="#E5E5E5"> another</font>

414
00:16:40,860 --> 00:16:46,350
<font color="#E5E5E5">route and the first thing we did was I</font>

415
00:16:44,730 --> 00:16:48,360
thought<font color="#E5E5E5"> hey this date is pretty swell so</font>

416
00:16:46,350 --> 00:16:51,480
there's something<font color="#E5E5E5"> called</font><font color="#CCCCCC"> audist which</font>

417
00:16:48,360 --> 00:16:53,310
the user<font color="#E5E5E5"> space part of audit</font><font color="#CCCCCC"> d has this</font>

418
00:16:51,480 --> 00:16:55,020
capability called<font color="#E5E5E5"> POTUS and you can you</font>

419
00:16:53,310 --> 00:16:57,449
<font color="#E5E5E5">can write a plug-in</font><font color="#CCCCCC"> and basically</font><font color="#E5E5E5"> any</font>

420
00:16:55,020 --> 00:17:01,949
language that<font color="#CCCCCC"> can accept</font><font color="#E5E5E5"> standard in and</font>

421
00:16:57,450 --> 00:17:03,180
then it gets<font color="#E5E5E5"> exactly this data and can</font>

422
00:17:01,950 --> 00:17:05,069
do whatever you want with it<font color="#CCCCCC"> right so</font>

423
00:17:03,180 --> 00:17:07,290
you<font color="#E5E5E5"> read</font><font color="#CCCCCC"> it whatever we just wrote</font><font color="#E5E5E5"> quick</font>

424
00:17:05,069 --> 00:17:09,480
sort<font color="#E5E5E5"> of hacky version in Python as a POC</font>

425
00:17:07,290 --> 00:17:11,280
<font color="#E5E5E5">and it worked right and what we did was</font>

426
00:17:09,480 --> 00:17:12,180
<font color="#E5E5E5">transforms it didn't to JSON because</font>

427
00:17:11,280 --> 00:17:17,819
<font color="#CCCCCC">we're</font><font color="#E5E5E5"> not savages</font>

428
00:17:12,180 --> 00:17:19,500
<font color="#CCCCCC">and that was pretty good</font><font color="#E5E5E5"> but but there</font>

429
00:17:17,819 --> 00:17:21,510
were some<font color="#CCCCCC"> limitations and what we</font>

430
00:17:19,500 --> 00:17:23,040
realized<font color="#CCCCCC"> was sorry I'm</font><font color="#E5E5E5"> jumping around in</font>

431
00:17:21,510 --> 00:17:27,089
slides but what we realized<font color="#E5E5E5"> was this</font>

432
00:17:23,040 --> 00:17:29,879
message<font color="#CCCCCC"> actually comes pretty much as is</font>

433
00:17:27,089 --> 00:17:32,070
from the kernel<font color="#E5E5E5"> so audit</font><font color="#CCCCCC"> D isn't</font><font color="#E5E5E5"> doing a</font>

434
00:17:29,880 --> 00:17:34,230
lot right<font color="#CCCCCC"> it's just basically the</font>

435
00:17:32,070 --> 00:17:36,780
<font color="#E5E5E5">facility to write this to a file or do</font>

436
00:17:34,230 --> 00:17:38,520
something<font color="#E5E5E5"> with</font><font color="#CCCCCC"> it and so what we did was</font>

437
00:17:36,780 --> 00:17:41,100
wrote a<font color="#E5E5E5"> replacement for it it's called</font>

438
00:17:38,520 --> 00:17:43,260
<font color="#CCCCCC">go on it I'm</font><font color="#E5E5E5"> not gonna do the joke it's</font>

439
00:17:41,100 --> 00:17:45,929
written and go

440
00:17:43,260 --> 00:17:48,300
so go<font color="#E5E5E5"> out it's pretty</font><font color="#CCCCCC"> handy and what it</font>

441
00:17:45,930 --> 00:17:49,650
<font color="#E5E5E5">what it allows you to do is connect</font>

442
00:17:48,300 --> 00:17:51,060
<font color="#E5E5E5">straight to the Colonel's net</font><font color="#CCCCCC"> link</font>

443
00:17:49,650 --> 00:17:54,150
socket where it's sending<font color="#E5E5E5"> these audit</font>

444
00:17:51,060 --> 00:17:56,429
messages<font color="#CCCCCC"> and it does all the conversion</font>

445
00:17:54,150 --> 00:17:57,870
to<font color="#E5E5E5"> JSON and then you can send it out to</font>

446
00:17:56,430 --> 00:17:59,490
<font color="#E5E5E5">the</font><font color="#CCCCCC"> euro log facility or whatever you</font>

447
00:17:57,870 --> 00:18:01,080
want to do so it's<font color="#E5E5E5"> not it's not doing</font>

448
00:17:59,490 --> 00:18:03,360
anything super<font color="#E5E5E5"> magic it's just taking</font>

449
00:18:01,080 --> 00:18:05,580
these events<font color="#CCCCCC"> adding a little context as</font>

450
00:18:03,360 --> 00:18:07,590
well<font color="#CCCCCC"> like resolving</font><font color="#E5E5E5"> UID to</font><font color="#CCCCCC"> username and</font>

451
00:18:05,580 --> 00:18:12,149
stuff<font color="#E5E5E5"> like that and then making a single</font>

452
00:18:07,590 --> 00:18:13,919
JSON blob that can be forwarded<font color="#E5E5E5"> on this</font>

453
00:18:12,150 --> 00:18:17,520
is me running<font color="#CCCCCC"> a super sketchy command</font>

454
00:18:13,920 --> 00:18:19,800
called<font color="#CCCCCC"> uptime</font><font color="#E5E5E5"> and this is just a demo</font>

455
00:18:17,520 --> 00:18:22,320
<font color="#CCCCCC">I was super I was nervous about like</font>

456
00:18:19,800 --> 00:18:26,190
giving<font color="#CCCCCC"> away host names</font><font color="#E5E5E5"> so I changed my</font>

457
00:18:22,320 --> 00:18:27,540
prompt to dollar sign<font color="#E5E5E5"> classic and this</font>

458
00:18:26,190 --> 00:18:30,770
<font color="#E5E5E5">is me running</font><font color="#CCCCCC"> uptime on</font><font color="#E5E5E5"> a box is just</font>

459
00:18:27,540 --> 00:18:33,930
<font color="#CCCCCC">showing it</font><font color="#E5E5E5"> in</font><font color="#CCCCCC"> qivana</font><font color="#E5E5E5"> it worked</font>

460
00:18:30,770 --> 00:18:35,970
you should also grab stuff<font color="#E5E5E5"> like off logs</font>

461
00:18:33,930 --> 00:18:38,430
<font color="#CCCCCC">a lot of people aren't looking at</font><font color="#E5E5E5"> SSH</font>

462
00:18:35,970 --> 00:18:39,840
logs if you do<font color="#CCCCCC"> SH logging just as a side</font>

463
00:18:38,430 --> 00:18:41,460
note<font color="#CCCCCC"> you should turn on key</font>

464
00:18:39,840 --> 00:18:43,320
<font color="#E5E5E5">fingerprinting so you know which keys</font>

465
00:18:41,460 --> 00:18:45,090
are<font color="#CCCCCC"> actually being used to SSH in not</font>

466
00:18:43,320 --> 00:18:47,399
<font color="#E5E5E5">just that somebody logged in with some</font>

467
00:18:45,090 --> 00:18:49,740
key it's pretty handy<font color="#CCCCCC"> for</font><font color="#E5E5E5"> monitoring you</font>

468
00:18:47,400 --> 00:18:51,180
use AWS<font color="#CCCCCC"> or cloud services you should use</font>

469
00:18:49,740 --> 00:18:54,660
<font color="#E5E5E5">cloud trail or whatever their equivalent</font>

470
00:18:51,180 --> 00:18:56,460
is one<font color="#CCCCCC"> question I often get is</font><font color="#E5E5E5"> why</font><font color="#CCCCCC"> don't</font>

471
00:18:54,660 --> 00:18:58,580
<font color="#E5E5E5">we use</font><font color="#CCCCCC"> OS query or Cystic right like</font>

472
00:18:56,460 --> 00:19:00,930
these are both pretty<font color="#E5E5E5"> cool projects I</font>

473
00:18:58,580 --> 00:19:05,070
<font color="#CCCCCC">like it was</font><font color="#E5E5E5"> great a lot</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> like cystic a</font>

474
00:19:00,930 --> 00:19:06,960
lot<font color="#E5E5E5"> one major difference here is that</font><font color="#CCCCCC"> OS</font>

475
00:19:05,070 --> 00:19:09,300
query is more about point in time

476
00:19:06,960 --> 00:19:12,150
snapshots right so like if I happen<font color="#E5E5E5"> to</font>

477
00:19:09,300 --> 00:19:14,700
do something between<font color="#E5E5E5"> OS query polling</font>

478
00:19:12,150 --> 00:19:17,670
polling times<font color="#E5E5E5"> then there's a chance that</font>

479
00:19:14,700 --> 00:19:19,950
it's never noticed<font color="#E5E5E5"> right and I think</font>

480
00:19:17,670 --> 00:19:21,960
<font color="#CCCCCC">that's</font><font color="#E5E5E5"> absolutely fine</font><font color="#CCCCCC"> for things like</font>

481
00:19:19,950 --> 00:19:23,910
<font color="#E5E5E5">laptops that people close they go</font>

482
00:19:21,960 --> 00:19:25,170
offline<font color="#E5E5E5"> whatever like you have to do</font>

483
00:19:23,910 --> 00:19:27,120
best effort you can't have a stream of

484
00:19:25,170 --> 00:19:28,950
data<font color="#E5E5E5"> from all of your employee laptops</font>

485
00:19:27,120 --> 00:19:30,209
being sent somewhere constantly and

486
00:19:28,950 --> 00:19:32,850
expect<font color="#E5E5E5"> that that's</font><font color="#CCCCCC"> going to</font><font color="#E5E5E5"> be perfectly</font>

487
00:19:30,210 --> 00:19:35,250
<font color="#E5E5E5">reliable but in but in our case all of</font>

488
00:19:32,850 --> 00:19:36,810
these hosts are in Amazon and if we're

489
00:19:35,250 --> 00:19:40,110
<font color="#CCCCCC">doing our jobs well they should be</font>

490
00:19:36,810 --> 00:19:42,810
available<font color="#E5E5E5"> 24 by 7 so I think streaming</font>

491
00:19:40,110 --> 00:19:45,810
this<font color="#E5E5E5"> data off constantly is is the</font>

492
00:19:42,810 --> 00:19:47,460
approach we favor<font color="#E5E5E5"> and it's because we</font>

493
00:19:45,810 --> 00:19:49,919
<font color="#E5E5E5">don't we don't do any of the filtering</font>

494
00:19:47,460 --> 00:19:51,510
locally<font color="#E5E5E5"> we just do sort of a</font><font color="#CCCCCC"> firehose</font>

495
00:19:49,920 --> 00:19:54,030
<font color="#CCCCCC">and</font><font color="#E5E5E5"> it's actually</font><font color="#CCCCCC"> not that</font><font color="#E5E5E5"> bad it</font>

496
00:19:51,510 --> 00:19:54,919
surprised<font color="#E5E5E5"> me but it's only I mean it's</font>

497
00:19:54,030 --> 00:19:56,359
under a megabit

498
00:19:54,919 --> 00:19:58,429
host worth of data<font color="#E5E5E5"> that's constantly</font>

499
00:19:56,359 --> 00:19:59,749
streaming out but this<font color="#E5E5E5"> date is all being</font>

500
00:19:58,429 --> 00:20:01,789
<font color="#CCCCCC">collected somewhere</font><font color="#E5E5E5"> else and we can</font>

501
00:19:59,749 --> 00:20:03,559
<font color="#CCCCCC">actually go back</font><font color="#E5E5E5"> in time and like apply</font>

502
00:20:01,789 --> 00:20:06,350
rules to it test it all kinds of stuff

503
00:20:03,559 --> 00:20:08,749
<font color="#E5E5E5">and we have tons of data stored about</font>

504
00:20:06,350 --> 00:20:11,049
what<font color="#E5E5E5"> our hosts</font><font color="#CCCCCC"> are doing this dig</font><font color="#E5E5E5"> is</font>

505
00:20:08,749 --> 00:20:13,580
also really<font color="#CCCCCC"> cool it's a great tool but</font>

506
00:20:11,049 --> 00:20:15,408
the<font color="#E5E5E5"> the model they've gone with with</font>

507
00:20:13,580 --> 00:20:17,090
<font color="#E5E5E5">Falco is to like do the rules in the</font>

508
00:20:15,409 --> 00:20:20,330
alerting<font color="#E5E5E5"> on each individual host</font><font color="#CCCCCC"> it's</font>

509
00:20:17,090 --> 00:20:22,519
just we we went<font color="#E5E5E5"> a different way web</font>

510
00:20:20,330 --> 00:20:24,499
blogs are super important here as well I

511
00:20:22,519 --> 00:20:27,559
think<font color="#CCCCCC"> that's probably the</font><font color="#E5E5E5"> biggest volume</font>

512
00:20:24,499 --> 00:20:29,419
of logs we have and you know it's it's

513
00:20:27,559 --> 00:20:30,950
<font color="#CCCCCC">really</font><font color="#E5E5E5"> important to also correlate those</font>

514
00:20:29,419 --> 00:20:33,200
with activity you<font color="#CCCCCC"> see in other</font><font color="#E5E5E5"> places</font>

515
00:20:30,950 --> 00:20:34,940
<font color="#CCCCCC">right</font><font color="#E5E5E5"> adversaries aren't just trying to</font>

516
00:20:33,200 --> 00:20:36,799
<font color="#E5E5E5">SSH</font><font color="#CCCCCC"> into your servers</font><font color="#E5E5E5"> right there</font>

517
00:20:34,940 --> 00:20:39,980
they're poking it at lots of things

518
00:20:36,799 --> 00:20:43,999
so lots of logs<font color="#E5E5E5"> looks like a very 70s</font>

519
00:20:39,980 --> 00:20:46,070
<font color="#CCCCCC">picture of log so let's talk about</font>

520
00:20:43,999 --> 00:20:48,590
detection<font color="#CCCCCC"> one of my favorite things the</font>

521
00:20:46,070 --> 00:20:50,840
defenders advantage<font color="#CCCCCC"> a lot</font><font color="#E5E5E5"> of people you</font>

522
00:20:48,590 --> 00:20:52,428
<font color="#E5E5E5">know sort of think</font><font color="#CCCCCC"> okay attackers have</font>

523
00:20:50,840 --> 00:20:54,559
all the advantages<font color="#E5E5E5"> defenders actually</font>

524
00:20:52,429 --> 00:20:55,700
have an advantage<font color="#E5E5E5"> if the attacker</font>

525
00:20:54,559 --> 00:20:57,739
doesn't know what<font color="#E5E5E5"> you're looking</font><font color="#CCCCCC"> for</font>

526
00:20:55,700 --> 00:20:59,029
<font color="#E5E5E5">this is the idea behind honey pots and a</font>

527
00:20:57,739 --> 00:21:01,279
lot of<font color="#E5E5E5"> things but if the attacker</font>

528
00:20:59,029 --> 00:21:04,759
doesn't know<font color="#E5E5E5"> what</font><font color="#CCCCCC"> to avoid they're gonna</font>

529
00:21:01,279 --> 00:21:06,529
trip<font color="#E5E5E5"> over an alarm the problem is a lot</font>

530
00:21:04,759 --> 00:21:08,119
<font color="#E5E5E5">of</font><font color="#CCCCCC"> these rule sets a lot</font><font color="#E5E5E5"> of things that</font>

531
00:21:06,529 --> 00:21:10,279
<font color="#E5E5E5">that you can learn about</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> company are</font>

532
00:21:08,119 --> 00:21:13,158
just off the shelf<font color="#E5E5E5"> right and one</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> my</font>

533
00:21:10,279 --> 00:21:15,739
one<font color="#CCCCCC"> of the easiest to to explain</font>

534
00:21:13,159 --> 00:21:18,859
examples is virustotal

535
00:21:15,739 --> 00:21:20,059
so if<font color="#CCCCCC"> I write a bit</font><font color="#E5E5E5"> about malware</font><font color="#CCCCCC"> and I</font>

536
00:21:18,859 --> 00:21:22,820
want to make<font color="#CCCCCC"> sure that</font><font color="#E5E5E5"> that malware</font>

537
00:21:20,059 --> 00:21:25,129
works on every<font color="#E5E5E5"> PC out there</font>

538
00:21:22,820 --> 00:21:26,269
I just keep<font color="#CCCCCC"> modifying it until I pass</font>

539
00:21:25,129 --> 00:21:28,428
<font color="#E5E5E5">all the checks on virustotal</font>

540
00:21:26,269 --> 00:21:29,960
I release it<font color="#E5E5E5"> to</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> world and</font><font color="#CCCCCC"> hurray</font><font color="#E5E5E5"> a</font>

541
00:21:28,429 --> 00:21:33,259
hundred percent<font color="#CCCCCC"> you know I've got</font>

542
00:21:29,960 --> 00:21:34,489
everyone<font color="#E5E5E5"> at least</font><font color="#CCCCCC"> temporarily</font><font color="#E5E5E5"> but if you</font>

543
00:21:33,259 --> 00:21:35,899
if you actually don't use off-the-shelf

544
00:21:34,489 --> 00:21:38,059
<font color="#CCCCCC">rulesets and you actually</font><font color="#E5E5E5"> understand</font>

545
00:21:35,899 --> 00:21:39,080
your environment<font color="#CCCCCC"> and write them you</font><font color="#E5E5E5"> you</font>

546
00:21:38,059 --> 00:21:41,559
can have an advantage<font color="#E5E5E5"> there because the</font>

547
00:21:39,080 --> 00:21:43,850
attacker doesn't know what<font color="#CCCCCC"> to avoid</font>

548
00:21:41,559 --> 00:21:45,559
another interesting<font color="#E5E5E5"> or another useful</font>

549
00:21:43,850 --> 00:21:49,309
<font color="#CCCCCC">point is that</font><font color="#E5E5E5"> zero days are not</font>

550
00:21:45,559 --> 00:21:53,389
invisibility cloaks<font color="#E5E5E5"> in in the context of</font>

551
00:21:49,309 --> 00:21:54,980
an individual<font color="#E5E5E5"> laptop or host sure maybe</font>

552
00:21:53,389 --> 00:21:56,809
<font color="#E5E5E5">like you might have something that pops</font>

553
00:21:54,980 --> 00:21:59,539
in<font color="#CCCCCC"> you know does something cool and</font>

554
00:21:56,809 --> 00:22:01,158
turns off all telemetry<font color="#E5E5E5"> in a networked</font>

555
00:21:59,539 --> 00:22:02,899
environment with<font color="#CCCCCC"> 5,000</font><font color="#E5E5E5"> hosts it's really</font>

556
00:22:01,159 --> 00:22:03,889
hard to do that<font color="#CCCCCC"> across all 5,000</font><font color="#E5E5E5"> you</font>

557
00:22:02,899 --> 00:22:06,469
still have a<font color="#E5E5E5"> chance to observe</font>

558
00:22:03,889 --> 00:22:08,750
interesting activity so<font color="#E5E5E5"> don't assume</font>

559
00:22:06,470 --> 00:22:11,240
that you've lost<font color="#E5E5E5"> if there's even a</font><font color="#CCCCCC"> zero</font>

560
00:22:08,750 --> 00:22:12,350
they are a known vulnerability<font color="#E5E5E5"> in system</font>

561
00:22:11,240 --> 00:22:14,270
<font color="#CCCCCC">software you're running they're not</font>

562
00:22:12,350 --> 00:22:16,370
invisibility cloaks<font color="#E5E5E5"> once you're in you</font>

563
00:22:14,270 --> 00:22:18,320
still have to do something<font color="#E5E5E5"> right unless</font>

564
00:22:16,370 --> 00:22:21,080
<font color="#E5E5E5">your goal is just</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> prove that you can</font>

565
00:22:18,320 --> 00:22:21,740
break<font color="#CCCCCC"> into 5000</font><font color="#E5E5E5"> servers and do nothing</font><font color="#CCCCCC"> I</font>

566
00:22:21,080 --> 00:22:24,110
guess

567
00:22:21,740 --> 00:22:25,760
<font color="#E5E5E5">maybe if someone's done that one of my</font>

568
00:22:24,110 --> 00:22:27,530
favorite<font color="#E5E5E5"> cases the target here</font><font color="#CCCCCC"> is the</font>

569
00:22:25,760 --> 00:22:28,790
hypothetical malicious insider<font color="#E5E5E5"> the</font>

570
00:22:27,530 --> 00:22:30,860
reason for<font color="#CCCCCC"> that is the hardest thing to</font>

571
00:22:28,790 --> 00:22:32,510
<font color="#E5E5E5">defend against is somebody who both</font>

572
00:22:30,860 --> 00:22:34,159
understands your environment and has

573
00:22:32,510 --> 00:22:35,570
<font color="#CCCCCC">prudential x' to access</font><font color="#E5E5E5"> your environment</font>

574
00:22:34,160 --> 00:22:36,080
<font color="#E5E5E5">like it really doesn't get much worse</font>

575
00:22:35,570 --> 00:22:37,669
<font color="#CCCCCC">than that</font>

576
00:22:36,080 --> 00:22:40,340
<font color="#CCCCCC">we</font><font color="#E5E5E5"> actually joked once that our greatest</font>

577
00:22:37,670 --> 00:22:43,510
<font color="#E5E5E5">risk</font><font color="#CCCCCC"> security</font><font color="#E5E5E5"> wise was a disgruntled</font>

578
00:22:40,340 --> 00:22:45,709
security employee which is<font color="#E5E5E5"> probably</font><font color="#CCCCCC"> true</font>

579
00:22:43,510 --> 00:22:48,470
<font color="#CCCCCC">it's it's actually not entirely true</font>

580
00:22:45,710 --> 00:22:50,210
though because we split we split duties

581
00:22:48,470 --> 00:22:54,080
<font color="#E5E5E5">between security knobs and we don't have</font>

582
00:22:50,210 --> 00:22:55,400
access<font color="#CCCCCC"> to</font><font color="#E5E5E5"> everything they</font><font color="#CCCCCC"> do mission</font>

583
00:22:54,080 --> 00:22:57,560
controls<font color="#E5E5E5"> pretty cool</font>

584
00:22:55,400 --> 00:22:59,270
never gonna<font color="#CCCCCC"> remember why this</font><font color="#E5E5E5"> slide is</font>

585
00:22:57,560 --> 00:23:01,909
in there<font color="#E5E5E5"> whatever</font>

586
00:22:59,270 --> 00:23:03,080
so<font color="#CCCCCC"> elasticsearch has flunked our what</font>

587
00:23:01,910 --> 00:23:06,830
you want to use how<font color="#CCCCCC"> many people here you</font>

588
00:23:03,080 --> 00:23:08,330
<font color="#CCCCCC">Splunk</font><font color="#E5E5E5"> cool</font><font color="#CCCCCC"> they're buying drinks</font><font color="#E5E5E5"> at the</font>

589
00:23:06,830 --> 00:23:12,050
end of the day<font color="#E5E5E5"> cuz they have</font><font color="#CCCCCC"> all the</font>

590
00:23:08,330 --> 00:23:14,000
money<font color="#E5E5E5"> so</font><font color="#CCCCCC"> what one reason we use</font>

591
00:23:12,050 --> 00:23:15,440
<font color="#CCCCCC">elasticsearch and and i was just talking</font>

592
00:23:14,000 --> 00:23:17,750
<font color="#CCCCCC">with josh about this who was</font><font color="#E5E5E5"> nice</font><font color="#CCCCCC"> enough</font>

593
00:23:15,440 --> 00:23:18,910
to by the way lend me his laptop<font color="#E5E5E5"> because</font>

594
00:23:17,750 --> 00:23:22,790
<font color="#CCCCCC">i'm an idiot</font>

595
00:23:18,910 --> 00:23:25,400
so we use<font color="#E5E5E5"> elasticsearch because we don't</font>

596
00:23:22,790 --> 00:23:27,350
want to limit<font color="#E5E5E5"> what data were collecting</font>

597
00:23:25,400 --> 00:23:28,940
based on the volume<font color="#CCCCCC"> of</font><font color="#E5E5E5"> data right if</font>

598
00:23:27,350 --> 00:23:30,770
there's something we<font color="#E5E5E5"> wanna collect we</font>

599
00:23:28,940 --> 00:23:33,680
want to<font color="#E5E5E5"> just say hey cool let's send all</font>

600
00:23:30,770 --> 00:23:36,170
<font color="#CCCCCC">of it and our our logs are extremely</font>

601
00:23:33,680 --> 00:23:39,320
variable<font color="#E5E5E5"> like our elastic search indexes</font>

602
00:23:36,170 --> 00:23:41,180
are maybe<font color="#E5E5E5"> 100</font><font color="#CCCCCC"> Gig on</font><font color="#E5E5E5"> the weekend and 500</font>

603
00:23:39,320 --> 00:23:43,460
gig on<font color="#E5E5E5"> a weekday</font><font color="#CCCCCC"> right</font><font color="#E5E5E5"> like when people</font>

604
00:23:41,180 --> 00:23:44,510
<font color="#E5E5E5">are when operators are in we don't want</font>

605
00:23:43,460 --> 00:23:46,100
to we don't<font color="#CCCCCC"> want to</font><font color="#E5E5E5"> just say like oh</font>

606
00:23:44,510 --> 00:23:47,600
well<font color="#E5E5E5"> maybe let's not collect that thing</font>

607
00:23:46,100 --> 00:23:49,760
it<font color="#E5E5E5"> could be important</font><font color="#CCCCCC"> we just want to</font>

608
00:23:47,600 --> 00:23:51,260
collect everything<font color="#E5E5E5"> we can and so</font><font color="#CCCCCC"> i I</font>

609
00:23:49,760 --> 00:23:52,940
really like the model<font color="#E5E5E5"> of elastic search</font>

610
00:23:51,260 --> 00:23:55,790
where<font color="#E5E5E5"> we just spin</font><font color="#CCCCCC"> up more instances and</font>

611
00:23:52,940 --> 00:23:57,470
the cost is however many instances we

612
00:23:55,790 --> 00:24:00,830
run<font color="#E5E5E5"> but we're not bound by a license</font>

613
00:23:57,470 --> 00:24:03,140
cost there<font color="#CCCCCC"> álast alerts another tool</font>

614
00:24:00,830 --> 00:24:04,520
use<font color="#CCCCCC"> so if you use elastic search that I</font>

615
00:24:03,140 --> 00:24:07,880
recommend at least<font color="#E5E5E5"> checking this out</font>

616
00:24:04,520 --> 00:24:09,800
<font color="#E5E5E5">it's a it's from Yelp and they what it</font>

617
00:24:07,880 --> 00:24:12,140
basically does<font color="#E5E5E5"> is stored queries against</font>

618
00:24:09,800 --> 00:24:14,030
elastic search<font color="#E5E5E5"> so if you if you</font><font color="#CCCCCC"> think of</font>

619
00:24:12,140 --> 00:24:15,920
like<font color="#CCCCCC"> a Kabana query</font><font color="#E5E5E5"> you take that you</font>

620
00:24:14,030 --> 00:24:19,460
paste it into an<font color="#CCCCCC"> elastic rule and then</font>

621
00:24:15,920 --> 00:24:21,670
every every hit on that<font color="#E5E5E5"> or or standard</font>

622
00:24:19,460 --> 00:24:23,860
deviation<font color="#E5E5E5"> or spike or</font>

623
00:24:21,670 --> 00:24:25,720
<font color="#E5E5E5">flatline</font><font color="#CCCCCC"> you can</font><font color="#E5E5E5"> just send an alert it's</font>

624
00:24:23,860 --> 00:24:27,340
really handy<font color="#CCCCCC"> so it's a it's a good way</font>

625
00:24:25,720 --> 00:24:28,960
<font color="#CCCCCC">and so we just have this loop of</font><font color="#E5E5E5"> like</font>

626
00:24:27,340 --> 00:24:30,760
these alerts running constant or sorry

627
00:24:28,960 --> 00:24:31,690
these queries running<font color="#CCCCCC"> constantly</font><font color="#E5E5E5"> when</font>

628
00:24:30,760 --> 00:24:34,629
they see the thing<font color="#E5E5E5"> that they're looking</font>

629
00:24:31,690 --> 00:24:36,940
<font color="#CCCCCC">for they they alert and that loop you</font>

630
00:24:34,630 --> 00:24:38,140
<font color="#CCCCCC">know is generally under</font><font color="#E5E5E5"> 10 seconds right</font>

631
00:24:36,940 --> 00:24:40,300
like we have a bunch of<font color="#E5E5E5"> queries and they</font>

632
00:24:38,140 --> 00:24:42,250
run and<font color="#E5E5E5"> they</font><font color="#CCCCCC"> run again</font><font color="#E5E5E5"> it's not as good</font>

633
00:24:40,300 --> 00:24:43,960
<font color="#E5E5E5">as</font><font color="#CCCCCC"> streaming stuff or it is it</font><font color="#E5E5E5"> doesn't</font>

634
00:24:42,250 --> 00:24:45,970
<font color="#E5E5E5">really matter</font><font color="#CCCCCC"> right like we don't have</font>

635
00:24:43,960 --> 00:24:48,220
to do at the<font color="#E5E5E5"> moment</font><font color="#CCCCCC"> something bad</font>

636
00:24:45,970 --> 00:24:51,190
happens I<font color="#CCCCCC"> think within ten seconds is</font><font color="#E5E5E5"> is</font>

637
00:24:48,220 --> 00:24:53,620
pretty acceptable<font color="#E5E5E5"> talk about rules so</font>

638
00:24:51,190 --> 00:24:55,780
commands<font color="#E5E5E5"> that people run like uptime</font>

639
00:24:53,620 --> 00:24:57,669
<font color="#E5E5E5">that's a good one we we actually don't</font>

640
00:24:55,780 --> 00:24:59,860
watch for the uptime<font color="#CCCCCC"> command</font><font color="#E5E5E5"> so if you</font>

641
00:24:57,670 --> 00:25:02,500
hack us we have a uptime<font color="#CCCCCC"> fair play you</font>

642
00:24:59,860 --> 00:25:03,879
did it<font color="#E5E5E5"> but we</font><font color="#CCCCCC"> do look</font><font color="#E5E5E5"> for a lot of</font>

643
00:25:02,500 --> 00:25:04,960
commands<font color="#CCCCCC"> and</font><font color="#E5E5E5"> what I'm not going to tell</font>

644
00:25:03,880 --> 00:25:06,670
you is which commands<font color="#E5E5E5"> we look for</font>

645
00:25:04,960 --> 00:25:08,620
<font color="#E5E5E5">because</font><font color="#CCCCCC"> that would be</font><font color="#E5E5E5"> absolutely silly</font>

646
00:25:06,670 --> 00:25:09,520
<font color="#E5E5E5">but we look for a lot of different</font><font color="#CCCCCC"> stuff</font>

647
00:25:08,620 --> 00:25:11,020
we look for a lot<font color="#CCCCCC"> of</font><font color="#E5E5E5"> different</font>

648
00:25:09,520 --> 00:25:12,820
combinations<font color="#CCCCCC"> and the point is if</font><font color="#E5E5E5"> you</font>

649
00:25:11,020 --> 00:25:14,170
land on a host<font color="#CCCCCC"> you're gonna do a lot of</font>

650
00:25:12,820 --> 00:25:15,639
<font color="#E5E5E5">discovery to try and figure out what the</font>

651
00:25:14,170 --> 00:25:18,070
heck this thing<font color="#E5E5E5"> does and what I can get</font>

652
00:25:15,640 --> 00:25:19,240
to and what I'm<font color="#E5E5E5"> supposed to do so you</font>

653
00:25:18,070 --> 00:25:20,409
<font color="#E5E5E5">don't want to you don't</font><font color="#CCCCCC"> want to tell</font>

654
00:25:19,240 --> 00:25:21,820
people<font color="#E5E5E5"> what</font><font color="#CCCCCC"> you're looking for because</font>

655
00:25:20,410 --> 00:25:25,030
there are<font color="#CCCCCC"> a lot of ways especially in</font>

656
00:25:21,820 --> 00:25:26,320
<font color="#E5E5E5">UNIX to sidestep</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> right but there's</font>

657
00:25:25,030 --> 00:25:27,790
a good<font color="#E5E5E5"> chance you're</font><font color="#CCCCCC"> gonna run across</font>

658
00:25:26,320 --> 00:25:30,820
one<font color="#CCCCCC"> of</font><font color="#E5E5E5"> the things that we think is is</font>

659
00:25:27,790 --> 00:25:33,040
rather interesting<font color="#E5E5E5"> we also monitor files</font>

660
00:25:30,820 --> 00:25:36,909
and file modification in a lot of<font color="#E5E5E5"> places</font>

661
00:25:33,040 --> 00:25:41,340
and one side note<font color="#CCCCCC"> on files this</font><font color="#E5E5E5"> is like</font>

662
00:25:36,910 --> 00:25:44,230
a very important detail about audit<font color="#E5E5E5"> D</font>

663
00:25:41,340 --> 00:25:45,970
the<font color="#E5E5E5"> the wave file watches I showed you</font>

664
00:25:44,230 --> 00:25:47,470
one earlier where<font color="#CCCCCC"> I was</font><font color="#E5E5E5"> watching CPU</font>

665
00:25:45,970 --> 00:25:50,830
info<font color="#E5E5E5"> the way they're implemented in the</font>

666
00:25:47,470 --> 00:25:53,860
kernel is actually it's a hash table<font color="#CCCCCC"> if</font>

667
00:25:50,830 --> 00:25:55,870
you do if<font color="#E5E5E5"> you enumerate individual files</font>

668
00:25:53,860 --> 00:25:58,060
<font color="#E5E5E5">but you can also do directory watches</font>

669
00:25:55,870 --> 00:26:00,610
and those are not a<font color="#E5E5E5"> hash table so</font>

670
00:25:58,060 --> 00:26:02,350
they're actually<font color="#E5E5E5"> less efficient so in</font>

671
00:26:00,610 --> 00:26:04,090
some<font color="#E5E5E5"> cases if you want to watch a ton of</font>

672
00:26:02,350 --> 00:26:07,480
files it's actually it's actually<font color="#E5E5E5"> better</font>

673
00:26:04,090 --> 00:26:09,399
<font color="#CCCCCC">to enumerate a thousand files you want</font>

674
00:26:07,480 --> 00:26:10,900
to<font color="#CCCCCC"> watch and shove a thousand rules in</font>

675
00:26:09,400 --> 00:26:13,090
there then<font color="#E5E5E5"> it than it is</font><font color="#CCCCCC"> to watch a</font>

676
00:26:10,900 --> 00:26:15,730
directory<font color="#E5E5E5"> in some cases</font><font color="#CCCCCC"> but your mileage</font>

677
00:26:13,090 --> 00:26:20,050
may<font color="#E5E5E5"> vary sockets are also important</font><font color="#CCCCCC"> so</font>

678
00:26:15,730 --> 00:26:21,880
<font color="#CCCCCC">the connect syscall on a</font>

679
00:26:20,050 --> 00:26:25,690
<font color="#E5E5E5">I'll say ona</font><font color="#CCCCCC"> Linux box happens a lot</font>

680
00:26:21,880 --> 00:26:27,400
like a lot<font color="#CCCCCC"> line</font><font color="#E5E5E5"> and it's also super</font>

681
00:26:25,690 --> 00:26:30,640
useful<font color="#CCCCCC"> one of the things that you can do</font>

682
00:26:27,400 --> 00:26:33,430
is via go out it you can monitor every

683
00:26:30,640 --> 00:26:36,640
connect event<font color="#E5E5E5"> and the reason I really</font>

684
00:26:33,430 --> 00:26:37,750
<font color="#CCCCCC">like this is because you</font><font color="#E5E5E5"> can also glean</font>

685
00:26:36,640 --> 00:26:39,400
more information than if you're doing

686
00:26:37,750 --> 00:26:42,820
<font color="#E5E5E5">passive</font><font color="#CCCCCC"> network monitoring so if you</font>

687
00:26:39,400 --> 00:26:44,470
have an IDs<font color="#E5E5E5"> inline cool</font><font color="#CCCCCC"> IDs</font><font color="#E5E5E5"> s have uses</font>

688
00:26:42,820 --> 00:26:46,929
but what they can't tell you is the<font color="#CCCCCC"> pin</font>

689
00:26:44,470 --> 00:26:48,940
<font color="#E5E5E5">that that actually launched the process</font>

690
00:26:46,930 --> 00:26:51,850
or the<font color="#E5E5E5"> process name or whatever on host</font>

691
00:26:48,940 --> 00:26:53,530
<font color="#E5E5E5">right so having this data is super</font>

692
00:26:51,850 --> 00:26:57,129
useful<font color="#CCCCCC"> it's sort of network monitoring</font>

693
00:26:53,530 --> 00:27:00,220
<font color="#E5E5E5">that's on host but you get a ton of cool</font>

694
00:26:57,130 --> 00:27:01,780
stuff<font color="#CCCCCC"> one</font><font color="#E5E5E5"> other thing that that can be</font>

695
00:27:00,220 --> 00:27:04,570
useful to look at<font color="#E5E5E5"> just</font><font color="#CCCCCC"> in aggregate</font>

696
00:27:01,780 --> 00:27:08,190
<font color="#E5E5E5">across your system is the time people</font>

697
00:27:04,570 --> 00:27:10,149
<font color="#E5E5E5">are awake unless you unless you have a</font>

698
00:27:08,190 --> 00:27:12,040
<font color="#E5E5E5">very interesting case most people are</font>

699
00:27:10,150 --> 00:27:14,530
not awake 24 hours a day so like

700
00:27:12,040 --> 00:27:16,210
noticing when like if something<font color="#E5E5E5"> is</font>

701
00:27:14,530 --> 00:27:19,260
happening<font color="#CCCCCC"> a lot and</font><font color="#E5E5E5"> shouldn't be and</font>

702
00:27:16,210 --> 00:27:23,050
it's<font color="#E5E5E5"> pretty useful geoip</font>

703
00:27:19,260 --> 00:27:24,850
yeah like it's it's it's<font color="#CCCCCC"> okay it can</font><font color="#E5E5E5"> be</font>

704
00:27:23,050 --> 00:27:26,919
useful<font color="#E5E5E5"> I</font><font color="#CCCCCC"> think the case of</font><font color="#E5E5E5"> like this</font>

705
00:27:24,850 --> 00:27:29,290
person hopped<font color="#CCCCCC"> from this place to this</font>

706
00:27:26,920 --> 00:27:31,930
place<font color="#E5E5E5"> not super useful because geoip is</font>

707
00:27:29,290 --> 00:27:34,480
not perfect but it can be useful<font color="#E5E5E5"> and if</font>

708
00:27:31,930 --> 00:27:37,090
<font color="#E5E5E5">you if you see a hop to</font><font color="#CCCCCC"> a place that you</font>

709
00:27:34,480 --> 00:27:40,590
really<font color="#CCCCCC"> don't expect</font><font color="#E5E5E5"> that's fine but I</font>

710
00:27:37,090 --> 00:27:43,270
he's actually really interesting<font color="#CCCCCC"> so</font>

711
00:27:40,590 --> 00:27:43,750
another another question for<font color="#E5E5E5"> the</font>

712
00:27:43,270 --> 00:27:47,470
<font color="#E5E5E5">audience</font>

713
00:27:43,750 --> 00:27:49,690
<font color="#E5E5E5">I collected every IP I connected to</font>

714
00:27:47,470 --> 00:27:53,020
<font color="#E5E5E5">slack or any of our back-end services</font>

715
00:27:49,690 --> 00:27:56,560
from so every<font color="#E5E5E5"> IP I connected from over</font>

716
00:27:53,020 --> 00:27:58,360
the course of<font color="#E5E5E5"> a year</font><font color="#CCCCCC"> within a range just</font>

717
00:27:56,560 --> 00:28:00,129
give me a number<font color="#CCCCCC"> and within 50 s right</font>

718
00:27:58,360 --> 00:28:02,429
how many<font color="#E5E5E5"> ip's did I use over</font><font color="#CCCCCC"> a year and</font>

719
00:28:00,130 --> 00:28:07,630
<font color="#CCCCCC">I travel a fair</font><font color="#E5E5E5"> amount like you know</font>

720
00:28:02,430 --> 00:28:14,760
somebody yell out a number<font color="#CCCCCC"> know ten</font>

721
00:28:07,630 --> 00:28:21,190
<font color="#CCCCCC">thousand way lower</font><font color="#E5E5E5"> way lower 108</font><font color="#CCCCCC"> IDs so</font>

722
00:28:14,760 --> 00:28:22,930
<font color="#CCCCCC">yeah</font><font color="#E5E5E5"> so come on down</font><font color="#CCCCCC"> so 180 keys is not</font>

723
00:28:21,190 --> 00:28:24,770
a lot of<font color="#CCCCCC"> I</font><font color="#E5E5E5"> keys one thing to think</font><font color="#CCCCCC"> about</font>

724
00:28:22,930 --> 00:28:26,330
when you're when<font color="#E5E5E5"> you're</font>

725
00:28:24,770 --> 00:28:28,129
<font color="#E5E5E5">stuff</font><font color="#CCCCCC"> who</font><font color="#E5E5E5"> is that you have a lot of data</font>

726
00:28:26,330 --> 00:28:30,710
<font color="#CCCCCC">here that's super useful you can</font>

727
00:28:28,130 --> 00:28:33,800
<font color="#E5E5E5">actually tailor</font><font color="#CCCCCC"> IDS's to</font><font color="#E5E5E5"> individuals as</font>

728
00:28:30,710 --> 00:28:35,990
well<font color="#E5E5E5"> so I know which hundred</font><font color="#CCCCCC"> Nate I came</font>

729
00:28:33,800 --> 00:28:38,149
from<font color="#E5E5E5"> and I don't have to</font><font color="#CCCCCC"> label those</font><font color="#E5E5E5"> as</font>

730
00:28:35,990 --> 00:28:39,920
good bad whatever<font color="#E5E5E5"> but I can also</font><font color="#CCCCCC"> just</font>

731
00:28:38,150 --> 00:28:41,600
ask<font color="#E5E5E5"> someone if</font><font color="#CCCCCC"> they came</font><font color="#E5E5E5"> from a new IP</font>

732
00:28:39,920 --> 00:28:42,920
<font color="#E5E5E5">and then I can add</font><font color="#CCCCCC"> it to my list of ID's</font>

733
00:28:41,600 --> 00:28:44,120
<font color="#CCCCCC">that they might come</font><font color="#E5E5E5"> from and you</font>

734
00:28:42,920 --> 00:28:45,920
<font color="#CCCCCC">probably want to</font><font color="#E5E5E5"> expire those over time</font>

735
00:28:44,120 --> 00:28:51,679
but<font color="#E5E5E5"> this</font><font color="#CCCCCC"> is a really useful capability</font>

736
00:28:45,920 --> 00:28:53,060
<font color="#E5E5E5">personalizing IDS's so what do we do</font>

737
00:28:51,680 --> 00:28:54,890
with the alerts<font color="#E5E5E5"> we wrote a thing called</font>

738
00:28:53,060 --> 00:28:56,389
<font color="#CCCCCC">alert center</font><font color="#E5E5E5"> it won't be open source</font><font color="#CCCCCC"> no</font>

739
00:28:54,890 --> 00:28:58,460
<font color="#E5E5E5">next week unfortunately</font><font color="#CCCCCC"> but we're hoping</font>

740
00:28:56,390 --> 00:29:00,170
to do<font color="#E5E5E5"> that at some</font><font color="#CCCCCC"> point all</font><font color="#E5E5E5"> it really</font>

741
00:28:58,460 --> 00:29:02,030
is is<font color="#CCCCCC"> a</font><font color="#E5E5E5"> something that manages the alert</font>

742
00:29:00,170 --> 00:29:03,860
lifecycle so once a last alert says hey

743
00:29:02,030 --> 00:29:06,139
this bad thing<font color="#E5E5E5"> happened</font><font color="#CCCCCC"> that you have a</font>

744
00:29:03,860 --> 00:29:07,879
rule<font color="#CCCCCC"> for goes</font><font color="#E5E5E5"> into alert</font><font color="#CCCCCC"> center and it's</font>

745
00:29:06,140 --> 00:29:09,590
you know<font color="#E5E5E5"> my sequel database it just says</font>

746
00:29:07,880 --> 00:29:11,150
this is the alert and<font color="#E5E5E5"> it tracks like</font>

747
00:29:09,590 --> 00:29:12,439
whether it's been resolved<font color="#E5E5E5"> blah blah</font>

748
00:29:11,150 --> 00:29:13,460
blah<font color="#E5E5E5"> so it's the thing</font><font color="#CCCCCC"> you have to do</font>

749
00:29:12,440 --> 00:29:15,290
with the alerts to make sure they've

750
00:29:13,460 --> 00:29:17,270
been<font color="#E5E5E5"> resolved also they're really</font><font color="#CCCCCC"> handy</font>

751
00:29:15,290 --> 00:29:18,740
for auditors<font color="#E5E5E5"> right so you want to prove</font>

752
00:29:17,270 --> 00:29:20,330
<font color="#E5E5E5">that you're doing stuff with it with the</font>

753
00:29:18,740 --> 00:29:21,560
alerts you get this is where we do it

754
00:29:20,330 --> 00:29:24,439
<font color="#E5E5E5">and then we use this thing</font><font color="#CCCCCC"> called</font>

755
00:29:21,560 --> 00:29:28,220
security<font color="#CCCCCC"> bots that I wrote and security</font>

756
00:29:24,440 --> 00:29:30,230
<font color="#E5E5E5">bot is is just something that queries</font>

757
00:29:28,220 --> 00:29:33,470
alert<font color="#CCCCCC"> Center and says hey which alerts</font>

758
00:29:30,230 --> 00:29:35,330
are new and you<font color="#CCCCCC"> know</font><font color="#E5E5E5"> alerts that someone</font>

759
00:29:33,470 --> 00:29:37,910
hasn't<font color="#E5E5E5"> been notified on</font><font color="#CCCCCC"> ok cool I'm</font>

760
00:29:35,330 --> 00:29:39,409
gonna notify them and then and then sets

761
00:29:37,910 --> 00:29:42,470
in<font color="#CCCCCC"> alert Center that it has notified</font>

762
00:29:39,410 --> 00:29:44,120
<font color="#E5E5E5">them and manages the alert lifecycle and</font>

763
00:29:42,470 --> 00:29:45,740
this is how we use it<font color="#E5E5E5"> and this is this</font>

764
00:29:44,120 --> 00:29:47,750
<font color="#E5E5E5">is the bit that like if you're bored</font>

765
00:29:45,740 --> 00:29:50,030
right<font color="#E5E5E5"> now</font><font color="#CCCCCC"> look up for</font><font color="#E5E5E5"> one minute I</font>

766
00:29:47,750 --> 00:29:53,330
promise<font color="#E5E5E5"> and this is like the kind of</font>

767
00:29:50,030 --> 00:29:55,160
neat thing<font color="#E5E5E5"> um so what we do is we say</font>

768
00:29:53,330 --> 00:29:58,580
security<font color="#CCCCCC"> bot sends them a message and</font>

769
00:29:55,160 --> 00:30:00,920
says hey I saw<font color="#CCCCCC"> this thing</font><font color="#E5E5E5"> I just</font><font color="#CCCCCC"> see you</font>

770
00:29:58,580 --> 00:30:03,409
this<font color="#CCCCCC"> is</font><font color="#E5E5E5"> not a real command blurb</font><font color="#CCCCCC"> -</font>

771
00:30:00,920 --> 00:30:05,750
export this<font color="#CCCCCC"> was actually a picture from</font>

772
00:30:03,410 --> 00:30:08,060
the the blog post so totally fake

773
00:30:05,750 --> 00:30:09,980
but I<font color="#CCCCCC"> can see you ran the command flirt</font>

774
00:30:08,060 --> 00:30:11,629
-<font color="#CCCCCC"> exploit export on a counting server</font>

775
00:30:09,980 --> 00:30:13,960
<font color="#CCCCCC">Row 1 this is a sensitive command so</font>

776
00:30:11,630 --> 00:30:16,940
please<font color="#CCCCCC"> acknowledge by typing</font><font color="#E5E5E5"> acknowledge</font>

777
00:30:13,960 --> 00:30:19,130
<font color="#E5E5E5">cool</font><font color="#CCCCCC"> some problems with that if</font><font color="#E5E5E5"> we if we</font>

778
00:30:16,940 --> 00:30:21,140
<font color="#E5E5E5">did it just if we just stop there and</font>

779
00:30:19,130 --> 00:30:23,090
typed<font color="#E5E5E5"> acknowledge if somebody hacks a</font>

780
00:30:21,140 --> 00:30:25,040
slack account somebody<font color="#E5E5E5"> breaks steals</font>

781
00:30:23,090 --> 00:30:27,139
your credentials and delete the message

782
00:30:25,040 --> 00:30:29,540
or they type the word<font color="#CCCCCC"> acknowledge no big</font>

783
00:30:27,140 --> 00:30:31,310
deal<font color="#CCCCCC"> so what we actually do is when we</font>

784
00:30:29,540 --> 00:30:34,370
send<font color="#E5E5E5"> these directly to individuals they</font>

785
00:30:31,310 --> 00:30:36,889
<font color="#CCCCCC">get a duo push</font><font color="#E5E5E5"> right and they have to</font>

786
00:30:34,370 --> 00:30:37,189
pack that and I'm<font color="#E5E5E5"> not saying that you</font>

787
00:30:36,890 --> 00:30:40,609
know

788
00:30:37,190 --> 00:30:41,720
it's it's foolproof but I mean<font color="#E5E5E5"> that's</font>

789
00:30:40,609 --> 00:30:43,099
<font color="#E5E5E5">pretty good</font><font color="#CCCCCC"> because you have an</font>

790
00:30:41,720 --> 00:30:45,979
out-of-band way to acknowledge alerts

791
00:30:43,099 --> 00:30:47,330
now so I think that's super<font color="#E5E5E5"> handy</font><font color="#CCCCCC"> by the</font>

792
00:30:45,979 --> 00:30:48,590
way we<font color="#E5E5E5"> don't send all alerts to</font>

793
00:30:47,330 --> 00:30:50,689
individuals because there might<font color="#CCCCCC"> be that</font>

794
00:30:48,590 --> 00:30:53,029
hypothetical malicious insider case<font color="#E5E5E5"> so a</font>

795
00:30:50,690 --> 00:30:54,529
lot of the alerts are<font color="#CCCCCC"> or some of the</font>

796
00:30:53,029 --> 00:30:56,090
alerts<font color="#E5E5E5"> are higher</font><font color="#CCCCCC"> severity</font><font color="#E5E5E5"> but the</font>

797
00:30:54,529 --> 00:30:57,919
reason we do this<font color="#CCCCCC"> is because we can now</font>

798
00:30:56,090 --> 00:30:59,389
watch more things than<font color="#E5E5E5"> we</font><font color="#CCCCCC"> would watch if</font>

799
00:30:57,919 --> 00:31:00,979
it was<font color="#E5E5E5"> just us looking at the board</font>

800
00:30:59,389 --> 00:31:03,199
<font color="#E5E5E5">right if we're looking</font><font color="#CCCCCC"> at the board</font>

801
00:31:00,979 --> 00:31:04,820
<font color="#E5E5E5">we're gonna tune it down but now we can</font>

802
00:31:03,200 --> 00:31:06,320
say hey<font color="#E5E5E5"> the operators might run this</font>

803
00:31:04,820 --> 00:31:07,849
command occasionally but<font color="#CCCCCC"> it's pretty</font>

804
00:31:06,320 --> 00:31:09,619
<font color="#E5E5E5">rare</font><font color="#CCCCCC"> that they run it what if we just</font>

805
00:31:07,849 --> 00:31:11,389
<font color="#CCCCCC">ask</font><font color="#E5E5E5"> them</font><font color="#CCCCCC"> every time</font><font color="#E5E5E5"> they</font><font color="#CCCCCC"> run it</font><font color="#E5E5E5"> and by</font>

806
00:31:09,619 --> 00:31:13,369
<font color="#E5E5E5">the way we don't block the command like</font>

807
00:31:11,389 --> 00:31:15,529
we<font color="#CCCCCC"> don't say like we don't prevent</font>

808
00:31:13,369 --> 00:31:17,029
execution on it but you<font color="#E5E5E5"> know it's still</font>

809
00:31:15,529 --> 00:31:18,739
<font color="#E5E5E5">gonna be better than responding to</font><font color="#CCCCCC"> this</font>

810
00:31:17,029 --> 00:31:21,169
<font color="#E5E5E5">six months later to respond to it five</font>

811
00:31:18,739 --> 00:31:22,820
minutes later<font color="#CCCCCC"> so so that's</font><font color="#E5E5E5"> kind of the</font>

812
00:31:21,169 --> 00:31:26,869
idea<font color="#CCCCCC"> the other</font><font color="#E5E5E5"> important bit here is</font>

813
00:31:22,820 --> 00:31:28,700
<font color="#E5E5E5">don't overwhelm everyone so imagine that</font>

814
00:31:26,869 --> 00:31:33,259
you<font color="#CCCCCC"> have a counting server</font><font color="#E5E5E5"> oh one</font>

815
00:31:28,700 --> 00:31:36,669
through<font color="#CCCCCC"> o one thousand and somebody does</font>

816
00:31:33,259 --> 00:31:38,840
the same flurb - export<font color="#E5E5E5"> on all</font><font color="#CCCCCC"> 1,000</font>

817
00:31:36,669 --> 00:31:41,179
security BOTS<font color="#E5E5E5"> gonna send them a lot of</font>

818
00:31:38,840 --> 00:31:43,399
messages<font color="#CCCCCC"> so</font><font color="#E5E5E5"> you want to be mindful of</font>

819
00:31:41,179 --> 00:31:45,139
you know how<font color="#E5E5E5"> many messages you're</font>

820
00:31:43,399 --> 00:31:47,330
sending out it's really important to<font color="#E5E5E5"> not</font>

821
00:31:45,139 --> 00:31:49,008
overwhelm everyone and the other bit

822
00:31:47,330 --> 00:31:51,739
here that's important<font color="#E5E5E5"> with security</font><font color="#CCCCCC"> bot</font>

823
00:31:49,009 --> 00:31:53,869
is we<font color="#CCCCCC"> we</font><font color="#E5E5E5"> kind of have an internal team</font>

824
00:31:51,739 --> 00:31:55,929
SLA that these these alerts should get

825
00:31:53,869 --> 00:31:58,699
to the<font color="#E5E5E5"> person within a minute of them</font>

826
00:31:55,929 --> 00:32:00,769
<font color="#E5E5E5">doing</font><font color="#CCCCCC"> whatever triggered the alert</font><font color="#E5E5E5"> right</font>

827
00:31:58,700 --> 00:32:02,450
if I if I do something<font color="#CCCCCC"> that</font><font color="#E5E5E5"> triggers an</font>

828
00:32:00,769 --> 00:32:03,919
alert and the bot like finds<font color="#E5E5E5"> it and then</font>

829
00:32:02,450 --> 00:32:06,169
like a few<font color="#E5E5E5"> hours later sends them</font>

830
00:32:03,919 --> 00:32:07,580
<font color="#CCCCCC">something</font><font color="#E5E5E5"> and they've had lunch they're</font>

831
00:32:06,169 --> 00:32:10,279
<font color="#E5E5E5">just gonna be like sure I probably did</font>

832
00:32:07,580 --> 00:32:11,720
that<font color="#CCCCCC"> ACK like who knows if you send it</font>

833
00:32:10,279 --> 00:32:15,679
really<font color="#E5E5E5"> quickly that's useful because</font>

834
00:32:11,720 --> 00:32:18,440
they just did<font color="#E5E5E5"> whatever this thing was so</font>

835
00:32:15,679 --> 00:32:21,859
a verification<font color="#E5E5E5"> is important to anyone in</font>

836
00:32:18,440 --> 00:32:24,259
the<font color="#E5E5E5"> room use carbon block okay so carbon</font>

837
00:32:21,859 --> 00:32:27,049
block is is pretty cool software<font color="#CCCCCC"> and</font>

838
00:32:24,259 --> 00:32:29,509
this is not a dig on carbon black<font color="#E5E5E5"> at all</font>

839
00:32:27,049 --> 00:32:33,679
it's it's an<font color="#E5E5E5"> interesting story</font><font color="#CCCCCC"> a friend</font>

840
00:32:29,509 --> 00:32:35,149
of mine works for a company<font color="#CCCCCC"> that that's</font>

841
00:32:33,679 --> 00:32:36,590
not<font color="#E5E5E5"> in</font><font color="#CCCCCC"> security use</font><font color="#E5E5E5"> this carbon black</font>

842
00:32:35,149 --> 00:32:40,008
and<font color="#CCCCCC"> he and we were</font><font color="#E5E5E5"> talking about their</font>

843
00:32:36,590 --> 00:32:42,019
first<font color="#CCCCCC"> red</font><font color="#E5E5E5"> team exercise and I was like</font>

844
00:32:40,009 --> 00:32:44,119
<font color="#E5E5E5">oh</font><font color="#CCCCCC"> how'd it go he's like oh I mean they</font>

845
00:32:42,019 --> 00:32:46,879
just<font color="#E5E5E5"> you</font><font color="#CCCCCC"> know</font><font color="#E5E5E5"> first exercise I mean</font><font color="#CCCCCC"> they</font>

846
00:32:44,119 --> 00:32:48,109
got<font color="#E5E5E5"> everything and and I was like oh</font>

847
00:32:46,879 --> 00:32:48,730
well what tools did<font color="#CCCCCC"> you have did you</font>

848
00:32:48,109 --> 00:32:50,500
have any

849
00:32:48,730 --> 00:32:52,270
well we had carbon<font color="#E5E5E5"> block installed</font>

850
00:32:50,500 --> 00:32:53,950
<font color="#E5E5E5">everywhere oh that's pretty cool like</font>

851
00:32:52,270 --> 00:32:56,379
did you go<font color="#E5E5E5"> back and find the alert and</font>

852
00:32:53,950 --> 00:32:59,110
you know what sort<font color="#CCCCCC"> of led to the the</font>

853
00:32:56,380 --> 00:33:04,840
<font color="#E5E5E5">initial contact he's like no they</font><font color="#CCCCCC"> they</font>

854
00:32:59,110 --> 00:33:07,209
turned it off<font color="#CCCCCC"> so here's the important</font>

855
00:33:04,840 --> 00:33:09,428
bit<font color="#E5E5E5"> is that you really need Canaries</font><font color="#CCCCCC"> you</font>

856
00:33:07,210 --> 00:33:10,809
need to know that<font color="#CCCCCC"> you're actually your</font>

857
00:33:09,429 --> 00:33:12,790
<font color="#E5E5E5">your alerts are going all the way</font>

858
00:33:10,809 --> 00:33:15,460
<font color="#CCCCCC">through the system and from every host</font>

859
00:33:12,790 --> 00:33:17,080
<font color="#E5E5E5">because if you if you don't detect that</font>

860
00:33:15,460 --> 00:33:19,299
carbon block has just been turned off on

861
00:33:17,080 --> 00:33:21,100
your servers<font color="#E5E5E5"> then I just turn off carbon</font>

862
00:33:19,299 --> 00:33:24,820
<font color="#CCCCCC">block on</font><font color="#E5E5E5"> your servers and so Canaries</font>

863
00:33:21,100 --> 00:33:26,639
are super important<font color="#E5E5E5"> and one of the one</font>

864
00:33:24,820 --> 00:33:28,659
of<font color="#E5E5E5"> the things that you can do here</font><font color="#CCCCCC"> is</font>

865
00:33:26,640 --> 00:33:30,970
generate events<font color="#CCCCCC"> that you expect to</font><font color="#E5E5E5"> see</font>

866
00:33:28,660 --> 00:33:32,500
<font color="#E5E5E5">on the</font><font color="#CCCCCC"> other</font><font color="#E5E5E5"> side and then look</font><font color="#CCCCCC"> for them</font>

867
00:33:30,970 --> 00:33:34,600
<font color="#E5E5E5">on the other side via alerts and one</font>

868
00:33:32,500 --> 00:33:36,610
other<font color="#E5E5E5"> cool thing you can do is notice</font>

869
00:33:34,600 --> 00:33:38,260
when boxes are launched in an

870
00:33:36,610 --> 00:33:42,040
environment<font color="#CCCCCC"> that are not recording to</font>

871
00:33:38,260 --> 00:33:43,600
you so in AWS you have this this AWS API

872
00:33:42,040 --> 00:33:46,270
that<font color="#E5E5E5"> can tell you every instance that's</font>

873
00:33:43,600 --> 00:33:48,340
running<font color="#E5E5E5"> within your environment</font><font color="#CCCCCC"> and if a</font>

874
00:33:46,270 --> 00:33:50,830
box pops up<font color="#E5E5E5"> but never says anything to</font>

875
00:33:48,340 --> 00:33:52,750
<font color="#E5E5E5">you via these Canaries you expect to see</font>

876
00:33:50,830 --> 00:33:54,428
<font color="#CCCCCC">then it's probably</font><font color="#E5E5E5"> not doing something</font>

877
00:33:52,750 --> 00:33:55,720
you want it to be<font color="#E5E5E5"> doing or you know</font>

878
00:33:54,429 --> 00:33:58,000
maybe<font color="#E5E5E5"> someone launched it accidentally</font>

879
00:33:55,720 --> 00:34:00,450
<font color="#E5E5E5">but you now know that boxes are or not</font>

880
00:33:58,000 --> 00:34:02,950
reporting to<font color="#CCCCCC"> you it's</font><font color="#E5E5E5"> really useful</font>

881
00:34:00,450 --> 00:34:05,740
<font color="#E5E5E5">Red Team exercises are something</font>

882
00:34:02,950 --> 00:34:07,960
everyone<font color="#CCCCCC"> should do I I think at</font><font color="#E5E5E5"> least</font>

883
00:34:05,740 --> 00:34:09,790
start with<font color="#CCCCCC"> a tabletop Red</font><font color="#E5E5E5"> Team and and</font>

884
00:34:07,960 --> 00:34:11,980
go from there but this is how you

885
00:34:09,790 --> 00:34:13,600
<font color="#E5E5E5">improve all this stuff right</font><font color="#CCCCCC"> so this is</font>

886
00:34:11,980 --> 00:34:15,219
<font color="#E5E5E5">not like</font><font color="#CCCCCC"> a static set</font><font color="#E5E5E5"> of rules you need</font>

887
00:34:13,600 --> 00:34:16,750
to<font color="#E5E5E5"> evolve it you need to adapt it red</font>

888
00:34:15,219 --> 00:34:19,868
team exercises<font color="#CCCCCC"> are a great way to do</font>

889
00:34:16,750 --> 00:34:21,699
<font color="#E5E5E5">that bonus weird to call this a bonus I</font>

890
00:34:19,869 --> 00:34:25,359
guess but what if they got<font color="#E5E5E5"> in</font><font color="#CCCCCC"> anyway</font><font color="#E5E5E5"> so</font>

891
00:34:21,699 --> 00:34:26,799
breaches<font color="#CCCCCC"> happened and that sucked but if</font>

892
00:34:25,359 --> 00:34:29,619
you're<font color="#CCCCCC"> shipping all this data off</font><font color="#E5E5E5"> host</font>

893
00:34:26,800 --> 00:34:31,210
<font color="#E5E5E5">yeah it's a lot</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> data</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> you have a</font>

894
00:34:29,619 --> 00:34:33,609
ton of forensic data<font color="#E5E5E5"> and you can go</font><font color="#CCCCCC"> back</font>

895
00:34:31,210 --> 00:34:36,100
and look at that<font color="#E5E5E5"> and that is super super</font>

896
00:34:33,609 --> 00:34:37,840
useful<font color="#CCCCCC"> if you're</font><font color="#E5E5E5"> trying to respond to an</font>

897
00:34:36,100 --> 00:34:40,210
<font color="#E5E5E5">incident and you're just like dding the</font>

898
00:34:37,840 --> 00:34:41,800
disk on a box and you know looking<font color="#E5E5E5"> at</font><font color="#CCCCCC"> it</font>

899
00:34:40,210 --> 00:34:42,369
put a<font color="#E5E5E5"> good chance you'll find useful</font>

900
00:34:41,800 --> 00:34:43,750
stuff there

901
00:34:42,369 --> 00:34:45,760
<font color="#E5E5E5">but if you're</font><font color="#CCCCCC"> sending all</font><font color="#E5E5E5"> the stuff that</font>

902
00:34:43,750 --> 00:34:47,260
<font color="#CCCCCC">you potentially care about there's</font>

903
00:34:45,760 --> 00:34:48,720
there's a much better chance<font color="#CCCCCC"> that it's</font>

904
00:34:47,260 --> 00:34:50,889
just sitting<font color="#E5E5E5"> there</font>

905
00:34:48,719 --> 00:34:52,270
also you can rent some<font color="#E5E5E5"> computers</font>

906
00:34:50,889 --> 00:34:54,340
temporarily which is really cool

907
00:34:52,270 --> 00:34:56,619
so in AWS<font color="#E5E5E5"> you can do something like</font>

908
00:34:54,340 --> 00:34:58,480
<font color="#E5E5E5">launch a hundred</font><font color="#CCCCCC"> instances</font><font color="#E5E5E5"> pull all of</font>

909
00:34:56,619 --> 00:35:00,320
<font color="#CCCCCC">your old logs out</font><font color="#E5E5E5"> make a</font><font color="#CCCCCC"> brand-new</font>

910
00:34:58,480 --> 00:35:02,330
<font color="#E5E5E5">elasticsearch cluster for an hour</font>

911
00:35:00,320 --> 00:35:04,310
and look at everything<font color="#E5E5E5"> that pertains to</font>

912
00:35:02,330 --> 00:35:05,990
whatever<font color="#E5E5E5"> this incident is in fact I mean</font>

913
00:35:04,310 --> 00:35:07,670
depending<font color="#E5E5E5"> on what your limits are on a</font>

914
00:35:05,990 --> 00:35:09,709
<font color="#CCCCCC">DPS launching you can just launch as</font>

915
00:35:07,670 --> 00:35:11,300
many instances as it takes<font color="#E5E5E5"> to put all of</font>

916
00:35:09,710 --> 00:35:13,040
<font color="#E5E5E5">your log data online</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> you can</font>

917
00:35:11,300 --> 00:35:14,930
probably do<font color="#CCCCCC"> that in</font><font color="#E5E5E5"> an hour or two</font><font color="#CCCCCC"> right</font>

918
00:35:13,040 --> 00:35:15,830
<font color="#CCCCCC">that's super useful because</font><font color="#E5E5E5"> then when</font>

919
00:35:14,930 --> 00:35:17,390
you're done you just turn them off

920
00:35:15,830 --> 00:35:21,230
<font color="#CCCCCC">that's really hard to do in a data</font>

921
00:35:17,390 --> 00:35:22,790
center<font color="#CCCCCC"> it's not very</font><font color="#E5E5E5"> cost effective so I</font>

922
00:35:21,230 --> 00:35:24,620
think I kind<font color="#CCCCCC"> of flew through</font><font color="#E5E5E5"> this a bit</font>

923
00:35:22,790 --> 00:35:27,340
<font color="#E5E5E5">but here's the summary don't let</font>

924
00:35:24,620 --> 00:35:29,240
perfection be the<font color="#E5E5E5"> enemy of good</font><font color="#CCCCCC"> so</font>

925
00:35:27,340 --> 00:35:31,940
anyone<font color="#E5E5E5"> that wants</font><font color="#CCCCCC"> to raise their hand</font>

926
00:35:29,240 --> 00:35:33,500
with<font color="#CCCCCC"> a well actually</font><font color="#E5E5E5"> okay but but I</font>

927
00:35:31,940 --> 00:35:35,240
<font color="#E5E5E5">think that this is a good step forward</font>

928
00:35:33,500 --> 00:35:37,400
<font color="#CCCCCC">right</font><font color="#E5E5E5"> like you want to do these</font><font color="#CCCCCC"> things</font>

929
00:35:35,240 --> 00:35:39,259
and don't don't<font color="#E5E5E5"> just</font><font color="#CCCCCC"> assume that like</font>

930
00:35:37,400 --> 00:35:40,910
everything<font color="#CCCCCC"> about this has to be</font><font color="#E5E5E5"> perfect</font>

931
00:35:39,260 --> 00:35:43,400
sure there<font color="#E5E5E5"> are</font><font color="#CCCCCC"> ways to</font><font color="#E5E5E5"> subvert this but</font>

932
00:35:40,910 --> 00:35:45,379
you're putting<font color="#E5E5E5"> stuff out there</font><font color="#CCCCCC"> that has</font>

933
00:35:43,400 --> 00:35:47,150
a good<font color="#CCCCCC"> chance of catching things</font><font color="#E5E5E5"> and the</font>

934
00:35:45,380 --> 00:35:48,860
more of<font color="#E5E5E5"> those</font><font color="#CCCCCC"> you add on</font><font color="#E5E5E5"> the more little</font>

935
00:35:47,150 --> 00:35:50,960
things you do<font color="#E5E5E5"> the better it gets</font>

936
00:35:48,860 --> 00:35:54,500
<font color="#E5E5E5">so don't assume your solution has to</font><font color="#CCCCCC"> be</font>

937
00:35:50,960 --> 00:35:55,970
perfect out of<font color="#CCCCCC"> the</font><font color="#E5E5E5"> gate and log</font>

938
00:35:54,500 --> 00:35:57,740
<font color="#E5E5E5">everything and look at your logs</font><font color="#CCCCCC"> I mean</font>

939
00:35:55,970 --> 00:35:58,279
I<font color="#CCCCCC"> think</font><font color="#E5E5E5"> that's basically this is the</font>

940
00:35:57,740 --> 00:36:01,669
TLDR

941
00:35:58,280 --> 00:36:03,140
<font color="#E5E5E5">log log everything you can it's cheap to</font>

942
00:36:01,670 --> 00:36:05,840
do you know like<font color="#E5E5E5"> it's really easy</font><font color="#CCCCCC"> to</font>

943
00:36:03,140 --> 00:36:07,430
<font color="#E5E5E5">send all this data and</font><font color="#CCCCCC"> you know fifteen</font>

944
00:36:05,840 --> 00:36:09,650
<font color="#CCCCCC">years ago this would</font><font color="#E5E5E5"> be a lot</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> data</font>

945
00:36:07,430 --> 00:36:13,190
<font color="#CCCCCC">now it's</font><font color="#E5E5E5"> not a lot</font><font color="#CCCCCC"> of data in in the</font>

946
00:36:09,650 --> 00:36:15,740
grand<font color="#E5E5E5"> scheme so as promised that's</font>

947
00:36:13,190 --> 00:36:18,250
that's a shortened link to a<font color="#E5E5E5"> github gist</font>

948
00:36:15,740 --> 00:36:20,930
<font color="#E5E5E5">but that</font><font color="#CCCCCC"> knot at the top</font><font color="#E5E5E5"> will get you</font>

949
00:36:18,250 --> 00:36:22,880
<font color="#E5E5E5">links</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> all the stuff I mentioned the</font>

950
00:36:20,930 --> 00:36:24,859
other<font color="#CCCCCC"> note is go on it like I</font><font color="#E5E5E5"> said is</font>

951
00:36:22,880 --> 00:36:28,040
<font color="#CCCCCC">gonna</font><font color="#E5E5E5"> be released</font><font color="#CCCCCC"> at O'Reilly</font><font color="#E5E5E5"> security</font>

952
00:36:24,860 --> 00:36:30,320
next week so we're actually gonna it's

953
00:36:28,040 --> 00:36:33,560
actually been in use in<font color="#CCCCCC"> production</font><font color="#E5E5E5"> for a</font>

954
00:36:30,320 --> 00:36:35,140
year but we're going<font color="#CCCCCC"> to what we what we</font>

955
00:36:33,560 --> 00:36:38,000
<font color="#E5E5E5">were waiting</font><font color="#CCCCCC"> on for release was actually</font>

956
00:36:35,140 --> 00:36:39,529
having<font color="#E5E5E5"> good documentation an example so</font>

957
00:36:38,000 --> 00:36:41,060
people don't just go oh<font color="#CCCCCC"> that's a neat</font>

958
00:36:39,530 --> 00:36:42,680
tool star it and then never look at it

959
00:36:41,060 --> 00:36:43,910
<font color="#E5E5E5">again</font><font color="#CCCCCC"> we're gonna put stuff</font><font color="#E5E5E5"> out there</font><font color="#CCCCCC"> so</font>

960
00:36:42,680 --> 00:36:45,740
<font color="#CCCCCC">that</font><font color="#E5E5E5"> you can say</font><font color="#CCCCCC"> oh this is how it would</font>

961
00:36:43,910 --> 00:36:47,540
stand up the<font color="#CCCCCC"> environment and</font><font color="#E5E5E5"> and start</font>

962
00:36:45,740 --> 00:36:48,830
looking<font color="#CCCCCC"> at this</font><font color="#E5E5E5"> stuff yeah so the</font>

963
00:36:47,540 --> 00:36:50,990
<font color="#CCCCCC">question is when you're</font><font color="#E5E5E5"> capturing</font>

964
00:36:48,830 --> 00:36:53,480
exactly do you<font color="#E5E5E5"> capture parameters to</font>

965
00:36:50,990 --> 00:36:55,490
commands<font color="#E5E5E5"> that you might not want</font><font color="#CCCCCC"> to be</font>

966
00:36:53,480 --> 00:36:57,860
<font color="#E5E5E5">analog we do and that's that's part of</font>

967
00:36:55,490 --> 00:37:00,620
why<font color="#E5E5E5"> only four people have access to</font><font color="#CCCCCC"> SEC</font>

968
00:36:57,860 --> 00:37:03,020
ops<font color="#CCCCCC"> so the number of people</font><font color="#E5E5E5"> that can see</font>

969
00:37:00,620 --> 00:37:05,210
those parameters<font color="#E5E5E5"> in commands is very</font>

970
00:37:03,020 --> 00:37:07,130
small<font color="#CCCCCC"> there</font><font color="#E5E5E5"> is there's a trust thing</font>

971
00:37:05,210 --> 00:37:08,990
there right like we<font color="#E5E5E5"> potentially if</font>

972
00:37:07,130 --> 00:37:10,260
somebody types<font color="#CCCCCC"> a command</font><font color="#E5E5E5"> that has a</font>

973
00:37:08,990 --> 00:37:12,750
<font color="#CCCCCC">password on you know</font>

974
00:37:10,260 --> 00:37:15,830
on the<font color="#E5E5E5"> command line we can probably go</font>

975
00:37:12,750 --> 00:37:18,180
look at that<font color="#E5E5E5"> and figure it out but I</font>

976
00:37:15,830 --> 00:37:19,710
think that's an<font color="#E5E5E5"> acceptable risk</font><font color="#CCCCCC"> when</font>

977
00:37:18,180 --> 00:37:21,779
it's not<font color="#CCCCCC"> just a log that anyone in your</font>

978
00:37:19,710 --> 00:37:23,070
<font color="#CCCCCC">company can search and look for</font><font color="#E5E5E5"> so so we</font>

979
00:37:21,780 --> 00:37:25,650
<font color="#E5E5E5">absolutely</font><font color="#CCCCCC"> capture</font><font color="#E5E5E5"> that the other</font>

980
00:37:23,070 --> 00:37:27,060
concern we we had with sort<font color="#E5E5E5"> of I mean we</font>

981
00:37:25,650 --> 00:37:28,859
could we could sanitize<font color="#CCCCCC"> that we could</font>

982
00:37:27,060 --> 00:37:30,690
potentially<font color="#E5E5E5"> scrub this out we could look</font>

983
00:37:28,859 --> 00:37:33,420
for<font color="#E5E5E5"> it there</font><font color="#CCCCCC"> are a lot of</font><font color="#E5E5E5"> different ways</font>

984
00:37:30,690 --> 00:37:35,010
<font color="#CCCCCC">to do</font><font color="#E5E5E5"> things on the command line</font><font color="#CCCCCC"> and it</font>

985
00:37:33,420 --> 00:37:36,750
would have<font color="#E5E5E5"> been really difficult</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> also</font>

986
00:37:35,010 --> 00:37:38,520
potentially opens you up to<font color="#E5E5E5"> something</font>

987
00:37:36,750 --> 00:37:39,630
where an attacker knows that you're

988
00:37:38,520 --> 00:37:41,640
scrubbing these they might<font color="#E5E5E5"> be able</font><font color="#CCCCCC"> to</font>

989
00:37:39,630 --> 00:37:43,590
<font color="#E5E5E5">hide something in there so we just</font>

990
00:37:41,640 --> 00:37:46,500
decided<font color="#CCCCCC"> to you know to just log</font>

991
00:37:43,590 --> 00:37:47,640
<font color="#E5E5E5">everything and keep it and and then</font>

992
00:37:46,500 --> 00:37:49,290
<font color="#E5E5E5">encrypt the backups and make sure you</font>

993
00:37:47,640 --> 00:37:50,490
can't<font color="#E5E5E5"> just pull them</font><font color="#CCCCCC"> out</font><font color="#E5E5E5"> of s3 and steal</font>

994
00:37:49,290 --> 00:37:52,590
<font color="#E5E5E5">all the</font><font color="#CCCCCC"> passwords that</font><font color="#E5E5E5"> kind of thing</font>

995
00:37:50,490 --> 00:37:53,850
yeah so so the question<font color="#CCCCCC"> is does this</font>

996
00:37:52,590 --> 00:37:55,140
mean the log collecting we do is

997
00:37:53,850 --> 00:37:56,220
separate from<font color="#E5E5E5"> all the application logs</font>

998
00:37:55,140 --> 00:37:58,950
<font color="#CCCCCC">yeah</font><font color="#E5E5E5"> absolutely</font>

999
00:37:56,220 --> 00:38:01,169
so in the<font color="#E5E5E5"> our syslog config you can you</font>

1000
00:37:58,950 --> 00:38:04,500
can send<font color="#E5E5E5"> to multiple different locations</font>

1001
00:38:01,170 --> 00:38:06,990
<font color="#CCCCCC">the logs that we that we take in like go</font>

1002
00:38:04,500 --> 00:38:08,850
<font color="#E5E5E5">audit those don't get sent to the the</font>

1003
00:38:06,990 --> 00:38:10,649
operational logging infrastructure right

1004
00:38:08,850 --> 00:38:13,170
they only<font color="#CCCCCC"> go to the</font><font color="#E5E5E5"> sec ops</font>

1005
00:38:10,650 --> 00:38:16,170
infrastructure some logs we send to both

1006
00:38:13,170 --> 00:38:17,640
<font color="#E5E5E5">like I don't I don't remember what they</font>

1007
00:38:16,170 --> 00:38:19,619
are<font color="#E5E5E5"> a fan but like</font><font color="#CCCCCC"> there's</font><font color="#E5E5E5"> certain</font><font color="#CCCCCC"> types</font>

1008
00:38:17,640 --> 00:38:21,569
<font color="#E5E5E5">of logs where it's useful</font><font color="#CCCCCC"> for both of us</font>

1009
00:38:19,619 --> 00:38:24,260
<font color="#E5E5E5">to have it but absolutely so one way you</font>

1010
00:38:21,570 --> 00:38:28,410
can do<font color="#CCCCCC"> that is a detail</font><font color="#E5E5E5"> of our syslog is</font>

1011
00:38:24,260 --> 00:38:31,920
<font color="#E5E5E5">you can just set up another FIFO another</font>

1012
00:38:28,410 --> 00:38:33,990
socket<font color="#E5E5E5"> locally and just have that as the</font>

1013
00:38:31,920 --> 00:38:35,580
<font color="#CCCCCC">the place to send logs so like you can</font>

1014
00:38:33,990 --> 00:38:38,069
log to a different<font color="#E5E5E5"> version of dev blog</font>

1015
00:38:35,580 --> 00:38:40,859
<font color="#E5E5E5">locally on a host and then that that</font>

1016
00:38:38,070 --> 00:38:43,950
goes<font color="#E5E5E5"> to a different place yeah so we we</font>

1017
00:38:40,859 --> 00:38:46,220
<font color="#CCCCCC">actually split</font><font color="#E5E5E5"> that up does anyone else</font>

1018
00:38:43,950 --> 00:38:46,220
<font color="#E5E5E5">have a question</font>

1019
00:38:48,190 --> 00:38:54,210
going done<font color="#CCCCCC"> okay thank you</font><font color="#E5E5E5"> very much</font><font color="#CCCCCC"> all</font>

1020
00:38:51,549 --> 00:38:54,210
<font color="#CCCCCC">right thanks</font>

