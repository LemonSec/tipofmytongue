1
00:00:06,899 --> 00:00:09,080
foreign

2
00:00:17,730 --> 00:00:20,850
[Music]

3
00:00:30,430 --> 00:00:33,489
[Music]

4
00:00:37,280 --> 00:00:45,520
[Music]

5
00:00:51,100 --> 00:00:54,199
[Music]

6
00:00:54,199 --> 00:00:58,980
thanks everyone welcome to other hack

7
00:00:58,980 --> 00:01:02,820
apis in 15 minutes or less

8
00:01:02,820 --> 00:01:05,640
um a little bit of background on um on

9
00:01:05,640 --> 00:01:08,280
the talk and myself I my name is Igor

10
00:01:08,280 --> 00:01:10,799
Matlin work for this company called Data

11
00:01:10,799 --> 00:01:12,900
serum

12
00:01:12,900 --> 00:01:14,220
um

13
00:01:14,220 --> 00:01:18,020
started out as a developer wrote um

14
00:01:18,020 --> 00:01:21,180
code I'm sure some of it was good

15
00:01:21,180 --> 00:01:23,939
most of it was probably not so good

16
00:01:23,939 --> 00:01:25,799
but I can tell you back when I was

17
00:01:25,799 --> 00:01:26,939
writing code

18
00:01:26,939 --> 00:01:30,000
we didn't really care about security at

19
00:01:30,000 --> 00:01:34,580
all or it's very little tiny bit maybe

20
00:01:34,860 --> 00:01:37,320
um try to basically

21
00:01:37,320 --> 00:01:39,420
keeping applications from crashing was

22
00:01:39,420 --> 00:01:41,479
the biggest

23
00:01:41,479 --> 00:01:45,360
concern but um things change so I

24
00:01:45,360 --> 00:01:47,659
switched the application security maybe

25
00:01:47,659 --> 00:01:51,180
12 about 12 years ago worked for a

26
00:01:51,180 --> 00:01:53,280
number of vendors

27
00:01:53,280 --> 00:01:55,680
running social architecture now at data

28
00:01:55,680 --> 00:01:56,939
serum

29
00:01:56,939 --> 00:01:59,040
the talk is about apis

30
00:01:59,040 --> 00:02:01,560
but specifically about Model A

31
00:02:01,560 --> 00:02:05,040
applications and apis that are used by

32
00:02:05,040 --> 00:02:06,420
mobile applications

33
00:02:06,420 --> 00:02:08,699
it's kind of based on real events or at

34
00:02:08,699 --> 00:02:11,160
least the talk was inspired by real

35
00:02:11,160 --> 00:02:14,299
events real hacks

36
00:02:14,459 --> 00:02:17,300
let's do it

37
00:02:17,640 --> 00:02:19,379
now

38
00:02:19,379 --> 00:02:21,060
as I was

39
00:02:21,060 --> 00:02:23,220
preparing

40
00:02:23,220 --> 00:02:25,879
for the talk right realize that the

41
00:02:25,879 --> 00:02:29,640
title is how to hack apis in 15 minutes

42
00:02:29,640 --> 00:02:31,319
or less

43
00:02:31,319 --> 00:02:34,800
but we have an hour here right

44
00:02:34,800 --> 00:02:37,920
so what are we gonna do for the other 45

45
00:02:37,920 --> 00:02:40,160
minutes

46
00:02:40,160 --> 00:02:44,459
uh so our marketing marketing team to

47
00:02:44,459 --> 00:02:46,200
the rescue they've created they're very

48
00:02:46,200 --> 00:02:48,480
informative and fun presentation about

49
00:02:48,480 --> 00:02:50,580
our company and the products

50
00:02:50,580 --> 00:02:52,459
so I hope you'll enjoy it

51
00:02:52,459 --> 00:02:55,080
not today though because obviously I'm

52
00:02:55,080 --> 00:02:56,640
not going to show any marketing slides

53
00:02:56,640 --> 00:02:59,340
right so yeah please don't leave stay

54
00:02:59,340 --> 00:03:01,379
stay there in the back

55
00:03:01,379 --> 00:03:04,280
hopefully you'll enjoy it someday later

56
00:03:04,280 --> 00:03:06,480
we don't even have marketing department

57
00:03:06,480 --> 00:03:10,860
at data theorem so but why 15 minutes

58
00:03:10,860 --> 00:03:13,620
all right that's because that's usually

59
00:03:13,620 --> 00:03:16,440
hackers have they don't

60
00:03:16,440 --> 00:03:18,599
they don't they're not pen testers you

61
00:03:18,599 --> 00:03:21,300
don't hire them for two people two weeks

62
00:03:21,300 --> 00:03:23,280
on a project right

63
00:03:23,280 --> 00:03:26,159
they want to get in grab something

64
00:03:26,159 --> 00:03:30,180
that's uh easy to grab and move on sure

65
00:03:30,180 --> 00:03:34,019
there's some who will spend days and you

66
00:03:34,019 --> 00:03:36,239
know maybe months and years designing

67
00:03:36,239 --> 00:03:38,099
specific attack

68
00:03:38,099 --> 00:03:39,780
solarwind

69
00:03:39,780 --> 00:03:42,959
comes to mind right probably a lot of

70
00:03:42,959 --> 00:03:45,480
preparation went into that one but most

71
00:03:45,480 --> 00:03:47,580
hackers just want to get in

72
00:03:47,580 --> 00:03:52,440
grab data move on so 15 minutes is yeah

73
00:03:52,440 --> 00:03:54,180
basically

74
00:03:54,180 --> 00:03:56,220
what they want to spend on your website

75
00:03:56,220 --> 00:04:00,080
on your company assets Etc

76
00:04:01,860 --> 00:04:05,000
all right well before

77
00:04:05,099 --> 00:04:06,720
uh we're gonna get in the technical

78
00:04:06,720 --> 00:04:07,860
details

79
00:04:07,860 --> 00:04:09,900
just want to kind of make a distinction

80
00:04:09,900 --> 00:04:13,019
between hackers who hack for profit

81
00:04:13,019 --> 00:04:15,959
for fame for all of those things

82
00:04:15,959 --> 00:04:19,019
and security researchers like us right

83
00:04:19,019 --> 00:04:21,899
who um like probably some of you here in

84
00:04:21,899 --> 00:04:22,860
the

85
00:04:22,860 --> 00:04:24,840
actually that's good good question how

86
00:04:24,840 --> 00:04:26,580
many of you consider yourself security

87
00:04:26,580 --> 00:04:28,320
researchers

88
00:04:28,320 --> 00:04:30,060
okay I mean you would consider yourself

89
00:04:30,060 --> 00:04:31,740
hackers

90
00:04:31,740 --> 00:04:33,660
well it's just good overlap right good

91
00:04:33,660 --> 00:04:35,580
overlap yeah

92
00:04:35,580 --> 00:04:37,500
yeah so maybe like why don't you care

93
00:04:37,500 --> 00:04:40,560
what color hat you wear but um you know

94
00:04:40,560 --> 00:04:44,759
uh researchers usually do it because you

95
00:04:44,759 --> 00:04:46,500
know they they like the challenge it's

96
00:04:46,500 --> 00:04:49,560
an intellectual stimulation right for

97
00:04:49,560 --> 00:04:51,479
example

98
00:04:51,479 --> 00:04:54,660
is our board member Dan Bonnet who's a

99
00:04:54,660 --> 00:04:56,340
professor at Stanford

100
00:04:56,340 --> 00:04:59,060
famous guy

101
00:04:59,400 --> 00:05:02,239
and um

102
00:05:02,759 --> 00:05:06,000
researchers take time to do their work

103
00:05:06,000 --> 00:05:09,240
right so uh there's an interesting

104
00:05:09,240 --> 00:05:12,540
very interesting uh research it's a link

105
00:05:12,540 --> 00:05:15,600
on my slides done by a group of

106
00:05:15,600 --> 00:05:17,699
researchers so graduate students from

107
00:05:17,699 --> 00:05:21,060
multiple universities right

108
00:05:21,060 --> 00:05:24,419
on defeating machine learning and

109
00:05:24,419 --> 00:05:26,460
essentially self-driving cars right so

110
00:05:26,460 --> 00:05:27,479
what they

111
00:05:27,479 --> 00:05:29,820
uh done is they

112
00:05:29,820 --> 00:05:33,720
placed uh strategically placed a little

113
00:05:33,720 --> 00:05:36,780
uh pieces of black tape

114
00:05:36,780 --> 00:05:38,639
around the stop sign

115
00:05:38,639 --> 00:05:41,160
and that was sufficient to defeat a

116
00:05:41,160 --> 00:05:44,039
self-driving algorithm that so that it

117
00:05:44,039 --> 00:05:46,440
doesn't recognize that as a stop sign

118
00:05:46,440 --> 00:05:49,320
anymore

119
00:05:49,320 --> 00:05:52,080
now obviously you know you drive

120
00:05:52,080 --> 00:05:54,720
around you probably would just shrug it

121
00:05:54,720 --> 00:05:57,419
off and it is a stop sign to us right

122
00:05:57,419 --> 00:05:58,979
machine learning

123
00:05:58,979 --> 00:06:02,340
uh it's not and so it did take quite a

124
00:06:02,340 --> 00:06:05,100
bit to figure out how to poison machine

125
00:06:05,100 --> 00:06:08,539
learning model

126
00:06:09,780 --> 00:06:13,320
several years years of research actually

127
00:06:13,320 --> 00:06:17,699
but quite a interesting paper to read

128
00:06:17,699 --> 00:06:20,180
now

129
00:06:21,900 --> 00:06:24,120
if I were a hacker I really wouldn't

130
00:06:24,120 --> 00:06:26,520
care how the poison machine learning

131
00:06:26,520 --> 00:06:27,479
model

132
00:06:27,479 --> 00:06:30,740
just grab a stop sign

133
00:06:33,720 --> 00:06:36,300
and go stand in the middle of uh

134
00:06:36,300 --> 00:06:38,900
Expressway

135
00:06:39,780 --> 00:06:41,280
hi

136
00:06:41,280 --> 00:06:44,280
now obviously you and I driving this is

137
00:06:44,280 --> 00:06:45,960
Southern California

138
00:06:45,960 --> 00:06:48,419
uh I probably wouldn't last more than a

139
00:06:48,419 --> 00:06:50,100
couple minutes get hit by a car right

140
00:06:50,100 --> 00:06:53,880
nobody cares nobody's gonna stop but

141
00:06:53,880 --> 00:06:55,080
what would

142
00:06:55,080 --> 00:06:58,400
a self-driving car do

143
00:06:58,800 --> 00:07:01,020
stop in the middle of Expressway

144
00:07:01,020 --> 00:07:03,720
maybe they do recognize that there's a

145
00:07:03,720 --> 00:07:06,660
stop sign it's not poison to anything

146
00:07:06,660 --> 00:07:09,020
right

147
00:07:09,840 --> 00:07:12,720
I don't recommend that you try it uh in

148
00:07:12,720 --> 00:07:15,479
the middle of I35 around here I've seen

149
00:07:15,479 --> 00:07:19,740
people drive so probably shouldn't

150
00:07:19,740 --> 00:07:21,479
but um

151
00:07:21,479 --> 00:07:22,800
also

152
00:07:22,800 --> 00:07:25,560
when I read a disclaimer

153
00:07:25,560 --> 00:07:27,259
that

154
00:07:27,259 --> 00:07:32,580
any resemblances or logos or uh mentions

155
00:07:32,580 --> 00:07:34,139
of any company

156
00:07:34,139 --> 00:07:36,180
particular one whether it's self-driving

157
00:07:36,180 --> 00:07:38,039
or application anything it's pretty

158
00:07:38,039 --> 00:07:40,440
coincidental right

159
00:07:40,440 --> 00:07:43,259
no real companies were harmed in the

160
00:07:43,259 --> 00:07:46,520
production of this presentation

161
00:07:46,919 --> 00:07:49,380
but we actually how many do you think

162
00:07:49,380 --> 00:07:52,319
how many of you think that and

163
00:07:52,319 --> 00:07:54,300
self-driving car would stop

164
00:07:54,300 --> 00:07:56,280
if I

165
00:07:56,280 --> 00:07:57,720
yeah man I think it's a reasonable

166
00:07:57,720 --> 00:08:00,120
assumption right it could

167
00:08:00,120 --> 00:08:01,860
all right

168
00:08:01,860 --> 00:08:04,919
so a hacker we don't really spend years

169
00:08:04,919 --> 00:08:08,340
on Research they would yeah

170
00:08:08,340 --> 00:08:10,800
probably just go out and mess with

171
00:08:10,800 --> 00:08:12,780
others with the traffic

172
00:08:12,780 --> 00:08:14,819
there was a very

173
00:08:14,819 --> 00:08:16,860
I guess

174
00:08:16,860 --> 00:08:19,560
uh Infamous case where a researcher

175
00:08:19,560 --> 00:08:22,800
loaded up one of those kids wagons with

176
00:08:22,800 --> 00:08:27,180
uh Google phones a map running maps and

177
00:08:27,180 --> 00:08:29,879
just walked across the bridge so that

178
00:08:29,879 --> 00:08:32,458
Google Maps thinks that you know traffic

179
00:08:32,458 --> 00:08:33,719
is stuck

180
00:08:33,719 --> 00:08:36,659
right all you have is just just just you

181
00:08:36,659 --> 00:08:38,760
know you walk around and start the

182
00:08:38,760 --> 00:08:42,659
rerouting started rerouting people to uh

183
00:08:42,659 --> 00:08:46,380
to other Bridges right

184
00:08:46,380 --> 00:08:49,620
but yeah that's that's hacker right mess

185
00:08:49,620 --> 00:08:51,779
with other people right before whatever

186
00:08:51,779 --> 00:08:56,180
it is uh whatever reason

187
00:08:57,300 --> 00:08:58,920
okay so

188
00:08:58,920 --> 00:09:00,979
um

189
00:09:01,380 --> 00:09:03,920
now

190
00:09:07,560 --> 00:09:09,839
some of you might say oops it's too fast

191
00:09:09,839 --> 00:09:11,339
too fast some of you might say wait wait

192
00:09:11,339 --> 00:09:14,640
a second or wait a second I'm sure Tesla

193
00:09:14,640 --> 00:09:16,560
and their self-learning algorithm they

194
00:09:16,560 --> 00:09:19,800
know it's a expressway right for five

195
00:09:19,800 --> 00:09:23,339
there are no stop signs an expressway so

196
00:09:23,339 --> 00:09:26,220
we're just gonna ignore

197
00:09:26,220 --> 00:09:30,180
this guy standing with a stop sign right

198
00:09:30,180 --> 00:09:32,820
but uh what about this situation right

199
00:09:32,820 --> 00:09:35,100
I'm I'm from a little bit West

200
00:09:35,100 --> 00:09:37,440
we have construction season

201
00:09:37,440 --> 00:09:39,839
that starts in March and

202
00:09:39,839 --> 00:09:41,820
you know goes through November probably

203
00:09:41,820 --> 00:09:42,839
right

204
00:09:42,839 --> 00:09:45,839
lots of construction lots of folks

205
00:09:45,839 --> 00:09:50,580
standing with either slow or stop

206
00:09:50,580 --> 00:09:52,800
well you're supposed to stop right if

207
00:09:52,800 --> 00:09:54,959
you see a guy

208
00:09:54,959 --> 00:09:57,360
with a stop sign

209
00:09:57,360 --> 00:10:00,440
interesting right

210
00:10:05,279 --> 00:10:08,640
I mean it doesn't have to be a stop sign

211
00:10:08,640 --> 00:10:11,519
maybe I can just do uh say that hey it's

212
00:10:11,519 --> 00:10:13,200
55 here

213
00:10:13,200 --> 00:10:17,220
speed up or it's 25 here slow down

214
00:10:17,220 --> 00:10:19,580
right

215
00:10:19,620 --> 00:10:20,880
so

216
00:10:20,880 --> 00:10:24,959
all this kind of illustrates the the

217
00:10:24,959 --> 00:10:26,820
point

218
00:10:26,820 --> 00:10:29,339
trackers just want to mess with things

219
00:10:29,339 --> 00:10:31,260
with others

220
00:10:31,260 --> 00:10:34,200
easy to do something simple

221
00:10:34,200 --> 00:10:36,860
no

222
00:10:37,560 --> 00:10:41,540
sophisticated research typically

223
00:10:43,579 --> 00:10:47,579
well back to API security we came here

224
00:10:47,579 --> 00:10:48,480
too

225
00:10:48,480 --> 00:10:50,519
actually

226
00:10:50,519 --> 00:10:53,779
um hear about API security

227
00:10:57,240 --> 00:11:01,040
now when this talk was um

228
00:11:02,279 --> 00:11:04,800
was was getting prepared actual couple

229
00:11:04,800 --> 00:11:06,720
years ago

230
00:11:06,720 --> 00:11:09,120
this was a real question right is API

231
00:11:09,120 --> 00:11:12,779
secure uh hacking a real problem

232
00:11:12,779 --> 00:11:15,420
it it's more of a statement these days

233
00:11:15,420 --> 00:11:17,880
right we all know that API is getting

234
00:11:17,880 --> 00:11:21,420
hacked on a regular basis so um

235
00:11:21,420 --> 00:11:22,500
hopefully

236
00:11:22,500 --> 00:11:24,720
everybody knows that it's a big huge

237
00:11:24,720 --> 00:11:27,240
attack Vector for everyone right

238
00:11:27,240 --> 00:11:29,160
and so the answer is yes

239
00:11:29,160 --> 00:11:30,839
but we used to

240
00:11:30,839 --> 00:11:34,680
yeah okay go back and forth

241
00:11:34,680 --> 00:11:37,560
um and the conversations

242
00:11:37,560 --> 00:11:39,720
but uh

243
00:11:39,720 --> 00:11:41,519
as I mentioned this talk is based on

244
00:11:41,519 --> 00:11:43,620
real events real hacks

245
00:11:43,620 --> 00:11:45,300
there's one of them

246
00:11:45,300 --> 00:11:47,880
so a few years ago

247
00:11:47,880 --> 00:11:50,720
um our CEO a former hacker hacker

248
00:11:50,720 --> 00:11:54,899
himself noticed this pattern of attacks

249
00:11:54,899 --> 00:11:57,120
and mobile apps

250
00:11:57,120 --> 00:11:58,860
I just won

251
00:11:58,860 --> 00:11:59,820
um

252
00:11:59,820 --> 00:12:03,380
hacker group that um

253
00:12:03,380 --> 00:12:06,480
downloaded apps from app

254
00:12:06,480 --> 00:12:09,600
Apple app store Google Play Store

255
00:12:09,600 --> 00:12:11,820
reverse engineered them

256
00:12:11,820 --> 00:12:14,399
extracted apis

257
00:12:14,399 --> 00:12:16,260
and basically

258
00:12:16,260 --> 00:12:17,700
tried them all

259
00:12:17,700 --> 00:12:19,820
nothing sophisticated

260
00:12:19,820 --> 00:12:22,260
now of course they're reverse

261
00:12:22,260 --> 00:12:24,000
engineering of mobile apps happens all

262
00:12:24,000 --> 00:12:25,440
the time right there are legitimate

263
00:12:25,440 --> 00:12:27,660
reasons to do that researchers company

264
00:12:27,660 --> 00:12:31,040
like ours our competitors

265
00:12:31,040 --> 00:12:33,120
but um

266
00:12:33,120 --> 00:12:37,260
hackers these hackers just um

267
00:12:37,260 --> 00:12:38,700
um

268
00:12:38,700 --> 00:12:39,959
try

269
00:12:39,959 --> 00:12:41,760
everything that they could find in an

270
00:12:41,760 --> 00:12:43,800
app so in this particular app

271
00:12:43,800 --> 00:12:47,459
the apis were not protected admin apis

272
00:12:47,459 --> 00:12:49,079
were not protect it

273
00:12:49,079 --> 00:12:53,279
uh the the application itself was uh

274
00:12:53,279 --> 00:12:55,800
was written in react native essentially

275
00:12:55,800 --> 00:12:58,620
JavaScript easy to unpack when you get

276
00:12:58,620 --> 00:13:00,240
it

277
00:13:00,240 --> 00:13:01,260
um

278
00:13:01,260 --> 00:13:04,079
you know no credentials needed you could

279
00:13:04,079 --> 00:13:07,980
just download the entire user database

280
00:13:07,980 --> 00:13:10,579
and yeah of course every application

281
00:13:10,579 --> 00:13:13,760
user databases

282
00:13:13,760 --> 00:13:16,680
sensitive data in this particular

283
00:13:16,680 --> 00:13:19,320
particular case the app was targeting

284
00:13:19,320 --> 00:13:21,240
conservative Warriors

285
00:13:21,240 --> 00:13:23,760
you know you can probably

286
00:13:23,760 --> 00:13:26,700
get a lot of information just by looking

287
00:13:26,700 --> 00:13:28,320
at the user list

288
00:13:28,320 --> 00:13:30,779
of course email addresses names

289
00:13:30,779 --> 00:13:32,959
Etc

290
00:13:33,600 --> 00:13:38,180
so that's what March 2019

291
00:13:39,300 --> 00:13:41,100
a few months later

292
00:13:41,100 --> 00:13:43,620
another mobile app was hacked in this

293
00:13:43,620 --> 00:13:44,839
case

294
00:13:44,839 --> 00:13:50,720
an event planning app in Australia

295
00:13:51,000 --> 00:13:54,060
I almost tripped and it's seven minutes

296
00:13:54,060 --> 00:13:57,060
uh

297
00:13:58,200 --> 00:14:00,360
so you know your event planning app used

298
00:14:00,360 --> 00:14:02,579
by University students right

299
00:14:02,579 --> 00:14:03,660
again

300
00:14:03,660 --> 00:14:05,880
very similar attack a search API

301
00:14:05,880 --> 00:14:09,380
embedded or used by the mobile app

302
00:14:09,380 --> 00:14:12,660
uh could basically used to get

303
00:14:12,660 --> 00:14:15,060
information on any user you could say

304
00:14:15,060 --> 00:14:17,940
search users starting with a it would

305
00:14:17,940 --> 00:14:21,000
give you back a list of

306
00:14:21,000 --> 00:14:23,459
um all the users because usernames start

307
00:14:23,459 --> 00:14:25,980
with a and you can go on there was no

308
00:14:25,980 --> 00:14:29,160
rate limiting on the API either so quick

309
00:14:29,160 --> 00:14:30,120
script

310
00:14:30,120 --> 00:14:32,220
you have the entire user database at

311
00:14:32,220 --> 00:14:34,940
your disposal

312
00:14:38,279 --> 00:14:39,839
two months later

313
00:14:39,839 --> 00:14:43,019
another app This Time dating app plenty

314
00:14:43,019 --> 00:14:45,240
of vision I've never used it I've been

315
00:14:45,240 --> 00:14:48,540
married for too long but uh apparently

316
00:14:48,540 --> 00:14:51,180
it's a pretty popular

317
00:14:51,180 --> 00:14:54,360
right obviously dating app you know your

318
00:14:54,360 --> 00:14:57,060
preferences uh oh maybe you don't even

319
00:14:57,060 --> 00:14:58,920
want to be

320
00:14:58,920 --> 00:15:02,540
associated with a dating app

321
00:15:03,720 --> 00:15:05,040
so

322
00:15:05,040 --> 00:15:07,740
in that case the API response

323
00:15:07,740 --> 00:15:10,620
included way more information about the

324
00:15:10,620 --> 00:15:14,699
user that was necessary

325
00:15:14,699 --> 00:15:17,760
the app itself did the filtering and

326
00:15:17,760 --> 00:15:20,399
wouldn't show it right

327
00:15:20,399 --> 00:15:22,440
um well you know all the preferences

328
00:15:22,440 --> 00:15:25,079
pictures etc etc

329
00:15:25,079 --> 00:15:27,000
but

330
00:15:27,000 --> 00:15:28,980
the hacking group wasn't using mobile

331
00:15:28,980 --> 00:15:30,120
client

332
00:15:30,120 --> 00:15:33,440
calling API directly

333
00:15:33,959 --> 00:15:36,120
now

334
00:15:36,120 --> 00:15:38,940
there's no sophisticated hack here

335
00:15:38,940 --> 00:15:42,120
just you know look at the apis call the

336
00:15:42,120 --> 00:15:45,680
apis you're done

337
00:15:46,980 --> 00:15:48,540
now

338
00:15:48,540 --> 00:15:52,139
if you look at uh OSP API top 10 right

339
00:15:52,139 --> 00:15:55,579
what's number one

340
00:15:55,680 --> 00:15:58,680
the number one hack attack is Bola

341
00:15:58,680 --> 00:16:01,380
broken object level

342
00:16:01,380 --> 00:16:02,760
authorization

343
00:16:02,760 --> 00:16:05,880
so that requires you to you know

344
00:16:05,880 --> 00:16:08,040
see what data is available to one User

345
00:16:08,040 --> 00:16:10,199
make sure it's not available to another

346
00:16:10,199 --> 00:16:12,720
user right I cannot get list of your

347
00:16:12,720 --> 00:16:14,339
orders you cannot

348
00:16:14,339 --> 00:16:18,320
get a list of my invoices Etc

349
00:16:18,660 --> 00:16:21,120
that's an interesting attack and there

350
00:16:21,120 --> 00:16:24,660
are some pretty uh I know known

351
00:16:24,660 --> 00:16:27,959
vulnerabilities of bulla kind as well

352
00:16:27,959 --> 00:16:30,979
but um

353
00:16:34,139 --> 00:16:37,440
at most you typically get access

354
00:16:37,440 --> 00:16:40,440
to like maybe one or two users maybe a

355
00:16:40,440 --> 00:16:43,740
dozen users data let's add a breach

356
00:16:43,740 --> 00:16:46,920
right with things that are far less

357
00:16:46,920 --> 00:16:49,320
sophisticated

358
00:16:49,320 --> 00:16:50,940
such as

359
00:16:50,940 --> 00:16:53,360
an API just lacking

360
00:16:53,360 --> 00:16:55,259
authentication or authorization

361
00:16:55,259 --> 00:16:57,839
protection right or excessive data

362
00:16:57,839 --> 00:17:00,959
exposure like in the previous case

363
00:17:00,959 --> 00:17:03,540
you can get access to the entire user

364
00:17:03,540 --> 00:17:04,799
base

365
00:17:04,799 --> 00:17:07,260
thousands tens of thousands of Records

366
00:17:07,260 --> 00:17:09,599
that's a definition of a data breach

367
00:17:09,599 --> 00:17:11,939
that's something that has to be

368
00:17:11,939 --> 00:17:14,339
reported

369
00:17:14,339 --> 00:17:16,559
or you know if you don't support it and

370
00:17:16,559 --> 00:17:18,480
you try to hide it

371
00:17:18,480 --> 00:17:20,160
bad things would happen to you as a

372
00:17:20,160 --> 00:17:23,099
seesaw right as we

373
00:17:23,099 --> 00:17:27,359
learned a few weeks ago

374
00:17:27,359 --> 00:17:30,299
so where's ball is

375
00:17:30,299 --> 00:17:32,280
pretty cool

376
00:17:32,280 --> 00:17:34,919
the number two and number three on the

377
00:17:34,919 --> 00:17:36,059
list

378
00:17:36,059 --> 00:17:39,240
a lot more dangerous a lot easier to

379
00:17:39,240 --> 00:17:40,919
exploit

380
00:17:40,919 --> 00:17:43,799
and that's you know API is not protected

381
00:17:43,799 --> 00:17:45,000
by

382
00:17:45,000 --> 00:17:47,280
authentication or unauthenticated apis

383
00:17:47,280 --> 00:17:51,200
and excessive data exposure

384
00:17:53,220 --> 00:17:56,460
so now that we've kind of looked at what

385
00:17:56,460 --> 00:17:58,640
happened

386
00:17:58,860 --> 00:18:03,720
Let's uh look at how that happened

387
00:18:03,720 --> 00:18:04,799
now

388
00:18:04,799 --> 00:18:08,340
there will be some kind of names and

389
00:18:08,340 --> 00:18:10,580
again

390
00:18:11,240 --> 00:18:15,480
companies there but um

391
00:18:15,480 --> 00:18:18,299
no we're not picking up on a particular

392
00:18:18,299 --> 00:18:19,500
company

393
00:18:19,500 --> 00:18:22,320
everybody has vulnerabilities so it's

394
00:18:22,320 --> 00:18:26,640
purely for illustrative purposes

395
00:18:26,640 --> 00:18:30,240
so step one is to download an app

396
00:18:30,240 --> 00:18:34,020
from the app or Play Store

397
00:18:34,020 --> 00:18:36,600
and decrypt it

398
00:18:36,600 --> 00:18:39,240
now it's easier much easier to do with

399
00:18:39,240 --> 00:18:41,640
Android apps it's a little harder to do

400
00:18:41,640 --> 00:18:44,160
with iOS apps

401
00:18:44,160 --> 00:18:47,400
but it's still pretty easy to do even

402
00:18:47,400 --> 00:18:51,240
though Apple does have a DRM protection

403
00:18:51,240 --> 00:18:56,000
uh there are a number of tools that can

404
00:18:57,419 --> 00:19:01,919
defeated and so get a real app

405
00:19:01,919 --> 00:19:05,280
you can then reverse engineer it

406
00:19:05,280 --> 00:19:08,000
and

407
00:19:10,500 --> 00:19:13,380
actually I'm gonna do a live demo

408
00:19:13,380 --> 00:19:15,480
yeah I'm gonna go not gonna do the live

409
00:19:15,480 --> 00:19:17,520
demo of the decryption because that

410
00:19:17,520 --> 00:19:19,320
actually requires

411
00:19:19,320 --> 00:19:20,640
a device

412
00:19:20,640 --> 00:19:23,520
a jailbroken device in most cases

413
00:19:23,520 --> 00:19:25,919
I'm gonna do that but we'll we'll do it

414
00:19:25,919 --> 00:19:31,280
a live demo of subsequent steps

415
00:19:31,500 --> 00:19:35,220
so we have a

416
00:19:35,220 --> 00:19:37,980
um a small very short Python program

417
00:19:37,980 --> 00:19:40,320
make it available to everybody download

418
00:19:40,320 --> 00:19:41,880
after

419
00:19:41,880 --> 00:19:44,780
presentation

420
00:19:45,000 --> 00:19:47,220
um that essentially

421
00:19:47,220 --> 00:19:49,380
goes through the application and

422
00:19:49,380 --> 00:19:51,539
extracts everything that looks like in

423
00:19:51,539 --> 00:19:53,400
API call

424
00:19:53,400 --> 00:19:54,600
hi

425
00:19:54,600 --> 00:19:58,100
so uh

426
00:20:02,880 --> 00:20:05,160
again any

427
00:20:05,160 --> 00:20:05,940
um

428
00:20:05,940 --> 00:20:09,740
names are coincidental

429
00:20:16,559 --> 00:20:20,899
all right python three

430
00:20:22,320 --> 00:20:25,100
API

431
00:20:28,200 --> 00:20:31,320
so we have um kind of apps from

432
00:20:31,320 --> 00:20:35,220
different years right 2019 2020 2022

433
00:20:35,220 --> 00:20:36,660
all right so what we're going to do is

434
00:20:36,660 --> 00:20:38,760
we're going to grab

435
00:20:38,760 --> 00:20:39,660
um

436
00:20:39,660 --> 00:20:44,419
apis from 2019 that's it right

437
00:21:02,400 --> 00:21:05,700
all right demos never go

438
00:21:05,700 --> 00:21:07,440
uh well

439
00:21:07,440 --> 00:21:09,360
but there you go right to see that

440
00:21:09,360 --> 00:21:12,179
there's uh that kind of bunch of um apps

441
00:21:12,179 --> 00:21:15,740
of API calls back to the parent company

442
00:21:15,740 --> 00:21:19,140
probably you know to actually in

443
00:21:19,140 --> 00:21:23,340
to uh perform the functions for the app

444
00:21:23,340 --> 00:21:26,640
uh you know some other built-in sdks

445
00:21:26,640 --> 00:21:28,500
analytics reportings whatever it is

446
00:21:28,500 --> 00:21:31,880
that's a bunch of apis right

447
00:21:34,380 --> 00:21:37,340
we did that right

448
00:21:41,400 --> 00:21:43,860
now

449
00:21:43,860 --> 00:21:47,039
the secret sauce to the 15-minute

450
00:21:47,039 --> 00:21:50,640
hack though isn't that you get a long

451
00:21:50,640 --> 00:21:52,980
list of apis and some applications can

452
00:21:52,980 --> 00:21:55,500
have dozens or maybe even hundreds of

453
00:21:55,500 --> 00:21:57,120
different apis

454
00:21:57,120 --> 00:22:00,419
calling all those might take time

455
00:22:00,419 --> 00:22:04,880
the secret sauce to the 15-minute hack

456
00:22:05,820 --> 00:22:07,740
is to compare

457
00:22:07,740 --> 00:22:11,520
two different versions of the app

458
00:22:11,520 --> 00:22:15,240
and only attack the change

459
00:22:15,240 --> 00:22:18,000
so what that turned out what the what

460
00:22:18,000 --> 00:22:20,100
the actual hacker group did

461
00:22:20,100 --> 00:22:23,460
wasn't just looking at all the apis

462
00:22:23,460 --> 00:22:25,980
they would download a version

463
00:22:25,980 --> 00:22:29,460
save a list of apis in that version

464
00:22:29,460 --> 00:22:32,100
way to an update

465
00:22:32,100 --> 00:22:35,400
and get the delta and the delta

466
00:22:35,400 --> 00:22:37,799
could be maybe

467
00:22:37,799 --> 00:22:40,380
two three five whatever the changes

468
00:22:40,380 --> 00:22:43,860
developers done in that period

469
00:22:43,860 --> 00:22:45,600
but

470
00:22:45,600 --> 00:22:48,480
what do you think those are a lot more

471
00:22:48,480 --> 00:22:49,510
interesting to try

472
00:22:49,510 --> 00:22:52,629
[Music]

473
00:22:53,220 --> 00:22:56,159
because developers may or may not have

474
00:22:56,159 --> 00:22:57,059
told

475
00:22:57,059 --> 00:22:59,220
the upset guys

476
00:22:59,220 --> 00:23:01,200
about the new apis

477
00:23:01,200 --> 00:23:04,860
right I'll just now just add some I mean

478
00:23:04,860 --> 00:23:07,020
we used to have get I'll just use it

479
00:23:07,020 --> 00:23:08,940
I'll just add a patch

480
00:23:08,940 --> 00:23:10,559
because you know

481
00:23:10,559 --> 00:23:12,419
product people told me that you need to

482
00:23:12,419 --> 00:23:15,360
be able to modify user data well I'll

483
00:23:15,360 --> 00:23:18,120
just use I'll just do patch application

484
00:23:18,120 --> 00:23:22,260
and I don't tell anybody I release it

485
00:23:22,260 --> 00:23:23,880
you have something that's not been

486
00:23:23,880 --> 00:23:25,500
tested you have something that's not

487
00:23:25,500 --> 00:23:28,080
been secured

488
00:23:28,080 --> 00:23:30,780
we call these apis shadow apis because

489
00:23:30,780 --> 00:23:32,400
they are

490
00:23:32,400 --> 00:23:36,480
kind of sneak into the product bypassing

491
00:23:36,480 --> 00:23:38,039
traditional controls

492
00:23:38,039 --> 00:23:40,020
Capital time

493
00:23:40,020 --> 00:23:41,760
and so

494
00:23:41,760 --> 00:23:44,760
as a hacker again I just want to do this

495
00:23:44,760 --> 00:23:48,240
pretty quickly right so I'll go in and

496
00:23:48,240 --> 00:23:50,220
out I'll test

497
00:23:50,220 --> 00:23:52,860
three or four apis instead of

498
00:23:52,860 --> 00:23:57,120
30 40 100 API

499
00:23:57,120 --> 00:24:01,200
so let's go back to our python script

500
00:24:01,200 --> 00:24:04,320
and let oh so actually

501
00:24:04,320 --> 00:24:07,440
so all these apis are saved in the apis

502
00:24:07,440 --> 00:24:11,659
that Json file so I'm gonna

503
00:24:15,600 --> 00:24:18,139
to

504
00:24:18,360 --> 00:24:21,360
2019

505
00:24:24,659 --> 00:24:29,240
and I can't type and look

506
00:24:29,580 --> 00:24:33,199
that Json right

507
00:24:34,620 --> 00:24:37,939
and I'm gonna repeat

508
00:24:38,700 --> 00:24:42,500
the process on the 2022.

509
00:24:54,539 --> 00:24:56,220
there you go all right it's a longer

510
00:24:56,220 --> 00:24:57,299
list actually

511
00:24:57,299 --> 00:25:00,840
so we have a a pretty simple again

512
00:25:00,840 --> 00:25:02,640
python script

513
00:25:02,640 --> 00:25:05,220
I don't know 20 lines of code

514
00:25:05,220 --> 00:25:10,280
that compares the the um

515
00:25:11,580 --> 00:25:15,000
the long list the longer not here though

516
00:25:15,000 --> 00:25:16,799
long command type

517
00:25:16,799 --> 00:25:18,419
compares the two

518
00:25:18,419 --> 00:25:20,960
oh wait

519
00:25:26,400 --> 00:25:30,320
um actually yeah I need to

520
00:25:30,799 --> 00:25:36,360
copy move apis dot Json

521
00:25:36,360 --> 00:25:39,740
to apis

522
00:25:40,220 --> 00:25:44,039
2022 dot Json

523
00:25:44,039 --> 00:25:47,840
and then run

524
00:25:59,820 --> 00:26:02,600
I knew it

525
00:26:03,440 --> 00:26:06,440
thank you

526
00:26:32,700 --> 00:26:35,480
all right

527
00:26:36,559 --> 00:26:39,320
foreign

528
00:26:39,320 --> 00:26:44,000
USBC to HDMI adapter

529
00:26:51,659 --> 00:26:53,059
and

530
00:26:53,059 --> 00:26:56,760
it shows extend this desktop

531
00:26:56,760 --> 00:26:59,240
okay

532
00:27:02,340 --> 00:27:04,500
all right so Shadow API Hunter right

533
00:27:04,500 --> 00:27:08,059
does a diff between the two

534
00:27:10,080 --> 00:27:12,980
what did I do

535
00:27:15,179 --> 00:27:19,020
oh well yeah so yeah quick right so all

536
00:27:19,020 --> 00:27:22,200
these apis are new now we've compared

537
00:27:22,200 --> 00:27:25,919
2019 to 2022 obviously Delta is pretty

538
00:27:25,919 --> 00:27:26,880
big

539
00:27:26,880 --> 00:27:29,340
but if you compare something like from

540
00:27:29,340 --> 00:27:30,539
May

541
00:27:30,539 --> 00:27:33,659
to August the Delta like I said maybe

542
00:27:33,659 --> 00:27:37,100
just a few entries

543
00:27:44,100 --> 00:27:45,720
now

544
00:27:45,720 --> 00:27:49,500
what do we do afterwards we just try

545
00:27:49,500 --> 00:27:54,000
the apis right if we get 200

546
00:27:54,000 --> 00:27:56,640
was good right that's success

547
00:27:56,640 --> 00:27:59,159
without any sort of authentication we

548
00:27:59,159 --> 00:28:01,500
just connect two apis and try to extend

549
00:28:01,500 --> 00:28:04,039
extract data see what what comes back

550
00:28:04,039 --> 00:28:06,419
200 is good

551
00:28:06,419 --> 00:28:08,760
I mean some sort of redirection if it's

552
00:28:08,760 --> 00:28:10,260
redirects to

553
00:28:10,260 --> 00:28:10,799
um

554
00:28:10,799 --> 00:28:13,320
a 200 response that's also good

555
00:28:13,320 --> 00:28:16,080
obviously anything in the 400

556
00:28:16,080 --> 00:28:19,820
uh is probably not good

557
00:28:21,059 --> 00:28:23,220
so and essentially you can do a curl

558
00:28:23,220 --> 00:28:25,799
right but since we're not

559
00:28:25,799 --> 00:28:27,960
doing it manually

560
00:28:27,960 --> 00:28:30,799
we can do

561
00:28:42,659 --> 00:28:44,460
yeah where's my

562
00:28:44,460 --> 00:28:47,419
ah here it is

563
00:28:48,840 --> 00:28:50,940
so it's going to run kind of do this

564
00:28:50,940 --> 00:28:52,500
connection

565
00:28:52,500 --> 00:28:53,840
um

566
00:28:53,840 --> 00:28:58,799
and give us a list of successes

567
00:28:59,760 --> 00:29:01,919
there you go so it's successfully

568
00:29:01,919 --> 00:29:04,200
connected to all these

569
00:29:04,200 --> 00:29:07,220
apis without

570
00:29:14,940 --> 00:29:17,340
what is going on

571
00:29:17,340 --> 00:29:21,320
why does it keep happening to me

572
00:29:28,380 --> 00:29:30,240
I knew I should have uh brought my

573
00:29:30,240 --> 00:29:33,919
Chromebook instead right

574
00:29:40,500 --> 00:29:43,580
we have a guy for maybe

575
00:29:46,860 --> 00:29:51,620
you know Kebab have an adapter by chance

576
00:29:51,679 --> 00:29:56,960
USBC to uh HDMI yeah looks like

577
00:29:58,140 --> 00:30:00,360
oh you have one on the tape I was going

578
00:30:00,360 --> 00:30:01,980
to tape this oh you think it's moving

579
00:30:01,980 --> 00:30:05,179
along moving around

580
00:30:14,179 --> 00:30:19,520
oh thank you see if that works better

581
00:30:32,880 --> 00:30:36,559
you're not recording any of this right

582
00:30:38,100 --> 00:30:41,360
maybe it's my

583
00:30:42,179 --> 00:30:45,559
okay I'm gonna try the front part

584
00:31:02,539 --> 00:31:04,500
all right

585
00:31:04,500 --> 00:31:07,140
[Music]

586
00:31:07,140 --> 00:31:10,640
all right extract data

587
00:31:11,640 --> 00:31:13,620
now

588
00:31:13,620 --> 00:31:15,600
so to recap

589
00:31:15,600 --> 00:31:17,760
decrypt

590
00:31:17,760 --> 00:31:23,340
com extract apis extract shadow apis

591
00:31:23,340 --> 00:31:27,899
connect to the Delta to the shadow apis

592
00:31:27,899 --> 00:31:30,779
extract data

593
00:31:30,779 --> 00:31:33,260
profit right

594
00:31:33,260 --> 00:31:36,059
I suppose

595
00:31:36,059 --> 00:31:37,320
now

596
00:31:37,320 --> 00:31:39,360
so

597
00:31:39,360 --> 00:31:42,120
um you know apis are a little different

598
00:31:42,120 --> 00:31:43,980
from you know scanning for ports right

599
00:31:43,980 --> 00:31:45,299
back in

600
00:31:45,299 --> 00:31:47,820
I don't know year 2000 what would

601
00:31:47,820 --> 00:31:50,580
hackers do right just go and do nmap

602
00:31:50,580 --> 00:31:53,399
scan a favorite computer they can find

603
00:31:53,399 --> 00:31:55,080
hit something on

604
00:31:55,080 --> 00:31:56,299
you know

605
00:31:56,299 --> 00:31:59,760
843 3389

606
00:31:59,760 --> 00:32:01,620
whatever the ports are right no

607
00:32:01,620 --> 00:32:03,779
well-known ports you kind of know what

608
00:32:03,779 --> 00:32:07,679
to expect from that Port response the

609
00:32:07,679 --> 00:32:09,659
apis is different right you can't really

610
00:32:09,659 --> 00:32:12,840
guess the API path

611
00:32:12,840 --> 00:32:16,260
yeah they're not well graphql apis have

612
00:32:16,260 --> 00:32:18,960
schemas and maybe some other

613
00:32:18,960 --> 00:32:22,140
um you can you can get the schemas for

614
00:32:22,140 --> 00:32:24,059
those but for rest

615
00:32:24,059 --> 00:32:26,399
apis are not don't have to be described

616
00:32:26,399 --> 00:32:27,299
anywhere

617
00:32:27,299 --> 00:32:30,360
and it's nice if the company publishes

618
00:32:30,360 --> 00:32:33,000
you know Swagger spec or something like

619
00:32:33,000 --> 00:32:33,899
that

620
00:32:33,899 --> 00:32:36,299
but you know they don't have to and they

621
00:32:36,299 --> 00:32:37,380
can add

622
00:32:37,380 --> 00:32:40,140
a new method without telling anyone an

623
00:32:40,140 --> 00:32:42,320
answer

624
00:32:44,340 --> 00:32:47,940
obviously extremely simple to automate

625
00:32:47,940 --> 00:32:51,360
right you can hit the top thousand apps

626
00:32:51,360 --> 00:32:54,899
or top 10 000 apps in the App Store

627
00:32:54,899 --> 00:32:57,960
uh probably with a simple script in a

628
00:32:57,960 --> 00:33:01,640
few hours writing this right

629
00:33:01,799 --> 00:33:04,200
so each takes them in less than 15

630
00:33:04,200 --> 00:33:06,500
minutes

631
00:33:07,080 --> 00:33:07,799
um

632
00:33:07,799 --> 00:33:10,320
now that hacker group actually got a 30

633
00:33:10,320 --> 00:33:12,179
to 35 hits

634
00:33:12,179 --> 00:33:15,299
doing just that from the apps in the

635
00:33:15,299 --> 00:33:16,500
Mobile store

636
00:33:16,500 --> 00:33:20,480
that's pretty good payback I think

637
00:33:22,140 --> 00:33:24,779
all right well I already walk through

638
00:33:24,779 --> 00:33:28,260
this so that's your connect to API and a

639
00:33:28,260 --> 00:33:29,399
workflow

640
00:33:29,399 --> 00:33:32,100
you know status code redirects server

641
00:33:32,100 --> 00:33:34,320
errors not good

642
00:33:34,320 --> 00:33:35,820
200

643
00:33:35,820 --> 00:33:38,299
is good

644
00:33:39,120 --> 00:33:41,539
all right

645
00:33:43,200 --> 00:33:45,299
some bonus material since we're actually

646
00:33:45,299 --> 00:33:48,659
uh running a little bit ahead right I

647
00:33:48,659 --> 00:33:51,960
promised 45 minutes of filter filler now

648
00:33:51,960 --> 00:33:54,120
I'm going to do 45 minutes of filler but

649
00:33:54,120 --> 00:33:56,760
actually we're going to talk about doing

650
00:33:56,760 --> 00:33:58,980
something very similar

651
00:33:58,980 --> 00:34:03,140
but with a cloud storage

652
00:34:03,720 --> 00:34:04,919
now

653
00:34:04,919 --> 00:34:08,240
how do you find cloud storage

654
00:34:12,060 --> 00:34:15,300
I can't really just connect to some AWS

655
00:34:15,300 --> 00:34:18,179
account and and look for S3 buckets

656
00:34:18,179 --> 00:34:20,219
right

657
00:34:20,219 --> 00:34:22,560
you can just I I cannot log in

658
00:34:22,560 --> 00:34:25,379
and look for history buckets in uaws

659
00:34:25,379 --> 00:34:27,980
account right

660
00:34:29,699 --> 00:34:31,918
now

661
00:34:31,918 --> 00:34:35,399
sounds familiar there's a normal app

662
00:34:35,399 --> 00:34:38,339
that actually uh

663
00:34:38,339 --> 00:34:40,320
was connecting to an elasticsearch

664
00:34:40,320 --> 00:34:44,480
database right from the mobile app

665
00:34:45,619 --> 00:34:49,199
and the elasticsearch database

666
00:34:49,199 --> 00:34:51,239
was not protected by anything

667
00:34:51,239 --> 00:34:53,219
other than obscurity

668
00:34:53,219 --> 00:34:55,139
because well it's mobile app right

669
00:34:55,139 --> 00:34:56,219
nobody

670
00:34:56,219 --> 00:35:01,700
you know it's protected by DRM etc etc

671
00:35:01,859 --> 00:35:04,560
no it's not right so

672
00:35:04,560 --> 00:35:06,480
similar technique

673
00:35:06,480 --> 00:35:11,880
as with apis can be used to discover

674
00:35:11,880 --> 00:35:14,880
storage Assets in the cloud

675
00:35:14,880 --> 00:35:17,220
and of course you know

676
00:35:17,220 --> 00:35:19,560
where what else would you keep your

677
00:35:19,560 --> 00:35:20,880
customer data

678
00:35:20,880 --> 00:35:23,720
Cloud because it's easy to grow

679
00:35:23,720 --> 00:35:26,880
easy to stand up

680
00:35:26,880 --> 00:35:28,500
all right

681
00:35:28,500 --> 00:35:29,880
so

682
00:35:29,880 --> 00:35:30,599
um

683
00:35:30,599 --> 00:35:33,000
no password

684
00:35:33,000 --> 00:35:35,040
and I know where to I know where to

685
00:35:35,040 --> 00:35:37,380
access which which you know URL to use

686
00:35:37,380 --> 00:35:40,400
to access the database

687
00:35:40,400 --> 00:35:43,980
interesting interestingly though this

688
00:35:43,980 --> 00:35:45,359
wasn't one of the big three Cloud

689
00:35:45,359 --> 00:35:47,280
providers

690
00:35:47,280 --> 00:35:52,280
not AWS that is your gcp

691
00:35:52,500 --> 00:35:55,760
it was a digital ocean

692
00:35:56,099 --> 00:36:01,760
but as the as they always say right

693
00:36:01,800 --> 00:36:03,359
protecting

694
00:36:03,359 --> 00:36:04,260
um

695
00:36:04,260 --> 00:36:06,839
storage buckets storage assets with a

696
00:36:06,839 --> 00:36:09,060
password is your responsibility

697
00:36:09,060 --> 00:36:10,740
not the cloud providers responsibility

698
00:36:10,740 --> 00:36:12,839
right separation

699
00:36:12,839 --> 00:36:15,619
do this

700
00:36:18,300 --> 00:36:20,460
a few months later

701
00:36:20,460 --> 00:36:22,500
another application

702
00:36:22,500 --> 00:36:25,859
with the same story in this case Alibaba

703
00:36:25,859 --> 00:36:28,859
Alibaba

704
00:36:29,460 --> 00:36:32,099
how do you pronounce it

705
00:36:32,099 --> 00:36:34,099
again

706
00:36:34,099 --> 00:36:37,280
no password

707
00:36:37,339 --> 00:36:40,920
public access to storage bucket

708
00:36:40,920 --> 00:36:42,900
all you have to do

709
00:36:42,900 --> 00:36:46,040
is reverse engineer

710
00:36:48,660 --> 00:36:53,060
finally AWS cloud storage

711
00:36:53,579 --> 00:36:55,500
same story

712
00:36:55,500 --> 00:36:58,440
now there's a lot of cases like that

713
00:36:58,440 --> 00:37:01,040
but

714
00:37:03,359 --> 00:37:05,820
no sophisticated hacks

715
00:37:05,820 --> 00:37:07,800
you extract the URL

716
00:37:07,800 --> 00:37:10,020
you connect to URL

717
00:37:10,020 --> 00:37:12,980
and see what you get

718
00:37:14,339 --> 00:37:19,140
and there's over 40 and I think

719
00:37:19,140 --> 00:37:23,180
cases like that keep coming

720
00:37:23,460 --> 00:37:26,099
for whatever reason the mobile

721
00:37:26,099 --> 00:37:28,880
teams

722
00:37:29,640 --> 00:37:31,440
in our experience at least seem to

723
00:37:31,440 --> 00:37:33,119
operate by different rules from other

724
00:37:33,119 --> 00:37:36,420
development teams in many organizations

725
00:37:36,420 --> 00:37:39,839
model applications outsourced

726
00:37:39,839 --> 00:37:41,760
Maybe

727
00:37:41,760 --> 00:37:44,160
I don't know there are fewer

728
00:37:44,160 --> 00:37:47,160
Engineers available to run IOS and

729
00:37:47,160 --> 00:37:48,720
Android apps

730
00:37:48,720 --> 00:37:51,240
um anybody wants to share experiences

731
00:37:51,240 --> 00:37:54,900
with your organizations how does um how

732
00:37:54,900 --> 00:37:57,720
do mobile developers differ from

733
00:37:57,720 --> 00:38:00,720
I guess server developers web they go

734
00:38:00,720 --> 00:38:03,240
faster go faster

735
00:38:03,240 --> 00:38:06,599
and go fast you kind of cut corners

736
00:38:06,599 --> 00:38:08,940
go faster

737
00:38:08,940 --> 00:38:10,700
maybe uh

738
00:38:10,700 --> 00:38:14,640
sdlc is a bit less mature

739
00:38:14,640 --> 00:38:15,300
um

740
00:38:15,300 --> 00:38:17,760
I actually

741
00:38:17,760 --> 00:38:21,119
in our kind of practice

742
00:38:21,119 --> 00:38:23,579
we talked to teams that um

743
00:38:23,579 --> 00:38:24,900
you know the

744
00:38:24,900 --> 00:38:27,599
develop mobile apps you know data Serum

745
00:38:27,599 --> 00:38:29,640
is big in Mobile Security

746
00:38:29,640 --> 00:38:31,680
I actually hear

747
00:38:31,680 --> 00:38:33,359
teams that

748
00:38:33,359 --> 00:38:38,460
don't have a good CI CD they do releases

749
00:38:38,460 --> 00:38:41,000
manually

750
00:38:41,040 --> 00:38:43,260
I don't think I've ever heard that

751
00:38:43,260 --> 00:38:46,920
happening with a server apps or web apps

752
00:38:46,920 --> 00:38:49,859
in the last 10 years

753
00:38:49,859 --> 00:38:52,079
like the idea of somebody downloading

754
00:38:52,079 --> 00:38:53,700
cloning

755
00:38:53,700 --> 00:38:56,880
you know your repository locally

756
00:38:56,880 --> 00:38:59,820
building on my workstation and sending

757
00:38:59,820 --> 00:39:01,140
in production

758
00:39:01,140 --> 00:39:03,540
I don't think it happens anymore in in

759
00:39:03,540 --> 00:39:05,760
the majority of the world but it does

760
00:39:05,760 --> 00:39:08,460
happen in Mobile

761
00:39:08,460 --> 00:39:12,859
so um maybe that's why

762
00:39:13,140 --> 00:39:15,599
we continue to see

763
00:39:15,599 --> 00:39:19,640
um vulnerabilities in the web apps

764
00:39:21,300 --> 00:39:24,980
very similar process right

765
00:39:25,680 --> 00:39:27,300
now

766
00:39:27,300 --> 00:39:28,680
what else can you find in the

767
00:39:28,680 --> 00:39:31,098
application

768
00:39:32,339 --> 00:39:35,359
you can find

769
00:39:35,520 --> 00:39:40,400
keys and passwords in application

770
00:39:40,740 --> 00:39:42,000
um

771
00:39:42,000 --> 00:39:43,740
yeah it probably happens in the web apps

772
00:39:43,740 --> 00:39:47,520
as well in um server code as well

773
00:39:47,520 --> 00:39:50,400
it happens in Mobile all the time

774
00:39:50,400 --> 00:39:53,760
so for example there's a three keys that

775
00:39:53,760 --> 00:39:57,119
let's say we find in an app

776
00:39:57,119 --> 00:40:01,579
let's do some q a

777
00:40:02,040 --> 00:40:04,500
so the first one is obviously a password

778
00:40:04,500 --> 00:40:07,320
right secret maybe not so secret can you

779
00:40:07,320 --> 00:40:10,079
guys see it from the back

780
00:40:10,079 --> 00:40:12,140
um

781
00:40:12,300 --> 00:40:14,700
it's not probably not very clear but uh

782
00:40:14,700 --> 00:40:16,560
the first one is a password

783
00:40:16,560 --> 00:40:20,339
well secret password for blah blah blah

784
00:40:20,339 --> 00:40:21,839
the second

785
00:40:21,839 --> 00:40:23,640
you know is a Long Key

786
00:40:23,640 --> 00:40:26,400
in the third looks like a Twitter API

787
00:40:26,400 --> 00:40:28,260
key

788
00:40:28,260 --> 00:40:31,560
so how would you rank it from most

789
00:40:31,560 --> 00:40:35,000
critical to least critical

790
00:40:36,599 --> 00:40:39,119
a Twitter API key is probably the least

791
00:40:39,119 --> 00:40:41,820
critical key right because all the in

792
00:40:41,820 --> 00:40:45,119
most cases all it does it lets you read

793
00:40:45,119 --> 00:40:50,359
publicly available feed anyway all right

794
00:40:52,800 --> 00:40:55,619
the password password is bad

795
00:40:55,619 --> 00:40:57,619
if um

796
00:40:57,619 --> 00:41:00,359
yeah if it's a password to your own

797
00:41:00,359 --> 00:41:01,560
account

798
00:41:01,560 --> 00:41:04,380
it's bad but not too bad because it's a

799
00:41:04,380 --> 00:41:07,040
single record

800
00:41:07,040 --> 00:41:11,280
but the middle one starts with a i blah

801
00:41:11,280 --> 00:41:12,359
blah blah

802
00:41:12,359 --> 00:41:15,900
is probably in AWS

803
00:41:15,900 --> 00:41:17,700
uh Secret

804
00:41:17,700 --> 00:41:19,680
now that

805
00:41:19,680 --> 00:41:22,140
could be a ticket to uh

806
00:41:22,140 --> 00:41:24,780
to the entire user database

807
00:41:24,780 --> 00:41:27,780
so

808
00:41:29,640 --> 00:41:32,760
keys are bad not all equally bad

809
00:41:32,760 --> 00:41:35,220
but it's uh typically something that you

810
00:41:35,220 --> 00:41:38,280
find in the app and again does not

811
00:41:38,280 --> 00:41:39,599
require

812
00:41:39,599 --> 00:41:43,460
a lot of sophisticated hacks

813
00:41:46,740 --> 00:41:48,300
now

814
00:41:48,300 --> 00:41:50,760
this is an appsec conference not hacker

815
00:41:50,760 --> 00:41:52,920
conference so we really should talk

816
00:41:52,920 --> 00:41:55,400
about Solutions

817
00:41:55,400 --> 00:41:58,380
it is the last slide of almost the last

818
00:41:58,380 --> 00:42:01,079
slide of the presentation so maybe we

819
00:42:01,079 --> 00:42:04,020
should have talked about it earlier

820
00:42:04,020 --> 00:42:05,160
but

821
00:42:05,160 --> 00:42:08,099
um I mean let's talk about it so

822
00:42:08,099 --> 00:42:13,079
detect Shadow apis right that is a

823
00:42:13,079 --> 00:42:16,560
a big issue inventorying your apis is a

824
00:42:16,560 --> 00:42:17,520
big issue

825
00:42:17,520 --> 00:42:18,660
um

826
00:42:18,660 --> 00:42:22,339
so pay attention to that

827
00:42:23,460 --> 00:42:26,220
and it applies to mobile applies to web

828
00:42:26,220 --> 00:42:29,280
of course as well but as we just

829
00:42:29,280 --> 00:42:30,960
discussed model

830
00:42:30,960 --> 00:42:34,280
might be a bigger problem today

831
00:42:34,619 --> 00:42:36,119
check

832
00:42:36,119 --> 00:42:39,480
anything unauthenticated

833
00:42:39,560 --> 00:42:42,599
for any API or other sensitive

834
00:42:42,599 --> 00:42:44,099
confirmation

835
00:42:44,099 --> 00:42:46,320
there are legitimate reasons to have

836
00:42:46,320 --> 00:42:49,320
apis without Authentication

837
00:42:49,320 --> 00:42:53,760
right but uh those should be

838
00:42:53,760 --> 00:42:55,020
far

839
00:42:55,020 --> 00:42:57,180
and few in between

840
00:42:57,180 --> 00:43:00,359
right if you can find between

841
00:43:00,359 --> 00:43:02,819
one of those

842
00:43:02,819 --> 00:43:04,920
why

843
00:43:04,920 --> 00:43:07,920
because uh it's easy to again include

844
00:43:07,920 --> 00:43:10,440
inadvertently something that shouldn't

845
00:43:10,440 --> 00:43:11,420
be

846
00:43:11,420 --> 00:43:15,060
included in an authenticated API call

847
00:43:15,060 --> 00:43:20,060
so always review what's unauthenticated

848
00:43:20,520 --> 00:43:24,060
checks for keys and tokens

849
00:43:24,060 --> 00:43:27,300
and always check open

850
00:43:27,300 --> 00:43:31,460
storage open cloud storage API

851
00:43:31,460 --> 00:43:34,140
cloud storage

852
00:43:34,140 --> 00:43:35,640
again

853
00:43:35,640 --> 00:43:37,380
there are legitimate reasons to have

854
00:43:37,380 --> 00:43:40,079
open cloud storage

855
00:43:40,079 --> 00:43:41,760
you might

856
00:43:41,760 --> 00:43:45,060
you know keep on our images or some

857
00:43:45,060 --> 00:43:47,099
other static data in there

858
00:43:47,099 --> 00:43:51,599
of CDM essential cloud storage

859
00:43:51,599 --> 00:43:54,000
but you always need to make sure that

860
00:43:54,000 --> 00:43:56,760
there's no Pi in there

861
00:43:56,760 --> 00:43:57,960
that's daily

862
00:43:57,960 --> 00:44:01,980
it's what we usually tell folks

863
00:44:01,980 --> 00:44:05,460
so some of the tools we discussed today

864
00:44:05,460 --> 00:44:08,480
um my email happy to provide these

865
00:44:08,480 --> 00:44:10,500
Python scripts

866
00:44:10,500 --> 00:44:13,140
once you get them you'll kind of see

867
00:44:13,140 --> 00:44:15,300
that they're fairly trivial

868
00:44:15,300 --> 00:44:17,099
right again

869
00:44:17,099 --> 00:44:19,319
hacker tools not

870
00:44:19,319 --> 00:44:23,119
security research tools

871
00:44:23,900 --> 00:44:28,079
we also have a a similar tool python

872
00:44:28,079 --> 00:44:30,480
tool that takes

873
00:44:30,480 --> 00:44:34,619
a browser just a network traffic history

874
00:44:34,619 --> 00:44:36,060
R file

875
00:44:36,060 --> 00:44:38,220
and converts extracts API from from

876
00:44:38,220 --> 00:44:39,960
there as well

877
00:44:39,960 --> 00:44:42,060
didn't get a chance to demo

878
00:44:42,060 --> 00:44:44,940
but it works in a very similar

879
00:44:44,940 --> 00:44:47,940
idea

880
00:44:51,000 --> 00:44:52,380
questions

881
00:44:52,380 --> 00:44:56,300
how are we doing 15 minutes good

882
00:44:58,500 --> 00:45:01,440
who's gonna go hunt uh for shadow apis

883
00:45:01,440 --> 00:45:04,260
now in your own company

884
00:45:04,260 --> 00:45:06,300
is that uh

885
00:45:06,300 --> 00:45:09,619
after 5 pm today

886
00:45:10,079 --> 00:45:12,140
um

887
00:45:16,260 --> 00:45:19,760
to extract this data

888
00:45:19,760 --> 00:45:22,380
would you say it would be a feasible to

889
00:45:22,380 --> 00:45:24,660
build and want to make the service that

890
00:45:24,660 --> 00:45:25,940
downloaded

891
00:45:25,940 --> 00:45:29,240
today versions

892
00:45:29,240 --> 00:45:32,460
uploaded do all this manually and then

893
00:45:32,460 --> 00:45:34,260
sort of to bring out the reports think

894
00:45:34,260 --> 00:45:37,440
this is the best possible basis to talk

895
00:45:37,440 --> 00:45:39,720
and then you kept cutting down for 50

896
00:45:39,720 --> 00:45:42,359
minutes even more yeah absolutely yeah

897
00:45:42,359 --> 00:45:46,020
we just uh um I I'm sure for any real

898
00:45:46,020 --> 00:45:48,240
real I'm sorry the question I don't know

899
00:45:48,240 --> 00:45:50,220
if you heard it would it be possible to

900
00:45:50,220 --> 00:45:52,140
automate all these manual steps and

901
00:45:52,140 --> 00:45:54,420
automatically get updates from Google

902
00:45:54,420 --> 00:45:57,660
apps Play Store Apple App Store as new

903
00:45:57,660 --> 00:45:59,760
versions are released yeah absolutely

904
00:45:59,760 --> 00:46:01,099
that's

905
00:46:01,099 --> 00:46:04,800
probably how I would go about it right I

906
00:46:04,800 --> 00:46:07,500
mean I nobody wants to type things

907
00:46:07,500 --> 00:46:09,660
from command line but um yeah it's it's

908
00:46:09,660 --> 00:46:12,480
pretty trivial and you can

909
00:46:12,480 --> 00:46:15,500
yeah use cloud infrastructure to do that

910
00:46:15,500 --> 00:46:19,260
uh bring it up uh things as needed yeah

911
00:46:19,260 --> 00:46:22,040
absolutely

912
00:46:28,640 --> 00:46:32,280
yeah you can you can go to APK for for

913
00:46:32,280 --> 00:46:33,839
um

914
00:46:33,839 --> 00:46:36,540
what is that site APK something

915
00:46:36,540 --> 00:46:38,579
something for all the Androids and

916
00:46:38,579 --> 00:46:40,619
they're all versions you can you don't

917
00:46:40,619 --> 00:46:42,300
have to wait for next version you can

918
00:46:42,300 --> 00:46:45,359
just go and download all the previous

919
00:46:45,359 --> 00:46:47,760
versions and do comparison they I mean

920
00:46:47,760 --> 00:46:51,480
the older you go obviously the less

921
00:46:51,480 --> 00:46:55,020
chances of that API being untested right

922
00:46:55,020 --> 00:46:56,940
because

923
00:46:56,940 --> 00:46:59,040
um you know there's their bug Bounty

924
00:46:59,040 --> 00:47:01,260
programs and so

925
00:47:01,260 --> 00:47:03,660
um a lot of these applications

926
00:47:03,660 --> 00:47:08,359
eventually get tested by both

927
00:47:08,359 --> 00:47:12,420
malicious hackers and well-meaning

928
00:47:12,420 --> 00:47:14,940
bug Bounty researchers

929
00:47:14,940 --> 00:47:17,579
or bug Bounty Packers I guess

930
00:47:17,579 --> 00:47:20,760
but yeah so the the key is to to grab a

931
00:47:20,760 --> 00:47:22,800
new version as soon as it's released

932
00:47:22,800 --> 00:47:26,280
an app that's fairly trivial

933
00:47:26,280 --> 00:47:28,859
you can sign up for notifications

934
00:47:28,859 --> 00:47:32,040
through uh Play Store and App Store just

935
00:47:32,040 --> 00:47:34,579
be notified

936
00:47:36,960 --> 00:47:39,420
all right I'll give you 10 minutes back

937
00:47:39,420 --> 00:47:41,040
thank you for

938
00:47:41,040 --> 00:47:43,680
um you know sitting through all the

939
00:47:43,680 --> 00:47:46,200
technical difficulties and

940
00:47:46,200 --> 00:47:50,299
um good luck with some API hunting

