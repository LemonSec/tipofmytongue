1
00:00:09,580 --> 00:00:13,420
this and your before<font color="#CCCCCC"> you even get</font><font color="#E5E5E5"> to</font>

2
00:00:11,740 --> 00:00:15,040
<font color="#E5E5E5">your desks and your desk and your boss</font>

3
00:00:13,420 --> 00:00:16,930
hit you up and says<font color="#CCCCCC"> hey mark I was at</font>

4
00:00:15,040 --> 00:00:18,400
this<font color="#E5E5E5"> conference last week</font><font color="#CCCCCC"> and I learned</font>

5
00:00:16,930 --> 00:00:20,590
<font color="#E5E5E5">about this really cool</font><font color="#CCCCCC"> thing called</font><font color="#E5E5E5"> the</font>

6
00:00:18,400 --> 00:00:22,240
<font color="#E5E5E5">Alexa top 1 million lesson</font><font color="#CCCCCC"> all we have</font>

7
00:00:20,590 --> 00:00:24,580
to do is cross-reference<font color="#E5E5E5"> our web logs</font>

8
00:00:22,240 --> 00:00:27,070
RDF<font color="#CCCCCC"> Logs with the Alexa</font><font color="#E5E5E5"> top 1 million</font>

9
00:00:24,580 --> 00:00:30,220
<font color="#E5E5E5">anything that's on there and boom we're</font>

10
00:00:27,070 --> 00:00:31,480
gonna know that we're infected<font color="#CCCCCC"> I haven't</font>

11
00:00:30,220 --> 00:00:32,738
even had<font color="#E5E5E5"> my</font><font color="#CCCCCC"> coffee yet</font>

12
00:00:31,480 --> 00:00:35,050
and you're<font color="#E5E5E5"> asking me to go through</font>

13
00:00:32,738 --> 00:00:37,900
<font color="#CCCCCC">millions</font><font color="#E5E5E5"> of web logs</font><font color="#CCCCCC"> sure</font><font color="#E5E5E5"> boss</font><font color="#CCCCCC"> sounds</font>

14
00:00:35,050 --> 00:00:41,650
<font color="#CCCCCC">great</font><font color="#E5E5E5"> I'm gonna go ahead</font>

15
00:00:37,900 --> 00:00:43,510
oops<font color="#CCCCCC"> yep yeah there we go so I'm gonna</font>

16
00:00:41,650 --> 00:00:46,239
use an instruction<font color="#CCCCCC"> like the top</font><font color="#E5E5E5"> point up</font>

17
00:00:43,510 --> 00:00:48,790
here<font color="#E5E5E5"> that will go through</font><font color="#CCCCCC"> all 55 gigs of</font>

18
00:00:46,239 --> 00:00:50,559
web logs<font color="#E5E5E5"> that's</font><font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> take a while</font><font color="#CCCCCC"> so</font>

19
00:00:48,790 --> 00:00:52,570
<font color="#CCCCCC">before I start</font><font color="#E5E5E5"> with</font><font color="#CCCCCC"> that one I do the</font>

20
00:00:50,559 --> 00:00:54,849
second one<font color="#CCCCCC"> if this is some Bosch</font><font color="#E5E5E5"> gun</font>

21
00:00:52,570 --> 00:00:56,680
food don't worry we'll get<font color="#E5E5E5"> there and</font>

22
00:00:54,850 --> 00:00:58,900
that's<font color="#E5E5E5"> going to go through</font><font color="#CCCCCC"> one Giga logs</font>

23
00:00:56,680 --> 00:01:02,260
so I want to<font color="#E5E5E5"> time</font><font color="#CCCCCC"> it and</font><font color="#E5E5E5"> see how long</font>

24
00:00:58,900 --> 00:01:03,729
<font color="#CCCCCC">that first Giga logs is gonna take so I</font>

25
00:01:02,260 --> 00:01:06,280
go and<font color="#E5E5E5"> get some coffee it's still</font>

26
00:01:03,729 --> 00:01:07,750
<font color="#CCCCCC">running I go and</font><font color="#E5E5E5"> check my tickets that</font>

27
00:01:06,280 --> 00:01:10,060
came in over<font color="#CCCCCC"> the weekend it's still</font>

28
00:01:07,750 --> 00:01:13,060
running<font color="#CCCCCC"> I go to lunch I come back it's</font>

29
00:01:10,060 --> 00:01:14,830
<font color="#CCCCCC">still running</font><font color="#E5E5E5"> and go ahead and let my</font>

30
00:01:13,060 --> 00:01:17,260
boss know hey this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> gonna take a</font><font color="#E5E5E5"> while</font>

31
00:01:14,830 --> 00:01:18,789
so<font color="#E5E5E5"> I'm gonna bail I'm gonna go get some</font>

32
00:01:17,260 --> 00:01:20,710
cupcakes<font color="#E5E5E5"> on my way home from work</font>

33
00:01:18,790 --> 00:01:24,370
<font color="#CCCCCC">worried</font><font color="#E5E5E5"> about it come back in the next</font>

34
00:01:20,710 --> 00:01:27,309
morning<font color="#CCCCCC"> it's</font><font color="#E5E5E5"> still running so clearly</font>

35
00:01:24,370 --> 00:01:30,550
this is<font color="#E5E5E5"> gonna take a while</font><font color="#CCCCCC"> so it's been</font>

36
00:01:27,310 --> 00:01:32,410
running<font color="#CCCCCC"> for 199 minutes so far</font><font color="#E5E5E5"> 999</font>

37
00:01:30,550 --> 00:01:34,149
minutes times fifty five gigs means

38
00:01:32,410 --> 00:01:37,450
you're looking<font color="#CCCCCC"> at well over a month for</font>

39
00:01:34,150 --> 00:01:39,430
this to<font color="#CCCCCC"> finish clearly that's</font><font color="#E5E5E5"> not a good</font>

40
00:01:37,450 --> 00:01:40,930
way<font color="#E5E5E5"> to get a raise from your boss</font><font color="#CCCCCC"> if</font>

41
00:01:39,430 --> 00:01:43,060
it's<font color="#E5E5E5"> gonna take you a month</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> answer</font>

42
00:01:40,930 --> 00:01:45,880
this<font color="#E5E5E5"> question by the way I did time it</font>

43
00:01:43,060 --> 00:01:48,520
out<font color="#E5E5E5"> approximately three years 10 months</font>

44
00:01:45,880 --> 00:01:51,550
<font color="#E5E5E5">11 days 18 hours 34</font><font color="#CCCCCC"> minutes and 38</font>

45
00:01:48,520 --> 00:01:54,039
seconds to let<font color="#E5E5E5"> it</font><font color="#CCCCCC"> run in finish at that</font>

46
00:01:51,550 --> 00:01:55,690
rate<font color="#E5E5E5"> so you find a</font><font color="#CCCCCC"> youtube video</font><font color="#E5E5E5"> called</font>

47
00:01:54,040 --> 00:01:58,300
save time<font color="#E5E5E5"> with modern search techniques</font>

48
00:01:55,690 --> 00:02:01,179
featuring yours truly and<font color="#E5E5E5"> then you go</font>

49
00:01:58,300 --> 00:02:02,620
ahead<font color="#E5E5E5"> and grab your boss's corporate</font>

50
00:02:01,180 --> 00:02:03,909
card which he<font color="#E5E5E5"> keeps in that desk drawer</font>

51
00:02:02,620 --> 00:02:05,500
<font color="#E5E5E5">that it doesn't lock quite as well as</font>

52
00:02:03,909 --> 00:02:07,390
<font color="#CCCCCC">they thought</font><font color="#E5E5E5"> he did you're gonna go with</font>

53
00:02:05,500 --> 00:02:09,310
<font color="#E5E5E5">the lock tech village tomorrow and</font>

54
00:02:07,390 --> 00:02:11,500
thanks<font color="#E5E5E5"> to the magic of overnight</font>

55
00:02:09,310 --> 00:02:13,870
shipping<font color="#E5E5E5"> Wednesday morning you build</font>

56
00:02:11,500 --> 00:02:15,549
<font color="#E5E5E5">yourself a new machine it takes about 20</font>

57
00:02:13,870 --> 00:02:16,569
<font color="#CCCCCC">minutes to copy all that</font><font color="#E5E5E5"> data over and</font>

58
00:02:15,549 --> 00:02:18,220
of course you're<font color="#CCCCCC"> doing it in your</font><font color="#E5E5E5"> office</font>

59
00:02:16,569 --> 00:02:22,390
<font color="#E5E5E5">so that you know you keep this on the</font>

60
00:02:18,220 --> 00:02:25,600
<font color="#CCCCCC">down-low and</font><font color="#E5E5E5"> you go ahead and rerun that</font>

61
00:02:22,390 --> 00:02:28,540
less than<font color="#E5E5E5"> 7</font><font color="#CCCCCC"> minutes</font><font color="#E5E5E5"> we can get you the</font>

62
00:02:25,600 --> 00:02:32,019
<font color="#E5E5E5">data you need using</font><font color="#CCCCCC"> the techniques that</font>

63
00:02:28,540 --> 00:02:34,030
<font color="#E5E5E5">we're going to talk</font><font color="#CCCCCC"> about today</font><font color="#E5E5E5"> some of</font>

64
00:02:32,020 --> 00:02:36,520
you may have<font color="#CCCCCC"> thought you heard a</font><font color="#E5E5E5"> I'll</font>

65
00:02:34,030 --> 00:02:38,530
say a speak<font color="#CCCCCC"> o in my</font><font color="#E5E5E5"> introduction when I</font>

66
00:02:36,520 --> 00:02:40,570
said<font color="#CCCCCC"> that</font><font color="#E5E5E5"> the boss had to find</font>

67
00:02:38,530 --> 00:02:43,330
everything<font color="#CCCCCC"> that's on the Alexa</font><font color="#E5E5E5"> top 1</font>

68
00:02:40,570 --> 00:02:44,859
million because now you give that<font color="#CCCCCC"> report</font>

69
00:02:43,330 --> 00:02:46,180
to your<font color="#E5E5E5"> boss and he says no no</font><font color="#CCCCCC"> no mark</font>

70
00:02:44,860 --> 00:02:47,260
you didn't hear me you hadn't<font color="#CCCCCC"> have your</font>

71
00:02:46,180 --> 00:02:49,060
<font color="#CCCCCC">copy edit I don't want to know</font>

72
00:02:47,260 --> 00:02:50,769
<font color="#E5E5E5">everything that's on the Alexa top 1</font>

73
00:02:49,060 --> 00:02:53,380
million<font color="#CCCCCC"> I want to know</font><font color="#E5E5E5"> everything that's</font>

74
00:02:50,770 --> 00:02:55,360
not on the Alexa top 1 million<font color="#E5E5E5"> so you</font>

75
00:02:53,380 --> 00:02:57,579
rerun<font color="#E5E5E5"> your script it doesn't take three</font>

76
00:02:55,360 --> 00:03:01,570
<font color="#CCCCCC">years 10</font><font color="#E5E5E5"> months 11 days 18 hours and 38</font>

77
00:02:57,580 --> 00:03:02,830
seconds it takes<font color="#E5E5E5"> 6 minutes and now all</font>

78
00:03:01,570 --> 00:03:05,620
<font color="#E5E5E5">of a sudden</font><font color="#CCCCCC"> you've got</font><font color="#E5E5E5"> the data that you</font>

79
00:03:02,830 --> 00:03:07,739
need<font color="#CCCCCC"> to go ahead</font><font color="#E5E5E5"> and start to look into</font>

80
00:03:05,620 --> 00:03:07,739
that

81
00:03:08,160 --> 00:03:13,510
so you may say mark my sim already

82
00:03:11,489 --> 00:03:15,010
cross-references with the Alexa<font color="#E5E5E5"> top 1</font>

83
00:03:13,510 --> 00:03:19,030
million<font color="#E5E5E5"> that's kind of a dumb example</font>

84
00:03:15,010 --> 00:03:20,739
okay<font color="#CCCCCC"> so the other example here I did is</font>

85
00:03:19,030 --> 00:03:26,200
you get a report<font color="#CCCCCC"> from your</font><font color="#E5E5E5"> thread Intel</font>

86
00:03:20,739 --> 00:03:27,790
team with about<font color="#CCCCCC"> 2,300 bad IPs</font><font color="#E5E5E5"> bad</font><font color="#CCCCCC"> URLs</font>

87
00:03:26,200 --> 00:03:29,950
you guys ever get<font color="#E5E5E5"> these from your threat</font>

88
00:03:27,790 --> 00:03:31,780
Intel<font color="#E5E5E5"> group and you're like how bad are</font>

89
00:03:29,950 --> 00:03:33,000
<font color="#E5E5E5">these you know when did it go bad when</font>

90
00:03:31,780 --> 00:03:35,380
did it<font color="#E5E5E5"> go good</font>

91
00:03:33,000 --> 00:03:42,250
so across<font color="#E5E5E5"> referencing something like</font>

92
00:03:35,380 --> 00:03:46,000
that 45 seconds<font color="#CCCCCC"> so what's the</font><font color="#E5E5E5"> data set</font>

93
00:03:42,250 --> 00:03:47,829
we're working with here 750 mega logs<font color="#CCCCCC"> I</font>

94
00:03:46,000 --> 00:03:49,900
don't know if anyone<font color="#E5E5E5"> else uses the term</font>

95
00:03:47,829 --> 00:03:51,400
mega logs I think mega logs and<font color="#E5E5E5"> Giga</font>

96
00:03:49,900 --> 00:03:52,799
logs sound kind of<font color="#E5E5E5"> cool so I'm going to</font>

97
00:03:51,400 --> 00:03:56,260
use it<font color="#E5E5E5"> we'll see if it sticks</font>

98
00:03:52,799 --> 00:03:59,079
um so if we're doing 750 mega logs<font color="#E5E5E5"> in</font>

99
00:03:56,260 --> 00:04:01,359
<font color="#CCCCCC">for in three-quarters of a minute</font><font color="#E5E5E5"> that's</font>

100
00:03:59,079 --> 00:04:04,360
<font color="#E5E5E5">a search rate of a billion log events</font>

101
00:04:01,360 --> 00:04:06,549
per minute<font color="#CCCCCC"> I don't know about you guys</font>

102
00:04:04,360 --> 00:04:09,610
but<font color="#CCCCCC"> when I go to customer sites</font><font color="#E5E5E5"> I've</font>

103
00:04:06,549 --> 00:04:11,799
seen plenty of Sims that struggle to

104
00:04:09,610 --> 00:04:16,810
operate<font color="#CCCCCC"> it a</font><font color="#E5E5E5"> billion log searches per</font>

105
00:04:11,799 --> 00:04:17,500
minute what I want<font color="#E5E5E5"> to show you guys</font>

106
00:04:16,810 --> 00:04:20,769
<font color="#CCCCCC">today</font>

107
00:04:17,500 --> 00:04:22,780
is some techniques<font color="#CCCCCC"> these will</font><font color="#E5E5E5"> work with</font>

108
00:04:20,769 --> 00:04:25,419
<font color="#CCCCCC">logs these will work</font><font color="#E5E5E5"> with other data</font>

109
00:04:22,780 --> 00:04:28,270
sources in my experience doing Incident

110
00:04:25,419 --> 00:04:31,030
Response<font color="#E5E5E5"> no matter how good the symbol</font>

111
00:04:28,270 --> 00:04:32,979
implementation is you<font color="#E5E5E5"> always get to the</font>

112
00:04:31,030 --> 00:04:35,919
<font color="#E5E5E5">point where there's data that's not in</font>

113
00:04:32,979 --> 00:04:36,400
the sim<font color="#E5E5E5"> you have to go to</font><font color="#CCCCCC"> NetFlow logs</font>

114
00:04:35,919 --> 00:04:38,349
you<font color="#CCCCCC"> have to</font>

115
00:04:36,400 --> 00:04:40,599
go to IAS logs you<font color="#E5E5E5"> have to go to Apache</font>

116
00:04:38,350 --> 00:04:43,090
logs you've got to go to NTP<font color="#CCCCCC"> there's</font>

117
00:04:40,600 --> 00:04:44,710
always something that's<font color="#E5E5E5"> not in the sim</font>

118
00:04:43,090 --> 00:04:48,940
<font color="#E5E5E5">and these techniques will help you find</font>

119
00:04:44,710 --> 00:04:50,650
that those<font color="#E5E5E5"> answers you need faster</font><font color="#CCCCCC"> I am</font>

120
00:04:48,940 --> 00:04:53,710
<font color="#CCCCCC">NOT the only person that's trying to do</font>

121
00:04:50,650 --> 00:04:57,159
<font color="#E5E5E5">research like this there are not a</font><font color="#CCCCCC"> lot</font>

122
00:04:53,710 --> 00:04:59,138
of people<font color="#E5E5E5"> that share large</font><font color="#CCCCCC"> datasets</font><font color="#E5E5E5"> for</font>

123
00:04:57,160 --> 00:05:00,610
<font color="#E5E5E5">the purposes of</font><font color="#CCCCCC"> research like this so if</font>

124
00:04:59,139 --> 00:05:01,509
you work in<font color="#E5E5E5"> an organization</font><font color="#CCCCCC"> where you</font>

125
00:05:00,610 --> 00:05:03,610
can<font color="#E5E5E5"> share this</font>

126
00:05:01,509 --> 00:05:08,860
<font color="#E5E5E5">I implore you to share it with the</font>

127
00:05:03,610 --> 00:05:11,380
community<font color="#E5E5E5"> we're all familiar with</font>

128
00:05:08,860 --> 00:05:13,389
<font color="#E5E5E5">country called Syria we've all heard</font>

129
00:05:11,380 --> 00:05:16,120
<font color="#CCCCCC">that the Syrian</font><font color="#E5E5E5"> regime is doing some</font>

130
00:05:13,389 --> 00:05:19,030
things that<font color="#CCCCCC"> as technologists we may</font><font color="#E5E5E5"> not</font>

131
00:05:16,120 --> 00:05:21,039
<font color="#CCCCCC">agree with some other</font><font color="#E5E5E5"> technologists</font>

132
00:05:19,030 --> 00:05:24,219
started poking around in Syrian IP space

133
00:05:21,039 --> 00:05:27,849
<font color="#E5E5E5">they found some</font><font color="#CCCCCC"> FTP servers</font><font color="#E5E5E5"> they were</font>

134
00:05:24,220 --> 00:05:31,090
able<font color="#E5E5E5"> to gain access to said FTP servers</font>

135
00:05:27,849 --> 00:05:35,669
<font color="#E5E5E5">and what they found there were logs of</font>

136
00:05:31,090 --> 00:05:41,979
web access from the citizens of Syria

137
00:05:35,669 --> 00:05:44,020
<font color="#E5E5E5">this led to the turns out a company was</font>

138
00:05:41,979 --> 00:05:47,740
violating some export<font color="#E5E5E5"> restrictions that</font>

139
00:05:44,020 --> 00:05:51,370
company no<font color="#CCCCCC"> longer exists as well</font><font color="#E5E5E5"> as some</font>

140
00:05:47,740 --> 00:05:53,530
<font color="#E5E5E5">international sanctions so if you are a</font>

141
00:05:51,370 --> 00:05:54,729
despot<font color="#E5E5E5"> and you have your own country and</font>

142
00:05:53,530 --> 00:05:56,229
<font color="#CCCCCC">you're willing to</font><font color="#E5E5E5"> share that with the</font>

143
00:05:54,729 --> 00:05:58,270
<font color="#CCCCCC">community I</font><font color="#E5E5E5"> would love to get that data</font>

144
00:05:56,229 --> 00:05:59,710
<font color="#E5E5E5">if you don't have your own country but</font>

145
00:05:58,270 --> 00:06:01,840
<font color="#E5E5E5">you do work for</font><font color="#CCCCCC"> someone that</font><font color="#E5E5E5"> would share</font>

146
00:05:59,710 --> 00:06:04,299
it<font color="#CCCCCC"> please do that as well</font><font color="#E5E5E5"> anyway the</font>

147
00:06:01,840 --> 00:06:07,388
other<font color="#CCCCCC"> thing we're using is the cert has</font>

148
00:06:04,300 --> 00:06:09,400
a insider threat class and they publish

149
00:06:07,389 --> 00:06:10,840
<font color="#E5E5E5">some</font><font color="#CCCCCC"> datasets that they use</font><font color="#E5E5E5"> for training</font>

150
00:06:09,400 --> 00:06:12,280
<font color="#E5E5E5">so I'll be kind of bouncing back</font><font color="#CCCCCC"> and</font>

151
00:06:10,840 --> 00:06:14,560
<font color="#E5E5E5">forth between the two if I don't talk</font>

152
00:06:12,280 --> 00:06:19,840
<font color="#CCCCCC">about</font><font color="#E5E5E5"> it explicitly I'm using the blue</font>

153
00:06:14,560 --> 00:06:22,659
<font color="#E5E5E5">smote data set</font><font color="#CCCCCC"> okay github page is</font><font color="#E5E5E5"> also</font>

154
00:06:19,840 --> 00:06:24,909
in the lower corner<font color="#CCCCCC"> of all the slides</font>

155
00:06:22,659 --> 00:06:29,560
<font color="#E5E5E5">which on the front projectors I think</font>

156
00:06:24,909 --> 00:06:32,380
that's<font color="#E5E5E5"> about a</font><font color="#CCCCCC"> 12 inch font</font><font color="#E5E5E5"> so feel</font><font color="#CCCCCC"> free</font>

157
00:06:29,560 --> 00:06:34,690
to hit that<font color="#E5E5E5"> up the PDF of this material</font>

158
00:06:32,380 --> 00:06:37,360
is uploaded<font color="#E5E5E5"> so you feel free</font><font color="#CCCCCC"> to follow</font>

159
00:06:34,690 --> 00:06:39,130
along<font color="#CCCCCC"> but let's face it those screens</font>

160
00:06:37,360 --> 00:06:42,159
are pretty awesome<font color="#CCCCCC"> in this</font><font color="#E5E5E5"> room so</font>

161
00:06:39,130 --> 00:06:44,260
hopefully that works agenda for the<font color="#CCCCCC"> rest</font>

162
00:06:42,159 --> 00:06:45,639
of<font color="#E5E5E5"> the talk</font><font color="#CCCCCC"> I'm going</font><font color="#E5E5E5"> to be talking a</font>

163
00:06:44,260 --> 00:06:47,110
little bit<font color="#CCCCCC"> about theory we're going to</font>

164
00:06:45,639 --> 00:06:49,000
talk<font color="#CCCCCC"> about some</font><font color="#E5E5E5"> different tools you can</font>

165
00:06:47,110 --> 00:06:49,740
use<font color="#CCCCCC"> to do this</font><font color="#E5E5E5"> how you can modify your</font>

166
00:06:49,000 --> 00:06:51,990
<font color="#CCCCCC">data it's my</font>

167
00:06:49,740 --> 00:06:53,729
at work<font color="#E5E5E5"> most importantly how you guys</font>

168
00:06:51,990 --> 00:06:56,069
can bring<font color="#E5E5E5"> this and do this back at home</font>

169
00:06:53,729 --> 00:06:58,020
or<font color="#E5E5E5"> the office</font><font color="#CCCCCC"> we're going to talk</font><font color="#E5E5E5"> about</font>

170
00:06:56,069 --> 00:07:01,979
some demos and I'm going to drop two new

171
00:06:58,020 --> 00:07:04,948
tools on you guys at the end my name is

172
00:07:01,979 --> 00:07:09,599
<font color="#E5E5E5">Marc gené mujin or</font><font color="#CCCCCC"> mark Jamel gah</font>

173
00:07:04,949 --> 00:07:13,770
if I'm in Montreal<font color="#CCCCCC"> so I've been working</font>

174
00:07:09,599 --> 00:07:16,620
in information security since 2000<font color="#CCCCCC"> been</font>

175
00:07:13,770 --> 00:07:18,990
<font color="#CCCCCC">doing IT for about 20 plus</font><font color="#E5E5E5"> years give or</font>

176
00:07:16,620 --> 00:07:22,949
take<font color="#CCCCCC"> I love doing the digital forensics</font>

177
00:07:18,990 --> 00:07:25,110
<font color="#CCCCCC">and</font><font color="#E5E5E5"> Incident Response type stuff I'm</font>

178
00:07:22,949 --> 00:07:27,870
happy to talk<font color="#CCCCCC"> about some of the academic</font>

179
00:07:25,110 --> 00:07:34,460
fraud cases<font color="#E5E5E5"> I've worked in a less</font><font color="#CCCCCC"> public</font>

180
00:07:27,870 --> 00:07:38,460
setting<font color="#E5E5E5"> and I can fold a fitted sheet so</font>

181
00:07:34,460 --> 00:07:41,400
as an industry<font color="#E5E5E5"> we have nailed serial</font>

182
00:07:38,460 --> 00:07:42,900
code that code<font color="#CCCCCC"> that</font><font color="#E5E5E5"> runs normal one</font>

183
00:07:41,400 --> 00:07:45,299
instruction after the<font color="#E5E5E5"> other we've got</font>

184
00:07:42,900 --> 00:07:47,599
that down<font color="#CCCCCC"> you know think about when was</font>

185
00:07:45,300 --> 00:07:49,620
the last<font color="#E5E5E5"> time you guys heard about a</font>

186
00:07:47,599 --> 00:07:52,830
software developer that had to patch

187
00:07:49,620 --> 00:07:54,150
serial code<font color="#E5E5E5"> you know Oracle they haven't</font>

188
00:07:52,830 --> 00:07:56,520
had to do it their stuffs rock-solid

189
00:07:54,150 --> 00:07:59,849
<font color="#E5E5E5">Microsoft their stuffs rock-solid Adobe</font>

190
00:07:56,520 --> 00:08:01,710
their stuffs rock-solid<font color="#CCCCCC"> Wes</font><font color="#E5E5E5"> is telling</font>

191
00:07:59,849 --> 00:08:04,680
me that<font color="#E5E5E5"> Oracle put out some patches</font>

192
00:08:01,710 --> 00:08:06,090
recently<font color="#CCCCCC"> was 300</font><font color="#E5E5E5"> okay</font><font color="#CCCCCC"> so maybe but</font>

193
00:08:04,680 --> 00:08:10,770
everybody else they've got it down<font color="#E5E5E5"> right</font>

194
00:08:06,090 --> 00:08:13,049
<font color="#CCCCCC">No this code is hard when you go</font>

195
00:08:10,770 --> 00:08:14,849
<font color="#E5E5E5">parallel you literally increase the</font>

196
00:08:13,050 --> 00:08:17,550
difficulty<font color="#E5E5E5"> by an order of</font><font color="#CCCCCC"> magnitude</font><font color="#E5E5E5"> this</font>

197
00:08:14,849 --> 00:08:20,009
<font color="#E5E5E5">is not an easy problem that's why we</font>

198
00:08:17,550 --> 00:08:22,110
still struggle<font color="#CCCCCC"> with</font><font color="#E5E5E5"> it so there's two</font>

199
00:08:20,009 --> 00:08:25,199
types<font color="#CCCCCC"> of parallelism</font><font color="#E5E5E5"> coarse grained</font>

200
00:08:22,110 --> 00:08:27,210
parallelism<font color="#CCCCCC"> fine grained parallelism</font><font color="#E5E5E5"> if</font>

201
00:08:25,199 --> 00:08:29,580
you don't have to think<font color="#E5E5E5"> about it in</font><font color="#CCCCCC"> your</font>

202
00:08:27,210 --> 00:08:31,710
process that your program already<font color="#E5E5E5"> takes</font>

203
00:08:29,580 --> 00:08:34,130
advantages<font color="#CCCCCC"> of multiple CPU cores</font>

204
00:08:31,710 --> 00:08:37,380
that's fine grained parallelism

205
00:08:34,130 --> 00:08:39,240
<font color="#E5E5E5">rendering programs</font><font color="#CCCCCC"> hand break</font><font color="#E5E5E5"> some of</font>

206
00:08:37,380 --> 00:08:40,860
<font color="#CCCCCC">the compression tools Cinebench</font><font color="#E5E5E5"> these</font>

207
00:08:39,240 --> 00:08:44,700
things all take advantage<font color="#CCCCCC"> of however</font>

208
00:08:40,860 --> 00:08:48,120
<font color="#E5E5E5">much CPU you can throw at them what I'm</font>

209
00:08:44,700 --> 00:08:49,860
here to talk<font color="#E5E5E5"> about is tools that aren't</font>

210
00:08:48,120 --> 00:08:51,209
built<font color="#CCCCCC"> to take advantage of that</font><font color="#E5E5E5"> because</font>

211
00:08:49,860 --> 00:08:54,320
<font color="#E5E5E5">that's where the interesting stuff</font>

212
00:08:51,209 --> 00:08:58,079
happens<font color="#CCCCCC"> so when you think about search</font>

213
00:08:54,320 --> 00:08:59,940
you've in this could be searching

214
00:08:58,079 --> 00:09:01,770
through a memory image searching through

215
00:08:59,940 --> 00:09:03,970
a disk image if you're<font color="#E5E5E5"> doing forensics</font>

216
00:09:01,770 --> 00:09:06,339
this could be searching through a log

217
00:09:03,970 --> 00:09:10,209
this could be working<font color="#E5E5E5"> with pictures from</font>

218
00:09:06,339 --> 00:09:11,769
your camera<font color="#E5E5E5"> you start it by zero and you</font>

219
00:09:10,209 --> 00:09:14,050
search through the rest<font color="#E5E5E5"> of that camera</font>

220
00:09:11,769 --> 00:09:15,519
<font color="#CCCCCC">for that image</font><font color="#E5E5E5"> looking for whatever it</font>

221
00:09:14,050 --> 00:09:17,649
is<font color="#E5E5E5"> that</font><font color="#CCCCCC"> you're searching for</font><font color="#E5E5E5"> you have to</font>

222
00:09:15,519 --> 00:09:22,329
go through byte by byte<font color="#E5E5E5"> and find it in</font>

223
00:09:17,649 --> 00:09:25,449
your<font color="#E5E5E5"> data so one way</font><font color="#CCCCCC"> we can make this</font>

224
00:09:22,329 --> 00:09:28,660
work is by changing<font color="#E5E5E5"> our data sounds easy</font>

225
00:09:25,449 --> 00:09:32,349
but what's that<font color="#CCCCCC"> really</font><font color="#E5E5E5"> mean so we want</font>

226
00:09:28,660 --> 00:09:34,689
to give<font color="#E5E5E5"> that data set to a CPU core and</font>

227
00:09:32,350 --> 00:09:36,730
let it search through the data<font color="#E5E5E5"> so let's</font>

228
00:09:34,689 --> 00:09:39,219
take a big data set<font color="#E5E5E5"> and split it into</font>

229
00:09:36,730 --> 00:09:41,920
chunks<font color="#CCCCCC"> so the example here that we're</font>

230
00:09:39,220 --> 00:09:43,480
doing<font color="#CCCCCC"> I want to go through</font><font color="#E5E5E5"> this split</font>

231
00:09:41,920 --> 00:09:46,599
line and we're going<font color="#CCCCCC"> to start</font><font color="#E5E5E5"> at the</font>

232
00:09:43,480 --> 00:09:49,899
right<font color="#E5E5E5"> side of this command line so</font><font color="#CCCCCC"> that</font>

233
00:09:46,600 --> 00:09:53,350
very last<font color="#E5E5E5"> parameter is an IP address -</font>

234
00:09:49,899 --> 00:09:56,319
add a code SPL that is the<font color="#E5E5E5"> output file</font>

235
00:09:53,350 --> 00:09:58,360
that split is going to create the<font color="#CCCCCC"> next</font>

236
00:09:56,319 --> 00:10:00,639
parameter<font color="#E5E5E5"> again counting from the right</font>

237
00:09:58,360 --> 00:10:03,279
is our<font color="#E5E5E5"> file name so that's just IP</font>

238
00:10:00,639 --> 00:10:05,889
address - date code log<font color="#E5E5E5"> so that's what</font>

239
00:10:03,279 --> 00:10:09,399
we're splitting our next thing is - l2

240
00:10:05,889 --> 00:10:12,970
million so think maybe we're gonna split

241
00:10:09,399 --> 00:10:15,490
<font color="#CCCCCC">two million lines</font><font color="#E5E5E5"> okay so that's</font><font color="#CCCCCC"> L lines</font>

242
00:10:12,970 --> 00:10:21,040
<font color="#CCCCCC">two</font><font color="#E5E5E5"> million two million lines per output</font>

243
00:10:15,490 --> 00:10:25,059
<font color="#E5E5E5">file</font><font color="#CCCCCC"> - d + - a - a - says to use two</font>

244
00:10:21,040 --> 00:10:27,579
characters in our suffix<font color="#E5E5E5"> and D is four</font>

245
00:10:25,059 --> 00:10:30,910
digits<font color="#E5E5E5"> so our first output file is going</font>

246
00:10:27,579 --> 00:10:33,878
to be SPL<font color="#E5E5E5"> zero zero our next one is SPL</font>

247
00:10:30,910 --> 00:10:37,540
zero<font color="#CCCCCC"> 1 zero</font><font color="#E5E5E5"> - yada yada</font><font color="#CCCCCC"> yada</font><font color="#E5E5E5"> so that</font>

248
00:10:33,879 --> 00:10:39,370
breaks our data up into<font color="#E5E5E5"> chunks depending</font>

249
00:10:37,540 --> 00:10:41,019
<font color="#CCCCCC">on what you're doing</font><font color="#E5E5E5"> with</font><font color="#CCCCCC"> your</font><font color="#E5E5E5"> IO you</font>

250
00:10:39,370 --> 00:10:44,649
may want to compress these as<font color="#E5E5E5"> well to</font>

251
00:10:41,019 --> 00:10:46,779
save some disk space we'll come<font color="#E5E5E5"> back to</font>

252
00:10:44,649 --> 00:10:49,449
<font color="#CCCCCC">that in a bit I want you guys</font><font color="#E5E5E5"> to</font>

253
00:10:46,779 --> 00:10:52,360
recognize that if you download the<font color="#CCCCCC"> PDF</font>

254
00:10:49,449 --> 00:10:56,649
slide 15<font color="#E5E5E5"> has a way to split up a large</font>

255
00:10:52,360 --> 00:10:59,379
data<font color="#CCCCCC"> set this is probably a little</font><font color="#E5E5E5"> bit</font>

256
00:10:56,649 --> 00:11:01,179
<font color="#E5E5E5">of bash</font><font color="#CCCCCC"> kung-fu for some of you</font><font color="#E5E5E5"> guys so</font>

257
00:10:59,379 --> 00:11:04,120
what this is<font color="#CCCCCC"> going</font><font color="#E5E5E5"> to do is going to</font>

258
00:11:01,179 --> 00:11:08,230
<font color="#E5E5E5">generate LS a list of all your files</font>

259
00:11:04,120 --> 00:11:10,929
<font color="#E5E5E5">that start</font><font color="#CCCCCC"> with HTTP -</font><font color="#E5E5E5"> -</font><font color="#CCCCCC"> o</font><font color="#E5E5E5"> star</font><font color="#CCCCCC"> and it's</font>

260
00:11:08,230 --> 00:11:13,660
going<font color="#E5E5E5"> to put those file names one by one</font>

261
00:11:10,929 --> 00:11:16,449
<font color="#E5E5E5">into a variable called I and then we're</font>

262
00:11:13,660 --> 00:11:18,459
<font color="#E5E5E5">going to</font><font color="#CCCCCC"> XC</font><font color="#E5E5E5"> cat which just decompress</font>

263
00:11:16,450 --> 00:11:21,910
just decompresses that data and then

264
00:11:18,459 --> 00:11:23,979
we're<font color="#E5E5E5"> going</font><font color="#CCCCCC"> to grep for bedside org</font><font color="#E5E5E5"> evil</font>

265
00:11:21,910 --> 00:11:26,139
<font color="#CCCCCC">calm was already taken so our adversary</font>

266
00:11:23,980 --> 00:11:29,050
had to use bad side door<font color="#E5E5E5"> and then we're</font>

267
00:11:26,139 --> 00:11:32,019
going<font color="#CCCCCC"> to do a WCHL simple word count or</font>

268
00:11:29,050 --> 00:11:34,839
line count<font color="#E5E5E5"> to figure out how many hits</font>

269
00:11:32,019 --> 00:11:36,279
<font color="#CCCCCC">we had so that's</font><font color="#E5E5E5"> about seven</font><font color="#CCCCCC"> and a half</font>

270
00:11:34,839 --> 00:11:43,029
<font color="#E5E5E5">minutes to go through</font><font color="#CCCCCC"> this particular</font>

271
00:11:36,279 --> 00:11:45,160
data set so we can use<font color="#CCCCCC"> x</font><font color="#E5E5E5"> args to kick</font>

272
00:11:43,029 --> 00:11:49,600
this off in parallel<font color="#CCCCCC"> so what we're doing</font>

273
00:11:45,160 --> 00:11:53,290
<font color="#CCCCCC">here is p 64</font><font color="#E5E5E5"> so that's 64 concurrent</font>

274
00:11:49,600 --> 00:11:55,870
running processes<font color="#CCCCCC"> l 8 says take 8</font><font color="#E5E5E5"> file</font>

275
00:11:53,290 --> 00:11:58,959
<font color="#E5E5E5">names</font><font color="#CCCCCC"> pass</font><font color="#E5E5E5"> 8 file names</font><font color="#CCCCCC"> to one instance</font>

276
00:11:55,870 --> 00:12:01,360
of<font color="#CCCCCC"> XE cat</font><font color="#E5E5E5"> eight file names to another</font>

277
00:11:58,959 --> 00:12:02,560
instance<font color="#E5E5E5"> of XE cat</font><font color="#CCCCCC"> yada yada yada until</font>

278
00:12:01,360 --> 00:12:04,600
you've got<font color="#CCCCCC"> six before</font><font color="#E5E5E5"> running</font>

279
00:12:02,560 --> 00:12:07,029
concurrently<font color="#E5E5E5"> and then again we're going</font>

280
00:12:04,600 --> 00:12:09,070
<font color="#E5E5E5">to do our grep for</font><font color="#CCCCCC"> bad</font><font color="#E5E5E5"> side org so we</font>

281
00:12:07,029 --> 00:12:11,050
just went<font color="#CCCCCC"> from a little over seven</font>

282
00:12:09,070 --> 00:12:14,079
minutes<font color="#E5E5E5"> down to</font><font color="#CCCCCC"> two</font><font color="#E5E5E5"> minutes I call that</font>

283
00:12:11,050 --> 00:12:16,810
a win<font color="#CCCCCC"> that's six minutes early we get</font><font color="#E5E5E5"> to</font>

284
00:12:14,079 --> 00:12:20,260
leave<font color="#CCCCCC"> okay maybe six minutes longer</font><font color="#E5E5E5"> to</font>

285
00:12:16,810 --> 00:12:22,510
spend browsing reddit<font color="#CCCCCC"> i break down</font>

286
00:12:20,260 --> 00:12:23,890
<font color="#E5E5E5">slides scattered throughout the PDF so</font>

287
00:12:22,510 --> 00:12:26,319
if you guys<font color="#CCCCCC"> are playing</font><font color="#E5E5E5"> along at home</font>

288
00:12:23,890 --> 00:12:30,430
this will describe what<font color="#CCCCCC"> I'm covering</font>

289
00:12:26,320 --> 00:12:33,339
<font color="#E5E5E5">verbally X</font><font color="#CCCCCC"> orgs is going to be on every</font>

290
00:12:30,430 --> 00:12:35,319
<font color="#E5E5E5">UNIX box you've used since the 1970s or</font>

291
00:12:33,339 --> 00:12:37,920
for some<font color="#E5E5E5"> of you</font><font color="#CCCCCC"> every UNIX box you've</font>

292
00:12:35,320 --> 00:12:42,699
used since<font color="#E5E5E5"> you know three</font><font color="#CCCCCC"> years ago</font>

293
00:12:37,920 --> 00:12:45,069
<font color="#CCCCCC">Kanoe parallel is awesome this is new it</font>

294
00:12:42,699 --> 00:12:47,019
may not be<font color="#E5E5E5"> ever on every box you use it</font>

295
00:12:45,070 --> 00:12:49,779
is in the Debian repositories it is in

296
00:12:47,019 --> 00:12:52,630
your yum repositories<font color="#E5E5E5"> and it's just a</font>

297
00:12:49,779 --> 00:12:54,939
<font color="#CCCCCC">perl script</font><font color="#E5E5E5"> so if it's not in</font><font color="#CCCCCC"> a repo for</font>

298
00:12:52,630 --> 00:12:57,399
your particular<font color="#E5E5E5"> oh</font><font color="#CCCCCC"> ah</font><font color="#E5E5E5"> OS you can just</font>

299
00:12:54,940 --> 00:12:59,560
download it and run<font color="#E5E5E5"> it it is one of the</font>

300
00:12:57,399 --> 00:13:02,199
best<font color="#E5E5E5"> documented UNIX utilities I've ever</font>

301
00:12:59,560 --> 00:13:04,329
seen<font color="#CCCCCC"> the man page and then there's a</font>

302
00:13:02,199 --> 00:13:08,019
tutorial<font color="#E5E5E5"> together or about a hundred</font>

303
00:13:04,329 --> 00:13:09,849
pages<font color="#E5E5E5"> so if you have trouble</font><font color="#CCCCCC"> sleeping</font><font color="#E5E5E5"> it</font>

304
00:13:08,019 --> 00:13:14,100
is<font color="#CCCCCC"> a wonderful wonderful resource that's</font>

305
00:13:09,850 --> 00:13:17,050
been provided by the<font color="#E5E5E5"> author man - tea</font>

306
00:13:14,100 --> 00:13:20,139
<font color="#E5E5E5">probably new for a lot of</font><font color="#CCCCCC"> you guys</font><font color="#E5E5E5"> what</font>

307
00:13:17,050 --> 00:13:24,579
<font color="#E5E5E5">that does is dump a postscript formatted</font>

308
00:13:20,139 --> 00:13:27,160
<font color="#CCCCCC">version of the</font><font color="#E5E5E5"> the man page used to have</font>

309
00:13:24,579 --> 00:13:30,160
<font color="#E5E5E5">PostScript printers we don't anymore</font><font color="#CCCCCC"> the</font>

310
00:13:27,160 --> 00:13:33,250
PS<font color="#CCCCCC"> - PDF</font><font color="#E5E5E5"> command</font><font color="#CCCCCC"> will read that</font>

311
00:13:30,160 --> 00:13:35,500
script format and dump<font color="#E5E5E5"> a PDF so</font><font color="#CCCCCC"> if you</font>

312
00:13:33,250 --> 00:13:37,389
want<font color="#E5E5E5"> to load up</font><font color="#CCCCCC"> a PDF so that you can</font>

313
00:13:35,500 --> 00:13:40,720
print<font color="#E5E5E5"> it out read it on the bus 3d on</font>

314
00:13:37,389 --> 00:13:43,120
the<font color="#E5E5E5"> train</font><font color="#CCCCCC"> make paper airplanes</font><font color="#E5E5E5"> have a</font>

315
00:13:40,720 --> 00:13:43,449
little you know<font color="#E5E5E5"> whatever</font><font color="#CCCCCC"> you're good to</font>

316
00:13:43,120 --> 00:13:46,509
go

317
00:13:43,449 --> 00:13:48,670
<font color="#E5E5E5">okay first of all this is my cat</font><font color="#CCCCCC"> alley</font>

318
00:13:46,509 --> 00:13:53,079
<font color="#E5E5E5">he's a little slow</font>

319
00:13:48,670 --> 00:13:57,009
he's a he's a chill kind of cat<font color="#E5E5E5"> so is my</font>

320
00:13:53,079 --> 00:13:58,989
<font color="#E5E5E5">example of the starting base so this is</font>

321
00:13:57,009 --> 00:14:01,899
running<font color="#CCCCCC"> through</font><font color="#E5E5E5"> that blue</font><font color="#CCCCCC"> smoke</font><font color="#E5E5E5"> data set</font>

322
00:13:58,990 --> 00:14:04,000
and we're doing<font color="#E5E5E5"> a traditional</font><font color="#CCCCCC"> serial</font>

323
00:14:01,899 --> 00:14:05,560
search looking<font color="#CCCCCC"> for anyone</font><font color="#E5E5E5"> that's trying</font>

324
00:14:04,000 --> 00:14:08,319
<font color="#E5E5E5">to find out information about the new</font>

325
00:14:05,560 --> 00:14:11,500
chalupa<font color="#CCCCCC"> and that takes about</font><font color="#E5E5E5"> seven</font>

326
00:14:08,319 --> 00:14:14,079
minutes<font color="#CCCCCC"> to go through that data set</font><font color="#E5E5E5"> our</font>

327
00:14:11,500 --> 00:14:16,089
first<font color="#E5E5E5"> step at doing things in parallel</font>

328
00:14:14,079 --> 00:14:18,300
<font color="#E5E5E5">this is my cat</font><font color="#CCCCCC"> Kelly right after she</font><font color="#E5E5E5"> got</font>

329
00:14:16,089 --> 00:14:20,829
shaved<font color="#CCCCCC"> I love this picture</font>

330
00:14:18,300 --> 00:14:22,660
<font color="#CCCCCC">so what Kelly is showing is a much</font>

331
00:14:20,829 --> 00:14:24,370
<font color="#E5E5E5">lighter weight way to go through it and</font>

332
00:14:22,660 --> 00:14:26,860
<font color="#E5E5E5">we go from</font><font color="#CCCCCC"> seven</font><font color="#E5E5E5"> minutes to</font><font color="#CCCCCC"> forty nine</font>

333
00:14:24,370 --> 00:14:27,779
<font color="#CCCCCC">seconds just</font><font color="#E5E5E5"> by running things in</font>

334
00:14:26,860 --> 00:14:31,000
parallel

335
00:14:27,779 --> 00:14:33,430
<font color="#E5E5E5">you'll notice throughout the slides some</font>

336
00:14:31,000 --> 00:14:34,600
of the text is in<font color="#E5E5E5"> bold for those of you</font>

337
00:14:33,430 --> 00:14:36,790
that<font color="#E5E5E5"> are used to working</font><font color="#CCCCCC"> at a command</font>

338
00:14:34,600 --> 00:14:39,939
prompt there's no concept of a bold font

339
00:14:36,790 --> 00:14:42,759
at the command prompt<font color="#CCCCCC"> I use bold to</font>

340
00:14:39,939 --> 00:14:46,540
indicate what is run in parallel<font color="#CCCCCC"> so the</font>

341
00:14:42,759 --> 00:14:50,079
<font color="#CCCCCC">Elzy cat in the search</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> get 1lz cat</font>

342
00:14:46,540 --> 00:14:51,880
in<font color="#E5E5E5"> one grep for each cpu thread that is</font>

343
00:14:50,079 --> 00:14:53,560
available<font color="#E5E5E5"> from your hardware and then</font>

344
00:14:51,880 --> 00:14:56,019
those are<font color="#CCCCCC"> all</font><font color="#E5E5E5"> kicked off and run in</font>

345
00:14:53,560 --> 00:14:57,670
parallel<font color="#CCCCCC"> so seven minutes</font><font color="#E5E5E5"> to one minute</font>

346
00:14:56,019 --> 00:15:03,250
<font color="#E5E5E5">I'm impressed</font><font color="#CCCCCC"> I think that's a pretty</font>

347
00:14:57,670 --> 00:15:06,160
big<font color="#E5E5E5"> speed-up we can go further so now</font><font color="#CCCCCC"> we</font>

348
00:15:03,250 --> 00:15:09,220
got our<font color="#CCCCCC"> first race</font><font color="#E5E5E5"> car picture and what</font>

349
00:15:06,160 --> 00:15:12,160
we do here is we<font color="#E5E5E5"> include the WC - L in</font>

350
00:15:09,220 --> 00:15:14,610
the parallelization<font color="#E5E5E5"> so that saves us</font>

351
00:15:12,160 --> 00:15:17,050
about<font color="#CCCCCC"> 10% for this particular search</font>

352
00:15:14,610 --> 00:15:18,939
<font color="#CCCCCC">other searches this can</font><font color="#E5E5E5"> make a bigger</font>

353
00:15:17,050 --> 00:15:22,779
<font color="#E5E5E5">difference if you're working with larger</font>

354
00:15:18,939 --> 00:15:26,170
<font color="#CCCCCC">datasets</font><font color="#E5E5E5"> now we're up</font><font color="#CCCCCC"> to an</font><font color="#E5E5E5"> IndyCar</font><font color="#CCCCCC"> we</font>

355
00:15:22,779 --> 00:15:27,670
cut<font color="#E5E5E5"> another 5% by getting rid of regular</font>

356
00:15:26,170 --> 00:15:29,290
expressions by default

357
00:15:27,670 --> 00:15:33,009
grep assumes that you're doing<font color="#E5E5E5"> for</font>

358
00:15:29,290 --> 00:15:35,050
<font color="#CCCCCC">regular expression I have a more</font>

359
00:15:33,009 --> 00:15:37,029
dramatic<font color="#CCCCCC"> example of</font><font color="#E5E5E5"> this coming up I</font>

360
00:15:35,050 --> 00:15:40,089
<font color="#E5E5E5">promise no one seems particularly</font>

361
00:15:37,029 --> 00:15:43,269
<font color="#E5E5E5">impressed</font><font color="#CCCCCC"> that we save 5%</font><font color="#E5E5E5"> the next one</font>

362
00:15:40,089 --> 00:15:43,810
is a good<font color="#E5E5E5"> example so and then we got</font>

363
00:15:43,269 --> 00:15:45,400
<font color="#CCCCCC">sebacean</font>

364
00:15:43,810 --> 00:15:49,839
Vettel<font color="#CCCCCC"> and his</font><font color="#E5E5E5"> Ferrari up</font><font color="#CCCCCC"> at Montreal</font>

365
00:15:45,400 --> 00:15:54,579
and we<font color="#E5E5E5"> cut another 5% by running so</font>

366
00:15:49,840 --> 00:15:57,279
there's<font color="#E5E5E5"> a option</font><font color="#CCCCCC"> to parallel</font><font color="#E5E5E5"> je 110</font><font color="#CCCCCC"> % so</font>

367
00:15:54,580 --> 00:15:59,710
it runs<font color="#E5E5E5"> at 110 percent so we basically</font>

368
00:15:57,279 --> 00:16:02,170
kick off a<font color="#E5E5E5"> couple extra processes and</font>

369
00:15:59,710 --> 00:16:04,660
the idea here<font color="#CCCCCC"> is that once one process</font>

370
00:16:02,170 --> 00:16:06,790
dies<font color="#E5E5E5"> there's already another process in</font>

371
00:16:04,660 --> 00:16:08,500
memory ready to take<font color="#CCCCCC"> over</font><font color="#E5E5E5"> to that for</font>

372
00:16:06,790 --> 00:16:10,839
<font color="#E5E5E5">that</font><font color="#CCCCCC"> CPU core you don't have to wait to</font>

373
00:16:08,500 --> 00:16:13,839
spin up the<font color="#E5E5E5"> process so we're moving some</font>

374
00:16:10,839 --> 00:16:15,400
of<font color="#E5E5E5"> that scheduling on to the kernel</font>

375
00:16:13,839 --> 00:16:17,470
rather than letting a Perl script handle

376
00:16:15,400 --> 00:16:22,800
it makes sense that<font color="#CCCCCC"> the kernel</font><font color="#E5E5E5"> runs a</font>

377
00:16:17,470 --> 00:16:26,200
<font color="#E5E5E5">little faster than</font><font color="#CCCCCC"> Perl again break down</font>

378
00:16:22,800 --> 00:16:28,349
so in that example<font color="#CCCCCC"> the hard thing that</font>

379
00:16:26,200 --> 00:16:31,810
we're<font color="#CCCCCC"> doing is the decompression</font>

380
00:16:28,350 --> 00:16:34,870
decompressing files<font color="#CCCCCC"> takes time</font><font color="#E5E5E5"> takes CPU</font>

381
00:16:31,810 --> 00:16:38,500
time but if<font color="#CCCCCC"> you're compressed on disk</font>

382
00:16:34,870 --> 00:16:39,100
<font color="#E5E5E5">what time do you save you're not waiting</font>

383
00:16:38,500 --> 00:16:42,880
on<font color="#CCCCCC"> IO</font>

384
00:16:39,100 --> 00:16:44,860
<font color="#E5E5E5">so we're trading</font><font color="#CCCCCC"> IO time for CPU time</font>

385
00:16:42,880 --> 00:16:46,330
<font color="#CCCCCC">they're</font><font color="#E5E5E5"> vice-versa so depending on the</font>

386
00:16:44,860 --> 00:16:49,270
way you think<font color="#CCCCCC"> about</font><font color="#E5E5E5"> it so in this</font>

387
00:16:46,330 --> 00:16:53,650
example up here<font color="#E5E5E5"> we're back to that</font>

388
00:16:49,270 --> 00:16:55,720
that bad<font color="#CCCCCC"> URLs file is a list of</font><font color="#E5E5E5"> 2320 IP</font>

389
00:16:53,650 --> 00:16:57,939
addresses<font color="#CCCCCC"> and urls from your threat</font>

390
00:16:55,720 --> 00:17:00,010
Intel<font color="#CCCCCC"> Group I don't know about you guys</font>

391
00:16:57,940 --> 00:17:02,589
but<font color="#CCCCCC"> this</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> something that I've</font><font color="#E5E5E5"> this was</font>

392
00:17:00,010 --> 00:17:05,349
very<font color="#CCCCCC"> real-world example for me you get</font>

393
00:17:02,589 --> 00:17:07,420
<font color="#E5E5E5">that dump from the FBI or some other</font>

394
00:17:05,349 --> 00:17:09,938
three-letter agency hey all this stuff

395
00:17:07,420 --> 00:17:10,630
is bad can<font color="#CCCCCC"> you find it</font><font color="#E5E5E5"> so you go and do</font>

396
00:17:09,939 --> 00:17:14,650
your<font color="#E5E5E5"> search</font>

397
00:17:10,630 --> 00:17:19,179
this is<font color="#CCCCCC"> 677 minutes</font><font color="#E5E5E5"> how long is that in</font>

398
00:17:14,650 --> 00:17:22,630
freedom units that's 11 hours 17 minutes

399
00:17:19,179 --> 00:17:27,970
that's<font color="#E5E5E5"> a that takes a while</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> you'll</font>

400
00:17:22,630 --> 00:17:32,679
notice this<font color="#CCCCCC"> is in parallel um pegan 16</font>

401
00:17:27,970 --> 00:17:35,440
<font color="#E5E5E5">CPUs 32 threads for 11</font><font color="#CCCCCC"> hours and 17</font>

402
00:17:32,679 --> 00:17:41,370
minutes<font color="#E5E5E5"> to cross reference that thread</font>

403
00:17:35,440 --> 00:17:46,030
Intel<font color="#E5E5E5"> list that's redonkulous capital F</font>

404
00:17:41,370 --> 00:17:50,889
this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> that option</font><font color="#E5E5E5"> to grep to save that</font>

405
00:17:46,030 --> 00:17:54,340
<font color="#E5E5E5">time so how much time do I save 11 hours</font>

406
00:17:50,890 --> 00:17:56,860
<font color="#E5E5E5">so we went from</font><font color="#CCCCCC"> 11 hours 17 minutes down</font>

407
00:17:54,340 --> 00:17:57,399
to<font color="#E5E5E5"> 96 seconds all by adding a dash</font>

408
00:17:56,860 --> 00:18:02,050
capital

409
00:17:57,400 --> 00:18:05,530
so greps<font color="#E5E5E5"> should be fast</font>

410
00:18:02,050 --> 00:18:08,230
crepes should feel very<font color="#E5E5E5"> snappy</font><font color="#CCCCCC"> unlike a</font>

411
00:18:05,530 --> 00:18:10,300
<font color="#CCCCCC">Pentium</font><font color="#E5E5E5"> 60 so if any of you guys have a</font>

412
00:18:08,230 --> 00:18:12,400
CPU that's faster than 60 megahertz

413
00:18:10,300 --> 00:18:14,980
<font color="#E5E5E5">which is everyone</font>

414
00:18:12,400 --> 00:18:16,930
grep should feel snappy if it doesn't

415
00:18:14,980 --> 00:18:18,520
disable regular expressions get rid of

416
00:18:16,930 --> 00:18:21,340
<font color="#E5E5E5">that I read that capital F you're going</font>

417
00:18:18,520 --> 00:18:22,780
<font color="#E5E5E5">to save</font><font color="#CCCCCC"> yourself some</font><font color="#E5E5E5"> time one of the</font>

418
00:18:21,340 --> 00:18:24,309
<font color="#E5E5E5">pieces of feedback I got</font><font color="#CCCCCC"> from a beta</font>

419
00:18:22,780 --> 00:18:27,700
version<font color="#CCCCCC"> of this presentation was that</font>

420
00:18:24,309 --> 00:18:29,350
<font color="#E5E5E5">mark an IP address in one field is not</font>

421
00:18:27,700 --> 00:18:31,990
equivalent<font color="#CCCCCC"> to</font><font color="#E5E5E5"> an IP address in another</font>

422
00:18:29,350 --> 00:18:33,490
<font color="#E5E5E5">field</font><font color="#CCCCCC"> source and destination IP</font>

423
00:18:31,990 --> 00:18:36,610
addresses are different you<font color="#CCCCCC"> have</font><font color="#E5E5E5"> to use</font>

424
00:18:33,490 --> 00:18:38,679
those differently<font color="#E5E5E5"> so what I did is I'm</font>

425
00:18:36,610 --> 00:18:40,780
<font color="#E5E5E5">showing that parsing is possible with</font>

426
00:18:38,679 --> 00:18:43,750
<font color="#E5E5E5">these techniques</font><font color="#CCCCCC"> I wrote a little</font>

427
00:18:40,780 --> 00:18:46,120
<font color="#CCCCCC">utility here called print URL and what</font>

428
00:18:43,750 --> 00:18:48,280
it does is it parses<font color="#E5E5E5"> out the URL from</font>

429
00:18:46,120 --> 00:18:50,800
those web logs and then generates a<font color="#E5E5E5"> list</font>

430
00:18:48,280 --> 00:18:53,230
<font color="#E5E5E5">of the top 15 sites</font><font color="#CCCCCC"> by going</font><font color="#E5E5E5"> through all</font>

431
00:18:50,800 --> 00:18:55,450
three steps<font color="#CCCCCC"> so</font><font color="#E5E5E5"> it's about</font><font color="#CCCCCC"> three minutes</font>

432
00:18:53,230 --> 00:18:59,260
45 seconds<font color="#CCCCCC"> to get a list of</font><font color="#E5E5E5"> the top 15</font>

433
00:18:55,450 --> 00:19:00,070
sites going over 750 mega logs<font color="#E5E5E5"> that's</font>

434
00:18:59,260 --> 00:19:02,530
<font color="#E5E5E5">not bad</font>

435
00:19:00,070 --> 00:19:05,470
I don't put this one up here<font color="#E5E5E5"> as</font><font color="#CCCCCC"> oh</font><font color="#E5E5E5"> wow</font>

436
00:19:02,530 --> 00:19:07,600
that's<font color="#CCCCCC"> so fast I put this up here as an</font>

437
00:19:05,470 --> 00:19:09,550
example<font color="#E5E5E5"> of don't</font><font color="#CCCCCC"> think like you have to</font>

438
00:19:07,600 --> 00:19:11,169
the grep<font color="#E5E5E5"> is the only thing you can do</font>

439
00:19:09,550 --> 00:19:13,210
<font color="#E5E5E5">don't think like you have to get it all</font>

440
00:19:11,170 --> 00:19:14,620
done in<font color="#CCCCCC"> one</font><font color="#E5E5E5"> step</font><font color="#CCCCCC"> as you're</font><font color="#E5E5E5"> doing</font>

441
00:19:13,210 --> 00:19:16,660
<font color="#CCCCCC">Incident Response as you're</font><font color="#E5E5E5"> doing</font>

442
00:19:14,620 --> 00:19:19,559
searches<font color="#E5E5E5"> for data you can use</font><font color="#CCCCCC"> these</font>

443
00:19:16,660 --> 00:19:23,380
<font color="#CCCCCC">techniques</font><font color="#E5E5E5"> even</font><font color="#CCCCCC"> through multiple steps</font>

444
00:19:19,559 --> 00:19:25,629
<font color="#E5E5E5">quick</font><font color="#CCCCCC"> troubleshooting side you can what</font>

445
00:19:23,380 --> 00:19:28,300
I want you guys to<font color="#E5E5E5"> focus on here is</font><font color="#CCCCCC"> this</font>

446
00:19:25,630 --> 00:19:33,090
far right<font color="#CCCCCC"> column idle</font><font color="#E5E5E5"> this is how much</font>

447
00:19:28,300 --> 00:19:36,610
CPU<font color="#E5E5E5"> time is idle so this search took oh</font>

448
00:19:33,090 --> 00:19:41,590
let's call it about<font color="#CCCCCC"> a</font><font color="#E5E5E5"> 45 seconds to</font><font color="#CCCCCC"> a</font>

449
00:19:36,610 --> 00:19:45,100
minute but we're at<font color="#E5E5E5"> 20%</font><font color="#CCCCCC"> idle</font><font color="#E5E5E5"> with what</font>

450
00:19:41,590 --> 00:19:47,409
<font color="#E5E5E5">30 seconds to go 20 seconds to go so by</font>

451
00:19:45,100 --> 00:19:50,050
splitting up some of those larger input

452
00:19:47,410 --> 00:19:52,240
<font color="#E5E5E5">files that</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> those smaller chunks to</font>

453
00:19:50,050 --> 00:19:55,210
be processed in parallel<font color="#CCCCCC"> you could made</font>

454
00:19:52,240 --> 00:19:56,770
this<font color="#E5E5E5"> search probably twice as fast to be</font>

455
00:19:55,210 --> 00:20:00,970
perfectly honest just by<font color="#E5E5E5"> splitting up</font>

456
00:19:56,770 --> 00:20:04,540
that<font color="#E5E5E5"> data a</font><font color="#CCCCCC"> little bit more so what</font>

457
00:20:00,970 --> 00:20:07,150
started all this<font color="#E5E5E5"> we get a situation</font>

458
00:20:04,540 --> 00:20:09,040
<font color="#CCCCCC">where our thread Intel team gave us that</font>

459
00:20:07,150 --> 00:20:10,390
big list<font color="#CCCCCC"> of IOC</font><font color="#E5E5E5"> s and we had to</font><font color="#CCCCCC"> figure</font>

460
00:20:09,040 --> 00:20:11,850
<font color="#CCCCCC">out what to do with it</font>

461
00:20:10,390 --> 00:20:14,410
we had

462
00:20:11,850 --> 00:20:16,540
cross-referencing<font color="#CCCCCC"> China</font><font color="#E5E5E5"> stuff our thread</font>

463
00:20:14,410 --> 00:20:20,230
<font color="#E5E5E5">Intel group wanted some answers</font><font color="#CCCCCC"> you know</font>

464
00:20:16,540 --> 00:20:23,320
within<font color="#E5E5E5"> a an hour - and searching through</font>

465
00:20:20,230 --> 00:20:24,850
<font color="#E5E5E5">bro logs</font><font color="#CCCCCC"> ended</font><font color="#E5E5E5"> up taking a long time so</font>

466
00:20:23,320 --> 00:20:27,730
we started doing this

467
00:20:24,850 --> 00:20:29,590
apparently bro is called Zeke now<font color="#CCCCCC"> I</font>

468
00:20:27,730 --> 00:20:31,810
don't<font color="#E5E5E5"> think I'm the only one struggling</font>

469
00:20:29,590 --> 00:20:35,649
with that one so I'll probably bounce

470
00:20:31,810 --> 00:20:37,510
back and<font color="#CCCCCC"> forth to put it politely</font><font color="#E5E5E5"> so the</font>

471
00:20:35,650 --> 00:20:40,680
example<font color="#CCCCCC"> that we did here this</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> from my</font>

472
00:20:37,510 --> 00:20:44,260
home security onion sensor this is

473
00:20:40,680 --> 00:20:47,110
<font color="#E5E5E5">78,000 bro logs which is two</font><font color="#CCCCCC"> hundred and</font>

474
00:20:44,260 --> 00:20:50,080
<font color="#E5E5E5">thirty gigs uncompressed</font><font color="#CCCCCC"> stored on disk</font>

475
00:20:47,110 --> 00:20:54,459
was about 16 gigs at six hundred<font color="#CCCCCC"> and</font>

476
00:20:50,080 --> 00:20:56,830
thirty thousand log events<font color="#CCCCCC"> again home</font>

477
00:20:54,460 --> 00:20:59,590
sensor<font color="#CCCCCC"> over months this wasn't like a</font>

478
00:20:56,830 --> 00:21:01,780
<font color="#CCCCCC">two-day</font><font color="#E5E5E5"> period</font><font color="#CCCCCC"> by the</font><font color="#E5E5E5"> way if you want to</font>

479
00:20:59,590 --> 00:21:03,760
find out how<font color="#E5E5E5"> to get blocked by searching</font>

480
00:21:01,780 --> 00:21:06,870
<font color="#E5E5E5">Alexa top 1 million sites let me know</font>

481
00:21:03,760 --> 00:21:09,220
<font color="#E5E5E5">that's a boy</font><font color="#CCCCCC"> conversation</font><font color="#E5E5E5"> so</font>

482
00:21:06,870 --> 00:21:11,080
<font color="#CCCCCC">cross-referencing all of that data with</font>

483
00:21:09,220 --> 00:21:17,140
the Alexa top 1 million going<font color="#E5E5E5"> through</font>

484
00:21:11,080 --> 00:21:21,850
all 78,000 files in serial<font color="#E5E5E5"> took</font><font color="#CCCCCC"> 3500</font>

485
00:21:17,140 --> 00:21:23,890
<font color="#E5E5E5">minutes it's</font><font color="#CCCCCC"> about what 11</font><font color="#E5E5E5"> hours</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> think</font>

486
00:21:21,850 --> 00:21:25,810
<font color="#E5E5E5">no probably more than that</font>

487
00:21:23,890 --> 00:21:31,440
I don't remember<font color="#CCCCCC"> that's</font><font color="#E5E5E5"> all that's three</font>

488
00:21:25,810 --> 00:21:34,750
<font color="#CCCCCC">days isn't</font><font color="#E5E5E5"> it so the next</font><font color="#CCCCCC"> thing we did I</font>

489
00:21:31,440 --> 00:21:36,550
took my<font color="#E5E5E5"> bro file so on security onion</font>

490
00:21:34,750 --> 00:21:40,330
our bro files are split<font color="#E5E5E5"> up by our right</font>

491
00:21:36,550 --> 00:21:42,120
to<font color="#E5E5E5"> make it easier to search ain't</font>

492
00:21:40,330 --> 00:21:45,040
nothing easy<font color="#E5E5E5"> about searching through</font>

493
00:21:42,120 --> 00:21:47,229
78,000 files<font color="#E5E5E5"> so what I did</font><font color="#CCCCCC"> is I wrote</font><font color="#E5E5E5"> a</font>

494
00:21:45,040 --> 00:21:48,909
script called<font color="#E5E5E5"> daily if I because I'm</font>

495
00:21:47,230 --> 00:21:52,360
terrible<font color="#E5E5E5"> naming things it is in the</font>

496
00:21:48,910 --> 00:21:54,520
github<font color="#E5E5E5"> which takes all</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> my HTTP files</font>

497
00:21:52,360 --> 00:21:56,860
for one day<font color="#E5E5E5"> puts them in one big file</font>

498
00:21:54,520 --> 00:21:59,830
<font color="#E5E5E5">take some DNS files puts them in one big</font>

499
00:21:56,860 --> 00:22:02,350
<font color="#E5E5E5">file all</font><font color="#CCCCCC"> of my con logs one big file all</font>

500
00:21:59,830 --> 00:22:05,350
<font color="#CCCCCC">of my weird files</font><font color="#E5E5E5"> all my</font><font color="#CCCCCC"> x.509 puts them</font>

501
00:22:02,350 --> 00:22:07,780
in big files for the day that<font color="#E5E5E5"> gets me</font>

502
00:22:05,350 --> 00:22:10,120
down to 4200 files still about the<font color="#CCCCCC"> same</font>

503
00:22:07,780 --> 00:22:12,930
<font color="#CCCCCC">number of megabytes within rounding</font>

504
00:22:10,120 --> 00:22:16,149
<font color="#E5E5E5">errors same number of log events to the</font>

505
00:22:12,930 --> 00:22:17,980
<font color="#E5E5E5">precisely</font><font color="#CCCCCC"> and then going through and</font>

506
00:22:16,150 --> 00:22:22,180
searching through<font color="#E5E5E5"> that we went from</font>

507
00:22:17,980 --> 00:22:25,270
<font color="#E5E5E5">3,500 minutes to 400 it's a</font><font color="#CCCCCC"> 9x speed up</font>

508
00:22:22,180 --> 00:22:27,760
<font color="#E5E5E5">I'll take it and that's</font><font color="#CCCCCC"> just by</font><font color="#E5E5E5"> getting</font>

509
00:22:25,270 --> 00:22:30,430
the<font color="#CCCCCC"> i/o of dealing with a lot of lot of</font>

510
00:22:27,760 --> 00:22:32,500
small files<font color="#E5E5E5"> the next thing we did is</font><font color="#CCCCCC"> I</font>

511
00:22:30,430 --> 00:22:34,780
<font color="#E5E5E5">went back to</font><font color="#CCCCCC"> those small files but now I</font>

512
00:22:32,500 --> 00:22:40,030
did<font color="#E5E5E5"> it in parallel</font><font color="#CCCCCC"> so I still have all</font>

513
00:22:34,780 --> 00:22:42,340
that<font color="#CCCCCC"> i/o to do</font><font color="#E5E5E5"> but was able to take</font>

514
00:22:40,030 --> 00:22:47,260
advantage<font color="#CCCCCC"> of multiple</font><font color="#E5E5E5"> CPU cores in this</font>

515
00:22:42,340 --> 00:22:50,679
case<font color="#E5E5E5"> I'm using 32 cores</font><font color="#CCCCCC"> down to 150</font>

516
00:22:47,260 --> 00:22:55,300
minutes so we've gone from<font color="#CCCCCC"> 3,500 minutes</font>

517
00:22:50,680 --> 00:22:57,010
down<font color="#CCCCCC"> to 150 that's huge that's maybe</font>

518
00:22:55,300 --> 00:22:58,750
still not what your boss would want

519
00:22:57,010 --> 00:23:00,640
<font color="#E5E5E5">although to be fair we</font><font color="#CCCCCC"> are searching</font>

520
00:22:58,750 --> 00:23:02,650
<font color="#CCCCCC">through</font><font color="#E5E5E5"> months worth of</font><font color="#CCCCCC"> data</font><font color="#E5E5E5"> but it's</font>

521
00:23:00,640 --> 00:23:08,050
still a huge<font color="#CCCCCC"> speed-up think we're done</font>

522
00:23:02,650 --> 00:23:12,010
<font color="#E5E5E5">no there's more so now we do the large</font>

523
00:23:08,050 --> 00:23:14,740
files<font color="#E5E5E5"> and we're down to 35 minutes we</font>

524
00:23:12,010 --> 00:23:17,379
<font color="#CCCCCC">drop two orders of</font><font color="#E5E5E5"> magnitude</font><font color="#CCCCCC"> from our</font>

525
00:23:14,740 --> 00:23:22,870
search time just by using this

526
00:23:17,380 --> 00:23:25,930
techniques so this is the daily if I

527
00:23:22,870 --> 00:23:27,550
<font color="#E5E5E5">scrape</font><font color="#CCCCCC"> that I referenced before</font><font color="#E5E5E5"> again</font>

528
00:23:25,930 --> 00:23:29,110
it's available<font color="#E5E5E5"> in the github</font><font color="#CCCCCC"> and it</font>

529
00:23:27,550 --> 00:23:32,710
takes all<font color="#E5E5E5"> those tiny files and puts them</font>

530
00:23:29,110 --> 00:23:34,449
<font color="#E5E5E5">into bigger chunks</font><font color="#CCCCCC"> I mentioned that</font>

531
00:23:32,710 --> 00:23:36,310
these<font color="#E5E5E5"> techniques working work with</font>

532
00:23:34,450 --> 00:23:40,210
things other than<font color="#E5E5E5"> just searching through</font>

533
00:23:36,310 --> 00:23:42,730
log data<font color="#CCCCCC"> clamavi open source</font><font color="#E5E5E5"> antivirus</font>

534
00:23:40,210 --> 00:23:45,220
engine you can use it for<font color="#E5E5E5"> that so in</font>

535
00:23:42,730 --> 00:23:47,140
this case<font color="#E5E5E5"> I</font><font color="#CCCCCC"> add about 2000</font><font color="#E5E5E5"> Exe were</font>

536
00:23:45,220 --> 00:23:50,080
collected that were run through<font color="#CCCCCC"> the bro</font>

537
00:23:47,140 --> 00:23:53,020
extract script<font color="#CCCCCC"> 11 gigs worth of</font>

538
00:23:50,080 --> 00:23:55,510
executables<font color="#E5E5E5"> took 34 minutes to go</font>

539
00:23:53,020 --> 00:23:56,610
<font color="#CCCCCC">through it</font><font color="#E5E5E5"> all that's not bad oh yeah</font>

540
00:23:55,510 --> 00:23:59,950
it's not<font color="#E5E5E5"> bad</font>

541
00:23:56,610 --> 00:24:01,540
but by splitting<font color="#E5E5E5"> it up into chunks</font><font color="#CCCCCC"> we</font>

542
00:23:59,950 --> 00:24:03,850
were down to<font color="#CCCCCC"> three minutes for 47</font>

543
00:24:01,540 --> 00:24:07,060
seconds<font color="#E5E5E5"> so it's a 10x speed up I'll call</font>

544
00:24:03,850 --> 00:24:09,399
<font color="#CCCCCC">that a win but</font><font color="#E5E5E5"> that's not why I showed</font>

545
00:24:07,060 --> 00:24:12,970
you<font color="#E5E5E5"> this</font><font color="#CCCCCC"> example what I really like</font>

546
00:24:09,400 --> 00:24:14,710
about this example<font color="#E5E5E5"> is the technique here</font>

547
00:24:12,970 --> 00:24:17,710
so I want<font color="#E5E5E5"> to go through this for</font><font color="#CCCCCC"> just a</font>

548
00:24:14,710 --> 00:24:21,280
minute<font color="#E5E5E5"> there are</font><font color="#CCCCCC"> a lot of UNIX utilities</font>

549
00:24:17,710 --> 00:24:23,560
where you can pass them<font color="#CCCCCC"> the input files</font>

550
00:24:21,280 --> 00:24:26,620
as<font color="#E5E5E5"> command-line parameters that's what</font>

551
00:24:23,560 --> 00:24:29,139
we're used to<font color="#CCCCCC"> working with their</font><font color="#E5E5E5"> clam</font><font color="#CCCCCC"> AV</font>

552
00:24:26,620 --> 00:24:30,909
or clam scan is one of a number<font color="#CCCCCC"> of</font><font color="#E5E5E5"> UNIX</font>

553
00:24:29,140 --> 00:24:34,540
<font color="#E5E5E5">utilities where you can give it a file</font>

554
00:24:30,910 --> 00:24:37,090
containing<font color="#E5E5E5"> a list of your input files so</font>

555
00:24:34,540 --> 00:24:38,830
what I did<font color="#CCCCCC"> here is I said find in the</font>

556
00:24:37,090 --> 00:24:43,449
directory called extracted

557
00:24:38,830 --> 00:24:47,080
<font color="#E5E5E5">all files of Tyrell</font><font color="#CCCCCC"> yeah all of my</font><font color="#E5E5E5"> files</font>

558
00:24:43,450 --> 00:24:51,010
that's the dish<font color="#E5E5E5"> type out and save that</font>

559
00:24:47,080 --> 00:24:53,529
in a file called<font color="#CCCCCC"> list now my split</font>

560
00:24:51,010 --> 00:24:54,519
command here is a little weird<font color="#CCCCCC"> to the</font>

561
00:24:53,529 --> 00:24:58,570
<font color="#E5E5E5">point where I'm actually going</font><font color="#CCCCCC"> to look</font>

562
00:24:54,519 --> 00:25:00,429
at it so what<font color="#E5E5E5"> we're doing is and again</font>

563
00:24:58,570 --> 00:25:04,178
<font color="#E5E5E5">I'll start</font><font color="#CCCCCC"> on the</font><font color="#E5E5E5"> right hand side list</font>

564
00:25:00,429 --> 00:25:08,950
dot is our<font color="#E5E5E5"> output file name list is our</font>

565
00:25:04,179 --> 00:25:11,019
input<font color="#CCCCCC"> file name - a</font><font color="#E5E5E5"> 2d tells me we're</font>

566
00:25:08,950 --> 00:25:13,000
gonna use digits<font color="#E5E5E5"> in our file extension</font>

567
00:25:11,019 --> 00:25:16,809
<font color="#CCCCCC">and</font><font color="#E5E5E5"> we're gonna use two carrots or two</font>

568
00:25:13,000 --> 00:25:20,980
<font color="#E5E5E5">characters to name them</font><font color="#CCCCCC"> and then the - n</font>

569
00:25:16,809 --> 00:25:23,350
<font color="#CCCCCC">L</font><font color="#E5E5E5"> over 48 that's a little weird what</font>

570
00:25:20,980 --> 00:25:26,440
we're<font color="#E5E5E5"> telling split is that we want to</font>

571
00:25:23,350 --> 00:25:28,629
split the file<font color="#E5E5E5"> into chunks</font><font color="#CCCCCC"> that's</font><font color="#E5E5E5"> the</font>

572
00:25:26,440 --> 00:25:32,409
technical term<font color="#E5E5E5"> in the main page we want</font>

573
00:25:28,630 --> 00:25:34,539
48 chunks and by default<font color="#E5E5E5"> split</font><font color="#CCCCCC"> we'll</font>

574
00:25:32,409 --> 00:25:37,809
split<font color="#CCCCCC"> it byte boundaries not at line</font>

575
00:25:34,539 --> 00:25:40,000
boundaries so the L divided<font color="#E5E5E5"> by 48 says</font>

576
00:25:37,809 --> 00:25:43,269
split<font color="#E5E5E5"> at line boundaries so</font><font color="#CCCCCC"> that we</font>

577
00:25:40,000 --> 00:25:47,320
don't<font color="#E5E5E5"> have</font><font color="#CCCCCC"> half a file name on different</font>

578
00:25:43,269 --> 00:25:49,269
lines<font color="#CCCCCC"> so if you've</font><font color="#E5E5E5"> got any kind of UNIX</font>

579
00:25:47,320 --> 00:25:52,299
utility<font color="#E5E5E5"> that will take a list of</font><font color="#CCCCCC"> input</font>

580
00:25:49,269 --> 00:25:56,980
file names this weird technique<font color="#E5E5E5"> on slide</font>

581
00:25:52,299 --> 00:25:59,918
45<font color="#E5E5E5"> will save you save your bacon pardon</font>

582
00:25:56,980 --> 00:26:02,320
<font color="#E5E5E5">the phrase</font><font color="#CCCCCC"> okay again break down slide</font>

583
00:25:59,919 --> 00:26:03,940
so how you do this at home<font color="#CCCCCC"> get the</font><font color="#E5E5E5"> day</font>

584
00:26:02,320 --> 00:26:07,480
<font color="#E5E5E5">to store the data process the data any</font>

585
00:26:03,940 --> 00:26:09,130
questions<font color="#E5E5E5"> moving on just getting</font><font color="#CCCCCC"> the</font>

586
00:26:07,480 --> 00:26:10,600
<font color="#CCCCCC">data</font><font color="#E5E5E5"> is pretty easy you guys have</font>

587
00:26:09,130 --> 00:26:12,130
secured the onion you<font color="#E5E5E5"> store in your data</font>

588
00:26:10,600 --> 00:26:13,689
on<font color="#E5E5E5"> your super mikro disk you're sending</font>

589
00:26:12,130 --> 00:26:19,019
a copy<font color="#E5E5E5"> of all that data over to China</font>

590
00:26:13,690 --> 00:26:21,789
you're good<font color="#E5E5E5"> how do you</font><font color="#CCCCCC"> process the</font><font color="#E5E5E5"> data</font>

591
00:26:19,019 --> 00:26:24,549
multiple cores and SSDs that's what it

592
00:26:21,789 --> 00:26:26,470
comes<font color="#CCCCCC"> down to</font><font color="#E5E5E5"> there are s</font><font color="#CCCCCC"> SD s called</font>

593
00:26:24,549 --> 00:26:27,399
nvme drives you don't<font color="#CCCCCC"> really</font><font color="#E5E5E5"> have to</font>

594
00:26:26,470 --> 00:26:31,090
<font color="#CCCCCC">know what</font><font color="#E5E5E5"> it stands for</font>

595
00:26:27,399 --> 00:26:33,129
except fast<font color="#E5E5E5"> if you think normal SSDs are</font>

596
00:26:31,090 --> 00:26:35,100
<font color="#E5E5E5">fast these are</font><font color="#CCCCCC"> two to four times faster</font>

597
00:26:33,130 --> 00:26:37,690
depending<font color="#CCCCCC"> on how much you</font><font color="#E5E5E5"> want to spend</font>

598
00:26:35,100 --> 00:26:41,408
<font color="#E5E5E5">to give an idea</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> how expensive these</font>

599
00:26:37,690 --> 00:26:43,059
are<font color="#E5E5E5"> two terabytes of nvme drives on a</font>

600
00:26:41,409 --> 00:26:44,740
little<font color="#E5E5E5"> adapter card that</font><font color="#CCCCCC"> I've got</font>

601
00:26:43,059 --> 00:26:47,529
dropped in<font color="#E5E5E5"> my</font><font color="#CCCCCC"> workstation</font><font color="#E5E5E5"> over here is</font>

602
00:26:44,740 --> 00:26:50,350
about<font color="#E5E5E5"> a thousand</font><font color="#CCCCCC"> dollars I would say</font>

603
00:26:47,529 --> 00:26:52,650
well within the budget<font color="#E5E5E5"> of most interpret</font>

604
00:26:50,350 --> 00:26:55,750
most<font color="#CCCCCC"> information security groups</font>

605
00:26:52,650 --> 00:26:58,150
<font color="#CCCCCC">to get two terabytes of incredibly fast</font>

606
00:26:55,750 --> 00:27:00,970
<font color="#CCCCCC">storage you can</font><font color="#E5E5E5"> do about</font><font color="#CCCCCC"> 10</font><font color="#E5E5E5"> gigabytes</font>

607
00:26:58,150 --> 00:27:03,490
per second of read if<font color="#E5E5E5"> 10 gigabytes for</font>

608
00:27:00,970 --> 00:27:06,040
<font color="#CCCCCC">sitting that</font><font color="#E5E5E5"> bites nut bits 10 gigabytes</font>

609
00:27:03,490 --> 00:27:08,110
per second<font color="#E5E5E5"> let you watch pulp</font><font color="#CCCCCC"> fiction</font>

610
00:27:06,040 --> 00:27:09,610
twice<font color="#CCCCCC"> per second</font><font color="#E5E5E5"> for as long</font><font color="#CCCCCC"> as you want</font>

611
00:27:08,110 --> 00:27:10,959
<font color="#E5E5E5">to go throughout</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> whole day so you</font>

612
00:27:09,610 --> 00:27:14,050
can<font color="#E5E5E5"> find out what happened</font><font color="#CCCCCC"> to the watch</font>

613
00:27:10,960 --> 00:27:16,450
<font color="#CCCCCC">twice per second all day long</font>

614
00:27:14,050 --> 00:27:19,270
<font color="#E5E5E5">I'm the fan of the AMD stuff</font><font color="#CCCCCC"> they're</font>

615
00:27:16,450 --> 00:27:22,930
running<font color="#CCCCCC"> more cores</font><font color="#E5E5E5"> for cheaper</font><font color="#CCCCCC"> than</font>

616
00:27:19,270 --> 00:27:26,440
Intel right now at a pretty big<font color="#E5E5E5"> you get</font>

617
00:27:22,930 --> 00:27:27,970
a price discount<font color="#E5E5E5"> and more cores</font><font color="#CCCCCC"> so for</font>

618
00:27:26,440 --> 00:27:31,360
this time<font color="#CCCCCC"> or type of work it works out</font>

619
00:27:27,970 --> 00:27:33,430
great if you have a corporate policy you

620
00:27:31,360 --> 00:27:35,500
have<font color="#E5E5E5"> to ballet from HP Lenovo Dell</font>

621
00:27:33,430 --> 00:27:37,300
whatever just go<font color="#E5E5E5"> buy an Intel Xeon and</font>

622
00:27:35,500 --> 00:27:42,220
be<font color="#CCCCCC"> done with</font><font color="#E5E5E5"> it</font><font color="#CCCCCC"> and you're gonna be</font>

623
00:27:37,300 --> 00:27:46,840
<font color="#CCCCCC">spending a little</font><font color="#E5E5E5"> bit more</font><font color="#CCCCCC"> I am a huge</font>

624
00:27:42,220 --> 00:27:51,550
fan<font color="#E5E5E5"> of the metric</font><font color="#CCCCCC"> for the</font><font color="#E5E5E5"> price</font><font color="#CCCCCC"> of a cup</font>

625
00:27:46,840 --> 00:27:52,870
of coffee per day when I get that<font color="#E5E5E5"> email</font>

626
00:27:51,550 --> 00:27:54,399
when I hit that conversation with the

627
00:27:52,870 --> 00:27:56,260
boss<font color="#CCCCCC"> and he doesn't</font><font color="#E5E5E5"> want to spend you</font>

628
00:27:54,400 --> 00:27:58,930
<font color="#CCCCCC">know</font><font color="#E5E5E5"> however</font><font color="#CCCCCC"> many thousands of</font><font color="#E5E5E5"> dollars</font>

629
00:27:56,260 --> 00:28:02,050
<font color="#CCCCCC">for you know a pet project that I've got</font>

630
00:27:58,930 --> 00:28:03,760
this<font color="#E5E5E5"> is the metric I use so it used to</font>

631
00:28:02,050 --> 00:28:05,800
<font color="#CCCCCC">be that you got two pieces of</font><font color="#E5E5E5"> dry white</font>

632
00:28:03,760 --> 00:28:09,129
toast and a cup of<font color="#E5E5E5"> coffee for you know a</font>

633
00:28:05,800 --> 00:28:11,139
quarter now that Jake<font color="#CCCCCC"> and Elwood blues</font>

634
00:28:09,130 --> 00:28:13,120
aren't with us anymore<font color="#CCCCCC"> we go to</font>

635
00:28:11,140 --> 00:28:14,860
Starbucks and<font color="#CCCCCC"> you get the mocha FRAP</font>

636
00:28:13,120 --> 00:28:16,120
<font color="#E5E5E5">elapid ding dong</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> you know before</font>

637
00:28:14,860 --> 00:28:19,090
<font color="#E5E5E5">you go pick it up they're like sir you</font>

638
00:28:16,120 --> 00:28:20,260
better<font color="#E5E5E5"> bend with</font><font color="#CCCCCC"> your knees all right so</font>

639
00:28:19,090 --> 00:28:21,970
<font color="#CCCCCC">coffee's</font><font color="#E5E5E5"> gotten a little bit more</font>

640
00:28:20,260 --> 00:28:24,090
expensive<font color="#E5E5E5"> and so you can make this</font>

641
00:28:21,970 --> 00:28:27,490
metric work for you

642
00:28:24,090 --> 00:28:30,100
<font color="#E5E5E5">yeah security appliance I'm a huge fan</font>

643
00:28:27,490 --> 00:28:32,950
of this<font color="#E5E5E5"> I've noted I've learned that</font><font color="#CCCCCC"> you</font>

644
00:28:30,100 --> 00:28:36,659
could slap the label security appliance

645
00:28:32,950 --> 00:28:36,660
and get anything through<font color="#CCCCCC"> change</font><font color="#E5E5E5"> control</font>

646
00:28:36,930 --> 00:28:43,290
<font color="#CCCCCC">okay now we get</font><font color="#E5E5E5"> to do live demos because</font>

647
00:28:40,450 --> 00:28:43,290
<font color="#E5E5E5">what could go wrong</font>

648
00:28:47,180 --> 00:28:59,760
that's not what I wanted okay<font color="#E5E5E5"> there we</font>

649
00:28:49,830 --> 00:29:04,830
<font color="#CCCCCC">go okay perfect so this</font><font color="#E5E5E5"> is top that's</font>

650
00:28:59,760 --> 00:29:08,370
running<font color="#E5E5E5"> and up here we've got to do to</font>

651
00:29:04,830 --> 00:29:10,649
<font color="#CCCCCC">do</font><font color="#E5E5E5"> okay so this</font><font color="#CCCCCC"> window down here is</font>

652
00:29:08,370 --> 00:29:12,330
running<font color="#CCCCCC"> a command</font><font color="#E5E5E5"> called</font><font color="#CCCCCC"> SAR</font><font color="#E5E5E5"> so every</font>

653
00:29:10,650 --> 00:29:14,250
<font color="#E5E5E5">two seconds it gives you your CPU</font>

654
00:29:12,330 --> 00:29:16,230
utilization<font color="#CCCCCC"> all you want to do is really</font>

655
00:29:14,250 --> 00:29:19,590
<font color="#E5E5E5">pay</font><font color="#CCCCCC"> attention to this idle column and</font>

656
00:29:16,230 --> 00:29:23,910
take a look at how idle<font color="#CCCCCC"> does the system</font>

657
00:29:19,590 --> 00:29:25,590
<font color="#CCCCCC">is this over here gives us our disk read</font>

658
00:29:23,910 --> 00:29:28,080
and write<font color="#E5E5E5"> speeds for</font><font color="#CCCCCC"> the seven different</font>

659
00:29:25,590 --> 00:29:29,520
<font color="#E5E5E5">drives that were querying and then we've</font>

660
00:29:28,080 --> 00:29:32,370
got<font color="#CCCCCC"> a</font><font color="#E5E5E5"> traditional top window in the</font>

661
00:29:29,520 --> 00:29:36,200
other corner<font color="#E5E5E5"> so the first example</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> I</font>

662
00:29:32,370 --> 00:29:42,560
<font color="#CCCCCC">will do is cross-referencing with the</font>

663
00:29:36,200 --> 00:29:47,520
<font color="#CCCCCC">bed</font><font color="#E5E5E5"> URLs list</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> is that list of</font><font color="#CCCCCC"> 2320</font>

664
00:29:42,560 --> 00:29:49,379
IP addresses and<font color="#E5E5E5"> URLs from our thread</font>

665
00:29:47,520 --> 00:29:51,690
Intel<font color="#E5E5E5"> group and this does this</font><font color="#CCCCCC"> is a</font>

666
00:29:49,380 --> 00:29:53,430
legit list<font color="#CCCCCC"> I pulled it</font><font color="#E5E5E5"> off</font><font color="#CCCCCC"> the internet</font>

667
00:29:51,690 --> 00:29:54,840
<font color="#CCCCCC">so if it's</font><font color="#E5E5E5"> on the internet</font><font color="#CCCCCC"> it's got to</font>

668
00:29:53,430 --> 00:29:57,330
be true right

669
00:29:54,840 --> 00:30:00,510
<font color="#E5E5E5">and you can see what I want to point out</font>

670
00:29:57,330 --> 00:30:02,669
<font color="#E5E5E5">over here we're running</font><font color="#CCCCCC"> 200 300</font>

671
00:30:00,510 --> 00:30:05,070
megabytes per second<font color="#E5E5E5"> off each of our</font>

672
00:30:02,670 --> 00:30:07,920
drives<font color="#E5E5E5"> if you look at top the thing</font>

673
00:30:05,070 --> 00:30:13,889
<font color="#E5E5E5">that's taking up our CPU time is grep so</font>

674
00:30:07,920 --> 00:30:15,540
the greps<font color="#E5E5E5"> so we our logs are stored on</font>

675
00:30:13,890 --> 00:30:18,690
disk compressed<font color="#E5E5E5"> they're compressed</font><font color="#CCCCCC"> with</font>

676
00:30:15,540 --> 00:30:22,590
the<font color="#CCCCCC"> lc4 algorithm and so that takes a</font>

677
00:30:18,690 --> 00:30:24,420
fair bit<font color="#CCCCCC"> of time</font><font color="#E5E5E5"> to unsafe</font><font color="#CCCCCC"> for</font><font color="#E5E5E5"> them</font><font color="#CCCCCC"> but</font>

678
00:30:22,590 --> 00:30:27,689
it<font color="#E5E5E5"> is still the grep that is the slower</font>

679
00:30:24,420 --> 00:30:29,760
part of our overall transaction<font color="#E5E5E5"> in other</font>

680
00:30:27,690 --> 00:30:32,040
words<font color="#E5E5E5"> even though they're compressed</font>

681
00:30:29,760 --> 00:30:34,560
<font color="#E5E5E5">that's not really slowing down our log</font>

682
00:30:32,040 --> 00:30:36,389
search that much<font color="#E5E5E5"> I will say the</font><font color="#CCCCCC"> reason I</font>

683
00:30:34,560 --> 00:30:38,760
had my fingers<font color="#CCCCCC"> crossed the first</font><font color="#E5E5E5"> time I</font>

684
00:30:36,390 --> 00:30:44,220
gave<font color="#CCCCCC"> this demo live</font><font color="#E5E5E5"> we tripped the</font>

685
00:30:38,760 --> 00:30:46,650
breaker<font color="#E5E5E5"> it's the this is not a power</font>

686
00:30:44,220 --> 00:30:48,090
efficient machine<font color="#CCCCCC"> I</font><font color="#E5E5E5"> still surprised I</font>

687
00:30:46,650 --> 00:30:49,100
got<font color="#E5E5E5"> it through the TSA but that's a</font>

688
00:30:48,090 --> 00:30:52,290
<font color="#E5E5E5">different story</font>

689
00:30:49,100 --> 00:30:54,480
so this should take about<font color="#CCCCCC"> two minutes</font><font color="#E5E5E5"> or</font>

690
00:30:52,290 --> 00:30:57,629
so to go<font color="#CCCCCC"> through and you</font><font color="#E5E5E5"> can see we're</font>

691
00:30:54,480 --> 00:30:59,250
<font color="#CCCCCC">already at 45</font><font color="#E5E5E5"> 50 percent idle and this</font>

692
00:30:57,630 --> 00:31:00,240
is what I<font color="#E5E5E5"> was</font><font color="#CCCCCC"> talking about if we split</font>

693
00:30:59,250 --> 00:31:02,670
<font color="#CCCCCC">up some of those</font>

694
00:31:00,240 --> 00:31:11,250
large input files<font color="#E5E5E5"> we're going to get our</font>

695
00:31:02,670 --> 00:31:12,660
<font color="#E5E5E5">times down even lower what else so now</font>

696
00:31:11,250 --> 00:31:16,230
we can see we're down to three graphs

697
00:31:12,660 --> 00:31:21,510
<font color="#E5E5E5">two graphs to LZ</font><font color="#CCCCCC"> fours</font><font color="#E5E5E5"> we should be</font>

698
00:31:16,230 --> 00:31:24,059
about done<font color="#CCCCCC"> here soon</font><font color="#E5E5E5"> did you</font><font color="#CCCCCC"> do</font><font color="#E5E5E5"> so</font>

699
00:31:21,510 --> 00:31:26,640
minute 41<font color="#E5E5E5"> and we've got</font><font color="#CCCCCC"> 92</font><font color="#E5E5E5"> hits on that</font>

700
00:31:24,059 --> 00:31:28,620
list<font color="#E5E5E5"> so in a</font><font color="#CCCCCC"> situation like</font><font color="#E5E5E5"> this these</font>

701
00:31:26,640 --> 00:31:30,420
would<font color="#E5E5E5"> be the 92 things that we'd start</font>

702
00:31:28,620 --> 00:31:33,000
<font color="#E5E5E5">to kick off some incident response</font>

703
00:31:30,420 --> 00:31:34,200
<font color="#E5E5E5">gather some additional</font><font color="#CCCCCC"> data from</font><font color="#E5E5E5"> bro and</font>

704
00:31:33,000 --> 00:31:37,500
start to figure<font color="#E5E5E5"> out what was really</font>

705
00:31:34,200 --> 00:31:41,160
<font color="#CCCCCC">going on so the next example I want</font><font color="#E5E5E5"> to</font>

706
00:31:37,500 --> 00:31:43,260
do is just searching<font color="#CCCCCC"> for a website</font><font color="#E5E5E5"> or</font>

707
00:31:41,160 --> 00:31:45,179
two in particular<font color="#E5E5E5"> so what would</font><font color="#CCCCCC"> be a</font>

708
00:31:43,260 --> 00:31:51,260
good<font color="#CCCCCC"> website to search for in Augusta</font>

709
00:31:45,179 --> 00:31:53,580
<font color="#CCCCCC">Georgia that's two Georgia peaches calm</font>

710
00:31:51,260 --> 00:31:55,830
I've no idea if<font color="#E5E5E5"> that's a real thing</font>

711
00:31:53,580 --> 00:31:58,649
this should take about<font color="#E5E5E5"> 45 seconds and</font>

712
00:31:55,830 --> 00:32:01,290
here what we can<font color="#E5E5E5"> see</font><font color="#CCCCCC"> is we've got much</font>

713
00:31:58,650 --> 00:32:04,800
higher<font color="#E5E5E5"> disk i/o rates</font>

714
00:32:01,290 --> 00:32:06,990
<font color="#CCCCCC">I saw 500 megabytes per second up there</font>

715
00:32:04,800 --> 00:32:09,090
<font color="#E5E5E5">before and we see that the grep is</font>

716
00:32:06,990 --> 00:32:10,800
<font color="#CCCCCC">taking</font><font color="#E5E5E5"> inconsequential amount of time</font>

717
00:32:09,090 --> 00:32:12,629
the CPU<font color="#E5E5E5"> is spending all</font><font color="#CCCCCC"> of its</font><font color="#E5E5E5"> time</font>

718
00:32:10,800 --> 00:32:17,340
doing that decompression with the<font color="#E5E5E5"> lz4</font>

719
00:32:12,630 --> 00:32:20,250
algorithm so in this case<font color="#E5E5E5"> that you know</font>

720
00:32:17,340 --> 00:32:22,860
compression is causing a large amount of

721
00:32:20,250 --> 00:32:27,030
overhead<font color="#E5E5E5"> but at the same time we're not</font>

722
00:32:22,860 --> 00:32:29,370
<font color="#CCCCCC">hitting the disk got hard so these will</font>

723
00:32:27,030 --> 00:32:31,559
do about<font color="#CCCCCC"> two gigabytes per second apiece</font>

724
00:32:29,370 --> 00:32:34,379
so we've theoretically got a bunch of

725
00:32:31,559 --> 00:32:36,750
overhead here where we could pull data

726
00:32:34,380 --> 00:32:38,610
off<font color="#CCCCCC"> the disk faster</font><font color="#E5E5E5"> so what this tells</font>

727
00:32:36,750 --> 00:32:41,760
me is<font color="#CCCCCC"> that it's time for me to</font><font color="#E5E5E5"> justify</font>

728
00:32:38,610 --> 00:32:43,800
buying a faster CPU all I've to do is

729
00:32:41,760 --> 00:32:46,620
convince my wife<font color="#CCCCCC"> or that so yeah 45</font>

730
00:32:43,800 --> 00:32:52,480
seconds and apparently<font color="#CCCCCC"> Owens</font><font color="#E5E5E5"> going</font><font color="#CCCCCC"> to</font>

731
00:32:46,620 --> 00:32:55,539
the Georgia Peach Escom website<font color="#CCCCCC"> okay</font>

732
00:32:52,480 --> 00:32:55,539
[Music]

733
00:32:59,040 --> 00:33:04,850
please

734
00:33:00,680 --> 00:33:05,310
there we go okay<font color="#E5E5E5"> so skip</font><font color="#CCCCCC"> the recorded</font>

735
00:33:04,850 --> 00:33:07,330
<font color="#E5E5E5">demo</font>

736
00:33:05,310 --> 00:33:10,580
[Music]

737
00:33:07,330 --> 00:33:14,419
told you I dropped<font color="#CCCCCC"> two to lasagna</font><font color="#E5E5E5"> this</font>

738
00:33:10,580 --> 00:33:20,120
is my cat<font color="#CCCCCC"> Kaylee</font><font color="#E5E5E5"> again</font><font color="#CCCCCC"> before and after</font>

739
00:33:14,420 --> 00:33:22,010
being<font color="#CCCCCC"> shaved so squishy cat</font><font color="#E5E5E5"> again I'm</font>

740
00:33:20,120 --> 00:33:23,179
terrible at naming things<font color="#E5E5E5"> I make no</font>

741
00:33:22,010 --> 00:33:26,240
apologies for it

742
00:33:23,180 --> 00:33:29,480
HR let me name my team the security

743
00:33:26,240 --> 00:33:31,250
analysis<font color="#CCCCCC"> Center and when my consultants</font>

744
00:33:29,480 --> 00:33:33,740
figured out what the acronym spelled out

745
00:33:31,250 --> 00:33:36,350
it was own good time so anyway

746
00:33:33,740 --> 00:33:38,510
squishy cat takes data that's compressed

747
00:33:36,350 --> 00:33:41,209
with one of those<font color="#E5E5E5"> four algorithms or is</font>

748
00:33:38,510 --> 00:33:42,860
totally uncompressed data figures out

749
00:33:41,210 --> 00:33:45,320
how<font color="#CCCCCC"> its compressed and dumps it to</font>

750
00:33:42,860 --> 00:33:48,439
<font color="#E5E5E5">standard out just the same</font><font color="#CCCCCC"> way cat does</font>

751
00:33:45,320 --> 00:33:51,230
only it transparently handles the

752
00:33:48,440 --> 00:33:53,870
decompression<font color="#E5E5E5"> so this came about</font>

753
00:33:51,230 --> 00:33:56,150
<font color="#E5E5E5">basically as I was running these various</font>

754
00:33:53,870 --> 00:33:58,639
grips<font color="#CCCCCC"> I would try and remember</font><font color="#E5E5E5"> if I was</font>

755
00:33:56,150 --> 00:34:01,490
working<font color="#CCCCCC"> with</font><font color="#E5E5E5"> gzip data and is that Z cat</font>

756
00:33:58,640 --> 00:34:03,170
or<font color="#CCCCCC"> gz cat or lz4 cat</font><font color="#E5E5E5"> or what like I</font>

757
00:34:01,490 --> 00:34:05,270
<font color="#CCCCCC">don't</font><font color="#E5E5E5"> have the mental bandwidth for this</font>

758
00:34:03,170 --> 00:34:08,060
so I wrote this<font color="#CCCCCC"> little script</font><font color="#E5E5E5"> again it's</font>

759
00:34:05,270 --> 00:34:11,600
on the<font color="#CCCCCC"> github it's pretty simple kind</font><font color="#E5E5E5"> of</font>

760
00:34:08,060 --> 00:34:14,449
script<font color="#E5E5E5"> so what we do</font><font color="#CCCCCC"> here is</font><font color="#E5E5E5"> I've</font><font color="#CCCCCC"> got</font>

761
00:34:11,600 --> 00:34:16,668
the same data set compressed with I've

762
00:34:14,449 --> 00:34:19,219
got it in plain text<font color="#CCCCCC"> which is</font><font color="#E5E5E5"> the top</font>

763
00:34:16,668 --> 00:34:23,389
line<font color="#CCCCCC"> the B zip to the gzip the lz4 in</font>

764
00:34:19,219 --> 00:34:26,658
the<font color="#CCCCCC"> XC and we run each of those through</font>

765
00:34:23,389 --> 00:34:31,158
<font color="#E5E5E5">squishy cat we get the same sha-1 some I</font>

766
00:34:26,659 --> 00:34:33,020
did you shot one for<font color="#E5E5E5"> that yes so that is</font>

767
00:34:31,159 --> 00:34:38,169
we know<font color="#CCCCCC"> that</font><font color="#E5E5E5"> we get the same output</font><font color="#CCCCCC"> so</font>

768
00:34:33,020 --> 00:34:38,168
totally good it works<font color="#E5E5E5"> yay happy fun</font>

769
00:34:38,830 --> 00:34:45,399
some of you guys<font color="#E5E5E5"> maybe not everyone</font><font color="#CCCCCC"> I</font>

770
00:34:42,668 --> 00:34:46,750
don't<font color="#E5E5E5"> need a show hands may be sitting</font>

771
00:34:45,399 --> 00:34:50,580
there<font color="#CCCCCC"> thinking this is cool and all</font><font color="#E5E5E5"> but</font>

772
00:34:46,750 --> 00:34:54,600
<font color="#E5E5E5">there's no way I could do this at</font><font color="#CCCCCC"> home</font>

773
00:34:50,580 --> 00:34:58,690
<font color="#E5E5E5">maybe again don't need a show of hands</font>

774
00:34:54,600 --> 00:35:01,330
<font color="#CCCCCC">so one of</font><font color="#E5E5E5"> the pieces of feedback I got</font>

775
00:34:58,690 --> 00:35:03,550
was<font color="#CCCCCC"> that mark</font><font color="#E5E5E5"> not everyone could do this</font>

776
00:35:01,330 --> 00:35:05,470
I'm like but the commands the right

777
00:35:03,550 --> 00:35:08,920
there you<font color="#CCCCCC"> can do this it's no big deal</font>

778
00:35:05,470 --> 00:35:10,740
mark not everyone can<font color="#E5E5E5"> do</font><font color="#CCCCCC"> this ok ok</font><font color="#E5E5E5"> so</font>

779
00:35:08,920 --> 00:35:15,220
grep wide was born

780
00:35:10,740 --> 00:35:17,979
grep<font color="#CCCCCC"> wide is really really simple</font><font color="#E5E5E5"> takes</font>

781
00:35:15,220 --> 00:35:21,250
<font color="#E5E5E5">one input file stick a file in your home</font>

782
00:35:17,980 --> 00:35:23,230
directory called look for me you put in

783
00:35:21,250 --> 00:35:25,990
look for<font color="#E5E5E5"> me the things</font><font color="#CCCCCC"> that you're</font>

784
00:35:23,230 --> 00:35:29,500
searching for<font color="#E5E5E5"> one item</font><font color="#CCCCCC"> per line no blank</font>

785
00:35:25,990 --> 00:35:31,060
lines at the<font color="#CCCCCC"> bottom you</font><font color="#E5E5E5"> see</font><font color="#CCCCCC"> D</font><font color="#E5E5E5"> or</font><font color="#CCCCCC"> two</font>

786
00:35:29,500 --> 00:35:35,440
your directory containing your<font color="#E5E5E5"> log files</font>

787
00:35:31,060 --> 00:35:37,060
<font color="#CCCCCC">and</font><font color="#E5E5E5"> you run grep wide it spiders down</font>

788
00:35:35,440 --> 00:35:40,300
throughout the<font color="#E5E5E5"> file system it will</font>

789
00:35:37,060 --> 00:35:43,360
<font color="#E5E5E5">follow</font><font color="#CCCCCC"> symlinks and finds all your data</font>

790
00:35:40,300 --> 00:35:45,730
files<font color="#E5E5E5"> in that subdirectory</font><font color="#CCCCCC"> and then it</font>

791
00:35:43,360 --> 00:35:48,040
searches through<font color="#CCCCCC"> them for the terms that</font>

792
00:35:45,730 --> 00:35:52,240
<font color="#CCCCCC">are in look for me and it saves</font><font color="#E5E5E5"> the</font>

793
00:35:48,040 --> 00:35:56,710
output to a file called<font color="#E5E5E5"> out file in your</font>

794
00:35:52,240 --> 00:36:00,310
home directory<font color="#E5E5E5"> who thinks they could run</font>

795
00:35:56,710 --> 00:36:04,720
something<font color="#E5E5E5"> called grep wide that's pretty</font>

796
00:36:00,310 --> 00:36:09,070
simple<font color="#CCCCCC"> ok what I really want you to do</font>

797
00:36:04,720 --> 00:36:12,250
is inspired<font color="#CCCCCC"> I want you to download grep</font>

798
00:36:09,070 --> 00:36:14,530
wide from my github<font color="#CCCCCC"> and be like dude</font>

799
00:36:12,250 --> 00:36:17,500
this is simple<font color="#E5E5E5"> I don't need to use this</font>

800
00:36:14,530 --> 00:36:20,830
<font color="#E5E5E5">so use it</font><font color="#CCCCCC"> the first time</font><font color="#E5E5E5"> start to learn</font>

801
00:36:17,500 --> 00:36:24,940
these techniques<font color="#E5E5E5"> modify grep wide maybe</font>

802
00:36:20,830 --> 00:36:26,860
submit a thing to github<font color="#E5E5E5"> and we can make</font>

803
00:36:24,940 --> 00:36:30,360
it<font color="#E5E5E5"> better or maybe just go and</font><font color="#CCCCCC"> do your</font>

804
00:36:26,860 --> 00:36:34,960
<font color="#E5E5E5">own</font><font color="#CCCCCC"> thing these techniques</font><font color="#E5E5E5"> may be</font>

805
00:36:30,360 --> 00:36:37,510
intimidating<font color="#E5E5E5"> may may may but they're</font>

806
00:36:34,960 --> 00:36:39,430
<font color="#CCCCCC">really not that</font><font color="#E5E5E5"> hard</font><font color="#CCCCCC"> once</font><font color="#E5E5E5"> you do it a</font>

807
00:36:37,510 --> 00:36:42,460
<font color="#E5E5E5">couple times</font><font color="#CCCCCC"> it'll start to make sense</font>

808
00:36:39,430 --> 00:36:43,810
<font color="#E5E5E5">and it's a great way</font><font color="#CCCCCC"> to justify</font><font color="#E5E5E5"> your to</font>

809
00:36:42,460 --> 00:36:48,430
<font color="#E5E5E5">your boss buying a really killer</font>

810
00:36:43,810 --> 00:36:51,340
workstation so<font color="#CCCCCC"> I</font><font color="#E5E5E5"> noticed I've got more</font>

811
00:36:48,430 --> 00:36:52,990
time here than<font color="#CCCCCC"> I expected</font><font color="#E5E5E5"> so I'm gonna</font>

812
00:36:51,340 --> 00:36:54,190
you<font color="#E5E5E5"> guys</font><font color="#CCCCCC"> are going to</font><font color="#E5E5E5"> get some bonus</font>

813
00:36:52,990 --> 00:36:56,680
material

814
00:36:54,190 --> 00:36:58,630
but first<font color="#CCCCCC"> the Linux command line from no</font>

815
00:36:56,680 --> 00:37:01,359
starch press<font color="#E5E5E5"> I'm not plugging no starch</font>

816
00:36:58,630 --> 00:37:03,850
<font color="#CCCCCC">press because they're a sponsor but they</font>

817
00:37:01,360 --> 00:37:07,270
produce some excellent work<font color="#CCCCCC"> and some</font>

818
00:37:03,850 --> 00:37:09,790
<font color="#E5E5E5">things by Chris Sanders so that sorry I</font>

819
00:37:07,270 --> 00:37:11,880
couldn't<font color="#E5E5E5"> resist the Linux command line</font>

820
00:37:09,790 --> 00:37:14,110
is a great book<font color="#E5E5E5"> it's worth</font><font color="#CCCCCC"> checking out</font>

821
00:37:11,880 --> 00:37:16,810
<font color="#E5E5E5">there's some other great stuff from them</font>

822
00:37:14,110 --> 00:37:19,090
<font color="#E5E5E5">Chris's book is again useful for this</font>

823
00:37:16,810 --> 00:37:21,850
Linux<font color="#E5E5E5"> in a nutshell and</font><font color="#CCCCCC"> Unix in a</font>

824
00:37:19,090 --> 00:37:23,710
nutshell<font color="#CCCCCC"> are incredible</font><font color="#E5E5E5"> resources</font><font color="#CCCCCC"> if</font>

825
00:37:21,850 --> 00:37:26,920
you're<font color="#E5E5E5"> not familiar with them and what's</font>

826
00:37:23,710 --> 00:37:29,470
<font color="#E5E5E5">great is</font><font color="#CCCCCC"> that Amazon sells used books</font><font color="#E5E5E5"> so</font>

827
00:37:26,920 --> 00:37:30,730
<font color="#E5E5E5">you can get a old copy of Unix in a</font>

828
00:37:29,470 --> 00:37:34,509
nutshell or Linux in a<font color="#E5E5E5"> nutshell</font>

829
00:37:30,730 --> 00:37:37,900
delivered<font color="#E5E5E5"> to your house they bring it</font><font color="#CCCCCC"> to</font>

830
00:37:34,510 --> 00:37:39,760
you for<font color="#E5E5E5"> like</font><font color="#CCCCCC"> 6 or 8 bucks and so maybe</font>

831
00:37:37,900 --> 00:37:42,280
you<font color="#E5E5E5"> don't have the</font><font color="#CCCCCC"> latest edition maybe</font>

832
00:37:39,760 --> 00:37:45,040
it's a little<font color="#CCCCCC"> bit older UNIX hasn't</font>

833
00:37:42,280 --> 00:37:46,870
really changed in 20 or<font color="#CCCCCC"> 30</font><font color="#E5E5E5"> years so if</font>

834
00:37:45,040 --> 00:37:49,000
you've<font color="#E5E5E5"> got the copy that's 12 years</font><font color="#CCCCCC"> old</font>

835
00:37:46,870 --> 00:37:54,040
rather than<font color="#E5E5E5"> 11</font><font color="#CCCCCC"> years old</font><font color="#E5E5E5"> you're good to</font>

836
00:37:49,000 --> 00:37:57,160
go<font color="#E5E5E5"> and plug for Humble Bundle if you</font>

837
00:37:54,040 --> 00:37:59,020
can't say<font color="#E5E5E5"> it still go there they produce</font>

838
00:37:57,160 --> 00:38:00,730
book bundles they have no starch<font color="#CCCCCC"> press</font>

839
00:37:59,020 --> 00:38:02,740
bundles they have a<font color="#E5E5E5"> Reilly bundles they</font>

840
00:38:00,730 --> 00:38:04,300
change like every week or two so you've

841
00:38:02,740 --> 00:38:06,819
got to sign up for<font color="#CCCCCC"> the mailing list</font><font color="#E5E5E5"> and</font>

842
00:38:04,300 --> 00:38:09,310
<font color="#E5E5E5">keep up to</font><font color="#CCCCCC"> date</font><font color="#E5E5E5"> to figure it out and</font>

843
00:38:06,820 --> 00:38:11,470
<font color="#E5E5E5">they've got awesome</font><font color="#CCCCCC"> awesome stuff so I'm</font>

844
00:38:09,310 --> 00:38:13,390
contractually obligated at this point to

845
00:38:11,470 --> 00:38:15,399
ask for questions<font color="#E5E5E5"> so if anyone has any</font>

846
00:38:13,390 --> 00:38:17,440
<font color="#CCCCCC">questions please try</font><font color="#E5E5E5"> and keep it</font>

847
00:38:15,400 --> 00:38:19,710
relevant<font color="#E5E5E5"> to the material I do know a</font>

848
00:38:17,440 --> 00:38:27,700
<font color="#E5E5E5">little bit</font><font color="#CCCCCC"> about biology but</font><font color="#E5E5E5"> not much so</font>

849
00:38:19,710 --> 00:38:31,480
questions yeah I will not be<font color="#E5E5E5"> covering</font>

850
00:38:27,700 --> 00:38:34,290
how to fold a fitted sheet<font color="#E5E5E5"> next question</font>

851
00:38:31,480 --> 00:38:34,290
yeah

852
00:38:40,530 --> 00:38:47,860
so the question is<font color="#CCCCCC"> about using</font><font color="#E5E5E5"> GPUs GPUs</font>

853
00:38:44,350 --> 00:38:49,990
are awesome for parallelization<font color="#CCCCCC"> there</font>

854
00:38:47,860 --> 00:38:54,850
are libraries<font color="#E5E5E5"> out there to help you</font>

855
00:38:49,990 --> 00:38:57,310
program<font color="#E5E5E5"> the GPUs pretty easily</font><font color="#CCCCCC"> I did not</font>

856
00:38:54,850 --> 00:38:59,770
want to<font color="#E5E5E5"> get into writing C code</font><font color="#CCCCCC"> so I</font>

857
00:38:57,310 --> 00:39:01,900
think there's probably<font color="#E5E5E5"> some areas to be</font>

858
00:38:59,770 --> 00:39:06,780
explored there but I didn't<font color="#E5E5E5"> really go</font>

859
00:39:01,900 --> 00:39:06,780
<font color="#CCCCCC">into it yeah</font>

860
00:39:07,410 --> 00:39:10,710
one more time

861
00:39:11,410 --> 00:39:16,420
<font color="#E5E5E5">yep there should have been plenty</font><font color="#CCCCCC"> of</font>

862
00:39:13,780 --> 00:39:22,530
examples<font color="#E5E5E5"> using parallel as well as X</font>

863
00:39:16,420 --> 00:39:25,090
args you what<font color="#CCCCCC"> oh</font><font color="#E5E5E5"> okay yeah yeah</font><font color="#CCCCCC"> yes so</font>

864
00:39:22,530 --> 00:39:28,350
<font color="#CCCCCC">check out the slides it's all there and</font>

865
00:39:25,090 --> 00:39:28,350
yeah<font color="#E5E5E5"> parallels awesome</font>

866
00:39:29,970 --> 00:39:39,700
the link yes yeah github.com slash<font color="#CCCCCC"> mark</font>

867
00:39:35,710 --> 00:39:45,000
<font color="#CCCCCC">JX and then the project is called search</font>

868
00:39:39,700 --> 00:39:45,000
2018<font color="#CCCCCC"> and</font><font color="#E5E5E5"> then from there there's the PDF</font>

869
00:39:48,610 --> 00:39:57,150
yes<font color="#E5E5E5"> March IX 0 1 is my Twitter account</font>

870
00:39:51,190 --> 00:39:57,150
<font color="#CCCCCC">Mark J X is the github account Oh</font>

871
00:40:02,280 --> 00:40:07,600
<font color="#CCCCCC">go me yep yeah apparently the footer is</font>

872
00:40:05,530 --> 00:40:12,580
<font color="#CCCCCC">hung on</font><font color="#E5E5E5"> each and every slide that's</font>

873
00:40:07,600 --> 00:40:14,049
awesome awesome<font color="#CCCCCC"> yes ok</font><font color="#E5E5E5"> thank</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> for</font>

874
00:40:12,580 --> 00:40:19,690
pointing that out sorry I missed it when

875
00:40:14,050 --> 00:40:22,300
you first<font color="#CCCCCC"> mentioned it</font><font color="#E5E5E5"> what else do I</font>

876
00:40:19,690 --> 00:40:24,400
have time left<font color="#CCCCCC"> 5</font>

877
00:40:22,300 --> 00:40:30,220
<font color="#E5E5E5">oh ok so we got time drop some bonus</font>

878
00:40:24,400 --> 00:40:33,750
material<font color="#CCCCCC"> oh so I</font><font color="#E5E5E5"> don't have I'm Way over</font>

879
00:40:30,220 --> 00:40:39,629
them<font color="#CCCCCC"> okay</font><font color="#E5E5E5"> I'm good</font>

880
00:40:33,750 --> 00:40:50,830
<font color="#CCCCCC">ok one</font><font color="#E5E5E5"> more question</font><font color="#CCCCCC"> he says</font><font color="#E5E5E5"> nothing</font>

881
00:40:39,630 --> 00:40:59,170
<font color="#CCCCCC">quick plug oh yeah go ahead</font><font color="#E5E5E5"> github calm</font>

882
00:40:50,830 --> 00:41:01,630
<font color="#CCCCCC">Mark IX search 2018 what's it the blue</font>

883
00:40:59,170 --> 00:41:03,790
one here is<font color="#E5E5E5"> the correct link apparently</font>

884
00:41:01,630 --> 00:41:06,460
the<font color="#CCCCCC"> mark jxo</font><font color="#E5E5E5"> one is incorrect</font>

885
00:41:03,790 --> 00:41:09,190
<font color="#CCCCCC">yeah yeah mark jxl one</font><font color="#E5E5E5"> it's my Twitter</font>

886
00:41:06,460 --> 00:41:14,980
account feel free to follow me<font color="#E5E5E5"> there</font>

887
00:41:09,190 --> 00:41:16,290
yeah<font color="#CCCCCC"> ok anything else okay thank you</font>

888
00:41:14,980 --> 00:41:21,030
<font color="#CCCCCC">very much</font>

889
00:41:16,290 --> 00:41:21,029
[Applause]

