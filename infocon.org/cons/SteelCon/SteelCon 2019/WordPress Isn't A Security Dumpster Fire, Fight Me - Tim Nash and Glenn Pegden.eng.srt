1
00:00:02,940 --> 00:00:11,340
ready to go all right it's very kind of

2
00:00:09,030 --> 00:00:16,350
you to you know organize a meeting in a

3
00:00:11,340 --> 00:00:19,140
giant auditorium yeah well you know kind

4
00:00:16,350 --> 00:00:22,280
of hard meeting rooms are fine but can

5
00:00:19,140 --> 00:00:33,059
we want it just to talk about this so

6
00:00:22,280 --> 00:00:35,489
yeah let's get Gary on the phone hi guys

7
00:00:33,059 --> 00:00:39,409
I can hear you but I can't see you can

8
00:00:35,489 --> 00:00:39,409
you hear me yes okay cool

9
00:00:40,219 --> 00:00:43,499
the reason I've called this meeting is

10
00:00:42,359 --> 00:00:45,210
we really need a new website for

11
00:00:43,499 --> 00:00:47,219
marketing promotion so that we can

12
00:00:45,210 --> 00:00:49,019
update easily ourselves I've contacted

13
00:00:47,219 --> 00:00:50,850
the media agency we usually use and they

14
00:00:49,019 --> 00:00:52,079
want to host it on WordPress are you

15
00:00:50,850 --> 00:00:57,389
both okay with that from a security

16
00:00:52,079 --> 00:00:59,609
perspective yes oh I don't understand

17
00:00:57,389 --> 00:01:02,699
are you saying WordPress is not secure

18
00:00:59,609 --> 00:01:06,500
hi Gary its Tim from security

19
00:01:02,699 --> 00:01:09,450
WordPress is a totally reasonable choice

20
00:01:06,500 --> 00:01:12,570
well you know me I'm Glen working

21
00:01:09,450 --> 00:01:14,270
security as well for more folks on the

22
00:01:12,570 --> 00:01:17,190
on the offensive side of stuff nowadays

23
00:01:14,270 --> 00:01:18,000
you must be joking but whatever Tim is

24
00:01:17,190 --> 00:01:20,490
saying really

25
00:01:18,000 --> 00:01:22,130
it's WordPress this is this is not going

26
00:01:20,490 --> 00:01:27,449
to end well

27
00:01:22,130 --> 00:01:30,119
yes no which is in look WordPress powers

28
00:01:27,450 --> 00:01:32,010
over they sent of the web some of the

29
00:01:30,120 --> 00:01:36,420
biggest fantasy web sites out there use

30
00:01:32,010 --> 00:01:38,490
it like white house yes I know they have

31
00:01:36,420 --> 00:01:43,020
their own security problems mainly from

32
00:01:38,490 --> 00:01:44,820
the inside but also IBM the Sun pretty

33
00:01:43,020 --> 00:01:47,390
much you name a big site these days it's

34
00:01:44,820 --> 00:01:50,729
almost certainly running WordPress

35
00:01:47,390 --> 00:01:53,100
Vera's from my site we've stopped as an

36
00:01:50,730 --> 00:01:55,020
industry even talking about WordPress

37
00:01:53,100 --> 00:01:56,669
beats that breeches anymore but not even

38
00:01:55,020 --> 00:01:57,450
skateboarding dog stories at the end of

39
00:01:56,670 --> 00:02:00,090
the news anymore

40
00:01:57,450 --> 00:02:03,600
WordPress breaches are just such a daily

41
00:02:00,090 --> 00:02:05,010
occurrence that it's you're insane to

42
00:02:03,600 --> 00:02:07,679
even start around it's the entire

43
00:02:05,010 --> 00:02:13,710
WordPress ecosystem is pure insanity

44
00:02:07,680 --> 00:02:14,400
whatever Tim's saying really no okay you

45
00:02:13,710 --> 00:02:16,050
can't do this

46
00:02:14,400 --> 00:02:16,800
Garrick this whole point is that you

47
00:02:16,050 --> 00:02:18,060
know being

48
00:02:16,800 --> 00:02:20,250
backwards and forwards and we're just

49
00:02:18,060 --> 00:02:22,680
gonna break out character and glenys

50
00:02:20,250 --> 00:02:27,300
here to be a foil and to ultimately fail

51
00:02:22,680 --> 00:02:30,600
miserably like everything but he's gonna

52
00:02:27,300 --> 00:02:33,330
be using old old tropes and old myths

53
00:02:30,600 --> 00:02:35,790
that really frustrate people he's gonna

54
00:02:33,330 --> 00:02:38,190
be saying things like WordPress is

55
00:02:35,790 --> 00:02:41,040
insecure principally because he used it

56
00:02:38,190 --> 00:02:42,990
how many years ago yeah six or seven six

57
00:02:41,040 --> 00:02:44,340
or seven years ago that's good because I

58
00:02:42,990 --> 00:02:46,080
reckon the majority of people in the

59
00:02:44,340 --> 00:02:47,550
room if you've been using if you use

60
00:02:46,080 --> 00:02:49,140
WordPress you probably haven't used it

61
00:02:47,550 --> 00:02:50,460
in the last few years especially those

62
00:02:49,140 --> 00:02:52,649
of you who have decided that WordPress

63
00:02:50,460 --> 00:02:54,750
is inherently insecure but do you

64
00:02:52,650 --> 00:02:56,520
remember it from the dark old days and

65
00:02:54,750 --> 00:02:59,130
you remember you hear statements like

66
00:02:56,520 --> 00:03:01,890
WordPress isn't secure PHP is insecure

67
00:02:59,130 --> 00:03:03,900
and the reason you hear people saying

68
00:03:01,890 --> 00:03:07,589
theories and skill I have a theory

69
00:03:03,900 --> 00:03:10,710
my theory is very simple you wrote check

70
00:03:07,590 --> 00:03:14,460
code ten years ago in PHP and now you

71
00:03:10,710 --> 00:03:17,010
think PHP is insecure make sense to them

72
00:03:14,460 --> 00:03:20,420
we're now in a world where PHP is a

73
00:03:17,010 --> 00:03:23,760
decent modern language and WordPress has

74
00:03:20,420 --> 00:03:25,410
slowly but surely getting there we don't

75
00:03:23,760 --> 00:03:27,299
need to be worrying about old tropes and

76
00:03:25,410 --> 00:03:29,970
just running around team will present a

77
00:03:27,300 --> 00:03:31,650
gap and if you kind of sit downs now

78
00:03:29,970 --> 00:03:32,940
breaking the fourth wall now you don't

79
00:03:31,650 --> 00:03:34,800
have to be a meeting these people on

80
00:03:32,940 --> 00:03:38,489
here oh yeah site so ignore us

81
00:03:34,800 --> 00:03:41,400
right so Gary just to give you an idea

82
00:03:38,489 --> 00:03:43,890
of how bad this is just in a second I'll

83
00:03:41,400 --> 00:03:45,420
scream share my screen with you you did

84
00:03:43,890 --> 00:03:47,880
know about touch to the computer I've

85
00:03:45,420 --> 00:03:49,410
got a clicker ah quite like take a

86
00:03:47,880 --> 00:03:53,910
clicker to a meeting I don't know what a

87
00:03:49,410 --> 00:03:55,470
clicker as an attacker firstly I want to

88
00:03:53,910 --> 00:03:57,000
do with a website is username

89
00:03:55,470 --> 00:03:57,870
enumeration I want to find out what

90
00:03:57,000 --> 00:04:00,510
users have got on there

91
00:03:57,870 --> 00:04:01,940
most modern CMS's make that really quite

92
00:04:00,510 --> 00:04:04,410
hard they go out of their way

93
00:04:01,940 --> 00:04:07,350
WordPress used to have some relatively

94
00:04:04,410 --> 00:04:08,970
accessible things more recently they've

95
00:04:07,350 --> 00:04:11,040
given you an endpoint they've literally

96
00:04:08,970 --> 00:04:13,410
given you a single data point that will

97
00:04:11,040 --> 00:04:15,000
enumerate all the users what's more if

98
00:04:13,410 --> 00:04:18,029
you look at nuts that's giant that's

99
00:04:15,000 --> 00:04:19,649
quite scary all that if they're using

100
00:04:18,029 --> 00:04:21,659
Gravatar which is obviously the default

101
00:04:19,649 --> 00:04:25,140
thing to do in advertising purpose about

102
00:04:21,660 --> 00:04:27,060
there is an md5 of the email address so

103
00:04:25,140 --> 00:04:30,229
if you know the email address you keep

104
00:04:27,060 --> 00:04:30,229
all the Gravatar details as well

105
00:04:30,810 --> 00:04:35,430
yeah this is not hard they are still

106
00:04:33,090 --> 00:04:37,260
making it very very easy as in a tacit

107
00:04:35,430 --> 00:04:39,480
weight I just want to check your

108
00:04:37,260 --> 00:04:42,419
argument for WordPress is based entirely

109
00:04:39,480 --> 00:04:44,910
on security by obscurity no I know I

110
00:04:42,419 --> 00:04:46,590
used to raise the bar none of the

111
00:04:44,910 --> 00:04:48,419
information on here is particularly

112
00:04:46,590 --> 00:04:50,580
sensitive I grant you the avid Gravatar

113
00:04:48,419 --> 00:04:52,049
one is a little dodgy on that but if

114
00:04:50,580 --> 00:04:53,880
we're saying that usernames are

115
00:04:52,050 --> 00:04:56,669
sensitive data then I think we've got

116
00:04:53,880 --> 00:05:00,150
really big problems ultimately this

117
00:04:56,669 --> 00:05:04,650
stuff yes I agree it's not ideal on the

118
00:05:00,150 --> 00:05:06,750
public interface hey guess what we can

119
00:05:04,650 --> 00:05:09,330
them we can change that quite easily

120
00:05:06,750 --> 00:05:12,419
there you go so that little bit one line

121
00:05:09,330 --> 00:05:14,940
of code and all of a sudden the rest api

122
00:05:12,419 --> 00:05:16,680
is only available for educated users you

123
00:05:14,940 --> 00:05:18,479
could disable the REST API altogether if

124
00:05:16,680 --> 00:05:20,910
you want you can disable XML RPC if you

125
00:05:18,479 --> 00:05:21,630
want but by setting it to authenticated

126
00:05:20,910 --> 00:05:22,770
users only

127
00:05:21,630 --> 00:05:25,169
you're still allowing stuff like

128
00:05:22,770 --> 00:05:28,710
Gutenberg which is their new shiny block

129
00:05:25,169 --> 00:05:31,049
editor to work it's not a problem okay

130
00:05:28,710 --> 00:05:33,890
but generally the whole rules when

131
00:05:31,050 --> 00:05:36,630
capabilities thing is just insane the

132
00:05:33,890 --> 00:05:38,030
the fact that what we've got what you

133
00:05:36,630 --> 00:05:41,909
can have set in the database doesn't

134
00:05:38,030 --> 00:05:45,479
necessarily follow what's actually yeah

135
00:05:41,910 --> 00:05:48,680
being set Gary if you still there keep

136
00:05:45,479 --> 00:05:51,719
again about Gary oh yeah I can I gotta

137
00:05:48,680 --> 00:05:55,080
take this as an example this is a great

138
00:05:51,720 --> 00:05:57,180
example persistence if we've got a user

139
00:05:55,080 --> 00:06:00,210
Tim's a a relatively normal user he's

140
00:05:57,180 --> 00:06:01,410
just an editor up there if once I've

141
00:06:00,210 --> 00:06:04,039
managed to get myself a char on this

142
00:06:01,410 --> 00:06:07,979
machine I can update that to make Tim an

143
00:06:04,039 --> 00:06:10,740
administrator using the magic of WP CLI

144
00:06:07,979 --> 00:06:13,020
which is so Timmons now now has the

145
00:06:10,740 --> 00:06:15,330
administrators wrong we look at Tim's

146
00:06:13,020 --> 00:06:16,889
and Ron's on there

147
00:06:15,330 --> 00:06:18,570
Timmy's probably editor another

148
00:06:16,889 --> 00:06:20,010
administrator do you know what that

149
00:06:18,570 --> 00:06:21,840
shows in the UI going do you know what

150
00:06:20,010 --> 00:06:24,539
when somebody comes along to check what

151
00:06:21,840 --> 00:06:27,210
what role Tim's got anyway it says an

152
00:06:24,539 --> 00:06:29,520
editor it doesn't mention administrator

153
00:06:27,210 --> 00:06:30,900
great way for hiding persistence when

154
00:06:29,520 --> 00:06:33,479
you take a box just do that to one of

155
00:06:30,900 --> 00:06:34,440
our low little level subscriber users

156
00:06:33,479 --> 00:06:36,090
and you've got yourself a nice

157
00:06:34,440 --> 00:06:41,310
administrator account nobody's going to

158
00:06:36,090 --> 00:06:42,020
spark it's a joke yeah you'd spot it

159
00:06:41,310 --> 00:06:43,529
there

160
00:06:42,020 --> 00:06:47,639
WP use

161
00:06:43,529 --> 00:06:52,379
get to a lot less to rolls but this is

162
00:06:47,639 --> 00:07:00,089
come on Liza this isn't the UI you're

163
00:06:52,379 --> 00:07:01,499
doing more typing I might yeah until we

164
00:07:00,089 --> 00:07:04,079
rehearse is really long we have

165
00:07:01,499 --> 00:07:06,689
capabilities similarly add an extra

166
00:07:04,079 --> 00:07:08,279
capability to a user so for example our

167
00:07:06,689 --> 00:07:11,309
nice editor user we're going to add the

168
00:07:08,279 --> 00:07:12,599
capability of had the options which

169
00:07:11,309 --> 00:07:15,809
allows us to come change all the

170
00:07:12,599 --> 00:07:20,569
WordPress configuration we're going to

171
00:07:15,809 --> 00:07:24,329
check that in a second knowing now what

172
00:07:20,569 --> 00:07:25,919
that capability once I did that's that's

173
00:07:24,329 --> 00:07:29,309
it that's there that doesn't show in the

174
00:07:25,919 --> 00:07:32,128
UI that that capability is not auditable

175
00:07:29,309 --> 00:07:34,259
through normal front-end options yeah I

176
00:07:32,129 --> 00:07:35,609
mean Gary this is true that you won't be

177
00:07:34,259 --> 00:07:37,919
able to see that in the normal admin

178
00:07:35,609 --> 00:07:40,258
interface but ultimately WordPress is

179
00:07:37,919 --> 00:07:42,299
new capability system is pretty

180
00:07:40,259 --> 00:07:44,069
straightforward

181
00:07:42,299 --> 00:07:46,739
the big computer most people it's the

182
00:07:44,069 --> 00:07:47,759
idea that a role is actually something

183
00:07:46,739 --> 00:07:50,638
that is important

184
00:07:47,759 --> 00:07:52,169
so whenever you've got a wordpress

185
00:07:50,639 --> 00:07:54,989
plugin it shouldn't be testing against

186
00:07:52,169 --> 00:07:56,878
the role equals administrator the roles

187
00:07:54,989 --> 00:07:58,948
are simply a collection of capabilities

188
00:07:56,879 --> 00:08:00,839
that are get applied to the user and you

189
00:07:58,949 --> 00:08:02,099
test the capability you don't test

190
00:08:00,839 --> 00:08:04,889
against the wrong

191
00:08:02,099 --> 00:08:07,378
so yeah in this scenario tim has now got

192
00:08:04,889 --> 00:08:09,029
the ability to edit options so that's

193
00:08:07,379 --> 00:08:10,259
the when if we were to test capability

194
00:08:09,029 --> 00:08:12,659
of the options then yes that would

195
00:08:10,259 --> 00:08:15,569
appear but it doesn't matter whether

196
00:08:12,659 --> 00:08:17,609
he's got a admin role or editor role or

197
00:08:15,569 --> 00:08:20,219
whatever and we can audit this stuff

198
00:08:17,609 --> 00:08:21,479
hello we're showing you how to on it the

199
00:08:20,219 --> 00:08:24,179
stuff on the screen is not exactly

200
00:08:21,479 --> 00:08:26,308
complicated dopey CLI is now a

201
00:08:24,179 --> 00:08:29,399
fundamental tool if you're working with

202
00:08:26,309 --> 00:08:30,749
WordPress if you've been every sort of

203
00:08:29,399 --> 00:08:31,499
going back in the past you probably use

204
00:08:30,749 --> 00:08:32,969
the admin interface

205
00:08:31,499 --> 00:08:34,889
it's full of collections and settings

206
00:08:32,969 --> 00:08:36,449
and bits and pieces with a PC like you

207
00:08:34,889 --> 00:08:39,269
can do anything that you can do in the

208
00:08:36,448 --> 00:08:41,068
admin interface class as we've just

209
00:08:39,269 --> 00:08:43,078
demonstrated a couple of things more you

210
00:08:41,068 --> 00:08:46,649
shouldn't necessarily be able to do like

211
00:08:43,078 --> 00:08:48,359
add multiple roles you can get don't you

212
00:08:46,649 --> 00:08:50,519
see light doesn't come by default we've

213
00:08:48,360 --> 00:08:52,679
WordPress but it is on pretty much every

214
00:08:50,519 --> 00:08:54,149
single sort of any hosting that says

215
00:08:52,679 --> 00:08:56,689
it's got the word work WordPress hosting

216
00:08:54,149 --> 00:08:57,890
will have Dave PTL I installed

217
00:08:56,690 --> 00:09:00,370
you install it on your own machine it

218
00:08:57,890 --> 00:09:04,880
uses PHP itself an interactive database

219
00:09:00,370 --> 00:09:06,770
you can also use set as VP to see Li to

220
00:09:04,880 --> 00:09:09,110
go to a different WordPress installed

221
00:09:06,770 --> 00:09:10,730
base so you can say hey I want to use

222
00:09:09,110 --> 00:09:12,890
these clean set of files over here

223
00:09:10,730 --> 00:09:14,330
because I think that my site might be

224
00:09:12,890 --> 00:09:16,699
hacked so I'm going to go and download a

225
00:09:14,330 --> 00:09:19,820
clean set of WordPress and I will use

226
00:09:16,700 --> 00:09:21,590
don't PCI's clean WordPress files plus

227
00:09:19,820 --> 00:09:23,060
to a PC Li to have a look at the

228
00:09:21,590 --> 00:09:25,340
database that is over on my other

229
00:09:23,060 --> 00:09:27,469
filesystem which means that we're in a

230
00:09:25,340 --> 00:09:30,650
much safer scenario if you haven't

231
00:09:27,470 --> 00:09:32,930
played with OPC I do because it's the

232
00:09:30,650 --> 00:09:37,189
only real way to use WordPress god I

233
00:09:32,930 --> 00:09:40,160
don't like using admin so but back to

234
00:09:37,190 --> 00:09:42,170
Gary Tibbits a fair point okay yep in

235
00:09:40,160 --> 00:09:44,390
this whole new dev ops II dev site cop

236
00:09:42,170 --> 00:09:45,829
so you sort of will - will - tools like

237
00:09:44,390 --> 00:09:47,210
that are great we can't build some nice

238
00:09:45,830 --> 00:09:49,280
pipelines of testing that sort of stuff

239
00:09:47,210 --> 00:09:52,220
I'll give you that but from an attackers

240
00:09:49,280 --> 00:09:54,079
point of view things like XML RPC great

241
00:09:52,220 --> 00:09:56,990
in the place of testing user creds work

242
00:09:54,080 --> 00:09:58,580
no rate-limiting is no log out so no

243
00:09:56,990 --> 00:10:00,080
account lockout so if we get it wrong I

244
00:09:58,580 --> 00:10:04,310
couldn't literally just scattergun

245
00:10:00,080 --> 00:10:06,890
credit that things like cool the tool

246
00:10:04,310 --> 00:10:08,180
that Robin wrote harvesting text off

247
00:10:06,890 --> 00:10:09,760
website so he's definitely not in the

248
00:10:08,180 --> 00:10:11,979
room you better not be in the room

249
00:10:09,760 --> 00:10:14,240
[Music]

250
00:10:11,980 --> 00:10:16,100
that's what I think for building the

251
00:10:14,240 --> 00:10:17,780
username password list again with a full

252
00:10:16,100 --> 00:10:20,270
mention ways of getting it makes it

253
00:10:17,780 --> 00:10:23,480
really easy the bar is still really

254
00:10:20,270 --> 00:10:24,980
really low things like WP scan in we

255
00:10:23,480 --> 00:10:26,480
have repenters that the BP scans treat

256
00:10:24,980 --> 00:10:28,640
there's a bit of a joke but it makes

257
00:10:26,480 --> 00:10:30,710
this thing really really easy it's a

258
00:10:28,640 --> 00:10:32,780
great entry level tool and it Stella

259
00:10:30,710 --> 00:10:34,610
finally easy for an obvious to use but

260
00:10:32,780 --> 00:10:37,100
that you can just pass it password list

261
00:10:34,610 --> 00:10:40,339
and because by default WordPress doesn't

262
00:10:37,100 --> 00:10:43,070
actually what any real limited on this

263
00:10:40,339 --> 00:10:45,140
it can go not it's it's just too easy

264
00:10:43,070 --> 00:10:47,480
gee I wonder how I'd have solved that

265
00:10:45,140 --> 00:10:50,510
problem maybe we could she like used

266
00:10:47,480 --> 00:10:51,650
tooling on servers and stuff I mean

267
00:10:50,510 --> 00:10:53,630
we've got things like failed to ban

268
00:10:51,650 --> 00:10:56,030
which we so we can send over our fails

269
00:10:53,630 --> 00:10:58,700
and about ban and then get it the ballot

270
00:10:56,030 --> 00:11:00,920
we could even do so exciting more fancy

271
00:10:58,700 --> 00:11:02,030
if you're looking at just blocking

272
00:11:00,920 --> 00:11:03,500
things straight out right without the

273
00:11:02,030 --> 00:11:05,209
ban you're probably doing it wrong and

274
00:11:03,500 --> 00:11:06,560
looking at things like targeting to make

275
00:11:05,210 --> 00:11:08,089
sure that you're just slowing down the

276
00:11:06,560 --> 00:11:10,699
attacks rather than you

277
00:11:08,089 --> 00:11:12,199
blocking them which is the other coming

278
00:11:10,699 --> 00:11:14,689
with the new IPs it's a lot easier just

279
00:11:12,199 --> 00:11:16,309
to tarp it and then you know that we've

280
00:11:14,689 --> 00:11:18,230
got the options to do things like alert

281
00:11:16,309 --> 00:11:19,600
as when think though logins of occurred

282
00:11:18,230 --> 00:11:22,639
don't do that

283
00:11:19,600 --> 00:11:24,319
70,000 emails later you cannot fun we

284
00:11:22,639 --> 00:11:26,480
can check for success logins that's a

285
00:11:24,319 --> 00:11:27,800
more sensible solution and then we can

286
00:11:26,480 --> 00:11:30,139
do things like limiting users

287
00:11:27,800 --> 00:11:32,508
capabilities what is in this stuff it's

288
00:11:30,139 --> 00:11:34,850
not hard making sure that people who are

289
00:11:32,509 --> 00:11:36,499
administrators who have random

290
00:11:34,850 --> 00:11:37,819
capabilities and we know who they are

291
00:11:36,499 --> 00:11:39,620
and that we regularly check their

292
00:11:37,819 --> 00:11:43,819
permissions this is not complicated

293
00:11:39,620 --> 00:11:47,899
stuff two-factor not a complicated thing

294
00:11:43,819 --> 00:11:50,479
to implement add two-factor add these

295
00:11:47,899 --> 00:11:52,449
and pass phrases or try and do some sort

296
00:11:50,480 --> 00:11:55,670
of encouragement of password managers

297
00:11:52,449 --> 00:12:00,378
drops of Gooden I don't see the problem

298
00:11:55,670 --> 00:12:02,449
here is it sound familiar though does it

299
00:12:00,379 --> 00:12:04,459
sound almost like the system how would

300
00:12:02,449 --> 00:12:07,008
we do it with only other web application

301
00:12:04,459 --> 00:12:09,589
on the planet you may have a point

302
00:12:07,009 --> 00:12:11,449
but elephant Naruto I get to break the

303
00:12:09,589 --> 00:12:14,839
fourth wall well hello although not

304
00:12:11,449 --> 00:12:18,229
because I can't even walk over that but

305
00:12:14,839 --> 00:12:20,600
no the Whooper system is in my eyes form

306
00:12:18,230 --> 00:12:23,420
insanity most of you will probably

307
00:12:20,600 --> 00:12:24,350
walked in here about securing WordPress

308
00:12:23,420 --> 00:12:26,089
they're just gonna say don't use

309
00:12:24,350 --> 00:12:27,410
third-party plugins that lost further

310
00:12:26,089 --> 00:12:28,999
patent plugins that would have been a

311
00:12:27,410 --> 00:12:33,259
great talk or it would have been about

312
00:12:28,999 --> 00:12:35,809
30 seconds long but the plug-in ease eco

313
00:12:33,259 --> 00:12:38,240
structure is just utterly insane on many

314
00:12:35,809 --> 00:12:40,759
levels the first of those the most

315
00:12:38,240 --> 00:12:43,220
common way that sort of your mom-and-pop

316
00:12:40,759 --> 00:12:45,829
shops will secure WordPress plugins is

317
00:12:43,220 --> 00:12:47,569
with the WordPress plug-in anyone that

318
00:12:45,829 --> 00:12:48,949
so any level of firewall design or just

319
00:12:47,569 --> 00:12:51,769
things a lot like next year doing

320
00:12:48,949 --> 00:12:54,199
application layer security at the

321
00:12:51,769 --> 00:12:57,220
application layer is not a great idea

322
00:12:54,199 --> 00:13:00,589
it's but the full thing is just

323
00:12:57,220 --> 00:13:03,410
terrifyingly ill-conceived in in my eyes

324
00:13:00,589 --> 00:13:04,279
not only that plugins great you know

325
00:13:03,410 --> 00:13:06,410
don't get me wrong

326
00:13:04,279 --> 00:13:09,170
plugins like word pets have their place

327
00:13:06,410 --> 00:13:10,939
to do some useful things but we'll press

328
00:13:09,170 --> 00:13:11,748
has a lovely little feature called am

329
00:13:10,939 --> 00:13:14,899
short in it

330
00:13:11,749 --> 00:13:16,450
sure in it I pay attention you just

331
00:13:14,899 --> 00:13:19,230
shortens your own

332
00:13:16,450 --> 00:13:22,590
[Music]

333
00:13:19,230 --> 00:13:23,790
the payflow time for website so if you

334
00:13:22,590 --> 00:13:25,110
want something with us at loads really

335
00:13:23,790 --> 00:13:26,910
really quick and doesn't need a lot of

336
00:13:25,110 --> 00:13:29,160
the work my framework behind it you can

337
00:13:26,910 --> 00:13:30,959
call short in it and it feels so really

338
00:13:29,160 --> 00:13:33,569
big one of the things sure and it does

339
00:13:30,960 --> 00:13:35,910
is it doesn't load plugins to make it

340
00:13:33,570 --> 00:13:38,610
fast which means if you're doing plugin

341
00:13:35,910 --> 00:13:40,350
protection at the plugin layer that it's

342
00:13:38,610 --> 00:13:41,970
all gone and you think they're playing

343
00:13:40,350 --> 00:13:43,590
you know that's just gonna want to use

344
00:13:41,970 --> 00:13:46,320
cases one or two people that want to do

345
00:13:43,590 --> 00:13:48,480
on standalone pages so I just did a

346
00:13:46,320 --> 00:13:51,060
little bit of googling where we're using

347
00:13:48,480 --> 00:13:54,510
shorten it we've got things up there

348
00:13:51,060 --> 00:13:56,640
why w3 total cache very very popular

349
00:13:54,510 --> 00:13:59,930
that's to member we know a little bit

350
00:13:56,640 --> 00:13:59,930
like SD remember though is amino and

351
00:14:00,950 --> 00:14:05,130
good example draft I mean these are

352
00:14:03,660 --> 00:14:07,560
popular things that are using shortening

353
00:14:05,130 --> 00:14:10,950
so if you're relying on things like word

354
00:14:07,560 --> 00:14:13,650
fence to actually you protection you're

355
00:14:10,950 --> 00:14:16,020
missing out on the trick all but in so

356
00:14:13,650 --> 00:14:17,490
many cases this stuff can be can be

357
00:14:16,020 --> 00:14:19,140
worked around I feel like this point we

358
00:14:17,490 --> 00:14:21,780
should say other corseted loving her

359
00:14:19,140 --> 00:14:23,370
available thick if they are well I

360
00:14:21,780 --> 00:14:26,670
should probably sit down because I keep

361
00:14:23,370 --> 00:14:28,830
nagging you for breaking the for so um

362
00:14:26,670 --> 00:14:29,459
how do we protect against this sort of

363
00:14:28,830 --> 00:14:32,070
stuff

364
00:14:29,460 --> 00:14:34,230
clearly you know we were sitting here

365
00:14:32,070 --> 00:14:36,270
going okay so maybe we'll post buggy was

366
00:14:34,230 --> 00:14:37,770
to secure WordPress is a bad idea though

367
00:14:36,270 --> 00:14:39,270
I've emphasized that a few minutes ago

368
00:14:37,770 --> 00:14:41,340
he was complaining the WordPress didn't

369
00:14:39,270 --> 00:14:43,380
do enough security now he's complaining

370
00:14:41,340 --> 00:14:46,020
that the stuff in the people are adding

371
00:14:43,380 --> 00:14:48,060
stuff to do security hey I've got this

372
00:14:46,020 --> 00:14:49,410
great idea you know how I had this idea

373
00:14:48,060 --> 00:14:49,920
before where we could like separate

374
00:14:49,410 --> 00:14:51,660
stuff

375
00:14:49,920 --> 00:14:53,910
well we could come up with this device

376
00:14:51,660 --> 00:14:56,160
we could it could be a hardware or

377
00:14:53,910 --> 00:14:58,829
software so either it could joke oh you

378
00:14:56,160 --> 00:15:01,350
knew your load balancer or just part of

379
00:14:58,830 --> 00:15:06,330
your and you know web server we could

380
00:15:01,350 --> 00:15:09,840
call it them a wash and we could load it

381
00:15:06,330 --> 00:15:13,770
with rules and that would solve that

382
00:15:09,840 --> 00:15:16,740
problem quietly okay I'll back you up

383
00:15:13,770 --> 00:15:17,880
but plugins in general and yeah plugins

384
00:15:16,740 --> 00:15:20,640
are a bit another pin the roommate

385
00:15:17,880 --> 00:15:24,780
because plug-ins for WordPress so many

386
00:15:20,640 --> 00:15:26,520
of them are utter utter trash I mean tip

387
00:15:24,780 --> 00:15:28,020
alluded to at the beginning we've all

388
00:15:26,520 --> 00:15:29,550
probably spent our time messing around

389
00:15:28,020 --> 00:15:30,360
when we were probably in lesser coders

390
00:15:29,550 --> 00:15:32,910
we've written a PHP

391
00:15:30,360 --> 00:15:34,800
BAM cooking probably a lot of them still

392
00:15:32,910 --> 00:15:36,120
up there on WP tour today people are

393
00:15:34,800 --> 00:15:37,709
probably still downloading them and

394
00:15:36,120 --> 00:15:40,440
using them not realizing that we know

395
00:15:37,710 --> 00:15:45,090
the trash but hey it fits their use case

396
00:15:40,440 --> 00:15:46,830
so and again themes as well I talk a lot

397
00:15:45,090 --> 00:15:48,840
about plugins but essentially in all the

398
00:15:46,830 --> 00:15:51,180
price of themes as well themes are just

399
00:15:48,840 --> 00:15:53,100
collections of plugins happen to play

400
00:15:51,180 --> 00:15:55,530
with the content as well anything a

401
00:15:53,100 --> 00:15:58,620
plug-in can do a theme can do on top of

402
00:15:55,530 --> 00:16:00,390
it so it's all all the the same problem

403
00:15:58,620 --> 00:16:04,110
to me and Gary if he's still there

404
00:16:00,390 --> 00:16:06,300
because we keep forgetting about Gary to

405
00:16:04,110 --> 00:16:09,240
give you an idea of how easy this is put

406
00:16:06,300 --> 00:16:11,910
together a little demo for you this is

407
00:16:09,240 --> 00:16:13,950
literally a very very common theme we're

408
00:16:11,910 --> 00:16:16,589
not going to use any tools no Metasploit

409
00:16:13,950 --> 00:16:18,990
nothing exploit db4 prepackaged frequent

410
00:16:16,590 --> 00:16:21,660
concept this is literally taking a

411
00:16:18,990 --> 00:16:23,760
wordpress will a wordpress website very

412
00:16:21,660 --> 00:16:26,100
much satellite tim would like user

413
00:16:23,760 --> 00:16:29,010
registrations turned off we've only got

414
00:16:26,100 --> 00:16:31,440
a couple of accounts on there there yeah

415
00:16:29,010 --> 00:16:32,970
well we haven't you've slowed me down

416
00:16:31,440 --> 00:16:35,070
logging in you've done all the things

417
00:16:32,970 --> 00:16:37,470
you've got so far and we're literally

418
00:16:35,070 --> 00:16:40,440
just going to play with the RL we're

419
00:16:37,470 --> 00:16:42,270
going to call a function within the the

420
00:16:40,440 --> 00:16:44,460
admin agent part of the backend that's

421
00:16:42,270 --> 00:16:48,329
going to turn on user registrations and

422
00:16:44,460 --> 00:16:52,530
certain default role to administrator

423
00:16:48,330 --> 00:17:02,160
look in our register we can register as

424
00:16:52,530 --> 00:17:03,540
us we have to go to our back-end because

425
00:17:02,160 --> 00:17:05,730
we set the people use a role to

426
00:17:03,540 --> 00:17:06,510
administrator we won't have a look we

427
00:17:05,730 --> 00:17:12,210
can look up there

428
00:17:06,510 --> 00:17:14,369
you push the page a second there we go

429
00:17:12,210 --> 00:17:17,490
anyone can register and go and look at

430
00:17:14,369 --> 00:17:19,439
our user Oh what Glenn administrator no

431
00:17:17,490 --> 00:17:22,349
clever hacks no nothing just a rubbish

432
00:17:19,440 --> 00:17:25,050
theme that really doesn't understand how

433
00:17:22,349 --> 00:17:27,839
to do any of this properly how could

434
00:17:25,050 --> 00:17:29,690
this not how can you condone this

435
00:17:27,839 --> 00:17:32,699
unacceptable

436
00:17:29,690 --> 00:17:37,200
okay this was a genuine theme and a

437
00:17:32,700 --> 00:17:39,450
genuine exploit so the theme itself have

438
00:17:37,200 --> 00:17:40,980
a bunch of code that they were thinking

439
00:17:39,450 --> 00:17:42,780
was just going to update the options

440
00:17:40,980 --> 00:17:45,900
that for the theme that we're still

441
00:17:42,780 --> 00:17:46,620
doing the dopey options table and it

442
00:17:45,900 --> 00:17:48,179
just happens

443
00:17:46,620 --> 00:17:49,709
they didn't even bother to check whether

444
00:17:48,179 --> 00:17:51,659
you were even logged in let alone doing

445
00:17:49,710 --> 00:17:53,220
any Sam size on the actual data itself

446
00:17:51,659 --> 00:17:54,779
it was literally for loop they said

447
00:17:53,220 --> 00:17:55,320
insert into this database here these

448
00:17:54,779 --> 00:17:58,200
data

449
00:17:55,320 --> 00:18:01,289
hence the X but here I have a simple

450
00:17:58,200 --> 00:18:04,409
solution to this don't do it that's

451
00:18:01,289 --> 00:18:06,390
that's not good code it wasn't good code

452
00:18:04,409 --> 00:18:08,130
ten years ago it wasn't good code

453
00:18:06,390 --> 00:18:11,730
yesterday it's still not going to be

454
00:18:08,130 --> 00:18:15,830
good code in the future and yes muffets

455
00:18:11,730 --> 00:18:18,090
exists and they do things like that but

456
00:18:15,830 --> 00:18:20,850
I'm getting there are a few people in

457
00:18:18,090 --> 00:18:24,209
the room who are both security people

458
00:18:20,850 --> 00:18:28,500
and developers if you are that person

459
00:18:24,210 --> 00:18:31,860
you've written that code it might not be

460
00:18:28,500 --> 00:18:34,289
the exact code but you have written that

461
00:18:31,860 --> 00:18:36,299
code and you didn't release it in

462
00:18:34,289 --> 00:18:37,770
WordPress you might have been a perl

463
00:18:36,299 --> 00:18:39,960
script in whatever another Python script

464
00:18:37,770 --> 00:18:42,929
being you've written that code we cannot

465
00:18:39,960 --> 00:18:46,320
condemn an entire application based on a

466
00:18:42,929 --> 00:18:48,000
theme badly written by somebody even if

467
00:18:46,320 --> 00:18:51,360
it did cause mass chaos and destruction

468
00:18:48,000 --> 00:18:53,059
of mankind so don't do this and audit

469
00:18:51,360 --> 00:18:55,199
your code and audit your other code

470
00:18:53,059 --> 00:18:57,690
everybody's going to be order - just

471
00:18:55,200 --> 00:19:00,600
like we would with any other vendor so

472
00:18:57,690 --> 00:19:02,190
talking of offenders and talking of Gary

473
00:19:00,600 --> 00:19:05,100
who's obviously engaged with our vendor

474
00:19:02,190 --> 00:19:07,169
right there ok let's go are we are we

475
00:19:05,100 --> 00:19:08,610
looking at some third party premium

476
00:19:07,169 --> 00:19:10,500
theme one of these off-the-shelf

477
00:19:08,610 --> 00:19:11,969
packages so they've given us two quotes

478
00:19:10,500 --> 00:19:13,169
one where they develop everything

479
00:19:11,970 --> 00:19:14,399
in-house and the other one where they

480
00:19:13,169 --> 00:19:16,220
use a premium theme from another

481
00:19:14,399 --> 00:19:18,320
supplier do we have any preference

482
00:19:16,220 --> 00:19:20,370
thanks guys

483
00:19:18,320 --> 00:19:24,059
Gary's just been possessed by Brian

484
00:19:20,370 --> 00:19:26,158
blessed that was terrifying so for those

485
00:19:24,059 --> 00:19:28,649
of you that were shocked by what Gary

486
00:19:26,159 --> 00:19:30,120
said not including those basically yes

487
00:19:28,649 --> 00:19:33,719
we've been given choices we can either

488
00:19:30,120 --> 00:19:37,860
do it in-house or we can get a third

489
00:19:33,720 --> 00:19:40,020
party into it if they're if the using

490
00:19:37,860 --> 00:19:41,939
third party premium themes I have a

491
00:19:40,020 --> 00:19:45,270
problem with that I am NOT a big fan of

492
00:19:41,940 --> 00:19:46,140
premium themes premium themes I'm not

493
00:19:45,270 --> 00:19:49,520
allowed to call them evil anymore

494
00:19:46,140 --> 00:19:49,520
premium themes are problematic

495
00:19:49,730 --> 00:19:53,340
premium themes for those who don't know

496
00:19:51,539 --> 00:19:55,440
again come back to my same book bear

497
00:19:53,340 --> 00:19:57,418
theme that just theme their collections

498
00:19:55,440 --> 00:19:59,159
of plugins that go with them and what

499
00:19:57,419 --> 00:20:00,030
happens is you get your nice premium

500
00:19:59,159 --> 00:20:02,400
theme it

501
00:20:00,030 --> 00:20:04,830
whole bunch of extra plugins they work

502
00:20:02,400 --> 00:20:07,590
great they're fantastic said plug-in

503
00:20:04,830 --> 00:20:10,050
gets gets owned so many fans a promise

504
00:20:07,590 --> 00:20:12,570
of point whole game developer fix is it

505
00:20:10,050 --> 00:20:14,370
quite quickly does that filter down

506
00:20:12,570 --> 00:20:16,500
through your premium plugins provider

507
00:20:14,370 --> 00:20:18,270
all the way down to your website or are

508
00:20:16,500 --> 00:20:21,390
several years later you still running

509
00:20:18,270 --> 00:20:23,550
that compromised version without

510
00:20:21,390 --> 00:20:25,500
unknowing because there's literally no

511
00:20:23,550 --> 00:20:27,149
downstream feed of this though and you

512
00:20:25,500 --> 00:20:28,230
think that's pretty unlikely guy it's a

513
00:20:27,150 --> 00:20:28,530
something major this isn't going to

514
00:20:28,230 --> 00:20:31,650
happen

515
00:20:28,530 --> 00:20:33,570
rev slider any of you've got a

516
00:20:31,650 --> 00:20:35,340
background request you know about Rev

517
00:20:33,570 --> 00:20:37,110
slider Rev slide there was ages for

518
00:20:35,340 --> 00:20:39,600
everywhere and the reason it was

519
00:20:37,110 --> 00:20:41,129
everywhere for ages wasn't the fact that

520
00:20:39,600 --> 00:20:42,510
ref slide was quite popular actually

521
00:20:41,130 --> 00:20:44,820
with more popper office it wasn't that

522
00:20:42,510 --> 00:20:46,860
popular course is quite expensive but a

523
00:20:44,820 --> 00:20:48,689
lot of premium themes had deals to

524
00:20:46,860 --> 00:20:50,909
include it which meant that even though

525
00:20:48,690 --> 00:20:53,190
Rev slider fixed the initial

526
00:20:50,910 --> 00:20:54,570
vulnerability and the next one and there

527
00:20:53,190 --> 00:20:57,690
were lot more like of that but they fix

528
00:20:54,570 --> 00:20:59,790
that quite quickly it didn't filter down

529
00:20:57,690 --> 00:21:02,400
there were still sites running outdated

530
00:20:59,790 --> 00:21:04,409
versions of Rev slider for for years and

531
00:21:02,400 --> 00:21:07,470
years ago and for those of you don't

532
00:21:04,410 --> 00:21:11,040
know about Rev slider now at this point

533
00:21:07,470 --> 00:21:12,660
another happenin explain this when we

534
00:21:11,040 --> 00:21:15,270
were planning this talk the other week

535
00:21:12,660 --> 00:21:19,290
we sort said hey great we can go and get

536
00:21:15,270 --> 00:21:20,820
new Sunday yeah I dunno something like

537
00:21:19,290 --> 00:21:22,680
no problem we'll go and get the

538
00:21:20,820 --> 00:21:24,570
WordPress attack framework and a copy of

539
00:21:22,680 --> 00:21:26,940
Rev slider will not demo this by

540
00:21:24,570 --> 00:21:29,669
ourselves if we create little working

541
00:21:26,940 --> 00:21:31,680
demo do you know how hard it is to find

542
00:21:29,670 --> 00:21:33,570
an old comp revised version of a

543
00:21:31,680 --> 00:21:35,130
commercial plugin these days we

544
00:21:33,570 --> 00:21:37,320
genuinely couldn't find a working

545
00:21:35,130 --> 00:21:38,430
version of Rev slider which considering

546
00:21:37,320 --> 00:21:40,379
Tim's background will come on to like

547
00:21:38,430 --> 00:21:43,260
this really surprising

548
00:21:40,380 --> 00:21:45,330
we did consider going out onto the

549
00:21:43,260 --> 00:21:47,520
internet and finding somebody that was

550
00:21:45,330 --> 00:21:49,949
still running a compromised version of

551
00:21:47,520 --> 00:21:51,260
Rev slider popping them and copying it

552
00:21:49,950 --> 00:21:54,210
off their server but we figured that

553
00:21:51,260 --> 00:21:56,010
probably wasn't really an acceptable

554
00:21:54,210 --> 00:21:58,890
thing to do or at least acknowledged on

555
00:21:56,010 --> 00:22:01,590
here we've done it so before I packed a

556
00:21:58,890 --> 00:22:04,230
little bit on on the would wordfence

557
00:22:01,590 --> 00:22:07,470
and we've actually stolen their video

558
00:22:04,230 --> 00:22:09,150
for doing it so sorry guys we plug-in

559
00:22:07,470 --> 00:22:10,800
level security does have a place

560
00:22:09,150 --> 00:22:13,770
combined with other things especially

561
00:22:10,800 --> 00:22:15,480
when it means that we can steal your own

562
00:22:13,770 --> 00:22:26,129
still your video but anyway this was how

563
00:22:15,480 --> 00:22:28,830
easy left side of the pot literally

564
00:22:26,130 --> 00:22:36,570
exploit up exploit DB give it a sights a

565
00:22:28,830 --> 00:22:39,059
rev slider wait

566
00:22:36,570 --> 00:22:41,280
literally long shelves it was that easy

567
00:22:39,059 --> 00:22:42,660
and this thing hung around the net and

568
00:22:41,280 --> 00:22:44,940
hung around the WordPress community

569
00:22:42,660 --> 00:22:46,800
three years this is one of the reasons

570
00:22:44,940 --> 00:22:49,559
that WordPress has got such a bad

571
00:22:46,800 --> 00:22:51,090
reputation this stuff didn't go away it

572
00:22:49,559 --> 00:22:52,800
wasn't a case that the vendor wasn't

573
00:22:51,090 --> 00:22:54,059
particularly quickly responding to fix

574
00:22:52,800 --> 00:22:56,100
it they did they were six back with me

575
00:22:54,059 --> 00:22:58,440
it was the fact the whole supply chain

576
00:22:56,100 --> 00:23:01,709
problem was in there it took months and

577
00:22:58,440 --> 00:23:05,640
months and even years for for that thing

578
00:23:01,710 --> 00:23:09,390
to go away and I'm I mean Gary he's

579
00:23:05,640 --> 00:23:12,900
right left slider was is a problem and

580
00:23:09,390 --> 00:23:14,190
the ecosystem itself is the biggest if I

581
00:23:12,900 --> 00:23:15,960
had to come and lift the things that we

582
00:23:14,190 --> 00:23:18,780
have issues with the ecosystem is

583
00:23:15,960 --> 00:23:21,360
ultimately it we have a mixture of

584
00:23:18,780 --> 00:23:23,129
premium plugins and sort of plugin from

585
00:23:21,360 --> 00:23:24,928
wordpress.org plug these from WordPress

586
00:23:23,130 --> 00:23:26,880
to all they do go through some sort of a

587
00:23:24,929 --> 00:23:28,080
security review it's very minimal but he

588
00:23:26,880 --> 00:23:30,600
does go through like a plugin in

589
00:23:28,080 --> 00:23:32,070
security review when they initially get

590
00:23:30,600 --> 00:23:34,129
put in there it doesn't necessarily mean

591
00:23:32,070 --> 00:23:36,960
that they kept always up to date

592
00:23:34,130 --> 00:23:40,800
but yeah premium anybody can write a

593
00:23:36,960 --> 00:23:42,210
plug-in that means that a guy from the

594
00:23:40,800 --> 00:23:45,809
local church can write the plugin

595
00:23:42,210 --> 00:23:48,210
through to a professional development

596
00:23:45,809 --> 00:23:50,010
team trust me I'd have the code off the

597
00:23:48,210 --> 00:23:51,390
guy from the church because he's going

598
00:23:50,010 --> 00:23:52,950
to be way more scared whereas the

599
00:23:51,390 --> 00:23:56,610
professional development team scale is

600
00:23:52,950 --> 00:23:57,929
going to be truly atrocious just say but

601
00:23:56,610 --> 00:24:00,139
we can say again we going back to though

602
00:23:57,929 --> 00:24:02,429
other than usual things we can audit it

603
00:24:00,140 --> 00:24:03,929
WP Scout which we mention right back at

604
00:24:02,429 --> 00:24:05,490
the beginning it's useful as an

605
00:24:03,929 --> 00:24:07,590
offensive tool it's useful defensively

606
00:24:05,490 --> 00:24:09,780
as well they actually also provide

607
00:24:07,590 --> 00:24:12,209
tooling when you to actually run on your

608
00:24:09,780 --> 00:24:14,879
server either as a WordPress plug-in or

609
00:24:12,210 --> 00:24:17,250
using Devi CLI to just give you a list

610
00:24:14,880 --> 00:24:18,750
of vulnerable plugins or you know there

611
00:24:17,250 --> 00:24:20,940
was probably a very easy way we can

612
00:24:18,750 --> 00:24:22,260
solve some of these problems well and I

613
00:24:20,940 --> 00:24:24,660
think we'll say that the gallery will

614
00:24:22,260 --> 00:24:26,080
come up with but yet auditing this stuff

615
00:24:24,660 --> 00:24:28,729
is important

616
00:24:26,080 --> 00:24:30,678
we're never the same don't know I think

617
00:24:28,729 --> 00:24:33,200
they don't lose rocks like that I think

618
00:24:30,679 --> 00:24:33,950
any carousel you slide everything just

619
00:24:33,200 --> 00:24:35,809
don't don't do it

620
00:24:33,950 --> 00:24:38,899
to be fair the whole aesthetic of what

621
00:24:35,809 --> 00:24:41,539
red slider build is so 2010 now anyway I

622
00:24:38,899 --> 00:24:42,949
have talked video now we have an

623
00:24:41,539 --> 00:24:44,869
in-house petite to be dev team they can

624
00:24:42,950 --> 00:24:46,609
test on a tip for us currently it's only

625
00:24:44,869 --> 00:24:53,119
a handful of files you shouldn't tell

626
00:24:46,609 --> 00:24:54,590
them too long I don't know how well that

627
00:24:53,119 --> 00:24:55,789
came out that site it was harvest

628
00:24:54,590 --> 00:24:58,849
efening is it well done here what Kelly

629
00:24:55,789 --> 00:25:00,408
was to speak to say yep it's all PHP we

630
00:24:58,849 --> 00:25:01,820
can audit it carefully Oh Gary I'm

631
00:25:00,409 --> 00:25:03,470
turning you down there's a really

632
00:25:01,820 --> 00:25:06,279
interesting assumption in there quick

633
00:25:03,470 --> 00:25:11,629
show of hands who who out there thinks

634
00:25:06,279 --> 00:25:14,629
WordPress is predominantly PHP very few

635
00:25:11,629 --> 00:25:16,369
hands these days and WordPress has

636
00:25:14,629 --> 00:25:18,918
actually got more JavaScript in it than

637
00:25:16,369 --> 00:25:23,389
it has PHP the ecosystem over the last

638
00:25:18,919 --> 00:25:25,940
few years has absolutely exploded it's

639
00:25:23,389 --> 00:25:29,529
an absolute can't use the word I'm

640
00:25:25,940 --> 00:25:34,549
looking for continually growing mess of

641
00:25:29,529 --> 00:25:38,269
cluster yeah they say whit was streaming

642
00:25:34,549 --> 00:25:40,668
live so hi mom I didn't say what but it

643
00:25:38,269 --> 00:25:44,690
really the dependency tree isn't utter

644
00:25:40,669 --> 00:25:45,859
utter mess but really so yesterday

645
00:25:44,690 --> 00:25:47,809
because we weren't putting these slides

646
00:25:45,859 --> 00:25:50,059
together yesterday at all we were trying

647
00:25:47,809 --> 00:25:51,739
to do a dependency tree of just all the

648
00:25:50,059 --> 00:25:53,269
stuff in WordPress I know we started

649
00:25:51,739 --> 00:25:56,450
with a piece of paper and then a piece

650
00:25:53,269 --> 00:25:58,909
of paper and it grew when we decided we

651
00:25:56,450 --> 00:26:01,190
just doesn't say and say look the attack

652
00:25:58,909 --> 00:26:03,349
surface now is monumentally massive

653
00:26:01,190 --> 00:26:06,200
WordPress just by default won't root

654
00:26:03,349 --> 00:26:07,070
loads so many NPM so many third-party

655
00:26:06,200 --> 00:26:08,960
libraries

656
00:26:07,070 --> 00:26:10,399
you've got jQuery know you've got react

657
00:26:08,960 --> 00:26:13,609
you've got five bolts until Tim told me

658
00:26:10,399 --> 00:26:14,959
I think even alt PI bond was it's it's

659
00:26:13,609 --> 00:26:17,029
not like the old days where it's a

660
00:26:14,960 --> 00:26:19,609
little CMS bit with a little bit of PHP

661
00:26:17,029 --> 00:26:22,220
it's now colossal and where you get

662
00:26:19,609 --> 00:26:24,439
colossal big complicating things you get

663
00:26:22,220 --> 00:26:30,679
ataxia is you get problems you say

664
00:26:24,440 --> 00:26:32,330
colossal I say whether it is you know to

665
00:26:30,679 --> 00:26:34,070
be honest this doesn't look very big you

666
00:26:32,330 --> 00:26:36,289
know we've just got nginx some sort of

667
00:26:34,070 --> 00:26:38,658
caching more nginx because we've gone

668
00:26:36,289 --> 00:26:39,320
out of our cache and PHP and probably

669
00:26:38,659 --> 00:26:42,140
talking to am ready

670
00:26:39,320 --> 00:26:44,149
so my memcache up here and we've got my

671
00:26:42,140 --> 00:26:47,150
sequel or my simplest database down

672
00:26:44,150 --> 00:26:49,850
there the PHP see on this we can track

673
00:26:47,150 --> 00:26:51,260
that very easily and a nice tree we were

674
00:26:49,850 --> 00:26:53,689
going to have beautiful diagrams but

675
00:26:51,260 --> 00:26:57,320
yeah it was going to get requires more

676
00:26:53,690 --> 00:27:00,770
brain power than we require got the row

677
00:26:57,320 --> 00:27:03,080
book yeah so no the PHP files that's

678
00:27:00,770 --> 00:27:05,389
absolutely fine actually the way PHP is

679
00:27:03,080 --> 00:27:08,720
included is very simple very easy for us

680
00:27:05,390 --> 00:27:11,380
to trace and it's fine for libraries

681
00:27:08,720 --> 00:27:14,000
because you know on the front end the

682
00:27:11,380 --> 00:27:15,440
what JavaScript gets loaded is very much

683
00:27:14,000 --> 00:27:17,840
determined by your front-end developers

684
00:27:15,440 --> 00:27:19,100
who are all amazing because we all know

685
00:27:17,840 --> 00:27:22,399
theme developers are amazing they are

686
00:27:19,100 --> 00:27:23,719
really I used to really have those at

687
00:27:22,400 --> 00:27:26,240
the theme developers and blame them for

688
00:27:23,720 --> 00:27:28,850
90% of security problems in WordPress

689
00:27:26,240 --> 00:27:31,190
and then I remembered that they have a

690
00:27:28,850 --> 00:27:33,860
really hard job they only in mind that

691
00:27:31,190 --> 00:27:36,890
most theme developers came to WordPress

692
00:27:33,860 --> 00:27:39,860
to make something look pretty and then

693
00:27:36,890 --> 00:27:43,160
we told them go learn all this PHP but

694
00:27:39,860 --> 00:27:50,030
and then we said okay now make that PHP

695
00:27:43,160 --> 00:27:55,460
secure home now learn JavaScript now it

696
00:27:50,030 --> 00:27:57,170
makes that secure walk away so theme

697
00:27:55,460 --> 00:28:00,440
developers have the hardest job in the

698
00:27:57,170 --> 00:28:02,510
WordPress ecosystem by far but on the

699
00:28:00,440 --> 00:28:06,170
front end that's fine they're probably

700
00:28:02,510 --> 00:28:09,500
using one framework in the WordPress

701
00:28:06,170 --> 00:28:13,760
admin area WordPress core itself uses

702
00:28:09,500 --> 00:28:15,170
jQuery react backbone mustache some

703
00:28:13,760 --> 00:28:16,879
other libraries that I didn't really

704
00:28:15,170 --> 00:28:18,680
remember the names of course they were

705
00:28:16,880 --> 00:28:22,150
all weird and end it with the word yes

706
00:28:18,680 --> 00:28:22,150
at the end so they can care about them

707
00:28:22,180 --> 00:28:28,220
and that's the core be for the plugins

708
00:28:26,510 --> 00:28:30,200
adding all of their stuff their own

709
00:28:28,220 --> 00:28:31,430
version of jQuery because they didn't

710
00:28:30,200 --> 00:28:35,540
like the version of jQuery that came

711
00:28:31,430 --> 00:28:36,800
with WordPress because because but they

712
00:28:35,540 --> 00:28:39,980
decided that they weren't going to use

713
00:28:36,800 --> 00:28:41,990
react they were going to use view meet

714
00:28:39,980 --> 00:28:44,630
because and then we gather

715
00:28:41,990 --> 00:28:47,000
ever-increasing problems how do we solve

716
00:28:44,630 --> 00:28:50,390
this cool if anybody doesn't know how to

717
00:28:47,000 --> 00:28:51,920
solve this come talk to me and turn your

718
00:28:50,390 --> 00:28:54,860
phone off

719
00:28:51,920 --> 00:28:56,120
very Norton but yet comes out to me but

720
00:28:54,860 --> 00:28:58,070
in the meantime we have to deal with

721
00:28:56,120 --> 00:29:00,080
this we are slowly but surely getting

722
00:28:58,070 --> 00:29:01,370
rid of stuff the wordpress interface

723
00:29:00,080 --> 00:29:03,409
itself with the introduction of

724
00:29:01,370 --> 00:29:05,300
Guttenberg which is as is this like it's

725
00:29:03,410 --> 00:29:07,700
Chinese dropping drag-and-drop editor

726
00:29:05,300 --> 00:29:09,379
but it's also like a global thing for

727
00:29:07,700 --> 00:29:12,260
changes to the admin interface in itself

728
00:29:09,380 --> 00:29:13,730
Gutenberg itself is going to become is

729
00:29:12,260 --> 00:29:16,760
well written and reacting and that's

730
00:29:13,730 --> 00:29:18,290
where we're going as a sort of see it

731
00:29:16,760 --> 00:29:19,820
there's a whole CMS is slowly making its

732
00:29:18,290 --> 00:29:22,879
way towards rep or in here's that way

733
00:29:19,820 --> 00:29:24,470
probably changed next week so that means

734
00:29:22,880 --> 00:29:25,880
we should slowly but surely lose the

735
00:29:24,470 --> 00:29:28,100
jQuery dependency which is good because

736
00:29:25,880 --> 00:29:29,690
it's massively out of state we will

737
00:29:28,100 --> 00:29:30,800
slowly lose the backbone dependency

738
00:29:29,690 --> 00:29:33,170
which I think it's only in there for the

739
00:29:30,800 --> 00:29:34,639
media library will slowly lose the other

740
00:29:33,170 --> 00:29:36,380
stuff and hopefully we'll move into this

741
00:29:34,640 --> 00:29:41,210
world that is purely react because that

742
00:29:36,380 --> 00:29:46,070
sounds so nice hmm till then enjoy their

743
00:29:41,210 --> 00:29:49,220
fact service so we've forgotten gallery

744
00:29:46,070 --> 00:29:50,540
again yeah I thought it was a really

745
00:29:49,220 --> 00:29:51,080
good idea that various you know what

746
00:29:50,540 --> 00:29:54,080
slowing us down

747
00:29:51,080 --> 00:29:55,699
yeah right okay point taken

748
00:29:54,080 --> 00:30:02,270
so you guys are the security guys what

749
00:29:55,700 --> 00:30:04,220
can you do to help I mean Gary so far

750
00:30:02,270 --> 00:30:06,050
we've been covering the real basic stuff

751
00:30:04,220 --> 00:30:08,900
there because there isn't normally

752
00:30:06,050 --> 00:30:12,970
anything complicated we are talking you

753
00:30:08,900 --> 00:30:15,560
know right down to have a lot

754
00:30:12,970 --> 00:30:18,740
make sure you can't hit those random end

755
00:30:15,560 --> 00:30:21,740
points what it your code choose your

756
00:30:18,740 --> 00:30:23,510
plugins wisely choose your theme like

757
00:30:21,740 --> 00:30:26,270
that so if I'm doing this in a very sort

758
00:30:23,510 --> 00:30:28,100
of sarcastic way is because this is

759
00:30:26,270 --> 00:30:33,470
stuff that I hope every single person in

760
00:30:28,100 --> 00:30:36,290
this room knows implement no moans about

761
00:30:33,470 --> 00:30:39,200
yeah but this is all the really basic

762
00:30:36,290 --> 00:30:41,210
stuff that we're covering what else can

763
00:30:39,200 --> 00:30:43,520
we do anything we do of a normal web app

764
00:30:41,210 --> 00:30:45,070
just because it's WordPress doesn't mean

765
00:30:43,520 --> 00:30:47,240
we don't do the more complicated stuff

766
00:30:45,070 --> 00:30:49,879
Scott's not in the room so you can you

767
00:30:47,240 --> 00:30:52,100
just say yes you could implement CSP

768
00:30:49,880 --> 00:30:54,500
headers that's nice and advanced and

769
00:30:52,100 --> 00:30:56,000
security I mean what could possibly go

770
00:30:54,500 --> 00:30:58,550
wrong

771
00:30:56,000 --> 00:31:00,200
if you want to be both he has CSP

772
00:30:58,550 --> 00:31:02,480
headers go find Scott he'll love to talk

773
00:31:00,200 --> 00:31:08,210
to you about that at length in detail

774
00:31:02,480 --> 00:31:10,520
and tell you some services from from the

775
00:31:08,210 --> 00:31:13,820
red side because we respected basses all

776
00:31:10,520 --> 00:31:16,250
along the key thing recon recon recon

777
00:31:13,820 --> 00:31:19,340
WordPress used to be about looking for

778
00:31:16,250 --> 00:31:20,120
the outdated plugins the outdated not

779
00:31:19,340 --> 00:31:22,550
updated shelf

780
00:31:20,120 --> 00:31:23,959
nowaday that ecosystem is so huge you're

781
00:31:22,550 --> 00:31:25,760
not looking for one chink in the armor

782
00:31:23,960 --> 00:31:27,710
you've got millions to go at you've got

783
00:31:25,760 --> 00:31:29,990
thousands you've got an entire sort of

784
00:31:27,710 --> 00:31:32,480
structure of stuff to go out now that

785
00:31:29,990 --> 00:31:34,160
it's a huge complicated piece to a web

786
00:31:32,480 --> 00:31:35,960
app you'll know some of your bounty

787
00:31:34,160 --> 00:31:38,000
hunters you're looking for those big

788
00:31:35,960 --> 00:31:38,840
complicated sites because the cracks of

789
00:31:38,000 --> 00:31:41,000
where things are joined together

790
00:31:38,840 --> 00:31:43,340
WordPress has now become that big

791
00:31:41,000 --> 00:31:44,810
complicated piece and that's what CSP

792
00:31:43,340 --> 00:31:47,030
headers how well do they work in the

793
00:31:44,810 --> 00:31:50,990
creepy admin same so with him they work

794
00:31:47,030 --> 00:31:56,420
well interview admins him sure I mean I

795
00:31:50,990 --> 00:31:58,480
mean unsafe in lines for scripts is fine

796
00:31:56,420 --> 00:32:03,200
[Laughter]

797
00:31:58,480 --> 00:32:04,100
yeah okay so remember this whole of not

798
00:32:03,200 --> 00:32:06,080
mm-hmm

799
00:32:04,100 --> 00:32:07,699
then we were talking about because of

800
00:32:06,080 --> 00:32:09,889
that that yes there is a lot of inline

801
00:32:07,700 --> 00:32:12,140
styling and lean line scripts in the

802
00:32:09,890 --> 00:32:13,730
admin area front-end is really easy to

803
00:32:12,140 --> 00:32:15,740
control because obviously we can just

804
00:32:13,730 --> 00:32:18,290
nag at the theme developer to actually

805
00:32:15,740 --> 00:32:20,720
fix stuff and build it in via the admin

806
00:32:18,290 --> 00:32:24,290
area isn't is a nightmare so if you were

807
00:32:20,720 --> 00:32:27,680
looking straight into a CSP for DB admin

808
00:32:24,290 --> 00:32:28,940
I'll I was part of a project that tried

809
00:32:27,680 --> 00:32:33,920
for about six weeks before abandoning

810
00:32:28,940 --> 00:32:35,810
all hope it will get better but then

811
00:32:33,920 --> 00:32:39,470
again how many sites I've seen you CSP

812
00:32:35,810 --> 00:32:45,950
headers it's a Scott I mean it might

813
00:32:39,470 --> 00:32:50,360
invade on that so if we can do all this

814
00:32:45,950 --> 00:32:53,690
are we safe yes safe yeah yeah super

815
00:32:50,360 --> 00:32:55,370
safe so Tim has come he's on the line

816
00:32:53,690 --> 00:32:56,570
I'm gonna put you on the spot are you

817
00:32:55,370 --> 00:32:58,520
going to tell me see what happens when

818
00:32:56,570 --> 00:33:00,530
you've got a really super complicated

819
00:32:58,520 --> 00:33:02,540
cell there's actually really well design

820
00:33:00,530 --> 00:33:03,830
that's rebuilding sites on the fly that

821
00:33:02,540 --> 00:33:06,950
there's all the things you're talking

822
00:33:03,830 --> 00:33:08,570
about what can go wrong Tim I love yeah

823
00:33:06,950 --> 00:33:11,150
yeah with the costume

824
00:33:08,570 --> 00:33:12,530
yeah absolutely register I mean once we

825
00:33:11,150 --> 00:33:14,600
started covering the basics we end up

826
00:33:12,530 --> 00:33:15,980
with idiot sort of things that were

827
00:33:14,600 --> 00:33:19,699
ultimately fall into the category of

828
00:33:15,980 --> 00:33:22,010
idiot configuration errors and that side

829
00:33:19,700 --> 00:33:23,750
of things and I'd give it one example

830
00:33:22,010 --> 00:33:26,870
let's say you're building a site using

831
00:33:23,750 --> 00:33:28,310
Jenkins to do your deployments behind

832
00:33:26,870 --> 00:33:32,060
the scenes you're running some commands

833
00:33:28,310 --> 00:33:33,379
with WP CLI and you're your attack has

834
00:33:32,060 --> 00:33:35,720
managed to actually get access to a

835
00:33:33,380 --> 00:33:37,340
shell on there so he does have some

836
00:33:35,720 --> 00:33:39,710
privileges enough to see that WordPress

837
00:33:37,340 --> 00:33:41,870
is playing a workers and knowing enough

838
00:33:39,710 --> 00:33:42,920
to see processes running on but actually

839
00:33:41,870 --> 00:33:44,870
somehow you've managed to lock your

840
00:33:42,920 --> 00:33:47,090
container that welcome you you are doing

841
00:33:44,870 --> 00:33:49,340
well unfortunately in our little tale of

842
00:33:47,090 --> 00:33:50,929
woe the attacker seems just enough to

843
00:33:49,340 --> 00:33:53,270
know that every so often he can see a

844
00:33:50,930 --> 00:33:57,640
process of running which looks to be

845
00:33:53,270 --> 00:34:01,850
running delete the chrome run and then a

846
00:33:57,640 --> 00:34:04,700
- happen all and then - - allow route

847
00:34:01,850 --> 00:34:06,949
and that process is running route

848
00:34:04,700 --> 00:34:10,970
because Jenkins is launching it and

849
00:34:06,950 --> 00:34:13,310
running it as route now okay now he can

850
00:34:10,969 --> 00:34:14,810
be out he can execute things in he can

851
00:34:13,310 --> 00:34:17,418
see that the there's a cron job running

852
00:34:14,810 --> 00:34:20,418
and that route is occasionally running

853
00:34:17,418 --> 00:34:23,540
WordPress as were running in WordPress

854
00:34:20,418 --> 00:34:25,429
patent so what does he do well being a

855
00:34:23,540 --> 00:34:27,949
smart aleck that he is all he needs to

856
00:34:25,429 --> 00:34:30,080
do is add a couple of lines and don't

857
00:34:27,949 --> 00:34:31,668
become big or he could have even been

858
00:34:30,080 --> 00:34:33,290
really smarter and just done he put a

859
00:34:31,668 --> 00:34:35,540
gamble file in and just required his

860
00:34:33,290 --> 00:34:38,630
file just make it nice and easy slightly

861
00:34:35,540 --> 00:34:41,570
more hidden so that he then runs his own

862
00:34:38,630 --> 00:34:44,450
script in that cron job which then opens

863
00:34:41,570 --> 00:34:47,900
up the web server which then opens up a

864
00:34:44,449 --> 00:34:50,899
socket which then turns off bad button

865
00:34:47,900 --> 00:34:53,750
back doors and then escalates to roots

866
00:34:50,900 --> 00:34:57,380
and then escalates out of the container

867
00:34:53,750 --> 00:35:00,710
causing havoc across hosts but I mean

868
00:34:57,380 --> 00:35:02,420
that's pretty rare it's pretty rare

869
00:35:00,710 --> 00:35:04,160
sorry I understood none of that is that

870
00:35:02,420 --> 00:35:05,780
going to be a problem for us yes Gary

871
00:35:04,160 --> 00:35:06,890
it's going to be a major problem for us

872
00:35:05,780 --> 00:35:13,040
because we're definitely going to do

873
00:35:06,890 --> 00:35:15,650
that game I mean do that but no it's not

874
00:35:13,040 --> 00:35:17,090
gonna be the problem yes you could build

875
00:35:15,650 --> 00:35:18,560
the most complicated system in the world

876
00:35:17,090 --> 00:35:22,130
and yes it will almost only get abused

877
00:35:18,560 --> 00:35:24,470
but the reality is 99.9

878
00:35:22,130 --> 00:35:27,229
nine nine nine nine nine percent our

879
00:35:24,470 --> 00:35:30,828
packs across the board are done from one

880
00:35:27,229 --> 00:35:36,919
simple attack vector stuff being out of

881
00:35:30,829 --> 00:35:40,630
date so how do we fix this I think a lot

882
00:35:36,920 --> 00:35:43,309
update keeping stuff up to date I mean I

883
00:35:40,630 --> 00:35:45,170
want to show off clever stuff I want to

884
00:35:43,309 --> 00:35:47,630
meet make you sit then here is some

885
00:35:45,170 --> 00:35:51,049
examples of how we do cunning hunting

886
00:35:47,630 --> 00:35:53,900
down of malware inside systems I want to

887
00:35:51,049 --> 00:35:56,960
do all the fun stuff but the reality is

888
00:35:53,900 --> 00:35:59,299
that my job is just keeping stuff up to

889
00:35:56,960 --> 00:36:01,400
date because if we keep stuff up to date

890
00:35:59,299 --> 00:36:03,680
and we keep an eye on rocks and what

891
00:36:01,400 --> 00:36:07,309
attacks it down out there what CDs

892
00:36:03,680 --> 00:36:08,779
popping on our screens then that's how

893
00:36:07,309 --> 00:36:10,759
we keep things secure we had all the

894
00:36:08,779 --> 00:36:12,769
other gates but yeah it's only time for

895
00:36:10,759 --> 00:36:14,210
a summary yeah I mean at that point we

896
00:36:12,769 --> 00:36:15,589
probably should have summarized with

897
00:36:14,210 --> 00:36:17,180
Gary deciding whether or not it was

898
00:36:15,589 --> 00:36:22,220
going to let our he's going to be where

899
00:36:17,180 --> 00:36:23,239
was it to go live we're gonna start that

900
00:36:22,220 --> 00:36:25,249
work we're gonna end with some

901
00:36:23,239 --> 00:36:26,989
introductions we tried to in connect we

902
00:36:25,249 --> 00:36:30,259
have no idea if that what that was gonna

903
00:36:26,989 --> 00:36:31,969
work we did spend the full day doing a

904
00:36:30,259 --> 00:36:33,710
traditional slide deck where they've got

905
00:36:31,969 --> 00:36:36,319
pretty much to the evening that decided

906
00:36:33,710 --> 00:36:40,940
throw it away figured we needed a third

907
00:36:36,319 --> 00:36:44,299
party in all this and we tried that the

908
00:36:40,940 --> 00:36:45,890
summary from me from my red side and who

909
00:36:44,299 --> 00:36:46,940
are you oh yeah I think we're gonna do

910
00:36:45,890 --> 00:36:49,249
some introductions what were the

911
00:36:46,940 --> 00:36:51,170
introductions at the end Who am I today

912
00:36:49,249 --> 00:36:52,939
I've been playing Glenn the pen tester

913
00:36:51,170 --> 00:36:54,920
in real life that's not me at all what

914
00:36:52,940 --> 00:36:57,650
an interesting more offensive side of

915
00:36:54,920 --> 00:37:00,140
stuff actually I City meetings like this

916
00:36:57,650 --> 00:37:01,430
most of the time Plains Tim draw I work

917
00:37:00,140 --> 00:37:05,180
at sky bear part of the runabout

918
00:37:01,430 --> 00:37:06,828
management team you've ever sat in a

919
00:37:05,180 --> 00:37:09,410
meeting with them where marketing person

920
00:37:06,829 --> 00:37:11,569
has actually come to you and said I'm

921
00:37:09,410 --> 00:37:13,868
going to do this what is the security

922
00:37:11,569 --> 00:37:19,940
implications you've been in that meeting

923
00:37:13,869 --> 00:37:22,489
yeah you're lying I like to do think we

924
00:37:19,940 --> 00:37:25,009
do things Ivan oh yeah really really

925
00:37:22,489 --> 00:37:26,329
that is kind of my side of things is we

926
00:37:25,009 --> 00:37:27,710
do do a lot of risk Assessors we do a

927
00:37:26,329 --> 00:37:29,140
lot have them team's through this sort

928
00:37:27,710 --> 00:37:31,910
of thing

929
00:37:29,140 --> 00:37:34,400
me and him work together many many years

930
00:37:31,910 --> 00:37:35,779
ago in WordPress we figured that it'd be

931
00:37:34,400 --> 00:37:38,240
kind of good to go on stage and do

932
00:37:35,780 --> 00:37:41,120
Tooting attack team thing like we used

933
00:37:38,240 --> 00:37:43,069
to do seem however has now moved on from

934
00:37:41,120 --> 00:37:45,710
those days of trying to write stuff I

935
00:37:43,070 --> 00:37:48,080
was trying to sell and is I am the

936
00:37:45,710 --> 00:37:49,520
WordPress platform leave the paper xpcom

937
00:37:48,080 --> 00:37:53,259
which has managed for WordPress host

938
00:37:49,520 --> 00:37:56,480
that means that I get to play in secured

939
00:37:53,260 --> 00:38:02,470
thousands upon thousands of web press

940
00:37:56,480 --> 00:38:02,470
websites I have this it's pinky isn't it

941
00:38:03,400 --> 00:38:08,900
because I get to do this day in day out

942
00:38:06,230 --> 00:38:13,880
but genuinely I actually do enjoy my job

943
00:38:08,900 --> 00:38:16,910
and it's because I do get to see the

944
00:38:13,880 --> 00:38:19,640
worst of the internet literally the

945
00:38:16,910 --> 00:38:22,640
worst of the internet but I also get to

946
00:38:19,640 --> 00:38:25,310
see how much stuff can be defended

947
00:38:22,640 --> 00:38:29,779
against with really both simple and

948
00:38:25,310 --> 00:38:31,340
basic stuff nothing in this talk is

949
00:38:29,780 --> 00:38:33,140
revolutionary and that's the frustrating

950
00:38:31,340 --> 00:38:38,240
thing when you come to our hacker

951
00:38:33,140 --> 00:38:42,740
conference you want to show up just like

952
00:38:38,240 --> 00:38:45,680
that in the jungle hey go okay yeah okay

953
00:38:42,740 --> 00:38:48,410
but that you want to show off you want

954
00:38:45,680 --> 00:38:50,600
to show the most amazing things but the

955
00:38:48,410 --> 00:38:55,640
vast majority of the time I don't feel

956
00:38:50,600 --> 00:38:58,690
amazing thing and I do boring everyday

957
00:38:55,640 --> 00:39:00,830
stuff that meth doesn't make great talks

958
00:38:58,690 --> 00:39:02,540
but then we realize that there are

959
00:39:00,830 --> 00:39:08,029
people in this room who probably still

960
00:39:02,540 --> 00:39:10,580
believe that WordPress is this horror

961
00:39:08,030 --> 00:39:14,600
story of a thing that's from like the

962
00:39:10,580 --> 00:39:15,980
1950s before the webbing listen but in

963
00:39:14,600 --> 00:39:18,440
some people's heads they will be there

964
00:39:15,980 --> 00:39:19,940
in that scenario and that this is this

965
00:39:18,440 --> 00:39:21,860
is literally being recently in someone's

966
00:39:19,940 --> 00:39:25,010
bedroom and that's you know it's all

967
00:39:21,860 --> 00:39:27,410
hell and it's got such a really bad

968
00:39:25,010 --> 00:39:28,520
reputation that I basically just wanted

969
00:39:27,410 --> 00:39:33,080
to come on stages go

970
00:39:28,520 --> 00:39:35,360
it's a CMS you treat it like a CMS it's

971
00:39:33,080 --> 00:39:37,790
a database with some stuff connecting to

972
00:39:35,360 --> 00:39:39,650
a database and if you don't know how to

973
00:39:37,790 --> 00:39:43,040
secure a database and a web application

974
00:39:39,650 --> 00:39:43,610
what are you doing here if that's your

975
00:39:43,040 --> 00:39:45,400
job

976
00:39:43,610 --> 00:39:48,170
just do it

977
00:39:45,400 --> 00:39:52,150
people in security our job is not to

978
00:39:48,170 --> 00:39:54,910
sesss airily say no our job is to say

979
00:39:52,150 --> 00:39:57,530
let's talk about this and do it safely

980
00:39:54,910 --> 00:40:00,560
let's start let's try and move that

981
00:39:57,530 --> 00:40:02,900
conversation forward and so I'm hoping

982
00:40:00,560 --> 00:40:06,950
that we at least inspire you to have

983
00:40:02,900 --> 00:40:08,780
another look that are too deeply you

984
00:40:06,950 --> 00:40:12,350
know what you could break everything but

985
00:40:08,780 --> 00:40:14,720
think about this again 33% of the

986
00:40:12,350 --> 00:40:16,880
weapons we said 13 of its perfectly

987
00:40:14,720 --> 00:40:20,450
presented the web uses WordPress and

988
00:40:16,880 --> 00:40:24,080
there are thousands of hacks every

989
00:40:20,450 --> 00:40:27,259
single day but if we start normalizing

990
00:40:24,080 --> 00:40:29,060
that and we look at just WordPress core

991
00:40:27,260 --> 00:40:31,550
we start building in our own custom

992
00:40:29,060 --> 00:40:33,590
plugins and themes it's actually not too

993
00:40:31,550 --> 00:40:36,230
bad of a place to work it's not too

994
00:40:33,590 --> 00:40:39,080
scary and coming back to where this

995
00:40:36,230 --> 00:40:41,240
short article this talk started at least

996
00:40:39,080 --> 00:40:42,560
PHP we need to melt the first time in

997
00:40:41,240 --> 00:40:44,540
years and start to talk about WordPress

998
00:40:42,560 --> 00:40:46,640
security we were particularly talking

999
00:40:44,540 --> 00:40:48,140
about WordPress in the enterprise if

1000
00:40:46,640 --> 00:40:48,650
you're looking with a wordpress as a

1001
00:40:48,140 --> 00:40:50,930
whole

1002
00:40:48,650 --> 00:40:52,610
yes there are still absolute horror

1003
00:40:50,930 --> 00:40:54,200
shows out there are still people in

1004
00:40:52,610 --> 00:40:54,940
Venezuela there are still people with

1005
00:40:54,200 --> 00:40:57,350
all updated

1006
00:40:54,940 --> 00:40:59,680
trashy plugins however we're

1007
00:40:57,350 --> 00:41:02,630
specifically talking about enterprise

1008
00:40:59,680 --> 00:41:05,060
can you make WordPress Enterprise ready

1009
00:41:02,630 --> 00:41:06,650
can you make it secure for proper

1010
00:41:05,060 --> 00:41:09,590
commercial assets in it in a way

1011
00:41:06,650 --> 00:41:11,270
absolutely yes you can and it pains me

1012
00:41:09,590 --> 00:41:13,010
to say can I do enjoy binding team up

1013
00:41:11,270 --> 00:41:16,460
about this you just say that again yeah

1014
00:41:13,010 --> 00:41:20,750
yeah nearly forgot PD audience can't say

1015
00:41:16,460 --> 00:41:21,860
those words I mean I do like why I can't

1016
00:41:20,750 --> 00:41:23,330
say those words but I will point out

1017
00:41:21,860 --> 00:41:25,850
that tim is often described as a

1018
00:41:23,330 --> 00:41:27,230
wordpress security expert and I do I

1019
00:41:25,850 --> 00:41:31,580
point out WordPress security is an

1020
00:41:27,230 --> 00:41:35,390
oxymoron but no if you're looking at a

1021
00:41:31,580 --> 00:41:38,029
specific instance of WordPress there is

1022
00:41:35,390 --> 00:41:40,790
you are setting up yourself for your

1023
00:41:38,030 --> 00:41:42,500
organization it can be done properly if

1024
00:41:40,790 --> 00:41:43,940
you're a great about black outlet just

1025
00:41:42,500 --> 00:41:46,220
want to own all the things of course

1026
00:41:43,940 --> 00:41:47,960
there are you know you will still be

1027
00:41:46,220 --> 00:41:49,459
tripping over the low-hanging fruit it

1028
00:41:47,960 --> 00:41:51,380
can be let's be clear

1029
00:41:49,460 --> 00:41:53,690
they literally frameworks designed

1030
00:41:51,380 --> 00:41:57,620
purely to attack WordPress yeah

1031
00:41:53,690 --> 00:42:00,920
but just put it back on over here that

1032
00:41:57,620 --> 00:42:03,589
we are all so if you ever think oh yes

1033
00:42:00,920 --> 00:42:05,270
well WordPress is special just go look

1034
00:42:03,590 --> 00:42:09,800
up at any other CMS and add the word

1035
00:42:05,270 --> 00:42:11,570
given to the Edit mesh it's not unique

1036
00:42:09,800 --> 00:42:14,450
occasionally having the odd security

1037
00:42:11,570 --> 00:42:17,420
problem you're saying so if you want

1038
00:42:14,450 --> 00:42:20,779
some actual summaries to this mine as a

1039
00:42:17,420 --> 00:42:23,750
pretend red teamer today we still have

1040
00:42:20,780 --> 00:42:27,050
slides sorry we don't have slides these

1041
00:42:23,750 --> 00:42:28,280
are slides this isn't a from a red

1042
00:42:27,050 --> 00:42:30,500
tie-red point of view

1043
00:42:28,280 --> 00:42:32,510
my advice is stop thinking of as

1044
00:42:30,500 --> 00:42:34,520
WordPress just think if there's a web

1045
00:42:32,510 --> 00:42:36,830
app all the same things you would if

1046
00:42:34,520 --> 00:42:39,020
there's a sort of a pen tester about one

1047
00:42:36,830 --> 00:42:40,370
two you're attacking just a generic web

1048
00:42:39,020 --> 00:42:42,680
app and go at it like that don't cause

1049
00:42:40,370 --> 00:42:44,359
WordPress if it's been settled by

1050
00:42:42,680 --> 00:42:46,940
grown-ups reason a commercial enterprise

1051
00:42:44,360 --> 00:42:48,470
just running WP scanning new Retina out

1052
00:42:46,940 --> 00:42:51,830
day plugins isn't going to get you very

1053
00:42:48,470 --> 00:42:53,180
far but looking at those integration

1054
00:42:51,830 --> 00:42:55,430
points looking at those weak edges

1055
00:42:53,180 --> 00:42:57,259
looking at that whole dependency tree of

1056
00:42:55,430 --> 00:42:59,240
stuff that's been loaded that nobody

1057
00:42:57,260 --> 00:43:03,500
will afford it that's where you're going

1058
00:42:59,240 --> 00:43:05,270
to find the chinks and well stop

1059
00:43:03,500 --> 00:43:07,280
thinking it as WordPress it's just

1060
00:43:05,270 --> 00:43:09,620
another web player when we start

1061
00:43:07,280 --> 00:43:12,800
thinking of it as WordPress that thing

1062
00:43:09,620 --> 00:43:15,319
is where we get problems when we decide

1063
00:43:12,800 --> 00:43:18,290
that WordPress is not suitable so we're

1064
00:43:15,320 --> 00:43:20,540
going to push it outside is when we get

1065
00:43:18,290 --> 00:43:24,140
problems because the marketing team

1066
00:43:20,540 --> 00:43:27,350
isn't going to not use WordPress they

1067
00:43:24,140 --> 00:43:29,450
are still going to do it just they'll go

1068
00:43:27,350 --> 00:43:32,330
use a third party house they'll go take

1069
00:43:29,450 --> 00:43:34,279
it outside of your network and that's

1070
00:43:32,330 --> 00:43:38,420
when they will start doing silly things

1071
00:43:34,280 --> 00:43:42,440
like using their email creds to set up

1072
00:43:38,420 --> 00:43:45,470
SMTP SMTP send out emails and have that

1073
00:43:42,440 --> 00:43:46,610
in plain text and stuff like that for

1074
00:43:45,470 --> 00:43:47,810
those of you that don't realize what

1075
00:43:46,610 --> 00:43:49,370
seems all you knew that well that was

1076
00:43:47,810 --> 00:43:54,400
essentially Panama's paper love hack

1077
00:43:49,370 --> 00:43:59,540
potentially yeah sorry yes potentially

1078
00:43:54,400 --> 00:44:01,880
so that's all stories it's really

1079
00:43:59,540 --> 00:44:03,259
shocking its enterprise stuff it's all

1080
00:44:01,880 --> 00:44:05,000
threat modeling it's all risk cost

1081
00:44:03,260 --> 00:44:07,600
analysis it's nothing special

1082
00:44:05,000 --> 00:44:11,920
the question isn't really WordPress

1083
00:44:07,600 --> 00:44:14,410
another web app sorry this was not what

1084
00:44:11,920 --> 00:44:17,200
you came to see you all wanted to see

1085
00:44:14,410 --> 00:44:19,000
something fun but I mean we'll come up

1086
00:44:17,200 --> 00:44:21,069
with some random examples for you and

1087
00:44:19,000 --> 00:44:24,700
the questions if you want which leads us

1088
00:44:21,070 --> 00:44:28,240
on to we did say come fight us we didn't

1089
00:44:24,700 --> 00:44:29,259
mean it obviously but Tim over the

1090
00:44:28,240 --> 00:44:32,500
course of writing this presentation

1091
00:44:29,260 --> 00:44:34,030
probably shouldn't have been as it

1092
00:44:32,500 --> 00:44:37,210
should have been has convinced me that

1093
00:44:34,030 --> 00:44:39,220
actually it probably is enterprise-ready

1094
00:44:37,210 --> 00:44:41,560
people say we brought you in here we

1095
00:44:39,220 --> 00:44:44,020
challenge you meathead fighters so any

1096
00:44:41,560 --> 00:44:46,540
questions either to say guys you're

1097
00:44:44,020 --> 00:44:47,920
still wrong or just in general please

1098
00:44:46,540 --> 00:44:50,020
know if it's going to be a 10 page essay

1099
00:44:47,920 --> 00:44:51,850
on how WordPress is insecure that's

1100
00:44:50,020 --> 00:44:53,890
great come find us later

1101
00:44:51,850 --> 00:44:55,810
just and quick questions please if you

1102
00:44:53,890 --> 00:44:57,580
want to talk about Tim's convoluted

1103
00:44:55,810 --> 00:45:00,250
Jenkins example grab him afterwards

1104
00:44:57,580 --> 00:45:01,750
there's a reason we went quite light and

1105
00:45:00,250 --> 00:45:04,590
low detail on that and I should point

1106
00:45:01,750 --> 00:45:07,270
out something to do in my employer so

1107
00:45:04,590 --> 00:45:11,620
but yeah so thank you we've been going

1108
00:45:07,270 --> 00:45:13,000
we've been saying any questions an arm

1109
00:45:11,620 --> 00:45:16,509
go up somewhere in the world where

1110
00:45:13,000 --> 00:45:17,380
you've hiked more waving that person he

1111
00:45:16,510 --> 00:45:19,990
looks nice

1112
00:45:17,380 --> 00:45:23,370
hang on I can't see him I've capable why

1113
00:45:19,990 --> 00:45:23,370
he doesn't learn nice got somebody else

1114
00:45:30,330 --> 00:45:40,080
first I'm just wondering if you had any

1115
00:45:34,570 --> 00:45:42,670
experience with picnic we we had a whole

1116
00:45:40,080 --> 00:45:46,480
section on pit bed and Glen when

1117
00:45:42,670 --> 00:45:49,780
nobody's gonna understand you know tip

1118
00:45:46,480 --> 00:45:52,240
dig is a theme company I want to call

1119
00:45:49,780 --> 00:45:54,190
them company picnic is a bunch of people

1120
00:45:52,240 --> 00:45:56,410
who wrote some themes and there are some

1121
00:45:54,190 --> 00:45:57,520
themes for WordPress and they wrote I

1122
00:45:56,410 --> 00:45:59,410
didn't even know you could get themes

1123
00:45:57,520 --> 00:45:59,920
for a blogspot but for bloggers and

1124
00:45:59,410 --> 00:46:03,640
blogspot

1125
00:45:59,920 --> 00:46:06,550
and turns out there were a bunch of oh

1126
00:46:03,640 --> 00:46:08,230
crap oh no I'm just like crap so guess

1127
00:46:06,550 --> 00:46:13,870
Fiji's out the window no bunch of

1128
00:46:08,230 --> 00:46:15,760
ourselves when we talk about the

1129
00:46:13,870 --> 00:46:18,700
poisoning the well and supply vendor

1130
00:46:15,760 --> 00:46:21,250
attacks we assume the vendor is not the

1131
00:46:18,700 --> 00:46:24,910
malicious bad guy

1132
00:46:21,250 --> 00:46:27,220
in peptic case they actually start

1133
00:46:24,910 --> 00:46:28,660
loading in JavaScript into their themes

1134
00:46:27,220 --> 00:46:32,669
which they then distributed to their

1135
00:46:28,660 --> 00:46:35,259
customers that attacked other sites

1136
00:46:32,670 --> 00:46:37,030
deliberately so they would slow down to

1137
00:46:35,260 --> 00:46:39,220
their marketing team could contact them

1138
00:46:37,030 --> 00:46:40,720
and say your website's running slow

1139
00:46:39,220 --> 00:46:45,250
why didn't you use our FEMA move to our

1140
00:46:40,720 --> 00:46:47,709
hosting that is a mere example of what

1141
00:46:45,250 --> 00:46:49,810
they could do they putting kill switches

1142
00:46:47,710 --> 00:46:53,640
into their themes that would wipe the

1143
00:46:49,810 --> 00:46:57,190
entire database and their response was

1144
00:46:53,640 --> 00:47:00,129
we did it for our customers and the

1145
00:46:57,190 --> 00:47:02,710
scary thing is that their customers tend

1146
00:47:00,130 --> 00:47:04,930
to meet were they very much at the

1147
00:47:02,710 --> 00:47:06,220
blogger market so non-professional

1148
00:47:04,930 --> 00:47:10,810
people if their themes were relatively

1149
00:47:06,220 --> 00:47:13,598
cheap and in a weird way they provided

1150
00:47:10,810 --> 00:47:14,470
excellent support to their customers you

1151
00:47:13,599 --> 00:47:15,910
know part for the bit where they were

1152
00:47:14,470 --> 00:47:19,598
abusing that using their customers to

1153
00:47:15,910 --> 00:47:24,629
DDoS people so the customers went oh no

1154
00:47:19,599 --> 00:47:24,630
they're really nice we don't believe you

1155
00:47:26,849 --> 00:47:33,609
they're really nice and they said they

1156
00:47:28,810 --> 00:47:37,089
didn't do it took an enormous amount of

1157
00:47:33,609 --> 00:47:38,589
effort to convince these people that the

1158
00:47:37,089 --> 00:47:41,080
thing that they had on their site was

1159
00:47:38,589 --> 00:47:44,380
bad and you know what they're just

1160
00:47:41,080 --> 00:47:47,140
restarting they'll do it somewhere else

1161
00:47:44,380 --> 00:47:48,730
the problem with that is that yeah other

1162
00:47:47,140 --> 00:47:51,609
than certainly screwing their customers

1163
00:47:48,730 --> 00:47:53,349
in the ecosystem how do you defend

1164
00:47:51,609 --> 00:47:57,098
against something like that in any

1165
00:47:53,349 --> 00:47:59,440
industry when your vendor goes rogue I

1166
00:47:57,099 --> 00:48:03,300
mean that there's a level of which we

1167
00:47:59,440 --> 00:48:05,950
have to add some bleach or somebody and

1168
00:48:03,300 --> 00:48:07,750
yeah when we can't trust the person

1169
00:48:05,950 --> 00:48:09,609
we're paying because they happen to

1170
00:48:07,750 --> 00:48:13,869
decide that they are just complete and

1171
00:48:09,609 --> 00:48:16,119
utter madman yeah I despair because it

1172
00:48:13,869 --> 00:48:17,470
has poisoning caused problems and I

1173
00:48:16,119 --> 00:48:19,210
don't have an answer and I know if any

1174
00:48:17,470 --> 00:48:21,700
industry has an answer and it goes

1175
00:48:19,210 --> 00:48:24,970
beyond WordPress by a massive way this

1176
00:48:21,700 --> 00:48:27,460
is anything wearing somebody sells their

1177
00:48:24,970 --> 00:48:28,899
services on to another we just assume

1178
00:48:27,460 --> 00:48:32,500
that they are at least Baykal

1179
00:48:28,900 --> 00:48:34,360
incompetent yes but at least the night

1180
00:48:32,500 --> 00:48:36,820
there would be the good guys

1181
00:48:34,360 --> 00:48:38,110
and they weren't so yeah unfortunately I

1182
00:48:36,820 --> 00:48:40,840
haven't got a really good answer other

1183
00:48:38,110 --> 00:48:42,460
than welcome I have really glad you

1184
00:48:40,840 --> 00:48:43,930
asked that question though because when

1185
00:48:42,460 --> 00:48:45,940
we were doing this we did have an entire

1186
00:48:43,930 --> 00:48:48,009
section on that and you know that was

1187
00:48:45,940 --> 00:48:49,810
around that sort of threat modeling and

1188
00:48:48,010 --> 00:48:51,340
supply chain side of things and we

1189
00:48:49,810 --> 00:48:54,090
genuinely thought we can't actually

1190
00:48:51,340 --> 00:48:56,650
advise on how you you know I'm

1191
00:48:54,090 --> 00:48:58,990
essentially a third trusted third party

1192
00:48:56,650 --> 00:49:01,060
going rogue on you that's hopefully such

1193
00:48:58,990 --> 00:49:02,529
a one-off situation it was a great story

1194
00:49:01,060 --> 00:49:04,630
it just didn't pick with our narrative

1195
00:49:02,530 --> 00:49:06,130
so it got lost them I would say go

1196
00:49:04,630 --> 00:49:09,430
everybody in the room you're interested

1197
00:49:06,130 --> 00:49:12,790
go Google pip dig wordfence and Jem

1198
00:49:09,430 --> 00:49:14,618
who's actually a uk-based hack oh it did

1199
00:49:12,790 --> 00:49:15,970
a really good job of writing up there

1200
00:49:14,619 --> 00:49:16,960
were two separate write-ups I really

1201
00:49:15,970 --> 00:49:19,810
recommend you go and look at both of

1202
00:49:16,960 --> 00:49:24,190
them and yeah follow the story because

1203
00:49:19,810 --> 00:49:25,950
it's mental any other questions from

1204
00:49:24,190 --> 00:49:32,070
nice people

1205
00:49:25,950 --> 00:49:32,069
Wow cool yeah okay bye bye but like you

