1
00:00:00,470 --> 00:00:04,319
[Music]

2
00:00:04,960 --> 00:00:06,560
so she'll be are you ready for the next

3
00:00:06,560 --> 00:00:07,600
speaker

4
00:00:07,600 --> 00:00:10,559
i am i definitely am and the talk title

5
00:00:10,559 --> 00:00:12,639
is really interesting so we have

6
00:00:12,639 --> 00:00:16,400
had a speaker chain so we do have a um

7
00:00:16,400 --> 00:00:18,560
really exciting talk actually um so we

8
00:00:18,560 --> 00:00:20,240
do have randall who'll be joining us

9
00:00:20,240 --> 00:00:22,640
very soon and um i've been looking

10
00:00:22,640 --> 00:00:24,000
forward to the talk obviously it has a

11
00:00:24,000 --> 00:00:26,960
very interesting title um 12 factors of

12
00:00:26,960 --> 00:00:29,599
pain and suffering so that in itself

13
00:00:29,599 --> 00:00:31,439
like kind of definitely excites me as

14
00:00:31,439 --> 00:00:33,600
well and um from what i understand we're

15
00:00:33,600 --> 00:00:35,600
going to be learning from you know his

16
00:00:35,600 --> 00:00:38,000
experiences and he wants other people to

17
00:00:38,000 --> 00:00:39,760
sort of gain knowledge from that as well

18
00:00:39,760 --> 00:00:42,559
so we'll bring randall on and you can

19
00:00:42,559 --> 00:00:44,079
tell us a little bit about what he'll be

20
00:00:44,079 --> 00:00:46,320
speaking as well hey randall

21
00:00:46,320 --> 00:00:48,960
hey what's up shelby hey vandana so cool

22
00:00:48,960 --> 00:00:50,480
to see you all again since we were just

23
00:00:50,480 --> 00:00:52,079
hanging out in person a few days ago

24
00:00:52,079 --> 00:00:53,680
that's pretty neat i know we were just

25
00:00:53,680 --> 00:00:55,199
talking about it like we were all in the

26
00:00:55,199 --> 00:00:57,120
same city and now we're all like

27
00:00:57,120 --> 00:00:59,840
literally across the globe and uh

28
00:00:59,840 --> 00:01:01,600
fighting different time zones and trying

29
00:01:01,600 --> 00:01:02,960
to sort of stay awake and randall's

30
00:01:02,960 --> 00:01:04,879
living the hacker life staying awake

31
00:01:04,879 --> 00:01:06,479
late at night what time is it at your

32
00:01:06,479 --> 00:01:07,200
end

33
00:01:07,200 --> 00:01:09,040
it's only 10 p.m so it's not that bad

34
00:01:09,040 --> 00:01:11,360
but i'm in california and so we are i

35
00:01:11,360 --> 00:01:13,280
think literally on the opposite sides of

36
00:01:13,280 --> 00:01:14,560
the earth from each other right now but

37
00:01:14,560 --> 00:01:16,560
that's what's so damn cool about the

38
00:01:16,560 --> 00:01:17,759
internet you know you get to like make

39
00:01:17,759 --> 00:01:18,960
friends and hang out with people in

40
00:01:18,960 --> 00:01:20,640
person and around the world it's the

41
00:01:20,640 --> 00:01:23,040
best so yeah totally agree with you

42
00:01:23,040 --> 00:01:24,320
totally agree with you and thanks for

43
00:01:24,320 --> 00:01:26,720
jumping on at the last minute so that's

44
00:01:26,720 --> 00:01:28,720
really amazing thank you

45
00:01:28,720 --> 00:01:31,200
and we before we start the session we do

46
00:01:31,200 --> 00:01:33,200
want to know about a little just a

47
00:01:33,200 --> 00:01:35,439
snippet snippet about what this talk is

48
00:01:35,439 --> 00:01:37,040
going to be all about

49
00:01:37,040 --> 00:01:39,119
okay i will tell you so this i wrote

50
00:01:39,119 --> 00:01:40,560
this talk a couple years ago so it's

51
00:01:40,560 --> 00:01:42,240
about two years old maybe

52
00:01:42,240 --> 00:01:44,479
and at the time so i've i've been

53
00:01:44,479 --> 00:01:46,320
writing code for pretty much my whole

54
00:01:46,320 --> 00:01:48,159
life so i got started when i was 12

55
00:01:48,159 --> 00:01:49,680
years old i've been writing code for

56
00:01:49,680 --> 00:01:50,560
over

57
00:01:50,560 --> 00:01:52,159
21 years now which tells you about how

58
00:01:52,159 --> 00:01:53,759
old i am i'm pretty old at this point

59
00:01:53,759 --> 00:01:54,720
but uh

60
00:01:54,720 --> 00:01:55,840
you know

61
00:01:55,840 --> 00:01:57,759
it's been like my entire life's passion

62
00:01:57,759 --> 00:01:59,759
and through that time i've gone from

63
00:01:59,759 --> 00:02:02,079
being a complete noob when i was a kid

64
00:02:02,079 --> 00:02:04,240
to nowadays after writing code for 21

65
00:02:04,240 --> 00:02:06,640
years still being a considerable noob

66
00:02:06,640 --> 00:02:08,318
and so not much not that much has

67
00:02:08,318 --> 00:02:10,399
changed and i would say that one of the

68
00:02:10,399 --> 00:02:12,080
things that you know when i'm talking to

69
00:02:12,080 --> 00:02:13,599
new developers and people they're sort

70
00:02:13,599 --> 00:02:15,120
of getting into the space

71
00:02:15,120 --> 00:02:17,280
they they always have this like idea

72
00:02:17,280 --> 00:02:19,360
that like as you practice and get better

73
00:02:19,360 --> 00:02:20,879
and better and better you make less and

74
00:02:20,879 --> 00:02:22,560
less mistakes and i don't think that's

75
00:02:22,560 --> 00:02:24,560
true you know like i screw things up

76
00:02:24,560 --> 00:02:26,560
literally all the time i'll be the first

77
00:02:26,560 --> 00:02:28,239
person to admit it you know and i

78
00:02:28,239 --> 00:02:30,480
thought it'd be fun to talk about the 12

79
00:02:30,480 --> 00:02:33,040
factor application which is a series of

80
00:02:33,040 --> 00:02:35,120
these 12 best practices for building

81
00:02:35,120 --> 00:02:37,920
scalable dependable web applications but

82
00:02:37,920 --> 00:02:39,519
instead of just talking about like

83
00:02:39,519 --> 00:02:41,440
here's the principles here's how to do

84
00:02:41,440 --> 00:02:42,800
things the right way i thought it'd be

85
00:02:42,800 --> 00:02:44,480
more fun to tell you about 12 ways i've

86
00:02:44,480 --> 00:02:46,080
actually screwed up each of those things

87
00:02:46,080 --> 00:02:47,920
over the years and so that's what this

88
00:02:47,920 --> 00:02:50,560
is a series of my 12 personal factors of

89
00:02:50,560 --> 00:02:51,920
pain and suffering that have screwed me

90
00:02:51,920 --> 00:02:53,840
up for a long time

91
00:02:53,840 --> 00:02:56,000
that sounds amazing and i'm i'm really

92
00:02:56,000 --> 00:02:57,680
looking forward to it and you know as

93
00:02:57,680 --> 00:02:59,280
you said it's quite well put like we can

94
00:02:59,280 --> 00:03:01,120
all learn from each other and it's um

95
00:03:01,120 --> 00:03:02,319
it's so good of you to actually share

96
00:03:02,319 --> 00:03:03,920
this with the community so i think

97
00:03:03,920 --> 00:03:05,840
without further ado we might just throw

98
00:03:05,840 --> 00:03:07,840
to you and let's hear about these 12

99
00:03:07,840 --> 00:03:08,959
factors

100
00:03:08,959 --> 00:03:10,560
let's do it

101
00:03:10,560 --> 00:03:12,879
let me know when you got the slides live

102
00:03:12,879 --> 00:03:14,560
and everything looks okay

103
00:03:14,560 --> 00:03:16,480
wait looking good

104
00:03:16,480 --> 00:03:19,440
all right cool so as shelby and vandena

105
00:03:19,440 --> 00:03:21,519
said um this talk is called the 12

106
00:03:21,519 --> 00:03:23,920
factors of pain and suffering um and

107
00:03:23,920 --> 00:03:25,760
really it's just a list of my own sad

108
00:03:25,760 --> 00:03:28,400
programming uh sad programming stories

109
00:03:28,400 --> 00:03:29,760
so feel free to drop some comments in

110
00:03:29,760 --> 00:03:31,360
the chat i'll do my best to answer them

111
00:03:31,360 --> 00:03:33,360
afterwards or you can always tweet at me

112
00:03:33,360 --> 00:03:35,760
um but these are real actual things that

113
00:03:35,760 --> 00:03:36,959
have happened to me none of this is

114
00:03:36,959 --> 00:03:38,959
exaggerated these are like the story of

115
00:03:38,959 --> 00:03:40,799
my life basically

116
00:03:40,799 --> 00:03:44,000
so real quick about me so i'm randall i

117
00:03:44,000 --> 00:03:46,400
work in devrel and community at sneak so

118
00:03:46,400 --> 00:03:48,239
it is amazing to meet all of you here

119
00:03:48,239 --> 00:03:50,159
today and a couple things you should

120
00:03:50,159 --> 00:03:52,239
know so i'm a python javascript and

121
00:03:52,239 --> 00:03:54,400
golang hacker these are sort of like the

122
00:03:54,400 --> 00:03:56,319
three primary programming languages i

123
00:03:56,319 --> 00:03:58,480
work in nowadays in the past i did a lot

124
00:03:58,480 --> 00:03:59,920
of lower level operating system

125
00:03:59,920 --> 00:04:01,200
development stuff but this is sort of

126
00:04:01,200 --> 00:04:02,959
what i work on nowadays

127
00:04:02,959 --> 00:04:04,640
i've also been doing open source like my

128
00:04:04,640 --> 00:04:07,599
entire life so i love open source i'm an

129
00:04:07,599 --> 00:04:09,519
author so i write a lot of technical

130
00:04:09,519 --> 00:04:11,360
articles security stuff programming

131
00:04:11,360 --> 00:04:14,640
pieces etc um but most importantly i

132
00:04:14,640 --> 00:04:16,720
would cons i would say that like i

133
00:04:16,720 --> 00:04:18,478
associate with being a builder i just

134
00:04:18,478 --> 00:04:20,478
really love to build things and i think

135
00:04:20,478 --> 00:04:22,160
because of that i've had the sort of

136
00:04:22,160 --> 00:04:23,680
good fortune to work on just a

137
00:04:23,680 --> 00:04:25,680
ridiculous amount of weird unique

138
00:04:25,680 --> 00:04:27,360
interesting projects over the years some

139
00:04:27,360 --> 00:04:30,320
of which i will share with you tonight

140
00:04:30,320 --> 00:04:31,520
so

141
00:04:31,520 --> 00:04:33,680
first of all what is the 12 factor app

142
00:04:33,680 --> 00:04:35,680
well if you haven't heard of it before

143
00:04:35,680 --> 00:04:37,520
it's a methodology for building simple

144
00:04:37,520 --> 00:04:39,759
scalable and dependable web apps at the

145
00:04:39,759 --> 00:04:41,600
end of the day it was created by adam

146
00:04:41,600 --> 00:04:43,680
wiggins so he was one of the founders of

147
00:04:43,680 --> 00:04:45,360
heroku with like the app hosting

148
00:04:45,360 --> 00:04:47,440
platform and if you want to learn more

149
00:04:47,440 --> 00:04:48,720
about this you can go to the website

150
00:04:48,720 --> 00:04:49,400
it's

151
00:04:49,400 --> 00:04:51,759
12factor.net like the number 12 then the

152
00:04:51,759 --> 00:04:54,560
word factor.net it is one of my favorite

153
00:04:54,560 --> 00:04:56,240
websites of all time because it's really

154
00:04:56,240 --> 00:04:58,880
simple it's really like just dependable

155
00:04:58,880 --> 00:05:00,560
and it lays out these principles in a

156
00:05:00,560 --> 00:05:02,560
really crystal clear way that i am going

157
00:05:02,560 --> 00:05:04,560
to do a huge disservice to tonight i'm

158
00:05:04,560 --> 00:05:05,840
sure

159
00:05:05,840 --> 00:05:06,639
but

160
00:05:06,639 --> 00:05:08,560
as i said when i got started the reason

161
00:05:08,560 --> 00:05:09,840
i thought it'd be fun to share all this

162
00:05:09,840 --> 00:05:11,199
stuff is because as an experienced

163
00:05:11,199 --> 00:05:13,280
developer i've screwed things up a lot

164
00:05:13,280 --> 00:05:15,520
in my career and a lot before i even had

165
00:05:15,520 --> 00:05:16,880
a career as a matter of fact i still

166
00:05:16,880 --> 00:05:19,199
screw things up constantly today and so

167
00:05:19,199 --> 00:05:21,600
you know these are just fun stories to

168
00:05:21,600 --> 00:05:23,600
teach you some of these principles

169
00:05:23,600 --> 00:05:26,000
all right so let's get right into it

170
00:05:26,000 --> 00:05:28,000
principle number one code base

171
00:05:28,000 --> 00:05:30,160
so when you're working on a project

172
00:05:30,160 --> 00:05:31,360
generally speaking you always want to

173
00:05:31,360 --> 00:05:33,199
have one code base that's tracked in

174
00:05:33,199 --> 00:05:35,600
version control that you deploy many

175
00:05:35,600 --> 00:05:37,600
times so what does this mean

176
00:05:37,600 --> 00:05:39,039
well let's say you have your a project

177
00:05:39,039 --> 00:05:40,080
right

178
00:05:40,080 --> 00:05:41,520
you would take that exact same code base

179
00:05:41,520 --> 00:05:42,880
and you'd deploy to like a production

180
00:05:42,880 --> 00:05:45,199
environment a staging environment maybe

181
00:05:45,199 --> 00:05:47,120
a local development environment or

182
00:05:47,120 --> 00:05:49,039
multiple local development environments

183
00:05:49,039 --> 00:05:50,560
but the important thing to note is that

184
00:05:50,560 --> 00:05:52,240
it's one code base that you just deploy

185
00:05:52,240 --> 00:05:54,000
to these different environments and this

186
00:05:54,000 --> 00:05:55,520
is sort of a best practice for dealing

187
00:05:55,520 --> 00:05:57,199
with the code base i think we can all

188
00:05:57,199 --> 00:05:59,120
sort of agree upon this you look at it

189
00:05:59,120 --> 00:06:00,639
it looks pretty straightforward so

190
00:06:00,639 --> 00:06:02,080
you're probably wondering how did you

191
00:06:02,080 --> 00:06:03,600
screw this up

192
00:06:03,600 --> 00:06:04,560
well

193
00:06:04,560 --> 00:06:07,280
back in the day this was in maybe 2009

194
00:06:07,280 --> 00:06:09,680
um i had started a website with a couple

195
00:06:09,680 --> 00:06:11,680
friends of mine and it was like becoming

196
00:06:11,680 --> 00:06:13,600
a full-time business and basically the

197
00:06:13,600 --> 00:06:15,440
way the website worked is if people

198
00:06:15,440 --> 00:06:18,160
would google a phone number online they

199
00:06:18,160 --> 00:06:19,680
would land on our website so we were the

200
00:06:19,680 --> 00:06:21,440
number one ranked website on google

201
00:06:21,440 --> 00:06:23,280
search and we would basically say like

202
00:06:23,280 --> 00:06:24,560
hey click here for more information

203
00:06:24,560 --> 00:06:26,319
about this phone number people would

204
00:06:26,319 --> 00:06:28,000
click through to our webpage and they

205
00:06:28,000 --> 00:06:29,919
would see a bunch of information about

206
00:06:29,919 --> 00:06:31,360
this the person that owns this phone

207
00:06:31,360 --> 00:06:33,120
number like this is the person they live

208
00:06:33,120 --> 00:06:35,759
it you know this area they're not a spam

209
00:06:35,759 --> 00:06:37,520
bot you know just basic information

210
00:06:37,520 --> 00:06:39,199
maybe their their cell phone provider or

211
00:06:39,199 --> 00:06:40,160
whatever

212
00:06:40,160 --> 00:06:41,840
and what we would do is we would sell

213
00:06:41,840 --> 00:06:43,680
affiliate links

214
00:06:43,680 --> 00:06:45,759
for basically these visitors to get more

215
00:06:45,759 --> 00:06:47,440
information about a person given their

216
00:06:47,440 --> 00:06:49,039
phone number and that's how we'd make

217
00:06:49,039 --> 00:06:50,479
money and we would make something like

218
00:06:50,479 --> 00:06:52,800
fifty dollars per affiliate sale so it

219
00:06:52,800 --> 00:06:54,240
was a lot of money coming in from this

220
00:06:54,240 --> 00:06:55,360
website

221
00:06:55,360 --> 00:06:56,319
now

222
00:06:56,319 --> 00:06:58,639
this was all running extremely well and

223
00:06:58,639 --> 00:07:00,080
we were getting paid a lot of money

224
00:07:00,080 --> 00:07:01,120
until

225
00:07:01,120 --> 00:07:03,280
google released their panda search

226
00:07:03,280 --> 00:07:05,039
algorithm update now i believe this was

227
00:07:05,039 --> 00:07:08,240
back in i want to say 2009 2010 but when

228
00:07:08,240 --> 00:07:10,319
google released this major like search

229
00:07:10,319 --> 00:07:11,919
algorithm update it completely destroyed

230
00:07:11,919 --> 00:07:14,000
our business overnight so our entire

231
00:07:14,000 --> 00:07:16,960
website it was tnid tnid.us

232
00:07:16,960 --> 00:07:18,960
got completely delisted from google and

233
00:07:18,960 --> 00:07:21,199
so we showed up in no search results at

234
00:07:21,199 --> 00:07:23,199
all and so we went from making like a

235
00:07:23,199 --> 00:07:24,880
lot of money every day to making like

236
00:07:24,880 --> 00:07:27,360
zero dollars a day and it freaked us out

237
00:07:27,360 --> 00:07:29,680
so i was actually on my first vacation

238
00:07:29,680 --> 00:07:31,520
in like two years i think when this

239
00:07:31,520 --> 00:07:33,039
happened and it was so annoying because

240
00:07:33,039 --> 00:07:35,120
the entire vacation i worked on this but

241
00:07:35,120 --> 00:07:37,680
basically what i did is i said okay well

242
00:07:37,680 --> 00:07:39,680
we have two things we have to do first

243
00:07:39,680 --> 00:07:41,280
of all we have to like con figure out

244
00:07:41,280 --> 00:07:43,120
how to contact someone at google and

245
00:07:43,120 --> 00:07:44,720
like figure out how to get our website

246
00:07:44,720 --> 00:07:46,800
unbanned there must have been some issue

247
00:07:46,800 --> 00:07:49,039
on their end and like we'll sort it out

248
00:07:49,039 --> 00:07:50,319
in the meantime though what i'm going to

249
00:07:50,319 --> 00:07:51,680
do is i'm just going to go ahead i'm

250
00:07:51,680 --> 00:07:53,120
going to copy and paste the code base

251
00:07:53,120 --> 00:07:55,599
for the existing site tnid.us

252
00:07:55,599 --> 00:07:56,960
i'm going to purchase a new sketchy

253
00:07:56,960 --> 00:07:58,720
domain name for this

254
00:07:58,720 --> 00:08:00,639
for this thing i'm going to

255
00:08:00,639 --> 00:08:02,160
make a new logo i'm going to like

256
00:08:02,160 --> 00:08:04,240
rewrite the the wording on the home page

257
00:08:04,240 --> 00:08:05,599
i'm going to change this color scheme

258
00:08:05,599 --> 00:08:07,039
and i'm just literally going to relaunch

259
00:08:07,039 --> 00:08:08,639
like the same code base with these minor

260
00:08:08,639 --> 00:08:11,120
changes under this new domain name and

261
00:08:11,120 --> 00:08:12,879
hope that this new domain name is going

262
00:08:12,879 --> 00:08:14,479
to get picked up and indexed by google

263
00:08:14,479 --> 00:08:16,160
over the next few days so we can still

264
00:08:16,160 --> 00:08:17,919
have some revenue coming in

265
00:08:17,919 --> 00:08:19,840
so that's what i did and this took me i

266
00:08:19,840 --> 00:08:20,960
don't know like

267
00:08:20,960 --> 00:08:22,639
eight hours or so of work something like

268
00:08:22,639 --> 00:08:24,400
this i got everything live and i sat

269
00:08:24,400 --> 00:08:26,639
back and i was like obsessively checking

270
00:08:26,639 --> 00:08:28,400
you know google webmaster tools to see

271
00:08:28,400 --> 00:08:31,120
if our website had gotten picked up

272
00:08:31,120 --> 00:08:32,799
well the next day things started working

273
00:08:32,799 --> 00:08:34,000
a little bit we started to see some

274
00:08:34,000 --> 00:08:35,440
traffic we started to get indexed on

275
00:08:35,440 --> 00:08:37,360
google and after a few days things were

276
00:08:37,360 --> 00:08:38,799
starting to run pretty well on this new

277
00:08:38,799 --> 00:08:41,120
domain and so i thought oh you know

278
00:08:41,120 --> 00:08:43,279
maybe we're going to be okay after all

279
00:08:43,279 --> 00:08:46,320
but then this new domain got banned and

280
00:08:46,320 --> 00:08:48,000
so then what i did is i freaked out

281
00:08:48,000 --> 00:08:49,600
again and i said okay

282
00:08:49,600 --> 00:08:51,120
i got to keep the original domain

283
00:08:51,120 --> 00:08:53,040
running and this domain in case this

284
00:08:53,040 --> 00:08:54,480
gets unbanned and i'm going to create a

285
00:08:54,480 --> 00:08:56,959
couple additional domains so i copy and

286
00:08:56,959 --> 00:08:58,959
pasted the code base again into two

287
00:08:58,959 --> 00:09:00,880
different iterations i bought two more

288
00:09:00,880 --> 00:09:03,360
domain names and then i

289
00:09:03,360 --> 00:09:05,040
went through the painstaking process of

290
00:09:05,040 --> 00:09:07,040
like changing all the the logos the

291
00:09:07,040 --> 00:09:08,640
color schemes the name and all these

292
00:09:08,640 --> 00:09:09,600
things

293
00:09:09,600 --> 00:09:10,800
and

294
00:09:10,800 --> 00:09:12,640
these websites also both got picked up

295
00:09:12,640 --> 00:09:14,640
by google but then shortly banned a

296
00:09:14,640 --> 00:09:17,120
little while afterwards and so i was

297
00:09:17,120 --> 00:09:19,519
basically in like this massive copy

298
00:09:19,519 --> 00:09:22,320
paste cycle for about a month and a half

299
00:09:22,320 --> 00:09:23,760
where i was essentially trying to

300
00:09:23,760 --> 00:09:25,600
outsmart google and what i would do is

301
00:09:25,600 --> 00:09:27,519
every day i would work insane hours and

302
00:09:27,519 --> 00:09:29,040
i would literally copy and paste my old

303
00:09:29,040 --> 00:09:31,600
code base buy a new sketchy domain name

304
00:09:31,600 --> 00:09:33,279
run some code i'd write like spit out

305
00:09:33,279 --> 00:09:34,959
new logos and images and then like

306
00:09:34,959 --> 00:09:36,480
alternate color schemes and do all these

307
00:09:36,480 --> 00:09:38,000
things to like try to trick google into

308
00:09:38,000 --> 00:09:39,839
thinking that like these are different

309
00:09:39,839 --> 00:09:42,240
websites and over time as you can

310
00:09:42,240 --> 00:09:44,959
imagine this this method slowly stopped

311
00:09:44,959 --> 00:09:47,600
working all together and so this allowed

312
00:09:47,600 --> 00:09:49,120
us to continue on for another month and

313
00:09:49,120 --> 00:09:51,600
a half or so but it was brutal now the

314
00:09:51,600 --> 00:09:53,200
worst part about this and the reason why

315
00:09:53,200 --> 00:09:55,519
it was so brutal is because every time i

316
00:09:55,519 --> 00:09:57,839
did that i was maintaining now 20

317
00:09:57,839 --> 00:09:59,680
different copies of the same code base

318
00:09:59,680 --> 00:10:01,279
and i was literally every time we had to

319
00:10:01,279 --> 00:10:03,440
make a change going into all 20 versions

320
00:10:03,440 --> 00:10:05,839
of this code base and editing things in

321
00:10:05,839 --> 00:10:07,760
order to make this happen what i should

322
00:10:07,760 --> 00:10:08,959
have done if i was smart which would

323
00:10:08,959 --> 00:10:10,399
have saved me a ridiculous amount of

324
00:10:10,399 --> 00:10:11,920
time is i should have templatized all

325
00:10:11,920 --> 00:10:13,680
the things in a single code base and

326
00:10:13,680 --> 00:10:14,800
just deployed it to these different

327
00:10:14,800 --> 00:10:16,800
environments and so i know that this

328
00:10:16,800 --> 00:10:18,640
isn't really the exact perfect scenario

329
00:10:18,640 --> 00:10:20,560
described by the 12-factor application

330
00:10:20,560 --> 00:10:22,480
but i think it's super relevant and so

331
00:10:22,480 --> 00:10:24,720
the lesson learned for me is follow the

332
00:10:24,720 --> 00:10:26,560
code-based rules and you will not feel

333
00:10:26,560 --> 00:10:29,279
as much pain as i felt

334
00:10:29,279 --> 00:10:31,360
all right second factor is all about

335
00:10:31,360 --> 00:10:33,200
dependencies so whenever you're building

336
00:10:33,200 --> 00:10:34,480
an application you always want to

337
00:10:34,480 --> 00:10:36,320
explicitly declare and isolate your

338
00:10:36,320 --> 00:10:38,720
dependencies now again this sounds super

339
00:10:38,720 --> 00:10:40,880
simple makes sense right so again how

340
00:10:40,880 --> 00:10:42,640
did i screw this up

341
00:10:42,640 --> 00:10:43,360
well

342
00:10:43,360 --> 00:10:45,040
here's how it works

343
00:10:45,040 --> 00:10:46,720
when you're first of all when you

344
00:10:46,720 --> 00:10:48,079
declare dependencies like let's say

345
00:10:48,079 --> 00:10:49,760
you're building a javascript application

346
00:10:49,760 --> 00:10:51,440
you're going to have like a package.json

347
00:10:51,440 --> 00:10:52,480
or something like this and you're going

348
00:10:52,480 --> 00:10:54,000
to specifically write out all your

349
00:10:54,000 --> 00:10:55,440
dependencies that you need to build your

350
00:10:55,440 --> 00:10:57,360
application and then when you isolate

351
00:10:57,360 --> 00:10:59,279
them you're essentially saying you know

352
00:10:59,279 --> 00:11:00,640
i'm going to go install these things

353
00:11:00,640 --> 00:11:01,839
which is going to take all the things

354
00:11:01,839 --> 00:11:03,360
that i've written down and build a

355
00:11:03,360 --> 00:11:04,800
little environment so i can run my

356
00:11:04,800 --> 00:11:06,720
application and again this all makes

357
00:11:06,720 --> 00:11:09,920
sense now the way i messed this up was

358
00:11:09,920 --> 00:11:11,440
years ago i was building an image

359
00:11:11,440 --> 00:11:13,920
optimization api service and the way

360
00:11:13,920 --> 00:11:16,079
this worked is if you were a user you

361
00:11:16,079 --> 00:11:19,279
could essentially send my service this

362
00:11:19,279 --> 00:11:20,959
image whatever image you had like this

363
00:11:20,959 --> 00:11:22,800
really super cool image of a crow

364
00:11:22,800 --> 00:11:24,320
holding a knife which i thought was

365
00:11:24,320 --> 00:11:25,200
awesome

366
00:11:25,200 --> 00:11:27,440
and you take this image you send it over

367
00:11:27,440 --> 00:11:29,839
to the image optimization api service

368
00:11:29,839 --> 00:11:31,760
what i would then do is i would say okay

369
00:11:31,760 --> 00:11:33,279
let me go ahead and optimize this image

370
00:11:33,279 --> 00:11:35,839
for you so then i would send back the

371
00:11:35,839 --> 00:11:37,519
optimized version of the image to the

372
00:11:37,519 --> 00:11:39,760
user and it'd be a smaller file size but

373
00:11:39,760 --> 00:11:41,200
quality would be the same and so the

374
00:11:41,200 --> 00:11:42,640
user would be happy

375
00:11:42,640 --> 00:11:44,640
well on the back end the way this worked

376
00:11:44,640 --> 00:11:48,000
is this was all running on a vps so

377
00:11:48,000 --> 00:11:49,680
on this vps server this was just a

378
00:11:49,680 --> 00:11:52,399
single server you know service i had

379
00:11:52,399 --> 00:11:54,320
installed a bunch of these command line

380
00:11:54,320 --> 00:11:56,399
image optimization tools so there were

381
00:11:56,399 --> 00:11:59,519
things like opti png jpeg optum gif

382
00:11:59,519 --> 00:12:00,959
sickle there was a few others i don't

383
00:12:00,959 --> 00:12:03,200
remember but basically the way things

384
00:12:03,200 --> 00:12:04,240
worked is

385
00:12:04,240 --> 00:12:06,240
every time an image you know would be

386
00:12:06,240 --> 00:12:08,320
sent to the service i would literally

387
00:12:08,320 --> 00:12:10,079
shell out to one of these command line

388
00:12:10,079 --> 00:12:13,040
tools to optimize the image take the

389
00:12:13,040 --> 00:12:14,880
resulting image and then send it back to

390
00:12:14,880 --> 00:12:15,839
the user

391
00:12:15,839 --> 00:12:16,639
now

392
00:12:16,639 --> 00:12:18,560
this service was working absolutely

393
00:12:18,560 --> 00:12:21,040
great i put it online it was a an open

394
00:12:21,040 --> 00:12:23,200
source github project i wrote i put put

395
00:12:23,200 --> 00:12:24,959
it online and over time i started to get

396
00:12:24,959 --> 00:12:27,279
some like a sizeable amount of free

397
00:12:27,279 --> 00:12:29,680
users and what ended up happening is one

398
00:12:29,680 --> 00:12:31,680
day i started having all these you know

399
00:12:31,680 --> 00:12:32,480
um

400
00:12:32,480 --> 00:12:34,240
service notifications from my provider

401
00:12:34,240 --> 00:12:36,240
saying like hey you're you're going over

402
00:12:36,240 --> 00:12:38,480
your usage limits your your vps server

403
00:12:38,480 --> 00:12:40,240
is like running out of memory and so i

404
00:12:40,240 --> 00:12:41,839
thought oh cool i took a look at the

405
00:12:41,839 --> 00:12:43,839
traffic i saw i needed to scale it up

406
00:12:43,839 --> 00:12:45,200
and i thought all right what i'm going

407
00:12:45,200 --> 00:12:46,959
to do is i'm going to literally create a

408
00:12:46,959 --> 00:12:49,920
second vps server put a load balancer in

409
00:12:49,920 --> 00:12:51,600
front of both of these things so that i

410
00:12:51,600 --> 00:12:53,279
can then you know just route traffic

411
00:12:53,279 --> 00:12:55,519
between both of these things and i

412
00:12:55,519 --> 00:12:57,920
literally took my javascript code base i

413
00:12:57,920 --> 00:12:59,680
copied it over onto the second vps

414
00:12:59,680 --> 00:13:03,040
server i ran my npm install and then i

415
00:13:03,040 --> 00:13:04,800
updated the load balancer and thought

416
00:13:04,800 --> 00:13:06,560
everything would be fine

417
00:13:06,560 --> 00:13:08,800
unfortunately things were not fine

418
00:13:08,800 --> 00:13:10,800
and the reason things weren't fine is

419
00:13:10,800 --> 00:13:12,880
because of course on my second vps

420
00:13:12,880 --> 00:13:14,320
server i didn't have any of these

421
00:13:14,320 --> 00:13:16,720
command line applications installed that

422
00:13:16,720 --> 00:13:19,360
my application needed in order to run

423
00:13:19,360 --> 00:13:20,959
yes i had all of my javascript

424
00:13:20,959 --> 00:13:22,800
dependencies my web app dependencies all

425
00:13:22,800 --> 00:13:24,399
those things but i hadn't fully

426
00:13:24,399 --> 00:13:26,399
considered the entire spectrum of

427
00:13:26,399 --> 00:13:28,800
dependencies than my app needs now at

428
00:13:28,800 --> 00:13:30,720
the time if docker had existed it would

429
00:13:30,720 --> 00:13:33,200
have made this problem like moot because

430
00:13:33,200 --> 00:13:34,560
i could have packaged everything up

431
00:13:34,560 --> 00:13:36,720
including like my code all the command

432
00:13:36,720 --> 00:13:38,639
line tools all these things into a

433
00:13:38,639 --> 00:13:40,800
docker image but this really goes to

434
00:13:40,800 --> 00:13:42,000
show you that when you're thinking about

435
00:13:42,000 --> 00:13:43,920
dependencies for an application you have

436
00:13:43,920 --> 00:13:45,920
to think about it holistically you can't

437
00:13:45,920 --> 00:13:47,760
think like oh yeah it's just these one

438
00:13:47,760 --> 00:13:49,360
this one little part of you know things

439
00:13:49,360 --> 00:13:51,120
over here over there you really have to

440
00:13:51,120 --> 00:13:52,880
think about it in the terms of the big

441
00:13:52,880 --> 00:13:55,440
picture and so that's how i screwed that

442
00:13:55,440 --> 00:13:57,199
one up

443
00:13:57,199 --> 00:13:59,600
so next let's talk about configuration

444
00:13:59,600 --> 00:14:01,760
so the 12-factor app states that you

445
00:14:01,760 --> 00:14:03,680
always want to store configuration data

446
00:14:03,680 --> 00:14:05,920
in the environment aka environment

447
00:14:05,920 --> 00:14:08,000
variables now

448
00:14:08,000 --> 00:14:09,920
if you think about sensitive things that

449
00:14:09,920 --> 00:14:11,279
you're going to update from time to time

450
00:14:11,279 --> 00:14:12,720
in your applications you might have

451
00:14:12,720 --> 00:14:15,360
things like a database url a price for

452
00:14:15,360 --> 00:14:17,360
something max you know max number of

453
00:14:17,360 --> 00:14:18,880
threads you want to run for like a given

454
00:14:18,880 --> 00:14:20,480
you know application server or api

455
00:14:20,480 --> 00:14:21,839
credentials right

456
00:14:21,839 --> 00:14:23,040
now

457
00:14:23,040 --> 00:14:25,040
the way i messed this one up is back in

458
00:14:25,040 --> 00:14:27,040
the day i was doing a lot of telephony

459
00:14:27,040 --> 00:14:29,120
work in my first my or in my earlier

460
00:14:29,120 --> 00:14:32,399
jobs that i had this was around 2009

461
00:14:32,399 --> 00:14:35,360
2010 11 12 things like this and a lot of

462
00:14:35,360 --> 00:14:36,959
the work that i did was based on top of

463
00:14:36,959 --> 00:14:38,800
this open source linux software called

464
00:14:38,800 --> 00:14:41,040
asterisk now if you haven't heard of it

465
00:14:41,040 --> 00:14:42,880
it's really cool it essentially lets you

466
00:14:42,880 --> 00:14:44,959
write code to program like phone calls

467
00:14:44,959 --> 00:14:47,760
sms messages you know things like that

468
00:14:47,760 --> 00:14:50,959
and just makes it super easy for you and

469
00:14:50,959 --> 00:14:52,800
at the time i just started scaling up

470
00:14:52,800 --> 00:14:54,639
this free teleconferencing software that

471
00:14:54,639 --> 00:14:56,560
i was working on and i was trying to

472
00:14:56,560 --> 00:14:58,240
deploy it to like a really hot cloud

473
00:14:58,240 --> 00:15:01,040
provider at the time aka rackspace and

474
00:15:01,040 --> 00:15:02,720
this was before things like terraform

475
00:15:02,720 --> 00:15:04,639
existed and so i was trying to write

476
00:15:04,639 --> 00:15:06,320
some bootstrapping code which would

477
00:15:06,320 --> 00:15:07,920
essentially take all the code that i

478
00:15:07,920 --> 00:15:10,160
wrote deploy it to a cloud server or to

479
00:15:10,160 --> 00:15:11,680
a new cloud server and then set

480
00:15:11,680 --> 00:15:13,600
everything up for me and so what i did

481
00:15:13,600 --> 00:15:15,680
is i manually provisioned a rackspace

482
00:15:15,680 --> 00:15:17,120
api key

483
00:15:17,120 --> 00:15:18,800
and i wrote some code that basically

484
00:15:18,800 --> 00:15:22,000
took my my rackspace api key and used it

485
00:15:22,000 --> 00:15:23,920
to provision a server and copy over all

486
00:15:23,920 --> 00:15:26,160
of my asterisk stuff onto the server run

487
00:15:26,160 --> 00:15:28,240
all the setup commands etc

488
00:15:28,240 --> 00:15:29,360
now

489
00:15:29,360 --> 00:15:32,160
i was working on this and i decided hey

490
00:15:32,160 --> 00:15:33,519
you know what i'm trying to test this

491
00:15:33,519 --> 00:15:34,800
out to see if it works so what i'm going

492
00:15:34,800 --> 00:15:37,120
to do is i'm i was i think i was running

493
00:15:37,120 --> 00:15:39,440
like hudson or jenkins at the time a ci

494
00:15:39,440 --> 00:15:41,360
system and what i wanted to do is i

495
00:15:41,360 --> 00:15:42,720
wanted that

496
00:15:42,720 --> 00:15:44,880
that ci process to basically kick off

497
00:15:44,880 --> 00:15:47,680
this bootstrapping procedure and so i

498
00:15:47,680 --> 00:15:49,519
was i was like in the testing and

499
00:15:49,519 --> 00:15:50,959
development phase of this this was all

500
00:15:50,959 --> 00:15:52,160
open source and i thought you know what

501
00:15:52,160 --> 00:15:53,759
i'm just going to go ahead and hard code

502
00:15:53,759 --> 00:15:56,560
my rackspace api key directly into my

503
00:15:56,560 --> 00:15:59,040
open source code base on github just for

504
00:15:59,040 --> 00:16:01,120
a little while just to see if my ci

505
00:16:01,120 --> 00:16:02,959
system will pick it up run all the

506
00:16:02,959 --> 00:16:04,639
things necessary and actually do the

507
00:16:04,639 --> 00:16:05,839
bootstrapping

508
00:16:05,839 --> 00:16:07,199
now i knew at the time this was a

509
00:16:07,199 --> 00:16:09,360
terrible idea because like i was putting

510
00:16:09,360 --> 00:16:11,199
my sensitive api key public on the

511
00:16:11,199 --> 00:16:12,880
internet but i thought you know it

512
00:16:12,880 --> 00:16:14,399
doesn't really matter like no one's

513
00:16:14,399 --> 00:16:15,360
going to be looking at this thing

514
00:16:15,360 --> 00:16:17,440
whatever and so i went ahead and pushed

515
00:16:17,440 --> 00:16:19,519
it live and i tested things out things

516
00:16:19,519 --> 00:16:21,279
worked absolutely great i didn't notice

517
00:16:21,279 --> 00:16:23,600
any issues and so i went to sleep

518
00:16:23,600 --> 00:16:25,519
well as soon as i go to sleep this is

519
00:16:25,519 --> 00:16:27,600
what happened i presume

520
00:16:27,600 --> 00:16:29,519
some jerk out there was running a bot

521
00:16:29,519 --> 00:16:31,759
that was looking for noobs that were

522
00:16:31,759 --> 00:16:33,279
uploading their sensitive rackspace

523
00:16:33,279 --> 00:16:35,440
credentials to github like me

524
00:16:35,440 --> 00:16:37,759
so they scraped my api credential and

525
00:16:37,759 --> 00:16:40,160
immediately started making requests

526
00:16:40,160 --> 00:16:43,360
from using my api key to rackspace and

527
00:16:43,360 --> 00:16:44,959
basically provisioning these massive

528
00:16:44,959 --> 00:16:46,959
servers that they would then run as tour

529
00:16:46,959 --> 00:16:48,000
relays

530
00:16:48,000 --> 00:16:50,079
and so that takes a ridiculous amount of

531
00:16:50,079 --> 00:16:52,079
bandwidth so

532
00:16:52,079 --> 00:16:54,320
i woke up in the morning and completely

533
00:16:54,320 --> 00:16:56,320
freaked out because i saw all of these

534
00:16:56,320 --> 00:16:58,079
billing emails from rackspace and when i

535
00:16:58,079 --> 00:17:00,000
took a look at it i noticed that i had a

536
00:17:00,000 --> 00:17:03,600
negative negative 25 000 account balance

537
00:17:03,600 --> 00:17:05,520
and rackspace at the time had actually

538
00:17:05,520 --> 00:17:07,439
tried to bill my personal credit card i

539
00:17:07,439 --> 00:17:09,839
hooked up to my rackspace account and it

540
00:17:09,839 --> 00:17:11,599
failed because my personal credit limit

541
00:17:11,599 --> 00:17:14,240
was like 2 000 or something at the time

542
00:17:14,240 --> 00:17:16,240
and so of course i had like absolutely

543
00:17:16,240 --> 00:17:18,240
no money to pay for something like this

544
00:17:18,240 --> 00:17:19,679
and so

545
00:17:19,679 --> 00:17:21,760
this scenario was absolutely terrible

546
00:17:21,760 --> 00:17:23,679
now thankfully i eventually figured out

547
00:17:23,679 --> 00:17:25,839
what had happened i contacted rackspace

548
00:17:25,839 --> 00:17:28,240
support and they were absolutely amazing

549
00:17:28,240 --> 00:17:29,840
they they were like look it happens all

550
00:17:29,840 --> 00:17:31,039
the time don't worry about it we're

551
00:17:31,039 --> 00:17:33,200
gonna like reset your billing stuff so

552
00:17:33,200 --> 00:17:35,440
they were amazing but the lesson learned

553
00:17:35,440 --> 00:17:38,000
is don't be lazy and in a lot of cases

554
00:17:38,000 --> 00:17:39,760
even when you know better like i did

555
00:17:39,760 --> 00:17:41,039
you're sometimes still lazy you

556
00:17:41,039 --> 00:17:42,880
sometimes still do the wrong thing and

557
00:17:42,880 --> 00:17:44,640
this is just a reminder that that can be

558
00:17:44,640 --> 00:17:47,600
very costly so you know

559
00:17:47,600 --> 00:17:49,600
try to store your config data in a good

560
00:17:49,600 --> 00:17:51,440
place like the environment or maybe in

561
00:17:51,440 --> 00:17:53,840
like a secure environment storage like

562
00:17:53,840 --> 00:17:55,679
tool like hashicorp has some options

563
00:17:55,679 --> 00:17:57,919
there but this is sort of uh the lesson

564
00:17:57,919 --> 00:17:59,840
learned

565
00:17:59,840 --> 00:18:01,760
right next let's talk about backing

566
00:18:01,760 --> 00:18:05,120
services um backing services so what are

567
00:18:05,120 --> 00:18:06,960
they well basically you have a

568
00:18:06,960 --> 00:18:09,039
production deployment somewhere and you

569
00:18:09,039 --> 00:18:10,320
have all these services that your

570
00:18:10,320 --> 00:18:12,559
production application relies on so

571
00:18:12,559 --> 00:18:14,000
maybe if you're sending emails you might

572
00:18:14,000 --> 00:18:16,880
rely on an smtp servers or maybe if

573
00:18:16,880 --> 00:18:19,679
you're deploying or storing files in a

574
00:18:19,679 --> 00:18:21,919
bucket system like amazon s3 you're

575
00:18:21,919 --> 00:18:23,760
going to need like the amazon s3

576
00:18:23,760 --> 00:18:25,760
deployment url somewhere or if you're

577
00:18:25,760 --> 00:18:27,120
talking to a database you might need the

578
00:18:27,120 --> 00:18:28,880
database url to connect to

579
00:18:28,880 --> 00:18:30,400
and the 12-factor app states that

580
00:18:30,400 --> 00:18:32,320
whenever you have these like backing

581
00:18:32,320 --> 00:18:34,960
services you want them to act as like

582
00:18:34,960 --> 00:18:36,240
attachable

583
00:18:36,240 --> 00:18:38,160
resources and what that means is you

584
00:18:38,160 --> 00:18:40,160
should be able to easily just update

585
00:18:40,160 --> 00:18:42,240
this one url here and instantly have

586
00:18:42,240 --> 00:18:43,600
your production environment switch from

587
00:18:43,600 --> 00:18:45,679
one postgres database to another so you

588
00:18:45,679 --> 00:18:47,360
should have these things just be easy to

589
00:18:47,360 --> 00:18:48,960
add and remove that's really all it

590
00:18:48,960 --> 00:18:50,080
means

591
00:18:50,080 --> 00:18:51,360
now

592
00:18:51,360 --> 00:18:53,280
this here is a self image of me that i

593
00:18:53,280 --> 00:18:55,039
drew of myself as a really young

594
00:18:55,039 --> 00:18:57,600
programmer super happy i had great ideas

595
00:18:57,600 --> 00:18:58,960
i was really you know positive about

596
00:18:58,960 --> 00:18:59,840
everything

597
00:18:59,840 --> 00:19:01,360
and uh

598
00:19:01,360 --> 00:19:03,360
i was maybe 12 13 years old something

599
00:19:03,360 --> 00:19:04,480
like that and i thought you know what

600
00:19:04,480 --> 00:19:06,880
i'm an amazing programmer and people

601
00:19:06,880 --> 00:19:08,400
need to know about this so i need to

602
00:19:08,400 --> 00:19:11,200
make a blog so i started my first blog

603
00:19:11,200 --> 00:19:12,960
on the internet and i was really excited

604
00:19:12,960 --> 00:19:14,559
i used to write on there all the time

605
00:19:14,559 --> 00:19:16,400
about things i was building and research

606
00:19:16,400 --> 00:19:18,000
and stuff like this and it was pretty

607
00:19:18,000 --> 00:19:18,960
exciting

608
00:19:18,960 --> 00:19:21,440
and this was a blog that i built custom

609
00:19:21,440 --> 00:19:25,039
myself of course in php and used my sql

610
00:19:25,039 --> 00:19:26,960
and i ran it on a shared web hosting

611
00:19:26,960 --> 00:19:28,400
service one of those cheap ones back in

612
00:19:28,400 --> 00:19:30,320
the day and

613
00:19:30,320 --> 00:19:32,880
when i went to college um i i was a

614
00:19:32,880 --> 00:19:35,039
really shy nerdy introverted kid i

615
00:19:35,039 --> 00:19:36,559
didn't really know how to make friends

616
00:19:36,559 --> 00:19:38,559
and so i thought you know what

617
00:19:38,559 --> 00:19:39,520
you know what's gonna make me some

618
00:19:39,520 --> 00:19:40,400
friends

619
00:19:40,400 --> 00:19:43,679
is if i give out uh pirated movies to

620
00:19:43,679 --> 00:19:46,960
everyone at school now i went to college

621
00:19:46,960 --> 00:19:48,880
or i got out of high school in 2006 so

622
00:19:48,880 --> 00:19:50,880
like i think i went to college in 2006

623
00:19:50,880 --> 00:19:53,280
or 2007 i don't really remember but

624
00:19:53,280 --> 00:19:54,720
this was like a super cool thing of the

625
00:19:54,720 --> 00:19:56,559
time because like piracy was like all

626
00:19:56,559 --> 00:19:59,280
the rage sort of still is you know but

627
00:19:59,280 --> 00:20:00,880
hence the flag back there

628
00:20:00,880 --> 00:20:02,640
but uh but i thought hey this is going

629
00:20:02,640 --> 00:20:03,919
to be really fun i'll make some friends

630
00:20:03,919 --> 00:20:05,440
i'll i'll be like the cool person on

631
00:20:05,440 --> 00:20:07,840
campus and so what we did is my

632
00:20:07,840 --> 00:20:09,919
roommates and i ordered the netflix four

633
00:20:09,919 --> 00:20:12,400
dvd per week subscription service so we

634
00:20:12,400 --> 00:20:14,240
would order four dvds a week they'd come

635
00:20:14,240 --> 00:20:16,320
in the mail i would rip them myself i

636
00:20:16,320 --> 00:20:18,400
would upload them onto my shared web

637
00:20:18,400 --> 00:20:20,080
hosting provider and i would just hand

638
00:20:20,080 --> 00:20:22,240
the link out to all my friends at school

639
00:20:22,240 --> 00:20:24,400
and this worked so i made made some

640
00:20:24,400 --> 00:20:25,679
great friends and met some really cool

641
00:20:25,679 --> 00:20:27,679
people it was super awesome

642
00:20:27,679 --> 00:20:30,640
until one day i run out of disk space on

643
00:20:30,640 --> 00:20:32,240
my shared web host

644
00:20:32,240 --> 00:20:34,559
and so at this point in time my blog i'd

645
00:20:34,559 --> 00:20:35,919
been working on it for maybe like you

646
00:20:35,919 --> 00:20:38,240
know seven eight years at this point and

647
00:20:38,240 --> 00:20:41,280
i thought hey i've learned a lot i know

648
00:20:41,280 --> 00:20:43,039
that i need i can scale this thing now

649
00:20:43,039 --> 00:20:44,880
and make it way better properly

650
00:20:44,880 --> 00:20:46,880
architect the entire thing and so i

651
00:20:46,880 --> 00:20:48,960
decided the first thing i'm going to do

652
00:20:48,960 --> 00:20:50,960
is i'm going to take these you know this

653
00:20:50,960 --> 00:20:53,039
massive blog which is consisting of like

654
00:20:53,039 --> 00:20:55,360
hundreds of these php files just strewn

655
00:20:55,360 --> 00:20:57,840
all about the var dub dub dub folder and

656
00:20:57,840 --> 00:20:59,039
i'm going to

657
00:20:59,039 --> 00:21:00,799
uh i'm going to rewrite it so that

658
00:21:00,799 --> 00:21:02,960
instead of using the free like local

659
00:21:02,960 --> 00:21:04,559
version of my sql installed on the

660
00:21:04,559 --> 00:21:06,400
shared web host i'm going to create a

661
00:21:06,400 --> 00:21:08,400
separate independent mysql database

662
00:21:08,400 --> 00:21:10,880
server i'm going to move all my logic

663
00:21:10,880 --> 00:21:12,159
into there and then i'm eventually going

664
00:21:12,159 --> 00:21:13,840
to create a separate file server to host

665
00:21:13,840 --> 00:21:15,440
all the movies and then just like you

666
00:21:15,440 --> 00:21:17,919
know architect the thing properly

667
00:21:17,919 --> 00:21:19,120
so the first thing i did is i

668
00:21:19,120 --> 00:21:21,440
provisioned this mysql server copied all

669
00:21:21,440 --> 00:21:23,760
my data over and then i went and went to

670
00:21:23,760 --> 00:21:25,760
go integrate it back into all of my my

671
00:21:25,760 --> 00:21:27,919
blog code and what i realized is that

672
00:21:27,919 --> 00:21:30,159
this was actually ridiculously hard to

673
00:21:30,159 --> 00:21:32,640
do and the reason it was so ridiculously

674
00:21:32,640 --> 00:21:34,720
hard to do is because in all of my php

675
00:21:34,720 --> 00:21:37,440
files like hundreds of them by the way

676
00:21:37,440 --> 00:21:39,360
i was just randomly connecting you know

677
00:21:39,360 --> 00:21:42,080
using my sql underscore connect and just

678
00:21:42,080 --> 00:21:44,480
like not supplying any parameters

679
00:21:44,480 --> 00:21:46,720
because i was connecting to my sql on

680
00:21:46,720 --> 00:21:48,960
localhost with no username or password

681
00:21:48,960 --> 00:21:51,120
on the default my sql port and so i had

682
00:21:51,120 --> 00:21:52,880
to actually go in and rewrite like i

683
00:21:52,880 --> 00:21:55,280
think thousands of my sql invocations

684
00:21:55,280 --> 00:21:57,440
all across this project and it was a

685
00:21:57,440 --> 00:21:58,799
total nightmare

686
00:21:58,799 --> 00:22:01,200
and so the lesson i learned here is

687
00:22:01,200 --> 00:22:03,280
whenever you're using attached resources

688
00:22:03,280 --> 00:22:05,360
whether it's mysql or you know an s3

689
00:22:05,360 --> 00:22:07,360
bucket or whatever always treat them as

690
00:22:07,360 --> 00:22:09,039
attachable resources make sure you're

691
00:22:09,039 --> 00:22:10,640
storing these credentials in an

692
00:22:10,640 --> 00:22:12,400
environment variable ideally and make

693
00:22:12,400 --> 00:22:13,679
sure that it's something you can easily

694
00:22:13,679 --> 00:22:15,840
swap out so that you're not relying on

695
00:22:15,840 --> 00:22:18,320
just thousands of lines of custom code

696
00:22:18,320 --> 00:22:20,320
like i was

697
00:22:20,320 --> 00:22:21,840
and that's me being extremely annoyed

698
00:22:21,840 --> 00:22:23,600
when i realized how terrible of a

699
00:22:23,600 --> 00:22:26,159
programmer i was by the way

700
00:22:26,159 --> 00:22:28,799
all right so next uh build release run

701
00:22:28,799 --> 00:22:30,400
you always want to strictly separate

702
00:22:30,400 --> 00:22:32,720
your build and run stages

703
00:22:32,720 --> 00:22:36,000
so what does this mean um

704
00:22:36,000 --> 00:22:38,720
one second there we go so you have your

705
00:22:38,720 --> 00:22:41,200
code and when you're going to get it

706
00:22:41,200 --> 00:22:43,919
ready you uh you have a build process

707
00:22:43,919 --> 00:22:45,360
and ideally speaking you want to have

708
00:22:45,360 --> 00:22:46,960
some configuration data which is like a

709
00:22:46,960 --> 00:22:48,640
package of your environment variables

710
00:22:48,640 --> 00:22:50,080
configuration information everything

711
00:22:50,080 --> 00:22:52,000
like that and all these things get

712
00:22:52,000 --> 00:22:53,600
created into what we would call a

713
00:22:53,600 --> 00:22:54,880
release and the release would be the

714
00:22:54,880 --> 00:22:57,120
thing that actually goes live and does

715
00:22:57,120 --> 00:23:00,320
stuff in in the real world well

716
00:23:00,320 --> 00:23:01,440
i don't know if i mentioned this before

717
00:23:01,440 --> 00:23:02,720
but i was sort of a script kitty as a

718
00:23:02,720 --> 00:23:05,520
kid i think you get the idea by now and

719
00:23:05,520 --> 00:23:07,600
basically what happened is um when i was

720
00:23:07,600 --> 00:23:09,280
working on my personal website on that

721
00:23:09,280 --> 00:23:11,440
shared web host back in the day i had my

722
00:23:11,440 --> 00:23:13,679
website code on my computer

723
00:23:13,679 --> 00:23:15,840
and i had my web server running live on

724
00:23:15,840 --> 00:23:18,159
the shared web host and so whenever i'd

725
00:23:18,159 --> 00:23:20,880
work on the the shared prod on on so

726
00:23:20,880 --> 00:23:22,720
excuse me what i would do initially when

727
00:23:22,720 --> 00:23:24,559
i went to work on my website is i would

728
00:23:24,559 --> 00:23:26,720
write some code locally then i would scp

729
00:23:26,720 --> 00:23:29,039
it over to my live web server then i'd

730
00:23:29,039 --> 00:23:30,799
refresh the page and test it out to see

731
00:23:30,799 --> 00:23:33,200
if my php code worked now this was fine

732
00:23:33,200 --> 00:23:35,840
except as your project grows this this

733
00:23:35,840 --> 00:23:37,600
scp command gets really really slow

734
00:23:37,600 --> 00:23:38,799
because you're just copying tons of

735
00:23:38,799 --> 00:23:40,240
files over all the time and it just

736
00:23:40,240 --> 00:23:42,159
takes forever and so what i said is i

737
00:23:42,159 --> 00:23:43,840
said you know what i don't really need

738
00:23:43,840 --> 00:23:45,200
to do this anyways whatever i'm just

739
00:23:45,200 --> 00:23:47,600
going to ssh straight into my web server

740
00:23:47,600 --> 00:23:50,320
modify my code files directly and then

741
00:23:50,320 --> 00:23:52,480
test things out without all the delay

742
00:23:52,480 --> 00:23:54,320
and then what i would do is after i

743
00:23:54,320 --> 00:23:56,000
would do that uh

744
00:23:56,000 --> 00:23:57,840
it would you know if once i got things

745
00:23:57,840 --> 00:23:59,440
working i would then try to copy the

746
00:23:59,440 --> 00:24:01,360
working code back onto my computer so i

747
00:24:01,360 --> 00:24:03,120
had a local copy of it but then

748
00:24:03,120 --> 00:24:04,720
sometimes i would lose track of which

749
00:24:04,720 --> 00:24:05,919
one was doing which and then i have to

750
00:24:05,919 --> 00:24:07,440
like copy code from here on to there and

751
00:24:07,440 --> 00:24:09,679
it was just a massive nightmare and so

752
00:24:09,679 --> 00:24:11,919
uh it was bad and it was really

753
00:24:11,919 --> 00:24:13,200
frustrating and that's why you always

754
00:24:13,200 --> 00:24:14,480
want to

755
00:24:14,480 --> 00:24:16,720
separate those build run and release

756
00:24:16,720 --> 00:24:18,640
stages of software if i had known that

757
00:24:18,640 --> 00:24:20,159
back then and followed those principles

758
00:24:20,159 --> 00:24:21,360
i don't think i would have had such an

759
00:24:21,360 --> 00:24:23,600
annoying time

760
00:24:23,600 --> 00:24:25,120
now unfortunately by the way everyone i

761
00:24:25,120 --> 00:24:27,600
realize i am talking incredibly slowly

762
00:24:27,600 --> 00:24:29,120
here and telling these stories slowly i

763
00:24:29,120 --> 00:24:31,600
apologize i i realize i have about six

764
00:24:31,600 --> 00:24:33,360
minutes left so i'm going to probably

765
00:24:33,360 --> 00:24:35,600
finish uh one more of these but i don't

766
00:24:35,600 --> 00:24:37,520
think we'll be able to get through all

767
00:24:37,520 --> 00:24:39,679
12 of them so i apologize

768
00:24:39,679 --> 00:24:40,799
now

769
00:24:40,799 --> 00:24:42,480
going back to the story real fast

770
00:24:42,480 --> 00:24:43,919
processes

771
00:24:43,919 --> 00:24:46,720
uh the sixth factor in the 12 factor app

772
00:24:46,720 --> 00:24:48,799
talks about the always want to execute

773
00:24:48,799 --> 00:24:50,400
your application as one or more

774
00:24:50,400 --> 00:24:52,400
stateless processes so what does this

775
00:24:52,400 --> 00:24:53,279
mean

776
00:24:53,279 --> 00:24:56,480
well the key here is stateless so when i

777
00:24:56,480 --> 00:24:58,320
was building this conference calling

778
00:24:58,320 --> 00:24:59,919
services free conference calling service

779
00:24:59,919 --> 00:25:02,559
back in the day i had this application

780
00:25:02,559 --> 00:25:04,720
it was deployed in a data center and i

781
00:25:04,720 --> 00:25:06,400
had multiple instances of this thing

782
00:25:06,400 --> 00:25:08,159
running and the way it worked is these

783
00:25:08,159 --> 00:25:09,840
were all running on separate physical

784
00:25:09,840 --> 00:25:12,400
servers and so peop i would basically

785
00:25:12,400 --> 00:25:14,080
have like this massive pool of phone

786
00:25:14,080 --> 00:25:15,919
numbers and each of these phone numbers

787
00:25:15,919 --> 00:25:17,919
would be assigned to a different server

788
00:25:17,919 --> 00:25:19,679
and in reality there was like 100 phone

789
00:25:19,679 --> 00:25:21,279
numbers assigned to each server but you

790
00:25:21,279 --> 00:25:22,480
get the idea

791
00:25:22,480 --> 00:25:24,240
and what happened is what was cool about

792
00:25:24,240 --> 00:25:26,000
this free conference

793
00:25:26,000 --> 00:25:27,440
app is that like you could set up a

794
00:25:27,440 --> 00:25:28,880
conference room and you could custom

795
00:25:28,880 --> 00:25:30,640
record your own voice prompts for it you

796
00:25:30,640 --> 00:25:32,480
could customize the entire thing and so

797
00:25:32,480 --> 00:25:34,320
people really enjoyed it

798
00:25:34,320 --> 00:25:35,679
and

799
00:25:35,679 --> 00:25:37,120
what would happen is when people would

800
00:25:37,120 --> 00:25:39,840
call in and it you know manage the the

801
00:25:39,840 --> 00:25:41,200
custom voice prompts for their

802
00:25:41,200 --> 00:25:42,400
conference lines

803
00:25:42,400 --> 00:25:43,919
each of the recordings they recorded

804
00:25:43,919 --> 00:25:45,760
would be stored on the server in which

805
00:25:45,760 --> 00:25:47,679
their phone number was assigned to and

806
00:25:47,679 --> 00:25:49,120
so this was sort of the way i'd

807
00:25:49,120 --> 00:25:51,600
originally architected this application

808
00:25:51,600 --> 00:25:53,679
now this worked pretty good until one

809
00:25:53,679 --> 00:25:55,520
day one of these physical servers in a

810
00:25:55,520 --> 00:25:57,760
data center in pennsylvania like

811
00:25:57,760 --> 00:25:59,360
completely went offline

812
00:25:59,360 --> 00:26:01,679
and when that happened my code worked so

813
00:26:01,679 --> 00:26:03,360
my load bouncer over here essentially

814
00:26:03,360 --> 00:26:05,039
rerouted all the phone numbers that were

815
00:26:05,039 --> 00:26:07,520
going to this server to to the other

816
00:26:07,520 --> 00:26:09,520
existing servers but what happened is i

817
00:26:09,520 --> 00:26:11,440
got a lot of angry user complaints

818
00:26:11,440 --> 00:26:13,919
because people just said hey my my

819
00:26:13,919 --> 00:26:15,520
conference number's working but all my

820
00:26:15,520 --> 00:26:17,440
custom voice prompts are gone and what

821
00:26:17,440 --> 00:26:19,039
ended up happening after i did some

822
00:26:19,039 --> 00:26:20,480
debugging is i realized well when this

823
00:26:20,480 --> 00:26:22,320
server went down the custom voice

824
00:26:22,320 --> 00:26:24,559
prompts that were on this server

825
00:26:24,559 --> 00:26:26,880
were were not on these servers and so

826
00:26:26,880 --> 00:26:28,559
this this wasn't really a stateless

827
00:26:28,559 --> 00:26:30,720
process you know like this was a very

828
00:26:30,720 --> 00:26:33,039
stateful process because each of the

829
00:26:33,039 --> 00:26:34,559
instances of this conference calling

830
00:26:34,559 --> 00:26:37,039
application essentially was very

831
00:26:37,039 --> 00:26:38,960
stateful and it was bound to a physical

832
00:26:38,960 --> 00:26:40,720
server and so

833
00:26:40,720 --> 00:26:43,200
this is not something you want to do

834
00:26:43,200 --> 00:26:44,480
now

835
00:26:44,480 --> 00:26:46,400
let's talk about port binding real fast

836
00:26:46,400 --> 00:26:48,480
i was just told by one of the hosts by

837
00:26:48,480 --> 00:26:50,000
the way that i am allowed to go over

838
00:26:50,000 --> 00:26:52,400
because there is a break so i apologize

839
00:26:52,400 --> 00:26:54,480
but you know what this is zoom or it is

840
00:26:54,480 --> 00:26:56,640
virtual excuse me and so you could

841
00:26:56,640 --> 00:26:58,159
always just take a break and watch this

842
00:26:58,159 --> 00:27:00,559
if you want um

843
00:27:00,559 --> 00:27:03,200
now moving on poor binding so the 12

844
00:27:03,200 --> 00:27:04,799
factor app states you always want to

845
00:27:04,799 --> 00:27:06,640
expose services you're building web

846
00:27:06,640 --> 00:27:09,200
services via port binding now this isn't

847
00:27:09,200 --> 00:27:10,880
as relevant today because things have

848
00:27:10,880 --> 00:27:12,559
changed so much and you know people are

849
00:27:12,559 --> 00:27:14,400
using a lot fancier systems that this is

850
00:27:14,400 --> 00:27:16,159
sort of like dated information but

851
00:27:16,159 --> 00:27:18,159
regardless i think it still rings true

852
00:27:18,159 --> 00:27:19,360
especially if you're talking about

853
00:27:19,360 --> 00:27:21,520
deploying things in a manual way

854
00:27:21,520 --> 00:27:22,559
now

855
00:27:22,559 --> 00:27:23,919
you know back in the day when people

856
00:27:23,919 --> 00:27:25,440
build web applications they would bind

857
00:27:25,440 --> 00:27:26,880
them to port 80

858
00:27:26,880 --> 00:27:29,440
or port 443 things like this to have you

859
00:27:29,440 --> 00:27:31,200
know tls

860
00:27:31,200 --> 00:27:32,720
but this is just a really bad thing to

861
00:27:32,720 --> 00:27:34,480
do essentially what the 12 factor app

862
00:27:34,480 --> 00:27:35,679
states is that when you're doing things

863
00:27:35,679 --> 00:27:37,200
this way you're shackling yourself to a

864
00:27:37,200 --> 00:27:39,440
very particular port and instead you

865
00:27:39,440 --> 00:27:41,120
really want to let your routing layer of

866
00:27:41,120 --> 00:27:42,320
your application whether that's your

867
00:27:42,320 --> 00:27:44,640
elastic load balancer or like you know

868
00:27:44,640 --> 00:27:46,320
your kubernetes your kubernetes cluster

869
00:27:46,320 --> 00:27:47,679
that's managing things you really want

870
00:27:47,679 --> 00:27:49,279
that to be able to assign your

871
00:27:49,279 --> 00:27:51,279
application ports for you dynamically

872
00:27:51,279 --> 00:27:53,279
this way you can run as many instances

873
00:27:53,279 --> 00:27:55,360
of these applications as you need to in

874
00:27:55,360 --> 00:27:59,120
order to scale things up horizontally

875
00:27:59,120 --> 00:28:00,840
next concurrency

876
00:28:00,840 --> 00:28:03,279
so the 12 factor app states that you

877
00:28:03,279 --> 00:28:05,120
always want to allow your application to

878
00:28:05,120 --> 00:28:07,760
scale via the process model so what does

879
00:28:07,760 --> 00:28:08,720
this mean

880
00:28:08,720 --> 00:28:11,360
well imagine you have a web application

881
00:28:11,360 --> 00:28:12,960
and you have a couple different

882
00:28:12,960 --> 00:28:14,799
instances of your web server so you have

883
00:28:14,799 --> 00:28:16,960
web one and web two these are two web

884
00:28:16,960 --> 00:28:18,960
applications two web processes if you

885
00:28:18,960 --> 00:28:21,440
will that are both receiving incoming

886
00:28:21,440 --> 00:28:23,919
requests via a load balancer

887
00:28:23,919 --> 00:28:24,640
now

888
00:28:24,640 --> 00:28:26,240
you also might have different types of

889
00:28:26,240 --> 00:28:27,760
processes so maybe you have a web

890
00:28:27,760 --> 00:28:29,600
application process but you also have

891
00:28:29,600 --> 00:28:31,120
worker applications running behind the

892
00:28:31,120 --> 00:28:32,640
scenes and you should be able to

893
00:28:32,640 --> 00:28:34,320
dynamically add and remove these

894
00:28:34,320 --> 00:28:36,080
processes in order to scale your

895
00:28:36,080 --> 00:28:37,840
application as needed

896
00:28:37,840 --> 00:28:38,960
you might also have other types of

897
00:28:38,960 --> 00:28:40,799
processes etc but you get the idea right

898
00:28:40,799 --> 00:28:42,240
you should be able to dynamically just

899
00:28:42,240 --> 00:28:43,600
add more things when you need more

900
00:28:43,600 --> 00:28:45,679
capacity and remove things when you need

901
00:28:45,679 --> 00:28:47,600
less capacity

902
00:28:47,600 --> 00:28:48,880
now

903
00:28:48,880 --> 00:28:51,279
my story here goes way way way back like

904
00:28:51,279 --> 00:28:53,039
one of the first big projects i ever

905
00:28:53,039 --> 00:28:55,039
built as a kid was i built my

906
00:28:55,039 --> 00:28:57,120
like i thought it was super cool by the

907
00:28:57,120 --> 00:28:58,640
way i thought this application was like

908
00:28:58,640 --> 00:29:01,440
super next level at the time but i used

909
00:29:01,440 --> 00:29:03,760
to go on irc all the time that's how i

910
00:29:03,760 --> 00:29:05,039
met friends and learned about

911
00:29:05,039 --> 00:29:07,520
programming and things and i built an

912
00:29:07,520 --> 00:29:09,760
irc web application that would let you

913
00:29:09,760 --> 00:29:11,840
just join irc from a browser and

914
00:29:11,840 --> 00:29:13,840
interact with people in the chat rooms

915
00:29:13,840 --> 00:29:16,159
and at the time like i don't think this

916
00:29:16,159 --> 00:29:18,240
had been done

917
00:29:18,240 --> 00:29:19,760
i might be wrong but this was like a

918
00:29:19,760 --> 00:29:21,360
really long time ago and i thought it

919
00:29:21,360 --> 00:29:22,559
was like

920
00:29:22,559 --> 00:29:24,320
super amazing so i built this

921
00:29:24,320 --> 00:29:26,159
application i showed it i share shared

922
00:29:26,159 --> 00:29:27,600
it with some of my friends on irc and

923
00:29:27,600 --> 00:29:30,000
people really liked it and so i decided

924
00:29:30,000 --> 00:29:31,679
i was going to scale this thing up turn

925
00:29:31,679 --> 00:29:33,200
it into like a proper business and just

926
00:29:33,200 --> 00:29:34,399
like you know

927
00:29:34,399 --> 00:29:36,320
be like the next you know internet

928
00:29:36,320 --> 00:29:38,640
celebrity basically but um

929
00:29:38,640 --> 00:29:41,039
the way this application worked was the

930
00:29:41,039 --> 00:29:43,039
web app would literally allow you to

931
00:29:43,039 --> 00:29:46,720
join different irc rooms and though i uh

932
00:29:46,720 --> 00:29:48,559
in order to scale this thing i was

933
00:29:48,559 --> 00:29:50,080
writing this entire thing in c by the

934
00:29:50,080 --> 00:29:50,799
way

935
00:29:50,799 --> 00:29:52,480
um i decided to run the entire

936
00:29:52,480 --> 00:29:54,960
application as a linux system demon and

937
00:29:54,960 --> 00:29:57,120
so it would basically run this massive

938
00:29:57,120 --> 00:29:58,880
master process that the operating system

939
00:29:58,880 --> 00:30:01,279
would boot up and it would fork itself

940
00:30:01,279 --> 00:30:03,600
off into a bunch of child processes one

941
00:30:03,600 --> 00:30:06,080
for each irc chat room that people would

942
00:30:06,080 --> 00:30:07,039
join

943
00:30:07,039 --> 00:30:08,720
this worked pretty well but as i got a

944
00:30:08,720 --> 00:30:10,159
few of my friends using the service i

945
00:30:10,159 --> 00:30:11,840
noticed that like over time what would

946
00:30:11,840 --> 00:30:13,600
happen is one of the processes would

947
00:30:13,600 --> 00:30:16,080
eventually die for whatever reason

948
00:30:16,080 --> 00:30:17,600
and then that would cascade and that

949
00:30:17,600 --> 00:30:19,360
failure would eventually kill the demon

950
00:30:19,360 --> 00:30:21,600
which would then restart all the entire

951
00:30:21,600 --> 00:30:23,520
process and so therefore all of the

952
00:30:23,520 --> 00:30:25,919
child processes would die and that would

953
00:30:25,919 --> 00:30:28,720
therefore disconnect people from irc and

954
00:30:28,720 --> 00:30:30,000
you know kick them off the network so

955
00:30:30,000 --> 00:30:31,840
they'd lose some chat history before

956
00:30:31,840 --> 00:30:33,520
eventually reconnecting and so it's a

957
00:30:33,520 --> 00:30:34,799
huge pain

958
00:30:34,799 --> 00:30:35,600
now

959
00:30:35,600 --> 00:30:37,440
i worked on this application a lot like

960
00:30:37,440 --> 00:30:38,480
i put

961
00:30:38,480 --> 00:30:40,480
you know hundreds maybe maybe even a

962
00:30:40,480 --> 00:30:42,399
thousand plus hours into this thing and

963
00:30:42,399 --> 00:30:44,320
i was never able to completely solve

964
00:30:44,320 --> 00:30:46,080
these problems and that's because doing

965
00:30:46,080 --> 00:30:48,000
inter-process communication in c is

966
00:30:48,000 --> 00:30:49,360
really hard especially if you're like

967
00:30:49,360 --> 00:30:51,200
you know a 13 year old kid and you're

968
00:30:51,200 --> 00:30:54,080
not that knowledgeable but regardless i

969
00:30:54,080 --> 00:30:55,600
think that if i had known about the 12

970
00:30:55,600 --> 00:30:57,519
factor app back then and i could you

971
00:30:57,519 --> 00:30:59,200
know better think through this in my

972
00:30:59,200 --> 00:31:01,120
mind what i would have said to myself is

973
00:31:01,120 --> 00:31:03,279
hey instead of building this one massive

974
00:31:03,279 --> 00:31:05,600
application demon that is doing its own

975
00:31:05,600 --> 00:31:07,360
you know multi-processing and all this

976
00:31:07,360 --> 00:31:10,320
work why not just have each process be

977
00:31:10,320 --> 00:31:13,200
its own stateless small contained thing

978
00:31:13,200 --> 00:31:15,279
and why don't i just make a way for it

979
00:31:15,279 --> 00:31:17,120
to you know for me to be able to add

980
00:31:17,120 --> 00:31:19,600
processes horizontally and not have this

981
00:31:19,600 --> 00:31:21,440
one amalgamation that's sort of doing

982
00:31:21,440 --> 00:31:22,960
everything i think that would have

983
00:31:22,960 --> 00:31:24,559
dramatically simplified the types of

984
00:31:24,559 --> 00:31:27,200
problems i was solving and maybe today i

985
00:31:27,200 --> 00:31:28,880
would have a really cool you know

986
00:31:28,880 --> 00:31:31,440
business or story about a successful irc

987
00:31:31,440 --> 00:31:32,880
web application is that one that just

988
00:31:32,880 --> 00:31:33,840
sort of

989
00:31:33,840 --> 00:31:35,679
you know failed and sort of fell into

990
00:31:35,679 --> 00:31:38,159
obscurity

991
00:31:38,159 --> 00:31:40,000
so next the ninth factor in the 12

992
00:31:40,000 --> 00:31:41,760
factory app we're almost there is about

993
00:31:41,760 --> 00:31:44,080
disposability and the rule here is that

994
00:31:44,080 --> 00:31:46,000
you want to maximize the robustness of

995
00:31:46,000 --> 00:31:48,399
your app with fast startup and graceful

996
00:31:48,399 --> 00:31:49,679
shutdown

997
00:31:49,679 --> 00:31:50,480
so

998
00:31:50,480 --> 00:31:52,000
you always want your application to shut

999
00:31:52,000 --> 00:31:53,919
down gracefully when a sig term is

1000
00:31:53,919 --> 00:31:54,880
received

1001
00:31:54,880 --> 00:31:56,320
you also always want to shut down within

1002
00:31:56,320 --> 00:31:57,760
a few seconds you don't want to let

1003
00:31:57,760 --> 00:32:00,159
things linger and finally you want to be

1004
00:32:00,159 --> 00:32:02,000
really robust against sudden death so

1005
00:32:02,000 --> 00:32:03,600
even if your application is killed with

1006
00:32:03,600 --> 00:32:05,200
no warning whatsoever you know like kill

1007
00:32:05,200 --> 00:32:07,679
dash 9 it should still you know be able

1008
00:32:07,679 --> 00:32:10,000
to spin back up and handle whatever

1009
00:32:10,000 --> 00:32:11,440
things it was in the

1010
00:32:11,440 --> 00:32:12,960
in the middle of doing without causing

1011
00:32:12,960 --> 00:32:15,279
any sort of weird side effects

1012
00:32:15,279 --> 00:32:17,120
now going back to that free conference

1013
00:32:17,120 --> 00:32:19,600
calling app i told you about earlier um

1014
00:32:19,600 --> 00:32:21,120
this at this point in time i was

1015
00:32:21,120 --> 00:32:22,640
starting to scale it up and things were

1016
00:32:22,640 --> 00:32:24,640
getting a little more successful and so

1017
00:32:24,640 --> 00:32:26,159
we had requests coming into a load

1018
00:32:26,159 --> 00:32:28,880
balancer the load balancer was basically

1019
00:32:28,880 --> 00:32:30,480
dynamically scaling up and adding

1020
00:32:30,480 --> 00:32:32,799
various processes to essentially handle

1021
00:32:32,799 --> 00:32:34,320
more and more calls as they would come

1022
00:32:34,320 --> 00:32:36,320
in through different times of the day

1023
00:32:36,320 --> 00:32:37,840
but i was running into issues with my

1024
00:32:37,840 --> 00:32:40,000
auto scaling code because as i would add

1025
00:32:40,000 --> 00:32:41,600
new processes

1026
00:32:41,600 --> 00:32:43,279
i would realize that like i would start

1027
00:32:43,279 --> 00:32:45,120
them up and then after about 30 seconds

1028
00:32:45,120 --> 00:32:47,200
or so they would they would like fail

1029
00:32:47,200 --> 00:32:49,039
and then just restart indefinitely in an

1030
00:32:49,039 --> 00:32:50,480
indefinite loop

1031
00:32:50,480 --> 00:32:52,799
and as i was debugging this auto scaling

1032
00:32:52,799 --> 00:32:54,480
software that i'd written

1033
00:32:54,480 --> 00:32:55,600
it actually took me quite a while to

1034
00:32:55,600 --> 00:32:57,200
figure this out eventually what i

1035
00:32:57,200 --> 00:32:58,799
learned is that and by the way this is

1036
00:32:58,799 --> 00:33:00,880
all written in python um and this is

1037
00:33:00,880 --> 00:33:03,039
like pretty accurate like this is pseudo

1038
00:33:03,039 --> 00:33:04,399
code but it's pretty accurate to what i

1039
00:33:04,399 --> 00:33:06,640
remember the actual code was like but

1040
00:33:06,640 --> 00:33:08,399
essentially what i realized the issue

1041
00:33:08,399 --> 00:33:10,640
was is i had the startup routine and so

1042
00:33:10,640 --> 00:33:12,240
the process would start up and the first

1043
00:33:12,240 --> 00:33:14,480
thing it would do is run this download

1044
00:33:14,480 --> 00:33:16,000
audio function and this would

1045
00:33:16,000 --> 00:33:17,840
essentially go off to like a rackspace

1046
00:33:17,840 --> 00:33:20,559
file server and download all of the mp3

1047
00:33:20,559 --> 00:33:22,320
files for all the custom audio prompt

1048
00:33:22,320 --> 00:33:24,399
recordings for all of the conference

1049
00:33:24,399 --> 00:33:26,000
lines assigned to this particular

1050
00:33:26,000 --> 00:33:26,960
process

1051
00:33:26,960 --> 00:33:28,159
and once those things had been

1052
00:33:28,159 --> 00:33:29,840
downloaded it would then bind itself to

1053
00:33:29,840 --> 00:33:31,679
the appropriate port everything will be

1054
00:33:31,679 --> 00:33:32,960
running and

1055
00:33:32,960 --> 00:33:35,039
the the process would start accepting

1056
00:33:35,039 --> 00:33:38,399
new incoming calls and so this this like

1057
00:33:38,399 --> 00:33:40,399
worked okay in test environments but

1058
00:33:40,399 --> 00:33:42,320
when i ran it in the real world it would

1059
00:33:42,320 --> 00:33:44,799
cause this behavior here well what i

1060
00:33:44,799 --> 00:33:46,480
later came to realize is that this was

1061
00:33:46,480 --> 00:33:48,320
actually the issue

1062
00:33:48,320 --> 00:33:50,080
running the download audio thing when

1063
00:33:50,080 --> 00:33:51,600
the process started up was causing

1064
00:33:51,600 --> 00:33:53,120
problems because

1065
00:33:53,120 --> 00:33:54,720
when my auto scaling software would boot

1066
00:33:54,720 --> 00:33:56,480
up one of these sub processes it would

1067
00:33:56,480 --> 00:33:57,840
then go and attempt to download

1068
00:33:57,840 --> 00:33:59,200
something like you know

1069
00:33:59,200 --> 00:34:01,679
700 gigabytes of audio files and that

1070
00:34:01,679 --> 00:34:03,600
takes a lot more than 30 seconds to

1071
00:34:03,600 --> 00:34:06,799
finish and so what would happen is

1072
00:34:06,799 --> 00:34:08,719
i would download every audio file not

1073
00:34:08,719 --> 00:34:10,079
just the ones for the particular

1074
00:34:10,079 --> 00:34:12,159
conference numbers i needed to and so

1075
00:34:12,159 --> 00:34:14,159
therefore this process would take longer

1076
00:34:14,159 --> 00:34:16,399
than 30 seconds to complete the process

1077
00:34:16,399 --> 00:34:17,839
would never actually bind itself to the

1078
00:34:17,839 --> 00:34:20,480
port and so the the auto scaler thought

1079
00:34:20,480 --> 00:34:21,918
that because it never bound itself to

1080
00:34:21,918 --> 00:34:23,839
the port the process had failed and so

1081
00:34:23,839 --> 00:34:25,760
it would kill and restart it

1082
00:34:25,760 --> 00:34:26,719
now

1083
00:34:26,719 --> 00:34:28,320
this goes back to those 12-factor

1084
00:34:28,320 --> 00:34:30,000
application principles because had i

1085
00:34:30,000 --> 00:34:31,679
sort of followed those rules about

1086
00:34:31,679 --> 00:34:33,599
having a really fast startup time you

1087
00:34:33,599 --> 00:34:36,480
know really fast or be being able to

1088
00:34:36,480 --> 00:34:38,719
recover from like you know shutdowns in

1089
00:34:38,719 --> 00:34:41,040
a graceful way this this wouldn't have

1090
00:34:41,040 --> 00:34:42,719
been an issue and i wouldn't have had to

1091
00:34:42,719 --> 00:34:45,040
do all this debugging so just a reminder

1092
00:34:45,040 --> 00:34:46,800
that like these things do make a huge

1093
00:34:46,800 --> 00:34:48,079
difference in the real world and it's

1094
00:34:48,079 --> 00:34:51,280
great to keep them in the back your mind

1095
00:34:51,280 --> 00:34:53,359
all right next dev prod parody so you

1096
00:34:53,359 --> 00:34:54,719
always want to keep your development

1097
00:34:54,719 --> 00:34:56,480
staging and production environments as

1098
00:34:56,480 --> 00:34:58,320
similar as possible this one's super

1099
00:34:58,320 --> 00:34:59,359
important

1100
00:34:59,359 --> 00:35:01,440
um this is something i've done by the

1101
00:35:01,440 --> 00:35:02,720
way i'd like to admit that i've learned

1102
00:35:02,720 --> 00:35:04,720
this lesson but i i literally do this

1103
00:35:04,720 --> 00:35:07,359
all the time because it is so convenient

1104
00:35:07,359 --> 00:35:09,680
and it's sort of you know i don't know i

1105
00:35:09,680 --> 00:35:12,079
i'm a bad person i guess but basically

1106
00:35:12,079 --> 00:35:13,440
let's say i have some code running in

1107
00:35:13,440 --> 00:35:14,720
production

1108
00:35:14,720 --> 00:35:16,160
and that code is being deployed to

1109
00:35:16,160 --> 00:35:17,839
postgres in the real world i love

1110
00:35:17,839 --> 00:35:20,320
postgres awesome database well a lot of

1111
00:35:20,320 --> 00:35:21,839
the times when i'm working on things in

1112
00:35:21,839 --> 00:35:23,760
development instead of using postgres

1113
00:35:23,760 --> 00:35:25,359
i'll use like a sql lite database

1114
00:35:25,359 --> 00:35:26,880
instead that way i don't need to

1115
00:35:26,880 --> 00:35:28,800
actually run a postgres process or have

1116
00:35:28,800 --> 00:35:30,160
a fancy development environment

1117
00:35:30,160 --> 00:35:32,160
somewhere remote i just literally run

1118
00:35:32,160 --> 00:35:34,560
things locally it's super fast and easy

1119
00:35:34,560 --> 00:35:36,079
but this has been me

1120
00:35:36,079 --> 00:35:38,480
way more times than i care to admit

1121
00:35:38,480 --> 00:35:40,400
because of things like database

1122
00:35:40,400 --> 00:35:42,480
compatibility issues you know

1123
00:35:42,480 --> 00:35:44,640
like for example uh did you know that if

1124
00:35:44,640 --> 00:35:46,880
you're using sql lite and you define a

1125
00:35:46,880 --> 00:35:48,560
var char and you give it like a

1126
00:35:48,560 --> 00:35:50,480
particular length that sql light

1127
00:35:50,480 --> 00:35:52,640
actually completely ignores it and will

1128
00:35:52,640 --> 00:35:55,359
allow you to store any length of uh of

1129
00:35:55,359 --> 00:35:58,240
varchar inside of that that item and so

1130
00:35:58,240 --> 00:36:00,000
that becomes an issue because maybe

1131
00:36:00,000 --> 00:36:01,359
something in your test environment when

1132
00:36:01,359 --> 00:36:03,599
you test with sql lite that works when

1133
00:36:03,599 --> 00:36:06,000
you go to production will break and this

1134
00:36:06,000 --> 00:36:08,079
exact thing has literally happened to me

1135
00:36:08,079 --> 00:36:09,599
a handful of times just from the ones

1136
00:36:09,599 --> 00:36:12,079
that i can remember and you know like i

1137
00:36:12,079 --> 00:36:13,839
said i still do this today so i'm

1138
00:36:13,839 --> 00:36:15,920
embarrassed to admit but

1139
00:36:15,920 --> 00:36:18,160
if i were the type of person that really

1140
00:36:18,160 --> 00:36:20,320
wanted to do this properly um what i

1141
00:36:20,320 --> 00:36:21,680
would do is make sure that my

1142
00:36:21,680 --> 00:36:23,119
development and production environments

1143
00:36:23,119 --> 00:36:24,960
were basically identical you know like

1144
00:36:24,960 --> 00:36:26,880
if you're using postgres in production

1145
00:36:26,880 --> 00:36:28,560
use it in development too you know make

1146
00:36:28,560 --> 00:36:30,160
sure you have things as similar as

1147
00:36:30,160 --> 00:36:32,000
possible to the real world scenario that

1148
00:36:32,000 --> 00:36:33,599
way you minimize the risk of stupid

1149
00:36:33,599 --> 00:36:36,560
things like this happening to you

1150
00:36:36,560 --> 00:36:38,000
all right next logs

1151
00:36:38,000 --> 00:36:39,520
you always want to treat logs as event

1152
00:36:39,520 --> 00:36:40,720
streams

1153
00:36:40,720 --> 00:36:42,720
so imagine you have an application that

1154
00:36:42,720 --> 00:36:45,680
generates a bunch of logs well the rules

1155
00:36:45,680 --> 00:36:47,599
are a you always want to store your logs

1156
00:36:47,599 --> 00:36:50,079
ordered by timestamp b you always want

1157
00:36:50,079 --> 00:36:52,079
to write your logs to standard output

1158
00:36:52,079 --> 00:36:55,119
and c you want your logs to consist of

1159
00:36:55,119 --> 00:36:57,520
all of your process and backing services

1160
00:36:57,520 --> 00:36:59,440
that way if anything ever happens you

1161
00:36:59,440 --> 00:37:02,320
can always go in and reconstruct log

1162
00:37:02,320 --> 00:37:04,400
log based information to figure out what

1163
00:37:04,400 --> 00:37:06,800
essentially what went wrong right

1164
00:37:06,800 --> 00:37:08,960
now again this all makes tons of sense

1165
00:37:08,960 --> 00:37:09,920
now

1166
00:37:09,920 --> 00:37:11,359
this one in particular something i

1167
00:37:11,359 --> 00:37:12,800
screwed up that actually cost me a lot

1168
00:37:12,800 --> 00:37:14,880
of money so pay close attention

1169
00:37:14,880 --> 00:37:16,320
um that

1170
00:37:16,320 --> 00:37:17,760
that free conference calling app i told

1171
00:37:17,760 --> 00:37:19,599
you about before i sort of previously

1172
00:37:19,599 --> 00:37:22,160
described the telco infrastructure now

1173
00:37:22,160 --> 00:37:24,160
i'm going to describe the web

1174
00:37:24,160 --> 00:37:26,480
application side of it so i had this web

1175
00:37:26,480 --> 00:37:28,640
app that people could go to to get one

1176
00:37:28,640 --> 00:37:30,400
of these free conference calling numbers

1177
00:37:30,400 --> 00:37:32,160
set it up record voice prompts and do

1178
00:37:32,160 --> 00:37:33,359
all this stuff

1179
00:37:33,359 --> 00:37:35,359
and that web app talked to an api server

1180
00:37:35,359 --> 00:37:37,359
i had it was built in python

1181
00:37:37,359 --> 00:37:39,280
and all of my astra servers which were

1182
00:37:39,280 --> 00:37:41,280
running in an actual data center

1183
00:37:41,280 --> 00:37:42,640
whenever a call would come in

1184
00:37:42,640 --> 00:37:44,880
essentially they would then send you

1185
00:37:44,880 --> 00:37:47,440
know an api request to the api server

1186
00:37:47,440 --> 00:37:50,079
the api server would basically like

1187
00:37:50,079 --> 00:37:52,560
write an entry into a literal csv file

1188
00:37:52,560 --> 00:37:55,520
called calls.csv and that csv file would

1189
00:37:55,520 --> 00:37:58,000
essentially have like the phone number

1190
00:37:58,000 --> 00:37:59,359
that called

1191
00:37:59,359 --> 00:38:00,960
and then the number it was calling to

1192
00:38:00,960 --> 00:38:02,800
like which conference number called to

1193
00:38:02,800 --> 00:38:04,560
and then the duration like the start and

1194
00:38:04,560 --> 00:38:06,240
stop time of the call and then a bunch

1195
00:38:06,240 --> 00:38:08,480
of other metadata but those were really

1196
00:38:08,480 --> 00:38:10,480
important pieces of information because

1197
00:38:10,480 --> 00:38:12,320
this information is what we used at our

1198
00:38:12,320 --> 00:38:16,000
company to get paid so what i would do

1199
00:38:16,000 --> 00:38:17,200
is at the end of the month i would

1200
00:38:17,200 --> 00:38:19,520
literally run an scp command and i would

1201
00:38:19,520 --> 00:38:21,920
essentially copy this massive calls.csv

1202
00:38:21,920 --> 00:38:24,560
file from the root of this api server

1203
00:38:24,560 --> 00:38:27,520
onto my my my local laptop then i would

1204
00:38:27,520 --> 00:38:29,280
send it to the telco they would

1205
00:38:29,280 --> 00:38:31,200
literally add up all the billable

1206
00:38:31,200 --> 00:38:32,960
minutes and then pay us a certain amount

1207
00:38:32,960 --> 00:38:34,560
of money for how many billable minutes

1208
00:38:34,560 --> 00:38:36,800
we we used on the service and so that's

1209
00:38:36,800 --> 00:38:38,800
literally how we got paid

1210
00:38:38,800 --> 00:38:39,599
now

1211
00:38:39,599 --> 00:38:42,960
one day i was doing this and i

1212
00:38:42,960 --> 00:38:44,640
i noticed something was wrong right away

1213
00:38:44,640 --> 00:38:46,400
i ran this command i was trying to check

1214
00:38:46,400 --> 00:38:47,680
to see it was about halfway through the

1215
00:38:47,680 --> 00:38:49,520
month i was trying to check to see where

1216
00:38:49,520 --> 00:38:50,800
we were at and what our business

1217
00:38:50,800 --> 00:38:52,800
projections were going to look like

1218
00:38:52,800 --> 00:38:55,839
and the the command completed super fast

1219
00:38:55,839 --> 00:38:57,760
and i was like that is so weird this

1220
00:38:57,760 --> 00:38:59,359
always takes forever and so i was

1221
00:38:59,359 --> 00:39:01,280
looking into it and i was looking into

1222
00:39:01,280 --> 00:39:03,599
what i did and i realized oh my god i

1223
00:39:03,599 --> 00:39:05,359
ran the the scp command the same one i

1224
00:39:05,359 --> 00:39:07,680
always do except i reverse the arguments

1225
00:39:07,680 --> 00:39:10,320
i put scp dot

1226
00:39:10,320 --> 00:39:12,640
root at you know

1227
00:39:12,640 --> 00:39:14,880
ipaddress calls.csv so what i had done

1228
00:39:14,880 --> 00:39:17,280
is i had copied the the empty version of

1229
00:39:17,280 --> 00:39:20,320
the calls.csv file from my local laptop

1230
00:39:20,320 --> 00:39:21,119
over

1231
00:39:21,119 --> 00:39:23,280
onto the production server completely

1232
00:39:23,280 --> 00:39:25,760
overwriting the original calls.csv file

1233
00:39:25,760 --> 00:39:27,359
that contained the accurate count of our

1234
00:39:27,359 --> 00:39:29,200
billable minutes for the month

1235
00:39:29,200 --> 00:39:31,439
now

1236
00:39:31,599 --> 00:39:32,960
what i should have been doing at the

1237
00:39:32,960 --> 00:39:33,920
time

1238
00:39:33,920 --> 00:39:35,839
which i was not doing is i should have

1239
00:39:35,839 --> 00:39:37,520
been taking the logs from each of these

1240
00:39:37,520 --> 00:39:39,520
independent services and dumping them

1241
00:39:39,520 --> 00:39:41,280
all into some sort of log router you

1242
00:39:41,280 --> 00:39:42,480
know it could have been into a service

1243
00:39:42,480 --> 00:39:44,640
like sumo logic or logley or literally

1244
00:39:44,640 --> 00:39:47,440
you know log dna anything that this way

1245
00:39:47,440 --> 00:39:49,119
i could have gone in and actually taken

1246
00:39:49,119 --> 00:39:51,280
a look and reconstructed these calls

1247
00:39:51,280 --> 00:39:53,280
unfortunately i did not do that

1248
00:39:53,280 --> 00:39:55,280
um i specifically disabled logging and

1249
00:39:55,280 --> 00:39:56,960
only use this system the reason why is

1250
00:39:56,960 --> 00:39:58,720
because when i first built this i

1251
00:39:58,720 --> 00:40:00,079
started running out of disk space on

1252
00:40:00,079 --> 00:40:01,200
these servers here because they were

1253
00:40:01,200 --> 00:40:03,520
generating so many logs and so i thought

1254
00:40:03,520 --> 00:40:05,280
i don't need them screw them and so i

1255
00:40:05,280 --> 00:40:06,880
completely disable them

1256
00:40:06,880 --> 00:40:07,680
but

1257
00:40:07,680 --> 00:40:08,960
the

1258
00:40:08,960 --> 00:40:11,119
the the end thing is that this cost me a

1259
00:40:11,119 --> 00:40:12,800
lot of money because we completely lost

1260
00:40:12,800 --> 00:40:14,400
a count of all of our calls for about

1261
00:40:14,400 --> 00:40:16,720
half a month and that was you know

1262
00:40:16,720 --> 00:40:18,240
hundreds of thousands of dollars at the

1263
00:40:18,240 --> 00:40:19,040
time

1264
00:40:19,040 --> 00:40:19,839
so

1265
00:40:19,839 --> 00:40:21,680
yeah this is a real world example of how

1266
00:40:21,680 --> 00:40:23,680
logging can actually uh be detrimental

1267
00:40:23,680 --> 00:40:26,400
to you if you don't do it sometimes

1268
00:40:26,400 --> 00:40:27,520
so

1269
00:40:27,520 --> 00:40:30,160
final factor is admin processes you

1270
00:40:30,160 --> 00:40:30,880
always

1271
00:40:30,880 --> 00:40:32,720
want to run your admin and management

1272
00:40:32,720 --> 00:40:34,640
tasks as one-off processes so what does

1273
00:40:34,640 --> 00:40:35,839
this mean

1274
00:40:35,839 --> 00:40:37,839
well this is a real world thing i did so

1275
00:40:37,839 --> 00:40:40,240
i had to run a database migration on an

1276
00:40:40,240 --> 00:40:42,400
application and this was really simple

1277
00:40:42,400 --> 00:40:44,640
basically all i had to do was i was

1278
00:40:44,640 --> 00:40:46,319
modifying a database schema and all i

1279
00:40:46,319 --> 00:40:47,760
really had to do was run the command

1280
00:40:47,760 --> 00:40:51,040
python manage.pi migrate and this would

1281
00:40:51,040 --> 00:40:53,599
basically take my my database migration

1282
00:40:53,599 --> 00:40:55,280
code executed against the database and

1283
00:40:55,280 --> 00:40:56,880
things would work just fine

1284
00:40:56,880 --> 00:40:57,920
now

1285
00:40:57,920 --> 00:40:59,599
ideally if you want to do this what you

1286
00:40:59,599 --> 00:41:01,200
do is you would code this into like a

1287
00:41:01,200 --> 00:41:03,680
task you deploy that task to your

1288
00:41:03,680 --> 00:41:05,440
infrastructure somewhere to on in

1289
00:41:05,440 --> 00:41:07,440
production then you would fire off some

1290
00:41:07,440 --> 00:41:09,520
production task to actually make this

1291
00:41:09,520 --> 00:41:10,319
work

1292
00:41:10,319 --> 00:41:12,480
what i did instead was this so i was

1293
00:41:12,480 --> 00:41:14,480
working on a new feature one night

1294
00:41:14,480 --> 00:41:17,200
um and i you know had to alter the table

1295
00:41:17,200 --> 00:41:19,440
to add a new column to make this feature

1296
00:41:19,440 --> 00:41:22,560
work and so i wrote all my code i wrote

1297
00:41:22,560 --> 00:41:24,240
some database migration code and i was

1298
00:41:24,240 --> 00:41:25,520
ready to deploy this thing and get it

1299
00:41:25,520 --> 00:41:26,800
running

1300
00:41:26,800 --> 00:41:28,480
and i basically said to myself well you

1301
00:41:28,480 --> 00:41:30,000
know i only need to do this once and i

1302
00:41:30,000 --> 00:41:31,119
sort of want to get out of the office

1303
00:41:31,119 --> 00:41:33,040
like i've been here all day so i'm just

1304
00:41:33,040 --> 00:41:34,560
going to go ahead and do the database

1305
00:41:34,560 --> 00:41:36,720
migration from my laptop instead of

1306
00:41:36,720 --> 00:41:38,560
deploying it like i said into a separate

1307
00:41:38,560 --> 00:41:40,079
code task and like having it run in

1308
00:41:40,079 --> 00:41:42,079
production all that stuff

1309
00:41:42,079 --> 00:41:43,599
and so on my laptop i literally just ran

1310
00:41:43,599 --> 00:41:45,520
python manage.pi migrate

1311
00:41:45,520 --> 00:41:47,280
the database migration was executed

1312
00:41:47,280 --> 00:41:49,200
successfully and i hit deploy the

1313
00:41:49,200 --> 00:41:50,640
production let's get the new feature out

1314
00:41:50,640 --> 00:41:51,520
there

1315
00:41:51,520 --> 00:41:54,560
so i do this and deploy the feature and

1316
00:41:54,560 --> 00:41:55,440
uh

1317
00:41:55,440 --> 00:41:57,200
you know i start immediately getting

1318
00:41:57,200 --> 00:41:59,680
calls from my boss and he was saying hey

1319
00:41:59,680 --> 00:42:00,480
um

1320
00:42:00,480 --> 00:42:03,680
the entire uh platform is down

1321
00:42:03,680 --> 00:42:06,640
and uh he was so mad he's like what what

1322
00:42:06,640 --> 00:42:08,240
were you doing

1323
00:42:08,240 --> 00:42:10,480
and so uh after doing some some

1324
00:42:10,480 --> 00:42:12,160
debugging later what i realized i did is

1325
00:42:12,160 --> 00:42:13,839
when i ran this python managed that pi

1326
00:42:13,839 --> 00:42:15,920
migrate locally i had forgotten to

1327
00:42:15,920 --> 00:42:17,280
update so i was actually doing a

1328
00:42:17,280 --> 00:42:20,240
migration on against the sqlite local

1329
00:42:20,240 --> 00:42:22,079
version of my database and not the

1330
00:42:22,079 --> 00:42:23,680
production postgres version of my

1331
00:42:23,680 --> 00:42:24,640
database

1332
00:42:24,640 --> 00:42:27,280
and so this is just another reminder why

1333
00:42:27,280 --> 00:42:29,280
you always want to keep these things

1334
00:42:29,280 --> 00:42:31,599
running even for simple management

1335
00:42:31,599 --> 00:42:33,599
administrative tasks in official

1336
00:42:33,599 --> 00:42:35,280
production infrastructure you want it

1337
00:42:35,280 --> 00:42:37,440
coded tested the whole nine yards so

1338
00:42:37,440 --> 00:42:40,160
don't be lazy like me

1339
00:42:40,160 --> 00:42:41,040
so

1340
00:42:41,040 --> 00:42:42,960
that's it those are the 12-factor

1341
00:42:42,960 --> 00:42:44,880
application principles i hope that was

1342
00:42:44,880 --> 00:42:46,400
fun um if you want to check out some

1343
00:42:46,400 --> 00:42:47,599
more of my stuff you can always check it

1344
00:42:47,599 --> 00:42:49,920
out here um ignore these things this is

1345
00:42:49,920 --> 00:42:52,400
from a while ago but my personal website

1346
00:42:52,400 --> 00:42:54,079
is rdex.com

1347
00:42:54,079 --> 00:42:55,839
i also work at sneak it's an awesome

1348
00:42:55,839 --> 00:42:57,119
company so if you want to check it out

1349
00:42:57,119 --> 00:43:00,480
please go to sneak.iosnyk.io

1350
00:43:00,480 --> 00:43:02,160
and yeah i'll be around so if you have

1351
00:43:02,160 --> 00:43:04,079
questions tweet me hit me up in the you

1352
00:43:04,079 --> 00:43:06,480
know in the devs icon chat and thank you

1353
00:43:06,480 --> 00:43:08,319
so much for the time everyone

1354
00:43:08,319 --> 00:43:09,520
adios

1355
00:43:09,520 --> 00:43:12,319
thank you so much randall it was amazing

1356
00:43:12,319 --> 00:43:14,880
people were totally totally smitten by

1357
00:43:14,880 --> 00:43:15,520
it

1358
00:43:15,520 --> 00:43:17,680
and there are questions i would like

1359
00:43:17,680 --> 00:43:19,040
simply take the question which is

1360
00:43:19,040 --> 00:43:20,400
wonderful one

1361
00:43:20,400 --> 00:43:21,920
yeah definitely thank you so much that

1362
00:43:21,920 --> 00:43:23,119
was awesome we've got some amazing

1363
00:43:23,119 --> 00:43:25,440
content people have taken a lot from it

1364
00:43:25,440 --> 00:43:27,119
and everyone's loving your slides as

1365
00:43:27,119 --> 00:43:29,119
well and i think but then i i totally

1366
00:43:29,119 --> 00:43:31,280
agree we might not get time to address

1367
00:43:31,280 --> 00:43:32,800
all the questions but there's one that i

1368
00:43:32,800 --> 00:43:34,560
particularly want to know and it's i

1369
00:43:34,560 --> 00:43:37,040
think it's come from mooney uh and it's

1370
00:43:37,040 --> 00:43:38,800
like what coat would you like on your

1371
00:43:38,800 --> 00:43:40,800
hacker hoodie

1372
00:43:40,800 --> 00:43:44,240
what code i like on my hacker hoodie

1373
00:43:44,240 --> 00:43:46,960
uh maybe like uh something like a seg

1374
00:43:46,960 --> 00:43:48,960
fault or like something like that just

1375
00:43:48,960 --> 00:43:50,480
to represent like all the things i've

1376
00:43:50,480 --> 00:43:52,079
screwed up that would actually be pretty

1377
00:43:52,079 --> 00:43:52,839
cool

1378
00:43:52,839 --> 00:43:56,640
uh but i'm also a python pythonista and

1379
00:43:56,640 --> 00:43:58,480
so also just any python code really

1380
00:43:58,480 --> 00:44:00,400
would be awesome uh i really like that

1381
00:44:00,400 --> 00:44:01,920
too a great question

1382
00:44:01,920 --> 00:44:03,599
amazing yeah so if anyone wants to

1383
00:44:03,599 --> 00:44:05,359
settle randall hoodie you know what to

1384
00:44:05,359 --> 00:44:06,720
print on it

1385
00:44:06,720 --> 00:44:08,160
i will wear it for sure if you send me

1386
00:44:08,160 --> 00:44:09,359
one

1387
00:44:09,359 --> 00:44:11,040
amazing thank you so much for that and

1388
00:44:11,040 --> 00:44:13,359
for jumping on as well i'm sure everyone

1389
00:44:13,359 --> 00:44:15,119
enjoyed and i'm glad we had those extra

1390
00:44:15,119 --> 00:44:16,400
15 minutes to actually go through it

1391
00:44:16,400 --> 00:44:18,000
because i'm i was thinking we might have

1392
00:44:18,000 --> 00:44:20,079
to have part b it's like a suspense

1393
00:44:20,079 --> 00:44:21,599
movie you've had the first half and it's

1394
00:44:21,599 --> 00:44:23,520
like what comes next so sorry for

1395
00:44:23,520 --> 00:44:25,839
running over everyone

1396
00:44:25,839 --> 00:44:28,800
no it was great it was great

1397
00:44:28,800 --> 00:44:30,960
we loved it we totally loved it well

1398
00:44:30,960 --> 00:44:32,640
thank you for having me and have a nice

1399
00:44:32,640 --> 00:44:34,640
night thank you so much thank you take

1400
00:44:34,640 --> 00:44:37,839
care good night

1401
00:44:38,210 --> 00:44:41,659
[Music]

