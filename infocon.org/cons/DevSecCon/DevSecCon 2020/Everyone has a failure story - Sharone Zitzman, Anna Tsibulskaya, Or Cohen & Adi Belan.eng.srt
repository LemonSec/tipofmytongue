1
00:00:00,160 --> 00:00:05,040
thank you for everything all right

2
00:00:09,120 --> 00:00:11,840
all right hey there folks we're going to

3
00:00:11,840 --> 00:00:14,160
get started in just a few minutes um

4
00:00:14,160 --> 00:00:16,000
we're a little bit early um but since we

5
00:00:16,000 --> 00:00:18,160
have three awesome panelists i wanted to

6
00:00:18,160 --> 00:00:20,080
be able to take as much time

7
00:00:20,080 --> 00:00:23,359
to let them share their stories um this

8
00:00:23,359 --> 00:00:24,800
first session that i'm starting off is

9
00:00:24,800 --> 00:00:26,960
going to be a session about failures

10
00:00:26,960 --> 00:00:28,960
um it's one of those things that it's

11
00:00:28,960 --> 00:00:30,000
most people don't like to talk

12
00:00:30,000 --> 00:00:32,079
about it's pretty taboo but

13
00:00:32,079 --> 00:00:33,040
organizations

14
00:00:33,040 --> 00:00:36,239
who have learned that actually

15
00:00:36,239 --> 00:00:38,239
failures are really a great opportunity

16
00:00:38,239 --> 00:00:40,239
for growth and learning like i said

17
00:00:40,239 --> 00:00:43,040
some of them do regular failure sessions

18
00:00:43,040 --> 00:00:44,559
and their team meetings

19
00:00:44,559 --> 00:00:46,399
netflix have an entire function focused

20
00:00:46,399 --> 00:00:48,079
on blameless learning from failure to

21
00:00:48,079 --> 00:00:49,680
create more resilient engineering

22
00:00:49,680 --> 00:00:50,960
organizations

23
00:00:50,960 --> 00:00:53,520
um so i think this is a really great

24
00:00:53,520 --> 00:00:54,000
session

25
00:00:54,000 --> 00:00:57,199
i think the folks that are here with me

26
00:00:57,199 --> 00:00:59,359
have a lot of mileage in the industry

27
00:00:59,359 --> 00:01:00,640
and can really help us

28
00:01:00,640 --> 00:01:02,960
understand why it's important to learn

29
00:01:02,960 --> 00:01:04,000
from failure

30
00:01:04,000 --> 00:01:06,320
how to learn from failure especially in

31
00:01:06,320 --> 00:01:07,520
a blameless way so i'm going to

32
00:01:07,520 --> 00:01:08,720
introduce them

33
00:01:08,720 --> 00:01:12,000
quickly and then we can uh go

34
00:01:12,000 --> 00:01:14,640
right into the uh the stories and then

35
00:01:14,640 --> 00:01:15,439
afterwards we'll

36
00:01:15,439 --> 00:01:18,880
have a quick q a session see uh um what

37
00:01:18,880 --> 00:01:20,960
we take away from these stories

38
00:01:20,960 --> 00:01:23,920
so we're gonna start off with anna uh

39
00:01:23,920 --> 00:01:24,479
anna

40
00:01:24,479 --> 00:01:27,360
in civil skaia is a infrastructure and

41
00:01:27,360 --> 00:01:29,119
security engineer at forder these days

42
00:01:29,119 --> 00:01:30,960
which was previously at wix

43
00:01:30,960 --> 00:01:32,880
uh as a production engineer she also has

44
00:01:32,880 --> 00:01:34,560
a super cool blog on medium about

45
00:01:34,560 --> 00:01:35,840
incident management that you'll want to

46
00:01:35,840 --> 00:01:36,720
follow

47
00:01:36,720 --> 00:01:40,159
um and anna's gonna share a story

48
00:01:40,159 --> 00:01:44,000
about an apparent uh widespread phishing

49
00:01:44,000 --> 00:01:44,960
attack and

50
00:01:44,960 --> 00:01:46,880
how they handled it at our previous

51
00:01:46,880 --> 00:01:49,439
organization

52
00:01:53,600 --> 00:01:55,839
hi

53
00:01:59,119 --> 00:02:02,960
hang on oh sorry

54
00:02:02,960 --> 00:02:05,360
how do i give you the mean screw give me

55
00:02:05,360 --> 00:02:09,840
a second

56
00:02:10,239 --> 00:02:13,680
sir hi um

57
00:02:13,680 --> 00:02:17,520
good morning good night everyone um

58
00:02:17,520 --> 00:02:20,480
so my story today is about uh what we

59
00:02:20,480 --> 00:02:22,239
thought was a phishing attempt

60
00:02:22,239 --> 00:02:25,599
but apparently it wasn't um it was a

61
00:02:25,599 --> 00:02:28,400
funny story because it started as a

62
00:02:28,400 --> 00:02:31,519
security issue uh we saw that on some of

63
00:02:31,519 --> 00:02:33,200
the websites we had

64
00:02:33,200 --> 00:02:36,560
during a loading we were showing a

65
00:02:36,560 --> 00:02:38,480
phishing image

66
00:02:38,480 --> 00:02:40,400
basically it was a very strange image

67
00:02:40,400 --> 00:02:42,400
with the different call to action

68
00:02:42,400 --> 00:02:43,440
buttons and

69
00:02:43,440 --> 00:02:45,680
if you check a source code you could see

70
00:02:45,680 --> 00:02:48,319
that it's it had link

71
00:02:48,319 --> 00:02:51,200
and of course we didn't want to show

72
00:02:51,200 --> 00:02:53,280
that image and we didn't know where it

73
00:02:53,280 --> 00:02:56,160
started to be shown uh so we said that

74
00:02:56,160 --> 00:02:56,720
we got

75
00:02:56,720 --> 00:02:59,840
tagged um

76
00:02:59,840 --> 00:03:02,640
and the issue wasn't reproducible in 100

77
00:03:02,640 --> 00:03:02,879
of

78
00:03:02,879 --> 00:03:05,680
cases and it wasn't on every website it

79
00:03:05,680 --> 00:03:07,840
was just some part of a website and then

80
00:03:07,840 --> 00:03:09,680
just few refreshes

81
00:03:09,680 --> 00:03:13,040
so we thought okay probably

82
00:03:13,040 --> 00:03:15,280
we got hacked not on all our servers but

83
00:03:15,280 --> 00:03:17,519
on some part of it

84
00:03:17,519 --> 00:03:19,840
but still it's a pretty scary situation

85
00:03:19,840 --> 00:03:21,760
when you think that

86
00:03:21,760 --> 00:03:24,080
that you're hacked so we started

87
00:03:24,080 --> 00:03:26,080
investigating an issue and

88
00:03:26,080 --> 00:03:28,239
well our security team was checking all

89
00:03:28,239 --> 00:03:29,840
the audit logs and

90
00:03:29,840 --> 00:03:33,280
um if there was some suspicious activity

91
00:03:33,280 --> 00:03:36,560
or anything like that um i started

92
00:03:36,560 --> 00:03:37,040
checking

93
00:03:37,040 --> 00:03:39,120
our business analytics and just try to

94
00:03:39,120 --> 00:03:40,159
see where the

95
00:03:40,159 --> 00:03:42,640
image came from and who uploaded it and

96
00:03:42,640 --> 00:03:43,760
where because

97
00:03:43,760 --> 00:03:46,480
we had some legit flows of users being

98
00:03:46,480 --> 00:03:48,080
able to upload pictures but

99
00:03:48,080 --> 00:03:49,840
of course we didn't want to show that

100
00:03:49,840 --> 00:03:52,799
pictures as loaders

101
00:03:52,799 --> 00:03:55,760
so what i saw was that the image was

102
00:03:55,760 --> 00:03:57,120
uploaded by a user

103
00:03:57,120 --> 00:03:59,599
and that user didn't do anything

104
00:03:59,599 --> 00:04:01,439
specific like anything

105
00:04:01,439 --> 00:04:05,040
illegal all the actions were just

106
00:04:05,040 --> 00:04:07,439
fine image was uploaded correctly

107
00:04:07,439 --> 00:04:08,560
through normal flow

108
00:04:08,560 --> 00:04:12,319
and nothing nothing serious

109
00:04:12,319 --> 00:04:14,799
and security team also didn't find

110
00:04:14,799 --> 00:04:16,160
anything

111
00:04:16,160 --> 00:04:18,079
all the vlog was clean no suspicious

112
00:04:18,079 --> 00:04:19,440
activity nothing

113
00:04:19,440 --> 00:04:21,440
at that point we realized that it's

114
00:04:21,440 --> 00:04:23,120
probably not a security issue and we

115
00:04:23,120 --> 00:04:26,639
didn't get hacked we just have a bag

116
00:04:26,639 --> 00:04:29,360
but that was even more scary because we

117
00:04:29,360 --> 00:04:31,840
had to debug it somehow

118
00:04:31,840 --> 00:04:34,240
and when you cannot reproduce the issue

119
00:04:34,240 --> 00:04:35,440
100

120
00:04:35,440 --> 00:04:38,240
and it's a very strange issue you don't

121
00:04:38,240 --> 00:04:40,400
even know how to start debugging

122
00:04:40,400 --> 00:04:44,400
uh so first idea i had was just to check

123
00:04:44,400 --> 00:04:47,440
uh change log and check all the changes

124
00:04:47,440 --> 00:04:50,479
related to that area of uh

125
00:04:50,479 --> 00:04:54,639
websites but uh only in between time

126
00:04:54,639 --> 00:04:58,160
when the picture was uploaded and

127
00:04:58,160 --> 00:05:02,000
when the picture was started showing in

128
00:05:02,000 --> 00:05:06,160
loading and apparently the changelog was

129
00:05:06,160 --> 00:05:08,560
huge

130
00:05:08,639 --> 00:05:11,199
so i said okay let's try to take a

131
00:05:11,199 --> 00:05:12,639
different approach

132
00:05:12,639 --> 00:05:15,360
um and i started thinking okay if we

133
00:05:15,360 --> 00:05:17,039
cannot reproduce it one hundred percent

134
00:05:17,039 --> 00:05:17,919
of uh

135
00:05:17,919 --> 00:05:20,960
times let's try to find

136
00:05:20,960 --> 00:05:24,160
a way to reproduce it um

137
00:05:24,160 --> 00:05:27,360
usually you just write down all the

138
00:05:27,360 --> 00:05:29,680
possible differences between cases when

139
00:05:29,680 --> 00:05:31,120
you can reproduce and you cannot

140
00:05:31,120 --> 00:05:32,080
reproduce

141
00:05:32,080 --> 00:05:34,320
and start eliminating differences just

142
00:05:34,320 --> 00:05:36,080
to try to reproduce 100

143
00:05:36,080 --> 00:05:39,919
of the times differences

144
00:05:39,919 --> 00:05:43,600
the list of differences was also huge uh

145
00:05:43,600 --> 00:05:47,039
basically it's a web application so

146
00:05:47,039 --> 00:05:50,400
everything can can be a different

147
00:05:50,400 --> 00:05:54,080
browser screen resolution a server which

148
00:05:54,080 --> 00:05:55,360
rendered the website

149
00:05:55,360 --> 00:05:58,400
and a lot of possible things but

150
00:05:58,400 --> 00:06:00,800
we took that approach so our qa team

151
00:06:00,800 --> 00:06:01,759
started that

152
00:06:01,759 --> 00:06:04,240
testing all the possible cases and this

153
00:06:04,240 --> 00:06:05,039
passing

154
00:06:05,039 --> 00:06:08,080
a full day trying to reproduce it 100

155
00:06:08,080 --> 00:06:11,840
of the cases uh we got closer to 100 but

156
00:06:11,840 --> 00:06:14,400
of course not 100

157
00:06:14,400 --> 00:06:16,639
which was already a bit better so when

158
00:06:16,639 --> 00:06:18,639
we could reproduce it in most of the

159
00:06:18,639 --> 00:06:20,000
cases i started just

160
00:06:20,000 --> 00:06:23,199
raising a request and trying to see uh

161
00:06:23,199 --> 00:06:26,000
the whole flow where the request goes uh

162
00:06:26,000 --> 00:06:26,560
what

163
00:06:26,560 --> 00:06:29,280
server said service responses to it

164
00:06:29,280 --> 00:06:31,120
where the pictures are taken from and so

165
00:06:31,120 --> 00:06:32,800
on and so on

166
00:06:32,800 --> 00:06:35,840
and the flow was clean like i

167
00:06:35,840 --> 00:06:38,000
came to see logs from a server side

168
00:06:38,000 --> 00:06:39,039
application and

169
00:06:39,039 --> 00:06:42,080
it was all okay and it was showing that

170
00:06:42,080 --> 00:06:42,479
uh

171
00:06:42,479 --> 00:06:44,880
for pictures it's calling some specific

172
00:06:44,880 --> 00:06:47,440
urls and that urls work fine

173
00:06:47,440 --> 00:06:49,039
and it seemed like that picture is

174
00:06:49,039 --> 00:06:52,639
coming just out of nowhere

175
00:06:52,880 --> 00:06:55,919
and at some point we just hit a dead end

176
00:06:55,919 --> 00:06:57,599
and i didn't know what to do else

177
00:06:57,599 --> 00:06:59,919
because i can reproduce an issue

178
00:06:59,919 --> 00:07:02,400
and i can trace that specific request

179
00:07:02,400 --> 00:07:04,319
and during the whole request there is no

180
00:07:04,319 --> 00:07:06,319
place where this phishing image appears

181
00:07:06,319 --> 00:07:07,919
from

182
00:07:07,919 --> 00:07:10,560
um we try just to mitigate an issue

183
00:07:10,560 --> 00:07:11,039
clean

184
00:07:11,039 --> 00:07:14,160
cash or just move traffic to a different

185
00:07:14,160 --> 00:07:16,479
data center um

186
00:07:16,479 --> 00:07:19,840
it mostly didn't help um

187
00:07:19,840 --> 00:07:24,560
so we decided to just wait a bit with it

188
00:07:24,639 --> 00:07:27,680
of course customers were complaining but

189
00:07:27,680 --> 00:07:29,840
it wasn't we knew already that it's not

190
00:07:29,840 --> 00:07:32,560
a security issue so we were pretty much

191
00:07:32,560 --> 00:07:35,120
kind of okay with it as much as we could

192
00:07:35,120 --> 00:07:35,759
be

193
00:07:35,759 --> 00:07:39,440
um next morning one of the developers

194
00:07:39,440 --> 00:07:41,680
from that server side application and

195
00:07:41,680 --> 00:07:44,080
started calling my manager and said

196
00:07:44,080 --> 00:07:46,560
listen i know you will be angry but i

197
00:07:46,560 --> 00:07:47,440
found out that

198
00:07:47,440 --> 00:07:49,680
urls which we're writing in a log that

199
00:07:49,680 --> 00:07:50,800
we're calling them

200
00:07:50,800 --> 00:07:53,440
they're incorrect we're actually writing

201
00:07:53,440 --> 00:07:54,319
one

202
00:07:54,319 --> 00:07:57,520
url but calling another one as soon as

203
00:07:57,520 --> 00:07:59,360
we got the real url which

204
00:07:59,360 --> 00:08:03,120
was called we found out that um

205
00:08:03,120 --> 00:08:05,039
basically we found where the picture is

206
00:08:05,039 --> 00:08:06,319
coming from

207
00:08:06,319 --> 00:08:09,360
and we found out that instead of calling

208
00:08:09,360 --> 00:08:10,160
just a

209
00:08:10,160 --> 00:08:12,400
media server we were calling another

210
00:08:12,400 --> 00:08:13,840
service which was

211
00:08:13,840 --> 00:08:17,759
some um backup locations for a cdn

212
00:08:17,759 --> 00:08:20,080
and of course because it's a static

213
00:08:20,080 --> 00:08:21,039
content only

214
00:08:21,039 --> 00:08:23,120
and it's a backup for syria and it was

215
00:08:23,120 --> 00:08:25,360
also caching everything

216
00:08:25,360 --> 00:08:28,080
but we had a bug there so in nginx

217
00:08:28,080 --> 00:08:30,080
configuration we started caching files

218
00:08:30,080 --> 00:08:32,240
just by pass without taking into account

219
00:08:32,240 --> 00:08:33,599
the domain

220
00:08:33,599 --> 00:08:36,880
um and apparently at the same time while

221
00:08:36,880 --> 00:08:38,479
developers were loading

222
00:08:38,479 --> 00:08:41,519
some loader for websites some user

223
00:08:41,519 --> 00:08:43,760
loaded with the same pass some phishing

224
00:08:43,760 --> 00:08:44,640
image

225
00:08:44,640 --> 00:08:47,600
um and that's it that's basically how we

226
00:08:47,600 --> 00:08:49,440
go the phishing image is the loader

227
00:08:49,440 --> 00:08:51,360
and as soon as we found out that logs

228
00:08:51,360 --> 00:08:52,959
were incorrect and basically it's a

229
00:08:52,959 --> 00:08:54,399
different url

230
00:08:54,399 --> 00:08:57,920
um we had like three minutes up to the

231
00:08:57,920 --> 00:08:58,560
fix

232
00:08:58,560 --> 00:09:00,399
because it was super easy to find out

233
00:09:00,399 --> 00:09:04,160
what went wrong in that case

234
00:09:04,720 --> 00:09:07,360
wow that sounds like a stressful uh

235
00:09:07,360 --> 00:09:08,480
story um

236
00:09:08,480 --> 00:09:12,800
how long did this whole thing take um

237
00:09:12,800 --> 00:09:17,440
i think something like 35 36 hours

238
00:09:17,440 --> 00:09:20,160
in total and was it like an incident

239
00:09:20,160 --> 00:09:22,640
were you on call the whole time

240
00:09:22,640 --> 00:09:25,660
um no after we hit a deadlock uh

241
00:09:25,660 --> 00:09:26,720
[Music]

242
00:09:26,720 --> 00:09:30,000
dead end we basically went to sleep

243
00:09:30,000 --> 00:09:32,560
because we needed it um but before that

244
00:09:32,560 --> 00:09:34,160
yeah i think we worked like

245
00:09:34,160 --> 00:09:36,880
first 24 hours in a row and then had

246
00:09:36,880 --> 00:09:37,839
some break and

247
00:09:37,839 --> 00:09:39,600
then when we found out what happened it

248
00:09:39,600 --> 00:09:43,040
was just few minutes of fix

249
00:09:43,120 --> 00:09:44,959
are you able to laugh about it at least

250
00:09:44,959 --> 00:09:46,320
a little now or is it uh

251
00:09:46,320 --> 00:09:49,519
still traumatic no not dramatic at all

252
00:09:49,519 --> 00:09:51,600
it's just a standard incident and they

253
00:09:51,600 --> 00:09:53,360
think it's pretty funny

254
00:09:53,360 --> 00:09:55,200
okay that's awesome i'm gonna ask more

255
00:09:55,200 --> 00:09:56,399
questions later i'm gonna bring in our

256
00:09:56,399 --> 00:09:57,279
next uh

257
00:09:57,279 --> 00:09:59,519
panelist uh and that's gonna be uh or

258
00:09:59,519 --> 00:10:00,399
cohen

259
00:10:00,399 --> 00:10:05,839
uh welcome or let's uh

260
00:10:07,040 --> 00:10:08,880
is certainly an industry veteran he

261
00:10:08,880 --> 00:10:11,120
spoke at the very first devops con

262
00:10:11,120 --> 00:10:14,480
before we became devops even 2013.

263
00:10:14,480 --> 00:10:17,519
um so he's been quite around um

264
00:10:17,519 --> 00:10:19,839
and he is now a tech lead at a company

265
00:10:19,839 --> 00:10:21,440
called emilio payments before that he

266
00:10:21,440 --> 00:10:22,079
was uh

267
00:10:22,079 --> 00:10:23,680
one of the leading consultants in israel

268
00:10:23,680 --> 00:10:25,279
around devops

269
00:10:25,279 --> 00:10:27,760
and uh operations uh and he's gonna tell

270
00:10:27,760 --> 00:10:29,120
us a funny story where

271
00:10:29,120 --> 00:10:30,720
it's actually surprising to think about

272
00:10:30,720 --> 00:10:32,640
the different functions in the chain

273
00:10:32,640 --> 00:10:36,000
um who can actually uh

274
00:10:36,000 --> 00:10:39,279
create uh some chaos as well so yeah

275
00:10:39,279 --> 00:10:42,800
go right ahead sorry uh yeah so uh thank

276
00:10:42,800 --> 00:10:44,720
you sharon i'm really happy to join and

277
00:10:44,720 --> 00:10:46,560
share my story um

278
00:10:46,560 --> 00:10:49,360
so i was gonna tell how uh about emilia

279
00:10:49,360 --> 00:10:50,800
what we do we we're a

280
00:10:50,800 --> 00:10:53,920
b2b uh payments product uh with the goal

281
00:10:53,920 --> 00:10:55,279
of helping small business

282
00:10:55,279 --> 00:10:58,800
stay in business so um i was gonna tell

283
00:10:58,800 --> 00:11:00,320
about how we lost our entire

284
00:11:00,320 --> 00:11:02,720
entire database but it wasn't emilio it

285
00:11:02,720 --> 00:11:04,959
was at a different uh company uh

286
00:11:04,959 --> 00:11:07,839
a long long ago about a decade ago uh so

287
00:11:07,839 --> 00:11:09,519
i have a more recent story

288
00:11:09,519 --> 00:11:12,399
uh that happened to us at emilio um so

289
00:11:12,399 --> 00:11:13,680
essentially we're all about

290
00:11:13,680 --> 00:11:16,480
payments okay uh we allow our users uh

291
00:11:16,480 --> 00:11:17,920
business users basically

292
00:11:17,920 --> 00:11:21,120
uh pay with any payment method and have

293
00:11:21,120 --> 00:11:22,399
their vendors

294
00:11:22,399 --> 00:11:24,320
uh still getting checks like they always

295
00:11:24,320 --> 00:11:25,440
used to

296
00:11:25,440 --> 00:11:28,480
so um sorry

297
00:11:28,480 --> 00:11:31,440
uh when we went live with emilio it was

298
00:11:31,440 --> 00:11:32,320
a little bit

299
00:11:32,320 --> 00:11:36,399
over a year ago um we had a very

300
00:11:36,399 --> 00:11:38,720
low deposit rate of the checks that we

301
00:11:38,720 --> 00:11:40,399
sent so essentially we're

302
00:11:40,399 --> 00:11:43,760
sending out checks to to our

303
00:11:43,760 --> 00:11:46,959
vendor to the vendors of our users and

304
00:11:46,959 --> 00:11:50,000
only about 70 of the checks were

305
00:11:50,000 --> 00:11:51,920
deposited so

306
00:11:51,920 --> 00:11:53,760
at first we thought that they were

307
00:11:53,760 --> 00:11:55,680
somehow lost in the mail

308
00:11:55,680 --> 00:11:58,639
but thirty percent of lots of like lost

309
00:11:58,639 --> 00:11:59,680
envelopes or

310
00:11:59,680 --> 00:12:02,079
loss anything in male is is well it's a

311
00:12:02,079 --> 00:12:03,120
little bit too much

312
00:12:03,120 --> 00:12:04,800
if it was five percent or something like

313
00:12:04,800 --> 00:12:06,800
that and would be okay but

314
00:12:06,800 --> 00:12:09,760
uh 30 was a little over the top a lot of

315
00:12:09,760 --> 00:12:10,560
words huh

316
00:12:10,560 --> 00:12:14,959
um so uh we were still pretty small

317
00:12:14,959 --> 00:12:16,880
and we had ways to mitigate uh such

318
00:12:16,880 --> 00:12:18,720
problems uh

319
00:12:18,720 --> 00:12:21,600
but so it wasn't really a huge issue but

320
00:12:21,600 --> 00:12:23,200
it was it was an issue that we actually

321
00:12:23,200 --> 00:12:24,000
need to solve

322
00:12:24,000 --> 00:12:27,200
because uh some payments relate uh some

323
00:12:27,200 --> 00:12:30,320
uh we need to to reimburse our own

324
00:12:30,320 --> 00:12:32,480
well we start so we need to reimburse

325
00:12:32,480 --> 00:12:33,440
our home clients

326
00:12:33,440 --> 00:12:36,959
um so we reached out um to a few of the

327
00:12:36,959 --> 00:12:37,600
vendors

328
00:12:37,600 --> 00:12:40,480
and and well started to investigate why

329
00:12:40,480 --> 00:12:42,000
this might have happened

330
00:12:42,000 --> 00:12:44,560
and there were two like two main uh

331
00:12:44,560 --> 00:12:45,200
points

332
00:12:45,200 --> 00:12:48,320
two main problems uh that caused this

333
00:12:48,320 --> 00:12:52,000
uh that we didn't even think they well

334
00:12:52,000 --> 00:12:53,680
one of them was actually a bug but the

335
00:12:53,680 --> 00:12:54,079
other

336
00:12:54,079 --> 00:12:55,839
didn't we didn't even didn't even occur

337
00:12:55,839 --> 00:12:57,760
to us that it might be a problem

338
00:12:57,760 --> 00:13:00,160
so the first problem was that the

339
00:13:00,160 --> 00:13:02,079
envelopes that we sent

340
00:13:02,079 --> 00:13:05,200
um they were branded milio they were

341
00:13:05,200 --> 00:13:06,720
purple

342
00:13:06,720 --> 00:13:08,959
so the people getting the envelopes in

343
00:13:08,959 --> 00:13:09,920
the mail

344
00:13:09,920 --> 00:13:13,120
they thought it was uh advertising so

345
00:13:13,120 --> 00:13:14,560
they just they didn't even open the

346
00:13:14,560 --> 00:13:16,959
envelope they just threw it in the trash

347
00:13:16,959 --> 00:13:19,680
so that was one issue with that and we

348
00:13:19,680 --> 00:13:21,600
change the envelopes to be like a more

349
00:13:21,600 --> 00:13:22,399
uh

350
00:13:22,399 --> 00:13:24,880
uh like a white envelope what you would

351
00:13:24,880 --> 00:13:25,680
expect from

352
00:13:25,680 --> 00:13:27,040
when you get a check in the mail or

353
00:13:27,040 --> 00:13:29,200
something similar uh so that's solved

354
00:13:29,200 --> 00:13:30,959
like a huge proportion of the

355
00:13:30,959 --> 00:13:34,639
of the problematic uh checks um

356
00:13:34,639 --> 00:13:37,680
and the other issue was that was uh in

357
00:13:37,680 --> 00:13:38,639
the zip code

358
00:13:38,639 --> 00:13:41,760
um a few of the checks that weren't

359
00:13:41,760 --> 00:13:43,839
supposed to get to their destination

360
00:13:43,839 --> 00:13:46,320
got to their destination somehow i guess

361
00:13:46,320 --> 00:13:47,519
from the address

362
00:13:47,519 --> 00:13:50,639
and uh we sent we received the image

363
00:13:50,639 --> 00:13:54,320
of uh like a like a picture of the

364
00:13:54,320 --> 00:13:58,000
of the envelope um from these vendors

365
00:13:58,000 --> 00:14:01,040
so we had like a session we tried to

366
00:14:01,040 --> 00:14:04,240
view why these uh there was a

367
00:14:04,240 --> 00:14:07,120
there wasn't a wrong zip code on these

368
00:14:07,120 --> 00:14:07,920
envelopes

369
00:14:07,920 --> 00:14:10,000
so we like we listed a bunch of these

370
00:14:10,000 --> 00:14:11,760
and we looked at the zip codes

371
00:14:11,760 --> 00:14:15,199
and it was just a number that didn't

372
00:14:15,199 --> 00:14:16,560
even exist in our system

373
00:14:16,560 --> 00:14:18,000
it was like i don't know like a five

374
00:14:18,000 --> 00:14:20,079
digit number like a zip code that didn't

375
00:14:20,079 --> 00:14:20,880
didn't even

376
00:14:20,880 --> 00:14:23,440
exist initially we saw like data mix up

377
00:14:23,440 --> 00:14:25,360
in some of these uh

378
00:14:25,360 --> 00:14:28,399
these payments or these addresses

379
00:14:28,399 --> 00:14:31,600
um so these numbers um didn't exist a

380
00:14:31,600 --> 00:14:32,959
lot at all

381
00:14:32,959 --> 00:14:36,320
um so what we did i just like i listed

382
00:14:36,320 --> 00:14:37,279
the bunch of

383
00:14:37,279 --> 00:14:39,839
wrong zip codes and i listed the real

384
00:14:39,839 --> 00:14:41,920
zip codes that were supposed to be

385
00:14:41,920 --> 00:14:44,480
on the envelope and i just i gazed at

386
00:14:44,480 --> 00:14:46,160
this list

387
00:14:46,160 --> 00:14:48,959
and i don't know if you know the us zip

388
00:14:48,959 --> 00:14:49,839
codes it's

389
00:14:49,839 --> 00:14:53,440
structured it's five digits and then a

390
00:14:53,440 --> 00:14:55,680
dash and then four digits

391
00:14:55,680 --> 00:14:58,880
so after i know a few minutes of

392
00:14:58,880 --> 00:15:01,600
me gazing at the numbers i realized the

393
00:15:01,600 --> 00:15:02,399
the

394
00:15:02,399 --> 00:15:04,160
the real like the actual zip code that

395
00:15:04,160 --> 00:15:05,839
was supposed to be sent like five digit

396
00:15:05,839 --> 00:15:08,639
dash four digits uh it was actually

397
00:15:08,639 --> 00:15:10,320
close numerically

398
00:15:10,320 --> 00:15:13,120
to the error like the wrong zip code

399
00:15:13,120 --> 00:15:15,360
that we that was used

400
00:15:15,360 --> 00:15:18,800
and and then and and then i i just

401
00:15:18,800 --> 00:15:22,880
did the like the um math calculation of

402
00:15:22,880 --> 00:15:25,600
the five digits minus the four digits

403
00:15:25,600 --> 00:15:26,079
and was

404
00:15:26,079 --> 00:15:28,399
actually the wrong zip code of what was

405
00:15:28,399 --> 00:15:29,519
actually sent

406
00:15:29,519 --> 00:15:31,920
uh so essentially this wasn't like this

407
00:15:31,920 --> 00:15:32,880
and then we found

408
00:15:32,880 --> 00:15:35,120
like the problem it's like a it was like

409
00:15:35,120 --> 00:15:36,959
a sherlock moment or something

410
00:15:36,959 --> 00:15:40,079
um so it

411
00:15:40,079 --> 00:15:42,480
wasn't a problem on our end because we

412
00:15:42,480 --> 00:15:43,199
just we

413
00:15:43,199 --> 00:15:45,839
used a service like a bank a banking

414
00:15:45,839 --> 00:15:46,399
service

415
00:15:46,399 --> 00:15:49,199
that sends the checks for us so we just

416
00:15:49,199 --> 00:15:50,079
contacted them

417
00:15:50,079 --> 00:15:52,639
and tell them listen uh there's like

418
00:15:52,639 --> 00:15:54,399
there's like a big problem

419
00:15:54,399 --> 00:15:56,000
there you're using the wrong zip code

420
00:15:56,000 --> 00:15:57,839
not what we send you uh and then they

421
00:15:57,839 --> 00:15:59,440
were quick to fix and everything was uh

422
00:15:59,440 --> 00:16:01,120
was back on track but

423
00:16:01,120 --> 00:16:03,759
again it was uh that was that there was

424
00:16:03,759 --> 00:16:05,040
the two problems like

425
00:16:05,040 --> 00:16:07,759
colored envelopes which affect like

426
00:16:07,759 --> 00:16:09,600
affect the deposit rate of checks

427
00:16:09,600 --> 00:16:13,839
and uh a funny bug yeah in a system

428
00:16:13,839 --> 00:16:15,759
it's really funny because uh sometimes

429
00:16:15,759 --> 00:16:17,120
you forget that there are also humans in

430
00:16:17,120 --> 00:16:18,480
the process right

431
00:16:18,480 --> 00:16:20,320
so we always try to engineer the problem

432
00:16:20,320 --> 00:16:21,759
we're like okay let me find the number

433
00:16:21,759 --> 00:16:22,560
in the logs

434
00:16:22,560 --> 00:16:25,120
let me try where the actual issue is we

435
00:16:25,120 --> 00:16:26,320
have an error in the database but

436
00:16:26,320 --> 00:16:26,880
eventually

437
00:16:26,880 --> 00:16:29,040
there are people in the process too and

438
00:16:29,040 --> 00:16:30,399
they make all kinds of decisions like

439
00:16:30,399 --> 00:16:32,000
throwing away envelopes or

440
00:16:32,000 --> 00:16:34,480
you know populating it into a

441
00:16:34,480 --> 00:16:37,440
spreadsheet and uh you know accidents

442
00:16:37,440 --> 00:16:38,959
triggering some kind of a formula or

443
00:16:38,959 --> 00:16:40,000
something that we wouldn't actually

444
00:16:40,000 --> 00:16:40,720
think of as

445
00:16:40,720 --> 00:16:41,759
engineers so i think that's a really

446
00:16:41,759 --> 00:16:43,839
great story that reminds us about the

447
00:16:43,839 --> 00:16:45,120
human factor

448
00:16:45,120 --> 00:16:47,440
um i'm going to move on to our next

449
00:16:47,440 --> 00:16:48,480
person at the end we're going to have

450
00:16:48,480 --> 00:16:48,959
some

451
00:16:48,959 --> 00:16:53,440
q a so welcome adi

452
00:16:53,440 --> 00:16:56,959
let's make sure you're hey okay

453
00:16:56,959 --> 00:16:59,920
so at the uh aside from being also an

454
00:16:59,920 --> 00:17:01,920
industry veteran r d group leader at

455
00:17:01,920 --> 00:17:04,319
appsflyer is a colleague and friend

456
00:17:04,319 --> 00:17:06,559
and he's going to tell us about a

457
00:17:06,559 --> 00:17:07,760
gripping

458
00:17:07,760 --> 00:17:11,280
tale of of stress and how we came back

459
00:17:11,280 --> 00:17:11,839
from the

460
00:17:11,839 --> 00:17:15,439
brink of uh a potential disaster so take

461
00:17:15,439 --> 00:17:16,959
it away

462
00:17:16,959 --> 00:17:20,000
hey hi everyone so uh story is actually

463
00:17:20,000 --> 00:17:22,319
not a failure as i was like uh

464
00:17:22,319 --> 00:17:25,439
almost a failure um happened

465
00:17:25,439 --> 00:17:28,799
almost exactly two years ago uh we were

466
00:17:28,799 --> 00:17:32,160
uh migrating one of uh our most

467
00:17:32,160 --> 00:17:34,960
mission critical services at apps fire

468
00:17:34,960 --> 00:17:35,440
uh

469
00:17:35,440 --> 00:17:38,160
to a newer system uh that we spent

470
00:17:38,160 --> 00:17:40,000
almost a year building

471
00:17:40,000 --> 00:17:43,039
uh from a legacy system

472
00:17:43,039 --> 00:17:47,120
and we were already live we had like uh

473
00:17:47,120 --> 00:17:48,960
we were migrating the customers one by

474
00:17:48,960 --> 00:17:51,120
one and we had like

475
00:17:51,120 --> 00:17:53,919
almost 10 percent uh of our customers

476
00:17:53,919 --> 00:17:55,679
already in the new system

477
00:17:55,679 --> 00:17:58,559
uh one of the key uh components of this

478
00:17:58,559 --> 00:18:01,440
new system was

479
00:18:01,440 --> 00:18:05,280
a huge aerospike cluster aerospike as a

480
00:18:05,280 --> 00:18:08,559
key value database that we used

481
00:18:08,559 --> 00:18:11,440
and it had a very important state for

482
00:18:11,440 --> 00:18:12,080
this

483
00:18:12,080 --> 00:18:15,360
for this process for the system um

484
00:18:15,360 --> 00:18:18,400
basically holding critical

485
00:18:18,400 --> 00:18:21,120
data for us for every uh installation

486
00:18:21,120 --> 00:18:22,240
that appsfire

487
00:18:22,240 --> 00:18:26,000
uh measures um

488
00:18:26,000 --> 00:18:29,200
and it took us uh to to

489
00:18:29,200 --> 00:18:31,760
to have the two flows running side by

490
00:18:31,760 --> 00:18:33,280
side we had to like

491
00:18:33,280 --> 00:18:35,520
pre-populate the state and the new

492
00:18:35,520 --> 00:18:36,720
database

493
00:18:36,720 --> 00:18:39,200
uh and it took us like almost two months

494
00:18:39,200 --> 00:18:40,400
of very hard work

495
00:18:40,400 --> 00:18:43,679
and a lot of money uh to to populate the

496
00:18:43,679 --> 00:18:45,520
state there we basically

497
00:18:45,520 --> 00:18:48,960
uh ran or replayed uh two years of

498
00:18:48,960 --> 00:18:52,000
apps fire traffic into this uh

499
00:18:52,000 --> 00:18:54,240
into this database and at this point it

500
00:18:54,240 --> 00:18:55,120
had

501
00:18:55,120 --> 00:18:58,480
72 billion records in it uh

502
00:18:58,480 --> 00:19:01,679
of all sorts and kinds it was it's like

503
00:19:01,679 --> 00:19:04,240
it's a conceptually one cluster it it

504
00:19:04,240 --> 00:19:06,400
was

505
00:19:06,400 --> 00:19:09,200
made up from four different clusters but

506
00:19:09,200 --> 00:19:11,200
it was logically one cluster

507
00:19:11,200 --> 00:19:14,320
um we were thinking all everything was

508
00:19:14,320 --> 00:19:15,760
really going smoothly

509
00:19:15,760 --> 00:19:18,720
uh we had as i said 10 of the traffic

510
00:19:18,720 --> 00:19:20,080
already running there

511
00:19:20,080 --> 00:19:22,320
and then like one night i'm sitting at

512
00:19:22,320 --> 00:19:26,080
home i'm looking at some dashboards

513
00:19:26,080 --> 00:19:28,240
just making sure everything is is going

514
00:19:28,240 --> 00:19:29,679
smoothly and then i

515
00:19:29,679 --> 00:19:33,520
i find out that we had a bug

516
00:19:33,520 --> 00:19:36,559
and we were not

517
00:19:37,200 --> 00:19:40,799
renewing the ttls on this uh aerospike

518
00:19:40,799 --> 00:19:42,240
so we had

519
00:19:42,240 --> 00:19:45,520
um a ttl on every record

520
00:19:45,520 --> 00:19:47,520
that we put in there because we knew

521
00:19:47,520 --> 00:19:49,280
that a lot of the history we put in

522
00:19:49,280 --> 00:19:50,799
there was basically garbage and we

523
00:19:50,799 --> 00:19:52,320
wanted to go away

524
00:19:52,320 --> 00:19:56,160
but we want like the active uh uh

525
00:19:56,160 --> 00:19:59,440
users and the active devices to still

526
00:19:59,440 --> 00:20:02,400
be there after we see them we had like a

527
00:20:02,400 --> 00:20:03,679
60-day

528
00:20:03,679 --> 00:20:06,720
ttl that we put in there he

529
00:20:06,720 --> 00:20:08,720
initially wanted to put 90 days in there

530
00:20:08,720 --> 00:20:10,240
but

531
00:20:10,240 --> 00:20:11,679
that was the first problem that i

532
00:20:11,679 --> 00:20:13,520
listened to my boss and and

533
00:20:13,520 --> 00:20:16,320
he convinced me to put a shorter ttl to

534
00:20:16,320 --> 00:20:17,520
save some money

535
00:20:17,520 --> 00:20:20,000
in there so we had a bug we were not

536
00:20:20,000 --> 00:20:22,720
renewing tts and

537
00:20:22,720 --> 00:20:24,640
and then immediately where i was like

538
00:20:24,640 --> 00:20:26,880
very worried i said okay now we're

539
00:20:26,880 --> 00:20:30,720
we're in the really deep

540
00:20:30,720 --> 00:20:34,080
problem um and we found out we did some

541
00:20:34,080 --> 00:20:35,760
investigation we found out we have like

542
00:20:35,760 --> 00:20:37,679
a a week time before

543
00:20:37,679 --> 00:20:40,480
basically uh all of the data in this

544
00:20:40,480 --> 00:20:41,760
database that we

545
00:20:41,760 --> 00:20:44,080
worked so hard to put in there is going

546
00:20:44,080 --> 00:20:45,679
to just disappear if we don't do

547
00:20:45,679 --> 00:20:47,039
anything

548
00:20:47,039 --> 00:20:49,919
um so immediately we started to find

549
00:20:49,919 --> 00:20:51,760
that to investigate and find the best

550
00:20:51,760 --> 00:20:52,880
way to

551
00:20:52,880 --> 00:20:56,480
to solve this problem um the only

552
00:20:56,480 --> 00:20:58,480
solution we came up with

553
00:20:58,480 --> 00:21:01,440
uh that that made any sense was

554
00:21:01,440 --> 00:21:02,080
basically

555
00:21:02,080 --> 00:21:04,559
to scan the whole database and let me

556
00:21:04,559 --> 00:21:05,760
remind you there were like

557
00:21:05,760 --> 00:21:08,000
72 billion records in these clusters

558
00:21:08,000 --> 00:21:09,280
that we needed to

559
00:21:09,280 --> 00:21:12,320
go over and touch one by one um so

560
00:21:12,320 --> 00:21:13,280
immediately me

561
00:21:13,280 --> 00:21:16,400
and uh andy robinstein which was

562
00:21:16,400 --> 00:21:19,520
is a chief architect at appsfire we

563
00:21:19,520 --> 00:21:23,760
um we started looking into every sort of

564
00:21:23,760 --> 00:21:27,200
uh solution we can find and the solution

565
00:21:27,200 --> 00:21:29,760
was we needed to write the lua script

566
00:21:29,760 --> 00:21:32,400
that was going to run as a udf a

567
00:21:32,400 --> 00:21:34,320
user-defined function on vr on each

568
00:21:34,320 --> 00:21:35,520
aerospike node

569
00:21:35,520 --> 00:21:39,679
and basically uh go over one by one and

570
00:21:39,679 --> 00:21:42,640
and update the ttl on the on the records

571
00:21:42,640 --> 00:21:44,400
the time to live

572
00:21:44,400 --> 00:21:48,240
um at this point we had like six days

573
00:21:48,240 --> 00:21:48,799
left

574
00:21:48,799 --> 00:21:51,120
before the data is is going to disappear

575
00:21:51,120 --> 00:21:52,080
it's going to be

576
00:21:52,080 --> 00:21:55,280
expired um we started running the

577
00:21:55,280 --> 00:21:58,320
scan it was looking good um

578
00:21:58,320 --> 00:22:01,280
it was i don't know seven eight in the

579
00:22:01,280 --> 00:22:02,880
evening when it started

580
00:22:02,880 --> 00:22:06,080
um and then um and i was

581
00:22:06,080 --> 00:22:08,480
on call i took the the pages of the

582
00:22:08,480 --> 00:22:09,919
shift and then

583
00:22:09,919 --> 00:22:11,840
everything started ringing at like three

584
00:22:11,840 --> 00:22:12,960
in the morning

585
00:22:12,960 --> 00:22:15,840
uh the scan was misconfigured it had a

586
00:22:15,840 --> 00:22:16,960
bug in it

587
00:22:16,960 --> 00:22:20,000
and we also had some misconfiguration

588
00:22:20,000 --> 00:22:21,520
the aerospike clusters in

589
00:22:21,520 --> 00:22:24,320
in terms of memory uh location so

590
00:22:24,320 --> 00:22:25,600
basically at

591
00:22:25,600 --> 00:22:27,520
three in the morning we lost one of the

592
00:22:27,520 --> 00:22:28,880
databases

593
00:22:28,880 --> 00:22:30,799
as i said it was comprised of like four

594
00:22:30,799 --> 00:22:32,240
different databases

595
00:22:32,240 --> 00:22:35,039
we lost one we had to stop the scan we

596
00:22:35,039 --> 00:22:36,400
had to rebuild it

597
00:22:36,400 --> 00:22:39,280
uh the the the other cluster before we

598
00:22:39,280 --> 00:22:40,000
could restart

599
00:22:40,000 --> 00:22:43,280
the scan we basically started the scan

600
00:22:43,280 --> 00:22:47,039
again with like three days left it took

601
00:22:47,039 --> 00:22:49,039
a little bit over three days to scan the

602
00:22:49,039 --> 00:22:50,240
whole data

603
00:22:50,240 --> 00:22:53,679
uh but it was like really like a

604
00:22:53,679 --> 00:22:56,320
macgyver episode it was like we saved it

605
00:22:56,320 --> 00:22:58,799
with like uh the tech industry

606
00:22:58,799 --> 00:22:59,600
equivalent

607
00:22:59,600 --> 00:23:03,120
of uh duct tape toothpaste and

608
00:23:03,120 --> 00:23:06,159
i don't know some rope um

609
00:23:06,159 --> 00:23:08,880
and we we basically managed to save all

610
00:23:08,880 --> 00:23:09,600
of it we

611
00:23:09,600 --> 00:23:13,039
like touched 99.8 of the data in the

612
00:23:13,039 --> 00:23:14,320
databases

613
00:23:14,320 --> 00:23:17,760
and it was nothing short of a miracle

614
00:23:17,760 --> 00:23:20,880
um so there was a lot of like smart

615
00:23:20,880 --> 00:23:23,440
people involved or wise people involved

616
00:23:23,440 --> 00:23:24,400
that were

617
00:23:24,400 --> 00:23:26,640
quick to respond and worked very hard to

618
00:23:26,640 --> 00:23:27,679
to

619
00:23:27,679 --> 00:23:29,679
to manage the situation but where there

620
00:23:29,679 --> 00:23:33,760
was an enormous amount of luck here

621
00:23:33,919 --> 00:23:36,880
so conclusion is don't listen to your

622
00:23:36,880 --> 00:23:39,120
boss about shorter ttls

623
00:23:39,120 --> 00:23:41,520
and check every metric you can with like

624
00:23:41,520 --> 00:23:43,200
50 times

625
00:23:43,200 --> 00:23:45,679
so this is also a stressful database

626
00:23:45,679 --> 00:23:47,840
story i didn't let all tell his

627
00:23:47,840 --> 00:23:50,110
story only because it was so tragic

628
00:23:50,110 --> 00:23:52,000
[Laughter]

629
00:23:52,000 --> 00:23:54,240
that we wanted some comic relief in this

630
00:23:54,240 --> 00:23:56,400
fun session but um

631
00:23:56,400 --> 00:23:59,039
it's amazing how sometimes like the the

632
00:23:59,039 --> 00:24:00,640
failures the cascading failures are a

633
00:24:00,640 --> 00:24:02,159
second before production so it's

634
00:24:02,159 --> 00:24:04,240
there's also stories where that's

635
00:24:04,240 --> 00:24:05,600
actually a big part of it right being

636
00:24:05,600 --> 00:24:07,120
able to manage the incident properly

637
00:24:07,120 --> 00:24:07,520
enough

638
00:24:07,520 --> 00:24:09,039
in order to not get to that place where

639
00:24:09,039 --> 00:24:11,279
you actually feel and and have uh

640
00:24:11,279 --> 00:24:14,640
you know production um damage

641
00:24:14,640 --> 00:24:17,200
so i'm gonna bring our the rest of our

642
00:24:17,200 --> 00:24:18,000
folks back into

643
00:24:18,000 --> 00:24:19,600
the stream and now we're just gonna ask

644
00:24:19,600 --> 00:24:21,200
a few questions

645
00:24:21,200 --> 00:24:24,960
um so you know failures

646
00:24:24,960 --> 00:24:27,279
everybody fails right um i'm gonna go

647
00:24:27,279 --> 00:24:29,360
one by one i'll call out uh

648
00:24:29,360 --> 00:24:31,200
uh oh i see we have some we do have some

649
00:24:31,200 --> 00:24:32,880
questions um so let's start with the

650
00:24:32,880 --> 00:24:34,159
questions from the crowd

651
00:24:34,159 --> 00:24:36,720
um what advice would uh would you guys

652
00:24:36,720 --> 00:24:37,520
give to

653
00:24:37,520 --> 00:24:39,520
others based on what uh what you learned

654
00:24:39,520 --> 00:24:41,440
um how to take the growth and learning

655
00:24:41,440 --> 00:24:42,880
from these types of uh

656
00:24:42,880 --> 00:24:44,960
experiences so we'll start from the top

657
00:24:44,960 --> 00:24:47,039
a d

658
00:24:47,039 --> 00:24:50,960
um so i i think uh and what i uh

659
00:24:50,960 --> 00:24:54,080
i try to teach engineers uh at upstar is

660
00:24:54,080 --> 00:24:56,240
that

661
00:24:56,320 --> 00:24:59,200
failures are the the the places where we

662
00:24:59,200 --> 00:24:59,679
learn

663
00:24:59,679 --> 00:25:02,000
the most we learn from our successes but

664
00:25:02,000 --> 00:25:04,559
we learn more from our failures so

665
00:25:04,559 --> 00:25:07,840
as you said i started this session um on

666
00:25:07,840 --> 00:25:08,480
each

667
00:25:08,480 --> 00:25:11,440
uh like failure production issue

668
00:25:11,440 --> 00:25:13,120
something that went wrong

669
00:25:13,120 --> 00:25:15,840
do a post-mortem uh understand what you

670
00:25:15,840 --> 00:25:17,840
did right what you did wrong

671
00:25:17,840 --> 00:25:21,279
uh don't blame anyone uh make

672
00:25:21,279 --> 00:25:23,279
the the environment safe for everybody

673
00:25:23,279 --> 00:25:24,559
to tell what to

674
00:25:24,559 --> 00:25:26,960
say what the speak what they think and

675
00:25:26,960 --> 00:25:28,480
and feel uh

676
00:25:28,480 --> 00:25:31,120
like uh like everything's okay even

677
00:25:31,120 --> 00:25:31,840
though

678
00:25:31,840 --> 00:25:34,960
we may have uh caused some

679
00:25:34,960 --> 00:25:38,159
uh business disruption or whatever uh uh

680
00:25:38,159 --> 00:25:40,840
this it's the only way to to grow and

681
00:25:40,840 --> 00:25:43,360
learn

682
00:25:43,360 --> 00:25:46,640
what do you think jenna hey

683
00:25:46,640 --> 00:25:49,760
um i think there are two the most

684
00:25:49,760 --> 00:25:50,960
important points

685
00:25:50,960 --> 00:25:54,240
in the story i shared

686
00:25:54,240 --> 00:25:56,640
first one is try to always mitigate your

687
00:25:56,640 --> 00:25:57,600
incident first

688
00:25:57,600 --> 00:26:00,480
without going deep into debugging or

689
00:26:00,480 --> 00:26:02,000
fixing it

690
00:26:02,000 --> 00:26:04,320
because you will just save time and

691
00:26:04,320 --> 00:26:06,480
users won't be seeing your problem

692
00:26:06,480 --> 00:26:09,440
while you're still debugging it um and

693
00:26:09,440 --> 00:26:10,000
the second

694
00:26:10,000 --> 00:26:12,480
important point is that when you're

695
00:26:12,480 --> 00:26:13,679
making any change

696
00:26:13,679 --> 00:26:16,559
try to check that it's not a huge heap

697
00:26:16,559 --> 00:26:18,559
of changes and you're just throwing one

698
00:26:18,559 --> 00:26:19,760
more into it

699
00:26:19,760 --> 00:26:22,799
um it would have been so much easier if

700
00:26:22,799 --> 00:26:23,279
we

701
00:26:23,279 --> 00:26:26,720
saw that at the time of um at the time

702
00:26:26,720 --> 00:26:28,720
frame we were taking there was just one

703
00:26:28,720 --> 00:26:30,400
specific change which we can

704
00:26:30,400 --> 00:26:33,039
easily roll back and just test without

705
00:26:33,039 --> 00:26:34,000
the change

706
00:26:34,000 --> 00:26:35,840
and see that everything is fine but

707
00:26:35,840 --> 00:26:38,080
because there were tons of changes

708
00:26:38,080 --> 00:26:41,360
it was just impossible

709
00:26:41,360 --> 00:26:42,880
so escalating the changes is an

710
00:26:42,880 --> 00:26:45,520
important factor so that you know

711
00:26:45,520 --> 00:26:47,039
you don't have like a skating player

712
00:26:47,039 --> 00:26:48,880
that's true uh

713
00:26:48,880 --> 00:26:52,640
and oh what are your thoughts um

714
00:26:52,640 --> 00:26:54,799
there are many things i if i can pick

715
00:26:54,799 --> 00:26:56,799
one i would definitely say

716
00:26:56,799 --> 00:27:00,240
that um when you build a system

717
00:27:00,240 --> 00:27:02,480
like failures are bound to happen at

718
00:27:02,480 --> 00:27:03,840
some point at some

719
00:27:03,840 --> 00:27:06,159
at some point or another in the life of

720
00:27:06,159 --> 00:27:08,159
a company left of a system

721
00:27:08,159 --> 00:27:10,320
so uh when you're building the system

722
00:27:10,320 --> 00:27:13,120
and building the company

723
00:27:13,120 --> 00:27:16,559
try to try to not over engineer things

724
00:27:16,559 --> 00:27:19,200
like on purpose try to be as simple as

725
00:27:19,200 --> 00:27:20,000
possible as you

726
00:27:20,000 --> 00:27:23,600
can because when the failures

727
00:27:23,600 --> 00:27:26,640
will happen well

728
00:27:26,640 --> 00:27:28,880
from my experience sorry from my

729
00:27:28,880 --> 00:27:30,799
experience most of the time

730
00:27:30,799 --> 00:27:34,880
it's going to be

731
00:27:34,880 --> 00:27:36,240
sorry from my experience most of the

732
00:27:36,240 --> 00:27:38,880
time it's going to be uh easier to

733
00:27:38,880 --> 00:27:41,600
well to debug or to find the issue if

734
00:27:41,600 --> 00:27:43,440
the system is simpler

735
00:27:43,440 --> 00:27:45,200
if it's complex it's going to make your

736
00:27:45,200 --> 00:27:46,880
life harder when

737
00:27:46,880 --> 00:27:51,360
uh when stuff hits the fan

738
00:27:52,320 --> 00:27:54,880
uh and how did these incidents make you

739
00:27:54,880 --> 00:27:56,399
feel after

740
00:27:56,399 --> 00:27:58,159
after you managed the incident and

741
00:27:58,159 --> 00:27:59,600
everything was under control

742
00:27:59,600 --> 00:28:01,679
did you stop did you you know did you

743
00:28:01,679 --> 00:28:03,360
feel guilty about how you managed the

744
00:28:03,360 --> 00:28:04,159
incident did you

745
00:28:04,159 --> 00:28:06,159
do a retrospective on your management of

746
00:28:06,159 --> 00:28:07,919
the um

747
00:28:07,919 --> 00:28:10,480
of what happened um let's start with

748
00:28:10,480 --> 00:28:12,880
anna

749
00:28:13,760 --> 00:28:15,919
no i didn't feel any guilty i think

750
00:28:15,919 --> 00:28:16,960
that's a

751
00:28:16,960 --> 00:28:19,039
completely destructive feeling

752
00:28:19,039 --> 00:28:21,200
especially for production incidents i

753
00:28:21,200 --> 00:28:22,559
completely agree with

754
00:28:22,559 --> 00:28:25,520
orr and that is that issues and

755
00:28:25,520 --> 00:28:27,200
production happens

756
00:28:27,200 --> 00:28:29,919
and it's just part of work and nothing

757
00:28:29,919 --> 00:28:31,279
to feel guilty about

758
00:28:31,279 --> 00:28:35,679
and i know after every production fix

759
00:28:35,679 --> 00:28:38,240
this specific one or any other i feel

760
00:28:38,240 --> 00:28:38,799
relief

761
00:28:38,799 --> 00:28:43,520
and i'm usually trying to

762
00:28:43,520 --> 00:28:46,000
organize a story in a nice and funny way

763
00:28:46,000 --> 00:28:48,320
so more people read about it and

764
00:28:48,320 --> 00:28:50,799
learn something from it and just try not

765
00:28:50,799 --> 00:28:54,480
to have it in the future once again

766
00:28:54,559 --> 00:28:58,080
yep adi

767
00:28:58,080 --> 00:29:00,559
um so i didn't feel guilty i felt

768
00:29:00,559 --> 00:29:01,600
responsible

769
00:29:01,600 --> 00:29:03,600
because i was actually responsible for

770
00:29:03,600 --> 00:29:05,200
that project but

771
00:29:05,200 --> 00:29:08,799
um i don't think guilt is a

772
00:29:08,799 --> 00:29:12,480
healthy feeling here

773
00:29:12,480 --> 00:29:15,360
um we were we did feel super relieved

774
00:29:15,360 --> 00:29:16,080
when we

775
00:29:16,080 --> 00:29:19,120
were like saved by the bell and we

776
00:29:19,120 --> 00:29:19,760
probably

777
00:29:19,760 --> 00:29:22,559
drank some whiskey at the office uh as

778
00:29:22,559 --> 00:29:23,840
we usually do with

779
00:29:23,840 --> 00:29:27,360
such uh cases but no but

780
00:29:27,360 --> 00:29:31,600
no guilt yeah i think guilt is a strong

781
00:29:31,600 --> 00:29:33,840
word um but yeah i mean definitely the

782
00:29:33,840 --> 00:29:35,600
responsibility is an important thing

783
00:29:35,600 --> 00:29:38,000
oh what are your thoughts um how do you

784
00:29:38,000 --> 00:29:40,080
feel after such incidents

785
00:29:40,080 --> 00:29:42,720
um well it depends sometimes i feel

786
00:29:42,720 --> 00:29:43,520
guilty

787
00:29:43,520 --> 00:29:45,520
it depends if i created it or not but

788
00:29:45,520 --> 00:29:47,760
it's a self like

789
00:29:47,760 --> 00:29:50,399
it's a feeling that kind of keeping to

790
00:29:50,399 --> 00:29:52,480
myself and not

791
00:29:52,480 --> 00:29:54,480
blaming anyone else when this stuff

792
00:29:54,480 --> 00:29:56,000
happens uh

793
00:29:56,000 --> 00:29:59,679
but um but yeah in terms of

794
00:29:59,679 --> 00:30:03,279
my story as i guess um

795
00:30:03,279 --> 00:30:07,360
the responsibility there is um

796
00:30:07,360 --> 00:30:11,120
the problem there was that uh once the

797
00:30:11,120 --> 00:30:14,240
once the data left the digital world and

798
00:30:14,240 --> 00:30:15,520
became like a physical

799
00:30:15,520 --> 00:30:18,320
uh entity like a check that actually

800
00:30:18,320 --> 00:30:18,720
being

801
00:30:18,720 --> 00:30:20,840
sent on the mail it's kind of hard to

802
00:30:20,840 --> 00:30:22,159
track so

803
00:30:22,159 --> 00:30:24,799
uh the well if i can say if i can use

804
00:30:24,799 --> 00:30:26,960
the term guild the our guilt there is

805
00:30:26,960 --> 00:30:27,760
that

806
00:30:27,760 --> 00:30:30,480
uh we could probably have well we we

807
00:30:30,480 --> 00:30:31,760
could probably have tried to

808
00:30:31,760 --> 00:30:34,240
come up with a better monitoring system

809
00:30:34,240 --> 00:30:37,120
uh for this uh for this type of

810
00:30:37,120 --> 00:30:38,960
of thing but we were so small that we

811
00:30:38,960 --> 00:30:40,720
couldn't even well

812
00:30:40,720 --> 00:30:42,399
we were just starting so it was a bit of

813
00:30:42,399 --> 00:30:44,799
a problem how do you monitor things like

814
00:30:44,799 --> 00:30:47,360
that that are physical like i mean

815
00:30:47,360 --> 00:30:50,480
that's a then if i can ask

816
00:30:50,480 --> 00:30:53,760
it's uh well in terms of well in the

817
00:30:53,760 --> 00:30:56,480
in terms of the checks uh we then used

818
00:30:56,480 --> 00:30:57,840
um

819
00:30:57,840 --> 00:30:59,679
like when the checks were actually

820
00:30:59,679 --> 00:31:01,519
deposit deposited

821
00:31:01,519 --> 00:31:04,640
uh on the on the other end by the

822
00:31:04,640 --> 00:31:05,600
vendors

823
00:31:05,600 --> 00:31:08,799
so uh we we then started writing

824
00:31:08,799 --> 00:31:10,880
which uh which of the payments which of

825
00:31:10,880 --> 00:31:12,159
the checks that we sent

826
00:31:12,159 --> 00:31:13,760
weren't deposited like in the system

827
00:31:13,760 --> 00:31:16,080
itself uh initially we just started out

828
00:31:16,080 --> 00:31:19,760
well simple and um we just sent out the

829
00:31:19,760 --> 00:31:20,240
checks

830
00:31:20,240 --> 00:31:21,919
and manually we didn't have a lot of

831
00:31:21,919 --> 00:31:23,679
payments so menu we

832
00:31:23,679 --> 00:31:26,159
we had like our payment operations team

833
00:31:26,159 --> 00:31:27,840
like manually went payment by payment

834
00:31:27,840 --> 00:31:28,480
and see

835
00:31:28,480 --> 00:31:31,279
what was deposited and what wasn't so

836
00:31:31,279 --> 00:31:32,240
that's well that's

837
00:31:32,240 --> 00:31:34,720
the first option now uh the product has

838
00:31:34,720 --> 00:31:36,240
evolved and so

839
00:31:36,240 --> 00:31:39,760
we have better ways now and uh

840
00:31:39,760 --> 00:31:41,039
and one more question i actually have

841
00:31:41,039 --> 00:31:42,240
another question at the end after this

842
00:31:42,240 --> 00:31:44,080
one but um

843
00:31:44,080 --> 00:31:46,080
did did a similar issue or did this

844
00:31:46,080 --> 00:31:47,519
happen again or a similar issue happen

845
00:31:47,519 --> 00:31:48,559
again and did you

846
00:31:48,559 --> 00:31:50,000
i guess my second half of this question

847
00:31:50,000 --> 00:31:52,320
is did you think back to the previous

848
00:31:52,320 --> 00:31:53,200
incident and

849
00:31:53,200 --> 00:31:55,440
take learnings from it and uh know how

850
00:31:55,440 --> 00:31:56,240
to manage it better

851
00:31:56,240 --> 00:32:00,799
this time around um start with the

852
00:32:00,799 --> 00:32:05,120
um so no not the same issue

853
00:32:05,120 --> 00:32:08,720
we have had a lot of

854
00:32:08,720 --> 00:32:11,840
database issues

855
00:32:11,919 --> 00:32:14,640
as our traffic grows and the scale like

856
00:32:14,640 --> 00:32:15,679
exploded

857
00:32:15,679 --> 00:32:19,200
at times um i think uh

858
00:32:19,200 --> 00:32:21,679
we took like we learned a lot from each

859
00:32:21,679 --> 00:32:23,519
of these sessions and we

860
00:32:23,519 --> 00:32:27,840
we configure the the clusters better and

861
00:32:27,840 --> 00:32:29,600
we know more and more and we

862
00:32:29,600 --> 00:32:31,919
find out more metrics that are important

863
00:32:31,919 --> 00:32:32,960
for us

864
00:32:32,960 --> 00:32:36,799
and we learn to control processes better

865
00:32:36,799 --> 00:32:38,159
but

866
00:32:38,159 --> 00:32:42,399
it didn't happen again okay

867
00:32:42,399 --> 00:32:45,679
anna um

868
00:32:45,679 --> 00:32:47,919
no nothing similar as far as i remember

869
00:32:47,919 --> 00:32:49,679
appeared again

870
00:32:49,679 --> 00:32:52,640
um but in general it's pretty common

871
00:32:52,640 --> 00:32:53,919
type of uh

872
00:32:53,919 --> 00:32:57,279
issues with a lot of changes at the same

873
00:32:57,279 --> 00:32:58,080
time

874
00:32:58,080 --> 00:33:01,120
so that apparently continued to be

875
00:33:01,120 --> 00:33:05,039
an issue um but i think with a good

876
00:33:05,039 --> 00:33:06,720
monitoring you can eliminate it

877
00:33:06,720 --> 00:33:07,600
partially

878
00:33:07,600 --> 00:33:11,919
and um no i think that issue didn't

879
00:33:11,919 --> 00:33:13,919
happen again

880
00:33:13,919 --> 00:33:17,360
okay and oh go right ahead

881
00:33:17,360 --> 00:33:20,080
um actually we almost had a similar

882
00:33:20,080 --> 00:33:20,880
issue

883
00:33:20,880 --> 00:33:23,840
specifically with the checks again this

884
00:33:23,840 --> 00:33:24,880
translation from

885
00:33:24,880 --> 00:33:27,039
digital to physical is kind of it's not

886
00:33:27,039 --> 00:33:28,720
something we engineers are kind of used

887
00:33:28,720 --> 00:33:29,360
to

888
00:33:29,360 --> 00:33:33,840
um so uh we almost ran out of envelopes

889
00:33:33,840 --> 00:33:36,000
so initially we bought like a pack of i

890
00:33:36,000 --> 00:33:38,159
don't know a few thousand envelopes and

891
00:33:38,159 --> 00:33:39,120
we almost ran out

892
00:33:39,120 --> 00:33:41,279
luckily the bank notified us like look

893
00:33:41,279 --> 00:33:42,880
like you're at the bottom of the

894
00:33:42,880 --> 00:33:46,000
of the pack here and uh so

895
00:33:46,000 --> 00:33:49,840
we added a monitor uh like

896
00:33:49,840 --> 00:33:52,080
it is essentially it's like a disk like

897
00:33:52,080 --> 00:33:53,279
a disk space monitor

898
00:33:53,279 --> 00:33:54,799
it just monitors the amount of checks

899
00:33:54,799 --> 00:33:56,880
that we send versus the amount that we

900
00:33:56,880 --> 00:33:57,279
know

901
00:33:57,279 --> 00:34:00,399
that are in the pile it's like a like a

902
00:34:00,399 --> 00:34:01,360
stupid simple

903
00:34:01,360 --> 00:34:04,840
uh erp

904
00:34:04,840 --> 00:34:08,000
system uh for for envelopes yeah so it

905
00:34:08,000 --> 00:34:09,040
almost happened but

906
00:34:09,040 --> 00:34:11,119
yeah wait it didn't sometimes you have

907
00:34:11,119 --> 00:34:12,320
to think low tech too

908
00:34:12,320 --> 00:34:15,280
all right last couple minutes um so i

909
00:34:15,280 --> 00:34:16,000
just want to

910
00:34:16,000 --> 00:34:18,239
each of you to just briefly give me one

911
00:34:18,239 --> 00:34:20,560
short um you know piece of advice to

912
00:34:20,560 --> 00:34:22,320
junior engineers or even you know

913
00:34:22,320 --> 00:34:24,399
seasoned engineers um going through a

914
00:34:24,399 --> 00:34:25,599
failure or

915
00:34:25,599 --> 00:34:26,960
who have experienced failure something

916
00:34:26,960 --> 00:34:28,639
that you would say to them this is the

917
00:34:28,639 --> 00:34:29,918
advice i can give you

918
00:34:29,918 --> 00:34:32,320
um for my years of you know being

919
00:34:32,320 --> 00:34:33,440
through it uh

920
00:34:33,440 --> 00:34:36,159
how to handle it in real time and uh how

921
00:34:36,159 --> 00:34:37,679
to take the best learnings from these

922
00:34:37,679 --> 00:34:38,480
experiences

923
00:34:38,480 --> 00:34:42,000
so we'll start with you or uh okay so

924
00:34:42,000 --> 00:34:45,760
uh the first thing that i kind of put my

925
00:34:45,760 --> 00:34:48,719
my mind into when when there's a certain

926
00:34:48,719 --> 00:34:49,599
failure

927
00:34:49,599 --> 00:34:53,199
is that um you need to to be persistent

928
00:34:53,199 --> 00:34:55,199
with your like you're trying to find

929
00:34:55,199 --> 00:34:56,800
something in the system like

930
00:34:56,800 --> 00:34:59,440
trying to find where the failure is uh

931
00:34:59,440 --> 00:34:59,920
so

932
00:34:59,920 --> 00:35:02,800
don't give up like be persistent have

933
00:35:02,800 --> 00:35:03,760
like

934
00:35:03,760 --> 00:35:06,240
have first have an assumption of what

935
00:35:06,240 --> 00:35:08,079
might cause it and then try to

936
00:35:08,079 --> 00:35:11,359
um i forgot the word

937
00:35:11,359 --> 00:35:13,839
try to

938
00:35:14,560 --> 00:35:16,800
negate negate the assumption like try to

939
00:35:16,800 --> 00:35:17,760
look okay if

940
00:35:17,760 --> 00:35:19,599
if this were to happen if this

941
00:35:19,599 --> 00:35:21,119
assumption were true can i

942
00:35:21,119 --> 00:35:22,560
can i see it somewhere else in the

943
00:35:22,560 --> 00:35:24,560
system and this is like a

944
00:35:24,560 --> 00:35:26,960
this can be a tedious process but when

945
00:35:26,960 --> 00:35:28,960
you actually find the problem

946
00:35:28,960 --> 00:35:32,119
uh this way like in in a certain method

947
00:35:32,119 --> 00:35:35,440
methodological way way uh you'll get to

948
00:35:35,440 --> 00:35:37,440
the real actual issue without

949
00:35:37,440 --> 00:35:39,599
just throwing solutions at the system

950
00:35:39,599 --> 00:35:41,839
like yeah so the the main thing you try

951
00:35:41,839 --> 00:35:42,960
to avoid is to

952
00:35:42,960 --> 00:35:44,480
just throw stuff at the system and

953
00:35:44,480 --> 00:35:46,800
hoping that something works

954
00:35:46,800 --> 00:35:50,400
okay anna

955
00:35:51,040 --> 00:35:53,280
um i completely agree with zorr about

956
00:35:53,280 --> 00:35:55,280
having a methodology i think that's

957
00:35:55,280 --> 00:35:58,640
a super important thing and um

958
00:35:58,640 --> 00:36:00,720
i met some people were that were

959
00:36:00,720 --> 00:36:02,480
thinking that

960
00:36:02,480 --> 00:36:05,599
methodology is um slow

961
00:36:05,599 --> 00:36:07,920
that you can fix issue faster with just

962
00:36:07,920 --> 00:36:08,880
starting to fix

963
00:36:08,880 --> 00:36:12,079
something but it never actually

964
00:36:12,079 --> 00:36:15,599
worked um so i think the main

965
00:36:15,599 --> 00:36:18,480
advice i would give is um try to

966
00:36:18,480 --> 00:36:20,480
mitigate first as i said

967
00:36:20,480 --> 00:36:22,560
uh and more than that when you're doing

968
00:36:22,560 --> 00:36:24,480
any change to the system

969
00:36:24,480 --> 00:36:26,480
think of how would you mitigate it in

970
00:36:26,480 --> 00:36:27,520
case

971
00:36:27,520 --> 00:36:32,240
uh stuff hits the fan quoting or

972
00:36:33,839 --> 00:36:35,760
because i think yeah as soon as you

973
00:36:35,760 --> 00:36:37,920
mitigated it for user you have more

974
00:36:37,920 --> 00:36:40,560
time to start debugging methodologically

975
00:36:40,560 --> 00:36:43,280
and find the final issue

976
00:36:43,280 --> 00:36:46,800
awesome and wrap it up

977
00:36:46,800 --> 00:36:50,720
take it away uh so both oh and ana

978
00:36:50,720 --> 00:36:54,000
like very very valid points uh

979
00:36:54,000 --> 00:36:57,440
um i would add like that if something

980
00:36:57,440 --> 00:36:58,800
fails like

981
00:36:58,800 --> 00:37:01,440
try not to stress take a deep breath i

982
00:37:01,440 --> 00:37:03,119
usually start from looking at

983
00:37:03,119 --> 00:37:05,200
relevant code changes because most of

984
00:37:05,200 --> 00:37:06,400
the breakages are

985
00:37:06,400 --> 00:37:08,800
from from code changes so if you don't

986
00:37:08,800 --> 00:37:10,400
have like a

987
00:37:10,400 --> 00:37:13,520
like a clear log of uh

988
00:37:13,520 --> 00:37:15,680
what was what changes were made into

989
00:37:15,680 --> 00:37:17,359
production system

990
00:37:17,359 --> 00:37:20,880
create one it will help you a lot

991
00:37:20,880 --> 00:37:22,960
but other points are very valid

992
00:37:22,960 --> 00:37:24,000
methodology

993
00:37:24,000 --> 00:37:26,400
and understanding the real root cause is

994
00:37:26,400 --> 00:37:29,040
very important

995
00:37:29,200 --> 00:37:31,520
thank you all so much for an excellent

996
00:37:31,520 --> 00:37:33,599
session uh for sharing from your

997
00:37:33,599 --> 00:37:35,599
experience and enabling

998
00:37:35,599 --> 00:37:37,119
folks to understand how to take the

999
00:37:37,119 --> 00:37:38,079
growth and learning from these

1000
00:37:38,079 --> 00:37:40,400
experiences you've been very brave

1001
00:37:40,400 --> 00:37:42,800
we appreciate your joining us today

1002
00:37:42,800 --> 00:37:44,560
thank you so much and uh

1003
00:37:44,560 --> 00:37:47,680
let's uh keep donating and make sure

1004
00:37:47,680 --> 00:37:48,320
that

1005
00:37:48,320 --> 00:37:50,640
we get as much research out of this out

1006
00:37:50,640 --> 00:37:51,359
of this

1007
00:37:51,359 --> 00:37:54,000
project uh so feel free to donate um

1008
00:37:54,000 --> 00:37:54,800
because all this

1009
00:37:54,800 --> 00:37:56,480
all the proceeds are going to charity

1010
00:37:56,480 --> 00:38:02,880
thank you guys so much

