1
00:00:00,550 --> 00:00:17,490
[Music]

2
00:00:12,139 --> 00:00:21,090
and my name<font color="#E5E5E5"> is</font><font color="#CCCCCC"> carrie roberts a little</font>

3
00:00:17,490 --> 00:00:23,369
about me<font color="#E5E5E5"> i was i was a engineer for HP</font>

4
00:00:21,090 --> 00:00:25,680
for<font color="#E5E5E5"> ten years and then they started</font>

5
00:00:23,369 --> 00:00:28,050
<font color="#E5E5E5">laying off mechanical engineers and</font>

6
00:00:25,680 --> 00:00:31,800
<font color="#E5E5E5">hiring computer scientists</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> i switched</font>

7
00:00:28,050 --> 00:00:35,640
careers<font color="#E5E5E5"> and became a computer science</font>

8
00:00:31,800 --> 00:00:38,969
major<font color="#CCCCCC"> and went back</font><font color="#E5E5E5"> to HP and started</font>

9
00:00:35,640 --> 00:00:42,210
doing mobile app development and pc app

10
00:00:38,969 --> 00:00:44,250
development<font color="#E5E5E5"> and ended up as a web app</font>

11
00:00:42,210 --> 00:00:45,809
developer for a few years<font color="#CCCCCC"> so i was</font>

12
00:00:44,250 --> 00:00:47,879
developing<font color="#E5E5E5"> a</font><font color="#CCCCCC"> new product i</font><font color="#E5E5E5"> was mainly</font>

13
00:00:45,809 --> 00:00:49,649
<font color="#E5E5E5">the only developer so this whole web app</font>

14
00:00:47,879 --> 00:00:52,410
<font color="#CCCCCC">that was soon</font><font color="#E5E5E5"> to be released was my code</font>

15
00:00:49,649 --> 00:00:53,760
<font color="#E5E5E5">and management had a pen test done at</font>

16
00:00:52,410 --> 00:00:55,379
the time<font color="#CCCCCC"> i didn't know</font><font color="#E5E5E5"> what that</font><font color="#CCCCCC"> was and</font>

17
00:00:53,760 --> 00:00:57,899
<font color="#E5E5E5">i didn't even realize it was going on</font>

18
00:00:55,379 --> 00:01:00,660
<font color="#CCCCCC">but</font><font color="#E5E5E5"> my manager walked by and dropped a</font>

19
00:00:57,899 --> 00:01:04,260
report on<font color="#CCCCCC"> my desk</font><font color="#E5E5E5"> and says here fix this</font>

20
00:01:00,660 --> 00:01:07,350
red stuff<font color="#CCCCCC"> on here</font><font color="#E5E5E5"> so i pick it up and i</font>

21
00:01:04,260 --> 00:01:09,900
look<font color="#E5E5E5"> at it and it says this happens</font>

22
00:01:07,350 --> 00:01:12,809
laced with SQL injection<font color="#E5E5E5"> I'm like what</font>

23
00:01:09,900 --> 00:01:14,430
<font color="#E5E5E5">is that</font><font color="#CCCCCC"> and it's like we could</font><font color="#E5E5E5"> just do</font>

24
00:01:12,810 --> 00:01:16,020
<font color="#E5E5E5">this in this and delete your database</font>

25
00:01:14,430 --> 00:01:20,580
read your database<font color="#CCCCCC"> or whatever</font><font color="#E5E5E5"> I'm like</font>

26
00:01:16,020 --> 00:01:23,189
seriously<font color="#E5E5E5"> and I go to my desk and I try</font>

27
00:01:20,580 --> 00:01:26,759
it and<font color="#CCCCCC"> I just like turn to a ghost and</font>

28
00:01:23,189 --> 00:01:28,258
I'm like what the<font color="#E5E5E5"> heck</font><font color="#CCCCCC"> is going on</font><font color="#E5E5E5"> I've</font>

29
00:01:26,759 --> 00:01:29,880
<font color="#E5E5E5">never heard of this I just</font><font color="#CCCCCC"> got out of</font>

30
00:01:28,259 --> 00:01:32,549
computer science school how<font color="#CCCCCC"> come you</font>

31
00:01:29,880 --> 00:01:35,189
tell<font color="#E5E5E5"> me about this and and you know</font>

32
00:01:32,549 --> 00:01:38,759
there<font color="#CCCCCC"> were other big problems too</font><font color="#E5E5E5"> so I</font>

33
00:01:35,189 --> 00:01:40,889
you<font color="#CCCCCC"> know I</font><font color="#E5E5E5"> really hung my head and</font>

34
00:01:38,759 --> 00:01:42,960
<font color="#E5E5E5">dropped my shoulders and my</font><font color="#CCCCCC"> husband</font>

35
00:01:40,890 --> 00:01:45,630
remembers the day I got home that<font color="#E5E5E5"> day I</font>

36
00:01:42,960 --> 00:01:47,610
was like<font color="#CCCCCC"> I think I can't be a developer</font>

37
00:01:45,630 --> 00:01:49,408
I don't know<font color="#E5E5E5"> anything about security and</font>

38
00:01:47,610 --> 00:01:52,920
he encouraged me<font color="#CCCCCC"> to go learn</font><font color="#E5E5E5"> about</font>

39
00:01:49,409 --> 00:01:55,500
<font color="#E5E5E5">security</font><font color="#CCCCCC"> so I took a secure</font><font color="#E5E5E5"> developing</font>

40
00:01:52,920 --> 00:01:57,119
class from sans<font color="#E5E5E5"> I was really impressed</font>

41
00:01:55,500 --> 00:01:58,710
with<font color="#CCCCCC"> that</font><font color="#E5E5E5"> I started feeling a</font><font color="#CCCCCC"> little</font>

42
00:01:57,119 --> 00:02:00,479
better<font color="#E5E5E5"> about things</font><font color="#CCCCCC"> it was</font><font color="#E5E5E5"> actually</font>

43
00:01:58,710 --> 00:02:03,419
really easy vulnerabilities<font color="#CCCCCC"> to fix if</font>

44
00:02:00,479 --> 00:02:04,789
you just knew<font color="#CCCCCC"> that you needed</font><font color="#E5E5E5"> to worry</font>

45
00:02:03,420 --> 00:02:08,759
about these<font color="#E5E5E5"> things</font>

46
00:02:04,790 --> 00:02:10,950
so it<font color="#E5E5E5"> got that all fixed up I decided</font>

47
00:02:08,758 --> 00:02:11,500
<font color="#CCCCCC">that the training</font><font color="#E5E5E5"> was so cool that I</font>

48
00:02:10,949 --> 00:02:13,780
want

49
00:02:11,500 --> 00:02:17,800
<font color="#E5E5E5">to go on and do a lot more</font><font color="#CCCCCC"> from Sam's I</font>

50
00:02:13,780 --> 00:02:19,720
got the<font color="#CCCCCC"> Sam's masters</font><font color="#E5E5E5"> recently and I'm</font>

51
00:02:17,800 --> 00:02:25,660
feeling a lot better about<font color="#E5E5E5"> things and</font>

52
00:02:19,720 --> 00:02:27,550
then I was that day I<font color="#CCCCCC"> I started out as a</font>

53
00:02:25,660 --> 00:02:31,690
pen<font color="#E5E5E5"> tester</font><font color="#CCCCCC"> for Black</font><font color="#E5E5E5"> Hills three years</font>

54
00:02:27,550 --> 00:02:33,700
ago and I owe so much<font color="#CCCCCC"> to John and</font><font color="#E5E5E5"> the</font>

55
00:02:31,690 --> 00:02:36,100
Black Hills team for<font color="#E5E5E5"> giving me a start</font>

56
00:02:33,700 --> 00:02:38,470
and for<font color="#E5E5E5"> everything</font><font color="#CCCCCC"> I learned</font><font color="#E5E5E5"> from them I</font>

57
00:02:36,100 --> 00:02:41,049
recently moved on to the<font color="#E5E5E5"> Walmart</font><font color="#CCCCCC"> Red</font>

58
00:02:38,470 --> 00:02:44,260
<font color="#CCCCCC">Team for a chance</font><font color="#E5E5E5"> to do red teaming</font><font color="#CCCCCC"> full</font>

59
00:02:41,050 --> 00:02:48,040
<font color="#E5E5E5">time and that's been a blast</font><font color="#CCCCCC"> too a</font>

60
00:02:44,260 --> 00:02:49,720
mother of six kids and I just<font color="#CCCCCC"> had to</font>

61
00:02:48,040 --> 00:02:54,640
<font color="#E5E5E5">clarify because we did have puppies this</font>

62
00:02:49,720 --> 00:03:00,610
week<font color="#E5E5E5"> and but they're all boys except</font>

63
00:02:54,640 --> 00:03:02,320
<font color="#E5E5E5">five and and my twitter handle</font><font color="#CCCCCC"> is or one</font>

64
00:03:00,610 --> 00:03:05,620
equals<font color="#CCCCCC"> one</font><font color="#E5E5E5"> and that's just a tribute</font><font color="#CCCCCC"> to</font>

65
00:03:02,320 --> 00:03:09,370
the<font color="#E5E5E5"> to the vulnerability</font><font color="#CCCCCC"> that started me</font>

66
00:03:05,620 --> 00:03:12,430
down this whole fun career path<font color="#E5E5E5"> so today</font>

67
00:03:09,370 --> 00:03:15,280
I'm demoing<font color="#E5E5E5"> the domain password audit</font><font color="#CCCCCC"> to</font>

68
00:03:12,430 --> 00:03:16,930
which you feed it information<font color="#CCCCCC"> from your</font>

69
00:03:15,280 --> 00:03:19,750
domain<font color="#E5E5E5"> controller about</font><font color="#CCCCCC"> your password</font>

70
00:03:16,930 --> 00:03:22,299
hashes along with any passwords you've

71
00:03:19,750 --> 00:03:25,209
been able<font color="#E5E5E5"> to crack and it generates an</font>

72
00:03:22,299 --> 00:03:27,820
HTML report<font color="#CCCCCC"> it's a Python</font><font color="#E5E5E5"> script and</font>

73
00:03:25,209 --> 00:03:31,570
it's available at<font color="#CCCCCC"> that github location</font>

74
00:03:27,820 --> 00:03:33,970
<font color="#E5E5E5">and for anyone to use</font><font color="#CCCCCC"> and it just makes</font>

75
00:03:31,570 --> 00:03:36,609
<font color="#E5E5E5">this HTML report that says how many</font>

76
00:03:33,970 --> 00:03:39,010
hashes you have how many<font color="#E5E5E5"> you're able to</font>

77
00:03:36,610 --> 00:03:42,010
<font color="#E5E5E5">crack how many are unique how many of</font>

78
00:03:39,010 --> 00:03:43,359
the weaker<font color="#E5E5E5"> LM hashes were stored</font><font color="#CCCCCC"> what</font>

79
00:03:42,010 --> 00:03:46,328
are the<font color="#E5E5E5"> lengths of the password she</font>

80
00:03:43,360 --> 00:03:49,120
cracked in<font color="#CCCCCC"> the quantities of those what</font>

81
00:03:46,329 --> 00:03:52,200
<font color="#E5E5E5">are the top passwords used and who's</font>

82
00:03:49,120 --> 00:03:53,980
reusing the same<font color="#E5E5E5"> passwords and</font><font color="#CCCCCC"> is</font>

83
00:03:52,200 --> 00:03:56,048
interactive so<font color="#CCCCCC"> you can click on</font><font color="#E5E5E5"> the</font>

84
00:03:53,980 --> 00:03:58,470
<font color="#E5E5E5">details to find out more</font><font color="#CCCCCC"> about each of</font>

85
00:03:56,049 --> 00:03:58,470
those categories

86
00:03:58,930 --> 00:04:06,470
so here on<font color="#CCCCCC"> CLR</font><font color="#E5E5E5"> 2 of 8 /d Pat you can</font>

87
00:04:03,620 --> 00:04:08,720
find the code<font color="#E5E5E5"> in my</font><font color="#CCCCCC"> humble opinion it</font>

88
00:04:06,470 --> 00:04:13,040
has<font color="#E5E5E5"> an awesome readme everything you</font>

89
00:04:08,720 --> 00:04:16,310
need to know<font color="#E5E5E5"> about using this including</font>

90
00:04:13,040 --> 00:04:18,409
a link<font color="#E5E5E5"> to where I have the sample</font><font color="#CCCCCC"> report</font>

91
00:04:16,310 --> 00:04:21,738
so this<font color="#CCCCCC"> example of the report that</font><font color="#E5E5E5"> gets</font>

92
00:04:18,410 --> 00:04:24,889
generated<font color="#E5E5E5"> when you use this tool</font><font color="#CCCCCC"> it's a</font>

93
00:04:21,738 --> 00:04:26,450
Python<font color="#CCCCCC"> script that will take information</font>

94
00:04:24,889 --> 00:04:29,470
<font color="#E5E5E5">that you've dumped from a domain</font>

95
00:04:26,450 --> 00:04:32,930
<font color="#E5E5E5">controller so</font><font color="#CCCCCC"> usernames and</font><font color="#E5E5E5"> hashes</font><font color="#CCCCCC"> in</font>

96
00:04:29,470 --> 00:04:35,450
<font color="#CCCCCC">combination with password cracking</font><font color="#E5E5E5"> file</font>

97
00:04:32,930 --> 00:04:37,160
so<font color="#E5E5E5"> you try to correct those hashes and</font>

98
00:04:35,450 --> 00:04:39,520
you<font color="#E5E5E5"> combine those</font><font color="#CCCCCC"> two pieces</font><font color="#E5E5E5"> of</font>

99
00:04:37,160 --> 00:04:44,360
<font color="#CCCCCC">information together to get this</font>

100
00:04:39,520 --> 00:04:46,520
interactive<font color="#E5E5E5"> HTML statistics report for</font>

101
00:04:44,360 --> 00:04:50,540
password usage I've posted the<font color="#E5E5E5"> sample</font>

102
00:04:46,520 --> 00:04:52,639
report<font color="#CCCCCC"> right here at D pad</font><font color="#E5E5E5"> website you</font>

103
00:04:50,540 --> 00:04:58,450
can go there and<font color="#E5E5E5"> play</font><font color="#CCCCCC"> with the sample</font>

104
00:04:52,639 --> 00:05:01,010
<font color="#CCCCCC">report</font><font color="#E5E5E5"> if you</font><font color="#CCCCCC"> would like so on this site</font>

105
00:04:58,450 --> 00:05:03,229
we've<font color="#E5E5E5"> got a link to the sample</font><font color="#CCCCCC"> report</font>

106
00:05:01,010 --> 00:05:04,789
here and<font color="#E5E5E5"> also the sanitized version of</font>

107
00:05:03,229 --> 00:05:07,250
<font color="#E5E5E5">the sample</font><font color="#CCCCCC"> report which will</font><font color="#E5E5E5"> talk about</font>

108
00:05:04,789 --> 00:05:09,830
<font color="#E5E5E5">how to make those but</font><font color="#CCCCCC"> before we jump</font>

109
00:05:07,250 --> 00:05:11,510
into<font color="#E5E5E5"> the report we need to understand a</font>

110
00:05:09,830 --> 00:05:14,870
<font color="#CCCCCC">few things about the data we're looking</font>

111
00:05:11,510 --> 00:05:17,270
at<font color="#E5E5E5"> including the difference between the</font>

112
00:05:14,870 --> 00:05:21,440
two types of hashes<font color="#E5E5E5"> LM and</font><font color="#CCCCCC"> anti hashes</font>

113
00:05:17,270 --> 00:05:23,450
that<font color="#E5E5E5"> you'll look at so when we dump</font>

114
00:05:21,440 --> 00:05:25,789
information from<font color="#E5E5E5"> a</font><font color="#CCCCCC"> domain controller we</font>

115
00:05:23,450 --> 00:05:28,370
get<font color="#CCCCCC"> information in this</font><font color="#E5E5E5"> warm out it</font>

116
00:05:25,789 --> 00:05:31,280
comes<font color="#E5E5E5"> in domain</font><font color="#CCCCCC"> slash user name and then</font>

117
00:05:28,370 --> 00:05:33,740
colon<font color="#E5E5E5"> rid which is ID number and then</font>

118
00:05:31,280 --> 00:05:39,380
colon the LM hash and colon the empty

119
00:05:33,740 --> 00:05:40,729
hash so example line item would<font color="#E5E5E5"> be like</font>

120
00:05:39,380 --> 00:05:44,120
test dot local would be the domain

121
00:05:40,729 --> 00:05:47,690
<font color="#E5E5E5">Freddy fish would be the user 1 2 3 4 5</font>

122
00:05:44,120 --> 00:05:49,580
is the rid and this whole box here the

123
00:05:47,690 --> 00:05:53,120
green and blue together<font color="#E5E5E5"> is the LM hash</font>

124
00:05:49,580 --> 00:05:55,580
and then<font color="#E5E5E5"> the last entry FF through AF is</font>

125
00:05:53,120 --> 00:06:01,039
the NT hash so we've got user names<font color="#E5E5E5"> and</font>

126
00:05:55,580 --> 00:06:03,770
<font color="#E5E5E5">LM and an T hash for each user so these</font>

127
00:06:01,039 --> 00:06:06,530
the element<font color="#CCCCCC"> an T hash are both a hash of</font>

128
00:06:03,770 --> 00:06:10,669
<font color="#E5E5E5">the same password but the LM hash is</font>

129
00:06:06,530 --> 00:06:11,969
much easier<font color="#CCCCCC"> to crack so it's a weakness</font>

130
00:06:10,669 --> 00:06:14,830
if

131
00:06:11,970 --> 00:06:17,320
in terms<font color="#E5E5E5"> of security if you're storing a</font>

132
00:06:14,830 --> 00:06:20,700
valid LM hash for<font color="#E5E5E5"> the password</font><font color="#CCCCCC"> because</font>

133
00:06:17,320 --> 00:06:23,469
it's so easily reversible or crackable

134
00:06:20,700 --> 00:06:25,870
so we'll talk<font color="#E5E5E5"> a little bit about the LM</font>

135
00:06:23,470 --> 00:06:29,680
hash<font color="#E5E5E5"> we take an example password like</font>

136
00:06:25,870 --> 00:06:32,410
admin guru here and to create the LM

137
00:06:29,680 --> 00:06:35,560
hash what happens is the<font color="#CCCCCC"> algorithm takes</font>

138
00:06:32,410 --> 00:06:37,540
the first seven characters and it turns

139
00:06:35,560 --> 00:06:41,080
<font color="#E5E5E5">them in the upper case as shown here</font>

140
00:06:37,540 --> 00:06:46,180
admin<font color="#E5E5E5"> to you and then</font><font color="#CCCCCC"> it hash</font><font color="#E5E5E5"> is just</font>

141
00:06:41,080 --> 00:06:47,620
those seven characters in<font color="#CCCCCC"> uppercase and</font>

142
00:06:46,180 --> 00:06:50,350
then it takes<font color="#E5E5E5"> the right seven characters</font>

143
00:06:47,620 --> 00:06:54,790
in this case just ru hashes those and

144
00:06:50,350 --> 00:06:56,650
gets a hash of 0<font color="#E5E5E5"> to 2 or 3 o6e</font><font color="#CCCCCC"> and then</font>

145
00:06:54,790 --> 00:06:59,770
it puts those two patches together<font color="#CCCCCC"> and</font>

146
00:06:56,650 --> 00:07:01,419
puts them as the LM hash so we got the

147
00:06:59,770 --> 00:07:05,229
left<font color="#CCCCCC"> half of the past</font><font color="#E5E5E5"> or the right half</font>

148
00:07:01,419 --> 00:07:07,359
of the password hashed<font color="#CCCCCC"> and LM hash can</font>

149
00:07:05,229 --> 00:07:09,520
only be used<font color="#E5E5E5"> when the password is 14 or</font>

150
00:07:07,360 --> 00:07:11,530
less<font color="#E5E5E5"> characters so that's an important</font>

151
00:07:09,520 --> 00:07:14,049
detail about hashes<font color="#CCCCCC"> that we need to</font>

152
00:07:11,530 --> 00:07:18,549
understand<font color="#E5E5E5"> when</font><font color="#CCCCCC"> we look at</font><font color="#E5E5E5"> the</font>

153
00:07:14,050 --> 00:07:20,860
statistics<font color="#CCCCCC"> in the report in the case</font>

154
00:07:18,550 --> 00:07:23,350
that<font color="#CCCCCC"> the domain controller the active</font>

155
00:07:20,860 --> 00:07:25,240
<font color="#CCCCCC">directory is not</font><font color="#E5E5E5"> storing the LM hash it</font>

156
00:07:23,350 --> 00:07:28,830
will put a dummy value<font color="#E5E5E5"> in here it's</font>

157
00:07:25,240 --> 00:07:33,039
<font color="#CCCCCC">actually the hash of blank</font><font color="#E5E5E5"> so if we</font>

158
00:07:28,830 --> 00:07:37,169
search for blank<font color="#E5E5E5"> LM hash it's easy to</font>

159
00:07:33,039 --> 00:07:41,110
find out what that<font color="#CCCCCC"> is it's this</font><font color="#E5E5E5"> value</font>

160
00:07:37,169 --> 00:07:43,930
and that's the value that<font color="#CCCCCC"> will be</font><font color="#E5E5E5"> put in</font>

161
00:07:41,110 --> 00:07:45,729
there in the case<font color="#CCCCCC"> that the active</font>

162
00:07:43,930 --> 00:07:48,250
<font color="#E5E5E5">directory</font><font color="#CCCCCC"> is configured not to store</font><font color="#E5E5E5"> the</font>

163
00:07:45,729 --> 00:07:51,669
LM hash<font color="#CCCCCC"> it'll put that dummy value</font><font color="#E5E5E5"> or</font>

164
00:07:48,250 --> 00:07:54,910
the blank<font color="#E5E5E5"> hash</font><font color="#CCCCCC"> okay so now that we</font>

165
00:07:51,669 --> 00:07:57,669
understand that hopefully<font color="#E5E5E5"> most folks</font>

166
00:07:54,910 --> 00:08:02,110
have disabled or LM in<font color="#CCCCCC"> their eighty by</font>

167
00:07:57,669 --> 00:08:06,729
now just true yeah hopefully<font color="#E5E5E5"> they</font><font color="#CCCCCC"> have I</font>

168
00:08:02,110 --> 00:08:08,740
have yet to find<font color="#CCCCCC"> a password hash dump</font>

169
00:08:06,729 --> 00:08:11,440
from<font color="#E5E5E5"> a domain controller that it doesn't</font>

170
00:08:08,740 --> 00:08:13,000
have some<font color="#CCCCCC"> LM hashes in</font><font color="#E5E5E5"> it they may be</font>

171
00:08:11,440 --> 00:08:16,000
<font color="#E5E5E5">required in that</font><font color="#CCCCCC"> environment</font><font color="#E5E5E5"> for a</font>

172
00:08:13,000 --> 00:08:18,789
reverse compatibility and a lot<font color="#E5E5E5"> of times</font>

173
00:08:16,000 --> 00:08:23,140
<font color="#E5E5E5">there's only a few hundred but I still</font>

174
00:08:18,789 --> 00:08:25,449
see some<font color="#E5E5E5"> on a regular basis</font><font color="#CCCCCC"> so if we go</font>

175
00:08:23,140 --> 00:08:32,330
to<font color="#E5E5E5"> the sample</font><font color="#CCCCCC"> report</font>

176
00:08:25,449 --> 00:08:34,490
we see that we've got<font color="#CCCCCC"> eighty-eight</font>

177
00:08:32,330 --> 00:08:37,459
thousand eight<font color="#E5E5E5"> hundred three hashes that</font>

178
00:08:34,490 --> 00:08:41,209
<font color="#CCCCCC">we're look</font><font color="#E5E5E5"> that we're analyzing in our</font>

179
00:08:37,458 --> 00:08:43,039
sample data<font color="#CCCCCC"> and</font><font color="#E5E5E5"> just a warning</font><font color="#CCCCCC"> if you</font>

180
00:08:41,208 --> 00:08:44,540
click<font color="#E5E5E5"> on these details if any of these</font>

181
00:08:43,039 --> 00:08:46,610
first three details since there's

182
00:08:44,540 --> 00:08:47,779
<font color="#CCCCCC">eighty-eight</font><font color="#E5E5E5"> thousand rows it takes a</font>

183
00:08:46,610 --> 00:08:49,970
while<font color="#E5E5E5"> to load I'm going to start loading</font>

184
00:08:47,779 --> 00:08:52,610
this to look out later but it<font color="#E5E5E5"> will take</font>

185
00:08:49,970 --> 00:08:55,310
a minute to load all<font color="#CCCCCC"> that into one</font><font color="#E5E5E5"> HTML</font>

186
00:08:52,610 --> 00:08:57,620
<font color="#E5E5E5">page and then the next column showed you</font>

187
00:08:55,310 --> 00:09:02,479
how<font color="#CCCCCC"> many</font><font color="#E5E5E5"> of those password hashes are</font>

188
00:08:57,620 --> 00:09:08,360
unique so this indicates<font color="#E5E5E5"> how</font><font color="#CCCCCC"> many</font><font color="#E5E5E5"> users</font>

189
00:09:02,480 --> 00:09:10,310
are sharing a password and<font color="#E5E5E5"> then then the</font>

190
00:09:08,360 --> 00:09:13,640
next four lines just show counts and

191
00:09:10,310 --> 00:09:16,250
percentages of hashes that<font color="#E5E5E5"> we were</font><font color="#CCCCCC"> able</font>

192
00:09:13,640 --> 00:09:20,990
to correct<font color="#E5E5E5"> so in this case we we cracked</font>

193
00:09:16,250 --> 00:09:23,510
78% of the hashes<font color="#CCCCCC"> and then you can</font>

194
00:09:20,990 --> 00:09:25,820
optionally pass in a list of members of

195
00:09:23,510 --> 00:09:27,620
special groups whatever groups you<font color="#E5E5E5"> want</font>

196
00:09:25,820 --> 00:09:32,440
so in this case I passed in a list of

197
00:09:27,620 --> 00:09:35,720
domain admins and<font color="#CCCCCC"> Enterprise admins and</font>

198
00:09:32,440 --> 00:09:41,570
we can click<font color="#E5E5E5"> here for more details so</font>

199
00:09:35,720 --> 00:09:45,649
for the domain admins group this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> slow</font>

200
00:09:41,570 --> 00:09:54,380
<font color="#CCCCCC">I haven't done this with other people</font>

201
00:09:45,649 --> 00:09:56,480
<font color="#E5E5E5">clicking on stuff at the same time</font><font color="#CCCCCC"> okay</font>

202
00:09:54,380 --> 00:10:02,870
we'll come<font color="#E5E5E5"> back to</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> so I'm going</font><font color="#CCCCCC"> to</font>

203
00:09:56,480 --> 00:10:05,450
open<font color="#E5E5E5"> this</font><font color="#CCCCCC"> in a separate</font><font color="#E5E5E5"> tab and also</font><font color="#CCCCCC"> the</font>

204
00:10:02,870 --> 00:10:07,160
enterprise admin so then we go down<font color="#E5E5E5"> and</font>

205
00:10:05,450 --> 00:10:12,380
<font color="#E5E5E5">this is why we needed to understand</font><font color="#CCCCCC"> the</font>

206
00:10:07,160 --> 00:10:15,860
<font color="#E5E5E5">llm hashes so</font><font color="#CCCCCC"> we have 227</font><font color="#E5E5E5"> LM hashes so</font>

207
00:10:12,380 --> 00:10:19,610
<font color="#E5E5E5">this has come and I see out of a large</font>

208
00:10:15,860 --> 00:10:23,149
domain there'll be some<font color="#CCCCCC"> LM hashes in</font>

209
00:10:19,610 --> 00:10:25,519
<font color="#E5E5E5">this case there were 227 226</font><font color="#CCCCCC"> we're</font>

210
00:10:23,149 --> 00:10:28,550
unique means that<font color="#E5E5E5"> one</font><font color="#CCCCCC"> two users shared</font>

211
00:10:25,519 --> 00:10:31,790
the same password and had an<font color="#E5E5E5"> LM hash</font>

212
00:10:28,550 --> 00:10:35,689
there so and<font color="#E5E5E5"> then I like to report on</font>

213
00:10:31,790 --> 00:10:37,430
what passwords were I able<font color="#E5E5E5"> to crack only</font>

214
00:10:35,690 --> 00:10:39,010
<font color="#E5E5E5">because I had the LM hash I mentioned</font>

215
00:10:37,430 --> 00:10:41,050
the LM hash

216
00:10:39,010 --> 00:10:45,090
much easier<font color="#E5E5E5"> to crack you can crack all</font>

217
00:10:41,050 --> 00:10:49,839
possible<font color="#E5E5E5"> LM hashes with in a few</font><font color="#CCCCCC"> minutes</font>

218
00:10:45,090 --> 00:10:53,500
<font color="#CCCCCC">we're the NT hash may take forever to</font>

219
00:10:49,840 --> 00:10:57,010
crack depending on the complexity so in

220
00:10:53,500 --> 00:10:59,200
this<font color="#E5E5E5"> case there</font><font color="#CCCCCC"> were</font><font color="#E5E5E5"> six passwords we</font>

221
00:10:57,010 --> 00:11:01,120
were able<font color="#CCCCCC"> to crack</font><font color="#E5E5E5"> because we had the</font>

222
00:10:59,200 --> 00:11:03,040
<font color="#CCCCCC">week LM hash if we hadn't had the week</font>

223
00:11:01,120 --> 00:11:05,290
LM hash we wouldn't cracked it so in the

224
00:11:03,040 --> 00:11:07,540
time we spent cracking and<font color="#E5E5E5"> T hashes we</font>

225
00:11:05,290 --> 00:11:11,530
didn't crack it but we did crack<font color="#E5E5E5"> the LM</font>

226
00:11:07,540 --> 00:11:19,719
version<font color="#CCCCCC"> and then we have some</font><font color="#E5E5E5"> past</font>

227
00:11:11,530 --> 00:11:22,030
sweared<font color="#CCCCCC"> link stats</font><font color="#E5E5E5"> and then so it has</font>

228
00:11:19,720 --> 00:11:23,890
the password<font color="#E5E5E5"> link to</font><font color="#CCCCCC"> one through</font>

229
00:11:22,030 --> 00:11:27,339
whatever the different<font color="#CCCCCC"> password</font><font color="#E5E5E5"> links</font>

230
00:11:23,890 --> 00:11:29,350
are how<font color="#CCCCCC"> many</font><font color="#E5E5E5"> people are</font><font color="#CCCCCC"> using that</font>

231
00:11:27,340 --> 00:11:31,060
length of password and of course this is

232
00:11:29,350 --> 00:11:33,940
only<font color="#CCCCCC"> for the</font><font color="#E5E5E5"> passwords we were able</font><font color="#CCCCCC"> to</font>

233
00:11:31,060 --> 00:11:36,040
<font color="#E5E5E5">crack if we couldn't crack them and we</font>

234
00:11:33,940 --> 00:11:39,820
only have<font color="#E5E5E5"> - we don't know how long the</font>

235
00:11:36,040 --> 00:11:42,910
password is if you want<font color="#E5E5E5"> details on those</font>

236
00:11:39,820 --> 00:11:46,120
like who is using<font color="#E5E5E5"> a</font><font color="#CCCCCC"> two character</font>

237
00:11:42,910 --> 00:11:51,189
password you click the details and it

238
00:11:46,120 --> 00:11:53,110
lists the three users<font color="#CCCCCC"> what so but</font>

239
00:11:51,190 --> 00:12:01,060
there's some guy<font color="#CCCCCC"> out there using a one</font>

240
00:11:53,110 --> 00:12:02,500
character<font color="#CCCCCC"> Bill</font><font color="#E5E5E5"> had a question so if</font>

241
00:12:01,060 --> 00:12:04,780
someone has a password<font color="#E5E5E5"> with 15</font>

242
00:12:02,500 --> 00:12:06,880
<font color="#E5E5E5">characters or more there would be a</font>

243
00:12:04,780 --> 00:12:11,680
blank<font color="#CCCCCC"> LM hash and therefore it would be</font>

244
00:12:06,880 --> 00:12:14,050
uncrackable<font color="#CCCCCC"> sorry yeah there would</font><font color="#E5E5E5"> be</font>

245
00:12:11,680 --> 00:12:16,089
<font color="#E5E5E5">the blank LM hash but it's not</font>

246
00:12:14,050 --> 00:12:18,939
necessarily<font color="#E5E5E5"> uncrackable</font><font color="#CCCCCC"> it's just that</font>

247
00:12:16,090 --> 00:12:25,600
it takes<font color="#CCCCCC"> a lot more computing resource</font>

248
00:12:18,940 --> 00:12:28,120
to crack the NT hash so the LM hash is

249
00:12:25,600 --> 00:12:30,310
broken<font color="#CCCCCC"> two to seven character passwords</font>

250
00:12:28,120 --> 00:12:32,350
so in<font color="#E5E5E5"> order</font><font color="#CCCCCC"> to crack it all you</font><font color="#E5E5E5"> have to</font>

251
00:12:30,310 --> 00:12:34,900
do is try<font color="#CCCCCC"> all possible combinations of</font>

252
00:12:32,350 --> 00:12:39,190
<font color="#CCCCCC">seven character passwords which doesn't</font>

253
00:12:34,900 --> 00:12:43,079
<font color="#CCCCCC">take too long but you get up the number</font>

254
00:12:39,190 --> 00:12:46,000
<font color="#E5E5E5">of combinations increases exponentially</font>

255
00:12:43,080 --> 00:12:48,790
<font color="#E5E5E5">so if now you're trying to do all</font>

256
00:12:46,000 --> 00:12:51,310
possible<font color="#E5E5E5"> combinations of a 15 character</font>

257
00:12:48,790 --> 00:12:53,740
password<font color="#E5E5E5"> that takes years so</font>

258
00:12:51,310 --> 00:12:58,300
to<font color="#E5E5E5"> correct that full</font><font color="#CCCCCC"> ante password</font><font color="#E5E5E5"> could</font>

259
00:12:53,740 --> 00:13:03,430
take an unreasonable<font color="#CCCCCC"> amount of time to</font>

260
00:12:58,300 --> 00:13:05,529
crack<font color="#CCCCCC"> so we</font><font color="#E5E5E5"> tried so what we do in</font><font color="#CCCCCC"> that</font>

261
00:13:03,430 --> 00:13:07,089
<font color="#CCCCCC">case when we're</font><font color="#E5E5E5"> cracking anti passwords</font>

262
00:13:05,529 --> 00:13:09,600
that<font color="#CCCCCC"> are longer</font><font color="#E5E5E5"> is we're</font><font color="#CCCCCC"> using a</font>

263
00:13:07,090 --> 00:13:13,630
password list<font color="#E5E5E5"> say here's a common</font>

264
00:13:09,600 --> 00:13:15,610
password like based<font color="#E5E5E5"> on other password</font>

265
00:13:13,630 --> 00:13:18,910
breaches in the<font color="#E5E5E5"> past we say people</font>

266
00:13:15,610 --> 00:13:21,370
really like<font color="#CCCCCC"> to do a do a password of</font>

267
00:13:18,910 --> 00:13:24,250
lettuce<font color="#E5E5E5"> no and so that's a long ish</font>

268
00:13:21,370 --> 00:13:25,900
password<font color="#CCCCCC"> one that would take a long</font><font color="#E5E5E5"> time</font>

269
00:13:24,250 --> 00:13:27,430
<font color="#CCCCCC">to</font><font color="#E5E5E5"> get if you're just brute forcing all</font>

270
00:13:25,900 --> 00:13:29,620
possible combinations of that<font color="#E5E5E5"> many</font>

271
00:13:27,430 --> 00:13:31,540
<font color="#CCCCCC">characters but</font><font color="#E5E5E5"> since it's</font><font color="#CCCCCC"> something that</font>

272
00:13:29,620 --> 00:13:33,730
people<font color="#CCCCCC"> are likely to use its using</font>

273
00:13:31,540 --> 00:13:37,180
dictionary words we could probably<font color="#CCCCCC"> pack</font>

274
00:13:33,730 --> 00:13:39,580
crack that<font color="#E5E5E5"> that empty hash</font><font color="#CCCCCC"> so if we look</font>

275
00:13:37,180 --> 00:13:41,890
at<font color="#CCCCCC"> this one that has 39</font><font color="#E5E5E5"> characters long</font>

276
00:13:39,580 --> 00:13:43,750
<font color="#CCCCCC">oh it doesn't have</font><font color="#E5E5E5"> the detail there</font>

277
00:13:41,890 --> 00:13:48,850
we'll see<font color="#CCCCCC"> it later but some passwords</font>

278
00:13:43,750 --> 00:13:52,089
<font color="#E5E5E5">are are predictable based on human</font>

279
00:13:48,850 --> 00:13:54,310
nature of guessing passwords so longer

280
00:13:52,089 --> 00:14:00,250
<font color="#E5E5E5">ante hashes are crackable if we can</font>

281
00:13:54,310 --> 00:14:02,650
guess what<font color="#CCCCCC"> that password</font><font color="#E5E5E5"> might be what</font>

282
00:14:00,250 --> 00:14:08,860
<font color="#E5E5E5">about a blank ntlm would it show</font>

283
00:14:02,650 --> 00:14:10,990
password<font color="#E5E5E5"> length of</font><font color="#CCCCCC"> 0 yes but I've I'm</font>

284
00:14:08,860 --> 00:14:13,420
not showing those there there's<font color="#CCCCCC"> usually</font>

285
00:14:10,990 --> 00:14:15,460
is commonly passwords in the environment

286
00:14:13,420 --> 00:14:18,939
with a<font color="#CCCCCC"> password length of</font><font color="#E5E5E5"> 0 because it's</font>

287
00:14:15,460 --> 00:14:21,610
a blank password and I've not<font color="#E5E5E5"> shown</font>

288
00:14:18,940 --> 00:14:23,230
these on the list<font color="#E5E5E5"> typically those aren't</font>

289
00:14:21,610 --> 00:14:25,150
able to<font color="#E5E5E5"> be logged</font><font color="#CCCCCC"> into and in</font>

290
00:14:23,230 --> 00:14:28,000
environments<font color="#E5E5E5"> so I've just haven't</font><font color="#CCCCCC"> listed</font>

291
00:14:25,150 --> 00:14:29,860
those here if the<font color="#E5E5E5"> empty hash is the hash</font>

292
00:14:28,000 --> 00:14:36,630
of blank then the password<font color="#E5E5E5"> actually is</font>

293
00:14:29,860 --> 00:14:40,180
blank<font color="#E5E5E5"> and then the</font><font color="#CCCCCC"> second table</font><font color="#E5E5E5"> here is</font>

294
00:14:36,630 --> 00:14:41,890
the same<font color="#E5E5E5"> information but sorted by</font>

295
00:14:40,180 --> 00:14:44,589
descending count so we<font color="#CCCCCC"> see the most</font>

296
00:14:41,890 --> 00:14:47,830
passwords are<font color="#E5E5E5"> 6 characters in length</font>

297
00:14:44,589 --> 00:14:51,790
<font color="#E5E5E5">then next is 78 so it's just a</font><font color="#CCCCCC"> different</font>

298
00:14:47,830 --> 00:14:55,450
<font color="#E5E5E5">look at the same data</font><font color="#CCCCCC"> okay and so</font><font color="#E5E5E5"> top</font>

299
00:14:51,790 --> 00:14:57,760
password<font color="#CCCCCC"> use statistics welcome</font><font color="#E5E5E5"> one two</font>

300
00:14:55,450 --> 00:15:00,820
<font color="#E5E5E5">three was used the most</font><font color="#CCCCCC"> 400 seven times</font>

301
00:14:57,760 --> 00:15:02,709
<font color="#E5E5E5">mentor 1633 so this lists the top 20</font>

302
00:15:00,820 --> 00:15:04,450
<font color="#E5E5E5">passwords used in the environment in</font>

303
00:15:02,709 --> 00:15:05,180
terms<font color="#E5E5E5"> of how</font><font color="#CCCCCC"> many times</font><font color="#E5E5E5"> people used it</font>

304
00:15:04,450 --> 00:15:07,130
<font color="#E5E5E5">so this can</font>

305
00:15:05,180 --> 00:15:10,370
often point to<font color="#E5E5E5"> what the</font><font color="#CCCCCC"> default password</font>

306
00:15:07,130 --> 00:15:15,320
<font color="#CCCCCC">is for new users</font><font color="#E5E5E5"> or some shared account</font>

307
00:15:10,370 --> 00:15:17,090
for conference rooms<font color="#CCCCCC"> and so that can be</font>

308
00:15:15,320 --> 00:15:19,700
<font color="#E5E5E5">a good indicator of</font><font color="#CCCCCC"> something</font><font color="#E5E5E5"> going on</font>

309
00:15:17,090 --> 00:15:24,250
in the<font color="#CCCCCC"> very</font><font color="#E5E5E5"> environment and then the</font>

310
00:15:19,700 --> 00:15:29,060
<font color="#CCCCCC">last one is password reuse</font><font color="#E5E5E5"> stats so it's</font>

311
00:15:24,250 --> 00:15:32,300
<font color="#E5E5E5">similar information</font><font color="#CCCCCC"> but you can see the</font>

312
00:15:29,060 --> 00:15:34,219
details like who is using who all is

313
00:15:32,300 --> 00:15:36,500
<font color="#E5E5E5">using this</font><font color="#CCCCCC"> password of beachbum</font><font color="#E5E5E5"> there's</font>

314
00:15:34,220 --> 00:15:40,730
16 people<font color="#E5E5E5"> and you can see who those</font><font color="#CCCCCC"> are</font>

315
00:15:36,500 --> 00:15:42,830
<font color="#E5E5E5">there this page finally or this page</font>

316
00:15:40,730 --> 00:15:48,230
loaded this was our details on<font color="#E5E5E5"> domain</font>

317
00:15:42,830 --> 00:15:52,610
<font color="#E5E5E5">admin so this link here domain admins</font>

318
00:15:48,230 --> 00:15:54,680
right here this link and so it has the

319
00:15:52,610 --> 00:15:58,160
<font color="#E5E5E5">user names all these are domain admins</font>

320
00:15:54,680 --> 00:16:01,640
<font color="#E5E5E5">there's 36 of them and then it shows the</font>

321
00:15:58,160 --> 00:16:05,060
<font color="#CCCCCC">NT hash here and then it lists the user</font>

322
00:16:01,640 --> 00:16:07,220
<font color="#E5E5E5">sharing the same hash and</font><font color="#CCCCCC"> count of</font><font color="#E5E5E5"> how</font>

323
00:16:05,060 --> 00:16:09,859
many<font color="#E5E5E5"> are sharing that same hash so in</font>

324
00:16:07,220 --> 00:16:13,160
<font color="#E5E5E5">this case it shows that Agnes</font><font color="#CCCCCC"> Aaron's</font>

325
00:16:09,860 --> 00:16:15,200
has the same password<font color="#E5E5E5"> as AG mr. Aaron</font>

326
00:16:13,160 --> 00:16:18,310
<font color="#E5E5E5">slash admin so this is common</font><font color="#CCCCCC"> thing we</font>

327
00:16:15,200 --> 00:16:21,590
see to it<font color="#E5E5E5"> it's a good practice in</font>

328
00:16:18,310 --> 00:16:23,869
environment to have regular user

329
00:16:21,590 --> 00:16:26,270
accounts and domain<font color="#E5E5E5"> user accounts so</font>

330
00:16:23,870 --> 00:16:28,160
<font color="#E5E5E5">Agnes</font><font color="#CCCCCC"> Erin's has her regular user</font>

331
00:16:26,270 --> 00:16:30,620
account when she's<font color="#E5E5E5"> doing her</font><font color="#CCCCCC"> day to day</font>

332
00:16:28,160 --> 00:16:33,260
work stuff<font color="#E5E5E5"> and she only should use her</font>

333
00:16:30,620 --> 00:16:35,150
<font color="#CCCCCC">AG mr. arens slash admin account</font><font color="#E5E5E5"> when</font>

334
00:16:33,260 --> 00:16:38,060
she needs<font color="#E5E5E5"> to do something that requires</font>

335
00:16:35,150 --> 00:16:40,939
domain administrator privileges

336
00:16:38,060 --> 00:16:43,640
so it's separation of duties there if

337
00:16:40,940 --> 00:16:46,340
she doesn't commonly use the - admin

338
00:16:43,640 --> 00:16:49,970
<font color="#E5E5E5">account</font><font color="#CCCCCC"> it's less likely to</font><font color="#E5E5E5"> be exposed</font>

339
00:16:46,340 --> 00:16:55,720
<font color="#E5E5E5">or discovered through an attack by an</font>

340
00:16:49,970 --> 00:16:59,720
attacker<font color="#CCCCCC"> and so and it's often that</font>

341
00:16:55,720 --> 00:17:03,350
<font color="#E5E5E5">organizations will tack on something</font>

342
00:16:59,720 --> 00:17:06,110
like<font color="#E5E5E5"> - admin RDA to signify</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> this is</font>

343
00:17:03,350 --> 00:17:08,510
the admin version of this person's

344
00:17:06,109 --> 00:17:11,750
<font color="#E5E5E5">account so this helps us look to that</font>

345
00:17:08,510 --> 00:17:13,819
and so we see<font color="#E5E5E5"> that</font><font color="#CCCCCC"> Agnes Erin's is</font>

346
00:17:11,750 --> 00:17:16,339
sharing her password she's<font color="#E5E5E5"> using the</font>

347
00:17:13,819 --> 00:17:18,470
same<font color="#CCCCCC"> password for her</font><font color="#E5E5E5"> regular account</font><font color="#CCCCCC"> as</font>

348
00:17:16,339 --> 00:17:19,458
her<font color="#E5E5E5"> domain admin account and that voids</font>

349
00:17:18,470 --> 00:17:21,319
all the efforts

350
00:17:19,459 --> 00:17:25,130
the organization is<font color="#CCCCCC"> making to try and</font>

351
00:17:21,319 --> 00:17:27,678
<font color="#E5E5E5">protect</font><font color="#CCCCCC"> domain administrator credential</font>

352
00:17:25,130 --> 00:17:31,130
so that's<font color="#E5E5E5"> something we can report on and</font>

353
00:17:27,679 --> 00:17:32,899
and say it looks like<font color="#E5E5E5"> you have domain</font>

354
00:17:31,130 --> 00:17:35,149
administrators using the same password

355
00:17:32,899 --> 00:17:38,449
<font color="#CCCCCC">between their non admin account and</font>

356
00:17:35,149 --> 00:17:39,979
their admin account<font color="#CCCCCC"> so in the</font><font color="#E5E5E5"> password</font>

357
00:17:38,450 --> 00:17:41,990
column<font color="#E5E5E5"> we</font><font color="#CCCCCC"> have the password if we're</font>

358
00:17:39,980 --> 00:17:45,679
<font color="#E5E5E5">able to crack it</font><font color="#CCCCCC"> or blank if we weren't</font>

359
00:17:41,990 --> 00:17:48,230
able to crack<font color="#CCCCCC"> it and in the non</font><font color="#E5E5E5"> blank LM</font>

360
00:17:45,679 --> 00:17:50,120
hash column we say whether there was<font color="#CCCCCC"> an</font>

361
00:17:48,230 --> 00:17:54,320
LM hash stored for that user<font color="#E5E5E5"> so</font><font color="#CCCCCC"> we have</font>

362
00:17:50,120 --> 00:17:57,760
one user here who had this domain admin

363
00:17:54,320 --> 00:18:01,279
has both the LM hash and<font color="#E5E5E5"> an T hash</font><font color="#CCCCCC"> store</font>

364
00:17:57,760 --> 00:18:03,820
and there's also interesting item here

365
00:18:01,279 --> 00:18:07,690
the share count is<font color="#CCCCCC"> two</font><font color="#E5E5E5"> here but it's</font>

366
00:18:03,820 --> 00:18:10,428
shared between<font color="#CCCCCC"> Abbie Adeline and Auguste</font>

367
00:18:07,690 --> 00:18:11,770
McGinnis so that's probably<font color="#E5E5E5"> just</font>

368
00:18:10,429 --> 00:18:14,029
coincidental that<font color="#E5E5E5"> those two people</font>

369
00:18:11,770 --> 00:18:15,799
<font color="#E5E5E5">shared the same password it isn't</font>

370
00:18:14,029 --> 00:18:18,830
necessarily a non admin<font color="#E5E5E5"> and a regular</font>

371
00:18:15,799 --> 00:18:22,510
user same user sharing<font color="#E5E5E5"> a password so</font>

372
00:18:18,830 --> 00:18:24,649
that<font color="#E5E5E5"> provides details on that and then I</font>

373
00:18:22,510 --> 00:18:27,309
mentioned<font color="#CCCCCC"> that it</font><font color="#E5E5E5"> takes a while to load</font>

374
00:18:24,649 --> 00:18:30,529
these bigger<font color="#E5E5E5"> tables so I had clicked on</font>

375
00:18:27,309 --> 00:18:33,428
this<font color="#CCCCCC"> link to</font><font color="#E5E5E5"> list all</font><font color="#CCCCCC"> the password hash</font>

376
00:18:30,529 --> 00:18:36,049
details<font color="#E5E5E5"> and I got this so I got username</font>

377
00:18:33,429 --> 00:18:38,570
<font color="#E5E5E5">password password length</font><font color="#CCCCCC"> NT hash it's</font>

378
00:18:36,049 --> 00:18:39,889
sorted by password<font color="#E5E5E5"> length</font><font color="#CCCCCC"> descending so</font>

379
00:18:38,570 --> 00:18:42,649
<font color="#E5E5E5">you can see the password links getting</font>

380
00:18:39,890 --> 00:18:47,360
smaller you can<font color="#E5E5E5"> scroll through here</font><font color="#CCCCCC"> or</font>

381
00:18:42,649 --> 00:18:49,959
search for<font color="#CCCCCC"> interesting words if you're</font>

382
00:18:47,360 --> 00:18:55,760
wondering who has bring in their

383
00:18:49,960 --> 00:18:59,179
<font color="#E5E5E5">password name because they're they're so</font>

384
00:18:55,760 --> 00:19:01,549
<font color="#E5E5E5">similar and so lame we had a couple</font>

385
00:18:59,179 --> 00:19:03,289
<font color="#CCCCCC">questions scary for you real quick how</font>

386
00:19:01,549 --> 00:19:04,789
complex<font color="#E5E5E5"> can the passwords be for your</font>

387
00:19:03,289 --> 00:19:06,890
cracker because<font color="#E5E5E5"> it seems</font><font color="#CCCCCC"> like you have</font>

388
00:19:04,789 --> 00:19:11,510
some<font color="#E5E5E5"> crazy complex passwords here that</font>

389
00:19:06,890 --> 00:19:14,480
you know right<font color="#E5E5E5"> so keep in mind that this</font>

390
00:19:11,510 --> 00:19:17,929
is<font color="#E5E5E5"> sample data</font><font color="#CCCCCC"> so I took the rocky list</font>

391
00:19:14,480 --> 00:19:23,240
it's a common exposed password list<font color="#E5E5E5"> with</font>

392
00:19:17,929 --> 00:19:25,940
thousands of<font color="#CCCCCC"> entries and I contrived a</font>

393
00:19:23,240 --> 00:19:28,130
<font color="#E5E5E5">password cracking list so I rant</font><font color="#CCCCCC"> like</font>

394
00:19:25,940 --> 00:19:31,610
randomly select passwords out of there

395
00:19:28,130 --> 00:19:33,370
and<font color="#E5E5E5"> I randomly decide whether to put it</font>

396
00:19:31,610 --> 00:19:36,939
in the crash file or<font color="#E5E5E5"> not</font>

397
00:19:33,370 --> 00:19:38,469
so basically<font color="#E5E5E5"> I said 80% of the time put</font>

398
00:19:36,940 --> 00:19:42,040
it in the<font color="#CCCCCC"> cracked file as if we cracked</font>

399
00:19:38,470 --> 00:19:45,190
it<font color="#E5E5E5"> and</font><font color="#CCCCCC"> and not so it</font><font color="#E5E5E5"> is just</font><font color="#CCCCCC"> sample data</font>

400
00:19:42,040 --> 00:19:47,740
on the same point<font color="#E5E5E5"> I do commonly get up</font>

401
00:19:45,190 --> 00:19:51,720
to up<font color="#CCCCCC"> to 20 character passwords at least</font>

402
00:19:47,740 --> 00:19:54,580
a few<font color="#E5E5E5"> when I am cracking real hashes</font>

403
00:19:51,720 --> 00:19:56,860
<font color="#CCCCCC">because they are</font><font color="#E5E5E5"> commonly they are</font>

404
00:19:54,580 --> 00:19:58,179
common phrases that people<font color="#CCCCCC"> will tend</font><font color="#E5E5E5"> to</font>

405
00:19:56,860 --> 00:20:00,550
choose like<font color="#E5E5E5"> somewhere over the rainbow</font>

406
00:19:58,180 --> 00:20:03,990
<font color="#E5E5E5">or something like that</font>

407
00:20:00,550 --> 00:20:03,990
so<font color="#E5E5E5"> hopefully that answers that question</font>

408
00:20:09,300 --> 00:20:14,379
well if you have if<font color="#E5E5E5"> you if you've</font>

409
00:20:12,580 --> 00:20:20,520
already got the hashes from<font color="#E5E5E5"> the domain</font>

410
00:20:14,380 --> 00:20:24,100
controller<font color="#CCCCCC"> I typically spend three days</font>

411
00:20:20,520 --> 00:20:25,660
trying<font color="#E5E5E5"> to crack</font><font color="#CCCCCC"> the NT hashes</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> of</font>

412
00:20:24,100 --> 00:20:26,830
course I crack all the<font color="#E5E5E5"> LM matches</font>

413
00:20:25,660 --> 00:20:30,070
because that only<font color="#E5E5E5"> takes a few minutes</font>

414
00:20:26,830 --> 00:20:36,730
<font color="#E5E5E5">and I and I get in the range of 50</font>

415
00:20:30,070 --> 00:20:38,620
<font color="#CCCCCC">percent cracked in three days but in</font>

416
00:20:36,730 --> 00:20:43,450
terms of<font color="#E5E5E5"> running</font><font color="#CCCCCC"> this script</font><font color="#E5E5E5"> once you</font>

417
00:20:38,620 --> 00:20:45,459
have the crack file and the hashes from

418
00:20:43,450 --> 00:20:47,650
<font color="#E5E5E5">the domain</font><font color="#CCCCCC"> it only takes a few seconds</font>

419
00:20:45,460 --> 00:20:53,500
to run this even<font color="#E5E5E5"> on the</font><font color="#CCCCCC"> eighty-eight</font>

420
00:20:47,650 --> 00:20:56,920
thousand entries<font color="#E5E5E5"> that we have here okay</font>

421
00:20:53,500 --> 00:21:01,090
<font color="#CCCCCC">so let's go back</font><font color="#E5E5E5"> okay so I</font><font color="#CCCCCC"> think I've</font>

422
00:20:56,920 --> 00:21:05,410
gone over<font color="#E5E5E5"> all the statistics that are</font>

423
00:21:01,090 --> 00:21:09,428
<font color="#E5E5E5">found here or there there is one more</font>

424
00:21:05,410 --> 00:21:11,260
thing so if<font color="#E5E5E5"> we look at the details of</font>

425
00:21:09,429 --> 00:21:13,000
the domain admins that<font color="#E5E5E5"> got cracked these</font>

426
00:21:11,260 --> 00:21:15,490
are all the ones we cracked up to<font color="#E5E5E5"> 36</font>

427
00:21:13,000 --> 00:21:18,460
there is this extra column only<font color="#E5E5E5"> LM</font>

428
00:21:15,490 --> 00:21:20,620
cracked<font color="#E5E5E5"> so here's a perfect example of a</font>

429
00:21:18,460 --> 00:21:27,720
<font color="#E5E5E5">password this would be hard to crack as</font>

430
00:21:20,620 --> 00:21:27,719
an NT hash only because it's long and

431
00:21:29,100 --> 00:21:37,120
it's random so<font color="#E5E5E5"> brute forcing that to</font>

432
00:21:35,230 --> 00:21:38,860
make all<font color="#E5E5E5"> possible guesses of that long</font>

433
00:21:37,120 --> 00:21:40,600
of a password<font color="#CCCCCC"> and</font><font color="#E5E5E5"> then checking against</font>

434
00:21:38,860 --> 00:21:42,100
<font color="#CCCCCC">the</font><font color="#E5E5E5"> empty hash it will take super long</font>

435
00:21:40,600 --> 00:21:44,169
time<font color="#E5E5E5"> Nance</font>

436
00:21:42,100 --> 00:21:45,909
but since the LM hash was stored we were

437
00:21:44,170 --> 00:21:47,120
able<font color="#CCCCCC"> to crack it so if there's a one in</font>

438
00:21:45,910 --> 00:21:48,860
<font color="#CCCCCC">this column it may</font>

439
00:21:47,120 --> 00:21:52,040
it's the only<font color="#E5E5E5"> reason why we have this</font>

440
00:21:48,860 --> 00:21:55,929
password<font color="#CCCCCC"> in this data it's because the</font>

441
00:21:52,040 --> 00:21:55,930
LM hash was stored for this user<font color="#E5E5E5"> and</font>

442
00:21:56,440 --> 00:22:05,060
<font color="#CCCCCC">that's a point I like</font><font color="#E5E5E5"> to make on the</font>

443
00:22:00,350 --> 00:22:07,840
report for<font color="#E5E5E5"> the customer</font><font color="#CCCCCC"> ok so if there's</font>

444
00:22:05,060 --> 00:22:11,090
no more<font color="#CCCCCC"> questions on the actual</font>

445
00:22:07,840 --> 00:22:14,209
interactive report we will proceed to

446
00:22:11,090 --> 00:22:28,760
show how to actually<font color="#CCCCCC"> use this so so we</font>

447
00:22:14,210 --> 00:22:30,980
go back<font color="#CCCCCC"> to</font><font color="#E5E5E5"> the currently just HTML</font>

448
00:22:28,760 --> 00:22:36,740
<font color="#E5E5E5">report but if you want to come in here</font>

449
00:22:30,980 --> 00:22:39,740
<font color="#E5E5E5">and add a feature request</font><font color="#CCCCCC"> onto here</font><font color="#E5E5E5"> I'll</font>

450
00:22:36,740 --> 00:22:43,100
consider adding that as well so you can

451
00:22:39,740 --> 00:22:48,470
give me<font color="#E5E5E5"> your</font><font color="#CCCCCC"> request and feedback for</font>

452
00:22:43,100 --> 00:22:51,889
useful features that<font color="#E5E5E5"> way</font><font color="#CCCCCC"> okay so we come</font>

453
00:22:48,470 --> 00:22:54,020
in here<font color="#CCCCCC"> and</font><font color="#E5E5E5"> we we want to clone this or</font>

454
00:22:51,890 --> 00:22:55,850
download this repository<font color="#E5E5E5"> to get the code</font>

455
00:22:54,020 --> 00:22:59,990
so we're<font color="#CCCCCC"> gonna copy that and we're gonna</font>

456
00:22:55,850 --> 00:23:04,730
go in and we're<font color="#E5E5E5"> gonna</font><font color="#CCCCCC"> clone that</font>

457
00:22:59,990 --> 00:23:08,810
repository<font color="#E5E5E5"> and I'm working from a fresh</font>

458
00:23:04,730 --> 00:23:13,420
install of<font color="#E5E5E5"> Kali 2016 the</font><font color="#CCCCCC"> pentesting vm</font>

459
00:23:08,810 --> 00:23:17,409
and you'll see that<font color="#CCCCCC"> useful things are</font>

460
00:23:13,420 --> 00:23:19,970
installed<font color="#E5E5E5"> by default including the get</font>

461
00:23:17,410 --> 00:23:22,910
program and some other<font color="#E5E5E5"> programs we'll</font>

462
00:23:19,970 --> 00:23:26,690
use to get the data we<font color="#E5E5E5"> need for the</font>

463
00:23:22,910 --> 00:23:29,390
<font color="#CCCCCC">Deepak tool so we have the data now or</font>

464
00:23:26,690 --> 00:23:30,770
we have the script and the same sample

465
00:23:29,390 --> 00:23:32,950
data<font color="#E5E5E5"> that give us a folder full of</font>

466
00:23:30,770 --> 00:23:36,950
sample data<font color="#CCCCCC"> and it gave us the</font><font color="#E5E5E5"> Python</font>

467
00:23:32,950 --> 00:23:38,750
domain password audit tool<font color="#E5E5E5"> script so how</font>

468
00:23:36,950 --> 00:23:42,950
do we<font color="#E5E5E5"> get the data</font><font color="#CCCCCC"> we need to feed to</font>

469
00:23:38,750 --> 00:23:44,780
the script<font color="#CCCCCC"> I included on the readme a</font>

470
00:23:42,950 --> 00:23:47,630
way<font color="#E5E5E5"> to do this there's multiple ways</font>

471
00:23:44,780 --> 00:23:49,670
<font color="#E5E5E5">this was a easy</font><font color="#CCCCCC"> way this is kind of a</font><font color="#E5E5E5"> go</font>

472
00:23:47,630 --> 00:23:51,800
<font color="#E5E5E5">to foolproof</font><font color="#CCCCCC"> always works kind</font><font color="#E5E5E5"> of way</font>

473
00:23:49,670 --> 00:23:55,400
<font color="#E5E5E5">and it was also easy to document in the</font>

474
00:23:51,800 --> 00:23:59,090
readme<font color="#CCCCCC"> actual easiest way to do it but I</font>

475
00:23:55,400 --> 00:24:00,950
know<font color="#E5E5E5"> of is through a</font><font color="#CCCCCC"> Metasploit session</font>

476
00:23:59,090 --> 00:24:04,250
but we're not<font color="#E5E5E5"> talking</font>

477
00:24:00,950 --> 00:24:06,800
<font color="#E5E5E5">yeah and this is a way that tends to</font>

478
00:24:04,250 --> 00:24:08,470
<font color="#E5E5E5">always work</font><font color="#CCCCCC"> so in order to dump the</font>

479
00:24:06,800 --> 00:24:10,580
hashes<font color="#E5E5E5"> from a domain</font><font color="#CCCCCC"> controller you need</font>

480
00:24:08,470 --> 00:24:13,820
administrative access to the<font color="#E5E5E5"> domain</font>

481
00:24:10,580 --> 00:24:16,490
controller so if you log<font color="#CCCCCC"> in to</font><font color="#E5E5E5"> the</font>

482
00:24:13,820 --> 00:24:20,990
<font color="#E5E5E5">domain controller and start up a command</font>

483
00:24:16,490 --> 00:24:24,590
prompt<font color="#E5E5E5"> and enter this command it uses</font>

484
00:24:20,990 --> 00:24:28,940
<font color="#E5E5E5">NTDs you tell to make</font><font color="#CCCCCC"> a copy</font><font color="#E5E5E5"> of the</font>

485
00:24:24,590 --> 00:24:31,550
database<font color="#CCCCCC"> which is called</font><font color="#E5E5E5"> an</font><font color="#CCCCCC"> TDS dip so</font>

486
00:24:28,940 --> 00:24:35,030
we need a<font color="#E5E5E5"> copy of that and we also need</font>

487
00:24:31,550 --> 00:24:37,220
a<font color="#E5E5E5"> copy of</font><font color="#CCCCCC"> a few registry settings</font><font color="#E5E5E5"> and</font>

488
00:24:35,030 --> 00:24:39,260
this does<font color="#CCCCCC"> that all for us a simple</font>

489
00:24:37,220 --> 00:24:40,640
command<font color="#E5E5E5"> it's going to write it to the</font><font color="#CCCCCC"> C</font>

490
00:24:39,260 --> 00:24:42,890
temp directory so you want to make sure

491
00:24:40,640 --> 00:24:44,300
that that directory exists<font color="#E5E5E5"> or you could</font>

492
00:24:42,890 --> 00:24:47,060
choose a different<font color="#E5E5E5"> directory to write it</font>

493
00:24:44,300 --> 00:24:50,060
to and you<font color="#CCCCCC"> also want to make sure</font>

494
00:24:47,060 --> 00:24:51,770
there's enough disk<font color="#CCCCCC"> space left on</font><font color="#E5E5E5"> the</font>

495
00:24:50,060 --> 00:24:54,169
domain<font color="#E5E5E5"> controller</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> make a copy of</font>

496
00:24:51,770 --> 00:24:56,210
<font color="#CCCCCC">antitheist I did so find the current and</font>

497
00:24:54,170 --> 00:24:57,800
yes I did<font color="#CCCCCC"> make sure you have that much</font>

498
00:24:56,210 --> 00:25:00,500
<font color="#E5E5E5">room plus</font><font color="#CCCCCC"> a little bit</font><font color="#E5E5E5"> more because you</font>

499
00:24:57,800 --> 00:25:03,889
also are making<font color="#CCCCCC"> a copy of some registry</font>

500
00:25:00,500 --> 00:25:06,050
hives but those are small so I'm not

501
00:25:03,890 --> 00:25:09,230
demoing<font color="#E5E5E5"> this exact thing on</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> domain</font>

502
00:25:06,050 --> 00:25:14,659
<font color="#E5E5E5">controller today but if you do that you</font>

503
00:25:09,230 --> 00:25:17,030
<font color="#E5E5E5">end up</font><font color="#CCCCCC"> getting two directories in the</font>

504
00:25:14,660 --> 00:25:19,820
temperature directory on the<font color="#E5E5E5"> domain</font>

505
00:25:17,030 --> 00:25:23,600
controller<font color="#CCCCCC"> an active directory folder</font>

506
00:25:19,820 --> 00:25:26,830
and a registry folder inside<font color="#E5E5E5"> the active</font>

507
00:25:23,600 --> 00:25:30,260
directory folder is an<font color="#E5E5E5"> TDs zip file</font>

508
00:25:26,830 --> 00:25:32,679
that's a binary file that contains<font color="#E5E5E5"> the</font>

509
00:25:30,260 --> 00:25:35,690
database full<font color="#E5E5E5"> of information we need and</font>

510
00:25:32,680 --> 00:25:39,290
data in that database<font color="#CCCCCC"> is encrypted in</font>

511
00:25:35,690 --> 00:25:40,910
order<font color="#E5E5E5"> to decrypt it</font><font color="#CCCCCC"> we need some values</font>

512
00:25:39,290 --> 00:25:43,070
from the registry from<font color="#E5E5E5"> the system</font>

513
00:25:40,910 --> 00:25:45,020
registry so this<font color="#E5E5E5"> tool also made a copy</font>

514
00:25:43,070 --> 00:25:47,149
<font color="#E5E5E5">of</font><font color="#CCCCCC"> that if</font><font color="#E5E5E5"> we look in the registry</font>

515
00:25:45,020 --> 00:25:51,260
folder we have<font color="#CCCCCC"> the system hi we need</font>

516
00:25:47,150 --> 00:25:54,770
both<font color="#CCCCCC"> entities</font><font color="#E5E5E5"> in the system</font><font color="#CCCCCC"> hive in</font>

517
00:25:51,260 --> 00:25:58,300
order to extract the hashes so<font color="#CCCCCC"> we run</font>

518
00:25:54,770 --> 00:26:01,760
<font color="#E5E5E5">that command I showed you we copy off</font>

519
00:25:58,300 --> 00:26:03,230
the two directories<font color="#E5E5E5"> that gives us active</font>

520
00:26:01,760 --> 00:26:04,970
directory<font color="#E5E5E5"> and registry</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> then we have</font>

521
00:26:03,230 --> 00:26:11,030
all the<font color="#E5E5E5"> data we need to</font><font color="#CCCCCC"> work with this</font>

522
00:26:04,970 --> 00:26:14,450
offline<font color="#CCCCCC"> ok and then in order to</font><font color="#E5E5E5"> get the</font>

523
00:26:11,030 --> 00:26:14,840
data<font color="#CCCCCC"> we want out of that</font><font color="#E5E5E5"> file into human</font>

524
00:26:14,450 --> 00:26:16,310
readable

525
00:26:14,840 --> 00:26:18,679
<font color="#CCCCCC">format we're going to use secret dumb</font>

526
00:26:16,310 --> 00:26:25,300
<font color="#E5E5E5">stuff hi and I've got a link to</font><font color="#CCCCCC"> that</font>

527
00:26:18,680 --> 00:26:28,970
script there from course security and so

528
00:26:25,300 --> 00:26:31,820
this<font color="#CCCCCC"> Cali BM a default</font><font color="#E5E5E5"> Cali</font><font color="#CCCCCC"> yeah</font>

529
00:26:28,970 --> 00:26:33,710
comes with secret<font color="#CCCCCC"> dump</font><font color="#E5E5E5"> stop I installed</font>

530
00:26:31,820 --> 00:26:38,179
and ready to go we<font color="#CCCCCC"> just need to find it</font>

531
00:26:33,710 --> 00:26:41,660
so if we do locate secret<font color="#E5E5E5"> stop hi</font>

532
00:26:38,180 --> 00:26:44,390
we find it in the<font color="#CCCCCC"> user share</font><font color="#E5E5E5"> directory</font>

533
00:26:41,660 --> 00:26:59,600
so we're going<font color="#E5E5E5"> to run that on our NTDs</font>

534
00:26:44,390 --> 00:27:01,250
<font color="#E5E5E5">zip file and</font><font color="#CCCCCC"> this example them yeah</font>

535
00:26:59,600 --> 00:27:02,840
we're following<font color="#E5E5E5"> this right here we're</font>

536
00:27:01,250 --> 00:27:06,350
running<font color="#CCCCCC"> secret dump</font><font color="#E5E5E5"> stop</font><font color="#CCCCCC"> hi we're</font>

537
00:27:02,840 --> 00:27:09,470
handing it<font color="#E5E5E5"> read our system registry and</font>

538
00:27:06,350 --> 00:27:11,990
our<font color="#E5E5E5"> NTDs zip file and telling it to</font>

539
00:27:09,470 --> 00:27:14,930
write the local file we'll call it

540
00:27:11,990 --> 00:27:18,200
customer the base file name so we're

541
00:27:14,930 --> 00:27:25,900
gonna pass<font color="#CCCCCC"> it our system file</font><font color="#E5E5E5"> which is</font>

542
00:27:18,200 --> 00:27:25,900
at and our<font color="#CCCCCC"> ant IDs file</font>

543
00:27:32,070 --> 00:27:42,240
give it an<font color="#CCCCCC"> output file now</font><font color="#E5E5E5"> okay so this</font>

544
00:27:40,200 --> 00:27:44,310
is gonna read that data out that we need

545
00:27:42,240 --> 00:27:48,000
and put<font color="#E5E5E5"> it in the format we want which</font>

546
00:27:44,310 --> 00:27:50,790
is domain<font color="#E5E5E5"> slash user idea</font><font color="#CCCCCC"> username the</font>

547
00:27:48,000 --> 00:27:59,910
rid the<font color="#E5E5E5"> LM hash and the</font><font color="#CCCCCC"> NT hash</font><font color="#E5E5E5"> like we</font>

548
00:27:50,790 --> 00:28:02,520
talked about previously questions even

549
00:27:59,910 --> 00:28:04,530
<font color="#CCCCCC">Paul asks even if a T doesn't store LM</font>

550
00:28:02,520 --> 00:28:06,629
hashes I heard<font color="#CCCCCC"> RAM and local computers</font>

551
00:28:04,530 --> 00:28:09,210
store<font color="#E5E5E5"> 14 character passwords or less in</font>

552
00:28:06,630 --> 00:28:13,260
<font color="#E5E5E5">RAM as LM not sure if you will touch</font><font color="#CCCCCC"> on</font>

553
00:28:09,210 --> 00:28:16,290
<font color="#CCCCCC">the subject</font><font color="#E5E5E5"> yeah that's a little bit our</font>

554
00:28:13,260 --> 00:28:19,110
scope of this<font color="#E5E5E5"> it's true that</font><font color="#CCCCCC"> computer</font>

555
00:28:16,290 --> 00:28:22,200
store that in RAM and<font color="#E5E5E5"> you can use</font><font color="#CCCCCC"> mini</font>

556
00:28:19,110 --> 00:28:24,000
<font color="#CCCCCC">cats</font><font color="#E5E5E5"> to grab that</font><font color="#CCCCCC"> it's just a recently</font>

557
00:28:22,200 --> 00:28:26,880
logged in user so<font color="#CCCCCC"> you could hop around</font>

558
00:28:24,000 --> 00:28:29,360
<font color="#E5E5E5">pip it around in the environment picking</font>

559
00:28:26,880 --> 00:28:31,800
<font color="#E5E5E5">those off wherever people have logged in</font>

560
00:28:29,360 --> 00:28:35,820
there are protections<font color="#E5E5E5"> against that in</font>

561
00:28:31,800 --> 00:28:38,730
Windows<font color="#E5E5E5"> 10 and various workarounds</font><font color="#CCCCCC"> but</font>

562
00:28:35,820 --> 00:28:42,260
again we<font color="#E5E5E5"> won't be covering</font><font color="#CCCCCC"> that here</font><font color="#E5E5E5"> so</font>

563
00:28:38,730 --> 00:28:46,080
here we go was there another question

564
00:28:42,260 --> 00:28:48,390
<font color="#CCCCCC">what's the</font><font color="#E5E5E5"> best method to to dump hashes</font>

565
00:28:46,080 --> 00:28:54,510
in<font color="#CCCCCC"> a DC without bringing</font><font color="#E5E5E5"> down</font><font color="#CCCCCC"> production</font>

566
00:28:48,390 --> 00:28:58,500
<font color="#E5E5E5">and shadow files from my go</font><font color="#CCCCCC"> the safest</font>

567
00:28:54,510 --> 00:28:59,280
ways that I know of<font color="#E5E5E5"> are making a volume</font>

568
00:28:58,500 --> 00:29:02,490
Shadow Copy

569
00:28:59,280 --> 00:29:07,290
or using<font color="#E5E5E5"> NTDs util which is the example</font>

570
00:29:02,490 --> 00:29:09,180
<font color="#E5E5E5">I gave I believe that the smart hash</font>

571
00:29:07,290 --> 00:29:10,560
dump<font color="#CCCCCC"> the smart domain controller hash</font>

572
00:29:09,180 --> 00:29:12,180
number I forget what exactly it's called

573
00:29:10,560 --> 00:29:15,179
<font color="#E5E5E5">and</font><font color="#CCCCCC"> Metasploit does one of those two</font>

574
00:29:12,180 --> 00:29:23,490
methods and and therefore would<font color="#CCCCCC"> be a</font>

575
00:29:15,180 --> 00:29:25,290
safe<font color="#CCCCCC"> I haven't used that as much erases</font>

576
00:29:23,490 --> 00:29:26,940
<font color="#CCCCCC">geesh I've been making this harder on</font>

577
00:29:25,290 --> 00:29:28,889
<font color="#E5E5E5">myself that</font><font color="#CCCCCC"> I needed to be I'm glad I</font>

578
00:29:26,940 --> 00:29:30,480
was able<font color="#E5E5E5"> to squeeze in this webcast so</font>

579
00:29:28,890 --> 00:29:33,570
things ready for<font color="#E5E5E5"> coming I hope it's</font>

580
00:29:30,480 --> 00:29:36,780
super helpful<font color="#E5E5E5"> to a lot of people yes</font>

581
00:29:33,570 --> 00:29:39,149
<font color="#E5E5E5">sweet I'm glad to hear it's useful you</font>

582
00:29:36,780 --> 00:29:42,000
never know and<font color="#CCCCCC"> you sit in your little</font>

583
00:29:39,150 --> 00:29:45,210
<font color="#E5E5E5">office every day</font><font color="#CCCCCC"> and was</font><font color="#E5E5E5"> hoping anybody</font>

584
00:29:42,000 --> 00:29:47,789
but<font color="#E5E5E5"> that's good</font><font color="#CCCCCC"> alright</font>

585
00:29:45,210 --> 00:29:49,679
let's see that's done<font color="#E5E5E5"> and it's created</font>

586
00:29:47,789 --> 00:29:54,658
three files for us the one we want to

587
00:29:49,679 --> 00:29:58,799
<font color="#E5E5E5">use</font><font color="#CCCCCC"> is the customer</font><font color="#E5E5E5"> NTDs biome</font><font color="#CCCCCC"> and so if</font>

588
00:29:54,659 --> 00:30:03,230
we look<font color="#CCCCCC"> at that it's</font><font color="#E5E5E5"> got the data in the</font>

589
00:29:58,799 --> 00:30:08,340
form we need domain<font color="#CCCCCC"> slash username read</font>

590
00:30:03,230 --> 00:30:11,789
<font color="#CCCCCC">LM hash and</font><font color="#E5E5E5"> an T so this is</font><font color="#CCCCCC"> the notice</font>

591
00:30:08,340 --> 00:30:15,090
<font color="#CCCCCC">you might recognize this LM hash</font><font color="#E5E5E5"> ad</font><font color="#CCCCCC"> blah</font>

592
00:30:11,789 --> 00:30:18,929
<font color="#CCCCCC">blah</font><font color="#E5E5E5"> that's the LM hash of blank so in</font>

593
00:30:15,090 --> 00:30:21,539
other words<font color="#E5E5E5"> none of the passwords in</font>

594
00:30:18,929 --> 00:30:22,740
<font color="#E5E5E5">this little example if I</font><font color="#CCCCCC"> have the LM</font>

595
00:30:21,539 --> 00:30:26,220
hash stored because they're all<font color="#E5E5E5"> this</font>

596
00:30:22,740 --> 00:30:28,529
blank value hmm but that's how you

597
00:30:26,220 --> 00:30:31,820
<font color="#E5E5E5">that's how you end up getting customer</font>

598
00:30:28,529 --> 00:30:36,750
<font color="#CCCCCC">dot NDS that you feed to the D</font><font color="#E5E5E5"> pad tool</font>

599
00:30:31,820 --> 00:30:39,080
so let's<font color="#E5E5E5"> back up and go into the</font><font color="#CCCCCC"> D pad</font>

600
00:30:36,750 --> 00:30:41,760
tool that we just<font color="#E5E5E5"> downloaded</font><font color="#CCCCCC"> from github</font>

601
00:30:39,080 --> 00:30:44,158
we've got<font color="#CCCCCC"> sample data directory where</font>

602
00:30:41,760 --> 00:30:47,580
we've got sample customer<font color="#E5E5E5"> got</font><font color="#CCCCCC"> an TDS</font>

603
00:30:44,159 --> 00:30:52,010
file so<font color="#CCCCCC"> that</font><font color="#E5E5E5"> you can try this now</font>

604
00:30:47,580 --> 00:30:52,010
without<font color="#E5E5E5"> actually having real data and</font>

605
00:30:52,039 --> 00:30:57,330
we're gonna run this but<font color="#CCCCCC"> just as an</font>

606
00:30:54,450 --> 00:31:00,690
example<font color="#E5E5E5"> we're going to create a blank or</font>

607
00:30:57,330 --> 00:31:02,820
<font color="#E5E5E5">empty</font><font color="#CCCCCC"> papaya papaya is typically the</font>

608
00:31:00,690 --> 00:31:05,880
extension<font color="#CCCCCC"> of a</font><font color="#E5E5E5"> password cracking file so</font>

609
00:31:02,820 --> 00:31:07,678
we're gonna just start<font color="#E5E5E5"> with the file</font>

610
00:31:05,880 --> 00:31:11,250
where we<font color="#E5E5E5"> haven't correct</font><font color="#CCCCCC"> any passwords</font>

611
00:31:07,679 --> 00:31:13,169
maybe we don't know how<font color="#E5E5E5"> to crack</font>

612
00:31:11,250 --> 00:31:14,640
passwords and get that file right<font color="#E5E5E5"> now or</font>

613
00:31:13,169 --> 00:31:16,409
we just don't<font color="#E5E5E5"> want to crack passwords</font>

614
00:31:14,640 --> 00:31:18,570
right now there's<font color="#E5E5E5"> still some interesting</font>

615
00:31:16,409 --> 00:31:20,700
data<font color="#CCCCCC"> that tool can give you without any</font>

616
00:31:18,570 --> 00:31:24,299
crack passwords so we're going<font color="#E5E5E5"> to just</font>

617
00:31:20,700 --> 00:31:28,200
<font color="#E5E5E5">create that empty dot papaya</font><font color="#CCCCCC"> and we're</font>

618
00:31:24,299 --> 00:31:31,879
gonna run deep at<font color="#CCCCCC"> we'll do it with the</font><font color="#E5E5E5"> -</font>

619
00:31:28,200 --> 00:31:38,070
<font color="#CCCCCC">each option to get the</font><font color="#E5E5E5"> help and we see</font>

620
00:31:31,880 --> 00:31:41,159
<font color="#E5E5E5">hmm that it requires an NTDs file which</font>

621
00:31:38,070 --> 00:31:45,029
we pass in with -<font color="#CCCCCC"> n</font><font color="#E5E5E5"> and a crack file so</font>

622
00:31:41,159 --> 00:31:47,850
a<font color="#E5E5E5"> pop file from</font><font color="#CCCCCC"> ocl house cat or John or</font>

623
00:31:45,029 --> 00:31:50,789
anything<font color="#E5E5E5"> that can get it</font><font color="#CCCCCC"> into one of the</font>

624
00:31:47,850 --> 00:31:53,270
same formats<font color="#CCCCCC"> we pass in crack file</font><font color="#E5E5E5"> so</font>

625
00:31:50,789 --> 00:31:54,759
<font color="#E5E5E5">let's do that</font>

626
00:31:53,270 --> 00:31:57,879
we're gonna

627
00:31:54,759 --> 00:32:01,089
<font color="#E5E5E5">and from our sample data customer</font><font color="#CCCCCC"> anteed</font>

628
00:31:57,879 --> 00:32:07,448
yes<font color="#E5E5E5"> and then</font><font color="#CCCCCC"> pro crack</font><font color="#E5E5E5"> file we're just</font>

629
00:32:01,089 --> 00:32:10,089
going to<font color="#E5E5E5"> use</font><font color="#CCCCCC"> this empty file and</font><font color="#E5E5E5"> ask if</font>

630
00:32:07,449 --> 00:32:12,129
<font color="#CCCCCC">we want</font><font color="#E5E5E5"> to open the</font><font color="#CCCCCC"> report and</font><font color="#E5E5E5"> we say</font>

631
00:32:10,089 --> 00:32:18,698
yes<font color="#CCCCCC"> so here we're reading from a local</font>

632
00:32:12,129 --> 00:32:20,498
<font color="#E5E5E5">disk</font><font color="#CCCCCC"> and we have our typical report here</font>

633
00:32:18,699 --> 00:32:22,809
- the group membership<font color="#E5E5E5"> information</font>

634
00:32:20,499 --> 00:32:24,070
<font color="#E5E5E5">because we didn't</font><font color="#CCCCCC"> pass a list of</font><font color="#E5E5E5"> groups</font>

635
00:32:22,809 --> 00:32:25,359
so<font color="#CCCCCC"> we don't have the list of domain</font>

636
00:32:24,070 --> 00:32:29,198
admins<font color="#E5E5E5"> we don't have the list of</font>

637
00:32:25,359 --> 00:32:32,109
<font color="#CCCCCC">enterprise admins</font><font color="#E5E5E5"> but we still have the</font>

638
00:32:29,199 --> 00:32:33,940
hash counts<font color="#CCCCCC"> we have the LM hash count so</font>

639
00:32:32,109 --> 00:32:36,339
that's<font color="#CCCCCC"> interesting</font><font color="#E5E5E5"> day data we can get</font>

640
00:32:33,940 --> 00:32:38,379
<font color="#E5E5E5">without even cracking passwords and we</font>

641
00:32:36,339 --> 00:32:39,849
can also find out about password use in

642
00:32:38,379 --> 00:32:42,549
the environment<font color="#E5E5E5"> without cracking</font>

643
00:32:39,849 --> 00:32:44,829
cracking<font color="#E5E5E5"> password so if we go to the</font>

644
00:32:42,549 --> 00:32:47,079
details of<font color="#E5E5E5"> that it doesn't</font><font color="#CCCCCC"> list</font><font color="#E5E5E5"> the</font>

645
00:32:44,829 --> 00:32:49,779
password but it does this the<font color="#E5E5E5"> NT hash</font>

646
00:32:47,079 --> 00:32:51,279
<font color="#E5E5E5">and so we know that</font><font color="#CCCCCC"> 407 people are using</font>

647
00:32:49,779 --> 00:32:53,109
the<font color="#E5E5E5"> same hash which means they're</font>

648
00:32:51,279 --> 00:32:54,729
sharing<font color="#E5E5E5"> a password and we can see who</font>

649
00:32:53,109 --> 00:32:59,529
are those people<font color="#E5E5E5"> sharing that password</font>

650
00:32:54,729 --> 00:33:01,839
<font color="#CCCCCC">or users</font><font color="#E5E5E5"> so some interesting data</font><font color="#CCCCCC"> that</font>

651
00:32:59,529 --> 00:33:04,589
we can get we also<font color="#CCCCCC"> notice this big</font>

652
00:33:01,839 --> 00:33:07,809
<font color="#E5E5E5">warning up here it</font><font color="#CCCCCC"> says warning there's</font>

653
00:33:04,589 --> 00:33:09,099
<font color="#E5E5E5">206 26 all right here unique</font><font color="#CCCCCC"> hashes</font>

654
00:33:07,809 --> 00:33:11,469
which<font color="#CCCCCC"> you don't have the</font><font color="#E5E5E5"> password for</font>

655
00:33:09,099 --> 00:33:13,809
and it says it's<font color="#E5E5E5"> really easy to cut</font>

656
00:33:11,469 --> 00:33:17,019
these LM hashes<font color="#CCCCCC"> you should do it</font>

657
00:33:13,809 --> 00:33:19,089
<font color="#E5E5E5">basically so it gives you an</font><font color="#CCCCCC"> example if</font>

658
00:33:17,019 --> 00:33:22,479
you're using<font color="#CCCCCC"> OC l</font><font color="#E5E5E5"> package cat use this</font>

659
00:33:19,089 --> 00:33:24,999
command<font color="#E5E5E5"> it'll crack all possible</font><font color="#CCCCCC"> 7</font>

660
00:33:22,479 --> 00:33:27,879
character passwords<font color="#E5E5E5"> or if you're</font><font color="#CCCCCC"> using</font>

661
00:33:24,999 --> 00:33:31,179
<font color="#CCCCCC">John try this</font><font color="#E5E5E5"> I'm passing in a format</font>

662
00:33:27,879 --> 00:33:32,918
telling it<font color="#CCCCCC"> to crack</font><font color="#E5E5E5"> that LM hashes</font><font color="#CCCCCC"> this</font>

663
00:33:31,179 --> 00:33:34,869
won't<font color="#CCCCCC"> necessarily crack all the</font><font color="#E5E5E5"> LM</font>

664
00:33:32,919 --> 00:33:36,699
hashes because it depends on what's in

665
00:33:34,869 --> 00:33:39,369
<font color="#CCCCCC">the word list this is a word list attack</font>

666
00:33:36,699 --> 00:33:41,739
<font color="#E5E5E5">versus a</font><font color="#CCCCCC"> brute-force</font><font color="#E5E5E5"> attack there's</font>

667
00:33:39,369 --> 00:33:45,968
<font color="#E5E5E5">probably some John command you can use</font>

668
00:33:41,739 --> 00:33:49,059
to<font color="#E5E5E5"> crack all possible LM hashes</font><font color="#CCCCCC"> I don't</font>

669
00:33:45,969 --> 00:33:54,779
have it handy here but this example<font color="#E5E5E5"> you</font>

670
00:33:49,059 --> 00:34:07,680
could crack some<font color="#CCCCCC"> ok so we have</font><font color="#E5E5E5"> that now</font>

671
00:33:54,779 --> 00:34:13,620
let's go back and use our actual sample

672
00:34:07,680 --> 00:34:16,380
Oh<font color="#CCCCCC"> Ciel</font><font color="#E5E5E5"> hash</font><font color="#CCCCCC"> count Popeil</font><font color="#E5E5E5"> so if we do</font>

673
00:34:13,620 --> 00:34:21,839
that<font color="#E5E5E5"> this</font><font color="#CCCCCC"> is how long it takes to</font><font color="#E5E5E5"> run</font>

674
00:34:16,380 --> 00:34:23,429
through<font color="#CCCCCC"> eighty-eight</font><font color="#E5E5E5"> thousand entries</font><font color="#CCCCCC"> it</font>

675
00:34:21,840 --> 00:34:25,620
doesn't take very long it's asking<font color="#E5E5E5"> us if</font>

676
00:34:23,429 --> 00:34:28,139
we<font color="#CCCCCC"> want to open the report it also makes</font>

677
00:34:25,620 --> 00:34:31,049
note that<font color="#E5E5E5"> it's cracking 5nt hashes</font><font color="#CCCCCC"> we're</font>

678
00:34:28,139 --> 00:34:37,649
only the LM hash was cracked<font color="#CCCCCC"> so any any</font>

679
00:34:31,050 --> 00:34:43,950
time it<font color="#E5E5E5"> finds that we have</font><font color="#CCCCCC"> LM hash data</font>

680
00:34:37,649 --> 00:34:45,719
pass partial<font color="#CCCCCC"> LM hashes so when LM hashes</font>

681
00:34:43,949 --> 00:34:46,918
are<font color="#CCCCCC"> cracked</font><font color="#E5E5E5"> it cracks the left half and</font>

682
00:34:45,719 --> 00:34:49,049
the right half but it doesn't put them

683
00:34:46,918 --> 00:34:50,908
together<font color="#CCCCCC"> so this Deepak tool will take</font>

684
00:34:49,050 --> 00:34:53,790
the<font color="#E5E5E5"> left half and there I have put it</font>

685
00:34:50,909 --> 00:34:56,610
together<font color="#CCCCCC"> increment through all the case</font>

686
00:34:53,790 --> 00:34:59,400
combinations of that password<font color="#CCCCCC"> and then</font>

687
00:34:56,610 --> 00:35:00,840
figure<font color="#CCCCCC"> out which one is</font><font color="#E5E5E5"> correct so it</font>

688
00:34:59,400 --> 00:35:03,960
actually<font color="#E5E5E5"> does some work for you and</font>

689
00:35:00,840 --> 00:35:06,210
finishing finishing off the cracking of

690
00:35:03,960 --> 00:35:12,060
<font color="#E5E5E5">those LM hashes so</font><font color="#CCCCCC"> if we view</font><font color="#E5E5E5"> this</font>

691
00:35:06,210 --> 00:35:16,920
report<font color="#CCCCCC"> we're back to the same data</font><font color="#E5E5E5"> we</font>

692
00:35:12,060 --> 00:35:19,320
had on the sample report<font color="#E5E5E5"> at D pad</font>

693
00:35:16,920 --> 00:35:22,350
website<font color="#E5E5E5"> - the</font><font color="#CCCCCC"> group membership</font>

694
00:35:19,320 --> 00:35:27,660
information<font color="#E5E5E5"> so</font><font color="#CCCCCC"> now let's talk about how</font>

695
00:35:22,350 --> 00:35:30,480
<font color="#CCCCCC">to lista tist explore specific groups if</font>

696
00:35:27,660 --> 00:35:35,490
we go back to<font color="#CCCCCC"> the readme it talks about</font>

697
00:35:30,480 --> 00:35:39,150
this that the group memberships needs to

698
00:35:35,490 --> 00:35:45,270
be a file of domain / username so one

699
00:35:39,150 --> 00:35:49,740
domain<font color="#CCCCCC"> /</font><font color="#E5E5E5"> username</font><font color="#CCCCCC"> per line and</font><font color="#E5E5E5"> so in our</font>

700
00:35:45,270 --> 00:35:53,070
<font color="#E5E5E5">sample data we could show that domain</font>

701
00:35:49,740 --> 00:35:55,709
admins<font color="#E5E5E5"> we've got user name their domain</font>

702
00:35:53,070 --> 00:35:58,080
<font color="#E5E5E5">/ user name in a file called domain</font>

703
00:35:55,710 --> 00:36:00,300
admins text so that's what we need to

704
00:35:58,080 --> 00:36:02,670
feed group<font color="#E5E5E5"> information to the</font><font color="#CCCCCC"> Deepak</font>

705
00:36:00,300 --> 00:36:04,680
tool so there's various<font color="#CCCCCC"> ways to</font><font color="#E5E5E5"> get this</font>

706
00:36:02,670 --> 00:36:07,220
if you're<font color="#E5E5E5"> on the Windows domain you</font>

707
00:36:04,680 --> 00:36:16,859
<font color="#E5E5E5">could use the net groups command and</font>

708
00:36:07,220 --> 00:36:18,629
give the name<font color="#CCCCCC"> of your group</font><font color="#E5E5E5"> and that</font>

709
00:36:16,860 --> 00:36:20,550
will output<font color="#CCCCCC"> it to the screen you could</font>

710
00:36:18,630 --> 00:36:20,960
write it to a file<font color="#E5E5E5"> but but it's kind of</font>

711
00:36:20,550 --> 00:36:23,180
<font color="#E5E5E5">an</font>

712
00:36:20,960 --> 00:36:25,790
because the users are listed in three

713
00:36:23,180 --> 00:36:28,310
<font color="#E5E5E5">columns</font><font color="#CCCCCC"> so it's</font><font color="#E5E5E5"> an you have to manually</font>

714
00:36:25,790 --> 00:36:31,670
massage that to be one column and then

715
00:36:28,310 --> 00:36:33,560
you<font color="#E5E5E5"> have to add in the domain</font><font color="#CCCCCC"> slash in</font>

716
00:36:31,670 --> 00:36:35,930
front<font color="#CCCCCC"> of each user name so that's but</font>

717
00:36:33,560 --> 00:36:38,869
<font color="#CCCCCC">that's kind of a pain in the</font><font color="#E5E5E5"> neck</font><font color="#CCCCCC"> but</font>

718
00:36:35,930 --> 00:36:41,029
possible<font color="#E5E5E5"> and so back on the</font><font color="#CCCCCC"> readme I</font>

719
00:36:38,869 --> 00:36:44,440
<font color="#CCCCCC">listed</font><font color="#E5E5E5"> the way I like to do it I like to</font>

720
00:36:41,030 --> 00:36:47,630
use the power<font color="#CCCCCC"> of</font><font color="#E5E5E5"> you PowerShell script</font>

721
00:36:44,440 --> 00:36:49,670
to<font color="#E5E5E5"> read that data using PowerShell</font><font color="#CCCCCC"> and</font>

722
00:36:47,630 --> 00:36:51,500
here's an<font color="#E5E5E5"> example of</font><font color="#CCCCCC"> how to use it</font>

723
00:36:49,670 --> 00:36:53,900
<font color="#CCCCCC">there's a link to power of U here you</font>

724
00:36:51,500 --> 00:36:55,550
just<font color="#CCCCCC"> do get that group member and pass a</font>

725
00:36:53,900 --> 00:36:58,369
group name and<font color="#CCCCCC"> you write that</font><font color="#E5E5E5"> to a file</font>

726
00:36:55,550 --> 00:37:03,080
<font color="#E5E5E5">and the output of that file</font><font color="#CCCCCC"> I've got an</font>

727
00:36:58,369 --> 00:37:06,200
<font color="#CCCCCC">example in the sample data as well</font><font color="#E5E5E5"> it's</font>

728
00:37:03,080 --> 00:37:09,348
called<font color="#E5E5E5"> Enterprise admins</font><font color="#CCCCCC"> Power View</font>

729
00:37:06,200 --> 00:37:11,960
output and you can see it's<font color="#E5E5E5"> it's a</font>

730
00:37:09,349 --> 00:37:15,020
<font color="#E5E5E5">different format it has group the domain</font>

731
00:37:11,960 --> 00:37:18,800
listed here and some extra data domain

732
00:37:15,020 --> 00:37:21,140
right here and<font color="#E5E5E5"> user name</font><font color="#CCCCCC"> here but the</font>

733
00:37:18,800 --> 00:37:22,849
<font color="#CCCCCC">Deepak tool will pull that out of the</font>

734
00:37:21,140 --> 00:37:25,490
power of you<font color="#E5E5E5"> out of</font><font color="#CCCCCC"> it so you can feed</font>

735
00:37:22,849 --> 00:37:28,130
the<font color="#E5E5E5"> pet this output from Power View and</font>

736
00:37:25,490 --> 00:37:34,098
it's easier than manually massaging the

737
00:37:28,130 --> 00:37:37,040
other<font color="#E5E5E5"> list and so that works for that so</font>

738
00:37:34,099 --> 00:37:39,290
we're going to<font color="#E5E5E5"> go back and do</font><font color="#CCCCCC"> our</font>

739
00:37:37,040 --> 00:37:40,730
previous Deepak command<font color="#CCCCCC"> but this time</font>

740
00:37:39,290 --> 00:37:42,800
we're<font color="#CCCCCC"> gonna pass in the groups</font><font color="#E5E5E5"> from the</font>

741
00:37:40,730 --> 00:37:45,470
sample data<font color="#CCCCCC"> were passing</font><font color="#E5E5E5"> domain admins</font>

742
00:37:42,800 --> 00:37:46,790
and you can pass in as many<font color="#E5E5E5"> groups as</font>

743
00:37:45,470 --> 00:37:56,029
you<font color="#E5E5E5"> want here just keep adding a month</font>

744
00:37:46,790 --> 00:37:57,980
<font color="#E5E5E5">and we will add Enterprise admins yes</font>

745
00:37:56,030 --> 00:38:01,010
<font color="#CCCCCC">will</font><font color="#E5E5E5"> open the report</font><font color="#CCCCCC"> so now we have</font>

746
00:37:57,980 --> 00:38:02,450
exactly<font color="#CCCCCC"> the data we have in the sample</font>

747
00:38:01,010 --> 00:38:05,420
<font color="#CCCCCC">report we've got group membership</font>

748
00:38:02,450 --> 00:38:07,790
information<font color="#CCCCCC"> the</font><font color="#E5E5E5"> name of the group is</font>

749
00:38:05,420 --> 00:38:10,250
taken from the file name so if you were

750
00:38:07,790 --> 00:38:13,940
to use<font color="#CCCCCC"> that file called</font><font color="#E5E5E5"> Enterprise</font>

751
00:38:10,250 --> 00:38:15,530
admins<font color="#E5E5E5"> Power View output that would</font>

752
00:38:13,940 --> 00:38:18,070
<font color="#E5E5E5">actually be the name of the group here</font>

753
00:38:15,530 --> 00:38:20,390
so<font color="#CCCCCC"> you want</font><font color="#E5E5E5"> to name that group the file</font>

754
00:38:18,070 --> 00:38:24,170
the name that you want<font color="#CCCCCC"> to show up</font><font color="#E5E5E5"> here</font>

755
00:38:20,390 --> 00:38:26,299
in<font color="#E5E5E5"> your report</font><font color="#CCCCCC"> okay so before we move on</font>

756
00:38:24,170 --> 00:38:30,109
are<font color="#CCCCCC"> there questions we need to answer on</font>

757
00:38:26,300 --> 00:38:31,670
that<font color="#E5E5E5"> um there's a few</font><font color="#CCCCCC"> questions I</font><font color="#E5E5E5"> really</font>

758
00:38:30,109 --> 00:38:33,680
couldn't say if they<font color="#E5E5E5"> were about that but</font>

759
00:38:31,670 --> 00:38:36,200
<font color="#E5E5E5">we'll just go</font><font color="#CCCCCC"> through them</font>

760
00:38:33,680 --> 00:38:41,569
<font color="#E5E5E5">um</font><font color="#CCCCCC"> Stewart</font><font color="#E5E5E5"> wants to know</font><font color="#CCCCCC"> get</font><font color="#E5E5E5"> the Python</font>

761
00:38:36,200 --> 00:38:45,740
code yeah it's right<font color="#CCCCCC"> here</font><font color="#E5E5E5"> on github CLR</font>

762
00:38:41,569 --> 00:38:48,470
<font color="#CCCCCC">2</font><font color="#E5E5E5"> of 8 /d</font><font color="#CCCCCC"> Pat you just can clone or</font>

763
00:38:45,740 --> 00:38:49,549
download that using this button here<font color="#CCCCCC"> or</font>

764
00:38:48,470 --> 00:38:53,808
you can<font color="#E5E5E5"> look at it here</font>

765
00:38:49,549 --> 00:38:59,210
<font color="#E5E5E5">Deepak hi there's</font><font color="#CCCCCC"> python code okay cool</font>

766
00:38:53,809 --> 00:39:00,920
and Dominique had a comment<font color="#CCCCCC"> just a</font>

767
00:38:59,210 --> 00:39:03,829
<font color="#CCCCCC">remark that using Metasploit tool on</font>

768
00:39:00,920 --> 00:39:08,119
domain controller we meet our air during

769
00:39:03,829 --> 00:39:10,059
<font color="#CCCCCC">NT das is more than five gigs</font><font color="#E5E5E5"> so we use</font>

770
00:39:08,119 --> 00:39:17,359
Shadow Copy that is more<font color="#E5E5E5"> stable and</font><font color="#CCCCCC"> less</font>

771
00:39:10,059 --> 00:39:22,160
scary<font color="#E5E5E5"> this admin exactly yep</font><font color="#CCCCCC"> okay I'll</font>

772
00:39:17,359 --> 00:39:25,190
<font color="#E5E5E5">second okay</font><font color="#CCCCCC"> and Andrea said so if I use</font>

773
00:39:22,160 --> 00:39:27,190
MTD<font color="#CCCCCC"> SD</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> tal I don't need to make</font>

774
00:39:25,190 --> 00:39:34,369
Shadow Copy<font color="#E5E5E5"> is that correct</font>

775
00:39:27,190 --> 00:39:36,529
<font color="#CCCCCC">Chris okay</font><font color="#E5E5E5"> and David said awesome</font><font color="#CCCCCC"> I'm</font>

776
00:39:34,369 --> 00:39:38,180
able<font color="#CCCCCC"> to follow</font><font color="#E5E5E5"> along on my cavea this</font>

777
00:39:36,529 --> 00:39:40,970
will be a<font color="#E5E5E5"> great</font><font color="#CCCCCC"> help</font><font color="#E5E5E5"> in my analysis for</font>

778
00:39:38,180 --> 00:39:44,169
my work thanks for<font color="#E5E5E5"> joining David sweet</font>

779
00:39:40,970 --> 00:39:49,480
<font color="#CCCCCC">yeah thanks</font><font color="#E5E5E5"> for the positive feedback</font>

780
00:39:44,170 --> 00:39:51,589
<font color="#E5E5E5">okay so moving okay moving onward just</font>

781
00:39:49,480 --> 00:39:56,089
<font color="#E5E5E5">let's just look at a couple of other</font>

782
00:39:51,589 --> 00:39:58,940
<font color="#CCCCCC">options that</font><font color="#E5E5E5"> dapat has let's do it with</font>

783
00:39:56,089 --> 00:40:01,190
<font color="#E5E5E5">the help so we're gonna look at these</font>

784
00:39:58,940 --> 00:40:03,440
two additional<font color="#CCCCCC"> options</font><font color="#E5E5E5"> we've got the</font>

785
00:40:01,190 --> 00:40:07,039
sanitizer option and the right<font color="#CCCCCC"> eebee</font>

786
00:40:03,440 --> 00:40:12,680
option so the sanitized option you

787
00:40:07,039 --> 00:40:14,869
simply tack on<font color="#E5E5E5"> - s and</font><font color="#CCCCCC"> it'll give you a</font>

788
00:40:12,680 --> 00:40:17,839
sanitized version<font color="#E5E5E5"> of the</font><font color="#CCCCCC"> report read</font><font color="#E5E5E5"> X</font>

789
00:40:14,869 --> 00:40:20,359
the hashes<font color="#CCCCCC"> and the password in case you</font>

790
00:40:17,839 --> 00:40:22,910
want<font color="#CCCCCC"> to share this with the organization</font>

791
00:40:20,359 --> 00:40:26,359
or someone<font color="#E5E5E5"> else</font><font color="#CCCCCC"> if we look in this case</font>

792
00:40:22,910 --> 00:40:27,649
all the<font color="#CCCCCC"> NT hashes are start out in the</font>

793
00:40:26,359 --> 00:40:30,440
middle only<font color="#E5E5E5"> showing the first</font><font color="#CCCCCC"> four and</font>

794
00:40:27,650 --> 00:40:32,390
<font color="#E5E5E5">last</font><font color="#CCCCCC"> for</font><font color="#E5E5E5"> and any passwords only show the</font>

795
00:40:30,440 --> 00:40:37,579
first character and<font color="#CCCCCC"> the last character</font>

796
00:40:32,390 --> 00:40:39,440
so<font color="#E5E5E5"> that's true of the entire report so</font>

797
00:40:37,579 --> 00:40:42,170
that's what the sanitized option it's

798
00:40:39,440 --> 00:40:44,510
just the report typically goes in the

799
00:40:42,170 --> 00:40:47,119
deep out report directory<font color="#E5E5E5"> but if you do</font>

800
00:40:44,510 --> 00:40:50,390
the sanitizer<font color="#CCCCCC"> for add sanitized</font>

801
00:40:47,119 --> 00:40:54,259
in front<font color="#E5E5E5"> of it</font><font color="#CCCCCC"> so if we list files here</font>

802
00:40:50,390 --> 00:40:57,828
we've got a regular<font color="#E5E5E5"> dapat report</font><font color="#CCCCCC"> and we</font>

803
00:40:54,259 --> 00:41:01,430
<font color="#E5E5E5">have our sanitized</font><font color="#CCCCCC"> D pad report inside</font>

804
00:40:57,829 --> 00:41:04,900
<font color="#CCCCCC">of the D pad report directory is all the</font>

805
00:41:01,430 --> 00:41:07,460
<font color="#E5E5E5">HTML files that filled that web page</font>

806
00:41:04,900 --> 00:41:12,769
<font color="#E5E5E5">okay and the other thing</font><font color="#CCCCCC"> we wanted</font><font color="#E5E5E5"> to</font>

807
00:41:07,460 --> 00:41:14,630
<font color="#CCCCCC">look</font><font color="#E5E5E5"> at was the</font><font color="#CCCCCC"> right database option so</font>

808
00:41:12,769 --> 00:41:19,160
the way the Python script<font color="#E5E5E5"> works is it</font>

809
00:41:14,630 --> 00:41:21,079
builds an in-memory<font color="#E5E5E5"> SQLite database</font><font color="#CCCCCC"> and</font>

810
00:41:19,160 --> 00:41:24,589
that's<font color="#CCCCCC"> how it searches through</font><font color="#E5E5E5"> all the</font>

811
00:41:21,079 --> 00:41:27,499
data<font color="#E5E5E5"> to get the</font><font color="#CCCCCC"> statistics if</font><font color="#E5E5E5"> you would</font>

812
00:41:24,589 --> 00:41:29,599
like to<font color="#CCCCCC"> write that database to</font><font color="#E5E5E5"> file you</font>

813
00:41:27,499 --> 00:41:32,899
can<font color="#E5E5E5"> do that by adding</font><font color="#CCCCCC"> the - W option</font>

814
00:41:29,599 --> 00:41:35,269
that's handy if you<font color="#E5E5E5"> want to look up you</font>

815
00:41:32,900 --> 00:41:37,789
want to<font color="#E5E5E5"> interrogate the database and</font>

816
00:41:35,269 --> 00:41:41,029
look up other<font color="#CCCCCC"> things that I might not</font><font color="#E5E5E5"> be</font>

817
00:41:37,789 --> 00:41:46,910
reporting on in the HTML report so let's

818
00:41:41,029 --> 00:41:51,470
try that<font color="#E5E5E5"> whoops</font><font color="#CCCCCC"> we're gonna write the</font>

819
00:41:46,910 --> 00:41:53,420
<font color="#E5E5E5">data</font><font color="#CCCCCC"> to the</font><font color="#E5E5E5"> file to a file and right</font>

820
00:41:51,470 --> 00:42:01,339
here it<font color="#E5E5E5"> says but the file name will be</font>

821
00:41:53,420 --> 00:42:03,470
<font color="#E5E5E5">past audit DB so we run that then we go</font>

822
00:42:01,339 --> 00:42:05,808
<font color="#E5E5E5">into your</font><font color="#CCCCCC"> Deepak directory</font><font color="#E5E5E5"> and now we</font>

823
00:42:03,470 --> 00:42:10,368
have this<font color="#CCCCCC"> path</font><font color="#E5E5E5"> audit DB now Kelly</font>

824
00:42:05,809 --> 00:42:14,779
doesn't<font color="#E5E5E5"> have a SQLite browser GUI by</font>

825
00:42:10,369 --> 00:42:19,029
default<font color="#CCCCCC"> so I installed this DB browser</font>

826
00:42:14,779 --> 00:42:23,770
for<font color="#CCCCCC"> SQLite from SQL Lite browser and</font>

827
00:42:19,029 --> 00:42:24,849
super easy<font color="#E5E5E5"> install on Kali</font><font color="#CCCCCC"> you just do</font>

828
00:42:23,770 --> 00:42:36,769
[Music]

829
00:42:24,849 --> 00:42:39,499
<font color="#E5E5E5">where'd it go</font><font color="#CCCCCC"> now I can't</font><font color="#E5E5E5"> find it there</font>

830
00:42:36,769 --> 00:42:43,549
<font color="#CCCCCC">it</font><font color="#E5E5E5"> is apt-get install SQL a browser and</font>

831
00:42:39,499 --> 00:42:46,538
then you will<font color="#E5E5E5"> have the browser it won't</font>

832
00:42:43,549 --> 00:42:49,369
necessarily be associated with DB files

833
00:42:46,539 --> 00:42:52,190
you<font color="#E5E5E5"> might have to start the browser and</font>

834
00:42:49,369 --> 00:42:53,869
then click file<font color="#E5E5E5"> open I've associated it</font>

835
00:42:52,190 --> 00:42:55,730
as an extra<font color="#E5E5E5"> step so</font><font color="#CCCCCC"> I can just double</font>

836
00:42:53,869 --> 00:42:58,640
click<font color="#E5E5E5"> on the file here</font><font color="#CCCCCC"> and it will</font><font color="#E5E5E5"> open</font>

837
00:42:55,730 --> 00:43:00,839
<font color="#E5E5E5">it in the SQLite browser and we can</font>

838
00:42:58,640 --> 00:43:04,078
browse the data here's all the data

839
00:43:00,839 --> 00:43:10,469
<font color="#CCCCCC">their names LM hashes I'm hashed left</font>

840
00:43:04,079 --> 00:43:12,719
and right<font color="#E5E5E5"> empty hash so if we wanted to</font>

841
00:43:10,469 --> 00:43:15,150
<font color="#E5E5E5">look</font><font color="#CCCCCC"> for something</font><font color="#E5E5E5"> interesting here we</font>

842
00:43:12,719 --> 00:43:18,089
<font color="#E5E5E5">could say in</font><font color="#CCCCCC"> the password field who's</font>

843
00:43:15,150 --> 00:43:20,130
using the word spring in their<font color="#E5E5E5"> password</font>

844
00:43:18,089 --> 00:43:24,180
so<font color="#E5E5E5"> we see these users using</font><font color="#CCCCCC"> the word</font>

845
00:43:20,130 --> 00:43:26,910
spring<font color="#CCCCCC"> or we could say if we're looking</font>

846
00:43:24,180 --> 00:43:29,989
<font color="#CCCCCC">for user Bob</font><font color="#E5E5E5"> here's all the users with</font>

847
00:43:26,910 --> 00:43:32,910
Bob<font color="#E5E5E5"> in their name we could go and ask</font>

848
00:43:29,989 --> 00:43:35,160
<font color="#E5E5E5">execute custom SQL queries against this</font>

849
00:43:32,910 --> 00:43:41,729
<font color="#E5E5E5">database so</font><font color="#CCCCCC"> we</font><font color="#E5E5E5"> could select everything</font>

850
00:43:35,160 --> 00:43:43,950
<font color="#CCCCCC">from the main</font><font color="#E5E5E5"> table where password is</font>

851
00:43:41,729 --> 00:43:45,960
not null for example so all the

852
00:43:43,950 --> 00:43:48,269
passwords<font color="#E5E5E5"> we cracked and we could order</font>

853
00:43:45,960 --> 00:43:50,809
that<font color="#CCCCCC"> by password</font><font color="#E5E5E5"> descending so</font>

854
00:43:48,269 --> 00:43:53,218
alphabetical order if<font color="#CCCCCC"> you send me</font>

855
00:43:50,809 --> 00:43:55,019
whatever we might be<font color="#CCCCCC"> looking for</font><font color="#E5E5E5"> we</font>

856
00:43:53,219 --> 00:43:57,869
<font color="#E5E5E5">could do here</font><font color="#CCCCCC"> by interrogating</font><font color="#E5E5E5"> this</font>

857
00:43:55,019 --> 00:43:59,939
database<font color="#E5E5E5"> so now we have all the users</font>

858
00:43:57,869 --> 00:44:04,140
<font color="#E5E5E5">whose passwords were cracked and</font><font color="#CCCCCC"> I sort</font>

859
00:43:59,940 --> 00:44:05,489
of reverse<font color="#E5E5E5"> alphabetical so if there's</font>

860
00:44:04,140 --> 00:44:09,450
something<font color="#CCCCCC"> specific you're looking for</font>

861
00:44:05,489 --> 00:44:11,700
you might like<font color="#CCCCCC"> that option</font><font color="#E5E5E5"> okay so I'm</font>

862
00:44:09,450 --> 00:44:15,299
realizing<font color="#E5E5E5"> there's one part I forgot to</font>

863
00:44:11,700 --> 00:44:18,089
<font color="#E5E5E5">show which was how to crack passwords so</font>

864
00:44:15,299 --> 00:44:19,229
we're gonna do that as an example we're

865
00:44:18,089 --> 00:44:23,609
<font color="#E5E5E5">going</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> use John because that's</font>

866
00:44:19,229 --> 00:44:30,379
installed on<font color="#CCCCCC"> Kali and it's easier</font><font color="#E5E5E5"> use</font>

867
00:44:23,609 --> 00:44:30,380
out<font color="#CCCCCC"> of the</font><font color="#E5E5E5"> box so we're going to yeah</font>

868
00:44:30,859 --> 00:44:36,839
<font color="#CCCCCC">John</font><font color="#E5E5E5"> isn't stuff like on</font><font color="#CCCCCC"> Kali by default</font>

869
00:44:33,989 --> 00:44:40,489
so we're gonna run John<font color="#E5E5E5"> and we're gonna</font>

870
00:44:36,839 --> 00:44:45,239
run<font color="#E5E5E5"> it on our sample data our customer</font>

871
00:44:40,489 --> 00:44:46,979
<font color="#E5E5E5">NTDs</font><font color="#CCCCCC"> laughs okay so we run</font><font color="#E5E5E5"> that and it</font>

872
00:44:45,239 --> 00:44:48,890
immediately<font color="#E5E5E5"> starts cracking but it's</font>

873
00:44:46,979 --> 00:44:51,899
actually cracking<font color="#E5E5E5"> the LM hash is only</font>

874
00:44:48,890 --> 00:44:53,578
the colon one at the end of the<font color="#CCCCCC"> username</font>

875
00:44:51,900 --> 00:44:54,869
means it's<font color="#E5E5E5"> the left half of the password</font>

876
00:44:53,579 --> 00:44:57,660
the colon<font color="#E5E5E5"> two is the right half of the</font>

877
00:44:54,869 --> 00:45:00,390
password so when it cracks these it does

878
00:44:57,660 --> 00:45:02,098
it by the left half of the hash<font color="#CCCCCC"> and</font><font color="#E5E5E5"> the</font>

879
00:45:00,390 --> 00:45:03,660
right half of hash<font color="#CCCCCC"> it doesn't put the</font>

880
00:45:02,099 --> 00:45:06,059
two together and<font color="#CCCCCC"> it doesn't tell you</font>

881
00:45:03,660 --> 00:45:08,249
what<font color="#CCCCCC"> the proper upper case or lower case</font>

882
00:45:06,059 --> 00:45:10,710
<font color="#E5E5E5">is so it's it's</font><font color="#CCCCCC"> kind of part of the</font>

883
00:45:08,249 --> 00:45:12,149
<font color="#E5E5E5">story</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> deep at</font><font color="#CCCCCC"> we'll finish putting</font>

884
00:45:10,710 --> 00:45:14,700
<font color="#E5E5E5">those</font><font color="#CCCCCC"> back together and</font><font color="#E5E5E5"> finding the</font>

885
00:45:12,150 --> 00:45:16,560
<font color="#CCCCCC">right case for you so if we stop this</font>

886
00:45:14,700 --> 00:45:18,029
and<font color="#CCCCCC"> we scroll back up to</font><font color="#E5E5E5"> the top there</font>

887
00:45:16,560 --> 00:45:20,940
is<font color="#E5E5E5"> a little message</font><font color="#CCCCCC"> that says we</font>

888
00:45:18,030 --> 00:45:23,280
detected both LM<font color="#CCCCCC"> auntie auntie hashes in</font>

889
00:45:20,940 --> 00:45:28,620
<font color="#E5E5E5">the file</font><font color="#CCCCCC"> if</font><font color="#E5E5E5"> you want to correct</font><font color="#CCCCCC"> the NT</font>

890
00:45:23,280 --> 00:45:32,250
<font color="#E5E5E5">hashes - - format equals NT before we do</font>

891
00:45:28,620 --> 00:45:34,380
that we're gonna we're gonna look at

892
00:45:32,250 --> 00:45:39,510
that<font color="#E5E5E5"> file the</font><font color="#CCCCCC"> John du Pont</font><font color="#E5E5E5"> file by</font>

893
00:45:34,380 --> 00:45:44,220
default gets written to<font color="#E5E5E5"> the</font><font color="#CCCCCC"> touch John</font>

894
00:45:39,510 --> 00:45:48,930
directory we're gonna look at that<font color="#E5E5E5"> so we</font>

895
00:45:44,220 --> 00:45:50,700
have John outputs cracked passwords in

896
00:45:48,930 --> 00:45:53,129
this format<font color="#E5E5E5"> it does the hash type dollar</font>

897
00:45:50,700 --> 00:45:55,859
LM dollar and then it does a hash so

898
00:45:53,130 --> 00:45:57,510
this is<font color="#CCCCCC"> only</font><font color="#E5E5E5"> 16 characters instead of 32</font>

899
00:45:55,860 --> 00:46:00,930
because<font color="#E5E5E5"> it's either the left or</font><font color="#CCCCCC"> right</font>

900
00:45:57,510 --> 00:46:02,490
half half<font color="#E5E5E5"> of that LM hash and this is</font>

901
00:46:00,930 --> 00:46:05,640
the<font color="#E5E5E5"> left or right hash of the password</font>

902
00:46:02,490 --> 00:46:07,560
<font color="#E5E5E5">in uppercase so we actually from this</font>

903
00:46:05,640 --> 00:46:09,960
<font color="#E5E5E5">file we don't actually know if it's the</font>

904
00:46:07,560 --> 00:46:12,840
left or<font color="#CCCCCC"> the right and we don't</font><font color="#E5E5E5"> know the</font>

905
00:46:09,960 --> 00:46:18,750
proper<font color="#E5E5E5"> case and thats where</font><font color="#CCCCCC"> t</font><font color="#E5E5E5"> pack comes</font>

906
00:46:12,840 --> 00:46:27,090
in handy so now let's run<font color="#CCCCCC"> john but we'll</font>

907
00:46:18,750 --> 00:46:29,460
crack aunty - aunty hashes<font color="#E5E5E5"> so</font><font color="#CCCCCC"> here it's</font>

908
00:46:27,090 --> 00:46:34,290
cracking all these<font color="#CCCCCC"> password based on the</font>

909
00:46:29,460 --> 00:46:38,220
default password list and we'll go ahead

910
00:46:34,290 --> 00:46:40,980
<font color="#CCCCCC">and stop this</font><font color="#E5E5E5"> and now if we</font><font color="#CCCCCC"> look at the</font>

911
00:46:38,220 --> 00:46:44,640
end of<font color="#E5E5E5"> the file</font><font color="#CCCCCC"> our</font><font color="#E5E5E5"> pop file will see</font>

912
00:46:40,980 --> 00:46:46,800
the NT<font color="#E5E5E5"> so we got dollar NT dollar that's</font>

913
00:46:44,640 --> 00:46:49,200
John<font color="#CCCCCC"> Thomas it's the NT hash and</font><font color="#E5E5E5"> then we</font>

914
00:46:46,800 --> 00:46:51,390
have the full 32 character hash and<font color="#E5E5E5"> then</font>

915
00:46:49,200 --> 00:46:54,660
we have the password and this is the

916
00:46:51,390 --> 00:46:58,290
actual password<font color="#E5E5E5"> in the proper case</font><font color="#CCCCCC"> and</font>

917
00:46:54,660 --> 00:47:00,569
so we have both<font color="#E5E5E5"> the shorter LM half of a</font>

918
00:46:58,290 --> 00:47:02,730
hash in this file<font color="#E5E5E5"> with the up case</font>

919
00:47:00,570 --> 00:47:05,400
password and the longer full password

920
00:47:02,730 --> 00:47:10,260
the<font color="#CCCCCC"> NT hash all in one file</font><font color="#E5E5E5"> and the john</font>

921
00:47:05,400 --> 00:47:16,500
dot pot<font color="#E5E5E5"> so let's run</font><font color="#CCCCCC"> dapat against that</font>

922
00:47:10,260 --> 00:47:20,550
data we will pass<font color="#CCCCCC"> it</font><font color="#E5E5E5"> and TD yes violin</font>

923
00:47:16,500 --> 00:47:22,950
the sample data and<font color="#CCCCCC"> we pass it as a</font>

924
00:47:20,550 --> 00:47:25,560
crack file instead<font color="#CCCCCC"> of the OCH cat that</font>

925
00:47:22,950 --> 00:47:29,299
part well<font color="#E5E5E5"> we'll pass it</font><font color="#CCCCCC"> that crack file</font>

926
00:47:25,560 --> 00:47:40,310
we just created with<font color="#CCCCCC"> John</font><font color="#E5E5E5"> which was</font>

927
00:47:29,300 --> 00:47:40,310
here and<font color="#CCCCCC"> john</font><font color="#E5E5E5"> dot pot and we'll run that</font>

928
00:47:41,330 --> 00:47:46,500
and in this<font color="#E5E5E5"> case</font><font color="#CCCCCC"> there</font><font color="#E5E5E5"> was one</font><font color="#CCCCCC"> hundred</font>

929
00:47:43,530 --> 00:47:48,960
<font color="#E5E5E5">and nineteen LM hashes cracked</font><font color="#CCCCCC"> where the</font>

930
00:47:46,500 --> 00:47:51,120
NT hash wasn't that's because we spent

931
00:47:48,960 --> 00:47:54,420
you know<font color="#E5E5E5"> we didn't spend much time</font><font color="#CCCCCC"> quick</font>

932
00:47:51,120 --> 00:47:56,640
cracking the<font color="#E5E5E5"> NT hashes</font><font color="#CCCCCC"> so we're gonna</font>

933
00:47:54,420 --> 00:47:58,710
read that report now<font color="#E5E5E5"> and so we get the</font>

934
00:47:56,640 --> 00:48:01,170
<font color="#E5E5E5">warning at the</font><font color="#CCCCCC"> top there's more LM</font>

935
00:47:58,710 --> 00:48:04,050
hashes<font color="#E5E5E5"> that you could easily crack and</font>

936
00:48:01,170 --> 00:48:05,700
here's how<font color="#E5E5E5"> you do it but it also gives</font>

937
00:48:04,050 --> 00:48:07,980
us<font color="#CCCCCC"> the statistics</font><font color="#E5E5E5"> we were able</font><font color="#CCCCCC"> to</font>

938
00:48:05,700 --> 00:48:09,870
correct<font color="#CCCCCC"> ten</font><font color="#E5E5E5"> percent in that amount of</font>

939
00:48:07,980 --> 00:48:11,100
<font color="#CCCCCC">time and we could get all the details</font><font color="#E5E5E5"> of</font>

940
00:48:09,870 --> 00:48:14,430
who<font color="#CCCCCC"> that was and what</font><font color="#E5E5E5"> those passwords</font>

941
00:48:11,100 --> 00:48:25,110
<font color="#CCCCCC">was where we could get</font><font color="#E5E5E5"> the password link</font>

942
00:48:14,430 --> 00:48:27,569
statistics and week here's an example of

943
00:48:25,110 --> 00:48:32,640
<font color="#E5E5E5">a password it cracked it didn't crack</font>

944
00:48:27,570 --> 00:48:34,590
welcome one two three<font color="#CCCCCC"> so I</font><font color="#E5E5E5"> think that</font>

945
00:48:32,640 --> 00:48:37,529
completes<font color="#E5E5E5"> it we've</font><font color="#CCCCCC"> been through how to</font>

946
00:48:34,590 --> 00:48:39,990
dump the hashes from<font color="#E5E5E5"> a domain</font><font color="#CCCCCC"> controller</font>

947
00:48:37,530 --> 00:48:42,450
<font color="#E5E5E5">which you need administrative access to</font>

948
00:48:39,990 --> 00:48:45,299
the main controller to do and you can do

949
00:48:42,450 --> 00:48:47,460
<font color="#E5E5E5">that with this utility that gives you</font>

950
00:48:45,300 --> 00:48:52,380
files that you can then be the secret

951
00:48:47,460 --> 00:48:54,660
<font color="#E5E5E5">dumb</font><font color="#CCCCCC"> stop PI to get customer NTDs</font><font color="#E5E5E5"> needed</font>

952
00:48:52,380 --> 00:48:59,160
<font color="#E5E5E5">to use d-pad and then you want to</font>

953
00:48:54,660 --> 00:49:00,870
<font color="#CCCCCC">generate some password crack</font><font color="#E5E5E5"> file or you</font>

954
00:48:59,160 --> 00:49:03,899
<font color="#E5E5E5">can use an empty one but you'll get less</font>

955
00:49:00,870 --> 00:49:06,810
data and then you just<font color="#E5E5E5"> dapat like this</font>

956
00:49:03,900 --> 00:49:10,140
<font color="#E5E5E5">you pass it the</font><font color="#CCCCCC"> NTDs file those yosh</font>

957
00:49:06,810 --> 00:49:13,130
kappa and optionally some groups<font color="#E5E5E5"> and the</font>

958
00:49:10,140 --> 00:49:15,750
groups you can generate those files

959
00:49:13,130 --> 00:49:18,330
<font color="#CCCCCC">the easiest way it was with</font><font color="#E5E5E5"> the</font>

960
00:49:15,750 --> 00:49:24,020
<font color="#CCCCCC">powershell script here described here</font>

961
00:49:18,330 --> 00:49:27,630
and the example of cracking passwords

962
00:49:24,020 --> 00:49:31,200
LM hashes with<font color="#CCCCCC"> oshio hash</font><font color="#E5E5E5"> cat or</font><font color="#CCCCCC"> john is</font>

963
00:49:27,630 --> 00:49:33,540
given here<font color="#E5E5E5"> and then of course the help</font>

964
00:49:31,200 --> 00:49:35,790
options<font color="#CCCCCC"> is at the bottom of the file for</font>

965
00:49:33,540 --> 00:49:38,070
<font color="#CCCCCC">the different</font><font color="#E5E5E5"> options you can optionally</font>

966
00:49:35,790 --> 00:49:40,430
<font color="#CCCCCC">write the database to a file to look at</font>

967
00:49:38,070 --> 00:49:43,119
it<font color="#E5E5E5"> through a GUI</font>

968
00:49:40,430 --> 00:49:58,038
and you can generate a<font color="#E5E5E5"> sanitized report</font>

969
00:49:43,119 --> 00:49:59,749
are there any questions how and when do

970
00:49:58,039 --> 00:50:03,730
you<font color="#CCCCCC"> use this on a customer site</font><font color="#E5E5E5"> what</font>

971
00:49:59,749 --> 00:50:03,730
situations would this be requested

972
00:50:05,499 --> 00:50:12,470
<font color="#CCCCCC">typically when we're performing</font><font color="#E5E5E5"> a pivot</font>

973
00:50:07,940 --> 00:50:14,930
test<font color="#E5E5E5"> my pivot test is when we get given</font>

974
00:50:12,470 --> 00:50:16,939
<font color="#E5E5E5">internal</font><font color="#CCCCCC"> access to a network but we're</font>

975
00:50:14,930 --> 00:50:22,700
just<font color="#CCCCCC"> a standard</font><font color="#E5E5E5"> user so if we get hired</font>

976
00:50:16,940 --> 00:50:24,740
<font color="#E5E5E5">on or or just whatever they hand out to</font>

977
00:50:22,700 --> 00:50:26,720
their standard users new employees we

978
00:50:24,740 --> 00:50:28,399
get<font color="#E5E5E5"> given that level of access and then</font>

979
00:50:26,720 --> 00:50:30,589
we try<font color="#CCCCCC"> to pivot</font><font color="#E5E5E5"> in the environment and</font>

980
00:50:28,400 --> 00:50:33,499
escalate our privileges to the level of

981
00:50:30,589 --> 00:50:38,058
a domain admin<font color="#E5E5E5"> and if we're able to do</font>

982
00:50:33,499 --> 00:50:40,819
that<font color="#E5E5E5"> which often commonly we are then we</font>

983
00:50:38,059 --> 00:50:43,099
offer to<font color="#CCCCCC"> the customer to</font><font color="#E5E5E5"> go ahead and</font>

984
00:50:40,819 --> 00:50:44,359
extract the hashes<font color="#E5E5E5"> from the domain</font>

985
00:50:43,099 --> 00:50:46,910
controller so that<font color="#CCCCCC"> we can give them</font>

986
00:50:44,359 --> 00:50:50,650
useful statistics on password<font color="#E5E5E5"> use in</font>

987
00:50:46,910 --> 00:50:50,649
their environment<font color="#E5E5E5"> and that's when we do</font>

