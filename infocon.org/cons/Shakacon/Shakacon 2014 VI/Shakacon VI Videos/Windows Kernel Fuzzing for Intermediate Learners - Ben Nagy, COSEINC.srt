1
00:00:04,430 --> 00:00:08,649
for surely if yes come on in

2
00:00:08,650 --> 00:00:11,790
so our next talk is Windows kernel
fuzzing for intermediate learners

3
00:00:11,790 --> 00:00:16,049
I believe it's a follow-on this process
of learning I'm so

4
00:00:16,049 --> 00:00:19,430
really happy to have been here a

5
00:00:19,430 --> 00:00:22,939
to to speak on this topic it does you
follow this topic: know that

6
00:00:22,939 --> 00:00:27,669
he's been doing research and publishing
things speaking about this topic for

7
00:00:27,669 --> 00:00:28,840
quite some time now

8
00:00:28,840 --> 00:00:32,590
I think one other first the distributed
fuzzing things i've seen. was

9
00:00:32,590 --> 00:00:36,680
was Ben's work so I give up big hi and
welcome

10
00:00:36,680 --> 00:00:43,680
and aloha kinda look at the started he
yo

11
00:00:44,510 --> 00:00:47,620
hello yep cope

12
00:00:47,620 --> 00:00:52,390
awesome so yet guy I'm Ben um

13
00:00:52,390 --> 00:00:55,620
so to

14
00:00:55,620 --> 00:00:59,538
summer the slides about 3

15
00:00:59,539 --> 00:01:04,920
have been presented before a.m. it turns
out that I wrote the slide so I worked

16
00:01:04,920 --> 00:01:07,600
out this is not really a talk about
colonel fuzzing

17
00:01:07,600 --> 00:01:11,280
at all like it doesn't really have

18
00:01:11,280 --> 00:01:15,600
any causing in it and I'm not causing
the kernel

19
00:01:15,600 --> 00:01:19,619
and I've got some really horrible

20
00:01:19,620 --> 00:01:23,310
horrible images so I'm sorry to make you
suffer

21
00:01:23,310 --> 00:01:26,890
sided talk like to me

22
00:01:26,890 --> 00:01:30,980
turned me down a tiny bit place I did
talk

23
00:01:30,980 --> 00:01:34,130
one year were ahead a little bit of
pornography

24
00:01:34,130 --> 00:01:39,300
um and some of my friends who like well
that's where cool you can't have like

25
00:01:39,300 --> 00:01:44,160
naked women so every talk up done since
then I've just had

26
00:01:44,160 --> 00:01:50,979
really offensive Batman and this has
plenty of those

27
00:01:50,980 --> 00:01:54,710
um I this is my second

28
00:01:54,710 --> 00:01:59,199
small coal project so this up didn't
like nose down for about six weeks the

29
00:01:59,200 --> 00:02:01,080
previous one was about five weeks

30
00:02:01,080 --> 00:02:04,580
so I'm not really very good at the
Windows kernel the

31
00:02:04,580 --> 00:02:08,508
but I have it done a lot a fucing like
really a lot of fussing

32
00:02:08,508 --> 00:02:12,220
and I'm yeah an old man I turned 40

33
00:02:12,220 --> 00:02:16,000
this year which is why it changed all of
my edit the color schemes cream

34
00:02:16,000 --> 00:02:20,530
they used to be like black and I have

35
00:02:20,530 --> 00:02:23,790
certificate this is me getting my

36
00:02:23,790 --> 00:02:27,260
windows internals certificate from Alex

37
00:02:27,260 --> 00:02:31,480
in SB so the alex is important because
he did a talk

38
00:02:31,480 --> 00:02:35,049
this year it's i scan about I'll PC

39
00:02:35,050 --> 00:02:39,360
um and it's kind of record but if

40
00:02:39,360 --> 00:02:42,370
anyone that's a practitioner is gonna
wanna go and

41
00:02:42,370 --> 00:02:47,170
read that talk if I wanna write any code
based on my slides as well

42
00:02:47,170 --> 00:02:51,750
because the they go together so I tried
not to cover too much

43
00:02:51,750 --> 00:02:55,870
of the stuff that's directly in his deck
from

44
00:02:55,870 --> 00:02:59,600
but it's a fairly new area but this is
the first time I've seen him

45
00:02:59,600 --> 00:03:02,900
talk publicly about it although we've
talked privately

46
00:03:02,900 --> 00:03:07,340
for a few years so we're not

47
00:03:07,340 --> 00:03:10,709
causing I'll PC itself

48
00:03:10,709 --> 00:03:14,570
firm we using I'll PC

49
00:03:14,570 --> 00:03:19,489
as a vector you could cause I'll be safe
um

50
00:03:19,489 --> 00:03:24,549
I personally wouldn't advise it like its
all kernel code it's been

51
00:03:24,549 --> 00:03:29,930
well that's it its like new so I don't
think they've screwed it up

52
00:03:29,930 --> 00:03:34,070
per site a.m. so what we're really doing

53
00:03:34,070 --> 00:03:37,480
he is fussing usual and EPs from

54
00:03:37,480 --> 00:03:41,910
and it turns out that this is an attack
surface for use a land ups that

55
00:03:41,910 --> 00:03:46,120
a lot of people that right yepson not
expecting

56
00:03:46,120 --> 00:03:51,170
to be attacked which makes it good but
before we even start to like

57
00:03:51,170 --> 00:03:55,890
get into I'll be /c we do need to do
quite a bit

58
00:03:55,890 --> 00:03:59,339
of shallow colonel reversing

59
00:03:59,340 --> 00:04:02,970
unfortunately cuz does no docs

60
00:04:02,970 --> 00:04:07,180
so I have this

61
00:04:07,180 --> 00:04:11,680
just because like it's like a slide that
I like

62
00:04:11,680 --> 00:04:14,800
some fun thing to me now after

63
00:04:14,800 --> 00:04:18,260
this is are even know that

64
00:04:18,260 --> 00:04:21,459
doesn't thing that I've cause properly

65
00:04:21,459 --> 00:04:24,830
um and

66
00:04:24,830 --> 00:04:28,849
after a while you start said generalize
the process in your mind to the way that

67
00:04:28,849 --> 00:04:30,770
you think about fucking

68
00:04:30,770 --> 00:04:33,909
is really you don't like go and say like

69
00:04:33,910 --> 00:04:37,919
oh ok but this impossible when the
project is like no it's just buzzing

70
00:04:37,919 --> 00:04:41,840
right so you pick a target at the new
workout

71
00:04:41,840 --> 00:04:45,310
the basic steps like alright well I need
to look at how I can deliver

72
00:04:45,310 --> 00:04:48,729
I need to work ahead to expose some
Texas

73
00:04:48,729 --> 00:04:53,169
I need to work out had instrument
because I need to know if i won

74
00:04:53,169 --> 00:04:57,020
right at some point you can send a whole
but to jump to anything

75
00:04:57,020 --> 00:05:01,229
we had this trouble with some by spend
fuzzing we were doing

76
00:05:01,229 --> 00:05:04,760
like I can send a whole bunch of junk to
the baseband chip on the phone

77
00:05:04,760 --> 00:05:09,510
but how do I tell if I want like unless
some physically they're looking at

78
00:05:09,510 --> 00:05:13,060
I don't know if it's rebooted I can't
get a debug on the ice and all about

79
00:05:13,060 --> 00:05:17,030
the generation these days is actually
almost the least

80
00:05:17,030 --> 00:05:21,169
interesting Potter the whole problem
whenever I he kids talking about like

81
00:05:21,169 --> 00:05:21,770
causes

82
00:05:21,770 --> 00:05:24,440
they've written and they talk about how
they're generating test cases a month

83
00:05:24,440 --> 00:05:24,990
what

84
00:05:24,990 --> 00:05:31,990
really like you can just send random
joke mostly proposing and it works

85
00:05:32,390 --> 00:05:35,530
just as well I've got extensive stats

86
00:05:35,530 --> 00:05:39,739
that proves that almost up to

87
00:05:39,740 --> 00:05:43,220
the highest level completely stupid

88
00:05:43,220 --> 00:05:47,789
beats not quiet the smartest person
there is

89
00:05:47,789 --> 00:05:51,060
and even completely strip it is still
gonna be

90
00:05:51,060 --> 00:05:54,710
the smartest person there are sometimes
because they'll find different books

91
00:05:54,710 --> 00:05:58,659
so generation get boring instrumentation

92
00:05:58,659 --> 00:06:02,060
really really really hot scale is

93
00:06:02,060 --> 00:06:06,250
hot but boring so

94
00:06:06,250 --> 00:06:10,140
we gonna presuppose that we've selected
I'll PC is a

95
00:06:10,140 --> 00:06:14,000
passing target i think is a pretty good
target because it's new

96
00:06:14,000 --> 00:06:17,669
it's only in mister like since mister

97
00:06:17,669 --> 00:06:21,680
a its completely and documented as far
as I can tell

98
00:06:21,680 --> 00:06:25,870
the mmm its kinda tricky to program
which

99
00:06:25,870 --> 00:06:30,690
well at least I was really really bad it
so I assume that means it's tricky

100
00:06:30,690 --> 00:06:34,419
from and its in your Windows machine

101
00:06:34,419 --> 00:06:37,990
surprisingly everywhere so

102
00:06:37,990 --> 00:06:41,200
food if we win if we if we get a result
right

103
00:06:41,200 --> 00:06:46,370
what are we going to achieve well we can
probably get professed

104
00:06:46,370 --> 00:06:51,830
to system and output system plus because
the pop something like to see is RSS

105
00:06:51,830 --> 00:06:56,940
thats actually pretty much you in the
kernel at that point

106
00:06:56,940 --> 00:07:00,950
the MSO at least system plus and I mean
for anyway

107
00:07:00,950 --> 00:07:04,820
I mean from inside the most restricted I
E sandbox

108
00:07:04,820 --> 00:07:08,680
lot about about about a block because
everything will let you make it they'll

109
00:07:08,680 --> 00:07:10,370
PC Connection

110
00:07:10,370 --> 00:07:14,700
and is no seats the Alex

111
00:07:14,700 --> 00:07:17,890
has got some bugs that I up memory
helpers

112
00:07:17,890 --> 00:07:22,099
like for example he can just cause a
process to allocate

113
00:07:22,099 --> 00:07:25,120
as many pages as he wants with

114
00:07:25,120 --> 00:07:30,289
whatever contents that he wants so those
sound really boring

115
00:07:30,289 --> 00:07:33,789
but when you like in the nuts and bolts
owed exploitation dozer

116
00:07:33,789 --> 00:07:37,599
really kinda good books like being able
to get

117
00:07:37,599 --> 00:07:40,659
a process to map whatever memory like

118
00:07:40,659 --> 00:07:43,719
I don't know if there's a disclosure bug
but I'm

119
00:07:43,719 --> 00:07:47,200
it's the kind of thing that would be in
scope for these attacks

120
00:07:47,200 --> 00:07:50,610
so if there's a memory disclosure like

121
00:07:50,610 --> 00:07:53,979
any local maybe disclosures great even
for another process

122
00:07:53,979 --> 00:07:57,560
and if I can get some kind or disclosure
that good

123
00:07:57,560 --> 00:08:02,229
duos attribute but that's already
absolutely done

124
00:08:02,229 --> 00:08:05,479
and we could in theory if we found a bug
in

125
00:08:05,479 --> 00:08:09,050
I'll PC itself that would just be giant

126
00:08:09,050 --> 00:08:12,440
that would be own the kernel from

127
00:08:12,440 --> 00:08:15,599
anywhere on the network or anywhere

128
00:08:15,599 --> 00:08:18,849
for many process on the host but thats

129
00:08:18,849 --> 00:08:22,849
that would be unlikely in my opinion

130
00:08:22,849 --> 00:08:26,349
so much they were looking up risks so
the guys they're gonna be wanting to

131
00:08:26,349 --> 00:08:29,740
run these kinds all apostles

132
00:08:29,740 --> 00:08:32,760
will probably be dies during browser
escapes I would imagine

133
00:08:32,760 --> 00:08:36,479
I'm not a practitioner

134
00:08:36,479 --> 00:08:39,669
um certain it so I PC mechanism

135
00:08:39,669 --> 00:08:43,149
effectively um its

136
00:08:43,149 --> 00:08:47,660
really really beautiful but ok I was
looking at it and thinking should this

137
00:08:47,660 --> 00:08:48,050
is

138
00:08:48,050 --> 00:08:51,500
grapes it's really well written the

139
00:08:51,500 --> 00:08:55,730
sink or icing super super simple API

140
00:08:55,730 --> 00:08:59,950
really fast the it supports

141
00:08:59,950 --> 00:09:04,790
good shared memory so you can shame
every without the process but the

142
00:09:04,790 --> 00:09:08,170
whole thing is operated by the kernel so
to

143
00:09:08,170 --> 00:09:13,860
there's no true book there are not
designed to be any possibility of

144
00:09:13,860 --> 00:09:17,089
daughter races telecheck to use the

145
00:09:17,089 --> 00:09:20,240
mmm it's a really nice way to

146
00:09:20,240 --> 00:09:23,709
Windows LPC

147
00:09:23,709 --> 00:09:28,989
so that moves the whole lot BC and that
means the mood also at BCD com

148
00:09:28,990 --> 00:09:32,480
onto this whole thing from mister

149
00:09:32,480 --> 00:09:35,630
so good it's not but imagine

150
00:09:35,630 --> 00:09:38,839
that its network cuz that's the that's
going to be your

151
00:09:38,839 --> 00:09:43,560
best mental analogy at the link I got on
the bottom up all of these

152
00:09:43,560 --> 00:09:47,369
slides by the way it is Alex's talk
which

153
00:09:47,370 --> 00:09:51,690
again you should definitely rate

154
00:09:51,690 --> 00:09:55,700
server when we're looking at

155
00:09:55,700 --> 00:09:59,420
windows out BC we think we're making at
RPC call

156
00:09:59,420 --> 00:10:03,810
all local %ah PC call from like my
random process to

157
00:10:03,810 --> 00:10:08,079
some other random process that's running
the service

158
00:10:08,080 --> 00:10:14,950
so we'll see a lot of barrier barry the
kinda lauter

159
00:10:14,950 --> 00:10:21,709
partly cuz I like daughters but also
he's a recurring character

160
00:10:21,709 --> 00:10:25,638
and so barry's gonna say that first roll

161
00:10:25,639 --> 00:10:28,709
obviously everybody knows the Windows
kernel

162
00:10:28,709 --> 00:10:32,888
like I concede in your eyes you like
this is like completely boring get on to

163
00:10:32,889 --> 00:10:35,930
the good stuff but just in case there's
like one person

164
00:10:35,930 --> 00:10:40,109
that is not completely familiar with the
Windows kinda model

165
00:10:40,110 --> 00:10:46,120
um between usual and which is where all
normal processes run

166
00:10:46,120 --> 00:10:50,149
and what we call the kernel there is a
high barrier which is this

167
00:10:50,149 --> 00:10:54,240
dotted line right and it's like

168
00:10:54,240 --> 00:10:57,430
the current get beyond the glass

169
00:10:57,430 --> 00:11:01,479
so to get from used a colonel you gotta
do special stuff

170
00:11:01,480 --> 00:11:04,800
and inside the curlies where drivers run

171
00:11:04,800 --> 00:11:08,519
anything that touches the hardware and
we've got up punchan

172
00:11:08,519 --> 00:11:11,930
subsystems that I won't go into because
it

173
00:11:11,930 --> 00:11:16,079
take too long so the important thing is
though that

174
00:11:16,079 --> 00:11:19,989
to get across this barrier we need to
make the siskel

175
00:11:19,990 --> 00:11:24,490
so they call a context switch and you
load up your arguments

176
00:11:24,490 --> 00:11:30,199
in were depending on platform but in
registers are on the stack or whatever

177
00:11:30,199 --> 00:11:35,579
and a special instruction that you call
and then your persists

178
00:11:35,579 --> 00:11:39,709
as if you're running as the person is
your conception of time is set up made

179
00:11:39,709 --> 00:11:40,540
this is cool

180
00:11:40,540 --> 00:11:45,379
and its returns immediately but it cost
is like $11.2 billion processes and the

181
00:11:45,379 --> 00:11:46,440
catalyst

182
00:11:46,440 --> 00:11:50,649
servicing the mall separately in

183
00:11:50,649 --> 00:11:54,740
and thats that's all I'll put in because
that's all that's relevant

184
00:11:54,740 --> 00:11:58,079
so for so the Windows kernel

185
00:11:58,079 --> 00:12:02,160
also has an object hierarchy so a
colonel objects

186
00:12:02,160 --> 00:12:05,469
has a special header which we don't need
to know about just yet

187
00:12:05,470 --> 00:12:08,939
but there are times a different kinds of
Colonel objects

188
00:12:08,939 --> 00:12:12,259
and so these go in a director you can
look at them like a filesystem

189
00:12:12,259 --> 00:12:16,399
right

190
00:12:16,399 --> 00:12:19,509
and Fernando

191
00:12:19,509 --> 00:12:23,100
we good so now we can say right arrows
PC

192
00:12:23,100 --> 00:12:26,490
car to work with %uh

193
00:12:26,490 --> 00:12:30,560
guess there is no I'll PC connection
between %uh process

194
00:12:30,560 --> 00:12:34,310
so I don't actually send anything
process X

195
00:12:34,310 --> 00:12:37,779
I asked the kernel for handle trail

196
00:12:37,779 --> 00:12:41,040
a seaport and I'll PC port is a colonel
object

197
00:12:41,040 --> 00:12:45,089
I don't get to touch it directly all I
get is a number that

198
00:12:45,089 --> 00:12:48,149
I can pasta might just call that
references this

199
00:12:48,149 --> 00:12:51,550
and/or the whole connection

200
00:12:51,550 --> 00:12:55,128
inside is completely colonel internal

201
00:12:55,129 --> 00:12:58,459
so 177 style PC connection

202
00:12:58,459 --> 00:13:02,459
now i cant stand on top of that and %uh
PC binds

203
00:13:02,459 --> 00:13:06,399
and get anarchy see except but I'll PC
is a lower level

204
00:13:06,399 --> 00:13:09,839
but all of that

205
00:13:09,839 --> 00:13:15,600
bright so through

206
00:13:15,600 --> 00:13:19,149
now I like ok I will what is that attack
surface look like

207
00:13:19,149 --> 00:13:23,779
tell me more about these I'll PC port I
want to know who's talking

208
00:13:23,779 --> 00:13:27,069
to home and I want to know which
processes have

209
00:13:27,069 --> 00:13:31,269
I'll PC port that I can start Park

210
00:13:31,269 --> 00:13:34,709
this is like part of the whole like
delivery

211
00:13:34,709 --> 00:13:38,099
size so you can get

212
00:13:38,100 --> 00:13:41,959
a to call we not the

213
00:13:41,959 --> 00:13:45,518
and this is the colonel object directory

214
00:13:45,519 --> 00:13:48,920
monitor how they've implemented we don't
just sell

215
00:13:48,920 --> 00:13:52,498
but you can see here the direct ruin his

216
00:13:52,499 --> 00:13:56,879
not BC control so these are just RPC
maps

217
00:13:56,879 --> 00:14:01,860
courts that are running on I'll PC there
are also many I'll be seaports they have

218
00:14:01,860 --> 00:14:03,720
nothing to do with that BC

219
00:14:03,720 --> 00:14:07,230
so these are just the %uh PC one that's
why they're all like crazy over the

220
00:14:07,230 --> 00:14:09,319
names

221
00:14:09,319 --> 00:14:13,689
but econ get information from we're not
sure about your

222
00:14:13,689 --> 00:14:16,930
LP seaports bucket just that not written
in

223
00:14:16,930 --> 00:14:20,040
support clicky clicky

224
00:14:20,040 --> 00:14:24,480
the for these ports sadly so it's like
are all

225
00:14:24,480 --> 00:14:28,689
when it's a now start to learn a bit
more about

226
00:14:28,689 --> 00:14:32,610
kind of stuff so gonna go and do
something kernel debugging

227
00:14:32,610 --> 00:14:36,480
which is nowhere near as scary as it
sounds um

228
00:14:36,480 --> 00:14:41,339
it used to be really picky so you have
to have like serial ports

229
00:14:41,339 --> 00:14:46,410
or two VM's has anyone tried to do that
thing we try to get it working over

230
00:14:46,410 --> 00:14:49,519
named pipe and never can works

231
00:14:49,519 --> 00:14:53,189
it just takes you like a whole data set
up

232
00:14:53,189 --> 00:14:57,120
now the debuggers all support this local
cable TV working

233
00:14:57,120 --> 00:15:00,709
so we don't have this problem

234
00:15:00,709 --> 00:15:03,729
so it's not by looking at the Colonels
view of

235
00:15:03,730 --> 00:15:08,350
some random process right I'm just gonna
pick services that exceed

236
00:15:08,350 --> 00:15:12,259
and so this process handle that was
saying

237
00:15:12,259 --> 00:15:16,209
is the the Colonels process object

238
00:15:16,209 --> 00:15:19,459
and we can see its pair minutes

239
00:15:19,459 --> 00:15:22,810
like trade ID and a lot

240
00:15:22,810 --> 00:15:27,310
so that it's telling us about some usual
and stuff

241
00:15:27,310 --> 00:15:31,329
I'm and so I we can dump ports

242
00:15:31,329 --> 00:15:34,378
that up created and used by this process

243
00:15:34,379 --> 00:15:38,449
again we're looking at Colonel handles
colonel object handles

244
00:15:38,449 --> 00:15:42,300
so we see that this guy's got one port

245
00:15:42,300 --> 00:15:45,599
and it gives us the name which is nice

246
00:15:45,600 --> 00:15:49,189
and then we can get the poor information
for

247
00:15:49,189 --> 00:15:53,120
that port which gives us

248
00:15:53,120 --> 00:15:57,660
some fairly and East Duff

249
00:15:57,660 --> 00:16:01,699
so slight alright well if I know every
process like and

250
00:16:01,699 --> 00:16:05,120
go through I could like manually dumb

251
00:16:05,120 --> 00:16:08,600
all of the polls and so i cant reports

252
00:16:08,600 --> 00:16:12,160
%uh there on your average Windows system

253
00:16:12,160 --> 00:16:15,899
well unfortunately it turns out the

254
00:16:15,899 --> 00:16:19,670
really a shitload term

255
00:16:19,670 --> 00:16:23,529
so doing it manually would be wrong in
bed

256
00:16:23,529 --> 00:16:30,529
so we're not going to do that because we
have cuz and we like to write code

257
00:16:30,819 --> 00:16:35,040
so

258
00:16:35,040 --> 00:16:40,949
the kinda look like my dead its
terrifying

259
00:16:40,949 --> 00:16:45,870
some I write this tool actually quite a
while ago

260
00:16:45,870 --> 00:16:49,889
so it's a ruby rapper for the windy bud

261
00:16:49,889 --> 00:16:53,839
corps de lo so debug inge um

262
00:16:53,839 --> 00:16:58,300
and I hear little like Parkton guys come
up and say oh let's just like some

263
00:16:58,300 --> 00:16:59,019
random

264
00:16:59,019 --> 00:17:02,689
piping talbot's not now the pot and
tools fucking work

265
00:17:02,689 --> 00:17:06,020
and none of them properly rather debug
image

266
00:17:06,020 --> 00:17:09,639
right there are some that are plugins to
win debug

267
00:17:09,640 --> 00:17:13,470
so you can run python from inside with
about you know what do that

268
00:17:13,470 --> 00:17:17,709
and there are some that a just written
as a basic debug loop

269
00:17:17,709 --> 00:17:21,459
and you know what do that either so

270
00:17:21,459 --> 00:17:25,680
unfortunate in ruby and I now really
regret my choices but

271
00:17:25,680 --> 00:17:30,190
you got caught kernel debugging and you
also have local kernel debugging you

272
00:17:30,190 --> 00:17:31,720
gonna do some pretty tricky stuff

273
00:17:31,720 --> 00:17:35,890
to get that but I've talked about it
before so I'm not putting it in

274
00:17:35,890 --> 00:17:39,190
but if you go to the prob conceal the

275
00:17:39,190 --> 00:17:43,059
with little tricks you need to do it was
so I have a

276
00:17:43,059 --> 00:17:47,250
fully scriptable rapper to went back

277
00:17:47,250 --> 00:17:51,770
and that the well while I'm being
horrible

278
00:17:51,770 --> 00:17:54,920
I could like put it Jason AP on the
kernel

279
00:17:54,920 --> 00:17:59,520
and that wouldn't be so hall

280
00:17:59,520 --> 00:18:05,030
so I'm like yeah I'll get local cable
debugging working with my roomie rapper

281
00:18:05,030 --> 00:18:08,370
and then I'm just gonna like hook that
up to let go website

282
00:18:08,370 --> 00:18:12,719
and make an IP on it and so now I'm
gonna connects

283
00:18:12,720 --> 00:18:16,260
to my Ruby API running on sinatra

284
00:18:16,260 --> 00:18:19,340
from go running on my Mac

285
00:18:19,340 --> 00:18:23,580
books and then everyone will be
disgusted

286
00:18:23,580 --> 00:18:28,800
in and

287
00:18:28,800 --> 00:18:33,169
that's what I've done so third this look
this little project

288
00:18:33,170 --> 00:18:37,410
is on the up

289
00:18:37,410 --> 00:18:42,510
up and it sends out this quite a lot of
stuff you want to do to

290
00:18:42,510 --> 00:18:46,060
map it probably so amusing

291
00:18:46,060 --> 00:18:50,860
the I'll PC extension heavily I'm using
bank token bank seed bank object bank

292
00:18:50,860 --> 00:18:51,449
process

293
00:18:51,450 --> 00:18:56,240
these are all debug inge extensions so
if you tried to do this from scratch

294
00:18:56,240 --> 00:19:00,390
like by doing like the cum laude direct
cuddle objects

295
00:19:00,390 --> 00:19:03,420
passing not it would take you a year

296
00:19:03,420 --> 00:19:07,580
shut up to snare

297
00:19:07,580 --> 00:19:13,760
so

298
00:19:13,760 --> 00:19:19,230
potentially democrat I'm hoping that I'm
just do God

299
00:19:19,230 --> 00:19:26,230
everything running that I need running K

300
00:19:33,640 --> 00:19:40,640
what I do what I do when I'm I'm not
doing that

301
00:19:59,770 --> 00:20:03,280
kept on doing is study at the bridge

302
00:20:03,280 --> 00:20:06,750
now from

303
00:20:06,750 --> 00:20:12,710
which is as it says really bad thing to
do it

304
00:20:12,710 --> 00:20:19,710
war poll who

305
00:20:21,540 --> 00:20:28,540
an

306
00:20:30,860 --> 00:20:35,770
so I'm gonna rerun this process

307
00:20:35,770 --> 00:20:39,700
from if not takes a while

308
00:20:39,700 --> 00:20:42,930
so to

309
00:20:42,930 --> 00:20:47,490
he said so we connecting to

310
00:20:47,490 --> 00:20:51,660
we connecting to the local

311
00:20:51,660 --> 00:20:56,570
but the VM's I P here we're highlighting
new

312
00:20:56,570 --> 00:21:00,669
system ports and with serving locally on
court eight thousand one

313
00:21:00,670 --> 00:21:03,960
but probably not my windows

314
00:21:03,960 --> 00:21:09,950
the M's

315
00:21:09,950 --> 00:21:13,450
IP address anymore so it's probably
gonna like spectacularly file

316
00:21:13,450 --> 00:21:20,450
here

317
00:21:25,180 --> 00:21:27,850
who

318
00:21:27,850 --> 00:21:34,850
bro

319
00:21:36,409 --> 00:21:40,600
boom so before like while that's running
because this will take a while

320
00:21:40,600 --> 00:21:46,090
I'm gonna come over here and hope that I
don't have any porn

321
00:21:46,090 --> 00:21:50,559
open and

322
00:21:50,559 --> 00:21:55,168
we're gonna look the the first scan I
did

323
00:21:55,169 --> 00:22:01,100
and this is were highlighted everything

324
00:22:01,100 --> 00:22:08,100
right sorry here i'm looking at

325
00:22:09,830 --> 00:22:13,658
everything that's running as anybody so
for example you see a lot of prices that

326
00:22:13,659 --> 00:22:14,649
are running as me

327
00:22:14,649 --> 00:22:19,139
and we don't care about those because
that's not going to be a previous could

328
00:22:19,139 --> 00:22:25,168
so this can that I'm really running is
where I'm looking at

329
00:22:25,169 --> 00:22:28,659
just stuff that's running as system

330
00:22:28,659 --> 00:22:34,370
so you'd think it would be like

331
00:22:34,370 --> 00:22:37,379
a smaller Texas but

332
00:22:37,380 --> 00:22:41,510
it turns out that we've still got good
Julian's

333
00:22:41,510 --> 00:22:44,529
alt ports running the system

334
00:22:44,529 --> 00:22:48,090
and what green means is there's no seat
anybody

335
00:22:48,090 --> 00:22:51,199
can connect to any of these I'll PC port

336
00:22:51,200 --> 00:22:54,409
which is surprising so like

337
00:22:54,409 --> 00:22:58,240
VM tools the this system Damon

338
00:22:58,240 --> 00:23:01,929
yes sure you can like running on a PC
port

339
00:23:01,929 --> 00:23:05,000
as system and have no security at all
that's cool

340
00:23:05,000 --> 00:23:12,000
I'm any we we don't go

341
00:23:12,899 --> 00:23:18,889
know who we're not done if we hopefully

342
00:23:18,889 --> 00:23:22,689
soon

343
00:23:22,690 --> 00:23:26,059
click on the court to give us important
for but maybe I'm gonna

344
00:23:26,059 --> 00:23:29,090
skip that time reasons so

345
00:23:29,090 --> 00:23:32,330
in the system persists still the I see
old

346
00:23:32,330 --> 00:23:36,408
a few important port an inservice host

347
00:23:36,409 --> 00:23:40,100
device failed like up port

348
00:23:40,100 --> 00:23:45,240
the mmm CS RSS the issue old one

349
00:23:45,240 --> 00:23:49,889
but this still one that we can get so we
can

350
00:23:49,889 --> 00:23:52,949
like randomly try and cause CSR sis

351
00:23:52,950 --> 00:23:57,240
we can randomly try and follows services

352
00:23:57,240 --> 00:24:00,700
locus credit manager Service Host toy

353
00:24:00,700 --> 00:24:07,700
see if we can do

354
00:24:08,700 --> 00:24:12,610
so the it wasn't working before because
these are all done live

355
00:24:12,610 --> 00:24:17,199
so when you click it goes live increase
the kernel debugger again for the LPC

356
00:24:17,200 --> 00:24:18,710
pour in for

357
00:24:18,710 --> 00:24:22,049
I'm so we're seeing new

358
00:24:22,049 --> 00:24:25,270
the same if much we got before debugger

359
00:24:25,270 --> 00:24:29,450
but its you know life in a web app
because I'm a horrible person

360
00:24:29,450 --> 00:24:36,450
should do

361
00:24:38,979 --> 00:24:41,989
now we know we got like a pretty tasty
Texas

362
00:24:41,989 --> 00:24:45,859
so it's like alright wall I can connect
to

363
00:24:45,859 --> 00:24:49,960
tons a random system processes but what
am I gonna send

364
00:24:49,960 --> 00:24:54,840
so the first thing you would normally do
as a fucking person would be so are

365
00:24:54,840 --> 00:24:58,779
we need to look at existing messages and
will use those the template

366
00:24:58,779 --> 00:25:01,830
for of Plaza and we'll meet I towers and
hope that we get

367
00:25:01,830 --> 00:25:06,649
interesting things I'm so I will how do
I do

368
00:25:06,649 --> 00:25:10,570
message looking for I'll PC um

369
00:25:10,570 --> 00:25:13,869
so the first thing I thought was alright
we'll there's this

370
00:25:13,869 --> 00:25:17,709
event racing for Windows framework which
is I thought

371
00:25:17,710 --> 00:25:23,159
new and sidecar looking around MSDN
alike haha there's like a star Trace

372
00:25:23,159 --> 00:25:26,509
API in advance that they are like at
Bappi

373
00:25:26,509 --> 00:25:29,769
and they do have a flag for LP say

374
00:25:29,769 --> 00:25:34,019
so I can turn on the kernel of the for
LPC messages

375
00:25:34,019 --> 00:25:37,349
like sweet so I immediately started like

376
00:25:37,349 --> 00:25:41,658
writing tons a code which was a little
bit tricky

377
00:25:41,659 --> 00:25:44,820
and then when you invoke that

378
00:25:44,820 --> 00:25:48,658
from go it looks kinda like this
specially set up a special properties

379
00:25:48,659 --> 00:25:52,879
struct and you said a whole bunch o
struck members to what they're supposed

380
00:25:52,879 --> 00:25:53,330
to be

381
00:25:53,330 --> 00:25:57,428
at any call this stock price API anatole
now

382
00:25:57,429 --> 00:26:01,950
but in this sample is that real

383
00:26:01,950 --> 00:26:06,789
nope so non

384
00:26:06,789 --> 00:26:13,789
back back back I suck at computers

385
00:26:18,339 --> 00:26:21,700
so in in this code sample a.m.

386
00:26:21,700 --> 00:26:25,879
we just like look into a circular buffer

387
00:26:25,879 --> 00:26:28,879
and he is like a fifty make

388
00:26:28,879 --> 00:26:32,049
sickle ok for firm

389
00:26:32,049 --> 00:26:39,049
and the color does that pretty well but
unfortunately I sock

390
00:26:40,009 --> 00:26:44,619
and I could've just used expert which
has been out since

391
00:26:44,619 --> 00:26:48,629
2000 working at height which is a girly

392
00:26:48,629 --> 00:26:52,998
clicky clicky thing that's got a button
that says like her do a real PC looking

393
00:26:52,999 --> 00:26:56,259
I'm

394
00:26:56,259 --> 00:26:59,450
so yeah googling is an important skill

395
00:26:59,450 --> 00:27:03,839
it turns out and even worse I suck so
bad that

396
00:27:03,839 --> 00:27:07,849
and up it's not even in the so I got the
event rice

397
00:27:07,849 --> 00:27:11,200
output but it doesn't have any the
contents just got the message id: which

398
00:27:11,200 --> 00:27:11,659
is

399
00:27:11,659 --> 00:27:14,820
completely useless so are that was bad

400
00:27:14,820 --> 00:27:18,099
so that I was like talking to Alex and I
was like huh

401
00:27:18,099 --> 00:27:21,739
so this this special rules switch like
if u

402
00:27:21,739 --> 00:27:24,769
disassemble debug inch you can look at
the

403
00:27:24,769 --> 00:27:28,799
extensions and you can finance lot to
the extensions have

404
00:27:28,799 --> 00:27:31,869
undocumented switches say just like ida

405
00:27:31,869 --> 00:27:35,599
debug and stock deal you can find all
this school shit a

406
00:27:35,599 --> 00:27:39,559
and you just need to turn a registry key
and

407
00:27:39,559 --> 00:27:43,269
used the LPC log message: extension was
like okay

408
00:27:43,269 --> 00:27:47,089
that sounds awesome but then the thing
is that is this

409
00:27:47,089 --> 00:27:50,359
undocumented symbol the

410
00:27:50,359 --> 00:27:53,439
but and I didn't know this and this is

411
00:27:53,440 --> 00:27:57,099
actually the thing that I'm probably
happiest about from the whole project

412
00:27:57,099 --> 00:28:00,879
you can just get a random mood

413
00:28:00,879 --> 00:28:04,978
existing PDB you write like this is the
whole

414
00:28:04,979 --> 00:28:08,419
top seed file you are dusty father has a
struct

415
00:28:08,419 --> 00:28:12,029
declaration for your undocumented or
private simple

416
00:28:12,029 --> 00:28:15,419
from and I'm just during the struct

417
00:28:15,419 --> 00:28:18,539
debt and declaring a global variable

418
00:28:18,539 --> 00:28:22,059
of that type prior and then

419
00:28:22,059 --> 00:28:25,749
using the command line compiler it all
just

420
00:28:25,749 --> 00:28:28,950
at that simple to your existing PDB so
if there's any

421
00:28:28,950 --> 00:28:32,190
like private symbols that you've
reverse-engineered out

422
00:28:32,190 --> 00:28:35,279
or like stolen from somewhere you can
take a

423
00:28:35,279 --> 00:28:38,979
public PDB right a tiny bit of C

424
00:28:38,979 --> 00:28:42,589
and old now be in your simple fall so
the shop in Ida

425
00:28:42,589 --> 00:28:46,309
the shop in Wynberg trickle trickle

426
00:28:46,309 --> 00:28:50,379
like not xxx for me

427
00:28:50,379 --> 00:28:53,879
like x64 but unfortunately

428
00:28:53,879 --> 00:28:57,728
bike that only works in Vista because

429
00:28:57,729 --> 00:29:00,910
alex is a dick and you've got to tell me

430
00:29:00,910 --> 00:29:04,820
a.m. but the simple trick is really cool
SAR

431
00:29:04,820 --> 00:29:08,050
if you can get a debug build quarter on
mister then yeah

432
00:29:08,050 --> 00:29:13,419
okay maybe you could use this so much
alright fine fine fine fine fine up

433
00:29:13,420 --> 00:29:14,780
pretty bad girl do that

434
00:29:14,780 --> 00:29:17,850
like this is a normal just colgate the

435
00:29:17,850 --> 00:29:21,530
mmm and they said we're almost at the
native API things

436
00:29:21,530 --> 00:29:25,710
look like the so WYD

437
00:29:25,710 --> 00:29:29,520
you don't see the Arts being set up
because this setup

438
00:29:29,520 --> 00:29:34,980
somewhere a little bit higher a but it's
moving the just call number: into the AX

439
00:29:34,980 --> 00:29:40,330
and then siskel so what that does at
that point is the context which

440
00:29:40,330 --> 00:29:45,280
and when I return from syscall my
message will magically be in the buffer

441
00:29:45,280 --> 00:29:45,850
that I

442
00:29:45,850 --> 00:29:49,800
assigned to receive my I'll PC message
so if I break

443
00:29:49,800 --> 00:29:54,610
at this siskel so after the school
what's happened

444
00:29:54,610 --> 00:29:59,010
I can this is the

445
00:29:59,010 --> 00:30:02,600
particle so this is the Yum function
signature

446
00:30:02,600 --> 00:30:07,240
and we see that like on x64 the fifth i

447
00:30:07,240 --> 00:30:10,420
is going to be X 28 because

448
00:30:10,420 --> 00:30:14,910
maths from even though in case you
didn't know you like

449
00:30:14,910 --> 00:30:18,660
even though fusco uses register
arguments on 64-bit

450
00:30:18,660 --> 00:30:21,700
but still reserve the same in a spice
under

451
00:30:21,700 --> 00:30:25,480
exactly know why I had a haven't looked
at it but i still reserve space for the

452
00:30:25,480 --> 00:30:26,540
first four ox

453
00:30:26,540 --> 00:30:29,610
so your stack I just do gonna start at

454
00:30:29,610 --> 00:30:33,209
ok 28 the this season's

455
00:30:33,210 --> 00:30:36,490
some really code so I'm reading a
pointer from

456
00:30:36,490 --> 00:30:40,720
buyers P plus 28 and then

457
00:30:40,720 --> 00:30:46,490
I am reading virtual from that of said

458
00:30:46,490 --> 00:30:51,510
like that's the point to the message to
buy it changes the message size

459
00:30:51,510 --> 00:30:54,660
and then I'm reading the rest message
from

460
00:30:54,660 --> 00:30:58,570
memory its pretty simple and that works

461
00:30:58,570 --> 00:31:01,780
which is nice so

462
00:31:01,780 --> 00:31:05,710
I have this team for

463
00:31:05,710 --> 00:31:08,800
other people that will do presentations

464
00:31:08,800 --> 00:31:13,620
in the future like anytime you've tried
something it hasn't worked

465
00:31:13,620 --> 00:31:17,439
he probably still do wanna put it in
your talk because

466
00:31:17,440 --> 00:31:20,790
it turns out that we all suck in my
experience

467
00:31:20,790 --> 00:31:25,850
and I personally learn a lot more from
talk that includes

468
00:31:25,850 --> 00:31:29,260
stuff that didn't work because like to
order that way

469
00:31:29,260 --> 00:31:33,210
in the living room so present your
failures

470
00:31:33,210 --> 00:31:36,630
I'm so

471
00:31:36,630 --> 00:31:40,060
to get LPC load the mmm

472
00:31:40,060 --> 00:31:43,389
I'm really long time well

473
00:31:43,390 --> 00:31:50,390
no

474
00:31:50,730 --> 00:31:57,730
the new come to me correct

475
00:32:04,470 --> 00:32:07,440
damn it but what I wanna do is actually
skipped this demo

476
00:32:07,440 --> 00:32:11,550
and say I did from

477
00:32:11,550 --> 00:32:17,310
looks like this Amanda do just dump out

478
00:32:17,310 --> 00:32:21,360
all the LPC messages received by any
process

479
00:32:21,360 --> 00:32:25,439
but in theory about 13 minutes left

480
00:32:25,440 --> 00:32:28,750
so we getting not do it

481
00:32:28,750 --> 00:32:33,300
so we're gonna talk about would without
doubt

482
00:32:33,300 --> 00:32:37,159
miss just coming into a process so now
we're going to talk about alright like

483
00:32:37,160 --> 00:32:40,440
let's actually do the thing that to like
some connection

484
00:32:40,440 --> 00:32:45,360
if you can build it yourself then you
probably don't know how the particle

485
00:32:45,360 --> 00:32:45,969
works

486
00:32:45,970 --> 00:32:50,080
the there's not much doc

487
00:32:50,080 --> 00:32:53,379
the new addition to I think the seventh

488
00:32:53,380 --> 00:32:58,970
windows internals is going to have some
stuff has approved Alex's chapter 4

489
00:32:58,970 --> 00:33:03,140
a.m. somebody LPC stuff the jurors Dunne

490
00:33:03,140 --> 00:33:07,000
is worth looking at even though it's not
LPC anymore

491
00:33:07,000 --> 00:33:10,130
and you can get the

492
00:33:10,130 --> 00:33:14,260
ntop capi die online which is good

493
00:33:14,260 --> 00:33:17,270
and is getting a project that some guys
written in C

494
00:33:17,270 --> 00:33:21,550
it doesn't look like it'll work properly
to me like it looks really sketchy

495
00:33:21,550 --> 00:33:25,610
a.m. but some other he's worth

496
00:33:25,610 --> 00:33:28,909
like costing your eye over I'm using

497
00:33:28,910 --> 00:33:32,480
go to come bicycling idiot the

498
00:33:32,480 --> 00:33:36,150
mmm but it means you can statically
compiled binary

499
00:33:36,150 --> 00:33:40,440
so for example I can build a binary on
Windows and go always completely

500
00:33:40,440 --> 00:33:41,430
statically links

501
00:33:41,430 --> 00:33:45,720
so I can then ship that binary to anyone
I'm

502
00:33:45,720 --> 00:33:51,590
which is not the case for scripting
languages so I'll PC looks like this

503
00:33:51,590 --> 00:33:54,780
you connect port

504
00:33:54,780 --> 00:33:58,360
and you give it the name all the
connection port was running on the

505
00:33:58,360 --> 00:33:59,699
service you want to connect to

506
00:33:59,700 --> 00:34:02,760
the server Coles except

507
00:34:02,760 --> 00:34:08,389
connector port and so once that's been
done we've now both got a communication

508
00:34:08,389 --> 00:34:08,900
port

509
00:34:08,900 --> 00:34:12,160
and those are anonymous so followed the

510
00:34:12,159 --> 00:34:15,580
on the debug output like are 15 slides
ago

511
00:34:15,580 --> 00:34:20,630
or the connection port which is most of
them are all the ports that like

512
00:34:20,630 --> 00:34:23,680
a random process talks to a server on

513
00:34:23,679 --> 00:34:27,520
but you're wasting as a server on your
connection port

514
00:34:27,520 --> 00:34:30,580
only so your receipt lewd

515
00:34:30,580 --> 00:34:33,889
he's like single-threaded

516
00:34:33,889 --> 00:34:37,710
and beautiful you don't have to spin a
threat to white on every pore

517
00:34:37,710 --> 00:34:41,250
that's talking to every client I'm which

518
00:34:41,250 --> 00:34:45,860
is noise so

519
00:34:45,860 --> 00:34:48,670
a

520
00:34:48,670 --> 00:34:52,250
I don't know who this guy is I just
found it blog online

521
00:34:52,250 --> 00:34:57,750
his territory so this is the

522
00:34:57,750 --> 00:35:01,180
basic connection so I'm connecting to

523
00:35:01,180 --> 00:35:06,040
the 79 which the string I am setting up
soup lacks

524
00:35:06,040 --> 00:35:10,310
the server these the slides are mainly
here because

525
00:35:10,310 --> 00:35:14,640
like someone's actually gonna go on use
this code in right father

526
00:35:14,640 --> 00:35:18,220
and like it might not be someone that's
hero might be

527
00:35:18,220 --> 00:35:22,100
but these a slice or two more meant to
be on the record then

528
00:35:22,100 --> 00:35:26,560
engaging presentation material and we're
accepting

529
00:35:26,560 --> 00:35:30,470
and in our safely which is cool we just
use the same buffer

530
00:35:30,470 --> 00:35:33,669
the because it's on the on on either
side the siskel

531
00:35:33,670 --> 00:35:38,500
so when we swim a call send receive the
send/receive happen

532
00:35:38,500 --> 00:35:41,840
from my point of view from usual and
instantly

533
00:35:41,840 --> 00:35:46,280
so I it's just call and I'm I but
forgets magically replaced with

534
00:35:46,280 --> 00:35:51,070
the response to I L PC message which is
fast

535
00:35:51,070 --> 00:35:55,680
am memory efficient and awesome so

536
00:35:55,680 --> 00:35:59,859
alright with the server only whites on
its one connection port

537
00:35:59,860 --> 00:36:03,660
then had we dispatched to multiple
clients because all these messages

538
00:36:03,660 --> 00:36:04,629
coming in and

539
00:36:04,630 --> 00:36:08,550
like I don't know like where I'm
actually responding

540
00:36:08,550 --> 00:36:12,330
and so the I'll be semesters have what's
called

541
00:36:12,330 --> 00:36:15,900
attributes a and solar

542
00:36:15,900 --> 00:36:19,030
there's a few of them the important what
the most important one if you're

543
00:36:19,030 --> 00:36:20,930
watching the server is the context

544
00:36:20,930 --> 00:36:23,930
at sweep so when you accept the port

545
00:36:23,930 --> 00:36:27,740
you can accept that and also possible
pointer to

546
00:36:27,740 --> 00:36:31,069
an opaque struct its which is a

547
00:36:31,070 --> 00:36:34,190
programmers term for whatever the hell
you want

548
00:36:34,190 --> 00:36:38,750
right so I when I accept a connection I
can save a pointer

549
00:36:38,750 --> 00:36:43,370
to whatever I want and when i receive
every new message

550
00:36:43,370 --> 00:36:47,730
I can get that point to back so if for
example I can say like

551
00:36:47,730 --> 00:36:52,240
idea by the way this was Fred one except
know every message I sit back and look

552
00:36:52,240 --> 00:36:54,879
at the thing and get my point is out %uh
that spread right

553
00:36:54,880 --> 00:36:58,770
but prefer it's on like handle rx
seven-c_ right

554
00:36:58,770 --> 00:37:02,580
you can also put doctor views

555
00:37:02,580 --> 00:37:05,960
if your gonna stop poking at then the
the dot use a

556
00:37:05,960 --> 00:37:09,800
deeply interesting that's how you do
your shared memory anything that's too

557
00:37:09,800 --> 00:37:11,350
big for normal

558
00:37:11,350 --> 00:37:16,380
LPC message which is 64k now goes in a
doubt if you attribute

559
00:37:16,380 --> 00:37:20,020
handles security attributes mid

560
00:37:20,020 --> 00:37:25,490
not that interesting the unfortunately
these are secured by the kernel

561
00:37:25,490 --> 00:37:30,140
so all other things that you're
immediately thinking if your daddy

562
00:37:30,140 --> 00:37:30,700
hacker

563
00:37:30,700 --> 00:37:34,870
probably won't work because the kernel
is going to sanitize

564
00:37:34,870 --> 00:37:38,060
all if you don hewitt routes and stuff
if you try and like

565
00:37:38,060 --> 00:37:41,299
lie about your process ID in your
message the kind of guy to fix that for

566
00:37:41,300 --> 00:37:41,630
you

567
00:37:41,630 --> 00:37:48,630
so sadly so the the technology they use
for these his capture an expose

568
00:37:48,910 --> 00:37:55,910
so here I am here I'm

569
00:37:56,500 --> 00:38:01,380
capturing a thing and I've setup

570
00:38:01,380 --> 00:38:04,980
my own little structure where I just got
a handle

571
00:38:04,980 --> 00:38:10,480
member and so as I accept

572
00:38:10,480 --> 00:38:14,390
I'm accepting with this port complex
which the point it's a

573
00:38:14,390 --> 00:38:19,450
my little struct and so then in my
receive little my server

574
00:38:19,450 --> 00:38:25,000
I E just do a point to Costco

575
00:38:25,000 --> 00:38:27,900
apparently that this is the way it's
what to do it looks kinda dirty to me

576
00:38:27,900 --> 00:38:28,240
but

577
00:38:28,240 --> 00:38:31,250
you do you to appoint a customer random
blood that memory

578
00:38:31,250 --> 00:38:35,980
to be a context attributes and then
suddenly you've got your head back so

579
00:38:35,980 --> 00:38:37,460
now I know whether responded

580
00:38:37,460 --> 00:38:40,640
so what did I do wrong well

581
00:38:40,640 --> 00:38:43,830
I think I did everything wrong at least
once

582
00:38:43,830 --> 00:38:49,090
so I've got an extensive list love how
not to do I'll PC programming

583
00:38:49,090 --> 00:38:53,690
um my biggest chip is to get your NT
status a risk because

584
00:38:53,690 --> 00:38:58,630
I don't know why and it's kinda cool but
they've been really granular

585
00:38:58,630 --> 00:39:02,330
in the areas so your return code from
the

586
00:39:02,330 --> 00:39:06,700
Cisco the will probably tell you exactly
what you're doing row

587
00:39:06,700 --> 00:39:11,410
always 0 out buffers like the cold
really strict

588
00:39:11,410 --> 00:39:15,029
about what it will accept because it
thinks you're lying right so if you're

589
00:39:15,030 --> 00:39:18,960
if you got it all but for the way

590
00:39:18,960 --> 00:39:23,320
the call back I anything is wrong the
cuddle just so you know I'm not gonna

591
00:39:23,320 --> 00:39:24,150
send that to you

592
00:39:24,150 --> 00:39:28,050
just lying so it's better to start with
a clean message

593
00:39:28,050 --> 00:39:32,830
a in general discussion or any kind of
programming if you see like the

594
00:39:32,830 --> 00:39:36,400
struggling field you're probably better
off like sitting at

595
00:39:36,400 --> 00:39:39,790
probably and make sure using flags that

596
00:39:39,790 --> 00:39:44,680
make sense so group

597
00:39:44,680 --> 00:39:48,810
are these is rich kid nor

598
00:39:48,810 --> 00:39:54,190
so my code already online cuz I put it
up before I gave my presentation

599
00:39:54,190 --> 00:39:58,120
the some was actually really soccer

600
00:39:58,120 --> 00:40:02,310
um so you can get all of the for win32
that I've made

601
00:40:02,310 --> 00:40:06,299
to work with go that's already there and
you can get

602
00:40:06,300 --> 00:40:09,350
a buncha stuff in this LPC go

603
00:40:09,350 --> 00:40:13,730
report let's go high-level go I PRI
which no one's ever gonna used some

604
00:40:13,730 --> 00:40:18,170
apparently the only person in the world
rights go but LPC bridge

605
00:40:18,170 --> 00:40:21,400
is adjacent up BC API

606
00:40:21,400 --> 00:40:24,420
said that so that means that whatever

607
00:40:24,420 --> 00:40:28,010
language you use and is probably gonna
be poppin because no one but me knows

608
00:40:28,010 --> 00:40:30,190
how to write code

609
00:40:30,190 --> 00:40:33,890
you can like are still connect fine
whatever

610
00:40:33,890 --> 00:40:38,690
at the apartment support um

611
00:40:38,690 --> 00:40:42,870
server am i release an actual positive
note screw you guys

612
00:40:42,870 --> 00:40:47,529
a.m. I've got a few things I need to do

613
00:40:47,530 --> 00:40:50,950
through the API a mmm it supports

614
00:40:50,950 --> 00:40:55,210
messages now already you can send
whatever you want

615
00:40:55,210 --> 00:40:58,350
I want to add better attribute support
so you can

616
00:40:58,350 --> 00:41:01,420
sands random male forms

617
00:41:01,420 --> 00:41:04,930
Patriots along with this this to the
chase not BC right

618
00:41:04,930 --> 00:41:09,240
so you can send read the email form that
routes along with your

619
00:41:09,240 --> 00:41:14,359
general fussing a lot PC is actually a
bit hotter

620
00:41:14,360 --> 00:41:18,790
like if you're saying the tools that
people are writing to trying to comply

621
00:41:18,790 --> 00:41:22,640
middle to get the RPC stubs it's a

622
00:41:22,640 --> 00:41:26,609
hot job and no one's yet done

623
00:41:26,610 --> 00:41:30,910
a acceptable job in my view

624
00:41:30,910 --> 00:41:34,149
over so for me

625
00:41:34,150 --> 00:41:38,590
I think it's gonna be hot but so I a PC
is a base layer are

626
00:41:38,590 --> 00:41:42,260
if you want to cause of BC probably than
you might want to be a PC aware

627
00:41:42,260 --> 00:41:46,400
I'm not yet it is possible to do

628
00:41:46,400 --> 00:41:50,570
a man in the middle causing proxy so
unique colonel access

629
00:41:50,570 --> 00:41:53,820
but you can actually swap out the poor
object

630
00:41:53,820 --> 00:41:57,020
at the kernel level and then you could
put it up

631
00:41:57,020 --> 00:42:01,910
up approx it'll take real connections
between real processes

632
00:42:01,910 --> 00:42:06,060
and fast though is like men and
Middlesbrough

633
00:42:06,060 --> 00:42:09,250
and that'll probably rain bucks

634
00:42:09,250 --> 00:42:12,710
but I'm not gonna release that

635
00:42:12,710 --> 00:42:16,650
from but you look at least one like pas

636
00:42:16,650 --> 00:42:20,280
LPC for some random process like VMware
on

637
00:42:20,280 --> 00:42:24,190
like you're being weird even on your
PM's running and I'll PC port the

638
00:42:24,190 --> 00:42:28,110
open as like dozens of system ports

639
00:42:28,110 --> 00:42:31,570
so easy like all you need to do is

640
00:42:31,570 --> 00:42:34,780
get a generator I would suggest rid am
sir

641
00:42:34,780 --> 00:42:39,610
and use Jason up BC you can use whatever
another language that

642
00:42:39,610 --> 00:42:42,640
you people use you can use curl

643
00:42:42,640 --> 00:42:45,970
and like have a fully functional fuzzy
going in

644
00:42:45,970 --> 00:42:49,459
I would say less than a day and you
should do it because

645
00:42:49,460 --> 00:42:52,520
nobody's looking at this stuff

646
00:42:52,520 --> 00:42:55,940
instrumentation but

647
00:42:55,940 --> 00:42:59,390
I use whatever I normally use to get use
land exceptions

648
00:42:59,390 --> 00:43:02,950
the you can use the at verify I'd
torrent

649
00:43:02,950 --> 00:43:06,569
I have a across something that bill on
the debugger

650
00:43:06,570 --> 00:43:10,350
a mmm what you gonna probably see those

651
00:43:10,350 --> 00:43:14,830
a lot more than usual exceptional
conditions so you

652
00:43:14,830 --> 00:43:18,310
gonna see like memory leaks in hand
lakes a

653
00:43:18,310 --> 00:43:23,570
right there is a pretty good thing for
does which is a Microsoft thing

654
00:43:23,570 --> 00:43:26,620
otherwise the love triggers in prop dump
that Nick

655
00:43:26,620 --> 00:43:30,759
you can you so you can say like it
persists X gets beyond

656
00:43:30,760 --> 00:43:34,010
this memory threshold or the CPU
threshold or this

657
00:43:34,010 --> 00:43:38,110
and account then give me a mean we don't
over

658
00:43:38,110 --> 00:43:43,060
the because I think that the real gold

659
00:43:43,060 --> 00:43:47,180
is probably gonna be INM

660
00:43:47,180 --> 00:43:51,089
we had memory bugs you gonna see
disclosures and leaks

661
00:43:51,090 --> 00:43:55,590
so that's how I would suggest inch
mention you might get a blue screen

662
00:43:55,590 --> 00:43:59,370
because anything that's like talking to
CSR CSR else s whatever

663
00:43:59,370 --> 00:44:03,120
you got a reasonable chance to like blue
screen the whole books

664
00:44:03,120 --> 00:44:07,549
I still don't have what I consider to be
a good way entrenching that

665
00:44:07,550 --> 00:44:11,470
I'm so what I do for my kind of us is is
literally just a short walk to blue

666
00:44:11,470 --> 00:44:12,000
screen

667
00:44:12,000 --> 00:44:15,210
to discover everything that runs inside
up says like

668
00:44:15,210 --> 00:44:19,160
is there a dump file if there is it send
it off to a queue and then that gets

669
00:44:19,160 --> 00:44:21,589
processed by a tree as I can

670
00:44:21,590 --> 00:44:25,390
um if anyone knows a better way of doing
it then

671
00:44:25,390 --> 00:44:29,129
please please please tell me because I'm
deeply interested

672
00:44:29,130 --> 00:44:33,670
a but at least that doesn't work

673
00:44:33,670 --> 00:44:39,840
and with one minute and 24 seconds
remaining

674
00:44:39,840 --> 00:44:43,580
um that is pretty much the wrap-up

675
00:44:43,580 --> 00:44:47,170
I reckon a.m. obviously Alex was

676
00:44:47,170 --> 00:44:51,850
hugely helpful like I had like

677
00:44:51,850 --> 00:44:57,089
arkin 6 DM's from him during this whole
project but each one site me

678
00:44:57,090 --> 00:45:01,120
a week of work from

679
00:45:01,120 --> 00:45:05,150
and

680
00:45:05,150 --> 00:45:12,150
I Barry says thanks ever loves barry
love you very

681
00:45:13,900 --> 00:45:18,839
and there we go if anyone can tell me
the the what what this particular slide

682
00:45:18,839 --> 00:45:19,450
is about

683
00:45:19,450 --> 00:45:25,140
then there's probably a prize it's a
quote from a friend of mine

684
00:45:25,140 --> 00:45:28,098
but yeah I'm good questions there

