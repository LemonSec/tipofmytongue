1
00:00:00,000 --> 00:00:02,000
I

2
00:00:48,950 --> 00:00:52,670
alright so my name is Billy Hoffman some

3
00:00:51,290 --> 00:00:54,560
of you guys might know me as a siddhis

4
00:00:52,670 --> 00:00:56,510
I've spoken<font color="#E5E5E5"> at a lot of conferences over</font>

5
00:00:54,560 --> 00:00:58,520
the past couple years on a wide range<font color="#E5E5E5"> of</font>

6
00:00:56,510 --> 00:01:00,980
<font color="#CCCCCC">topics today I'm here to talk to you</font>

7
00:00:58,520 --> 00:01:03,770
about covert Carly which is basically a

8
00:01:00,980 --> 00:01:05,449
mechanism of how to use a<font color="#E5E5E5"> automated</font>

9
00:01:03,770 --> 00:01:07,310
process to crawl a website and gather

10
00:01:05,449 --> 00:01:10,429
<font color="#E5E5E5">information without leaving a forensics</font>

11
00:01:07,310 --> 00:01:12,530
trail I tend to talk a<font color="#E5E5E5"> lot and really</font>

12
00:01:10,430 --> 00:01:14,540
fast so if you have a question please

13
00:01:12,530 --> 00:01:16,880
feel free<font color="#E5E5E5"> to interrupt me I have fun</font>

14
00:01:14,540 --> 00:01:19,070
schwag that I brought I've got some bag

15
00:01:16,880 --> 00:01:22,850
from when I spoke<font color="#CCCCCC"> at shmoocon and some</font>

16
00:01:19,070 --> 00:01:24,470
whoo that would have been<font color="#E5E5E5"> bad some stuff</font>

17
00:01:22,850 --> 00:01:25,850
from black that federal and stickers and

18
00:01:24,470 --> 00:01:27,679
stuff so if you have a good question you

19
00:01:25,850 --> 00:01:29,410
get schwag if you have a bad question

20
00:01:27,680 --> 00:01:31,729
we've riddle quote ridicule you on

21
00:01:29,410 --> 00:01:37,070
that's kind of how it<font color="#CCCCCC"> goes all right you</font>

22
00:01:31,729 --> 00:01:38,360
<font color="#CCCCCC">guys</font><font color="#E5E5E5"> ready alright cool so what am I</font>

23
00:01:37,070 --> 00:01:39,860
going<font color="#E5E5E5"> to talk about we're going to go</font>

24
00:01:38,360 --> 00:01:41,479
through<font color="#E5E5E5"> and first start talking about</font>

25
00:01:39,860 --> 00:01:43,310
<font color="#E5E5E5">what</font><font color="#CCCCCC"> is the state of web application</font>

26
00:01:41,479 --> 00:01:45,140
attacks we're<font color="#E5E5E5"> going to go ahead and talk</font>

27
00:01:43,310 --> 00:01:46,399
about what there's a covert crawler

28
00:01:45,140 --> 00:01:48,259
pretty much kind of changes the

29
00:01:46,399 --> 00:01:50,660
equations on how attack and defense of

30
00:01:48,259 --> 00:01:52,190
web apps works we're going<font color="#E5E5E5"> to talk about</font>

31
00:01:50,660 --> 00:01:53,840
the<font color="#CCCCCC"> obstacles it took to create the</font>

32
00:01:52,190 --> 00:01:55,190
covert crawler specifically how do you

33
00:01:53,840 --> 00:01:56,780
make an automated program act<font color="#E5E5E5"> like a</font>

34
00:01:55,190 --> 00:01:59,090
browser how do<font color="#E5E5E5"> you make an automated</font>

35
00:01:56,780 --> 00:02:01,280
program act like a human and how you

36
00:01:59,090 --> 00:02:02,600
throttle one of these things we're going

37
00:02:01,280 --> 00:02:04,819
<font color="#E5E5E5">to talk about how actually implemented a</font>

38
00:02:02,600 --> 00:02:06,440
covert crawler and if<font color="#E5E5E5"> those questions</font>

39
00:02:04,819 --> 00:02:09,250
but like<font color="#E5E5E5"> I said ask me questions the</font>

40
00:02:06,440 --> 00:02:11,660
entire time<font color="#E5E5E5"> okay so State of the Union</font>

41
00:02:09,250 --> 00:02:14,750
how many<font color="#E5E5E5"> people here have ever hacked a</font>

42
00:02:11,660 --> 00:02:16,310
web app how many has ever thrown like a

43
00:02:14,750 --> 00:02:17,510
single tick or something into a search

44
00:02:16,310 --> 00:02:18,680
field to see if you<font color="#E5E5E5"> get a sequel</font>

45
00:02:17,510 --> 00:02:21,290
exception there all sorts of fun stuff

46
00:02:18,680 --> 00:02:24,440
like that you know<font color="#E5E5E5"> hacking websites is</font>

47
00:02:21,290 --> 00:02:25,880
really easy<font color="#E5E5E5"> you know I'm sure a lot of</font>

48
00:02:24,440 --> 00:02:27,530
you read bug track like something like

49
00:02:25,880 --> 00:02:29,240
seventy percent of<font color="#E5E5E5"> the volens I've been</font>

50
00:02:27,530 --> 00:02:31,310
reading on bug tracker last several

51
00:02:29,240 --> 00:02:32,750
months have all been web app attacks

52
00:02:31,310 --> 00:02:36,590
sequel injection cross-site scripting

53
00:02:32,750 --> 00:02:39,020
this place trust you know improperly you

54
00:02:36,590 --> 00:02:41,690
know created SSL connections all sorts

55
00:02:39,020 --> 00:02:43,670
of nasty stuff they are laughably common

56
00:02:41,690 --> 00:02:45,980
to find<font color="#E5E5E5"> i found a cross-site scripting</font>

57
00:02:43,670 --> 00:02:47,149
vulnerability in weather com this

58
00:02:45,980 --> 00:02:50,149
morning when<font color="#E5E5E5"> I was trying to figure</font><font color="#CCCCCC"> out</font>

59
00:02:47,150 --> 00:02:52,280
<font color="#E5E5E5">what</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> wear so it it's crazy they're</font>

60
00:02:50,150 --> 00:02:54,140
all over the<font color="#CCCCCC"> place people are hacking</font>

61
00:02:52,280 --> 00:02:56,330
websites because it's in<font color="#E5E5E5"> the news there</font>

62
00:02:54,140 --> 00:02:58,159
<font color="#E5E5E5">was this awesome attack on myspace back</font>

63
00:02:56,330 --> 00:03:00,500
in October somebody actually wrote a

64
00:02:58,159 --> 00:03:04,390
cross-site scripting virus which use

65
00:03:00,500 --> 00:03:04,390
Java code and Ajax the<font color="#E5E5E5"> Prophet</font>

66
00:03:04,780 --> 00:03:10,940
there's someone here who was doing

67
00:03:06,590 --> 00:03:13,010
cross-site scripting stuff so this was

68
00:03:10,940 --> 00:03:15,099
an awesome virus<font color="#E5E5E5"> that used ajax actually</font>

69
00:03:13,010 --> 00:03:17,420
propagate itself and infect more

70
00:03:15,099 --> 00:03:19,040
cross-site or more of<font color="#E5E5E5"> my space actually</font>

71
00:03:17,420 --> 00:03:21,079
gave a presentation at black hat federal

72
00:03:19,040 --> 00:03:22,010
about web app worms and so if your

73
00:03:21,080 --> 00:03:24,260
answer than that come talk to me

74
00:03:22,010 --> 00:03:26,870
afterwards people<font color="#CCCCCC"> are hacking websites</font>

75
00:03:24,260 --> 00:03:29,209
because they can make<font color="#E5E5E5"> money attacking a</font>

76
00:03:26,870 --> 00:03:31,610
web app gives you the same payload and

77
00:03:29,209 --> 00:03:33,500
the same tank as you know doing say

78
00:03:31,610 --> 00:03:35,030
layer 3 or a layer for attack you're

79
00:03:33,500 --> 00:03:36,590
trying<font color="#E5E5E5"> to you know gain access to</font>

80
00:03:35,030 --> 00:03:38,690
systems you normally don't have access

81
00:03:36,590 --> 00:03:40,430
to to grab passwords credit card data

82
00:03:38,690 --> 00:03:41,930
confidential information you know

83
00:03:40,430 --> 00:03:43,310
identity<font color="#E5E5E5"> theft anything you want to do</font>

84
00:03:41,930 --> 00:03:44,750
you get access<font color="#E5E5E5"> to the information</font>

85
00:03:43,310 --> 00:03:46,629
through a web app just as easily as you

86
00:03:44,750 --> 00:03:50,200
<font color="#E5E5E5">can get</font><font color="#CCCCCC"> access through you know a</font>

87
00:03:46,629 --> 00:03:52,099
<font color="#E5E5E5">anonymous account on ftp so</font>

88
00:03:50,200 --> 00:03:54,048
administrators are patching some of the

89
00:03:52,099 --> 00:03:55,879
holes pretty much the PHP<font color="#E5E5E5"> whatever the</font>

90
00:03:54,049 --> 00:03:58,910
<font color="#E5E5E5">hell exploit of the week because</font>

91
00:03:55,879 --> 00:04:00,768
seriously I<font color="#E5E5E5"> I love open source i use</font>

92
00:03:58,910 --> 00:04:02,540
open source but god bless<font color="#CCCCCC"> sourceforge</font>

93
00:04:00,769 --> 00:04:04,430
and all these PHP projects because they

94
00:04:02,540 --> 00:04:07,880
completely keep my company in business

95
00:04:04,430 --> 00:04:08,959
so<font color="#E5E5E5"> you know but that's why I come and I</font>

96
00:04:07,880 --> 00:04:12,470
talk<font color="#E5E5E5"> to you guys about how to actually</font>

97
00:04:08,959 --> 00:04:14,780
<font color="#E5E5E5">write secured web applications so it's a</font>

98
00:04:12,470 --> 00:04:16,339
given to take a lot<font color="#CCCCCC"> of times people rely</font>

99
00:04:14,780 --> 00:04:18,500
on their logs if and<font color="#E5E5E5"> when they get</font>

100
00:04:16,339 --> 00:04:19,969
attacked they're like oh crap somebody

101
00:04:18,500 --> 00:04:22,010
you know totally just dumped<font color="#E5E5E5"> my entire</font>

102
00:04:19,970 --> 00:04:24,070
sequel database out let me<font color="#CCCCCC"> go to my logs</font>

103
00:04:22,010 --> 00:04:27,469
and see who was connecting to me a lot

104
00:04:24,070 --> 00:04:29,000
normally they contact the IP owner which

105
00:04:27,470 --> 00:04:30,110
is almost always an open proxy that

106
00:04:29,000 --> 00:04:32,330
shouldn't have been open in the first

107
00:04:30,110 --> 00:04:35,000
place<font color="#E5E5E5"> and</font><font color="#CCCCCC"> then the two people go after</font>

108
00:04:32,330 --> 00:04:36,889
the attacker with limited success so

109
00:04:35,000 --> 00:04:39,830
whether you're actually sneaking a web

110
00:04:36,889 --> 00:04:41,539
app attack by an IDs or an IPS is

111
00:04:39,830 --> 00:04:43,219
debatable there's some<font color="#E5E5E5"> pretty cool tax</font>

112
00:04:41,539 --> 00:04:45,919
dan kaminsky actually had a really neat

113
00:04:43,220 --> 00:04:48,860
timing attack with IP fragments so that

114
00:04:45,919 --> 00:04:51,560
an<font color="#CCCCCC"> IDs would see a regular you know HTTP</font>

115
00:04:48,860 --> 00:04:53,599
GET you know<font color="#CCCCCC"> index.html and the web</font>

116
00:04:51,560 --> 00:04:55,760
server saw you know get sequel injection

117
00:04:53,599 --> 00:04:58,370
attack so you know they're there are

118
00:04:55,760 --> 00:05:00,530
ways around IDS's but the point I want

119
00:04:58,370 --> 00:05:02,449
<font color="#E5E5E5">to try to attack here is that attacks</font>

120
00:05:00,530 --> 00:05:04,309
just<font color="#E5E5E5"> don't happen out of thin air people</font>

121
00:05:02,449 --> 00:05:06,050
recon sites ahead of time they try to

122
00:05:04,310 --> 00:05:07,699
say<font color="#E5E5E5"> hmm I want to attack this</font><font color="#CCCCCC"> Bank let</font>

123
00:05:06,050 --> 00:05:09,139
me start analyzing and let me start

124
00:05:07,699 --> 00:05:11,180
pounding on this<font color="#CCCCCC"> Bank a little bit do</font>

125
00:05:09,139 --> 00:05:12,950
some reconnaissance and see if I want<font color="#E5E5E5"> to</font>

126
00:05:11,180 --> 00:05:14,750
<font color="#E5E5E5">actually attack them and a lot</font><font color="#CCCCCC"> of times</font>

127
00:05:12,950 --> 00:05:15,920
forensic people will tell<font color="#E5E5E5"> you it's this</font>

128
00:05:14,750 --> 00:05:17,240
reconnaissance<font color="#CCCCCC"> there</font>

129
00:05:15,920 --> 00:05:18,590
to see in the logs and that's how

130
00:05:17,240 --> 00:05:20,330
they're able to<font color="#CCCCCC"> attract</font><font color="#E5E5E5"> people because</font>

131
00:05:18,590 --> 00:05:22,250
people will almost always launch attacks

132
00:05:20,330 --> 00:05:24,890
through proxies compromised machines

133
00:05:22,250 --> 00:05:27,020
botnets you know open access points but

134
00:05:24,890 --> 00:05:28,310
almost always they do their

135
00:05:27,020 --> 00:05:31,070
reconnaissance from their home machine

136
00:05:28,310 --> 00:05:32,660
and so administrators rely on these

137
00:05:31,070 --> 00:05:34,070
server logs to try to find this initial

138
00:05:32,660 --> 00:05:36,950
probing sometimes they<font color="#CCCCCC"> can actually</font><font color="#E5E5E5"> see</font>

139
00:05:34,070 --> 00:05:39,170
<font color="#CCCCCC">Wow you know I normally get each visitor</font>

140
00:05:36,950 --> 00:05:40,969
my website it's like 10 or 15 pages this

141
00:05:39,170 --> 00:05:42,830
one visitor which isn't a bot from a

142
00:05:40,970 --> 00:05:44,570
search engine hit all apply pages I

143
00:05:42,830 --> 00:05:46,280
wonder if they're going<font color="#E5E5E5"> to if they're</font>

144
00:05:44,570 --> 00:05:48,860
you know<font color="#E5E5E5"> trying</font><font color="#CCCCCC"> to scope me out and so</font>

145
00:05:46,280 --> 00:05:50,719
they'll proactively put a rule in<font color="#E5E5E5"> their</font>

146
00:05:48,860 --> 00:05:53,990
IDs or their IP tables and say<font color="#E5E5E5"> don't let</font>

147
00:05:50,720 --> 00:05:55,550
this person come back so why<font color="#E5E5E5"> would</font>

148
00:05:53,990 --> 00:05:57,980
someone even perform reconnaissance well

149
00:05:55,550 --> 00:05:59,960
running a straight audit of a web app if

150
00:05:57,980 --> 00:06:02,360
you're<font color="#E5E5E5"> not allowed to really isn't</font>

151
00:05:59,960 --> 00:06:03,919
practical takes a very long time our

152
00:06:02,360 --> 00:06:06,200
product I work for a company called<font color="#E5E5E5"> spy</font>

153
00:06:03,920 --> 00:06:08,060
dynamics and we make products that scan

154
00:06:06,200 --> 00:06:09,860
websites for vulnerabilities take

155
00:06:08,060 --> 00:06:12,380
something like four days to run all of

156
00:06:09,860 --> 00:06:15,920
CNN com which is excess of eight hundred

157
00:06:12,380 --> 00:06:17,180
thousand pages it's way<font color="#E5E5E5"> too much</font><font color="#CCCCCC"> network</font>

158
00:06:15,920 --> 00:06:19,640
noise do you<font color="#E5E5E5"> know what our bandwidth</font>

159
00:06:17,180 --> 00:06:23,450
<font color="#E5E5E5">bill is when you scan CNN it's pretty</font>

160
00:06:19,640 --> 00:06:25,880
big reconnaissance definitely provides

161
00:06:23,450 --> 00:06:28,310
information about what you can<font color="#CCCCCC"> you know</font>

162
00:06:25,880 --> 00:06:29,900
use for<font color="#E5E5E5"> your attack version numbers</font>

163
00:06:28,310 --> 00:06:31,790
about what technologies are using you

164
00:06:29,900 --> 00:06:33,770
<font color="#E5E5E5">know I love looking at HTML comments and</font>

165
00:06:31,790 --> 00:06:36,980
seeing I'm using you know this version

166
00:06:33,770 --> 00:06:38,780
of vb bold or you know PHP BB or

167
00:06:36,980 --> 00:06:40,550
whatever it lets you know about<font color="#E5E5E5"> the</font>

168
00:06:38,780 --> 00:06:42,140
structure layout of the site you<font color="#CCCCCC"> know an</font>

169
00:06:40,550 --> 00:06:44,690
HTML comments you can find developer

170
00:06:42,140 --> 00:06:46,610
names email addresses you know you can

171
00:06:44,690 --> 00:06:48,110
do your traditional reconnaissance stuff

172
00:06:46,610 --> 00:06:49,610
you know go hit google groups and see

173
00:06:48,110 --> 00:06:52,520
what you know if they're making post to

174
00:06:49,610 --> 00:06:54,500
<font color="#E5E5E5">use net also it provides a subset of</font>

175
00:06:52,520 --> 00:06:56,180
pages you actually attack you know let's

176
00:06:54,500 --> 00:06:57,980
say CNN that's a good<font color="#CCCCCC"> example eight</font>

177
00:06:56,180 --> 00:06:59,540
<font color="#E5E5E5">hundred thousand pages right well CNN</font>

178
00:06:57,980 --> 00:07:01,160
only has a couple of interesting pages

179
00:06:59,540 --> 00:07:03,410
they have a search page they have a page

180
00:07:01,160 --> 00:07:06,320
for email alerts which by the way is

181
00:07:03,410 --> 00:07:08,660
cross-site scripting they have<font color="#E5E5E5"> I totally</font>

182
00:07:06,320 --> 00:07:10,550
<font color="#CCCCCC">send my mom like news stories like on</font>

183
00:07:08,660 --> 00:07:11,780
her birthday says<font color="#E5E5E5"> Billy is says his mom</font>

184
00:07:10,550 --> 00:07:13,460
is greatest in the world and<font color="#CCCCCC"> it's</font>

185
00:07:11,780 --> 00:07:15,140
<font color="#E5E5E5">written by like Bob Woodward because you</font>

186
00:07:13,460 --> 00:07:17,650
just you<font color="#E5E5E5"> know you sequel injection and</font>

187
00:07:15,140 --> 00:07:19,700
<font color="#E5E5E5">it's shirt and cert</font><font color="#CCCCCC"> a story in</font><font color="#E5E5E5"> there</font>

188
00:07:17,650 --> 00:07:21,349
it's fun you guys should do it it's kind

189
00:07:19,700 --> 00:07:23,240
of like sending a look sending an email

190
00:07:21,350 --> 00:07:24,920
well the reason I<font color="#CCCCCC"> say you should do it</font>

191
00:07:23,240 --> 00:07:26,330
is that<font color="#E5E5E5"> you're not actually injecting</font>

192
00:07:24,920 --> 00:07:27,530
into their<font color="#E5E5E5"> back-end database it's what's</font>

193
00:07:26,330 --> 00:07:29,750
called a reflection cross-site scripting

194
00:07:27,530 --> 00:07:31,429
attack so you're actually not exploiting

195
00:07:29,750 --> 00:07:33,020
you're technically breaking any hacking

196
00:07:31,430 --> 00:07:35,090
laws it's kind<font color="#E5E5E5"> of like sending an email</font>

197
00:07:33,020 --> 00:07:36,770
to yourself from God by finding you know

198
00:07:35,090 --> 00:07:39,590
who has it<font color="#E5E5E5"> tell them it it's a you know</font>

199
00:07:36,770 --> 00:07:41,960
port 25 and<font color="#E5E5E5"> send emails to people it's</font>

200
00:07:39,590 --> 00:07:44,150
like<font color="#CCCCCC"> that it's fun stuff so again like I</font>

201
00:07:41,960 --> 00:07:45,919
said it lets you know what you want to

202
00:07:44,150 --> 00:07:47,599
attack oh they got search engine oh they

203
00:07:45,920 --> 00:07:49,100
got an email alert system let's focus on

204
00:07:47,600 --> 00:07:50,240
those instead of hitting all their news

205
00:07:49,100 --> 00:07:54,230
stories because those tend to be the

206
00:07:50,240 --> 00:07:55,820
same so<font color="#E5E5E5"> you can browse</font><font color="#CCCCCC"> the site by hand</font>

207
00:07:54,230 --> 00:07:57,740
in a web browser that's<font color="#CCCCCC"> certainly a type</font>

208
00:07:55,820 --> 00:07:59,090
of reconnaissance it lets the user kind

209
00:07:57,740 --> 00:08:01,760
of direct where they want their search

210
00:07:59,090 --> 00:08:03,200
to go you<font color="#E5E5E5"> know when i'm</font><font color="#CCCCCC"> looking at site</font>

211
00:08:01,760 --> 00:08:05,450
I immediately go to search engines

212
00:08:03,200 --> 00:08:06,890
things like that to take user input you

213
00:08:05,450 --> 00:08:08,990
know you can mess with the query string

214
00:08:06,890 --> 00:08:10,460
but you know it lets you kind of<font color="#E5E5E5"> target</font>

215
00:08:08,990 --> 00:08:13,280
it as opposed to a crawler which is

216
00:08:10,460 --> 00:08:14,870
stupid<font color="#CCCCCC"> and hits everything the problem</font>

217
00:08:13,280 --> 00:08:17,179
is it takes the time that the user could

218
00:08:14,870 --> 00:08:20,270
be using<font color="#E5E5E5"> to do other things you know</font>

219
00:08:17,180 --> 00:08:21,919
<font color="#CCCCCC">like read / 10 times a second and it's</font>

220
00:08:20,270 --> 00:08:23,570
certainly<font color="#E5E5E5"> not</font><font color="#CCCCCC"> an exhaustive search</font><font color="#E5E5E5"> of</font>

221
00:08:21,919 --> 00:08:24,950
the entire site it's<font color="#E5E5E5"> very possible that</font>

222
00:08:23,570 --> 00:08:27,980
while I'm only focusing say on the

223
00:08:24,950 --> 00:08:30,320
search engine aspect of CNN or the alert

224
00:08:27,980 --> 00:08:32,750
of the stock ticker I'm not focusing on

225
00:08:30,320 --> 00:08:34,700
this you know survey which happens to be

226
00:08:32,750 --> 00:08:36,110
embedded inside like every<font color="#CCCCCC"> 10 news</font>

227
00:08:34,700 --> 00:08:37,849
stories or something like that maybe

228
00:08:36,110 --> 00:08:39,159
that's<font color="#E5E5E5"> vulnerable but</font><font color="#CCCCCC"> I didn't even</font><font color="#E5E5E5"> look</font>

229
00:08:37,849 --> 00:08:41,089
there because I wasn't exhaustive

230
00:08:39,159 --> 00:08:42,950
automated crawler is the complete other

231
00:08:41,089 --> 00:08:45,650
end of the spectrum you know<font color="#CCCCCC"> W again I</font>

232
00:08:42,950 --> 00:08:47,780
wrote some perl script<font color="#E5E5E5"> I hit every</font>

233
00:08:45,650 --> 00:08:49,130
<font color="#E5E5E5">single page however and so I</font>

234
00:08:47,780 --> 00:08:50,870
exhaustively find all your

235
00:08:49,130 --> 00:08:53,930
vulnerabilities which is what our

236
00:08:50,870 --> 00:08:54,890
products by dynamics does but of course

237
00:08:53,930 --> 00:08:56,300
<font color="#CCCCCC">I didn't come here to sell you something</font>

238
00:08:54,890 --> 00:08:59,390
I came here to<font color="#E5E5E5"> talk about web security</font>

239
00:08:56,300 --> 00:09:01,099
so very obvious in your server logs if a

240
00:08:59,390 --> 00:09:03,290
crawler hits you for both<font color="#E5E5E5"> from what I p</font>

241
00:09:01,100 --> 00:09:04,910
you can also see exactly what they hit

242
00:09:03,290 --> 00:09:06,650
so you can be like<font color="#CCCCCC"> oh thank god</font><font color="#E5E5E5"> they're</font>

243
00:09:04,910 --> 00:09:08,300
<font color="#E5E5E5">you know they aborted their their</font>

244
00:09:06,650 --> 00:09:09,860
crawler right<font color="#E5E5E5"> before they got to my</font>

245
00:09:08,300 --> 00:09:11,209
<font color="#CCCCCC">super-secret vulnerable a sequel</font>

246
00:09:09,860 --> 00:09:14,900
injection and<font color="#CCCCCC"> dumped my customer</font>

247
00:09:11,210 --> 00:09:16,430
database page thank<font color="#E5E5E5"> God so covert</font>

248
00:09:14,900 --> 00:09:18,079
Crawley is the best of both worlds and

249
00:09:16,430 --> 00:09:19,130
of course beetle you already know this<font color="#E5E5E5"> I</font>

250
00:09:18,080 --> 00:09:20,600
gave this presentation at your

251
00:09:19,130 --> 00:09:21,680
conference of course you were running

252
00:09:20,600 --> 00:09:29,480
<font color="#CCCCCC">around like a chicken with your head cut</font>

253
00:09:21,680 --> 00:09:30,620
off so thank you<font color="#CCCCCC"> alright so covert</font>

254
00:09:29,480 --> 00:09:32,930
crawler really is the best of both

255
00:09:30,620 --> 00:09:36,589
worlds it's all the prawns all the pros

256
00:09:32,930 --> 00:09:40,380
of automated crawling all the prawns

257
00:09:36,589 --> 00:09:42,269
get some shrimps and prawns some crabs

258
00:09:40,380 --> 00:09:46,200
if you go about three streets that way

259
00:09:42,269 --> 00:09:48,120
and need someone<font color="#E5E5E5"> in savory so exhaustive</font>

260
00:09:46,200 --> 00:09:50,550
search it's automatic saves the

261
00:09:48,120 --> 00:09:52,889
resources for later analysis awesome it

262
00:09:50,550 --> 00:09:54,449
also uses various tricks to make the

263
00:09:52,889 --> 00:09:55,860
crawl appear as if actually hundreds of

264
00:09:54,449 --> 00:09:58,079
different users we're crawling your site

265
00:09:55,860 --> 00:10:01,380
from<font color="#E5E5E5"> different IPS they only browse</font>

266
00:09:58,079 --> 00:10:03,359
certain target parts of your<font color="#CCCCCC"> website you</font>

267
00:10:01,380 --> 00:10:05,760
know so it doesn't have a giant

268
00:10:03,360 --> 00:10:08,970
bandwidth spike so to speak when they go

269
00:10:05,760 --> 00:10:10,470
visit<font color="#E5E5E5"> their aw stats page now this is</font>

270
00:10:08,970 --> 00:10:12,600
not actually used<font color="#CCCCCC"> for attacking the site</font>

271
00:10:10,470 --> 00:10:15,029
as I said<font color="#CCCCCC"> you know whether you want</font><font color="#E5E5E5"> to</font>

272
00:10:12,600 --> 00:10:17,339
try<font color="#E5E5E5"> to employ the lib whisker I don't</font>

273
00:10:15,029 --> 00:10:18,899
feel all heard<font color="#E5E5E5"> of it it's rather old but</font>

274
00:10:17,339 --> 00:10:22,320
it's kind of traditional mechanisms to

275
00:10:18,899 --> 00:10:24,329
avoid<font color="#CCCCCC"> IDs and IPS things when you're</font>

276
00:10:22,320 --> 00:10:25,740
attacking web apps I don't even want to

277
00:10:24,329 --> 00:10:28,410
<font color="#E5E5E5">try to cover that let's</font><font color="#CCCCCC"> just focus on</font>

278
00:10:25,740 --> 00:10:29,970
finding things because<font color="#E5E5E5"> if I</font><font color="#CCCCCC"> can crawl</font>

279
00:10:28,410 --> 00:10:31,319
your entire website without you knowing

280
00:10:29,970 --> 00:10:32,940
and find a couple<font color="#E5E5E5"> of</font><font color="#CCCCCC"> things that</font><font color="#E5E5E5"> look</font>

281
00:10:31,320 --> 00:10:35,010
interesting I can go through<font color="#E5E5E5"> an open</font>

282
00:10:32,940 --> 00:10:36,810
proxy I can go to an open<font color="#CCCCCC"> access point</font>

283
00:10:35,010 --> 00:10:38,490
and<font color="#E5E5E5"> I can spend two minutes hitting</font>

284
00:10:36,810 --> 00:10:39,779
those two pages in hacking you as

285
00:10:38,490 --> 00:10:43,920
opposed to<font color="#E5E5E5"> spending several hours</font>

286
00:10:39,779 --> 00:10:45,870
crawling an entire site so the beautiful

287
00:10:43,920 --> 00:10:48,649
thing about this is<font color="#E5E5E5"> that you know you</font>

288
00:10:45,870 --> 00:10:51,060
you have you can later use<font color="#E5E5E5"> IDs</font>

289
00:10:48,649 --> 00:10:52,140
techniques like<font color="#E5E5E5"> I said and also the logs</font>

290
00:10:51,060 --> 00:10:54,000
are unable to<font color="#CCCCCC"> show the reconnaissance</font>

291
00:10:52,140 --> 00:10:55,709
happened because there isn't a single IP

292
00:10:54,000 --> 00:10:57,779
address that everything came from now

293
00:10:55,709 --> 00:10:59,640
you're our don't open proxies it's no

294
00:10:57,779 --> 00:11:01,290
big deal it's a lot more complicated to

295
00:10:59,640 --> 00:11:03,630
write a covert crawler than just simply

296
00:11:01,290 --> 00:11:05,130
spanning it across multiple ip's so

297
00:11:03,630 --> 00:11:06,300
something I get a lot when I talk<font color="#CCCCCC"> about</font>

298
00:11:05,130 --> 00:11:07,949
this is why don't you use a search

299
00:11:06,300 --> 00:11:10,199
engine cash I mean if you want<font color="#E5E5E5"> to find</font>

300
00:11:07,949 --> 00:11:11,880
out about<font color="#E5E5E5"> someone's page just use the</font>

301
00:11:10,199 --> 00:11:14,310
google<font color="#E5E5E5"> cash this is a really bad</font><font color="#CCCCCC"> idea</font>

302
00:11:11,880 --> 00:11:17,279
because the HTML comes from the google

303
00:11:14,310 --> 00:11:19,410
<font color="#E5E5E5">cash but the HTML has references to</font>

304
00:11:17,279 --> 00:11:22,709
images objects scripts all of those

305
00:11:19,410 --> 00:11:24,089
<font color="#E5E5E5">other things on the original site so if</font>

306
00:11:22,709 --> 00:11:26,459
I'm the administrator of you know good

307
00:11:24,089 --> 00:11:28,319
<font color="#E5E5E5">calm I suddenly see all these requests</font>

308
00:11:26,459 --> 00:11:30,300
for images and scripts and all sorts of

309
00:11:28,319 --> 00:11:32,399
<font color="#CCCCCC">things but I look through my log and I</font>

310
00:11:30,300 --> 00:11:34,490
never see a corresponding get for the

311
00:11:32,399 --> 00:11:36,660
HTML that link<font color="#CCCCCC"> to all of those things</font>

312
00:11:34,490 --> 00:11:39,000
start going wait a minute why did

313
00:11:36,660 --> 00:11:40,889
<font color="#E5E5E5">someone have this this is actually a way</font>

314
00:11:39,000 --> 00:11:42,480
that banks will try to detect fishing

315
00:11:40,889 --> 00:11:44,490
you'll see that someone's grabbing their

316
00:11:42,480 --> 00:11:46,350
HTML but being lazy and not actually

317
00:11:44,490 --> 00:11:48,990
copying all the resources of the site as

318
00:11:46,350 --> 00:11:50,040
well Google respects the robots

319
00:11:48,990 --> 00:11:51,449
exclusion standard

320
00:11:50,040 --> 00:11:54,240
and let's<font color="#E5E5E5"> be frank if you're hacking a</font>

321
00:11:51,449 --> 00:11:55,529
web app that just is no good because you

322
00:11:54,240 --> 00:11:56,910
know it's<font color="#E5E5E5"> always fun whenever I'm</font>

323
00:11:55,529 --> 00:11:59,250
attacking a site immediately go to

324
00:11:56,910 --> 00:12:01,339
robots.txt because it's<font color="#E5E5E5"> basically a road</font>

325
00:11:59,250 --> 00:12:04,649
map to where you're not supposed to go

326
00:12:01,339 --> 00:12:07,800
so our crawler certainly can't respect

327
00:12:04,649 --> 00:12:10,740
that Google doesn't catch everything if

328
00:12:07,800 --> 00:12:13,380
I have you know a script tag and it just

329
00:12:10,740 --> 00:12:14,940
references an external say j/s file with

330
00:12:13,380 --> 00:12:17,519
javascript in it which is what my space

331
00:12:14,940 --> 00:12:18,930
does Google doesn't cash<font color="#CCCCCC"> jas files so i</font>

332
00:12:17,519 --> 00:12:20,880
won't<font color="#E5E5E5"> be</font><font color="#CCCCCC"> able to see the entire site</font>

333
00:12:18,930 --> 00:12:23,008
things can be removed from the google

334
00:12:20,880 --> 00:12:25,259
cache at people's request you're limited

335
00:12:23,009 --> 00:12:26,670
to two thousand queries a day google

336
00:12:25,259 --> 00:12:28,290
also doesn't serve beyond the top of

337
00:12:26,670 --> 00:12:29,969
thousand results for any site so if you

338
00:12:28,290 --> 00:12:32,689
search for you know kitty cats you can

339
00:12:29,970 --> 00:12:35,639
<font color="#E5E5E5">never see result 1001 for the kitty cats</font>

340
00:12:32,690 --> 00:12:37,079
and also<font color="#E5E5E5"> you're limited by</font><font color="#CCCCCC"> Google allow</font>

341
00:12:35,639 --> 00:12:38,490
you use the cash in<font color="#E5E5E5"> the future I mean</font>

342
00:12:37,079 --> 00:12:40,410
and then important<font color="#CCCCCC"> I'm dugu could clamp</font>

343
00:12:38,490 --> 00:12:42,389
it and make it very difficult for you to

344
00:12:40,410 --> 00:12:44,250
actually access the Google cash you know

345
00:12:42,389 --> 00:12:45,329
it's<font color="#CCCCCC"> just what's crawling the site</font>

346
00:12:44,250 --> 00:12:46,949
yourself<font color="#CCCCCC"> is really the only way to</font>

347
00:12:45,329 --> 00:12:48,810
guarantee you one download everything

348
00:12:46,949 --> 00:12:51,810
and to that you'll be<font color="#CCCCCC"> able to</font><font color="#E5E5E5"> do that in</font>

349
00:12:48,810 --> 00:12:54,180
the future so why<font color="#E5E5E5"> would you want to run</font>

350
00:12:51,810 --> 00:12:55,800
a covert crawler<font color="#E5E5E5"> well a malicious user</font>

351
00:12:54,180 --> 00:12:57,630
who's performing<font color="#CCCCCC"> reconnaissance and</font>

352
00:12:55,800 --> 00:12:59,670
wants to<font color="#E5E5E5"> reduce the forensic trail a</font>

353
00:12:57,630 --> 00:13:00,839
company who's monitoring the progress of

354
00:12:59,670 --> 00:13:03,389
another company without leaving a trace

355
00:13:00,839 --> 00:13:05,100
you know say<font color="#E5E5E5"> I talked about</font><font color="#CCCCCC"> the IBM</font>

356
00:13:03,389 --> 00:13:07,470
patent database here you know for years

357
00:13:05,100 --> 00:13:09,089
IBM ran the patent database but<font color="#CCCCCC"> what</font>

358
00:13:07,470 --> 00:13:10,230
<font color="#E5E5E5">people didn't seem sees IBM was running</font>

359
00:13:09,089 --> 00:13:12,120
the patent database because they could

360
00:13:10,230 --> 00:13:13,860
do a reverse lookup on the IPS and go

361
00:13:12,120 --> 00:13:15,690
wow<font color="#CCCCCC"> Seagate's really interested in</font><font color="#E5E5E5"> these</font>

362
00:13:13,860 --> 00:13:17,100
patents and it's also interested in

363
00:13:15,690 --> 00:13:20,519
<font color="#E5E5E5">these patents and they were trying to</font>

364
00:13:17,100 --> 00:13:23,819
deduce what people were working<font color="#E5E5E5"> on it's</font>

365
00:13:20,519 --> 00:13:25,589
true so if I'm seagate<font color="#CCCCCC"> and I want</font><font color="#E5E5E5"> to</font>

366
00:13:23,819 --> 00:13:27,269
monitor you know the comings<font color="#E5E5E5"> and goings</font>

367
00:13:25,589 --> 00:13:28,740
of these you know researchers that<font color="#E5E5E5"> work</font>

368
00:13:27,269 --> 00:13:30,750
at IBM i can keep crawling their

369
00:13:28,740 --> 00:13:32,100
personal pages on a repetitive manner

370
00:13:30,750 --> 00:13:33,930
looking to see what conferences are

371
00:13:32,100 --> 00:13:35,459
going to just basically<font color="#E5E5E5"> i want to</font>

372
00:13:33,930 --> 00:13:37,649
repetitively hit certain information

373
00:13:35,459 --> 00:13:40,229
without you knowing<font color="#CCCCCC"> i'm</font><font color="#E5E5E5"> interested in it</font>

374
00:13:37,649 --> 00:13:43,319
a lawyer monitoring a website looking

375
00:13:40,230 --> 00:13:45,149
for statements that are you know<font color="#CCCCCC"> nasty</font>

376
00:13:43,319 --> 00:13:46,349
on behalf of one of their clients you

377
00:13:45,149 --> 00:13:47,880
know miscellaneous intelligence

378
00:13:46,350 --> 00:13:49,500
gathering or you just you<font color="#CCCCCC"> know you're</font>

379
00:13:47,880 --> 00:13:51,300
really really paranoid and think they're

380
00:13:49,500 --> 00:13:54,990
all out to get you so you covert crawl

381
00:13:51,300 --> 00:13:56,910
everything so<font color="#E5E5E5"> all right one of the</font>

382
00:13:54,990 --> 00:13:58,560
obstacles to overcome because honestly

383
00:13:56,910 --> 00:14:00,329
when<font color="#CCCCCC"> i thought about</font><font color="#E5E5E5"> covert crawling I</font>

384
00:13:58,560 --> 00:14:02,339
really was thinking about you know how

385
00:14:00,329 --> 00:14:02,819
can I make a program<font color="#E5E5E5"> that i'm writing</font>

386
00:14:02,339 --> 00:14:03,989
act

387
00:14:02,819 --> 00:14:06,149
<font color="#CCCCCC">or like a browser or more like a</font>

388
00:14:03,989 --> 00:14:07,649
<font color="#E5E5E5">computer and only kind of after the fact</font>

389
00:14:06,149 --> 00:14:08,999
when I actually had written<font color="#E5E5E5"> a covert</font>

390
00:14:07,649 --> 00:14:11,160
crawler did I start thinking<font color="#CCCCCC"> about</font><font color="#E5E5E5"> what</font>

391
00:14:08,999 --> 00:14:12,359
you<font color="#E5E5E5"> could do with a covert crawler it</font>

392
00:14:11,160 --> 00:14:15,539
was<font color="#E5E5E5"> really you</font><font color="#CCCCCC"> know kind of the tail</font>

393
00:14:12,359 --> 00:14:18,329
<font color="#E5E5E5">wagging the dog so the Cobra crawler</font>

394
00:14:15,539 --> 00:14:19,799
consists of a requester a bunch of

395
00:14:18,329 --> 00:14:21,569
requesters eat the thread that somehow

396
00:14:19,799 --> 00:14:22,739
control by master program so already you

397
00:14:21,569 --> 00:14:25,769
<font color="#CCCCCC">have some fun thread synchronization</font>

398
00:14:22,739 --> 00:14:27,749
issues you have to mimic a browser being

399
00:14:25,769 --> 00:14:29,100
controlled by a human which is not an

400
00:14:27,749 --> 00:14:31,289
<font color="#E5E5E5">easy task because crawlers don't act</font>

401
00:14:29,100 --> 00:14:33,329
like browsers and crawlers and humans

402
00:14:31,289 --> 00:14:35,069
make fundamental different choices about

403
00:14:33,329 --> 00:14:36,059
what links they crawl in the order and

404
00:14:35,069 --> 00:14:37,618
we're going<font color="#E5E5E5"> to talk about that</font><font color="#CCCCCC"> because</font>

405
00:14:36,059 --> 00:14:40,499
<font color="#CCCCCC">that was one of</font><font color="#E5E5E5"> the hardest things to</font>

406
00:14:37,619 --> 00:14:42,449
solve multiple IP addresses can be used

407
00:14:40,499 --> 00:14:43,829
<font color="#E5E5E5">to reduce the bandwidth footprint you</font>

408
00:14:42,449 --> 00:14:45,269
know we must control all these thread

409
00:14:43,829 --> 00:14:46,949
now here's the interesting thing we have

410
00:14:45,269 --> 00:14:49,109
to maintain session state you know if

411
00:14:46,949 --> 00:14:50,758
I've got<font color="#E5E5E5"> a crawler that seems to</font><font color="#CCCCCC"> be</font>

412
00:14:49,109 --> 00:14:53,639
coming from India and another one that's

413
00:14:50,759 --> 00:14:55,439
<font color="#E5E5E5">coming from New York and a website</font>

414
00:14:53,639 --> 00:14:56,729
issues a cookie to<font color="#E5E5E5"> the one in India and</font>

415
00:14:55,439 --> 00:14:59,459
then the one in New York sends that

416
00:14:56,729 --> 00:15:00,899
<font color="#E5E5E5">cookie back you can analyze your logs</font>

417
00:14:59,459 --> 00:15:02,608
and<font color="#E5E5E5"> see that</font><font color="#CCCCCC"> you're these multiple</font>

418
00:15:00,899 --> 00:15:05,189
threads are collaborating so you need<font color="#CCCCCC"> to</font>

419
00:15:02,609 --> 00:15:07,439
find very very strict ways to make<font color="#CCCCCC"> sure</font>

420
00:15:05,189 --> 00:15:08,849
that the person simply looking<font color="#E5E5E5"> at their</font>

421
00:15:07,439 --> 00:15:10,379
logs<font color="#E5E5E5"> cannot tell that all of these</font>

422
00:15:08,850 --> 00:15:12,539
people<font color="#E5E5E5"> are actually collaborating to</font>

423
00:15:10,379 --> 00:15:14,159
crawl your site and<font color="#E5E5E5"> also the crawler</font>

424
00:15:12,539 --> 00:15:16,979
must be throttled not to overwhelm the

425
00:15:14,159 --> 00:15:19,019
site so the<font color="#E5E5E5"> first obstacle is definitely</font>

426
00:15:16,979 --> 00:15:22,939
acting like a browser so first of all<font color="#E5E5E5"> is</font>

427
00:15:19,019 --> 00:15:27,720
anyone have any questions we're good

428
00:15:22,939 --> 00:15:29,368
captchas very good point there<font color="#E5E5E5"> are some</font>

429
00:15:27,720 --> 00:15:30,389
things<font color="#E5E5E5"> I actually get to when I'm</font>

430
00:15:29,369 --> 00:15:31,949
talking about crawling through leaks

431
00:15:30,389 --> 00:15:33,839
there are some things that you<font color="#CCCCCC"> know I</font>

432
00:15:31,949 --> 00:15:35,189
simply decided not to solve there are a

433
00:15:33,839 --> 00:15:37,979
lot of<font color="#CCCCCC"> people who have done a lot of</font>

434
00:15:35,189 --> 00:15:39,419
good<font color="#E5E5E5"> work on cracking CAPTCHAs it's also</font>

435
00:15:37,979 --> 00:15:40,949
when I get to how does the crawler

436
00:15:39,419 --> 00:15:43,439
behave like a human I mean people write

437
00:15:40,949 --> 00:15:44,998
doctorate thesis is on this and quite

438
00:15:43,439 --> 00:15:46,709
frankly they don't pay<font color="#CCCCCC"> me that much did</font>

439
00:15:44,999 --> 00:15:48,029
we give this up for them so there are

440
00:15:46,709 --> 00:15:50,998
some things I just<font color="#E5E5E5"> kind of gloss over</font>

441
00:15:48,029 --> 00:15:53,699
and didn't investigate fully captured

442
00:15:50,999 --> 00:15:56,590
<font color="#CCCCCC">well I'm not a</font><font color="#E5E5E5"> person to answer that</font>

443
00:15:53,699 --> 00:16:00,160
<font color="#CCCCCC">question well yes</font>

444
00:15:56,590 --> 00:16:01,510
a botnet could be a good approach but

445
00:16:00,160 --> 00:16:04,930
again you're still going<font color="#E5E5E5"> to be I mean</font>

446
00:16:01,510 --> 00:16:06,700
sometimes<font color="#CCCCCC"> it's not sometimes site</font>

447
00:16:04,930 --> 00:16:09,400
administrators don't necessarily care

448
00:16:06,700 --> 00:16:11,140
about the identity of who did it they

449
00:16:09,400 --> 00:16:13,390
simply<font color="#E5E5E5"> want to know it's coming and</font><font color="#CCCCCC"> if</font>

450
00:16:11,140 --> 00:16:15,460
I'm if I see a botnet<font color="#E5E5E5"> and I see all</font>

451
00:16:13,390 --> 00:16:17,470
<font color="#CCCCCC">these people massively blindly</font>

452
00:16:15,460 --> 00:16:19,030
requesting pages and they they're<font color="#CCCCCC"> all</font>

453
00:16:17,470 --> 00:16:20,140
seeming to collaborate and things like

454
00:16:19,030 --> 00:16:21,970
that they're all talking amongst each

455
00:16:20,140 --> 00:16:23,560
other simply<font color="#E5E5E5"> the very fact that I'm</font>

456
00:16:21,970 --> 00:16:27,610
getting scanned lets me know that<font color="#E5E5E5"> that</font>

457
00:16:23,560 --> 00:16:29,290
<font color="#CCCCCC">something is going</font><font color="#E5E5E5"> on well like I said</font>

458
00:16:27,610 --> 00:16:30,160
if<font color="#E5E5E5"> they're sharing session state I mean</font>

459
00:16:29,290 --> 00:16:31,780
there has to be some type<font color="#CCCCCC"> of</font>

460
00:16:30,160 --> 00:16:33,400
coordination otherwise they're all just

461
00:16:31,780 --> 00:16:35,319
<font color="#E5E5E5">D dossing you by requesting a bunch of</font>

462
00:16:33,400 --> 00:16:36,819
pages ultimately for a covert<font color="#CCCCCC"> caller to</font>

463
00:16:35,320 --> 00:16:38,350
be successful<font color="#E5E5E5"> all of these crawler</font>

464
00:16:36,820 --> 00:16:40,240
threads have to report the results back

465
00:16:38,350 --> 00:16:43,540
to a central location you parse this

466
00:16:40,240 --> 00:16:45,160
information you pull stuff out so trust

467
00:16:43,540 --> 00:16:46,510
me what if we get<font color="#CCCCCC"> a</font><font color="#E5E5E5"> little further in I</font>

468
00:16:45,160 --> 00:16:50,290
think<font color="#CCCCCC"> this will probably be</font><font color="#E5E5E5"> a little</font>

469
00:16:46,510 --> 00:16:51,730
clearer so the behavior of a crawler

470
00:16:50,290 --> 00:16:53,800
versus a browser is pretty distinct

471
00:16:51,730 --> 00:16:56,650
crawlers never visually render anything

472
00:16:53,800 --> 00:16:58,780
so HTTP headers describing the browser's

473
00:16:56,650 --> 00:17:00,610
abilities are minimal specifically what

474
00:16:58,780 --> 00:17:04,329
I'm talking about is right here this<font color="#CCCCCC"> is</font>

475
00:17:00,610 --> 00:17:07,420
a request made by ie6 and it tells you

476
00:17:04,329 --> 00:17:09,490
what languages it supports it tells you

477
00:17:07,420 --> 00:17:11,140
actually<font color="#E5E5E5"> the one for Firefox is much</font>

478
00:17:09,490 --> 00:17:13,030
richer it'll tell you you know hey if

479
00:17:11,140 --> 00:17:14,860
<font color="#CCCCCC">you can't get this character set degrade</font>

480
00:17:13,030 --> 00:17:16,270
<font color="#CCCCCC">to this character set crawlers don't</font>

481
00:17:14,859 --> 00:17:19,869
send that because they never worry about

482
00:17:16,270 --> 00:17:22,300
<font color="#CCCCCC">woo they</font><font color="#E5E5E5"> never actually visually give</font>

483
00:17:19,869 --> 00:17:23,949
you the information there we go crawlers

484
00:17:22,300 --> 00:17:25,810
never visually render it so they don't

485
00:17:23,950 --> 00:17:28,300
have<font color="#CCCCCC"> to browsers are very rich user</font>

486
00:17:25,810 --> 00:17:30,909
agents and so they tend<font color="#E5E5E5"> to send lots of</font>

487
00:17:28,300 --> 00:17:33,909
HTTP headers crawlers really don't have

488
00:17:30,910 --> 00:17:35,860
to so they<font color="#E5E5E5"> don't crawlers also request</font>

489
00:17:33,910 --> 00:17:37,990
HTML and just simply parse it for links

490
00:17:35,860 --> 00:17:40,389
browsers<font color="#CCCCCC"> request HTML and then grab all</font>

491
00:17:37,990 --> 00:17:42,160
the supporting files so<font color="#E5E5E5"> you know if I'm</font>

492
00:17:40,390 --> 00:17:44,200
a crawler I just grabbed the index or I

493
00:17:42,160 --> 00:17:47,440
<font color="#E5E5E5">just grabbed the HTML file and then use</font>

494
00:17:44,200 --> 00:17:49,450
a regex and extract all the hrs and then

495
00:17:47,440 --> 00:17:51,400
I stick those in a queue and<font color="#E5E5E5"> proceed to</font>

496
00:17:49,450 --> 00:17:53,830
go but you know when when a browser

497
00:17:51,400 --> 00:17:56,500
grabs it grabs the fav icon the

498
00:17:53,830 --> 00:17:58,899
stylesheets the<font color="#CCCCCC"> JavaScript the images so</font>

499
00:17:56,500 --> 00:18:01,090
simply the signature of requests a

500
00:17:58,900 --> 00:18:03,280
crawler makes is distinct from the

501
00:18:01,090 --> 00:18:05,860
signature of requests a browser makes so

502
00:18:03,280 --> 00:18:08,649
we're going<font color="#E5E5E5"> to have</font><font color="#CCCCCC"> to somehow replicate</font>

503
00:18:05,860 --> 00:18:10,330
that crawlers are also very simple where

504
00:18:08,650 --> 00:18:12,070
browsers are extremely complex they

505
00:18:10,330 --> 00:18:15,070
contain<font color="#E5E5E5"> code for you know parsing</font><font color="#CCCCCC"> Java</font>

506
00:18:12,070 --> 00:18:17,050
applets flash JavaScript activex you

507
00:18:15,070 --> 00:18:18,939
know and the crazy thing is these

508
00:18:17,050 --> 00:18:21,909
technologies can make direct HTTP

509
00:18:18,940 --> 00:18:24,490
connections themselves so if I if I have

510
00:18:21,910 --> 00:18:26,560
a crawler<font color="#E5E5E5"> that visits it that visits say</font>

511
00:18:24,490 --> 00:18:28,270
an index page well that index page maybe

512
00:18:26,560 --> 00:18:30,669
contains some<font color="#E5E5E5"> JavaScript that uses Ajax</font>

513
00:18:28,270 --> 00:18:33,340
well Ajax is a way<font color="#E5E5E5"> that JavaScript can</font>

514
00:18:30,670 --> 00:18:35,200
make HTTP connections so if a crawler

515
00:18:33,340 --> 00:18:37,720
just requests that page it's not going

516
00:18:35,200 --> 00:18:39,280
to make<font color="#CCCCCC"> the HTTP connections that the a</font>

517
00:18:37,720 --> 00:18:40,600
browser would make<font color="#E5E5E5"> because the browser</font>

518
00:18:39,280 --> 00:18:42,610
is going to take the<font color="#E5E5E5"> JavaScript</font>

519
00:18:40,600 --> 00:18:44,919
interpret it and make those HTTP

520
00:18:42,610 --> 00:18:46,540
requests so again it's just<font color="#E5E5E5"> another</font><font color="#CCCCCC"> way</font>

521
00:18:44,920 --> 00:18:47,950
that crawlers simply don't make the same

522
00:18:46,540 --> 00:18:51,909
request that a browser would make when

523
00:18:47,950 --> 00:18:54,490
looking at a page so again I showed the

524
00:18:51,910 --> 00:18:55,810
<font color="#CCCCCC">browser's making lots covert crawler is</font>

525
00:18:54,490 --> 00:18:57,370
going to have to duplicate both the

526
00:18:55,810 --> 00:18:59,379
order and<font color="#E5E5E5"> the value of these headers so</font>

527
00:18:57,370 --> 00:19:01,959
<font color="#CCCCCC">I picked</font><font color="#E5E5E5"> the most common browser which</font>

528
00:18:59,380 --> 00:19:04,570
was ie6 at the time and the most common

529
00:19:01,960 --> 00:19:07,140
version and that is<font color="#E5E5E5"> the type of debt</font>

530
00:19:04,570 --> 00:19:10,120
request that my covert crawler will send

531
00:19:07,140 --> 00:19:12,160
so obviously i needed a mechanism<font color="#CCCCCC"> i</font>

532
00:19:10,120 --> 00:19:14,080
wrote this in java but<font color="#E5E5E5"> i need a</font>

533
00:19:12,160 --> 00:19:15,310
mechanism for manipulating HTTP headers

534
00:19:14,080 --> 00:19:18,100
in<font color="#E5E5E5"> java first of all anyone here ever</font>

535
00:19:15,310 --> 00:19:20,590
done some java web programming not JSP

536
00:19:18,100 --> 00:19:22,629
stuff but writing kind<font color="#E5E5E5"> of like pearl lwp</font>

537
00:19:20,590 --> 00:19:26,649
button java because you're lazy<font color="#E5E5E5"> in Perl</font>

538
00:19:22,630 --> 00:19:28,840
scares you<font color="#CCCCCC"> so this really pisses me off</font>

539
00:19:26,650 --> 00:19:30,550
<font color="#CCCCCC">Java's built-in library they have they</font>

540
00:19:28,840 --> 00:19:32,199
have a nice class for making HTTP

541
00:19:30,550 --> 00:19:34,680
connections for you and it allows you to

542
00:19:32,200 --> 00:19:38,170
specify a proxy to use you<font color="#CCCCCC"> know use this</font>

543
00:19:34,680 --> 00:19:41,110
HTTP proxy for me the bad thing is is

544
00:19:38,170 --> 00:19:43,720
that what happens is if you say hey go

545
00:19:41,110 --> 00:19:45,219
use this proxy if the if java can't

546
00:19:43,720 --> 00:19:47,320
actually connect to the proxy it'll<font color="#CCCCCC"> just</font>

547
00:19:45,220 --> 00:19:49,930
make the request directly for you anyway

548
00:19:47,320 --> 00:19:51,520
without going through a proxy assuming

549
00:19:49,930 --> 00:19:52,810
<font color="#CCCCCC">you know of course well</font><font color="#E5E5E5"> I should make</font>

550
00:19:51,520 --> 00:19:54,310
the best effort to get this resource

551
00:19:52,810 --> 00:19:56,440
well of course<font color="#CCCCCC"> if</font><font color="#E5E5E5"> I'm running in covert</font>

552
00:19:54,310 --> 00:19:58,929
crawler the last thing I want this<font color="#E5E5E5"> to do</font>

553
00:19:56,440 --> 00:20:02,500
is make a direct request I<font color="#E5E5E5"> always wanted</font>

554
00:19:58,930 --> 00:20:05,890
to<font color="#E5E5E5"> use proxies so I found a beautiful</font>

555
00:20:02,500 --> 00:20:07,840
HTTP library for Java that allows you<font color="#E5E5E5"> to</font>

556
00:20:05,890 --> 00:20:10,120
manipulate you know all the headers it

557
00:20:07,840 --> 00:20:12,310
allows you know fail overs for proxies

558
00:20:10,120 --> 00:20:13,959
it's excellent this is<font color="#E5E5E5"> really cool you</font>

559
00:20:12,310 --> 00:20:16,270
<font color="#E5E5E5">guys should check it out here's a little</font>

560
00:20:13,960 --> 00:20:18,310
snippet of code but basically you know

561
00:20:16,270 --> 00:20:21,820
I'm replicating all of the headers that

562
00:20:18,310 --> 00:20:22,178
a browser would send also we need a

563
00:20:21,820 --> 00:20:23,889
mekinese

564
00:20:22,179 --> 00:20:26,259
for getting these page resources like I

565
00:20:23,889 --> 00:20:29,049
talked about<font color="#E5E5E5"> 1 HTML pages causes several</font>

566
00:20:26,259 --> 00:20:31,929
other<font color="#CCCCCC"> ACV two HTTP</font><font color="#E5E5E5"> transactions I've</font>

567
00:20:29,049 --> 00:20:34,629
images image<font color="#CCCCCC"> maps scripts complex media</font>

568
00:20:31,929 --> 00:20:38,379
fav icon style sheets all sorts of junk

569
00:20:34,629 --> 00:20:39,969
this are all the sites off of O'Reilly

570
00:20:38,379 --> 00:20:41,619
calm and you see you<font color="#CCCCCC"> know</font><font color="#E5E5E5"> right there</font>

571
00:20:39,970 --> 00:20:44,350
I've got<font color="#E5E5E5"> you know almost two dozen</font>

572
00:20:41,619 --> 00:20:46,480
images alone that I need to<font color="#CCCCCC"> grab just</font>

573
00:20:44,350 --> 00:20:48,189
<font color="#E5E5E5">from visiting the main index HTML page</font>

574
00:20:46,480 --> 00:20:49,960
of O'Reilly and<font color="#CCCCCC"> that</font><font color="#E5E5E5"> doesn't even</font>

575
00:20:48,190 --> 00:20:54,159
include they have so many<font color="#CCCCCC"> freaking like</font>

576
00:20:49,960 --> 00:20:57,820
RSS feeds and<font color="#E5E5E5"> style sheets it's</font>

577
00:20:54,159 --> 00:20:59,980
<font color="#CCCCCC">ridiculous so we I needed to browser fly</font>

578
00:20:57,820 --> 00:21:02,590
a crawler and so basically<font color="#E5E5E5"> this is a</font>

579
00:20:59,980 --> 00:21:04,779
dump of one of the log files but I

580
00:21:02,590 --> 00:21:07,360
grabbed a<font color="#CCCCCC"> weight I have the laser</font>

581
00:21:04,779 --> 00:21:09,700
pointer so up so right<font color="#E5E5E5"> here I</font><font color="#CCCCCC"> grabbed</font>

582
00:21:07,360 --> 00:21:11,619
the index page and then the browser fire

583
00:21:09,700 --> 00:21:13,690
all these red dots are other requests

584
00:21:11,619 --> 00:21:16,090
the mic covert crawler needed to make to

585
00:21:13,690 --> 00:21:17,649
look like a browser so I'm grabbing AJ s

586
00:21:16,090 --> 00:21:20,350
file for<font color="#E5E5E5"> JavaScript I'm grabbing a</font>

587
00:21:17,649 --> 00:21:21,428
stylesheet I'm grabbing a gift and then

588
00:21:20,350 --> 00:21:23,949
the rest of<font color="#E5E5E5"> these are just a bunch of</font>

589
00:21:21,429 --> 00:21:26,529
gifts so<font color="#E5E5E5"> definitely you have to make all</font>

590
00:21:23,950 --> 00:21:28,960
the HTTP request that a browser makes so

591
00:21:26,529 --> 00:21:30,429
more browser emulation because<font color="#E5E5E5"> acting</font>

592
00:21:28,960 --> 00:21:32,409
like a browser is a lot<font color="#CCCCCC"> more than just</font>

593
00:21:30,429 --> 00:21:34,779
sending the HTTP requests that a browser

594
00:21:32,409 --> 00:21:36,009
would send and it's also how you send

595
00:21:34,779 --> 00:21:38,200
<font color="#E5E5E5">them browsers use what are called</font>

596
00:21:36,009 --> 00:21:39,460
persistent HTTP connections we're

597
00:21:38,200 --> 00:21:41,379
basically<font color="#E5E5E5"> you leave the connection open</font>

598
00:21:39,460 --> 00:21:43,029
<font color="#E5E5E5">I make a debt I get the response and</font>

599
00:21:41,379 --> 00:21:44,469
then without you know destroying that

600
00:21:43,029 --> 00:21:47,379
connection and redoing the three-way

601
00:21:44,470 --> 00:21:49,570
handshake I just send<font color="#E5E5E5"> an</font><font color="#CCCCCC"> AR HTTP</font><font color="#E5E5E5"> request</font>

602
00:21:47,379 --> 00:21:53,110
crawlers typically don't implement this

603
00:21:49,570 --> 00:21:54,999
there's some weird HTTP like pipelining

604
00:21:53,110 --> 00:21:57,008
persistent<font color="#E5E5E5"> connection stuff it's</font><font color="#CCCCCC"> not a</font>

605
00:21:54,999 --> 00:21:59,230
lot<font color="#CCCCCC"> of</font><font color="#E5E5E5"> people don't implement it very</font>

606
00:21:57,009 --> 00:22:03,249
well and<font color="#E5E5E5"> again the library really helped</font>

607
00:21:59,230 --> 00:22:04,269
me out<font color="#E5E5E5"> so even if you need to also you</font>

608
00:22:03,249 --> 00:22:06,220
need to find out whether<font color="#E5E5E5"> your crawler</font>

609
00:22:04,269 --> 00:22:08,619
even needs<font color="#E5E5E5"> to send them because browsers</font>

610
00:22:06,220 --> 00:22:10,059
implement a cash so my crawler had to

611
00:22:08,619 --> 00:22:12,249
implement a cache because there are

612
00:22:10,059 --> 00:22:14,200
certain<font color="#CCCCCC"> things like HTTP oh here's the</font>

613
00:22:12,249 --> 00:22:17,529
<font color="#CCCCCC">e-tag on this this resource doesn't</font>

614
00:22:14,200 --> 00:22:19,179
expire for you know till 2010 so a

615
00:22:17,529 --> 00:22:20,950
browser would never make a request for

616
00:22:19,179 --> 00:22:22,840
this image again<font color="#E5E5E5"> my covert crawler to</font>

617
00:22:20,950 --> 00:22:24,580
look like a browser obviously needs<font color="#E5E5E5"> to</font>

618
00:22:22,840 --> 00:22:26,709
respect all these you guys can<font color="#CCCCCC"> see this</font>

619
00:22:24,580 --> 00:22:29,889
gets really complicated really quickly I

620
00:22:26,710 --> 00:22:31,749
have to respect caching controls you

621
00:22:29,889 --> 00:22:34,389
know respect caching directives use

622
00:22:31,749 --> 00:22:35,680
conditional gets saying hey get me this

623
00:22:34,389 --> 00:22:38,050
resource only if<font color="#E5E5E5"> it's</font>

624
00:22:35,680 --> 00:22:45,160
expired I mean there's this was not

625
00:22:38,050 --> 00:22:48,810
trivial to<font color="#CCCCCC"> two really interesting well I</font>

626
00:22:45,160 --> 00:22:50,980
it's funny because<font color="#E5E5E5"> I use IE as my my</font>

627
00:22:48,810 --> 00:22:54,100
HTTP headers but<font color="#CCCCCC"> I was doing everything</font>

628
00:22:50,980 --> 00:22:56,680
<font color="#E5E5E5">in linux on</font><font color="#CCCCCC"> java so i was using firefox</font>

629
00:22:54,100 --> 00:22:57,969
i was doing a lot of you<font color="#E5E5E5"> know running it</font>

630
00:22:56,680 --> 00:23:01,450
through a proxy and then making<font color="#E5E5E5"> sure I</font>

631
00:22:57,970 --> 00:23:03,040
<font color="#CCCCCC">was doing the same thing so there are</font>

632
00:23:01,450 --> 00:23:05,110
<font color="#E5E5E5">some features about HTML that make</font>

633
00:23:03,040 --> 00:23:07,420
browser flying or crawler so to speak

634
00:23:05,110 --> 00:23:09,280
quite difficult the HTML can contain

635
00:23:07,420 --> 00:23:10,960
objects like I said that making HTTP

636
00:23:09,280 --> 00:23:13,510
connections on their own we talked about

637
00:23:10,960 --> 00:23:15,880
Ajax already flash can use sockets Java

638
00:23:13,510 --> 00:23:17,680
can use optics sockets activex can use

639
00:23:15,880 --> 00:23:19,810
sockets you<font color="#CCCCCC"> know you've got meta refresh</font>

640
00:23:17,680 --> 00:23:21,820
<font color="#CCCCCC">tags so other objects will continue</font>

641
00:23:19,810 --> 00:23:23,950
downloading<font color="#E5E5E5"> I</font><font color="#CCCCCC"> grabbed an HTML page which</font>

642
00:23:21,820 --> 00:23:25,899
says hey refresh to this other page in

643
00:23:23,950 --> 00:23:27,280
five seconds<font color="#E5E5E5"> but I proceeded to download</font>

644
00:23:25,900 --> 00:23:29,260
the style sheets and all sorts of other

645
00:23:27,280 --> 00:23:30,790
junk but as soon as<font color="#E5E5E5"> five seconds happen</font>

646
00:23:29,260 --> 00:23:33,310
<font color="#E5E5E5">I got to go get this other thing you got</font>

647
00:23:30,790 --> 00:23:35,920
timing issues that's that's complicated

648
00:23:33,310 --> 00:23:37,929
so obviously writing flash and

649
00:23:35,920 --> 00:23:39,490
JavaScript and activex parsers we're

650
00:23:37,930 --> 00:23:43,360
<font color="#E5E5E5">outside</font><font color="#CCCCCC"> the scope of the project so I</font>

651
00:23:39,490 --> 00:23:45,370
<font color="#E5E5E5">just ignored them so that</font><font color="#CCCCCC"> pretty much</font>

652
00:23:43,360 --> 00:23:47,500
took care of making<font color="#CCCCCC"> the browser excuse</font>

653
00:23:45,370 --> 00:23:49,209
me making my covert crawler act like a

654
00:23:47,500 --> 00:23:50,440
browser when it would request a resource

655
00:23:49,210 --> 00:23:52,870
it would request everything else that

656
00:23:50,440 --> 00:23:54,490
<font color="#E5E5E5">needed to the exact same way of crawler</font>

657
00:23:52,870 --> 00:23:56,800
would and respecting all the caching

658
00:23:54,490 --> 00:23:59,740
information now the tough part was how

659
00:23:56,800 --> 00:24:02,830
do you make the crawler browse like a

660
00:23:59,740 --> 00:24:04,480
human browser web site because crawlers

661
00:24:02,830 --> 00:24:05,919
navigate links and make requests in a

662
00:24:04,480 --> 00:24:07,870
very<font color="#CCCCCC"> obvious</font><font color="#E5E5E5"> and predictable pattern</font>

663
00:24:05,920 --> 00:24:10,060
they're extremely easy to<font color="#E5E5E5"> detect in logs</font>

664
00:24:07,870 --> 00:24:11,939
humans make browsing decisions based on

665
00:24:10,060 --> 00:24:14,800
the content and whether they like<font color="#CCCCCC"> it and</font>

666
00:24:11,940 --> 00:24:16,000
not only that is the the the request

667
00:24:14,800 --> 00:24:17,470
pattern is very<font color="#E5E5E5"> different from a crawler</font>

668
00:24:16,000 --> 00:24:19,480
but the request patterns different from

669
00:24:17,470 --> 00:24:20,920
person to person you know if<font color="#CCCCCC"> akari here</font>

670
00:24:19,480 --> 00:24:22,600
is looking at<font color="#E5E5E5"> hackaday he might be</font>

671
00:24:20,920 --> 00:24:25,300
interested<font color="#E5E5E5"> in say some RFID hacking</font>

672
00:24:22,600 --> 00:24:27,280
stuff or some<font color="#CCCCCC"> fpga hacking stuff but if</font>

673
00:24:25,300 --> 00:24:29,290
George is looking at<font color="#CCCCCC"> hackaday he might</font>

674
00:24:27,280 --> 00:24:31,240
be looking<font color="#CCCCCC"> for I don't know George what</font>

675
00:24:29,290 --> 00:24:38,450
hardware stuff do you like porn yeah

676
00:24:31,240 --> 00:24:40,740
like animal<font color="#E5E5E5"> i q no</font><font color="#CCCCCC"> Hardware porn whoa</font>

677
00:24:38,450 --> 00:24:41,850
I've talked to Elliot about getting some

678
00:24:40,740 --> 00:24:46,740
of that<font color="#E5E5E5"> stuff on hackaday that'd be</font>

679
00:24:41,850 --> 00:24:48,719
great so you know it's how you make<font color="#E5E5E5"> the</font>

680
00:24:46,740 --> 00:24:50,790
the request patterns differ not only

681
00:24:48,720 --> 00:24:54,360
from person to person but certainly from

682
00:24:50,790 --> 00:24:56,430
all people and crawlers the title of the

683
00:24:54,360 --> 00:24:59,040
slide really<font color="#E5E5E5"> should be behavior of</font>

684
00:24:56,430 --> 00:25:00,840
computers versus humans<font color="#E5E5E5"> and replicating</font>

685
00:24:59,040 --> 00:25:02,879
human behavior is very very complicated

686
00:25:00,840 --> 00:25:04,709
and<font color="#E5E5E5"> this is not</font><font color="#CCCCCC"> a master's thesis on AI</font>

687
00:25:02,880 --> 00:25:06,510
and frankly<font color="#E5E5E5"> my company doesn't pay me</font>

688
00:25:04,710 --> 00:25:09,540
that much for<font color="#E5E5E5"> me to you know figure this</font>

689
00:25:06,510 --> 00:25:10,770
out and solve this problem so what we

690
00:25:09,540 --> 00:25:12,600
<font color="#CCCCCC">really needed to</font><font color="#E5E5E5"> do was find a good</font>

691
00:25:10,770 --> 00:25:16,260
enough solution that was practical to

692
00:25:12,600 --> 00:25:20,429
make a crawler navigate links as if it

693
00:25:16,260 --> 00:25:21,840
were a human so just real quick almost

694
00:25:20,430 --> 00:25:24,120
all crawlers I want to call breath<font color="#CCCCCC"> burps</font>

695
00:25:21,840 --> 00:25:26,370
crawlers it's really simple you've got a

696
00:25:24,120 --> 00:25:28,080
<font color="#E5E5E5">link of you've got a pending queue so</font>

697
00:25:26,370 --> 00:25:30,479
you pull the link off you grab the

698
00:25:28,080 --> 00:25:33,149
resource<font color="#E5E5E5"> just or a local copy if the</font>

699
00:25:30,480 --> 00:25:35,010
content was HTML then for each link in

700
00:25:33,150 --> 00:25:36,510
the HTML you know check to see if<font color="#E5E5E5"> it's</font>

701
00:25:35,010 --> 00:25:38,400
already pending in the link or if we

702
00:25:36,510 --> 00:25:42,300
visited it if not stick it in the cube

703
00:25:38,400 --> 00:25:44,970
move on it's<font color="#E5E5E5"> really simple and you you</font>

704
00:25:42,300 --> 00:25:46,680
can write a crawler insane pearl<font color="#CCCCCC"> in</font>

705
00:25:44,970 --> 00:25:51,540
about eight lines of code<font color="#E5E5E5"> it's and</font>

706
00:25:46,680 --> 00:25:53,820
probably three if you're really<font color="#E5E5E5"> beat so</font>

707
00:25:51,540 --> 00:25:55,440
here's how pages are retrieved by Brett

708
00:25:53,820 --> 00:25:57,330
<font color="#CCCCCC">Fritz crawler they use a queue data</font>

709
00:25:55,440 --> 00:25:59,400
structure which causes the crawler to

710
00:25:57,330 --> 00:26:01,379
visit all pages of equal depth before

711
00:25:59,400 --> 00:26:03,240
going deeper so you know I make you know

712
00:26:01,380 --> 00:26:05,550
a request for one and then I make these

713
00:26:03,240 --> 00:26:09,060
pages before<font color="#E5E5E5"> i go to four even though i</font>

714
00:26:05,550 --> 00:26:10,649
discovered<font color="#E5E5E5"> four off of one so this is a</font>

715
00:26:09,060 --> 00:26:13,169
very<font color="#E5E5E5"> simple design and there are tons of</font>

716
00:26:10,650 --> 00:26:15,630
examples this is basically<font color="#E5E5E5"> the this is</font>

717
00:26:13,170 --> 00:26:17,610
<font color="#E5E5E5">the definitive way you write crawlers</font>

718
00:26:15,630 --> 00:26:19,560
everyone does it this way<font color="#E5E5E5"> the cons of</font>

719
00:26:17,610 --> 00:26:20,879
this obviously it's very obvious non

720
00:26:19,560 --> 00:26:22,980
human behavior i'm going to hit all of

721
00:26:20,880 --> 00:26:25,290
these pages that are linked off the site

722
00:26:22,980 --> 00:26:28,050
route before<font color="#CCCCCC"> i hit one off of it no</font>

723
00:26:25,290 --> 00:26:29,460
human<font color="#E5E5E5"> browsers that way you know pages</font>

724
00:26:28,050 --> 00:26:31,379
can be<font color="#CCCCCC"> request when the previous</font>

725
00:26:29,460 --> 00:26:34,200
response contain no link to the page<font color="#CCCCCC"> i</font>

726
00:26:31,380 --> 00:26:36,630
mean it's<font color="#CCCCCC"> just very obvious to see that</font>

727
00:26:34,200 --> 00:26:38,400
this is a crawler you know browsing like

728
00:26:36,630 --> 00:26:40,470
a human is different because all weeks

729
00:26:38,400 --> 00:26:42,480
for a crawler all links are created

730
00:26:40,470 --> 00:26:45,270
equal you know it doesn't differentiate

731
00:26:42,480 --> 00:26:47,070
between how important the link is but

732
00:26:45,270 --> 00:26:49,170
some links are more equal than others

733
00:26:47,070 --> 00:26:50,879
for humans for example you're looking at

734
00:26:49,170 --> 00:26:51,510
a<font color="#E5E5E5"> Riley's page this is really</font>

735
00:26:50,880 --> 00:26:53,940
<font color="#CCCCCC">interesting</font>

736
00:26:51,510 --> 00:26:56,129
this is<font color="#E5E5E5"> really interesting these things</font>

737
00:26:53,940 --> 00:26:57,900
<font color="#E5E5E5">maybe not so much so but humans just</font>

738
00:26:56,130 --> 00:26:59,190
move being conditioned by the way web

739
00:26:57,900 --> 00:27:01,260
design has been<font color="#E5E5E5"> over the last several</font>

740
00:26:59,190 --> 00:27:03,030
years to<font color="#CCCCCC"> look for a</font><font color="#E5E5E5"> table of</font><font color="#CCCCCC"> contents</font>

741
00:27:01,260 --> 00:27:05,129
along the right side<font color="#E5E5E5"> you know you're</font>

742
00:27:03,030 --> 00:27:06,810
more likely to click these<font color="#E5E5E5"> things then</font>

743
00:27:05,130 --> 00:27:08,520
you are to click you know<font color="#E5E5E5"> something over</font>

744
00:27:06,810 --> 00:27:10,740
there<font color="#E5E5E5"> like more or at the bottom of the</font>

745
00:27:08,520 --> 00:27:13,920
page their privacy policy so how the

746
00:27:10,740 --> 00:27:15,210
link is presented in its context really

747
00:27:13,920 --> 00:27:17,760
kind of signifies how likely you are to

748
00:27:15,210 --> 00:27:19,350
click on it and so this<font color="#CCCCCC"> is a problem</font>

749
00:27:17,760 --> 00:27:21,390
<font color="#E5E5E5">because how do you teach an automated</font>

750
00:27:19,350 --> 00:27:24,270
process<font color="#CCCCCC"> to understand the context of a</font>

751
00:27:21,390 --> 00:27:25,590
link luckily some to our people at

752
00:27:24,270 --> 00:27:27,629
Google have been working on this very

753
00:27:25,590 --> 00:27:29,310
thing so i actually<font color="#E5E5E5"> have read a lot</font>

754
00:27:27,630 --> 00:27:32,010
about page rank which we'll get to in a

755
00:27:29,310 --> 00:27:34,409
second so paid retrieval for<font color="#E5E5E5"> a human</font>

756
00:27:32,010 --> 00:27:35,400
like I<font color="#E5E5E5"> said the pattern is completely</font>

757
00:27:34,410 --> 00:27:37,860
different<font color="#CCCCCC"> than a breadth-first search</font>

758
00:27:35,400 --> 00:27:39,510
crawler each human will access resources

759
00:27:37,860 --> 00:27:41,790
in a different order based on personal

760
00:27:39,510 --> 00:27:43,740
<font color="#CCCCCC">tastes and</font><font color="#E5E5E5"> crawlers almost always act</font>

761
00:27:41,790 --> 00:27:46,170
the same regardless of whether<font color="#E5E5E5"> Google</font>

762
00:27:43,740 --> 00:27:47,580
bot is crawling you or you know Yahoo's

763
00:27:46,170 --> 00:27:49,290
color is crawling you<font color="#CCCCCC"> there pretty</font><font color="#E5E5E5"> much</font>

764
00:27:47,580 --> 00:27:52,110
<font color="#E5E5E5">going to request pages in the exact same</font>

765
00:27:49,290 --> 00:27:53,670
order that's not entirely true for

766
00:27:52,110 --> 00:27:55,050
search engines because they they

767
00:27:53,670 --> 00:27:57,420
actually keep track<font color="#CCCCCC"> of how often</font><font color="#E5E5E5"> the</font>

768
00:27:55,050 --> 00:27:59,790
pages ritas updated and visit those more

769
00:27:57,420 --> 00:28:01,470
often than others but basically the

770
00:27:59,790 --> 00:28:03,270
lesson here<font color="#E5E5E5"> is link selection is</font>

771
00:28:01,470 --> 00:28:05,370
extremely important for a covert<font color="#E5E5E5"> crawler</font>

772
00:28:03,270 --> 00:28:07,080
a human you<font color="#CCCCCC"> know goes down this way and</font>

773
00:28:05,370 --> 00:28:08,610
then goes back<font color="#CCCCCC"> and give us here so we</font>

774
00:28:07,080 --> 00:28:11,820
somehow need to find a<font color="#E5E5E5"> way to do</font>

775
00:28:08,610 --> 00:28:13,320
intelligent link selection so as I said

776
00:28:11,820 --> 00:28:15,030
humans in crawler see the HTML

777
00:28:13,320 --> 00:28:17,939
differently the crawler simply sees the

778
00:28:15,030 --> 00:28:19,800
<font color="#E5E5E5">release list of links so humans filter</font>

779
00:28:17,940 --> 00:28:21,450
what links they want to click based on

780
00:28:19,800 --> 00:28:23,159
<font color="#CCCCCC">all sorts</font><font color="#E5E5E5"> of con all sorts of factors</font>

781
00:28:21,450 --> 00:28:25,170
all of which we need<font color="#E5E5E5"> to try to find an</font>

782
00:28:23,160 --> 00:28:27,090
equivalent for you know they filter

783
00:28:25,170 --> 00:28:28,890
based on positive link content is this

784
00:28:27,090 --> 00:28:31,740
<font color="#E5E5E5">something users interested in for</font>

785
00:28:28,890 --> 00:28:34,260
example<font color="#E5E5E5"> hardware porn for George you</font>

786
00:28:31,740 --> 00:28:36,060
know is it negatively content not

787
00:28:34,260 --> 00:28:38,040
hardware porn for George you know he

788
00:28:36,060 --> 00:28:39,690
wouldn't click on it how is only

789
00:28:38,040 --> 00:28:41,180
presented you know is the presentation

790
00:28:39,690 --> 00:28:43,410
<font color="#E5E5E5">of the link</font><font color="#CCCCCC"> itself</font><font color="#E5E5E5"> interestingly</font>

791
00:28:41,180 --> 00:28:45,060
interesting<font color="#E5E5E5"> enough</font><font color="#CCCCCC"> to warrant clicking</font>

792
00:28:43,410 --> 00:28:47,640
on it I mean who hasn't want to punch

793
00:28:45,060 --> 00:28:48,960
that monkey in<font color="#CCCCCC"> the face everybody's</font>

794
00:28:47,640 --> 00:28:50,850
wanted to punch the monkey of the face

795
00:28:48,960 --> 00:28:55,320
it chances are you punch the monkey in

796
00:28:50,850 --> 00:28:57,149
<font color="#CCCCCC">the face before so understanding</font><font color="#E5E5E5"> the</font>

797
00:28:55,320 --> 00:28:59,550
context of the links is pretty important

798
00:28:57,150 --> 00:29:01,860
we can kind<font color="#E5E5E5"> of fake it by examining the</font>

799
00:28:59,550 --> 00:29:04,350
contents of the links text<font color="#E5E5E5"> which</font><font color="#CCCCCC"> is what</font>

800
00:29:01,860 --> 00:29:04,899
I did understanding the presentation<font color="#E5E5E5"> of</font>

801
00:29:04,350 --> 00:29:07,000
a link is

802
00:29:04,900 --> 00:29:09,250
relatively easy you know<font color="#E5E5E5"> it's defined by</font>

803
00:29:07,000 --> 00:29:11,140
its structure inside<font color="#E5E5E5"> the HTML inside a</font>

804
00:29:09,250 --> 00:29:12,760
cascading style sheet for example you

805
00:29:11,140 --> 00:29:14,410
<font color="#E5E5E5">can tell whether it's bolded whether</font>

806
00:29:12,760 --> 00:29:18,190
it's text is larger than the<font color="#E5E5E5"> surrounding</font>

807
00:29:14,410 --> 00:29:20,620
text is it a image link how large<font color="#E5E5E5"> is</font>

808
00:29:18,190 --> 00:29:22,840
this<font color="#E5E5E5"> image in terms of area reference to</font>

809
00:29:20,620 --> 00:29:24,699
their entire screen you can kind of use

810
00:29:22,840 --> 00:29:26,790
these mechanisms to determine how is

811
00:29:24,700 --> 00:29:29,350
this link actually presented to the user

812
00:29:26,790 --> 00:29:31,540
unfortunately we can't evaluate actual

813
00:29:29,350 --> 00:29:33,610
images there could be an image that's a

814
00:29:31,540 --> 00:29:35,320
link<font color="#E5E5E5"> and the links and the image says</font>

815
00:29:33,610 --> 00:29:36,729
never never never click on this kind<font color="#CCCCCC"> of</font>

816
00:29:35,320 --> 00:29:38,470
touches on the CAPTCHA stuff you were

817
00:29:36,730 --> 00:29:41,680
mentioning earlier you know I am NOT

818
00:29:38,470 --> 00:29:42,880
attempting to analyze images doesn't

819
00:29:41,680 --> 00:29:46,120
<font color="#E5E5E5">Google have to do all this I mean</font>

820
00:29:42,880 --> 00:29:48,400
<font color="#E5E5E5">PageRank link link scoring I mean this</font>

821
00:29:46,120 --> 00:29:50,679
isn't a this isn't a abstract problem

822
00:29:48,400 --> 00:29:52,270
people are<font color="#CCCCCC"> working on this and there are</font>

823
00:29:50,680 --> 00:29:54,130
a lot of interesting solutions to it I

824
00:29:52,270 --> 00:29:55,990
had to choose<font color="#CCCCCC"> a very simple solution</font>

825
00:29:54,130 --> 00:29:57,310
because you know if I<font color="#E5E5E5"> had been able to</font>

826
00:29:55,990 --> 00:29:59,710
choose the Google solution I would be

827
00:29:57,310 --> 00:30:01,960
<font color="#E5E5E5">making billions of dollars and I'm not</font>

828
00:29:59,710 --> 00:30:05,020
so I came<font color="#E5E5E5"> up with something a little</font>

829
00:30:01,960 --> 00:30:07,030
easier what I did<font color="#CCCCCC"> is I would score a</font>

830
00:30:05,020 --> 00:30:08,500
link based<font color="#E5E5E5"> on a numerous factors and</font>

831
00:30:07,030 --> 00:30:10,330
basically the link score would be

832
00:30:08,500 --> 00:30:12,430
calculated and it would kind of give<font color="#CCCCCC"> me</font>

833
00:30:10,330 --> 00:30:14,800
a for lack of a better term popularity

834
00:30:12,430 --> 00:30:18,520
rating for that<font color="#E5E5E5"> link it would tell me</font>

835
00:30:14,800 --> 00:30:20,409
you know how likely the user would be to

836
00:30:18,520 --> 00:30:21,670
click on it does it<font color="#E5E5E5"> contain emphasis</font>

837
00:30:20,410 --> 00:30:23,590
these are the things i was mentioning

838
00:30:21,670 --> 00:30:27,370
earlier what's the length of the links

839
00:30:23,590 --> 00:30:29,470
text<font color="#E5E5E5"> both words sighs and word count</font>

840
00:30:27,370 --> 00:30:32,649
matter so if you've got if there's a

841
00:30:29,470 --> 00:30:35,650
link that<font color="#CCCCCC"> just says download my latest</font>

842
00:30:32,650 --> 00:30:37,420
project here and here is the link and

843
00:30:35,650 --> 00:30:39,100
that's<font color="#E5E5E5"> the</font><font color="#CCCCCC"> only word in the link you're</font>

844
00:30:37,420 --> 00:30:41,260
less likely to click on that instead of

845
00:30:39,100 --> 00:30:42,909
download late download the<font color="#E5E5E5"> latest</font>

846
00:30:41,260 --> 00:30:45,190
version if that was the link<font color="#E5E5E5"> and</font><font color="#CCCCCC"> that</font>

847
00:30:42,910 --> 00:30:47,680
was all underlined simply larger it

848
00:30:45,190 --> 00:30:49,900
contains more information<font color="#E5E5E5"> I also tried</font>

849
00:30:47,680 --> 00:30:52,180
to rate the goodness or badness of the

850
00:30:49,900 --> 00:30:54,100
words<font color="#E5E5E5"> inside the link so good words</font>

851
00:30:52,180 --> 00:30:57,130
would<font color="#CCCCCC"> be things like new main update</font>

852
00:30:54,100 --> 00:30:59,800
<font color="#E5E5E5">cell by free porn stuff like that and</font>

853
00:30:57,130 --> 00:31:01,840
I've got a list and you could tweak it

854
00:30:59,800 --> 00:31:03,610
so every time<font color="#E5E5E5"> I'd see a good word up the</font>

855
00:31:01,840 --> 00:31:05,649
link score every time I see a bad word

856
00:31:03,610 --> 00:31:07,810
you know who reads the copyright

857
00:31:05,650 --> 00:31:10,330
statement or the legal statement or the

858
00:31:07,810 --> 00:31:12,909
privacy<font color="#CCCCCC"> policy on a website nobody reads</font>

859
00:31:10,330 --> 00:31:14,620
it so I had you know<font color="#E5E5E5"> about</font><font color="#CCCCCC"> things like</font>

860
00:31:12,910 --> 00:31:16,720
that no one ever clicks on those links

861
00:31:14,620 --> 00:31:17,709
<font color="#E5E5E5">and so a covert crawler shouldn't click</font>

862
00:31:16,720 --> 00:31:19,330
on those links because

863
00:31:17,710 --> 00:31:20,980
trying to replicate a human so I would

864
00:31:19,330 --> 00:31:24,668
decrement a link score if I saw those

865
00:31:20,980 --> 00:31:27,340
words also if the image is a link or

866
00:31:24,669 --> 00:31:28,779
excuse<font color="#CCCCCC"> me if the link is an image what I</font>

867
00:31:27,340 --> 00:31:29,980
would do is I would say all<font color="#E5E5E5"> right well</font>

868
00:31:28,779 --> 00:31:32,260
what's the<font color="#E5E5E5"> length and width of this</font>

869
00:31:29,980 --> 00:31:34,210
image let me take the length of this

870
00:31:32,260 --> 00:31:37,330
woman's figure out what the<font color="#CCCCCC"> area of it</font>

871
00:31:34,210 --> 00:31:39,279
is and what<font color="#CCCCCC"> percentage is this area</font><font color="#E5E5E5"> of</font>

872
00:31:37,330 --> 00:31:41,918
their entire screen size let's assume

873
00:31:39,279 --> 00:31:46,000
you<font color="#CCCCCC"> are using</font><font color="#E5E5E5"> a 1024 x 768 screen if</font>

874
00:31:41,919 --> 00:31:47,710
I've<font color="#E5E5E5"> got a image that's 400 x 200 that's</font>

875
00:31:46,000 --> 00:31:49,600
a pretty<font color="#E5E5E5"> damn big picture relative to</font>

876
00:31:47,710 --> 00:32:05,860
the entire<font color="#E5E5E5"> screen real estate did you</font>

877
00:31:49,600 --> 00:32:07,570
have a question it's possible<font color="#E5E5E5"> you have</font>

878
00:32:05,860 --> 00:32:09,100
to understand i'll get to it when i talk

879
00:32:07,570 --> 00:32:10,510
<font color="#E5E5E5">about spreading the crawler the way the</font>

880
00:32:09,100 --> 00:32:12,879
covert crawler works is there a bunch of

881
00:32:10,510 --> 00:32:14,830
<font color="#E5E5E5">threads and the threads pretty much try</font>

882
00:32:12,880 --> 00:32:16,690
to pick the most popular links and visit

883
00:32:14,830 --> 00:32:19,360
those first but every now and then<font color="#CCCCCC"> I</font>

884
00:32:16,690 --> 00:32:20,799
<font color="#E5E5E5">will promote an unpopular link to make</font>

885
00:32:19,360 --> 00:32:23,590
sure I exhaustively crawl the entire

886
00:32:20,799 --> 00:32:25,750
website but there's overlap like if I've

887
00:32:23,590 --> 00:32:27,549
got<font color="#CCCCCC"> 10 crawl threads all</font><font color="#E5E5E5"> 10 of those</font>

888
00:32:25,750 --> 00:32:28,600
will request the most popular page on

889
00:32:27,549 --> 00:32:30,490
the site because it would look

890
00:32:28,600 --> 00:32:32,168
suspicious if they didn't but maybe only

891
00:32:30,490 --> 00:32:34,750
one of them or one out of every hundred

892
00:32:32,169 --> 00:32:36,340
will actually request you know the legal

893
00:32:34,750 --> 00:32:37,659
policy or something like that<font color="#E5E5E5"> because</font>

894
00:32:36,340 --> 00:32:41,020
who knows maybe there's a sequel

895
00:32:37,659 --> 00:32:42,610
injectable form on the legal policy that

896
00:32:41,020 --> 00:32:46,168
would be<font color="#E5E5E5"> pretty funny considering it's</font>

897
00:32:42,610 --> 00:32:46,168
the legal policy yes

898
00:32:53,720 --> 00:32:59,510
yes trying<font color="#E5E5E5"> to</font><font color="#CCCCCC"> I try to I I looked doing</font>

899
00:32:58,280 --> 00:33:00,950
that and it's certainly<font color="#CCCCCC"> something you</font>

900
00:32:59,510 --> 00:33:02,810
could do I<font color="#CCCCCC"> try to</font><font color="#E5E5E5"> make</font><font color="#CCCCCC"> a completely</font>

901
00:33:00,950 --> 00:33:05,120
self-contained solution that way I'm not

902
00:33:02,810 --> 00:33:07,250
dependent on say some<font color="#CCCCCC"> third party to</font>

903
00:33:05,120 --> 00:33:09,350
give me<font color="#CCCCCC"> information now I do when we</font><font color="#E5E5E5"> get</font>

904
00:33:07,250 --> 00:33:11,090
to throttling i did use<font color="#E5E5E5"> google to try to</font>

905
00:33:09,350 --> 00:33:13,399
<font color="#E5E5E5">determine the size of the site i use</font>

906
00:33:11,090 --> 00:33:15,320
netcraft<font color="#CCCCCC"> alexia some of these</font><font color="#E5E5E5"> are people</font>

907
00:33:13,400 --> 00:33:16,730
to try to determine<font color="#CCCCCC"> how popular site is</font>

908
00:33:15,320 --> 00:33:18,590
because if you own you've got a

909
00:33:16,730 --> 00:33:20,810
geocities page that only gets<font color="#CCCCCC"> a hundred</font>

910
00:33:18,590 --> 00:33:22,280
hit today you know if you suddenly get a

911
00:33:20,810 --> 00:33:23,330
thousand hits a day but they're coming

912
00:33:22,280 --> 00:33:25,879
from a hundred different people

913
00:33:23,330 --> 00:33:28,399
scattered across the globe<font color="#CCCCCC"> now looks a</font>

914
00:33:25,880 --> 00:33:30,950
<font color="#E5E5E5">little weird so but we'll get to that a</font>

915
00:33:28,400 --> 00:33:32,510
little bit also if there's an alt text

916
00:33:30,950 --> 00:33:34,220
associated with the image<font color="#CCCCCC"> I do the</font>

917
00:33:32,510 --> 00:33:36,500
traditional<font color="#E5E5E5"> link scoring image on that</font>

918
00:33:34,220 --> 00:33:38,570
so this<font color="#E5E5E5"> is kind of abstract let's</font>

919
00:33:36,500 --> 00:33:41,150
actually show an example this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> a Riley</font>

920
00:33:38,570 --> 00:33:43,490
calm and sure enough you're seeing there

921
00:33:41,150 --> 00:33:46,280
was a link to<font color="#E5E5E5"> a rom-com which contained</font>

922
00:33:43,490 --> 00:33:48,440
an image so it got plus 5 and also the

923
00:33:46,280 --> 00:33:52,310
image area gave it + 57 popularity

924
00:33:48,440 --> 00:33:54,740
points this one was a link for actually

925
00:33:52,310 --> 00:33:56,570
a book we'll see and it had you know

926
00:33:54,740 --> 00:33:59,600
<font color="#E5E5E5">image bonus it contained the word shop</font>

927
00:33:56,570 --> 00:34:01,399
and hot so it got<font color="#CCCCCC"> plus words you know</font>

928
00:33:59,600 --> 00:34:03,379
right<font color="#E5E5E5"> here we see a word punishment</font>

929
00:34:01,400 --> 00:34:05,150
there was a jobs daughter Riley<font color="#CCCCCC"> calm</font>

930
00:34:03,380 --> 00:34:07,130
obviously if you're curling you know

931
00:34:05,150 --> 00:34:08,750
monster<font color="#E5E5E5"> or something like that you'll</font>

932
00:34:07,130 --> 00:34:10,580
want to take jobs out of the bad word

933
00:34:08,750 --> 00:34:12,020
list but typically most people don't

934
00:34:10,580 --> 00:34:14,420
click<font color="#E5E5E5"> on that little jobs link at the</font>

935
00:34:12,020 --> 00:34:18,110
bottom you<font color="#CCCCCC"> know your mileage may vary</font>

936
00:34:14,420 --> 00:34:20,300
and here<font color="#CCCCCC"> we see a sorted list of the</font>

937
00:34:18,110 --> 00:34:22,130
links it found in the scores and we see

938
00:34:20,300 --> 00:34:24,440
<font color="#E5E5E5">things like it's kind of hard to see</font>

939
00:34:22,130 --> 00:34:27,470
events<font color="#E5E5E5"> I'll show you this on the next</font>

940
00:34:24,440 --> 00:34:29,780
<font color="#E5E5E5">page there's a riot</font><font color="#CCCCCC"> event this</font><font color="#E5E5E5"> Safari</font>

941
00:34:27,469 --> 00:34:31,819
that's a book that they're premiering

942
00:34:29,780 --> 00:34:33,410
<font color="#E5E5E5">O'Reilly and actually kind of sucks</font>

943
00:34:31,820 --> 00:34:35,780
there's a rally com<font color="#CCCCCC"> change</font><font color="#E5E5E5"> their web</font>

944
00:34:33,409 --> 00:34:37,850
layout like a month ago but this Oh

945
00:34:35,780 --> 00:34:39,530
Riley calm a link to arrive calm that

946
00:34:37,850 --> 00:34:40,639
big image at the top that said O'Reilly

947
00:34:39,530 --> 00:34:43,700
was just simply<font color="#CCCCCC"> a link to the</font><font color="#E5E5E5"> homepage</font>

948
00:34:40,639 --> 00:34:45,920
<font color="#E5E5E5">and sure enough we see it here is the</font>

949
00:34:43,699 --> 00:34:49,489
emerging technology conference which had

950
00:34:45,920 --> 00:34:50,870
this the image and this text is all for

951
00:34:49,489 --> 00:34:52,250
the emerging technology conference that

952
00:34:50,870 --> 00:34:54,560
was that<font color="#E5E5E5"> little thing we saw four events</font>

953
00:34:52,250 --> 00:34:57,380
daughter Riley and actually it was this

954
00:34:54,560 --> 00:34:58,790
book right here for<font color="#E5E5E5"> Safari that came up</font>

955
00:34:57,380 --> 00:35:02,360
<font color="#CCCCCC">pretty high because it's</font><font color="#E5E5E5"> got a picture</font>

956
00:34:58,790 --> 00:35:04,940
and an extremely long number of words so

957
00:35:02,360 --> 00:35:07,220
those links you know obviously<font color="#E5E5E5"> this</font>

958
00:35:04,940 --> 00:35:09,140
allow a comm link came up so

959
00:35:07,220 --> 00:35:11,419
like what we saw in the<font color="#E5E5E5"> previous picture</font>

960
00:35:09,140 --> 00:35:13,129
all kind of the the links we had a gut

961
00:35:11,420 --> 00:35:14,869
feel that it would seem like people

962
00:35:13,130 --> 00:35:16,849
clicked on this algorithm does a good

963
00:35:14,869 --> 00:35:22,099
job is actually ordering those as

964
00:35:16,849 --> 00:35:24,490
popular links yes now that's very

965
00:35:22,099 --> 00:35:27,020
<font color="#E5E5E5">interesting i'm about to talk</font><font color="#CCCCCC"> about that</font>

966
00:35:24,490 --> 00:35:29,330
<font color="#E5E5E5">position in HTML is not a good indicator</font>

967
00:35:27,020 --> 00:35:32,240
and<font color="#CCCCCC"> i thought it would be and the reason</font>

968
00:35:29,330 --> 00:35:34,400
is<font color="#CCCCCC"> this you know it's it's not stupid</font>

969
00:35:32,240 --> 00:35:36,140
it's very good<font color="#CCCCCC"> but this this mentality</font>

970
00:35:34,400 --> 00:35:38,869
of we need to get<font color="#E5E5E5"> away from everything</font>

971
00:35:36,140 --> 00:35:41,060
that was bad with HTML from 1997 and

972
00:35:38,869 --> 00:35:42,140
separate content from presentation the

973
00:35:41,060 --> 00:35:43,400
structure of<font color="#E5E5E5"> the site should be</font>

974
00:35:42,140 --> 00:35:44,930
different from the content of the site

975
00:35:43,400 --> 00:35:48,410
how we<font color="#E5E5E5"> present the site</font><font color="#CCCCCC"> if you guys ever</font>

976
00:35:44,930 --> 00:35:50,149
<font color="#E5E5E5">been to CSS</font><font color="#CCCCCC"> zen garden awesome sights</font>

977
00:35:48,410 --> 00:35:52,700
you perfect example separating content

978
00:35:50,150 --> 00:35:54,109
from presentation well<font color="#E5E5E5"> because you're</font>

979
00:35:52,700 --> 00:35:56,089
separating content from presentation

980
00:35:54,109 --> 00:35:57,980
you're using absolutely positioned div

981
00:35:56,090 --> 00:35:59,900
tags you're doing all sorts of stuff so

982
00:35:57,980 --> 00:36:02,540
just because a link appears in the top

983
00:35:59,900 --> 00:36:04,520
<font color="#CCCCCC">of the actual HTML file has no bearing</font>

984
00:36:02,540 --> 00:36:07,250
on where it will actually be rendered on

985
00:36:04,520 --> 00:36:10,099
the page that's complex<font color="#CCCCCC"> i mean i could</font>

986
00:36:07,250 --> 00:36:11,599
<font color="#CCCCCC">write like is that style shell that's</font>

987
00:36:10,099 --> 00:36:13,220
another thing I I could write something

988
00:36:11,599 --> 00:36:14,960
actually interpret style sheets and

989
00:36:13,220 --> 00:36:17,359
tries to<font color="#CCCCCC"> actually render HTML but again</font>

990
00:36:14,960 --> 00:36:21,109
<font color="#E5E5E5">really complicated and frankly I'm lazy</font>

991
00:36:17,359 --> 00:36:22,819
so didn't get around to it style sheets

992
00:36:21,109 --> 00:36:24,529
also can make emphasis detection rather

993
00:36:22,820 --> 00:36:26,330
difficult you<font color="#CCCCCC"> know you can just you can</font>

994
00:36:24,530 --> 00:36:29,180
declare<font color="#E5E5E5"> this you know</font><font color="#CCCCCC"> I'm going</font><font color="#E5E5E5"> to say</font>

995
00:36:26,330 --> 00:36:31,970
that this<font color="#E5E5E5"> is you know a a heading 6 tag</font>

996
00:36:29,180 --> 00:36:33,500
and h6 which is a pretty wimpy tag when

997
00:36:31,970 --> 00:36:36,259
it comes to how it's actually rendered

998
00:36:33,500 --> 00:36:38,450
but you know I could style that so it's

999
00:36:36,260 --> 00:36:40,150
big<font color="#CCCCCC"> freakin flashing red letters and I</font>

1000
00:36:38,450 --> 00:36:43,129
can declare that style multiple places

1001
00:36:40,150 --> 00:36:44,690
you know in line I can I can<font color="#CCCCCC"> have an</font>

1002
00:36:43,130 --> 00:36:46,750
<font color="#E5E5E5">external style sheet I can declare top</font>

1003
00:36:44,690 --> 00:36:49,390
of the page I<font color="#E5E5E5"> can you know have a style</font>

1004
00:36:46,750 --> 00:36:51,619
attribute on that one particular<font color="#CCCCCC"> tag</font>

1005
00:36:49,390 --> 00:36:53,990
worse browsers are really bad at

1006
00:36:51,619 --> 00:36:55,640
forgiving badly formatted cascading

1007
00:36:53,990 --> 00:36:58,640
style sheets back when I gave the

1008
00:36:55,640 --> 00:37:02,180
presentation at orochon on fishing I had

1009
00:36:58,640 --> 00:37:04,848
to actually write a HTML parser in Java

1010
00:37:02,180 --> 00:37:06,770
which is not it's great if people are

1011
00:37:04,849 --> 00:37:08,770
following a standard but malformed<font color="#E5E5E5"> HTML</font>

1012
00:37:06,770 --> 00:37:11,300
is really<font color="#CCCCCC"> freaking hard to parse and</font>

1013
00:37:08,770 --> 00:37:13,070
parsing cascading style sheets because

1014
00:37:11,300 --> 00:37:15,520
it can<font color="#CCCCCC"> be malformed and browsers are</font>

1015
00:37:13,070 --> 00:37:18,390
still deal with it is not trivial either

1016
00:37:15,520 --> 00:37:21,410
and again lazy

1017
00:37:18,390 --> 00:37:23,700
<font color="#E5E5E5">Oh like I said</font><font color="#CCCCCC"> you can do it in line</font>

1018
00:37:21,410 --> 00:37:25,078
also<font color="#E5E5E5"> bad words are relatively static</font>

1019
00:37:23,700 --> 00:37:27,089
here's something that I learned<font color="#E5E5E5"> you know</font>

1020
00:37:25,079 --> 00:37:28,799
regardless<font color="#CCCCCC"> of wet website you're</font>

1021
00:37:27,089 --> 00:37:31,680
visiting hardly anyone reads privacy

1022
00:37:28,799 --> 00:37:34,319
HTML so you know some of the things<font color="#CCCCCC"> like</font>

1023
00:37:31,680 --> 00:37:36,660
I said you might<font color="#CCCCCC"> have to remove jobs or</font>

1024
00:37:34,319 --> 00:37:39,450
insert hardware porn into your good word

1025
00:37:36,660 --> 00:37:40,558
list<font color="#E5E5E5"> something like that good words can</font>

1026
00:37:39,450 --> 00:37:42,660
vary from site to site so you gotta

1027
00:37:40,559 --> 00:37:44,279
tweak those and<font color="#E5E5E5"> also you don't want</font><font color="#CCCCCC"> to</font>

1028
00:37:42,660 --> 00:37:45,930
score links<font color="#CCCCCC"> whose target is a</font><font color="#E5E5E5"> current</font>

1029
00:37:44,279 --> 00:37:48,150
<font color="#E5E5E5">page this was kind of interesting</font>

1030
00:37:45,930 --> 00:37:49,348
<font color="#E5E5E5">O'Reilly actually their new web design</font>

1031
00:37:48,150 --> 00:37:51,630
it's a good example a lot<font color="#E5E5E5"> of times</font>

1032
00:37:49,349 --> 00:37:52,859
people have like a bunch<font color="#E5E5E5"> of tabs amazon</font>

1033
00:37:51,630 --> 00:37:54,480
used to have this now they've got like

1034
00:37:52,859 --> 00:37:56,220
three tags but they used to have like 50

1035
00:37:54,480 --> 00:37:57,750
tags across the top<font color="#CCCCCC"> of the page</font><font color="#E5E5E5"> you guys</font>

1036
00:37:56,220 --> 00:38:00,029
remember that<font color="#E5E5E5"> like books electronics all</font>

1037
00:37:57,750 --> 00:38:01,349
that junk typically the page are

1038
00:38:00,029 --> 00:38:03,779
currently on if they have that type of

1039
00:38:01,349 --> 00:38:05,339
layout that tab will be bolded it will

1040
00:38:03,779 --> 00:38:07,289
be larger than the other showing oh

1041
00:38:05,339 --> 00:38:08,578
you're currently at this page well

1042
00:38:07,289 --> 00:38:11,039
<font color="#E5E5E5">obviously if you're currently at that</font>

1043
00:38:08,579 --> 00:38:13,980
page you know you you need to<font color="#E5E5E5"> say all</font>

1044
00:38:11,039 --> 00:38:15,660
right well<font color="#CCCCCC"> if I see a link if i have a</font>

1045
00:38:13,980 --> 00:38:17,700
link<font color="#E5E5E5"> whose target is the current page</font>

1046
00:38:15,660 --> 00:38:20,700
don't bother scoring it because chances

1047
00:38:17,700 --> 00:38:22,470
are<font color="#E5E5E5"> it's artificially emphasized to try</font>

1048
00:38:20,700 --> 00:38:26,308
to<font color="#E5E5E5"> show the user hey this is</font><font color="#CCCCCC"> the pager</font>

1049
00:38:22,470 --> 00:38:29,640
on also a table of<font color="#CCCCCC"> contents style uh</font>

1050
00:38:26,309 --> 00:38:31,559
linked lists or hard to<font color="#CCCCCC"> you oh yes so</font>

1051
00:38:29,640 --> 00:38:33,750
that was the other thing<font color="#E5E5E5"> the o'reilly</font>

1052
00:38:31,559 --> 00:38:35,579
page we had that table of style table of

1053
00:38:33,750 --> 00:38:37,019
contents down the right side it was a

1054
00:38:35,579 --> 00:38:39,869
<font color="#E5E5E5">bunch of links but they were all</font><font color="#CCCCCC"> very</font>

1055
00:38:37,019 --> 00:38:41,669
small and not very long and so having to

1056
00:38:39,869 --> 00:38:44,519
deal with table of contents all those

1057
00:38:41,670 --> 00:38:47,150
links didn't score as high as say the

1058
00:38:44,519 --> 00:38:49,500
you know the picture for attack or the

1059
00:38:47,150 --> 00:38:51,150
<font color="#CCCCCC">safari links and things like that even</font>

1060
00:38:49,500 --> 00:38:52,799
<font color="#CCCCCC">though it's a table</font><font color="#E5E5E5"> of contents</font><font color="#CCCCCC"> and it's</font>

1061
00:38:51,150 --> 00:38:54,660
very likely a user will immediately go

1062
00:38:52,799 --> 00:38:56,640
<font color="#CCCCCC">to the table of</font><font color="#E5E5E5"> contents simply because</font>

1063
00:38:54,660 --> 00:38:57,690
<font color="#CCCCCC">they tend to be smaller so i never</font>

1064
00:38:56,640 --> 00:38:59,490
<font color="#E5E5E5">really came up with a good way of</font>

1065
00:38:57,690 --> 00:39:04,319
dealing with table of contents style

1066
00:38:59,490 --> 00:39:06,180
linked lists so um are you<font color="#CCCCCC"> guys good am</font>

1067
00:39:04,319 --> 00:39:09,808
i boring<font color="#CCCCCC"> i can't tell feedback are we</font>

1068
00:39:06,180 --> 00:39:12,240
good enjoy it<font color="#CCCCCC"> all right</font><font color="#E5E5E5"> fantastic</font><font color="#CCCCCC"> i I</font>

1069
00:39:09,809 --> 00:39:14,190
see that<font color="#CCCCCC"> a give</font><font color="#E5E5E5"> me the thumbs up and I</font>

1070
00:39:12,240 --> 00:39:18,359
know you're a hard man please so all

1071
00:39:14,190 --> 00:39:20,009
right so most people what I went ahead

1072
00:39:18,359 --> 00:39:22,259
to do how the<font color="#CCCCCC"> Cobra crawler works is I</font>

1073
00:39:20,009 --> 00:39:23,460
used a priority queue of pending links

1074
00:39:22,259 --> 00:39:26,849
instead of a regular cue and the

1075
00:39:23,460 --> 00:39:28,740
priority queue was sorted so that you

1076
00:39:26,849 --> 00:39:30,750
know the lower your link score was<font color="#CCCCCC"> the</font>

1077
00:39:28,740 --> 00:39:32,160
farther down the queue you would be so

1078
00:39:30,750 --> 00:39:34,049
technically

1079
00:39:32,160 --> 00:39:35,848
whatever link is at the top of the queue

1080
00:39:34,049 --> 00:39:40,140
is the most popular link that I haven't

1081
00:39:35,849 --> 00:39:41,460
<font color="#E5E5E5">visited</font><font color="#CCCCCC"> yet and so when inserting into</font>

1082
00:39:40,140 --> 00:39:43,920
the queue the first thing<font color="#E5E5E5"> I do is check</font>

1083
00:39:41,460 --> 00:39:46,200
to see if it exists if so I some the

1084
00:39:43,920 --> 00:39:47,520
link score of the what I found<font color="#E5E5E5"> what I</font>

1085
00:39:46,200 --> 00:39:49,200
want to insert and what's already there

1086
00:39:47,520 --> 00:39:50,520
now it's<font color="#CCCCCC"> interesting this is</font><font color="#E5E5E5"> something</font>

1087
00:39:49,200 --> 00:39:52,169
<font color="#E5E5E5">else I learned I originally thought I'd</font>

1088
00:39:50,520 --> 00:39:54,299
just average them but<font color="#E5E5E5"> that actually</font>

1089
00:39:52,170 --> 00:39:57,089
<font color="#E5E5E5">hurts it because consider if I had on</font>

1090
00:39:54,299 --> 00:39:59,400
one page a very big image so it had a

1091
00:39:57,089 --> 00:40:01,680
very high popularity score linking to

1092
00:39:59,400 --> 00:40:03,599
say you know shop here calm and then I

1093
00:40:01,680 --> 00:40:05,399
<font color="#CCCCCC">and that had a link score of say 100 and</font>

1094
00:40:03,599 --> 00:40:07,380
then on<font color="#CCCCCC"> another page</font><font color="#E5E5E5"> I found a link to</font>

1095
00:40:05,400 --> 00:40:09,240
shop and that<font color="#E5E5E5"> was just a small little</font>

1096
00:40:07,380 --> 00:40:10,650
text word that said shop and<font color="#CCCCCC"> that had a</font>

1097
00:40:09,240 --> 00:40:12,839
popularity score of like 10 well if I

1098
00:40:10,650 --> 00:40:14,520
average them I'm actually losing the

1099
00:40:12,839 --> 00:40:17,490
overall popularity of the link so you

1100
00:40:14,520 --> 00:40:19,380
<font color="#E5E5E5">have to sum them all so the the issues</font>

1101
00:40:17,490 --> 00:40:21,660
of link equality with multiple threads

1102
00:40:19,380 --> 00:40:24,140
was interesting you know when you<font color="#E5E5E5"> start</font>

1103
00:40:21,660 --> 00:40:25,920
getting lots of URLs have the same

1104
00:40:24,140 --> 00:40:28,379
popularity score how do you make a

1105
00:40:25,920 --> 00:40:30,569
<font color="#E5E5E5">decision and we'll talk about that in a</font>

1106
00:40:28,380 --> 00:40:32,180
little bit so as I said the front of the

1107
00:40:30,569 --> 00:40:34,470
queue is always the<font color="#CCCCCC"> most popular link</font>

1108
00:40:32,180 --> 00:40:38,700
that the crawler has seen but we haven't

1109
00:40:34,470 --> 00:40:40,649
visited yet so acting like a human well

1110
00:40:38,700 --> 00:40:42,598
a human needs time to process what the

1111
00:40:40,650 --> 00:40:43,740
browser presents so each crawling threat

1112
00:40:42,599 --> 00:40:44,910
of the covert crawler must wait a

1113
00:40:43,740 --> 00:40:46,229
certain amount of time before it

1114
00:40:44,910 --> 00:40:47,879
requests a new page I mean if I'm

1115
00:40:46,230 --> 00:40:50,010
requesting a million a second or you

1116
00:40:47,880 --> 00:40:51,599
<font color="#E5E5E5">know more realistically</font><font color="#CCCCCC"> ten pages a</font>

1117
00:40:50,010 --> 00:40:53,430
second no human is going to be

1118
00:40:51,599 --> 00:40:55,920
requesting Ten HTML pages a second

1119
00:40:53,430 --> 00:40:57,990
unless you you know like open up a tab

1120
00:40:55,920 --> 00:40:59,369
bookmark or something in Firefox but you

1121
00:40:57,990 --> 00:41:02,669
most like we don't have<font color="#E5E5E5"> ten bookmarks</font>

1122
00:40:59,369 --> 00:41:04,319
all of the same you know website unless

1123
00:41:02,670 --> 00:41:09,029
you hear bookmarking your<font color="#E5E5E5"> hard butter</font>

1124
00:41:04,319 --> 00:41:10,770
porn George I<font color="#E5E5E5"> don't know so obviously</font>

1125
00:41:09,029 --> 00:41:12,779
each crawling<font color="#E5E5E5"> thread has to wait and now</font>

1126
00:41:10,770 --> 00:41:14,038
this is interesting I weight based on

1127
00:41:12,779 --> 00:41:16,140
the action the size of the rendered

1128
00:41:14,039 --> 00:41:18,059
content so what I do is I take the HTML

1129
00:41:16,140 --> 00:41:20,190
page I strip out all the tags and I say

1130
00:41:18,059 --> 00:41:22,230
how<font color="#E5E5E5"> much content is actually here being</font>

1131
00:41:20,190 --> 00:41:24,990
presented ignoring images which of

1132
00:41:22,230 --> 00:41:26,609
course could be huge<font color="#E5E5E5"> and I just wait and</font>

1133
00:41:24,990 --> 00:41:28,500
I say well how how quickly can most

1134
00:41:26,609 --> 00:41:31,470
people read in terms of words a second

1135
00:41:28,500 --> 00:41:33,420
and so that's how<font color="#CCCCCC"> long I wait for all so</font>

1136
00:41:31,470 --> 00:41:35,399
I figured<font color="#E5E5E5"> this all out by using by</font>

1137
00:41:33,420 --> 00:41:37,140
visiting netcraft and reading some

1138
00:41:35,400 --> 00:41:39,299
interesting stuff on search engine

1139
00:41:37,140 --> 00:41:42,629
optimization about how long an average

1140
00:41:39,299 --> 00:41:44,220
user will read a particular HTML page so

1141
00:41:42,630 --> 00:41:45,840
<font color="#E5E5E5">actually you can quick these up because</font>

1142
00:41:44,220 --> 00:41:47,520
most people are very click on over

1143
00:41:45,840 --> 00:41:49,350
not what<font color="#E5E5E5"> I want close click so people do</font>

1144
00:41:47,520 --> 00:41:50,970
navigate pretty quickly but<font color="#E5E5E5"> you know</font>

1145
00:41:49,350 --> 00:41:53,580
it's certainly not 10 requests a second

1146
00:41:50,970 --> 00:41:55,049
<font color="#E5E5E5">quickly also</font><font color="#CCCCCC"> this is pretty cool</font><font color="#E5E5E5"> I gave</font>

1147
00:41:53,580 --> 00:41:57,630
the different threads personalities<font color="#CCCCCC"> I</font>

1148
00:41:55,050 --> 00:41:59,400
would i<font color="#E5E5E5"> would keep track of all the HTML</font>

1149
00:41:57,630 --> 00:42:01,590
pages i visited and I'd keep a word

1150
00:41:59,400 --> 00:42:03,990
count and I would determine I would try

1151
00:42:01,590 --> 00:42:06,180
to<font color="#E5E5E5"> deduce what is this page about this</font>

1152
00:42:03,990 --> 00:42:07,950
page seems to be about<font color="#CCCCCC"> apple or this</font>

1153
00:42:06,180 --> 00:42:09,810
page seems to be about Intel or

1154
00:42:07,950 --> 00:42:12,750
something like that and so I<font color="#E5E5E5"> would give</font>

1155
00:42:09,810 --> 00:42:14,340
each crawler a of the most<font color="#E5E5E5"> popular words</font>

1156
00:42:12,750 --> 00:42:15,990
I found on that<font color="#E5E5E5"> site I would give each</font>

1157
00:42:14,340 --> 00:42:18,720
crawler threat as i spawned it out the

1158
00:42:15,990 --> 00:42:21,089
<font color="#CCCCCC">keyword hey if you see if you see a page</font>

1159
00:42:18,720 --> 00:42:22,439
that contains<font color="#E5E5E5"> apple or firewire you're</font>

1160
00:42:21,090 --> 00:42:24,330
going to spend longer time reading that

1161
00:42:22,440 --> 00:42:26,010
because you crawler thread you're going

1162
00:42:24,330 --> 00:42:27,930
to pretend to<font color="#E5E5E5"> be an apple fanatic or</font>

1163
00:42:26,010 --> 00:42:29,490
something like that so the crawler will

1164
00:42:27,930 --> 00:42:31,169
actually throttle itself and the

1165
00:42:29,490 --> 00:42:33,209
different threads will react differently

1166
00:42:31,170 --> 00:42:34,500
to the same page again just trying to

1167
00:42:33,210 --> 00:42:36,150
throw entropy in it to make it<font color="#E5E5E5"> all</font>

1168
00:42:34,500 --> 00:42:39,540
harder for the people<font color="#CCCCCC"> looking at the</font>

1169
00:42:36,150 --> 00:42:42,120
logs so obviously on pages that have

1170
00:42:39,540 --> 00:42:43,860
keywords I look longer other pages I

1171
00:42:42,120 --> 00:42:45,390
quick leave it leave those pages because

1172
00:42:43,860 --> 00:42:48,060
that crawl threads not interested in

1173
00:42:45,390 --> 00:42:51,089
those all right anybody have any

1174
00:42:48,060 --> 00:42:52,710
questions we're good so far this was

1175
00:42:51,090 --> 00:42:53,910
going<font color="#E5E5E5"> to get kind of complicated kind of</font>

1176
00:42:52,710 --> 00:42:55,560
quickly so<font color="#CCCCCC"> I warn you in advance</font>

1177
00:42:53,910 --> 00:42:57,359
hopefully the graphs will help clear

1178
00:42:55,560 --> 00:43:00,779
things up but<font color="#E5E5E5"> this is how you actually</font>

1179
00:42:57,360 --> 00:43:02,880
spread a crawl over multiple IPS but

1180
00:43:00,780 --> 00:43:05,330
also maintain things like session state

1181
00:43:02,880 --> 00:43:08,330
and cookies and it gets kind<font color="#E5E5E5"> of nasty</font>

1182
00:43:05,330 --> 00:43:08,330
yes

1183
00:43:13,400 --> 00:43:19,950
<font color="#CCCCCC">okay their ways of what I mean you could</font>

1184
00:43:17,490 --> 00:43:22,620
<font color="#CCCCCC">just say here is the page what you could</font>

1185
00:43:19,950 --> 00:43:24,210
do is say here are the pages that's

1186
00:43:22,620 --> 00:43:25,500
interesting I don't have a mechanism in

1187
00:43:24,210 --> 00:43:27,090
it currently to do that but<font color="#E5E5E5"> what you</font>

1188
00:43:25,500 --> 00:43:28,980
could do is say look here's the<font color="#E5E5E5"> site</font>

1189
00:43:27,090 --> 00:43:32,250
I've already crawled it before so I have

1190
00:43:28,980 --> 00:43:34,380
a is let me bookmark these pages now

1191
00:43:32,250 --> 00:43:36,120
when now you know on a weekly basis i

1192
00:43:34,380 --> 00:43:37,830
want you to covertly crawl this website

1193
00:43:36,120 --> 00:43:40,410
but once you've hit these pages you can

1194
00:43:37,830 --> 00:43:42,120
stop so it will say you're only

1195
00:43:40,410 --> 00:43:43,470
interested in 10 pages well the covert

1196
00:43:42,120 --> 00:43:45,480
crawler on<font color="#E5E5E5"> whole probably request</font>

1197
00:43:43,470 --> 00:43:47,040
something like 70 or 80 pages but the

1198
00:43:45,480 --> 00:43:49,380
rest of that's just noise all you're

1199
00:43:47,040 --> 00:43:51,029
<font color="#CCCCCC">really interested in are those</font><font color="#E5E5E5"> 10 with</font>

1200
00:43:49,380 --> 00:43:52,470
it gets those tens it'll throttle all

1201
00:43:51,030 --> 00:43:54,270
the other threads down that'd<font color="#CCCCCC"> be a cool</font>

1202
00:43:52,470 --> 00:43:57,089
feature that's<font color="#E5E5E5"> certainly doable it</font>

1203
00:43:54,270 --> 00:44:00,210
doesn't currently exist but yeah you

1204
00:43:57,090 --> 00:44:01,950
could do that so obviously we're going

1205
00:44:00,210 --> 00:44:03,630
<font color="#E5E5E5">to be leveraging open proxies we have to</font>

1206
00:44:01,950 --> 00:44:04,620
spread this across multiple<font color="#CCCCCC"> IPS and the</font>

1207
00:44:03,630 --> 00:44:06,870
last time<font color="#E5E5E5"> I checked I didn't have a</font>

1208
00:44:04,620 --> 00:44:10,830
<font color="#CCCCCC">Class A so I had to go find</font><font color="#E5E5E5"> people's</font>

1209
00:44:06,870 --> 00:44:12,359
open proxies this is a possible weakness

1210
00:44:10,830 --> 00:44:14,430
of the covert crawler surely funny

1211
00:44:12,360 --> 00:44:16,470
there's a guide spy dynamics named Aaron

1212
00:44:14,430 --> 00:44:18,120
and he developed a tool called log alert

1213
00:44:16,470 --> 00:44:19,680
which was long before I got to the

1214
00:44:18,120 --> 00:44:20,970
company you could<font color="#E5E5E5"> basically feed it a</font>

1215
00:44:19,680 --> 00:44:23,669
server log and it would try<font color="#CCCCCC"> to tell you</font>

1216
00:44:20,970 --> 00:44:25,890
crazy<font color="#E5E5E5"> stuff was happening like a lot of</font>

1217
00:44:23,670 --> 00:44:27,930
requests for resources without a request

1218
00:44:25,890 --> 00:44:30,299
for the HTML page that links<font color="#CCCCCC"> to those</font>

1219
00:44:27,930 --> 00:44:31,890
resources things like<font color="#E5E5E5"> that and it would</font>

1220
00:44:30,300 --> 00:44:33,840
<font color="#CCCCCC">actually try</font><font color="#E5E5E5"> to find out whether you</font>

1221
00:44:31,890 --> 00:44:35,670
were being recon door not and so he and

1222
00:44:33,840 --> 00:44:37,530
<font color="#E5E5E5">I kind of went</font><font color="#CCCCCC"> through a good</font><font color="#E5E5E5"> to weak</font>

1223
00:44:35,670 --> 00:44:39,330
cold war where he'd said like well I'll

1224
00:44:37,530 --> 00:44:41,550
do this and I'd go home buttering<font color="#E5E5E5"> a</font>

1225
00:44:39,330 --> 00:44:43,230
damned air and fire and I'll come<font color="#E5E5E5"> back</font>

1226
00:44:41,550 --> 00:44:44,940
the next day go over the whiteboard and

1227
00:44:43,230 --> 00:44:46,770
big smile on<font color="#E5E5E5"> my face be like ha what</font>

1228
00:44:44,940 --> 00:44:48,780
about this and he'd you<font color="#CCCCCC"> know a lot of</font>

1229
00:44:46,770 --> 00:44:50,370
back and forth and basically the only

1230
00:44:48,780 --> 00:44:52,410
thing we were able to deduce with the

1231
00:44:50,370 --> 00:44:55,080
final design of covert crawler was the

1232
00:44:52,410 --> 00:44:56,879
weakness of using open proxies the

1233
00:44:55,080 --> 00:44:58,830
<font color="#E5E5E5">witness of Cobra crawler is were using</font>

1234
00:44:56,880 --> 00:45:01,110
we're leaving<font color="#CCCCCC"> the IP addresses of known</font>

1235
00:44:58,830 --> 00:45:02,190
proxies in the server logs and so that

1236
00:45:01,110 --> 00:45:03,780
was one of<font color="#CCCCCC"> the</font><font color="#E5E5E5"> things that his tool</font>

1237
00:45:02,190 --> 00:45:05,610
would do is it would take the IP

1238
00:45:03,780 --> 00:45:09,210
addresses<font color="#CCCCCC"> and then check a couple of the</font>

1239
00:45:05,610 --> 00:45:10,560
known websites that list proxies and see

1240
00:45:09,210 --> 00:45:14,640
if<font color="#E5E5E5"> someone was visiting you through a</font>

1241
00:45:10,560 --> 00:45:16,680
proxy also the choice of proxies is very

1242
00:45:14,640 --> 00:45:18,390
important here you know obviously if

1243
00:45:16,680 --> 00:45:19,830
we're crawling a US bank<font color="#E5E5E5"> looking for</font>

1244
00:45:18,390 --> 00:45:21,839
vulnerabilities we only want to<font color="#E5E5E5"> use</font>

1245
00:45:19,830 --> 00:45:23,610
proxies in the<font color="#CCCCCC"> US possibly some from</font>

1246
00:45:21,840 --> 00:45:25,350
Western Europe there's a wonderful<font color="#E5E5E5"> thing</font>

1247
00:45:23,610 --> 00:45:25,980
called IP to country it's a giant

1248
00:45:25,350 --> 00:45:28,618
freaking

1249
00:45:25,980 --> 00:45:30,480
comma separated value file that gives

1250
00:45:28,619 --> 00:45:33,240
you basically IP number ranges and the

1251
00:45:30,480 --> 00:45:35,190
resulting country and so I use<font color="#CCCCCC"> that but</font>

1252
00:45:33,240 --> 00:45:36,509
obviously<font color="#CCCCCC"> you want</font><font color="#E5E5E5"> to minimize the</font>

1253
00:45:35,190 --> 00:45:38,369
number of proxies that<font color="#CCCCCC"> announce their</font>

1254
00:45:36,510 --> 00:45:40,680
proxies normally when you send an HTTP

1255
00:45:38,369 --> 00:45:42,810
request through an open proxy it sticks

1256
00:45:40,680 --> 00:45:45,509
all sorts of HTTP headers in there you

1257
00:45:42,810 --> 00:45:47,190
<font color="#CCCCCC">know via max forwarded for</font><font color="#E5E5E5"> max forwards</font>

1258
00:45:45,510 --> 00:45:48,720
<font color="#E5E5E5">I mean all this stuff that</font><font color="#CCCCCC"> you don't</font>

1259
00:45:47,190 --> 00:45:51,690
want the resulting site to know your

1260
00:45:48,720 --> 00:45:54,330
proxy so I would I actually built a

1261
00:45:51,690 --> 00:45:58,710
little<font color="#E5E5E5"> app that would grab a list of</font>

1262
00:45:54,330 --> 00:46:00,210
proxies and Oh basically connect back<font color="#CCCCCC"> to</font>

1263
00:45:58,710 --> 00:46:02,640
itself through a proxy and<font color="#E5E5E5"> look at the</font>

1264
00:46:00,210 --> 00:46:04,560
HTTP headers and kind<font color="#E5E5E5"> of rate you know</font>

1265
00:46:02,640 --> 00:46:06,390
whether<font color="#E5E5E5"> it's passing whether it's</font>

1266
00:46:04,560 --> 00:46:08,009
announcing<font color="#E5E5E5"> it's a proxy or not also</font>

1267
00:46:06,390 --> 00:46:10,589
<font color="#E5E5E5">sometimes it's not so bad to admit</font>

1268
00:46:08,010 --> 00:46:12,420
you're a proxy I mean the<font color="#CCCCCC"> end to end</font>

1269
00:46:10,590 --> 00:46:14,790
<font color="#CCCCCC">Internet as we know it is doesn't</font><font color="#E5E5E5"> exist</font>

1270
00:46:12,420 --> 00:46:16,890
anymore I mean<font color="#CCCCCC"> NAT proxies these are</font>

1271
00:46:14,790 --> 00:46:19,020
commonplace and so it actually would

1272
00:46:16,890 --> 00:46:21,600
look a little suspicious if all<font color="#CCCCCC"> of my</font>

1273
00:46:19,020 --> 00:46:23,430
traffic never came from<font color="#E5E5E5"> a proxy so</font>

1274
00:46:21,600 --> 00:46:25,710
sometimes<font color="#E5E5E5"> using a proxy that announces</font>

1275
00:46:23,430 --> 00:46:29,100
its a proxy with HTTP headers isn't such

1276
00:46:25,710 --> 00:46:30,660
a big deal<font color="#E5E5E5"> so one of the big</font><font color="#CCCCCC"> things</font><font color="#E5E5E5"> I</font>

1277
00:46:29,100 --> 00:46:32,609
<font color="#E5E5E5">noticed pretty early on when you've got</font>

1278
00:46:30,660 --> 00:46:34,080
multiple threads all working together

1279
00:46:32,609 --> 00:46:36,299
you have whether it's<font color="#E5E5E5"> called the deep</font>

1280
00:46:34,080 --> 00:46:38,100
link problem basically<font color="#CCCCCC"> I've got to crawl</font>

1281
00:46:36,300 --> 00:46:40,260
threads and here's a very simple website

1282
00:46:38,100 --> 00:46:42,060
and I've already visited these sites

1283
00:46:40,260 --> 00:46:43,650
blue is already visited these sites and

1284
00:46:42,060 --> 00:46:46,830
<font color="#E5E5E5">so I go ahead and I want to spawn</font>

1285
00:46:43,650 --> 00:46:48,750
another crawl thread and in my queue of

1286
00:46:46,830 --> 00:46:51,359
stuff to crawl i still have<font color="#CCCCCC"> c and d and</font>

1287
00:46:48,750 --> 00:46:54,270
<font color="#CCCCCC">f well if</font><font color="#E5E5E5"> i just out of the blue send a</font>

1288
00:46:51,359 --> 00:46:55,170
request for<font color="#E5E5E5"> f from this crawl thread</font>

1289
00:46:54,270 --> 00:46:57,630
it's going to be like where the<font color="#E5E5E5"> hell</font>

1290
00:46:55,170 --> 00:46:59,490
that come from<font color="#E5E5E5"> because really users</font>

1291
00:46:57,630 --> 00:47:01,740
navigate to deep linked web pages in

1292
00:46:59,490 --> 00:47:03,359
three ways they navigated there by

1293
00:47:01,740 --> 00:47:05,640
clicking<font color="#CCCCCC"> through a series of other pages</font>

1294
00:47:03,359 --> 00:47:07,590
they bookmark the page in<font color="#E5E5E5"> which case</font>

1295
00:47:05,640 --> 00:47:09,839
your HTTP<font color="#CCCCCC"> requests won't have a referer</font>

1296
00:47:07,590 --> 00:47:11,880
header or they followed a link from<font color="#E5E5E5"> a</font>

1297
00:47:09,840 --> 00:47:13,650
search engine or something directly deep

1298
00:47:11,880 --> 00:47:16,140
into your page in which case you'll have

1299
00:47:13,650 --> 00:47:18,420
a refer from a search engine so

1300
00:47:16,140 --> 00:47:21,150
obviously<font color="#CCCCCC"> I can't replicate a bookmark</font>

1301
00:47:18,420 --> 00:47:23,490
this is<font color="#CCCCCC"> also you know this</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> very much</font>

1302
00:47:21,150 --> 00:47:25,440
not the norm most people don't bookmark

1303
00:47:23,490 --> 00:47:27,419
deep parts of your site that happened to

1304
00:47:25,440 --> 00:47:28,650
talk about<font color="#E5E5E5"> a particular product so for</font>

1305
00:47:27,420 --> 00:47:30,869
the most<font color="#E5E5E5"> part I couldn't use that I</font>

1306
00:47:28,650 --> 00:47:33,359
mainly had to focus on navigating to a

1307
00:47:30,869 --> 00:47:35,220
page from other internal pages and also

1308
00:47:33,359 --> 00:47:36,890
some doing some fun search engine

1309
00:47:35,220 --> 00:47:39,709
spoofing stuff which I'll talk about men

1310
00:47:36,890 --> 00:47:41,060
so if<font color="#CCCCCC"> green</font><font color="#E5E5E5"> wants to make a request I'm</font>

1311
00:47:39,710 --> 00:47:43,520
spawning a new thread and I want to<font color="#CCCCCC"> make</font>

1312
00:47:41,060 --> 00:47:47,350
<font color="#CCCCCC">a request for</font><font color="#E5E5E5"> F</font><font color="#CCCCCC"> green has</font><font color="#E5E5E5"> to first make</font>

1313
00:47:43,520 --> 00:47:49,670
a request for that that that and then<font color="#E5E5E5"> F</font>

1314
00:47:47,350 --> 00:47:51,049
to try to hide the fact and that's

1315
00:47:49,670 --> 00:47:52,520
that's when I start saying the covert

1316
00:47:51,050 --> 00:47:54,710
crawler starts making lots<font color="#E5E5E5"> of requests</font>

1317
00:47:52,520 --> 00:47:55,970
it doesn't have<font color="#E5E5E5"> to make because it's</font>

1318
00:47:54,710 --> 00:47:59,090
trying to mask what it's really

1319
00:47:55,970 --> 00:48:01,720
accessing so obviously<font color="#E5E5E5"> green requests a</font>

1320
00:47:59,090 --> 00:48:04,340
page has never seen that's a problem so

1321
00:48:01,720 --> 00:48:05,990
like I said I p is that make requests

1322
00:48:04,340 --> 00:48:07,490
out of blue look suspicious the covert

1323
00:48:05,990 --> 00:48:09,439
crawler never makes a deep link<font color="#E5E5E5"> request</font>

1324
00:48:07,490 --> 00:48:11,990
from an IP address<font color="#E5E5E5"> that has no business</font>

1325
00:48:09,440 --> 00:48:13,730
making that request so what we do is

1326
00:48:11,990 --> 00:48:15,859
instead<font color="#CCCCCC"> of telling our crawl threads</font>

1327
00:48:13,730 --> 00:48:17,360
traditionally the way a multi-threaded

1328
00:48:15,860 --> 00:48:19,250
crawler will work you'll have a control

1329
00:48:17,360 --> 00:48:21,830
program and it will simply tell a thread

1330
00:48:19,250 --> 00:48:25,010
don't make a request for this URL and

1331
00:48:21,830 --> 00:48:26,900
<font color="#CCCCCC">then the crawl thread will make a</font>

1332
00:48:25,010 --> 00:48:29,450
request for that URL well shit we can't

1333
00:48:26,900 --> 00:48:32,510
do<font color="#CCCCCC"> that so what we do instead is we say</font>

1334
00:48:29,450 --> 00:48:34,910
go get<font color="#E5E5E5"> this URL I don't care what</font><font color="#CCCCCC"> you</font>

1335
00:48:32,510 --> 00:48:37,010
have to do to get it but<font color="#E5E5E5"> ultimately I</font>

1336
00:48:34,910 --> 00:48:40,399
<font color="#E5E5E5">want you to get the contents of this URL</font>

1337
00:48:37,010 --> 00:48:41,960
and the way we<font color="#CCCCCC"> have the</font><font color="#E5E5E5"> crawler the each</font>

1338
00:48:40,400 --> 00:48:44,030
curl thread know how to do<font color="#CCCCCC"> that is we</font>

1339
00:48:41,960 --> 00:48:45,530
keep a shared graph that represents the

1340
00:48:44,030 --> 00:48:47,120
entire website you know this is where

1341
00:48:45,530 --> 00:48:49,970
some of that<font color="#E5E5E5"> Google knowledge comes in I</font>

1342
00:48:47,120 --> 00:48:52,490
mean<font color="#E5E5E5"> Google said ah the</font><font color="#CCCCCC"> Internet it's</font>

1343
00:48:49,970 --> 00:48:55,160
<font color="#E5E5E5">really just a bunch of nodes and each</font>

1344
00:48:52,490 --> 00:48:57,500
node has a link to other nodes which is

1345
00:48:55,160 --> 00:48:58,910
an edge<font color="#CCCCCC"> and a graph and graph theory is</font>

1346
00:48:57,500 --> 00:49:01,160
very<font color="#CCCCCC"> well defined there are algorithms</font>

1347
00:48:58,910 --> 00:49:03,410
that let you find the shortest distance

1348
00:49:01,160 --> 00:49:05,120
between one node and another<font color="#E5E5E5"> and so we</font>

1349
00:49:03,410 --> 00:49:07,640
think<font color="#CCCCCC"> of this as a graph problem it</font>

1350
00:49:05,120 --> 00:49:09,380
<font color="#E5E5E5">really becomes simple basically all the</font>

1351
00:49:07,640 --> 00:49:12,440
edges are unidirectional there are

1352
00:49:09,380 --> 00:49:14,210
cycles you know page a complete to page

1353
00:49:12,440 --> 00:49:16,970
B which points to page see which points

1354
00:49:14,210 --> 00:49:19,910
back<font color="#CCCCCC"> to page a each node is an HTML page</font>

1355
00:49:16,970 --> 00:49:21,290
and each edge is a hyperlink so what

1356
00:49:19,910 --> 00:49:23,480
we're doing<font color="#CCCCCC"> here is the crawl thread</font>

1357
00:49:21,290 --> 00:49:25,190
knows its current location and it knows

1358
00:49:23,480 --> 00:49:27,710
the content of all the pages<font color="#CCCCCC"> it's</font>

1359
00:49:25,190 --> 00:49:29,300
visited and so it used basically when

1360
00:49:27,710 --> 00:49:32,060
the crow thread is told hey go to this

1361
00:49:29,300 --> 00:49:35,360
URL it consults the<font color="#E5E5E5"> graph and says hey</font>

1362
00:49:32,060 --> 00:49:38,390
graph I'm here find me<font color="#E5E5E5"> a path to this</font>

1363
00:49:35,360 --> 00:49:41,240
URL and then<font color="#E5E5E5"> it goes ahead and makes the</font>

1364
00:49:38,390 --> 00:49:44,480
request for<font color="#E5E5E5"> the pages along the way and</font>

1365
00:49:41,240 --> 00:49:45,950
so it gets<font color="#E5E5E5"> the desired resource so like</font>

1366
00:49:44,480 --> 00:49:48,590
right<font color="#E5E5E5"> here if green</font><font color="#CCCCCC"> and blue are</font><font color="#E5E5E5"> my</font>

1367
00:49:45,950 --> 00:49:50,029
<font color="#CCCCCC">crawl threads and green is at E Green is</font>

1368
00:49:48,590 --> 00:49:50,299
<font color="#E5E5E5">right or blue is right here and green is</font>

1369
00:49:50,030 --> 00:49:53,749
that

1370
00:49:50,299 --> 00:49:55,279
<font color="#E5E5E5">a and I've told to go get</font><font color="#CCCCCC"> F green goes</font>

1371
00:49:53,749 --> 00:49:56,749
green is told to go get out so green

1372
00:49:55,279 --> 00:50:00,589
consults the<font color="#CCCCCC"> graph and finds that the</font>

1373
00:49:56,749 --> 00:50:02,089
shortest path to<font color="#CCCCCC"> f is going BEF and so</font>

1374
00:50:00,589 --> 00:50:03,319
it goes ahead and makes a request for

1375
00:50:02,089 --> 00:50:05,209
being even though we've already

1376
00:50:03,319 --> 00:50:07,069
<font color="#CCCCCC">requested it with this other crawl</font>

1377
00:50:05,209 --> 00:50:08,299
thread in terms of our grand scheme of

1378
00:50:07,069 --> 00:50:09,769
things we already know the content of

1379
00:50:08,299 --> 00:50:11,809
that page but we go<font color="#E5E5E5"> ahead and make the</font>

1380
00:50:09,769 --> 00:50:13,999
request anyway so<font color="#CCCCCC"> we request be e and</font>

1381
00:50:11,809 --> 00:50:15,619
then we'd crust f so we made to request

1382
00:50:13,999 --> 00:50:16,939
we didn't even have to make just<font color="#CCCCCC"> to try</font>

1383
00:50:15,619 --> 00:50:19,880
<font color="#E5E5E5">to mask what we were really interested</font>

1384
00:50:16,939 --> 00:50:22,308
in so as I said the key here<font color="#E5E5E5"> is to use a</font>

1385
00:50:19,880 --> 00:50:25,009
shared graph solely for finding the path

1386
00:50:22,309 --> 00:50:27,319
to the links but you<font color="#E5E5E5"> still have to keep</font>

1387
00:50:25,009 --> 00:50:29,089
session state on each you are on each

1388
00:50:27,319 --> 00:50:31,069
crawl thread you know if I give a cookie

1389
00:50:29,089 --> 00:50:33,130
to this crawl thread that cookie can

1390
00:50:31,069 --> 00:50:35,869
never be shared with other crawl threats

1391
00:50:33,130 --> 00:50:37,400
the way we do this<font color="#E5E5E5"> to finding paths</font>

1392
00:50:35,869 --> 00:50:39,679
through the graph is we use a modified

1393
00:50:37,400 --> 00:50:42,589
breadth-first search to find paths

1394
00:50:39,679 --> 00:50:45,259
inside a graph that getting too

1395
00:50:42,589 --> 00:50:46,939
complicated you you know typical if

1396
00:50:45,259 --> 00:50:48,499
anyone has<font color="#E5E5E5"> the MIT white book there's a</font>

1397
00:50:46,939 --> 00:50:50,359
lot of stuff<font color="#E5E5E5"> in here on this but</font>

1398
00:50:48,499 --> 00:50:52,759
normally you use either a stacker or

1399
00:50:50,359 --> 00:50:54,709
<font color="#E5E5E5">queue to find paths through a graph and</font>

1400
00:50:52,759 --> 00:50:56,689
the thing is<font color="#E5E5E5"> that that always gives you</font>

1401
00:50:54,709 --> 00:50:59,989
the shortest path and so I determined

1402
00:50:56,689 --> 00:51:02,989
well you know possibly someone analyzing

1403
00:50:59,989 --> 00:51:05,150
logs could say<font color="#E5E5E5"> hmm this crawler thread</font>

1404
00:51:02,989 --> 00:51:07,609
always seems to find the shortest path

1405
00:51:05,150 --> 00:51:10,039
between this HTML page and this as to

1406
00:51:07,609 --> 00:51:13,819
HTML page let's say to go<font color="#E5E5E5"> from you know</font>

1407
00:51:10,039 --> 00:51:15,709
<font color="#E5E5E5">main dot HTML to porn dot HTML there's a</font>

1408
00:51:13,819 --> 00:51:17,660
<font color="#CCCCCC">really long length through like 10 pages</font>

1409
00:51:15,709 --> 00:51:19,339
to get there<font color="#E5E5E5"> or there happens to be one</font>

1410
00:51:17,660 --> 00:51:21,199
link in the bottom of<font color="#E5E5E5"> that legal policy</font>

1411
00:51:19,339 --> 00:51:23,449
because nobody<font color="#E5E5E5"> ever reads that you know</font>

1412
00:51:21,199 --> 00:51:25,609
we<font color="#E5E5E5"> don't want it to take the shortest</font>

1413
00:51:23,449 --> 00:51:27,410
path we want it to<font color="#E5E5E5"> take a reasonable</font>

1414
00:51:25,609 --> 00:51:29,569
path and so what we do is we use a

1415
00:51:27,410 --> 00:51:32,209
<font color="#CCCCCC">random collection instead of</font><font color="#E5E5E5"> a queue or</font>

1416
00:51:29,569 --> 00:51:34,219
a stack so we actually<font color="#CCCCCC"> just say stick</font>

1417
00:51:32,209 --> 00:51:37,669
nodes in pull them out and<font color="#E5E5E5"> this actually</font>

1418
00:51:34,219 --> 00:51:39,739
gives us a reasonably short but kind of

1419
00:51:37,670 --> 00:51:42,049
random path through the website so if

1420
00:51:39,739 --> 00:51:43,549
I'm here<font color="#E5E5E5"> I will kind of and I want to go</font>

1421
00:51:42,049 --> 00:51:45,979
all<font color="#CCCCCC"> the way over here I'll kind of</font><font color="#E5E5E5"> fine</font>

1422
00:51:43,549 --> 00:51:49,038
just it's not short not too<font color="#E5E5E5"> long a path</font>

1423
00:51:45,979 --> 00:51:51,379
to get me there so since the graph is

1424
00:51:49,039 --> 00:51:52,969
unidirectional it's<font color="#CCCCCC"> possible there isn't</font>

1425
00:51:51,380 --> 00:51:54,979
a path from where the crawling thread

1426
00:51:52,969 --> 00:51:56,509
currently is the<font color="#E5E5E5"> destination but</font>

1427
00:51:54,979 --> 00:51:57,919
<font color="#E5E5E5">remember our crawling thread is acting</font>

1428
00:51:56,509 --> 00:52:00,559
like a browser which has a back button

1429
00:51:57,920 --> 00:52:03,500
so what it does is<font color="#CCCCCC"> it says let me go</font>

1430
00:52:00,559 --> 00:52:06,440
back let's go<font color="#E5E5E5"> ahead and say that</font>

1431
00:52:03,500 --> 00:52:09,080
there wasn't a link from A to B and

1432
00:52:06,440 --> 00:52:11,650
green was at a well<font color="#E5E5E5"> green can always hit</font>

1433
00:52:09,080 --> 00:52:14,120
a back button and when I go here and I

1434
00:52:11,650 --> 00:52:16,100
don't<font color="#E5E5E5"> rearick West the route I would</font>

1435
00:52:14,120 --> 00:52:18,259
respect all my stuff<font color="#E5E5E5"> that's been in the</font>

1436
00:52:16,100 --> 00:52:19,610
cash I would send maybe conditional gets

1437
00:52:18,260 --> 00:52:21,410
to see if I need to<font color="#CCCCCC"> make this request</font>

1438
00:52:19,610 --> 00:52:25,340
again then green would send a request

1439
00:52:21,410 --> 00:52:31,819
for be e f so you can implement<font color="#E5E5E5"> a back</font>

1440
00:52:25,340 --> 00:52:33,800
button so alright so moving along uh

1441
00:52:31,820 --> 00:52:41,750
anyone<font color="#E5E5E5"> have any questions on that we</font>

1442
00:52:33,800 --> 00:52:44,390
good yes you<font color="#E5E5E5"> cross-eyed once across I</font>

1443
00:52:41,750 --> 00:52:46,190
want to store that the graphic used for

1444
00:52:44,390 --> 00:52:48,020
all of this<font color="#E5E5E5"> website what is still</font>

1445
00:52:46,190 --> 00:52:50,150
detectable as I<font color="#E5E5E5"> he needs as you need to</font>

1446
00:52:48,020 --> 00:52:52,759
get<font color="#CCCCCC"> that side everyday</font><font color="#E5E5E5"> randomly create</font>

1447
00:52:50,150 --> 00:52:55,970
<font color="#CCCCCC">ass based on that graph you already have</font>

1448
00:52:52,760 --> 00:52:57,500
set you can do<font color="#E5E5E5"> that yeah i was using</font>

1449
00:52:55,970 --> 00:52:58,669
this as a initial one shot

1450
00:52:57,500 --> 00:53:00,410
reconnaissance you<font color="#E5E5E5"> can obviously</font>

1451
00:52:58,670 --> 00:53:02,510
optimize this if you're only interested

1452
00:53:00,410 --> 00:53:04,460
in certain pages you can basically say

1453
00:53:02,510 --> 00:53:06,320
<font color="#CCCCCC">i've already got a graph i already know</font>

1454
00:53:04,460 --> 00:53:08,270
the link structure of the site find me a

1455
00:53:06,320 --> 00:53:10,490
random path from<font color="#CCCCCC"> the main page to the</font>

1456
00:53:08,270 --> 00:53:13,640
<font color="#CCCCCC">ten pages i'm interested in spoiled</font>

1457
00:53:10,490 --> 00:53:14,899
spawn<font color="#CCCCCC"> ten</font><font color="#E5E5E5"> maybe actually spawn 15 crawl</font>

1458
00:53:13,640 --> 00:53:17,270
threads that way they overlap a little

1459
00:53:14,900 --> 00:53:19,550
bit and these<font color="#E5E5E5"> 15 threads get me those</font>

1460
00:53:17,270 --> 00:53:21,950
<font color="#CCCCCC">ten pages using random paths and do that</font>

1461
00:53:19,550 --> 00:53:23,300
on a scheduled basis yeah you wouldn't

1462
00:53:21,950 --> 00:53:25,700
<font color="#E5E5E5">necessarily have to do the entire thing</font>

1463
00:53:23,300 --> 00:53:28,610
<font color="#CCCCCC">i was mainly focusing on let's do an</font>

1464
00:53:25,700 --> 00:53:29,990
exhaustive analysis of their entire page

1465
00:53:28,610 --> 00:53:31,190
but if you want to<font color="#E5E5E5"> do you know</font>

1466
00:53:29,990 --> 00:53:34,850
repetitive stuff you could obviously

1467
00:53:31,190 --> 00:53:35,990
optimize it and by else we're doing okay

1468
00:53:34,850 --> 00:53:39,380
on time<font color="#CCCCCC"> i know there's a break after</font>

1469
00:53:35,990 --> 00:53:40,729
this but i will i will hopefully not go

1470
00:53:39,380 --> 00:53:43,010
more than same like five minutes<font color="#E5E5E5"> into</font>

1471
00:53:40,730 --> 00:53:45,920
that<font color="#E5E5E5"> because you all want cookies and</font>

1472
00:53:43,010 --> 00:53:47,150
milk and other fun stuff so HTTP is

1473
00:53:45,920 --> 00:53:49,160
stateless in case you didn't get<font color="#E5E5E5"> the</font>

1474
00:53:47,150 --> 00:53:51,080
memo which means that web apps have to

1475
00:53:49,160 --> 00:53:53,149
keep state using other mechanisms mainly

1476
00:53:51,080 --> 00:53:55,220
cookies and sometimes in url session

1477
00:53:53,150 --> 00:53:57,530
state in url session state is when you

1478
00:53:55,220 --> 00:54:00,830
see something like this for sites that

1479
00:53:57,530 --> 00:54:02,030
don't have their cookies turned on so we

1480
00:54:00,830 --> 00:54:03,650
must ensure that session state

1481
00:54:02,030 --> 00:54:06,080
associated with one crawl thread that

1482
00:54:03,650 --> 00:54:09,170
found a link doesn't get rep doesn't get

1483
00:54:06,080 --> 00:54:10,640
resent by another crawl obviously since

1484
00:54:09,170 --> 00:54:12,980
the crawling threads don't share cookies

1485
00:54:10,640 --> 00:54:14,750
we're<font color="#CCCCCC"> okay there the cookie</font><font color="#E5E5E5"> that this</font>

1486
00:54:12,980 --> 00:54:16,070
girl thread finds never is going to be

1487
00:54:14,750 --> 00:54:16,970
resent by this one because they're

1488
00:54:16,070 --> 00:54:19,660
keeping their own cookie

1489
00:54:16,970 --> 00:54:22,399
just like a normal browser would however

1490
00:54:19,660 --> 00:54:24,200
crawling threads that have or when

1491
00:54:22,400 --> 00:54:27,290
there's in url session state that's a

1492
00:54:24,200 --> 00:54:29,569
problem because this crawl thread finds

1493
00:54:27,290 --> 00:54:32,930
this link and the link contains<font color="#E5E5E5"> this</font>

1494
00:54:29,570 --> 00:54:34,849
session state<font color="#E5E5E5"> I need a mechanism of one</font>

1495
00:54:32,930 --> 00:54:37,520
crawl thread going<font color="#E5E5E5"> oh I need to go to</font>

1496
00:54:34,849 --> 00:54:39,650
<font color="#E5E5E5">this page but</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> can't use their in url</font>

1497
00:54:37,520 --> 00:54:41,540
session state I<font color="#E5E5E5"> have to use my in url</font>

1498
00:54:39,650 --> 00:54:43,430
session state don't worry if this sounds

1499
00:54:41,540 --> 00:54:46,190
confusing because it's it is and it's

1500
00:54:43,430 --> 00:54:48,319
easier to see with an example<font color="#E5E5E5"> just know</font>

1501
00:54:46,190 --> 00:54:50,240
<font color="#CCCCCC">that again the graph and the paths</font>

1502
00:54:48,320 --> 00:54:52,520
through the graph is what helps<font color="#E5E5E5"> us here</font>

1503
00:54:50,240 --> 00:54:54,680
since a crawler never directly jumps to

1504
00:54:52,520 --> 00:54:56,930
a target page but instead follows the

1505
00:54:54,680 --> 00:54:59,109
path to get to that page we will<font color="#E5E5E5"> find</font>

1506
00:54:56,930 --> 00:55:01,250
our URL session state along the way and

1507
00:54:59,109 --> 00:55:03,619
you really need<font color="#CCCCCC"> to see an example for</font>

1508
00:55:01,250 --> 00:55:05,750
<font color="#E5E5E5">this so let's go ahead and say that</font>

1509
00:55:03,619 --> 00:55:07,700
we've got you know the same website

1510
00:55:05,750 --> 00:55:10,580
again and that blue has visited the root

1511
00:55:07,700 --> 00:55:12,919
C and E and green hasn't even done

1512
00:55:10,580 --> 00:55:15,380
anything and so my list of pending links

1513
00:55:12,920 --> 00:55:18,200
that<font color="#CCCCCC"> I still need to visit our be F a</font>

1514
00:55:15,380 --> 00:55:21,290
and actually d but DS not popular so we

1515
00:55:18,200 --> 00:55:25,700
don't care about it so the graphs nodes

1516
00:55:21,290 --> 00:55:29,599
as<font color="#E5E5E5"> I said in this in this in this graph</font>

1517
00:55:25,700 --> 00:55:32,839
when each node is a URL the URL that's

1518
00:55:29,599 --> 00:55:34,580
for you know say oh never mind<font color="#CCCCCC"> green</font><font color="#E5E5E5"> is</font>

1519
00:55:32,839 --> 00:55:35,810
spawned and told to go to be so be

1520
00:55:34,580 --> 00:55:37,609
because that's at the<font color="#E5E5E5"> front of our queue</font>

1521
00:55:35,810 --> 00:55:39,920
that will be we would<font color="#E5E5E5"> visit we already</font>

1522
00:55:37,609 --> 00:55:41,930
know what the URL for<font color="#E5E5E5"> B would</font><font color="#CCCCCC"> be we</font>

1523
00:55:39,920 --> 00:55:44,000
haven't necessarily visited it yet but

1524
00:55:41,930 --> 00:55:46,730
we do know that we need<font color="#CCCCCC"> to we know what</font>

1525
00:55:44,000 --> 00:55:49,040
the URL for it is<font color="#E5E5E5"> however the URL for be</font>

1526
00:55:46,730 --> 00:55:52,460
that we know about it's polluted with

1527
00:55:49,040 --> 00:55:53,930
the session state from blue so if green

1528
00:55:52,460 --> 00:55:55,550
makes a request for it it's going<font color="#E5E5E5"> to be</font>

1529
00:55:53,930 --> 00:55:57,080
using blue session state and that's

1530
00:55:55,550 --> 00:55:59,150
<font color="#E5E5E5">going to be corruptible and you're going</font>

1531
00:55:57,080 --> 00:56:01,970
<font color="#E5E5E5">to be able to tell that the two threads</font>

1532
00:55:59,150 --> 00:56:05,119
are collaborating so what we do instead

1533
00:56:01,970 --> 00:56:07,730
is we go ahead and we spawn green and we

1534
00:56:05,119 --> 00:56:09,170
tell green<font color="#E5E5E5"> hey go to be so green goes</font>

1535
00:56:07,730 --> 00:56:11,000
ahead and it looks at this entire graph

1536
00:56:09,170 --> 00:56:12,290
and so soon well to get<font color="#E5E5E5"> to be I make a</font>

1537
00:56:11,000 --> 00:56:14,990
request for the root<font color="#CCCCCC"> and then I'm a</font>

1538
00:56:12,290 --> 00:56:17,119
request for being so green goes ahead

1539
00:56:14,990 --> 00:56:19,250
and makes a request for the root which

1540
00:56:17,119 --> 00:56:22,270
obviously has not yet been polluted

1541
00:56:19,250 --> 00:56:25,880
because the the root is you know like

1542
00:56:22,270 --> 00:56:28,460
oreilly com /<font color="#E5E5E5"> index dot HTML it's known</font>

1543
00:56:25,880 --> 00:56:29,900
that is not polluted but all these other

1544
00:56:28,460 --> 00:56:32,420
pages are polluted

1545
00:56:29,900 --> 00:56:33,980
so what happens is is that green makes

1546
00:56:32,420 --> 00:56:37,220
the request for the<font color="#CCCCCC"> root and</font><font color="#E5E5E5"> it gets it</font>

1547
00:56:33,980 --> 00:56:39,440
now<font color="#CCCCCC"> Green knows that the root is going</font>

1548
00:56:37,220 --> 00:56:41,390
to have some link to be and it knows

1549
00:56:39,440 --> 00:56:44,029
what be looks<font color="#E5E5E5"> like that when it's</font>

1550
00:56:41,390 --> 00:56:46,190
polluted so what great but<font color="#E5E5E5"> like we said</font>

1551
00:56:44,029 --> 00:56:47,809
it knows what<font color="#E5E5E5"> the link to be looks like</font>

1552
00:56:46,190 --> 00:56:51,500
<font color="#E5E5E5">but that link that it knows about</font>

1553
00:56:47,809 --> 00:56:53,809
contains<font color="#CCCCCC"> be or it contains blues session</font>

1554
00:56:51,500 --> 00:56:56,660
state so what green does is it<font color="#CCCCCC"> looks at</font>

1555
00:56:53,809 --> 00:56:59,059
its copy of the root and says find me

1556
00:56:56,660 --> 00:57:00,799
all the links that<font color="#CCCCCC"> have the same it</font>

1557
00:56:59,059 --> 00:57:03,740
<font color="#CCCCCC">basically dips</font><font color="#E5E5E5"> the links it says I'm</font>

1558
00:57:00,799 --> 00:57:05,480
looking for a link to be hey all the

1559
00:57:03,740 --> 00:57:08,750
links that<font color="#E5E5E5"> are on this page finds me the</font>

1560
00:57:05,480 --> 00:57:10,940
link that most closely resembles the URL

1561
00:57:08,750 --> 00:57:12,619
I know<font color="#E5E5E5"> about and the difference</font><font color="#CCCCCC"> between</font>

1562
00:57:10,940 --> 00:57:17,720
those links will<font color="#E5E5E5"> be the in url session</font>

1563
00:57:12,619 --> 00:57:20,539
state got<font color="#E5E5E5"> it good</font><font color="#CCCCCC"> all right so we scan</font>

1564
00:57:17,720 --> 00:57:22,430
all the links we go<font color="#CCCCCC"> ahead</font><font color="#E5E5E5"> and green</font>

1565
00:57:20,539 --> 00:57:25,250
looks at a<font color="#E5E5E5"> diff of the links finds the</font>

1566
00:57:22,430 --> 00:57:27,440
link to be for that will contain its

1567
00:57:25,250 --> 00:57:30,260
<font color="#E5E5E5">session state beat our green can now</font>

1568
00:57:27,440 --> 00:57:33,140
make a direct request for be and it will

1569
00:57:30,260 --> 00:57:36,849
contain green session state and so we

1570
00:57:33,140 --> 00:57:36,848
have solved the session state problem

1571
00:57:42,309 --> 00:57:47,299
doesn't coming for<font color="#CCCCCC"> X and say oh I know</font>

1572
00:57:45,500 --> 00:57:49,760
<font color="#E5E5E5">that the session</font><font color="#CCCCCC"> state is going to</font><font color="#E5E5E5"> be</font>

1573
00:57:47,299 --> 00:57:52,970
you know variable best idea so<font color="#CCCCCC"> I'll this</font>

1574
00:57:49,760 --> 00:57:55,640
you you could I mean all that really

1575
00:57:52,970 --> 00:57:57,740
<font color="#E5E5E5">would do remember the crawl threads it's</font>

1576
00:57:55,640 --> 00:57:59,930
not<font color="#E5E5E5"> like we're doing a special case of</font>

1577
00:57:57,740 --> 00:58:02,000
find a path through the nodes because we

1578
00:57:59,930 --> 00:58:03,828
always have to find the path to get

1579
00:58:02,000 --> 00:58:05,869
there so all that really<font color="#E5E5E5"> would do is</font>

1580
00:58:03,829 --> 00:58:09,710
reduce the amount of time it would take

1581
00:58:05,869 --> 00:58:11,990
you to you<font color="#CCCCCC"> know do a diff of all the</font>

1582
00:58:09,710 --> 00:58:13,789
links and we're<font color="#E5E5E5"> having to throttle</font>

1583
00:58:11,990 --> 00:58:16,430
ourselves to be acting<font color="#CCCCCC"> like a</font><font color="#E5E5E5"> human</font>

1584
00:58:13,789 --> 00:58:17,990
anyway so it's like you could you could

1585
00:58:16,430 --> 00:58:20,210
optimize it but all you're really doing

1586
00:58:17,990 --> 00:58:21,680
is you know you know increasing the

1587
00:58:20,210 --> 00:58:23,480
amount of time your cpu's just going to

1588
00:58:21,680 --> 00:58:25,220
sit there<font color="#E5E5E5"> being idle before it has to</font>

1589
00:58:23,480 --> 00:58:27,020
make the<font color="#CCCCCC"> next page so some beautiful</font>

1590
00:58:25,220 --> 00:58:28,879
thing about this it it works so well

1591
00:58:27,020 --> 00:58:30,500
with my laziness because it's supposed

1592
00:58:28,880 --> 00:58:32,779
to be lazy because of its a<font color="#E5E5E5"> quick it</font>

1593
00:58:30,500 --> 00:58:36,319
won't look like a human so it<font color="#E5E5E5"> worked out</font>

1594
00:58:32,779 --> 00:58:38,569
well for me uh anyway this is<font color="#CCCCCC"> i'm</font>

1595
00:58:36,319 --> 00:58:40,569
showing how if green wanted to go to<font color="#E5E5E5"> f</font>

1596
00:58:38,569 --> 00:58:43,038
it can just<font color="#E5E5E5"> keep going along the way</font>

1597
00:58:40,569 --> 00:58:44,180
finding its<font color="#E5E5E5"> session state you know</font>

1598
00:58:43,039 --> 00:58:45,559
basically<font color="#E5E5E5"> if you</font>

1599
00:58:44,180 --> 00:58:48,529
guys got the whole<font color="#CCCCCC"> thing about dipping</font>

1600
00:58:45,559 --> 00:58:50,240
it you've got this concept so the the

1601
00:58:48,530 --> 00:58:55,010
conclusion about path<font color="#E5E5E5"> to pages is that</font>

1602
00:58:50,240 --> 00:58:57,169
any link<font color="#E5E5E5"> mmm well never buy this all</font>

1603
00:58:55,010 --> 00:58:58,790
<font color="#E5E5E5">right so crawl threads the big thing</font>

1604
00:58:57,170 --> 00:59:01,160
<font color="#CCCCCC">here is that crawling threads have to</font>

1605
00:58:58,790 --> 00:59:02,660
overlap right if I've got if you've got

1606
00:59:01,160 --> 00:59:04,279
a hundred pages and I spun<font color="#E5E5E5"> ten Carl</font>

1607
00:59:02,660 --> 00:59:06,140
threads and each crawl thread only gets

1608
00:59:04,280 --> 00:59:08,119
<font color="#E5E5E5">ten pages and they're never the same</font>

1609
00:59:06,140 --> 00:59:09,558
pages that another thread got looks a

1610
00:59:08,119 --> 00:59:12,619
little suspicious so there is<font color="#CCCCCC"> always</font>

1611
00:59:09,559 --> 00:59:13,940
overlap we<font color="#E5E5E5"> always use a path to get to</font>

1612
00:59:12,619 --> 00:59:16,010
where we're going to help<font color="#CCCCCC"> resolve the</font>

1613
00:59:13,940 --> 00:59:17,869
session state issues and really<font color="#E5E5E5"> it's the</font>

1614
00:59:16,010 --> 00:59:19,430
<font color="#E5E5E5">only way to make it appear</font><font color="#CCCCCC"> as if there's</font>

1615
00:59:17,869 --> 00:59:21,319
actually a separate user on each

1616
00:59:19,430 --> 00:59:22,790
separate IP it's<font color="#E5E5E5"> really the only way to</font>

1617
00:59:21,319 --> 00:59:31,579
make it<font color="#E5E5E5"> look</font><font color="#CCCCCC"> like no one is</font>

1618
00:59:22,790 --> 00:59:33,290
collaborating with anyone yes well that

1619
00:59:31,579 --> 00:59:35,210
was great than my prop my company had

1620
00:59:33,290 --> 00:59:47,900
wrote a tool to do exactly what I'm

1621
00:59:35,210 --> 00:59:50,000
trying<font color="#CCCCCC"> to be they will simply I actually</font>

1622
00:59:47,900 --> 00:59:51,380
deliberately didn't look at log<font color="#E5E5E5"> alert</font>

1623
00:59:50,000 --> 00:59:53,599
source code because I didn't<font color="#CCCCCC"> want to</font>

1624
00:59:51,380 --> 00:59:55,640
know how<font color="#E5E5E5"> it worked I simply ask Darren</font>

1625
00:59:53,599 --> 00:59:57,109
what does it look for and then try<font color="#E5E5E5"> to</font>

1626
00:59:55,640 --> 01:00:00,290
counteract everything it<font color="#E5E5E5"> would look for</font>

1627
00:59:57,109 --> 01:00:02,750
but it's my<font color="#CCCCCC"> understanding it would what</font>

1628
01:00:00,290 --> 01:00:04,339
it would look for is let me find groups

1629
01:00:02,750 --> 01:00:06,170
of requests that even though they're

1630
01:00:04,339 --> 01:00:08,240
coming from multiple IPS in terms of

1631
01:00:06,170 --> 01:00:10,190
time they<font color="#CCCCCC"> occurred at the</font><font color="#E5E5E5"> same time</font><font color="#CCCCCC"> all</font>

1632
01:00:08,240 --> 01:00:12,439
<font color="#CCCCCC">right well let's look at what pages were</font>

1633
01:00:10,190 --> 01:00:16,369
request by the supposedly different IPS

1634
01:00:12,440 --> 01:00:18,260
and see whether the request<font color="#CCCCCC"> seemed to be</font>

1635
01:00:16,369 --> 01:00:20,299
coordinated<font color="#E5E5E5"> in any way like is there any</font>

1636
01:00:18,260 --> 01:00:21,470
overlap and their requests are they

1637
01:00:20,299 --> 01:00:23,180
hitting completely different thing are

1638
01:00:21,470 --> 01:00:25,040
they hitting it would keep track of what

1639
01:00:23,180 --> 01:00:26,540
the popular pages are are these<font color="#CCCCCC"> things</font>

1640
01:00:25,040 --> 01:00:28,308
hitting the popular pages they're not

1641
01:00:26,540 --> 01:00:30,049
that's kind of<font color="#E5E5E5"> weird it would look at</font>

1642
01:00:28,309 --> 01:00:32,000
you know hey what's this IP addresses in

1643
01:00:30,049 --> 01:00:33,589
an open proxy are all these IP addresses

1644
01:00:32,000 --> 01:00:34,880
maybe they're different ip's but they're

1645
01:00:33,589 --> 01:00:40,250
in the same block owned by the same

1646
01:00:34,880 --> 01:00:43,069
company things like<font color="#CCCCCC"> that so just really</font>

1647
01:00:40,250 --> 01:00:45,049
quick alternative with<font color="#CCCCCC"> paths the pages</font>

1648
01:00:43,069 --> 01:00:46,730
as we said the<font color="#E5E5E5"> other way someone can get</font>

1649
01:00:45,049 --> 01:00:49,460
to a deep linked page is through a

1650
01:00:46,730 --> 01:00:51,230
search engine so what i could do is the

1651
01:00:49,460 --> 01:00:54,109
covert crawler can create fake google

1652
01:00:51,230 --> 01:00:55,700
refers and directly jump to a page so

1653
01:00:54,109 --> 01:00:57,650
let<font color="#E5E5E5"> me just show you real quick ignore</font>

1654
01:00:55,700 --> 01:00:59,689
all that text let's say<font color="#CCCCCC"> I want</font>

1655
01:00:57,650 --> 01:01:01,490
make a request for<font color="#E5E5E5"> F and sure I could</font>

1656
01:00:59,690 --> 01:01:04,609
spawn green and have it<font color="#E5E5E5"> you know take</font>

1657
01:01:01,490 --> 01:01:06,109
maybe this path or maybe this path or

1658
01:01:04,609 --> 01:01:07,339
you know whatever I could do that<font color="#E5E5E5"> but</font>

1659
01:01:06,109 --> 01:01:09,680
that means I'm sending a<font color="#E5E5E5"> lot</font><font color="#CCCCCC"> of quests I</font>

1660
01:01:07,339 --> 01:01:11,960
don't have to what I<font color="#E5E5E5"> could do since I've</font>

1661
01:01:09,680 --> 01:01:14,118
gotten I've already gotten<font color="#CCCCCC"> II I know</font>

1662
01:01:11,960 --> 01:01:16,039
about<font color="#CCCCCC"> F oh and one thing if you guys</font>

1663
01:01:14,119 --> 01:01:18,319
haven't<font color="#E5E5E5"> been able to tell the leaks on</font>

1664
01:01:16,039 --> 01:01:20,390
your graph those are pages we haven't

1665
01:01:18,319 --> 01:01:21,770
visited yet because<font color="#CCCCCC"> if we visited them</font>

1666
01:01:20,390 --> 01:01:24,618
we know there are links off of them

1667
01:01:21,770 --> 01:01:27,980
presumably and obviously it wouldn't be

1668
01:01:24,619 --> 01:01:29,480
a leaf node so if<font color="#E5E5E5"> we want to go get F we</font>

1669
01:01:27,980 --> 01:01:31,279
don't<font color="#E5E5E5"> know the contents of that but we</font>

1670
01:01:29,480 --> 01:01:33,410
know it exists we do know the contents

1671
01:01:31,279 --> 01:01:35,180
of e so we just do that modified looking

1672
01:01:33,410 --> 01:01:37,129
for key words we say hey let's do a

1673
01:01:35,180 --> 01:01:39,770
keyword word count find out what e seems

1674
01:01:37,130 --> 01:01:42,440
to be about great now let's make let's

1675
01:01:39,770 --> 01:01:44,779
have green make a request for<font color="#CCCCCC"> paigey and</font>

1676
01:01:42,440 --> 01:01:46,970
send its referer header to look like

1677
01:01:44,779 --> 01:01:49,160
it's being sent from a<font color="#CCCCCC"> Google query so</font>

1678
01:01:46,970 --> 01:01:51,558
we'd say<font color="#CCCCCC"> Google query com you know the</font>

1679
01:01:49,160 --> 01:01:53,930
keyword that we've associated is with E

1680
01:01:51,559 --> 01:01:56,000
and so basically out of nowhere<font color="#E5E5E5"> II would</font>

1681
01:01:53,930 --> 01:01:58,460
make a deep link require green would

1682
01:01:56,000 --> 01:02:01,099
make a deep link request for e using a

1683
01:01:58,460 --> 01:02:02,839
fake google refer and then proceed<font color="#CCCCCC"> to</font>

1684
01:02:01,099 --> 01:02:04,880
make a<font color="#E5E5E5"> then proceed to make a request</font>

1685
01:02:02,839 --> 01:02:05,990
for<font color="#CCCCCC"> f so that's a way you can kind of</font>

1686
01:02:04,880 --> 01:02:09,349
get around having to make a lot<font color="#CCCCCC"> of</font>

1687
01:02:05,990 --> 01:02:11,299
requests you don't have to so real quick

1688
01:02:09,349 --> 01:02:13,069
some throttling issues we need<font color="#E5E5E5"> some</font>

1689
01:02:11,299 --> 01:02:14,599
mechanism to determine how popular site

1690
01:02:13,069 --> 01:02:16,970
is because you know if you<font color="#E5E5E5"> get a</font><font color="#CCCCCC"> hundred</font>

1691
01:02:14,599 --> 01:02:18,140
people a day obviously we don't<font color="#CCCCCC"> want to</font>

1692
01:02:16,970 --> 01:02:20,660
be hitting you with thousands of

1693
01:02:18,140 --> 01:02:22,279
requests so you know there's<font color="#CCCCCC"> this fun</font>

1694
01:02:20,660 --> 01:02:23,538
thing called the IP fragment ID which vo

1695
01:02:22,279 --> 01:02:25,549
door talked about and how to own a

1696
01:02:23,539 --> 01:02:26,660
continent basically a mechanism of

1697
01:02:25,549 --> 01:02:28,759
determining how many people are

1698
01:02:26,660 --> 01:02:30,140
connected to a server based on the IP

1699
01:02:28,760 --> 01:02:31,960
fragment ID<font color="#E5E5E5"> that's returned if you're</font>

1700
01:02:30,140 --> 01:02:34,190
using say<font color="#CCCCCC"> H ping or something like that</font>

1701
01:02:31,960 --> 01:02:36,380
we can do a who is to find<font color="#E5E5E5"> out how old</font>

1702
01:02:34,190 --> 01:02:38,390
the site is we can use archives or to

1703
01:02:36,380 --> 01:02:40,279
find out how often it's updated excuse

1704
01:02:38,390 --> 01:02:42,140
me we can use Google to find the number

1705
01:02:40,279 --> 01:02:45,049
of inbound links you know you can<font color="#E5E5E5"> always</font>

1706
01:02:42,140 --> 01:02:48,618
say hey show me the pages that<font color="#CCCCCC"> link</font><font color="#E5E5E5"> to</font>

1707
01:02:45,049 --> 01:02:49,880
you know to work on org we can find not

1708
01:02:48,619 --> 01:02:52,309
that I'm advocating you guys covertly

1709
01:02:49,880 --> 01:02:54,440
crawl to work on door to exploit them

1710
01:02:52,309 --> 01:02:56,960
you know we<font color="#E5E5E5"> can use Google to find out</font>

1711
01:02:54,440 --> 01:02:59,029
what the size of it is we<font color="#CCCCCC"> can use Alexa</font>

1712
01:02:56,960 --> 01:03:01,010
or other services<font color="#E5E5E5"> to find out popularity</font>

1713
01:02:59,029 --> 01:03:02,420
this<font color="#E5E5E5"> is all really kind of a pain in the</font>

1714
01:03:01,010 --> 01:03:04,520
ass first of all who is there's no

1715
01:03:02,420 --> 01:03:06,799
standard about how the<font color="#CCCCCC"> information of</font>

1716
01:03:04,520 --> 01:03:09,259
who is is returned you know this this<font color="#CCCCCC"> is</font>

1717
01:03:06,799 --> 01:03:10,599
really fuzzy and nasty and you know I'm

1718
01:03:09,260 --> 01:03:14,529
still refining it

1719
01:03:10,599 --> 01:03:16,690
works<font color="#E5E5E5"> in kind of doesn't one thing is</font>

1720
01:03:14,529 --> 01:03:20,799
traffic escalation now this<font color="#CCCCCC"> is just fun</font>

1721
01:03:16,690 --> 01:03:22,900
so this is<font color="#CCCCCC"> I mean a site receives an</font>

1722
01:03:20,799 --> 01:03:25,749
order of magnitude more traffic than

1723
01:03:22,900 --> 01:03:27,430
normal if say it's got linked to from a

1724
01:03:25,749 --> 01:03:30,249
big news<font color="#CCCCCC"> story or blog have you ever</font>

1725
01:03:27,430 --> 01:03:31,569
been slashed<font color="#CCCCCC"> on it I run</font><font color="#E5E5E5"> a magistrate</font>

1726
01:03:30,249 --> 01:03:33,038
project called strike snoop and I got

1727
01:03:31,569 --> 01:03:34,900
slashed out at once a night this were

1728
01:03:33,039 --> 01:03:36,400
the page views very on early in the

1729
01:03:34,900 --> 01:03:38,920
project and<font color="#CCCCCC"> then I</font><font color="#E5E5E5"> got slashed on it and</font>

1730
01:03:36,400 --> 01:03:43,720
<font color="#CCCCCC">that was</font><font color="#E5E5E5"> like in one day I mean holy</font>

1731
01:03:38,920 --> 01:03:46,359
shit so you know<font color="#E5E5E5"> obviously if I could</font>

1732
01:03:43,720 --> 01:03:48,220
escalate the traffic of a site I could

1733
01:03:46,359 --> 01:03:50,710
<font color="#E5E5E5">kind of hide a covert crawl inside the</font>

1734
01:03:48,220 --> 01:03:53,859
buzz of all these you know<font color="#E5E5E5"> people from</font>

1735
01:03:50,710 --> 01:03:56,319
slashdot that are coming so you<font color="#CCCCCC"> know</font>

1736
01:03:53,859 --> 01:03:58,420
obviously<font color="#E5E5E5"> should do we still need to be</font>

1737
01:03:56,319 --> 01:04:00,249
covert you know if we focus on

1738
01:03:58,420 --> 01:04:01,599
throttling to crawl back<font color="#E5E5E5"> to match the</font>

1739
01:04:00,249 --> 01:04:03,220
site's traffic patterns<font color="#E5E5E5"> but if it's</font>

1740
01:04:01,599 --> 01:04:04,390
getting<font color="#E5E5E5"> flooded with far more traffic</font>

1741
01:04:03,220 --> 01:04:06,609
than normally gets those traffic

1742
01:04:04,390 --> 01:04:08,229
<font color="#E5E5E5">patterns aren't relevant we can increase</font>

1743
01:04:06,609 --> 01:04:09,729
<font color="#CCCCCC">the</font><font color="#E5E5E5"> speed of</font><font color="#CCCCCC"> the crawler we can increase</font>

1744
01:04:08,229 --> 01:04:11,769
<font color="#CCCCCC">the number of crawl threads that are</font>

1745
01:04:09,729 --> 01:04:13,149
appearing to be users we can do all

1746
01:04:11,769 --> 01:04:15,819
sorts of stuff and increase the number

1747
01:04:13,150 --> 01:04:25,269
of pages each crawl thread visits there

1748
01:04:15,819 --> 01:04:28,839
are<font color="#E5E5E5"> lots of things we can do I'm getting</font>

1749
01:04:25,269 --> 01:04:30,399
to that so so obviously the<font color="#E5E5E5"> Cobra</font><font color="#CCCCCC"> method</font>

1750
01:04:28,839 --> 01:04:32,109
<font color="#E5E5E5">still need to use just more traffic</font>

1751
01:04:30,400 --> 01:04:34,599
doesn't negate having to emulate a

1752
01:04:32,109 --> 01:04:36,098
browser or intelligently follow links I

1753
01:04:34,599 --> 01:04:37,479
mean we can't<font color="#CCCCCC"> suddenly unleash a breath</font>

1754
01:04:36,099 --> 01:04:39,729
fridge crawler just because I happen to

1755
01:04:37,479 --> 01:04:41,200
slashdot you but you know we we

1756
01:04:39,729 --> 01:04:44,140
certainly can increase<font color="#CCCCCC"> the speed and</font>

1757
01:04:41,200 --> 01:04:46,390
this is<font color="#E5E5E5"> certainly helpful well how do</font>

1758
01:04:44,140 --> 01:04:48,098
you<font color="#E5E5E5"> predict a flood I mean how do you</font>

1759
01:04:46,390 --> 01:04:51,129
know a sites going to get traffic

1760
01:04:48,099 --> 01:04:53,289
escalated well you know you can<font color="#E5E5E5"> ask why</font>

1761
01:04:51,130 --> 01:04:55,089
traffic escalation happens it tends<font color="#CCCCCC"> to</font>

1762
01:04:53,289 --> 01:04:57,450
happen if a link appears on a popular

1763
01:04:55,089 --> 01:05:01,058
site to a relatively less popular site

1764
01:04:57,450 --> 01:05:03,729
escalating the traffic so a major news

1765
01:05:01,059 --> 01:05:05,650
site or a blog has an RSS feed you know

1766
01:05:03,729 --> 01:05:07,180
thousands of<font color="#E5E5E5"> people are reading in the</font>

1767
01:05:05,650 --> 01:05:09,099
suddenly say hey here's a<font color="#E5E5E5"> really cool</font>

1768
01:05:07,180 --> 01:05:11,529
link go check this out or goes<font color="#E5E5E5"> out on a</font>

1769
01:05:09,099 --> 01:05:13,119
mailing list so<font color="#E5E5E5"> you know I wrote a very</font>

1770
01:05:11,529 --> 01:05:15,069
simple agent that subscribed to a bunch

1771
01:05:13,119 --> 01:05:16,749
of RSS feeds from major news sites and

1772
01:05:15,069 --> 01:05:18,460
what I<font color="#E5E5E5"> would do is I would scan the</font>

1773
01:05:16,749 --> 01:05:20,890
stories for links and then I would check

1774
01:05:18,460 --> 01:05:22,630
google and<font color="#E5E5E5"> alexa and try to determine</font>

1775
01:05:20,890 --> 01:05:24,049
what the popularity of<font color="#E5E5E5"> that site was and</font>

1776
01:05:22,630 --> 01:05:26,539
I<font color="#E5E5E5"> just kind of had a rough</font>

1777
01:05:24,049 --> 01:05:28,849
<font color="#E5E5E5">okay if it's a pretty unpopular site</font>

1778
01:05:26,539 --> 01:05:31,609
chances are they're about to get pretty

1779
01:05:28,849 --> 01:05:33,890
heavily assaulted by traffic assuming

1780
01:05:31,609 --> 01:05:35,989
it's interesting though this is not<font color="#E5E5E5"> very</font>

1781
01:05:33,890 --> 01:05:37,969
<font color="#CCCCCC">good and it was kind of</font><font color="#E5E5E5"> a crappy tool</font>

1782
01:05:35,989 --> 01:05:40,069
but<font color="#CCCCCC"> it worked it did a pretty good job</font>

1783
01:05:37,969 --> 01:05:41,660
of kind of saying wow this is about to

1784
01:05:40,069 --> 01:05:44,599
happen now the only<font color="#CCCCCC"> problem is is that</font>

1785
01:05:41,660 --> 01:05:46,399
you know my my tool got the RSS feed

1786
01:05:44,599 --> 01:05:49,219
when the thousands of<font color="#E5E5E5"> other people got</font>

1787
01:05:46,400 --> 01:05:51,140
the RSS feed so it's like it wasn't<font color="#E5E5E5"> so</font>

1788
01:05:49,219 --> 01:05:52,729
much<font color="#CCCCCC"> a predictor of track of traffic</font>

1789
01:05:51,140 --> 01:05:54,379
excavation it was more of<font color="#E5E5E5"> holy shit</font>

1790
01:05:52,729 --> 01:05:58,038
<font color="#E5E5E5">traffic excavation is happening right</font>

1791
01:05:54,380 --> 01:06:00,410
<font color="#CCCCCC">now and also it didn't let you pick who</font>

1792
01:05:58,039 --> 01:06:01,549
you wanted<font color="#E5E5E5"> to crawl it just kind of said</font>

1793
01:06:00,410 --> 01:06:03,799
hey these people are about<font color="#CCCCCC"> to get</font>

1794
01:06:01,549 --> 01:06:05,029
escalated or are being escalated do you

1795
01:06:03,799 --> 01:06:08,839
want to you know you should probably

1796
01:06:05,029 --> 01:06:10,969
curl them if you feel like<font color="#E5E5E5"> it well how</font>

1797
01:06:08,839 --> 01:06:12,890
can you cause traffic excavation

1798
01:06:10,969 --> 01:06:15,349
sometimes traffic floods need a little

1799
01:06:12,890 --> 01:06:17,209
bit of a nudge so what I what<font color="#CCCCCC"> you</font>

1800
01:06:15,349 --> 01:06:18,709
couldn't do is find an<font color="#E5E5E5"> interesting site</font>

1801
01:06:17,209 --> 01:06:20,239
and some<font color="#CCCCCC"> interesting content on the site</font>

1802
01:06:18,709 --> 01:06:21,649
you<font color="#E5E5E5"> want to crawl and then submit to a</font>

1803
01:06:20,239 --> 01:06:23,900
popular news story and see if they pick

1804
01:06:21,650 --> 01:06:25,999
it<font color="#E5E5E5"> up sometimes</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> got</font><font color="#CCCCCC"> to blow up the</font>

1805
01:06:23,900 --> 01:06:28,099
dam to<font color="#CCCCCC"> make it flood and the way I would</font>

1806
01:06:25,999 --> 01:06:29,479
<font color="#CCCCCC">blow up the dam is find across site</font>

1807
01:06:28,099 --> 01:06:31,189
scripting<font color="#E5E5E5"> vulnerability in a major news</font>

1808
01:06:29,479 --> 01:06:33,229
site like CNN com because there are a

1809
01:06:31,189 --> 01:06:34,729
lot of them and then cross site

1810
01:06:33,229 --> 01:06:36,198
scripting exploits are everywhere and

1811
01:06:34,729 --> 01:06:38,328
<font color="#E5E5E5">you just do a very simple one that</font>

1812
01:06:36,199 --> 01:06:39,739
allows you to reflect something into a

1813
01:06:38,329 --> 01:06:41,839
link so i can send<font color="#CCCCCC"> you</font><font color="#E5E5E5"> a link and when</font>

1814
01:06:39,739 --> 01:06:43,839
you click on it not that I've polluted

1815
01:06:41,839 --> 01:06:46,160
the<font color="#CCCCCC"> backend database but simply the URL</font>

1816
01:06:43,839 --> 01:06:48,170
itself has something that's reflected

1817
01:06:46,160 --> 01:06:49,788
back into the page and almost always I

1818
01:06:48,170 --> 01:06:51,890
reflect back into the page a little

1819
01:06:49,789 --> 01:06:53,359
block of script which accesses another

1820
01:06:51,890 --> 01:06:55,400
site and on that other site I'm

1821
01:06:53,359 --> 01:06:57,679
<font color="#E5E5E5">containing the content of the story I</font>

1822
01:06:55,400 --> 01:07:00,499
want<font color="#E5E5E5"> to have so I quickly you know whip</font>

1823
01:06:57,679 --> 01:07:01,999
up an inflammatory article you know Bill

1824
01:07:00,499 --> 01:07:07,669
Gates sucks it or something like that

1825
01:07:01,999 --> 01:07:10,999
<font color="#E5E5E5">and see</font><font color="#CCCCCC"> how is the suck and then I</font>

1826
01:07:07,670 --> 01:07:12,469
submit it and I sit back and I watch the

1827
01:07:10,999 --> 01:07:14,089
flood happen as you<font color="#CCCCCC"> know thousands of</font>

1828
01:07:12,469 --> 01:07:15,859
people like whoa no I seem to think that

1829
01:07:14,089 --> 01:07:17,170
<font color="#E5E5E5">he sucks it only in this way and not in</font>

1830
01:07:15,859 --> 01:07:18,819
<font color="#E5E5E5">the way you said</font>

1831
01:07:17,170 --> 01:07:20,319
you know I mean come on if there's

1832
01:07:18,819 --> 01:07:22,569
anything that slashed on nerves love to

1833
01:07:20,319 --> 01:07:25,569
talk about<font color="#CCCCCC"> it's what way things suck in</font>

1834
01:07:22,569 --> 01:07:26,950
to what degree things suck so you know

1835
01:07:25,569 --> 01:07:29,799
you just<font color="#E5E5E5"> kind of play with them a little</font>

1836
01:07:26,950 --> 01:07:30,939
bit so yeah escalating of trap or you

1837
01:07:29,799 --> 01:07:33,849
know intentionally causing a traffic

1838
01:07:30,940 --> 01:07:35,770
<font color="#E5E5E5">exhalation is fun all right so real</font>

1839
01:07:33,849 --> 01:07:37,480
quick<font color="#E5E5E5"> implementation of a covert crawler</font>

1840
01:07:35,770 --> 01:07:39,640
so I wrote this thing in Java it

1841
01:07:37,480 --> 01:07:41,890
<font color="#E5E5E5">emulates a windows XP civ respect to IE</font>

1842
01:07:39,640 --> 01:07:43,390
browser that has javascript turned on

1843
01:07:41,890 --> 01:07:47,348
but Java turned off and doesn't have a

1844
01:07:43,390 --> 01:07:49,180
flash parser yeah exactly except for

1845
01:07:47,349 --> 01:07:50,410
render is much better I don't even have

1846
01:07:49,180 --> 01:07:55,779
a visual interface and it probably

1847
01:07:50,410 --> 01:07:58,029
renders<font color="#CCCCCC"> much pathetic-er I this is a</font>

1848
01:07:55,780 --> 01:08:00,790
funny side story so I actually met a

1849
01:07:58,030 --> 01:08:02,440
couple people from the IE 17 and<font color="#E5E5E5"> I had a</font>

1850
01:08:00,790 --> 01:08:04,089
lot<font color="#E5E5E5"> to drink they came down</font><font color="#CCCCCC"> for this</font>

1851
01:08:02,440 --> 01:08:06,880
thing in Atlanta called sip which is

1852
01:08:04,089 --> 01:08:08,890
like<font color="#E5E5E5"> security industry professionals but</font>

1853
01:08:06,880 --> 01:08:10,569
really<font color="#E5E5E5"> it's ship as in take a sip</font>

1854
01:08:08,890 --> 01:08:12,040
because if we hold it a bar each month

1855
01:08:10,569 --> 01:08:13,029
and it's really<font color="#E5E5E5"> just people in Atlanta</font>

1856
01:08:12,040 --> 01:08:15,819
<font color="#E5E5E5">who are in the security industry</font>

1857
01:08:13,030 --> 01:08:19,120
drinking and I'm pretty<font color="#CCCCCC"> sure I told them</font>

1858
01:08:15,819 --> 01:08:21,068
<font color="#CCCCCC">he deserved a kick in the nuts for for</font>

1859
01:08:19,120 --> 01:08:22,809
IE cuz<font color="#CCCCCC"> i was like you guys disbanded the</font>

1860
01:08:21,069 --> 01:08:25,270
IE division and it's only<font color="#E5E5E5"> because of</font>

1861
01:08:22,810 --> 01:08:28,810
<font color="#E5E5E5">firefox you guys even exist anymore and</font>

1862
01:08:25,270 --> 01:08:30,009
this was a big guy but<font color="#E5E5E5"> it luckily he</font>

1863
01:08:28,810 --> 01:08:34,210
agreed with me<font color="#E5E5E5"> he's like no you're right</font>

1864
01:08:30,009 --> 01:08:37,270
we it was<font color="#E5E5E5"> our bad so anyway</font><font color="#CCCCCC"> i use link</font>

1865
01:08:34,210 --> 01:08:40,689
scoring two are you scoring to make link

1866
01:08:37,270 --> 01:08:44,500
decisions multiple threads right across

1867
01:08:40,689 --> 01:08:46,719
multiple<font color="#E5E5E5"> IPS i use a graph I I create a</font>

1868
01:08:44,500 --> 01:08:49,359
graph of the site and<font color="#E5E5E5"> I used a modified</font>

1869
01:08:46,719 --> 01:08:51,310
breadth-first search of the node to find

1870
01:08:49,359 --> 01:08:54,370
random but reasonably short paths from

1871
01:08:51,310 --> 01:08:55,779
any one node to another node the session

1872
01:08:54,370 --> 01:08:58,000
state issues are resolved because I

1873
01:08:55,779 --> 01:09:00,160
don't share cookies and I dip the URLs

1874
01:08:58,000 --> 01:09:02,410
to avoid in url session state issues i

1875
01:09:00,160 --> 01:09:04,809
use personalities to determine how long

1876
01:09:02,410 --> 01:09:06,250
<font color="#CCCCCC">a page should be viewed and also that</font>

1877
01:09:04,810 --> 01:09:08,109
kind of ties into<font color="#E5E5E5"> the key words of the</font>

1878
01:09:06,250 --> 01:09:10,569
link scoring source code should be

1879
01:09:08,109 --> 01:09:13,029
really soon I kind of was doing this on

1880
01:09:10,569 --> 01:09:16,870
the side I<font color="#E5E5E5"> have a really fun position at</font>

1881
01:09:13,029 --> 01:09:19,000
spy they're just<font color="#CCCCCC"> like think stuff up and</font>

1882
01:09:16,870 --> 01:09:20,528
they're like having<font color="#CCCCCC"> to be web stuff but</font>

1883
01:09:19,000 --> 01:09:22,960
it really is kind of a blank<font color="#E5E5E5"> check to do</font>

1884
01:09:20,529 --> 01:09:24,640
it interesting web based research I want

1885
01:09:22,960 --> 01:09:26,049
and so I did this and I kind of said hey

1886
01:09:24,640 --> 01:09:28,779
you know I'm<font color="#E5E5E5"> going up to this thing in</font>

1887
01:09:26,049 --> 01:09:30,310
Atlanta called shmoocon and the vp of

1888
01:09:28,779 --> 01:09:32,260
engineering is like<font color="#CCCCCC"> shmoo what</font>

1889
01:09:30,310 --> 01:09:34,150
hell is he didn't know what that was

1890
01:09:32,260 --> 01:09:37,990
beetle he thought it was a noise you

1891
01:09:34,149 --> 01:09:39,580
made while you were starving<font color="#E5E5E5"> out so I</font>

1892
01:09:37,990 --> 01:09:41,080
had to<font color="#CCCCCC"> explain and</font><font color="#E5E5E5"> actually really funny</font>

1893
01:09:39,580 --> 01:09:42,460
he went to the<font color="#CCCCCC"> school called website and</font>

1894
01:09:41,080 --> 01:09:43,960
I guess maybe he didn't have his glasses

1895
01:09:42,460 --> 01:09:45,970
are something he thought the shmoocon

1896
01:09:43,960 --> 01:09:48,760
logo with like the the shades was

1897
01:09:45,970 --> 01:09:51,250
actually a woman's a woman's chest like

1898
01:09:48,760 --> 01:09:53,290
it was a chick like it was a chick

1899
01:09:51,250 --> 01:09:55,600
wearing like a black bikini in a white

1900
01:09:53,290 --> 01:09:56,800
belly and like cuz you got the nose for

1901
01:09:55,600 --> 01:09:58,600
the shmoo thing it was<font color="#CCCCCC"> like the belly</font>

1902
01:09:56,800 --> 01:10:00,220
button he's like there's a chicken a

1903
01:09:58,600 --> 01:10:04,680
bikini I'm like no that's like this

1904
01:10:00,220 --> 01:10:08,050
moose steal shit I don't<font color="#CCCCCC"> know what it is</font>

1905
01:10:04,680 --> 01:10:10,060
it's the shmoo so<font color="#E5E5E5"> I had to after</font>

1906
01:10:08,050 --> 01:10:12,220
explaining to them what shmoocon was

1907
01:10:10,060 --> 01:10:13,780
like yeah sure and then<font color="#E5E5E5"> I demoed this</font>

1908
01:10:12,220 --> 01:10:15,430
presentation and I actually showed them

1909
01:10:13,780 --> 01:10:16,750
the covert crawler they're like holy

1910
01:10:15,430 --> 01:10:19,450
<font color="#CCCCCC">shit you can't release the source code</font>

1911
01:10:16,750 --> 01:10:21,370
to that I was<font color="#E5E5E5"> like oh man so I'm working</font>

1912
01:10:19,450 --> 01:10:24,280
with<font color="#E5E5E5"> them on them I'd say you got</font>

1913
01:10:21,370 --> 01:10:25,840
probably a<font color="#CCCCCC"> 70-30 chance thirty percent</font>

1914
01:10:24,280 --> 01:10:28,389
chance they'll actually let me end up

1915
01:10:25,840 --> 01:10:29,800
releasing the code but<font color="#E5E5E5"> luckily I</font>

1916
01:10:28,390 --> 01:10:31,810
basically<font color="#E5E5E5"> told you how to write your own</font>

1917
01:10:29,800 --> 01:10:33,010
I mean<font color="#E5E5E5"> seriously it's not that</font>

1918
01:10:31,810 --> 01:10:34,830
complicated if<font color="#E5E5E5"> you buy me a beer</font>

1919
01:10:33,010 --> 01:10:38,470
afterwards I'll totally spilled my guts

1920
01:10:34,830 --> 01:10:39,940
so<font color="#CCCCCC"> you're are you still filming this by</font>

1921
01:10:38,470 --> 01:10:43,420
the way you can<font color="#E5E5E5"> blow that right all</font>

1922
01:10:39,940 --> 01:10:46,480
right all right<font color="#E5E5E5"> so anyway final thoughts</font>

1923
01:10:43,420 --> 01:10:48,340
<font color="#CCCCCC">cuz I've been keeping you here real</font>

1924
01:10:46,480 --> 01:10:49,839
quick sanity checks you brought this up

1925
01:10:48,340 --> 01:10:52,090
someone<font color="#E5E5E5"> doesn't have to crawl the entire</font>

1926
01:10:49,840 --> 01:10:54,010
site just<font color="#E5E5E5"> the interesting stuff to learn</font>

1927
01:10:52,090 --> 01:10:55,090
<font color="#E5E5E5">the methodology that's totally wrong I</font>

1928
01:10:54,010 --> 01:10:56,440
<font color="#E5E5E5">don't know why I said</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> was only two</font>

1929
01:10:55,090 --> 01:10:57,880
hundred thousand pages because I<font color="#CCCCCC"> just</font>

1930
01:10:56,440 --> 01:11:00,190
did a crawl of them last week and it's

1931
01:10:57,880 --> 01:11:01,270
eight hundred thousand-plus but CNN has

1932
01:11:00,190 --> 01:11:02,919
all those pages right well<font color="#CCCCCC"> they're</font>

1933
01:11:01,270 --> 01:11:05,080
<font color="#E5E5E5">really</font><font color="#CCCCCC"> only a few interesting things a</font>

1934
01:11:02,920 --> 01:11:07,540
stock ticker a story content system

1935
01:11:05,080 --> 01:11:09,250
email alerts search engine a malicious

1936
01:11:07,540 --> 01:11:11,680
user really only needs a few samples of

1937
01:11:09,250 --> 01:11:13,690
each to go home you know what there are

1938
01:11:11,680 --> 01:11:15,940
some interesting things here I see that

1939
01:11:13,690 --> 01:11:18,820
there's a page here called you know air

1940
01:11:15,940 --> 01:11:21,129
dot PHP or something and it takes in its

1941
01:11:18,820 --> 01:11:23,440
query string air equals you know could

1942
01:11:21,130 --> 01:11:25,510
<font color="#E5E5E5">not find a page you were found I wonder</font>

1943
01:11:23,440 --> 01:11:26,830
if that that string<font color="#E5E5E5"> of texts could not</font>

1944
01:11:25,510 --> 01:11:28,810
find the<font color="#E5E5E5"> page you requested is ever</font>

1945
01:11:26,830 --> 01:11:31,300
reflected back into the page if that's

1946
01:11:28,810 --> 01:11:34,840
cross-site scripting or you know I see<font color="#CCCCCC"> a</font>

1947
01:11:31,300 --> 01:11:37,780
page called story dot PHP and in it

1948
01:11:34,840 --> 01:11:39,940
squaring is ID equals and it's<font color="#E5E5E5"> always an</font>

1949
01:11:37,780 --> 01:11:40,759
integer and it's never negative and it's

1950
01:11:39,940 --> 01:11:43,009
never larger than

1951
01:11:40,760 --> 01:11:45,530
four billion I wonder if that's a

1952
01:11:43,010 --> 01:11:47,180
primary key in the database so you know

1953
01:11:45,530 --> 01:11:49,580
you can normally<font color="#E5E5E5"> by applying a little</font>

1954
01:11:47,180 --> 01:11:51,920
<font color="#E5E5E5">bit of logic you</font><font color="#CCCCCC"> can pretty much quickly</font>

1955
01:11:49,580 --> 01:11:53,630
figure out where the parts<font color="#E5E5E5"> of</font><font color="#CCCCCC"> the site</font>

1956
01:11:51,920 --> 01:11:56,120
are<font color="#E5E5E5"> vulnerable and you may not need to</font>

1957
01:11:53,630 --> 01:11:57,770
grab everything<font color="#E5E5E5"> and that gets into the</font>

1958
01:11:56,120 --> 01:12:06,110
exhaustive search<font color="#E5E5E5"> versus intelligent</font>

1959
01:11:57,770 --> 01:12:07,520
search so yes how so like oh oh no I

1960
01:12:06,110 --> 01:12:09,139
probably should have<font color="#E5E5E5"> I probably should</font>

1961
01:12:07,520 --> 01:12:11,780
<font color="#CCCCCC">have had some mechanism</font><font color="#E5E5E5"> with like hack</font>

1962
01:12:09,140 --> 01:12:15,260
ability<font color="#E5E5E5"> like this page has you know form</font>

1963
01:12:11,780 --> 01:12:18,559
inputs and contains query data and it's

1964
01:12:15,260 --> 01:12:20,270
<font color="#CCCCCC">actually not a bad idea you get</font><font color="#E5E5E5"> schwag</font>

1965
01:12:18,560 --> 01:12:21,350
you can have anything you want actually

1966
01:12:20,270 --> 01:12:24,860
I have been giving out schwag you guys

1967
01:12:21,350 --> 01:12:26,570
just take this stuff<font color="#CCCCCC"> it's good but you</font>

1968
01:12:24,860 --> 01:12:27,860
know beetle you guys do good work but I

1969
01:12:26,570 --> 01:12:29,179
<font color="#E5E5E5">don't</font><font color="#CCCCCC"> really have a use</font><font color="#E5E5E5"> for this and</font>

1970
01:12:27,860 --> 01:12:32,750
it's they work so hard I couldn't throw

1971
01:12:29,180 --> 01:12:36,440
<font color="#E5E5E5">it away so if you've got here yeah</font><font color="#CCCCCC"> it's</font>

1972
01:12:32,750 --> 01:12:38,060
which which I but<font color="#E5E5E5"> the funny thing with</font>

1973
01:12:36,440 --> 01:12:46,040
my bosses I have no<font color="#CCCCCC"> idea what he thought</font>

1974
01:12:38,060 --> 01:12:47,810
these whiskers were whoa go so everyone

1975
01:12:46,040 --> 01:12:51,740
come up for their swag I'm not going to

1976
01:12:47,810 --> 01:12:53,120
do that<font color="#E5E5E5"> again so in summary crawlers can</font>

1977
01:12:51,740 --> 01:12:55,219
be programmed to send requests just like

1978
01:12:53,120 --> 01:12:57,710
a browser does crawlers can make

1979
01:12:55,220 --> 01:12:59,180
intelligent choices about what links

1980
01:12:57,710 --> 01:13:01,610
they should follow that mimics human

1981
01:12:59,180 --> 01:13:02,960
behavior to some extent covert crawlers

1982
01:13:01,610 --> 01:13:04,969
can be spilled across multiple threads

1983
01:13:02,960 --> 01:13:06,890
and IPS without revealing that there's a

1984
01:13:04,970 --> 01:13:09,140
mass crawl going on that all these guys

1985
01:13:06,890 --> 01:13:10,490
<font color="#E5E5E5">are collaborating session state can be</font>

1986
01:13:09,140 --> 01:13:12,860
handled you know so<font color="#E5E5E5"> that's not an issue</font>

1987
01:13:10,490 --> 01:13:15,710
throttling is tricky still working<font color="#E5E5E5"> on it</font>

1988
01:13:12,860 --> 01:13:17,480
but it can be done you know increases in

1989
01:13:15,710 --> 01:13:19,280
traffic can hide any mistakes I happen

1990
01:13:17,480 --> 01:13:20,450
to make in my algorithm because you know

1991
01:13:19,280 --> 01:13:21,769
if you've<font color="#CCCCCC"> got a</font><font color="#E5E5E5"> hundred thousand people</font>

1992
01:13:20,450 --> 01:13:23,240
<font color="#E5E5E5">visiting you or whatever it doesn't</font>

1993
01:13:21,770 --> 01:13:25,970
<font color="#CCCCCC">really matter</font><font color="#E5E5E5"> that I might have had a</font>

1994
01:13:23,240 --> 01:13:28,250
little problem algorithm<font color="#CCCCCC"> one second a</font>

1995
01:13:25,970 --> 01:13:29,990
proxy selection is a possible weakness

1996
01:13:28,250 --> 01:13:32,090
in the system but<font color="#E5E5E5"> it can be mitigated by</font>

1997
01:13:29,990 --> 01:13:33,290
trying to pick intelligent proxies you

1998
01:13:32,090 --> 01:13:35,480
know if I'm crawling a bank from North

1999
01:13:33,290 --> 01:13:37,850
Korea that's pretty big red flare right

2000
01:13:35,480 --> 01:13:39,889
there so what you should take away from

2001
01:13:37,850 --> 01:13:43,310
<font color="#E5E5E5">all this you can't rely on your web</font>

2002
01:13:39,890 --> 01:13:44,990
server logs you really<font color="#CCCCCC"> can't because you</font>

2003
01:13:43,310 --> 01:13:46,520
know you can't rely<font color="#CCCCCC"> on them to tell you</font>

2004
01:13:44,990 --> 01:13:48,080
where<font color="#E5E5E5"> they're being scoped out as a</font>

2005
01:13:46,520 --> 01:13:51,260
target simply by looking at traffic

2006
01:13:48,080 --> 01:13:53,670
volume you can<font color="#E5E5E5"> rely on your logs to see</font>

2007
01:13:51,260 --> 01:13:55,380
if an attack happened because<font color="#CCCCCC"> you know</font>

2008
01:13:53,670 --> 01:13:57,270
you can always see that holy shit the

2009
01:13:55,380 --> 01:14:00,120
web server did actually receive you know

2010
01:13:57,270 --> 01:14:01,830
a sequel injection attack but you can't

2011
01:14:00,120 --> 01:14:03,719
use it<font color="#CCCCCC"> to find to tell you whether a</font>

2012
01:14:01,830 --> 01:14:05,940
single<font color="#CCCCCC"> users routinely grabbing large</font>

2013
01:14:03,719 --> 01:14:07,800
portions of<font color="#CCCCCC"> your website and</font><font color="#E5E5E5"> you can't</font>

2014
01:14:05,940 --> 01:14:09,750
use it<font color="#CCCCCC"> to reveal who's been testing you</font>

2015
01:14:07,800 --> 01:14:10,949
after you discover an attack trying to

2016
01:14:09,750 --> 01:14:13,560
<font color="#E5E5E5">find that reconnaissance because we can</font>

2017
01:14:10,949 --> 01:14:15,509
hide that and laws are simply logs are

2018
01:14:13,560 --> 01:14:17,370
simply a passive defense and you need to

2019
01:14:15,510 --> 01:14:18,510
stop<font color="#E5E5E5"> being passive so the funny thing</font>

2020
01:14:17,370 --> 01:14:20,130
about this is if you fix your web

2021
01:14:18,510 --> 01:14:21,210
vulnerability it doesn't matter<font color="#E5E5E5"> if they</font>

2022
01:14:20,130 --> 01:14:23,040
covert call you because you're<font color="#CCCCCC"> not</font>

2023
01:14:21,210 --> 01:14:25,710
single injectable because you have a new

2024
01:14:23,040 --> 01:14:27,420
user reg is used parameterised queries

2025
01:14:25,710 --> 01:14:29,520
instead of concatenated strings together

2026
01:14:27,420 --> 01:14:30,840
with user input to create a sequel query

2027
01:14:29,520 --> 01:14:33,270
I mean there are ways you can mitigate

2028
01:14:30,840 --> 01:14:35,040
this stuff you can't make so you can't

2029
01:14:33,270 --> 01:14:37,500
protect<font color="#E5E5E5"> prevent someone from covertly</font>

2030
01:14:35,040 --> 01:14:39,510
crawling you but you can certainly make

2031
01:14:37,500 --> 01:14:48,570
the fruit of that covert crawl worthless

2032
01:14:39,510 --> 01:14:49,739
so anybody have any questions yes no I'm

2033
01:14:48,570 --> 01:14:56,900
gonna hold<font color="#E5E5E5"> this till the end and if</font>

2034
01:14:49,739 --> 01:14:58,709
you're very<font color="#CCCCCC"> good</font><font color="#E5E5E5"> yes uh I just kind of I</font>

2035
01:14:56,900 --> 01:15:00,269
could<font color="#E5E5E5"> tell you some</font><font color="#CCCCCC"> super-secret</font>

2036
01:14:58,710 --> 01:15:01,440
<font color="#E5E5E5">scientific method but I just kind of SAT</font>

2037
01:15:00,270 --> 01:15:02,940
around drinking one night thinking<font color="#E5E5E5"> of</font>

2038
01:15:01,440 --> 01:15:06,739
what are fun words I like to<font color="#E5E5E5"> click on</font>

2039
01:15:02,940 --> 01:15:06,739
like xxx and porn or something like that

2040
01:15:07,010 --> 01:15:13,350
<font color="#CCCCCC">you can pull meta tags out to use a to</font>

2041
01:15:10,260 --> 01:15:14,850
pull out<font color="#E5E5E5"> the keywords but I mean I guess</font>

2042
01:15:13,350 --> 01:15:17,670
<font color="#CCCCCC">I could do that to the have it like have</font>

2043
01:15:14,850 --> 01:15:23,070
<font color="#CCCCCC">it like a feedback to dynamically change</font>

2044
01:15:17,670 --> 01:15:29,630
what are good and bad words right that's

2045
01:15:23,070 --> 01:15:29,630
not a bad idea yes the<font color="#E5E5E5"> lady in</font><font color="#CCCCCC"> that</font>

2046
01:15:36,100 --> 01:16:06,710
please do I would be interesting to find

2047
01:16:05,150 --> 01:16:09,170
out how you can use a covert crawler for

2048
01:16:06,710 --> 01:16:11,480
anything I have to<font color="#E5E5E5"> quote the simpsons</font>

2049
01:16:09,170 --> 01:16:13,070
and professor frink when he says well to

2050
01:16:11,480 --> 01:16:20,389
be honest the Ray only has evil

2051
01:16:13,070 --> 01:16:23,660
implication if you could<font color="#E5E5E5"> think of a way</font>

2052
01:16:20,390 --> 01:16:27,370
that it could do good more power to<font color="#E5E5E5"> you</font>

2053
01:16:23,660 --> 01:16:27,370
but I didn't bother

2054
01:16:43,220 --> 01:16:50,010
<font color="#CCCCCC">you people write better code yeah right</font>

2055
01:16:47,720 --> 01:16:51,270
<font color="#CCCCCC">there</font><font color="#E5E5E5"> he took care of it for you there</font>

2056
01:16:50,010 --> 01:17:02,640
are<font color="#E5E5E5"> lots of hands I think</font><font color="#CCCCCC"> you had your</font>

2057
01:16:51,270 --> 01:17:05,150
hand yes certainly<font color="#CCCCCC"> you could um but you</font>

2058
01:17:02,640 --> 01:17:07,470
know I beat you again they could<font color="#CCCCCC"> just go</font>

2059
01:17:05,150 --> 01:17:09,360
yeah they could go to<font color="#E5E5E5"> see a flight if</font>

2060
01:17:07,470 --> 01:17:10,890
it's<font color="#E5E5E5"> actually on slashdot I mean</font><font color="#CCCCCC"> they're</font>

2061
01:17:09,360 --> 01:17:12,480
<font color="#E5E5E5">certainly I didn't cover everything you</font>

2062
01:17:10,890 --> 01:17:18,390
could do that's not a bad idea either I

2063
01:17:12,480 --> 01:17:20,190
like<font color="#E5E5E5"> that you can get swag yes it is not</font>

2064
01:17:18,390 --> 01:17:24,030
necessarily<font color="#CCCCCC"> the crawling parks but the</font>

2065
01:17:20,190 --> 01:17:25,919
score in the park yeah hopefully you get

2066
01:17:24,030 --> 01:17:27,210
it up I want to<font color="#E5E5E5"> take that piece and use</font>

2067
01:17:25,920 --> 01:17:28,800
it on our website for marketing

2068
01:17:27,210 --> 01:17:30,900
department so they can understand how

2069
01:17:28,800 --> 01:17:32,520
the interface is crappy it make you

2070
01:17:30,900 --> 01:17:34,110
better that actually was the kind of<font color="#E5E5E5"> a</font>

2071
01:17:32,520 --> 01:17:35,670
fun part<font color="#E5E5E5"> of this is I got halfway</font>

2072
01:17:34,110 --> 01:17:38,160
through<font color="#E5E5E5"> it I'm like wow what I'm really</font>

2073
01:17:35,670 --> 01:17:41,040
<font color="#E5E5E5">kind of doing is I'm figure I'm trying</font>

2074
01:17:38,160 --> 01:17:42,599
<font color="#CCCCCC">to take a site and figure out derive</font>

2075
01:17:41,040 --> 01:17:45,120
meaning from it which is exactly what

2076
01:17:42,600 --> 01:17:47,670
those slimy search engine optimization

2077
01:17:45,120 --> 01:17:49,110
people do and so when i created this you

2078
01:17:47,670 --> 01:17:50,340
know here's the here's<font color="#E5E5E5"> the graph</font>

2079
01:17:49,110 --> 01:17:51,960
representing your website how

2080
01:17:50,340 --> 01:17:54,150
interconnected it is you know<font color="#E5E5E5"> i can</font><font color="#CCCCCC"> i</font>

2081
01:17:51,960 --> 01:17:55,710
can<font color="#E5E5E5"> determine metrics like how easy is</font>

2082
01:17:54,150 --> 01:17:59,040
it to get from this page to this page

2083
01:17:55,710 --> 01:18:00,990
how obvious it how obvious is it to your

2084
01:17:59,040 --> 01:18:02,610
users based on the size and<font color="#CCCCCC"> presentation</font>

2085
01:18:00,990 --> 01:18:03,900
of their links how they navigate I mean

2086
01:18:02,610 --> 01:18:05,670
there's certainly other implications and

2087
01:18:03,900 --> 01:18:07,650
to be quite frank that's<font color="#E5E5E5"> what my company</font>

2088
01:18:05,670 --> 01:18:12,420
<font color="#E5E5E5">was most interested in was the link</font>

2089
01:18:07,650 --> 01:18:14,519
scoring and the the kind<font color="#E5E5E5"> of the using</font>

2090
01:18:12,420 --> 01:18:18,000
the graph<font color="#E5E5E5"> and determining popularity as</font>

2091
01:18:14,520 --> 01:18:20,090
we go I pretty much pulled you<font color="#CCCCCC"> dogger</font>

2092
01:18:18,000 --> 01:18:22,560
them that I used it's not very complex

2093
01:18:20,090 --> 01:18:24,450
<font color="#E5E5E5">and if you give me drink drinks I might</font>

2094
01:18:22,560 --> 01:18:27,390
actually show you<font color="#E5E5E5"> the chava code it's</font>

2095
01:18:24,450 --> 01:18:29,160
it's<font color="#CCCCCC"> very trivial if you know go through</font>

2096
01:18:27,390 --> 01:18:32,180
a word list if the words there increment

2097
01:18:29,160 --> 01:18:33,849
a score<font color="#CCCCCC"> and it's</font><font color="#E5E5E5"> pretty simple yes</font>

2098
01:18:32,180 --> 01:18:36,770
<font color="#CCCCCC">traxxas really</font>

2099
01:18:33,850 --> 01:18:40,340
isn't the easiest way to do so to just

2100
01:18:36,770 --> 01:18:43,490
use your next-door neighbors open access

2101
01:18:40,340 --> 01:18:45,020
point minus longer probably like uterus

2102
01:18:43,490 --> 01:18:46,370
you could but the point of this is I

2103
01:18:45,020 --> 01:18:48,140
didn't want them<font color="#CCCCCC"> to know something was</font>

2104
01:18:46,370 --> 01:18:50,480
imminent everyone does reconnaissance

2105
01:18:48,140 --> 01:18:52,550
before they attack and if I suddenly

2106
01:18:50,480 --> 01:18:53,959
know that I<font color="#CCCCCC"> noticed you know I have a</font>

2107
01:18:52,550 --> 01:18:56,120
really anal cyst admin and I have

2108
01:18:53,960 --> 01:18:58,670
something email me if when I in a cron

2109
01:18:56,120 --> 01:19:00,530
job if a log is too large and I'm

2110
01:18:58,670 --> 01:19:02,450
compressing it be like holy crap i just

2111
01:19:00,530 --> 01:19:04,519
compressed my log why is today I'm<font color="#E5E5E5"> doing</font>

2112
01:19:02,450 --> 01:19:06,889
<font color="#E5E5E5">it again let me go investigate I just</font>

2113
01:19:04,520 --> 01:19:08,870
wanted<font color="#CCCCCC"> to show that you know you you</font>

2114
01:19:06,890 --> 01:19:09,770
don't know anything's coming but

2115
01:19:08,870 --> 01:19:11,540
certainly you can go to<font color="#E5E5E5"> your neighbor's</font>

2116
01:19:09,770 --> 01:19:13,460
access point and you know do whatever

2117
01:19:11,540 --> 01:19:16,400
you want get your hardware porn or

2118
01:19:13,460 --> 01:19:17,630
something yeah<font color="#E5E5E5"> I'm going to take like</font>

2119
01:19:16,400 --> 01:19:19,250
two more questions and then you eyes

2120
01:19:17,630 --> 01:19:22,190
have already been very good sorry

2121
01:19:19,250 --> 01:19:23,720
annoyed<font color="#E5E5E5"> I don't mean to run over I'll</font>

2122
01:19:22,190 --> 01:19:25,009
tell<font color="#E5E5E5"> you what I'll do one more question</font>

2123
01:19:23,720 --> 01:19:27,350
and then you guys can talk to<font color="#E5E5E5"> me</font>

2124
01:19:25,010 --> 01:19:34,760
afterwards that's so good who has a very

2125
01:19:27,350 --> 01:19:37,930
<font color="#CCCCCC">good question</font><font color="#E5E5E5"> I like heineken</font><font color="#CCCCCC"> alright</font>

2126
01:19:34,760 --> 01:19:37,930
<font color="#E5E5E5">that's a good</font><font color="#CCCCCC"> question ok I'm done</font>

