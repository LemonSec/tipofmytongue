1
00:00:05,800 --> 00:00:11,318
[Music]

2
00:00:11,440 --> 00:00:13,519
welcome everyone welcome to the north

3
00:00:13,519 --> 00:00:14,480
pole

4
00:00:14,480 --> 00:00:17,119
it is cold up here so i've got some hot

5
00:00:17,119 --> 00:00:19,119
chocolate to help keep me warm and i

6
00:00:19,119 --> 00:00:21,039
hope that you are comfy and cozy

7
00:00:21,039 --> 00:00:22,560
wherever you are

8
00:00:22,560 --> 00:00:24,960
my name is barry allen kennel and i've

9
00:00:24,960 --> 00:00:26,720
placed a little bit of info here by way

10
00:00:26,720 --> 00:00:29,279
of introduction for you about myself but

11
00:00:29,279 --> 00:00:31,359
it is extremely busy up here this time

12
00:00:31,359 --> 00:00:33,760
of year so we're going to keep moving

13
00:00:33,760 --> 00:00:37,120
so my goal for your this brief time that

14
00:00:37,120 --> 00:00:39,680
i have with you today um is not to

15
00:00:39,680 --> 00:00:41,360
answer all your questions i would love

16
00:00:41,360 --> 00:00:43,600
to do that but i simply don't have the

17
00:00:43,600 --> 00:00:46,719
cycles it's so busy here right now

18
00:00:46,719 --> 00:00:48,879
so what i'd like to do is the opposite

19
00:00:48,879 --> 00:00:50,800
i'd like to leave you with tons of

20
00:00:50,800 --> 00:00:51,840
questions

21
00:00:51,840 --> 00:00:54,239
hopefully this will wet your appetite

22
00:00:54,239 --> 00:00:56,559
and fill you with curiosity

23
00:00:56,559 --> 00:00:58,559
and you will want to it'll give you

24
00:00:58,559 --> 00:01:00,399
point you in the right direction but you

25
00:01:00,399 --> 00:01:02,320
will want to use the resources that we

26
00:01:02,320 --> 00:01:05,600
give you here um and delve in on your

27
00:01:05,600 --> 00:01:07,200
own tongue

28
00:01:07,200 --> 00:01:09,360
i'd be remiss if i did not thank santa

29
00:01:09,360 --> 00:01:11,520
and his amazing elves over at counter

30
00:01:11,520 --> 00:01:13,520
hack and the sands institute for hosting

31
00:01:13,520 --> 00:01:16,560
this epic ctf event a ton of hard work

32
00:01:16,560 --> 00:01:17,840
goes into putting an event like this

33
00:01:17,840 --> 00:01:19,680
together and it's a real joy to be a

34
00:01:19,680 --> 00:01:20,880
part of

35
00:01:20,880 --> 00:01:22,400
since it is christmas time here at the

36
00:01:22,400 --> 00:01:24,640
north pole this talk will be my gift to

37
00:01:24,640 --> 00:01:27,439
you we're going to talk about a lot of

38
00:01:27,439 --> 00:01:30,000
free and open source tools and projects

39
00:01:30,000 --> 00:01:32,880
here today but do me a favor i'm going

40
00:01:32,880 --> 00:01:34,640
to challenge you

41
00:01:34,640 --> 00:01:36,720
not to be a grinch

42
00:01:36,720 --> 00:01:39,200
do not pull an ebonies or scrooge and

43
00:01:39,200 --> 00:01:41,040
just take take take

44
00:01:41,040 --> 00:01:42,960
there's a lot of ways that you can give

45
00:01:42,960 --> 00:01:45,520
back in this community and you know it's

46
00:01:45,520 --> 00:01:47,439
been a tough couple of years i mean i i

47
00:01:47,439 --> 00:01:50,000
have neighbors who are you know work on

48
00:01:50,000 --> 00:01:52,079
broadway and they have not worked in

49
00:01:52,079 --> 00:01:53,360
more than a year and a half and they're

50
00:01:53,360 --> 00:01:54,560
finally now

51
00:01:54,560 --> 00:01:55,680
going back

52
00:01:55,680 --> 00:01:58,799
um so i get it it's been tough um if you

53
00:01:58,799 --> 00:02:00,479
can't give financially to some of these

54
00:02:00,479 --> 00:02:02,079
authors maybe you can just send them

55
00:02:02,079 --> 00:02:05,040
thank you and email like i really liked

56
00:02:05,040 --> 00:02:06,479
that application that you built and it

57
00:02:06,479 --> 00:02:09,038
was really helpful and here's why

58
00:02:09,038 --> 00:02:11,280
or if you're a coder and you can pitch

59
00:02:11,280 --> 00:02:12,640
in great

60
00:02:12,640 --> 00:02:15,840
but try to give back tis the season

61
00:02:15,840 --> 00:02:17,680
and it goes a long way up here i will

62
00:02:17,680 --> 00:02:20,000
say with when it comes to uh doling out

63
00:02:20,000 --> 00:02:21,760
the naughty and the nice lists just

64
00:02:21,760 --> 00:02:23,120
saying

65
00:02:23,120 --> 00:02:26,080
uh brief disclaimer about me um i do

66
00:02:26,080 --> 00:02:27,760
work for bank of new york melon however

67
00:02:27,760 --> 00:02:29,360
i am not representing bank of new york

68
00:02:29,360 --> 00:02:31,599
melbourne with this talk any examples or

69
00:02:31,599 --> 00:02:33,840
scenarios used in this presentation hold

70
00:02:33,840 --> 00:02:36,160
absolutely no affiliation with the bank

71
00:02:36,160 --> 00:02:37,599
of new york

72
00:02:37,599 --> 00:02:39,360
so let's talk about what we're going to

73
00:02:39,360 --> 00:02:41,120
talk about real quick

74
00:02:41,120 --> 00:02:42,879
virtualization software right the

75
00:02:42,879 --> 00:02:44,319
hypervisor that we're going to stick

76
00:02:44,319 --> 00:02:46,800
with today is virtualbox it's free open

77
00:02:46,800 --> 00:02:49,360
source very easy to use and it's come a

78
00:02:49,360 --> 00:02:52,879
long way over the years um vmware i like

79
00:02:52,879 --> 00:02:56,319
i like it a lot um and you know even

80
00:02:56,319 --> 00:02:58,159
their paid version is you know fairly

81
00:02:58,159 --> 00:03:00,879
affordable right um they offer a free

82
00:03:00,879 --> 00:03:02,959
version now here's the reason why we're

83
00:03:02,959 --> 00:03:04,720
not going to use it today you know we're

84
00:03:04,720 --> 00:03:06,640
going to be blowing up samples you know

85
00:03:06,640 --> 00:03:09,440
ransomware malware um and we need to be

86
00:03:09,440 --> 00:03:11,840
able to revert back to a clean state

87
00:03:11,840 --> 00:03:14,720
and unless the free version of vmware

88
00:03:14,720 --> 00:03:16,319
the vmware player unless there's a

89
00:03:16,319 --> 00:03:18,400
registry hack that i'm not aware of you

90
00:03:18,400 --> 00:03:20,720
just can't do that and so you know so

91
00:03:20,720 --> 00:03:21,840
that's why we're not going to cover it

92
00:03:21,840 --> 00:03:24,560
here uh but it's a great product

93
00:03:24,560 --> 00:03:26,480
as far as the cloud goes

94
00:03:26,480 --> 00:03:28,640
personally i've built malware labs in

95
00:03:28,640 --> 00:03:31,440
aws in google cloud

96
00:03:31,440 --> 00:03:33,120
and i've heard that digitalocean is

97
00:03:33,120 --> 00:03:35,519
fantastic and it's only about five bucks

98
00:03:35,519 --> 00:03:37,040
a month something like that and the

99
00:03:37,040 --> 00:03:38,720
machines are really fast

100
00:03:38,720 --> 00:03:41,120
um but we won't cover that today um just

101
00:03:41,120 --> 00:03:44,720
keep in mind um with aws you know and

102
00:03:44,720 --> 00:03:46,400
gcp like those are the ones that i've

103
00:03:46,400 --> 00:03:49,040
used um i know that you know there's

104
00:03:49,040 --> 00:03:51,040
the cloud is someone else's computer

105
00:03:51,040 --> 00:03:52,879
right so there are you know strict rules

106
00:03:52,879 --> 00:03:54,239
around running malware and you just need

107
00:03:54,239 --> 00:03:57,200
to stay within those confines and um you

108
00:03:57,200 --> 00:03:59,519
can you can get away with it for free

109
00:03:59,519 --> 00:04:01,040
if you stay within their free

110
00:04:01,040 --> 00:04:03,200
requirements and free limits um great

111
00:04:03,200 --> 00:04:05,280
tools great tools by the way

112
00:04:05,280 --> 00:04:06,560
so we're going to talk about where to

113
00:04:06,560 --> 00:04:08,799
find virtual analysis boxes

114
00:04:08,799 --> 00:04:10,400
how to configure them

115
00:04:10,400 --> 00:04:12,799
where to find malware analysis tools

116
00:04:12,799 --> 00:04:15,200
where to find malware samples and if the

117
00:04:15,200 --> 00:04:18,720
demo gods prevail we will do a live demo

118
00:04:18,720 --> 00:04:20,959
let's talk about vms first we need the

119
00:04:20,959 --> 00:04:23,680
software to run the vm so virtualbox you

120
00:04:23,680 --> 00:04:25,440
can grab it here comes in a lot of

121
00:04:25,440 --> 00:04:27,600
different flavors um the one thing i

122
00:04:27,600 --> 00:04:30,240
will i will point you to when it comes

123
00:04:30,240 --> 00:04:32,479
to virtualbox there's they have what's

124
00:04:32,479 --> 00:04:34,960
called the the extension pack and the

125
00:04:34,960 --> 00:04:37,759
guest additions um and those might throw

126
00:04:37,759 --> 00:04:39,680
you a little bit at first if you don't

127
00:04:39,680 --> 00:04:42,000
know much about them so this third link

128
00:04:42,000 --> 00:04:44,000
here on the bottom of the screen takes

129
00:04:44,000 --> 00:04:46,479
you to a forum and it's moderated by the

130
00:04:46,479 --> 00:04:48,320
folks at virtualbox

131
00:04:48,320 --> 00:04:50,320
some of the authors and this one

132
00:04:50,320 --> 00:04:53,520
particular link explains the differences

133
00:04:53,520 --> 00:04:55,680
you know between those two in like one

134
00:04:55,680 --> 00:04:57,600
paragraph and it's succinct and it's

135
00:04:57,600 --> 00:04:59,600
really really uh it was really helpful

136
00:04:59,600 --> 00:05:01,759
for me so check it out

137
00:05:01,759 --> 00:05:04,080
as far as machines to run

138
00:05:04,080 --> 00:05:06,160
i like this one a lot this is a

139
00:05:06,160 --> 00:05:08,880
microsoft free eval version it's a

140
00:05:08,880 --> 00:05:11,680
windows 10 edge machine it's good for 90

141
00:05:11,680 --> 00:05:12,560
days

142
00:05:12,560 --> 00:05:15,759
and it's fast i like this one a lot

143
00:05:15,759 --> 00:05:18,400
as far as a different flavor this one is

144
00:05:18,400 --> 00:05:21,199
a windows 10 dev machine

145
00:05:21,199 --> 00:05:23,199
i mean it's still windows 10.

146
00:05:23,199 --> 00:05:24,479
i always say different

147
00:05:24,479 --> 00:05:25,840
not really different flavor one of the

148
00:05:25,840 --> 00:05:27,840
differences that you this machine gives

149
00:05:27,840 --> 00:05:29,840
you that this one doesn't so this one

150
00:05:29,840 --> 00:05:32,320
runs a little faster but it's a smaller

151
00:05:32,320 --> 00:05:34,800
hard drive this one out of the box is

152
00:05:34,800 --> 00:05:37,520
125 gigs and you can go on the back and

153
00:05:37,520 --> 00:05:38,800
you know you can you can adjust the

154
00:05:38,800 --> 00:05:40,240
sizes um

155
00:05:40,240 --> 00:05:42,000
but you know i like out of the box right

156
00:05:42,000 --> 00:05:43,919
there that you know i have all that

157
00:05:43,919 --> 00:05:46,320
space if i want it they're good for 90

158
00:05:46,320 --> 00:05:47,840
days now

159
00:05:47,840 --> 00:05:49,840
when we talk about extending the life of

160
00:05:49,840 --> 00:05:52,080
the machines snapshotting is a little

161
00:05:52,080 --> 00:05:53,919
different it's my understanding that

162
00:05:53,919 --> 00:05:57,600
snapshotting does not extend the license

163
00:05:57,600 --> 00:06:00,080
right but this does this is called

164
00:06:00,080 --> 00:06:02,400
rearming and reverting back

165
00:06:02,400 --> 00:06:03,120
so

166
00:06:03,120 --> 00:06:04,960
you know you can do this twice i think

167
00:06:04,960 --> 00:06:08,639
for every vm so you can see here on

168
00:06:08,639 --> 00:06:11,440
my on the the um example i give you at

169
00:06:11,440 --> 00:06:14,160
the top of the screen i had 12 days left

170
00:06:14,160 --> 00:06:17,440
on my 90 day vm right good for 90 days

171
00:06:17,440 --> 00:06:20,639
well i did a re you know rearm um and

172
00:06:20,639 --> 00:06:22,800
boom i'm back to 90 days so keep that in

173
00:06:22,800 --> 00:06:24,400
mind

174
00:06:24,400 --> 00:06:26,319
more machines from microsoft all the

175
00:06:26,319 --> 00:06:28,560
server products are all trial eval

176
00:06:28,560 --> 00:06:30,720
versions for free

177
00:06:30,720 --> 00:06:32,479
um and those give you they're good for

178
00:06:32,479 --> 00:06:35,759
180 days you know so uh let's talk about

179
00:06:35,759 --> 00:06:38,400
remnants so revnex is uh you know when i

180
00:06:38,400 --> 00:06:40,160
think of reverse engineering and i open

181
00:06:40,160 --> 00:06:42,479
up the dictionary and i look at you know

182
00:06:42,479 --> 00:06:44,000
i look up reverse engineering i see

183
00:06:44,000 --> 00:06:46,560
lenny zelser's picture in my dictionary

184
00:06:46,560 --> 00:06:49,360
my book um so lenny zeltzer

185
00:06:49,360 --> 00:06:51,280
is the author of the sans reverse

186
00:06:51,280 --> 00:06:53,039
engineering malware class

187
00:06:53,039 --> 00:06:54,880
i've taken his course twice in its

188
00:06:54,880 --> 00:06:57,360
fantastic class and he gives away a lot

189
00:06:57,360 --> 00:07:00,319
of the resources for free so this is his

190
00:07:00,319 --> 00:07:02,240
machine that he uses in the class to

191
00:07:02,240 --> 00:07:04,960
analyze malware it comes pre-loaded with

192
00:07:04,960 --> 00:07:06,720
tons of tools that you can look at

193
00:07:06,720 --> 00:07:08,080
malware with

194
00:07:08,080 --> 00:07:09,520
that's the one we're going to use um

195
00:07:09,520 --> 00:07:12,160
this one is very good as well this is uh

196
00:07:12,160 --> 00:07:13,759
it used to be fire i think when they did

197
00:07:13,759 --> 00:07:16,000
their recent reorg i think mandy had got

198
00:07:16,000 --> 00:07:17,680
the tools side of the house i think is

199
00:07:17,680 --> 00:07:20,400
one of the things um that happened um

200
00:07:20,400 --> 00:07:22,240
but it's still you know still being

201
00:07:22,240 --> 00:07:23,440
supported

202
00:07:23,440 --> 00:07:25,440
it's a fantastic distro

203
00:07:25,440 --> 00:07:26,560
i think it's

204
00:07:26,560 --> 00:07:29,120
it definitely needs at least 60 gigs

205
00:07:29,120 --> 00:07:30,479
so you know make sure you have plenty of

206
00:07:30,479 --> 00:07:32,720
free space but i've used it in the past

207
00:07:32,720 --> 00:07:34,800
and it is very very uh

208
00:07:34,800 --> 00:07:36,880
very good it it's also you know comes

209
00:07:36,880 --> 00:07:38,319
pre-packed with like

210
00:07:38,319 --> 00:07:40,880
tons of tools to look at malware

211
00:07:40,880 --> 00:07:42,880
so i didn't want to not talk about cali

212
00:07:42,880 --> 00:07:46,879
so cali is not you know probably like

213
00:07:46,879 --> 00:07:48,960
when i think of a machine that comes

214
00:07:48,960 --> 00:07:51,360
pre-loaded with malware analysis tools i

215
00:07:51,360 --> 00:07:53,520
mean i probably wouldn't think of cali

216
00:07:53,520 --> 00:07:54,560
per se

217
00:07:54,560 --> 00:07:56,560
but it's got tons of tools that are

218
00:07:56,560 --> 00:07:58,160
great for looking at malware so it's

219
00:07:58,160 --> 00:08:00,560
also a possibility

220
00:08:00,560 --> 00:08:02,479
so that's it for you know building that

221
00:08:02,479 --> 00:08:04,400
that building our machines that that

222
00:08:04,400 --> 00:08:06,319
just scratched the surface i know but

223
00:08:06,319 --> 00:08:07,680
we've got to move on i have very little

224
00:08:07,680 --> 00:08:08,960
time here so

225
00:08:08,960 --> 00:08:11,039
uh these are some more resources that

226
00:08:11,039 --> 00:08:13,120
are more in depth that i'm going to

227
00:08:13,120 --> 00:08:14,479
leave with you so you can check those

228
00:08:14,479 --> 00:08:15,520
out

229
00:08:15,520 --> 00:08:17,840
let's talk about configuring these vms

230
00:08:17,840 --> 00:08:19,599
so when we're running ransomware you

231
00:08:19,599 --> 00:08:21,360
know back in the day when ransomware was

232
00:08:21,360 --> 00:08:23,120
just coming on the scene you know

233
00:08:23,120 --> 00:08:25,440
ransomware has a list of file types

234
00:08:25,440 --> 00:08:26,879
right that it's going to encrypt and

235
00:08:26,879 --> 00:08:28,720
then it's going to go after and back in

236
00:08:28,720 --> 00:08:30,479
the day i didn't really care about pcap

237
00:08:30,479 --> 00:08:32,479
files so you know i could i could hose

238
00:08:32,479 --> 00:08:34,159
my entire box but i still had my

239
00:08:34,159 --> 00:08:35,839
analysis pcap you know i could go back

240
00:08:35,839 --> 00:08:37,599
and look at everything well you know the

241
00:08:37,599 --> 00:08:39,679
authors kind of i think um

242
00:08:39,679 --> 00:08:42,000
you know you know became wise to those

243
00:08:42,000 --> 00:08:43,440
types of things and so they you know

244
00:08:43,440 --> 00:08:45,839
they build in anti-forensics now

245
00:08:45,839 --> 00:08:47,279
uh so

246
00:08:47,279 --> 00:08:48,600
you know we just need to think about

247
00:08:48,600 --> 00:08:51,680
anti-anti-forensics right um so a little

248
00:08:51,680 --> 00:08:53,519
bit of of that

249
00:08:53,519 --> 00:08:55,440
is what we're going to do here today

250
00:08:55,440 --> 00:08:57,760
we're going to pipe the traffic out of

251
00:08:57,760 --> 00:09:00,240
our victim machine our windows machine

252
00:09:00,240 --> 00:09:01,519
is going to be the victim machine and

253
00:09:01,519 --> 00:09:02,720
that's where we're going to detonate our

254
00:09:02,720 --> 00:09:03,680
samples

255
00:09:03,680 --> 00:09:05,200
and we're going to pipe that traffic out

256
00:09:05,200 --> 00:09:07,279
to remix so the way we're going to do

257
00:09:07,279 --> 00:09:09,600
that is we're going to run ifconfig on

258
00:09:09,600 --> 00:09:12,800
remnix and file away that ip that it

259
00:09:12,800 --> 00:09:14,080
gives us right

260
00:09:14,080 --> 00:09:16,160
then on the windows machine you run

261
00:09:16,160 --> 00:09:19,120
ipconfig and whatever ip it gives you

262
00:09:19,120 --> 00:09:20,880
just hard code that in and make it

263
00:09:20,880 --> 00:09:23,360
static right then for the default

264
00:09:23,360 --> 00:09:25,519
gateway you're going to put in the ip

265
00:09:25,519 --> 00:09:27,760
that you had for your remnix machine and

266
00:09:27,760 --> 00:09:30,000
for the dns server as well and what that

267
00:09:30,000 --> 00:09:31,680
does it allows the two to communicate to

268
00:09:31,680 --> 00:09:32,959
each other

269
00:09:32,959 --> 00:09:34,000
and

270
00:09:34,000 --> 00:09:35,680
you know the remnx box can reach the

271
00:09:35,680 --> 00:09:37,360
internet but the windows host cannot and

272
00:09:37,360 --> 00:09:39,360
that's kind of what you want

273
00:09:39,360 --> 00:09:40,240
so

274
00:09:40,240 --> 00:09:42,160
the first thing i like to do on my remix

275
00:09:42,160 --> 00:09:43,600
machine is

276
00:09:43,600 --> 00:09:46,160
i fire up wireshark and then i fire up

277
00:09:46,160 --> 00:09:48,800
fake dns and that's going to log the

278
00:09:48,800 --> 00:09:51,440
traffic queries right from the victim

279
00:09:51,440 --> 00:09:53,519
machine which is the windows machine

280
00:09:53,519 --> 00:09:55,920
um in over on the windows side of things

281
00:09:55,920 --> 00:09:57,440
i fire up burp

282
00:09:57,440 --> 00:09:59,839
um in you know process hacker or

283
00:09:59,839 --> 00:10:01,920
frockmon or you know a host of you know

284
00:10:01,920 --> 00:10:03,920
many other tools that you can run um

285
00:10:03,920 --> 00:10:05,680
just a few of my favorites you know but

286
00:10:05,680 --> 00:10:06,959
there's many other

287
00:10:06,959 --> 00:10:09,519
others that you can that you can run

288
00:10:09,519 --> 00:10:12,079
so quick things before we detonate host

289
00:10:12,079 --> 00:10:14,000
only will keep you out of trouble

290
00:10:14,000 --> 00:10:15,680
make sure the host that's running the

291
00:10:15,680 --> 00:10:18,640
virtual software software is non-prod so

292
00:10:18,640 --> 00:10:21,680
if something does escape uh you know it

293
00:10:21,680 --> 00:10:23,279
doesn't rock your world

294
00:10:23,279 --> 00:10:25,440
take snapshots that's why you know one

295
00:10:25,440 --> 00:10:27,440
of the reasons why we use vms right so

296
00:10:27,440 --> 00:10:29,839
that we can revert back to a clean state

297
00:10:29,839 --> 00:10:32,079
turn off the av under the ends shut the

298
00:10:32,079 --> 00:10:34,399
windows updates down set your vm

299
00:10:34,399 --> 00:10:36,880
firewalls off i know this is not it

300
00:10:36,880 --> 00:10:38,480
sounds counterintuitive right but just

301
00:10:38,480 --> 00:10:41,839
remember this is not this is not a

302
00:10:41,839 --> 00:10:44,320
talk on how to harden your endpoints

303
00:10:44,320 --> 00:10:46,079
so uh we're doing something very

304
00:10:46,079 --> 00:10:47,839
specific here so this is why we want

305
00:10:47,839 --> 00:10:51,200
these uh these settings the way we we do

306
00:10:51,200 --> 00:10:52,640
if you're kind of new to malware

307
00:10:52,640 --> 00:10:55,040
analysis just one thing to file away is

308
00:10:55,040 --> 00:10:56,959
you know when you download malware from

309
00:10:56,959 --> 00:10:58,880
places like virustotal

310
00:10:58,880 --> 00:11:00,240
it's going to be zipped up and the

311
00:11:00,240 --> 00:11:02,640
password is usually infected nine times

312
00:11:02,640 --> 00:11:04,959
out of ten it's going to be infected um

313
00:11:04,959 --> 00:11:07,120
the one last thing the usernames and the

314
00:11:07,120 --> 00:11:08,720
passwords for all of the vms that i

315
00:11:08,720 --> 00:11:10,880
mentioned should be right there on the

316
00:11:10,880 --> 00:11:12,720
downloads page you just kind of have to

317
00:11:12,720 --> 00:11:15,120
look around for them but they're there

318
00:11:15,120 --> 00:11:16,880
where to find tools

319
00:11:16,880 --> 00:11:19,200
again rem next the document

320
00:11:19,200 --> 00:11:21,760
documentation page for remnux is

321
00:11:21,760 --> 00:11:24,240
fantastic so all of these are little fly

322
00:11:24,240 --> 00:11:25,600
out menus that you see on the screen

323
00:11:25,600 --> 00:11:28,160
here and if you click on them it'll take

324
00:11:28,160 --> 00:11:30,399
you to a little description about like

325
00:11:30,399 --> 00:11:32,800
tons of tools and where to find them

326
00:11:32,800 --> 00:11:34,959
um and the bitly link on the screen is a

327
00:11:34,959 --> 00:11:37,279
paper that i wrote about dynamic

328
00:11:37,279 --> 00:11:39,360
analysis static analysis incident

329
00:11:39,360 --> 00:11:41,760
response and um there's some helpful

330
00:11:41,760 --> 00:11:44,399
nuggets in there for you as well

331
00:11:44,399 --> 00:11:45,839
so just a little bit about the

332
00:11:45,839 --> 00:11:48,880
nomenclature you know i'm not i'm not a

333
00:11:48,880 --> 00:11:51,440
reverse engineering snob by any means um

334
00:11:51,440 --> 00:11:54,160
but you will run across people who uh

335
00:11:54,160 --> 00:11:56,160
you know they're you know sometimes a

336
00:11:56,160 --> 00:11:58,240
little uptight about the you know the

337
00:11:58,240 --> 00:12:00,880
nomenclature that's used so this is my

338
00:12:00,880 --> 00:12:02,160
way of sort of

339
00:12:02,160 --> 00:12:04,720
you know putting everything together um

340
00:12:04,720 --> 00:12:06,399
and you know

341
00:12:06,399 --> 00:12:08,399
a little bit of reverse engineering you

342
00:12:08,399 --> 00:12:10,959
know is is in some of what we're doing

343
00:12:10,959 --> 00:12:13,120
here right

344
00:12:13,120 --> 00:12:15,040
also static versus dynamic malware

345
00:12:15,040 --> 00:12:17,200
analysis this is a great uh

346
00:12:17,200 --> 00:12:20,399
a great resource um to talk to to learn

347
00:12:20,399 --> 00:12:22,480
about the differences between those two

348
00:12:22,480 --> 00:12:25,120
as well where to find malware very

349
00:12:25,120 --> 00:12:27,200
simple just go to my

350
00:12:27,200 --> 00:12:29,839
uh i run a little uh website with all

351
00:12:29,839 --> 00:12:34,279
things dfir it's dfirlinks.blogspot.com

352
00:12:34,320 --> 00:12:36,160
click on you know

353
00:12:36,160 --> 00:12:38,240
the uh the beaker that you see there the

354
00:12:38,240 --> 00:12:40,959
malware analysis um and you know you'll

355
00:12:40,959 --> 00:12:42,800
be up to your eyeballs and malware but

356
00:12:42,800 --> 00:12:45,200
uh but be careful and i am not

357
00:12:45,200 --> 00:12:46,959
responsible for any malware that you

358
00:12:46,959 --> 00:12:50,000
pull down just saying all right speaking

359
00:12:50,000 --> 00:12:54,480
of malware let's run some huh all right

360
00:12:55,279 --> 00:12:58,480
so we've got our victim machine ready to

361
00:12:58,480 --> 00:12:59,920
get hosed

362
00:12:59,920 --> 00:13:02,560
uh we've got over here

363
00:13:02,560 --> 00:13:05,279
i did set off and i see some updates are

364
00:13:05,279 --> 00:13:07,360
running i really i did shut them off but

365
00:13:07,360 --> 00:13:08,240
you know

366
00:13:08,240 --> 00:13:10,000
uh so

367
00:13:10,000 --> 00:13:13,440
fake dns is running right shut that off

368
00:13:13,440 --> 00:13:14,880
i kick that off

369
00:13:14,880 --> 00:13:17,760
um the machines can talk to one another

370
00:13:17,760 --> 00:13:19,760
you can see here

371
00:13:19,760 --> 00:13:22,240
the configuration that we have

372
00:13:22,240 --> 00:13:24,480
right

373
00:13:25,040 --> 00:13:27,279
we've got burp running we've got

374
00:13:27,279 --> 00:13:30,560
the virus protection is turned off

375
00:13:30,560 --> 00:13:32,079
as well as the firewall and then the

376
00:13:32,079 --> 00:13:35,200
windows updates have been paused

377
00:13:35,200 --> 00:13:37,360
so

378
00:13:37,360 --> 00:13:39,279
we're going to download the uh

379
00:13:39,279 --> 00:13:41,440
we're going to run the black matter

380
00:13:41,440 --> 00:13:42,880
ransomware

381
00:13:42,880 --> 00:13:44,560
this is a

382
00:13:44,560 --> 00:13:46,560
fairly new sample so it's still pretty

383
00:13:46,560 --> 00:13:48,639
fresh i just pulled it down a couple

384
00:13:48,639 --> 00:13:50,399
days ago

385
00:13:50,399 --> 00:13:51,680
what's the password that we're going to

386
00:13:51,680 --> 00:13:54,479
use right

387
00:13:55,120 --> 00:13:59,160
all right we're going to call this

388
00:14:00,740 --> 00:14:05,310
[Music]

389
00:14:09,839 --> 00:14:10,880
and

390
00:14:10,880 --> 00:14:13,120
should have process

391
00:14:13,120 --> 00:14:14,639
hacker up and running

392
00:14:14,639 --> 00:14:16,880
all right yeah it's running here

393
00:14:16,880 --> 00:14:18,639
so that'll you know

394
00:14:18,639 --> 00:14:21,519
give us an eyeball of what's happening

395
00:14:21,519 --> 00:14:23,680
when we detonate the malware so let's

396
00:14:23,680 --> 00:14:26,160
kick off our pcap

397
00:14:26,160 --> 00:14:27,839
and let's roll

398
00:14:27,839 --> 00:14:30,800
ready to get hosed here we go

399
00:14:30,800 --> 00:14:33,760
now it's probably going to reach out

400
00:14:33,760 --> 00:14:36,160
to some shady.org

401
00:14:36,160 --> 00:14:37,040
right

402
00:14:37,040 --> 00:14:39,680
you should see it over here um

403
00:14:39,680 --> 00:14:42,639
not wj32 so it's in right now it's it's

404
00:14:42,639 --> 00:14:44,639
deleting the volume shadow copies it's

405
00:14:44,639 --> 00:14:46,480
encrypting those and uh we're not

406
00:14:46,480 --> 00:14:48,639
encrypting them it's deleting them

407
00:14:48,639 --> 00:14:50,079
um

408
00:14:50,079 --> 00:14:52,880
it's not reaching out

409
00:14:52,880 --> 00:14:54,800
to those there it is there it is those

410
00:14:54,800 --> 00:14:57,199
dot orgs there we go

411
00:14:57,199 --> 00:14:59,839
those are the shady ones

412
00:14:59,839 --> 00:15:02,000
that it talks to

413
00:15:02,000 --> 00:15:03,199
uh so

414
00:15:03,199 --> 00:15:05,040
it's gonna hose everything in fact it

415
00:15:05,040 --> 00:15:08,000
already has right

416
00:15:08,000 --> 00:15:10,480
so you can see

417
00:15:10,480 --> 00:15:13,839
here we go here's our

418
00:15:13,920 --> 00:15:15,279
ransom note

419
00:15:15,279 --> 00:15:16,480
all your

420
00:15:16,480 --> 00:15:19,120
files are belong to us

421
00:15:19,120 --> 00:15:22,160
right black matter

422
00:15:22,800 --> 00:15:24,639
and

423
00:15:24,639 --> 00:15:25,519
it's

424
00:15:25,519 --> 00:15:27,600
hosed everything this was a file it's

425
00:15:27,600 --> 00:15:28,880
now encrypted

426
00:15:28,880 --> 00:15:31,040
you can see over here even my txt files

427
00:15:31,040 --> 00:15:32,240
are encrypted

428
00:15:32,240 --> 00:15:34,800
um did it get wire shark yes it did oh

429
00:15:34,800 --> 00:15:36,320
no it didn't get

430
00:15:36,320 --> 00:15:37,920
i wonder if the airshark was still not

431
00:15:37,920 --> 00:15:41,519
let's see i'm curious

432
00:15:41,519 --> 00:15:44,320
no no it got it it got it it got the uh

433
00:15:44,320 --> 00:15:46,399
the deal out i think that

434
00:15:46,399 --> 00:15:49,360
is a attached well we are out of time

435
00:15:49,360 --> 00:15:50,399
but

436
00:15:50,399 --> 00:15:53,440
you can see um how valuable you know

437
00:15:53,440 --> 00:15:55,759
this kind of a resource is i hope that

438
00:15:55,759 --> 00:15:56,880
you see that

439
00:15:56,880 --> 00:15:59,519
and i hope that you'll have lots more

440
00:15:59,519 --> 00:16:04,279
fun running more malware on your own

441
00:16:08,720 --> 00:16:10,800
you

