1
00:03:51,599 --> 00:03:54,599
yes

2
00:04:07,040 --> 00:04:10,040
yes

3
00:04:21,519 --> 00:04:23,680
welcome to this talk where william will

4
00:04:23,680 --> 00:04:27,960
teach us how to become an isp

5
00:04:28,800 --> 00:04:31,440
so welcome this is a case study into a

6
00:04:31,440 --> 00:04:33,199
series of troops writing with cat videos

7
00:04:33,199 --> 00:04:35,520
which is also known as the internet

8
00:04:35,520 --> 00:04:37,759
so who am i and why are you listening to

9
00:04:37,759 --> 00:04:40,479
me uh i am the former chairman and i've

10
00:04:40,479 --> 00:04:42,320
been in operations for four years at

11
00:04:42,320 --> 00:04:45,680
konet deco which is a student-run isp in

12
00:04:45,680 --> 00:04:48,880
over in copenhagen in lumbur that does

13
00:04:48,880 --> 00:04:50,320
provides an internet for all the dtu

14
00:04:50,320 --> 00:04:51,759
dorms and

15
00:04:51,759 --> 00:04:54,479
one of the oldest isps in denmark's

16
00:04:54,479 --> 00:04:57,120
and i'm also over ella was the supreme

17
00:04:57,120 --> 00:04:58,639
packet lord and switch commander at the

18
00:04:58,639 --> 00:05:00,880
newburg dorm i also gave myself that

19
00:05:00,880 --> 00:05:02,400
title because there was no one to tell

20
00:05:02,400 --> 00:05:04,160
me i couldn't have that title

21
00:05:04,160 --> 00:05:07,039
and then i also got my ps my bachelor's

22
00:05:07,039 --> 00:05:10,240
in networks technologies and it from d2

23
00:05:10,240 --> 00:05:13,280
which is now called cyber technology

24
00:05:13,280 --> 00:05:15,280
so what is an internet service provider

25
00:05:15,280 --> 00:05:16,880
they do other things that just annoy you

26
00:05:16,880 --> 00:05:18,560
with a terrible customer support they

27
00:05:18,560 --> 00:05:20,800
actually provide a useful service which

28
00:05:20,800 --> 00:05:23,840
is the internet

29
00:05:23,840 --> 00:05:25,680
quick step let's create our own so you

30
00:05:25,680 --> 00:05:27,520
what you do you go on your phone

31
00:05:27,520 --> 00:05:30,240
you turn on a personal hotspot you pay

32
00:05:30,240 --> 00:05:32,000
you have someone pay you five kroners

33
00:05:32,000 --> 00:05:33,840
for the network and that's it you're

34
00:05:33,840 --> 00:05:36,000
done that's your isp

35
00:05:36,000 --> 00:05:37,520
obviously there's a bit more to that but

36
00:05:37,520 --> 00:05:40,880
that is basic how simple isps work they

37
00:05:40,880 --> 00:05:42,479
just share a connection they get from

38
00:05:42,479 --> 00:05:44,080
someone else

39
00:05:44,080 --> 00:05:46,240
so isps they come in three different

40
00:05:46,240 --> 00:05:49,759
tiers there are tier one isps these are

41
00:05:49,759 --> 00:05:51,680
big guys some of them you've heard of

42
00:05:51,680 --> 00:05:53,360
some of them you haven't heard of when

43
00:05:53,360 --> 00:05:55,120
there's tier two isps those things like

44
00:05:55,120 --> 00:05:57,680
tdc global connect formerly neonet uh

45
00:05:57,680 --> 00:05:59,520
hurricane electric whole bunch of

46
00:05:59,520 --> 00:06:01,840
companies and then there is tier three

47
00:06:01,840 --> 00:06:05,199
isps which is you know

48
00:06:05,199 --> 00:06:06,400
full rate

49
00:06:06,400 --> 00:06:08,240
bonhax internet connection that's a tier

50
00:06:08,240 --> 00:06:10,639
3 isp as well

51
00:06:10,639 --> 00:06:11,680
where

52
00:06:11,680 --> 00:06:13,120
and let's start with tier 3s at least

53
00:06:13,120 --> 00:06:15,840
because these are the simplest isps

54
00:06:15,840 --> 00:06:17,440
like humans come many different shapes

55
00:06:17,440 --> 00:06:19,840
and sizes what they do is they pay

56
00:06:19,840 --> 00:06:21,360
entirely for their internet connection

57
00:06:21,360 --> 00:06:24,160
from a tier one or tier two isb and what

58
00:06:24,160 --> 00:06:27,120
we do is provide the last mile coverage

59
00:06:27,120 --> 00:06:29,120
and i said they can come in very

60
00:06:29,120 --> 00:06:30,720
different shapes and sizes put the best

61
00:06:30,720 --> 00:06:33,039
way in scale so it could be an antenna

62
00:06:33,039 --> 00:06:34,720
pointing in your apartment building

63
00:06:34,720 --> 00:06:36,319
which just

64
00:06:36,319 --> 00:06:38,080
has a patch panel down in the basement

65
00:06:38,080 --> 00:06:39,199
and then

66
00:06:39,199 --> 00:06:40,639
make sure to

67
00:06:40,639 --> 00:06:42,720
put together a deal with some tier 2 isp

68
00:06:42,720 --> 00:06:44,800
to get internet to the entire building

69
00:06:44,800 --> 00:06:46,560
or it can be a bit more complex than

70
00:06:46,560 --> 00:06:48,160
that

71
00:06:48,160 --> 00:06:50,639
so we are going to take the case where

72
00:06:50,639 --> 00:06:53,759
we are bonne hacknet the newest isp on

73
00:06:53,759 --> 00:06:56,400
the block and through some sort of

74
00:06:56,400 --> 00:06:59,440
sitcom situation we have ended up having

75
00:06:59,440 --> 00:07:01,199
to provide the internet connection for

76
00:07:01,199 --> 00:07:03,599
the new little home island in copenhagen

77
00:07:03,599 --> 00:07:05,919
which is being built

78
00:07:05,919 --> 00:07:07,520
so the requirements we need to provide

79
00:07:07,520 --> 00:07:09,039
internet for at least one apartment

80
00:07:09,039 --> 00:07:10,800
building we want to scale it up you know

81
00:07:10,800 --> 00:07:12,880
to more 49 plus is what we're going to

82
00:07:12,880 --> 00:07:13,680
say

83
00:07:13,680 --> 00:07:15,440
we also want to comply with the danish

84
00:07:15,440 --> 00:07:17,599
logging regulations because sadly we

85
00:07:17,599 --> 00:07:19,520
have to do that and we want to

86
00:07:19,520 --> 00:07:21,120
prioritize getting the setup as fast as

87
00:07:21,120 --> 00:07:22,960
possible

88
00:07:22,960 --> 00:07:24,160
so we're going to have very simple

89
00:07:24,160 --> 00:07:26,080
topology here where what we're going to

90
00:07:26,080 --> 00:07:28,000
do is we are going to

91
00:07:28,000 --> 00:07:29,840
find some tier 2 isp we're probably

92
00:07:29,840 --> 00:07:31,199
going to go to global connect and say

93
00:07:31,199 --> 00:07:33,520
hey we're starting internet provider we

94
00:07:33,520 --> 00:07:35,520
want some internet and they'll say great

95
00:07:35,520 --> 00:07:38,800
here's a fiber panel you can connect to

96
00:07:38,800 --> 00:07:41,280
we'll give you one gig of internet one

97
00:07:41,280 --> 00:07:43,360
gig per second of the internet

98
00:07:43,360 --> 00:07:45,520
collection and we'll give you who knows

99
00:07:45,520 --> 00:07:48,160
how many ip addresses you ask for

100
00:07:48,160 --> 00:07:50,000
and obviously we're not going to give us

101
00:07:50,000 --> 00:07:51,360
that many ip addresses so we're going to

102
00:07:51,360 --> 00:07:52,960
want to route this into a router with

103
00:07:52,960 --> 00:07:55,199
net support this is network address

104
00:07:55,199 --> 00:07:57,199
translation so this is where you take

105
00:07:57,199 --> 00:07:59,919
the well where's the bone hack nat

106
00:07:59,919 --> 00:08:00,960
network i'm pretty sure you all know

107
00:08:00,960 --> 00:08:02,800
what that is at least and then we're

108
00:08:02,800 --> 00:08:04,960
also going to want a dhp server

109
00:08:04,960 --> 00:08:05,759
to

110
00:08:05,759 --> 00:08:08,000
provide you know ip addresses to all the

111
00:08:08,000 --> 00:08:09,680
people living in apartment buildings

112
00:08:09,680 --> 00:08:10,879
and then we're going to want to run

113
00:08:10,879 --> 00:08:13,120
cables from our main router which takes

114
00:08:13,120 --> 00:08:14,879
the fiber connection in from the tier 2

115
00:08:14,879 --> 00:08:16,639
and we want to send that into switches

116
00:08:16,639 --> 00:08:17,919
and different apartment buildings so we

117
00:08:17,919 --> 00:08:20,240
can send connections to different

118
00:08:20,240 --> 00:08:22,160
apartments

119
00:08:22,160 --> 00:08:23,280
all done

120
00:08:23,280 --> 00:08:25,360
obviously not there's issues here so we

121
00:08:25,360 --> 00:08:26,879
don't have isolation between the

122
00:08:26,879 --> 00:08:28,400
individual apartments everyone here is

123
00:08:28,400 --> 00:08:30,560
in the same broadcast domain which means

124
00:08:30,560 --> 00:08:33,039
all devices could see all our devices

125
00:08:33,039 --> 00:08:34,719
this also doesn't live up to the logging

126
00:08:34,719 --> 00:08:37,120
requirements and it's really not

127
00:08:37,120 --> 00:08:39,279
scalable because we're not going to get

128
00:08:39,279 --> 00:08:41,279
a course which which has more than 48

129
00:08:41,279 --> 00:08:43,599
parts

130
00:08:43,679 --> 00:08:46,800
so here what we want to add and yes this

131
00:08:46,800 --> 00:08:48,480
diagram has issues in it it's the exact

132
00:08:48,480 --> 00:08:50,160
same as the one from before

133
00:08:50,160 --> 00:08:52,000
what we want to add here is first of all

134
00:08:52,000 --> 00:08:54,080
we want to add a firewall in between our

135
00:08:54,080 --> 00:08:56,399
tier 2 isp and our router

136
00:08:56,399 --> 00:08:57,600
generally

137
00:08:57,600 --> 00:08:59,200
we want to get like an isp grade one

138
00:08:59,200 --> 00:09:00,720
because this will allow us to get all

139
00:09:00,720 --> 00:09:02,959
the logging we need from to

140
00:09:02,959 --> 00:09:05,200
comply with the danish requirements and

141
00:09:05,200 --> 00:09:06,720
here the danish requirements they are

142
00:09:06,720 --> 00:09:09,120
that we need to log the metadata from

143
00:09:09,120 --> 00:09:11,120
connections so we don't need to be it

144
00:09:11,120 --> 00:09:12,160
you know we don't need a lot of the

145
00:09:12,160 --> 00:09:13,440
actual data is

146
00:09:13,440 --> 00:09:15,360
being transmitted but we need to say

147
00:09:15,360 --> 00:09:18,160
this ip address access this address this

148
00:09:18,160 --> 00:09:21,279
other ip address at this time and it was

149
00:09:21,279 --> 00:09:22,880
this person was behind it this is what

150
00:09:22,880 --> 00:09:24,880
happens with the 40s come

151
00:09:24,880 --> 00:09:27,040
then what we also want to do

152
00:09:27,040 --> 00:09:29,519
is we want to fix this issue with the

153
00:09:29,519 --> 00:09:31,920
broadcast domain so this can be done by

154
00:09:31,920 --> 00:09:34,480
for lots of different ways

155
00:09:34,480 --> 00:09:36,880
but the easiest way is to use what are

156
00:09:36,880 --> 00:09:39,200
called vlans virtual lands where we will

157
00:09:39,200 --> 00:09:41,040
then assign each

158
00:09:41,040 --> 00:09:43,600
apartment with its own vlan its own

159
00:09:43,600 --> 00:09:45,279
virtual land and this way there will be

160
00:09:45,279 --> 00:09:48,000
isolation between each apartment

161
00:09:48,000 --> 00:09:49,760
and of course also we want to make this

162
00:09:49,760 --> 00:09:52,959
scalable so this would include then we

163
00:09:52,959 --> 00:09:56,000
could add more routers in between here

164
00:09:56,000 --> 00:09:57,680
we could so we have our core router

165
00:09:57,680 --> 00:09:59,120
which will connect to a second layer of

166
00:09:59,120 --> 00:10:00,320
routers which will then connect to the

167
00:10:00,320 --> 00:10:02,000
switches in the apartment buildings and

168
00:10:02,000 --> 00:10:03,680
then you could have a router for every

169
00:10:03,680 --> 00:10:06,320
10 buildings or whatever

170
00:10:06,320 --> 00:10:07,200
next

171
00:10:07,200 --> 00:10:09,600
you know great we have a very simple isp

172
00:10:09,600 --> 00:10:11,920
and honestly this is not more complex

173
00:10:11,920 --> 00:10:13,279
than

174
00:10:13,279 --> 00:10:14,800
what some people even are running home

175
00:10:14,800 --> 00:10:17,760
it's tier three isps are simple

176
00:10:17,760 --> 00:10:19,519
but tier two isps this is where we get

177
00:10:19,519 --> 00:10:21,200
the more interesting stuff is where we

178
00:10:21,200 --> 00:10:23,040
learn a bit more how the internet is

179
00:10:23,040 --> 00:10:24,720
actually structured together

180
00:10:24,720 --> 00:10:25,920
they also come in many different shapes

181
00:10:25,920 --> 00:10:27,360
and sizes

182
00:10:27,360 --> 00:10:29,120
what we do is we can pay for transit

183
00:10:29,120 --> 00:10:30,640
from others this is what we were doing

184
00:10:30,640 --> 00:10:32,480
before with the other tier 2 isp where

185
00:10:32,480 --> 00:10:34,240
we were paying them for the connection

186
00:10:34,240 --> 00:10:36,640
however they can also engage in peering

187
00:10:36,640 --> 00:10:38,720
with other networks

188
00:10:38,720 --> 00:10:40,480
and peering is the networking version of

189
00:10:40,480 --> 00:10:43,360
sharing is caring

190
00:10:43,600 --> 00:10:45,600
so appearing when two networks love each

191
00:10:45,600 --> 00:10:47,519
other very very much they celebrate by

192
00:10:47,519 --> 00:10:48,480
peering

193
00:10:48,480 --> 00:10:50,720
and this occurs uh

194
00:10:50,720 --> 00:10:52,880
at a appearing involves networks

195
00:10:52,880 --> 00:10:55,120
connecting to each other and say okay

196
00:10:55,120 --> 00:10:56,640
let's freely exchange data with each

197
00:10:56,640 --> 00:10:57,519
other

198
00:10:57,519 --> 00:10:59,920
you have a data center on your network

199
00:10:59,920 --> 00:11:02,160
hosting on facebook let's say and i want

200
00:11:02,160 --> 00:11:03,519
to access facebook for free so let's set

201
00:11:03,519 --> 00:11:05,440
up a peering agreement

202
00:11:05,440 --> 00:11:07,360
and most of the time

203
00:11:07,360 --> 00:11:08,800
if we ignore cognate because they aren't

204
00:11:08,800 --> 00:11:10,800
so nice most of the time these appearing

205
00:11:10,800 --> 00:11:13,200
agreements are free and a lot of time

206
00:11:13,200 --> 00:11:14,959
are also informal as well to a certain

207
00:11:14,959 --> 00:11:17,440
degree it's not big legal contracts i

208
00:11:17,440 --> 00:11:19,279
need to get through as well

209
00:11:19,279 --> 00:11:21,360
and peering occurs at internet exchange

210
00:11:21,360 --> 00:11:23,200
points these internet exchange points

211
00:11:23,200 --> 00:11:24,480
are the

212
00:11:24,480 --> 00:11:26,160
core this is the core infrastructure of

213
00:11:26,160 --> 00:11:28,320
the internet

214
00:11:28,320 --> 00:11:30,320
so if peering is consensual interchange

215
00:11:30,320 --> 00:11:32,480
packets then isps internet exchange

216
00:11:32,480 --> 00:11:35,040
points are the internet swinger clubs

217
00:11:35,040 --> 00:11:38,720
it's where isps meet they connect to er

218
00:11:38,720 --> 00:11:40,079
to direct

219
00:11:40,079 --> 00:11:42,880
isps connect to the ixp and then we'll

220
00:11:42,880 --> 00:11:45,120
get a connection in the switcher and

221
00:11:45,120 --> 00:11:47,600
then making it agree they can go into

222
00:11:47,600 --> 00:11:48,880
peering

223
00:11:48,880 --> 00:11:52,240
agreements with other isps

224
00:11:52,240 --> 00:11:54,639
so peering i said before

225
00:11:54,639 --> 00:11:57,279
free sort of informal process generally

226
00:11:57,279 --> 00:11:59,440
what an is what a tier two or tier one

227
00:11:59,440 --> 00:12:01,200
ice people have they all have a peering

228
00:12:01,200 --> 00:12:04,480
policy where they can say okay if you

229
00:12:04,480 --> 00:12:06,639
follow these rules here then you can

230
00:12:06,639 --> 00:12:09,040
peer with us so hurricane electric for

231
00:12:09,040 --> 00:12:10,959
example which is one of the largest tier

232
00:12:10,959 --> 00:12:14,480
two isps they'll say uh okay you only

233
00:12:14,480 --> 00:12:16,320
send traffic which we are announcing to

234
00:12:16,320 --> 00:12:18,160
us you have to appear with us at all

235
00:12:18,160 --> 00:12:21,360
isps but you are present and so on

236
00:12:21,360 --> 00:12:24,880
and peering policy i said both orders

237
00:12:24,880 --> 00:12:26,560
parties need to follow them

238
00:12:26,560 --> 00:12:28,720
and to peer we also need what's called

239
00:12:28,720 --> 00:12:30,320
an as

240
00:12:30,320 --> 00:12:31,920
autonomous system

241
00:12:31,920 --> 00:12:34,079
so what in the world is an as

242
00:12:34,079 --> 00:12:36,000
it is fancy north speak for just having

243
00:12:36,000 --> 00:12:38,639
a set of ip addresses

244
00:12:38,639 --> 00:12:41,839
so here at bonheck we even have our own

245
00:12:41,839 --> 00:12:44,000
as number i believe i actually

246
00:12:44,000 --> 00:12:45,519
we do

247
00:12:45,519 --> 00:12:48,959
and he what this as is is just a way to

248
00:12:48,959 --> 00:12:51,200
say okay all these different subnets

249
00:12:51,200 --> 00:12:53,920
what we have from the ipv4 and ipv6

250
00:12:53,920 --> 00:12:58,560
ranges they belong to this organizations

251
00:12:58,560 --> 00:13:00,880
autonomous systems are assigned by the

252
00:13:00,880 --> 00:13:03,120
regional internet registry so in europe

253
00:13:03,120 --> 00:13:07,440
it's the ripe ntc there is uh aaron in

254
00:13:07,440 --> 00:13:09,839
the u.s and then there's one various

255
00:13:09,839 --> 00:13:10,720
couple of offers which you can't

256
00:13:10,720 --> 00:13:12,639
remember and generally they aren't free

257
00:13:12,639 --> 00:13:14,639
but they aren't that expensive either to

258
00:13:14,639 --> 00:13:15,839
get

259
00:13:15,839 --> 00:13:18,000
and the only requirement have in aes is

260
00:13:18,000 --> 00:13:19,200
really

261
00:13:19,200 --> 00:13:21,200
at least on the public facing internet

262
00:13:21,200 --> 00:13:23,200
is that you need to have some ip

263
00:13:23,200 --> 00:13:24,800
addresses which

264
00:13:24,800 --> 00:13:26,720
ipv6 addresses you can get freely pretty

265
00:13:26,720 --> 00:13:29,040
easily once you are registered at a

266
00:13:29,040 --> 00:13:31,440
regional internet registry and ipv4

267
00:13:31,440 --> 00:13:33,360
addresses well they're kind of expensive

268
00:13:33,360 --> 00:13:36,639
nowadays because we've run out of them

269
00:13:36,639 --> 00:13:38,160
so how do you appear too so first you

270
00:13:38,160 --> 00:13:39,760
you get a lot of money because you are

271
00:13:39,760 --> 00:13:41,760
going to be digging a lot of fiber

272
00:13:41,760 --> 00:13:44,079
cables to your nearest ixp you can

273
00:13:44,079 --> 00:13:46,880
probably pay to use another internet

274
00:13:46,880 --> 00:13:48,959
providers fiber cables as well but

275
00:13:48,959 --> 00:13:50,480
eventually you are going to need to be

276
00:13:50,480 --> 00:13:53,440
able to hook up to the ixp and i said

277
00:13:53,440 --> 00:13:55,760
bear in certain locations so here in

278
00:13:55,760 --> 00:13:57,600
copenhagen for example here in denmark

279
00:13:57,600 --> 00:13:59,519
for example the close

280
00:13:59,519 --> 00:14:03,600
the oldest ixp is in d2u building 304 so

281
00:14:03,600 --> 00:14:06,399
if you were to start and i have an isp

282
00:14:06,399 --> 00:14:07,839
out there where we said in the opening

283
00:14:07,839 --> 00:14:09,199
of the new nato honda mining we're

284
00:14:09,199 --> 00:14:10,880
building you need to have a fiber

285
00:14:10,880 --> 00:14:12,720
connection from your office's vehicle

286
00:14:12,720 --> 00:14:14,560
from your data center bear all the way

287
00:14:14,560 --> 00:14:16,240
to the ixp

288
00:14:16,240 --> 00:14:17,760
and then obviously

289
00:14:17,760 --> 00:14:19,760
we add step three and then we get profit

290
00:14:19,760 --> 00:14:21,440
right

291
00:14:21,440 --> 00:14:23,199
not that simple obviously

292
00:14:23,199 --> 00:14:25,920
things never that simple

293
00:14:25,920 --> 00:14:27,279
so for peering there's a bit more

294
00:14:27,279 --> 00:14:29,600
technical obviously once we have reached

295
00:14:29,600 --> 00:14:31,440
out to a couple of tier two isps and

296
00:14:31,440 --> 00:14:33,600
they said yeah let's peer let's you know

297
00:14:33,600 --> 00:14:35,360
that'd be great we can

298
00:14:35,360 --> 00:14:37,360
freely exchange data you need to set up

299
00:14:37,360 --> 00:14:39,440
some routing protocols as well

300
00:14:39,440 --> 00:14:42,320
and the main ones that are used is ospf

301
00:14:42,320 --> 00:14:43,839
open source path first which is also

302
00:14:43,839 --> 00:14:46,079
what's on my t-shirt is

303
00:14:46,079 --> 00:14:49,600
this is an igp or an interior gateway

304
00:14:49,600 --> 00:14:50,880
protocol

305
00:14:50,880 --> 00:14:54,240
where this routes within your as

306
00:14:54,240 --> 00:14:55,360
because obviously when we're getting

307
00:14:55,360 --> 00:14:56,959
this point here we've scaled the bit up

308
00:14:56,959 --> 00:14:58,880
from the simple having one core router

309
00:14:58,880 --> 00:15:00,240
and a couple switches and a couple

310
00:15:00,240 --> 00:15:02,000
apartment buildings here we would

311
00:15:02,000 --> 00:15:03,920
generally be having several main

312
00:15:03,920 --> 00:15:05,920
locations we are accessing from and

313
00:15:05,920 --> 00:15:07,360
we're going to be one of routing around

314
00:15:07,360 --> 00:15:09,600
invest as well so we use the ospf

315
00:15:09,600 --> 00:15:10,560
protocol

316
00:15:10,560 --> 00:15:12,240
and it risks can recover from failed

317
00:15:12,240 --> 00:15:13,680
links they could also do traffic

318
00:15:13,680 --> 00:15:15,920
engineering and from the name open

319
00:15:15,920 --> 00:15:17,440
shortest path first it takes the

320
00:15:17,440 --> 00:15:20,639
shortest path that's available first

321
00:15:20,639 --> 00:15:22,880
next once we want to route traffic to

322
00:15:22,880 --> 00:15:26,399
another as we use what's called bgp the

323
00:15:26,399 --> 00:15:28,160
border gateway protocol

324
00:15:28,160 --> 00:15:29,519
and this is the main protocol behind the

325
00:15:29,519 --> 00:15:31,279
internet and by default it is

326
00:15:31,279 --> 00:15:34,560
hilariously insecure

327
00:15:34,880 --> 00:15:37,040
and like seriously

328
00:15:37,040 --> 00:15:38,639
if you actually set yourself and go

329
00:15:38,639 --> 00:15:40,560
really dig into php you're wondering how

330
00:15:40,560 --> 00:15:42,160
the hell does the internet work

331
00:15:42,160 --> 00:15:44,000
it shouldn't work

332
00:15:44,000 --> 00:15:45,199
so here we're going to have a little

333
00:15:45,199 --> 00:15:47,279
side rant which is why bgp is a terrible

334
00:15:47,279 --> 00:15:49,680
protocol

335
00:15:49,680 --> 00:15:51,199
brief history

336
00:15:51,199 --> 00:15:54,000
originally on two napkins

337
00:15:54,000 --> 00:15:55,560
back in

338
00:15:55,560 --> 00:15:59,040
19 i want to say 84 but i'm not fully

339
00:15:59,040 --> 00:16:01,120
sure about the year

340
00:16:01,120 --> 00:16:02,639
on two napkins way to find the border

341
00:16:02,639 --> 00:16:04,720
gateway protocol

342
00:16:04,720 --> 00:16:07,839
so simple protocol at least

343
00:16:07,839 --> 00:16:09,600
are some issues with it however and i'm

344
00:16:09,600 --> 00:16:11,440
not going to go into explaining how the

345
00:16:11,440 --> 00:16:13,839
protocol works in general this can be

346
00:16:13,839 --> 00:16:15,360
reading for yourself afterwards because

347
00:16:15,360 --> 00:16:16,959
it can get a bit complex at times as

348
00:16:16,959 --> 00:16:17,920
well

349
00:16:17,920 --> 00:16:18,800
but

350
00:16:18,800 --> 00:16:20,399
some issues with it are where bad

351
00:16:20,399 --> 00:16:23,839
distance distance metrics so how bgp

352
00:16:23,839 --> 00:16:25,120
chooses

353
00:16:25,120 --> 00:16:27,680
hops next hops for ospf it will choose

354
00:16:27,680 --> 00:16:28,959
the shortest path

355
00:16:28,959 --> 00:16:32,079
here the issue with bgp is it uses as

356
00:16:32,079 --> 00:16:34,720
path so how many autonomous systems

357
00:16:34,720 --> 00:16:36,079
would a packet pass through to get the

358
00:16:36,079 --> 00:16:37,279
shortest path

359
00:16:37,279 --> 00:16:38,959
the issue is some of these autonomous

360
00:16:38,959 --> 00:16:40,560
systems can have huge geographical

361
00:16:40,560 --> 00:16:42,880
distances so if you were to send a pack

362
00:16:42,880 --> 00:16:44,480
if you're in singapore and would send a

363
00:16:44,480 --> 00:16:45,920
package to a server in china it could

364
00:16:45,920 --> 00:16:47,680
get routed through los angeles which

365
00:16:47,680 --> 00:16:49,440
would you know you're going halfway

366
00:16:49,440 --> 00:16:51,360
across the world there and back again

367
00:16:51,360 --> 00:16:53,040
for something which should not be that

368
00:16:53,040 --> 00:16:55,759
distance as well

369
00:16:55,759 --> 00:16:57,519
another issue with it is manual

370
00:16:57,519 --> 00:16:59,839
manipulation of this next best hop is

371
00:16:59,839 --> 00:17:01,120
also possible

372
00:17:01,120 --> 00:17:04,480
and because of this uh

373
00:17:04,480 --> 00:17:05,280
uh

374
00:17:05,280 --> 00:17:08,000
not as friendly isp

375
00:17:08,000 --> 00:17:09,439
would try to

376
00:17:09,439 --> 00:17:12,240
discard uh appearing traffic and this

377
00:17:12,240 --> 00:17:14,160
means it would be then sending it on to

378
00:17:14,160 --> 00:17:15,679
another as because

379
00:17:15,679 --> 00:17:17,280
they want the transit traffic this is

380
00:17:17,280 --> 00:17:20,160
the traffic that's generating the money

381
00:17:20,160 --> 00:17:22,480
transit traffic could also then be

382
00:17:22,480 --> 00:17:24,480
maliciously routed for financial gain so

383
00:17:24,480 --> 00:17:27,520
they could say oh yes it's maybe one hop

384
00:17:27,520 --> 00:17:30,320
but our contract says you pay us

385
00:17:30,320 --> 00:17:32,080
for every single hop i would do so we're

386
00:17:32,080 --> 00:17:34,320
gonna route it through five hops turn to

387
00:17:34,320 --> 00:17:36,000
more money

388
00:17:36,000 --> 00:17:38,160
bgp by default also trusts a bit too

389
00:17:38,160 --> 00:17:38,960
much

390
00:17:38,960 --> 00:17:41,440
as ass can advertise routes we do not

391
00:17:41,440 --> 00:17:44,320
own this is bgp leaks for example back

392
00:17:44,320 --> 00:17:47,039
in 2019 was a large part of the internet

393
00:17:47,039 --> 00:17:49,200
was knocked down this was because

394
00:17:49,200 --> 00:17:52,080
verizon and another small american isb

395
00:17:52,080 --> 00:17:53,600
which were buying their transit from

396
00:17:53,600 --> 00:17:54,880
verizon

397
00:17:54,880 --> 00:17:57,120
the small isp they were using a bgp

398
00:17:57,120 --> 00:17:59,039
optimizer piece of software helped them

399
00:17:59,039 --> 00:18:01,280
optimize their bgp routes

400
00:18:01,280 --> 00:18:03,280
and what may happened is they

401
00:18:03,280 --> 00:18:04,880
accidentally advertised a whole bunch of

402
00:18:04,880 --> 00:18:06,320
routes which they didn't have access to

403
00:18:06,320 --> 00:18:08,240
so they said hey you can reach google

404
00:18:08,240 --> 00:18:10,000
you can reach cloud fair all these ip

405
00:18:10,000 --> 00:18:12,799
addresses you can reach them at us

406
00:18:12,799 --> 00:18:15,200
and then they send it onwards and bgp

407
00:18:15,200 --> 00:18:16,799
use a gossipy protocol so they send it

408
00:18:16,799 --> 00:18:18,320
to verizon very internet service

409
00:18:18,320 --> 00:18:21,280
provider verizon should have said hey

410
00:18:21,280 --> 00:18:23,440
you obviously don't own all this all

411
00:18:23,440 --> 00:18:25,520
these ip addresses here other people do

412
00:18:25,520 --> 00:18:27,600
i'm just not going to send it forward

413
00:18:27,600 --> 00:18:29,840
but they didn't because where everybody

414
00:18:29,840 --> 00:18:31,520
had configured something wrong or you

415
00:18:31,520 --> 00:18:33,840
know this they didn't go too much into

416
00:18:33,840 --> 00:18:35,360
the post-mortem of course

417
00:18:35,360 --> 00:18:36,880
trying to save a bit of face and what

418
00:18:36,880 --> 00:18:38,400
happened is large parts of the internet

419
00:18:38,400 --> 00:18:40,559
went down because suddenly

420
00:18:40,559 --> 00:18:42,880
cloud fair line node and a whole bunch

421
00:18:42,880 --> 00:18:45,679
of others were routing to this one isp

422
00:18:45,679 --> 00:18:48,720
in pennsylvania

423
00:18:48,880 --> 00:18:50,080
not the best

424
00:18:50,080 --> 00:18:52,640
bgp leaks can also be

425
00:18:52,640 --> 00:18:54,080
maliciously

426
00:18:54,080 --> 00:18:56,880
made so it has occurred several times

427
00:18:56,880 --> 00:18:57,760
before

428
00:18:57,760 --> 00:19:00,000
where countries such as china and russia

429
00:19:00,000 --> 00:19:03,840
they will leak bgp uh routes

430
00:19:03,840 --> 00:19:05,919
which is saying they'll set falsely

431
00:19:05,919 --> 00:19:08,559
advertised routes and when traffic will

432
00:19:08,559 --> 00:19:11,200
then maybe quickly happen sometimes you

433
00:19:11,200 --> 00:19:12,720
know for a long period of time where

434
00:19:12,720 --> 00:19:14,880
will route traffic through their

435
00:19:14,880 --> 00:19:16,480
own as

436
00:19:16,480 --> 00:19:17,919
maybe this is just used for data

437
00:19:17,919 --> 00:19:19,760
collection or you know who knows what

438
00:19:19,760 --> 00:19:22,400
it's used for

439
00:19:23,440 --> 00:19:25,440
and yeah this is also just

440
00:19:25,440 --> 00:19:27,360
what is top-up hp leaks

441
00:19:27,360 --> 00:19:30,000
so we know a bit about bgp we know how

442
00:19:30,000 --> 00:19:32,320
it works we know how to peer as well we

443
00:19:32,320 --> 00:19:35,120
go make an agreement we set up our bgp

444
00:19:35,120 --> 00:19:37,600
pro uh configure php protocol on our

445
00:19:37,600 --> 00:19:39,200
core router to say yes we want to appear

446
00:19:39,200 --> 00:19:41,520
with these as is here

447
00:19:41,520 --> 00:19:42,720
all good

448
00:19:42,720 --> 00:19:44,720
what else can you do as a tier 2 isp and

449
00:19:44,720 --> 00:19:46,320
this is where there's some fun stuff

450
00:19:46,320 --> 00:19:48,320
going on you can get free hardware if

451
00:19:48,320 --> 00:19:51,120
you ask google or cdns or netflix or

452
00:19:51,120 --> 00:19:53,600
whatever because they obviously want to

453
00:19:53,600 --> 00:19:55,200
get their

454
00:19:55,200 --> 00:19:57,039
static content they wanted to get as

455
00:19:57,039 --> 00:19:59,200
close to the inside to the users as

456
00:19:59,200 --> 00:20:01,440
possible because this then they avoid a

457
00:20:01,440 --> 00:20:03,280
whole bunch of transit traffic they have

458
00:20:03,280 --> 00:20:06,320
to pay for that and also lower latency

459
00:20:06,320 --> 00:20:08,159
so you can go to google and say hey i

460
00:20:08,159 --> 00:20:10,320
want a peer review and i want to get a

461
00:20:10,320 --> 00:20:12,480
cash box here and they'll grow great

462
00:20:12,480 --> 00:20:13,679
well check if you fulfill the

463
00:20:13,679 --> 00:20:15,440
requirements and they do they will send

464
00:20:15,440 --> 00:20:17,120
you a box and you slot into your data

465
00:20:17,120 --> 00:20:18,880
center and then mail cache static

466
00:20:18,880 --> 00:20:20,480
content which goes popular this could be

467
00:20:20,480 --> 00:20:22,720
things like youtube videos or ads for

468
00:20:22,720 --> 00:20:25,039
youtube videos which is why ads always

469
00:20:25,039 --> 00:20:26,960
seem to load faster than some obscure

470
00:20:26,960 --> 00:20:28,159
video you're trying to watch it free in

471
00:20:28,159 --> 00:20:30,559
the morning

472
00:20:31,200 --> 00:20:33,360
you can also register really dumb ipv6

473
00:20:33,360 --> 00:20:35,840
subnets for example dead beef that's a

474
00:20:35,840 --> 00:20:38,559
valid ipv6 address it's not red assigned

475
00:20:38,559 --> 00:20:40,240
to anyone there's a whole bunch of

476
00:20:40,240 --> 00:20:42,480
hexpeak ipv6 address subnets where

477
00:20:42,480 --> 00:20:44,559
aren't inside anyone

478
00:20:44,559 --> 00:20:45,919
you can also cry a lot because

479
00:20:45,919 --> 00:20:47,840
maintaining a tier 2 isp it's a lot of

480
00:20:47,840 --> 00:20:50,320
work as well it's not too easy and you

481
00:20:50,320 --> 00:20:51,760
can also make a lot of money because

482
00:20:51,760 --> 00:20:53,280
that's what we're all here for learn and

483
00:20:53,280 --> 00:20:55,679
make money in business

484
00:20:55,679 --> 00:20:58,320
so how do you become tier one isp

485
00:20:58,320 --> 00:21:00,960
no you don't

486
00:21:00,960 --> 00:21:03,039
tier one isps is literally a cartel of

487
00:21:03,039 --> 00:21:04,960
isps who say okay we'll appear with you

488
00:21:04,960 --> 00:21:05,840
guys

489
00:21:05,840 --> 00:21:07,600
and we won't appear of anyone else

490
00:21:07,600 --> 00:21:08,720
and

491
00:21:08,720 --> 00:21:11,280
if someone buys transit off them then

492
00:21:11,280 --> 00:21:12,960
the people appear with also get access

493
00:21:12,960 --> 00:21:14,480
to that route there

494
00:21:14,480 --> 00:21:16,080
so really you know you really don't know

495
00:21:16,080 --> 00:21:19,280
how to become tier one isp

496
00:21:21,840 --> 00:21:24,000
so this part here this is good i didn't

497
00:21:24,000 --> 00:21:27,039
have time to actually slides but here's

498
00:21:27,039 --> 00:21:28,880
theoretically how you could become a

499
00:21:28,880 --> 00:21:31,039
tier 1 isp is

500
00:21:31,039 --> 00:21:32,720
first of all you would not need to peer

501
00:21:32,720 --> 00:21:34,640
with any other network to begin with yet

502
00:21:34,640 --> 00:21:36,640
you would somehow also need to have an

503
00:21:36,640 --> 00:21:39,600
internet service which was so hugely

504
00:21:39,600 --> 00:21:40,640
popular

505
00:21:40,640 --> 00:21:42,480
that through transit you would end up

506
00:21:42,480 --> 00:21:44,400
costing these tier one isps lots of

507
00:21:44,400 --> 00:21:45,919
money so

508
00:21:45,919 --> 00:21:47,440
say if you

509
00:21:47,440 --> 00:21:48,960
if you were google

510
00:21:48,960 --> 00:21:49,919
and you

511
00:21:49,919 --> 00:21:52,000
somehow created you know they created a

512
00:21:52,000 --> 00:21:53,679
global spanning isp

513
00:21:53,679 --> 00:21:55,120
and we got a lot of customers and they

514
00:21:55,120 --> 00:21:56,159
said okay

515
00:21:56,159 --> 00:21:58,559
you have to pay us now for transit

516
00:21:58,559 --> 00:21:59,919
they say to all the p1i speech you have

517
00:21:59,919 --> 00:22:01,360
to pay us for transit

518
00:22:01,360 --> 00:22:03,280
they're not gonna be too happy and maybe

519
00:22:03,280 --> 00:22:04,720
just maybe they would let you into this

520
00:22:04,720 --> 00:22:07,039
cartel of tier one isps but

521
00:22:07,039 --> 00:22:08,720
really that would also mean you know

522
00:22:08,720 --> 00:22:10,640
you're taking yourself off the internet

523
00:22:10,640 --> 00:22:13,440
to get access to the internet

524
00:22:13,440 --> 00:22:14,960
it's not really possible to become a

525
00:22:14,960 --> 00:22:16,400
tier one isp

526
00:22:16,400 --> 00:22:18,720
and generally with cartels comes smaller

527
00:22:18,720 --> 00:22:20,640
and smaller because

528
00:22:20,640 --> 00:22:22,880
layer three keeps up buying more of the

529
00:22:22,880 --> 00:22:24,159
other

530
00:22:24,159 --> 00:22:26,480
right now lumen technologies bought

531
00:22:26,480 --> 00:22:28,880
layer three were layer free bought

532
00:22:28,880 --> 00:22:30,720
someone else and they're basically all

533
00:22:30,720 --> 00:22:34,400
just becoming one big monopolistic isp

534
00:22:34,400 --> 00:22:36,880
but however you can avoid t1i speeds to

535
00:22:36,880 --> 00:22:39,120
a certain degree as there are a lot

536
00:22:39,120 --> 00:22:41,360
there are some really big tier 2 isps

537
00:22:41,360 --> 00:22:43,200
who will appear with lots of people and

538
00:22:43,200 --> 00:22:45,600
they can peer with basically every other

539
00:22:45,600 --> 00:22:48,480
tier 2 isp

540
00:22:49,200 --> 00:22:50,320
again

541
00:22:50,320 --> 00:22:51,600
thank you for the talk i know this might

542
00:22:51,600 --> 00:22:53,520
have been a bit short i actually have no

543
00:22:53,520 --> 00:22:55,200
idea how long it took

544
00:22:55,200 --> 00:22:57,280
you can contact me an email on linkedin

545
00:22:57,280 --> 00:22:59,280
i realize that's also my email but

546
00:22:59,280 --> 00:23:00,880
or you can just find me in the pyjamas

547
00:23:00,880 --> 00:23:03,039
camp with the other people in pajamas or

548
00:23:03,039 --> 00:23:04,080
you can find me at the par if you want

549
00:23:04,080 --> 00:23:06,159
to have a chat

550
00:23:06,159 --> 00:23:09,280
yes we got 25 minutes for christians

551
00:23:09,280 --> 00:23:12,840
longer than i expected

552
00:23:26,320 --> 00:23:28,960
uh if you rather not answer this

553
00:23:28,960 --> 00:23:30,400
question say that you didn't understand

554
00:23:30,400 --> 00:23:33,600
me uh how does the bornhack

555
00:23:33,600 --> 00:23:35,440
tier 3 isp

556
00:23:35,440 --> 00:23:37,840
comply with the logging requirements of

557
00:23:37,840 --> 00:23:39,200
denmark

558
00:23:39,200 --> 00:23:41,120
uh our director questions to the network

559
00:23:41,120 --> 00:23:43,279
team sitting right there well

560
00:23:43,279 --> 00:23:44,720
fancy gentlemen

561
00:23:44,720 --> 00:23:45,760
uh

562
00:23:45,760 --> 00:23:46,559
i

563
00:23:46,559 --> 00:23:48,080
i think the answer may is very could

564
00:23:48,080 --> 00:23:50,720
very well be but not

565
00:23:50,720 --> 00:23:54,000
i know there are some isps

566
00:23:54,000 --> 00:23:55,520
i know some isps

567
00:23:55,520 --> 00:23:57,200
the one i was chairman of we didn't

568
00:23:57,200 --> 00:23:58,960
follow the danish regulation we followed

569
00:23:58,960 --> 00:24:01,039
the eu regulation because we didn't

570
00:24:01,039 --> 00:24:03,120
fully agree with the danish one

571
00:24:03,120 --> 00:24:04,400
oh

572
00:24:04,400 --> 00:24:08,000
it's it's a long story but in short if

573
00:24:08,000 --> 00:24:10,000
there's an upstream network logging

574
00:24:10,000 --> 00:24:12,720
already you don't have to log and it has

575
00:24:12,720 --> 00:24:15,279
been the policy of locking in the bonhag

576
00:24:15,279 --> 00:24:17,440
network since i've been here from the

577
00:24:17,440 --> 00:24:20,400
start 2016 when we did the first one we

578
00:24:20,400 --> 00:24:21,520
are logging as

579
00:24:21,520 --> 00:24:23,919
as little as possible we are only

580
00:24:23,919 --> 00:24:26,240
looking at traffic if we need to debug

581
00:24:26,240 --> 00:24:27,120
stuff

582
00:24:27,120 --> 00:24:30,480
so in general we are not logging

583
00:24:30,480 --> 00:24:32,000
we are logging a little bit because we

584
00:24:32,000 --> 00:24:33,600
are monitoring the network using libra

585
00:24:33,600 --> 00:24:36,159
nms and then we are like deleting those

586
00:24:36,159 --> 00:24:39,840
as fast as possible when we get home

587
00:24:39,840 --> 00:24:43,320
as little as possible

588
00:24:45,560 --> 00:24:50,080
[Applause]

589
00:24:50,080 --> 00:24:52,799
uh i can also just add that there's also

590
00:24:52,799 --> 00:24:54,640
not any logging happening of the bonnet

591
00:24:54,640 --> 00:24:56,960
connection at the upstream

592
00:24:56,960 --> 00:24:59,960
and

593
00:25:00,080 --> 00:25:02,080
uh we have we have a little little bit

594
00:25:02,080 --> 00:25:04,880
of uh as flow in between that gets

595
00:25:04,880 --> 00:25:06,640
accurate

596
00:25:06,640 --> 00:25:07,760
but

597
00:25:07,760 --> 00:25:10,640
that is only transient

598
00:25:10,640 --> 00:25:13,840
and not stored

599
00:25:13,840 --> 00:25:16,799
uh and then in addition uh if anyone has

600
00:25:16,799 --> 00:25:18,159
a nearest number

601
00:25:18,159 --> 00:25:20,240
and there's a metro space and wants to

602
00:25:20,240 --> 00:25:21,440
announce it

603
00:25:21,440 --> 00:25:23,200
here we can probably figure that out

604
00:25:23,200 --> 00:25:27,640
come to come talk to the knock

605
00:25:31,120 --> 00:25:34,640
any more questions 20 minutes left

606
00:25:34,640 --> 00:25:36,000
otherwise we can go to the bar and have

607
00:25:36,000 --> 00:25:38,080
questions and beer

608
00:25:38,080 --> 00:25:40,220
thank you very much for the talk

609
00:25:40,220 --> 00:25:50,650
[Applause]

610
00:25:51,120 --> 00:25:53,199
you

