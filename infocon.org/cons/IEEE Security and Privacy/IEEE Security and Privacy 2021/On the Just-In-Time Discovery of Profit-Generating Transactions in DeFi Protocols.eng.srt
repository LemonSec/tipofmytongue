1
00:00:01,280 --> 00:00:03,120
hello this is kaiwaching

2
00:00:03,120 --> 00:00:05,279
and i'm a phd student at imperial

3
00:00:05,279 --> 00:00:06,960
college london

4
00:00:06,960 --> 00:00:09,200
i'm going to present our paper on the

5
00:00:09,200 --> 00:00:11,440
just in time discovery of profit

6
00:00:11,440 --> 00:00:13,120
generating transactions

7
00:00:13,120 --> 00:00:16,720
in d5 protocols this is a joint walkways

8
00:00:16,720 --> 00:00:17,520
lee zhou

9
00:00:17,520 --> 00:00:20,560
anton kali benjamin lipschitz and asta

10
00:00:20,560 --> 00:00:22,959
gervais

11
00:00:24,000 --> 00:00:26,400
the invention of blockchains promotes

12
00:00:26,400 --> 00:00:28,320
the development of the so-called

13
00:00:28,320 --> 00:00:30,800
decentralized finance

14
00:00:30,800 --> 00:00:33,200
defy is the financial system on top of a

15
00:00:33,200 --> 00:00:35,760
smart contract-based blockchain

16
00:00:35,760 --> 00:00:38,480
the mechanisms and the logic of d5

17
00:00:38,480 --> 00:00:39,280
protocols

18
00:00:39,280 --> 00:00:42,320
are programmed in the smart contracts

19
00:00:42,320 --> 00:00:45,840
that are publicly verifiable

20
00:00:45,840 --> 00:00:48,719
because of the smart contracts d5 has a

21
00:00:48,719 --> 00:00:49,920
special trait

22
00:00:49,920 --> 00:00:52,160
called composability compared to the

23
00:00:52,160 --> 00:00:55,120
traditional finance

24
00:00:55,280 --> 00:00:57,199
composability means that a trader can

25
00:00:57,199 --> 00:00:59,120
execute transactions over different

26
00:00:59,120 --> 00:01:01,039
device platforms in one blockchain

27
00:01:01,039 --> 00:01:02,320
transaction

28
00:01:02,320 --> 00:01:05,199
in a diagram i present a on-chain lab

29
00:01:05,199 --> 00:01:06,080
charge

30
00:01:06,080 --> 00:01:08,799
which is a typical example of d5

31
00:01:08,799 --> 00:01:10,640
composability

32
00:01:10,640 --> 00:01:13,119
here rv is a landing and borrowing

33
00:01:13,119 --> 00:01:14,159
platform

34
00:01:14,159 --> 00:01:17,119
curve and unicef are on-chain exchanges

35
00:01:17,119 --> 00:01:18,640
where traders can swap

36
00:01:18,640 --> 00:01:22,799
one token to another die and usdt are

37
00:01:22,799 --> 00:01:24,720
the so-called stablecoins

38
00:01:24,720 --> 00:01:26,720
the price of the stable coins are packed

39
00:01:26,720 --> 00:01:29,920
to the u.s dollar

40
00:01:29,920 --> 00:01:32,799
as we can see the trader can borrow 100

41
00:01:32,799 --> 00:01:34,079
a die from rv

42
00:01:34,079 --> 00:01:35,840
and then trade twice leveraging the

43
00:01:35,840 --> 00:01:37,280
price difference between

44
00:01:37,280 --> 00:01:40,560
curve and the unit strap and end up with

45
00:01:40,560 --> 00:01:42,880
102 die

46
00:01:42,880 --> 00:01:45,840
the trader replaced 100 die in the end

47
00:01:45,840 --> 00:01:46,159
and

48
00:01:46,159 --> 00:01:49,439
leave to die as a profit all these

49
00:01:49,439 --> 00:01:51,119
actions can be operated

50
00:01:51,119 --> 00:01:53,439
in one blockchain transaction without

51
00:01:53,439 --> 00:01:54,640
being interrupted

52
00:01:54,640 --> 00:01:57,119
in the middle

53
00:01:58,719 --> 00:02:01,200
the device can possibility allows d5

54
00:02:01,200 --> 00:02:02,240
participants to

55
00:02:02,240 --> 00:02:04,960
profit by for example leveraging the

56
00:02:04,960 --> 00:02:05,920
price difference

57
00:02:05,920 --> 00:02:09,038
across different on-chain exchanges as i

58
00:02:09,038 --> 00:02:09,758
showed just

59
00:02:09,758 --> 00:02:13,360
now however this is not an easy job

60
00:02:13,360 --> 00:02:17,040
when facing various d5 protocols

61
00:02:17,040 --> 00:02:19,840
here i list only a small proportion of

62
00:02:19,840 --> 00:02:21,040
d5 platforms

63
00:02:21,040 --> 00:02:24,319
in the ecosystem there are much more

64
00:02:24,319 --> 00:02:27,840
exist or are currently emerging

65
00:02:27,840 --> 00:02:31,519
so we can see exchanges derivatives

66
00:02:31,519 --> 00:02:34,319
landing and borrowing pools and each of

67
00:02:34,319 --> 00:02:34,879
them

68
00:02:34,879 --> 00:02:37,360
can have different implementations and

69
00:02:37,360 --> 00:02:39,120
contracts

70
00:02:39,120 --> 00:02:41,440
even to markets serving the same pair of

71
00:02:41,440 --> 00:02:42,160
tokens

72
00:02:42,160 --> 00:02:45,760
can have different pricing formulas

73
00:02:45,760 --> 00:02:48,879
moreover when new block is mined the

74
00:02:48,879 --> 00:02:49,840
state of these

75
00:02:49,840 --> 00:02:53,040
platforms may change so the discovery of

76
00:02:53,040 --> 00:02:54,959
profitable transactions should be done

77
00:02:54,959 --> 00:02:55,680
within the

78
00:02:55,680 --> 00:02:59,120
block interval as a reference

79
00:02:59,120 --> 00:03:01,840
either in one of the major defined

80
00:03:01,840 --> 00:03:02,480
hosting

81
00:03:02,480 --> 00:03:04,959
blockchains has a block interval of

82
00:03:04,959 --> 00:03:05,840
about

83
00:03:05,840 --> 00:03:09,519
13 seconds this makes the

84
00:03:09,519 --> 00:03:12,959
target even more challenging

85
00:03:14,000 --> 00:03:16,480
therefore we propose a framework called

86
00:03:16,480 --> 00:03:17,760
divide poses that

87
00:03:17,760 --> 00:03:20,000
allows us to efficiently identify

88
00:03:20,000 --> 00:03:21,680
profitable transactions

89
00:03:21,680 --> 00:03:25,040
given the blockchain state specifically

90
00:03:25,040 --> 00:03:28,319
we propose two methodologies to achieve

91
00:03:28,319 --> 00:03:32,159
this goal one is divided

92
00:03:32,159 --> 00:03:35,440
up where we build a directed

93
00:03:35,440 --> 00:03:38,640
defined market graph we identify the

94
00:03:38,640 --> 00:03:39,760
negative circles

95
00:03:39,760 --> 00:03:42,480
in the graph with the bamford algorithm

96
00:03:42,480 --> 00:03:43,120
and

97
00:03:43,120 --> 00:03:45,599
the negative circles can be turned into

98
00:03:45,599 --> 00:03:48,080
profitable transactions

99
00:03:48,080 --> 00:03:51,200
the other one is divide poser smt

100
00:03:51,200 --> 00:03:54,319
in divide post smt we formulate divide

101
00:03:54,319 --> 00:03:57,360
actions into symbolic state transition

102
00:03:57,360 --> 00:03:58,879
models

103
00:03:58,879 --> 00:04:02,080
we set a target profit for a sequence of

104
00:04:02,080 --> 00:04:03,120
device actions

105
00:04:03,120 --> 00:04:06,239
which you call a pass we

106
00:04:06,239 --> 00:04:08,959
use a serial improver to figure out if

107
00:04:08,959 --> 00:04:09,599
such

108
00:04:09,599 --> 00:04:12,159
paths can be profitable or not and find

109
00:04:12,159 --> 00:04:15,519
out the corresponding parameters

110
00:04:15,519 --> 00:04:17,199
i will give more details in the

111
00:04:17,199 --> 00:04:19,680
following

112
00:04:22,320 --> 00:04:24,639
i will start with divide post up by

113
00:04:24,639 --> 00:04:27,199
giving a simple example

114
00:04:27,199 --> 00:04:29,280
we have four on-chain markets

115
00:04:29,280 --> 00:04:31,040
differentiated by colors

116
00:04:31,040 --> 00:04:33,520
and they spot trading of different pair

117
00:04:33,520 --> 00:04:35,600
of tokens with the price of

118
00:04:35,600 --> 00:04:40,000
p1 p2 p3 and p4 respectively

119
00:04:40,000 --> 00:04:42,880
we have a unit of token a and we can do

120
00:04:42,880 --> 00:04:44,000
arbitrary trades

121
00:04:44,000 --> 00:04:47,680
among these four markets our target is

122
00:04:47,680 --> 00:04:49,360
to profit

123
00:04:49,360 --> 00:04:52,320
which means after several rounds of

124
00:04:52,320 --> 00:04:53,759
trade

125
00:04:53,759 --> 00:04:56,080
the output amount of token a should be

126
00:04:56,080 --> 00:04:59,520
larger than what we input

127
00:05:01,680 --> 00:05:04,320
one option we have is to first trade a

128
00:05:04,320 --> 00:05:05,120
for b

129
00:05:05,120 --> 00:05:08,160
in the red market which has a price of

130
00:05:08,160 --> 00:05:09,600
p1

131
00:05:09,600 --> 00:05:12,320
after the trade we now have p1 amount of

132
00:05:12,320 --> 00:05:14,160
b

133
00:05:14,160 --> 00:05:16,639
then we can trade the p1 amount of b

134
00:05:16,639 --> 00:05:17,680
back to a

135
00:05:17,680 --> 00:05:21,280
in the blue market at the price of p4

136
00:05:21,280 --> 00:05:23,600
then after the trade we now have p1

137
00:05:23,600 --> 00:05:24,639
times p4

138
00:05:24,639 --> 00:05:28,240
amount of a as output

139
00:05:28,240 --> 00:05:30,479
recall that our target is to have more

140
00:05:30,479 --> 00:05:32,400
than one unit of a

141
00:05:32,400 --> 00:05:34,560
hence the profitable condition is that

142
00:05:34,560 --> 00:05:35,600
the product

143
00:05:35,600 --> 00:05:40,240
of p1 and p4 is greater than one

144
00:05:41,440 --> 00:05:43,520
alternatively we can choose another

145
00:05:43,520 --> 00:05:44,960
trading pass

146
00:05:44,960 --> 00:05:47,520
similarly we start with trading a for b

147
00:05:47,520 --> 00:05:48,720
in the red market

148
00:05:48,720 --> 00:05:52,000
at the price of p1 instead

149
00:05:52,000 --> 00:05:54,240
of directly trading back to a in the

150
00:05:54,240 --> 00:05:55,199
blue market

151
00:05:55,199 --> 00:05:57,360
we can trade b for c in the yellow

152
00:05:57,360 --> 00:05:59,280
market and c for a

153
00:05:59,280 --> 00:06:02,880
in the green market and we end up with

154
00:06:02,880 --> 00:06:03,680
p1 times

155
00:06:03,680 --> 00:06:07,360
p4 times p3 amount of a again

156
00:06:07,360 --> 00:06:09,520
the profitable condition is that the

157
00:06:09,520 --> 00:06:14,799
product of p1 p2 p3 is greater than 1.

158
00:06:16,319 --> 00:06:19,600
to summarize we find that the arc charge

159
00:06:19,600 --> 00:06:20,240
trades

160
00:06:20,240 --> 00:06:23,919
typically forms a circle by circle i

161
00:06:23,919 --> 00:06:26,800
mean the trades start and end with the

162
00:06:26,800 --> 00:06:28,400
same token

163
00:06:28,400 --> 00:06:30,560
then we can easily calculate the profit

164
00:06:30,560 --> 00:06:31,759
by comparing the

165
00:06:31,759 --> 00:06:35,600
input and output amount we also notice

166
00:06:35,600 --> 00:06:36,160
that

167
00:06:36,160 --> 00:06:39,759
the markets can be built into a graph

168
00:06:39,759 --> 00:06:42,319
where every node represents a token and

169
00:06:42,319 --> 00:06:43,199
every edge

170
00:06:43,199 --> 00:06:46,240
represents the price

171
00:06:46,240 --> 00:06:48,720
instead of using the price value

172
00:06:48,720 --> 00:06:49,520
directly

173
00:06:49,520 --> 00:06:52,080
we assign the h as the negative

174
00:06:52,080 --> 00:06:52,960
logarithm

175
00:06:52,960 --> 00:06:56,639
of the price recall that the profitable

176
00:06:56,639 --> 00:06:57,759
condition that

177
00:06:57,759 --> 00:07:01,199
the product of prices is greater than

178
00:07:01,199 --> 00:07:03,199
one

179
00:07:03,199 --> 00:07:06,400
the condition is then equivalent to

180
00:07:06,400 --> 00:07:09,520
that the sum of negative logarithm is

181
00:07:09,520 --> 00:07:12,719
smaller than zero

182
00:07:14,479 --> 00:07:17,360
in this way we translate the profit

183
00:07:17,360 --> 00:07:18,560
generating task

184
00:07:18,560 --> 00:07:21,360
into a task of detecting a circle whose

185
00:07:21,360 --> 00:07:22,080
edges

186
00:07:22,080 --> 00:07:25,840
have a negative sum and we can use the

187
00:07:25,840 --> 00:07:26,560
bearing for

188
00:07:26,560 --> 00:07:28,960
algorithm to solve such a problem

189
00:07:28,960 --> 00:07:31,840
efficiently

190
00:07:33,120 --> 00:07:36,720
now we turn to divide poser smt

191
00:07:36,720 --> 00:07:40,240
in defy post smt we formulate d5 actions

192
00:07:40,240 --> 00:07:43,520
into symbolic models

193
00:07:43,520 --> 00:07:46,400
unlike divide poster up that only

194
00:07:46,400 --> 00:07:46,960
supports

195
00:07:46,960 --> 00:07:50,560
exchanging actions defy poster smt

196
00:07:50,560 --> 00:07:52,639
supports more types of actions like

197
00:07:52,639 --> 00:07:55,360
borrowing and margin trading

198
00:07:55,360 --> 00:07:57,120
we can introduce more complex

199
00:07:57,120 --> 00:08:00,240
constraints into defibrillator smt

200
00:08:00,240 --> 00:08:03,199
for example the borrowing amount cannot

201
00:08:03,199 --> 00:08:03,759
exceed

202
00:08:03,759 --> 00:08:07,360
the total amount in the liquidity proof

203
00:08:07,360 --> 00:08:11,599
in this way the output of action pass

204
00:08:11,599 --> 00:08:14,479
can be experienced in a symbolic formula

205
00:08:14,479 --> 00:08:15,520
with several

206
00:08:15,520 --> 00:08:18,879
symbolic constraints we also

207
00:08:18,879 --> 00:08:21,039
add an additional objective constraint

208
00:08:21,039 --> 00:08:23,280
that the final profit

209
00:08:23,280 --> 00:08:25,440
of this path should be greater than the

210
00:08:25,440 --> 00:08:28,800
specific target value

211
00:08:28,800 --> 00:08:32,640
so intuitively given the fixed path

212
00:08:32,640 --> 00:08:35,039
we want to figure out the action

213
00:08:35,039 --> 00:08:36,159
parameters

214
00:08:36,159 --> 00:08:38,559
that yet the profit greater than the

215
00:08:38,559 --> 00:08:39,760
target

216
00:08:39,760 --> 00:08:42,559
or we want to ensure that the paths

217
00:08:42,559 --> 00:08:46,480
cannot generate that much profit

218
00:08:46,480 --> 00:08:49,120
we can use an smt server to solve the

219
00:08:49,120 --> 00:08:50,720
constructed problem

220
00:08:50,720 --> 00:08:53,839
and if it's solvable the solver can also

221
00:08:53,839 --> 00:08:57,200
give us the solution parameters

222
00:08:57,200 --> 00:08:59,839
we apply a binary search to find out the

223
00:08:59,839 --> 00:09:01,440
maximum profit

224
00:09:01,440 --> 00:09:05,040
that means if we set an invisible target

225
00:09:05,040 --> 00:09:08,320
we load down the target value otherwise

226
00:09:08,320 --> 00:09:09,839
we increase

227
00:09:09,839 --> 00:09:13,519
until the target value converge

228
00:09:13,519 --> 00:09:17,279
this is how we solve for one pass

229
00:09:17,279 --> 00:09:19,760
and we can then brute force search all

230
00:09:19,760 --> 00:09:20,720
the possible parts

231
00:09:20,720 --> 00:09:24,880
and identify the profitable ones however

232
00:09:24,880 --> 00:09:27,839
given the number of different actions it

233
00:09:27,839 --> 00:09:30,399
is computationally invisible

234
00:09:30,399 --> 00:09:32,640
with hints apply some heuristics to

235
00:09:32,640 --> 00:09:34,640
prune the number of parts

236
00:09:34,640 --> 00:09:36,880
for example a path shouldn't include any

237
00:09:36,880 --> 00:09:38,080
loops

238
00:09:38,080 --> 00:09:40,480
i recommend to check out the peter paper

239
00:09:40,480 --> 00:09:42,560
for the complete descriptions of our

240
00:09:42,560 --> 00:09:45,199
heuristics

241
00:09:46,480 --> 00:09:49,519
to evaluate the divide poses we pick

242
00:09:49,519 --> 00:09:53,040
96 actions from several d5 platforms

243
00:09:53,040 --> 00:09:54,560
with the total 25

244
00:09:54,560 --> 00:09:58,720
assets we run deficit up and smt

245
00:09:58,720 --> 00:10:02,320
on every block from the 13th of december

246
00:10:02,320 --> 00:10:07,519
in 2019 to the 12th of may 2020

247
00:10:07,519 --> 00:10:11,360
over a total of 150 days

248
00:10:11,360 --> 00:10:14,160
to eliminate false positives we validate

249
00:10:14,160 --> 00:10:15,040
our results

250
00:10:15,040 --> 00:10:17,519
by executing the transactions on rare

251
00:10:17,519 --> 00:10:18,079
blockchain

252
00:10:18,079 --> 00:10:21,680
state we find that d5 poster up can

253
00:10:21,680 --> 00:10:22,320
detect

254
00:10:22,320 --> 00:10:26,720
more than 70 000 usd weekly perfect

255
00:10:26,720 --> 00:10:30,160
and the d5 poster can profit nearly 30

256
00:10:30,160 --> 00:10:33,839
000 usd per week

257
00:10:36,320 --> 00:10:40,720
although d5 post-op is easy to implement

258
00:10:40,720 --> 00:10:44,320
and appears to be able to identify more

259
00:10:44,320 --> 00:10:46,240
profitable transactions as a shield in

260
00:10:46,240 --> 00:10:48,480
the table

261
00:10:48,480 --> 00:10:51,600
we find that d5 posted smt

262
00:10:51,600 --> 00:10:55,360
can capture no cyclic strategies

263
00:10:55,360 --> 00:10:58,800
and it is able to detect the

264
00:10:58,800 --> 00:11:01,120
bzx attack opportunity that happened in

265
00:11:01,120 --> 00:11:04,160
the january of 2020

266
00:11:04,160 --> 00:11:08,399
more details are presented in our paper

267
00:11:10,160 --> 00:11:12,160
we've assumed that given the blockchain

268
00:11:12,160 --> 00:11:14,880
state traders can generate profitable

269
00:11:14,880 --> 00:11:15,760
transactions

270
00:11:15,760 --> 00:11:19,279
efficiently different traders may can

271
00:11:19,279 --> 00:11:22,079
compete for one opportunity attempting

272
00:11:22,079 --> 00:11:22,880
to extract

273
00:11:22,880 --> 00:11:26,000
the financial value

274
00:11:26,480 --> 00:11:29,279
in this competition miners have huge

275
00:11:29,279 --> 00:11:30,240
advantages

276
00:11:30,240 --> 00:11:32,800
because miners have the right to

277
00:11:32,800 --> 00:11:36,399
circumcise transactions in a block

278
00:11:36,399 --> 00:11:38,720
a miner for example can put its own

279
00:11:38,720 --> 00:11:40,240
profiting transaction

280
00:11:40,240 --> 00:11:43,680
at the top of block and the profits is

281
00:11:43,680 --> 00:11:45,920
guaranteed as long as the miner mines

282
00:11:45,920 --> 00:11:48,240
the next block

283
00:11:48,240 --> 00:11:51,760
such financial value is called mbv minor

284
00:11:51,760 --> 00:11:55,839
extractable value mvv is a financial

285
00:11:55,839 --> 00:11:58,000
reward in addition to the block reward

286
00:11:58,000 --> 00:12:01,600
and transaction fees the existence of

287
00:12:01,600 --> 00:12:06,160
mvv hence may impact the mining process

288
00:12:06,160 --> 00:12:08,880
in our paper we show that mdv

289
00:12:08,880 --> 00:12:11,120
opportunity is equivalent to a double

290
00:12:11,120 --> 00:12:13,519
spending opportunity

291
00:12:13,519 --> 00:12:16,079
we can use markup decision process that

292
00:12:16,079 --> 00:12:17,360
was widely used

293
00:12:17,360 --> 00:12:19,440
in the double spending research in the

294
00:12:19,440 --> 00:12:20,720
past few years

295
00:12:20,720 --> 00:12:24,639
to analyze optimal mbv strategies

296
00:12:24,639 --> 00:12:27,279
we show that nav opportunity may

297
00:12:27,279 --> 00:12:29,920
incentivize miners to deliberately focus

298
00:12:29,920 --> 00:12:30,880
the chain

299
00:12:30,880 --> 00:12:33,680
which endangers the blockchain

300
00:12:33,680 --> 00:12:36,160
consistent security

301
00:12:36,160 --> 00:12:39,200
for example a minor a movie

302
00:12:39,200 --> 00:12:41,600
three times the block reward uh

303
00:12:41,600 --> 00:12:42,639
incentivizes

304
00:12:42,639 --> 00:12:47,200
uh ten percent minor to focus chain

305
00:12:47,200 --> 00:12:49,360
we also show that the biggest mdv

306
00:12:49,360 --> 00:12:50,959
opportunity identified by

307
00:12:50,959 --> 00:12:53,680
divide poser could have caused severe

308
00:12:53,680 --> 00:12:55,440
working competition

309
00:12:55,440 --> 00:12:58,959
which is a worrying sign

310
00:12:59,600 --> 00:13:02,120
this is my presentation thank you for

311
00:13:02,120 --> 00:13:05,120
watching

