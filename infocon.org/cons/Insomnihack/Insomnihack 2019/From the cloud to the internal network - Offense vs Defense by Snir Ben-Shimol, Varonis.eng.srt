1
00:00:07,250 --> 00:00:10,619
[Music]

2
00:00:13,280 --> 00:00:22,560
okay guys and thank you very much for

3
00:00:16,650 --> 00:00:26,009
staying here till late and so today

4
00:00:22,560 --> 00:00:28,919
before that it's my second time here

5
00:00:26,010 --> 00:00:31,680
last time I have also like to talk about

6
00:00:28,920 --> 00:00:35,250
machine learning it was super fun and

7
00:00:31,680 --> 00:00:38,239
I'm super excited to be here again so I

8
00:00:35,250 --> 00:00:41,010
think for the authority for Osten me and

9
00:00:38,239 --> 00:00:45,959
and it's like it's a great pleasure

10
00:00:41,010 --> 00:00:48,210
really thank you so and today it's going

11
00:00:45,960 --> 00:00:51,809
to be like a bit more light than last

12
00:00:48,210 --> 00:00:54,960
year and and it's like a progress of

13
00:00:51,809 --> 00:00:57,388
what we show last year so we talked

14
00:00:54,960 --> 00:00:59,359
about the perimeter security we talked

15
00:00:57,389 --> 00:01:02,069
about the Active Directory

16
00:00:59,359 --> 00:01:04,769
identification of entities how you can

17
00:01:02,069 --> 00:01:07,710
build a profile of your organization

18
00:01:04,769 --> 00:01:10,260
what's happened in the last three years

19
00:01:07,710 --> 00:01:12,509
and we really identified in the last

20
00:01:10,260 --> 00:01:16,230
year is like everything's going to be

21
00:01:12,510 --> 00:01:19,230
external everything going outside people

22
00:01:16,230 --> 00:01:23,760
are migrating to the cloud and starting

23
00:01:19,230 --> 00:01:25,590
with moving there and mailboxes and then

24
00:01:23,760 --> 00:01:30,720
started to move their data to the

25
00:01:25,590 --> 00:01:33,240
repositories there and there and like we

26
00:01:30,720 --> 00:01:35,700
can see that organization today having a

27
00:01:33,240 --> 00:01:38,509
lot of issues and they don't know how to

28
00:01:35,700 --> 00:01:40,890
take what they actually build all day

29
00:01:38,510 --> 00:01:43,740
compliance the policies and everything

30
00:01:40,890 --> 00:01:46,470
that actually built and take that to the

31
00:01:43,740 --> 00:01:48,839
cloud in a mature way and fast enough

32
00:01:46,470 --> 00:01:52,100
like the executive want them to take it

33
00:01:48,840 --> 00:01:54,330
so today we're going to talk about a

34
00:01:52,100 --> 00:01:56,490
what's going on in the external

35
00:01:54,330 --> 00:01:58,820
perimeter we're going to talk a little

36
00:01:56,490 --> 00:02:03,679
bit about cloud a little bit about VPN

37
00:01:58,820 --> 00:02:06,630
how to the organization allowing to

38
00:02:03,680 --> 00:02:10,440
external entities if there are users or

39
00:02:06,630 --> 00:02:12,750
services or supplying change the third

40
00:02:10,440 --> 00:02:15,960
party's vendors to actually access the

41
00:02:12,750 --> 00:02:17,590
networking what are the risk what we are

42
00:02:15,960 --> 00:02:21,519
seeing

43
00:02:17,590 --> 00:02:24,129
in the day-to-day and which type of

44
00:02:21,519 --> 00:02:26,709
tools you can use in order to have

45
00:02:24,129 --> 00:02:30,190
better detection for your blue team for

46
00:02:26,709 --> 00:02:31,989
your sock team and to identify and have

47
00:02:30,190 --> 00:02:36,790
more visibility around those type of

48
00:02:31,989 --> 00:02:39,970
issues and we will have it's something

49
00:02:36,790 --> 00:02:43,060
around 30 minutes of session and we will

50
00:02:39,970 --> 00:02:46,420
have liked more than 5-10 minutes to Q&A

51
00:02:43,060 --> 00:02:48,580
so and remember what we're going to ask

52
00:02:46,420 --> 00:02:53,078
and you can also interrupt me in between

53
00:02:48,580 --> 00:02:55,810
it's okay it's it's flowy debt and so

54
00:02:53,079 --> 00:02:58,900
basically you don't know me my name is

55
00:02:55,810 --> 00:03:02,829
near I just actually moved for from Tel

56
00:02:58,900 --> 00:03:05,590
Aviv to New York three months ago and as

57
00:03:02,829 --> 00:03:07,769
part of my work at Verona's I'm managing

58
00:03:05,590 --> 00:03:10,720
all the cybersecurity activities the

59
00:03:07,769 --> 00:03:14,110
research teams the forensics team data

60
00:03:10,720 --> 00:03:15,730
science teams from the R&D and now we're

61
00:03:14,110 --> 00:03:20,980
expanding in the United States as well

62
00:03:15,730 --> 00:03:26,440
and my background is mostly I started as

63
00:03:20,980 --> 00:03:30,370
a developer and assembler C C++ going

64
00:03:26,440 --> 00:03:33,780
through a red teaming penetration test

65
00:03:30,370 --> 00:03:41,049
around web application up to you up to

66
00:03:33,780 --> 00:03:45,670
ATMs and airplanes and recently walking

67
00:03:41,049 --> 00:03:48,160
in Verona's what Verona's is doing

68
00:03:45,670 --> 00:03:52,119
basically is identifying insider threats

69
00:03:48,160 --> 00:03:55,150
and advanced persistent threats sounds

70
00:03:52,120 --> 00:03:58,450
very specific but this is what we this

71
00:03:55,150 --> 00:04:01,299
is what we do in Veroni so we have some

72
00:03:58,450 --> 00:04:03,220
cool out-of-the-box identification stuff

73
00:04:01,299 --> 00:04:05,290
so you can ask me about later on and

74
00:04:03,220 --> 00:04:09,370
it's also related to what we're going to

75
00:04:05,290 --> 00:04:12,578
hear today and let's move forward

76
00:04:09,370 --> 00:04:14,700
so already did in overview of we're

77
00:04:12,579 --> 00:04:19,510
going to talk about how the risk

78
00:04:14,700 --> 00:04:21,639
landscape is expanding to while like

79
00:04:19,510 --> 00:04:24,250
having more resources on the cloud and

80
00:04:21,639 --> 00:04:28,120
we're going I'm going to share some

81
00:04:24,250 --> 00:04:30,460
stories from the last five months from

82
00:04:28,120 --> 00:04:31,390
our Incident Response Team and forensics

83
00:04:30,460 --> 00:04:33,210
team from the

84
00:04:31,390 --> 00:04:36,400
filled what we actually seeing what's

85
00:04:33,210 --> 00:04:39,430
what's the challenges of our hundreds of

86
00:04:36,400 --> 00:04:41,260
customer that needs to answer those type

87
00:04:39,430 --> 00:04:43,180
of challenges sometimes it's easy

88
00:04:41,260 --> 00:04:45,460
sometimes it's very straightforward and

89
00:04:43,180 --> 00:04:48,100
sometimes just to know what's happened

90
00:04:45,460 --> 00:04:50,289
it's like us like two three weeks just

91
00:04:48,100 --> 00:04:54,040
to understand what's the impact and what

92
00:04:50,290 --> 00:04:56,230
is the actual incident and and we talk

93
00:04:54,040 --> 00:04:58,630
about the blue team challenges and a

94
00:04:56,230 --> 00:05:05,410
couple of ways maybe you can address

95
00:04:58,630 --> 00:05:08,860
them and solve them okay so um if you

96
00:05:05,410 --> 00:05:14,020
don't know those are like very very big

97
00:05:08,860 --> 00:05:17,290
and very new incident and Citrix I think

98
00:05:14,020 --> 00:05:19,690
two weeks ago I just am updating this

99
00:05:17,290 --> 00:05:23,880
slide every time that I have like a talk

100
00:05:19,690 --> 00:05:25,960
or training so citrus being act and

101
00:05:23,880 --> 00:05:29,680
actually they didn't disclose much

102
00:05:25,960 --> 00:05:32,380
information and so they talk about boot

103
00:05:29,680 --> 00:05:36,130
force some security firm talk about

104
00:05:32,380 --> 00:05:39,850
Iranian threat actors so basically the

105
00:05:36,130 --> 00:05:42,250
the what I'm trying to pass in this type

106
00:05:39,850 --> 00:05:45,370
of slide is like the information

107
00:05:42,250 --> 00:05:47,470
security is like it's a big thing

108
00:05:45,370 --> 00:05:49,360
everybody investing a lot of money but

109
00:05:47,470 --> 00:05:50,920
still incidents happen and they happen

110
00:05:49,360 --> 00:05:54,990
to the best of the best

111
00:05:50,920 --> 00:05:58,440
Citrix is super strong company box a

112
00:05:54,990 --> 00:06:00,970
company that actually like Airbus

113
00:05:58,440 --> 00:06:02,020
Airport companies banks financial

114
00:06:00,970 --> 00:06:05,350
institutions

115
00:06:02,020 --> 00:06:07,510
it's like assume breach I think it's the

116
00:06:05,350 --> 00:06:10,210
number one concept everyone need to

117
00:06:07,510 --> 00:06:12,760
understand regardless of the security

118
00:06:10,210 --> 00:06:14,530
and the perimeter security measurements

119
00:06:12,760 --> 00:06:18,400
you have in place you're going to be

120
00:06:14,530 --> 00:06:21,039
breach a my perspective is after the

121
00:06:18,400 --> 00:06:24,310
attacker will get into the organization

122
00:06:21,040 --> 00:06:27,690
after they will eventually use phishing

123
00:06:24,310 --> 00:06:30,760
scan you network ransom I don't know

124
00:06:27,690 --> 00:06:33,580
backdoor some important service open by

125
00:06:30,760 --> 00:06:37,030
mistake you will get in but then the

126
00:06:33,580 --> 00:06:39,340
game is actually starting so as long as

127
00:06:37,030 --> 00:06:41,049
you do be strong within the organization

128
00:06:39,340 --> 00:06:44,049
in the internal organization in

129
00:06:41,050 --> 00:06:46,750
architecture in in your application

130
00:06:44,050 --> 00:06:50,110
and this is how far the attacker can go

131
00:06:46,750 --> 00:06:53,050
in short time so it's a matter of time

132
00:06:50,110 --> 00:06:57,789
and matter of impact how much impact the

133
00:06:53,050 --> 00:07:02,819
attacker can do in how much time so if

134
00:06:57,789 --> 00:07:05,919
you have a very strong M internal

135
00:07:02,819 --> 00:07:08,139
infrastructure you will be pretty fine

136
00:07:05,919 --> 00:07:12,190
unless someone gets some very strong

137
00:07:08,139 --> 00:07:14,110
persistency in your network so box again

138
00:07:12,190 --> 00:07:16,270
it's like you see like everything is

139
00:07:14,110 --> 00:07:18,430
related to data terabytes of data

140
00:07:16,270 --> 00:07:20,590
exposed from companies that using

141
00:07:18,430 --> 00:07:23,740
cloud-based box accounts so it's cloud

142
00:07:20,590 --> 00:07:29,849
its box this one we actually found this

143
00:07:23,740 --> 00:07:32,500
one it's a browser man in the browser a

144
00:07:29,849 --> 00:07:33,550
new variant of malware that we actually

145
00:07:32,500 --> 00:07:37,659
identified the command and control

146
00:07:33,550 --> 00:07:39,430
server that was still on so so this one

147
00:07:37,659 --> 00:07:41,469
is very relevant to the cloud because

148
00:07:39,430 --> 00:07:42,280
most of the authentication for office

149
00:07:41,469 --> 00:07:44,770
365

150
00:07:42,280 --> 00:07:46,809
a lot of the authentication of the

151
00:07:44,770 --> 00:07:50,169
sensitive information certificate tokens

152
00:07:46,810 --> 00:07:53,620
everything is also like most of that

153
00:07:50,169 --> 00:07:55,330
coming and using the actual browsers so

154
00:07:53,620 --> 00:07:57,009
if you have a malware if you have a net

155
00:07:55,330 --> 00:07:59,349
on and some malicious stuff within your

156
00:07:57,009 --> 00:08:01,930
browser it can be much more effective

157
00:07:59,349 --> 00:08:07,120
for the attacker using cloud

158
00:08:01,930 --> 00:08:09,550
applications so I believe you already

159
00:08:07,120 --> 00:08:13,210
know that just a quick overview of

160
00:08:09,550 --> 00:08:15,580
public private and hybrid and then so so

161
00:08:13,210 --> 00:08:17,378
public cloud is actually have a cloud

162
00:08:15,580 --> 00:08:19,930
provider the cloud provider do

163
00:08:17,379 --> 00:08:22,060
everything for me the network the

164
00:08:19,930 --> 00:08:25,389
maintenance the infrastructure the

165
00:08:22,060 --> 00:08:27,759
bandwidth everything I need is there

166
00:08:25,389 --> 00:08:30,310
it's a public cloud so everything I have

167
00:08:27,759 --> 00:08:33,219
is there and no communication to the

168
00:08:30,310 --> 00:08:36,339
on-prem just a profit public Clark cloud

169
00:08:33,219 --> 00:08:39,010
that doing everything a private is the

170
00:08:36,339 --> 00:08:43,260
opposite private cloud is I have my own

171
00:08:39,010 --> 00:08:46,180
resources with my own resources I will

172
00:08:43,260 --> 00:08:49,480
maintain them manage them walk on

173
00:08:46,180 --> 00:08:53,229
scalability do whatever I need but I am

174
00:08:49,480 --> 00:08:56,500
the only organization that can use those

175
00:08:53,230 --> 00:09:00,370
resources even if those resources are

176
00:08:56,500 --> 00:09:02,530
mm actually if I use like a many

177
00:09:00,370 --> 00:09:04,840
services for those resources those

178
00:09:02,530 --> 00:09:07,870
resources still mine so this one is the

179
00:09:04,840 --> 00:09:09,460
private cloud the ibrid cloud which is

180
00:09:07,870 --> 00:09:12,220
the cloud platform that we're going to

181
00:09:09,460 --> 00:09:13,870
talk about today more is the combination

182
00:09:12,220 --> 00:09:18,720
of both I think it's like the best way

183
00:09:13,870 --> 00:09:21,340
to do that and I I was like talking with

184
00:09:18,720 --> 00:09:23,200
several customers and prospects and they

185
00:09:21,340 --> 00:09:25,800
told me we're going to move to the cloud

186
00:09:23,200 --> 00:09:28,420
and it's going to take us one year I

187
00:09:25,800 --> 00:09:30,339
just want to ask you someone is someone

188
00:09:28,420 --> 00:09:32,650
here think that moving all the

189
00:09:30,340 --> 00:09:36,640
organizations from on-prem to the cloud

190
00:09:32,650 --> 00:09:38,980
can be reached in one year it's it's

191
00:09:36,640 --> 00:09:41,050
very intense it can be nothing is

192
00:09:38,980 --> 00:09:43,420
impossible but it's very intense

193
00:09:41,050 --> 00:09:46,810
basically what I'm seeing is taking

194
00:09:43,420 --> 00:09:48,880
around two three years to do like kind

195
00:09:46,810 --> 00:09:51,339
of fully migration into the cloud so to

196
00:09:48,880 --> 00:09:53,860
do that migration organization today

197
00:09:51,340 --> 00:09:55,780
usually walking with ibrid so ibrid

198
00:09:53,860 --> 00:09:58,630
means that they have some kind of

199
00:09:55,780 --> 00:10:00,970
private cloud on Prem private cloud

200
00:09:58,630 --> 00:10:04,270
outside of the company and they also

201
00:10:00,970 --> 00:10:06,400
have the public cloud which they can

202
00:10:04,270 --> 00:10:09,400
store and maintain using the cloud

203
00:10:06,400 --> 00:10:12,730
provider which is Google Cloud Roger or

204
00:10:09,400 --> 00:10:15,459
AWS all the things that they need there

205
00:10:12,730 --> 00:10:17,740
so it's kind of mixed with what I own

206
00:10:15,460 --> 00:10:20,380
and I manage and what I have in the club

207
00:10:17,740 --> 00:10:22,510
in the public cloud so in a security

208
00:10:20,380 --> 00:10:24,550
perspective private cloud can be very

209
00:10:22,510 --> 00:10:26,170
helpful because it's very dynamic you

210
00:10:24,550 --> 00:10:28,300
could do whatever you want it's it's

211
00:10:26,170 --> 00:10:30,459
your own cloud you can define the

212
00:10:28,300 --> 00:10:31,930
security you have no restriction you can

213
00:10:30,460 --> 00:10:34,240
do whatever you want

214
00:10:31,930 --> 00:10:37,060
most of the organization like big banks

215
00:10:34,240 --> 00:10:40,300
finance institutions organizations that

216
00:10:37,060 --> 00:10:42,640
needs to comply to policy and regulation

217
00:10:40,300 --> 00:10:44,829
usually going to the private cloud

218
00:10:42,640 --> 00:10:48,310
because they already build something

219
00:10:44,830 --> 00:10:50,590
that everybody sign on and all the other

220
00:10:48,310 --> 00:10:53,260
companies know that they need to walk

221
00:10:50,590 --> 00:10:56,350
like that so they keep the same thing on

222
00:10:53,260 --> 00:10:58,810
the private cloud other organization

223
00:10:56,350 --> 00:11:01,210
like more business say a related

224
00:10:58,810 --> 00:11:04,489
organization most of them actually going

225
00:11:01,210 --> 00:11:08,640
and walking on the hybrid

226
00:11:04,490 --> 00:11:10,770
so um this one is actually the cloud

227
00:11:08,640 --> 00:11:13,080
environment and this one is the on-prem

228
00:11:10,770 --> 00:11:16,470
so what we have in the graph and then we

229
00:11:13,080 --> 00:11:19,649
will talk about the risk landscape so we

230
00:11:16,470 --> 00:11:21,510
have a sure ad and we have the so let's

231
00:11:19,649 --> 00:11:22,980
start with the on-prem actually so

232
00:11:21,510 --> 00:11:24,510
everybody know active directory right

233
00:11:22,980 --> 00:11:26,870
active director we manage all the

234
00:11:24,510 --> 00:11:29,370
permission all the groups or your users

235
00:11:26,870 --> 00:11:32,220
everything you have within the domain or

236
00:11:29,370 --> 00:11:34,430
domains you have in your actual on-prem

237
00:11:32,220 --> 00:11:36,450
Active Directory infrastructure

238
00:11:34,430 --> 00:11:39,000
besides that you have all the file

239
00:11:36,450 --> 00:11:41,220
services NOC devices Windows servers a

240
00:11:39,000 --> 00:11:46,320
Linux everything that you actually store

241
00:11:41,220 --> 00:11:50,040
data at you have your users users or

242
00:11:46,320 --> 00:11:52,770
services or computer accounts sorry you

243
00:11:50,040 --> 00:11:54,449
have a applications those application

244
00:11:52,770 --> 00:11:57,140
can be your own application can be

245
00:11:54,450 --> 00:11:59,040
application you actually bought and and

246
00:11:57,140 --> 00:12:01,410
things that we're going to talk about

247
00:11:59,040 --> 00:12:04,860
more so I actually puts like the icon of

248
00:12:01,410 --> 00:12:07,520
them is VPN proxy in DNS its components

249
00:12:04,860 --> 00:12:09,630
that usually turn into the external a

250
00:12:07,520 --> 00:12:11,760
network and also the internal network

251
00:12:09,630 --> 00:12:14,730
and there are like very important for

252
00:12:11,760 --> 00:12:16,350
attackers to use abuse or get for

253
00:12:14,730 --> 00:12:18,930
reconnaissance into actual data

254
00:12:16,350 --> 00:12:20,610
exfiltration so this is the on-prem

255
00:12:18,930 --> 00:12:23,160
everybody knows the on trend

256
00:12:20,610 --> 00:12:26,250
last year we we actually talked about

257
00:12:23,160 --> 00:12:29,010
the on-prem now we want to see how all

258
00:12:26,250 --> 00:12:30,690
the cloud stuff coming together with

259
00:12:29,010 --> 00:12:33,870
what we already know from the on-premise

260
00:12:30,690 --> 00:12:38,400
environment so in the cloud we have a

261
00:12:33,870 --> 00:12:42,630
shoe ad if today when I talking with

262
00:12:38,400 --> 00:12:45,300
organization and and CISOs see sad means

263
00:12:42,630 --> 00:12:47,339
like long time in the business they

264
00:12:45,300 --> 00:12:49,140
trying to take all they have in the

265
00:12:47,339 --> 00:12:51,470
actual Active Directory on-prem and to

266
00:12:49,140 --> 00:12:55,589
implement exactly the same on their ID

267
00:12:51,470 --> 00:12:57,660
it's not going to walk you have so many

268
00:12:55,589 --> 00:13:00,029
different things in Azure ad in the

269
00:12:57,660 --> 00:13:02,430
cloud it's it's totally different if you

270
00:13:00,029 --> 00:13:04,079
will take what you do in Active

271
00:13:02,430 --> 00:13:06,510
Directory on Prem and do the same in

272
00:13:04,079 --> 00:13:08,579
Azure ad you will have many security

273
00:13:06,510 --> 00:13:10,829
issues you will not cover most of the

274
00:13:08,579 --> 00:13:12,329
stuff and even the terminology is

275
00:13:10,829 --> 00:13:15,810
different you don't have domains have

276
00:13:12,329 --> 00:13:19,319
subscriptions you have tenants

277
00:13:15,810 --> 00:13:21,150
and so it's it's it's totally different

278
00:13:19,320 --> 00:13:23,880
the administrators are different you

279
00:13:21,150 --> 00:13:25,770
have service principles you have a

280
00:13:23,880 --> 00:13:27,660
different type of service accounts that

281
00:13:25,770 --> 00:13:30,449
actually maintain different type of

282
00:13:27,660 --> 00:13:33,240
application so all those type of things

283
00:13:30,450 --> 00:13:35,640
actually totally different from the ad

284
00:13:33,240 --> 00:13:37,410
and the on trend and we will talk about

285
00:13:35,640 --> 00:13:39,540
it as we actually connects to the risk

286
00:13:37,410 --> 00:13:42,390
and which type of attack you actually

287
00:13:39,540 --> 00:13:46,050
can implement on it you have your own

288
00:13:42,390 --> 00:13:47,610
application which you actually stored on

289
00:13:46,050 --> 00:13:49,170
the cloud and those application working

290
00:13:47,610 --> 00:13:51,330
with your cloud environment and maybe

291
00:13:49,170 --> 00:13:54,990
also with entre meeting if it's ibrid

292
00:13:51,330 --> 00:13:57,480
and you have a disaster plication and

293
00:13:54,990 --> 00:14:01,770
office 365 which is SharePoint Online

294
00:13:57,480 --> 00:14:04,050
exchange online and maybe box Dropbox

295
00:14:01,770 --> 00:14:07,560
all those application that you actually

296
00:14:04,050 --> 00:14:09,420
use and you have also storage you want

297
00:14:07,560 --> 00:14:11,160
to store you want to do some backup put

298
00:14:09,420 --> 00:14:14,069
some back up on the cloud things like

299
00:14:11,160 --> 00:14:16,680
that so it looks like it's very similar

300
00:14:14,070 --> 00:14:18,180
to the on-prem but they have many kind

301
00:14:16,680 --> 00:14:21,510
of control measures that you need to

302
00:14:18,180 --> 00:14:24,030
take this one is the actual portal and

303
00:14:21,510 --> 00:14:27,810
we're going to talk more about asher

304
00:14:24,030 --> 00:14:29,910
less than other cloud provider because I

305
00:14:27,810 --> 00:14:32,579
don't know I have more experience with

306
00:14:29,910 --> 00:14:35,640
Azure today so I feel more comfortable

307
00:14:32,580 --> 00:14:37,470
to talk about Azure and so in a juror as

308
00:14:35,640 --> 00:14:39,870
well you have the portal that if you

309
00:14:37,470 --> 00:14:41,550
want to connect to manage your cloud

310
00:14:39,870 --> 00:14:44,550
environment in different type of ways

311
00:14:41,550 --> 00:14:46,199
you can use that specific portal so or

312
00:14:44,550 --> 00:14:47,719
the entities that's actually connecting

313
00:14:46,200 --> 00:14:50,490
to the cloud and now the cloud is

314
00:14:47,720 --> 00:14:53,730
communicated with the on-prem you have

315
00:14:50,490 --> 00:14:56,310
the users users their devices and and

316
00:14:53,730 --> 00:14:58,620
bring your own device actually can

317
00:14:56,310 --> 00:15:01,349
connect your phones if you have the form

318
00:14:58,620 --> 00:15:03,150
from wall connect to the exchange online

319
00:15:01,350 --> 00:15:05,280
and you can see the emails that you get

320
00:15:03,150 --> 00:15:08,579
and everything so it's directly connect

321
00:15:05,280 --> 00:15:10,500
to the cloud environment you have the

322
00:15:08,580 --> 00:15:12,540
administrators the administrators can

323
00:15:10,500 --> 00:15:14,640
use the portal can use different type of

324
00:15:12,540 --> 00:15:17,880
authentication we will talk about it as

325
00:15:14,640 --> 00:15:20,459
well and they can manage all the cloud

326
00:15:17,880 --> 00:15:23,330
environment sometimes from the outside

327
00:15:20,459 --> 00:15:25,930
with external IP from their own actual

328
00:15:23,330 --> 00:15:29,770
home network

329
00:15:25,930 --> 00:15:32,560
and something new that it's become very

330
00:15:29,770 --> 00:15:35,199
very strong in the security phase is the

331
00:15:32,560 --> 00:15:38,680
DevOps users is the actually user that

332
00:15:35,200 --> 00:15:43,270
doing all the implementation of codes a

333
00:15:38,680 --> 00:15:45,040
code management doing the the DevOps

334
00:15:43,270 --> 00:15:47,980
stuff on all the applications that

335
00:15:45,040 --> 00:15:50,140
actually live in on the cloud and they

336
00:15:47,980 --> 00:15:52,180
actually like it's it's part of the

337
00:15:50,140 --> 00:15:53,920
functionality this is why organization

338
00:15:52,180 --> 00:15:57,370
moving to the cloud to allow these type

339
00:15:53,920 --> 00:16:01,089
of very quick adjustment to application

340
00:15:57,370 --> 00:16:04,210
come commit and encode the repositories

341
00:16:01,090 --> 00:16:06,820
and those specific user from what I'm

342
00:16:04,210 --> 00:16:08,980
saying you have so much issue so many

343
00:16:06,820 --> 00:16:11,800
issues with connecting to the cloud

344
00:16:08,980 --> 00:16:13,750
environment so as an attacker the first

345
00:16:11,800 --> 00:16:16,569
thing I will do I will look for those

346
00:16:13,750 --> 00:16:19,060
type of users I will look to the the

347
00:16:16,570 --> 00:16:21,550
thing that those user may use in order

348
00:16:19,060 --> 00:16:24,849
to access the portal or access those

349
00:16:21,550 --> 00:16:27,130
type of application because usually in I

350
00:16:24,850 --> 00:16:29,320
think 90% of the organization that we

351
00:16:27,130 --> 00:16:32,740
actually came through and walk with

352
00:16:29,320 --> 00:16:35,290
those users actually and administrators

353
00:16:32,740 --> 00:16:38,290
so they have so many privileges they

354
00:16:35,290 --> 00:16:40,689
have privileges of subscription and as I

355
00:16:38,290 --> 00:16:43,270
mentioned subscription for me is like a

356
00:16:40,690 --> 00:16:45,610
domain so if you are like a subscription

357
00:16:43,270 --> 00:16:47,620
admin in the cloud it's kind of a domain

358
00:16:45,610 --> 00:16:50,080
admin you in charge of all the

359
00:16:47,620 --> 00:16:51,940
subscription all the content you can do

360
00:16:50,080 --> 00:16:56,110
a lot of things and you can elevate some

361
00:16:51,940 --> 00:16:58,330
other privileges if the permission does

362
00:16:56,110 --> 00:17:00,790
not managed correctly on the cloud and

363
00:16:58,330 --> 00:17:03,640
tell you the truth because it's kind of

364
00:17:00,790 --> 00:17:06,300
new and you're taking people from the IT

365
00:17:03,640 --> 00:17:10,030
and the network management from the old

366
00:17:06,300 --> 00:17:12,430
let's say the old days they did they

367
00:17:10,030 --> 00:17:14,649
doing the same thing for ten years and

368
00:17:12,430 --> 00:17:16,089
then you take them and say do some

369
00:17:14,650 --> 00:17:18,220
things on the cloud and they do some

370
00:17:16,089 --> 00:17:20,169
training but it's the same mindset and

371
00:17:18,220 --> 00:17:22,750
the problem with the people that stand

372
00:17:20,170 --> 00:17:25,720
with the same mindset it's open a lot of

373
00:17:22,750 --> 00:17:28,000
security issues so specifically in the

374
00:17:25,720 --> 00:17:31,180
permission and specifically on those

375
00:17:28,000 --> 00:17:33,370
users the DevOps users what's the type

376
00:17:31,180 --> 00:17:35,140
of authentication waters the the legs

377
00:17:33,370 --> 00:17:36,449
and access point that I actually use on

378
00:17:35,140 --> 00:17:41,399
the cloud

379
00:17:36,450 --> 00:17:43,970
and so I sure ad in a grid solution use

380
00:17:41,399 --> 00:17:46,049
a different type of services in order to

381
00:17:43,970 --> 00:17:48,779
services of service in order to

382
00:17:46,049 --> 00:17:51,269
communicate and sync within the actual

383
00:17:48,779 --> 00:17:53,639
on-prem this one I think it's number one

384
00:17:51,269 --> 00:17:56,609
risk and number one thing that we can

385
00:17:53,639 --> 00:18:00,359
focus on as an attackers is so we have

386
00:17:56,609 --> 00:18:03,509
the azure ad connect so azure ad connect

387
00:18:00,359 --> 00:18:05,639
a dedicated service account and that

388
00:18:03,509 --> 00:18:08,279
service account is super powerful it's

389
00:18:05,639 --> 00:18:10,678
actually migrating passwords migrating

390
00:18:08,279 --> 00:18:12,179
information from the on-prem to the

391
00:18:10,679 --> 00:18:14,190
cloud vice versa

392
00:18:12,179 --> 00:18:17,070
depends on the actual implementation of

393
00:18:14,190 --> 00:18:19,169
your network and it's super super

394
00:18:17,070 --> 00:18:22,529
critical something that you need to take

395
00:18:19,169 --> 00:18:24,720
care of in your most like most valuable

396
00:18:22,529 --> 00:18:26,999
stuff it's it's exactly like the domain

397
00:18:24,720 --> 00:18:28,769
controller you have the service account

398
00:18:26,999 --> 00:18:31,109
of it and in that service account is

399
00:18:28,769 --> 00:18:35,489
super powerful is one of the privileged

400
00:18:31,109 --> 00:18:37,769
accounts you have in the cloud and you

401
00:18:35,489 --> 00:18:39,869
have the users and you have the actual

402
00:18:37,769 --> 00:18:41,460
application that running on Prem but

403
00:18:39,869 --> 00:18:43,439
want also to communicate with the

404
00:18:41,460 --> 00:18:44,999
application on the cloud you have

405
00:18:43,440 --> 00:18:47,850
different type of implementation for

406
00:18:44,999 --> 00:18:51,720
that most the most common one is the

407
00:18:47,850 --> 00:18:55,109
Federation so they are they have the

408
00:18:51,720 --> 00:18:58,019
Federation authentication so here in the

409
00:18:55,109 --> 00:18:59,879
DMZ usually they have like a web server

410
00:18:58,019 --> 00:19:04,320
that called the Federation web server

411
00:18:59,879 --> 00:19:07,199
that actually stored certificate and use

412
00:19:04,320 --> 00:19:09,779
to a autentic a to do the same

413
00:19:07,200 --> 00:19:12,419
authentication from the on frame to the

414
00:19:09,779 --> 00:19:15,840
cloud application using that users so in

415
00:19:12,419 --> 00:19:18,690
the best ways a you have like a policy

416
00:19:15,840 --> 00:19:21,959
restriction of IPS and segmentation so

417
00:19:18,690 --> 00:19:23,820
if you walk in from your own network you

418
00:19:21,960 --> 00:19:25,230
will have this certificate and your own

419
00:19:23,820 --> 00:19:27,480
device will have the certificates you

420
00:19:25,230 --> 00:19:28,950
have the authentication users passwords

421
00:19:27,480 --> 00:19:30,480
everything you need you will be

422
00:19:28,950 --> 00:19:33,869
authenticated and everything going to be

423
00:19:30,480 --> 00:19:36,059
good eh and if you try to do it outside

424
00:19:33,869 --> 00:19:40,168
of the organization some organization

425
00:19:36,059 --> 00:19:43,049
will block you it's very rare but I saw

426
00:19:40,169 --> 00:19:45,570
I think three that's actually doing that

427
00:19:43,049 --> 00:19:47,879
so it's pretty rare yeah I think node

428
00:19:45,570 --> 00:19:49,810
four because yeah for organizations

429
00:19:47,879 --> 00:19:53,260
actually doing access

430
00:19:49,810 --> 00:19:55,780
action on the Federation so so basically

431
00:19:53,260 --> 00:19:57,640
it's like a web application web server

432
00:19:55,780 --> 00:19:59,800
outside that web service content

433
00:19:57,640 --> 00:20:01,540
certificate those certificates super

434
00:19:59,800 --> 00:20:03,790
critical if you have those certificate

435
00:20:01,540 --> 00:20:05,920
you can do the authentication to the

436
00:20:03,790 --> 00:20:09,850
azure ad automatically and maybe

437
00:20:05,920 --> 00:20:12,280
sometimes they using er the actual users

438
00:20:09,850 --> 00:20:14,169
that live in on Prem and living the same

439
00:20:12,280 --> 00:20:16,720
on the already having the same password

440
00:20:14,170 --> 00:20:18,760
so here you don't have like the Kerberos

441
00:20:16,720 --> 00:20:20,650
tickets and Kerberos thing and

442
00:20:18,760 --> 00:20:23,170
harvesting the Kerberos cracking them

443
00:20:20,650 --> 00:20:25,870
taking the actual password you have this

444
00:20:23,170 --> 00:20:27,970
ammo you have different type of a access

445
00:20:25,870 --> 00:20:30,219
token so it's a bit different but if you

446
00:20:27,970 --> 00:20:32,500
actually get the username and password

447
00:20:30,220 --> 00:20:35,710
is the same username and password are

448
00:20:32,500 --> 00:20:37,690
the same here there and from that on you

449
00:20:35,710 --> 00:20:39,430
can continue and do whatever you want if

450
00:20:37,690 --> 00:20:42,010
it's an I breed you take control over

451
00:20:39,430 --> 00:20:45,190
the cloud to control most of the time

452
00:20:42,010 --> 00:20:47,800
over the actual on prime environment in

453
00:20:45,190 --> 00:20:49,480
most cases I don't know the the actual

454
00:20:47,800 --> 00:20:51,210
red teamer the Taff control on

455
00:20:49,480 --> 00:20:54,340
privileged accounts in the cloud and

456
00:20:51,210 --> 00:20:56,890
after one hour of maximum will not have

457
00:20:54,340 --> 00:20:58,750
any control of privileged accounts on

458
00:20:56,890 --> 00:21:02,290
the on Prem with the configuration that

459
00:20:58,750 --> 00:21:04,330
I'm seeing today so we talked about the

460
00:21:02,290 --> 00:21:07,450
Federation we also talked about the

461
00:21:04,330 --> 00:21:10,990
actual ad Connect and that's specific

462
00:21:07,450 --> 00:21:14,490
also a Microsoft have some default

463
00:21:10,990 --> 00:21:16,870
configuration for those type of a

464
00:21:14,490 --> 00:21:19,000
account and service account that service

465
00:21:16,870 --> 00:21:23,739
account also have some some problematic

466
00:21:19,000 --> 00:21:25,630
configuration for example and some

467
00:21:23,740 --> 00:21:27,970
configuration in Active Directory that

468
00:21:25,630 --> 00:21:30,430
allow you to do DC sync if you know

469
00:21:27,970 --> 00:21:31,960
about the things about this thing is

470
00:21:30,430 --> 00:21:34,950
that you don't need to be domain admin

471
00:21:31,960 --> 00:21:37,600
you can use that a action in order to

472
00:21:34,950 --> 00:21:40,450
replicate and move like all the ash

473
00:21:37,600 --> 00:21:42,879
credentials from the domain controls so

474
00:21:40,450 --> 00:21:45,430
in I don't want to go into details too

475
00:21:42,880 --> 00:21:47,590
much but it's like it's very bad and you

476
00:21:45,430 --> 00:21:49,870
need to look for those permission each

477
00:21:47,590 --> 00:21:51,639
and every service account a service

478
00:21:49,870 --> 00:21:53,669
principle each and every account that

479
00:21:51,640 --> 00:21:56,310
actually have those type of privileges

480
00:21:53,670 --> 00:21:59,440
you need to monitor that and you need to

481
00:21:56,310 --> 00:22:01,750
you need to put in place the right

482
00:21:59,440 --> 00:22:03,670
permissions I think it's the right start

483
00:22:01,750 --> 00:22:06,340
so we talked about the web

484
00:22:03,670 --> 00:22:10,390
authentication you have CLI dedicated

485
00:22:06,340 --> 00:22:12,879
CLI access usually the DevOps can use it

486
00:22:10,390 --> 00:22:16,210
in order to authenticate and perform a

487
00:22:12,880 --> 00:22:19,300
operation in front of the cloud you have

488
00:22:16,210 --> 00:22:21,940
a very very nice documentation about

489
00:22:19,300 --> 00:22:25,240
PowerShell functionality and we love

490
00:22:21,940 --> 00:22:27,730
PowerShell of course as your graph API

491
00:22:25,240 --> 00:22:29,920
we usually use that in order to do some

492
00:22:27,730 --> 00:22:32,170
auditing and to monitor the traffic and

493
00:22:29,920 --> 00:22:33,610
the events that actually happening in

494
00:22:32,170 --> 00:22:35,890
the cloud environment so if you have

495
00:22:33,610 --> 00:22:39,669
like a sock team if you do some blue

496
00:22:35,890 --> 00:22:42,070
team's activity it's very nice to look

497
00:22:39,670 --> 00:22:44,020
on the API and graph the API to take

498
00:22:42,070 --> 00:22:45,280
some information from there and we will

499
00:22:44,020 --> 00:22:50,560
talk about which type of information

500
00:22:45,280 --> 00:22:52,870
will let you look on so before you

501
00:22:50,560 --> 00:22:55,690
continue we didn't talk about the actual

502
00:22:52,870 --> 00:22:59,919
VPN so yes we have the cloud with VPN

503
00:22:55,690 --> 00:23:02,080
it's still on and so back in the days

504
00:22:59,920 --> 00:23:04,180
like I think one and two years ago we

505
00:23:02,080 --> 00:23:08,080
talked about VPN and out to bypass VPN

506
00:23:04,180 --> 00:23:10,150
same issues are still here talking about

507
00:23:08,080 --> 00:23:12,520
the cloud we have more issue than actual

508
00:23:10,150 --> 00:23:13,870
VPN because VPNs depending on the vendor

509
00:23:12,520 --> 00:23:15,910
intent occasion it's pretty

510
00:23:13,870 --> 00:23:19,120
straightforward you have good force you

511
00:23:15,910 --> 00:23:22,330
have fishing you have a accounts without

512
00:23:19,120 --> 00:23:24,189
MSA you have like specific use cases

513
00:23:22,330 --> 00:23:26,560
which is very straightforward and the

514
00:23:24,190 --> 00:23:28,960
risk is still there and most of the time

515
00:23:26,560 --> 00:23:32,050
when you want to do like a spear fishing

516
00:23:28,960 --> 00:23:34,960
or to attack like a black box attack

517
00:23:32,050 --> 00:23:39,220
I will target VPN users and I will

518
00:23:34,960 --> 00:23:42,310
target the VPN users without MFA so the

519
00:23:39,220 --> 00:23:44,350
VPN usually used also by those external

520
00:23:42,310 --> 00:23:46,030
users if you want to connect to your

521
00:23:44,350 --> 00:23:49,240
actual organization you will use the VPN

522
00:23:46,030 --> 00:23:51,370
and the VPN have a lot of information

523
00:23:49,240 --> 00:23:53,380
that can help you to understand where

524
00:23:51,370 --> 00:23:57,340
the user come from of the user use the

525
00:23:53,380 --> 00:23:59,140
VPN and if it's a risk or not and this

526
00:23:57,340 --> 00:24:02,879
is one of the source parameter that you

527
00:23:59,140 --> 00:24:06,130
really want to look on the VPN and

528
00:24:02,880 --> 00:24:08,260
something very very nice that I saw in

529
00:24:06,130 --> 00:24:10,510
the last year is the supply chain issue

530
00:24:08,260 --> 00:24:14,190
so we walk with the tilt party company

531
00:24:10,510 --> 00:24:16,480
and that is probably a company actually

532
00:24:14,190 --> 00:24:17,530
walking with one of your internal

533
00:24:16,480 --> 00:24:20,170
application

534
00:24:17,530 --> 00:24:23,139
so you open some kind of VPN connection

535
00:24:20,170 --> 00:24:25,810
from your segmentation internal

536
00:24:23,140 --> 00:24:28,300
segmentation through a VPN to the

537
00:24:25,810 --> 00:24:32,679
service provider or the third party

538
00:24:28,300 --> 00:24:34,540
company the problem with that is a some

539
00:24:32,680 --> 00:24:37,570
of the restrictions that you have on the

540
00:24:34,540 --> 00:24:39,580
VPN from that company is very low one

541
00:24:37,570 --> 00:24:42,159
they have a global account that global

542
00:24:39,580 --> 00:24:43,929
accounts being used for different people

543
00:24:42,160 --> 00:24:46,300
in the company so you need to segregate

544
00:24:43,930 --> 00:24:48,880
you need to understand which type of API

545
00:24:46,300 --> 00:24:51,190
is which type of people can access your

546
00:24:48,880 --> 00:24:54,220
environment from the till party vendor

547
00:24:51,190 --> 00:24:56,200
and then to apply the specific VPN

548
00:24:54,220 --> 00:24:57,010
account for each and every account that

549
00:24:56,200 --> 00:25:03,220
actually use it

550
00:24:57,010 --> 00:25:07,960
permissions of course and also sorry and

551
00:25:03,220 --> 00:25:09,970
also a they have a specific segmentation

552
00:25:07,960 --> 00:25:12,310
if you as tilt about the vendor to run

553
00:25:09,970 --> 00:25:15,160
api's they usually run from their own

554
00:25:12,310 --> 00:25:16,899
segmentation of IPs if I know the

555
00:25:15,160 --> 00:25:18,910
segmentation of the companies that walk

556
00:25:16,900 --> 00:25:21,400
in with me and accessing my internal

557
00:25:18,910 --> 00:25:24,190
network I can maintain that as a policy

558
00:25:21,400 --> 00:25:26,380
within the VPN configuration and then to

559
00:25:24,190 --> 00:25:28,480
have access control and that accept

560
00:25:26,380 --> 00:25:30,480
control will allow me if someone will

561
00:25:28,480 --> 00:25:32,350
take that account with that specific

562
00:25:30,480 --> 00:25:34,360
credential for the VPN

563
00:25:32,350 --> 00:25:37,419
they will not be able to access because

564
00:25:34,360 --> 00:25:39,580
also I implemented a specific IP range

565
00:25:37,420 --> 00:25:47,140
that can use those credentials or those

566
00:25:39,580 --> 00:25:50,770
type of accounts so I think this is like

567
00:25:47,140 --> 00:25:53,020
something that most of you or maybe

568
00:25:50,770 --> 00:25:56,220
knows if you're from the offensive side

569
00:25:53,020 --> 00:25:58,660
but people from the defend defense side

570
00:25:56,220 --> 00:26:01,210
managing the security they have a lot of

571
00:25:58,660 --> 00:26:02,860
thrusting multi-factor authentication so

572
00:26:01,210 --> 00:26:05,710
multi-factor authentication something

573
00:26:02,860 --> 00:26:13,659
you have and something you know I need

574
00:26:05,710 --> 00:26:15,220
to drink sorry I think everybody know

575
00:26:13,660 --> 00:26:21,730
what is multi-factor authentication in

576
00:26:15,220 --> 00:26:25,830
this room right so what we what we

577
00:26:21,730 --> 00:26:29,770
actually what's the research team and

578
00:26:25,830 --> 00:26:30,429
actually done is like we mapped a

579
00:26:29,770 --> 00:26:32,500
specific

580
00:26:30,430 --> 00:26:35,650
service account we map specific account

581
00:26:32,500 --> 00:26:37,630
that you cannot apply two-factor

582
00:26:35,650 --> 00:26:40,000
authentication on if it's on the cloud

583
00:26:37,630 --> 00:26:45,610
or maybe some kind of ways that they

584
00:26:40,000 --> 00:26:47,440
using the VPN for example a emergency

585
00:26:45,610 --> 00:26:49,810
access account so this one is a quote

586
00:26:47,440 --> 00:26:52,720
for we found it in the Microsoft a

587
00:26:49,810 --> 00:26:55,899
configure Microsoft best practices

588
00:26:52,720 --> 00:26:57,730
documentation so if you have the cloud

589
00:26:55,900 --> 00:27:00,340
environment and you have administrative

590
00:26:57,730 --> 00:27:02,590
accounts okay so it's super funny

591
00:27:00,340 --> 00:27:05,020
so the accounts with the highest

592
00:27:02,590 --> 00:27:07,389
privileges maybe you can lock them down

593
00:27:05,020 --> 00:27:08,379
maybe something bad can happen and you

594
00:27:07,390 --> 00:27:11,710
need a back-up plan

595
00:27:08,380 --> 00:27:15,370
so the back-up plan is to have at least

596
00:27:11,710 --> 00:27:16,900
two users and those two users would have

597
00:27:15,370 --> 00:27:19,330
the same privileges as the

598
00:27:16,900 --> 00:27:21,010
administrative accounts and the

599
00:27:19,330 --> 00:27:23,500
recommendation is not to apply

600
00:27:21,010 --> 00:27:25,629
multi-factor authentication using mobile

601
00:27:23,500 --> 00:27:29,560
those type of things on those super

602
00:27:25,630 --> 00:27:31,330
sensitive accounts so what we did is you

603
00:27:29,560 --> 00:27:33,159
have a lot of scripts in the internet as

604
00:27:31,330 --> 00:27:36,820
well but we build a script that actually

605
00:27:33,160 --> 00:27:39,610
map all the user accounts without MFA in

606
00:27:36,820 --> 00:27:42,639
the cloud environment and we saw like in

607
00:27:39,610 --> 00:27:48,280
a we run over five organization and we

608
00:27:42,640 --> 00:27:50,650
saw that a we have something around 15%

609
00:27:48,280 --> 00:27:52,660
10% I don't remember correctly between

610
00:27:50,650 --> 00:27:55,150
10 and 50 percent of the users and

611
00:27:52,660 --> 00:27:57,670
service account together that not using

612
00:27:55,150 --> 00:27:59,530
not implementing MFA while I was talking

613
00:27:57,670 --> 00:28:02,050
with the head of security of the company

614
00:27:59,530 --> 00:28:04,450
told me yeah we fully migrated with MFA

615
00:28:02,050 --> 00:28:07,120
I and I told him it's it's it's not

616
00:28:04,450 --> 00:28:10,210
reasonable you have service account you

617
00:28:07,120 --> 00:28:12,399
have like accounts that cannot react to

618
00:28:10,210 --> 00:28:14,200
a challenge cannot do multi-factor

619
00:28:12,400 --> 00:28:16,840
authentication it's not reasonable

620
00:28:14,200 --> 00:28:18,430
you cannot take all your user accounts

621
00:28:16,840 --> 00:28:22,659
and service account to do okay those are

622
00:28:18,430 --> 00:28:25,000
all MFA and then I look for a specific

623
00:28:22,660 --> 00:28:27,130
user account or service account that

624
00:28:25,000 --> 00:28:30,550
could not have an MFA and this one I

625
00:28:27,130 --> 00:28:32,590
think super interesting example the

626
00:28:30,550 --> 00:28:34,149
emergency access account which are the

627
00:28:32,590 --> 00:28:36,669
highest privileged accounts and

628
00:28:34,150 --> 00:28:38,980
Microsoft saying and I know what they

629
00:28:36,670 --> 00:28:42,340
say and they also have like other access

630
00:28:38,980 --> 00:28:44,320
control which are like lower but they

631
00:28:42,340 --> 00:28:46,209
say do not use them afraid for those

632
00:28:44,320 --> 00:28:48,928
just in case you don't want to lose your

633
00:28:46,210 --> 00:28:52,480
control over their cloud environment

634
00:28:48,929 --> 00:28:54,580
regardless for that legacy of course you

635
00:28:52,480 --> 00:28:57,190
have some legacy services legacy

636
00:28:54,580 --> 00:29:00,039
application cannot use MFA service

637
00:28:57,190 --> 00:29:05,169
account we talked about it msps if you

638
00:29:00,039 --> 00:29:07,690
are an MSP or you using MSP m they will

639
00:29:05,169 --> 00:29:09,850
it's like it's very problematic with

640
00:29:07,690 --> 00:29:11,139
them to to to walk with multi-factor

641
00:29:09,850 --> 00:29:13,269
authentication because they have

642
00:29:11,139 --> 00:29:15,639
different type of people that managing

643
00:29:13,269 --> 00:29:18,850
many customers and many customers have

644
00:29:15,639 --> 00:29:20,799
many administrative accounts so it's

645
00:29:18,850 --> 00:29:25,090
very problematic it's not effective for

646
00:29:20,799 --> 00:29:27,580
them to do this kind of widespread MSI

647
00:29:25,090 --> 00:29:30,158
implementation so it's another loophole

648
00:29:27,580 --> 00:29:33,759
so if I want to AK organization or I

649
00:29:30,159 --> 00:29:35,559
want to understand which well we'll find

650
00:29:33,759 --> 00:29:37,600
the weakest link and the accounts that I

651
00:29:35,559 --> 00:29:39,700
want to take advantage of I will look

652
00:29:37,600 --> 00:29:43,418
for those accounts without the MSA and

653
00:29:39,700 --> 00:29:47,139
you have pretty much a lot of them but

654
00:29:43,419 --> 00:29:52,269
actually okay it's another example so

655
00:29:47,139 --> 00:29:53,709
six months ago a I sure was actually

656
00:29:52,269 --> 00:29:55,600
down they have some problem with

657
00:29:53,710 --> 00:29:58,419
generating the multi-factor

658
00:29:55,600 --> 00:30:00,070
authentication it's kind of denial of

659
00:29:58,419 --> 00:30:01,570
service I don't know if it's human error

660
00:30:00,070 --> 00:30:03,250
or something happened to the service and

661
00:30:01,570 --> 00:30:05,379
then organization cannot actually

662
00:30:03,250 --> 00:30:07,509
authenticate to the mails to the email

663
00:30:05,379 --> 00:30:09,549
straight points everything so those

664
00:30:07,509 --> 00:30:12,129
things also happen is you know like

665
00:30:09,549 --> 00:30:15,158
every organization it's like it's very

666
00:30:12,129 --> 00:30:18,009
very common and it's very it's okay we

667
00:30:15,159 --> 00:30:19,899
all human we have mistakes but you need

668
00:30:18,009 --> 00:30:22,240
to take into consideration that those

669
00:30:19,899 --> 00:30:24,158
type of things happen it's a red flag to

670
00:30:22,240 --> 00:30:27,039
everyone is say okay Microsoft has no

671
00:30:24,159 --> 00:30:29,289
MSA everybody will tone down the MFA all

672
00:30:27,039 --> 00:30:31,750
the accounts will be open to brute force

673
00:30:29,289 --> 00:30:35,230
password spraying this is why I want to

674
00:30:31,750 --> 00:30:37,690
go in to do what I need to do so if you

675
00:30:35,230 --> 00:30:40,600
if you walk in with Microsoft is very

676
00:30:37,690 --> 00:30:43,600
very rare but if you walk in with other

677
00:30:40,600 --> 00:30:45,939
service provider which are smaller and

678
00:30:43,600 --> 00:30:47,889
walking with other a multi-factor

679
00:30:45,940 --> 00:30:49,629
authentication type of services that can

680
00:30:47,889 --> 00:30:52,240
be down and then you need to maintain

681
00:30:49,629 --> 00:30:54,639
your business then you you will explore

682
00:30:52,240 --> 00:30:56,679
today no MSA we have some problem in the

683
00:30:54,639 --> 00:30:58,050
service and then something bad can

684
00:30:56,679 --> 00:31:00,630
happen so

685
00:30:58,050 --> 00:31:03,659
you if you the thing is like do not put

686
00:31:00,630 --> 00:31:07,910
your trust on MSA MSA is one security

687
00:31:03,660 --> 00:31:12,930
layer and not everything you need okay

688
00:31:07,910 --> 00:31:15,030
you something very useful for external

689
00:31:12,930 --> 00:31:16,890
attackers is like I don't know what's

690
00:31:15,030 --> 00:31:19,980
going on in the network will do DNS

691
00:31:16,890 --> 00:31:21,480
recon I want to talk about DNS recon not

692
00:31:19,980 --> 00:31:24,240
because it's new it's because it's very

693
00:31:21,480 --> 00:31:26,010
hard to identify and I'm going to talk

694
00:31:24,240 --> 00:31:30,030
more about like the blue teaming stuff

695
00:31:26,010 --> 00:31:31,470
here so DNS is less monitor than Active

696
00:31:30,030 --> 00:31:33,810
Directory I see a lot of penetration

697
00:31:31,470 --> 00:31:35,460
testers they don't care if they're going

698
00:31:33,810 --> 00:31:37,409
to be cut or not because it's part of

699
00:31:35,460 --> 00:31:38,790
the assessment so they will use held up

700
00:31:37,410 --> 00:31:41,340
query they will query the Active

701
00:31:38,790 --> 00:31:44,159
Directory all the security solution will

702
00:31:41,340 --> 00:31:45,659
shell if someone is using a query in all

703
00:31:44,160 --> 00:31:46,980
Active Directory a lot of held up

704
00:31:45,660 --> 00:31:49,110
queries yeah it's very straightforward

705
00:31:46,980 --> 00:31:51,570
but if you're actually going to a key an

706
00:31:49,110 --> 00:31:53,429
organization you want to avoid in the

707
00:31:51,570 --> 00:31:55,050
first place to access Active Directory

708
00:31:53,430 --> 00:31:58,890
because it's heavily monitoring is the

709
00:31:55,050 --> 00:32:03,659
ground rule so the things like I usually

710
00:31:58,890 --> 00:32:06,240
go into on the DNS why super noisy they

711
00:32:03,660 --> 00:32:08,880
have most of the information I need so

712
00:32:06,240 --> 00:32:10,380
all the service or all the servers all

713
00:32:08,880 --> 00:32:13,170
the machine names everything installing

714
00:32:10,380 --> 00:32:14,820
the DNS so if I'm into an organization

715
00:32:13,170 --> 00:32:16,650
new organization I want to understand

716
00:32:14,820 --> 00:32:18,750
when I am what's the signal tation

717
00:32:16,650 --> 00:32:22,050
what's the device names everything I can

718
00:32:18,750 --> 00:32:24,030
extract that from the DNS and the thing

719
00:32:22,050 --> 00:32:26,970
is like it's a very great white smoke

720
00:32:24,030 --> 00:32:29,610
each organization that I actually met

721
00:32:26,970 --> 00:32:32,310
and as been what you doing with DNS are

722
00:32:29,610 --> 00:32:33,929
you monitoring DNS say we look for DNS

723
00:32:32,310 --> 00:32:35,550
tunneling actually pretty

724
00:32:33,930 --> 00:32:37,470
straightforward the understanding is not

725
00:32:35,550 --> 00:32:42,120
something so complicated see a lot of

726
00:32:37,470 --> 00:32:45,630
requests with unique a sub domain to the

727
00:32:42,120 --> 00:32:47,909
same domain and a lot of failures and

728
00:32:45,630 --> 00:32:50,340
then you have success sometimes pretty

729
00:32:47,910 --> 00:32:52,320
pretty simple Allen to create this type

730
00:32:50,340 --> 00:32:54,000
of rule but the thing is like the

731
00:32:52,320 --> 00:32:58,260
reconnaissance is much more complicated

732
00:32:54,000 --> 00:33:00,360
because reconnaissance can be valid we

733
00:32:58,260 --> 00:33:02,970
will talk about it as well so it's very

734
00:33:00,360 --> 00:33:06,090
hard to avoid false positives and when I

735
00:33:02,970 --> 00:33:08,580
talk about reconnaissance and I'm

736
00:33:06,090 --> 00:33:10,320
talking about finding some MX records

737
00:33:08,580 --> 00:33:11,879
finding some interesting services

738
00:33:10,320 --> 00:33:13,049
identify security vendor

739
00:33:11,879 --> 00:33:14,968
domains if you're talking about the

740
00:33:13,049 --> 00:33:18,599
cloud environments most of the vehicles

741
00:33:14,969 --> 00:33:21,779
actually like a signing in like in the

742
00:33:18,599 --> 00:33:23,579
external records of the DNA so you can

743
00:33:21,779 --> 00:33:25,589
actually query that if you look in on

744
00:33:23,579 --> 00:33:27,989
the internal domain if you have some

745
00:33:25,589 --> 00:33:29,908
foothold within the internal domain you

746
00:33:27,989 --> 00:33:32,219
have the reverse lookup box option which

747
00:33:29,909 --> 00:33:33,839
is my favorite my favorite for

748
00:33:32,219 --> 00:33:35,969
reconnaissance a reverse lookup is I

749
00:33:33,839 --> 00:33:37,739
will give you the IP address you will

750
00:33:35,969 --> 00:33:40,529
give me the host name so I can take the

751
00:33:37,739 --> 00:33:42,059
segmentation that I am in now or all the

752
00:33:40,529 --> 00:33:44,759
organization segmentation but it's going

753
00:33:42,059 --> 00:33:45,569
to be noisy and then to query for the

754
00:33:44,759 --> 00:33:47,609
server names

755
00:33:45,569 --> 00:33:50,009
after that I know which type of server

756
00:33:47,609 --> 00:33:52,259
in which IP so I can start my lateral

757
00:33:50,009 --> 00:33:55,679
movement my attack Feiner abilities and

758
00:33:52,259 --> 00:33:59,039
more scanning so it's like very very pre

759
00:33:55,679 --> 00:34:01,469
exploitation phase and this one can be

760
00:33:59,039 --> 00:34:04,379
very very noisy if you want to track it

761
00:34:01,469 --> 00:34:08,759
without the sufficient information that

762
00:34:04,379 --> 00:34:11,009
you have a zone transfer all-news I

763
00:34:08,759 --> 00:34:13,529
think it's like it's not relevant it's

764
00:34:11,009 --> 00:34:15,690
very rare to be relevant but it's good

765
00:34:13,529 --> 00:34:17,389
to have and many more option with DNS

766
00:34:15,690 --> 00:34:19,799
you have so many information there so

767
00:34:17,389 --> 00:34:23,549
let's talk a little bit about detection

768
00:34:19,799 --> 00:34:25,199
so the query type in DNS you have so

769
00:34:23,549 --> 00:34:28,168
many query tab if you want to look for

770
00:34:25,199 --> 00:34:28,949
recon look for PTR request for most of

771
00:34:28,168 --> 00:34:31,768
the cases

772
00:34:28,949 --> 00:34:34,739
Ravel's lookup for recon using the PTR

773
00:34:31,768 --> 00:34:38,209
auto rating authority

774
00:34:34,739 --> 00:34:41,549
authoritative Flags and upstream traffic

775
00:34:38,210 --> 00:34:44,609
this one is number one false positive

776
00:34:41,549 --> 00:34:47,909
reduction in DNS so if I will do it DNS

777
00:34:44,609 --> 00:34:49,319
recon why I want to go outside of the

778
00:34:47,909 --> 00:34:53,549
network that I want to do reconnaissance

779
00:34:49,319 --> 00:34:55,799
up so I will look for people that

780
00:34:53,549 --> 00:34:57,809
actually doing the reverse lookup

781
00:34:55,799 --> 00:34:59,759
queries just within the network so I

782
00:34:57,809 --> 00:35:02,599
have some flags in the DNS that tell me

783
00:34:59,759 --> 00:35:05,579
that if the DNS server my DNS server

784
00:35:02,599 --> 00:35:09,390
didn't find the record is sending the

785
00:35:05,579 --> 00:35:11,460
request upstream that to to the external

786
00:35:09,390 --> 00:35:13,589
Network the only problem there is like

787
00:35:11,460 --> 00:35:15,690
if you have multi layers of DNS servers

788
00:35:13,589 --> 00:35:17,940
so sometimes the upstream is not a

789
00:35:15,690 --> 00:35:19,589
really upstream it's just a different

790
00:35:17,940 --> 00:35:21,509
zone or different segmentation with the

791
00:35:19,589 --> 00:35:25,319
network so you need to play with that

792
00:35:21,509 --> 00:35:25,770
but for that usually I will exclude DNS

793
00:35:25,319 --> 00:35:28,560
to the

794
00:35:25,770 --> 00:35:31,230
traffic for example because it's not so

795
00:35:28,560 --> 00:35:33,200
if you took control over my DNS server

796
00:35:31,230 --> 00:35:34,620
so you will do different stuff than

797
00:35:33,200 --> 00:35:38,810
reconnaissance right

798
00:35:34,620 --> 00:35:40,950
you already out the DNS so first of all

799
00:35:38,810 --> 00:35:42,690
understand the query types after

800
00:35:40,950 --> 00:35:44,189
indiscernible query types you need to

801
00:35:42,690 --> 00:35:45,720
understand the flags after you

802
00:35:44,190 --> 00:35:47,760
understand the flags you can avoid the

803
00:35:45,720 --> 00:35:50,790
false-positive of upstream and

804
00:35:47,760 --> 00:35:53,730
downstream internal queries and upstream

805
00:35:50,790 --> 00:35:58,650
external queries super valuable to

806
00:35:53,730 --> 00:36:00,960
detection and to avoid noise a noisy

807
00:35:58,650 --> 00:36:03,690
server what's going on so you have many

808
00:36:00,960 --> 00:36:07,620
application that may of using DNS for

809
00:36:03,690 --> 00:36:09,180
resolving so some application to some

810
00:36:07,620 --> 00:36:11,910
application or service account of

811
00:36:09,180 --> 00:36:14,940
application will be up every one day two

812
00:36:11,910 --> 00:36:17,399
days IP addresses are changing and

813
00:36:14,940 --> 00:36:21,210
sometimes they using the VP the DNS

814
00:36:17,400 --> 00:36:23,400
noted - sorry in order to resolve the IP

815
00:36:21,210 --> 00:36:25,110
addresses into us name and it's valid

816
00:36:23,400 --> 00:36:27,300
this is what they do but the thing is

817
00:36:25,110 --> 00:36:29,220
those specific application do it in

818
00:36:27,300 --> 00:36:32,100
specific time most of the time on

819
00:36:29,220 --> 00:36:35,069
specific segmentation if you can learn

820
00:36:32,100 --> 00:36:37,110
or map that activity you can reduce the

821
00:36:35,070 --> 00:36:38,850
false positive and the noise by looking

822
00:36:37,110 --> 00:36:43,800
on the flags and by looking on the

823
00:36:38,850 --> 00:36:46,920
segmentation in the IPS and again remove

824
00:36:43,800 --> 00:36:49,590
DNS - DNS traffic from is not really

825
00:36:46,920 --> 00:36:52,890
valuable if you see some valuable stuff

826
00:36:49,590 --> 00:36:56,040
that of communication between DNS - DNS

827
00:36:52,890 --> 00:36:58,770
let me know it's I know like - stuff but

828
00:36:56,040 --> 00:37:01,410
it's not so interesting by me but let me

829
00:36:58,770 --> 00:37:04,770
know after the collab the talk and it's

830
00:37:01,410 --> 00:37:08,100
interesting actually fishing in the

831
00:37:04,770 --> 00:37:10,980
cloud it's so fun so everything is

832
00:37:08,100 --> 00:37:13,080
external everything is external so we

833
00:37:10,980 --> 00:37:17,400
have we have some some very good stories

834
00:37:13,080 --> 00:37:19,110
about it and people are very trusted

835
00:37:17,400 --> 00:37:21,300
parameter solutions so if they have

836
00:37:19,110 --> 00:37:24,390
sandboxing in the email if they have

837
00:37:21,300 --> 00:37:27,420
content filtering a threat intelligent

838
00:37:24,390 --> 00:37:29,339
reputation they really trust in it and

839
00:37:27,420 --> 00:37:31,890
say ok if I got an external email its

840
00:37:29,340 --> 00:37:34,500
bypass all the security mechanism that I

841
00:37:31,890 --> 00:37:36,420
have on my email that's it I'm fine not

842
00:37:34,500 --> 00:37:39,240
it's not because today you have the

843
00:37:36,420 --> 00:37:42,000
macro the DD you have so many vulnerable

844
00:37:39,240 --> 00:37:45,118
you have PDFs with JavaScript within you

845
00:37:42,000 --> 00:37:47,490
have power shellman in manipulation you

846
00:37:45,119 --> 00:37:49,710
can put actually everybody knows that

847
00:37:47,490 --> 00:37:52,200
like malicious code within images so

848
00:37:49,710 --> 00:37:54,360
it's not really helpful it's helpful to

849
00:37:52,200 --> 00:37:56,790
reduce the 90% of the stuff but if

850
00:37:54,360 --> 00:37:59,190
something really bad will happen it will

851
00:37:56,790 --> 00:38:02,009
get in so do not trust only the

852
00:37:59,190 --> 00:38:04,980
sandboxing and the male reputation the

853
00:38:02,010 --> 00:38:07,680
impact is much greater because if you

854
00:38:04,980 --> 00:38:11,970
have cloud services so the exchange

855
00:38:07,680 --> 00:38:13,200
online will have a if you you actually

856
00:38:11,970 --> 00:38:15,240
access to the cloud and you have the

857
00:38:13,200 --> 00:38:17,009
exchange online you can you can do so

858
00:38:15,240 --> 00:38:20,368
many things and you can go from them to

859
00:38:17,010 --> 00:38:22,590
the on perm very very easily a I read

860
00:38:20,369 --> 00:38:30,030
again if you own the cloud you own it

861
00:38:22,590 --> 00:38:33,330
all in most cases so some some cool

862
00:38:30,030 --> 00:38:35,190
stuff that I actually saw a one

863
00:38:33,330 --> 00:38:38,340
organization actually been affected by

864
00:38:35,190 --> 00:38:41,490
phishing and that specific organization

865
00:38:38,340 --> 00:38:42,660
use MSA and the specific account that

866
00:38:41,490 --> 00:38:46,560
have been compromised

867
00:38:42,660 --> 00:38:49,230
some of them few of them was MFA related

868
00:38:46,560 --> 00:38:51,150
accounts so the phishing actually

869
00:38:49,230 --> 00:38:52,980
identified because everything is

870
00:38:51,150 --> 00:38:55,859
external you can scan you can take the

871
00:38:52,980 --> 00:38:59,160
actual record they actually ask the user

872
00:38:55,859 --> 00:39:01,200
to provide the token so if you ask for

873
00:38:59,160 --> 00:39:04,440
username and password you can also ask

874
00:39:01,200 --> 00:39:07,350
for the token so what we assume we don't

875
00:39:04,440 --> 00:39:10,020
actually saw the the the attacker server

876
00:39:07,350 --> 00:39:12,230
or the code but what we assume is when

877
00:39:10,020 --> 00:39:15,480
you enter the username and password

878
00:39:12,230 --> 00:39:19,170
automatically he ask you for the token

879
00:39:15,480 --> 00:39:21,330
the actual MFA and if you provide it

880
00:39:19,170 --> 00:39:24,150
automatically dev script the taking all

881
00:39:21,330 --> 00:39:27,569
those three components and authenticate

882
00:39:24,150 --> 00:39:30,690
by the Alpha view and they actually been

883
00:39:27,570 --> 00:39:33,810
compromised a fish the MFA token it's

884
00:39:30,690 --> 00:39:35,910
it's like it's very simple because if

885
00:39:33,810 --> 00:39:38,340
you ask for password you can ask for the

886
00:39:35,910 --> 00:39:40,500
token and it's actually happened to a

887
00:39:38,340 --> 00:39:42,960
customer a couple of months ago it's

888
00:39:40,500 --> 00:39:44,940
it's for me it was amazing because I

889
00:39:42,960 --> 00:39:47,130
think it's the second time I saw it

890
00:39:44,940 --> 00:39:49,970
but it's very straightforward you ask

891
00:39:47,130 --> 00:39:52,590
question you get answers that's it and

892
00:39:49,970 --> 00:39:53,009
this one is an example of something that

893
00:39:52,590 --> 00:39:56,060
we

894
00:39:53,010 --> 00:39:58,650
actually running in the company so a

895
00:39:56,060 --> 00:40:00,720
phishing phishing email that actually I

896
00:39:58,650 --> 00:40:02,790
know that you're like a Microsoft shop

897
00:40:00,720 --> 00:40:05,250
and you have sure put online so you

898
00:40:02,790 --> 00:40:08,460
actually can disguise yourself as a

899
00:40:05,250 --> 00:40:10,920
cloud application it's very very common

900
00:40:08,460 --> 00:40:16,110
today we saw some if you know the

901
00:40:10,920 --> 00:40:19,350
imitate malware we we actually identify

902
00:40:16,110 --> 00:40:21,870
some of the threat actors that try to

903
00:40:19,350 --> 00:40:23,520
after the first infection to use the

904
00:40:21,870 --> 00:40:25,830
sharepoint online for internal

905
00:40:23,520 --> 00:40:27,570
distribution what imitate usually do is

906
00:40:25,830 --> 00:40:29,759
like they taking control of the account

907
00:40:27,570 --> 00:40:32,640
and then sending internal email to all

908
00:40:29,760 --> 00:40:35,400
the recipients within the company so we

909
00:40:32,640 --> 00:40:37,620
saw this type of behavior that someone

910
00:40:35,400 --> 00:40:39,720
is shrine in a very bad way but the idea

911
00:40:37,620 --> 00:40:41,339
was very good to actually use the

912
00:40:39,720 --> 00:40:44,279
SharePoint in order to distribute them

913
00:40:41,340 --> 00:40:46,350
our so it's very if you see an email

914
00:40:44,280 --> 00:40:48,630
from your own colleague or just an

915
00:40:46,350 --> 00:40:51,180
internal guy within the company that say

916
00:40:48,630 --> 00:40:54,570
it's a guys please sign this report as

917
00:40:51,180 --> 00:40:56,310
soon as you can and it's actually it's

918
00:40:54,570 --> 00:40:57,780
actually from the internal organization

919
00:40:56,310 --> 00:41:00,120
you know you walk in which airport

920
00:40:57,780 --> 00:41:01,680
online so you will click on the link you

921
00:41:00,120 --> 00:41:04,799
will download the file and that's it

922
00:41:01,680 --> 00:41:08,790
it's very high fidelity phishing

923
00:41:04,800 --> 00:41:11,040
attempts so if you can bypass F MFA and

924
00:41:08,790 --> 00:41:14,580
you can use fishing you can use the

925
00:41:11,040 --> 00:41:18,890
office 365 fishing to out actually

926
00:41:14,580 --> 00:41:21,600
outmaneuver some very very trusted a

927
00:41:18,890 --> 00:41:24,330
security solution I think it's very very

928
00:41:21,600 --> 00:41:27,720
cool is some cool stuff that we actually

929
00:41:24,330 --> 00:41:30,990
saw in the wild a Pony code exploitation

930
00:41:27,720 --> 00:41:33,750
so today people starting to look more on

931
00:41:30,990 --> 00:41:35,549
the URLs so before you actually click on

932
00:41:33,750 --> 00:41:39,480
something you check if the URL is ok

933
00:41:35,550 --> 00:41:40,890
actually the the cloud URLs specifically

934
00:41:39,480 --> 00:41:43,680
a sure because they have the token

935
00:41:40,890 --> 00:41:47,129
sometimes it's very massive and actually

936
00:41:43,680 --> 00:41:48,839
if I fall in like one like scam of my

937
00:41:47,130 --> 00:41:51,750
teammate that actually send me some

938
00:41:48,840 --> 00:41:52,200
fishing on the cloud we do it to each

939
00:41:51,750 --> 00:41:54,630
other

940
00:41:52,200 --> 00:41:56,700
sometimes and it's like you cannot look

941
00:41:54,630 --> 00:41:58,890
on the URL it looks it's so long with a

942
00:41:56,700 --> 00:42:00,980
lot of numbers and and you see that

943
00:41:58,890 --> 00:42:03,900
every day it's actually a Juran

944
00:42:00,980 --> 00:42:06,150
so the Pony code is taking like ASCII

945
00:42:03,900 --> 00:42:06,930
characters and specific characters that

946
00:42:06,150 --> 00:42:10,440
looks

947
00:42:06,930 --> 00:42:12,899
a that you sign the domain it looks like

948
00:42:10,440 --> 00:42:15,270
one way but they actually like different

949
00:42:12,900 --> 00:42:17,579
type of domain so it's something that

950
00:42:15,270 --> 00:42:20,130
you can read about you you we have like

951
00:42:17,579 --> 00:42:22,170
four or five different type of Pony code

952
00:42:20,130 --> 00:42:25,190
irrelevant a phishing attempts that

953
00:42:22,170 --> 00:42:29,039
actually you see one URL but on the

954
00:42:25,190 --> 00:42:35,779
vaccine it's actually other different

955
00:42:29,039 --> 00:42:40,829
URL let's talk about file activities and

956
00:42:35,779 --> 00:42:43,349
if anyone here is like a in charge of

957
00:42:40,829 --> 00:42:45,390
sensitive data in the company or if

958
00:42:43,349 --> 00:42:47,730
something bad will happen to sensitive

959
00:42:45,390 --> 00:42:52,098
data it's something that you need to act

960
00:42:47,730 --> 00:42:58,109
on like data management things like that

961
00:42:52,099 --> 00:42:59,490
ok cool so the cloud is jungle a you

962
00:42:58,109 --> 00:43:01,259
have teams and you have sharepoint

963
00:42:59,490 --> 00:43:04,919
online the thing with teams and

964
00:43:01,260 --> 00:43:06,390
sharepoint online is it's like a if you

965
00:43:04,920 --> 00:43:09,569
not play with that you will not

966
00:43:06,390 --> 00:43:12,180
understand how much is out of control in

967
00:43:09,569 --> 00:43:13,920
your own Prem you have permissions you

968
00:43:12,180 --> 00:43:16,558
have access permissions you have

969
00:43:13,920 --> 00:43:18,569
sensitive file you have regulated file J

970
00:43:16,559 --> 00:43:20,579
dprc CPA I don't know those type of

971
00:43:18,569 --> 00:43:21,808
files that you need to keep and you need

972
00:43:20,579 --> 00:43:24,750
to keep safe in you need to monitor

973
00:43:21,809 --> 00:43:28,710
those specific files have specific

974
00:43:24,750 --> 00:43:30,270
access rights so what's happened is you

975
00:43:28,710 --> 00:43:31,980
know if you want to access the file you

976
00:43:30,270 --> 00:43:33,809
don't have access to you will not be

977
00:43:31,980 --> 00:43:36,029
able to access to unless you exploit

978
00:43:33,809 --> 00:43:38,279
something or still identity or

979
00:43:36,029 --> 00:43:40,289
compromised an account but what's

980
00:43:38,279 --> 00:43:43,140
happened in the cloud is you upload the

981
00:43:40,289 --> 00:43:45,480
file and after you upload the file to

982
00:43:43,140 --> 00:43:47,368
one location you can share that file

983
00:43:45,480 --> 00:43:49,289
with anyone you can share the file with

984
00:43:47,369 --> 00:43:51,660
all company you can share the file with

985
00:43:49,289 --> 00:43:54,089
other employees in the company you can

986
00:43:51,660 --> 00:43:57,180
share that file sometimes externally and

987
00:43:54,089 --> 00:43:59,578
after and it's it's not a bug it's not a

988
00:43:57,180 --> 00:44:01,500
sec it's a security risk but it's a

989
00:43:59,579 --> 00:44:03,599
feature this is our SharePoint walk this

990
00:44:01,500 --> 00:44:05,819
is how a team's walk this is how the

991
00:44:03,599 --> 00:44:08,369
collaboration of files walk it's it's

992
00:44:05,819 --> 00:44:09,930
part of the feature from my experience

993
00:44:08,369 --> 00:44:11,940
and I'm working closely with file

994
00:44:09,930 --> 00:44:14,819
management and data management you

995
00:44:11,940 --> 00:44:17,730
cannot fight it the only thing you can

996
00:44:14,819 --> 00:44:19,558
actually do is you can monitor it so if

997
00:44:17,730 --> 00:44:20,770
you want to fight it just close

998
00:44:19,559 --> 00:44:24,520
everything

999
00:44:20,770 --> 00:44:26,950
I think it's very good to close external

1000
00:44:24,520 --> 00:44:29,410
sharing it depends on the organization

1001
00:44:26,950 --> 00:44:31,359
so if you close all the external sharing

1002
00:44:29,410 --> 00:44:34,029
and provide external sharing for a

1003
00:44:31,360 --> 00:44:36,010
specific site or specific people within

1004
00:44:34,030 --> 00:44:38,619
the organization the risk will be

1005
00:44:36,010 --> 00:44:41,470
reduced dramatically but you still have

1006
00:44:38,619 --> 00:44:44,740
people that can share external external

1007
00:44:41,470 --> 00:44:47,709
files you can you still have system

1008
00:44:44,740 --> 00:44:49,680
administrator you still have a network

1009
00:44:47,710 --> 00:44:52,270
administrator that can change those

1010
00:44:49,680 --> 00:44:54,279
internal configurations sometime

1011
00:44:52,270 --> 00:44:58,090
somewhere so the thing is that you need

1012
00:44:54,280 --> 00:45:01,690
to monitor a inactive during a sure a

1013
00:44:58,090 --> 00:45:04,119
graph API you can track events of

1014
00:45:01,690 --> 00:45:06,820
sharing activity in SharePoint Online so

1015
00:45:04,119 --> 00:45:09,340
every time that people sharing files you

1016
00:45:06,820 --> 00:45:12,460
can monitor that activity and I really

1017
00:45:09,340 --> 00:45:17,140
really suggest you first of all to close

1018
00:45:12,460 --> 00:45:19,330
all external a sharing and to close and

1019
00:45:17,140 --> 00:45:21,160
to take those specific events and to

1020
00:45:19,330 --> 00:45:24,759
monitor the specific event it's very

1021
00:45:21,160 --> 00:45:26,980
noisy but it's better be safe than sorry

1022
00:45:24,760 --> 00:45:29,950
right you can do it in a more smart way

1023
00:45:26,980 --> 00:45:31,510
using file classification which can give

1024
00:45:29,950 --> 00:45:35,379
you more context about which type of

1025
00:45:31,510 --> 00:45:37,510
file you actually share or not a sum I

1026
00:45:35,380 --> 00:45:41,800
think some very cool stuff around it is

1027
00:45:37,510 --> 00:45:43,990
if you have a team site okay you have

1028
00:45:41,800 --> 00:45:46,150
one group in team you have one team site

1029
00:45:43,990 --> 00:45:48,580
and you know that team sites can access

1030
00:45:46,150 --> 00:45:50,740
specific information and that specific

1031
00:45:48,580 --> 00:45:53,380
information is stored on SharePoint

1032
00:45:50,740 --> 00:45:56,520
Online till now it's all good we have

1033
00:45:53,380 --> 00:45:59,920
teams and each team have specific a

1034
00:45:56,520 --> 00:46:02,410
access to specific files or places in

1035
00:45:59,920 --> 00:46:04,690
SharePoint Online so if we will take

1036
00:46:02,410 --> 00:46:07,390
specific file and share that specific

1037
00:46:04,690 --> 00:46:10,000
file with different person outside of

1038
00:46:07,390 --> 00:46:12,879
the team it will you will not see it as

1039
00:46:10,000 --> 00:46:16,150
the team members you will not see it in

1040
00:46:12,880 --> 00:46:18,280
the actual interface that it can access

1041
00:46:16,150 --> 00:46:20,230
the file but he actually can access the

1042
00:46:18,280 --> 00:46:24,250
file you can see that only if you go to

1043
00:46:20,230 --> 00:46:25,930
the advanced manage a permission on the

1044
00:46:24,250 --> 00:46:29,500
office on the SharePoint Online

1045
00:46:25,930 --> 00:46:31,480
interface so even if you see that you

1046
00:46:29,500 --> 00:46:34,090
have specific people that can access

1047
00:46:31,480 --> 00:46:34,450
specific file sometimes it's not enough

1048
00:46:34,090 --> 00:46:36,369
you

1049
00:46:34,450 --> 00:46:38,439
to dig down to do to go to the

1050
00:46:36,369 --> 00:46:40,960
management permission management and

1051
00:46:38,440 --> 00:46:41,560
then you can see other people outside of

1052
00:46:40,960 --> 00:46:44,680
the group

1053
00:46:41,560 --> 00:46:46,960
outside of the actual real permission

1054
00:46:44,680 --> 00:46:49,359
for those specific files that can

1055
00:46:46,960 --> 00:46:51,130
actually access the files that you don't

1056
00:46:49,359 --> 00:46:53,230
want them to access to only because

1057
00:46:51,130 --> 00:46:55,170
someone is share that with them and you

1058
00:46:53,230 --> 00:46:59,579
don't see that from the actual interface

1059
00:46:55,170 --> 00:47:02,560
what what I usually see that our

1060
00:46:59,579 --> 00:47:04,660
organization trying to solve it is they

1061
00:47:02,560 --> 00:47:06,430
doing a permission they blocking

1062
00:47:04,660 --> 00:47:08,770
everything on shell bot online and

1063
00:47:06,430 --> 00:47:11,049
managing the permission using teams

1064
00:47:08,770 --> 00:47:13,240
the only problem managing the permission

1065
00:47:11,050 --> 00:47:14,530
using teams is sometimes it's not

1066
00:47:13,240 --> 00:47:16,660
reflect what you have in Active

1067
00:47:14,530 --> 00:47:19,839
Directory so the access management is

1068
00:47:16,660 --> 00:47:23,790
different okay but it's a point that you

1069
00:47:19,839 --> 00:47:30,279
need to take into consideration again

1070
00:47:23,790 --> 00:47:32,589
share with everyone a last story about I

1071
00:47:30,280 --> 00:47:35,680
will tell you something that we saw like

1072
00:47:32,589 --> 00:47:36,940
1-1 months ago and how to detect it I

1073
00:47:35,680 --> 00:47:38,618
will do it fast and then I will leave

1074
00:47:36,940 --> 00:47:44,079
like 10 minutes for questions if you

1075
00:47:38,619 --> 00:47:45,970
have so we jump into a call of a

1076
00:47:44,079 --> 00:47:49,329
customer and the customer told us that

1077
00:47:45,970 --> 00:47:51,189
we have some strange trade models range

1078
00:47:49,329 --> 00:47:54,069
alert and they sing some strange

1079
00:47:51,190 --> 00:47:57,480
behavior around someone that is like an

1080
00:47:54,069 --> 00:47:59,619
IT admin for 8 years in the company and

1081
00:47:57,480 --> 00:48:02,589
they don't know what to do because you

1082
00:47:59,619 --> 00:48:05,920
have access and he usually part of the

1083
00:48:02,589 --> 00:48:09,578
investigation so we jump in and this is

1084
00:48:05,920 --> 00:48:12,760
what we saw we saw like the IT guy it

1085
00:48:09,579 --> 00:48:15,940
created a new user account and that

1086
00:48:12,760 --> 00:48:18,760
specific user accounts is it's a new new

1087
00:48:15,940 --> 00:48:22,270
account with no special permissions and

1088
00:48:18,760 --> 00:48:26,200
then the e added specific permission to

1089
00:48:22,270 --> 00:48:29,440
a exchange online mailboxes and those

1090
00:48:26,200 --> 00:48:32,640
six exchange online mailboxes was a

1091
00:48:29,440 --> 00:48:35,920
three of them or four of them related to

1092
00:48:32,640 --> 00:48:39,490
executive the CFO financial manager of

1093
00:48:35,920 --> 00:48:41,470
the company the procurement and and one

1094
00:48:39,490 --> 00:48:44,020
for the HR that actually in charge of

1095
00:48:41,470 --> 00:48:47,439
salaries and the others like two others

1096
00:48:44,020 --> 00:48:48,069
are each team members mailboxes which is

1097
00:48:47,440 --> 00:48:50,709
can be

1098
00:48:48,069 --> 00:48:52,509
maybe maybe okay because if they all

1099
00:48:50,709 --> 00:48:55,749
walk in a nightie and they need some

1100
00:48:52,509 --> 00:48:58,390
stuff so but why he needs to provide a

1101
00:48:55,749 --> 00:49:01,149
shadow user access to those type of

1102
00:48:58,390 --> 00:49:04,269
emails so we saw that that specific user

1103
00:49:01,150 --> 00:49:06,789
actually read those emails you read

1104
00:49:04,269 --> 00:49:09,279
around 1340 emails it was not

1105
00:49:06,789 --> 00:49:12,160
automatically read we can see on the

1106
00:49:09,279 --> 00:49:14,619
actual timestamp of the event but we can

1107
00:49:12,160 --> 00:49:18,308
see that he actually read more than 30

1108
00:49:14,619 --> 00:49:21,160
or 40 emails in 20 minutes in each and

1109
00:49:18,309 --> 00:49:23,199
every mailbox he actually access to

1110
00:49:21,160 --> 00:49:26,348
after he done it

1111
00:49:23,199 --> 00:49:28,150
he access specific location in the

1112
00:49:26,349 --> 00:49:31,059
network you can look on Active Directory

1113
00:49:28,150 --> 00:49:33,249
for those type of things and he look he

1114
00:49:31,059 --> 00:49:40,029
access to specific devices and shelf

1115
00:49:33,249 --> 00:49:43,709
folders and access for specific a Excel

1116
00:49:40,029 --> 00:49:47,199
Excel files with name convention that

1117
00:49:43,709 --> 00:49:51,368
resides of salary and things like that

1118
00:49:47,199 --> 00:49:54,969
so he sent some emails to himself to

1119
00:49:51,369 --> 00:49:56,859
non-related gmail account with several

1120
00:49:54,969 --> 00:49:58,630
files that he actually found is deep

1121
00:49:56,859 --> 00:50:01,239
them and they sent him to the Gmail and

1122
00:49:58,630 --> 00:50:04,569
that's it this is what's the incident so

1123
00:50:01,239 --> 00:50:08,079
what do we offer that we we gather all

1124
00:50:04,569 --> 00:50:10,660
the all the information and after that

1125
00:50:08,079 --> 00:50:12,099
the seaso give it gave me a call and he

1126
00:50:10,660 --> 00:50:14,019
told me that these guys walk in eight

1127
00:50:12,099 --> 00:50:16,809
years in the company it didn't get the

1128
00:50:14,019 --> 00:50:19,508
salary that raised for three years and

1129
00:50:16,809 --> 00:50:21,459
then he want to know how much he can ask

1130
00:50:19,509 --> 00:50:24,190
and how much other people actually got

1131
00:50:21,459 --> 00:50:26,499
so he created the user because he was

1132
00:50:24,190 --> 00:50:29,319
thinking his smart guy so he created a

1133
00:50:26,499 --> 00:50:30,999
user that user actually provide the

1134
00:50:29,319 --> 00:50:34,150
permission because you have the ability

1135
00:50:30,999 --> 00:50:36,160
to do that read the emails and send some

1136
00:50:34,150 --> 00:50:38,079
some stuff so we can walk at home and

1137
00:50:36,160 --> 00:50:41,109
look on the numbers it don't it didn't

1138
00:50:38,079 --> 00:50:43,119
want to do it on at the office so this

1139
00:50:41,109 --> 00:50:44,769
is how we caught them and I don't know

1140
00:50:43,119 --> 00:50:48,190
what what actually happened to the IT

1141
00:50:44,769 --> 00:50:49,709
guy but so so what what what what type

1142
00:50:48,190 --> 00:50:52,269
of things that we are looking at a

1143
00:50:49,709 --> 00:50:54,519
suspicion permission if someone is

1144
00:50:52,269 --> 00:50:56,738
providing permission to mailboxes in

1145
00:50:54,519 --> 00:50:59,348
exchange online or even in exchanges

1146
00:50:56,739 --> 00:51:00,999
just mailbox many permission to

1147
00:50:59,349 --> 00:51:01,860
different mailboxes which those

1148
00:51:00,999 --> 00:51:04,640
mailboxes are

1149
00:51:01,860 --> 00:51:06,810
the public mailboxes like first red flag

1150
00:51:04,640 --> 00:51:09,810
access to executive or sensitive

1151
00:51:06,810 --> 00:51:12,690
personal mail boxes so executive mailbox

1152
00:51:09,810 --> 00:51:14,880
and VIP mailboxes should be heavily

1153
00:51:12,690 --> 00:51:18,150
monitored and if someone wants to have

1154
00:51:14,880 --> 00:51:20,430
access to we need to make sure that he

1155
00:51:18,150 --> 00:51:23,430
actually needs to have access to it and

1156
00:51:20,430 --> 00:51:26,819
reading emails in not automatic in a way

1157
00:51:23,430 --> 00:51:29,100
so usually you're not reading like 30 40

1158
00:51:26,820 --> 00:51:31,530
emails in 20 minutes if you're the IT

1159
00:51:29,100 --> 00:51:35,700
guy if you utter guide marketing or

1160
00:51:31,530 --> 00:51:38,550
finance maybe a access to suspicious

1161
00:51:35,700 --> 00:51:39,839
devices it's it's all about knowing your

1162
00:51:38,550 --> 00:51:41,400
organization if you know the

1163
00:51:39,840 --> 00:51:44,160
organization know which device related

1164
00:51:41,400 --> 00:51:46,050
to which person it's easier you need to

1165
00:51:44,160 --> 00:51:49,500
have some kind of database some kind of

1166
00:51:46,050 --> 00:51:51,750
machine learning based behavior profile

1167
00:51:49,500 --> 00:51:53,850
that can identify it or you can during

1168
00:51:51,750 --> 00:51:55,860
the investigation go over the device as

1169
00:51:53,850 --> 00:51:58,259
an active directory and identify the

1170
00:51:55,860 --> 00:52:00,150
device name and check if those device

1171
00:51:58,260 --> 00:52:02,900
name those shared folders actually

1172
00:52:00,150 --> 00:52:05,910
relevant to the job of the IT guy and

1173
00:52:02,900 --> 00:52:07,830
upload data so if you monitor the proxy

1174
00:52:05,910 --> 00:52:10,799
and if you also monitor some file

1175
00:52:07,830 --> 00:52:12,180
activity on specific location you can

1176
00:52:10,800 --> 00:52:13,920
correlate that information in to

1177
00:52:12,180 --> 00:52:15,899
understand together with all that

1178
00:52:13,920 --> 00:52:18,120
activity if something being exfiltrated

1179
00:52:15,900 --> 00:52:21,420
or not so those are the red flags that

1180
00:52:18,120 --> 00:52:23,270
we actually saw and we're able to solve

1181
00:52:21,420 --> 00:52:30,090
the mystery of what's actually happened

1182
00:52:23,270 --> 00:52:33,960
and so we will jump we will jump to the

1183
00:52:30,090 --> 00:52:37,200
queues or to the Q&A to the Q&A section

1184
00:52:33,960 --> 00:52:39,300
so guys if you have questions about the

1185
00:52:37,200 --> 00:52:44,819
cloud about what we actually saw about

1186
00:52:39,300 --> 00:52:45,920
the malware we found any questions it

1187
00:52:44,820 --> 00:52:51,980
was fast

1188
00:52:45,920 --> 00:52:51,980
any questions cloud security monitoring

1189
00:52:58,250 --> 00:53:02,140
no question them thank you for talk

1190
00:53:00,930 --> 00:53:07,198
thank you very much guys

1191
00:53:02,140 --> 00:53:07,199
[Applause]

