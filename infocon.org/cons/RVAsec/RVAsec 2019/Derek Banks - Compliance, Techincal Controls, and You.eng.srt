1
00:00:24,420 --> 00:00:30,359
who's excited to hear a penetration

2
00:00:26,340 --> 00:00:31,980
tester talk about compliance yeah all

3
00:00:30,359 --> 00:00:35,760
right I bet you guys didn't even know

4
00:00:31,980 --> 00:00:38,550
how light compliance so this talk is

5
00:00:35,760 --> 00:00:40,019
about how if you're doing compliance you

6
00:00:38,550 --> 00:00:42,180
don't back them with technical controls

7
00:00:40,020 --> 00:00:44,550
you're really just checking boxes and

8
00:00:42,180 --> 00:00:46,140
then if you have you know technical

9
00:00:44,550 --> 00:00:48,629
controls in place and you don't have

10
00:00:46,140 --> 00:00:50,280
sound policy behind it you're just

11
00:00:48,629 --> 00:00:52,860
playing with cool toys and don't tell

12
00:00:50,280 --> 00:00:56,239
management I said that so you know how

13
00:00:52,860 --> 00:00:58,859
do these two things you work together

14
00:00:56,239 --> 00:00:59,940
and and how are they supposed to be

15
00:00:58,859 --> 00:01:02,789
married together to make your

16
00:00:59,940 --> 00:01:05,729
organization safer so a little bit about

17
00:01:02,789 --> 00:01:10,289
me I have a lot of certs no one really

18
00:01:05,729 --> 00:01:13,140
cares I I usually ask who here is from

19
00:01:10,289 --> 00:01:14,729
Virginia yeah but I normally get a lot

20
00:01:13,140 --> 00:01:16,350
of hands in Richmond right well if

21
00:01:14,729 --> 00:01:18,869
you're in the Tidewater area once a

22
00:01:16,350 --> 00:01:21,059
month we have a meet-up it's a city SEC

23
00:01:18,869 --> 00:01:22,200
style meetup where we go to a bar and we

24
00:01:21,060 --> 00:01:25,259
have some beers and we talked about

25
00:01:22,200 --> 00:01:27,240
InfoSec or or whatever else and if

26
00:01:25,259 --> 00:01:28,409
you're ever in the area we'd love to

27
00:01:27,240 --> 00:01:31,589
have you and you can find us on

28
00:01:28,409 --> 00:01:35,250
meetup.com also anybody still use office

29
00:01:31,590 --> 00:01:38,159
web app I'm you know you don't have to

30
00:01:35,250 --> 00:01:39,899
admit it I'm an avid OWA enthusiast when

31
00:01:38,159 --> 00:01:41,220
I find it thank you for running it

32
00:01:39,899 --> 00:01:43,170
especially if I'm your penetration

33
00:01:41,220 --> 00:01:45,149
tester so I imagine that there are two

34
00:01:43,170 --> 00:01:47,579
different types of people here in the

35
00:01:45,149 --> 00:01:49,189
audience how many people do some form of

36
00:01:47,579 --> 00:01:51,449
compliance

37
00:01:49,189 --> 00:01:52,740
how about technical folks do we have any

38
00:01:51,450 --> 00:01:53,850
technical folks in the other all right

39
00:01:52,740 --> 00:01:56,640
yeah me too

40
00:01:53,850 --> 00:01:59,250
I do technical stuff all day so but I do

41
00:01:56,640 --> 00:02:02,729
have to recommend when we do penetration

42
00:01:59,250 --> 00:02:04,290
tests I have to recommend policy type

43
00:02:02,729 --> 00:02:06,119
stuff for executives because it's

44
00:02:04,290 --> 00:02:08,390
important so really just you know I

45
00:02:06,119 --> 00:02:11,310
think there are two different types of

46
00:02:08,389 --> 00:02:13,200
workers and info ii in a general sense

47
00:02:11,310 --> 00:02:14,940
and there's some overlap you have folks

48
00:02:13,200 --> 00:02:17,730
that do compliance and technical

49
00:02:14,940 --> 00:02:19,230
controls and kind of business aspect and

50
00:02:17,730 --> 00:02:20,850
then you have technical analysts those

51
00:02:19,230 --> 00:02:22,738
are your sock people like Incident

52
00:02:20,850 --> 00:02:25,380
Response maybe like an internal red team

53
00:02:22,739 --> 00:02:27,120
and and a lot of times those two don't

54
00:02:25,380 --> 00:02:28,500
get along they should get along we

55
00:02:27,120 --> 00:02:29,760
should all be on the same team because

56
00:02:28,500 --> 00:02:33,780
we all have the same goal and we'll talk

57
00:02:29,760 --> 00:02:35,540
about that here a little bit so this is

58
00:02:33,780 --> 00:02:39,709
a question that I wanted to ask everyone

59
00:02:35,540 --> 00:02:39,709
what is information security

60
00:02:41,420 --> 00:02:48,869
no one's gonna answer securing your

61
00:02:46,140 --> 00:02:52,019
assets that's good right so to me

62
00:02:48,870 --> 00:02:56,730
information security is about managing

63
00:02:52,020 --> 00:02:58,410
and mitigating risk I think that that's

64
00:02:56,730 --> 00:03:00,209
kind of overlooked like you know

65
00:02:58,410 --> 00:03:03,810
information security isn't stopping the

66
00:03:00,210 --> 00:03:06,090
bad guy information security is really

67
00:03:03,810 --> 00:03:08,820
there to support the operational goals

68
00:03:06,090 --> 00:03:10,530
of the organization like if you're not

69
00:03:08,820 --> 00:03:12,000
supporting IT and you're not is

70
00:03:10,530 --> 00:03:13,530
supporting those goals if you're the

71
00:03:12,000 --> 00:03:15,480
person who comes in and says no to

72
00:03:13,530 --> 00:03:20,720
everything you're not doing it right

73
00:03:15,480 --> 00:03:23,579
there has to be a your goal should be to

74
00:03:20,720 --> 00:03:25,709
tell the organization about risk and let

75
00:03:23,580 --> 00:03:27,480
management decide about that risk and

76
00:03:25,709 --> 00:03:30,120
then then maybe put mitigating controls

77
00:03:27,480 --> 00:03:31,079
in place has anyone ever heard of the

78
00:03:30,120 --> 00:03:33,959
cie triad

79
00:03:31,080 --> 00:03:36,060
I know that you have your CISSP if

80
00:03:33,959 --> 00:03:37,650
you've raised your hand because that's

81
00:03:36,060 --> 00:03:40,470
like every other question in the CISSP

82
00:03:37,650 --> 00:03:42,510
right so and so confident

83
00:03:40,470 --> 00:03:45,090
confidentiality integrity and

84
00:03:42,510 --> 00:03:46,620
availability those things are important

85
00:03:45,090 --> 00:03:49,350
depending on what kind of business you

86
00:03:46,620 --> 00:03:52,019
run right if you're a bank maybe

87
00:03:49,350 --> 00:03:53,489
availability is the most important thing

88
00:03:52,019 --> 00:03:54,810
for your web app so you have to take

89
00:03:53,489 --> 00:03:58,670
that into consideration when you talk

90
00:03:54,810 --> 00:04:00,930
about the security of that web app so

91
00:03:58,670 --> 00:04:02,820
we're gonna do in a little bit of level

92
00:04:00,930 --> 00:04:07,010
setting here what is the difference

93
00:04:02,820 --> 00:04:07,010
between a policy a plan and a procedure

94
00:04:07,340 --> 00:04:12,959
so all right what is a policy if you

95
00:04:10,680 --> 00:04:15,530
have a policy in your organization what

96
00:04:12,959 --> 00:04:17,728
is that what is that thing

97
00:04:15,530 --> 00:04:19,190
I'll come on you guys not going to

98
00:04:17,728 --> 00:04:23,310
answer me I'll just start talking then

99
00:04:19,190 --> 00:04:27,690
so to me a policy is sort of make it

100
00:04:23,310 --> 00:04:29,700
analogous to let's say baking cookies

101
00:04:27,690 --> 00:04:31,320
right if we have a policy that says

102
00:04:29,700 --> 00:04:33,719
we're gonna bake cookies that's really

103
00:04:31,320 --> 00:04:34,650
all the policy should say and I've been

104
00:04:33,720 --> 00:04:36,330
in organizations where they have a

105
00:04:34,650 --> 00:04:39,270
policy like an incident response policy

106
00:04:36,330 --> 00:04:41,849
and it's 237 pages long

107
00:04:39,270 --> 00:04:43,919
does anybody read that if I gave you a

108
00:04:41,850 --> 00:04:45,450
237 page document or you're gonna read

109
00:04:43,919 --> 00:04:46,950
the whole thing No

110
00:04:45,450 --> 00:04:48,450
so your policy on how we're gonna bake

111
00:04:46,950 --> 00:04:49,800
cookies really should just be a page or

112
00:04:48,450 --> 00:04:51,420
two saying that's what we're gonna do

113
00:04:49,800 --> 00:04:54,030
we're gonna bake some cookies

114
00:04:51,420 --> 00:04:57,060
and then we have a plan so the plan

115
00:04:54,030 --> 00:04:59,130
where the policy is the strategy the

116
00:04:57,060 --> 00:05:01,560
plan should be the technical or I'm

117
00:04:59,130 --> 00:05:03,240
sorry the tactical where we're going to

118
00:05:01,560 --> 00:05:05,430
go about baking cookies in our kitchen

119
00:05:03,240 --> 00:05:07,230
at 3 o'clock in the afternoon all right

120
00:05:05,430 --> 00:05:10,490
so that's sort of like a procedure so

121
00:05:07,230 --> 00:05:13,470
the procedure is sort of who's involved

122
00:05:10,490 --> 00:05:14,910
what the the goal will be what the

123
00:05:13,470 --> 00:05:17,670
overall goal will be a little bit more

124
00:05:14,910 --> 00:05:19,800
in detail it really shouldn't talk about

125
00:05:17,670 --> 00:05:22,010
products it shouldn't talk about things

126
00:05:19,800 --> 00:05:24,570
and specific it should be broad

127
00:05:22,010 --> 00:05:27,450
procedures are where you should get into

128
00:05:24,570 --> 00:05:30,659
the weeds we're going to turn the oven

129
00:05:27,450 --> 00:05:31,680
on to 400 degrees and now you know I

130
00:05:30,660 --> 00:05:34,080
don't really bake cookies because I'll

131
00:05:31,680 --> 00:05:35,550
probably burn them and then we're gonna

132
00:05:34,080 --> 00:05:37,409
do all these other steps to actually get

133
00:05:35,550 --> 00:05:40,110
cookies so when we talk about policies

134
00:05:37,410 --> 00:05:41,810
plans and procedures that's kind of what

135
00:05:40,110 --> 00:05:44,910
I'm talking about

136
00:05:41,810 --> 00:05:50,310
so does anybody use a risk management

137
00:05:44,910 --> 00:05:52,170
framework say any kind of like right so

138
00:05:50,310 --> 00:05:56,970
these things are important how many

139
00:05:52,170 --> 00:05:59,580
different frameworks are there 640 sag I

140
00:05:56,970 --> 00:06:01,500
don't know too many too many is the

141
00:05:59,580 --> 00:06:04,800
answer and so one of the things later in

142
00:06:01,500 --> 00:06:07,320
the talk I'm gonna go over is while

143
00:06:04,800 --> 00:06:09,210
these things are important there are

144
00:06:07,320 --> 00:06:10,560
ways to sort of like distill them down

145
00:06:09,210 --> 00:06:12,900
and get to sort of the meat and potatoes

146
00:06:10,560 --> 00:06:14,490
of them especially from a penetration

147
00:06:12,900 --> 00:06:16,590
testing perspective right if you're

148
00:06:14,490 --> 00:06:18,420
gonna stop an attacker I'm gonna give

149
00:06:16,590 --> 00:06:21,840
you some of the more important things

150
00:06:18,420 --> 00:06:24,450
that I think yeah that you should do but

151
00:06:21,840 --> 00:06:26,159
anyway it depending on where you know

152
00:06:24,450 --> 00:06:27,900
what line of work you're in what

153
00:06:26,160 --> 00:06:29,160
business there are different frameworks

154
00:06:27,900 --> 00:06:32,969
and there are different things that are

155
00:06:29,160 --> 00:06:34,500
different I guess you know mitigation

156
00:06:32,970 --> 00:06:37,200
strategies that have been pushed by

157
00:06:34,500 --> 00:06:38,850
published out so like PCI if you handle

158
00:06:37,200 --> 00:06:42,450
credit card data you have to use PCI

159
00:06:38,850 --> 00:06:46,710
type stuff the one I'm most familiar

160
00:06:42,450 --> 00:06:48,930
with is risk management framework you

161
00:06:46,710 --> 00:06:50,969
shouldn't go through and memorize all

162
00:06:48,930 --> 00:06:52,740
those different types of frameworks what

163
00:06:50,970 --> 00:06:54,540
the different controls like if you have

164
00:06:52,740 --> 00:06:56,460
to comply with one thing from another

165
00:06:54,540 --> 00:06:58,320
thing or you have to do any kind of like

166
00:06:56,460 --> 00:06:59,870
you know crosswalk in between the two

167
00:06:58,320 --> 00:07:02,520
there are actually documents out there

168
00:06:59,870 --> 00:07:03,870
that will help you figure out well if

169
00:07:02,520 --> 00:07:07,500
this isn't a sting

170
00:07:03,870 --> 00:07:10,139
and I have to do RMF what control what

171
00:07:07,500 --> 00:07:11,910
control applies there so has anybody

172
00:07:10,139 --> 00:07:13,830
ever used a crosswalk document I have a

173
00:07:11,910 --> 00:07:16,320
link to a really good one up there from

174
00:07:13,830 --> 00:07:18,750
from audit scripts so it kind of tells

175
00:07:16,320 --> 00:07:21,419
you that you know if if I have this say

176
00:07:18,750 --> 00:07:24,300
CSE critical control three what does

177
00:07:21,419 --> 00:07:26,389
that translate into for like HIPAA

178
00:07:24,300 --> 00:07:29,520
there's something like that and there

179
00:07:26,389 --> 00:07:31,949
and so one of the things I really want

180
00:07:29,520 --> 00:07:33,120
to impress on folks like when we go into

181
00:07:31,949 --> 00:07:34,710
an organization especially an

182
00:07:33,120 --> 00:07:37,620
organization of any size and they have

183
00:07:34,710 --> 00:07:39,780
different people on like you know

184
00:07:37,620 --> 00:07:42,840
there's a sock team and a compliance

185
00:07:39,780 --> 00:07:44,820
team and you know IT and general

186
00:07:42,840 --> 00:07:48,060
operations there always seems to be some

187
00:07:44,820 --> 00:07:51,330
kind of friction and it really bugs me

188
00:07:48,060 --> 00:07:53,370
because we're all on the same team we

189
00:07:51,330 --> 00:07:55,830
have the same goal and it yeah I used to

190
00:07:53,370 --> 00:07:58,470
work at a place where I I swear it was

191
00:07:55,830 --> 00:08:00,349
like Game of Thrones politics was like

192
00:07:58,470 --> 00:08:04,199
the most important thing to everyone and

193
00:08:00,350 --> 00:08:05,340
it really bugged me I think that has

194
00:08:04,199 --> 00:08:08,639
anyone here ever read the Phoenix

195
00:08:05,340 --> 00:08:10,320
project yeah they can cool one of the

196
00:08:08,639 --> 00:08:11,460
security conclusion in the Phoenix

197
00:08:10,320 --> 00:08:14,280
project if you haven't read it it's an

198
00:08:11,460 --> 00:08:15,840
amazing book the security guy who starts

199
00:08:14,280 --> 00:08:17,309
out the book is the guy who always shows

200
00:08:15,840 --> 00:08:19,469
up to the meeting and says no so they

201
00:08:17,310 --> 00:08:21,690
just stopped inviting him to meetings so

202
00:08:19,470 --> 00:08:23,430
that way doesn't matter right hey

203
00:08:21,690 --> 00:08:27,360
finally comes around at the end and and

204
00:08:23,430 --> 00:08:29,430
and realizes that his goal is the

205
00:08:27,360 --> 00:08:31,110
organization's goal it might mean that

206
00:08:29,430 --> 00:08:33,870
things aren't as secure as he would like

207
00:08:31,110 --> 00:08:35,969
it but that's not his job his job is to

208
00:08:33,870 --> 00:08:37,799
evaluate the risk and make sure that

209
00:08:35,969 --> 00:08:41,099
operations is going as securely as

210
00:08:37,799 --> 00:08:42,929
possible so if this is going on your

211
00:08:41,099 --> 00:08:45,360
organization do everything in your power

212
00:08:42,929 --> 00:08:46,829
I know it's difficult to work to defeat

213
00:08:45,360 --> 00:08:48,180
it because the most successful

214
00:08:46,830 --> 00:08:50,790
organization then one of the most

215
00:08:48,180 --> 00:08:53,430
successful organizations I ever saw we

216
00:08:50,790 --> 00:08:56,819
had about 50 people an IT they didn't

217
00:08:53,430 --> 00:08:59,000
even have a security team what they did

218
00:08:56,820 --> 00:09:02,310
was they made everybody that was in IT

219
00:08:59,000 --> 00:09:05,990
work a weak stent out of every quarter

220
00:09:02,310 --> 00:09:09,029
in in a security role in the saw

221
00:09:05,990 --> 00:09:09,959
everybody got to be in security and I

222
00:09:09,029 --> 00:09:11,640
thought that was a really creative

223
00:09:09,959 --> 00:09:14,219
approach now that might not work in your

224
00:09:11,640 --> 00:09:16,050
organization but if you have you know if

225
00:09:14,220 --> 00:09:16,499
you're at odds with the server team or

226
00:09:16,050 --> 00:09:19,319
the net

227
00:09:16,499 --> 00:09:20,759
team doesn't like security that's one of

228
00:09:19,319 --> 00:09:26,429
the first stumbling blocks that you'll

229
00:09:20,759 --> 00:09:28,169
have to get to overcome so if you've

230
00:09:26,429 --> 00:09:29,549
been to some of my previous talks you've

231
00:09:28,169 --> 00:09:33,389
probably seen some of these things

232
00:09:29,549 --> 00:09:35,429
before because we still see these common

233
00:09:33,389 --> 00:09:37,679
issues all the time so I'm gonna talk

234
00:09:35,429 --> 00:09:40,319
about some of the common things that we

235
00:09:37,679 --> 00:09:42,718
see ways that we get into organizations

236
00:09:40,319 --> 00:09:46,769
what ways we get to sensitive data and

237
00:09:42,719 --> 00:09:51,029
elevated rights and what controls apply

238
00:09:46,769 --> 00:09:53,819
to them and you know how you can do a

239
00:09:51,029 --> 00:09:56,939
technical at what policy controls apply

240
00:09:53,819 --> 00:10:02,669
to them and what technical controls you

241
00:09:56,939 --> 00:10:04,949
can put in place to to fix it so how

242
00:10:02,669 --> 00:10:07,259
many people in here have an eight

243
00:10:04,949 --> 00:10:08,998
character password policy you don't have

244
00:10:07,259 --> 00:10:11,219
to raise your hand because I know that 9

245
00:10:08,999 --> 00:10:13,349
out of 10 of you do and the way that I

246
00:10:11,219 --> 00:10:15,739
know that is because everyone that's

247
00:10:13,349 --> 00:10:19,259
sitting in here in security you know

248
00:10:15,739 --> 00:10:24,539
that an eight character pop password

249
00:10:19,259 --> 00:10:27,599
policy is is a terrible thing because as

250
00:10:24,539 --> 00:10:28,679
an attacker I can guess a password or I

251
00:10:27,599 --> 00:10:31,199
can use a technique called password

252
00:10:28,679 --> 00:10:32,970
sprang to guess and mass passwords if I

253
00:10:31,199 --> 00:10:34,709
get a hash I might be likely to crack it

254
00:10:32,970 --> 00:10:36,629
does anybody know where this eight

255
00:10:34,709 --> 00:10:40,169
character password policy came from like

256
00:10:36,629 --> 00:10:45,239
where it originated on the slide behind

257
00:10:40,169 --> 00:10:46,309
me so yeah back in is anybody's ever

258
00:10:45,239 --> 00:10:48,809
seen wargames

259
00:10:46,309 --> 00:10:50,728
yeah yeah so back in that time frame

260
00:10:48,809 --> 00:10:51,779
there was a series of books that the

261
00:10:50,729 --> 00:10:53,429
government had published called the

262
00:10:51,779 --> 00:10:55,949
rainbow series was talking about

263
00:10:53,429 --> 00:10:58,709
securing computing assets and in the

264
00:10:55,949 --> 00:11:01,919
green book I think they talked about a a

265
00:10:58,709 --> 00:11:03,358
seven character password policy that was

266
00:11:01,919 --> 00:11:07,079
sort of the origination of a terrible

267
00:11:03,359 --> 00:11:09,929
password policy and it was based on how

268
00:11:07,079 --> 00:11:13,529
fast you could crack a password guess a

269
00:11:09,929 --> 00:11:15,449
password over like a 300 baud modem I'd

270
00:11:13,529 --> 00:11:17,369
ask you if you have a 300 Bob modem in

271
00:11:15,449 --> 00:11:20,758
your organization but I don't raise your

272
00:11:17,369 --> 00:11:22,619
hand if you do I know you don't but but

273
00:11:20,759 --> 00:11:25,379
anyway then fast-forward to like the

274
00:11:22,619 --> 00:11:26,849
first you know NIST guidance and they

275
00:11:25,379 --> 00:11:28,439
basically just pull eight characters out

276
00:11:26,849 --> 00:11:29,370
of the air in fact the guy who was

277
00:11:28,439 --> 00:11:30,810
responsible for

278
00:11:29,370 --> 00:11:34,200
recently apologized for do you know what

279
00:11:30,810 --> 00:11:41,609
NIST says now what the current

280
00:11:34,200 --> 00:11:44,690
guidelines say long a long password

281
00:11:41,610 --> 00:11:48,860
right so the most important the most

282
00:11:44,690 --> 00:11:51,690
important thing in a password is linked

283
00:11:48,860 --> 00:11:55,310
so you talking about guessing a password

284
00:11:51,690 --> 00:11:58,290
or your talk about cracking a password

285
00:11:55,310 --> 00:11:59,939
the longer the password the more entropy

286
00:11:58,290 --> 00:12:02,250
that's involved when you talk about like

287
00:11:59,940 --> 00:12:03,480
having to match has like how modern

288
00:12:02,250 --> 00:12:06,029
password cracking works

289
00:12:03,480 --> 00:12:09,660
does anybody have a 14 or character

290
00:12:06,029 --> 00:12:11,700
password policy or higher suite about to

291
00:12:09,660 --> 00:12:13,980
ask that question a year ago

292
00:12:11,700 --> 00:12:16,980
I I don't think I would have gotten that

293
00:12:13,980 --> 00:12:20,040
so that I i'm glad that you do because i

294
00:12:16,980 --> 00:12:22,620
swear 9 out of 10 customer I know 10 pen

295
00:12:20,040 --> 00:12:26,120
tests that I'm on the first thing I look

296
00:12:22,620 --> 00:12:29,310
at it first command I run is a you know

297
00:12:26,120 --> 00:12:30,720
net account / domain actually I don't

298
00:12:29,310 --> 00:12:32,279
run that anymore because some products

299
00:12:30,720 --> 00:12:38,070
actually will flag on that you want to

300
00:12:32,279 --> 00:12:41,339
know what I run now net 1 accounts slash

301
00:12:38,070 --> 00:12:43,140
domain so net 1 is actually like net but

302
00:12:41,339 --> 00:12:45,690
it won't flag a signature it's like oh

303
00:12:43,140 --> 00:12:47,310
comes from like the days of y2k and

304
00:12:45,690 --> 00:12:49,410
Microsoft had in a different I don't

305
00:12:47,310 --> 00:12:52,109
know it's something weird but anyway net

306
00:12:49,410 --> 00:12:55,020
1 is just a binary in in Windows that

307
00:12:52,110 --> 00:12:56,970
does the same thing so we actually

308
00:12:55,020 --> 00:12:57,959
recommend a 15 character password policy

309
00:12:56,970 --> 00:12:59,850
or greater

310
00:12:57,959 --> 00:13:02,520
that's because of legacy land man stuff

311
00:12:59,850 --> 00:13:05,730
anyway if it's 8 characters now and you

312
00:13:02,520 --> 00:13:07,410
move to 1012 that's a step in the right

313
00:13:05,730 --> 00:13:10,589
direction and usually what I tell

314
00:13:07,410 --> 00:13:12,569
clients because inevitably I'll say hey

315
00:13:10,589 --> 00:13:15,660
you need to have a longer password

316
00:13:12,570 --> 00:13:17,670
policy and they'll say oh whoa whoa that

317
00:13:15,660 --> 00:13:21,240
will increase help desk calls like

318
00:13:17,670 --> 00:13:22,770
tenfold and has anybody ever experienced

319
00:13:21,240 --> 00:13:24,180
that if you when you went from 8

320
00:13:22,770 --> 00:13:27,839
characters to longer it is that what

321
00:13:24,180 --> 00:13:30,599
happened no that's not what happened but

322
00:13:27,839 --> 00:13:33,060
anyway when when I get that answer I

323
00:13:30,600 --> 00:13:37,650
usually say after that well you can

324
00:13:33,060 --> 00:13:39,989
compromise so say that will make it long

325
00:13:37,650 --> 00:13:42,490
will make it 12 characters 15 characters

326
00:13:39,990 --> 00:13:44,830
whatever and will get rid of complexity

327
00:13:42,490 --> 00:13:47,589
and you'll only have to change it every

328
00:13:44,830 --> 00:13:49,690
six months because to me a 12 character

329
00:13:47,589 --> 00:13:51,640
password has changed twice a year is way

330
00:13:49,690 --> 00:13:55,839
more secure than an eight character

331
00:13:51,640 --> 00:13:58,390
password because III won't be able to

332
00:13:55,839 --> 00:14:00,010
guess it easily as an attacker like the

333
00:13:58,390 --> 00:14:01,300
Fae my favorite password to guess

334
00:14:00,010 --> 00:14:05,850
anybody want to guess what my favorite

335
00:14:01,300 --> 00:14:09,640
password is it's still spring right

336
00:14:05,850 --> 00:14:12,130
spring 2019 so I was just on an

337
00:14:09,640 --> 00:14:14,560
engagement where I it was an all insight

338
00:14:12,130 --> 00:14:16,089
I got there and I went got a PowerShell

339
00:14:14,560 --> 00:14:17,500
script and I ran it it's called domain

340
00:14:16,089 --> 00:14:19,600
password spray is written by one of my

341
00:14:17,500 --> 00:14:22,480
co-workers and an organization of you

342
00:14:19,600 --> 00:14:25,450
know say 500 people there were 12 people

343
00:14:22,480 --> 00:14:26,950
who had that password I mean yeah

344
00:14:25,450 --> 00:14:28,480
because you know every 90 days you have

345
00:14:26,950 --> 00:14:30,130
to change it the user sitting there they

346
00:14:28,480 --> 00:14:32,920
look how the windows like huh I'm gonna

347
00:14:30,130 --> 00:14:35,080
make a new password it's sure is nice

348
00:14:32,920 --> 00:14:38,469
outside I wish I was outside yeah it's

349
00:14:35,080 --> 00:14:42,130
spring hey spring in the Year terrible

350
00:14:38,470 --> 00:14:44,709
password so but so how do you go about

351
00:14:42,130 --> 00:14:46,810
changing that well so Microsoft has I'm

352
00:14:44,709 --> 00:14:48,399
sure most of you have heard GPOs right

353
00:14:46,810 --> 00:14:53,739
so the technical control that's in place

354
00:14:48,399 --> 00:14:56,230
for this is using a GPO and it's not a

355
00:14:53,740 --> 00:14:58,420
really complex change to make I mean now

356
00:14:56,230 --> 00:14:59,950
in Server 2012 I think it's Server 2012

357
00:14:58,420 --> 00:15:01,899
they made it to where you can actually

358
00:14:59,950 --> 00:15:03,700
use the GUI to change it prior to that

359
00:15:01,899 --> 00:15:06,250
you had to do some like weird Microsoft

360
00:15:03,700 --> 00:15:08,140
hackery but now it's not like that

361
00:15:06,250 --> 00:15:09,430
but if your domain is 2012 or higher you

362
00:15:08,140 --> 00:15:14,800
should you just be able to change it in

363
00:15:09,430 --> 00:15:17,399
the GUI and and for a GPO so these are

364
00:15:14,800 --> 00:15:20,490
some of my favorite password attacks and

365
00:15:17,399 --> 00:15:24,700
I'd like to tell this story

366
00:15:20,490 --> 00:15:27,310
so did how many people have a common

367
00:15:24,700 --> 00:15:29,890
like share like say in your organization

368
00:15:27,310 --> 00:15:31,959
there's this like the the o drive that

369
00:15:29,890 --> 00:15:33,579
everybody dumps data on it's a

370
00:15:31,959 --> 00:15:35,859
relatively common thing and then there's

371
00:15:33,579 --> 00:15:38,050
data in there for me like 1987 no one

372
00:15:35,860 --> 00:15:40,990
knows what's out there anything so what

373
00:15:38,050 --> 00:15:45,189
I like to do is create a malicious

374
00:15:40,990 --> 00:15:47,860
shortcut and this shortcut has an icon

375
00:15:45,190 --> 00:15:50,440
resource that points to an SMB listener

376
00:15:47,860 --> 00:15:53,470
that I control now either that's in side

377
00:15:50,440 --> 00:15:55,900
of the network on a machine that I've

378
00:15:53,470 --> 00:15:57,130
premised or it might even be outside of

379
00:15:55,900 --> 00:15:58,810
the network and we'll talk about you

380
00:15:57,130 --> 00:16:01,620
know egress filtering here a little bit

381
00:15:58,810 --> 00:16:04,420
but if you have tcp 4 4 5 which is SMB

382
00:16:01,620 --> 00:16:08,530
open outbound and you have no policy

383
00:16:04,420 --> 00:16:10,510
controlling egress filtering then I can

384
00:16:08,530 --> 00:16:12,040
put a malicious shortcut on that file

385
00:16:10,510 --> 00:16:14,290
share that everybody is browsing and

386
00:16:12,040 --> 00:16:16,180
I'll be creative and I'll name it

387
00:16:14,290 --> 00:16:19,209
underscore something so it gets bubbled

388
00:16:16,180 --> 00:16:22,930
up to the top and when Explorer views it

389
00:16:19,210 --> 00:16:25,420
the client that views that icon or views

390
00:16:22,930 --> 00:16:27,969
that shortcut sends me a hash that I can

391
00:16:25,420 --> 00:16:29,589
then crack there are other types of

392
00:16:27,970 --> 00:16:31,150
attacks all these attacks that are

393
00:16:29,590 --> 00:16:33,880
listed password spraying credential

394
00:16:31,150 --> 00:16:36,569
stuffing you know lor and Kerberos ting

395
00:16:33,880 --> 00:16:41,320
either get me a password or a hash um

396
00:16:36,570 --> 00:16:43,810
all based on a weak password and I'm

397
00:16:41,320 --> 00:16:45,790
harping on it so much because this is

398
00:16:43,810 --> 00:16:48,459
nine times out of ten this is what an

399
00:16:45,790 --> 00:16:51,790
attacker is gonna do in our pen tests it

400
00:16:48,460 --> 00:16:55,330
is one of the most successful thing so

401
00:16:51,790 --> 00:16:57,939
another thing that we run into or

402
00:16:55,330 --> 00:16:59,140
external portals say like mail or

403
00:16:57,940 --> 00:17:02,470
something like that that have no

404
00:16:59,140 --> 00:17:05,129
two-factor so I've seen this now as a

405
00:17:02,470 --> 00:17:08,260
lot of organizations are moving to

406
00:17:05,130 --> 00:17:09,070
office 365 because Microsoft's pushing

407
00:17:08,260 --> 00:17:10,720
you in that direction

408
00:17:09,069 --> 00:17:12,369
and since it's in the cloud and it's

409
00:17:10,720 --> 00:17:15,130
Microsoft I guess people just think it's

410
00:17:12,369 --> 00:17:19,000
secure and they just have a single

411
00:17:15,130 --> 00:17:20,170
factor office 365 email so if you're in

412
00:17:19,000 --> 00:17:23,200
that boat I won't ask you to raise your

413
00:17:20,170 --> 00:17:25,600
hand but I would strongly encourage that

414
00:17:23,200 --> 00:17:27,880
you put the multi-factor authentication

415
00:17:25,599 --> 00:17:30,129
on there and the reason why is because

416
00:17:27,880 --> 00:17:32,170
the some of those attacks I just listed

417
00:17:30,130 --> 00:17:34,660
I don't even have to get a foothold in

418
00:17:32,170 --> 00:17:36,070
your network I can just start I can find

419
00:17:34,660 --> 00:17:39,010
your portal pretty easily

420
00:17:36,070 --> 00:17:41,560
Microsoft kindly redirects if I try and

421
00:17:39,010 --> 00:17:43,990
like put your email address in and I can

422
00:17:41,560 --> 00:17:46,090
use tools I could use a burp suite or I

423
00:17:43,990 --> 00:17:48,100
can use some power show and I can start

424
00:17:46,090 --> 00:17:51,580
password spraying your external portal

425
00:17:48,100 --> 00:17:53,830
and potentially get valid credentials

426
00:17:51,580 --> 00:17:56,649
we've done this on a number of

427
00:17:53,830 --> 00:17:58,960
engagements and if I'm able to get into

428
00:17:56,650 --> 00:18:00,580
your email and office 365

429
00:17:58,960 --> 00:18:05,200
do I even really need to send a

430
00:18:00,580 --> 00:18:07,090
malicious payload inside probably not if

431
00:18:05,200 --> 00:18:09,549
I start reading your email I mean

432
00:18:07,090 --> 00:18:12,178
how many people send sensitive data in

433
00:18:09,549 --> 00:18:18,120
their company email because it's secure

434
00:18:12,179 --> 00:18:20,350
yeah it's not so secure so to me their

435
00:18:18,120 --> 00:18:23,408
multi-factor especially with you know

436
00:18:20,350 --> 00:18:25,719
with Microsoft's product offerings is

437
00:18:23,409 --> 00:18:28,269
not hard to implement and again it's

438
00:18:25,720 --> 00:18:30,940
generally concerned about the user base

439
00:18:28,269 --> 00:18:34,389
or it's you know the business won't let

440
00:18:30,940 --> 00:18:36,759
us do it but really anything that is

441
00:18:34,389 --> 00:18:40,719
facing outside there should be a policy

442
00:18:36,759 --> 00:18:42,730
that states that any external portal

443
00:18:40,720 --> 00:18:44,679
even if it's third-party portal if it

444
00:18:42,730 --> 00:18:47,710
has business data in it it should be

445
00:18:44,679 --> 00:18:50,919
two-factor hands down no questions about

446
00:18:47,710 --> 00:18:53,519
it so I list some more of the the

447
00:18:50,919 --> 00:18:55,600
controls that kind of apply to this but

448
00:18:53,519 --> 00:18:57,789
anyway this is an often-overlooked

449
00:18:55,600 --> 00:19:02,529
policy but we run into it all the time

450
00:18:57,789 --> 00:19:04,149
and like I said enforcing it is not very

451
00:19:02,529 --> 00:19:06,309
difficult a lot of times it's just

452
00:19:04,149 --> 00:19:08,739
clicking a box if it's like Microsoft or

453
00:19:06,309 --> 00:19:11,289
if you're doing your own email your own

454
00:19:08,740 --> 00:19:12,509
portal things like duo an app on your

455
00:19:11,289 --> 00:19:16,929
phone

456
00:19:12,509 --> 00:19:21,389
those are critical to keep people out of

457
00:19:16,929 --> 00:19:25,409
email or other types of portals so

458
00:19:21,389 --> 00:19:28,899
another thing that I run into a lot are

459
00:19:25,409 --> 00:19:31,389
over privileged users and what I mean by

460
00:19:28,899 --> 00:19:34,830
that is that everybody is an

461
00:19:31,389 --> 00:19:37,449
administrator on their workstation so

462
00:19:34,830 --> 00:19:38,199
usually when I find that I'd giggled

463
00:19:37,450 --> 00:19:41,559
like a schoolgirl

464
00:19:38,200 --> 00:19:42,309
because I know I'm gonna find sensitive

465
00:19:41,559 --> 00:19:45,759
data somewhere

466
00:19:42,309 --> 00:19:48,908
I was just on an engagement where they

467
00:19:45,759 --> 00:19:51,100
had over privileged users everybody was

468
00:19:48,909 --> 00:19:53,110
an administrator because the sales team

469
00:19:51,100 --> 00:19:55,059
they were a big like like half the

470
00:19:53,110 --> 00:19:57,309
company with sales and the sales team

471
00:19:55,059 --> 00:19:59,529
needed local admin so the business gave

472
00:19:57,309 --> 00:20:02,590
it to them does anybody have any idea

473
00:19:59,529 --> 00:20:06,009
why the sales team would need admin

474
00:20:02,590 --> 00:20:12,240
access blew my mind had developers okay

475
00:20:06,009 --> 00:20:14,559
engineers maybe but the sales team so

476
00:20:12,240 --> 00:20:16,149
another thing that I see is I guess

477
00:20:14,559 --> 00:20:17,678
domain users gets put in as the

478
00:20:16,149 --> 00:20:18,939
administrators group for all the local

479
00:20:17,679 --> 00:20:20,650
machines which is because basically

480
00:20:18,940 --> 00:20:23,080
everybody has

481
00:20:20,650 --> 00:20:24,400
administrative rights everywhere which

482
00:20:23,080 --> 00:20:27,460
is a terrible idea

483
00:20:24,400 --> 00:20:28,780
and the reason why is because especially

484
00:20:27,460 --> 00:20:30,280
if you combine that with a widespread

485
00:20:28,780 --> 00:20:32,110
local admin where you have an

486
00:20:30,280 --> 00:20:33,970
administrator account like the local

487
00:20:32,110 --> 00:20:37,209
administrators the password is shared

488
00:20:33,970 --> 00:20:40,420
from all of all you know across all the

489
00:20:37,210 --> 00:20:41,830
machines I'm most likely going to be

490
00:20:40,420 --> 00:20:43,540
able to do whatever I want your

491
00:20:41,830 --> 00:20:44,889
environment so I was just in an

492
00:20:43,540 --> 00:20:46,600
engagement where they have both of these

493
00:20:44,890 --> 00:20:48,580
scenarios in place they gave me a laptop

494
00:20:46,600 --> 00:20:51,010
I had a couple of days to do the test

495
00:20:48,580 --> 00:20:55,570
and so I started poking around and I saw

496
00:20:51,010 --> 00:20:59,350
that I was already an admin so I was

497
00:20:55,570 --> 00:21:01,750
able to dump out the L SAS process

498
00:20:59,350 --> 00:21:06,310
because Microsoft makes that easy take

499
00:21:01,750 --> 00:21:07,780
that file offline and I found that you

500
00:21:06,310 --> 00:21:10,389
know there was an administrator account

501
00:21:07,780 --> 00:21:13,180
that had I had a sh

502
00:21:10,390 --> 00:21:16,900
I was able to take that hash I never

503
00:21:13,180 --> 00:21:19,960
cracked the administrator password but I

504
00:21:16,900 --> 00:21:23,080
took that hash and I used a Python

505
00:21:19,960 --> 00:21:25,330
project from in packet and got an SMB

506
00:21:23,080 --> 00:21:28,300
shell over to an administrators machine

507
00:21:25,330 --> 00:21:30,149
that I had identified as being you know

508
00:21:28,300 --> 00:21:32,590
someone who had a domain administrator

509
00:21:30,150 --> 00:21:34,420
or someone who was domain administrator

510
00:21:32,590 --> 00:21:36,850
so they had a separate account that they

511
00:21:34,420 --> 00:21:41,710
did their normal stuff for and then they

512
00:21:36,850 --> 00:21:43,810
had a a similarly named a domain

513
00:21:41,710 --> 00:21:45,040
administrator account that I didn't have

514
00:21:43,810 --> 00:21:46,090
the password for either one of those

515
00:21:45,040 --> 00:21:48,399
accounts so I was able to take that

516
00:21:46,090 --> 00:21:51,580
administrator hash and go start viewing

517
00:21:48,400 --> 00:21:54,040
files over SMB over you know the network

518
00:21:51,580 --> 00:21:55,510
on the administrators machine

519
00:21:54,040 --> 00:21:57,460
I started looking through the documents

520
00:21:55,510 --> 00:22:03,220
directory and I found something called

521
00:21:57,460 --> 00:22:05,050
passwords dot CSV suite and so I started

522
00:22:03,220 --> 00:22:07,060
looking at it and there were passwords

523
00:22:05,050 --> 00:22:09,460
for things like you know the you know

524
00:22:07,060 --> 00:22:13,480
the person's bank account and you know

525
00:22:09,460 --> 00:22:15,460
other online resources and I found that

526
00:22:13,480 --> 00:22:17,800
there was a real common theme like a

527
00:22:15,460 --> 00:22:20,440
two-character of deviation in all of the

528
00:22:17,800 --> 00:22:22,930
passwords so I opened up a command

529
00:22:20,440 --> 00:22:24,370
prompt trying to you know run as and

530
00:22:22,930 --> 00:22:26,950
asked me for the credentials and I put

531
00:22:24,370 --> 00:22:29,469
the domain admin account for the you

532
00:22:26,950 --> 00:22:32,990
know the person in there I put one of

533
00:22:29,470 --> 00:22:36,170
those passwords in da

534
00:22:32,990 --> 00:22:38,030
I got domain admin just because terrible

535
00:22:36,170 --> 00:22:41,300
password policies not only was the

536
00:22:38,030 --> 00:22:43,100
password a bad password I was there's

537
00:22:41,300 --> 00:22:44,899
also a widespread local administrator

538
00:22:43,100 --> 00:22:48,080
there was also I was already at

539
00:22:44,900 --> 00:22:50,240
administrator on the machine and then

540
00:22:48,080 --> 00:22:52,730
he's you know they're reusing passwords

541
00:22:50,240 --> 00:22:56,000
all of these should be something that

542
00:22:52,730 --> 00:22:57,710
are in a policy that should be something

543
00:22:56,000 --> 00:23:02,000
like an administrative rights policy

544
00:22:57,710 --> 00:23:04,340
where no one really needs administrator

545
00:23:02,000 --> 00:23:06,140
with their normal account on anything in

546
00:23:04,340 --> 00:23:07,639
your environment these days it really

547
00:23:06,140 --> 00:23:10,100
isn't necessary with very few

548
00:23:07,640 --> 00:23:13,100
circumstances and I would suggest having

549
00:23:10,100 --> 00:23:14,990
a policy that states that that if you

550
00:23:13,100 --> 00:23:18,379
need administrative rights you have that

551
00:23:14,990 --> 00:23:20,150
second account that you administer you

552
00:23:18,380 --> 00:23:23,480
know other machines in the environment

553
00:23:20,150 --> 00:23:25,490
and under no circumstances should they

554
00:23:23,480 --> 00:23:27,500
have the same password I was an

555
00:23:25,490 --> 00:23:29,990
engagement a couple weeks ago where I

556
00:23:27,500 --> 00:23:32,060
found there there were like I don't know

557
00:23:29,990 --> 00:23:35,540
like seven eight systems administrators

558
00:23:32,060 --> 00:23:37,310
in the IT team and they all had separate

559
00:23:35,540 --> 00:23:38,840
accounts they didn't have a policy

560
00:23:37,310 --> 00:23:40,399
saying that you couldn't share accounts

561
00:23:38,840 --> 00:23:42,260
four of those folks had the same

562
00:23:40,400 --> 00:23:45,260
password for their normal account and

563
00:23:42,260 --> 00:23:49,100
their administrator account it made my

564
00:23:45,260 --> 00:23:54,320
life incredibly easy so that was pretty

565
00:23:49,100 --> 00:23:56,540
fun so another thing you know that that

566
00:23:54,320 --> 00:23:59,540
common local administrator password by

567
00:23:56,540 --> 00:24:01,010
policy shouldn't be allowed so you know

568
00:23:59,540 --> 00:24:03,230
the local administrator on the box

569
00:24:01,010 --> 00:24:06,140
should not have the same password across

570
00:24:03,230 --> 00:24:08,090
the environment because I just described

571
00:24:06,140 --> 00:24:09,890
a technique earlier pass the hash where

572
00:24:08,090 --> 00:24:14,990
I can just use the hash to access other

573
00:24:09,890 --> 00:24:16,490
machines so how do you how do you you

574
00:24:14,990 --> 00:24:20,090
know once you write the policy how do

575
00:24:16,490 --> 00:24:22,550
you implement that so has anybody ever

576
00:24:20,090 --> 00:24:25,040
gone out to Microsoft's website it's

577
00:24:22,550 --> 00:24:26,540
huge right they have all this

578
00:24:25,040 --> 00:24:28,909
information out there but they are

579
00:24:26,540 --> 00:24:31,129
terrible at getting information out has

580
00:24:28,910 --> 00:24:34,430
anybody ever heard of the three-tier

581
00:24:31,130 --> 00:24:36,440
Microsoft security architecture I think

582
00:24:34,430 --> 00:24:41,690
it's actually called Microsoft Active

583
00:24:36,440 --> 00:24:43,100
Directory administrative tier nobody see

584
00:24:41,690 --> 00:24:44,050
they are so bad at getting this kind of

585
00:24:43,100 --> 00:24:47,139
information out

586
00:24:44,050 --> 00:24:49,800
so this is Microsoft's take on how you

587
00:24:47,140 --> 00:24:51,940
should handle how you should handle

588
00:24:49,800 --> 00:24:57,669
administrative rights in your in your

589
00:24:51,940 --> 00:25:00,190
organization so you have tier two which

590
00:24:57,670 --> 00:25:03,820
is all your workstations in your

591
00:25:00,190 --> 00:25:06,100
environment and if you have animal

592
00:25:03,820 --> 00:25:07,929
helpdesk that say administers those

593
00:25:06,100 --> 00:25:11,500
machines they have an account that does

594
00:25:07,930 --> 00:25:13,390
that then you have Tier one those tier

595
00:25:11,500 --> 00:25:15,670
two admin accounts should never go to

596
00:25:13,390 --> 00:25:18,220
tier one and do any administrative work

597
00:25:15,670 --> 00:25:20,200
and tier one is things like your

598
00:25:18,220 --> 00:25:22,720
Exchange Server sequel servers other

599
00:25:20,200 --> 00:25:25,270
application type servers they should

600
00:25:22,720 --> 00:25:28,120
have separate administrative accounts to

601
00:25:25,270 --> 00:25:31,660
use for the admin work that's there and

602
00:25:28,120 --> 00:25:34,330
then tier 0 is your sensitive stuff like

603
00:25:31,660 --> 00:25:35,980
domain controllers and that's the only

604
00:25:34,330 --> 00:25:38,620
place that a domain administrator should

605
00:25:35,980 --> 00:25:40,480
ever log into the environments that I've

606
00:25:38,620 --> 00:25:44,290
been in that have implemented this

607
00:25:40,480 --> 00:25:46,300
successfully they are very difficult for

608
00:25:44,290 --> 00:25:49,659
me to go get authentication and

609
00:25:46,300 --> 00:25:52,030
credential type stuff so I mentioned

610
00:25:49,660 --> 00:25:54,040
this briefly before one of the other

611
00:25:52,030 --> 00:25:55,780
things I do when I first get into an

612
00:25:54,040 --> 00:25:58,120
environment as I'd like to see what

613
00:25:55,780 --> 00:26:01,210
ports are open outbound we call this

614
00:25:58,120 --> 00:26:03,610
lack of egress filtering so when people

615
00:26:01,210 --> 00:26:05,890
think of a firewall you usually think of

616
00:26:03,610 --> 00:26:07,990
traffic being blocked

617
00:26:05,890 --> 00:26:10,390
inbound firewalls protected me from the

618
00:26:07,990 --> 00:26:13,150
evil internet we find a lot of the times

619
00:26:10,390 --> 00:26:16,150
no one really pays attention to traffic

620
00:26:13,150 --> 00:26:20,020
leaving your network well what's hackers

621
00:26:16,150 --> 00:26:22,570
do and one of the my favorite attacks I

622
00:26:20,020 --> 00:26:25,240
mentioned briefly earlier is finding TCP

623
00:26:22,570 --> 00:26:27,550
for TCP for four or five open outbound

624
00:26:25,240 --> 00:26:29,770
because then I can put that malicious

625
00:26:27,550 --> 00:26:32,320
shortcut link that I've talked about a

626
00:26:29,770 --> 00:26:35,320
minute ago I can put that on a file

627
00:26:32,320 --> 00:26:37,030
share somewhere and I can have my SMB

628
00:26:35,320 --> 00:26:39,310
listener out on the internet somewhere

629
00:26:37,030 --> 00:26:41,680
and gather hashes that way I'll get net

630
00:26:39,310 --> 00:26:43,540
and tail on v2 hashes and then again if

631
00:26:41,680 --> 00:26:45,940
you have a weak password policy I am

632
00:26:43,540 --> 00:26:48,760
liable to crack that I did this attack

633
00:26:45,940 --> 00:26:54,240
here recently and in the course of a day

634
00:26:48,760 --> 00:26:54,240
I got 27 hashes

635
00:26:54,380 --> 00:26:59,250
the organization of five character

636
00:26:57,210 --> 00:27:02,730
password policy minimal in the course of

637
00:26:59,250 --> 00:27:04,020
a day I got 27 hashes and I started

638
00:27:02,730 --> 00:27:07,860
cracking them does anybody want to take

639
00:27:04,020 --> 00:27:08,760
a guess on how many I cracked all of

640
00:27:07,860 --> 00:27:12,929
them's a good guess

641
00:27:08,760 --> 00:27:16,440
no unfortunately I got 22 of them so you

642
00:27:12,930 --> 00:27:19,440
know not not bad right so again you know

643
00:27:16,440 --> 00:27:22,440
if it's back to that password policies

644
00:27:19,440 --> 00:27:24,240
really important so what I would suggest

645
00:27:22,440 --> 00:27:26,490
is that if you're in this kind of

646
00:27:24,240 --> 00:27:31,140
situation you should start a policy in

647
00:27:26,490 --> 00:27:33,930
your organization that forbids any kind

648
00:27:31,140 --> 00:27:35,310
of open port outbound from the internet

649
00:27:33,930 --> 00:27:38,730
and you're probably thinking dude you're

650
00:27:35,310 --> 00:27:40,649
crazy that would never fly yeah you got

651
00:27:38,730 --> 00:27:43,080
to take baby steps if you do it all at

652
00:27:40,650 --> 00:27:45,060
once everyone's gonna hate you right but

653
00:27:43,080 --> 00:27:47,300
so look at your traffic and see I mean

654
00:27:45,060 --> 00:27:50,940
does anybody really need to have port 40

655
00:27:47,300 --> 00:27:54,570
2397 open probably not and if you're

656
00:27:50,940 --> 00:27:56,400
only gonna block one block TCP 445 but

657
00:27:54,570 --> 00:28:00,840
the ideal situation you want to get to

658
00:27:56,400 --> 00:28:02,790
is where the only traffic leaving your

659
00:28:00,840 --> 00:28:05,100
network is going through some kind of

660
00:28:02,790 --> 00:28:07,050
like application proxy of some sort and

661
00:28:05,100 --> 00:28:08,879
so typically the things that leave your

662
00:28:07,050 --> 00:28:12,570
network I mean the vast majority of it's

663
00:28:08,880 --> 00:28:14,580
probably what DNS and HTTP that's

664
00:28:12,570 --> 00:28:16,230
probably the vast majority of it you can

665
00:28:14,580 --> 00:28:18,060
get proxies for that and then if you're

666
00:28:16,230 --> 00:28:19,620
practicing that traffic out it makes it

667
00:28:18,060 --> 00:28:22,230
a lot more difficult for an attacker to

668
00:28:19,620 --> 00:28:24,449
use an off port and then if you see off

669
00:28:22,230 --> 00:28:27,330
port traffic and log so we'll talk about

670
00:28:24,450 --> 00:28:32,040
logging here in a minute then you might

671
00:28:27,330 --> 00:28:35,120
want to go investigate that so I don't

672
00:28:32,040 --> 00:28:38,210
have any hard and fast solutions or

673
00:28:35,120 --> 00:28:40,679
resources to point you to because

674
00:28:38,210 --> 00:28:41,550
implementing egress filtering means that

675
00:28:40,680 --> 00:28:43,560
you're gonna have to go talk to

676
00:28:41,550 --> 00:28:44,760
whoever's running your firewalls and

677
00:28:43,560 --> 00:28:46,470
you're gonna have to come up with a plan

678
00:28:44,760 --> 00:28:47,700
that's gonna have to take steps and

679
00:28:46,470 --> 00:28:49,410
you're going to look at the current

680
00:28:47,700 --> 00:28:52,440
traffic and you're gonna have to see

681
00:28:49,410 --> 00:28:53,700
what makes sense and you won't be able

682
00:28:52,440 --> 00:28:55,680
to do it all at one time

683
00:28:53,700 --> 00:28:57,540
it'll just how everything in your

684
00:28:55,680 --> 00:29:00,030
organization or in your specific

685
00:28:57,540 --> 00:29:04,590
organization you'll you'll have to kind

686
00:29:00,030 --> 00:29:06,810
of figure that out but like I said if if

687
00:29:04,590 --> 00:29:07,779
you can't block them all and a minimum

688
00:29:06,810 --> 00:29:15,759
block

689
00:29:07,779 --> 00:29:18,909
SMB TCP before private outbound so I'll

690
00:29:15,759 --> 00:29:20,499
ask another question does anyway not

691
00:29:18,909 --> 00:29:21,999
have a vulnerability management program

692
00:29:20,499 --> 00:29:25,179
no I'm kidding don't don't raise your

693
00:29:21,999 --> 00:29:27,309
hand so these days it blows my mind when

694
00:29:25,179 --> 00:29:29,559
we do internal pen tests and you know we

695
00:29:27,309 --> 00:29:31,029
do internals we still use neces and kind

696
00:29:29,559 --> 00:29:32,619
of traditionally go look for

697
00:29:31,029 --> 00:29:35,019
vulnerabilities for during internal

698
00:29:32,619 --> 00:29:36,728
tests and that was just on one where I

699
00:29:35,019 --> 00:29:39,460
mean I guess the Microsoft stuff was

700
00:29:36,729 --> 00:29:42,219
kind of getting patched but they ignore

701
00:29:39,460 --> 00:29:44,349
third-party I see this it's a little

702
00:29:42,219 --> 00:29:46,749
less frequent than then it has been in

703
00:29:44,349 --> 00:29:48,820
the past but you know Microsoft has kind

704
00:29:46,749 --> 00:29:51,549
of made it easy for people to patch and

705
00:29:48,820 --> 00:29:54,879
kind of you know get those things

706
00:29:51,549 --> 00:29:55,389
applied but I forever find third-party

707
00:29:54,879 --> 00:29:58,178
stuff

708
00:29:55,389 --> 00:30:00,248
Oracle VMware especially no one ever

709
00:29:58,179 --> 00:30:01,359
wants to pass for the ESX server because

710
00:30:00,249 --> 00:30:03,580
you know if it goes down that's the

711
00:30:01,359 --> 00:30:05,019
whole business right but you know

712
00:30:03,580 --> 00:30:06,158
attackers could take advantage of that

713
00:30:05,019 --> 00:30:08,950
and I kind of saved this for last

714
00:30:06,159 --> 00:30:11,349
because yeah I I tend not to have to use

715
00:30:08,950 --> 00:30:15,159
exploits but it still should be paid

716
00:30:11,349 --> 00:30:18,070
attention to and so if you are going to

717
00:30:15,159 --> 00:30:19,749
make a patch management policy one of

718
00:30:18,070 --> 00:30:24,039
the common mistakes I see when things

719
00:30:19,749 --> 00:30:25,989
are giving getting overlooked is that if

720
00:30:24,039 --> 00:30:27,460
there's a policy in place they put one

721
00:30:25,989 --> 00:30:31,479
group in charge

722
00:30:27,460 --> 00:30:33,580
and what's that group InfoSec right

723
00:30:31,479 --> 00:30:36,849
you're in charge of patching stuff

724
00:30:33,580 --> 00:30:39,728
because they run the servers yeah that

725
00:30:36,849 --> 00:30:41,168
makes a ton of sense so I if I were

726
00:30:39,729 --> 00:30:43,599
going to write a patch management policy

727
00:30:41,169 --> 00:30:45,820
I would not put the info set group in

728
00:30:43,599 --> 00:30:47,559
charge in fact it's really kind of an

729
00:30:45,820 --> 00:30:49,539
operational function it should just be

730
00:30:47,559 --> 00:30:52,658
happening in part of normal operations

731
00:30:49,539 --> 00:30:55,929
and you know if you have third-party

732
00:30:52,659 --> 00:30:57,789
things that are in your environment make

733
00:30:55,929 --> 00:30:59,289
sure they're covered in the policy that

734
00:30:57,789 --> 00:31:00,908
it's not just talking about operating

735
00:30:59,289 --> 00:31:04,809
systems that all your software is

736
00:31:00,909 --> 00:31:06,729
getting patched as well and then the

737
00:31:04,809 --> 00:31:10,019
other thing is anybody ever heard

738
00:31:06,729 --> 00:31:13,089
anybody in here ever took security 504

739
00:31:10,019 --> 00:31:15,399
from sans so you know one of the things

740
00:31:13,089 --> 00:31:17,710
that they harp on in the vulnerability

741
00:31:15,399 --> 00:31:21,219
management portion of it is if you're

742
00:31:17,710 --> 00:31:21,710
going to try and tackle applying patches

743
00:31:21,220 --> 00:31:24,530
in your

744
00:31:21,710 --> 00:31:26,060
and you if you try and tackle it on a

745
00:31:24,530 --> 00:31:28,790
server by server and a case-by-case

746
00:31:26,060 --> 00:31:32,030
basis you're gonna go crazy it's not

747
00:31:28,790 --> 00:31:34,520
possible what I would do instead to

748
00:31:32,030 --> 00:31:38,030
remediate you know software that needs

749
00:31:34,520 --> 00:31:41,210
to be patched is look at it by plugin

750
00:31:38,030 --> 00:31:43,490
look at it by vulnerability and work

751
00:31:41,210 --> 00:31:45,740
towards a way to where things are just

752
00:31:43,490 --> 00:31:47,270
automatically applied and things

753
00:31:45,740 --> 00:31:49,670
automatically get patched and then

754
00:31:47,270 --> 00:31:51,800
you're able to recover from any kind of

755
00:31:49,670 --> 00:31:54,020
you know outage based on an applied

756
00:31:51,800 --> 00:31:55,760
patch I can't remember the last time I

757
00:31:54,020 --> 00:31:58,490
heard there was a huge issue with

758
00:31:55,760 --> 00:32:00,050
Microsoft taking down tons of

759
00:31:58,490 --> 00:32:01,310
organizations because of a mismanaged

760
00:32:00,050 --> 00:32:05,360
patch does anybody remember the last

761
00:32:01,310 --> 00:32:07,129
time that happened I can't remember last

762
00:32:05,360 --> 00:32:09,280
time it's been years since I've heard of

763
00:32:07,130 --> 00:32:12,410
it happening and then the other thing is

764
00:32:09,280 --> 00:32:15,649
don't ignore Lowe's and informational x'

765
00:32:12,410 --> 00:32:17,330
I've seen many policies where we only

766
00:32:15,650 --> 00:32:20,150
patch highs and we have to do that

767
00:32:17,330 --> 00:32:23,179
within 30 days heisting criticals but

768
00:32:20,150 --> 00:32:25,100
medians and Lowe's we ignore those so we

769
00:32:23,180 --> 00:32:27,770
used to do this thing we call it a info

770
00:32:25,100 --> 00:32:29,659
- ouch where we'd find an informational

771
00:32:27,770 --> 00:32:32,389
vulnerability and it really became a

772
00:32:29,660 --> 00:32:35,810
critical and one of my favorite ones is

773
00:32:32,390 --> 00:32:37,720
I was on a pen test where we ended up

774
00:32:35,810 --> 00:32:40,220
scanning the outside we had an external

775
00:32:37,720 --> 00:32:42,290
vulnerability scan as part of the

776
00:32:40,220 --> 00:32:44,300
engagement and I'm looking through all

777
00:32:42,290 --> 00:32:46,639
the necessary and I see an informational

778
00:32:44,300 --> 00:32:47,840
that said telnet telling us a

779
00:32:46,640 --> 00:32:51,350
neighborhood like home

780
00:32:47,840 --> 00:32:53,860
this is awesome well it looked and sure

781
00:32:51,350 --> 00:32:57,320
enough telnet was enabled and in the

782
00:32:53,860 --> 00:32:57,949
necessary prompt of a Cisco router just

783
00:32:57,320 --> 00:33:00,200
sitting there

784
00:32:57,950 --> 00:33:02,270
no authentic authentication to get into

785
00:33:00,200 --> 00:33:05,150
the Cisco router at all is that an

786
00:33:02,270 --> 00:33:07,280
informational on the external side of

787
00:33:05,150 --> 00:33:08,960
your network it's like holy crap so I

788
00:33:07,280 --> 00:33:10,879
wouldn't look now used telnet and sure

789
00:33:08,960 --> 00:33:14,300
enough I was able to tell MIT into the

790
00:33:10,880 --> 00:33:18,620
device and then I'm not a Cisco expert

791
00:33:14,300 --> 00:33:21,950
but I know to type enable and there was

792
00:33:18,620 --> 00:33:23,719
no enable password so for usually you

793
00:33:21,950 --> 00:33:25,970
guys that don't know I just became super

794
00:33:23,720 --> 00:33:28,970
user on that router I just owned that

795
00:33:25,970 --> 00:33:30,590
router facing the external side I'd say

796
00:33:28,970 --> 00:33:32,350
that's a critical right so but if you're

797
00:33:30,590 --> 00:33:34,840
ignoring informational yeah you know

798
00:33:32,350 --> 00:33:37,600
found that so that's what we call a bad

799
00:33:34,840 --> 00:33:39,850
day and I had to call the client and say

800
00:33:37,600 --> 00:33:44,918
hey you might want to might want to

801
00:33:39,850 --> 00:33:47,469
check on that so the other thing are

802
00:33:44,919 --> 00:33:49,990
another thing that I see a lot is lack

803
00:33:47,470 --> 00:33:51,610
of effective ball game and what I mean

804
00:33:49,990 --> 00:33:53,650
by that isn't that you're not gathering

805
00:33:51,610 --> 00:33:57,549
any logs it's really what logs that you

806
00:33:53,650 --> 00:33:59,049
gather so you know I'd be lying if I

807
00:33:57,549 --> 00:34:00,400
told you as a penetration tester I've

808
00:33:59,049 --> 00:34:03,429
never gotten a call

809
00:34:00,400 --> 00:34:05,110
of course I've gotten caught the most

810
00:34:03,429 --> 00:34:07,120
common ways I'm gonna and guess what the

811
00:34:05,110 --> 00:34:08,980
most common way nowadays I get caught

812
00:34:07,120 --> 00:34:10,210
when people see me in their environment

813
00:34:08,980 --> 00:34:11,980
like maybe they didn't know there was a

814
00:34:10,210 --> 00:34:17,800
test going on and they're like hey was

815
00:34:11,980 --> 00:34:20,980
this on the screen behind me in point

816
00:34:17,800 --> 00:34:23,050
logging if you're logging things that

817
00:34:20,980 --> 00:34:24,909
are happening on your windows or mobile

818
00:34:23,050 --> 00:34:27,820
endpoints but specifically you know

819
00:34:24,909 --> 00:34:29,619
windows endpoints you are likely going

820
00:34:27,820 --> 00:34:31,240
to catch an attacker in your network in

821
00:34:29,619 --> 00:34:33,520
my opinion if you're logging the right

822
00:34:31,239 --> 00:34:35,649
things and you're taking all of your

823
00:34:33,520 --> 00:34:37,179
windows event logs and you're putting it

824
00:34:35,649 --> 00:34:39,850
in a central location you're doing some

825
00:34:37,179 --> 00:34:41,530
kind of analysis on those then you have

826
00:34:39,850 --> 00:34:44,350
a good chance of finding something weird

827
00:34:41,530 --> 00:34:48,090
going on in fact now if you get a

828
00:34:44,350 --> 00:34:51,819
defender ATP which is Microsoft's

829
00:34:48,090 --> 00:34:53,950
enterprise class you know defender

830
00:34:51,820 --> 00:34:55,419
offering they kind of just build that

831
00:34:53,949 --> 00:34:57,810
stuff in they have an agent running on

832
00:34:55,418 --> 00:34:59,618
you know all of the machines and it's

833
00:34:57,810 --> 00:35:01,509
basically telling you everything that's

834
00:34:59,619 --> 00:35:04,030
going on the end point I think that

835
00:35:01,510 --> 00:35:06,490
endpoint logging is the most effective

836
00:35:04,030 --> 00:35:08,380
type of logging that you can do however

837
00:35:06,490 --> 00:35:09,939
I still have a soft spot in my heart for

838
00:35:08,380 --> 00:35:11,650
one I used to do Network forensics so

839
00:35:09,940 --> 00:35:13,810
yeah you should definitely augment log

840
00:35:11,650 --> 00:35:15,460
network traffic now but all the fun

841
00:35:13,810 --> 00:35:18,359
stuff really happens on the endpoints

842
00:35:15,460 --> 00:35:22,510
these days and surprise surprise

843
00:35:18,359 --> 00:35:24,970
Microsoft gives you tools for this but

844
00:35:22,510 --> 00:35:27,250
so this is kind of I stole this from I

845
00:35:24,970 --> 00:35:29,439
think Jessica pain like one of the blogs

846
00:35:27,250 --> 00:35:32,350
she wrote a while back ago but this is

847
00:35:29,440 --> 00:35:34,840
commonly what we see when people are

848
00:35:32,350 --> 00:35:38,140
logging either they're not logging

849
00:35:34,840 --> 00:35:40,119
anything which is common or they bought

850
00:35:38,140 --> 00:35:41,920
you know from a sim vendor and I won't

851
00:35:40,119 --> 00:35:45,310
name any who told them that they need to

852
00:35:41,920 --> 00:35:46,270
log everything which is also not true

853
00:35:45,310 --> 00:35:48,009
you don't want to log

854
00:35:46,270 --> 00:35:50,140
everything and you know it could do a

855
00:35:48,010 --> 00:35:52,480
whole talk on effective endpoint

856
00:35:50,140 --> 00:35:55,480
monitoring but a good place to start is

857
00:35:52,480 --> 00:35:58,210
logging on your endpoints go to the the

858
00:35:55,480 --> 00:36:01,450
NSA catch the adversary list and they

859
00:35:58,210 --> 00:36:03,760
tell you what specific event IDs are

860
00:36:01,450 --> 00:36:06,279
important to start with in fact I wrote

861
00:36:03,760 --> 00:36:07,630
a blog on how to do this and if

862
00:36:06,280 --> 00:36:10,590
anybody's interested I give you the link

863
00:36:07,630 --> 00:36:13,810
after this talk on how to send up

864
00:36:10,590 --> 00:36:15,850
Windows event forwarding and we'll talk

865
00:36:13,810 --> 00:36:20,380
about that in a second but in terms of

866
00:36:15,850 --> 00:36:22,060
policy one of the weirdest things that

867
00:36:20,380 --> 00:36:24,780
I've seen and it's kind of common is

868
00:36:22,060 --> 00:36:27,730
policy for logging states that

869
00:36:24,780 --> 00:36:30,760
administrators will review their logs

870
00:36:27,730 --> 00:36:32,320
every week what does that even mean

871
00:36:30,760 --> 00:36:33,880
well I'm gonna go like login to the

872
00:36:32,320 --> 00:36:36,550
server and open up Event Viewer and say

873
00:36:33,880 --> 00:36:38,260
oh yep I reviewed logs and that is

874
00:36:36,550 --> 00:36:39,970
definitely not the way to do that I

875
00:36:38,260 --> 00:36:41,920
would use some wording that would talk

876
00:36:39,970 --> 00:36:45,250
about consolidating endpoint logs into

877
00:36:41,920 --> 00:36:46,780
some kind of product and how many people

878
00:36:45,250 --> 00:36:51,580
knew that Microsoft lets you do this for

879
00:36:46,780 --> 00:36:53,020
free yeah windows event forward or most

880
00:36:51,580 --> 00:36:54,430
people have never even heard of it again

881
00:36:53,020 --> 00:36:58,450
this microcell terrible at getting this

882
00:36:54,430 --> 00:37:00,730
stuff out apparently so I have the links

883
00:36:58,450 --> 00:37:02,470
of the blog in there um so you can set

884
00:37:00,730 --> 00:37:03,760
up Windows event forwarder for free yeah

885
00:37:02,470 --> 00:37:05,589
I mean you have to have a server to do

886
00:37:03,760 --> 00:37:08,680
it and it'll help you start getting all

887
00:37:05,590 --> 00:37:11,410
those endpoint logs into one place and I

888
00:37:08,680 --> 00:37:15,640
talked about specific event IDs inside

889
00:37:11,410 --> 00:37:17,950
of are on that blog post so we recently

890
00:37:15,640 --> 00:37:20,560
came up with this thing at Black Hills

891
00:37:17,950 --> 00:37:24,850
has anybody ever done or had done a

892
00:37:20,560 --> 00:37:27,549
twenty critical controls on it so if you

893
00:37:24,850 --> 00:37:30,310
have they usually take like like two

894
00:37:27,550 --> 00:37:32,890
weeks to do I mean I'm not saying it's

895
00:37:30,310 --> 00:37:34,600
bad it's just there there's a lot to it

896
00:37:32,890 --> 00:37:37,240
and it's meant to be like a five-year

897
00:37:34,600 --> 00:37:38,620
plan so I'm not gonna read every single

898
00:37:37,240 --> 00:37:40,540
one of these off because we kind of

899
00:37:38,620 --> 00:37:44,440
talked about these and I'll post the

900
00:37:40,540 --> 00:37:45,759
slides after after the talk but we came

901
00:37:44,440 --> 00:37:47,110
with this thing called atomic critical

902
00:37:45,760 --> 00:37:48,790
controls kind of taking it from the

903
00:37:47,110 --> 00:37:51,010
atomic read team stuff where we've kind

904
00:37:48,790 --> 00:37:52,540
of distilled down some of the most

905
00:37:51,010 --> 00:37:54,340
important things we find is an

906
00:37:52,540 --> 00:37:57,009
organization for a company to have

907
00:37:54,340 --> 00:37:59,800
policy on and tenable can technically

908
00:37:57,010 --> 00:38:00,040
controls backing them and organizations

909
00:37:59,800 --> 00:38:02,710
that

910
00:38:00,040 --> 00:38:04,630
do this or much more likely to be

911
00:38:02,710 --> 00:38:06,280
successful when they have a pen test or

912
00:38:04,630 --> 00:38:08,260
have if they you know have an attacker

913
00:38:06,280 --> 00:38:09,490
in their network and you know some of

914
00:38:08,260 --> 00:38:10,630
the things that we've already talked

915
00:38:09,490 --> 00:38:12,310
about that another one's like

916
00:38:10,630 --> 00:38:15,490
workstation to workstation communication

917
00:38:12,310 --> 00:38:17,380
like most environments that I've been in

918
00:38:15,490 --> 00:38:19,649
allow one workstation to talk to another

919
00:38:17,380 --> 00:38:23,200
the environments that I've been in that

920
00:38:19,650 --> 00:38:27,250
don't allow that make me want to cry

921
00:38:23,200 --> 00:38:29,770
it's so hard to get off the box and move

922
00:38:27,250 --> 00:38:34,480
laterally it is it is a very effective

923
00:38:29,770 --> 00:38:37,450
strategy and again some more list of

924
00:38:34,480 --> 00:38:39,790
stuff and I don't think I have time to

925
00:38:37,450 --> 00:38:41,379
really go through them all but one of

926
00:38:39,790 --> 00:38:46,210
the most important things on this slide

927
00:38:41,380 --> 00:38:47,830
I think is do have you probably have

928
00:38:46,210 --> 00:38:50,350
some kind of EDR or some kind of

929
00:38:47,830 --> 00:38:51,819
antivirus type product when I say EDR I

930
00:38:50,350 --> 00:38:55,509
mean enterprise detection and response

931
00:38:51,820 --> 00:38:57,070
and I know Black Hills and some of the

932
00:38:55,510 --> 00:38:59,380
vendors haven't had a good relationship

933
00:38:57,070 --> 00:39:02,080
in the past and yeah I mean I can

934
00:38:59,380 --> 00:39:04,120
probably bypass an EDR product but when

935
00:39:02,080 --> 00:39:06,730
it comes down to it if you have

936
00:39:04,120 --> 00:39:08,740
something on the box that is logging

937
00:39:06,730 --> 00:39:10,810
traffic and going to a team of humans

938
00:39:08,740 --> 00:39:12,430
who are then looking for anomalies in

939
00:39:10,810 --> 00:39:14,529
your network you have a much better

940
00:39:12,430 --> 00:39:17,620
chance than just sending them to a

941
00:39:14,530 --> 00:39:19,780
console and I'm hoping that the two guys

942
00:39:17,620 --> 00:39:22,180
and InfoSec are going to see it having

943
00:39:19,780 --> 00:39:25,690
appropriate staffing is also important

944
00:39:22,180 --> 00:39:28,480
so we talked about a local administrator

945
00:39:25,690 --> 00:39:30,700
password or having a common local

946
00:39:28,480 --> 00:39:32,500
administrator password again Microsoft

947
00:39:30,700 --> 00:39:34,299
gives you a tool called a local

948
00:39:32,500 --> 00:39:36,250
administrator password solution because

949
00:39:34,300 --> 00:39:39,430
that's a really creative name for local

950
00:39:36,250 --> 00:39:41,080
administrator paths um they probably

951
00:39:39,430 --> 00:39:42,850
could have done better on that but what

952
00:39:41,080 --> 00:39:46,750
it does the local administrator password

953
00:39:42,850 --> 00:39:48,700
solution or lapse is it randomizes the

954
00:39:46,750 --> 00:39:51,070
local administrator password across all

955
00:39:48,700 --> 00:39:53,439
the machines in your organization so if

956
00:39:51,070 --> 00:39:55,150
I can attacker does get on the box and

957
00:39:53,440 --> 00:40:01,140
they get the hash for that administrator

958
00:39:55,150 --> 00:40:04,210
account it doesn't work anywhere else so

959
00:40:01,140 --> 00:40:06,640
it's kind of summarize it although if

960
00:40:04,210 --> 00:40:08,770
you really want to frustrate an attacker

961
00:40:06,640 --> 00:40:10,540
or a pen tester in your network here's

962
00:40:08,770 --> 00:40:13,630
the list of things I would suggest that

963
00:40:10,540 --> 00:40:17,450
you do and have policy backing them

964
00:40:13,630 --> 00:40:19,339
talked about long passwords separation

965
00:40:17,450 --> 00:40:22,220
of accounts for all administrative

966
00:40:19,339 --> 00:40:23,960
functions the three-tier architecture no

967
00:40:22,220 --> 00:40:26,209
workstation of workstation communication

968
00:40:23,960 --> 00:40:28,130
and then application whitelisting has

969
00:40:26,210 --> 00:40:29,930
anybody a implemented successfully

970
00:40:28,130 --> 00:40:32,030
application whitelisting in their

971
00:40:29,930 --> 00:40:34,669
environment cool

972
00:40:32,030 --> 00:40:36,680
yeah those environments kind of suck as

973
00:40:34,670 --> 00:40:38,390
an attacker or pen tester to do things

974
00:40:36,680 --> 00:40:40,669
in is it I mean there again there are

975
00:40:38,390 --> 00:40:44,779
bypasses for it but it's just it makes

976
00:40:40,670 --> 00:40:47,930
it that much more difficult and then I

977
00:40:44,780 --> 00:40:50,059
think you know to me when I asked

978
00:40:47,930 --> 00:40:53,029
earlier what you know what everybody

979
00:40:50,059 --> 00:40:54,650
thought information security was I think

980
00:40:53,030 --> 00:40:56,869
if you're gonna do information security

981
00:40:54,650 --> 00:41:00,650
right and organization it's really not

982
00:40:56,869 --> 00:41:03,980
about buying the latest cyber apt blinky

983
00:41:00,650 --> 00:41:05,720
box I mean yeah it's cool but really

984
00:41:03,980 --> 00:41:08,569
it's just good systems administration

985
00:41:05,720 --> 00:41:12,319
practices and all of that documented and

986
00:41:08,569 --> 00:41:14,270
also in good policy and if you haven't

987
00:41:12,319 --> 00:41:16,849
gone down the road of doing any kind of

988
00:41:14,270 --> 00:41:19,970
audit or critical controls assessment I

989
00:41:16,849 --> 00:41:22,520
would look at the first five the first

990
00:41:19,970 --> 00:41:23,779
five CSC controls are critical security

991
00:41:22,520 --> 00:41:26,029
controls because if you get those

992
00:41:23,779 --> 00:41:27,559
implemented they're the foundation for

993
00:41:26,029 --> 00:41:29,240
everything else and if you're doing it

994
00:41:27,559 --> 00:41:31,430
you know doing it right you have a an

995
00:41:29,240 --> 00:41:34,129
inventory of all your hardware and

996
00:41:31,430 --> 00:41:36,288
software and you know you implement the

997
00:41:34,130 --> 00:41:42,279
first five controls you'll be in a much

998
00:41:36,289 --> 00:41:42,279
better place questions

999
00:41:47,030 --> 00:41:51,740
oh yeah that's a good question so the

1000
00:41:49,310 --> 00:41:53,690
question was is what are the ways that

1001
00:41:51,740 --> 00:41:55,640
you can block a workstation to

1002
00:41:53,690 --> 00:41:58,160
workstation communication so the first

1003
00:41:55,640 --> 00:42:00,650
thing you need to do is find out is

1004
00:41:58,160 --> 00:42:03,350
there any shadow IT in your organization

1005
00:42:00,650 --> 00:42:05,300
like do you have and if you do have

1006
00:42:03,350 --> 00:42:07,250
shadow IT in your organization then

1007
00:42:05,300 --> 00:42:08,510
there's probably a reason why I mean

1008
00:42:07,250 --> 00:42:10,760
some places that I worked in the past

1009
00:42:08,510 --> 00:42:12,890
there was shadow IT because the IT

1010
00:42:10,760 --> 00:42:14,840
department couldn't deliver on time and

1011
00:42:12,890 --> 00:42:15,920
that sort of goes back to what I was

1012
00:42:14,840 --> 00:42:16,940
talking about the Phoenix project

1013
00:42:15,920 --> 00:42:19,130
earlier that's more of a systemic

1014
00:42:16,940 --> 00:42:21,530
project or a problem and I can't answer

1015
00:42:19,130 --> 00:42:23,690
that right now for a technical control

1016
00:42:21,530 --> 00:42:24,650
so there's two ways that I've seen it

1017
00:42:23,690 --> 00:42:31,240
done successfully

1018
00:42:24,650 --> 00:42:33,470
one is the was a virtual private land

1019
00:42:31,240 --> 00:42:36,109
you know I think it's private Cisco

1020
00:42:33,470 --> 00:42:38,959
technology where it's implemented at the

1021
00:42:36,110 --> 00:42:40,970
switch layer yeah it's a private land

1022
00:42:38,960 --> 00:42:43,030
I'll make sure of that at the end of the

1023
00:42:40,970 --> 00:42:45,140
talk and the other is Windows Firewall

1024
00:42:43,030 --> 00:42:48,970
you can use the Windows Firewall through

1025
00:42:45,140 --> 00:42:48,970
GPO I've seen that be successful as well

1026
00:43:02,610 --> 00:43:21,880
yes potentially yeah so the question was

1027
00:43:19,180 --> 00:43:24,580
is if you don't allow if you don't if

1028
00:43:21,880 --> 00:43:26,740
you increase the frequency of changing

1029
00:43:24,580 --> 00:43:30,370
your password does it encourage password

1030
00:43:26,740 --> 00:43:33,609
reuse potentially yeah so I would also

1031
00:43:30,370 --> 00:43:36,130
have a password reuse policy that states

1032
00:43:33,610 --> 00:43:38,620
you know don't read your local network

1033
00:43:36,130 --> 00:43:41,140
password for your work resource should

1034
00:43:38,620 --> 00:43:45,600
not be the same password for your bank

1035
00:43:41,140 --> 00:43:45,600
it also shouldn't be your pet's name

1036
00:43:48,390 --> 00:44:00,640
yeah yeah so I'm not really sure that

1037
00:43:55,390 --> 00:44:03,490
it's a bigger risk I don't know because

1038
00:44:00,640 --> 00:44:04,900
I mean it's one of those you know

1039
00:44:03,490 --> 00:44:06,879
trade-offs that you have to look at

1040
00:44:04,900 --> 00:44:08,770
right I mean I think within a six month

1041
00:44:06,880 --> 00:44:10,540
time frame I mean if a 15 character

1042
00:44:08,770 --> 00:44:11,770
password policy and you state hey you're

1043
00:44:10,540 --> 00:44:13,420
only going to use it on your Windows

1044
00:44:11,770 --> 00:44:15,100
network or for your work resources I

1045
00:44:13,420 --> 00:44:16,870
mean at some point can't save people

1046
00:44:15,100 --> 00:44:19,600
from themselves right I mean they're

1047
00:44:16,870 --> 00:44:21,490
gonna look we're all gonna be doing this

1048
00:44:19,600 --> 00:44:24,310
for probably until we're retired because

1049
00:44:21,490 --> 00:44:25,779
people do stupid things right and and

1050
00:44:24,310 --> 00:44:27,370
that's sort of what attackers take

1051
00:44:25,780 --> 00:44:29,770
advantage of with people doing stupid

1052
00:44:27,370 --> 00:44:31,990
things we used to call it the dancing

1053
00:44:29,770 --> 00:44:34,240
pig attack and what I mean by that is

1054
00:44:31,990 --> 00:44:35,799
somebody is always gonna dance or click

1055
00:44:34,240 --> 00:44:37,930
on the executable that claims to be a

1056
00:44:35,800 --> 00:44:39,340
cartoon dancing pig yeah that actually

1057
00:44:37,930 --> 00:44:40,960
came from an attack I worked one time

1058
00:44:39,340 --> 00:44:42,850
when I did incident response like go

1059
00:44:40,960 --> 00:44:47,380
figure like why would you click on that

1060
00:44:42,850 --> 00:44:52,270
oh man so I think it's a valid point but

1061
00:44:47,380 --> 00:44:55,120
I think that I would as an attacker I

1062
00:44:52,270 --> 00:44:57,880
would it would be harder to reuse a

1063
00:44:55,120 --> 00:44:59,440
password like to get in that kind of

1064
00:44:57,880 --> 00:45:01,720
situation cuz I'd have to have a third

1065
00:44:59,440 --> 00:45:03,400
party breach or I'd have to obtain the

1066
00:45:01,720 --> 00:45:05,350
password someway and then figure out it

1067
00:45:03,400 --> 00:45:07,030
was like when I found that CSV file like

1068
00:45:05,350 --> 00:45:09,580
that I'd have to figure that part out

1069
00:45:07,030 --> 00:45:11,230
where if you just have a bad password to

1070
00:45:09,580 --> 00:45:13,210
begin with that just makes me go on down

1071
00:45:11,230 --> 00:45:21,190
the road quicker so but

1072
00:45:13,210 --> 00:45:22,930
it's good question anymore cool I

1073
00:45:21,190 --> 00:45:26,150
finished with five minutes to spare that

1074
00:45:22,930 --> 00:45:33,209
never happens so thanks everyone

1075
00:45:26,150 --> 00:45:33,209
[Applause]

