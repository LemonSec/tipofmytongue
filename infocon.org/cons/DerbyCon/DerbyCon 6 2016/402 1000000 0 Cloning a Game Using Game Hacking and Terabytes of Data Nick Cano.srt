1
00:00:00,000 --> 00:00:04,589
everyone's in here so i will start my
name is Nick ano this talk is called

2
00:00:04,589 --> 00:00:10,110
plus 1 million minus zero kind of a
shout hub to a shout out to get because

3
00:00:10,110 --> 00:00:14,820
i'm going to talk about how me and a
couple of my colleagues generated over a

4
00:00:14,820 --> 00:00:20,340
million lines of code for a clone of an
online game and the video just went out

5
00:00:20,340 --> 00:00:23,490
my computer is not liking it

6
00:00:23,490 --> 00:00:34,170
please come back Oh skype is going crazy
on me go away

7
00:00:34,170 --> 00:00:41,700
ok let's let's hope it works so the
project was actually done by these guys

8
00:00:41,700 --> 00:00:46,950
down here mostly I'm kind of a technical
expert when it comes to this game

9
00:00:46,950 --> 00:00:50,430
because I've been hacking it for a long
time so I helped them a lot when they

10
00:00:50,430 --> 00:00:54,000
needed help reverse engineering packets
or data structures and stuff but really

11
00:00:54,000 --> 00:00:57,000
everyone but need did the hard work and
I'm just here to talk about it

12
00:00:59,039 --> 00:01:05,820
so who are we we are a mixed bag of like
a mix international bag of game hackers

13
00:01:05,820 --> 00:01:11,490
developers and so on and what are we
doing we're using bots and game hacks

14
00:01:11,490 --> 00:01:16,259
and we are we are basically cloning an
online game so by capturing packets

15
00:01:16,259 --> 00:01:20,820
capturing the data that comes from a
game to the game client we're going to

16
00:01:20,820 --> 00:01:25,350
clone all of that data so we can run our
own custom server and why because well

17
00:01:25,350 --> 00:01:32,039
we want to for the most part so i'm 23
years old i am the author of game

18
00:01:32,040 --> 00:01:36,360
hacking developing autonomous box for
online games i'm the CEO and lead

19
00:01:36,360 --> 00:01:40,920
engineer at example . that's a bought
for the game will be talking about i

20
00:01:40,920 --> 00:01:43,799
work at bromium the senior security
engineer where an endpoint security

21
00:01:43,799 --> 00:01:47,970
company and this is my third time
speaking at Derby con which i think is

22
00:01:47,970 --> 00:01:55,110
the best a conference serious so your
takeaways are going to be like a cool

23
00:01:55,110 --> 00:02:01,979
like cool ways to apply your hacking
techniques to non hacking tasks I mean

24
00:02:01,979 --> 00:02:05,189
it's still hacking but it's it's
non-conventional when you're hacking

25
00:02:05,189 --> 00:02:09,690
games a lot of people look at hacking is
like cybercriminal vs like security

26
00:02:09,690 --> 00:02:10,818
specialist

27
00:02:10,818 --> 00:02:15,679
and i think the video just went away
again sorry my laptop really doesn't

28
00:02:15,680 --> 00:02:24,889
like anything see this didn't happen
when I was giving the talk at work for

29
00:02:24,889 --> 00:02:43,790
practice but it always happens to me
after become so loose can't give me a

30
00:02:43,790 --> 00:02:46,790
break i'm sorry

31
00:02:49,909 --> 00:02:58,638
ok now we're here now we're here again
now let's hope it stays like this

32
00:02:59,150 --> 00:03:02,060
ok I'm just going to step away from the
computer I feel like bumping it is

33
00:03:02,060 --> 00:03:05,810
moving stuff can you guys all hear me
well without the mic ok hopefully pick

34
00:03:05,810 --> 00:03:10,459
something up so and it's we're just
gonna get an example of how you can

35
00:03:10,459 --> 00:03:14,629
apply your technical skills too
whimsical projects and you're not gonna

36
00:03:14,629 --> 00:03:18,798
learn to juggle what i mean by that is
this is a very specific thing we did for

37
00:03:18,799 --> 00:03:22,549
a very specific game you're going to get
some cool ideas and you're going to

38
00:03:22,549 --> 00:03:25,400
learn about game hacking but you're not
really going to be able to reproduce

39
00:03:25,400 --> 00:03:28,849
this one-to-one because you've probably
never even heard of game we're going to

40
00:03:28,849 --> 00:03:32,060
talk about but there will be some open
source stuff at the end so you can learn

41
00:03:32,060 --> 00:03:39,530
how the internals of everything works so
background information so the game we're

42
00:03:39,530 --> 00:03:43,129
going to be talking about his game
called tibia it's a 2d FML it's been

43
00:03:43,129 --> 00:03:47,780
around for over 15 years now on there's
millions of players from all over the

44
00:03:47,780 --> 00:03:52,220
world but mostly Brazilians are people
from polling people from Sweden it's

45
00:03:52,220 --> 00:03:56,120
created by a german company and it's
ruled by box right now about ninety-five

46
00:03:56,120 --> 00:03:59,810
percent of the people who are playing
are actually bought at this point and

47
00:03:59,810 --> 00:04:04,699
probably about forty percent of them are
using my bottle so if we look at the

48
00:04:04,699 --> 00:04:09,560
architecture of tibia we have the tibia
Klein on the players computer it

49
00:04:09,560 --> 00:04:13,609
connects to a login server this red line
right here that's actually secured with

50
00:04:13,609 --> 00:04:18,829
RSA the client has an embedded public
key by which it will encrypt the like

51
00:04:18,829 --> 00:04:22,310
the accounting the password and a few
other things as well as

52
00:04:22,820 --> 00:04:27,349
a 16-byte xt key which will be used
later it'll send it to login server

53
00:04:27,350 --> 00:04:29,750
login server will spit

54
00:04:29,750 --> 00:04:38,330
ok the login server will spit back a
list of characters and IP addresses that

55
00:04:38,330 --> 00:04:43,159
can be connected to so it'll basically
say character number one connected this

56
00:04:43,160 --> 00:04:47,270
IP address on this port character number
two and then the user just sees a list

57
00:04:47,270 --> 00:04:50,599
of characters clicks on them and then
the client knows what to connect to that

58
00:04:50,600 --> 00:04:53,750
will be important in a minute if we get
the slides back

59
00:04:53,750 --> 00:04:56,870
this is getting really annoying i know i
hate me right now too

60
00:04:57,380 --> 00:05:06,230
yes we haven't had an hdmi to vga
adapter right now

61
00:05:08,810 --> 00:05:15,230
no because it does have hdmi like okay
this guy is going to be a savior we're

62
00:05:15,230 --> 00:05:18,260
going to switch over really quick and
then i'm going to talk very fast to try

63
00:05:18,260 --> 00:05:23,330
to catch up to where I should be my
first dirty politics spent 20 minutes

64
00:05:23,330 --> 00:05:27,020
just trying to get the video working so
this is already going better and that

65
00:05:27,020 --> 00:05:50,210
was a different laptop right between as
in one

66
00:05:58,560 --> 00:06:45,090
this is says its uses but this doesn't
yes can you get one on there for me and

67
00:06:45,090 --> 00:06:48,090
maybe just work

68
00:06:56,430 --> 00:07:12,479
ok let me switch back to this adapter
with the laptop over here you have so

69
00:07:12,479 --> 00:07:30,570
great i should be this video ok is it
the device drivers on where are all of

70
00:07:30,570 --> 00:07:33,240
theirs

71
00:07:33,240 --> 00:07:39,630
raised

72
00:07:41,910 --> 00:07:48,090
it's definitely a short as i move it is
man

73
00:07:48,090 --> 00:07:56,818
ok no more problems please I'm not even
doing a demo and the demo gods already

74
00:07:56,819 --> 00:07:57,840
shitting on me

75
00:07:57,840 --> 00:08:03,960
so let's let's recap here we talked to
the login server / RSA get a list of

76
00:08:03,960 --> 00:08:07,888
characters and IP addresses we get that
we select a character it connects to one

77
00:08:07,889 --> 00:08:12,810
of the many game servers which is I
begin by login server cool now let's

78
00:08:12,810 --> 00:08:17,909
look at open tibia open tibia is an
ecosystem of open-source software to run

79
00:08:17,909 --> 00:08:22,259
custom tibia servers some guys back in
$MONTH 2001 reverse-engineer the

80
00:08:22,259 --> 00:08:26,310
protocol made an open source project
since then it's been growing it's been

81
00:08:26,310 --> 00:08:31,110
very stable and the amount of players on
open tibia actually rivals the amount on

82
00:08:31,110 --> 00:08:35,940
the real game just because there's like
hundreds of servers out there so how

83
00:08:35,940 --> 00:08:36,719
that works

84
00:08:36,719 --> 00:08:41,820
we have this guy right here called an IP
changer so inside the tibia client there

85
00:08:41,820 --> 00:08:47,850
is a list of login server domain names
and there's a public RSA key with IP

86
00:08:47,850 --> 00:08:52,770
changer does is it changes the RSA key
to a different public key that the OT

87
00:08:52,770 --> 00:08:57,000
server has a private key for just using
right process memory it's pretty simple

88
00:08:57,000 --> 00:09:01,440
as in there is a long string and then it
changes those domain names also using

89
00:09:01,440 --> 00:09:05,610
right process memory to the domain names
that point to the OT login server and

90
00:09:05,610 --> 00:09:09,029
then the OT login server can spit back
its own IP addresses and character list

91
00:09:09,029 --> 00:09:13,290
and then the client will connect to the
game server that way so really our end

92
00:09:13,290 --> 00:09:18,329
goal here is we wanted to create our own
open tibia server but we didn't want to

93
00:09:18,329 --> 00:09:21,870
like do all the hard parts of making the
content we just wanted to rip it off

94
00:09:21,870 --> 00:09:26,220
some people would call that stealing on
call it just very meticulously

95
00:09:26,220 --> 00:09:32,940
documenting the game in formats that can
be used to show the game we're almost

96
00:09:32,940 --> 00:09:33,750
there

97
00:09:33,750 --> 00:09:37,110
if I don't touch it will wear

98
00:09:40,660 --> 00:10:01,990
I'm just gonna switch laptops really
where it really you

99
00:10:09,639 --> 00:10:17,800
and we're gonna roll in a slightly older
version of the renovation it seems like

100
00:10:17,800 --> 00:10:37,149
okay now I want to see the thing again
we're back i'll let this one boot and

101
00:10:37,149 --> 00:10:38,649
we'll talk

102
00:10:38,649 --> 00:10:52,180
doesn't this suck okay try to pull
screening yeah so I'm just going to boot

103
00:10:52,180 --> 00:10:54,969
up this other laptop and then we're
gonna go from here

104
00:10:54,970 --> 00:10:59,079
I'm so sorry Oh windows update

105
00:11:02,110 --> 00:11:05,860
ok let's let's roll without slide before
I think I can I think I can make it

106
00:11:05,860 --> 00:11:06,610
happen

107
00:11:06,610 --> 00:11:14,259
I am so sorry so oh my god there's so
many like gifts and diagrams that I made

108
00:11:14,259 --> 00:11:26,620
and they took me so long and tortuous
killed announce that I'm hdmi going to

109
00:11:26,620 --> 00:11:32,350
vga um I think my laptop is just putting
the power cord know you want me to try

110
00:11:32,350 --> 00:11:35,259
to strike power some don't

111
00:11:35,259 --> 00:11:42,339
oh that's your one here we have one here
also comes up yet . however the adapter

112
00:11:42,339 --> 00:11:44,589
just to see often get the adapter

113
00:11:44,589 --> 00:11:45,529
yeah

114
00:11:45,529 --> 00:11:52,249
oh just make sure that one gets back to
that adapter and vice versa you know I

115
00:11:52,249 --> 00:11:55,279
didn't know that was a thing

116
00:11:55,279 --> 00:11:58,550
look at your table manners when we do is
make sure that Michael gets back to

117
00:11:58,550 --> 00:12:18,680
Christian the top that we have no has GA
which no one has so this guy right here

118
00:12:18,680 --> 00:12:31,339
that's no good i tried it it looks very
similar but it's not ok so let's see if

119
00:12:31,339 --> 00:12:33,920
putting our on this thing work

120
00:12:33,920 --> 00:12:50,269
ok so that is director Stan changes
let's hope this power works this is

121
00:12:50,269 --> 00:12:53,750
really my life right now and I want

122
00:12:53,750 --> 00:13:03,230
well okay going to have yeah let's let's
see so let's talk about how we generated

123
00:13:03,230 --> 00:13:07,490
the map so it's a two-dimensional
tile-based maps you can think of it as

124
00:13:07,490 --> 00:13:11,269
like a two-dimensional array more or
less it's actually three dimensional get

125
00:13:11,269 --> 00:13:12,439
into that soon

126
00:13:12,439 --> 00:13:16,879
it's extremely large so there's roughly
13 million titles on the map that's not

127
00:13:16,879 --> 00:13:21,259
including blank tiles and stuff it's
like four billion square tiles it's

128
00:13:21,259 --> 00:13:27,769
literally like 65 65 thousand by 65,000
nearly so it's really big but there's a

129
00:13:27,769 --> 00:13:30,649
lot of empty tiles and completely
server-side so that's the inherent

130
00:13:30,649 --> 00:13:31,610
problem here

131
00:13:31,610 --> 00:13:36,170
the server stores a map and it gives it
to the client on a need-to-know basis

132
00:13:36,170 --> 00:13:40,219
and there's no way to spoof your
location in the game you can't say i'm

133
00:13:40,220 --> 00:13:42,800
at this place in the game now I'm here
and I'm here so you can teleport around

134
00:13:42,800 --> 00:13:45,469
infinitely fast and get the server to
tell you everything

135
00:13:45,470 --> 00:13:50,959
it controls everything there is so we
need to walk everywhere in the game if

136
00:13:50,959 --> 00:13:55,040
we want to intercept the entire map so
how do we do that

137
00:13:55,040 --> 00:13:58,810
so first let's look at the map structure
so it's this 15

138
00:13:58,810 --> 00:14:04,119
by 13 grid you can kind of see how its
laid out here and it looks like this so

139
00:14:04,120 --> 00:14:09,010
these white tiles are what you saw on
screen these grey tiles are too tight

140
00:14:09,010 --> 00:14:11,410
i'll buffer off-screen so when you move
around

141
00:14:11,410 --> 00:14:14,980
you don't seem like a black space or
anything it'll just load the next row so

142
00:14:14,980 --> 00:14:19,900
if i take a step to the right it will
load a new row here this road will get

143
00:14:19,900 --> 00:14:23,949
added to the on-screen stuff the green
row will get added to the off screen on

144
00:14:23,950 --> 00:14:28,330
the left and it just drops this entire
row same happens if I'm moving down if I

145
00:14:28,330 --> 00:14:31,839
moving diagonal it's a combination of
both but basically as you move around in

146
00:14:31,839 --> 00:14:35,680
this game the server just send you
exactly what you need to know depending

147
00:14:35,680 --> 00:14:40,779
on to what you already had which was a
full screen which you get login so it's

148
00:14:40,779 --> 00:14:44,589
not actually two-dimensional though
because we have 16 floors top floor 0

149
00:14:44,589 --> 00:14:49,839
bottom is 15 ground floor seven and you
can kind of see how even as I'm going up

150
00:14:49,839 --> 00:14:53,410
floors you can see the lower floor so
those must also be kept in memory right

151
00:14:53,410 --> 00:14:57,370
there are some rules for how their
captain memory but due to the display

152
00:14:57,370 --> 00:15:02,560
issues we don't have time for those so
we come to a few conclusions we can

153
00:15:02,560 --> 00:15:06,969
either dump this map from memory and we
know the structure of it in memory but

154
00:15:06,970 --> 00:15:08,110
it's too volatile

155
00:15:08,110 --> 00:15:11,500
it's always changing as you move around
you have to be in sync with the game's

156
00:15:11,500 --> 00:15:15,700
main thread to dump this because it's a
very complex structure it could be

157
00:15:15,700 --> 00:15:18,880
changing half of it when you've already
read it and then you're out of sync

158
00:15:18,880 --> 00:15:24,460
right I can we hook the drawing layer
and just intercept what's being drawn to

159
00:15:24,460 --> 00:15:25,330
the screen

160
00:15:25,330 --> 00:15:28,839
yes that's actually very common when
you're working with games you hook the

161
00:15:28,839 --> 00:15:32,680
stuff that draws sprites and you look at
the sprite IDs you tie those two the

162
00:15:32,680 --> 00:15:35,949
item ids and then you can determine
what's being drawn and we're but it's

163
00:15:35,950 --> 00:15:40,510
very slow doing it that way but can we
intercept the packets and dump the map

164
00:15:40,510 --> 00:15:41,589
information

165
00:15:41,589 --> 00:15:44,890
yes and it's very efficient that's the
way the client gets the data it's the

166
00:15:44,890 --> 00:15:49,630
most most readable serialize form i mean
it's not actually serialize or not text

167
00:15:49,630 --> 00:15:54,400
packets there's a protocol but we can do
it because we know that structure so how

168
00:15:54,400 --> 00:15:58,180
can we intercept the packets a guy
called sharp apptrackr this was actually

169
00:15:58,180 --> 00:16:02,650
written long ago by a guy called Ian
over Miller he's a facebook now used to

170
00:16:02,650 --> 00:16:06,610
be a Microsoft it's an open source
project that does justice and intercept

171
00:16:06,610 --> 00:16:09,379
map pockets but it's all this is like
from 2009 it

172
00:16:09,379 --> 00:16:13,789
out-of-date a lot of stuff has changed
so we're going to use that and where

173
00:16:13,789 --> 00:16:16,579
will get all of our data to be cast
recordings were going to talk about that

174
00:16:16,579 --> 00:16:17,959
in a second and will it work

175
00:16:17,959 --> 00:16:22,160
yes it did so let's look at the
architecture of the two things we just

176
00:16:22,160 --> 00:16:28,009
talked about sharp map tracker is an
open source network proxy that generates

177
00:16:28,009 --> 00:16:33,289
otm map files as the type of map files
used by the server from captured back

178
00:16:33,289 --> 00:16:36,649
packets and we have a fork with
additional functionality which we're

179
00:16:36,649 --> 00:16:39,049
going to talk about and we've also
updated it to work with the latest

180
00:16:39,049 --> 00:16:44,569
version of the game which was important
because it was all so how that works is

181
00:16:44,569 --> 00:16:47,539
it intercepts this connection right here
and intercepts the login server

182
00:16:47,539 --> 00:16:51,709
connection so over rights RSA key in the
tea plant will show source code for this

183
00:16:51,709 --> 00:16:57,138
you can see how it all works too but it
intercepts this RSA connection by

184
00:16:57,139 --> 00:17:01,309
overriding the domain names and RSA key
and overwrites domain names to localhost

185
00:17:01,309 --> 00:17:06,740
it connects to the map tracker with a
custom RSA key that then gets the data

186
00:17:06,740 --> 00:17:10,759
re-encrypt it with the right RSA key and
then send it along

187
00:17:11,299 --> 00:17:16,730
just when it comes when the login server
spits back the domain and bar the IPS

188
00:17:16,730 --> 00:17:20,539
for the game servers it also override
those with localhost and acts as a

189
00:17:20,539 --> 00:17:23,898
man-in-the-middle on the game server
connection that way can intercept the

190
00:17:23,898 --> 00:17:30,049
game server patents and then there's to
be a cast so this is a third-party cast

191
00:17:30,049 --> 00:17:31,908
and replay system for tibia

192
00:17:31,909 --> 00:17:37,669
it works by if one of you guys is
playing the game the entire state of the

193
00:17:37,669 --> 00:17:41,450
game that you know about is there
because the server sent it to you right

194
00:17:41,450 --> 00:17:45,649
it's entirely server-based so you do
something your action goes to the server

195
00:17:45,649 --> 00:17:50,178
the server determines what the world
looks like now in central an update so

196
00:17:50,179 --> 00:17:55,639
the entire picture of the game as
rendered by the client can be deduced

197
00:17:55,639 --> 00:18:00,949
from the pockets so this is basically
like twitch but for this game in that

198
00:18:00,950 --> 00:18:04,519
instead of recording video it records
the packets and then it replays them to

199
00:18:04,519 --> 00:18:07,850
the viewer and there came client
automatically generates the game state

200
00:18:07,850 --> 00:18:12,139
and draws everything so it works similar
to charm apptrackr intercepts all this

201
00:18:12,139 --> 00:18:16,610
stuff up here but instead of processing
the game packets it spits it out to its

202
00:18:16,610 --> 00:18:21,229
own set of servers so this is a
broadcaster and then the viewer taxes

203
00:18:21,230 --> 00:18:22,290
like it doesn't even act as

204
00:18:22,290 --> 00:18:25,350
man-in-the-middle here it just acts as a
login server so you login with no

205
00:18:25,350 --> 00:18:29,070
account number no password and the list
of characters is the list of broadcast

206
00:18:29,070 --> 00:18:33,300
you can watch you connect to a broadcast
and then it connects you to be service

207
00:18:33,300 --> 00:18:36,840
which replaced the packets to you and
you have the whole view of the game so

208
00:18:36,840 --> 00:18:42,570
this is like the main part of our
project and you're going to see why so

209
00:18:42,570 --> 00:18:47,220
what is our plan how are we going to
take this map and duplicate it

210
00:18:47,880 --> 00:18:52,320
we're going to scrape tibia casts
archive and we're going to grab millions

211
00:18:52,320 --> 00:18:57,179
of recorded sessions so this is hundreds
of thousands of people playing the game

212
00:18:57,180 --> 00:19:01,530
over millions of sessions we have all of
those packets ready to be replayed we

213
00:19:01,530 --> 00:19:04,500
don't have to go anywhere we don't have
to play the game all the data is right

214
00:19:04,500 --> 00:19:08,910
there then we're going to rewire sharp
apptrackr to pretend it's the game

215
00:19:08,910 --> 00:19:12,000
client without a game plan we're just
going to connect the map tracker to

216
00:19:12,000 --> 00:19:15,060
columbia cast and replay the packets to
it

217
00:19:15,060 --> 00:19:19,889
no tibia client no drawing no overhead
so we can do this very fast and we're

218
00:19:19,890 --> 00:19:23,670
going to instrument this on a massive
farm and then we're just going to stitch

219
00:19:23,670 --> 00:19:27,330
everything together so of all these
casts will be able to stitch together

220
00:19:27,330 --> 00:19:33,090
all the map data sent to us by the
recorded sessions and then when there's

221
00:19:33,090 --> 00:19:36,659
some places we might have multiple
places that there's different stuff for

222
00:19:36,660 --> 00:19:40,290
the same location we'll just use
majority rules or whatever we saw most

223
00:19:40,290 --> 00:19:44,340
or whatever we saw first is what we use
and stitch it all together we have a map

224
00:19:44,340 --> 00:19:48,090
profite so did it work

225
00:19:48,750 --> 00:19:55,170
it did we had a hundred 30 megabytes of
binary generated that's 12 million tiles

226
00:19:55,170 --> 00:20:00,750
and 16 million items so a tile is
defined as literally the ground tile so

227
00:20:00,750 --> 00:20:05,160
if there's grass it will be like a grass
style but there can be loose items on

228
00:20:05,160 --> 00:20:09,360
top of that like chest and ladders and
decorations and stuff so there were 12

229
00:20:09,360 --> 00:20:14,250
million times with 16 million total
items on the map and we got 121

230
00:20:14,250 --> 00:20:18,210
replication we skipped over a few cities
because we weren't ready to cook the

231
00:20:18,210 --> 00:20:22,500
quest for them yet but for the city's we
wanted and the quest we wanted we had

232
00:20:22,500 --> 00:20:26,790
the exact game map without having to
like play the game without having to sit

233
00:20:26,790 --> 00:20:29,350
there and map it out manually it was
pretty cool

234
00:20:29,350 --> 00:20:34,449
so that was kind of the easy part
because the map formats very

235
00:20:34,450 --> 00:20:39,280
well-documented and then we have stuff
like spawns so sponsors can be thought

236
00:20:39,280 --> 00:20:45,399
of as x y&z locations of a creature so a
game would be pretty boring if you have

237
00:20:45,400 --> 00:20:48,460
no creatures you walk around this empty
map and you do nothing

238
00:20:48,460 --> 00:20:54,700
it's not fun so we need to put monsters
ermita put NBC's there and when you do

239
00:20:54,700 --> 00:20:58,150
this on the OT server is represented as
an xml file with the name of the

240
00:20:58,150 --> 00:21:01,659
creature and its location so that's what
we want to generate but it's very tricky

241
00:21:01,659 --> 00:21:07,360
to perfecting will see why so let's
first look at npcs NPCs are pretty basic

242
00:21:07,360 --> 00:21:12,668
they can't despawn and they're typically
always in the same location they might

243
00:21:12,669 --> 00:21:21,610
be behind a counter or they might be in
a shop what happened we were doing so

244
00:21:21,610 --> 00:21:22,510
well

245
00:21:22,510 --> 00:21:34,510
oh I just wanted to troll me and get our
hands on this again always switch

246
00:21:34,510 --> 00:21:36,549
screens

247
00:21:36,549 --> 00:21:43,870
okay so they're typically in a set
location so determining where we want to

248
00:21:43,870 --> 00:21:47,530
put an npc isn't really a problem
there's very few duplicates to npc stay

249
00:21:47,530 --> 00:21:51,100
in the same place is not a complex game
where like there might be whether in the

250
00:21:51,100 --> 00:21:54,309
game that makes them run away or there
might be situations where you go away

251
00:21:54,820 --> 00:21:58,600
it's pretty simple and that where you
see an npc it might move around a little

252
00:21:58,600 --> 00:22:01,600
bit but it's probably gonna be there

253
00:22:06,280 --> 00:22:12,190
ok so really all we need to know is how
far that npc can wander and where my

254
00:22:12,190 --> 00:22:16,720
spawn monsters are a bit different they
can die because you can kill a monster

255
00:22:16,720 --> 00:22:21,190
right the point of a lot of video games
to go around and hunt monsters you can

256
00:22:21,190 --> 00:22:25,330
kill them they can die they go away that
message stuff up because if we're

257
00:22:25,330 --> 00:22:29,020
looking at a tibia cast and the guys
walking through a place where all the

258
00:22:29,020 --> 00:22:32,470
monsters have already died then we're
going to say there's no monsters there

259
00:22:32,470 --> 00:22:34,809
we need some way of figuring that out

260
00:22:34,809 --> 00:22:39,280
they can also spawn mobs so you don't
just see one demon 00 you don't just

261
00:22:39,280 --> 00:22:40,418
like one demon or

262
00:22:40,419 --> 00:22:44,499
control you see like five trolls are
like three demons together and what

263
00:22:44,499 --> 00:22:48,070
might happen there might be a player who
kills half of those and then the person

264
00:22:48,070 --> 00:22:51,428
on the cast walks by he only sees two
trolls instead of five trolls so how do

265
00:22:51,429 --> 00:22:53,619
we figure all that stuff out

266
00:22:53,619 --> 00:22:56,799
ah now this is just weird

267
00:22:57,399 --> 00:23:04,779
it's doing screen cutting i'm gonna
leave the mouse there i'm tired of

268
00:23:04,779 --> 00:23:05,559
moving it

269
00:23:05,559 --> 00:23:10,239
so what does this mean accurate spawn
locations are important accurate mob

270
00:23:10,239 --> 00:23:18,220
counts are important and these things
are hard much like a V so we're going to

271
00:23:18,220 --> 00:23:23,019
sort of plan we're going to run this at
the same time as the map tracking on the

272
00:23:23,019 --> 00:23:27,039
same farm using the same infrastructure
of multiple tibia cast fit sharp

273
00:23:27,039 --> 00:23:32,230
apptrackr we're going to improve sharp
apptrackr to track the name the unique

274
00:23:32,230 --> 00:23:37,659
identifier and initial location of every
monster so if you have a group of demons

275
00:23:37,659 --> 00:23:41,499
five demons each one will have unique
identifier you kill them all five more

276
00:23:41,499 --> 00:23:44,769
respondents have a different set of
unique idea identifiers from the last

277
00:23:44,769 --> 00:23:48,999
five but they're each unique to the
monster so we track the initial location

278
00:23:48,999 --> 00:24:02,769
for each monster meaning for each unique
identifier and I don't know what now my

279
00:24:02,769 --> 00:24:18,220
screen is just messed up and we were ok
so plan for NPCs we're just gonna

280
00:24:18,220 --> 00:24:23,080
determine the npc location after farm
run using majority rules and we're just

281
00:24:23,080 --> 00:24:26,799
going to allow an npc to wander in a
bounding rectangle of all the positions

282
00:24:26,799 --> 00:24:31,239
that was seen on fnp-c if you imagine if
he's using like here and here and here

283
00:24:31,239 --> 00:24:34,570
and here and it was seen most of the
time right here this is where we'll put

284
00:24:34,570 --> 00:24:38,080
it and will allow to walk around in a
square that encapsulates all the

285
00:24:38,080 --> 00:24:40,989
locations we saw it on that works pretty
well

286
00:24:40,989 --> 00:24:46,779
monsters are a bit harder so the
monsters were going to cluster monsters

287
00:24:46,779 --> 00:24:52,710
with same name in close proximity so
about five tiles away so we see 5 demons

288
00:24:52,710 --> 00:24:56,549
the first one we see we're going to say
this is a new cluster of demons and then

289
00:24:56,549 --> 00:24:59,340
we see another demon within five squares
of that we're gonna add it to that

290
00:24:59,340 --> 00:25:03,899
cluster and then added to that cluster
in that cluster and we're going to do

291
00:25:03,899 --> 00:25:07,020
this multiple times on the same
recording if a player passes the same

292
00:25:07,020 --> 00:25:10,408
location multiple times in a time span
will do it on different recordings will

293
00:25:10,409 --> 00:25:16,049
take all this data and then we'll match
up all the different clusters so we will

294
00:25:16,049 --> 00:25:20,010
match them based on monster named and
centroid location so we calculated

295
00:25:20,010 --> 00:25:24,179
centroid of all the monsters in an area
so if there's a bunch of demons we

296
00:25:24,179 --> 00:25:28,409
basically calculate the central point
where they're standing and then we say

297
00:25:28,409 --> 00:25:32,580
if we have two groups of demons and
their centroids are within like 10

298
00:25:32,580 --> 00:25:34,830
squares or of each other or something
like that

299
00:25:34,830 --> 00:25:37,620
we're going to say those are the same
cluster that we saw at different points

300
00:25:37,620 --> 00:25:43,229
of time and then we'll take the average
size of a cluster plus the standard

301
00:25:43,230 --> 00:25:48,539
deviation divided by two so if sometimes
we saw four demons and sometimes we saw

302
00:25:48,539 --> 00:25:53,309
six demons the average amount of demons
we saw was five standard deviation is

303
00:25:53,309 --> 00:26:05,220
like one ish we divide it around we end
up with five demons they're roughly I

304
00:26:05,220 --> 00:26:10,620
think it just likes to switch which
screen is doing what at random

305
00:26:10,620 --> 00:26:21,600
I think it's time for a new laptop
google chrome crash then on crashed so

306
00:26:21,600 --> 00:26:26,399
we got that how much time do I have
enough time will be good so we did all

307
00:26:26,399 --> 00:26:33,239
of this and we ended up with 58,000
almost 15,000 creatures on the map that

308
00:26:33,240 --> 00:26:37,740
was a hundred twenty-five thousand lines
of code we ended up generating but it

309
00:26:37,740 --> 00:26:38,789
wasn't perfect

310
00:26:38,789 --> 00:26:42,029
npc spawns were great but some changes
had to be made

311
00:26:42,779 --> 00:26:46,140
sometimes there might be an npc with the
same name in two different locations we

312
00:26:46,140 --> 00:26:49,260
didn't account for that mean you would
be easier to do my hand so you might

313
00:26:49,260 --> 00:26:51,210
take a boat to an island and then p

314
00:26:51,210 --> 00:26:54,690
see on the boat on the mainland might be
the same and you see on the boat on that

315
00:26:54,690 --> 00:26:58,409
island because he's the one who took you
there so we had a account for cases like

316
00:26:58,409 --> 00:27:05,669
that manually and then monsters we had a
bunch of weird cases with monsters

317
00:27:05,669 --> 00:27:09,570
sometimes a sponsor far too large
because we took a bunch of different

318
00:27:09,570 --> 00:27:13,260
clusters and match them together and the
treatment of been sometimes sponsor far

319
00:27:13,260 --> 00:27:16,950
too small because they were being
heavily farmed so there's places in the

320
00:27:16,950 --> 00:27:20,760
game that are just always being farmed
always being bought it so if that's the

321
00:27:20,760 --> 00:27:22,620
case no matter what data we have

322
00:27:22,620 --> 00:27:25,350
there's going to be no monsters
therefore there was killing them so

323
00:27:25,350 --> 00:27:30,209
those were far too small we address that
by hand so we basically just a lot of

324
00:27:30,210 --> 00:27:33,419
monster swans by hand but the base was
there we just had to adjust adjust

325
00:27:33,419 --> 00:27:41,669
counts and stuff like that so npc data
now we know where NPCs are but there

326
00:27:41,669 --> 00:27:45,480
needs to be code for nbc's we can see
it's a the NP seen it is standing here

327
00:27:45,480 --> 00:27:56,460
on the map but how do we know what he
does so it'll come back so NBC's do a

328
00:27:56,460 --> 00:28:00,840
few things they wear different outfits
they can move at different speeds so

329
00:28:00,840 --> 00:28:05,039
some might walk really quickly or some
walk really slowly in the game that

330
00:28:05,039 --> 00:28:08,879
matters in some quests and it's kind of
just a nice aesthetic to have so we

331
00:28:08,880 --> 00:28:13,110
wanted to track that stuff they have
trade dialogues displaying the items

332
00:28:13,110 --> 00:28:16,918
that can be bought and sold so I go to
npc and I type high and then I type

333
00:28:16,919 --> 00:28:21,840
trade a dialog pops up showing a list of
all the items that npcs willing to sell

334
00:28:21,840 --> 00:28:25,049
for sell to me and buy from me and at
what cost

335
00:28:25,049 --> 00:28:29,010
so we want that data because shop and
PCs must exist in our version of game

336
00:28:29,010 --> 00:28:33,090
and they can have conversations we can
see these conversations essentially ask

337
00:28:33,090 --> 00:28:36,330
question and answer the player says one
thing

338
00:28:36,330 --> 00:28:40,260
npc said something back or says nothing
player says another thing then peace

339
00:28:40,260 --> 00:28:44,370
either either responder doesn't so we
can record these conversations as like a

340
00:28:44,370 --> 00:28:47,939
question-and-answer dialogue and
automatically plug these into the npc

341
00:28:47,940 --> 00:28:51,899
scripts the assumption is a lot everyone
playing the game will talk to every NPC

342
00:28:51,899 --> 00:28:58,979
of these once so most of the stuff we
can get that way about to come back or

343
00:28:58,980 --> 00:29:00,150
not

344
00:29:00,150 --> 00:29:06,840
ok so we're going to run this at the
same time as other things on our

345
00:29:06,840 --> 00:29:07,949
tracking farm

346
00:29:07,950 --> 00:29:11,100
we're also going to improve our track
again to track outfit speeds trade

347
00:29:11,100 --> 00:29:15,419
dialogues and conversations for each npc
we're going to do that data sensors no

348
00:29:15,420 --> 00:29:20,310
variations so if there's one npc that
every single person talk to and every

349
00:29:20,310 --> 00:29:25,470
single cast recording that we had we
really don't care because it's all the

350
00:29:25,470 --> 00:29:30,180
same so we just do you take the first
instance of each line from each npc and

351
00:29:30,180 --> 00:29:33,570
then from the deep data automatically
going to generate Lewis scripts which is

352
00:29:33,570 --> 00:29:37,950
a language used their for each npc so
the outfit speed is pretty simple those

353
00:29:37,950 --> 00:29:42,540
are just the combination of numbers the
question and answers are put into a lua

354
00:29:42,540 --> 00:29:49,830
table and yeah and the buy/sell list is
also a table is Ellis we also catch with

355
00:29:49,830 --> 00:29:55,949
the map tracker so 873 npcs we
automatically generated all the

356
00:29:55,950 --> 00:30:00,090
conversations we automatically generated
all their outfits everything that we

357
00:30:00,090 --> 00:30:04,379
needed to make the game seemed like a
game however a lot of conversations that

358
00:30:04,380 --> 00:30:07,950
you have with NPCs and video games are
related to quests some things you just

359
00:30:07,950 --> 00:30:13,290
can't say to an npc unless you unlock to
start request some things they won't say

360
00:30:13,290 --> 00:30:16,800
to you unless you've unlocked a certain
quests and sometimes saying something to

361
00:30:16,800 --> 00:30:22,350
an NDC unlocks a quest that was i I
don't know any algorithms that can do

362
00:30:22,350 --> 00:30:26,310
that automatically so we did that by
hand afterwards we basically made our

363
00:30:26,310 --> 00:30:30,120
code generator leave blank spaces there
we just plugged in a few numbers when

364
00:30:30,120 --> 00:30:31,649
coding quest by hand

365
00:30:31,650 --> 00:30:35,580
yes some npcs exist in multiple
locations and behave differently in each

366
00:30:35,580 --> 00:30:40,409
so going back to the previous example
that boat and pc on the mainland might

367
00:30:40,410 --> 00:30:43,110
say a certain set of things and on the
island might say different side of

368
00:30:43,110 --> 00:30:46,919
things we fix that manually is coming up
with an algorithm would take twice as

369
00:30:46,920 --> 00:30:51,720
long as actually just fixing it and then
we also just that outfit and speed data

370
00:30:51,720 --> 00:30:55,440
that we got for the NPC's we also just
grab it for monsters because why not

371
00:30:55,440 --> 00:31:01,110
monsters also have that data we plug
that into our monsters some of them cast

372
00:31:01,110 --> 00:31:05,909
case spells so hate spell speed them up
so we just took the highest speed we saw

373
00:31:05,910 --> 00:31:09,240
for each unique monster now we're
talking unique monster by name

374
00:31:09,240 --> 00:31:14,340
so we took let's say all the speeds that
we saw a demon have we threw away the

375
00:31:14,340 --> 00:31:18,600
maximum one average them together use
that as its base speed and then we added

376
00:31:18,600 --> 00:31:24,270
at a spell to code saying it can cast a
spell and the moat the high-speed we

377
00:31:24,270 --> 00:31:28,139
ever saw is a speed we gave it for the a
spells so we automatically generated

378
00:31:28,140 --> 00:31:32,850
some part of monsters there and then
some non-negligible back up non

379
00:31:32,850 --> 00:31:38,370
negligible amount of data was gathered
by scraping a wiki website that's kept

380
00:31:38,370 --> 00:31:43,379
really up-to-date with some npc stuff
and some monster stuff i would go into

381
00:31:43,380 --> 00:31:48,030
detail on that but the talks too long I
didn't have time but you can just think

382
00:31:48,030 --> 00:31:53,670
we w get a bunch of pages and then we
throw rag fact red X at them then we

383
00:31:53,670 --> 00:31:57,930
grab the results of the red X we plug it
into our scripts and work done there was

384
00:31:57,930 --> 00:32:05,730
a lot of data there but yeah so now item
data so items are combination of

385
00:32:05,730 --> 00:32:09,150
multiple things and items are one of the
most important things in the games you

386
00:32:09,150 --> 00:32:11,550
have a sword and it doesn't do anything

387
00:32:11,550 --> 00:32:15,930
it's a shitty sore you can't use it so
we need to know all of the data about is

388
00:32:15,930 --> 00:32:19,890
not just swords we're talking like
chests we're talking decorations you can

389
00:32:19,890 --> 00:32:24,570
put your house we're talking potions all
of these things have attributes such as

390
00:32:24,570 --> 00:32:30,810
the item identify our name the sprites
that will be used to draw that item a

391
00:32:30,810 --> 00:32:35,970
type so is it a piece of ground is it a
weapon is it a border on the ground so

392
00:32:35,970 --> 00:32:39,300
basically something that matches two
rounds together seamlessly and looks

393
00:32:39,300 --> 00:32:39,990
nice

394
00:32:39,990 --> 00:32:43,740
is it an armor isn't a helmet what is it
then there might be a text description

395
00:32:44,700 --> 00:32:48,840
how much does it weigh so you can pick
up an item it weighs something because

396
00:32:48,840 --> 00:32:53,760
you can't just get infinite amounts of
stuff on and then how much it costs to

397
00:32:53,760 --> 00:32:58,500
sell it or buy it from an npc and then
it can have many different stats so it

398
00:32:58,500 --> 00:33:03,390
can have zero or many of attack defense
tak modifier defense modifier speed

399
00:33:03,390 --> 00:33:07,380
skill level magick level increase level
increase level requirement a bunch of

400
00:33:07,380 --> 00:33:13,110
other stuff so the name sprites
animations are handled by the client we

401
00:33:13,110 --> 00:33:17,340
give the client a number and it knows
its supposed to draw this thing it's

402
00:33:17,340 --> 00:33:19,070
supposed to have this name

403
00:33:19,070 --> 00:33:23,000
and an animated that way and the npc
stuff

404
00:33:23,000 --> 00:33:27,259
the purchase and resale value we had
from tracking the trade dialogues on NBC

405
00:33:27,259 --> 00:33:31,279
so we just kind of clone that data over
and the rest of the information is

406
00:33:31,279 --> 00:33:34,340
server cited so how do we get this
information

407
00:33:34,340 --> 00:33:37,399
it's all in the server side on a
need-to-know basis

408
00:33:37,970 --> 00:33:41,960
so how do you get this from the server
you shift and click on an item it gives

409
00:33:41,960 --> 00:33:47,000
you text that looks like this you can
see 1850 you see a fire sword attack 24

410
00:33:47,000 --> 00:33:52,370
physical plus 11 fire defense 20 plus 1
it can only be wielded by players of

411
00:33:52,370 --> 00:33:58,189
level 50 or higher 23 ounces the blade
is magic flow there's a large variation

412
00:33:58,190 --> 00:34:03,379
of different strings for different types
of items and different types of stats we

413
00:34:03,379 --> 00:34:07,730
wrote a lot of wrecks for this so if you
don't know what Rex is it's a pattern

414
00:34:07,730 --> 00:34:11,418
matching language you write a pattern
that matches some strange you say the

415
00:34:11,418 --> 00:34:17,210
string first starts with any characters
that arts of opening parentheses and

416
00:34:17,210 --> 00:34:21,829
then you'll see ATK and then you'll see
a colon and then you put parentheses say

417
00:34:21,829 --> 00:34:26,240
i want to capture this value and / d +
means any amount of digits and that'll

418
00:34:26,239 --> 00:34:29,719
capture the attack on that string right
so we brought a bunch of different right

419
00:34:29,719 --> 00:34:33,408
axis to capture all the stuff from all
the different variations of strings like

420
00:34:33,409 --> 00:34:40,220
this and then on our past farm we just
intercepted all the luck messages and

421
00:34:40,219 --> 00:34:44,629
ran the red X but this wasn't sufficient
because people who are playing the game

422
00:34:44,629 --> 00:34:47,960
and broadcasting up they are running
around like let me look at all of my

423
00:34:47,960 --> 00:34:51,319
items they know what their items do
people want to watch them play the game

424
00:34:51,319 --> 00:34:56,000
so we had very I don't know the number
but it was like less than five percent

425
00:34:56,000 --> 00:35:00,380
of the items that we needed had been
looked at our past farm so what are we

426
00:35:00,380 --> 00:35:01,430
gonna do about this

427
00:35:01,430 --> 00:35:09,828
how can we track the remaining items
incoming example . so come on it'll come

428
00:35:09,829 --> 00:35:13,819
back so we're going to use example .
example bought is the box i wrote for

429
00:35:13,819 --> 00:35:18,920
the game and let me just get it on the
slide that we need so when it comes back

430
00:35:18,920 --> 00:35:21,920
we will have it

431
00:35:24,680 --> 00:35:54,290
you're aggressive just like it again
variation turn it on and off again

432
00:35:57,470 --> 00:36:05,089
ok we're back so no bot is the
longest-running active bought for tibia

433
00:36:05,089 --> 00:36:08,210
and open tibia it was made by me

434
00:36:08,210 --> 00:36:11,660
it automates gameplay reads memory
captures packets and it's luis

435
00:36:11,660 --> 00:36:16,368
scriptable the Lewis script ability is
really what we used here so if you

436
00:36:16,369 --> 00:36:20,270
imagine the tibia clients this guy right
here it takes data from login server

437
00:36:20,270 --> 00:36:24,890
takes data from game server takes mouse
and keyboard input it does some stuff

438
00:36:24,890 --> 00:36:29,420
with it and then it spits it out your
computer monitor a very bad diagram but

439
00:36:29,420 --> 00:36:34,040
this is what it looks like when example
. subjected so I intercept all network

440
00:36:34,040 --> 00:36:38,599
data all mouse and keyboard input i have
all my own logic down here I intercept

441
00:36:38,599 --> 00:36:42,710
stuff from the gamestate by reading
memory when the game tries to draw stuff

442
00:36:42,710 --> 00:36:46,099
with the graphics engine i hook a bunch
of functions so i can see everything

443
00:36:46,099 --> 00:36:50,119
that's being drawn and then before and
after its drawn i can draw my own stuff

444
00:36:50,119 --> 00:36:54,710
on top so it gives us god mode in the
game really what we're going to use here

445
00:36:54,710 --> 00:37:00,950
is our drawing layer so drawing stuff on
and then the gamestate memory reading

446
00:37:00,950 --> 00:37:07,790
for met reading map data in the live
memory and then the loo engine so this

447
00:37:07,790 --> 00:37:11,000
is our backup plan so we already had our
plan it failed there wasn't enough stuff

448
00:37:11,000 --> 00:37:15,170
being looked at on tibia cast we need a
backup plan that was to write an example

449
00:37:15,170 --> 00:37:19,130
bot script highlight any items that were
in our data set so this script would

450
00:37:19,130 --> 00:37:23,569
basically open our file that defines all
the items that our server had it would

451
00:37:23,569 --> 00:37:28,430
read them and it would say okay what
information are we lacking and then if

452
00:37:28,430 --> 00:37:32,210
we see an item pop up in the game that
we don't have in our data set is just

453
00:37:32,210 --> 00:37:34,510
going to highlight its going to put a
little square around it

454
00:37:34,510 --> 00:37:38,440
and we'll see that we don't have that
item and then we can look at it we just

455
00:37:38,440 --> 00:37:39,820
look at it manually

456
00:37:39,820 --> 00:37:42,430
why does an example . do it
automatically while we were doing this

457
00:37:42,430 --> 00:37:46,419
on high level characters and doing it
automatically can get us banned because

458
00:37:46,420 --> 00:37:49,960
there's a lot of stuff on the map that
the player can actually click on because

459
00:37:49,960 --> 00:37:53,710
it's obstructed by roofs or like
different floors on the map and stuff

460
00:37:53,710 --> 00:37:57,220
and the bar doesn't go through the whole
thing like as a player you click on

461
00:37:57,220 --> 00:37:58,000
stuff

462
00:37:58,000 --> 00:38:01,630
the Bob doesn't do that it just sends
packets so it could potentially send

463
00:38:01,630 --> 00:38:04,720
packets the player never would have sent
we're doing all this stuff on our

464
00:38:04,720 --> 00:38:07,899
high-level characters we send bad
packets we get back so we decided to

465
00:38:07,900 --> 00:38:12,280
just do manual I'm so and then what we
did is we wrote a script that when we

466
00:38:12,280 --> 00:38:16,780
get an incoming look message we save
that to a file and then we just ran our

467
00:38:16,780 --> 00:38:18,520
reg axes and later

468
00:38:18,520 --> 00:38:23,620
so basically it was this process of play
the game see stuff that's highlighted

469
00:38:23,620 --> 00:38:27,640
click on it it saves all the message we
get to a file and then we run that

470
00:38:27,640 --> 00:38:31,450
through our Rex's later right and we
just keep doing that doing that doing

471
00:38:31,450 --> 00:38:38,109
that narrowing down the list of items
and we're done so it took a while I

472
00:38:38,110 --> 00:38:42,100
didn't do this part luckily this was
done mostly by a guy named nico his name

473
00:38:42,100 --> 00:38:47,799
was on the first slide german guy very
smart and very dedicated such that there

474
00:38:47,800 --> 00:38:51,550
are twenty-three thousand items in the
game and he probably walked around and

475
00:38:51,550 --> 00:38:55,750
looked at like nineteen thousand items
just clicking on them every time the box

476
00:38:55,750 --> 00:38:56,950
that I don't know what this is

477
00:38:56,950 --> 00:39:03,730
and eventually we had 52 thousand lines
of xml generated we had twenty-four

478
00:39:03,730 --> 00:39:08,920
thousand items tract and we also had
about a megabyte of a binary item data

479
00:39:08,920 --> 00:39:12,310
generated so there's two different file
types there's a binary file that does

480
00:39:12,310 --> 00:39:15,730
like attributes like attack and defense
stuff and as then there's an XML which

481
00:39:15,730 --> 00:39:19,930
does like description and some other
stuff I don't know why there's two files

482
00:39:19,930 --> 00:39:26,020
for it but and then let's just combine
the results that we got from that so we

483
00:39:26,020 --> 00:39:29,080
ended up generating a hundred 30
megabytes map data we already saw that

484
00:39:29,080 --> 00:39:34,840
combining the thailand item counts
almost 30 million items were tracked so

485
00:39:34,840 --> 00:39:39,850
here's some rough back-of-the-envelope
math and i forgot i was using markdown

486
00:39:39,850 --> 00:39:43,029
so there's actually supposed to be a
multiply here and multiply here but they

487
00:39:43,030 --> 00:39:45,630
don't show up because they ended up just
italicized 15

488
00:39:45,630 --> 00:39:51,690
um I added this is the last minute right
before the talk so the screen as we saw

489
00:39:51,690 --> 00:39:57,990
is 19 x 15 tiles and then we could story
floors in memory of time on just some

490
00:39:57,990 --> 00:40:02,819
rough math about ninety percent of
screens when I say screens were talking

491
00:40:02,819 --> 00:40:07,740
about just that 19 x 15 grid on any
floor is empty space so we're going to

492
00:40:07,740 --> 00:40:10,950
multiply by 10 at the end and we're
gonna take our 12,000 tiles that we

493
00:40:10,950 --> 00:40:16,078
tracked we're gonna divide by the amount
of times we see / screen then x 10

494
00:40:16,079 --> 00:40:21,059
because it's only about their about 90%
empty we can see about 55,000 screens

495
00:40:21,059 --> 00:40:25,769
had to be seen that's 55,000 unique
non-overlapping locations in the game

496
00:40:25,769 --> 00:40:31,470
that we had to see to generate all this
data so in our millions of tibia cast

497
00:40:31,470 --> 00:40:35,098
that we watched there was a lot of
diversity in there and there's very few

498
00:40:35,099 --> 00:40:39,329
places that we didn't catch on tibia
casserole few but a lot of places we

499
00:40:39,329 --> 00:40:44,849
caught so then we've already discussed
this 57,000 feature spawned response on

500
00:40:44,849 --> 00:40:52,470
xml 225,000 lines then 23,000 items we
just saw that 873 npcs track with over

501
00:40:52,470 --> 00:40:57,269
9000 lines of conversations so the
conversation between NPCs and players we

502
00:40:57,269 --> 00:41:02,098
auto-generate it is somewhere over 9000
it I couldn't give you an exact number

503
00:41:02,099 --> 00:41:05,700
because a lot of that was modified when
he went plugged in quests and we didn't

504
00:41:05,700 --> 00:41:11,339
keep the information of where it was at
on and then 899 monsters tracked so

505
00:41:11,339 --> 00:41:14,549
really when I say tracked we got the
speed and outfit from the server when

506
00:41:14,549 --> 00:41:18,180
we're doing in DC data the rest of the
stuff was automatically generated from

507
00:41:18,180 --> 00:41:22,500
tibia . wikihow.com which we did by w
getting a bunch of crap and that red

508
00:41:22,500 --> 00:41:28,319
xing it and this is what our private get
home depot looks like so we have a

509
00:41:28,319 --> 00:41:32,099
hundred 31,000 committed you'll see like
deletions but that's just where

510
00:41:32,099 --> 00:41:36,240
overriding the stock information that
comes with the server with our own so it

511
00:41:36,240 --> 00:41:39,689
comes with some data and what we call
the data pack we replaced it with all

512
00:41:39,690 --> 00:41:46,049
our stuff so you see 430,000 from riding
this is the guy who did all of the item

513
00:41:46,049 --> 00:41:51,809
looking at stuff that's why he's got so
many lines 41,000 from this guy 672

514
00:41:51,809 --> 00:41:54,400
thousand from him hundred 31,000 there

515
00:41:54,400 --> 00:41:58,869
and then 1000 here this was a guy who
just did the changes to sharp apptrackr

516
00:41:58,869 --> 00:42:03,069
so about a hundred or a thousand lines
of code change in sharm apptrackr to

517
00:42:03,069 --> 00:42:06,788
make it do what we needed to do on this
is including the scripts that we used to

518
00:42:06,789 --> 00:42:10,510
paste it to like connect everything
together those are just like a bunch of

519
00:42:10,510 --> 00:42:16,420
wacky python scripts or whatever we
needed at the time and resources this

520
00:42:16,420 --> 00:42:20,470
presentation I mean if you can't get all
three of these just get the presentation

521
00:42:20,470 --> 00:42:24,339
link it's on github written in markdown
don't know why it needed but people do

522
00:42:24,339 --> 00:42:29,020
this so I'm doing it to our open tibia
this is a couple hundred thousand lines

523
00:42:29,020 --> 00:42:33,430
of code if you ever want to know how
game server is made or if you want to

524
00:42:33,430 --> 00:42:37,180
just play with making your own game
server get in to game development it's

525
00:42:37,180 --> 00:42:40,720
not a really advanced game but it's
really fun to play with its what started

526
00:42:40,720 --> 00:42:45,490
me encoding and hacking so the Forgotten
server is on github all the codes there

527
00:42:45,490 --> 00:42:50,470
and then our edition of sharp apptrackr
is also on github with some of the

528
00:42:50,470 --> 00:43:02,439
changes we've made and questions no
questions okay it went out again

