1
00:00:00,000 --> 00:00:10,530
well be God ok guys let's get started

2
00:00:11,849 --> 00:00:19,170
who ok so we're going to be talking
about thinking purple just a bit of

3
00:00:19,170 --> 00:00:25,019
information about who i am i'm an
open-source guy have written open source

4
00:00:25,019 --> 00:00:32,610
tools in many languages have a couple of
projects should feedback

5
00:00:34,480 --> 00:00:38,050
okay okay you guys hear me

6
00:00:38,620 --> 00:00:43,180
cool perfect so I read a bunch of tools
mainly implied them

7
00:00:43,180 --> 00:00:49,180
Ruby powershell bash I'm kind of like a
jack of all trades master of none so I

8
00:00:49,180 --> 00:00:53,650
typically like just picking new
languages writing tools anything that

9
00:00:53,650 --> 00:00:56,860
will fit the bill for my needs

10
00:00:56,860 --> 00:01:02,290
so many of my tools have been mainly
gear red teaming others have been geared

11
00:01:02,290 --> 00:01:08,020
at blue team lately been quite active
right now with several blue teams are

12
00:01:08,020 --> 00:01:14,110
red team's consulting with them and it
should add i contributed Metasploit

13
00:01:14,110 --> 00:01:18,009
framework I was one of the members of
the board at p test

14
00:01:18,009 --> 00:01:23,710
I'm part off city consortium Perico we
do try to help the community learn about

15
00:01:23,710 --> 00:01:26,979
security we run b-sides Perico over
there

16
00:01:26,979 --> 00:01:32,500
I'm a microsoft MVP for cloud management
and my day job

17
00:01:33,429 --> 00:01:38,410
it's kinda boring i matter i'm a manager
my day job I'm a director of reverse

18
00:01:38,410 --> 00:01:42,250
engineering I've manager a group of
people that are ten times smarter than

19
00:01:42,250 --> 00:01:44,470
me which is awesome

20
00:01:44,470 --> 00:01:50,649
they make me look good most about castor
and on the side i am a trainer and

21
00:01:50,649 --> 00:01:56,830
consultant so i spent pto for me is part
time office instead of great time off

22
00:01:56,830 --> 00:02:01,450
typically just fly around doing training
classes and offensive and defensive

23
00:02:01,450 --> 00:02:05,590
techniques so that means so the agenda
for the presentation is going we're

24
00:02:05,590 --> 00:02:12,400
going to talk of what is read my take on
red they take on red of many of the red

25
00:02:12,400 --> 00:02:18,610
teams that have been working with likely
what is blue and why do we consider

26
00:02:18,610 --> 00:02:23,680
purple or purple teaming were thinking
about purple we're going to talk about

27
00:02:23,680 --> 00:02:27,400
the current situation right now
insecurity between red and blue

28
00:02:27,400 --> 00:02:32,260
I hope how they talk with operations and
then we're going to go through the

29
00:02:32,260 --> 00:02:36,340
engagement types one of the things i
noticed that as i was talking with this

30
00:02:36,340 --> 00:02:40,629
big boards on how do they do their red
team and blue team and how they work

31
00:02:40,629 --> 00:02:43,810
together all of them follow the same
path

32
00:02:43,810 --> 00:02:48,730
pattern after they have meeting their
heads against the table after a couple

33
00:02:48,730 --> 00:02:53,500
of years building those teams and all of
them kind of set in that start pouring

34
00:02:53,500 --> 00:02:59,800
typically tends to beat three different
types of engagements and then some

35
00:02:59,800 --> 00:03:04,989
general recommendations on how to make
blue and red work better together and I

36
00:03:04,989 --> 00:03:09,760
know that you guys are gonna hate this
word but metrics how do we measure stuff

37
00:03:09,760 --> 00:03:15,459
to commit to make sure that stuff works
like it should be so let's start first

38
00:03:15,459 --> 00:03:21,130
of what is Fred now when we're looking
at red uh I just went to a very good

39
00:03:21,130 --> 00:03:23,470
friend of mine Justin Warner sixth up

40
00:03:23,470 --> 00:03:28,359
he works at first group is a pretty
smart guy he used to work at the Air

41
00:03:28,360 --> 00:03:34,209
Force he has friends r an adventure for
red team's he brought run see red team

42
00:03:34,209 --> 00:03:39,970
at first the atd group these guys are
awesome and so when I went to him is my

43
00:03:39,970 --> 00:03:45,700
subject matter expert on it and I like
hey Justin what is red and what he said

44
00:03:45,700 --> 00:03:52,298
is an internal independent team that
performs emulation of adversarial

45
00:03:52,299 --> 00:04:00,730
tactics techniques and procedures the
best to test plans and systems the the

46
00:04:00,730 --> 00:04:06,970
way they may actually be defeated by an
aggressor to challenge plants and

47
00:04:06,970 --> 00:04:11,920
improve decision-making process so we'll
look at it it typically balls down that

48
00:04:11,920 --> 00:04:16,539
typically if you have to put it it will
be anything it should be an internal

49
00:04:16,539 --> 00:04:21,639
team many organizations actually do not
have talked with people all the way from

50
00:04:21,639 --> 00:04:25,840
Microsoft General Electric ball and
different companies and yeah they have

51
00:04:25,840 --> 00:04:30,159
to budget but also the memory of my
clients out there do not want talking

52
00:04:30,160 --> 00:04:34,450
with them they were telling me like what
no my red team is the guy or company

53
00:04:34,450 --> 00:04:39,550
that I hired to come in and do this type
of work and I was like hmm so we need a

54
00:04:39,550 --> 00:04:44,530
better way of hiring regimen our red
team's because typically what you get is

55
00:04:44,530 --> 00:04:48,940
you get your puppy mill pentest chop
that they go out they grabbed a bunch of

56
00:04:48,940 --> 00:04:53,080
kids in there over to tech training they
come back there are two monkeys they

57
00:04:53,080 --> 00:04:53,510
only

58
00:04:53,510 --> 00:04:58,550
tools & and you can quickly tell if
you're getting one of those because

59
00:04:58,550 --> 00:05:04,340
don't go in till when asked about your
business how to operate how do you make

60
00:05:04,340 --> 00:05:09,020
money how hard to keep people in your
environment just go in with a

61
00:05:09,020 --> 00:05:12,109
prepackaged just hooked up with
prepackaged proposal

62
00:05:12,110 --> 00:05:16,850
here's the pen test for 40 hours we want
how you want for two weeks here steep

63
00:05:16,850 --> 00:05:22,040
price and the proposal for 80 instead of
going through that work you see that

64
00:05:22,040 --> 00:05:27,770
those are red flags kick them out to the
curb and typically did won't simulate

65
00:05:27,770 --> 00:05:34,640
actual TTP's of real attackers red is
not let's hack and break shit even

66
00:05:34,640 --> 00:05:39,979
though they do as part of their job that
is how did a do it

67
00:05:39,980 --> 00:05:49,040
their job is to emulate a real-world
attacker also um their job is to

68
00:05:49,040 --> 00:05:53,930
challenge current procedures so one of
the things that we're looking with red

69
00:05:53,930 --> 00:06:01,760
is that red is the devil aplicado of
your organization so if we look back at

70
00:06:01,760 --> 00:06:05,719
history of red team's one of the first
red team's that you're going to see

71
00:06:05,720 --> 00:06:13,010
there was back when the Catholic Church
was having a problem of too many saints

72
00:06:13,010 --> 00:06:18,680
they came out with the concept of the
devil's advocate and devils advocate

73
00:06:18,680 --> 00:06:23,450
would be that person that would
challenge the people that want no we

74
00:06:23,450 --> 00:06:25,370
want to make this guy a saint

75
00:06:25,370 --> 00:06:29,870
why he make this he made that and he
would come in and challenge that notion

76
00:06:29,870 --> 00:06:34,670
he was his worst the evidence was your
lineup far what about if it is this

77
00:06:34,670 --> 00:06:35,750
other thing

78
00:06:35,750 --> 00:06:39,470
what if it didn't do that and do it this
way what if that wasn't a miracle was

79
00:06:39,470 --> 00:06:41,150
just plain luck

80
00:06:41,150 --> 00:06:45,679
what if that person actually took some
type of herb and that is what cured him

81
00:06:45,680 --> 00:06:52,550
he was the devil's advocate that is what
a red team is actually supposed to be 30

82
00:06:52,550 --> 00:06:56,570
guys that have to think not be
institutionalized in your environment

83
00:06:56,570 --> 00:07:02,719
and they're the guys that are going to
help you add that level of thinking in

84
00:07:02,720 --> 00:07:06,920
your environment so typically they'll
conduct a search of her off

85
00:07:06,920 --> 00:07:12,230
regions the first was very simple
comparative engagements second one is

86
00:07:12,230 --> 00:07:18,890
Fred emulation fourth one is a super
sorry first one communication and second

87
00:07:18,890 --> 00:07:23,300
one thread emulation third one adversary
emulation they'll behave like a never

88
00:07:23,300 --> 00:07:28,070
carry and then at the very end is a full
scope assessment they'll be doing

89
00:07:29,030 --> 00:07:34,159
no holds bar let's set out let's plan
what we're going to attack lose doesn't

90
00:07:34,160 --> 00:07:35,960
know what was coming

91
00:07:35,960 --> 00:07:38,930
we're going to decide what we're going
to do that over our release and then

92
00:07:38,930 --> 00:07:43,940
we're going to engage and see how they
behave and also they're the guys that do

93
00:07:43,940 --> 00:07:48,770
recent assessment of new technologies
and so many times when we think about

94
00:07:48,770 --> 00:07:53,659
red was thinking about the sexy i'll let
me back and we forget that there's a lot

95
00:07:53,660 --> 00:07:59,780
of other stuff that red should be doing
or should do now when it came to blue

96
00:07:59,780 --> 00:08:03,260
what i did is i asked by my girlfriend
they fall

97
00:08:03,260 --> 00:08:09,860
hey Dave what is blue dave was one of
the guys in the office 365 blue team he

98
00:08:09,860 --> 00:08:12,650
worked at verizon as part of their blue
team

99
00:08:12,650 --> 00:08:16,219
he's one of the said that he was a
science instructor here and ascends blog

100
00:08:16,220 --> 00:08:21,230
on the fear for for many years so it's
quite experienced with when it comes to

101
00:08:21,230 --> 00:08:24,410
being a blue team ER and what he
actually told me his blue team is the

102
00:08:24,410 --> 00:08:29,000
team responsible for monitoring and
sending an organization's information

103
00:08:29,000 --> 00:08:34,429
assets and this actually includes
investigation investigating and

104
00:08:34,429 --> 00:08:39,709
remediating security incidents so
typically what they're doing is that

105
00:08:39,710 --> 00:08:43,130
they're hunting in the network they're
looking for that presence of that

106
00:08:43,130 --> 00:08:49,520
attacker you're hunting the hunters
that's their nature trackers I don't

107
00:08:49,520 --> 00:08:53,180
know about you but I do find that sexy
at least in blue I know that a lot of

108
00:08:53,180 --> 00:08:54,949
people say blues not sexy

109
00:08:54,950 --> 00:08:59,060
well my experience has been when I have
dealt with blue teams are properly set

110
00:08:59,060 --> 00:09:04,280
properly trained and they have support
from management it can be very damn sexy

111
00:09:04,950 --> 00:09:09,330
one of the things that they typically
tend to do that they develop those

112
00:09:09,330 --> 00:09:15,780
procedures that the organization should
follow in the case of reach and they try

113
00:09:15,780 --> 00:09:21,900
to be as flexible as possible they break
out those this procedures into small

114
00:09:21,900 --> 00:09:27,240
chunks stood so they're not tied down by
a playbook that they have to follow a

115
00:09:27,240 --> 00:09:29,670
prescriptive playbook they set up those
procedures

116
00:09:29,670 --> 00:09:34,560
ok we have this environment IOC's dis
attackable guy we're looking for looking

117
00:09:34,560 --> 00:09:38,459
at a knowledge base ok this is the IOC
this is how with other information and

118
00:09:38,460 --> 00:09:42,900
they keep as some very cool that many
red teamers would kill to have access to

119
00:09:42,900 --> 00:09:51,600
in terms of TPS of actors and one of the
things that almost everybody fails on is

120
00:09:51,600 --> 00:09:56,490
they work with the red team to validate
new risks and inside of the environment

121
00:09:56,490 --> 00:10:04,620
and many times what we've also seen is
that a lot of failure when they working

122
00:10:04,620 --> 00:10:10,740
were bred to bring all of the tools of
those techniques and teach them out

123
00:10:10,740 --> 00:10:15,150
teach distress but what we're currently
seen as well talk later in the current

124
00:10:15,150 --> 00:10:24,420
situation is that they don't talk that
much so and one of the biggest missing

125
00:10:24,420 --> 00:10:29,310
parts is that blue is the guys at work
with operations 30 guys that interface

126
00:10:29,310 --> 00:10:34,680
with the operations team to get stuff
done so they're the ones that help them

127
00:10:34,680 --> 00:10:37,290
develop those plans for his response

128
00:10:37,290 --> 00:10:42,599
how do we recovered from attack and dirt
also the guys at work with operations to

129
00:10:42,600 --> 00:10:47,460
keep that stuff updated i know it sounds
boring i know the hunting party is too

130
00:10:47,460 --> 00:10:52,950
cool part but then again already made
you have to write reports that's not fun

131
00:10:52,950 --> 00:10:57,480
many times you have to do tabletops and
you don't like tabletops we tend to not

132
00:10:57,480 --> 00:10:59,130
be very social

133
00:10:59,130 --> 00:11:02,340
so um how about purple

134
00:11:03,660 --> 00:11:06,959
now we're going to purple

135
00:11:07,920 --> 00:11:14,010
oh we want to be cold so purpose
actually that's a biotic relationship

136
00:11:14,010 --> 00:11:15,870
between red and blue

137
00:11:15,870 --> 00:11:21,630
how can we work together how can we be
good brothers to each other and work to

138
00:11:21,630 --> 00:11:25,020
make sure that the organization secure
because many times I've ever seen as we

139
00:11:25,020 --> 00:11:29,340
seem petty fights between them and they
forget that both of their jobs is to

140
00:11:29,340 --> 00:11:38,820
help an actual organization operate also
purple is when both of them are working

141
00:11:38,820 --> 00:11:47,340
to i would say improve how your
organization reacts to an actual attack

142
00:11:47,340 --> 00:11:56,130
to typically when we were talking about
purple purple is when red operates

143
00:11:56,130 --> 00:12:04,230
openly so blue can make sure that no
risk dismissed so red is operating we're

144
00:12:04,230 --> 00:12:10,050
finding stuff we come into blue we're
doing our debrief blue goes first

145
00:12:10,050 --> 00:12:14,640
started showing up all this is all stuff
that we found red snickering like you

146
00:12:14,640 --> 00:12:19,890
miss this units that up at the end read
it has to open the kimono like you're

147
00:12:19,890 --> 00:12:22,830
not and say this is how we get all our
stuff

148
00:12:22,830 --> 00:12:27,780
this is our tools you didn't pick off
those desirous ease then comes in blue

149
00:12:27,780 --> 00:12:34,470
they improve their techniques red comes
and they get in again blue shows and we

150
00:12:34,470 --> 00:12:39,360
want that gap between meantime of
detection type of resolve to kind of

151
00:12:39,360 --> 00:12:43,470
each order so a suit

152
00:12:45,000 --> 00:12:49,620
purple is really us working together so
this is how it would actually look like

153
00:12:49,620 --> 00:12:55,440
blue and and read to each other we learn
from each other each one improves and

154
00:12:55,440 --> 00:12:59,970
then that time symbiotic relationship
between them feet operations and all of

155
00:12:59,970 --> 00:13:03,780
the different teams and operations and
they work together supporting each other

156
00:13:03,780 --> 00:13:06,270
providing enough evidence or

157
00:13:06,270 --> 00:13:11,040
enough backing so operations will listen
to them to implement that because let's

158
00:13:11,040 --> 00:13:15,180
be frank how many here have a red book
the Phoenix project

159
00:13:16,650 --> 00:13:22,770
okay you know how operations see
security in the real world that's a

160
00:13:22,770 --> 00:13:27,810
DevOps book and you can see from the i
remember reading that book and at the

161
00:13:27,810 --> 00:13:32,729
fete first chapter just being pissed at
how they were referring to the security

162
00:13:32,730 --> 00:13:36,480
guy by the second third I was gonna like
yeah with a servant

163
00:13:37,440 --> 00:13:43,710
yeah weird at cocky yeah we're assholes
many times yeah makes sense then that by

164
00:13:43,710 --> 00:13:47,910
the end you can see that time be up
symbiotic relationship of security and

165
00:13:47,910 --> 00:13:52,290
operations working together and making
the organization secure and walk out

166
00:13:52,290 --> 00:13:54,209
that's think that makes sense

167
00:13:54,210 --> 00:13:58,680
yeah but that is how it should be but in
real life what is the current situation

168
00:13:58,680 --> 00:14:04,589
that we see right now this is our
current situation i was still from both

169
00:14:04,590 --> 00:14:13,080
sides blue gets piss blood gets mad like
shit dude we work for the same freaking

170
00:14:13,080 --> 00:14:13,950
team

171
00:14:13,950 --> 00:14:18,930
what are you doing against me and then
when it comes to this I dude you threw

172
00:14:18,930 --> 00:14:20,189
us under the bus

173
00:14:20,190 --> 00:14:25,050
you asshole why did you do that you
through what's under the freaking bus

174
00:14:25,050 --> 00:14:30,569
and you can see those petty fights
between both of them especially where do

175
00:14:30,570 --> 00:14:35,520
you see a bit of a story where do I see
this a lot is when they're doing their

176
00:14:35,520 --> 00:14:38,310
debrief and you have stakeholders in the
meeting

177
00:14:38,310 --> 00:14:43,619
it is all of them see who can brown-nose
to stakeholder most and I find that so

178
00:14:43,620 --> 00:14:48,300
appalling when I see them like owner but
you guys dead doesn't choose you do it

179
00:14:48,300 --> 00:14:51,839
oh we should have our we do guys you
have our ways and you shouldn't do that

180
00:14:51,840 --> 00:14:56,130
shit and the other cats oh yeah and you
should have detected this detect this

181
00:14:56,130 --> 00:15:00,900
even have heard a first-year system
would have seen that event log and raise

182
00:15:00,900 --> 00:15:05,790
an alarm and the location other's throat
during the meeting and the stakeholder

183
00:15:06,400 --> 00:15:10,780
many times it's not a technical guy is
just seeing a dysfunctional security

184
00:15:10,780 --> 00:15:16,930
they're not seeing that they're not
seeing blue but they're actually seen is

185
00:15:16,930 --> 00:15:23,170
a very dysfunctional team that does not
know how to work together and that

186
00:15:23,170 --> 00:15:28,810
doesn't look good in business and then
when read content and I one training

187
00:15:28,810 --> 00:15:34,270
budget they don't get it when blue needs
the tool or training they don't get it

188
00:15:34,270 --> 00:15:41,290
because what does the stakeholder see
they see a dysfunctional team and that's

189
00:15:41,290 --> 00:15:43,120
why many times

190
00:15:43,120 --> 00:15:50,140
neither team gets buy-in from the
stakeholders you just we really deserve

191
00:15:50,140 --> 00:15:55,810
it we we don't act like a functional
team many times so other times it's just

192
00:15:55,810 --> 00:16:01,239
that management doesn't get risk and
that's where it's our job social

193
00:16:01,240 --> 00:16:06,910
engineer manager in management into
understanding the risk we talk here in

194
00:16:06,910 --> 00:16:11,199
the conference's so much about social
engineering and yet we don't apply to

195
00:16:11,200 --> 00:16:18,280
our job with me with the people that
matter so anything that we see is that

196
00:16:18,280 --> 00:16:23,170
red team is worse to be
institutionalized what we're doing is

197
00:16:23,170 --> 00:16:26,469
that we're grabbing the red team the red
team's not thinking like the company

198
00:16:26,470 --> 00:16:30,070
wants them to think they're not
operating like the company wants them to

199
00:16:30,070 --> 00:16:33,490
operate and we forced them to do it

200
00:16:33,490 --> 00:16:37,780
they're supposed to be your devil's
advocate Thursday they're the guys that

201
00:16:37,780 --> 00:16:40,839
should be their questioning everything
that you're doing

202
00:16:40,840 --> 00:16:45,460
oh I want to put in this password
manager and I won't throw them under the

203
00:16:45,460 --> 00:16:49,810
table but it's the distance of recent
case about two weeks ago

204
00:16:50,470 --> 00:16:56,410
oh we what I t comes we want to buy this
password manager one implemented in the

205
00:16:56,410 --> 00:16:59,089
network and

206
00:16:59,089 --> 00:17:03,199
red should go in and look at that
password manager and look at everything

207
00:17:03,199 --> 00:17:08,270
that that products doing and probably
they'll be able to tell ops

208
00:17:08,929 --> 00:17:15,559
dude I think it's bad that that password
manager has to run with a domain admin

209
00:17:15,559 --> 00:17:22,069
account and sequel database and also its
service has to be domain at men

210
00:17:22,069 --> 00:17:26,359
oh by the way we start testing it and
we'll get him an animal just to look at

211
00:17:26,359 --> 00:17:29,600
the traffic is doing this password
resets include tax

212
00:17:31,340 --> 00:17:39,439
oh but it's in gardner quadrant type of
each student password clear-text domain

213
00:17:39,440 --> 00:17:46,520
admin are you sure you want to play that
card so it comes in simulate several

214
00:17:46,520 --> 00:17:51,440
attacks your record videos send that to
IT operations now you just gave them

215
00:17:51,440 --> 00:17:54,470
what they needed to secure that but many
times

216
00:17:55,250 --> 00:17:59,450
red doesn't do that right girls like I
like bricks breaking shit like

217
00:17:59,450 --> 00:18:02,330
pentesting oh you have to help us
evaluate this

218
00:18:02,330 --> 00:18:05,870
ah reminds me of my nine-year-old

219
00:18:07,920 --> 00:18:14,700
how do you have to do this oh I have to
do this many times we see bread and

220
00:18:14,700 --> 00:18:17,850
bread not doing it makes you look back

221
00:18:18,660 --> 00:18:30,690
so also um one of the things that we're
we're seeing is that we're seeing red as

222
00:18:30,690 --> 00:18:35,040
such checkbox repentance it's only a
checkbox and we're not able to change

223
00:18:35,040 --> 00:18:41,460
their minds in fact when we're a company
is trying to hire as its pen testers we

224
00:18:41,460 --> 00:18:47,130
don't even fight it that we know that
they're looking at us as a checkbox and

225
00:18:47,130 --> 00:18:51,360
in fact you'll actually see twitter
handles out there that when you look at

226
00:18:51,360 --> 00:18:57,270
the description checkbox a master or
checkbox whatever many have come to

227
00:18:57,270 --> 00:19:02,670
actually except that were being seen as
a checkbox and that were no no more I

228
00:19:02,670 --> 00:19:06,360
see that as giving up that kind of
pisses me off when I see people do that

229
00:19:06,360 --> 00:19:09,570
we're not a checkbox which not think
like that

230
00:19:12,750 --> 00:19:17,400
also another thing that we see is and
this is because of the puppy mills we

231
00:19:17,400 --> 00:19:23,220
are seeing a lot of people out there
that a lot of pen testers that they have

232
00:19:23,220 --> 00:19:27,480
the to cut and I covered this in class
you take away the toolkit they cry like

233
00:19:27,480 --> 00:19:28,230
babies

234
00:19:28,230 --> 00:19:33,570
you cannot use metasploit our man come
on come on come on you're saying cannot

235
00:19:33,570 --> 00:19:36,689
use miss but oh don't piss me off I'm
gonna take him away from you

236
00:19:37,230 --> 00:19:39,220
you're not going to get it for a week

237
00:19:39,220 --> 00:19:46,179
and they don't know how to freaking
operate without their tools but we read

238
00:19:46,179 --> 00:19:52,179
reports about apt 24 from China apt 28
from Eastern Europe and we report from

239
00:19:52,179 --> 00:19:57,159
any other organizations they're not
using deployed they're not using a map

240
00:19:57,159 --> 00:20:01,929
so if you're ready and you're supposed
to emulate their tools there I'll seize

241
00:20:01,929 --> 00:20:03,159
their techniques

242
00:20:03,159 --> 00:20:07,690
what are you using this known tool and
you're not developing your own what is

243
00:20:07,690 --> 00:20:10,690
your problem there didn't have the skill
set to do it

244
00:20:11,200 --> 00:20:18,490
they've grown complacent the freaking
hackers we're super at both sites we

245
00:20:18,490 --> 00:20:23,080
should like breaking stuff we should
like learning we should like building

246
00:20:23,080 --> 00:20:27,610
but now we have money and becomes a
business and we're kind of forgetting

247
00:20:27,610 --> 00:20:31,990
those roots and that's what dirty khan
and most conferences are we have to go

248
00:20:31,990 --> 00:20:37,030
back to those freaking puts where we can
adapt we can overcome and so I'm so

249
00:20:37,030 --> 00:20:44,320
proud of the I had had a chance of
trained marine or cyber protection teams

250
00:20:45,640 --> 00:20:50,140
I'm and those devil dogs i have to tell
you they're going to organization with

251
00:20:50,140 --> 00:20:54,429
there's no mos for cyber and they're
building your team's up and you can see

252
00:20:54,429 --> 00:20:58,390
the passion and then that they want to
learn they built under tools they're not

253
00:20:58,390 --> 00:21:03,250
relying on specific devices they're not
seen boxes and seen out with this 2 i'm

254
00:21:03,250 --> 00:21:06,520
going to cover everything and not that
I'm ripping on the air force for

255
00:21:06,520 --> 00:21:11,770
thinking like that many times or D Navy
they tend to be very good also but i

256
00:21:11,770 --> 00:21:15,309
love the Marine Corps because they've
always been that underdog that never

257
00:21:15,309 --> 00:21:18,970
gets enough but get that never gets
enough stuff and they have kinda like

258
00:21:18,970 --> 00:21:21,490
this mentality of thinking outside the
box

259
00:21:21,490 --> 00:21:25,059
bending the rules breaking the rules
without getting caught or go to jail and

260
00:21:25,059 --> 00:21:26,440
that's the mentality

261
00:21:26,440 --> 00:21:31,990
how far can i take it before somebody
comes in this laughing and that's what

262
00:21:31,990 --> 00:21:33,549
we should have read read

263
00:21:33,549 --> 00:21:38,710
forget about your tool bag try to
improve on blue team's the other side

264
00:21:38,710 --> 00:21:42,070
blue team is so to pound

265
00:21:42,610 --> 00:21:47,439
my seam doesn't see it's not happening
dude we got it

266
00:21:47,440 --> 00:21:50,920
it's not and sin no you didn't get in

267
00:21:50,920 --> 00:21:57,130
I was actually seen that in African
meeting was going no fucking way that

268
00:21:57,130 --> 00:22:01,990
teams joined the video and include blue
guy just keeps going like no it's not in

269
00:22:01,990 --> 00:22:07,660
my salmon going to look at the screen
look at the video is in itself nope

270
00:22:07,660 --> 00:22:11,559
that's not nice and no trick I didn't
call it up

271
00:22:12,100 --> 00:22:22,090
nope like and I'm like dude the Devon
shadow to instill the database out of

272
00:22:22,090 --> 00:22:25,299
the freaking domain server

273
00:22:25,299 --> 00:22:32,320
oh my shop doesn't give me a log no I'm
unscrewed and like you know you can

274
00:22:32,320 --> 00:22:37,689
actually write a bit of script mm i
permitted van change for win32

275
00:22:37,690 --> 00:22:41,290
underscore volume shadow copy and create
your own event

276
00:22:41,799 --> 00:22:46,120
oh and no no no that's too much work we
have to get that approved we got a

277
00:22:46,120 --> 00:22:55,209
document like and you see teams like
that because they some become tool bound

278
00:22:55,210 --> 00:23:00,669
at both sides they like their toys the
hate learning how to go to building

279
00:23:00,669 --> 00:23:05,049
their own freakin stuff they lost that
flexibility they've been

280
00:23:05,049 --> 00:23:10,090
institutionalize you kinda gotta break
that so typically with the way we

281
00:23:10,090 --> 00:23:14,980
operate is that we have some basic
engagements many of you probably gonna

282
00:23:14,980 --> 00:23:19,390
go at all man i really know how to do
that but believe it or not there's a lot

283
00:23:19,390 --> 00:23:23,919
of people that don't at least uh when it
initially started i was talking with my

284
00:23:23,919 --> 00:23:26,020
friends and they're like yeah we do that

285
00:23:26,020 --> 00:23:29,520
yeah we operate that way cool yeah

286
00:23:29,520 --> 00:23:33,300
yeah just repeating the same shit and
then when I want to other people outside

287
00:23:33,300 --> 00:23:40,440
it all do i never knew that we had to do
that way so for make make sure that you

288
00:23:40,440 --> 00:23:44,790
look at several perspectives and happy
that my friends tend to be very honest

289
00:23:44,790 --> 00:23:48,360
and I'll and they'll call bullshit on me
and many times they'll bring me down

290
00:23:48,360 --> 00:23:49,409
like hey Carlos

291
00:23:49,410 --> 00:23:53,820
nobody thinks you're a power tool guide
nobody knows pop a lot of people out

292
00:23:53,820 --> 00:23:57,600
there do not know powershell you know
python a lot of people actually not know

293
00:23:57,600 --> 00:24:01,649
python and the kind of okay okay makes
sense many times I'm kind of jaded

294
00:24:01,650 --> 00:24:05,760
because of the friendships I i take i
have a lot of friends center great

295
00:24:05,760 --> 00:24:09,240
you're good and they don't know about
this stuff so typically when we look at

296
00:24:09,240 --> 00:24:12,780
engagement the first one doing that see
out there is what I call a cooperative

297
00:24:12,780 --> 00:24:18,389
engagement now when we're looking at a
comparative okay but i'm having problems

298
00:24:18,390 --> 00:24:21,270
with the work properly if my english at
my spanish to english translation

299
00:24:21,270 --> 00:24:26,040
engines family now although with a wet
tabletop we're going to our tape

300
00:24:26,040 --> 00:24:27,420
tabletop occasion

301
00:24:27,420 --> 00:24:31,950
typically a table topics because you
just sit in a freaking room and go this

302
00:24:31,950 --> 00:24:33,060
is how a risk

303
00:24:33,060 --> 00:24:38,040
this is what we're going to evaluate and
you sit down and you hash it out red

304
00:24:38,040 --> 00:24:42,090
comes and they say this is how we're
going to operate this is all of this

305
00:24:42,090 --> 00:24:46,860
stuff that we're going to be doing and
blue says okay so what I OCS are you

306
00:24:46,860 --> 00:24:50,820
detecting are generating we would detect
this and you're working everything out

307
00:24:50,820 --> 00:24:57,510
not in a non-confrontational way with
without having black humor without

308
00:24:57,510 --> 00:25:02,490
calling each other names we just had
worked working together

309
00:25:03,420 --> 00:25:09,390
what advantages these do is specifically
for many organizations out there for the

310
00:25:09,390 --> 00:25:11,520
big ones this is their bread and butter

311
00:25:11,520 --> 00:25:16,110
they tend to do this constantly for the
big ones for the small ones were this is

312
00:25:16,110 --> 00:25:19,860
where I see the gab they'll hire a
company and they'll say I need a pen

313
00:25:19,860 --> 00:25:20,550
test

314
00:25:20,550 --> 00:25:25,740
Oh pinterest accounts okay how are we
going to work this out i want you can

315
00:25:25,740 --> 00:25:27,210
test my network up

316
00:25:27,210 --> 00:25:30,050
what do you want either no hmm

317
00:25:30,050 --> 00:25:34,550
the company it should actually asked use
customer have you done a bit early

318
00:25:34,550 --> 00:25:39,680
assessment and many times will hear no
but I want a pen test

319
00:25:39,680 --> 00:25:45,440
ok have you guys actually look at your
environment and ransom hardening I know

320
00:25:45,440 --> 00:25:50,750
what that is I want to contest and you
should actually kind of guide them like

321
00:25:50,750 --> 00:25:54,410
eight list instead of fighting them and
trying to explain to them that

322
00:25:54,410 --> 00:25:56,300
repentance is not what you need

323
00:25:56,300 --> 00:26:01,460
you should actually go ok let's do this
let's do a special type of pen test a

324
00:26:01,460 --> 00:26:02,930
cooperative contest

325
00:26:02,930 --> 00:26:06,200
let's bring your IT people and we'll go
in

326
00:26:06,200 --> 00:26:10,400
we'll do our attack against your
infrastructure you guys will be there in

327
00:26:10,400 --> 00:26:14,570
the room and they'll see how we're doing
everything and they should be telling us

328
00:26:14,570 --> 00:26:17,270
a you guys were able to get in

329
00:26:17,270 --> 00:26:21,680
oh we should block that o we were out we
took care of that that is kind of like a

330
00:26:21,680 --> 00:26:25,130
comparative engagement that's what
typically we should be kind of doing

331
00:26:25,130 --> 00:26:33,620
when blue and red constantly are working
together looking at the IOC's looking at

332
00:26:33,620 --> 00:26:37,010
the threads of this new technology but
you're bringing in how are you operating

333
00:26:37,010 --> 00:26:41,210
improving those plans updating your
playbooks updating your internal

334
00:26:41,210 --> 00:26:46,850
knowledge base and working on those
sensory response plans and your kind of

335
00:26:46,850 --> 00:26:51,290
validating those initial that's the
initial stage where just baby steps

336
00:26:51,290 --> 00:26:52,909
going in

337
00:26:52,910 --> 00:26:57,860
that's the normal engagement that
typically we should be running in fact i

338
00:26:57,860 --> 00:27:02,240
was talking with a very good friend of
mine he was telling me no we're starting

339
00:27:02,240 --> 00:27:07,490
at this big company red and blue and you
actually told me we're having three full

340
00:27:07,490 --> 00:27:09,860
red engagement against us

341
00:27:09,860 --> 00:27:14,899
currently I'm going what yeah we're
running three against blue blue burned

342
00:27:14,900 --> 00:27:22,040
out and did you guys sat down initially
and talk and plan it out and you guys

343
00:27:22,040 --> 00:27:28,159
initially did a bit of tabletop you know
right script a whiteboard all this stuff

344
00:27:28,160 --> 00:27:28,679
nope

345
00:27:28,679 --> 00:27:36,629
it just simply went in and some of us
like objects that doesn't work that that

346
00:27:36,629 --> 00:27:43,649
is that return on investment very very
very bad return investment so when we're

347
00:27:43,649 --> 00:27:50,908
doing that tabletop type of engagement
typically what we when do we want it

348
00:27:50,909 --> 00:27:54,539
typically when we're starting out when
we're starting to build our blue and red

349
00:27:54,539 --> 00:27:57,960
team and want them to think purple we
want them to work together

350
00:27:57,960 --> 00:28:04,710
that's the perfect place to start with
those many uh of of the other times that

351
00:28:04,710 --> 00:28:07,980
we want to do this when we're bringing
in new technology in other words will

352
00:28:07,980 --> 00:28:11,909
bring in a new risk into our environment
we're bringing in change

353
00:28:11,909 --> 00:28:15,509
we're updating stuff that's when we want
to kind of be doing this kind of stuff

354
00:28:15,509 --> 00:28:20,970
and as I mentioned is kind of like best
return on Valley because you're

355
00:28:20,970 --> 00:28:24,749
discussing that you're getting stuff
affects your green stuff . on the fly

356
00:28:24,749 --> 00:28:29,220
there every day every hour instead of
just waiting a couple of weeks then

357
00:28:29,220 --> 00:28:32,700
sitting down then bitching at each other

358
00:28:32,700 --> 00:28:36,090
coming out with the reports and then
taking those reports again them over to

359
00:28:36,090 --> 00:28:41,249
operations and then trying to convince
operations to fix it you get a fix at

360
00:28:41,249 --> 00:28:45,119
the moment so it's a lot better for our
from the get-go but it doesn't stimulate

361
00:28:45,119 --> 00:28:48,539
everything doesn't cover everything that
we should be doing

362
00:28:48,539 --> 00:28:53,100
also we we need to have color channels
of communication between each other

363
00:28:53,100 --> 00:28:58,080
respect each other know how to talk with
each other that's how a soft skill that

364
00:28:58,080 --> 00:29:05,939
I've seen that is kind of lost now I
know that the second type of engagement

365
00:29:05,940 --> 00:29:09,899
that typically recommend is what I
called Fred emulation Fidel American

366
00:29:09,899 --> 00:29:14,639
revolutions were actually sick selecting
a specific threat that were worried

367
00:29:14,639 --> 00:29:19,199
about yahoo got pop how the jaw who got
part of it was

368
00:29:20,340 --> 00:29:24,959
sequel injection and they were able to
double its ok let's look at sequel

369
00:29:24,960 --> 00:29:27,510
injection what are the best for sequel
injection

370
00:29:27,510 --> 00:29:30,900
let's sit down between red and blue what
are the common tools that people used to

371
00:29:30,900 --> 00:29:34,620
start becoming tools wanted to come to
school injection that they're using can

372
00:29:34,620 --> 00:29:38,489
we block those deaths were blocking
those who were able to engage in them

373
00:29:38,490 --> 00:29:43,110
yes I what would be the IOC's i have
this and then Brett can go like yeah

374
00:29:43,110 --> 00:29:46,168
well you're missing this one you're
missing this other orders a brand-new

375
00:29:46,169 --> 00:29:49,559
technique that just came out

376
00:29:49,559 --> 00:29:53,730
same thing of your mother saying you
were your grand threat model you have a

377
00:29:53,730 --> 00:29:58,590
bunch of machines they're exposed to
probably visitors other users and you

378
00:29:58,590 --> 00:30:02,820
want to let's say you zap locker with
device guard implement that secured them

379
00:30:02,820 --> 00:30:08,279
out and all of the sudden subcontent he
doesn't treat of I want one more bypass

380
00:30:08,279 --> 00:30:13,529
that week initially you'll go and you'll
go

381
00:30:13,529 --> 00:30:17,909
this is your third model this is how he
did it this is how his publishing ok

382
00:30:17,909 --> 00:30:21,179
let's simulate this let's bring both
teams in red

383
00:30:21,179 --> 00:30:24,210
can you write tooling for this how would
you write to how would you deploy this

384
00:30:24,210 --> 00:30:29,159
and mass what be other tricks in your
bag that you can join one and the other

385
00:30:29,159 --> 00:30:34,590
together duct tape it and to deploy this
and abuse it and then blue team goes in

386
00:30:34,590 --> 00:30:39,000
and looks at the IOC's look at it was
implement some controls red team then

387
00:30:39,000 --> 00:30:42,840
goes ok important controls contest those
controls now they go in with their new

388
00:30:42,840 --> 00:30:46,678
tooling their new stuff they test that
out you missed this and you prove that

389
00:30:46,679 --> 00:30:54,000
you're doing that threat model and yes
I'm not holding my slice that bike

390
00:30:54,000 --> 00:31:00,210
typically take slides so I just like a
story John more so that's how can you

391
00:31:00,210 --> 00:31:05,340
actually do that so you build your foot
model you'll find your engagement

392
00:31:05,340 --> 00:31:10,080
well you object if this is what I want
to achieve at the n your storyboard the

393
00:31:10,080 --> 00:31:14,220
heck out of it all of the possibilities
with red and blue they're discussing it

394
00:31:14,220 --> 00:31:19,320
you determine what what is that you're
actually supposed to be looking after

395
00:31:19,320 --> 00:31:22,860
his storyboarded and then you have to
execute actually have to do it you have

396
00:31:22,860 --> 00:31:24,320
to take it from paper and act

397
00:31:24,320 --> 00:31:29,178
do it in real life many of you guys know
that are like gods i like tactics i like

398
00:31:29,179 --> 00:31:32,750
martial arts so let's bring it over to
that side of charge

399
00:31:33,350 --> 00:31:38,719
have you ever gone into a dojo or was a
crack massage studio or any of those and

400
00:31:38,720 --> 00:31:43,370
here comes to new guy his car keys in
Allah and the best time the best punch

401
00:31:43,370 --> 00:31:47,389
her out there i just do boxing and you
asked about his prints and most of the

402
00:31:47,389 --> 00:31:51,500
time it's just hitting the heavy bag or
he's practicing techniques with somebody

403
00:31:51,500 --> 00:31:55,940
else or he's doing filipino martial arts
and just doing flows with a little buddy

404
00:31:56,480 --> 00:32:00,379
you guys seem happier worse part
full-out sparco no no that's dangerous

405
00:32:00,379 --> 00:32:06,379
we don't do that you need that you need
that pressure to put all of those

406
00:32:06,379 --> 00:32:08,779
concepts and to interpret estas

407
00:32:08,779 --> 00:32:13,580
that's why you executed because under
pressure under execution is what you're

408
00:32:13,580 --> 00:32:19,460
going to see the flaws or the areas that
you need to improve upon that we execute

409
00:32:19,460 --> 00:32:23,809
that and then with you breathe and we
debrief on it nicely we talk to each

410
00:32:23,809 --> 00:32:28,519
other nicely and then we update our
playbooks and this is support that many

411
00:32:28,519 --> 00:32:30,649
many teams actually fail

412
00:32:30,649 --> 00:32:33,709
I've actually gone to many blue team's
and red team's I don't do you got to

413
00:32:33,710 --> 00:32:39,259
keep a knowledge base or and and you
keep playbooks nope why not

414
00:32:39,769 --> 00:32:47,240
no no no we have our own will harm joy
here that does everything in his our top

415
00:32:47,240 --> 00:32:51,860
guy will deploy him when we need
something done and then blue contest

416
00:32:51,860 --> 00:32:55,039
that now I have my own child back half
is the expert and Active Directory knows

417
00:32:55,039 --> 00:32:58,669
how to secure stuff will need to
document that stuff we have him but what

418
00:32:58,669 --> 00:33:06,110
happens when they're not there what
happens when their second and many times

419
00:33:06,110 --> 00:33:12,019
what you're going to find out is that
this is a good way to gauge the level of

420
00:33:12,019 --> 00:33:17,480
ego and BS in your environment among
your employees why if they don't like

421
00:33:17,480 --> 00:33:22,549
sharing information and they see that as
their own individual value that somebody

422
00:33:22,549 --> 00:33:24,289
you don't want in your team

423
00:33:24,289 --> 00:33:27,620
he's not a team player is not thinking
about the team

424
00:33:27,620 --> 00:33:33,739
only thinking how can I chine into team
by hoarding all of this knowledge so do

425
00:33:33,740 --> 00:33:38,390
make sure that you're keeping a very
good knowledge base of every technique

426
00:33:38,390 --> 00:33:42,440
at everybody's aware of those you're
keeping playbooks you're updating those

427
00:33:42,440 --> 00:33:46,940
playbooks based on all of those tabletop
exercises because they will become a

428
00:33:46,940 --> 00:33:56,330
valley to you so stuff that we have to
keep in mind when we're working on this

429
00:33:56,330 --> 00:34:08,509
the main concern is typically tend to be
that we have to be aware of the time

430
00:34:08,510 --> 00:34:13,639
constraints many many times people do
all of this tabletop engagement and

431
00:34:13,639 --> 00:34:16,580
they're going and they're storyboarding
the heck out of it and they come up with

432
00:34:16,580 --> 00:34:20,870
a hundred stories and many of those do
not have to do with the threat model or

433
00:34:20,870 --> 00:34:24,679
the goal that you initially have you set
up that goal and then you start

434
00:34:24,679 --> 00:34:28,010
storyboard and this is what only we're
going to cover and when you sit down in

435
00:34:28,010 --> 00:34:32,000
that room and you're discussing those
they'll just go into one rabbit hole

436
00:34:32,000 --> 00:34:36,649
after another rabbit hole after another
rabbit hole and you want a perfect

437
00:34:36,649 --> 00:34:42,049
example of that i know of that have you
guys listen to when I'm indeed degree

438
00:34:42,050 --> 00:34:48,080
weekly podcast and we're discussing a
security subject and some somehow it's

439
00:34:48,080 --> 00:34:56,299
going from security to IOT to porn and
then from poor and it's going to be SDM

440
00:34:56,300 --> 00:35:01,250
and from bsdm somehow it ended up in
Trump and you're like what the heck

441
00:35:01,250 --> 00:35:08,000
happened here same thing when we're
doing this kind of engagement we have to

442
00:35:08,000 --> 00:35:13,100
be careful with that we have to enforce
those time constraints

443
00:35:13,100 --> 00:35:16,790
resource-constrained operation
constraints and political constraints of

444
00:35:16,790 --> 00:35:21,020
the organization because many times a
lot of this commitment and spread can go

445
00:35:21,020 --> 00:35:22,910
like oh this is so sexy

446
00:35:22,910 --> 00:35:27,170
yeah but that's only happening in
banking we're not banking with auto

447
00:35:27,170 --> 00:35:30,320
parts distributor you know but it's so
selected noon

448
00:35:30,920 --> 00:35:35,510
you don't get it we're not exposed to
that threat we shouldn't be doing this

449
00:35:36,260 --> 00:35:39,710
two day yes we should do it at some
point but not today

450
00:35:39,710 --> 00:35:44,150
so you have to have all those political
constraints also take into consideration

451
00:35:44,150 --> 00:35:48,830
the other ones adversary emulation and
this is kind of like a pet peeve of mine

452
00:35:48,830 --> 00:35:53,480
that I have when we're doing a preserved
emulation which we go identify and

453
00:35:53,480 --> 00:35:57,470
select an episode this episode ever
going to immolate he has to be specific

454
00:35:57,470 --> 00:36:02,330
one out there that you know that it
could be a real try to you could be a

455
00:36:02,330 --> 00:36:07,880
nation-state could be a malware group
could be apt 28th ABT 24 you have to

456
00:36:07,880 --> 00:36:12,680
select a specific one and then you going
through threat until the into threat

457
00:36:12,680 --> 00:36:16,790
intelligence feet and you don't use them
for fucking white listen blacklisting

458
00:36:16,790 --> 00:36:21,140
like almost everybody does their there
for a purpose they're there to tell you

459
00:36:21,140 --> 00:36:27,830
how this disc specific actor behaves
what r io sees one order tools what is

460
00:36:27,830 --> 00:36:28,850
their behavior

461
00:36:28,850 --> 00:36:32,810
what is their order of attack with in
what order they're performing that all

462
00:36:32,810 --> 00:36:37,130
of that stuff tends to be inside of
those that Intel feeds that a lot of

463
00:36:37,130 --> 00:36:42,290
people ignore they just go for the md5
hashes 21 hashes and gerbils and that's

464
00:36:42,290 --> 00:36:47,090
what we package and we deployed to our
machines and forget that behavior is

465
00:36:47,090 --> 00:36:51,200
something that we can figure on
behaviour that's going to give us that

466
00:36:51,200 --> 00:36:57,919
kill chain to block and break for that
attackers so he's not able to move or

467
00:36:57,920 --> 00:37:02,240
traverse in your environment it will
give you that list of where you can add

468
00:37:02,240 --> 00:37:06,589
pain for him to not do stuff and you're
able to detect it

469
00:37:06,590 --> 00:37:12,500
so we select those two'll TTP's then the
red team execute and behaves like them

470
00:37:13,040 --> 00:37:16,520
that doesn't mean that if you're
simulating the Russians are going to get

471
00:37:16,520 --> 00:37:20,930
drunk and vodka and gin execute that up

472
00:37:20,930 --> 00:37:24,620
no it means that you have to get into
the mind sense you read up on it

473
00:37:24,620 --> 00:37:28,670
well how do they behave what our tools
do they taught their targets just know

474
00:37:29,770 --> 00:37:33,280
you can even write your own tools to
emulate their own their tools if you're

475
00:37:33,280 --> 00:37:39,670
not able to get them you execute you
generate your report and then you go to

476
00:37:39,670 --> 00:37:45,430
debrief you go with blue we simulated
the specific state actor that is telling

477
00:37:45,430 --> 00:37:47,319
us this is what we did

478
00:37:47,320 --> 00:37:51,220
tu sauce just know if blue saw you

479
00:37:51,220 --> 00:37:56,230
cool they're doing their job and you go
like how long the detected to see us if

480
00:37:56,230 --> 00:38:00,100
they didn't saw you you said okay guys
using sauce

481
00:38:00,100 --> 00:38:08,290
this is what we did let's improve on
this let's repeat and then we update our

482
00:38:08,290 --> 00:38:14,350
playbook if Lucas on those stuff and
those techniques we save those and we

483
00:38:14,350 --> 00:38:17,620
make sure that an hour or so peace when
we're going we're checking for that

484
00:38:17,620 --> 00:38:25,299
stopped many many red team's that i know
of have some of the sweetest rats and

485
00:38:25,300 --> 00:38:31,060
tool sets out there when they're going
against a very good blue team because

486
00:38:31,060 --> 00:38:36,670
they're constantly improving constantly
updating constantly writing new shit to

487
00:38:36,670 --> 00:38:42,640
bata tu to be a stealthy as possible
because blue for system to be good and

488
00:38:42,640 --> 00:38:47,080
at the same time boys getting better and
better and better at detecting

489
00:38:47,080 --> 00:38:52,480
containing and remediating dos attacks
and investigating each other's feeding

490
00:38:52,480 --> 00:38:53,290
each other

491
00:38:53,290 --> 00:38:58,420
did you know that they're working
together the that is like what you have

492
00:38:58,420 --> 00:39:02,650
your hammer anvil and you're making that
sort of each one of them is improving

493
00:39:02,650 --> 00:39:07,240
the security of that sort of both of
them are kind of molten it that that

494
00:39:07,240 --> 00:39:11,620
security posture for that environment
that level of maturity for it

495
00:39:11,620 --> 00:39:18,310
they're working together on it but each
one of them kind of getting better so i

496
00:39:18,310 --> 00:39:23,590
just had a head slides what so I put one
slide storyboard and get ahead of myself

497
00:39:26,410 --> 00:39:30,460
so typically the main considerations
that we have to take when we're working

498
00:39:30,460 --> 00:39:32,640
on all of this stuff is

499
00:39:32,640 --> 00:39:39,779
what is the main goal that we want to
achieve since the adversary should

500
00:39:39,779 --> 00:39:46,500
already be a known one blue should
should be able to detect that and

501
00:39:46,500 --> 00:39:51,750
trigger on it if you're going to bread
and you're going through all of that

502
00:39:51,750 --> 00:39:54,990
stuff and it gets to a point that you're
going like they're haven't seen as they

503
00:39:54,990 --> 00:39:59,009
haven't done anything you have either
two options you can ratchet up a bit

504
00:39:59,010 --> 00:40:05,099
more denoise let's say a fake FBI notice
and send it over to one of these

505
00:40:05,099 --> 00:40:10,109
stakeholders to have a tech be excluded
or just start doing more noise in the

506
00:40:10,109 --> 00:40:13,980
network to see if they see you're not
and catch you and if even that doesn't

507
00:40:13,980 --> 00:40:19,859
work just stop just caught the exercise
and then let's do a debrief to fix all

508
00:40:19,859 --> 00:40:26,250
of that stuff and don't be cocky is that
we bring it over we work with blue and

509
00:40:26,250 --> 00:40:31,769
we improve the degree of each other and
we also kind of cover all those

510
00:40:31,769 --> 00:40:36,269
techniques and which are our tools with
them to know how to block those so the

511
00:40:36,269 --> 00:40:40,890
last type of engagement that we
typically tend to do is the what we call

512
00:40:40,890 --> 00:40:44,609
a full-scale attack simulation here's to
wonder everybody loves this is the

513
00:40:44,609 --> 00:40:48,930
gloves are off we're going in and we're
trying to find what is going to be

514
00:40:48,930 --> 00:40:52,500
discovered these are we going to be
doing physical pak-rat teaming are we

515
00:40:52,500 --> 00:40:57,569
going to try to break into the data
center we're going to a clone cards are

516
00:40:57,569 --> 00:41:00,900
we just going to be doing social
engineering and doing fishing against

517
00:41:00,900 --> 00:41:05,220
target or we're going to be going
technical against the target and do the

518
00:41:05,220 --> 00:41:07,288
final of those rules ahead of time

519
00:41:07,289 --> 00:41:10,950
this is the goal this is what we want to
test your defined rules of engagement

520
00:41:10,950 --> 00:41:16,379
from the get-go like hey let's not
installed patches on the Box let's not

521
00:41:16,380 --> 00:41:21,210
do DDoS make sure that we have some fake
accounts from where we're still data we

522
00:41:21,210 --> 00:41:26,579
don't want to kind of get real customer
data out of out of the side put in in a

523
00:41:26,579 --> 00:41:30,960
VPS somewhere and then have somebody
hack our PPS and we just

524
00:41:31,550 --> 00:41:36,740
our kind of screwed so we want to kind
of set all that stuff and then we create

525
00:41:36,740 --> 00:41:40,370
our plan this is how we're going to act
you guys are going to be able recon team

526
00:41:40,370 --> 00:41:44,359
you guys are going to be able to child
Serpas are going to handle of our

527
00:41:44,360 --> 00:41:49,100
channels use that you're going to be in
charge of persistence and then we simply

528
00:41:49,100 --> 00:41:54,319
execute we execute our engagement we
execute our engagement fast heart just

529
00:41:54,320 --> 00:41:58,250
like a real attacker we take our time it
could be an engagement two three four

530
00:41:58,250 --> 00:42:03,680
weeks and then we blew we start
interacting with blue we see if he's

531
00:42:03,680 --> 00:42:07,310
able to contain us to pin us down

532
00:42:07,310 --> 00:42:11,420
detectives and then we do our debrief
and then we informed them out about

533
00:42:11,420 --> 00:42:15,380
everything and that one typically we
have blue go first

534
00:42:15,380 --> 00:42:19,790
notnot red blue goes first is this
everything that we detected this is

535
00:42:19,790 --> 00:42:25,070
everything that we did this is how we
reacted then read comes and shows an

536
00:42:25,070 --> 00:42:30,140
open circuit mountains as this is how we
got in this everything we did you miss

537
00:42:30,140 --> 00:42:33,470
this through the mists that and what
you're looking for is that that mean

538
00:42:33,470 --> 00:42:40,850
time between the detection and reaction
as for every time you do those and for

539
00:42:40,850 --> 00:42:48,980
god save guys don't execute them three
at the same time so this is really how

540
00:42:48,980 --> 00:42:53,570
we execute those so the main
considerations is there's no prior

541
00:42:53,570 --> 00:42:55,010
warning on this one

542
00:42:55,010 --> 00:43:02,270
this is full engagement there's no
hand-holding this is us testing blue and

543
00:43:02,270 --> 00:43:09,800
blue being tested the other part is our
TTP's should be varied if you have

544
00:43:09,800 --> 00:43:13,280
somebody that is your medicine . expert
and everything he knows how to do is

545
00:43:13,280 --> 00:43:18,740
metasploit probably not good for this
you want your pen tester can be adaptive

546
00:43:18,740 --> 00:43:22,009
that they can use whatever tools they
need to write whatever tool day they

547
00:43:22,010 --> 00:43:27,740
need to write to get the job done you
very your toolkit you select the tools

548
00:43:27,740 --> 00:43:31,790
that you haven't used before you look at
what research are putting out there and

549
00:43:31,790 --> 00:43:36,560
you adapt those techniques so you can be
as effective as possible you want to

550
00:43:36,560 --> 00:43:37,520
test

551
00:43:37,520 --> 00:43:42,350
the highest level how effective are the
controls and appliance are being

552
00:43:42,350 --> 00:43:48,589
executed specifically the plants are
they able to contain us are they able to

553
00:43:48,590 --> 00:43:56,660
block us of moving we're trying to help
blue improve those also make sure that

554
00:43:56,660 --> 00:44:00,710
you have a list of emergency phones i
have had friends that have actually have

555
00:44:00,710 --> 00:44:05,960
the FBI called an actual investigation
called then that is because nobody

556
00:44:05,960 --> 00:44:11,240
decided to tell the stakeholder that yes
we're doing a full engagement so do that

557
00:44:11,240 --> 00:44:22,729
I I tell a lot of story about a test
that a friend

558
00:44:23,660 --> 00:44:29,960
the Bob did on a customer he was doing
the test he was too inefficient scam so

559
00:44:29,960 --> 00:44:35,060
how he he did this was he went in they
were able to find a printer the printer

560
00:44:35,060 --> 00:44:40,250
at a smtp server configure they were
able to use that printers smtp server to

561
00:44:40,250 --> 00:44:45,800
send an email internally to entire
organization the email said hey update

562
00:44:45,800 --> 00:44:52,370
on salary and bonuses for all c-level
executives with a encrypted see zip file

563
00:44:52,370 --> 00:44:56,930
with a password with a spreadsheet with
a macro that actually force between two

564
00:44:56,930 --> 00:45:01,640
click enable he said that waited 10
seconds and then send another one please

565
00:45:01,640 --> 00:45:06,950
everybody message from HR delete that
email was sent by accident he got ninety

566
00:45:06,950 --> 00:45:09,220
percent click rate

567
00:45:09,220 --> 00:45:15,549
automatically you could train everybody
not to do it and they want to it and you

568
00:45:15,550 --> 00:45:20,410
get your getting one percent is social
engineer that did it but he forgot to

569
00:45:20,410 --> 00:45:28,509
tell the stakeholder and dad didn't go
well but hey we got ninety percent click

570
00:45:28,510 --> 00:45:34,900
right so yeah so kind of make sure that
you tell the stakeholder what you're

571
00:45:34,900 --> 00:45:40,180
doing have that kind of open channel so
let's go over to our general

572
00:45:40,180 --> 00:45:49,720
recommendations without management
buy-in we're kind of screwed and by us

573
00:45:49,720 --> 00:45:56,589
being at each other's throat when we're
briefing in front of them is not useful

574
00:45:57,369 --> 00:46:04,390
we're being dysfunctional by us not
playing properly with ops we're not

575
00:46:04,390 --> 00:46:09,040
useful we can play good with each other
but we also been a chance for that about

576
00:46:09,040 --> 00:46:13,690
ops we forget about the helpdesk eyes we
forget about the guys that managed

577
00:46:13,690 --> 00:46:17,589
servers you guys had to the constant
deployment to the cloud into the

578
00:46:17,589 --> 00:46:19,240
different environments

579
00:46:19,240 --> 00:46:23,560
you know I jealous great we can move
very fast but also a lot of stress

580
00:46:23,560 --> 00:46:31,960
because stuff breaks a bit faster and
that adds tension to ops and us being a

581
00:46:31,960 --> 00:46:39,490
secure organization dicks to ops just
not help we have to learn to communicate

582
00:46:39,490 --> 00:46:46,479
and back our stuff with evidence so do
keep that in mind as i mentioned don't

583
00:46:46,480 --> 00:46:51,700
get ready a team stuff that if you want
to a full engagement do those at least

584
00:46:51,700 --> 00:46:56,049
once per quarter or twice a year most of
the time you'll be you should be doing

585
00:46:56,050 --> 00:47:05,920
the regulation table-topping type of
engagements um of and this 1 i'm trying

586
00:47:05,920 --> 00:47:10,300
to think how I can't explain it many
times what you're going to see is that

587
00:47:10,300 --> 00:47:13,640
you have an environment that much

588
00:47:13,640 --> 00:47:19,670
and blue is always constantly asking
update this new gpo modify this setting

589
00:47:19,670 --> 00:47:24,289
and they're doing it every other day to
ops

590
00:47:24,289 --> 00:47:30,980
that is like the kid that cried wolf is
going to get to a moment that security

591
00:47:30,980 --> 00:47:37,700
is going to be seen like the Cape that
cried wolf because we're going at a high

592
00:47:37,700 --> 00:47:45,049
tempo against ops asking ops to do
changes in their environment we have to

593
00:47:45,049 --> 00:47:49,970
be more organized when we do that we did
our engagement we find out what's wrong

594
00:47:50,569 --> 00:47:54,558
we create our nice report this is how
you're supposed to fix it and then we

595
00:47:54,559 --> 00:48:02,180
give them one single set of things to do
every other two three four weeks want

596
00:48:02,180 --> 00:48:03,019
the month

597
00:48:03,019 --> 00:48:08,629
whenever 22 months it all depends but
let's not be just constantly crying wolf

598
00:48:08,630 --> 00:48:12,950
going to assist in the news fix this now
this dessert that happened we should be

599
00:48:12,950 --> 00:48:16,160
careful with this and we're always
constantly emailing demo stuff that they

600
00:48:16,160 --> 00:48:20,509
need to change email and the dumb stuff
that they need to do and then copying

601
00:48:20,509 --> 00:48:25,789
managers and going out where security
this is a pie risk that high tempo of

602
00:48:25,789 --> 00:48:31,579
blue going after Ops is very detrimental
actually seen it happen in many

603
00:48:31,579 --> 00:48:36,140
environments where they go like are here
comes the security guy again

604
00:48:36,140 --> 00:48:41,420
yeah yeah look at him walking with his
minder but all of the stuff that we're

605
00:48:41,420 --> 00:48:45,259
not doing perfectly and there's and
we're seeing that way we have to change

606
00:48:45,259 --> 00:48:54,650
that and also the ability for red to be
effective as the ability of red of

607
00:48:54,650 --> 00:48:59,180
thinking outside the box so we have to
make sure that red doesn't get

608
00:48:59,180 --> 00:49:04,519
institutionalize in the environment read
your job is to step on toes

609
00:49:05,240 --> 00:49:10,368
your job is to tell the ugly lie that
the kid is ugly

610
00:49:10,369 --> 00:49:13,369
even if the parents doesn't like to hear
it

611
00:49:14,350 --> 00:49:20,500
yeah oh let's just say it is not that
smart

612
00:49:21,130 --> 00:49:28,120
we've got into a situation where we tend
to be a bit to pc if red is to pc when

613
00:49:28,120 --> 00:49:31,120
it comes to deliver messages we gonna
know we're not going to say that no the

614
00:49:31,120 --> 00:49:33,009
managed not gonna like it

615
00:49:33,010 --> 00:49:36,910
you have a bad situation because that's
the job of red of telling the manager

616
00:49:36,910 --> 00:49:40,000
what's wrong and the man you should
actually appreciate that

617
00:49:40,540 --> 00:49:44,740
also we should be have a bit of tact
when you say it

618
00:49:45,790 --> 00:49:50,140
yeah yeah I can see he has that nice
wort here

619
00:49:50,140 --> 00:49:56,529
yeah but he's cute but yeah we he could
be cuter and you can you know you that

620
00:49:56,530 --> 00:49:59,140
there are ways of saying stuff please

621
00:49:59,140 --> 00:50:04,120
um we have to break that tool centric
mentality and that changes with training

622
00:50:04,120 --> 00:50:09,430
and that changes with management you
should that you should invest in your

623
00:50:09,430 --> 00:50:12,640
people you should make sure that your
people are trained and they're trained

624
00:50:12,640 --> 00:50:16,930
properly your people should know how to
script your people should know how to

625
00:50:16,930 --> 00:50:22,629
code every time I see somebody tell me
is a response guy or a red team ER

626
00:50:22,630 --> 00:50:25,750
coatings not necessary is not mandatory

627
00:50:26,650 --> 00:50:33,160
I go like shit it should be they should
be able to add that gives me flexibility

628
00:50:33,160 --> 00:50:37,420
at least learned how to script that
gives them deficit because this is what

629
00:50:37,420 --> 00:50:42,100
is going to make them not be tools
centric if all of your pen tests are

630
00:50:42,100 --> 00:50:48,310
done with football strike and metasploit
constantly day in day out what value are

631
00:50:48,310 --> 00:50:53,620
you giving them if you're not able to
modify your behavior if you're not able

632
00:50:53,620 --> 00:50:59,259
to modify how you're approaching the
problem also control the egos as i

633
00:50:59,260 --> 00:51:03,280
mentioned be that the devil's advocate
but don't be a saboteur

634
00:51:04,000 --> 00:51:08,080
so typically when it comes to metrics is
the part that everybody hates

635
00:51:08,080 --> 00:51:13,810
we cannot manage what we cannot measure
so we have to be very of very concise

636
00:51:13,810 --> 00:51:19,180
and that now the metrics should be set
up from the get-go wear red winning

637
00:51:19,180 --> 00:51:22,379
doesn't mean that blue losses or if blue

638
00:51:22,380 --> 00:51:28,230
winds red loses it cannot be that way
because while of said what do you do you

639
00:51:28,230 --> 00:51:30,600
put them one against the other

640
00:51:30,600 --> 00:51:36,270
why do we hate sales sales people so
much in many organizations because their

641
00:51:36,270 --> 00:51:40,530
metrics is how much stuff they sell its
not if they saw the correct thing to the

642
00:51:40,530 --> 00:51:41,160
customer

643
00:51:41,160 --> 00:51:46,440
nobody measures that it is do you have a
quota you have 1 million dollars but

644
00:51:46,440 --> 00:51:50,790
district mentor they'll do whatever they
need to do to get their quota because

645
00:51:50,790 --> 00:51:55,980
how that is how they're measured that is
the metric that is being applied to them

646
00:51:55,980 --> 00:52:05,220
measure the number of interactions of
how they work together how many times

647
00:52:05,220 --> 00:52:07,980
did red and blue sat down

648
00:52:07,980 --> 00:52:14,220
what was the amount of attack
simulations that were detected

649
00:52:14,220 --> 00:52:18,240
what was their timeframe and just look
for improvement and your metric is not

650
00:52:18,240 --> 00:52:23,129
if they missed those or if that number
is higher that is how did they improved

651
00:52:23,130 --> 00:52:27,060
the day detected that same type of
attack on the next engagement yes now

652
00:52:27,060 --> 00:52:32,220
think about those metrics think how
you're measuring your blue and red team

653
00:52:32,220 --> 00:52:39,480
also measure how they operate with the
org how do you pass that information how

654
00:52:39,480 --> 00:52:43,050
many times you guys decided okay we
found a new attack techniques being used

655
00:52:43,050 --> 00:52:44,250
being abused

656
00:52:44,250 --> 00:52:49,020
let's create a preface to our webcast
internally ensure that kind of push them

657
00:52:49,020 --> 00:52:53,970
to do that to share that information
internally to the other users and and

658
00:52:53,970 --> 00:52:57,180
try to put it in the metrics because
that's going to be the fire under their

659
00:52:57,180 --> 00:53:00,629
asses to get them moving and sharing
that information be more proactive

660
00:53:00,630 --> 00:53:08,940
inside dork also um number of
engagements should not be kinda like

661
00:53:08,940 --> 00:53:13,380
your metric how many because then
they'll just go through the numbers on

662
00:53:13,380 --> 00:53:19,050
them measure the value of those
engagements you can actually measure how

663
00:53:19,050 --> 00:53:23,910
many tools have their written modify
updated and then shared with your team

664
00:53:23,910 --> 00:53:28,020
you're measuring their that they're
forcing them to be good and at the same

665
00:53:28,020 --> 00:53:29,250
time sure that information

666
00:53:29,250 --> 00:53:33,330
I used to work forever very good
consulting team that what they did is

667
00:53:33,330 --> 00:53:37,770
that part of our measure was how many
knowledgebase articles did I wrote per

668
00:53:37,770 --> 00:53:42,750
quarter i had to write one every two
months one knowledgebase article on the

669
00:53:42,750 --> 00:53:50,760
subject put it in put it on the on the
chair and then the winter when you went

670
00:53:50,760 --> 00:53:55,260
to the future . and you look at
everything in the comments people could

671
00:53:55,260 --> 00:54:00,270
actually gauge how good was our document
or not or how useful and put comments in

672
00:54:00,270 --> 00:54:04,680
them that was kind of like a very good
metric for me it made me improve 10 full

673
00:54:04,680 --> 00:54:07,529
because I had to learn how to research
stuff

674
00:54:07,530 --> 00:54:11,070
how am I going to communicate it and
then I could get that feedback and

675
00:54:11,070 --> 00:54:16,920
improve upon it so we can add that as
metric and updating our church

676
00:54:16,920 --> 00:54:24,960
knowledgebase inequality of those
contributions um another thing is on the

677
00:54:24,960 --> 00:54:31,620
blue side is very easy how fast you guys
detected how fast you guys fix it

678
00:54:31,620 --> 00:54:35,910
hum what was the number of incidents
that you handle and how well do you

679
00:54:35,910 --> 00:54:42,660
manage those took em from everything in
addition that we do provide for updating

680
00:54:42,660 --> 00:54:46,620
that knowledge base and keeping some
update i think that the main two metrics

681
00:54:46,620 --> 00:54:52,740
for blue are the last two once time to
detect time to remediation to target the

682
00:54:52,740 --> 00:54:59,040
two main metrics that you should be
looking at a blue team and yeah I'm over

683
00:54:59,040 --> 00:55:07,740
my time so guys just keep calm and think
purple well we're all developer team and

684
00:55:07,740 --> 00:55:10,770
bit thanks to disguise that did all of
the review of my slides and

685
00:55:14,400 --> 00:55:17,039
yeah

