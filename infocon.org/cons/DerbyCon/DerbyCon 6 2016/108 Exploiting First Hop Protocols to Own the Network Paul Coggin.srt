1
00:00:00,000 --> 00:00:05,220
ok we'll get started appreciate a
everyone showing up today to hear this

2
00:00:05,220 --> 00:00:11,519
talk this afternoon Bob so I'm Paul
Coggan I'm a my backgrounds network

3
00:00:11,519 --> 00:00:15,179
security architect the spend a lot of
time doing penetration tested

4
00:00:15,179 --> 00:00:23,460
architecture reviews telco service
provider mostly working at a layers one

5
00:00:23,460 --> 00:00:27,210
through three of us are models where I
spent majority my career either building

6
00:00:27,210 --> 00:00:30,810
the networks or trying to figure out how
to secure break into the network's so

7
00:00:30,810 --> 00:00:38,969
this hall are a lot of the engagements
that i have been involved with over the

8
00:00:38,969 --> 00:00:43,710
years getting called in to respond to
problems after a customer might have

9
00:00:43,710 --> 00:00:48,989
been hacked or you know just various
projects and what things I've above

10
00:00:48,989 --> 00:00:54,030
noticed that no matter how experienced
the pen test team maybe a lot of times

11
00:00:54,030 --> 00:01:03,210
or the network Bobby compliant might
have been secured that the layer two of

12
00:01:03,210 --> 00:01:07,830
us our model is missed their blood the
focus is on those higher layers because

13
00:01:07,830 --> 00:01:10,649
we have all the automated tools to knock
out their low hanging fruit and we're

14
00:01:10,650 --> 00:01:14,490
going skating and liberating the windows
boxes but in many cases were missing

15
00:01:14,490 --> 00:01:20,070
that low hanging fruit that just pulling
up our shark will catch in I got

16
00:01:20,070 --> 00:01:24,508
inspired to do this engagement because i
worked on and on a really large network

17
00:01:24,509 --> 00:01:33,060
junior broke a cisco huge network and
lots of stuff popped in which went in

18
00:01:33,060 --> 00:01:36,540
after that the engagement was almost
completely over with and start pulling

19
00:01:36,540 --> 00:01:39,750
wire shark and within you know just a
few minutes literally just took a few

20
00:01:39,750 --> 00:01:47,430
minutes it was just like 7-8 high-level
vulnerabilities picked up his prices

21
00:01:47,430 --> 00:01:52,530
wireshark captured on the wire and they
say the images maybe just realize how

22
00:01:52,530 --> 00:01:57,090
much it's being missed in so many of the
networks that are being audited and

23
00:01:57,090 --> 00:02:00,689
tested and we want to point out some
things to make sure they were doing due

24
00:02:00,689 --> 00:02:03,869
diligence and working the whole OSI
model stack and not just looking at

25
00:02:03,869 --> 00:02:08,489
those higher layers so you know
therefore up there something else that I

26
00:02:08,489 --> 00:02:12,629
was at a security conference in the
light will just say the last few years

27
00:02:12,629 --> 00:02:13,310
out

28
00:02:13,310 --> 00:02:19,489
security conference at a hotel i was
teaching one of the guys in the class i

29
00:02:19,489 --> 00:02:23,000
was talking about pulling up wireshark
he started pulling up pulled up is what

30
00:02:23,000 --> 00:02:27,440
we call CDP protocol here in the network
world of cisco guys we use the CDP

31
00:02:27,440 --> 00:02:33,500
protocol to understand what is the only
other side of a network link we can tell

32
00:02:33,500 --> 00:02:37,190
whether were you can log into a router
or switch and you can tell what other

33
00:02:37,190 --> 00:02:41,780
kind of router switch you might be
logged into or on the connected to so

34
00:02:41,780 --> 00:02:44,720
that you can map out that Network you
know everybody's gotta know we're

35
00:02:44,720 --> 00:02:48,470
drawing but it's never up to date but
you can you see p to go and map out what

36
00:02:48,470 --> 00:02:53,000
is actually there in anything but cisco
shopping with the LDP on your HP adtran

37
00:02:53,000 --> 00:02:57,260
would have you been on the cisco would
use gdp and it's going to go and tell

38
00:02:57,260 --> 00:03:00,500
you lots of information about that
device tell you about the routers the

39
00:03:00,500 --> 00:03:04,700
switch software what kind of hardware
platform it is what interfaces you're

40
00:03:04,700 --> 00:03:09,048
connected into and where you can go and
understand your network and save your

41
00:03:09,049 --> 00:03:12,349
troubleshooting from a ping test
standpoint or if you're doing a

42
00:03:12,349 --> 00:03:13,970
vulnerability assessment

43
00:03:13,970 --> 00:03:18,350
this is great intel to understand what's
happening on the network because it's

44
00:03:18,350 --> 00:03:23,239
been multicast on the wires not crossing
routers it's staying in that local VLAN

45
00:03:23,239 --> 00:03:27,200
that you've got access to if you'll just
pull up our shark in many cases you'll

46
00:03:27,200 --> 00:03:31,399
see the lldp where you're going to see
the cep and in this case when i was at

47
00:03:31,400 --> 00:03:37,850
this hotel teaching class the students
for the CDP in and we started having a

48
00:03:37,850 --> 00:03:41,390
conversation looking at it and he went
in and started doing a Google on that

49
00:03:41,390 --> 00:03:46,040
version of code that was being shown
here is CDP has a different version of

50
00:03:46,040 --> 00:03:53,388
code for this instance and there's like
50 abilities running on that code five

51
00:03:53,389 --> 00:03:57,410
major vulnerabilities just out there
low-hanging fruit and is that a hacker

52
00:03:57,410 --> 00:04:00,799
conference and you got fired and the
hotel's guy five major vulnerabilities

53
00:04:00,799 --> 00:04:06,260
on their core infrastructure being
multicast out on the wire was you didn't

54
00:04:06,260 --> 00:04:10,459
know they possibly had been tested
recently and secured a whole new network

55
00:04:10,459 --> 00:04:17,000
put in that all the right things you
know is what i call the VPT the been

56
00:04:17,000 --> 00:04:21,228
persistent threat the vendor when you
sold a bunch of stuff the vendor with

57
00:04:21,228 --> 00:04:24,200
soda budget stuff is all security if you
don't believe it look at the quote the

58
00:04:24,200 --> 00:04:27,650
game I total mechanical men secure
Network probably put in you know all

59
00:04:27,650 --> 00:04:33,560
kinds of you no bling lots but these are
here to low-hanging 45 vulnerability

60
00:04:33,560 --> 00:04:38,240
just discovered with just a simple
capture hear something is being missed

61
00:04:38,240 --> 00:04:44,659
by a lot of folks multicast is coming on
and it's a very popular protocol in from

62
00:04:44,659 --> 00:04:49,789
a security standpoint we need to get
after this with multicast if you're not

63
00:04:49,789 --> 00:04:54,110
a network I let me give you a real quick
crash course on multicast multicast we

64
00:04:54,110 --> 00:04:57,470
have the layer to what's happening in
local be lines but we also have it in

65
00:04:57,470 --> 00:05:01,789
the routing bicycle over do with
multicast instead of sending instead of

66
00:05:01,789 --> 00:05:05,900
sending a stream for each individual
subscriber that's interested in some

67
00:05:05,900 --> 00:05:09,679
content we can send one straight from
the source and then it gets replicated

68
00:05:09,680 --> 00:05:14,659
so it's a 12 meeting top architecture
will begin with multicast has tons of

69
00:05:14,659 --> 00:05:18,349
applications work but most of my time
working with multicast where I really

70
00:05:18,349 --> 00:05:22,880
learned it was in the cable TV industry
spent many years helping cable a

71
00:05:22,880 --> 00:05:27,560
telephone companies get into the cable
TV business where we with map TV

72
00:05:27,560 --> 00:05:30,830
channels when you're sitting at home hit
your clicker what you're most likely

73
00:05:30,830 --> 00:05:31,340
doing there

74
00:05:31,340 --> 00:05:35,479
your TV channels or mouth actually to an
IP multicast group so when you're

75
00:05:35,479 --> 00:05:38,960
hitting their clicker you're changing IP
multicast streams and that's where I

76
00:05:38,960 --> 00:05:42,380
learned from so they could be one of me
so they got one stream headed out to

77
00:05:42,380 --> 00:05:46,370
thousands of their customers and there's
lots of other applications saying

78
00:05:46,370 --> 00:05:50,870
tactical networks would say the stock
market except where you may see a

79
00:05:50,870 --> 00:05:57,140
multicast and answering his starts
hitting your router's in the routed

80
00:05:57,140 --> 00:06:01,640
world you're going to have it's good
there's gonna be a protocol called him

81
00:06:01,640 --> 00:06:05,659
it's going to either the multiple
variants of him that can be used in

82
00:06:05,659 --> 00:06:09,380
people's go is depending on your routing
protocols in your routing protocols

83
00:06:09,380 --> 00:06:13,460
typically is going forward traffic based
on the destination with multicast is

84
00:06:13,460 --> 00:06:16,370
going to make a decision whether it's
going forward traffic based on the

85
00:06:16,370 --> 00:06:20,930
source if it cannot go in trackback a
source that is trying to source

86
00:06:20,930 --> 00:06:24,020
multicast traffic and streaming on the
network if you cannot see it in the

87
00:06:24,020 --> 00:06:25,840
routing table a path back

88
00:06:25,840 --> 00:06:30,909
back to that source they will forward
its called reverse path forward rule and

89
00:06:30,910 --> 00:06:33,910
so multicast is a little different in
the way of thinking when it comes to the

90
00:06:33,910 --> 00:06:37,660
routing but know that the multi the
multicast is depending on your router

91
00:06:37,660 --> 00:06:44,889
collector ospf your eigrp what have you
or your bgp it's got that dependency and

92
00:06:44,889 --> 00:06:49,270
so that's what's happening and then the
picture and watch you from a security

93
00:06:49,270 --> 00:06:53,440
standpoint from up with you guys
auditors . that you know the C&D guys

94
00:06:53,440 --> 00:06:57,310
that the Blue team you want but you one
thing I want you to look at and i'm

95
00:06:57,310 --> 00:07:02,169
gonna show you some slides of you is is
these routers bleeding in leaking out

96
00:07:02,169 --> 00:07:05,979
too much information in here to these
these user vlans here and what's

97
00:07:05,979 --> 00:07:09,159
happening down here in the user vlans
down here to layer to the primarily

98
00:07:09,160 --> 00:07:15,760
going to talk about is your whether your
set-top box at home or some other

99
00:07:15,760 --> 00:07:19,330
multicast application you have at your
work they're going to be joining in

100
00:07:19,330 --> 00:07:23,859
sending request to join multicast
streams and it's going to those those

101
00:07:23,860 --> 00:07:27,729
requests to go to get the router the
router will going to calculate a

102
00:07:27,729 --> 00:07:32,530
algorithm to determine how the for
traffic through the network and get it

103
00:07:32,530 --> 00:07:37,388
to the subscribers need traffic but what
if you what if you have some subscribers

104
00:07:37,389 --> 00:07:41,620
and have access to their computer like
most of the network's I've spent my

105
00:07:41,620 --> 00:07:45,190
career working in we have full-blown
access and we can go and do whatever we

106
00:07:45,190 --> 00:07:50,680
want to do or if you don't you could
bring in a computer from home you got

107
00:07:50,680 --> 00:07:53,470
developers that have access to the
network and God knows what those

108
00:07:53,470 --> 00:07:58,690
developers are writing code for in was
to keep was to keep someone from

109
00:07:58,690 --> 00:08:03,760
perpetrating another develop another
subscriber the network and sending

110
00:08:03,760 --> 00:08:07,900
request up to the routers to pull more
traffic then you could possibly really

111
00:08:07,900 --> 00:08:11,138
need and be to support on that Network
and that's going to happen with that

112
00:08:11,139 --> 00:08:15,910
igmp protocol that's what you're going
to see in the layer 2 so here's here's a

113
00:08:15,910 --> 00:08:19,870
quick peek app what you wanted what you
guys will look for whether you're doing

114
00:08:19,870 --> 00:08:24,340
lets you whether your blue or red
whatever team you working on you want to

115
00:08:24,340 --> 00:08:28,659
go and pull up wireshark and look for
that igmp are you see an igmp do you

116
00:08:28,660 --> 00:08:33,339
know that your company your organization
your dot com dotnet . or whatever you

117
00:08:33,339 --> 00:08:36,940
know . . me whatever you might be a part
of our you should you be seeing this I

118
00:08:36,940 --> 00:08:38,209
GMP traffic for you

119
00:08:38,208 --> 00:08:41,779
actually do you actually have approved
multicast applications out there why are

120
00:08:41,779 --> 00:08:45,230
you seeing it and then going to ask
yourself is it secure we're using a

121
00:08:45,230 --> 00:08:48,230
secure version will be doing version one
version to version 3

122
00:08:48,949 --> 00:08:56,329
how's that implemented and what then at
the same time I jonet architectures

123
00:08:56,329 --> 00:09:01,638
routers when those routers time to were
those subscribers vlans are you seeing

124
00:09:01,639 --> 00:09:07,189
the $TIME p.m. protocol the multicast
routing protocol if you are why the only

125
00:09:07,189 --> 00:09:10,550
reason that you should be seen the PM
protocol here we're out there doing

126
00:09:10,550 --> 00:09:16,040
auditing your pen testing is if they
have redundant routers go in terminating

127
00:09:16,040 --> 00:09:19,998
into that be land where your users are
because the routers will be talking to

128
00:09:19,999 --> 00:09:23,660
each other for redundancy fell over but
the question you need to ask ourselves

129
00:09:23,660 --> 00:09:30,259
as auditors in a no defenders and in the
red team and maybe but I spend most of

130
00:09:30,259 --> 00:09:32,329
my time these days the red team

131
00:09:32,329 --> 00:09:35,689
I won't ask myself what does that attack
surface there

132
00:09:35,689 --> 00:09:39,889
did they implemented correctly what does
router config look like did they harden

133
00:09:39,889 --> 00:09:43,429
that trust relationship because I see
this here i got started asking myself

134
00:09:43,429 --> 00:09:47,269
the question and we need to go to start
interrogating those network guys as

135
00:09:47,269 --> 00:09:50,329
painful as it is to go and deal with us
know what guys I can say because I'm one

136
00:09:50,329 --> 00:09:53,839
no guys don't like anybody getting in
our business when it comes to security

137
00:09:53,839 --> 00:09:59,420
we know everything just ask us we know
access-list we know subnetting we got it

138
00:09:59,420 --> 00:10:04,248
will be GP we got it but we really need
to interrogate them because that's what

139
00:10:04,249 --> 00:10:07,999
i spend like a good living that is
breaking into the networks that have got

140
00:10:07,999 --> 00:10:09,799
it because they don't got it

141
00:10:09,799 --> 00:10:16,009
you need to go pro so here so here's how
we might be because a crash course some

142
00:10:16,009 --> 00:10:21,589
ideas on how to possibly going to attack
multicast all that igmp you guys have

143
00:10:21,589 --> 00:10:26,629
been through sands training you know you
know how to use scaping why could we not

144
00:10:26,629 --> 00:10:30,290
go and take some of those packets
understand the structure and go script

145
00:10:30,290 --> 00:10:37,219
up a to landscaping write some Python
and automate sending enumerated

146
00:10:37,220 --> 00:10:40,459
multicast and just going out in the
numerator different multicast groups

147
00:10:40,459 --> 00:10:42,189
that we may

148
00:10:42,190 --> 00:10:45,700
become aware of the recon and pull
traffic

149
00:10:46,360 --> 00:10:50,170
subscribe to traffic and pull down in
the Navy land and calls the network to

150
00:10:50,170 --> 00:10:55,300
possibly meltdown i have personally seen
i responded to an incident many years

151
00:10:55,300 --> 00:10:58,810
ago where a developer he was he was not
being malicious and always doing that

152
00:10:58,810 --> 00:11:03,849
doing his job development network code
he was doing a multicast application and

153
00:11:03,850 --> 00:11:07,900
he melted up large enterprise down this
this place had the most expensive

154
00:11:07,900 --> 00:11:10,630
blinking lights you can put in the
network

155
00:11:10,630 --> 00:11:16,930
I mean there was a beautiful network is
in in the developing the developer role

156
00:11:16,930 --> 00:11:22,989
the whole thing over with a multicast
don't be accidentally created so have we

157
00:11:22,990 --> 00:11:28,240
gone so that so that's a vector and then
from the routing standpoint what if they

158
00:11:28,240 --> 00:11:30,520
have these trust relationships are open

159
00:11:30,520 --> 00:11:36,520
why can we not go and act like a router
if if they're sending routing protocols

160
00:11:36,520 --> 00:11:39,699
down into the VLAN with the subscribers
consumed and they have not locked down

161
00:11:39,700 --> 00:11:41,260
that trust relationship

162
00:11:41,260 --> 00:11:48,490
why can we not go and boot up quagga in
a vm or go in a download some cope and

163
00:11:48,490 --> 00:11:52,570
fire up gns3 and like a cisco router or
fire up at juniper router you know go

164
00:11:52,570 --> 00:11:58,750
ahead go get on ebay and buy router in
enjoying their network

165
00:11:59,530 --> 00:12:03,370
it not only know join the ospf join the
hrp whatever you have and join the $TIME

166
00:12:03,370 --> 00:12:09,670
p.m. conversation and inject a whole new
source now I will warn you before you do

167
00:12:09,670 --> 00:12:12,670
attack some of these that this is the
top of the tax you need to make sure

168
00:12:12,670 --> 00:12:17,589
it's in your scope of work in your rules
of engagement because you don't want to

169
00:12:17,590 --> 00:12:21,670
be that guy that rolls over the
production network is if you make that

170
00:12:21,670 --> 00:12:23,199
help desks lineup

171
00:12:23,200 --> 00:12:27,220
everything's off you're going to get to
meet those executives that you might

172
00:12:27,220 --> 00:12:30,610
have just seen pictures of and seen
memos from you're going to get to meet

173
00:12:30,610 --> 00:12:31,180
them

174
00:12:31,180 --> 00:12:37,390
it's gonna be a really interesting
conversation that these people have been

175
00:12:37,390 --> 00:12:40,990
in places where networks got rolled over
in my younger days out of ignorance and

176
00:12:40,990 --> 00:12:43,990
in thick enthusiasm useful youthful
enthusiasm

177
00:12:44,960 --> 00:12:49,580
there's lots of stories I could tell you
maybe maybe later I could tell you i can

178
00:12:49,580 --> 00:12:55,610
tell you some stories but wicked
lightweight but we can go and easily

179
00:12:55,610 --> 00:12:59,930
crack these crab these packets to go and
perpetrate a router and manipulate the

180
00:12:59,930 --> 00:13:04,969
protocol so so what we want to do from a
defensive standpoint we're going to

181
00:13:04,970 --> 00:13:08,600
start seeing this we go to audit we want
to go in and hold these know where guys

182
00:13:08,600 --> 00:13:11,810
accountable and make them give up those
router config make him give up the

183
00:13:11,810 --> 00:13:17,239
switch configs going to collect pcap and
go and hit different be lands and audit

184
00:13:17,240 --> 00:13:21,710
these networks in and prove out that
they've actually secure this network

185
00:13:21,710 --> 00:13:27,560
infrastructure and lock down that trust
relationship both at layer 2 layer 3 to

186
00:13:27,560 --> 00:13:30,469
make sure somebody's not spooked and
traffic what about it later two factions

187
00:13:30,470 --> 00:13:35,390
weekend were in the same VLAN what is
the keep me from spoofing your IP

188
00:13:35,390 --> 00:13:39,170
address in the VLAN and subscribing to
multicast traffic and make it look like

189
00:13:39,170 --> 00:13:42,170
you as the one that is killing the
network

190
00:13:43,130 --> 00:13:47,210
I'm not hitting the router I'm just I
mean I'm just saying that first hot

191
00:13:47,210 --> 00:13:50,150
telling the router want a multicast
stream and I'm making a little like you

192
00:13:50,150 --> 00:13:55,160
only read the only thing you could point
back use the mac address it in the spot

193
00:13:55,160 --> 00:13:58,160
and i can tell you this is low-hanging
fruit is most places involved the most

194
00:13:58,160 --> 00:14:01,550
expensive blinky lights they bought the
Brocade the juniper the cisco but

195
00:14:01,550 --> 00:14:05,060
they've now implemented the layer to
security or with mobile of the

196
00:14:05,060 --> 00:14:09,920
organizations are very scared eternal
layer to security and so this is

197
00:14:09,920 --> 00:14:12,560
something this is a this is low-hanging
fruit with you guys that are out there

198
00:14:12,560 --> 00:14:21,199
to an auditing in pen test and there's
another piece of a this is some

199
00:14:21,200 --> 00:14:24,200
old-school stuff i mean this has been
around since ethernet I mean jeez where

200
00:14:24,200 --> 00:14:30,230
everybody's worried about Daisy rose and
we have been dealt with day eighties but

201
00:14:30,230 --> 00:14:33,860
in heaven you're going to put the
wireshark you see the span 3 i've seen

202
00:14:33,860 --> 00:14:38,000
multiple networks when i was doing
consulting multiple networks get taken

203
00:14:38,000 --> 00:14:42,680
out with span tree and with the host
pantry is against layer 2 and we've got

204
00:14:42,680 --> 00:14:45,439
these people with column the flat earth
people where they build these huge

205
00:14:45,440 --> 00:14:49,760
enormous flat networks across campuses
across their large manufacturing

206
00:14:49,760 --> 00:14:53,720
organizations and all it takes and
what's what happens you got all these

207
00:14:53,720 --> 00:14:55,340
switches that are put together and then

208
00:14:55,340 --> 00:15:00,200
you got the spanning tree protocol the
lady named Lydia perlman developed back

209
00:15:00,200 --> 00:15:05,180
when she worked for digital equipment so
that we could go in do a calculation to

210
00:15:05,180 --> 00:15:08,989
find the loops in the network and then
kill that loop in the networking works

211
00:15:08,990 --> 00:15:13,730
for fishing there's multiple versions of
span three think that a but it's still

212
00:15:13,730 --> 00:15:18,290
some low-hanging fruit to go target in
I've seen either of us personally have

213
00:15:18,290 --> 00:15:22,430
seen in a really expensive network large
network for manufacturing regulation get

214
00:15:22,430 --> 00:15:26,209
taken out because somebody with the best
bob and the ball one of those bridge /

215
00:15:26,210 --> 00:15:32,480
router / access points last toaster
microwave boxes you need a best buy you

216
00:15:32,480 --> 00:15:39,110
know and plugged into the network and it
had a lower bridge ID in the network

217
00:15:39,110 --> 00:15:44,990
Rican verge to that low you know fifty
dollars switch enrolled manual control

218
00:15:44,990 --> 00:15:50,630
the production / I mean just like Jesus
and that's easy to mitigate a game with

219
00:15:50,630 --> 00:15:54,110
you could go you've got the tools and
most of you remember your HP or juniper

220
00:15:54,110 --> 00:15:57,830
and cisco you brocade the tools are
there we bought the blinky lights the

221
00:15:57,830 --> 00:16:03,410
CIO paid far we sold a moment because we
all wanted no indication of cisco my

222
00:16:03,410 --> 00:16:07,370
resume you get that you know going to
look upon monster know you hate the

223
00:16:07,370 --> 00:16:10,400
cisco guys get jobs right we bought
these blinky last but we haven't

224
00:16:10,400 --> 00:16:18,020
configured and secure them so here's
another example some things are being

225
00:16:18,020 --> 00:16:22,310
overlooked when it comes to the layer
two protocols is a like dynamic trunking

226
00:16:22,310 --> 00:16:26,599
protocol where you can dynamically the
the switches will dynamically going to

227
00:16:26,600 --> 00:16:30,290
be lame trunking where you can multiplex
multiple vlans across an ethernet port

228
00:16:30,290 --> 00:16:34,579
like think about like your voice over a
people were you know you gotta you gotta

229
00:16:34,580 --> 00:16:38,120
be land for your pc you gotta be land
for voice it gets multiplex down the

230
00:16:38,120 --> 00:16:46,130
line you got that to dynamically will
adjust well with adt protocol in your if

231
00:16:46,130 --> 00:16:49,220
you'll talk about protocol what cannot
spoof that protocol wincraft package

232
00:16:49,220 --> 00:16:54,050
using space camping or if your windows
impaired like me cold salt packet

233
00:16:54,050 --> 00:16:59,780
builder and . click and send packets of
the wire or frames in this case where

234
00:16:59,780 --> 00:17:03,829
you will need to get off the wire and
manipulate that switch to get drop us

235
00:17:03,830 --> 00:17:09,049
into Abby land that we were not supposed
to be things that we need to be looking

236
00:17:09,049 --> 00:17:13,368
and we're missing woman go out and I do
audits right there doing audits now if

237
00:17:13,368 --> 00:17:16,039
you're doing testing this is one of
those things again you need to go and

238
00:17:16,039 --> 00:17:19,609
make a suggestion to go look at I
probably wouldn't go into some of these

239
00:17:19,609 --> 00:17:23,809
things I wouldn't do in a normal test
but unless it's in my specifically my

240
00:17:23,809 --> 00:17:28,668
rules of engagement another thing we
could do is a happy about going to take

241
00:17:28,669 --> 00:17:33,110
it to like your city and if you don't
want if you're not good with python you

242
00:17:33,110 --> 00:17:36,498
don't know scrappy yet you can go
download your city it's on your calorie

243
00:17:36,499 --> 00:17:42,379
described and into BB land tagging so
they got you dropped into the Atlantean

244
00:17:42,379 --> 00:17:46,399
but we know that there's some
interesting systems over and be like 40

245
00:17:46,399 --> 00:17:49,908
maybe we know we're fixing to get fired
if we want to take the network out we

246
00:17:49,909 --> 00:17:54,109
want you know we got a row we've got a
rogue employee and you know he knows it

247
00:17:54,109 --> 00:17:57,710
over say here that I'm in because he's
in VLAN 10 but he wants to go and get to

248
00:17:57,710 --> 00:18:01,940
a server and Peele and 40 on his way out
the door he could go in and use your

249
00:18:01,940 --> 00:18:06,230
city a double deep double tagging sell
us which removes say that outer VLAN tag

250
00:18:06,230 --> 00:18:10,429
and then shoots himself over into the
VLAN that he wanted to be in the land 40

251
00:18:10,429 --> 00:18:13,429
he just jumped your veal and your trust
relationships

252
00:18:14,809 --> 00:18:21,230
this is my this again is a lot of
whatever i create slides something you

253
00:18:21,230 --> 00:18:25,730
should know about me is I create slide
there's a story behind it there's their

254
00:18:25,730 --> 00:18:31,820
people behind these slides and so this
one another big Network we have the vtp

255
00:18:31,820 --> 00:18:35,539
protocol where we go in centralized we
go in one switch this is my old school

256
00:18:35,539 --> 00:18:38,690
stuff we're going once which create / be
lands and then we're going to set up

257
00:18:38,690 --> 00:18:43,279
trunking in the vlans can get propagated
down to our client switches makes it

258
00:18:43,279 --> 00:18:49,249
really easy we got a centralized place
to build our networks using the vtp but

259
00:18:49,249 --> 00:18:50,629
here's the problem

260
00:18:50,629 --> 00:18:54,259
here's the problem it's real nice and
convenient we could go and create all

261
00:18:54,259 --> 00:18:59,929
our vlans and then we can propagate down
and associated cetera but what happens

262
00:18:59,929 --> 00:19:03,799
any of the networks that you go out
there and audit you know that they're

263
00:19:03,799 --> 00:19:06,889
using the default which are blank or
whatever they learned when they were

264
00:19:06,889 --> 00:19:14,250
taking a course what happens here is you
in this

265
00:19:14,250 --> 00:19:21,210
deserves a customer to create a huge
huge network and they had a lab network

266
00:19:21,210 --> 00:19:27,840
and they were always in that lab network
making changes which will update their

267
00:19:27,840 --> 00:19:32,820
in this case the btp virtual trunking
protocol he would have updated database

268
00:19:32,820 --> 00:19:36,419
so if they don't they had a higher
revenue that database and they had a

269
00:19:36,420 --> 00:19:43,620
network switch go out and so the nowhere
Bubba goes in plugs in the the lab

270
00:19:43,620 --> 00:19:48,989
switch into the production Network he
did not secure the the vtp domain

271
00:19:48,990 --> 00:19:53,790
password enter the WEP domain domain and
had his separate what they were using in

272
00:19:53,790 --> 00:19:59,460
the lab was using the same one same vp
domain name and he did not have a

273
00:19:59,460 --> 00:20:05,340
password on the vtp protocol so when he
plugged in that that switch from the lab

274
00:20:05,340 --> 00:20:09,689
it's sink the databases up in the lab
switch over wrote the production switch

275
00:20:09,690 --> 00:20:13,470
lost all the vlans he got to meet the
CEO that day I got the meeting as well

276
00:20:13,470 --> 00:20:18,330
as on the network out there called in to
help him fix it he ended up getting

277
00:20:18,330 --> 00:20:24,240
another job and I gave a recommendation
because I knew that he would never do

278
00:20:24,240 --> 00:20:30,510
that again but it was terrible it was it
was it was terrible you could like most

279
00:20:30,510 --> 00:20:31,560
places

280
00:20:31,560 --> 00:20:35,220
everybody's got documentation until
network crashes or something like that

281
00:20:35,220 --> 00:20:38,940
happens so this is another thing from an
audit standpoint you guys that are out

282
00:20:38,940 --> 00:20:42,030
there doing audits you're doing that
vulnerability assessments are doing

283
00:20:42,030 --> 00:20:43,200
architecture reviews

284
00:20:43,200 --> 00:20:47,130
you gotta dig into those switches and
not in get all of the configs get all of

285
00:20:47,130 --> 00:20:51,540
information don't take don't take that
no we're drawing on a napkin go in there

286
00:20:51,540 --> 00:20:54,960
mainly verify this you know if you're an
insanely huge Network do a statistical

287
00:20:54,960 --> 00:21:00,180
sample to get this information in audit
these guys and this again is one of

288
00:21:00,180 --> 00:21:04,050
those examples from my intestine . a red
team engagement he would never want to

289
00:21:04,050 --> 00:21:07,290
do this to a production environment you
might go and put it in a lab and show

290
00:21:07,290 --> 00:21:12,510
show the teams and allowed you know for
your own salary continuation program

291
00:21:12,510 --> 00:21:17,879
will keep your job over here there's
something really important this is

292
00:21:17,880 --> 00:21:24,660
overlooked by all the network gurus
ninjas tote broadcast storms we put in

293
00:21:24,660 --> 00:21:26,659
these expensive blinky lots

294
00:21:26,659 --> 00:21:31,369
and we have not put in the controls to
throttle this multicast traffic they

295
00:21:31,369 --> 00:21:34,639
were talking about earlier or the
broadcast traffic and you also throw all

296
00:21:34,639 --> 00:21:41,299
the unicast traffic there was there was
a piece of critical infrastructure a

297
00:21:41,299 --> 00:21:44,539
major piece of critical infrastructure i
know i know that's happening in two

298
00:21:44,539 --> 00:21:50,989
places once in Europe and once in the
southeast it happened in the utility

299
00:21:50,989 --> 00:21:53,479
obviously with the utility industry

300
00:21:53,479 --> 00:22:01,970
I a misbehaving device took out a huge
network one of my familiar where they

301
00:22:01,970 --> 00:22:06,710
had to do an emergency shutdown now you
let your mind roaming around where that

302
00:22:06,710 --> 00:22:11,840
is this was all out on the web by too
long ago some articles I read because

303
00:22:11,840 --> 00:22:13,699
they and they had the blankie lives

304
00:22:13,700 --> 00:22:16,879
the organization is huge enough that
they would have the managed switches

305
00:22:16,879 --> 00:22:20,178
even with all the features of knobs but
they did not turn this only because

306
00:22:20,179 --> 00:22:25,460
there was not their malfunction device
calls an emergency shutdown of a I CSK

307
00:22:25,460 --> 00:22:30,859
to control system network and then I
never the network in Europe that got

308
00:22:30,859 --> 00:22:35,029
knocked out like it was similarly the
smart grid Network huge marketing

309
00:22:35,029 --> 00:22:38,330
network got knocked out due to assemble
our ability just didn't turn on the

310
00:22:38,330 --> 00:22:49,609
limit broadcast storms this is one of my
favorites if you're but if you get into

311
00:22:49,609 --> 00:22:52,999
a large enterprise you're going to the
large organizations where they have a

312
00:22:52,999 --> 00:22:56,149
large enough network where they
understand the need for redundancy

313
00:22:56,149 --> 00:23:01,668
you're going to have a router setup in
parallel so that one with one router

314
00:23:01,669 --> 00:23:06,619
fails the the second will automatically
pick up if you're in anything but cisco

315
00:23:06,619 --> 00:23:11,658
shop they're going to be using the VRP
protocol if you're in a hardcore cisco

316
00:23:11,659 --> 00:23:16,489
shop you know if you've got a cisco gal
staff like me they're gonna be hsrp that

317
00:23:16,489 --> 00:23:21,559
they're using most likely and you then
there's another protocol GL BP that you

318
00:23:21,559 --> 00:23:25,609
might be using for global load balancing
and what happens is these routers are

319
00:23:25,609 --> 00:23:29,389
going to be multi casting between them
and they're going to send a heartbeat

320
00:23:29,389 --> 00:23:32,869
between each other and everyone in that
be land is going to see it and

321
00:23:32,869 --> 00:23:36,139
especially the default gateway what
they're going to be shared between each

322
00:23:36,139 --> 00:23:38,479
other and if one of the router spells

323
00:23:38,480 --> 00:23:41,480
the backup will automatically pick it up

324
00:23:42,620 --> 00:23:48,439
here's a quick peek at what you might
see if you guys are auditing of a PRP

325
00:23:48,440 --> 00:23:52,520
and it's showing no authentication here
you can just pull up a pcap you see the

326
00:23:52,520 --> 00:23:58,340
BRP and you can expand and you'll see no
authentication if they're doing with

327
00:23:58,340 --> 00:24:04,220
indication it's gonna be clear text I
never in my career been doing pentesting

328
00:24:04,220 --> 00:24:08,720
architecture reviews security consulting
since 1999 when I got into the

329
00:24:08,720 --> 00:24:14,630
consulting security business I've never
seen these network protocols hash and

330
00:24:14,630 --> 00:24:20,780
encrypted until after they've gotten one
of our reports they are and I've been

331
00:24:20,780 --> 00:24:25,129
there I've been all over the world i
plugged into so many networks intent my

332
00:24:25,130 --> 00:24:31,520
computers have gotten from those
networks but being a science project

333
00:24:31,520 --> 00:24:39,559
themselves come but but they've never
but it's over there either always no

334
00:24:39,559 --> 00:24:44,270
identification which is predominant or
it's gonna be clear text communication

335
00:24:44,270 --> 00:24:49,250
between the devices didn't but don't
worry about there being a hash there

336
00:24:49,250 --> 00:24:53,900
won't be as if you see I hash somebody's
got a hold of them they probably said

337
00:24:53,900 --> 00:24:56,990
they're some of my talks and then gotten
in with an audience from the customers

338
00:24:56,990 --> 00:24:59,990
so with the hsrp here's what the hsrp is
going to a lot

339
00:25:00,799 --> 00:25:05,750
this is the you put the pcap and in most
of the time it's going to be like the

340
00:25:05,750 --> 00:25:09,620
vendors name like Cisco or it's going to
be the name of the organization

341
00:25:09,620 --> 00:25:13,010
something like and it's gonna be in the
clear if they're even using

342
00:25:13,010 --> 00:25:16,850
identification so what can you do that I
want to break this down how simple it is

343
00:25:16,850 --> 00:25:20,870
good to go and you have these
conversations with the with we start

344
00:25:20,870 --> 00:25:24,559
talking to exact talking to the people
who own these assets and they want to go

345
00:25:24,559 --> 00:25:29,690
in in the gate the importance of this is
how easy it is to go down low cal you're

346
00:25:29,690 --> 00:25:33,590
going to pull up wireshark open up your
wireshark get you a quick peek app you

347
00:25:33,590 --> 00:25:38,959
go to coalesce all you download packet
builder import put that in and as quick

348
00:25:38,960 --> 00:25:45,169
as you can go and click on a package you
can change the IP address here you can

349
00:25:45,169 --> 00:25:48,770
go and change the IP address of one of
the routers and that pcap you just go

350
00:25:48,770 --> 00:25:52,039
edited I mean live edit it and

351
00:25:52,039 --> 00:25:58,489
go in and change the priority say the
priority is a 100 on one router 110 on

352
00:25:58,489 --> 00:26:02,690
another router typically what you're
going to see the highest priority is 255

353
00:26:02,690 --> 00:26:08,330
nobody ever uses that it's always some
lower-level number so they're going to

354
00:26:08,330 --> 00:26:12,799
leave you let you have the highest
number it's their use it you go change

355
00:26:12,799 --> 00:26:16,940
that and then know in in in your windows
to you know you're not leave if you

356
00:26:16,940 --> 00:26:22,369
don't do it in linux right but we can do
it in windows this is so easy windows

357
00:26:22,369 --> 00:26:27,289
guy can do you know I want to break it
down we've gotta fix this stuff we gotta

358
00:26:27,289 --> 00:26:34,429
clean these freakin networks of guys and
so we going to really reduce rebuild the

359
00:26:34,429 --> 00:26:38,840
checks on rebuild the checks on the
packet fire baby you are now the router

360
00:26:38,840 --> 00:26:39,619
on the network

361
00:26:39,619 --> 00:26:43,340
here's don't if you're taking notes and
you're gonna go do this to someone you

362
00:26:43,340 --> 00:26:47,629
know if you're authorized on your you
know your scope rules of engagement

363
00:26:47,629 --> 00:26:52,820
remember to turn on IP forwarding
whether you do this attack with scaping

364
00:26:52,820 --> 00:26:57,080
on your linux box or you do windows go
internal not be 40 otherwise you're

365
00:26:57,080 --> 00:27:01,220
gonna be the bit bucket and again we're
going to line up at helpdesk and it's

366
00:27:01,220 --> 00:27:05,389
gonna be the long walk to the sea get
sea-level guys office his conference

367
00:27:05,389 --> 00:27:09,080
room for a meeting you know maybe the
seller continuation program will keep

368
00:27:09,080 --> 00:27:14,090
working for you after that meeting maybe
not but this is how easy it is good

369
00:27:14,090 --> 00:27:18,199
number but you could easily i would
encourage you to learn how to do these

370
00:27:18,200 --> 00:27:22,909
things with skyping because you will
because it's so powerful but you need

371
00:27:22,909 --> 00:27:25,639
some quick and dirty this is how easy it
is

372
00:27:25,639 --> 00:27:30,918
rtv6 nobody's running ipv6 you ask all
the enterprise is nobody's gonna pv6

373
00:27:30,919 --> 00:27:32,870
until you open up wireshark

374
00:27:32,870 --> 00:27:39,559
again some low-hanging fruit you know
you guys are out there doing audits and

375
00:27:39,559 --> 00:27:42,980
you get your you guys are just getting
getting into the trying to get into the

376
00:27:42,980 --> 00:27:46,309
industry you're going behind those guys
with all you know with the resume the

377
00:27:46,309 --> 00:27:51,290
whole first page the resume is all their
search this is some low-hanging fruit

378
00:27:51,290 --> 00:27:55,370
because their everybody's metasploit and
their value everybody's you know it's

379
00:27:55,370 --> 00:27:59,209
all good tools and it's all great needs
to be done and he's being audited but

380
00:27:59,210 --> 00:28:03,980
there's more to this there's out this
hole with our model and burp burp and

381
00:28:03,980 --> 00:28:07,580
medicine but they're wonderful those
higher-level place the horrible double

382
00:28:07,580 --> 00:28:14,330
stack but we can book miss the layer to
layer three guys so we got the b6 going

383
00:28:14,330 --> 00:28:19,370
get some low-hanging fruit majority of
the network's you plug into you could go

384
00:28:19,370 --> 00:28:20,419
and easily

385
00:28:20,420 --> 00:28:25,220
there's a router is out there sending
router advertisements you can go into

386
00:28:25,220 --> 00:28:29,660
conditions that there's a host or out
there soon dhcpv6 request you could

387
00:28:29,660 --> 00:28:33,950
easily go and send router advertisements
a game picture tool but what I would

388
00:28:33,950 --> 00:28:39,920
recommend to to respond to your cut to
the end users and sending out these a

389
00:28:39,920 --> 00:28:45,980
multicast packets looking for a router
checkout char on some guys over in

390
00:28:45,980 --> 00:28:53,870
Europe I know Antonio out of a grease
and you know ray guys from dr NW develop

391
00:28:53,870 --> 00:28:59,899
this tool char on you you know you can
check out evil Foca and you could go and

392
00:28:59,900 --> 00:29:02,780
turn around you know you had the
old-school can enable enter cap

393
00:29:02,780 --> 00:29:05,389
man-in-the-middle well this is how
you're going to do that man in the

394
00:29:05,390 --> 00:29:07,400
middle attack without PB sick

395
00:29:07,400 --> 00:29:10,730
this is low-hanging fruit this is going
to work and you're not gonna knock the

396
00:29:10,730 --> 00:29:14,840
network out if you do it correctly and
then you can basically do a manual

397
00:29:14,840 --> 00:29:20,149
between the router and the host and
similarly again we don't have the cane

398
00:29:20,150 --> 00:29:25,190
in a blender cow are poison attacks with
ipv6 because it's we're doing multicast

399
00:29:25,190 --> 00:29:30,050
now we're not doing broadcast with ipv6
well when those neighbors say the host

400
00:29:30,050 --> 00:29:32,389
in this in the VLAN want to communicate
with each other

401
00:29:32,390 --> 00:29:35,780
where's the neighbor discovery protocol
that you're also seeing out there in the

402
00:29:35,780 --> 00:29:41,090
wire that we could go spook easily again
with char on evil Foca you know if your

403
00:29:41,090 --> 00:29:44,550
godly pop on skills you might go and
you're scalping

404
00:29:44,550 --> 00:29:49,139
I'm I'm you know I'm just gonna pull up
whatever is easy i'm lazy i'm gonna pull

405
00:29:49,140 --> 00:29:58,260
up where we got a google . click on fire
so again going back to layer to hear

406
00:29:58,260 --> 00:30:00,420
something we're really missing it

407
00:30:00,420 --> 00:30:04,140
i bought we're going into organizations
in doing audits and they're paying the

408
00:30:04,140 --> 00:30:08,340
you know the top companies in the world
to come in and audit their networks and

409
00:30:08,340 --> 00:30:13,439
people men data centers that the cloud a
private cloud the hybrid cloud the

410
00:30:13,440 --> 00:30:20,520
public cloud cloud everybody's doing
clouds right number this cloud crazy

411
00:30:20,520 --> 00:30:24,090
when you get into this cloud the
regardless of whether who knew whatever

412
00:30:24,090 --> 00:30:29,399
your vendors and whoever you know the
ppt that you bolt the virtual that been

413
00:30:29,400 --> 00:30:31,920
persistent threat that's a doing the
cloud for you

414
00:30:31,920 --> 00:30:37,290
who would you go in what we're doing
what we're seeing what we can find out

415
00:30:37,290 --> 00:30:41,430
what I've seen in the past you get in
that cloud if you can just get one hand

416
00:30:41,430 --> 00:30:47,100
hold in that Network it is just one big
flat network the flat earth guy was on

417
00:30:47,100 --> 00:30:53,550
the cloud team he's going to got in my
Microsoft cloud server or vmware server

418
00:30:53,550 --> 00:30:59,820
now he's a cloud guy so he's a flat
cloud now I guess if you can just get

419
00:30:59,820 --> 00:31:05,100
one hand holding you can pivot
horizontally at will through these these

420
00:31:05,100 --> 00:31:11,550
DMZ xin these Network segments and
spread influence in the been an example

421
00:31:11,550 --> 00:31:16,440
I'll give your hair is a all the end at
the same time if you can get off into

422
00:31:16,440 --> 00:31:21,540
that DMZ and if you will start pivoting
horizontally you will find that there is

423
00:31:21,540 --> 00:31:25,379
a ton of trust relationships waiting to
be discovered back into the more

424
00:31:25,380 --> 00:31:29,700
sensitive networks once you get that
initial handhold because nothing because

425
00:31:29,700 --> 00:31:33,090
the flat earth guys have convinced
everyone that nobody is going to break

426
00:31:33,090 --> 00:31:36,600
it break into the DMZ and if they did
they're not going to do anything and so

427
00:31:36,600 --> 00:31:40,110
nobody goes and secures all those trust
relationships back to the firewall back

428
00:31:40,110 --> 00:31:46,260
into the keys of the kingdom so one
example went into one organization they

429
00:31:46,899 --> 00:31:52,779
they were doing a business-to-business
transactions of some building

430
00:31:52,779 --> 00:31:57,249
information there was no reason for
anyone other than these two IP addresses

431
00:31:57,249 --> 00:32:00,009
these two organizations to communicate
the head wide open

432
00:32:00,009 --> 00:32:03,519
we discovered when you hit them with
tape with a JBoss attack got a command

433
00:32:03,519 --> 00:32:08,950
show and scrub mrs. Reed you got to keep
some old crusty network guys like me

434
00:32:08,950 --> 00:32:14,499
around guys know solaris as you're in
there is reading this little kid they

435
00:32:14,499 --> 00:32:18,580
kept the the number above around one you
some new things like solaris when they

436
00:32:18,580 --> 00:32:23,199
got into because the kids got into this
jay balls and it was running on solaris

437
00:32:23,200 --> 00:32:25,839
so they didn't know what to do with
solaris what is the solaris said what

438
00:32:25,839 --> 00:32:30,729
they know linux but I don't know solaris
well though network but no spoilers if

439
00:32:30,729 --> 00:32:35,649
there's a there's a trick you got active
directory on windows and the unix world

440
00:32:35,649 --> 00:32:40,149
you got what's called is which you know
pretty daze ldp do for you young guys

441
00:32:40,149 --> 00:32:43,658
there's this thing called is network
information services that they use for

442
00:32:43,659 --> 00:32:48,009
unique services for a directory service
and it turns out if you could get a

443
00:32:48,009 --> 00:32:55,149
user-level privilege only own the one of
these boxes like the solaris box running

444
00:32:55,149 --> 00:33:01,658
in is version one you could you could
get it to spit out the shadow file with

445
00:33:01,659 --> 00:33:06,519
user-level privilege and so we were able
to get that and be more able to pivot at

446
00:33:06,519 --> 00:33:10,179
will through this network we dump their
password would dump all their password

447
00:33:10,179 --> 00:33:13,960
hashes and there's another thing i want
to learn know about this a quick tip if

448
00:33:13,960 --> 00:33:21,940
I have never in my career found in is a
solaris box if you find a slurs box out

449
00:33:21,940 --> 00:33:28,479
there where you can touch it i will buy
your lunch i'll buy your dinner but I'm

450
00:33:28,479 --> 00:33:30,789
in town hit me

451
00:33:30,789 --> 00:33:35,200
aio to you can show me that they do
they're not doing active directory

452
00:33:35,200 --> 00:33:39,639
integration with their in is without
solaris box and what that's going to

453
00:33:39,639 --> 00:33:43,178
tell you is you're going to know that
they got an eight character password so

454
00:33:43,179 --> 00:33:45,940
when you can get on when you find a
vulnerability you're able to dump his

455
00:33:45,940 --> 00:33:47,859
password hashes off at solaris box

456
00:33:47,859 --> 00:33:51,249
you know that don't to pop the windows
boxes all you gotta do is Craig a

457
00:33:51,249 --> 00:33:54,490
character's we're off to the races baby

458
00:33:54,490 --> 00:33:58,540
we're gonna be screenshots it's gonna be
a part of PowerPoint deck this thing

459
00:33:58,540 --> 00:34:05,260
when we get done with this project so
first things on the but put the lock

460
00:34:05,260 --> 00:34:09,550
that down going to use things like
private vlans VLAN access list because

461
00:34:09,550 --> 00:34:12,730
some of these networks you can't go in
reverse engineer not doing that they've

462
00:34:12,730 --> 00:34:17,649
been put in place there too huge for two
sprawling go so we could go in without

463
00:34:17,649 --> 00:34:21,339
going to be doing subnets things we
could go in and lock down that later too

464
00:34:21,340 --> 00:34:24,639
with probably go and you could go and
use that vmware it's got the capability

465
00:34:24,639 --> 00:34:29,710
they support you know your nsx you can
go into lockdown at layer 2 and if

466
00:34:29,710 --> 00:34:33,310
you're in I say it a cisco brocade
juniper networks could go to lock down

467
00:34:33,310 --> 00:34:35,259
your lair to no reason not to

468
00:34:35,260 --> 00:34:38,980
there's a big thing got a good
visualization on this network and later

469
00:34:38,980 --> 00:34:42,580
2nite just layer 3 at the that the major
choke points of the network at the

470
00:34:42,580 --> 00:34:47,649
aggregation and core that get that get
it down to get visibility down a layer 2

471
00:34:47,649 --> 00:34:49,029
at the edge

472
00:34:49,030 --> 00:34:52,240
how do we know what those users are
doing that insider threat us all some

473
00:34:52,239 --> 00:34:56,799
statistics other day from the sands of
the coming from the field like over

474
00:34:56,800 --> 00:35:02,140
thirty percent of the security guys are
seeing insider threat those insider

475
00:35:02,140 --> 00:35:05,740
threats are sitting out there in those
layer two nipples be lands we have

476
00:35:05,740 --> 00:35:08,439
visibility down there how do we know
what they're doing

477
00:35:08,440 --> 00:35:12,310
yep I mean certain we can begin pillaged
and plundered and their lair to we're

478
00:35:12,310 --> 00:35:17,440
looking for traffic you know a couple
router hops north were in we got we got

479
00:35:17,440 --> 00:35:20,980
all hell breaking loose down in a veal
and are we looking for that week what

480
00:35:20,980 --> 00:35:28,000
can we do the forensics and the you know
it again going along again that they've

481
00:35:28,000 --> 00:35:31,300
been in later to go to log analyst
relationship and another big thing to

482
00:35:31,300 --> 00:35:35,920
drive home media is I'm a bum big into
separation roles and responsibilities

483
00:35:35,920 --> 00:35:40,270
put in network taps if you got the
budget we got a small network you might

484
00:35:40,270 --> 00:35:45,310
not be able to budget but you're a
mid-level large business put in network

485
00:35:45,310 --> 00:35:51,040
touts like there's a nowhere a guy I do
not want to share access to my switches

486
00:35:51,040 --> 00:35:56,230
in my routers that will get war started
their will their will their show play

487
00:35:56,230 --> 00:36:00,040
war there will be war before you're
getting them out routers and switches

488
00:36:00,040 --> 00:36:03,880
don't fight that is a security
professional dropping a tap you're just

489
00:36:03,880 --> 00:36:05,690
an electrical bump in the wire

490
00:36:05,690 --> 00:36:11,240
dropping an electrical towel pulled off
by a hundred percent copy mirror copy of

491
00:36:11,240 --> 00:36:14,930
all that network traffic and drop it
into your own separate out-of-band

492
00:36:14,930 --> 00:36:18,919
network for security monitoring and
you're totally avoid all those politics

493
00:36:18,920 --> 00:36:21,470
between organizations about who has
access to the routers and switches

494
00:36:21,470 --> 00:36:27,410
people worried about you know what about
access just dropping and dropping your

495
00:36:27,410 --> 00:36:31,819
tabs cut all that politics out another
thing i want to bring up real quick you

496
00:36:31,820 --> 00:36:35,690
guys are breaking in the networks that
are working on the red team's enough you

497
00:36:35,690 --> 00:36:39,110
need to make sure you didn't know about
it on the on the these routers

498
00:36:39,110 --> 00:36:43,670
especially the cisco stuff now you can
do packet capture directly off the

499
00:36:43,670 --> 00:36:48,890
router you don't have to you can do port
mirroring you can but you can now you

500
00:36:48,890 --> 00:36:52,069
can go into packet capture right off the
router so you gonna pop that router you

501
00:36:52,070 --> 00:36:56,450
get it together you know get enabled on
that router you can do in becoming baby

502
00:36:56,450 --> 00:37:01,189
packet capture and capture pick out
Randolph that right off that router and

503
00:37:01,190 --> 00:37:04,640
started gaining intel on clear-text
protocols accepted whatever have you

504
00:37:04,640 --> 00:37:10,250
don't have to be on how that local VLAN
access and would say wireshark cetera to

505
00:37:10,250 --> 00:37:15,200
get you and get net flow if you're not
collected netflow i will patronize you I

506
00:37:15,200 --> 00:37:19,850
will humor you but I will laugh at you
as i'm leaving checking my head thinking

507
00:37:19,850 --> 00:37:22,250
they have no idea who all's in their
network

508
00:37:22,250 --> 00:37:26,000
you've got to get the net flow or if
you're in anything the cisco shop you

509
00:37:26,000 --> 00:37:31,160
know the j flo they asked flow but you
got to get flow in that Network i'm a

510
00:37:31,160 --> 00:37:35,750
big believer huge I'm a huge believer in
Lancope you get the budget we got the

511
00:37:35,750 --> 00:37:40,820
budget get land coat it rocks are some
other good stuff out there that i have

512
00:37:40,820 --> 00:37:42,590
to i don't know how expensive everything

513
00:37:42,590 --> 00:37:48,350
solarwinds good scrutinizes good but my
favorite that I worked with personally

514
00:37:48,350 --> 00:37:52,430
as the lanco it rocks at cisco there's a
reason cisco bottom and use them before

515
00:37:52,430 --> 00:37:59,118
they ever bottomed stuff's very good let
me put

516
00:37:59,119 --> 00:38:03,049
this out real quick room real quick when
you're when you're either attacking the

517
00:38:03,049 --> 00:38:06,859
network or you're trying to secure the
network 1i want you look at OSI model

518
00:38:06,859 --> 00:38:10,670
and I want you to go and look at each
layer the model from the standpoint of

519
00:38:10,670 --> 00:38:14,539
the significant role playing the data
plane in the management playing those

520
00:38:14,539 --> 00:38:17,539
three planes retailer how is it being
managed

521
00:38:19,339 --> 00:38:23,749
what are the control protocols network
protocols and then the data traffic look

522
00:38:23,749 --> 00:38:26,930
at all three there was a specific and
pull that thread for both in band

523
00:38:26,930 --> 00:38:31,069
out-of-band and you will find a way you
will find holes in your network and if

524
00:38:31,069 --> 00:38:34,038
you're on the red team for the pen
tester you're going to find a way to

525
00:38:34,039 --> 00:38:38,960
break into that Network nobody's done it
all rights it all you gotta do is take

526
00:38:38,960 --> 00:38:42,859
that stack and I didn't look at those
three things secure the control plane

527
00:38:42,859 --> 00:38:46,490
data plan manage playing each layer
where did they screw up because they

528
00:38:46,490 --> 00:38:50,990
screwed up somewhere that despite how
many certifications and degrees they

529
00:38:50,990 --> 00:38:53,930
have on the resume they messed up
somewhere because i'm running out of

530
00:38:53,930 --> 00:38:57,379
time and budget like the rest of us

531
00:38:57,380 --> 00:39:03,619
I mean it's like I mean like it's all so
here's some references there i can give

532
00:39:03,619 --> 00:39:08,869
you more bears are some quick references
are highly recommend if you're if you're

533
00:39:08,869 --> 00:39:12,019
in the future you guys are in the red
team you want to go into a deep dive

534
00:39:12,019 --> 00:39:16,008
into pen testing and how some of the
stuff works you know ray and the guys at

535
00:39:16,009 --> 00:39:19,339
dr NW they're one of my favorite
references

536
00:39:19,339 --> 00:39:23,690
go out there check out there working
they run that we are troopers they run

537
00:39:23,690 --> 00:39:26,359
the troopers a conference in Germany is
awesome

538
00:39:26,359 --> 00:39:30,769
Yvonne Yvonne here go check out i'll
always hints

539
00:39:30,769 --> 00:39:35,868
he's got an awesome blog side he puts a
wealth of information out on our hands

540
00:39:36,410 --> 00:39:39,348
you can follow him on twitter at our
hands highly recommend that if you're

541
00:39:39,349 --> 00:39:42,589
interested in network infrastructure
stuff

542
00:39:42,589 --> 00:39:45,710
follow those guys and they will they
will open your mind a whole new world

543
00:39:45,710 --> 00:39:55,430
they helped me so what I've got you guys
got any questions there i'll give you

544
00:39:55,430 --> 00:40:00,230
the slides and get me on email me at me
on twitter linkedin what happened i'll

545
00:40:00,230 --> 00:40:02,650
give you the slides I'll give you all my
slides

546
00:40:02,650 --> 00:40:06,670
give you give you a course i wrote today
crash course i'll give you everything

547
00:40:07,300 --> 00:40:12,700
Sarah share anymore in question

548
00:40:15,880 --> 00:40:20,200
well i'll be around all weekend reach
out to me if you see me hanging out you

549
00:40:20,200 --> 00:40:23,200
want to talk shop temple

550
00:40:29,490 --> 00:40:30,390
ok

