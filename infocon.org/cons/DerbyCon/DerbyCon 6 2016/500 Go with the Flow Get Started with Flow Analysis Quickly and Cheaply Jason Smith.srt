1
00:00:00,000 --> 00:00:03,000
going and that sounds good

2
00:00:10,559 --> 00:00:18,210
monitor and over without the mic still
an issue and that makes you got Michael

3
00:00:18,210 --> 00:00:25,800
good ok so i guess we'll go ahead and
get started then and assume everyone can

4
00:00:25,800 --> 00:00:28,980
hear me just fine because I can
definitely see myself just fine right

5
00:00:28,980 --> 00:00:35,340
ok ok that's so this is go with the flow
it is how to get started with flow

6
00:00:35,340 --> 00:00:40,410
analysis really really cheaply and and
you have not have to worry about you

7
00:00:40,410 --> 00:00:42,930
know vendors calling you thought is
going to be X amount of money you just

8
00:00:42,930 --> 00:00:46,950
be able to set this stuff up in a few
minutes and and you know why not have it

9
00:00:46,950 --> 00:00:50,850
hopefully by the end of the day I'll
tell you why it's like really important

10
00:00:50,850 --> 00:00:55,050
that you have it and in a matter of 25
minutes if I still get 25 minutes I

11
00:00:55,050 --> 00:00:55,800
don't know

12
00:00:55,800 --> 00:01:03,239
and so my name is Jason Smith I'm pretty
big carnet and you know right now I'm i

13
00:01:03,239 --> 00:01:06,689
live in bowling green we drove up this
morning and but you know i'm a big fan

14
00:01:06,689 --> 00:01:08,189
of big rule areas

15
00:01:08,189 --> 00:01:13,830
despite you know pretty soon were moving
to Nashville but a big carnet what you

16
00:01:13,830 --> 00:01:19,170
see there's a coffin on wheels pretty
much made with a bunch of scrap metal

17
00:01:19,170 --> 00:01:24,390
from the local metal shop but i'm a big
fan of building different things built a

18
00:01:24,390 --> 00:01:30,329
previous dune buggy it's now wrecked and
and big fan of a IOT enthusiasts but

19
00:01:30,329 --> 00:01:34,889
really comes down to me being a fan of
like micro computing i use out he's the

20
00:01:34,890 --> 00:01:39,479
buzzword maybe like all you have to get
but really I don't care about like hair

21
00:01:39,479 --> 00:01:43,079
dryers there on the internet and stuff
like that like that doesn't make sense

22
00:01:43,079 --> 00:01:48,389
things at a big fan of frying food
addict you know the idea that you can

23
00:01:48,390 --> 00:01:53,729
you tell something and you know a good
flour and cook anything and you like 350

24
00:01:53,729 --> 00:01:59,039
360 degrees and will completely change
everything and i'm pretty sure almost

25
00:01:59,040 --> 00:02:02,909
anything that's soft can be cooked their
way and then takes pretty good

26
00:02:03,700 --> 00:02:10,449
as so here's the shameless spiel for
applying our security monitoring at

27
00:02:10,449 --> 00:02:15,129
buddy of mine chris sanders and i wrote
this basically all the the royalties go

28
00:02:15,129 --> 00:02:18,190
to charities and that's why I constantly
push this may be the book came out

29
00:02:18,190 --> 00:02:21,489
awhile ago and still kind of getting
putting different prints all over and

30
00:02:21,489 --> 00:02:25,989
across the world but i push it because
it's more of a thing about charities so

31
00:02:25,989 --> 00:02:29,950
you know derby con itself has always
been pretty big with charitable

32
00:02:29,950 --> 00:02:35,230
contributions and you know all of our
royalties go to things like real

33
00:02:35,230 --> 00:02:39,910
technology fund and they do a lot of
like you know putting in 3d printers and

34
00:02:39,910 --> 00:02:44,140
all kinds of techlabs and rural schools
all across the nation hackers for

35
00:02:44,140 --> 00:02:45,040
charity

36
00:02:45,040 --> 00:02:50,019
kiva hope for the warriors Autism Speaks
lot of different charities and highly

37
00:02:50,019 --> 00:02:54,370
recommend it vital amazon go smiled on
amazon.com and do some more charitable

38
00:02:54,370 --> 00:02:58,959
contributions you know all not out of
your pocket and so we're talking about

39
00:02:58,959 --> 00:03:03,610
today at $TIME today we're talking about
flow data you know what is it was it

40
00:03:03,610 --> 00:03:07,269
important and you know we're going to
talk about some basics but we're not

41
00:03:07,269 --> 00:03:12,310
going to go crazy about him that so
given previous talks and other places

42
00:03:12,310 --> 00:03:16,959
that kind of go into more detail on like
the individual like all week and what

43
00:03:16,959 --> 00:03:20,440
makes the flow what starts it was stops
it you know what's the times and all

44
00:03:20,440 --> 00:03:23,769
these other details but they usually put
people to sleep so i won't talk about

45
00:03:23,769 --> 00:03:28,120
this day instead we're going to talk
more into like you know you know how can

46
00:03:28,120 --> 00:03:31,750
i deploy flow solutions you know how do
i use the the flow solutions i deploy

47
00:03:31,750 --> 00:03:33,819
and are they free they cost money

48
00:03:33,819 --> 00:03:37,208
what should i do what should not do you
know what are some pitfalls that people

49
00:03:37,209 --> 00:03:41,260
run into those kind of things and maybe
then into today it'll be kind of

50
00:03:41,260 --> 00:03:45,519
controversial if you currently deployed
certain things and but hopefully not

51
00:03:46,060 --> 00:03:50,500
hopefully no fighting and so you know
we'll talk about how do we collect it

52
00:03:50,500 --> 00:03:54,250
that's really easy and how to use this
in situational awareness saying your

53
00:03:54,250 --> 00:03:57,910
environment you know basically make
friends with your net ops group if

54
00:03:57,910 --> 00:04:01,750
you're not already dead ups and because
a lot of times you have these young

55
00:04:01,750 --> 00:04:05,139
people butting heads and next thing you
know you deploy something that's

56
00:04:05,139 --> 00:04:09,310
unsampled like this and now okay you can
run stats and do all these things for me

57
00:04:09,310 --> 00:04:10,750
so we'll be your friends

58
00:04:10,750 --> 00:04:16,089
so what is flow data at the best way to
describe it to compare it to peak at

59
00:04:16,089 --> 00:04:16,488
date

60
00:04:16,488 --> 00:04:21,289
it and its like the complete opposite as
so everyone knows the full pcap is it's

61
00:04:21,289 --> 00:04:25,580
you know a big dump everything you have
you know it's the full recording at

62
00:04:25,580 --> 00:04:29,389
comparable like phone traffic you would
be recording you know if you know a

63
00:04:29,389 --> 00:04:33,919
phone call and put into your scale its
i'm going to record every one of your

64
00:04:33,919 --> 00:04:38,120
phone calls and then try to make sense
of it at the challenging part being that

65
00:04:38,120 --> 00:04:41,449
you can't really make sense of every
single second of every single phone call

66
00:04:41,449 --> 00:04:42,680
that record here

67
00:04:42,680 --> 00:04:48,110
so instead you have flow data so that
the comparison is that you know if you

68
00:04:48,110 --> 00:04:52,610
still have some sort of phone records
that you received from your your

69
00:04:52,610 --> 00:04:58,430
provider then it says oh won't you call
the Joe or Jane you know at certain time

70
00:04:58,430 --> 00:05:00,020
you talked with this long

71
00:05:00,020 --> 00:05:04,490
that's kind of flow records but for
network data had the big use thing that

72
00:05:04,490 --> 00:05:08,180
you can basically look at that and you
had this recording of everyone you could

73
00:05:08,180 --> 00:05:12,380
pivot off of those those records and say
oh well I only need to look at this

74
00:05:12,380 --> 00:05:17,840
point in this traffic for these two
people so the perspective on flow data

75
00:05:17,840 --> 00:05:21,500
versus PK like why can't you go through
pcap and you know kind of get whatever

76
00:05:21,500 --> 00:05:22,460
you need

77
00:05:22,460 --> 00:05:27,919
well this is a big dump truck is a peek
at trap and it's about 700 93,000 people

78
00:05:27,919 --> 00:05:32,659
and a pretty heavy truck but halls a ton
of data and will vary and compare this

79
00:05:32,659 --> 00:05:38,780
to again the the coffin and and
basically this flow mobile and you know

80
00:05:38,780 --> 00:05:42,948
I compared to a Caterham r500 which
weighs about a thousand pounds and you

81
00:05:42,949 --> 00:05:47,389
compare that that nearly 800,000 dump
truck and you have the flow comparison

82
00:05:47,389 --> 00:05:51,650
but you have to stack six those dump
trucks together at Flo's take up between

83
00:05:51,650 --> 00:05:56,960
. o one percent . o two percent of the
total amount of data that he kept takes

84
00:05:56,960 --> 00:06:01,099
it and now obviously I'll and you know
if you can use your pee captain be he

85
00:06:01,099 --> 00:06:05,180
has some type of data versus you know
other types i'm talking on average you

86
00:06:05,180 --> 00:06:09,319
know your average had never scream aah
during deployment you'll basically have

87
00:06:09,319 --> 00:06:16,400
around . 02 at one point out two percent
of the difference so flow data what

88
00:06:16,400 --> 00:06:20,539
really you know when we talk about it
what is it as a summary right it's a

89
00:06:20,539 --> 00:06:24,229
summary of all communications it's not
like the packets themselves like you're

90
00:06:24,229 --> 00:06:27,710
not going to get a flow record for each
packet it's not like you're looking in

91
00:06:27,710 --> 00:06:29,789
you know wireshark and saying a lot

92
00:06:29,790 --> 00:06:34,110
each packet here those are flows well
that's not the case at flow record is a

93
00:06:34,110 --> 00:06:39,300
summary of the total communication so
and they say there were you know 50

94
00:06:39,300 --> 00:06:43,260
packets in this communication and they
know that's one record and that there

95
00:06:43,260 --> 00:06:47,460
were X amount of bites neck
communication and but in the end it's

96
00:06:47,460 --> 00:06:52,620
basically just this 52 people at plus
and timing stuff so if I people being

97
00:06:52,620 --> 00:06:57,390
your source board our source IP source
board disappeared escort protocol and

98
00:06:57,390 --> 00:07:01,500
then we throw on a little time stuff and
ness invites and depending on what type

99
00:07:01,500 --> 00:07:05,160
of flow date you're using it has a lot
of other stuff too like a hundred twenty

100
00:07:05,160 --> 00:07:09,210
some odd different fields and natural
version 5 does not have that many but

101
00:07:09,210 --> 00:07:13,739
you know go to version and a prefix they
do basically we have everything but the

102
00:07:13,740 --> 00:07:14,580
what

103
00:07:14,580 --> 00:07:18,120
so again you have the other who and you
know where is it going when did it

104
00:07:18,120 --> 00:07:18,990
happen

105
00:07:18,990 --> 00:07:22,470
you don't really ever understand the why
maybe necessarily even if you have you

106
00:07:22,470 --> 00:07:28,860
no correlation pcap and but hopefully
you do come to that eventually so how do

107
00:07:28,860 --> 00:07:30,810
we actually collect this stuff

108
00:07:30,810 --> 00:07:37,260
well we generate flows at based on some
routers in fact a lot of your net Ops

109
00:07:37,260 --> 00:07:40,500
guys like we already have loaded and we
don't need anymore

110
00:07:40,500 --> 00:07:43,590
hey you don't need to be doing this on
your your sensor we don't need to deploy

111
00:07:43,590 --> 00:07:48,750
anything but a lot of times we'll have
that sample flow data that so it's like

112
00:07:48,750 --> 00:07:53,550
you're your quality engineer coming
along and saying oh I want to take you

113
00:07:53,550 --> 00:07:57,780
know one out of every hundred you know
packets are one out of every hundred

114
00:07:57,780 --> 00:08:01,109
records that would have been made and
I'm gonna give those to you and you can

115
00:08:01,110 --> 00:08:05,550
run stats against those and it'll give
you an overall quality of the network

116
00:08:05,550 --> 00:08:09,060
that doesn't really work out for
security monitoring or instant response

117
00:08:09,060 --> 00:08:12,360
or anything like that and really doesn't
work out well for network operations

118
00:08:12,360 --> 00:08:17,280
it's just a matter of less taxing and
processes on those routers and any kind

119
00:08:17,280 --> 00:08:20,340
of like you know busy networking
equipment that they already don't have

120
00:08:20,340 --> 00:08:25,560
the cycles to generate this data instead
you can say oh let's talk about sensors

121
00:08:25,560 --> 00:08:30,780
instead as so where's routers normally
are doing some sample stuff and you're

122
00:08:30,780 --> 00:08:35,339
not in control of those things we can
they'd like their own sensors and if you

123
00:08:35,340 --> 00:08:39,270
already have like a span pour some sort
of mirror tap or whatever that you're

124
00:08:39,270 --> 00:08:41,079
gathering date offa you running

125
00:08:41,080 --> 00:08:45,790
ideas or something you can just install
a provari ass on that and say hey look

126
00:08:45,790 --> 00:08:49,180
at this interface that I monitoring
already and it will generate all those

127
00:08:49,180 --> 00:08:53,199
flows on its own and they'll be
unsampled will be great and then your

128
00:08:53,200 --> 00:08:55,660
problem is you know where do we send
those because you can't do anything with

129
00:08:55,660 --> 00:09:00,040
just raw flows she have something to
look at a man and flows come in multiple

130
00:09:00,040 --> 00:09:07,089
types of flavors at things like sflow j
flo netstream and see Flo d and at flow

131
00:09:07,090 --> 00:09:10,990
and our flow and all kinds of flows but
we're gonna talk about net flow and

132
00:09:10,990 --> 00:09:15,190
happy pics as specifically and yeah is
the tool we're going to talk about today

133
00:09:15,190 --> 00:09:22,780
and it is a prefix and so popular
platforms so we talk about generating

134
00:09:22,780 --> 00:09:26,110
flows briefly and what can actually look
at these things

135
00:09:26,110 --> 00:09:30,940
well there are different solutions and
you have raw a trawl net flow solutions

136
00:09:30,940 --> 00:09:34,810
which only look at flows are built to
look at the other five tuple and more

137
00:09:34,810 --> 00:09:38,050
and then you have generic login
information solutions that a lot of

138
00:09:38,050 --> 00:09:43,479
people a ton of people actually a used
set up stacked look at that flows and

139
00:09:43,480 --> 00:09:45,730
when you're looking at a lot of
different things

140
00:09:45,730 --> 00:09:50,020
I'll say that makes a lot of sense but
today I'm going to talk a lot unlike the

141
00:09:50,020 --> 00:09:55,960
pros and cons of that at silk and argus
specifically in Argus insecurity onion

142
00:09:55,960 --> 00:10:00,970
and a show of hands who here has heard
of security onion and a lot of people is

143
00:10:00,970 --> 00:10:05,860
an awesome girl who uses security onion
who use it at work

144
00:10:06,730 --> 00:10:12,100
okay well actually it's pretty good that
Doug Burke is watching this then there

145
00:10:12,100 --> 00:10:18,010
everyone raised their hand this is
getting i'm s-so a lot of people using a

146
00:10:18,010 --> 00:10:23,110
wwii a classic really they have NSN as
well which is a friend in for an attempt

147
00:10:23,110 --> 00:10:26,350
to make it look prettier and again we
talked about security and argus is

148
00:10:26,350 --> 00:10:30,100
already built into security onion and so
we're going to talk about still today in

149
00:10:30,100 --> 00:10:34,570
awhile still you know that's a and you
got to the crowd it's not really new and

150
00:10:34,570 --> 00:10:37,870
it's also you know government back you
know they they kind of built it with

151
00:10:37,870 --> 00:10:40,780
Carnegie Mellon it's pretty awesome

152
00:10:40,780 --> 00:10:45,880
you can pretty easily handle that 12
billion unidirectional flows per day and

153
00:10:45,880 --> 00:10:50,200
a lot of different networks that they
collect these flows and they collect

154
00:10:50,200 --> 00:10:51,370
them indefinitely

155
00:10:51,370 --> 00:10:54,579
that sucks pretty awesome have both of
them came around public

156
00:10:54,579 --> 00:10:59,979
you surround 2003 as so again there
they're pretty rock-solid about the only

157
00:10:59,980 --> 00:11:08,470
thing silk doesn't do well is and a
sense so why don't i recommend these

158
00:11:08,470 --> 00:11:10,089
generic lock solutions

159
00:11:10,089 --> 00:11:15,459
well we'll start with the pros of the
log solutions on the right top right as

160
00:11:15,459 --> 00:11:19,388
so they are really easily extendable at
people using elstak already had their

161
00:11:19,389 --> 00:11:24,819
friend the friend can be molded like
clay not quite slut clay but pretty

162
00:11:24,819 --> 00:11:28,389
easily molded around you can get graphs
you get all kinds of death

163
00:11:28,389 --> 00:11:32,829
it's actually quite fast if you have a
proper setup and proper resources and

164
00:11:32,829 --> 00:11:37,149
which we'll talk about a minute what
proper is and what it isn't and but you

165
00:11:37,149 --> 00:11:40,749
know again you can make different
friends sport you can do a lot of stuff

166
00:11:40,749 --> 00:11:46,779
of elastic search and you know great and
a command-line queering stuff like that

167
00:11:46,779 --> 00:11:51,579
and it's a centralized log source if you
have a lot of disparate log data so if

168
00:11:51,579 --> 00:11:54,819
you have you know a lot of these bro
logs and you have all kinds of other

169
00:11:54,819 --> 00:11:59,349
logs coming in then you might say well I
don't want to go to different friends I

170
00:11:59,350 --> 00:12:03,429
just want to go to one front and be able
to query everything I want and that's

171
00:12:03,429 --> 00:12:04,119
that

172
00:12:04,119 --> 00:12:07,509
and you know i can understand that
because at some point it doesn't make a

173
00:12:07,509 --> 00:12:11,980
whole lot of sense to have 10 different
friends out there and you're saying you

174
00:12:11,980 --> 00:12:16,749
know analyst one this is how we do
things here and you give him 50 pages of

175
00:12:16,749 --> 00:12:20,499
documentation if you have any
documentation and there's kind of likes

176
00:12:20,499 --> 00:12:23,889
/ like I'm never going to be good at
this because that's a big problem with

177
00:12:23,889 --> 00:12:27,399
that with the defensive side of things i
think its security and probably often as

178
00:12:27,399 --> 00:12:30,939
well but and where you have you know new
people coming in and they're like I

179
00:12:30,939 --> 00:12:34,629
don't really know how to use things that
we're going to talk about ways to have

180
00:12:34,629 --> 00:12:38,799
flow solutions on their own that will
let you have a very very easy learning

181
00:12:38,799 --> 00:12:43,899
curve new and also because great disease
cake to use and it will try to bridge

182
00:12:43,899 --> 00:12:48,040
the gap between some of the easier log
solutions and so that maybe it makes

183
00:12:48,040 --> 00:12:51,730
sense that even if you do have all this
data coming in it might still make sense

184
00:12:51,730 --> 00:12:55,179
to have a separate flow solution that so
why would you have a separate flow

185
00:12:55,179 --> 00:12:59,049
solution well storage wise and i'll give
you some numbers here in just a minute

186
00:12:59,049 --> 00:13:03,429
and storage is is significantly better
you know most of the places I've been in

187
00:13:03,429 --> 00:13:06,470
they have indefinite flow storage when
they run out there

188
00:13:06,470 --> 00:13:11,720
more and because it's so easy to just
keep you know months weeks you know

189
00:13:11,720 --> 00:13:17,150
years and that I mean that when i worked
at a couple of government places at

190
00:13:17,150 --> 00:13:21,110
federal government place in state and
they're all indefinite storage at work

191
00:13:21,110 --> 00:13:25,280
now with fire I they do their own flow
stuff but in those government places

192
00:13:25,280 --> 00:13:32,209
they had indefinite storage had the cons
of flow data flow only solutions is that

193
00:13:32,210 --> 00:13:35,030
they are flows only mean you're not
going to be like hey let me put in my

194
00:13:35,030 --> 00:13:40,430
you know bro HTTP logs into silk that's
not gonna happen like it was one except

195
00:13:40,430 --> 00:13:47,510
those and the the big benefits of silk
and flow solutions that are all they

196
00:13:47,510 --> 00:13:51,800
have their own formats usually like
friends silk is binary format and its

197
00:13:51,800 --> 00:13:56,719
really really quick parts through even
over long times and usually labeled they

198
00:13:56,720 --> 00:13:59,990
say limited to like a week search but
when you're when you're searching an

199
00:13:59,990 --> 00:14:03,620
entire week across an enterprise and you
can say that that's reasonable to do

200
00:14:03,620 --> 00:14:07,940
that's pretty impressive had not all
flow solutions are equal i talk about

201
00:14:07,940 --> 00:14:12,770
silk was like so most and argus is
pretty awesome in a dumpster awesome for

202
00:14:12,770 --> 00:14:16,730
another wet silk again it's based on
kind of whatever you're used to

203
00:14:16,730 --> 00:14:23,390
so I said storage issues work on on the
the generic log solutions you know

204
00:14:23,390 --> 00:14:28,010
here's an example of just a lapse search
versus silk now this is a little junkie

205
00:14:28,010 --> 00:14:33,170
pie graph and that shows a little red
blip and a lot of blue so what that red

206
00:14:33,170 --> 00:14:39,500
lip as an example of is 128 the time are
the data that that elasticsearch needs

207
00:14:39,500 --> 00:14:43,730
to use add to actually store the same
that flow data so this was all generated

208
00:14:43,730 --> 00:14:48,590
now all the same time from both
solutions both same kind of way and

209
00:14:48,590 --> 00:14:52,760
they're both compressed results it's
about four million unique results and so

210
00:14:52,760 --> 00:14:56,780
therefore million unique flow records
and so last searches using quite a bit

211
00:14:56,780 --> 00:15:02,720
now there's new elasticsearch since then
and i have tested that yet but i'm not

212
00:15:02,720 --> 00:15:06,030
going to soon it's going to be much
better

213
00:15:06,030 --> 00:15:11,880
so how do you actually get started with
flows well again we're how its ilk this

214
00:15:11,880 --> 00:15:17,400
thing called flow bat as silk again is
the add the tool of my choices the

215
00:15:17,400 --> 00:15:21,480
system . level knowledge maybe Carly
Melin those gasps and looks pretty

216
00:15:21,480 --> 00:15:24,720
awesome it's really easy to use once you
know how to use it

217
00:15:24,720 --> 00:15:28,290
it's not so easy to learn how to use it
though and they have some of the best

218
00:15:28,290 --> 00:15:33,420
documentation ever which is pretty
awesome and but again it's like you're

219
00:15:33,420 --> 00:15:36,449
the best documentation means that
everything is documented you know

220
00:15:36,450 --> 00:15:40,380
in-depth the new guy who looks that
documentation or even their their

221
00:15:40,380 --> 00:15:45,240
analysts that their analyst god it's
huge I mean they can find anything they

222
00:15:45,240 --> 00:15:48,390
want it just might take them you know
pass the time in which they need to

223
00:15:48,390 --> 00:15:53,250
actually find it as so we made flow back
chris sanders and make flow back to to

224
00:15:53,250 --> 00:15:57,300
kind of take that learning curve and
really really knock it down now granted

225
00:15:57,300 --> 00:16:00,000
you know you're still gonna have to know
what you're looking for in like an

226
00:16:00,000 --> 00:16:03,330
English we can you ask yourself in a
sentence what am I looking for

227
00:16:03,330 --> 00:16:06,420
what's awesome i'll show you you know
how that actually works here in a minute

228
00:16:06,420 --> 00:16:11,069
because if you can ask that question you
can get the answer and its really really

229
00:16:11,070 --> 00:16:17,100
fast to to install these so we're
looking at like 13 to 15 minutes from

230
00:16:17,100 --> 00:16:21,630
the start until you have your flow
solution set up like completely and if

231
00:16:21,630 --> 00:16:24,270
you have like a really really
interesting network maybe a little more

232
00:16:24,270 --> 00:16:28,439
challenging but it's just to follow the
change you have those so it's not too

233
00:16:28,440 --> 00:16:33,090
hard and you know overall the the point
of flow that is is a time management

234
00:16:33,090 --> 00:16:37,350
thing allows you to pivot allowed to
interpret the field so like you know

235
00:16:37,350 --> 00:16:40,710
instead of someone be like Oh what is
protocol six well it'll tell you what

236
00:16:40,710 --> 00:16:41,790
everything is

237
00:16:41,790 --> 00:16:46,020
it'll make guesses on what ports are all
kinds of things like that and including

238
00:16:46,020 --> 00:16:53,250
looking at payload see what is this
actually and so again silk is just two

239
00:16:53,250 --> 00:16:53,970
different things

240
00:16:53,970 --> 00:16:57,450
packing sweet analysis sweet lot of
people just pull it out there together

241
00:16:57,450 --> 00:17:00,870
flows and then you can look at all the
flows you know use all these tools that

242
00:17:00,870 --> 00:17:05,520
filter and display and sort do all kinds
of stats all kinds of fun things and but

243
00:17:05,520 --> 00:17:08,550
today we're not really going to talk
about a lot of that and i'm going to

244
00:17:08,550 --> 00:17:12,750
show you maybe a couple examples of how
silk works what it looks like but that's

245
00:17:12,750 --> 00:17:15,199
probably one slide

246
00:17:15,199 --> 00:17:20,959
so the silk collection architecture
basically here we have three different

247
00:17:20,959 --> 00:17:25,730
ways of sending in data you may have two
sensors out there and that one of them

248
00:17:25,730 --> 00:17:30,440
maybe ran by some other division of the
like netops or something and it may be

249
00:17:30,440 --> 00:17:35,480
running a pro well you can accept that
and you can accept even youryour sample

250
00:17:35,480 --> 00:17:40,100
stuff you know it's not really really
useful & and it can accept you know it

251
00:17:40,100 --> 00:17:41,959
you know any any amount of sensors

252
00:17:41,960 --> 00:17:45,320
I just need to be configured to do so
you know say hey you're gonna accept

253
00:17:45,320 --> 00:17:49,820
somebody fix that for network version 5
will tell if those things and I

254
00:17:49,820 --> 00:17:55,610
interpret it and then it'll add throw it
all in this flat format which is why you

255
00:17:55,610 --> 00:17:59,719
can easily add additional storage so
again it's like the comparison

256
00:17:59,720 --> 00:18:04,580
something's wrong solutions and it isn't
storing it in some sort of you know

257
00:18:04,580 --> 00:18:09,168
database of some kind really its instead
these binary files are just stacked up

258
00:18:09,169 --> 00:18:13,669
and time to directories and basically
the way that a query works is it says

259
00:18:13,669 --> 00:18:17,600
all what time are you looking for i'm
going to go to those directories and

260
00:18:17,600 --> 00:18:22,850
then I want to look at the data within
the analysts would normally either SI

261
00:18:22,850 --> 00:18:28,699
trees low batt and to look at those
those flows there then sent to that

262
00:18:28,700 --> 00:18:35,269
security server so getting started flows
kind of summary we will have routers or

263
00:18:35,269 --> 00:18:40,490
switches and step to it or will have in
the better way as some unsampled data

264
00:18:40,490 --> 00:18:46,220
from ya 4f probe or something like that
at getting since silk box and the silk

265
00:18:46,220 --> 00:18:50,090
server itself will have silk installed a
specifically because it needs already

266
00:18:50,090 --> 00:18:53,899
flow pack but a lot of times you know
the same flow bet on it it's going to

267
00:18:53,899 --> 00:18:57,949
leverage those analysis tools as well
and we'll put flow bed on there as well

268
00:18:57,950 --> 00:19:01,279
which is kind of just a friend again
it's not doing a lot of heavy lifting on

269
00:19:01,279 --> 00:19:05,750
its own and and then the analyst
workstation will also exist which may or

270
00:19:05,750 --> 00:19:10,039
may not have direct access major copying
over all that so beta is not actually a

271
00:19:10,039 --> 00:19:13,850
lot of data and who knows what you're
doing but chances are it's going to be

272
00:19:13,850 --> 00:19:17,600
pretty easy for you to do it means a lot
of just rsync the data / do anything

273
00:19:17,600 --> 00:19:22,070
that and again I mentioned the the
sensors are called so cop at the bottom

274
00:19:22,070 --> 00:19:27,290
here if you have some zany network you
may need to modify these and say oh yeah

275
00:19:27,290 --> 00:19:30,920
these are my people locks here these
homeowners essentially i need to change

276
00:19:30,920 --> 00:19:36,950
those so how do you install silk well
you can go the hard way and and do

277
00:19:36,950 --> 00:19:39,560
everything on your own which is not
actually too hard to get their

278
00:19:39,560 --> 00:19:43,070
documentation is great and we also have
this script which doesn't install

279
00:19:43,070 --> 00:19:48,679
anything that you don't want trust me
and but you can just run these commands

280
00:19:48,680 --> 00:19:50,540
and then your you'll have fun

281
00:19:50,540 --> 00:19:56,240
so basically just you know we pull down
four low batt coms silk on a box in this

282
00:19:56,240 --> 00:20:01,400
case it's we're going to 14.4 that were
were using and then you just install it

283
00:20:01,400 --> 00:20:04,400
and then in the meantime you know it's
gonna ask you a couple questions like

284
00:20:04,400 --> 00:20:07,940
literally like two questions and then
it's basically going to do its own thing

285
00:20:07,940 --> 00:20:13,130
so it'll take about five minutes to go
and and in the meantime you can kind of

286
00:20:13,130 --> 00:20:18,320
do it everyone and so we also have sent
us and installers well so if you have up

287
00:20:18,320 --> 00:20:23,990
to 6.5 you can solve well so if you have
epilepsy

288
00:20:25,040 --> 00:20:34,040
close your eyes for like a couple
seconds seriously so we're going to

289
00:20:34,040 --> 00:20:40,100
install silk the hot time works this
fast bowling green actually it's amazing

290
00:20:40,100 --> 00:20:46,189
and so we go around and check the mail
and like that cat runs out the door All

291
00:20:46,190 --> 00:20:50,900
town so it should but to go in and play
with cattle bit few minutes that's that

292
00:20:50,900 --> 00:20:58,640
she'd 0 patch Tito is a and bengal cat
it's more like a Bengal tiger she's very

293
00:20:58,640 --> 00:21:00,500
precious but enough stop

294
00:21:00,500 --> 00:21:05,510
we're done so silk should work now you
know if you do any kind of but now you

295
00:21:05,510 --> 00:21:08,480
know play around on the net or whatever
on the monitor port or whatever and you

296
00:21:08,480 --> 00:21:12,320
should see some day to show up within
like 30 seconds this has to stagnate up

297
00:21:12,320 --> 00:21:16,580
and we didn't talk about what it means
the stack on these records and what

298
00:21:16,580 --> 00:21:20,899
records are made of but they have these
timeouts so like you're not seeing data

299
00:21:20,900 --> 00:21:23,810
you know like I wouldn't easy feat up
for something we're not going to because

300
00:21:23,810 --> 00:21:28,550
it's going to like build these records
you're browsing so what does it look

301
00:21:28,550 --> 00:21:29,120
like

302
00:21:29,120 --> 00:21:34,129
well here's just looking at data with
current day until the current time start

303
00:21:34,130 --> 00:21:38,540
of the day until the the current time
and basically have these these

304
00:21:38,540 --> 00:21:42,230
records here and that's kind of like the
default look for silk

305
00:21:42,890 --> 00:21:46,490
I mean that's using RW cut which
converts the binary to a human-readable

306
00:21:46,490 --> 00:21:51,590
form and then you also have these ten
protocols that you can do stats on that

307
00:21:51,590 --> 00:21:54,379
you can look at that Leiter it's it's
ugly back at various 1 i'm going to show

308
00:21:54,380 --> 00:21:58,760
you in a minute you can do PK
perversions to that her future perhaps

309
00:21:58,760 --> 00:22:04,190
you can just look at this on slides so
Flo bad self and you know again

310
00:22:04,190 --> 00:22:09,560
Crusaders not make that it's really
quick way to get going to close you can

311
00:22:09,560 --> 00:22:10,700
get here

312
00:22:10,700 --> 00:22:16,610
skip to the good stuff same kind of deal
with silk how you can go get a drink or

313
00:22:16,610 --> 00:22:17,419
something

314
00:22:17,420 --> 00:22:25,700
epilepsy warning being single so
installing flow back now and ask a

315
00:22:25,700 --> 00:22:31,940
couple questions gonna run around going
to make a chicken brand again i fried

316
00:22:31,940 --> 00:22:35,360
chicken a lot so this is kind of like a
chick-fil-a copy

317
00:22:35,900 --> 00:22:40,460
it's about say it's better for nuggets
then she plays the guitar who likes

318
00:22:40,460 --> 00:22:41,720
check the way here

319
00:22:41,720 --> 00:22:47,240
imagine all hands would go up Willie's
hands tears as good so I'm making this

320
00:22:47,240 --> 00:22:51,740
brine it again takes seven and nine
minutes for flow back to install and

321
00:22:51,740 --> 00:22:56,360
what we're doing out here is just a
clean into box that has silk already

322
00:22:56,360 --> 00:23:00,199
installed from that previous video at
the same box basically made these

323
00:23:00,200 --> 00:23:03,860
back-to-back and but you know again it's
set

324
00:23:03,860 --> 00:23:09,530
it's not too hard so I'm mixing up the
brian doyle we're at a time it's already

325
00:23:09,530 --> 00:23:16,730
installed i got half the brine done it
but it's a two-hour Brian so it's fun so

326
00:23:16,730 --> 00:23:18,470
Flo bad basics

327
00:23:18,470 --> 00:23:23,000
that's cheeto again now introduced to do
so you will see pictures of jido at four

328
00:23:23,000 --> 00:23:29,930
no great reason of the entertainment
soflo bad here we're looking ahead and

329
00:23:29,930 --> 00:23:33,170
just the same query that we looked at
earlier it's pulling all records for the

330
00:23:33,170 --> 00:23:35,330
current day its kind of already done

331
00:23:35,330 --> 00:23:38,540
you see the queries much shorter you're
only putting in these partitioning

332
00:23:38,540 --> 00:23:44,000
switches so it's kind of easy as cake to
look through those things looking at the

333
00:23:44,000 --> 00:23:46,010
chinese IP addresses

334
00:23:46,010 --> 00:23:51,410
well there are bad right again I work
for fire and so we're looking between

335
00:23:51,410 --> 00:23:58,490
local and any kind of chinese IP
addresses using this and NEC a tag and

336
00:23:58,490 --> 00:24:02,120
basic that comes from a maximum deal
that we're looking basing off of mac's

337
00:24:02,120 --> 00:24:06,439
man's country code database and
basically we're going through the query

338
00:24:06,440 --> 00:24:10,640
builder this time and so that quick
search and we're adding in this custom

339
00:24:10,640 --> 00:24:17,450
additional parameter which now exists
NEC exist as a a basic parameter but

340
00:24:17,450 --> 00:24:23,510
you're going to have is when we execute
there are results and this was a I think

341
00:24:23,510 --> 00:24:27,440
for a little longer so you see it kind
of takes a little bit more but i think

342
00:24:27,440 --> 00:24:33,410
this was a yeah week search you see from
as at the first of $MONTH march to the

343
00:24:33,410 --> 00:24:37,970
seven and so there's some data and we
can also sort these things around shut

344
00:24:37,970 --> 00:24:43,250
off things and just go to the 52 people
and then you can drag and drop whatever

345
00:24:43,250 --> 00:24:48,440
you need to do and all this is it in
that I've done and node using the media

346
00:24:48,440 --> 00:24:54,170
framework so it's a you know if you hate
node or if you're reading guide maybe

347
00:24:54,170 --> 00:24:57,860
you can find some holes in this this
whole thing that I know it's pretty

348
00:24:57,860 --> 00:25:01,580
awesome as far as many things
interactive and yeah we'll go too much

349
00:25:01,580 --> 00:25:05,360
into stats you showed them before we're
kind of doing the same thing here doing

350
00:25:05,360 --> 00:25:09,979
a query and building it up and we're
going to do a and basically looking at

351
00:25:09,980 --> 00:25:14,030
everything for the current day as some
just different players and how many

352
00:25:14,030 --> 00:25:24,740
bytes that they're talking in so it's
done you see how how much these guys

353
00:25:24,740 --> 00:25:30,080
have talked together and pretty easy to
do and count basically give us a graph

354
00:25:30,080 --> 00:25:34,730
i'm going to skip ahead on this one
first second time because it'll show it

355
00:25:34,730 --> 00:25:39,200
here basically i save this graph as a
dashboard and then you can just throw it

356
00:25:39,200 --> 00:25:44,000
into the dashboard as you're choosing a
set it to go and execute periodically so

357
00:25:44,000 --> 00:25:48,230
if it's a dashboard that's up on your in
your sock or something like that you can

358
00:25:48,230 --> 00:25:52,460
see you know how your total traffic or
not a person that's pretty important

359
00:25:52,460 --> 00:25:57,380
that we can also do like again I talk
about ya doing any kind of non-standard

360
00:25:57,380 --> 00:26:02,720
courts and looking at the actual payload
data this is basically saying

361
00:26:02,720 --> 00:26:05,870
Hey look at anything of actually no
legitimate communications are

362
00:26:05,870 --> 00:26:09,830
established and we're gonna look for
things that aren't necessarily on what

363
00:26:09,830 --> 00:26:16,189
they claim to be so you may have like an
example maybe four bedrooms on 1800 well

364
00:26:16,190 --> 00:26:21,620
it's HTTP stuff so this is going to see
that ok this Court 1800 stuff is

365
00:26:21,620 --> 00:26:26,120
actually HTTP traffic and and megan yeah
does that when it generates the flows

366
00:26:26,120 --> 00:26:39,770
and yeah there you go so there were five
different and distinct ports that look

367
00:26:39,770 --> 00:26:44,330
like SL traffic and that view for the
others and you know there's better ways

368
00:26:44,330 --> 00:26:50,870
of doing this specifically using the app
labeling and just now i use just that

369
00:26:50,870 --> 00:26:57,350
that plug-in but on here we use Appling
so you can also in last week at traffic

370
00:26:57,350 --> 00:27:02,389
and again I just throwing the end this
and exploit kit traffic and it generates

371
00:27:02,390 --> 00:27:05,480
flows on the spot right there as long as
the the flows are as long as he gets

372
00:27:05,480 --> 00:27:10,460
stored on a float box and we're almost
out of time so we're gonna talk about

373
00:27:10,460 --> 00:27:14,539
flow automation very briefly kind of
third slot up there you can look at

374
00:27:14,539 --> 00:27:18,140
later and there's tools like silk
analysis pipeline the new beginning

375
00:27:18,140 --> 00:27:22,880
detection stuff like that and there's
also flow quarter which is a tool that i

376
00:27:22,880 --> 00:27:27,080
wrote it's basically just something you
throw at the end of pipe all your silk

377
00:27:27,080 --> 00:27:31,220
data to it and it'll make cool grass
like these so you have like in the

378
00:27:31,220 --> 00:27:35,270
middle very middle there's an asset
plotter which is automatically tries to

379
00:27:35,270 --> 00:27:38,480
understand the assets on your network
without having to actually dig through

380
00:27:38,480 --> 00:27:42,980
the data the bottom right that useless
force directed graph that hat tricks

381
00:27:42,980 --> 00:27:48,740
managers and when co-workers into
thinking you're right and had their you

382
00:27:48,740 --> 00:27:52,549
know some bubble charts to do like three
axes things that are really hard to ask

383
00:27:52,549 --> 00:27:55,820
questions that but when you get a good
answer in like you're like hey is double

384
00:27:55,820 --> 00:27:59,510
Charlie worked out and then your
standard other charts there

385
00:27:59,510 --> 00:28:03,950
so in summary silks really fast really
easy to set up tons of analysis tools

386
00:28:03,950 --> 00:28:08,480
you can do anything you want to with it
and have it be last year's in a PF low

387
00:28:08,480 --> 00:28:11,309
batt always tell munchies do the sill
queries

388
00:28:11,309 --> 00:28:15,120
and but maybe you know it makes sense
something to have an API and but again

389
00:28:15,120 --> 00:28:19,018
best documentation world flow bad not
the best documentation world because

390
00:28:19,019 --> 00:28:22,139
there's not all that much to do with it
I mean we have documentation fullback

391
00:28:22,139 --> 00:28:27,178
calm and in the actual app itself and
but again its buying listen for analyst

392
00:28:27,179 --> 00:28:31,019
you know I do this all the time so we
try to make it as good as we can make it

393
00:28:31,019 --> 00:28:35,610
for us and then usually people
appreciate that you can get it there

394
00:28:37,590 --> 00:28:42,269
so in conclusion you should use flow
data and who was using flow data right

395
00:28:42,269 --> 00:28:42,720
now

396
00:28:42,720 --> 00:28:48,240
hands up I was the best audience ever
and so it's very you know if so it's

397
00:28:48,240 --> 00:28:53,070
easy to use what you use to its awesome
so we appreciate it very much mean she'd

398
00:28:53,070 --> 00:29:00,509
oh and I guess it probably no time for
questions that do have a giveaway i

399
00:29:00,509 --> 00:29:08,190
mentioned three flow solutions earlier
this maybe to our question and that silk

400
00:29:08,190 --> 00:29:09,090
was one of them

401
00:29:09,090 --> 00:29:14,039
what are the other two who said it

402
00:29:14,039 --> 00:29:35,850
ok you get you get an o droid si tu hijo
it may or may not work and well that's

403
00:29:35,850 --> 00:29:36,899
it

404
00:29:36,899 --> 00:29:37,889
appreciate it very much

