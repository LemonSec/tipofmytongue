1
00:01:32,690 --> 00:01:46,610
welcome to the first annual hopefully
manual Medicine Lake Town Hall thanks to

2
00:01:46,610 --> 00:01:53,360
everyone for coming so I'm gonna open up
with a little bit of a quick story here

3
00:01:53,360 --> 00:01:58,310
a long time ago on an internet far far
away

4
00:01:58,310 --> 00:02:05,510
ahd more conceived of medicine but he
didn't do it alone there are a couple

5
00:02:05,510 --> 00:02:10,560
people who started with started with him
and overtime that number of people grew

6
00:02:10,560 --> 00:02:17,880
and grew and grew and the point of the
story is that medicine has firmed really

7
00:02:17,880 --> 00:02:23,150
its inception always been a
community-driven project open source has

8
00:02:23,150 --> 00:02:28,250
been our lifeblood from the beginning
and Metasploit would not be the thing it

9
00:02:28,250 --> 00:02:36,190
is today without a ton of people many of
them right here in this audience right

10
00:02:36,190 --> 00:02:42,770
now so quick stats just by get hub we
have three hundred and seventeen direct

11
00:02:42,770 --> 00:02:47,030
contributors to Metasploit according to
get hub and that number doesn't take

12
00:02:47,030 --> 00:02:50,830
into account people who back in the day
just submitted rocky patch files and

13
00:02:50,830 --> 00:02:56,030
then we could we committed ourselves so
that's a lot of people when you really

14
00:02:56,030 --> 00:03:06,290
think about it and men we've been 12
years now so started in 2003 over twelve

15
00:03:06,290 --> 00:03:09,200
years medicine has grown

16
00:03:09,200 --> 00:03:14,120
unbelievable amount and that's thanks
entirely to the information security

17
00:03:14,120 --> 00:03:19,630
community and we are very keenly aware
of that and so the purpose of this town

18
00:03:19,630 --> 00:03:26,239
hall is we have IRC we have twitter we
have our community website on the

19
00:03:26,239 --> 00:03:26,870
internet

20
00:03:26,870 --> 00:03:32,620
but a lot of us gathered here every year
right here at Derby Conn so we wanted to

21
00:03:32,620 --> 00:03:36,159
take this opportunity while we're here
face to face with you to give you guys

22
00:03:36,159 --> 00:03:41,090
the chance to talk directly to us ask
the questions that you've got on your

23
00:03:41,090 --> 00:03:42,989
mind give us feedback

24
00:03:42,989 --> 00:03:47,099
tell us what you like tell us what you
hate tell us what you want to see so

25
00:03:47,099 --> 00:03:51,569
before we get started I'm just gonna let
everyone on the panel introduced

26
00:03:51,569 --> 00:04:04,030
themselves so thanks to me on basically
any media around research manager rapid

27
00:04:04,030 --> 00:04:09,299
seven I did a whole 12 minutes late for
a lot of years and I still do it right

28
00:04:09,299 --> 00:04:15,379
so they can take away while they can try
to get you all come to my version that

29
00:04:15,379 --> 00:04:23,770
it worked out really well I am my my
main job right now as I'm I'm a hacker

30
00:04:23,770 --> 00:04:29,690
whisper to reporters back and forth I do
a lot of press and I try to make things

31
00:04:29,690 --> 00:04:32,090
that we all do in the room

32
00:04:32,090 --> 00:04:38,660
accessible to a lot of people that's
kinda the game wide open source in a big

33
00:04:38,660 --> 00:04:43,820
way and tennessee this is an extension
of that so enough about me let's talk

34
00:04:43,820 --> 00:05:09,169
about our friend Egypt

35
00:05:09,169 --> 00:05:40,699
you're supposed to be absolutely and
that's the only way is to just drink it

36
00:05:40,699 --> 00:05:42,839
as fast as you can

37
00:05:42,839 --> 00:05:59,360
which is why mine is sitting right there
is not gonna move during so I've been

38
00:05:59,360 --> 00:06:06,150
here since 2007 I give basically the
same spill my talks I started with

39
00:06:06,150 --> 00:06:11,710
started working on display as a tool for
my job because I was writing exploits

40
00:06:11,710 --> 00:06:16,430
and it made it easier to write those
exploits so because it was open source

41
00:06:16,430 --> 00:06:22,620
it made it possible for me to do that
but more importantly the open-source

42
00:06:22,620 --> 00:06:26,990
factor allowed me to commit patches back
and say hey look this isn't working the

43
00:06:26,990 --> 00:06:31,750
way that I think it ought to hear
somebody that I found for things that

44
00:06:31,750 --> 00:06:35,219
have made it more difficult for me than
it really should have been you should

45
00:06:35,219 --> 00:06:39,060
have been easier and these couple of
changes make it easier for the next guy

46
00:06:39,060 --> 00:06:45,210
who comes along and has the same
problems and because of that I started

47
00:06:45,210 --> 00:06:51,839
working on the project to make it more
accessible to more people and open

48
00:06:51,839 --> 00:06:56,379
source is what makes that possible so
I'm here because of open source that's

49
00:06:56,379 --> 00:07:01,310
the reason I stay working on mesylate
and it's very important to me the other

50
00:07:01,310 --> 00:07:05,629
people also contribute as well we have
so many great people working on this

51
00:07:05,629 --> 00:07:12,750
project and almost all of them are
hobbyists who do it on their own time

52
00:07:12,750 --> 00:07:17,270
or like during a pentose when something
breaks they fix it real quick and then

53
00:07:17,270 --> 00:07:22,960
submit the patch later like those little
changes you don't know how important

54
00:07:22,960 --> 00:07:27,520
those are I love those patches I love
those little bitty patches to come and

55
00:07:27,520 --> 00:07:32,900
maybe only ever hear from you that one
time and that's fine but that is why I

56
00:07:32,900 --> 00:07:41,900
work on this project I love this project
and I love you so so you can try me at

57
00:07:41,900 --> 00:07:53,910
those couple of places and ask me
whatever you like everybody i'm new guy

58
00:07:53,910 --> 00:08:05,230
newbie I need to print my project since
last so not only am i doing

59
00:08:05,230 --> 00:08:10,860
tout bagay yo Todd want to become a
hacker was per sort of fellow gonna get

60
00:08:10,860 --> 00:08:15,550
the spirit quest in some sort of back in
reality helping you know get past merge

61
00:08:15,550 --> 00:08:24,000
said it tested built things in the past
things more public these days I work on

62
00:08:24,000 --> 00:08:29,550
the project as well I got my could get
bits and I've been doing that leave

63
00:08:29,550 --> 00:08:35,409
yourself open a DVD been trying people
trying to Sacramento other projects he

64
00:08:35,409 --> 00:08:36,780
does but we'll see

65
00:08:36,780 --> 00:08:41,650
so anyway that's a little bit about me
seen on the channel and I've been

66
00:08:41,650 --> 00:08:47,820
basically helping out also work with
William Wayne 13 guys inside of rapid

67
00:08:47,820 --> 00:08:57,350
seven that work mostly on that works so

68
00:08:57,350 --> 00:09:16,210
I don't know I don't know what I was
thinking it was many years ago I started

69
00:09:16,210 --> 00:09:20,960
as a contributor I was originally a
penetration tester for a couple big

70
00:09:20,960 --> 00:09:25,770
companies that it was one of which
everyone in this room is heard of and I

71
00:09:25,770 --> 00:09:30,500
started as the community contributor
because I i came up with a couple ideas

72
00:09:30,500 --> 00:09:37,500
and wanted to learn how to make modules
and fun fact I have to sneak this quote

73
00:09:37,500 --> 00:09:41,060
in every presentation I ever do the
first time I ever got into the

74
00:09:41,060 --> 00:09:47,530
Metasploit IRC channel said hey I wanna
start being a part of this but a heads

75
00:09:47,530 --> 00:09:53,590
up I'm I'm a total new and the first
thing HDI ever said to me was if you

76
00:09:53,590 --> 00:09:58,160
don't think you're a noob you're not
trying hard enough and I think that's

77
00:09:58,160 --> 00:10:03,100
such a great quote and so important that
it keeps being repeated because to me

78
00:10:03,100 --> 00:10:06,490
what that says is if you're not pushing
yourself if you're not doing something

79
00:10:06,490 --> 00:10:10,860
that you're a little scared of that when
you start out you think I can't do this

80
00:10:10,860 --> 00:10:17,000
then you're just stagnating right and so
I've been really fortunate to get to

81
00:10:17,000 --> 00:10:20,810
become a part of the medicine
professionally and constantly being a

82
00:10:20,810 --> 00:10:24,960
state of care that I'm going to
eventually prove that I am in company

83
00:10:24,960 --> 00:10:32,730
beyond that I work also sort besides as
a software engineer I consider myself

84
00:10:32,730 --> 00:10:39,760
the magic April rapid seven in that part
of my job is to talk to you guys and

85
00:10:39,760 --> 00:10:44,020
figure out what we need to do what
features need to go into medicine but

86
00:10:44,020 --> 00:10:49,630
what things we should be working on to
stay relevant and so you can find me on

87
00:10:49,630 --> 00:10:53,790
IRC and on Twitter as though I co-sign
I'm not cool enough that I don't have a

88
00:10:53,790 --> 00:10:57,699
key base things

89
00:10:57,699 --> 00:11:04,499
so we're going to open this up in a
second to have people come up ask their

90
00:11:04,499 --> 00:11:11,600
questions due back what have you a
little caveat I see you out there I know

91
00:11:11,600 --> 00:11:15,459
some of you are you know who you are
obvious troll is obvious

92
00:11:15,459 --> 00:11:22,429
let's try and keep it actually relevant
and so now is your time guys help help

93
00:11:22,429 --> 00:11:28,540
us to help you come up ask any questions
you have any feedback tell us what do

94
00:11:28,540 --> 00:11:32,859
you like about miss what you love about
it what isn't working for you what do

95
00:11:32,859 --> 00:11:37,109
you want to see that that we're not
doing now and you know what can we do to

96
00:11:37,109 --> 00:11:43,919
help you be more successful in what you
do on a day-to-day basis so he wants to

97
00:11:43,919 --> 00:11:56,139
come up and be the first to come here
and yeah yeah right right in the center

98
00:11:56,139 --> 00:12:24,150
stand over the ice please

99
00:12:24,150 --> 00:13:24,889
that's ok

100
00:13:24,889 --> 00:13:30,399
the question was about some of the some
of the issues that people have run into

101
00:13:30,399 --> 00:13:35,069
with network reliability with mature
butter and so I'm going to hand this

102
00:13:35,069 --> 00:13:39,799
question over to brent is he is our
president interpreter expert hi

103
00:13:39,799 --> 00:13:41,089
everybody

104
00:13:41,089 --> 00:13:45,959
yes I could be the expert deal exported
butter butter but we have done that a

105
00:13:45,959 --> 00:13:52,499
lot of investments last year into making
more robust network reliability

106
00:13:52,499 --> 00:13:55,929
something that we've added fairly
recently the ability to do we connects

107
00:13:55,929 --> 00:13:59,799
and disconnects the ability to switch
the transports and applied to deal to

108
00:13:59,799 --> 00:14:04,749
validation make sure that the guys that
you're talking to remotely is looking

109
00:14:04,749 --> 00:14:09,019
for the still more work to be done in
that area but we've made a lot of

110
00:14:09,019 --> 00:14:15,279
progress we had be the mature for what
you want to do we had like a survey last

111
00:14:15,279 --> 00:14:18,169
year we asked people what was most
importantly do you want me to direct

112
00:14:18,169 --> 00:14:19,389
appeal to do

113
00:14:19,389 --> 00:14:24,579
state senator makes a big difference
with regards to not having two stages of

114
00:14:24,579 --> 00:14:30,889
us the payload autoload everything you
need in one bundle small things that we

115
00:14:30,889 --> 00:14:40,290
looked at me too and thanks to support
Windows network protocols proxy support

116
00:14:40,290 --> 00:14:46,290
is greatly enhance these days we have
added when ACP support so that we can

117
00:14:46,290 --> 00:14:52,559
better connect and built to inject
validation steps into I guess all

118
00:14:52,559 --> 00:14:56,949
connections SL Headley there's a really
good PR that are still sitting waiting

119
00:14:56,949 --> 00:15:02,779
for review and see the actual
performance and ability to handle three

120
00:15:02,779 --> 00:15:07,499
tries in this connection I kinda thing
its basic an ongoing process if you have

121
00:15:07,499 --> 00:15:12,410
still do you are you work user or you
liked when using Pro or

122
00:15:12,410 --> 00:15:21,779
competitions were using but just und ok
community ok so I think it's better all

123
00:15:21,779 --> 00:15:25,759
the time there's probably a lot more
work to be done in the area but

124
00:15:25,759 --> 00:15:29,949
certainly advanced quite a bit in this
last year having used in the last year

125
00:15:29,949 --> 00:15:32,279
that lasts for five months

126
00:15:32,279 --> 00:15:35,430
that'll give it a try and let us know
what you see

127
00:15:35,430 --> 00:15:41,279
yes and that that last bit is of course
important and that's part of why we're

128
00:15:41,279 --> 00:15:44,930
here if you're seeing specific issues
reach out to us

129
00:15:44,930 --> 00:15:53,449
IRC Twitter right here right now or an
issue now file a bug we do look at them

130
00:15:53,449 --> 00:16:09,839
next question was what was the most
interesting and unexpected feature

131
00:16:09,839 --> 00:16:17,520
requests

132
00:16:17,520 --> 00:16:29,010
well I think the most interesting thing
to me was that movies wrote a novel we

133
00:16:29,010 --> 00:16:37,770
we said hey what are the things you want
to do and he included everything better

134
00:16:37,770 --> 00:16:50,270
as an entire domain they were find out
that you have Windows users we put a lot

135
00:16:50,270 --> 00:16:53,610
of effort into supporting Windows but
according to the survey lot more people

136
00:16:53,610 --> 00:16:57,450
using OSX and Windows these days and
Dixie almost an order of magnitude more

137
00:16:57,450 --> 00:16:58,740
so

138
00:16:58,740 --> 00:17:02,130
communists think things are changing

139
00:17:02,130 --> 00:17:09,480
yeah I would agree that we we have a lot
more Windows users then I ever expect

140
00:17:09,480 --> 00:17:16,420
whenever whenever we look at
demographics and say what operating

141
00:17:16,420 --> 00:17:20,200
system are you running the display on we
get more people running Windows then

142
00:17:20,200 --> 00:17:30,380
really make sense at all to rate which
is any number above zero as Josh so so

143
00:17:30,380 --> 00:17:38,410
I'll put it yeah so there's no question

144
00:17:38,410 --> 00:18:15,800
in essence was how do we look at other
people's work and and incorporated into

145
00:18:15,800 --> 00:18:29,480
medicine without just outraged stealing
it right now there's a couple of parts

146
00:18:29,480 --> 00:18:35,120
that outright again medicine community
driven and there are a lot of other

147
00:18:35,120 --> 00:18:38,600
great tools out there that are doing
stuff whether you're talking about power

148
00:18:38,600 --> 00:18:44,890
PowerShell stuff with power spoil this
PowerShell Empire thing are you talking

149
00:18:44,890 --> 00:18:48,500
to me like sequin that that does
something that you know Metasploit

150
00:18:48,500 --> 00:18:51,960
really isn't set up to do in the first
place

151
00:18:51,960 --> 00:18:57,010
our first step usually is to try and
reach out to those other community

152
00:18:57,010 --> 00:19:01,920
members who are also doing open source
project and talk to try and open a

153
00:19:01,920 --> 00:19:06,690
dialogue with them you know how do we
make are cool and you're told

154
00:19:06,690 --> 00:19:11,890
work together whyyy why should we try
and reinvent something that somebody

155
00:19:11,890 --> 00:19:18,040
else is already done really well like I
I know it's been at least five years now

156
00:19:18,040 --> 00:19:21,470
going back and forth every now and again
trying to reach out to the sequel map

157
00:19:21,470 --> 00:19:25,390
guys and they're always I guess we'd
love to integrate with Metasploit but

158
00:19:25,390 --> 00:19:32,640
you know there's they're written in
Python were written in Ruby in with so I

159
00:19:32,640 --> 00:19:38,900
just think we need to address but I'm to
me the solution lies as much as possible

160
00:19:38,900 --> 00:19:45,100
in integrating our efforts and working
together because it it's not competitive

161
00:19:45,100 --> 00:19:47,370
when you're talking about open source
tools

162
00:19:47,370 --> 00:19:54,610
collaborative yeah and and right here

163
00:19:54,610 --> 00:20:05,010
ok one of the things that you like that
give later one of things I really like a

164
00:20:05,010 --> 00:20:08,890
lot about the there there is there's a
there's a modest weight ecosystem right

165
00:20:08,890 --> 00:20:14,370
like we're and we're part of a larger
open source thing I am I am a giant fan

166
00:20:14,370 --> 00:20:18,580
things like strike and a few a

167
00:20:18,580 --> 00:20:24,080
and and things that run on on meh
display because it forces my employers

168
00:20:24,080 --> 00:20:29,409
who pay me to do good like it forces us
to like not just sit back on these like

169
00:20:29,409 --> 00:20:35,590
super comfortable laurels we we have to
innovate up just to just to keep up and

170
00:20:35,590 --> 00:20:40,220
and I think I don't know I think we've
been doing a pretty good job that if

171
00:20:40,220 --> 00:20:44,330
there are like a must haves must have
features that are like locked up and

172
00:20:44,330 --> 00:20:51,110
some proprietary lockbox you know that
we accept requests for sure like down go

173
00:20:51,110 --> 00:20:54,830
and ripping people off in which you know
we want to do attribution crackling

174
00:20:54,830 --> 00:20:58,690
sound like a thanks a lot to whomever I
think a great example that is like all

175
00:20:58,690 --> 00:21:06,159
the stuff right so like many cats a
super awesome its mechanism for pulling

176
00:21:06,159 --> 00:21:10,919
hashes out of memory right and thats
we've been working with the same genteel

177
00:21:10,919 --> 00:21:12,169
weeki

178
00:21:12,169 --> 00:21:19,679
helping out so yeah we've been working
with him for years and years and he's

179
00:21:19,679 --> 00:21:23,889
he's super cool guy and and very humble
and and and really a pleasure to work

180
00:21:23,889 --> 00:21:28,600
with so I'd love to see more that we
work with the nmap guys a lot we work

181
00:21:28,600 --> 00:21:33,200
with them and by the way we have support
like forty or fifty import formats like

182
00:21:33,200 --> 00:21:37,090
if you go and do recon work like some
other tool wait we're happy to take

183
00:21:37,090 --> 00:21:58,530
their data so who else you that awesome

184
00:21:58,530 --> 00:22:12,660
likes to do we ever get people yelling
at us for owning them can I take this

185
00:22:12,660 --> 00:22:20,000
one ok so big part of my job as a hacker
was standing over here

186
00:22:20,000 --> 00:22:25,630
yeah I know blocked off and make up the
room so a big part of my job is dealing

187
00:22:25,630 --> 00:22:29,350
with vulnerability disclosure either
that comes from internal research on

188
00:22:29,350 --> 00:22:33,710
rapid 70 or display user is a vacay I
have this idea don't know what to do

189
00:22:33,710 --> 00:22:38,220
with it I don't go to jail can you help
and I guess I also don't want you to go

190
00:22:38,220 --> 00:22:43,990
to do so the cat the feedback we
typically get so the examples the asker

191
00:22:43,990 --> 00:22:50,370
gave was like HP and Microsoft outfits
like those Microsoft especially are

192
00:22:50,370 --> 00:22:57,100
super mature when it comes to building
handling if I go and tell Microsoft hey

193
00:22:57,100 --> 00:23:02,810
there's about you know we have a display
module that's cool at the little more

194
00:23:02,810 --> 00:23:08,450
detail than that but typically the
responses we get from vendors as thank

195
00:23:08,450 --> 00:23:12,760
you very much for mature vendors like
that thank you very much for the bug

196
00:23:12,760 --> 00:23:17,020
report we will have a pass something
that's awesome because we're gonna

197
00:23:17,020 --> 00:23:22,690
releases minutes late model here pretty
soon so get right on that our overall

198
00:23:22,690 --> 00:23:27,760
our our processes typically tell the
vendor given 15 days to like do whatever

199
00:23:27,760 --> 00:23:33,260
they need to do we work with certain a
lot in Pittsburgh search CCR the search

200
00:23:33,260 --> 00:23:37,779
division or whatever they refer to
themselves as now

201
00:23:37,779 --> 00:23:44,570
and we tell them that after the 15 days
within 45 days from there we insert

202
00:23:44,570 --> 00:23:47,879
ended disclosed at the same time when we
disclose we tend to disclose like with

203
00:23:47,879 --> 00:23:53,559
the Ministry might also prove it but i
think is important now as far as other

204
00:23:53,559 --> 00:23:59,419
vendors who may not be so mature in
their vulnerability handling model those

205
00:23:59,419 --> 00:24:05,159
answers go all over the place they go
from total silence because we can't find

206
00:24:05,159 --> 00:24:12,129
them at all like every email address
bounced to people being very angry which

207
00:24:12,129 --> 00:24:15,559
usually ends up getting followed up by a
phone call or someone emails me like a

208
00:24:15,559 --> 00:24:20,580
no no we're not like trying to be bad
for not being more telling you about a

209
00:24:20,580 --> 00:24:24,679
problem and I know that it's your baby
and it's very hard to hear what that

210
00:24:24,679 --> 00:24:29,330
your baby is ugly but it's it's a little
ugly like right there and you just like

211
00:24:29,330 --> 00:24:35,219
set up it'd be super easy and so that's
typically and almost always those

212
00:24:35,219 --> 00:24:40,859
conversations and a possible almost
always because in those cases often I'm

213
00:24:40,859 --> 00:24:45,379
the first one to ever talk to them about
security with their product and so I try

214
00:24:45,379 --> 00:24:49,529
to at least appreciate that it is hard
to hear it is like it's an emotional

215
00:24:49,529 --> 00:24:55,940
event and so we try to use that against
them to do get them to you know patch

216
00:24:55,940 --> 00:24:59,169
that's a ship so that's it

217
00:24:59,169 --> 00:25:01,230
next

218
00:25:01,230 --> 00:26:30,570
to go over there is somebody oh yes I
under a late yeah I best go back on the

219
00:26:30,570 --> 00:26:38,590
job

220
00:26:38,590 --> 00:26:48,940
testing against thousands of hosts and
there's all kinds of stuff going on its

221
00:26:48,940 --> 00:26:55,029
successful loggins because you're owning
everything so there's tons of output on

222
00:26:55,029 --> 00:26:59,090
the console and is there a way to deal
with that

223
00:26:59,090 --> 00:27:10,440
like more cleanly more cleanly more
better more better the the console

224
00:27:10,440 --> 00:27:14,279
output is the big problem there
everything else is fine run in the

225
00:27:14,279 --> 00:27:24,029
background you can using a little bit of
clever IRB usage you can suppress all of

226
00:27:24,029 --> 00:27:31,399
that output by giving it an ill output
file and by doing that it should

227
00:27:31,399 --> 00:27:39,710
suppress all of the output but you'll
still get the database locks so yes it's

228
00:27:39,710 --> 00:27:43,520
not it's not super simple because that's
not a use case that we have optimized

229
00:27:43,520 --> 00:27:51,580
for but it is certainly possible and
you'll still have everything in the

230
00:27:51,580 --> 00:27:55,880
database so you'll have all of your
successful login still have all of using

231
00:27:55,880 --> 00:28:00,940
a password tied to a core object in the
database and I'm going to be talking

232
00:28:00,940 --> 00:28:05,539
about the potential model a lot more in
my talk tomorrow so if you wanna see

233
00:28:05,539 --> 00:28:09,010
some more details about that we can talk
about them or feel free to hit me up

234
00:28:09,010 --> 00:28:16,140
later for more details of the nuts and
bolts of how credentials work but the

235
00:28:16,140 --> 00:28:30,510
short answer is yes I want to turn this
around the same spirit that question out

236
00:28:30,510 --> 00:28:36,240
of all the people here who are using
Metasploit Framework how many of you are

237
00:28:36,240 --> 00:28:41,799
running it with a database to show a
chance

238
00:28:41,799 --> 00:28:51,320
ok how many of you run it with the
database disabled thanks Josh ok that's

239
00:28:51,320 --> 00:28:53,759
really good that's something we've
always been trying to get a handle on

240
00:28:53,759 --> 00:28:58,940
because the database does enable us to
do a lot of things but now there's the

241
00:28:58,940 --> 00:29:04,289
question of how how strongly tied that
database should be to the operation of

242
00:29:04,289 --> 00:29:09,970
medicine so it's good information minga
I think you had a question

243
00:29:09,970 --> 00:29:39,100
try harder

244
00:29:39,100 --> 00:29:48,739
alright so let me address your first one
and then these guys one of these guys

245
00:29:48,739 --> 00:29:53,720
will probably be better for the second
part of that the LDAP thing there's a

246
00:29:53,720 --> 00:30:00,519
couple places where that's come in more
mature peter has a DSi support now so if

247
00:30:00,519 --> 00:30:04,950
you're on a domain member you can do
full LDAP queries directly from Himachal

248
00:30:04,950 --> 00:30:09,789
Pradesh console and it will go director
your domain controller also earlier this

249
00:30:09,789 --> 00:30:14,799
year I added a feature to monitor
printer for when you get an interpreter

250
00:30:14,799 --> 00:30:19,989
show on a domain controller it will
actually pull down the NTDs da dit file

251
00:30:19,989 --> 00:30:27,779
from a shadow copy on on that machine
and then parse it live and it does it a

252
00:30:27,779 --> 00:30:30,869
live streaming manner so a lot of these
third-party tools that you would use to

253
00:30:30,869 --> 00:30:35,980
do that load everything in memory and
then spit all the hashes out for you at

254
00:30:35,980 --> 00:30:36,799
the end

255
00:30:36,799 --> 00:30:40,300
matar paneer doesn't do that and
actually uses the Jet Database

256
00:30:40,300 --> 00:30:45,620
to connect directly in and all the
accounts in batches of about 10 at a

257
00:30:45,620 --> 00:30:49,360
time and streams them back to you and
does the next 10 in the next time so if

258
00:30:49,360 --> 00:30:53,170
anything happens to your session while
you're doing that you still got as far

259
00:30:53,170 --> 00:30:57,960
as you've got you didn't lose everything
and compared to other tools that I won't

260
00:30:57,960 --> 00:31:02,620
name that are set up to do the same
thing we only cause a one percent CPU

261
00:31:02,620 --> 00:31:08,550
utilization increase when doing that the
other some other ones that take the CPU

262
00:31:08,550 --> 00:31:13,440
as for the poor request process branch
Egypt which one he wants to take that

263
00:31:13,440 --> 00:31:22,280
right so first of all shorter Park West
series is pretty easy to merge obviously

264
00:31:22,280 --> 00:31:26,510
they're doing things have changed the
library the reform at all the code

265
00:31:26,510 --> 00:31:32,540
libraries that doesn't take more time it
was kind of a debate about whether we

266
00:31:32,540 --> 00:31:36,350
should just pick things up silently or
we should just wait for the contributors

267
00:31:36,350 --> 00:31:41,170
to come back and fix up whatever is
running some like Rubalcaba against your

268
00:31:41,170 --> 00:31:48,440
code is always a nice bonus we do surely
welcome people who are or will likely

269
00:31:48,440 --> 00:31:53,510
double coat but it's usually best done
in the context of I've also fix some

270
00:31:53,510 --> 00:31:57,980
things and so while you're testing it by
the way you can also come in and you

271
00:31:57,980 --> 00:32:02,420
know pick some 18 year olds coding style
practice of gotten even a library

272
00:32:02,420 --> 00:32:06,950
something like that but yea in some
cases yet the squeaky wheel gets the

273
00:32:06,950 --> 00:32:11,170
grease I mean to admit that sometimes
when when someone's vocal about up or

274
00:32:11,170 --> 00:32:14,700
questions call it's interesting or vs oh
here's something that's kinda silently

275
00:32:14,700 --> 00:32:20,620
here it's really big you know and be
prioritized so I don't we just keep

276
00:32:20,620 --> 00:32:26,530
poking us that certainly does work both
be a better way to you know to

277
00:32:26,530 --> 00:32:33,400
prioritize things like that

278
00:32:33,400 --> 00:33:23,790
can we do that with your house but only
like button be perfect but we can look

279
00:33:23,790 --> 00:33:28,400
into it I'm sure there are ways to get
something like that done their external

280
00:33:28,400 --> 00:33:34,470
AC go ahead give has been really
responsive to us because we're one of

281
00:33:34,470 --> 00:33:39,220
the biggest projects on get home so
whenever we were like hey you guys

282
00:33:39,220 --> 00:33:48,600
should do this so making a future for us
to get my might be the right solution to

283
00:33:48,600 --> 00:33:55,340
that the importance of keeping upon
request small especially if you're

284
00:33:55,340 --> 00:33:59,940
dealing with a library code will give it
a model that's fine

285
00:33:59,940 --> 00:34:02,930
models can be as big as they need to be
to accomplish their task and get you a

286
00:34:02,930 --> 00:34:07,020
shell someplace but library code is
notoriously dangerous to deal with

287
00:34:07,020 --> 00:34:09,409
because our testing is not fabulous

288
00:34:09,409 --> 00:34:15,210
so if you can keep it small and tight
its own life easier to reach you see

289
00:34:15,210 --> 00:34:21,000
here goes a lot faster but so you had
the year and a half long for across that

290
00:34:21,000 --> 00:34:30,050
is absolutely a record average though is
around today

291
00:34:30,050 --> 00:34:41,630
yes rate including all the pork whatever
we average about a day to land so I know

292
00:34:41,630 --> 00:34:46,760
there are some that are they make big
changes in the touch code in the

293
00:34:46,760 --> 00:34:50,470
background that might affect a lot of
models miss you really careful with

294
00:34:50,470 --> 00:35:06,350
those with modules they went really fast
for the most part yes thank you just

295
00:35:06,350 --> 00:35:11,000
reach into my mouth and take take the
words out yes

296
00:35:11,000 --> 00:35:16,690
violate cuban compact and have to have

297
00:35:16,690 --> 00:35:21,890
reproduce some kind of reproducible test
it can be as simple as I run this thing

298
00:35:21,890 --> 00:35:25,400
and have this other things set up if
you're doing things like we had a long

299
00:35:25,400 --> 00:35:34,790
lunch along pull requests about likes
like a federated domain contacts and

300
00:35:34,790 --> 00:35:38,339
that thing was like a giant howsell to
set up but the guy who who sent him

301
00:35:38,339 --> 00:35:46,510
sutherland's included like these amazing
docks and here's how you said all this

302
00:35:46,510 --> 00:35:50,910
crap up because I know you guys don't
work in Windows grab every day that was

303
00:35:50,910 --> 00:35:59,960
great and get hubby is getting get up in
particular really allows us to not be a

304
00:35:59,960 --> 00:36:05,310
bottleneck if if something is super rad
and it works and we're just being lame

305
00:36:05,310 --> 00:36:12,930
and not answering the phone or whatever
but it's still a lot what a lot of

306
00:36:12,930 --> 00:36:17,560
people don't know and or maybe they just
don't do it is that you know you can for

307
00:36:17,560 --> 00:36:21,910
from other peoples repose to your own
repo and you can make changes and you

308
00:36:21,910 --> 00:36:24,430
don't have to like us permission or
anything you can just do this and you

309
00:36:24,430 --> 00:36:29,740
can like you can help a third and fourth
and fifth parties can all collaborate on

310
00:36:29,740 --> 00:36:34,680
things fairly easily during healing but
there's nothing in get but the first

311
00:36:34,680 --> 00:36:39,599
time is easy but I gave you done in like
two or three times like i for crap from

312
00:36:39,599 --> 00:36:42,800
these guys all the time and just kind of
go back and forth that way so if you

313
00:36:42,800 --> 00:36:48,990
have someone willing to help like tester
said then please do it because I guess

314
00:36:48,990 --> 00:36:52,700
there's more than one contributor on it
like that guests

315
00:36:52,700 --> 00:37:00,450
velocity and like positive inertia like
keep moving inertia on request so I

316
00:37:00,450 --> 00:37:03,960
we're always looking for ways to be
faster and better and stronger at that

317
00:37:03,960 --> 00:37:07,630
lending community stuff we are
constantly behind that's just kind of

318
00:37:07,630 --> 00:37:12,329
the name of the game when it comes to
popular products but hopefully not too

319
00:37:12,329 --> 00:37:19,990
too painfully slow so and if you've
never contributed before but you wanna

320
00:37:19,990 --> 00:37:28,260
get started it's fantastically helpful
to us to just come in and say yes I used

321
00:37:28,260 --> 00:37:33,260
this model it worked that is so useful
and it simple for you to do all you need

322
00:37:33,260 --> 00:37:37,680
to do is download this new model that
they've created you use their request

323
00:37:37,680 --> 00:37:42,720
branch and running against the thing and
then I have proof that the thing works

324
00:37:42,720 --> 00:37:48,359
from somebody who didn't write it so
it's fantastically useful please please

325
00:37:48,359 --> 00:38:16,430
do that what we have about 10 minutes
ago so the question was about the method

326
00:38:16,430 --> 00:38:22,210
the default method for staging to man
has his interpreter so they're too

327
00:38:22,210 --> 00:38:24,710
complicated things so back in the day

328
00:38:24,710 --> 00:38:30,740
interpreter used injection as its
default method for all hashed on be

329
00:38:30,740 --> 00:38:31,780
right

330
00:38:31,780 --> 00:38:37,330
hopefully everyone in this room knows
why that's bad really dangerous and for

331
00:38:37,330 --> 00:38:41,190
workstations we eventually created a
post model that uses an alternative

332
00:38:41,190 --> 00:38:44,800
method to still local account hashes

333
00:38:44,800 --> 00:38:51,700
so the deal if you run the default crash
dump command in mature perder on a

334
00:38:51,700 --> 00:38:55,780
domain controller it is still going to
do alsace injection and you will still

335
00:38:55,780 --> 00:38:59,600
get your domain has it that way but it
is dangerous and you can crash the

336
00:38:59,600 --> 00:39:05,990
domain controller there is a post module
called post windows gather credentials

337
00:39:05,990 --> 00:39:12,130
domain hashed you run that that post
module on your session and it will use

338
00:39:12,130 --> 00:39:16,530
that mature Peter library to do the
parsing for you and dumped displayed

339
00:39:16,530 --> 00:39:22,450
your console saving your database and do
all of that so if you cash dump command

340
00:39:22,450 --> 00:39:28,030
in mature border will still be doing
alsace injection now that module has two

341
00:39:28,030 --> 00:39:31,460
different ways of getting and TDS dot
did that depends on the version of

342
00:39:31,460 --> 00:39:39,960
Windows that you're using server 2003
anything before 2008 R two is going to

343
00:39:39,960 --> 00:39:45,890
use volume shadow copy directly and will
make a volume shadow copy copy NTDs but

344
00:39:45,890 --> 00:39:50,090
did out of that shadow copy and then
it'll do a repair operation on it does

345
00:39:50,090 --> 00:39:56,180
it will be in a bad state and then it'll
do the party's 2008 R two and beyond

346
00:39:56,180 --> 00:40:03,800
added this really nice tool called and
he asked you till that it's literally

347
00:40:03,800 --> 00:40:08,620
makes a copy of everything you need to
clone your domain controller so if you

348
00:40:08,620 --> 00:40:14,930
run this it will cause the state of that
database make a shadow copy of it

349
00:40:14,930 --> 00:40:19,520
your registry hives your Sam file all
those things and put them in a folder

350
00:40:19,520 --> 00:40:21,190
somewhere for you

351
00:40:21,190 --> 00:40:27,630
her a thank you windows are doing all my
work for me so if the module actually

352
00:40:27,630 --> 00:40:28,260
detect

353
00:40:28,260 --> 00:40:33,470
operating system you're on and if it's
on 2008 R two or later it will use that

354
00:40:33,470 --> 00:40:35,040
method which is cleaner

355
00:40:35,040 --> 00:40:39,710
and if it's on an earlier method then it
will fall back to Volume Shadow Copy but

356
00:40:39,710 --> 00:40:43,370
that's just to get the copy of NTDs dot
did it once it starts parsing it's the

357
00:40:43,370 --> 00:41:13,780
same mechanism by the way it should be
whatever the database at that time so

358
00:41:13,780 --> 00:41:19,980
it's what's in NTS dot did at the time
that you run the model so it will take a

359
00:41:19,980 --> 00:41:25,510
copy of NTDs . debt as it exists at that
exact moment in time and copy it so

360
00:41:25,510 --> 00:41:27,550
whatever is in that database

361
00:41:27,550 --> 00:41:31,660
whatever is in that database at that
time is what you get

362
00:41:31,660 --> 00:41:38,020
also you get all the safe password
history hash hashes for the history

363
00:41:38,020 --> 00:42:11,650
which is anywhere from 12 to 24 saved
passwords back

364
00:42:11,650 --> 00:42:20,960
works but I would have to look further
into that behavior to be able to fully

365
00:42:20,960 --> 00:42:40,190
answer that question could be a domain
replication issue right so they could be

366
00:42:40,190 --> 00:42:45,350
logging on to the site domain controller
or a backup Dec

367
00:42:45,350 --> 00:42:49,050
and it's not replicating over yet that
might be what you are saying but

368
00:42:49,050 --> 00:42:54,220
everything and he asked outdate should
be the live journaling of everything in

369
00:42:54,220 --> 00:42:58,800
your Active Directory domain at that
time so that's where everything should

370
00:42:58,800 --> 00:43:31,580
be yes sir yes sir system on the inside
and you want to set up listeners on that

371
00:43:31,580 --> 00:43:35,620
machine for other things to talk to you
like browser exploits and that sort of

372
00:43:35,620 --> 00:43:37,590
thing

373
00:43:37,590 --> 00:43:44,570
the basic mechanisms are there and you
can do you can do some of it through our

374
00:43:44,570 --> 00:43:54,030
be and there's another very long
standing outstanding pull request that

375
00:43:54,030 --> 00:44:02,190
allows you to use a reverse listener com
so you have a reversal addressing that

376
00:44:02,190 --> 00:44:08,770
tells what address to listen on but this
pull request would also add a reverse

377
00:44:08,770 --> 00:44:13,910
listener com which you can give it a
session numbers say when you create the

378
00:44:13,910 --> 00:44:19,260
service started there but that hasn't
landed yet again its library code that

379
00:44:19,260 --> 00:44:20,970
affects every module

380
00:44:20,970 --> 00:44:27,060
so it's it's difficult to guarantee
that's not breaking everything yes

381
00:44:27,060 --> 00:44:36,300
actually I use that pull request check
out their branch and try it and if it

382
00:44:36,300 --> 00:44:50,270
works for you put a little +1 in the
power crisis and ok so

383
00:44:50,270 --> 00:45:05,930
crashes ok ok well having that feedback
on the pull request would help just yes

384
00:45:05,930 --> 00:45:11,050
like just tell us what you tried tools
will work still wouldn't work and will

385
00:45:11,050 --> 00:45:14,860
go a long way to determining whether
it's worth landing or or what we need a

386
00:45:14,860 --> 00:45:26,640
fix to make it work we have time for
maybe one more quick question if anyone

387
00:45:26,640 --> 00:45:29,580
has one or the backer

388
00:45:29,580 --> 00:45:47,920
so yes so I gave a talk two years ago I
believe here at Derby Conn and antivirus

389
00:45:47,920 --> 00:45:56,850
of Asian research that i've done and
there's two photo that led to features

390
00:45:56,850 --> 00:46:01,770
and our commercial product Metasploit
pro and part of the reason we don't

391
00:46:01,770 --> 00:46:06,080
really see that is as soon as we put
anything in framework the AV vendors

392
00:46:06,080 --> 00:46:12,190
immediately right signatures or whatever
we put out there so unfortunately the

393
00:46:12,190 --> 00:46:17,420
technique that we came up with that
we're not we're not last very long if we

394
00:46:17,420 --> 00:46:22,200
made it public and open source as much
as I'd like to make it open source

395
00:46:22,200 --> 00:46:27,320
however it did lead to some changes in
how are executable payloads are

396
00:46:27,320 --> 00:46:32,830
generated so when I say executable I
mean the where we put our payload in an

397
00:46:32,830 --> 00:46:39,150
actual exe file and is dropped on disk
we made some changes to how that

398
00:46:39,150 --> 00:46:45,630
shellcode gets injected into EXE use and
it resulted in there is a method that

399
00:46:45,630 --> 00:46:50,190
preserves the original functionality of
whatever exe use so say you take calc

400
00:46:50,190 --> 00:46:54,170
exe it will actually create new segments
of memory

401
00:46:54,170 --> 00:46:58,890
shellcode in there and do some clever
jump tricks so that when you run the exe

402
00:46:58,890 --> 00:47:04,320
it runs the payload often a thread and
then doesn't sneaky stuff to hide that

403
00:47:04,320 --> 00:47:07,770
threat from any kind of debugging and
whatnot and then jumps back to the main

404
00:47:07,770 --> 00:47:13,530
program so some of it has made its way
into framework some of the large bulk of

405
00:47:13,530 --> 00:47:17,950
it is kept in our commercial edition
partially just to keep it away from the

406
00:47:17,950 --> 00:47:20,440
AV benders

407
00:47:20,440 --> 00:47:26,850
vendors also we and you'll see tomorrow
in Egypt's talk I'm totally stealing

408
00:47:26,850 --> 00:47:32,110
your thunder it's instead of fading
antivirus it's sometimes morph

409
00:47:32,110 --> 00:47:37,800
understand the antivirus and we so we
have several models that it'll be

410
00:47:37,800 --> 00:47:43,800
talking about tomorrow that that target
security software directly ok so we're

411
00:47:43,800 --> 00:47:48,350
we're just about out of time here so I
want to wrap this up by saying first of

412
00:47:48,350 --> 00:47:52,920
all thank you to everyone in this room
for coming thank you especially to those

413
00:47:52,920 --> 00:47:58,540
of you who have been an active
contributor those of you having go ahead

414
00:47:58,540 --> 00:48:01,520
and give it a child don't feel
intimidated we don't bite I promise

415
00:48:01,520 --> 00:48:10,160
unless you ask real nice maybe and
thanks to Derby Conn again for letting

416
00:48:10,160 --> 00:48:16,020
us come here and do this this was to my
mind this was the only venue where it

417
00:48:16,020 --> 00:48:23,020
made sense to do this because it's such
a nice tight knit community feel here we

418
00:48:23,020 --> 00:48:27,450
wanted to have everyone feeling casual
and laid back and without this

419
00:48:27,450 --> 00:48:31,980
environment we wouldn't have been able
to do something like this so you know

420
00:48:31,980 --> 00:48:36,200
thank you everybody and make sure to
thank all the staff here at Derby Conn

421
00:48:36,200 --> 00:48:37,110
for putting this on

