1
00:00:00,000 --> 00:00:06,790
the phone screwed alright whose stock is
for who's all my super senior paying

2
00:00:06,790 --> 00:00:09,210
customers in here

3
00:00:09,210 --> 00:00:14,790
yeah you're gonna be bored out of their
minds I actually wrote this review for

4
00:00:14,790 --> 00:00:17,289
junior penthouse letters lot of this
came from

5
00:00:17,289 --> 00:00:20,439
we kept going to talks and hearing
people talk and talk and talk about oh

6
00:00:20,439 --> 00:00:25,150
people don't know how to use anything
but a scanner alright we're gonna tell

7
00:00:25,150 --> 00:00:29,019
me that I don't do it right nobody's
going to show me the way we get onto

8
00:00:29,019 --> 00:00:33,660
that investors didn't know there was
another way for quite a while I thought

9
00:00:33,660 --> 00:00:38,160
scanners were about the only way to do
things and customers who may have forgot

10
00:00:38,160 --> 00:00:40,960
the old ways so are you seeing your pen
testers there might be a little

11
00:00:40,960 --> 00:00:44,270
something you take away from this there
might not be any my head call me and

12
00:00:44,270 --> 00:00:49,410
throw things at me I prefer that please
a.m. about here this is the money maker

13
00:00:49,410 --> 00:00:55,449
and those curious about what the tools
actually do some of the things that we

14
00:00:55,449 --> 00:00:58,510
actually got to do is tear about part
the tools and figure out how they worked

15
00:00:58,510 --> 00:01:05,350
so the stock actually came from Derby
Conn last year we got to see mr. John

16
00:01:05,350 --> 00:01:10,420
strain talk and awesome awesome speaker
probably one of the best talks have ever

17
00:01:10,420 --> 00:01:15,710
been to my life and I had a blast at it
one of the things he said unfortunately

18
00:01:15,710 --> 00:01:19,500
one of us the original one of the other
original authors is out running all over

19
00:01:19,500 --> 00:01:23,720
the world will get to him later but one
thing we both looked when we came out of

20
00:01:23,720 --> 00:01:28,900
the thing if you can be replaced by a
tool you will be everybody is looking to

21
00:01:28,900 --> 00:01:30,579
cut money on security

22
00:01:30,579 --> 00:01:32,620
you know we are not cheap

23
00:01:32,620 --> 00:01:37,750
which is awesome for us not so much for
the corporate side they're always

24
00:01:37,750 --> 00:01:40,670
looking for a way to get rid of us and
if they think a scanner to do all we can

25
00:01:40,670 --> 00:01:44,010
do better they're gonna get rid of you
and then they're gonna hire you back to

26
00:01:44,010 --> 00:01:47,470
three months to figure out the scared
and do it but for three months you might

27
00:01:47,470 --> 00:01:55,530
be looking for a job so this is a
corporate stock photo let me in the

28
00:01:55,530 --> 00:01:56,900
front there

29
00:01:56,900 --> 00:02:00,420
Carson actually in business attire but
they're in the back with the suit and

30
00:02:00,420 --> 00:02:05,540
tie on leave one next term is Chester
before the beard and when he had hair

31
00:02:05,540 --> 00:02:10,790
and his own and Tonio right there
looking graceful as ever

32
00:02:10,790 --> 00:02:17,980
why we're here there are a time and a
place rituals we've all been to a place

33
00:02:17,980 --> 00:02:22,260
where we get on site they give us a
class B address and expects to get

34
00:02:22,260 --> 00:02:26,960
through in three days you're not gonna
do this manually there is no way you can

35
00:02:26,960 --> 00:02:30,770
get through that so yes there's a time
that you're gonna have to use a tool but

36
00:02:30,770 --> 00:02:34,380
one day I want to reiterate very much
right now in the beginning of the talk

37
00:02:34,380 --> 00:02:39,489
is we are not bashing on any of these
tools we use the shit out of them are

38
00:02:39,489 --> 00:02:46,100
cells so it was more of learning how the
tort and wirework that we got into this

39
00:02:46,100 --> 00:02:53,180
it wasn't a tear apart and say tools
don't work why manual testing team here

40
00:02:53,180 --> 00:02:58,390
has found out that it's great when he
throws me on the necessary to slowly go

41
00:02:58,390 --> 00:03:04,489
in while I'm making a ton of noise and
completely owned a company we're going

42
00:03:04,489 --> 00:03:07,900
to focus on web application testing we
all have to do it it's all something

43
00:03:07,900 --> 00:03:14,930
that we get into whether we like it or
not but also like to help you become

44
00:03:14,930 --> 00:03:18,519
rich monkey I don't know if you guys are
seeing a theme going here there is

45
00:03:18,519 --> 00:03:22,440
nothing dirty about this talk I just
have a thing for monkeys

46
00:03:22,440 --> 00:03:24,520
sorry about that

47
00:03:24,520 --> 00:03:31,730
we'll get to that side so you need is to
why you're here one of the things we

48
00:03:31,730 --> 00:03:34,250
would hope that you can take away from
here is how to become a stealthy

49
00:03:34,250 --> 00:03:41,030
attacker how you can go in under the
radar and in less than 10 request find

50
00:03:41,030 --> 00:03:45,820
your way into an organization this is
going to be a great benefit to everybody

51
00:03:45,820 --> 00:03:50,710
know I D S is going to pick you up in 10
request expression of somebody else on

52
00:03:50,710 --> 00:03:55,510
your team is running necessary ready by
that time the people in the soccer Rd

53
00:03:55,510 --> 00:03:59,550
figure out how do I turn off the alerts
so there's your guaranteed not to be

54
00:03:59,550 --> 00:04:05,240
noticed we want to demystify the ideas
the scanners are all you that you are

55
00:04:05,240 --> 00:04:08,660
something that you totally have to have
there's a lot of guys you're doing this

56
00:04:08,660 --> 00:04:12,380
for fun and like learning how to do it
you don't have to go out and buy the

57
00:04:12,380 --> 00:04:15,770
expensive expanders you don't have to
have an Asus license you don't have to

58
00:04:15,770 --> 00:04:20,410
have a burger places they're smaller
things you can do to actually get better

59
00:04:20,410 --> 00:04:26,060
results from we also want to make you a
better pen tester as we said before if

60
00:04:26,060 --> 00:04:30,500
you can be replaced by a tool you will
be if you can show the you have a value

61
00:04:30,500 --> 00:04:53,380
above the 200 day break so many doing
alright you're fixing the story we will

62
00:04:53,380 --> 00:04:56,810
make sure that you are replaced by a
tool that you're not the guy that comes

63
00:04:56,810 --> 00:04:59,090
up in the budget cut

64
00:04:59,090 --> 00:05:04,750
now back to my reg monkey side we want
to help you guys make more money if you

65
00:05:04,750 --> 00:05:06,470
can prove that your valuable asset

66
00:05:06,470 --> 00:05:10,620
you're going to stay at that company
they're not going to let you go they're

67
00:05:10,620 --> 00:05:17,110
not going to want to get rid of you have
the blue screen of death already on a

68
00:05:17,110 --> 00:05:20,540
Mac I'm a special person

69
00:05:20,540 --> 00:05:26,729
alright so the problem

70
00:05:26,729 --> 00:05:30,870
tools are constrained by a set of rules
that are actually put in by the coders

71
00:05:30,870 --> 00:05:33,850
and those guys are amazing and way above
my head and that time I don't know what

72
00:05:33,850 --> 00:05:34,430
they're doing

73
00:05:34,430 --> 00:05:39,169
I live like one of them very rare
creatures in our industry

74
00:05:39,169 --> 00:05:42,510
what's the first thing I read that real
loud for me

75
00:05:42,510 --> 00:05:49,650
rules are meant to be broken yes that is
what we get paid to do that is the first

76
00:05:49,650 --> 00:05:53,610
thing you should get on site how can I
do this that nobody else has thought of

77
00:05:53,610 --> 00:05:55,190
it yet

78
00:05:55,190 --> 00:05:59,080
next door should be an addition to your
testing they shouldn't be the be all end

79
00:05:59,080 --> 00:06:04,639
all in all of your testing we also don't
see you turn into a scanner scanner

80
00:06:04,639 --> 00:06:10,120
monkey junkie we all know that Pinterest
puppy mills those poor places where all

81
00:06:10,120 --> 00:06:13,950
you ever get to do is run a rebranded
Nessus scan and turned into his pen test

82
00:06:13,950 --> 00:06:18,400
all of us the gun on sightseeing those
results and just started chuckling to

83
00:06:18,400 --> 00:06:19,830
ourselves

84
00:06:19,830 --> 00:06:24,080
I don't want to end up like nobody here
not gonna mention any names but you

85
00:06:24,080 --> 00:06:28,610
still Mercedes house GOP's to put back
on your car after things go bad please

86
00:06:28,610 --> 00:06:35,810
don't end up like this more monkey right
solution we're going to Semenya web

87
00:06:35,810 --> 00:06:39,620
testing yes we are attempting the demo
guides and every way shape or form we

88
00:06:39,620 --> 00:06:42,780
are actually going to perform live demos

89
00:06:42,780 --> 00:06:49,360
I see so many guys giggle in China three
times we're gonna go through cross-site

90
00:06:49,360 --> 00:06:53,650
scripting weird usiku injection and
we're going to pick command injection

91
00:06:53,650 --> 00:06:59,310
why why why we picked these three simple
basic things that everybody knows about

92
00:06:59,310 --> 00:07:06,220
I can't say it any better than right
here at cor stopped him they keep I keep

93
00:07:06,220 --> 00:07:12,510
getting older and they stay the same age
as it should be cool if you fix those

94
00:07:12,510 --> 00:07:19,270
problems but yeah it every year these
come up in the office top 10 it's not

95
00:07:19,270 --> 00:07:27,410
without a doubt you will see these
things cause a scripting quick refresher

96
00:07:27,410 --> 00:07:30,620
for anybody as kind of forgotten the
definition or somebody that's new to

97
00:07:30,620 --> 00:07:38,040
this and you can hit the review I'm not
I'm here to lead not to read that one

98
00:07:38,040 --> 00:07:41,090
day I would you take away from it the
key component a cross-site scripting is

99
00:07:41,090 --> 00:07:49,290
the context next sequel injection keep
the key finding their way to take away

100
00:07:49,290 --> 00:07:51,850
from that is testing for an input that
is not correct

101
00:07:51,850 --> 00:07:54,470
correctly sanitized

102
00:07:54,470 --> 00:07:57,940
command injection

103
00:07:57,940 --> 00:08:02,100
again everybody loves show and I would
like to think Egypt cause I totally

104
00:08:02,100 --> 00:08:08,330
stole that from Metasploit so they had a
slide everybody loves shell that's one

105
00:08:08,330 --> 00:08:15,340
of the main things that we try to get
when we go on site so let's get down to

106
00:08:15,340 --> 00:08:19,390
the nitty gritty this is Nessa straight
out of the box we did not make one

107
00:08:19,390 --> 00:08:25,060
single change to it we had their web
application test didn't make like I said

108
00:08:25,060 --> 00:08:29,690
to make a single change to it and
started to run it the site that we

109
00:08:29,690 --> 00:08:33,940
created we intentionally put sequel
injection cross-site scripting

110
00:08:33,940 --> 00:08:40,460
command injection into we know it's
there we're an Asus eleven thousand

111
00:08:40,460 --> 00:08:45,260
requests and also we got back was
informational this is why you cannot

112
00:08:45,260 --> 00:08:49,680
pull something directly out of the box
and expected to do your job you need to

113
00:08:49,680 --> 00:09:00,520
do your job as well we did the settings
level 5 risk level 3 which are the

114
00:09:00,520 --> 00:09:08,500
highest settings that you can set in the
sequel map grants equal map no injection

115
00:09:08,500 --> 00:09:13,450
not a single problem found by sequel map
and listen I am the biggest supporter of

116
00:09:13,450 --> 00:09:15,800
open source guys because they are
amazing

117
00:09:15,800 --> 00:09:19,040
they're truly the rock stars of our
industry because they put the time and

118
00:09:19,040 --> 00:09:23,040
effort after work every day to do this
stuff and not even though it is a real

119
00:09:23,040 --> 00:09:27,870
job I have enough time I have no trouble
to get my lawn mowed you can ask my

120
00:09:27,870 --> 00:09:32,470
girlfriend should probably throw
something at me right now but yeah these

121
00:09:32,470 --> 00:09:40,540
guys put the hours and every night we
have a site about that later we were on

122
00:09:40,540 --> 00:09:42,450
birth everybody left burp

123
00:09:42,450 --> 00:09:48,010
who loves burp here let's hear it yea
per visit one of the most amazing tools

124
00:09:48,010 --> 00:09:56,000
out there goes down we remember her back
she found our command injection it was

125
00:09:56,000 --> 00:10:00,590
the only one that found anything
straight out of the box it miss two

126
00:10:00,590 --> 00:10:09,760
other things so why did this happen this
kind of my little wrap up and then just

127
00:10:09,760 --> 00:10:11,780
going to take over here for a few
minutes

128
00:10:11,780 --> 00:10:15,990
studies are important you can't just
pull things directly out of the box are

129
00:10:15,990 --> 00:10:22,440
expected to work is important we spend a
lot of time actually like with Nessus

130
00:10:22,440 --> 00:10:26,120
sitting down and going through all those
days or scripts and actually building

131
00:10:26,120 --> 00:10:29,990
something that will find things there
are so many great things out there in

132
00:10:29,990 --> 00:10:34,190
the nasal strips if you go through and
tweak it will find everything every

133
00:10:34,190 --> 00:10:34,850
single time

134
00:10:34,850 --> 00:10:43,430
well defined a lot more things with a
lot better value for your tool tools you

135
00:10:43,430 --> 00:10:47,400
saw how many requests era making we had
eleven thousand requests we had twenty

136
00:10:47,400 --> 00:10:53,060
two thousand requests now if I can do
this in three requests do you think any

137
00:10:53,060 --> 00:10:58,960
ides is ever gonna spot me is anybody in
your sock I don't care how bad they are

138
00:10:58,960 --> 00:11:01,030
they gonna see it

139
00:11:01,030 --> 00:11:04,670
know they're going to be too worried
about anything else is coming in from

140
00:11:04,670 --> 00:11:09,520
China according to some companies
they'll be worried about that that's

141
00:11:09,520 --> 00:11:15,210
what they're gonna be looking for from
here on out russia used purpose or

142
00:11:15,210 --> 00:11:19,420
reference tool mainly because it
actually did find one thing straight out

143
00:11:19,420 --> 00:11:20,300
of the box

144
00:11:20,300 --> 00:11:23,340
little bit later on we'll tell you how
we treat some of the settings to

145
00:11:23,340 --> 00:11:26,660
actually get it to find everything but
we're gonna start with that in the just

146
00:11:26,660 --> 00:11:36,140
the basic form I gotta type here so

147
00:11:36,140 --> 00:11:40,290
we'll see how this goes so we're going
to start with

148
00:11:40,290 --> 00:11:43,990
cross-site scripting where we're going
to we're going to focus on the

149
00:11:43,990 --> 00:11:50,170
reflective SSS you saw earlier that the
tools sent thousands of requests we only

150
00:11:50,170 --> 00:11:55,180
really need one probe but since we're
human we don't even need that one pro we

151
00:11:55,180 --> 00:11:59,940
can just take a look at the website see
how it's setup see what's there and go

152
00:11:59,940 --> 00:12:00,510
from there

153
00:12:00,510 --> 00:12:08,650
so let's take a look at the website and
we have our awesome website here it's

154
00:12:08,650 --> 00:12:19,370
it's an html5 css3 all the fun Lancet
latest fancy and stuff so we have are

155
00:12:19,370 --> 00:12:26,380
very angry monkey here then we have a
little taste that talks about us

156
00:12:26,380 --> 00:12:33,900
Members page and login page since we're
breaking the rules were gonna try going

157
00:12:33,900 --> 00:12:39,640
to a pace that doesn't exist and we get
an error that tells us that the server

158
00:12:39,640 --> 00:12:47,230
right now is running Apache so that's
the fun of cross site scripting if we

159
00:12:47,230 --> 00:12:54,330
take a look at the about us we see that
the URL has a link to a document and its

160
00:12:54,330 --> 00:12:59,880
reading a document from the file system
that's not indicative of a cross-site

161
00:12:59,880 --> 00:13:01,160
scripting vulnerability

162
00:13:01,160 --> 00:13:05,590
looking for a cross-site scripting
vulnerability we want to look at is the

163
00:13:05,590 --> 00:13:10,330
template from the URL is going to change
something on the output of the webpage

164
00:13:10,330 --> 00:13:17,300
so we can't really change this we look
down here in the text we see that the

165
00:13:17,300 --> 00:13:25,930
USTR techs are us stop text is not in
the document anywhere so if we go to the

166
00:13:25,930 --> 00:13:32,830
Members page we see our members listed
and there isn't too much going on here

167
00:13:32,830 --> 00:13:39,380
at this page however if we look at her
profile we see that we've got the 42 and

168
00:13:39,380 --> 00:13:46,110
Antonio and then down here we see that
there is 42 also so if we try injecting

169
00:13:46,110 --> 00:13:48,640
something into the URL

170
00:13:48,640 --> 00:13:54,440
we see that the euro is change the text
on a website hasn't really changed so

171
00:13:54,440 --> 00:14:01,130
much and then if we go look at the
source we see that again the text hasn't

172
00:14:01,130 --> 00:14:08,820
changed too much down here and so this
this part of the websites probably not

173
00:14:08,820 --> 00:14:14,030
too vulnerable this cross site scripting
we take a peek at the login page we see

174
00:14:14,030 --> 00:14:18,200
standard login page which is usually
where if there's a vulnerability for

175
00:14:18,200 --> 00:14:21,960
cross-site scripting that's where it's
going to be so when we're evaluating

176
00:14:21,960 --> 00:14:26,430
this we first 10 tries what happens when
we just log in without a username and

177
00:14:26,430 --> 00:14:32,770
password so we log in and we see you
know standard error message if we take a

178
00:14:32,770 --> 00:14:36,810
look at this error message we see that
there's maybe some blank space after the

179
00:14:36,810 --> 00:14:42,170
username and you know well so what's
gonna fill in there if anything's going

180
00:14:42,170 --> 00:14:47,980
to fill in there so we just try to log
in and we see that our username got

181
00:14:47,980 --> 00:14:53,270
replaced with a string of letters so
there were seeing where we changed we

182
00:14:53,270 --> 00:14:57,880
put some input into the web page and it
came out with something different so

183
00:14:57,880 --> 00:15:04,730
maybe some cross site scripting will
work so also if we take a look here the

184
00:15:04,730 --> 00:15:12,870
source code will see that our string of
texts is between a couple of decks so if

185
00:15:12,870 --> 00:15:16,460
we wanted to do some struck cross-site
scripting would have to first start by

186
00:15:16,460 --> 00:15:28,450
inserting some HTML tags into it so we
had some HTML tags type stuff in and we

187
00:15:28,450 --> 00:15:33,060
see that our user name is not the
standard user name error message now and

188
00:15:33,060 --> 00:15:37,950
that is also bowled so this is enough to
indicate to us that the website is

189
00:15:37,950 --> 00:15:42,020
vulnerable to cross site scripting
however making something bold isn't

190
00:15:42,020 --> 00:15:46,270
really all that fun so what we want to
do is try and run some client-side

191
00:15:46,270 --> 00:15:51,170
JavaScript

192
00:15:51,170 --> 00:16:03,680
so we type in our little script and we
had now have cross-site scripting with

193
00:16:03,680 --> 00:16:17,480
client side job so let's take a look at
what went on there so necessary and

194
00:16:17,480 --> 00:16:22,660
sequel map didn't find it but that's ok
those tools do a lot of awesome things

195
00:16:22,660 --> 00:16:27,240
but they're not really meant to find
that kind of stuff so I didn't find it

196
00:16:27,240 --> 00:16:33,170
didn't find it because the tools used
markers so when it does when it does

197
00:16:33,170 --> 00:16:39,329
it's testing it insert the executable
part and it puts in text around it and

198
00:16:39,329 --> 00:16:45,870
then examines the result and returned
true if the markers are are present so

199
00:16:45,870 --> 00:16:48,720
here is an example of D

200
00:16:48,720 --> 00:16:54,519
script and the markers markers are on
either side of the box there and then

201
00:16:54,519 --> 00:16:59,709
this is what we did to trigger we just
said hey if you see this replace it with

202
00:16:59,709 --> 00:17:03,699
our username and that's why you're
seeing the username when we were logging

203
00:17:03,699 --> 00:17:04,150
in

204
00:17:04,150 --> 00:17:11,620
so next we're gonna move on to SQL
injection for SQL injection we're gonna

205
00:17:11,620 --> 00:17:16,870
wanna find where SQL is being used and
exploited for a marker for sequel Matt

206
00:17:16,870 --> 00:17:21,730
used that fancy strength and we're gonna
use something similar as we saw earlier

207
00:17:21,730 --> 00:17:26,030
the website's ranking apache server so
it's a pretty good chance that is also

208
00:17:26,030 --> 00:17:30,460
running MySQL on the back end so we're
going to use our short and string and

209
00:17:30,460 --> 00:17:40,260
tested out so back at our website if we
go to the home page and then see are

210
00:17:40,260 --> 00:17:46,730
interesting link we have our our
document here and this might be a spot

211
00:17:46,730 --> 00:17:51,020
if the documents being read from from
the database to do some blank single

212
00:17:51,020 --> 00:17:53,340
injection however

213
00:17:53,340 --> 00:18:00,340
we try it out and nothing comes back so
we'll move on we have a login page again

214
00:18:00,340 --> 00:18:08,530
and try the same thing here see if it
works and we got nothing there so we'll

215
00:18:08,530 --> 00:18:12,240
go on to the Members page and if you
take a closer look at the Members page

216
00:18:12,240 --> 00:18:17,140
you'll see that the formatting is kinda
repeated and only the data's changed so

217
00:18:17,140 --> 00:18:19,670
that's pretty good indication that
something is actually being loaded from

218
00:18:19,670 --> 00:18:26,740
the database so if we go in here so that
the profile again and we do our little

219
00:18:26,740 --> 00:18:33,400
extra late we see in SQL message come
back error message so this means that

220
00:18:33,400 --> 00:18:37,710
the website is the Honorable to SQL
injection there isn't any filtering

221
00:18:37,710 --> 00:18:43,990
going on on those URLs so since we
figure that out we got our exploit of

222
00:18:43,990 --> 00:18:48,100
three characters so we want to try and
figure out what the actual character is

223
00:18:48,100 --> 00:18:53,700
causing problems so try the first one
and that didn't return this message

224
00:18:53,700 --> 00:19:00,560
second one that didn't return the Eskimo
message either 31 what we have the SQL

225
00:19:00,560 --> 00:19:06,720
message so now we know that our
excellent character is the backslash and

226
00:19:06,720 --> 00:19:10,640
we also see that we have two different
spots here where we couldn't put it on

227
00:19:10,640 --> 00:19:17,730
the 42 and on the Antonio so we'll try
it on the Antonio or on the 42 other and

228
00:19:17,730 --> 00:19:23,170
see what happens we get another SQL
message or error message so if we want

229
00:19:23,170 --> 00:19:26,580
to take a look at the source code for
this to see what's going on behind the

230
00:19:26,580 --> 00:19:32,650
screens at least for the HTML website
we're going to open up our roser use

231
00:19:32,650 --> 00:19:43,140
curl and take a look at what's going on
so down here at the bottom for the most

232
00:19:43,140 --> 00:19:45,030
part

233
00:19:45,030 --> 00:19:52,400
so we got our SQL message same error
message and then in the comments 0

234
00:19:52,400 --> 00:19:58,430
comments the writer of this website was
very kind enough to leave us that

235
00:19:58,430 --> 00:20:00,370
they're actually using to make

236
00:20:00,370 --> 00:20:06,500
to pull the data so we know that this is
a very typical real-life example of it

237
00:20:06,500 --> 00:20:11,140
however when you're doing a fantastic
reading through the HTML comments on a

238
00:20:11,140 --> 00:20:15,910
website or very important we then on
multiple tests where the comment

239
00:20:15,910 --> 00:20:19,810
obviously don't say this but they give
enough that you put them all together

240
00:20:19,810 --> 00:20:25,500
and you can figure out how to get in and
exploit the website so now that we have

241
00:20:25,500 --> 00:20:34,550
our exploit and we have our SQL query we
want to try and make the query actually

242
00:20:34,550 --> 00:20:39,590
work from within the web browser and
still exploit it but return true results

243
00:20:39,590 --> 00:20:46,630
so what we're gonna do is we're going to
add a true statement to the end of the

244
00:20:46,630 --> 00:20:52,200
oral here and we're gonna see what
happens unfortunately we got an error

245
00:20:52,200 --> 00:20:58,500
back but if we take a look at our air we
see that it looks like they removed all

246
00:20:58,500 --> 00:21:07,030
the spaces so one of the ways around
that is to put an HTML encoded tabs so

247
00:21:07,030 --> 00:21:08,720
if we do that real quick

248
00:21:08,720 --> 00:21:21,080
we get back

249
00:21:21,080 --> 00:21:25,290
true result so we found the
vulnerability we know the ex we know the

250
00:21:25,290 --> 00:21:29,620
the query that they're using and we
managed to break it and fix it

251
00:21:29,620 --> 00:21:41,590
same time so let's take a closer look at
that and we can see here that the

252
00:21:41,590 --> 00:21:46,510
underlying text is the database and then
the columns in the database and at the

253
00:21:46,510 --> 00:21:51,710
same time we have the little bracket
attacks that shows us what our query was

254
00:21:51,710 --> 00:22:00,020
was and then are back / they're broke
the single quote so that made the error

255
00:22:00,020 --> 00:22:04,200
message appear as I didn't know what to
do because all of that text suddenly

256
00:22:04,200 --> 00:22:09,310
became the idea field so that if we look
down at the bottom example we see where

257
00:22:09,310 --> 00:22:16,570
we fixed it and it returned a true
statement and then the user so

258
00:22:16,570 --> 00:22:23,310
furthermore this is how we were able to
mess with the the searching capabilities

259
00:22:23,310 --> 00:22:30,090
of SQL map and bourbon Nexus we were
simply took strains and replace them as

260
00:22:30,090 --> 00:22:35,800
bert was looking for them or putting
them in by the way if you're a web

261
00:22:35,800 --> 00:22:40,720
developer don't use this as your fix and
suddenly tell your program manager that

262
00:22:40,720 --> 00:22:54,380
the website secure so after we get back
to the site so after we figure this out

263
00:22:54,380 --> 00:22:59,220
for a couple more things we can do we
can take a look and say okay so this

264
00:22:59,220 --> 00:23:02,630
this is the table how many columns are
actually in the table what are the

265
00:23:02,630 --> 00:23:07,480
values of those of those columns are the
headers are names of those columns so

266
00:23:07,480 --> 00:23:10,990
that might tell us something more info
interesting that what's going on with

267
00:23:10,990 --> 00:23:14,910
the website and if there's something
more interesting on the website we

268
00:23:14,910 --> 00:23:20,750
should definitely take a look at it so
we'll go back to the website here and

269
00:23:20,750 --> 00:23:27,540
there are numerous SQL injection she
she's out there so what we did is we

270
00:23:27,540 --> 00:23:30,919
just try to mall until he found
something that worked

271
00:23:30,919 --> 00:23:45,489
and we found one that worked and we will
hear

272
00:23:45,489 --> 00:23:55,509
attempting to get the columns for the
number of columns rather so our SQL

273
00:23:55,509 --> 00:24:03,899
query that doesn't work with you don't
have to rate will try and say okay so

274
00:24:03,899 --> 00:24:09,570
we're gonna join combs 12 entry together
and it obviously didn't work as it to us

275
00:24:09,570 --> 00:24:14,409
that the SELECT statements have
different number of columns so we'll

276
00:24:14,409 --> 00:24:19,679
just try you try removing or adding a
column we are you know there's two to my

277
00:24:19,679 --> 00:24:26,149
return true in this case we know their
sport homes so we'll try with four and

278
00:24:26,149 --> 00:24:31,629
we see that it returns true so therefore
we know that there are four columns in

279
00:24:31,629 --> 00:24:39,269
the table so next we want to get the
call names so we'll take our next little

280
00:24:39,269 --> 00:24:46,679
example here and then we're going to
switch a little bit and we're going to

281
00:24:46,679 --> 00:24:53,139
use curl for most of these so if we
taste this in here again this is trying

282
00:24:53,139 --> 00:24:57,690
to combine the column's data this time
using the column names and so do the

283
00:24:57,690 --> 00:25:05,830
numbers and we returned it we see that
it's complaining that the common name of

284
00:25:05,830 --> 00:25:11,179
Twitter doesn't exist so in this case
we're actually taking advantage of all

285
00:25:11,179 --> 00:25:16,409
the error messages that MySQL is finding
out you know we're not actually reading

286
00:25:16,409 --> 00:25:19,440
anything from the table or doing
anything too fancy we're just taking

287
00:25:19,440 --> 00:25:24,570
advantage of the error messages that my
sequel has it so if we add to Twitter

288
00:25:24,570 --> 00:25:28,920
calling to our last command

289
00:25:28,920 --> 00:25:33,780
then we see that it has the password
calm now that sounds like a lot of fun

290
00:25:33,780 --> 00:25:40,060
we could definitely find something in
there so again going through plenty of

291
00:25:40,060 --> 00:25:45,300
examples out there and just finding the
one that works we came up with this

292
00:25:45,300 --> 00:26:02,680
command and what is its gonna run a
polygon so it's gonna try to run some

293
00:26:02,680 --> 00:26:06,980
calculation of some sort on the data
that in the columns that we specify

294
00:26:06,980 --> 00:26:12,870
what's interesting about this is that
when sales it's going to return devalue

295
00:26:12,870 --> 00:26:17,740
the sealed that it could not read or
could not work into its algorithm so

296
00:26:17,740 --> 00:26:23,070
ideally we'll get to see the password
here and this is also a good example of

297
00:26:23,070 --> 00:26:28,930
if you need to escape your spaces and
how to make SQL queries without putting

298
00:26:28,930 --> 00:26:35,720
spaces into them so we run the command
and we all the sudden have passwords

299
00:26:35,720 --> 00:26:47,430
right there so there's the password yes
it's very long it's not super complex

300
00:26:47,430 --> 00:26:55,770
but it is very long and you'll never
guess it so if we go back to our log on

301
00:26:55,770 --> 00:27:03,860
page here and we try and our web
developer here is amazing because he

302
00:27:03,860 --> 00:27:12,960
didn't even bother to mask the password
field but we log in and we're in we just

303
00:27:12,960 --> 00:27:21,900
used SQL injection to get access to the
website so go back here and see what's

304
00:27:21,900 --> 00:27:23,570
going on there

305
00:27:23,570 --> 00:27:27,850
so talked about this a little bit ahead
of time but you know we just replaced

306
00:27:27,850 --> 00:27:32,250
the spaces and replace the slashes with
blank spaces and that was enough to

307
00:27:32,250 --> 00:27:39,270
throw off the tool so SQL injection once
we start tweaking work and actually

308
00:27:39,270 --> 00:27:43,260
reading through understanding what it's
done was doing we're able to set it to

309
00:27:43,260 --> 00:27:49,330
throw mode and rest ILU URL parameters
and it was able to find the SQL

310
00:27:49,330 --> 00:27:56,350
injection vulnerability so SQL map was
still getting confused afterwards and

311
00:27:56,350 --> 00:28:00,320
this is what the great thing about open
source open source community is you know

312
00:28:00,320 --> 00:28:04,390
we can take over we can take a look at
how was written and try and figure out

313
00:28:04,390 --> 00:28:12,320
why it was not working so if anybody
want to side project here you go last

314
00:28:12,320 --> 00:28:14,740
but not least we get to the fun stuff

315
00:28:14,740 --> 00:28:19,590
the command-line injection so were found
it was his default settings so let's go

316
00:28:19,590 --> 00:28:28,240
get a show and amazing website the
section that we haven't really messed

317
00:28:28,240 --> 00:28:35,850
with yet is the about us so we see that
it's loading a document and in the name

318
00:28:35,850 --> 00:28:41,800
is a stock US DOT text so we know what
if we don't want to read the file you

319
00:28:41,800 --> 00:28:45,670
want to read something with a bit more
interesting so let's see if we can read

320
00:28:45,670 --> 00:28:51,680
the password file and if I can take it
correctly and unfortunately nothing

321
00:28:51,680 --> 00:28:55,640
comes back but I mean that's might not
be that big a deal you there it could

322
00:28:55,640 --> 00:29:02,680
just not accept the full path so what if
we tried going up to the website going

323
00:29:02,680 --> 00:29:05,930
up to the root directory and then back
down to the root directory

324
00:29:05,930 --> 00:29:10,830
her back down to the password file

325
00:29:10,830 --> 00:29:20,409
and unfortunately we don't get to read
any files though we haven't tried

326
00:29:20,409 --> 00:29:25,940
actually entering commands into it so we
know of three ways to input commands

327
00:29:25,940 --> 00:29:31,279
into the URL you can you do with the
semicolon the pipe or the percent sign

328
00:29:31,279 --> 00:29:39,750
so we'll give it a shot here with the
airport with the semicolon and that

329
00:29:39,750 --> 00:29:47,539
didn't quite work so we'll try again and
that didn't quite work he they're

330
00:29:47,539 --> 00:29:59,309
actually I type their own thing in there
so that in working their butts commands

331
00:29:59,309 --> 00:30:00,679
in there we go

332
00:30:00,679 --> 00:30:07,970
that didn't work is there so and we saw
earlier that I tried the ampersand for

333
00:30:07,970 --> 00:30:13,919
the percent sign rather without anything
extra so let's try URL encoding the

334
00:30:13,919 --> 00:30:23,260
inside and stuff to keep running will do
it twice and we have some command

335
00:30:23,260 --> 00:30:32,139
injection so we wanted to do something a
bit more fancy than show elevens we

336
00:30:32,139 --> 00:30:36,299
could say hey here's all the files in
the current directory that the web page

337
00:30:36,299 --> 00:30:41,429
is running from but we've already seen
this system administrator isn't doing

338
00:30:41,429 --> 00:30:46,120
that great of a jobs so we have to know
that he'll have never had installed on a

339
00:30:46,120 --> 00:30:58,409
system so again we used the ampersand
ampersand URL encoded will run some cat

340
00:30:58,409 --> 00:31:07,299
and so there we have it running

341
00:31:07,299 --> 00:31:18,799
and here we are connecting to it

342
00:31:18,799 --> 00:31:58,759
same files as before we're running as to
be W data and we have and we have is all

343
00:31:58,759 --> 00:32:07,350
three exploits to mister it and next we
have mister Justin talking in height

344
00:32:07,350 --> 00:32:10,369
from which you I saw this isn't exactly
rocket science

345
00:32:10,369 --> 00:32:14,609
what we're trying to do is actually show
people how everything worked a lot of

346
00:32:14,609 --> 00:32:18,739
his stuff was super simple to get to get
stuff that's completely over past every

347
00:32:18,739 --> 00:32:22,879
time we go on site when the course
things for the last two posts I worked

348
00:32:22,879 --> 00:32:26,779
at when you come in for an interview you
don't just interview with like the sea

349
00:32:26,779 --> 00:32:30,059
so are the chief technical officer does
RCSI

350
00:32:30,059 --> 00:32:37,320
CISSP and things got of the world you
actually interview with us I asked these

351
00:32:37,320 --> 00:32:42,100
questions I expect somebody to know this
I've had a great mentor appear in the

352
00:32:42,100 --> 00:32:49,230
front row Mr Tim who is this an
embarrassed to read now I had agreement

353
00:32:49,230 --> 00:32:52,779
or he showed me a lot of this and I had
another great mentor that showed me a

354
00:32:52,779 --> 00:32:56,440
lot of getaway for me to go back on
outside

355
00:32:56,440 --> 00:33:05,370
nasty nasty nasty yeah I bet she do
anyway when guys come into an interview

356
00:33:05,370 --> 00:33:08,600
we asked these questions and we're
hoping that this will actually teach you

357
00:33:08,600 --> 00:33:12,250
guys to be about her interviewer like
when you go into an interview to better

358
00:33:12,250 --> 00:33:17,680
understand brother hope you like a
powerful monkey after this please do not

359
00:33:17,680 --> 00:33:27,610
throw your friend get my god where's has
been running water no they're just came

360
00:33:27,610 --> 00:33:32,170
out of his back pocket ordering by now
and just keep my mouth shut your friends

361
00:33:32,170 --> 00:33:36,630
of the High ruling today I want you to
feel like a powerful monkey but not that

362
00:33:36,630 --> 00:33:41,680
crazy as I said special thanks to mr.
Antonio Herrera as he is actually

363
00:33:41,680 --> 00:33:45,310
traveling the world right now he's
bringing the message to the lowest

364
00:33:45,310 --> 00:33:51,980
common denominator i think is somewhere
in China where where is he right now

365
00:33:51,980 --> 00:34:03,630
Thailand I don't know he's actually an
apt so that one off yeah he helped me so

366
00:34:03,630 --> 00:34:06,530
much with this and help me to understand
a lot of what was going on

367
00:34:06,530 --> 00:34:11,250
little bit about him he had six years of
coaching experience and then kind of saw

368
00:34:11,250 --> 00:34:14,470
the light and said why make things when
I can break things

369
00:34:14,470 --> 00:34:19,660
incredible guy there's actually a copy
of this talk somewhere out there with

370
00:34:19,660 --> 00:34:25,950
you and i doing it and it's please don't
hold it against me it was done in Kansas

371
00:34:25,950 --> 00:34:32,280
City required alcohol even have any
questions before I have to slam this

372
00:34:32,280 --> 00:34:33,060
thing down

373
00:34:33,060 --> 00:34:42,820
go ahead

374
00:34:42,820 --> 00:34:48,200
we did but we want to keep it as basic
as possible on this one so that people

375
00:34:48,200 --> 00:34:52,120
can see what it was that's a great thing
and it's actually on one of the Chiefs

376
00:34:52,120 --> 00:34:57,280
were found dead if you look out there
for secret cheat sheets there are some

377
00:34:57,280 --> 00:35:03,970
amazing ones like pretty much make it
brainless to do this next few months I

378
00:35:03,970 --> 00:35:09,390
am giving the speech this pure one more
time at Gurgaon and after that antonia

379
00:35:09,390 --> 00:35:12,290
Lanchester and I are gonna get together
and we're gonna actually put it up on

380
00:35:12,290 --> 00:35:16,970
get hope we would love people to get
involved and likes are tearing it apart

381
00:35:16,970 --> 00:35:21,800
and see what else you find because I get
kinda confused have to write my own

382
00:35:21,800 --> 00:35:25,960
talks it's easier when people ask me a
bunch of questions and I can come up

383
00:35:25,960 --> 00:35:31,650
with the talk of questions but please
take a look for it out there you guys

384
00:35:31,650 --> 00:35:51,530
have been great what you got for me so
that's that's the cheetah remember

385
00:35:51,530 --> 00:35:59,420
showing you the real the south

386
00:35:59,420 --> 00:36:19,970
and just threw for you to where
everybody can leave now go ahead

387
00:36:19,970 --> 00:36:28,460
totally drinking this they are so I
would like to thank everybody for coming

388
00:36:28,460 --> 00:36:34,880
to Derby Conn this is probably by far
one of the coolest conscious come to buy

389
00:36:34,880 --> 00:36:41,890
me a drink science some two washes down
with you just shut up

