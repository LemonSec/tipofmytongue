1
00:00:00,669 --> 00:00:03,110
much easier alright when

2
00:00:03,110 --> 00:00:06,710
a rolling on women that perfect alright

3
00:00:06,710 --> 00:00:10,610
um get their own first and foremost
thanks for being here

4
00:00:10,610 --> 00:00:13,670
I really appreciate everyone's at North
front I was in a couple simple talks

5
00:00:13,670 --> 00:00:15,420
earlier and was like scattered so

6
00:00:15,420 --> 00:00:18,820
I hope there's something going on back
there bulimia not that interesting

7
00:00:18,820 --> 00:00:23,140
I am my talking about no sequence
actions moving beyond

8
00:00:23,140 --> 00:00:27,650
when he was one com are going to kinda
why I feel this is kinda relevant

9
00:00:27,650 --> 00:00:29,179
important today but to

10
00:00:29,179 --> 00:00:32,180
one story short I think no sequels
pretty in from a topic

11
00:00:32,180 --> 00:00:36,149
we recover a little bit about who I am
10 sequel does

12
00:00:36,149 --> 00:00:40,100
a having fun with monologues although
I'm not going to delve into manga too

13
00:00:40,100 --> 00:00:42,670
much you got to be here at 9am tomorrow
to get into that

14
00:00:42,670 --> 00:00:46,420
I will cover that later but

15
00:00:46,420 --> 00:00:49,920
um but we will get into some no sequel
fun

16
00:00:49,920 --> 00:00:53,649
will exploit elastic search I will take
a look at how wrestle a PI is the most

17
00:00:53,649 --> 00:00:55,960
dangerous thing to ever hit No see
Cornwall

18
00:00:55,960 --> 00:01:00,120
see how couch TB is an admin party by
default arm

19
00:01:00,120 --> 00:01:03,469
so real quick my name is Matt Bromley
base at a Dallas Texas

20
00:01:03,469 --> 00:01:06,650
I hardly do digital forensics and
incident response with KPMG

21
00:01:06,650 --> 00:01:09,939
but my job is not so much friends it
says it is more O's

22
00:01:09,939 --> 00:01:13,700
looking at what happened and trying to
see things from the other side

23
00:01:13,700 --> 00:01:18,409
I maintain a blog I barely ever have
time to update I think I go like a month

24
00:01:18,409 --> 00:01:19,750
or two between posts

25
00:01:19,750 --> 00:01:24,130
which I suppose is it is normal when
you're busy and then I tween as well but

26
00:01:24,130 --> 00:01:27,780
lately my tween has been my Twitter
account has been me

27
00:01:27,780 --> 00:01:31,369
yelling at I'm startup companies you
don't gimme

28
00:01:31,369 --> 00:01:34,750
products and a promise me don't ever buy
a calling if anyone ever saw lightning

29
00:01:34,750 --> 00:01:35,610
it's always a time

30
00:01:35,610 --> 00:01:38,630
or sky drop horrible product and US

31
00:01:38,630 --> 00:01:41,880
moving on yeah well its

32
00:01:41,880 --> 00:01:45,259
it's a shame that I want to use point
for all my life loyalty cards

33
00:01:45,259 --> 00:01:48,860
by cuz I travel so much I hate cannot
suffer round anyways

34
00:01:48,860 --> 00:01:51,979
um sorrow quick no single here there
everywhere

35
00:01:51,979 --> 00:01:55,590
I'm argument is not the answer

36
00:01:55,590 --> 00:01:58,969
were the only answer anymore I guess we
should say I'm no sequel been around for

37
00:01:58,969 --> 00:02:00,810
a little while but it's really starting
to

38
00:02:00,810 --> 00:02:05,299
I think grow oMG with the web app
development culture and started college

39
00:02:05,299 --> 00:02:06,399
and everything that's just

40
00:02:06,399 --> 00:02:10,000
completely blown up these days everyone
wants something quick passing easy

41
00:02:10,000 --> 00:02:14,560
I'm know what you all solutions are
quick they scale very very easily which

42
00:02:14,560 --> 00:02:15,470
is fantastic

43
00:02:15,470 --> 00:02:19,400
and there's fasten gesture with no data
structure I'm you need or about able to

44
00:02:19,400 --> 00:02:21,200
put him in as long as you're not a
properly formatted

45
00:02:21,200 --> 00:02:25,129
Jason docking you could you go I do
apologize job in say no sequel it's

46
00:02:25,129 --> 00:02:28,280
the horrible horrible habitat so I'm
trying to get it

47
00:02:28,280 --> 00:02:32,569
arm they're also web at friendly on the
beauty in that is

48
00:02:32,569 --> 00:02:35,690
connecting Mongo to a you know me

49
00:02:35,690 --> 00:02:40,390
I am robert jacks are taking longer to
web at is like three lines echoed

50
00:02:40,390 --> 00:02:44,930
it's fast easy you need a tangy data out
a lot of companies like to use it for

51
00:02:44,930 --> 00:02:47,160
web app development because it's just
that simple

52
00:02:47,160 --> 00:02:52,000
and as many solutions as well Mongo
Couchbase couch TV elastic search

53
00:02:52,000 --> 00:02:55,849
dupes another one on its a very
traditional know ask you are sorry it's

54
00:02:55,849 --> 00:02:59,650
it's not the traditional no SQL doesn't
show it operating Jason but it certainly

55
00:02:59,650 --> 00:03:00,840
isn't interesting

56
00:03:00,840 --> 00:03:04,360
on alternative and I don't really need
to go into the issue overdue

57
00:03:04,360 --> 00:03:08,280
so when I first talked about doing this
love my colleagues said well no sequel

58
00:03:08,280 --> 00:03:11,849
whom who cares some no point arm

59
00:03:11,849 --> 00:03:16,019
so I had the benefit putting together a
list of people using all these companies

60
00:03:16,019 --> 00:03:17,760
and kinda put in front of him insane

61
00:03:17,760 --> 00:03:20,900
someone cares on ATP Cisco

62
00:03:20,900 --> 00:03:24,569
I B and McAfee forms are are running
stuff on Mon but this is all public by

63
00:03:24,569 --> 00:03:25,799
the way none of this is

64
00:03:25,799 --> 00:03:29,310
something I know that you don't these
are all very publicized case studies

65
00:03:29,310 --> 00:03:33,180
BMW the US Senate Comcast Starbucks
season calif.-based

66
00:03:33,180 --> 00:03:36,750
and elastic search I mean et Boise
Netflix and get help don't run

67
00:03:36,750 --> 00:03:40,739
without it on also using which I believe
is a european-based social networking

68
00:03:40,739 --> 00:03:41,140
site

69
00:03:41,140 --> 00:03:44,420
in any event there's a lot of companies
and their

70
00:03:44,420 --> 00:03:48,129
who have data that I may or may not be
interested in for you

71
00:03:48,129 --> 00:03:51,299
may or may not be in prison or someone
somewhere may night may or may not be

72
00:03:51,299 --> 00:03:52,019
interested in

73
00:03:52,019 --> 00:03:55,230
long story short it's only a matter of
time before I get called to some breach

74
00:03:55,230 --> 00:03:58,610
investigation and someone says oh the
majority ready to sit in Mongo

75
00:03:58,610 --> 00:04:02,090
I don't want to be that guy who looks
back at him and says what brought force

76
00:04:02,090 --> 00:04:04,549
equal groups resu agrees with me

77
00:04:04,549 --> 00:04:08,629
but we don't have anyone turn in manga
so I take it upon myself to

78
00:04:08,629 --> 00:04:12,420
start to learn about this and and CE see
what's out there

79
00:04:12,420 --> 00:04:16,030
acid with Mongo on mongers an
interesting

80
00:04:16,030 --> 00:04:19,090
DB I think it's it's got some some
pretty neat features an

81
00:04:19,090 --> 00:04:22,650
homage definitely I wanna say pro want
the lower Sindh province no sequels a

82
00:04:22,650 --> 00:04:24,560
huge about trainings and Andrew

83
00:04:24,560 --> 00:04:28,590
and going around the country in being
very very very proud about

84
00:04:28,590 --> 00:04:32,430
who uses them and everything so that
being said

85
00:04:32,430 --> 00:04:35,979
arm let's take a look at the some other
properties

86
00:04:35,979 --> 00:04:39,790
munger logging and see how we can use or
not use that to our advantage

87
00:04:39,790 --> 00:04:44,240
for some for most monger logging
defaults a standard out

88
00:04:44,240 --> 00:04:48,690
wonderful thank you Mom Go if I have
terminal access or if I'm running mondo

89
00:04:48,690 --> 00:04:51,330
I can see everything that happens just
from the screen

90
00:04:51,330 --> 00:04:54,530
on obviously there's ways to configure
Mongo to run as a service

91
00:04:54,530 --> 00:04:57,930
on we can get rid of center out if we
want those two options

92
00:04:57,930 --> 00:05:02,610
mongers by default you can use log path
you can use a specified a specific file

93
00:05:02,610 --> 00:05:06,550
and help but to their you can also use a
small if you want is what is a couple

94
00:05:06,550 --> 00:05:07,419
different ways to

95
00:05:07,419 --> 00:05:10,870
a not log a center out and be get the
walk somewhere else

96
00:05:10,870 --> 00:05:14,550
if you'd like on but it's not very
verbose

97
00:05:14,550 --> 00:05:19,550
by default on its did record a couple of
things will go over what it does in just

98
00:05:19,550 --> 00:05:20,400
a minute

99
00:05:20,400 --> 00:05:23,520
on but you do need to throw some for
most blacks in there if you want to

100
00:05:23,520 --> 00:05:24,350
catch everything

101
00:05:24,350 --> 00:05:28,120
now the problem is you can either have a
little bit among logging or you can have

102
00:05:28,120 --> 00:05:31,699
a lot of Mangalore in playing around
with verbose gets you

103
00:05:31,699 --> 00:05:34,699
probably somewhere in the middle ground
where you may want to be but

104
00:05:34,699 --> 00:05:38,039
there's no checkbox for example you log
this lock that

105
00:05:38,039 --> 00:05:41,509
him don't gimme transaction forgive me
to its own so

106
00:05:41,509 --> 00:05:45,940
on the Los get big real real quick Mongo
as a nice look feature where it does

107
00:05:45,940 --> 00:05:49,100
millisecond index updates and
verifications and

108
00:05:49,100 --> 00:05:53,780
running one clotbuster a single node I
was able to get a very very large manga

109
00:05:53,780 --> 00:05:55,360
file in just a matter of minutes

110
00:05:55,360 --> 00:05:59,660
if you're running a scaled out
multi-node multi enterprise thousand

111
00:05:59,660 --> 00:06:00,759
transactions per minute

112
00:06:00,759 --> 00:06:04,069
I would you want to think about how big
that log file get so

113
00:06:04,069 --> 00:06:08,330
have anyone hears on long hours as you
know for most logins probably not turned

114
00:06:08,330 --> 00:06:08,729
on

115
00:06:08,729 --> 00:06:11,830
just cuz I'm helping it gets this is a
benefit for us

116
00:06:11,830 --> 00:06:14,979
I M so

117
00:06:14,979 --> 00:06:18,710
now we can take a look in and move on to
kinda what Mongo does log

118
00:06:18,710 --> 00:06:22,460
by default um I didn't go with the
verbose officer for this just to see

119
00:06:22,460 --> 00:06:25,030
what by default it does because I'm a
big fan

120
00:06:25,030 --> 00:06:28,050
no default installs they're usually when
I run into

121
00:06:28,050 --> 00:06:31,930
I didn't think essay would be as popular
user name as it ever was but it didn't

122
00:06:31,930 --> 00:06:35,699
a lot of good things for a lot of good
people com hopefully none of them are in

123
00:06:35,699 --> 00:06:36,720
this room

124
00:06:36,720 --> 00:06:40,250
I am so for some forms connections and
disconnections

125
00:06:40,250 --> 00:06:43,380
a monger does record who can access
server on that note

126
00:06:43,380 --> 00:06:47,440
I did all of this being a command line
shell on this is not web connections are

127
00:06:47,440 --> 00:06:49,090
specific web app connection

128
00:06:49,090 --> 00:06:52,370
or anything of that sort this is just me
getting into the shell

129
00:06:52,370 --> 00:06:56,259
mom's killer corn I P can report the
court the port you connected over

130
00:06:56,259 --> 00:06:59,280
and it's also gonna sign you a number as
well so you notice the

131
00:06:59,280 --> 00:07:03,520
top box there are number one anything I
do from there on out that's long

132
00:07:03,520 --> 00:07:07,330
is logged as con one we can have a
thousand users connected if we want

133
00:07:07,330 --> 00:07:09,669
we're just gonna see a complete
multitude of

134
00:07:09,669 --> 00:07:14,130
options going on con one con tu con 950
so on and so forth

135
00:07:14,130 --> 00:07:17,780
so from a log in perspective or forensic
perspective which is where eventually I

136
00:07:17,780 --> 00:07:19,139
get phone call

137
00:07:19,139 --> 00:07:22,160
is it's very easy to track these
connections

138
00:07:22,160 --> 00:07:26,180
I can find who's bad and I can quickly
run a you know grab said nah can figure

139
00:07:26,180 --> 00:07:27,509
out what it is I need now

140
00:07:27,509 --> 00:07:31,310
about that users so I can move very
quickly to the Los so that's nice

141
00:07:31,310 --> 00:07:34,810
so far thank you Mom Go I like what
you've done for me

142
00:07:34,810 --> 00:07:38,380
I now let's look at basic write-offs
number one creating

143
00:07:38,380 --> 00:07:41,849
gratings easy so I just a sample in
Thursday man here

144
00:07:41,849 --> 00:07:45,360
on this is like the default Mongo answer
statement as well which is creating a

145
00:07:45,360 --> 00:07:45,970
blog

146
00:07:45,970 --> 00:07:49,120
apparently everyone Creek logs from the
command line I don't know

147
00:07:49,120 --> 00:07:52,470
why they use that as the default in any
event but they do

148
00:07:52,470 --> 00:07:55,590
I used to use general so have a look at
our idea what that's like

149
00:07:55,590 --> 00:07:59,699
I am in any event nicely a creates a
minute recording

150
00:07:59,699 --> 00:08:03,129
so okay we can see data being pushed to
the

151
00:08:03,129 --> 00:08:07,250
the Mongo DB I think that's good so far
so good everything's been logged in a

152
00:08:07,250 --> 00:08:08,710
way that I can go in backtrack it

153
00:08:08,710 --> 00:08:12,190
I can find out okay I someone else log
then they created a to

154
00:08:12,190 --> 00:08:15,229
alright we're looking good what see if I
read it up

155
00:08:15,229 --> 00:08:19,190
him om okay so we can just run a simple
find one comment

156
00:08:19,190 --> 00:08:22,789
was just gonna pick a random command
from that collection and there are no

157
00:08:22,789 --> 00:08:23,690
log results

158
00:08:23,690 --> 00:08:26,759
and I don't know if I'll be able to
actually switch to

159
00:08:26,759 --> 00:08:30,050
not something or nevermind on

160
00:08:30,050 --> 00:08:33,060
for you like to see a live close to this
I can do it afterwards but there's no

161
00:08:33,060 --> 00:08:34,039
result in the law

162
00:08:34,039 --> 00:08:37,880
so reading not so you can get into a
Mongo DB your connections longer than

163
00:08:37,880 --> 00:08:40,339
you can read whatever you want random

164
00:08:40,339 --> 00:08:43,950
let's try updating his blog post I'm
gonna make a comment to rate

165
00:08:43,950 --> 00:08:47,550
and push that to the post again no
longer in use

166
00:08:47,550 --> 00:08:51,899
so now my to add it two out of the three
crop rations arch

167
00:08:51,899 --> 00:08:56,290
studied so far do not lock do not record
I've logged into a DB

168
00:08:56,290 --> 00:09:00,420
read an update your records out looking
this updates a min is kinda boring

169
00:09:00,420 --> 00:09:04,830
I put a post for comments array into a
blog post be even better if it was like

170
00:09:04,830 --> 00:09:07,550
name SSN address on and so forth

171
00:09:07,550 --> 00:09:09,880
and i was just quickly change that is
something that was a little bit more

172
00:09:09,880 --> 00:09:11,660
favorable to me

173
00:09:11,660 --> 00:09:16,070
and last but not least let's delete
using the title as my gf go and leave

174
00:09:16,070 --> 00:09:16,820
the bar close

175
00:09:16,820 --> 00:09:20,240
and once again no longer injuries so

176
00:09:20,240 --> 00:09:24,959
default Mungo I can login I can read
update and delete records with no

177
00:09:24,959 --> 00:09:26,910
default login whatsoever

178
00:09:26,910 --> 00:09:31,230
now I'm no wizard at had no issue or by
any means but

179
00:09:31,230 --> 00:09:36,000
if I'm going investigating my no
sequence ends and all I see is con tu

180
00:09:36,000 --> 00:09:40,100
and an hour later con to disconnect and
I see nothing in between

181
00:09:40,100 --> 00:09:43,690
I don't know why else you log into a
Mongo dB for an hour but

182
00:09:43,690 --> 00:09:47,529
three of the four primary operations are
not going to be recorded

183
00:09:47,529 --> 00:09:51,589
so Thank You manga Tom that makes it
very cheap warsaw

184
00:09:51,589 --> 00:09:54,980
in kinda tracking would happen on so

185
00:09:54,980 --> 00:09:58,410
what else can we do with Mongo we can
look at data can we get any other

186
00:09:58,410 --> 00:09:59,560
information

187
00:09:59,560 --> 00:10:03,010
weekend grabber databases weekend is
where collections

188
00:10:03,010 --> 00:10:06,430
we can also display all the users that
are able to log into machine

189
00:10:06,430 --> 00:10:09,529
once again no logging alright I'm

190
00:10:09,529 --> 00:10:13,800
pretty close now walking extensive a
Mongo dB with very very little

191
00:10:13,800 --> 00:10:15,029
interaction with locks

192
00:10:15,029 --> 00:10:19,000
which from our point of view is horrible
with you the guy doing the IR

193
00:10:19,000 --> 00:10:22,940
if you the one in the longer the people
not data you're in a really good spot

194
00:10:22,940 --> 00:10:26,769
90 that's gonna be by default anyone can
go and change that but

195
00:10:26,769 --> 00:10:31,029
default is everyone's favorite option
really quick to just apt-get Mongo DB

196
00:10:31,029 --> 00:10:32,769
and then go on Cody

197
00:10:32,769 --> 00:10:36,440
on so Mungo presents an interesting
perspective

198
00:10:36,440 --> 00:10:40,750
because it's very very popular and by
the fall the login just downright sucks

199
00:10:40,750 --> 00:10:43,800
om there's very very little that it
captures

200
00:10:43,800 --> 00:10:47,850
with regard to the information you can
collect a connection is one thing

201
00:10:47,850 --> 00:10:51,600
com documenting that is great but if I
don't know what you did why you're

202
00:10:51,600 --> 00:10:53,260
connected then I have no control

203
00:10:53,260 --> 00:10:56,980
so eight militias connection to a Mongo
DB

204
00:10:56,980 --> 00:11:01,029
immediately becomes the entire DB is
compromised because I can track what

205
00:11:01,029 --> 00:11:01,649
you're looking at

206
00:11:01,649 --> 00:11:05,200
so with regards to login compared to
what someone can do

207
00:11:05,200 --> 00:11:09,300
its astronomical in in insights

208
00:11:09,300 --> 00:11:13,589
now knowing all along a logging I we can
now have some fun

209
00:11:13,589 --> 00:11:17,950
with no sequel I and I'll I think
there's a couple different options look

210
00:11:17,950 --> 00:11:18,589
at

211
00:11:18,589 --> 00:11:22,029
first those kind of a tease I'm sorry
larger than just a second

212
00:11:22,029 --> 00:11:26,010
um there's there's one thing to remember
about all these no es Q options which

213
00:11:26,010 --> 00:11:26,790
makes life

214
00:11:26,790 --> 00:11:30,970
really really easy interesting they all
have default ports which is really fun

215
00:11:30,970 --> 00:11:34,560
Mungo's 20 7017 on any script you'd see

216
00:11:34,560 --> 00:11:37,700
or download for Mongo is going to have
that hard coded and I'll ask you to

217
00:11:37,700 --> 00:11:38,579
change it

218
00:11:38,579 --> 00:11:43,350
if you're sitting somewhere else elastic
searched the rest sleepy I sits on 9200

219
00:11:43,350 --> 00:11:48,380
job nodes communicate via 9300 and catch
TB listens on 5984

220
00:11:48,380 --> 00:11:52,329
these are by default so I mean unless
someone goes in and physically changes

221
00:11:52,329 --> 00:11:53,380
that

222
00:11:53,380 --> 00:11:58,170
then you're stuck where you're at and
you know 339 1433 been out for a long

223
00:11:58,170 --> 00:11:59,470
time now

224
00:11:59,470 --> 00:12:03,170
so that being said I'm but take a look
into we can do with some buddies

225
00:12:03,170 --> 00:12:06,490
alternatives a this is where the cheese
comes and

226
00:12:06,490 --> 00:12:09,630
not gonna go over the Mongo Russell
going to talk much more morning

227
00:12:09,630 --> 00:12:12,860
my testimony was thunder but the make
should be there 9 a.m.

228
00:12:12,860 --> 00:12:17,600
I know its brain early yep

229
00:12:17,600 --> 00:12:20,959
I am but doesn't mean we can talk about
mothers

230
00:12:20,959 --> 00:12:24,870
so exporting elastic search on the day
when you use the last search before

231
00:12:24,870 --> 00:12:29,060
have any interaction with it okay its
it's an awesome platform you look to you

232
00:12:29,060 --> 00:12:31,050
last search for a lot of analytics

233
00:12:31,050 --> 00:12:35,220
I I've done upwards a.m.

234
00:12:35,220 --> 00:12:38,760
free text searches across like $200
million rose about 3 milliseconds

235
00:12:38,760 --> 00:12:41,970
neck and stuff is just power you just
can't compete with its really fast it

236
00:12:41,970 --> 00:12:43,990
also happens to be wonderfully wonderful

237
00:12:43,990 --> 00:12:49,959
on the primary vulnerability elastic
search is CVD 2014 3120 obviously came

238
00:12:49,959 --> 00:12:51,510
out will be earlier this year

239
00:12:51,510 --> 00:12:55,310
um logic search by default up until
version 1.2

240
00:12:55,310 --> 00:12:59,490
had dynamic scripting Cape to enable the
goal of this was that if you have a

241
00:12:59,490 --> 00:13:01,480
massive cluster spread across

242
00:13:01,480 --> 00:13:05,209
you states countries organizations
whatever may have been you could issue

243
00:13:05,209 --> 00:13:07,649
update command using dynamic scripting

244
00:13:07,649 --> 00:13:11,079
on good intentions but good intentions
always get exploited

245
00:13:11,079 --> 00:13:14,500
for the wrong reasons I'm there's a
couple other inherent features a classic

246
00:13:14,500 --> 00:13:16,329
search which

247
00:13:16,329 --> 00:13:19,930
yeah make it you know which which I get
handicapping if you will

248
00:13:19,930 --> 00:13:23,620
on from the onset no access rules
authentication in fact to this day if

249
00:13:23,620 --> 00:13:27,100
you want to incorporate security in
LASIK surgery download a plugin

250
00:13:27,100 --> 00:13:30,360
configuring and installing that it is
not an inherent feature

251
00:13:30,360 --> 00:13:34,990
there's an HTTP excess levy I and LSU
search allows expressions to be

252
00:13:34,990 --> 00:13:36,730
evaluated as part of a query

253
00:13:36,730 --> 00:13:40,370
hopefully this slide along like yours
are turning everyone's having you can

254
00:13:40,370 --> 00:13:41,399
just see how

255
00:13:41,399 --> 00:13:45,410
awful that is up a combination if I did
I couldn't tell you that

256
00:13:45,410 --> 00:13:49,139
I don't hopefully I can while nevermind
I take that back up into a lot of places

257
00:13:49,139 --> 00:13:53,620
arm some places you can sell that happen
on yours wanna bite

258
00:13:53,620 --> 00:13:57,149
so let's take a look at what the x-lite
export looks like on this is just a

259
00:13:57,149 --> 00:13:57,720
sample

260
00:13:57,720 --> 00:14:01,220
I just took some screenshots and
everything Tom its

261
00:14:01,220 --> 00:14:04,290
this was actually create made by the
creator and have they got the link at

262
00:14:04,290 --> 00:14:05,540
the bottom therefore

263
00:14:05,540 --> 00:14:09,680
and it's a simple page nom all the code
is sitting behind it but it's a simple

264
00:14:09,680 --> 00:14:11,959
you enter your LASIK surgery at the
address

265
00:14:11,959 --> 00:14:15,209
drop in whatever file it is you want to
read and click me

266
00:14:15,209 --> 00:14:18,800
and that's it on you also have the
opportunity to write a file

267
00:14:18,800 --> 00:14:21,800
if you want as well so we can take a
look look at this code

268
00:14:21,800 --> 00:14:24,670
and see exactly what's going on here
we've got two very very simple

269
00:14:24,670 --> 00:14:25,820
JavaScript functions

270
00:14:25,820 --> 00:14:29,350
their simple because quite frankly all
we're doing is building strings

271
00:14:29,350 --> 00:14:33,449
on the first one is to read a file you
can see the job imports and then we use

272
00:14:33,449 --> 00:14:34,320
new scanner

273
00:14:34,320 --> 00:14:37,699
so all we're doing is reunify own place
the right file

274
00:14:37,699 --> 00:14:42,070
same imports know we use PrintWriter so
this isn't anything extremely advanced

275
00:14:42,070 --> 00:14:45,110
it's just very very convenient happens
to work

276
00:14:45,110 --> 00:14:49,930
on so going back I G I read it. password
cuz

277
00:14:49,930 --> 00:14:54,019
wanna it's there and sure not it read it
on the first try

278
00:14:54,019 --> 00:14:57,209
so now we've got a severely privileged
file

279
00:14:57,209 --> 00:15:00,380
being read by Alexis surgeons and
there's another benefit here

280
00:15:00,380 --> 00:15:04,010
which go back to my littlest there which
comes into play no access rules for

281
00:15:04,010 --> 00:15:05,040
authentication

282
00:15:05,040 --> 00:15:08,560
a large majority of elastic search are
run as root

283
00:15:08,560 --> 00:15:11,769
because it's just easy to do it that way
so now

284
00:15:11,769 --> 00:15:15,550
I am using Java to read or write
withdrew permissions and you are on the

285
00:15:15,550 --> 00:15:16,630
filesystem

286
00:15:16,630 --> 00:15:19,880
thank you very much deaths my life just
got a lot easier

287
00:15:19,880 --> 00:15:22,940
mom so now we can read files awesome

288
00:15:22,940 --> 00:15:26,500
that was easy the LASIK surgeons I
didn't need to break in anything

289
00:15:26,500 --> 00:15:30,389
all I had to do was find the port for
LASIK surgeon the rest just itself

290
00:15:30,389 --> 00:15:35,600
now no elastic search after version 1.2
disabled an image working by the fall

291
00:15:35,600 --> 00:15:39,060
but it's a simple config file changing
your right that means

292
00:15:39,060 --> 00:15:42,220
on so you know

293
00:15:42,220 --> 00:15:45,560
though I like to look at this as if you
can get in and disable that and you're

294
00:15:45,560 --> 00:15:48,040
able to read and write from Las a search
that changes

295
00:15:48,040 --> 00:15:51,310
what the footprint you need to maintain
a service let the web server do the job

296
00:15:51,310 --> 00:15:52,310
for you

297
00:15:52,310 --> 00:15:55,329
easy enough now that's all fun and games

298
00:15:55,329 --> 00:15:58,880
what else can I get from the last search
there's a lot more information be going

299
00:15:58,880 --> 00:16:00,079
from these things

300
00:16:00,079 --> 00:16:03,949
I'm on certainly backup actually P cap
the traffic for this as well

301
00:16:03,949 --> 00:16:08,110
oMG it's horrible and your I encoding
and everything it looks just terrible

302
00:16:08,110 --> 00:16:10,660
when these colors look with a TCP she
makes sense

303
00:16:10,660 --> 00:16:14,070
but long story short when I A blowed
away clean it up

304
00:16:14,070 --> 00:16:17,880
and highlight what it is this is the
file has been passed through

305
00:16:17,880 --> 00:16:21,769
so you can see the search query been
passed through

306
00:16:21,769 --> 00:16:25,259
and then our script being added in where
we're creating the job

307
00:16:25,259 --> 00:16:28,560
file every ninety password so we're in a
really good spot

308
00:16:28,560 --> 00:16:32,480
on work so well as I just show you did
it successful

309
00:16:32,480 --> 00:16:35,230
and now this is where I was getting too
which is what else can I get from

310
00:16:35,230 --> 00:16:38,720
elastic search because not only are we
able to read write files in the system

311
00:16:38,720 --> 00:16:42,380
what can I get with barely touching
system at all

312
00:16:42,380 --> 00:16:46,300
well locally classic search gives us a
lot a host note information

313
00:16:46,300 --> 00:16:50,389
as well as system information arm so
really simple query

314
00:16:50,389 --> 00:16:54,800
using curl X get nodes and I use pretty
equal shoes that it's not just a Shriner

315
00:16:54,800 --> 00:16:58,259
Jason it actually gives you lines in
tabs and everything like that

316
00:16:58,259 --> 00:17:02,449
one command I'm able to get my nodename
the IP address from running at what

317
00:17:02,449 --> 00:17:05,579
version of elastic search that would be
great if I want to test whether or not

318
00:17:05,579 --> 00:17:09,309
I'm gonna be vulnerable I can also take
a look at some my data points and

319
00:17:09,309 --> 00:17:13,600
Pat sincere everything's located on so I
consume a CTP

320
00:17:13,600 --> 00:17:17,949
address my transport address lot of
information on one screen with one

321
00:17:17,949 --> 00:17:21,589
query also within the same query we get
the Java

322
00:17:21,589 --> 00:17:24,949
version information I couldn't ask for
more gold

323
00:17:24,949 --> 00:17:28,100
in HD in HD Macquarie percentage to be
wary

324
00:17:28,100 --> 00:17:32,010
I'm we've got Java version we know what
ok sorry

325
00:17:32,010 --> 00:17:36,270
Java version we know who was made by now
we've got some heap information but long

326
00:17:36,270 --> 00:17:38,929
story short version is going to be the
most important part

327
00:17:38,929 --> 00:17:42,250
if I find your running a server in your
job was has a

328
00:17:42,250 --> 00:17:45,410
that has a version that's very outdated
any exploit its out that you've just

329
00:17:45,410 --> 00:17:48,440
been opened up to an all I had to do was
run one query

330
00:17:48,440 --> 00:17:51,460
on we can also call file system
information back

331
00:17:51,460 --> 00:17:55,600
so I mean you know LASIK surgeon Bromley
is a giveaway I'm at Bromley given to

332
00:17:55,600 --> 00:17:58,820
talk about what the search I didn't feel
better opportunity to win their

333
00:17:58,820 --> 00:18:02,510
but Pathan device could be a lot of
information not a very interesting

334
00:18:02,510 --> 00:18:03,240
information

335
00:18:03,240 --> 00:18:07,030
if I was unfamiliar with the cluster
setup could very easily sent to map out

336
00:18:07,030 --> 00:18:10,309
how your structure how your clothes are
you discussed but together

337
00:18:10,309 --> 00:18:13,690
on and then last but not least we can
also adopt a less information

338
00:18:13,690 --> 00:18:17,309
so this is an Intel Mac Book Pro 2300
megahertz

339
00:18:17,309 --> 00:18:21,190
all that just from running one query I
was a little boy that back so now I just

340
00:18:21,190 --> 00:18:23,020
profile your last research server

341
00:18:23,020 --> 00:18:26,059
got no your note information everything
with just one query

342
00:18:26,059 --> 00:18:29,710
and the best part is collapsing search
was created by guys who like convenience

343
00:18:29,710 --> 00:18:33,530
you can then filtered down and just
specify what it is you want to see so

344
00:18:33,530 --> 00:18:37,929
the bottom command they're squaring just
Caminos OS file system JVM of like

345
00:18:37,929 --> 00:18:38,450
scrolling

346
00:18:38,450 --> 00:18:42,200
muzak when you for mission i won very
very easy to just profile

347
00:18:42,200 --> 00:18:46,299
a server an instance then you can be
really really naughty

348
00:18:46,299 --> 00:18:50,530
and you can shut down a note or the
entire closer from the HTTP

349
00:18:50,530 --> 00:18:53,720
are you can send one program and bring
the whole thing down.

350
00:18:53,720 --> 00:18:57,080
so if you got very little access to a CL
on this

351
00:18:57,080 --> 00:19:01,549
and you feel like causing some having to
someone who got a default yes instance

352
00:19:01,549 --> 00:19:05,230
one command shut it down all done
problems all

353
00:19:05,230 --> 00:19:09,169
on so elastic search there's a lotta
ways to have a lot of fun

354
00:19:09,169 --> 00:19:13,220
on it's impossible product but I wish
which they trap a little bit more

355
00:19:13,220 --> 00:19:14,419
security around this

356
00:19:14,419 --> 00:19:17,840
om let's move on the couch TV

357
00:19:17,840 --> 00:19:22,059
catch TB is another interesting one
anyone here wanna join the admin party

358
00:19:22,059 --> 00:19:25,370
cash to be by default serves on import
5984

359
00:19:25,370 --> 00:19:28,820
the underscore utils page is by default
accessible

360
00:19:28,820 --> 00:19:32,039
to anyone who can hit it and by default
you're an admin

361
00:19:32,039 --> 00:19:35,220
in fact if you take a look at the bottom
corner they actually someone

362
00:19:35,220 --> 00:19:38,440
coated the phrase welcome to admin party

363
00:19:38,440 --> 00:19:42,350
in catch TB I'm so if you have a

364
00:19:42,350 --> 00:19:45,880
default install your now sit inside the
admin party what can we do inside Yemen

365
00:19:45,880 --> 00:19:47,080
party

366
00:19:47,080 --> 00:19:50,320
I we could disable SSL Certificates if
it was in there

367
00:19:50,320 --> 00:19:53,690
we could look up addresses I'll
permission we can also create

368
00:19:53,690 --> 00:19:57,429
delete modify user accounts fun trying
to glean some information from a catchy

369
00:19:57,429 --> 00:19:57,840
beat

370
00:19:57,840 --> 00:20:01,330
I'm in the right place now has his own
user accounts I mean I'm pretty happy

371
00:20:01,330 --> 00:20:03,289
with where I'm at right now

372
00:20:03,289 --> 00:20:06,520
and then we also have HTTP API calls
just because why not

373
00:20:06,520 --> 00:20:10,679
it would be more fun this way sounds all
the information that we saw in the kid

374
00:20:10,679 --> 00:20:11,700
convicts cream

375
00:20:11,700 --> 00:20:15,240
books are some the information we can
also pull all of this back

376
00:20:15,240 --> 00:20:20,340
just by using curl again so we can dump
all the DVD's weekend double to

377
00:20:20,340 --> 00:20:21,559
configure information

378
00:20:21,559 --> 00:20:25,200
and in the log file the end is actually
really interesting you can don't you can

379
00:20:25,200 --> 00:20:26,549
tailor the log file

380
00:20:26,549 --> 00:20:29,590
who's been accessing the server so I
mean

381
00:20:29,590 --> 00:20:33,350
you know as long as I have an IP that's
running default casually be

382
00:20:33,350 --> 00:20:36,460
I could dump your web logs for the past
X number of you know minutes seconds

383
00:20:36,460 --> 00:20:40,100
whatever may be without even knowing you
are who you are what you been up to

384
00:20:40,100 --> 00:20:43,510
on and I wasn't able to really grab
screenshot of those unfortunate woman to

385
00:20:43,510 --> 00:20:44,990
see if I can do is

386
00:20:44,990 --> 00:20:48,270
that way he way too small

387
00:20:48,270 --> 00:20:53,360
to see got a couple minutes I was going
to take an opportunity to

388
00:20:53,360 --> 00:20:58,620
show just how awful sum up this is that
any better

389
00:20:58,620 --> 00:21:03,440
Michael

390
00:21:03,440 --> 00:21:08,950
alright so let's see if we can just in

391
00:21:08,950 --> 00:21:13,330
alright perfect that looks like ok very
very useful piece of information

392
00:21:13,330 --> 00:21:16,530
oMG obviously it's all gonna show local
host and everything but if I was

393
00:21:16,530 --> 00:21:18,340
interested in in who's been

394
00:21:18,340 --> 00:21:21,260
who's been calling the database is
important information back this would be

395
00:21:21,260 --> 00:21:22,280
a great command at

396
00:21:22,280 --> 00:21:26,240
on cuz now I don't need to know who has
access I can use IP the figure out who's

397
00:21:26,240 --> 00:21:26,909
point what

398
00:21:26,909 --> 00:21:31,250
so if I've discovered a default catch TB
I've also just now found to your

399
00:21:31,250 --> 00:21:32,080
customers are

400
00:21:32,080 --> 00:21:35,890
because I now know it was poignant for
mation and we take a look at the configs

401
00:21:35,890 --> 00:21:38,990
is not to be as pretty as elastic
searches because I just don't tell

402
00:21:38,990 --> 00:21:43,190
Sri Jason but I am out a convict
information

403
00:21:43,190 --> 00:21:46,200
this can be pretty useful stuff I want
to craft an exploiter find something

404
00:21:46,200 --> 00:21:47,559
else to do with your server

405
00:21:47,559 --> 00:21:50,650
I'm so there's a lot of information in
here I and

406
00:21:50,650 --> 00:21:53,730
you know we get down to HDP addresses

407
00:21:53,730 --> 00:21:57,940
a you know default admin information so
on and so forth so

408
00:21:57,940 --> 00:22:03,150
it can be very very fun to fine experts
are fine default installations

409
00:22:03,150 --> 00:22:06,909
on that intimacy and I think I've got a
couple minutes to spare

410
00:22:06,909 --> 00:22:10,289
but i wanna run over his know it was how
we got better things to do than watch

411
00:22:10,289 --> 00:22:10,890
this

412
00:22:10,890 --> 00:22:13,669
and was my name is Matt others and
contact information out there if anyone

413
00:22:13,669 --> 00:22:14,710
has any questions

414
00:22:14,710 --> 00:22:18,419
there's the obligatory read my opinions
are my own if anyone from my employer is

415
00:22:18,419 --> 00:22:20,049
here that tell me if I didn't have that

416
00:22:20,049 --> 00:22:23,909
and last but not least just to make sure
he's awake an active but the Russell

417
00:22:23,909 --> 00:22:26,010
talk at 9am tomorrow

418
00:22:26,010 --> 00:22:29,890
with that thank you

419
00:22:29,890 --> 00:22:33,679
on if there's any questions me course
but

420
00:22:33,679 --> 00:22:39,559
yep

421
00:22:39,559 --> 00:22:45,429
start

422
00:22:45,429 --> 00:22:48,730
irony yeah I think that could be one way

423
00:22:48,730 --> 00:22:52,640
your honor i've seen multiple method I
guess segregation is a is another way

424
00:22:52,640 --> 00:22:53,960
like icing multiple

425
00:22:53,960 --> 00:22:57,049
stops along the way calm but it would be

426
00:22:57,049 --> 00:23:00,130
nice if there's inherent security as
well

427
00:23:00,130 --> 00:23:06,970
on but yes soup

428
00:23:06,970 --> 00:23:10,080
I'm watching that I've seen it put
behind nom

429
00:23:10,080 --> 00:23:13,809
you know like web servers not gonna stop
it could be that down the just depends

430
00:23:13,809 --> 00:23:14,370
on what

431
00:23:14,370 --> 00:23:18,470
it a depends on what you have been there
on like you know I listed some companies

432
00:23:18,470 --> 00:23:18,919
earlier

433
00:23:18,919 --> 00:23:23,510
some companies use it for meta data I
think eBay users mondo for meta data

434
00:23:23,510 --> 00:23:27,260
for something it's not as valuable as
Pay Pal information so the accessible to

435
00:23:27,260 --> 00:23:28,450
be a little bit different

436
00:23:28,450 --> 00:23:31,929
but from mediation point i've seen.
firewalls on their

437
00:23:31,929 --> 00:23:35,100
on that can get tough because when
you're running web app she want to be

438
00:23:35,100 --> 00:23:35,980
able to like

439
00:23:35,980 --> 00:23:39,370
what you have in front it needs to be
perfect every single time

440
00:23:39,370 --> 00:23:43,059
are you gonna lose everything i've seen.
web servers so people who use

441
00:23:43,059 --> 00:23:46,730
custom going or you know HTML pages net
messed up

442
00:23:46,730 --> 00:23:50,700
they'll have an authentication server so
you authenticated patchy for example

443
00:23:50,700 --> 00:23:53,690
and then it's unfettered access from
there everything so it depends on how

444
00:23:53,690 --> 00:23:55,260
the organization puts together

445
00:23:55,260 --> 00:23:58,510
and like I said elastic search for
example does have security plugins

446
00:23:58,510 --> 00:24:03,020
you can't I then with NJ languorous on
and so forth you can limit elasticsearch

447
00:24:03,020 --> 00:24:06,289
document access to user names and
everything is just

448
00:24:06,289 --> 00:24:10,980
no it doesn't certain from

449
00:24:10,980 --> 00:24:12,950
trip thanks everyone %ah

