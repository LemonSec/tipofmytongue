1
00:00:00,030 --> 00:00:03,529
all right let's get back to the talks

2
00:00:03,529 --> 00:00:06,839
next up we have Mike Lynn I actually

3
00:00:06,839 --> 00:00:08,940
didn't know your name because I just

4
00:00:08,940 --> 00:00:11,340
need your Twitter handle and your slack

5
00:00:11,340 --> 00:00:14,639
admin alias or handle Mike works at

6
00:00:14,639 --> 00:00:16,079
Facebook they do a lot of really cool

7
00:00:16,079 --> 00:00:18,390
Mac stuff a lot of open source stuff

8
00:00:18,390 --> 00:00:20,820
he's also kind of a I would say a guru

9
00:00:20,820 --> 00:00:23,970
when it comes to PI Abdi he's very

10
00:00:23,970 --> 00:00:25,949
active on the Mac admin slack channel

11
00:00:25,949 --> 00:00:28,050
which is really helpful always asked

12
00:00:28,050 --> 00:00:30,179
answering all sorts of esoteric

13
00:00:30,179 --> 00:00:32,790
questions so many times he's giving me

14
00:00:32,790 --> 00:00:33,200
answers

15
00:00:33,200 --> 00:00:35,130
so today he's gonna be talk about some

16
00:00:35,130 --> 00:00:37,230
really interesting and stuff so let's

17
00:00:37,230 --> 00:00:41,629
have a round of applause for Mike whoo

18
00:00:41,629 --> 00:00:44,789
standing ovations oh thank you thank you

19
00:00:44,789 --> 00:00:45,870
thank you yeah no pressure

20
00:00:45,870 --> 00:00:48,770
all right Mike take it away all right

21
00:00:48,770 --> 00:00:51,149
yeah thank you for that introduction on

22
00:00:51,149 --> 00:00:53,789
there I think the first time Patrick and

23
00:00:53,789 --> 00:00:55,920
I actually were interacting was on

24
00:00:55,920 --> 00:01:00,030
Twitter and I mean maybe a couple other

25
00:01:00,030 --> 00:01:01,949
people were trying to lure him into

26
00:01:01,949 --> 00:01:04,680
joining the Mac admin slack because he

27
00:01:04,680 --> 00:01:06,090
was going over there's really great

28
00:01:06,090 --> 00:01:08,880
security stuff that we were all really

29
00:01:08,880 --> 00:01:10,950
super interested in and he was going

30
00:01:10,950 --> 00:01:12,570
down these paths that some of us had

31
00:01:12,570 --> 00:01:14,130
already investigated before we like yeah

32
00:01:14,130 --> 00:01:15,450
we got some people you can chat with

33
00:01:15,450 --> 00:01:16,860
over here that probably talked about

34
00:01:16,860 --> 00:01:19,049
some of that stuff it's been really cool

35
00:01:19,049 --> 00:01:21,600
knowing Patrick and and thank you a lot

36
00:01:21,600 --> 00:01:24,000
to digit on and objective-c for putting

37
00:01:24,000 --> 00:01:30,060
this on this is amazing Mahalo so thank

38
00:01:30,060 --> 00:01:31,439
you for the introduction my name is Mike

39
00:01:31,439 --> 00:01:34,079
Lynn I am a client platform engineer at

40
00:01:34,079 --> 00:01:35,909
Facebook and I realized that the color I

41
00:01:35,909 --> 00:01:38,040
chose doesn't show real well for my name

42
00:01:38,040 --> 00:01:40,290
on that first slide that's okay I've got

43
00:01:40,290 --> 00:01:43,189
lots of names yeah I work at Facebook

44
00:01:43,189 --> 00:01:47,909
I'm not in Corp security although we got

45
00:01:47,909 --> 00:01:50,340
reorg we work hand in hand with them I'm

46
00:01:50,340 --> 00:01:52,229
on the engineering side for corporate

47
00:01:52,229 --> 00:01:55,950
devices so my job is knowing mac OS in

48
00:01:55,950 --> 00:01:59,640
depth and here I'm talk to some of that

49
00:01:59,640 --> 00:02:00,990
today

50
00:02:00,990 --> 00:02:03,030
as mentioned before I go by a lot of

51
00:02:03,030 --> 00:02:05,670
different names on Twitter I'm Mikey

52
00:02:05,670 --> 00:02:08,699
Mikey Frogger on the Mac admins and os

53
00:02:08,699 --> 00:02:11,050
query slack and then

54
00:02:11,050 --> 00:02:13,720
and github you can find me under hood

55
00:02:13,720 --> 00:02:16,960
quick of all things the repos that

56
00:02:16,960 --> 00:02:19,000
you'll find on github are not super

57
00:02:19,000 --> 00:02:22,030
stellar they are old but if you look at

58
00:02:22,030 --> 00:02:24,310
my gist's there are several hundred of

59
00:02:24,310 --> 00:02:26,910
them and they have many many pi

60
00:02:26,910 --> 00:02:29,650
objective-c examples as mentioned

61
00:02:29,650 --> 00:02:31,360
earlier it's a bit of a treasure trove

62
00:02:31,360 --> 00:02:33,610
in there I just want to give a shout out

63
00:02:33,610 --> 00:02:35,740
at this point to the Mac admins org

64
00:02:35,740 --> 00:02:38,560
slack it's free for anybody to join

65
00:02:38,560 --> 00:02:40,810
there's actually several dozen people

66
00:02:40,810 --> 00:02:42,460
that came to the conference here that

67
00:02:42,460 --> 00:02:45,580
are members of the slack already even if

68
00:02:45,580 --> 00:02:47,950
you aren't a Mac admin if you are

69
00:02:47,950 --> 00:02:51,490
interested in Mac security or IDs or

70
00:02:51,490 --> 00:02:55,270
just anything verging on Mac it's a

71
00:02:55,270 --> 00:02:56,860
great community to come hang out in a

72
00:02:56,860 --> 00:02:58,510
lot of people representing lots of

73
00:02:58,510 --> 00:03:00,760
different companies there and lots of

74
00:03:00,760 --> 00:03:03,400
different in-depth knowledge that you

75
00:03:03,400 --> 00:03:05,710
could tap into we're very friendly we

76
00:03:05,710 --> 00:03:07,830
don't bite I recommend you come and join

77
00:03:07,830 --> 00:03:11,890
so today at the security conference

78
00:03:11,890 --> 00:03:15,880
we've talked a lot about Apple and their

79
00:03:15,880 --> 00:03:20,140
software and their operating system my

80
00:03:20,140 --> 00:03:23,020
talk here is gonna be focusing more on

81
00:03:23,020 --> 00:03:25,270
some of the hardware changes that have

82
00:03:25,270 --> 00:03:28,720
had been happening as of late so if

83
00:03:28,720 --> 00:03:31,300
you're not familiar with your Mac

84
00:03:31,300 --> 00:03:35,590
history the Apple started out on the

85
00:03:35,590 --> 00:03:38,380
motorola processors for the Mac line

86
00:03:38,380 --> 00:03:41,200
good old 68k Macs and and all that fun

87
00:03:41,200 --> 00:03:44,980
jazz Mac Plus back in the day they are

88
00:03:44,980 --> 00:03:47,770
not a stranger to change when it comes

89
00:03:47,770 --> 00:03:51,209
to hardware they also later on went to

90
00:03:51,209 --> 00:03:54,489
PowerPC as the replacement for the

91
00:03:54,489 --> 00:03:57,760
motorola line on there they spent some

92
00:03:57,760 --> 00:04:03,130
time taking a stab at Intel processor

93
00:04:03,130 --> 00:04:05,800
chips during this and then they ended up

94
00:04:05,800 --> 00:04:08,650
actually eating a little bit of crow and

95
00:04:08,650 --> 00:04:10,510
actually giving some credit back to

96
00:04:10,510 --> 00:04:12,489
Intel when they switched finally from

97
00:04:12,489 --> 00:04:17,019
PowerPC to Intel so Mac processor line

98
00:04:17,019 --> 00:04:20,228
has hardware line has been through over

99
00:04:20,228 --> 00:04:23,710
time over the decades multiple systemic

100
00:04:23,710 --> 00:04:24,540
on

101
00:04:24,540 --> 00:04:28,420
drastic changes whereas in comparison to

102
00:04:28,420 --> 00:04:30,820
say the consumer PC market basically

103
00:04:30,820 --> 00:04:33,700
windows hardware it's pretty much been

104
00:04:33,700 --> 00:04:36,910
the same family of x86 instructions with

105
00:04:36,910 --> 00:04:38,350
extension after extension after

106
00:04:38,350 --> 00:04:40,450
extension after extension for the

107
00:04:40,450 --> 00:04:41,470
longest time

108
00:04:41,470 --> 00:04:44,169
so Apple definitely plays a different

109
00:04:44,169 --> 00:04:46,180
game they're a little faster looser when

110
00:04:46,180 --> 00:04:49,270
it comes to being willing to make deep

111
00:04:49,270 --> 00:04:51,910
underlying changes to the hardware

112
00:04:51,910 --> 00:04:56,500
structure of their devices so what has

113
00:04:56,500 --> 00:05:00,090
the mothership been doing as of late

114
00:05:00,090 --> 00:05:04,650
well on the not Mac side of things

115
00:05:04,650 --> 00:05:07,630
they've been making some priests iffy

116
00:05:07,630 --> 00:05:09,669
ARM processors as of late I don't know

117
00:05:09,669 --> 00:05:11,110
if you've been checking out the geek

118
00:05:11,110 --> 00:05:13,750
bench scores for the latest iPad pros or

119
00:05:13,750 --> 00:05:16,270
anything like that but that chart that

120
00:05:16,270 --> 00:05:18,669
I've got there is comparing single core

121
00:05:18,669 --> 00:05:20,800
and multi-core performance the iPad pro

122
00:05:20,800 --> 00:05:24,580
against a 20-18 MacBook Pro those

123
00:05:24,580 --> 00:05:28,290
numbers look pretty stinkin awesome so

124
00:05:28,290 --> 00:05:31,270
some of us had been theorizing that

125
00:05:31,270 --> 00:05:33,490
Apple would be at some point here

126
00:05:33,490 --> 00:05:37,360
changing from their Intel processors

127
00:05:37,360 --> 00:05:40,120
once again to now an in-house ARM

128
00:05:40,120 --> 00:05:44,380
processor now that hasn't quite happened

129
00:05:44,380 --> 00:05:44,860
yet

130
00:05:44,860 --> 00:05:47,740
but in the meantime what Apple has been

131
00:05:47,740 --> 00:05:51,789
doing since 2017 is they have started

132
00:05:51,789 --> 00:05:56,250
rolling out sort of this sleeper device

133
00:05:56,250 --> 00:06:01,150
the 2017 iMac Pro came out to a lot of

134
00:06:01,150 --> 00:06:04,900
fanfare for video editing

135
00:06:04,900 --> 00:06:07,510
in fact they gave unusually for that

136
00:06:07,510 --> 00:06:11,229
model they gave previewed access to a

137
00:06:11,229 --> 00:06:14,260
whole bunch of video editing people who

138
00:06:14,260 --> 00:06:16,630
raved and reviewed when the iMac Pro was

139
00:06:16,630 --> 00:06:19,510
revealed that I can edit this 4k video

140
00:06:19,510 --> 00:06:21,610
and it's fantastic and in the meantime

141
00:06:21,610 --> 00:06:24,370
on the Mac admin community side of

142
00:06:24,370 --> 00:06:27,910
things we knew that the iMac pro was the

143
00:06:27,910 --> 00:06:30,940
first Apple device that was a secure

144
00:06:30,940 --> 00:06:32,100
boot

145
00:06:32,100 --> 00:06:35,340
and we're like why don't we get this

146
00:06:35,340 --> 00:06:36,900
advanced I accessed these devices

147
00:06:36,900 --> 00:06:40,290
because these iMac pros we understood

148
00:06:40,290 --> 00:06:43,320
were completely like on the outside they

149
00:06:43,320 --> 00:06:46,470
looked very much like a consumer Mac but

150
00:06:46,470 --> 00:06:48,420
we knew inside fundamentally there had

151
00:06:48,420 --> 00:06:51,240
been some major changes the iMac pros

152
00:06:51,240 --> 00:06:53,730
not the only device that Apple has done

153
00:06:53,730 --> 00:06:56,130
that with they've since gone on to do

154
00:06:56,130 --> 00:06:59,340
the MacBook Pro 2018 MacBook Pro devices

155
00:06:59,340 --> 00:07:02,280
and then just recently in the October

156
00:07:02,280 --> 00:07:04,440
event they actually announced the

157
00:07:04,440 --> 00:07:07,380
MacBook Air has finally been refreshed

158
00:07:07,380 --> 00:07:11,010
and it is now a t2 secure boot device as

159
00:07:11,010 --> 00:07:15,860
well as is the Mac Mini of all things

160
00:07:15,860 --> 00:07:20,370
that means that out of the entire Apple

161
00:07:20,370 --> 00:07:23,550
Mac lineup within the scope of about

162
00:07:23,550 --> 00:07:25,770
well it's less than a year at this point

163
00:07:25,770 --> 00:07:27,090
I think the iMac pro came out in

164
00:07:27,090 --> 00:07:30,750
December of 2017 in less than a year

165
00:07:30,750 --> 00:07:33,690
the only remaining Mac's that are not

166
00:07:33,690 --> 00:07:37,220
secure boot devices at this point are

167
00:07:37,220 --> 00:07:41,070
the up-and-coming Mac Pro whenever

168
00:07:41,070 --> 00:07:42,330
that's going to come out it's very

169
00:07:42,330 --> 00:07:43,860
obviously going to be a secure boot

170
00:07:43,860 --> 00:07:48,600
device the iMac which honestly is very

171
00:07:48,600 --> 00:07:51,570
long overdue for just any sort of

172
00:07:51,570 --> 00:07:53,070
refresh at this point I mean it was a

173
00:07:53,070 --> 00:07:54,360
drop-in that they've already done the

174
00:07:54,360 --> 00:07:58,770
iMac Pro doing the non pro for them and

175
00:07:58,770 --> 00:08:01,590
then the MacBook 12-inch I don't know

176
00:08:01,590 --> 00:08:02,880
what's gonna happen with that particular

177
00:08:02,880 --> 00:08:04,530
advice it's probably just gonna honestly

178
00:08:04,530 --> 00:08:07,770
go away but that's it that's all that

179
00:08:07,770 --> 00:08:09,690
remains every other device now at this

180
00:08:09,690 --> 00:08:12,540
point going forward is a secure boot

181
00:08:12,540 --> 00:08:16,530
device so what I'm talking about aliens

182
00:08:16,530 --> 00:08:19,350
among us with these devices you know I'm

183
00:08:19,350 --> 00:08:21,690
not talking like ancient aliens or

184
00:08:21,690 --> 00:08:24,000
something like that I'm talking here

185
00:08:24,000 --> 00:08:27,210
that these are devices that have gotten

186
00:08:27,210 --> 00:08:30,600
out into the world that honestly for

187
00:08:30,600 --> 00:08:33,690
what Apple did to them there is not

188
00:08:33,690 --> 00:08:34,979
enough discussion and understanding

189
00:08:34,979 --> 00:08:38,120
about the changes because it's such

190
00:08:38,120 --> 00:08:41,599
job of it the secure boot devices in

191
00:08:41,599 --> 00:08:45,110
terms of aliens is like the doctor on

192
00:08:45,110 --> 00:08:49,130
the outside looks like you and me and

193
00:08:49,130 --> 00:08:51,410
you know everything about these devices

194
00:08:51,410 --> 00:08:52,820
is it just works

195
00:08:52,820 --> 00:08:54,940
you know it's a Mac like any other Mac

196
00:08:54,940 --> 00:08:59,990
but under the hood instead of just the

197
00:08:59,990 --> 00:09:03,740
one Intel heart here it's got two hearts

198
00:09:03,740 --> 00:09:06,830
going on it's got the Intel chip and the

199
00:09:06,830 --> 00:09:09,110
t2 chip and in fact actually when I was

200
00:09:09,110 --> 00:09:10,460
trying to do this analogy I realized I

201
00:09:10,460 --> 00:09:11,450
was stretching it pretty far it's

202
00:09:11,450 --> 00:09:14,120
actually probably closer to this guy out

203
00:09:14,120 --> 00:09:15,790
of men in black than anything else

204
00:09:15,790 --> 00:09:19,700
because instead of it being just a side

205
00:09:19,700 --> 00:09:22,430
by side processor like it was in the t1

206
00:09:22,430 --> 00:09:26,029
touch bars the the original like the the

207
00:09:26,029 --> 00:09:27,589
first time the touch bar came out there

208
00:09:27,589 --> 00:09:29,900
was a t1 chip in there that's peanuts

209
00:09:29,900 --> 00:09:32,060
compared to what they've done here so in

210
00:09:32,060 --> 00:09:34,820
the secure boot devices here's here's

211
00:09:34,820 --> 00:09:37,130
the diagram essentially very simplified

212
00:09:37,130 --> 00:09:40,820
diagram of a previous generation non

213
00:09:40,820 --> 00:09:43,010
secure boot Mac in this particular

214
00:09:43,010 --> 00:09:46,760
situation you have storage camera mic

215
00:09:46,760 --> 00:09:48,890
audio that kind of stuff basically

216
00:09:48,890 --> 00:09:51,290
routes effectively straight into the CPU

217
00:09:51,290 --> 00:09:55,700
on the t2 that Avenue is broken and

218
00:09:55,700 --> 00:09:58,160
instead those devices route through the

219
00:09:58,160 --> 00:10:02,420
t2 which then has PCIe connections to

220
00:10:02,420 --> 00:10:05,360
the CPU of your device it is literally

221
00:10:05,360 --> 00:10:08,240
man in the middling the access of some

222
00:10:08,240 --> 00:10:10,250
very core Hardware functionality of your

223
00:10:10,250 --> 00:10:13,940
devices and it is the it's the little

224
00:10:13,940 --> 00:10:15,560
place to the puppet master behind the

225
00:10:15,560 --> 00:10:19,700
strings it actually has control over

226
00:10:19,700 --> 00:10:22,940
what your Mac can and cannot do in a way

227
00:10:22,940 --> 00:10:26,209
that is not possible if they were just

228
00:10:26,209 --> 00:10:29,510
side by side processors when I'm saying

229
00:10:29,510 --> 00:10:31,370
control you've got to realize that that

230
00:10:31,370 --> 00:10:33,589
storage block that I've got on there

231
00:10:33,589 --> 00:10:36,680
that's where Mac OS is the t2 sits

232
00:10:36,680 --> 00:10:39,320
between the Intel processor and your Mac

233
00:10:39,320 --> 00:10:42,680
and Mac OS if the t2 says you don't get

234
00:10:42,680 --> 00:10:45,290
Mac OS then you don't boot Mac o

235
00:10:45,290 --> 00:10:49,640
so when that iMac pro came out in

236
00:10:49,640 --> 00:10:56,350
December Apple that was a really planned

237
00:10:56,350 --> 00:10:59,930
targeted release for the first secure

238
00:10:59,930 --> 00:11:03,110
boot device because this was brand new

239
00:11:03,110 --> 00:11:05,750
for them the iMac pro is basically like

240
00:11:05,750 --> 00:11:07,190
a specialty device I think it's like

241
00:11:07,190 --> 00:11:08,600
five thousand dollars in a stock

242
00:11:08,600 --> 00:11:10,070
configuration or something like that the

243
00:11:10,070 --> 00:11:11,870
volume that they expected a sell on it

244
00:11:11,870 --> 00:11:14,570
was probably pretty low so good target

245
00:11:14,570 --> 00:11:16,760
for the release of a totally revamped

246
00:11:16,760 --> 00:11:18,830
hardware design like this because if

247
00:11:18,830 --> 00:11:20,360
there were issues and that kind of stuff

248
00:11:20,360 --> 00:11:22,580
they didn't do it to their MacBook Pros

249
00:11:22,580 --> 00:11:24,230
which is basically the bread and butter

250
00:11:24,230 --> 00:11:26,360
of every corporate you know government

251
00:11:26,360 --> 00:11:28,190
whatever fleet out there actually those

252
00:11:28,190 --> 00:11:29,480
were probably like MacBook Airs or

253
00:11:29,480 --> 00:11:32,000
something like that but like did they

254
00:11:32,000 --> 00:11:34,190
chose well on the model that they

255
00:11:34,190 --> 00:11:36,710
released this on the side effect of that

256
00:11:36,710 --> 00:11:39,380
price though was that it it was so

257
00:11:39,380 --> 00:11:41,420
restricted in terms of who got their

258
00:11:41,420 --> 00:11:43,460
hands on this stuff that when you're

259
00:11:43,460 --> 00:11:45,530
talking about administrators and stuff

260
00:11:45,530 --> 00:11:47,660
like that who had go oh there's a sample

261
00:11:47,660 --> 00:11:49,370
of this stuff in the wild I need to get

262
00:11:49,370 --> 00:11:51,530
one God trying to get like approval to

263
00:11:51,530 --> 00:11:53,780
your boss like hey yeah I know that we

264
00:11:53,780 --> 00:11:56,330
deploy you know $700 Mac minis or

265
00:11:56,330 --> 00:11:57,650
whatever but I need to go get this

266
00:11:57,650 --> 00:12:00,020
$5,000 iMac Pro because I need to

267
00:12:00,020 --> 00:12:01,760
understand what Apple has done to the

268
00:12:01,760 --> 00:12:03,410
devices that were ready when they do

269
00:12:03,410 --> 00:12:05,240
this to the Mac Mini yeah that's not

270
00:12:05,240 --> 00:12:09,130
gonna fly so we're all kind of just like

271
00:12:09,130 --> 00:12:12,860
that just I don't know just screaming it

272
00:12:12,860 --> 00:12:14,510
just trying to get this stuff like I

273
00:12:14,510 --> 00:12:16,760
need access to these machines and then

274
00:12:16,760 --> 00:12:18,800
when we got access it was kind of like

275
00:12:18,800 --> 00:12:21,440
this still like oh my god what has Apple

276
00:12:21,440 --> 00:12:22,760
done to these things they don't work

277
00:12:22,760 --> 00:12:24,950
anyway like we expected I mean it was

278
00:12:24,950 --> 00:12:26,990
more like this we were just really

279
00:12:26,990 --> 00:12:30,410
confused because a few of us got access

280
00:12:30,410 --> 00:12:34,580
to these first secure boot iMac pros and

281
00:12:34,580 --> 00:12:36,740
the very first thing we noticed was

282
00:12:36,740 --> 00:12:39,890
these things don't net boot that was a

283
00:12:39,890 --> 00:12:44,360
shock because you had the concept of

284
00:12:44,360 --> 00:12:47,240
zero touch deployment in Mac OS Apple

285
00:12:47,240 --> 00:12:49,790
has been repeatedly saying over and over

286
00:12:49,790 --> 00:12:52,730
MDM is the way forward for dep is the

287
00:12:52,730 --> 00:12:55,620
way for doing zero touch mac deploy

288
00:12:55,620 --> 00:12:57,450
you just open the Mac and it sets itself

289
00:12:57,450 --> 00:13:00,270
up and it enrolls itself that's cute but

290
00:13:00,270 --> 00:13:02,040
in the real world we actually need to

291
00:13:02,040 --> 00:13:03,690
get these devices out in a timely

292
00:13:03,690 --> 00:13:05,400
fashion and so the way that this was

293
00:13:05,400 --> 00:13:07,680
actually done was that people would hold

294
00:13:07,680 --> 00:13:09,570
the letter n key on their keyboard and

295
00:13:09,570 --> 00:13:11,910
it would network boot to a local imaging

296
00:13:11,910 --> 00:13:13,080
server which would then do all the

297
00:13:13,080 --> 00:13:14,850
automation put the OS on to the device

298
00:13:14,850 --> 00:13:17,160
all that kind of stuff and we get our

299
00:13:17,160 --> 00:13:19,740
hands on one of these things and they

300
00:13:19,740 --> 00:13:22,110
don't netboot at all and they're like ok

301
00:13:22,110 --> 00:13:24,930
so what we do now

302
00:13:24,930 --> 00:13:31,860
and Tim per foot of two canoes wonderful

303
00:13:31,860 --> 00:13:34,529
gentleman he actually went out and

304
00:13:34,529 --> 00:13:38,910
expensed himself iMac Pro and just to

305
00:13:38,910 --> 00:13:40,529
check out all the things that we

306
00:13:40,529 --> 00:13:43,250
actually wanted Apple to do from a

307
00:13:43,250 --> 00:13:45,690
preview standpoint for us the admin

308
00:13:45,690 --> 00:13:48,089
community for the secure boot devices he

309
00:13:48,089 --> 00:13:49,470
blogged about the whole thing like this

310
00:13:49,470 --> 00:13:51,180
is this doesn't work this doesn't work

311
00:13:51,180 --> 00:13:52,830
he went and he took screenshots of all

312
00:13:52,830 --> 00:13:53,940
the kind of stuff that people were

313
00:13:53,940 --> 00:13:55,080
running into trying to set up these

314
00:13:55,080 --> 00:13:57,810
devices because at that time there was

315
00:13:57,810 --> 00:13:59,700
no documentation on it it was we knew

316
00:13:59,700 --> 00:14:01,410
that there's these are different devices

317
00:14:01,410 --> 00:14:02,970
but there wasn't a KB article out that

318
00:14:02,970 --> 00:14:04,260
showed you how they were different or

319
00:14:04,260 --> 00:14:05,459
talked about why they were different

320
00:14:05,459 --> 00:14:07,800
earning of that kind of stuff and so Tim

321
00:14:07,800 --> 00:14:10,140
did the community a solid went and

322
00:14:10,140 --> 00:14:11,550
grabbed one of these devices blogged up

323
00:14:11,550 --> 00:14:14,010
everything he could find and so we're

324
00:14:14,010 --> 00:14:18,300
like cool so doing network boot imaging

325
00:14:18,300 --> 00:14:19,980
for these devices doesn't work so what

326
00:14:19,980 --> 00:14:21,690
does work on these devices

327
00:14:21,690 --> 00:14:25,830
how about target disk mode restore like

328
00:14:25,830 --> 00:14:28,110
Thunderbolt like you know hold down the

329
00:14:28,110 --> 00:14:30,089
letter TD key and put it in the target

330
00:14:30,089 --> 00:14:31,410
just bone attach it to the machine we

331
00:14:31,410 --> 00:14:34,140
started getting really weird dialogues

332
00:14:34,140 --> 00:14:35,550
that were popping up the first time when

333
00:14:35,550 --> 00:14:37,110
we were booting up these devices stuff

334
00:14:37,110 --> 00:14:39,180
that we'd never seen before and there

335
00:14:39,180 --> 00:14:42,150
was no information about what was going

336
00:14:42,150 --> 00:14:43,800
on at the underlying core of all this

337
00:14:43,800 --> 00:14:47,970
stuff they felt very alien the device is

338
00:14:47,970 --> 00:14:50,459
out of the box they don't actually allow

339
00:14:50,459 --> 00:14:52,920
you to boot external media either so you

340
00:14:52,920 --> 00:14:54,930
couldn't go okay cool we can't do net

341
00:14:54,930 --> 00:14:56,760
boot we'll just attach a USB thumb drive

342
00:14:56,760 --> 00:14:58,260
to these things and image them with a

343
00:14:58,260 --> 00:14:59,940
tool running up that doesn't work either

344
00:14:59,940 --> 00:15:01,589
literally the only thing they would

345
00:15:01,589 --> 00:15:03,240
actually boot is they would boot out of

346
00:15:03,240 --> 00:15:04,920
whatever was inside them and what was

347
00:15:04,920 --> 00:15:06,600
inside them was stock Mac OS and that

348
00:15:06,600 --> 00:15:08,559
wasn't really useful for us

349
00:15:08,559 --> 00:15:11,619
so yeah looking at looking at the

350
00:15:11,619 --> 00:15:14,619
booting aspect of this at some point

351
00:15:14,619 --> 00:15:17,410
when these devices came out we realized

352
00:15:17,410 --> 00:15:20,860
that target disk mode restore of these

353
00:15:20,860 --> 00:15:23,259
devices an iMac pro could restore

354
00:15:23,259 --> 00:15:26,559
another iMac Pro but everything else

355
00:15:26,559 --> 00:15:28,540
could not restore to an iMac Pro so

356
00:15:28,540 --> 00:15:30,730
there was something special about these

357
00:15:30,730 --> 00:15:33,189
devices or the operating system that was

358
00:15:33,189 --> 00:15:34,600
running on it came out with a different

359
00:15:34,600 --> 00:15:38,259
Fork so I ended up actually doing some

360
00:15:38,259 --> 00:15:40,989
investigation about what was going on

361
00:15:40,989 --> 00:15:42,970
under the hood that was making the boot

362
00:15:42,970 --> 00:15:45,869
process actually work for laying down a

363
00:15:45,869 --> 00:15:49,569
oh s that I wanted on the device rather

364
00:15:49,569 --> 00:15:52,600
than what came out of the box and in in

365
00:15:52,600 --> 00:15:55,299
doing that investigation I found that

366
00:15:55,299 --> 00:15:59,350
the secure boot devices picked up some

367
00:15:59,350 --> 00:16:01,230
tricks from the iOS world of things

368
00:16:01,230 --> 00:16:05,199
secure boot devices do personalization

369
00:16:05,199 --> 00:16:07,839
they reach out to an online Apple

370
00:16:07,839 --> 00:16:11,110
service where it says here's the EFI

371
00:16:11,110 --> 00:16:13,509
boot binaries that I have here's my

372
00:16:13,509 --> 00:16:16,360
immutable kernel cache you're the pieces

373
00:16:16,360 --> 00:16:18,189
that I need to boot this version of Mac

374
00:16:18,189 --> 00:16:20,980
OS hey Apple can I get a signature back

375
00:16:20,980 --> 00:16:22,240
that says I'm allowed to boot this

376
00:16:22,240 --> 00:16:26,170
please and it's literally the exact same

377
00:16:26,170 --> 00:16:29,679
URL that iOS devices reach out to for

378
00:16:29,679 --> 00:16:31,799
personalization if you're familiar with

379
00:16:31,799 --> 00:16:35,559
SSH blah sh-sh blobs and stuff like that

380
00:16:35,559 --> 00:16:37,600
it's literally the exact same end point

381
00:16:37,600 --> 00:16:40,720
so the authorization service that Apple

382
00:16:40,720 --> 00:16:43,509
runs historically for iOS devices to say

383
00:16:43,509 --> 00:16:45,100
yes you're allowed to install and boot

384
00:16:45,100 --> 00:16:48,069
this iOS operating system on this device

385
00:16:48,069 --> 00:16:50,259
now these secure boot Mac's had picked

386
00:16:50,259 --> 00:16:52,480
up the exact same trick which makes

387
00:16:52,480 --> 00:16:56,999
sense it's a great security model and I

388
00:16:56,999 --> 00:17:00,040
wrote about this to the best of the

389
00:17:00,040 --> 00:17:02,169
knowledge that I had at the time and

390
00:17:02,169 --> 00:17:04,990
when I wrote it I talked about these I

391
00:17:04,990 --> 00:17:08,109
am for EM manifest files so the

392
00:17:08,109 --> 00:17:09,819
signature happens they get placed on

393
00:17:09,819 --> 00:17:11,740
disk so obviously something on the

394
00:17:11,740 --> 00:17:14,439
machine is checking the signatures and

395
00:17:14,439 --> 00:17:17,888
at the time my assumption was well it's

396
00:17:17,888 --> 00:17:19,898
the t2 chip the t2 chip just looks at

397
00:17:19,898 --> 00:17:20,929
the signatures on the thing

398
00:17:20,929 --> 00:17:23,509
and it goes yep looks good cool we're

399
00:17:23,509 --> 00:17:24,819
gonna boot it

400
00:17:24,819 --> 00:17:27,470
fortunately recently Apple was actually

401
00:17:27,470 --> 00:17:29,720
published an excellent white paper on

402
00:17:29,720 --> 00:17:31,820
this with a lot of good details

403
00:17:31,820 --> 00:17:35,570
including this really cool slide this is

404
00:17:35,570 --> 00:17:37,580
the actual boot chain of the secure boot

405
00:17:37,580 --> 00:17:39,049
devices and a lot of people don't

406
00:17:39,049 --> 00:17:40,249
realize that this is actually what's

407
00:17:40,249 --> 00:17:42,049
going on under the hood there was a talk

408
00:17:42,049 --> 00:17:45,830
that was given at Maxis admin just his

409
00:17:45,830 --> 00:17:48,649
recent year about the history of the

410
00:17:48,649 --> 00:17:50,809
boot process the posts you know power-on

411
00:17:50,809 --> 00:17:52,220
self-test all that kind of stuff on

412
00:17:52,220 --> 00:17:54,710
devices and he went all the way up to

413
00:17:54,710 --> 00:17:58,100
current generation Mac's almost and he

414
00:17:58,100 --> 00:18:00,379
had like a little teeny box where it was

415
00:18:00,379 --> 00:18:01,999
like oh yeah and secure boot happens

416
00:18:01,999 --> 00:18:04,580
here well as it turns out in this chart

417
00:18:04,580 --> 00:18:06,470
on here there's an entirely other device

418
00:18:06,470 --> 00:18:07,970
that's booting up like it's it's

419
00:18:07,970 --> 00:18:09,769
basically you take that box and expand

420
00:18:09,769 --> 00:18:11,029
it and there's a whole other giant

421
00:18:11,029 --> 00:18:13,759
diagram box inside that box it's so

422
00:18:13,759 --> 00:18:15,740
what's actually going on here is on

423
00:18:15,740 --> 00:18:18,080
every time you turn on a secure boot

424
00:18:18,080 --> 00:18:21,619
device the t2 powers on it checks its

425
00:18:21,619 --> 00:18:23,899
own signature it is running bridge OS

426
00:18:23,899 --> 00:18:26,240
which is basically in the same family of

427
00:18:26,240 --> 00:18:28,850
stuff as iOS except specifically for

428
00:18:28,850 --> 00:18:30,860
these the purposes of being using these

429
00:18:30,860 --> 00:18:33,499
Mac's but it has I boot and all the

430
00:18:33,499 --> 00:18:34,909
things that you would expect to see on

431
00:18:34,909 --> 00:18:37,580
iOS so it has the same secure boot model

432
00:18:37,580 --> 00:18:40,309
that you would see in an iPhone and then

433
00:18:40,309 --> 00:18:45,169
the cool part happens right here the t2

434
00:18:45,169 --> 00:18:48,799
chip holds within itself the firmware

435
00:18:48,799 --> 00:18:50,600
for all the models of the devices that

436
00:18:50,600 --> 00:18:53,990
are out there and then there is no SPI

437
00:18:53,990 --> 00:18:57,200
flash anymore in the Mac there is no

438
00:18:57,200 --> 00:19:00,799
hardware copy of the firmware of your

439
00:19:00,799 --> 00:19:05,960
device instead it is ESPI ESPI

440
00:19:05,960 --> 00:19:09,559
is an Intel protocol that there's a

441
00:19:09,559 --> 00:19:12,080
white paper standard for it where over

442
00:19:12,080 --> 00:19:15,740
the wire a copy of firmware is handed to

443
00:19:15,740 --> 00:19:17,720
the Intel chip it is never written to

444
00:19:17,720 --> 00:19:19,340
flash it has never written to permanent

445
00:19:19,340 --> 00:19:20,419
storage on the device

446
00:19:20,419 --> 00:19:23,570
there's no persistent storage of flash

447
00:19:23,570 --> 00:19:26,389
firmware modules on any secure boot

448
00:19:26,389 --> 00:19:28,720
device that ESPI

449
00:19:28,720 --> 00:19:30,980
hands the firmware over to the Intel

450
00:19:30,980 --> 00:19:33,390
side of things and then it

451
00:19:33,390 --> 00:19:35,970
boots up and it's the firmware that was

452
00:19:35,970 --> 00:19:37,470
handed over that's actually doing the

453
00:19:37,470 --> 00:19:39,450
validation the t2 really doesn't even

454
00:19:39,450 --> 00:19:41,550
have access to the filesystem of your

455
00:19:41,550 --> 00:19:43,860
Mac at all that it's that little teeny

456
00:19:43,860 --> 00:19:45,870
ESPI window that it talks through it's

457
00:19:45,870 --> 00:19:47,520
the only access that it has and it says

458
00:19:47,520 --> 00:19:50,550
I validated that this is good here you

459
00:19:50,550 --> 00:19:52,380
go on and do the next step and then the

460
00:19:52,380 --> 00:19:54,870
firmware itself boots up and it does the

461
00:19:54,870 --> 00:19:56,370
checking of those signature files and

462
00:19:56,370 --> 00:19:57,150
all that kind of stuff

463
00:19:57,150 --> 00:19:58,740
anyone who's eagle-eyed enough that

464
00:19:58,740 --> 00:20:00,420
noticed I had two little arrows in there

465
00:20:00,420 --> 00:20:02,580
before that's the little ESPI guy that's

466
00:20:02,580 --> 00:20:05,970
hanging out over there so that ESPI is

467
00:20:05,970 --> 00:20:08,280
the one that actually hands the firmware

468
00:20:08,280 --> 00:20:10,530
over to the Intel side and then from

469
00:20:10,530 --> 00:20:12,840
then it looks like a traditional Mac EFI

470
00:20:12,840 --> 00:20:15,690
boot model the efi starts up looks at

471
00:20:15,690 --> 00:20:18,390
these i m4m files and goes yep

472
00:20:18,390 --> 00:20:20,130
signatures good yep signatures good cool

473
00:20:20,130 --> 00:20:24,540
we can actually boot the this actually

474
00:20:24,540 --> 00:20:27,420
goes back to part of the Apple KB

475
00:20:27,420 --> 00:20:28,710
article that they finally published

476
00:20:28,710 --> 00:20:30,510
which talks about the secure boot

477
00:20:30,510 --> 00:20:32,880
utility where it has multiple levels of

478
00:20:32,880 --> 00:20:35,880
security and I actually go over some of

479
00:20:35,880 --> 00:20:37,680
that in my blog post to where the I am

480
00:20:37,680 --> 00:20:40,620
for M files by default on any Mac out of

481
00:20:40,620 --> 00:20:43,170
the box that signature file is not only

482
00:20:43,170 --> 00:20:45,240
a personalization saying that this Mac

483
00:20:45,240 --> 00:20:47,730
can boot this operating system but it's

484
00:20:47,730 --> 00:20:49,260
actually a personalization file saying

485
00:20:49,260 --> 00:20:51,210
this specific Mac can boot this

486
00:20:51,210 --> 00:20:53,640
operating system it is keyed to the EC

487
00:20:53,640 --> 00:20:55,380
ID the unique identifier that's in these

488
00:20:55,380 --> 00:20:58,230
tt-to chips by default so you couldn't

489
00:20:58,230 --> 00:21:00,030
take these personalization files and

490
00:21:00,030 --> 00:21:01,530
then like ship them to another device

491
00:21:01,530 --> 00:21:02,940
it's there they're customized

492
00:21:02,940 --> 00:21:04,770
specifically for this Marek

493
00:21:04,770 --> 00:21:07,050
so what's the effect of this from a

494
00:21:07,050 --> 00:21:08,580
security standpoint for these new

495
00:21:08,580 --> 00:21:10,410
devices where everybody remembers

496
00:21:10,410 --> 00:21:12,090
probably the vault 7 leaked stuff when

497
00:21:12,090 --> 00:21:13,440
that was coming out and oh my god

498
00:21:13,440 --> 00:21:16,170
through so many like panic in the Mac

499
00:21:16,170 --> 00:21:17,610
security world type of stuff because

500
00:21:17,610 --> 00:21:19,500
you're talking about the CIA literally

501
00:21:19,500 --> 00:21:23,100
having kits for building injectable

502
00:21:23,100 --> 00:21:26,130
firmware modules into basically the huge

503
00:21:26,130 --> 00:21:28,140
array of like Apple Mac devices and

504
00:21:28,140 --> 00:21:30,110
stuff like that

505
00:21:30,110 --> 00:21:34,320
ESP AI protocol makes all that go away

506
00:21:34,320 --> 00:21:36,600
because there's no persistent flash

507
00:21:36,600 --> 00:21:39,450
storage anymore you cannot do a

508
00:21:39,450 --> 00:21:41,520
persistent firmware attack on these

509
00:21:41,520 --> 00:21:43,770
devices the firmware is a file inside

510
00:21:43,770 --> 00:21:46,000
the t2 when you turn it on it says you

511
00:21:46,000 --> 00:21:47,200
the file and it hands it over to the

512
00:21:47,200 --> 00:21:49,300
Intel machine side of the machine and

513
00:21:49,300 --> 00:21:51,760
and then that boots but when you reboot

514
00:21:51,760 --> 00:21:53,350
that process happens all over again

515
00:21:53,350 --> 00:21:55,840
there is no persistent firmware concept

516
00:21:55,840 --> 00:21:57,700
in these new devices at all that also

517
00:21:57,700 --> 00:22:00,970
means that Tramell Hudson's right up on

518
00:22:00,970 --> 00:22:02,890
Thunderstrike attacks and how trivial it

519
00:22:02,890 --> 00:22:07,210
was to attach SPI flashers to an eMac

520
00:22:07,210 --> 00:22:08,890
you know take the out your panel little

521
00:22:08,890 --> 00:22:10,180
screwdrivers or whatever pop out the

522
00:22:10,180 --> 00:22:12,550
back of your MacBook Pro attach a couple

523
00:22:12,550 --> 00:22:14,530
clips and boom in 30 seconds you flashed

524
00:22:14,530 --> 00:22:17,110
persistent malware onto these Macs these

525
00:22:17,110 --> 00:22:20,770
entire classes of attack are dead in

526
00:22:20,770 --> 00:22:22,420
every secure boot device that's out

527
00:22:22,420 --> 00:22:24,910
there some of which you might have in

528
00:22:24,910 --> 00:22:27,700
front of you right now so so we're

529
00:22:27,700 --> 00:22:31,990
talking no net no flash storage for for

530
00:22:31,990 --> 00:22:33,910
firmware anymore need to apples

531
00:22:33,910 --> 00:22:37,270
personalization so they're different but

532
00:22:37,270 --> 00:22:41,110
like like I mean you can turn this stuff

533
00:22:41,110 --> 00:22:43,120
off right like so you could just go into

534
00:22:43,120 --> 00:22:45,250
the security dialogue and you can turn

535
00:22:45,250 --> 00:22:46,600
this stuff off

536
00:22:46,600 --> 00:22:49,060
it's got configuration you turn off so

537
00:22:49,060 --> 00:22:51,340
like it can't be that hard from an

538
00:22:51,340 --> 00:22:53,020
administrator standpoint to deal with

539
00:22:53,020 --> 00:22:54,880
this stuff if you needed to you know

540
00:22:54,880 --> 00:22:56,410
move with thumbdrive damage the Mac or

541
00:22:56,410 --> 00:22:59,320
somebody I just turned off as it turns

542
00:22:59,320 --> 00:23:02,500
out if you attempt to use the lower part

543
00:23:02,500 --> 00:23:04,770
the allow booting from external media or

544
00:23:04,770 --> 00:23:07,000
change it to no security or anything

545
00:23:07,000 --> 00:23:09,400
like that before you can actually get to

546
00:23:09,400 --> 00:23:12,100
this screen you're gonna get an

547
00:23:12,100 --> 00:23:16,090
authentication challenge so Apple will

548
00:23:16,090 --> 00:23:18,340
agreed that you know turning this off

549
00:23:18,340 --> 00:23:20,230
probably wouldn't be great like if I

550
00:23:20,230 --> 00:23:21,490
could grab your laptop out of the

551
00:23:21,490 --> 00:23:22,750
airport and I could just boot into

552
00:23:22,750 --> 00:23:24,460
recovery and go turn off secure boot

553
00:23:24,460 --> 00:23:26,530
cool I can put stuff on your Mac and

554
00:23:26,530 --> 00:23:29,080
you're not scare anymore well so what

555
00:23:29,080 --> 00:23:31,600
they did here was they actually gated

556
00:23:31,600 --> 00:23:34,230
access to the configuration behind

557
00:23:34,230 --> 00:23:37,990
secure token accounts on your Mac so

558
00:23:37,990 --> 00:23:40,840
Apple is actually married secure boot

559
00:23:40,840 --> 00:23:45,850
together with a PFS at the hip when you

560
00:23:45,850 --> 00:23:48,130
take a Mac that is secure boot out of

561
00:23:48,130 --> 00:23:51,250
the box you can't actually turn any of

562
00:23:51,250 --> 00:23:52,870
these security settings off or change

563
00:23:52,870 --> 00:23:54,940
them you literally have to go through

564
00:23:54,940 --> 00:23:57,670
the OS setup process at least once to

565
00:23:57,670 --> 00:23:58,900
make an admin

566
00:23:58,900 --> 00:24:00,850
before you can then reboot back into

567
00:24:00,850 --> 00:24:02,470
recovery and go through these

568
00:24:02,470 --> 00:24:04,450
configuration settings and then you can

569
00:24:04,450 --> 00:24:06,070
turn it off and then you can reimage the

570
00:24:06,070 --> 00:24:07,480
Mac again if you really want to try and

571
00:24:07,480 --> 00:24:09,309
go through that crazy rigmarole of all

572
00:24:09,309 --> 00:24:12,730
that stuff but like Apple has thought

573
00:24:12,730 --> 00:24:15,160
about you know this aspect of it and

574
00:24:15,160 --> 00:24:17,260
they've created an extra layer of

575
00:24:17,260 --> 00:24:18,880
security on top of the secure boot

576
00:24:18,880 --> 00:24:22,960
itself that the ap FS crypto users are

577
00:24:22,960 --> 00:24:24,880
the Gateway to being able to change this

578
00:24:24,880 --> 00:24:30,039
and so you're talking about an operating

579
00:24:30,039 --> 00:24:31,929
system that doesn't want you to boot

580
00:24:31,929 --> 00:24:34,510
unknown media changing it to boot

581
00:24:34,510 --> 00:24:37,330
unknown media requires a special type of

582
00:24:37,330 --> 00:24:39,610
security account to do the configuration

583
00:24:39,610 --> 00:24:41,919
change cool okay so let's say I do that

584
00:24:41,919 --> 00:24:43,179
let's say I go through SEPA system

585
00:24:43,179 --> 00:24:45,070
actually said all that stuff up is there

586
00:24:45,070 --> 00:24:47,919
anything else that happens in there so

587
00:24:47,919 --> 00:24:50,169
as it turns out there's another file

588
00:24:50,169 --> 00:24:52,330
that's dropped on disk on these secure

589
00:24:52,330 --> 00:24:54,340
boot devices called bridge version bin

590
00:24:54,340 --> 00:24:56,530
bridge version been actually hexadecimal

591
00:24:56,530 --> 00:24:58,419
e encodes the minimum version of the

592
00:24:58,419 --> 00:25:00,820
operating system on your T to the bridge

593
00:25:00,820 --> 00:25:03,789
OS that is required to successfully boot

594
00:25:03,789 --> 00:25:06,640
this particular mac OS version and so in

595
00:25:06,640 --> 00:25:11,679
here it's the little endian Intel it's a

596
00:25:11,679 --> 00:25:14,140
integer 416 there's two of those in a

597
00:25:14,140 --> 00:25:17,530
row and then 1064 and my machine was

598
00:25:17,530 --> 00:25:19,659
running 1065 so it's running at least a

599
00:25:19,659 --> 00:25:21,280
newer version of bridge OS so cool we

600
00:25:21,280 --> 00:25:23,320
can successfully boot Mac OS if you

601
00:25:23,320 --> 00:25:25,480
actually attempt to modify this

602
00:25:25,480 --> 00:25:29,169
particular file yeah you can bypass like

603
00:25:29,169 --> 00:25:32,409
like the bridge OS security and maybe

604
00:25:32,409 --> 00:25:34,270
boot an older version of it bridge wes

605
00:25:34,270 --> 00:25:36,610
that has it but then later on in Mac OS

606
00:25:36,610 --> 00:25:38,260
itself it still does these additional

607
00:25:38,260 --> 00:25:41,530
checks and says oh oh hold on I know

608
00:25:41,530 --> 00:25:43,090
you're trying to do like boot this

609
00:25:43,090 --> 00:25:44,710
really old Mac OS that's not trustful

610
00:25:44,710 --> 00:25:45,970
anymore or something like that but

611
00:25:45,970 --> 00:25:47,980
bridge OS still needs to be updated so

612
00:25:47,980 --> 00:25:51,760
now you've got security from a what are

613
00:25:51,760 --> 00:25:53,799
we booting standpoint security from who

614
00:25:53,799 --> 00:25:55,240
can make the changes on what we're

615
00:25:55,240 --> 00:25:57,520
booting standpoint and security on the

616
00:25:57,520 --> 00:26:00,010
minimum level of operating system for

617
00:26:00,010 --> 00:26:03,490
the t2 itself and when we look back at

618
00:26:03,490 --> 00:26:05,320
this diagram on here about the

619
00:26:05,320 --> 00:26:07,330
personalization piece of it

620
00:26:07,330 --> 00:26:10,000
t-too actually does personalization just

621
00:26:10,000 --> 00:26:11,590
because like I said it's like iOS right

622
00:26:11,590 --> 00:26:13,720
like so when it installs one of these

623
00:26:13,720 --> 00:26:16,450
new minimum versions of bridge OS it

624
00:26:16,450 --> 00:26:18,700
also has to use that personalization

625
00:26:18,700 --> 00:26:21,010
service to get that installed so if

626
00:26:21,010 --> 00:26:23,050
you're the type of environment that is

627
00:26:23,050 --> 00:26:24,730
like a really lockdown government

628
00:26:24,730 --> 00:26:26,470
environment that says we got a firewall

629
00:26:26,470 --> 00:26:28,870
all that seventeen subnet you know the

630
00:26:28,870 --> 00:26:31,930
Apple 17 which totally ignores all the

631
00:26:31,930 --> 00:26:33,460
Akamai stuff and all that kind stuff but

632
00:26:33,460 --> 00:26:35,050
like if you're in that environment where

633
00:26:35,050 --> 00:26:37,330
you say no our devices won't talk to

634
00:26:37,330 --> 00:26:39,550
APNs won't talk to any kind of stuff I

635
00:26:39,550 --> 00:26:42,280
feel sorry for you because the secure

636
00:26:42,280 --> 00:26:43,750
boot devices are not going to be your

637
00:26:43,750 --> 00:26:45,700
friend even if you went through and

638
00:26:45,700 --> 00:26:47,590
turned off the security every single

639
00:26:47,590 --> 00:26:48,760
security feature will jump through all

640
00:26:48,760 --> 00:26:50,350
those hoops on turning that stuff off

641
00:26:50,350 --> 00:26:52,780
the first time you boot a new version of

642
00:26:52,780 --> 00:26:54,670
Mac OS on those devices that actually

643
00:26:54,670 --> 00:26:56,500
requires a higher version of bridge OS

644
00:26:56,500 --> 00:26:58,720
than you have on your t2 chips they have

645
00:26:58,720 --> 00:27:01,240
to talk to Apple you literally cannot

646
00:27:01,240 --> 00:27:03,130
turn that piece of it off even if you

647
00:27:03,130 --> 00:27:05,560
turn all the other settings off so like

648
00:27:05,560 --> 00:27:08,110
there is some really baked in stuff on

649
00:27:08,110 --> 00:27:09,550
here and I'm sure a lot of you right now

650
00:27:09,550 --> 00:27:12,070
are probably feeling like cool I'm super

651
00:27:12,070 --> 00:27:13,750
glad I'm not on the admin side of things

652
00:27:13,750 --> 00:27:14,980
and I don't have to deal with any of

653
00:27:14,980 --> 00:27:16,540
this stuff but even if you're on the

654
00:27:16,540 --> 00:27:18,160
security side of things I had some

655
00:27:18,160 --> 00:27:21,940
presents for you so yeah we are talking

656
00:27:21,940 --> 00:27:26,560
before about the that external boot

657
00:27:26,560 --> 00:27:28,960
media right so like from a forensics

658
00:27:28,960 --> 00:27:31,180
standpoint you've got probably a dozen

659
00:27:31,180 --> 00:27:33,460
and a half different Linux variations of

660
00:27:33,460 --> 00:27:35,380
like hey I can boot this external media

661
00:27:35,380 --> 00:27:37,750
for these devices and I can capture an

662
00:27:37,750 --> 00:27:39,910
ever modified version of the filesystem

663
00:27:39,910 --> 00:27:42,100
off of these devices well first off

664
00:27:42,100 --> 00:27:44,620
you've got to go back through that part

665
00:27:44,620 --> 00:27:46,660
on there for actually enabling the

666
00:27:46,660 --> 00:27:48,490
booting from external media in the first

667
00:27:48,490 --> 00:27:50,260
place and you also have to turn off the

668
00:27:50,260 --> 00:27:52,390
secure boot security for the OS itself

669
00:27:52,390 --> 00:27:55,480
because secure boot while it works with

670
00:27:55,480 --> 00:27:57,940
Mac OS and Windows it doesn't actually

671
00:27:57,940 --> 00:28:01,300
allow you to boot Linux at this point so

672
00:28:01,300 --> 00:28:03,580
you'll have to turn that off oh and then

673
00:28:03,580 --> 00:28:05,440
to turn it off you need one of those

674
00:28:05,440 --> 00:28:07,510
secure token admin user accounts that we

675
00:28:07,510 --> 00:28:09,220
were talking about so the cool thing

676
00:28:09,220 --> 00:28:11,440
about those is that you can't make one

677
00:28:11,440 --> 00:28:14,500
unless you know one like so in previous

678
00:28:14,500 --> 00:28:17,050
operating system versions with file

679
00:28:17,050 --> 00:28:20,820
vault under HFS+ the file vault users

680
00:28:20,820 --> 00:28:23,130
literally route could make a new file

681
00:28:23,130 --> 00:28:26,100
vault user and the equivalent has been

682
00:28:26,100 --> 00:28:28,590
drawn between File Vault HFS users and

683
00:28:28,590 --> 00:28:30,330
secure token users but really it's a

684
00:28:30,330 --> 00:28:32,850
night and day difference on a PFS a

685
00:28:32,850 --> 00:28:34,830
secure token users a crypto user

686
00:28:34,830 --> 00:28:36,750
cryptographically enabled user on your

687
00:28:36,750 --> 00:28:38,909
account and it has access to these new

688
00:28:38,909 --> 00:28:41,730
api s for doing i can access this file

689
00:28:41,730 --> 00:28:43,049
when this machines locked or unlocked

690
00:28:43,049 --> 00:28:46,350
and like at the EPF s level the way

691
00:28:46,350 --> 00:28:49,830
apple has designed it once one secure

692
00:28:49,830 --> 00:28:53,129
token admin exists all additional secure

693
00:28:53,129 --> 00:28:55,289
token admins must be created with the

694
00:28:55,289 --> 00:28:59,039
password of the first one and the way

695
00:28:59,039 --> 00:29:01,169
that most of the time that secure token

696
00:29:01,169 --> 00:29:03,000
admin gets created is the first person

697
00:29:03,000 --> 00:29:05,070
to log in to the setup assistant to the

698
00:29:05,070 --> 00:29:07,889
Mac basically so chances are if you

699
00:29:07,889 --> 00:29:09,929
haven't checked out your fleet a bunch

700
00:29:09,929 --> 00:29:11,460
of your users are the security token

701
00:29:11,460 --> 00:29:13,740
admins on their devices but you don't

702
00:29:13,740 --> 00:29:15,330
have any utility accounts that you

703
00:29:15,330 --> 00:29:16,980
actually know the password of any of

704
00:29:16,980 --> 00:29:18,659
those secure token users that you could

705
00:29:18,659 --> 00:29:21,029
actually grab one of these Macs and then

706
00:29:21,029 --> 00:29:22,830
change that configuration setting

707
00:29:22,830 --> 00:29:25,200
because secure token management is not

708
00:29:25,200 --> 00:29:27,029
really a thing that's available in Mac

709
00:29:27,029 --> 00:29:29,639
OS right now it's literally gotta know

710
00:29:29,639 --> 00:29:32,309
the the actual password if you attempt

711
00:29:32,309 --> 00:29:34,950
to use root to run the password command

712
00:29:34,950 --> 00:29:36,629
to change the password of one of these

713
00:29:36,629 --> 00:29:38,940
things the secure token password is

714
00:29:38,940 --> 00:29:42,240
actually stored at the a PFS level not

715
00:29:42,240 --> 00:29:45,059
the open directory level so root not

716
00:29:45,059 --> 00:29:47,070
having access to not being a secure

717
00:29:47,070 --> 00:29:48,929
token user if you change the password

718
00:29:48,929 --> 00:29:50,759
you've only changed the open directory

719
00:29:50,759 --> 00:29:53,519
half of the equation the secure token

720
00:29:53,519 --> 00:29:55,080
password is still the previous password

721
00:29:55,080 --> 00:29:57,179
that you didn't know so you can't

722
00:29:57,179 --> 00:29:59,789
actually brute your own way into having

723
00:29:59,789 --> 00:30:01,559
a secure token user on any of these

724
00:30:01,559 --> 00:30:04,080
devices so from a forensics standpoint

725
00:30:04,080 --> 00:30:06,480
these devices are horrible to get into

726
00:30:06,480 --> 00:30:10,259
so I would really recommend reading for

727
00:30:10,259 --> 00:30:12,809
instance additional stuff on here like

728
00:30:12,809 --> 00:30:16,559
duo had a big write-up about this secure

729
00:30:16,559 --> 00:30:20,039
storage as it turns out that part where

730
00:30:20,039 --> 00:30:24,179
the storage is routed into the t2 it

731
00:30:24,179 --> 00:30:27,509
allowed Apple to do a new trick which is

732
00:30:27,509 --> 00:30:29,940
that instantaneous encryption because

733
00:30:29,940 --> 00:30:32,530
the volume at the block level starts out

734
00:30:32,530 --> 00:30:36,310
cryptid with an affable key so now we're

735
00:30:36,310 --> 00:30:40,090
talking about okay cool I have a let's

736
00:30:40,090 --> 00:30:42,670
say I don't have a secure token account

737
00:30:42,670 --> 00:30:44,680
on this device I can't get in and boot

738
00:30:44,680 --> 00:30:46,510
stuff I could still go into target disk

739
00:30:46,510 --> 00:30:48,040
mode right I can go into target this

740
00:30:48,040 --> 00:30:50,200
mode and I can just bring the bra volume

741
00:30:50,200 --> 00:30:52,450
of this device up on here and I can just

742
00:30:52,450 --> 00:30:54,850
DD the bytes out and we can you know try

743
00:30:54,850 --> 00:30:56,470
to brute force the password or something

744
00:30:56,470 --> 00:30:59,920
like that it's a nice idea on previous

745
00:30:59,920 --> 00:31:01,690
generations of Mac that actually worked

746
00:31:01,690 --> 00:31:04,270
so on the new generation of Mac the way

747
00:31:04,270 --> 00:31:05,380
that it works is some of the

748
00:31:05,380 --> 00:31:07,930
cryptographic primitives for that block

749
00:31:07,930 --> 00:31:10,450
level encryption are actually stored and

750
00:31:10,450 --> 00:31:12,250
non extractable in the secure Enclave

751
00:31:12,250 --> 00:31:15,670
itself that means that the volume unlock

752
00:31:15,670 --> 00:31:19,300
key for the for the device for the

753
00:31:19,300 --> 00:31:21,910
contents of the device is entangled with

754
00:31:21,910 --> 00:31:23,620
these secrets that are stored in the

755
00:31:23,620 --> 00:31:25,780
secure Enclave and not actually

756
00:31:25,780 --> 00:31:27,550
extractable in any way shape or form

757
00:31:27,550 --> 00:31:30,970
other than attempting to just pass it a

758
00:31:30,970 --> 00:31:33,820
password directly and and an access the

759
00:31:33,820 --> 00:31:37,510
volume that means that we're before on

760
00:31:37,510 --> 00:31:40,450
non secure boot devices if you had an AP

761
00:31:40,450 --> 00:31:43,690
FS volume you could grab a DD copy of it

762
00:31:43,690 --> 00:31:46,240
and brute force offline the password of

763
00:31:46,240 --> 00:31:48,220
this volume dictionary attack you've

764
00:31:48,220 --> 00:31:50,020
just passed plaintext passwords to it

765
00:31:50,020 --> 00:31:51,400
and just attempt to actually do it on

766
00:31:51,400 --> 00:31:54,970
these new devices part of the key is a

767
00:31:54,970 --> 00:31:57,550
secret that you don't get and it changes

768
00:31:57,550 --> 00:31:59,050
the password in such a way that if you

769
00:31:59,050 --> 00:32:00,910
can't do a raw dictionary attack you

770
00:32:00,910 --> 00:32:02,980
can't do a dictionary attack anymore you

771
00:32:02,980 --> 00:32:05,890
can only do raw key attacks so we're

772
00:32:05,890 --> 00:32:07,420
talking about something like you know

773
00:32:07,420 --> 00:32:10,120
end of the universe type scenarios in

774
00:32:10,120 --> 00:32:11,650
terms of attempting to brute-force these

775
00:32:11,650 --> 00:32:15,130
volumes so cool so we can't get in with

776
00:32:15,130 --> 00:32:16,960
secure token because our users have it

777
00:32:16,960 --> 00:32:18,730
and we don't know the users password and

778
00:32:18,730 --> 00:32:22,180
we can't get in because we can't offline

779
00:32:22,180 --> 00:32:24,100
brute-force the volumes because the key

780
00:32:24,100 --> 00:32:26,170
is partially stored in an on and crap

781
00:32:26,170 --> 00:32:29,920
non extractable Hardware Enclave on

782
00:32:29,920 --> 00:32:32,800
there even but you're like cool alright

783
00:32:32,800 --> 00:32:34,360
so we'll use a secure Enclave we'll just

784
00:32:34,360 --> 00:32:35,560
attempt to just you know run Disk

785
00:32:35,560 --> 00:32:37,350
Utility

786
00:32:37,350 --> 00:32:39,610
there and just attempt to move or set

787
00:32:39,610 --> 00:32:42,020
funny new note in that

788
00:32:42,020 --> 00:32:45,560
t-too white paper so not only does this

789
00:32:45,560 --> 00:32:48,830
secure Enclave enforce hardware delays

790
00:32:48,830 --> 00:32:52,300
much like you'll see on iOS device but

791
00:32:52,300 --> 00:32:55,550
it actually has maximum attempts thirty

792
00:32:55,550 --> 00:32:58,550
attempts per unlocked token type that is

793
00:32:58,550 --> 00:33:04,700
on the secure boot volumes 30 types 30

794
00:33:04,700 --> 00:33:06,770
attempts per type with a maximum total

795
00:33:06,770 --> 00:33:08,960
of 90 the most important part is this

796
00:33:08,960 --> 00:33:10,760
last part once these attempts are

797
00:33:10,760 --> 00:33:12,350
exhausted the secure Enclave will no

798
00:33:12,350 --> 00:33:14,030
longer process any requests to decrypt

799
00:33:14,030 --> 00:33:15,800
the volume or verify the password so

800
00:33:15,800 --> 00:33:18,410
that's all you get folks 90 attempts to

801
00:33:18,410 --> 00:33:19,700
do a dictionary attack against the

802
00:33:19,700 --> 00:33:21,410
volume I hope your dictionary is awesome

803
00:33:21,410 --> 00:33:24,710
because because ninety is not a whole

804
00:33:24,710 --> 00:33:26,240
lot

805
00:33:26,240 --> 00:33:30,020
so I mean you got to realize you know

806
00:33:30,020 --> 00:33:35,330
Apple is going down the route of

807
00:33:35,330 --> 00:33:38,300
attempting to bring the security model

808
00:33:38,300 --> 00:33:40,640
that they have on iOS devices to Mac

809
00:33:40,640 --> 00:33:44,210
devices they are cribbing from it

810
00:33:44,210 --> 00:33:45,410
stealing from it whatever you want to

811
00:33:45,410 --> 00:33:48,200
call it I don't care it's good Mac has

812
00:33:48,200 --> 00:33:50,330
needed this for a long time but the side

813
00:33:50,330 --> 00:33:52,310
effect of this is that this stuff has

814
00:33:52,310 --> 00:33:54,110
gotten out of the gate and I don't think

815
00:33:54,110 --> 00:33:55,670
a lot of people realize that it's out

816
00:33:55,670 --> 00:33:59,630
there right now and from a like a fleet

817
00:33:59,630 --> 00:34:03,020
standpoint ours are less than 10% of our

818
00:34:03,020 --> 00:34:04,340
fleet right now a secure boot devices

819
00:34:04,340 --> 00:34:06,590
but still they're out there like there's

820
00:34:06,590 --> 00:34:09,320
a lot of them and if you've got these

821
00:34:09,320 --> 00:34:10,969
practices that you've done from a

822
00:34:10,969 --> 00:34:12,679
security standpoint in your environment

823
00:34:12,679 --> 00:34:16,360
where you're like hey we're gonna have a

824
00:34:16,360 --> 00:34:21,110
simulation you know for employee

825
00:34:21,110 --> 00:34:22,940
potential data loss scenario we need to

826
00:34:22,940 --> 00:34:24,080
grab their device when you find out

827
00:34:24,080 --> 00:34:24,980
what's on their device and stuff like

828
00:34:24,980 --> 00:34:26,750
that if you haven't tested this against

829
00:34:26,750 --> 00:34:28,489
the secure boot device you may need to

830
00:34:28,489 --> 00:34:30,110
reevaluate the processes that you have

831
00:34:30,110 --> 00:34:32,780
because you may not realize how alien

832
00:34:32,780 --> 00:34:34,969
these things are under the hood compared

833
00:34:34,969 --> 00:34:36,320
to all the other Macs that you've seen

834
00:34:36,320 --> 00:34:40,250
within the last few years but like I

835
00:34:40,250 --> 00:34:42,380
said it's not the end of the world you

836
00:34:42,380 --> 00:34:45,110
just need to talk to your admins find

837
00:34:45,110 --> 00:34:47,659
out hey do you guys know anything about

838
00:34:47,659 --> 00:34:51,290
the secure token stuff and they'll say

839
00:34:51,290 --> 00:34:53,659
let's buy a couple beers and I'll tell

840
00:34:53,659 --> 00:34:54,699
you a couple sad story

841
00:34:54,699 --> 00:34:58,300
and we'll talk about it or even more

842
00:34:58,300 --> 00:35:00,010
worrying you might run in someone's like

843
00:35:00,010 --> 00:35:01,980
what I've never heard of that but like

844
00:35:01,980 --> 00:35:04,450
talk to the people who are managing your

845
00:35:04,450 --> 00:35:08,500
fleet find out get one free to play with

846
00:35:08,500 --> 00:35:13,570
yourself double-check your escrow of

847
00:35:13,570 --> 00:35:16,930
your recovery keys so the stuff that I

848
00:35:16,930 --> 00:35:20,140
showed on there from a reconfiguration

849
00:35:20,140 --> 00:35:22,690
standpoint of the secure boot device if

850
00:35:22,690 --> 00:35:24,250
you wanted to go in a secure boot

851
00:35:24,250 --> 00:35:26,980
utility right now the prior personal

852
00:35:26,980 --> 00:35:29,170
recovery key in the IR K I don't believe

853
00:35:29,170 --> 00:35:30,670
can actually be used to unlock and

854
00:35:30,670 --> 00:35:31,660
change those security boot

855
00:35:31,660 --> 00:35:34,359
configurations but you can at least use

856
00:35:34,359 --> 00:35:37,030
them for doing target disk mode attach

857
00:35:37,030 --> 00:35:39,010
of the device and gain access to the

858
00:35:39,010 --> 00:35:40,420
data that's in at least inside of the

859
00:35:40,420 --> 00:35:42,609
device so you do have that so double

860
00:35:42,609 --> 00:35:44,050
check to make sure that this is healthy

861
00:35:44,050 --> 00:35:45,780
in your environment that you're actually

862
00:35:45,780 --> 00:35:51,390
backing all this stuff up and then also

863
00:35:51,660 --> 00:35:56,170
the I would recommend looking at are you

864
00:35:56,170 --> 00:35:58,420
doing firmware password management on

865
00:35:58,420 --> 00:36:00,730
your devices so like secure boot is an

866
00:36:00,730 --> 00:36:03,190
awesome step forward from a security

867
00:36:03,190 --> 00:36:05,170
standpoint on the Mac side of things I

868
00:36:05,170 --> 00:36:07,410
was just thinking about like the Windows

869
00:36:07,410 --> 00:36:11,020
UEFI secure boot model when that stuff

870
00:36:11,020 --> 00:36:14,140
came out it's still to this day you'll

871
00:36:14,140 --> 00:36:16,000
see om vendors that are like oh yeah

872
00:36:16,000 --> 00:36:17,680
secure boot works great with Windows 8

873
00:36:17,680 --> 00:36:19,180
and later it works great with Windows 10

874
00:36:19,180 --> 00:36:21,069
whatever on here oh you actually want to

875
00:36:21,069 --> 00:36:22,359
update the firmware on your device go

876
00:36:22,359 --> 00:36:23,980
ahead and turn secure boot off and then

877
00:36:23,980 --> 00:36:25,710
run the CD that we sent you like

878
00:36:25,710 --> 00:36:28,660
literally from a their security story

879
00:36:28,660 --> 00:36:30,220
that they have on the window side of

880
00:36:30,220 --> 00:36:33,520
things was very not well thought out

881
00:36:33,520 --> 00:36:35,890
from how do we maintain update manage

882
00:36:35,890 --> 00:36:37,359
this all this kind of stuff so it was

883
00:36:37,359 --> 00:36:39,310
very visible when it came out a lot of

884
00:36:39,310 --> 00:36:41,349
tools out there told you oh yeah just

885
00:36:41,349 --> 00:36:43,300
turned this stuff off like I remember

886
00:36:43,300 --> 00:36:44,500
when it first came out on the windows

887
00:36:44,500 --> 00:36:45,940
side of things literally everybody was

888
00:36:45,940 --> 00:36:47,109
saying just turn this off and you'll be

889
00:36:47,109 --> 00:36:51,160
happy again but the Mac side of it they

890
00:36:51,160 --> 00:36:56,260
did such a good job at hiding in plain

891
00:36:56,260 --> 00:36:58,420
sight honestly that I don't think a lot

892
00:36:58,420 --> 00:37:00,130
of us other than maybe the admin

893
00:37:00,130 --> 00:37:02,710
community have honestly noticed how

894
00:37:02,710 --> 00:37:04,610
different these devices

895
00:37:04,610 --> 00:37:06,770
but what I was saying about firmware

896
00:37:06,770 --> 00:37:09,440
password stuff on here for all the

897
00:37:09,440 --> 00:37:13,400
security that secure boot provides if

898
00:37:13,400 --> 00:37:15,230
you have access to the IR care of the

899
00:37:15,230 --> 00:37:17,270
PRK you could do target discommode onto

900
00:37:17,270 --> 00:37:19,370
the device and pull a copy of the data

901
00:37:19,370 --> 00:37:21,710
off of the device if you have the

902
00:37:21,710 --> 00:37:24,380
password of a user because you fished it

903
00:37:24,380 --> 00:37:26,060
from them or something like that you can

904
00:37:26,060 --> 00:37:27,890
go in and you can reconfigure the secure

905
00:37:27,890 --> 00:37:30,080
boot levels on the device so I would

906
00:37:30,080 --> 00:37:32,420
recommend potentially looking at doing

907
00:37:32,420 --> 00:37:34,730
firmware password management for your

908
00:37:34,730 --> 00:37:37,310
fleet and configuring one because with a

909
00:37:37,310 --> 00:37:39,620
firmware password in place attempting to

910
00:37:39,620 --> 00:37:42,710
get into recovery will actually stop for

911
00:37:42,710 --> 00:37:45,290
that password before it gets to this

912
00:37:45,290 --> 00:37:46,730
side of thing and that password doesn't

913
00:37:46,730 --> 00:37:48,140
need to be a password that your average

914
00:37:48,140 --> 00:37:51,130
end-user would actually need to know so

915
00:37:51,130 --> 00:37:53,630
there's still additional layers of

916
00:37:53,630 --> 00:37:56,570
security I feel that Apple the choice of

917
00:37:56,570 --> 00:38:00,130
secure token as the benchmark for

918
00:38:00,130 --> 00:38:02,180
reconfiguring the secure boot level I

919
00:38:02,180 --> 00:38:05,930
think was that's what they had as the

920
00:38:05,930 --> 00:38:07,820
best option available at the time I

921
00:38:07,820 --> 00:38:09,980
wouldn't be surprised to see it move

922
00:38:09,980 --> 00:38:12,080
more into the firmware password side of

923
00:38:12,080 --> 00:38:14,210
things so if Apple does start making

924
00:38:14,210 --> 00:38:16,430
that migration where it's not based in a

925
00:38:16,430 --> 00:38:18,620
filesystem level record because you can

926
00:38:18,620 --> 00:38:20,840
still go in and wipe the Mac in its

927
00:38:20,840 --> 00:38:23,420
entirety and now the security token user

928
00:38:23,420 --> 00:38:25,340
is gone I'll make a new security token

929
00:38:25,340 --> 00:38:27,680
user and now I can create a new secure

930
00:38:27,680 --> 00:38:29,090
boot configuration for this device so

931
00:38:29,090 --> 00:38:30,440
you could still get into it you just

932
00:38:30,440 --> 00:38:32,120
have to do basically data loss and over

933
00:38:32,120 --> 00:38:35,210
it actually happen so I just get this

934
00:38:35,210 --> 00:38:38,360
feeling that potentially you may want to

935
00:38:38,360 --> 00:38:40,340
look at whether you have firmware

936
00:38:40,340 --> 00:38:42,290
password management in your environment

937
00:38:42,290 --> 00:38:45,260
because that may be like the next stage

938
00:38:45,260 --> 00:38:47,600
for control of configuration on this

939
00:38:47,600 --> 00:38:50,350
stuff and then the other aspect on there

940
00:38:50,350 --> 00:38:53,270
the a lot of people say it's like

941
00:38:53,270 --> 00:38:54,230
yelling into a black hole

942
00:38:54,230 --> 00:38:57,830
but do tests and foul radars in regards

943
00:38:57,830 --> 00:39:01,540
to the management of secure token users

944
00:39:01,540 --> 00:39:03,830
potentially even the management of

945
00:39:03,830 --> 00:39:05,570
secure boot itself we were talking

946
00:39:05,570 --> 00:39:08,060
earlier a little bit here about MDM with

947
00:39:08,060 --> 00:39:10,610
DEP and user approved MDM Apple has made

948
00:39:10,610 --> 00:39:12,140
a lot of strides from an enterprise

949
00:39:12,140 --> 00:39:13,880
management standpoint and providing

950
00:39:13,880 --> 00:39:14,390
payload

951
00:39:14,390 --> 00:39:16,039
that can do some pretty deep level

952
00:39:16,039 --> 00:39:18,519
security configurations via MD I mean

953
00:39:18,519 --> 00:39:23,809
via MDM and nothing exists right now for

954
00:39:23,809 --> 00:39:25,940
doing reconfigurations related to secure

955
00:39:25,940 --> 00:39:28,549
boot at all via MDM maybe that would be

956
00:39:28,549 --> 00:39:30,289
cool I don't know you could do firmware

957
00:39:30,289 --> 00:39:31,579
password management with it but you

958
00:39:31,579 --> 00:39:34,099
can't do secure boot settings or

959
00:39:34,099 --> 00:39:36,829
anything like that so I'd recommend

960
00:39:36,829 --> 00:39:39,289
checking out the automation that you

961
00:39:39,289 --> 00:39:41,869
have with to talk to your security team

962
00:39:41,869 --> 00:39:45,289
talk to your admins you need to

963
00:39:45,289 --> 00:39:47,299
understand these machines better because

964
00:39:47,299 --> 00:39:48,980
they're already out here now and within

965
00:39:48,980 --> 00:39:50,809
a year to every Mac it's going to be

966
00:39:50,809 --> 00:39:52,039
like this and there's not going to be a

967
00:39:52,039 --> 00:39:54,410
chance for you to avoid it anymore but

968
00:39:54,410 --> 00:39:59,210
yeah don't panic it's we got this we can

969
00:39:59,210 --> 00:40:00,680
figure this out you just need to be

970
00:40:00,680 --> 00:40:04,010
informed and hopefully this has been

971
00:40:04,010 --> 00:40:06,470
eye-opening for some of you and thank

972
00:40:06,470 --> 00:40:07,630
you

973
00:40:07,630 --> 00:40:11,019
any questions

974
00:40:17,070 --> 00:40:33,030
oh yeah so all you lose access to is the

975
00:40:33,030 --> 00:40:34,890
ability to unlock that particular volume

976
00:40:34,890 --> 00:40:38,420
so you've got data loss that's happened

977
00:40:38,420 --> 00:40:42,540
but it's not a brick you can still wipe

978
00:40:42,540 --> 00:40:44,190
the device or create a secondary volume

979
00:40:44,190 --> 00:40:45,150
or something like that it's just that

980
00:40:45,150 --> 00:40:47,310
literally the ability to access the

981
00:40:47,310 --> 00:40:48,900
volume unlock key for that particular

982
00:40:48,900 --> 00:40:53,960
volume is gone so yeah hard limit

983
00:41:01,740 --> 00:41:04,740
mmm

984
00:41:06,210 --> 00:41:11,770
mm-hmm yeah so that's a thing that can

985
00:41:11,770 --> 00:41:14,110
happen right now in fact that I believe

986
00:41:14,110 --> 00:41:18,100
in one of the 1014 betas huh oh sorry

987
00:41:18,100 --> 00:41:21,070
for the people didn't hear he ran into a

988
00:41:21,070 --> 00:41:22,810
scenario where he had no security token

989
00:41:22,810 --> 00:41:25,390
users on his device he expected that the

990
00:41:25,390 --> 00:41:28,150
MDM created user at the setup assistant

991
00:41:28,150 --> 00:41:29,320
going through the login would actually

992
00:41:29,320 --> 00:41:30,840
get a secured token and it didn't happen

993
00:41:30,840 --> 00:41:33,760
yeah that can happen so the part where I

994
00:41:33,760 --> 00:41:35,110
was talking about testing and filing

995
00:41:35,110 --> 00:41:38,140
radars that's definitely related to that

996
00:41:38,140 --> 00:41:40,630
so Apple has gotten it to they've

997
00:41:40,630 --> 00:41:41,800
married

998
00:41:41,800 --> 00:41:44,260
secure token to the security status for

999
00:41:44,260 --> 00:41:45,310
the configuration of these devices if

1000
00:41:45,310 --> 00:41:46,660
you needed to get back into the secure

1001
00:41:46,660 --> 00:41:48,040
boot utility you need to have security

1002
00:41:48,040 --> 00:41:50,290
token user if you needed to enable File

1003
00:41:50,290 --> 00:41:52,840
Vault on the device you yeah you'll find

1004
00:41:52,840 --> 00:41:54,480
it if you're in that particular scenario

1005
00:41:54,480 --> 00:41:56,890
you have the potential to go click of

1006
00:41:56,890 --> 00:41:58,570
that turn File Vault button on and it

1007
00:41:58,570 --> 00:41:59,950
will give you error messages even though

1008
00:41:59,950 --> 00:42:01,480
you're an admin because there are no

1009
00:42:01,480 --> 00:42:04,360
secure token users on the device the

1010
00:42:04,360 --> 00:42:06,760
yeah there's a lot of bugs surrounding

1011
00:42:06,760 --> 00:42:09,550
that with the initial versions of 10 13

1012
00:42:09,550 --> 00:42:12,010
came out with security token users there

1013
00:42:12,010 --> 00:42:13,510
are a lot of crazy scenarios you could

1014
00:42:13,510 --> 00:42:15,190
get into where you would end up having

1015
00:42:15,190 --> 00:42:17,770
none or accidentally deleted the last

1016
00:42:17,770 --> 00:42:19,570
secure token user that you had on your

1017
00:42:19,570 --> 00:42:22,690
device which is super not good Apple has

1018
00:42:22,690 --> 00:42:24,820
since put a lot of checks into a lot of

1019
00:42:24,820 --> 00:42:26,650
their tools and API such that if you

1020
00:42:26,650 --> 00:42:28,420
attempt to delete the last secure token

1021
00:42:28,420 --> 00:42:29,890
user it'll actually yell at you and say

1022
00:42:29,890 --> 00:42:32,560
you can't do that anymore but the act of

1023
00:42:32,560 --> 00:42:35,230
the first secure token user failing to

1024
00:42:35,230 --> 00:42:36,760
be created in the first place especially

1025
00:42:36,760 --> 00:42:39,220
in regards to MDM yeah there's still a

1026
00:42:39,220 --> 00:42:44,890
lot of bugs surrounding that yeah so in

1027
00:42:44,890 --> 00:42:47,380
that particular situation we've noticed

1028
00:42:47,380 --> 00:42:50,020
that one of the workarounds or 10-14

1029
00:42:50,020 --> 00:42:52,390
right now is that you can actually if

1030
00:42:52,390 --> 00:42:55,330
you're using an institutional recovery

1031
00:42:55,330 --> 00:42:57,820
key and use the FTE setup command on the

1032
00:42:57,820 --> 00:42:59,770
device the act of passing in the

1033
00:42:59,770 --> 00:43:01,810
institutional recovery key will go and

1034
00:43:01,810 --> 00:43:04,210
actually bootstrap the first admin into

1035
00:43:04,210 --> 00:43:06,040
a secure token like it'll create the

1036
00:43:06,040 --> 00:43:07,900
first secure token user but from an

1037
00:43:07,900 --> 00:43:09,760
automated standpoint I don't really have

1038
00:43:09,760 --> 00:43:11,920
a good solution there for you I think

1039
00:43:11,920 --> 00:43:13,690
some other people noticed if you go into

1040
00:43:13,690 --> 00:43:16,030
file vault and go click enable

1041
00:43:16,030 --> 00:43:18,670
on the device in some scenarios it'll

1042
00:43:18,670 --> 00:43:22,530
also bootstrap the first user on their

1043
00:43:22,530 --> 00:43:24,310
no no okay

1044
00:43:24,310 --> 00:43:26,859
so secure token users you can only

1045
00:43:26,859 --> 00:43:29,109
create the second and later security

1046
00:43:29,109 --> 00:43:30,580
token users when you have the first one

1047
00:43:30,580 --> 00:43:32,260
the first one is a special instance

1048
00:43:32,260 --> 00:43:35,349
though there is scenarios where when you

1049
00:43:35,349 --> 00:43:37,060
start with no secure token users which

1050
00:43:37,060 --> 00:43:39,490
is the default for a vanilla Mac OS that

1051
00:43:39,490 --> 00:43:41,140
the first one has to get bootstraps

1052
00:43:41,140 --> 00:43:43,119
somehow and it basically bootstraps

1053
00:43:43,119 --> 00:43:45,010
itself and unfortunately there's not a

1054
00:43:45,010 --> 00:43:46,720
little documentation about all the

1055
00:43:46,720 --> 00:43:48,580
avenues by which you can do that but

1056
00:43:48,580 --> 00:43:51,040
they do exist within the OS and the one

1057
00:43:51,040 --> 00:43:52,990
where it's coming in through MDM with

1058
00:43:52,990 --> 00:43:55,150
user creation that one's been really

1059
00:43:55,150 --> 00:43:57,250
wonky as of late and so I would

1060
00:43:57,250 --> 00:43:59,140
definitely like file radars and what OS

1061
00:43:59,140 --> 00:44:00,190
versions you notice that that's

1062
00:44:00,190 --> 00:44:01,690
happening to you and and you should get

1063
00:44:01,690 --> 00:44:03,430
responses back saying that we understand

1064
00:44:03,430 --> 00:44:04,510
this who are working on it and that kind

1065
00:44:04,510 --> 00:44:25,930
stuff oh yeah so there hmm so like which

1066
00:44:25,930 --> 00:44:31,930
API C are you talking about managing the

1067
00:44:31,930 --> 00:44:36,640
authorized users so from an API

1068
00:44:36,640 --> 00:44:39,070
standpoint mmm yeah

1069
00:44:39,070 --> 00:44:41,859
so it used to be that there was one API

1070
00:44:41,859 --> 00:44:45,190
that existed in ten twelve which was the

1071
00:44:45,190 --> 00:44:48,250
one which allowed root to manage your

1072
00:44:48,250 --> 00:44:50,980
file vote users and basically add remove

1073
00:44:50,980 --> 00:44:52,900
create all that kind of stuff the API is

1074
00:44:52,900 --> 00:44:58,089
gone so all current API is for secure

1075
00:44:58,089 --> 00:45:01,119
token management our API is that require

1076
00:45:01,119 --> 00:45:03,310
the plain text copy of a password of an

1077
00:45:03,310 --> 00:45:06,640
existing security token user so yeah

1078
00:45:06,640 --> 00:45:08,859
there are other api's but the classic

1079
00:45:08,859 --> 00:45:11,230
ones are kind of gone so yeah it's

1080
00:45:11,230 --> 00:45:13,410
different

1081
00:45:28,309 --> 00:45:32,329
I mean it's another it's another change

1082
00:45:32,329 --> 00:45:35,329
right like the the firmware that was

1083
00:45:35,329 --> 00:45:38,180
handed over SPI to the device is still

1084
00:45:38,180 --> 00:45:41,329
Apple's efi implementation it is still

1085
00:45:41,329 --> 00:45:43,730
that as far as the intel side of the

1086
00:45:43,730 --> 00:45:45,170
board goes it looks and feels like the

1087
00:45:45,170 --> 00:45:47,030
prior generation of Mac's it's still

1088
00:45:47,030 --> 00:45:49,700
apple efi it's just the way that it was

1089
00:45:49,700 --> 00:45:51,470
handed and where it gets it from that's

1090
00:45:51,470 --> 00:45:53,900
like it's it's transparent to the Intel

1091
00:45:53,900 --> 00:45:55,730
processor almost it doesn't understand

1092
00:45:55,730 --> 00:45:58,970
so from a Content standpoint it doesn't

1093
00:45:58,970 --> 00:46:00,440
seem honestly that much different

1094
00:46:00,440 --> 00:46:02,660
firmware at the firmware level but the

1095
00:46:02,660 --> 00:46:04,369
mechanism behind the scenes papa master

1096
00:46:04,369 --> 00:46:05,359
and all that kind of stuff yeah that's

1097
00:46:05,359 --> 00:46:08,630
completely different but it also means

1098
00:46:08,630 --> 00:46:11,210
that some of the firmware password

1099
00:46:11,210 --> 00:46:13,970
bypasses that exists right now so it

1100
00:46:13,970 --> 00:46:15,380
used to be you could pop a memory chip

1101
00:46:15,380 --> 00:46:18,170
Ram chip off the devices and clear the

1102
00:46:18,170 --> 00:46:19,609
firmware password on the devices and

1103
00:46:19,609 --> 00:46:22,880
then like 2010 or 2011 and later they

1104
00:46:22,880 --> 00:46:24,710
made it where it was actually the

1105
00:46:24,710 --> 00:46:26,660
password was stored in firmware itself

1106
00:46:26,660 --> 00:46:29,359
well those SPI flash attacks you can

1107
00:46:29,359 --> 00:46:30,980
clear that password right you just put

1108
00:46:30,980 --> 00:46:32,660
stock vanilla firmware back onto the

1109
00:46:32,660 --> 00:46:34,579
device and the password is gone well

1110
00:46:34,579 --> 00:46:36,680
again that doesn't work now on the t3

1111
00:46:36,680 --> 00:46:38,690
devices so you really do have to do that

1112
00:46:38,690 --> 00:46:40,760
Apple GSX ticket or whatever where you

1113
00:46:40,760 --> 00:46:42,530
give them the funky code that you get it

1114
00:46:42,530 --> 00:46:44,030
from pushing the funky keys and stuff

1115
00:46:44,030 --> 00:46:45,849
like that to unlock the device now so

1116
00:46:45,849 --> 00:46:50,290
yeah there are definite differences

1117
00:46:52,490 --> 00:46:59,960
what's Hamilton Apple next yeah

1118
00:46:59,960 --> 00:47:03,349
I honestly well first thing all devices

1119
00:47:03,349 --> 00:47:05,180
will be secure boot

1120
00:47:05,180 --> 00:47:07,880
I think secure boot is still in

1121
00:47:07,880 --> 00:47:11,140
fluctuation is it's changing its it's a

1122
00:47:11,140 --> 00:47:14,300
it's a fluid standard and they're

1123
00:47:14,300 --> 00:47:16,099
working on improving it like when we

1124
00:47:16,099 --> 00:47:17,839
first saw these secure boot devices came

1125
00:47:17,839 --> 00:47:19,760
out you could get into the terminal on

1126
00:47:19,760 --> 00:47:22,550
these devices in recovery mode and like

1127
00:47:22,550 --> 00:47:24,800
run bless and like Reeb less a different

1128
00:47:24,800 --> 00:47:26,240
volume and now that you're pointing to a

1129
00:47:26,240 --> 00:47:27,890
different volume the secure token users

1130
00:47:27,890 --> 00:47:29,089
are different because it's the ones on

1131
00:47:29,089 --> 00:47:30,770
these other volumes then they put that

1132
00:47:30,770 --> 00:47:32,359
behind the password protection so that's

1133
00:47:32,359 --> 00:47:35,030
gone so like they know like they've they

1134
00:47:35,030 --> 00:47:36,200
know they're not perfect on it and

1135
00:47:36,200 --> 00:47:37,520
they're making it better and it's gonna

1136
00:47:37,520 --> 00:47:39,920
change and I just expect it to be like

1137
00:47:39,920 --> 00:47:41,660
this ratcheting process where it's just

1138
00:47:41,660 --> 00:47:43,099
gonna get like it's cool that we have

1139
00:47:43,099 --> 00:47:44,480
these dialogues for this configuration

1140
00:47:44,480 --> 00:47:46,099
stuff right now but I'm thinking it's

1141
00:47:46,099 --> 00:47:47,510
probably going to be probably a very

1142
00:47:47,510 --> 00:47:49,040
short window that we have this kind of

1143
00:47:49,040 --> 00:47:52,359
stuff so like get used to the concept of

1144
00:47:52,359 --> 00:47:55,730
data protection being the level of an

1145
00:47:55,730 --> 00:47:57,770
iOS device in terms of data protection

1146
00:47:57,770 --> 00:48:00,500
as the new standard on Mac and and if

1147
00:48:00,500 --> 00:48:02,480
you aim at that puck that's you're

1148
00:48:02,480 --> 00:48:05,349
probably going to be fine but yeah

1149
00:48:05,349 --> 00:48:08,990
expect secure boot in everything and

1150
00:48:08,990 --> 00:48:13,750
data centers - like Mac minis Mac Pro's

1151
00:48:21,130 --> 00:48:24,020
let's do one more round of applause for

1152
00:48:24,020 --> 00:48:25,510
Mikey Mike

1153
00:48:25,510 --> 00:48:33,999
[Applause]

1154
00:48:34,019 --> 00:48:36,969
again super interesting talk and I think

1155
00:48:36,969 --> 00:48:38,410
the research she's doing is really

1156
00:48:38,410 --> 00:48:40,539
important and especially providing

1157
00:48:40,539 --> 00:48:42,219
feedback to Apple as you mentioned the

1158
00:48:42,219 --> 00:48:44,439
spec is kind of changing so the feedback

1159
00:48:44,439 --> 00:48:46,209
from industry and people who are

1160
00:48:46,209 --> 00:48:48,369
actually using this in the enterprise is

1161
00:48:48,369 --> 00:48:51,660
really really important

