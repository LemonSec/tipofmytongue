1
00:00:00,000 --> 00:00:02,790
hi everyone hope you're having a good

2
00:00:02,790 --> 00:00:05,130
day at the conference today I've already

3
00:00:05,130 --> 00:00:08,039
used my beer coop and unfortunately

4
00:00:08,039 --> 00:00:09,660
found the point levels are like really

5
00:00:09,660 --> 00:00:12,240
half of the one we are used to so I hope

6
00:00:12,240 --> 00:00:14,219
you will enjoy this and there's been

7
00:00:14,219 --> 00:00:19,109
some fantastic lineup today and thanks

8
00:00:19,109 --> 00:00:21,570
to organizers for this fantastic event

9
00:00:21,570 --> 00:00:23,609
I believe you're enjoying it and my

10
00:00:23,609 --> 00:00:25,920
topic little bit relates to the previous

11
00:00:25,920 --> 00:00:28,080
one and given by Zola Turner about

12
00:00:28,080 --> 00:00:30,119
Windows but really concentrate more

13
00:00:30,119 --> 00:00:32,549
towards Active Directory because I

14
00:00:32,549 --> 00:00:34,230
believe it's one of the most underrated

15
00:00:34,230 --> 00:00:36,960
topics not given enough attention

16
00:00:36,960 --> 00:00:39,329
because of the amount of issues we are

17
00:00:39,329 --> 00:00:43,110
having especially Francis always the

18
00:00:43,110 --> 00:00:44,789
glamour part but the difference is

19
00:00:44,789 --> 00:00:47,219
lacking the attention so we've tried to

20
00:00:47,219 --> 00:00:53,940
deal both the sides of the fence this is

21
00:00:53,940 --> 00:00:56,489
a little bit about me so what company

22
00:00:56,489 --> 00:00:58,920
defends abase of Manchester UK so mostly

23
00:00:58,920 --> 00:01:02,039
work for UK and release clients usual

24
00:01:02,039 --> 00:01:06,000
fantastic life red teaming fantastic

25
00:01:06,000 --> 00:01:07,920
applications Wireless pretty much

26
00:01:07,920 --> 00:01:10,830
everything runs with IP a little bit of

27
00:01:10,830 --> 00:01:13,490
conferences and training experience and

28
00:01:13,490 --> 00:01:17,310
yeah that's pretty much about providing

29
00:01:17,310 --> 00:01:19,799
assurance to the clients so some look

30
00:01:19,799 --> 00:01:22,380
about it some don't and some don't fix

31
00:01:22,380 --> 00:01:25,549
or something okay so each to their own

32
00:01:25,549 --> 00:01:28,650
this is pretty much the agenda we are

33
00:01:28,650 --> 00:01:31,590
going to cover today so I know Active

34
00:01:31,590 --> 00:01:33,210
Directory is the two familiar name

35
00:01:33,210 --> 00:01:36,600
pretty much every man among you might

36
00:01:36,600 --> 00:01:38,549
have come across it even though they

37
00:01:38,549 --> 00:01:40,680
don't know maybe they work in a

38
00:01:40,680 --> 00:01:42,210
different domain and they don't come

39
00:01:42,210 --> 00:01:43,500
across rent controls or things like that

40
00:01:43,500 --> 00:01:45,119
but as soon as you log into a computer

41
00:01:45,119 --> 00:01:48,180
in your office they are most likely part

42
00:01:48,180 --> 00:01:50,549
of Windows Network which is known as

43
00:01:50,549 --> 00:01:53,189
Active Directory and there are many

44
00:01:53,189 --> 00:01:58,799
reasons like in in a day to day life you

45
00:01:58,799 --> 00:02:00,360
come across these but the security is

46
00:02:00,360 --> 00:02:02,159
always in the in the background picture

47
00:02:02,159 --> 00:02:05,380
and because of the

48
00:02:05,380 --> 00:02:08,080
the the insider threat the latest buzz

49
00:02:08,080 --> 00:02:09,340
words that you see in the media and all

50
00:02:09,340 --> 00:02:12,100
are done to Active Directory in Windows

51
00:02:12,100 --> 00:02:14,230
environment so we're going to go through

52
00:02:14,230 --> 00:02:16,750
fundamentals although I know it's a

53
00:02:16,750 --> 00:02:18,310
security cone but I really believe that

54
00:02:18,310 --> 00:02:20,380
we need to cover the basics a little bit

55
00:02:20,380 --> 00:02:23,110
to set up a picture and a bit of ground

56
00:02:23,110 --> 00:02:26,050
first and then move towards the domain

57
00:02:26,050 --> 00:02:27,459
domain controller workings

58
00:02:27,459 --> 00:02:30,040
what's its functional role in the in the

59
00:02:30,040 --> 00:02:32,140
Active Directory environment and then

60
00:02:32,140 --> 00:02:34,780
cover the threats and detections so

61
00:02:34,780 --> 00:02:36,550
hopefully we'll cover that in the time

62
00:02:36,550 --> 00:02:42,540
we have yes let's go for right now so

63
00:02:42,540 --> 00:02:44,950
this is where of negotiating with you

64
00:02:44,950 --> 00:02:47,200
the expectation levels how are we gonna

65
00:02:47,200 --> 00:02:49,709
go from this so this is nothing like a

66
00:02:49,709 --> 00:02:51,670
presentation of any rocket science or

67
00:02:51,670 --> 00:02:54,459
any big topics or any research this is

68
00:02:54,459 --> 00:02:55,900
all just an information gathered around

69
00:02:55,900 --> 00:02:58,720
from different sources put for useful

70
00:02:58,720 --> 00:03:02,500
cause so if I can do any of you can do

71
00:03:02,500 --> 00:03:06,430
it as well the word security I'll just

72
00:03:06,430 --> 00:03:08,860
mention it so the word security in the

73
00:03:08,860 --> 00:03:12,160
first 1/3 of the presentation is all

74
00:03:12,160 --> 00:03:14,730
about you know typically how admins or

75
00:03:14,730 --> 00:03:17,890
the people in the networking industry

76
00:03:17,890 --> 00:03:20,049
I'm talking about 90s you use the word

77
00:03:20,049 --> 00:03:22,390
security just to define the boundary it

78
00:03:22,390 --> 00:03:24,700
had nothing to do with with the actual

79
00:03:24,700 --> 00:03:25,750
cyber security that we talked about

80
00:03:25,750 --> 00:03:27,880
today so that's more about logical

81
00:03:27,880 --> 00:03:30,250
boundary so whenever I speak about this

82
00:03:30,250 --> 00:03:32,769
word it doesn't mean the attack and

83
00:03:32,769 --> 00:03:35,790
defense part there's more like more like

84
00:03:35,790 --> 00:03:38,200
just a normal boundary really logical

85
00:03:38,200 --> 00:03:41,709
way of saying it if I provide you

86
00:03:41,709 --> 00:03:46,060
example it'd be like few years ago even

87
00:03:46,060 --> 00:03:49,150
now some admins call VLAN as being used

88
00:03:49,150 --> 00:03:50,320
for security although it's not

89
00:03:50,320 --> 00:03:52,780
configured at the switch interfaces to

90
00:03:52,780 --> 00:03:54,579
do the security work but they just call

91
00:03:54,579 --> 00:03:56,290
it ok because it's logically dividing

92
00:03:56,290 --> 00:03:58,630
the segments of the network even though

93
00:03:58,630 --> 00:04:00,430
the flow of the information is same and

94
00:04:00,430 --> 00:04:02,140
even if it's trunk they still call it

95
00:04:02,140 --> 00:04:05,200
for security purposes so it's that sort

96
00:04:05,200 --> 00:04:11,769
of concept ok so I will try to be fast

97
00:04:11,769 --> 00:04:14,410
with the fundamentals so apologies in

98
00:04:14,410 --> 00:04:16,899
advance if you think it's really fast at

99
00:04:16,899 --> 00:04:17,620
the start

100
00:04:17,620 --> 00:04:20,930
by certainly important to set up and

101
00:04:20,930 --> 00:04:23,360
connect the dots in order to understand

102
00:04:23,360 --> 00:04:25,010
the later phases which are really the

103
00:04:25,010 --> 00:04:26,960
crux of this talk and why I am

104
00:04:26,960 --> 00:04:29,930
presenting here so as Irene knows I mean

105
00:04:29,930 --> 00:04:32,630
aqueduct Therese is more of trademarked

106
00:04:32,630 --> 00:04:36,260
directory service of Microsoft and the

107
00:04:36,260 --> 00:04:39,620
main reason this is so popular although

108
00:04:39,620 --> 00:04:41,150
is also so popular in the security

109
00:04:41,150 --> 00:04:43,190
community is because of the centralized

110
00:04:43,190 --> 00:04:45,530
approach it uses to to automate the

111
00:04:45,530 --> 00:04:49,760
network management of the data of the

112
00:04:49,760 --> 00:04:52,450
users data for administrative control

113
00:04:52,450 --> 00:04:54,980
and it's really designed for distributed

114
00:04:54,980 --> 00:04:58,400
networking environments ad was new I

115
00:04:58,400 --> 00:05:00,800
mean I will often call ad now for Active

116
00:05:00,800 --> 00:05:03,380
Directory ad was new to the Windows 2000

117
00:05:03,380 --> 00:05:05,090
because was just a start with Windows NT

118
00:05:05,090 --> 00:05:08,060
kernel and then 2003 we see it was a

119
00:05:08,060 --> 00:05:11,000
night not to turn 12 2016 is in

120
00:05:11,000 --> 00:05:13,460
production almost now so it's mainly

121
00:05:13,460 --> 00:05:15,050
helping you with providing the

122
00:05:15,050 --> 00:05:19,190
redundancy or fault tolerance basically

123
00:05:19,190 --> 00:05:20,930
maintaining a good network growth where

124
00:05:20,930 --> 00:05:23,330
things can be automated and there's a

125
00:05:23,330 --> 00:05:24,950
centralized control of the whole

126
00:05:24,950 --> 00:05:26,900
environment so the structure is composed

127
00:05:26,900 --> 00:05:31,930
of these components Forest it's like a

128
00:05:31,930 --> 00:05:34,930
forest it's like a security boundary for

129
00:05:34,930 --> 00:05:37,580
for a network for a Windows network and

130
00:05:37,580 --> 00:05:40,070
it'll be a collection of every attribute

131
00:05:40,070 --> 00:05:42,860
that's part of of a Windows network that

132
00:05:42,860 --> 00:05:44,780
would contain domains that were

133
00:05:44,780 --> 00:05:47,870
organization units sites all-in-one is

134
00:05:47,870 --> 00:05:50,330
probably known as forest then is a

135
00:05:50,330 --> 00:05:52,580
domain domain is really a collection of

136
00:05:52,580 --> 00:05:54,160
computers put together in network

137
00:05:54,160 --> 00:05:57,620
topology topology is more like aleko

138
00:05:57,620 --> 00:06:01,000
fashion but in a technological way and

139
00:06:01,000 --> 00:06:03,650
all these computers in a domain follow

140
00:06:03,650 --> 00:06:06,350
some set protocol that means set

141
00:06:06,350 --> 00:06:09,380
policies names and database of the

142
00:06:09,380 --> 00:06:11,480
members is collected together and then

143
00:06:11,480 --> 00:06:13,250
authentication is on the domain basis

144
00:06:13,250 --> 00:06:16,700
only so I'm gonna clarify further you

145
00:06:16,700 --> 00:06:17,960
know with the diagram on the next slide

146
00:06:17,960 --> 00:06:20,960
how the different domains can be put

147
00:06:20,960 --> 00:06:22,370
together in a forest and Hardison looked

148
00:06:22,370 --> 00:06:25,070
like and now this the oh you is like an

149
00:06:25,070 --> 00:06:26,600
organization unit so it's like different

150
00:06:26,600 --> 00:06:28,300
departments in an organization

151
00:06:28,300 --> 00:06:32,260
so this is more like like a container in

152
00:06:32,260 --> 00:06:35,260
a domain so the the way we are going

153
00:06:35,260 --> 00:06:36,910
down from the definitions is like in a

154
00:06:36,910 --> 00:06:39,310
hierarchical structure so this is a

155
00:06:39,310 --> 00:06:42,870
structure that's presented in any domain

156
00:06:42,870 --> 00:06:45,610
and then there are sites which are like

157
00:06:45,610 --> 00:06:47,770
the physical groupings independent of

158
00:06:47,770 --> 00:06:49,270
the domain and they can be

159
00:06:49,270 --> 00:06:51,970
geographically apart and then they're

160
00:06:51,970 --> 00:06:54,550
connected by by the links which is like

161
00:06:54,550 --> 00:06:56,620
normally we have these MPLS or network

162
00:06:56,620 --> 00:06:58,750
links and they can be based on the

163
00:06:58,750 --> 00:07:01,000
speeds which are high or low and then

164
00:07:01,000 --> 00:07:03,130
are more often defined by the IP subnets

165
00:07:03,130 --> 00:07:05,980
now this is this is a quick this is a

166
00:07:05,980 --> 00:07:10,810
quick picture showing how a domain and a

167
00:07:10,810 --> 00:07:14,110
forest is laid out so if you see this is

168
00:07:14,110 --> 00:07:16,780
like a corporate domain this is also the

169
00:07:16,780 --> 00:07:19,000
forest root domain and forest root

170
00:07:19,000 --> 00:07:21,190
domain has got subdomains which can be

171
00:07:21,190 --> 00:07:23,260
part of different departments here and

172
00:07:23,260 --> 00:07:25,090
the arrows you see are bi-directional

173
00:07:25,090 --> 00:07:29,080
that means that's the trust trust set up

174
00:07:29,080 --> 00:07:30,970
between them so if it says by direction

175
00:07:30,970 --> 00:07:34,990
that means the flow of any user related

176
00:07:34,990 --> 00:07:36,880
data or any administrative data or

177
00:07:36,880 --> 00:07:38,260
management of the domain related data

178
00:07:38,260 --> 00:07:41,290
can be can go from this child to this

179
00:07:41,290 --> 00:07:43,270
parent or from parent it can flow down

180
00:07:43,270 --> 00:07:45,370
to child as well so there are different

181
00:07:45,370 --> 00:07:47,710
sets collected here and then you can

182
00:07:47,710 --> 00:07:50,170
also have a similar set up here the same

183
00:07:50,170 --> 00:07:52,840
forest and all for all different domains

184
00:07:52,840 --> 00:07:54,730
can be part of one for us which will be

185
00:07:54,730 --> 00:08:00,310
appearing for us here now going towards

186
00:08:00,310 --> 00:08:01,690
the different types of Active Directory

187
00:08:01,690 --> 00:08:04,900
services what are their functions and

188
00:08:04,900 --> 00:08:06,820
this is these are the different sources

189
00:08:06,820 --> 00:08:09,220
that we have domain service is really

190
00:08:09,220 --> 00:08:12,790
about storing the directory data or to

191
00:08:12,790 --> 00:08:14,350
manage that for to maintain a

192
00:08:14,350 --> 00:08:16,390
communication between different users or

193
00:08:16,390 --> 00:08:19,390
objects or computers and then the

194
00:08:19,390 --> 00:08:20,590
certificate services is all about

195
00:08:20,590 --> 00:08:22,150
maintaining the certificate management

196
00:08:22,150 --> 00:08:25,630
between between different identities or

197
00:08:25,630 --> 00:08:27,370
to present these identities in a secure

198
00:08:27,370 --> 00:08:29,380
fashion in order to make sure the

199
00:08:29,380 --> 00:08:32,679
communication is it's secure and then

200
00:08:32,679 --> 00:08:34,720
there's a Federation services this is

201
00:08:34,720 --> 00:08:37,030
the modern concept I mean it's been few

202
00:08:37,030 --> 00:08:40,380
years now but it's more about how

203
00:08:40,380 --> 00:08:45,029
single online session can be used to use

204
00:08:45,029 --> 00:08:46,830
to put a trust relationship so that you

205
00:08:46,830 --> 00:08:48,570
don't have to login a user doesn't have

206
00:08:48,570 --> 00:08:50,340
to log in every time to a different

207
00:08:50,340 --> 00:08:52,230
application which is directly enabled so

208
00:08:52,230 --> 00:08:54,090
over this lifespan of a one session you

209
00:08:54,090 --> 00:08:55,680
can be part of all the different

210
00:08:55,680 --> 00:08:59,279
applications and this is also what we

211
00:08:59,279 --> 00:09:01,350
call is based on web-based single

212
00:09:01,350 --> 00:09:03,720
sign-on technology and then there's a

213
00:09:03,720 --> 00:09:06,270
lightweight directory services this is

214
00:09:06,270 --> 00:09:09,240
like a portable version of directory

215
00:09:09,240 --> 00:09:11,790
services where you don't really need the

216
00:09:11,790 --> 00:09:13,890
Active Directory domain services but you

217
00:09:13,890 --> 00:09:14,970
can still use it

218
00:09:14,970 --> 00:09:16,950
independently for certain units or

219
00:09:16,950 --> 00:09:19,950
stores for example and then the last is

220
00:09:19,950 --> 00:09:21,660
rights management this is this is about

221
00:09:21,660 --> 00:09:24,150
the protection of information and how

222
00:09:24,150 --> 00:09:27,839
you actually protect protect the

223
00:09:27,839 --> 00:09:31,250
information more about file rights and

224
00:09:31,250 --> 00:09:34,650
who signed it and also takes care of the

225
00:09:34,650 --> 00:09:36,180
management of digital signatures as part

226
00:09:36,180 --> 00:09:38,450
of this so these are these are the major

227
00:09:38,450 --> 00:09:40,860
major services that are part of the

228
00:09:40,860 --> 00:09:48,870
Active Directory environment ok so this

229
00:09:48,870 --> 00:09:51,839
is just so quickly about so I'm gonna go

230
00:09:51,839 --> 00:09:54,750
through each of these in a little bit of

231
00:09:54,750 --> 00:09:57,690
detail about how all of them are what

232
00:09:57,690 --> 00:09:59,250
are they what the benefits and the roles

233
00:09:59,250 --> 00:10:00,990
of them and then we're gonna slowly

234
00:10:00,990 --> 00:10:03,089
start moving towards the security side

235
00:10:03,089 --> 00:10:04,620
of things later on and the basics are

236
00:10:04,620 --> 00:10:09,120
done so this is this is really a DDS is

237
00:10:09,120 --> 00:10:10,650
like a domain associates which is like a

238
00:10:10,650 --> 00:10:12,960
distributed database used for management

239
00:10:12,960 --> 00:10:15,780
of information about network sources or

240
00:10:15,780 --> 00:10:18,720
user data or the attributes set for each

241
00:10:18,720 --> 00:10:21,839
of those users or the computers and it's

242
00:10:21,839 --> 00:10:24,089
done in a hierarchical manner and the

243
00:10:24,089 --> 00:10:26,820
benefits are it's a scalable because if

244
00:10:26,820 --> 00:10:28,880
we see now the way windows are growing

245
00:10:28,880 --> 00:10:31,200
or the Microsoft is growing the Windows

246
00:10:31,200 --> 00:10:33,330
is also coming out of a network

247
00:10:33,330 --> 00:10:34,920
previously used to be you need to be

248
00:10:34,920 --> 00:10:37,920
physically in a one network and then use

249
00:10:37,920 --> 00:10:39,959
same computer to log in and then you'll

250
00:10:39,959 --> 00:10:42,630
be part of a network now with the advent

251
00:10:42,630 --> 00:10:44,760
of the new technologies and all you

252
00:10:44,760 --> 00:10:45,870
don't need to be part of the same

253
00:10:45,870 --> 00:10:47,580
network you can be part of a different

254
00:10:47,580 --> 00:10:50,350
country but that will be

255
00:10:50,350 --> 00:10:52,330
previously after that it was like more

256
00:10:52,330 --> 00:10:53,950
you need to still need to be part of the

257
00:10:53,950 --> 00:10:56,050
same site which will be part of the main

258
00:10:56,050 --> 00:10:58,060
global headquarters but now you don't

259
00:10:58,060 --> 00:11:00,340
need to be in the office but there are

260
00:11:00,340 --> 00:11:01,660
technologies that will do the

261
00:11:01,660 --> 00:11:04,210
relationship trust relationship for on

262
00:11:04,210 --> 00:11:06,070
your behalf on your computer behalf and

263
00:11:06,070 --> 00:11:07,900
that will still can be part of the

264
00:11:07,900 --> 00:11:09,130
domain which would be part of your

265
00:11:09,130 --> 00:11:11,440
office Network and then there's a

266
00:11:11,440 --> 00:11:12,790
delegation which is delegation

267
00:11:12,790 --> 00:11:16,180
delegating the control of permissions of

268
00:11:16,180 --> 00:11:19,810
different objects down to perform

269
00:11:19,810 --> 00:11:21,250
different sort of functions based on

270
00:11:21,250 --> 00:11:23,560
privileges and then there's a security

271
00:11:23,560 --> 00:11:25,750
is one of the benefits as Microsoft's

272
00:11:25,750 --> 00:11:27,760
ace for authentication and access

273
00:11:27,760 --> 00:11:30,160
control purposes because a single

274
00:11:30,160 --> 00:11:31,660
Network logon is enough rather than

275
00:11:31,660 --> 00:11:34,540
providing the owners of maintaining

276
00:11:34,540 --> 00:11:37,180
these user credentials on the user's so

277
00:11:37,180 --> 00:11:39,460
this will help you but then on the

278
00:11:39,460 --> 00:11:41,020
security side of things will later see

279
00:11:41,020 --> 00:11:43,510
how a single network logon can also be

280
00:11:43,510 --> 00:11:45,580
helpful for you to compromise the whole

281
00:11:45,580 --> 00:11:49,480
domain when I say domain is like 1 1

282
00:11:49,480 --> 00:11:54,100
unit of computer network other features

283
00:11:54,100 --> 00:11:55,720
these are different type of steps or

284
00:11:55,720 --> 00:11:58,030
sort of like a different components part

285
00:11:58,030 --> 00:12:00,400
of the domain services which contains a

286
00:12:00,400 --> 00:12:02,890
schema schema is just like a definition

287
00:12:02,890 --> 00:12:04,900
of all the objects and attributes that

288
00:12:04,900 --> 00:12:07,870
are used to store data in a in Active

289
00:12:07,870 --> 00:12:09,370
Directory environment and then there's a

290
00:12:09,370 --> 00:12:11,530
global catalog it's it's always on a

291
00:12:11,530 --> 00:12:12,790
domain controller domain controller is

292
00:12:12,790 --> 00:12:14,410
the computer which is a server main

293
00:12:14,410 --> 00:12:16,090
server that takes care of the

294
00:12:16,090 --> 00:12:17,680
administration of the whole Active

295
00:12:17,680 --> 00:12:20,290
Directory and then the querying

296
00:12:20,290 --> 00:12:25,120
mechanism for four different objects to

297
00:12:25,120 --> 00:12:28,210
to index the data so that objects can be

298
00:12:28,210 --> 00:12:30,670
found fast by the network when they're

299
00:12:30,670 --> 00:12:32,290
queried upon by the network users or

300
00:12:32,290 --> 00:12:33,820
applications and then there's a

301
00:12:33,820 --> 00:12:35,380
replication or take data between the

302
00:12:35,380 --> 00:12:37,420
different member servers or or primary

303
00:12:37,420 --> 00:12:38,830
and secondary domain controllers and

304
00:12:38,830 --> 00:12:40,900
then there's an operation masters role

305
00:12:40,900 --> 00:12:44,590
this is more done for ensuring that

306
00:12:44,590 --> 00:12:46,150
consistency is maintained and there's

307
00:12:46,150 --> 00:12:47,830
less false and the fault tolerance is

308
00:12:47,830 --> 00:12:53,290
there in a in a domain so with time now

309
00:12:53,290 --> 00:12:55,750
we see Windows have developed obviously

310
00:12:55,750 --> 00:12:58,570
so since Windows Server 2008 we have

311
00:12:58,570 --> 00:13:01,840
these new features in as part of the

312
00:13:01,840 --> 00:13:03,100
Windows domain

313
00:13:03,100 --> 00:13:05,320
when you say our ODC this means I read

314
00:13:05,320 --> 00:13:08,920
only domain controller that will act as

315
00:13:08,920 --> 00:13:10,389
a domain controller but will not have

316
00:13:10,389 --> 00:13:14,709
the same content as the main domain

317
00:13:14,709 --> 00:13:18,279
controller this is mainly done to avoid

318
00:13:18,279 --> 00:13:21,699
any risk of theft of credentials

319
00:13:21,699 --> 00:13:25,000
basically because the cached passwords

320
00:13:25,000 --> 00:13:26,230
are removed from this read only domain

321
00:13:26,230 --> 00:13:27,880
controller and it can be installed at

322
00:13:27,880 --> 00:13:30,069
some other location for the for the

323
00:13:30,069 --> 00:13:32,279
efficient purposes efficiency purposes

324
00:13:32,279 --> 00:13:35,470
for example let's let's think about a

325
00:13:35,470 --> 00:13:38,290
big network where the headquarters have

326
00:13:38,290 --> 00:13:39,310
got a full-fledged

327
00:13:39,310 --> 00:13:41,500
IT team and they have got IT operations

328
00:13:41,500 --> 00:13:44,079
team but then they are in a

329
00:13:44,079 --> 00:13:46,060
manufacturing environment for example so

330
00:13:46,060 --> 00:13:47,800
they also got a workshop or a factory

331
00:13:47,800 --> 00:13:50,259
where there are like 200 users so in

332
00:13:50,259 --> 00:13:52,569
order to make sure they have a login

333
00:13:52,569 --> 00:13:54,639
process which is efficient they will put

334
00:13:54,639 --> 00:13:56,589
a copy of read only domain controller at

335
00:13:56,589 --> 00:13:58,000
that workshop because they know it's not

336
00:13:58,000 --> 00:14:00,880
that secure so that means even if that's

337
00:14:00,880 --> 00:14:02,800
compromised but that not compromised

338
00:14:02,800 --> 00:14:04,300
that empty that means the passwords of

339
00:14:04,300 --> 00:14:06,940
the active directory uses similarly

340
00:14:06,940 --> 00:14:09,339
other advantages that their admin role

341
00:14:09,339 --> 00:14:11,050
separation so you can you can actually

342
00:14:11,050 --> 00:14:12,899
separate the roles of the of the users

343
00:14:12,899 --> 00:14:17,139
and secure installation media so you can

344
00:14:17,139 --> 00:14:23,220
you can now secure using anti des backup

345
00:14:25,440 --> 00:14:28,440
sorry

346
00:14:33,950 --> 00:14:37,080
okay yeah and then restartable ATDs you

347
00:14:37,080 --> 00:14:42,900
can also restart the sorry just a second

348
00:14:42,900 --> 00:14:44,640
I guess I'm not able to use my mouse

349
00:14:44,640 --> 00:14:51,120
here on this okay yeah that's fine

350
00:14:51,120 --> 00:14:55,620
sorry sorry will a DDS and as it's a

351
00:14:55,620 --> 00:14:58,170
restart of fine grained posture policy

352
00:14:58,170 --> 00:14:59,400
you can also different password policies

353
00:14:59,400 --> 00:15:01,410
on and account lockout policies on

354
00:15:01,410 --> 00:15:03,240
different users and the global security

355
00:15:03,240 --> 00:15:05,940
groups in a domain that means new

356
00:15:05,940 --> 00:15:07,530
password setting objects and the

357
00:15:07,530 --> 00:15:09,090
president's rules have been added to

358
00:15:09,090 --> 00:15:10,500
remove the restriction of a single

359
00:15:10,500 --> 00:15:12,960
password policy for the whole domain so

360
00:15:12,960 --> 00:15:14,550
that can be set for a different set of

361
00:15:14,550 --> 00:15:16,830
admins and all so now the certification

362
00:15:16,830 --> 00:15:18,960
services education services as the name

363
00:15:18,960 --> 00:15:21,270
says it's really about enhancing the

364
00:15:21,270 --> 00:15:23,730
security by binding identity of offer

365
00:15:23,730 --> 00:15:27,000
device of off a person to the

366
00:15:27,000 --> 00:15:29,430
corresponding private key so it should

367
00:15:29,430 --> 00:15:31,710
be cost effective solution because it

368
00:15:31,710 --> 00:15:32,760
could be hosted within the environment

369
00:15:32,760 --> 00:15:34,380
on a server or on a domain controller

370
00:15:34,380 --> 00:15:37,950
itself as well but in in line with good

371
00:15:37,950 --> 00:15:39,240
practices they always say it should be

372
00:15:39,240 --> 00:15:42,540
on different so and then the supported

373
00:15:42,540 --> 00:15:44,030
application include all these

374
00:15:44,030 --> 00:15:45,900
applications that we use in modern day

375
00:15:45,900 --> 00:15:50,100
world IPSec VPN encrypting file systems

376
00:15:50,100 --> 00:15:52,460
and as mom's which is like the secure

377
00:15:52,460 --> 00:15:54,830
multi-purpose internet mail extensions

378
00:15:54,830 --> 00:15:57,780
and then these are the different type of

379
00:15:57,780 --> 00:16:01,620
city of yourself says that we have CA is

380
00:16:01,620 --> 00:16:03,570
certificate authority that's responsible

381
00:16:03,570 --> 00:16:05,400
for issuing and the management of those

382
00:16:05,400 --> 00:16:07,770
certificates to all the users and the

383
00:16:07,770 --> 00:16:10,350
computers within a network and then

384
00:16:10,350 --> 00:16:12,120
there's a web enrollment this is this is

385
00:16:12,120 --> 00:16:13,530
one of the methods by which you can

386
00:16:13,530 --> 00:16:15,480
actually connect to a CA which is the

387
00:16:15,480 --> 00:16:18,960
certificate authority to ask for a to

388
00:16:18,960 --> 00:16:21,240
request a certificate or also request CR

389
00:16:21,240 --> 00:16:23,460
Elle's which are the certificate

390
00:16:23,460 --> 00:16:25,230
revocation list that contains the list

391
00:16:25,230 --> 00:16:27,020
of all city which they have been

392
00:16:27,020 --> 00:16:30,590
relegated and then the online responder

393
00:16:30,590 --> 00:16:33,300
which is for application status purposes

394
00:16:33,300 --> 00:16:35,070
and a network device enrollment service

395
00:16:35,070 --> 00:16:36,990
which is for the network devices for

396
00:16:36,990 --> 00:16:38,700
example routers or firewalls which are

397
00:16:38,700 --> 00:16:41,460
not domain joined so they can use this

398
00:16:41,460 --> 00:16:43,709
to request the secure services

399
00:16:43,709 --> 00:16:47,399
this is a quick certification surfaces

400
00:16:47,399 --> 00:16:49,290
architecture diagram which just shows

401
00:16:49,290 --> 00:16:53,550
that how the flow happens I'm trying to

402
00:16:53,550 --> 00:16:56,119
use this it doesn't breaks out okay yeah

403
00:16:56,119 --> 00:16:59,850
so this client module is exactly the

404
00:16:59,850 --> 00:17:02,459
function of this is to request the the

405
00:17:02,459 --> 00:17:04,020
certificate request to submit it to the

406
00:17:04,020 --> 00:17:06,270
situation services engine so this engine

407
00:17:06,270 --> 00:17:07,799
is responsible for the processing and

408
00:17:07,799 --> 00:17:10,829
then it's asked policy module whether a

409
00:17:10,829 --> 00:17:13,169
requester qualifies for that criteria

410
00:17:13,169 --> 00:17:15,270
why it's asking for certificate if does

411
00:17:15,270 --> 00:17:17,490
valid request then it will send its own

412
00:17:17,490 --> 00:17:18,959
decision and the certificate services

413
00:17:18,959 --> 00:17:22,230
will then generate a private key and

414
00:17:22,230 --> 00:17:24,569
distribute it to the request protector

415
00:17:24,569 --> 00:17:27,000
certificate which is done by this crypto

416
00:17:27,000 --> 00:17:29,850
API is below part of this if you see

417
00:17:29,850 --> 00:17:32,940
these entity and then the certificate

418
00:17:32,940 --> 00:17:35,640
database is responsible for managing all

419
00:17:35,640 --> 00:17:37,200
the all the information about the keys

420
00:17:37,200 --> 00:17:41,909
or or storing the CRL lists and and then

421
00:17:41,909 --> 00:17:44,929
the active directory is used to sync all

422
00:17:44,929 --> 00:17:48,779
the selected transactions and the audit

423
00:17:48,779 --> 00:17:50,399
trail is also maintained by the city of

424
00:17:50,399 --> 00:17:55,320
a database then the next in our list of

425
00:17:55,320 --> 00:17:56,940
sources or Federation services this is

426
00:17:56,940 --> 00:17:58,909
all about the web SSO which is the

427
00:17:58,909 --> 00:18:01,049
single sign-on that we use to

428
00:18:01,049 --> 00:18:02,880
authenticate a user to multiple

429
00:18:02,880 --> 00:18:05,159
applications over the life of a single

430
00:18:05,159 --> 00:18:09,059
online session so that you don't have to

431
00:18:09,059 --> 00:18:11,250
login to the different services and the

432
00:18:11,250 --> 00:18:12,779
user doesn't have to store multiple

433
00:18:12,779 --> 00:18:15,450
passwords or multiple identities that

434
00:18:15,450 --> 00:18:17,460
also adds a security risk to the to the

435
00:18:17,460 --> 00:18:21,029
ordination to avoid that it offers that

436
00:18:21,029 --> 00:18:23,970
in this different types of rules so

437
00:18:23,970 --> 00:18:25,370
these are the all services for this

438
00:18:25,370 --> 00:18:28,950
Federation services proxy claims where

439
00:18:28,950 --> 00:18:30,659
and windows token these are independent

440
00:18:30,659 --> 00:18:34,440
applications who were responsible for

441
00:18:34,440 --> 00:18:36,990
providing the Federation services to in

442
00:18:36,990 --> 00:18:39,120
a tea environment most of times we see

443
00:18:39,120 --> 00:18:42,090
Federation's of Suzanne proxy I've also

444
00:18:42,090 --> 00:18:44,070
put together a quick diagram to show you

445
00:18:44,070 --> 00:18:47,340
how the session happens the first

446
00:18:47,340 --> 00:18:48,169
request

447
00:18:48,169 --> 00:18:50,010
apologies I guess this is the wrong

448
00:18:50,010 --> 00:18:52,409
direction so read 1 as a 2 2 as a 1

449
00:18:52,409 --> 00:18:55,430
because the request is initially

450
00:18:55,430 --> 00:18:58,250
access is requested by the user to the

451
00:18:58,250 --> 00:19:00,230
cloud service which is directly enable

452
00:19:00,230 --> 00:19:03,350
cloud services asking for access so it's

453
00:19:03,350 --> 00:19:04,730
like a simplified diagram to show how

454
00:19:04,730 --> 00:19:07,220
this mechanism works and then this ad FS

455
00:19:07,220 --> 00:19:10,010
server sits in a DMZ because it also

456
00:19:10,010 --> 00:19:12,309
talks to the ad server internally and

457
00:19:12,309 --> 00:19:14,870
outside the user is on the internet so

458
00:19:14,870 --> 00:19:18,650
when this user asks for quest requesting

459
00:19:18,650 --> 00:19:20,930
for access to the cloud service it

460
00:19:20,930 --> 00:19:23,960
requests a token and then this user

461
00:19:23,960 --> 00:19:26,750
request for a token from ad FS so this

462
00:19:26,750 --> 00:19:28,790
Federation service conforms whether that

463
00:19:28,790 --> 00:19:32,300
user needs any user is a valid token and

464
00:19:32,300 --> 00:19:34,040
then conforms it with the ad because all

465
00:19:34,040 --> 00:19:36,050
the identities and secrets are sold here

466
00:19:36,050 --> 00:19:38,360
so once this is requested by the ad to

467
00:19:38,360 --> 00:19:41,030
the IDF s over the issues of token so

468
00:19:41,030 --> 00:19:42,020
similarly if there are multiple

469
00:19:42,020 --> 00:19:44,330
applications for example here another

470
00:19:44,330 --> 00:19:45,650
one another one they will be all

471
00:19:45,650 --> 00:19:48,380
belonging based on the same lifespan of

472
00:19:48,380 --> 00:19:53,960
the token issued from here sorry if

473
00:19:53,960 --> 00:19:55,520
you're finding a bit faster we need to

474
00:19:55,520 --> 00:19:57,410
cover the basics quick and the time is

475
00:19:57,410 --> 00:19:59,179
running so after that moving to security

476
00:19:59,179 --> 00:20:01,460
so this is the lightweight directory

477
00:20:01,460 --> 00:20:03,200
access protocol it's like a directory

478
00:20:03,200 --> 00:20:05,120
service providing the flexible support

479
00:20:05,120 --> 00:20:06,860
for all the directory enabled

480
00:20:06,860 --> 00:20:10,340
applications so you can you can provide

481
00:20:10,340 --> 00:20:11,809
directory services for direct enable

482
00:20:11,809 --> 00:20:13,700
services without actually incurring the

483
00:20:13,700 --> 00:20:16,190
setup of a proper domain controller or

484
00:20:16,190 --> 00:20:18,320
the ad environment so this can be

485
00:20:18,320 --> 00:20:19,640
integrated with the already established

486
00:20:19,640 --> 00:20:22,280
ad for example in a big enterprises

487
00:20:22,280 --> 00:20:24,770
there are different directory stores and

488
00:20:24,770 --> 00:20:26,300
there are different extranet sonication

489
00:20:26,300 --> 00:20:29,230
stores for the vendors so they set up

490
00:20:29,230 --> 00:20:31,160
lightweights and directory services

491
00:20:31,160 --> 00:20:32,720
which contains the personalized

492
00:20:32,720 --> 00:20:35,420
information about the applications or

493
00:20:35,420 --> 00:20:37,700
the users or anything specific to that

494
00:20:37,700 --> 00:20:40,640
business unit but they authenticate the

495
00:20:40,640 --> 00:20:42,230
identities and everything are tentacle

496
00:20:42,230 --> 00:20:44,120
to the active directory which is set up

497
00:20:44,120 --> 00:20:46,460
and in the corporate environment so

498
00:20:46,460 --> 00:20:49,929
that's that's pretty much the gist of it

499
00:20:50,830 --> 00:20:53,350
this is the rights management services

500
00:20:53,350 --> 00:20:55,970
this is more about protecting the and

501
00:20:55,970 --> 00:20:58,250
the individuals allowing the individuals

502
00:20:58,250 --> 00:21:00,559
and any of the administrators or the

503
00:21:00,559 --> 00:21:03,290
staff an ID through information rights

504
00:21:03,290 --> 00:21:05,420
management policies to specify access

505
00:21:05,420 --> 00:21:07,790
permissions on the files so this could

506
00:21:07,790 --> 00:21:09,140
be any of your documentation

507
00:21:09,140 --> 00:21:11,870
additional workbooks and and these

508
00:21:11,870 --> 00:21:13,880
permissions stay with the file so that

509
00:21:13,880 --> 00:21:15,830
it doesn't matter if you move the file

510
00:21:15,830 --> 00:21:17,150
to somewhere else because the

511
00:21:17,150 --> 00:21:18,980
permissions are actually stored in the

512
00:21:18,980 --> 00:21:21,740
file in an XML format in these word

513
00:21:21,740 --> 00:21:24,200
files so the benefits are because these

514
00:21:24,200 --> 00:21:26,150
are persistent use like I said it just

515
00:21:26,150 --> 00:21:28,010
remains with the information no matter

516
00:21:28,010 --> 00:21:30,140
where it's moved or you send it to

517
00:21:30,140 --> 00:21:33,110
somebody else or forwarded by email also

518
00:21:33,110 --> 00:21:34,970
prevents the unauthorized recipients

519
00:21:34,970 --> 00:21:36,980
from performing authorized action for

520
00:21:36,980 --> 00:21:39,470
example you're part of your company but

521
00:21:39,470 --> 00:21:40,970
you're not having a high level

522
00:21:40,970 --> 00:21:44,080
privileges as an admin or super admin

523
00:21:44,080 --> 00:21:47,600
still if you forward it to somebody else

524
00:21:47,600 --> 00:21:51,260
or outside that doesn't mean I mean it

525
00:21:51,260 --> 00:21:53,420
will just figure out it will tell you

526
00:21:53,420 --> 00:21:55,130
whether that authorized person has

527
00:21:55,130 --> 00:21:57,380
permission to access that file if not it

528
00:21:57,380 --> 00:21:59,840
won't lets you to do it but one of the

529
00:21:59,840 --> 00:22:01,280
good things about this is also it offers

530
00:22:01,280 --> 00:22:04,070
a modular support with the hardware

531
00:22:04,070 --> 00:22:06,200
security modules as well if companies

532
00:22:06,200 --> 00:22:08,060
are serious to implement this this can

533
00:22:08,060 --> 00:22:09,950
be integrated with the hardware security

534
00:22:09,950 --> 00:22:13,310
modules so this is a quick diagram so

535
00:22:13,310 --> 00:22:14,840
this diagram is stolen from the

536
00:22:14,840 --> 00:22:17,060
Microsoft TechNet you'll see I've

537
00:22:17,060 --> 00:22:18,680
mentioned at the end the sources for

538
00:22:18,680 --> 00:22:21,140
these images so what's happening quickly

539
00:22:21,140 --> 00:22:22,780
is it's just showing you how a quick

540
00:22:22,780 --> 00:22:27,230
access mechanism happens so if Terry is

541
00:22:27,230 --> 00:22:29,870
requesting for applies his access

542
00:22:29,870 --> 00:22:32,510
restrictions on a document and the RMS

543
00:22:32,510 --> 00:22:34,340
client actually this is our Emma's

544
00:22:34,340 --> 00:22:37,370
client and this launches a request to

545
00:22:37,370 --> 00:22:39,770
Dharma server and then aramis so returns

546
00:22:39,770 --> 00:22:42,110
the client licenses so they fade back to

547
00:22:42,110 --> 00:22:44,210
Terry and then he can send that document

548
00:22:44,210 --> 00:22:46,460
with the right permissions to to this

549
00:22:46,460 --> 00:22:50,060
user who's Lola and then she can

550
00:22:50,060 --> 00:22:51,740
actually send the rights protected

551
00:22:51,740 --> 00:22:53,990
document she can actually receive that

552
00:22:53,990 --> 00:22:55,700
document and try to open it if she has

553
00:22:55,700 --> 00:22:57,350
got the right permissions and those will

554
00:22:57,350 --> 00:22:59,540
be checked against the rms server for

555
00:22:59,540 --> 00:23:03,670
the access so yeah that's pretty much

556
00:23:03,670 --> 00:23:06,910
okay moving on to fast forward to 2016

557
00:23:06,910 --> 00:23:11,030
as you see now Microsoft and especially

558
00:23:11,030 --> 00:23:13,280
Microsoft has put so much stress on

559
00:23:13,280 --> 00:23:16,640
mobile security and cloud one of the

560
00:23:16,640 --> 00:23:17,900
things that is happening at a major

561
00:23:17,900 --> 00:23:19,540
level is since

562
00:23:19,540 --> 00:23:22,820
2016 so allow releases

563
00:23:22,820 --> 00:23:25,370
boats they're trying to keep the up

564
00:23:25,370 --> 00:23:27,860
readability and the security in a in a

565
00:23:27,860 --> 00:23:30,320
balanced fashion and because cloud is so

566
00:23:30,320 --> 00:23:32,750
important these days obviously for the

567
00:23:32,750 --> 00:23:34,850
obvious reasons cost and efficiency and

568
00:23:34,850 --> 00:23:37,820
speed and and whatnot they're trying to

569
00:23:37,820 --> 00:23:40,880
so Microsoft has improved this windows

570
00:23:40,880 --> 00:23:43,460
over 16 with some of the major

571
00:23:43,460 --> 00:23:46,010
improvements which is a Pam so if you

572
00:23:46,010 --> 00:23:47,660
have any interaction of the Linux

573
00:23:47,660 --> 00:23:48,950
operating system you'll know what I mean

574
00:23:48,950 --> 00:23:53,800
by Pam and then is or ad join which is

575
00:23:53,800 --> 00:23:57,980
again a way of keeping the BYOD devices

576
00:23:57,980 --> 00:24:00,110
bring your own devices to either

577
00:24:00,110 --> 00:24:03,410
resistor or join the domains remotely

578
00:24:03,410 --> 00:24:05,690
and then there's an MS passport which is

579
00:24:05,690 --> 00:24:08,720
also hello business they call it this is

580
00:24:08,720 --> 00:24:10,790
a certificate based mechanism for

581
00:24:10,790 --> 00:24:15,530
authentication purposes I guess the the

582
00:24:15,530 --> 00:24:16,960
reason they came up with these is

583
00:24:16,960 --> 00:24:19,700
because Microsoft really found its pain

584
00:24:19,700 --> 00:24:23,330
in the backside for credential tough

585
00:24:23,330 --> 00:24:25,010
techniques and stuff that we are reading

586
00:24:25,010 --> 00:24:26,600
about from the attack perspective mimic

587
00:24:26,600 --> 00:24:29,870
ads or the password steal in pass the

588
00:24:29,870 --> 00:24:32,950
hash pass the ticket over pass the hash

589
00:24:32,950 --> 00:24:36,290
ticket sorry and these techniques so

590
00:24:36,290 --> 00:24:38,900
they're trying to come up with these to

591
00:24:38,900 --> 00:24:42,050
say that they admit these things can

592
00:24:42,050 --> 00:24:44,270
never be stopped but then the real issue

593
00:24:44,270 --> 00:24:47,270
lies with the identity and excessive

594
00:24:47,270 --> 00:24:49,910
permissions applied to the users because

595
00:24:49,910 --> 00:24:52,550
if somebody's made an admin in our

596
00:24:52,550 --> 00:24:54,320
organization he just enjoys their rights

597
00:24:54,320 --> 00:24:56,000
forever because there's no process to

598
00:24:56,000 --> 00:24:58,250
actually revoke his rights soon after

599
00:24:58,250 --> 00:25:00,290
and that's always the human nature

600
00:25:00,290 --> 00:25:03,190
because if you know and he for example

601
00:25:03,190 --> 00:25:05,720
somebody database developer he needs

602
00:25:05,720 --> 00:25:08,090
access and that needs to run some

603
00:25:08,090 --> 00:25:09,860
function at a high privilege he'll be

604
00:25:09,860 --> 00:25:11,540
given DBA privileges probably for our

605
00:25:11,540 --> 00:25:14,600
and then they forget it so this is the

606
00:25:14,600 --> 00:25:16,310
problem that Microsoft has tried to deal

607
00:25:16,310 --> 00:25:20,600
with using the Pam module here so I'll

608
00:25:20,600 --> 00:25:22,280
take you to a quick diagram the way

609
00:25:22,280 --> 00:25:24,230
privileged access management sorry it

610
00:25:24,230 --> 00:25:26,440
stands for privileged access management

611
00:25:26,440 --> 00:25:29,300
the how it deals with it there are other

612
00:25:29,300 --> 00:25:30,350
improvements as well time

613
00:25:30,350 --> 00:25:31,820
synchronization no I guess these are the

614
00:25:31,820 --> 00:25:33,800
more pains on the administration side

615
00:25:33,800 --> 00:25:35,360
how difficult it is to maintain some

616
00:25:35,360 --> 00:25:35,549
time

617
00:25:35,549 --> 00:25:38,909
when the servers are out of sync I've

618
00:25:38,909 --> 00:25:41,039
done that at my first job so probably if

619
00:25:41,039 --> 00:25:43,379
there's any admins on you would know how

620
00:25:43,379 --> 00:25:46,139
painful it is sorry the one of the other

621
00:25:46,139 --> 00:25:47,879
improvements was group membership

622
00:25:47,879 --> 00:25:50,629
expiration so you can always provide the

623
00:25:50,629 --> 00:25:53,159
time limit to the users who are

624
00:25:53,159 --> 00:25:54,960
sometimes added temporarily to certain

625
00:25:54,960 --> 00:25:58,470
groups so this is a quick diagram

626
00:25:58,470 --> 00:26:00,629
showing the requests in the seven steps

627
00:26:00,629 --> 00:26:03,299
so what we are going to go through here

628
00:26:03,299 --> 00:26:06,379
is like HR admins is the group here

629
00:26:06,379 --> 00:26:09,149
which is having hard privileges and s ID

630
00:26:09,149 --> 00:26:11,009
is the system identifier for Windows

631
00:26:11,009 --> 00:26:14,820
Active Directory that at the back end it

632
00:26:14,820 --> 00:26:16,200
just denotes through this number at the

633
00:26:16,200 --> 00:26:17,809
end I'll show you later what it means

634
00:26:17,809 --> 00:26:20,519
and then the second is it shows that

635
00:26:20,519 --> 00:26:23,460
because someone from the HR

636
00:26:23,460 --> 00:26:27,389
administrator base privileges database

637
00:26:27,389 --> 00:26:30,570
admin access in order to do it and then

638
00:26:30,570 --> 00:26:32,519
I share the principle that no members is

639
00:26:32,519 --> 00:26:34,799
actually created in the in the bastion

640
00:26:34,799 --> 00:26:38,149
forest so this is like a like a shadow

641
00:26:38,149 --> 00:26:41,759
forest created at the same time by small

642
00:26:41,759 --> 00:26:44,970
like really isolated forest no one has

643
00:26:44,970 --> 00:26:46,169
their privileges and microsoft claims

644
00:26:46,169 --> 00:26:50,220
it's like ultimately secure thing so for

645
00:26:50,220 --> 00:26:51,899
the time just think it's like a shadow

646
00:26:51,899 --> 00:26:56,220
forest created here by the Pam and the

647
00:26:56,220 --> 00:26:58,830
corporate HR admin group has got a

648
00:26:58,830 --> 00:27:00,840
member Chen who's asking for access to

649
00:27:00,840 --> 00:27:03,480
it so she needs to go through ma m which

650
00:27:03,480 --> 00:27:05,580
is like identity manager for Windows and

651
00:27:05,580 --> 00:27:07,830
through that portal she needs to request

652
00:27:07,830 --> 00:27:11,249
the privileges in order to access with

653
00:27:11,249 --> 00:27:13,919
the higher privilege so this MFA could

654
00:27:13,919 --> 00:27:16,259
be a multi-factor authentication applied

655
00:27:16,259 --> 00:27:18,330
to the portal where she goes in to

656
00:27:18,330 --> 00:27:20,549
request it once there my impulses are

657
00:27:20,549 --> 00:27:22,320
checked whether this request is valid

658
00:27:22,320 --> 00:27:25,799
the access the way access granted is the

659
00:27:25,799 --> 00:27:28,230
bastion Forest creates a similar account

660
00:27:28,230 --> 00:27:30,359
with the similar s ID at your admins and

661
00:27:30,359 --> 00:27:32,850
then allows Jen access temporarily

662
00:27:32,850 --> 00:27:34,289
through the Kerberos authentication

663
00:27:34,289 --> 00:27:38,429
ticket temporarily for that time and I

664
00:27:38,429 --> 00:27:40,590
guess that's known as TTL which is the

665
00:27:40,590 --> 00:27:44,369
same as the concept used as time to live

666
00:27:44,369 --> 00:27:47,639
so that time to live tells you how long

667
00:27:47,639 --> 00:27:48,640
is the access main

668
00:27:48,640 --> 00:27:51,730
and for and if she is part of multiple

669
00:27:51,730 --> 00:27:55,900
groups then the lowest value is taken by

670
00:27:55,900 --> 00:27:58,750
the by the windows to ensure that the

671
00:27:58,750 --> 00:28:03,190
limit is not not abused sorry so yeah

672
00:28:03,190 --> 00:28:04,990
that's a special concept of Pam

673
00:28:04,990 --> 00:28:07,480
so advantages are it just isolates and

674
00:28:07,480 --> 00:28:09,070
scoping of privileges and because

675
00:28:09,070 --> 00:28:10,660
there's a time exploration as well so

676
00:28:10,660 --> 00:28:12,070
it's not like you can abuse it and

677
00:28:12,070 --> 00:28:13,720
there's an additional locking of the

678
00:28:13,720 --> 00:28:17,020
workflows through the portals and as

679
00:28:17,020 --> 00:28:20,440
Microsoft said it's trying to mitigate

680
00:28:20,440 --> 00:28:22,090
these threats so we're gonna deal with

681
00:28:22,090 --> 00:28:23,310
these later

682
00:28:23,310 --> 00:28:26,440
now the next advantage was as your ad so

683
00:28:26,440 --> 00:28:27,970
it just allows you to register or join

684
00:28:27,970 --> 00:28:31,600
the devices which means the devices can

685
00:28:31,600 --> 00:28:34,270
be resisted but still remain outside the

686
00:28:34,270 --> 00:28:36,490
network or devices can join but still

687
00:28:36,490 --> 00:28:38,650
remain and they will remain they will

688
00:28:38,650 --> 00:28:41,170
part they'll be part of the domain the

689
00:28:41,170 --> 00:28:43,330
benefits are single sign-on and they

690
00:28:43,330 --> 00:28:46,470
have got integrations with the mobile

691
00:28:46,470 --> 00:28:48,820
device management solutions and also

692
00:28:48,820 --> 00:28:52,810
they can access nexus resources and the

693
00:28:52,810 --> 00:28:55,210
last advantages with this is Microsoft

694
00:28:55,210 --> 00:28:56,650
passport which is like a certificate

695
00:28:56,650 --> 00:28:59,230
based authentication approach where

696
00:28:59,230 --> 00:29:02,350
Microsoft is using one of the biometric

697
00:29:02,350 --> 00:29:05,320
or a flexible pin in order to login to

698
00:29:05,320 --> 00:29:08,110
the to the device and then you can

699
00:29:08,110 --> 00:29:12,430
actually sorry that the private key is

700
00:29:12,430 --> 00:29:14,860
linked with that right pin or a

701
00:29:14,860 --> 00:29:16,510
biometric feature when you authenticate

702
00:29:16,510 --> 00:29:19,930
and then that decrypts the in the

703
00:29:19,930 --> 00:29:22,000
function that's used to allow access to

704
00:29:22,000 --> 00:29:25,060
this so because the keys are actually

705
00:29:25,060 --> 00:29:27,250
Hardware tested so these keys are tied

706
00:29:27,250 --> 00:29:29,680
to TPM 1.2 and these modules is the

707
00:29:29,680 --> 00:29:32,620
reason Microsoft was trying to say that

708
00:29:32,620 --> 00:29:34,720
this is very secure I've seen in a

709
00:29:34,720 --> 00:29:37,000
couple of implementations where these

710
00:29:37,000 --> 00:29:40,420
new surface and the surface notebooks

711
00:29:40,420 --> 00:29:42,520
that we see so they've got retina

712
00:29:42,520 --> 00:29:44,650
authentication and that's how they're

713
00:29:44,650 --> 00:29:46,360
using Microsoft fellow for business to

714
00:29:46,360 --> 00:29:48,550
be part of the domain although you can

715
00:29:48,550 --> 00:29:49,840
be sitting here and accessing the

716
00:29:49,840 --> 00:29:51,880
activity wireless network you can still

717
00:29:51,880 --> 00:29:53,560
access your internal applications and

718
00:29:53,560 --> 00:29:57,280
portals moving on quickly to to domain

719
00:29:57,280 --> 00:29:59,400
controller to the different parts of

720
00:29:59,400 --> 00:30:02,429
directory service agent sorry for the

721
00:30:02,429 --> 00:30:05,759
of a jump pair we need to discuss this

722
00:30:05,759 --> 00:30:07,710
because domain controller is the

723
00:30:07,710 --> 00:30:09,809
heartbeat of any network so if this is

724
00:30:09,809 --> 00:30:12,179
compromised you would know that these

725
00:30:12,179 --> 00:30:13,379
are the keys to the kingdom

726
00:30:13,379 --> 00:30:15,720
anybody can steal NTDs debt which is the

727
00:30:15,720 --> 00:30:17,190
database containing all the password

728
00:30:17,190 --> 00:30:19,679
hashes you can crack them or use other

729
00:30:19,679 --> 00:30:20,999
techniques where you don't need to crack

730
00:30:20,999 --> 00:30:23,309
them and pass on so directory service

731
00:30:23,309 --> 00:30:27,240
agent is actually holding holding all

732
00:30:27,240 --> 00:30:29,610
the all the all the cracks here which

733
00:30:29,610 --> 00:30:32,850
means this is main ad component and it

734
00:30:32,850 --> 00:30:34,889
runs as part of the else's process which

735
00:30:34,889 --> 00:30:36,779
is a local security authority subsystem

736
00:30:36,779 --> 00:30:38,850
and that takes care of the

737
00:30:38,850 --> 00:30:39,960
authentication packages and the user

738
00:30:39,960 --> 00:30:42,619
sauce is what so these are the

739
00:30:42,619 --> 00:30:44,669
interfaces here if you see the different

740
00:30:44,669 --> 00:30:46,830
two faces LDAP Rapala is for application

741
00:30:46,830 --> 00:30:48,929
listen messages this is for messaging

742
00:30:48,929 --> 00:30:50,820
and Sam is the security Accounts Manager

743
00:30:50,820 --> 00:30:54,330
and then there's an TDs a dot DLL which

744
00:30:54,330 --> 00:30:57,749
is the directory service agent air which

745
00:30:57,749 --> 00:31:00,480
provides interfaces through which

746
00:31:00,480 --> 00:31:02,429
directly clients can gain access to to

747
00:31:02,429 --> 00:31:03,899
the interactive database because

748
00:31:03,899 --> 00:31:05,639
database is here there's no direct

749
00:31:05,639 --> 00:31:07,169
interaction so it's us acting as a

750
00:31:07,169 --> 00:31:10,440
separation layer and then this is the

751
00:31:10,440 --> 00:31:12,330
physical structure so where the ant ID

752
00:31:12,330 --> 00:31:14,879
estate is so if you see the data file is

753
00:31:14,879 --> 00:31:16,590
here and there's a link table security

754
00:31:16,590 --> 00:31:19,169
descriptor table here and there's a log

755
00:31:19,169 --> 00:31:20,909
sale so if these logs overflow that

756
00:31:20,909 --> 00:31:22,440
there are new logs that are originally

757
00:31:22,440 --> 00:31:25,110
created and that's pretty much I guess

758
00:31:25,110 --> 00:31:27,899
the basics if you if you see this let's

759
00:31:27,899 --> 00:31:34,950
move on to to the hacking now so what

760
00:31:34,950 --> 00:31:37,769
we're gonna discuss here is now the main

761
00:31:37,769 --> 00:31:39,480
steps of a cyber kill chain which are

762
00:31:39,480 --> 00:31:41,159
actually related with Active Directory

763
00:31:41,159 --> 00:31:45,289
hacks so the CKC as they say

764
00:31:45,289 --> 00:31:47,940
lockheed-martin have developed this

765
00:31:47,940 --> 00:31:50,820
framework they call it secrecy so we'll

766
00:31:50,820 --> 00:31:56,450
be mostly dealing with these let me see

767
00:31:56,899 --> 00:32:00,590
so we'll see the the exploitation phase

768
00:32:00,590 --> 00:32:03,299
installation of any any malware on the

769
00:32:03,299 --> 00:32:05,460
owned assets inside and then the command

770
00:32:05,460 --> 00:32:07,470
and control servers which are for

771
00:32:07,470 --> 00:32:09,149
persistence to stay there and for

772
00:32:09,149 --> 00:32:10,980
lateral movement and then their actions

773
00:32:10,980 --> 00:32:12,539
on the objectives so whoever is hacking

774
00:32:12,539 --> 00:32:14,490
it he or she has got up up

775
00:32:14,490 --> 00:32:16,860
either to destroy some files or move

776
00:32:16,860 --> 00:32:18,990
some files out of the network or get out

777
00:32:18,990 --> 00:32:21,179
steal the passwords or they might have

778
00:32:21,179 --> 00:32:23,940
some anyway it could be to hack some

779
00:32:23,940 --> 00:32:28,200
elections I don't know this is actually

780
00:32:28,200 --> 00:32:31,850
the bulleted example for each step where

781
00:32:31,850 --> 00:32:34,380
it's not absolute list of options it's

782
00:32:34,380 --> 00:32:35,820
more like if a server intelligence

783
00:32:35,820 --> 00:32:38,059
analyst has to make an assessment as to

784
00:32:38,059 --> 00:32:41,760
what are the correct answers for threats

785
00:32:41,760 --> 00:32:43,860
facing them or the missions they're

786
00:32:43,860 --> 00:32:46,380
trying to support these in all the steps

787
00:32:46,380 --> 00:32:49,410
that actually from from the decision to

788
00:32:49,410 --> 00:32:53,070
act to actually provide executing those

789
00:32:53,070 --> 00:32:55,400
provided opportunities so I've

790
00:32:55,400 --> 00:32:58,320
highlighted these elements which are

791
00:32:58,320 --> 00:33:00,840
really related to our talk right now

792
00:33:00,840 --> 00:33:02,700
here so these are the ones which would

793
00:33:02,700 --> 00:33:06,690
be linked to an internal network here's

794
00:33:06,690 --> 00:33:09,120
the full link if you want to read the

795
00:33:09,120 --> 00:33:11,100
full intelligence report by them so on

796
00:33:11,100 --> 00:33:14,429
the nest site so most of time the attack

797
00:33:14,429 --> 00:33:18,150
techniques are actually in an internal

798
00:33:18,150 --> 00:33:21,210
network they start with with a ground up

799
00:33:21,210 --> 00:33:24,300
so that means you need to build up the

800
00:33:24,300 --> 00:33:26,040
ground first by collecting information

801
00:33:26,040 --> 00:33:29,309
and then analyzing them there are

802
00:33:29,309 --> 00:33:30,690
different techniques whether you need to

803
00:33:30,690 --> 00:33:32,340
make noise on the network or you just

804
00:33:32,340 --> 00:33:35,190
want to do it with say PowerShell tools

805
00:33:35,190 --> 00:33:37,350
these days or even with gabbros SPN

806
00:33:37,350 --> 00:33:39,300
scanning and stuff which I'm covering

807
00:33:39,300 --> 00:33:40,920
later and then the second part is

808
00:33:40,920 --> 00:33:42,120
escalating your privileges because

809
00:33:42,120 --> 00:33:44,010
you've gained access to it with

810
00:33:44,010 --> 00:33:45,480
low-level privileges you can never see

811
00:33:45,480 --> 00:33:47,910
or do these things like extracting

812
00:33:47,910 --> 00:33:50,220
passwords or performing functions to

813
00:33:50,220 --> 00:33:52,740
change the state of the of the system or

814
00:33:52,740 --> 00:33:54,570
deleting logs or things like these so

815
00:33:54,570 --> 00:33:56,820
you need higher-level privileges and

816
00:33:56,820 --> 00:33:59,490
then there's a stage where you access

817
00:33:59,490 --> 00:34:01,500
secrets which means the the passwords

818
00:34:01,500 --> 00:34:03,390
either in a clear text form or stealing

819
00:34:03,390 --> 00:34:08,730
the hashes or dumping them so your info

820
00:34:08,730 --> 00:34:10,980
collection is really a main part of this

821
00:34:10,980 --> 00:34:12,719
I would say it's a home work of any

822
00:34:12,719 --> 00:34:14,909
hacking exercise so for from the offense

823
00:34:14,909 --> 00:34:16,590
part we are dealing with this in three

824
00:34:16,590 --> 00:34:18,270
stages so recon is short for

825
00:34:18,270 --> 00:34:18,960
recognizance

826
00:34:18,960 --> 00:34:21,629
you're just as these terms originating

827
00:34:21,629 --> 00:34:23,909
from the military where they do these

828
00:34:23,909 --> 00:34:26,219
activities and then that's like

829
00:34:26,219 --> 00:34:28,260
gathering information and

830
00:34:28,260 --> 00:34:30,780
performing an analysis and then

831
00:34:30,780 --> 00:34:33,510
escalation target exploitation and as

832
00:34:33,510 --> 00:34:36,000
persistence means maintaining the access

833
00:34:36,000 --> 00:34:37,379
how you can maintain the access for as

834
00:34:37,379 --> 00:34:41,719
long as possible you need it now recon

835
00:34:41,719 --> 00:34:43,980
these are really basic things I put down

836
00:34:43,980 --> 00:34:45,540
but the the stress of women in this

837
00:34:45,540 --> 00:34:48,418
presentation is to not to tell you any

838
00:34:48,418 --> 00:34:50,219
references to other tools because we are

839
00:34:50,219 --> 00:34:52,050
looking at that the latest rays

840
00:34:52,050 --> 00:34:54,570
attackers are doing this is not using

841
00:34:54,570 --> 00:34:57,149
any custom built tools but using the

842
00:34:57,149 --> 00:34:58,800
built-in commands within the operating

843
00:34:58,800 --> 00:35:00,630
system or the servers or as part of the

844
00:35:00,630 --> 00:35:02,730
remote support tools which are installed

845
00:35:02,730 --> 00:35:04,470
on them but these are the basic dos

846
00:35:04,470 --> 00:35:06,300
commands or you can form user numeration

847
00:35:06,300 --> 00:35:08,840
in simple English this would be like

848
00:35:08,840 --> 00:35:11,250
retrieving a list of all the users that

849
00:35:11,250 --> 00:35:13,890
are part of a network that means part of

850
00:35:13,890 --> 00:35:17,100
your office or your corporation so this

851
00:35:17,100 --> 00:35:19,200
is this tells you which ports are

852
00:35:19,200 --> 00:35:21,480
actually used for querying this this is

853
00:35:21,480 --> 00:35:23,730
only one way through a protocol known as

854
00:35:23,730 --> 00:35:26,730
SMB there could be similar other ways to

855
00:35:26,730 --> 00:35:28,560
perform on different protocols as an MP

856
00:35:28,560 --> 00:35:33,420
or or anything else so there's a

857
00:35:33,420 --> 00:35:35,850
technique this is known as recycling the

858
00:35:35,850 --> 00:35:37,170
term I mentioned earlier security

859
00:35:37,170 --> 00:35:39,300
identifier looks like this so even if

860
00:35:39,300 --> 00:35:41,520
you have changed for example rename the

861
00:35:41,520 --> 00:35:44,340
administrator to say guest but that

862
00:35:44,340 --> 00:35:46,650
doesn't mean he's a guest user so this

863
00:35:46,650 --> 00:35:48,840
is the identity that tells you at the

864
00:35:48,840 --> 00:35:51,330
back end whether it's really a admin or

865
00:35:51,330 --> 00:35:53,970
a serial user so 500 is always fixed for

866
00:35:53,970 --> 00:35:55,680
a built in administrator so you will

867
00:35:55,680 --> 00:35:58,160
know that this is there so that's like a

868
00:35:58,160 --> 00:36:02,190
security by obscurity if we say moving

869
00:36:02,190 --> 00:36:04,320
on to red so I claim yeah this is just a

870
00:36:04,320 --> 00:36:05,820
one of the ways so you can do it from

871
00:36:05,820 --> 00:36:07,410
one a tentacle perspective or with the

872
00:36:07,410 --> 00:36:09,570
tentacle perspective as well time to get

873
00:36:09,570 --> 00:36:12,060
it would be a user user privileges and

874
00:36:12,060 --> 00:36:14,430
then this is how it looks like just a

875
00:36:14,430 --> 00:36:17,040
quick screen shot the reason of putting

876
00:36:17,040 --> 00:36:18,960
this here is because this will make the

877
00:36:18,960 --> 00:36:20,340
sort of access will make noise on the

878
00:36:20,340 --> 00:36:21,720
network if you got the right level of

879
00:36:21,720 --> 00:36:23,790
monitoring and event analysis going on

880
00:36:23,790 --> 00:36:25,950
so you should have this as a first alarm

881
00:36:25,950 --> 00:36:27,300
that there's some activity going on the

882
00:36:27,300 --> 00:36:30,810
network there moving on to escalation so

883
00:36:30,810 --> 00:36:32,430
these are a little bit of different

884
00:36:32,430 --> 00:36:33,750
techniques or you can gather information

885
00:36:33,750 --> 00:36:36,140
about the operating system that you have

886
00:36:36,140 --> 00:36:38,730
jumped on and the patch levels to

887
00:36:38,730 --> 00:36:40,980
quickly find out if there's any any ways

888
00:36:40,980 --> 00:36:41,910
to escalate

889
00:36:41,910 --> 00:36:45,030
is locally and then all the information

890
00:36:45,030 --> 00:36:46,740
more networking 5-volt state what's

891
00:36:46,740 --> 00:36:48,770
running there and the societal process

892
00:36:48,770 --> 00:36:51,000
similarly little more tricks there I

893
00:36:51,000 --> 00:36:53,280
guess some of them if you see are

894
00:36:53,280 --> 00:36:56,190
similar to the previous talk soliton I

895
00:36:56,190 --> 00:36:58,079
mentioned group policy references as

896
00:36:58,079 --> 00:37:00,230
well

897
00:37:00,869 --> 00:37:02,880
this is a quick cheat sheet really that

898
00:37:02,880 --> 00:37:04,710
you always look for veneer part of the

899
00:37:04,710 --> 00:37:06,150
networking looking to escalate

900
00:37:06,150 --> 00:37:09,030
privileges I'll take you straight to the

901
00:37:09,030 --> 00:37:11,010
domain controllers what we can do about

902
00:37:11,010 --> 00:37:12,660
these so most common ways for

903
00:37:12,660 --> 00:37:14,280
compromising a domain controller really

904
00:37:14,280 --> 00:37:17,609
contain the cat bros attacks these days

905
00:37:17,609 --> 00:37:19,770
because they are stealth they're a quick

906
00:37:19,770 --> 00:37:21,690
easy win within 5-10 minutes you could

907
00:37:21,690 --> 00:37:23,490
have the highest level of privileges in

908
00:37:23,490 --> 00:37:26,039
a in a network and then all these

909
00:37:26,039 --> 00:37:28,049
techniques pass the hash pass the ticket

910
00:37:28,049 --> 00:37:30,180
over pass the hash and then looking for

911
00:37:30,180 --> 00:37:31,760
any insko service permissions like

912
00:37:31,760 --> 00:37:34,319
dalton said i guess actually he's made

913
00:37:34,319 --> 00:37:36,450
my job easy now i can refer the examples

914
00:37:36,450 --> 00:37:38,369
back to the previous talk and that talk

915
00:37:38,369 --> 00:37:39,809
was not supposed to happen i guess one

916
00:37:39,809 --> 00:37:41,700
of the speakers backed out so they put

917
00:37:41,700 --> 00:37:44,520
sultan to do that exercise so that's a

918
00:37:44,520 --> 00:37:48,000
good one and then the stepping up other

919
00:37:48,000 --> 00:37:49,289
member service so if you have

920
00:37:49,289 --> 00:37:51,119
compromised one server you can actually

921
00:37:51,119 --> 00:37:52,619
use some techniques like pass the hash

922
00:37:52,619 --> 00:37:53,940
to jump on the other servers on the

923
00:37:53,940 --> 00:37:55,500
network till you find the highest level

924
00:37:55,500 --> 00:37:57,660
privilege they looking for and then

925
00:37:57,660 --> 00:37:59,130
there could be nested administration

926
00:37:59,130 --> 00:38:01,200
groups where the privileges are screwed

927
00:38:01,200 --> 00:38:06,809
up so this is the talk from there

928
00:38:06,809 --> 00:38:10,380
Kerberos attacks start so SPN scanning

929
00:38:10,380 --> 00:38:11,970
is one of the ways to actually quickly

930
00:38:11,970 --> 00:38:15,089
to stealth exercise to find out all the

931
00:38:15,089 --> 00:38:17,250
service principal names it stands for

932
00:38:17,250 --> 00:38:18,990
service principal names it's mainly for

933
00:38:18,990 --> 00:38:21,390
service accounts so the soviets counts

934
00:38:21,390 --> 00:38:23,880
are most likely configured with higher

935
00:38:23,880 --> 00:38:25,710
privileged accounts so that's a quick

936
00:38:25,710 --> 00:38:27,650
vin if you actually get round to those

937
00:38:27,650 --> 00:38:30,660
accounts so any of these services that

938
00:38:30,660 --> 00:38:32,640
doesn't mean this is the whole list it

939
00:38:32,640 --> 00:38:33,990
could be any of these services sickles

940
00:38:33,990 --> 00:38:36,390
over or RDP protocol or could be

941
00:38:36,390 --> 00:38:37,980
exchanged client access service running

942
00:38:37,980 --> 00:38:41,039
the SPN so you can request the SPN types

943
00:38:41,039 --> 00:38:43,109
from from a domain controller with a

944
00:38:43,109 --> 00:38:45,569
domain account that means you need a low

945
00:38:45,569 --> 00:38:47,760
level privilege at least a user level

946
00:38:47,760 --> 00:38:49,710
privilege on a Windows network to to

947
00:38:49,710 --> 00:38:52,740
query this and then using those you can

948
00:38:52,740 --> 00:38:55,099
actually request Kerberos TGS which

949
00:38:55,099 --> 00:38:58,160
Atika granting service request ticket

950
00:38:58,160 --> 00:39:00,979
useful to find out whether you can

951
00:39:00,979 --> 00:39:05,539
actually get the ticket issued to you so

952
00:39:05,539 --> 00:39:08,269
when I say this ticket that actually is

953
00:39:08,269 --> 00:39:11,210
encrypted with some algorithm and inside

954
00:39:11,210 --> 00:39:16,249
that is the his access for that so the

955
00:39:16,249 --> 00:39:18,769
encryption used is actually most of the

956
00:39:18,769 --> 00:39:21,979
times if it's using rc4 then it could be

957
00:39:21,979 --> 00:39:24,109
ntlm based password that you can

958
00:39:24,109 --> 00:39:25,970
brute-force to find out the password

959
00:39:25,970 --> 00:39:28,339
offline and then silver and golden

960
00:39:28,339 --> 00:39:30,140
tickets so silver is the one where you

961
00:39:30,140 --> 00:39:32,779
get TGS to take a grounding service

962
00:39:32,779 --> 00:39:35,509
ticket for service count t GT is the

963
00:39:35,509 --> 00:39:37,460
ticket granting ticket from KDC from the

964
00:39:37,460 --> 00:39:39,859
key distribution server of Kerberos that

965
00:39:39,859 --> 00:39:42,979
takes care of it then the the famous I

966
00:39:42,979 --> 00:39:45,289
must 14 o 68 where a fake ticket can be

967
00:39:45,289 --> 00:39:47,299
can be issued to the Kerberos to get

968
00:39:47,299 --> 00:39:51,410
access as a domain administrator as a

969
00:39:51,410 --> 00:39:54,109
user admin sorry as a normal user in a

970
00:39:54,109 --> 00:39:56,809
domain and then there's a Kerberos

971
00:39:56,809 --> 00:39:58,729
technique which is which is quite famous

972
00:39:58,729 --> 00:40:01,789
so Kerberos is really like the it's the

973
00:40:01,789 --> 00:40:03,880
same process that I've explained above

974
00:40:03,880 --> 00:40:06,799
it's like a really effective method for

975
00:40:06,799 --> 00:40:08,359
extracting service account credentials

976
00:40:08,359 --> 00:40:10,219
starting with us been scanning as I said

977
00:40:10,219 --> 00:40:12,710
from ad as a regular user so you are not

978
00:40:12,710 --> 00:40:14,059
sending any packets so you know making

979
00:40:14,059 --> 00:40:16,519
noise by because users tend to choose

980
00:40:16,519 --> 00:40:18,529
poor passwords and then the same goes

981
00:40:18,529 --> 00:40:20,569
for service accounts so if the service

982
00:40:20,569 --> 00:40:21,950
counts are of the same length has domain

983
00:40:21,950 --> 00:40:24,079
passes they're not a big deal to be to

984
00:40:24,079 --> 00:40:26,690
be correct so you you get the hash and

985
00:40:26,690 --> 00:40:28,700
then you just throw the brute-forcing

986
00:40:28,700 --> 00:40:30,440
offline against it until you find a

987
00:40:30,440 --> 00:40:33,529
right right password for that in order

988
00:40:33,529 --> 00:40:38,769
to crack it and use the use the service

989
00:40:43,710 --> 00:40:45,910
yeah but it's also possible if you can

990
00:40:45,910 --> 00:40:49,290
sniff the tickets sometime with the rc4

991
00:40:49,290 --> 00:40:51,730
cipher that we're saying is the problem

992
00:40:51,730 --> 00:40:54,310
with the Kerberos technique and the

993
00:40:54,310 --> 00:40:56,230
weakness that it's tries to exploit so

994
00:40:56,230 --> 00:40:58,570
if you are able to sniff that sorry the

995
00:40:58,570 --> 00:41:00,609
sniff is not the English sniff word I'm

996
00:41:00,609 --> 00:41:02,950
using a sniff is more like if you're

997
00:41:02,950 --> 00:41:05,109
eavesdropping on a network and you go to

998
00:41:05,109 --> 00:41:07,900
access to and you're capable to monitor

999
00:41:07,900 --> 00:41:09,849
network traffic over a wire then you'll

1000
00:41:09,849 --> 00:41:12,700
be able to get that pass get that packet

1001
00:41:12,700 --> 00:41:15,130
information out so that's what sniffing

1002
00:41:15,130 --> 00:41:20,770
means in the security world so yeah I'm

1003
00:41:20,770 --> 00:41:22,570
us 14 Oh 68 so I'll go into details of

1004
00:41:22,570 --> 00:41:25,599
this to show quickly who was the problem

1005
00:41:25,599 --> 00:41:27,400
so basically you're able to request the

1006
00:41:27,400 --> 00:41:29,590
TGT without pack pack is a privileged

1007
00:41:29,590 --> 00:41:31,840
attribute cert but by by sending

1008
00:41:31,840 --> 00:41:34,000
actually just a normal request with a be

1009
00:41:34,000 --> 00:41:37,390
a pack request set to false and the

1010
00:41:37,390 --> 00:41:39,160
reason that the whole process here is

1011
00:41:39,160 --> 00:41:41,460
that we are trying to fold your back

1012
00:41:41,460 --> 00:41:45,390
because if with a normal user privileges

1013
00:41:45,390 --> 00:41:48,430
the pack can be forged because because

1014
00:41:48,430 --> 00:41:51,099
of the way domain controllers missing

1015
00:41:51,099 --> 00:41:52,720
this patch and the problem with the kgt

1016
00:41:52,720 --> 00:41:56,109
the Kerberos and then once you have

1017
00:41:56,109 --> 00:41:58,900
created tasty G's tedious RQ message

1018
00:41:58,900 --> 00:42:01,900
with the krbtgt which is the user for

1019
00:42:01,900 --> 00:42:04,390
Kerberos in a Windows environment you

1020
00:42:04,390 --> 00:42:06,940
can actually use this along with the

1021
00:42:06,940 --> 00:42:09,700
fake pack that you created to send this

1022
00:42:09,700 --> 00:42:12,190
to vulnerable DC and that will that will

1023
00:42:12,190 --> 00:42:14,740
issue you a new Kerberos ticket that you

1024
00:42:14,740 --> 00:42:16,960
can say when use it for its lifespan so

1025
00:42:16,960 --> 00:42:18,400
that means you'll have unrestricted

1026
00:42:18,400 --> 00:42:21,030
access for the lifespan of that ticket

1027
00:42:21,030 --> 00:42:24,010
the by default that ticket is issued for

1028
00:42:24,010 --> 00:42:27,070
a life span of 7 days after that it

1029
00:42:27,070 --> 00:42:29,230
expires so then probably the domain

1030
00:42:29,230 --> 00:42:32,349
controller is yours these are this is

1031
00:42:32,349 --> 00:42:34,000
the minimum information you need in

1032
00:42:34,000 --> 00:42:36,310
order to run this by cacti cake is just

1033
00:42:36,310 --> 00:42:38,950
the name of the exploit which is written

1034
00:42:38,950 --> 00:42:40,720
in this Python script that when you ran

1035
00:42:40,720 --> 00:42:43,060
when you run this you need at least so

1036
00:42:43,060 --> 00:42:45,130
for example I've shown Bob here Bob is

1037
00:42:45,130 --> 00:42:47,170
like normal domain user so you need his

1038
00:42:47,170 --> 00:42:48,849
username password security identifier

1039
00:42:48,849 --> 00:42:50,950
which you can find out he's livid hue my

1040
00:42:50,950 --> 00:42:52,470
command on the DOS

1041
00:42:52,470 --> 00:42:54,820
you need the name of the DC domain

1042
00:42:54,820 --> 00:42:55,720
controller

1043
00:42:55,720 --> 00:42:56,950
and then you need to make sure the time

1044
00:42:56,950 --> 00:42:58,510
is synced from the computer you're

1045
00:42:58,510 --> 00:43:00,190
trying to hack with the domain

1046
00:43:00,190 --> 00:43:01,780
controller because time synchronization

1047
00:43:01,780 --> 00:43:04,119
is important factor when it comes to

1048
00:43:04,119 --> 00:43:08,080
Kerberos volt this is just showing you

1049
00:43:08,080 --> 00:43:11,560
hoe with user Bob's credentials we are

1050
00:43:11,560 --> 00:43:15,310
trying to request to DC for a ticket and

1051
00:43:15,310 --> 00:43:17,020
this is the name of the ticket that we

1052
00:43:17,020 --> 00:43:18,490
have gone and that we've got

1053
00:43:18,490 --> 00:43:21,250
successfully you can move it to two

1054
00:43:21,250 --> 00:43:24,400
local temp directory where you want and

1055
00:43:24,400 --> 00:43:25,930
then you can present it with one of the

1056
00:43:25,930 --> 00:43:29,619
one of the SMB clients this I'm doing

1057
00:43:29,619 --> 00:43:32,740
from the for the linux linux distro so

1058
00:43:32,740 --> 00:43:35,290
you can have access to to the drive

1059
00:43:35,290 --> 00:43:36,369
whichever you want because now that

1060
00:43:36,369 --> 00:43:38,260
ticket is valid through the domain with

1061
00:43:38,260 --> 00:43:40,780
the super admin privileges this is this

1062
00:43:40,780 --> 00:43:42,730
is one example of attack for the

1063
00:43:42,730 --> 00:43:46,180
Kerberos fake ticket attack but one of

1064
00:43:46,180 --> 00:43:47,740
the other ways which is really stealth

1065
00:43:47,740 --> 00:43:49,720
and very popular these days in the

1066
00:43:49,720 --> 00:43:51,550
Scotty comment is using offensive

1067
00:43:51,550 --> 00:43:54,900
PowerShell I've named some of the

1068
00:43:54,900 --> 00:43:57,520
modules here which are popular used by

1069
00:43:57,520 --> 00:44:01,240
the pen testers around to bypass loads

1070
00:44:01,240 --> 00:44:03,580
of controls inside so for any security

1071
00:44:03,580 --> 00:44:05,650
intelligent products they miss because

1072
00:44:05,650 --> 00:44:07,930
it's very stealth there's no noise made

1073
00:44:07,930 --> 00:44:09,820
on the network and it's a new concept so

1074
00:44:09,820 --> 00:44:11,380
people and businesses are taking too

1075
00:44:11,380 --> 00:44:14,410
long to enable say PowerShell logging

1076
00:44:14,410 --> 00:44:20,830
and related mitigations talking about

1077
00:44:20,830 --> 00:44:23,260
passwords so once you have that access

1078
00:44:23,260 --> 00:44:25,210
you can always dump these passwords also

1079
00:44:25,210 --> 00:44:27,670
using the built-in built-in controls for

1080
00:44:27,670 --> 00:44:30,280
example you don't need to create for

1081
00:44:30,280 --> 00:44:33,430
example doing alsace injection to get

1082
00:44:33,430 --> 00:44:35,920
the hashes out or to dump all the user

1083
00:44:35,920 --> 00:44:38,050
hashes you can always use NTDs util dot

1084
00:44:38,050 --> 00:44:42,280
exe which is inbuilt and TBS binary in

1085
00:44:42,280 --> 00:44:44,410
the domain controllers and you can

1086
00:44:44,410 --> 00:44:45,970
create a snapshot of an to get state

1087
00:44:45,970 --> 00:44:47,830
database move that database and you can

1088
00:44:47,830 --> 00:44:50,650
always cracked under hashes from that so

1089
00:44:50,650 --> 00:44:52,030
there's no need for injections or other

1090
00:44:52,030 --> 00:44:55,270
techniques here as we see the threat

1091
00:44:55,270 --> 00:44:56,920
landscape is changing very fast so

1092
00:44:56,920 --> 00:44:58,720
today's attacks are actually outsmarting

1093
00:44:58,720 --> 00:45:00,760
the traditional attacks using the tools

1094
00:45:00,760 --> 00:45:03,310
or the techniques and the frameworks

1095
00:45:03,310 --> 00:45:07,540
which are now probably banned so the

1096
00:45:07,540 --> 00:45:09,100
another factor that's

1097
00:45:09,100 --> 00:45:11,500
actually helping these attackers get

1098
00:45:11,500 --> 00:45:13,360
more smarter results so the security

1099
00:45:13,360 --> 00:45:15,550
analytics work which is missed by the

1100
00:45:15,550 --> 00:45:18,640
threat side of the world so that the

1101
00:45:18,640 --> 00:45:21,160
defensive side actually is also stepping

1102
00:45:21,160 --> 00:45:23,080
up their game by using the security

1103
00:45:23,080 --> 00:45:26,110
analytics which means security analytics

1104
00:45:26,110 --> 00:45:28,270
is all about setting a baseline based on

1105
00:45:28,270 --> 00:45:30,760
the patterns collected on the user

1106
00:45:30,760 --> 00:45:32,650
objects in a domain so you will actually

1107
00:45:32,650 --> 00:45:36,810
be creating like some sort of mechanism

1108
00:45:36,810 --> 00:45:39,160
without deploying any agents and all

1109
00:45:39,160 --> 00:45:40,570
with all the information more the domain

1110
00:45:40,570 --> 00:45:43,300
objects and attributes to make sure you

1111
00:45:43,300 --> 00:45:45,130
can use that information in correlation

1112
00:45:45,130 --> 00:45:47,710
with the detection attacks to make sure

1113
00:45:47,710 --> 00:45:51,370
that you catch the attacker activities

1114
00:45:51,370 --> 00:45:53,260
early in the cycle not when the

1115
00:45:53,260 --> 00:45:54,970
compromise has happened but when the

1116
00:45:54,970 --> 00:45:56,920
recognizance or the earlier phases are

1117
00:45:56,920 --> 00:45:58,960
going on so that's what these threat

1118
00:45:58,960 --> 00:46:01,480
solutions are are these days I mean

1119
00:46:01,480 --> 00:46:03,010
there are a couple of them going on for

1120
00:46:03,010 --> 00:46:04,330
example you have heard of Microsoft

1121
00:46:04,330 --> 00:46:07,200
advanced threat analytics thus known as

1122
00:46:07,200 --> 00:46:10,150
doing some news around the zero data

1123
00:46:10,150 --> 00:46:12,610
centers Microsoft has also started

1124
00:46:12,610 --> 00:46:14,260
rolling out slowly to the corporate

1125
00:46:14,260 --> 00:46:17,560
world but also I guess one Israeli based

1126
00:46:17,560 --> 00:46:19,300
startup is their javelin networks they

1127
00:46:19,300 --> 00:46:22,600
have developed some product which is ad

1128
00:46:22,600 --> 00:46:24,850
protect that also works on a similar

1129
00:46:24,850 --> 00:46:25,180
manner

1130
00:46:25,180 --> 00:46:27,970
so yeah in defense these are the three

1131
00:46:27,970 --> 00:46:29,980
mechanism that we can actually use you

1132
00:46:29,980 --> 00:46:32,050
know it's like a sequential approach we

1133
00:46:32,050 --> 00:46:34,480
can apply to in a different manner

1134
00:46:34,480 --> 00:46:37,300
which will be identifying any any events

1135
00:46:37,300 --> 00:46:38,890
which are in action for example recon

1136
00:46:38,890 --> 00:46:40,600
activities using instant on event

1137
00:46:40,600 --> 00:46:42,850
monitoring then you can mitigate threats

1138
00:46:42,850 --> 00:46:45,840
to to the infrastructure with the use of

1139
00:46:45,840 --> 00:46:47,980
efficient volunteer management process

1140
00:46:47,980 --> 00:46:50,380
and then prevent is all about stepping

1141
00:46:50,380 --> 00:46:53,830
up your techniques and defenses to make

1142
00:46:53,830 --> 00:46:55,630
sure next time the same mistakes are not

1143
00:46:55,630 --> 00:46:57,670
repeated using the purple teaming or

1144
00:46:57,670 --> 00:47:00,880
honey pots or we have a keynote tomorrow

1145
00:47:00,880 --> 00:47:03,490
or with her own mayor so don't miss his

1146
00:47:03,490 --> 00:47:06,130
talk is really one of the famous

1147
00:47:06,130 --> 00:47:08,230
personalities we have his idea the

1148
00:47:08,230 --> 00:47:10,510
started his company was doing is very

1149
00:47:10,510 --> 00:47:12,040
good mechanism as well similar to

1150
00:47:12,040 --> 00:47:15,610
honeypot so well he hasn't paid me or I

1151
00:47:15,610 --> 00:47:16,870
have gotten no connections but just

1152
00:47:16,870 --> 00:47:17,890
saying because it came to my mind

1153
00:47:17,890 --> 00:47:21,630
talking about the difference and then

1154
00:47:21,630 --> 00:47:25,240
after that the calbro's attacks we

1155
00:47:25,240 --> 00:47:27,580
discussed now from the defense side what

1156
00:47:27,580 --> 00:47:29,920
all we can do so as I said because of

1157
00:47:29,920 --> 00:47:31,420
the issue with the Kerberos thing was

1158
00:47:31,420 --> 00:47:33,490
really about exploiting the rc4 cipher

1159
00:47:33,490 --> 00:47:35,500
based encryption type so we can always

1160
00:47:35,500 --> 00:47:39,180
look out for that when when the Kerberos

1161
00:47:39,180 --> 00:47:42,250
noise are is made if you're logging is

1162
00:47:42,250 --> 00:47:43,810
enabled efficiently so you can always

1163
00:47:43,810 --> 00:47:45,580
look for these events here these ones

1164
00:47:45,580 --> 00:47:49,540
where cat Ross tickets is requested this

1165
00:47:49,540 --> 00:47:51,160
will be and then with the ticket

1166
00:47:51,160 --> 00:47:53,320
was renewed so the first event is very

1167
00:47:53,320 --> 00:47:55,810
noisy so that the volume of logs is

1168
00:47:55,810 --> 00:47:57,780
quite high so you need to make sure that

1169
00:47:57,780 --> 00:48:01,000
you are keeping the balance and and

1170
00:48:01,000 --> 00:48:03,070
making sure that the configurations are

1171
00:48:03,070 --> 00:48:04,810
right in terms not to avoid any

1172
00:48:04,810 --> 00:48:09,730
shutdowns yeah so these are again admin

1173
00:48:09,730 --> 00:48:12,180
log on log off event and then the golden

1174
00:48:12,180 --> 00:48:15,250
for golden ticket you need to look at

1175
00:48:15,250 --> 00:48:17,200
the logs at the bc only or the domain

1176
00:48:17,200 --> 00:48:19,240
controller and for the silver tickets

1177
00:48:19,240 --> 00:48:21,250
it's from any member of the domain which

1178
00:48:21,250 --> 00:48:23,140
is any computer part of the domain will

1179
00:48:23,140 --> 00:48:25,839
be sending that generating that event so

1180
00:48:25,839 --> 00:48:27,339
if we are if we are doing the event

1181
00:48:27,339 --> 00:48:29,710
logging respectfully I guess that would

1182
00:48:29,710 --> 00:48:32,440
be really helpful here this is the list

1183
00:48:32,440 --> 00:48:35,320
on our Microsoft blog site of the after

1184
00:48:35,320 --> 00:48:37,380
cipher sorry for the encryption types

1185
00:48:37,380 --> 00:48:40,630
which is in the hacks if you see oh 17

1186
00:48:40,630 --> 00:48:44,800
this is the 17 and 18 so these are let's

1187
00:48:44,800 --> 00:48:47,920
see for ciphers that can be used to as a

1188
00:48:47,920 --> 00:48:51,339
keywords to block this although the

1189
00:48:51,339 --> 00:48:52,570
modern operating systems when as a

1190
00:48:52,570 --> 00:48:55,450
modern since windows indict the Kerberos

1191
00:48:55,450 --> 00:48:58,270
itself has been added with AES support

1192
00:48:58,270 --> 00:49:01,230
which is AES 128 and 256 bits but then

1193
00:49:01,230 --> 00:49:03,700
sometime before the big corporations

1194
00:49:03,700 --> 00:49:04,869
what's happening is inter 4s

1195
00:49:04,869 --> 00:49:06,400
communication is there and then that

1196
00:49:06,400 --> 00:49:09,460
enter forest support still doesn't use

1197
00:49:09,460 --> 00:49:11,290
automatically so that's configured with

1198
00:49:11,290 --> 00:49:16,089
rc4 so that needs to be done to improve

1199
00:49:16,089 --> 00:49:18,520
it to a yes to enable that support is

1200
00:49:18,520 --> 00:49:21,550
there for the trust so this is where the

1201
00:49:21,550 --> 00:49:23,619
or it can be set within the win the

1202
00:49:23,619 --> 00:49:27,130
group policy these two events this is

1203
00:49:27,130 --> 00:49:29,740
how it looks like in Axum format any

1204
00:49:29,740 --> 00:49:32,170
event log so if you see here this is

1205
00:49:32,170 --> 00:49:33,970
event ID and then this is the

1206
00:49:33,970 --> 00:49:35,710
information about the username

1207
00:49:35,710 --> 00:49:37,599
just targeted for the event logging and

1208
00:49:37,599 --> 00:49:40,420
then there's a domain name and the

1209
00:49:40,420 --> 00:49:41,800
related information the city is there

1210
00:49:41,800 --> 00:49:44,650
which is a security identifier so now

1211
00:49:44,650 --> 00:49:46,480
the monitoring recommendation because if

1212
00:49:46,480 --> 00:49:47,980
you keep on monitoring everything okay

1213
00:49:47,980 --> 00:49:49,900
let's start doing this that could be so

1214
00:49:49,900 --> 00:49:52,660
much of pain because the volume of the

1215
00:49:52,660 --> 00:49:55,450
traffic being collected is humongous so

1216
00:49:55,450 --> 00:49:57,130
that becomes the operational overhead as

1217
00:49:57,130 --> 00:49:58,990
well so you need to keep in mind which

1218
00:49:58,990 --> 00:50:01,570
all categories you should go for for

1219
00:50:01,570 --> 00:50:02,560
example you're looking for high

1220
00:50:02,560 --> 00:50:04,390
privileged accounts and ways that main

1221
00:50:04,390 --> 00:50:07,270
domain admin and built-in admins DBAs

1222
00:50:07,270 --> 00:50:09,820
and then account naming conventions for

1223
00:50:09,820 --> 00:50:13,780
example this is this is very common team

1224
00:50:13,780 --> 00:50:15,430
deployed by that means all these

1225
00:50:15,430 --> 00:50:18,010
machines in a network are named using a

1226
00:50:18,010 --> 00:50:20,080
naming notation so you can easily set

1227
00:50:20,080 --> 00:50:21,670
some regular expression to see that if

1228
00:50:21,670 --> 00:50:24,190
the name is not familiar to your company

1229
00:50:24,190 --> 00:50:26,740
that means some other laptop or machine

1230
00:50:26,740 --> 00:50:28,060
is connect to the network so you can

1231
00:50:28,060 --> 00:50:30,609
always raise that as to be logged so

1232
00:50:30,609 --> 00:50:31,869
that can be dealt with quickly

1233
00:50:31,869 --> 00:50:34,180
similarly outside working over people or

1234
00:50:34,180 --> 00:50:36,400
external vendors and then non-active

1235
00:50:36,400 --> 00:50:38,170
disabled or guest accounts there also

1236
00:50:38,170 --> 00:50:40,150
red alert and then restricted use

1237
00:50:40,150 --> 00:50:42,849
systems or devices for example sometimes

1238
00:50:42,849 --> 00:50:44,440
companies leave the screens outside

1239
00:50:44,440 --> 00:50:46,450
running and those kiosk modes are

1240
00:50:46,450 --> 00:50:47,859
actually Windows operating systems

1241
00:50:47,859 --> 00:50:51,099
behind the scenes so they can be broken

1242
00:50:51,099 --> 00:50:52,810
out off just like Citrix or any other

1243
00:50:52,810 --> 00:50:57,700
remote working desktops detection

1244
00:50:57,700 --> 00:51:00,220
process so protection for process for

1245
00:51:00,220 --> 00:51:01,839
offensive PowerShell these days is very

1246
00:51:01,839 --> 00:51:04,570
important because Porsche has come up

1247
00:51:04,570 --> 00:51:06,460
with really lot of security enhancements

1248
00:51:06,460 --> 00:51:08,830
since version 5 so you can actually

1249
00:51:08,830 --> 00:51:11,440
enable the logging per module and then

1250
00:51:11,440 --> 00:51:15,369
the script block logging here will log

1251
00:51:15,369 --> 00:51:17,800
pretty much everything for you that

1252
00:51:17,800 --> 00:51:20,349
means that the way they are executing it

1253
00:51:20,349 --> 00:51:21,849
will contain the full content of the

1254
00:51:21,849 --> 00:51:26,950
code the entire script and also if it's

1255
00:51:26,950 --> 00:51:28,570
addy office created code sometimes you

1256
00:51:28,570 --> 00:51:31,660
use - encoded for base64 or any other

1257
00:51:31,660 --> 00:51:34,599
things - to pass your payload without

1258
00:51:34,599 --> 00:51:37,630
getting recognized and that will also be

1259
00:51:37,630 --> 00:51:39,490
there so it really provides a good base

1260
00:51:39,490 --> 00:51:43,359
for incident response jobs this is

1261
00:51:43,359 --> 00:51:46,060
because it's automatically enabled these

1262
00:51:46,060 --> 00:51:48,280
are log events you need to set it to off

1263
00:51:48,280 --> 00:51:49,240
or configure

1264
00:51:49,240 --> 00:51:51,430
the way you want it this is mainly for

1265
00:51:51,430 --> 00:51:53,560
PowerShell the tools here when I refer I

1266
00:51:53,560 --> 00:51:55,870
guess most of times mimic ATS is is very

1267
00:51:55,870 --> 00:51:58,480
popular through PowerShell to to read

1268
00:51:58,480 --> 00:52:00,160
passwords in clear-text or pick up

1269
00:52:00,160 --> 00:52:02,800
hashes or changed passwords or the

1270
00:52:02,800 --> 00:52:05,350
hashes for certain users so these are

1271
00:52:05,350 --> 00:52:06,960
the keywords that can be used to

1272
00:52:06,960 --> 00:52:10,330
actually sort out or to search through

1273
00:52:10,330 --> 00:52:12,430
the logs and they can be further taken

1274
00:52:12,430 --> 00:52:14,500
for analysis and the event ID is this

1275
00:52:14,500 --> 00:52:18,400
one for 103 these are just the examples

1276
00:52:18,400 --> 00:52:19,990
this is not a full list of when you're

1277
00:52:19,990 --> 00:52:22,060
monitoring some ad events which all

1278
00:52:22,060 --> 00:52:24,730
events are actually of some importance

1279
00:52:24,730 --> 00:52:27,280
because obviously this side is the

1280
00:52:27,280 --> 00:52:28,870
security world where you want to log in

1281
00:52:28,870 --> 00:52:30,430
everything but this side is also the

1282
00:52:30,430 --> 00:52:31,690
administration and the business side of

1283
00:52:31,690 --> 00:52:33,850
compulsions where you need to set a

1284
00:52:33,850 --> 00:52:35,500
balance you can't have a big team

1285
00:52:35,500 --> 00:52:36,940
actually just looking at the logs whole

1286
00:52:36,940 --> 00:52:38,500
day it's it's a headache at the end of

1287
00:52:38,500 --> 00:52:42,550
the day so you need to only log optimum

1288
00:52:42,550 --> 00:52:44,800
amount of data that can also be dealt

1289
00:52:44,800 --> 00:52:48,340
with accordingly fast so this is a quick

1290
00:52:48,340 --> 00:52:50,230
list but I've also put a link here that

1291
00:52:50,230 --> 00:52:53,230
that contains audit sensitive privilege

1292
00:52:53,230 --> 00:52:55,510
use which will contain all the elements

1293
00:52:55,510 --> 00:52:58,300
for example if a token is created if

1294
00:52:58,300 --> 00:53:01,510
debug programs are there or any drivers

1295
00:53:01,510 --> 00:53:04,060
are loaded or any firmware and one mint

1296
00:53:04,060 --> 00:53:07,180
values are changed or somebody's

1297
00:53:07,180 --> 00:53:09,370
impersonating a client basically all the

1298
00:53:09,370 --> 00:53:12,100
sensitive parts which will issue issue

1299
00:53:12,100 --> 00:53:16,930
red flag and in the mitigate approach

1300
00:53:16,930 --> 00:53:19,660
it's all about how Kerberos thing can be

1301
00:53:19,660 --> 00:53:22,840
actually mitigated or Outsiders can be

1302
00:53:22,840 --> 00:53:25,000
reduced or minimized you can always set

1303
00:53:25,000 --> 00:53:27,130
the service account passwords to - quite

1304
00:53:27,130 --> 00:53:29,980
long practice and ensure that these are

1305
00:53:29,980 --> 00:53:33,190
not guessable and then there's a new

1306
00:53:33,190 --> 00:53:35,410
concept launched by Microsoft during we

1307
00:53:35,410 --> 00:53:38,020
understand this MSI which is

1308
00:53:38,020 --> 00:53:40,180
anti-malware scan interface this can be

1309
00:53:40,180 --> 00:53:40,840
integrated

1310
00:53:40,840 --> 00:53:43,240
wherever Windows BitDefender is so the

1311
00:53:43,240 --> 00:53:44,650
whole game is being changed by Microsoft

1312
00:53:44,650 --> 00:53:47,230
now if you see next two years I highly

1313
00:53:47,230 --> 00:53:49,410
believe that if you see Windows

1314
00:53:49,410 --> 00:53:51,160
BitDefender I don't know how many of you

1315
00:53:51,160 --> 00:53:53,310
rely on this but I rely on its heavily

1316
00:53:53,310 --> 00:53:55,570
for understand you don't need to spend

1317
00:53:55,570 --> 00:53:57,250
on an anti viruses so this is giving a

1318
00:53:57,250 --> 00:53:58,960
really good competition

1319
00:53:58,960 --> 00:54:01,660
to all these big anti voices and then

1320
00:54:01,660 --> 00:54:03,430
even in media there are news now that

1321
00:54:03,430 --> 00:54:06,250
there's been some online legal fights

1322
00:54:06,250 --> 00:54:07,510
going on between these vendors and

1323
00:54:07,510 --> 00:54:09,970
Microsoft and then Microsoft is stepping

1324
00:54:09,970 --> 00:54:12,250
up its game with advanced analytics

1325
00:54:12,250 --> 00:54:15,760
which will be there so I think this all

1326
00:54:15,760 --> 00:54:17,110
will be components will be part of the

1327
00:54:17,110 --> 00:54:19,000
operating system now the one when it'll

1328
00:54:19,000 --> 00:54:21,400
be given to the users so that you don't

1329
00:54:21,400 --> 00:54:22,900
need to rely on different vendors I

1330
00:54:22,900 --> 00:54:25,030
don't know if it's a business move but

1331
00:54:25,030 --> 00:54:27,220
security wise if they're doing it right

1332
00:54:27,220 --> 00:54:29,470
and efficiently I guess that would that

1333
00:54:29,470 --> 00:54:32,110
will add bonus to their sources on the

1334
00:54:32,110 --> 00:54:35,050
operating system so all these different

1335
00:54:35,050 --> 00:54:36,760
modules are enabled with the log in here

1336
00:54:36,760 --> 00:54:38,800
powershell javascript Wiebe script

1337
00:54:38,800 --> 00:54:41,530
security and NT and anti-malware these

1338
00:54:41,530 --> 00:54:43,570
script engines are actually integrated

1339
00:54:43,570 --> 00:54:45,310
so as soon as there's any alerts or

1340
00:54:45,310 --> 00:54:48,340
events they just pull that and feed it

1341
00:54:48,340 --> 00:54:50,440
to the anti-malware engine and that

1342
00:54:50,440 --> 00:54:54,940
looks into into the malware things in

1343
00:54:54,940 --> 00:54:56,620
the in the prevent method what we can do

1344
00:54:56,620 --> 00:54:58,750
to reduce these activities and how to

1345
00:54:58,750 --> 00:55:00,900
learn these lessons to not repeat again

1346
00:55:00,900 --> 00:55:03,190
these are the three main examples of

1347
00:55:03,190 --> 00:55:05,680
belief one be the implementing least

1348
00:55:05,680 --> 00:55:06,940
privilege administrative model where

1349
00:55:06,940 --> 00:55:08,890
privilege is the main problem because

1350
00:55:08,890 --> 00:55:10,270
everybody's given permissions quickly

1351
00:55:10,270 --> 00:55:13,030
but the time to take off or revoke those

1352
00:55:13,030 --> 00:55:15,370
permissions is quite long or they're

1353
00:55:15,370 --> 00:55:17,650
often forgotten so they can be misused

1354
00:55:17,650 --> 00:55:21,550
and similarly implementing a CRM server

1355
00:55:21,550 --> 00:55:23,680
host if you are asked your configuration

1356
00:55:23,680 --> 00:55:25,780
hard lines defined for servers and

1357
00:55:25,780 --> 00:55:27,400
domain controllers against an attack

1358
00:55:27,400 --> 00:55:31,750
they are really useful here these are

1359
00:55:31,750 --> 00:55:34,000
the details about the same lease British

1360
00:55:34,000 --> 00:55:37,300
Australian model how these can be can be

1361
00:55:37,300 --> 00:55:40,360
useful in terms of those over past pass

1362
00:55:40,360 --> 00:55:41,530
the hash attacks or overuse of

1363
00:55:41,530 --> 00:55:43,360
privileges because so is down to

1364
00:55:43,360 --> 00:55:44,350
privileges

1365
00:55:44,350 --> 00:55:48,370
sometimes these enterprise admin domain

1366
00:55:48,370 --> 00:55:50,440
admin and built-in accounts which a

1367
00:55:50,440 --> 00:55:52,960
built-in admins are not seen as really

1368
00:55:52,960 --> 00:55:54,670
powerful because people say okay if it's

1369
00:55:54,670 --> 00:55:56,500
domain admin that's more powerful than a

1370
00:55:56,500 --> 00:55:59,470
built-in and Men but the whole game is

1371
00:55:59,470 --> 00:56:00,820
about stepping up from the local admin

1372
00:56:00,820 --> 00:56:02,940
as well so local admin holds quite

1373
00:56:02,940 --> 00:56:04,770
powerful

1374
00:56:04,770 --> 00:56:07,630
function in a network this should be

1375
00:56:07,630 --> 00:56:10,690
disabled by group policy

1376
00:56:10,690 --> 00:56:13,840
and reducing the privileges again

1377
00:56:13,840 --> 00:56:15,370
disabling the local admin configuring

1378
00:56:15,370 --> 00:56:16,510
your group policies to restrict

1379
00:56:16,510 --> 00:56:18,970
administrative accounts securing the

1380
00:56:18,970 --> 00:56:21,970
built-in accounts in this and these are

1381
00:56:21,970 --> 00:56:23,710
couple of examples where you can

1382
00:56:23,710 --> 00:56:25,900
actually use two to the controls which

1383
00:56:25,900 --> 00:56:28,030
are inbuilt to limit these for example

1384
00:56:28,030 --> 00:56:30,100
the account is sensitive and cannot be

1385
00:56:30,100 --> 00:56:31,840
delegated flag so it will immediately

1386
00:56:31,840 --> 00:56:33,790
tell you if the attribute on a domain

1387
00:56:33,790 --> 00:56:36,010
based account the credentials cannot be

1388
00:56:36,010 --> 00:56:37,480
presented to other computers when you

1389
00:56:37,480 --> 00:56:38,860
are trying to actually throw the hashes

1390
00:56:38,860 --> 00:56:41,170
around to see if they leave because if

1391
00:56:41,170 --> 00:56:43,150
the account you're trying to use on the

1392
00:56:43,150 --> 00:56:44,500
domain admin it will restrict you and

1393
00:56:44,500 --> 00:56:45,400
not let you login

1394
00:56:45,400 --> 00:56:47,740
similarly if smartcard is there for

1395
00:56:47,740 --> 00:56:49,180
interactive logins that will be flagged

1396
00:56:49,180 --> 00:56:55,870
immediately yeah so I'm flying through

1397
00:56:55,870 --> 00:56:57,100
now I guess we were running out of time

1398
00:56:57,100 --> 00:56:58,900
so it's cure I my co-host this is more

1399
00:56:58,900 --> 00:57:02,080
about the principles about separating

1400
00:57:02,080 --> 00:57:03,220
the privileges within a trusted and

1401
00:57:03,220 --> 00:57:06,490
under non trusted areas I've made this

1402
00:57:06,490 --> 00:57:08,740
quick list or you should look at it from

1403
00:57:08,740 --> 00:57:10,060
the different perspectives means the

1404
00:57:10,060 --> 00:57:12,010
account configuration physical security

1405
00:57:12,010 --> 00:57:13,780
is also important and then the app

1406
00:57:13,780 --> 00:57:16,050
Locker policies for for restricting the

1407
00:57:16,050 --> 00:57:19,270
users RDP restrictions are also

1408
00:57:19,270 --> 00:57:21,040
important because of the remote access

1409
00:57:21,040 --> 00:57:23,260
and then the patching is one of the

1410
00:57:23,260 --> 00:57:25,690
important as we showed you through MS 14

1411
00:57:25,690 --> 00:57:28,090
or 68 and blocking internet access on

1412
00:57:28,090 --> 00:57:31,150
the servers because that says no use you

1413
00:57:31,150 --> 00:57:32,800
don't really need it and then any

1414
00:57:32,800 --> 00:57:35,410
anasazi software as well and then

1415
00:57:35,410 --> 00:57:37,540
virtualization is also very helpful at

1416
00:57:37,540 --> 00:57:40,840
times when very possible outside

1417
00:57:40,840 --> 00:57:42,280
consider implementing these virtual

1418
00:57:42,280 --> 00:57:43,750
machines as that mysterio host because

1419
00:57:43,750 --> 00:57:45,400
that can create per user an incentive

1420
00:57:45,400 --> 00:57:47,410
system that you can create more rather

1421
00:57:47,410 --> 00:57:49,180
than actually adding up to the cost and

1422
00:57:49,180 --> 00:57:51,160
then parameter firewalls on the

1423
00:57:51,160 --> 00:57:54,370
defense's these are references images

1424
00:57:54,370 --> 00:57:55,090
are stolen from

1425
00:57:55,090 --> 00:57:57,460
TechNet apart from the blue ones that

1426
00:57:57,460 --> 00:58:00,030
created events to monitor link is here

1427
00:58:00,030 --> 00:58:03,130
securing ad best practices and then this

1428
00:58:03,130 --> 00:58:05,110
this source is really helpful if you're

1429
00:58:05,110 --> 00:58:08,320
looking at reading in detail concepts

1430
00:58:08,320 --> 00:58:11,830
about a Brussels attacks I've read this

1431
00:58:11,830 --> 00:58:13,780
a lot and I follow this guy so huge

1432
00:58:13,780 --> 00:58:16,060
thanks to him that's pretty much for

1433
00:58:16,060 --> 00:58:18,420
today

