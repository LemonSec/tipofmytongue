1
00:00:01,380 --> 00:00:09,330
[Applause]

2
00:00:04,700 --> 00:00:09,750
<font color="#CCCCCC">Thanks</font><font color="#E5E5E5"> um so I'm just gonna jump right</font>

3
00:00:09,330 --> 00:00:12,740
<font color="#E5E5E5">in</font>

4
00:00:09,750 --> 00:00:16,020
can I give a<font color="#E5E5E5"> little bit about me</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> am a</font>

5
00:00:12,740 --> 00:00:17,820
consultant<font color="#CCCCCC"> for Optive</font><font color="#E5E5E5"> security</font><font color="#CCCCCC"> I try</font><font color="#E5E5E5"> to</font>

6
00:00:16,020 --> 00:00:22,470
pose as a<font color="#CCCCCC"> full-stack</font><font color="#E5E5E5"> developer</font><font color="#CCCCCC"> some of</font>

7
00:00:17,820 --> 00:00:26,490
the time<font color="#E5E5E5"> and that's</font><font color="#CCCCCC"> kind of led me down</font>

8
00:00:22,470 --> 00:00:31,948
to creating this tool and<font color="#E5E5E5"> this all kind</font>

9
00:00:26,490 --> 00:00:35,000
of arose from really doing like a base

10
00:00:31,949 --> 00:00:37,410
of<font color="#E5E5E5"> testing there's a lot of manual</font>

11
00:00:35,000 --> 00:00:40,230
procedures that go into<font color="#E5E5E5"> it spinning up</font>

12
00:00:37,410 --> 00:00:42,569
taking down<font color="#E5E5E5"> services in various content</font>

13
00:00:40,230 --> 00:00:45,629
delivery networks<font color="#E5E5E5"> trying to hide source</font>

14
00:00:42,570 --> 00:00:48,690
of attack and trying to<font color="#E5E5E5"> kind of bypass</font><font color="#CCCCCC"> a</font>

15
00:00:45,629 --> 00:00:50,489
lot<font color="#CCCCCC"> of</font><font color="#E5E5E5"> these controls existing on the</font>

16
00:00:48,690 --> 00:00:53,039
perimeter<font color="#CCCCCC"> and on the internal networks</font>

17
00:00:50,489 --> 00:00:56,430
that<font color="#E5E5E5"> will detect anomalous activity such</font>

18
00:00:53,039 --> 00:00:59,879
<font color="#CCCCCC">as port scanning data exfiltration and</font>

19
00:00:56,430 --> 00:01:02,269
stuff of the like as well<font color="#E5E5E5"> as um you need</font>

20
00:00:59,879 --> 00:01:04,979
<font color="#CCCCCC">to protect</font><font color="#E5E5E5"> your this infrastructure from</font>

21
00:01:02,270 --> 00:01:08,820
potential investigation<font color="#E5E5E5"> from the</font>

22
00:01:04,979 --> 00:01:12,090
<font color="#CCCCCC">defenders looking at</font><font color="#E5E5E5"> this traffic so</font>

23
00:01:08,820 --> 00:01:14,339
<font color="#E5E5E5">this kind of led to me</font><font color="#CCCCCC"> thinking more</font>

24
00:01:12,090 --> 00:01:17,610
<font color="#E5E5E5">about this and as you all know you might</font>

25
00:01:14,340 --> 00:01:20,400
<font color="#E5E5E5">have seen tools like Red Baron and the</font>

26
00:01:17,610 --> 00:01:22,350
like come<font color="#E5E5E5"> out that really involve more</font>

27
00:01:20,400 --> 00:01:24,090
long-term<font color="#E5E5E5"> persistent Red Team</font>

28
00:01:22,350 --> 00:01:25,500
infrastructure stuff that you're gonna

29
00:01:24,090 --> 00:01:27,750
<font color="#E5E5E5">keep up for a long time you're gonna</font>

30
00:01:25,500 --> 00:01:31,079
<font color="#E5E5E5">manage and you're really</font><font color="#CCCCCC"> gonna harden</font>

31
00:01:27,750 --> 00:01:33,900
down and kind<font color="#E5E5E5"> of do your whole</font>

32
00:01:31,079 --> 00:01:36,750
engagement<font color="#E5E5E5"> from but the the whole idea</font>

33
00:01:33,900 --> 00:01:38,340
<font color="#E5E5E5">that I that I kind of went</font><font color="#CCCCCC"> with is I'm</font>

34
00:01:36,750 --> 00:01:42,180
looking<font color="#CCCCCC"> for</font><font color="#E5E5E5"> a ephemeral infrastructure</font>

35
00:01:38,340 --> 00:01:44,220
stuff<font color="#E5E5E5"> that will not last more than even</font>

36
00:01:42,180 --> 00:01:46,860
so a day I want<font color="#CCCCCC"> something that'll</font><font color="#E5E5E5"> come</font>

37
00:01:44,220 --> 00:01:49,110
up<font color="#E5E5E5"> come</font><font color="#CCCCCC"> down so that there can really</font><font color="#E5E5E5"> be</font>

38
00:01:46,860 --> 00:01:52,229
no correlation<font color="#CCCCCC"> to its</font><font color="#E5E5E5"> traffic in any of</font>

39
00:01:49,110 --> 00:01:55,079
your activities<font color="#E5E5E5"> going through a red team</font>

40
00:01:52,229 --> 00:01:57,119
activity so any investigation it will be

41
00:01:55,079 --> 00:01:58,889
that note that IP is no longer<font color="#E5E5E5"> live or</font>

42
00:01:57,119 --> 00:02:01,590
that IP now belongs to someone else<font color="#E5E5E5"> on</font>

43
00:01:58,890 --> 00:02:04,950
<font color="#CCCCCC">this various cloud services that we're</font>

44
00:02:01,590 --> 00:02:08,970
using this leads<font color="#CCCCCC"> to a very small</font>

45
00:02:04,950 --> 00:02:11,510
footprint so that again<font color="#E5E5E5"> it's</font><font color="#CCCCCC"> very hard</font>

46
00:02:08,970 --> 00:02:13,890
to correlate<font color="#E5E5E5"> what's going on if you have</font>

47
00:02:11,510 --> 00:02:16,380
this<font color="#E5E5E5"> these type of server</font>

48
00:02:13,890 --> 00:02:19,290
that aren't<font color="#E5E5E5"> lasting very long are doing</font>

49
00:02:16,380 --> 00:02:21,630
very<font color="#CCCCCC"> much</font><font color="#E5E5E5"> but combined they're getting</font>

50
00:02:19,290 --> 00:02:23,850
your whole goal accomplished<font color="#E5E5E5"> but making</font>

51
00:02:21,630 --> 00:02:27,260
<font color="#E5E5E5">it much more hard much harder</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> detect</font>

52
00:02:23,850 --> 00:02:30,150
<font color="#CCCCCC">on and I have the link here for</font><font color="#E5E5E5"> the</font>

53
00:02:27,260 --> 00:02:32,640
<font color="#E5E5E5">github the teaser site the code isn't</font>

54
00:02:30,150 --> 00:02:35,760
<font color="#E5E5E5">quite live yet um I was trying to get it</font>

55
00:02:32,640 --> 00:02:37,769
ready but it's still<font color="#E5E5E5"> a little bit packed</font>

56
00:02:35,760 --> 00:02:39,570
together in<font color="#CCCCCC"> a way it needs a</font><font color="#E5E5E5"> little bit</font>

57
00:02:37,770 --> 00:02:41,040
more fleshing out<font color="#CCCCCC"> um we'll go through a</font>

58
00:02:39,570 --> 00:02:43,620
demo later but if you want to follow

59
00:02:41,040 --> 00:02:45,870
that that github<font color="#CCCCCC"> site then you can go</font>

60
00:02:43,620 --> 00:02:51,000
ahead and<font color="#E5E5E5"> get it as soon as it's</font>

61
00:02:45,870 --> 00:02:53,280
<font color="#CCCCCC">released so one of the main components</font>

62
00:02:51,000 --> 00:02:56,910
about<font color="#E5E5E5"> this is managing a cross provider</font>

63
00:02:53,280 --> 00:02:59,820
platform we want a<font color="#E5E5E5"> single interface to</font>

64
00:02:56,910 --> 00:03:05,370
<font color="#E5E5E5">manage multiple cloud providers in their</font>

65
00:02:59,820 --> 00:03:07,799
various VPS and<font color="#E5E5E5"> bps services</font><font color="#CCCCCC"> API</font>

66
00:03:05,370 --> 00:03:10,470
gateways<font color="#E5E5E5"> firewalls we want all that</font>

67
00:03:07,800 --> 00:03:12,989
<font color="#CCCCCC">stuff in one spot so this tool really</font>

68
00:03:10,470 --> 00:03:15,420
<font color="#E5E5E5">aims to give you that singular view of</font>

69
00:03:12,989 --> 00:03:17,190
let's say I<font color="#E5E5E5"> spent up</font><font color="#CCCCCC"> a tea serve</font><font color="#E5E5E5"> a tea</font>

70
00:03:15,420 --> 00:03:19,589
servers<font color="#E5E5E5"> and they're all distributed</font>

71
00:03:17,190 --> 00:03:21,480
<font color="#CCCCCC">between</font><font color="#E5E5E5"> Google AWS and</font><font color="#CCCCCC"> digitalocean I</font>

72
00:03:19,590 --> 00:03:24,810
<font color="#E5E5E5">don't want to have to go through and go</font>

73
00:03:21,480 --> 00:03:27,060
<font color="#CCCCCC">through each console and manage each one</font>

74
00:03:24,810 --> 00:03:30,000
individually<font color="#CCCCCC"> I want to be able</font><font color="#E5E5E5"> to look</font>

75
00:03:27,060 --> 00:03:31,950
at my entire landscape of<font color="#CCCCCC"> my</font>

76
00:03:30,000 --> 00:03:35,610
infrastructure and be able<font color="#E5E5E5"> to make</font>

77
00:03:31,950 --> 00:03:37,950
decisions<font color="#E5E5E5"> on that rather than trying to</font>

78
00:03:35,610 --> 00:03:41,010
have to correlate them all together and

79
00:03:37,950 --> 00:03:44,010
<font color="#E5E5E5">manage them individually though this</font>

80
00:03:41,010 --> 00:03:46,489
kind of plays into<font color="#CCCCCC"> I can</font><font color="#E5E5E5"> deploy destroy</font>

81
00:03:44,010 --> 00:03:51,060
start and stop instances<font color="#E5E5E5"> on demand</font><font color="#CCCCCC"> um</font>

82
00:03:46,489 --> 00:03:53,250
that's<font color="#CCCCCC"> uh</font><font color="#E5E5E5"> that being said it really</font>

83
00:03:51,060 --> 00:03:57,060
makes it again easy<font color="#E5E5E5"> to manage multiple</font>

84
00:03:53,250 --> 00:03:58,650
cloud providers<font color="#E5E5E5"> also I can easily send</font>

85
00:03:57,060 --> 00:04:00,989
and get files<font color="#E5E5E5"> from these uh these</font>

86
00:03:58,650 --> 00:04:03,390
servers and I can drop<font color="#CCCCCC"> into a command</font>

87
00:04:00,989 --> 00:04:06,959
shell on anyone on a whim<font color="#CCCCCC"> just by</font>

88
00:04:03,390 --> 00:04:11,250
sending<font color="#CCCCCC"> one</font><font color="#E5E5E5"> command in Maya basically in</font>

89
00:04:06,959 --> 00:04:13,170
be the tool interface<font color="#E5E5E5"> furthermore I've</font>

90
00:04:11,250 --> 00:04:14,269
added protections<font color="#CCCCCC"> that</font><font color="#E5E5E5"> you can put in</font>

91
00:04:13,170 --> 00:04:16,769
<font color="#E5E5E5">place</font>

92
00:04:14,269 --> 00:04:19,108
basic one<font color="#CCCCCC"> is firewalls or security</font>

93
00:04:16,769 --> 00:04:21,750
groups that you<font color="#E5E5E5"> can place on individual</font>

94
00:04:19,108 --> 00:04:23,729
servers so let's say I have<font color="#CCCCCC"> 10</font><font color="#E5E5E5"> servers</font>

95
00:04:21,750 --> 00:04:26,610
and I want to open<font color="#E5E5E5"> them</font><font color="#CCCCCC"> open one of them</font>

96
00:04:23,729 --> 00:04:27,280
up and run Apache on it for some type of

97
00:04:26,610 --> 00:04:31,270
fish

98
00:04:27,280 --> 00:04:35,169
engagement<font color="#CCCCCC"> I can open up</font><font color="#E5E5E5"> just port 80 on</font>

99
00:04:31,270 --> 00:04:36,969
one<font color="#CCCCCC"> of my servers and have that</font><font color="#E5E5E5"> have</font>

100
00:04:35,170 --> 00:04:39,460
that<font color="#E5E5E5"> maintained as my fishing</font>

101
00:04:36,970 --> 00:04:42,040
infrastructure<font color="#CCCCCC"> also you can add in</font>

102
00:04:39,460 --> 00:04:45,039
redirect errs that will redirect based

103
00:04:42,040 --> 00:04:46,900
on<font color="#E5E5E5"> certain rules let's say that if you</font>

104
00:04:45,040 --> 00:04:52,389
don't<font color="#E5E5E5"> meet a certain user agent then</font>

105
00:04:46,900 --> 00:04:57,280
that will redirect<font color="#E5E5E5"> the</font><font color="#CCCCCC"> request</font><font color="#E5E5E5"> to</font>

106
00:04:52,389 --> 00:04:58,900
wherever you<font color="#CCCCCC"> want</font><font color="#E5E5E5"> to go</font><font color="#CCCCCC"> oh this is</font>

107
00:04:57,280 --> 00:05:02,710
probably<font color="#E5E5E5"> one of the biggest things in</font>

108
00:04:58,900 --> 00:05:05,140
this framework<font color="#CCCCCC"> that is really useful for</font>

109
00:05:02,710 --> 00:05:08,469
an evasive test<font color="#E5E5E5"> let's say you're</font><font color="#CCCCCC"> running</font>

110
00:05:05,140 --> 00:05:11,289
a port scan<font color="#E5E5E5"> you don't want to run top</font>

111
00:05:08,470 --> 00:05:13,210
<font color="#E5E5E5">1,000 ports it from one server if you're</font>

112
00:05:11,290 --> 00:05:16,270
<font color="#E5E5E5">doing an evasive test that's gonna hit</font>

113
00:05:13,210 --> 00:05:18,400
every<font color="#CCCCCC"> single</font><font color="#E5E5E5"> IDs and IPS there is is</font>

114
00:05:16,270 --> 00:05:21,340
<font color="#E5E5E5">going</font><font color="#CCCCCC"> to notice that's a port scan block</font>

115
00:05:18,400 --> 00:05:22,929
<font color="#CCCCCC">that</font><font color="#E5E5E5"> IP</font><font color="#CCCCCC"> we're done with what you can do</font>

116
00:05:21,340 --> 00:05:24,700
with this tool<font color="#E5E5E5"> is you can distribute</font>

117
00:05:22,930 --> 00:05:27,610
<font color="#E5E5E5">those jobs among your entire</font>

118
00:05:24,700 --> 00:05:29,560
infrastructure<font color="#E5E5E5"> and then they are tasked</font>

119
00:05:27,610 --> 00:05:33,130
with very small jobs<font color="#E5E5E5"> making one</font><font color="#CCCCCC"> or two</font>

120
00:05:29,560 --> 00:05:35,290
requests to eat to your<font color="#E5E5E5"> targets and then</font>

121
00:05:33,130 --> 00:05:37,570
bringing all<font color="#CCCCCC"> that data back and</font>

122
00:05:35,290 --> 00:05:40,390
correlating<font color="#E5E5E5"> it back on your end on your</font>

123
00:05:37,570 --> 00:05:42,909
<font color="#E5E5E5">central central endpoint</font><font color="#CCCCCC"> so that way you</font>

124
00:05:40,390 --> 00:05:45,490
get<font color="#E5E5E5"> all of the data but when someone's</font>

125
00:05:42,910 --> 00:05:47,020
looking when a defender is watching

126
00:05:45,490 --> 00:05:49,660
their logs it looks like normal<font color="#CCCCCC"> Internet</font>

127
00:05:47,020 --> 00:05:51,520
<font color="#E5E5E5">traffic a port here a port there and it</font>

128
00:05:49,660 --> 00:05:52,810
doesn't<font color="#E5E5E5"> necessarily look</font><font color="#CCCCCC"> like</font><font color="#E5E5E5"> someone is</font>

129
00:05:51,520 --> 00:05:56,409
port scanning unless they're really

130
00:05:52,810 --> 00:05:57,910
really looking for it and this yields

131
00:05:56,410 --> 00:06:00,340
for future developments where I want<font color="#E5E5E5"> to</font>

132
00:05:57,910 --> 00:06:02,289
be able<font color="#E5E5E5"> to distribute commands across</font>

133
00:06:00,340 --> 00:06:04,270
this<font color="#E5E5E5"> entire infrastructure let's say</font>

134
00:06:02,289 --> 00:06:06,789
you're doing directory brute-forcing<font color="#E5E5E5"> you</font>

135
00:06:04,270 --> 00:06:08,469
want to split<font color="#CCCCCC"> up that</font><font color="#E5E5E5"> word list and</font>

136
00:06:06,789 --> 00:06:10,419
<font color="#E5E5E5">split</font><font color="#CCCCCC"> up the job among all of these</font>

137
00:06:08,470 --> 00:06:12,160
hosts so that the job can be<font color="#E5E5E5"> done</font>

138
00:06:10,419 --> 00:06:14,200
quickly efficiently and<font color="#E5E5E5"> relatively</font>

139
00:06:12,160 --> 00:06:19,419
quietly<font color="#E5E5E5"> because if the traffic isn't</font>

140
00:06:14,200 --> 00:06:21,610
coming<font color="#CCCCCC"> from one endpoint oh another</font>

141
00:06:19,419 --> 00:06:25,180
<font color="#CCCCCC">thing is speaking of proxying those</font>

142
00:06:21,610 --> 00:06:28,240
requests<font color="#CCCCCC"> oh you can create Sox proxies</font>

143
00:06:25,180 --> 00:06:30,190
on any of<font color="#E5E5E5"> these hosts so theoretically I</font>

144
00:06:28,240 --> 00:06:33,100
could<font color="#E5E5E5"> spin up</font><font color="#CCCCCC"> 40 hosts put a socks proxy</font>

145
00:06:30,190 --> 00:06:35,169
on each one<font color="#E5E5E5"> of them and then use proxy</font>

146
00:06:33,100 --> 00:06:37,120
chains<font color="#E5E5E5"> to send each request through a</font>

147
00:06:35,169 --> 00:06:38,859
different proxy this is simply<font color="#E5E5E5"> another</font>

148
00:06:37,120 --> 00:06:41,260
method of kind of distributing commands

149
00:06:38,860 --> 00:06:42,910
<font color="#E5E5E5">it's a bit slower and that distributed</font>

150
00:06:41,260 --> 00:06:46,599
<font color="#E5E5E5">this should be a command example I went</font>

151
00:06:42,910 --> 00:06:49,660
<font color="#E5E5E5">through</font><font color="#CCCCCC"> before but it still achieves a</font>

152
00:06:46,600 --> 00:06:52,300
similar effect of each<font color="#E5E5E5"> request is going</font>

153
00:06:49,660 --> 00:06:54,040
through a different proxy and stuff<font color="#CCCCCC"> that</font>

154
00:06:52,300 --> 00:06:56,050
can't go through proxy chains there's

155
00:06:54,040 --> 00:07:01,180
also<font color="#CCCCCC"> Sox T configurations that</font><font color="#E5E5E5"> you</font>

156
00:06:56,050 --> 00:07:04,180
<font color="#E5E5E5">printed out as well in the tool um this</font>

157
00:07:01,180 --> 00:07:06,250
kind<font color="#CCCCCC"> of plays on</font><font color="#E5E5E5"> the other one it these</font>

158
00:07:04,180 --> 00:07:07,600
are use<font color="#CCCCCC"> cases for those proxies that</font>

159
00:07:06,250 --> 00:07:10,030
<font color="#E5E5E5">you're using so you can use it</font><font color="#CCCCCC"> for</font>

160
00:07:07,600 --> 00:07:11,980
discovery<font color="#CCCCCC"> and exploitation</font><font color="#E5E5E5"> you can</font>

161
00:07:10,030 --> 00:07:13,299
separate those activities<font color="#E5E5E5"> you can have</font>

162
00:07:11,980 --> 00:07:15,550
<font color="#E5E5E5">one socks proxy that's for your</font>

163
00:07:13,300 --> 00:07:17,980
discovery<font color="#E5E5E5"> one socks proxy that's for</font>

164
00:07:15,550 --> 00:07:20,320
authenticated discovery and one that is

165
00:07:17,980 --> 00:07:22,300
for a pure<font color="#CCCCCC"> exploitation</font><font color="#E5E5E5"> so that when</font>

166
00:07:20,320 --> 00:07:24,400
they're<font color="#E5E5E5"> going back on</font><font color="#CCCCCC"> the server logs it</font>

167
00:07:22,300 --> 00:07:26,770
won't be the<font color="#E5E5E5"> same server doing the</font>

168
00:07:24,400 --> 00:07:28,890
entire attack chain so it<font color="#E5E5E5"> will be hard</font>

169
00:07:26,770 --> 00:07:31,690
<font color="#E5E5E5">to correlate who's doing what and</font>

170
00:07:28,890 --> 00:07:34,210
<font color="#E5E5E5">following that narrative from an IR and</font>

171
00:07:31,690 --> 00:07:36,969
<font color="#E5E5E5">investigation perspective this also</font>

172
00:07:34,210 --> 00:07:39,580
includes<font color="#CCCCCC"> two brute-forcing</font><font color="#E5E5E5"> and if</font><font color="#CCCCCC"> your</font>

173
00:07:36,970 --> 00:07:42,220
if one of your<font color="#E5E5E5"> servers gets blocked from</font>

174
00:07:39,580 --> 00:07:44,979
spidering and a<font color="#CCCCCC"> laff detects that</font>

175
00:07:42,220 --> 00:07:46,540
activity<font color="#E5E5E5"> blocks that IP it's really not</font>

176
00:07:44,980 --> 00:07:48,820
an<font color="#E5E5E5"> issue you</font><font color="#CCCCCC"> can</font><font color="#E5E5E5"> bring it bring it down</font>

177
00:07:46,540 --> 00:07:50,410
bring<font color="#E5E5E5"> it back up and now that IP is or</font>

178
00:07:48,820 --> 00:07:54,730
<font color="#E5E5E5">that server is no longer blocked with a</font>

179
00:07:50,410 --> 00:07:57,700
fresh IP furthermore<font color="#CCCCCC"> I implemented an</font>

180
00:07:54,730 --> 00:08:01,180
<font color="#E5E5E5">API gateway you can't see it that</font><font color="#CCCCCC"> well</font>

181
00:07:57,700 --> 00:08:04,180
<font color="#E5E5E5">on here at all um but the idea is</font><font color="#CCCCCC"> that</font>

182
00:08:01,180 --> 00:08:07,330
<font color="#E5E5E5">um Amazon API gateways allow you to</font>

183
00:08:04,180 --> 00:08:10,000
<font color="#CCCCCC">configure an endpoint that you can hit</font>

184
00:08:07,330 --> 00:08:12,130
and it will make a request<font color="#CCCCCC"> on your</font>

185
00:08:10,000 --> 00:08:14,590
behalf<font color="#E5E5E5"> to another server so I have an</font>

186
00:08:12,130 --> 00:08:17,740
API gateway<font color="#E5E5E5"> that will make a request to</font>

187
00:08:14,590 --> 00:08:20,080
<font color="#CCCCCC">a certain endpoint but</font><font color="#E5E5E5"> each request from</font>

188
00:08:17,740 --> 00:08:22,960
that API<font color="#CCCCCC"> gateway generally has a</font>

189
00:08:20,080 --> 00:08:26,640
different IP cycling<font color="#E5E5E5"> through about 500</font>

190
00:08:22,960 --> 00:08:29,859
ish<font color="#E5E5E5"> per region</font><font color="#CCCCCC"> so it allows you</font><font color="#E5E5E5"> to a</font>

191
00:08:26,640 --> 00:08:33,130
password<font color="#CCCCCC"> guess the the screenshot I have</font>

192
00:08:29,860 --> 00:08:34,750
up<font color="#CCCCCC"> here</font><font color="#E5E5E5"> is guessing an</font><font color="#CCCCCC"> OWI</font><font color="#E5E5E5"> portal if</font>

193
00:08:33,130 --> 00:08:38,280
anyone's been<font color="#E5E5E5"> on a</font><font color="#CCCCCC"> Red Team engagement</font>

194
00:08:34,750 --> 00:08:42,520
<font color="#E5E5E5">they know OWA guessing is an easy go to</font>

195
00:08:38,280 --> 00:08:45,010
but this allows<font color="#CCCCCC"> for</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> OWA guessing to</font>

196
00:08:42,520 --> 00:08:49,210
be distributed across<font color="#E5E5E5"> these services and</font>

197
00:08:45,010 --> 00:08:51,880
coming from<font color="#CCCCCC"> different IPS</font><font color="#E5E5E5"> it again</font>

198
00:08:49,210 --> 00:08:54,880
furthers<font color="#CCCCCC"> that</font><font color="#E5E5E5"> the difficulty in</font>

199
00:08:51,880 --> 00:08:57,880
detecting<font color="#E5E5E5"> this kind of activity in</font>

200
00:08:54,880 --> 00:09:01,260
tracking it to a single endpoint in this

201
00:08:57,880 --> 00:09:06,640
way you can separate<font color="#CCCCCC"> yourself from the</font>

202
00:09:01,260 --> 00:09:08,860
<font color="#CCCCCC">brute-forcing</font><font color="#E5E5E5"> itself</font><font color="#CCCCCC"> a big thing I</font>

203
00:09:06,640 --> 00:09:10,420
wanted<font color="#E5E5E5"> to add in here because</font><font color="#CCCCCC"> that's</font>

204
00:09:08,860 --> 00:09:13,840
<font color="#E5E5E5">something that</font><font color="#CCCCCC"> I've been using a lot</font>

205
00:09:10,420 --> 00:09:15,790
more<font color="#CCCCCC"> is domain fronting for those of you</font>

206
00:09:13,840 --> 00:09:18,790
who don't<font color="#CCCCCC"> necessarily know what domain</font>

207
00:09:15,790 --> 00:09:20,740
<font color="#E5E5E5">fronting is originally it was a</font>

208
00:09:18,790 --> 00:09:22,510
technique<font color="#CCCCCC"> that the major content</font>

209
00:09:20,740 --> 00:09:25,000
delivery networks used to<font color="#E5E5E5"> bypass</font>

210
00:09:22,510 --> 00:09:27,310
<font color="#CCCCCC">internet</font><font color="#E5E5E5"> censorship so in Egypt during</font>

211
00:09:25,000 --> 00:09:31,120
<font color="#CCCCCC">the Arab Spring they used domain</font>

212
00:09:27,310 --> 00:09:33,489
fronting to make signal<font color="#E5E5E5"> available to</font>

213
00:09:31,120 --> 00:09:37,000
users in Egypt<font color="#CCCCCC"> and that made it</font><font color="#E5E5E5"> so that</font>

214
00:09:33,490 --> 00:09:39,220
<font color="#E5E5E5">you could request to google.com but the</font>

215
00:09:37,000 --> 00:09:41,530
but via the host header you could

216
00:09:39,220 --> 00:09:44,200
actually still access signal<font color="#E5E5E5"> even though</font>

217
00:09:41,530 --> 00:09:45,730
that<font color="#E5E5E5"> signal itself was blocked so a lot</font>

218
00:09:44,200 --> 00:09:49,210
of<font color="#E5E5E5"> the major content delivery networks</font>

219
00:09:45,730 --> 00:09:51,700
made signal<font color="#CCCCCC"> available and that way they</font>

220
00:09:49,210 --> 00:09:54,250
could still access signals still act and

221
00:09:51,700 --> 00:09:56,820
still have communication going<font color="#E5E5E5"> on inside</font>

222
00:09:54,250 --> 00:09:59,410
this country<font color="#CCCCCC"> with a restricted network</font>

223
00:09:56,820 --> 00:10:01,720
the reason that they did it is<font color="#E5E5E5"> because</font>

224
00:09:59,410 --> 00:10:04,000
stopping<font color="#E5E5E5"> it looks a whole lot like</font>

225
00:10:01,720 --> 00:10:05,800
turning off the<font color="#CCCCCC"> internet so if you're</font>

226
00:10:04,000 --> 00:10:08,350
gonna stop domain fronting you got a

227
00:10:05,800 --> 00:10:11,890
block<font color="#E5E5E5"> a good portion of Amazon a good</font>

228
00:10:08,350 --> 00:10:13,420
portion<font color="#E5E5E5"> of Google as</font><font color="#CCCCCC"> your</font><font color="#E5E5E5"> basically any</font>

229
00:10:11,890 --> 00:10:15,510
cloud provider out there and if you're

230
00:10:13,420 --> 00:10:18,040
turning<font color="#E5E5E5"> off as your</font><font color="#CCCCCC"> amazon and google</font>

231
00:10:15,510 --> 00:10:23,950
<font color="#CCCCCC">you</font><font color="#E5E5E5"> don't really have</font><font color="#CCCCCC"> much internet left</font>

232
00:10:18,040 --> 00:10:25,300
<font color="#E5E5E5">right so really the thing is is that</font>

233
00:10:23,950 --> 00:10:28,840
<font color="#CCCCCC">people hear this</font><font color="#E5E5E5"> and they're like so</font>

234
00:10:25,300 --> 00:10:31,479
what the reason domain<font color="#E5E5E5"> fronting really</font>

235
00:10:28,840 --> 00:10:33,520
matters and<font color="#E5E5E5"> especially in terms from red</font>

236
00:10:31,480 --> 00:10:35,230
team<font color="#E5E5E5"> and blue team perspective</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> that</font>

237
00:10:33,520 --> 00:10:38,920
it's<font color="#CCCCCC"> able</font><font color="#E5E5E5"> to bypass a lot of egress</font>

238
00:10:35,230 --> 00:10:41,230
controls<font color="#E5E5E5"> so if you're doing domain</font>

239
00:10:38,920 --> 00:10:44,140
fronting through Google and with a

240
00:10:41,230 --> 00:10:47,530
Google endpoint<font color="#E5E5E5"> you your actual TLS and</font>

241
00:10:44,140 --> 00:10:49,330
SSL negotiation happens with<font color="#E5E5E5"> that</font><font color="#CCCCCC"> Google</font>

242
00:10:47,530 --> 00:10:52,959
site<font color="#E5E5E5"> they're requesting so if you're</font>

243
00:10:49,330 --> 00:10:54,880
<font color="#E5E5E5">requesting WWE google.com you're TLS</font>

244
00:10:52,960 --> 00:10:57,790
negotiation is happening with Google<font color="#CCCCCC"> if</font>

245
00:10:54,880 --> 00:10:59,980
with Google com it's not<font color="#CCCCCC"> til it</font><font color="#E5E5E5"> gets to</font>

246
00:10:57,790 --> 00:11:04,270
<font color="#CCCCCC">that</font><font color="#E5E5E5"> Google infrastructure that it's</font><font color="#CCCCCC"> uh</font>

247
00:10:59,980 --> 00:11:06,070
that it is routed<font color="#E5E5E5"> to</font><font color="#CCCCCC"> your App</font><font color="#E5E5E5"> Engine</font>

248
00:11:04,270 --> 00:11:07,939
instance which is<font color="#E5E5E5"> acting as your your</font>

249
00:11:06,070 --> 00:11:10,519
redirector and this

250
00:11:07,939 --> 00:11:13,579
that this is now encrypted<font color="#E5E5E5"> with HSTs and</font>

251
00:11:10,519 --> 00:11:19,789
this makes<font color="#CCCCCC"> SSL stripping very hard</font><font color="#E5E5E5"> on</font>

252
00:11:13,579 --> 00:11:23,238
and<font color="#E5E5E5"> I am not aware of any I'm not really</font>

253
00:11:19,789 --> 00:11:25,189
big on the SSL stripping and<font color="#E5E5E5"> the SSL</font>

254
00:11:23,239 --> 00:11:27,169
interception technologies but<font color="#E5E5E5"> I'm not</font>

255
00:11:25,189 --> 00:11:30,289
<font color="#E5E5E5">really aware of many if any that can</font>

256
00:11:27,169 --> 00:11:32,209
actually strip HSTs encrypted

257
00:11:30,289 --> 00:11:34,909
connections with Google and so a lot of

258
00:11:32,209 --> 00:11:36,829
<font color="#E5E5E5">a lot</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> companies</font><font color="#CCCCCC"> disallow</font><font color="#E5E5E5"> Google</font>

259
00:11:34,909 --> 00:11:41,299
outbound<font color="#CCCCCC"> um it's not</font><font color="#E5E5E5"> something that</font><font color="#CCCCCC"> they</font>

260
00:11:36,829 --> 00:11:43,399
intercept on their<font color="#E5E5E5"> SSL appliances then</font>

261
00:11:41,299 --> 00:11:45,228
the big<font color="#CCCCCC"> thing is is</font><font color="#E5E5E5"> that it's not</font><font color="#CCCCCC"> only</font>

262
00:11:43,399 --> 00:11:47,470
restricted<font color="#E5E5E5"> to Google on you can do this</font>

263
00:11:45,229 --> 00:11:51,199
over<font color="#CCCCCC"> is your you can do this over Amazon</font>

264
00:11:47,470 --> 00:11:54,559
<font color="#CCCCCC">you can</font><font color="#E5E5E5"> you can do whatever Akamai</font><font color="#CCCCCC"> I</font>

265
00:11:51,199 --> 00:11:56,059
believe and the really possibilities are

266
00:11:54,559 --> 00:11:58,909
endless<font color="#E5E5E5"> because a lot of</font><font color="#CCCCCC"> these</font><font color="#E5E5E5"> major</font>

267
00:11:56,059 --> 00:12:00,348
content delivery networks<font color="#E5E5E5"> domain</font>

268
00:11:58,909 --> 00:12:02,779
fronting is a way that they ensure

269
00:12:00,349 --> 00:12:04,489
robustness of their<font color="#CCCCCC"> platform</font><font color="#E5E5E5"> so let you</font>

270
00:12:02,779 --> 00:12:11,359
can really leverage it in<font color="#E5E5E5"> a lot of ways</font>

271
00:12:04,489 --> 00:12:14,509
in terms<font color="#E5E5E5"> of an attacker</font><font color="#CCCCCC"> and this kind of</font>

272
00:12:11,359 --> 00:12:16,579
leads me<font color="#E5E5E5"> back into the tool of right now</font>

273
00:12:14,509 --> 00:12:21,259
you can deploy Amazon and Google based

274
00:12:16,579 --> 00:12:24,108
<font color="#E5E5E5">of Amazon and</font><font color="#CCCCCC"> Google base cloud domain</font>

275
00:12:21,259 --> 00:12:27,229
fronts<font color="#E5E5E5"> and this allows you to set in</font>

276
00:12:24,109 --> 00:12:30,829
your source and your endpoint and click

277
00:12:27,229 --> 00:12:32,509
in<font color="#E5E5E5"> your go it's it's very simple um this</font>

278
00:12:30,829 --> 00:12:34,549
really<font color="#CCCCCC"> arose from the fact that it's</font>

279
00:12:32,509 --> 00:12:36,679
kind<font color="#E5E5E5"> of tedious to set up multiple</font>

280
00:12:34,549 --> 00:12:38,598
<font color="#E5E5E5">domain fronts and just being able to</font>

281
00:12:36,679 --> 00:12:41,858
manage<font color="#CCCCCC"> them all</font><font color="#E5E5E5"> in one</font><font color="#CCCCCC"> spot set them up</font>

282
00:12:38,599 --> 00:12:43,789
on<font color="#E5E5E5"> a whim was really really appealing</font>

283
00:12:41,859 --> 00:12:48,019
<font color="#E5E5E5">furthermore</font><font color="#CCCCCC"> allows you to restrict</font>

284
00:12:43,789 --> 00:12:51,470
<font color="#E5E5E5">access based on let's say subnet or IP</font>

285
00:12:48,019 --> 00:12:53,209
and also even user agent<font color="#CCCCCC"> a technique I</font>

286
00:12:51,470 --> 00:12:55,279
really like to<font color="#E5E5E5"> use for user agents that</font>

287
00:12:53,209 --> 00:12:58,128
if you restrict it based on user agent

288
00:12:55,279 --> 00:13:00,619
then when you make that request<font color="#CCCCCC"> to</font><font color="#E5E5E5"> the</font>

289
00:12:58,129 --> 00:13:03,559
domain<font color="#E5E5E5"> front you can put an extra space</font>

290
00:13:00,619 --> 00:13:05,419
<font color="#CCCCCC">in</font><font color="#E5E5E5"> a valid valid user agent and so any</font>

291
00:13:03,559 --> 00:13:07,159
investigation will look<font color="#E5E5E5"> like a valid</font>

292
00:13:05,419 --> 00:13:09,259
user agent<font color="#E5E5E5"> except for that extra space</font>

293
00:13:07,159 --> 00:13:11,599
is<font color="#CCCCCC"> actually what it's a the</font><font color="#E5E5E5"> reg X is</font>

294
00:13:09,259 --> 00:13:16,909
<font color="#CCCCCC">teen on</font><font color="#E5E5E5"> so you will not</font><font color="#CCCCCC"> be able to</font>

295
00:13:11,599 --> 00:13:19,339
<font color="#E5E5E5">access the domain front and the the</font>

296
00:13:16,909 --> 00:13:22,280
<font color="#E5E5E5">reaction from it will be it will</font>

297
00:13:19,339 --> 00:13:24,200
redirect you to<font color="#CCCCCC"> wherever you</font>

298
00:13:22,280 --> 00:13:27,500
so if I'm<font color="#E5E5E5"> posing</font><font color="#CCCCCC"> as inbox at</font><font color="#E5E5E5"> google.com</font>

299
00:13:24,200 --> 00:13:30,380
<font color="#E5E5E5">all have my redirector based on that</font>

300
00:13:27,500 --> 00:13:31,970
user agent string redirect<font color="#E5E5E5"> inbox at</font>

301
00:13:30,380 --> 00:13:34,010
google.com<font color="#CCCCCC"> so let's say you need</font>

302
00:13:31,970 --> 00:13:36,170
offender that's<font color="#E5E5E5"> investigating they type</font>

303
00:13:34,010 --> 00:13:38,420
it into their browser<font color="#CCCCCC"> they go to the</font><font color="#E5E5E5"> app</font>

304
00:13:36,170 --> 00:13:39,650
<font color="#CCCCCC">spot instance where my redirector is</font>

305
00:13:38,420 --> 00:13:42,290
actually<font color="#E5E5E5"> hosted and they get redirected</font>

306
00:13:39,650 --> 00:13:44,360
<font color="#E5E5E5">to inbox that</font><font color="#CCCCCC"> google calm</font><font color="#E5E5E5"> so that's</font>

307
00:13:42,290 --> 00:13:46,730
really perplexing so they may just<font color="#CCCCCC"> think</font>

308
00:13:44,360 --> 00:13:52,520
this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> just</font><font color="#E5E5E5"> some</font><font color="#CCCCCC"> Google craziness</font>

309
00:13:46,730 --> 00:14:07,940
that's going<font color="#CCCCCC"> on so now I'm gonna</font><font color="#E5E5E5"> go</font>

310
00:13:52,520 --> 00:14:15,370
through<font color="#CCCCCC"> a demo of</font><font color="#E5E5E5"> the tool itself okay</font>

311
00:14:07,940 --> 00:14:15,370
<font color="#E5E5E5">see if this okay</font><font color="#CCCCCC"> that's not looking good</font>

312
00:14:15,500 --> 00:14:37,840
<font color="#E5E5E5">give me one second we change the display</font>

313
00:14:19,820 --> 00:14:37,840
on here there we go

314
00:14:40,660 --> 00:14:45,280
<font color="#CCCCCC">alright</font><font color="#E5E5E5"> that better can everyone</font><font color="#CCCCCC"> see</font>

315
00:14:47,590 --> 00:14:56,090
okay so the<font color="#CCCCCC"> the tool itself is built on</font>

316
00:14:52,370 --> 00:14:59,120
is built with go<font color="#E5E5E5"> and it's built via the</font>

317
00:14:56,090 --> 00:15:00,890
ghost specifications and I will<font color="#E5E5E5"> yeah</font>

318
00:14:59,120 --> 00:15:03,770
just talk through<font color="#E5E5E5"> it right now</font><font color="#CCCCCC"> um as</font><font color="#E5E5E5"> you</font>

319
00:15:00,890 --> 00:15:06,290
<font color="#CCCCCC">can see we are deploying the cloud</font>

320
00:15:03,770 --> 00:15:08,180
providers<font color="#E5E5E5"> um</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> currently supports AWS</font>

321
00:15:06,290 --> 00:15:10,969
<font color="#CCCCCC">digitalocean</font><font color="#E5E5E5"> in Google I'm working to</font>

322
00:15:08,180 --> 00:15:13,640
support as you're currently<font color="#E5E5E5"> and more</font>

323
00:15:10,970 --> 00:15:15,950
cloud providers in the future so here

324
00:15:13,640 --> 00:15:17,449
I'm<font color="#CCCCCC"> just applying for servers and it</font>

325
00:15:15,950 --> 00:15:20,090
will divide<font color="#E5E5E5"> them between the two cloud</font>

326
00:15:17,450 --> 00:15:23,210
providers in any regions that<font color="#E5E5E5"> I choose</font>

327
00:15:20,090 --> 00:15:24,950
<font color="#E5E5E5">have in my configuration file it takes a</font>

328
00:15:23,210 --> 00:15:26,600
little while to initialize<font color="#CCCCCC"> all the</font>

329
00:15:24,950 --> 00:15:29,660
instances<font color="#E5E5E5"> so I can do all the operations</font>

330
00:15:26,600 --> 00:15:34,970
<font color="#E5E5E5">on them but as you can see here we</font><font color="#CCCCCC"> can</font>

331
00:15:29,660 --> 00:15:35,480
deploy<font color="#E5E5E5"> destroy start stop list um</font><font color="#CCCCCC"> drop</font>

332
00:15:34,970 --> 00:15:38,029
<font color="#E5E5E5">in to come</font>

333
00:15:35,480 --> 00:15:39,560
and she'll add a socks proxy<font color="#CCCCCC"> created</font>

334
00:15:38,029 --> 00:15:41,990
domain front

335
00:15:39,560 --> 00:15:45,589
distribute an nmap scan of among the

336
00:15:41,990 --> 00:15:48,160
instances print out the proxy proxy

337
00:15:45,589 --> 00:15:51,529
configuration for proxy chains and<font color="#CCCCCC"> Sox D</font>

338
00:15:48,160 --> 00:15:54,290
<font color="#E5E5E5">send files retrieve files and set up a</font>

339
00:15:51,529 --> 00:15:56,600
<font color="#E5E5E5">firewall I'm working on in the future</font>

340
00:15:54,290 --> 00:15:58,639
developments<font color="#E5E5E5"> of importing existing cloud</font>

341
00:15:56,600 --> 00:16:01,220
infrastructure<font color="#E5E5E5"> so that your firewalls</font>

342
00:15:58,639 --> 00:16:03,740
domain fronts and your VPS<font color="#CCCCCC"> is can be</font>

343
00:16:01,220 --> 00:16:05,449
imported when the tool initializes<font color="#E5E5E5"> so</font>

344
00:16:03,740 --> 00:16:07,100
that any existing<font color="#E5E5E5"> infrastructure you</font>

345
00:16:05,449 --> 00:16:09,889
have<font color="#E5E5E5"> in there will be manageable from</font>

346
00:16:07,100 --> 00:16:11,930
this<font color="#E5E5E5"> interface as</font><font color="#CCCCCC"> well as a this</font>

347
00:16:09,889 --> 00:16:14,360
interface was mainly<font color="#E5E5E5"> made</font><font color="#CCCCCC"> for for this</font>

348
00:16:11,930 --> 00:16:16,880
<font color="#CCCCCC">con</font><font color="#E5E5E5"> so</font><font color="#CCCCCC"> forgiving e forgive any things</font>

349
00:16:14,360 --> 00:16:19,279
that<font color="#E5E5E5"> are a problem</font><font color="#CCCCCC"> with it</font><font color="#E5E5E5"> because it</font>

350
00:16:16,880 --> 00:16:21,589
was<font color="#E5E5E5"> really just hacked together and in</font>

351
00:16:19,279 --> 00:16:23,180
that regard<font color="#CCCCCC"> and I'm</font><font color="#E5E5E5"> working on more of a</font>

352
00:16:21,589 --> 00:16:24,940
<font color="#CCCCCC">web-based interface</font><font color="#E5E5E5"> or you can get a</font>

353
00:16:23,180 --> 00:16:28,760
more<font color="#CCCCCC"> of a visual view of what's</font><font color="#E5E5E5"> going on</font>

354
00:16:24,940 --> 00:16:32,300
<font color="#CCCCCC">so as we wait for this I'll kind of go</font>

355
00:16:28,760 --> 00:16:36,199
<font color="#CCCCCC">into the the framework</font><font color="#E5E5E5"> that is being</font>

356
00:16:32,300 --> 00:16:38,089
used<font color="#E5E5E5"> it's built on go and via the go</font>

357
00:16:36,199 --> 00:16:42,339
specifications everything is a package

358
00:16:38,089 --> 00:16:45,829
right so the all the<font color="#CCCCCC"> Amazon stuff Google</font>

359
00:16:42,339 --> 00:16:48,410
<font color="#E5E5E5">digitalocean all that stuff is</font><font color="#CCCCCC"> package</font>

360
00:16:45,829 --> 00:16:51,500
<font color="#CCCCCC">space and that means that</font><font color="#E5E5E5"> if one of</font>

361
00:16:48,410 --> 00:16:53,449
<font color="#E5E5E5">y'all wanted to go out and write a tool</font>

362
00:16:51,500 --> 00:16:55,399
that deployed Amazon instances<font color="#E5E5E5"> and did</font>

363
00:16:53,449 --> 00:16:58,819
some management<font color="#E5E5E5"> of them you could simply</font>

364
00:16:55,399 --> 00:17:02,360
go<font color="#E5E5E5"> import the</font><font color="#CCCCCC"> package from this project</font>

365
00:16:58,819 --> 00:17:04,879
<font color="#CCCCCC">and use the deploy and deploy ec2</font>

366
00:17:02,360 --> 00:17:06,530
feature in your<font color="#CCCCCC"> own project</font><font color="#E5E5E5"> so that's</font>

367
00:17:04,880 --> 00:17:09,380
why it's a framework and not necessarily

368
00:17:06,530 --> 00:17:11,359
<font color="#CCCCCC">a tool itself</font><font color="#E5E5E5"> so it's not</font><font color="#CCCCCC"> restricted to</font>

369
00:17:09,380 --> 00:17:13,069
<font color="#E5E5E5">using the entire framework you can</font>

370
00:17:11,359 --> 00:17:15,438
import the the<font color="#CCCCCC"> digitalocean</font>

371
00:17:13,069 --> 00:17:17,359
you can import the just cloud fronting

372
00:17:15,439 --> 00:17:19,100
<font color="#CCCCCC">on so anything that you wanted to do on</font>

373
00:17:17,359 --> 00:17:21,708
your<font color="#E5E5E5"> own you could simply import it and</font>

374
00:17:19,099 --> 00:17:23,599
just run<font color="#CCCCCC"> it inside your own program</font><font color="#E5E5E5"> so</font>

375
00:17:21,709 --> 00:17:26,419
that's that's what I really wanted<font color="#CCCCCC"> to</font>

376
00:17:23,599 --> 00:17:28,639
have a package<font color="#CCCCCC"> based system</font><font color="#E5E5E5"> so</font><font color="#CCCCCC"> that if</font>

377
00:17:26,419 --> 00:17:30,320
you wanted<font color="#CCCCCC"> to just take</font><font color="#E5E5E5"> a few of these</font>

378
00:17:28,640 --> 00:17:31,880
<font color="#E5E5E5">and kind</font><font color="#CCCCCC"> of make it into something</font><font color="#E5E5E5"> your</font>

379
00:17:30,320 --> 00:17:33,260
own<font color="#E5E5E5"> that's something you can go ahead</font>

380
00:17:31,880 --> 00:17:34,520
<font color="#E5E5E5">and do no problem</font>

381
00:17:33,260 --> 00:17:37,190
so all these functions are<font color="#E5E5E5"> already</font>

382
00:17:34,520 --> 00:17:39,230
written<font color="#E5E5E5"> and you don't have to wrestle</font>

383
00:17:37,190 --> 00:17:40,669
<font color="#E5E5E5">with this tool</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> can really kind</font><font color="#CCCCCC"> of do</font>

384
00:17:39,230 --> 00:17:43,340
what you want if you're looking for

385
00:17:40,669 --> 00:17:45,000
something<font color="#E5E5E5"> a little</font><font color="#CCCCCC"> bit different but now</font>

386
00:17:43,340 --> 00:17:48,870
we have

387
00:17:45,000 --> 00:17:53,460
our servers have been<font color="#E5E5E5"> deployed and we're</font>

388
00:17:48,870 --> 00:17:56,189
gonna go ahead<font color="#E5E5E5"> and list them if as you</font>

389
00:17:53,460 --> 00:18:01,049
can see um it gives you the type the IP

390
00:17:56,190 --> 00:18:03,270
<font color="#CCCCCC">the region and various states of what's</font>

391
00:18:01,049 --> 00:18:08,850
going<font color="#E5E5E5"> on so we're gonna go ahead and add</font>

392
00:18:03,270 --> 00:18:12,510
Sox proxies and as you can<font color="#E5E5E5"> see we</font>

393
00:18:08,850 --> 00:18:14,760
created Sox proxies<font color="#E5E5E5"> added all the</font>

394
00:18:12,510 --> 00:18:15,539
servers to<font color="#CCCCCC"> the proxy</font><font color="#E5E5E5"> and started on port</font>

395
00:18:14,760 --> 00:18:17,760
8081

396
00:18:15,539 --> 00:18:21,559
<font color="#E5E5E5">and then now it'll increment through</font>

397
00:18:17,760 --> 00:18:25,140
each one<font color="#E5E5E5"> and</font><font color="#CCCCCC"> now I have four Sox proxies</font>

398
00:18:21,559 --> 00:18:26,668
<font color="#E5E5E5">then we printed out the proxy config so</font>

399
00:18:25,140 --> 00:18:29,460
you could copy and<font color="#E5E5E5"> paste this into your</font>

400
00:18:26,669 --> 00:18:34,559
proxy chains config file<font color="#E5E5E5"> or you could</font>

401
00:18:29,460 --> 00:18:36,299
use this in Sox<font color="#CCCCCC"> T also</font><font color="#E5E5E5"> it's not limited</font>

402
00:18:34,559 --> 00:18:37,860
<font color="#E5E5E5">to anything if you got 80 servers you</font>

403
00:18:36,299 --> 00:18:43,110
could spin up 80 instances of a socks

404
00:18:37,860 --> 00:18:45,689
proxy if you so desire so now we're

405
00:18:43,110 --> 00:18:52,709
gonna<font color="#E5E5E5"> go ahead and kill one</font><font color="#CCCCCC"> of the Sox</font>

406
00:18:45,690 --> 00:18:57,539
proxies<font color="#CCCCCC"> and for for the for the server</font>

407
00:18:52,710 --> 00:18:59,429
one so now as you<font color="#E5E5E5"> can see the Sox value</font>

408
00:18:57,539 --> 00:19:03,809
is<font color="#E5E5E5"> in a so that means the</font><font color="#CCCCCC"> sux is not</font>

409
00:18:59,429 --> 00:19:05,490
live for that host so we're gonna drop

410
00:19:03,809 --> 00:19:07,260
<font color="#CCCCCC">into that</font><font color="#E5E5E5"> host because we're gonna want</font>

411
00:19:05,490 --> 00:19:10,970
to<font color="#CCCCCC"> make this host like a web server</font>

412
00:19:07,260 --> 00:19:14,640
right<font color="#E5E5E5"> so we're gonna open up a shell and</font>

413
00:19:10,970 --> 00:19:20,250
just<font color="#CCCCCC"> a little confirmation</font><font color="#E5E5E5"> of where I'm</font>

414
00:19:14,640 --> 00:19:21,750
at you got the ifconfig<font color="#E5E5E5"> and so what</font>

415
00:19:20,250 --> 00:19:23,940
you'd be doing<font color="#CCCCCC"> here is you would go in</font>

416
00:19:21,750 --> 00:19:26,340
there<font color="#E5E5E5"> you would make manual</font><font color="#CCCCCC"> changes to</font>

417
00:19:23,940 --> 00:19:27,630
the server<font color="#CCCCCC"> that you would want and let's</font>

418
00:19:26,340 --> 00:19:29,970
say you want to<font color="#E5E5E5"> install Apache</font>

419
00:19:27,630 --> 00:19:32,490
<font color="#E5E5E5">kind of do some custom requests on it or</font>

420
00:19:29,970 --> 00:19:34,799
just<font color="#CCCCCC"> anything customized that you want</font>

421
00:19:32,490 --> 00:19:42,179
to do to it<font color="#E5E5E5"> it'll be easy to drop in and</font>

422
00:19:34,799 --> 00:19:44,100
do it manually<font color="#E5E5E5"> so there you have it</font>

423
00:19:42,179 --> 00:19:47,970
<font color="#CCCCCC">right there</font><font color="#E5E5E5"> and now we're gonna make a</font>

424
00:19:44,100 --> 00:19:51,449
firewall for that server that<font color="#E5E5E5"> we want to</font>

425
00:19:47,970 --> 00:19:54,059
act as<font color="#E5E5E5"> our web server so we're going</font><font color="#CCCCCC"> to</font>

426
00:19:51,450 --> 00:19:56,669
<font color="#E5E5E5">create a 443 inbound and we're gonna</font>

427
00:19:54,059 --> 00:20:00,379
<font color="#E5E5E5">make it globally accessible and then</font>

428
00:19:56,669 --> 00:20:00,380
we're gonna name the firewall

429
00:20:09,179 --> 00:20:16,299
and then we're gonna list the firewall

430
00:20:13,059 --> 00:20:18,790
<font color="#E5E5E5">that we have active so now as you can</font>

431
00:20:16,299 --> 00:20:21,190
<font color="#CCCCCC">see</font><font color="#E5E5E5"> we're able to create a firewall just</font>

432
00:20:18,790 --> 00:20:22,690
for that service that server<font color="#CCCCCC"> so we're</font>

433
00:20:21,190 --> 00:20:24,549
not creating<font color="#CCCCCC"> anything like a security</font>

434
00:20:22,690 --> 00:20:27,309
<font color="#CCCCCC">group that</font><font color="#E5E5E5"> has everything in it just</font>

435
00:20:24,549 --> 00:20:29,410
<font color="#E5E5E5">this server now</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> 443 inbound</font><font color="#CCCCCC"> and I can</font>

436
00:20:27,309 --> 00:20:32,559
make<font color="#CCCCCC"> it a web server</font><font color="#E5E5E5"> and kind of do what</font>

437
00:20:29,410 --> 00:20:36,130
I want something I'm looking<font color="#E5E5E5"> to add in</font>

438
00:20:32,559 --> 00:20:37,480
the future<font color="#CCCCCC"> is a bit more customized</font>

439
00:20:36,130 --> 00:20:40,179
ability in<font color="#CCCCCC"> terms</font><font color="#E5E5E5"> of deploying web</font>

440
00:20:37,480 --> 00:20:41,919
servers<font color="#E5E5E5"> I do have something on my github</font>

441
00:20:40,179 --> 00:20:44,980
right now<font color="#CCCCCC"> that'll automatically deploy a</font>

442
00:20:41,919 --> 00:20:47,320
let's encrypt cert<font color="#CCCCCC"> - to a server</font><font color="#E5E5E5"> of your</font>

443
00:20:44,980 --> 00:20:49,480
<font color="#E5E5E5">choice so that's going to be implemented</font>

444
00:20:47,320 --> 00:20:51,790
<font color="#CCCCCC">in this and probably</font><font color="#E5E5E5"> the coming weeks of</font>

445
00:20:49,480 --> 00:20:55,000
being able<font color="#E5E5E5"> to deploy a web server deploy</font>

446
00:20:51,790 --> 00:21:02,350
let's encrypt cert<font color="#CCCCCC"> um just on the go in</font>

447
00:20:55,000 --> 00:21:06,100
one command so now we're gonna create a

448
00:21:02,350 --> 00:21:12,189
domain front<font color="#E5E5E5"> and we're gonna do</font><font color="#CCCCCC"> a google</font>

449
00:21:06,100 --> 00:21:20,770
domain front and where we want it<font color="#E5E5E5"> to</font>

450
00:21:12,190 --> 00:21:25,510
<font color="#E5E5E5">point to is essentially where we're</font>

451
00:21:20,770 --> 00:21:27,160
gonna wear the redirector<font color="#E5E5E5"> for is where</font>

452
00:21:25,510 --> 00:21:33,940
we're<font color="#E5E5E5"> where the redirector is going to</font>

453
00:21:27,160 --> 00:21:36,340
point to<font color="#E5E5E5"> our</font><font color="#CCCCCC"> c2 server</font><font color="#E5E5E5"> for example so I</font>

454
00:21:33,940 --> 00:21:37,780
think going<font color="#E5E5E5"> through all those and we're</font>

455
00:21:36,340 --> 00:21:39,720
<font color="#E5E5E5">not going to restrict based on user</font>

456
00:21:37,780 --> 00:21:42,480
agent or subnet but that is an<font color="#CCCCCC"> option to</font>

457
00:21:39,720 --> 00:21:45,309
kind<font color="#E5E5E5"> of as I was talking about before</font>

458
00:21:42,480 --> 00:21:47,020
redirect<font color="#E5E5E5"> based on that user agent or</font>

459
00:21:45,309 --> 00:21:48,940
subnet<font color="#E5E5E5"> so you can kind of provide a</font>

460
00:21:47,020 --> 00:21:50,799
little bit<font color="#E5E5E5"> more defensive measures to</font>

461
00:21:48,940 --> 00:21:56,309
this domain front not make it really

462
00:21:50,799 --> 00:21:59,679
globally accessible and we're using

463
00:21:56,309 --> 00:22:04,740
<font color="#CCCCCC">g-cloud here and so</font><font color="#E5E5E5"> I'm</font><font color="#CCCCCC"> going to go</font>

464
00:21:59,679 --> 00:22:04,740
<font color="#E5E5E5">ahead and make my</font><font color="#CCCCCC"> appspot instance</font>

465
00:22:12,339 --> 00:22:21,259
so now what's happening is<font color="#E5E5E5"> that it's a</font>

466
00:22:19,279 --> 00:22:22,789
<font color="#E5E5E5">basically updating the</font><font color="#CCCCCC"> app engine</font>

467
00:22:21,259 --> 00:22:25,190
service that it's using because with

468
00:22:22,789 --> 00:22:28,879
<font color="#E5E5E5">Google domain fronting you use an app</font>

469
00:22:25,190 --> 00:22:31,219
engine service that you can request any

470
00:22:28,879 --> 00:22:33,619
Google URL<font color="#E5E5E5"> and you set the host header</font>

471
00:22:31,219 --> 00:22:37,669
to your<font color="#E5E5E5"> app spot URL provided by the</font>

472
00:22:33,619 --> 00:22:40,249
service so now that it's complete<font color="#E5E5E5"> we're</font>

473
00:22:37,669 --> 00:22:46,219
<font color="#CCCCCC">gonna go ahead and list the domain</font>

474
00:22:40,249 --> 00:22:51,469
fronts<font color="#CCCCCC"> and so as you</font><font color="#E5E5E5"> can</font><font color="#CCCCCC"> see this</font><font color="#E5E5E5"> the</font>

475
00:22:46,219 --> 00:22:53,869
URL<font color="#E5E5E5"> if we request</font><font color="#CCCCCC"> let's say if</font><font color="#E5E5E5"> I if I</font>

476
00:22:51,469 --> 00:22:58,219
did a curl command and set the host

477
00:22:53,869 --> 00:23:00,649
header to<font color="#E5E5E5"> inbox</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> ninety-day p.m. but</font>

478
00:22:58,219 --> 00:23:03,889
<font color="#CCCCCC">the URL</font><font color="#E5E5E5"> that I requested was inbox</font>

479
00:23:00,649 --> 00:23:09,889
<font color="#CCCCCC">google.com it would actually</font><font color="#E5E5E5"> be</font>

480
00:23:03,889 --> 00:23:12,468
redirected to<font color="#CCCCCC"> http example.com</font><font color="#E5E5E5"> so how we</font>

481
00:23:09,889 --> 00:23:14,408
use that<font color="#CCCCCC"> in a Red Team</font><font color="#E5E5E5"> situation is</font>

482
00:23:12,469 --> 00:23:17,210
let's say I have an agent<font color="#CCCCCC"> inside the</font>

483
00:23:14,409 --> 00:23:20,359
basically<font color="#E5E5E5"> on a restricted corporate</font>

484
00:23:17,210 --> 00:23:23,210
network where they do kind<font color="#CCCCCC"> of a web</font>

485
00:23:20,359 --> 00:23:25,039
content inspection outbound so what's

486
00:23:23,210 --> 00:23:26,869
happened or what web content inspection

487
00:23:25,039 --> 00:23:28,460
<font color="#E5E5E5">so the thing is is that when they're</font>

488
00:23:26,869 --> 00:23:31,488
reaching out they're actually<font color="#CCCCCC"> making</font>

489
00:23:28,460 --> 00:23:35,179
that request that negotiation with inbox

490
00:23:31,489 --> 00:23:37,639
<font color="#CCCCCC">on google.com</font><font color="#E5E5E5"> and so as my</font><font color="#CCCCCC"> agent is as</font>

491
00:23:35,179 --> 00:23:39,259
<font color="#CCCCCC">it's traffic</font><font color="#E5E5E5"> the data</font><font color="#CCCCCC"> it's exfilling</font>

492
00:23:37,639 --> 00:23:41,658
is actually being<font color="#CCCCCC"> encrypted with a</font>

493
00:23:39,259 --> 00:23:43,339
<font color="#E5E5E5">Google certificate going out to Google's</font>

494
00:23:41,659 --> 00:23:46,039
infrastructure and then getting routed

495
00:23:43,339 --> 00:23:49,668
to my<font color="#E5E5E5"> c2 infrastructure so that means</font>

496
00:23:46,039 --> 00:23:51,619
that this malicious agent a<font color="#E5E5E5"> trojan or</font>

497
00:23:49,669 --> 00:23:53,989
<font color="#E5E5E5">whatever is now communicating with</font>

498
00:23:51,619 --> 00:23:56,570
google.com<font color="#E5E5E5"> from outsider's perspective</font>

499
00:23:53,989 --> 00:23:59,509
<font color="#E5E5E5">but it's being routed to my c2</font>

500
00:23:56,570 --> 00:24:03,349
infrastructure and I now<font color="#CCCCCC"> have a robust</font>

501
00:23:59,509 --> 00:24:12,979
encrypted c2 channel with HSTs<font color="#E5E5E5"> via</font>

502
00:24:03,349 --> 00:24:18,218
Google comm and I believe that<font color="#E5E5E5"> that</font><font color="#CCCCCC"> is</font>

503
00:24:12,979 --> 00:24:20,630
the<font color="#CCCCCC"> end</font><font color="#E5E5E5"> of the demo right</font><font color="#CCCCCC"> now and then</font>

504
00:24:18,219 --> 00:24:24,110
let me<font color="#CCCCCC"> just move on</font>

505
00:24:20,630 --> 00:24:25,720
ooh<font color="#E5E5E5"> the future improvements that I'm</font>

506
00:24:24,110 --> 00:24:28,760
<font color="#CCCCCC">looking</font><font color="#E5E5E5"> to make this in the coming weeks</font>

507
00:24:25,720 --> 00:24:30,440
<font color="#E5E5E5">or adding</font><font color="#CCCCCC"> more cloud providers</font><font color="#E5E5E5"> and a</font>

508
00:24:28,760 --> 00:24:34,820
web-based graphical interface you can

509
00:24:30,440 --> 00:24:36,590
get more<font color="#E5E5E5"> of a basically more of a visual</font>

510
00:24:34,820 --> 00:24:38,750
<font color="#E5E5E5">view of what's going</font><font color="#CCCCCC"> on</font>

511
00:24:36,590 --> 00:24:42,050
what you're<font color="#E5E5E5"> doing kind of more graphs</font>

512
00:24:38,750 --> 00:24:44,600
and<font color="#E5E5E5"> this</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> better interface for the user</font>

513
00:24:42,050 --> 00:24:47,990
<font color="#CCCCCC">to deal with this</font><font color="#E5E5E5"> I'm also looking into</font>

514
00:24:44,600 --> 00:24:49,370
<font color="#CCCCCC">adding docker containers and vagrant VMs</font>

515
00:24:47,990 --> 00:24:51,290
in order to push them<font color="#CCCCCC"> up in the</font>

516
00:24:49,370 --> 00:24:53,330
infrastructure<font color="#E5E5E5"> make it a little bit</font>

517
00:24:51,290 --> 00:24:55,940
easier<font color="#CCCCCC"> to install dependencies and</font>

518
00:24:53,330 --> 00:24:58,399
things like<font color="#E5E5E5"> that</font><font color="#CCCCCC"> on also working out</font>

519
00:24:55,940 --> 00:25:01,280
working out the distributed<font color="#E5E5E5"> commands and</font>

520
00:24:58,400 --> 00:25:03,620
adding more cloud services<font color="#CCCCCC"> such as AWS</font>

521
00:25:01,280 --> 00:25:07,700
<font color="#E5E5E5">lambda and integrating those more into</font>

522
00:25:03,620 --> 00:25:10,669
the platform<font color="#CCCCCC"> furthermore</font><font color="#E5E5E5"> looking for a</font>

523
00:25:07,700 --> 00:25:12,890
little<font color="#E5E5E5"> bit more robustness</font><font color="#CCCCCC"> in the way</font>

524
00:25:10,670 --> 00:25:15,440
I'm basically the<font color="#E5E5E5"> way I'm taking</font><font color="#CCCCCC"> input</font>

525
00:25:12,890 --> 00:25:17,990
<font color="#CCCCCC">in the way I'm deploying things it's so</font>

526
00:25:15,440 --> 00:25:20,420
it's still<font color="#CCCCCC"> very immature but right now</font>

527
00:25:17,990 --> 00:25:22,370
it's I'm using it in<font color="#CCCCCC"> the wild</font><font color="#E5E5E5"> and it's</font>

528
00:25:20,420 --> 00:25:27,410
it's it's<font color="#CCCCCC"> worked out</font><font color="#E5E5E5"> pretty</font><font color="#CCCCCC"> well for me</font>

529
00:25:22,370 --> 00:25:29,209
on engagement<font color="#E5E5E5"> so far</font><font color="#CCCCCC"> um that was</font><font color="#E5E5E5"> the end</font>

530
00:25:27,410 --> 00:25:51,860
of my talk I<font color="#E5E5E5"> will open it up for</font>

531
00:25:29,210 --> 00:25:53,540
<font color="#E5E5E5">questions if anyone has any yeah yeah</font>

532
00:25:51,860 --> 00:25:56,179
for<font color="#E5E5E5"> sure</font><font color="#CCCCCC"> I mean I'm definitely like</font>

533
00:25:53,540 --> 00:25:59,060
<font color="#E5E5E5">lambda functions and um that that kind</font>

534
00:25:56,180 --> 00:26:00,950
of idea<font color="#E5E5E5"> is definitely in the works</font><font color="#CCCCCC"> right</font>

535
00:25:59,060 --> 00:26:03,110
<font color="#E5E5E5">now because that's my that's much like</font>

536
00:26:00,950 --> 00:26:05,420
what I'm using<font color="#CCCCCC"> for Google App Engine you</font>

537
00:26:03,110 --> 00:26:07,850
can just<font color="#CCCCCC"> deploy a single go script into</font>

538
00:26:05,420 --> 00:26:09,770
Google App Engine and do that but<font color="#E5E5E5"> lambda</font>

539
00:26:07,850 --> 00:26:29,750
is definitely in<font color="#E5E5E5"> development</font><font color="#CCCCCC"> pipeline</font>

540
00:26:09,770 --> 00:26:30,260
for<font color="#E5E5E5"> sure yes but on the it's because</font>

541
00:26:29,750 --> 00:26:35,150
<font color="#CCCCCC">it's</font>

542
00:26:30,260 --> 00:26:37,790
wrapped in<font color="#E5E5E5"> the TLS yeah no see what</font>

543
00:26:35,150 --> 00:26:39,110
happens is is that<font color="#E5E5E5"> they what happens is</font>

544
00:26:37,790 --> 00:26:42,020
it reaches Google's<font color="#CCCCCC"> front-end</font>

545
00:26:39,110 --> 00:26:43,760
infrastructure and then now that<font color="#E5E5E5"> URL is</font>

546
00:26:42,020 --> 00:26:45,050
gone and then it redirects based on the

547
00:26:43,760 --> 00:26:49,070
host header once<font color="#E5E5E5"> you get to Google's</font>

548
00:26:45,050 --> 00:26:52,340
infrastructure<font color="#E5E5E5"> it's supposed to match if</font>

549
00:26:49,070 --> 00:26:55,550
it<font color="#E5E5E5"> no yeah</font>

550
00:26:52,340 --> 00:26:58,030
they do not care yet yeah<font color="#CCCCCC"> exactly</font>

551
00:26:55,550 --> 00:27:01,340
because<font color="#E5E5E5"> I mean I forget which RFC it is</font>

552
00:26:58,030 --> 00:27:04,160
but the RFC that defines the host header

553
00:27:01,340 --> 00:27:06,350
<font color="#CCCCCC">um and if it's a compliant proxy</font><font color="#E5E5E5"> it'll</font>

554
00:27:04,160 --> 00:27:08,420
rewrite<font color="#E5E5E5"> the host header and thwart</font><font color="#CCCCCC"> that</font>

555
00:27:06,350 --> 00:27:12,469
but because<font color="#CCCCCC"> it's encrypted with HSTs</font>

556
00:27:08,420 --> 00:27:23,270
<font color="#E5E5E5">it's um really really</font><font color="#CCCCCC"> hard to intercept</font>

557
00:27:12,470 --> 00:27:26,060
<font color="#E5E5E5">that SSL connection right yeah um but</font>

558
00:27:23,270 --> 00:27:29,210
<font color="#CCCCCC">like I said there that's actually it's</font>

559
00:27:26,060 --> 00:27:30,860
part of what adds robustness<font color="#CCCCCC"> to</font><font color="#E5E5E5"> the</font>

560
00:27:29,210 --> 00:27:33,590
internet you<font color="#E5E5E5"> know because basically</font>

561
00:27:30,860 --> 00:27:36,919
<font color="#E5E5E5">making domain fronting work is they can</font>

562
00:27:33,590 --> 00:27:38,780
<font color="#E5E5E5">by Pat they can</font><font color="#CCCCCC"> ensure availability in a</font>

563
00:27:36,920 --> 00:27:42,290
way so it's it's one of<font color="#E5E5E5"> those things</font>

564
00:27:38,780 --> 00:27:44,300
that until it really<font color="#E5E5E5"> becomes an issue I</font>

565
00:27:42,290 --> 00:27:47,659
doubt they're gonna do<font color="#E5E5E5"> anything about it</font>

566
00:27:44,300 --> 00:27:49,100
<font color="#CCCCCC">um even then I'm sure</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> if they</font><font color="#E5E5E5"> get</font>

567
00:27:47,660 --> 00:27:51,350
like a subpoena<font color="#E5E5E5"> or something like that</font>

568
00:27:49,100 --> 00:27:54,290
<font color="#E5E5E5">they'll</font><font color="#CCCCCC"> just give the owner of</font><font color="#E5E5E5"> that</font>

569
00:27:51,350 --> 00:27:58,100
instance to whoever<font color="#E5E5E5"> so I'm not</font><font color="#CCCCCC"> sure that</font>

570
00:27:54,290 --> 00:28:01,250
from<font color="#E5E5E5"> I'm not</font><font color="#CCCCCC"> sure to ever become rampant</font>

571
00:27:58,100 --> 00:28:03,139
<font color="#E5E5E5">with script kiddies enough that it will</font>

572
00:28:01,250 --> 00:28:05,900
actually<font color="#E5E5E5"> become that big of an issue but</font>

573
00:28:03,140 --> 00:28:20,660
if it does change<font color="#CCCCCC"> then I'm gonna be very</font>

574
00:28:05,900 --> 00:28:22,370
<font color="#CCCCCC">disappointed anyone</font><font color="#E5E5E5"> else oh yeah for</font>

575
00:28:20,660 --> 00:28:24,620
<font color="#CCCCCC">sure</font><font color="#E5E5E5"> um if you wanna if you want to</font>

576
00:28:22,370 --> 00:28:26,469
<font color="#E5E5E5">collaborate just on you can get in touch</font>

577
00:28:24,620 --> 00:28:31,070
<font color="#CCCCCC">with me via like LinkedIn or Twitter</font>

578
00:28:26,470 --> 00:28:34,640
<font color="#E5E5E5">it's at</font><font color="#CCCCCC"> our my kagaz and you can uh we</font>

579
00:28:31,070 --> 00:28:37,100
can<font color="#CCCCCC"> flesh something out</font><font color="#E5E5E5"> I'm very very</font>

580
00:28:34,640 --> 00:28:39,200
new to the whole collaborative

581
00:28:37,100 --> 00:28:41,439
<font color="#CCCCCC">development and my wife is actually</font><font color="#E5E5E5"> like</font>

582
00:28:39,200 --> 00:28:44,020
<font color="#E5E5E5">teaching me everything about</font>

583
00:28:41,440 --> 00:28:46,660
not<font color="#CCCCCC"> pushing the master</font><font color="#E5E5E5"> and using</font>

584
00:28:44,020 --> 00:28:47,920
branches and<font color="#CCCCCC"> everything but yeah I'm</font>

585
00:28:46,660 --> 00:28:49,600
<font color="#CCCCCC">definitely open</font><font color="#E5E5E5"> to it because I think</font>

586
00:28:47,920 --> 00:28:51,610
<font color="#E5E5E5">that would uh it would add a lot of</font>

587
00:28:49,600 --> 00:28:53,050
value<font color="#CCCCCC"> to</font><font color="#E5E5E5"> it because the whole</font><font color="#CCCCCC"> idea is</font><font color="#E5E5E5"> I</font>

588
00:28:51,610 --> 00:28:55,780
want<font color="#CCCCCC"> to</font><font color="#E5E5E5"> create more of a framework that</font>

589
00:28:53,050 --> 00:28:57,639
people<font color="#E5E5E5"> can</font><font color="#CCCCCC"> use and not just restrict</font>

590
00:28:55,780 --> 00:29:00,129
them<font color="#CCCCCC"> to the tool and kind of</font><font color="#E5E5E5"> give</font>

591
00:28:57,640 --> 00:29:02,380
everyone<font color="#E5E5E5"> this capability of kind of more</font>

592
00:29:00,130 --> 00:29:07,290
<font color="#CCCCCC">this is DevOps II kind of</font><font color="#E5E5E5"> pen testing</font>

593
00:29:02,380 --> 00:29:07,290
and um kind of<font color="#E5E5E5"> this Red Team framework</font>

594
00:29:10,020 --> 00:29:26,020
um what do<font color="#E5E5E5"> you mean um with the with the</font>

595
00:29:23,020 --> 00:29:28,810
<font color="#E5E5E5">Google domain fronting</font><font color="#CCCCCC"> um yes because</font>

596
00:29:26,020 --> 00:29:30,940
the<font color="#CCCCCC"> it's encrypted</font><font color="#E5E5E5"> all the way to the</font>

597
00:29:28,810 --> 00:29:33,310
<font color="#CCCCCC">appspot instance and then it's kind of</font>

598
00:29:30,940 --> 00:29:35,050
<font color="#E5E5E5">like in the</font><font color="#CCCCCC"> Google domain fronting I'm</font>

599
00:29:33,310 --> 00:29:38,500
using more<font color="#E5E5E5"> of a reverse proxy</font><font color="#CCCCCC"> on App</font>

600
00:29:35,050 --> 00:29:41,530
Engine<font color="#CCCCCC"> in the Amazon Cloud domain</font>

601
00:29:38,500 --> 00:29:44,980
fronting I use cloud<font color="#E5E5E5"> front so both of</font>

602
00:29:41,530 --> 00:29:47,860
<font color="#E5E5E5">those if you set an endpoint for HTTP so</font>

603
00:29:44,980 --> 00:29:50,590
it's reaching that that redirector and

604
00:29:47,860 --> 00:29:53,439
it's being inside that redirector<font color="#CCCCCC"> VM</font>

605
00:29:50,590 --> 00:29:55,659
it's actually it's being decrypted<font color="#E5E5E5"> and</font>

606
00:29:53,440 --> 00:29:58,780
<font color="#E5E5E5">then re encrypted when it negotiates</font>

607
00:29:55,660 --> 00:30:01,780
with<font color="#E5E5E5"> your HTTP encrypted a C</font><font color="#CCCCCC"> 2</font><font color="#E5E5E5"> C</font><font color="#CCCCCC"> 2</font>

608
00:29:58,780 --> 00:30:04,030
server so if they were inspecting the

609
00:30:01,780 --> 00:30:06,010
contents<font color="#E5E5E5"> of the VM they could see what's</font>

610
00:30:04,030 --> 00:30:08,770
going in but then<font color="#CCCCCC"> again if they're</font>

611
00:30:06,010 --> 00:30:10,600
inspecting contents of VM traffic<font color="#E5E5E5"> that's</font>

612
00:30:08,770 --> 00:30:23,550
kind of<font color="#E5E5E5"> a</font><font color="#CCCCCC"> no-no if people were figuring</font>

613
00:30:10,600 --> 00:30:27,010
that out<font color="#CCCCCC"> right um great question so</font><font color="#E5E5E5"> uh</font>

614
00:30:23,550 --> 00:30:29,200
me<font color="#E5E5E5"> a colleague of mine and a couple of</font>

615
00:30:27,010 --> 00:30:31,629
more of the network architecture<font color="#CCCCCC"> guys</font>

616
00:30:29,200 --> 00:30:35,560
<font color="#CCCCCC">adoptive we actually did a study</font><font color="#E5E5E5"> on this</font>

617
00:30:31,630 --> 00:30:38,430
<font color="#E5E5E5">and ran basically ran</font><font color="#CCCCCC"> Google - ran</font><font color="#E5E5E5"> this</font>

618
00:30:35,560 --> 00:30:41,679
domain fronting<font color="#E5E5E5"> and ran it through</font>

619
00:30:38,430 --> 00:30:43,330
various uh<font color="#E5E5E5"> basically ran through</font>

620
00:30:41,680 --> 00:30:46,360
Wireshark and sent the<font color="#CCCCCC"> peak</font><font color="#E5E5E5"> caps off to</font>

621
00:30:43,330 --> 00:30:50,820
them and what you<font color="#E5E5E5"> find is that</font><font color="#CCCCCC"> B</font><font color="#E5E5E5"> core it</font>

622
00:30:46,360 --> 00:30:54,340
<font color="#CCCCCC">be</font><font color="#E5E5E5"> ratio</font><font color="#CCCCCC"> to certificate negotiations</font><font color="#E5E5E5"> and</font>

623
00:30:50,820 --> 00:30:56,710
requests<font color="#E5E5E5"> is abnormally high</font>

624
00:30:54,340 --> 00:30:59,260
so that is that<font color="#E5E5E5"> is probably</font><font color="#CCCCCC"> your best</font>

625
00:30:56,710 --> 00:31:01,900
indicator<font color="#E5E5E5"> that this is happening</font><font color="#CCCCCC"> is that</font>

626
00:30:59,260 --> 00:31:05,050
<font color="#E5E5E5">there is a new certificate negotiation</font>

627
00:31:01,900 --> 00:31:08,680
<font color="#CCCCCC">each time the</font><font color="#E5E5E5"> request the it beacons</font>

628
00:31:05,050 --> 00:31:11,320
<font color="#CCCCCC">outright</font><font color="#E5E5E5"> so that is that</font><font color="#CCCCCC"> is one way you</font>

629
00:31:08,680 --> 00:31:15,220
certainly could like there<font color="#E5E5E5"> are</font><font color="#CCCCCC"> agency or</font>

630
00:31:11,320 --> 00:31:17,830
you could build in reusing that<font color="#E5E5E5"> sir</font>

631
00:31:15,220 --> 00:31:20,470
Tipene that connection<font color="#CCCCCC"> but as of right</font>

632
00:31:17,830 --> 00:31:23,770
<font color="#CCCCCC">now the that is probably in</font><font color="#E5E5E5"> my opinion</font>

633
00:31:20,470 --> 00:31:26,080
<font color="#CCCCCC">the best way</font><font color="#E5E5E5"> because um it's not</font>

634
00:31:23,770 --> 00:31:28,990
necessarily feasible<font color="#E5E5E5"> to strip SSL</font><font color="#CCCCCC"> on all</font>

635
00:31:26,080 --> 00:31:31,060
<font color="#CCCCCC">of this</font><font color="#E5E5E5"> but I would say that that is</font>

636
00:31:28,990 --> 00:31:32,710
<font color="#CCCCCC">probably your best indicator</font><font color="#E5E5E5"> if you want</font>

637
00:31:31,060 --> 00:31:36,040
to get<font color="#E5E5E5"> more information on this</font>

638
00:31:32,710 --> 00:31:39,010
<font color="#E5E5E5">technique specifically um the Optive</font>

639
00:31:36,040 --> 00:31:42,129
blog<font color="#E5E5E5"> has a we did a write-up on this and</font>

640
00:31:39,010 --> 00:31:44,710
also<font color="#E5E5E5"> we had the more of our defenders</font>

641
00:31:42,130 --> 00:31:47,050
come in and do their write-up on what

642
00:31:44,710 --> 00:31:49,510
they saw and how to detect it<font color="#E5E5E5"> it's</font>

643
00:31:47,050 --> 00:31:52,600
called<font color="#E5E5E5"> I think</font><font color="#CCCCCC"> it's egress and evasion</font>

644
00:31:49,510 --> 00:31:54,010
and restricted networks part two so if

645
00:31:52,600 --> 00:31:56,080
you want<font color="#E5E5E5"> to go</font><font color="#CCCCCC"> check that out and kind</font>

646
00:31:54,010 --> 00:31:57,340
of more<font color="#CCCCCC"> information about this um I</font>

647
00:31:56,080 --> 00:31:59,080
would highly recommend taking a look

648
00:31:57,340 --> 00:32:00,820
it's a pretty good pretty good

649
00:31:59,080 --> 00:32:09,490
<font color="#E5E5E5">collaborative piece between red</font><font color="#CCCCCC"> and red</font>

650
00:32:00,820 --> 00:32:11,129
<font color="#E5E5E5">and blue on</font><font color="#CCCCCC"> that one</font><font color="#E5E5E5"> okay</font><font color="#CCCCCC"> um I'll wrap</font>

651
00:32:09,490 --> 00:32:15,889
it<font color="#E5E5E5"> up thank you for your time</font>

652
00:32:11,130 --> 00:32:15,889
[Applause]

