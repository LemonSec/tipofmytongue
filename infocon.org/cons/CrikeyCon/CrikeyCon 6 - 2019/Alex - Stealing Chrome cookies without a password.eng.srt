1
00:00:17,280 --> 00:00:27,820
give it up for Alex hey everybody and

2
00:00:24,670 --> 00:00:29,650
welcome to my talk my name is Alex and

3
00:00:27,820 --> 00:00:31,390
I'm here to talk to you about some

4
00:00:29,650 --> 00:00:33,100
corporate sponsored crimes that I did oh

5
00:00:31,390 --> 00:00:35,200
oh you can say that it's Alex with

6
00:00:33,100 --> 00:00:37,239
quotes and you might be wondering why

7
00:00:35,200 --> 00:00:39,160
are we watching my talk on a half-full

8
00:00:37,239 --> 00:00:41,470
chrome window that's embarrassing how

9
00:00:39,160 --> 00:00:45,010
about okay why didn't anyone say

10
00:00:41,470 --> 00:00:47,040
anything jeez okay oh you thought it was

11
00:00:45,010 --> 00:00:49,059
aesthetic okay yeah okay that one before

12
00:00:47,040 --> 00:00:50,589
so I'm here to talk to you about some

13
00:00:49,060 --> 00:00:52,450
crimes I did and yeah you might be

14
00:00:50,590 --> 00:00:54,160
wondering why is Alex in quotes why is

15
00:00:52,450 --> 00:00:56,230
people voting for the names in quotes

16
00:00:54,160 --> 00:00:58,120
and it's because a couple of years ago I

17
00:00:56,230 --> 00:01:00,430
wrote this blog post and the people at

18
00:00:58,120 --> 00:01:02,559
Vice magazine wrote about it and they

19
00:01:00,430 --> 00:01:05,019
linked the blog post and they said oh

20
00:01:02,560 --> 00:01:06,820
according to a blog post by a hacker who

21
00:01:05,019 --> 00:01:08,560
goes by the name Alex with the quotes

22
00:01:06,820 --> 00:01:14,470
and that's that's my real name

23
00:01:08,560 --> 00:01:15,790
so this is my hacker name now I don't

24
00:01:14,470 --> 00:01:16,929
make the rules like when someone told

25
00:01:15,790 --> 00:01:20,409
you that's yeah Canaan that's yeah I can

26
00:01:16,929 --> 00:01:21,670
name i also last year helped out with

27
00:01:20,409 --> 00:01:26,350
this conference called purple cotton

28
00:01:21,670 --> 00:01:28,420
which is oh oh don't you know what it is

29
00:01:26,350 --> 00:01:32,589
yeah it's a conference that instead of

30
00:01:28,420 --> 00:01:33,579
looking like this looks like this and we

31
00:01:32,590 --> 00:01:35,109
just thought it would be good because

32
00:01:33,579 --> 00:01:36,460
you know the whole hacker culture thing

33
00:01:35,109 --> 00:01:37,960
is about rebelling and we thought it'd

34
00:01:36,460 --> 00:01:39,939
be weird if everyone rebelled in the

35
00:01:37,960 --> 00:01:42,158
same very specific way so now they know

36
00:01:39,939 --> 00:01:45,579
now there are two ways there's more than

37
00:01:42,159 --> 00:01:47,049
two ways and so professionally I work

38
00:01:45,579 --> 00:01:49,329
adolescent now and have for a couple of

39
00:01:47,049 --> 00:01:50,740
years and previously I did like incident

40
00:01:49,329 --> 00:01:53,979
detection and response so like blue team

41
00:01:50,740 --> 00:01:57,639
stuff like detecting the thing I do now

42
00:01:53,979 --> 00:01:59,020
and now I joined the this newly formed

43
00:01:57,639 --> 00:02:00,789
red team and I've been doing it for

44
00:01:59,020 --> 00:02:03,100
about six months it was my first red

45
00:02:00,789 --> 00:02:04,479
team off it was really fun and it was

46
00:02:03,100 --> 00:02:06,219
during that up that I found the

47
00:02:04,479 --> 00:02:07,929
technique that this talk is about and so

48
00:02:06,219 --> 00:02:09,639
what actually is that it's probably time

49
00:02:07,929 --> 00:02:12,880
to talk about the actual thing instead

50
00:02:09,639 --> 00:02:14,950
of me talking about purple stuff and so

51
00:02:12,880 --> 00:02:17,349
this is a new technique too if you have

52
00:02:14,950 --> 00:02:18,640
a shell on someone's machine to get

53
00:02:17,349 --> 00:02:20,380
their chrome cookies for their Chrome

54
00:02:18,640 --> 00:02:20,880
browser and to do it without having root

55
00:02:20,380 --> 00:02:23,310
access

56
00:02:20,880 --> 00:02:25,230
and this is novel because as far as I

57
00:02:23,310 --> 00:02:26,400
know this is the first time someone's

58
00:02:25,230 --> 00:02:27,750
found a way to do this without having

59
00:02:26,400 --> 00:02:29,700
root there's a way to do it with root

60
00:02:27,750 --> 00:02:31,290
access this is the first way and only

61
00:02:29,700 --> 00:02:33,780
way I know about without having read and

62
00:02:31,290 --> 00:02:35,340
I somehow stumbled upon a technique to

63
00:02:33,780 --> 00:02:36,810
do this and this talk is about what it

64
00:02:35,340 --> 00:02:38,610
is half founded but I was thinking when

65
00:02:36,810 --> 00:02:40,980
I found it and how to use it and how to

66
00:02:38,610 --> 00:02:42,810
not use it and stuff like that so you

67
00:02:40,980 --> 00:02:44,310
might be wondering why do I want to do

68
00:02:42,810 --> 00:02:47,280
that why do I want to get someone's

69
00:02:44,310 --> 00:02:49,470
cookies and well just statistically most

70
00:02:47,280 --> 00:02:51,180
employees most people probably have

71
00:02:49,470 --> 00:02:53,940
their browser as they are most used

72
00:02:51,180 --> 00:02:55,530
software especially at work and so just

73
00:02:53,940 --> 00:02:57,900
because it's used a lot chances are that

74
00:02:55,530 --> 00:03:00,000
whatever your goal is that all the good

75
00:02:57,900 --> 00:03:01,680
stuff that that person does is in their

76
00:03:00,000 --> 00:03:03,480
browser just cuz they use it a lot and

77
00:03:01,680 --> 00:03:04,980
so like I don't know thank you

78
00:03:03,480 --> 00:03:06,720
if you're like red teaming something or

79
00:03:04,980 --> 00:03:07,920
hacking it for real I don't know what

80
00:03:06,720 --> 00:03:09,870
your goal is but it probably looks like

81
00:03:07,920 --> 00:03:11,070
something like look at the Fitbit and

82
00:03:09,870 --> 00:03:13,080
data like this forbidden daughter you

83
00:03:11,070 --> 00:03:14,790
want to look at it and so whatever

84
00:03:13,080 --> 00:03:16,320
secret thing is meant to be secret you

85
00:03:14,790 --> 00:03:18,000
want to find it and steal it and if the

86
00:03:16,320 --> 00:03:19,590
browser doesn't contain this data it

87
00:03:18,000 --> 00:03:20,310
probably contains something that will

88
00:03:19,590 --> 00:03:22,020
help you get there

89
00:03:20,310 --> 00:03:24,090
so just took of people use it alike is

90
00:03:22,020 --> 00:03:25,440
the short answer because like if you can

91
00:03:24,090 --> 00:03:27,540
log into someone's browser you can have

92
00:03:25,440 --> 00:03:28,560
this you can see most of what they're

93
00:03:27,540 --> 00:03:30,299
doing all the time and I give them this

94
00:03:28,560 --> 00:03:32,400
a very enticing screenshot like don't

95
00:03:30,300 --> 00:03:33,930
you like and it's just a picture

96
00:03:32,400 --> 00:03:35,760
everybody calm down but still it's like

97
00:03:33,930 --> 00:03:37,260
if I was there imagine all the things

98
00:03:35,760 --> 00:03:39,209
you could click I'm fine I'm fine

99
00:03:37,260 --> 00:03:40,200
and so imagine that this is the

100
00:03:39,210 --> 00:03:42,080
situation that we're talking about here

101
00:03:40,200 --> 00:03:43,920
you have a shell on someone's computer

102
00:03:42,080 --> 00:03:46,110
but and you want login to all their

103
00:03:43,920 --> 00:03:47,579
stuff but just having a shell that

104
00:03:46,110 --> 00:03:49,530
doesn't put you in the email or anything

105
00:03:47,580 --> 00:03:50,970
right you just on that computer and so

106
00:03:49,530 --> 00:03:52,470
like especially if they have to factor

107
00:03:50,970 --> 00:03:54,450
auth right like imagine that they've got

108
00:03:52,470 --> 00:03:56,340
to factor auth on I don't the email or

109
00:03:54,450 --> 00:03:57,570
something and then you have a shell on

110
00:03:56,340 --> 00:03:59,190
the computer and maybe even have that

111
00:03:57,570 --> 00:04:00,959
password as well we don't have that

112
00:03:59,190 --> 00:04:04,380
two-factor code because it's a second

113
00:04:00,960 --> 00:04:06,240
factor oh it's how they get you and but

114
00:04:04,380 --> 00:04:07,530
like once you've logged into the website

115
00:04:06,240 --> 00:04:08,070
and you've done your two-factor

116
00:04:07,530 --> 00:04:10,260
challenge

117
00:04:08,070 --> 00:04:11,519
well like you don't have to keep doing

118
00:04:10,260 --> 00:04:12,840
it every time you go there right like

119
00:04:11,520 --> 00:04:14,640
once you're logged in you're done you

120
00:04:12,840 --> 00:04:15,750
don't have to do it anymore so I can

121
00:04:14,640 --> 00:04:17,579
like let me give you an example here's

122
00:04:15,750 --> 00:04:19,440
how cookies work I think you're like hey

123
00:04:17,579 --> 00:04:21,149
can I look at my email please and then

124
00:04:19,440 --> 00:04:23,280
the web sites like what no you have to

125
00:04:21,149 --> 00:04:24,810
log in first okay fine and you give it

126
00:04:23,280 --> 00:04:27,419
all the stuff that you're doing to log

127
00:04:24,810 --> 00:04:29,600
in and like this is very hard like this

128
00:04:27,420 --> 00:04:31,409
this information is very hard to like

129
00:04:29,600 --> 00:04:32,759
fake because it's a lot

130
00:04:31,409 --> 00:04:34,319
like stuff in there there's me at the

131
00:04:32,759 --> 00:04:35,759
email address and the password and the

132
00:04:34,319 --> 00:04:37,169
two factor code however that is in this

133
00:04:35,759 --> 00:04:38,129
case it's a number and then it's like

134
00:04:37,169 --> 00:04:39,748
okay cool

135
00:04:38,129 --> 00:04:41,580
but next time just hear this magical

136
00:04:39,749 --> 00:04:42,929
cookie here's a magical session token

137
00:04:41,580 --> 00:04:44,308
and if you just send me that next time

138
00:04:42,929 --> 00:04:46,799
don't worry about all that hot stuff

139
00:04:44,309 --> 00:04:47,969
that you just did so like obviously then

140
00:04:46,800 --> 00:04:49,649
the next time when you log in you're

141
00:04:47,969 --> 00:04:50,189
like hey I wanna log in here's the magic

142
00:04:49,649 --> 00:04:51,839
thing

143
00:04:50,189 --> 00:04:54,029
oh cool he go don't worry about all that

144
00:04:51,839 --> 00:04:57,959
stuff he gave me last time here you go

145
00:04:54,029 --> 00:05:00,899
now his earlier stuff and like so

146
00:04:57,959 --> 00:05:02,610
obviously we as want to be criminals you

147
00:05:00,899 --> 00:05:04,019
just steal that thing right you don't

148
00:05:02,610 --> 00:05:05,489
have to steal all the complicated stuff

149
00:05:04,019 --> 00:05:07,709
you can just steal this like a magical

150
00:05:05,489 --> 00:05:08,758
key that gets you into places and like

151
00:05:07,709 --> 00:05:10,559
there are trade-offs to this right

152
00:05:08,759 --> 00:05:12,509
because these cookies expire sometimes

153
00:05:10,559 --> 00:05:14,369
and like it's not all perfect but I

154
00:05:12,509 --> 00:05:15,749
don't know this seems like the quickest

155
00:05:14,369 --> 00:05:16,860
and easiest way to get logged into

156
00:05:15,749 --> 00:05:19,079
somebody's thing is just steal their

157
00:05:16,860 --> 00:05:20,639
login session so how do you actually do

158
00:05:19,079 --> 00:05:21,929
that now that you've decided that you

159
00:05:20,639 --> 00:05:24,539
want to actually steal people's logins

160
00:05:21,929 --> 00:05:26,068
sessions well they're right here

161
00:05:24,539 --> 00:05:27,929
if you're on a Mac the cookies just

162
00:05:26,069 --> 00:05:29,099
leaving this file on your computer and

163
00:05:27,929 --> 00:05:31,828
we have a shell so we can just open that

164
00:05:29,099 --> 00:05:33,748
file but the good folks at Google

165
00:05:31,829 --> 00:05:35,459
thought about that and the the file

166
00:05:33,749 --> 00:05:37,829
itself is an SQLite database but the

167
00:05:35,459 --> 00:05:40,499
actual cookie values encrypted with

168
00:05:37,829 --> 00:05:42,089
something and so you can't just read

169
00:05:40,499 --> 00:05:44,219
them off the disk unless you have root

170
00:05:42,089 --> 00:05:47,129
and if you have root access then you can

171
00:05:44,219 --> 00:05:48,240
do this thing where if you want to read

172
00:05:47,129 --> 00:05:50,159
the cookie if you want to read the

173
00:05:48,240 --> 00:05:51,809
cookies they encrypted with a special

174
00:05:50,159 --> 00:05:54,240
chrome safe storage password which lives

175
00:05:51,809 --> 00:05:56,879
in their keychain if with Sun OS X so

176
00:05:54,240 --> 00:05:59,039
then you have to get the chrome get

177
00:05:56,879 --> 00:06:00,569
access get it get into the keychain get

178
00:05:59,039 --> 00:06:02,489
the safe storage password and then use

179
00:06:00,569 --> 00:06:03,869
whatever forbidden encryption algorithm

180
00:06:02,489 --> 00:06:05,219
is happening on this code on these

181
00:06:03,869 --> 00:06:07,050
cookies to actually get the plaintext

182
00:06:05,219 --> 00:06:09,419
values and now you have the cookies and

183
00:06:07,050 --> 00:06:11,009
you can log in to their stuff but that's

184
00:06:09,419 --> 00:06:13,109
complex and also you need good access

185
00:06:11,009 --> 00:06:14,459
which maybe you don't have and I'm

186
00:06:13,110 --> 00:06:16,079
saying that oh maybe you can just use

187
00:06:14,459 --> 00:06:17,939
this magical cookie crimes binary that I

188
00:06:16,079 --> 00:06:19,919
put on the screen to do that but how

189
00:06:17,939 --> 00:06:22,439
does that magic binary that I say exists

190
00:06:19,919 --> 00:06:24,688
actually work let me show you first I

191
00:06:22,439 --> 00:06:26,099
should specify that we're specifically

192
00:06:24,689 --> 00:06:27,659
talking about Google Chrome the browser

193
00:06:26,099 --> 00:06:28,739
now if you don't know google chrome is

194
00:06:27,659 --> 00:06:30,089
that thing that you install will soon as

195
00:06:28,739 --> 00:06:32,878
you get a new computer that takes like

196
00:06:30,089 --> 00:06:34,229
16 gigabytes of RAM to run because it

197
00:06:32,879 --> 00:06:36,260
takes so much RAM because I'm in

198
00:06:34,229 --> 00:06:38,620
desperate need

199
00:06:36,260 --> 00:06:40,880
[Laughter]

200
00:06:38,620 --> 00:06:42,380
it takes so much RAM because I'm

201
00:06:40,880 --> 00:06:43,909
desperately in need of help to manage my

202
00:06:42,380 --> 00:06:45,830
crippling tap addiction so I can stop

203
00:06:43,910 --> 00:06:47,450
buying very expensive game of RAM to

204
00:06:45,830 --> 00:06:49,849
store my dillion's and zillions of tabs

205
00:06:47,450 --> 00:06:52,969
that I have to not have so many tabs so

206
00:06:49,850 --> 00:06:54,410
that's that's the one and all a why Krim

207
00:06:52,970 --> 00:06:56,690
like why is it only about Google Chrome

208
00:06:54,410 --> 00:06:58,970
and it's the reason is chrome is because

209
00:06:56,690 --> 00:07:01,010
I've I found this thing during a red

210
00:06:58,970 --> 00:07:02,480
team up and that was the browser we had

211
00:07:01,010 --> 00:07:03,650
to attack and also I want to show you

212
00:07:02,480 --> 00:07:05,030
the name of the red team up I thought it

213
00:07:03,650 --> 00:07:07,659
was really good it was doing operation

214
00:07:05,030 --> 00:07:07,659
actual crimes

215
00:07:08,230 --> 00:07:13,760
and those are the stickers

216
00:07:11,770 --> 00:07:16,280
it's just named that for note for no

217
00:07:13,760 --> 00:07:17,990
reason and so imagine like maybe you

218
00:07:16,280 --> 00:07:19,429
have a plan like this you finance to get

219
00:07:17,990 --> 00:07:21,050
a shell on someone's computer and get

220
00:07:19,430 --> 00:07:22,880
rid access like escalate privileges and

221
00:07:21,050 --> 00:07:25,460
then you use this to get their cookies

222
00:07:22,880 --> 00:07:27,200
to buy it via the complicated decryption

223
00:07:25,460 --> 00:07:28,820
way I talked about before and then you

224
00:07:27,200 --> 00:07:30,070
log into all the stuff and up what's

225
00:07:28,820 --> 00:07:32,599
trending graph and you win or something

226
00:07:30,070 --> 00:07:33,770
but maybe sometimes it doesn't work

227
00:07:32,600 --> 00:07:35,120
maybe sometimes something goes wrong and

228
00:07:33,770 --> 00:07:36,620
you don't have really can't get rid

229
00:07:35,120 --> 00:07:40,130
access who didn't have you didn't have

230
00:07:36,620 --> 00:07:41,390
the password and maybe you still want to

231
00:07:40,130 --> 00:07:43,580
do all your crimes maybe you still won

232
00:07:41,390 --> 00:07:45,320
log in to all the stuff and I was

233
00:07:43,580 --> 00:07:47,479
prompted by like a teammate who said

234
00:07:45,320 --> 00:07:48,530
well it must be possible to get the

235
00:07:47,480 --> 00:07:50,630
person cookie to that root access

236
00:07:48,530 --> 00:07:52,400
because you as a user can get your own

237
00:07:50,630 --> 00:07:53,870
cookies like you can open do a chrome

238
00:07:52,400 --> 00:07:55,489
and click around in the settings and go

239
00:07:53,870 --> 00:07:56,900
to this page and like chrome will just

240
00:07:55,490 --> 00:07:59,540
give you your own cookies because they

241
00:07:56,900 --> 00:08:02,479
all make sense and that made me feel

242
00:07:59,540 --> 00:08:03,890
like hmm maybe that is possible then hmm

243
00:08:02,480 --> 00:08:05,090
cuz if I can do it then maybe I can

244
00:08:03,890 --> 00:08:07,159
maybe there's like an automatic way to

245
00:08:05,090 --> 00:08:08,479
do it and so like obviously we could

246
00:08:07,160 --> 00:08:09,440
just click around but I don't want to

247
00:08:08,480 --> 00:08:12,260
click around on someone else's computer

248
00:08:09,440 --> 00:08:14,690
that sounds very rude and so I was like

249
00:08:12,260 --> 00:08:16,520
well is there like a chrome API for this

250
00:08:14,690 --> 00:08:18,500
can I just like ask can my shell just

251
00:08:16,520 --> 00:08:20,270
ask Chrome please give can I just be

252
00:08:18,500 --> 00:08:22,370
like please give me the cookies chrome

253
00:08:20,270 --> 00:08:23,570
give me the stuff if that possible like

254
00:08:22,370 --> 00:08:24,260
I don't really know how chrome works

255
00:08:23,570 --> 00:08:26,120
maybe it's possible

256
00:08:24,260 --> 00:08:27,530
and so that prompted a lot of googling

257
00:08:26,120 --> 00:08:29,990
of me being like what is happening he

258
00:08:27,530 --> 00:08:32,270
has been able to work and it was during

259
00:08:29,990 --> 00:08:35,870
that googling that I stumbled upon this

260
00:08:32,270 --> 00:08:37,520
thing there was this github project

261
00:08:35,870 --> 00:08:38,960
called puppeteer and it's like this

262
00:08:37,520 --> 00:08:40,218
thing that's made for like automating

263
00:08:38,960 --> 00:08:41,539
Chrome it's kind of like who's kind of

264
00:08:40,219 --> 00:08:44,510
made for like testing and stuff kind of

265
00:08:41,539 --> 00:08:46,850
like selenium and it showed me this

266
00:08:44,510 --> 00:08:47,870
library and it says it uses the dev

267
00:08:46,850 --> 00:08:49,490
tools protocol

268
00:08:47,870 --> 00:08:51,350
the dev tools protocol and headless

269
00:08:49,490 --> 00:08:53,090
Chrome and I was like Hello what is all

270
00:08:51,350 --> 00:08:54,170
this about so let's learn about it the

271
00:08:53,090 --> 00:08:56,090
first thing is headless Chrome

272
00:08:54,170 --> 00:08:57,860
so chrome can run in headless mode now

273
00:08:56,090 --> 00:08:59,150
which means it still Chrome it's still

274
00:08:57,860 --> 00:09:00,410
the same thing but it doesn't display a

275
00:08:59,150 --> 00:09:02,540
window on the screen it's all just

276
00:09:00,410 --> 00:09:04,520
happening you know not on the screen and

277
00:09:02,540 --> 00:09:05,839
this is deeply powerful and probably all

278
00:09:04,520 --> 00:09:07,880
gonna go wrong one day but currently we

279
00:09:05,840 --> 00:09:09,110
still have it and I love not popping up

280
00:09:07,880 --> 00:09:11,120
a window cuz now I can run chrome

281
00:09:09,110 --> 00:09:12,560
without the person who's like whose

282
00:09:11,120 --> 00:09:13,640
computer it is knowing that they've

283
00:09:12,560 --> 00:09:17,180
chrome is being run because there's no

284
00:09:13,640 --> 00:09:18,830
window great but the catch is that

285
00:09:17,180 --> 00:09:21,020
headless chrome when you run it doesn't

286
00:09:18,830 --> 00:09:22,040
run as the user psyche when you have in

287
00:09:21,020 --> 00:09:23,660
Chrome on your computer it's logged in

288
00:09:22,040 --> 00:09:26,089
as you headless chrome is logged in as

289
00:09:23,660 --> 00:09:27,770
nobody is like incognito and so I wanted

290
00:09:26,090 --> 00:09:29,690
to know like oh that's that's not gonna

291
00:09:27,770 --> 00:09:31,760
work I need it to be the person so is

292
00:09:29,690 --> 00:09:34,850
there some way that I can make it login

293
00:09:31,760 --> 00:09:37,100
as the actual user and so this got me

294
00:09:34,850 --> 00:09:38,360
thinking about chrome profiles and if

295
00:09:37,100 --> 00:09:40,760
you ever use chrome profiles it's like

296
00:09:38,360 --> 00:09:42,020
having two browsers it's like having two

297
00:09:40,760 --> 00:09:43,460
different people's like having two

298
00:09:42,020 --> 00:09:45,680
different user accounts into Chrome and

299
00:09:43,460 --> 00:09:46,820
so and you can switch between them and

300
00:09:45,680 --> 00:09:48,890
you logged in two different things and

301
00:09:46,820 --> 00:09:50,390
so I know chrome has the idea of

302
00:09:48,890 --> 00:09:52,160
multiple identities because I know it

303
00:09:50,390 --> 00:09:53,840
has this thing but I don't know how I

304
00:09:52,160 --> 00:09:56,600
don't know where it figures out which

305
00:09:53,840 --> 00:09:58,190
identity to use at a time and so then in

306
00:09:56,600 --> 00:10:00,290
my furious googling I found this thing

307
00:09:58,190 --> 00:10:01,970
called the user data directory which

308
00:10:00,290 --> 00:10:03,829
contains history and bookmarks and

309
00:10:01,970 --> 00:10:04,850
cookies and I was like oh that's yeah I

310
00:10:03,830 --> 00:10:07,040
definitely want to know all about that

311
00:10:04,850 --> 00:10:08,870
and so then I found this github issue

312
00:10:07,040 --> 00:10:10,670
which is somebody's having trouble and

313
00:10:08,870 --> 00:10:12,140
they're using the user data directory

314
00:10:10,670 --> 00:10:13,610
and headless chrome and something's

315
00:10:12,140 --> 00:10:15,110
going wrong with their authorization and

316
00:10:13,610 --> 00:10:18,050
I am suddenly very interested in these

317
00:10:15,110 --> 00:10:19,730
very specific things at this time and so

318
00:10:18,050 --> 00:10:23,120
I really wanted to help this person out

319
00:10:19,730 --> 00:10:25,400
and this led me just a question what if

320
00:10:23,120 --> 00:10:26,660
I a legitimate web developer will want

321
00:10:25,400 --> 00:10:28,220
to run headless chrome as a different

322
00:10:26,660 --> 00:10:30,949
user maybe I shouldn't do that for my

323
00:10:28,220 --> 00:10:32,270
web developing and so the docs very

324
00:10:30,950 --> 00:10:33,920
helpfully tell me oh you can just

325
00:10:32,270 --> 00:10:35,150
override that directory there's a

326
00:10:33,920 --> 00:10:36,740
command line flag for it and you can

327
00:10:35,150 --> 00:10:38,810
just tell chrome where you want to read

328
00:10:36,740 --> 00:10:40,070
that directory from because the profiles

329
00:10:38,810 --> 00:10:42,079
are stored as different directories on

330
00:10:40,070 --> 00:10:44,810
the machine so you can like this is how

331
00:10:42,080 --> 00:10:46,670
you can switch profiles and so if you

332
00:10:44,810 --> 00:10:48,439
add the user data directory to the

333
00:10:46,670 --> 00:10:49,459
headless chrome thing you can say where

334
00:10:48,440 --> 00:10:50,930
do you want to really use it where you

335
00:10:49,460 --> 00:10:52,730
want to read the data from and this one

336
00:10:50,930 --> 00:10:54,770
on the screen is like the default place

337
00:10:52,730 --> 00:10:56,670
where chrome stores they're like profile

338
00:10:54,770 --> 00:10:58,380
for they're like normal user

339
00:10:56,670 --> 00:10:59,579
this is just a default path because

340
00:10:58,380 --> 00:11:00,810
remember if you run it with nothing it

341
00:10:59,580 --> 00:11:02,400
doesn't use the default path that uses

342
00:11:00,810 --> 00:11:04,709
like no path so I just gave it the

343
00:11:02,400 --> 00:11:06,600
normal default current path and it works

344
00:11:04,710 --> 00:11:08,100
now I'm like now when you run this you

345
00:11:06,600 --> 00:11:12,200
get to see this person's email because

346
00:11:08,100 --> 00:11:14,670
it is you and I was like oh oh no so now

347
00:11:12,200 --> 00:11:16,650
now now we can just read this present

348
00:11:14,670 --> 00:11:17,640
email but like they still can't see the

349
00:11:16,650 --> 00:11:19,800
cookies because you're just it's just

350
00:11:17,640 --> 00:11:21,180
HTML right maybe you could get the full

351
00:11:19,800 --> 00:11:22,260
request but like this is not enough time

352
00:11:21,180 --> 00:11:23,699
like do I really want to do it like this

353
00:11:22,260 --> 00:11:27,240
like if it's how this doesn't seem like

354
00:11:23,700 --> 00:11:28,440
enough so then that there's one more

355
00:11:27,240 --> 00:11:29,940
trick that was the headless Chrome

356
00:11:28,440 --> 00:11:31,830
remember there's a dev tools protocol

357
00:11:29,940 --> 00:11:34,290
thing the puppeteer is using what is the

358
00:11:31,830 --> 00:11:35,820
dev tools protocol well you know this

359
00:11:34,290 --> 00:11:37,170
button you know the best button in

360
00:11:35,820 --> 00:11:39,420
Google Chrome the one that gives you all

361
00:11:37,170 --> 00:11:41,250
the good stuff the one you used to act

362
00:11:39,420 --> 00:11:43,920
about hacking mode it looks like this

363
00:11:41,250 --> 00:11:45,810
when you have to hacking mode this thing

364
00:11:43,920 --> 00:11:48,959
this window that pops up is officially

365
00:11:45,810 --> 00:11:50,760
called dev tools and so that dev tools

366
00:11:48,960 --> 00:11:53,040
is this window and the dev tools

367
00:11:50,760 --> 00:11:54,270
protocol is how this works behind the

368
00:11:53,040 --> 00:11:56,130
scenes like what how the data is

369
00:11:54,270 --> 00:11:58,230
transmitted and so I went to this page

370
00:11:56,130 --> 00:12:00,120
the written by like people who write dev

371
00:11:58,230 --> 00:12:01,290
tools and they're talking about the dev

372
00:12:00,120 --> 00:12:03,570
tools protocol it was like the official

373
00:12:01,290 --> 00:12:05,939
Docs I guess and they're saying that

374
00:12:03,570 --> 00:12:07,710
like bla bla bla bunch of things hey if

375
00:12:05,940 --> 00:12:09,450
you'd like to enable remote debugging

376
00:12:07,710 --> 00:12:10,560
here's how to do it and I don't know

377
00:12:09,450 --> 00:12:11,820
that much about red tape me cuz I've

378
00:12:10,560 --> 00:12:13,380
only started but I know that the words

379
00:12:11,820 --> 00:12:17,910
remote and debugging at the good words

380
00:12:13,380 --> 00:12:19,050
and you want to find those words so I

381
00:12:17,910 --> 00:12:21,180
was very interested in that and I tried

382
00:12:19,050 --> 00:12:23,310
it out but the catch is the remote

383
00:12:21,180 --> 00:12:25,739
debugging it's not done over like HTTP

384
00:12:23,310 --> 00:12:28,199
it's done via some forbidden and remote

385
00:12:25,740 --> 00:12:29,130
debugging protocol which is not HTTP so

386
00:12:28,200 --> 00:12:31,290
when you do it and when you add the

387
00:12:29,130 --> 00:12:34,080
remote debugging it says it cool I'm

388
00:12:31,290 --> 00:12:35,910
listening on this WebSocket URL and like

389
00:12:34,080 --> 00:12:38,010
oh boy WebSockets I don't really know

390
00:12:35,910 --> 00:12:39,780
how those work but I had to learn and so

391
00:12:38,010 --> 00:12:41,760
but I'm also currently reading the

392
00:12:39,780 --> 00:12:44,670
official Google Docs the official Google

393
00:12:41,760 --> 00:12:45,569
documentation for this protocol so I'm

394
00:12:44,670 --> 00:12:47,550
like maybe I can just read it and

395
00:12:45,570 --> 00:12:48,900
they'll tell me how to use it and this

396
00:12:47,550 --> 00:12:50,040
is the page where they like hey here's

397
00:12:48,900 --> 00:12:51,660
the protocol view you want to know how

398
00:12:50,040 --> 00:12:53,189
it works here's what you do and so

399
00:12:51,660 --> 00:12:55,020
presumably on this page some nice people

400
00:12:53,190 --> 00:12:56,460
at Google are going to explain to me and

401
00:12:55,020 --> 00:12:59,460
outsider how to use their ancient

402
00:12:56,460 --> 00:13:03,000
powerful dev tools magic thing and back

403
00:12:59,460 --> 00:13:04,320
when I was doing this they say hey if

404
00:13:03,000 --> 00:13:05,550
you want to remotely debug Chrome and

405
00:13:04,320 --> 00:13:07,400
you wonder how the protocol works you

406
00:13:05,550 --> 00:13:08,719
can just sniff the protocol I've

407
00:13:07,400 --> 00:13:09,740
that's the best way you can just inspect

408
00:13:08,720 --> 00:13:10,850
what's happening in your real browser

409
00:13:09,740 --> 00:13:12,170
and you can just kind of figure it out

410
00:13:10,850 --> 00:13:14,480
you can just kind of reverse-engineer it

411
00:13:12,170 --> 00:13:16,459
and I was like okay can't you just tell

412
00:13:14,480 --> 00:13:17,810
me all right that's fine and then that

413
00:13:16,460 --> 00:13:19,610
if you want to skip the protocol you

414
00:13:17,810 --> 00:13:22,160
just need to use the chrome dev tools to

415
00:13:19,610 --> 00:13:24,320
debug the chrome dev tools themselves so

416
00:13:22,160 --> 00:13:26,930
I just to be clear they want you to do

417
00:13:24,320 --> 00:13:29,180
this so like you have one dev tools and

418
00:13:26,930 --> 00:13:30,949
that one is debugging the previous one

419
00:13:29,180 --> 00:13:33,589
and they want you to just inspect the

420
00:13:30,950 --> 00:13:35,000
WebSocket thing and the ease with which

421
00:13:33,590 --> 00:13:37,400
they suggest doing this it's very

422
00:13:35,000 --> 00:13:39,290
stressful like later twice they just

423
00:13:37,400 --> 00:13:41,240
want me to just do it and like I'm not

424
00:13:39,290 --> 00:13:42,319
ready to commit to that they really want

425
00:13:41,240 --> 00:13:42,860
me to use dev tools to solve all my

426
00:13:42,320 --> 00:13:46,520
problems

427
00:13:42,860 --> 00:13:50,870
and I I'm not ready emotionally you have

428
00:13:46,520 --> 00:13:53,360
to do that but do you know how to use

429
00:13:50,870 --> 00:13:54,530
curl so that sounds way too complicated

430
00:13:53,360 --> 00:13:56,240
so we're gonna do that we're gonna

431
00:13:54,530 --> 00:13:57,560
remotely debug Chrome using coal and

432
00:13:56,240 --> 00:13:59,480
don't act like that's not absolutely

433
00:13:57,560 --> 00:14:00,739
wild because there are some things

434
00:13:59,480 --> 00:14:02,420
humans are just not meant to do so

435
00:14:00,740 --> 00:14:04,460
here's what I did instead of that insane

436
00:14:02,420 --> 00:14:07,219
dev tools inception spaghetti thing I

437
00:14:04,460 --> 00:14:09,260
just used curl to look at this forward

438
00:14:07,220 --> 00:14:11,060
slash JSON thing and this is not giving

439
00:14:09,260 --> 00:14:12,680
me everything that has a bunch of stuff

440
00:14:11,060 --> 00:14:15,560
I didn't understand at the time it also

441
00:14:12,680 --> 00:14:17,329
has this and say with me the one thing

442
00:14:15,560 --> 00:14:18,979
you've learned is the debugger what is

443
00:14:17,330 --> 00:14:20,630
the good word that you know if you want

444
00:14:18,980 --> 00:14:22,100
to do hacking and so I was like okay

445
00:14:20,630 --> 00:14:24,770
cool I what I do want to do acting let's

446
00:14:22,100 --> 00:14:26,810
learn what this URL does and if you

447
00:14:24,770 --> 00:14:28,490
connect to it WSA the WebSocket client I

448
00:14:26,810 --> 00:14:29,689
had to I just downloaded some like

449
00:14:28,490 --> 00:14:31,790
WebSocket client cuz you need to speak

450
00:14:29,690 --> 00:14:32,900
the WebSocket language and it says cool

451
00:14:31,790 --> 00:14:35,000
connected and gives you a greater than

452
00:14:32,900 --> 00:14:37,449
sign that looks like a shell that looks

453
00:14:35,000 --> 00:14:39,920
great I know that shells are good and

454
00:14:37,450 --> 00:14:42,080
but it's not like a best show you can't

455
00:14:39,920 --> 00:14:43,849
like type ls' into it it's the shell for

456
00:14:42,080 --> 00:14:45,740
this weird remote debugging language

457
00:14:43,850 --> 00:14:46,940
thing but I don't know and so I was like

458
00:14:45,740 --> 00:14:49,070
oh I don't know what to type into this

459
00:14:46,940 --> 00:14:51,320
thing and so I'm gonna save you all the

460
00:14:49,070 --> 00:14:54,380
hard work and furious googling and like

461
00:14:51,320 --> 00:14:55,730
more chrome dev tools chaos and here's

462
00:14:54,380 --> 00:14:58,370
the thing that I eventually found in

463
00:14:55,730 --> 00:14:59,570
some on github in some extremely cursed

464
00:14:58,370 --> 00:15:02,150
Ruby from 2012

465
00:14:59,570 --> 00:15:03,500
I found this is the thing to get the

466
00:15:02,150 --> 00:15:05,120
cookies and like it just says get all

467
00:15:03,500 --> 00:15:06,590
cookies so can't be that easy but it

468
00:15:05,120 --> 00:15:09,590
absolutely can be that easy

469
00:15:06,590 --> 00:15:11,870
and that's it and so chrome will just

470
00:15:09,590 --> 00:15:13,190
spit out all the cookies for the use it

471
00:15:11,870 --> 00:15:14,990
does say get all cookies right there and

472
00:15:13,190 --> 00:15:16,370
so that's all them out and they

473
00:15:14,990 --> 00:15:27,470
unencrypted and they're just there and

474
00:15:16,370 --> 00:15:28,550
that's it that's what looks like thanks

475
00:15:27,470 --> 00:15:29,779
think it's just slides I didn't actually

476
00:15:28,550 --> 00:15:33,050
do it just then it's just it's just a

477
00:15:29,779 --> 00:15:35,089
picture but yeah so that I just explain

478
00:15:33,050 --> 00:15:36,290
like a lot of complicated things and it

479
00:15:35,089 --> 00:15:37,490
was kind of like this story or finding

480
00:15:36,290 --> 00:15:39,890
them so now I'm gonna show you how it

481
00:15:37,490 --> 00:15:41,000
works all in one go so here's the whole

482
00:15:39,890 --> 00:15:42,230
thing and there's a lot of text on the

483
00:15:41,000 --> 00:15:43,580
screen but this is the stuff that we all

484
00:15:42,230 --> 00:15:44,930
just went through so you have to run two

485
00:15:43,580 --> 00:15:46,670
things one is you have to run headless

486
00:15:44,930 --> 00:15:48,140
Chrome and you have to tell it to make

487
00:15:46,670 --> 00:15:49,430
the you can take a picture of this if

488
00:15:48,140 --> 00:15:52,550
you want it's a lot of links afterwards

489
00:15:49,430 --> 00:15:54,800
that go for it so you have to read

490
00:15:52,550 --> 00:15:56,479
headless Chrome and you have to make

491
00:15:54,800 --> 00:15:58,010
sure the other data directory is the

492
00:15:56,480 --> 00:15:59,660
default one for Chrome and then you can

493
00:15:58,010 --> 00:16:01,040
open any page you want I - I opened of a

494
00:15:59,660 --> 00:16:03,529
blank and you have to enable the right

495
00:16:01,040 --> 00:16:04,819
debugging then the remote debugging is

496
00:16:03,529 --> 00:16:06,710
listening so all you have to do is send

497
00:16:04,820 --> 00:16:08,570
the magical ghetto cookies command to

498
00:16:06,710 --> 00:16:10,279
the remote debugging URL and there it is

499
00:16:08,570 --> 00:16:11,900
there's actually a step in between we

500
00:16:10,279 --> 00:16:13,250
have to find out what that URL is but

501
00:16:11,900 --> 00:16:15,949
this slide has enough text on it and I

502
00:16:13,250 --> 00:16:18,500
wanted to be nice to you so there's also

503
00:16:15,950 --> 00:16:19,910
when you do that that's it they just

504
00:16:18,500 --> 00:16:21,800
prints out the cookies and even prints

505
00:16:19,910 --> 00:16:23,750
them out in JSON very nicely for you you

506
00:16:21,800 --> 00:16:25,219
don't have to format them and like but

507
00:16:23,750 --> 00:16:27,440
in the exact correct format to be put

508
00:16:25,220 --> 00:16:29,210
into a like Chrome cookie changing

509
00:16:27,440 --> 00:16:30,350
extension it's like very convenient and

510
00:16:29,210 --> 00:16:32,210
like the values unencrypted and

511
00:16:30,350 --> 00:16:34,970
encrypted it's right there like stuff is

512
00:16:32,210 --> 00:16:36,230
just there so thank you and like when

513
00:16:34,970 --> 00:16:38,450
you put this into your browser you get

514
00:16:36,230 --> 00:16:40,730
the good screen they're already logged

515
00:16:38,450 --> 00:16:41,900
in the screen and so if you put this in

516
00:16:40,730 --> 00:16:43,100
your browser you can just be someone

517
00:16:41,900 --> 00:16:44,390
else so you didn't have to like you

518
00:16:43,100 --> 00:16:45,890
don't know their password you don't know

519
00:16:44,390 --> 00:16:47,030
that your vector auth you might even not

520
00:16:45,890 --> 00:16:49,939
know who they are but you're logged in

521
00:16:47,030 --> 00:16:51,230
as somebody when you do this it's also a

522
00:16:49,940 --> 00:16:54,140
different version of this which somebody

523
00:16:51,230 --> 00:16:55,610
very nicely made on github which is the

524
00:16:54,140 --> 00:16:57,770
same thing but instead of using the

525
00:16:55,610 --> 00:16:59,690
WebSocket client on your machine the

526
00:16:57,770 --> 00:17:01,250
WebSocket communication is done in

527
00:16:59,690 --> 00:17:03,770
javascript in the browser because Chrome

528
00:17:01,250 --> 00:17:05,089
itself is a WebSocket client hmm and so

529
00:17:03,770 --> 00:17:06,889
you just write some JavaScript and you

530
00:17:05,089 --> 00:17:07,849
load an HTML page and so you can use

531
00:17:06,890 --> 00:17:09,589
this one if you don't want to download

532
00:17:07,849 --> 00:17:11,599
WebSocket binary or if you don't have

533
00:17:09,589 --> 00:17:13,159
the ability to speak WebSockets but you

534
00:17:11,599 --> 00:17:14,419
do have to do a disk right and then you

535
00:17:13,160 --> 00:17:16,850
do have to send the cookies to yourself

536
00:17:14,420 --> 00:17:19,069
somehow so it's a trade-off

537
00:17:16,849 --> 00:17:20,928
and I think that eating this I think

538
00:17:19,069 --> 00:17:23,059
this wife getting cookies is a bit good

539
00:17:20,929 --> 00:17:24,259
because it's a lead I have to have great

540
00:17:23,059 --> 00:17:25,668
access you know it's like not

541
00:17:24,259 --> 00:17:26,809
complicated you just have to like you

542
00:17:25,669 --> 00:17:28,309
can just copy and paste it you'd have to

543
00:17:26,809 --> 00:17:29,809
know what you're doing it works on all

544
00:17:28,309 --> 00:17:32,149
my works everywhere chrome works and

545
00:17:29,809 --> 00:17:33,470
like you have to write to disk or

546
00:17:32,149 --> 00:17:35,239
anything like I think I think it's as

547
00:17:33,470 --> 00:17:36,529
good i'm gonna use this i'm and so i

548
00:17:35,240 --> 00:17:38,240
also have made a Metasploit module out

549
00:17:36,529 --> 00:17:41,120
of this so you don't have to do all the

550
00:17:38,240 --> 00:17:42,710
hard work and it's just there and boy

551
00:17:41,120 --> 00:17:44,209
did I learn a lot I did boys that have a

552
00:17:42,710 --> 00:17:46,809
wild time on github talking to the

553
00:17:44,210 --> 00:17:51,080
Metasploit developers but we made it and

554
00:17:46,809 --> 00:17:53,539
so this one this is this is a JavaScript

555
00:17:51,080 --> 00:17:54,918
version so it does do a disk write but

556
00:17:53,539 --> 00:17:55,908
if you don't have to do that version if

557
00:17:54,919 --> 00:17:58,179
you don't want to you can do it manually

558
00:17:55,909 --> 00:18:02,000
and do the non described version and

559
00:17:58,179 --> 00:18:03,259
yeah we get it nice one me and so you

560
00:18:02,000 --> 00:18:05,360
might be wondering when should I you

561
00:18:03,259 --> 00:18:06,799
like no no how do this when should I use

562
00:18:05,360 --> 00:18:09,379
this when should I steal someone's

563
00:18:06,799 --> 00:18:11,750
cookies anytime whenever you have a

564
00:18:09,379 --> 00:18:13,309
computer like when do you not use it

565
00:18:11,750 --> 00:18:14,509
it's like basically free so like

566
00:18:13,309 --> 00:18:16,399
whenever used whenever you have this

567
00:18:14,509 --> 00:18:18,980
just like smash that button then get

568
00:18:16,399 --> 00:18:22,250
those people like I don't I really

569
00:18:18,980 --> 00:18:24,350
understand the question and so another

570
00:18:22,250 --> 00:18:25,940
thing is that you've never even able to

571
00:18:24,350 --> 00:18:27,230
do this ever since headless chrome was

572
00:18:25,940 --> 00:18:29,389
invented which is about a couple years

573
00:18:27,230 --> 00:18:30,440
ago roughly and as far as I know I was

574
00:18:29,389 --> 00:18:32,090
the first person to write about it

575
00:18:30,440 --> 00:18:33,740
publicly and I just like stumbled onto a

576
00:18:32,090 --> 00:18:35,928
midway through an op I was like looking

577
00:18:33,740 --> 00:18:37,580
for it really and like I don't really

578
00:18:35,929 --> 00:18:40,129
know what the implications of this yeah

579
00:18:37,580 --> 00:18:42,350
because like people look for bugs in

580
00:18:40,129 --> 00:18:43,820
chrome all the time and I think that

581
00:18:42,350 --> 00:18:46,039
I've been thinking about this like today

582
00:18:43,820 --> 00:18:48,168
I think that the reason that nobody has

583
00:18:46,039 --> 00:18:49,340
talked about this before now is first oh

584
00:18:48,169 --> 00:18:52,009
this is not a bug it's a feature of

585
00:18:49,340 --> 00:18:53,480
crime and there's no bug bounty for this

586
00:18:52,009 --> 00:18:55,129
there's no people who are just doing

587
00:18:53,480 --> 00:18:56,330
this for like bug bounty money they

588
00:18:55,129 --> 00:18:57,529
don't care they probably know about this

589
00:18:56,330 --> 00:19:00,980
and they're like whatever that's not

590
00:18:57,529 --> 00:19:02,990
about grantee whatever and so maybe

591
00:19:00,980 --> 00:19:04,309
that's why or but I don't know or maybe

592
00:19:02,990 --> 00:19:05,600
like people don't care about feeling

593
00:19:04,309 --> 00:19:06,799
cookies maybe no one's doing that or

594
00:19:05,600 --> 00:19:08,449
maybe they just all have root access and

595
00:19:06,799 --> 00:19:11,168
Oh need to do this way but even then

596
00:19:08,450 --> 00:19:13,009
this Way's way simpler so I don't know I

597
00:19:11,169 --> 00:19:16,279
still don't know the answers to that oh

598
00:19:13,009 --> 00:19:17,899
well sorry how can you might be

599
00:19:16,279 --> 00:19:19,039
wondering how to not have this happen to

600
00:19:17,899 --> 00:19:21,199
you like what if you don't want someone

601
00:19:19,039 --> 00:19:23,899
to do this to you well in the words of

602
00:19:21,200 --> 00:19:27,010
Neil deGrasse Tyson solution there seems

603
00:19:23,899 --> 00:19:29,090
to me is to create unhackable systems

604
00:19:27,010 --> 00:19:30,440
so if you don't want this being used

605
00:19:29,090 --> 00:19:32,030
against you I can wholeheartedly

606
00:19:30,440 --> 00:19:34,550
recommend not letting someone else

607
00:19:32,030 --> 00:19:36,350
execute code on your computer and the

608
00:19:34,550 --> 00:19:38,360
industry-standard best practice needs to

609
00:19:36,350 --> 00:19:41,209
rapidly acquire blessed amulets or like

610
00:19:38,360 --> 00:19:42,860
mysterious crystals or like hey as you

611
00:19:41,210 --> 00:19:44,510
go record hearing schemes to prevent

612
00:19:42,860 --> 00:19:46,159
people executing that code on your

613
00:19:44,510 --> 00:19:49,400
computer I don't really know what to say

614
00:19:46,160 --> 00:19:51,290
at this point there's also this other

615
00:19:49,400 --> 00:19:52,970
thing which is kind of real cold like

616
00:19:51,290 --> 00:19:54,649
channel boundaries which is like public

617
00:19:52,970 --> 00:19:56,090
key cryptography bit for cookies so like

618
00:19:54,650 --> 00:19:57,980
you sign the cookie as yourself thing

619
00:19:56,090 --> 00:19:59,810
you like tie your identity to it and

620
00:19:57,980 --> 00:20:01,070
that identity lives on your device so if

621
00:19:59,810 --> 00:20:02,750
you move the cookie it's wrong it's the

622
00:20:01,070 --> 00:20:04,129
right entity but there are many problems

623
00:20:02,750 --> 00:20:06,080
with this for example for example you

624
00:20:04,130 --> 00:20:09,860
could just steal the signing key as well

625
00:20:06,080 --> 00:20:11,149
and also this is not in browsers very

626
00:20:09,860 --> 00:20:12,740
much like it's in Google Chrome right

627
00:20:11,150 --> 00:20:14,180
now but it's currently disabled and

628
00:20:12,740 --> 00:20:15,590
according to a very heated Google

629
00:20:14,180 --> 00:20:18,590
discussion I read it's being removed I

630
00:20:15,590 --> 00:20:19,909
think and the features in edge right now

631
00:20:18,590 --> 00:20:23,449
which is what Internet Explorer is

632
00:20:19,910 --> 00:20:25,610
called post identity crisis and but even

633
00:20:23,450 --> 00:20:27,260
if chrome used this like even if even if

634
00:20:25,610 --> 00:20:28,310
your browser had this it's up to the

635
00:20:27,260 --> 00:20:30,170
website that you're talking to to

636
00:20:28,310 --> 00:20:31,460
implement it as well so I can use the

637
00:20:30,170 --> 00:20:32,450
browser and the website need to both

638
00:20:31,460 --> 00:20:35,000
decide they're doing these special

639
00:20:32,450 --> 00:20:36,230
cookies and people are reluctant to use

640
00:20:35,000 --> 00:20:37,610
it because of the privacy implications

641
00:20:36,230 --> 00:20:39,320
because now they're like really

642
00:20:37,610 --> 00:20:40,429
explicitly tracking what device you're

643
00:20:39,320 --> 00:20:42,800
on because they have a way to do that

644
00:20:40,430 --> 00:20:44,440
and so basically you couldn't solve a

645
00:20:42,800 --> 00:20:46,310
problem but people don't really want to

646
00:20:44,440 --> 00:20:47,870
also it's technically within the throat

647
00:20:46,310 --> 00:20:49,909
model like you all I just do your own

648
00:20:47,870 --> 00:20:52,939
cookies so fair enough in terms of

649
00:20:49,910 --> 00:20:54,260
detection I don't really know like you

650
00:20:52,940 --> 00:20:56,300
can in theory you can detect cookies

651
00:20:54,260 --> 00:20:58,190
being stolen right cuz scoop like the

652
00:20:56,300 --> 00:20:59,450
the website let's say Google they know

653
00:20:58,190 --> 00:21:01,160
that they gave the cookie to a certain

654
00:20:59,450 --> 00:21:03,380
like browser operating system IP address

655
00:21:01,160 --> 00:21:04,670
or some other finger print and so they

656
00:21:03,380 --> 00:21:06,680
can detect if it move somewhere else

657
00:21:04,670 --> 00:21:08,120
in fact some websites like Gmail and

658
00:21:06,680 --> 00:21:09,590
sometimes Twitter like sometimes a

659
00:21:08,120 --> 00:21:10,850
website will like log your app if you

660
00:21:09,590 --> 00:21:12,649
move the cookie to a new device if it

661
00:21:10,850 --> 00:21:14,750
thinks that you're in a new device and I

662
00:21:12,650 --> 00:21:16,940
asked someone who like like you know

663
00:21:14,750 --> 00:21:18,440
might know about this kind of thing and

664
00:21:16,940 --> 00:21:19,880
how it works and they said machine

665
00:21:18,440 --> 00:21:20,930
learning which is the kind of thing that

666
00:21:19,880 --> 00:21:23,230
you would say if you just wanted me to

667
00:21:20,930 --> 00:21:26,540
stop talking to you about that

668
00:21:23,230 --> 00:21:27,680
say fair enough but you do have a show

669
00:21:26,540 --> 00:21:29,690
on the target you do have a show on

670
00:21:27,680 --> 00:21:30,980
targets machine right so you can make

671
00:21:29,690 --> 00:21:32,060
them perfectly because you could like

672
00:21:30,980 --> 00:21:33,500
proxy through their machine you could

673
00:21:32,060 --> 00:21:35,210
use the actual browser user agent like

674
00:21:33,500 --> 00:21:37,390
you could like use the actual browser

675
00:21:35,210 --> 00:21:39,320
and so there are ways to get around it I

676
00:21:37,390 --> 00:21:43,250
think I haven't actually tried it I hope

677
00:21:39,320 --> 00:21:45,110
so so also just in case I told Google

678
00:21:43,250 --> 00:21:47,330
about this like I'm pretty sure it's not

679
00:21:45,110 --> 00:21:49,280
a bug but just to be safe I told them

680
00:21:47,330 --> 00:21:51,020
hey this is this is working please tell

681
00:21:49,280 --> 00:21:52,639
me that it's all okay and they're like

682
00:21:51,020 --> 00:21:54,470
yep it's fine this is meant to happen

683
00:21:52,640 --> 00:21:56,210
it's meant to do this I'm surprised that

684
00:21:54,470 --> 00:21:58,460
you can change the user data directory

685
00:21:56,210 --> 00:21:59,570
and read cookies like I'm surprised that

686
00:21:58,460 --> 00:22:01,310
you can read the real crime cookies from

687
00:21:59,570 --> 00:22:04,669
headless chrome but you know that's

688
00:22:01,310 --> 00:22:06,980
probably fine and so ok that's fine

689
00:22:04,670 --> 00:22:08,150
what did I learn from doing this it's a

690
00:22:06,980 --> 00:22:09,320
sort of like my first time doing this

691
00:22:08,150 --> 00:22:10,520
kind of thing so I learned that

692
00:22:09,320 --> 00:22:12,260
sometimes hacking is just like

693
00:22:10,520 --> 00:22:15,320
aggressively try hiding like I didn't

694
00:22:12,260 --> 00:22:16,550
know what to do it's like maybe this

695
00:22:15,320 --> 00:22:17,629
will work and maybe this will work and

696
00:22:16,550 --> 00:22:19,669
there's lots of things that didn't work

697
00:22:17,630 --> 00:22:21,320
also I thoughts of me just googling

698
00:22:19,670 --> 00:22:22,730
things and like googling things for like

699
00:22:21,320 --> 00:22:25,070
half an hour and then realizing that I'm

700
00:22:22,730 --> 00:22:27,400
like just totally researching the wrong

701
00:22:25,070 --> 00:22:29,570
thing completely and being like ok and

702
00:22:27,400 --> 00:22:31,040
it's also really helpful to have like

703
00:22:29,570 --> 00:22:33,230
that community or other people talk to

704
00:22:31,040 --> 00:22:35,000
you about this kind of thing because the

705
00:22:33,230 --> 00:22:36,530
whole like all the like offensive

706
00:22:35,000 --> 00:22:38,360
security or hacking and stuff is like

707
00:22:36,530 --> 00:22:40,639
kind of forbidden and undocumented and

708
00:22:38,360 --> 00:22:41,750
so like the community is like your

709
00:22:40,640 --> 00:22:43,280
friends saying hey you should check our

710
00:22:41,750 --> 00:22:45,710
property or that kind of thing it's so

711
00:22:43,280 --> 00:22:47,600
the next best thing we have oh and also

712
00:22:45,710 --> 00:22:49,160
the trade-off between having features

713
00:22:47,600 --> 00:22:50,810
and having attack surface stuff to be

714
00:22:49,160 --> 00:22:51,350
hacked is so real and that's why this is

715
00:22:50,810 --> 00:22:52,940
here right

716
00:22:51,350 --> 00:22:54,709
like this is not in Chrome by accident

717
00:22:52,940 --> 00:22:55,970
people love using Chrome remote

718
00:22:54,710 --> 00:22:57,770
debugging to like automate all their

719
00:22:55,970 --> 00:23:00,530
chrome testing and stuff but I also love

720
00:22:57,770 --> 00:23:01,600
using it to do these crimes so everybody

721
00:23:00,530 --> 00:23:04,720
wins

722
00:23:01,600 --> 00:23:08,179
time for the strong finish that was

723
00:23:04,720 --> 00:23:11,860
maybe I know I give up whatever I don't

724
00:23:08,180 --> 00:23:11,860
go one the end thanks everybody

725
00:23:16,459 --> 00:23:24,799
and anyone got any questions this story

726
00:23:22,259 --> 00:23:24,799
is for other

727
00:23:26,190 --> 00:23:29,610
the question was do I know what the

728
00:23:27,990 --> 00:23:31,530
story is for other browsers if I were

729
00:23:29,610 --> 00:23:34,500
doing the same thing I've talked with my

730
00:23:31,530 --> 00:23:36,570
head no I do I mean I don't know how

731
00:23:34,500 --> 00:23:37,710
Firefox does their cookies I don't know

732
00:23:36,570 --> 00:23:39,570
if they even encrypt it at all no I

733
00:23:37,710 --> 00:23:41,430
don't know the answer to that I guess

734
00:23:39,570 --> 00:23:42,720
anything that it's chromium is the same

735
00:23:41,430 --> 00:23:43,800
as chrome so like browsers that are like

736
00:23:42,720 --> 00:23:53,880
based on Chrome will have the same thing

737
00:23:43,800 --> 00:23:55,200
I think so that I really did just like

738
00:23:53,880 --> 00:24:00,630
Google this furiously every few hours

739
00:23:55,200 --> 00:24:02,040
I'm not an expert on this did I end up

740
00:24:00,630 --> 00:24:08,190
using the cookies in my actual thing any

741
00:24:02,040 --> 00:24:09,389
other questions another round of

742
00:24:08,190 --> 00:24:13,449
applause for Alex thanks

743
00:24:09,390 --> 00:24:13,449
[Applause]

744
00:24:18,330 --> 00:24:20,389
you

