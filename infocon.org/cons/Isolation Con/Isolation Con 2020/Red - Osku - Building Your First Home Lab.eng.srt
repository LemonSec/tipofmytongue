1
00:00:12,250 --> 00:00:15,339
[Music]

2
00:00:25,359 --> 00:00:25,920
all right

3
00:00:25,920 --> 00:00:29,039
hey and welcome to red team the best

4
00:00:29,039 --> 00:00:30,160
team and i

5
00:00:30,160 --> 00:00:33,200
am here with oscar that is

6
00:00:33,200 --> 00:00:37,040
oh to osq

7
00:00:37,040 --> 00:00:40,000
on twitter he will be taking your

8
00:00:40,000 --> 00:00:40,800
questions

9
00:00:40,800 --> 00:00:44,079
via twitter dm he is the chief security

10
00:00:44,079 --> 00:00:47,360
engineer at sonoma media in

11
00:00:47,360 --> 00:00:50,399
finland founder of helsick

12
00:00:50,399 --> 00:00:53,120
which i would imagine would be for short

13
00:00:53,120 --> 00:00:54,719
for helsinki security

14
00:00:54,719 --> 00:00:57,120
and builder of homelands who spends most

15
00:00:57,120 --> 00:00:58,000
of his time hacking

16
00:00:58,000 --> 00:01:01,039
and building stuff welcome oscu to

17
00:01:01,039 --> 00:01:04,159
isolation con thank you

18
00:01:04,159 --> 00:01:06,240
i'm excited to be the first speaker

19
00:01:06,240 --> 00:01:08,080
because then the unbearable stress of

20
00:01:08,080 --> 00:01:09,840
doing a presentation online is sooner

21
00:01:09,840 --> 00:01:10,799
over

22
00:01:10,799 --> 00:01:13,920
and i can have a cold one and follow the

23
00:01:13,920 --> 00:01:14,880
next talks

24
00:01:14,880 --> 00:01:18,159
um so uh

25
00:01:18,159 --> 00:01:20,000
my name is oscar i work with sonoma

26
00:01:20,000 --> 00:01:21,920
media finland which is a large

27
00:01:21,920 --> 00:01:23,759
finnish company running the oldest

28
00:01:23,759 --> 00:01:26,400
newspaper i think in finland

29
00:01:26,400 --> 00:01:28,960
and just a quick update on the situation

30
00:01:28,960 --> 00:01:30,240
with corona in finland

31
00:01:30,240 --> 00:01:33,200
i'm not the corona authority but anyway

32
00:01:33,200 --> 00:01:35,280
we have been working remotely for about

33
00:01:35,280 --> 00:01:40,159
five weeks um situation isn't really too

34
00:01:40,159 --> 00:01:41,040
bad at the moment

35
00:01:41,040 --> 00:01:44,320
people are distancing themselves fairly

36
00:01:44,320 --> 00:01:44,720
well

37
00:01:44,720 --> 00:01:48,079
and the weather's been getting warmer

38
00:01:48,079 --> 00:01:49,520
and nicer and today

39
00:01:49,520 --> 00:01:51,200
it was a very sunny day or actually

40
00:01:51,200 --> 00:01:53,439
still this i went to

41
00:01:53,439 --> 00:01:55,600
my favorite archery field outside of

42
00:01:55,600 --> 00:01:58,079
town with like 15 kilometers bright on

43
00:01:58,079 --> 00:01:59,439
my e-bike

44
00:01:59,439 --> 00:02:01,840
so when i'm attacking things i'm you

45
00:02:01,840 --> 00:02:03,680
know riding my bike around and shooting

46
00:02:03,680 --> 00:02:06,240
things with a long bow

47
00:02:06,240 --> 00:02:10,318
and um so about me so i used to be

48
00:02:10,318 --> 00:02:12,800
a software developer for about 20 years

49
00:02:12,800 --> 00:02:15,840
in various roles in different companies

50
00:02:15,840 --> 00:02:18,959
and i very recently switched careers

51
00:02:18,959 --> 00:02:19,680
into doing

52
00:02:19,680 --> 00:02:22,879
security so currently i'm chief security

53
00:02:22,879 --> 00:02:26,480
engineer with cinema media finland

54
00:02:26,560 --> 00:02:29,200
so it's like two years ago i decided i

55
00:02:29,200 --> 00:02:30,640
want to do something else and develop

56
00:02:30,640 --> 00:02:33,200
software so i started studying basically

57
00:02:33,200 --> 00:02:35,440
offensive techniques first

58
00:02:35,440 --> 00:02:37,920
i did some hack the box and did my ocp

59
00:02:37,920 --> 00:02:40,720
course a bit over a year ago

60
00:02:40,720 --> 00:02:43,920
and now i work as a chief security

61
00:02:43,920 --> 00:02:45,840
engineer

62
00:02:45,840 --> 00:02:48,160
with a number of fun tasks including

63
00:02:48,160 --> 00:02:48,879
like

64
00:02:48,879 --> 00:02:50,400
making sure application security

65
00:02:50,400 --> 00:02:53,040
actually happens and helping

66
00:02:53,040 --> 00:02:55,440
the real like security team around in

67
00:02:55,440 --> 00:02:56,480
the company

68
00:02:56,480 --> 00:02:58,800
and i'm trying to maintain a fairly

69
00:02:58,800 --> 00:03:00,800
active process in the local communities

70
00:03:00,800 --> 00:03:03,920
i co-founded helsick which is a local

71
00:03:03,920 --> 00:03:04,560
infosec

72
00:03:04,560 --> 00:03:06,640
bunch of people in helsinki region and

73
00:03:06,640 --> 00:03:08,959
i'm a member of a couple other

74
00:03:08,959 --> 00:03:12,640
citizen groups as we call them and

75
00:03:12,640 --> 00:03:15,599
i'm developer of the automated subnet

76
00:03:15,599 --> 00:03:16,239
scanner

77
00:03:16,239 --> 00:03:19,920
a brief as gun and

78
00:03:19,920 --> 00:03:21,840
well that's it you can follow me on

79
00:03:21,840 --> 00:03:24,000
twitter if you want and

80
00:03:24,000 --> 00:03:26,480
i'm also this is present at the many

81
00:03:26,480 --> 00:03:29,280
hats club discord so if you have

82
00:03:29,280 --> 00:03:31,440
further questions about my talk or about

83
00:03:31,440 --> 00:03:32,640
anything else you can

84
00:03:32,640 --> 00:03:36,799
find me there so um the agenda for this

85
00:03:36,799 --> 00:03:38,080
presentation is that

86
00:03:38,080 --> 00:03:41,040
i'll briefly describe the basic setup of

87
00:03:41,040 --> 00:03:42,400
my hoblab

88
00:03:42,400 --> 00:03:44,879
and then i'm going to just present a

89
00:03:44,879 --> 00:03:46,560
couple cool things

90
00:03:46,560 --> 00:03:49,840
i built with a lab and the reason i'm

91
00:03:49,840 --> 00:03:51,840
doing this presentation at all is that

92
00:03:51,840 --> 00:03:53,760
because people are spending a lot of

93
00:03:53,760 --> 00:03:55,040
time in isolation and

94
00:03:55,040 --> 00:04:00,720
they hopefully have time and energy to

95
00:04:00,720 --> 00:04:02,640
learn something new maybe or pick up

96
00:04:02,640 --> 00:04:03,920
some new skills

97
00:04:03,920 --> 00:04:05,439
i hope this presentation will be an

98
00:04:05,439 --> 00:04:07,439
inspiration of

99
00:04:07,439 --> 00:04:09,040
what are some of those skills that could

100
00:04:09,040 --> 00:04:10,799
be useful

101
00:04:10,799 --> 00:04:13,840
and i tried to add to a couple slides uh

102
00:04:13,840 --> 00:04:15,840
some keywords in them which means that

103
00:04:15,840 --> 00:04:17,358
if you take those keywords and google

104
00:04:17,358 --> 00:04:19,839
them or doctor code them or whatever

105
00:04:19,839 --> 00:04:22,400
you will find more information so my

106
00:04:22,400 --> 00:04:23,520
homework build is

107
00:04:23,520 --> 00:04:25,759
basically just that i've been googling

108
00:04:25,759 --> 00:04:27,919
stuff and following instructions and

109
00:04:27,919 --> 00:04:29,360
ended up with something that

110
00:04:29,360 --> 00:04:34,479
works for some things i want to do

111
00:04:34,479 --> 00:04:36,880
and i'm not exactly home up authority

112
00:04:36,880 --> 00:04:38,479
but i'm this

113
00:04:38,479 --> 00:04:40,560
divine home lab as a collection of

114
00:04:40,560 --> 00:04:42,400
things at your home that

115
00:04:42,400 --> 00:04:46,000
you can do stuff with and basically

116
00:04:46,000 --> 00:04:48,160
there's network that supports

117
00:04:48,160 --> 00:04:50,560
computers or servers doing their things

118
00:04:50,560 --> 00:04:52,639
in those networks

119
00:04:52,639 --> 00:04:55,280
and what do you need a home lab for you

120
00:04:55,280 --> 00:04:56,400
needed to

121
00:04:56,400 --> 00:04:59,360
well study things and practice setting

122
00:04:59,360 --> 00:04:59,919
up things

123
00:04:59,919 --> 00:05:02,400
you wouldn't be able to do without an

124
00:05:02,400 --> 00:05:03,919
environment

125
00:05:03,919 --> 00:05:06,000
so you could build your own active

126
00:05:06,000 --> 00:05:08,320
directory environment or

127
00:05:08,320 --> 00:05:10,400
practice creating your own public

128
00:05:10,400 --> 00:05:11,360
infrastructure

129
00:05:11,360 --> 00:05:14,400
or just try different os in some virtual

130
00:05:14,400 --> 00:05:16,000
machines

131
00:05:16,000 --> 00:05:18,080
or run some stuff you download from

132
00:05:18,080 --> 00:05:19,199
boomhub

133
00:05:19,199 --> 00:05:22,840
so it's basically destinate in doing

134
00:05:22,840 --> 00:05:24,560
self-study

135
00:05:24,560 --> 00:05:25,840
you don't actually need too much

136
00:05:25,840 --> 00:05:27,759
hardware to build your own home lab

137
00:05:27,759 --> 00:05:29,840
basically you can get a minimal setup

138
00:05:29,840 --> 00:05:31,759
with only like one extra pc electric

139
00:05:31,759 --> 00:05:33,520
will do just fine

140
00:05:33,520 --> 00:05:35,520
and if you have more computers you need

141
00:05:35,520 --> 00:05:37,360
a network so that they can talk to each

142
00:05:37,360 --> 00:05:38,800
other

143
00:05:38,800 --> 00:05:43,039
and even your modem is a switch already

144
00:05:43,039 --> 00:05:44,240
so

145
00:05:44,240 --> 00:05:46,479
just get one extra or dedicate one extra

146
00:05:46,479 --> 00:05:48,400
laptop and you can start building a home

147
00:05:48,400 --> 00:05:50,160
lab

148
00:05:50,160 --> 00:05:53,199
and for more ambitious setups you

149
00:05:53,199 --> 00:05:55,120
want to have something more than just

150
00:05:55,120 --> 00:05:56,319
like one laptop

151
00:05:56,319 --> 00:05:57,759
if you have all desktops lying around

152
00:05:57,759 --> 00:05:59,440
they are really good because they are

153
00:05:59,440 --> 00:06:01,360
fairly easy to upgrade from memory and

154
00:06:01,360 --> 00:06:02,479
disk

155
00:06:02,479 --> 00:06:05,680
or easier than a laptop

156
00:06:05,680 --> 00:06:08,720
and i'm running a separate router on a

157
00:06:08,720 --> 00:06:11,199
dedicated hardware pc

158
00:06:11,199 --> 00:06:14,400
and any pc is is good for that

159
00:06:14,400 --> 00:06:18,080
um any potato can do like the router

160
00:06:18,080 --> 00:06:20,720
doesn't need that much our computing

161
00:06:20,720 --> 00:06:21,520
power

162
00:06:21,520 --> 00:06:24,720
and as i'm mostly talking about how how

163
00:06:24,720 --> 00:06:26,720
i built my environment

164
00:06:26,720 --> 00:06:28,880
so i just like mentally set these

165
00:06:28,880 --> 00:06:31,280
requirements to my own environment so

166
00:06:31,280 --> 00:06:33,199
i still want to do like normal things

167
00:06:33,199 --> 00:06:35,199
with computers like do gaming and

168
00:06:35,199 --> 00:06:36,960
browse the internet and do some rewards

169
00:06:36,960 --> 00:06:38,479
work

170
00:06:38,479 --> 00:06:40,639
and then i want to have a lot of

171
00:06:40,639 --> 00:06:42,240
different networks so i can do

172
00:06:42,240 --> 00:06:43,680
different things in different networks

173
00:06:43,680 --> 00:06:45,919
so one of the networks

174
00:06:45,919 --> 00:06:47,759
run a full active directory environment

175
00:06:47,759 --> 00:06:49,280
with a couple windows servers

176
00:06:49,280 --> 00:06:51,919
virtual of course and windows

177
00:06:51,919 --> 00:06:52,880
workstations

178
00:06:52,880 --> 00:06:56,080
and some other networks for iot devices

179
00:06:56,080 --> 00:06:59,199
i want more that i can run vulnerable

180
00:06:59,199 --> 00:07:02,319
computers in so that i can firewall that

181
00:07:02,319 --> 00:07:04,880
network from the other ones

182
00:07:04,880 --> 00:07:07,759
and then for some lightweight osint

183
00:07:07,759 --> 00:07:08,800
stuff that i do

184
00:07:08,800 --> 00:07:12,000
i set up a

185
00:07:12,319 --> 00:07:14,720
network for that that routes absolutely

186
00:07:14,720 --> 00:07:16,319
all traffic to a vpn

187
00:07:16,319 --> 00:07:19,599
so that i can for example connect um

188
00:07:19,599 --> 00:07:21,759
a cheap android phone both with cache

189
00:07:21,759 --> 00:07:22,880
with a prepaid

190
00:07:22,880 --> 00:07:26,400
through that vpn so that it never

191
00:07:26,400 --> 00:07:30,800
appears to come from my home network

192
00:07:30,800 --> 00:07:33,840
and uh with the virtual server platforms

193
00:07:33,840 --> 00:07:35,759
i want to be able to easily create and

194
00:07:35,759 --> 00:07:36,639
run

195
00:07:36,639 --> 00:07:40,400
lots of virtual machines and as an added

196
00:07:40,400 --> 00:07:41,199
bonus

197
00:07:41,199 --> 00:07:42,800
one of the boxes running my virtual

198
00:07:42,800 --> 00:07:45,759
environment is a really small

199
00:07:45,759 --> 00:07:47,599
computer that fits in a bag fairly

200
00:07:47,599 --> 00:07:49,599
easily and when i need my home lab

201
00:07:49,599 --> 00:07:50,160
elsewhere

202
00:07:50,160 --> 00:07:52,240
then at home i can just take one that

203
00:07:52,240 --> 00:07:54,160
needs to go

204
00:07:54,160 --> 00:07:57,759
um then a few words about the home up

205
00:07:57,759 --> 00:07:59,680
network

206
00:07:59,680 --> 00:08:02,000
this is the graphical representation of

207
00:08:02,000 --> 00:08:04,319
my home network

208
00:08:04,319 --> 00:08:07,280
i made a picture myself which explains

209
00:08:07,280 --> 00:08:09,560
why it's so ugly

210
00:08:09,560 --> 00:08:10,840
[Music]

211
00:08:10,840 --> 00:08:12,960
um

212
00:08:12,960 --> 00:08:15,840
so um

213
00:08:16,000 --> 00:08:18,000
basically this just shows what i just

214
00:08:18,000 --> 00:08:20,240
told so i'm actually not going to

215
00:08:20,240 --> 00:08:22,000
go into this picture because i can't

216
00:08:22,000 --> 00:08:23,440
point fingers

217
00:08:23,440 --> 00:08:26,479
to that image um

218
00:08:26,479 --> 00:08:29,440
so what does a router do so your

219
00:08:29,440 --> 00:08:30,479
homelands

220
00:08:30,479 --> 00:08:33,200
or the networks in your home lab they

221
00:08:33,200 --> 00:08:35,279
have private ip addresses in them

222
00:08:35,279 --> 00:08:38,159
and the router takes care of routing

223
00:08:38,159 --> 00:08:39,120
traffic from those

224
00:08:39,120 --> 00:08:41,839
private networks to the public internet

225
00:08:41,839 --> 00:08:43,440
and back

226
00:08:43,440 --> 00:08:47,200
and you need a router software to run on

227
00:08:47,200 --> 00:08:48,560
pc to do that

228
00:08:48,560 --> 00:08:52,959
and i suggest you just go and google

229
00:08:52,959 --> 00:08:54,720
tutorials on how to sell out your own

230
00:08:54,720 --> 00:08:56,320
routers

231
00:08:56,320 --> 00:09:00,560
um so but the one thing is that i want

232
00:09:00,560 --> 00:09:01,200
to run

233
00:09:01,200 --> 00:09:03,839
different networks in my home lab but

234
00:09:03,839 --> 00:09:04,800
only have like

235
00:09:04,800 --> 00:09:07,360
a small amount of network cables and

236
00:09:07,360 --> 00:09:08,560
switches

237
00:09:08,560 --> 00:09:10,640
so how do i go about creating multiple

238
00:09:10,640 --> 00:09:11,600
networks

239
00:09:11,600 --> 00:09:14,959
with one single shared set of hardware

240
00:09:14,959 --> 00:09:18,080
and the answer to that question is

241
00:09:18,080 --> 00:09:21,519
using vlans and vln is

242
00:09:21,519 --> 00:09:25,600
an extension to the ethernet layer

243
00:09:25,600 --> 00:09:27,920
and here's a short summary of how the

244
00:09:27,920 --> 00:09:30,240
tcp ip stack looks like

245
00:09:30,240 --> 00:09:32,160
so on the very low level we have

246
00:09:32,160 --> 00:09:33,600
electricity or

247
00:09:33,600 --> 00:09:37,120
light or radiation running on

248
00:09:37,120 --> 00:09:40,240
cables or fibers or whatever

249
00:09:40,240 --> 00:09:41,760
and on the high level we have

250
00:09:41,760 --> 00:09:44,080
applications and actually humans using

251
00:09:44,080 --> 00:09:47,920
those applications and vln happens on

252
00:09:47,920 --> 00:09:48,320
the

253
00:09:48,320 --> 00:09:51,600
almost bottom most layer in the tcp

254
00:09:51,600 --> 00:09:52,560
stack

255
00:09:52,560 --> 00:09:54,320
so it kind of abstracts the ethernet

256
00:09:54,320 --> 00:09:57,120
layer so that they can be

257
00:09:57,120 --> 00:09:59,440
more kind of virtual networks running on

258
00:09:59,440 --> 00:10:02,160
the same cables and switches

259
00:10:02,160 --> 00:10:06,240
and um so the ethernet

260
00:10:06,240 --> 00:10:09,600
frame is just a um array of bytes

261
00:10:09,600 --> 00:10:11,600
that contain some metadata about where

262
00:10:11,600 --> 00:10:12,800
those bytes are going

263
00:10:12,800 --> 00:10:15,360
to and from and the vlan is just an

264
00:10:15,360 --> 00:10:16,480
extension to that

265
00:10:16,480 --> 00:10:19,760
so that's um vlan ethernet frame

266
00:10:19,760 --> 00:10:22,560
has a number that tells which virtual

267
00:10:22,560 --> 00:10:23,040
lan

268
00:10:23,040 --> 00:10:26,240
the frame belongs to and

269
00:10:26,240 --> 00:10:28,800
here are just some screenshots of my

270
00:10:28,800 --> 00:10:30,000
cheap ethernet switch

271
00:10:30,000 --> 00:10:32,399
that supports vlans so there's a gui

272
00:10:32,399 --> 00:10:34,079
that i can create those virtual lens

273
00:10:34,079 --> 00:10:36,320
with

274
00:10:36,320 --> 00:10:38,320
and i can define different parts and

275
00:10:38,320 --> 00:10:39,839
ports in those switches

276
00:10:39,839 --> 00:10:43,120
to allow or just low traffic to a

277
00:10:43,120 --> 00:10:46,000
certain vlans

278
00:10:46,000 --> 00:10:49,839
and um as a router i'm using

279
00:10:49,839 --> 00:10:52,240
software called pfsense it's an

280
00:10:52,240 --> 00:10:53,360
operating system

281
00:10:53,360 --> 00:10:56,320
that's built on top of freebsd or for

282
00:10:56,320 --> 00:10:58,480
config previously whatever

283
00:10:58,480 --> 00:11:01,279
but basically it's just an os like any

284
00:11:01,279 --> 00:11:02,160
other

285
00:11:02,160 --> 00:11:05,040
like linux is so you get a usb stick or

286
00:11:05,040 --> 00:11:05,680
you can

287
00:11:05,680 --> 00:11:07,680
write the installer to a usb stick and

288
00:11:07,680 --> 00:11:09,360
stick it to your pc

289
00:11:09,360 --> 00:11:12,480
and install and a short while later you

290
00:11:12,480 --> 00:11:14,160
have a router

291
00:11:14,160 --> 00:11:16,800
and you can also configure those vlans

292
00:11:16,800 --> 00:11:19,440
in pf sense

293
00:11:19,440 --> 00:11:22,880
um and define firewalls between those

294
00:11:22,880 --> 00:11:25,680
different vlans

295
00:11:26,839 --> 00:11:29,440
um but if you only are

296
00:11:29,440 --> 00:11:33,680
interested in creating virtual networks

297
00:11:33,680 --> 00:11:36,240
for your virtual machines and you only

298
00:11:36,240 --> 00:11:37,760
have one server running on virtual

299
00:11:37,760 --> 00:11:39,600
machines you don't actually need

300
00:11:39,600 --> 00:11:43,650
a switch that supports the vlans

301
00:11:43,650 --> 00:11:45,040
[Music]

302
00:11:45,040 --> 00:11:48,480
then to run the virtual servers um

303
00:11:48,480 --> 00:11:51,519
there are multiple choices so

304
00:11:51,519 --> 00:11:54,720
you can just install virtualbox on your

305
00:11:54,720 --> 00:11:58,639
main computer laptop whatever so

306
00:11:58,639 --> 00:12:01,920
um i guess most people already have

307
00:12:01,920 --> 00:12:03,760
experience in those

308
00:12:03,760 --> 00:12:06,720
so it's a piece of software that runs on

309
00:12:06,720 --> 00:12:07,279
your

310
00:12:07,279 --> 00:12:09,200
desktop or laptop and you can create

311
00:12:09,200 --> 00:12:10,800
virtual machines

312
00:12:10,800 --> 00:12:14,000
virtual machines and run multiple

313
00:12:14,000 --> 00:12:17,519
like many of those on a single computer

314
00:12:17,519 --> 00:12:20,800
but it's not usually feasible to create

315
00:12:20,800 --> 00:12:22,880
any more complex environments using

316
00:12:22,880 --> 00:12:26,000
virtualbox because for one you need a

317
00:12:26,000 --> 00:12:29,279
fairly powerful machines to run

318
00:12:29,279 --> 00:12:31,440
multiple virtual machines on and it

319
00:12:31,440 --> 00:12:34,320
doesn't scale well

320
00:12:34,800 --> 00:12:38,079
for example once i was doing a workshop

321
00:12:38,079 --> 00:12:40,079
teaching people some very basic

322
00:12:40,079 --> 00:12:41,360
penetration skills

323
00:12:41,360 --> 00:12:45,120
and i had the great idea of running

324
00:12:45,120 --> 00:12:47,120
a couple of those target machines on my

325
00:12:47,120 --> 00:12:49,120
laptop and

326
00:12:49,120 --> 00:12:51,680
then i run a router on the laptop and i

327
00:12:51,680 --> 00:12:53,279
bridget those

328
00:12:53,279 --> 00:12:55,360
virtual machines to a wireless access

329
00:12:55,360 --> 00:12:56,959
point

330
00:12:56,959 --> 00:12:59,519
and it wouldn't just work because the

331
00:12:59,519 --> 00:13:01,279
virtualbox kernel drivers

332
00:13:01,279 --> 00:13:03,519
couldn't handle a couple tens of people

333
00:13:03,519 --> 00:13:04,800
trying to

334
00:13:04,800 --> 00:13:06,800
own for virtual machines running on a

335
00:13:06,800 --> 00:13:08,720
simple laptop

336
00:13:08,720 --> 00:13:11,519
so virtualbox is great to get started

337
00:13:11,519 --> 00:13:11,920
with

338
00:13:11,920 --> 00:13:13,680
like how virtual machines work in

339
00:13:13,680 --> 00:13:15,600
general but you can't really build

340
00:13:15,600 --> 00:13:17,920
complex environments with those

341
00:13:17,920 --> 00:13:21,680
and another alternative is a vmware esxi

342
00:13:21,680 --> 00:13:24,720
um i only tested it just a little bit

343
00:13:24,720 --> 00:13:26,000
but there are people see

344
00:13:26,000 --> 00:13:29,200
some people who use it more

345
00:13:29,200 --> 00:13:33,120
and it seems to be okay

346
00:13:33,120 --> 00:13:36,800
and if you want to use virtual machines

347
00:13:36,800 --> 00:13:40,320
and actually use like remote desktops or

348
00:13:40,320 --> 00:13:41,680
things with them

349
00:13:41,680 --> 00:13:44,160
then vmware seems to be okay but as its

350
00:13:44,160 --> 00:13:46,839
proprietary software

351
00:13:46,839 --> 00:13:49,760
um you can't really do all the cool

352
00:13:49,760 --> 00:13:50,399
stuff

353
00:13:50,399 --> 00:13:52,720
that the full paid version would support

354
00:13:52,720 --> 00:13:54,560
so you can't create clusters of vmware

355
00:13:54,560 --> 00:13:56,079
servers

356
00:13:56,079 --> 00:13:59,120
easily and i didn't figure out if it's

357
00:13:59,120 --> 00:14:00,720
easy to

358
00:14:00,720 --> 00:14:03,839
like um use it in any scripted and

359
00:14:03,839 --> 00:14:05,680
automatic manner

360
00:14:05,680 --> 00:14:08,240
so i've ended up using software called

361
00:14:08,240 --> 00:14:10,240
proxmox

362
00:14:10,240 --> 00:14:14,240
and uh it's an open source product

363
00:14:14,240 --> 00:14:17,680
um based on debian and

364
00:14:17,680 --> 00:14:20,079
i like it a lot because it's very easy

365
00:14:20,079 --> 00:14:21,839
to script

366
00:14:21,839 --> 00:14:23,839
write scripts that deal with virtual

367
00:14:23,839 --> 00:14:25,279
machines so i

368
00:14:25,279 --> 00:14:29,199
create them or destroy them or

369
00:14:29,199 --> 00:14:31,279
set up like different properties on

370
00:14:31,279 --> 00:14:33,279
those virtual machines

371
00:14:33,279 --> 00:14:37,600
so it has a web gui but um

372
00:14:37,600 --> 00:14:39,360
for some things it's it's easier to

373
00:14:39,360 --> 00:14:41,519
write scripts to do things

374
00:14:41,519 --> 00:14:44,800
and maybe the only con

375
00:14:44,800 --> 00:14:47,199
or downside of proxmox is that the vert

376
00:14:47,199 --> 00:14:49,519
or the virtual console

377
00:14:49,519 --> 00:14:51,279
feature isn't that great so it's a

378
00:14:51,279 --> 00:14:53,120
browser-based thing

379
00:14:53,120 --> 00:14:54,800
it's like good enough for setting things

380
00:14:54,800 --> 00:14:56,639
up but if you want to

381
00:14:56,639 --> 00:15:00,160
use remote desktops with

382
00:15:00,160 --> 00:15:01,760
virtual machine guests running on

383
00:15:01,760 --> 00:15:03,440
proxmox then

384
00:15:03,440 --> 00:15:06,639
you need to just set up a native

385
00:15:06,639 --> 00:15:09,839
remote desktop connection

386
00:15:10,839 --> 00:15:13,839
um

387
00:15:14,000 --> 00:15:16,000
anyway proxmox supports pretty much the

388
00:15:16,000 --> 00:15:17,440
same things as

389
00:15:17,440 --> 00:15:20,480
you have available in virtualbox but

390
00:15:20,480 --> 00:15:22,000
it's just running on its own piece of

391
00:15:22,000 --> 00:15:23,920
hardware and you have a web code to

392
00:15:23,920 --> 00:15:27,360
access it and

393
00:15:27,360 --> 00:15:29,759
one thing you should total research if

394
00:15:29,759 --> 00:15:30,880
using proxmox

395
00:15:30,880 --> 00:15:33,839
is a thing called cloud init so it's a

396
00:15:33,839 --> 00:15:35,120
piece of software

397
00:15:35,120 --> 00:15:37,440
uh that does kind of post insta

398
00:15:37,440 --> 00:15:38,959
installation configuration on

399
00:15:38,959 --> 00:15:42,240
on virtual machines

400
00:15:42,240 --> 00:15:45,680
and it supports linux's and maybe some

401
00:15:45,680 --> 00:15:48,240
other unix-like operating systems

402
00:15:48,240 --> 00:15:51,360
not windows anyway

403
00:15:51,360 --> 00:15:53,839
so the point is that you can create a

404
00:15:53,839 --> 00:15:56,320
kind of template virtual machine

405
00:15:56,320 --> 00:16:01,199
that has well just the basic stuff

406
00:16:01,199 --> 00:16:04,320
of an operating system and then

407
00:16:04,320 --> 00:16:06,160
you can turn that thing into something

408
00:16:06,160 --> 00:16:08,800
called template on a proxmox

409
00:16:08,800 --> 00:16:11,600
and when you want to create actual

410
00:16:11,600 --> 00:16:13,279
virtual machines to do stuff

411
00:16:13,279 --> 00:16:16,880
um you do the customization of the host

412
00:16:16,880 --> 00:16:18,399
through a cloud init config

413
00:16:18,399 --> 00:16:20,720
so things that go into a cloud init

414
00:16:20,720 --> 00:16:22,000
config are like for

415
00:16:22,000 --> 00:16:25,040
example host name or the ssh keys

416
00:16:25,040 --> 00:16:28,279
you want to access the machine at or

417
00:16:28,279 --> 00:16:31,839
ipconfiguration and cloud init also

418
00:16:31,839 --> 00:16:32,800
supports

419
00:16:32,800 --> 00:16:36,399
some automated and automation and

420
00:16:36,399 --> 00:16:38,079
orchestration things like puppets

421
00:16:38,079 --> 00:16:41,199
announceable and so on

422
00:16:41,199 --> 00:16:42,959
and and that's really useful because it

423
00:16:42,959 --> 00:16:44,959
takes quite a while to

424
00:16:44,959 --> 00:16:48,399
install an os from scratch um

425
00:16:48,399 --> 00:16:50,160
on a virtual machine but with cloud in

426
00:16:50,160 --> 00:16:51,519
it uh

427
00:16:51,519 --> 00:16:53,360
creating a virtual machine is just like

428
00:16:53,360 --> 00:16:55,120
a matter of a few seconds

429
00:16:55,120 --> 00:16:58,959
or half a minute or so and i made myself

430
00:16:58,959 --> 00:17:01,279
templates for kali and debbie and ubuntu

431
00:17:01,279 --> 00:17:02,399
because those

432
00:17:02,399 --> 00:17:06,400
usually cover most of my use cases

433
00:17:06,480 --> 00:17:09,520
and to run all of this so this is

434
00:17:09,520 --> 00:17:12,559
my hardware built from my home lab

435
00:17:12,559 --> 00:17:16,079
so any older pcs

436
00:17:16,079 --> 00:17:19,119
are completely fine for running virtual

437
00:17:19,119 --> 00:17:20,559
machines

438
00:17:20,559 --> 00:17:23,760
and um i'm

439
00:17:23,760 --> 00:17:27,119
running a couple lenovo s30s

440
00:17:27,119 --> 00:17:30,840
running proxmox and it seems to be a

441
00:17:30,840 --> 00:17:33,840
fairly good combination of like

442
00:17:33,840 --> 00:17:37,760
computing power with the low price point

443
00:17:37,760 --> 00:17:40,799
so well you can google any stores that

444
00:17:40,799 --> 00:17:43,360
sell refurbished hardware but i think

445
00:17:43,360 --> 00:17:44,559
the key point with the

446
00:17:44,559 --> 00:17:46,320
lenovo is that it's running a zm

447
00:17:46,320 --> 00:17:48,320
processor and

448
00:17:48,320 --> 00:17:50,640
they are fairly okay for running virtual

449
00:17:50,640 --> 00:17:52,160
machines because they come with a lot

450
00:17:52,160 --> 00:17:52,799
more cache

451
00:17:52,799 --> 00:17:56,000
than desktop processors

452
00:17:56,000 --> 00:17:58,480
and then i have a couple basically just

453
00:17:58,480 --> 00:18:01,440
like dumpster finds

454
00:18:01,440 --> 00:18:04,559
just really old and low and pcs

455
00:18:04,559 --> 00:18:07,760
and i have maybe five or six of

456
00:18:07,760 --> 00:18:09,760
those in total running a couple of

457
00:18:09,760 --> 00:18:12,799
peroxised clusters

458
00:18:12,840 --> 00:18:16,960
um i'm showing a really short

459
00:18:16,960 --> 00:18:21,200
demo of how to use proxmox so

460
00:18:21,200 --> 00:18:25,440
i guess my other desktops are showing

461
00:18:25,440 --> 00:18:29,200
so um

462
00:18:29,200 --> 00:18:30,880
actually i'm only demoing the cloud init

463
00:18:30,880 --> 00:18:33,360
part so

464
00:18:33,360 --> 00:18:37,760
i can ssh to my proxmox server

465
00:18:37,760 --> 00:18:43,440
and list all my boxes

466
00:18:43,440 --> 00:18:47,200
so here for example i'm showing a couple

467
00:18:47,200 --> 00:18:49,760
templates i prepared and so i have like

468
00:18:49,760 --> 00:18:52,480
a debian template

469
00:18:52,480 --> 00:18:56,640
uh which is the last one or these ones

470
00:18:56,640 --> 00:18:59,679
so if i want to create a virtual machine

471
00:18:59,679 --> 00:19:02,320
based on a debian image

472
00:19:02,320 --> 00:19:05,440
i'm calling a script i wrote if it's not

473
00:19:05,440 --> 00:19:08,320
too long but

474
00:19:08,960 --> 00:19:14,000
i'm typing here the template id

475
00:19:14,000 --> 00:19:18,400
and id for the new box

476
00:19:19,360 --> 00:19:22,399
so contest

477
00:19:23,120 --> 00:19:26,400
i'm adding five gigs of disc to that

478
00:19:26,400 --> 00:19:28,240
thing and giving four gigs

479
00:19:28,240 --> 00:19:31,840
of memory and four cores

480
00:19:36,799 --> 00:19:38,240
and that's all it took to create the

481
00:19:38,240 --> 00:19:40,960
virtual machine

482
00:19:49,919 --> 00:19:53,120
by itself this is not so interesting but

483
00:19:53,120 --> 00:19:55,120
i'm showing this

484
00:19:55,120 --> 00:19:57,360
just to show that this is all it takes

485
00:19:57,360 --> 00:19:59,600
for me to create one more

486
00:19:59,600 --> 00:20:02,880
server running debian and

487
00:20:02,880 --> 00:20:05,760
you can't really do this as easily with

488
00:20:05,760 --> 00:20:06,880
virtualbox or

489
00:20:06,880 --> 00:20:09,600
anything else that you can't easily

490
00:20:09,600 --> 00:20:11,918
split

491
00:20:12,240 --> 00:20:15,440
um so now the box is basically running

492
00:20:15,440 --> 00:20:15,919
apps

493
00:20:15,919 --> 00:20:18,960
get update and upgrade and reboot

494
00:20:18,960 --> 00:20:22,240
itself once and then it's

495
00:20:22,240 --> 00:20:25,840
ready to do whatever i wanted to do

496
00:20:25,840 --> 00:20:26,260
um

497
00:20:26,260 --> 00:20:29,359
[Music]

498
00:20:29,840 --> 00:20:34,960
then um just going to talk about some of

499
00:20:34,960 --> 00:20:35,760
the projects

500
00:20:35,760 --> 00:20:40,480
i've done using my um home lab

501
00:20:40,480 --> 00:20:43,200
so one is that i can download machines

502
00:20:43,200 --> 00:20:44,240
from vuln hub and

503
00:20:44,240 --> 00:20:46,880
run them on proxmox so usually you could

504
00:20:46,880 --> 00:20:48,159
run those

505
00:20:48,159 --> 00:20:51,120
on virtualbox as well but when i built

506
00:20:51,120 --> 00:20:52,400
my home lab

507
00:20:52,400 --> 00:20:55,600
i specifically spent all the money on

508
00:20:55,600 --> 00:20:57,760
the servers i'm running a cheap

509
00:20:57,760 --> 00:21:00,000
laptop only to act as a terminal so that

510
00:21:00,000 --> 00:21:00,960
doesn't really have

511
00:21:00,960 --> 00:21:04,159
any computing power but it's possible to

512
00:21:04,159 --> 00:21:05,120
import

513
00:21:05,120 --> 00:21:09,120
virtual machines in the ova format to

514
00:21:09,120 --> 00:21:12,960
proxmox as well uh googling around

515
00:21:12,960 --> 00:21:15,440
reveals how to do that but basically

516
00:21:15,440 --> 00:21:17,840
you create the virtual machine in

517
00:21:17,840 --> 00:21:19,039
proxmox and just

518
00:21:19,039 --> 00:21:23,919
import the disk from the ova archive

519
00:21:23,919 --> 00:21:26,880
another cool thing i did i created the

520
00:21:26,880 --> 00:21:30,080
active directory environment

521
00:21:30,080 --> 00:21:32,159
because i wanted to learn to administer

522
00:21:32,159 --> 00:21:33,520
active directory and

523
00:21:33,520 --> 00:21:35,280
you can't really do that unless you

524
00:21:35,280 --> 00:21:37,679
build your own

525
00:21:37,679 --> 00:21:41,919
and it was a large exercise in googling

526
00:21:41,919 --> 00:21:43,679
how to do things and then applying

527
00:21:43,679 --> 00:21:48,159
those instructions and

528
00:21:49,039 --> 00:21:50,400
things you can do with an active

529
00:21:50,400 --> 00:21:53,200
directory so i also created a

530
00:21:53,200 --> 00:21:56,640
windows deployment services installation

531
00:21:56,640 --> 00:21:58,320
so it's basically a network boot

532
00:21:58,320 --> 00:22:00,240
environment of windows

533
00:22:00,240 --> 00:22:02,559
so if i need a new windows server or a

534
00:22:02,559 --> 00:22:04,640
windows workstation i can just create a

535
00:22:04,640 --> 00:22:05,280
new vm

536
00:22:05,280 --> 00:22:08,640
and set it to boot from network and then

537
00:22:08,640 --> 00:22:11,440
it boots to installer

538
00:22:11,440 --> 00:22:14,880
um another thing

539
00:22:14,880 --> 00:22:17,440
uh i was learning with my ad lab was

540
00:22:17,440 --> 00:22:18,080
creating

541
00:22:18,080 --> 00:22:21,120
gpos or group policy objects

542
00:22:21,120 --> 00:22:24,559
so that's the magic that makes your

543
00:22:24,559 --> 00:22:27,760
work laptop two things when you don't

544
00:22:27,760 --> 00:22:28,480
look at it

545
00:22:28,480 --> 00:22:32,080
so basically group policy objects

546
00:22:32,080 --> 00:22:34,799
um are things in the active directory

547
00:22:34,799 --> 00:22:36,880
that configure

548
00:22:36,880 --> 00:22:41,120
um compute computers in the domain

549
00:22:41,120 --> 00:22:43,679
so if you end up configuring anything on

550
00:22:43,679 --> 00:22:44,799
your

551
00:22:44,799 --> 00:22:47,200
virtual windows you can probably

552
00:22:47,200 --> 00:22:47,919
automate

553
00:22:47,919 --> 00:22:49,919
all or some of that to group policy

554
00:22:49,919 --> 00:22:52,320
objects

555
00:22:52,840 --> 00:22:55,360
um another thing

556
00:22:55,360 --> 00:22:59,840
was um installing and using

557
00:22:59,840 --> 00:23:03,039
uh intuition detection systems

558
00:23:03,039 --> 00:23:04,799
and this is actually the reason i

559
00:23:04,799 --> 00:23:06,480
started building my home lab anyway

560
00:23:06,480 --> 00:23:08,320
because

561
00:23:08,320 --> 00:23:11,039
so when i was studying for the oscp

562
00:23:11,039 --> 00:23:12,480
robito one year ago

563
00:23:12,480 --> 00:23:15,760
i had a great lot of fun owning all

564
00:23:15,760 --> 00:23:16,720
those boxes

565
00:23:16,720 --> 00:23:19,840
but i had a nagging thought

566
00:23:19,840 --> 00:23:22,400
that how could i ever detect if somebody

567
00:23:22,400 --> 00:23:23,039
is doing

568
00:23:23,039 --> 00:23:24,720
these things to my box that i was doing

569
00:23:24,720 --> 00:23:26,640
at those ones

570
00:23:26,640 --> 00:23:29,840
so now i'm kind of learning

571
00:23:29,840 --> 00:23:31,679
how to check how exactly that works out

572
00:23:31,679 --> 00:23:33,120
with the setting up my own

573
00:23:33,120 --> 00:23:36,159
intuition detection system so basically

574
00:23:36,159 --> 00:23:38,400
there are like two kinds of ids one is

575
00:23:38,400 --> 00:23:39,919
like network based which means that

576
00:23:39,919 --> 00:23:41,360
something is looking at traffic

577
00:23:41,360 --> 00:23:44,480
in the network and finding out if the

578
00:23:44,480 --> 00:23:45,840
traffic is malicious or

579
00:23:45,840 --> 00:23:48,960
not um

580
00:23:48,960 --> 00:23:52,159
so as i'm running psense on my router so

581
00:23:52,159 --> 00:23:56,080
pf plucker plugs kind of traffic

582
00:23:56,080 --> 00:23:58,640
based on black lists of which ips or ip

583
00:23:58,640 --> 00:23:59,600
blocks

584
00:23:59,600 --> 00:24:02,240
are observed to produce malicious

585
00:24:02,240 --> 00:24:03,279
traffic

586
00:24:03,279 --> 00:24:04,880
and the other one is nord which is kind

587
00:24:04,880 --> 00:24:06,799
of looking at traffic like content of

588
00:24:06,799 --> 00:24:08,640
traffic itself

589
00:24:08,640 --> 00:24:10,640
and finding out if things things are

590
00:24:10,640 --> 00:24:12,799
okay or not

591
00:24:12,799 --> 00:24:15,760
and another category of ids is a

592
00:24:15,760 --> 00:24:16,840
host-based

593
00:24:16,840 --> 00:24:20,960
ids which means that there are agents

594
00:24:20,960 --> 00:24:23,200
on computers to be monitored and they

595
00:24:23,200 --> 00:24:26,240
collect different things like logs

596
00:24:26,240 --> 00:24:28,080
and other data and send them to a

597
00:24:28,080 --> 00:24:30,840
centralized server

598
00:24:30,840 --> 00:24:33,840
um

599
00:24:34,159 --> 00:24:37,120
so i i was experimenting with the these

600
00:24:37,120 --> 00:24:38,159
things on the screen

601
00:24:38,159 --> 00:24:43,520
so waza is one of those alternatives

602
00:24:43,520 --> 00:24:46,799
uh it comes with a lot of features and

603
00:24:46,799 --> 00:24:48,960
it's presenting its data in kibona i

604
00:24:48,960 --> 00:24:51,200
don't know how it works

605
00:24:51,200 --> 00:24:53,039
really but i'm the process of finding

606
00:24:53,039 --> 00:24:55,279
out

607
00:24:55,520 --> 00:24:59,360
and that's it basically

608
00:24:59,360 --> 00:25:01,760
the talk was really short and i didn't

609
00:25:01,760 --> 00:25:03,840
really go into much details

610
00:25:03,840 --> 00:25:08,080
but i hope and things i presented will

611
00:25:08,080 --> 00:25:09,279
inspire you to

612
00:25:09,279 --> 00:25:12,960
find more about things these things

613
00:25:12,960 --> 00:25:16,159
on their own fantastic

614
00:25:16,159 --> 00:25:19,279
thanks so much oscar really awesome and

615
00:25:19,279 --> 00:25:20,080
how can

616
00:25:20,080 --> 00:25:22,559
people find you if they want to uh know

617
00:25:22,559 --> 00:25:24,240
more

618
00:25:24,240 --> 00:25:28,320
uh you can i guess dm me on twitter

619
00:25:28,320 --> 00:25:30,880
i'll check if my dms are open and i'm

620
00:25:30,880 --> 00:25:33,520
also hanging around with the

621
00:25:33,520 --> 00:25:36,720
discord the many hats club discord

622
00:25:36,720 --> 00:25:40,000
and so my nick is oscar there so

623
00:25:40,000 --> 00:25:41,919
please bring me attack me if you want to

624
00:25:41,919 --> 00:25:43,520
find

625
00:25:43,520 --> 00:25:45,520
more about these things and i'd be

626
00:25:45,520 --> 00:25:47,120
really happy to help you guys

627
00:25:47,120 --> 00:25:49,279
awesome and uh thank you so much for

628
00:25:49,279 --> 00:25:51,440
participating in isolation con

629
00:25:51,440 --> 00:25:54,240
uh finland's number one security

630
00:25:54,240 --> 00:25:55,200
researcher

631
00:25:55,200 --> 00:25:56,960
uh from my perspective because i only

632
00:25:56,960 --> 00:25:58,400
know one finnish

633
00:25:58,400 --> 00:26:00,480
security researcher and troy doesn't

634
00:26:00,480 --> 00:26:02,080
count because he's

635
00:26:02,080 --> 00:26:04,799
uh he's based in norway so thank you so

636
00:26:04,799 --> 00:26:05,520
much

637
00:26:05,520 --> 00:26:08,799
for joining us um and we're gonna take a

638
00:26:08,799 --> 00:26:10,000
short break

639
00:26:10,000 --> 00:26:13,279
while we uh line up with uh be

640
00:26:13,279 --> 00:26:16,480
bo who yeah we're gonna check out

641
00:26:16,480 --> 00:26:20,000
um what uh i guess this would be

642
00:26:20,000 --> 00:26:22,720
um an indian security researcher who's

643
00:26:22,720 --> 00:26:24,960
gonna be joining us so super exciting

644
00:26:24,960 --> 00:26:27,360
we're going from the north to the south

645
00:26:27,360 --> 00:26:39,840
here on isolation con

646
00:26:41,950 --> 00:26:51,760
[Music]

647
00:26:51,760 --> 00:26:53,840
foreign

