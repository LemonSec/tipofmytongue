1
00:00:00,000 --> 00:00:01,120
i don't know if i'm supposed to move

2
00:00:01,120 --> 00:00:03,520
this part okay

3
00:00:03,520 --> 00:00:04,960
okay so thank you guys for joining me

4
00:00:04,960 --> 00:00:07,680
i'm really excited about presenting

5
00:00:07,680 --> 00:00:10,160
um this is i broke in now what linux

6
00:00:10,160 --> 00:00:12,559
manual privilege escalation 101.

7
00:00:12,559 --> 00:00:16,079
um before i get started i wanted to say

8
00:00:16,079 --> 00:00:18,400
this is by no means a comprehensive

9
00:00:18,400 --> 00:00:20,000
guide

10
00:00:20,000 --> 00:00:22,080
um this is just kind of touching the tip

11
00:00:22,080 --> 00:00:23,119
of the iceberg

12
00:00:23,119 --> 00:00:26,480
or scraping kind of like the surface

13
00:00:26,480 --> 00:00:29,599
of something like this um

14
00:00:29,599 --> 00:00:32,479
normally privileged escalation entails

15
00:00:32,479 --> 00:00:34,160
several different steps

16
00:00:34,160 --> 00:00:37,120
you might have to combine methodologies

17
00:00:37,120 --> 00:00:38,320
that are existing

18
00:00:38,320 --> 00:00:43,200
just to gather root so

19
00:00:43,200 --> 00:00:45,039
who am i i feel like old presentation

20
00:00:45,039 --> 00:00:46,800
starts like this so mine is really not

21
00:00:46,800 --> 00:00:48,239
going to be the exception

22
00:00:48,239 --> 00:00:51,680
i'll do the same uh bachelor's degree in

23
00:00:51,680 --> 00:00:53,520
computer systems engineering

24
00:00:53,520 --> 00:00:55,920
um senior security engineer with a

25
00:00:55,920 --> 00:00:56,879
little bit over

26
00:00:56,879 --> 00:01:00,079
seven years of it experience

27
00:01:00,079 --> 00:01:01,680
um i started you know like in the

28
00:01:01,680 --> 00:01:04,799
service desk just unlocking ad accounts

29
00:01:04,799 --> 00:01:08,159
creating them just adding to groups and

30
00:01:08,159 --> 00:01:09,600
all kinds of good stuff

31
00:01:09,600 --> 00:01:13,520
just typical um

32
00:01:13,520 --> 00:01:17,280
red team enthusiast c c n a

33
00:01:17,280 --> 00:01:20,799
s b e j b t

34
00:01:20,799 --> 00:01:24,640
c i s b why well i do have all of its

35
00:01:24,640 --> 00:01:26,640
credentials but like the alphabet soup

36
00:01:26,640 --> 00:01:28,400
it just kind of throws me off i'm pretty

37
00:01:28,400 --> 00:01:29,840
sure there's people here who have like a

38
00:01:29,840 --> 00:01:30,400
longer

39
00:01:30,400 --> 00:01:33,680
alphabet but um yeah

40
00:01:33,680 --> 00:01:36,240
um definitely um this is going to make

41
00:01:36,240 --> 00:01:37,680
me sound horrible but out of all the

42
00:01:37,680 --> 00:01:39,119
certifications that i have

43
00:01:39,119 --> 00:01:42,240
ssp has definitely been my favorite

44
00:01:42,240 --> 00:01:45,200
i feel like it's ridiculously underrated

45
00:01:45,200 --> 00:01:46,960
um

46
00:01:46,960 --> 00:01:48,640
it really gives you like a really good

47
00:01:48,640 --> 00:01:50,000
foundation

48
00:01:50,000 --> 00:01:52,720
if you want to get started with cissb so

49
00:01:52,720 --> 00:01:54,479
you should definitely check it out

50
00:01:54,479 --> 00:01:57,280
um experience on incident detection and

51
00:01:57,280 --> 00:01:58,240
response

52
00:01:58,240 --> 00:02:01,520
so i think incident response is a lot of

53
00:02:01,520 --> 00:02:02,399
fun because

54
00:02:02,399 --> 00:02:04,399
with little pieces of information that

55
00:02:04,399 --> 00:02:06,000
you're given

56
00:02:06,000 --> 00:02:09,360
you're able to paint a picture um

57
00:02:09,360 --> 00:02:11,038
you have to put all the pieces together

58
00:02:11,038 --> 00:02:13,360
and all the hints to

59
00:02:13,360 --> 00:02:15,120
get a potential answer to what you're

60
00:02:15,120 --> 00:02:17,360
looking for

61
00:02:17,360 --> 00:02:19,280
so it's definitely something really fun

62
00:02:19,280 --> 00:02:21,920
um fun facts about me my favorite color

63
00:02:21,920 --> 00:02:23,520
is pink

64
00:02:23,520 --> 00:02:25,520
um when i was a kid i was terrified of

65
00:02:25,520 --> 00:02:26,720
mr clean

66
00:02:26,720 --> 00:02:28,879
and david bowie i know these two

67
00:02:28,879 --> 00:02:30,959
characters are completely unrelated to

68
00:02:30,959 --> 00:02:31,599
each other

69
00:02:31,599 --> 00:02:33,840
but i remember being a kid and my

70
00:02:33,840 --> 00:02:36,080
parents taking me to like some kind of

71
00:02:36,080 --> 00:02:39,200
thrift store like we were looking around

72
00:02:39,200 --> 00:02:42,080
and i saw this david bowie record

73
00:02:42,080 --> 00:02:44,640
and i was like who is this evil guy like

74
00:02:44,640 --> 00:02:45,360
why is he

75
00:02:45,360 --> 00:02:50,560
anyway just he gave me nightmares

76
00:02:50,560 --> 00:02:52,640
if you're a blue teamer why are you

77
00:02:52,640 --> 00:02:54,480
teaching me fantastic stuff and this is

78
00:02:54,480 --> 00:02:56,239
something that i've had people

79
00:02:56,239 --> 00:02:59,280
asking me at previous jobs like

80
00:02:59,280 --> 00:03:01,920
even on my previous job like my old boss

81
00:03:01,920 --> 00:03:02,480
was like

82
00:03:02,480 --> 00:03:05,120
you do realize we don't pen test in here

83
00:03:05,120 --> 00:03:06,000
right it's like

84
00:03:06,000 --> 00:03:08,959
yes and even my co-workers why are you

85
00:03:08,959 --> 00:03:10,879
trying to learn all this stuff

86
00:03:10,879 --> 00:03:12,959
like you're are you seriously trying to

87
00:03:12,959 --> 00:03:14,000
become a fantastic

88
00:03:14,000 --> 00:03:17,120
this is gonna hurt your career and

89
00:03:17,120 --> 00:03:21,200
i have mixed feelings about this because

90
00:03:21,680 --> 00:03:24,560
if you really want to be a good security

91
00:03:24,560 --> 00:03:26,720
operations analyst or understand

92
00:03:26,720 --> 00:03:28,640
security operations you have to think

93
00:03:28,640 --> 00:03:30,000
like an attacker

94
00:03:30,000 --> 00:03:32,000
like if i really wanted to be a bad

95
00:03:32,000 --> 00:03:34,400
person what steps would i really need to

96
00:03:34,400 --> 00:03:35,440
take to mess up an

97
00:03:35,440 --> 00:03:38,400
environment i feel like blue teamers are

98
00:03:38,400 --> 00:03:38,799
the

99
00:03:38,799 --> 00:03:42,560
unsung heroes of this industry um

100
00:03:42,560 --> 00:03:46,959
i mean i'm really not trivializing

101
00:03:46,959 --> 00:03:50,239
the work of the work of a hacker or

102
00:03:50,239 --> 00:03:54,400
the work of a a red teamer

103
00:03:54,400 --> 00:03:56,400
but you're just kind of there playing

104
00:03:56,400 --> 00:03:57,599
pretend

105
00:03:57,599 --> 00:03:59,519
and just going through a whole entire

106
00:03:59,519 --> 00:04:00,640
program you

107
00:04:00,640 --> 00:04:03,920
um start engaging with a client

108
00:04:03,920 --> 00:04:05,840
you go through several steps and it's a

109
00:04:05,840 --> 00:04:06,959
lot of heavy

110
00:04:06,959 --> 00:04:10,400
work but you go home and

111
00:04:10,400 --> 00:04:12,879
you're done with it while a security

112
00:04:12,879 --> 00:04:15,040
operations person

113
00:04:15,040 --> 00:04:17,199
you go home and it doesn't guarantee

114
00:04:17,199 --> 00:04:18,959
that you're gonna have a free afternoon

115
00:04:18,959 --> 00:04:19,440
right

116
00:04:19,440 --> 00:04:23,600
so if i wanted to be a bad person and an

117
00:04:23,600 --> 00:04:26,479
attacker crime doesn't work from nine to

118
00:04:26,479 --> 00:04:27,120
five

119
00:04:27,120 --> 00:04:30,080
right so real world attacks can happen

120
00:04:30,080 --> 00:04:30,720
at

121
00:04:30,720 --> 00:04:33,840
any time basically

122
00:04:34,080 --> 00:04:37,520
what is exactly privileged escalation

123
00:04:37,520 --> 00:04:39,680
privilege escalation vulnerabilities are

124
00:04:39,680 --> 00:04:40,800
security issues that

125
00:04:40,800 --> 00:04:43,199
allow users to gain more permissions and

126
00:04:43,199 --> 00:04:45,440
a higher level of access to systems and

127
00:04:45,440 --> 00:04:46,639
applications that their

128
00:04:46,639 --> 00:04:49,520
administrators attended these types of

129
00:04:49,520 --> 00:04:51,280
flaws are available for attackers

130
00:04:51,280 --> 00:04:53,199
because they are needed for full exploit

131
00:04:53,199 --> 00:04:54,639
chains but can be overlooked by

132
00:04:54,639 --> 00:04:56,639
defenders or developers

133
00:04:56,639 --> 00:04:59,280
because of their lower severity scores

134
00:04:59,280 --> 00:04:59,840
so what

135
00:04:59,840 --> 00:05:01,759
what does this even mean it's just like

136
00:05:01,759 --> 00:05:03,120
a whole bunch of random words

137
00:05:03,120 --> 00:05:06,479
um so whenever we think of an

138
00:05:06,479 --> 00:05:09,440
environment in an ideal world

139
00:05:09,440 --> 00:05:12,639
most environments should be secure

140
00:05:12,639 --> 00:05:14,400
under the principle of the least

141
00:05:14,400 --> 00:05:16,720
privilege so what does this mean like if

142
00:05:16,720 --> 00:05:18,720
an administrator is supposed to be doing

143
00:05:18,720 --> 00:05:19,120
their

144
00:05:19,120 --> 00:05:22,479
work correctly and doing their due

145
00:05:22,479 --> 00:05:23,520
diligence

146
00:05:23,520 --> 00:05:25,600
they're only going to give users the

147
00:05:25,600 --> 00:05:27,680
very bare minimum permissions for them

148
00:05:27,680 --> 00:05:30,479
to perform their tasks

149
00:05:30,479 --> 00:05:31,840
they're not going to give them more and

150
00:05:31,840 --> 00:05:34,240
they're not going to give them less

151
00:05:34,240 --> 00:05:37,440
for example pedro from the front desk or

152
00:05:37,440 --> 00:05:39,840
bethany from accounts payable or you

153
00:05:39,840 --> 00:05:42,160
know like bob and allies from

154
00:05:42,160 --> 00:05:45,680
the marketing department so they're just

155
00:05:45,680 --> 00:05:47,840
going to be able to perform

156
00:05:47,840 --> 00:05:50,800
their very basic daily tasks but this

157
00:05:50,800 --> 00:05:52,000
doesn't only apply

158
00:05:52,000 --> 00:05:55,199
for um doesn't only apply to

159
00:05:55,199 --> 00:05:57,199
end user accounts this also applies to

160
00:05:57,199 --> 00:05:58,720
service accounts

161
00:05:58,720 --> 00:06:01,840
for example apache or www you know like

162
00:06:01,840 --> 00:06:02,560
data

163
00:06:02,560 --> 00:06:05,600
just they're supposed to be having

164
00:06:05,600 --> 00:06:07,360
right permissions but they shouldn't

165
00:06:07,360 --> 00:06:09,440
really be able to have them outside

166
00:06:09,440 --> 00:06:13,280
of their root folder so it's up to us to

167
00:06:13,280 --> 00:06:15,520
take the necessary steps to gather the

168
00:06:15,520 --> 00:06:20,720
permissions that we need to get root

169
00:06:20,720 --> 00:06:23,840
the bling ring between the years 2008

170
00:06:23,840 --> 00:06:26,160
and 2009 a group of baffling hollywood

171
00:06:26,160 --> 00:06:28,160
teenagers broke into celebrities homes

172
00:06:28,160 --> 00:06:30,319
to steal luxury items

173
00:06:30,319 --> 00:06:32,240
they took as much as they could and they

174
00:06:32,240 --> 00:06:34,080
went unnoticed for several months

175
00:06:34,080 --> 00:06:35,759
but what does this have to do with

176
00:06:35,759 --> 00:06:38,000
privilege escalation

177
00:06:38,000 --> 00:06:39,840
so i remember reading about this even

178
00:06:39,840 --> 00:06:41,160
though it was like in

179
00:06:41,160 --> 00:06:46,000
2009 i read about it in 2014 and i was

180
00:06:46,000 --> 00:06:47,440
just like okay

181
00:06:47,440 --> 00:06:51,039
people like kim kardashian paris hilton

182
00:06:51,039 --> 00:06:53,199
orlando bloom and you know just like a

183
00:06:53,199 --> 00:06:54,319
whole bunch of

184
00:06:54,319 --> 00:06:57,280
celebrities um had their houses broken

185
00:06:57,280 --> 00:06:58,479
in too

186
00:06:58,479 --> 00:07:01,360
and when they interview you know like

187
00:07:01,360 --> 00:07:02,479
the criminals or

188
00:07:02,479 --> 00:07:04,160
you know like the people that broke into

189
00:07:04,160 --> 00:07:06,960
their houses they were like yeah

190
00:07:06,960 --> 00:07:09,440
so we went unnoticed for a very long

191
00:07:09,440 --> 00:07:10,880
time

192
00:07:10,880 --> 00:07:12,960
what did i really look for difficult

193
00:07:12,960 --> 00:07:14,080
solutions were

194
00:07:14,080 --> 00:07:17,759
just like something simple how would we

195
00:07:17,759 --> 00:07:18,639
break in

196
00:07:18,639 --> 00:07:22,479
and we too we went straight and look for

197
00:07:22,479 --> 00:07:24,560
all the goodies

198
00:07:24,560 --> 00:07:27,440
so it just kind of makes me think one of

199
00:07:27,440 --> 00:07:28,720
something in particular

200
00:07:28,720 --> 00:07:32,240
somebody that is trying to gain access

201
00:07:32,240 --> 00:07:35,520
they have to be sneaky you don't

202
00:07:35,520 --> 00:07:37,440
always have to be looking for the

203
00:07:37,440 --> 00:07:39,840
craziest or most outrageous solutions

204
00:07:39,840 --> 00:07:42,400
just try something simple

205
00:07:42,400 --> 00:07:44,240
and once you're there you want to take

206
00:07:44,240 --> 00:07:47,120
all the good stuff

207
00:07:48,560 --> 00:07:51,360
um security operations is like fantastic

208
00:07:51,360 --> 00:07:53,280
but backwards

209
00:07:53,280 --> 00:07:54,879
i saw this name long ago and i thought

210
00:07:54,879 --> 00:07:57,680
it was really funny

211
00:07:57,680 --> 00:08:01,199
the ugly truth um what i mean the ugly

212
00:08:01,199 --> 00:08:03,360
truth is just basically the challenges

213
00:08:03,360 --> 00:08:04,720
that you could potentially

214
00:08:04,720 --> 00:08:07,520
face when it comes to privilege

215
00:08:07,520 --> 00:08:09,759
escalation

216
00:08:09,759 --> 00:08:11,720
it is unlikely that you'll ever find a

217
00:08:11,720 --> 00:08:14,160
one-size-fits-all exploit

218
00:08:14,160 --> 00:08:16,319
if you're lucky and this is if you're

219
00:08:16,319 --> 00:08:17,599
very very lucky

220
00:08:17,599 --> 00:08:19,599
you might be able to customize or you

221
00:08:19,599 --> 00:08:20,639
might just

222
00:08:20,639 --> 00:08:22,639
need to change you know like typical

223
00:08:22,639 --> 00:08:24,160
board and

224
00:08:24,160 --> 00:08:27,599
you know like your local address or

225
00:08:27,599 --> 00:08:30,319
um you know like the attacker address or

226
00:08:30,319 --> 00:08:32,719
anything just change ip imports

227
00:08:32,719 --> 00:08:34,479
if you're lucky but a lot of the times

228
00:08:34,479 --> 00:08:36,799
that's really not the case

229
00:08:36,799 --> 00:08:40,080
um i remember this star type

230
00:08:40,080 --> 00:08:43,039
this time in particular when even i was

231
00:08:43,039 --> 00:08:44,800
looking at an exploit code

232
00:08:44,800 --> 00:08:46,320
and even the explorer was telling me hey

233
00:08:46,320 --> 00:08:49,920
you might need several attempts to

234
00:08:50,399 --> 00:08:52,320
be able to run this exploit you know

235
00:08:52,320 --> 00:08:54,640
like successfully and i was just like

236
00:08:54,640 --> 00:08:54,959
this

237
00:08:54,959 --> 00:08:57,680
this is bad so in fact it was true it

238
00:08:57,680 --> 00:09:00,399
took me several times

239
00:09:00,399 --> 00:09:02,320
uh pivoting could be a defining factor

240
00:09:02,320 --> 00:09:04,560
for a successful previous escalation

241
00:09:04,560 --> 00:09:06,320
so it just kind of reminds me of sesame

242
00:09:06,320 --> 00:09:08,240
street like who are the people in your

243
00:09:08,240 --> 00:09:09,120
neighborhood

244
00:09:09,120 --> 00:09:11,440
you have to see who is around and what

245
00:09:11,440 --> 00:09:12,399
they're doing

246
00:09:12,399 --> 00:09:14,000
right because just because you you're

247
00:09:14,000 --> 00:09:15,600
not able to find anything that you could

248
00:09:15,600 --> 00:09:17,200
potentially consider useful

249
00:09:17,200 --> 00:09:20,720
in your um current computer it doesn't

250
00:09:20,720 --> 00:09:22,000
necessarily mean that you're

251
00:09:22,000 --> 00:09:25,519
not gonna find anything interesting

252
00:09:25,519 --> 00:09:27,120
you know like in the computers that are

253
00:09:27,120 --> 00:09:29,360
within the network or let's just say

254
00:09:29,360 --> 00:09:31,120
that you found a set of credentials but

255
00:09:31,120 --> 00:09:32,800
they're useless right now

256
00:09:32,800 --> 00:09:34,240
well you should try them you have the

257
00:09:34,240 --> 00:09:36,000
option to try them on the computers

258
00:09:36,000 --> 00:09:38,240
that you've actually pivoted into or

259
00:09:38,240 --> 00:09:40,000
look for web services

260
00:09:40,000 --> 00:09:41,920
see what they're really trying to do and

261
00:09:41,920 --> 00:09:45,200
what they're really trying to tell you

262
00:09:45,200 --> 00:09:49,040
time consuming and repetitive tasks

263
00:09:49,040 --> 00:09:50,800
as i mentioned before privileges

264
00:09:50,800 --> 00:09:52,640
collision is not just okay i'm gonna run

265
00:09:52,640 --> 00:09:54,240
an exploit and it works and

266
00:09:54,240 --> 00:09:56,640
we're all good to go i mean if you're

267
00:09:56,640 --> 00:09:57,839
lucky

268
00:09:57,839 --> 00:09:59,680
you can get away with that but a lot of

269
00:09:59,680 --> 00:10:02,320
the times it's gathering information

270
00:10:02,320 --> 00:10:05,279
looking at are the hosts in your network

271
00:10:05,279 --> 00:10:05,680
um

272
00:10:05,680 --> 00:10:07,680
looking at particular services that are

273
00:10:07,680 --> 00:10:08,720
running and

274
00:10:08,720 --> 00:10:10,320
you have to go through a whole entire

275
00:10:10,320 --> 00:10:12,160
list

276
00:10:12,160 --> 00:10:14,240
no security architecture for the actual

277
00:10:14,240 --> 00:10:15,440
pen test

278
00:10:15,440 --> 00:10:16,959
if there's no security architecture

279
00:10:16,959 --> 00:10:19,040
birthday actual pen test let alone for

280
00:10:19,040 --> 00:10:20,880
privilege escalation itself which is

281
00:10:20,880 --> 00:10:21,519
like a

282
00:10:21,519 --> 00:10:25,760
one entire beast on its own

283
00:10:25,760 --> 00:10:28,480
um creating some boxes for customization

284
00:10:28,480 --> 00:10:30,399
research and testing so this is pretty

285
00:10:30,399 --> 00:10:33,839
interesting because

286
00:10:34,160 --> 00:10:37,680
never ever testing production no matter

287
00:10:37,680 --> 00:10:39,680
what you're doing

288
00:10:39,680 --> 00:10:42,560
um makes me think you know like when

289
00:10:42,560 --> 00:10:43,839
you're playing with

290
00:10:43,839 --> 00:10:47,360
half the box or virtual hacking labs or

291
00:10:47,360 --> 00:10:50,720
um pwk i think

292
00:10:50,720 --> 00:10:53,680
um you can get away with okay i messed

293
00:10:53,680 --> 00:10:54,399
this up

294
00:10:54,399 --> 00:10:56,079
i'll just reboot the box and you know

295
00:10:56,079 --> 00:10:57,760
like just go get something to eat and

296
00:10:57,760 --> 00:11:00,560
then come back and i'll be good to go

297
00:11:00,560 --> 00:11:02,480
in you know like the real world you can

298
00:11:02,480 --> 00:11:04,320
really mess up a client's environment

299
00:11:04,320 --> 00:11:06,959
and you can get in a lot of trouble

300
00:11:06,959 --> 00:11:10,399
um plus you want to be able if it's a

301
00:11:10,399 --> 00:11:11,920
kernel expert that you're working with

302
00:11:11,920 --> 00:11:13,839
you want to be able to test it before

303
00:11:13,839 --> 00:11:16,399
running it

304
00:11:17,920 --> 00:11:20,240
explain like i'm five so we're really

305
00:11:20,240 --> 00:11:22,399
not gonna reinvent the wheel in here

306
00:11:22,399 --> 00:11:23,839
we're just gonna go through the

307
00:11:23,839 --> 00:11:27,040
basics of each one of the

308
00:11:27,040 --> 00:11:29,519
steps in the kill chain so

309
00:11:29,519 --> 00:11:31,440
reconnaissance we're basically gathering

310
00:11:31,440 --> 00:11:31,760
as

311
00:11:31,760 --> 00:11:35,440
much information as we can anything just

312
00:11:35,440 --> 00:11:38,079
um you know like poor number versions

313
00:11:38,079 --> 00:11:39,279
and

314
00:11:39,279 --> 00:11:42,800
um operating systems architecture

315
00:11:42,800 --> 00:11:45,279
like web services anything that we could

316
00:11:45,279 --> 00:11:47,839
potentially use

317
00:11:47,839 --> 00:11:51,040
to gather a weapon uh for example just

318
00:11:51,040 --> 00:11:52,720
because we're seeing a port open

319
00:11:52,720 --> 00:11:54,240
doesn't necessarily mean that we could

320
00:11:54,240 --> 00:11:56,959
find a valid exploit for it

321
00:11:56,959 --> 00:11:59,920
with polanization we're pairing an

322
00:11:59,920 --> 00:12:00,560
existing

323
00:12:00,560 --> 00:12:03,839
exploit with a service

324
00:12:03,839 --> 00:12:06,399
so we're just basically saying okay i

325
00:12:06,399 --> 00:12:07,519
have ftp

326
00:12:07,519 --> 00:12:10,800
open i'm going gonna be able to find an

327
00:12:10,800 --> 00:12:13,760
exploit for this particular service i

328
00:12:13,760 --> 00:12:15,760
don't know why i said ftp honestly um

329
00:12:15,760 --> 00:12:17,920
i've never seen ftp open in production

330
00:12:17,920 --> 00:12:19,040
i'm pretty sure

331
00:12:19,040 --> 00:12:22,160
that people still use it well i don't

332
00:12:22,160 --> 00:12:23,600
think people still use it but i'm pretty

333
00:12:23,600 --> 00:12:24,959
sure there's gotta be somebody

334
00:12:24,959 --> 00:12:28,480
um yeah it's a super super old protocol

335
00:12:28,480 --> 00:12:31,519
like i feel old just by talking about it

336
00:12:31,519 --> 00:12:34,000
um delivery how are you gonna place your

337
00:12:34,000 --> 00:12:36,000
payload

338
00:12:36,000 --> 00:12:38,959
are you trying to you know like maybe

339
00:12:38,959 --> 00:12:40,880
code injection

340
00:12:40,880 --> 00:12:44,000
or you know like if it's an executable

341
00:12:44,000 --> 00:12:46,320
are you gonna place it via email just

342
00:12:46,320 --> 00:12:48,880
pretty much how are you going to send

343
00:12:48,880 --> 00:12:52,160
that message exploitation how are you

344
00:12:52,160 --> 00:12:53,200
going to

345
00:12:53,200 --> 00:12:55,040
trigger that payload that you already

346
00:12:55,040 --> 00:12:57,440
placed for example i remember when i was

347
00:12:57,440 --> 00:12:58,480
just getting started

348
00:12:58,480 --> 00:13:02,480
and something as ridiculous and simple

349
00:13:02,480 --> 00:13:06,800
as a wordpress application i gathered

350
00:13:06,800 --> 00:13:09,040
credentials and i was able to log in and

351
00:13:09,040 --> 00:13:11,440
i placed my payload and i was just like

352
00:13:11,440 --> 00:13:13,760
okay my payload is there it's a php

353
00:13:13,760 --> 00:13:15,040
reverse shell how am i

354
00:13:15,040 --> 00:13:17,920
going to be able to why how come i don't

355
00:13:17,920 --> 00:13:19,200
have a shell

356
00:13:19,200 --> 00:13:20,720
so i was there just sitting there with

357
00:13:20,720 --> 00:13:22,560
my netget listener why isn't this

358
00:13:22,560 --> 00:13:23,200
working

359
00:13:23,200 --> 00:13:26,399
because i had to activate it either you

360
00:13:26,399 --> 00:13:28,720
can get an end user to click on it

361
00:13:28,720 --> 00:13:31,360
or you know like disguise the attachment

362
00:13:31,360 --> 00:13:32,480
into something fun

363
00:13:32,480 --> 00:13:35,600
or anyway command and control

364
00:13:35,600 --> 00:13:38,160
well installation what additional tools

365
00:13:38,160 --> 00:13:39,120
do you want to

366
00:13:39,120 --> 00:13:41,199
you know like install in that computer

367
00:13:41,199 --> 00:13:43,199
that you gain access to

368
00:13:43,199 --> 00:13:46,880
do you want something to you know like

369
00:13:46,880 --> 00:13:50,959
gather um additional information or

370
00:13:50,959 --> 00:13:53,360
um are you gonna look at the hashes that

371
00:13:53,360 --> 00:13:54,160
are there

372
00:13:54,160 --> 00:13:56,639
or what are you trying what tools are

373
00:13:56,639 --> 00:13:57,440
you trying to

374
00:13:57,440 --> 00:14:00,000
install that would potentially give you

375
00:14:00,000 --> 00:14:02,720
the results that you're looking for

376
00:14:02,720 --> 00:14:05,040
as in command and control that's hands

377
00:14:05,040 --> 00:14:06,800
on keyboard

378
00:14:06,800 --> 00:14:09,920
um actions on objective like what were

379
00:14:09,920 --> 00:14:10,959
you trying to gather

380
00:14:10,959 --> 00:14:14,160
out of all of this um were you trying to

381
00:14:14,160 --> 00:14:16,240
just you know like get user names

382
00:14:16,240 --> 00:14:19,199
get hashes just get a good look of what

383
00:14:19,199 --> 00:14:21,519
applications are installed

384
00:14:21,519 --> 00:14:23,760
um do you just want to write a report

385
00:14:23,760 --> 00:14:25,440
were you doing all this just to be a

386
00:14:25,440 --> 00:14:26,160
jerk

387
00:14:26,160 --> 00:14:27,839
don't do this don't do it just to be a

388
00:14:27,839 --> 00:14:29,920
jerk always do everything with

389
00:14:29,920 --> 00:14:32,399
permission

390
00:14:32,720 --> 00:14:34,959
if you watch the movie hackers backwards

391
00:14:34,959 --> 00:14:36,399
it's about a group of psychopaths

392
00:14:36,399 --> 00:14:37,040
analysts

393
00:14:37,040 --> 00:14:39,279
that work for a tv station and use logs

394
00:14:39,279 --> 00:14:40,160
to save

395
00:14:40,160 --> 00:14:42,800
an innocent man from going to jail this

396
00:14:42,800 --> 00:14:43,519
is really

397
00:14:43,519 --> 00:14:45,760
weird because i remember back in 2012

398
00:14:45,760 --> 00:14:47,040
they had like a whole bunch of these

399
00:14:47,040 --> 00:14:48,320
memes like

400
00:14:48,320 --> 00:14:49,839
if you watch someone still moving

401
00:14:49,839 --> 00:14:51,519
backwards

402
00:14:51,519 --> 00:14:53,519
and it took me a while to find this meme

403
00:14:53,519 --> 00:14:56,160
but there it is

404
00:14:56,160 --> 00:14:59,839
i haven't seen this movie in forever

405
00:15:00,320 --> 00:15:02,079
medical it isn't the best thing since

406
00:15:02,079 --> 00:15:04,079
sliced bread and i know this is the kind

407
00:15:04,079 --> 00:15:05,279
of conversation you

408
00:15:05,279 --> 00:15:08,079
really do not want to have at you know

409
00:15:08,079 --> 00:15:08,959
like

410
00:15:08,959 --> 00:15:11,279
dallas hackers or you know like certain

411
00:15:11,279 --> 00:15:13,120
places because

412
00:15:13,120 --> 00:15:14,880
i feel like people just get really

413
00:15:14,880 --> 00:15:16,399
really hung up on it

414
00:15:16,399 --> 00:15:19,440
and um metasploit is not good

415
00:15:19,440 --> 00:15:21,839
like that's like paint by numbers such

416
00:15:21,839 --> 00:15:24,000
as filling the blanks

417
00:15:24,000 --> 00:15:26,560
you're not a real security professional

418
00:15:26,560 --> 00:15:27,040
try

419
00:15:27,040 --> 00:15:30,240
harder go back to the services what are

420
00:15:30,240 --> 00:15:31,600
you talking about

421
00:15:31,600 --> 00:15:33,600
all those you know like crazy stuff but

422
00:15:33,600 --> 00:15:35,600
um

423
00:15:35,600 --> 00:15:37,759
i honestly have mixed feelings like i'm

424
00:15:37,759 --> 00:15:39,040
really not here to

425
00:15:39,040 --> 00:15:42,079
bastion rapid seven i've used metasploit

426
00:15:42,079 --> 00:15:43,920
countless times in the past and i feel

427
00:15:43,920 --> 00:15:46,000
like it's a really good tool

428
00:15:46,000 --> 00:15:49,360
i find it really really helpful

429
00:15:49,360 --> 00:15:52,000
um i honestly feel that the only time

430
00:15:52,000 --> 00:15:53,680
when you should really not be using

431
00:15:53,680 --> 00:15:54,639
metasploit

432
00:15:54,639 --> 00:15:57,519
is unless you're specifically instructed

433
00:15:57,519 --> 00:15:59,120
not to use it

434
00:15:59,120 --> 00:16:01,120
if a client tells you it's going to be

435
00:16:01,120 --> 00:16:02,880
very very unlikely that this happens but

436
00:16:02,880 --> 00:16:04,560
if a client specifically tells you hey i

437
00:16:04,560 --> 00:16:06,320
don't want you using metasploit or if

438
00:16:06,320 --> 00:16:08,480
management specifically tells you

439
00:16:08,480 --> 00:16:10,079
you're using medical you're gonna get in

440
00:16:10,079 --> 00:16:12,560
trouble then stay away from it

441
00:16:12,560 --> 00:16:14,320
i feel like it's a really good tool but

442
00:16:14,320 --> 00:16:17,120
um some of the challenges that you're

443
00:16:17,120 --> 00:16:18,880
potentially gonna be facing you know

444
00:16:18,880 --> 00:16:21,920
like besides backlash from the community

445
00:16:21,920 --> 00:16:24,639
it's you can watch p4

446
00:16:24,639 --> 00:16:27,040
the community version is really useful

447
00:16:27,040 --> 00:16:28,480
but you know like if you're looking for

448
00:16:28,480 --> 00:16:31,120
integrated cool features like api

449
00:16:31,120 --> 00:16:35,519
or um well api integration or reporting

450
00:16:35,519 --> 00:16:38,240
um yeah you might want to check out the

451
00:16:38,240 --> 00:16:40,079
you know like paid version

452
00:16:40,079 --> 00:16:43,600
visibility okay for you guys that are

453
00:16:43,600 --> 00:16:45,440
actually use medicine a little bit more

454
00:16:45,440 --> 00:16:46,800
often

455
00:16:46,800 --> 00:16:48,320
but think about this for a second how

456
00:16:48,320 --> 00:16:50,880
many times did you actually

457
00:16:50,880 --> 00:16:54,880
look at the code or the ruby exploit

458
00:16:54,880 --> 00:16:56,320
because i for sure didn't the first time

459
00:16:56,320 --> 00:16:59,199
when i was using it i was just like yay

460
00:16:59,199 --> 00:17:01,440
i ran my first explore this is so

461
00:17:01,440 --> 00:17:03,440
awesome i got a river shell and i was

462
00:17:03,440 --> 00:17:04,799
really excited without truly

463
00:17:04,799 --> 00:17:05,760
understanding

464
00:17:05,760 --> 00:17:08,880
what's in the back and what's happening

465
00:17:08,880 --> 00:17:12,160
consummation requires expertise and

466
00:17:12,160 --> 00:17:13,839
this doesn't only apply just for

467
00:17:13,839 --> 00:17:15,359
metasploit but it's just for

468
00:17:15,359 --> 00:17:17,119
anything that you're doing like if you

469
00:17:17,119 --> 00:17:19,199
really want to get the results that you

470
00:17:19,199 --> 00:17:19,599
want

471
00:17:19,599 --> 00:17:22,240
you have to understand what you're doing

472
00:17:22,240 --> 00:17:24,640
get to understand what an exploit does

473
00:17:24,640 --> 00:17:26,160
and you know like just taking

474
00:17:26,160 --> 00:17:27,679
consideration that you would need to

475
00:17:27,679 --> 00:17:32,160
know how to code in ruby

476
00:17:32,160 --> 00:17:34,240
so just to get an idea these are

477
00:17:34,240 --> 00:17:36,799
metasploit modules

478
00:17:36,799 --> 00:17:39,200
so i feel like it's a really robust tool

479
00:17:39,200 --> 00:17:41,919
but it has a whole bunch of goodies

480
00:17:41,919 --> 00:17:44,960
um for example this is the auxiliary

481
00:17:44,960 --> 00:17:47,360
mode in particular

482
00:17:47,360 --> 00:17:50,559
so even though the auxiliary mode isn't

483
00:17:50,559 --> 00:17:52,160
really going

484
00:17:52,160 --> 00:17:54,880
to give you a shell it's really going to

485
00:17:54,880 --> 00:17:56,160
provide you

486
00:17:56,160 --> 00:17:59,360
um good hints for you to gather one

487
00:17:59,360 --> 00:18:03,120
for example um you know like buzzing

488
00:18:03,120 --> 00:18:07,039
or scanning or um there is even an

489
00:18:07,039 --> 00:18:08,160
option that is called

490
00:18:08,160 --> 00:18:10,400
token impersonation so what it does i

491
00:18:10,400 --> 00:18:12,000
feel like my chair is like really messed

492
00:18:12,000 --> 00:18:12,320
up

493
00:18:12,320 --> 00:18:14,000
anyway i should have you know like moved

494
00:18:14,000 --> 00:18:15,760
my chair when i was getting started i

495
00:18:15,760 --> 00:18:16,240
didn't

496
00:18:16,240 --> 00:18:19,520
oh my anyway so

497
00:18:19,520 --> 00:18:22,480
um token impersonation so what you can

498
00:18:22,480 --> 00:18:23,440
do is like

499
00:18:23,440 --> 00:18:24,960
once you're in and you find an

500
00:18:24,960 --> 00:18:27,039
interesting account you have the option

501
00:18:27,039 --> 00:18:28,080
to impersonate

502
00:18:28,080 --> 00:18:31,679
token and basically be able to mirror

503
00:18:31,679 --> 00:18:33,679
the permissions of that existing account

504
00:18:33,679 --> 00:18:34,960
which i think it's pretty cool

505
00:18:34,960 --> 00:18:37,120
um there's obviously a manual way to do

506
00:18:37,120 --> 00:18:39,919
this for windows you can use hot potato

507
00:18:39,919 --> 00:18:42,400
rotten potato and you know like they

508
00:18:42,400 --> 00:18:45,039
really really work well

509
00:18:45,039 --> 00:18:47,919
payloads which are the meat and bones

510
00:18:47,919 --> 00:18:48,320
like

511
00:18:48,320 --> 00:18:50,240
okay you are able to explore that

512
00:18:50,240 --> 00:18:51,360
vulnerability but

513
00:18:51,360 --> 00:18:52,960
what are you trying to gather out of all

514
00:18:52,960 --> 00:18:54,720
of this so are you

515
00:18:54,720 --> 00:18:56,880
trying to connect directly to that board

516
00:18:56,880 --> 00:18:58,480
are you trying to get the victim machine

517
00:18:58,480 --> 00:19:00,640
to connect back to you

518
00:19:00,640 --> 00:19:02,240
um are you do you just want to be

519
00:19:02,240 --> 00:19:04,320
annoying and pop the calculator

520
00:19:04,320 --> 00:19:07,520
so that's a particular option too

521
00:19:07,520 --> 00:19:10,160
for exploits those are the codes that we

522
00:19:10,160 --> 00:19:12,320
use to take advantage of an existing

523
00:19:12,320 --> 00:19:14,320
vulnerability

524
00:19:14,320 --> 00:19:16,160
another thing is that you really want to

525
00:19:16,160 --> 00:19:17,919
have a good understanding of how an

526
00:19:17,919 --> 00:19:19,440
exploit works

527
00:19:19,440 --> 00:19:21,360
i remember when i was getting started

528
00:19:21,360 --> 00:19:23,280
and

529
00:19:23,280 --> 00:19:27,200
i went to explore tv and i had

530
00:19:27,200 --> 00:19:29,679
a drupal vulnerability and i was just

531
00:19:29,679 --> 00:19:30,400
like okay

532
00:19:30,400 --> 00:19:32,400
i find an exploit and i know for sure

533
00:19:32,400 --> 00:19:34,480
the system is vulnerable why am i not

534
00:19:34,480 --> 00:19:36,799
able to get a reverse shell

535
00:19:36,799 --> 00:19:39,679
and i used to get so frustrated but you

536
00:19:39,679 --> 00:19:41,360
have to understand that not i used to

537
00:19:41,360 --> 00:19:42,960
think all exploits would just give you a

538
00:19:42,960 --> 00:19:44,080
reverse shell

539
00:19:44,080 --> 00:19:46,880
not really so you have to understand

540
00:19:46,880 --> 00:19:48,480
what it's trying to do

541
00:19:48,480 --> 00:19:50,160
they might be able to show you for

542
00:19:50,160 --> 00:19:52,080
example a hash

543
00:19:52,080 --> 00:19:54,240
that you know like once you crack it you

544
00:19:54,240 --> 00:19:55,280
get access to

545
00:19:55,280 --> 00:19:57,039
the web application or they might be

546
00:19:57,039 --> 00:19:59,280
able to show you like a list of users

547
00:19:59,280 --> 00:20:02,559
or a directory that is missing and

548
00:20:02,559 --> 00:20:04,080
that's like i was saying before you have

549
00:20:04,080 --> 00:20:06,159
to put all those pieces together

550
00:20:06,159 --> 00:20:09,039
to um try to you know like gain the

551
00:20:09,039 --> 00:20:09,760
objective

552
00:20:09,760 --> 00:20:13,440
that you're trying to target and coders

553
00:20:13,440 --> 00:20:15,360
um this is the presentation that you're

554
00:20:15,360 --> 00:20:17,200
pretty much came into a payload

555
00:20:17,200 --> 00:20:20,320
um now encoding something doesn't

556
00:20:20,320 --> 00:20:22,000
necessarily mean like okay i'm

557
00:20:22,000 --> 00:20:23,200
unhackable

558
00:20:23,200 --> 00:20:26,880
like i honestly don't think that there

559
00:20:26,880 --> 00:20:29,360
is such thing as i'm unhackable

560
00:20:29,360 --> 00:20:32,159
but it might give it um an additional

561
00:20:32,159 --> 00:20:34,320
layer of security right event just make

562
00:20:34,320 --> 00:20:36,960
it a little bit harder for them to

563
00:20:36,960 --> 00:20:38,640
be able to track you or notice what

564
00:20:38,640 --> 00:20:40,320
you're doing or notice that this is you

565
00:20:40,320 --> 00:20:42,960
know like a reverse shell

566
00:20:42,960 --> 00:20:44,720
and then there is another module called

567
00:20:44,720 --> 00:20:46,240
no not which

568
00:20:46,240 --> 00:20:49,360
stands for no operators um basically a

569
00:20:49,360 --> 00:20:51,679
no operator is an operator that does

570
00:20:51,679 --> 00:20:52,960
nothing

571
00:20:52,960 --> 00:20:55,200
um and why would we want an operator

572
00:20:55,200 --> 00:20:56,720
that does nothing

573
00:20:56,720 --> 00:20:59,520
well these are commonly used for example

574
00:20:59,520 --> 00:21:00,400
um

575
00:21:00,400 --> 00:21:03,919
for memory alignment um

576
00:21:03,919 --> 00:21:05,840
if you want to avoid a particular

577
00:21:05,840 --> 00:21:07,280
instruction there are certain

578
00:21:07,280 --> 00:21:09,919
programming languages that they don't

579
00:21:09,919 --> 00:21:12,559
allow you to use blank spaces so that's

580
00:21:12,559 --> 00:21:13,440
when you use an

581
00:21:13,440 --> 00:21:15,600
operator and these are these are pretty

582
00:21:15,600 --> 00:21:17,840
pretty common when you're

583
00:21:17,840 --> 00:21:21,439
working with buffer overflows

584
00:21:22,640 --> 00:21:25,520
msf venom um it's a tool that allows

585
00:21:25,520 --> 00:21:27,679
users to generate payloads and encode

586
00:21:27,679 --> 00:21:28,480
them

587
00:21:28,480 --> 00:21:31,600
so the advantages of msf nmr it's one

588
00:21:31,600 --> 00:21:32,400
single tool

589
00:21:32,400 --> 00:21:36,480
i remember before 2015 um

590
00:21:36,480 --> 00:21:38,480
there were two separate separate tools

591
00:21:38,480 --> 00:21:39,520
one of them was called

592
00:21:39,520 --> 00:21:43,280
msf payload and the other one msfn code

593
00:21:43,280 --> 00:21:45,760
so after 2015 they just kind of won the

594
00:21:45,760 --> 00:21:46,320
loop

595
00:21:46,320 --> 00:21:50,400
up in just one standardized command line

596
00:21:50,400 --> 00:21:52,240
option so it's just like a typical

597
00:21:52,240 --> 00:21:55,440
terminal that you always see in linux

598
00:21:55,440 --> 00:21:59,200
increase the speed so it's a lot quicker

599
00:21:59,200 --> 00:22:02,400
than it used to be so these are you know

600
00:22:02,400 --> 00:22:03,760
like for those of you that are not

601
00:22:03,760 --> 00:22:05,600
familiar with msn venom these are the

602
00:22:05,600 --> 00:22:07,919
type of payloads that i

603
00:22:07,919 --> 00:22:10,320
you would normally get to see this is

604
00:22:10,320 --> 00:22:12,080
one of my favorites because uh

605
00:22:12,080 --> 00:22:14,640
so i have this friend that i always like

606
00:22:14,640 --> 00:22:15,760
joke with and just

607
00:22:15,760 --> 00:22:18,720
you know like go like hey there's a you

608
00:22:18,720 --> 00:22:19,440
know like

609
00:22:19,440 --> 00:22:21,919
there's an msf and a payload for me to

610
00:22:21,919 --> 00:22:23,919
you know like remote it to your iphone

611
00:22:23,919 --> 00:22:27,280
and anyway

612
00:22:27,280 --> 00:22:29,039
so i've tried the android one i've

613
00:22:29,039 --> 00:22:30,480
tested it

614
00:22:30,480 --> 00:22:32,960
and it's really cool so but you like if

615
00:22:32,960 --> 00:22:34,640
you're familiar with linux you

616
00:22:34,640 --> 00:22:35,760
you're gonna have a really good

617
00:22:35,760 --> 00:22:37,520
understanding of how to you know like

618
00:22:37,520 --> 00:22:39,280
navigate and browse through the folders

619
00:22:39,280 --> 00:22:42,320
so it's a lot of fun

620
00:22:42,960 --> 00:22:45,039
another thing that i didn't mention i

621
00:22:45,039 --> 00:22:46,640
don't like i said i don't want to use

622
00:22:46,640 --> 00:22:47,120
the word

623
00:22:47,120 --> 00:22:49,679
toxic but i've noticed that there's a

624
00:22:49,679 --> 00:22:51,520
lot of you know like oh i'm such a

625
00:22:51,520 --> 00:22:52,240
hacker

626
00:22:52,240 --> 00:22:56,000
like you know like i use cali and i've

627
00:22:56,000 --> 00:22:57,440
heard a lot of you know like i don't

628
00:22:57,440 --> 00:23:00,400
want to use the word hate again

629
00:23:00,400 --> 00:23:02,400
but people just criticizing other people

630
00:23:02,400 --> 00:23:04,640
for using kali

631
00:23:04,640 --> 00:23:07,280
um what is the right operating system to

632
00:23:07,280 --> 00:23:08,080
use

633
00:23:08,080 --> 00:23:11,200
whatever you feel comfortable with so i

634
00:23:11,200 --> 00:23:13,520
personally feel comfortable using cali

635
00:23:13,520 --> 00:23:15,039
but a lot of people just like using

636
00:23:15,039 --> 00:23:16,720
power better

637
00:23:16,720 --> 00:23:19,120
or um you know like there's other people

638
00:23:19,120 --> 00:23:20,480
who go like i just rather

639
00:23:20,480 --> 00:23:22,480
download the pen testing framework to

640
00:23:22,480 --> 00:23:24,320
whatever linux distribution i'm using

641
00:23:24,320 --> 00:23:26,000
because that's just me like i'd rather

642
00:23:26,000 --> 00:23:27,679
add an existing

643
00:23:27,679 --> 00:23:29,360
functionality to something that i

644
00:23:29,360 --> 00:23:30,960
already have instead of over

645
00:23:30,960 --> 00:23:32,000
complicating things

646
00:23:32,000 --> 00:23:35,360
and that's something really valid um

647
00:23:35,360 --> 00:23:37,520
so the payloads that i most commonly use

648
00:23:37,520 --> 00:23:39,600
i should have put most commonly used by

649
00:23:39,600 --> 00:23:40,000
me

650
00:23:40,000 --> 00:23:41,679
this is not most commonly used by the

651
00:23:41,679 --> 00:23:43,120
community but those are

652
00:23:43,120 --> 00:23:48,200
pretty popular so this is the way you do

653
00:23:48,200 --> 00:23:51,200
woodcreated.elf

654
00:23:51,360 --> 00:23:53,600
why because you know like most linux

655
00:23:53,600 --> 00:23:55,440
distribution are going are really not

656
00:23:55,440 --> 00:23:56,720
going to give you a lot of trouble if

657
00:23:56,720 --> 00:24:00,159
you want to run a python code

658
00:24:00,159 --> 00:24:01,760
that's nice and all but how do i

659
00:24:01,760 --> 00:24:03,919
escalate privileges so i kind of have to

660
00:24:03,919 --> 00:24:04,640
give like a

661
00:24:04,640 --> 00:24:08,240
long intro

662
00:24:08,720 --> 00:24:11,200
so linux really escalation activity like

663
00:24:11,200 --> 00:24:12,880
i mentioned before

664
00:24:12,880 --> 00:24:15,440
this is not a comprehensive guide this

665
00:24:15,440 --> 00:24:16,720
is just

666
00:24:16,720 --> 00:24:18,799
like the tip of the iceberg or the

667
00:24:18,799 --> 00:24:20,400
things that are more

668
00:24:20,400 --> 00:24:23,039
like easier to notice whenever you

669
00:24:23,039 --> 00:24:23,600
gather

670
00:24:23,600 --> 00:24:25,520
your first and you know like initial

671
00:24:25,520 --> 00:24:27,440
shell so you have to know your

672
00:24:27,440 --> 00:24:28,799
distribution type

673
00:24:28,799 --> 00:24:31,840
i used to say like okay linux is

674
00:24:31,840 --> 00:24:34,240
like pretty much like matthew

675
00:24:34,240 --> 00:24:35,520
mcconaughey or like

676
00:24:35,520 --> 00:24:37,760
hillary duff movies like using one

677
00:24:37,760 --> 00:24:39,279
you've seen them all

678
00:24:39,279 --> 00:24:42,720
not true so um

679
00:24:42,720 --> 00:24:44,480
applications and services currently

680
00:24:44,480 --> 00:24:45,840
running because you want to know what

681
00:24:45,840 --> 00:24:47,039
you're fighting against

682
00:24:47,039 --> 00:24:48,559
or you want to know if there is an

683
00:24:48,559 --> 00:24:50,159
application that is currently out of

684
00:24:50,159 --> 00:24:50,880
date

685
00:24:50,880 --> 00:24:52,799
or that could have an exploit that you

686
00:24:52,799 --> 00:24:56,559
can run or a very common vulnerability

687
00:24:56,559 --> 00:25:00,400
weak file permissions um

688
00:25:00,400 --> 00:25:02,240
so here's the interesting part about

689
00:25:02,240 --> 00:25:03,600
weak file permissions

690
00:25:03,600 --> 00:25:05,840
in linux everything is a file a folder

691
00:25:05,840 --> 00:25:07,760
is a file

692
00:25:07,760 --> 00:25:11,919
um you know like a directory is a file

693
00:25:11,919 --> 00:25:16,240
a user is a file a file is a file anyway

694
00:25:16,240 --> 00:25:19,679
so cron jobs

695
00:25:19,679 --> 00:25:22,159
configuration files if we're able to

696
00:25:22,159 --> 00:25:23,039
write

697
00:25:23,039 --> 00:25:24,960
back into going a little bit back into

698
00:25:24,960 --> 00:25:27,200
weak file permissions

699
00:25:27,200 --> 00:25:30,960
if you're able to write into a file

700
00:25:30,960 --> 00:25:32,640
you're good to go you should be able to

701
00:25:32,640 --> 00:25:34,159
write whatever you want

702
00:25:34,159 --> 00:25:36,320
anything you want including a reverse

703
00:25:36,320 --> 00:25:38,080
shell

704
00:25:38,080 --> 00:25:41,120
so for configuration files

705
00:25:41,120 --> 00:25:43,679
a lot of the times when admins are lazy

706
00:25:43,679 --> 00:25:44,400
again it

707
00:25:44,400 --> 00:25:45,840
doesn't necessarily mean that it's going

708
00:25:45,840 --> 00:25:49,440
to happen all the time they might store

709
00:25:49,440 --> 00:25:52,559
credentials they um they might store

710
00:25:52,559 --> 00:25:54,400
hashes

711
00:25:54,400 --> 00:25:56,080
or even if they're really not storing

712
00:25:56,080 --> 00:25:57,520
anything that you would consider

713
00:25:57,520 --> 00:26:00,240
important you know like a configuration

714
00:26:00,240 --> 00:26:02,240
file is really going to give you

715
00:26:02,240 --> 00:26:04,480
a good glimpse of what version you could

716
00:26:04,480 --> 00:26:07,600
potentially be using

717
00:26:08,320 --> 00:26:11,039
something to keep in mind it is possible

718
00:26:11,039 --> 00:26:13,520
to replace a legitimate binaries

719
00:26:13,520 --> 00:26:15,520
with our code as a means of executing

720
00:26:15,520 --> 00:26:17,520
them at a higher permissions level

721
00:26:17,520 --> 00:26:19,440
if a user has permissions to write into

722
00:26:19,440 --> 00:26:20,960
the folder where the binary

723
00:26:20,960 --> 00:26:22,960
is located then the file can be replaced

724
00:26:22,960 --> 00:26:24,559
with a custom payload

725
00:26:24,559 --> 00:26:26,960
so too long didn't read if i'm able to

726
00:26:26,960 --> 00:26:27,760
ride

727
00:26:27,760 --> 00:26:31,039
on it i can write whatever i want

728
00:26:31,039 --> 00:26:32,960
and that includes you know like the code

729
00:26:32,960 --> 00:26:36,640
that would get me everywhere shell

730
00:26:36,720 --> 00:26:39,039
um gathering general information so i'm

731
00:26:39,039 --> 00:26:40,400
really not gonna go through the whole

732
00:26:40,400 --> 00:26:42,320
entire list of commands because a lot of

733
00:26:42,320 --> 00:26:43,600
them

734
00:26:43,600 --> 00:26:45,279
they're just kind of like a dead

735
00:26:45,279 --> 00:26:47,039
giveaway so

736
00:26:47,039 --> 00:26:49,440
here we get to see the kernel version

737
00:26:49,440 --> 00:26:50,559
you know like

738
00:26:50,559 --> 00:26:53,520
which linux flav i did not want to say

739
00:26:53,520 --> 00:26:54,960
flavor because i know that i'm gonna get

740
00:26:54,960 --> 00:26:56,799
a lot of backlash for it but

741
00:26:56,799 --> 00:27:01,279
i meant a version of flavor um hostname

742
00:27:01,279 --> 00:27:02,880
you know like just basically the name of

743
00:27:02,880 --> 00:27:04,480
the computer you're on

744
00:27:04,480 --> 00:27:06,960
at that moment you want to see your

745
00:27:06,960 --> 00:27:08,960
current id

746
00:27:08,960 --> 00:27:12,159
um how the locals i local ips just map

747
00:27:12,159 --> 00:27:13,279
to

748
00:27:13,279 --> 00:27:16,559
you know like physical addresses

749
00:27:16,559 --> 00:27:18,559
you want to see which processes are open

750
00:27:18,559 --> 00:27:19,760
that's what

751
00:27:19,760 --> 00:27:22,720
netstat is for you want to look at your

752
00:27:22,720 --> 00:27:24,799
routing table

753
00:27:24,799 --> 00:27:28,000
um i feel like id and who i am i use are

754
00:27:28,000 --> 00:27:29,440
used interchangeably

755
00:27:29,440 --> 00:27:33,520
i do that sometimes it is a password you

756
00:27:33,520 --> 00:27:34,640
want to look

757
00:27:34,640 --> 00:27:37,840
at you know like who is who are the

758
00:27:37,840 --> 00:27:38,960
current users

759
00:27:38,960 --> 00:27:41,200
or what users are in that particular

760
00:27:41,200 --> 00:27:42,640
machine

761
00:27:42,640 --> 00:27:46,559
and sudo l so sudo commonly stands for

762
00:27:46,559 --> 00:27:48,240
super user do

763
00:27:48,240 --> 00:27:50,960
so just because we don't have i know it

764
00:27:50,960 --> 00:27:51,360
looks

765
00:27:51,360 --> 00:27:53,440
weird that i'm looking that way but um i

766
00:27:53,440 --> 00:27:55,840
have another screen

767
00:27:55,840 --> 00:27:57,200
so what i'm trying to say is just

768
00:27:57,200 --> 00:27:58,640
because you really don't have

769
00:27:58,640 --> 00:28:00,080
permissions

770
00:28:00,080 --> 00:28:03,279
to run something

771
00:28:03,279 --> 00:28:04,480
just because you're not rude doesn't

772
00:28:04,480 --> 00:28:06,080
necessarily mean that you don't have

773
00:28:06,080 --> 00:28:08,000
root permissions right so there might be

774
00:28:08,000 --> 00:28:09,600
certain commands

775
00:28:09,600 --> 00:28:11,279
that you should be able to run that's

776
00:28:11,279 --> 00:28:14,000
rude so what i'm trying to show here is

777
00:28:14,000 --> 00:28:15,600
i'm not entirely sure if you all can see

778
00:28:15,600 --> 00:28:17,360
my screen

779
00:28:17,360 --> 00:28:19,679
doing that pseudo dash l it's going to

780
00:28:19,679 --> 00:28:20,799
tell me

781
00:28:20,799 --> 00:28:24,000
which commands i can run that i could

782
00:28:24,000 --> 00:28:24,880
potentially have

783
00:28:24,880 --> 00:28:27,200
you know like root permissions to and

784
00:28:27,200 --> 00:28:30,000
i'm going to do something as generic

785
00:28:30,000 --> 00:28:33,520
as pseudo

786
00:28:33,600 --> 00:28:37,200
bim i'm choosing bim because it just

787
00:28:37,200 --> 00:28:38,799
the first one that came to my mind i'm

788
00:28:38,799 --> 00:28:40,720
kind of a nano girl here i really don't

789
00:28:40,720 --> 00:28:42,480
use them

790
00:28:42,480 --> 00:28:45,840
i don't even know how to use it

791
00:28:46,159 --> 00:28:49,279
and now i'm going to see my id boom

792
00:28:49,279 --> 00:28:51,840
i'm rude

793
00:28:52,960 --> 00:28:56,080
right so whenever we do a

794
00:28:56,080 --> 00:29:00,080
um pseudo sudo-l we want to get familiar

795
00:29:00,080 --> 00:29:01,919
with all these applications that are

796
00:29:01,919 --> 00:29:02,720
showing us

797
00:29:02,720 --> 00:29:05,760
i mean this is just an example of

798
00:29:05,760 --> 00:29:07,840
standard ones that could you know like

799
00:29:07,840 --> 00:29:09,760
come across as easy

800
00:29:09,760 --> 00:29:11,919
but if it happens to be you know like an

801
00:29:11,919 --> 00:29:13,279
application i've never really heard

802
00:29:13,279 --> 00:29:14,240
about before

803
00:29:14,240 --> 00:29:15,919
you know like most common thing you know

804
00:29:15,919 --> 00:29:17,360
like just like with everything you want

805
00:29:17,360 --> 00:29:19,360
to google what it is

806
00:29:19,360 --> 00:29:24,479
um so let's try with another one

807
00:29:25,600 --> 00:29:30,639
let's do for example um

808
00:29:31,679 --> 00:29:35,919
well anyway i like how everything goes

809
00:29:35,919 --> 00:29:36,399
wrong

810
00:29:36,399 --> 00:29:39,360
when you're trying to present oh here we

811
00:29:39,360 --> 00:29:40,080
are

812
00:29:40,080 --> 00:29:43,679
brute i'm rude again so basically this

813
00:29:43,679 --> 00:29:45,679
is why sudo is something very important

814
00:29:45,679 --> 00:29:46,480
to check

815
00:29:46,480 --> 00:29:50,720
what can you do as a super user so

816
00:29:50,720 --> 00:29:52,559
world writable directories and world

817
00:29:52,559 --> 00:29:54,720
writable files

818
00:29:54,720 --> 00:29:56,240
the reason why you want to look at world

819
00:29:56,240 --> 00:29:57,840
writable directories is because

820
00:29:57,840 --> 00:29:59,600
you want to be able to find a safe

821
00:29:59,600 --> 00:30:01,120
location for you to copy

822
00:30:01,120 --> 00:30:03,840
stuff if you want to import or you know

823
00:30:03,840 --> 00:30:04,799
like pull

824
00:30:04,799 --> 00:30:08,320
certain tools from your our computer

825
00:30:08,320 --> 00:30:11,039
into a linux location you want to have

826
00:30:11,039 --> 00:30:12,559
you want to be able to hide a folder

827
00:30:12,559 --> 00:30:15,360
where you can safely copy them to

828
00:30:15,360 --> 00:30:17,440
and world writable files like i was

829
00:30:17,440 --> 00:30:18,480
mentioning

830
00:30:18,480 --> 00:30:20,240
i should be able to write on it whatever

831
00:30:20,240 --> 00:30:23,039
i want including a reverse shell

832
00:30:23,039 --> 00:30:25,360
um checking for unmounted file systems

833
00:30:25,360 --> 00:30:27,039
because there is a way to you know like

834
00:30:27,039 --> 00:30:29,520
exclude those

835
00:30:29,520 --> 00:30:32,559
and these two first commands are pretty

836
00:30:32,559 --> 00:30:34,320
much for looking at all the packages

837
00:30:34,320 --> 00:30:37,039
that are installed

838
00:30:37,039 --> 00:30:39,039
and here which processes are running as

839
00:30:39,039 --> 00:30:40,399
root

840
00:30:40,399 --> 00:30:42,799
uh and here you wanna see what is

841
00:30:42,799 --> 00:30:45,039
currently installed in

842
00:30:45,039 --> 00:30:47,919
the html you know like folder in case

843
00:30:47,919 --> 00:30:49,200
there is

844
00:30:49,200 --> 00:30:51,039
a web application that is currently

845
00:30:51,039 --> 00:30:53,279
running

846
00:30:53,279 --> 00:30:55,840
so let's see for example what do i have

847
00:30:55,840 --> 00:30:57,519
in here

848
00:30:57,519 --> 00:30:58,960
i don't really think i have anything

849
00:30:58,960 --> 00:31:01,440
that interesting

850
00:31:01,440 --> 00:31:05,120
oh well

851
00:31:05,120 --> 00:31:06,960
and in here this last command this is

852
00:31:06,960 --> 00:31:08,480
going to help you find all the

853
00:31:08,480 --> 00:31:12,320
um suitable files

854
00:31:14,159 --> 00:31:17,120
oh the lazy way so linux smart

855
00:31:17,120 --> 00:31:18,960
enumerator is a script that will show

856
00:31:18,960 --> 00:31:20,559
you relevant information about the

857
00:31:20,559 --> 00:31:22,559
security of the local linux system

858
00:31:22,559 --> 00:31:24,799
and it also offers levels of verbosity

859
00:31:24,799 --> 00:31:26,399
so you can control how much information

860
00:31:26,399 --> 00:31:27,519
you see like

861
00:31:27,519 --> 00:31:29,200
you don't want it to start speeding

862
00:31:29,200 --> 00:31:30,559
random information

863
00:31:30,559 --> 00:31:33,120
you want to really really understand

864
00:31:33,120 --> 00:31:34,880
what is going on like

865
00:31:34,880 --> 00:31:37,039
what is the point of me looking at the

866
00:31:37,039 --> 00:31:38,880
files that i can run and all the

867
00:31:38,880 --> 00:31:41,360
existing users that are there

868
00:31:41,360 --> 00:31:43,600
i mean if it doesn't really mean

869
00:31:43,600 --> 00:31:45,679
anything to me like if i'm not really

870
00:31:45,679 --> 00:31:47,360
able to understand what i'm

871
00:31:47,360 --> 00:31:52,080
what i'm supposed to do with them so

872
00:31:55,840 --> 00:32:00,080
this is just a very generic example

873
00:32:00,080 --> 00:32:03,600
of how the command works

874
00:32:07,440 --> 00:32:08,880
just kind of running it from the

875
00:32:08,880 --> 00:32:11,440
background

876
00:32:13,039 --> 00:32:16,480
terrible terrible linux terminal

877
00:32:16,480 --> 00:32:18,159
so it's going to start spitting up a

878
00:32:18,159 --> 00:32:21,039
bunch of information

879
00:32:24,320 --> 00:32:28,240
so i'm here um just root have mail

880
00:32:28,240 --> 00:32:31,600
um just what can

881
00:32:31,600 --> 00:32:34,879
can we read into it

882
00:32:36,080 --> 00:32:39,279
what groups i'm added to so this is just

883
00:32:39,279 --> 00:32:40,799
like the typical information that it

884
00:32:40,799 --> 00:32:43,840
would look like

885
00:32:45,039 --> 00:32:46,960
so you know like another thing to do is

886
00:32:46,960 --> 00:32:48,720
find a functional way to transfer this

887
00:32:48,720 --> 00:32:49,360
file

888
00:32:49,360 --> 00:32:50,960
you can do it through you know like

889
00:32:50,960 --> 00:32:52,799
simple http server

890
00:32:52,799 --> 00:32:55,600
um like i said it might not always be in

891
00:32:55,600 --> 00:32:56,000
um

892
00:32:56,000 --> 00:32:57,840
you know like enabled or available but

893
00:32:57,840 --> 00:33:00,559
this is just something to consider

894
00:33:00,559 --> 00:33:02,559
you have to have a folder where you can

895
00:33:02,559 --> 00:33:04,720
safely write to like if you want to copy

896
00:33:04,720 --> 00:33:06,559
all your stuff you have to find a

897
00:33:06,559 --> 00:33:10,399
location where you can safely land

898
00:33:10,399 --> 00:33:12,559
if you see the 200 status it just means

899
00:33:12,559 --> 00:33:16,080
that it was copied correctly

900
00:33:16,240 --> 00:33:20,640
so this is what it would look like

901
00:33:21,679 --> 00:33:23,519
and this is a user that i created just

902
00:33:23,519 --> 00:33:24,960
because i was testing it

903
00:33:24,960 --> 00:33:29,120
i was born fantastic beasts and where to

904
00:33:29,120 --> 00:33:30,080
find them

905
00:33:30,080 --> 00:33:32,399
kernel exploits so make sure you have a

906
00:33:32,399 --> 00:33:33,679
good understanding of how the

907
00:33:33,679 --> 00:33:35,919
vulnerability is exploited

908
00:33:35,919 --> 00:33:37,679
like if you want to if you wanted to

909
00:33:37,679 --> 00:33:39,039
work the way you wanted to

910
00:33:39,039 --> 00:33:41,360
you just have to understand what is it

911
00:33:41,360 --> 00:33:42,159
trying to do

912
00:33:42,159 --> 00:33:43,919
what is the exploit telling you what is

913
00:33:43,919 --> 00:33:46,480
it trying to accomplish

914
00:33:46,480 --> 00:33:48,799
validate that the exploit words works as

915
00:33:48,799 --> 00:33:49,679
intended

916
00:33:49,679 --> 00:33:53,039
never test it in production change the

917
00:33:53,039 --> 00:33:54,559
code based on your target

918
00:33:54,559 --> 00:33:56,640
source ip directories and ports if

919
00:33:56,640 --> 00:33:58,399
you're lucky this might be

920
00:33:58,399 --> 00:33:59,760
the only things that you might have to

921
00:33:59,760 --> 00:34:02,080
change but i'm pretty sure

922
00:34:02,080 --> 00:34:03,440
that you know like you might have a

923
00:34:03,440 --> 00:34:05,279
missing library you might need to have

924
00:34:05,279 --> 00:34:08,159
another installation on your

925
00:34:08,159 --> 00:34:11,918
local host to be able to run it

926
00:34:11,918 --> 00:34:13,760
look for special instruction site notes

927
00:34:13,760 --> 00:34:15,599
or indications of sections that need to

928
00:34:15,599 --> 00:34:18,399
be modified

929
00:34:18,800 --> 00:34:21,119
honestly you really want to have to you

930
00:34:21,119 --> 00:34:22,480
really want to read the expo

931
00:34:22,480 --> 00:34:25,440
don't just run it blindly or stupidly

932
00:34:25,440 --> 00:34:28,239
you want to understand what it does

933
00:34:28,239 --> 00:34:30,480
um another thing that i forgot to

934
00:34:30,480 --> 00:34:33,040
mention and this is important

935
00:34:33,040 --> 00:34:35,760
make sure well if you're in security

936
00:34:35,760 --> 00:34:36,960
operations

937
00:34:36,960 --> 00:34:39,119
and you notice that somebody is

938
00:34:39,119 --> 00:34:40,639
installing you know like

939
00:34:40,639 --> 00:34:43,359
compiling tools this is something you

940
00:34:43,359 --> 00:34:45,119
want to keep your eyes open for

941
00:34:45,119 --> 00:34:48,079
right so it doesn't necessarily mean

942
00:34:48,079 --> 00:34:49,679
like oh i'm unhackable

943
00:34:49,679 --> 00:34:52,399
no but you want to make it a little bit

944
00:34:52,399 --> 00:34:54,239
more difficult for the attacker don't

945
00:34:54,239 --> 00:34:55,760
make it so easy for them

946
00:34:55,760 --> 00:35:00,000
so keep your eye open your eyes open for

947
00:35:00,000 --> 00:35:03,119
um compiling tools that are installed so

948
00:35:03,119 --> 00:35:04,640
this is something that is really not

949
00:35:04,640 --> 00:35:07,279
recommended

950
00:35:07,440 --> 00:35:12,079
comment your code so yeah

951
00:35:12,079 --> 00:35:14,320
this this goes back to what i was saying

952
00:35:14,320 --> 00:35:15,280
that um

953
00:35:15,280 --> 00:35:17,839
a lot of exploits have normally in

954
00:35:17,839 --> 00:35:20,079
special instructions or like side notes

955
00:35:20,079 --> 00:35:21,040
and

956
00:35:21,040 --> 00:35:22,720
i remember when i was in college one of

957
00:35:22,720 --> 00:35:24,560
my teachers just he used to get really

958
00:35:24,560 --> 00:35:26,240
really upset at me because i never

959
00:35:26,240 --> 00:35:28,000
comment my code he was just like okay i

960
00:35:28,000 --> 00:35:29,280
know what you're doing but

961
00:35:29,280 --> 00:35:31,599
this is just this is not a clean way to

962
00:35:31,599 --> 00:35:33,839
do it

963
00:35:33,839 --> 00:35:36,640
exploit tv um this is an ultimate

964
00:35:36,640 --> 00:35:38,640
archive of exploits and vulnerable

965
00:35:38,640 --> 00:35:40,640
software which is a really good result

966
00:35:40,640 --> 00:35:42,960
resource for penetration testers and

967
00:35:42,960 --> 00:35:44,480
vulnerability researchers

968
00:35:44,480 --> 00:35:46,160
i'm pretty sure that everybody has heard

969
00:35:46,160 --> 00:35:47,599
about it but

970
00:35:47,599 --> 00:35:51,040
just something to throw in there

971
00:35:51,280 --> 00:35:53,839
and basically we can filter through type

972
00:35:53,839 --> 00:35:54,960
of exploit like

973
00:35:54,960 --> 00:35:58,560
local or remote uh you know

974
00:35:58,560 --> 00:36:00,640
remote would be for privilege escalation

975
00:36:00,640 --> 00:36:02,480
like platform

976
00:36:02,480 --> 00:36:05,760
linux windows and mac see this is what

977
00:36:05,760 --> 00:36:06,480
i'm telling you

978
00:36:06,480 --> 00:36:09,520
like even metasploit they try to you

979
00:36:09,520 --> 00:36:10,960
know like excluded

980
00:36:10,960 --> 00:36:12,640
like it's something bad like it just

981
00:36:12,640 --> 00:36:14,160
makes you gain weight or gives you

982
00:36:14,160 --> 00:36:15,760
wrinkles or something

983
00:36:15,760 --> 00:36:18,800
medicine is not bad

984
00:36:18,800 --> 00:36:21,200
okay search floyd um this is an

985
00:36:21,200 --> 00:36:23,839
additional option that we have

986
00:36:23,839 --> 00:36:26,560
um you know like in cali like i said

987
00:36:26,560 --> 00:36:28,240
cali is not a must

988
00:36:28,240 --> 00:36:30,640
like you don't have to specifically use

989
00:36:30,640 --> 00:36:32,400
cali

990
00:36:32,400 --> 00:36:36,960
but um it's just an option that it's out

991
00:36:36,960 --> 00:36:37,760
there

992
00:36:37,760 --> 00:36:41,119
um for example if i use

993
00:36:41,119 --> 00:36:44,000
search floyd

994
00:36:45,280 --> 00:36:46,640
and it's going to give me all kinds of

995
00:36:46,640 --> 00:36:48,880
crazy stuff right

996
00:36:48,880 --> 00:36:51,200
so how many exploits are listed for

997
00:36:51,200 --> 00:36:53,040
apache

998
00:36:53,040 --> 00:36:56,720
tons of them this is really not as

999
00:36:56,720 --> 00:36:59,599
the safest bet to go for because you

1000
00:36:59,599 --> 00:37:01,040
want to make sure that you know like

1001
00:37:01,040 --> 00:37:04,480
your install is up to date

1002
00:37:05,760 --> 00:37:08,079
exploit suggester um this is the time

1003
00:37:08,079 --> 00:37:09,839
with the purpose of detecting security

1004
00:37:09,839 --> 00:37:12,320
deficiencies for given linux kernels

1005
00:37:12,320 --> 00:37:14,720
or you know like linux based machines so

1006
00:37:14,720 --> 00:37:16,560
it provides the following functionality

1007
00:37:16,560 --> 00:37:17,599
which is

1008
00:37:17,599 --> 00:37:19,839
assessing the kernel exposure on

1009
00:37:19,839 --> 00:37:21,760
publicly known exploits

1010
00:37:21,760 --> 00:37:24,480
so this goes back to okay it has to be

1011
00:37:24,480 --> 00:37:26,240
something that it's already publicly

1012
00:37:26,240 --> 00:37:26,720
known

1013
00:37:26,720 --> 00:37:28,160
right so it's really not going to

1014
00:37:28,160 --> 00:37:31,040
protect you for zero day attacks

1015
00:37:31,040 --> 00:37:34,400
um verifying the state of kernel

1016
00:37:34,400 --> 00:37:36,720
hardening security measures so it can

1017
00:37:36,720 --> 00:37:38,240
check for the most of the security

1018
00:37:38,240 --> 00:37:40,720
settings available by your linux kernel

1019
00:37:40,720 --> 00:37:43,359
it verifies not only the kernel compile

1020
00:37:43,359 --> 00:37:45,040
time configurations

1021
00:37:45,040 --> 00:37:47,920
but also verifies the runtime settings

1022
00:37:47,920 --> 00:37:49,119
giving a more complete picture of

1023
00:37:49,119 --> 00:37:50,720
security posture

1024
00:37:50,720 --> 00:37:53,359
so it's just going to basically let you

1025
00:37:53,359 --> 00:37:55,359
know if there are any settings that

1026
00:37:55,359 --> 00:37:57,359
would be out of the ordinary or would

1027
00:37:57,359 --> 00:38:00,880
expose you a little bit more

1028
00:38:01,680 --> 00:38:03,280
this is something that my boss said long

1029
00:38:03,280 --> 00:38:05,040
ago like i have three rules never roll

1030
00:38:05,040 --> 00:38:06,800
out or change without testing it never

1031
00:38:06,800 --> 00:38:08,480
testing production and always follow

1032
00:38:08,480 --> 00:38:09,040
rule

1033
00:38:09,040 --> 00:38:11,440
one and two just basically boils down to

1034
00:38:11,440 --> 00:38:14,480
don't do anything stupid

1035
00:38:14,960 --> 00:38:18,320
so as uid files um they're a linux

1036
00:38:18,320 --> 00:38:19,280
feature that gives

1037
00:38:19,280 --> 00:38:21,280
low privileged users the ability to

1038
00:38:21,280 --> 00:38:22,320
execute a file

1039
00:38:22,320 --> 00:38:26,160
as a file owner so

1040
00:38:26,160 --> 00:38:29,119
it stands for said user id for example

1041
00:38:29,119 --> 00:38:31,280
if a file was owned by the word user

1042
00:38:31,280 --> 00:38:33,680
and the city of david said no matter who

1043
00:38:33,680 --> 00:38:36,160
executed the file it would always run

1044
00:38:36,160 --> 00:38:38,480
with word user privileges

1045
00:38:38,480 --> 00:38:41,440
so if it runs if it you know it's a file

1046
00:38:41,440 --> 00:38:43,200
that was owned by root

1047
00:38:43,200 --> 00:38:46,640
and you know like involved from market

1048
00:38:46,640 --> 00:38:48,400
and get to run it

1049
00:38:48,400 --> 00:38:51,839
they're going to have root permissions

1050
00:38:52,880 --> 00:38:54,800
so some of the existing binaries and

1051
00:38:54,800 --> 00:38:56,880
commands can be used by non-root users

1052
00:38:56,880 --> 00:38:58,800
to escalate root access privilege

1053
00:38:58,800 --> 00:39:02,000
if the set uid bit is enabled so there

1054
00:39:02,000 --> 00:39:03,359
are some famous

1055
00:39:03,359 --> 00:39:05,440
linux and unix executable commands that

1056
00:39:05,440 --> 00:39:08,000
can allow privilege escalation

1057
00:39:08,000 --> 00:39:11,200
so if the said uid bid is enabled

1058
00:39:11,200 --> 00:39:13,520
and i run it even though i'm not rude

1059
00:39:13,520 --> 00:39:17,119
i'll get rid just by running it

1060
00:39:17,280 --> 00:39:20,079
so this is a very this is a very generic

1061
00:39:20,079 --> 00:39:21,680
example

1062
00:39:21,680 --> 00:39:24,560
um i was trying to look at it and run it

1063
00:39:24,560 --> 00:39:26,720
and this is what it would look like

1064
00:39:26,720 --> 00:39:28,240
i remember when i was just getting

1065
00:39:28,240 --> 00:39:30,240
started and i was really not familiar

1066
00:39:30,240 --> 00:39:32,240
with linux and i was just like okay no

1067
00:39:32,240 --> 00:39:33,680
no this applications

1068
00:39:33,680 --> 00:39:35,839
make any sense to me it's just like

1069
00:39:35,839 --> 00:39:38,240
spinning data randomly

1070
00:39:38,240 --> 00:39:41,599
so if you see an application that you're

1071
00:39:41,599 --> 00:39:42,880
not familiar with

1072
00:39:42,880 --> 00:39:44,800
and it's a little bit more out of the

1073
00:39:44,800 --> 00:39:48,160
ordinary or it comes with a version

1074
00:39:48,160 --> 00:39:50,079
or you know like a folder that you're

1075
00:39:50,079 --> 00:39:51,680
not familiar with you always want to

1076
00:39:51,680 --> 00:39:54,560
investigate that

1077
00:39:55,599 --> 00:39:59,119
running linux explode to gesture

1078
00:39:59,119 --> 00:40:01,839
on common set uid binaries and this is

1079
00:40:01,839 --> 00:40:05,279
the application popping up again

1080
00:40:06,160 --> 00:40:07,760
so just kind of going a little bit

1081
00:40:07,760 --> 00:40:11,839
through linux permissions really quick

1082
00:40:12,000 --> 00:40:14,319
so linux permissions are broken to user

1083
00:40:14,319 --> 00:40:15,520
group and other

1084
00:40:15,520 --> 00:40:17,839
so user would be like the you know like

1085
00:40:17,839 --> 00:40:20,000
the owner or the person who created the

1086
00:40:20,000 --> 00:40:21,200
file

1087
00:40:21,200 --> 00:40:23,200
group is the group that they belong to

1088
00:40:23,200 --> 00:40:25,040
and other just

1089
00:40:25,040 --> 00:40:28,240
any other person like any other user

1090
00:40:28,240 --> 00:40:29,599
account

1091
00:40:29,599 --> 00:40:33,119
so if the set uid bid is enabled

1092
00:40:33,119 --> 00:40:35,200
instead of having an x in here we're

1093
00:40:35,200 --> 00:40:36,880
gonna have an s

1094
00:40:36,880 --> 00:40:39,760
so doing or math um you know like doing

1095
00:40:39,760 --> 00:40:41,359
our math in here

1096
00:40:41,359 --> 00:40:44,079
uh if we add four two and one it's going

1097
00:40:44,079 --> 00:40:45,599
to give us seven so that's why the

1098
00:40:45,599 --> 00:40:47,599
typical meme of

1099
00:40:47,599 --> 00:40:50,000
g mode seven seven seven you know like

1100
00:40:50,000 --> 00:40:50,839
it's very

1101
00:40:50,839 --> 00:40:54,079
popular so

1102
00:40:54,079 --> 00:40:56,560
this is a reading only area four four

1103
00:40:56,560 --> 00:40:58,240
four

1104
00:40:58,240 --> 00:41:01,920
we go back to here four four four

1105
00:41:01,920 --> 00:41:04,880
r starts r stands for reading you know

1106
00:41:04,880 --> 00:41:06,319
it's funny if they say if you have to

1107
00:41:06,319 --> 00:41:08,160
explain the joke is really not funny

1108
00:41:08,160 --> 00:41:11,759
but i like explaining jokes

1109
00:41:12,160 --> 00:41:13,920
so this is what i did in here just

1110
00:41:13,920 --> 00:41:15,839
identify say identify

1111
00:41:15,839 --> 00:41:18,400
set your id binary look for an existing

1112
00:41:18,400 --> 00:41:20,960
exploit and if there is no expo you just

1113
00:41:20,960 --> 00:41:21,760
basically

1114
00:41:21,760 --> 00:41:23,359
rewrite an existing binary with

1115
00:41:23,359 --> 00:41:25,040
everywhere shell so

1116
00:41:25,040 --> 00:41:26,960
i have write permissions to it and i can

1117
00:41:26,960 --> 00:41:30,079
write whatever i want

1118
00:41:30,079 --> 00:41:32,400
um another thing to do is just find a

1119
00:41:32,400 --> 00:41:36,400
common export for the application

1120
00:41:36,400 --> 00:41:40,160
you can go to exploit db and

1121
00:41:40,160 --> 00:41:45,280
click on it this is the one that i used

1122
00:41:45,280 --> 00:41:48,160
and it's a very simple one so always

1123
00:41:48,160 --> 00:41:51,118
look for an exploit

1124
00:41:52,319 --> 00:41:54,480
edc password is a plain text based

1125
00:41:54,480 --> 00:41:56,319
database that contains information for

1126
00:41:56,319 --> 00:41:58,880
all users accounts on the system

1127
00:41:58,880 --> 00:42:01,359
it's owned by root and it has 644

1128
00:42:01,359 --> 00:42:02,400
permissions

1129
00:42:02,400 --> 00:42:04,560
the file can only be modified by root or

1130
00:42:04,560 --> 00:42:06,240
users with suiter privileges and

1131
00:42:06,240 --> 00:42:09,520
readable by all system users

1132
00:42:09,520 --> 00:42:12,480
so commonly in an ideal world i should

1133
00:42:12,480 --> 00:42:13,599
be able to just

1134
00:42:13,599 --> 00:42:16,640
read it but not write to it but

1135
00:42:16,640 --> 00:42:21,599
um if there is a lazy administrator

1136
00:42:21,599 --> 00:42:24,319
it could also happen that you know like

1137
00:42:24,319 --> 00:42:26,079
wrong permissions could be assigned by

1138
00:42:26,079 --> 00:42:26,960
accident

1139
00:42:26,960 --> 00:42:30,000
so if i'm able to write to it

1140
00:42:30,000 --> 00:42:33,359
i can create a user

1141
00:42:33,760 --> 00:42:37,599
so in here what i'm doing right now is

1142
00:42:37,599 --> 00:42:40,400
i'm assigning a new user i'm creating a

1143
00:42:40,400 --> 00:42:42,319
password for it

1144
00:42:42,319 --> 00:42:44,640
and appending a new line to create it

1145
00:42:44,640 --> 00:42:46,400
just i'm appending a new line to the

1146
00:42:46,400 --> 00:42:49,440
password file

1147
00:42:50,000 --> 00:42:52,160
here it is here's the user that i

1148
00:42:52,160 --> 00:42:53,599
created

1149
00:42:53,599 --> 00:42:55,440
here is just like the hash version of

1150
00:42:55,440 --> 00:42:58,240
the password

1151
00:42:58,240 --> 00:43:01,919
and here's how i'm changing to root

1152
00:43:04,560 --> 00:43:06,880
configuration files when a target is

1153
00:43:06,880 --> 00:43:08,960
running a cms system it is recommended

1154
00:43:08,960 --> 00:43:10,640
to look at the configuration files as

1155
00:43:10,640 --> 00:43:12,880
they often contain sensitive information

1156
00:43:12,880 --> 00:43:16,000
such as credentials

1157
00:43:16,000 --> 00:43:17,920
so even though you're not able to find

1158
00:43:17,920 --> 00:43:19,200
direct credentials

1159
00:43:19,200 --> 00:43:20,880
you want to be able to either find a

1160
00:43:20,880 --> 00:43:22,800
hash or find

1161
00:43:22,800 --> 00:43:26,480
a username or find um like

1162
00:43:26,480 --> 00:43:28,319
a version of the system that is

1163
00:43:28,319 --> 00:43:30,000
currently running or a version of the

1164
00:43:30,000 --> 00:43:32,560
software that is currently there

1165
00:43:32,560 --> 00:43:34,160
it might really not give you a reverse

1166
00:43:34,160 --> 00:43:35,520
shell but it might give you enough

1167
00:43:35,520 --> 00:43:39,119
information for you to gather one

1168
00:43:39,599 --> 00:43:42,240
cron jobs um this is a linux utility

1169
00:43:42,240 --> 00:43:44,720
that is user scheduling tasks that can

1170
00:43:44,720 --> 00:43:47,599
be executed at a specific time

1171
00:43:47,599 --> 00:43:49,839
this type of tasks run with the security

1172
00:43:49,839 --> 00:43:52,480
level of the user who owns them

1173
00:43:52,480 --> 00:43:54,400
the configuration for conjuncts is

1174
00:43:54,400 --> 00:43:56,480
stored in the contable files commonly

1175
00:43:56,480 --> 00:43:57,119
known as

1176
00:43:57,119 --> 00:44:00,800
contacts so this configuration is you

1177
00:44:00,800 --> 00:44:02,640
know like normally created and run by

1178
00:44:02,640 --> 00:44:03,040
root

1179
00:44:03,040 --> 00:44:05,359
if any other user is able to you know

1180
00:44:05,359 --> 00:44:06,240
like run them

1181
00:44:06,240 --> 00:44:09,040
or write to them we should be able to

1182
00:44:09,040 --> 00:44:11,839
however their shell

1183
00:44:11,839 --> 00:44:14,960
i'm looking at my contact in here

1184
00:44:14,960 --> 00:44:18,240
this is me looking at it

1185
00:44:19,040 --> 00:44:20,720
this you know like three entries are

1186
00:44:20,720 --> 00:44:22,880
extremely common daily weekly and

1187
00:44:22,880 --> 00:44:23,440
monthly

1188
00:44:23,440 --> 00:44:26,240
but you want to be able to see what is

1189
00:44:26,240 --> 00:44:27,200
below

1190
00:44:27,200 --> 00:44:29,760
this files is to set up this too you

1191
00:44:29,760 --> 00:44:30,480
know like

1192
00:44:30,480 --> 00:44:33,359
files are very uncommon so if you find

1193
00:44:33,359 --> 00:44:35,119
an entry that you're really not familiar

1194
00:44:35,119 --> 00:44:35,440
with

1195
00:44:35,440 --> 00:44:36,960
you want to be able to see if you can

1196
00:44:36,960 --> 00:44:39,839
read or write to it

1197
00:44:40,079 --> 00:44:43,040
the thing that i did was just um locate

1198
00:44:43,040 --> 00:44:44,880
find the location of it

1199
00:44:44,880 --> 00:44:48,319
so i navigated to that folder

1200
00:44:48,319 --> 00:44:50,000
replace the contents of the file with a

1201
00:44:50,000 --> 00:44:51,760
reverse shell in here

1202
00:44:51,760 --> 00:44:53,839
what i'm doing is just completely wiping

1203
00:44:53,839 --> 00:44:55,359
the file

1204
00:44:55,359 --> 00:44:57,839
and i'm echoing the first line of our

1205
00:44:57,839 --> 00:45:00,000
reverse shell

1206
00:45:00,000 --> 00:45:02,240
and here i'm echoing the second line of

1207
00:45:02,240 --> 00:45:04,560
our reverse shell

1208
00:45:04,560 --> 00:45:08,400
and then i'm just completely writing

1209
00:45:08,560 --> 00:45:11,520
the shell in here since this is already

1210
00:45:11,520 --> 00:45:13,200
scheduled to run at you know like a

1211
00:45:13,200 --> 00:45:15,040
particular time i really didn't really

1212
00:45:15,040 --> 00:45:17,119
have to trigger it and activate it and i

1213
00:45:17,119 --> 00:45:18,960
was already getting

1214
00:45:18,960 --> 00:45:22,800
you know like my listener in here

1215
00:45:22,800 --> 00:45:25,839
so i'm already rude

1216
00:45:25,920 --> 00:45:27,680
this is a reverse shell that i always

1217
00:45:27,680 --> 00:45:29,919
use

1218
00:45:30,319 --> 00:45:32,720
um backups backups with permissions

1219
00:45:32,720 --> 00:45:34,319
missed configurations can contain

1220
00:45:34,319 --> 00:45:36,480
sensitive information such as a private

1221
00:45:36,480 --> 00:45:37,359
key

1222
00:45:37,359 --> 00:45:39,839
uh a private key is used to identify you

1223
00:45:39,839 --> 00:45:40,800
um

1224
00:45:40,800 --> 00:45:42,880
to any server that you're connecting to

1225
00:45:42,880 --> 00:45:45,280
but it must have like a public key store

1226
00:45:45,280 --> 00:45:46,240
into the server

1227
00:45:46,240 --> 00:45:48,640
authorized key so it has to have like

1228
00:45:48,640 --> 00:45:50,400
its matching key otherwise it's really

1229
00:45:50,400 --> 00:45:51,920
not going to work

1230
00:45:51,920 --> 00:45:54,000
um some common directories where backups

1231
00:45:54,000 --> 00:45:55,680
could be find or attempt

1232
00:45:55,680 --> 00:45:58,720
bar and root

1233
00:45:59,119 --> 00:46:01,920
so just kind of showing how it would

1234
00:46:01,920 --> 00:46:04,160
work from my end

1235
00:46:04,160 --> 00:46:08,640
i found permissions to um

1236
00:46:08,640 --> 00:46:14,240
to a private key

1237
00:46:14,240 --> 00:46:17,439
this is what it would look like

1238
00:46:18,880 --> 00:46:22,160
right so here is my private private key

1239
00:46:22,160 --> 00:46:24,000
and all of this section

1240
00:46:24,000 --> 00:46:26,079
from where it says begin just right to

1241
00:46:26,079 --> 00:46:28,400
the end would count as

1242
00:46:28,400 --> 00:46:31,599
a potential private key so if i do

1243
00:46:31,599 --> 00:46:35,119
something like ssh minus i

1244
00:46:35,119 --> 00:46:38,319
c ucu i should be given more

1245
00:46:38,319 --> 00:46:41,599
professional names and then root add

1246
00:46:41,599 --> 00:46:44,960
you know like i'm terrible with this 192

1247
00:46:44,960 --> 00:46:48,000
168 31

1248
00:46:48,000 --> 00:46:50,560
140

1249
00:46:54,839 --> 00:46:59,279
id boom i'm root

1250
00:47:01,280 --> 00:47:03,359
so you have to give it the correct

1251
00:47:03,359 --> 00:47:04,319
permissions

1252
00:47:04,319 --> 00:47:06,640
and you have to run this command and you

1253
00:47:06,640 --> 00:47:08,400
know like as long as you have

1254
00:47:08,400 --> 00:47:10,640
the private key and there is a matching

1255
00:47:10,640 --> 00:47:11,920
public key

1256
00:47:11,920 --> 00:47:14,480
and the target system you should be able

1257
00:47:14,480 --> 00:47:15,760
to have permissions like root

1258
00:47:15,760 --> 00:47:18,079
permissions

1259
00:47:18,079 --> 00:47:19,520
so this is how we give it the correct

1260
00:47:19,520 --> 00:47:22,079
permissions and then we run this command

1261
00:47:22,079 --> 00:47:24,880
and we should be all set

1262
00:47:24,880 --> 00:47:28,160
um additional resources um i know this

1263
00:47:28,160 --> 00:47:30,559
was kind of like a

1264
00:47:30,559 --> 00:47:34,559
weird talk um i'm sorry if i put y'all

1265
00:47:34,559 --> 00:47:36,000
to sleep but this is

1266
00:47:36,000 --> 00:47:37,839
something really interesting like i said

1267
00:47:37,839 --> 00:47:40,079
um

1268
00:47:40,079 --> 00:47:42,160
you know like the privilege escalation

1269
00:47:42,160 --> 00:47:44,160
and deals a lot more steps but i was

1270
00:47:44,160 --> 00:47:46,160
just trying to squish this quiz as much

1271
00:47:46,160 --> 00:47:47,040
as i could

1272
00:47:47,040 --> 00:47:49,359
but uh yeah and if y'all have any

1273
00:47:49,359 --> 00:47:50,480
questions for me

1274
00:47:50,480 --> 00:47:52,319
or you know like you have a good meme to

1275
00:47:52,319 --> 00:47:54,559
share just definitely reach out to me on

1276
00:47:54,559 --> 00:47:55,359
linkedin

1277
00:47:55,359 --> 00:47:58,400
and yeah cool

1278
00:47:58,400 --> 00:48:00,400
well thank you all so much for joining

1279
00:48:00,400 --> 00:48:01,680
me

1280
00:48:01,680 --> 00:48:04,880
so long didn't we sorry

1281
00:48:04,880 --> 00:48:06,960
no no thank you thank you for your your

1282
00:48:06,960 --> 00:48:08,400
time there's a lot of information i want

1283
00:48:08,400 --> 00:48:09,760
to ask you a couple of quick questions

1284
00:48:09,760 --> 00:48:12,000
there weren't any questions in discord

1285
00:48:12,000 --> 00:48:13,839
but you started out with a conversation

1286
00:48:13,839 --> 00:48:15,119
about um

1287
00:48:15,119 --> 00:48:17,520
the security and or it teams being

1288
00:48:17,520 --> 00:48:18,880
offended

1289
00:48:18,880 --> 00:48:22,240
by privilege escalation and i i find

1290
00:48:22,240 --> 00:48:23,839
that interesting because i get that

1291
00:48:23,839 --> 00:48:26,079
attitude sometimes from it teams it's

1292
00:48:26,079 --> 00:48:28,319
like oh you can't do that

1293
00:48:28,319 --> 00:48:30,559
well actually and you i think your quote

1294
00:48:30,559 --> 00:48:31,520
there was the best

1295
00:48:31,520 --> 00:48:35,280
boom i'm root i do that to people and

1296
00:48:35,280 --> 00:48:35,920
they're like

1297
00:48:35,920 --> 00:48:38,960
you can't do that yeah well this this is

1298
00:48:38,960 --> 00:48:40,800
how the exploit works and this is how we

1299
00:48:40,800 --> 00:48:42,079
wrote to a fall we should have been able

1300
00:48:42,079 --> 00:48:43,599
to get to

1301
00:48:43,599 --> 00:48:46,559
in boom i'm root yeah so what i've

1302
00:48:46,559 --> 00:48:47,599
noticed the most

1303
00:48:47,599 --> 00:48:50,079
backlash on is the use of metasploit

1304
00:48:50,079 --> 00:48:52,160
like they talk like it's just something

1305
00:48:52,160 --> 00:48:53,920
like it's just like murdering puppies or

1306
00:48:53,920 --> 00:48:55,520
something

1307
00:48:55,520 --> 00:48:58,720
no it's not a bad tool just well and i

1308
00:48:58,720 --> 00:48:59,040
see

1309
00:48:59,040 --> 00:49:02,319
cobalt strike that's the at this point

1310
00:49:02,319 --> 00:49:04,079
i see that a great deal when people try

1311
00:49:04,079 --> 00:49:06,400
to land in beacon on our network it's

1312
00:49:06,400 --> 00:49:07,920
my honeypot picks up cobalt strike

1313
00:49:07,920 --> 00:49:09,520
payload so i'm like okay that's

1314
00:49:09,520 --> 00:49:12,480
that's a known issue so anyway i do

1315
00:49:12,480 --> 00:49:14,000
really appreciate your time

1316
00:49:14,000 --> 00:49:17,200
um and your expertise here has been

1317
00:49:17,200 --> 00:49:19,520
invaluable we'll uh we really appreciate

1318
00:49:19,520 --> 00:49:21,280
it we'll reach out thank you melina

1319
00:49:21,280 --> 00:49:25,119
thank you

