1
00:00:13,540 --> 00:00:16,540
yeah so I'm Ryan Wilson I was trying to

2
00:00:16,540 --> 00:00:18,460
do a fancy tech thing here with my

3
00:00:18,460 --> 00:00:19,810
slides it didn't work out so we're gonna

4
00:00:19,810 --> 00:00:21,730
do fallback here I wanted to demo the

5
00:00:21,730 --> 00:00:23,050
cool technology I'm about to talk to you

6
00:00:23,050 --> 00:00:24,520
about but it didn't work quite right so

7
00:00:24,520 --> 00:00:27,599
I'm work for a spotlight cybersecurity

8
00:00:27,599 --> 00:00:30,700
part-time here in local of Augusta

9
00:00:30,700 --> 00:00:33,280
security for a security firm and I've

10
00:00:33,280 --> 00:00:35,710
been playing with these open wrt based

11
00:00:35,710 --> 00:00:37,120
routers for a long time and I wanted to

12
00:00:37,120 --> 00:00:38,890
share with you some cool things you can

13
00:00:38,890 --> 00:00:40,570
do to help as a sort of a training

14
00:00:40,570 --> 00:00:43,320
platform is a customized security sensor

15
00:00:43,320 --> 00:00:45,690
my plan is to sort of walk you through

16
00:00:45,690 --> 00:00:48,460
why care about this like why is this

17
00:00:48,460 --> 00:00:49,120
important

18
00:00:49,120 --> 00:00:49,960
kind of give you a little history

19
00:00:49,960 --> 00:00:52,960
background about where how we ended up

20
00:00:52,960 --> 00:00:55,420
with open wrt today I'm gonna walk you

21
00:00:55,420 --> 00:00:56,589
through how you would go about

22
00:00:56,589 --> 00:00:58,089
installing it if you wanted to try it

23
00:00:58,089 --> 00:01:00,460
out at home we'll do a really quick tour

24
00:01:00,460 --> 00:01:02,170
around open wrt because it's its own

25
00:01:02,170 --> 00:01:03,699
linux distribution so it's a little

26
00:01:03,699 --> 00:01:05,199
different from other distributions

27
00:01:05,199 --> 00:01:06,700
you've made play with that's probably

28
00:01:06,700 --> 00:01:07,990
about the first half the talk in the

29
00:01:07,990 --> 00:01:09,310
second half of the talk I just want to

30
00:01:09,310 --> 00:01:11,350
kind of run through all of the different

31
00:01:11,350 --> 00:01:14,229
use cases that I've tried and to sort of

32
00:01:14,229 --> 00:01:15,909
inspire you as to how you could use this

33
00:01:15,909 --> 00:01:19,120
yourself so why should you care about

34
00:01:19,120 --> 00:01:22,390
this well my father-in-law cut out an

35
00:01:22,390 --> 00:01:23,920
article from the Augusta Chronicle a

36
00:01:23,920 --> 00:01:25,900
couple weeks ago for me that said

37
00:01:25,900 --> 00:01:28,540
experience is vital in the cyber job

38
00:01:28,540 --> 00:01:30,940
hunt the dusty university apparently did

39
00:01:30,940 --> 00:01:33,090
a survey here in the Augusta area and

40
00:01:33,090 --> 00:01:35,500
the firm's that they interviewed said

41
00:01:35,500 --> 00:01:37,630
that experience was way more important

42
00:01:37,630 --> 00:01:39,610
than your college degrees and

43
00:01:39,610 --> 00:01:40,780
certifications if you can read the

44
00:01:40,780 --> 00:01:42,460
little fine print there well that's

45
00:01:42,460 --> 00:01:44,380
really good to know you know that that's

46
00:01:44,380 --> 00:01:46,210
what's going to be so important but the

47
00:01:46,210 --> 00:01:47,650
question is where am I going to get that

48
00:01:47,650 --> 00:01:48,970
experience you know if I'm a college

49
00:01:48,970 --> 00:01:50,320
student or even just entry-level

50
00:01:50,320 --> 00:01:52,750
position how am I gonna get better at

51
00:01:52,750 --> 00:01:54,760
this I just attended the talk with Don

52
00:01:54,760 --> 00:01:56,620
Murdock and he said you can't buy skill

53
00:01:56,620 --> 00:01:58,720
so if we can't buy it where are we gonna

54
00:01:58,720 --> 00:02:01,360
get it from so we need these essentially

55
00:02:01,360 --> 00:02:04,150
we need these enterprise skills that are

56
00:02:04,150 --> 00:02:06,250
you know typically cost beaucoup bucks

57
00:02:06,250 --> 00:02:07,360
except you know if you're in that

58
00:02:07,360 --> 00:02:08,769
position you know you're on this beer

59
00:02:08,769 --> 00:02:11,409
budget am I gonna be able to buy that

60
00:02:11,409 --> 00:02:13,450
how am I gonna get to do this so enter

61
00:02:13,450 --> 00:02:17,250
these Soho embedded system routers the

62
00:02:17,250 --> 00:02:19,420
wrt54g the links this one was probably

63
00:02:19,420 --> 00:02:21,609
one of the early popular ones released

64
00:02:21,609 --> 00:02:24,639
in December 2002 and what the hardware

65
00:02:24,639 --> 00:02:26,230
hacking community sort of discovered is

66
00:02:26,230 --> 00:02:27,250
hey this thing runs

67
00:02:27,250 --> 00:02:29,920
Linux under the hood and yeah you know

68
00:02:29,920 --> 00:02:31,750
that means it's got the source code is

69
00:02:31,750 --> 00:02:33,130
covered by the GPL so they kind of

70
00:02:33,130 --> 00:02:35,110
pressured Linksys to release the source

71
00:02:35,110 --> 00:02:36,970
code and they did and the hardware

72
00:02:36,970 --> 00:02:38,440
hackers were like okay cool now we can

73
00:02:38,440 --> 00:02:39,940
do some really neat stuff with this

74
00:02:39,940 --> 00:02:43,150
hardware I don't remember exactly what

75
00:02:43,150 --> 00:02:45,840
date I bought my wrt54g but I got in

76
00:02:45,840 --> 00:02:48,370
sometime in that year or two after that

77
00:02:48,370 --> 00:02:51,100
flashed it with the custom firmware and

78
00:02:51,100 --> 00:02:53,560
have used it for a really long time the

79
00:02:53,560 --> 00:02:55,450
the firmware is open-source these at

80
00:02:55,450 --> 00:02:57,280
these Hardware actually has some really

81
00:02:57,280 --> 00:02:59,860
interesting capabilities it's got this

82
00:02:59,860 --> 00:03:02,230
built-in Ethernet switch it's based on

83
00:03:02,230 --> 00:03:04,660
flash memory which is actually really

84
00:03:04,660 --> 00:03:06,220
handy because that means there's no

85
00:03:06,220 --> 00:03:09,100
moving parts in here no fans no hard

86
00:03:09,100 --> 00:03:11,350
drives very little that can go that

87
00:03:11,350 --> 00:03:13,690
could break along the way so it's a it's

88
00:03:13,690 --> 00:03:15,610
a handy little embedded system box that

89
00:03:15,610 --> 00:03:17,590
we can fully customize and you can still

90
00:03:17,590 --> 00:03:19,420
get them really cheap I bought a couple

91
00:03:19,420 --> 00:03:21,850
of these links to see a 45 hundreds for

92
00:03:21,850 --> 00:03:23,890
the talk just and you'll see them in the

93
00:03:23,890 --> 00:03:25,840
show up here but they are $40 to buy Oh

94
00:03:25,840 --> 00:03:27,880
refurbished unit on Amazon right now

95
00:03:27,880 --> 00:03:29,980
these have the same programmable

96
00:03:29,980 --> 00:03:31,269
Ethernet switch and they've got a pretty

97
00:03:31,269 --> 00:03:33,640
good chipset that supports Wi-Fi well

98
00:03:33,640 --> 00:03:34,810
which is important for a couple of the

99
00:03:34,810 --> 00:03:37,180
use cases I'll share in just a minute my

100
00:03:37,180 --> 00:03:40,200
go-to open wrt box was this tp-link

101
00:03:40,200 --> 00:03:42,730
edition because it was only $20 this was

102
00:03:42,730 --> 00:03:43,720
dirt cheap and every now and then on

103
00:03:43,720 --> 00:03:45,880
Amazon it would drop to ten dollars so

104
00:03:45,880 --> 00:03:47,049
this was a really great thing however

105
00:03:47,049 --> 00:03:49,450
the hardware is kind of limited is the

106
00:03:49,450 --> 00:03:51,160
memory is pretty low on it I wouldn't

107
00:03:51,160 --> 00:03:53,440
recommend it for starting today but the

108
00:03:53,440 --> 00:03:55,299
but this was what you know they used to

109
00:03:55,299 --> 00:03:56,860
spend just a you know 20 bucks to kind

110
00:03:56,860 --> 00:03:58,930
of get one of these boxes so contrast

111
00:03:58,930 --> 00:04:01,030
that with the Raspberry Pi a very

112
00:04:01,030 --> 00:04:03,100
capable customizable platform but

113
00:04:03,100 --> 00:04:04,600
typically you're going to be spending at

114
00:04:04,600 --> 00:04:06,070
least fifty five dollars to get like a

115
00:04:06,070 --> 00:04:07,570
whole kit and that doesn't include the

116
00:04:07,570 --> 00:04:10,170
memory card to kind of get started the

117
00:04:10,170 --> 00:04:12,400
this doesn't have an Ethernet switch you

118
00:04:12,400 --> 00:04:14,019
just have a single single Ethernet ports

119
00:04:14,019 --> 00:04:16,089
you got a supplement that and at least

120
00:04:16,089 --> 00:04:17,890
the Raspberry Pi units I've played with

121
00:04:17,890 --> 00:04:20,829
the I used Broadcom chipsets which for

122
00:04:20,829 --> 00:04:22,270
some of the wireless use cases I'm going

123
00:04:22,270 --> 00:04:25,000
to talk about is doesn't work quite as

124
00:04:25,000 --> 00:04:26,890
well I just haven't gotten it haven't

125
00:04:26,890 --> 00:04:28,780
had as good support with the Broadcom

126
00:04:28,780 --> 00:04:33,729
stuff so after the wrt54g came out a

127
00:04:33,729 --> 00:04:36,070
couple of custom firmwares popped up

128
00:04:36,070 --> 00:04:38,200
dd-wrt was probably one of the most

129
00:04:38,200 --> 00:04:40,599
popular ones another very similar one

130
00:04:40,599 --> 00:04:40,900
was to

131
00:04:40,900 --> 00:04:42,699
mate oh and while you could customize

132
00:04:42,699 --> 00:04:45,570
them pretty extensively you were

133
00:04:45,570 --> 00:04:47,740
relatively limited in to sort of using

134
00:04:47,740 --> 00:04:49,030
their web interface and some of the

135
00:04:49,030 --> 00:04:51,060
options that they put under the hood

136
00:04:51,060 --> 00:04:54,100
open wrt came around a little bit later

137
00:04:54,100 --> 00:04:56,080
and introduced the ability of putting a

138
00:04:56,080 --> 00:04:58,090
whole flash file system on the flash

139
00:04:58,090 --> 00:04:59,710
memory so that you could completely

140
00:04:59,710 --> 00:05:01,479
customize it and use it more or less

141
00:05:01,479 --> 00:05:04,479
like you use the Linux box that you know

142
00:05:04,479 --> 00:05:06,130
of any other distribution so you have a

143
00:05:06,130 --> 00:05:08,080
full file system you can put files on it

144
00:05:08,080 --> 00:05:09,400
and it actually just saves it off into

145
00:05:09,400 --> 00:05:11,949
flash memory along the way just because

146
00:05:11,949 --> 00:05:14,350
it's relevant because if you go looking

147
00:05:14,350 --> 00:05:15,940
for documentation you'll also see this

148
00:05:15,940 --> 00:05:18,280
other one lead unfortunately the open

149
00:05:18,280 --> 00:05:20,440
wrt developers had a little bit of a

150
00:05:20,440 --> 00:05:22,539
dispute a few years ago about some

151
00:05:22,539 --> 00:05:24,130
practices in the way they handle the

152
00:05:24,130 --> 00:05:26,139
project and accept a new code and there

153
00:05:26,139 --> 00:05:28,510
was a fork they forked off to this lead

154
00:05:28,510 --> 00:05:30,520
project for a little while unfortunately

155
00:05:30,520 --> 00:05:32,380
it's Bandung they finally resolve their

156
00:05:32,380 --> 00:05:34,180
differences they've reunited under the

157
00:05:34,180 --> 00:05:36,849
open wrt name but you will still see a

158
00:05:36,849 --> 00:05:38,590
number of blog posts even if you go to

159
00:05:38,590 --> 00:05:39,940
my web site you'll see even one of the

160
00:05:39,940 --> 00:05:41,169
pieces of code I put out still

161
00:05:41,169 --> 00:05:42,940
references this lead because that was

162
00:05:42,940 --> 00:05:44,620
where active development happened for a

163
00:05:44,620 --> 00:05:47,620
while and just as a side reference this

164
00:05:47,620 --> 00:05:49,810
icon over here comes from Asus Merlyn

165
00:05:49,810 --> 00:05:52,870
the Asus routers are not typically very

166
00:05:52,870 --> 00:05:55,680
well supported with open wrt there is a

167
00:05:55,680 --> 00:05:58,659
another sort of custom vendor a custom

168
00:05:58,659 --> 00:06:01,030
firmware called Asus Merlyn that you can

169
00:06:01,030 --> 00:06:01,960
download if you have one of those

170
00:06:01,960 --> 00:06:05,740
devices instead I got started with this

171
00:06:05,740 --> 00:06:07,240
like I mentioned back a while I still

172
00:06:07,240 --> 00:06:12,430
have my wrt54gl and my 54g that I had I

173
00:06:12,430 --> 00:06:14,470
ran it literally until the capacitors

174
00:06:14,470 --> 00:06:16,720
burst on it it was sitting on my desk

175
00:06:16,720 --> 00:06:19,270
and the that I heard this little buzzing

176
00:06:19,270 --> 00:06:20,710
sound I saw the light starting to

177
00:06:20,710 --> 00:06:22,659
flicker and over a period of weeks that

178
00:06:22,659 --> 00:06:24,130
got worse and then finally like it just

179
00:06:24,130 --> 00:06:25,090
wouldn't turn on anymore

180
00:06:25,090 --> 00:06:26,740
I mean so these things work really well

181
00:06:26,740 --> 00:06:28,960
and they've been work horses for the

182
00:06:28,960 --> 00:06:30,789
kinds of purposes I use them before and

183
00:06:30,789 --> 00:06:33,490
they this still works for me at home as

184
00:06:33,490 --> 00:06:35,409
a Ethernet bridge when I wore this

185
00:06:35,409 --> 00:06:37,599
bridge when I need it periodically so

186
00:06:37,599 --> 00:06:40,419
this this doesn't this is a really cool

187
00:06:40,419 --> 00:06:41,800
I set of opportunities but there are

188
00:06:41,800 --> 00:06:43,539
some trade-offs and one of the things I

189
00:06:43,539 --> 00:06:44,530
want to warn you if you want to start

190
00:06:44,530 --> 00:06:45,909
out with this is you really have to pay

191
00:06:45,909 --> 00:06:47,680
attention to the manufacturing model

192
00:06:47,680 --> 00:06:50,610
numbers and version numbers so

193
00:06:50,610 --> 00:06:52,900
unfortunately I assume it's because on

194
00:06:52,900 --> 00:06:53,900
Amazon you

195
00:06:53,900 --> 00:06:55,850
once a model number gets popular and

196
00:06:55,850 --> 00:06:57,650
gets good reviews you know the company

197
00:06:57,650 --> 00:06:58,850
doesn't want to lose that so they'll

198
00:06:58,850 --> 00:07:00,710
introduce a new version hopefully to

199
00:07:00,710 --> 00:07:02,270
save them money or a new price point and

200
00:07:02,270 --> 00:07:04,039
they will completely change the

201
00:07:04,039 --> 00:07:06,740
underlying hardware but keep the model

202
00:07:06,740 --> 00:07:08,479
number exactly the same and sometimes

203
00:07:08,479 --> 00:07:10,789
even the outside of the case is that we

204
00:07:10,789 --> 00:07:12,680
the same and so if you look on the

205
00:07:12,680 --> 00:07:14,150
underside of these this is a picture

206
00:07:14,150 --> 00:07:15,710
from understand mine you'll see that

207
00:07:15,710 --> 00:07:17,330
there's this place where it's got the

208
00:07:17,330 --> 00:07:18,350
model number and there's a little

209
00:07:18,350 --> 00:07:20,509
version number there you really have to

210
00:07:20,509 --> 00:07:21,860
pay attention to that you know so that

211
00:07:21,860 --> 00:07:23,660
you don't go to Amazon order the router

212
00:07:23,660 --> 00:07:25,580
you think is supported and then you end

213
00:07:25,580 --> 00:07:26,960
up with the newest and latest and

214
00:07:26,960 --> 00:07:29,240
greatest one which actually is not yet

215
00:07:29,240 --> 00:07:31,550
supported open wrt depends on the

216
00:07:31,550 --> 00:07:33,139
chipsets that are underlying these

217
00:07:33,139 --> 00:07:35,330
devices not the actual model number so

218
00:07:35,330 --> 00:07:37,639
pay attention as you look up which one

219
00:07:37,639 --> 00:07:41,780
you want to try I chose the Lynx is 40

220
00:07:41,780 --> 00:07:43,610
foot EA 4500 because they haven't

221
00:07:43,610 --> 00:07:45,500
updated in a while and both of the

222
00:07:45,500 --> 00:07:46,910
versions that are out on the market are

223
00:07:46,910 --> 00:07:48,440
very well supported right now but

224
00:07:48,440 --> 00:07:49,550
there's a number of others that are like

225
00:07:49,550 --> 00:07:51,560
that as well another challenge is you

226
00:07:51,560 --> 00:07:52,970
get no support you know the companies

227
00:07:52,970 --> 00:07:54,410
don't expect you to do this they want

228
00:07:54,410 --> 00:07:56,360
you to use the stock firmware and while

229
00:07:56,360 --> 00:07:58,520
I think some of them are happy for you

230
00:07:58,520 --> 00:07:59,780
to play with it you are voiding your

231
00:07:59,780 --> 00:08:02,720
warranty and as the chat man page says

232
00:08:02,720 --> 00:08:06,340
if it breaks you get to keep both pieces

233
00:08:06,520 --> 00:08:08,870
another because of that you have to get

234
00:08:08,870 --> 00:08:10,400
you can because you can break them

235
00:08:10,400 --> 00:08:12,169
relatively easily you got to be careful

236
00:08:12,169 --> 00:08:14,060
you know it's very easy to brick these

237
00:08:14,060 --> 00:08:15,830
devices either while flashing it if you

238
00:08:15,830 --> 00:08:17,780
make a mistake or if you configure it

239
00:08:17,780 --> 00:08:19,159
incorrectly sometimes there's a few

240
00:08:19,159 --> 00:08:20,870
weird configuration settings that could

241
00:08:20,870 --> 00:08:22,940
make it inaccessible I've been really

242
00:08:22,940 --> 00:08:24,710
careful because I didn't want to lose

243
00:08:24,710 --> 00:08:25,849
any of my boxes and so I actually

244
00:08:25,849 --> 00:08:28,070
haven't bricked the device yet a hope is

245
00:08:28,070 --> 00:08:29,720
not lost if you do that there's a couple

246
00:08:29,720 --> 00:08:34,120
of failsafe modes there's also a

247
00:08:34,120 --> 00:08:36,229
hardware hackers have discovered that if

248
00:08:36,229 --> 00:08:37,969
you open them up you can solder serial

249
00:08:37,969 --> 00:08:39,740
ports on to the board and flash it that

250
00:08:39,740 --> 00:08:41,360
way I don't have time for that but if

251
00:08:41,360 --> 00:08:42,708
you're interested in that like all this

252
00:08:42,708 --> 00:08:43,820
stuff is within the realm of the

253
00:08:43,820 --> 00:08:47,660
possible newer devices like the EA 4500

254
00:08:47,660 --> 00:08:49,070
that I mentioned actually keep two

255
00:08:49,070 --> 00:08:51,050
firmwares on at all time but if one of

256
00:08:51,050 --> 00:08:52,940
them fails it'll fall back to a known

257
00:08:52,940 --> 00:08:54,470
good ones it's a little safer with some

258
00:08:54,470 --> 00:08:56,750
of these more recent devices but the big

259
00:08:56,750 --> 00:08:59,060
trade-off that I want you to kind of

260
00:08:59,060 --> 00:09:01,010
walk away with is this is about your

261
00:09:01,010 --> 00:09:02,810
time you know you could prepay for

262
00:09:02,810 --> 00:09:04,730
Enterprise convenience and get an

263
00:09:04,730 --> 00:09:06,320
enterprise equipment but if you're

264
00:09:06,320 --> 00:09:07,790
choosing to kind of go this route

265
00:09:07,790 --> 00:09:08,750
essentially because you have more time

266
00:09:08,750 --> 00:09:10,340
than money and so you're gonna end up

267
00:09:10,340 --> 00:09:12,530
spending some more time hacking with it

268
00:09:12,530 --> 00:09:13,700
and trying to work through some problems

269
00:09:13,700 --> 00:09:16,130
that's great for skills building but

270
00:09:16,130 --> 00:09:17,150
just know if you want to get to the end

271
00:09:17,150 --> 00:09:18,680
quickly like this this can usually

272
00:09:18,680 --> 00:09:20,540
usually run into some glitches along the

273
00:09:20,540 --> 00:09:21,680
way I wish I had time to tell you about

274
00:09:21,680 --> 00:09:23,390
all the challenges but just be aware I

275
00:09:23,390 --> 00:09:25,100
said it's really a time money trade-off

276
00:09:25,100 --> 00:09:26,600
I said if you want to play with this

277
00:09:26,600 --> 00:09:28,160
really cool things but it's gonna take

278
00:09:28,160 --> 00:09:31,160
you some time to set it up just a few

279
00:09:31,160 --> 00:09:32,660
other quick notes a run-through I've

280
00:09:32,660 --> 00:09:34,250
heard people complain about some of

281
00:09:34,250 --> 00:09:35,780
these devices running high temperature

282
00:09:35,780 --> 00:09:37,040
because they don't have fans

283
00:09:37,040 --> 00:09:38,780
I've not personally had this problem but

284
00:09:38,780 --> 00:09:40,580
just be on the lookout I've had a few

285
00:09:40,580 --> 00:09:42,290
hardware weirdness things like you've

286
00:09:42,290 --> 00:09:44,210
got enterprise features in these things

287
00:09:44,210 --> 00:09:47,480
like 802 2.1 Q VLANs but there's

288
00:09:47,480 --> 00:09:48,710
sometimes little weirdness like I

289
00:09:48,710 --> 00:09:50,750
setting up a VLAN once and it just was

290
00:09:50,750 --> 00:09:52,220
not working the way that the

291
00:09:52,220 --> 00:09:53,510
configuration said it would and I

292
00:09:53,510 --> 00:09:54,950
finally just had to give up on that and

293
00:09:54,950 --> 00:09:56,990
say okay it's not gonna go they have

294
00:09:56,990 --> 00:09:58,910
pretty small CPUs very limited memory

295
00:09:58,910 --> 00:10:00,830
both flash and RAM so you soon you're

296
00:10:00,830 --> 00:10:02,300
not gonna like run bro on one of these

297
00:10:02,300 --> 00:10:05,090
things in most cases but you can use

298
00:10:05,090 --> 00:10:06,830
them for a number of useful collection

299
00:10:06,830 --> 00:10:08,510
points and then offload it to another

300
00:10:08,510 --> 00:10:09,800
system which is some of the use cases

301
00:10:09,800 --> 00:10:11,590
I'll share with you in just a moment

302
00:10:11,590 --> 00:10:14,510
alright so I'm going to talk about you

303
00:10:14,510 --> 00:10:16,490
know how do you get started with this so

304
00:10:16,490 --> 00:10:18,320
I purchased one of these just so I could

305
00:10:18,320 --> 00:10:20,480
take some pictures for this talk rime

306
00:10:20,480 --> 00:10:23,180
amazon a nice box here you can see the

307
00:10:23,180 --> 00:10:24,920
front here and then the backside here is

308
00:10:24,920 --> 00:10:27,200
relatively standard you know router back

309
00:10:27,200 --> 00:10:29,630
we got four LAN ports internet port we

310
00:10:29,630 --> 00:10:31,640
got a USB port that we'll use for some

311
00:10:31,640 --> 00:10:33,590
additional storage and then a powered a

312
00:10:33,590 --> 00:10:37,130
couple of buttons once you get it set up

313
00:10:37,130 --> 00:10:39,020
I had to load up into the stock firmware

314
00:10:39,020 --> 00:10:41,090
and I was pretty amused when Cisco was

315
00:10:41,090 --> 00:10:42,470
pointing out when I was trying to click

316
00:10:42,470 --> 00:10:43,760
through to get to the firmware update

317
00:10:43,760 --> 00:10:45,860
straight screen it was making sure I had

318
00:10:45,860 --> 00:10:49,340
like legal banner say yes I confirm that

319
00:10:49,340 --> 00:10:51,020
understand that my router is completely

320
00:10:51,020 --> 00:10:52,670
open it unprotected before I could go

321
00:10:52,670 --> 00:10:55,100
through once you get through to the

322
00:10:55,100 --> 00:10:56,990
stock firmware like what comes built in

323
00:10:56,990 --> 00:10:58,370
from Linksys you just got to navigate

324
00:10:58,370 --> 00:11:00,230
some of the menu find the firmware

325
00:11:00,230 --> 00:11:04,010
update page now I went off to open wrt I

326
00:11:04,010 --> 00:11:05,930
downloaded their firmware and you can

327
00:11:05,930 --> 00:11:08,090
see I have it to choose file loaded it

328
00:11:08,090 --> 00:11:09,110
up and all you have to do at this point

329
00:11:09,110 --> 00:11:12,260
is hit start to get it updating and then

330
00:11:12,260 --> 00:11:15,080
the system will reboot and into open wrt

331
00:11:15,080 --> 00:11:17,780
at that point you'll start to see this

332
00:11:17,780 --> 00:11:20,330
screen this is open wrt sluicey web

333
00:11:20,330 --> 00:11:21,350
interface it's

334
00:11:21,350 --> 00:11:22,910
got many of the same features that the

335
00:11:22,910 --> 00:11:25,040
stock firmware would have all in here in

336
00:11:25,040 --> 00:11:26,540
a nice interface it's more letting me

337
00:11:26,540 --> 00:11:28,250
know I might need to set a password but

338
00:11:28,250 --> 00:11:30,920
one of the great things about open wrt

339
00:11:30,920 --> 00:11:32,660
is you've got a very powerful command

340
00:11:32,660 --> 00:11:33,890
line I love working at the command line

341
00:11:33,890 --> 00:11:36,800
so you can just pop up SSH and be

342
00:11:36,800 --> 00:11:38,540
working on this side or you can use the

343
00:11:38,540 --> 00:11:40,460
the web interface for a little easier

344
00:11:40,460 --> 00:11:43,460
setup now I make this sound really easy

345
00:11:43,460 --> 00:11:45,830
one of the boxes I got I've ordered two

346
00:11:45,830 --> 00:11:47,660
at the exact same time for testing for

347
00:11:47,660 --> 00:11:49,880
this talk and one of them worked great

348
00:11:49,880 --> 00:11:52,190
was that easy and the second one had it

349
00:11:52,190 --> 00:11:54,500
came despite ordering at the same time

350
00:11:54,500 --> 00:11:56,570
came with a different version of Linksys

351
00:11:56,570 --> 00:11:58,120
firmware on it and required some

352
00:11:58,120 --> 00:12:01,160
stepping through so I saw I have a put a

353
00:12:01,160 --> 00:12:03,770
QR code on the last page if you want to

354
00:12:03,770 --> 00:12:05,900
I put posted instructions further

355
00:12:05,900 --> 00:12:08,030
instructions on our website spotlight

356
00:12:08,030 --> 00:12:10,100
cybersecurity comm and I sprinkled a few

357
00:12:10,100 --> 00:12:11,570
QR codes soon because I don't have time

358
00:12:11,570 --> 00:12:13,130
to quite go through all the detail of

359
00:12:13,130 --> 00:12:15,020
these steps but you can see the steps

360
00:12:15,020 --> 00:12:17,060
extra steps I had to take to get that

361
00:12:17,060 --> 00:12:19,040
other device up and working all right

362
00:12:19,040 --> 00:12:21,770
we're in we've got open wrt ready to go

363
00:12:21,770 --> 00:12:24,110
what's next so just a quick tour around

364
00:12:24,110 --> 00:12:26,780
the operating system one of the reasons

365
00:12:26,780 --> 00:12:29,090
I liked open wrt is for its package

366
00:12:29,090 --> 00:12:32,000
management capabilities it uses a tool

367
00:12:32,000 --> 00:12:33,410
called a package so it's a little

368
00:12:33,410 --> 00:12:35,030
different than if you've used like rpm

369
00:12:35,030 --> 00:12:37,130
or apt-get but it's very similar

370
00:12:37,130 --> 00:12:38,870
concepts there's just two commands you

371
00:12:38,870 --> 00:12:40,760
need to know o package update which says

372
00:12:40,760 --> 00:12:42,680
go grab the latest package feeds like

373
00:12:42,680 --> 00:12:45,620
the listings it keeps that in RAM disk

374
00:12:45,620 --> 00:12:47,450
so it will every time you reboot you

375
00:12:47,450 --> 00:12:48,680
lose it so you got you're gonna end up

376
00:12:48,680 --> 00:12:50,720
running that command a lot and then opak

377
00:12:50,720 --> 00:12:52,130
egde install and then the name of the

378
00:12:52,130 --> 00:12:53,630
package you care about you know if you

379
00:12:53,630 --> 00:12:54,980
want to install TCP dump you just drop

380
00:12:54,980 --> 00:12:56,690
TCP dump it'll take care of all the

381
00:12:56,690 --> 00:12:58,190
dependencies it'll figure out the feed

382
00:12:58,190 --> 00:13:00,260
limpy cap and get it installed for you

383
00:13:00,260 --> 00:13:02,360
so installing packages is real easy and

384
00:13:02,360 --> 00:13:06,170
then the configuration open wrt has

385
00:13:06,170 --> 00:13:08,600
prided itself on a sort of a centralized

386
00:13:08,600 --> 00:13:11,660
configuration system call that called

387
00:13:11,660 --> 00:13:14,360
UCI and pretty much all that's an Etsy

388
00:13:14,360 --> 00:13:16,550
config all the files in one place it's

389
00:13:16,550 --> 00:13:18,110
pretty easy just to edit the text files

390
00:13:18,110 --> 00:13:19,790
and then reboot it and they have a

391
00:13:19,790 --> 00:13:21,380
command that'll help you through it you

392
00:13:21,380 --> 00:13:23,990
can hit UCI show it'll show you all the

393
00:13:23,990 --> 00:13:26,270
current configuration you can set once

394
00:13:26,270 --> 00:13:27,890
you've seen what's in there you can set

395
00:13:27,890 --> 00:13:29,720
individual settings you can see what

396
00:13:29,720 --> 00:13:31,340
changes are in memory but haven't been

397
00:13:31,340 --> 00:13:33,050
saved and then commit them to the disk

398
00:13:33,050 --> 00:13:34,640
and so those are the four kind of if you

399
00:13:34,640 --> 00:13:35,310
want to do it

400
00:13:35,310 --> 00:13:36,450
man line those are the four most

401
00:13:36,450 --> 00:13:38,040
important commands that you need to be

402
00:13:38,040 --> 00:13:40,500
aware of all on the way so that's that

403
00:13:40,500 --> 00:13:43,950
quick tour around open wrt before I go

404
00:13:43,950 --> 00:13:45,540
into use cases there are any quick

405
00:13:45,540 --> 00:13:51,800
questions all right yeah

406
00:13:51,800 --> 00:13:54,690
spotlight cybersecurity comm yeah I got

407
00:13:54,690 --> 00:13:56,070
a couple other links in here I'll kind

408
00:13:56,070 --> 00:13:57,210
of point along the way but I've got some

409
00:13:57,210 --> 00:14:00,870
instructions on there so we're in we

410
00:14:00,870 --> 00:14:02,970
know our way around open wrt what can we

411
00:14:02,970 --> 00:14:04,470
do with this system now so you know

412
00:14:04,470 --> 00:14:06,270
there's a lot of different things to do

413
00:14:06,270 --> 00:14:07,770
and one of the primary ones is hey I can

414
00:14:07,770 --> 00:14:09,660
use this to help secure my network you

415
00:14:09,660 --> 00:14:11,220
know I want to defend your home or

416
00:14:11,220 --> 00:14:12,630
business network you want to set up a

417
00:14:12,630 --> 00:14:14,640
firewall you want to learn Wireshark get

418
00:14:14,640 --> 00:14:16,320
some real data from your network to pick

419
00:14:16,320 --> 00:14:18,500
it up you know try out using a security

420
00:14:18,500 --> 00:14:21,060
sensor like security onion or maybe even

421
00:14:21,060 --> 00:14:22,800
do some content filtering I've got kids

422
00:14:22,800 --> 00:14:24,060
at home I'm worried about what they

423
00:14:24,060 --> 00:14:26,070
might stumble across what can I do to

424
00:14:26,070 --> 00:14:27,750
use this position to help me to get

425
00:14:27,750 --> 00:14:30,300
there so we got a pretty standard

426
00:14:30,300 --> 00:14:31,860
network set up looks a little bit like

427
00:14:31,860 --> 00:14:33,810
this you've got some client devices that

428
00:14:33,810 --> 00:14:35,790
are connected by wires or Wireless to a

429
00:14:35,790 --> 00:14:37,980
router which are connected to your ISP

430
00:14:37,980 --> 00:14:39,810
modem like a cable modem or DSL or

431
00:14:39,810 --> 00:14:41,339
something going out to the Internet so

432
00:14:41,339 --> 00:14:42,960
one of the things when I used to work

433
00:14:42,960 --> 00:14:44,400
here at augusta university for a little

434
00:14:44,400 --> 00:14:45,540
while used to challenge my students

435
00:14:45,540 --> 00:14:47,040
where are the single points of failure

436
00:14:47,040 --> 00:14:53,810
in this network map show hands yeah yeah

437
00:14:53,810 --> 00:14:57,570
yeah high speed modem is one of them all

438
00:14:57,570 --> 00:15:00,510
right oh else we got yeah we got the

439
00:15:00,510 --> 00:15:03,030
router so so thanks yeah so we've got a

440
00:15:03,030 --> 00:15:04,920
couple of single points of failure here

441
00:15:04,920 --> 00:15:07,830
that we need to deal with the and we can

442
00:15:07,830 --> 00:15:09,780
take that to our advantage these are the

443
00:15:09,780 --> 00:15:11,070
these are the choke points on the

444
00:15:11,070 --> 00:15:12,720
network perfect places for us to

445
00:15:12,720 --> 00:15:16,050
instrument and pull off data and so we

446
00:15:16,050 --> 00:15:18,120
since we control this router really well

447
00:15:18,120 --> 00:15:20,640
now that we've put open wrt on it let's

448
00:15:20,640 --> 00:15:22,140
use it to get at some data now when I

449
00:15:22,140 --> 00:15:25,620
have trouble or when I want to one of

450
00:15:25,620 --> 00:15:27,450
the first cases was to use the fire

451
00:15:27,450 --> 00:15:29,610
wallet this is Linux we have a full IP

452
00:15:29,610 --> 00:15:31,620
tables firewall I'm not going to go into

453
00:15:31,620 --> 00:15:33,450
detail about IP tables now there's some

454
00:15:33,450 --> 00:15:34,860
really awesome modules out there they

455
00:15:34,860 --> 00:15:36,810
can do some complex things some of them

456
00:15:36,810 --> 00:15:38,580
are not built into open wrt but there's

457
00:15:38,580 --> 00:15:40,440
a lot of packages you can install to get

458
00:15:40,440 --> 00:15:43,350
at it I there's a great Doug guide in

459
00:15:43,350 --> 00:15:46,740
there I'm open wrt has a custom wrapper

460
00:15:46,740 --> 00:15:49,050
around IP tables the documents

461
00:15:49,050 --> 00:15:51,570
is there if you want to check it out but

462
00:15:51,570 --> 00:15:53,190
one of the great things is is you can if

463
00:15:53,190 --> 00:15:54,930
you like using just straight IP tables

464
00:15:54,930 --> 00:15:57,240
you can write your own you just stick it

465
00:15:57,240 --> 00:15:59,070
in this particular script shell script

466
00:15:59,070 --> 00:16:01,200
but instead of using the standard chains

467
00:16:01,200 --> 00:16:03,630
use those ones instead input rule output

468
00:16:03,630 --> 00:16:05,519
rule and forwarding rule but you said

469
00:16:05,519 --> 00:16:07,890
full power of that IP tables firewall at

470
00:16:07,890 --> 00:16:11,730
your disposal with this device the but

471
00:16:11,730 --> 00:16:13,649
remember we said you know because we're

472
00:16:13,649 --> 00:16:15,089
the choke point though if something's

473
00:16:15,089 --> 00:16:16,740
going wrong on our network and we want

474
00:16:16,740 --> 00:16:18,390
to investigate this is also the best

475
00:16:18,390 --> 00:16:21,029
place for us to get a tap on it and so

476
00:16:21,029 --> 00:16:23,279
TCP dump is one of my go to tools quick

477
00:16:23,279 --> 00:16:24,930
easy command-line to be able to take a

478
00:16:24,930 --> 00:16:26,640
look at what's there just two quick

479
00:16:26,640 --> 00:16:28,829
commands to install it if you try out

480
00:16:28,829 --> 00:16:30,630
TCP dump on the router just be aware

481
00:16:30,630 --> 00:16:32,670
there's two packages there's TCP dump

482
00:16:32,670 --> 00:16:36,420
and TCP dump mini the full TCP dump has

483
00:16:36,420 --> 00:16:38,310
a whole lot of extra protocol parsers

484
00:16:38,310 --> 00:16:39,630
and it's kind of large remember this is

485
00:16:39,630 --> 00:16:41,010
embedded system doesn't have a lot of

486
00:16:41,010 --> 00:16:43,410
space so there's a second package TCP

487
00:16:43,410 --> 00:16:45,329
dump mini that has a lot of that

488
00:16:45,329 --> 00:16:45,959
pared-down

489
00:16:45,959 --> 00:16:48,209
still get really useful information but

490
00:16:48,209 --> 00:16:49,470
kind of clogged up as much of your

491
00:16:49,470 --> 00:16:52,649
limited storage space on the device and

492
00:16:52,649 --> 00:16:54,180
then you can just sort of see I fired it

493
00:16:54,180 --> 00:16:56,130
up to check it out and I actually was a

494
00:16:56,130 --> 00:16:57,390
little surprised I didn't realize my

495
00:16:57,390 --> 00:16:59,339
Chrome browser was using Google's new

496
00:16:59,339 --> 00:17:02,490
quic protocol the over UDP port 443 to

497
00:17:02,490 --> 00:17:04,939
talk to back to Google instead of using

498
00:17:04,939 --> 00:17:08,819
HTTP over TCP but real quick to see what

499
00:17:08,819 --> 00:17:09,990
kind of traffic's happening on your

500
00:17:09,990 --> 00:17:12,720
network with TCP dump right from this

501
00:17:12,720 --> 00:17:14,970
device but sometimes we want to be able

502
00:17:14,970 --> 00:17:17,130
to save off some of those pcap files and

503
00:17:17,130 --> 00:17:18,630
they don't have a whole lot of space

504
00:17:18,630 --> 00:17:22,589
built in I picked the EA 4500 because a

505
00:17:22,589 --> 00:17:24,059
lot of the newer routers actually have

506
00:17:24,059 --> 00:17:25,619
these USB ports so pick up an extra

507
00:17:25,619 --> 00:17:29,040
flash drive off Amazon format it as a

508
00:17:29,040 --> 00:17:31,710
Linux compatible filesystem pop it in

509
00:17:31,710 --> 00:17:33,840
the device here and then with a little

510
00:17:33,840 --> 00:17:36,570
installing a couple of extra modules you

511
00:17:36,570 --> 00:17:38,070
see there's a few packages you got to

512
00:17:38,070 --> 00:17:39,570
install to make this work but then you

513
00:17:39,570 --> 00:17:41,280
can mount it just as you would any other

514
00:17:41,280 --> 00:17:43,350
file system and then it's a handy way

515
00:17:43,350 --> 00:17:44,970
for you to be able to use TCP dump or

516
00:17:44,970 --> 00:17:47,600
any other utility and save off that data

517
00:17:47,600 --> 00:17:50,100
onto the flash drive and then you can

518
00:17:50,100 --> 00:17:51,690
either pull the flash drive out and move

519
00:17:51,690 --> 00:17:53,429
it to your desktop or you know just use

520
00:17:53,429 --> 00:17:56,309
a secure copy SCP over SSH to be able to

521
00:17:56,309 --> 00:17:57,059
move them over so you could use

522
00:17:57,059 --> 00:17:59,580
Wireshark on your more powerful desktop

523
00:17:59,580 --> 00:18:03,860
system and process it after the

524
00:18:04,019 --> 00:18:06,870
the but we also you know have this again

525
00:18:06,870 --> 00:18:08,190
we have this choke point maybe we want

526
00:18:08,190 --> 00:18:10,169
to do some better analysis like run bro

527
00:18:10,169 --> 00:18:11,940
or snort on this data that we can't get

528
00:18:11,940 --> 00:18:14,519
it working on open wrt router but what

529
00:18:14,519 --> 00:18:16,950
about if we could tap that off well you

530
00:18:16,950 --> 00:18:18,870
know typically we've used network taps

531
00:18:18,870 --> 00:18:21,179
for this and you can pick up an active

532
00:18:21,179 --> 00:18:22,769
network tap pretty easily on Amazon

533
00:18:22,769 --> 00:18:25,169
problem is they're a little pricey $220

534
00:18:25,169 --> 00:18:26,610
it's not a lot of money but it's you

535
00:18:26,610 --> 00:18:28,019
know you're on that beer budget what if

536
00:18:28,019 --> 00:18:29,580
we could do something cheaper can we use

537
00:18:29,580 --> 00:18:32,360
our open wrt device for it and you can

538
00:18:32,360 --> 00:18:34,590
there's a lot of different ways that you

539
00:18:34,590 --> 00:18:37,139
can set this up it is not going to give

540
00:18:37,139 --> 00:18:39,570
you a pristine copy of your data or be

541
00:18:39,570 --> 00:18:42,480
as easy as if you were to buy an active

542
00:18:42,480 --> 00:18:44,279
tap like the dual comm one I just showed

543
00:18:44,279 --> 00:18:46,139
so there's sort of three methods that I

544
00:18:46,139 --> 00:18:48,480
have discovered for doing this I said I

545
00:18:48,480 --> 00:18:50,340
have the links on the blog for more

546
00:18:50,340 --> 00:18:51,389
instructions if you want to get

547
00:18:51,389 --> 00:18:53,519
step-by-step on how to do it but the

548
00:18:53,519 --> 00:18:56,760
iptables T module is the easiest one

549
00:18:56,760 --> 00:18:59,340
that works on all hardware built into

550
00:18:59,340 --> 00:19:01,139
the firewall just the downside of this

551
00:19:01,139 --> 00:19:04,139
is that it only works for IP traffic so

552
00:19:04,139 --> 00:19:05,820
you won't pick up our packets going

553
00:19:05,820 --> 00:19:07,080
across your network or any other

554
00:19:07,080 --> 00:19:10,710
internet only traffic the other downside

555
00:19:10,710 --> 00:19:12,120
of this is that the way that the T

556
00:19:12,120 --> 00:19:13,889
module works is it messes with the MAC

557
00:19:13,889 --> 00:19:15,419
addresses so you won't get the original

558
00:19:15,419 --> 00:19:17,909
MAC addresses for most situations that's

559
00:19:17,909 --> 00:19:19,830
ok but just be aware is that it's not a

560
00:19:19,830 --> 00:19:23,039
perfect tap to get a perfect tap you got

561
00:19:23,039 --> 00:19:24,480
to buy certain hardware

562
00:19:24,480 --> 00:19:26,460
so these ei 45 hundreds that I have

563
00:19:26,460 --> 00:19:29,850
running over here they they only do they

564
00:19:29,850 --> 00:19:31,769
don't support this but another model

565
00:19:31,769 --> 00:19:34,590
that I've used the tp-link 3600 here

566
00:19:34,590 --> 00:19:36,659
that actually the chip that's the

567
00:19:36,659 --> 00:19:39,000
chipset that's on the Ethernet switch

568
00:19:39,000 --> 00:19:42,179
has a essentially a port mirroring

569
00:19:42,179 --> 00:19:44,250
capability built-in that you can trigger

570
00:19:44,250 --> 00:19:47,010
and as I said certain chipsets have this

571
00:19:47,010 --> 00:19:48,240
you got a hunter round if you really

572
00:19:48,240 --> 00:19:49,500
want that particular feature but that

573
00:19:49,500 --> 00:19:51,419
gives you pristine packets copied

574
00:19:51,419 --> 00:19:54,960
through the switch the third option is

575
00:19:54,960 --> 00:19:57,269
you can use this daemon logger tool from

576
00:19:57,269 --> 00:19:59,340
Cisco this we'll talk about more in a

577
00:19:59,340 --> 00:20:01,080
minute but again another caveat is

578
00:20:01,080 --> 00:20:02,940
Hardware dependent for it to work you

579
00:20:02,940 --> 00:20:05,159
have to be using a destination mirrored

580
00:20:05,159 --> 00:20:07,950
port that's not a switched port so again

581
00:20:07,950 --> 00:20:10,260
it's not easy but you can accomplish

582
00:20:10,260 --> 00:20:11,940
this with these cheap devices if you

583
00:20:11,940 --> 00:20:12,990
want to kind of wrestle through again

584
00:20:12,990 --> 00:20:15,650
that time money trade-off

585
00:20:15,650 --> 00:20:17,210
they're also cuz we're at that choke

586
00:20:17,210 --> 00:20:18,740
point these are great for sort of other

587
00:20:18,740 --> 00:20:20,630
network security monitoring things so we

588
00:20:20,630 --> 00:20:22,370
can do full packet capture on them we

589
00:20:22,370 --> 00:20:24,530
can grab a session data and export it as

590
00:20:24,530 --> 00:20:27,350
NetFlow we can grab both the firewall

591
00:20:27,350 --> 00:20:29,570
logs and the DNS logs and see what kind

592
00:20:29,570 --> 00:20:31,250
of activity is happening on our network

593
00:20:31,250 --> 00:20:34,340
a couple you know the daemon logger is a

594
00:20:34,340 --> 00:20:36,230
great tool to do this it captures all

595
00:20:36,230 --> 00:20:38,180
the packets it'll even rotate the pcap

596
00:20:38,180 --> 00:20:39,830
files for you once you fill up your

597
00:20:39,830 --> 00:20:42,800
filesystem and so I have this set up you

598
00:20:42,800 --> 00:20:45,650
know here to capture it on my land port

599
00:20:45,650 --> 00:20:47,120
to name it and then to you know to

600
00:20:47,120 --> 00:20:50,090
rotate the file every every 600 seconds

601
00:20:50,090 --> 00:20:52,100
every 10 minutes or so and it'll keep

602
00:20:52,100 --> 00:20:53,750
it'll aged off some of the older files

603
00:20:53,750 --> 00:20:55,850
for you if you would like it to do that

604
00:20:55,850 --> 00:20:58,360
you can save it off on that USB Drive

605
00:20:58,360 --> 00:21:01,970
and or as I do I will have it rotating

606
00:21:01,970 --> 00:21:03,230
on there and I'll just pull the USB

607
00:21:03,230 --> 00:21:05,480
files the pcap files off when I need

608
00:21:05,480 --> 00:21:07,190
them if I want to do some analysis at a

609
00:21:07,190 --> 00:21:08,140
later time

610
00:21:08,140 --> 00:21:11,060
NetFlow is very similar there's the soft

611
00:21:11,060 --> 00:21:13,460
flow D package which has support for

612
00:21:13,460 --> 00:21:15,500
exporting NetFlow version 5 NetFlow

613
00:21:15,500 --> 00:21:17,660
version 9 so you can just all you need

614
00:21:17,660 --> 00:21:19,580
to do essentially as easy configuration

615
00:21:19,580 --> 00:21:21,260
to just point it at your net flow

616
00:21:21,260 --> 00:21:23,660
collector well I didn't have a net flow

617
00:21:23,660 --> 00:21:25,010
collector running at home all the time

618
00:21:25,010 --> 00:21:27,740
and so I actually just set it up to

619
00:21:27,740 --> 00:21:29,600
point to the local host and then use the

620
00:21:29,600 --> 00:21:31,160
daemon logger to capture all those

621
00:21:31,160 --> 00:21:33,440
packets and then a couple of utilities

622
00:21:33,440 --> 00:21:35,690
strung them together to replay it now

623
00:21:35,690 --> 00:21:37,610
unfortunately my analysis side I didn't

624
00:21:37,610 --> 00:21:40,010
get that documented in time for this

625
00:21:40,010 --> 00:21:41,300
talk if you're really interested in that

626
00:21:41,300 --> 00:21:43,340
send me a direct message on Twitter I'll

627
00:21:43,340 --> 00:21:45,950
have my note here at the end and I can

628
00:21:45,950 --> 00:21:47,210
let you know as soon as I've got that

629
00:21:47,210 --> 00:21:51,500
written up later you can also since we

630
00:21:51,500 --> 00:21:54,980
have all that the box has a DNS server

631
00:21:54,980 --> 00:21:56,330
on it and all of our traffic's going

632
00:21:56,330 --> 00:21:57,230
through it this is a great place to

633
00:21:57,230 --> 00:21:59,120
capture what is everybody looking up on

634
00:21:59,120 --> 00:22:01,220
the network so just a couple of simple

635
00:22:01,220 --> 00:22:03,560
commands to turn on DNS logging you've

636
00:22:03,560 --> 00:22:05,090
got to bounce the DNS server and then

637
00:22:05,090 --> 00:22:06,620
you'll start seeing entries like this

638
00:22:06,620 --> 00:22:08,570
show up in all your logs you can see you

639
00:22:08,570 --> 00:22:09,860
can see I said one of my hosts on my

640
00:22:09,860 --> 00:22:12,080
network was querying play.google.com and

641
00:22:12,080 --> 00:22:13,760
then you can see you know it tells you

642
00:22:13,760 --> 00:22:16,130
who queried it which forwarding server

643
00:22:16,130 --> 00:22:19,700
did we send it to and which of the what

644
00:22:19,700 --> 00:22:21,230
was the response that came back from the

645
00:22:21,230 --> 00:22:23,510
server that we relayed to the client and

646
00:22:23,510 --> 00:22:25,970
and you just get a lot of log data and

647
00:22:25,970 --> 00:22:28,390
they sends it all into the system log

648
00:22:28,390 --> 00:22:29,950
that we can then pull off a quick

649
00:22:29,950 --> 00:22:35,680
question so the way that it is stored it

650
00:22:35,680 --> 00:22:37,000
built in I'm gonna talk about in a

651
00:22:37,000 --> 00:22:38,440
moment how to save it but it is stored

652
00:22:38,440 --> 00:22:40,300
only in memory and it'll be lost on a

653
00:22:40,300 --> 00:22:43,570
reboot the same thing with the firewall

654
00:22:43,570 --> 00:22:45,370
logs you know you just say there's a

655
00:22:45,370 --> 00:22:46,870
couple of settings you just turn on and

656
00:22:46,870 --> 00:22:48,250
the built-in firewall stuff and it'll

657
00:22:48,250 --> 00:22:50,320
start outputting the this is using the

658
00:22:50,320 --> 00:22:52,990
IP tables built in logging utilities you

659
00:22:52,990 --> 00:22:55,180
start to see packets or entries in the

660
00:22:55,180 --> 00:22:57,340
log here so anytime something gets

661
00:22:57,340 --> 00:22:59,650
dropped on your firewall you can see an

662
00:22:59,650 --> 00:23:01,270
entry let you know hey somebody scanning

663
00:23:01,270 --> 00:23:02,890
me what's going on in my network we can

664
00:23:02,890 --> 00:23:04,750
save that off here real quick real easy

665
00:23:04,750 --> 00:23:06,550
now if you want to be able to save it

666
00:23:06,550 --> 00:23:08,710
off and keep it persistent there's a

667
00:23:08,710 --> 00:23:11,320
couple of utilities you can use open wrt

668
00:23:11,320 --> 00:23:13,180
supports built-in it's just sending all

669
00:23:13,180 --> 00:23:15,340
this data to a remote syslog source so

670
00:23:15,340 --> 00:23:16,660
if you've got like a log infrastructure

671
00:23:16,660 --> 00:23:18,910
already you can do it that way how I do

672
00:23:18,910 --> 00:23:20,620
it I have a script shared at that bitly

673
00:23:20,620 --> 00:23:22,540
link where I just have a script I run

674
00:23:22,540 --> 00:23:24,880
that capture saves the logs onto my USB

675
00:23:24,880 --> 00:23:26,680
disk and just keeps a rotating file and

676
00:23:26,680 --> 00:23:28,090
then I pull them off manually when I

677
00:23:28,090 --> 00:23:31,840
want to do analysis on them yeah yeah

678
00:23:31,840 --> 00:23:33,220
that one that one is a setting that's

679
00:23:33,220 --> 00:23:35,200
saved then so that it's persistent but

680
00:23:35,200 --> 00:23:36,790
you have to choose that it's not by

681
00:23:36,790 --> 00:23:39,430
default that way so you've got to add

682
00:23:39,430 --> 00:23:41,380
that into your open wrt setup if you'd

683
00:23:41,380 --> 00:23:44,170
like that so content filtering so what

684
00:23:44,170 --> 00:23:45,340
you know what if we want to be honest

685
00:23:45,340 --> 00:23:47,800
I've got kids at home a most important

686
00:23:47,800 --> 00:23:49,210
thing I want to tell you is there is no

687
00:23:49,210 --> 00:23:51,190
technology silver bullet for protecting

688
00:23:51,190 --> 00:23:53,650
your kids online you cannot rely on

689
00:23:53,650 --> 00:23:56,320
technology alone but technology is a

690
00:23:56,320 --> 00:23:57,970
useful part of the puzzle you know if

691
00:23:57,970 --> 00:23:59,140
you combine it with them active

692
00:23:59,140 --> 00:24:00,640
parenting having some rules about how

693
00:24:00,640 --> 00:24:02,050
your kids use it and having some

694
00:24:02,050 --> 00:24:03,580
education with them about potential bad

695
00:24:03,580 --> 00:24:05,230
stuff and this helps with sort of a

696
00:24:05,230 --> 00:24:07,480
defense in-depth strategy a couple of

697
00:24:07,480 --> 00:24:09,340
tools that I've found useful to use with

698
00:24:09,340 --> 00:24:11,350
my open wrt router is pointing it at

699
00:24:11,350 --> 00:24:13,840
Open DNS as family shield service they

700
00:24:13,840 --> 00:24:15,850
block malicious and phishing traffic for

701
00:24:15,850 --> 00:24:18,400
us and then they also block instantly

702
00:24:18,400 --> 00:24:21,070
all a known adult content domains again

703
00:24:21,070 --> 00:24:22,660
it's not going to get everything but my

704
00:24:22,660 --> 00:24:23,860
goal is to sort of prevent happy

705
00:24:23,860 --> 00:24:26,380
accident or unto accidents on my network

706
00:24:26,380 --> 00:24:28,390
so I want to keep them away from that

707
00:24:28,390 --> 00:24:32,050
away yeah so great thing about this is

708
00:24:32,050 --> 00:24:35,710
it's free and it's an easy configuration

709
00:24:35,710 --> 00:24:38,140
change to be able to support that up and

710
00:24:38,140 --> 00:24:39,820
by the way I just would say I use the

711
00:24:39,820 --> 00:24:40,990
bit ly links this is your way of

712
00:24:40,990 --> 00:24:41,950
feedback to me

713
00:24:41,950 --> 00:24:43,929
I want to know after the fact I get to

714
00:24:43,929 --> 00:24:45,820
track who Koo went to those QR codes

715
00:24:45,820 --> 00:24:47,679
gives me some feedback about what topics

716
00:24:47,679 --> 00:24:49,480
were you guys interested in after the

717
00:24:49,480 --> 00:24:50,769
fact so I appreciate if you could use

718
00:24:50,769 --> 00:24:54,159
those another way to do this is Google

719
00:24:54,159 --> 00:24:57,190
and Bing and YouTube all have various

720
00:24:57,190 --> 00:24:59,590
safe search modes and that you could

721
00:24:59,590 --> 00:25:01,120
actually through a little DNS trick

722
00:25:01,120 --> 00:25:02,860
enforce them require it so you could

723
00:25:02,860 --> 00:25:05,380
turn them on you can opt in to them but

724
00:25:05,380 --> 00:25:07,240
you can disable it too but using this

725
00:25:07,240 --> 00:25:09,549
DNS trick you can force it for all the

726
00:25:09,549 --> 00:25:11,679
devices on your network and so this

727
00:25:11,679 --> 00:25:13,480
again just a simple edit of the DNS

728
00:25:13,480 --> 00:25:14,889
configuration and essentially what I'm

729
00:25:14,889 --> 00:25:17,529
doing is forcing google.com to resolve

730
00:25:17,529 --> 00:25:19,840
to this IP address which is something at

731
00:25:19,840 --> 00:25:21,700
Google has published saying that yes we

732
00:25:21,700 --> 00:25:23,470
can you know if you go to this IP

733
00:25:23,470 --> 00:25:25,870
address you will only get safe search

734
00:25:25,870 --> 00:25:28,570
mode every time YouTube has something

735
00:25:28,570 --> 00:25:30,700
similar Bing has something similar it's

736
00:25:30,700 --> 00:25:32,080
a pretty easy setup just to kind of

737
00:25:32,080 --> 00:25:33,220
again make sure that we're preventing

738
00:25:33,220 --> 00:25:36,370
accidents on the network another great

739
00:25:36,370 --> 00:25:38,110
use case I've found for this is with

740
00:25:38,110 --> 00:25:40,690
Open VPN to be able to use it for a VPN

741
00:25:40,690 --> 00:25:42,159
we can do all sorts of cool things like

742
00:25:42,159 --> 00:25:44,710
site-to-site VPN is like if i've got two

743
00:25:44,710 --> 00:25:45,250
routers

744
00:25:45,250 --> 00:25:47,380
at two different locations i can have

745
00:25:47,380 --> 00:25:49,090
them one cool call the other one and

746
00:25:49,090 --> 00:25:51,190
establish a VPN connect the networks

747
00:25:51,190 --> 00:25:53,710
over secure tunnel that's an easy setup

748
00:25:53,710 --> 00:25:55,929
the another one is sort of the remote

749
00:25:55,929 --> 00:25:57,940
access maybe you're away from home and

750
00:25:57,940 --> 00:25:59,710
you want to dial into your house

751
00:25:59,710 --> 00:26:01,480
we got like I know if I've got my smart

752
00:26:01,480 --> 00:26:03,399
phone out here I download the open pion

753
00:26:03,399 --> 00:26:05,289
app I can call home and get connected to

754
00:26:05,289 --> 00:26:05,740
my network

755
00:26:05,740 --> 00:26:08,620
easy peasy and be able to access any of

756
00:26:08,620 --> 00:26:13,809
the resources there and the there's also

757
00:26:13,809 --> 00:26:15,700
some really neat wireless stuff that you

758
00:26:15,700 --> 00:26:19,240
can do with this so a typical wireless

759
00:26:19,240 --> 00:26:21,190
scenario I have at my house I mentioned

760
00:26:21,190 --> 00:26:22,990
is that if I've got a couple of older

761
00:26:22,990 --> 00:26:25,149
computers that I can't get that I need

762
00:26:25,149 --> 00:26:26,500
you can't get them to where am i close

763
00:26:26,500 --> 00:26:29,320
to mine where my router is so I use a

764
00:26:29,320 --> 00:26:31,750
second open wrt and just turn it into a

765
00:26:31,750 --> 00:26:34,299
wireless bridge so you can see that

766
00:26:34,299 --> 00:26:36,370
server right up there is connected via

767
00:26:36,370 --> 00:26:38,620
wire to that open wrt dice and then it

768
00:26:38,620 --> 00:26:40,779
is a Cott wireless client instead of an

769
00:26:40,779 --> 00:26:42,909
access point down to my main router and

770
00:26:42,909 --> 00:26:44,230
then from there it can get out to the

771
00:26:44,230 --> 00:26:46,029
internet access whatever resources it

772
00:26:46,029 --> 00:26:47,380
needs so I can extend my network pretty

773
00:26:47,380 --> 00:26:51,070
easily this way another scenario I use

774
00:26:51,070 --> 00:26:53,870
at home is I want my house is a

775
00:26:53,870 --> 00:26:56,659
they're long and so it's the wireless

776
00:26:56,659 --> 00:26:58,039
coverage doesn't work across the whole

777
00:26:58,039 --> 00:27:00,049
house so I actually had an Ethernet

778
00:27:00,049 --> 00:27:02,179
cable I ran sort of as a trunk line and

779
00:27:02,179 --> 00:27:04,580
since I have to broadcast to different

780
00:27:04,580 --> 00:27:06,140
wireless networks I have a guest network

781
00:27:06,140 --> 00:27:08,140
and a home sort of a main network I

782
00:27:08,140 --> 00:27:10,610
actually can turn on the VLAN trunking

783
00:27:10,610 --> 00:27:12,799
capabilities in these routers and push

784
00:27:12,799 --> 00:27:14,779
both of those networks across the trunk

785
00:27:14,779 --> 00:27:16,970
so they can both be broadcasting it and

786
00:27:16,970 --> 00:27:18,380
this doesn't use any of the mesh

787
00:27:18,380 --> 00:27:20,059
technologies that are more commonly used

788
00:27:20,059 --> 00:27:24,650
for this type of setup right now and one

789
00:27:24,650 --> 00:27:26,149
that I was able to do here at augusta

790
00:27:26,149 --> 00:27:27,350
university that i wanted to share with

791
00:27:27,350 --> 00:27:29,870
permission as we set up a web cracking

792
00:27:29,870 --> 00:27:32,000
lab using these devices we configured a

793
00:27:32,000 --> 00:27:35,419
router here with WEP up and then we set

794
00:27:35,419 --> 00:27:37,100
up a client that would just keep pinging

795
00:27:37,100 --> 00:27:39,440
it and generating data and then we were

796
00:27:39,440 --> 00:27:41,480
able to use some wireless capture

797
00:27:41,480 --> 00:27:43,010
devices to be able to capture that and

798
00:27:43,010 --> 00:27:44,870
then do a web cracking attack in the

799
00:27:44,870 --> 00:27:47,390
classroom with some students here and it

800
00:27:47,390 --> 00:27:48,500
was great because all we have to do

801
00:27:48,500 --> 00:27:49,940
whenever we run it is just grab those

802
00:27:49,940 --> 00:27:51,710
devices put them out in the classroom

803
00:27:51,710 --> 00:27:53,690
plug them in and then the lab just works

804
00:27:53,690 --> 00:27:57,470
so it's really really handy I have since

805
00:27:57,470 --> 00:27:59,539
unfortunately had to stop working here

806
00:27:59,539 --> 00:28:01,370
due to scheduling reasons but I've since

807
00:28:01,370 --> 00:28:03,679
developed us something similar for wpa2

808
00:28:03,679 --> 00:28:06,260
to be able to look at how you crack it

809
00:28:06,260 --> 00:28:07,880
when he can grab the handshake and be

810
00:28:07,880 --> 00:28:10,370
able to catch that offline I have to

811
00:28:10,370 --> 00:28:11,990
skip a couple of these scenarios do time

812
00:28:11,990 --> 00:28:13,700
but the gist there's a lot of other

813
00:28:13,700 --> 00:28:15,500
useful cases like for disaster recovery

814
00:28:15,500 --> 00:28:17,809
you can run pixie boot on these to be

815
00:28:17,809 --> 00:28:19,220
able to push boot images out to your

816
00:28:19,220 --> 00:28:21,529
devices I use one of them as a travel

817
00:28:21,529 --> 00:28:23,690
router when I go to a hotel similar to

818
00:28:23,690 --> 00:28:25,399
what the armadillo guys shared this

819
00:28:25,399 --> 00:28:28,250
morning in the other hall so they can

820
00:28:28,250 --> 00:28:29,720
you know I could VPN to home or at least

821
00:28:29,720 --> 00:28:32,179
have secure Wi-Fi in my room if you're

822
00:28:32,179 --> 00:28:34,010
into hardware hacking we've got GPIO

823
00:28:34,010 --> 00:28:36,470
ports and audio types of things that you

824
00:28:36,470 --> 00:28:37,789
can control if you really want to open

825
00:28:37,789 --> 00:28:39,260
up the box and get in it I've not done

826
00:28:39,260 --> 00:28:41,120
that but there's some really cool things

827
00:28:41,120 --> 00:28:43,789
that you can do so what I want you guys

828
00:28:43,789 --> 00:28:45,440
have taken away from this is that this

829
00:28:45,440 --> 00:28:48,080
is a really versatile platform to be

830
00:28:48,080 --> 00:28:50,090
able to do some neat security sensing

831
00:28:50,090 --> 00:28:52,580
stuff and training if you want to play

832
00:28:52,580 --> 00:28:53,870
with some of these enterprise stuff at

833
00:28:53,870 --> 00:28:55,610
home this is a quick and easy way to

834
00:28:55,610 --> 00:28:58,549
kind of get started with it on the way

835
00:28:58,549 --> 00:29:02,630
and so I have to take a couple of quick

836
00:29:02,630 --> 00:29:03,289
questions

837
00:29:03,289 --> 00:29:07,299
I think we have a minute for that yes

838
00:29:13,669 --> 00:29:15,990
do you mean like fur like using a toe to

839
00:29:15,990 --> 00:29:18,750
toe 11g no you can support

840
00:29:18,750 --> 00:29:20,759
I don't know about dd-wrt I used it

841
00:29:20,759 --> 00:29:22,440
briefly and then switched over to open

842
00:29:22,440 --> 00:29:24,600
wrt so I can't speak to that one open

843
00:29:24,600 --> 00:29:26,820
wrt supports all of the recent standards

844
00:29:26,820 --> 00:29:28,950
though sometimes it's not always the

845
00:29:28,950 --> 00:29:30,600
default though and you'll have to flip

846
00:29:30,600 --> 00:29:31,889
the switch to turn on the higher

847
00:29:31,889 --> 00:29:41,700
performance speeds yeah it's just being

848
00:29:41,700 --> 00:29:43,019
persistent there's just weird things

849
00:29:43,019 --> 00:29:45,179
this is all unsupported though you like

850
00:29:45,179 --> 00:29:46,799
you'll run into weird little glitches

851
00:29:46,799 --> 00:29:48,509
like for me the other day I was trying

852
00:29:48,509 --> 00:29:50,639
to install open wrt and it kept failing

853
00:29:50,639 --> 00:29:52,320
and it wasn't until I realized I needed

854
00:29:52,320 --> 00:29:54,090
to upgrade the stock firmware to the

855
00:29:54,090 --> 00:29:56,460
latest stock firmware and then install

856
00:29:56,460 --> 00:29:59,220
open wrt and so there's weird sort of

857
00:29:59,220 --> 00:30:00,750
undocumented things like that it's just

858
00:30:00,750 --> 00:30:01,830
like so if you if you're willing to be

859
00:30:01,830 --> 00:30:04,019
persistent with it I said that's the way

860
00:30:04,019 --> 00:30:05,399
to go and you're just gonna be like said

861
00:30:05,399 --> 00:30:07,139
that's the time money trade off a little

862
00:30:07,139 --> 00:30:08,399
bit I said this is sort of unsupported

863
00:30:08,399 --> 00:30:10,379
space you can do some cool things but

864
00:30:10,379 --> 00:30:12,779
you're a little bit on your own yeah one

865
00:30:12,779 --> 00:30:13,860
more real quick and then I'll stick

866
00:30:13,860 --> 00:30:16,789
around afterwards if you got a question

867
00:30:19,220 --> 00:30:26,789
yeah there's a slow down the network to

868
00:30:26,789 --> 00:30:28,200
do the port mirroring when you do it in

869
00:30:28,200 --> 00:30:30,269
hardware in theory it shouldn't I didn't

870
00:30:30,269 --> 00:30:32,070
do any success of performance testing so

871
00:30:32,070 --> 00:30:34,850
I can't speak to that

872
00:30:35,149 --> 00:30:38,879
yeah yeah I didn't have any problems but

873
00:30:38,879 --> 00:30:41,070
I wasn't trying to extensively run a lot

874
00:30:41,070 --> 00:30:43,649
of stuff on him now I have a couple more

875
00:30:43,649 --> 00:30:45,659
prizes to give away and since we're

876
00:30:45,659 --> 00:30:47,789
going into a break I wanted to give you

877
00:30:47,789 --> 00:30:49,440
guys a little bit of a challenge for

878
00:30:49,440 --> 00:30:51,960
this so you can hit my blog if you want

879
00:30:51,960 --> 00:30:54,299
to kind of pick up a few more links

880
00:30:54,299 --> 00:30:56,730
about how to get started but I have one

881
00:30:56,730 --> 00:30:58,860
of these open wrt devices up here

882
00:30:58,860 --> 00:31:00,720
running an access point if you would

883
00:31:00,720 --> 00:31:02,700
like to try to get into it and try to

884
00:31:02,700 --> 00:31:04,500
pull off a little flag off of it you got

885
00:31:04,500 --> 00:31:06,149
about five minutes to do this if you

886
00:31:06,149 --> 00:31:08,519
want to try to pull it off and just come

887
00:31:08,519 --> 00:31:09,990
down here and tell me the code I said

888
00:31:09,990 --> 00:31:11,220
there's two more things here but they

889
00:31:11,220 --> 00:31:12,450
said this is a device that's up here

890
00:31:12,450 --> 00:31:15,269
running open wrt it's got open VPN on it

891
00:31:15,269 --> 00:31:16,919
there's a config there that you can

892
00:31:16,919 --> 00:31:18,659
download and if you want to try

893
00:31:18,659 --> 00:31:19,830
connecting into it to get a little

894
00:31:19,830 --> 00:31:21,059
hands-on and see what this is like

895
00:31:21,059 --> 00:31:23,250
please feel free to jump in and try it

896
00:31:23,250 --> 00:31:25,740
out that anything else

897
00:31:25,740 --> 00:31:29,960
all right thank you very much

