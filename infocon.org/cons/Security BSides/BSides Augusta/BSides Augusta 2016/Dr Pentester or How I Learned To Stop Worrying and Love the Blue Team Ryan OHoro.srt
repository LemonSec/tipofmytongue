1
00:00:00,000 --> 00:00:07,690
it's also thank you

2
00:00:07,690 --> 00:00:23,170
they're all right

3
00:00:24,780 --> 00:00:28,680
yeah

4
00:00:29,510 --> 00:00:34,250
this is your world

5
00:00:34,750 --> 00:00:38,890
is e or Iowa

6
00:00:47,000 --> 00:00:50,000
research of years

7
00:00:54,940 --> 00:01:06,158
so right before i started working on
this presentation I was talking to a

8
00:01:06,159 --> 00:01:12,159
friend of mine and he said something to
defective i wish i had been doing this

9
00:01:12,159 --> 00:01:18,610
all along and it it kind of dawned on me
that life in a way is a series of

10
00:01:18,610 --> 00:01:22,570
moments that you can connect where you
say wow I really wish I'd been doing it

11
00:01:22,570 --> 00:01:24,460
this way all along

12
00:01:24,460 --> 00:01:34,780
so if you guys have recently looked at a
vulnerability report or penetration test

13
00:01:34,780 --> 00:01:39,640
report i want you to kind of think about
what you did with it and what was there

14
00:01:39,640 --> 00:01:45,340
what was missing and this is kind of the
heart of of what this this journey is

15
00:01:45,340 --> 00:01:46,479
for me

16
00:01:46,479 --> 00:01:50,560
so in the industry we use a couple of
different terms for mobility assessment

17
00:01:50,560 --> 00:01:51,729
penetration test

18
00:01:51,729 --> 00:01:56,619
Red Team engagement they're all used and
abused by the marketing department

19
00:01:56,619 --> 00:02:01,479
center in organizations and so sometimes
you'll ask for a fantastic and

20
00:02:01,479 --> 00:02:04,810
vulnerability assessment sometimes lasts
for red teaming engagement and you'll

21
00:02:04,810 --> 00:02:11,470
get a vulnerability assessment and
various different combinations of those

22
00:02:11,470 --> 00:02:12,340
three

23
00:02:12,340 --> 00:02:21,010
unfortunately what happens is you'll end
up with a 300-page vulnerability report

24
00:02:21,010 --> 00:02:26,500
whether it was done with exploits
whether it was done with NASA's and

25
00:02:26,500 --> 00:02:31,420
you'll have to deal with that somehow i
regularly generate 200 and 300 page

26
00:02:31,420 --> 00:02:38,109
vulnerable reports and not for lack of
care for risky issues but merely because

27
00:02:38,110 --> 00:02:41,680
of the size of T environments that i
work in i regularly work in

28
00:02:41,680 --> 00:02:45,819
organizations with a hundred thousand
two hundred thousand nodes and they

29
00:02:45,819 --> 00:02:50,260
asked me to come in and do an internal
network penetration test and it just so

30
00:02:50,260 --> 00:02:56,109
happens that they have enough stuff to
fill a reams of paper and

31
00:02:56,810 --> 00:03:02,000
these vulnerability reports generally
are not the audience of the security

32
00:03:02,000 --> 00:03:05,270
operations team and I'm sure you're all
quite familiar with what a blue team is

33
00:03:05,270 --> 00:03:10,400
this being a very blue kind of
conference the audience of these reports

34
00:03:10,400 --> 00:03:17,599
is actually the developers the IT team
when the blue team ingest vulnerability

35
00:03:17,599 --> 00:03:20,359
reports that they put in the
vulnerability management software and a

36
00:03:20,360 --> 00:03:26,030
triage it so what I really wanted to do
was increase the utility of these

37
00:03:26,030 --> 00:03:29,959
reports for the the blue team or the
security operations team in the

38
00:03:29,959 --> 00:03:35,209
organizations that I was working for so
my very first client at i/o active was a

39
00:03:35,209 --> 00:03:39,560
retailer an online retailer they did
lots and lots of business and we came in

40
00:03:39,560 --> 00:03:44,989
and we did the standard penetration test
got in there got domain admin dumped all

41
00:03:44,989 --> 00:03:48,709
the creds and got all something hundred
and twenty million other credit cards

42
00:03:49,280 --> 00:03:53,959
does this was part of a pci assessment
but they were one of the companies who

43
00:03:53,959 --> 00:03:58,880
said we want a real penetration test so
the entire environment is in scope go

44
00:03:58,880 --> 00:04:02,690
so this one great the first time I went
into the boardroom had all the

45
00:04:02,690 --> 00:04:06,650
executives listening to me present all
these critical vulnerabilities which

46
00:04:06,650 --> 00:04:12,230
lets the complete and utter destruction
of their environment as the defenders

47
00:04:12,230 --> 00:04:17,930
hate to listen to because now here I am
coming in and breaking everything you

48
00:04:17,930 --> 00:04:22,280
guys have worked really hard to protect
and you know that's obviously an awkward

49
00:04:22,280 --> 00:04:27,979
conversation to have but the problem was
that i came back next year and the same

50
00:04:27,979 --> 00:04:32,150
thing happened things that change things
have been patched a lot of things in the

51
00:04:32,150 --> 00:04:36,710
report had been fixed but I got all the
credit cards again and I got all of the

52
00:04:36,710 --> 00:04:38,388
domain password again

53
00:04:38,389 --> 00:04:43,490
third-year same thing fourth-year same
thing and as the years have gone on with

54
00:04:43,490 --> 00:04:47,840
the same client I kept telling myself
how these people are idiots what are

55
00:04:47,840 --> 00:04:52,400
they doing they have five people on
their security team and they can't get

56
00:04:52,400 --> 00:04:57,260
one thing right is to keep me out of
their domain controller and I chew on

57
00:04:57,260 --> 00:05:02,270
that for a while and eventually it
occurred to me maybe it wasn't just that

58
00:05:02,270 --> 00:05:06,620
client maybe I bear some responsibility
for their lack of ability to

59
00:05:07,270 --> 00:05:15,700
mature based on the the work that we
were doing for them so the along those

60
00:05:15,700 --> 00:05:20,500
lines we've been talking about defense
in depth for like ten years like what

61
00:05:20,500 --> 00:05:26,170
even way before I got into security you
know / 89 years ago people were sits a

62
00:05:26,170 --> 00:05:29,350
defense-in-depth is the way to do it
because there's always going to be a

63
00:05:29,350 --> 00:05:34,150
vulnerability and there's it only takes
one right somehow we forgot that

64
00:05:34,150 --> 00:05:39,669
defense-in-depth was a thing and nobody
actually did it and now we we call this

65
00:05:39,670 --> 00:05:43,090
era of security the post of
vulnerability era which is a synonym for

66
00:05:43,090 --> 00:05:45,520
defense in depth because we have to
assume that there's going to be a

67
00:05:45,520 --> 00:05:49,510
vulnerability assume it's going to be
exploited and what we need to be able to

68
00:05:49,510 --> 00:05:51,849
do is detect compromise

69
00:05:51,850 --> 00:05:55,900
regardless of the vulnerabilities in the
environment we can't detect compromise a

70
00:05:55,900 --> 00:05:59,020
we're stuck where we can't respond to
anything

71
00:06:02,320 --> 00:06:08,020
now when you order a penetration test
the guy who comes in to do it thinks

72
00:06:08,020 --> 00:06:12,039
about this this is what's going to
happen they come in they break it

73
00:06:12,040 --> 00:06:17,380
they leave a mess and this is I must be
generally about penetration testers but

74
00:06:17,380 --> 00:06:22,900
this is the general attitude penetration
testers they are there for interesting

75
00:06:22,900 --> 00:06:25,719
work they want to get in they want to
break things and they want to solve

76
00:06:25,720 --> 00:06:29,320
their their problem which is breaking
your environment they don't they're not

77
00:06:29,320 --> 00:06:32,950
interested in solving your problems
which is securing your environment

78
00:06:33,500 --> 00:06:41,210
and unfortunately for most penetration
testers their ego gets in the way their

79
00:06:41,210 --> 00:06:46,460
methodologies opaque they will tell you
exactly how they do their job and

80
00:06:46,460 --> 00:06:51,049
there's a backlash against penetration
testers i went to the dfi our summit in

81
00:06:51,050 --> 00:06:57,110
nola recently and sitting among all of
these blue team members and defence

82
00:06:57,110 --> 00:07:02,120
defence of security people i had they
had nothing but scorn for penetration

83
00:07:02,120 --> 00:07:08,330
testers as i listened to them speak so
one of the first things that I had to

84
00:07:08,330 --> 00:07:11,510
come to terms with was different clients
in different organizations have

85
00:07:11,510 --> 00:07:14,840
different levels of maturity and that
would have to dictate how i went about

86
00:07:14,840 --> 00:07:23,330
doing my penetration testing it in terms
of red team so just to be clear when you

87
00:07:23,330 --> 00:07:26,870
do a red team engagement there's going
to be penetration testing and that

88
00:07:26,870 --> 00:07:30,890
penetration testing needs to have other
components in order to fit within the

89
00:07:30,890 --> 00:07:35,330
model of the red team and if there is no
blue team there is no red team so you

90
00:07:35,330 --> 00:07:38,330
cannot have a red team engagement in an
organization that does not have a blue

91
00:07:38,330 --> 00:07:42,979
team to sit down and work with them just
so those those terms are clear so if

92
00:07:42,979 --> 00:07:45,680
you're not if you're the type of
organization

93
00:07:45,680 --> 00:07:52,850
let's say okay so i was recently i see
it was let's say we want to say it's

94
00:07:52,850 --> 00:07:58,490
2013 i went into a very large
organization i sat in their sock and

95
00:07:58,490 --> 00:08:02,390
this was the first time I spend an
extended period of time in a sock they

96
00:08:02,390 --> 00:08:07,039
had well over 50 people in this stock
and they're processing billions of

97
00:08:07,040 --> 00:08:15,590
events per day and now that's really not
that on her of it's not uncommon but I i

98
00:08:15,590 --> 00:08:20,630
sat down to start my penetration test
and my port turned off and i turned

99
00:08:20,630 --> 00:08:23,780
around the guy behind me is that a man
might my network jacks network and

100
00:08:23,780 --> 00:08:24,229
easily

101
00:08:24,229 --> 00:08:29,240
oh yeah we we probably flags you with
the IPS and turn off your port and I'm

102
00:08:29,240 --> 00:08:33,409
like wow yeah that's pretty cool

103
00:08:34,289 --> 00:08:39,419
I has any of the other clients that have
worked with done that and so I i started

104
00:08:39,419 --> 00:08:42,240
talking to people with a sock and asking
them what they do with their workflow

105
00:08:42,240 --> 00:08:46,889
was and they they were fully mature
organization nothing about what they did

106
00:08:46,889 --> 00:08:51,209
was you could consider deficient
security-wise and was very impressed and

107
00:08:51,209 --> 00:08:57,359
I've modeled everything that I've done
after their operations so you have that

108
00:08:57,360 --> 00:09:01,019
you have company the processes couple
billion events per day all the way down

109
00:09:01,019 --> 00:09:08,399
to what would call a half a security guy
which is the IT guy who also sets the

110
00:09:08,399 --> 00:09:14,430
the passwords on the VPN or ads users or
gets a daily email with events attached

111
00:09:14,430 --> 00:09:18,719
that he's supposed to review for
compliance purposes and this difference

112
00:09:18,720 --> 00:09:23,610
in maturity the spectrum that means that
when I sit down to do a penetration test

113
00:09:23,610 --> 00:09:28,170
or red red team engagement in this case
I have to be able to tune my methodology

114
00:09:28,170 --> 00:09:35,339
to their capability of of detection if
I'm out there doing apt stuff with these

115
00:09:35,339 --> 00:09:40,230
guys with these companies that only have
a half a guy doing security it's it's

116
00:09:40,230 --> 00:09:43,500
wasted on them if they can do basic
detection if they can't do basic

117
00:09:43,500 --> 00:09:48,660
incident response if they can't detect I
car on one of their endpoints there's

118
00:09:48,660 --> 00:09:53,699
there's no point in going full board so
at this point I started gauging my my

119
00:09:53,699 --> 00:09:59,670
clients engaging my uh my projects with
the maturity of the client in mind

120
00:09:59,670 --> 00:10:08,010
instead of just going at my old standbys
over and over again so prevention as i

121
00:10:08,010 --> 00:10:13,319
talked about earlier vulnerability
management is about prevention and

122
00:10:13,319 --> 00:10:19,439
Prevention only vulnerability management
is largely an automated process now so

123
00:10:19,439 --> 00:10:24,569
getting to that level maturity that's
the first step if you can ingest if

124
00:10:24,569 --> 00:10:28,260
you're doing regular scanning of like
necessary quality reports there you go

125
00:10:28,260 --> 00:10:36,029
you're on your way that if you stop at
that point you fail to address real life

126
00:10:36,029 --> 00:10:40,500
threats because as I as I alluded to
earlier there's always going to be a

127
00:10:40,500 --> 00:10:44,220
vulnerability especially vulnerabilities
that nobody else knows about and

128
00:10:44,220 --> 00:10:47,820
it only takes one of those for your
organization to be compromised and you

129
00:10:47,820 --> 00:10:50,820
have to be able to detect the compromise

130
00:10:51,420 --> 00:10:58,740
speaking of detecting the compromise
detection so i was in an organization is

131
00:10:58,740 --> 00:11:02,910
financial financial organization that
payment processing they asked us to come

132
00:11:02,910 --> 00:11:07,380
in after years of doing for us doing
audits for them basically checking boxes

133
00:11:07,380 --> 00:11:12,570
and making sure that you know they said
they were they make sure they answered

134
00:11:12,570 --> 00:11:16,320
correctly to the questions that we were
asking them we've done this for several

135
00:11:16,320 --> 00:11:20,970
years previously the essence come in and
do an actual penetration test and I had

136
00:11:20,970 --> 00:11:26,250
been thinking about that large stock for
many many months and this was the day

137
00:11:26,250 --> 00:11:29,310
that I decided okay so I'm gonna do
something a little bit differently after

138
00:11:29,310 --> 00:11:34,380
performing every action after running
every tool i open up in a snit excel

139
00:11:34,380 --> 00:11:38,220
spreadsheet and added a roll it says
this is the date and time this is the

140
00:11:38,220 --> 00:11:42,420
thing i did and this is where I did it
and at the end of that engagement i

141
00:11:42,420 --> 00:11:46,800
handed that Excel spreadsheet to my
point of contact i said go to your scene

142
00:11:47,370 --> 00:11:52,410
show me exactly where you saw all of
these events happen and he came back to

143
00:11:52,410 --> 00:11:58,350
me 24 hours later he said uh yeah we
didn't detect this one which is minus

144
00:11:58,350 --> 00:12:04,350
the scan of the internal network the tap
has been unplugged we don't know how

145
00:12:04,350 --> 00:12:10,170
long and we don't know who but we
haven't been detecting internal network

146
00:12:10,170 --> 00:12:13,170
events for at least three weeks

147
00:12:14,120 --> 00:12:18,920
and he didn't know because they're
logging ended at three weeks so that box

148
00:12:18,920 --> 00:12:22,370
could have been unplugged for a year and
he would've never known and this was the

149
00:12:22,370 --> 00:12:26,240
aha moment where I said while when I go
in and I do these penetration test I

150
00:12:26,240 --> 00:12:31,130
throw up all of these these indicators
these things that that that nothing that

151
00:12:31,130 --> 00:12:35,029
should not be happening on a network
during a normal workday and if I can

152
00:12:35,029 --> 00:12:40,040
communicate that information to the
client in some way they would they're

153
00:12:40,040 --> 00:12:43,279
gonna be far better off because I can
tell them how to be better at detection

154
00:12:43,279 --> 00:12:47,660
and there is no response without
detection

155
00:12:48,740 --> 00:12:53,510
even if you have an environment that's
that's perfectly free of public

156
00:12:53,510 --> 00:13:00,080
vulnerabilities and let's say somebody
found the the NSA cache of awesomo days

157
00:13:00,080 --> 00:13:05,810
and found your Cisco device which
happens to be vulnerable and you know

158
00:13:05,810 --> 00:13:09,800
maybe you're asleep that day and
somebody popped it you would know

159
00:13:09,800 --> 00:13:15,709
because the your your ability to detect
is deficient if you didn't have logging

160
00:13:15,710 --> 00:13:19,400
on that router to detect the unusual
login behavior from from that particular

161
00:13:19,400 --> 00:13:23,449
attacker there's no way you can you're
gonna respond to it and that's part of

162
00:13:23,450 --> 00:13:29,450
the discussion during these red team
engagements is ok so i did this you need

163
00:13:29,450 --> 00:13:34,310
to do this to detect it and this is the
only way to get to the response face one

164
00:13:34,310 --> 00:13:39,800
of the other things that I needed to
learn about being on a red team is that

165
00:13:39,800 --> 00:13:44,150
it's very hard to do security
engineering and operations you have the

166
00:13:44,150 --> 00:13:48,740
constraints of time you have an
overwhelming number of events to analyze

167
00:13:48,740 --> 00:13:53,150
and categorize and a good portion of
your jobs trying to automate these

168
00:13:53,150 --> 00:13:57,290
processes on a continuous basis
ingesting IOC's making sure they get to

169
00:13:57,290 --> 00:14:03,560
the right place it is initiating
responses and analyzing doing threat

170
00:14:03,560 --> 00:14:08,900
hunting analyzing you know incidents and
things like that it's and you're

171
00:14:08,900 --> 00:14:14,630
constantly fighting your management for
money and time and resources and it for

172
00:14:14,630 --> 00:14:20,420
me to not think about the business and
the impact that my testing has and my

173
00:14:20,420 --> 00:14:25,219
recommendations have on the business if
I just say wow you know if you just

174
00:14:25,220 --> 00:14:26,800
enabled sl-class

175
00:14:26,800 --> 00:14:29,140
certificates on everything in the
organization that would solve all of

176
00:14:29,140 --> 00:14:33,819
your problems obviously managing SL
client certificates across an entire

177
00:14:33,820 --> 00:14:36,820
organization is a daunting task

178
00:14:38,410 --> 00:14:45,640
another thing i really needed to grasp
was that in order to truly give value to

179
00:14:45,640 --> 00:14:49,480
these organizations especially the more
mature ones is that I had to go out i

180
00:14:49,480 --> 00:14:57,220
had to look at the attackers and see
exactly what they were doing the they

181
00:14:57,220 --> 00:15:03,220
need the red team needs to do evil as
evil does and as a penetration tester I

182
00:15:03,220 --> 00:15:08,649
learned to hack in what you might call
safe places I mean you know back in the

183
00:15:08,649 --> 00:15:14,620
AOL proggy days of course you know I i
I've been to law or two but the majority

184
00:15:14,620 --> 00:15:17,860
of my learning experience has been in
environments where I've been permitted

185
00:15:17,860 --> 00:15:23,740
to work and that means the the amount of
noise that I made and the care that i

186
00:15:23,740 --> 00:15:28,630
had to take in order to prevent from
being detected was very was very low in

187
00:15:28,630 --> 00:15:34,000
what I have to learn from attackers and
especially the most advanced of

188
00:15:34,000 --> 00:15:38,890
attention advanced of attackers is to be
quiet and to be stealthy and to not

189
00:15:38,890 --> 00:15:46,810
leave tracks red team engages absolutely
positively need to be goal-oriented

190
00:15:46,810 --> 00:15:54,399
because attackers are goal-oriented I i
recall the the microsoft blog about you

191
00:15:54,399 --> 00:16:00,339
know attackers thinking in graphs and
defenders thinking in lists a graph

192
00:16:00,339 --> 00:16:03,880
leads to a goal a graph these to a
single point an organization they want

193
00:16:03,880 --> 00:16:08,950
to get to that golden egg and if your
red team isn't planning and executing a

194
00:16:08,950 --> 00:16:13,990
Gorean goal-oriented manner with the
business objectives in mind then you're

195
00:16:13,990 --> 00:16:17,130
not being effective as a red team

196
00:16:17,130 --> 00:16:22,860
so in the same vein as emulating
attackers this the tools that I use the

197
00:16:22,860 --> 00:16:29,640
existing tools I use are ok for using in
a red team engagement and that spectrum

198
00:16:29,640 --> 00:16:32,910
of sophistication allows you a little
bit of wiggle room but the most

199
00:16:32,910 --> 00:16:36,510
important thing that I had to do was
learn how to tune the tools effectively

200
00:16:36,510 --> 00:16:39,840
so that they were leaving bread crumbs
all over the place

201
00:16:40,470 --> 00:16:45,630
the very first thing that Stewart
detects is an nmap scan and if you're

202
00:16:45,630 --> 00:16:49,530
out there doing recon on the internal
network with and map like almost hole

203
00:16:49,530 --> 00:16:53,250
penetration testers do you have already
given up

204
00:16:54,030 --> 00:16:58,170
you've already given up essentially
you've a you thrown out the flag the end

205
00:16:58,170 --> 00:17:02,189
map is coming from this host and this is
where the the blue team is going to come

206
00:17:02,190 --> 00:17:03,360
find you

207
00:17:03,360 --> 00:17:07,170
so you can't just dash dash your way

208
00:17:07,829 --> 00:17:13,319
Dashti your way to stealth in the
network you need to do things like scan

209
00:17:13,319 --> 00:17:19,079
a single port once every five seconds on
each host that you're looking at and do

210
00:17:19,079 --> 00:17:24,629
so in a random order across different
routes on the network if you do soup if

211
00:17:24,630 --> 00:17:29,340
you do so sequentially on any given host
you look at the snort rules and you're

212
00:17:29,340 --> 00:17:33,000
gonna get busted and and that's part of
what I do is that I look at these

213
00:17:33,000 --> 00:17:37,230
detection engines and I say how can i
use these tools in order to avoid

214
00:17:37,230 --> 00:17:44,700
detection rules that that the blue
team's are using on and logged elation

215
00:17:44,700 --> 00:17:49,230
by the way I'd never before had to lead
logs before I decided to become more

216
00:17:49,230 --> 00:17:54,330
sneaky most penetration testers wouldn't
bother with that item social engineering

217
00:17:54,330 --> 00:17:58,530
it was really important and it's really
important for any red team to have at

218
00:17:58,530 --> 00:18:03,480
least one person who is good at social
engineering because we're seeing that

219
00:18:03,480 --> 00:18:09,240
probably around fifty percent of
successful breaches originated from

220
00:18:09,240 --> 00:18:14,550
phishing attacks and if you don't know
how to craft a convincing email template

221
00:18:14,550 --> 00:18:18,450
to get someone to open an attachment or
visit the link then you're missing a

222
00:18:18,450 --> 00:18:24,840
huge part of the infiltration phase of
of an actual real live attack and I

223
00:18:24,840 --> 00:18:27,510
learned social engineering well before i
got interested in red teaming just

224
00:18:27,510 --> 00:18:29,879
because i really like lying people lying
to people

225
00:18:29,880 --> 00:18:30,360
it'sit's

226
00:18:30,360 --> 00:18:34,409
a lot of fun i'm really i'm
exceptionally good as a liar

227
00:18:34,410 --> 00:18:37,890
I just I hate I hate lying for the wrong
reasons

228
00:18:37,890 --> 00:18:42,450
so doing social engineering gives me an
outlet for that skill like lock-picking

229
00:18:42,450 --> 00:18:46,320
like you buy some tests locks to fiddle
around with you know you know go to your

230
00:18:46,320 --> 00:18:49,710
place of business and like start trying
to open the data center door

231
00:18:49,710 --> 00:18:57,030
you know you go home and try to open
your clocks and team so it's really

232
00:18:57,030 --> 00:19:02,220
important that a red team be an actual
team with diverse skill sets if you

233
00:19:02,220 --> 00:19:05,310
don't have people who are catching
shells and if you don't have people who

234
00:19:05,310 --> 00:19:12,450
are skilled at building payloads and
doing you know moving laterally on the

235
00:19:12,450 --> 00:19:16,080
network and combining all those skills
and getting different perspectives on

236
00:19:16,080 --> 00:19:20,879
how to execute attacks then you're also
missing the other side the other side of

237
00:19:20,880 --> 00:19:24,840
the coin attackers work in teams they
had they have diverse skill sets you

238
00:19:24,840 --> 00:19:29,459
need to have a mirror of that in your
own red team and ioactive that's what we

239
00:19:29,460 --> 00:19:33,450
strive to do as well uh I I never want
to go in an organization just on my own

240
00:19:33,450 --> 00:19:37,380
and try to do a red team assessment
because then it's just me trying to

241
00:19:37,380 --> 00:19:44,370
figure out this complex ecosystem of
threats so collaboration is really

242
00:19:44,370 --> 00:19:45,179
important

243
00:19:45,180 --> 00:19:49,770
I i suggest that blue team's can be
composed of people from multiple

244
00:19:49,770 --> 00:19:51,480
disciplines within the organization

245
00:19:51,480 --> 00:19:54,990
I mean the blue team should ideally have
three or four people at least on it who

246
00:19:54,990 --> 00:19:59,010
you know people who who look at the
glass people who uh you know in

247
00:19:59,010 --> 00:20:02,310
recommend configurations for for
improvement

248
00:20:02,310 --> 00:20:06,659
yah yah there should be a lot of people
involved in this process the entire

249
00:20:06,660 --> 00:20:12,090
ready in the entire blue team and if and
everyone needs to show up to the table

250
00:20:12,090 --> 00:20:15,209
so when i do red team engagements I
schedule regular checkpoints and

251
00:20:15,210 --> 00:20:18,630
everyone needs to be at checkpoint so
everyone can be on the same page and we

252
00:20:18,630 --> 00:20:22,860
can communicate information back and
forth i can say we did this this week

253
00:20:22,860 --> 00:20:23,879
did you detect it

254
00:20:23,880 --> 00:20:27,390
they say no we didn't detect it ok now
let's have a discussion how we can go

255
00:20:27,390 --> 00:20:30,780
about detecting that type of attack now
I don't need to give up i don't need to

256
00:20:30,780 --> 00:20:33,240
give up the Golden Goose immediately I
don't need to tell them what I'm going

257
00:20:33,240 --> 00:20:37,290
to do in the future that the kind of
thing can stay secret but there needs to

258
00:20:37,290 --> 00:20:40,290
be open and honest communication between
the Red Team Blue team because the red

259
00:20:40,290 --> 00:20:43,149
team is learning from the blue team how
the defense's work and

260
00:20:43,149 --> 00:20:49,508
blue team's learning from the red team
how the attackers work documentation

261
00:20:50,080 --> 00:20:54,639
oh my lord if you ask a penetration
tester to log everything they do they

262
00:20:54,639 --> 00:21:00,758
will look at you like you killed their
dog they have no patience for 44 process

263
00:21:00,759 --> 00:21:06,429
and organization and methodology and
least of all writing stuff down and this

264
00:21:06,429 --> 00:21:10,179
is the only way that I found to turn on
logging and all my tools but in a

265
00:21:10,179 --> 00:21:13,960
centralized place and then summarize it
for the client in order to effectively

266
00:21:13,960 --> 00:21:18,190
communicate the stuff that i did so they
can go find the stuff that i did and

267
00:21:18,190 --> 00:21:21,249
that's what's most important that they
be able to detect what I do not actually

268
00:21:21,249 --> 00:21:24,249
what i do . external teams

269
00:21:24,249 --> 00:21:27,399
I'm extremely biased because i'm a
consultant but i'll tell you a quick

270
00:21:27,399 --> 00:21:28,119
story

271
00:21:28,119 --> 00:21:35,769
um I was talking to some of the red team
leader on a very big client he had a

272
00:21:35,769 --> 00:21:39,759
very large red team and he told me you
know what are blue team is great at

273
00:21:39,759 --> 00:21:46,869
catching our red team and that's about
it so red team's can get stale if

274
00:21:46,869 --> 00:21:51,849
they're not continually refreshed with
new brains and new intelligence the it

275
00:21:51,849 --> 00:21:55,629
can be very easy for your blue team to
detect them uh and they were also using

276
00:21:55,629 --> 00:21:59,439
a standard wrapped package so the blue
team was able to find them based on the

277
00:21:59,440 --> 00:22:04,960
IOC generated by their rap they had to
whitelist their rap in order to help

278
00:22:04,960 --> 00:22:08,769
minimize the impact of using the same
tool over and over again for every red

279
00:22:08,769 --> 00:22:12,219
team engagement that organization so I
feel that bringing in a third party

280
00:22:12,219 --> 00:22:15,519
every once in awhile to keep things
fresh and exciting and THU thiem new

281
00:22:15,519 --> 00:22:20,349
tricks is a great idea for me Intel
gathering was really important because i

282
00:22:20,349 --> 00:22:24,279
have to study the attackers only
continuous basis and i do this i follow

283
00:22:24,279 --> 00:22:28,089
researchers on Twitter primarily to do
this there's lots of interesting mall

284
00:22:28,089 --> 00:22:31,539
where and defensive things and just
being chatted and communicated on in

285
00:22:31,539 --> 00:22:34,389
these circles on twitter i read
publications from different

286
00:22:34,389 --> 00:22:39,008
organizations and vendors and even
government agencies like you know I i

287
00:22:39,009 --> 00:22:41,769
read the stuff that comes out of the NSA
it's like wow that's a really good idea

288
00:22:41,769 --> 00:22:47,799
i'll try that next time and I spent a
lot of my free time studying and

289
00:22:47,799 --> 00:22:53,350
following and mimicking and I do so in
my lab I'm a virtual lab

290
00:22:53,350 --> 00:22:58,030
and I can test all my tools and
techniques in there i have it set up

291
00:22:58,030 --> 00:23:02,918
well on esxi and I have vs which set the
hub mode and I have security onion

292
00:23:02,919 --> 00:23:08,770
installed and i use security onion to
look at what events my attacks are

293
00:23:08,770 --> 00:23:13,990
generating and this is how i can tune my
attacks to minimize the the detection

294
00:23:13,990 --> 00:23:19,299
signatures of my work and that helps me
to continuously improve the blue team by

295
00:23:19,299 --> 00:23:24,940
telling them how to detect me and ethics
so I went to the dfi our summit and this

296
00:23:24,940 --> 00:23:28,150
was my first exposure to large amounts
of blue team members and I saw

297
00:23:28,150 --> 00:23:31,900
presentation by a very large company who
had created a tool that's designed to be

298
00:23:31,900 --> 00:23:36,130
installed on every single and . on the
network and that tool allows them to

299
00:23:36,130 --> 00:23:42,460
query on disk and eat in memory any grip
string that you could come up with and

300
00:23:42,460 --> 00:23:48,789
that meant that that person or that team
that had control that to tool was the

301
00:23:48,789 --> 00:23:54,190
NSA of their corporation and you you you
generally I think most guys are blue

302
00:23:54,190 --> 00:23:59,350
side use the blue team are the NSA of
your corporations and me is a red team

303
00:23:59,350 --> 00:24:03,070
I'm the attacker I'm the China the
corporation we're both going to

304
00:24:03,070 --> 00:24:08,408
encounter stuff out there on the network
that people think or find personal to

305
00:24:08,409 --> 00:24:11,919
them like we say yet to work at it's a
corporate asset they shouldn't be doing

306
00:24:11,919 --> 00:24:15,039
personal stuff but we need to be very
mindful of the fact that these are real

307
00:24:15,039 --> 00:24:19,240
people doing real things that lives they
need to talk on Twitter they look at

308
00:24:19,240 --> 00:24:23,230
youtube occasionally and download stuff
to their workstations so if you find

309
00:24:23,230 --> 00:24:28,030
stuff be very cautious about how you
deal with that

310
00:24:30,169 --> 00:24:42,139
thank you very much I appreciate you
guys listening are the questions let's

311
00:24:42,139 --> 00:24:58,158
see i did ok without detection there can
be no somebody said it you said response

312
00:24:58,850 --> 00:25:10,279
Yeah right there yeah

