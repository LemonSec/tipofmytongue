1
00:00:00,000 --> 00:00:04,380
all right thank you everyone for

2
00:00:02,250 --> 00:00:07,109
sticking around those those are great

3
00:00:04,380 --> 00:00:08,670
talks earlier on but I would like to get

4
00:00:07,109 --> 00:00:10,559
started with our next talk and introduce

5
00:00:08,670 --> 00:00:13,259
our next speakers I'd like to introduce

6
00:00:10,559 --> 00:00:19,410
Peter and John and they'll be doing our

7
00:00:13,259 --> 00:00:20,760
next talk thank you hi everybody thanks

8
00:00:19,410 --> 00:00:22,740
for having us

9
00:00:20,760 --> 00:00:25,140
my name is Peter Smith I'm the founder

10
00:00:22,740 --> 00:00:28,528
and CEO of edgewise Networks I'm joined

11
00:00:25,140 --> 00:00:30,449
here by actually our first first

12
00:00:28,529 --> 00:00:35,760
employee and chief data scientist John

13
00:00:30,449 --> 00:00:39,120
O'Neill John is the brains behind the

14
00:00:35,760 --> 00:00:42,089
operation he's actually dr. John O'Neill

15
00:00:39,120 --> 00:00:44,610
PhD from Harvard in a variety of things

16
00:00:42,090 --> 00:00:49,050
he'll be giving his talk in French or

17
00:00:44,610 --> 00:00:50,250
Italian his ph.d is in linguistics Oh

18
00:00:49,050 --> 00:00:52,589
Sanskrit perfect

19
00:00:50,250 --> 00:00:55,350
so no we'll try to keep it to English

20
00:00:52,590 --> 00:00:57,690
and the the point of the talk is really

21
00:00:55,350 --> 00:01:00,270
about how do we establish multiple

22
00:00:57,690 --> 00:01:04,378
different perspectives on our network

23
00:01:00,270 --> 00:01:08,189
attack surface and so I was at blackhat

24
00:01:04,379 --> 00:01:10,350
this past season and I was standing in

25
00:01:08,189 --> 00:01:12,630
line at a Starbucks for coffee I see

26
00:01:10,350 --> 00:01:14,309
this kid walk up to an ice cooler he

27
00:01:12,630 --> 00:01:16,320
grabs a bottle of milk and drops in in

28
00:01:14,310 --> 00:01:20,189
his pocket and I'm like wow that is

29
00:01:16,320 --> 00:01:22,860
brazen at a casino to steal something

30
00:01:20,189 --> 00:01:24,750
and so I immediately look around to see

31
00:01:22,860 --> 00:01:27,630
where the cameras are and I noticed a

32
00:01:24,750 --> 00:01:29,340
bunch of them and the thing was that the

33
00:01:27,630 --> 00:01:31,079
environment had changed there were other

34
00:01:29,340 --> 00:01:33,150
people surrounding this kid so from

35
00:01:31,079 --> 00:01:35,548
every perspective that the camera was in

36
00:01:33,150 --> 00:01:38,070
they couldn't see this kid put something

37
00:01:35,549 --> 00:01:40,829
in his pocket and it got me thinking you

38
00:01:38,070 --> 00:01:43,199
know perspective is really the most

39
00:01:40,829 --> 00:01:45,720
important aspect of observing your

40
00:01:43,200 --> 00:01:48,720
network and the majority of what we do

41
00:01:45,720 --> 00:01:51,658
today is a fixed perspective and it's in

42
00:01:48,720 --> 00:01:53,850
most cases actually just a single point

43
00:01:51,659 --> 00:01:55,710
of view of the network and how can we

44
00:01:53,850 --> 00:01:58,140
broaden that to do some interesting

45
00:01:55,710 --> 00:02:00,059
things I I won't kill the punchline I'll

46
00:01:58,140 --> 00:02:03,390
save the interesting things for later on

47
00:02:00,060 --> 00:02:04,590
in the talk but quick agenda here I'll

48
00:02:03,390 --> 00:02:07,320
give you a little background on the

49
00:02:04,590 --> 00:02:10,020
problem we'll talk about what we're

50
00:02:07,320 --> 00:02:11,200
doing today as a solution why we think

51
00:02:10,020 --> 00:02:13,450
there's a better approach

52
00:02:11,200 --> 00:02:15,640
everything that we show you is free

53
00:02:13,450 --> 00:02:17,649
open-source it's something that John's

54
00:02:15,640 --> 00:02:20,079
been working on as as somewhat of a side

55
00:02:17,650 --> 00:02:23,410
project at edgewise and it's on a github

56
00:02:20,080 --> 00:02:25,599
repository which will we'll share at the

57
00:02:23,410 --> 00:02:27,220
end and then we'll cover why it's a

58
00:02:25,599 --> 00:02:29,049
better solution and then I'll hand it

59
00:02:27,220 --> 00:02:30,819
over to John and John's gonna get into

60
00:02:29,050 --> 00:02:33,310
the details of what this thing actually

61
00:02:30,819 --> 00:02:35,829
is how it works right down to the graph

62
00:02:33,310 --> 00:02:39,760
analysis that we're using to to make all

63
00:02:35,830 --> 00:02:42,099
of it function so there could have been

64
00:02:39,760 --> 00:02:43,600
a different title for the presentation

65
00:02:42,099 --> 00:02:44,980
it could have been it's all a matter of

66
00:02:43,600 --> 00:02:46,959
perspective right

67
00:02:44,980 --> 00:02:52,000
instead of multi-dimensional attack path

68
00:02:46,959 --> 00:02:53,410
analysis which sounds very very fancy so

69
00:02:52,000 --> 00:02:56,230
what I mean by a difference in

70
00:02:53,410 --> 00:02:58,630
perspective I have one perspective of

71
00:02:56,230 --> 00:02:59,920
you guys right now right I'm looking at

72
00:02:58,630 --> 00:03:01,690
all of you I can see all of you

73
00:02:59,920 --> 00:03:04,238
individually that's that's a single

74
00:03:01,690 --> 00:03:05,829
perspective me looking out into you the

75
00:03:04,239 --> 00:03:07,989
network we do this every day

76
00:03:05,830 --> 00:03:10,560
that's a nmap scanner sitting on some

77
00:03:07,989 --> 00:03:13,480
box scanning your network right

78
00:03:10,560 --> 00:03:16,269
multi-perspective would be distributed

79
00:03:13,480 --> 00:03:17,649
nmap you're all running and map looking

80
00:03:16,269 --> 00:03:19,510
at me looking at your neighbors I'm

81
00:03:17,650 --> 00:03:20,739
looking at you we aggregate the data and

82
00:03:19,510 --> 00:03:23,560
now we've got a multi-dimensional

83
00:03:20,739 --> 00:03:26,609
perspective of the attack surface of the

84
00:03:23,560 --> 00:03:29,590
network now the next part is position

85
00:03:26,609 --> 00:03:32,500
right now because of this microphone I

86
00:03:29,590 --> 00:03:35,260
have a fixed position I can only see the

87
00:03:32,500 --> 00:03:39,040
Front's of you but there's no reason

88
00:03:35,260 --> 00:03:42,340
that I couldn't walk around and see the

89
00:03:39,040 --> 00:03:44,950
backs of you and so the position is also

90
00:03:42,340 --> 00:03:47,230
important can I change my orientation

91
00:03:44,950 --> 00:03:48,970
relative to the attack surface do I have

92
00:03:47,230 --> 00:03:51,010
a single view of the attack surface or

93
00:03:48,970 --> 00:03:52,810
multiple views of the attack surface and

94
00:03:51,010 --> 00:03:55,298
there's really interesting things you

95
00:03:52,810 --> 00:03:57,160
can do once you have all of this data in

96
00:03:55,299 --> 00:03:59,980
one place and you can do some analytics

97
00:03:57,160 --> 00:04:02,680
on it but before that I think there are

98
00:03:59,980 --> 00:04:04,780
some interesting physical analogues to

99
00:04:02,680 --> 00:04:07,480
this that are worth pointing out just to

100
00:04:04,780 --> 00:04:10,359
make the points crystal clear here so

101
00:04:07,480 --> 00:04:12,970
this is a friendly neighborhood coffee

102
00:04:10,359 --> 00:04:15,730
shop and what it's showing you is the

103
00:04:12,970 --> 00:04:17,880
perspective in the coffee shop of their

104
00:04:15,730 --> 00:04:20,709
camera it is a single perspective

105
00:04:17,880 --> 00:04:23,289
looking over the counter into the

106
00:04:20,709 --> 00:04:24,000
customer environment and it's a fixed

107
00:04:23,289 --> 00:04:27,270
position

108
00:04:24,000 --> 00:04:30,690
I think it's actually kind of

109
00:04:27,270 --> 00:04:32,250
interesting as a side note that a lot of

110
00:04:30,690 --> 00:04:34,860
these camera angles that you're about to

111
00:04:32,250 --> 00:04:38,040
see they are indicative of sort of our

112
00:04:34,860 --> 00:04:40,350
social values when you look at this and

113
00:04:38,040 --> 00:04:42,330
what what it's saying is that there is

114
00:04:40,350 --> 00:04:45,150
no camera down into the registers cash

115
00:04:42,330 --> 00:04:46,800
drawer so they trust the customers or at

116
00:04:45,150 --> 00:04:48,450
least they feel like their processes

117
00:04:46,800 --> 00:04:50,100
would figure out if somebody was

118
00:04:48,450 --> 00:04:52,560
stealing cash out of it

119
00:04:50,100 --> 00:04:55,140
they aren't monitoring the clerk's they

120
00:04:52,560 --> 00:04:57,360
are just looking at the customers now if

121
00:04:55,140 --> 00:04:59,969
we change our view this is a you know

122
00:04:57,360 --> 00:05:03,180
any cyber security conference blackhat

123
00:04:59,970 --> 00:05:05,580
or a casino what we see here is 22

124
00:05:03,180 --> 00:05:07,350
cameras just in this one view here it's

125
00:05:05,580 --> 00:05:09,719
multi perspective but they are also

126
00:05:07,350 --> 00:05:12,390
fixed position right they've got a lot

127
00:05:09,720 --> 00:05:16,890
of different dimensions of visualization

128
00:05:12,390 --> 00:05:20,190
of the total attack surface now we could

129
00:05:16,890 --> 00:05:22,620
do something else which is actuated

130
00:05:20,190 --> 00:05:25,560
cameras change your orientation or a

131
00:05:22,620 --> 00:05:28,080
robotic camera actually I used to work

132
00:05:25,560 --> 00:05:30,479
out of Manhattan for a company in Boston

133
00:05:28,080 --> 00:05:32,490
and I had one of these robots in the

134
00:05:30,479 --> 00:05:35,460
office and even though I had a fixed

135
00:05:32,490 --> 00:05:37,800
position or perspective I I could

136
00:05:35,460 --> 00:05:40,049
actually move myself around so I could

137
00:05:37,800 --> 00:05:43,050
get different orientations and views of

138
00:05:40,050 --> 00:05:47,250
of my surroundings you can take this to

139
00:05:43,050 --> 00:05:50,580
an extreme and what we have is drone

140
00:05:47,250 --> 00:05:53,010
swarms right so each independently

141
00:05:50,580 --> 00:05:55,289
movable and each with its own

142
00:05:53,010 --> 00:05:56,789
perspective I mean the military does

143
00:05:55,290 --> 00:05:58,950
this on a daily basis right you're

144
00:05:56,790 --> 00:06:01,740
surrounding an object to get every

145
00:05:58,950 --> 00:06:04,740
vantage point you can each individually

146
00:06:01,740 --> 00:06:06,660
moveable so I thought it would be

147
00:06:04,740 --> 00:06:08,790
interesting to do a case study so I

148
00:06:06,660 --> 00:06:12,210
walked into a convenience store with the

149
00:06:08,790 --> 00:06:14,280
camera to see what their perspective was

150
00:06:12,210 --> 00:06:18,120
in terms of the floor layout what the

151
00:06:14,280 --> 00:06:20,400
obstacles were from your ability to look

152
00:06:18,120 --> 00:06:22,620
into aisles so on and so forth and how

153
00:06:20,400 --> 00:06:24,150
they position cameras so what you can

154
00:06:22,620 --> 00:06:26,460
see here is through the front door

155
00:06:24,150 --> 00:06:28,469
there's two cameras when you're looking

156
00:06:26,460 --> 00:06:30,989
down an aisle it's worth noting there

157
00:06:28,470 --> 00:06:33,180
are four aisles only two of them have

158
00:06:30,990 --> 00:06:35,340
camera coverage and then the cash

159
00:06:33,180 --> 00:06:37,840
register again this is a social values

160
00:06:35,340 --> 00:06:40,510
problem the cash register has three

161
00:06:37,840 --> 00:06:42,400
cameras a cash drawer camera they

162
00:06:40,510 --> 00:06:43,870
clearly are looking for the insider

163
00:06:42,400 --> 00:06:46,210
threat stealing money out of the cash

164
00:06:43,870 --> 00:06:48,070
drawer there's the perspective of the

165
00:06:46,210 --> 00:06:49,900
customer at the counter and then there's

166
00:06:48,070 --> 00:06:52,630
the perspective of the clerk at the

167
00:06:49,900 --> 00:06:53,859
counter so I think what this tells us is

168
00:06:52,630 --> 00:06:56,260
they don't care about people stealing

169
00:06:53,860 --> 00:06:58,900
candy bars and aisles because they can't

170
00:06:56,260 --> 00:07:01,210
even see down 50% of their aisles they

171
00:06:58,900 --> 00:07:05,560
clearly care about the cash in the cash

172
00:07:01,210 --> 00:07:07,000
drawer so what I did and I is anybody

173
00:07:05,560 --> 00:07:10,810
here willing to admit that they watch

174
00:07:07,000 --> 00:07:12,639
the property brothers on HGTV okay okay

175
00:07:10,810 --> 00:07:13,900
perfect so this is the property brothers

176
00:07:12,639 --> 00:07:15,880
view where we're gonna do the Home

177
00:07:13,900 --> 00:07:17,710
Makeover here we're gonna drop in the

178
00:07:15,880 --> 00:07:19,800
counter with the cash register put in a

179
00:07:17,710 --> 00:07:22,030
couple Isles we're gonna put the cooler

180
00:07:19,800 --> 00:07:24,250
around the sides and then the door at

181
00:07:22,030 --> 00:07:25,989
the back and we'll drop in the cameras

182
00:07:24,250 --> 00:07:27,190
just as I saw them in the photos so

183
00:07:25,990 --> 00:07:29,410
there was the camera that was on the

184
00:07:27,190 --> 00:07:31,840
front door there were actually three

185
00:07:29,410 --> 00:07:34,840
cameras on the cash register there were

186
00:07:31,840 --> 00:07:36,880
two cameras on four aisles and there was

187
00:07:34,840 --> 00:07:39,159
a camera in an open general space and

188
00:07:36,880 --> 00:07:42,969
and what we can see here is that there's

189
00:07:39,160 --> 00:07:45,430
actually quite a bit of gaps in their

190
00:07:42,970 --> 00:07:46,780
view two of the aisles aren't covered

191
00:07:45,430 --> 00:07:48,340
there's the back corridor that's not

192
00:07:46,780 --> 00:07:51,400
covered in this general open space

193
00:07:48,340 --> 00:07:53,679
that's not covered so really what my

194
00:07:51,400 --> 00:07:55,870
point is here is that when we limit our

195
00:07:53,680 --> 00:07:57,849
perspective of the attack surface by

196
00:07:55,870 --> 00:08:00,250
having fixed vantage points or single

197
00:07:57,849 --> 00:08:02,469
views what we're doing is leaving blind

198
00:08:00,250 --> 00:08:06,010
spots whether that's your network or the

199
00:08:02,470 --> 00:08:09,070
local convenience store so I'm sure

200
00:08:06,010 --> 00:08:11,729
you're all wondering why am I talking

201
00:08:09,070 --> 00:08:15,960
about convenience stores and stuff yeah

202
00:08:11,729 --> 00:08:20,500
it is highly relevant to cyber security

203
00:08:15,960 --> 00:08:22,180
and it's because of this how do we scan

204
00:08:20,500 --> 00:08:23,860
our networks do we use single

205
00:08:22,180 --> 00:08:26,110
perspective or do we use multi

206
00:08:23,860 --> 00:08:28,660
perspective if you've got a rapid7

207
00:08:26,110 --> 00:08:30,849
scanner that is sitting on some box in

208
00:08:28,660 --> 00:08:33,250
some secure Enclave that has all of your

209
00:08:30,849 --> 00:08:36,098
security tools you are using a single

210
00:08:33,250 --> 00:08:40,450
perspective and it is a fixed position

211
00:08:36,099 --> 00:08:42,610
it's not changing so what are other

212
00:08:40,450 --> 00:08:44,709
examples where it would be multi

213
00:08:42,610 --> 00:08:47,200
perspective if you're if you have a sim

214
00:08:44,709 --> 00:08:49,239
that's multi perspective right you're

215
00:08:47,200 --> 00:08:50,110
aggregating logs and correlating the

216
00:08:49,240 --> 00:08:52,600
events from

217
00:08:50,110 --> 00:08:54,880
multiple distinct perspectives if you're

218
00:08:52,600 --> 00:08:57,820
using insite IDR from rapid7

219
00:08:54,880 --> 00:08:58,959
as an example and I obviously don't work

220
00:08:57,820 --> 00:09:02,260
for them but I'm a big fan of that

221
00:08:58,959 --> 00:09:04,239
product you would be collecting this

222
00:09:02,260 --> 00:09:07,360
sort of information from desktops which

223
00:09:04,240 --> 00:09:09,820
are moveable devices so that's an

224
00:09:07,360 --> 00:09:12,550
example of multiple perspectives on

225
00:09:09,820 --> 00:09:15,220
moveable devices aggregated into a

226
00:09:12,550 --> 00:09:18,459
single location and having correlation

227
00:09:15,220 --> 00:09:21,160
done across it so what is the real main

228
00:09:18,459 --> 00:09:23,949
point of this talk it's it's this it's

229
00:09:21,160 --> 00:09:26,589
that one of the most important things we

230
00:09:23,950 --> 00:09:28,480
do we do from a single perspective and

231
00:09:26,589 --> 00:09:30,880
we should start doing it from a multi

232
00:09:28,480 --> 00:09:33,910
perspective to get the multi-dimensional

233
00:09:30,880 --> 00:09:35,589
data and that is network scanning so

234
00:09:33,910 --> 00:09:37,449
right now you're gonna scan your network

235
00:09:35,589 --> 00:09:39,459
with a single end map and you're gonna

236
00:09:37,450 --> 00:09:41,829
tell your administrators to open up the

237
00:09:39,459 --> 00:09:44,079
firewalls to allow access so that your

238
00:09:41,829 --> 00:09:45,729
end map can see everything well that's

239
00:09:44,079 --> 00:09:47,709
great that it can see everything but

240
00:09:45,730 --> 00:09:49,420
what it can't see is what the pathways

241
00:09:47,709 --> 00:09:52,060
are between the hosts that you just

242
00:09:49,420 --> 00:09:54,160
scanned those are the pathways that the

243
00:09:52,060 --> 00:09:56,140
attacker can use to move laterally and

244
00:09:54,160 --> 00:09:57,790
you don't actually know what the

245
00:09:56,140 --> 00:09:59,560
perspective is from the domain

246
00:09:57,790 --> 00:10:00,519
controller what the perspective is from

247
00:09:59,560 --> 00:10:02,439
the file server

248
00:10:00,519 --> 00:10:05,709
you know the perspective from the

249
00:10:02,440 --> 00:10:09,250
perspective of the nmap system so what

250
00:10:05,709 --> 00:10:12,099
if I told you that we could make every

251
00:10:09,250 --> 00:10:14,500
system in end map and every system

252
00:10:12,100 --> 00:10:17,079
scanned every other system so you have

253
00:10:14,500 --> 00:10:19,480
this multi-dimensional view of the total

254
00:10:17,079 --> 00:10:22,449
attack surface of the network instead of

255
00:10:19,480 --> 00:10:24,610
me telling you that the network looks

256
00:10:22,449 --> 00:10:27,370
like this from the scanners perspective

257
00:10:24,610 --> 00:10:29,680
I can actually tell you what the network

258
00:10:27,370 --> 00:10:34,709
looks like from every perspective and

259
00:10:29,680 --> 00:10:37,959
that's super powerful and when I say

260
00:10:34,709 --> 00:10:39,430
we're gonna make every device and map

261
00:10:37,959 --> 00:10:41,529
scanner in the bottom right hand corner

262
00:10:39,430 --> 00:10:44,079
there I'm actually saying that you would

263
00:10:41,529 --> 00:10:45,490
deploy and map or distributed and map to

264
00:10:44,079 --> 00:10:47,560
every one of your servers every one of

265
00:10:45,490 --> 00:10:49,420
your cloud instances I mean if you're up

266
00:10:47,560 --> 00:10:53,380
for it you could do it to desktops as

267
00:10:49,420 --> 00:10:55,630
well and once you a great this data then

268
00:10:53,380 --> 00:10:56,380
there's one more step to make it really

269
00:10:55,630 --> 00:10:58,510
compelling

270
00:10:56,380 --> 00:11:00,640
what if we could overlay the

271
00:10:58,510 --> 00:11:03,459
vulnerability information for all of the

272
00:11:00,640 --> 00:11:04,240
scan ports onto the edges of these

273
00:11:03,459 --> 00:11:07,149
connected

274
00:11:04,240 --> 00:11:09,130
to seize every host is a vertex right

275
00:11:07,149 --> 00:11:10,779
and they're connected by edges which are

276
00:11:09,130 --> 00:11:13,360
the paths that you've learned from the

277
00:11:10,779 --> 00:11:15,399
end map scanning and if I can overlay

278
00:11:13,360 --> 00:11:18,010
vulnerability data then you know what I

279
00:11:15,399 --> 00:11:21,550
can do I can do a graph analysis to

280
00:11:18,010 --> 00:11:25,060
identify the open shortest paths between

281
00:11:21,550 --> 00:11:26,380
any two points so the one on the left

282
00:11:25,060 --> 00:11:28,540
might be the internet the one on the

283
00:11:26,380 --> 00:11:30,760
right might be a court database with all

284
00:11:28,540 --> 00:11:33,640
of your credit card information and if I

285
00:11:30,760 --> 00:11:35,439
know the connectivity and the potential

286
00:11:33,640 --> 00:11:38,500
connectivity this is not used path

287
00:11:35,440 --> 00:11:41,649
scanning is telling me what is possible

288
00:11:38,500 --> 00:11:44,200
not what is used that's the purpose of

289
00:11:41,649 --> 00:11:46,180
nmap right so if I can say that there is

290
00:11:44,200 --> 00:11:48,010
potential connectivity between all of

291
00:11:46,180 --> 00:11:50,170
these and the services that are

292
00:11:48,010 --> 00:11:52,300
listening are vulnerable then it's one

293
00:11:50,170 --> 00:11:55,810
graph analysis away from telling you a

294
00:11:52,300 --> 00:11:58,149
path from a vulnerable entry point to

295
00:11:55,810 --> 00:12:00,939
the vulnerable target through the mesh

296
00:11:58,149 --> 00:12:03,010
of services and that's exactly what

297
00:12:00,940 --> 00:12:06,399
we're gonna do and John's gonna show you

298
00:12:03,010 --> 00:12:08,740
how that works before we get there why

299
00:12:06,399 --> 00:12:13,329
do you care about this well you care

300
00:12:08,740 --> 00:12:14,770
about it because there are 19 Vollmer

301
00:12:13,329 --> 00:12:16,390
abilities published every day four of

302
00:12:14,770 --> 00:12:18,730
them are critical remote exploit route

303
00:12:16,390 --> 00:12:20,890
compromise it takes an average of 50

304
00:12:18,730 --> 00:12:22,839
days if you've got everything in order

305
00:12:20,890 --> 00:12:24,760
to remediate on average across the

306
00:12:22,839 --> 00:12:27,190
industry and what that means is that

307
00:12:24,760 --> 00:12:30,670
there's perpetual exposure and you are

308
00:12:27,190 --> 00:12:33,100
likely needing to prioritize what better

309
00:12:30,670 --> 00:12:35,229
way to prioritize than to identify core

310
00:12:33,100 --> 00:12:37,390
assets the paths to them that are

311
00:12:35,230 --> 00:12:40,029
vulnerable and start picking off the

312
00:12:37,390 --> 00:12:41,110
closest vulnerable paths first and then

313
00:12:40,029 --> 00:12:42,939
focus on the rest

314
00:12:41,110 --> 00:12:47,980
so prioritization is number one number

315
00:12:42,940 --> 00:12:50,140
two its to fortify the paths from

316
00:12:47,980 --> 00:12:51,970
intricate internet-connected systems so

317
00:12:50,140 --> 00:12:54,370
you know your core assets and you can

318
00:12:51,970 --> 00:12:55,990
easily identify with this approach every

319
00:12:54,370 --> 00:12:58,540
entry point that receives globally

320
00:12:55,990 --> 00:13:00,250
routable address space so now that you

321
00:12:58,540 --> 00:13:02,020
know all of your globally routable entry

322
00:13:00,250 --> 00:13:04,690
points and you know your asset you can

323
00:13:02,020 --> 00:13:06,370
map every path between them and the

324
00:13:04,690 --> 00:13:08,649
point is do you have appropriate

325
00:13:06,370 --> 00:13:10,899
controls in place at all of those

326
00:13:08,649 --> 00:13:13,900
intermediate junctures in the network if

327
00:13:10,899 --> 00:13:16,130
not you've you've got a task to do that

328
00:13:13,900 --> 00:13:18,439
is a very clear

329
00:13:16,130 --> 00:13:22,490
gap that needs to be closed number three

330
00:13:18,440 --> 00:13:24,470
is network overexposure so it's probably

331
00:13:22,490 --> 00:13:27,230
not a familiar term it's something that

332
00:13:24,470 --> 00:13:29,780
we made up at edgewise but network

333
00:13:27,230 --> 00:13:31,820
overexposure is how many paths to a

334
00:13:29,780 --> 00:13:34,010
given target did I discover versus how

335
00:13:31,820 --> 00:13:35,690
many of those are actually needed so

336
00:13:34,010 --> 00:13:37,880
I've got a database that receipt that

337
00:13:35,690 --> 00:13:40,220
has the potential to accept 100

338
00:13:37,880 --> 00:13:42,080
connections from various sources yet

339
00:13:40,220 --> 00:13:44,600
only ten of them are actually needed I'm

340
00:13:42,080 --> 00:13:46,760
ten times more exposed on that database

341
00:13:44,600 --> 00:13:48,950
than is necessary so how do you

342
00:13:46,760 --> 00:13:51,080
accomplish lease privilege access on the

343
00:13:48,950 --> 00:13:53,510
network to ensure that only the required

344
00:13:51,080 --> 00:13:56,390
entities are communicating and only the

345
00:13:53,510 --> 00:13:58,790
required entities can communicate so

346
00:13:56,390 --> 00:14:00,890
this is sort of laying the groundwork

347
00:13:58,790 --> 00:14:02,870
for a segmentation project or micro

348
00:14:00,890 --> 00:14:07,420
segmentation or something that would

349
00:14:02,870 --> 00:14:10,790
constrain access to those core resources

350
00:14:07,420 --> 00:14:12,740
I think at the end we should we should

351
00:14:10,790 --> 00:14:15,110
have a chat about how would you use this

352
00:14:12,740 --> 00:14:17,360
data this is just three possible options

353
00:14:15,110 --> 00:14:20,180
there's a multitude of ways you could

354
00:14:17,360 --> 00:14:23,390
leverage this data before I hand it off

355
00:14:20,180 --> 00:14:25,310
to John the only thing that you didn't

356
00:14:23,390 --> 00:14:27,470
come here to learn how to use nmap I'm

357
00:14:25,310 --> 00:14:30,410
sure everybody in this room knows how a

358
00:14:27,470 --> 00:14:33,470
map I just brought this slide up to

359
00:14:30,410 --> 00:14:35,600
point out that there are really two ways

360
00:14:33,470 --> 00:14:38,600
to get this highly dimensional data

361
00:14:35,600 --> 00:14:41,060
number one you can use the N map a

362
00:14:38,600 --> 00:14:43,160
distributed end map which is really just

363
00:14:41,060 --> 00:14:45,920
a wrapper that orchestrates some of the

364
00:14:43,160 --> 00:14:48,380
heavy lifting around collecting these

365
00:14:45,920 --> 00:14:51,500
and map files from a variety of sources

366
00:14:48,380 --> 00:14:53,510
but probably the easiest way is just to

367
00:14:51,500 --> 00:14:56,390
use a configuration management system

368
00:14:53,510 --> 00:14:59,180
puppet chef ansible saltstack SCCM

369
00:14:56,390 --> 00:15:02,110
whatever whatever you happen to use and

370
00:14:59,180 --> 00:15:04,520
you can just have execute the end map

371
00:15:02,110 --> 00:15:06,980
you're gonna give it a very broad set of

372
00:15:04,520 --> 00:15:09,290
ranges that it should scan and then

373
00:15:06,980 --> 00:15:11,600
collect the resulting file and once you

374
00:15:09,290 --> 00:15:14,329
have that that's when what John is about

375
00:15:11,600 --> 00:15:16,100
to tell you is really important so

376
00:15:14,330 --> 00:15:20,630
everything he's about to tell you is

377
00:15:16,100 --> 00:15:22,070
available here we will I have the domain

378
00:15:20,630 --> 00:15:24,860
attack path com

379
00:15:22,070 --> 00:15:27,800
I hadn't had enough time to redirect it

380
00:15:24,860 --> 00:15:28,930
to this but over the coming days I will

381
00:15:27,800 --> 00:15:33,729
redirect attack

382
00:15:28,930 --> 00:15:58,560
half.com to that URL and without here's

383
00:15:33,730 --> 00:16:01,839
John worked good

384
00:15:58,560 --> 00:16:05,439
in fact when originally in the slide he

385
00:16:01,839 --> 00:16:08,440
had attacked path calm then calm and I

386
00:16:05,440 --> 00:16:09,880
thought oh he's making a joke waiting

387
00:16:08,440 --> 00:16:13,480
for me to put it in the right you are on

388
00:16:09,880 --> 00:16:17,830
anyway so um this is uh not too much a

389
00:16:13,480 --> 00:16:20,830
slide as it is a Jupiter spread notebook

390
00:16:17,830 --> 00:16:22,779
so hope you don't mind that too much I

391
00:16:20,830 --> 00:16:25,060
was all been writing writing this code

392
00:16:22,779 --> 00:16:26,380
in real time so if you like going to the

393
00:16:25,060 --> 00:16:30,270
circuits to see people falling off the

394
00:16:26,380 --> 00:16:32,350
high high wire this is where to be so

395
00:16:30,270 --> 00:16:33,279
what I did of course was writing this in

396
00:16:32,350 --> 00:16:35,920
Python

397
00:16:33,279 --> 00:16:38,830
I had actually I was out of the office

398
00:16:35,920 --> 00:16:39,910
until Thursday morning and then I was

399
00:16:38,830 --> 00:16:42,490
told by the way how would you like to do

400
00:16:39,910 --> 00:16:45,670
a talk on Saturday sure no problem

401
00:16:42,490 --> 00:16:47,110
oh can you do this and can you hear

402
00:16:45,670 --> 00:16:48,760
here's the here's the here's the

403
00:16:47,110 --> 00:16:50,680
description can you can you program this

404
00:16:48,760 --> 00:16:52,600
on sit well I've got something already

405
00:16:50,680 --> 00:16:53,709
done so I guess so yeah so let's see

406
00:16:52,600 --> 00:16:56,770
what happens so this I'm just importing

407
00:16:53,709 --> 00:16:58,660
stuff here know what we're actually

408
00:16:56,770 --> 00:17:00,520
actually doing here is starting with the

409
00:16:58,660 --> 00:17:03,189
end map data which Peter just talked

410
00:17:00,520 --> 00:17:04,750
about which in which implicitly has

411
00:17:03,190 --> 00:17:07,380
inside of it all the network topology we

412
00:17:04,750 --> 00:17:09,730
need to Bill we want to import that and

413
00:17:07,380 --> 00:17:13,209
I won't go into that deeply cuz it's

414
00:17:09,730 --> 00:17:16,449
really boring to parse files and not too

415
00:17:13,209 --> 00:17:21,040
hard but taking that and then turning it

416
00:17:16,449 --> 00:17:22,839
into a graph structure using that graph

417
00:17:21,040 --> 00:17:24,849
and then we'll use that graph you know

418
00:17:22,839 --> 00:17:26,369
to use a few examples of using that

419
00:17:24,849 --> 00:17:31,540
graph just to find the shortest paths

420
00:17:26,369 --> 00:17:34,540
from internet accessible hosts to some

421
00:17:31,540 --> 00:17:36,670
target and after we do that will then

422
00:17:34,540 --> 00:17:39,428
apply the vulnerability data we'll talk

423
00:17:36,670 --> 00:17:41,620
about the vulnerability data well apply

424
00:17:39,429 --> 00:17:42,760
it to the graph and then rerun that same

425
00:17:41,620 --> 00:17:46,510
going from shortest paths

426
00:17:42,760 --> 00:17:48,820
two most vulnerable paths and there will

427
00:17:46,510 --> 00:17:50,590
be some graphics so you can actually see

428
00:17:48,820 --> 00:17:56,919
instead of having to read a lot of you

429
00:17:50,590 --> 00:17:58,810
know print statements implicitly by the

430
00:17:56,920 --> 00:18:00,220
way just you know it's at some level of

431
00:17:58,810 --> 00:18:02,530
abstraction of course the nmap data is

432
00:18:00,220 --> 00:18:07,990
just source IP destination IP

433
00:18:02,530 --> 00:18:09,760
destination port and service so and the

434
00:18:07,990 --> 00:18:13,810
typical end map data looks like that now

435
00:18:09,760 --> 00:18:15,040
let's start with and go down and then

436
00:18:13,810 --> 00:18:17,560
we'll start with just the first thing

437
00:18:15,040 --> 00:18:20,950
we'll get a nice small graph we'll start

438
00:18:17,560 --> 00:18:25,690
with a nice ball graph and we'll it'll

439
00:18:20,950 --> 00:18:28,560
define the initial target weird now we

440
00:18:25,690 --> 00:18:30,730
have the graph G is just the graph and

441
00:18:28,560 --> 00:18:34,270
we'll start what we want to do is

442
00:18:30,730 --> 00:18:36,340
actually find halves in that graph going

443
00:18:34,270 --> 00:18:40,020
from a selection of internet accessible

444
00:18:36,340 --> 00:18:44,409
nodes to the target which we've named

445
00:18:40,020 --> 00:18:46,750
now what I'll be showing you is there's

446
00:18:44,410 --> 00:18:48,820
a couple of ways we can do this we can

447
00:18:46,750 --> 00:18:50,620
talk about the well if you want the end

448
00:18:48,820 --> 00:18:52,000
most vulnerable paths we can return that

449
00:18:50,620 --> 00:18:54,370
well you could also we're also here

450
00:18:52,000 --> 00:18:56,830
we'll be doing all the paths with a with

451
00:18:54,370 --> 00:18:59,830
a weight less than a distance less than

452
00:18:56,830 --> 00:19:03,040
a certain score and there are several

453
00:18:59,830 --> 00:19:04,210
search search techniques available that

454
00:19:03,040 --> 00:19:08,110
come back to this in a second after I

455
00:19:04,210 --> 00:19:11,830
show you so let's actually we can get

456
00:19:08,110 --> 00:19:13,270
the paths I'll come back and do this and

457
00:19:11,830 --> 00:19:14,560
they just go down to the first picture

458
00:19:13,270 --> 00:19:49,230
so you can see what I'm being out here

459
00:19:14,560 --> 00:19:51,790
oh actually make that alright basically

460
00:19:49,230 --> 00:19:53,950
this is just the first graph we'll see

461
00:19:51,790 --> 00:19:55,720
the red node is the target the green

462
00:19:53,950 --> 00:19:56,570
nodes are internet accessible you can

463
00:19:55,720 --> 00:19:57,799
see the red

464
00:19:56,570 --> 00:20:00,610
haves there and we'll come back to this

465
00:19:57,799 --> 00:20:04,190
graphing later but if you look at the

466
00:20:00,610 --> 00:20:09,758
say the the most the first path we see

467
00:20:04,190 --> 00:20:15,230
it's two hops from 22 to 16 to 228 and

468
00:20:09,759 --> 00:20:19,460
in this case it's 20 to 22 here 16 here

469
00:20:15,230 --> 00:20:22,659
228 pretty straightforward now um these

470
00:20:19,460 --> 00:20:22,659
little bigger again so we can read it

471
00:20:24,909 --> 00:20:31,279
there are lots of ways to find paths in

472
00:20:27,080 --> 00:20:34,449
graphs a lot of them are specialized in

473
00:20:31,279 --> 00:20:39,350
finding this single the single extremal

474
00:20:34,450 --> 00:20:41,870
path of some sort and since we're not

475
00:20:39,350 --> 00:20:43,580
interested in funding only one what I

476
00:20:41,870 --> 00:20:47,018
did was implant a sort of a a quick

477
00:20:43,580 --> 00:20:49,250
version of beam search which essentially

478
00:20:47,019 --> 00:20:51,379
incrementally go advances through the

479
00:20:49,250 --> 00:20:54,289
through the graph from the target

480
00:20:51,379 --> 00:20:56,840
outwards and looks for the least

481
00:20:54,289 --> 00:20:59,750
expensive way to get to each node or

482
00:20:56,840 --> 00:21:02,149
keeps a small number of them and then

483
00:20:59,750 --> 00:21:04,820
keep spreading out until it finds the

484
00:21:02,149 --> 00:21:08,360
internet accessible nodes and then

485
00:21:04,820 --> 00:21:12,289
returns the scores that it finds for

486
00:21:08,360 --> 00:21:14,689
those internet accessible nodes um we're

487
00:21:12,289 --> 00:21:17,809
just basically what I did to get these

488
00:21:14,690 --> 00:21:21,110
scores now give it a weight of distance

489
00:21:17,809 --> 00:21:23,480
of three we only had three paths here so

490
00:21:21,110 --> 00:21:25,639
we could actually reduce it if you

491
00:21:23,480 --> 00:21:30,580
wanted to no less just redo that and get

492
00:21:25,639 --> 00:21:33,830
two and then redo the chart can we see

493
00:21:30,580 --> 00:21:42,080
you know again not very exciting at this

494
00:21:33,830 --> 00:21:44,230
point well you see the 122 and 38 oh

495
00:21:42,080 --> 00:21:46,759
right

496
00:21:44,230 --> 00:21:50,139
38:22 there we go those two paths from

497
00:21:46,759 --> 00:21:50,139
there okay so

498
00:21:54,559 --> 00:22:00,658
and I actually automatically for this

499
00:21:58,200 --> 00:22:02,399
data I didn't have a target and target

500
00:22:00,659 --> 00:22:05,239
and internet access hole notes set up

501
00:22:02,399 --> 00:22:10,709
for it so I'm choosing them essentially

502
00:22:05,239 --> 00:22:13,309
by using analysis of the graph the the

503
00:22:10,710 --> 00:22:15,779
target is basically you could use an

504
00:22:13,309 --> 00:22:18,928
eigenvector centrality analysis to

505
00:22:15,779 --> 00:22:20,669
figure out for any graph what the most

506
00:22:18,929 --> 00:22:23,909
central node is what the most peripheral

507
00:22:20,669 --> 00:22:25,710
nodes are so what I did was I made the

508
00:22:23,909 --> 00:22:27,289
most peripheral nodes are a random

509
00:22:25,710 --> 00:22:30,239
selection the most for referral nodes

510
00:22:27,289 --> 00:22:34,320
the internet accessible nodes and I made

511
00:22:30,239 --> 00:22:35,940
the most central node the target there's

512
00:22:34,320 --> 00:22:38,700
a certain amount of randomness in this

513
00:22:35,940 --> 00:22:42,299
but it works pretty well now so we have

514
00:22:38,700 --> 00:22:46,729
that we have the actual output and we

515
00:22:42,299 --> 00:22:57,179
have this somewhat nicer there we go

516
00:22:46,729 --> 00:22:59,549
sure of course what yes it's saying

517
00:22:57,179 --> 00:23:05,279
exactly that because we we set the

518
00:22:59,549 --> 00:23:07,619
distance metric for this graph to to not

519
00:23:05,279 --> 00:23:09,720
not in two hops there are other ones so

520
00:23:07,619 --> 00:23:11,099
if I said originally set it to three so

521
00:23:09,720 --> 00:23:13,379
go back up here and just say okay we'll

522
00:23:11,099 --> 00:23:15,869
make that three and we get more paths

523
00:23:13,379 --> 00:23:18,899
and then we go down we just rebuild the

524
00:23:15,869 --> 00:23:24,299
graph and you can see that now there are

525
00:23:18,899 --> 00:23:31,219
there's there's a three hop from 104 104

526
00:23:24,299 --> 00:23:31,220
up here to to 238 to 16 to the target

527
00:23:32,029 --> 00:23:35,999
this is just this is just this is just

528
00:23:34,139 --> 00:23:37,918
that ivan poseable Darrell Levine yet of

529
00:23:35,999 --> 00:23:42,029
trying to this is just getting the toes

530
00:23:37,919 --> 00:23:43,229
into the into the water here now now

531
00:23:42,029 --> 00:23:44,820
we're actually that good bring it up

532
00:23:43,229 --> 00:23:47,279
we're nestled that's put that's add

533
00:23:44,820 --> 00:23:49,849
vulnerability data to this so there's

534
00:23:47,279 --> 00:23:55,320
lots of sources for vulnerability data

535
00:23:49,849 --> 00:23:56,309
and oh thank you thank you very much

536
00:23:55,320 --> 00:24:03,239
that's very helpful

537
00:23:56,309 --> 00:24:05,629
Wow great timing there's lots of sources

538
00:24:03,239 --> 00:24:09,500
Roland early data but um

539
00:24:05,630 --> 00:24:11,060
I'm cheap so I'm not gonna use any of

540
00:24:09,500 --> 00:24:12,410
them I'm gonna use a free source now

541
00:24:11,060 --> 00:24:16,060
what we want to do is take that

542
00:24:12,410 --> 00:24:21,680
vulnerability data extract the

543
00:24:16,060 --> 00:24:24,440
information we need to add arbitrary

544
00:24:21,680 --> 00:24:27,380
weights to the graph and then see what

545
00:24:24,440 --> 00:24:31,040
changes now because I'm because I said I

546
00:24:27,380 --> 00:24:33,410
was cheap well you're using the national

547
00:24:31,040 --> 00:24:35,300
vulnerability database vulnerability

548
00:24:33,410 --> 00:24:37,720
database sorry um

549
00:24:35,300 --> 00:24:40,790
the advantage is open-source it's

550
00:24:37,720 --> 00:24:41,570
community-created it's it's

551
00:24:40,790 --> 00:24:44,540
comprehensive

552
00:24:41,570 --> 00:24:45,350
um the disadvantage is that it it's it's

553
00:24:44,540 --> 00:24:47,960
what it is

554
00:24:45,350 --> 00:24:51,800
it's a complex data structure and it's

555
00:24:47,960 --> 00:24:54,410
it's not really optimized to actually

556
00:24:51,800 --> 00:24:57,620
get the answer I was looking for so I

557
00:24:54,410 --> 00:25:00,280
mean this is uh so just basically it

558
00:24:57,620 --> 00:25:02,899
they're files is again a bunch of files

559
00:25:00,280 --> 00:25:06,710
50 megabytes of stuff that looks like

560
00:25:02,900 --> 00:25:11,360
this you see the point it's it's not

561
00:25:06,710 --> 00:25:13,010
friendly um so I went to the one of the

562
00:25:11,360 --> 00:25:15,800
one of the basic tools I use for almost

563
00:25:13,010 --> 00:25:20,720
everything I put I dumped it into

564
00:25:15,800 --> 00:25:23,780
elastic elastic search again three works

565
00:25:20,720 --> 00:25:31,190
well you provide your own tech support

566
00:25:23,780 --> 00:25:34,340
fine and then we so from that we can say

567
00:25:31,190 --> 00:25:38,750
we have the for the end map data we have

568
00:25:34,340 --> 00:25:40,520
the service on each port on each host so

569
00:25:38,750 --> 00:25:43,130
then we can search for the vulnerability

570
00:25:40,520 --> 00:25:48,740
information associated with that service

571
00:25:43,130 --> 00:25:51,620
on each host and so then we can use that

572
00:25:48,740 --> 00:25:53,030
to then re wait the graph based on the

573
00:25:51,620 --> 00:25:54,709
vulnerabilities and we'll do that right

574
00:25:53,030 --> 00:25:56,930
now so we have the vulnerabilities

575
00:25:54,710 --> 00:26:00,080
already let's apply to the graph to get

576
00:25:56,930 --> 00:26:02,570
a new graph and then we just get the so

577
00:26:00,080 --> 00:26:04,730
for the distance of so here we have real

578
00:26:02,570 --> 00:26:07,700
distances target distance of less than

579
00:26:04,730 --> 00:26:09,740
or equal to nine same target same same

580
00:26:07,700 --> 00:26:12,950
and same same internet accessible host

581
00:26:09,740 --> 00:26:17,240
and same target we have this was that

582
00:26:12,950 --> 00:26:19,340
one two three call it four and so we can

583
00:26:17,240 --> 00:26:21,890
then draw it so we have this

584
00:26:19,340 --> 00:26:24,260
make it a little smaller oh you can see

585
00:26:21,890 --> 00:26:25,970
that so you can see that again we have a

586
00:26:24,260 --> 00:26:29,510
very different grunt we have a different

587
00:26:25,970 --> 00:26:31,490
looking graph so the same the same

588
00:26:29,510 --> 00:26:35,330
internet accessible host but different

589
00:26:31,490 --> 00:26:37,130
paths to the target and of course we can

590
00:26:35,330 --> 00:26:40,399
also change the weight so we could

591
00:26:37,130 --> 00:26:46,010
reduce it if we wanted more say which is

592
00:26:40,400 --> 00:26:48,380
a 7.0 so we get ID Sivan that's it

593
00:26:46,010 --> 00:26:49,730
that's ugly anyway you get the idea we

594
00:26:48,380 --> 00:26:54,670
could also increase it so we could

595
00:26:49,730 --> 00:26:56,600
increase it to say 11 and I have oh

596
00:26:54,670 --> 00:26:59,300
because this right

597
00:26:56,600 --> 00:27:01,610
very very few we can improve that very

598
00:26:59,300 --> 00:27:10,010
much anyway so um what's the

599
00:27:01,610 --> 00:27:12,020
vulnerabilities there the and basically

600
00:27:10,010 --> 00:27:14,360
for each housed at a certain point you

601
00:27:12,020 --> 00:27:16,250
get you have multiple vulnerabilities on

602
00:27:14,360 --> 00:27:18,409
each host and I wanted to combine them

603
00:27:16,250 --> 00:27:20,660
in a relatively straightforward way they

604
00:27:18,410 --> 00:27:23,510
still gave me a single number and so I

605
00:27:20,660 --> 00:27:28,310
used harmonic averaging which

606
00:27:23,510 --> 00:27:29,900
essentially is a way of saying uh most

607
00:27:28,310 --> 00:27:31,790
you know most that a lot of the people

608
00:27:29,900 --> 00:27:33,890
will tend to use the most vulnerable of

609
00:27:31,790 --> 00:27:36,290
the opportunities they have to get onto

610
00:27:33,890 --> 00:27:38,480
a difference particular server but um

611
00:27:36,290 --> 00:27:39,920
they might use a less vulnerable one and

612
00:27:38,480 --> 00:27:43,610
so we weight those together use through

613
00:27:39,920 --> 00:27:45,290
the harmonic mean um also the in the net

614
00:27:43,610 --> 00:27:49,159
in the vulnerability database the scores

615
00:27:45,290 --> 00:27:51,950
are all the larger numbers being more

616
00:27:49,160 --> 00:27:54,230
vulnerable but everything was set up to

617
00:27:51,950 --> 00:27:57,280
have shorter paths do shorter showed his

618
00:27:54,230 --> 00:28:01,070
paths underlying Li so I basically

619
00:27:57,280 --> 00:28:02,780
inverted the inverted the weights so

620
00:28:01,070 --> 00:28:04,760
they were actually more convenient for

621
00:28:02,780 --> 00:28:07,460
my purposes and so we actually for you

622
00:28:04,760 --> 00:28:09,830
each of the servers in the small in this

623
00:28:07,460 --> 00:28:13,010
in the small set we have a vulnerability

624
00:28:09,830 --> 00:28:15,470
weights that looks like that now okay

625
00:28:13,010 --> 00:28:18,620
we're fine but it's kind of boring to

626
00:28:15,470 --> 00:28:21,220
only look at 13 nodes so let's see what

627
00:28:18,620 --> 00:28:25,639
we get when we create a large graph and

628
00:28:21,220 --> 00:28:27,200
so let's spin it up um we wait for a few

629
00:28:25,640 --> 00:28:29,320
seconds and so we have now we have

630
00:28:27,200 --> 00:28:31,490
thirteen hundred and thirteen nodes and

631
00:28:29,320 --> 00:28:32,990
seventeen thousand four hundred 70s

632
00:28:31,490 --> 00:28:41,330
between them

633
00:28:32,990 --> 00:28:45,710
and the target is 10 10 22 to 28 now we

634
00:28:41,330 --> 00:28:49,460
can get the do it by distance so we have

635
00:28:45,710 --> 00:28:55,429
with a distance of 3 let's we have well

636
00:28:49,460 --> 00:28:58,040
do a distance of 2 we get you know a 3 3

637
00:28:55,429 --> 00:29:00,679
2 hop links from the periphery to the

638
00:28:58,040 --> 00:29:04,010
target and with 3 its well you can see

639
00:29:00,679 --> 00:29:06,050
it's a lot more now this is a pretty big

640
00:29:04,010 --> 00:29:09,620
graph and so what you do is see if you

641
00:29:06,050 --> 00:29:11,809
try to actually draw that graph that was

642
00:29:09,620 --> 00:29:15,439
right before you get a piece of

643
00:29:11,809 --> 00:29:19,190
beautiful Modern Art so that's not

644
00:29:15,440 --> 00:29:21,950
really that useful to me at least so I

645
00:29:19,190 --> 00:29:23,059
thought well why don't I actually create

646
00:29:21,950 --> 00:29:25,160
a different way of drawing the graph

647
00:29:23,059 --> 00:29:27,080
that only actually includes the paths

648
00:29:25,160 --> 00:29:29,720
and leaves out all the all the other

649
00:29:27,080 --> 00:29:34,460
nodes and I don't want so I don't get

650
00:29:29,720 --> 00:29:36,230
drowned in the big blue cloud so we can

651
00:29:34,460 --> 00:29:38,360
do that and so we get something this is

652
00:29:36,230 --> 00:29:40,360
for the this is for the I should have

653
00:29:38,360 --> 00:29:42,469
said this is for the target of 3 we get

654
00:29:40,360 --> 00:29:44,959
something that looks a bit more friendly

655
00:29:42,470 --> 00:29:47,390
it's not friendly friendly but you can

656
00:29:44,960 --> 00:29:48,770
actually kind of read it if you if you

657
00:29:47,390 --> 00:29:50,450
want to go back and say well I would

658
00:29:48,770 --> 00:29:53,840
actually want it to look a look at the

659
00:29:50,450 --> 00:29:55,970
really smallest numbers we can then go

660
00:29:53,840 --> 00:29:59,120
back and then draw that and we get

661
00:29:55,970 --> 00:30:00,950
something that's you can't get much

662
00:29:59,120 --> 00:30:03,830
easier than that and these are all the

663
00:30:00,950 --> 00:30:05,420
two hop two humps from the two for the

664
00:30:03,830 --> 00:30:06,590
shorted system this is an the before the

665
00:30:05,420 --> 00:30:10,220
vulnerability in French was added to

666
00:30:06,590 --> 00:30:11,059
this through the large graph so we got

667
00:30:10,220 --> 00:30:12,410
something pretty straightforward but you

668
00:30:11,059 --> 00:30:13,490
can also increase the noise as we saw

669
00:30:12,410 --> 00:30:16,880
before to get something that's more

670
00:30:13,490 --> 00:30:18,260
comprehensive um we have the

671
00:30:16,880 --> 00:30:20,809
vulnerabilities for the large graph too

672
00:30:18,260 --> 00:30:23,450
so we just apply them and now we're at

673
00:30:20,809 --> 00:30:24,620
distance five for this we get the the

674
00:30:23,450 --> 00:30:28,970
vulnerabilities at distance 5 and there

675
00:30:24,620 --> 00:30:29,989
are none let's increase it to 7 7 what

676
00:30:28,970 --> 00:30:34,580
do we get now oh there we go

677
00:30:29,990 --> 00:30:37,670
so distance 7 we get probably a half a

678
00:30:34,580 --> 00:30:40,250
dozen would we so we get a nice that's

679
00:30:37,670 --> 00:30:42,080
what we get with the at the distance 7

680
00:30:40,250 --> 00:30:44,310
we get this this vulnerability graph

681
00:30:42,080 --> 00:30:52,590
where we have the

682
00:30:44,310 --> 00:30:57,260
host here and and some and the and the

683
00:30:52,590 --> 00:30:57,260
paths that lead to it from the periphery

684
00:31:30,770 --> 00:31:35,250
we can look for also we can increase the

685
00:31:33,630 --> 00:31:38,070
weight here so we can get a slightly so

686
00:31:35,250 --> 00:31:40,740
good at 8:00 and then redraw the graph

687
00:31:38,070 --> 00:31:42,780
and we get something again a little a

688
00:31:40,740 --> 00:31:45,510
little more comprehensive little noisier

689
00:31:42,780 --> 00:31:46,550
more Hobbs but Marx that's more of the

690
00:31:45,510 --> 00:31:59,400
same thing

691
00:31:46,550 --> 00:32:03,870
sure that's um what we have you've

692
00:31:59,400 --> 00:32:05,910
gotten me at a point where I I don't

693
00:32:03,870 --> 00:32:08,040
know how I'm using a draw a graph

694
00:32:05,910 --> 00:32:11,130
drawing package now we can look at the

695
00:32:08,040 --> 00:32:16,980
actual paths here so we have so take the

696
00:32:11,130 --> 00:32:19,320
first one it's um its weight is six six

697
00:32:16,980 --> 00:32:23,220
point oh four we have a couple at that

698
00:32:19,320 --> 00:32:27,409
weight actually um three it looks come

699
00:32:23,220 --> 00:32:37,410
on three at that weight and they're all

700
00:32:27,410 --> 00:32:41,610
looked like two hops and they are of

701
00:32:37,410 --> 00:32:44,220
course directly answer your question it

702
00:32:41,610 --> 00:32:46,560
is a prioritization question so you've

703
00:32:44,220 --> 00:32:48,960
got this nice long list the first ones

704
00:32:46,560 --> 00:32:51,060
you should take action on are the ones

705
00:32:48,960 --> 00:32:54,600
that are immediate adjacencies to the

706
00:32:51,060 --> 00:32:56,520
target and then it's really just a

707
00:32:54,600 --> 00:32:58,889
question of question of diminishing

708
00:32:56,520 --> 00:33:01,500
priorities as you get further away from

709
00:32:58,890 --> 00:33:03,960
the target and so you could imagine this

710
00:33:01,500 --> 00:33:06,060
and and this is early days on this

711
00:33:03,960 --> 00:33:08,310
approach and again we're releasing this

712
00:33:06,060 --> 00:33:11,280
out to the community what john has done

713
00:33:08,310 --> 00:33:13,429
here in the jupiter document it fully

714
00:33:11,280 --> 00:33:16,020
elaborates everything that he said

715
00:33:13,430 --> 00:33:19,230
textually so you can literally read this

716
00:33:16,020 --> 00:33:21,660
like a story and then it explains the

717
00:33:19,230 --> 00:33:23,310
math you can run the math right there

718
00:33:21,660 --> 00:33:26,070
just by clicking returns see the

719
00:33:23,310 --> 00:33:30,320
resulting charts and continue the

720
00:33:26,070 --> 00:33:30,320
journey and and the point here is that

721
00:33:30,630 --> 00:33:35,860
we want to make it open to the community

722
00:33:33,730 --> 00:33:37,720
so that you could plug in rapid7 you

723
00:33:35,860 --> 00:33:40,659
could plug in really whatever you want

724
00:33:37,720 --> 00:33:43,570
and get these these answers with more

725
00:33:40,660 --> 00:33:45,970
consistent reliable familiar data to

726
00:33:43,570 --> 00:33:47,889
your internal operations it's the same

727
00:33:45,970 --> 00:33:56,650
algorithms it's just some like hooking

728
00:33:47,890 --> 00:34:00,340
of different api's thank you so that's

729
00:33:56,650 --> 00:34:02,980
um again the as Peter said earlier we

730
00:34:00,340 --> 00:34:05,379
have the code in the repo that notebook

731
00:34:02,980 --> 00:34:07,169
we going up in case I change during the

732
00:34:05,380 --> 00:34:09,550
talk you were going up after the talk

733
00:34:07,169 --> 00:34:12,100
along with the data um

734
00:34:09,550 --> 00:34:13,540
if anyone I assume most of you have

735
00:34:12,100 --> 00:34:15,909
needs to know at least a little bit

736
00:34:13,540 --> 00:34:17,168
about Python you need to install that

737
00:34:15,909 --> 00:34:19,060
there are a couple of their libraries

738
00:34:17,168 --> 00:34:23,259
third-party libraries we need to install

739
00:34:19,060 --> 00:34:25,750
as well and also elasticsearch which is

740
00:34:23,260 --> 00:34:27,520
actually given it's a large java

741
00:34:25,750 --> 00:34:32,469
application is actually fairly easy to

742
00:34:27,520 --> 00:34:39,070
install and use and that's it and now

743
00:34:32,469 --> 00:34:41,350
we'll go back to Peter thank you so uh

744
00:34:39,070 --> 00:34:43,690
certainly open any questions

745
00:34:41,350 --> 00:34:46,239
I think the too long didn't read on this

746
00:34:43,690 --> 00:34:48,730
is that right now we take slices of data

747
00:34:46,239 --> 00:34:51,009
by having fixed point perspective of our

748
00:34:48,730 --> 00:34:53,230
scanning of the network and if instead

749
00:34:51,010 --> 00:34:55,480
we take slices of data from the

750
00:34:53,230 --> 00:34:57,850
perspective of every node in the

751
00:34:55,480 --> 00:35:00,940
environment what you start to look at is

752
00:34:57,850 --> 00:35:03,700
this cube of data and this is a familiar

753
00:35:00,940 --> 00:35:05,380
topic to both John and myself my

754
00:35:03,700 --> 00:35:07,330
background is from in Decca technologies

755
00:35:05,380 --> 00:35:09,340
the company that invented faceted search

756
00:35:07,330 --> 00:35:11,110
which of course today is just

757
00:35:09,340 --> 00:35:13,570
commonplace on every website you ever

758
00:35:11,110 --> 00:35:17,080
visit and John was the chief data

759
00:35:13,570 --> 00:35:19,360
scientist of the of a tibi Oh which was

760
00:35:17,080 --> 00:35:22,120
the data lakes company or is the data

761
00:35:19,360 --> 00:35:25,590
lakes company and really what this is is

762
00:35:22,120 --> 00:35:28,839
about OLAP modeling and faceted search

763
00:35:25,590 --> 00:35:31,240
discoverable navigation where you

764
00:35:28,840 --> 00:35:33,730
structure your data with multiple

765
00:35:31,240 --> 00:35:35,890
faceted views that if you can rotate and

766
00:35:33,730 --> 00:35:37,990
reorient your perspective on the data

767
00:35:35,890 --> 00:35:40,420
you see different outcomes and that's

768
00:35:37,990 --> 00:35:42,430
exactly what John has done here he's

769
00:35:40,420 --> 00:35:44,980
taken individual slices

770
00:35:42,430 --> 00:35:48,129
data from the vantage point of every

771
00:35:44,980 --> 00:35:50,079
device in your network and looked for

772
00:35:48,130 --> 00:35:52,450
the commonality across those data sets

773
00:35:50,079 --> 00:35:54,880
and join them together so that it's now

774
00:35:52,450 --> 00:35:58,149
structured as this big interconnected

775
00:35:54,880 --> 00:36:00,700
mesh a graph and you only have to

776
00:35:58,150 --> 00:36:02,619
reorient your visible your view of the

777
00:36:00,700 --> 00:36:04,960
graph to see different datasets

778
00:36:02,619 --> 00:36:06,910
different results and then you can

779
00:36:04,960 --> 00:36:09,010
augment the data set just by

780
00:36:06,910 --> 00:36:11,410
superimposing new data on top of the

781
00:36:09,010 --> 00:36:14,109
graph topology so a super powerful super

782
00:36:11,410 --> 00:36:17,069
flexible way of looking at network

783
00:36:14,109 --> 00:36:19,480
topology that gives you every possible

784
00:36:17,069 --> 00:36:23,529
multi-dimensional vantage point from

785
00:36:19,480 --> 00:36:27,190
every device everywhere always so that's

786
00:36:23,530 --> 00:36:29,609
it any questions happy to answer yeah go

787
00:36:27,190 --> 00:36:29,609
for it of course

788
00:36:55,180 --> 00:37:00,640
hit the nail on the head so that is not

789
00:36:58,359 --> 00:37:03,250
what edgewise does but for the purposes

790
00:37:00,640 --> 00:37:05,078
of this project yeah that it you hit the

791
00:37:03,250 --> 00:37:08,579
nail on the head and for anybody who

792
00:37:05,079 --> 00:37:10,599
didn't hear him really the point is that

793
00:37:08,579 --> 00:37:13,660
you're gonna go through a remediation

794
00:37:10,599 --> 00:37:16,210
process as you learn data like this and

795
00:37:13,660 --> 00:37:18,629
you prioritize these fixes and really

796
00:37:16,210 --> 00:37:21,280
the point is that you're going to

797
00:37:18,630 --> 00:37:24,369
regenerate this data set by doing

798
00:37:21,280 --> 00:37:26,500
another nmap scan across all of your

799
00:37:24,369 --> 00:37:28,480
systems at the rate that you remediate

800
00:37:26,500 --> 00:37:30,849
right because you want to see those

801
00:37:28,480 --> 00:37:34,119
changes reflected in the graph so you're

802
00:37:30,849 --> 00:37:37,210
continually doing these nmap or you know

803
00:37:34,119 --> 00:37:40,150
it could be rapid7 scans aggregating the

804
00:37:37,210 --> 00:37:42,760
data together so that you can see how

805
00:37:40,150 --> 00:37:44,950
your landscape is changing over time

806
00:37:42,760 --> 00:37:48,839
from a vulnerability exposure and

807
00:37:44,950 --> 00:37:48,839
multi-step attack path perspective

808
00:38:03,819 --> 00:38:10,730
yep-yep chokepoints it's a fantastic

809
00:38:06,829 --> 00:38:15,920
point so if you see a common node that

810
00:38:10,730 --> 00:38:18,910
is the intermediary for a subgraph so

811
00:38:15,920 --> 00:38:21,470
it's a topic John didn't get into but he

812
00:38:18,910 --> 00:38:24,379
he educated me on it so let's see how

813
00:38:21,470 --> 00:38:25,910
well I can relay this you've got you've

814
00:38:24,380 --> 00:38:27,619
got graphs that are highly

815
00:38:25,910 --> 00:38:29,899
interconnected but off of those graphs

816
00:38:27,619 --> 00:38:32,509
are sub graphs and where they

817
00:38:29,900 --> 00:38:34,609
interconnect is this joined point that

818
00:38:32,509 --> 00:38:37,069
if you can block the vulnerabilities at

819
00:38:34,609 --> 00:38:39,288
that point you fracture the graph and it

820
00:38:37,069 --> 00:38:41,210
means that to the target there are fewer

821
00:38:39,289 --> 00:38:42,859
possible paths that arrive at that

822
00:38:41,210 --> 00:38:46,099
ultimate target but it doesn't change

823
00:38:42,859 --> 00:38:50,180
the fact that your highest priority is

824
00:38:46,099 --> 00:38:53,329
adjacent C's to the target itself so

825
00:38:50,180 --> 00:38:55,819
things that directly talk to or the to

826
00:38:53,329 --> 00:38:57,650
the target and then after that would be

827
00:38:55,819 --> 00:39:00,109
these choke points and then after that

828
00:38:57,650 --> 00:39:02,660
would be things that directly touch the

829
00:39:00,109 --> 00:39:04,940
internet those are the ingress points

830
00:39:02,660 --> 00:39:10,549
right you clearly want to lock those

831
00:39:04,940 --> 00:39:12,880
down any questions are on the table go

832
00:39:10,549 --> 00:39:12,880
for it

833
00:39:13,660 --> 00:39:22,969
all right with that thank you so much

834
00:39:18,360 --> 00:39:22,969
[Applause]

