1
00:00:00,000 --> 00:00:07,230
de Souza I say that right all right not

2
00:00:03,720 --> 00:00:15,299
bad securing Active Directory and pam-4

3
00:00:07,230 --> 00:00:16,980
a DDS well thank you everyone I

4
00:00:15,299 --> 00:00:20,340
appreciate you all coming out here on a

5
00:00:16,980 --> 00:00:22,859
Saturday and thank you too besides

6
00:00:20,340 --> 00:00:27,180
Kinect for having me and today I wanted

7
00:00:22,859 --> 00:00:29,279
to talk to you about securing Active

8
00:00:27,180 --> 00:00:30,830
Directory and privileged access manager

9
00:00:29,279 --> 00:00:32,880
for Active Directory domain services

10
00:00:30,830 --> 00:00:34,860
there have been some amazing

11
00:00:32,880 --> 00:00:36,360
presentations today and I'm excited to

12
00:00:34,860 --> 00:00:39,090
be able to talk to you about this

13
00:00:36,360 --> 00:00:42,050
particular one so a little intro about

14
00:00:39,090 --> 00:00:44,850
me my name is Rohit D'Souza I am a

15
00:00:42,050 --> 00:00:47,669
systems engineer for a company called

16
00:00:44,850 --> 00:00:50,670
Wayfarer that based out of Boston and a

17
00:00:47,670 --> 00:00:53,850
lot of my day-to-day tasks involve

18
00:00:50,670 --> 00:00:57,660
working with Active Directory majority

19
00:00:53,850 --> 00:01:01,469
of it involves hardening of servers as

20
00:00:57,660 --> 00:01:02,459
well as permissioning making sure that

21
00:01:01,469 --> 00:01:04,500
the permissions are applied correctly

22
00:01:02,460 --> 00:01:07,890
and a lot of the server back-end and

23
00:01:04,500 --> 00:01:10,200
infrastructure environment when I first

24
00:01:07,890 --> 00:01:12,270
started out security wasn't a big thing

25
00:01:10,200 --> 00:01:14,340
I've been doing Active Directory work

26
00:01:12,270 --> 00:01:17,158
and other infrastructure related things

27
00:01:14,340 --> 00:01:19,590
for about 10 plus years now and before

28
00:01:17,159 --> 00:01:21,180
everything was just it's copy over

29
00:01:19,590 --> 00:01:22,710
somebody's permissions just you know

30
00:01:21,180 --> 00:01:26,549
make everybody a domain admin right that

31
00:01:22,710 --> 00:01:28,500
was the go-to of I can't do this oh sure

32
00:01:26,549 --> 00:01:29,750
let's make him a domain admin and

33
00:01:28,500 --> 00:01:33,930
magically everything worked

34
00:01:29,750 --> 00:01:36,930
but now as security has become a

35
00:01:33,930 --> 00:01:39,000
forefront of how companies and are

36
00:01:36,930 --> 00:01:41,579
deploying production level applications

37
00:01:39,000 --> 00:01:49,259
you have to stop and think about who

38
00:01:41,579 --> 00:01:50,548
you're giving access to a lot of new IT

39
00:01:49,259 --> 00:01:51,110
professionals coming into the

40
00:01:50,549 --> 00:01:54,060
environment

41
00:01:51,110 --> 00:01:57,090
you don't learn any of this in college I

42
00:01:54,060 --> 00:01:59,549
definitely did you know you only learn

43
00:01:57,090 --> 00:02:01,290
about how to create new user accounts

44
00:01:59,549 --> 00:02:03,780
and just make sure everything works and

45
00:02:01,290 --> 00:02:06,930
then half of it you never even apply in

46
00:02:03,780 --> 00:02:09,270
a production environment so when you

47
00:02:06,930 --> 00:02:10,920
come in and something doesn't work right

48
00:02:09,270 --> 00:02:13,800
all you're concerned about is making

49
00:02:10,919 --> 00:02:15,269
sure that that person is

50
00:02:13,800 --> 00:02:17,040
no longer upset that something is

51
00:02:15,270 --> 00:02:20,460
working right so you go and give them

52
00:02:17,040 --> 00:02:24,060
local admin or domain admin and yeah

53
00:02:20,460 --> 00:02:27,840
everything's good not the way to go

54
00:02:24,060 --> 00:02:30,840
not anymore and especially now that data

55
00:02:27,840 --> 00:02:32,970
breaches are no longer have changed from

56
00:02:30,840 --> 00:02:35,760
you know the early days from the early

57
00:02:32,970 --> 00:02:37,730
2000s before it was all about financial

58
00:02:35,760 --> 00:02:41,730
reasons right everybody was doing it to

59
00:02:37,730 --> 00:02:45,829
get money or to steal bank information

60
00:02:41,730 --> 00:02:49,640
accounts which is still a thing but now

61
00:02:45,830 --> 00:02:52,200
data breaches are all about identity a

62
00:02:49,640 --> 00:02:55,709
couple years ago there was a popular one

63
00:02:52,200 --> 00:02:57,510
from I can't remember the name of the

64
00:02:55,710 --> 00:03:00,270
company but they hacked the Ashley

65
00:02:57,510 --> 00:03:02,700
Madison website and they threatened to

66
00:03:00,270 --> 00:03:06,450
publish all the usernames all the emails

67
00:03:02,700 --> 00:03:07,799
and everybody was freaking out and it

68
00:03:06,450 --> 00:03:09,810
had nothing to do with money it would

69
00:03:07,800 --> 00:03:11,660
have had everything to do with you know

70
00:03:09,810 --> 00:03:14,340
a lot of people were freaking out about

71
00:03:11,660 --> 00:03:17,930
they didn't want to get caught if their

72
00:03:14,340 --> 00:03:21,930
names were displayed on that website and

73
00:03:17,930 --> 00:03:24,780
as things have changed you realize that

74
00:03:21,930 --> 00:03:28,550
not some of the things still say stay

75
00:03:24,780 --> 00:03:30,959
the same a lot of the focus on hardening

76
00:03:28,550 --> 00:03:32,310
environments is all focused on the

77
00:03:30,959 --> 00:03:34,500
outside right it's like we want to

78
00:03:32,310 --> 00:03:37,680
prevent this hacker from coming in to

79
00:03:34,500 --> 00:03:41,370
our network but a lot of the issues

80
00:03:37,680 --> 00:03:43,440
happen internally when the passwords

81
00:03:41,370 --> 00:03:46,050
aren't set when you don't have

82
00:03:43,440 --> 00:03:48,810
fine-grained password policies when user

83
00:03:46,050 --> 00:03:51,840
set password as password and you don't

84
00:03:48,810 --> 00:03:53,220
have a policy to change the password

85
00:03:51,840 --> 00:03:55,320
every 90 days there are some

86
00:03:53,220 --> 00:03:57,870
organizations that never change

87
00:03:55,320 --> 00:04:02,070
passwords or service account passwords

88
00:03:57,870 --> 00:04:04,530
and things like that so we'll go over a

89
00:04:02,070 --> 00:04:08,400
couple of things that everybody should

90
00:04:04,530 --> 00:04:09,840
be doing in their environment so we'll

91
00:04:08,400 --> 00:04:12,810
go over things like the common brush

92
00:04:09,840 --> 00:04:16,380
practices such as access control lists

93
00:04:12,810 --> 00:04:17,700
for use we'll talk about how to do group

94
00:04:16,380 --> 00:04:20,130
delegation we'll look at a couple of

95
00:04:17,700 --> 00:04:22,770
examples of what the permissions look

96
00:04:20,130 --> 00:04:26,060
like when you have different access

97
00:04:22,770 --> 00:04:27,830
levels delegated to different users

98
00:04:26,060 --> 00:04:30,650
we'll also go

99
00:04:27,830 --> 00:04:33,229
for protected groups this is a feature

100
00:04:30,650 --> 00:04:34,780
that was released in 2012 and they've

101
00:04:33,229 --> 00:04:38,508
continued to made some improvements on

102
00:04:34,780 --> 00:04:40,280
Server 2016 and then we'll look at group

103
00:04:38,509 --> 00:04:42,469
managed service accounts and look at how

104
00:04:40,280 --> 00:04:46,219
you can provision those and where you

105
00:04:42,469 --> 00:04:47,810
can apply them and then we'll go into

106
00:04:46,219 --> 00:04:50,810
something called privileged access

107
00:04:47,810 --> 00:04:54,159
manager which is a new feature in Server

108
00:04:50,810 --> 00:04:57,229
2016 and helps to eliminate

109
00:04:54,159 --> 00:05:02,840
vulnerabilities such as pass the hash as

110
00:04:57,229 --> 00:05:04,219
well as other known issues that can you

111
00:05:02,840 --> 00:05:05,750
know allow hackers to go into your

112
00:05:04,219 --> 00:05:07,819
environment we'll look at some of the

113
00:05:05,750 --> 00:05:13,039
requirements as well as we look at the

114
00:05:07,819 --> 00:05:15,139
pros and cons of the lift it requires in

115
00:05:13,039 --> 00:05:20,650
order to be able to implement that as

116
00:05:15,139 --> 00:05:23,860
well as other features to make it a

117
00:05:20,650 --> 00:05:28,330
streamlined process to grant users

118
00:05:23,860 --> 00:05:31,009
privileged access in your environment so

119
00:05:28,330 --> 00:05:33,520
Active Directory has been around for a

120
00:05:31,009 --> 00:05:37,819
while right it's been around and every

121
00:05:33,520 --> 00:05:41,150
iteration of it has new features and new

122
00:05:37,819 --> 00:05:44,810
changes to it that helps the systems

123
00:05:41,150 --> 00:05:47,810
admin make better decisions in terms of

124
00:05:44,810 --> 00:05:49,819
how to secure the environment in 2008

125
00:05:47,810 --> 00:05:52,129
you had things like admin Center you had

126
00:05:49,819 --> 00:05:55,009
the PowerShell module come out you also

127
00:05:52,129 --> 00:05:56,389
had the recycle bin enabled as a new

128
00:05:55,009 --> 00:05:58,279
feature where if you deleted stuff you

129
00:05:56,389 --> 00:06:00,949
could you know go back in and retrieve

130
00:05:58,279 --> 00:06:04,190
them then in 2012 they made a few

131
00:06:00,949 --> 00:06:07,729
changes dynamic access control and they

132
00:06:04,190 --> 00:06:09,199
also made promoting domain controllers a

133
00:06:07,729 --> 00:06:12,589
lot easier and more of a seamless

134
00:06:09,199 --> 00:06:15,259
process than it used to be 2016 rolled

135
00:06:12,589 --> 00:06:17,690
around and all the focus was about

136
00:06:15,259 --> 00:06:19,550
security everything was about how do we

137
00:06:17,690 --> 00:06:21,259
make this more secure how do we do

138
00:06:19,550 --> 00:06:22,849
things to harden the environment that we

139
00:06:21,259 --> 00:06:25,460
haven't done before they came out with

140
00:06:22,849 --> 00:06:28,128
shielded VMs if you had hyper-v they

141
00:06:25,460 --> 00:06:30,979
also introduced privileged access

142
00:06:28,129 --> 00:06:36,500
manager as well as made a few other

143
00:06:30,979 --> 00:06:40,969
changes to in to make the environment

144
00:06:36,500 --> 00:06:41,990
safer and the one thing is no matter how

145
00:06:40,969 --> 00:06:43,190
safe you make it

146
00:06:41,990 --> 00:06:44,330
you can have all the technology you can

147
00:06:43,190 --> 00:06:46,670
have all the tools but if you don't

148
00:06:44,330 --> 00:06:48,080
implement any of that none of that is

149
00:06:46,670 --> 00:06:50,780
really gonna help you out right it's

150
00:06:48,080 --> 00:06:52,700
it's great to have all these tools in

151
00:06:50,780 --> 00:06:55,880
the toolbox but you're never gonna use

152
00:06:52,700 --> 00:06:57,890
it it's still just as vulnerable as it

153
00:06:55,880 --> 00:06:59,540
is before and we're all very quick to be

154
00:06:57,890 --> 00:07:01,490
like well it's just the tool it's just

155
00:06:59,540 --> 00:07:06,350
the application we just there's nothing

156
00:07:01,490 --> 00:07:10,370
we can do about that so we'll look at

157
00:07:06,350 --> 00:07:13,640
things like the three main active

158
00:07:10,370 --> 00:07:17,560
directory admin roles like I was saying

159
00:07:13,640 --> 00:07:21,500
earlier when a user or Service Desk

160
00:07:17,560 --> 00:07:25,720
engineer comes to you and says hey we

161
00:07:21,500 --> 00:07:25,720
can't do this or we are not able to

162
00:07:26,260 --> 00:07:30,170
install this application you're not

163
00:07:28,940 --> 00:07:31,160
sitting there looking at the logs you're

164
00:07:30,170 --> 00:07:33,140
not looking at where it's trying to

165
00:07:31,160 --> 00:07:35,300
write you're not looking at any of the

166
00:07:33,140 --> 00:07:38,150
key critical components to be able to

167
00:07:35,300 --> 00:07:40,220
grant that user specific access just for

168
00:07:38,150 --> 00:07:42,380
that one application right you're

169
00:07:40,220 --> 00:07:43,940
looking at let's just get this done

170
00:07:42,380 --> 00:07:45,710
let's close out this ticket we'll make

171
00:07:43,940 --> 00:07:48,110
them a local admin or worst case

172
00:07:45,710 --> 00:07:49,849
scenario you make them a domain admin if

173
00:07:48,110 --> 00:07:53,930
they're an engineer and then voila

174
00:07:49,850 --> 00:07:57,500
everything works and not the way you

175
00:07:53,930 --> 00:08:01,460
want to be able to run your environment

176
00:07:57,500 --> 00:08:03,290
because let's face it as humans we make

177
00:08:01,460 --> 00:08:05,000
a change and we always say we'll go back

178
00:08:03,290 --> 00:08:07,130
and fix it later on we'll go back and

179
00:08:05,000 --> 00:08:10,520
remove that permission we never ever do

180
00:08:07,130 --> 00:08:12,950
even with GPOs and things like that

181
00:08:10,520 --> 00:08:13,669
there's still that one-off where we'll

182
00:08:12,950 --> 00:08:16,310
have a change

183
00:08:13,670 --> 00:08:18,860
we'll make a change to permission levels

184
00:08:16,310 --> 00:08:20,600
and then you'll just say yeah I'll get

185
00:08:18,860 --> 00:08:23,750
to it later later never happens you've

186
00:08:20,600 --> 00:08:26,000
got seven you got outages that person is

187
00:08:23,750 --> 00:08:27,110
well has been in there for months maybe

188
00:08:26,000 --> 00:08:32,289
even years if they're still with a

189
00:08:27,110 --> 00:08:34,580
company what so the highest level of

190
00:08:32,289 --> 00:08:37,419
access in an ad environment is the

191
00:08:34,580 --> 00:08:41,930
enterprise admin they've got access to

192
00:08:37,419 --> 00:08:43,520
the entire forest and the force is what

193
00:08:41,929 --> 00:08:45,739
the security boundary is defined in

194
00:08:43,520 --> 00:08:47,600
defined as in Microsoft it's not the

195
00:08:45,740 --> 00:08:51,650
domain as you can have multiple domains

196
00:08:47,600 --> 00:08:54,200
in the forest so just by a quick show of

197
00:08:51,650 --> 00:08:55,400
hands how many of you have or currently

198
00:08:54,200 --> 00:09:01,580
manage Active Directory

199
00:08:55,400 --> 00:09:04,550
in your current work okay good and how

200
00:09:01,580 --> 00:09:06,590
many of you are using 2012 functional

201
00:09:04,550 --> 00:09:16,729
forest and domain level functions in

202
00:09:06,590 --> 00:09:18,230
your environment okay 2008 2003 oh thank

203
00:09:16,730 --> 00:09:21,020
goodness okay that's a lot better than

204
00:09:18,230 --> 00:09:25,070
what I was expecting and how many of you

205
00:09:21,020 --> 00:09:28,400
are using 2016 level features okay cool

206
00:09:25,070 --> 00:09:31,670
so there's there's a lot of features

207
00:09:28,400 --> 00:09:32,959
that we are not leveraging in order to

208
00:09:31,670 --> 00:09:35,660
be able to secure our Active Directory

209
00:09:32,960 --> 00:09:38,620
environment from within we're very

210
00:09:35,660 --> 00:09:41,719
focused on outside attacks coming in and

211
00:09:38,620 --> 00:09:45,470
none of us are ever really looking at

212
00:09:41,720 --> 00:09:47,210
our own internal configurations of who's

213
00:09:45,470 --> 00:09:50,240
got access who doesn't have access and

214
00:09:47,210 --> 00:09:52,430
why they need that access right so

215
00:09:50,240 --> 00:09:55,640
you've got Enterprise admins who are the

216
00:09:52,430 --> 00:10:00,170
most powerful admins in that environment

217
00:09:55,640 --> 00:10:01,970
you've got they can make changes to they

218
00:10:00,170 --> 00:10:04,579
can act they can make changes to the

219
00:10:01,970 --> 00:10:06,110
force which can or cannot be a good

220
00:10:04,580 --> 00:10:08,210
thing depending on the level of

221
00:10:06,110 --> 00:10:10,040
experience of that engineer then you've

222
00:10:08,210 --> 00:10:12,470
also got schema admin schema admins can

223
00:10:10,040 --> 00:10:15,290
make changes to Active Directory schemas

224
00:10:12,470 --> 00:10:17,150
and depending on again level experience

225
00:10:15,290 --> 00:10:20,510
and how much of a risk you want to take

226
00:10:17,150 --> 00:10:22,730
that may be a good or bad thing and the

227
00:10:20,510 --> 00:10:27,170
most common access that everybody has is

228
00:10:22,730 --> 00:10:29,330
domain admins how many of you by show of

229
00:10:27,170 --> 00:10:34,939
hands know the exact number of domain

230
00:10:29,330 --> 00:10:39,620
admins in your environment okay it's a

231
00:10:34,940 --> 00:10:41,960
lot lower than I wanted to here nobody

232
00:10:39,620 --> 00:10:45,350
should have permanent domain admin

233
00:10:41,960 --> 00:10:49,060
access in your environment there are

234
00:10:45,350 --> 00:10:52,190
plenty of rules there are plenty of

235
00:10:49,060 --> 00:10:54,979
access controls and policies you can put

236
00:10:52,190 --> 00:10:59,960
in place to where domain admin access

237
00:10:54,980 --> 00:11:04,540
should be a very very rare need in order

238
00:10:59,960 --> 00:11:06,950
to be able to do what you have to do

239
00:11:04,540 --> 00:11:09,079
typically that number should be zero

240
00:11:06,950 --> 00:11:11,029
unless they're doing something that's

241
00:11:09,080 --> 00:11:14,180
that requires that level of access and

242
00:11:11,029 --> 00:11:15,950
even then after their access after their

243
00:11:14,180 --> 00:11:22,609
work is done they don't need to be

244
00:11:15,950 --> 00:11:25,720
domain admins anymore so we'll look at a

245
00:11:22,610 --> 00:11:29,480
couple of things as in in terms of how

246
00:11:25,720 --> 00:11:32,360
you can eliminate not eliminate but you

247
00:11:29,480 --> 00:11:33,620
can reduce the risk of who's got access

248
00:11:32,360 --> 00:11:35,839
into your environment to be able to

249
00:11:33,620 --> 00:11:38,360
change permissions to be able to create

250
00:11:35,839 --> 00:11:41,510
user accounts to delete user accounts

251
00:11:38,360 --> 00:11:43,760
modify them as well as look at things

252
00:11:41,510 --> 00:11:46,519
like group managed service accounts does

253
00:11:43,760 --> 00:11:53,079
anybody use that in your current

254
00:11:46,519 --> 00:11:56,240
production environment at the moment and

255
00:11:53,079 --> 00:12:00,459
what about protected users does anybody

256
00:11:56,240 --> 00:12:01,640
use that feature in their environment

257
00:12:00,459 --> 00:12:04,040
okay

258
00:12:01,640 --> 00:12:05,990
so these are a few key things that you

259
00:12:04,040 --> 00:12:09,079
can definitely use in your environment

260
00:12:05,990 --> 00:12:12,079
that will will help harden the

261
00:12:09,079 --> 00:12:14,630
environment but not really affect the

262
00:12:12,079 --> 00:12:20,599
user access in terms of what they need

263
00:12:14,630 --> 00:12:22,010
to do so let's look at the active

264
00:12:20,600 --> 00:12:30,320
directory let's look at the öyou

265
00:12:22,010 --> 00:12:34,279
delegations and ACL right so I've got a

266
00:12:30,320 --> 00:12:38,380
lab set up here where I've got a domain

267
00:12:34,279 --> 00:12:41,779
controller and I've got a workstation

268
00:12:38,380 --> 00:12:46,149
does anybody restrict the user access to

269
00:12:41,779 --> 00:12:48,439
the domain controller okay good

270
00:12:46,149 --> 00:12:51,529
everybody nobody should be logging on to

271
00:12:48,440 --> 00:12:53,029
the domain controller if possible all of

272
00:12:51,529 --> 00:12:56,870
you guys should be using and girls

273
00:12:53,029 --> 00:12:59,120
should be using server core as your

274
00:12:56,870 --> 00:13:01,399
domain controllers you want to reduce

275
00:12:59,120 --> 00:13:03,949
the attack vector and you want to make

276
00:13:01,399 --> 00:13:07,220
sure that the only at any time they need

277
00:13:03,949 --> 00:13:08,569
to access a duct or anything related to

278
00:13:07,220 --> 00:13:10,519
Active Directory trusted management it's

279
00:13:08,570 --> 00:13:14,630
all done through our set you can install

280
00:13:10,519 --> 00:13:17,959
our set tools on workstations or servers

281
00:13:14,630 --> 00:13:19,550
that you restrict who has access to it

282
00:13:17,959 --> 00:13:22,790
so that's another way that you can

283
00:13:19,550 --> 00:13:24,620
reduce the number of users that you have

284
00:13:22,790 --> 00:13:26,030
that can potentially make changes to the

285
00:13:24,620 --> 00:13:31,700
environment that can have a detrimental

286
00:13:26,030 --> 00:13:34,799
effect to it so let me log in real quick

287
00:13:31,700 --> 00:13:34,799
[Music]

288
00:14:13,280 --> 00:14:18,900
so as you can see for those of you that

289
00:14:16,170 --> 00:14:21,689
may or that can call it out quickly I'm

290
00:14:18,900 --> 00:14:24,150
a basketball junkie and I have my domain

291
00:14:21,690 --> 00:14:26,100
environment replicating the National

292
00:14:24,150 --> 00:14:28,590
Basketball League and that's how I have

293
00:14:26,100 --> 00:14:30,300
it set up and one of the things that I

294
00:14:28,590 --> 00:14:32,150
want to show you in terms of Bowie

295
00:14:30,300 --> 00:14:36,469
delegations is there's two ways you can

296
00:14:32,150 --> 00:14:39,420
restrict access to a environment to

297
00:14:36,470 --> 00:14:42,660
specific OU's right say that a lot of

298
00:14:39,420 --> 00:14:46,050
times the engineers will just right go

299
00:14:42,660 --> 00:14:49,800
into the main the root of the directory

300
00:14:46,050 --> 00:14:51,150
and go into delegate control and then

301
00:14:49,800 --> 00:14:54,030
give them all the access that they need

302
00:14:51,150 --> 00:15:03,329
to but if you take a little further in

303
00:14:54,030 --> 00:15:05,970
which we'll do it here you can really

304
00:15:03,330 --> 00:15:16,950
really restrict what that engineer has

305
00:15:05,970 --> 00:15:20,360
access to right so you can you can

306
00:15:16,950 --> 00:15:23,550
either use any of the preset customized

307
00:15:20,360 --> 00:15:25,680
setups that you can do which is manage

308
00:15:23,550 --> 00:15:28,020
user accounts join machines to domain

309
00:15:25,680 --> 00:15:30,810
reset all user information create delete

310
00:15:28,020 --> 00:15:34,530
and manage groups or you can really go

311
00:15:30,810 --> 00:15:36,930
in and customize the access level either

312
00:15:34,530 --> 00:15:40,290
by the end user or by security groups

313
00:15:36,930 --> 00:15:41,729
now if you drill drill down into the

314
00:15:40,290 --> 00:15:44,849
objects in the following folder you can

315
00:15:41,730 --> 00:15:47,700
see how granular this can really get you

316
00:15:44,850 --> 00:15:50,130
can have access where users can only

317
00:15:47,700 --> 00:15:53,330
modify the DNS zones and nothing else

318
00:15:50,130 --> 00:15:56,010
you can have access where all they do is

319
00:15:53,330 --> 00:15:59,730
reset passwords and depending on the

320
00:15:56,010 --> 00:16:02,189
tier of what what Microsoft deems them

321
00:15:59,730 --> 00:16:03,450
in tier zero one or two they don't

322
00:16:02,190 --> 00:16:05,900
really need all this access to be able

323
00:16:03,450 --> 00:16:08,310
to move oh you move oh use or

324
00:16:05,900 --> 00:16:11,939
accidentally delete objects how many of

325
00:16:08,310 --> 00:16:14,239
you have moved OU's uncheck the protect

326
00:16:11,940 --> 00:16:17,190
from accidental accidental deletion

327
00:16:14,240 --> 00:16:18,839
checkbox and never remember to put it

328
00:16:17,190 --> 00:16:21,150
back in there and then next thing you

329
00:16:18,839 --> 00:16:23,010
know somebody went in and deleted that

330
00:16:21,150 --> 00:16:25,100
oh you and you've got like

331
00:16:23,010 --> 00:16:28,620
500 users missing from Active Directory

332
00:16:25,100 --> 00:16:30,570
that can be a huge huge problem when you

333
00:16:28,620 --> 00:16:33,360
don't have the right controls in place

334
00:16:30,570 --> 00:16:36,840
to where you don't know who's got what

335
00:16:33,360 --> 00:16:38,730
access and sometimes you can have so

336
00:16:36,840 --> 00:16:40,620
much turnover where if the right

337
00:16:38,730 --> 00:16:42,990
environments if the right settings are

338
00:16:40,620 --> 00:16:44,520
not set in place it can cause a major

339
00:16:42,990 --> 00:16:46,470
disruption to the business and then you

340
00:16:44,520 --> 00:16:50,160
end up losing a lot of money from the

341
00:16:46,470 --> 00:16:53,400
business side one of the other things is

342
00:16:50,160 --> 00:16:55,140
that it's easy to implement these

343
00:16:53,400 --> 00:16:56,880
settings in a green field environment

344
00:16:55,140 --> 00:16:58,560
you've got a clean clean slate

345
00:16:56,880 --> 00:17:00,810
you don't have anything that you

346
00:16:58,560 --> 00:17:06,060
anything wonky or anything funky that

347
00:17:00,810 --> 00:17:07,829
you don't know of that has potential

348
00:17:06,060 --> 00:17:09,569
that can have potential negative issues

349
00:17:07,829 --> 00:17:10,919
in there in a brownfield environment

350
00:17:09,569 --> 00:17:12,780
it's a lot more different because of the

351
00:17:10,920 --> 00:17:14,699
fact that you don't know what you don't

352
00:17:12,780 --> 00:17:17,940
know right you don't know what nested

353
00:17:14,699 --> 00:17:20,220
groups are where what user has access to

354
00:17:17,940 --> 00:17:22,380
what and then you're wondering one day

355
00:17:20,220 --> 00:17:24,089
when you do a screen test you were

356
00:17:22,380 --> 00:17:25,890
wondering why these settings are even in

357
00:17:24,089 --> 00:17:29,360
place in them and are even there in the

358
00:17:25,890 --> 00:17:32,340
first place so that's one way to

359
00:17:29,360 --> 00:17:34,709
restrict who's got access so the other

360
00:17:32,340 --> 00:17:37,830
way to do it is if you right-click on it

361
00:17:34,710 --> 00:17:42,090
and go to the properties folder you can

362
00:17:37,830 --> 00:17:44,939
go into the security tab if this decides

363
00:17:42,090 --> 00:17:46,889
to show up today and you can delegate

364
00:17:44,940 --> 00:17:53,220
permissions from there right personally

365
00:17:46,890 --> 00:17:54,660
I like doing it as the delegation of the

366
00:17:53,220 --> 00:17:57,060
öyou wizard because I think it's got a

367
00:17:54,660 --> 00:17:59,880
lot of common features in there that you

368
00:17:57,060 --> 00:18:04,620
can really leverage for your environment

369
00:17:59,880 --> 00:18:07,350
and it's easier to apply those to to

370
00:18:04,620 --> 00:18:10,260
other environments and groups if you you

371
00:18:07,350 --> 00:18:14,010
should be all using groups also so if

372
00:18:10,260 --> 00:18:17,340
you edit the permissions you can you can

373
00:18:14,010 --> 00:18:18,660
set the granularity on this a lot more

374
00:18:17,340 --> 00:18:20,490
because you can decide whether you want

375
00:18:18,660 --> 00:18:22,050
this to go on the child objects just

376
00:18:20,490 --> 00:18:25,890
that specific folder and what other

377
00:18:22,050 --> 00:18:29,629
features you want going into that access

378
00:18:25,890 --> 00:18:32,280
so here's a setting for a deny

379
00:18:29,630 --> 00:18:34,140
permission for this error for this

380
00:18:32,280 --> 00:18:37,000
everyone group and you can see how

381
00:18:34,140 --> 00:18:39,580
granular this can get

382
00:18:37,000 --> 00:18:42,100
it can get very very hairy very quickly

383
00:18:39,580 --> 00:18:45,310
because of the fact that you can really

384
00:18:42,100 --> 00:18:46,179
restrict all these permissions right but

385
00:18:45,310 --> 00:18:47,860
that's what we want

386
00:18:46,180 --> 00:18:50,710
I know it's it's a little bit of more

387
00:18:47,860 --> 00:18:52,780
work than just making everybody domain

388
00:18:50,710 --> 00:18:55,420
admin and moving on with your day

389
00:18:52,780 --> 00:18:57,580
but in the long run this hardens the

390
00:18:55,420 --> 00:18:59,920
environment from the inside rather than

391
00:18:57,580 --> 00:19:02,520
waiting for a breach to happen and then

392
00:18:59,920 --> 00:19:04,900
having everybody question why this

393
00:19:02,520 --> 00:19:11,190
hacker was able to get in whose password

394
00:19:04,900 --> 00:19:13,420
is used and kind of have a reactive

395
00:19:11,190 --> 00:19:15,420
situation rather than making all these

396
00:19:13,420 --> 00:19:17,050
changes and being proactive ahead of

397
00:19:15,420 --> 00:19:20,020
getting breached

398
00:19:17,050 --> 00:19:23,470
so one of the things that I want to show

399
00:19:20,020 --> 00:19:26,200
you was as a domain admin here's all the

400
00:19:23,470 --> 00:19:28,180
features you've got right so you

401
00:19:26,200 --> 00:19:30,100
right-click I don't know you and you do

402
00:19:28,180 --> 00:19:32,650
new right so you can do all these things

403
00:19:30,100 --> 00:19:34,449
you can create a new computer object you

404
00:19:32,650 --> 00:19:37,090
can create a new group you can create a

405
00:19:34,450 --> 00:19:40,240
new shadow principle container which

406
00:19:37,090 --> 00:19:41,980
will go into that a little later on as

407
00:19:40,240 --> 00:19:45,010
to why that's important but when you

408
00:19:41,980 --> 00:19:47,970
restrict access the right way here's

409
00:19:45,010 --> 00:19:50,350
what the end user would see if they

410
00:19:47,970 --> 00:19:53,560
right-click and make any modification so

411
00:19:50,350 --> 00:19:55,540
if you wanted to do this user doesn't

412
00:19:53,560 --> 00:19:59,050
even have access to be able to create

413
00:19:55,540 --> 00:20:01,629
any new objects all they can do is find

414
00:19:59,050 --> 00:20:06,750
and delegate control which even that is

415
00:20:01,630 --> 00:20:09,400
restricted so if you want if you have a

416
00:20:06,750 --> 00:20:10,900
level one service desk where all you

417
00:20:09,400 --> 00:20:12,820
want them to do is just be able to reset

418
00:20:10,900 --> 00:20:14,920
user passwords and accounts that's the

419
00:20:12,820 --> 00:20:16,090
kind of access where you want them to

420
00:20:14,920 --> 00:20:18,850
have you don't want them to be able to

421
00:20:16,090 --> 00:20:22,300
create a backdoor somehow without you

422
00:20:18,850 --> 00:20:25,060
knowing you also you know you can see

423
00:20:22,300 --> 00:20:30,040
that the only permissions here are tied

424
00:20:25,060 --> 00:20:32,710
into managing the end user rather than

425
00:20:30,040 --> 00:20:35,350
being able to modify anything from the

426
00:20:32,710 --> 00:20:39,040
oh you structure or the active directory

427
00:20:35,350 --> 00:20:41,669
structure and let's look at another user

428
00:20:39,040 --> 00:20:41,670
permission

429
00:20:43,330 --> 00:20:46,970
[Music]

430
00:20:49,620 --> 00:21:10,579
[Music]

431
00:21:13,530 --> 00:21:23,500
also don't use Oracle's cloud solution

432
00:21:16,600 --> 00:21:25,120
it's terrible so here I am logged in as

433
00:21:23,500 --> 00:21:26,290
me right and I've granted myself a

434
00:21:25,120 --> 00:21:28,510
little bit knew a little bit more

435
00:21:26,290 --> 00:21:30,730
permissions than of service tests here

436
00:21:28,510 --> 00:21:33,160
so here I am able to create a new group

437
00:21:30,730 --> 00:21:35,440
create new users and modify permissions

438
00:21:33,160 --> 00:21:37,090
as I need to be able to do so now you

439
00:21:35,440 --> 00:21:40,780
can do a mix and match of both you can

440
00:21:37,090 --> 00:21:42,699
be you can do this setting as well as

441
00:21:40,780 --> 00:21:43,840
the other user but you definitely don't

442
00:21:42,700 --> 00:21:46,390
want them to have domain admin

443
00:21:43,840 --> 00:21:48,760
permissions you can see again what

444
00:21:46,390 --> 00:21:51,430
features I have enabled for me as well

445
00:21:48,760 --> 00:21:52,600
as what features the domain admin has

446
00:21:51,430 --> 00:21:56,580
right they can do all these different

447
00:21:52,600 --> 00:21:58,959
things and we are very quick to grant

448
00:21:56,580 --> 00:22:03,730
tier one Service Desk domain admin

449
00:21:58,960 --> 00:22:09,790
access to make changes and you

450
00:22:03,730 --> 00:22:12,160
definitely don't want to do that now

451
00:22:09,790 --> 00:22:18,070
let's talk about managed service

452
00:22:12,160 --> 00:22:30,310
accounts how many of you have been to

453
00:22:18,070 --> 00:22:32,080
this scenario before where an

454
00:22:30,310 --> 00:22:34,090
application breaks and all of a sudden

455
00:22:32,080 --> 00:22:35,080
you have no idea what it is you're

456
00:22:34,090 --> 00:22:35,980
looking everywhere you're looking at

457
00:22:35,080 --> 00:22:39,760
permissions you're looking at the

458
00:22:35,980 --> 00:22:41,170
application itself and eventually when

459
00:22:39,760 --> 00:22:42,610
you do get to the logs which is gonna be

460
00:22:41,170 --> 00:22:43,750
about 30 minutes later because you're

461
00:22:42,610 --> 00:22:46,360
not looking at logs the first time

462
00:22:43,750 --> 00:22:50,080
around you realize that the servant

463
00:22:46,360 --> 00:22:51,909
service account is expired and nobody

464
00:22:50,080 --> 00:22:54,540
knows what the new password is or what

465
00:22:51,910 --> 00:23:01,240
the old password was in the first place

466
00:22:54,540 --> 00:23:02,649
that's so one of the new feet what and

467
00:23:01,240 --> 00:23:03,850
this is not even a new feature this has

468
00:23:02,650 --> 00:23:06,190
been a feature that's been around since

469
00:23:03,850 --> 00:23:07,270
about 2008 where they started where

470
00:23:06,190 --> 00:23:10,570
Microsoft created something called

471
00:23:07,270 --> 00:23:13,330
managed service accounts where Active

472
00:23:10,570 --> 00:23:16,629
Directory handles the password

473
00:23:13,330 --> 00:23:19,480
look storage as well as creation and

474
00:23:16,630 --> 00:23:21,370
renewal by itself when they first rolled

475
00:23:19,480 --> 00:23:24,730
it out in 2008

476
00:23:21,370 --> 00:23:27,280
the caveat was that you wouldn't be able

477
00:23:24,730 --> 00:23:30,030
to use that same account on multiple

478
00:23:27,280 --> 00:23:33,639
hosts each host had to have its own

479
00:23:30,030 --> 00:23:36,820
specific user account and if you had an

480
00:23:33,640 --> 00:23:39,370
IAS farm or a load bouncer from Windows

481
00:23:36,820 --> 00:23:41,439
which also don't do that

482
00:23:39,370 --> 00:23:44,169
you had to create a new service account

483
00:23:41,440 --> 00:23:47,860
each and every single time way 2012 and

484
00:23:44,170 --> 00:23:52,510
2016 they rolled out something called

485
00:23:47,860 --> 00:23:54,610
group managed service accounts and they

486
00:23:52,510 --> 00:23:56,800
made it very simple to be able to create

487
00:23:54,610 --> 00:23:58,419
provision these accounts and then be

488
00:23:56,800 --> 00:24:00,730
able to use them in your environment

489
00:23:58,420 --> 00:24:04,570
where you no longer ever have to worry

490
00:24:00,730 --> 00:24:07,200
about what how secure the password is

491
00:24:04,570 --> 00:24:10,830
when the password is gonna expire and

492
00:24:07,200 --> 00:24:13,840
who's responsible for managing that

493
00:24:10,830 --> 00:24:15,189
account information if and when you have

494
00:24:13,840 --> 00:24:18,520
settings where the password set to

495
00:24:15,190 --> 00:24:20,170
expire every 90 days a year or hopefully

496
00:24:18,520 --> 00:24:22,840
you never have password never set to

497
00:24:20,170 --> 00:24:28,870
expire in your environment so let's take

498
00:24:22,840 --> 00:24:30,189
a look at how you can provision an

499
00:24:28,870 --> 00:24:36,939
account and then where you can go ahead

500
00:24:30,190 --> 00:24:39,250
and use it so I've already done this

501
00:24:36,940 --> 00:24:41,110
example and there's three things you

502
00:24:39,250 --> 00:24:42,340
need right you have to be able to in

503
00:24:41,110 --> 00:24:44,559
order for this to work you have to

504
00:24:42,340 --> 00:24:47,230
create a root key in Active Directory so

505
00:24:44,559 --> 00:24:48,940
that it encrypts the password and then

506
00:24:47,230 --> 00:24:51,580
make sure that it manages that at

507
00:24:48,940 --> 00:24:53,980
whatever encryption level you set up so

508
00:24:51,580 --> 00:24:57,909
the first thing you can do is the add

509
00:24:53,980 --> 00:25:00,460
add kts root key and there's two you can

510
00:24:57,910 --> 00:25:03,640
do either effective immediately but if

511
00:25:00,460 --> 00:25:04,540
you have a environment a production

512
00:25:03,640 --> 00:25:07,240
environment where you've got multiple

513
00:25:04,540 --> 00:25:09,100
domain controllers which is the best way

514
00:25:07,240 --> 00:25:11,290
to go you want to make sure that this

515
00:25:09,100 --> 00:25:12,550
root key replicates to all those domain

516
00:25:11,290 --> 00:25:15,639
controllers so you can set a time limit

517
00:25:12,550 --> 00:25:17,110
by default Microsoft says 10 hours per

518
00:25:15,640 --> 00:25:20,410
say anything that's a little long

519
00:25:17,110 --> 00:25:22,449
because we don't really have that many

520
00:25:20,410 --> 00:25:24,580
issues in terms of replication and

521
00:25:22,450 --> 00:25:25,780
having to worry about when domain

522
00:25:24,580 --> 00:25:28,178
controllers replicate and when they

523
00:25:25,780 --> 00:25:31,210
don't when they do and when they don't

524
00:25:28,179 --> 00:25:32,830
so the second command is pretty

525
00:25:31,210 --> 00:25:35,049
straightforward - it's just a new ad

526
00:25:32,830 --> 00:25:36,519
service account you have to say

527
00:25:35,049 --> 00:25:40,509
the name for it you've said the DNS

528
00:25:36,519 --> 00:25:42,610
hostname and this is the kicker the

529
00:25:40,509 --> 00:25:45,700
principal's allowed to retrieve the

530
00:25:42,610 --> 00:25:48,369
managed password right this is where you

531
00:25:45,700 --> 00:25:51,369
determine if you've got an IAS farm

532
00:25:48,369 --> 00:25:54,129
ideally you'd have all the IAS servers

533
00:25:51,369 --> 00:25:56,019
in a specific group and you only want to

534
00:25:54,129 --> 00:25:57,939
make sure that that specific group is

535
00:25:56,019 --> 00:26:01,529
able to retrieve the password from the

536
00:25:57,940 --> 00:26:05,200
Active Directory database and the the

537
00:26:01,529 --> 00:26:07,989
Kerberos encryption type you can set it

538
00:26:05,200 --> 00:26:10,359
if you want to but by default it's set

539
00:26:07,989 --> 00:26:12,960
to 128 but if you really want to make

540
00:26:10,359 --> 00:26:18,340
sure it's secure you can enable the 256

541
00:26:12,960 --> 00:26:19,899
AES option now when I first did this I

542
00:26:18,340 --> 00:26:21,639
was like oh great I'm done I'm all good

543
00:26:19,899 --> 00:26:23,768
and all set and so I went ahead and

544
00:26:21,639 --> 00:26:26,529
tried to use that account on the server

545
00:26:23,769 --> 00:26:29,980
didn't work says cannot retrieve the

546
00:26:26,529 --> 00:26:32,619
password and I was like wondering why so

547
00:26:29,980 --> 00:26:37,059
the last piece to this is you have to

548
00:26:32,619 --> 00:26:41,080
explicitly set the ad service account to

549
00:26:37,059 --> 00:26:44,230
be used by the individual nodes you have

550
00:26:41,080 --> 00:26:47,049
to be able to and once you do that you

551
00:26:44,230 --> 00:26:48,129
no longer you know it'll allow it you

552
00:26:47,049 --> 00:26:50,859
have to allow it log on as a service

553
00:26:48,129 --> 00:26:54,850
permissions service permission as well

554
00:26:50,859 --> 00:26:58,119
as make sure that it runs for that

555
00:26:54,850 --> 00:27:02,439
specific environment when you in 2016 if

556
00:26:58,119 --> 00:27:04,090
you look into the specific oh you

557
00:27:02,440 --> 00:27:07,989
there's a managed service account oh you

558
00:27:04,090 --> 00:27:09,340
and you will see all of these accounts

559
00:27:07,989 --> 00:27:15,989
that you've generated stored in there

560
00:27:09,340 --> 00:27:21,279
automatically so here is where I have it

561
00:27:15,989 --> 00:27:23,710
running on my local machine typically

562
00:27:21,279 --> 00:27:25,749
you want to do this for a shared

563
00:27:23,710 --> 00:27:29,679
environment or a clustered environment

564
00:27:25,749 --> 00:27:30,580
of any sort whether it's iis whether

565
00:27:29,679 --> 00:27:33,159
it's low bouncer

566
00:27:30,580 --> 00:27:35,918
now depending on third-party

567
00:27:33,159 --> 00:27:37,269
applications some of them may not be

568
00:27:35,919 --> 00:27:40,029
compatible with that so you have to be

569
00:27:37,269 --> 00:27:42,039
cognizant of what applications will

570
00:27:40,029 --> 00:27:43,109
support a group managed service account

571
00:27:42,039 --> 00:27:47,740
and which ones don't

572
00:27:43,109 --> 00:27:52,409
so I ended up setting

573
00:27:47,740 --> 00:27:52,410
this account on the windows audio

574
00:27:53,280 --> 00:27:59,080
service and that I you don't have to set

575
00:27:57,010 --> 00:28:00,220
a password port it automatically will

576
00:27:59,080 --> 00:28:01,540
pull the password in from Active

577
00:28:00,220 --> 00:28:03,730
Directory and you don't have to worry

578
00:28:01,540 --> 00:28:05,520
about when it's gonna expire what's

579
00:28:03,730 --> 00:28:08,200
going to break and who's responsible for

580
00:28:05,520 --> 00:28:15,340
setting the new password or remembering

581
00:28:08,200 --> 00:28:16,900
the old one so the last thing that I

582
00:28:15,340 --> 00:28:18,760
want to talk about about new features

583
00:28:16,900 --> 00:28:22,720
you can enroll is something called

584
00:28:18,760 --> 00:28:24,490
protected users it's a new o you in 2012

585
00:28:22,720 --> 00:28:28,000
that they further made some changes in

586
00:28:24,490 --> 00:28:34,810
2016 and one of the things that that

587
00:28:28,000 --> 00:28:37,270
does is you want to make sure that you

588
00:28:34,810 --> 00:28:39,010
only put the most leveraged account the

589
00:28:37,270 --> 00:28:41,379
highest privileged accounts in that

590
00:28:39,010 --> 00:28:46,330
specific group and there's a reason why

591
00:28:41,380 --> 00:28:49,120
so ntlm is still a protocol that's used

592
00:28:46,330 --> 00:28:51,030
in the Microsoft environment it's not

593
00:28:49,120 --> 00:28:54,250
recommended but they still support it

594
00:28:51,030 --> 00:28:55,930
and when you're doing a when you're

595
00:28:54,250 --> 00:28:58,150
doing connections to a machine that's on

596
00:28:55,930 --> 00:29:00,340
a workgroup it still uses Antilla you

597
00:28:58,150 --> 00:29:01,690
can force Kerberos which is what Active

598
00:29:00,340 --> 00:29:04,000
Directory uses but you have to be very

599
00:29:01,690 --> 00:29:05,440
careful about setting that in your

600
00:29:04,000 --> 00:29:08,200
environment because if you don't have

601
00:29:05,440 --> 00:29:09,760
service principal names configured the

602
00:29:08,200 --> 00:29:11,470
Kerberos authentication won't work and

603
00:29:09,760 --> 00:29:14,050
if you don't have ntlm as a default

604
00:29:11,470 --> 00:29:18,780
you're gonna have a lot of issues trying

605
00:29:14,050 --> 00:29:22,210
to access domain resources so you wanna

606
00:29:18,780 --> 00:29:24,280
you want to remove using ntlm as an

607
00:29:22,210 --> 00:29:27,150
option all you have to do so very very

608
00:29:24,280 --> 00:29:29,649
diligently you have to make sure that

609
00:29:27,150 --> 00:29:34,120
you set service principle names for all

610
00:29:29,650 --> 00:29:36,040
your for all your applications and until

611
00:29:34,120 --> 00:29:40,540
you do that right here's what happens

612
00:29:36,040 --> 00:29:45,159
when you log in with a normal user

613
00:29:40,540 --> 00:29:46,750
account that is not only protected oh

614
00:29:45,160 --> 00:29:48,460
you and the NADA

615
00:29:46,750 --> 00:29:53,290
that's not on the protected users group

616
00:29:48,460 --> 00:29:55,810
so by default when you're using ntlm

617
00:29:53,290 --> 00:29:58,300
authentication and you share and you do

618
00:29:55,810 --> 00:30:00,530
the exchange your username and password

619
00:29:58,300 --> 00:30:03,830
is typically hashed

620
00:30:00,530 --> 00:30:07,550
but that hash is stored in three places

621
00:30:03,830 --> 00:30:10,270
where it can be easily retrieved and the

622
00:30:07,550 --> 00:30:12,710
service account manager database in the

623
00:30:10,270 --> 00:30:16,120
local security authority subsystem as

624
00:30:12,710 --> 00:30:19,150
well as the Active Directory database

625
00:30:16,120 --> 00:30:21,889
now the problem with that is that key

626
00:30:19,150 --> 00:30:23,750
can easily be you so you no longer need

627
00:30:21,890 --> 00:30:26,120
the usual name and a password

628
00:30:23,750 --> 00:30:29,000
you can just use the hash key in order

629
00:30:26,120 --> 00:30:33,620
to be able to intercept a connection or

630
00:30:29,000 --> 00:30:35,840
set a malicious connection when you if

631
00:30:33,620 --> 00:30:37,399
you for someone for some of you that

632
00:30:35,840 --> 00:30:39,740
have that know about this tool there's a

633
00:30:37,400 --> 00:30:45,230
tool called Mimi Katz where you can use

634
00:30:39,740 --> 00:30:47,660
it to kind of trace connections and also

635
00:30:45,230 --> 00:30:49,730
be able to filter traffic so if you look

636
00:30:47,660 --> 00:30:52,940
at the first picture on the top left

637
00:30:49,730 --> 00:30:56,980
right when you have ntlm set up what

638
00:30:52,940 --> 00:30:59,330
happens is that it stores the the key

639
00:30:56,980 --> 00:31:03,110
visibly you can actually see what the

640
00:30:59,330 --> 00:31:04,760
exact hash key is when you don't when

641
00:31:03,110 --> 00:31:06,649
it's not when it's in the protected

642
00:31:04,760 --> 00:31:08,660
users group it doesn't remember that

643
00:31:06,650 --> 00:31:10,790
because it doesn't store the hash in

644
00:31:08,660 --> 00:31:13,790
memory and it doesn't store the hash in

645
00:31:10,790 --> 00:31:16,190
the system32 database because it doesn't

646
00:31:13,790 --> 00:31:19,100
use ntlm it forces it to use Kerberos

647
00:31:16,190 --> 00:31:21,890
every time you try to log in to a system

648
00:31:19,100 --> 00:31:24,590
so that's one of the things that you and

649
00:31:21,890 --> 00:31:26,540
you only want to leverage this for the

650
00:31:24,590 --> 00:31:28,490
higher privileged accounts right like

651
00:31:26,540 --> 00:31:31,190
Mary Jo from accounting doesn't need to

652
00:31:28,490 --> 00:31:33,890
have her account in protected users

653
00:31:31,190 --> 00:31:36,860
group but an enterprise admin a domain

654
00:31:33,890 --> 00:31:38,300
admin and even a schema admin those are

655
00:31:36,860 --> 00:31:40,669
the kinds of groups you want to be

656
00:31:38,300 --> 00:31:43,100
putting in the protected oh you and the

657
00:31:40,670 --> 00:31:47,180
protected users are you so that their

658
00:31:43,100 --> 00:31:48,439
credentials aren't easily traced or you

659
00:31:47,180 --> 00:31:50,840
can't retrieve it from one of those

660
00:31:48,440 --> 00:31:55,970
three locations where they're typically

661
00:31:50,840 --> 00:32:00,080
stored now everything I've told you so

662
00:31:55,970 --> 00:32:02,180
far is piecemeal it's a little bit here

663
00:32:00,080 --> 00:32:04,699
it's a little bit there it's kind of

664
00:32:02,180 --> 00:32:06,920
tweaked this kind of tweak that but and

665
00:32:04,700 --> 00:32:09,500
Microsoft heard that and Microsoft is

666
00:32:06,920 --> 00:32:13,310
notoriously slow at coming up with

667
00:32:09,500 --> 00:32:14,429
solutions for enterprise level systems

668
00:32:13,310 --> 00:32:15,990
right there's

669
00:32:14,429 --> 00:32:17,570
any of third party applications that do

670
00:32:15,990 --> 00:32:21,509
this but in 2016

671
00:32:17,570 --> 00:32:23,908
Microsoft released a new feature it's an

672
00:32:21,509 --> 00:32:27,119
optional feature in 27 2016 called

673
00:32:23,909 --> 00:32:30,690
privileged access manager privileged

674
00:32:27,119 --> 00:32:33,689
access manager is exactly what it says

675
00:32:30,690 --> 00:32:36,330
it's for the privileged accounts that

676
00:32:33,690 --> 00:32:40,590
are in your domain and being able to

677
00:32:36,330 --> 00:32:43,259
restrict what they can use and what they

678
00:32:40,590 --> 00:32:44,789
can and how long they can use it that's

679
00:32:43,259 --> 00:32:45,899
the biggest kicker with privileged

680
00:32:44,789 --> 00:32:49,408
access manager

681
00:32:45,899 --> 00:32:53,658
it's a time-based group membership

682
00:32:49,409 --> 00:32:56,789
feature where you can set how long a

683
00:32:53,659 --> 00:32:58,740
particular user needs to have admin

684
00:32:56,789 --> 00:33:02,249
level rights or whatever they're working

685
00:32:58,740 --> 00:33:06,210
on so Microsoft has three different

686
00:33:02,249 --> 00:33:08,490
tiers of where they see all their users

687
00:33:06,210 --> 00:33:10,080
right so you've got tier 2 which is your

688
00:33:08,490 --> 00:33:10,679
everyday users that's your everyday work

689
00:33:10,080 --> 00:33:14,039
stations

690
00:33:10,679 --> 00:33:17,490
that's the users from finance that's

691
00:33:14,039 --> 00:33:21,240
users from HR or any of the everyday

692
00:33:17,490 --> 00:33:23,669
users that log on to your systems then

693
00:33:21,240 --> 00:33:26,549
you've got to chew tier 1 systems tier 1

694
00:33:23,669 --> 00:33:28,889
is systems admins they're not really in

695
00:33:26,549 --> 00:33:31,499
there not really Enterprise admins but

696
00:33:28,889 --> 00:33:32,879
you know if they need to modify group

697
00:33:31,499 --> 00:33:34,499
permissions or if they need to modify

698
00:33:32,879 --> 00:33:38,610
user accounts and things like that they

699
00:33:34,499 --> 00:33:41,220
would fit under tier 1 then you've got

700
00:33:38,610 --> 00:33:43,320
tears 0 that's that's the one all the

701
00:33:41,220 --> 00:33:45,450
hackers are looking for and it's not

702
00:33:43,320 --> 00:33:47,039
very difficult to get to the tier 1

703
00:33:45,450 --> 00:33:50,759
credentials right because if a hacker

704
00:33:47,039 --> 00:33:53,970
gets into Billy Bob's PC who's got his

705
00:33:50,759 --> 00:33:55,919
password set to password right he's

706
00:33:53,970 --> 00:33:57,659
showing up he doesn't have local admin

707
00:33:55,919 --> 00:33:59,279
access but he'll put in a ticket to

708
00:33:57,659 --> 00:34:01,139
Service Desk and services will come by

709
00:33:59,279 --> 00:34:03,570
and be like oh yeah well you know we'll

710
00:34:01,139 --> 00:34:06,508
use the Service Desk engineer has

711
00:34:03,570 --> 00:34:08,099
elevated permissions so he'll put in his

712
00:34:06,509 --> 00:34:10,168
credentials and guess what we're still

713
00:34:08,099 --> 00:34:11,700
using ntlm so his credentials are stored

714
00:34:10,168 --> 00:34:14,009
somewhere in one of those three

715
00:34:11,699 --> 00:34:15,839
databases that the hacker can now

716
00:34:14,010 --> 00:34:17,849
retrieve from there without even needing

717
00:34:15,839 --> 00:34:20,369
the password you can just use the hash

718
00:34:17,849 --> 00:34:23,429
that's stored there and then move on up

719
00:34:20,369 --> 00:34:25,230
to the next tier right and grant and now

720
00:34:23,429 --> 00:34:26,700
if you don't know whose domain admin you

721
00:34:25,230 --> 00:34:28,418
don't know who's an enterprise admin

722
00:34:26,699 --> 00:34:31,839
you've got all

723
00:34:28,418 --> 00:34:34,149
you've now given this potential hacker

724
00:34:31,839 --> 00:34:35,469
all the access that they need to be able

725
00:34:34,149 --> 00:34:41,679
to go in and explore the environment

726
00:34:35,469 --> 00:34:43,299
further and what Microsoft did is they

727
00:34:41,679 --> 00:34:45,450
came out with something called

728
00:34:43,299 --> 00:34:49,899
privileged privileged access manager and

729
00:34:45,449 --> 00:34:51,819
it's a partnership with a product that

730
00:34:49,899 --> 00:34:53,500
they already had before which was called

731
00:34:51,819 --> 00:34:56,409
forefront Identity Manager and they've

732
00:34:53,500 --> 00:35:02,980
rebranded it as just Microsoft identity

733
00:34:56,409 --> 00:35:06,010
manager in 2016 so by the looks of it as

734
00:35:02,980 --> 00:35:08,589
a systems engineer myself this is

735
00:35:06,010 --> 00:35:10,900
painful right because you've got you've

736
00:35:08,589 --> 00:35:12,160
now don't even have to manage one domain

737
00:35:10,900 --> 00:35:15,880
now you've got a second domain you have

738
00:35:12,160 --> 00:35:20,190
to kind of be worried about because now

739
00:35:15,880 --> 00:35:22,420
you've got a two domains to manage and

740
00:35:20,190 --> 00:35:25,990
the one thing about this is that there's

741
00:35:22,420 --> 00:35:27,460
a one-way force trust from the

742
00:35:25,990 --> 00:35:29,470
privileged domain controller to the

743
00:35:27,460 --> 00:35:32,200
production domain controller so the way

744
00:35:29,470 --> 00:35:34,419
this works is essentially you've got two

745
00:35:32,200 --> 00:35:36,868
domains you've got a production domain

746
00:35:34,420 --> 00:35:40,119
you've got a privilege domain but

747
00:35:36,869 --> 00:35:43,710
there's no admin users in the production

748
00:35:40,119 --> 00:35:46,480
domain the way this works is you have

749
00:35:43,710 --> 00:35:48,700
something called you can either use the

750
00:35:46,480 --> 00:35:51,220
Microsoft identity manager option or

751
00:35:48,700 --> 00:35:54,399
with 2016 they've actually built

752
00:35:51,220 --> 00:35:56,500
powershell commandlets which you can use

753
00:35:54,400 --> 00:36:01,089
to be able to establish the one way

754
00:35:56,500 --> 00:36:04,809
trust as well as allow group delegations

755
00:36:01,089 --> 00:36:07,960
to the oh you from the privileged domain

756
00:36:04,809 --> 00:36:10,539
into the production domain so the way

757
00:36:07,960 --> 00:36:12,519
this would work is you have to be very

758
00:36:10,539 --> 00:36:14,859
cognizant about how you create these

759
00:36:12,519 --> 00:36:16,209
groups because the groups have to be

760
00:36:14,859 --> 00:36:21,390
mirrored from the production side as

761
00:36:16,210 --> 00:36:21,390
well as on the privileged design and

762
00:36:21,569 --> 00:36:28,599
each time a user needs to be able to do

763
00:36:25,329 --> 00:36:31,359
some sort of admin level work you have

764
00:36:28,599 --> 00:36:32,950
to request access to it that's one of

765
00:36:31,359 --> 00:36:37,890
the pain points which can be automated

766
00:36:32,950 --> 00:36:41,379
but the beauty of that is these are now

767
00:36:37,890 --> 00:36:42,640
time-stamped and time generated tickets

768
00:36:41,380 --> 00:36:44,500
meaning that if

769
00:36:42,640 --> 00:36:47,609
somebody needs elevated permissions to

770
00:36:44,500 --> 00:36:50,079
be able to go in and make domain changes

771
00:36:47,609 --> 00:36:51,788
they can request access for an hour and

772
00:36:50,079 --> 00:36:53,710
that's it you no longer have to worry

773
00:36:51,789 --> 00:36:55,180
about who's still stuck in the domain

774
00:36:53,710 --> 00:36:58,720
admins group who's still in the

775
00:36:55,180 --> 00:37:01,149
enterprise admins group and who is no

776
00:36:58,720 --> 00:37:05,319
longer in that group right so the way

777
00:37:01,150 --> 00:37:06,700
this works is you've got two different

778
00:37:05,319 --> 00:37:09,058
domains you've got the production domain

779
00:37:06,700 --> 00:37:13,720
and then you've got the privilege domain

780
00:37:09,059 --> 00:37:16,170
now how do they know without having to

781
00:37:13,720 --> 00:37:19,209
create multiple accounts you still use

782
00:37:16,170 --> 00:37:22,150
you would still use your same account

783
00:37:19,210 --> 00:37:27,099
and the same password but how do they

784
00:37:22,150 --> 00:37:33,220
know exactly which so how do they know

785
00:37:27,099 --> 00:37:34,480
exactly which groups that user is in

786
00:37:33,220 --> 00:37:36,759
right you don't have to worry about that

787
00:37:34,480 --> 00:37:38,829
in the sense that you're using the same

788
00:37:36,760 --> 00:37:42,069
credentials the difference is something

789
00:37:38,829 --> 00:37:46,319
called CID history and what they do is

790
00:37:42,069 --> 00:37:49,869
they pass the same CID ID from the

791
00:37:46,319 --> 00:37:53,829
production domain into the admin domain

792
00:37:49,869 --> 00:37:57,759
so when you log in as you're privileged

793
00:37:53,829 --> 00:38:03,460
account your CID from the production

794
00:37:57,759 --> 00:38:05,049
environment is is shared with the with

795
00:38:03,460 --> 00:38:07,059
the user account in the privileged

796
00:38:05,049 --> 00:38:08,920
domain so that when you're making

797
00:38:07,059 --> 00:38:11,470
changes you can use your same

798
00:38:08,920 --> 00:38:13,690
credentials and not have to worry about

799
00:38:11,470 --> 00:38:16,000
do I need to manage two accounts do I

800
00:38:13,690 --> 00:38:17,740
need to manage one account and it's it's

801
00:38:16,000 --> 00:38:22,630
a very simple powershell commandlets to

802
00:38:17,740 --> 00:38:24,508
be able to request access from one to

803
00:38:22,630 --> 00:38:28,269
request access to be able to go into

804
00:38:24,509 --> 00:38:32,799
that domain so when when you do get

805
00:38:28,269 --> 00:38:34,779
access this is a a heavy-lift in terms

806
00:38:32,799 --> 00:38:35,980
of the admin who has to create these

807
00:38:34,779 --> 00:38:37,359
permissions right because now you have

808
00:38:35,980 --> 00:38:39,730
to mirror permissions from both sides

809
00:38:37,359 --> 00:38:41,799
but it is absolutely worth it because

810
00:38:39,730 --> 00:38:44,200
you no longer have so you've got two

811
00:38:41,799 --> 00:38:48,240
things you no longer have any admins in

812
00:38:44,200 --> 00:38:51,250
your production domain and all of your

813
00:38:48,240 --> 00:38:53,589
acts your privileged access levels are

814
00:38:51,250 --> 00:38:56,390
time-based so you can set it for 15

815
00:38:53,589 --> 00:38:59,089
minutes 30 minutes one hour whatever

816
00:38:56,390 --> 00:39:01,430
is fully knowing and being rest assured

817
00:38:59,089 --> 00:39:03,769
that once that time is expired unless

818
00:39:01,430 --> 00:39:05,180
they've decided to extend it which also

819
00:39:03,769 --> 00:39:06,979
has the number of limits you can do

820
00:39:05,180 --> 00:39:09,009
which you can also set the number of

821
00:39:06,980 --> 00:39:11,630
times that the time can be extended

822
00:39:09,010 --> 00:39:13,069
those users are no longer going to just

823
00:39:11,630 --> 00:39:15,559
sit there in that admin group and

824
00:39:13,069 --> 00:39:19,788
potentially have the opportunity to be

825
00:39:15,559 --> 00:39:22,400
compromised when an attacker or somebody

826
00:39:19,789 --> 00:39:26,059
with a weak password is able to get in

827
00:39:22,400 --> 00:39:28,549
and access your resources so what does

828
00:39:26,059 --> 00:39:32,390
this look like when you log on to a

829
00:39:28,549 --> 00:39:34,940
system so you've got your privilege

830
00:39:32,390 --> 00:39:37,578
domain and this is your privilege

831
00:39:34,940 --> 00:39:38,230
account right here so when you do Who am

832
00:39:37,579 --> 00:39:40,190
I

833
00:39:38,230 --> 00:39:41,809
even though you're in the privileged

834
00:39:40,190 --> 00:39:44,859
domain and you're logged in with your

835
00:39:41,809 --> 00:39:48,440
privileged account you still have your

836
00:39:44,859 --> 00:39:50,480
once your approval is granted for

837
00:39:48,440 --> 00:39:53,510
permission for domain admin permissions

838
00:39:50,480 --> 00:39:55,460
that domain admin SID is still listed

839
00:39:53,510 --> 00:39:58,069
under your privileged account so you can

840
00:39:55,460 --> 00:40:00,829
go in there and make the changes you

841
00:39:58,069 --> 00:40:04,099
need and you can when you do a search on

842
00:40:00,829 --> 00:40:08,450
the production domain of whose domain

843
00:40:04,099 --> 00:40:10,519
admin it still only has the domain admin

844
00:40:08,450 --> 00:40:14,000
that's built into the environment

845
00:40:10,519 --> 00:40:16,098
there's no other users that are sitting

846
00:40:14,000 --> 00:40:20,509
in there that don't need to be in there

847
00:40:16,099 --> 00:40:27,799
when they're not doing any work so it's

848
00:40:20,509 --> 00:40:31,630
a pretty neat feature I like it and it's

849
00:40:27,799 --> 00:40:34,309
it's great in terms of managing who has

850
00:40:31,630 --> 00:40:37,190
permissions that they need and they and

851
00:40:34,309 --> 00:40:41,690
what they don't need what is the issue

852
00:40:37,190 --> 00:40:43,670
is it can be very cumbersome to set it

853
00:40:41,690 --> 00:40:46,130
up but it is absolutely worth it if you

854
00:40:43,670 --> 00:40:46,640
if you this is the PowerShell way of

855
00:40:46,130 --> 00:40:48,589
doing it

856
00:40:46,640 --> 00:40:51,500
but there is another way where if you

857
00:40:48,589 --> 00:40:54,500
incorporate the Microsoft Identity

858
00:40:51,500 --> 00:40:57,109
Manager platform you can have a

859
00:40:54,500 --> 00:40:59,029
web-based GUI and you can have users go

860
00:40:57,109 --> 00:41:00,920
in there and request access specifically

861
00:40:59,029 --> 00:41:02,930
for them it'll automatically generate

862
00:41:00,920 --> 00:41:04,549
the tickets and the time generated

863
00:41:02,930 --> 00:41:07,879
tickets from them from the Kerberos as

864
00:41:04,549 --> 00:41:09,380
well as grant them access and it's a

865
00:41:07,880 --> 00:41:10,200
painless process otherwise you have to

866
00:41:09,380 --> 00:41:12,359
go in there

867
00:41:10,200 --> 00:41:15,750
PowerShell command and do it that way

868
00:41:12,359 --> 00:41:18,089
and as much as Microsoft is pushing for

869
00:41:15,750 --> 00:41:21,570
PowerShell on everybody there's still

870
00:41:18,089 --> 00:41:24,150
resistance to use that as a primary

871
00:41:21,570 --> 00:41:28,079
means of administrating your environment

872
00:41:24,150 --> 00:41:29,760
now some of you may be wondering and you

873
00:41:28,079 --> 00:41:32,460
know your intern or your inner paranoia

874
00:41:29,760 --> 00:41:33,780
kicks in and you're like wait you can

875
00:41:32,460 --> 00:41:38,250
just copy the SID

876
00:41:33,780 --> 00:41:42,000
from the production domain and grant

877
00:41:38,250 --> 00:41:43,710
almost anybody access into the privilege

878
00:41:42,000 --> 00:41:48,089
domain and then have them go back in and

879
00:41:43,710 --> 00:41:49,950
do stuff the difference in this

880
00:41:48,089 --> 00:41:51,869
situation is that because this only

881
00:41:49,950 --> 00:41:53,609
happens because of the of the trust

882
00:41:51,869 --> 00:41:56,520
that's established with the privilege

883
00:41:53,609 --> 00:41:57,660
forced and that's when Microsoft had

884
00:41:56,520 --> 00:41:59,640
changed their initial policy

885
00:41:57,660 --> 00:42:02,629
I believe in 2001 there was a Sid

886
00:41:59,640 --> 00:42:05,040
history injection airware issue where

887
00:42:02,630 --> 00:42:06,780
the domain was originally considered the

888
00:42:05,040 --> 00:42:08,839
security boundary but what users were

889
00:42:06,780 --> 00:42:12,119
doing was they were getting the SID from

890
00:42:08,839 --> 00:42:14,400
the domain admins group and injecting it

891
00:42:12,119 --> 00:42:15,930
into a regular user account so when they

892
00:42:14,400 --> 00:42:16,500
were accessing other domains in that

893
00:42:15,930 --> 00:42:19,618
forest

894
00:42:16,500 --> 00:42:22,260
they had domain level access to do

895
00:42:19,619 --> 00:42:23,490
anything that they wanted to but because

896
00:42:22,260 --> 00:42:26,579
of the fact that the security boundary

897
00:42:23,490 --> 00:42:28,109
here is a force that Pam trusts that

898
00:42:26,579 --> 00:42:33,480
happens when you enable the feature

899
00:42:28,109 --> 00:42:36,630
protects the the production domain from

900
00:42:33,480 --> 00:42:37,530
being maliciously hacked but as Roman

901
00:42:36,630 --> 00:42:40,940
was saying this morning

902
00:42:37,530 --> 00:42:43,560
security is a process and people kind of

903
00:42:40,940 --> 00:42:45,030
environment right you can have all these

904
00:42:43,560 --> 00:42:47,640
tools in place you can do all these

905
00:42:45,030 --> 00:42:50,130
things but if you don't if you aren't

906
00:42:47,640 --> 00:42:53,368
careful with who's got privileged access

907
00:42:50,130 --> 00:42:56,099
in your environment it can this will be

908
00:42:53,369 --> 00:42:58,050
as useless as anything else you do this

909
00:42:56,099 --> 00:42:59,849
is as good as making everybody an

910
00:42:58,050 --> 00:43:04,010
enterprise admin if you don't set the

911
00:42:59,849 --> 00:43:04,010
permissions right from the beginning

912
00:43:05,240 --> 00:43:10,250
does anybody have any questions

913
00:43:14,040 --> 00:43:28,880
I did and I bought that environment but

914
00:43:26,220 --> 00:43:31,830
what I can do is I can put a link up

915
00:43:28,880 --> 00:43:34,160
either on the b-side site or somewhere

916
00:43:31,830 --> 00:43:36,210
that's accessible or I can get your

917
00:43:34,160 --> 00:43:38,750
contact info after and send you a link

918
00:43:36,210 --> 00:43:41,660
to how we can set this up both using pin

919
00:43:38,750 --> 00:43:44,550
using mem Microsoft identity manager or

920
00:43:41,660 --> 00:43:45,839
we can or using just powershell

921
00:43:44,550 --> 00:43:49,320
commandlets to be able to set up the

922
00:43:45,840 --> 00:43:51,240
environment as well as how a user can go

923
00:43:49,320 --> 00:43:52,920
in and provision their access for

924
00:43:51,240 --> 00:43:55,100
whatever admin level tasks that they

925
00:43:52,920 --> 00:43:55,100
need

926
00:44:08,900 --> 00:44:13,460
so that can so it depends on how much

927
00:44:11,990 --> 00:44:15,740
you want to harden it right you can you

928
00:44:13,460 --> 00:44:18,380
can set different permissions such as

929
00:44:15,740 --> 00:44:20,959
who has logon rights to it you can set

930
00:44:18,380 --> 00:44:23,329
it you can set who has what network gets

931
00:44:20,960 --> 00:44:25,069
in and who can access that network so it

932
00:44:23,329 --> 00:44:29,359
all depends on again the systems

933
00:44:25,069 --> 00:44:30,680
administrator and how hard they want to

934
00:44:29,359 --> 00:44:34,279
make it for that environment to be

935
00:44:30,680 --> 00:44:36,799
accessible again it's a people thing

936
00:44:34,279 --> 00:44:39,140
where the admin takes on most of the

937
00:44:36,799 --> 00:44:41,240
responsibility of configuring it right

938
00:44:39,140 --> 00:44:43,038
the first time rather than waiting for

939
00:44:41,240 --> 00:44:44,660
breach and then realizing that these are

940
00:44:43,039 --> 00:44:47,210
some of the settings that you have to

941
00:44:44,660 --> 00:44:49,129
have in place one of the key things

942
00:44:47,210 --> 00:44:51,559
about setting up a Pam environment is

943
00:44:49,130 --> 00:44:53,720
you have to absolutely harden the host

944
00:44:51,559 --> 00:44:55,970
you have to specify what host can access

945
00:44:53,720 --> 00:44:59,359
that server you can also you also have

946
00:44:55,970 --> 00:45:01,759
to specify what users have to specify

947
00:44:59,359 --> 00:45:03,859
what users can access that environment

948
00:45:01,759 --> 00:45:07,609
you can set up authentication policy

949
00:45:03,859 --> 00:45:09,680
silos that's a different talk but there

950
00:45:07,609 --> 00:45:12,589
are ways that one of the key things

951
00:45:09,680 --> 00:45:14,210
about being able to have this be

952
00:45:12,589 --> 00:45:16,970
successfully running environment is you

953
00:45:14,210 --> 00:45:19,660
have to harden up different layers up to

954
00:45:16,970 --> 00:45:22,038
getting to the Pam server as well as

955
00:45:19,660 --> 00:45:25,808
requesting access to be able to make the

956
00:45:22,039 --> 00:45:25,809
admin level changes in the environment

957
00:45:31,509 --> 00:45:34,509
yeah

958
00:45:34,880 --> 00:45:42,020
yeah yeah and you are gonna have that in

959
00:45:40,250 --> 00:45:43,250
some of the environments right where you

960
00:45:42,020 --> 00:45:46,250
have to be you have to kind of skirt

961
00:45:43,250 --> 00:45:47,750
that line about maintaining the legacy

962
00:45:46,250 --> 00:45:51,170
applications that are moved over yet as

963
00:45:47,750 --> 00:45:55,070
well as who even needs to be able to

964
00:45:51,170 --> 00:45:56,270
request access so it it's always a fine

965
00:45:55,070 --> 00:45:59,320
line of how you want to set it up and

966
00:45:56,270 --> 00:45:59,320
who you want to restrict

967
00:46:24,109 --> 00:46:27,109
right

968
00:46:59,200 --> 00:47:04,549
so and that's keeping things you when

969
00:47:02,330 --> 00:47:06,740
you use him or even when you use the

970
00:47:04,550 --> 00:47:10,040
powershell commandlets you can specify

971
00:47:06,740 --> 00:47:12,470
what groups can access that so with so

972
00:47:10,040 --> 00:47:14,300
with with Microsoft identity manager

973
00:47:12,470 --> 00:47:17,149
they make it easy in the sense that

974
00:47:14,300 --> 00:47:20,540
there's a web URL that the user can

975
00:47:17,150 --> 00:47:22,520
connect to but that you don't need to be

976
00:47:20,540 --> 00:47:24,500
opera you don't need to access that from

977
00:47:22,520 --> 00:47:26,270
a specific host because you can set the

978
00:47:24,500 --> 00:47:29,360
permissions based off of the user group

979
00:47:26,270 --> 00:47:31,970
so you can specify what groups or what

980
00:47:29,360 --> 00:47:34,100
users can access that URL and you don't

981
00:47:31,970 --> 00:47:36,709
need Bob in the middle so that Alice can

982
00:47:34,100 --> 00:47:38,690
go ahead and grant access to the HR

983
00:47:36,710 --> 00:47:42,290
database she can do it on her own as

984
00:47:38,690 --> 00:47:45,080
long as the the Pam admin makes sure

985
00:47:42,290 --> 00:47:47,060
that she has access to be able to get to

986
00:47:45,080 --> 00:47:59,870
that URL or be able to run that

987
00:47:47,060 --> 00:48:02,029
PowerShell script yeah yep so you can

988
00:47:59,870 --> 00:48:05,359
set it to different time limits you can

989
00:48:02,030 --> 00:48:07,790
set it to expire every 90 days and it'll

990
00:48:05,360 --> 00:48:09,590
automatically check in with Active

991
00:48:07,790 --> 00:48:11,840
Directory and set a new password port

992
00:48:09,590 --> 00:48:14,570
for the next 90 days or you can set it

993
00:48:11,840 --> 00:48:16,280
if you don't set any values for when you

994
00:48:14,570 --> 00:48:21,100
want the password to expire it'll just

995
00:48:16,280 --> 00:48:21,100
be a default never expire account

996
00:48:27,380 --> 00:48:32,340
right but then you don't want that to be

997
00:48:30,090 --> 00:48:36,660
you ideally you want it to expire every

998
00:48:32,340 --> 00:48:38,100
90 days but you don't want to be when

999
00:48:36,660 --> 00:48:40,080
you said it to never expire right you

1000
00:48:38,100 --> 00:48:41,549
still had to keep a track of that you

1001
00:48:40,080 --> 00:48:46,020
still had to know and someone still had

1002
00:48:41,550 --> 00:48:48,600
access to the account password so with

1003
00:48:46,020 --> 00:48:50,250
managed service accounts nobody has

1004
00:48:48,600 --> 00:48:51,720
access to the actual password nobody

1005
00:48:50,250 --> 00:48:55,400
knows what the password is and that's

1006
00:48:51,720 --> 00:48:58,970
where the key to that piece comes in so

1007
00:48:55,400 --> 00:49:01,500
yeah you can set it to never expire but

1008
00:48:58,970 --> 00:49:03,060
even when you do that no one will

1009
00:49:01,500 --> 00:49:05,700
actually have access no-one will

1010
00:49:03,060 --> 00:49:08,460
actually know what the password is that

1011
00:49:05,700 --> 00:49:12,410
was originally set for it or and it will

1012
00:49:08,460 --> 00:49:14,820
never break like if it ever does break

1013
00:49:12,410 --> 00:49:16,920
Active Directory will be responsible for

1014
00:49:14,820 --> 00:49:19,740
resetting that password if you wanted to

1015
00:49:16,920 --> 00:49:21,290
there are certain benchmarks I believe

1016
00:49:19,740 --> 00:49:23,819
that have their requirement where

1017
00:49:21,290 --> 00:49:25,440
passwords should expire every 90 days or

1018
00:49:23,820 --> 00:49:27,960
30 days or whatever it is so that's

1019
00:49:25,440 --> 00:49:31,230
where you would typically set the 90 day

1020
00:49:27,960 --> 00:49:33,780
validity of that password otherwise yeah

1021
00:49:31,230 --> 00:49:35,280
just leaving it alone having a managed

1022
00:49:33,780 --> 00:49:37,460
by Active Directory is the best way to

1023
00:49:35,280 --> 00:49:37,460
go

1024
00:50:21,120 --> 00:50:24,750
so the biggest advantage is time right

1025
00:50:23,040 --> 00:50:28,500
like you can set different time limits

1026
00:50:24,750 --> 00:50:30,390
for based on how long the how long you

1027
00:50:28,500 --> 00:50:32,760
think the user should take in order to

1028
00:50:30,390 --> 00:50:36,000
be able to make these changes and that's

1029
00:50:32,760 --> 00:50:40,590
one of the key things that Pam is trying

1030
00:50:36,000 --> 00:50:42,090
to promote they they want to make sure

1031
00:50:40,590 --> 00:50:44,280
that everything is time-based they don't

1032
00:50:42,090 --> 00:50:47,670
want these permanent memberships or

1033
00:50:44,280 --> 00:50:51,900
having the user interaction in order to

1034
00:50:47,670 --> 00:50:53,990
be able to add account or remove it with

1035
00:50:51,900 --> 00:50:58,770
Pam and especially in conjunction with

1036
00:50:53,990 --> 00:51:01,410
Microsoft Identity Manager it will you

1037
00:50:58,770 --> 00:51:03,360
as the admin have the ability to set how

1038
00:51:01,410 --> 00:51:06,450
long users should be able to have access

1039
00:51:03,360 --> 00:51:09,150
and once that expiration limit kicks in

1040
00:51:06,450 --> 00:51:11,730
that's what you really that's really the

1041
00:51:09,150 --> 00:51:17,450
goal that they're driving for with this

1042
00:51:11,730 --> 00:51:17,450
kind of setup yeah

1043
00:51:24,050 --> 00:51:28,220
yeah there there are features in the

1044
00:51:26,630 --> 00:51:30,080
Microsoft identity manager where you can

1045
00:51:28,220 --> 00:51:33,410
set what the replication policy is you

1046
00:51:30,080 --> 00:51:38,240
can also set backups and as well as

1047
00:51:33,410 --> 00:51:40,460
recovery options so that if the

1048
00:51:38,240 --> 00:51:42,979
privilege domain goes down you know you

1049
00:51:40,460 --> 00:51:45,800
have some mechanism of recovery as well

1050
00:51:42,980 --> 00:51:49,130
as you know if if it completely goes

1051
00:51:45,800 --> 00:51:52,150
down you do have the ability of going

1052
00:51:49,130 --> 00:51:54,410
back to the method of making like a

1053
00:51:52,150 --> 00:51:56,090
local like a domain admin on the

1054
00:51:54,410 --> 00:51:58,910
production domain for a short amount of

1055
00:51:56,090 --> 00:52:00,320
time if you have to restore that

1056
00:51:58,910 --> 00:52:02,470
connection again if it's completely

1057
00:52:00,320 --> 00:52:04,730
borked and there's no way around

1058
00:52:02,470 --> 00:52:06,740
recovering it or restoring it because of

1059
00:52:04,730 --> 00:52:08,090
the fact that you'd you know you've got

1060
00:52:06,740 --> 00:52:10,640
the different membership groups and

1061
00:52:08,090 --> 00:52:13,010
everything else so yeah there is there

1062
00:52:10,640 --> 00:52:14,690
are built-in features with the Microsoft

1063
00:52:13,010 --> 00:52:17,990
identity manager that you don't

1064
00:52:14,690 --> 00:52:21,860
necessarily get with powershell

1065
00:52:17,990 --> 00:52:28,250
commandlets unless you specify very very

1066
00:52:21,860 --> 00:52:29,960
explicitly awesome well thank you

1067
00:52:28,250 --> 00:52:30,910
everyone and I appreciate all the

1068
00:52:29,960 --> 00:52:34,250
questions

1069
00:52:30,910 --> 00:52:34,250
[Applause]

