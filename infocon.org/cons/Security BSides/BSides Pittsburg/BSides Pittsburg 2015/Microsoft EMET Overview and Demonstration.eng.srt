1
00:00:02,800 --> 00:00:04,160
okay so my name is kevin

2
00:00:04,160 --> 00:00:06,000
and we're here to talk about uh

3
00:00:06,000 --> 00:00:07,919
microsoft independent

4
00:00:07,919 --> 00:00:10,719
um is anyone out there running emmett in

5
00:00:10,719 --> 00:00:12,400
their environment

6
00:00:12,400 --> 00:00:16,560
right i'm done here

7
00:00:16,560 --> 00:00:18,560
okay good so for those of you who are

8
00:00:18,560 --> 00:00:20,240
running it you know the goodness

9
00:00:20,240 --> 00:00:22,560
for those of you uh who aren't i'm going

10
00:00:22,560 --> 00:00:23,519
to tell you the goodness

11
00:00:23,519 --> 00:00:27,119
and hopefully this can help you out

12
00:00:27,519 --> 00:00:30,400
so we'll go through who i am the problem

13
00:00:30,400 --> 00:00:31,439
the solution

14
00:00:31,439 --> 00:00:33,600
a solution anyway um some features and

15
00:00:33,600 --> 00:00:35,600
mitigations inside of hemet

16
00:00:35,600 --> 00:00:37,920
maybe some downsides to run into it i've

17
00:00:37,920 --> 00:00:38,879
run into with it

18
00:00:38,879 --> 00:00:41,600
uh deployment targets a little demo if

19
00:00:41,600 --> 00:00:42,640
we have time

20
00:00:42,640 --> 00:00:44,160
i'm actually going to show you how what

21
00:00:44,160 --> 00:00:45,840
the thing looks like and how it works

22
00:00:45,840 --> 00:00:49,600
and then we'll do a summary and some q a

23
00:00:49,920 --> 00:00:52,239
so uh my name is kevin ginousso i'm the

24
00:00:52,239 --> 00:00:53,600
senior security architect

25
00:00:53,600 --> 00:00:56,320
at dick's sporting goods um i'm in

26
00:00:56,320 --> 00:00:58,079
advanced persistent pittsburgher been

27
00:00:58,079 --> 00:00:59,359
here my whole life

28
00:00:59,359 --> 00:01:02,000
um i landed my first i.t security job in

29
00:01:02,000 --> 00:01:04,720
1998 after a post-interview pen test

30
00:01:04,720 --> 00:01:06,479
and uh it sounds cooler than it really

31
00:01:06,479 --> 00:01:08,080
is remember back in the 90s you could

32
00:01:08,080 --> 00:01:09,680
sneeze on something and knock it over

33
00:01:09,680 --> 00:01:10,159
and

34
00:01:10,159 --> 00:01:12,159
get root so what happened was i had an

35
00:01:12,159 --> 00:01:14,000
interview i really really wanted this

36
00:01:14,000 --> 00:01:14,799
job

37
00:01:14,799 --> 00:01:16,320
and uh i asked the guy at the end of the

38
00:01:16,320 --> 00:01:17,920
interview hey do you mind if i

39
00:01:17,920 --> 00:01:19,600
just take a look at your network uh

40
00:01:19,600 --> 00:01:21,280
whenever i get home tonight he was like

41
00:01:21,280 --> 00:01:23,119
oh yeah sure that'd be great i was like

42
00:01:23,119 --> 00:01:24,799
okay could you sign this thing that says

43
00:01:24,799 --> 00:01:26,159
i'm allowed to do that

44
00:01:26,159 --> 00:01:27,840
he signed it he was cool with it you

45
00:01:27,840 --> 00:01:29,680
know the next day he came

46
00:01:29,680 --> 00:01:31,360
in opened up his computer and there was

47
00:01:31,360 --> 00:01:33,360
a little uh txt file sitting on his

48
00:01:33,360 --> 00:01:34,479
desktop that said

49
00:01:34,479 --> 00:01:37,200
hey brad open me and he opened it up and

50
00:01:37,200 --> 00:01:37,600
i said

51
00:01:37,600 --> 00:01:39,439
dude you got some firewall problems this

52
00:01:39,439 --> 00:01:40,880
is windows 98

53
00:01:40,880 --> 00:01:43,439
very simple to break into windows 98

54
00:01:43,439 --> 00:01:45,040
when it's not behind a firewall

55
00:01:45,040 --> 00:01:48,079
and uh he called me that day uh and i

56
00:01:48,079 --> 00:01:48,799
got the job

57
00:01:48,799 --> 00:01:51,600
the following so and uh three times

58
00:01:51,600 --> 00:01:53,280
besides pittsburgh speaker thank you so

59
00:01:53,280 --> 00:01:54,799
much for having me back again guys

60
00:01:54,799 --> 00:01:56,640
and you know give these guys a hand for

61
00:01:56,640 --> 00:01:58,159
what they do to put this thing on it's a

62
00:01:58,159 --> 00:01:59,119
lot of work

63
00:01:59,119 --> 00:02:02,320
and uh really good stuff

64
00:02:03,680 --> 00:02:05,759
all right let's get into it so the

65
00:02:05,759 --> 00:02:06,719
problem well

66
00:02:06,719 --> 00:02:08,160
one one of the big problems is that

67
00:02:08,160 --> 00:02:09,919
patching is hard okay

68
00:02:09,919 --> 00:02:12,560
uh the need to test patches slows the

69
00:02:12,560 --> 00:02:13,680
defenders down

70
00:02:13,680 --> 00:02:15,200
and then you got the non-microsoft

71
00:02:15,200 --> 00:02:17,040
vendors that don't make it easy to patch

72
00:02:17,040 --> 00:02:19,840
uh things like flash and java et cetera

73
00:02:19,840 --> 00:02:21,120
and then you got applications that

74
00:02:21,120 --> 00:02:22,080
depend on legacy

75
00:02:22,080 --> 00:02:24,319
code and java is notorious for that

76
00:02:24,319 --> 00:02:25,599
right everybody's got the

77
00:02:25,599 --> 00:02:27,520
does anybody have an application in

78
00:02:27,520 --> 00:02:29,360
their environment that requires java

79
00:02:29,360 --> 00:02:32,160
like old ancient versions of java from

80
00:02:32,160 --> 00:02:32,480
like

81
00:02:32,480 --> 00:02:35,360
yeah the 90s exactly so that's a big

82
00:02:35,360 --> 00:02:36,000
problem you can't

83
00:02:36,000 --> 00:02:37,840
just tell the business no you can't run

84
00:02:37,840 --> 00:02:39,040
that anymore because the

85
00:02:39,040 --> 00:02:41,120
the underlying engine that makes it go

86
00:02:41,120 --> 00:02:42,160
stinks you know

87
00:02:42,160 --> 00:02:44,720
so you have to accommodate for them um

88
00:02:44,720 --> 00:02:45,280
but

89
00:02:45,280 --> 00:02:47,040
you got to wonder why they're still

90
00:02:47,040 --> 00:02:48,800
doing this too microsoft is actually

91
00:02:48,800 --> 00:02:51,519
flagging the ask toolbar as malware now

92
00:02:51,519 --> 00:02:54,160
so oracle is installing malware on your

93
00:02:54,160 --> 00:02:55,840
machine when you go to install java just

94
00:02:55,840 --> 00:02:58,560
so everybody knows

95
00:02:58,959 --> 00:03:00,400
the other problem is the attackers are

96
00:03:00,400 --> 00:03:03,120
fast right when it comes down to it

97
00:03:03,120 --> 00:03:05,120
they can crank out uh exploit code

98
00:03:05,120 --> 00:03:06,800
faster than you can patch for it

99
00:03:06,800 --> 00:03:10,239
uh a public ms-14064 exploit came out

100
00:03:10,239 --> 00:03:11,760
two days after the patch

101
00:03:11,760 --> 00:03:13,760
okay but it was already being exploited

102
00:03:13,760 --> 00:03:15,680
in the wild it just made it

103
00:03:15,680 --> 00:03:18,239
easy for everybody to run that exploit

104
00:03:18,239 --> 00:03:20,000
uh and then somebody mentioned exploit

105
00:03:20,000 --> 00:03:21,280
kits earlier today

106
00:03:21,280 --> 00:03:22,959
exploit kits are you know you can buy

107
00:03:22,959 --> 00:03:24,400
them on the dark web you know go

108
00:03:24,400 --> 00:03:25,760
go get yourself some magic internet

109
00:03:25,760 --> 00:03:27,519
money also known as bitcoin

110
00:03:27,519 --> 00:03:30,080
and you can go on the dark web and buy

111
00:03:30,080 --> 00:03:31,840
yourself an exploit kit and oh look at

112
00:03:31,840 --> 00:03:33,920
you now you're a hacker yay

113
00:03:33,920 --> 00:03:36,080
so we have to defend against this crap

114
00:03:36,080 --> 00:03:37,200
um

115
00:03:37,200 --> 00:03:39,680
and kaspersky and cisco uh both agree

116
00:03:39,680 --> 00:03:40,879
that 95

117
00:03:40,879 --> 00:03:43,440
of all attacks target java adobe

118
00:03:43,440 --> 00:03:44,159
products

119
00:03:44,159 --> 00:03:46,239
internet explorer or microsoft office

120
00:03:46,239 --> 00:03:47,280
that's 95

121
00:03:47,280 --> 00:03:49,519
of the attacks and actually 91 of those

122
00:03:49,519 --> 00:03:50,720
are java

123
00:03:50,720 --> 00:03:53,840
so obviously we have a problem

124
00:03:53,840 --> 00:03:56,319
so emmett is a potential solution for

125
00:03:56,319 --> 00:03:56,959
that

126
00:03:56,959 --> 00:03:59,200
uh it stands for the enhanced mitigation

127
00:03:59,200 --> 00:04:00,480
experience toolkit

128
00:04:00,480 --> 00:04:02,720
it's a microsoft product since 2009.

129
00:04:02,720 --> 00:04:04,480
this thing's been around for a while

130
00:04:04,480 --> 00:04:07,280
um it's freezing beer freeze and b-sides

131
00:04:07,280 --> 00:04:08,159
uh

132
00:04:08,159 --> 00:04:10,159
provides advanced protection against

133
00:04:10,159 --> 00:04:11,760
known and unknown threats and it's the

134
00:04:11,760 --> 00:04:12,799
unknown threats

135
00:04:12,799 --> 00:04:14,239
that's interesting right we don't need a

136
00:04:14,239 --> 00:04:15,840
signature to protect something

137
00:04:15,840 --> 00:04:18,160
with emmett um and there was only one

138
00:04:18,160 --> 00:04:19,040
cash prize

139
00:04:19,040 --> 00:04:21,680
for it was 150 grand that went unclaimed

140
00:04:21,680 --> 00:04:22,880
at pawn to own uh

141
00:04:22,880 --> 00:04:25,680
2014 and it was internet explorer 11

142
00:04:25,680 --> 00:04:27,040
secured with emmett

143
00:04:27,040 --> 00:04:28,639
that's 150 grand there's a lot of

144
00:04:28,639 --> 00:04:29,759
hackers want that money and they

145
00:04:29,759 --> 00:04:31,680
couldn't get it because of emmett

146
00:04:31,680 --> 00:04:34,080
uh and also dave kennedy uh approves

147
00:04:34,080 --> 00:04:35,759
this you'll hear him talk about emmett

148
00:04:35,759 --> 00:04:37,199
at any of his talks if you don't know

149
00:04:37,199 --> 00:04:39,040
who dave kennedy is very well respected

150
00:04:39,040 --> 00:04:40,400
pen tester in the industry one of the

151
00:04:40,400 --> 00:04:41,199
best

152
00:04:41,199 --> 00:04:43,600
and uh he approves it and see he's

153
00:04:43,600 --> 00:04:44,639
giving a thumbs up

154
00:04:44,639 --> 00:04:48,320
he approves it uh so some emmett

155
00:04:48,320 --> 00:04:49,759
features let's talk about that a little

156
00:04:49,759 --> 00:04:50,080
bit

157
00:04:50,080 --> 00:04:52,880
it's user defined on a per application

158
00:04:52,880 --> 00:04:53,520
basis

159
00:04:53,520 --> 00:04:55,440
so you choose what you want to protect

160
00:04:55,440 --> 00:04:57,040
and and you pick it on on a per

161
00:04:57,040 --> 00:04:59,440
per application basis out of the box

162
00:04:59,440 --> 00:05:01,120
it's going to do all of those commonly

163
00:05:01,120 --> 00:05:01,600
attack

164
00:05:01,600 --> 00:05:03,199
uh pieces of software that we talked

165
00:05:03,199 --> 00:05:05,919
about um it's your internet explorer

166
00:05:05,919 --> 00:05:10,080
microsoft office jre not the ask toolbar

167
00:05:10,080 --> 00:05:13,599
and adobe acrobat and reader

168
00:05:13,680 --> 00:05:17,120
it's regularly updated um emmett 5.1

169
00:05:17,120 --> 00:05:19,600
came out in november of last year 5.2 is

170
00:05:19,600 --> 00:05:21,120
the latest version came out in march of

171
00:05:21,120 --> 00:05:23,120
this year so microsoft is actively

172
00:05:23,120 --> 00:05:25,440
working on this and improving it

173
00:05:25,440 --> 00:05:29,280
um all versions of windows are supported

174
00:05:29,280 --> 00:05:32,160
uh up to the 5.x version even xp was

175
00:05:32,160 --> 00:05:33,039
supported

176
00:05:33,039 --> 00:05:35,440
and uh the mitigations are limited on

177
00:05:35,440 --> 00:05:36,639
server 2003

178
00:05:36,639 --> 00:05:38,240
but you're getting rid of that anyway

179
00:05:38,240 --> 00:05:39,840
right yeah

180
00:05:39,840 --> 00:05:41,360
of course you are of course you're

181
00:05:41,360 --> 00:05:42,880
nobody's gonna have that laying around

182
00:05:42,880 --> 00:05:45,440
and uh it's not signature based uh which

183
00:05:45,440 --> 00:05:47,199
is fantastic

184
00:05:47,199 --> 00:05:48,479
i don't know if my little video is gonna

185
00:05:48,479 --> 00:05:50,400
work but uh

186
00:05:50,400 --> 00:05:54,479
golf club golf club

187
00:05:54,479 --> 00:05:58,160
right yeah so no signatures are a good

188
00:05:58,160 --> 00:05:58,560
thing

189
00:05:58,560 --> 00:06:01,280
um so now we're gonna get into each of

190
00:06:01,280 --> 00:06:02,800
the specific mitigations

191
00:06:02,800 --> 00:06:05,919
uh that emmett brings to the table

192
00:06:05,919 --> 00:06:07,600
s-e-hop or

193
00:06:07,600 --> 00:06:10,080
structured exception handler overwrite

194
00:06:10,080 --> 00:06:11,759
production this is buffer overflow

195
00:06:11,759 --> 00:06:14,960
heat protection um so this is watching

196
00:06:14,960 --> 00:06:16,639
buffers and making sure that things

197
00:06:16,639 --> 00:06:17,120
aren't

198
00:06:17,120 --> 00:06:18,880
jumping uh overflowing a buffer and then

199
00:06:18,880 --> 00:06:20,479
executing code

200
00:06:20,479 --> 00:06:22,720
uh dep i've heard this mentioned a few

201
00:06:22,720 --> 00:06:25,120
times today data execution prevention

202
00:06:25,120 --> 00:06:27,680
so it used to be that applications could

203
00:06:27,680 --> 00:06:29,840
build in support for dep

204
00:06:29,840 --> 00:06:32,639
um now with emmett emmett enforces dep

205
00:06:32,639 --> 00:06:34,160
on any application application doesn't

206
00:06:34,160 --> 00:06:35,600
have to be compiled for it

207
00:06:35,600 --> 00:06:37,840
um so that's good it's application

208
00:06:37,840 --> 00:06:38,800
agnostic

209
00:06:38,800 --> 00:06:42,479
uh it marks the stack uh and the heap as

210
00:06:42,479 --> 00:06:44,160
non-executable so you're not gonna

211
00:06:44,160 --> 00:06:46,080
be able to run shell code out of the

212
00:06:46,080 --> 00:06:47,919
stack and the attacks are actually

213
00:06:47,919 --> 00:06:49,520
blocked at the cpu level

214
00:06:49,520 --> 00:06:52,639
um so very very uh early on these

215
00:06:52,639 --> 00:06:54,639
attacks get blocked

216
00:06:54,639 --> 00:06:56,479
heap spray allocation so this is

217
00:06:56,479 --> 00:06:58,479
essentially preventing an attacker

218
00:06:58,479 --> 00:07:00,720
from taking their shell code and

219
00:07:00,720 --> 00:07:02,080
spraying it to multiple

220
00:07:02,080 --> 00:07:03,840
locations in memory and that's a common

221
00:07:03,840 --> 00:07:05,680
technique because the attacker doesn't

222
00:07:05,680 --> 00:07:06,880
necessarily know

223
00:07:06,880 --> 00:07:08,800
where their pointers gonna end up so

224
00:07:08,800 --> 00:07:10,479
they try to put in many as many places

225
00:07:10,479 --> 00:07:11,919
in memory as possible

226
00:07:11,919 --> 00:07:14,720
and uh this particular mitigation uh

227
00:07:14,720 --> 00:07:18,080
prevents them from being able to do that

228
00:07:18,560 --> 00:07:22,000
mandatory aslr aslr is address space

229
00:07:22,000 --> 00:07:24,400
space location randomization so again

230
00:07:24,400 --> 00:07:25,039
you ran

231
00:07:25,039 --> 00:07:26,639
randomizing the address space that's

232
00:07:26,639 --> 00:07:28,560
allocated to a process

233
00:07:28,560 --> 00:07:30,000
and it makes memory locations less

234
00:07:30,000 --> 00:07:32,400
predictable if memory locations are

235
00:07:32,400 --> 00:07:33,919
less predictable i'm gonna have a harder

236
00:07:33,919 --> 00:07:35,919
time getting my exploit exploit code to

237
00:07:35,919 --> 00:07:38,159
run

238
00:07:38,960 --> 00:07:43,360
sorry about time uh eaf and eaf plus

239
00:07:43,360 --> 00:07:44,800
they list these as two separate things

240
00:07:44,800 --> 00:07:46,319
but they're really all part of the same

241
00:07:46,319 --> 00:07:46,720
uh

242
00:07:46,720 --> 00:07:49,759
family of uh of mitigations this is

243
00:07:49,759 --> 00:07:50,960
export address table

244
00:07:50,960 --> 00:07:52,800
access so what what this prevents is the

245
00:07:52,800 --> 00:07:54,000
attacker from using

246
00:07:54,000 --> 00:07:56,639
internal window system calls to actually

247
00:07:56,639 --> 00:07:59,599
execute an attack um so system apis

248
00:07:59,599 --> 00:08:01,520
become unavailable to the attacker which

249
00:08:01,520 --> 00:08:03,440
is helpful for a defender because

250
00:08:03,440 --> 00:08:04,960
now you're not giving the attacker the

251
00:08:04,960 --> 00:08:08,400
tools they need to get their job done

252
00:08:08,639 --> 00:08:10,560
bottom-up randomization is very similar

253
00:08:10,560 --> 00:08:12,319
to aslr just goes the other direction

254
00:08:12,319 --> 00:08:14,080
from the bottom of the stack up

255
00:08:14,080 --> 00:08:15,759
for whatever processes are spinning up

256
00:08:15,759 --> 00:08:18,080
that way

257
00:08:18,080 --> 00:08:20,479
rot mitigations rob is uh return

258
00:08:20,479 --> 00:08:21,919
oriented programming

259
00:08:21,919 --> 00:08:24,560
um so again where you're looking for a

260
00:08:24,560 --> 00:08:26,400
pointer to return to a certain spot

261
00:08:26,400 --> 00:08:29,280
and execute code uh it does there's a

262
00:08:29,280 --> 00:08:31,280
number of mitigations here but uh

263
00:08:31,280 --> 00:08:33,679
the idea is uh we're preventing code

264
00:08:33,679 --> 00:08:35,839
from being executed from the stack

265
00:08:35,839 --> 00:08:37,760
and some of the rot mitigations are 30

266
00:08:37,760 --> 00:08:39,120
32-bit only so

267
00:08:39,120 --> 00:08:40,880
if you on the modern age of 64-bit

268
00:08:40,880 --> 00:08:43,120
systems some of them aren't actually

269
00:08:43,120 --> 00:08:43,440
there

270
00:08:43,440 --> 00:08:45,360
not yet anyway microsoft is definitely

271
00:08:45,360 --> 00:08:48,080
working on that

272
00:08:48,160 --> 00:08:51,040
asr attack surface reduction so this is

273
00:08:51,040 --> 00:08:52,000
a

274
00:08:52,000 --> 00:08:54,399
a very slick uh thing this solves the

275
00:08:54,399 --> 00:08:55,440
java problem

276
00:08:55,440 --> 00:08:57,839
okay so what this lets you say is well

277
00:08:57,839 --> 00:09:00,000
only stuff in my trusted sites

278
00:09:00,000 --> 00:09:02,240
can run java or only stuff on the

279
00:09:02,240 --> 00:09:03,279
internal network

280
00:09:03,279 --> 00:09:05,360
can run java on the outside world you

281
00:09:05,360 --> 00:09:06,880
don't run java ever

282
00:09:06,880 --> 00:09:08,320
but if you put something in trusted

283
00:09:08,320 --> 00:09:09,600
sites that's on the outside world now

284
00:09:09,600 --> 00:09:10,720
can run java

285
00:09:10,720 --> 00:09:12,959
so that's your fix for having old crappy

286
00:09:12,959 --> 00:09:14,480
versions of java laying around

287
00:09:14,480 --> 00:09:16,880
that you only you need for specific

288
00:09:16,880 --> 00:09:18,240
internal applications which you don't

289
00:09:18,240 --> 00:09:20,080
need for anything else

290
00:09:20,080 --> 00:09:22,800
um you can also do things like microsoft

291
00:09:22,800 --> 00:09:25,760
word can't call adobe flash why would it

292
00:09:25,760 --> 00:09:27,760
you don't need that right uh and they

293
00:09:27,760 --> 00:09:29,600
just added support for visual basic

294
00:09:29,600 --> 00:09:31,200
uh so you could say uh things like

295
00:09:31,200 --> 00:09:34,240
visual basic scripts only run internally

296
00:09:34,240 --> 00:09:37,440
very very helpful feature right there uh

297
00:09:37,440 --> 00:09:39,920
control flow guard is a brand new thing

298
00:09:39,920 --> 00:09:41,839
uh it's in emit 5.2

299
00:09:41,839 --> 00:09:43,680
and it's a new feature in visual basic

300
00:09:43,680 --> 00:09:44,880
studio 2015

301
00:09:44,880 --> 00:09:47,600
uh that helps prevent code hijacking the

302
00:09:47,600 --> 00:09:49,519
application must be compiled to support

303
00:09:49,519 --> 00:09:51,120
it and it's only supported on

304
00:09:51,120 --> 00:09:54,959
windows 8.1 or higher

305
00:09:55,279 --> 00:09:57,120
and certificate pinning is one of the

306
00:09:57,120 --> 00:09:58,800
last ones so this is uh

307
00:09:58,800 --> 00:10:00,240
uh the type of thing where you could

308
00:10:00,240 --> 00:10:02,480
actually give your emmet clients

309
00:10:02,480 --> 00:10:05,279
certificates for essential systems so uh

310
00:10:05,279 --> 00:10:06,160
the vpn

311
00:10:06,160 --> 00:10:08,320
for example you actually give it the

312
00:10:08,320 --> 00:10:09,440
certificate and say this is the

313
00:10:09,440 --> 00:10:10,880
certificate that you should see when you

314
00:10:10,880 --> 00:10:12,079
connected a vpn

315
00:10:12,079 --> 00:10:14,399
if you don't see that don't even bother

316
00:10:14,399 --> 00:10:15,120
connecting

317
00:10:15,120 --> 00:10:16,720
and so that helps with man in the middle

318
00:10:16,720 --> 00:10:20,160
attacks and and that sort of stuff

319
00:10:20,160 --> 00:10:22,480
that's emit mitigations that's a lot of

320
00:10:22,480 --> 00:10:23,760
technical terms in a short amount of

321
00:10:23,760 --> 00:10:26,880
time anybody have questions

322
00:10:27,200 --> 00:10:31,600
okay so some downsides it's not a

323
00:10:31,600 --> 00:10:32,480
panacea

324
00:10:32,480 --> 00:10:36,000
uh it's been bypassed uh 5.0 versions

325
00:10:36,000 --> 00:10:37,839
have all been bypassed the 4.x version

326
00:10:37,839 --> 00:10:38,320
has been

327
00:10:38,320 --> 00:10:41,040
been uh bypassed and it doesn't protect

328
00:10:41,040 --> 00:10:42,480
everything by default

329
00:10:42,480 --> 00:10:44,480
you actually have to configure it for

330
00:10:44,480 --> 00:10:46,800
the things that you want to protect so

331
00:10:46,800 --> 00:10:48,240
you know it's not a perfect solution

332
00:10:48,240 --> 00:10:50,560
it's a solution to the problem

333
00:10:50,560 --> 00:10:52,560
uh it requires some heavy pre-deployment

334
00:10:52,560 --> 00:10:54,320
testing um some of the things that

335
00:10:54,320 --> 00:10:55,920
you'll see at break are like uh the

336
00:10:55,920 --> 00:10:57,760
adobe reader plug-in certain versions of

337
00:10:57,760 --> 00:10:59,680
adobe reader

338
00:10:59,680 --> 00:11:02,720
that can break uh java applications not

339
00:11:02,720 --> 00:11:03,279
so much

340
00:11:03,279 --> 00:11:07,440
but uh the adobe flash occasionally

341
00:11:07,440 --> 00:11:08,959
good with java it's good with uh

342
00:11:08,959 --> 00:11:11,120
microsoft word and internet explorer and

343
00:11:11,120 --> 00:11:12,160
that kind of stuff

344
00:11:12,160 --> 00:11:13,920
so you know you just have to do a lot of

345
00:11:13,920 --> 00:11:15,519
testing before you just go rolling this

346
00:11:15,519 --> 00:11:16,959
out to the world

347
00:11:16,959 --> 00:11:20,079
um it has some limited gpo settings uh

348
00:11:20,079 --> 00:11:22,480
this is better controlled uh by putting

349
00:11:22,480 --> 00:11:24,160
the configuration file out on a file

350
00:11:24,160 --> 00:11:24,959
share

351
00:11:24,959 --> 00:11:26,480
and then having you know whenever your

352
00:11:26,480 --> 00:11:28,160
machine logs into the network

353
00:11:28,160 --> 00:11:29,760
the first thing it does is go check that

354
00:11:29,760 --> 00:11:31,760
file share see if there's a new xml file

355
00:11:31,760 --> 00:11:33,120
sitting out there if there is pull it

356
00:11:33,120 --> 00:11:33,760
down if

357
00:11:33,760 --> 00:11:36,240
if not just let it go um it's a little

358
00:11:36,240 --> 00:11:38,079
bit kludgy from that point of view

359
00:11:38,079 --> 00:11:40,160
uh but i imagine that microsoft is

360
00:11:40,160 --> 00:11:42,000
working on on the group policy side

361
00:11:42,000 --> 00:11:44,240
uh to try to have this be more centrally

362
00:11:44,240 --> 00:11:45,440
pushed

363
00:11:45,440 --> 00:11:47,600
um and then the other bummer is there's

364
00:11:47,600 --> 00:11:48,720
no central reporting

365
00:11:48,720 --> 00:11:50,800
uh so you either have the option to

366
00:11:50,800 --> 00:11:52,800
write to the uh event log

367
00:11:52,800 --> 00:11:55,600
or display to the user hey you almost

368
00:11:55,600 --> 00:11:57,120
got popped

369
00:11:57,120 --> 00:11:59,200
and that's not super helpful you'd like

370
00:11:59,200 --> 00:12:00,560
to have that end up in a central

371
00:12:00,560 --> 00:12:03,200
repository somewhere

372
00:12:03,200 --> 00:12:04,639
if you had some something running on the

373
00:12:04,639 --> 00:12:06,160
endpoint that's doing log collection and

374
00:12:06,160 --> 00:12:06,720
forwarding

375
00:12:06,720 --> 00:12:08,880
it does go to the event log you can look

376
00:12:08,880 --> 00:12:10,000
for that specific event

377
00:12:10,000 --> 00:12:13,680
log and then collect it that way

378
00:12:15,519 --> 00:12:18,160
some deployment targets obviously your

379
00:12:18,160 --> 00:12:19,600
end user workstations

380
00:12:19,600 --> 00:12:21,440
but then think about things like citrix

381
00:12:21,440 --> 00:12:23,519
servers which are essentially

382
00:12:23,519 --> 00:12:26,320
end user workstations um point of sale

383
00:12:26,320 --> 00:12:26,880
systems

384
00:12:26,880 --> 00:12:29,440
atms uh any server that acts as like a

385
00:12:29,440 --> 00:12:31,680
jump server or a bastion host something

386
00:12:31,680 --> 00:12:32,399
that people

387
00:12:32,399 --> 00:12:33,920
may occasionally fire up internet

388
00:12:33,920 --> 00:12:35,519
explorer on

389
00:12:35,519 --> 00:12:37,920
even though it's a server they'll do it

390
00:12:37,920 --> 00:12:38,800
if they can

391
00:12:38,800 --> 00:12:41,440
um other high value servers but not

392
00:12:41,440 --> 00:12:43,200
domain controllers microsoft highly

393
00:12:43,200 --> 00:12:44,880
recommends against deploying emmet

394
00:12:44,880 --> 00:12:46,639
on domain controllers just because

395
00:12:46,639 --> 00:12:48,000
there's a lot of things going on in

396
00:12:48,000 --> 00:12:48,639
there

397
00:12:48,639 --> 00:12:49,920
and you shouldn't be surfing the

398
00:12:49,920 --> 00:12:51,920
internet from a domain controller anyway

399
00:12:51,920 --> 00:12:53,519
right

400
00:12:53,519 --> 00:12:56,800
let's hope anyway okay

401
00:12:56,800 --> 00:12:58,639
i think there's gonna be some time for a

402
00:12:58,639 --> 00:13:01,440
demo so let's do it uh the setup is uh

403
00:13:01,440 --> 00:13:02,000
two

404
00:13:02,000 --> 00:13:05,120
virtual machines one jerk figure out who

405
00:13:05,120 --> 00:13:06,079
the jerk is

406
00:13:06,079 --> 00:13:09,360
uh the first vm will be the ibub

407
00:13:09,360 --> 00:13:11,440
it's the intentionally broken and

408
00:13:11,440 --> 00:13:12,480
unpatched box

409
00:13:12,480 --> 00:13:15,760
okay it's a windows 7 uh uh 64-bit

410
00:13:15,760 --> 00:13:16,240
machine

411
00:13:16,240 --> 00:13:19,839
missing uh ms-14064 and a whole pile of

412
00:13:19,839 --> 00:13:21,120
other patches but that's the one that

413
00:13:21,120 --> 00:13:22,079
we're actually gonna be

414
00:13:22,079 --> 00:13:24,880
testing uh has an ancient uh version of

415
00:13:24,880 --> 00:13:26,240
java on there

416
00:13:26,240 --> 00:13:29,920
uh circa 2011 prehistoric adobe reader

417
00:13:29,920 --> 00:13:33,680
uh 8.1 from many many moons ago

418
00:13:33,680 --> 00:13:35,360
the user's running his local admin and

419
00:13:35,360 --> 00:13:36,720
we've disabled antivirus

420
00:13:36,720 --> 00:13:38,639
this is your nightmare box right you

421
00:13:38,639 --> 00:13:40,079
don't ever want to see this thing on

422
00:13:40,079 --> 00:13:40,800
your network

423
00:13:40,800 --> 00:13:42,959
you don't want to be anywhere near it um

424
00:13:42,959 --> 00:13:44,079
and then the second vm

425
00:13:44,079 --> 00:13:46,839
uh is just the latest kali linux running

426
00:13:46,839 --> 00:13:49,120
metasploit

427
00:13:49,120 --> 00:13:51,760
uh so the plan we'll do uh before and

428
00:13:51,760 --> 00:13:52,320
after

429
00:13:52,320 --> 00:13:55,440
uh photos we'll own the ibub via known

430
00:13:55,440 --> 00:13:56,240
exploits

431
00:13:56,240 --> 00:13:58,240
then we'll install emmett on the windows

432
00:13:58,240 --> 00:13:59,360
box and

433
00:13:59,360 --> 00:14:02,639
attempt to reown it okay wish me luck

434
00:14:02,639 --> 00:14:05,440
it's demo time

435
00:14:07,920 --> 00:14:11,120
that's a fine question sir that's that's

436
00:14:11,120 --> 00:14:14,079
the question every year

437
00:14:14,399 --> 00:14:15,600
all right let me just uh set up

438
00:14:15,600 --> 00:14:18,399
metasploit here

439
00:14:22,959 --> 00:14:25,040
see you can see that windows is so upset

440
00:14:25,040 --> 00:14:26,560
about life he's like

441
00:14:26,560 --> 00:14:28,720
uh you might want to do something about

442
00:14:28,720 --> 00:14:30,000
your antivirus

443
00:14:30,000 --> 00:14:31,600
i can show you that there's no patches

444
00:14:31,600 --> 00:14:33,360
installed here but i mean

445
00:14:33,360 --> 00:14:36,240
it's it's it's really i promise you it's

446
00:14:36,240 --> 00:14:38,399
true

447
00:14:38,399 --> 00:14:43,360
okay so this first one

448
00:14:43,839 --> 00:14:47,120
this is the uh ms-14064 olay code

449
00:14:47,120 --> 00:14:48,880
execution this is a very reliable

450
00:14:48,880 --> 00:14:49,920
exploit

451
00:14:49,920 --> 00:14:53,440
um works like a champ every time

452
00:14:53,440 --> 00:14:55,279
and it works uh they have modules in

453
00:14:55,279 --> 00:14:56,800
there for powerpoint

454
00:14:56,800 --> 00:15:00,160
and for uh internet explorer and the

455
00:15:00,160 --> 00:15:01,760
powerpoint one it was interesting

456
00:15:01,760 --> 00:15:04,959
whenever they released the ms14064 uh

457
00:15:04,959 --> 00:15:07,360
patch microsoft actually included a code

458
00:15:07,360 --> 00:15:09,120
snippet in the bulletin that says

459
00:15:09,120 --> 00:15:10,880
hey if you're running emmet here's what

460
00:15:10,880 --> 00:15:12,560
you can do in the meantime to protect

461
00:15:12,560 --> 00:15:13,360
yourself

462
00:15:13,360 --> 00:15:17,199
um so that's that's very helpful okay

463
00:15:17,199 --> 00:15:21,279
so we are now running our nasty server

464
00:15:21,279 --> 00:15:24,320
we don't care about google

465
00:15:25,600 --> 00:15:31,199
let's do ten okay so this is my evil box

466
00:15:32,320 --> 00:15:35,680
oh yeah my box wants to run powershell

467
00:15:35,680 --> 00:15:36,560
yes

468
00:15:36,560 --> 00:15:38,880
all day every day please that there's a

469
00:15:38,880 --> 00:15:40,639
key

470
00:15:40,639 --> 00:15:42,560
interpreter session one can you guys see

471
00:15:42,560 --> 00:15:44,079
that

472
00:15:44,079 --> 00:15:46,399
so there we go that means that uh we

473
00:15:46,399 --> 00:15:48,000
assem essentially have a shell

474
00:15:48,000 --> 00:15:52,480
on the uh on the ibub which was expected

475
00:15:52,480 --> 00:15:55,680
so let's do our java exploit another

476
00:15:55,680 --> 00:15:58,800
extremely uh uh

477
00:15:58,800 --> 00:16:01,600
reliable exploit in metasploit for java

478
00:16:01,600 --> 00:16:02,560
this will work

479
00:16:02,560 --> 00:16:05,920
every single time against

480
00:16:05,920 --> 00:16:07,680
ancient versions of java like the one

481
00:16:07,680 --> 00:16:09,920
that i'm running here and the one that

482
00:16:09,920 --> 00:16:13,279
everybody's running in their environment

483
00:16:14,240 --> 00:16:17,759
let's go to port 8080.

484
00:16:18,880 --> 00:16:21,199
hmm it's doing something wheels are

485
00:16:21,199 --> 00:16:23,120
spinning

486
00:16:23,120 --> 00:16:27,120
that's weird oh no interpreter session

487
00:16:27,120 --> 00:16:28,560
two open

488
00:16:28,560 --> 00:16:31,839
not good so as expected we popped the

489
00:16:31,839 --> 00:16:36,480
box and now i'm just gonna set up a

490
00:16:36,480 --> 00:16:40,320
um interpreter handler for the third one

491
00:16:40,320 --> 00:16:42,639
and this one is uh so that's two

492
00:16:42,639 --> 00:16:44,480
web-based kind of drive-by

493
00:16:44,480 --> 00:16:46,000
web type attacks that you'd see in the

494
00:16:46,000 --> 00:16:49,120
world um this one is uh kind of a demo

495
00:16:49,120 --> 00:16:51,120
of uh

496
00:16:51,120 --> 00:16:53,920
fishing land where user gets a pdf it

497
00:16:53,920 --> 00:16:56,480
says hey man i'm completely not evil

498
00:16:56,480 --> 00:16:58,079
and so they just double click the heck

499
00:16:58,079 --> 00:16:59,600
out of it and it does some things yeah

500
00:16:59,600 --> 00:17:00,800
save that yeah

501
00:17:00,800 --> 00:17:04,400
i love it oh yes let's see uh you can't

502
00:17:04,400 --> 00:17:05,919
see the error message it's a very funny

503
00:17:05,919 --> 00:17:07,119
error message it's like

504
00:17:07,119 --> 00:17:08,959
to view the encrypted content please

505
00:17:08,959 --> 00:17:11,839
click the do not show this message again

506
00:17:11,839 --> 00:17:13,039
hey i should do that but i'm just going

507
00:17:13,039 --> 00:17:15,760
to open it up that's a weird pdf it

508
00:17:15,760 --> 00:17:17,119
doesn't really look like anything

509
00:17:17,119 --> 00:17:20,799
oh no interpreter session three okay

510
00:17:20,799 --> 00:17:23,679
so there's your ibub that's that's what

511
00:17:23,679 --> 00:17:24,559
it looks like

512
00:17:24,559 --> 00:17:28,480
um this guy can be uh compromised

513
00:17:28,480 --> 00:17:30,080
all kinds of different ways so let's

514
00:17:30,080 --> 00:17:33,440
install emmett

515
00:17:33,440 --> 00:17:36,320
and see what happens

516
00:17:37,360 --> 00:17:39,520
it's just your typical msi nothing

517
00:17:39,520 --> 00:17:42,000
special

518
00:17:43,360 --> 00:17:44,799
we'll do all the defaults we're just

519
00:17:44,799 --> 00:17:45,919
going to we're not going to do any

520
00:17:45,919 --> 00:17:47,360
customization whatsoever we're going to

521
00:17:47,360 --> 00:17:49,600
do out of the box

522
00:17:49,600 --> 00:17:52,240
how does it look

523
00:17:54,480 --> 00:17:59,039
not signed i guess that's unfortunate

524
00:18:10,799 --> 00:18:12,720
so they will support you if you're

525
00:18:12,720 --> 00:18:14,000
running emmett uh as far

526
00:18:14,000 --> 00:18:28,000
as deployment uh like how to do it

527
00:18:28,000 --> 00:18:29,280
yeah i mean for their for their own

528
00:18:29,280 --> 00:18:31,200
stuff it's it's actually

529
00:18:31,200 --> 00:18:34,080
um pretty lightweight like that i

530
00:18:34,080 --> 00:18:35,440
haven't seen any problems with things

531
00:18:35,440 --> 00:18:36,240
like uh

532
00:18:36,240 --> 00:18:39,600
internet explorer or you know any of the

533
00:18:39,600 --> 00:18:42,240
the microsoft applications seem to

534
00:18:42,240 --> 00:18:42,960
behave

535
00:18:42,960 --> 00:18:45,360
okay with it um it's it's like whenever

536
00:18:45,360 --> 00:18:46,640
you start getting into like if you want

537
00:18:46,640 --> 00:18:46,960
to

538
00:18:46,960 --> 00:18:48,640
protect other plug-ins and that kind of

539
00:18:48,640 --> 00:18:50,400
stuff and if there was a third party

540
00:18:50,400 --> 00:18:51,679
microsoft's not going to give you a ton

541
00:18:51,679 --> 00:18:53,120
of support on it

542
00:18:53,120 --> 00:18:55,520
so it's really you kind of have to you

543
00:18:55,520 --> 00:18:56,320
know just

544
00:18:56,320 --> 00:18:59,439
play around with it yourself

545
00:19:07,120 --> 00:19:09,039
we have not i'll repeat the question has

546
00:19:09,039 --> 00:19:10,720
anybody running emmet had to contact

547
00:19:10,720 --> 00:19:12,160
microsoft about an issue

548
00:19:12,160 --> 00:19:17,120
that was due to emmett any issues

549
00:19:21,600 --> 00:19:25,360
yeah yeah exactly

550
00:19:25,360 --> 00:19:26,480
all right let me try to bring up the

551
00:19:26,480 --> 00:19:28,880
console here let's see

552
00:19:28,880 --> 00:19:32,240
if this is going to be friendly enough

553
00:19:34,799 --> 00:19:36,240
okay that gives you that gives you an

554
00:19:36,240 --> 00:19:38,720
idea um

555
00:19:38,720 --> 00:19:40,320
so you can actually go in here and look

556
00:19:40,320 --> 00:19:42,880
at the applications themselves

557
00:19:42,880 --> 00:19:45,520
and each one of these columns is a

558
00:19:45,520 --> 00:19:46,000
different

559
00:19:46,000 --> 00:19:48,640
family of mitigations okay so you can

560
00:19:48,640 --> 00:19:49,520
see acrobat

561
00:19:49,520 --> 00:19:51,840
acro read these are all the defined

562
00:19:51,840 --> 00:19:53,600
applications that we're protecting

563
00:19:53,600 --> 00:19:55,840
and then the various mitigations that

564
00:19:55,840 --> 00:19:58,320
are being applied to those applications

565
00:19:58,320 --> 00:20:02,480
um and if you look at uh

566
00:20:02,960 --> 00:20:05,360
show full path so you actually have to

567
00:20:05,360 --> 00:20:06,480
define where this thing's

568
00:20:06,480 --> 00:20:08,080
uh where the application's running out

569
00:20:08,080 --> 00:20:10,000
of um but the cool thing is that you can

570
00:20:10,000 --> 00:20:11,039
use wild cards

571
00:20:11,039 --> 00:20:12,640
um so you know it doesn't have to be a

572
00:20:12,640 --> 00:20:14,400
perfect path every time

573
00:20:14,400 --> 00:20:16,080
the one that's a real pain in the butt

574
00:20:16,080 --> 00:20:17,600
uh on this particular thing

575
00:20:17,600 --> 00:20:20,400
is adobe flash because each version of

576
00:20:20,400 --> 00:20:22,240
flash goes into a new directory

577
00:20:22,240 --> 00:20:23,280
structure

578
00:20:23,280 --> 00:20:26,400
and uh it just makes setting this up a

579
00:20:26,400 --> 00:20:27,679
little a little difficult

580
00:20:27,679 --> 00:20:29,679
the good thing is once you have it set

581
00:20:29,679 --> 00:20:31,440
up you can just export

582
00:20:31,440 --> 00:20:34,400
right here and it'll export the xml file

583
00:20:34,400 --> 00:20:36,080
and then that's the xml config file that

584
00:20:36,080 --> 00:20:37,600
you put up on the file share that you

585
00:20:37,600 --> 00:20:39,039
have all your clients go grab

586
00:20:39,039 --> 00:20:41,200
um and then anytime you make a change to

587
00:20:41,200 --> 00:20:42,159
your protections

588
00:20:42,159 --> 00:20:44,400
you export the xml and put it back out

589
00:20:44,400 --> 00:20:48,159
on that file share

590
00:20:48,159 --> 00:20:51,760
cool any any other questions

591
00:20:52,240 --> 00:20:55,280
okay well let's go back through

592
00:20:55,280 --> 00:20:57,840
our same attack scenarios uh we'll do

593
00:20:57,840 --> 00:21:00,000
the same three two browsers

594
00:21:00,000 --> 00:21:03,039
and uh then our wonderful uh

595
00:21:03,039 --> 00:21:06,799
completely not evil pdf

596
00:21:14,960 --> 00:21:17,840
okay

597
00:21:18,880 --> 00:21:22,080
evil has been launched

598
00:21:24,960 --> 00:21:28,240
okay i'm gonna do this guy and let's see

599
00:21:28,240 --> 00:21:31,039
what happens

600
00:21:31,039 --> 00:21:36,480
now metasploit is seeing the request

601
00:21:36,559 --> 00:21:39,678
but nothing's happening here

602
00:21:41,760 --> 00:21:45,120
so just make sure hello

603
00:21:45,120 --> 00:21:48,080
hello now metasploit's seen the actual

604
00:21:48,080 --> 00:21:49,039
request coming in

605
00:21:49,039 --> 00:21:53,280
but it's it can't do anything there so

606
00:21:53,280 --> 00:21:58,559
okay that's a win for that one

607
00:21:58,559 --> 00:22:00,720
i i didn't turn on uh you actually have

608
00:22:00,720 --> 00:22:02,320
to turn logging on right after install

609
00:22:02,320 --> 00:22:04,400
and i didn't do that i apologize

610
00:22:04,400 --> 00:22:06,720
um

611
00:22:07,760 --> 00:22:09,200
i i didn't i didn't have it but you

612
00:22:09,200 --> 00:22:11,200
actually have to turn on the the warning

613
00:22:11,200 --> 00:22:12,640
and i i didn't do that i'm sorry i

614
00:22:12,640 --> 00:22:14,720
should have done that

615
00:22:14,720 --> 00:22:16,320
it ends up uh just so everybody knows so

616
00:22:16,320 --> 00:22:17,919
it ends up in the application log

617
00:22:17,919 --> 00:22:21,919
um when you do turn the logging on

618
00:22:22,320 --> 00:22:25,520
uh let's see ten okay let's go to our

619
00:22:25,520 --> 00:22:28,639
our java url

620
00:22:28,799 --> 00:22:31,120
okay

621
00:22:32,640 --> 00:22:35,679
oh i should probably actually have

622
00:22:35,679 --> 00:22:38,840
metasploit setup to launch the java

623
00:22:38,840 --> 00:22:41,200
exploit

624
00:22:41,200 --> 00:22:44,159
apologies folks

625
00:22:48,400 --> 00:22:52,880
okay we're running 80 80.

626
00:22:52,880 --> 00:22:56,000
here we go he sees it

627
00:22:56,000 --> 00:22:58,799
sees the request

628
00:22:59,760 --> 00:23:01,200
but nothing happens it actually

629
00:23:01,200 --> 00:23:02,880
generates the jar file

630
00:23:02,880 --> 00:23:06,080
uh that would be evil and that's it

631
00:23:06,080 --> 00:23:09,440
medically can't take it any further so

632
00:23:09,440 --> 00:23:12,559
there we go uh two

633
00:23:12,559 --> 00:23:14,320
of three attack vectors have been

634
00:23:14,320 --> 00:23:16,159
protected and again we're not running

635
00:23:16,159 --> 00:23:18,080
antivirus or anything else the only

636
00:23:18,080 --> 00:23:19,760
thing protecting our butts right now

637
00:23:19,760 --> 00:23:23,840
is uh emmett

638
00:23:24,240 --> 00:23:27,360
all right last one

639
00:23:30,240 --> 00:23:36,559
so this is our completely not evil pdf

640
00:23:36,559 --> 00:23:40,320
we have a listener and let's run the

641
00:23:40,320 --> 00:23:43,600
completely not evil pdf

642
00:23:44,960 --> 00:23:47,120
no java i don't want the ask toolbar

643
00:23:47,120 --> 00:23:48,880
today

644
00:23:48,880 --> 00:23:53,440
okay so um something's happening

645
00:23:53,760 --> 00:23:56,559
okay all right fine save yes i just

646
00:23:56,559 --> 00:23:58,880
wanna i just want free wi-fi

647
00:23:58,880 --> 00:24:03,200
just let me click everything yes open

648
00:24:03,679 --> 00:24:08,159
oh no oh so we got a shell on the box

649
00:24:08,159 --> 00:24:10,720
even though we're running emmett it is

650
00:24:10,720 --> 00:24:11,600
unfortunate

651
00:24:11,600 --> 00:24:15,760
but again not a panacea

652
00:24:15,760 --> 00:24:18,880
so let's go through the effectiveness

653
00:24:18,880 --> 00:24:19,600
summary

654
00:24:19,600 --> 00:24:22,559
uh with java fully effective across all

655
00:24:22,559 --> 00:24:23,200
versions

656
00:24:23,200 --> 00:24:26,559
uh i tested this on java 1.5 1.6

657
00:24:26,559 --> 00:24:29,200
1.7 obviously we just did works like a

658
00:24:29,200 --> 00:24:30,159
champ

659
00:24:30,159 --> 00:24:32,080
none of the applications broke because

660
00:24:32,080 --> 00:24:34,159
again you can white list applications no

661
00:24:34,159 --> 00:24:35,679
problem you're allowed to use java

662
00:24:35,679 --> 00:24:37,760
and just block everything else super

663
00:24:37,760 --> 00:24:40,720
effective against java

664
00:24:40,720 --> 00:24:45,760
now for cv uh 2014 6332 that's the

665
00:24:45,760 --> 00:24:48,240
uh fully effective against this uh it

666
00:24:48,240 --> 00:24:50,159
was the exploit was blocked against both

667
00:24:50,159 --> 00:24:52,000
internet explorer and powerpoint in my

668
00:24:52,000 --> 00:24:52,640
testing

669
00:24:52,640 --> 00:24:54,880
and this is actually an improvement uh

670
00:24:54,880 --> 00:24:58,000
when uh i tested this against emit 5.1

671
00:24:58,000 --> 00:25:00,480
i was able to get the ie exploit to work

672
00:25:00,480 --> 00:25:01,200
um

673
00:25:01,200 --> 00:25:03,279
while powerpoint was being blocked so

674
00:25:03,279 --> 00:25:04,400
now in 5.2

675
00:25:04,400 --> 00:25:06,159
they've made a change i'm not sure what

676
00:25:06,159 --> 00:25:08,000
it is but it's it's fully protecting

677
00:25:08,000 --> 00:25:09,919
against that type of attack right now

678
00:25:09,919 --> 00:25:13,919
so that's good stuff for adobe reader

679
00:25:13,919 --> 00:25:16,880
partially effective um versions 10.x

680
00:25:16,880 --> 00:25:17,760
were actually

681
00:25:17,760 --> 00:25:21,200
uh protected by uh emmett but the older

682
00:25:21,200 --> 00:25:23,440
versions this 8.x and 9.x

683
00:25:23,440 --> 00:25:25,600
i guess it's just too old um there was

684
00:25:25,600 --> 00:25:27,919
there was nothing to be done

685
00:25:27,919 --> 00:25:30,880
so if you're 10.x and that's i think

686
00:25:30,880 --> 00:25:31,679
2012

687
00:25:31,679 --> 00:25:34,080
2011 something like that then you can

688
00:25:34,080 --> 00:25:35,760
apply emit protections and have them

689
00:25:35,760 --> 00:25:37,600
work

690
00:25:37,600 --> 00:25:40,159
uh for adobe flash my testing was

691
00:25:40,159 --> 00:25:40,960
inconclusive

692
00:25:40,960 --> 00:25:43,679
uh i wasn't able to get a reliable uh

693
00:25:43,679 --> 00:25:45,279
metasploit exploit to actually work

694
00:25:45,279 --> 00:25:46,480
against the ibub

695
00:25:46,480 --> 00:25:48,240
it's because i'm too stupid i'm sure

696
00:25:48,240 --> 00:25:49,840
there's a way to make that work

697
00:25:49,840 --> 00:25:53,200
um but i wasn't able to get it to go um

698
00:25:53,200 --> 00:25:55,120
it has been tested by fireeye to be

699
00:25:55,120 --> 00:25:56,320
effective against

700
00:25:56,320 --> 00:25:59,039
adobe flash and again requires heavy

701
00:25:59,039 --> 00:26:00,559
customization due to that directory

702
00:26:00,559 --> 00:26:02,000
structure i was talking about

703
00:26:02,000 --> 00:26:03,520
new directory structure for every

704
00:26:03,520 --> 00:26:05,279
version so kind of makes

705
00:26:05,279 --> 00:26:08,720
the initial config a bit of a pain

706
00:26:08,720 --> 00:26:12,799
so in the end not bad okay

707
00:26:13,600 --> 00:26:15,919
so the the overall summary uh emmett is

708
00:26:15,919 --> 00:26:17,600
a great way to limit exposure

709
00:26:17,600 --> 00:26:20,480
it's a huge win for the java problem and

710
00:26:20,480 --> 00:26:21,440
the java problem

711
00:26:21,440 --> 00:26:23,200
everybody knows about it everybody hates

712
00:26:23,200 --> 00:26:25,919
it um this is a great way to

713
00:26:25,919 --> 00:26:28,400
to fix that issue um it's not a

714
00:26:28,400 --> 00:26:30,320
replacement for application whitelisting

715
00:26:30,320 --> 00:26:31,679
uh you should definitely look at things

716
00:26:31,679 --> 00:26:33,919
like app locker which is also free as in

717
00:26:33,919 --> 00:26:35,520
beer freeze and b-sides

718
00:26:35,520 --> 00:26:37,600
and uh you know worth worth taking a

719
00:26:37,600 --> 00:26:39,440
look and uh

720
00:26:39,440 --> 00:26:41,360
excellent excellent deployment guide

721
00:26:41,360 --> 00:26:43,200
from the guys at uh trusted sex this is

722
00:26:43,200 --> 00:26:46,240
for emit 5.1 but it applies to 5.2

723
00:26:46,240 --> 00:26:47,760
um just go out to their website or

724
00:26:47,760 --> 00:26:49,440
google trusted sec uh

725
00:26:49,440 --> 00:26:51,440
emmet and you'll get this document step

726
00:26:51,440 --> 00:26:55,440
by step here's here's what you got to do

727
00:27:02,480 --> 00:27:04,960
yeah yeah you have to push out the new

728
00:27:04,960 --> 00:27:05,760
msis

729
00:27:05,760 --> 00:27:08,400
it's easy to do with group policy um to

730
00:27:08,400 --> 00:27:09,039
just

731
00:27:09,039 --> 00:27:10,400
update it that way but there yeah

732
00:27:10,400 --> 00:27:12,080
there's no auto update kind of

733
00:27:12,080 --> 00:27:21,840
feature built into it back there

734
00:27:35,919 --> 00:27:37,919
so the question was uh you know

735
00:27:37,919 --> 00:27:40,080
basically people are bypassing this

736
00:27:40,080 --> 00:27:40,880
thing

737
00:27:40,880 --> 00:27:43,440
and uh you know the attacks are people

738
00:27:43,440 --> 00:27:45,120
are constantly figuring out ways around

739
00:27:45,120 --> 00:27:47,600
emmett um you know what does the future

740
00:27:47,600 --> 00:27:48,640
hold and i think

741
00:27:48,640 --> 00:27:51,520
microsoft has shown that they're

742
00:27:51,520 --> 00:27:52,960
committed to this prod

743
00:27:52,960 --> 00:27:55,279
this product uh you know 2009 they've

744
00:27:55,279 --> 00:27:56,559
been running this thing

745
00:27:56,559 --> 00:27:58,240
and uh they're coming out with new

746
00:27:58,240 --> 00:28:00,159
versions it seems at least every six

747
00:28:00,159 --> 00:28:00,799
months

748
00:28:00,799 --> 00:28:02,960
so my you know i don't work for

749
00:28:02,960 --> 00:28:04,399
microsoft i can't i can't

750
00:28:04,399 --> 00:28:07,120
you know uh you know vouch for them too

751
00:28:07,120 --> 00:28:08,799
much but it does seem like they're

752
00:28:08,799 --> 00:28:12,000
making an actual concerted effort to to

753
00:28:12,000 --> 00:28:13,600
continually improve emmet and they're

754
00:28:13,600 --> 00:28:15,600
taking feedback i mean when it gets

755
00:28:15,600 --> 00:28:17,279
bypassed

756
00:28:17,279 --> 00:28:18,960
it tends to happen in places like black

757
00:28:18,960 --> 00:28:20,799
hat and then the guys from microsoft go

758
00:28:20,799 --> 00:28:22,080
scurrying over and say how did you do

759
00:28:22,080 --> 00:28:22,720
that you know

760
00:28:22,720 --> 00:28:25,600
what can we do to prevent that um so i i

761
00:28:25,600 --> 00:28:26,799
think uh i think

762
00:28:26,799 --> 00:28:28,240
this would be a continued you know

763
00:28:28,240 --> 00:28:30,000
evolving product and uh

764
00:28:30,000 --> 00:28:31,520
hopefully they'll just keep making it

765
00:28:31,520 --> 00:28:35,120
better um it's pretty good right now

766
00:28:35,120 --> 00:28:37,520
and again you know the bad guys are you

767
00:28:37,520 --> 00:28:38,720
know they're they're gonna get whoever

768
00:28:38,720 --> 00:28:39,360
they can get

769
00:28:39,360 --> 00:28:41,520
you know um if they're super motivated

770
00:28:41,520 --> 00:28:42,880
to get you they're gonna get you some

771
00:28:42,880 --> 00:28:44,159
one way or another

772
00:28:44,159 --> 00:28:45,760
um but this this definitely helps

773
00:28:45,760 --> 00:28:48,240
against like these these sort of wide

774
00:28:48,240 --> 00:28:51,679
mass uh male fishing campaigns you know

775
00:28:51,679 --> 00:28:52,320
the dire

776
00:28:52,320 --> 00:28:54,000
campaigns of the world uh where they're

777
00:28:54,000 --> 00:28:55,679
just spamming everybody and seeing how

778
00:28:55,679 --> 00:28:56,799
many clicks they can get

779
00:28:56,799 --> 00:28:57,919
you know this will definitely protect

780
00:28:57,919 --> 00:29:00,880
against that kind of stuff

781
00:29:10,840 --> 00:29:13,840
sir

782
00:29:24,080 --> 00:29:25,840
awesome no that's that's that's good uh

783
00:29:25,840 --> 00:29:27,039
and for those of you who didn't hear

784
00:29:27,039 --> 00:29:28,320
that the idea is that

785
00:29:28,320 --> 00:29:29,840
you know mitigations are tested and

786
00:29:29,840 --> 00:29:31,279
emmet and then eventually rolled into

787
00:29:31,279 --> 00:29:32,399
the windows core

788
00:29:32,399 --> 00:29:34,559
um so it's kind of their test platform

789
00:29:34,559 --> 00:29:35,760
to improve

790
00:29:35,760 --> 00:29:38,000
the overall uh windows kernel security

791
00:29:38,000 --> 00:29:40,960
it's good stuff

792
00:29:40,960 --> 00:29:43,200
yes

793
00:29:44,480 --> 00:29:47,120
working on it

794
00:29:52,480 --> 00:29:55,840
oh sure

795
00:29:57,279 --> 00:29:59,440
citrix yeah your workstations oh there

796
00:29:59,440 --> 00:30:00,880
it is um

797
00:30:00,880 --> 00:30:02,880
point of sale atms if you got to deal

798
00:30:02,880 --> 00:30:04,240
with that kind of stuff uh

799
00:30:04,240 --> 00:30:07,360
internet of things type devices things

800
00:30:07,360 --> 00:30:08,799
running embedded windows

801
00:30:08,799 --> 00:30:11,120
um

802
00:30:18,000 --> 00:30:20,240
alpha group yeah we're starting off with

803
00:30:20,240 --> 00:30:21,600
uh we actually have a different uh

804
00:30:21,600 --> 00:30:23,200
deployment

805
00:30:23,200 --> 00:30:25,200
software i guess like a patch packaging

806
00:30:25,200 --> 00:30:27,520
software and the idea would be to

807
00:30:27,520 --> 00:30:28,799
push it out that way but you push it

808
00:30:28,799 --> 00:30:30,240
with group policy just as you however

809
00:30:30,240 --> 00:30:37,840
you push software in your environment

810
00:30:42,960 --> 00:30:44,720
it puts that xml file in the same

811
00:30:44,720 --> 00:30:46,240
location every time

812
00:30:46,240 --> 00:30:48,080
um so you can push your initial package

813
00:30:48,080 --> 00:30:49,679
out with the xml file that you

814
00:30:49,679 --> 00:30:51,840
that you have at that time but then set

815
00:30:51,840 --> 00:30:53,919
a scheduled task or a login script or

816
00:30:53,919 --> 00:30:55,039
something like that to go grab the

817
00:30:55,039 --> 00:30:55,600
latest

818
00:30:55,600 --> 00:31:00,000
xml file whenever the machine boots up

819
00:31:00,480 --> 00:31:05,679
anybody else all right

