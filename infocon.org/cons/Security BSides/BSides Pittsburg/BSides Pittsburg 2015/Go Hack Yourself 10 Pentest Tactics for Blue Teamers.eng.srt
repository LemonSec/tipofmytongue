1
00:00:00,000 --> 00:00:02,580
all right heads everyone ok so our first

2
00:00:02,580 --> 00:00:05,790
talk is Brent Kennedy with Sir and then

3
00:00:05,790 --> 00:00:08,189
Jason Frank with the very go after

4
00:00:08,189 --> 00:00:10,410
yourself ten penthouse tactics of

5
00:00:10,410 --> 00:00:12,769
looting

6
00:00:38,410 --> 00:00:41,430
good morning everybody

7
00:00:41,780 --> 00:00:44,949
that was less enthusiastic

8
00:00:46,399 --> 00:00:49,670
thanks for coming thanks to everybody at

9
00:00:49,670 --> 00:00:51,860
these sites of Pittsburgh on the

10
00:00:51,860 --> 00:00:56,239
conference really appreciated me my name

11
00:00:56,239 --> 00:00:59,300
is Jason Frank again I'm with their

12
00:00:59,300 --> 00:01:01,129
scripts adapted threat division we're a

13
00:01:01,129 --> 00:01:04,399
small DC based security consulting

14
00:01:04,399 --> 00:01:05,790
company

15
00:01:05,790 --> 00:01:08,310
I run a team called the indented threads

16
00:01:08,310 --> 00:01:12,120
division group of about 20 head testers

17
00:01:12,120 --> 00:01:14,850
so if anybody is looking to jump

18
00:01:14,850 --> 00:01:18,000
for senior and junior I also teach the

19
00:01:18,000 --> 00:01:21,090
adaptive penetration testing class at

20
00:01:21,090 --> 00:01:24,540
blackhat coming up here my specialty has

21
00:01:24,540 --> 00:01:28,860
been focused on building and executing

22
00:01:28,860 --> 00:01:30,780
penetration testing programs for both

23
00:01:30,780 --> 00:01:33,710
the federal government as well as large

24
00:01:33,710 --> 00:01:36,790
providers will serese--

25
00:01:36,790 --> 00:01:41,380
and I've read penny here Harry

26
00:01:42,110 --> 00:01:44,900
I work across the city insert Carnegie

27
00:01:44,900 --> 00:01:46,370
Mellon's campus as part of software in

28
00:01:46,370 --> 00:01:49,670
software engineering Institute I am one

29
00:01:49,670 --> 00:01:51,410
of the wheat pen testers there we

30
00:01:51,410 --> 00:01:53,840
partner of Jesus company and some

31
00:01:53,840 --> 00:01:55,130
government clients to do a lot of

32
00:01:55,130 --> 00:01:56,690
testing for federal state local

33
00:01:56,690 --> 00:01:58,190
governments as well as a lot of critical

34
00:01:58,190 --> 00:02:00,650
infrastructure so if you haven't work in

35
00:02:00,650 --> 00:02:01,700
any of those domains you know come

36
00:02:01,700 --> 00:02:02,900
 near the after we can do

37
00:02:02,900 --> 00:02:04,820
some really cold work after you guys a

38
00:02:04,820 --> 00:02:09,020
very good price that you pay and we'll

39
00:02:09,020 --> 00:02:10,310
Schrader I think I'll try to love this

40
00:02:10,310 --> 00:02:11,690
presentation we project you've been

41
00:02:11,690 --> 00:02:14,060
being here follow him on Twitter and

42
00:02:14,060 --> 00:02:15,350
start enjoying he does a lot of cool

43
00:02:15,350 --> 00:02:17,180
stuff he's one of the lead researchers

44
00:02:17,180 --> 00:02:19,760
at bears group he's one of the

45
00:02:19,760 --> 00:02:21,560
co-authors on the Bell framework

46
00:02:21,560 --> 00:02:22,910
compared to every thought it's a Navy

47
00:02:22,910 --> 00:02:25,820
bypassed by pest hole he's the sole

48
00:02:25,820 --> 00:02:29,840
author of the power tools which when we

49
00:02:29,840 --> 00:02:31,640
get into a lot today so a big trigger

50
00:02:31,640 --> 00:02:33,860
for there between the three minutes we

51
00:02:33,860 --> 00:02:35,780
have about fogers experience two leading

52
00:02:35,780 --> 00:02:37,370
cuts less engagement so we go from a

53
00:02:37,370 --> 00:02:37,940
neighbor

54
00:02:37,940 --> 00:02:39,860
like I said to you know private

55
00:02:39,860 --> 00:02:41,330
customers so we kind of get to see the

56
00:02:41,330 --> 00:02:44,710
broad spectrum of everything

57
00:02:44,990 --> 00:02:48,110
so why are we here so you know it said

58
00:02:48,110 --> 00:02:49,460
we do always defend this and we you know

59
00:02:49,460 --> 00:02:51,110
kind of start seeing a theme you know

60
00:02:51,110 --> 00:02:52,640
usually if the defenders out there you

61
00:02:52,640 --> 00:02:53,960
know usually out briefing on the last

62
00:02:53,960 --> 00:02:55,280
day you're talking the customer to

63
00:02:55,280 --> 00:02:56,220
telling what you found

64
00:02:56,220 --> 00:02:57,870
we started to see this trend where you

65
00:02:57,870 --> 00:03:00,390
know we get you know system ins not guys

66
00:03:00,390 --> 00:03:01,980
soft guys they started coming up to us

67
00:03:01,980 --> 00:03:03,150
and they just start asking your

68
00:03:03,150 --> 00:03:04,320
questions you know how do I get involved

69
00:03:04,320 --> 00:03:06,600
with this you know how do i you know any

70
00:03:06,600 --> 00:03:08,250
self investing online and little books

71
00:03:08,250 --> 00:03:10,560
can i read what tools are using and

72
00:03:10,560 --> 00:03:12,270
especially we start doing findings you

73
00:03:12,270 --> 00:03:13,530
know we say you know here's our tack

74
00:03:13,530 --> 00:03:15,570
back we got in through this this web app

75
00:03:15,570 --> 00:03:16,680
and they were like I've been here a year

76
00:03:16,680 --> 00:03:18,480
and I've never seen of my life how did

77
00:03:18,480 --> 00:03:21,210
you find that in two days so you know we

78
00:03:21,210 --> 00:03:22,380
started thinking to ourselves you know

79
00:03:22,380 --> 00:03:24,420
what we were using all these specialty

80
00:03:24,420 --> 00:03:26,520
tools and they learned ability reducing

81
00:03:26,520 --> 00:03:28,260
the same exact things is it could be for

82
00:03:28,260 --> 00:03:29,460
a couple reasons you know obviously it's

83
00:03:29,460 --> 00:03:30,720
two different sides of the fence you

84
00:03:30,720 --> 00:03:32,040
know they may not have the offensive

85
00:03:32,040 --> 00:03:34,830
training you know skills this life hack

86
00:03:34,830 --> 00:03:39,390
classes are expensive and you're really

87
00:03:39,390 --> 00:03:40,710
just thinking offensive these always a

88
00:03:40,710 --> 00:03:42,180
different mindset you know you know even

89
00:03:42,180 --> 00:03:43,350
though the attacker the offender they're

90
00:03:43,350 --> 00:03:44,550
playing the same space which is a

91
00:03:44,550 --> 00:03:46,160
different way of thinking

92
00:03:46,160 --> 00:03:48,709
and also sometimes the actor coals so to

93
00:03:48,709 --> 00:03:50,360
speak you can I get the bad connotation

94
00:03:50,360 --> 00:03:52,100
of people start thinking of Africa which

95
00:03:52,100 --> 00:03:53,450
is to break my Network everything's

96
00:03:53,450 --> 00:03:55,220
gonna go down where in actuality as

97
00:03:55,220 --> 00:03:56,300
you'll see here a lot of this stuff is

98
00:03:56,300 --> 00:03:58,010
really just you know mapping information

99
00:03:58,010 --> 00:03:59,420
gathering things like that it's not you

100
00:03:59,420 --> 00:04:01,880
know your remote code execution in those

101
00:04:01,880 --> 00:04:04,040
things quick poll how many people here

102
00:04:04,040 --> 00:04:07,480
operate on the blue team

103
00:04:08,080 --> 00:04:10,609
it's all sweet and

104
00:04:10,609 --> 00:04:12,469
it's kind of strange you know we'll be

105
00:04:12,469 --> 00:04:15,499
who executes one to two week engagements

106
00:04:15,499 --> 00:04:17,690
and in the course of those five to ten

107
00:04:17,690 --> 00:04:20,449
days we'll know more about people's

108
00:04:20,449 --> 00:04:22,250
network than some people

109
00:04:22,250 --> 00:04:24,350
blues I know and so that's kind of

110
00:04:24,350 --> 00:04:25,700
daunting right you go to the out

111
00:04:25,700 --> 00:04:26,750
briefing you're like that they're like

112
00:04:26,750 --> 00:04:28,730
well I don't even know those Network

113
00:04:28,730 --> 00:04:32,030
Rangers in those web apps exist like and

114
00:04:32,030 --> 00:04:33,980
so so we're trying to get these some

115
00:04:33,980 --> 00:04:36,110
tools and tactics to kind of get the lay

116
00:04:36,110 --> 00:04:38,090
of the land and it really valued your

117
00:04:38,090 --> 00:04:38,670
network

118
00:04:38,670 --> 00:04:40,919
a bit more

119
00:04:40,919 --> 00:04:43,020
so it's under your blue teamers up there

120
00:04:43,020 --> 00:04:44,939
I will seriously buy you a beer later

121
00:04:44,939 --> 00:04:46,860
because your job is so much harder than

122
00:04:46,860 --> 00:04:48,990
our job be a part of that like you said

123
00:04:48,990 --> 00:04:50,249
we find stuff because you know that's

124
00:04:50,249 --> 00:04:52,349
our job over there too but you are so

125
00:04:52,349 --> 00:04:53,490
you know you so many things you have to

126
00:04:53,490 --> 00:04:54,960
worry about the biggest thing is you are

127
00:04:54,960 --> 00:04:56,219
just trying to find everything on your

128
00:04:56,219 --> 00:04:57,210
network if you work for a big

129
00:04:57,210 --> 00:04:59,129
corporation things like that there could

130
00:04:59,129 --> 00:05:00,960
be stuff everywhere you know especially

131
00:05:00,960 --> 00:05:02,219
if you're working University type

132
00:05:02,219 --> 00:05:03,419
studies we do those where you have

133
00:05:03,419 --> 00:05:04,620
students researchers they have the

134
00:05:04,620 --> 00:05:06,210
freedom to come for a stuff on the

135
00:05:06,210 --> 00:05:07,349
network and then it becomes your problem

136
00:05:07,349 --> 00:05:09,419
and you have to worry about patching and

137
00:05:09,419 --> 00:05:11,159
updating instructions and West level

138
00:05:11,159 --> 00:05:12,599
patches it's all the little software

139
00:05:12,599 --> 00:05:14,250
people are installing custom apps their

140
00:05:14,250 --> 00:05:16,319
party stuff and you're just trying to be

141
00:05:16,319 --> 00:05:17,879
consistent you're trying to you know you

142
00:05:17,879 --> 00:05:19,860
might have like a standard base image or

143
00:05:19,860 --> 00:05:21,389
something that everyone uses but then

144
00:05:21,389 --> 00:05:22,830
you're gonna get the special questioning

145
00:05:22,830 --> 00:05:24,449
at the CEO and whatever saying I want

146
00:05:24,449 --> 00:05:26,159
this I want this music online whatever

147
00:05:26,159 --> 00:05:28,229
you think you take a different policy

148
00:05:28,229 --> 00:05:32,460
like that yeah you're in it not to

149
00:05:32,460 --> 00:05:34,169
mention costs you know where everyone is

150
00:05:34,169 --> 00:05:35,729
required notice we're always up against

151
00:05:35,729 --> 00:05:36,719
you're probably not even here how does

152
00:05:36,719 --> 00:05:38,520
the unlimited budget to do wherever you

153
00:05:38,520 --> 00:05:40,289
want with so kind of have to pick and

154
00:05:40,289 --> 00:05:41,729
choose what polls that give you the best

155
00:05:41,729 --> 00:05:43,420
value

156
00:05:43,420 --> 00:05:45,220
it finally you know kind of goes into

157
00:05:45,220 --> 00:05:46,720
the whole political thing you know

158
00:05:46,720 --> 00:05:48,400
security is always easy to trade off you

159
00:05:48,400 --> 00:05:49,870
always you know I think it's getting a

160
00:05:49,870 --> 00:05:50,950
bit better and I think that's just

161
00:05:50,950 --> 00:05:52,330
because CNN is saying we're cracked

162
00:05:52,330 --> 00:05:54,160
every day but you know you have to get

163
00:05:54,160 --> 00:05:56,320
everyone to buy off on you know getting

164
00:05:56,320 --> 00:05:57,640
a security card because some of them

165
00:05:57,640 --> 00:06:00,430
isn't cheap and until something happens

166
00:06:00,430 --> 00:06:02,140
people don't think it's important until

167
00:06:02,140 --> 00:06:03,310
you get breached and something like that

168
00:06:03,310 --> 00:06:05,110
so we know that's we're trying to put

169
00:06:05,110 --> 00:06:06,940
about aim here that we can kind of maybe

170
00:06:06,940 --> 00:06:08,140
give you some of these goals in these

171
00:06:08,140 --> 00:06:09,880
tactics that and give you that leverage

172
00:06:09,880 --> 00:06:11,770
down the line to have some political

173
00:06:11,770 --> 00:06:14,609
capital or yes

174
00:06:14,810 --> 00:06:16,940
so on the flipside and you know as an

175
00:06:16,940 --> 00:06:18,800
attacker you know we'll talk about from

176
00:06:18,800 --> 00:06:19,820
a high level you know what's an attacker

177
00:06:19,820 --> 00:06:21,230
looking for they're looking for the same

178
00:06:21,230 --> 00:06:22,730
thing they're trying to find what hosts

179
00:06:22,730 --> 00:06:23,840
are on your network they're trying to

180
00:06:23,840 --> 00:06:25,880
find what's out there your domain

181
00:06:25,880 --> 00:06:27,889
structure you know are you a big ad shop

182
00:06:27,889 --> 00:06:29,780
what groups are you or the abuses that

183
00:06:29,780 --> 00:06:31,310
the fault is a custom this sorts of

184
00:06:31,310 --> 00:06:33,470
things also a software patch you because

185
00:06:33,470 --> 00:06:34,490
they're going to officer out they want

186
00:06:34,490 --> 00:06:35,570
to know what patches you guys they can

187
00:06:35,570 --> 00:06:37,250
exploit or what version of ie are you

188
00:06:37,250 --> 00:06:38,419
running what version of Java are you

189
00:06:38,419 --> 00:06:40,010
running those sort of things and it's

190
00:06:40,010 --> 00:06:41,540
all to find this attack vectors those

191
00:06:41,540 --> 00:06:43,400
exploitable conditions they can you know

192
00:06:43,400 --> 00:06:44,780
find the way in your network and find a

193
00:06:44,780 --> 00:06:47,570
way give it around and certainly you

194
00:06:47,570 --> 00:06:48,560
know the attackers are there for a

195
00:06:48,560 --> 00:06:50,240
reason they're after your consoles there

196
00:06:50,240 --> 00:06:51,740
after to make money or to embarrass you

197
00:06:51,740 --> 00:06:53,810
or to do something but it's not so much

198
00:06:53,810 --> 00:06:56,300
it's just finding what your consoles are

199
00:06:56,300 --> 00:06:57,500
that may be obvious depending on what

200
00:06:57,500 --> 00:06:59,090
business you're in but it's also how to

201
00:06:59,090 --> 00:07:01,310
get there an attackers always take that

202
00:07:01,310 --> 00:07:02,870
path of least resistance you know they

203
00:07:02,870 --> 00:07:04,940
might not be trying to break into your

204
00:07:04,940 --> 00:07:06,590
database directly to see all the

205
00:07:06,590 --> 00:07:07,880
information they're gonna for the router

206
00:07:07,880 --> 00:07:08,270
network

207
00:07:08,270 --> 00:07:10,010
and steal the DA's credentials and just

208
00:07:10,010 --> 00:07:11,750
login so there's always this different

209
00:07:11,750 --> 00:07:13,070
paths that if sometimes you're harder to

210
00:07:13,070 --> 00:07:15,580
think about that that attack

211
00:07:15,580 --> 00:07:17,559
and as you can see from kind of the list

212
00:07:17,559 --> 00:07:19,270
on the last slide to the list I'm here

213
00:07:19,270 --> 00:07:20,860
attackers and offenders are kind of

214
00:07:20,860 --> 00:07:22,180
looking for the same informational of

215
00:07:22,180 --> 00:07:23,499
time the whole inventory thing patch

216
00:07:23,499 --> 00:07:25,119
cycles those sorts of things so that's

217
00:07:25,119 --> 00:07:26,110
the other reason why we started doing

218
00:07:26,110 --> 00:07:28,029
this presentation was to you know if

219
00:07:28,029 --> 00:07:29,259
we're using the same tools to find this

220
00:07:29,259 --> 00:07:30,460
stuff you know maybe defenders can use

221
00:07:30,460 --> 00:07:33,180
the same ones as well

222
00:07:34,660 --> 00:07:37,270
so some you know pros to hacking tools

223
00:07:37,270 --> 00:07:39,280
this isn't inclusive to everything that

224
00:07:39,280 --> 00:07:40,450
every happen tool out there obviously

225
00:07:40,450 --> 00:07:42,730
some are little worse than others but if

226
00:07:42,730 --> 00:07:44,080
everything we're talking about here you

227
00:07:44,080 --> 00:07:45,400
know they're just going to be smaller

228
00:07:45,400 --> 00:07:47,170
scripts you know it's not the big cops

229
00:07:47,170 --> 00:07:48,550
product installation has to go on

230
00:07:48,550 --> 00:07:49,840
everything this is just stuff you can

231
00:07:49,840 --> 00:07:51,790
run with a Python or PowerShell are

232
00:07:51,790 --> 00:07:53,890
things like that some even run it member

233
00:07:53,890 --> 00:07:56,650
they don't even touched it is free is

234
00:07:56,650 --> 00:07:58,270
awesome I think everything we talk about

235
00:07:58,270 --> 00:08:01,240
is on github which is great it's that

236
00:08:01,240 --> 00:08:02,410
straightforward easy to use you just

237
00:08:02,410 --> 00:08:03,850
read the flies you kind of play with it

238
00:08:03,850 --> 00:08:06,280
and kind of most importantly as I said

239
00:08:06,280 --> 00:08:07,750
you know that hacker clothes kind of get

240
00:08:07,750 --> 00:08:10,120
that bad connotation sometimes a lot of

241
00:08:10,120 --> 00:08:11,350
the stuff we're doing here especially

242
00:08:11,350 --> 00:08:13,030
the PowerShell stuff you know it's using

243
00:08:13,030 --> 00:08:15,640
the valid system calls it's it's talking

244
00:08:15,640 --> 00:08:17,320
to the main just as a user what are just

245
00:08:17,320 --> 00:08:18,580
how you interact through your computer

246
00:08:18,580 --> 00:08:20,650
it may be doing it in Vulcans in a lot

247
00:08:20,650 --> 00:08:22,120
of the time but it's you know valid

248
00:08:22,120 --> 00:08:24,700
calls its valid traffic which is good if

249
00:08:24,700 --> 00:08:27,100
you maybe have to get some sign-off to

250
00:08:27,100 --> 00:08:28,330
run some when your network usually this

251
00:08:28,330 --> 00:08:29,380
will be a little bit easier because it's

252
00:08:29,380 --> 00:08:31,990
all this stuff the bad side of it is the

253
00:08:31,990 --> 00:08:33,700
package using it that's valid stuff so

254
00:08:33,700 --> 00:08:35,140
you know your IDs is things like that

255
00:08:35,140 --> 00:08:36,080
might not catch it

256
00:08:36,080 --> 00:08:38,840
it's kind of a no web sort there yeah

257
00:08:38,840 --> 00:08:40,700
and I have conversations with quitting

258
00:08:40,700 --> 00:08:42,200
for the Chamber's a lot they say well

259
00:08:42,200 --> 00:08:43,520
you know we don't have the budget we

260
00:08:43,520 --> 00:08:46,780
don't have the political

261
00:08:47,170 --> 00:08:50,110
and so these are our quick wins it's a

262
00:08:50,110 --> 00:08:51,310
list of quicklinks

263
00:08:51,310 --> 00:08:52,720
that are going to allow you to kind of

264
00:08:52,720 --> 00:08:54,940
build some momentum within your

265
00:08:54,940 --> 00:08:56,950
organization you'll find the information

266
00:08:56,950 --> 00:08:59,800
you actually make changes to your

267
00:08:59,800 --> 00:09:02,709
security posture hopefully enough that

268
00:09:02,709 --> 00:09:04,329
if you have to invest money down the

269
00:09:04,329 --> 00:09:06,160
line you're gonna have the you

270
00:09:06,160 --> 00:09:07,600
won't be able to say I need this for

271
00:09:07,600 --> 00:09:10,750
this right so you're gonna see kind of a

272
00:09:10,750 --> 00:09:14,740
trend here for a lot of the lists we

273
00:09:14,740 --> 00:09:17,860
operate as pen testers primarily in the

274
00:09:17,860 --> 00:09:20,260
Windows environment and a lot of you are

275
00:09:20,260 --> 00:09:21,970
saying okay well you know the crown

276
00:09:21,970 --> 00:09:24,310
jewels are on mix boxes they're on the

277
00:09:24,310 --> 00:09:27,519
databases that type of thing chances are

278
00:09:27,519 --> 00:09:30,579
though most common way into an

279
00:09:30,579 --> 00:09:32,990
organization this foot is spearfishing

280
00:09:32,990 --> 00:09:34,940
and send an email a lot of people click

281
00:09:34,940 --> 00:09:36,740
on emails people fix stuff all the time

282
00:09:36,740 --> 00:09:39,650
they're not supposed to and so what's

283
00:09:39,650 --> 00:09:41,150
gonna happen is when people click on

284
00:09:41,150 --> 00:09:43,010
those emails chances are you're gonna

285
00:09:43,010 --> 00:09:45,620
land on the windows box that windows box

286
00:09:45,620 --> 00:09:47,420
is probably going to be the user land

287
00:09:47,420 --> 00:09:49,280
space which is connected to a domain

288
00:09:49,280 --> 00:09:52,220
environment which is a pen tester or an

289
00:09:52,220 --> 00:09:54,410
attacker we can leverage to move around

290
00:09:54,410 --> 00:09:57,740
your network get the access we need the

291
00:09:57,740 --> 00:09:59,690
Linux the BB admins they're gonna have

292
00:09:59,690 --> 00:10:01,640
Windows boxes that we can leverage to

293
00:10:01,640 --> 00:10:04,280
just look directly in to those crowns or

294
00:10:04,280 --> 00:10:08,150
Target boxes so that's kind of our

295
00:10:08,150 --> 00:10:10,160
attack path that's that's what we use an

296
00:10:10,160 --> 00:10:12,050
allotment because we are using valid

297
00:10:12,050 --> 00:10:14,030
credentials are using valid calls and

298
00:10:14,030 --> 00:10:15,950
things like that the blue teamers can

299
00:10:15,950 --> 00:10:18,640
tend to be blind to our activity

300
00:10:18,640 --> 00:10:20,839
that's why we're trying to educate you

301
00:10:20,839 --> 00:10:24,340
on how we're doing it so

302
00:10:24,340 --> 00:10:26,230
anybody's power show on their day to day

303
00:10:26,230 --> 00:10:30,940
operations yeah so if you haven't jumped

304
00:10:30,940 --> 00:10:33,040
at the power show yet I always saw a few

305
00:10:33,040 --> 00:10:37,630
hands for Windows this has been a huge

306
00:10:37,630 --> 00:10:40,180
step forward from the admitting side and

307
00:10:40,180 --> 00:10:42,220
I always talk to people I say pen

308
00:10:42,220 --> 00:10:44,200
testing is just admitting with a

309
00:10:44,200 --> 00:10:48,400
different intent right everybody was

310
00:10:48,400 --> 00:10:51,520
afraid when Windows 7 Windows 2008 came

311
00:10:51,520 --> 00:10:52,870
out doing how all these memory

312
00:10:52,870 --> 00:10:54,610
protections all the traditional buffer

313
00:10:54,610 --> 00:10:56,279
overflows they're not going to work

314
00:10:56,279 --> 00:10:59,589
because you know aslr and death and all

315
00:10:59,589 --> 00:11:04,900
that Wow okay but then people started

316
00:11:04,900 --> 00:11:06,760
hooking in the power show and seeing the

317
00:11:06,760 --> 00:11:09,130
real power behind it and what you can do

318
00:11:09,130 --> 00:11:11,140
with it and we've actually put together

319
00:11:11,140 --> 00:11:14,800
on our team of library offensive tools

320
00:11:14,800 --> 00:11:18,339
that we can use to carve through Network

321
00:11:18,339 --> 00:11:21,810
pretty quickly there's a note here

322
00:11:21,810 --> 00:11:24,569
cover real quick microsoft intended to

323
00:11:24,569 --> 00:11:28,379
put up an execution policy in so that by

324
00:11:28,379 --> 00:11:28,949
default

325
00:11:28,949 --> 00:11:31,589
you can't just import your own scripts

326
00:11:31,589 --> 00:11:33,269
and modules and things like that and

327
00:11:33,269 --> 00:11:35,910
extend PowerShell functionality if you

328
00:11:35,910 --> 00:11:37,290
just put that little flag there just

329
00:11:37,290 --> 00:11:40,160
bypasses it off

330
00:11:42,410 --> 00:11:44,750
so let's take a look at our arsenal some

331
00:11:44,750 --> 00:11:46,040
of the stuff you might know and that's

332
00:11:46,040 --> 00:11:47,120
been around forever

333
00:11:47,120 --> 00:11:50,410
a lot of the tools here stuff we try

334
00:11:50,410 --> 00:11:53,990
internally a lot of my guys right house

335
00:11:53,990 --> 00:11:56,030
weight with the exception of PowerPoint

336
00:11:56,030 --> 00:11:57,980
that's written by a different group of

337
00:11:57,980 --> 00:11:59,200
people

338
00:11:59,200 --> 00:12:02,090
Christian global of Mac braver

339
00:12:02,090 --> 00:12:04,910
but nmap used for you know kind of

340
00:12:04,910 --> 00:12:06,680
mapping out your network eyewitness

341
00:12:06,680 --> 00:12:08,840
we'll talk about it's a screenshotting

342
00:12:08,840 --> 00:12:12,250
service for your website's power sploit

343
00:12:12,250 --> 00:12:16,130
offensive power so if power up is heavy

344
00:12:16,130 --> 00:12:18,170
because we use that privilege escalation

345
00:12:18,170 --> 00:12:19,020
heavily

346
00:12:19,020 --> 00:12:21,709
Power View we use pretty extensively

347
00:12:21,709 --> 00:12:24,710
kind of querying

348
00:12:24,710 --> 00:12:26,120
talk about a lot of the features there

349
00:12:26,120 --> 00:12:28,070
and then in res assess to kind of test

350
00:12:28,070 --> 00:12:30,390
your memory

351
00:12:30,390 --> 00:12:33,740
detection for data that lead

352
00:12:36,290 --> 00:12:39,019
now we'll get into the fun stuff so

353
00:12:39,019 --> 00:12:40,609
we're gonna go over kind of ten tactics

354
00:12:40,609 --> 00:12:42,949
and they kind of follow a thief so you

355
00:12:42,949 --> 00:12:44,600
know each one kind of has three things

356
00:12:44,600 --> 00:12:48,109
there quick quick to run be generating a

357
00:12:48,109 --> 00:12:51,470
lot of data for you and they're free as

358
00:12:51,470 --> 00:12:53,209
we said most bees don't get up so our

359
00:12:53,209 --> 00:12:54,529
Buller is kind of you know when you

360
00:12:54,529 --> 00:12:55,970
combine those three things for each of

361
00:12:55,970 --> 00:12:56,959
these that it's going to give you kind

362
00:12:56,959 --> 00:12:59,059
of an immediate value you know we like

363
00:12:59,059 --> 00:13:00,589
to say it's stuff that after this you

364
00:13:00,589 --> 00:13:01,879
might be able to pull that together and

365
00:13:01,879 --> 00:13:03,709
a script you might go to run this you

366
00:13:03,709 --> 00:13:04,999
know if you have these your system in or

367
00:13:04,999 --> 00:13:05,869
something you have overrun the soft

368
00:13:05,869 --> 00:13:07,459
drinking your coffee daily weekly those

369
00:13:07,459 --> 00:13:09,259
sorts of things and see some changes

370
00:13:09,259 --> 00:13:11,239
there solid Jason start off here with

371
00:13:11,239 --> 00:13:13,390
the acid

372
00:13:13,390 --> 00:13:15,160
the biggest thing what's in your network

373
00:13:15,160 --> 00:13:18,000
a lot of people are like I don't know

374
00:13:18,000 --> 00:13:20,470
he actually they said we're going to use

375
00:13:20,470 --> 00:13:22,500
your pen tests as our inventory

376
00:13:22,500 --> 00:13:24,420
exercises

377
00:13:24,420 --> 00:13:29,170
all right so kind of free cheap right

378
00:13:29,170 --> 00:13:32,050
use nmap to conduct a network discovery

379
00:13:32,050 --> 00:13:34,360
in your network you know how do you know

380
00:13:34,360 --> 00:13:35,079
your range

381
00:13:35,079 --> 00:13:38,709
hopefully you don't ask and there's put

382
00:13:38,709 --> 00:13:40,959
a cron job out there every 25 hours do

383
00:13:40,959 --> 00:13:44,260
hit and stay on your network what this

384
00:13:44,260 --> 00:13:46,959
will do is over the course of a month it

385
00:13:46,959 --> 00:13:49,420
will detect throughout the day changes

386
00:13:49,420 --> 00:13:51,279
within your network there's going to be

387
00:13:51,279 --> 00:13:53,740
some network on plates that you should

388
00:13:53,740 --> 00:13:55,149
see a lot of change it's going to be

389
00:13:55,149 --> 00:13:56,620
these Orlan trays people put their

390
00:13:56,620 --> 00:13:59,250
computer asleep wake it up and all that

391
00:13:59,250 --> 00:14:01,390
but there should be things that don't

392
00:14:01,390 --> 00:14:03,220
change like your server on claims your

393
00:14:03,220 --> 00:14:05,160
database on

394
00:14:05,160 --> 00:14:08,040
if you do see Delta's there you can

395
00:14:08,040 --> 00:14:11,300
script that bolero quick

396
00:14:11,390 --> 00:14:15,920
as needed what we do once we find the

397
00:14:15,920 --> 00:14:18,050
endpoints as we do a service detection

398
00:14:18,050 --> 00:14:20,150
and we find out okay what TCP services

399
00:14:20,150 --> 00:14:22,490
are available anything that comes back

400
00:14:22,490 --> 00:14:26,630
that's come into web 84 for 380 those

401
00:14:26,630 --> 00:14:29,450
types of things or what and that tells

402
00:14:29,450 --> 00:14:31,970
us as a website we throw into a tool

403
00:14:31,970 --> 00:14:33,830
called eyewitness written by Chris

404
00:14:33,830 --> 00:14:37,400
Spencer bye guys and what it does is it

405
00:14:37,400 --> 00:14:40,100
reaches out and it creates an inventory

406
00:14:40,100 --> 00:14:43,190
of all those websites and it's in the

407
00:14:43,190 --> 00:14:44,950
HTML document for each team

408
00:14:44,950 --> 00:14:49,180
document and you can just quickly see

409
00:14:49,180 --> 00:14:50,860
all the web applications within your

410
00:14:50,860 --> 00:14:54,040
network these slides are going to be

411
00:14:54,040 --> 00:14:56,320
posted so here's some syntax that you

412
00:14:56,320 --> 00:15:00,370
can use both for endpoint identification

413
00:15:00,370 --> 00:15:02,800
as well as service identification and

414
00:15:02,800 --> 00:15:05,980
then we form a eyewitness there and

415
00:15:05,980 --> 00:15:07,600
here's a screenshot real quick by

416
00:15:07,600 --> 00:15:10,030
witness what it does is it summarizes it

417
00:15:10,030 --> 00:15:11,890
to talk about its finding it does

418
00:15:11,890 --> 00:15:13,990
attempt categorization between printers

419
00:15:13,990 --> 00:15:16,720
and network appliances and potentially

420
00:15:16,720 --> 00:15:20,440
highly vulnerable web servers and then

421
00:15:20,440 --> 00:15:22,210
it also gives you a running inventory

422
00:15:22,210 --> 00:15:25,410
here of a screen shot as well as the

423
00:15:25,410 --> 00:15:29,850
little bit information about the request

424
00:15:31,850 --> 00:15:35,660
okay so as Jason said earlier you talked

425
00:15:35,660 --> 00:15:37,760
about spearfishing it was kind of the

426
00:15:37,760 --> 00:15:39,350
most common attack better today it's

427
00:15:39,350 --> 00:15:41,180
cheap wood all hate it but it kind of is

428
00:15:41,180 --> 00:15:42,890
what it is so you imagine if you get

429
00:15:42,890 --> 00:15:44,270
spear fish you know hundred people it's

430
00:15:44,270 --> 00:15:46,130
different they're gonna lay in 104

431
00:15:46,130 --> 00:15:47,900
places within your network you know

432
00:15:47,900 --> 00:15:49,430
maybe we'll get a system it or something

433
00:15:49,430 --> 00:15:51,620
like that probability losses know

434
00:15:51,620 --> 00:15:52,760
they're gonna you know it's going to be

435
00:15:52,760 --> 00:15:54,050
in the HR department it's going to be

436
00:15:54,050 --> 00:15:56,630
and we're good whatever first thing that

437
00:15:56,630 --> 00:15:57,770
the Tigers going to do is we're really

438
00:15:57,770 --> 00:15:59,540
going to look at that base image and try

439
00:15:59,540 --> 00:16:01,220
to find out what it is what's on there

440
00:16:01,220 --> 00:16:02,960
and introspective or the patches and

441
00:16:02,960 --> 00:16:04,340
things like that and they're gonna try

442
00:16:04,340 --> 00:16:05,630
to escalate they're going to try to take

443
00:16:05,630 --> 00:16:07,280
the basic user who clicked on that

444
00:16:07,280 --> 00:16:08,630
phishing email whoever that may be

445
00:16:08,630 --> 00:16:10,430
they're gonna try to you know get bigger

446
00:16:10,430 --> 00:16:13,430
privileges it's just all so back to the

447
00:16:13,430 --> 00:16:14,990
kind of consistency thing you may have a

448
00:16:14,990 --> 00:16:16,850
consistent you know Windows baseline or

449
00:16:16,850 --> 00:16:18,320
something that rolls health every suit

450
00:16:18,320 --> 00:16:20,030
user this is you know how you want to

451
00:16:20,030 --> 00:16:21,740
check that and you know a lot of people

452
00:16:21,740 --> 00:16:22,880
say you know about every you know every

453
00:16:22,880 --> 00:16:24,860
time you touch it that's great you need

454
00:16:24,860 --> 00:16:26,450
to do that but that's just thing here

455
00:16:26,450 --> 00:16:27,800
the windows stuff you're going back to

456
00:16:27,800 --> 00:16:29,930
the third party touching it's the custom

457
00:16:29,930 --> 00:16:31,670
apps you know things that are specific

458
00:16:31,670 --> 00:16:32,780
to your business you might have develop

459
00:16:32,780 --> 00:16:34,130
stuff the in-house that maybe just be

460
00:16:34,130 --> 00:16:35,720
kind of running in at higher levels

461
00:16:35,720 --> 00:16:37,250
things like that

462
00:16:37,250 --> 00:16:40,340
do you have it is there's a one of the

463
00:16:40,340 --> 00:16:43,820
power tools is called power pop-up mean

464
00:16:43,820 --> 00:16:44,820
escalate

465
00:16:44,820 --> 00:16:46,860
and what it does is it goes through all

466
00:16:46,860 --> 00:16:48,450
of these baseline checks and it's really

467
00:16:48,450 --> 00:16:50,160
looking and the phone call checks

468
00:16:50,160 --> 00:16:52,650
function will check everything looking

469
00:16:52,650 --> 00:16:54,570
at kind of screenshot you can see really

470
00:16:54,570 --> 00:16:55,920
what it's doing it's good a new rating

471
00:16:55,920 --> 00:16:57,090
every single service that's running on

472
00:16:57,090 --> 00:16:58,110
there and it's gonna start checking

473
00:16:58,110 --> 00:16:59,670
things like what does that service

474
00:16:59,670 --> 00:17:01,140
running ads what are the permissions to

475
00:17:01,140 --> 00:17:02,820
to run the service start and stop and

476
00:17:02,820 --> 00:17:05,099
things like that where path is the

477
00:17:05,099 --> 00:17:07,680
service in so you know this runs almost

478
00:17:07,680 --> 00:17:09,450
instantly on a team a sign we suggest

479
00:17:09,450 --> 00:17:10,290
that if you have maybe multiple

480
00:17:10,290 --> 00:17:11,670
baselines you can make sure you're

481
00:17:11,670 --> 00:17:14,160
running it on each but you know for

482
00:17:14,160 --> 00:17:15,390
example the one that's highlighted here

483
00:17:15,390 --> 00:17:17,730
you can see that this is 10 6 service is

484
00:17:17,730 --> 00:17:20,069
horrible horrible service there too but

485
00:17:20,069 --> 00:17:22,109
what that means is the path you know

486
00:17:22,109 --> 00:17:23,550
that's a service of training at higher

487
00:17:23,550 --> 00:17:25,440
level privileges and the normal users

488
00:17:25,440 --> 00:17:27,240
shouldn't be able to mess with that

489
00:17:27,240 --> 00:17:28,920
service but they can write to that path

490
00:17:28,920 --> 00:17:30,030
so what you would do is you would take

491
00:17:30,030 --> 00:17:32,460
make your own 10 6 malicious executable

492
00:17:32,460 --> 00:17:34,320
replace that and a lot of these happens

493
00:17:34,320 --> 00:17:35,520
services things like that they start on

494
00:17:35,520 --> 00:17:37,110
the boot whatever eerie goods a machine

495
00:17:37,110 --> 00:17:38,610
in limited sticky-fingered stickykeys

496
00:17:38,610 --> 00:17:40,410
attack that's what this is reboots

497
00:17:40,410 --> 00:17:41,520
machine that'll run your malicious

498
00:17:41,520 --> 00:17:42,960
executable at that higher level

499
00:17:42,960 --> 00:17:44,490
privileges and that usually gives you a

500
00:17:44,490 --> 00:17:46,690
shell back at a different level stuff

501
00:17:46,690 --> 00:17:48,519
one example from a desolation but this

502
00:17:48,519 --> 00:17:49,600
tool just kind of goes through your

503
00:17:49,600 --> 00:17:51,669
checks checks all of those if you're if

504
00:17:51,669 --> 00:17:53,559
you're wondering first of all this is

505
00:17:53,559 --> 00:17:55,480
not an intrusive it's just checking

506
00:17:55,480 --> 00:17:59,010
stuff number two the

507
00:17:59,010 --> 00:18:00,510
subjects are pretty well-documented

508
00:18:00,510 --> 00:18:01,890
we're going to give you some resources

509
00:18:01,890 --> 00:18:03,960
on what exactly checks work a lot of

510
00:18:03,960 --> 00:18:05,040
this is just publicly available

511
00:18:05,040 --> 00:18:06,810
information pen testers have been

512
00:18:06,810 --> 00:18:08,790
talking about these these escalation

513
00:18:08,790 --> 00:18:10,950
tactics for some time now we just made

514
00:18:10,950 --> 00:18:13,230
it pretty quick and easy for you know

515
00:18:13,230 --> 00:18:16,080
one powerful service

516
00:18:16,080 --> 00:18:19,560
so the next kind of it is a favor one so

517
00:18:19,560 --> 00:18:23,520
I want to show hands but somebody do you

518
00:18:23,520 --> 00:18:25,110
know your whether your work you're like

519
00:18:25,110 --> 00:18:26,520
somewhere you talk about Windows

520
00:18:26,520 --> 00:18:27,840
Explorer and like you see like the

521
00:18:27,840 --> 00:18:29,130
network button then you kind of click it

522
00:18:29,130 --> 00:18:30,240
it you found a week to see everything

523
00:18:30,240 --> 00:18:32,340
populate down anything like Joe's

524
00:18:32,340 --> 00:18:34,020
computer you're like take a look at that

525
00:18:34,020 --> 00:18:35,610
you know start like through people's

526
00:18:35,610 --> 00:18:39,620
five minutes yeah the whole time yeah

527
00:18:41,170 --> 00:18:43,240
but Tigers of investors do it too

528
00:18:43,240 --> 00:18:45,520
because you find a lot of stuff in there

529
00:18:45,520 --> 00:18:46,660
you know especially if you're a big

530
00:18:46,660 --> 00:18:48,010
corporate environment you have file

531
00:18:48,010 --> 00:18:49,540
shares everywhere because they're needed

532
00:18:49,540 --> 00:18:50,740
you know people are doing projects

533
00:18:50,740 --> 00:18:52,150
they're sharing stuff to the departments

534
00:18:52,150 --> 00:18:55,120
I think Sogeti misconfigured I know one

535
00:18:55,120 --> 00:18:56,530
of my favorite stories is we're on an

536
00:18:56,530 --> 00:18:58,450
engagement and we got into this guy's

537
00:18:58,450 --> 00:19:00,970
computer and it is drive to get an excel

538
00:19:00,970 --> 00:19:03,190
file and honest to god it was like 350

539
00:19:03,190 --> 00:19:04,960
lines long which is column a username

540
00:19:04,960 --> 00:19:07,630
color B that's where column see what it

541
00:19:07,630 --> 00:19:09,910
is and it's just like 10 credit cards my

542
00:19:09,910 --> 00:19:12,160
3 bank accounts my retirement my domain

543
00:19:12,160 --> 00:19:13,690
password you know just everything like

544
00:19:13,690 --> 00:19:15,190
three of my eesti in it like everything

545
00:19:15,190 --> 00:19:18,970
was on there you know bigger tips yeah

546
00:19:18,970 --> 00:19:21,580
password book but you know that's his

547
00:19:21,580 --> 00:19:23,110
personal stuff and obviously that can be

548
00:19:23,110 --> 00:19:24,430
bad but you also think about if your

549
00:19:24,430 --> 00:19:25,540
company's you know harboring any

550
00:19:25,540 --> 00:19:26,770
sensitive is your made sensitive

551
00:19:26,770 --> 00:19:28,570
information some proprietary stuff

552
00:19:28,570 --> 00:19:31,450
things like that and so the next story

553
00:19:31,450 --> 00:19:32,800
will show you it kind of looks for all

554
00:19:32,800 --> 00:19:36,190
these file shares it is Power View which

555
00:19:36,190 --> 00:19:37,690
is very powerful tool this specific

556
00:19:37,690 --> 00:19:39,220
function is called invoke sheriff

557
00:19:39,220 --> 00:19:41,710
sheriff finder and what it's doing is

558
00:19:41,710 --> 00:19:43,450
when you run in this a partial script it

559
00:19:43,450 --> 00:19:45,370
don't just query the domain in the

560
00:19:45,370 --> 00:19:46,480
domain will be able to return and this

561
00:19:46,480 --> 00:19:47,800
is a normal user do you know anything

562
00:19:47,800 --> 00:19:49,660
elevated over user the domain will

563
00:19:49,660 --> 00:19:51,370
return every single file share that it

564
00:19:51,370 --> 00:19:52,120
has

565
00:19:52,120 --> 00:19:55,120
computer additionally you can add the

566
00:19:55,120 --> 00:19:57,190
check share access line and that's going

567
00:19:57,190 --> 00:19:59,320
to check the current user you're running

568
00:19:59,320 --> 00:20:01,000
against it's going to check to see what

569
00:20:01,000 --> 00:20:02,860
user that has access to so we will

570
00:20:02,860 --> 00:20:04,330
always run that and I'll show you with

571
00:20:04,330 --> 00:20:07,210
the screenshot here and as you can see

572
00:20:07,210 --> 00:20:08,500
it's kind of giving an illicit thing so

573
00:20:08,500 --> 00:20:09,640
those are the things that the user is

574
00:20:09,640 --> 00:20:10,930
running as the vouchers that he has

575
00:20:10,930 --> 00:20:12,760
access to so this is also the demo

576
00:20:12,760 --> 00:20:13,780
environment you know we highlighted

577
00:20:13,780 --> 00:20:14,980
there's a secret over there that's

578
00:20:14,980 --> 00:20:16,690
actually hidden so we'll all that hidden

579
00:20:16,690 --> 00:20:18,970
folders as well but you know we've also

580
00:20:18,970 --> 00:20:20,800
see a lot of things like you see a pin

581
00:20:20,800 --> 00:20:22,060
dollar sign there your eyes that light

582
00:20:22,060 --> 00:20:24,010
up because that means that you can that

583
00:20:24,010 --> 00:20:25,720
user can absolutely remote to that

584
00:20:25,720 --> 00:20:27,430
system and actually gain access to the

585
00:20:27,430 --> 00:20:29,800
photo stone this is what I like to tell

586
00:20:29,800 --> 00:20:32,670
you know gluten gluten offenders because

587
00:20:32,670 --> 00:20:35,020
like I said there's so many shares out

588
00:20:35,020 --> 00:20:36,550
there it's so hard to keep track and a

589
00:20:36,550 --> 00:20:37,690
lot of people have access to different

590
00:20:37,690 --> 00:20:39,370
things and you know it might not either

591
00:20:39,370 --> 00:20:41,350
be it might just be you know the new

592
00:20:41,350 --> 00:20:43,330
ones where we see a lot of floors where

593
00:20:43,330 --> 00:20:44,710
they are configured nicely you know it's

594
00:20:44,710 --> 00:20:46,330
only this user this is your this user

595
00:20:46,330 --> 00:20:48,340
but then someone check everyone at the

596
00:20:48,340 --> 00:20:50,050
bottom so just against everything that

597
00:20:50,050 --> 00:20:51,280
they're trying to do and you know we

598
00:20:51,280 --> 00:20:53,050
find ways like that and this is a big

599
00:20:53,050 --> 00:20:54,430
way that attackers are using to fit

600
00:20:54,430 --> 00:20:55,500
around the network for things

601
00:20:55,500 --> 00:20:57,390
yeah the dollar sign yeah you're gonna

602
00:20:57,390 --> 00:21:00,890
notice - this really comes down

603
00:21:01,620 --> 00:21:03,240
within a subgroup within Active

604
00:21:03,240 --> 00:21:04,710
Directory appeared you guys with

605
00:21:04,710 --> 00:21:07,640
motherhood too

606
00:21:08,470 --> 00:21:10,940
you're adding

607
00:21:10,940 --> 00:21:13,520
to this year this tends to happen we

608
00:21:13,520 --> 00:21:15,670
actually went into a pancreas

609
00:21:15,670 --> 00:21:18,580
and we were able to see as a normal user

610
00:21:18,580 --> 00:21:21,040
so somebody anybody may have any effect

611
00:21:21,040 --> 00:21:24,040
on the email we could see although them

612
00:21:24,040 --> 00:21:27,130
personal files of every employee because

613
00:21:27,130 --> 00:21:29,280
what they did was they added all users

614
00:21:29,280 --> 00:21:34,060
to the to the parent floor and so we

615
00:21:34,060 --> 00:21:35,770
just jump up to the president of the

616
00:21:35,770 --> 00:21:39,520
banks share and he had a just an excel

617
00:21:39,520 --> 00:21:41,730
sheet of socials

618
00:21:41,730 --> 00:21:44,190
tiii in all kinds of craziness it's like

619
00:21:44,190 --> 00:21:47,340
yeah we need to verify our accounts that

620
00:21:47,340 --> 00:21:49,380
are held by actual people for

621
00:21:49,380 --> 00:21:52,700
regulations and it's like

622
00:21:55,110 --> 00:21:57,299
and this is another one where you know

623
00:21:57,299 --> 00:21:59,399
back to the check share access like if

624
00:21:59,399 --> 00:22:01,019
your assistant you have this ability you

625
00:22:01,019 --> 00:22:03,179
know make it user in each each different

626
00:22:03,179 --> 00:22:04,559
group whatever groups you have within

627
00:22:04,559 --> 00:22:06,090
your company and then run this to see

628
00:22:06,090 --> 00:22:07,590
because it might not just be looking for

629
00:22:07,590 --> 00:22:09,090
why the professor's you might also want

630
00:22:09,090 --> 00:22:11,070
to check for to make sure that users in

631
00:22:11,070 --> 00:22:12,539
this group don't get to see certain

632
00:22:12,539 --> 00:22:13,620
things you know everyone a company

633
00:22:13,620 --> 00:22:14,700
shouldn't be privileged to everything

634
00:22:14,700 --> 00:22:17,690
they know where you are

635
00:22:18,880 --> 00:22:22,200
so it's good to know who your admins are

636
00:22:22,200 --> 00:22:24,670
especially if you have a complex Active

637
00:22:24,670 --> 00:22:26,200
Directory setup you know depending on

638
00:22:26,200 --> 00:22:28,210
the size of your organization right if

639
00:22:28,210 --> 00:22:30,640
your organization has made acquisitions

640
00:22:30,640 --> 00:22:32,500
right if they've bought companies and

641
00:22:32,500 --> 00:22:35,640
just kind of merged Active Directory

642
00:22:35,640 --> 00:22:37,690
infrastructure together and it's

643
00:22:37,690 --> 00:22:41,440
Frankenstein setup sometimes it's really

644
00:22:41,440 --> 00:22:43,390
hard to derive it through the look the

645
00:22:43,390 --> 00:22:47,020
admins are right so it's good to know

646
00:22:47,020 --> 00:22:48,850
that and again we talked about the

647
00:22:48,850 --> 00:22:51,160
concept of nested groups power Channel

648
00:22:51,160 --> 00:22:53,050
and the situational awareness tool

649
00:22:53,050 --> 00:22:56,530
allows you to get the admin groups

650
00:22:56,530 --> 00:22:58,600
it allows you to reverse these groups to

651
00:22:58,600 --> 00:23:00,460
figure out who exactly is in these

652
00:23:00,460 --> 00:23:04,300
groups that has access to what here's a

653
00:23:04,300 --> 00:23:07,940
quick screenshot of that

654
00:23:07,940 --> 00:23:10,129
but more importantly where are your

655
00:23:10,129 --> 00:23:13,159
admins operating in your network

656
00:23:13,159 --> 00:23:15,379
does anybody have a policy that says

657
00:23:15,379 --> 00:23:17,830
okay if I'm an admin in the network I

658
00:23:17,830 --> 00:23:20,509
need to have a regular user account

659
00:23:20,509 --> 00:23:22,159
I'm privileged that I haven't supposed

660
00:23:22,159 --> 00:23:25,779
to operate in yeah perfect so how many

661
00:23:25,779 --> 00:23:29,540
admins actually adhere to that

662
00:23:29,540 --> 00:23:33,550
oh good good presentations

663
00:23:35,030 --> 00:23:37,490
chances are they don't right and so they

664
00:23:37,490 --> 00:23:39,950
said well you know I I'm an admin I know

665
00:23:39,950 --> 00:23:42,680
what I'm doing so I'm you know don't

666
00:23:42,680 --> 00:23:45,950
worry about me but if as an attacker I

667
00:23:45,950 --> 00:23:48,530
get access or I get one of those guys to

668
00:23:48,530 --> 00:23:50,750
click on something my job becomes a lot

669
00:23:50,750 --> 00:23:52,040
easier because I don't have to escalate

670
00:23:52,040 --> 00:23:53,810
I already have added proofs on your

671
00:23:53,810 --> 00:23:56,169
never

672
00:23:57,489 --> 00:24:00,279
again how are you what we do is we do

673
00:24:00,279 --> 00:24:01,989
this we perform this technique called

674
00:24:01,989 --> 00:24:05,109
these are hunting highly documented by

675
00:24:05,109 --> 00:24:07,299
little straighter but the purpose of

676
00:24:07,299 --> 00:24:09,759
this is again however you reaches out to

677
00:24:09,759 --> 00:24:12,609
your Active Directory infrastructure and

678
00:24:12,609 --> 00:24:14,649
queries it says we're on my hosts

679
00:24:14,649 --> 00:24:17,200
give me over the back and then it

680
00:24:17,200 --> 00:24:18,940
reaches out those hosts and inquiries

681
00:24:18,940 --> 00:24:21,779
and says who's logged on to this house

682
00:24:21,779 --> 00:24:24,549
and then what you can do is you can say

683
00:24:24,549 --> 00:24:28,749
okay if this person is in this specific

684
00:24:28,749 --> 00:24:30,309
group and typically we're looking for

685
00:24:30,309 --> 00:24:33,460
privileged terms like domain

686
00:24:33,460 --> 00:24:35,410
or that or that's not bad that is that

687
00:24:35,410 --> 00:24:37,360
type of thing if you're in a certain

688
00:24:37,360 --> 00:24:41,350
group return from me the box standpoint

689
00:24:41,350 --> 00:24:43,030
that this person's will have internally

690
00:24:43,030 --> 00:24:45,580
and the name of the user so I know who

691
00:24:45,580 --> 00:24:48,070
to target right as a blue team if you

692
00:24:48,070 --> 00:24:50,050
want to know where these admins are are

693
00:24:50,050 --> 00:24:51,430
kind of residing within your network

694
00:24:51,430 --> 00:24:53,830
because if you get access to one of

695
00:24:53,830 --> 00:24:56,860
these boxes you can use that access and

696
00:24:56,860 --> 00:24:58,330
move throughout the network so you want

697
00:24:58,330 --> 00:24:59,620
to make sure that these things are on

698
00:24:59,620 --> 00:25:02,110
played up so you'll see things like file

699
00:25:02,110 --> 00:25:03,160
servers

700
00:25:03,160 --> 00:25:05,230
DC's that type of thing you want to make

701
00:25:05,230 --> 00:25:07,240
sure that these are kind of protected so

702
00:25:07,240 --> 00:25:08,800
it's a little bit harder for the

703
00:25:08,800 --> 00:25:11,639
attacker to get there

704
00:25:12,380 --> 00:25:14,150
so this is the equipment I'm not gonna

705
00:25:14,150 --> 00:25:15,650
bore everyone in the room with password

706
00:25:15,650 --> 00:25:17,780
policy overall most security people will

707
00:25:17,780 --> 00:25:20,299
right here you know you have to probably

708
00:25:20,299 --> 00:25:21,620
yell it your significant other your

709
00:25:21,620 --> 00:25:23,150
mother your grandmother changer past

710
00:25:23,150 --> 00:25:26,480
regimes most often but it can be hard in

711
00:25:26,480 --> 00:25:28,340
a big environment to make sure you use

712
00:25:28,340 --> 00:25:29,900
it or change their password sure that's

713
00:25:29,900 --> 00:25:31,370
your policy sure you can for some things

714
00:25:31,370 --> 00:25:32,990
and that's great you know but there is

715
00:25:32,990 --> 00:25:34,280
also you know other things offer there

716
00:25:34,280 --> 00:25:35,660
many systems that are under the radar

717
00:25:35,660 --> 00:25:37,669
there may be things you people that are

718
00:25:37,669 --> 00:25:39,289
excluded you know your your sea level

719
00:25:39,289 --> 00:25:40,400
your board of directors you don't want

720
00:25:40,400 --> 00:25:42,799
to deal with all your crap so you know

721
00:25:42,799 --> 00:25:44,480
but they still change their passwords so

722
00:25:44,480 --> 00:25:47,780
this is just a quick quick check to be

723
00:25:47,780 --> 00:25:50,030
able to check for a you know last time

724
00:25:50,030 --> 00:25:52,880
passwords were changed so nothing too

725
00:25:52,880 --> 00:25:54,350
crazy here is you see the goodnight user

726
00:25:54,350 --> 00:25:55,850
command which is part of Power View but

727
00:25:55,850 --> 00:25:57,320
that's really just your standard net

728
00:25:57,320 --> 00:25:58,460
user commands which enumerates

729
00:25:58,460 --> 00:26:00,679
everything then it kind of gets piped

730
00:26:00,679 --> 00:26:01,880
through a lot comes through there that's

731
00:26:01,880 --> 00:26:03,559
really checking for it this this one you

732
00:26:03,559 --> 00:26:05,030
can see the negative 12 meeting a year

733
00:26:05,030 --> 00:26:06,610
12 months

734
00:26:06,610 --> 00:26:08,659
checking for those accounts so when you

735
00:26:08,659 --> 00:26:10,549
run it when it does that it gives you

736
00:26:10,549 --> 00:26:11,929
kind of a nice listing of your entire

737
00:26:11,929 --> 00:26:14,480
domain of usernames that have another

738
00:26:14,480 --> 00:26:16,880
password changed within a year like I

739
00:26:16,880 --> 00:26:18,289
said you know for the most part probably

740
00:26:18,289 --> 00:26:20,090
take their calls to this is a nice way

741
00:26:20,090 --> 00:26:21,590
to just check to make sure that nothing

742
00:26:21,590 --> 00:26:23,360
is flying under the radar plus you see a

743
00:26:23,360 --> 00:26:24,799
lot of like service accounts that were

744
00:26:24,799 --> 00:26:26,360
pulled from this demo that's probably

745
00:26:26,360 --> 00:26:27,409
true you're never because they're not

746
00:26:27,409 --> 00:26:29,330
probably a policy adhering to your

747
00:26:29,330 --> 00:26:30,890
policies your setup or they're not in

748
00:26:30,890 --> 00:26:32,990
that and you know some of these may or

749
00:26:32,990 --> 00:26:34,220
may not have to be changed but you know

750
00:26:34,220 --> 00:26:35,809
service accounts can be just as juicy is

751
00:26:35,809 --> 00:26:36,160
where

752
00:26:36,160 --> 00:26:40,050
on some occasions who would be serviced

753
00:26:40,750 --> 00:26:43,070
but I mean appliance the service it is

754
00:26:43,070 --> 00:26:45,140
so and those are things that service

755
00:26:45,140 --> 00:26:46,460
accounts can have going back to the

756
00:26:46,460 --> 00:26:48,260
service checker to power up you know if

757
00:26:48,260 --> 00:26:49,220
they may be running under specific

758
00:26:49,220 --> 00:26:50,809
service account you know for whatever

759
00:26:50,809 --> 00:26:52,730
some separate you know custom software

760
00:26:52,730 --> 00:26:54,140
and they might have elevated privileges

761
00:26:54,140 --> 00:26:56,929
so the Gantt point making tomato see

762
00:26:56,929 --> 00:26:58,230
usually

763
00:26:58,230 --> 00:27:00,510
now if some admins putting in like some

764
00:27:00,510 --> 00:27:03,170
sort of like

765
00:27:06,990 --> 00:27:09,390
Porter the enemy curve I just share some

766
00:27:09,390 --> 00:27:14,300
global admin account which is great

767
00:27:14,300 --> 00:27:16,830
so talking about domain trust there's I

768
00:27:16,830 --> 00:27:18,720
think we can give a whole talk on the

769
00:27:18,720 --> 00:27:22,620
main trust but again think back to the

770
00:27:22,620 --> 00:27:24,720
concept of acquisitions right if

771
00:27:24,720 --> 00:27:27,000
somebody and the company buys another

772
00:27:27,000 --> 00:27:28,590
company and they're cooking there in

773
00:27:28,590 --> 00:27:30,210
Active Directory infrastructures

774
00:27:30,210 --> 00:27:33,240
together a lot of times to make work

775
00:27:33,240 --> 00:27:35,940
right away but we would as attackers

776
00:27:35,940 --> 00:27:38,280
will tend to see is still just global

777
00:27:38,280 --> 00:27:40,680
trust each other and so what that means

778
00:27:40,680 --> 00:27:46,230
is that an admin in domain a can then

779
00:27:46,230 --> 00:27:49,620
become an admin and domain B and so if a

780
00:27:49,620 --> 00:27:51,930
subsidiary is getting acquired and maybe

781
00:27:51,930 --> 00:27:53,550
they didn't have as much money in it and

782
00:27:53,550 --> 00:27:56,610
have as from a busted security posture

783
00:27:56,610 --> 00:27:59,270
and the mothership is sitting there and

784
00:27:59,270 --> 00:28:01,520
hook together and you can just ride into

785
00:28:01,520 --> 00:28:03,770
the city and get out to the mothership

786
00:28:03,770 --> 00:28:05,210
and they get the crowds to the

787
00:28:05,210 --> 00:28:07,640
mothership and so that's that's how we

788
00:28:07,640 --> 00:28:10,940
tend to operate again however you can do

789
00:28:10,940 --> 00:28:13,280
this for you it has a function called

790
00:28:13,280 --> 00:28:15,110
map domain trust and yeah these are all

791
00:28:15,110 --> 00:28:16,850
just system calls to your Active

792
00:28:16,850 --> 00:28:19,220
Directory infrastructure and you can

793
00:28:19,220 --> 00:28:23,060
export a CSV but just in water

794
00:28:23,060 --> 00:28:25,070
another one of my guys did is he figured

795
00:28:25,070 --> 00:28:27,500
out a way to visually represent these

796
00:28:27,500 --> 00:28:31,690
domain trusts using Socrates Hawaiian

797
00:28:31,690 --> 00:28:34,070
it is great yeah

798
00:28:34,070 --> 00:28:36,650
so what will 10 that happen is we'll

799
00:28:36,650 --> 00:28:39,500
jump into like the core network you know

800
00:28:39,500 --> 00:28:43,490
Spearfish in need to catch a Nina jumps

801
00:28:43,490 --> 00:28:44,930
up to the mothership and then we might

802
00:28:44,930 --> 00:28:47,300
jump it over to contracts and then just

803
00:28:47,300 --> 00:28:50,919
ride trust down into another company

804
00:28:50,919 --> 00:28:53,649
jump into the crown jewels eventually

805
00:28:53,649 --> 00:28:55,899
right it takes a lot of kind of figuring

806
00:28:55,899 --> 00:28:57,369
out where you are in the network and

807
00:28:57,369 --> 00:28:59,440
typically and this is a little bit of a

808
00:28:59,440 --> 00:29:01,929
longer term engagement but it can be

809
00:29:01,929 --> 00:29:04,480
done and something like this is very

810
00:29:04,480 --> 00:29:07,029
good to kind of present to your

811
00:29:07,029 --> 00:29:08,859
management structure to figure out okay

812
00:29:08,859 --> 00:29:10,749
you know what's what's talking with each

813
00:29:10,749 --> 00:29:12,989
other

814
00:29:15,320 --> 00:29:17,230
it's easy

815
00:29:17,230 --> 00:29:18,850
the other thing is your domain

816
00:29:18,850 --> 00:29:21,130
controllers in Active Directory tend to

817
00:29:21,130 --> 00:29:23,110
be highly critical boxes within your

818
00:29:23,110 --> 00:29:25,930
network also you know other high value

819
00:29:25,930 --> 00:29:28,690
servers but who has local admin access

820
00:29:28,690 --> 00:29:32,620
on your domain controllers sometimes you

821
00:29:32,620 --> 00:29:34,180
know obviously your domain admins are

822
00:29:34,180 --> 00:29:35,950
the enterprise Entenmann's in the domain

823
00:29:35,950 --> 00:29:37,210
are going to have access to the

824
00:29:37,210 --> 00:29:39,280
different domain controllers for the

825
00:29:39,280 --> 00:29:42,090
house servers and things like that

826
00:29:42,090 --> 00:29:45,900
but both will see on occasions will see

827
00:29:45,900 --> 00:29:48,750
other people other you know Adam in soon

828
00:29:48,750 --> 00:29:51,510
we find that some admins 10 available

829
00:29:51,510 --> 00:29:53,730
easier than others they might just add

830
00:29:53,730 --> 00:29:56,220
themselves to the local admin group on

831
00:29:56,220 --> 00:29:58,919
the domain controller so instead of me

832
00:29:58,919 --> 00:30:00,150
running around your domain

833
00:30:00,150 --> 00:30:03,240
infrastructure if I know that I landed

834
00:30:03,240 --> 00:30:06,179
via Spearfish on this specific admin I

835
00:30:06,179 --> 00:30:08,220
might just try deploying into the DC

836
00:30:08,220 --> 00:30:09,140
director

837
00:30:09,140 --> 00:30:13,429
excuse me directly so it's good to know

838
00:30:13,429 --> 00:30:15,990
all the different ways into your domain

839
00:30:15,990 --> 00:30:18,260
controllers into your high value servers

840
00:30:18,260 --> 00:30:20,730
again as an attacker I'm gonna take the

841
00:30:20,730 --> 00:30:23,419
path of least resistance

842
00:30:26,260 --> 00:30:29,260
just we you can also do this in power

843
00:30:29,260 --> 00:30:31,960
view figure out your domain controllers

844
00:30:31,960 --> 00:30:35,770
and you can figure out you can look at

845
00:30:35,770 --> 00:30:38,050
the logo admin group here here's just a

846
00:30:38,050 --> 00:30:40,840
quick screenshot of what you might see

847
00:30:40,840 --> 00:30:43,570
so you might might be with my heart to

848
00:30:43,570 --> 00:30:46,480
tell but you'll see you know domain

849
00:30:46,480 --> 00:30:50,280
users versus local users here

850
00:30:52,120 --> 00:30:55,909
so they started a job you're gonna

851
00:30:55,909 --> 00:30:57,260
computer your desktop computer your

852
00:30:57,260 --> 00:30:58,820
laptop you know obviously you log in you

853
00:30:58,820 --> 00:31:00,679
log into that thing and all sorts of

854
00:31:00,679 --> 00:31:01,520
things you know there's things on your

855
00:31:01,520 --> 00:31:03,110
desktop you might already have a printer

856
00:31:03,110 --> 00:31:04,760
set up they might be some option or set

857
00:31:04,760 --> 00:31:06,650
up for you all that stuff that's being

858
00:31:06,650 --> 00:31:09,169
set up with group policy preferences but

859
00:31:09,169 --> 00:31:10,309
really what that suing is you know you

860
00:31:10,309 --> 00:31:11,539
need your computer's gonna query the

861
00:31:11,539 --> 00:31:13,640
domain the publicist fought for it's

862
00:31:13,640 --> 00:31:16,070
going to look for these XML files those

863
00:31:16,070 --> 00:31:18,409
containing all the actions needed to you

864
00:31:18,409 --> 00:31:19,820
know whatever let's just say setting up

865
00:31:19,820 --> 00:31:22,610
a printer you know it doesn't but some

866
00:31:22,610 --> 00:31:24,950
of these okay need look like managed so

867
00:31:24,950 --> 00:31:27,169
in that XML file over to see password

868
00:31:27,169 --> 00:31:29,600
file containing an encrypted password I

869
00:31:29,600 --> 00:31:32,390
think it's encrypted yes and then it's

870
00:31:32,390 --> 00:31:34,580
they 64 thing and you computer brings

871
00:31:34,580 --> 00:31:35,990
that down and it has a built-in

872
00:31:35,990 --> 00:31:37,549
Microsoft think Krupke and if the

873
00:31:37,549 --> 00:31:38,720
encrypted password and it runs the

874
00:31:38,720 --> 00:31:40,190
administrative process did not even

875
00:31:40,190 --> 00:31:42,350
upgrade anyone know the problem with

876
00:31:42,350 --> 00:31:44,360
Alice

877
00:31:44,360 --> 00:31:46,590
yes thank you

878
00:31:46,590 --> 00:31:48,990
yes not just that but Microsoft

879
00:31:48,990 --> 00:31:51,690
published that he to like tell like the

880
00:31:51,690 --> 00:31:56,309
internet missed him yeah so attackers

881
00:31:56,309 --> 00:31:58,049
lit up with that one and this is one R

882
00:31:58,049 --> 00:32:00,480
using Mac rivers full power sploit

883
00:32:00,480 --> 00:32:02,309
really what that's doing is doing

884
00:32:02,309 --> 00:32:03,899
exactly what you computer just it's

885
00:32:03,899 --> 00:32:05,700
gonna you know clear the domain look at

886
00:32:05,700 --> 00:32:08,309
that stuff so for its going to pull all

887
00:32:08,309 --> 00:32:10,169
the XML files is gonna look for anything

888
00:32:10,169 --> 00:32:11,610
that says CPAP sir it's going to use the

889
00:32:11,610 --> 00:32:13,679
key that is just built into the tool and

890
00:32:13,679 --> 00:32:14,879
it's gonna start decrypting them and

891
00:32:14,879 --> 00:32:16,549
here you can see where those T's live

892
00:32:16,549 --> 00:32:18,869
you know it's some some passive

893
00:32:18,869 --> 00:32:20,039
administrative options because those

894
00:32:20,039 --> 00:32:21,570
needed to do the function because it's

895
00:32:21,570 --> 00:32:24,090
an administrative function yes this has

896
00:32:24,090 --> 00:32:26,519
been patched I think it was 14 and 25 M

897
00:32:26,519 --> 00:32:29,490
s 40 no 25 exits so you know most people

898
00:32:29,490 --> 00:32:31,649
are probably good with this now but once

899
00:32:31,649 --> 00:32:32,700
again you know in Pentos we see

900
00:32:32,700 --> 00:32:34,289
everything these plus the XP machine you

901
00:32:34,289 --> 00:32:36,600
see mm so this is just a nice quick way

902
00:32:36,600 --> 00:32:38,730
this kid Pete Bochy to be password to be

903
00:32:38,730 --> 00:32:40,379
able to make sure that you know you're

904
00:32:40,379 --> 00:32:42,870
rid of this denier entire demand

905
00:32:42,870 --> 00:32:45,830
kinda Windows 2000 Fox in the pen sense

906
00:32:45,830 --> 00:32:48,309
and the guy was like oh yeah we usually

907
00:32:48,309 --> 00:32:50,600
unplug that whenever the auditors and

908
00:32:50,600 --> 00:32:53,168
testers

909
00:32:53,440 --> 00:32:57,320
what are you guys using for CD burning

910
00:32:57,320 --> 00:33:01,850
great all right last ones a little bit

911
00:33:01,850 --> 00:33:04,910
of it's a biggie especially with a lot

912
00:33:04,910 --> 00:33:07,270
of their breeches that are happening

913
00:33:07,270 --> 00:33:09,650
we've actually gotten a lot of interest

914
00:33:09,650 --> 00:33:11,510
within the healthcare space most

915
00:33:11,510 --> 00:33:15,830
recently about this but what you can do

916
00:33:15,830 --> 00:33:17,240
but this kind of requires a little bit

917
00:33:17,240 --> 00:33:18,980
of an infrastructure setup you can use

918
00:33:18,980 --> 00:33:22,910
an Amazon free instance but you can use

919
00:33:22,910 --> 00:33:24,650
a total coffee presses cents again

920
00:33:24,650 --> 00:33:27,860
written by one of my guys then

921
00:33:27,860 --> 00:33:30,680
essentially what it does is that's an

922
00:33:30,680 --> 00:33:32,510
attacker once I get to the point in that

923
00:33:32,510 --> 00:33:35,150
work where I know that I have access to

924
00:33:35,150 --> 00:33:37,040
your crown jewels whether that's you

925
00:33:37,040 --> 00:33:38,960
know patient data or if it's like

926
00:33:38,960 --> 00:33:42,410
financial bank data or you know anything

927
00:33:42,410 --> 00:33:45,890
that choose your poison what I want to

928
00:33:45,890 --> 00:33:47,180
do is I want to test your egress

929
00:33:47,180 --> 00:33:49,070
capabilities so I'm in your network I

930
00:33:49,070 --> 00:33:50,930
want to see if you can do text instead

931
00:33:50,930 --> 00:33:54,290
of data leaving your network and you

932
00:33:54,290 --> 00:33:56,300
know I might try to be you know kind of

933
00:33:56,300 --> 00:33:58,220
quiet at the beginning I'll wrap it in

934
00:33:58,220 --> 00:34:00,440
these you know SSL and you know send

935
00:34:00,440 --> 00:34:02,910
if you don't see that and I'll say okay

936
00:34:02,910 --> 00:34:05,550
well I'll get an HTTP clear-text dude an

937
00:34:05,550 --> 00:34:07,800
FTP oh you're still not seeing it more

938
00:34:07,800 --> 00:34:11,730
negative the problem but we use this

939
00:34:11,730 --> 00:34:15,570
tool for is to generate a bunch of data

940
00:34:15,570 --> 00:34:18,330
fake data either credit cards socialist

941
00:34:18,330 --> 00:34:21,420
you can generate as of last we generate

942
00:34:21,420 --> 00:34:25,050
four identities fake identities random

943
00:34:25,050 --> 00:34:28,070
user name first name last name address

944
00:34:28,070 --> 00:34:31,770
social that type of thing and so what

945
00:34:31,770 --> 00:34:33,870
you do is you set up an account of

946
00:34:33,870 --> 00:34:35,969
border box maybe like I said in Amazon

947
00:34:35,969 --> 00:34:39,300
and you set up the server piece and the

948
00:34:39,300 --> 00:34:41,610
typeof a.load you want to drop it into

949
00:34:41,610 --> 00:34:43,290
it so in this case it's going to be a

950
00:34:43,290 --> 00:34:46,469
web server excuse me and then on the

951
00:34:46,469 --> 00:34:47,880
client you know felt like you've been

952
00:34:47,880 --> 00:34:50,270
doing it all along with the windows

953
00:34:50,270 --> 00:34:52,579
powerful stuff is you can import the

954
00:34:52,579 --> 00:34:55,089
PowerShell modules for egress success

955
00:34:55,089 --> 00:34:58,339
and then specify the mode specify where

956
00:34:58,339 --> 00:35:00,470
you're going to send the data to and

957
00:35:00,470 --> 00:35:01,770
then the data

958
00:35:01,770 --> 00:35:05,580
and hopefully when she sees this is a

959
00:35:05,580 --> 00:35:07,320
screen china it's hard to see this is a

960
00:35:07,320 --> 00:35:09,000
screen shot of snore B which is a

961
00:35:09,000 --> 00:35:11,369
front-end restored you'll see an alert

962
00:35:11,369 --> 00:35:14,880
pop and you'll see the data right so

963
00:35:14,880 --> 00:35:16,650
this checks for two things right it says

964
00:35:16,650 --> 00:35:19,080
okay what am I actually getting the

965
00:35:19,080 --> 00:35:22,700
alert that I'm supposed to know okay

966
00:35:22,700 --> 00:35:27,210
stop you know to yourself or if you are

967
00:35:27,210 --> 00:35:29,160
getting the alert you have the process

968
00:35:29,160 --> 00:35:31,140
in place to actually act upon this if

969
00:35:31,140 --> 00:35:33,540
you actively see hex so happening within

970
00:35:33,540 --> 00:35:36,119
your network are you in a position to

971
00:35:36,119 --> 00:35:38,640
rapidly stop it and then eradicate

972
00:35:38,640 --> 00:35:40,110
whatever is on that box that's causing

973
00:35:40,110 --> 00:35:43,290
the in stone if no then we we have to

974
00:35:43,290 --> 00:35:45,410
have

975
00:35:47,850 --> 00:35:50,160
conclude here you know what did you

976
00:35:50,160 --> 00:35:51,900
learn and don't say nothing at least off

977
00:35:51,900 --> 00:35:54,570
my face we hope you take anything away

978
00:35:54,570 --> 00:35:56,250
from this is that you know maybe you

979
00:35:56,250 --> 00:35:57,570
know if you guys people out there there

980
00:35:57,570 --> 00:35:59,430
are oh the Blues have a pension won't be

981
00:35:59,430 --> 00:36:00,810
as scared as hyper tools or Mabel to

982
00:36:00,810 --> 00:36:02,240
start looking into the hacker community

983
00:36:02,240 --> 00:36:04,470
and start trying to pull down things at

984
00:36:04,470 --> 00:36:06,900
MIT they make your life a lot easier you

985
00:36:06,900 --> 00:36:08,640
know everything with the tactics I think

986
00:36:08,640 --> 00:36:09,930
you know like I said before or trying to

987
00:36:09,930 --> 00:36:12,030
make sure that they were quick they give

988
00:36:12,030 --> 00:36:15,360
you a lot of data and they're free so as

989
00:36:15,360 --> 00:36:16,620
you saw here a lot of these are easily

990
00:36:16,620 --> 00:36:18,780
repeatable you may not want all the over

991
00:36:18,780 --> 00:36:19,740
deal with them but you may be able to

992
00:36:19,740 --> 00:36:21,180
take a couple with me they'll strip them

993
00:36:21,180 --> 00:36:23,190
together even more like I said run it

994
00:36:23,190 --> 00:36:24,570
running in the morning we're kind of

995
00:36:24,570 --> 00:36:26,970
your morning coffee and a lot of these

996
00:36:26,970 --> 00:36:28,170
is Jason I think kind of mentioned

997
00:36:28,170 --> 00:36:30,810
before you know we're really exploiting

998
00:36:30,810 --> 00:36:32,700
anything this wasn't you know safe it

999
00:36:32,700 --> 00:36:34,320
was just you know domain weavers things

1000
00:36:34,320 --> 00:36:36,510
like that things on the network so what

1001
00:36:36,510 --> 00:36:37,650
they're really trying to do is just find

1002
00:36:37,650 --> 00:36:40,290
those misconfigurations because nowadays

1003
00:36:40,290 --> 00:36:41,880
you know the

1004
00:36:41,880 --> 00:36:43,830
external is getting smaller things like

1005
00:36:43,830 --> 00:36:45,150
that people are getting better with

1006
00:36:45,150 --> 00:36:46,320
patching you know still out there you

1007
00:36:46,320 --> 00:36:47,760
still have this you know splittable

1008
00:36:47,760 --> 00:36:49,440
conditions or you need that new new

1009
00:36:49,440 --> 00:36:51,020
grades remote kind of exploitation

1010
00:36:51,020 --> 00:36:53,610
whatever one of the times that attackers

1011
00:36:53,610 --> 00:36:54,690
are getting into the spear fishing

1012
00:36:54,690 --> 00:36:55,740
they're moving around their network

1013
00:36:55,740 --> 00:36:56,790
they're trying to find that one missed

1014
00:36:56,790 --> 00:36:57,900
configuration it's going to give them

1015
00:36:57,900 --> 00:36:59,400
that there's at the main item in it and

1016
00:36:59,400 --> 00:37:00,360
then we're just gonna walk in your

1017
00:37:00,360 --> 00:37:02,610
database or whatever it may be so our

1018
00:37:02,610 --> 00:37:03,870
goal here was to hope that these types

1019
00:37:03,870 --> 00:37:05,220
of will help kind of you know rid those

1020
00:37:05,220 --> 00:37:07,050
of your network and help find those

1021
00:37:07,050 --> 00:37:09,180
misconfigurations you want to get to the

1022
00:37:09,180 --> 00:37:11,040
point where we're not in our outbreaks

1023
00:37:11,040 --> 00:37:13,590
and as pen testers were asking the blue

1024
00:37:13,590 --> 00:37:15,170
team

1025
00:37:15,170 --> 00:37:17,190
well I didn't know that

1026
00:37:17,190 --> 00:37:19,349
simple point like a lot of this stuff is

1027
00:37:19,349 --> 00:37:21,390
such a situation anywhere it is and

1028
00:37:21,390 --> 00:37:25,790
gaining a deeper understanding of what

1029
00:37:26,130 --> 00:37:27,870
and finally like a lot of the operatives

1030
00:37:27,870 --> 00:37:30,060
to you know we have you know wall will

1031
00:37:30,060 --> 00:37:31,860
see a great IT crew but they may be like

1032
00:37:31,860 --> 00:37:33,240
three people deep into maybe this major

1033
00:37:33,240 --> 00:37:34,410
organization and they're just like we

1034
00:37:34,410 --> 00:37:36,150
just don't have time because I get

1035
00:37:36,150 --> 00:37:37,410
steady your job is hard and you have to

1036
00:37:37,410 --> 00:37:39,300
cover so much ground so we're hoping

1037
00:37:39,300 --> 00:37:40,440
that with this being freed and

1038
00:37:40,440 --> 00:37:42,180
repeatable that it maybe give you that

1039
00:37:42,180 --> 00:37:43,530
some of that leverage that you can maybe

1040
00:37:43,530 --> 00:37:44,970
take up the chain you can show your

1041
00:37:44,970 --> 00:37:46,560
bosses this you know look up you know

1042
00:37:46,560 --> 00:37:47,730
look at the holes we governor Network

1043
00:37:47,730 --> 00:37:49,020
and it's not a matter of just all I can

1044
00:37:49,020 --> 00:37:50,100
go fix them right now its we need

1045
00:37:50,100 --> 00:37:52,470
resources we need appliances detect you

1046
00:37:52,470 --> 00:37:55,230
know egress stuff things like that so so

1047
00:37:55,230 --> 00:37:57,840
I mean it let's take away from this is

1048
00:37:57,840 --> 00:38:01,560
you gather information to make immediate

1049
00:38:01,560 --> 00:38:04,320
impact you gain your political capital

1050
00:38:04,320 --> 00:38:06,110
do what you need to do

1051
00:38:06,110 --> 00:38:10,610
profit alright so again my name is Jason

1052
00:38:10,610 --> 00:38:14,510
Frank on Twitter is Jason J Frank we

1053
00:38:14,510 --> 00:38:16,880
have a whole bunch of stuff on our blog

1054
00:38:16,880 --> 00:38:19,340
Barriss group adaptive threat division

1055
00:38:19,340 --> 00:38:22,040
right there a lot of the write-ups and

1056
00:38:22,040 --> 00:38:24,050
things for how to really I we quickly

1057
00:38:24,050 --> 00:38:26,060
went over a bunch of these tactics but

1058
00:38:26,060 --> 00:38:27,500
for how to really jump into these

1059
00:38:27,500 --> 00:38:29,060
schools and extend the functionality

1060
00:38:29,060 --> 00:38:31,850
it's already not a bunch of use cases

1061
00:38:31,850 --> 00:38:33,800
are up there as well and then you can

1062
00:38:33,800 --> 00:38:35,600
actually get the tools most of our on

1063
00:38:35,600 --> 00:38:37,520
our site because a lot of our guys are

1064
00:38:37,520 --> 00:38:39,590
writing these things but then some of

1065
00:38:39,590 --> 00:38:45,550
the third-party ones as well questions

1066
00:38:50,370 --> 00:38:53,540
we're also someone

1067
00:39:03,460 --> 00:39:06,880
sure so the question was you're saying

1068
00:39:06,880 --> 00:39:08,980
that we need to isolate our high value

1069
00:39:08,980 --> 00:39:10,809
servers however a lot of these are

1070
00:39:10,809 --> 00:39:12,970
writing over SMB in Active Directory

1071
00:39:12,970 --> 00:39:15,670
calls which need to talk to the

1072
00:39:15,670 --> 00:39:17,740
endpoints anyway there's a couple

1073
00:39:17,740 --> 00:39:20,500
different ways to do that things that

1074
00:39:20,500 --> 00:39:23,220
I've seen our authentication firewalls

1075
00:39:23,220 --> 00:39:26,260
where you know in order to actually yeah

1076
00:39:26,260 --> 00:39:28,809
you can query the VC but actually in

1077
00:39:28,809 --> 00:39:30,849
order to log into the DC only certain

1078
00:39:30,849 --> 00:39:32,380
accounts are allowed to do that

1079
00:39:32,380 --> 00:39:34,359
the other thing that I've seen is

1080
00:39:34,359 --> 00:39:37,569
Microsoft and we can talk a little bit

1081
00:39:37,569 --> 00:39:39,460
offline about this but Microsoft has put

1082
00:39:39,460 --> 00:39:42,220
out this concept of a red forest and

1083
00:39:42,220 --> 00:39:45,099
essentially what this is is a it's a

1084
00:39:45,099 --> 00:39:47,829
domain set up that employees some

1085
00:39:47,829 --> 00:39:51,850
read-only type setups in that type of

1086
00:39:51,850 --> 00:39:54,670
I can't really jump into the specifics

1087
00:39:54,670 --> 00:39:56,710
but there's there's definitely ways to

1088
00:39:56,710 --> 00:39:58,990
kind of enclave off and not allow for

1089
00:39:58,990 --> 00:40:02,160
direct login access there

1090
00:40:02,160 --> 00:40:05,990
any other questions yep how is

1091
00:40:05,990 --> 00:40:08,160
configuration management like puppet and

1092
00:40:08,160 --> 00:40:10,410
chef helping prevent people from needing

1093
00:40:10,410 --> 00:40:12,569
to log on at all and have those

1094
00:40:12,569 --> 00:40:15,470
privileges on those boxes

1095
00:40:16,710 --> 00:40:18,750
if I I just probably like a little bit

1096
00:40:18,750 --> 00:40:20,460
and I think you know we talked to some

1097
00:40:20,460 --> 00:40:22,349
people that do that if I'm wrong you

1098
00:40:22,349 --> 00:40:24,240
know it's just certainly good if you can

1099
00:40:24,240 --> 00:40:26,880
get if it's fear involved and if you

1100
00:40:26,880 --> 00:40:28,349
have full control over things because

1101
00:40:28,349 --> 00:40:30,390
you're right if you can use puppet you

1102
00:40:30,390 --> 00:40:31,770
can you know everything's going through

1103
00:40:31,770 --> 00:40:33,540
that you know for a fact that every

1104
00:40:33,540 --> 00:40:34,770
machine can be configured the way you

1105
00:40:34,770 --> 00:40:37,319
want to configure it but I think a lot

1106
00:40:37,319 --> 00:40:38,700
of people they struggle at getting to

1107
00:40:38,700 --> 00:40:40,170
the point where either they have full

1108
00:40:40,170 --> 00:40:41,400
control over that they can make those

1109
00:40:41,400 --> 00:40:43,800
decisions or you know those sorts of

1110
00:40:43,800 --> 00:40:45,450
things where you know other people just

1111
00:40:45,450 --> 00:40:46,530
still need this they still need that

1112
00:40:46,530 --> 00:40:47,609
they can get everyone in the

1113
00:40:47,609 --> 00:40:48,960
organization to buy in the puppet or

1114
00:40:48,960 --> 00:40:52,290
those sorts of things so though is to be

1115
00:40:52,290 --> 00:40:53,790
multi policy of you something wrong with

1116
00:40:53,790 --> 00:40:54,930
your public configuration then you're in

1117
00:40:54,930 --> 00:40:56,280
trouble because then it's an Elena Falls

1118
00:40:56,280 --> 00:40:58,530
guy yeah what would stick to is you know

1119
00:40:58,530 --> 00:41:00,119
what make recommendations and we'll say

1120
00:41:00,119 --> 00:41:01,530
okay well if there aren't things that

1121
00:41:01,530 --> 00:41:04,680
you can do but what ends up happening

1122
00:41:04,680 --> 00:41:07,260
for a lot of the environments that

1123
00:41:07,260 --> 00:41:11,210
- is there not or not I'm healing setup

1124
00:41:11,210 --> 00:41:13,849
yes and then exist yes there are other

1125
00:41:13,849 --> 00:41:17,589
controls out there that you can put on

1126
00:41:18,260 --> 00:41:20,300
it's a function of time budget that type

1127
00:41:20,300 --> 00:41:21,680
of thing but

1128
00:41:21,680 --> 00:41:23,539
yeah I mean cupboard assembly instead

1129
00:41:23,539 --> 00:41:25,779
for

1130
00:41:26,320 --> 00:41:29,610
you know what

1131
00:41:29,940 --> 00:41:32,900
thanks for the time

