1
00:00:00,030 --> 00:00:05,009
<font color="#CCCCCC">and now we're gonna</font><font color="#E5E5E5"> have</font><font color="#CCCCCC"> a talk</font><font color="#E5E5E5"> about</font>

2
00:00:01,920 --> 00:00:08,039
<font color="#E5E5E5">Active Directory password blacklisting</font>

3
00:00:05,009 --> 00:00:18,060
<font color="#CCCCCC">and</font><font color="#E5E5E5"> let's welcome</font><font color="#CCCCCC"> Larry</font>

4
00:00:08,039 --> 00:00:19,948
<font color="#E5E5E5">Chang hey guys so today I'll be doing a</font>

5
00:00:18,060 --> 00:00:22,500
talk on something called<font color="#E5E5E5"> Active</font>

6
00:00:19,949 --> 00:00:24,810
Directory password blacklisting<font color="#E5E5E5"> and I'm</font>

7
00:00:22,500 --> 00:00:27,869
sure<font color="#E5E5E5"> most of you guys know active</font>

8
00:00:24,810 --> 00:00:31,320
directory along with open LDAP or two of

9
00:00:27,869 --> 00:00:33,510
one of<font color="#CCCCCC"> our two of the</font><font color="#E5E5E5"> most common</font>

10
00:00:31,320 --> 00:00:36,360
<font color="#CCCCCC">directory services</font><font color="#E5E5E5"> tools used today in</font>

11
00:00:33,510 --> 00:00:38,610
most corporations<font color="#E5E5E5"> and specifically I'm</font>

12
00:00:36,360 --> 00:00:41,129
going<font color="#E5E5E5"> to talk</font><font color="#CCCCCC"> about how you can employ</font>

13
00:00:38,610 --> 00:00:43,649
<font color="#E5E5E5">Active Directory password blacklisting</font>

14
00:00:41,129 --> 00:00:46,680
<font color="#E5E5E5">into your internal networks and the</font>

15
00:00:43,649 --> 00:00:49,800
benefits this will provide<font color="#E5E5E5"> so what we've</font>

16
00:00:46,680 --> 00:00:51,960
seen in the past<font color="#CCCCCC"> couple years</font><font color="#E5E5E5"> is a lot</font>

17
00:00:49,800 --> 00:00:54,239
of times corporations might try<font color="#E5E5E5"> to</font>

18
00:00:51,960 --> 00:00:57,600
enforce<font color="#E5E5E5"> more stringent password</font>

19
00:00:54,239 --> 00:00:59,608
requirements<font color="#E5E5E5"> by upping the complexity or</font>

20
00:00:57,600 --> 00:01:02,010
for example requiring that certain

21
00:00:59,609 --> 00:01:04,140
categories<font color="#CCCCCC"> are met</font><font color="#E5E5E5"> or maybe even</font>

22
00:01:02,010 --> 00:01:06,298
expiring these passwords and I'm going

23
00:01:04,140 --> 00:01:08,640
<font color="#CCCCCC">to talk about why this sometimes</font><font color="#E5E5E5"> isn't</font>

24
00:01:06,299 --> 00:01:11,430
necessarily a good<font color="#CCCCCC"> idea up to a certain</font>

25
00:01:08,640 --> 00:01:13,439
<font color="#CCCCCC">point</font><font color="#E5E5E5"> and will explicitly talk about how</font>

26
00:01:11,430 --> 00:01:15,630
Active Directory password<font color="#E5E5E5"> blacklisting</font>

27
00:01:13,439 --> 00:01:20,399
for example can solve a<font color="#E5E5E5"> lot</font><font color="#CCCCCC"> of these</font>

28
00:01:15,630 --> 00:01:23,158
problems<font color="#CCCCCC"> so just a</font><font color="#E5E5E5"> brief presentation</font>

29
00:01:20,400 --> 00:01:25,830
outline first<font color="#E5E5E5"> I'll give a brief overview</font>

30
00:01:23,159 --> 00:01:28,049
<font color="#CCCCCC">and</font><font color="#E5E5E5"> what Active Directory is for anyone</font>

31
00:01:25,830 --> 00:01:30,798
<font color="#E5E5E5">who</font><font color="#CCCCCC"> doesn't</font><font color="#E5E5E5"> know then I'll give a brief</font>

32
00:01:28,049 --> 00:01:34,110
<font color="#CCCCCC">history on</font><font color="#E5E5E5"> password requirements</font><font color="#CCCCCC"> and</font>

33
00:01:30,799 --> 00:01:35,990
from this<font color="#E5E5E5"> I'll branch towards the need</font>

34
00:01:34,110 --> 00:01:39,750
for Active Directory password

35
00:01:35,990 --> 00:01:42,630
<font color="#E5E5E5">blacklisting and then my expectation of</font>

36
00:01:39,750 --> 00:01:44,880
this is I'm gonna<font color="#E5E5E5"> show a demo and I'm</font>

37
00:01:42,630 --> 00:01:47,369
gonna show how easy it is to install

38
00:01:44,880 --> 00:01:49,259
Active Directory<font color="#CCCCCC"> on</font><font color="#E5E5E5"> to your domain</font>

39
00:01:47,369 --> 00:01:51,750
controllers<font color="#E5E5E5"> I'm gonna do a live demo for</font>

40
00:01:49,259 --> 00:01:53,700
that<font color="#E5E5E5"> and then I'm</font><font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> talk</font><font color="#CCCCCC"> about how</font>

41
00:01:51,750 --> 00:01:56,880
we installed it<font color="#CCCCCC"> here at the company I</font>

42
00:01:53,700 --> 00:01:59,250
work with which<font color="#CCCCCC"> is</font><font color="#E5E5E5"> Yelp</font><font color="#CCCCCC"> so I'll talk</font>

43
00:01:56,880 --> 00:02:01,649
<font color="#E5E5E5">about the various commercial options we</font>

44
00:01:59,250 --> 00:02:04,560
explored<font color="#E5E5E5"> and then how we kind of change</font>

45
00:02:01,649 --> 00:02:06,270
<font color="#E5E5E5">to picking an open source</font><font color="#CCCCCC"> solution and</font>

46
00:02:04,560 --> 00:02:08,580
kind of toggling that to fit our needs

47
00:02:06,270 --> 00:02:10,258
<font color="#CCCCCC">and then that's when the demo will</font>

48
00:02:08,580 --> 00:02:12,760
actually start<font color="#E5E5E5"> and I'll show you how to</font>

49
00:02:10,258 --> 00:02:15,160
install<font color="#CCCCCC"> it really quickly</font>

50
00:02:12,760 --> 00:02:17,590
and then just<font color="#E5E5E5"> some brief transition</font>

51
00:02:15,160 --> 00:02:20,890
thoughts<font color="#E5E5E5"> as someone who is primarily</font>

52
00:02:17,590 --> 00:02:23,170
<font color="#E5E5E5">UNIX based programmer</font><font color="#CCCCCC"> like some thoughts</font>

53
00:02:20,890 --> 00:02:26,260
I had moving to a more<font color="#CCCCCC"> Windows oriented</font>

54
00:02:23,170 --> 00:02:28,420
programming environment<font color="#CCCCCC"> and then I'll</font>

55
00:02:26,260 --> 00:02:30,579
talk to<font color="#E5E5E5"> you guys about how</font><font color="#CCCCCC"> you can</font>

56
00:02:28,420 --> 00:02:32,950
create<font color="#E5E5E5"> a testing framework</font><font color="#CCCCCC"> around</font><font color="#E5E5E5"> Active</font>

57
00:02:30,580 --> 00:02:34,780
Directory<font color="#CCCCCC"> password</font><font color="#E5E5E5"> blacklisting and then</font>

58
00:02:32,950 --> 00:02:36,190
I'll just do some results that<font color="#CCCCCC"> we have</font>

59
00:02:34,780 --> 00:02:40,540
here<font color="#E5E5E5"> Yelp and then some final</font>

60
00:02:36,190 --> 00:02:42,880
reflections<font color="#CCCCCC"> Before we jump into</font><font color="#E5E5E5"> this</font>

61
00:02:40,540 --> 00:02:45,310
though<font color="#E5E5E5"> I'm from Yelp Yelp is supporting</font>

62
00:02:42,880 --> 00:02:48,579
about<font color="#CCCCCC"> 50 million businesses worldwide</font><font color="#E5E5E5"> we</font>

63
00:02:45,310 --> 00:02:50,500
<font color="#CCCCCC">have like 300</font><font color="#E5E5E5"> services and we're not</font>

64
00:02:48,580 --> 00:02:52,450
<font color="#CCCCCC">actually all about restaurants we do a</font>

65
00:02:50,500 --> 00:02:56,350
lot more<font color="#CCCCCC"> than that</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> example</font><font color="#E5E5E5"> like home</font>

66
00:02:52,450 --> 00:03:01,570
services<font color="#CCCCCC"> as of 2017 was about 20% of our</font>

67
00:02:56,350 --> 00:03:04,959
<font color="#CCCCCC">revenue</font><font color="#E5E5E5"> so that's pretty cool so what</font>

68
00:03:01,570 --> 00:03:07,239
does Active Directory<font color="#E5E5E5"> so most of you</font>

69
00:03:04,959 --> 00:03:09,700
<font color="#E5E5E5">probably know Active Directory as a</font>

70
00:03:07,239 --> 00:03:11,769
database system<font color="#E5E5E5"> which it primarily is</font>

71
00:03:09,700 --> 00:03:13,988
right it's a database<font color="#E5E5E5"> system for</font>

72
00:03:11,769 --> 00:03:16,180
organization of objects<font color="#E5E5E5"> on a network</font>

73
00:03:13,989 --> 00:03:18,940
using<font color="#CCCCCC"> this hierarchical logical</font>

74
00:03:16,180 --> 00:03:21,600
structure and it's comprised of three

75
00:03:18,940 --> 00:03:24,880
logical components which are domains

76
00:03:21,600 --> 00:03:27,519
<font color="#CCCCCC">trees and forests</font><font color="#E5E5E5"> so basically have</font>

77
00:03:24,880 --> 00:03:30,430
domain<font color="#E5E5E5"> network objects right which can</font>

78
00:03:27,519 --> 00:03:33,340
<font color="#CCCCCC">be users computers whatever</font><font color="#E5E5E5"> and then</font>

79
00:03:30,430 --> 00:03:35,920
these form trees<font color="#E5E5E5"> which are all along the</font>

80
00:03:33,340 --> 00:03:38,470
same contiguous namespace and at the

81
00:03:35,920 --> 00:03:41,530
very<font color="#E5E5E5"> top</font><font color="#CCCCCC"> you have the forests which</font>

82
00:03:38,470 --> 00:03:46,450
<font color="#E5E5E5">represents trees and domains sharing the</font>

83
00:03:41,530 --> 00:03:48,280
same logical structure and in terms of a

84
00:03:46,450 --> 00:03:51,600
security perspective these forests

85
00:03:48,280 --> 00:03:56,140
represent the outermost layer<font color="#E5E5E5"> behind</font>

86
00:03:51,600 --> 00:03:58,090
<font color="#E5E5E5">different domain object groups so you</font>

87
00:03:56,140 --> 00:04:00,399
could maliciously change the<font color="#E5E5E5"> network</font>

88
00:03:58,090 --> 00:04:03,010
configurations within domains of the

89
00:04:00,400 --> 00:04:07,570
<font color="#E5E5E5">same forest but not between different</font>

90
00:04:03,010 --> 00:04:09,370
forests<font color="#CCCCCC"> and as you all might</font><font color="#E5E5E5"> know it's</font>

91
00:04:07,570 --> 00:04:10,810
also<font color="#CCCCCC"> primarily used as an identity</font>

92
00:04:09,370 --> 00:04:13,269
provider from any<font color="#E5E5E5"> single sign-on</font>

93
00:04:10,810 --> 00:04:15,070
solutions<font color="#E5E5E5"> you guys might also</font><font color="#CCCCCC"> use it for</font>

94
00:04:13,269 --> 00:04:16,780
<font color="#E5E5E5">authentication for internal network</font>

95
00:04:15,070 --> 00:04:22,300
services or whatever<font color="#E5E5E5"> corporations</font><font color="#CCCCCC"> to</font>

96
00:04:16,779 --> 00:04:24,700
utilize<font color="#E5E5E5"> and a lot of people think LDAP</font>

97
00:04:22,300 --> 00:04:26,000
and<font color="#E5E5E5"> Active Directory are two of the same</font>

98
00:04:24,700 --> 00:04:27,950
things<font color="#E5E5E5"> so act</font>

99
00:04:26,000 --> 00:04:29,960
<font color="#E5E5E5">directory is the actual database system</font>

100
00:04:27,950 --> 00:04:32,570
<font color="#E5E5E5">right and then LDAP is one of many</font>

101
00:04:29,960 --> 00:04:34,430
protocols<font color="#E5E5E5"> that</font><font color="#CCCCCC"> Active Directory</font><font color="#E5E5E5"> can use</font>

102
00:04:32,570 --> 00:04:36,830
for communication<font color="#CCCCCC"> between different</font>

103
00:04:34,430 --> 00:04:40,760
<font color="#E5E5E5">objects</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> manipulation of different</font>

104
00:04:36,830 --> 00:04:42,590
<font color="#CCCCCC">Network objects so</font><font color="#E5E5E5"> that was just a brief</font>

105
00:04:40,760 --> 00:04:44,960
<font color="#CCCCCC">overview</font><font color="#E5E5E5"> on Active Directory I'm sure</font>

106
00:04:42,590 --> 00:04:46,640
you guys<font color="#E5E5E5"> already knew</font><font color="#CCCCCC"> all this so now</font>

107
00:04:44,960 --> 00:04:49,430
let's talk about password<font color="#E5E5E5"> requirements</font>

108
00:04:46,640 --> 00:04:51,169
real quickly<font color="#E5E5E5"> so no</font><font color="#CCCCCC"> matter what</font>

109
00:04:49,430 --> 00:04:53,360
corporation you use you're probably

110
00:04:51,170 --> 00:04:55,730
<font color="#E5E5E5">gonna use some sort of requirements</font><font color="#CCCCCC"> that</font>

111
00:04:53,360 --> 00:04:58,340
look like the following<font color="#E5E5E5"> you're gonna</font>

112
00:04:55,730 --> 00:05:01,700
have between<font color="#E5E5E5"> x and y characters right</font>

113
00:04:58,340 --> 00:05:03,619
<font color="#CCCCCC">and you're gonna make sure</font><font color="#E5E5E5"> sometimes</font>

114
00:05:01,700 --> 00:05:05,719
that it doesn't<font color="#E5E5E5"> contain certain words</font>

115
00:05:03,620 --> 00:05:07,880
like<font color="#CCCCCC"> this might be the user handle or</font>

116
00:05:05,720 --> 00:05:11,450
some PII data<font color="#E5E5E5"> related</font><font color="#CCCCCC"> to your employee</font>

117
00:05:07,880 --> 00:05:13,700
like first<font color="#E5E5E5"> name or last</font><font color="#CCCCCC"> name and then</font>

118
00:05:11,450 --> 00:05:15,680
maybe inclusion of some<font color="#CCCCCC"> certain</font>

119
00:05:13,700 --> 00:05:17,719
categories you might want<font color="#E5E5E5"> some</font><font color="#CCCCCC"> uppercase</font>

120
00:05:15,680 --> 00:05:22,130
<font color="#CCCCCC">lowercase</font><font color="#E5E5E5"> numbers non alphanumeric</font>

121
00:05:17,720 --> 00:05:25,220
digits and<font color="#E5E5E5"> a lot</font><font color="#CCCCCC"> of times and</font><font color="#E5E5E5"> this</font><font color="#CCCCCC"> is</font>

122
00:05:22,130 --> 00:05:27,590
<font color="#E5E5E5">recommended by the NIS</font><font color="#CCCCCC"> T before</font><font color="#E5E5E5"> which</font><font color="#CCCCCC"> is</font>

123
00:05:25,220 --> 00:05:30,710
expiring your passwords<font color="#E5E5E5"> after a certain</font>

124
00:05:27,590 --> 00:05:34,390
<font color="#E5E5E5">time</font><font color="#CCCCCC"> so I just</font><font color="#E5E5E5"> wanted to talk about this</font>

125
00:05:30,710 --> 00:05:38,780
briefly<font color="#CCCCCC"> and what I wanted</font><font color="#E5E5E5"> to say is</font>

126
00:05:34,390 --> 00:05:40,909
sometimes<font color="#E5E5E5"> this trend of upping the</font>

127
00:05:38,780 --> 00:05:42,739
complexity by<font color="#CCCCCC"> toggling these</font>

128
00:05:40,910 --> 00:05:45,830
requirements<font color="#E5E5E5"> doesn't necessarily make</font>

129
00:05:42,740 --> 00:05:48,680
<font color="#E5E5E5">sense and isn't necessarily efficient so</font>

130
00:05:45,830 --> 00:05:50,479
of course<font color="#E5E5E5"> enforcing a certain minimum</font>

131
00:05:48,680 --> 00:05:52,340
password requirement<font color="#E5E5E5"> will always make</font>

132
00:05:50,479 --> 00:05:54,440
sense<font color="#E5E5E5"> because otherwise you can't</font>

133
00:05:52,340 --> 00:05:56,539
<font color="#E5E5E5">prevent against brute force or</font>

134
00:05:54,440 --> 00:05:59,750
dictionary based attacks on very<font color="#E5E5E5"> simple</font>

135
00:05:56,540 --> 00:06:02,510
common passwords and of course it also

136
00:05:59,750 --> 00:06:04,880
makes<font color="#E5E5E5"> sense</font><font color="#CCCCCC"> to always allow</font><font color="#E5E5E5"> your</font>

137
00:06:02,510 --> 00:06:07,310
employees<font color="#CCCCCC"> or users</font><font color="#E5E5E5"> to make their</font>

138
00:06:04,880 --> 00:06:09,680
passwords<font color="#E5E5E5"> as long as they want up to</font><font color="#CCCCCC"> a</font>

139
00:06:07,310 --> 00:06:12,110
certain<font color="#E5E5E5"> point because</font><font color="#CCCCCC"> it's all</font><font color="#E5E5E5"> gonna be</font>

140
00:06:09,680 --> 00:06:15,290
you know hashed and<font color="#E5E5E5"> salted in your</font>

141
00:06:12,110 --> 00:06:18,470
databases later however<font color="#CCCCCC"> what does not</font>

142
00:06:15,290 --> 00:06:22,370
<font color="#E5E5E5">necessarily make sense is ensuring a</font>

143
00:06:18,470 --> 00:06:25,940
minimum password length<font color="#CCCCCC"> that is above</font>

144
00:06:22,370 --> 00:06:28,610
<font color="#E5E5E5">something like</font><font color="#CCCCCC"> 12 to 14 and the reason</font>

145
00:06:25,940 --> 00:06:31,640
behind this<font color="#CCCCCC"> is it actually makes it</font>

146
00:06:28,610 --> 00:06:33,740
cumbersome<font color="#CCCCCC"> for the user the same applies</font>

147
00:06:31,640 --> 00:06:36,650
<font color="#CCCCCC">to inclusion of too many categories</font>

148
00:06:33,740 --> 00:06:39,580
<font color="#CCCCCC">you're</font><font color="#E5E5E5"> basically increasing the</font><font color="#CCCCCC"> entropy</font>

149
00:06:36,650 --> 00:06:42,128
<font color="#E5E5E5">to the point that makes it very</font>

150
00:06:39,580 --> 00:06:44,409
for users to<font color="#E5E5E5"> remember their passwords I</font>

151
00:06:42,129 --> 00:06:46,720
mean we all know<font color="#E5E5E5"> those various obscure</font>

152
00:06:44,409 --> 00:06:48,580
bank accounts where<font color="#CCCCCC"> they require like</font>

153
00:06:46,720 --> 00:06:50,740
three or four<font color="#CCCCCC"> more different categories</font>

154
00:06:48,580 --> 00:06:52,508
and<font color="#CCCCCC"> we don't even remember them</font><font color="#E5E5E5"> so the</font>

155
00:06:50,740 --> 00:06:55,750
point here<font color="#E5E5E5"> is it's not necessarily</font>

156
00:06:52,509 --> 00:06:58,360
efficient<font color="#E5E5E5"> and this also applies for</font>

157
00:06:55,750 --> 00:07:00,759
<font color="#E5E5E5">password</font><font color="#CCCCCC"> explorations</font><font color="#E5E5E5"> so the</font><font color="#CCCCCC"> NIS t isn't</font>

158
00:06:58,360 --> 00:07:02,349
<font color="#E5E5E5">necessarily recommending this either it</font>

159
00:07:00,759 --> 00:07:04,599
only<font color="#E5E5E5"> really makes sense especially</font>

160
00:07:02,349 --> 00:07:06,550
assuming that you have<font color="#E5E5E5"> two FA configured</font>

161
00:07:04,599 --> 00:07:08,560
for<font color="#E5E5E5"> all your devices already</font><font color="#CCCCCC"> it only</font>

162
00:07:06,550 --> 00:07:11,889
really makes sense to<font color="#E5E5E5"> expire passwords</font>

163
00:07:08,560 --> 00:07:14,680
<font color="#E5E5E5">if they've been deemed to be compromised</font>

164
00:07:11,889 --> 00:07:16,719
<font color="#E5E5E5">or susceptible to a breach or seen in</font>

165
00:07:14,680 --> 00:07:19,060
some sort<font color="#E5E5E5"> of dump and I'm</font><font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> explain</font>

166
00:07:16,719 --> 00:07:22,300
<font color="#E5E5E5">exactly what I mean in a second but this</font>

167
00:07:19,060 --> 00:07:25,120
all centers<font color="#CCCCCC"> around the idea that humans</font>

168
00:07:22,300 --> 00:07:27,370
are very<font color="#E5E5E5"> much predictable right if Bob</font>

169
00:07:25,120 --> 00:07:29,469
uses<font color="#CCCCCC"> a very stupid password like</font>

170
00:07:27,370 --> 00:07:31,629
password and then suddenly the

171
00:07:29,469 --> 00:07:33,159
requirements are changed<font color="#CCCCCC"> to ensure you</font>

172
00:07:31,629 --> 00:07:34,990
also have to<font color="#E5E5E5"> have a number there's a</font>

173
00:07:33,159 --> 00:07:36,659
very high chance Bob will use password

174
00:07:34,990 --> 00:07:41,050
<font color="#E5E5E5">one is the password</font>

175
00:07:36,659 --> 00:07:43,060
so to summarize why should we integrate

176
00:07:41,050 --> 00:07:44,830
password<font color="#E5E5E5"> blacklist in an ad and what was</font>

177
00:07:43,060 --> 00:07:48,840
the point I was<font color="#CCCCCC"> trying to make from this</font>

178
00:07:44,830 --> 00:07:52,389
so I have three main<font color="#CCCCCC"> points the first</font><font color="#E5E5E5"> is</font>

179
00:07:48,840 --> 00:07:54,729
complexity<font color="#E5E5E5"> doesn't necessarily override</font>

180
00:07:52,389 --> 00:07:56,979
predictability<font color="#CCCCCC"> just because your</font>

181
00:07:54,729 --> 00:07:59,830
passwords are complex<font color="#E5E5E5"> doesn't mean</font>

182
00:07:56,979 --> 00:08:02,258
they're not very commonly used<font color="#E5E5E5"> then the</font>

183
00:07:59,830 --> 00:08:04,690
second is complexity doesn't<font color="#E5E5E5"> override</font>

184
00:08:02,259 --> 00:08:07,360
<font color="#CCCCCC">for each ability and I made up the word</font>

185
00:08:04,690 --> 00:08:09,250
<font color="#CCCCCC">breech ability so it sounds nice but</font><font color="#E5E5E5"> you</font>

186
00:08:07,360 --> 00:08:12,009
get the point

187
00:08:09,250 --> 00:08:14,050
so basically<font color="#CCCCCC"> leak passwords will always</font>

188
00:08:12,009 --> 00:08:15,759
<font color="#E5E5E5">remain a standard attacking vector and</font>

189
00:08:14,050 --> 00:08:18,159
we always<font color="#E5E5E5"> want to prevent against</font>

190
00:08:15,759 --> 00:08:19,659
against this<font color="#E5E5E5"> and this brings me</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> the</font>

191
00:08:18,159 --> 00:08:21,550
<font color="#CCCCCC">last point</font><font color="#E5E5E5"> right which is complexity</font>

192
00:08:19,659 --> 00:08:24,370
<font color="#E5E5E5">doesn't protect against dictionary</font>

193
00:08:21,550 --> 00:08:26,889
attacks<font color="#E5E5E5"> nowadays one of the most common</font>

194
00:08:24,370 --> 00:08:29,229
attack vectors are these<font color="#CCCCCC"> leak password</font>

195
00:08:26,889 --> 00:08:32,380
dumps<font color="#CCCCCC"> that we use dictionary attacks</font>

196
00:08:29,229 --> 00:08:34,208
against for example<font color="#E5E5E5"> LinkedIn in 2008 or</font>

197
00:08:32,380 --> 00:08:36,219
2012 they got hacked by a bunch of

198
00:08:34,208 --> 00:08:38,500
Russians<font color="#E5E5E5"> and this is what you call</font>

199
00:08:36,219 --> 00:08:40,599
password sprain there is a very good

200
00:08:38,500 --> 00:08:43,000
chance that<font color="#E5E5E5"> those credentials</font><font color="#CCCCCC"> utilized</font>

201
00:08:40,599 --> 00:08:45,459
by those LinkedIn employees were<font color="#CCCCCC"> also</font>

202
00:08:43,000 --> 00:08:48,220
being<font color="#E5E5E5"> used for</font><font color="#CCCCCC"> other different</font><font color="#E5E5E5"> websites</font>

203
00:08:45,459 --> 00:08:50,109
or organizations<font color="#CCCCCC"> right passwords brain</font>

204
00:08:48,220 --> 00:08:53,090
is the term to reflect this and it's

205
00:08:50,110 --> 00:08:55,160
extremely common nowadays

206
00:08:53,090 --> 00:08:58,610
so this is where Active Directory

207
00:08:55,160 --> 00:09:01,310
password blacklisting comes in and given

208
00:08:58,610 --> 00:09:04,370
how popular it's used as a directory

209
00:09:01,310 --> 00:09:06,949
services tool<font color="#E5E5E5"> it makes sense to all</font>

210
00:09:04,370 --> 00:09:08,570
<font color="#E5E5E5">these just have this installed in</font>

211
00:09:06,950 --> 00:09:10,970
whatever corporate systems you're

212
00:09:08,570 --> 00:09:13,130
working<font color="#E5E5E5"> on because it's incredibly</font><font color="#CCCCCC"> easy</font>

213
00:09:10,970 --> 00:09:15,740
<font color="#E5E5E5">and it just gives you such a high</font>

214
00:09:13,130 --> 00:09:24,140
<font color="#E5E5E5">defense layer against these targeted</font>

215
00:09:15,740 --> 00:09:25,700
attacks so Yelp so<font color="#E5E5E5"> we knew we wanted to</font>

216
00:09:24,140 --> 00:09:28,220
<font color="#E5E5E5">integrate some sort of Active Directory</font>

217
00:09:25,700 --> 00:09:32,150
password<font color="#CCCCCC"> blacklisting mechanism</font><font color="#E5E5E5"> into our</font>

218
00:09:28,220 --> 00:09:34,130
services<font color="#CCCCCC"> so at</font><font color="#E5E5E5"> first</font><font color="#CCCCCC"> I was tested like</font>

219
00:09:32,150 --> 00:09:37,069
figuring out what<font color="#E5E5E5"> kind of commercial</font>

220
00:09:34,130 --> 00:09:38,930
option we might want to look<font color="#E5E5E5"> at but</font>

221
00:09:37,070 --> 00:09:41,029
<font color="#E5E5E5">ultimately we decided against this and</font>

222
00:09:38,930 --> 00:09:43,939
this might<font color="#CCCCCC"> not necessarily be the best</font>

223
00:09:41,029 --> 00:09:46,880
<font color="#E5E5E5">decision</font><font color="#CCCCCC"> maybe you might disagree but</font>

224
00:09:43,940 --> 00:09:49,640
for us the reason was there was a lack

225
00:09:46,880 --> 00:09:52,670
of<font color="#E5E5E5"> transparency</font><font color="#CCCCCC"> so I'm gonna go with</font><font color="#E5E5E5"> it</font>

226
00:09:49,640 --> 00:09:55,600
<font color="#E5E5E5">exactly how this works later but the</font>

227
00:09:52,670 --> 00:09:58,599
basic idea is this<font color="#CCCCCC"> is a very</font><font color="#E5E5E5"> sensitive</font>

228
00:09:55,600 --> 00:10:02,300
service and we're dealing<font color="#CCCCCC"> with right</font><font color="#E5E5E5"> and</font>

229
00:09:58,600 --> 00:10:04,700
basically<font color="#E5E5E5"> this process that does this</font>

230
00:10:02,300 --> 00:10:06,949
authentication<font color="#E5E5E5"> is called the local</font>

231
00:10:04,700 --> 00:10:09,650
<font color="#E5E5E5">security</font><font color="#CCCCCC"> authority for Windows Active</font>

232
00:10:06,950 --> 00:10:14,990
Directory<font color="#E5E5E5"> and in this process</font><font color="#CCCCCC"> called</font><font color="#E5E5E5"> the</font>

233
00:10:09,650 --> 00:10:17,780
LS a SS any<font color="#CCCCCC"> uncaught exception if there</font>

234
00:10:14,990 --> 00:10:19,670
is one would cause a crash and yield<font color="#E5E5E5"> at</font>

235
00:10:17,780 --> 00:10:22,010
blue screen of death we<font color="#CCCCCC"> all hate right</font>

236
00:10:19,670 --> 00:10:24,800
so we really wanted this to<font color="#CCCCCC"> be as</font>

237
00:10:22,010 --> 00:10:27,380
transparent as possible<font color="#CCCCCC"> and finally a</font>

238
00:10:24,800 --> 00:10:30,079
lesser point is just<font color="#CCCCCC"> that we thought</font><font color="#E5E5E5"> it</font>

239
00:10:27,380 --> 00:10:32,300
might increase<font color="#E5E5E5"> yelps attack service area</font>

240
00:10:30,080 --> 00:10:36,920
if<font color="#CCCCCC"> we relied on this single</font><font color="#E5E5E5"> vendor</font>

241
00:10:32,300 --> 00:10:40,430
solution so given this we<font color="#E5E5E5"> did we decided</font>

242
00:10:36,920 --> 00:10:41,900
<font color="#E5E5E5">okay we should install a password filter</font>

243
00:10:40,430 --> 00:10:43,939
how the hell do we do<font color="#E5E5E5"> that and I was</font>

244
00:10:41,900 --> 00:10:45,920
<font color="#CCCCCC">actually tested</font><font color="#E5E5E5"> this project and I had</font>

245
00:10:43,940 --> 00:10:48,800
no<font color="#E5E5E5"> idea</font><font color="#CCCCCC"> like how</font><font color="#E5E5E5"> Windows programming</font>

246
00:10:45,920 --> 00:10:51,050
<font color="#E5E5E5">works or what domain controllers were so</font>

247
00:10:48,800 --> 00:10:52,839
I had to do a lot<font color="#CCCCCC"> of research</font><font color="#E5E5E5"> but it</font>

248
00:10:51,050 --> 00:10:55,670
turned out it's<font color="#E5E5E5"> pretty simple</font><font color="#CCCCCC"> you</font>

249
00:10:52,839 --> 00:10:58,190
<font color="#CCCCCC">basically</font><font color="#E5E5E5"> have this one interface called</font>

250
00:10:55,670 --> 00:10:59,719
a password filter<font color="#CCCCCC"> a</font><font color="#E5E5E5"> DLL and DLL stands</font>

251
00:10:58,190 --> 00:11:01,490
for<font color="#CCCCCC"> dynamic linking library and I'll</font>

252
00:10:59,720 --> 00:11:03,230
explain<font color="#E5E5E5"> what that is</font><font color="#CCCCCC"> in a bit but</font>

253
00:11:01,490 --> 00:11:04,730
<font color="#E5E5E5">basically it's</font><font color="#CCCCCC"> just this one interface</font>

254
00:11:03,230 --> 00:11:06,499
you have<font color="#E5E5E5"> to put it</font><font color="#CCCCCC"> into</font><font color="#E5E5E5"> your windows</font>

255
00:11:04,730 --> 00:11:09,189
system32 folder

256
00:11:06,499 --> 00:11:11,539
and it's comprised<font color="#E5E5E5"> of three functions</font>

257
00:11:09,189 --> 00:11:15,799
<font color="#CCCCCC">one is</font><font color="#E5E5E5"> this thing called initialize</font>

258
00:11:11,539 --> 00:11:18,889
change notify so when your computer<font color="#E5E5E5"> or</font>

259
00:11:15,799 --> 00:11:20,899
domain controller<font color="#E5E5E5"> boots up this function</font>

260
00:11:18,889 --> 00:11:23,089
<font color="#E5E5E5">will be</font><font color="#CCCCCC"> called to</font><font color="#E5E5E5"> indicate whether or</font>

261
00:11:20,899 --> 00:11:25,069
<font color="#E5E5E5">not your</font><font color="#CCCCCC"> password filter DLL is loaded</font>

262
00:11:23,089 --> 00:11:28,189
and this one isn't it's important you

263
00:11:25,069 --> 00:11:31,728
can just be by<font color="#CCCCCC"> default return true</font><font color="#E5E5E5"> this</font>

264
00:11:28,189 --> 00:11:34,699
is called<font color="#E5E5E5"> on your DLL to indicate</font>

265
00:11:31,729 --> 00:11:36,409
whether a password authentication<font color="#E5E5E5"> was</font>

266
00:11:34,699 --> 00:11:38,809
actually successful<font color="#CCCCCC"> and the password</font>

267
00:11:36,409 --> 00:11:40,819
changed<font color="#E5E5E5"> again this is only if you do</font>

268
00:11:38,809 --> 00:11:42,978
stuff post authentication so it's not as

269
00:11:40,819 --> 00:11:45,139
important it's only<font color="#CCCCCC"> maybe this last</font>

270
00:11:42,979 --> 00:11:46,909
function<font color="#CCCCCC"> you have</font><font color="#E5E5E5"> to implement and this</font>

271
00:11:45,139 --> 00:11:48,559
will<font color="#E5E5E5"> make such a huge difference</font><font color="#CCCCCC"> in</font>

272
00:11:46,909 --> 00:11:50,599
<font color="#E5E5E5">whatever corporate environments you're</font>

273
00:11:48,559 --> 00:11:52,129
working on<font color="#E5E5E5"> you just have to</font><font color="#CCCCCC"> implement</font>

274
00:11:50,599 --> 00:11:54,469
this function to perform<font color="#E5E5E5"> your password</font>

275
00:11:52,129 --> 00:11:56,299
validation and install<font color="#CCCCCC"> into your local</font>

276
00:11:54,469 --> 00:12:00,469
security<font color="#CCCCCC"> Authority or put it in its</font>

277
00:11:56,299 --> 00:12:02,269
registry<font color="#E5E5E5"> and then you're done and I'm</font>

278
00:12:00,469 --> 00:12:06,679
<font color="#CCCCCC">gonna talk to you</font><font color="#E5E5E5"> exactly about</font><font color="#CCCCCC"> how to</font>

279
00:12:02,269 --> 00:12:08,539
do all this<font color="#E5E5E5"> so just</font><font color="#CCCCCC"> any</font><font color="#E5E5E5"> more details</font>

280
00:12:06,679 --> 00:12:11,899
this<font color="#E5E5E5"> is basically how</font><font color="#CCCCCC"> the authentication</font>

281
00:12:08,539 --> 00:12:14,299
<font color="#E5E5E5">flow works the client makes</font><font color="#CCCCCC"> a password</font>

282
00:12:11,899 --> 00:12:16,489
change<font color="#E5E5E5"> request this goes to the local</font>

283
00:12:14,299 --> 00:12:18,348
<font color="#E5E5E5">security</font><font color="#CCCCCC"> authority which</font><font color="#E5E5E5"> is the</font><font color="#CCCCCC"> Windows</font>

284
00:12:16,489 --> 00:12:19,549
service responsible for all these<font color="#E5E5E5"> types</font>

285
00:12:18,349 --> 00:12:22,509
of authentications and author

286
00:12:19,549 --> 00:12:26,119
authorizations<font color="#E5E5E5"> and then for each</font>

287
00:12:22,509 --> 00:12:28,099
registered password filter DLL of the

288
00:12:26,119 --> 00:12:29,979
local security<font color="#E5E5E5"> authority it will call</font>

289
00:12:28,099 --> 00:12:31,970
that password filter function and

290
00:12:29,979 --> 00:12:35,089
<font color="#CCCCCC">depending</font><font color="#E5E5E5"> it on whether or not that</font>

291
00:12:31,970 --> 00:12:37,249
<font color="#CCCCCC">returns true</font><font color="#E5E5E5"> or false the password will</font>

292
00:12:35,089 --> 00:12:40,339
<font color="#CCCCCC">be committed to the s</font><font color="#E5E5E5"> a.m. or</font><font color="#CCCCCC"> Security</font>

293
00:12:37,249 --> 00:12:43,009
<font color="#CCCCCC">Council manager assuming</font><font color="#E5E5E5"> that it was</font>

294
00:12:40,339 --> 00:12:44,959
<font color="#E5E5E5">approved by all registered</font><font color="#CCCCCC"> dll's so you</font>

295
00:12:43,009 --> 00:12:46,699
can actually register<font color="#E5E5E5"> more than one DLL</font>

296
00:12:44,959 --> 00:12:48,439
<font color="#E5E5E5">which is really</font><font color="#CCCCCC"> interesting if you have</font>

297
00:12:46,699 --> 00:12:50,089
<font color="#E5E5E5">various different</font><font color="#CCCCCC"> types of pasture based</font>

298
00:12:48,439 --> 00:12:53,059
authentication mechanisms you want to

299
00:12:50,089 --> 00:12:55,279
employ<font color="#E5E5E5"> and the security manager this</font><font color="#CCCCCC"> is</font>

300
00:12:53,059 --> 00:12:58,039
just<font color="#CCCCCC"> Windows</font><font color="#E5E5E5"> internal database for</font>

301
00:12:55,279 --> 00:13:01,029
storing all<font color="#E5E5E5"> these hash credentials</font><font color="#CCCCCC"> it</font>

302
00:12:58,039 --> 00:13:03,409
<font color="#E5E5E5">uses a combination of ntlm and LM hashes</font>

303
00:13:01,029 --> 00:13:07,189
<font color="#CCCCCC">the details of that</font><font color="#E5E5E5"> I'm not as familiar</font>

304
00:13:03,409 --> 00:13:09,649
with<font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> sure some</font><font color="#CCCCCC"> of you are</font><font color="#E5E5E5"> though</font><font color="#CCCCCC"> but</font>

305
00:13:07,189 --> 00:13:11,358
yeah at the<font color="#CCCCCC"> end finally these changes</font>

306
00:13:09,649 --> 00:13:14,419
are synced to<font color="#E5E5E5"> the actual DLL via</font>

307
00:13:11,359 --> 00:13:15,949
password change notify and the

308
00:13:14,419 --> 00:13:18,840
<font color="#E5E5E5">authentication is done so that's how the</font>

309
00:13:15,949 --> 00:13:23,099
flow really<font color="#E5E5E5"> looks like</font>

310
00:13:18,840 --> 00:13:25,680
so knowing this we did<font color="#E5E5E5"> more research and</font>

311
00:13:23,100 --> 00:13:27,750
we explored various<font color="#CCCCCC"> open-source</font>

312
00:13:25,680 --> 00:13:29,400
solutions<font color="#E5E5E5"> and we found one</font><font color="#CCCCCC"> that really</font>

313
00:13:27,750 --> 00:13:31,800
fitted our needs best which is<font color="#E5E5E5"> called</font>

314
00:13:29,400 --> 00:13:33,630
open<font color="#E5E5E5"> password filter and the links are</font>

315
00:13:31,800 --> 00:13:37,829
<font color="#CCCCCC">here at the bottom if you want to take a</font>

316
00:13:33,630 --> 00:13:40,110
picture<font color="#CCCCCC"> it was actually a of this</font>

317
00:13:37,830 --> 00:13:42,510
former<font color="#E5E5E5"> open-source solution that we</font>

318
00:13:40,110 --> 00:13:46,770
decided<font color="#E5E5E5"> to utilize and the reason was</font>

319
00:13:42,510 --> 00:13:48,930
<font color="#CCCCCC">well 3 main points</font><font color="#E5E5E5"> first it was super</font>

320
00:13:46,770 --> 00:13:50,579
<font color="#CCCCCC">easy to configure</font><font color="#E5E5E5"> it provided</font>

321
00:13:48,930 --> 00:13:52,170
configurable operability with a sequel

322
00:13:50,580 --> 00:13:53,880
database so all you had to<font color="#E5E5E5"> do is you</font>

323
00:13:52,170 --> 00:13:55,349
know pipe a bunch of hashes into your

324
00:13:53,880 --> 00:13:59,250
<font color="#CCCCCC">Ellyn provision database</font><font color="#E5E5E5"> within your</font>

325
00:13:55,350 --> 00:14:02,430
network<font color="#CCCCCC"> and then just connect it with</font>

326
00:13:59,250 --> 00:14:04,560
that<font color="#E5E5E5"> and then also what's very important</font>

327
00:14:02,430 --> 00:14:06,719
<font color="#E5E5E5">is it incorporated the service-oriented</font>

328
00:14:04,560 --> 00:14:08,849
architecture<font color="#E5E5E5"> so what does that mean</font>

329
00:14:06,720 --> 00:14:10,650
so remember when I said the DLL is

330
00:14:08,850 --> 00:14:12,210
extremely sensitive<font color="#E5E5E5"> and I dealt</font><font color="#CCCCCC"> with</font>

331
00:14:10,650 --> 00:14:14,670
this initially thinking I could do the

332
00:14:12,210 --> 00:14:15,750
<font color="#E5E5E5">DLL on my own any crash there you'll get</font>

333
00:14:14,670 --> 00:14:18,750
<font color="#E5E5E5">a blue screen of death and it's</font>

334
00:14:15,750 --> 00:14:21,180
<font color="#E5E5E5">extremely frustrating</font><font color="#CCCCCC"> so instead if</font><font color="#E5E5E5"> you</font>

335
00:14:18,750 --> 00:14:24,030
have the DLL<font color="#E5E5E5"> call another registered</font>

336
00:14:21,180 --> 00:14:27,180
service<font color="#E5E5E5"> you can execute this fail open</font>

337
00:14:24,030 --> 00:14:29,910
<font color="#E5E5E5">design such that</font><font color="#CCCCCC"> any crash on your</font>

338
00:14:27,180 --> 00:14:32,040
service because by default<font color="#E5E5E5"> return true</font>

339
00:14:29,910 --> 00:14:33,810
and<font color="#E5E5E5"> you'll never have any issues</font><font color="#CCCCCC"> with</font>

340
00:14:32,040 --> 00:14:36,150
<font color="#CCCCCC">the blue screen</font><font color="#E5E5E5"> of death on your DLL</font>

341
00:14:33,810 --> 00:14:39,750
itself<font color="#E5E5E5"> and I'll show you how that</font>

342
00:14:36,150 --> 00:14:42,089
<font color="#E5E5E5">architecture looks like so basically</font>

343
00:14:39,750 --> 00:14:44,250
it's very<font color="#E5E5E5"> much</font><font color="#CCCCCC"> like the architecture</font>

344
00:14:42,089 --> 00:14:46,320
diagram you saw earlier<font color="#CCCCCC"> you have your</font>

345
00:14:44,250 --> 00:14:48,000
<font color="#E5E5E5">local security</font><font color="#CCCCCC"> authority a client</font>

346
00:14:46,320 --> 00:14:50,220
<font color="#CCCCCC">password</font><font color="#E5E5E5"> request</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> sent to this and</font>

347
00:14:48,000 --> 00:14:53,490
then that's calling the password filter

348
00:14:50,220 --> 00:14:55,290
on every<font color="#E5E5E5"> registered DLL this instead of</font>

349
00:14:53,490 --> 00:14:57,750
directly authenticating through the DLL

350
00:14:55,290 --> 00:15:00,270
code you<font color="#E5E5E5"> actually call through your</font>

351
00:14:57,750 --> 00:15:02,190
loopback interface<font color="#E5E5E5"> this thing called</font><font color="#CCCCCC"> opf</font>

352
00:15:00,270 --> 00:15:04,199
service<font color="#E5E5E5"> so the open source solution is</font>

353
00:15:02,190 --> 00:15:07,050
<font color="#E5E5E5">called open password filter so</font><font color="#CCCCCC"> opf</font>

354
00:15:04,200 --> 00:15:08,820
stands for open password filter<font color="#E5E5E5"> so you</font>

355
00:15:07,050 --> 00:15:11,250
<font color="#E5E5E5">call this service and then that does</font>

356
00:15:08,820 --> 00:15:12,870
authentication<font color="#E5E5E5"> for you and of course</font>

357
00:15:11,250 --> 00:15:15,270
it'll do this authentication<font color="#E5E5E5"> using</font>

358
00:15:12,870 --> 00:15:18,630
<font color="#E5E5E5">whatever registered sequel server you've</font>

359
00:15:15,270 --> 00:15:20,069
had provided<font color="#E5E5E5"> and then given success or</font>

360
00:15:18,630 --> 00:15:22,800
failure this<font color="#E5E5E5"> will then be committed to</font>

361
00:15:20,070 --> 00:15:25,920
<font color="#CCCCCC">your security accounts manager</font><font color="#E5E5E5"> so that's</font>

362
00:15:22,800 --> 00:15:28,410
pretty<font color="#E5E5E5"> much how the flow looks like and</font>

363
00:15:25,920 --> 00:15:30,990
now<font color="#CCCCCC"> I'm going to show</font><font color="#E5E5E5"> you exactly how</font>

364
00:15:28,410 --> 00:15:32,520
<font color="#E5E5E5">you can</font><font color="#CCCCCC"> install one on whatever</font><font color="#E5E5E5"> domain</font>

365
00:15:30,990 --> 00:15:33,660
controller using

366
00:15:32,520 --> 00:15:35,460
I don't know if I mentioned<font color="#CCCCCC"> this earlier</font>

367
00:15:33,660 --> 00:15:38,730
if you don't know Active Directory<font color="#CCCCCC"> all</font>

368
00:15:35,460 --> 00:15:41,580
the authorization and authentication is

369
00:15:38,730 --> 00:15:43,350
done<font color="#CCCCCC"> on the actual domain controllers</font><font color="#E5E5E5"> so</font>

370
00:15:41,580 --> 00:15:45,480
you'll have<font color="#E5E5E5"> to</font><font color="#CCCCCC"> install these dll's</font><font color="#E5E5E5"> on</font>

371
00:15:43,350 --> 00:15:49,230
every registered domain controller on

372
00:15:45,480 --> 00:15:51,120
your network so how do you install<font color="#E5E5E5"> this</font>

373
00:15:49,230 --> 00:15:53,130
well it basically<font color="#E5E5E5"> boils down to these</font>

374
00:15:51,120 --> 00:15:55,020
steps<font color="#E5E5E5"> and on the right I've highlighted</font>

375
00:15:53,130 --> 00:15:57,240
some<font color="#E5E5E5"> like</font><font color="#CCCCCC"> windows commands you can use</font>

376
00:15:55,020 --> 00:15:58,410
to help assist<font color="#E5E5E5"> you with this so first</font>

377
00:15:57,240 --> 00:16:00,360
<font color="#E5E5E5">you want to configure your domain</font>

378
00:15:58,410 --> 00:16:02,040
<font color="#CCCCCC">controllers and I'd suggest just</font>

379
00:16:00,360 --> 00:16:04,080
starting with the standalone domain<font color="#E5E5E5"> you</font>

380
00:16:02,040 --> 00:16:06,900
know just run a Windows<font color="#E5E5E5"> Server 2008 r2</font>

381
00:16:04,080 --> 00:16:08,460
instance or something and install your

382
00:16:06,900 --> 00:16:10,770
own standalone domain controller<font color="#E5E5E5"> and</font>

383
00:16:08,460 --> 00:16:13,590
<font color="#E5E5E5">make sure</font><font color="#CCCCCC"> Active Directory domain</font>

384
00:16:10,770 --> 00:16:14,939
services is installed in<font color="#CCCCCC"> everyone next</font>

385
00:16:13,590 --> 00:16:17,010
<font color="#CCCCCC">thing you want to do is set up local</font>

386
00:16:14,940 --> 00:16:19,650
<font color="#E5E5E5">group policies this is for testing</font>

387
00:16:17,010 --> 00:16:21,660
<font color="#E5E5E5">purposes you want very bare minimal</font>

388
00:16:19,650 --> 00:16:24,660
<font color="#CCCCCC">password requirements</font><font color="#E5E5E5"> just for testing</font>

389
00:16:21,660 --> 00:16:26,400
purposes so stuff like password<font color="#E5E5E5"> will be</font>

390
00:16:24,660 --> 00:16:28,050
installed<font color="#E5E5E5"> into your database and you can</font>

391
00:16:26,400 --> 00:16:30,090
<font color="#E5E5E5">make sure that's being blacklisted as</font>

392
00:16:28,050 --> 00:16:33,719
appropriate this is just<font color="#CCCCCC"> a</font><font color="#E5E5E5"> convenience</font>

393
00:16:30,090 --> 00:16:36,180
thing then finally load your common

394
00:16:33,720 --> 00:16:37,950
password hashes nowadays I<font color="#CCCCCC"> think the</font>

395
00:16:36,180 --> 00:16:39,780
most<font color="#E5E5E5"> common one is having been</font><font color="#CCCCCC"> poned</font>

396
00:16:37,950 --> 00:16:40,530
<font color="#CCCCCC">comm</font><font color="#E5E5E5"> and most of these hashes are all</font>

397
00:16:39,780 --> 00:16:42,209
sha-1

398
00:16:40,530 --> 00:16:43,610
so you can<font color="#E5E5E5"> just download them there and</font>

399
00:16:42,210 --> 00:16:47,310
then import that<font color="#E5E5E5"> into your</font><font color="#CCCCCC"> database</font>

400
00:16:43,610 --> 00:16:50,430
which is the next step<font color="#CCCCCC"> you know creating</font>

401
00:16:47,310 --> 00:16:52,680
the database<font color="#E5E5E5"> importing the hashes</font><font color="#CCCCCC"> then</font>

402
00:16:50,430 --> 00:16:56,099
you want<font color="#E5E5E5"> to move your</font><font color="#CCCCCC"> DLL to the systems</font>

403
00:16:52,680 --> 00:16:58,050
registry<font color="#CCCCCC"> and then start your</font>

404
00:16:56,100 --> 00:17:00,090
authentication<font color="#E5E5E5"> service</font><font color="#CCCCCC"> so remember the</font>

405
00:16:58,050 --> 00:17:03,689
DLL is calling on this<font color="#E5E5E5"> service to do the</font>

406
00:17:00,090 --> 00:17:05,790
authentication<font color="#E5E5E5"> and sorry</font><font color="#CCCCCC"> this is where</font>

407
00:17:03,690 --> 00:17:07,170
you actually<font color="#CCCCCC"> register the DLL because</font>

408
00:17:05,790 --> 00:17:09,750
you have to put it in this notification

409
00:17:07,170 --> 00:17:12,120
packages registry so that<font color="#CCCCCC"> the local</font>

410
00:17:09,750 --> 00:17:15,180
security<font color="#CCCCCC"> authority knows to load it on</font>

411
00:17:12,119 --> 00:17:17,339
boot and yeah if you do this<font color="#E5E5E5"> you're</font>

412
00:17:15,180 --> 00:17:20,160
pretty much done<font color="#E5E5E5"> and like the reward is</font>

413
00:17:17,339 --> 00:17:21,750
so much it's<font color="#CCCCCC"> really simple</font><font color="#E5E5E5"> it shouldn't</font>

414
00:17:20,160 --> 00:17:23,520
<font color="#CCCCCC">take too long you really should have</font>

415
00:17:21,750 --> 00:17:28,590
<font color="#E5E5E5">this and whatever corporate environment</font>

416
00:17:23,520 --> 00:17:30,360
you're using<font color="#CCCCCC"> but anyway</font><font color="#E5E5E5"> enough with the</font>

417
00:17:28,590 --> 00:17:35,879
talking<font color="#E5E5E5"> I'm going to show you how you</font>

418
00:17:30,360 --> 00:17:38,209
<font color="#E5E5E5">can do this on in a demo</font><font color="#CCCCCC"> alright okay</font>

419
00:17:35,880 --> 00:17:38,210
<font color="#E5E5E5">whatever</font>

420
00:17:39,070 --> 00:17:45,590
<font color="#CCCCCC">alright I'll just deal like this okay</font>

421
00:17:41,270 --> 00:17:50,000
cool<font color="#CCCCCC"> so here I have installed</font><font color="#E5E5E5"> a Windows</font>

422
00:17:45,590 --> 00:17:52,549
2008 r2<font color="#E5E5E5"> server and I'm just configured</font>

423
00:17:50,000 --> 00:17:53,900
you know<font color="#E5E5E5"> Active Directory domain</font>

424
00:17:52,549 --> 00:17:56,030
services and<font color="#E5E5E5"> I've installed my</font><font color="#CCCCCC"> own</font>

425
00:17:53,900 --> 00:17:58,520
standalone domain so what we're gonna do

426
00:17:56,030 --> 00:18:01,370
is we're gonna create<font color="#CCCCCC"> a database</font><font color="#E5E5E5"> and</font>

427
00:17:58,520 --> 00:18:03,830
we're gonna have password<font color="#E5E5E5"> filtering</font>

428
00:18:01,370 --> 00:18:07,219
working and<font color="#CCCCCC"> just start everything off</font>

429
00:18:03,830 --> 00:18:11,360
I'm<font color="#E5E5E5"> gonna show you that and I'm gonna</font>

430
00:18:07,220 --> 00:18:15,500
<font color="#E5E5E5">turn</font><font color="#CCCCCC"> on the key</font><font color="#E5E5E5"> caster so currently my</font>

431
00:18:11,360 --> 00:18:17,570
password is admin<font color="#E5E5E5"> 1 2 3 4 if I use the</font>

432
00:18:15,500 --> 00:18:20,659
password password<font color="#CCCCCC"> it's</font><font color="#E5E5E5"> going to</font>

433
00:18:17,570 --> 00:18:22,610
<font color="#E5E5E5">authenticate cuz I've configured you</font>

434
00:18:20,659 --> 00:18:25,190
know very bare minimal local security

435
00:18:22,610 --> 00:18:28,539
policies<font color="#E5E5E5"> and that's just to show</font><font color="#CCCCCC"> you</font>

436
00:18:25,190 --> 00:18:33,730
<font color="#E5E5E5">that doing this works</font><font color="#CCCCCC"> so I'm just gonna</font>

437
00:18:28,539 --> 00:18:35,960
revert back to<font color="#CCCCCC"> my old one all right</font><font color="#E5E5E5"> cool</font>

438
00:18:33,730 --> 00:18:37,669
<font color="#E5E5E5">so I changed</font><font color="#CCCCCC"> it back to admin</font><font color="#E5E5E5"> one two</font>

439
00:18:35,960 --> 00:18:39,169
<font color="#E5E5E5">three four exclamation mark this is</font>

440
00:18:37,669 --> 00:18:40,610
probably one of the very<font color="#CCCCCC"> few times you</font>

441
00:18:39,169 --> 00:18:44,179
want<font color="#E5E5E5"> to have key casting on when you're</font>

442
00:18:40,610 --> 00:18:46,689
typing<font color="#E5E5E5"> your password</font><font color="#CCCCCC"> next thing I want</font>

443
00:18:44,179 --> 00:18:49,909
to<font color="#CCCCCC"> do is</font><font color="#E5E5E5"> just really quickly copy this</font>

444
00:18:46,690 --> 00:18:51,770
<font color="#E5E5E5">so here I have a</font><font color="#CCCCCC"> PowerShell</font><font color="#E5E5E5"> open and the</font>

445
00:18:49,909 --> 00:18:58,179
first<font color="#E5E5E5"> thing I want to do is I actually</font>

446
00:18:51,770 --> 00:19:00,679
<font color="#CCCCCC">want to get this snap in for executing</font>

447
00:18:58,179 --> 00:19:03,320
sequel server commands<font color="#E5E5E5"> which is what I'm</font>

448
00:19:00,679 --> 00:19:04,610
using<font color="#CCCCCC"> so let</font><font color="#E5E5E5"> me just add that really</font>

449
00:19:03,320 --> 00:19:08,600
<font color="#CCCCCC">quickly I should have</font><font color="#E5E5E5"> done this before</font>

450
00:19:04,610 --> 00:19:10,879
the demo but<font color="#CCCCCC"> oh well</font><font color="#E5E5E5"> so I'm getting</font><font color="#CCCCCC"> that</font>

451
00:19:08,600 --> 00:19:12,080
snap in<font color="#CCCCCC"> okay cool</font>

452
00:19:10,880 --> 00:19:14,240
so<font color="#E5E5E5"> now we're gonna create a database</font>

453
00:19:12,080 --> 00:19:16,820
right and I hope you guys<font color="#E5E5E5"> can</font><font color="#CCCCCC"> see that I</font>

454
00:19:14,240 --> 00:19:17,539
think<font color="#CCCCCC"> it's big enough so first thing</font>

455
00:19:16,820 --> 00:19:22,879
we're gonna do

456
00:19:17,539 --> 00:19:26,809
oops that's the wrong<font color="#E5E5E5"> thing I copied let</font>

457
00:19:22,880 --> 00:19:28,130
me just<font color="#CCCCCC"> copy</font><font color="#E5E5E5"> this real quickly</font><font color="#CCCCCC"> alright</font>

458
00:19:26,809 --> 00:19:31,158
everything's gonna go perfectly from

459
00:19:28,130 --> 00:19:32,570
<font color="#CCCCCC">here trust</font><font color="#E5E5E5"> me</font><font color="#CCCCCC"> alright so the first thing</font>

460
00:19:31,159 --> 00:19:34,909
we're gonna<font color="#E5E5E5"> do we're gonna create a</font>

461
00:19:32,570 --> 00:19:38,899
database<font color="#E5E5E5"> and we're gonna call it</font>

462
00:19:34,909 --> 00:19:40,730
password dump<font color="#CCCCCC"> alright next</font><font color="#E5E5E5"> thing we're</font>

463
00:19:38,900 --> 00:19:43,730
<font color="#E5E5E5">gonna do we're gonna create a table for</font>

464
00:19:40,730 --> 00:19:46,039
this so we're<font color="#E5E5E5"> gonna</font><font color="#CCCCCC"> create a table for</font>

465
00:19:43,730 --> 00:19:47,960
that password dump database<font color="#E5E5E5"> using the</font>

466
00:19:46,039 --> 00:19:50,419
database object basic schema<font color="#E5E5E5"> and we're</font>

467
00:19:47,960 --> 00:19:51,650
going to<font color="#E5E5E5"> call it blacklisted and then in</font>

468
00:19:50,419 --> 00:19:53,570
blacklisted we're going to

469
00:19:51,650 --> 00:19:55,970
<font color="#E5E5E5">two variables okay we're gonna give it</font>

470
00:19:53,570 --> 00:19:59,179
<font color="#E5E5E5">hash ID which is an int which is not</font>

471
00:19:55,970 --> 00:20:01,100
null<font color="#E5E5E5"> and then a hash which is a varchar'</font>

472
00:19:59,180 --> 00:20:03,290
and since<font color="#CCCCCC"> they're sha-1 hashes are</font><font color="#E5E5E5"> gonna</font>

473
00:20:01,100 --> 00:20:07,129
make<font color="#E5E5E5"> it</font><font color="#CCCCCC"> length 40 and this is of course</font>

474
00:20:03,290 --> 00:20:08,450
is also<font color="#E5E5E5"> not null</font><font color="#CCCCCC"> so that's done</font><font color="#E5E5E5"> next</font>

475
00:20:07,130 --> 00:20:12,080
<font color="#CCCCCC">thing we want to do we want to create a</font>

476
00:20:08,450 --> 00:20:13,700
user<font color="#E5E5E5"> or login so logins are for</font>

477
00:20:12,080 --> 00:20:15,860
authenticating<font color="#CCCCCC"> to the database and then</font>

478
00:20:13,700 --> 00:20:17,570
users are for<font color="#CCCCCC"> the specific</font><font color="#E5E5E5"> table so</font>

479
00:20:15,860 --> 00:20:19,370
they're a<font color="#E5E5E5"> bit</font><font color="#CCCCCC"> different</font><font color="#E5E5E5"> so I'm going to</font>

480
00:20:17,570 --> 00:20:22,129
create<font color="#E5E5E5"> a login I'll call it a</font><font color="#CCCCCC"> b-sides</font>

481
00:20:19,370 --> 00:20:27,169
<font color="#E5E5E5">reader and I'm gonna say it has the</font>

482
00:20:22,130 --> 00:20:30,290
password<font color="#CCCCCC"> equal to let's say</font><font color="#E5E5E5"> b-sides Las</font>

483
00:20:27,170 --> 00:20:33,800
Vegas 2018 and I'll give it<font color="#CCCCCC"> a default</font>

484
00:20:30,290 --> 00:20:38,840
database<font color="#E5E5E5"> of what we</font><font color="#CCCCCC"> just created which</font>

485
00:20:33,800 --> 00:20:42,560
<font color="#CCCCCC">is password dump</font><font color="#E5E5E5"> so that should work</font>

486
00:20:38,840 --> 00:20:45,379
<font color="#CCCCCC">alright cool</font><font color="#E5E5E5"> next thing I wanna do is we</font>

487
00:20:42,560 --> 00:20:47,450
want<font color="#E5E5E5"> to this is why I</font><font color="#CCCCCC"> don't like</font>

488
00:20:45,380 --> 00:20:49,370
PowerShell<font color="#CCCCCC"> cuz you you can't paste it</font>

489
00:20:47,450 --> 00:20:52,480
keeps dying<font color="#E5E5E5"> okay here we go</font>

490
00:20:49,370 --> 00:20:57,830
next thing we want<font color="#E5E5E5"> to create the user so</font>

491
00:20:52,480 --> 00:20:59,690
let's use password dump and then we're

492
00:20:57,830 --> 00:21:03,230
gonna<font color="#E5E5E5"> create the user create user and</font>

493
00:20:59,690 --> 00:21:08,480
let's also call<font color="#E5E5E5"> it</font><font color="#CCCCCC"> b-sides reader for</font>

494
00:21:03,230 --> 00:21:10,730
the<font color="#CCCCCC"> login b-sides a reader cool and then</font>

495
00:21:08,480 --> 00:21:12,650
finally we<font color="#E5E5E5"> want to give it read</font>

496
00:21:10,730 --> 00:21:18,320
privileges so we're gonna give this the

497
00:21:12,650 --> 00:21:20,780
<font color="#E5E5E5">role which</font><font color="#CCCCCC"> is we</font><font color="#E5E5E5"> want to execute this SP</font>

498
00:21:18,320 --> 00:21:23,419
<font color="#CCCCCC">IDI</font><font color="#E5E5E5"> role member and then we're gonna</font>

499
00:21:20,780 --> 00:21:26,720
give<font color="#CCCCCC"> it the DB data reader role for</font>

500
00:21:23,420 --> 00:21:28,010
<font color="#CCCCCC">'besides reader</font><font color="#E5E5E5"> so that should work</font><font color="#CCCCCC"> okay</font>

501
00:21:26,720 --> 00:21:29,930
so now<font color="#E5E5E5"> create a database that I've</font>

502
00:21:28,010 --> 00:21:33,530
created a login and<font color="#CCCCCC"> a user for accessing</font>

503
00:21:29,930 --> 00:21:35,600
<font color="#E5E5E5">that blacklisted table next thing I want</font>

504
00:21:33,530 --> 00:21:37,340
<font color="#E5E5E5">to show you this directory right so I've</font>

505
00:21:35,600 --> 00:21:40,280
<font color="#E5E5E5">pretty much installed that</font><font color="#CCCCCC"> thing called</font>

506
00:21:37,340 --> 00:21:42,379
<font color="#CCCCCC">opf which is open password filter</font><font color="#E5E5E5"> I've</font>

507
00:21:40,280 --> 00:21:44,600
installed a<font color="#E5E5E5"> pre compiled version there's</font>

508
00:21:42,380 --> 00:21:46,430
some small configurations I added from

509
00:21:44,600 --> 00:21:48,469
Yelp but it's<font color="#CCCCCC"> pretty much gonna be</font><font color="#E5E5E5"> the</font>

510
00:21:46,430 --> 00:21:50,540
same<font color="#CCCCCC"> thing you</font><font color="#E5E5E5"> just go to that link</font><font color="#CCCCCC"> you</font>

511
00:21:48,470 --> 00:21:54,140
saw<font color="#CCCCCC"> earlier and install the pre compiled</font>

512
00:21:50,540 --> 00:21:57,530
version<font color="#E5E5E5"> and you see this hashes dot txt</font>

513
00:21:54,140 --> 00:21:59,300
file right so if I<font color="#E5E5E5"> open this basically</font>

514
00:21:57,530 --> 00:22:01,010
I've downloaded a bunch of sha-1 hash is

515
00:21:59,300 --> 00:22:02,899
from have I been<font color="#E5E5E5"> poned</font><font color="#CCCCCC"> comm like the top</font>

516
00:22:01,010 --> 00:22:05,360
1 million<font color="#CCCCCC"> or something and I've also</font>

517
00:22:02,900 --> 00:22:07,850
prepended an ID to them

518
00:22:05,360 --> 00:22:10,879
so we have these<font color="#E5E5E5"> hashes let's import it</font>

519
00:22:07,850 --> 00:22:16,000
into our<font color="#CCCCCC"> actual table so I</font><font color="#E5E5E5"> can just do</font>

520
00:22:10,880 --> 00:22:19,160
bulk insert and then password<font color="#E5E5E5"> dump</font><font color="#CCCCCC"> DBA</font>

521
00:22:16,000 --> 00:22:23,240
blacklisted<font color="#E5E5E5"> and then I'm gonna insert</font>

522
00:22:19,160 --> 00:22:27,410
the actual hashes<font color="#CCCCCC"> which is from</font><font color="#E5E5E5"> my users</font>

523
00:22:23,240 --> 00:22:33,350
slash administrator<font color="#E5E5E5"> slash hashes file</font>

524
00:22:27,410 --> 00:22:35,600
and it has to use these field

525
00:22:33,350 --> 00:22:38,330
terminators<font color="#CCCCCC"> so the field Terminator in</font>

526
00:22:35,600 --> 00:22:41,510
this case is a comma and<font color="#CCCCCC"> then the row</font>

527
00:22:38,330 --> 00:22:45,939
<font color="#E5E5E5">Terminator is actually a line feed which</font>

528
00:22:41,510 --> 00:22:49,100
you can use this<font color="#CCCCCC"> hexanol character for</font>

529
00:22:45,940 --> 00:22:52,100
<font color="#E5E5E5">that should work okay</font><font color="#CCCCCC"> so now it's</font>

530
00:22:49,100 --> 00:22:53,780
importing which is awesome<font color="#E5E5E5"> and</font><font color="#CCCCCC"> we can</font>

531
00:22:52,100 --> 00:22:58,159
<font color="#E5E5E5">just quickly show that it's actually</font><font color="#CCCCCC"> in</font>

532
00:22:53,780 --> 00:23:02,180
<font color="#E5E5E5">there</font><font color="#CCCCCC"> so select from password dump DVO</font>

533
00:22:58,160 --> 00:23:04,310
<font color="#CCCCCC">DUP blacklisted and yeah you can see we</font>

534
00:23:02,180 --> 00:23:06,410
imported that into<font color="#E5E5E5"> our database</font><font color="#CCCCCC"> okay so</font>

535
00:23:04,310 --> 00:23:08,120
we got the database configured<font color="#E5E5E5"> and again</font>

536
00:23:06,410 --> 00:23:09,620
you can<font color="#E5E5E5"> just re-watch this and just</font>

537
00:23:08,120 --> 00:23:11,750
follow what I do and<font color="#E5E5E5"> you can install</font>

538
00:23:09,620 --> 00:23:14,360
like<font color="#E5E5E5"> faster blacklisting into your local</font>

539
00:23:11,750 --> 00:23:16,790
orgs<font color="#E5E5E5"> so next</font><font color="#CCCCCC"> thing we want to do is we</font>

540
00:23:14,360 --> 00:23:22,129
want to<font color="#CCCCCC"> actually register</font><font color="#E5E5E5"> the service so</font>

541
00:23:16,790 --> 00:23:23,510
what we can do is in this directory the

542
00:23:22,130 --> 00:23:25,400
<font color="#E5E5E5">precompiled directory</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> you can</font>

543
00:23:23,510 --> 00:23:27,920
download<font color="#E5E5E5"> you'll see the four files the</font>

544
00:23:25,400 --> 00:23:29,870
<font color="#CCCCCC">DLL the actual service executive or a</font>

545
00:23:27,920 --> 00:23:32,390
configuration for<font color="#CCCCCC"> that</font><font color="#E5E5E5"> and also this</font>

546
00:23:29,870 --> 00:23:35,840
nice testing executive<font color="#CCCCCC"> ole just for</font>

547
00:23:32,390 --> 00:23:39,380
testing<font color="#E5E5E5"> the service itself not</font><font color="#CCCCCC"> the DLL</font>

548
00:23:35,840 --> 00:23:41,389
of course<font color="#E5E5E5"> so in that configuration</font><font color="#CCCCCC"> file</font>

549
00:23:39,380 --> 00:23:43,280
<font color="#CCCCCC">there's a bunch of predefined keys and</font>

550
00:23:41,390 --> 00:23:45,380
values you<font color="#E5E5E5"> can add to this since I have</font>

551
00:23:43,280 --> 00:23:46,910
this you know standalone domain

552
00:23:45,380 --> 00:23:48,800
<font color="#E5E5E5">controller is gonna</font><font color="#CCCCCC"> be on</font><font color="#E5E5E5"> localhost and</font>

553
00:23:46,910 --> 00:23:51,050
the database we call it a password dump

554
00:23:48,800 --> 00:23:54,830
right<font color="#E5E5E5"> and then the table name was</font>

555
00:23:51,050 --> 00:23:58,580
blacklisted<font color="#E5E5E5"> the</font><font color="#CCCCCC"> username</font><font color="#E5E5E5"> was</font><font color="#CCCCCC"> 'besides</font>

556
00:23:54,830 --> 00:24:02,990
reader<font color="#E5E5E5"> and the database was</font><font color="#CCCCCC"> 'besides Las</font>

557
00:23:58,580 --> 00:24:06,800
Vegas 2018<font color="#E5E5E5"> or</font><font color="#CCCCCC"> I think yeah that should</font>

558
00:24:02,990 --> 00:24:09,770
<font color="#CCCCCC">be it alright cool so we configured the</font>

559
00:24:06,800 --> 00:24:11,540
<font color="#E5E5E5">installation configuration file</font><font color="#CCCCCC"> and now</font>

560
00:24:09,770 --> 00:24:15,340
the next<font color="#CCCCCC"> thing we want to do is actually</font>

561
00:24:11,540 --> 00:24:19,850
install the service<font color="#E5E5E5"> so if we go to</font>

562
00:24:15,340 --> 00:24:23,659
windows.net<font color="#E5E5E5"> 64</font>

563
00:24:19,850 --> 00:24:26,480
me too and then it's called install

564
00:24:23,660 --> 00:24:28,490
<font color="#E5E5E5">utility</font><font color="#CCCCCC"> XE we can actually just install</font>

565
00:24:26,480 --> 00:24:29,030
the service and<font color="#E5E5E5"> again this is all</font><font color="#CCCCCC"> on</font>

566
00:24:28,490 --> 00:24:30,370
<font color="#E5E5E5">PowerShell</font>

567
00:24:29,030 --> 00:24:32,889
[Music]

568
00:24:30,370 --> 00:24:35,149
so that's been<font color="#E5E5E5"> installed successfully</font>

569
00:24:32,890 --> 00:24:39,410
<font color="#CCCCCC">next thing we want to do is we want to</font>

570
00:24:35,150 --> 00:24:41,900
<font color="#E5E5E5">move the DLL itself into windows</font>

571
00:24:39,410 --> 00:24:48,160
system32<font color="#E5E5E5"> so let's copy that really</font>

572
00:24:41,900 --> 00:24:56,419
quickly<font color="#E5E5E5"> so copy the DLL into</font><font color="#CCCCCC"> windows</font>

573
00:24:48,160 --> 00:24:57,950
system32 cool<font color="#CCCCCC"> and that should</font><font color="#E5E5E5"> be it next</font>

574
00:24:56,419 --> 00:25:03,380
we actually want<font color="#E5E5E5"> to quickly start the</font>

575
00:24:57,950 --> 00:25:05,330
service so the SC<font color="#CCCCCC"> start opf ok the</font>

576
00:25:03,380 --> 00:25:07,429
service<font color="#CCCCCC"> is started we installed a</font>

577
00:25:05,330 --> 00:25:10,129
database<font color="#E5E5E5"> we imported some hashes into it</font>

578
00:25:07,429 --> 00:25:14,150
<font color="#E5E5E5">we configured</font><font color="#CCCCCC"> the installation</font>

579
00:25:10,130 --> 00:25:18,350
configuration<font color="#E5E5E5"> we put it to system 32</font><font color="#CCCCCC"> we</font>

580
00:25:14,150 --> 00:25:20,270
started the service<font color="#CCCCCC"> that should be it so</font>

581
00:25:18,350 --> 00:25:22,520
next thing<font color="#E5E5E5"> you want to do is remember I</font>

582
00:25:20,270 --> 00:25:24,470
told<font color="#E5E5E5"> you that these dll's are only</font>

583
00:25:22,520 --> 00:25:26,870
loaded by the LS<font color="#E5E5E5"> 8 during boot so you</font>

584
00:25:24,470 --> 00:25:30,440
<font color="#E5E5E5">have to restart your computer so I'll</font>

585
00:25:26,870 --> 00:25:32,059
just do<font color="#CCCCCC"> that</font><font color="#E5E5E5"> really quickly</font><font color="#CCCCCC"> I feel like</font>

586
00:25:30,440 --> 00:25:33,980
there's one<font color="#E5E5E5"> thing I forgot I hope this</font>

587
00:25:32,059 --> 00:25:35,660
live demo works well it's taking a huge

588
00:25:33,980 --> 00:25:41,870
risk<font color="#CCCCCC"> it's gonna work</font>

589
00:25:35,660 --> 00:25:43,429
don't worry<font color="#E5E5E5"> all right</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> um cool</font><font color="#CCCCCC"> that's</font>

590
00:25:41,870 --> 00:25:45,320
gonna<font color="#E5E5E5"> take a while</font><font color="#CCCCCC"> I don't want you</font><font color="#E5E5E5"> guys</font>

591
00:25:43,429 --> 00:25:47,390
to wait for it to<font color="#CCCCCC"> shutdown</font><font color="#E5E5E5"> so while that</font>

592
00:25:45,320 --> 00:25:55,309
<font color="#E5E5E5">loads I'll just give</font><font color="#CCCCCC"> you another</font><font color="#E5E5E5"> slide</font>

593
00:25:47,390 --> 00:25:58,490
some implementation<font color="#E5E5E5"> gotchas question</font><font color="#CCCCCC"> ok</font>

594
00:25:55,309 --> 00:25:59,660
<font color="#CCCCCC">so some implementation</font><font color="#E5E5E5"> gosh is</font>

595
00:25:58,490 --> 00:26:01,160
<font color="#E5E5E5">especially if you don't</font><font color="#CCCCCC"> want to use an</font>

596
00:25:59,660 --> 00:26:03,110
open<font color="#E5E5E5"> source</font><font color="#CCCCCC"> solution or if you want to</font>

597
00:26:01,160 --> 00:26:04,610
install<font color="#CCCCCC"> your own DLL yourself</font><font color="#E5E5E5"> or</font>

598
00:26:03,110 --> 00:26:08,209
configure your own DLL or your own

599
00:26:04,610 --> 00:26:09,799
service one thing<font color="#E5E5E5"> any crash in this</font>

600
00:26:08,210 --> 00:26:11,210
<font color="#E5E5E5">process means you'll get a blue screen</font>

601
00:26:09,799 --> 00:26:12,559
<font color="#CCCCCC">of death which means you'll need like a</font>

602
00:26:11,210 --> 00:26:14,990
kernel debugger if you're<font color="#E5E5E5"> actually</font><font color="#CCCCCC"> gonna</font>

603
00:26:12,559 --> 00:26:18,440
<font color="#CCCCCC">do</font><font color="#E5E5E5"> all the coding logic in the DLL so I</font>

604
00:26:14,990 --> 00:26:20,690
don't suggest doing<font color="#CCCCCC"> that completely</font>

605
00:26:18,440 --> 00:26:22,820
replacing a DLL actually requires<font color="#CCCCCC"> two</font>

606
00:26:20,690 --> 00:26:24,410
reboots<font color="#CCCCCC"> so one for actually clearing</font><font color="#E5E5E5"> the</font>

607
00:26:22,820 --> 00:26:29,210
registry and the other for actually

608
00:26:24,410 --> 00:26:31,370
loading the library and like I<font color="#CCCCCC"> said this</font>

609
00:26:29,210 --> 00:26:32,840
DLL is only<font color="#E5E5E5"> loaded during boot by the</font>

610
00:26:31,370 --> 00:26:35,570
local security<font color="#CCCCCC"> Authority</font>

611
00:26:32,840 --> 00:26:40,158
via this notification registry of<font color="#E5E5E5"> the</font>

612
00:26:35,570 --> 00:26:42,499
local<font color="#E5E5E5"> security</font><font color="#CCCCCC"> authority and then yeah</font>

613
00:26:40,159 --> 00:26:44,059
the<font color="#CCCCCC"> DLL has to be installed on</font><font color="#E5E5E5"> every</font>

614
00:26:42,499 --> 00:26:45,409
<font color="#CCCCCC">network domain</font><font color="#E5E5E5"> controller so don't</font>

615
00:26:44,059 --> 00:26:47,990
forget<font color="#E5E5E5"> that don't don't</font><font color="#CCCCCC"> just have an</font>

616
00:26:45,409 --> 00:26:49,580
install<font color="#CCCCCC"> on</font><font color="#E5E5E5"> one otherwise authentication</font>

617
00:26:47,990 --> 00:26:53,149
pipe<font color="#E5E5E5"> to other domain</font><font color="#CCCCCC"> controllers won't</font>

618
00:26:49,580 --> 00:26:55,460
work and<font color="#E5E5E5"> another</font><font color="#CCCCCC"> interesting gotcha is</font>

619
00:26:53,149 --> 00:26:58,008
these password policy error messages

620
00:26:55,460 --> 00:27:00,379
<font color="#E5E5E5">they're</font><font color="#CCCCCC"> hard-coded into that into</font><font color="#E5E5E5"> the</font>

621
00:26:58,009 --> 00:27:03,769
<font color="#CCCCCC">Microsoft</font><font color="#E5E5E5"> operating system so you can't</font>

622
00:27:00,379 --> 00:27:05,719
change the<font color="#CCCCCC"> message that says</font><font color="#E5E5E5"> these</font>

623
00:27:03,769 --> 00:27:07,789
password requirement complexities aren't

624
00:27:05,720 --> 00:27:12,350
met<font color="#E5E5E5"> which can be a good thing</font><font color="#CCCCCC"> or</font><font color="#E5E5E5"> a bad</font>

625
00:27:07,789 --> 00:27:14,658
thing depending on<font color="#E5E5E5"> your needs</font><font color="#CCCCCC"> let's see</font>

626
00:27:12,350 --> 00:27:18,259
if it finished<font color="#CCCCCC"> it still didn't</font><font color="#E5E5E5"> finish</font>

627
00:27:14,659 --> 00:27:21,440
<font color="#CCCCCC">okay so just</font><font color="#E5E5E5"> hear some thoughts I had</font>

628
00:27:18,259 --> 00:27:22,970
transitioning<font color="#E5E5E5"> from a UNIX programming</font>

629
00:27:21,440 --> 00:27:25,519
environment<font color="#E5E5E5"> some more</font><font color="#CCCCCC"> windows heavy</font>

630
00:27:22,970 --> 00:27:27,320
especially<font color="#CCCCCC"> with PowerShell</font><font color="#E5E5E5"> first thing</font>

631
00:27:25,519 --> 00:27:28,309
is what's<font color="#CCCCCC"> a</font><font color="#E5E5E5"> dynamic linking library I</font>

632
00:27:27,320 --> 00:27:30,499
didn't know what<font color="#CCCCCC"> that</font><font color="#E5E5E5"> was</font>

633
00:27:28,309 --> 00:27:32,899
<font color="#CCCCCC">now I know it's pretty</font><font color="#E5E5E5"> much</font><font color="#CCCCCC"> like the dot</font>

634
00:27:30,499 --> 00:27:34,759
<font color="#CCCCCC">L IB files except it's</font><font color="#E5E5E5"> a shared memory</font>

635
00:27:32,899 --> 00:27:36,678
that you don't have to compile<font color="#E5E5E5"> when</font>

636
00:27:34,759 --> 00:27:40,129
importing libraries in<font color="#E5E5E5"> it's all shared</font>

637
00:27:36,679 --> 00:27:42,850
in one contiguous memory chunk<font color="#E5E5E5"> on</font><font color="#CCCCCC"> demand</font>

638
00:27:40,129 --> 00:27:45,590
when your<font color="#E5E5E5"> programs loaded</font>

639
00:27:42,850 --> 00:27:48,168
another thing I<font color="#E5E5E5"> learned is I really like</font>

640
00:27:45,590 --> 00:27:50,360
using<font color="#E5E5E5"> PowerShell</font><font color="#CCCCCC"> I thought you know the</font>

641
00:27:48,169 --> 00:27:53,240
<font color="#E5E5E5">transition was pretty seamless we went</font>

642
00:27:50,360 --> 00:27:55,758
from<font color="#E5E5E5"> batch to</font><font color="#CCCCCC"> PowerShell the programming</font>

643
00:27:53,240 --> 00:27:57,350
language is<font color="#E5E5E5"> really intuitive I thought I</font>

644
00:27:55,759 --> 00:28:00,289
<font color="#CCCCCC">just I don't</font><font color="#E5E5E5"> know I really</font><font color="#CCCCCC"> had a great</font>

645
00:27:57,350 --> 00:28:02,330
<font color="#CCCCCC">time using it other question I had is</font>

646
00:28:00,289 --> 00:28:04,100
what's the<font color="#E5E5E5"> domain controller</font><font color="#CCCCCC"> you know I</font>

647
00:28:02,330 --> 00:28:05,240
didn't know<font color="#E5E5E5"> what this is but this is</font>

648
00:28:04,100 --> 00:28:07,908
where all<font color="#E5E5E5"> the authentication</font>

649
00:28:05,240 --> 00:28:11,360
authorization is done<font color="#CCCCCC"> for Active</font>

650
00:28:07,909 --> 00:28:13,789
Directory<font color="#CCCCCC"> I also thought it</font><font color="#E5E5E5"> was</font>

651
00:28:11,360 --> 00:28:17,149
<font color="#E5E5E5">incredibly convenient that UNIX and</font>

652
00:28:13,789 --> 00:28:19,039
<font color="#E5E5E5">Windows use the same line terminators</font><font color="#CCCCCC"> so</font>

653
00:28:17,149 --> 00:28:22,158
this made it really<font color="#E5E5E5"> easy when I was</font>

654
00:28:19,039 --> 00:28:27,350
<font color="#E5E5E5">programming in UNIX</font><font color="#CCCCCC"> and then moving</font><font color="#E5E5E5"> to</font>

655
00:28:22,159 --> 00:28:29,720
<font color="#E5E5E5">Windows another thing I asked myself is</font>

656
00:28:27,350 --> 00:28:33,039
how do<font color="#CCCCCC"> ID bug in</font><font color="#E5E5E5"> LCS process without</font>

657
00:28:29,720 --> 00:28:35,450
<font color="#E5E5E5">going crazy</font><font color="#CCCCCC"> so this part was</font><font color="#E5E5E5"> pretty hard</font>

658
00:28:33,039 --> 00:28:38,090
<font color="#CCCCCC">it was</font><font color="#E5E5E5"> kind of mundane attract kind of</font>

659
00:28:35,450 --> 00:28:39,379
really stressed<font color="#E5E5E5"> me out</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> again that's</font>

660
00:28:38,090 --> 00:28:43,158
why the service<font color="#E5E5E5"> oriented architecture</font>

661
00:28:39,379 --> 00:28:45,469
suited our needs so<font color="#E5E5E5"> well</font><font color="#CCCCCC"> another</font>

662
00:28:43,159 --> 00:28:46,610
<font color="#E5E5E5">interesting</font><font color="#CCCCCC"> question</font><font color="#E5E5E5"> is how do I test</font>

663
00:28:45,470 --> 00:28:47,929
LDAP authenticate

664
00:28:46,610 --> 00:28:49,340
across the domain<font color="#E5E5E5"> of a thousand plus</font>

665
00:28:47,929 --> 00:28:51,020
<font color="#E5E5E5">users so this is an interesting question</font>

666
00:28:49,340 --> 00:28:53,360
I'll talk about<font color="#E5E5E5"> this in</font><font color="#CCCCCC"> the testing</font>

667
00:28:51,020 --> 00:28:54,889
framework part<font color="#E5E5E5"> and if you guys I don't</font>

668
00:28:53,360 --> 00:28:58,219
<font color="#E5E5E5">think you guys</font><font color="#CCCCCC"> realize this</font><font color="#E5E5E5"> but this was</font>

669
00:28:54,890 --> 00:29:02,809
extreme sarcasm<font color="#E5E5E5"> and this is also</font>

670
00:28:58,220 --> 00:29:11,260
sarcastic<font color="#CCCCCC"> all</font><font color="#E5E5E5"> right let's see if it</font>

671
00:29:02,809 --> 00:29:13,639
actually installed so let me just<font color="#E5E5E5"> log in</font>

672
00:29:11,260 --> 00:29:20,960
<font color="#CCCCCC">and I'll</font><font color="#E5E5E5"> show</font><font color="#CCCCCC"> you the password I'm using</font>

673
00:29:13,640 --> 00:29:25,910
which is<font color="#E5E5E5"> admin one two three four that's</font>

674
00:29:20,960 --> 00:29:28,700
<font color="#E5E5E5">weird I never got that before</font><font color="#CCCCCC"> okay</font><font color="#E5E5E5"> geez</font>

675
00:29:25,910 --> 00:29:32,450
<font color="#CCCCCC">all right let's hope this works so if I</font>

676
00:29:28,700 --> 00:29:36,770
<font color="#E5E5E5">open CMD one thing I want to show you</font>

677
00:29:32,450 --> 00:29:39,500
again is I'm using really minimal

678
00:29:36,770 --> 00:29:41,570
<font color="#E5E5E5">password complexity requirements</font><font color="#CCCCCC"> so if I</font>

679
00:29:39,500 --> 00:29:43,610
theoretically changes the password<font color="#CCCCCC"> sure</font>

680
00:29:41,570 --> 00:29:45,290
work<font color="#CCCCCC"> may I mean it should</font><font color="#E5E5E5"> get</font>

681
00:29:43,610 --> 00:29:47,379
blacklisted<font color="#CCCCCC"> another thing we</font><font color="#E5E5E5"> want to</font>

682
00:29:45,290 --> 00:29:50,990
<font color="#E5E5E5">check is</font><font color="#CCCCCC"> that the DLL has been</font>

683
00:29:47,380 --> 00:29:53,900
registered<font color="#E5E5E5"> into the LLC's registry so we</font>

684
00:29:50,990 --> 00:29:55,940
can do that by doing<font color="#CCCCCC"> something like</font><font color="#E5E5E5"> reg</font>

685
00:29:53,900 --> 00:30:00,850
query<font color="#CCCCCC"> I think it's</font>

686
00:29:55,940 --> 00:30:05,690
hklm<font color="#E5E5E5"> slash system current control set</font>

687
00:30:00,850 --> 00:30:09,559
control LSA and then you can search<font color="#CCCCCC"> for</font>

688
00:30:05,690 --> 00:30:11,900
notification packages so we can see that

689
00:30:09,559 --> 00:30:14,270
it<font color="#E5E5E5"> has been registered</font><font color="#CCCCCC"> and another thing</font>

690
00:30:11,900 --> 00:30:16,040
we can<font color="#E5E5E5"> do is we can query that the OPF</font>

691
00:30:14,270 --> 00:30:18,559
service is running<font color="#CCCCCC"> so it does seem like</font>

692
00:30:16,040 --> 00:30:21,889
it's running<font color="#CCCCCC"> another thing is that's</font>

693
00:30:18,559 --> 00:30:24,410
useful is this<font color="#E5E5E5"> open source</font><font color="#CCCCCC"> pre compiled</font>

694
00:30:21,890 --> 00:30:28,540
version it can it<font color="#CCCCCC"> provides a testing</font>

695
00:30:24,410 --> 00:30:28,540
framework<font color="#CCCCCC"> so you can</font><font color="#E5E5E5"> just check whether</font>

696
00:30:31,419 --> 00:30:36,890
that<font color="#E5E5E5"> is really weird</font>

697
00:30:34,790 --> 00:30:38,928
<font color="#E5E5E5">I've depth</font><font color="#CCCCCC"> that's just outrageous I've</font>

698
00:30:36,890 --> 00:30:40,820
done<font color="#E5E5E5"> this demo like ten times I've never</font>

699
00:30:38,929 --> 00:30:44,679
<font color="#E5E5E5">gotten this star failure so I'm really</font>

700
00:30:40,820 --> 00:30:49,178
sorry about this this<font color="#E5E5E5"> is this is</font><font color="#CCCCCC"> crazy</font>

701
00:30:44,679 --> 00:30:53,000
sorry oh<font color="#E5E5E5"> I actually I used the wrong</font>

702
00:30:49,179 --> 00:30:54,800
executive all so it's all good<font color="#CCCCCC"> actually</font>

703
00:30:53,000 --> 00:30:56,570
I was<font color="#CCCCCC"> just using the</font><font color="#E5E5E5"> wrong executable so</font>

704
00:30:54,800 --> 00:30:58,610
it<font color="#CCCCCC"> promotes a testing</font><font color="#E5E5E5"> framework called</font>

705
00:30:56,570 --> 00:31:00,500
<font color="#CCCCCC">opf test password and this just tests</font>

706
00:30:58,610 --> 00:31:02,899
<font color="#E5E5E5">that the service authentication works</font>

707
00:31:00,500 --> 00:31:05,600
and as you can<font color="#E5E5E5"> see testing the password</font>

708
00:31:02,900 --> 00:31:08,750
password<font color="#E5E5E5"> results in a failure</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> let's</font>

709
00:31:05,600 --> 00:31:11,629
see<font color="#CCCCCC"> if the dll actually works so if you</font>

710
00:31:08,750 --> 00:31:14,390
change<font color="#E5E5E5"> your password and again I'll show</font>

711
00:31:11,630 --> 00:31:16,280
you what I'm<font color="#CCCCCC"> typing sorry</font><font color="#E5E5E5"> my old</font>

712
00:31:14,390 --> 00:31:21,200
password was Evan one two three four<font color="#CCCCCC"> now</font>

713
00:31:16,280 --> 00:31:24,289
<font color="#CCCCCC">if I</font><font color="#E5E5E5"> try</font><font color="#CCCCCC"> password it's</font><font color="#E5E5E5"> unable to update</font>

714
00:31:21,200 --> 00:31:25,700
<font color="#E5E5E5">the password</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> that was all alive</font><font color="#CCCCCC"> it</font>

715
00:31:24,289 --> 00:31:27,760
<font color="#CCCCCC">actually is a lot harder</font><font color="#E5E5E5"> than it looks</font>

716
00:31:25,700 --> 00:31:36,740
<font color="#CCCCCC">but everything worked which is nice</font>

717
00:31:27,760 --> 00:31:40,429
<font color="#CCCCCC">thanks alright so that shows you</font><font color="#E5E5E5"> how</font>

718
00:31:36,740 --> 00:31:43,220
<font color="#CCCCCC">easy it is to install</font><font color="#E5E5E5"> everything</font><font color="#CCCCCC"> now</font>

719
00:31:40,429 --> 00:31:46,929
I'll talk<font color="#E5E5E5"> about how you can test and</font>

720
00:31:43,220 --> 00:31:50,240
<font color="#E5E5E5">employ this and they Yelp we pretty much</font>

721
00:31:46,929 --> 00:31:51,950
<font color="#E5E5E5">divided it into four phases first thing</font>

722
00:31:50,240 --> 00:31:53,990
you want to do identify<font color="#CCCCCC"> what kind of</font>

723
00:31:51,950 --> 00:31:55,700
passwords you want to deploy<font color="#E5E5E5"> especially</font>

724
00:31:53,990 --> 00:31:59,059
depending<font color="#CCCCCC"> on the policies you</font><font color="#E5E5E5"> set you</font>

725
00:31:55,700 --> 00:32:02,600
might want to use a different<font color="#E5E5E5"> set</font><font color="#CCCCCC"> of</font>

726
00:31:59,059 --> 00:32:05,418
<font color="#E5E5E5">passwords meeting your policies also</font>

727
00:32:02,600 --> 00:32:08,799
<font color="#E5E5E5">depending on the scale of your users or</font>

728
00:32:05,419 --> 00:32:11,570
employees<font color="#CCCCCC"> you want to adjust</font><font color="#E5E5E5"> accordingly</font>

729
00:32:08,799 --> 00:32:13,970
<font color="#CCCCCC">so first phase identify your passwords</font>

730
00:32:11,570 --> 00:32:15,620
<font color="#E5E5E5">second is you want to test your password</font>

731
00:32:13,970 --> 00:32:18,380
filtering service<font color="#E5E5E5"> on</font><font color="#CCCCCC"> a Sat alone domain</font>

732
00:32:15,620 --> 00:32:21,080
you know just like what<font color="#E5E5E5"> I did</font><font color="#CCCCCC"> just run</font>

733
00:32:18,380 --> 00:32:23,030
up Windows 2008 server r2 instance and

734
00:32:21,080 --> 00:32:25,520
then hopefully<font color="#E5E5E5"> you have a development</font>

735
00:32:23,030 --> 00:32:27,110
domain<font color="#CCCCCC"> configured</font><font color="#E5E5E5"> or a lab domain with</font>

736
00:32:25,520 --> 00:32:29,510
multiple domain controllers<font color="#CCCCCC"> that</font><font color="#E5E5E5"> you can</font>

737
00:32:27,110 --> 00:32:31,580
<font color="#CCCCCC">finally test this with and then you want</font>

738
00:32:29,510 --> 00:32:34,129
to slowly roll this service out to

739
00:32:31,580 --> 00:32:36,439
production servers<font color="#CCCCCC"> and something I call</font>

740
00:32:34,130 --> 00:32:38,960
<font color="#CCCCCC">non enforcement mode</font><font color="#E5E5E5"> which means at</font>

741
00:32:36,440 --> 00:32:41,510
first<font color="#E5E5E5"> you want it running but</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> don't</font>

742
00:32:38,960 --> 00:32:43,010
want it<font color="#CCCCCC"> actually authenticating or</font>

743
00:32:41,510 --> 00:32:45,260
blacklisting you just want<font color="#E5E5E5"> to log that</font>

744
00:32:43,010 --> 00:32:47,330
<font color="#CCCCCC">it would have otherwise succeeded</font><font color="#E5E5E5"> and</font>

745
00:32:45,260 --> 00:32:49,789
then after a while<font color="#CCCCCC"> like two or three</font>

746
00:32:47,330 --> 00:32:51,530
<font color="#E5E5E5">months and you know making</font><font color="#CCCCCC"> sure</font>

747
00:32:49,789 --> 00:32:53,210
everything is<font color="#E5E5E5"> what it looks like then</font>

748
00:32:51,530 --> 00:32:54,889
you can actually<font color="#E5E5E5"> run it in enforcement</font>

749
00:32:53,210 --> 00:32:58,429
mode where you actually<font color="#E5E5E5"> deny the</font>

750
00:32:54,890 --> 00:33:00,380
passwords so phase<font color="#E5E5E5"> zero require</font>

751
00:32:58,429 --> 00:33:02,090
passwords<font color="#CCCCCC"> this should be pretty simple</font>

752
00:33:00,380 --> 00:33:04,039
<font color="#CCCCCC">it</font><font color="#E5E5E5"> looks something like this</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> just</font>

753
00:33:02,090 --> 00:33:07,428
gather a bunch<font color="#E5E5E5"> of compromised passwords</font>

754
00:33:04,039 --> 00:33:08,990
or sha-1 passwords<font color="#E5E5E5"> and if they're you</font>

755
00:33:07,429 --> 00:33:10,700
know<font color="#E5E5E5"> plain text already just sha-1 them</font>

756
00:33:08,990 --> 00:33:12,710
yourself<font color="#E5E5E5"> like on the</font><font color="#CCCCCC"> Ray</font><font color="#E5E5E5"> you can see</font>

757
00:33:10,700 --> 00:33:14,300
some scripts for doing that

758
00:33:12,710 --> 00:33:17,000
and then maybe<font color="#E5E5E5"> you want</font><font color="#CCCCCC"> to filter these</font>

759
00:33:14,300 --> 00:33:18,500
against those conforming to your

760
00:33:17,000 --> 00:33:21,950
policies these are just<font color="#E5E5E5"> some random</font>

761
00:33:18,500 --> 00:33:23,450
policies I made at the bottom and then

762
00:33:21,950 --> 00:33:27,140
you<font color="#E5E5E5"> want to move to</font><font color="#CCCCCC"> your actual</font><font color="#E5E5E5"> testing</font>

763
00:33:23,450 --> 00:33:28,970
framework<font color="#E5E5E5"> so what we did was we kind of</font>

764
00:33:27,140 --> 00:33:31,760
<font color="#E5E5E5">divided this dump of pastures we got</font>

765
00:33:28,970 --> 00:33:33,470
into four<font color="#E5E5E5"> different groups in reality</font>

766
00:33:31,760 --> 00:33:34,850
there's only two<font color="#E5E5E5"> groups you care about</font>

767
00:33:33,470 --> 00:33:37,190
<font color="#E5E5E5">right which is whether they're in the</font>

768
00:33:34,850 --> 00:33:38,389
<font color="#E5E5E5">dump</font><font color="#CCCCCC"> or whether they're not in the dump</font>

769
00:33:37,190 --> 00:33:41,420
<font color="#E5E5E5">and again this is all for testing</font>

770
00:33:38,390 --> 00:33:43,820
<font color="#E5E5E5">purposes but because there's also this</font>

771
00:33:41,420 --> 00:33:45,980
<font color="#E5E5E5">you know pre-authorization done on</font>

772
00:33:43,820 --> 00:33:48,169
whether the complexity requirements<font color="#CCCCCC"> are</font>

773
00:33:45,980 --> 00:33:50,300
met we<font color="#E5E5E5"> divided again into two more</font>

774
00:33:48,170 --> 00:33:53,930
groups<font color="#CCCCCC"> so</font><font color="#E5E5E5"> you have four in total</font><font color="#CCCCCC"> and</font>

775
00:33:50,300 --> 00:33:56,780
this is just for<font color="#E5E5E5"> completeness sake</font><font color="#CCCCCC"> so</font>

776
00:33:53,930 --> 00:33:58,850
yeah<font color="#CCCCCC"> and</font><font color="#E5E5E5"> number</font><font color="#CCCCCC"> two stuff to just</font>

777
00:33:56,780 --> 00:34:00,920
<font color="#CCCCCC">generate sha-1 hashes of those you plan</font>

778
00:33:58,850 --> 00:34:02,570
to<font color="#E5E5E5"> put in your password dump so that</font>

779
00:34:00,920 --> 00:34:04,910
<font color="#E5E5E5">they're in your actual blacklisting</font>

780
00:34:02,570 --> 00:34:06,860
database and then finally you generate a

781
00:34:04,910 --> 00:34:09,440
PowerShell<font color="#E5E5E5"> script that or whatever</font>

782
00:34:06,860 --> 00:34:12,500
script you want that basically<font color="#E5E5E5"> tests</font>

783
00:34:09,440 --> 00:34:14,960
whether<font color="#E5E5E5"> these resets and LDAP binds are</font>

784
00:34:12,500 --> 00:34:17,719
actually being successfully done<font color="#E5E5E5"> so if</font>

785
00:34:14,960 --> 00:34:20,350
it's not<font color="#E5E5E5"> in</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> password dump but meets</font>

786
00:34:17,719 --> 00:34:22,759
the complexity<font color="#CCCCCC"> requirements</font><font color="#E5E5E5"> it should</font>

787
00:34:20,350 --> 00:34:24,380
<font color="#E5E5E5">right so you're just</font><font color="#CCCCCC"> testing the</font>

788
00:34:22,760 --> 00:34:26,450
expected behavior of all these groups

789
00:34:24,380 --> 00:34:30,650
using<font color="#E5E5E5"> something like a PowerShell script</font>

790
00:34:26,449 --> 00:34:32,989
with you know resets and LDAP binds and

791
00:34:30,650 --> 00:34:35,240
then of course<font color="#CCCCCC"> at the end you want</font><font color="#E5E5E5"> to</font>

792
00:34:32,989 --> 00:34:40,129
log all your<font color="#E5E5E5"> results including the</font>

793
00:34:35,239 --> 00:34:40,969
average reset time<font color="#E5E5E5"> so that's what this</font>

794
00:34:40,130 --> 00:34:42,710
looks<font color="#E5E5E5"> like</font>

795
00:34:40,969 --> 00:34:45,949
you know<font color="#E5E5E5"> I divided the password into</font>

796
00:34:42,710 --> 00:34:48,020
four different categories<font color="#E5E5E5"> and then just</font>

797
00:34:45,949 --> 00:34:50,899
<font color="#CCCCCC">rather this huge powershell script for</font>

798
00:34:48,020 --> 00:34:52,699
verifying the behavior<font color="#CCCCCC"> ie that for each</font>

799
00:34:50,900 --> 00:34:54,200
you<font color="#CCCCCC"> have an</font><font color="#E5E5E5"> expected outcome and an</font>

800
00:34:52,699 --> 00:34:55,549
actual outcome and<font color="#E5E5E5"> you want to make sure</font>

801
00:34:54,199 --> 00:34:59,270
these<font color="#CCCCCC"> are the same they're all</font>

802
00:34:55,550 --> 00:35:01,820
<font color="#E5E5E5">correlated properly so just in terms of</font>

803
00:34:59,270 --> 00:35:04,220
the<font color="#E5E5E5"> results we got a</font><font color="#CCCCCC"> Yelp</font><font color="#E5E5E5"> so the left</font>

804
00:35:01,820 --> 00:35:06,470
diagram it doesn't really<font color="#E5E5E5"> mean</font><font color="#CCCCCC"> anything</font>

805
00:35:04,220 --> 00:35:09,259
because<font color="#E5E5E5"> no password filter</font><font color="#CCCCCC"> dll's are</font>

806
00:35:06,470 --> 00:35:11,810
configured so the fact that the the the

807
00:35:09,260 --> 00:35:15,230
<font color="#CCCCCC">last right columns are kind of</font><font color="#E5E5E5"> different</font>

808
00:35:11,810 --> 00:35:17,330
it's<font color="#E5E5E5"> just random</font><font color="#CCCCCC"> but then in the results</font>

809
00:35:15,230 --> 00:35:19,760
with the<font color="#CCCCCC"> DLL configured you can see that</font>

810
00:35:17,330 --> 00:35:22,610
the average<font color="#E5E5E5"> time</font><font color="#CCCCCC"> of course</font><font color="#E5E5E5"> and this</font>

811
00:35:19,760 --> 00:35:24,560
includes passwords which are in the

812
00:35:22,610 --> 00:35:25,820
<font color="#E5E5E5">black list so of course the the time</font>

813
00:35:24,560 --> 00:35:28,820
will<font color="#E5E5E5"> be a lot lower</font>

814
00:35:25,820 --> 00:35:30,860
but what you'll notice<font color="#E5E5E5"> is the yes policy</font>

815
00:35:28,820 --> 00:35:32,660
no dump<font color="#E5E5E5"> in the right side and the yes</font>

816
00:35:30,860 --> 00:35:35,000
policy note up on the left<font color="#E5E5E5"> side are</font>

817
00:35:32,660 --> 00:35:36,830
pretty much the same<font color="#CCCCCC"> so the overhead was</font>

818
00:35:35,000 --> 00:35:40,120
almost minimal<font color="#E5E5E5"> you couldn't even notice</font>

819
00:35:36,830 --> 00:35:43,009
it so that was the<font color="#CCCCCC"> standalone domain</font>

820
00:35:40,120 --> 00:35:46,100
<font color="#CCCCCC">next you want to</font><font color="#E5E5E5"> move to the actual lab</font>

821
00:35:43,010 --> 00:35:48,230
environment<font color="#E5E5E5"> right so it's gonna be the</font>

822
00:35:46,100 --> 00:35:50,060
same as I talked about earlier<font color="#E5E5E5"> except</font>

823
00:35:48,230 --> 00:35:53,240
you're gonna do some more things

824
00:35:50,060 --> 00:35:55,640
differently<font color="#E5E5E5"> so</font><font color="#CCCCCC"> you want</font><font color="#E5E5E5"> to be indexing</font>

825
00:35:53,240 --> 00:35:57,709
these logs to<font color="#E5E5E5"> your sims somehow</font><font color="#CCCCCC"> alright</font>

826
00:35:55,640 --> 00:36:00,250
so you can make something<font color="#E5E5E5"> in like</font><font color="#CCCCCC"> syslog</font>

827
00:35:57,710 --> 00:36:02,720
with whatever timestamp to do this<font color="#E5E5E5"> and</font>

828
00:36:00,250 --> 00:36:05,540
you also have an<font color="#E5E5E5"> additional cross</font>

829
00:36:02,720 --> 00:36:09,080
verification check<font color="#E5E5E5"> with Windows events</font>

830
00:36:05,540 --> 00:36:11,620
logs<font color="#E5E5E5"> so for 73 and for 74 are the codes</font>

831
00:36:09,080 --> 00:36:16,630
for success and failure respectively<font color="#CCCCCC"> and</font>

832
00:36:11,620 --> 00:36:19,310
then finally you<font color="#CCCCCC"> want to toggle between</font>

833
00:36:16,630 --> 00:36:21,890
<font color="#E5E5E5">enforcement's and non enforcement modes</font>

834
00:36:19,310 --> 00:36:25,250
<font color="#E5E5E5">so when you suddenly roll this out into</font>

835
00:36:21,890 --> 00:36:27,440
prod<font color="#CCCCCC"> you want to make sure that non</font>

836
00:36:25,250 --> 00:36:29,780
enforcement mode is toggled just in case

837
00:36:27,440 --> 00:36:32,000
there was something<font color="#CCCCCC"> you missed and then</font>

838
00:36:29,780 --> 00:36:34,610
<font color="#E5E5E5">slowly look at the results from your sim</font>

839
00:36:32,000 --> 00:36:37,160
data<font color="#E5E5E5"> your logs whatever and make sure</font>

840
00:36:34,610 --> 00:36:39,980
everything is<font color="#CCCCCC"> correlated</font><font color="#E5E5E5"> and once that's</font>

841
00:36:37,160 --> 00:36:41,600
<font color="#CCCCCC">guaranteed</font><font color="#E5E5E5"> then move it to actual</font>

842
00:36:39,980 --> 00:36:45,350
<font color="#CCCCCC">enforcement mode where you're actually</font>

843
00:36:41,600 --> 00:36:46,640
denying these blacklisted passwords so

844
00:36:45,350 --> 00:36:49,029
that's probably<font color="#E5E5E5"> going to look something</font>

845
00:36:46,640 --> 00:36:51,920
<font color="#E5E5E5">like this</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> know putting in this block</font>

846
00:36:49,030 --> 00:36:54,320
<font color="#E5E5E5">and being able to index all this like</font>

847
00:36:51,920 --> 00:36:56,090
having this<font color="#CCCCCC"> ability</font><font color="#E5E5E5"> to see everything</font>

848
00:36:54,320 --> 00:37:00,590
<font color="#CCCCCC">very conveniently that's what seams are</font>

849
00:36:56,090 --> 00:37:05,030
for right and yet then we got these

850
00:37:00,590 --> 00:37:08,000
average results which are that most<font color="#E5E5E5"> of</font>

851
00:37:05,030 --> 00:37:10,100
these<font color="#E5E5E5"> password</font><font color="#CCCCCC"> DLLs they didn't impose</font>

852
00:37:08,000 --> 00:37:14,090
any overhead whatsoever it was<font color="#E5E5E5"> extremely</font>

853
00:37:10,100 --> 00:37:16,400
marginal<font color="#E5E5E5"> and then yeah finally</font><font color="#CCCCCC"> you put</font>

854
00:37:14,090 --> 00:37:22,490
it<font color="#E5E5E5"> into</font><font color="#CCCCCC"> production and</font><font color="#E5E5E5"> yes I spend most</font>

855
00:37:16,400 --> 00:37:25,940
of my time<font color="#E5E5E5"> making these planes so that's</font>

856
00:37:22,490 --> 00:37:28,009
about<font color="#E5E5E5"> it</font><font color="#CCCCCC"> finally flexions</font>

857
00:37:25,940 --> 00:37:30,680
<font color="#E5E5E5">let's ensure</font><font color="#CCCCCC"> good communication between</font>

858
00:37:28,010 --> 00:37:33,290
<font color="#E5E5E5">all teams</font><font color="#CCCCCC"> most of the people I was</font>

859
00:37:30,680 --> 00:37:35,569
working<font color="#E5E5E5"> with was remote in London and I</font>

860
00:37:33,290 --> 00:37:38,240
<font color="#E5E5E5">was the only guy</font><font color="#CCCCCC"> in San Francisco so</font>

861
00:37:35,570 --> 00:37:42,300
ensuring that<font color="#E5E5E5"> everything was documented</font>

862
00:37:38,240 --> 00:37:43,799
<font color="#CCCCCC">it was very very</font><font color="#E5E5E5"> very important and that</font>

863
00:37:42,300 --> 00:37:46,050
that's<font color="#E5E5E5"> the second point I wanted to make</font>

864
00:37:43,800 --> 00:37:48,000
<font color="#CCCCCC">you know also</font><font color="#E5E5E5"> you want to be very</font>

865
00:37:46,050 --> 00:37:49,710
<font color="#CCCCCC">patient with everything</font><font color="#E5E5E5"> especially if</font>

866
00:37:48,000 --> 00:37:52,380
you do plan on<font color="#CCCCCC"> making your</font><font color="#E5E5E5"> own custom</font>

867
00:37:49,710 --> 00:37:54,510
DLL<font color="#E5E5E5"> and maybe using a kernel debugger</font>

868
00:37:52,380 --> 00:37:56,790
<font color="#CCCCCC">you want to be very patient</font><font color="#E5E5E5"> and the last</font>

869
00:37:54,510 --> 00:38:00,480
thing is I hope<font color="#E5E5E5"> I don't touch PowerShell</font>

870
00:37:56,790 --> 00:38:02,130
again and I don't<font color="#E5E5E5"> guys didn't find</font><font color="#CCCCCC"> the</font>

871
00:38:00,480 --> 00:38:06,050
sarcastic<font color="#E5E5E5"> comment that funny I thought</font>

872
00:38:02,130 --> 00:38:09,119
those<font color="#CCCCCC"> hilarious anyway that's</font><font color="#E5E5E5"> about it</font><font color="#CCCCCC"> I</font>

873
00:38:06,050 --> 00:38:12,450
have a blog<font color="#CCCCCC"> post which details all of</font>

874
00:38:09,119 --> 00:38:13,710
this<font color="#CCCCCC"> so</font><font color="#E5E5E5"> you can check that</font><font color="#CCCCCC"> out</font><font color="#E5E5E5"> or you</font>

875
00:38:12,450 --> 00:38:15,960
can<font color="#CCCCCC"> just search Yelp Active Directory</font>

876
00:38:13,710 --> 00:38:18,900
<font color="#E5E5E5">password blacklisting it'll include the</font>

877
00:38:15,960 --> 00:38:21,119
code for the testing<font color="#CCCCCC"> and I think also</font>

878
00:38:18,900 --> 00:38:24,420
<font color="#E5E5E5">the code for our steps for instil</font>

879
00:38:21,119 --> 00:38:26,609
installing your DLL<font color="#E5E5E5"> and then lastly</font>

880
00:38:24,420 --> 00:38:28,260
yelps hiring especially for the security

881
00:38:26,609 --> 00:38:29,340
team I'm<font color="#E5E5E5"> part of the corporate security</font>

882
00:38:28,260 --> 00:38:32,640
team so if you're<font color="#CCCCCC"> interested you can</font>

883
00:38:29,340 --> 00:38:35,640
<font color="#E5E5E5">talk to me later</font><font color="#CCCCCC"> but that's</font><font color="#E5E5E5"> it</font>

884
00:38:32,640 --> 00:38:40,720
so thank<font color="#E5E5E5"> you</font>

885
00:38:35,640 --> 00:39:03,680
[Applause]

886
00:38:40,720 --> 00:39:06,140
yeah what you used inside the<font color="#CCCCCC"> DLL yeah</font>

887
00:39:03,680 --> 00:39:08,480
so if you<font color="#CCCCCC"> look</font><font color="#E5E5E5"> at most</font><font color="#CCCCCC"> password dumps</font>

888
00:39:06,140 --> 00:39:10,279
these days<font color="#CCCCCC"> most of them will be</font><font color="#E5E5E5"> hashed</font>

889
00:39:08,480 --> 00:39:12,440
already and I<font color="#E5E5E5"> think you'll</font><font color="#CCCCCC"> find that</font>

890
00:39:10,279 --> 00:39:15,020
sha-1 hashes<font color="#CCCCCC"> are the most common but the</font>

891
00:39:12,440 --> 00:39:16,789
actual authentication<font color="#E5E5E5"> flow works in such</font>

892
00:39:15,020 --> 00:39:18,710
that you have<font color="#CCCCCC"> the password pass to your</font>

893
00:39:16,789 --> 00:39:21,380
local security<font color="#CCCCCC"> authority and then that</font>

894
00:39:18,710 --> 00:39:23,299
actually<font color="#CCCCCC"> so your DLL service will sha-1</font>

895
00:39:21,380 --> 00:39:30,559
hash that<font color="#CCCCCC"> password</font><font color="#E5E5E5"> and compare with</font>

896
00:39:23,299 --> 00:39:33,440
what's in<font color="#CCCCCC"> the dump yeah so there's been</font>

897
00:39:30,559 --> 00:39:36,799
a lot of discussion<font color="#CCCCCC"> over the past few</font>

898
00:39:33,440 --> 00:39:40,640
<font color="#E5E5E5">months about</font><font color="#CCCCCC"> how large blacklist should</font>

899
00:39:36,799 --> 00:39:43,339
be if you make them too<font color="#E5E5E5"> long</font><font color="#CCCCCC"> you know if</font>

900
00:39:40,640 --> 00:39:46,098
you use<font color="#CCCCCC"> Troy hunts half a billion</font>

901
00:39:43,339 --> 00:39:48,319
passwords<font color="#E5E5E5"> you're going to really annoy</font>

902
00:39:46,099 --> 00:39:50,119
users<font color="#E5E5E5"> and if you make it too</font><font color="#CCCCCC"> short</font>

903
00:39:48,319 --> 00:39:53,599
you're<font color="#E5E5E5"> not getting the effect that you</font>

904
00:39:50,119 --> 00:39:57,980
<font color="#E5E5E5">want so do you have any opinions on how</font>

905
00:39:53,599 --> 00:40:02,539
larger yours<font color="#E5E5E5"> and do you have opinions on</font>

906
00:39:57,980 --> 00:40:05,630
what the appropriate<font color="#CCCCCC"> size is yeah so we</font>

907
00:40:02,539 --> 00:40:07,250
use about<font color="#E5E5E5"> I think it was like ten to a</font>

908
00:40:05,630 --> 00:40:10,190
hundred<font color="#CCCCCC"> million and we didn't really</font>

909
00:40:07,250 --> 00:40:12,650
<font color="#E5E5E5">face</font><font color="#CCCCCC"> any performance constraints</font><font color="#E5E5E5"> and</font>

910
00:40:10,190 --> 00:40:15,230
<font color="#E5E5E5">also depending on where you're sampling</font>

911
00:40:12,650 --> 00:40:17,440
these passwords from you might for

912
00:40:15,230 --> 00:40:20,539
<font color="#CCCCCC">example the sampling a bunch that</font>

913
00:40:17,440 --> 00:40:23,150
<font color="#E5E5E5">conform to</font><font color="#CCCCCC"> your</font><font color="#E5E5E5"> password policy so we</font>

914
00:40:20,539 --> 00:40:25,670
<font color="#CCCCCC">did take like for the sha-1 hashes you</font>

915
00:40:23,150 --> 00:40:27,650
can't know unless<font color="#CCCCCC"> you like do a</font>

916
00:40:25,670 --> 00:40:30,470
dictionary attack<font color="#CCCCCC"> yourself with a bunch</font>

917
00:40:27,650 --> 00:40:32,480
<font color="#E5E5E5">of GPUs</font><font color="#CCCCCC"> but for those that you do know</font>

918
00:40:30,470 --> 00:40:34,399
you can<font color="#CCCCCC"> actually filter</font><font color="#E5E5E5"> them against</font>

919
00:40:32,480 --> 00:40:36,079
<font color="#E5E5E5">those that pass your password policies</font>

920
00:40:34,400 --> 00:40:38,720
and then<font color="#CCCCCC"> shot one of</font><font color="#E5E5E5"> those yourselves</font>

921
00:40:36,079 --> 00:40:39,890
and put them in another<font color="#CCCCCC"> interesting</font>

922
00:40:38,720 --> 00:40:42,410
<font color="#CCCCCC">thing</font><font color="#E5E5E5"> you can do which</font><font color="#CCCCCC"> is really</font>

923
00:40:39,890 --> 00:40:44,029
effective is so we at Yelp<font color="#E5E5E5"> not only do</font>

924
00:40:42,410 --> 00:40:46,910
<font color="#E5E5E5">we sample these commonly used passwords</font>

925
00:40:44,029 --> 00:40:48,380
<font color="#E5E5E5">but we created our</font><font color="#CCCCCC"> own using</font><font color="#E5E5E5"> some</font>

926
00:40:46,910 --> 00:40:50,720
algorithms<font color="#E5E5E5"> that would add where it's</font>

927
00:40:48,380 --> 00:40:52,490
like Yelp<font color="#E5E5E5"> or maybe even the months of</font>

928
00:40:50,720 --> 00:40:54,470
the<font color="#CCCCCC"> year because they're</font><font color="#E5E5E5"> extremely</font>

929
00:40:52,490 --> 00:41:05,479
popular<font color="#E5E5E5"> and will be used by</font><font color="#CCCCCC"> your</font>

930
00:40:54,470 --> 00:41:07,669
employees<font color="#E5E5E5"> trust me yeah</font><font color="#CCCCCC"> yeah for the</font>

931
00:41:05,480 --> 00:41:10,490
filtering message have I included the

932
00:41:07,670 --> 00:41:12,980
hash ID<font color="#E5E5E5"> yeah yeah yeah that could be</font><font color="#CCCCCC"> a</font>

933
00:41:10,490 --> 00:41:15,169
<font color="#E5E5E5">good</font><font color="#CCCCCC"> idea especially for your testing</font>

934
00:41:12,980 --> 00:41:17,210
framework<font color="#E5E5E5"> so what I showed wasn't our</font>

935
00:41:15,170 --> 00:41:20,710
<font color="#E5E5E5">actual official spunky index</font><font color="#CCCCCC"> it was just</font>

936
00:41:17,210 --> 00:41:20,710
something<font color="#CCCCCC"> I</font><font color="#E5E5E5"> generated but yeah that's</font>

937
00:41:23,290 --> 00:41:34,310
right so so<font color="#E5E5E5"> right I said in an earlier</font>

938
00:41:31,510 --> 00:41:36,200
<font color="#E5E5E5">slide though it doesn't seem like you</font>

939
00:41:34,310 --> 00:41:38,150
<font color="#CCCCCC">can change that message because</font><font color="#E5E5E5"> it's</font>

940
00:41:36,200 --> 00:41:40,520
<font color="#E5E5E5">hard-coded into Microsoft's operating</font>

941
00:41:38,150 --> 00:41:45,410
system so unfortunately you can't

942
00:41:40,520 --> 00:41:46,820
<font color="#E5E5E5">configure that oh</font><font color="#CCCCCC"> oh yeah you know it's</font>

943
00:41:45,410 --> 00:41:48,470
<font color="#E5E5E5">this default</font><font color="#CCCCCC"> message that's</font><font color="#E5E5E5"> always</font>

944
00:41:46,820 --> 00:41:50,600
returned on a password authentication

945
00:41:48,470 --> 00:41:54,020
failure so you can that you<font color="#E5E5E5"> can't change</font>

946
00:41:50,600 --> 00:41:55,670
<font color="#E5E5E5">that unfortunately quite</font><font color="#CCCCCC"> a practical</font>

947
00:41:54,020 --> 00:41:57,350
<font color="#E5E5E5">question about updating the</font><font color="#CCCCCC"> passwords to</font>

948
00:41:55,670 --> 00:42:00,470
<font color="#CCCCCC">cross the domain controllers how do you</font>

949
00:41:57,350 --> 00:42:02,540
do that<font color="#CCCCCC"> okay so that's the reason</font><font color="#E5E5E5"> the</font>

950
00:42:00,470 --> 00:42:04,580
<font color="#E5E5E5">service-oriented architecture is so</font>

951
00:42:02,540 --> 00:42:06,380
great right so the database<font color="#E5E5E5"> doesn't</font>

952
00:42:04,580 --> 00:42:08,660
necessarily have to<font color="#E5E5E5"> exist in your domain</font>

953
00:42:06,380 --> 00:42:11,090
controller the domain controller is only

954
00:42:08,660 --> 00:42:13,810
calling<font color="#E5E5E5"> this DLL which calls upon</font><font color="#CCCCCC"> the</font>

955
00:42:11,090 --> 00:42:13,810
service which<font color="#E5E5E5"> can</font>

956
00:42:18,109 --> 00:42:22,380
so currently yeah we're<font color="#E5E5E5"> doing that and I</font>

957
00:42:20,999 --> 00:42:24,180
guess that's<font color="#E5E5E5"> why he asked about</font>

958
00:42:22,380 --> 00:42:52,259
<font color="#CCCCCC">scalability concerns</font><font color="#E5E5E5"> so that</font><font color="#CCCCCC"> is</font>

959
00:42:24,180 --> 00:42:56,098
something<font color="#E5E5E5"> we</font><font color="#CCCCCC"> have to think about okay</font><font color="#E5E5E5"> so</font>

960
00:42:52,259 --> 00:42:58,609
<font color="#E5E5E5">oh yeah okay so so actually what we did</font>

961
00:42:56,099 --> 00:43:01,769
is we understand your problem and

962
00:42:58,609 --> 00:43:04,589
because of this we explicitly targeted

963
00:43:01,769 --> 00:43:07,140
<font color="#E5E5E5">the most commonly used</font><font color="#CCCCCC"> passwords instead</font>

964
00:43:04,589 --> 00:43:09,930
of just random password leaks<font color="#E5E5E5"> and that's</font>

965
00:43:07,140 --> 00:43:11,848
how we got<font color="#CCCCCC"> the top</font><font color="#E5E5E5"> 10 or 100</font><font color="#CCCCCC"> million</font>

966
00:43:09,930 --> 00:43:13,948
from<font color="#E5E5E5"> various sources with</font><font color="#CCCCCC"> having been</font>

967
00:43:11,849 --> 00:43:15,630
<font color="#E5E5E5">pwned calm being just one of them</font>

968
00:43:13,949 --> 00:43:18,239
because we<font color="#E5E5E5"> ran tests on this and we did</font>

969
00:43:15,630 --> 00:43:19,709
realize like almost<font color="#E5E5E5"> all of these either</font>

970
00:43:18,239 --> 00:43:22,529
weren't conforming<font color="#CCCCCC"> to our password</font>

971
00:43:19,709 --> 00:43:25,109
policy or<font color="#E5E5E5"> we're just too so obscured</font>

972
00:43:22,529 --> 00:43:26,549
that<font color="#E5E5E5"> no one was using them</font><font color="#CCCCCC"> and again</font>

973
00:43:25,109 --> 00:43:28,078
this is<font color="#E5E5E5"> for our internal corporate</font>

974
00:43:26,549 --> 00:43:32,390
systems we do something entirely

975
00:43:28,079 --> 00:43:32,390
different<font color="#CCCCCC"> for actual user authentication</font>

976
00:43:37,039 --> 00:43:41,940
<font color="#CCCCCC">since the error message in Windows can't</font>

977
00:43:39,329 --> 00:43:46,619
be updated directly<font color="#CCCCCC"> did you have user</font>

978
00:43:41,940 --> 00:43:49,380
education<font color="#CCCCCC"> outreach type session or when</font>

979
00:43:46,619 --> 00:43:51,059
<font color="#E5E5E5">this new blacklist was implemented right</font>

980
00:43:49,380 --> 00:43:52,109
that's<font color="#E5E5E5"> actually something that's</font><font color="#CCCCCC"> ongoing</font>

981
00:43:51,059 --> 00:43:56,579
which is a great point<font color="#E5E5E5"> you're making</font>

982
00:43:52,109 --> 00:43:58,979
which<font color="#CCCCCC"> is how do we notify</font><font color="#E5E5E5"> the users</font><font color="#CCCCCC"> that</font>

983
00:43:56,579 --> 00:44:00,989
<font color="#CCCCCC">this error message</font><font color="#E5E5E5"> might mean</font><font color="#CCCCCC"> that</font>

984
00:43:58,979 --> 00:44:03,058
they've been blacklisted<font color="#CCCCCC"> so that's where</font>

985
00:44:00,989 --> 00:44:05,309
the logging infrastructure comes in so

986
00:44:03,059 --> 00:44:08,190
you can configure these logs<font color="#CCCCCC"> to detail</font>

987
00:44:05,309 --> 00:44:11,699
this the specifics of why a user<font color="#E5E5E5"> was</font>

988
00:44:08,190 --> 00:44:13,829
blacklisted<font color="#CCCCCC"> or</font><font color="#E5E5E5"> not and currently what we</font>

989
00:44:11,699 --> 00:44:16,859
do is we basically<font color="#E5E5E5"> scrape these logs and</font>

990
00:44:13,829 --> 00:44:19,109
<font color="#E5E5E5">then email our individual employees or</font>

991
00:44:16,859 --> 00:44:20,819
users who<font color="#CCCCCC"> have been compromised through</font>

992
00:44:19,109 --> 00:44:22,739
<font color="#E5E5E5">this attack but you know developing a</font>

993
00:44:20,819 --> 00:44:26,209
better strategy<font color="#E5E5E5"> for this</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> something</font>

994
00:44:22,739 --> 00:44:26,209
that we're currently thinking about

995
00:44:30,530 --> 00:44:35,310
<font color="#E5E5E5">um</font><font color="#CCCCCC"> I mean</font><font color="#E5E5E5"> the biggest problem with me is</font>

996
00:44:33,900 --> 00:44:37,980
I<font color="#CCCCCC"> just didn't know anything about</font>

997
00:44:35,310 --> 00:44:40,380
<font color="#E5E5E5">PowerShell and it was really stressful</font>

998
00:44:37,980 --> 00:44:43,860
learning about how to debug everything

999
00:44:40,380 --> 00:44:46,230
<font color="#E5E5E5">but after</font><font color="#CCCCCC"> you like if I had this demo</font>

1000
00:44:43,860 --> 00:44:47,820
<font color="#E5E5E5">and if I could see this demo I</font><font color="#CCCCCC"> just did</font>

1001
00:44:46,230 --> 00:44:59,840
when I was<font color="#CCCCCC"> doing</font><font color="#E5E5E5"> it could probably take</font>

1002
00:44:47,820 --> 00:44:59,840
<font color="#E5E5E5">me a week honestly</font><font color="#CCCCCC"> yeah anyone ice</font>

1003
00:45:04,700 --> 00:45:10,140
against known password my question<font color="#E5E5E5"> is</font>

1004
00:45:08,430 --> 00:45:12,450
<font color="#E5E5E5">that have you gone beyond this where</font>

1005
00:45:10,140 --> 00:45:13,859
you're<font color="#CCCCCC"> actually searching</font><font color="#E5E5E5"> passwords that</font>

1006
00:45:12,450 --> 00:45:15,629
<font color="#E5E5E5">are already in your database hash</font>

1007
00:45:13,860 --> 00:45:19,410
however Microsoft's doing it in your

1008
00:45:15,630 --> 00:45:21,330
domain and you're alerting those people

1009
00:45:19,410 --> 00:45:25,319
your password it's a very<font color="#E5E5E5"> common one you</font>

1010
00:45:21,330 --> 00:45:28,250
need to change it<font color="#E5E5E5"> right</font><font color="#CCCCCC"> so we're like I</font>

1011
00:45:25,320 --> 00:45:32,550
said to him we haven't<font color="#E5E5E5"> developed an</font>

1012
00:45:28,250 --> 00:45:34,970
accurate pipeline<font color="#E5E5E5"> for telling employees</font>

1013
00:45:32,550 --> 00:45:37,590
that they've<font color="#E5E5E5"> been compromised because of</font>

1014
00:45:34,970 --> 00:45:39,450
<font color="#CCCCCC">blacklisting we've only made it really</font>

1015
00:45:37,590 --> 00:45:41,490
general at this point and right now what

1016
00:45:39,450 --> 00:45:42,990
we're doing is these emails through

1017
00:45:41,490 --> 00:45:44,640
scraping of the<font color="#E5E5E5"> logs which isn't</font><font color="#CCCCCC"> very</font>

1018
00:45:42,990 --> 00:45:46,680
efficient but this is a relatively new

1019
00:45:44,640 --> 00:45:48,470
service so we're actually<font color="#E5E5E5"> doing that</font>

1020
00:45:46,680 --> 00:45:52,529
<font color="#E5E5E5">right</font><font color="#CCCCCC"> now it should be done pretty</font><font color="#E5E5E5"> soon</font>

1021
00:45:48,470 --> 00:45:54,779
<font color="#CCCCCC">hey</font><font color="#E5E5E5"> yeah do you know if there is any way</font>

1022
00:45:52,530 --> 00:45:57,930
to use kind<font color="#E5E5E5"> of a</font><font color="#CCCCCC"> wild-card to avoid</font>

1023
00:45:54,780 --> 00:46:00,360
certain<font color="#E5E5E5"> words</font><font color="#CCCCCC"> from being used yeah so so</font>

1024
00:45:57,930 --> 00:46:02,819
that's<font color="#E5E5E5"> why this</font><font color="#CCCCCC"> DLL</font><font color="#E5E5E5"> is so useful like we</font>

1025
00:46:00,360 --> 00:46:04,830
added some<font color="#CCCCCC"> of</font><font color="#E5E5E5"> this logic</font><font color="#CCCCCC"> to our password</font>

1026
00:46:02,820 --> 00:46:06,510
filtering service<font color="#CCCCCC"> too you can just put</font>

1027
00:46:04,830 --> 00:46:07,980
<font color="#CCCCCC">that in the</font><font color="#E5E5E5"> service</font><font color="#CCCCCC"> that the dll calls</font>

1028
00:46:06,510 --> 00:46:09,180
<font color="#E5E5E5">whatever type of</font><font color="#CCCCCC"> you know</font><font color="#E5E5E5"> pattern</font>

1029
00:46:07,980 --> 00:46:10,560
<font color="#E5E5E5">matching you might want to do you</font><font color="#CCCCCC"> can</font>

1030
00:46:09,180 --> 00:46:12,330
<font color="#E5E5E5">put it in</font><font color="#CCCCCC"> that it's really easy to</font>

1031
00:46:10,560 --> 00:46:18,470
<font color="#E5E5E5">configure it's just basic reggae yeah</font>

1032
00:46:12,330 --> 00:46:18,470
thank you yeah

1033
00:46:20,660 --> 00:46:25,558
<font color="#CCCCCC">just a</font><font color="#E5E5E5"> another</font><font color="#CCCCCC"> quick question</font><font color="#E5E5E5"> about the</font>

1034
00:46:22,920 --> 00:46:28,880
service<font color="#CCCCCC"> because it is a service I assume</font>

1035
00:46:25,559 --> 00:46:32,029
<font color="#CCCCCC">that a</font><font color="#E5E5E5"> couple of things it can be run on</font>

1036
00:46:28,880 --> 00:46:37,680
<font color="#E5E5E5">one instance or on a distributed</font>

1037
00:46:32,029 --> 00:46:40,319
framework potentially and also if you

1038
00:46:37,680 --> 00:46:42,930
can<font color="#E5E5E5"> write your</font><font color="#CCCCCC"> own rules in</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> service</font>

1039
00:46:40,319 --> 00:46:45,089
can do things<font color="#E5E5E5"> more</font><font color="#CCCCCC"> than</font><font color="#E5E5E5"> just</font><font color="#CCCCCC"> regex can</font>

1040
00:46:42,930 --> 00:46:47,970
it use like custom functions and<font color="#E5E5E5"> things</font>

1041
00:46:45,089 --> 00:46:50,369
like that<font color="#CCCCCC"> I mean yeah yeah it's all up</font>

1042
00:46:47,970 --> 00:46:52,618
<font color="#CCCCCC">to how you want</font><font color="#E5E5E5"> to program it the the</font>

1043
00:46:50,369 --> 00:46:54,390
<font color="#CCCCCC">baseline is you have this</font><font color="#E5E5E5"> DLL with this</font>

1044
00:46:52,619 --> 00:46:58,589
interface<font color="#E5E5E5"> and you can implement these</font>

1045
00:46:54,390 --> 00:47:01,680
functions<font color="#E5E5E5"> however</font><font color="#CCCCCC"> you want so yeah it's</font>

1046
00:46:58,589 --> 00:47:03,538
really<font color="#E5E5E5"> really you know flexible</font><font color="#CCCCCC"> I was</font>

1047
00:47:01,680 --> 00:47:05,490
wondering I I don't<font color="#CCCCCC"> know is there</font><font color="#E5E5E5"> a</font><font color="#CCCCCC"> way</font>

1048
00:47:03,539 --> 00:47:07,140
to check<font color="#E5E5E5"> for</font><font color="#CCCCCC"> this is not exactly what</font>

1049
00:47:05,490 --> 00:47:09,180
<font color="#E5E5E5">you're talking</font><font color="#CCCCCC"> about but is there a</font><font color="#E5E5E5"> way</font>

1050
00:47:07,140 --> 00:47:13,049
for to<font color="#E5E5E5"> check for duplicate characters of</font>

1051
00:47:09,180 --> 00:47:16,529
any character in a password<font color="#E5E5E5"> yeah you can</font>

1052
00:47:13,049 --> 00:47:20,460
<font color="#E5E5E5">you can</font><font color="#CCCCCC"> just</font><font color="#E5E5E5"> uh do that function so so</font>

1053
00:47:16,529 --> 00:47:22,170
the<font color="#CCCCCC"> DLL is just this file that will call</font>

1054
00:47:20,460 --> 00:47:23,819
<font color="#E5E5E5">whatever service you've registered and</font>

1055
00:47:22,170 --> 00:47:26,190
your service can be<font color="#E5E5E5"> running like c-sharp</font>

1056
00:47:23,819 --> 00:47:27,569
<font color="#E5E5E5">C++ or whatever and you</font><font color="#CCCCCC"> can do all this</font>

1057
00:47:26,190 --> 00:47:29,190
filtering<font color="#E5E5E5"> on your own it's</font><font color="#CCCCCC"> just like</font>

1058
00:47:27,569 --> 00:47:31,230
basic code matching so you could

1059
00:47:29,190 --> 00:47:32,519
definitely do<font color="#E5E5E5"> that that's that's</font>

1060
00:47:31,230 --> 00:47:34,140
something<font color="#E5E5E5"> a lot of people</font><font color="#CCCCCC"> do</font><font color="#E5E5E5"> actually</font>

1061
00:47:32,519 --> 00:47:36,749
which is<font color="#E5E5E5"> duplicate consecutive</font>

1062
00:47:34,140 --> 00:47:38,910
characters<font color="#CCCCCC"> what confused about is that</font>

1063
00:47:36,749 --> 00:47:41,069
<font color="#E5E5E5">for</font><font color="#CCCCCC"> example</font><font color="#E5E5E5"> if your if</font><font color="#CCCCCC"> your if</font><font color="#E5E5E5"> your</font>

1064
00:47:38,910 --> 00:47:43,109
password<font color="#CCCCCC"> was</font><font color="#E5E5E5"> 12 characters long yeah</font>

1065
00:47:41,069 --> 00:47:46,440
how would it how wouldn't know that the

1066
00:47:43,109 --> 00:47:48,869
the you<font color="#E5E5E5"> typed a twice and that that</font>

1067
00:47:46,440 --> 00:47:50,670
position<font color="#CCCCCC"> that a twice was you know ten</font>

1068
00:47:48,869 --> 00:47:53,099
<font color="#E5E5E5">characters and versus two characters in</font>

1069
00:47:50,670 --> 00:47:56,339
in the hash<font color="#CCCCCC"> that you have oh okay sorry</font>

1070
00:47:53,099 --> 00:47:58,799
<font color="#CCCCCC">so the LSA right the</font><font color="#E5E5E5"> password</font><font color="#CCCCCC"> that it</font>

1071
00:47:56,339 --> 00:48:00,660
gets passed<font color="#E5E5E5"> is actually in plain text</font>

1072
00:47:58,799 --> 00:48:02,970
<font color="#E5E5E5">that's why this is such</font><font color="#CCCCCC"> a you</font><font color="#E5E5E5"> know</font>

1073
00:48:00,660 --> 00:48:05,848
sensitive<font color="#E5E5E5"> service that you want to make</font>

1074
00:48:02,970 --> 00:48:07,738
sure<font color="#E5E5E5"> it's</font><font color="#CCCCCC"> very secure</font><font color="#E5E5E5"> and then it does</font>

1075
00:48:05,849 --> 00:48:09,269
so you would do the<font color="#CCCCCC"> checking</font><font color="#E5E5E5"> there and</font>

1076
00:48:07,739 --> 00:48:12,119
then you - it and compare it against

1077
00:48:09,269 --> 00:48:14,038
<font color="#E5E5E5">your database</font><font color="#CCCCCC"> but that's why you</font><font color="#E5E5E5"> have</font>

1078
00:48:12,119 --> 00:48:16,619
there's a<font color="#CCCCCC"> lot of security concerns and a</font>

1079
00:48:14,039 --> 00:48:19,380
lot<font color="#E5E5E5"> of people might ask like</font><font color="#CCCCCC"> oh what if</font>

1080
00:48:16,619 --> 00:48:21,390
you pipe it<font color="#CCCCCC"> to you know</font><font color="#E5E5E5"> localhost what</font>

1081
00:48:19,380 --> 00:48:23,849
if someone's sniffing on your domain

1082
00:48:21,390 --> 00:48:26,578
controller<font color="#E5E5E5"> but usually the</font><font color="#CCCCCC"> the general</font>

1083
00:48:23,849 --> 00:48:28,019
<font color="#E5E5E5">response is if a malicious hacker is</font>

1084
00:48:26,579 --> 00:48:29,609
compromised your domain controller you

1085
00:48:28,019 --> 00:48:31,819
have<font color="#E5E5E5"> much bigger</font><font color="#CCCCCC"> things to worry about</font>

1086
00:48:29,609 --> 00:48:31,819
right

1087
00:48:36,130 --> 00:48:48,680
anyone who<font color="#CCCCCC"> like to ask how nervous</font>

1088
00:48:46,850 --> 00:48:51,740
various<font color="#CCCCCC"> aside means when you deployed in</font>

1089
00:48:48,680 --> 00:48:53,270
production<font color="#E5E5E5"> I'm sorry what how nervous</font>

1090
00:48:51,740 --> 00:48:55,640
may your society means when you<font color="#CCCCCC"> deployed</font>

1091
00:48:53,270 --> 00:48:57,770
this<font color="#E5E5E5"> in production</font><font color="#CCCCCC"> oh yeah</font>

1092
00:48:55,640 --> 00:49:00,350
I mean that's why I<font color="#CCCCCC"> emphasizes not</font>

1093
00:48:57,770 --> 00:49:01,940
<font color="#CCCCCC">enforcement and enforcement mode so we</font>

1094
00:49:00,350 --> 00:49:03,650
were doing<font color="#CCCCCC"> non enforcement mode for</font>

1095
00:49:01,940 --> 00:49:05,840
almost like<font color="#CCCCCC"> one and a half months</font><font color="#E5E5E5"> and I</font>

1096
00:49:03,650 --> 00:49:07,550
could do a bunch of aggregation<font color="#E5E5E5"> on the</font>

1097
00:49:05,840 --> 00:49:09,800
data we've already employed and we knew

1098
00:49:07,550 --> 00:49:11,480
there were<font color="#CCCCCC"> no issues whatsoever so</font><font color="#E5E5E5"> it's</font>

1099
00:49:09,800 --> 00:49:13,790
just a<font color="#E5E5E5"> matter of resetting the service</font>

1100
00:49:11,480 --> 00:49:16,810
with enforcement<font color="#E5E5E5"> mode turn it true so I</font>

1101
00:49:13,790 --> 00:49:16,810
wasn't<font color="#E5E5E5"> nervous at all actually</font>

1102
00:49:17,080 --> 00:49:22,940
you<font color="#E5E5E5"> you mentioned you're still kind of</font>

1103
00:49:20,270 --> 00:49:25,090
in the process<font color="#CCCCCC"> of the user education</font>

1104
00:49:22,940 --> 00:49:27,200
component of this<font color="#E5E5E5"> I have other plans for</font>

1105
00:49:25,090 --> 00:49:28,550
<font color="#E5E5E5">expanding this or changing the way that</font>

1106
00:49:27,200 --> 00:49:31,060
you've got it implemented<font color="#CCCCCC"> yet or is that</font>

1107
00:49:28,550 --> 00:49:36,110
still<font color="#CCCCCC"> something that</font><font color="#E5E5E5"> will come</font><font color="#CCCCCC"> with</font><font color="#E5E5E5"> time</font>

1108
00:49:31,060 --> 00:49:38,360
<font color="#CCCCCC">I think this is probably</font><font color="#E5E5E5"> the final part</font>

1109
00:49:36,110 --> 00:49:40,220
I<font color="#E5E5E5"> don't really see any other issues</font><font color="#CCCCCC"> like</font>

1110
00:49:38,360 --> 00:49:42,020
we have the<font color="#CCCCCC"> password filtering installed</font>

1111
00:49:40,220 --> 00:49:43,939
we<font color="#CCCCCC"> have the logging infrastructure there</font>

1112
00:49:42,020 --> 00:49:46,250
it's<font color="#E5E5E5"> just</font><font color="#CCCCCC"> making</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> whole pipeline more</font>

1113
00:49:43,940 --> 00:49:48,200
efficient for when someone<font color="#E5E5E5"> got</font>

1114
00:49:46,250 --> 00:49:50,570
compromised and it's in their log to

1115
00:49:48,200 --> 00:49:53,480
directly messaging the user for why this

1116
00:49:50,570 --> 00:49:59,290
<font color="#E5E5E5">is the case but that should be</font><font color="#CCCCCC"> the final</font>

1117
00:49:53,480 --> 00:49:59,290
<font color="#E5E5E5">part yeah questions</font>

1118
00:50:02,510 --> 00:50:10,369
less chance questions<font color="#CCCCCC"> I think that's it</font>

1119
00:50:07,260 --> 00:50:10,369
all<font color="#E5E5E5"> right cool thank you</font><font color="#CCCCCC"> guys so much</font>

1120
00:50:10,400 --> 00:50:13,719
[Applause]

1121
00:50:10,650 --> 00:50:13,719
[Music]

