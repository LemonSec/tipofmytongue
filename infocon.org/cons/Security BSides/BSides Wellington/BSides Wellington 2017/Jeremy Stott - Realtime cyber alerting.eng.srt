1
00:00:04,310 --> 00:00:09,170
hello it works oh yes I'm here real-time

2
00:00:07,520 --> 00:00:10,370
cyberlearning this was a title I came up

3
00:00:09,170 --> 00:00:13,760
with before I'd really figure the rest

4
00:00:10,370 --> 00:00:15,379
out so sorry about that then it was in

5
00:00:13,760 --> 00:00:17,120
the schedule already so I didn't really

6
00:00:15,379 --> 00:00:19,130
I didn't really want to change a bit

7
00:00:17,120 --> 00:00:21,470
cyber living real time it wasn't with

8
00:00:19,130 --> 00:00:21,950
the little asterisks can you read that

9
00:00:21,470 --> 00:00:23,180
bit

10
00:00:21,950 --> 00:00:27,950
yeah maybe more like 15 minutes

11
00:00:23,180 --> 00:00:30,259
sometimes Who am I I'm Jeremy

12
00:00:27,950 --> 00:00:32,719
I'm a security operations engineer at

13
00:00:30,260 --> 00:00:35,600
vind and in the past I've dabbled with

14
00:00:32,719 --> 00:00:37,460
back ODEs broken barcodes capacitive

15
00:00:35,600 --> 00:00:40,670
touch opening doors from the wrong side

16
00:00:37,460 --> 00:00:44,179
or the right side unsuccessful bug

17
00:00:40,670 --> 00:00:50,269
bounty hunting recently I managed to

18
00:00:44,179 --> 00:00:52,510
make a talk out of it so how do you find

19
00:00:50,269 --> 00:00:54,829
out you've been hacked right this is a

20
00:00:52,510 --> 00:00:57,769
blog post on the second generic blog I

21
00:00:54,829 --> 00:00:58,940
found quite cool maybe an engine maybe

22
00:00:57,769 --> 00:01:01,280
an employee notices something strange

23
00:00:58,940 --> 00:01:03,229
you know that's that's that's great they

24
00:01:01,280 --> 00:01:05,960
notify you maybe a third-party vendor

25
00:01:03,229 --> 00:01:07,760
reports a bug but embarrassing you know

26
00:01:05,960 --> 00:01:09,890
to have to answer to them ago oh yes

27
00:01:07,760 --> 00:01:12,920
thank you very much maybe a hacker

28
00:01:09,890 --> 00:01:14,270
submits a vulnerability and so it's a

29
00:01:12,920 --> 00:01:15,619
vulnerability that and then you go back

30
00:01:14,270 --> 00:01:17,509
and have a look and oh yes actually we

31
00:01:15,619 --> 00:01:18,950
were hacked and or maybe you don't find

32
00:01:17,509 --> 00:01:22,820
out and this is like an order of

33
00:01:18,950 --> 00:01:24,110
biscuits - worst case maybe I've sort of

34
00:01:22,820 --> 00:01:26,630
given rough times if maybe this is like

35
00:01:24,110 --> 00:01:27,979
a day you know some production code goes

36
00:01:26,630 --> 00:01:32,689
out an employee notices something

37
00:01:27,979 --> 00:01:34,579
strange maybe a week a vendor notices a

38
00:01:32,689 --> 00:01:35,898
bug that could be longer - but sort of

39
00:01:34,579 --> 00:01:38,119
like maybe a heck of submits that could

40
00:01:35,899 --> 00:01:40,219
be like a month you know or like you

41
00:01:38,119 --> 00:01:41,570
never find out so what we want to be is

42
00:01:40,219 --> 00:01:43,158
gonna be in the top you know we want to

43
00:01:41,570 --> 00:01:47,270
be employees noticing something strange

44
00:01:43,159 --> 00:01:49,429
really fast so all everywhere I always

45
00:01:47,270 --> 00:01:50,869
see you know watch your logs what she

46
00:01:49,429 --> 00:01:53,990
logs what she loves watch your logs you

47
00:01:50,869 --> 00:01:55,070
know what she logs but the problem is

48
00:01:53,990 --> 00:01:56,710
with watching phones it's really boring

49
00:01:55,070 --> 00:01:58,880
you know they're not doing anything

50
00:01:56,710 --> 00:02:00,770
there's lots of them they're kind of

51
00:01:58,880 --> 00:02:01,729
brown looking and things you know so

52
00:02:00,770 --> 00:02:04,039
really that's like no one ends up

53
00:02:01,729 --> 00:02:09,330
watching your locks that's quite say it

54
00:02:04,039 --> 00:02:15,720
but everybody watches a fire right

55
00:02:09,330 --> 00:02:18,340
let's go away yeah Wow

56
00:02:15,720 --> 00:02:20,250
just can't stop watching that fire this

57
00:02:18,340 --> 00:02:25,510
is the slow mo guys the YouTube channel

58
00:02:20,250 --> 00:02:28,240
so I had this brainwave idea what if my

59
00:02:25,510 --> 00:02:30,609
new startup log fire still working at

60
00:02:28,240 --> 00:02:33,730
Ben this is just on the side right log

61
00:02:30,610 --> 00:02:36,700
file IO you sent us your logs we set

62
00:02:33,730 --> 00:02:40,209
them on fire so that you will then look

63
00:02:36,700 --> 00:02:41,649
at them it uses some incredible

64
00:02:40,210 --> 00:02:43,650
technologies you know it's a disruptive

65
00:02:41,650 --> 00:02:45,460
advanced machine learning nearly tweak-d

66
00:02:43,650 --> 00:02:50,640
blockchain has got the blockchain in

67
00:02:45,460 --> 00:02:53,140
there multi-religious doors for logging

68
00:02:50,640 --> 00:02:56,500
so this is a method of procrastinating

69
00:02:53,140 --> 00:02:59,140
this talk you know and I actually went

70
00:02:56,500 --> 00:03:02,260
ahead and implemented some of this so

71
00:02:59,140 --> 00:03:03,760
when you post your log to my API there's

72
00:03:02,260 --> 00:03:07,679
only one endpoint it just accepts logs

73
00:03:03,760 --> 00:03:07,679
it actually adds it to a blockchain

74
00:03:09,540 --> 00:03:13,510
mostly I did this because I found this

75
00:03:11,650 --> 00:03:17,400
naive chain implementation it's

76
00:03:13,510 --> 00:03:17,399
JavaScript as 200 lines seemed perfect

77
00:03:19,090 --> 00:03:22,690
and if you get on that end point it just

78
00:03:20,890 --> 00:03:25,119
gives you the whole blockchain so those

79
00:03:22,690 --> 00:03:28,030
are the only two operations so I had the

80
00:03:25,120 --> 00:03:30,850
blockchain Pat I was on my way to to

81
00:03:28,030 --> 00:03:35,410
instant success but I needed to add the

82
00:03:30,850 --> 00:03:37,750
fire right so maybe you post your log

83
00:03:35,410 --> 00:03:39,940
it's just 200 okay you know maybe you

84
00:03:37,750 --> 00:03:41,520
post another one that's 200 okay no

85
00:03:39,940 --> 00:03:46,900
everything is fine

86
00:03:41,520 --> 00:03:49,240
hang on 14 gone that just deleted the

87
00:03:46,900 --> 00:03:50,560
whole block chain mostly because it's

88
00:03:49,240 --> 00:03:52,630
like an in-memory database and then you

89
00:03:50,560 --> 00:03:53,950
run out of memory eventually so I just

90
00:03:52,630 --> 00:03:55,180
randomly deletes the blockchain and then

91
00:03:53,950 --> 00:03:57,160
you just you're okay right

92
00:03:55,180 --> 00:03:58,240
hopefully the JavaScript garbage

93
00:03:57,160 --> 00:04:01,720
collector picks it up

94
00:03:58,240 --> 00:04:04,180
will see sometimes is a 4-5-1 and

95
00:04:01,720 --> 00:04:06,870
available for legal reasons and this is

96
00:04:04,180 --> 00:04:11,380
basically the gdp are kicking in so

97
00:04:06,870 --> 00:04:12,670
anytime there's a UK europe mentioned in

98
00:04:11,380 --> 00:04:16,719
your logline it just doesn't accept it

99
00:04:12,670 --> 00:04:18,760
as unavailable there's also a 2 or 3

100
00:04:16,720 --> 00:04:21,370
which is my favorite and it also

101
00:04:18,760 --> 00:04:22,510
includes the a JSON error message LP LP

102
00:04:21,370 --> 00:04:24,880
0 on fire

103
00:04:22,510 --> 00:04:26,650
this is the this is my favorite message

104
00:04:24,880 --> 00:04:29,920
to return I think it's 5% of the time

105
00:04:26,650 --> 00:04:33,010
you get this one printer on fire

106
00:04:29,920 --> 00:04:35,410
actually is was in the I don't if it

107
00:04:33,010 --> 00:04:37,150
still is in the UNIX kernel as a message

108
00:04:35,410 --> 00:04:39,370
for around during a printing stall

109
00:04:37,150 --> 00:04:40,780
occasionally during normal operation the

110
00:04:39,370 --> 00:04:43,390
fusing oven would heat paper to

111
00:04:40,780 --> 00:04:45,010
combustion this message does not

112
00:04:43,390 --> 00:04:48,760
reliably indicate whether or not the

113
00:04:45,010 --> 00:04:50,560
printer is actually on fire so they

114
00:04:48,760 --> 00:04:51,940
decided to put this on fire message to

115
00:04:50,560 --> 00:04:56,170
motivate any system operator to

116
00:04:51,940 --> 00:05:02,080
immediately go check on the printer but

117
00:04:56,170 --> 00:05:06,700
it might be perfect so that's a terrible

118
00:05:02,080 --> 00:05:08,650
idea right because they're on fire what

119
00:05:06,700 --> 00:05:10,030
else could we do well there's actually

120
00:05:08,650 --> 00:05:13,330
some real things that other people were

121
00:05:10,030 --> 00:05:15,849
written that do alerting so there's the

122
00:05:13,330 --> 00:05:17,560
elastic have their product stream alert

123
00:05:15,850 --> 00:05:20,740
Argus a lest alert there's a couple

124
00:05:17,560 --> 00:05:21,670
others we looked at we looked at a

125
00:05:20,740 --> 00:05:23,740
couple of but they're nice sort of

126
00:05:21,670 --> 00:05:25,660
looked more in-depth ad streamlet and

127
00:05:23,740 --> 00:05:28,060
the reasons we liked it was it was

128
00:05:25,660 --> 00:05:29,740
service scalable a like this so we were

129
00:05:28,060 --> 00:05:31,450
already using AWS for a lot of other

130
00:05:29,740 --> 00:05:33,610
things so it kind of that kind of made

131
00:05:31,450 --> 00:05:35,710
sense rules written in Python and I like

132
00:05:33,610 --> 00:05:36,250
Python that's the only other reason any

133
00:05:35,710 --> 00:05:38,260
reason really

134
00:05:36,250 --> 00:05:40,690
terraform for infrastructure deployment

135
00:05:38,260 --> 00:05:42,190
so we're also using terraform separately

136
00:05:40,690 --> 00:05:44,530
so that was great sort of alliance there

137
00:05:42,190 --> 00:05:47,290
to the input and output sources that

138
00:05:44,530 --> 00:05:48,729
they had ready to go they also kind of

139
00:05:47,290 --> 00:05:50,320
matched what we were interested in and

140
00:05:48,730 --> 00:05:54,400
it was open source so it looked really

141
00:05:50,320 --> 00:05:57,430
cool and roughly this is their their Wow

142
00:05:54,400 --> 00:06:00,520
overview slide with icons from other

143
00:05:57,430 --> 00:06:02,620
companies you take logs in and they can

144
00:06:00,520 --> 00:06:06,010
either come in through Kinesis s3 or any

145
00:06:02,620 --> 00:06:08,470
snis topic they get processed through

146
00:06:06,010 --> 00:06:10,840
the weird streamlets squiggly and then

147
00:06:08,470 --> 00:06:13,540
they go out to you know phantom page of

148
00:06:10,840 --> 00:06:15,039
duty slack it's three maybe other lambda

149
00:06:13,540 --> 00:06:18,280
functions so you really put a whole lot

150
00:06:15,040 --> 00:06:20,350
of flexibility for example you might

151
00:06:18,280 --> 00:06:22,919
want to be logging quad trial so cloud

152
00:06:20,350 --> 00:06:25,180
travel and AWS logs your api calls

153
00:06:22,920 --> 00:06:27,970
things you might want to look at are

154
00:06:25,180 --> 00:06:30,310
like a delete VPC event maybe you stop

155
00:06:27,970 --> 00:06:31,630
logging the cloud trail maybe someone's

156
00:06:30,310 --> 00:06:33,700
using root credentials to sign into

157
00:06:31,630 --> 00:06:34,960
their account and maybe it isn't I am

158
00:06:33,700 --> 00:06:35,979
policy change that you're particularly

159
00:06:34,960 --> 00:06:37,299
interested in

160
00:06:35,980 --> 00:06:39,370
or an insecure bucket goes out to the

161
00:06:37,300 --> 00:06:42,610
world so there's a couple ways you can

162
00:06:39,370 --> 00:06:44,530
get these to your stream molester either

163
00:06:42,610 --> 00:06:46,150
through cloud watch events or through

164
00:06:44,530 --> 00:06:48,340
the history bucket so that's the round

165
00:06:46,150 --> 00:06:50,440
like 10 minutes version tribe watch

166
00:06:48,340 --> 00:06:52,210
events is great like 10 seconds but

167
00:06:50,440 --> 00:06:56,710
there's some some problems with regions

168
00:06:52,210 --> 00:06:58,299
there so regions are a nightmare so

169
00:06:56,710 --> 00:07:01,469
we'll pop crowd crowd try that front we

170
00:06:58,300 --> 00:07:04,060
can either go to it Kinesis or s3 and

171
00:07:01,470 --> 00:07:06,220
kind of looks like this crowd trail in

172
00:07:04,060 --> 00:07:09,700
AWS you'd basically click a few buttons

173
00:07:06,220 --> 00:07:11,710
and you enable it or use tear form that

174
00:07:09,700 --> 00:07:13,810
does this for you but you do this first

175
00:07:11,710 --> 00:07:16,270
try and play around and in the cloud

176
00:07:13,810 --> 00:07:18,480
watch part it cloud watch clicks the

177
00:07:16,270 --> 00:07:22,440
logs from cloud trail and then lets you

178
00:07:18,480 --> 00:07:26,590
ingest them either with the Kinesis or

179
00:07:22,440 --> 00:07:28,450
via SNS topics so they basically come

180
00:07:26,590 --> 00:07:30,070
out like this JSON message and there's

181
00:07:28,450 --> 00:07:31,450
this JSON messages something's happen

182
00:07:30,070 --> 00:07:33,730
today the obvious you might be

183
00:07:31,450 --> 00:07:36,370
interested in and you can search with

184
00:07:33,730 --> 00:07:38,260
this weird filter which is kind of JSON

185
00:07:36,370 --> 00:07:39,970
but not really there's a dollar and a

186
00:07:38,260 --> 00:07:41,950
dot I don't know why they did that they

187
00:07:39,970 --> 00:07:45,130
should just use JSON but maybe it's

188
00:07:41,950 --> 00:07:48,969
faster or something so yeah this is that

189
00:07:45,130 --> 00:07:52,990
this is like an example log and it's a

190
00:07:48,970 --> 00:07:55,570
root sign in which is bad so someone's

191
00:07:52,990 --> 00:07:58,600
use their root credentials so how do we

192
00:07:55,570 --> 00:08:01,180
how do we alert on this well happily the

193
00:07:58,600 --> 00:08:02,860
Adel you serious foundation is benchmark

194
00:08:01,180 --> 00:08:04,900
this is a really great resource for

195
00:08:02,860 --> 00:08:07,710
getting started and they have a whole

196
00:08:04,900 --> 00:08:10,359
bunch of default so I think I guess

197
00:08:07,710 --> 00:08:12,549
foundational rules that you can use to

198
00:08:10,360 --> 00:08:14,800
scan your logs and they explain how to

199
00:08:12,550 --> 00:08:16,990
filter in cloud watch so it's really

200
00:08:14,800 --> 00:08:18,520
nice and they also explain a little bit

201
00:08:16,990 --> 00:08:21,420
about why the rules are useful but it's

202
00:08:18,520 --> 00:08:23,950
usually quite obvious as well so in that

203
00:08:21,420 --> 00:08:26,290
PDF there's like one of the things we

204
00:08:23,950 --> 00:08:28,300
look interested in is root access they

205
00:08:26,290 --> 00:08:30,900
say here's that filter pattern you might

206
00:08:28,300 --> 00:08:34,090
want to be using for root account access

207
00:08:30,900 --> 00:08:37,120
so if we apply that back to our JSON log

208
00:08:34,090 --> 00:08:41,140
that we captured so you can see that

209
00:08:37,120 --> 00:08:45,580
this user identity is root there's a key

210
00:08:41,140 --> 00:08:47,800
missing for invoked by it's terrible the

211
00:08:45,580 --> 00:08:49,250
schema-less schemer it's very hard to

212
00:08:47,800 --> 00:08:52,790
work with sometimes

213
00:08:49,250 --> 00:08:54,830
and then it's making sure that this is a

214
00:08:52,790 --> 00:08:57,709
idea was not a NATO base service event

215
00:08:54,830 --> 00:08:59,180
so the other the second two are anyways

216
00:08:57,709 --> 00:09:02,029
can assume your root credentials on your

217
00:08:59,180 --> 00:09:03,739
behalf to do a few things which I'm not

218
00:09:02,029 --> 00:09:06,680
sure why you'd not want to alert on that

219
00:09:03,740 --> 00:09:09,770
but anyway so let's do this and string

220
00:09:06,680 --> 00:09:11,270
it kinda like the workflow that I've

221
00:09:09,770 --> 00:09:13,610
been doing for stream load is to find a

222
00:09:11,270 --> 00:09:15,829
sample event like we just did you can

223
00:09:13,610 --> 00:09:17,750
write an integration test and then with

224
00:09:15,830 --> 00:09:20,270
the expected outcome the test fails you

225
00:09:17,750 --> 00:09:22,880
choose an output to alert on you

226
00:09:20,270 --> 00:09:25,760
describe your alert message and then you

227
00:09:22,880 --> 00:09:29,660
write that logic test passes and deploy

228
00:09:25,760 --> 00:09:30,860
happy happy days so luckily actually I

229
00:09:29,660 --> 00:09:32,870
didn't have to do any of that because

230
00:09:30,860 --> 00:09:34,850
streamlet have some default rules

231
00:09:32,870 --> 00:09:37,850
already and writ account usage is one of

232
00:09:34,850 --> 00:09:39,440
them so this is the entirety of a rule

233
00:09:37,850 --> 00:09:40,820
that you'd need to write and it's a

234
00:09:39,440 --> 00:09:43,520
Python function that ends up with a

235
00:09:40,820 --> 00:09:46,130
lambda so you've got a bit at the top

236
00:09:43,520 --> 00:09:48,770
that's kind of describing you know what

237
00:09:46,130 --> 00:09:50,660
log sources is coming from maybe what

238
00:09:48,770 --> 00:09:53,060
select channel or maybe what page of

239
00:09:50,660 --> 00:09:55,310
duty integration you want us to go to is

240
00:09:53,060 --> 00:09:56,810
a handy helper for required sub keys

241
00:09:55,310 --> 00:09:59,449
because of this tricky schema-less

242
00:09:56,810 --> 00:10:01,339
schema and then the doc string is

243
00:09:59,450 --> 00:10:03,230
actually your description of the rule

244
00:10:01,339 --> 00:10:07,100
but that becomes the message that gets

245
00:10:03,230 --> 00:10:10,730
alerted then you implement that logic

246
00:10:07,100 --> 00:10:13,910
with Python and return true it's gonna

247
00:10:10,730 --> 00:10:16,490
alert false it's not gonna let so yeah

248
00:10:13,910 --> 00:10:18,020
ploy that it's a pretty pretty easy to

249
00:10:16,490 --> 00:10:21,500
get going because I did it at the

250
00:10:18,020 --> 00:10:23,899
morning tea break on my hotspot deployed

251
00:10:21,500 --> 00:10:26,690
to tear off just to make sure it's still

252
00:10:23,899 --> 00:10:28,930
work so yeah it's not too not too bad

253
00:10:26,690 --> 00:10:31,370
you can do it in about 30 minutes or so

254
00:10:28,930 --> 00:10:34,640
but you can yeah you basically check out

255
00:10:31,370 --> 00:10:39,380
the repo set up your config and then you

256
00:10:34,640 --> 00:10:46,459
can deploy it so just gonna show you

257
00:10:39,380 --> 00:10:49,339
that quickly running so we're it's three

258
00:10:46,459 --> 00:10:52,660
here that root account usage let's just

259
00:10:49,339 --> 00:10:52,660
do something let's just create a bucket

260
00:11:03,320 --> 00:11:06,500
so it's gonna create a bucket that's

261
00:11:04,790 --> 00:11:08,420
gonna create one of those vlogs because

262
00:11:06,500 --> 00:11:09,680
it's like an API call to a double used

263
00:11:08,420 --> 00:11:11,479
to create a bucket not everything's

264
00:11:09,680 --> 00:11:12,800
gonna create grab trail logs so if

265
00:11:11,480 --> 00:11:14,420
you're just browsing around it's not

266
00:11:12,800 --> 00:11:15,979
going to create any logs but say it's

267
00:11:14,420 --> 00:11:22,009
things that are gonna action things that

268
00:11:15,980 --> 00:11:23,750
you notice account so a in my slack we

269
00:11:22,009 --> 00:11:26,389
have the thumbs up emoji stream alert

270
00:11:23,750 --> 00:11:29,149
triggered real account usage and it

271
00:11:26,389 --> 00:11:30,800
gives you gives you the rule that

272
00:11:29,149 --> 00:11:32,899
triggered and then some and in the

273
00:11:30,800 --> 00:11:35,029
details so this is you get all that

274
00:11:32,899 --> 00:11:37,630
output there wasn't the rule but you

275
00:11:35,029 --> 00:11:45,829
have that description that came from the

276
00:11:37,630 --> 00:11:49,819
beer right so there you go came through

277
00:11:45,829 --> 00:11:51,979
to my select channel that wasn't me that

278
00:11:49,819 --> 00:11:54,889
was all stream load guys really clear

279
00:11:51,980 --> 00:11:56,839
guys at Airbnb and it's yeah works

280
00:11:54,889 --> 00:11:58,339
really well now this was in case a demo

281
00:11:56,839 --> 00:12:01,220
didn't work so I said face but it did

282
00:11:58,339 --> 00:12:04,009
work so anyways and so other inputs that

283
00:12:01,220 --> 00:12:06,740
you can grab OS query and Google Apps

284
00:12:04,009 --> 00:12:08,149
admin one login duo there's a bunch of

285
00:12:06,740 --> 00:12:12,380
others as well you can add your own it's

286
00:12:08,149 --> 00:12:14,389
pretty easy this was a slide to explain

287
00:12:12,380 --> 00:12:15,380
the difficulties of cross regions I was

288
00:12:14,389 --> 00:12:17,569
gonna skip over that because it's too

289
00:12:15,380 --> 00:12:20,480
much and some outputs that you've got

290
00:12:17,569 --> 00:12:22,130
slack page duty and Fanta mystery

291
00:12:20,480 --> 00:12:23,899
buckets maybe another lambda function so

292
00:12:22,130 --> 00:12:25,130
you can really go crazy here and the

293
00:12:23,899 --> 00:12:27,079
output to write your own output it's

294
00:12:25,130 --> 00:12:28,850
pretty simple it's not that much and I

295
00:12:27,079 --> 00:12:31,609
think the Select integrations all of I

296
00:12:28,850 --> 00:12:34,910
know 100 lines or so so it's it's pretty

297
00:12:31,610 --> 00:12:37,610
good so at the end what are we what kind

298
00:12:34,910 --> 00:12:39,110
of things are we loading on this is one

299
00:12:37,610 --> 00:12:41,540
of the rules I've written so it's

300
00:12:39,110 --> 00:12:42,430
assuming a role so we're using role

301
00:12:41,540 --> 00:12:47,689
based

302
00:12:42,430 --> 00:12:48,859
role based I am roles to assume assume

303
00:12:47,689 --> 00:12:50,779
roles that have permissions attached to

304
00:12:48,860 --> 00:12:54,470
roles so we might have a really really

305
00:12:50,779 --> 00:12:56,180
high score the administrative role and

306
00:12:54,470 --> 00:12:57,199
if someone assumes that they can still

307
00:12:56,180 --> 00:12:58,459
assume that they got the permission but

308
00:12:57,199 --> 00:13:00,229
we might just want to know and then we

309
00:12:58,459 --> 00:13:02,029
can perhaps message them and find out

310
00:13:00,230 --> 00:13:03,920
what are they doing with the super

311
00:13:02,029 --> 00:13:07,160
awesome privileges that you only really

312
00:13:03,920 --> 00:13:09,110
need to access a customer data so we can

313
00:13:07,160 --> 00:13:11,300
just kind of follow up so yeah it's

314
00:13:09,110 --> 00:13:13,220
quite easy to write that I've kind of

315
00:13:11,300 --> 00:13:16,430
modified the description a bit to allow

316
00:13:13,220 --> 00:13:17,060
me to insert just path and formatting

317
00:13:16,430 --> 00:13:19,729
syntax

318
00:13:17,060 --> 00:13:21,140
so that we can get a little bit a little

319
00:13:19,730 --> 00:13:22,280
bit more info brighten their message

320
00:13:21,140 --> 00:13:24,560
make it like a really impactful

321
00:13:22,280 --> 00:13:26,270
statement so user Tom Jerry has assumed

322
00:13:24,560 --> 00:13:28,400
administrator from this IP address and

323
00:13:26,270 --> 00:13:30,050
in a bit of information and in a link

324
00:13:28,400 --> 00:13:31,459
maybe it's not the security nurse

325
00:13:30,050 --> 00:13:32,390
looking this maybe it's someone who's on

326
00:13:31,460 --> 00:13:34,580
call

327
00:13:32,390 --> 00:13:41,030
they might know a little bit of help on

328
00:13:34,580 --> 00:13:42,290
what to do yeah so a question I got

329
00:13:41,030 --> 00:13:44,329
asked when I was running this through a

330
00:13:42,290 --> 00:13:46,610
colleague at work was like well how do

331
00:13:44,330 --> 00:13:47,990
how do you make sure that streamlets

332
00:13:46,610 --> 00:13:48,800
like who's monitoring extremely you know

333
00:13:47,990 --> 00:13:50,990
what happens if you delete something

334
00:13:48,800 --> 00:13:54,050
there and they've thought about that and

335
00:13:50,990 --> 00:13:56,390
they use a TOS its own sort of a loading

336
00:13:54,050 --> 00:13:59,060
think I'm cloud watch matrix so you can

337
00:13:56,390 --> 00:14:03,050
set up separate metrics to alert you on

338
00:13:59,060 --> 00:14:04,699
things like errors or processing areas

339
00:14:03,050 --> 00:14:07,430
in-stream alert or things like that that

340
00:14:04,700 --> 00:14:09,310
so maybe someones added a syntax error

341
00:14:07,430 --> 00:14:11,949
into your rule and it's just not running

342
00:14:09,310 --> 00:14:16,849
you might want a lid on that before you

343
00:14:11,950 --> 00:14:19,820
miss it a really important alert so

344
00:14:16,850 --> 00:14:22,370
coming back to lp0

345
00:14:19,820 --> 00:14:26,630
on fire and i was wondering how do i do

346
00:14:22,370 --> 00:14:29,000
this with lastrella right so they're

347
00:14:26,630 --> 00:14:31,010
still thinking this is chaos engineering

348
00:14:29,000 --> 00:14:33,620
from from like chaos monkey and things

349
00:14:31,010 --> 00:14:35,000
maybe there's a chaos security where

350
00:14:33,620 --> 00:14:38,210
there's a look going on you want to

351
00:14:35,000 --> 00:14:40,400
sometimes like you know in an important

352
00:14:38,210 --> 00:14:43,010
event just test test if everyone's still

353
00:14:40,400 --> 00:14:48,199
still on their toes maybe we could add a

354
00:14:43,010 --> 00:14:50,689
Twitter output you know open history

355
00:14:48,200 --> 00:14:54,370
bucket I just post to Twitter so that

356
00:14:50,690 --> 00:14:54,370
people really quickly go and fix that

357
00:14:55,810 --> 00:14:59,390
actually using chaos monkeys so you

358
00:14:57,920 --> 00:15:03,949
could maybe trigger some chaos monkeys

359
00:14:59,390 --> 00:15:05,120
chaos monkey and going like destroy ec2

360
00:15:03,950 --> 00:15:08,680
instances and a whole bunch of other

361
00:15:05,120 --> 00:15:12,500
things as part of the chaos engineering

362
00:15:08,680 --> 00:15:14,150
at Netflix so they basically trying to

363
00:15:12,500 --> 00:15:15,770
make your code more resilient but maybe

364
00:15:14,150 --> 00:15:18,290
you don't use Karis monkey and you just

365
00:15:15,770 --> 00:15:19,550
edit in here just start destroying

366
00:15:18,290 --> 00:15:20,810
things whenever something important's

367
00:15:19,550 --> 00:15:22,939
happen on your network like someone's

368
00:15:20,810 --> 00:15:27,650
got Rudy can access and suddenly other

369
00:15:22,940 --> 00:15:29,810
things are starting so one of the thing

370
00:15:27,650 --> 00:15:30,959
I was thinking of as balloons balloons

371
00:15:29,810 --> 00:15:32,369
reduced stress right

372
00:15:30,960 --> 00:15:36,029
it's an important important incident

373
00:15:32,370 --> 00:15:40,110
happens you need to maintain calm so I

374
00:15:36,029 --> 00:15:45,330
added added my own slack output my own

375
00:15:40,110 --> 00:15:48,510
output type called balloon let's see if

376
00:15:45,330 --> 00:15:51,420
I can switch to it so for example here

377
00:15:48,510 --> 00:15:53,520
critical critical API calls it's gonna

378
00:15:51,420 --> 00:15:57,060
go to our security alerts slack there's

379
00:15:53,520 --> 00:16:00,120
also going to go to balloon slack so

380
00:15:57,060 --> 00:16:02,489
hopefully it's all works because it

381
00:16:00,120 --> 00:16:05,040
almost didn't so I should explain have I

382
00:16:02,490 --> 00:16:09,589
got a have we got a young on this night

383
00:16:05,040 --> 00:16:12,810
yeah cool so I bought an air compressor

384
00:16:09,589 --> 00:16:15,630
but I have a problem I think it's kind

385
00:16:12,810 --> 00:16:18,599
of so and I went to I bought a this is

386
00:16:15,630 --> 00:16:20,100
like a smart plug you take not really

387
00:16:18,600 --> 00:16:21,600
knowing what I could do with it at the

388
00:16:20,100 --> 00:16:22,830
time it's like looking at it it's really

389
00:16:21,600 --> 00:16:25,980
odd in the shop when you have to decide

390
00:16:22,830 --> 00:16:28,050
like can i hack this for what I needed

391
00:16:25,980 --> 00:16:29,610
to do like it's gonna come with some

392
00:16:28,050 --> 00:16:30,990
crappy app and it's gonna say I have

393
00:16:29,610 --> 00:16:32,640
some cloud-based thing and maybe it's

394
00:16:30,990 --> 00:16:35,580
like if there's still I don't wanna do

395
00:16:32,640 --> 00:16:36,959
that like mmm how bad is this and that

396
00:16:35,580 --> 00:16:39,720
is that good

397
00:16:36,959 --> 00:16:43,170
right I managed to pick this one for $50

398
00:16:39,720 --> 00:16:45,300
and luckily two guys had already reverse

399
00:16:43,170 --> 00:16:48,979
engineered the protocol and they did

400
00:16:45,300 --> 00:16:53,069
actually use XOR encryption sorry X or

401
00:16:48,980 --> 00:16:56,130
whatever XOR is right an XOR cipher to

402
00:16:53,070 --> 00:16:59,010
encrypt from your phone to the device on

403
00:16:56,130 --> 00:17:00,420
first setup which is absolutely terrible

404
00:16:59,010 --> 00:17:02,250
but it meant that there was a Python

405
00:17:00,420 --> 00:17:03,360
script away welcome to control this

406
00:17:02,250 --> 00:17:06,179
device I didn't even have to install the

407
00:17:03,360 --> 00:17:08,069
Android app it was just great so that's

408
00:17:06,179 --> 00:17:09,569
controls this there controls the air

409
00:17:08,069 --> 00:17:18,389
compressor and then we've got this

410
00:17:09,569 --> 00:17:21,839
balloon so is it gonna work let's see if

411
00:17:18,390 --> 00:17:26,730
we got back slides so let's do some

412
00:17:21,839 --> 00:17:31,379
critical API call we could delete a

413
00:17:26,730 --> 00:17:33,830
trail so let's go jump over to cloud

414
00:17:31,380 --> 00:17:33,830
trail

415
00:17:41,100 --> 00:17:44,969
I think actually it's going to trigger

416
00:17:42,450 --> 00:17:46,710
on the route account usage as well so we

417
00:17:44,970 --> 00:17:49,650
might see some some goodness heading

418
00:17:46,710 --> 00:17:54,630
yeah so let's grow rails let's create

419
00:17:49,650 --> 00:17:55,710
trail like even this creation of the

420
00:17:54,630 --> 00:17:59,340
trail is going to trigger it actually

421
00:17:55,710 --> 00:18:01,530
because it's a it's a I'm using my root

422
00:17:59,340 --> 00:18:02,580
credentials to do this I was doing this

423
00:18:01,530 --> 00:18:05,420
the last few minutes before the talk

424
00:18:02,580 --> 00:18:05,419
don't judge me

425
00:18:06,800 --> 00:18:10,820
why isn't letting me create a trail

426
00:18:23,550 --> 00:18:37,159
ie credit so let's see if we can get an

427
00:18:27,570 --> 00:18:42,749
alert on that that's it

428
00:18:37,160 --> 00:18:42,749
[Applause]

429
00:18:45,050 --> 00:18:52,129
what is it doing I was always supposed

430
00:18:48,320 --> 00:18:56,840
to go once what happened are there's

431
00:18:52,130 --> 00:18:58,640
mini posts to inflate maybe they created

432
00:18:56,840 --> 00:19:00,409
multiple or maybe it's creating the

433
00:18:58,640 --> 00:19:03,100
bucket creating the cloud trail creating

434
00:19:00,410 --> 00:19:05,090
like the cloud watch event group yeah

435
00:19:03,100 --> 00:19:10,669
that's not good okay so this go into

436
00:19:05,090 --> 00:19:12,139
some more things so you can imagine

437
00:19:10,670 --> 00:19:17,390
you're working away and that thing like

438
00:19:12,140 --> 00:19:28,250
right that's create let's create a new

439
00:19:17,390 --> 00:19:29,840
bucket bucket insecure because you

440
00:19:28,250 --> 00:19:31,790
guessed it it's gonna be read only I

441
00:19:29,840 --> 00:19:33,760
mean read wide to everybody hey this is

442
00:19:31,790 --> 00:19:41,480
gonna be real read one from the world

443
00:19:33,760 --> 00:19:45,520
create bucket let's go back it's about

444
00:19:41,480 --> 00:19:45,520
10 seconds to go through there

445
00:19:50,970 --> 00:19:57,029
I thought the smiley face would like

446
00:19:53,009 --> 00:19:58,679
help calm things also it was like the

447
00:19:57,029 --> 00:19:59,820
only one at my Pattie store that look do

448
00:19:58,679 --> 00:20:02,909
any good it was like that in a

449
00:19:59,820 --> 00:20:03,869
pirate-ship it's hard to choose so

450
00:20:02,909 --> 00:20:06,210
here's all these extra lips that have

451
00:20:03,869 --> 00:20:09,119
come through so we had a cloud trial put

452
00:20:06,210 --> 00:20:11,820
bucket root account usage wall root

453
00:20:09,119 --> 00:20:14,009
count usage basically music root account

454
00:20:11,820 --> 00:20:17,099
so that it's just gonna go keep going

455
00:20:14,009 --> 00:20:20,269
off for entertainment sake what can we

456
00:20:17,099 --> 00:20:20,269
do that creates a lot of things

457
00:20:20,720 --> 00:20:25,320
maybe we can creep maybe we can create a

458
00:20:22,799 --> 00:20:28,158
bucket from the command line let's

459
00:20:25,320 --> 00:20:31,519
delete this delete this bucket a

460
00:20:28,159 --> 00:20:31,519
turrible is cute

461
00:20:36,999 --> 00:20:43,059
you understand how amazing this is that

462
00:20:38,829 --> 00:20:46,149
this demo is working so I'm relying on a

463
00:20:43,059 --> 00:20:47,918
crappy IOT device that uses it so to do

464
00:20:46,149 --> 00:20:49,928
this from my laptop which is in u.s.

465
00:20:47,919 --> 00:20:58,499
East one and it's doing like a streamlet

466
00:20:49,929 --> 00:20:58,499
thing Wow we gotta go faster

467
00:20:59,399 --> 00:21:06,658
let's just go create more buckets

468
00:21:10,430 --> 00:21:15,890
that's fine he always amazed it like you

469
00:21:14,060 --> 00:21:24,770
do then sometimes it's not unique mmm

470
00:21:15,890 --> 00:21:25,850
who are you more we need more I know we

471
00:21:24,770 --> 00:21:29,840
could do we could just up the time that

472
00:21:25,850 --> 00:21:33,139
it's on for as well you could appreciate

473
00:21:29,840 --> 00:21:35,540
this all this this is my terrible idea

474
00:21:33,140 --> 00:21:40,700
there's nothing you'll appreciate how

475
00:21:35,540 --> 00:21:45,950
amazing this encryption is yes let's

476
00:21:40,700 --> 00:21:47,060
just go for gold tweeny do you guys get

477
00:21:45,950 --> 00:21:50,930
nervous with balloons that keep

478
00:21:47,060 --> 00:22:05,540
inflating let's make sure I restarted

479
00:21:50,930 --> 00:22:11,090
our thing oh no no syntax where there

480
00:22:05,540 --> 00:22:16,490
was one one five ah there it is that's

481
00:22:11,090 --> 00:22:18,409
rid thank you okay let's go let's go

482
00:22:16,490 --> 00:22:22,160
let's go more what else can we do let's

483
00:22:18,410 --> 00:22:23,600
go and it's that slowly deflating as

484
00:22:22,160 --> 00:22:29,660
well and this thing gets hot too so I

485
00:22:23,600 --> 00:22:31,570
thought if I put it what else have we

486
00:22:29,660 --> 00:22:36,650
got

487
00:22:31,570 --> 00:22:38,060
I could actually do some critical API

488
00:22:36,650 --> 00:22:41,060
calls but then it might stop the demo

489
00:22:38,060 --> 00:22:42,530
oh I know we could do we can delete that

490
00:22:41,060 --> 00:22:46,820
trail that we created that's why I

491
00:22:42,530 --> 00:22:55,720
created it because it'll delete a whole

492
00:22:46,820 --> 00:23:01,100
bunch of things as well trails bed trail

493
00:22:55,720 --> 00:23:05,350
oh well I haven't done it yet

494
00:23:01,100 --> 00:23:05,350
it's gonna go for 20 seconds what was it

495
00:23:12,150 --> 00:23:22,860
I can't think with all this balloon

496
00:23:13,919 --> 00:23:27,450
going on oh wow this making your elf

497
00:23:22,860 --> 00:23:29,908
uncomfortable sorry okay now we can

498
00:23:27,450 --> 00:23:31,020
delete it turns out I chose that 20

499
00:23:29,909 --> 00:23:32,309
seconds just great I only tasted this

500
00:23:31,020 --> 00:23:35,190
once because I had to hold it while I

501
00:23:32,309 --> 00:23:36,960
was testing it that was there was

502
00:23:35,190 --> 00:23:38,390
intense takes one minute with this

503
00:23:36,960 --> 00:23:41,130
crappy compressor

504
00:23:38,390 --> 00:23:50,809
yeah deleted it now should be 10 seconds

505
00:23:41,130 --> 00:23:50,809
oh yeah

506
00:23:56,840 --> 00:24:04,730
okay okay

507
00:24:00,030 --> 00:24:04,730
this is from the tool shop come on

508
00:24:06,680 --> 00:24:11,190
[Applause]

509
00:24:08,730 --> 00:24:18,020
Wow

510
00:24:11,190 --> 00:24:23,210
I said thanks

511
00:24:18,020 --> 00:24:23,210
[Applause]

