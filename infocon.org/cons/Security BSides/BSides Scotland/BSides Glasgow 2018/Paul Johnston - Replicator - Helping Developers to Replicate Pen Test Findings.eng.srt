1
00:00:03,050 --> 00:00:09,570
<font color="#CCCCCC">then everyone thank you</font><font color="#E5E5E5"> for coming to</font>

2
00:00:06,330 --> 00:00:12,960
see me<font color="#CCCCCC"> talk to you about replicator</font><font color="#E5E5E5"> now</font>

3
00:00:09,570 --> 00:00:16,619
<font color="#CCCCCC">mmm this is</font><font color="#E5E5E5"> a burp extension I've</font>

4
00:00:12,960 --> 00:00:18,300
developed to solve an issue<font color="#E5E5E5"> that's that</font>

5
00:00:16,619 --> 00:00:20,999
I've<font color="#CCCCCC"> hid when I</font><font color="#E5E5E5"> was working as a pen</font>

6
00:00:18,300 --> 00:00:24,119
tester<font color="#CCCCCC"> I now work at</font><font color="#E5E5E5"> port surrogate and</font>

7
00:00:20,999 --> 00:00:25,319
<font color="#E5E5E5">as well as helping out Burt users one of</font>

8
00:00:24,119 --> 00:00:29,999
the things I do is<font color="#E5E5E5"> look after the map</font>

9
00:00:25,319 --> 00:00:34,980
store and now the story of this

10
00:00:29,999 --> 00:00:37,890
particular extension<font color="#E5E5E5"> is um when I was</font>

11
00:00:34,980 --> 00:00:41,309
<font color="#E5E5E5">working as a pen tester</font><font color="#CCCCCC"> I often found</font>

12
00:00:37,890 --> 00:00:42,960
there was difficulty getting developers

13
00:00:41,309 --> 00:00:45,358
to be able<font color="#CCCCCC"> to understand some of the</font>

14
00:00:42,960 --> 00:00:47,760
more complex issues<font color="#E5E5E5"> so</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> worked really</font>

15
00:00:45,359 --> 00:00:50,519
hard you'd be three steps into this

16
00:00:47,760 --> 00:00:52,320
<font color="#CCCCCC">multi-stage process you bypassing</font>

17
00:00:50,519 --> 00:00:54,089
JavaScript valid as you<font color="#E5E5E5"> bypass some</font>

18
00:00:52,320 --> 00:00:57,120
server-side filter and you get this

19
00:00:54,089 --> 00:00:59,640
<font color="#E5E5E5">really great vulnerability</font><font color="#CCCCCC"> but promise</font>

20
00:00:57,120 --> 00:01:01,498
you you'd write this all up<font color="#E5E5E5"> and the</font>

21
00:00:59,640 --> 00:01:03,629
recipient they would struggle to<font color="#E5E5E5"> know</font>

22
00:01:01,499 --> 00:01:05,220
what to do with it<font color="#CCCCCC"> you get follow-up</font>

23
00:01:03,629 --> 00:01:08,370
questions by email<font color="#E5E5E5"> they'd want to have a</font>

24
00:01:05,220 --> 00:01:11,640
conference<font color="#CCCCCC"> call to discuss it</font><font color="#E5E5E5"> it was a</font>

25
00:01:08,370 --> 00:01:13,710
challenge<font color="#CCCCCC"> and what I found from working</font>

26
00:01:11,640 --> 00:01:16,140
<font color="#CCCCCC">with developers is what they want more</font>

27
00:01:13,710 --> 00:01:19,169
<font color="#E5E5E5">than anything is to</font><font color="#CCCCCC"> be able to</font><font color="#E5E5E5"> reproduce</font>

28
00:01:16,140 --> 00:01:20,640
an issue on their<font color="#E5E5E5"> workstation you can</font>

29
00:01:19,170 --> 00:01:23,040
give them a strap test you can give them

30
00:01:20,640 --> 00:01:25,200
<font color="#E5E5E5">a cord of you could tell them the exact</font>

31
00:01:23,040 --> 00:01:26,400
line in the file that<font color="#CCCCCC"> has</font><font color="#E5E5E5"> got a book you</font>

32
00:01:25,200 --> 00:01:28,650
<font color="#CCCCCC">could even give them the link</font><font color="#E5E5E5"> to stack</font>

33
00:01:26,400 --> 00:01:31,320
overflow<font color="#CCCCCC"> with three different highly</font>

34
00:01:28,650 --> 00:01:34,200
recommended solutions and still what

35
00:01:31,320 --> 00:01:37,860
<font color="#CCCCCC">they want to do is replicate it on their</font>

36
00:01:34,200 --> 00:01:40,710
workstation from<font color="#CCCCCC"> maze with some of these</font>

37
00:01:37,860 --> 00:01:44,940
difficult<font color="#CCCCCC"> security vulnerabilities</font><font color="#E5E5E5"> these</font>

38
00:01:40,710 --> 00:01:46,649
<font color="#E5E5E5">issues can be hard to replicate now well</font>

39
00:01:44,940 --> 00:01:48,810
I'm always doing an earlier draft of

40
00:01:46,650 --> 00:01:51,170
this<font color="#E5E5E5"> talk I made a minor Freudian slip</font>

41
00:01:48,810 --> 00:01:58,380
on<font color="#CCCCCC"> that second bullet coin</font><font color="#E5E5E5"> and I wrote</font>

42
00:01:51,170 --> 00:01:59,730
reproduction can be challenging and what

43
00:01:58,380 --> 00:02:04,589
I was trying to get<font color="#E5E5E5"> at is there can be</font>

44
00:01:59,730 --> 00:02:06,900
technical things like<font color="#E5E5E5"> for</font><font color="#CCCCCC"> instance there</font>

45
00:02:04,590 --> 00:02:11,479
can be all sorts of<font color="#E5E5E5"> technical problems</font>

46
00:02:06,900 --> 00:02:11,479
<font color="#CCCCCC">that come</font><font color="#E5E5E5"> okay</font>

47
00:02:14,240 --> 00:02:19,400
but<font color="#CCCCCC"> that can occur why are you trying to</font>

48
00:02:16,640 --> 00:02:21,829
do this and a good<font color="#CCCCCC"> example would</font><font color="#E5E5E5"> be if</font>

49
00:02:19,400 --> 00:02:24,950
this<font color="#CCCCCC"> JavaScript validation on the site</font>

50
00:02:21,830 --> 00:02:26,480
<font color="#E5E5E5">so you go to the forum</font><font color="#CCCCCC"> you put in your</font>

51
00:02:24,950 --> 00:02:28,880
<font color="#E5E5E5">payload in a text</font><font color="#CCCCCC"> field</font><font color="#E5E5E5"> and the</font>

52
00:02:26,480 --> 00:02:31,670
<font color="#CCCCCC">JavaScript</font><font color="#E5E5E5"> on the site kicks it out now</font>

53
00:02:28,880 --> 00:02:33,890
<font color="#E5E5E5">for a pen tester that's easy to get</font>

54
00:02:31,670 --> 00:02:36,530
around<font color="#CCCCCC"> but you have to use some kind</font><font color="#E5E5E5"> of</font>

55
00:02:33,890 --> 00:02:43,790
security tool<font color="#E5E5E5"> right</font><font color="#CCCCCC"> Bert proxy or one of</font>

56
00:02:36,530 --> 00:02:46,520
the other lesser tools now one<font color="#CCCCCC"> of the</font>

57
00:02:43,790 --> 00:02:49,880
ways<font color="#E5E5E5"> that my previous employer tried to</font>

58
00:02:46,520 --> 00:02:52,040
deal<font color="#E5E5E5"> with this was to keep a full copy</font>

59
00:02:49,880 --> 00:02:53,930
<font color="#E5E5E5">of the request in the report so you</font>

60
00:02:52,040 --> 00:02:55,310
<font color="#E5E5E5">report real Oh we'd have the title have</font>

61
00:02:53,930 --> 00:02:56,870
a description of the vulnerability<font color="#E5E5E5"> to</font>

62
00:02:55,310 --> 00:03:00,080
say hey you want<font color="#CCCCCC"> to</font><font color="#E5E5E5"> reproduce it here's</font>

63
00:02:56,870 --> 00:03:01,340
the<font color="#E5E5E5"> request so the idea is the developer</font>

64
00:03:00,080 --> 00:03:04,640
they'd copy that they'd paste it into

65
00:03:01,340 --> 00:03:07,850
<font color="#E5E5E5">some</font><font color="#CCCCCC"> kind of raw HTTP tool and they'd</font>

66
00:03:04,640 --> 00:03:10,399
<font color="#E5E5E5">say this issue we produce the problem</font>

67
00:03:07,850 --> 00:03:13,790
however is that<font color="#E5E5E5"> there are normally</font>

68
00:03:10,400 --> 00:03:16,070
session tokens in that request<font color="#CCCCCC"> so what</font>

69
00:03:13,790 --> 00:03:18,679
<font color="#CCCCCC">you're testing</font><font color="#E5E5E5"> you can</font><font color="#CCCCCC"> paste</font><font color="#E5E5E5"> that in and</font>

70
00:03:16,070 --> 00:03:20,150
the issue reproduces<font color="#E5E5E5"> now by the time</font>

71
00:03:18,680 --> 00:03:22,130
you've sent this<font color="#E5E5E5"> report to your internal</font>

72
00:03:20,150 --> 00:03:23,480
QA let's come to the account manager<font color="#E5E5E5"> and</font>

73
00:03:22,130 --> 00:03:24,560
it's been passed<font color="#E5E5E5"> to the security manager</font>

74
00:03:23,480 --> 00:03:25,850
who's gone to a project manager and

75
00:03:24,560 --> 00:03:28,100
eventually it'll lands<font color="#E5E5E5"> on some</font>

76
00:03:25,850 --> 00:03:30,530
developers desk is going to fix this by

77
00:03:28,100 --> 00:03:32,150
this time the token<font color="#CCCCCC"> has expired</font>

78
00:03:30,530 --> 00:03:33,650
so they fire this will request<font color="#E5E5E5"> it in</font>

79
00:03:32,150 --> 00:03:39,020
their app and they don't get any

80
00:03:33,650 --> 00:03:41,210
<font color="#E5E5E5">meaningful response so given all</font><font color="#CCCCCC"> these</font>

81
00:03:39,020 --> 00:03:44,930
issues<font color="#CCCCCC"> there is</font><font color="#E5E5E5"> a need to do something</font>

82
00:03:41,210 --> 00:03:48,550
better and what we thought is what if we

83
00:03:44,930 --> 00:03:55,460
can make replication as easy as saying

84
00:03:48,550 --> 00:04:00,790
<font color="#E5E5E5">tea Earl</font><font color="#CCCCCC"> Grey hot</font><font color="#E5E5E5"> and I'm going to show</font>

85
00:03:55,460 --> 00:04:00,790
you the<font color="#E5E5E5"> solution</font><font color="#CCCCCC"> that we came up with</font>

86
00:04:12,000 --> 00:04:15,670
apologies if<font color="#CCCCCC"> you can't read this at the</font>

87
00:04:14,230 --> 00:04:17,440
<font color="#CCCCCC">battle is it that there's a bit of a</font>

88
00:04:15,670 --> 00:04:19,510
trade-off<font color="#E5E5E5"> here between the font size and</font>

89
00:04:17,440 --> 00:04:23,410
actually being<font color="#E5E5E5"> able to fit everything</font><font color="#CCCCCC"> on</font>

90
00:04:19,510 --> 00:04:25,450
the screen now just put<font color="#E5E5E5"> your shoes</font>

91
00:04:23,410 --> 00:04:27,419
<font color="#E5E5E5">yourself in the shoes of this developer</font>

92
00:04:25,450 --> 00:04:30,159
so they've<font color="#E5E5E5"> had the</font><font color="#CCCCCC"> Panthers commissioned</font>

93
00:04:27,419 --> 00:04:33,340
they've received the<font color="#E5E5E5"> report and it's got</font>

94
00:04:30,160 --> 00:04:34,810
these findings on it<font color="#E5E5E5"> now because the pen</font>

95
00:04:33,340 --> 00:04:37,270
test company that did this<font color="#E5E5E5"> particular</font>

96
00:04:34,810 --> 00:04:40,090
job is super advanced<font color="#E5E5E5"> than they're using</font>

97
00:04:37,270 --> 00:04:43,240
replicated files<font color="#E5E5E5"> as well as receiving</font>

98
00:04:40,090 --> 00:04:45,219
the PDF report<font color="#CCCCCC"> you also</font><font color="#E5E5E5"> receive a</font>

99
00:04:43,240 --> 00:04:47,919
replicator<font color="#E5E5E5"> fire so you</font><font color="#CCCCCC"> fire it your</font>

100
00:04:45,220 --> 00:04:53,370
trusty copy of burp suite<font color="#E5E5E5"> and you can in</font>

101
00:04:47,919 --> 00:04:53,370
fact<font color="#E5E5E5"> do this in the</font><font color="#CCCCCC"> communtiy Edition</font>

102
00:04:53,729 --> 00:05:03,280
and<font color="#CCCCCC"> we load the file that we've received</font>

103
00:05:00,570 --> 00:05:04,900
<font color="#E5E5E5">from the pen test company now we've just</font>

104
00:05:03,280 --> 00:05:05,888
got<font color="#CCCCCC"> a little security warning here</font>

105
00:05:04,900 --> 00:05:08,770
because it's gonna update<font color="#E5E5E5"> our</font>

106
00:05:05,889 --> 00:05:10,660
configuration<font color="#CCCCCC"> but this is cool</font><font color="#E5E5E5"> oh yeah</font>

107
00:05:08,770 --> 00:05:16,330
I very much trust this pen test company

108
00:05:10,660 --> 00:05:20,560
so I'm gonna say yes here now what we've

109
00:05:16,330 --> 00:05:22,630
<font color="#E5E5E5">got we've got</font><font color="#CCCCCC"> a list of</font><font color="#E5E5E5"> all the issues</font>

110
00:05:20,560 --> 00:05:25,270
that<font color="#E5E5E5"> have been found in this pen test so</font>

111
00:05:22,630 --> 00:05:29,560
<font color="#CCCCCC">this there's three in</font><font color="#E5E5E5"> this particular</font>

112
00:05:25,270 --> 00:05:33,310
pen<font color="#E5E5E5"> set now and the very first thing</font>

113
00:05:29,560 --> 00:05:35,320
that<font color="#E5E5E5"> I'm</font><font color="#CCCCCC"> gonna do is I'm gonna see if I</font>

114
00:05:33,310 --> 00:05:37,990
can reproduce<font color="#E5E5E5"> the issues</font><font color="#CCCCCC"> that have been</font>

115
00:05:35,320 --> 00:05:43,539
<font color="#E5E5E5">sent and that's all it gives us a single</font>

116
00:05:37,990 --> 00:05:45,250
<font color="#E5E5E5">button to do this this</font><font color="#CCCCCC"> is a slight</font>

117
00:05:43,539 --> 00:05:47,289
moment of truth about<font color="#E5E5E5"> whether my demo</font>

118
00:05:45,250 --> 00:05:52,870
<font color="#E5E5E5">labs</font><font color="#CCCCCC"> actually work or</font><font color="#E5E5E5"> not</font><font color="#CCCCCC"> so we're gonna</font>

119
00:05:47,289 --> 00:05:54,880
hit<font color="#CCCCCC"> test</font><font color="#E5E5E5"> all and all of them has</font><font color="#CCCCCC"> come</font>

120
00:05:52,870 --> 00:05:56,590
<font color="#E5E5E5">back</font><font color="#CCCCCC"> as vulnerable</font><font color="#E5E5E5"> which at this</font><font color="#CCCCCC"> stage</font>

121
00:05:54,880 --> 00:05:58,180
is exactly what we want

122
00:05:56,590 --> 00:06:00,700
so the pen test company have identified

123
00:05:58,180 --> 00:06:05,800
we're<font color="#CCCCCC"> vulnerable and now we can</font>

124
00:06:00,700 --> 00:06:09,039
reproduce that locally now<font color="#E5E5E5"> in this</font>

125
00:06:05,800 --> 00:06:12,360
<font color="#E5E5E5">example we have the pen test firm work</font>

126
00:06:09,039 --> 00:06:14,950
on the staging version of the<font color="#CCCCCC"> site and</font>

127
00:06:12,360 --> 00:06:17,560
but I'm not actually<font color="#E5E5E5"> going to be</font>

128
00:06:14,950 --> 00:06:21,640
deploying<font color="#CCCCCC"> fixes</font><font color="#E5E5E5"> there</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> initially I've</font>

129
00:06:17,560 --> 00:06:24,930
got a<font color="#E5E5E5"> private dev copy of the site and</font>

130
00:06:21,640 --> 00:06:24,930
so what we<font color="#E5E5E5"> can do</font>

131
00:06:24,950 --> 00:06:34,219
we can redirect the target now<font color="#E5E5E5"> when we</font>

132
00:06:31,130 --> 00:06:37,520
say yes<font color="#CCCCCC"> to this do we want</font><font color="#E5E5E5"> to change</font><font color="#CCCCCC"> all</font>

133
00:06:34,220 --> 00:06:39,200
the targets<font color="#E5E5E5"> and the</font><font color="#CCCCCC"> request</font><font color="#E5E5E5"> macros it's</font>

134
00:06:37,520 --> 00:06:41,599
going to do some magic under<font color="#CCCCCC"> the hood</font>

135
00:06:39,200 --> 00:06:43,219
<font color="#E5E5E5">this magic and hood was significantly</font>

136
00:06:41,600 --> 00:06:46,370
more<font color="#E5E5E5"> complex than I thought it was going</font>

137
00:06:43,220 --> 00:06:49,250
<font color="#E5E5E5">to be initially but hopefully it's going</font>

138
00:06:46,370 --> 00:06:52,340
to<font color="#E5E5E5"> work now</font>

139
00:06:49,250 --> 00:06:54,920
just as<font color="#E5E5E5"> another test we're just gonna</font>

140
00:06:52,340 --> 00:06:56,989
check that all these issues<font color="#E5E5E5"> still</font>

141
00:06:54,920 --> 00:06:58,160
replicate because<font color="#E5E5E5"> there's always the</font><font color="#CCCCCC"> the</font>

142
00:06:56,990 --> 00:07:00,080
concern that<font color="#CCCCCC"> you've got a slightly</font>

143
00:06:58,160 --> 00:07:03,140
different configure your dad versus your

144
00:07:00,080 --> 00:07:04,849
staging so the next<font color="#E5E5E5"> step</font><font color="#CCCCCC"> just test them</font>

145
00:07:03,140 --> 00:07:10,430
<font color="#E5E5E5">all and thankfully they're all still</font>

146
00:07:04,850 --> 00:07:15,140
<font color="#E5E5E5">horrible</font><font color="#CCCCCC"> okay now we can start</font><font color="#E5E5E5"> working</font>

147
00:07:10,430 --> 00:07:16,850
away at each issue<font color="#E5E5E5"> so the first one SQL</font>

148
00:07:15,140 --> 00:07:19,190
injection the pen test report<font color="#CCCCCC"> this is</font>

149
00:07:16,850 --> 00:07:20,720
going to have a description<font color="#E5E5E5"> of why SQL</font>

150
00:07:19,190 --> 00:07:23,330
injections<font color="#E5E5E5"> are problem is what the</font>

151
00:07:20,720 --> 00:07:25,490
<font color="#CCCCCC">business impact</font><font color="#E5E5E5"> is and what strategies</font>

152
00:07:23,330 --> 00:07:27,620
you<font color="#E5E5E5"> can use to fix it and they hope that</font>

153
00:07:25,490 --> 00:07:29,840
<font color="#CCCCCC">these reports are going to be lovingly</font>

154
00:07:27,620 --> 00:07:33,820
handwritten and not in fact copy and

155
00:07:29,840 --> 00:07:33,820
pasted from<font color="#E5E5E5"> the burp output originally</font>

156
00:07:34,330 --> 00:07:43,640
so having read and understood this<font color="#E5E5E5"> I'm</font>

157
00:07:37,580 --> 00:07:47,000
gonna go<font color="#E5E5E5"> to my</font><font color="#CCCCCC"> source code and I'm just</font>

158
00:07:43,640 --> 00:07:52,180
I'm just<font color="#E5E5E5"> running a local VM here that's</font>

159
00:07:47,000 --> 00:07:52,180
<font color="#E5E5E5">got the vulnerable app on there</font>

160
00:07:59,509 --> 00:08:08,789
now<font color="#E5E5E5"> form a thermos file a little bit and</font>

161
00:08:05,449 --> 00:08:10,259
so there's two<font color="#E5E5E5"> two lines here they both</font>

162
00:08:08,789 --> 00:08:13,909
decide week one of<font color="#E5E5E5"> those vulnerable to</font>

163
00:08:10,259 --> 00:08:17,130
SQL injection and one of them<font color="#CCCCCC"> aids</font>

164
00:08:13,910 --> 00:08:20,930
bizarrely in<font color="#E5E5E5"> Python the two lines look</font>

165
00:08:17,130 --> 00:08:23,069
so similar<font color="#E5E5E5"> it's ridiculous but this one</font>

166
00:08:20,930 --> 00:08:24,479
this secure<font color="#E5E5E5"> version that's currently</font>

167
00:08:23,069 --> 00:08:27,180
commented out<font color="#E5E5E5"> I'm going to make that</font>

168
00:08:24,479 --> 00:08:37,080
active<font color="#CCCCCC"> and I'm going</font><font color="#E5E5E5"> to comment out the</font>

169
00:08:27,180 --> 00:08:38,729
vulnerable version<font color="#E5E5E5"> okay so we think</font>

170
00:08:37,080 --> 00:08:41,339
<font color="#E5E5E5">we've</font><font color="#CCCCCC"> done</font><font color="#E5E5E5"> effects the next thing we</font>

171
00:08:38,729 --> 00:08:44,910
want<font color="#CCCCCC"> to do is prove that</font><font color="#E5E5E5"> this fix</font>

172
00:08:41,339 --> 00:08:49,760
actually works<font color="#E5E5E5"> now</font><font color="#CCCCCC"> we can go back to the</font>

173
00:08:44,910 --> 00:08:58,040
replicator tool here<font color="#E5E5E5"> and we can try</font>

174
00:08:49,760 --> 00:09:02,010
testing<font color="#E5E5E5"> it again right and it's resolved</font>

175
00:08:58,040 --> 00:09:04,020
which is good now there is a little

176
00:09:02,010 --> 00:09:08,459
caveat<font color="#E5E5E5"> in bracket so it says resolved</font>

177
00:09:04,020 --> 00:09:11,130
brackets<font color="#E5E5E5"> sensitive now this has been a</font>

178
00:09:08,459 --> 00:09:13,800
necessary<font color="#E5E5E5"> inclusion based</font><font color="#CCCCCC"> on some of my</font>

179
00:09:11,130 --> 00:09:17,010
experiences<font color="#E5E5E5"> dealing with developers</font>

180
00:09:13,800 --> 00:09:19,920
because of course<font color="#E5E5E5"> what we want is for</font>

181
00:09:17,010 --> 00:09:21,839
<font color="#E5E5E5">them</font><font color="#CCCCCC"> to address the root cause of the</font>

182
00:09:19,920 --> 00:09:23,339
<font color="#CCCCCC">issue</font><font color="#E5E5E5"> so</font><font color="#CCCCCC"> if there's SQL injection we</font>

183
00:09:21,839 --> 00:09:26,070
want them<font color="#CCCCCC"> to move to having a</font>

184
00:09:23,339 --> 00:09:28,770
parameterised query<font color="#E5E5E5"> unfortunately time</font>

185
00:09:26,070 --> 00:09:30,540
and time again<font color="#CCCCCC"> I've run into fixes where</font>

186
00:09:28,770 --> 00:09:33,870
they've literally<font color="#E5E5E5"> blocked the attack</font>

187
00:09:30,540 --> 00:09:36,420
<font color="#CCCCCC">vector</font><font color="#E5E5E5"> that we've reported so there's</font>

188
00:09:33,870 --> 00:09:40,350
always the worry that<font color="#E5E5E5"> some different</font>

189
00:09:36,420 --> 00:09:43,170
attack vector is<font color="#E5E5E5"> going to you know mean</font>

190
00:09:40,350 --> 00:09:45,209
the vulnerability is still present<font color="#E5E5E5"> now</font>

191
00:09:43,170 --> 00:09:53,599
one<font color="#CCCCCC"> thing</font><font color="#E5E5E5"> we can do to help deal with</font>

192
00:09:45,209 --> 00:09:53,599
<font color="#E5E5E5">this you can do an active scan at that</font>

193
00:09:56,850 --> 00:10:08,970
<font color="#CCCCCC">oh that's</font><font color="#E5E5E5"> fine okay there's some really</font>

194
00:10:07,230 --> 00:10:11,130
<font color="#CCCCCC">minor issues there that we don't greatly</font>

195
00:10:08,970 --> 00:10:14,399
care about but the crucial<font color="#CCCCCC"> thing is this</font>

196
00:10:11,130 --> 00:10:16,620
<font color="#E5E5E5">SQL injection issue seems to be fixed so</font>

197
00:10:14,399 --> 00:10:21,110
that's<font color="#E5E5E5"> great</font><font color="#CCCCCC"> we can</font><font color="#E5E5E5"> move on</font><font color="#CCCCCC"> so the next</font>

198
00:10:16,620 --> 00:10:21,110
one on the<font color="#CCCCCC"> list</font><font color="#E5E5E5"> was cross-site scripting</font>

199
00:10:22,430 --> 00:10:32,519
now similarly we<font color="#CCCCCC"> can we can</font><font color="#E5E5E5"> look through</font>

200
00:10:28,949 --> 00:10:35,670
<font color="#E5E5E5">the code and we</font><font color="#CCCCCC"> can find in this</font>

201
00:10:32,519 --> 00:10:37,829
function here the<font color="#E5E5E5"> developer is following</font>

202
00:10:35,670 --> 00:10:40,110
<font color="#E5E5E5">very poor practice in that</font><font color="#CCCCCC"> they are</font>

203
00:10:37,829 --> 00:10:42,029
taking a variable from<font color="#E5E5E5"> a form parameter</font>

204
00:10:40,110 --> 00:10:44,009
and they are dumping<font color="#E5E5E5"> it straight in HTML</font>

205
00:10:42,029 --> 00:10:46,350
without any escaping which is the

206
00:10:44,009 --> 00:10:50,699
classic cross-site scripting attack now

207
00:10:46,350 --> 00:10:52,589
if<font color="#CCCCCC"> I uncomment this line here it means</font>

208
00:10:50,699 --> 00:10:56,729
<font color="#E5E5E5">we are</font><font color="#CCCCCC"> going to escape less than</font>

209
00:10:52,589 --> 00:11:00,449
characters<font color="#E5E5E5"> so I can quit out here I can</font>

210
00:10:56,730 --> 00:11:08,509
rerun<font color="#CCCCCC"> labs</font><font color="#E5E5E5"> I can go back to replicator</font>

211
00:11:00,449 --> 00:11:12,329
<font color="#CCCCCC">and I can try testing</font><font color="#E5E5E5"> this issue okay</font><font color="#CCCCCC"> so</font>

212
00:11:08,509 --> 00:11:16,259
it appears<font color="#E5E5E5"> to be resolved and that's if</font>

213
00:11:12,329 --> 00:11:19,138
we look at lower down on<font color="#E5E5E5"> the screen you</font>

214
00:11:16,259 --> 00:11:21,930
<font color="#CCCCCC">see this bit here where</font><font color="#E5E5E5"> previously there</font>

215
00:11:19,139 --> 00:11:24,089
<font color="#E5E5E5">was a script tag echoed the less than</font>

216
00:11:21,930 --> 00:11:26,839
<font color="#E5E5E5">sign has now been escaped so this isn't</font>

217
00:11:24,089 --> 00:11:30,689
this is no longer<font color="#CCCCCC"> gonna fire up</font>

218
00:11:26,839 --> 00:11:33,089
<font color="#CCCCCC">JavaScript now</font><font color="#E5E5E5"> just like before it might</font>

219
00:11:30,689 --> 00:11:34,250
be a very<font color="#E5E5E5"> good</font><font color="#CCCCCC"> idea to do an active scan</font>

220
00:11:33,089 --> 00:11:44,880
to see if<font color="#E5E5E5"> the issue</font>

221
00:11:34,250 --> 00:11:46,800
genuinely<font color="#E5E5E5"> is resolved right now this</font><font color="#CCCCCC"> is</font>

222
00:11:44,880 --> 00:11:48,540
<font color="#E5E5E5">more concerning because something</font><font color="#CCCCCC"> has</font>

223
00:11:46,800 --> 00:11:52,339
<font color="#E5E5E5">popped up on</font><font color="#CCCCCC"> the target tab and this</font>

224
00:11:48,540 --> 00:11:55,680
<font color="#E5E5E5">time it's red it's a high-risk issue and</font>

225
00:11:52,339 --> 00:11:58,050
it appears<font color="#CCCCCC"> that we still have cross-site</font>

226
00:11:55,680 --> 00:12:03,239
scripting<font color="#E5E5E5"> and in fact if we look at this</font>

227
00:11:58,050 --> 00:12:07,709
more<font color="#CCCCCC"> closely we're</font><font color="#E5E5E5"> better looking at the</font>

228
00:12:03,240 --> 00:12:10,380
response<font color="#E5E5E5"> to see this what the active</font>

229
00:12:07,709 --> 00:12:12,839
scanner<font color="#E5E5E5"> has done</font><font color="#CCCCCC"> there is its founder</font>

230
00:12:10,380 --> 00:12:14,520
<font color="#CCCCCC">sir native payload</font><font color="#E5E5E5"> that's got through</font>

231
00:12:12,840 --> 00:12:17,790
<font color="#E5E5E5">our very simple escaping</font>

232
00:12:14,520 --> 00:12:22,140
so the escaping was only removing<font color="#E5E5E5"> a less</font>

233
00:12:17,790 --> 00:12:24,900
than<font color="#E5E5E5"> sign in this example the injection</font>

234
00:12:22,140 --> 00:12:27,540
was<font color="#E5E5E5"> into a value tag</font><font color="#CCCCCC"> so it's possible to</font>

235
00:12:24,900 --> 00:12:30,000
<font color="#E5E5E5">have a across that scripts</font><font color="#CCCCCC"> before</font>

236
00:12:27,540 --> 00:12:31,560
without using the less than character<font color="#CCCCCC"> I</font>

237
00:12:30,000 --> 00:12:34,140
<font color="#E5E5E5">don't know if you've used</font><font color="#CCCCCC"> this</font>

238
00:12:31,560 --> 00:12:36,180
particular<font color="#CCCCCC"> trick before</font><font color="#E5E5E5"> this is one of</font>

239
00:12:34,140 --> 00:12:39,949
<font color="#CCCCCC">my</font><font color="#E5E5E5"> favorites for going into an input tag</font>

240
00:12:36,180 --> 00:12:42,060
<font color="#E5E5E5">and</font><font color="#CCCCCC"> that you can use the on focus</font>

241
00:12:39,950 --> 00:12:44,910
<font color="#CCCCCC">handler to put some JavaScript when the</font>

242
00:12:42,060 --> 00:12:47,160
when that<font color="#CCCCCC"> object gets focus and you can</font>

243
00:12:44,910 --> 00:12:49,050
also give<font color="#CCCCCC"> it the</font><font color="#E5E5E5"> auto focus now so</font><font color="#CCCCCC"> as</font>

244
00:12:47,160 --> 00:12:51,060
<font color="#E5E5E5">soon as the page loads up you don't need</font>

245
00:12:49,050 --> 00:12:57,089
any user interaction your<font color="#E5E5E5"> JavaScript</font>

246
00:12:51,060 --> 00:13:00,390
payload is going to execute and soon

247
00:12:57,090 --> 00:13:02,430
<font color="#E5E5E5">from there you can continue working</font>

248
00:13:00,390 --> 00:13:05,850
<font color="#E5E5E5">through these things to fix all the</font>

249
00:13:02,430 --> 00:13:08,189
issues<font color="#CCCCCC"> and then that would</font><font color="#E5E5E5"> be a very</font>

250
00:13:05,850 --> 00:13:10,350
good point<font color="#CCCCCC"> to send your application back</font>

251
00:13:08,190 --> 00:13:15,150
to the professional pen test company and

252
00:13:10,350 --> 00:13:17,130
have them<font color="#E5E5E5"> do a retest and hopefully</font>

253
00:13:15,150 --> 00:13:19,680
you're<font color="#E5E5E5"> gonna get the best benefit out of</font>

254
00:13:17,130 --> 00:13:21,390
<font color="#CCCCCC">your retest</font><font color="#E5E5E5"> because I I can think of a</font>

255
00:13:19,680 --> 00:13:24,930
<font color="#E5E5E5">number of times when I've</font><font color="#CCCCCC"> been asked to</font>

256
00:13:21,390 --> 00:13:27,630
<font color="#CCCCCC">work do a retest for a client</font><font color="#E5E5E5"> and when</font>

257
00:13:24,930 --> 00:13:29,640
it comes look at it<font color="#E5E5E5"> nothing has changed</font>

258
00:13:27,630 --> 00:13:32,730
in the behavior of<font color="#E5E5E5"> the area that was</font>

259
00:13:29,640 --> 00:13:35,699
vulnerable and even if this can't prove

260
00:13:32,730 --> 00:13:37,970
<font color="#E5E5E5">things are fix it at least should stop</font>

261
00:13:35,700 --> 00:13:37,970
<font color="#E5E5E5">that</font>

262
00:13:44,550 --> 00:13:50,339
<font color="#E5E5E5">okay so the the key points that made</font>

263
00:13:48,480 --> 00:13:52,920
this good for a<font color="#CCCCCC"> developer everything was</font>

264
00:13:50,340 --> 00:13:55,170
embedded<font color="#E5E5E5"> into</font><font color="#CCCCCC"> a single file so it can be</font>

265
00:13:52,920 --> 00:13:56,310
<font color="#CCCCCC">passed from the</font><font color="#E5E5E5"> pan tester to the</font>

266
00:13:55,170 --> 00:13:57,930
developer it can be<font color="#E5E5E5"> passed around</font>

267
00:13:56,310 --> 00:14:00,780
between<font color="#E5E5E5"> development teams</font><font color="#CCCCCC"> it'd be chosen</font>

268
00:13:57,930 --> 00:14:03,239
<font color="#CCCCCC">as share points replication can be done</font>

269
00:14:00,780 --> 00:14:04,949
in<font color="#E5E5E5"> one click so this is this</font><font color="#CCCCCC"> is quite</font><font color="#E5E5E5"> in</font>

270
00:14:03,240 --> 00:14:06,660
line with agile and<font color="#E5E5E5"> test-driven</font>

271
00:14:04,950 --> 00:14:09,030
development<font color="#E5E5E5"> it's the sort of behavior</font>

272
00:14:06,660 --> 00:14:10,469
<font color="#E5E5E5">that you want it's adaptable to the</font>

273
00:14:09,030 --> 00:14:12,089
environment<font color="#E5E5E5"> so the fact that the</font><font color="#CCCCCC"> Pens</font>

274
00:14:10,470 --> 00:14:14,370
have worked on<font color="#CCCCCC"> bla bla bla</font>

275
00:14:12,090 --> 00:14:16,800
staging<font color="#E5E5E5"> comm doesn't prevent the</font>

276
00:14:14,370 --> 00:14:19,710
developer then working<font color="#CCCCCC"> on</font><font color="#E5E5E5"> dad calm or or</font>

277
00:14:16,800 --> 00:14:21,359
whatever whatever<font color="#E5E5E5"> other environment but</font>

278
00:14:19,710 --> 00:14:23,400
<font color="#E5E5E5">the big</font><font color="#CCCCCC"> thing to remember</font><font color="#E5E5E5"> is that this</font>

279
00:14:21,360 --> 00:14:26,010
<font color="#CCCCCC">is not a silver bullet in itself and</font>

280
00:14:23,400 --> 00:14:30,959
<font color="#CCCCCC">that a manual retest</font><font color="#E5E5E5"> is the way to prove</font>

281
00:14:26,010 --> 00:14:33,710
<font color="#E5E5E5">that the issue is properly resolved</font><font color="#CCCCCC"> ok</font>

282
00:14:30,960 --> 00:14:35,790
so that<font color="#E5E5E5"> was the flow for developers um</font>

283
00:14:33,710 --> 00:14:37,680
but I think<font color="#CCCCCC"> a lot of people in the</font>

284
00:14:35,790 --> 00:14:39,120
audience<font color="#E5E5E5"> here at</font><font color="#CCCCCC"> Penn testers and you'll</font>

285
00:14:37,680 --> 00:14:41,640
be asking what Hamilton<font color="#E5E5E5"> we make this</font>

286
00:14:39,120 --> 00:14:44,940
replicated<font color="#CCCCCC"> fan</font><font color="#E5E5E5"> we need some kind of like</font>

287
00:14:41,640 --> 00:14:47,189
workshop to help<font color="#E5E5E5"> us craft this and I'm</font>

288
00:14:44,940 --> 00:15:03,090
going<font color="#CCCCCC"> to show</font><font color="#E5E5E5"> you exactly how</font><font color="#CCCCCC"> we</font><font color="#E5E5E5"> go</font>

289
00:14:47,190 --> 00:15:04,350
<font color="#CCCCCC">about</font><font color="#E5E5E5"> doing that now</font><font color="#CCCCCC"> ok</font><font color="#E5E5E5"> so first thing</font>

290
00:15:03,090 --> 00:15:07,200
I'm going<font color="#E5E5E5"> to do is just to clear out</font>

291
00:15:04,350 --> 00:15:09,690
what's in replicates and now you may not

292
00:15:07,200 --> 00:15:11,430
<font color="#E5E5E5">know</font><font color="#CCCCCC"> this if you hold</font><font color="#E5E5E5"> down control when</font>

293
00:15:09,690 --> 00:15:15,420
you click<font color="#E5E5E5"> this tick and extend the tab</font>

294
00:15:11,430 --> 00:15:16,770
it does a quick reload<font color="#CCCCCC"> I only learned</font>

295
00:15:15,420 --> 00:15:28,140
that quite recently I wish<font color="#E5E5E5"> I've known</font>

296
00:15:16,770 --> 00:15:30,689
<font color="#E5E5E5">that ages</font><font color="#CCCCCC"> ago</font><font color="#E5E5E5"> and and what we can do is</font>

297
00:15:28,140 --> 00:15:33,150
we can<font color="#E5E5E5"> put</font><font color="#CCCCCC"> replicate into</font><font color="#E5E5E5"> tests of you</font>

298
00:15:30,690 --> 00:15:38,480
so it's<font color="#E5E5E5"> going</font><font color="#CCCCCC"> to we get a few</font><font color="#E5E5E5"> more</font>

299
00:15:33,150 --> 00:15:38,480
<font color="#E5E5E5">buttons and options now now</font>

300
00:15:44,600 --> 00:15:50,069
so I've<font color="#E5E5E5"> been asked to do a</font><font color="#CCCCCC"> pan test of</font>

301
00:15:47,129 --> 00:15:53,610
this my demo staging<font color="#CCCCCC"> comm</font><font color="#E5E5E5"> and in fact it</font>

302
00:15:50,069 --> 00:16:02,579
<font color="#E5E5E5">turns out we've</font><font color="#CCCCCC"> been given a a test</font>

303
00:15:53,610 --> 00:16:05,279
account<font color="#E5E5E5"> to use as well now I'm going to</font>

304
00:16:02,579 --> 00:16:08,189
<font color="#CCCCCC">focus on the kind of burp heavy</font><font color="#E5E5E5"> workflow</font>

305
00:16:05,279 --> 00:16:09,930
of doing the pan test and we're not

306
00:16:08,189 --> 00:16:16,139
interested<font color="#CCCCCC"> in</font><font color="#E5E5E5"> my demo dev at this point</font>

307
00:16:09,930 --> 00:16:27,029
just<font color="#E5E5E5"> that's my demo staging and and I'm</font>

308
00:16:16,139 --> 00:16:31,009
<font color="#E5E5E5">just gonna okay so</font><font color="#CCCCCC"> I can start by</font>

309
00:16:27,029 --> 00:16:31,009
spidering the house just<font color="#E5E5E5"> to find all the</font>

310
00:16:31,309 --> 00:16:36,139
all the different<font color="#CCCCCC"> pages within the site</font>

311
00:16:36,379 --> 00:16:41,509
and we<font color="#E5E5E5"> can do an active scan</font>

312
00:16:47,850 --> 00:16:55,540
<font color="#E5E5E5">okay now some of these I'm just I'm just</font>

313
00:16:52,270 --> 00:16:57,490
<font color="#CCCCCC">gonna delete because</font><font color="#E5E5E5"> either they're</font>

314
00:16:55,540 --> 00:16:58,839
<font color="#E5E5E5">low-risk issues or because of</font><font color="#CCCCCC"> the</font>

315
00:16:57,490 --> 00:17:05,920
<font color="#E5E5E5">environment we're in we don't actually</font>

316
00:16:58,840 --> 00:17:08,110
care<font color="#E5E5E5"> that the password is is playing so</font>

317
00:17:05,920 --> 00:17:10,690
we found this issue<font color="#E5E5E5"> cross-site scripting</font>

318
00:17:08,109 --> 00:17:12,459
<font color="#CCCCCC">reflective</font><font color="#E5E5E5"> so this is something that we</font>

319
00:17:10,690 --> 00:17:14,830
<font color="#E5E5E5">want to communicate to the developer and</font>

320
00:17:12,460 --> 00:17:16,930
<font color="#E5E5E5">we can right-click it and we get</font><font color="#CCCCCC"> a</font>

321
00:17:14,829 --> 00:17:24,669
context menu option here which<font color="#CCCCCC"> notes to</font>

322
00:17:16,930 --> 00:17:26,590
send it<font color="#CCCCCC"> to the replicator now we've been</font>

323
00:17:24,670 --> 00:17:28,390
replicated<font color="#E5E5E5"> because this was found by</font>

324
00:17:26,589 --> 00:17:30,550
active scanner is able to automatically

325
00:17:28,390 --> 00:17:34,300
pick up<font color="#E5E5E5"> most of the details so</font><font color="#CCCCCC"> we've got</font>

326
00:17:30,550 --> 00:17:37,210
a title for the issue<font color="#E5E5E5"> we've also got the</font>

327
00:17:34,300 --> 00:17:39,250
path and parameter which are normally

328
00:17:37,210 --> 00:17:42,700
key bits of information that developers

329
00:17:39,250 --> 00:17:45,010
want<font color="#E5E5E5"> to see and here on the</font><font color="#CCCCCC"> left there's</font>

330
00:17:42,700 --> 00:17:47,950
a probe request so this is a<font color="#E5E5E5"> request</font>

331
00:17:45,010 --> 00:17:50,740
<font color="#E5E5E5">that will trigger the</font><font color="#CCCCCC"> vulnerability</font><font color="#E5E5E5"> and</font>

332
00:17:47,950 --> 00:17:54,820
<font color="#CCCCCC">the other thing we've got is detection</font>

333
00:17:50,740 --> 00:17:56,710
logic<font color="#E5E5E5"> in this example the intersection</font>

334
00:17:54,820 --> 00:17:59,800
logic is a graph expression so with this

335
00:17:56,710 --> 00:18:02,370
regular<font color="#CCCCCC"> expression matches</font><font color="#E5E5E5"> the response</font>

336
00:17:59,800 --> 00:18:05,680
we're going to treat<font color="#CCCCCC"> it as vulnerable</font>

337
00:18:02,370 --> 00:18:07,479
<font color="#CCCCCC">there is also a collaborator</font><font color="#E5E5E5"> detection</font>

338
00:18:05,680 --> 00:18:10,990
<font color="#CCCCCC">master that</font><font color="#E5E5E5"> you might want to play with</font>

339
00:18:07,480 --> 00:18:13,600
<font color="#CCCCCC">if you if you look at</font><font color="#E5E5E5"> this later on so</font>

340
00:18:10,990 --> 00:18:16,960
if<font color="#E5E5E5"> we can try this now and if we test it</font>

341
00:18:13,600 --> 00:18:19,469
it shows that the the<font color="#E5E5E5"> website is</font>

342
00:18:16,960 --> 00:18:19,470
vulnerable

343
00:18:30,910 --> 00:18:36,220
<font color="#E5E5E5">I've just realized that</font><font color="#CCCCCC"> I'm that</font><font color="#E5E5E5"> I need</font>

344
00:18:33,910 --> 00:18:49,870
to undo<font color="#CCCCCC"> to</font><font color="#E5E5E5"> demonstrate sort of it I need</font>

345
00:18:36,220 --> 00:18:51,490
<font color="#E5E5E5">to undo the</font><font color="#CCCCCC"> face okay</font><font color="#E5E5E5"> now you this scam</font>

346
00:18:49,870 --> 00:18:55,120
didn't find the SQL injection

347
00:18:51,490 --> 00:18:58,270
vulnerability now I don't<font color="#E5E5E5"> like to</font><font color="#CCCCCC"> rely</font>

348
00:18:55,120 --> 00:19:00,070
fully on automated testing so let's do a

349
00:18:58,270 --> 00:19:02,500
bit<font color="#E5E5E5"> of manual testing as well now the</font>

350
00:19:00,070 --> 00:19:04,330
the<font color="#CCCCCC"> go-to starting point for any manual</font>

351
00:19:02,500 --> 00:19:07,360
testing is a single quote<font color="#E5E5E5"> so if</font><font color="#CCCCCC"> I've</font><font color="#E5E5E5"> got</font>

352
00:19:04,330 --> 00:19:09,220
<font color="#E5E5E5">a single quote this field</font><font color="#CCCCCC"> instantly I</font>

353
00:19:07,360 --> 00:19:11,429
get an SQL error message so this<font color="#E5E5E5"> is</font>

354
00:19:09,220 --> 00:19:13,570
<font color="#E5E5E5">ringing all sorts of alarm bells about</font>

355
00:19:11,430 --> 00:19:16,470
this has got a floor and<font color="#E5E5E5"> I'm thinking</font>

356
00:19:13,570 --> 00:19:18,730
why has an active scanner found this now

357
00:19:16,470 --> 00:19:21,130
one of the first things I can do to

358
00:19:18,730 --> 00:19:23,530
<font color="#E5E5E5">investigate this is to dig the request</font>

359
00:19:21,130 --> 00:19:27,570
out<font color="#CCCCCC"> of</font><font color="#E5E5E5"> proxy history you can see in the</font>

360
00:19:23,530 --> 00:19:30,639
history<font color="#E5E5E5"> we can</font><font color="#CCCCCC"> see we've submitted the</font>

361
00:19:27,570 --> 00:19:33,939
single quote<font color="#E5E5E5"> if we just hover for a</font>

362
00:19:30,640 --> 00:19:36,610
second<font color="#E5E5E5"> we get handy inline URL decode</font>

363
00:19:33,940 --> 00:19:39,220
<font color="#E5E5E5">and we can see</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> response with the</font>

364
00:19:36,610 --> 00:19:42,250
suspicious-looking string<font color="#E5E5E5"> now if we send</font>

365
00:19:39,220 --> 00:19:44,380
this<font color="#E5E5E5"> to repeater what we would expect is</font>

366
00:19:42,250 --> 00:19:46,450
<font color="#CCCCCC">that we can send this off</font><font color="#E5E5E5"> again same</font>

367
00:19:44,380 --> 00:19:50,910
payload and<font color="#E5E5E5"> we would expect</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> get</font><font color="#CCCCCC"> these</font>

368
00:19:46,450 --> 00:19:55,450
<font color="#E5E5E5">same result but we don't</font>

369
00:19:50,910 --> 00:19:57,640
this is forbidden this<font color="#E5E5E5"> is a bit strange</font>

370
00:19:55,450 --> 00:20:02,290
<font color="#CCCCCC">so if I go back to</font><font color="#E5E5E5"> here I will refresh</font>

371
00:19:57,640 --> 00:20:05,410
the<font color="#E5E5E5"> page if I put in my payload</font><font color="#CCCCCC"> I put in</font>

372
00:20:02,290 --> 00:20:09,580
<font color="#E5E5E5">my payload again and get an error</font>

373
00:20:05,410 --> 00:20:12,820
<font color="#CCCCCC">message so what is</font><font color="#E5E5E5"> going on and we</font><font color="#CCCCCC"> can</font>

374
00:20:09,580 --> 00:20:15,250
dig a<font color="#CCCCCC"> couple of</font><font color="#E5E5E5"> these requests out of</font>

375
00:20:12,820 --> 00:20:19,330
the proxy history and send these<font color="#E5E5E5"> to the</font>

376
00:20:15,250 --> 00:20:24,250
<font color="#E5E5E5">comparer so this is going</font><font color="#CCCCCC"> to show us</font><font color="#E5E5E5"> the</font>

377
00:20:19,330 --> 00:20:26,409
exact differences and<font color="#E5E5E5"> what we can see is</font>

378
00:20:24,250 --> 00:20:29,260
<font color="#CCCCCC">that this token has changed between</font>

379
00:20:26,410 --> 00:20:31,390
<font color="#E5E5E5">requests we've got this dynamic</font><font color="#CCCCCC"> anti</font>

380
00:20:29,260 --> 00:20:32,770
cross-site request forgery token<font color="#E5E5E5"> so what</font>

381
00:20:31,390 --> 00:20:35,350
happens is we refresh the page<font color="#CCCCCC"> and we</font>

382
00:20:32,770 --> 00:20:37,840
get a valid token<font color="#E5E5E5"> we submit one payload</font>

383
00:20:35,350 --> 00:20:39,459
and that gets through to<font color="#E5E5E5"> the app and</font>

384
00:20:37,840 --> 00:20:41,409
<font color="#CCCCCC">triggers</font><font color="#E5E5E5"> the error but by that</font><font color="#CCCCCC"> point</font>

385
00:20:39,460 --> 00:20:44,750
that token<font color="#E5E5E5"> is</font><font color="#CCCCCC"> burning it's been used and</font>

386
00:20:41,410 --> 00:20:49,060
we can<font color="#E5E5E5"> only</font><font color="#CCCCCC"> use it for any</font><font color="#E5E5E5"> further probe</font>

387
00:20:44,750 --> 00:20:51,860
now it turns out that<font color="#CCCCCC"> Bert's got</font><font color="#E5E5E5"> a</font>

388
00:20:49,060 --> 00:21:00,500
useful<font color="#E5E5E5"> feature to help us deal with this</font>

389
00:20:51,860 --> 00:21:03,969
and what we can do<font color="#CCCCCC"> I just remove these</font>

390
00:21:00,500 --> 00:21:03,970
because these<font color="#E5E5E5"> are these</font><font color="#CCCCCC"> were set up so</font>

391
00:21:08,830 --> 00:21:14,330
<font color="#CCCCCC">the</font><font color="#E5E5E5"> first thing we can do is</font><font color="#CCCCCC"> define a</font>

392
00:21:11,510 --> 00:21:18,860
macro<font color="#CCCCCC"> so we have this request which</font>

393
00:21:14,330 --> 00:21:22,820
would get the search form<font color="#E5E5E5"> and the</font>

394
00:21:18,860 --> 00:21:25,300
response contains this token so if<font color="#E5E5E5"> I</font>

395
00:21:22,820 --> 00:21:32,270
<font color="#CCCCCC">create a macro like this I can call it</font>

396
00:21:25,300 --> 00:21:34,669
fetch<font color="#E5E5E5"> CSRF token now the next thing I</font>

397
00:21:32,270 --> 00:21:36,530
want to<font color="#E5E5E5"> do is I want to configure this</font>

398
00:21:34,670 --> 00:21:38,300
post request so that<font color="#E5E5E5"> every time the post</font>

399
00:21:36,530 --> 00:21:41,180
request runs it's going<font color="#CCCCCC"> to fetch</font><font color="#E5E5E5"> a fresh</font>

400
00:21:38,300 --> 00:21:45,889
token<font color="#E5E5E5"> now the first thing I need to do</font>

401
00:21:41,180 --> 00:21:47,690
is<font color="#E5E5E5"> capture the URL of</font><font color="#CCCCCC"> that request and</font>

402
00:21:45,890 --> 00:21:49,640
then I can create<font color="#CCCCCC"> a session handling</font>

403
00:21:47,690 --> 00:21:54,410
rule<font color="#E5E5E5"> and I'm gonna I'm gonna call this</font>

404
00:21:49,640 --> 00:21:56,870
update<font color="#E5E5E5"> CSRF token in the rule action I</font>

405
00:21:54,410 --> 00:21:58,510
want to run a macro<font color="#E5E5E5"> I'll select</font><font color="#CCCCCC"> that</font>

406
00:21:56,870 --> 00:22:01,189
macro<font color="#E5E5E5"> that I've just defined and</font>

407
00:21:58,510 --> 00:22:03,530
crucially I'm going to leave this<font color="#CCCCCC"> option</font>

408
00:22:01,190 --> 00:22:06,800
here enabled which says<font color="#CCCCCC"> update the</font>

409
00:22:03,530 --> 00:22:12,110
current<font color="#E5E5E5"> request with parameters from</font><font color="#CCCCCC"> the</font>

410
00:22:06,800 --> 00:22:14,149
macro<font color="#E5E5E5"> response now we also want to</font>

411
00:22:12,110 --> 00:22:18,139
define<font color="#CCCCCC"> a scope so I'm going</font><font color="#E5E5E5"> to paste the</font>

412
00:22:14,150 --> 00:22:19,730
URL<font color="#CCCCCC"> they I just copied and because we're</font>

413
00:22:18,140 --> 00:22:21,140
going<font color="#CCCCCC"> to use this with replicated down</font>

414
00:22:19,730 --> 00:22:25,520
the line I'm<font color="#E5E5E5"> going to enable the</font>

415
00:22:21,140 --> 00:22:28,340
<font color="#E5E5E5">extender scope</font><font color="#CCCCCC"> okay so now if we go back</font>

416
00:22:25,520 --> 00:22:29,420
to repeater<font color="#E5E5E5"> what's gonna happen when</font>

417
00:22:28,340 --> 00:22:30,949
<font color="#E5E5E5">press goes under the hood it's going to</font>

418
00:22:29,420 --> 00:22:33,050
issue the<font color="#E5E5E5"> macro is going to fetch that</font>

419
00:22:30,950 --> 00:22:34,880
fresh<font color="#E5E5E5"> fetch that fresh token it's going</font>

420
00:22:33,050 --> 00:22:37,909
to update the request we can<font color="#E5E5E5"> see here</font>

421
00:22:34,880 --> 00:22:44,330
and then we<font color="#E5E5E5"> are going to get</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> different</font>

422
00:22:37,910 --> 00:22:48,590
response and you can see you can see

423
00:22:44,330 --> 00:22:51,320
each time<font color="#E5E5E5"> we do it tokens updating but</font>

424
00:22:48,590 --> 00:22:56,949
it's not just good for repeater this we

425
00:22:51,320 --> 00:22:56,950
can now send this back<font color="#CCCCCC"> to active scanner</font>

426
00:22:58,830 --> 00:23:23,020
we just give this a<font color="#E5E5E5"> minute oh yeah try</font>

427
00:23:17,950 --> 00:23:26,500
<font color="#E5E5E5">that one more</font><font color="#CCCCCC"> time right and we've now</font>

428
00:23:23,020 --> 00:23:29,399
found the SQL injection floor now<font color="#E5E5E5"> this</font>

429
00:23:26,500 --> 00:23:32,080
time<font color="#CCCCCC"> if we send this to work replicator</font>

430
00:23:29,399 --> 00:23:33,760
<font color="#E5E5E5">now just as before</font><font color="#CCCCCC"> it picks up the</font>

431
00:23:32,080 --> 00:23:35,439
vulnerability description it picks up

432
00:23:33,760 --> 00:23:36,970
<font color="#E5E5E5">the path the parameter it gives us a</font>

433
00:23:35,440 --> 00:23:41,470
probe<font color="#E5E5E5"> request it gives us detection</font>

434
00:23:36,970 --> 00:23:44,529
logic<font color="#E5E5E5"> but crucially as well it's</font>

435
00:23:41,470 --> 00:23:47,500
identified this session rule which

436
00:23:44,529 --> 00:23:50,169
applies to<font color="#CCCCCC"> that request</font><font color="#E5E5E5"> so now when we</font>

437
00:23:47,500 --> 00:23:52,299
save this replicated file embedded in

438
00:23:50,169 --> 00:23:54,190
<font color="#CCCCCC">that file</font><font color="#E5E5E5"> is that such a rule and that</font>

439
00:23:52,299 --> 00:23:56,470
<font color="#CCCCCC">macro</font><font color="#E5E5E5"> and then when the developer</font>

440
00:23:54,190 --> 00:23:59,850
receives<font color="#E5E5E5"> this when they load it they get</font>

441
00:23:56,470 --> 00:24:02,049
that configuration preloaded into<font color="#E5E5E5"> burp</font>

442
00:23:59,850 --> 00:24:05,080
<font color="#E5E5E5">which which helps them with this sort of</font>

443
00:24:02,049 --> 00:24:07,210
<font color="#E5E5E5">you</font><font color="#CCCCCC"> know just clicking go experience</font><font color="#E5E5E5"> now</font>

444
00:24:05,080 --> 00:24:10,029
<font color="#CCCCCC">you cannot</font><font color="#E5E5E5"> rely on active scanner to</font>

445
00:24:07,210 --> 00:24:13,029
find<font color="#E5E5E5"> everything so something else that I</font>

446
00:24:10,029 --> 00:24:16,659
tend to do during a test is to use the

447
00:24:13,029 --> 00:24:19,419
content discovery<font color="#E5E5E5"> function now</font><font color="#CCCCCC"> I know</font>

448
00:24:16,659 --> 00:24:21,490
<font color="#E5E5E5">loads of</font><font color="#CCCCCC"> people use deer</font><font color="#E5E5E5"> Buster and</font>

449
00:24:19,419 --> 00:24:22,779
<font color="#CCCCCC">Durbin things</font><font color="#E5E5E5"> not everyone seems to know</font>

450
00:24:21,490 --> 00:24:24,700
that there<font color="#E5E5E5"> is a similar functionality</font>

451
00:24:22,779 --> 00:24:25,990
built right<font color="#E5E5E5"> into</font><font color="#CCCCCC"> Burke which lets you</font>

452
00:24:24,700 --> 00:24:29,380
leverage a whole load of<font color="#E5E5E5"> other stuff</font>

453
00:24:25,990 --> 00:24:33,010
like<font color="#CCCCCC"> their set and handling rules so we</font>

454
00:24:29,380 --> 00:24:35,820
can<font color="#CCCCCC"> kick that off for</font><font color="#E5E5E5"> inning and</font>

455
00:24:33,010 --> 00:24:39,399
actually already after a little<font color="#CCCCCC"> while</font>

456
00:24:35,820 --> 00:24:49,750
<font color="#E5E5E5">we've already found something new on the</font>

457
00:24:39,399 --> 00:24:56,689
<font color="#CCCCCC">sitemap this admin page oh I wasn't</font>

458
00:24:49,750 --> 00:25:00,199
expecting<font color="#CCCCCC"> there we send</font><font color="#E5E5E5"> this</font>

459
00:24:56,690 --> 00:25:00,199
[Music]

460
00:25:04,269 --> 00:25:09,529
<font color="#E5E5E5">it's need to turn on the cookie jar for</font>

461
00:25:07,039 --> 00:25:11,929
<font color="#E5E5E5">a pizza</font><font color="#CCCCCC"> there we go</font>

462
00:25:09,529 --> 00:25:13,220
so if we request<font color="#E5E5E5"> this admin page even</font>

463
00:25:11,929 --> 00:25:15,139
<font color="#CCCCCC">though we were just logged on as the</font>

464
00:25:13,220 --> 00:25:17,330
<font color="#E5E5E5">test use them with no special</font><font color="#CCCCCC"> privileges</font>

465
00:25:15,139 --> 00:25:20,330
we have<font color="#CCCCCC"> gotten</font><font color="#E5E5E5"> authorize access</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> the</font>

466
00:25:17,330 --> 00:25:24,470
admin<font color="#CCCCCC"> panel</font><font color="#E5E5E5"> now again we can send this</font>

467
00:25:20,330 --> 00:25:27,019
to replicator<font color="#CCCCCC"> and</font><font color="#E5E5E5"> but because this isn't</font>

468
00:25:24,470 --> 00:25:29,749
an active scanner generated issue<font color="#E5E5E5"> we</font>

469
00:25:27,019 --> 00:25:31,279
have<font color="#E5E5E5"> to do a bit more work</font><font color="#CCCCCC"> so for</font>

470
00:25:29,749 --> 00:25:41,059
<font color="#E5E5E5">instance we need to write in the issue</font>

471
00:25:31,279 --> 00:25:45,889
description ourselves so now we've got

472
00:25:41,059 --> 00:25:48,259
the probe<font color="#E5E5E5"> request but we also need</font><font color="#CCCCCC"> to</font>

473
00:25:45,889 --> 00:25:50,779
manually define the<font color="#CCCCCC"> taxon logic</font><font color="#E5E5E5"> now</font>

474
00:25:48,259 --> 00:25:52,850
<font color="#E5E5E5">seems to me a pretty fair thing</font><font color="#CCCCCC"> to</font>

475
00:25:50,779 --> 00:25:56,749
search on would<font color="#CCCCCC"> be the admin panel so if</font>

476
00:25:52,850 --> 00:25:59,049
I<font color="#E5E5E5"> I select that string I can then</font>

477
00:25:56,749 --> 00:26:02,419
instruct it<font color="#CCCCCC"> to use that selection</font><font color="#E5E5E5"> and</font>

478
00:25:59,049 --> 00:26:04,549
now any term that<font color="#E5E5E5"> probe</font><font color="#CCCCCC"> requests</font><font color="#E5E5E5"> gives</font>

479
00:26:02,419 --> 00:26:08,769
you the admin panel<font color="#E5E5E5"> it will trigger a</font>

480
00:26:04,549 --> 00:26:08,769
vulnerability<font color="#E5E5E5"> and we can test that now</font>

481
00:26:11,769 --> 00:26:21,470
now<font color="#E5E5E5"> all these requests have got session</font>

482
00:26:18,080 --> 00:26:23,359
IDs in them<font color="#CCCCCC"> remember I</font><font color="#E5E5E5"> said earlier</font><font color="#CCCCCC"> one</font>

483
00:26:21,470 --> 00:26:25,580
<font color="#CCCCCC">of</font><font color="#E5E5E5"> the problems is while you're testing</font>

484
00:26:23,359 --> 00:26:28,039
that session ID is valid<font color="#E5E5E5"> but down the</font>

485
00:26:25,580 --> 00:26:30,379
<font color="#CCCCCC">line the session ID</font><font color="#E5E5E5"> may no longer be</font>

486
00:26:28,039 --> 00:26:35,779
valid<font color="#E5E5E5"> now</font><font color="#CCCCCC"> we've got some tools here</font>

487
00:26:30,379 --> 00:26:38,359
<font color="#E5E5E5">which can help us and deal</font><font color="#CCCCCC"> with this so</font>

488
00:26:35,779 --> 00:26:40,549
the first thing I'm<font color="#CCCCCC"> going to do is I'm</font>

489
00:26:38,359 --> 00:26:45,918
going<font color="#CCCCCC"> to scrub cookies from</font><font color="#E5E5E5"> all these</font>

490
00:26:40,549 --> 00:26:47,210
requests so now I've removed<font color="#CCCCCC"> the session</font>

491
00:26:45,919 --> 00:26:49,009
ID so there's no<font color="#E5E5E5"> chance that we're</font>

492
00:26:47,210 --> 00:26:50,509
corrupting ourselves with sort<font color="#E5E5E5"> of having</font>

493
00:26:49,009 --> 00:26:53,119
a session<font color="#CCCCCC"> ID that won't be valid</font><font color="#E5E5E5"> in the</font>

494
00:26:50,509 --> 00:26:55,190
future<font color="#E5E5E5"> now</font><font color="#CCCCCC"> that alone won't solve</font>

495
00:26:53,119 --> 00:26:57,289
everything<font color="#E5E5E5"> because it</font><font color="#CCCCCC"> burps internal</font>

496
00:26:55,190 --> 00:27:03,009
cookie jar will affect things so I need

497
00:26:57,289 --> 00:27:05,899
to<font color="#CCCCCC"> also empty that cookie jar so now</font>

498
00:27:03,009 --> 00:27:09,169
we've simulated<font color="#E5E5E5"> the situation that</font><font color="#CCCCCC"> all</font>

499
00:27:05,899 --> 00:27:12,039
our cookies have<font color="#E5E5E5"> expired</font><font color="#CCCCCC"> and those</font>

500
00:27:09,169 --> 00:27:14,960
<font color="#CCCCCC">vulnerabilities are unable to replicate</font>

501
00:27:12,039 --> 00:27:18,289
<font color="#CCCCCC">now what we</font><font color="#E5E5E5"> need to do to fix this</font>

502
00:27:14,960 --> 00:27:22,520
is define<font color="#E5E5E5"> the</font><font color="#CCCCCC"> login macro</font><font color="#E5E5E5"> so I can go</font>

503
00:27:18,289 --> 00:27:24,140
<font color="#CCCCCC">back here</font><font color="#E5E5E5"> if I look</font><font color="#CCCCCC"> down history this is</font>

504
00:27:22,520 --> 00:27:27,440
<font color="#E5E5E5">the original post</font><font color="#CCCCCC"> request where we</font>

505
00:27:24,140 --> 00:27:30,470
logged in<font color="#E5E5E5"> is</font><font color="#CCCCCC"> use men's hat</font><font color="#E5E5E5"> so define</font>

506
00:27:27,440 --> 00:27:36,200
this macro and call it log in<font color="#CCCCCC"> and</font><font color="#E5E5E5"> as</font>

507
00:27:30,470 --> 00:27:44,960
<font color="#E5E5E5">test now back in replicator we can</font>

508
00:27:36,200 --> 00:27:47,149
select a loggia macro we now try it<font color="#E5E5E5"> they</font>

509
00:27:44,960 --> 00:27:49,730
all replicate as vulnerable<font color="#E5E5E5"> and now we</font>

510
00:27:47,149 --> 00:27:52,580
can<font color="#E5E5E5"> have a lot of</font><font color="#CCCCCC"> confidence that</font><font color="#E5E5E5"> if we</font>

511
00:27:49,730 --> 00:27:54,830
send this off to<font color="#E5E5E5"> a developer that</font><font color="#CCCCCC"> they</font>

512
00:27:52,580 --> 00:27:58,360
will be able<font color="#E5E5E5"> to replicate them just the</font>

513
00:27:54,830 --> 00:28:02,210
same<font color="#E5E5E5"> and there's one other feature</font>

514
00:27:58,360 --> 00:28:08,330
<font color="#E5E5E5">that's</font><font color="#CCCCCC"> come in handy in some some</font>

515
00:28:02,210 --> 00:28:12,260
situations<font color="#E5E5E5"> and so you might have some</font>

516
00:28:08,330 --> 00:28:14,570
particular<font color="#CCCCCC"> bird config setup that</font><font color="#E5E5E5"> you</font>

517
00:28:12,260 --> 00:28:16,399
need<font color="#E5E5E5"> to access it could be an</font><font color="#CCCCCC"> thailand</font>

518
00:28:14,570 --> 00:28:18,168
platform or authentication it could be

519
00:28:16,399 --> 00:28:24,649
<font color="#CCCCCC">hostname resolution it could be all</font>

520
00:28:18,169 --> 00:28:28,220
<font color="#CCCCCC">sorts of things</font><font color="#E5E5E5"> now</font><font color="#CCCCCC"> we've got the</font>

521
00:28:24,649 --> 00:28:30,949
capability<font color="#E5E5E5"> here to import some config</font>

522
00:28:28,220 --> 00:28:33,770
from<font color="#E5E5E5"> the currently running burp instance</font>

523
00:28:30,950 --> 00:28:38,240
so I'm actually going to from the

524
00:28:33,770 --> 00:28:42,440
project options<font color="#E5E5E5"> within connections I'm</font>

525
00:28:38,240 --> 00:28:45,080
going to import the<font color="#E5E5E5"> hostname resolution</font>

526
00:28:42,440 --> 00:28:47,450
<font color="#E5E5E5">and it so this Maps the my demo stage</font>

527
00:28:45,080 --> 00:28:48,590
<font color="#CCCCCC">intern IP address so if the developer</font>

528
00:28:47,450 --> 00:28:52,279
tried to run this<font color="#E5E5E5"> and they didn't have</font>

529
00:28:48,590 --> 00:28:56,689
this<font color="#E5E5E5"> confit it wouldn't work</font><font color="#CCCCCC"> so we can</font>

530
00:28:52,279 --> 00:29:03,230
save that so now everything it all get

531
00:28:56,690 --> 00:29:06,590
packaged up<font color="#CCCCCC"> and we can say</font><font color="#E5E5E5"> that as a</font>

532
00:29:03,230 --> 00:29:08,120
file<font color="#E5E5E5"> now obviously there is a fair</font>

533
00:29:06,590 --> 00:29:12,260
<font color="#E5E5E5">amount of confidential stuff in this</font>

534
00:29:08,120 --> 00:29:14,299
<font color="#E5E5E5">file and but you've already got some</font>

535
00:29:12,260 --> 00:29:16,640
secure communication mechanism to<font color="#E5E5E5"> get</font>

536
00:29:14,299 --> 00:29:18,470
your report<font color="#E5E5E5"> from your company see your</font>

537
00:29:16,640 --> 00:29:21,140
client so<font color="#E5E5E5"> you can just leverage that</font>

538
00:29:18,470 --> 00:29:22,940
exact same<font color="#E5E5E5"> communication mechanism to</font>

539
00:29:21,140 --> 00:29:24,580
send the replicates file as well and

540
00:29:22,940 --> 00:29:29,230
then they've<font color="#CCCCCC"> got the ability to</font>

541
00:29:24,580 --> 00:29:29,230
<font color="#E5E5E5">reproduce all the issues</font>

542
00:29:32,389 --> 00:29:43,649
so that that's<font color="#E5E5E5"> the that's the workflow</font>

543
00:29:37,369 --> 00:29:46,049
<font color="#CCCCCC">for a tester</font><font color="#E5E5E5"> the key points</font><font color="#CCCCCC"> I thought</font>

544
00:29:43,649 --> 00:29:48,029
<font color="#E5E5E5">first of all is that there is a list of</font>

545
00:29:46,049 --> 00:29:50,730
<font color="#E5E5E5">all the</font><font color="#CCCCCC"> vulnerabilities that</font><font color="#E5E5E5"> every</font>

546
00:29:48,029 --> 00:29:53,399
vulnerability<font color="#E5E5E5"> has got a probe it's got a</font>

547
00:29:50,730 --> 00:29:55,889
crafted request which you can prove used

548
00:29:53,399 --> 00:29:57,539
to prove presence or absence of<font color="#CCCCCC"> of the</font>

549
00:29:55,889 --> 00:29:59,189
vulnerability and<font color="#CCCCCC"> it's got detection</font>

550
00:29:57,539 --> 00:30:01,379
logic so it can look at the<font color="#E5E5E5"> response and</font>

551
00:29:59,190 --> 00:30:03,929
it can say okay<font color="#E5E5E5"> this is vulnerable or</font>

552
00:30:01,379 --> 00:30:06,269
this has been resolved<font color="#E5E5E5"> and then to</font>

553
00:30:03,929 --> 00:30:07,679
<font color="#CCCCCC">support that it's got a login macro</font><font color="#E5E5E5"> it's</font>

554
00:30:06,269 --> 00:30:10,109
got all the session handling<font color="#E5E5E5"> rules and</font>

555
00:30:07,679 --> 00:30:18,840
it's got the relevant sections of<font color="#E5E5E5"> your</font>

556
00:30:10,109 --> 00:30:21,139
<font color="#E5E5E5">bit configuration now is it so so you</font>

557
00:30:18,840 --> 00:30:27,149
<font color="#CCCCCC">can serve up a</font><font color="#E5E5E5"> wonderful post battle</font>

558
00:30:21,139 --> 00:30:30,418
<font color="#E5E5E5">banquet now sometimes even with the best</font>

559
00:30:27,149 --> 00:30:31,918
starship technology things can go wrong

560
00:30:30,419 --> 00:30:34,669
and one<font color="#E5E5E5"> of the scenarios</font><font color="#CCCCCC"> that we</font>

561
00:30:31,919 --> 00:30:38,009
envisaged happening was that<font color="#E5E5E5"> you would</font>

562
00:30:34,669 --> 00:30:40,019
you<font color="#E5E5E5"> have a developer one and they say it</font>

563
00:30:38,009 --> 00:30:41,279
<font color="#E5E5E5">just doesn't</font><font color="#CCCCCC"> replicate on my machine and</font>

564
00:30:40,019 --> 00:30:43,950
you've got the pen tester<font color="#E5E5E5"> and then say</font>

565
00:30:41,279 --> 00:30:47,909
well it works<font color="#E5E5E5"> for me</font><font color="#CCCCCC"> you think how how</font>

566
00:30:43,950 --> 00:30:52,769
<font color="#CCCCCC">would we resolve this impasse so we've</font>

567
00:30:47,909 --> 00:30:57,350
included<font color="#E5E5E5"> a trace feature so if you're</font>

568
00:30:52,769 --> 00:30:57,350
having difficulty replicating an issue

569
00:30:57,409 --> 00:31:05,100
you can<font color="#CCCCCC"> turn on</font><font color="#E5E5E5"> the trace feature</font><font color="#CCCCCC"> so now</font>

570
00:31:02,249 --> 00:31:07,259
once this is<font color="#CCCCCC"> turned</font><font color="#E5E5E5"> on every HTTP</font>

571
00:31:05,100 --> 00:31:09,359
request<font color="#E5E5E5"> which goes through Birds Network</font>

572
00:31:07,259 --> 00:31:12,330
stack and the response<font color="#CCCCCC"> that comes</font><font color="#E5E5E5"> back</font>

573
00:31:09,359 --> 00:31:16,918
gets recorded in an in-memory log so<font color="#E5E5E5"> you</font>

574
00:31:12,330 --> 00:31:19,080
can then repeat all the tests and then

575
00:31:16,919 --> 00:31:25,080
when you're done you<font color="#CCCCCC"> can stop tracing</font>

576
00:31:19,080 --> 00:31:27,689
and you can save everything<font color="#E5E5E5"> to a trace</font>

577
00:31:25,080 --> 00:31:29,129
file<font color="#E5E5E5"> and you can then send</font><font color="#CCCCCC"> that back so</font>

578
00:31:27,690 --> 00:31:32,489
the person who gave<font color="#E5E5E5"> you the</font><font color="#CCCCCC"> replicator</font>

579
00:31:29,129 --> 00:31:35,428
<font color="#E5E5E5">file and hopefully between you you can</font>

580
00:31:32,489 --> 00:31:38,690
debug<font color="#E5E5E5"> it it will still take some degree</font>

581
00:31:35,429 --> 00:31:38,690
<font color="#CCCCCC">of skills</font><font color="#E5E5E5"> to debug</font><font color="#CCCCCC"> that</font>

582
00:31:44,030 --> 00:31:50,280
yeah

583
00:31:45,240 --> 00:31:52,680
so that<font color="#E5E5E5"> was all about the extension</font><font color="#CCCCCC"> um I</font>

584
00:31:50,280 --> 00:31:54,120
just<font color="#CCCCCC"> wanted to add to this about some</font>

585
00:31:52,680 --> 00:31:56,160
things I<font color="#CCCCCC"> learned about developing</font>

586
00:31:54,120 --> 00:31:59,189
extensions<font color="#CCCCCC"> because this</font><font color="#E5E5E5"> this is the</font>

587
00:31:56,160 --> 00:32:01,170
<font color="#E5E5E5">first like major extension I've written</font>

588
00:31:59,190 --> 00:32:03,510
<font color="#E5E5E5">that's ended up being in the</font><font color="#CCCCCC"> bat</font><font color="#E5E5E5"> store</font>

589
00:32:01,170 --> 00:32:05,480
<font color="#E5E5E5">I've written one-shot extensions before</font>

590
00:32:03,510 --> 00:32:08,220
<font color="#E5E5E5">that</font><font color="#CCCCCC"> were to deal with particular</font>

591
00:32:05,480 --> 00:32:10,200
technologies but they never<font color="#E5E5E5"> they'd never</font>

592
00:32:08,220 --> 00:32:12,690
been released publicly<font color="#E5E5E5"> they were always</font>

593
00:32:10,200 --> 00:32:14,280
kind of written to a standards like well

594
00:32:12,690 --> 00:32:17,730
it works<font color="#E5E5E5"> for me now but if it breaks</font>

595
00:32:14,280 --> 00:32:20,280
stuff<font color="#E5E5E5"> so things I've learned that work</font>

596
00:32:17,730 --> 00:32:23,520
really<font color="#E5E5E5"> well and you</font><font color="#CCCCCC"> really do</font><font color="#E5E5E5"> want to</font>

597
00:32:20,280 --> 00:32:27,120
use an IDE to<font color="#E5E5E5"> do</font><font color="#CCCCCC"> development and</font><font color="#E5E5E5"> um I've</font>

598
00:32:23,520 --> 00:32:29,820
certainly found that<font color="#E5E5E5"> IntelliJ is very</font>

599
00:32:27,120 --> 00:32:32,070
pleasant<font color="#E5E5E5"> to</font><font color="#CCCCCC"> use so compared to Eclipse</font>

600
00:32:29,820 --> 00:32:35,490
and NetBeans<font color="#CCCCCC"> it just does a bit more</font>

601
00:32:32,070 --> 00:32:38,610
code suggestion immediate static

602
00:32:35,490 --> 00:32:41,580
analysis<font color="#E5E5E5"> or</font><font color="#CCCCCC"> smade refactoring</font><font color="#E5E5E5"> and just</font>

603
00:32:38,610 --> 00:32:43,290
all those<font color="#E5E5E5"> little bits they actually add</font>

604
00:32:41,580 --> 00:32:46,409
<font color="#CCCCCC">ups</font><font color="#E5E5E5"> making it look there's a lot more</font>

605
00:32:43,290 --> 00:32:50,570
flow<font color="#CCCCCC"> as you're developing Gradle works</font>

606
00:32:46,410 --> 00:32:53,760
really well as a build<font color="#CCCCCC"> system</font><font color="#E5E5E5"> and and</font>

607
00:32:50,570 --> 00:32:55,909
just like maven it lets you reference

608
00:32:53,760 --> 00:32:58,260
external artifacts<font color="#CCCCCC"> from your build files</font>

609
00:32:55,910 --> 00:33:01,080
and this is actually a really handy<font color="#CCCCCC"> way</font>

610
00:32:58,260 --> 00:33:03,900
to integrate<font color="#E5E5E5"> the burp API quite a lot of</font>

611
00:33:01,080 --> 00:33:06,300
<font color="#CCCCCC">the extensions have exported all the</font>

612
00:33:03,900 --> 00:33:08,550
interface files and kept them in their

613
00:33:06,300 --> 00:33:11,370
source code<font color="#CCCCCC"> and this this works fine</font>

614
00:33:08,550 --> 00:33:12,770
<font color="#E5E5E5">there's no problem</font><font color="#CCCCCC"> with it just put</font><font color="#E5E5E5"> as</font>

615
00:33:11,370 --> 00:33:15,060
your source code up and that's a

616
00:33:12,770 --> 00:33:18,420
referencing the artifacts<font color="#CCCCCC"> is a really</font>

617
00:33:15,060 --> 00:33:20,100
clean way to<font color="#CCCCCC"> do it and if you're</font>

618
00:33:18,420 --> 00:33:22,380
<font color="#CCCCCC">building forms</font><font color="#E5E5E5"> while there isn't</font>

619
00:33:20,100 --> 00:33:25,740
IntelliJ form builder<font color="#E5E5E5"> we found that the</font>

620
00:33:22,380 --> 00:33:27,750
NetBeans form builder is is preferable

621
00:33:25,740 --> 00:33:30,360
<font color="#E5E5E5">and actually they work together fine</font>

622
00:33:27,750 --> 00:33:32,850
it's absolutely no problem<font color="#CCCCCC"> to be</font><font color="#E5E5E5"> adding</font>

623
00:33:30,360 --> 00:33:34,649
a form in NetBeans<font color="#E5E5E5"> editing the code and</font>

624
00:33:32,850 --> 00:33:36,899
<font color="#E5E5E5">in salad if you change one they ought</font><font color="#CCCCCC"> to</font>

625
00:33:34,650 --> 00:33:39,080
reload and<font color="#E5E5E5"> it's is it's</font><font color="#CCCCCC"> actually really</font>

626
00:33:36,900 --> 00:33:45,720
hard<font color="#E5E5E5"> to mess things up</font>

627
00:33:39,080 --> 00:33:48,030
and now something<font color="#E5E5E5"> I'd not done</font><font color="#CCCCCC"> much of</font>

628
00:33:45,720 --> 00:33:49,980
at all when I<font color="#E5E5E5"> was kind</font><font color="#CCCCCC"> of like</font><font color="#E5E5E5"> a pen</font>

629
00:33:48,030 --> 00:33:51,480
tester who did a bit of<font color="#CCCCCC"> coding was using</font>

630
00:33:49,980 --> 00:33:53,309
a debugger<font color="#CCCCCC"> now if you've</font><font color="#E5E5E5"> got your</font>

631
00:33:51,480 --> 00:33:55,100
captain breathing down your neck and<font color="#E5E5E5"> you</font>

632
00:33:53,309 --> 00:33:59,249
<font color="#E5E5E5">to get your</font><font color="#CCCCCC"> Wharton</font><font color="#E5E5E5"> those cells going at</font>

633
00:33:55,100 --> 00:34:02,850
<font color="#CCCCCC">what dr9</font><font color="#E5E5E5"> fast</font><font color="#CCCCCC"> a debugger</font><font color="#E5E5E5"> can greatly</font>

634
00:33:59,249 --> 00:34:04,919
help<font color="#CCCCCC"> you with that</font><font color="#E5E5E5"> if you used to</font>

635
00:34:02,850 --> 00:34:08,520
debugging by putting print statements in

636
00:34:04,919 --> 00:34:10,859
your code<font color="#E5E5E5"> and a debugger can really make</font>

637
00:34:08,520 --> 00:34:13,460
<font color="#CCCCCC">things a lot easier</font><font color="#E5E5E5"> for you and I'm</font>

638
00:34:10,859 --> 00:34:17,909
going to show<font color="#E5E5E5"> you how you can use</font>

639
00:34:13,460 --> 00:34:21,149
IntelliJ<font color="#E5E5E5"> to debug a burpee extension</font>

640
00:34:17,909 --> 00:34:28,339
<font color="#E5E5E5">this isn't specific</font><font color="#CCCCCC"> to IntelliJ but it</font>

641
00:34:21,149 --> 00:34:31,348
is well I'll show you how<font color="#E5E5E5"> to do at this</font>

642
00:34:28,339 --> 00:34:36,179
Java<font color="#E5E5E5"> has this facility to do remote</font>

643
00:34:31,349 --> 00:34:43,139
debugging so if we go into our<font color="#E5E5E5"> debug</font>

644
00:34:36,179 --> 00:34:47,490
configuration<font color="#E5E5E5"> we can create a remote</font>

645
00:34:43,139 --> 00:34:49,409
debug session<font color="#E5E5E5"> now IntelliJ here it gives</font>

646
00:34:47,489 --> 00:34:51,989
<font color="#E5E5E5">us the command line we need to use to</font>

647
00:34:49,409 --> 00:34:53,760
<font color="#CCCCCC">start Java</font><font color="#E5E5E5"> so when you start you ever</font>

648
00:34:51,989 --> 00:34:54,989
with that command line<font color="#E5E5E5"> it will open up a</font>

649
00:34:53,760 --> 00:34:56,609
listening port and it will allow a

650
00:34:54,989 --> 00:35:00,000
remote debugger to connect<font color="#E5E5E5"> to the</font>

651
00:34:56,609 --> 00:35:09,089
process<font color="#E5E5E5"> so if I quit out of this</font>

652
00:35:00,000 --> 00:35:12,240
instance a bit now I can run<font color="#E5E5E5"> Java from</font>

653
00:35:09,089 --> 00:35:19,440
the command<font color="#E5E5E5"> line I can paste in those</font>

654
00:35:12,240 --> 00:35:22,470
command line flags<font color="#E5E5E5"> for debugging</font><font color="#CCCCCC"> and I</font>

655
00:35:19,440 --> 00:35:24,780
can start bits wait so I'm just<font color="#E5E5E5"> going to</font>

656
00:35:22,470 --> 00:35:26,520
like let it<font color="#E5E5E5"> start up a little bit</font><font color="#CCCCCC"> it</font>

657
00:35:24,780 --> 00:35:32,730
slows down<font color="#E5E5E5"> a little bit when the debug</font>

658
00:35:26,520 --> 00:35:35,630
is running but<font color="#E5E5E5"> not not tons and when it</font>

659
00:35:32,730 --> 00:35:37,589
<font color="#E5E5E5">started up a bit I can go back here and</font>

660
00:35:35,630 --> 00:35:40,650
attach the debugger

661
00:35:37,589 --> 00:35:42,390
it's a<font color="#CCCCCC"> running process</font><font color="#E5E5E5"> now if</font><font color="#CCCCCC"> you're not</font>

662
00:35:40,650 --> 00:35:46,020
<font color="#E5E5E5">used to debug</font><font color="#CCCCCC"> your before</font><font color="#E5E5E5"> one of</font><font color="#CCCCCC"> the</font>

663
00:35:42,390 --> 00:35:48,839
main entry points is a break<font color="#CCCCCC"> point so</font><font color="#E5E5E5"> we</font>

664
00:35:46,020 --> 00:35:51,089
can satellite in the<font color="#E5E5E5"> code and in fact</font>

665
00:35:48,839 --> 00:35:53,849
here<font color="#E5E5E5"> I'm going</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> just set a line which</font>

666
00:35:51,089 --> 00:35:58,040
is<font color="#E5E5E5"> run when you press the scrub cookies</font>

667
00:35:53,849 --> 00:35:58,040
button so

668
00:36:12,110 --> 00:36:18,870
<font color="#E5E5E5">okay so we've got this</font><font color="#CCCCCC"> breakpoint set</font><font color="#E5E5E5"> so</font>

669
00:36:16,560 --> 00:36:22,920
when I click scrub cookies it's going to

670
00:36:18,870 --> 00:36:25,620
<font color="#E5E5E5">bounce us</font><font color="#CCCCCC"> back into IntelliJ</font><font color="#E5E5E5"> so it's</font>

671
00:36:22,920 --> 00:36:27,960
frozen the application and at<font color="#E5E5E5"> this point</font>

672
00:36:25,620 --> 00:36:29,940
we can analyze<font color="#CCCCCC"> all the currently</font><font color="#E5E5E5"> running</font>

673
00:36:27,960 --> 00:36:32,970
data structures so down the side there

674
00:36:29,940 --> 00:36:37,380
<font color="#E5E5E5">we've got the stack trace</font><font color="#CCCCCC"> I've got all</font>

675
00:36:32,970 --> 00:36:40,230
the<font color="#CCCCCC"> local variables</font><font color="#E5E5E5"> on this side now if</font>

676
00:36:37,380 --> 00:36:42,240
he did do debugging<font color="#E5E5E5"> by printing what I</font>

677
00:36:40,230 --> 00:36:43,590
found happened all the time<font color="#CCCCCC"> is he print</font>

678
00:36:42,240 --> 00:36:46,410
something out when you saw the value<font color="#E5E5E5"> of</font>

679
00:36:43,590 --> 00:36:49,140
<font color="#E5E5E5">that</font><font color="#CCCCCC"> wow I wish had printed out this as</font>

680
00:36:46,410 --> 00:36:51,089
well but the<font color="#CCCCCC"> DES Buca really helps you</font>

681
00:36:49,140 --> 00:36:55,049
there because you can just<font color="#E5E5E5"> explore all</font>

682
00:36:51,090 --> 00:36:56,460
the objects<font color="#E5E5E5"> in your current context and</font>

683
00:36:55,050 --> 00:36:58,350
you can just expand as deep as you<font color="#CCCCCC"> want</font>

684
00:36:56,460 --> 00:37:05,070
<font color="#E5E5E5">and there's also capabilities to run</font>

685
00:36:58,350 --> 00:37:06,690
like<font color="#CCCCCC"> inline</font><font color="#E5E5E5"> javis going to up your</font><font color="#CCCCCC"> game</font>

686
00:37:05,070 --> 00:37:09,240
and become more of a more like a

687
00:37:06,690 --> 00:37:11,670
professional<font color="#E5E5E5"> developer</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> would say that</font>

688
00:37:09,240 --> 00:37:20,669
<font color="#CCCCCC">Linux user</font><font color="#E5E5E5"> debugger is really up there</font>

689
00:37:11,670 --> 00:37:24,110
with good things to do now something

690
00:37:20,670 --> 00:37:27,000
else a few people<font color="#E5E5E5"> asked</font><font color="#CCCCCC"> me</font><font color="#E5E5E5"> about is</font>

691
00:37:24,110 --> 00:37:28,520
highlighting tabs<font color="#E5E5E5"> now you know you know</font>

692
00:37:27,000 --> 00:37:31,110
we need to send a repeater

693
00:37:28,520 --> 00:37:33,300
<font color="#E5E5E5">you know how the repeater tab flashes up</font>

694
00:37:31,110 --> 00:37:34,680
for a<font color="#E5E5E5"> little bit people</font><font color="#CCCCCC"> have asked well</font>

695
00:37:33,300 --> 00:37:37,050
hey I've got an<font color="#E5E5E5"> extension I want to do</font>

696
00:37:34,680 --> 00:37:40,980
the same but<font color="#E5E5E5"> there isn't an API to do it</font>

697
00:37:37,050 --> 00:37:44,670
well replicator<font color="#E5E5E5"> can do this</font><font color="#CCCCCC"> because</font>

698
00:37:40,980 --> 00:37:47,930
although<font color="#E5E5E5"> there isn't a burp API you can</font>

699
00:37:44,670 --> 00:37:52,070
still access all the<font color="#CCCCCC"> Swing components</font>

700
00:37:47,930 --> 00:37:52,069
<font color="#CCCCCC">now I'm going to let you into a secret</font>

701
00:37:52,880 --> 00:37:58,140
since<font color="#CCCCCC"> Bert won seven to</font><font color="#E5E5E5"> eight that is</font>

702
00:37:55,830 --> 00:37:59,790
<font color="#CCCCCC">the exact color you want if you</font><font color="#E5E5E5"> want</font>

703
00:37:58,140 --> 00:38:02,160
your highlights<font color="#E5E5E5"> being exact color match</font>

704
00:37:59,790 --> 00:38:04,200
the internal tools<font color="#E5E5E5"> that's the color and</font>

705
00:38:02,160 --> 00:38:08,129
if you<font color="#CCCCCC"> want if you</font><font color="#E5E5E5"> want to get</font><font color="#CCCCCC"> the five</font>

706
00:38:04,200 --> 00:38:12,960
details right 3,000 milliseconds is how

707
00:38:08,130 --> 00:38:15,480
long<font color="#E5E5E5"> they highlight for now it turns out</font>

708
00:38:12,960 --> 00:38:17,670
<font color="#CCCCCC">actually making them highlight is is a</font>

709
00:38:15,480 --> 00:38:19,530
mild pain in the ass because what you

710
00:38:17,670 --> 00:38:22,050
have to do you've got your<font color="#CCCCCC"> tap and you</font>

711
00:38:19,530 --> 00:38:23,910
have to walk up the swing hierarchy so

712
00:38:22,050 --> 00:38:24,640
you find like the container of all the

713
00:38:23,910 --> 00:38:28,058
tab then you

714
00:38:24,640 --> 00:38:30,279
the one with<font color="#E5E5E5"> your caption the problem is</font>

715
00:38:28,059 --> 00:38:33,220
when your components created<font color="#E5E5E5"> it is an</font>

716
00:38:30,279 --> 00:38:35,799
orphan it doesn't have a parent<font color="#CCCCCC"> so what</font>

717
00:38:33,220 --> 00:38:38,288
you have to<font color="#E5E5E5"> do is register a hierarchy</font>

718
00:38:35,799 --> 00:38:40,450
change listener<font color="#E5E5E5"> which is then triggered</font>

719
00:38:38,289 --> 00:38:42,730
once your component<font color="#E5E5E5"> gets connected to</font>

720
00:38:40,450 --> 00:38:45,578
<font color="#E5E5E5">the swing tree you can then walk</font><font color="#CCCCCC"> up the</font>

721
00:38:42,730 --> 00:38:48,220
hierarchy<font color="#CCCCCC"> find the correct tab</font><font color="#E5E5E5"> highlight</font>

722
00:38:45,579 --> 00:38:51,519
<font color="#E5E5E5">it and when when activated you can set</font>

723
00:38:48,220 --> 00:38:54,759
<font color="#E5E5E5">at the timer</font><font color="#CCCCCC"> now you may not want to</font><font color="#E5E5E5"> do</font>

724
00:38:51,519 --> 00:38:58,000
all<font color="#CCCCCC"> this hard work so I have created a</font>

725
00:38:54,760 --> 00:39:00,750
gist<font color="#E5E5E5"> to do this in fact if you're into</font>

726
00:38:58,000 --> 00:39:06,670
<font color="#E5E5E5">doing extensions there's quite a few</font>

727
00:39:00,750 --> 00:39:08,380
<font color="#CCCCCC">gist's on the github there and sometimes</font>

728
00:39:06,670 --> 00:39:10,569
<font color="#CCCCCC">when people ask for</font><font color="#E5E5E5"> things if I'm</font>

729
00:39:08,380 --> 00:39:13,059
<font color="#CCCCCC">feeling in a good mood I'll write them</font>

730
00:39:10,569 --> 00:39:18,240
<font color="#E5E5E5">adjust to do it and and there's now a</font>

731
00:39:13,059 --> 00:39:21,210
reasonable collection of them now

732
00:39:18,240 --> 00:39:25,058
another little pet peeve that<font color="#E5E5E5"> I see</font>

733
00:39:21,210 --> 00:39:28,329
extensions getting wrong is whenever any

734
00:39:25,059 --> 00:39:30,789
sense and creates<font color="#E5E5E5"> a pop-up dialog</font><font color="#CCCCCC"> it</font>

735
00:39:28,329 --> 00:39:33,759
should be given a parent now swing will

736
00:39:30,789 --> 00:39:35,829
let you provide null<font color="#CCCCCC"> as a parent</font><font color="#E5E5E5"> now</font><font color="#CCCCCC"> I</font>

737
00:39:33,759 --> 00:39:37,809
have this idea<font color="#CCCCCC"> that all the</font><font color="#E5E5E5"> extensions</font>

738
00:39:35,829 --> 00:39:40,359
<font color="#E5E5E5">that do this the developers only have</font>

739
00:39:37,809 --> 00:39:42,400
one monitor<font color="#E5E5E5"> because we've all got dual</font>

740
00:39:40,359 --> 00:39:43,538
monitors at<font color="#E5E5E5"> ports wicket and when you've</font>

741
00:39:42,400 --> 00:39:47,319
got<font color="#CCCCCC"> dirt</font><font color="#E5E5E5"> running on your</font><font color="#CCCCCC"> right-hand</font>

742
00:39:43,539 --> 00:39:48,880
<font color="#E5E5E5">monitor it really grinds when an</font>

743
00:39:47,319 --> 00:39:52,538
extension pops something up on<font color="#E5E5E5"> the other</font>

744
00:39:48,880 --> 00:39:54,339
monitor<font color="#E5E5E5"> now the way around this is</font><font color="#CCCCCC"> to</font>

745
00:39:52,539 --> 00:39:56,859
<font color="#CCCCCC">give all</font><font color="#E5E5E5"> these pop-ups</font><font color="#CCCCCC"> the parent the</font>

746
00:39:54,339 --> 00:39:59,558
parent<font color="#E5E5E5"> should</font><font color="#CCCCCC"> be the</font><font color="#E5E5E5"> burp frame</font><font color="#CCCCCC"> now</font>

747
00:39:56,859 --> 00:40:01,150
<font color="#E5E5E5">again there's one there isn't a burp API</font>

748
00:39:59,559 --> 00:40:03,910
to<font color="#CCCCCC"> practice you can use the standard</font>

749
00:40:01,150 --> 00:40:08,970
<font color="#E5E5E5">swing api's to find a bit frame and</font>

750
00:40:03,910 --> 00:40:13,899
again<font color="#CCCCCC"> there</font><font color="#E5E5E5"> is a gist to do that for you</font>

751
00:40:08,970 --> 00:40:15,339
<font color="#E5E5E5">now this problem may be familiar</font><font color="#CCCCCC"> to a</font>

752
00:40:13,900 --> 00:40:18,430
<font color="#CCCCCC">lot of</font><font color="#E5E5E5"> you because</font><font color="#CCCCCC"> there</font><font color="#E5E5E5"> are so many</font>

753
00:40:15,339 --> 00:40:23,078
wonderful burp extensions<font color="#E5E5E5"> that you want</font>

754
00:40:18,430 --> 00:40:27,490
to add them all and that navigating your

755
00:40:23,079 --> 00:40:34,569
<font color="#E5E5E5">tabs becomes like a skill</font><font color="#CCCCCC"> a skill all</font>

756
00:40:27,490 --> 00:40:37,328
<font color="#E5E5E5">all of its own and now what a few</font>

757
00:40:34,569 --> 00:40:38,529
extensions<font color="#E5E5E5"> are starting to do people</font>

758
00:40:37,329 --> 00:40:40,000
<font color="#E5E5E5">have realized is this</font>

759
00:40:38,530 --> 00:40:41,200
this<font color="#E5E5E5"> area of the street this</font><font color="#CCCCCC"> is getting</font>

760
00:40:40,000 --> 00:40:44,260
pretty<font color="#CCCCCC"> closer</font><font color="#E5E5E5"> but there's still a good</font>

761
00:40:41,200 --> 00:40:46,089
<font color="#CCCCCC">bit of space up here now well again</font>

762
00:40:44,260 --> 00:40:48,430
there's no official API to access<font color="#E5E5E5"> the</font>

763
00:40:46,090 --> 00:40:52,890
menu<font color="#CCCCCC"> bar</font><font color="#E5E5E5"> you can still directly use the</font>

764
00:40:48,430 --> 00:40:55,359
swing API and some extensions notably

765
00:40:52,890 --> 00:40:59,430
<font color="#E5E5E5">active scan plus plus</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> backslash</font>

766
00:40:55,360 --> 00:41:02,200
powered scanner which<font color="#E5E5E5"> recently gained</font>

767
00:40:59,430 --> 00:41:05,379
graphical configuration screens<font color="#E5E5E5"> but you</font>

768
00:41:02,200 --> 00:41:12,390
access them from<font color="#E5E5E5"> menus rather than from</font>

769
00:41:05,380 --> 00:41:14,940
tabs to reduce the clutter<font color="#CCCCCC"> issue</font><font color="#E5E5E5"> and</font>

770
00:41:12,390 --> 00:41:18,430
another<font color="#E5E5E5"> thing a few people have wondered</font>

771
00:41:14,940 --> 00:41:20,710
is how an extension like replicator is

772
00:41:18,430 --> 00:41:23,080
able to access<font color="#E5E5E5"> the session handling</font>

773
00:41:20,710 --> 00:41:25,560
rules<font color="#E5E5E5"> and macros and other parts of the</font>

774
00:41:23,080 --> 00:41:28,540
config<font color="#E5E5E5"> now that's down</font><font color="#CCCCCC"> to these two</font>

775
00:41:25,560 --> 00:41:32,770
calls that are on the<font color="#E5E5E5"> I burp extended</font>

776
00:41:28,540 --> 00:41:37,420
<font color="#E5E5E5">callbacks interface so save config as</font>

777
00:41:32,770 --> 00:41:41,020
Jason<font color="#E5E5E5"> Takes and the running</font><font color="#CCCCCC"> Bert project</font>

778
00:41:37,420 --> 00:41:42,640
configuration<font color="#CCCCCC"> serializes as</font><font color="#E5E5E5"> Jason and</font>

779
00:41:41,020 --> 00:41:45,790
returns it as a string it's your

780
00:41:42,640 --> 00:41:48,819
extension so you<font color="#E5E5E5"> can read any aspects of</font>

781
00:41:45,790 --> 00:41:50,500
<font color="#E5E5E5">the configuration and then load config</font>

782
00:41:48,820 --> 00:41:52,960
<font color="#E5E5E5">from Jason works the other way around so</font>

783
00:41:50,500 --> 00:41:55,360
<font color="#CCCCCC">you give it JSON as a string and it</font>

784
00:41:52,960 --> 00:41:59,350
takes<font color="#E5E5E5"> that and it updates</font><font color="#CCCCCC"> the running</font>

785
00:41:55,360 --> 00:42:00,970
configuration<font color="#E5E5E5"> and it can be a little bit</font>

786
00:41:59,350 --> 00:42:03,430
icky to do it because<font color="#CCCCCC"> because actually</font>

787
00:42:00,970 --> 00:42:05,890
they there<font color="#E5E5E5"> was a lot of</font><font color="#CCCCCC"> configuration</font>

788
00:42:03,430 --> 00:42:08,290
options<font color="#CCCCCC"> so this is there's quite a lot</font>

789
00:42:05,890 --> 00:42:12,490
<font color="#E5E5E5">of like nested data but very powerful</font>

790
00:42:08,290 --> 00:42:15,880
<font color="#CCCCCC">the one limitation</font><font color="#E5E5E5"> note is there is no</font>

791
00:42:12,490 --> 00:42:17,919
change listener<font color="#E5E5E5"> so if you remember</font>

792
00:42:15,880 --> 00:42:20,380
<font color="#CCCCCC">earlier where we needed to create</font><font color="#E5E5E5"> that</font>

793
00:42:17,920 --> 00:42:23,230
<font color="#E5E5E5">login macro to make our replicator</font><font color="#CCCCCC"> file</font>

794
00:42:20,380 --> 00:42:25,690
reproducible now when we switch back<font color="#E5E5E5"> to</font>

795
00:42:23,230 --> 00:42:27,640
the replicator tab<font color="#E5E5E5"> the</font><font color="#CCCCCC"> drop down had the</font>

796
00:42:25,690 --> 00:42:29,980
name<font color="#E5E5E5"> of the macro there immediately</font><font color="#CCCCCC"> well</font>

797
00:42:27,640 --> 00:42:31,900
the only way the extension manages to do

798
00:42:29,980 --> 00:42:35,260
<font color="#CCCCCC">that is every time the</font><font color="#E5E5E5"> tab activate see</font>

799
00:42:31,900 --> 00:42:41,020
we does save configures Jason just<font color="#E5E5E5"> on</font>

800
00:42:35,260 --> 00:42:46,660
the<font color="#E5E5E5"> off-chance you changed something now</font>

801
00:42:41,020 --> 00:42:49,540
there was<font color="#CCCCCC"> one final</font><font color="#E5E5E5"> thing which was</font>

802
00:42:46,660 --> 00:42:51,850
quite subtle<font color="#E5E5E5"> and you might not</font><font color="#CCCCCC"> have</font>

803
00:42:49,540 --> 00:42:53,770
<font color="#CCCCCC">noticed but</font>

804
00:42:51,850 --> 00:43:02,440
<font color="#E5E5E5">I'm just going</font><font color="#CCCCCC"> to turn off this break</font>

805
00:42:53,770 --> 00:43:10,180
<font color="#CCCCCC">point well</font><font color="#E5E5E5"> no yeah while I do this now</font>

806
00:43:02,440 --> 00:43:11,290
um when we click<font color="#CCCCCC"> text</font><font color="#E5E5E5"> the token update</font>

807
00:43:10,180 --> 00:43:19,089
says f3b

808
00:43:11,290 --> 00:43:21,520
click it<font color="#CCCCCC"> again</font><font color="#E5E5E5"> c19 now</font><font color="#CCCCCC"> I thought</font><font color="#E5E5E5"> it</font><font color="#CCCCCC"> was</font>

809
00:43:19,090 --> 00:43:25,150
it was a really<font color="#E5E5E5"> helpful feature of the</font>

810
00:43:21,520 --> 00:43:26,320
you<font color="#CCCCCC"> worry that that screen updates</font><font color="#E5E5E5"> based</font>

811
00:43:25,150 --> 00:43:27,730
on all the<font color="#CCCCCC"> session handling rules</font>

812
00:43:26,320 --> 00:43:30,900
because it gives you confidence that<font color="#CCCCCC"> you</font>

813
00:43:27,730 --> 00:43:33,850
<font color="#CCCCCC">has session handling rules are working</font>

814
00:43:30,900 --> 00:43:40,120
however again<font color="#E5E5E5"> there</font><font color="#CCCCCC"> isn't there isn't a</font>

815
00:43:33,850 --> 00:43:42,069
direct API to do this but you<font color="#CCCCCC"> can cobble</font>

816
00:43:40,120 --> 00:43:46,290
together some other pieces<font color="#E5E5E5"> of the API to</font>

817
00:43:42,070 --> 00:43:50,050
get the effect so if you register an<font color="#E5E5E5"> eye</font>

818
00:43:46,290 --> 00:43:53,950
HTTP listener you get a callback you get

819
00:43:50,050 --> 00:43:56,830
process HTTP<font color="#CCCCCC"> message and that gets the</font>

820
00:43:53,950 --> 00:44:00,640
message<font color="#CCCCCC"> just as it's ready to be sent on</font>

821
00:43:56,830 --> 00:44:03,250
<font color="#E5E5E5">to the destination web service</font><font color="#CCCCCC"> so a</font><font color="#E5E5E5"> a</font>

822
00:44:00,640 --> 00:44:05,980
tool<font color="#E5E5E5"> with Imbert</font><font color="#CCCCCC"> says he wants</font><font color="#E5E5E5"> to send</font><font color="#CCCCCC"> a</font>

823
00:44:03,250 --> 00:44:07,780
<font color="#CCCCCC">request then any session handling rules</font>

824
00:44:05,980 --> 00:44:10,120
platform<font color="#E5E5E5"> authentication a and other</font>

825
00:44:07,780 --> 00:44:11,860
things<font color="#E5E5E5"> get the opportunity</font><font color="#CCCCCC"> to modify</font><font color="#E5E5E5"> the</font>

826
00:44:10,120 --> 00:44:14,560
<font color="#E5E5E5">request before it goes</font><font color="#CCCCCC"> on</font><font color="#E5E5E5"> just</font><font color="#CCCCCC"> as it's</font>

827
00:44:11,860 --> 00:44:17,050
ready to<font color="#E5E5E5"> go</font><font color="#CCCCCC"> process HTTP message</font><font color="#E5E5E5"> gets</font>

828
00:44:14,560 --> 00:44:19,690
the final<font color="#E5E5E5"> request so we've got the</font>

829
00:44:17,050 --> 00:44:22,660
original<font color="#CCCCCC"> request which is in the text</font>

830
00:44:19,690 --> 00:44:24,520
box in<font color="#E5E5E5"> the URI we've got this final</font>

831
00:44:22,660 --> 00:44:26,890
request it's going to the web server<font color="#E5E5E5"> the</font>

832
00:44:24,520 --> 00:44:29,740
last piece of the puzzle is<font color="#CCCCCC"> how do we</font>

833
00:44:26,890 --> 00:44:33,930
connect the<font color="#E5E5E5"> two</font><font color="#CCCCCC"> messages there isn't</font>

834
00:44:29,740 --> 00:44:37,450
<font color="#CCCCCC">unfortunately</font><font color="#E5E5E5"> on process HTTP message</font>

835
00:44:33,930 --> 00:44:39,759
<font color="#E5E5E5">you do not get like a request ID this is</font>

836
00:44:37,450 --> 00:44:43,689
<font color="#CCCCCC">an often requested feature but currently</font>

837
00:44:39,760 --> 00:44:46,060
it's not<font color="#E5E5E5"> there so instead what the</font>

838
00:44:43,690 --> 00:44:48,310
<font color="#E5E5E5">extension does is just before</font><font color="#CCCCCC"> you send</font>

839
00:44:46,060 --> 00:44:50,590
it it adds a<font color="#E5E5E5"> header</font>

840
00:44:48,310 --> 00:44:52,779
it's like<font color="#E5E5E5"> X replicator ID and it puts in</font>

841
00:44:50,590 --> 00:44:55,990
a random value<font color="#E5E5E5"> and then within the</font>

842
00:44:52,780 --> 00:44:58,900
process HTTP<font color="#CCCCCC"> message if it sees this</font>

843
00:44:55,990 --> 00:45:00,399
header<font color="#E5E5E5"> it first of all it strips that</font>

844
00:44:58,900 --> 00:45:02,770
out so<font color="#E5E5E5"> it</font><font color="#CCCCCC"> doesn't go to</font><font color="#E5E5E5"> the target web</font>

845
00:45:00,400 --> 00:45:05,220
server but<font color="#CCCCCC"> it</font><font color="#E5E5E5"> uses that to</font><font color="#CCCCCC"> update the UI</font>

846
00:45:02,770 --> 00:45:07,259
<font color="#E5E5E5">and this</font>

847
00:45:05,220 --> 00:45:09,209
gives you the<font color="#CCCCCC"> effect</font><font color="#E5E5E5"> where</font><font color="#CCCCCC"> you can see</font>

848
00:45:07,260 --> 00:45:14,609
immediately<font color="#E5E5E5"> the effect that</font><font color="#CCCCCC"> all your</font>

849
00:45:09,210 --> 00:45:15,299
session handling rules<font color="#E5E5E5"> are having so</font>

850
00:45:14,609 --> 00:45:17,279
there you go

851
00:45:15,299 --> 00:45:20,940
<font color="#E5E5E5">few tricks you've got all the tools now</font>

852
00:45:17,280 --> 00:45:22,980
to run<font color="#E5E5E5"> your</font><font color="#CCCCCC"> sdlc at warp speed</font><font color="#E5E5E5"> you may</font>

853
00:45:20,940 --> 00:45:24,720
have some questions<font color="#CCCCCC"> about this</font>

854
00:45:22,980 --> 00:45:30,349
which<font color="#E5E5E5"> are welcome and I'd just like to</font>

855
00:45:24,720 --> 00:45:30,348
leave you with<font color="#CCCCCC"> these final thoughts</font>

856
00:45:32,940 --> 00:45:42,020
[Applause]

857
00:45:46,579 --> 00:45:57,150
Jordan yeah

858
00:45:53,359 --> 00:46:01,740
<font color="#CCCCCC">Evan the past few months</font><font color="#E5E5E5"> so</font><font color="#CCCCCC"> at</font><font color="#E5E5E5"> first</font>

859
00:45:57,150 --> 00:46:04,500
I first had<font color="#CCCCCC"> the idea</font><font color="#E5E5E5"> in the final months</font>

860
00:46:01,740 --> 00:46:06,538
when I<font color="#E5E5E5"> was working at pence s and I</font>

861
00:46:04,500 --> 00:46:07,740
thought are they<font color="#CCCCCC"> thought this will</font><font color="#E5E5E5"> be</font>

862
00:46:06,539 --> 00:46:10,260
<font color="#E5E5E5">great you</font><font color="#CCCCCC"> know I'll have</font><font color="#E5E5E5"> the opportunity</font>

863
00:46:07,740 --> 00:46:12,209
<font color="#CCCCCC">to do this like in a in an even more</font>

864
00:46:10,260 --> 00:46:14,010
conducive environment and<font color="#E5E5E5"> in in in the</font>

865
00:46:12,210 --> 00:46:15,210
<font color="#E5E5E5">first couple</font><font color="#CCCCCC"> of weeks so I said that hey</font>

866
00:46:14,010 --> 00:46:19,440
<font color="#E5E5E5">let's</font><font color="#CCCCCC"> Ruth</font><font color="#E5E5E5"> this would be a really</font><font color="#CCCCCC"> cool</font>

867
00:46:15,210 --> 00:46:21,180
feature<font color="#E5E5E5"> and um it's quite often happens</font>

868
00:46:19,440 --> 00:46:22,200
<font color="#E5E5E5">when we</font><font color="#CCCCCC"> discuss these things that stuff</font>

869
00:46:21,180 --> 00:46:25,230
will come back and<font color="#E5E5E5"> say well this would</font>

870
00:46:22,200 --> 00:46:26,520
<font color="#CCCCCC">be good if</font><font color="#E5E5E5"> it can do this and this</font><font color="#CCCCCC"> and</font>

871
00:46:25,230 --> 00:46:28,589
this<font color="#CCCCCC"> you would</font><font color="#E5E5E5"> have to do this to be</font>

872
00:46:26,520 --> 00:46:29,700
good<font color="#E5E5E5"> and so I thought about this</font><font color="#CCCCCC"> and I</font>

873
00:46:28,589 --> 00:46:31,049
realized it didn't need<font color="#E5E5E5"> to be</font><font color="#CCCCCC"> a core</font>

874
00:46:29,700 --> 00:46:35,669
feature<font color="#E5E5E5"> and it could be</font><font color="#CCCCCC"> done as an</font>

875
00:46:31,049 --> 00:46:39,020
extension<font color="#CCCCCC"> and then yeah it's sort</font><font color="#E5E5E5"> of as</font>

876
00:46:35,670 --> 00:46:39,020
a backbone<font color="#CCCCCC"> of projects it came together</font>

877
00:46:46,099 --> 00:47:09,690
any questions would be<font color="#CCCCCC"> good yeah</font><font color="#E5E5E5"> right</font>

878
00:47:07,140 --> 00:47:12,029
so<font color="#E5E5E5"> yeah so this current version doesn't</font>

879
00:47:09,690 --> 00:47:14,400
<font color="#E5E5E5">support unattended running so you</font>

880
00:47:12,030 --> 00:47:18,869
couldn't you couldn't put this like in a

881
00:47:14,400 --> 00:47:24,180
Jenkins pipeline<font color="#CCCCCC"> a few people have</font>

882
00:47:18,869 --> 00:47:28,430
<font color="#CCCCCC">requested that um although personally</font><font color="#E5E5E5"> I</font>

883
00:47:24,180 --> 00:47:32,490
<font color="#E5E5E5">think for doing my</font><font color="#CCCCCC"> odd job security</font>

884
00:47:28,430 --> 00:47:34,200
you're better using scanners<font color="#CCCCCC"> I know</font>

885
00:47:32,490 --> 00:47:35,759
there's some merit<font color="#E5E5E5"> in checking that</font>

886
00:47:34,200 --> 00:47:37,200
you've<font color="#E5E5E5"> not broken the same things you've</font>

887
00:47:35,760 --> 00:47:41,760
broken<font color="#E5E5E5"> before but I think</font><font color="#CCCCCC"> there's a lot</font>

888
00:47:37,200 --> 00:47:44,250
<font color="#CCCCCC">more merit in in using scanners</font><font color="#E5E5E5"> and</font>

889
00:47:41,760 --> 00:47:47,420
setting up<font color="#E5E5E5"> I mean whether you want to</font>

890
00:47:44,250 --> 00:47:50,970
use<font color="#CCCCCC"> Bert with the carbonator</font><font color="#E5E5E5"> plugin or</font>

891
00:47:47,420 --> 00:47:53,190
you know or whatever tooling but<font color="#E5E5E5"> having</font>

892
00:47:50,970 --> 00:47:55,430
having<font color="#E5E5E5"> ongoing scanning as part of your</font>

893
00:47:53,190 --> 00:47:55,430
pipeline

894
00:48:09,560 --> 00:48:16,420
oh so it's<font color="#E5E5E5"> soweth so if this could be</font>

895
00:48:13,760 --> 00:48:18,740
<font color="#CCCCCC">integrated in the pipeline</font><font color="#E5E5E5"> this</font><font color="#CCCCCC"> would</font>

896
00:48:16,420 --> 00:48:21,200
automatically give<font color="#CCCCCC"> you the take the</font>

897
00:48:18,740 --> 00:48:23,149
failing<font color="#E5E5E5"> test that you need</font><font color="#CCCCCC"> as the so</font>

898
00:48:21,200 --> 00:48:27,020
that so you were<font color="#E5E5E5"> doing like full TBD</font>

899
00:48:23,150 --> 00:48:35,300
<font color="#CCCCCC">there all right</font><font color="#E5E5E5"> well that's</font><font color="#CCCCCC"> that's</font><font color="#E5E5E5"> a</font>

900
00:48:27,020 --> 00:48:42,100
that's<font color="#CCCCCC"> a</font><font color="#E5E5E5"> good suggestion thank you would</font>

901
00:48:35,300 --> 00:48:45,100
that<font color="#E5E5E5"> do the trick</font><font color="#CCCCCC"> for</font><font color="#E5E5E5"> you then right</font>

902
00:48:42,100 --> 00:48:45,100
<font color="#E5E5E5">hello</font>

903
00:48:46,060 --> 00:48:57,710
sure um I mean would it<font color="#CCCCCC"> just be enough</font>

904
00:48:54,800 --> 00:49:00,740
if if you could do<font color="#E5E5E5"> it like on the</font>

905
00:48:57,710 --> 00:49:02,570
command<font color="#CCCCCC"> line and you just got some like</font>

906
00:49:00,740 --> 00:49:21,319
<font color="#E5E5E5">XML output on the command line would</font>

907
00:49:02,570 --> 00:49:23,120
that be enough<font color="#E5E5E5"> to script it yeah</font><font color="#CCCCCC"> I don't</font>

908
00:49:21,320 --> 00:49:24,800
<font color="#CCCCCC">know do</font><font color="#E5E5E5"> you do you segregate your</font>

909
00:49:23,120 --> 00:49:29,920
pipelines do you have like you sort<font color="#CCCCCC"> of</font><font color="#E5E5E5"> a</font>

910
00:49:24,800 --> 00:49:29,920
fast in a long<font color="#CCCCCC"> pipeline us</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> thin</font>

911
00:49:50,570 --> 00:49:56,300
yeah<font color="#CCCCCC"> I</font><font color="#E5E5E5"> mean I've always thought one of</font>

912
00:49:53,960 --> 00:49:59,450
<font color="#E5E5E5">the issues with doing agile security is</font>

913
00:49:56,300 --> 00:50:02,200
as scanner does want<font color="#E5E5E5"> to run quite a lot</font>

914
00:49:59,450 --> 00:50:04,520
of payloads against your arm<font color="#E5E5E5"> and</font>

915
00:50:02,200 --> 00:50:07,189
especially<font color="#E5E5E5"> as you sometimes worried</font>

916
00:50:04,520 --> 00:50:10,040
about kind of spooky action at a

917
00:50:07,190 --> 00:50:11,930
distance<font color="#E5E5E5"> you know that you might want to</font>

918
00:50:10,040 --> 00:50:14,080
do a security<font color="#E5E5E5"> scan of the entire product</font>

919
00:50:11,930 --> 00:50:33,620
just<font color="#E5E5E5"> in case a change here had a</font>

920
00:50:14,080 --> 00:50:35,720
far-reaching change yeah sure yeah

921
00:50:33,620 --> 00:50:37,910
unfortunately this thing will<font color="#CCCCCC"> always</font>

922
00:50:35,720 --> 00:50:40,700
would always require<font color="#CCCCCC"> burp to start</font><font color="#E5E5E5"> it</font>

923
00:50:37,910 --> 00:50:44,690
because<font color="#E5E5E5"> it's using all the logic in the</font>

924
00:50:40,700 --> 00:50:47,740
session handling rules<font color="#CCCCCC"> I mean there is</font>

925
00:50:44,690 --> 00:50:50,180
<font color="#CCCCCC">some</font><font color="#E5E5E5"> I don't</font><font color="#CCCCCC"> know if you've used the</font>

926
00:50:47,740 --> 00:50:52,399
there's a feature<font color="#E5E5E5"> to copy as a kill</font>

927
00:50:50,180 --> 00:50:55,730
command<font color="#CCCCCC"> so if you've</font><font color="#E5E5E5"> got</font><font color="#CCCCCC"> something that</font>

928
00:50:52,400 --> 00:50:57,050
<font color="#E5E5E5">it's relatively simple to replicate that</font>

929
00:50:55,730 --> 00:50:58,610
you know that<font color="#E5E5E5"> doesn't require a login</font>

930
00:50:57,050 --> 00:51:01,460
<font color="#E5E5E5">session so if you could copy that as a</font>

931
00:50:58,610 --> 00:51:07,040
kill command<font color="#E5E5E5"> that would be a one-liner</font>

932
00:51:01,460 --> 00:51:08,570
for<font color="#E5E5E5"> you okay that's all the time for</font>

933
00:51:07,040 --> 00:51:10,850
<font color="#E5E5E5">question I think</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> lunchtime</font><font color="#CCCCCC"> now</font><font color="#E5E5E5"> so</font>

934
00:51:08,570 --> 00:51:11,630
enjoy<font color="#E5E5E5"> can we find me later on if you're</font>

935
00:51:10,850 --> 00:51:14,929
<font color="#E5E5E5">on a memo</font>

936
00:51:11,630 --> 00:51:14,929
[Applause]

