1
00:00:00,240 --> 00:00:01,839
this mic is not very loud i'm going to

2
00:00:01,839 --> 00:00:05,600
try and protect a little bit but um

3
00:00:05,600 --> 00:00:07,200
i do have a fairly loud voice you should

4
00:00:07,200 --> 00:00:10,000
be able to hear me if everyone's yes so

5
00:00:10,000 --> 00:00:11,040
um

6
00:00:11,040 --> 00:00:13,920
if whoever thought it was a good idea to

7
00:00:13,920 --> 00:00:16,690
have an axe directory

8
00:00:16,690 --> 00:00:25,320
[Music]

9
00:00:28,560 --> 00:00:30,880
um

10
00:00:30,880 --> 00:00:32,960
also that walkout song would be a lot

11
00:00:32,960 --> 00:00:34,640
better if i actually brought the band

12
00:00:34,640 --> 00:00:35,550
here

13
00:00:35,550 --> 00:00:38,000
[Music]

14
00:00:38,000 --> 00:00:38,879
um

15
00:00:38,879 --> 00:00:40,480
so

16
00:00:40,480 --> 00:00:41,520
uh

17
00:00:41,520 --> 00:00:44,800
i have been thinking about this talk for

18
00:00:44,800 --> 00:00:48,559
a long time because uh

19
00:00:48,559 --> 00:00:51,600
it's funny i i mean my work is very

20
00:00:51,600 --> 00:00:53,840
technical but i've never actually given

21
00:00:53,840 --> 00:00:55,840
a technical talk because i'm never going

22
00:00:55,840 --> 00:00:59,359
to figure out how to make content like

23
00:00:59,359 --> 00:01:00,719
there's so much

24
00:01:00,719 --> 00:01:02,399
there's so many things wrong with active

25
00:01:02,399 --> 00:01:04,239
directory but how you only talk for an

26
00:01:04,239 --> 00:01:04,959
hour

27
00:01:04,959 --> 00:01:06,320
essentially

28
00:01:06,320 --> 00:01:08,080
no i and so i've given a four hour

29
00:01:08,080 --> 00:01:10,159
training on something that's going to be

30
00:01:10,159 --> 00:01:12,320
one flight i'm i've given given an eight

31
00:01:12,320 --> 00:01:13,840
hour training on

32
00:01:13,840 --> 00:01:16,560
this on on securing active directory but

33
00:01:16,560 --> 00:01:19,119
again this talk is not an exhaustive

34
00:01:19,119 --> 00:01:20,960
discussion of active directory security

35
00:01:20,960 --> 00:01:22,080
one

36
00:01:22,080 --> 00:01:23,520
this is i don't want everyone going to

37
00:01:23,520 --> 00:01:24,479
sleep

38
00:01:24,479 --> 00:01:26,880
and then two i don't know

39
00:01:26,880 --> 00:01:28,960
um this is also not to talk about azure

40
00:01:28,960 --> 00:01:30,799
id i'm going to bring that up a few

41
00:01:30,799 --> 00:01:33,439
times the the name is horrible azure id

42
00:01:33,439 --> 00:01:35,119
if you think that it has anything to do

43
00:01:35,119 --> 00:01:36,560
with active directory

44
00:01:36,560 --> 00:01:38,240
aside from the fact that microsoft makes

45
00:01:38,240 --> 00:01:39,200
them both

46
00:01:39,200 --> 00:01:41,520
the directors for the authentication

47
00:01:41,520 --> 00:01:42,720
methods the everything they're not the

48
00:01:42,720 --> 00:01:44,560
same so no i'm only talking about active

49
00:01:44,560 --> 00:01:46,640
driver security most of the stuff that

50
00:01:46,640 --> 00:01:49,119
i'm talking about here is not um

51
00:01:49,119 --> 00:01:50,799
actually applicable in azure id because

52
00:01:50,799 --> 00:01:52,960
they fixed it and introduced some other

53
00:01:52,960 --> 00:01:55,439
nonsense there i will hit it up there

54
00:01:55,439 --> 00:01:58,000
but again i only have

55
00:01:58,000 --> 00:02:00,880
an hour so this talk

56
00:02:00,880 --> 00:02:01,840
is

57
00:02:01,840 --> 00:02:03,439
focused on

58
00:02:03,439 --> 00:02:07,119
singularly one section of the attack

59
00:02:07,119 --> 00:02:09,440
matrix it is only on one technique which

60
00:02:09,440 --> 00:02:11,038
is discovery

61
00:02:11,038 --> 00:02:12,400
i'll go into

62
00:02:12,400 --> 00:02:14,560
the why active directory is the way it

63
00:02:14,560 --> 00:02:17,760
is i will go into the how to secure it i

64
00:02:17,760 --> 00:02:20,800
will go into the history of it

65
00:02:20,800 --> 00:02:22,879
but most of the things that we hate

66
00:02:22,879 --> 00:02:24,800
about active directory are intentional

67
00:02:24,800 --> 00:02:27,040
and they're very good reasons it made a

68
00:02:27,040 --> 00:02:31,120
lot of sense 22 years ago or even longer

69
00:02:31,120 --> 00:02:32,400
so

70
00:02:32,400 --> 00:02:32,740
um

71
00:02:32,740 --> 00:02:34,239
[Music]

72
00:02:34,239 --> 00:02:36,000
so i'm going to try and point people in

73
00:02:36,000 --> 00:02:37,440
the direction towards fixing those

74
00:02:37,440 --> 00:02:39,760
things again this is only an hour i

75
00:02:39,760 --> 00:02:42,160
can't do magic but

76
00:02:42,160 --> 00:02:43,360
um

77
00:02:43,360 --> 00:02:44,319
first

78
00:02:44,319 --> 00:02:45,920
uh

79
00:02:45,920 --> 00:02:47,680
interesting i

80
00:02:47,680 --> 00:02:49,440
um

81
00:02:49,440 --> 00:02:50,959
i had to

82
00:02:50,959 --> 00:02:52,239
say that i'm not speaking on behalf of

83
00:02:52,239 --> 00:02:54,560
my company so i work very hard nothing

84
00:02:54,560 --> 00:02:56,000
i'm saying here has anything to do with

85
00:02:56,000 --> 00:02:58,159
homework and i also

86
00:02:58,159 --> 00:03:00,000
i don't do anything in the ics security

87
00:03:00,000 --> 00:03:02,959
space i am the boring side

88
00:03:02,959 --> 00:03:03,519
i'm i secure

89
00:03:03,519 --> 00:03:05,680
internal blue team so

90
00:03:05,680 --> 00:03:07,200
if you think i do any of the fun stuff

91
00:03:07,200 --> 00:03:09,760
like rob and leslie do i don't

92
00:03:09,760 --> 00:03:11,519
um

93
00:03:11,519 --> 00:03:14,080
yeah so i drove up to chattanooga this

94
00:03:14,080 --> 00:03:16,000
morning

95
00:03:16,000 --> 00:03:18,640
i love knoxville uh i i am a little

96
00:03:18,640 --> 00:03:21,280
bonded with this i i loved i don't know

97
00:03:21,280 --> 00:03:22,959
how many people came when this was

98
00:03:22,959 --> 00:03:24,400
essentially like

99
00:03:24,400 --> 00:03:27,280
codified bar hopping at the conference i

100
00:03:27,280 --> 00:03:30,080
loved it it was it was it was the it was

101
00:03:30,080 --> 00:03:32,000
the coolest conference ever this is

102
00:03:32,000 --> 00:03:33,680
still awesome it has the same vibe i

103
00:03:33,680 --> 00:03:36,400
love i love besides nautical but i just

104
00:03:36,400 --> 00:03:37,920
love the whole like

105
00:03:37,920 --> 00:03:39,680
bar hopping it felt like

106
00:03:39,680 --> 00:03:40,879
like

107
00:03:40,879 --> 00:03:42,720
it felt like what pubs were in like the

108
00:03:42,720 --> 00:03:45,040
1700s where like some drunk guy stands

109
00:03:45,040 --> 00:03:46,560
up and rambles about something for a

110
00:03:46,560 --> 00:03:50,239
while now i have less excuses

111
00:03:50,239 --> 00:03:51,280
but

112
00:03:51,280 --> 00:03:53,360
um

113
00:03:53,360 --> 00:03:55,280
so these are my

114
00:03:55,280 --> 00:03:56,879
four sections

115
00:03:56,879 --> 00:03:59,439
here why is active directory why is it

116
00:03:59,439 --> 00:04:00,530
the way it is um

117
00:04:00,530 --> 00:04:03,040
[Music]

118
00:04:03,040 --> 00:04:04,640
you know if

119
00:04:04,640 --> 00:04:06,239
this was at the bar afterwards i could

120
00:04:06,239 --> 00:04:08,400
probably ramble for an entire hour on

121
00:04:08,400 --> 00:04:12,080
just that why is that for you um

122
00:04:12,080 --> 00:04:13,200
that is fun

123
00:04:13,200 --> 00:04:15,200
but i actually want to get people leave

124
00:04:15,200 --> 00:04:17,680
people with something that they can use

125
00:04:17,680 --> 00:04:19,918
uh what is it i'm going to do a very

126
00:04:19,918 --> 00:04:22,240
brief history lesson um points you

127
00:04:22,240 --> 00:04:24,639
towards some better history lessons um

128
00:04:24,639 --> 00:04:26,400
twist on security actually has some

129
00:04:26,400 --> 00:04:28,080
really good stuff and that's mostly what

130
00:04:28,080 --> 00:04:29,680
i'm highlighting they say it better than

131
00:04:29,680 --> 00:04:30,560
i do

132
00:04:30,560 --> 00:04:32,400
um

133
00:04:32,400 --> 00:04:34,720
i wanted to give a whole kind of primer

134
00:04:34,720 --> 00:04:35,600
into

135
00:04:35,600 --> 00:04:38,720
how to attack after directory

136
00:04:38,720 --> 00:04:40,160
from awesome

137
00:04:40,160 --> 00:04:43,919
um but uh i'm just going to talk briefly

138
00:04:43,919 --> 00:04:45,360
about

139
00:04:45,360 --> 00:04:49,360
how much of that directory uh if

140
00:04:49,360 --> 00:04:51,919
like by default it's configured to let

141
00:04:51,919 --> 00:04:54,800
everyone see what they want and then um

142
00:04:54,800 --> 00:04:56,400
removing active directory default rate

143
00:04:56,400 --> 00:04:57,919
permissions which is the whole point of

144
00:04:57,919 --> 00:04:58,880
this talk

145
00:04:58,880 --> 00:05:00,960
but uh i'll need to set it down

146
00:05:00,960 --> 00:05:02,440
so first um

147
00:05:02,440 --> 00:05:04,160
[Music]

148
00:05:04,160 --> 00:05:07,199
did any as anyone in this room worked on

149
00:05:07,199 --> 00:05:10,880
active recreation before it was

150
00:05:13,120 --> 00:05:14,560
wow

151
00:05:14,560 --> 00:05:16,320
i am not old enough to have done that

152
00:05:16,320 --> 00:05:18,560
but i have unfortunately i've been a lot

153
00:05:18,560 --> 00:05:22,320
of uh yeah that is that is older than me

154
00:05:22,320 --> 00:05:24,560
i support it because we're a wonderful

155
00:05:24,560 --> 00:05:26,960
industry and we like a lot of things

156
00:05:26,960 --> 00:05:30,160
um okay so hands anyone

157
00:05:30,160 --> 00:05:33,280
windows 2080

158
00:05:33,280 --> 00:05:35,840
okay 2003

159
00:05:35,840 --> 00:05:37,120
wow we've got some people that have done

160
00:05:37,120 --> 00:05:39,440
this for a while 2008 then

161
00:05:39,440 --> 00:05:40,800
cool

162
00:05:40,800 --> 00:05:41,600
so

163
00:05:41,600 --> 00:05:44,080
a lot of what i'm talking about

164
00:05:44,080 --> 00:05:45,199
is

165
00:05:45,199 --> 00:05:48,080
literally things that are

166
00:05:48,080 --> 00:05:50,560
25 years old um

167
00:05:50,560 --> 00:05:53,600
if you saw the the abstract from my talk

168
00:05:53,600 --> 00:05:56,800
that's the whole premise here is that

169
00:05:56,800 --> 00:05:57,759
this

170
00:05:57,759 --> 00:05:59,759
we thought about security completely

171
00:05:59,759 --> 00:06:03,440
different 30 years ago um 25 years ago

172
00:06:03,440 --> 00:06:05,440
and then microsoft now is not really

173
00:06:05,440 --> 00:06:07,120
supporting non-cloud things so active

174
00:06:07,120 --> 00:06:09,680
directory is left on the vine for rocks

175
00:06:09,680 --> 00:06:10,639
so

176
00:06:10,639 --> 00:06:11,520
why

177
00:06:11,520 --> 00:06:13,680
is

178
00:06:14,319 --> 00:06:17,840
that okay so maybe i'm doing one okay

179
00:06:17,840 --> 00:06:19,039
um

180
00:06:19,039 --> 00:06:20,960
so

181
00:06:20,960 --> 00:06:24,400
i i i was going to do a whole history

182
00:06:24,400 --> 00:06:26,560
lesson here but actually these three

183
00:06:26,560 --> 00:06:28,639
swift on security threats

184
00:06:28,639 --> 00:06:30,479
dive into them dive into the sub threads

185
00:06:30,479 --> 00:06:31,759
they are much better than anything that

186
00:06:31,759 --> 00:06:32,960
i wrote

187
00:06:32,960 --> 00:06:34,960
so one

188
00:06:34,960 --> 00:06:36,639
active directory

189
00:06:36,639 --> 00:06:38,560
started off and i'm going to cover the

190
00:06:38,560 --> 00:06:40,639
similarities and the differences between

191
00:06:40,639 --> 00:06:42,400
windows nt domains

192
00:06:42,400 --> 00:06:44,880
um but the whole

193
00:06:44,880 --> 00:06:47,360
premise there is that windows nt

194
00:06:47,360 --> 00:06:49,919
had very little security very flat you

195
00:06:49,919 --> 00:06:51,039
could not

196
00:06:51,039 --> 00:06:53,680
um segment things out you couldn't set

197
00:06:53,680 --> 00:06:55,840
um permissions on individual attributes

198
00:06:55,840 --> 00:06:58,560
it was very black and white

199
00:06:58,560 --> 00:06:59,680
um

200
00:06:59,680 --> 00:07:02,240
so active directory comes and improves

201
00:07:02,240 --> 00:07:04,720
on that the problem here is that

202
00:07:04,720 --> 00:07:07,440
active directory is simultaneously too

203
00:07:07,440 --> 00:07:09,360
large and too small

204
00:07:09,360 --> 00:07:11,840
they tried to include so many things

205
00:07:11,840 --> 00:07:12,880
i don't know how many people are

206
00:07:12,880 --> 00:07:15,039
familiar with like actual identity

207
00:07:15,039 --> 00:07:17,680
providers and iam practices but i active

208
00:07:17,680 --> 00:07:20,960
direct directory at its core adds active

209
00:07:20,960 --> 00:07:23,120
directory domain services is an identity

210
00:07:23,120 --> 00:07:26,000
provider but then they throw on dns

211
00:07:26,000 --> 00:07:28,560
they throw in all this fancy kerberos

212
00:07:28,560 --> 00:07:30,800
like authentication stuff they've thrown

213
00:07:30,800 --> 00:07:32,720
group policy which is now

214
00:07:32,720 --> 00:07:35,599
it can manage things they throw in uh

215
00:07:35,599 --> 00:07:38,400
certificate services and there's all of

216
00:07:38,400 --> 00:07:40,479
these things so active referee is way

217
00:07:40,479 --> 00:07:42,160
too large

218
00:07:42,160 --> 00:07:44,000
it's more

219
00:07:44,000 --> 00:07:47,000
it's more than it should be and then

220
00:07:47,000 --> 00:07:50,639
simultaneously it's too small you see um

221
00:07:50,639 --> 00:07:52,319
the bottom one here you can't i'm gonna

222
00:07:52,319 --> 00:07:54,160
read it because that's actually really

223
00:07:54,160 --> 00:07:56,400
small if you're in the back um

224
00:07:56,400 --> 00:07:58,240
act the problem with active directory is

225
00:07:58,240 --> 00:08:00,319
scope it's not big enough it's funny

226
00:08:00,319 --> 00:08:01,919
because i said it's too big it's a

227
00:08:01,919 --> 00:08:03,759
system that was sold without tools to

228
00:08:03,759 --> 00:08:06,479
make it successful password self-service

229
00:08:06,479 --> 00:08:09,039
easy group management automation of per

230
00:08:09,039 --> 00:08:11,120
service delegation lack of management

231
00:08:11,120 --> 00:08:13,520
tool enrollment

232
00:08:13,520 --> 00:08:15,919
naivete and then advocation because of

233
00:08:15,919 --> 00:08:18,080
course swift on security so they their

234
00:08:18,080 --> 00:08:19,360
own

235
00:08:19,360 --> 00:08:21,759
work but the point there being

236
00:08:21,759 --> 00:08:23,199
wow we're going to build this system

237
00:08:23,199 --> 00:08:24,800
that makes it super easy for people to

238
00:08:24,800 --> 00:08:27,039
manage their networks and then

239
00:08:27,039 --> 00:08:28,240
we're not going to actually maintain it

240
00:08:28,240 --> 00:08:30,160
and give people the tools they need so

241
00:08:30,160 --> 00:08:33,120
there's a lot of things so

242
00:08:33,120 --> 00:08:34,880
there are a lot of tools to extend on

243
00:08:34,880 --> 00:08:36,719
active drive for the most part i would

244
00:08:36,719 --> 00:08:37,760
recommend

245
00:08:37,760 --> 00:08:39,279
you can use the cloud

246
00:08:39,279 --> 00:08:40,880
there's reasons you can't i will

247
00:08:40,880 --> 00:08:42,880
actually get into some of that but

248
00:08:42,880 --> 00:08:44,000
um

249
00:08:44,000 --> 00:08:46,160
probably every i think it's something

250
00:08:46,160 --> 00:08:48,640
like 97 percent of fortune 500 has

251
00:08:48,640 --> 00:08:52,800
active directory because you need it um

252
00:08:52,800 --> 00:08:54,560
even the company i'm at dragos we

253
00:08:54,560 --> 00:08:56,800
started out completely cloud first we

254
00:08:56,800 --> 00:08:58,240
had no

255
00:08:58,240 --> 00:09:00,880
on-premise anything but then

256
00:09:00,880 --> 00:09:03,200
okay we have a firewall and we have esx

257
00:09:03,200 --> 00:09:04,640
we have these legacy things that don't

258
00:09:04,640 --> 00:09:05,600
support

259
00:09:05,600 --> 00:09:08,880
saml so now we have to do we have to

260
00:09:08,880 --> 00:09:10,320
integrate with bell that would be active

261
00:09:10,320 --> 00:09:12,399
directory so it's it's very hard to

262
00:09:12,399 --> 00:09:14,560
escape while there's still legacy stuff

263
00:09:14,560 --> 00:09:16,320
out there um

264
00:09:16,320 --> 00:09:18,160
and then so this top one i kind of

265
00:09:18,160 --> 00:09:20,839
jumping around here but

266
00:09:20,839 --> 00:09:24,240
um active directory has ldap it has dns

267
00:09:24,240 --> 00:09:26,480
it has kerberos it has you can do

268
00:09:26,480 --> 00:09:29,040
certificates it's it's

269
00:09:29,040 --> 00:09:31,680
it's insane but then also

270
00:09:31,680 --> 00:09:34,720
the naivete that top right one

271
00:09:34,720 --> 00:09:37,279
i can't understate it enough active

272
00:09:37,279 --> 00:09:39,040
directory is a product that believes in

273
00:09:39,040 --> 00:09:41,120
humans and expertise

274
00:09:41,120 --> 00:09:43,760
it defines exposes innumerable

275
00:09:43,760 --> 00:09:45,839
interfaces that give you power

276
00:09:45,839 --> 00:09:48,560
however you desire to demand what power

277
00:09:48,560 --> 00:09:50,800
you should not have it is the core

278
00:09:50,800 --> 00:09:53,200
without the rubber bumper

279
00:09:53,200 --> 00:09:54,880
so

280
00:09:54,880 --> 00:09:56,800
why

281
00:09:56,800 --> 00:09:58,240
um i'm going to get i'm actually going

282
00:09:58,240 --> 00:10:00,160
to unpack some of some of that in

283
00:10:00,160 --> 00:10:02,880
organizational context in a second but

284
00:10:02,880 --> 00:10:05,600
active directory replaced nt domains in

285
00:10:05,600 --> 00:10:08,959
2000 um windows ng domains were flat or

286
00:10:08,959 --> 00:10:10,800
no domain trees no forest no

287
00:10:10,800 --> 00:10:13,279
organizational units again if you don't

288
00:10:13,279 --> 00:10:15,120
know fully what those are in trusts

289
00:10:15,120 --> 00:10:18,079
that's not in scope here but um it was

290
00:10:18,079 --> 00:10:19,600
flat didn't happen

291
00:10:19,600 --> 00:10:20,800
it didn't have all the things you'd

292
00:10:20,800 --> 00:10:23,760
expect that an identity provider to have

293
00:10:23,760 --> 00:10:25,360
um

294
00:10:25,360 --> 00:10:27,920
even five years later uh you could not

295
00:10:27,920 --> 00:10:29,600
set permissions at the attribute level

296
00:10:29,600 --> 00:10:31,200
which is going to be really key to some

297
00:10:31,200 --> 00:10:32,720
of the stuff i'm going to talk about and

298
00:10:32,720 --> 00:10:34,640
security priorities were different in

299
00:10:34,640 --> 00:10:36,959
the year 2000 um

300
00:10:36,959 --> 00:10:40,000
we used to believe so firmly in the

301
00:10:40,000 --> 00:10:41,839
perimeter in the firewall we used to

302
00:10:41,839 --> 00:10:43,440
think that we were safe inside of our

303
00:10:43,440 --> 00:10:45,040
network and we really needed to focus

304
00:10:45,040 --> 00:10:48,079
everything in that perimeter uh

305
00:10:48,079 --> 00:10:49,959
there's fancy words around that now

306
00:10:49,959 --> 00:10:52,000
deparamentarization and zero trust and

307
00:10:52,000 --> 00:10:55,440
all that but we now assume breach we do

308
00:10:55,440 --> 00:10:57,120
not and there were people even back then

309
00:10:57,120 --> 00:10:59,680
assuming breach um i mean cliff there's

310
00:10:59,680 --> 00:11:02,240
all sorts of stuff but

311
00:11:02,240 --> 00:11:04,000
security priorities were different in

312
00:11:04,000 --> 00:11:06,320
the year 2000 so people weren't thinking

313
00:11:06,320 --> 00:11:07,360
well

314
00:11:07,360 --> 00:11:09,600
i need to you know

315
00:11:09,600 --> 00:11:11,920
um yeah i need to make it so people

316
00:11:11,920 --> 00:11:12,959
can't see

317
00:11:12,959 --> 00:11:14,480
these things

318
00:11:14,480 --> 00:11:16,480
we weren't thinking that um well i

319
00:11:16,480 --> 00:11:18,160
especially wasn't because i was not old

320
00:11:18,160 --> 00:11:20,320
enough to be thinking these things but

321
00:11:20,320 --> 00:11:21,680
um

322
00:11:21,680 --> 00:11:24,079
active directory has made some major

323
00:11:24,079 --> 00:11:27,440
improvements in 08 and 2016 um but those

324
00:11:27,440 --> 00:11:29,920
were mainly like the bare minimum um

325
00:11:29,920 --> 00:11:31,440
things that people been asking for for

326
00:11:31,440 --> 00:11:33,200
almost 16 years

327
00:11:33,200 --> 00:11:34,000
but

328
00:11:34,000 --> 00:11:35,839
active directory has had no functional

329
00:11:35,839 --> 00:11:37,279
improvements in the last six years

330
00:11:37,279 --> 00:11:38,320
literally

331
00:11:38,320 --> 00:11:40,880
no change except for security patches so

332
00:11:40,880 --> 00:11:44,480
that's why we are where we are um

333
00:11:44,480 --> 00:11:46,640
that

334
00:11:46,640 --> 00:11:48,160
we're

335
00:11:48,160 --> 00:11:50,480
most of our networks at the core of it

336
00:11:50,480 --> 00:11:52,079
and most of our identity

337
00:11:52,079 --> 00:11:54,079
systems at the core of it is a system

338
00:11:54,079 --> 00:11:55,600
that is not built for the problems we

339
00:11:55,600 --> 00:11:58,160
have today now here organizational

340
00:11:58,160 --> 00:11:59,839
context generally when i'm talking about

341
00:11:59,839 --> 00:12:02,320
the directory you fall into two scopes

342
00:12:02,320 --> 00:12:04,480
uh help desk people assist admins who

343
00:12:04,480 --> 00:12:05,279
think

344
00:12:05,279 --> 00:12:07,200
i've used active directory i'm an expert

345
00:12:07,200 --> 00:12:08,800
on it

346
00:12:08,800 --> 00:12:11,519
uh this is a problem and and this is not

347
00:12:11,519 --> 00:12:13,279
gatekeeping i do not this is not

348
00:12:13,279 --> 00:12:14,639
gatekeeping but the problem is active

349
00:12:14,639 --> 00:12:16,240
directory is actually

350
00:12:16,240 --> 00:12:17,839
back to that problem of being too big

351
00:12:17,839 --> 00:12:19,680
and too small at the same time

352
00:12:19,680 --> 00:12:21,600
most people use one functionality in it

353
00:12:21,600 --> 00:12:23,120
and they think that they know how to use

354
00:12:23,120 --> 00:12:24,560
it they think they know how to secure it

355
00:12:24,560 --> 00:12:26,320
and i i've interviewed a ton of people

356
00:12:26,320 --> 00:12:27,360
that

357
00:12:27,360 --> 00:12:28,959
will claim like they're an active

358
00:12:28,959 --> 00:12:30,399
directory expert

359
00:12:30,399 --> 00:12:32,000
and when you go into it they've never

360
00:12:32,000 --> 00:12:33,920
used anything out of ada active

361
00:12:33,920 --> 00:12:35,360
directory users and computers which

362
00:12:35,360 --> 00:12:37,839
essentially is how you manage users and

363
00:12:37,839 --> 00:12:41,839
computers groups and all that but um

364
00:12:42,480 --> 00:12:44,560
that is a

365
00:12:44,560 --> 00:12:47,120
major problem because we you assume that

366
00:12:47,120 --> 00:12:49,279
it is easy and you assume it's easy to

367
00:12:49,279 --> 00:12:51,600
secure or secure out of the box

368
00:12:51,600 --> 00:12:54,399
now generally

369
00:12:54,399 --> 00:12:56,320
that's early in your career once you see

370
00:12:56,320 --> 00:12:58,560
a bit of active directory you finally go

371
00:12:58,560 --> 00:13:00,639
wait this thing is completely unsecured

372
00:13:00,639 --> 00:13:02,639
let's throw it out you can't use it it's

373
00:13:02,639 --> 00:13:04,639
not going to be secure but it's in your

374
00:13:04,639 --> 00:13:06,160
network so you tend to just ignore it

375
00:13:06,160 --> 00:13:07,920
because you think it's too complicated

376
00:13:07,920 --> 00:13:09,680
so you have people over here thinking

377
00:13:09,680 --> 00:13:11,360
it's too it's super easy don't have to

378
00:13:11,360 --> 00:13:13,120
secure it people over here are thinking

379
00:13:13,120 --> 00:13:15,120
it's super hard to secure let's not even

380
00:13:15,120 --> 00:13:16,880
try it um

381
00:13:16,880 --> 00:13:18,839
so like said it

382
00:13:18,839 --> 00:13:21,200
is trick people into thinking it doesn't

383
00:13:21,200 --> 00:13:22,720
need much attention

384
00:13:22,720 --> 00:13:23,680
um

385
00:13:23,680 --> 00:13:26,480
then also it is business critical system

386
00:13:26,480 --> 00:13:29,360
so um even if you might can be convinced

387
00:13:29,360 --> 00:13:30,639
that you need to change it and you can

388
00:13:30,639 --> 00:13:32,240
change it

389
00:13:32,240 --> 00:13:34,399
people can say no no don't touch it

390
00:13:34,399 --> 00:13:36,240
for the most part i i've seen active

391
00:13:36,240 --> 00:13:38,800
directory domains running 2003

392
00:13:38,800 --> 00:13:40,800
uh even just a few years ago that are

393
00:13:40,800 --> 00:13:42,560
just running and doing everything you

394
00:13:42,560 --> 00:13:43,519
need

395
00:13:43,519 --> 00:13:45,220
so why am i changing this um

396
00:13:45,220 --> 00:13:47,279
[Music]

397
00:13:47,279 --> 00:13:50,240
but the thing is

398
00:13:50,800 --> 00:13:53,040
that's why i am coming at just one

399
00:13:53,040 --> 00:13:55,360
problem just the discoverability here

400
00:13:55,360 --> 00:13:57,040
because this is one of the biggest

401
00:13:57,040 --> 00:13:59,120
problems getting up to 26

402
00:13:59,120 --> 00:14:01,040
active directory um functional level

403
00:14:01,040 --> 00:14:02,720
2016 can get rid of a lot of the

404
00:14:02,720 --> 00:14:05,040
insecure crypto and the ntlm and all of

405
00:14:05,040 --> 00:14:07,040
that nonsense that gives attackers one

406
00:14:07,040 --> 00:14:08,720
click access there's a lot of other

407
00:14:08,720 --> 00:14:11,600
stuff that needs to be fixed too but

408
00:14:11,600 --> 00:14:13,519
to me there's comparability so what i

409
00:14:13,519 --> 00:14:17,040
the the thesis here on this slide is

410
00:14:17,040 --> 00:14:19,199
active directory can be secured you need

411
00:14:19,199 --> 00:14:20,800
to give it some attention and there are

412
00:14:20,800 --> 00:14:22,240
actually ways to go about it carefully

413
00:14:22,240 --> 00:14:24,079
without breaking anything

414
00:14:24,079 --> 00:14:25,839
so um

415
00:14:25,839 --> 00:14:26,880
do not

416
00:14:26,880 --> 00:14:28,240
nothing is black and white don't fall

417
00:14:28,240 --> 00:14:30,399
into and for anything don't fall into

418
00:14:30,399 --> 00:14:31,839
these camps that are like oh that's

419
00:14:31,839 --> 00:14:32,800
super

420
00:14:32,800 --> 00:14:34,720
super insecure we can't secure it no

421
00:14:34,720 --> 00:14:36,240
actually that's directly has all of the

422
00:14:36,240 --> 00:14:37,760
tools you need to secure it pretty damn

423
00:14:37,760 --> 00:14:39,440
well

424
00:14:39,440 --> 00:14:42,639
it does i also don't love the whole

425
00:14:42,639 --> 00:14:45,120
concept that the more bugs you find in

426
00:14:45,120 --> 00:14:46,639
some we think this is an industry the

427
00:14:46,639 --> 00:14:47,519
more

428
00:14:47,519 --> 00:14:49,440
bones found in something the less secure

429
00:14:49,440 --> 00:14:50,880
it is i tend to actually think the

430
00:14:50,880 --> 00:14:52,720
opposite for the most part active

431
00:14:52,720 --> 00:14:54,320
directory has

432
00:14:54,320 --> 00:14:56,720
so many vulnerabilities detected because

433
00:14:56,720 --> 00:14:58,800
it is so widely used with so many eyes

434
00:14:58,800 --> 00:15:00,880
on it now there are some problems but i

435
00:15:00,880 --> 00:15:02,480
don't think it's necessarily inherently

436
00:15:02,480 --> 00:15:04,320
less secure than much else

437
00:15:04,320 --> 00:15:06,000
it just has some security faults that

438
00:15:06,000 --> 00:15:07,920
are complete nonsense and need to be

439
00:15:07,920 --> 00:15:09,920
reverted but

440
00:15:09,920 --> 00:15:11,920
that goes to the other piece of

441
00:15:11,920 --> 00:15:14,800
microsoft phase problem that actually i

442
00:15:14,800 --> 00:15:17,120
think such as fixing is that microsoft's

443
00:15:17,120 --> 00:15:20,000
security problem is that they backward

444
00:15:20,000 --> 00:15:23,360
they are backwards compatible forever

445
00:15:23,360 --> 00:15:25,519
active directory domains in 2016 are

446
00:15:25,519 --> 00:15:27,680
built where every single user in this

447
00:15:27,680 --> 00:15:29,680
group called is in a group called pre

448
00:15:29,680 --> 00:15:32,639
windows 2000 compatibility

449
00:15:32,639 --> 00:15:33,839
because we need to be backwards

450
00:15:33,839 --> 00:15:35,040
compatible with everything and that's

451
00:15:35,040 --> 00:15:36,320
actually one of the key problems i'll

452
00:15:36,320 --> 00:15:37,839
talk about but

453
00:15:37,839 --> 00:15:40,720
um with windows 11 i think is showing as

454
00:15:40,720 --> 00:15:42,720
much as people like to eat on windows 11

455
00:15:42,720 --> 00:15:45,040
in it and blah blah blah the ui they're

456
00:15:45,040 --> 00:15:47,440
just trying to make it look like mac

457
00:15:47,440 --> 00:15:50,000
the key thing to me is a security

458
00:15:50,000 --> 00:15:51,440
practitioner and someone who cares about

459
00:15:51,440 --> 00:15:53,680
microsoft products because they

460
00:15:53,680 --> 00:15:56,399
run our organizations is that

461
00:15:56,399 --> 00:15:58,240
they are not

462
00:15:58,240 --> 00:16:01,680
supporting all hardware they actually

463
00:16:01,680 --> 00:16:03,040
got rid of a ton of backwards

464
00:16:03,040 --> 00:16:04,320
compatibility and

465
00:16:04,320 --> 00:16:06,320
not as much as i would like but windows

466
00:16:06,320 --> 00:16:08,399
11 shows that they are willing to break

467
00:16:08,399 --> 00:16:10,240
old things

468
00:16:10,240 --> 00:16:11,680
so there is hope

469
00:16:11,680 --> 00:16:13,199
will microsoft ever do that for active

470
00:16:13,199 --> 00:16:14,880
directory no because they don't make any

471
00:16:14,880 --> 00:16:17,279
money off of it and they want to move to

472
00:16:17,279 --> 00:16:18,639
the cloud so

473
00:16:18,639 --> 00:16:20,320
but that just being my point that

474
00:16:20,320 --> 00:16:22,560
microsoft a key problem here is that

475
00:16:22,560 --> 00:16:23,759
microsoft needs to be backwards

476
00:16:23,759 --> 00:16:26,160
compatible forever

477
00:16:26,160 --> 00:16:28,959
um and that's just

478
00:16:28,959 --> 00:16:30,079
yeah

479
00:16:30,079 --> 00:16:32,560
um it's a major problem in our

480
00:16:32,560 --> 00:16:35,120
organization so the effects surface i am

481
00:16:35,120 --> 00:16:37,759
not this is not a primer in i feel like

482
00:16:37,759 --> 00:16:40,399
i'm spending a lot of time

483
00:16:40,399 --> 00:16:41,759
but um

484
00:16:41,759 --> 00:16:44,959
active directory so this is not a primer

485
00:16:44,959 --> 00:16:46,240
on

486
00:16:46,240 --> 00:16:48,240
the mitre attack framework this is i'm

487
00:16:48,240 --> 00:16:49,759
literally talking about one thing and

488
00:16:49,759 --> 00:16:51,279
just from the frame of active directory

489
00:16:51,279 --> 00:16:53,600
so here is these very zoomed out by

490
00:16:53,600 --> 00:16:55,040
their attack framework i'm going to zoom

491
00:16:55,040 --> 00:16:56,480
in for a second these are a bunch of

492
00:16:56,480 --> 00:16:58,720
techniques

493
00:16:58,720 --> 00:17:00,880
tactics techniques and procedures that

494
00:17:00,880 --> 00:17:04,480
attachers use to target your systems and

495
00:17:04,480 --> 00:17:06,559
don't know about it read about it but

496
00:17:06,559 --> 00:17:08,079
right there

497
00:17:08,079 --> 00:17:10,720
there are 30 techniques i think in my my

498
00:17:10,720 --> 00:17:13,599
abstract i said 26 apparently

499
00:17:13,599 --> 00:17:15,439
there are 30

500
00:17:15,439 --> 00:17:18,559
in discovery so you can't read all these

501
00:17:18,559 --> 00:17:20,559
we'll walk out but i tried to fit

502
00:17:20,559 --> 00:17:22,240
everything here so these are 30

503
00:17:22,240 --> 00:17:23,199
techniques

504
00:17:23,199 --> 00:17:25,119
i highlighted all of the ones that are

505
00:17:25,119 --> 00:17:27,439
by default discoverable in active

506
00:17:27,439 --> 00:17:29,360
directory these are things that i'm

507
00:17:29,360 --> 00:17:32,400
going to talk about very soon here about

508
00:17:32,400 --> 00:17:34,240
how we can get rid of but

509
00:17:34,240 --> 00:17:37,200
um account discovery

510
00:17:37,200 --> 00:17:40,480
um if you think with azure id then the

511
00:17:40,480 --> 00:17:42,559
next to the cloud service discovery

512
00:17:42,559 --> 00:17:44,480
cloud infrastructure discovery domain

513
00:17:44,480 --> 00:17:46,160
trust discovery can't really get rid of

514
00:17:46,160 --> 00:17:47,919
that but unfortunately file and

515
00:17:47,919 --> 00:17:49,600
directory discovery group policy

516
00:17:49,600 --> 00:17:51,679
discovery fixing that in one of these

517
00:17:51,679 --> 00:17:54,400
slides um network service and network

518
00:17:54,400 --> 00:17:56,480
share discovery password policy

519
00:17:56,480 --> 00:17:58,799
discovery permission groups discovery

520
00:17:58,799 --> 00:18:01,520
all of these things

521
00:18:01,520 --> 00:18:03,520
and then what i love about thinking

522
00:18:03,520 --> 00:18:06,960
about it this direction is

523
00:18:07,120 --> 00:18:08,640
it's

524
00:18:08,640 --> 00:18:10,240
well there's a couple reasons i like

525
00:18:10,240 --> 00:18:13,120
thinking about it this direction one

526
00:18:13,120 --> 00:18:15,840
i think attacker attackers pen testers

527
00:18:15,840 --> 00:18:17,840
anyone on the the offense the red team

528
00:18:17,840 --> 00:18:21,039
side is um spoiled especially by active

529
00:18:21,039 --> 00:18:22,480
directory makes it too easy they do a

530
00:18:22,480 --> 00:18:24,240
couple clicks they see everything they

531
00:18:24,240 --> 00:18:26,080
want um

532
00:18:26,080 --> 00:18:27,440
you get rid of things that they're used

533
00:18:27,440 --> 00:18:30,320
to just being able to double to to just

534
00:18:30,320 --> 00:18:34,400
see they get confused very quickly um

535
00:18:34,400 --> 00:18:36,080
they're like wait no no acting correctly

536
00:18:36,080 --> 00:18:37,440
you can't get rid of that you've broken

537
00:18:37,440 --> 00:18:38,960
your action directly now

538
00:18:38,960 --> 00:18:42,080
now you can hide these things um

539
00:18:42,080 --> 00:18:43,919
i have not been able to make it so that

540
00:18:43,919 --> 00:18:46,720
bloodhound does not pull anything

541
00:18:46,720 --> 00:18:49,360
i i'm trying desperately to make

542
00:18:49,360 --> 00:18:50,480
bloodhound

543
00:18:50,480 --> 00:18:51,360
um

544
00:18:51,360 --> 00:18:52,960
which if you don't know what bloodhound

545
00:18:52,960 --> 00:18:55,440
is it's you you have to try it on an

546
00:18:55,440 --> 00:18:56,880
environment it is

547
00:18:56,880 --> 00:18:58,480
i assume most people at this point do

548
00:18:58,480 --> 00:19:00,000
but i don't know who's in the audience

549
00:19:00,000 --> 00:19:02,559
so it's a great tool for finding all of

550
00:19:02,559 --> 00:19:05,679
these tech pathways in a directory but

551
00:19:05,679 --> 00:19:09,200
one of my goals is to figure out

552
00:19:09,200 --> 00:19:10,799
how to make

553
00:19:10,799 --> 00:19:14,000
your environment almost invisible

554
00:19:14,000 --> 00:19:15,200
i don't know if it's possible without

555
00:19:15,200 --> 00:19:16,960
breaking things but

556
00:19:16,960 --> 00:19:17,320
um

557
00:19:17,320 --> 00:19:20,399
[Music]

558
00:19:20,480 --> 00:19:23,280
this isn't security by obscurity it's

559
00:19:23,280 --> 00:19:24,880
there are a couple slides in here i hate

560
00:19:24,880 --> 00:19:26,640
security biosecurity but i'm gonna

561
00:19:26,640 --> 00:19:28,400
highlight a couple things this is

562
00:19:28,400 --> 00:19:30,480
literally just why

563
00:19:30,480 --> 00:19:32,640
would your users need to see these

564
00:19:32,640 --> 00:19:34,000
things

565
00:19:34,000 --> 00:19:35,520
there are so many things here that like

566
00:19:35,520 --> 00:19:37,919
your users just a user does not need to

567
00:19:37,919 --> 00:19:40,240
see only the reason a user would need to

568
00:19:40,240 --> 00:19:41,919
see it if they're actually an attacker

569
00:19:41,919 --> 00:19:44,160
for the most part so think about this

570
00:19:44,160 --> 00:19:46,000
through lens of

571
00:19:46,000 --> 00:19:47,919
principle of least privilege lease

572
00:19:47,919 --> 00:19:49,760
functionality let's let's lock things

573
00:19:49,760 --> 00:19:51,760
down again there were those concepts

574
00:19:51,760 --> 00:19:54,640
back in 2000's built but

575
00:19:54,640 --> 00:19:56,880
we were so spoiled back then by thinking

576
00:19:56,880 --> 00:20:00,160
that the perimeter would save us so um

577
00:20:00,160 --> 00:20:02,240
some of these are nonsense system time

578
00:20:02,240 --> 00:20:03,600
discovery doesn't tell me enough i don't

579
00:20:03,600 --> 00:20:05,120
know why that's a whole technique that

580
00:20:05,120 --> 00:20:06,799
you can tell me if you're

581
00:20:06,799 --> 00:20:08,720
on on a red team and you think that's

582
00:20:08,720 --> 00:20:10,880
useful um system owner and user

583
00:20:10,880 --> 00:20:12,400
discovery

584
00:20:12,400 --> 00:20:13,600
is one that

585
00:20:13,600 --> 00:20:16,559
actually yeah

586
00:20:16,799 --> 00:20:18,320
i would love if that was more

587
00:20:18,320 --> 00:20:20,400
discoverable most environments did not

588
00:20:20,400 --> 00:20:22,320
actually input as a system owner and you

589
00:20:22,320 --> 00:20:23,840
just look and there you go these screen

590
00:20:23,840 --> 00:20:24,799
tests

591
00:20:24,799 --> 00:20:28,960
so um yep so here's the crux of it

592
00:20:28,960 --> 00:20:31,919
removing directory default

593
00:20:31,919 --> 00:20:33,200
permissions

594
00:20:33,200 --> 00:20:35,760
so i'm going to be showing mostly uh

595
00:20:35,760 --> 00:20:38,000
screenshots and walking through

596
00:20:38,000 --> 00:20:42,480
why this is wrong and how to fix it

597
00:20:42,720 --> 00:20:43,840
so

598
00:20:43,840 --> 00:20:45,600
that's actually very small but i'm gonna

599
00:20:45,600 --> 00:20:48,480
walk through it anyways um

600
00:20:48,480 --> 00:20:50,080
this is just a

601
00:20:50,080 --> 00:20:52,640
default ou so an ou is an organizational

602
00:20:52,640 --> 00:20:55,440
unit it is not a group it is a container

603
00:20:55,440 --> 00:20:57,919
of other objects so in this one i have

604
00:20:57,919 --> 00:20:59,600
one called computers

605
00:20:59,600 --> 00:21:00,320
so

606
00:21:00,320 --> 00:21:03,679
you see that authenticated users has

607
00:21:03,679 --> 00:21:05,760
read and by defaults how this one was

608
00:21:05,760 --> 00:21:06,880
configured

609
00:21:06,880 --> 00:21:08,559
it's just how microsoft ships it out of

610
00:21:08,559 --> 00:21:10,960
the box

611
00:21:12,159 --> 00:21:12,960
that

612
00:21:12,960 --> 00:21:15,280
me so authenticator users is not a group

613
00:21:15,280 --> 00:21:16,960
it's a service principle it's dynamic it

614
00:21:16,960 --> 00:21:19,679
means anyone authenticated so

615
00:21:19,679 --> 00:21:21,360
differentiate that to the one on the top

616
00:21:21,360 --> 00:21:23,120
there everyone

617
00:21:23,120 --> 00:21:25,039
authenticated users will still least

618
00:21:25,039 --> 00:21:25,760
less

619
00:21:25,760 --> 00:21:27,679
like it's still better than everyone

620
00:21:27,679 --> 00:21:29,840
everyone means even if you're

621
00:21:29,840 --> 00:21:31,760
that's scary you see that used in a lot

622
00:21:31,760 --> 00:21:34,799
of places it is just frightening um you

623
00:21:34,799 --> 00:21:36,799
see a lot of times like network shares

624
00:21:36,799 --> 00:21:38,159
people are like well i just want to give

625
00:21:38,159 --> 00:21:40,559
everyone access to this no

626
00:21:40,559 --> 00:21:42,799
people so so authenticated users feel

627
00:21:42,799 --> 00:21:45,799
better

628
00:21:46,000 --> 00:21:47,440
authenticated

629
00:21:47,440 --> 00:21:48,960
can read

630
00:21:48,960 --> 00:21:51,280
everything in this w uh if you hit the

631
00:21:51,280 --> 00:21:54,080
fans you can see this object in sub

632
00:21:54,080 --> 00:21:55,600
objects but i'm also showing this

633
00:21:55,600 --> 00:21:58,640
because most people don't realize how it

634
00:21:58,640 --> 00:22:00,559
could be no

635
00:22:00,559 --> 00:22:02,799
dude i'm going to say don't don't try

636
00:22:02,799 --> 00:22:04,799
these things abroad i realize i haven't

637
00:22:04,799 --> 00:22:07,360
said that yet do not just go that is

638
00:22:07,360 --> 00:22:08,720
nonsense

639
00:22:08,720 --> 00:22:10,000
this person shouldn't be able to read

640
00:22:10,000 --> 00:22:11,200
that clip

641
00:22:11,200 --> 00:22:13,840
because authenticated users

642
00:22:13,840 --> 00:22:15,520
is also a misnomer

643
00:22:15,520 --> 00:22:18,400
computers are users too

644
00:22:18,400 --> 00:22:20,159
this is authenticated objects

645
00:22:20,159 --> 00:22:21,760
authenticated principles there could be

646
00:22:21,760 --> 00:22:23,280
a lot of better names for it but

647
00:22:23,280 --> 00:22:24,880
whatever we're dealing with what we have

648
00:22:24,880 --> 00:22:28,000
here that's my thought so computers are

649
00:22:28,000 --> 00:22:30,000
user objects that you just don't have to

650
00:22:30,000 --> 00:22:32,400
set the password for they dynamically

651
00:22:32,400 --> 00:22:34,010
update their password um

652
00:22:34,010 --> 00:22:36,080
[Music]

653
00:22:36,080 --> 00:22:38,480
so i will talk about it in other slides

654
00:22:38,480 --> 00:22:40,480
that a lot of times when you might have

655
00:22:40,480 --> 00:22:41,919
the urge to just say get rid of

656
00:22:41,919 --> 00:22:43,679
authenticated users you could replace

657
00:22:43,679 --> 00:22:45,120
them with domain computers in a lot of

658
00:22:45,120 --> 00:22:46,400
places

659
00:22:46,400 --> 00:22:49,520
there are obviously computers need to

660
00:22:49,520 --> 00:22:52,080
see almost everything in active

661
00:22:52,080 --> 00:22:54,159
talk a little bit about what they do and

662
00:22:54,159 --> 00:22:56,720
don't need to see users do not

663
00:22:56,720 --> 00:22:58,240
need to see everything

664
00:22:58,240 --> 00:23:00,960
computers need to be able to see if that

665
00:23:00,960 --> 00:23:02,640
user is able to authenticate in all

666
00:23:02,640 --> 00:23:04,320
sorts of other things

667
00:23:04,320 --> 00:23:06,000
they need to see group policies they

668
00:23:06,000 --> 00:23:08,000
need to know what applies to them do not

669
00:23:08,000 --> 00:23:09,919
just remove things this is more so

670
00:23:09,919 --> 00:23:12,000
highlighting that

671
00:23:12,000 --> 00:23:13,760
this is the problem they should not be

672
00:23:13,760 --> 00:23:16,960
able to read let's figure out how to fix

673
00:23:16,960 --> 00:23:18,960
some of this um

674
00:23:18,960 --> 00:23:22,000
and i'm also mostly talking here about

675
00:23:22,000 --> 00:23:25,039
default settings you need to i will talk

676
00:23:25,039 --> 00:23:26,559
in my final slide about schools like

677
00:23:26,559 --> 00:23:29,200
ping castle and bloodhound and uh ad

678
00:23:29,200 --> 00:23:31,280
explorer they're great

679
00:23:31,280 --> 00:23:34,080
um to discover some of this but you may

680
00:23:34,080 --> 00:23:36,240
have weird things i actually have the

681
00:23:36,240 --> 00:23:37,600
privilege of having only a

682
00:23:37,600 --> 00:23:39,200
three-year-old active director doing

683
00:23:39,200 --> 00:23:41,679
that i managed here that is wonderful

684
00:23:41,679 --> 00:23:44,559
there is not a lot of old weird crud but

685
00:23:44,559 --> 00:23:46,720
i have seen some nonsense out there i've

686
00:23:46,720 --> 00:23:48,880
seen all sorts of people

687
00:23:48,880 --> 00:23:51,279
really well meaning the worst is i came

688
00:23:51,279 --> 00:23:52,720
into an environment when i was doing a

689
00:23:52,720 --> 00:23:55,120
merger acquisition and i saw domain not

690
00:23:55,120 --> 00:23:57,919
the main users or yeah domain users was

691
00:23:57,919 --> 00:24:00,080
in the admin the built-in administrator

692
00:24:00,080 --> 00:24:01,200
screen

693
00:24:01,200 --> 00:24:02,799
why

694
00:24:02,799 --> 00:24:05,279
well everybody we need people to be able

695
00:24:05,279 --> 00:24:09,679
to rdp to their desktops over the vpn

696
00:24:11,360 --> 00:24:13,919
so like and and that this is the replica

697
00:24:13,919 --> 00:24:16,840
when we go down for a second

698
00:24:16,840 --> 00:24:20,080
um that is the single sort of thing that

699
00:24:20,080 --> 00:24:21,679
gets us into these problems it's like

700
00:24:21,679 --> 00:24:23,760
well no it's just our users they're not

701
00:24:23,760 --> 00:24:25,760
gonna do anything better

702
00:24:25,760 --> 00:24:27,679
there's even a built-in remote desktop

703
00:24:27,679 --> 00:24:29,840
users group there's so many better ways

704
00:24:29,840 --> 00:24:31,520
to do this even if you just want to give

705
00:24:31,520 --> 00:24:34,159
everyone rdp to everything

706
00:24:34,159 --> 00:24:37,039
people don't realize that like if what

707
00:24:37,039 --> 00:24:38,400
administrator

708
00:24:38,400 --> 00:24:40,480
the administrator account can do

709
00:24:40,480 --> 00:24:41,600
um

710
00:24:41,600 --> 00:24:44,159
don't use your domain admins accounts

711
00:24:44,159 --> 00:24:45,919
for anything except for the

712
00:24:45,919 --> 00:24:47,360
administration

713
00:24:47,360 --> 00:24:47,660
um

714
00:24:47,660 --> 00:24:48,880
[Music]

715
00:24:48,880 --> 00:24:50,400
yeah you need to have privilege groups

716
00:24:50,400 --> 00:24:52,400
there's a hun i'm going into all the

717
00:24:52,400 --> 00:24:53,760
hundred things that i think that you

718
00:24:53,760 --> 00:24:55,039
should do with that director i'm trying

719
00:24:55,039 --> 00:24:57,919
to focus on discovery um

720
00:24:57,919 --> 00:24:59,360
so i'm going to

721
00:24:59,360 --> 00:25:00,400
before

722
00:25:00,400 --> 00:25:02,559
the biggest problem here a lot of you

723
00:25:02,559 --> 00:25:04,159
probably first heard about this with

724
00:25:04,159 --> 00:25:05,520
print nightmare

725
00:25:05,520 --> 00:25:08,640
um the pre windows 2000 compatible

726
00:25:08,640 --> 00:25:10,080
access group i'm going to call like

727
00:25:10,080 --> 00:25:11,520
three different things here i do not

728
00:25:11,520 --> 00:25:13,919
want to spell that out um i call it

729
00:25:13,919 --> 00:25:15,760
pre-win2k for the most part on these

730
00:25:15,760 --> 00:25:18,159
slides um

731
00:25:18,159 --> 00:25:20,320
not a lot of other things called that so

732
00:25:20,320 --> 00:25:21,840
frequently

733
00:25:21,840 --> 00:25:23,360
um

734
00:25:23,360 --> 00:25:25,760
if you did not have authenticated users

735
00:25:25,760 --> 00:25:27,520
in this then you weren't vulnerable to

736
00:25:27,520 --> 00:25:30,799
most of the things in print nightmare

737
00:25:30,799 --> 00:25:32,799
most people

738
00:25:32,799 --> 00:25:35,600
up until that stuff came out did not

739
00:25:35,600 --> 00:25:37,520
realize that you could actually do

740
00:25:37,520 --> 00:25:39,120
anything about this they just thought

741
00:25:39,120 --> 00:25:41,760
well acting directory is people

742
00:25:41,760 --> 00:25:43,200
it's a feature not above it is

743
00:25:43,200 --> 00:25:44,720
unfortunately a feature but we can fix

744
00:25:44,720 --> 00:25:46,960
it um

745
00:25:46,960 --> 00:25:49,760
there's a funny one here so this group

746
00:25:49,760 --> 00:25:52,799
it says in the description here

747
00:25:52,799 --> 00:25:54,640
that it is a backward compatibility

748
00:25:54,640 --> 00:25:56,720
group which allows read access on all

749
00:25:56,720 --> 00:26:00,159
users and groups in the domain

750
00:26:00,799 --> 00:26:02,799
because again we needed systems to be

751
00:26:02,799 --> 00:26:04,320
compatible with

752
00:26:04,320 --> 00:26:07,200
windows nt

753
00:26:08,159 --> 00:26:09,919
if you don't have windows nt you do not

754
00:26:09,919 --> 00:26:12,720
need authenticated users but also do not

755
00:26:12,720 --> 00:26:14,240
just remove it

756
00:26:14,240 --> 00:26:16,480
do not just remove active do not just

757
00:26:16,480 --> 00:26:17,840
remove authenticated users from this

758
00:26:17,840 --> 00:26:19,840
group because you don't see a reason why

759
00:26:19,840 --> 00:26:20,799
um

760
00:26:20,799 --> 00:26:23,039
i'm gonna tell two stories here one for

761
00:26:23,039 --> 00:26:25,760
the most part i see

762
00:26:25,760 --> 00:26:29,200
that people assume so people either

763
00:26:29,200 --> 00:26:30,720
assume you can read everything in active

764
00:26:30,720 --> 00:26:33,279
directory or no one can read anything um

765
00:26:33,279 --> 00:26:34,799
so in that other campaign no one can

766
00:26:34,799 --> 00:26:36,000
read anything

767
00:26:36,000 --> 00:26:37,679
i will see people create service

768
00:26:37,679 --> 00:26:38,480
accounts

769
00:26:38,480 --> 00:26:41,360
for ldap binds with domain admin rights

770
00:26:41,360 --> 00:26:43,039
because they assume

771
00:26:43,039 --> 00:26:44,640
who but domain admins would be able to

772
00:26:44,640 --> 00:26:47,760
see all of my objects and my password

773
00:26:47,760 --> 00:26:51,840
who what account but now for if you have

774
00:26:51,840 --> 00:26:55,039
your domain set up this way by default

775
00:26:55,039 --> 00:26:57,679
you do not need to put domain admins

776
00:26:57,679 --> 00:27:01,039
your your ldap account in ldap bind

777
00:27:01,039 --> 00:27:03,200
accounts in um

778
00:27:03,200 --> 00:27:04,960
you don't have any domain users would do

779
00:27:04,960 --> 00:27:06,640
it technically no group would do it

780
00:27:06,640 --> 00:27:09,120
because it's just authenticated users

781
00:27:09,120 --> 00:27:12,240
so um yeah people are either can't oh

782
00:27:12,240 --> 00:27:13,600
well i don't i'm just going to put them

783
00:27:13,600 --> 00:27:15,600
in domain users because

784
00:27:15,600 --> 00:27:16,320
well

785
00:27:16,320 --> 00:27:17,520
or i'm going to put them intelligent

786
00:27:17,520 --> 00:27:18,880
admins because obviously this is an

787
00:27:18,880 --> 00:27:20,559
elevated service account

788
00:27:20,559 --> 00:27:23,600
um so this group is why

789
00:27:23,600 --> 00:27:27,679
any user can be used as an ldap bind

790
00:27:27,679 --> 00:27:28,720
account

791
00:27:28,720 --> 00:27:29,090
um

792
00:27:29,090 --> 00:27:30,880
[Music]

793
00:27:30,880 --> 00:27:31,919
i

794
00:27:31,919 --> 00:27:34,799
also want to point out this is i'm

795
00:27:34,799 --> 00:27:37,039
we're only really talking about the

796
00:27:37,039 --> 00:27:39,120
user's um

797
00:27:39,120 --> 00:27:42,240
user object here authenticated users is

798
00:27:42,240 --> 00:27:44,159
separately graded in full read on every

799
00:27:44,159 --> 00:27:46,000
group object not talking about breaking

800
00:27:46,000 --> 00:27:48,320
that right now this is a bigger

801
00:27:48,320 --> 00:27:50,640
problem so

802
00:27:50,640 --> 00:27:52,799
how would i do this how would you remove

803
00:27:52,799 --> 00:27:53,600
this

804
00:27:53,600 --> 00:27:55,279
like i said do

805
00:27:55,279 --> 00:27:56,320
not

806
00:27:56,320 --> 00:27:58,159
just delete it and leave this group

807
00:27:58,159 --> 00:28:00,799
empty um there's a reason

808
00:28:00,799 --> 00:28:01,600
that

809
00:28:01,600 --> 00:28:03,840
yes you are using this you are taking

810
00:28:03,840 --> 00:28:05,279
advantage of this feature for the most

811
00:28:05,279 --> 00:28:07,840
part so what i like to do

812
00:28:07,840 --> 00:28:09,679
is remove authenticated users and add

813
00:28:09,679 --> 00:28:11,760
domain computers and domain users at

814
00:28:11,760 --> 00:28:13,440
first that is still

815
00:28:13,440 --> 00:28:14,399
much

816
00:28:14,399 --> 00:28:15,360
better

817
00:28:15,360 --> 00:28:18,320
because that means if

818
00:28:18,480 --> 00:28:20,080
you're you're you're

819
00:28:20,080 --> 00:28:21,360
you're not having guest accounts you're

820
00:28:21,360 --> 00:28:22,960
you're you're toning it down a little

821
00:28:22,960 --> 00:28:26,080
bit now secondary

822
00:28:26,080 --> 00:28:28,159
go get a list of everything that should

823
00:28:28,159 --> 00:28:30,559
be running a sql service account or in

824
00:28:30,559 --> 00:28:32,399
all that fund now unfortunately you

825
00:28:32,399 --> 00:28:33,440
probably don't have a good asset

826
00:28:33,440 --> 00:28:35,520
inventory so your admin is not going to

827
00:28:35,520 --> 00:28:37,039
even give you all of these so this is

828
00:28:37,039 --> 00:28:38,720
why i do this possibly so you set up an

829
00:28:38,720 --> 00:28:40,960
account called like

830
00:28:40,960 --> 00:28:43,440
allow that find or something now there

831
00:28:43,440 --> 00:28:45,360
there are better delegated ways to do

832
00:28:45,360 --> 00:28:48,480
this but for now even just having five

833
00:28:48,480 --> 00:28:51,760
six counts in this 312k here i'm fine

834
00:28:51,760 --> 00:28:53,440
so

835
00:28:53,440 --> 00:28:56,799
you get you you get these this list you

836
00:28:56,799 --> 00:28:59,039
add those what i like to do slowly

837
00:28:59,039 --> 00:29:00,399
because you you have a lot of groups in

838
00:29:00,399 --> 00:29:01,360
your domain

839
00:29:01,360 --> 00:29:05,120
is okay remove domain computers

840
00:29:05,120 --> 00:29:06,720
and maybe you have another computer's

841
00:29:06,720 --> 00:29:08,960
group like maybe you have a bunch of

842
00:29:08,960 --> 00:29:10,240
sites around the world and you have your

843
00:29:10,240 --> 00:29:12,000
users grouped up into different sites

844
00:29:12,000 --> 00:29:13,919
you can slowly remove those

845
00:29:13,919 --> 00:29:16,159
and i like to break one or two things at

846
00:29:16,159 --> 00:29:18,480
a time so you know what broke if you

847
00:29:18,480 --> 00:29:20,159
break this too quickly

848
00:29:20,159 --> 00:29:21,840
your management is just going to say hey

849
00:29:21,840 --> 00:29:23,600
stop you don't need to do this do it

850
00:29:23,600 --> 00:29:25,600
slowly slowly pair it down and there's

851
00:29:25,600 --> 00:29:27,600
someone's this is what you call the

852
00:29:27,600 --> 00:29:30,159
screen test okay you all are you may not

853
00:29:30,159 --> 00:29:32,320
have imagined context but you everyone

854
00:29:32,320 --> 00:29:35,120
here has probably done a screen test

855
00:29:35,120 --> 00:29:36,720
what's this computer doing i have no

856
00:29:36,720 --> 00:29:38,640
idea let me unplug let me unplug the

857
00:29:38,640 --> 00:29:42,080
nick and see who screams

858
00:29:42,159 --> 00:29:44,240
this vm it doesn't have an owner it's

859
00:29:44,240 --> 00:29:46,799
been running for 16 years with a bunch

860
00:29:46,799 --> 00:29:48,799
of uptime let me just disconnect from it

861
00:29:48,799 --> 00:29:50,640
we've all done screen tests it is

862
00:29:50,640 --> 00:29:53,679
unfortunate it is like the um it's like

863
00:29:53,679 --> 00:29:56,880
the fire drill of like asset inventories

864
00:29:56,880 --> 00:29:58,799
it's like who owns this well if someone

865
00:29:58,799 --> 00:30:01,120
cares enough they'll tell me so

866
00:30:01,120 --> 00:30:04,080
that this is a screen test unfortunately

867
00:30:04,080 --> 00:30:05,440
there are ways if you have good

868
00:30:05,440 --> 00:30:07,760
monitoring to find all of this it is not

869
00:30:07,760 --> 00:30:11,440
easy it is just easier trust me

870
00:30:11,440 --> 00:30:13,919
to do it slowly you got to communicate

871
00:30:13,919 --> 00:30:15,760
to your users i'm not on your change

872
00:30:15,760 --> 00:30:17,440
advisory board i don't fully care how

873
00:30:17,440 --> 00:30:19,520
you do it but they will tell you you got

874
00:30:19,520 --> 00:30:22,639
to communicate to your users

875
00:30:24,990 --> 00:30:28,089
[Music]

876
00:30:30,750 --> 00:30:33,910
[Music]

877
00:30:34,240 --> 00:30:36,640
the different ways to discover and

878
00:30:36,640 --> 00:30:39,120
how to create the proper delegation but

879
00:30:39,120 --> 00:30:42,080
slowly swap it out as you find something

880
00:30:42,080 --> 00:30:44,080
add it into that other group do it do it

881
00:30:44,080 --> 00:30:47,039
slowly do it slowly um

882
00:30:47,039 --> 00:30:48,840
and this is pretty easy to

883
00:30:48,840 --> 00:30:51,039
revert um

884
00:30:51,039 --> 00:30:53,039
if you have a large domain if you're

885
00:30:53,039 --> 00:30:54,960
reverting this revert it on the most

886
00:30:54,960 --> 00:30:56,799
local dimension folder so it gets fixed

887
00:30:56,799 --> 00:30:59,200
quickly um so you don't have four sinks

888
00:30:59,200 --> 00:31:01,519
but yeah i mean those are again that's

889
00:31:01,519 --> 00:31:04,080
just fun administrative stuff so um i've

890
00:31:04,080 --> 00:31:05,679
talked about

891
00:31:05,679 --> 00:31:09,120
bloodhound a bit um

892
00:31:09,120 --> 00:31:10,880
this is another this isn't actually an

893
00:31:10,880 --> 00:31:13,120
active directory change this is more

894
00:31:13,120 --> 00:31:14,559
this is a change on your endpoints it

895
00:31:14,559 --> 00:31:16,799
connects to active directory but

896
00:31:16,799 --> 00:31:18,960
by default your

897
00:31:18,960 --> 00:31:21,200
everyone authenticated users can

898
00:31:21,200 --> 00:31:24,720
enumerate network sessions to everything

899
00:31:24,720 --> 00:31:26,720
okay

900
00:31:26,720 --> 00:31:29,200
why does someone in hr need to know who

901
00:31:29,200 --> 00:31:31,840
is connected to like who has a file

902
00:31:31,840 --> 00:31:34,960
share weapon they don't they don't

903
00:31:34,960 --> 00:31:36,960
so um there is

904
00:31:36,960 --> 00:31:39,440
this is a fairly manual process but

905
00:31:39,440 --> 00:31:41,679
there is a powershell script down there

906
00:31:41,679 --> 00:31:44,880
um to look up next see netflies but if

907
00:31:44,880 --> 00:31:45,060
there's

908
00:31:45,060 --> 00:31:46,960
[Music]

909
00:31:46,960 --> 00:31:48,559
so run this on your domain controllers

910
00:31:48,559 --> 00:31:50,320
bare minimum and again

911
00:31:50,320 --> 00:31:52,640
do it slowly test it on one level all

912
00:31:52,640 --> 00:31:54,559
that stuff don't don't have freezing

913
00:31:54,559 --> 00:31:56,320
prod but if you do

914
00:31:56,320 --> 00:31:58,720
make sure you're ready to revert it

915
00:31:58,720 --> 00:32:01,720
um

916
00:32:02,000 --> 00:32:04,559
[Music]

917
00:32:04,559 --> 00:32:06,399
what you would do though is you would

918
00:32:06,399 --> 00:32:08,880
run this on your you would run this once

919
00:32:08,880 --> 00:32:10,799
on like windows 10 machine but then

920
00:32:10,799 --> 00:32:12,640
you'd export the reg key and import it

921
00:32:12,640 --> 00:32:15,120
into your policy or just create

922
00:32:15,120 --> 00:32:18,720
attitudinal news what i will say is that

923
00:32:18,720 --> 00:32:20,640
bloodhound is super stinky and i'm

924
00:32:20,640 --> 00:32:23,279
trying to find every single way to

925
00:32:23,279 --> 00:32:26,480
catch it um anyone here drops i'm sorry

926
00:32:26,480 --> 00:32:28,720
i really want to be here guys harder

927
00:32:28,720 --> 00:32:29,760
anyone

928
00:32:29,760 --> 00:32:32,559
this should be my job but unfortunately

929
00:32:32,559 --> 00:32:34,159
active directory just makes things too

930
00:32:34,159 --> 00:32:35,279
easy for

931
00:32:35,279 --> 00:32:37,600
the attackers right now but this will

932
00:32:37,600 --> 00:32:38,880
get rid of

933
00:32:38,880 --> 00:32:42,320
one of the major ways that enumeration

934
00:32:42,320 --> 00:32:43,760
of

935
00:32:43,760 --> 00:32:46,640
accounts accessing shares um

936
00:32:46,640 --> 00:32:49,200
cisco all sorts of things so

937
00:32:49,200 --> 00:32:51,440
um

938
00:32:52,000 --> 00:32:54,240
password policies

939
00:32:54,240 --> 00:32:56,760
this was a change in

940
00:32:56,760 --> 00:33:00,080
2008 i believe um

941
00:33:00,080 --> 00:33:01,840
using fine-grained password policies the

942
00:33:01,840 --> 00:33:03,919
way that password policies legacy were

943
00:33:03,919 --> 00:33:05,360
set up um

944
00:33:05,360 --> 00:33:06,960
again i'm not finding all these things

945
00:33:06,960 --> 00:33:09,679
for you gpo i'm assuming people know if

946
00:33:09,679 --> 00:33:10,559
not

947
00:33:10,559 --> 00:33:12,240
have a lot of reading it's just fun to

948
00:33:12,240 --> 00:33:13,519
me it may not be

949
00:33:13,519 --> 00:33:16,159
but in about 2008 findering password

950
00:33:16,159 --> 00:33:18,159
policies became a thing in 2012 there's

951
00:33:18,159 --> 00:33:19,679
a gui to manage it

952
00:33:19,679 --> 00:33:22,000
um john install a third-party tool to

953
00:33:22,000 --> 00:33:23,919
manage it don't start weird on your

954
00:33:23,919 --> 00:33:25,840
domain controllers please use the

955
00:33:25,840 --> 00:33:27,679
microsoft tool that you haven't seen

956
00:33:27,679 --> 00:33:28,640
involved

957
00:33:28,640 --> 00:33:30,159
um

958
00:33:30,159 --> 00:33:32,000
there almost needs to be like a road map

959
00:33:32,000 --> 00:33:33,840
of like i'm sure someone has it needs to

960
00:33:33,840 --> 00:33:34,960
be like a

961
00:33:34,960 --> 00:33:36,640
road map of when certain security

962
00:33:36,640 --> 00:33:38,399
features were installed based on you

963
00:33:38,399 --> 00:33:41,519
know so for example

964
00:33:41,519 --> 00:33:44,399
fine-grained password policies at pvps

965
00:33:44,399 --> 00:33:46,559
they're also called um

966
00:33:46,559 --> 00:33:48,880
security office um this is how you would

967
00:33:48,880 --> 00:33:51,519
set password policies now in the past

968
00:33:51,519 --> 00:33:53,360
you used the default domain controller

969
00:33:53,360 --> 00:33:57,519
policy the default domain policy um

970
00:33:57,519 --> 00:33:59,440
but that meant you had one password

971
00:33:59,440 --> 00:34:01,440
policy so

972
00:34:01,440 --> 00:34:03,279
moving away from my main subject here

973
00:34:03,279 --> 00:34:06,880
one of the beauties of fgpps or psos

974
00:34:06,880 --> 00:34:10,560
um is that you can

975
00:34:10,560 --> 00:34:12,879
you can say service accounts you have 25

976
00:34:12,879 --> 00:34:14,560
character passwords and change this off

977
00:34:14,560 --> 00:34:16,639
and have stricter lockout but your

978
00:34:16,639 --> 00:34:18,480
normal user population can have a 12

979
00:34:18,480 --> 00:34:20,000
character password you can set these

980
00:34:20,000 --> 00:34:22,079
things more fine you could not do that

981
00:34:22,079 --> 00:34:23,359
even if you thought you were doing it

982
00:34:23,359 --> 00:34:26,879
with your policy it was not working um

983
00:34:26,879 --> 00:34:28,719
my because you could only really have

984
00:34:28,719 --> 00:34:29,599
one

985
00:34:29,599 --> 00:34:32,480
the beauty for my actual discoverability

986
00:34:32,480 --> 00:34:35,119
talk here is that psos are only viewable

987
00:34:35,119 --> 00:34:36,879
to users who are applied to that

988
00:34:36,879 --> 00:34:38,719
password security object

989
00:34:38,719 --> 00:34:39,760
so

990
00:34:39,760 --> 00:34:41,520
um you might think that's not that big a

991
00:34:41,520 --> 00:34:42,560
deal

992
00:34:42,560 --> 00:34:44,560
actually though i mean

993
00:34:44,560 --> 00:34:45,839
it helps

994
00:34:45,839 --> 00:34:47,918
if you know that service accounts have

995
00:34:47,918 --> 00:34:50,000
25 character passwords well actually

996
00:34:50,000 --> 00:34:51,679
that may scare an attacker away that

997
00:34:51,679 --> 00:34:53,839
actually may be a good thing to expose

998
00:34:53,839 --> 00:34:55,918
but if they can see that maybe you even

999
00:34:55,918 --> 00:34:57,440
have something that's stricter that only

1000
00:34:57,440 --> 00:34:58,320
has a

1001
00:34:58,320 --> 00:35:00,160
non-stricter looser that only has eight

1002
00:35:00,160 --> 00:35:02,400
whatever they can use that information

1003
00:35:02,400 --> 00:35:04,079
you just don't want to give it

1004
00:35:04,079 --> 00:35:06,320
you don't want to give legit information

1005
00:35:06,320 --> 00:35:07,520
to your

1006
00:35:07,520 --> 00:35:08,880
um

1007
00:35:08,880 --> 00:35:11,359
to attackers whenever possible hey if

1008
00:35:11,359 --> 00:35:13,119
you wanted to create like a honey pso

1009
00:35:13,119 --> 00:35:17,560
here and tricked them into 175

1010
00:35:19,900 --> 00:35:22,480
[Music]

1011
00:35:22,480 --> 00:35:25,119
weird things and i don't think but

1012
00:35:25,119 --> 00:35:26,160
um

1013
00:35:26,160 --> 00:35:28,240
yeah let's do one more thing again one

1014
00:35:28,240 --> 00:35:29,119
of the

1015
00:35:29,119 --> 00:35:31,520
techniques there on the

1016
00:35:31,520 --> 00:35:34,960
minor framework in

1017
00:35:34,960 --> 00:35:35,839
so

1018
00:35:35,839 --> 00:35:37,920
under the

1019
00:35:37,920 --> 00:35:41,200
discovery technique password policy

1020
00:35:41,200 --> 00:35:42,160
um

1021
00:35:42,160 --> 00:35:44,720
so i'm back to this slide but i'm not

1022
00:35:44,720 --> 00:35:47,920
privileged to count opsec i

1023
00:35:47,920 --> 00:35:50,240
um

1024
00:35:50,480 --> 00:35:53,200
privileged accounts so like previously

1025
00:35:53,200 --> 00:35:54,560
microsoft would call these like tier

1026
00:35:54,560 --> 00:35:57,760
zero but anything that is used to

1027
00:35:57,760 --> 00:35:59,599
administer your domain

1028
00:35:59,599 --> 00:36:00,400
um

1029
00:36:00,400 --> 00:36:02,400
figure out ways to hide it honestly so

1030
00:36:02,400 --> 00:36:05,359
what i what i would do is create a

1031
00:36:05,359 --> 00:36:06,640
privileged accounting group

1032
00:36:06,640 --> 00:36:08,160
administrative i actually hate word

1033
00:36:08,160 --> 00:36:09,680
privilege because i always think it

1034
00:36:09,680 --> 00:36:12,720
needs to be earlier in the word so i

1035
00:36:12,720 --> 00:36:14,320
tend to use administrative instead of

1036
00:36:14,320 --> 00:36:16,000
privilege just

1037
00:36:16,000 --> 00:36:18,400
so but that has nothing to do with not

1038
00:36:18,400 --> 00:36:19,599
only that

1039
00:36:19,599 --> 00:36:22,400
um but create a special

1040
00:36:22,400 --> 00:36:24,640
group for your domain admins and for

1041
00:36:24,640 --> 00:36:27,599
things like that where you you have less

1042
00:36:27,599 --> 00:36:29,920
privileges um on there

1043
00:36:29,920 --> 00:36:32,320
test test your accounts there

1044
00:36:32,320 --> 00:36:33,200
um

1045
00:36:33,200 --> 00:36:35,040
so that again in fact you can't do great

1046
00:36:35,040 --> 00:36:37,599
things there is a

1047
00:36:37,599 --> 00:36:39,839
cool tool called offline i did not get

1048
00:36:39,839 --> 00:36:41,440
any money for it they are actually super

1049
00:36:41,440 --> 00:36:44,640
cheap um so this is i'm not showing it's

1050
00:36:44,640 --> 00:36:47,040
like 45 a user for perpetual license

1051
00:36:47,040 --> 00:36:49,680
clock light is an mfa tool

1052
00:36:49,680 --> 00:36:51,680
that essentially is a schema update to

1053
00:36:51,680 --> 00:36:53,760
active directory that allows it to

1054
00:36:53,760 --> 00:36:54,670
support um

1055
00:36:54,670 --> 00:36:56,079
[Music]

1056
00:36:56,079 --> 00:36:58,800
both tokens not oh tokens and then other

1057
00:36:58,800 --> 00:37:01,280
otps so you can use the ub key but not

1058
00:37:01,280 --> 00:37:03,280
in fighter 2 i can get on to all those

1059
00:37:03,280 --> 00:37:04,960
logistics but what is really cool about

1060
00:37:04,960 --> 00:37:06,880
offline is that

1061
00:37:06,880 --> 00:37:08,480
you would you wouldn't put any of your

1062
00:37:08,480 --> 00:37:11,280
users into domain admins it dynamically

1063
00:37:11,280 --> 00:37:14,000
adds them to that group by sid

1064
00:37:14,000 --> 00:37:17,119
only when you are um only when you plug

1065
00:37:17,119 --> 00:37:19,200
in with your yubikey so it's another one

1066
00:37:19,200 --> 00:37:20,960
this is kind of falling in that security

1067
00:37:20,960 --> 00:37:22,320
lineup security what i really liked

1068
00:37:22,320 --> 00:37:24,640
there though is attackers your domain

1069
00:37:24,640 --> 00:37:26,960
admins and they don't wait

1070
00:37:26,960 --> 00:37:28,960
there's none except for their default

1071
00:37:28,960 --> 00:37:31,599
domain admin and their their break glass

1072
00:37:31,599 --> 00:37:32,480
account

1073
00:37:32,480 --> 00:37:33,359
what

1074
00:37:33,359 --> 00:37:35,359
and then so i love it because it's one

1075
00:37:35,359 --> 00:37:36,480
of those

1076
00:37:36,480 --> 00:37:38,960
it's there they can still use it but the

1077
00:37:38,960 --> 00:37:40,640
attackers if they don't know what

1078
00:37:40,640 --> 00:37:42,880
offline is they just immediately go what

1079
00:37:42,880 --> 00:37:45,200
and then they they're trying to target

1080
00:37:45,200 --> 00:37:47,040
your brake class you know you have your

1081
00:37:47,040 --> 00:37:48,960
brake glass account i don't know how

1082
00:37:48,960 --> 00:37:51,359
many people follow the office or watch

1083
00:37:51,359 --> 00:37:53,280
the office as closely as me but i think

1084
00:37:53,280 --> 00:37:54,480
that

1085
00:37:54,480 --> 00:37:56,320
your domain admin specifically your

1086
00:37:56,320 --> 00:37:58,640
break glass account should almost um

1087
00:37:58,640 --> 00:38:01,440
generate if you know wolf is

1088
00:38:01,440 --> 00:38:03,520
um

1089
00:38:03,520 --> 00:38:05,599
in the office it should generate that

1090
00:38:05,599 --> 00:38:07,359
many alerts for you you should get a fax

1091
00:38:07,359 --> 00:38:08,880
and a text and someone can show up to

1092
00:38:08,880 --> 00:38:11,440
your front door and you should get like

1093
00:38:11,440 --> 00:38:13,680
every way of notifying you should scream

1094
00:38:13,680 --> 00:38:15,440
at you every time someone logs in as a

1095
00:38:15,440 --> 00:38:18,480
domain admin especially your breakbooks

1096
00:38:18,480 --> 00:38:20,640
because that just should not happen very

1097
00:38:20,640 --> 00:38:23,119
often so that's one of that's

1098
00:38:23,119 --> 00:38:25,359
that's there's a lot of ways so this

1099
00:38:25,359 --> 00:38:27,359
could mean i could not

1100
00:38:27,359 --> 00:38:29,920
have those slides i tried right here i

1101
00:38:29,920 --> 00:38:32,480
could not have a size of

1102
00:38:32,480 --> 00:38:35,760
covering it verbally there are so many

1103
00:38:35,760 --> 00:38:37,520
just things that you should be

1104
00:38:37,520 --> 00:38:39,680
considering here with your privileged

1105
00:38:39,680 --> 00:38:40,800
accounts

1106
00:38:40,800 --> 00:38:44,560
how to make them less discoverable um

1107
00:38:44,560 --> 00:38:47,520
honey that means rename your do not use

1108
00:38:47,520 --> 00:38:49,359
your default administrator account don't

1109
00:38:49,359 --> 00:38:51,359
stop using it you're probably using it

1110
00:38:51,359 --> 00:38:54,160
someone is i i worked at it this was

1111
00:38:54,160 --> 00:38:57,359
ada's names to go now but i was at a

1112
00:38:57,359 --> 00:38:58,400
company

1113
00:38:58,400 --> 00:39:00,160
large man a large automotive

1114
00:39:00,160 --> 00:39:01,520
manufacturer

1115
00:39:01,520 --> 00:39:03,760
that um

1116
00:39:03,760 --> 00:39:05,839
their default admin there were so many

1117
00:39:05,839 --> 00:39:08,160
logs and logins to their default admin

1118
00:39:08,160 --> 00:39:10,320
so they're like you can't reset it like

1119
00:39:10,320 --> 00:39:11,680
you can't reset it's password will be

1120
00:39:11,680 --> 00:39:14,000
tried everyone's using it so what i did

1121
00:39:14,000 --> 00:39:16,720
is ask every single person i met hey i

1122
00:39:16,720 --> 00:39:18,320
forgot that admin password could you

1123
00:39:18,320 --> 00:39:21,040
give it to me and i listed every single

1124
00:39:21,040 --> 00:39:22,640
like looked at their badge and took a

1125
00:39:22,640 --> 00:39:24,079
note of every single person in the

1126
00:39:24,079 --> 00:39:25,839
company who

1127
00:39:25,839 --> 00:39:27,280
told me the admin account it was like

1128
00:39:27,280 --> 00:39:29,280
160 people by the end

1129
00:39:29,280 --> 00:39:31,280
not kidding but then i had a list and

1130
00:39:31,280 --> 00:39:33,119
i'm like so fun this is the problem but

1131
00:39:33,119 --> 00:39:34,800
two now i know who's using it so we can

1132
00:39:34,800 --> 00:39:35,920
work on this

1133
00:39:35,920 --> 00:39:38,160
so what i'm saying is if you have it

1134
00:39:38,160 --> 00:39:39,920
enabled people are using your admin

1135
00:39:39,920 --> 00:39:41,520
account

1136
00:39:41,520 --> 00:39:43,760
so this again i hate security by

1137
00:39:43,760 --> 00:39:45,680
obscurity but let's use what we have for

1138
00:39:45,680 --> 00:39:47,359
us what i love to do with the

1139
00:39:47,359 --> 00:39:49,839
administrator account is rename it to

1140
00:39:49,839 --> 00:39:51,040
something

1141
00:39:51,040 --> 00:39:53,200
rename it to a user rename it to john

1142
00:39:53,200 --> 00:39:54,400
doe or

1143
00:39:54,400 --> 00:39:57,280
generate crazy names there yeah

1144
00:39:57,280 --> 00:39:59,119
wall of art states and come up with some

1145
00:39:59,119 --> 00:40:02,000
crazy names and and so attackers can

1146
00:40:02,000 --> 00:40:03,119
still find it because there is a

1147
00:40:03,119 --> 00:40:05,440
built-in sit but

1148
00:40:05,440 --> 00:40:06,960
create another account that no

1149
00:40:06,960 --> 00:40:08,839
privileges called

1150
00:40:08,839 --> 00:40:11,920
administrator give it admin count one

1151
00:40:11,920 --> 00:40:12,720
and

1152
00:40:12,720 --> 00:40:15,040
add it to that same policy that you have

1153
00:40:15,040 --> 00:40:17,040
to alert the hell out of you when

1154
00:40:17,040 --> 00:40:18,800
someone tries to log in now at first

1155
00:40:18,800 --> 00:40:20,160
you're gonna have to tune it because you

1156
00:40:20,160 --> 00:40:21,760
have things that are trying to log into

1157
00:40:21,760 --> 00:40:24,000
it but create a honey user that'd be a

1158
00:40:24,000 --> 00:40:26,319
cool way to find these things um

1159
00:40:26,319 --> 00:40:28,319
that's another upset i

1160
00:40:28,319 --> 00:40:30,800
there's a lot of ways but the key here

1161
00:40:30,800 --> 00:40:33,760
is try and hide your domain admins

1162
00:40:33,760 --> 00:40:36,240
if you are hiding them try to rename

1163
00:40:36,240 --> 00:40:38,000
them to something that's not obviously

1164
00:40:38,000 --> 00:40:38,880
like

1165
00:40:38,880 --> 00:40:41,440
domain admin hudson books don't do that

1166
00:40:41,440 --> 00:40:42,240
like

1167
00:40:42,240 --> 00:40:44,480
sure you can and i get you always have

1168
00:40:44,480 --> 00:40:46,319
to weigh like usability don't just give

1169
00:40:46,319 --> 00:40:48,480
them like numerical usernames because we

1170
00:40:48,480 --> 00:40:50,960
don't want it to be too complicated but

1171
00:40:50,960 --> 00:40:53,040
figure out a way that works within your

1172
00:40:53,040 --> 00:40:57,599
company to obfuscate your domain admins

1173
00:40:57,599 --> 00:40:58,960
so

1174
00:40:58,960 --> 00:41:00,240
um

1175
00:41:00,240 --> 00:41:03,119
default domain policy this is uh i i do

1176
00:41:03,119 --> 00:41:04,400
actually have to

1177
00:41:04,400 --> 00:41:06,560
have words on this one but

1178
00:41:06,560 --> 00:41:07,400
um

1179
00:41:07,400 --> 00:41:11,280
a couple things one do not rename your

1180
00:41:11,280 --> 00:41:12,960
people when you follow

1181
00:41:12,960 --> 00:41:15,040
don't do it don't make major changes to

1182
00:41:15,040 --> 00:41:17,280
this that is but

1183
00:41:17,280 --> 00:41:20,240
what i'm highlighting here is that

1184
00:41:20,240 --> 00:41:23,200
security filtering on all group policies

1185
00:41:23,200 --> 00:41:25,200
when you create them is set to

1186
00:41:25,200 --> 00:41:27,760
authenticated users which means that

1187
00:41:27,760 --> 00:41:28,960
all again we've talked about

1188
00:41:28,960 --> 00:41:30,560
authenticated users already that means

1189
00:41:30,560 --> 00:41:32,960
all authenticated users can read and

1190
00:41:32,960 --> 00:41:35,599
enumerate everything in your policies

1191
00:41:35,599 --> 00:41:37,520
which means

1192
00:41:37,520 --> 00:41:39,839
that attackers can see whatever good or

1193
00:41:39,839 --> 00:41:41,760
bad things you have in there they can

1194
00:41:41,760 --> 00:41:44,480
see maybe you have dedicated boxes that

1195
00:41:44,480 --> 00:41:46,400
have less print like

1196
00:41:46,400 --> 00:41:49,119
less hardly you know they could use this

1197
00:41:49,119 --> 00:41:51,040
for all sorts of things there is a i

1198
00:41:51,040 --> 00:41:51,760
mean

1199
00:41:51,760 --> 00:41:53,359
i do have a resource slide at the end

1200
00:41:53,359 --> 00:41:55,599
but there's a tool called uh grouper 2

1201
00:41:55,599 --> 00:41:58,160
by mike loss who actually built group

1202
00:41:58,160 --> 00:42:00,839
policy back in the day australian dude

1203
00:42:00,839 --> 00:42:03,200
um he made the product that eventually

1204
00:42:03,200 --> 00:42:07,280
became group policy but um

1205
00:42:07,280 --> 00:42:08,720
he

1206
00:42:08,720 --> 00:42:11,040
has a tool called grouper2 that goes and

1207
00:42:11,040 --> 00:42:13,280
pulls all your policy information and

1208
00:42:13,280 --> 00:42:15,520
finds all your misconfigurations

1209
00:42:15,520 --> 00:42:17,119
so

1210
00:42:17,119 --> 00:42:20,000
one of the biggest ways to fix this is

1211
00:42:20,000 --> 00:42:21,200
do not

1212
00:42:21,200 --> 00:42:22,880
keep authenticated users in there

1213
00:42:22,880 --> 00:42:25,280
authenticated users is given default

1214
00:42:25,280 --> 00:42:26,960
scope on group policy objects as you

1215
00:42:26,960 --> 00:42:28,640
create them

1216
00:42:28,640 --> 00:42:30,960
this is tricky because microsoft

1217
00:42:30,960 --> 00:42:32,800
actually in 2008 changed the way that

1218
00:42:32,800 --> 00:42:34,560
your policies are applied so you may

1219
00:42:34,560 --> 00:42:36,240
think i'm applying user settings when

1220
00:42:36,240 --> 00:42:38,079
you do a glimpse to a user oh you why

1221
00:42:38,079 --> 00:42:39,359
isn't it working

1222
00:42:39,359 --> 00:42:42,160
group policies are applied to

1223
00:42:42,160 --> 00:42:43,359
computers

1224
00:42:43,359 --> 00:42:45,599
they're the computers are what needs to

1225
00:42:45,599 --> 00:42:47,119
be in scope here users actually don't

1226
00:42:47,119 --> 00:42:49,760
need to read them um it's just how it's

1227
00:42:49,760 --> 00:42:51,520
applied trust me

1228
00:42:51,520 --> 00:42:52,880
um

1229
00:42:52,880 --> 00:42:53,599
so

1230
00:42:53,599 --> 00:42:56,400
domain computers as a scope is a good

1231
00:42:56,400 --> 00:42:58,640
quick fix here with so what i'm saying

1232
00:42:58,640 --> 00:43:00,800
is remove authenticated users and you

1233
00:43:00,800 --> 00:43:03,200
can without almost without breaking

1234
00:43:03,200 --> 00:43:05,119
anything you can add domain computers to

1235
00:43:05,119 --> 00:43:07,040
every one of your

1236
00:43:07,040 --> 00:43:08,720
your group policies unless you have a

1237
00:43:08,720 --> 00:43:10,240
loopback policy if you have a loopback

1238
00:43:10,240 --> 00:43:14,240
policy add domain users again but

1239
00:43:14,240 --> 00:43:16,800
but for the most part domain computers

1240
00:43:16,800 --> 00:43:18,720
go in your group calls you take good

1241
00:43:18,720 --> 00:43:21,760
quick fix now fortunately if your users

1242
00:43:21,760 --> 00:43:23,760
are admins and your attackers or admins

1243
00:43:23,760 --> 00:43:26,400
then they can run a system this still

1244
00:43:26,400 --> 00:43:29,680
gets rid of a lot of this um but but you

1245
00:43:29,680 --> 00:43:32,160
really should be scoping so that only

1246
00:43:32,160 --> 00:43:33,839
people who need to

1247
00:43:33,839 --> 00:43:36,480
only computers specifically or

1248
00:43:36,480 --> 00:43:38,720
users of loopback but

1249
00:43:38,720 --> 00:43:40,079
domain

1250
00:43:40,079 --> 00:43:41,839
domain computers good quick fix but you

1251
00:43:41,839 --> 00:43:43,280
should be scoping this down to just the

1252
00:43:43,280 --> 00:43:45,200
computers that need that policy

1253
00:43:45,200 --> 00:43:46,960
um

1254
00:43:46,960 --> 00:43:48,880
you have it just for hr computers or

1255
00:43:48,880 --> 00:43:51,440
just your jump boxes create

1256
00:43:51,440 --> 00:43:53,920
creators microsoft has ways to create

1257
00:43:53,920 --> 00:43:57,119
there there's already scripts for um for

1258
00:43:57,119 --> 00:43:58,480
like

1259
00:43:58,480 --> 00:43:59,839
what they call them but it's like shadow

1260
00:43:59,839 --> 00:44:00,720
groups

1261
00:44:00,720 --> 00:44:02,720
where you can map group to one of you

1262
00:44:02,720 --> 00:44:05,280
there's all sorts of cool stuff here but

1263
00:44:05,280 --> 00:44:06,960
the key is

1264
00:44:06,960 --> 00:44:08,960
go well i'm actually when i get to

1265
00:44:08,960 --> 00:44:10,240
resources i'm going to talk about group

1266
00:44:10,240 --> 00:44:12,960
or two of this one but

1267
00:44:12,960 --> 00:44:14,720
just just try and do it almost

1268
00:44:14,720 --> 00:44:16,560
immediately and remove all kind of users

1269
00:44:16,560 --> 00:44:18,960
and doing computers um oh i'm already

1270
00:44:18,960 --> 00:44:19,680
under

1271
00:44:19,680 --> 00:44:20,960
research so i'm going to talk about each

1272
00:44:20,960 --> 00:44:22,560
of these tools what they do

1273
00:44:22,560 --> 00:44:24,079
uh reading

1274
00:44:24,079 --> 00:44:25,839
there is so much reading you can do but

1275
00:44:25,839 --> 00:44:26,640
really

1276
00:44:26,640 --> 00:44:28,079
um

1277
00:44:28,079 --> 00:44:29,520
three of the biggest people that i

1278
00:44:29,520 --> 00:44:31,520
follow are um

1279
00:44:31,520 --> 00:44:35,599
ned pyle um pyrotech which is uh indeed

1280
00:44:35,599 --> 00:44:40,319
uh from that gap and android so but

1281
00:44:40,319 --> 00:44:42,400
this is where like don't attack yourself

1282
00:44:42,400 --> 00:44:44,640
first test these things

1283
00:44:44,640 --> 00:44:46,640
what if you think that you can't see

1284
00:44:46,640 --> 00:44:48,319
anything in an active directory test

1285
00:44:48,319 --> 00:44:50,240
these things look at this internals

1286
00:44:50,240 --> 00:44:51,520
microsoft tool

1287
00:44:51,520 --> 00:44:53,760
ad explorer just open it up and see what

1288
00:44:53,760 --> 00:44:56,240
your users can see by default just look

1289
00:44:56,240 --> 00:44:57,599
through your active directory see all

1290
00:44:57,599 --> 00:45:00,000
the attributes that are just exposed

1291
00:45:00,000 --> 00:45:02,319
um grouper two so

1292
00:45:02,319 --> 00:45:04,640
on top the discoverability here is crazy

1293
00:45:04,640 --> 00:45:07,040
and it'll show you stupid configurations

1294
00:45:07,040 --> 00:45:08,880
like if you're not using laps yet and

1295
00:45:08,880 --> 00:45:11,280
you're setting passwords and you have um

1296
00:45:11,280 --> 00:45:13,920
passwords decryptable in in group policy

1297
00:45:13,920 --> 00:45:15,440
it'll show you that fault that that

1298
00:45:15,440 --> 00:45:17,200
password if

1299
00:45:17,200 --> 00:45:19,200
i've seen some crazy things where like

1300
00:45:19,200 --> 00:45:22,240
someone is running an executable at

1301
00:45:22,240 --> 00:45:24,480
startup for every computer but then that

1302
00:45:24,480 --> 00:45:26,640
executable is

1303
00:45:26,640 --> 00:45:29,040
writable by the everyone group

1304
00:45:29,040 --> 00:45:31,359
so an attacker could

1305
00:45:31,359 --> 00:45:33,200
could change that executable and put a

1306
00:45:33,200 --> 00:45:35,040
malicious executable and it's already in

1307
00:45:35,040 --> 00:45:37,680
your they don't even have to do anything

1308
00:45:37,680 --> 00:45:40,079
really they just throw it melissa's

1309
00:45:40,079 --> 00:45:41,599
executable and you've already told it to

1310
00:45:41,599 --> 00:45:43,440
run so grouper 2 is great because it

1311
00:45:43,440 --> 00:45:46,960
will tell you every single thing that is

1312
00:45:46,960 --> 00:45:48,880
misconfigured in your policy

1313
00:45:48,880 --> 00:45:50,480
pin castle

1314
00:45:50,480 --> 00:45:52,560
everything i've talked about on paint

1315
00:45:52,560 --> 00:45:55,440
castle covered much better i did um it's

1316
00:45:55,440 --> 00:45:56,720
cool report

1317
00:45:56,720 --> 00:45:57,599
um

1318
00:45:57,599 --> 00:46:00,720
you can use so pink castle it

1319
00:46:00,720 --> 00:46:03,040
does a bunch of miscomparing it'll also

1320
00:46:03,040 --> 00:46:04,720
do kind of bloodhound light stuff that

1321
00:46:04,720 --> 00:46:06,480
will tell you some

1322
00:46:06,480 --> 00:46:07,440
like

1323
00:46:07,440 --> 00:46:10,640
face attack wave but bloodhound is the

1324
00:46:10,640 --> 00:46:12,319
okay if i wanted to get to the crown

1325
00:46:12,319 --> 00:46:13,839
jewels i want to get into a domain

1326
00:46:13,839 --> 00:46:17,040
controller what accounts have access to

1327
00:46:17,040 --> 00:46:19,040
something you know it shows you the

1328
00:46:19,040 --> 00:46:20,540
whole map so um

1329
00:46:20,540 --> 00:46:21,760
[Music]

1330
00:46:21,760 --> 00:46:24,640
use these three things audit get scared

1331
00:46:24,640 --> 00:46:27,119
get scared shitless about what you can

1332
00:46:27,119 --> 00:46:30,000
see and then this will motivate you

1333
00:46:30,000 --> 00:46:32,240
to actually fix some um

1334
00:46:32,240 --> 00:46:34,720
bloodhound enterprise and so i i threw a

1335
00:46:34,720 --> 00:46:36,079
little bit of shade towards spectre up

1336
00:46:36,079 --> 00:46:38,079
so i'm going to come back if you are on

1337
00:46:38,079 --> 00:46:39,760
the glue team though bloodhound

1338
00:46:39,760 --> 00:46:42,400
enterprise is not that expensive it runs

1339
00:46:42,400 --> 00:46:44,480
it means you don't have to run your own

1340
00:46:44,480 --> 00:46:46,960
neo4j and it can generate reports for

1341
00:46:46,960 --> 00:46:48,720
you bloodhound enterprise will save you

1342
00:46:48,720 --> 00:46:49,839
a lot of time and actually give you

1343
00:46:49,839 --> 00:46:51,680
executive reports until you have fixed

1344
00:46:51,680 --> 00:46:53,280
and stuff so

1345
00:46:53,280 --> 00:46:54,880
grouper 2

1346
00:46:54,880 --> 00:46:56,930
so

1347
00:46:56,930 --> 00:46:59,040
[Music]

1348
00:46:59,040 --> 00:47:00,640
they're not made for us

1349
00:47:00,640 --> 00:47:03,119
you have to kind of do some tweaking and

1350
00:47:03,119 --> 00:47:05,119
some squinting of your eyes to look and

1351
00:47:05,119 --> 00:47:07,680
see them through the lens that we need

1352
00:47:07,680 --> 00:47:09,920
pin castle absolutely it's made for

1353
00:47:09,920 --> 00:47:12,319
defenders um also they have papers and

1354
00:47:12,319 --> 00:47:14,480
throw them on because they're great but

1355
00:47:14,480 --> 00:47:15,450
yeah um

1356
00:47:15,450 --> 00:47:17,040
[Music]

1357
00:47:17,040 --> 00:47:18,400
uh

1358
00:47:18,400 --> 00:47:21,599
yeah that is it um i so

1359
00:47:21,599 --> 00:47:22,319
if

1360
00:47:22,319 --> 00:47:25,760
the best way to ask any questions um

1361
00:47:25,760 --> 00:47:27,760
i will not be doing questions or too

1362
00:47:27,760 --> 00:47:32,960
much you can find me drinking or um

1363
00:47:33,520 --> 00:47:36,640
i mean my handle is homework tech um

1364
00:47:36,640 --> 00:47:39,520
the world's greatest irony because i

1365
00:47:39,520 --> 00:47:42,160
now am allergic to gluten and i cannot

1366
00:47:42,160 --> 00:47:45,280
bring beer but i used to um so

1367
00:47:45,280 --> 00:47:48,640
um but i kind of made

1368
00:47:48,640 --> 00:47:51,200
the feel like the thing so

1369
00:47:51,200 --> 00:47:52,400
but um

1370
00:47:52,400 --> 00:47:54,319
all that to say that i

1371
00:47:54,319 --> 00:47:58,079
it's completely fine me i i will pop up

1372
00:47:58,079 --> 00:47:59,440
because i love to talk about these

1373
00:47:59,440 --> 00:48:00,720
things i'm just

1374
00:48:00,720 --> 00:48:03,839
no q a right now um but i will be

1375
00:48:03,839 --> 00:48:06,480
hopefully releasing a report

1376
00:48:06,480 --> 00:48:08,319
template that i've used in the past when

1377
00:48:08,319 --> 00:48:09,680
i was consulting

1378
00:48:09,680 --> 00:48:10,720
um

1379
00:48:10,720 --> 00:48:12,960
that you could use to essentially report

1380
00:48:12,960 --> 00:48:13,920
your

1381
00:48:13,920 --> 00:48:15,599
these findings to your

1382
00:48:15,599 --> 00:48:16,640
um

1383
00:48:16,640 --> 00:48:19,119
to your c-suite to your cso to your key

1384
00:48:19,119 --> 00:48:20,800
manager whoever it is

1385
00:48:20,800 --> 00:48:21,760
um

1386
00:48:21,760 --> 00:48:24,160
i haven't ready the only problem is that

1387
00:48:24,160 --> 00:48:27,599
i am locked out of my github because i

1388
00:48:27,599 --> 00:48:29,119
don't have my old email address or i

1389
00:48:29,119 --> 00:48:31,200
cannot figure out how to how to upload

1390
00:48:31,200 --> 00:48:33,680
it but when i fix that

1391
00:48:33,680 --> 00:48:35,920
there will be um these slides will be

1392
00:48:35,920 --> 00:48:38,480
available on my website ombretech.com

1393
00:48:38,480 --> 00:48:40,960
for clash talks and that template will

1394
00:48:40,960 --> 00:48:42,240
be there so

1395
00:48:42,240 --> 00:48:44,640
again thank you for all of you math kids

1396
00:48:44,640 --> 00:48:46,079
who thought active directory at nine in

1397
00:48:46,079 --> 00:48:48,079
the morning would be good idea but i

1398
00:48:48,079 --> 00:48:49,920
hope i informed you of

1399
00:48:49,920 --> 00:48:52,920
something

