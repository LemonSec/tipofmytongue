1
00:00:00,000 --> 00:00:06,029
good morning everybody this presentation

2
00:00:03,360 --> 00:00:10,200
is called the wizarding world of selinux

3
00:00:06,029 --> 00:00:12,059
and my name is Paul arnold and i am a

4
00:00:10,200 --> 00:00:14,459
cyber security engineer in the<font color="#E5E5E5"> defense</font>

5
00:00:12,059 --> 00:00:17,698
sector and<font color="#CCCCCC"> i'm here locally i live in</font>

6
00:00:14,460 --> 00:00:23,789
orlando<font color="#CCCCCC"> i've been working with onyx</font>

7
00:00:17,699 --> 00:00:25,619
since 1999 and i have experience with us

8
00:00:23,789 --> 00:00:29,820
<font color="#CCCCCC">colonics pretty intensely in the last</font>

9
00:00:25,619 --> 00:00:31,500
four or five years and before I get any

10
00:00:29,820 --> 00:00:33,210
further with this I'm going to just do

11
00:00:31,500 --> 00:00:34,500
this real quick only any opinions or

12
00:00:33,210 --> 00:00:37,770
views that are in here in this

13
00:00:34,500 --> 00:00:40,559
presentation and this talk are my own

14
00:00:37,770 --> 00:00:42,989
and they don't express views or opinions

15
00:00:40,559 --> 00:00:46,349
of any of<font color="#E5E5E5"> my past employers or ucf or</font>

16
00:00:42,989 --> 00:00:48,269
any of<font color="#E5E5E5"> that nature all right so the</font>

17
00:00:46,350 --> 00:00:51,000
reason I'm<font color="#CCCCCC"> doing this talk is because</font>

18
00:00:48,270 --> 00:00:53,610
selinux is not magic and that's what I

19
00:00:51,000 --> 00:00:55,199
want<font color="#CCCCCC"> to try to</font><font color="#E5E5E5"> tell people I want to get</font>

20
00:00:53,610 --> 00:00:57,239
<font color="#E5E5E5">people at least to understand what it</font><font color="#CCCCCC"> is</font>

21
00:00:55,199 --> 00:01:00,300
because I know a<font color="#E5E5E5"> lot of times it's just</font>

22
00:00:57,239 --> 00:01:01,169
disabled that's I've read<font color="#E5E5E5"> many things or</font>

23
00:01:00,300 --> 00:01:03,959
the first thing you want to do is

24
00:01:01,170 --> 00:01:06,000
disable it well i want at least have you

25
00:01:03,960 --> 00:01:08,070
all understand what you're doing when

26
00:01:06,000 --> 00:01:09,600
you disable it and hopefully stop a few

27
00:01:08,070 --> 00:01:11,189
people from disabling it because<font color="#CCCCCC"> your</font>

28
00:01:09,600 --> 00:01:13,619
disabling a lot of security features

29
00:01:11,189 --> 00:01:16,408
that are that are inherent to some of

30
00:01:13,619 --> 00:01:18,150
the policy here within so<font color="#E5E5E5"> i'm going</font><font color="#CCCCCC"> to</font>

31
00:01:16,409 --> 00:01:20,759
<font color="#E5E5E5">go over for kind of sections of this</font>

32
00:01:18,150 --> 00:01:22,229
presentation um the beginning<font color="#CCCCCC"> I have to</font>

33
00:01:20,759 --> 00:01:24,960
go over four terms because if I don't

34
00:01:22,229 --> 00:01:26,549
I'm going to lose a<font color="#CCCCCC"> lot of</font><font color="#E5E5E5"> people</font>

35
00:01:24,960 --> 00:01:27,750
because<font color="#E5E5E5"> there is some jargon in terms</font>

36
00:01:26,549 --> 00:01:30,810
that are involved with<font color="#E5E5E5"> those he'll NX</font>

37
00:01:27,750 --> 00:01:32,220
<font color="#E5E5E5">I'd pick some specifics that are just</font>

38
00:01:30,810 --> 00:01:34,619
going to help with this presentation to

39
00:01:32,220 --> 00:01:37,590
really kind<font color="#E5E5E5"> of understand I'll cover</font>

40
00:01:34,619 --> 00:01:41,220
what it is and where it<font color="#E5E5E5"> came from and</font>

41
00:01:37,590 --> 00:01:42,659
then i will<font color="#E5E5E5"> ever were dealing with su</font>

42
00:01:41,220 --> 00:01:46,399
linux and some of the tools you can do

43
00:01:42,659 --> 00:01:49,110
<font color="#E5E5E5">to tools you can use to troubleshoot or</font>

44
00:01:46,399 --> 00:01:51,350
modify things and find out what's<font color="#CCCCCC"> going</font>

45
00:01:49,110 --> 00:01:53,970
on instead of just outright disabling it

46
00:01:51,350 --> 00:01:56,579
and then<font color="#E5E5E5"> i have</font><font color="#CCCCCC"> a short demo at the end</font>

47
00:01:53,970 --> 00:01:58,798
that shows some<font color="#CCCCCC"> of</font><font color="#E5E5E5"> the differences with</font>

48
00:01:56,579 --> 00:02:01,649
a system that<font color="#E5E5E5"> has a su linux enforcing</font>

49
00:01:58,799 --> 00:02:02,820
on<font color="#CCCCCC"> versus it off and the security holes</font>

50
00:02:01,649 --> 00:02:05,860
that you've really opened up by turning

51
00:02:02,820 --> 00:02:07,270
something off all right

52
00:02:05,860 --> 00:02:10,840
so does anyone<font color="#E5E5E5"> know what movie</font><font color="#CCCCCC"> this is</font>

53
00:02:07,270 --> 00:02:12,579
from may be hard to see hackers yes it

54
00:02:10,840 --> 00:02:15,250
is hackers and i'm sad to say this is

55
00:02:12,580 --> 00:02:18,640
<font color="#CCCCCC">not the first hackers reference in this</font>

56
00:02:15,250 --> 00:02:22,630
besides weekend so<font color="#CCCCCC"> alright what does</font>

57
00:02:18,640 --> 00:02:23,799
have to do with us<font color="#E5E5E5"> sealants well ok it's</font>

58
00:02:22,630 --> 00:02:24,880
a bit of stretch<font color="#CCCCCC"> i just really want to</font>

59
00:02:23,800 --> 00:02:28,660
<font color="#E5E5E5">put a</font><font color="#CCCCCC"> hacker's reference in this</font>

60
00:02:24,880 --> 00:02:29,890
presentation but<font color="#E5E5E5"> uh so there's a book</font>

61
00:02:28,660 --> 00:02:31,000
that's being passed there that's called

62
00:02:29,890 --> 00:02:33,760
the orange book if anyone's familiar

63
00:02:31,000 --> 00:02:36,130
with the rainbow series books from the

64
00:02:33,760 --> 00:02:37,929
<font color="#E5E5E5">80s it's</font><font color="#CCCCCC"> kind of where we got the</font>

65
00:02:36,130 --> 00:02:40,630
definition as we know them today of what

66
00:02:37,930 --> 00:02:42,459
is in types of access control that<font color="#CCCCCC"> I'm</font>

67
00:02:40,630 --> 00:02:44,230
<font color="#E5E5E5">going to cover real quickly which is</font>

68
00:02:42,459 --> 00:02:48,070
discretionary access control and

69
00:02:44,230 --> 00:02:49,420
mandatory access control um and i'll

70
00:02:48,070 --> 00:02:50,980
start with discretionary because it's

71
00:02:49,420 --> 00:02:55,510
the more traditional one that you'll see

72
00:02:50,980 --> 00:02:59,620
on operating systems on this allows

73
00:02:55,510 --> 00:03:01,510
users to specify access control access

74
00:02:59,620 --> 00:03:03,820
controls over objects you know like

75
00:03:01,510 --> 00:03:07,299
files or directories or<font color="#E5E5E5"> whatnot at their</font>

76
00:03:03,820 --> 00:03:10,019
own discretion if they own them<font color="#CCCCCC"> so users</font>

77
00:03:07,300 --> 00:03:11,890
<font color="#CCCCCC">can make their own policy decisions and</font>

78
00:03:10,019 --> 00:03:15,220
when<font color="#E5E5E5"> that can be whether it's</font>

79
00:03:11,890 --> 00:03:16,690
intentional or accidental now you in

80
00:03:15,220 --> 00:03:18,790
contrast<font color="#E5E5E5"> you have mandatory access</font>

81
00:03:16,690 --> 00:03:22,540
control and<font color="#E5E5E5"> I'll do my best to make this</font>

82
00:03:18,790 --> 00:03:25,570
brief and understandable so it consists

83
00:03:22,540 --> 00:03:28,359
of a security policy that defines rules

84
00:03:25,570 --> 00:03:30,970
it's like a rule set over all subjects

85
00:03:28,360 --> 00:03:33,580
which<font color="#E5E5E5"> may be users or services something</font>

86
00:03:30,970 --> 00:03:36,370
that acts on information and<font color="#E5E5E5"> then you</font>

87
00:03:33,580 --> 00:03:38,739
have objects which be like which would

88
00:03:36,370 --> 00:03:41,590
be like files with store information and

89
00:03:38,739 --> 00:03:45,250
then that's enforced by<font color="#CCCCCC"> the kernel</font><font color="#E5E5E5"> and</font>

90
00:03:41,590 --> 00:03:46,930
this is this is Aidan I by default kind

91
00:03:45,250 --> 00:03:49,600
of enforcement you have to explicitly

92
00:03:46,930 --> 00:03:52,810
allow something<font color="#E5E5E5"> to happen and in</font>

93
00:03:49,600 --> 00:03:55,989
addition to<font color="#E5E5E5"> that the official definition</font>

94
00:03:52,810 --> 00:03:57,700
<font color="#E5E5E5">mattes for access control all subjects</font>

95
00:03:55,989 --> 00:04:00,220
and objects have a classification label

96
00:03:57,700 --> 00:04:03,000
and category which used by the kernel to

97
00:04:00,220 --> 00:04:07,450
mix access control decisions based on a

98
00:04:03,000 --> 00:04:09,040
level of<font color="#E5E5E5"> trust and a</font><font color="#CCCCCC"> need-to-know</font><font color="#E5E5E5"> now</font>

99
00:04:07,450 --> 00:04:11,828
this is<font color="#E5E5E5"> commonly associated with</font>

100
00:04:09,040 --> 00:04:16,060
government thanks<font color="#E5E5E5"> classification doesn't</font>

101
00:04:11,829 --> 00:04:18,510
necessarily have to be I know it's much

102
00:04:16,060 --> 00:04:20,790
more prevalent in a government

103
00:04:18,510 --> 00:04:22,680
vernment but<font color="#E5E5E5"> I kind of like the the</font>

104
00:04:20,790 --> 00:04:25,970
<font color="#CCCCCC">gentoo hierarchy of classification</font><font color="#E5E5E5"> for a</font>

105
00:04:22,680 --> 00:04:28,140
corporate which is public internal

106
00:04:25,970 --> 00:04:30,360
confidential strictly confidential so it

107
00:04:28,140 --> 00:04:31,800
doesn't have to be<font color="#E5E5E5"> government only but</font>

108
00:04:30,360 --> 00:04:34,920
that's generally where you see it<font color="#CCCCCC"> right</font>

109
00:04:31,800 --> 00:04:37,140
<font color="#CCCCCC">now and the main difference here between</font>

110
00:04:34,920 --> 00:04:38,690
the traditional discretionary is users

111
00:04:37,140 --> 00:04:42,479
can't make their own policy decisions

112
00:04:38,690 --> 00:04:44,340
that role is<font color="#CCCCCC"> that those rule sets are</font>

113
00:04:42,480 --> 00:04:47,190
generally made by like a<font color="#E5E5E5"> security admin</font>

114
00:04:44,340 --> 00:04:49,080
in a perfect world and users and admins

115
00:04:47,190 --> 00:04:51,900
they can't make<font color="#E5E5E5"> a change whether it's</font>

116
00:04:49,080 --> 00:04:54,180
intentional or accidental and<font color="#E5E5E5"> I'll cover</font>

117
00:04:51,900 --> 00:04:56,370
a little bit more once i get them with

118
00:04:54,180 --> 00:04:58,200
<font color="#E5E5E5">these two more terms almost done the</font>

119
00:04:56,370 --> 00:04:59,820
terms<font color="#E5E5E5"> all right so this is probably the</font>

120
00:04:58,200 --> 00:05:03,570
most important thing to understand for

121
00:04:59,820 --> 00:05:06,750
<font color="#E5E5E5">the whole presentation is context which</font>

122
00:05:03,570 --> 00:05:10,620
are also known as labels this is very

123
00:05:06,750 --> 00:05:13,230
<font color="#E5E5E5">critical to this talk and specifically</font>

124
00:05:10,620 --> 00:05:15,960
to<font color="#E5E5E5"> this talk and as he lacks a label can</font>

125
00:05:13,230 --> 00:05:17,310
<font color="#E5E5E5">be broken down into two</font><font color="#CCCCCC"> sub definitions</font>

126
00:05:15,960 --> 00:05:21,150
here that I'm<font color="#E5E5E5"> going</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> be talking</font><font color="#CCCCCC"> about</font>

127
00:05:17,310 --> 00:05:23,940
one<font color="#CCCCCC"> of them is types and I'm types are</font>

128
00:05:21,150 --> 00:05:27,810
labels associated with all objects and

129
00:05:23,940 --> 00:05:30,000
subjects it's just that<font color="#E5E5E5"> that's the name</font>

130
00:05:27,810 --> 00:05:32,940
for<font color="#CCCCCC"> the</font><font color="#E5E5E5"> label that's on everything on</font>

131
00:05:30,000 --> 00:05:35,130
the system and the rules for these types

132
00:05:32,940 --> 00:05:37,110
will be defined in that policy and then

133
00:05:35,130 --> 00:05:40,830
forced by the colonel and<font color="#E5E5E5"> there's one</font>

134
00:05:37,110 --> 00:05:43,950
<font color="#CCCCCC">more a domain and this is specifically a</font>

135
00:05:40,830 --> 00:05:47,700
processing domain this is a this is a

136
00:05:43,950 --> 00:05:51,599
specific type for processes or a

137
00:05:47,700 --> 00:05:53,849
collection of processes within their own

138
00:05:51,600 --> 00:05:55,620
processing domain now it is a little

139
00:05:53,850 --> 00:06:00,960
<font color="#E5E5E5">abstract so an example this would be</font>

140
00:05:55,620 --> 00:06:03,600
like um like a bind dns demon witch

141
00:06:00,960 --> 00:06:05,250
named like name d that everything would

142
00:06:03,600 --> 00:06:08,100
probably be in a type<font color="#E5E5E5"> called name d</font>

143
00:06:05,250 --> 00:06:10,470
which<font color="#CCCCCC"> is the name d domain or a single</font>

144
00:06:08,100 --> 00:06:12,540
<font color="#E5E5E5">function like the past the BD domain</font>

145
00:06:10,470 --> 00:06:15,569
which is for password changes on a Linux

146
00:06:12,540 --> 00:06:18,169
system<font color="#CCCCCC"> alright</font>

147
00:06:15,569 --> 00:06:18,169
<font color="#E5E5E5">what</font><font color="#CCCCCC"> is</font>

148
00:06:18,910 --> 00:06:27,010
I don't really know well um good minute

149
00:06:25,510 --> 00:06:29,080
paper and then<font color="#E5E5E5"> I had to actually do it</font>

150
00:06:27,010 --> 00:06:32,860
all right so it stands for security

151
00:06:29,080 --> 00:06:34,930
enhance<font color="#CCCCCC"> Lennox and the beginning of</font><font color="#E5E5E5"> this</font>

152
00:06:32,860 --> 00:06:38,410
is a joint effort between University of

153
00:06:34,930 --> 00:06:40,420
Utah and the DoD implement a mandatory

154
00:06:38,410 --> 00:06:41,710
access control for Linux because the

155
00:06:40,420 --> 00:06:44,260
traditional mandatory access control

156
00:06:41,710 --> 00:06:49,599
systems within the government<font color="#CCCCCC"> were</font><font color="#E5E5E5"> kind</font>

157
00:06:44,260 --> 00:06:52,120
<font color="#E5E5E5">of expensive and dietary so the NSA</font>

158
00:06:49,600 --> 00:06:56,380
actually released selinux<font color="#CCCCCC"> as selinux is</font>

159
00:06:52,120 --> 00:06:59,320
a<font color="#E5E5E5"> kernel patch under GPL in 2003 and I</font>

160
00:06:56,380 --> 00:07:04,030
believe became officially accepted into

161
00:06:59,320 --> 00:07:05,800
the kernel in 2005 um one of<font color="#E5E5E5"> the great</font>

162
00:07:04,030 --> 00:07:08,500
<font color="#CCCCCC">things about</font><font color="#E5E5E5"> it is it's very flexible</font>

163
00:07:05,800 --> 00:07:13,630
like for<font color="#CCCCCC"> instance selinux is default on</font>

164
00:07:08,500 --> 00:07:15,280
<font color="#E5E5E5">android now has a 4.3 ish um and it so</font>

165
00:07:13,630 --> 00:07:17,500
it<font color="#CCCCCC"> can be on something as small as a</font>

166
00:07:15,280 --> 00:07:20,729
<font color="#E5E5E5">mobile device</font><font color="#CCCCCC"> to connect a</font>

167
00:07:17,500 --> 00:07:22,750
<font color="#E5E5E5">general-purpose desktop like</font><font color="#CCCCCC"> a home or a</font>

168
00:07:20,730 --> 00:07:25,870
multi-level security system which I'll

169
00:07:22,750 --> 00:07:27,820
get into later which allows for data to

170
00:07:25,870 --> 00:07:30,490
exist at multiple classification levels

171
00:07:27,820 --> 00:07:32,680
on the<font color="#E5E5E5"> same system and you won't have</font>

172
00:07:30,490 --> 00:07:35,350
any knowledge of a higher classification

173
00:07:32,680 --> 00:07:38,860
even being there well get<font color="#CCCCCC"> to that a bit</font>

174
00:07:35,350 --> 00:07:40,540
more later so I said earlier<font color="#CCCCCC"> that one of</font>

175
00:07:38,860 --> 00:07:44,740
the most important things to<font color="#E5E5E5"> understand</font>

176
00:07:40,540 --> 00:07:47,290
was the labels so<font color="#E5E5E5"> ultimately if any he</font>

177
00:07:44,740 --> 00:07:50,200
hit anything out of this selinux is a

178
00:07:47,290 --> 00:07:53,290
label based security system everything

179
00:07:50,200 --> 00:07:56,650
within selinux relies on labels so

180
00:07:53,290 --> 00:07:59,530
everything on / for instance on a Linux

181
00:07:56,650 --> 00:08:02,349
system has<font color="#E5E5E5"> a label that includes files</font>

182
00:07:59,530 --> 00:08:04,659
sockets it devices if everything has a

183
00:08:02,350 --> 00:08:06,340
label but<font color="#E5E5E5"> doesn't it doesn't know what</font>

184
00:08:04,660 --> 00:08:10,600
kind of rules<font color="#E5E5E5"> to apply</font><font color="#CCCCCC"> and it just falls</font>

185
00:08:06,340 --> 00:08:13,119
apart on the policy<font color="#CCCCCC"> that a</font><font color="#E5E5E5"> sa links</font>

186
00:08:10,600 --> 00:08:16,140
policy<font color="#CCCCCC"> which is kind</font><font color="#E5E5E5"> of a it's</font><font color="#CCCCCC"> a binary</font>

187
00:08:13,120 --> 00:08:20,350
policy that's stored in kernel space and

188
00:08:16,140 --> 00:08:22,539
it's used by this security<font color="#E5E5E5"> server which</font>

189
00:08:20,350 --> 00:08:25,570
is selinux to makes those access control

190
00:08:22,540 --> 00:08:27,310
decisions and that's what the mandatory

191
00:08:25,570 --> 00:08:29,650
access control is it has to be

192
00:08:27,310 --> 00:08:31,490
explicitly allowed in order to do

193
00:08:29,650 --> 00:08:32,809
anything

194
00:08:31,490 --> 00:08:36,049
so that there's a few things I want<font color="#E5E5E5"> to</font>

195
00:08:32,809 --> 00:08:38,029
cover what s Felix isn't um because

196
00:08:36,049 --> 00:08:40,520
<font color="#E5E5E5">there's some misconceptions I've heard</font>

197
00:08:38,029 --> 00:08:42,559
from now now and then it's not antivirus

198
00:08:40,520 --> 00:08:47,930
or anti-malware although I make it may

199
00:08:42,559 --> 00:08:51,380
contain a virus or malware on a system

200
00:08:47,930 --> 00:08:52,910
but it doesn't prevent it doesn't detect

201
00:08:51,380 --> 00:08:54,110
him like it<font color="#E5E5E5"> doesn't have any heuristics</font>

202
00:08:52,910 --> 00:08:55,910
or anything of that nature to detect

203
00:08:54,110 --> 00:08:57,380
them it's not an intrusion detection

204
00:08:55,910 --> 00:09:00,079
system although you could link it up

205
00:08:57,380 --> 00:09:01,610
with audit reports and kind of make it

206
00:09:00,080 --> 00:09:04,690
<font color="#E5E5E5">that way but it is in an intrusion</font>

207
00:09:01,610 --> 00:09:10,910
detection system it's not<font color="#E5E5E5"> a firewall and</font>

208
00:09:04,690 --> 00:09:12,649
it's still not magic um but<font color="#E5E5E5"> uh move on</font>

209
00:09:10,910 --> 00:09:16,189
to there's kind of three main<font color="#E5E5E5"> components</font>

210
00:09:12,649 --> 00:09:17,870
that it got<font color="#CCCCCC"> it's made up of there's the</font>

211
00:09:16,190 --> 00:09:20,420
actual like kernel code that's the Linux

212
00:09:17,870 --> 00:09:21,410
security module I'm<font color="#CCCCCC"> not going to get too</font>

213
00:09:20,420 --> 00:09:23,029
much<font color="#CCCCCC"> more into that</font><font color="#E5E5E5"> because you're</font>

214
00:09:21,410 --> 00:09:26,959
<font color="#E5E5E5">getting in the kernel development and</font>

215
00:09:23,029 --> 00:09:29,600
then I would get bored talking about it

216
00:09:26,959 --> 00:09:31,399
uh so the only important thing to note

217
00:09:29,600 --> 00:09:33,260
here is that the discretionary checks

218
00:09:31,399 --> 00:09:35,959
the traditional checks happen before any

219
00:09:33,260 --> 00:09:38,510
of this security<font color="#CCCCCC"> mazel checks would</font>

220
00:09:35,959 --> 00:09:42,459
occur because it's much quicker but<font color="#E5E5E5"> the</font>

221
00:09:38,510 --> 00:09:44,689
opposite is not true if discretionary

222
00:09:42,459 --> 00:09:46,699
let me back up a little bit so if a

223
00:09:44,690 --> 00:09:48,529
discretionary check fails it's not<font color="#E5E5E5"> going</font>

224
00:09:46,700 --> 00:09:50,959
<font color="#E5E5E5">to check the mandatory one if a</font>

225
00:09:48,529 --> 00:09:53,120
discretionary check passes<font color="#E5E5E5"> in mentor he</font>

226
00:09:50,959 --> 00:09:56,479
fails well you still fail the mandatory

227
00:09:53,120 --> 00:09:57,829
overrides everything there um the policy

228
00:09:56,480 --> 00:10:01,130
<font color="#E5E5E5">for</font><font color="#CCCCCC"> instance and then we'll no doubt</font><font color="#E5E5E5"> the</font>

229
00:09:57,829 --> 00:10:02,449
policy it's a<font color="#E5E5E5"> it's very flexible like I</font>

230
00:10:01,130 --> 00:10:07,520
said<font color="#CCCCCC"> you can have mobile devices the</font>

231
00:10:02,450 --> 00:10:10,310
huge servers and whatnot and this can be

232
00:10:07,520 --> 00:10:12,290
tailored to the needs of the system<font color="#E5E5E5"> and</font>

233
00:10:10,310 --> 00:10:13,579
it they're also modular kind of like

234
00:10:12,290 --> 00:10:15,079
Linux kernel can be modular or

235
00:10:13,579 --> 00:10:17,449
monolithic it's the same<font color="#CCCCCC"> thing</font><font color="#E5E5E5"> with</font>

236
00:10:15,079 --> 00:10:21,050
selinux policy they're all modular at

237
00:10:17,450 --> 00:10:22,730
this point and then I'll uh I'll get to

238
00:10:21,050 --> 00:10:25,399
some tools later the general use for

239
00:10:22,730 --> 00:10:26,810
status and policy action I'll pause here

240
00:10:25,399 --> 00:10:29,829
for a second how many people<font color="#CCCCCC"> are</font>

241
00:10:26,810 --> 00:10:29,829
<font color="#E5E5E5">thoroughly confused</font>

242
00:10:30,510 --> 00:10:35,430
I ok do you have<font color="#E5E5E5"> any specific what I'm</font>

243
00:10:34,410 --> 00:10:37,469
trying to<font color="#E5E5E5"> get at is if you have any</font>

244
00:10:35,430 --> 00:10:39,930
<font color="#E5E5E5">specific questions interrupt me right</font>

245
00:10:37,470 --> 00:10:42,660
away because this uncovering a lot of

246
00:10:39,930 --> 00:10:44,670
stuff<font color="#CCCCCC"> that may be kind of conceptual at</font>

247
00:10:42,660 --> 00:10:46,380
this point and I don't<font color="#E5E5E5"> want to lose any</font>

248
00:10:44,670 --> 00:10:47,819
people before we get up get moving on so

249
00:10:46,380 --> 00:10:50,060
if anyone has<font color="#CCCCCC"> any questions please let</font>

250
00:10:47,820 --> 00:10:50,060
<font color="#CCCCCC">me know</font>

251
00:10:51,480 --> 00:10:56,880
alright so there's<font color="#E5E5E5"> three main policies</font>

252
00:10:53,430 --> 00:11:02,189
um the one that that comes on by default

253
00:10:56,880 --> 00:11:03,529
and<font color="#CCCCCC"> redhat</font><font color="#E5E5E5"> sent OS fedora and it's</font>

254
00:11:02,190 --> 00:11:05,639
<font color="#CCCCCC">available for Jed</font><font color="#E5E5E5"> to and arch linux</font>

255
00:11:03,529 --> 00:11:09,660
<font color="#E5E5E5">amantes kind of moved away from husky</font>

256
00:11:05,639 --> 00:11:11,550
<font color="#E5E5E5">Linux they're all all through but all</font>

257
00:11:09,660 --> 00:11:14,959
three<font color="#CCCCCC"> of these policies are based on a</font>

258
00:11:11,550 --> 00:11:20,189
reference policy which the NSA developed

259
00:11:14,959 --> 00:11:21,510
and all of these policies like

260
00:11:20,190 --> 00:11:24,360
everything with us it looks are denied

261
00:11:21,510 --> 00:11:28,649
by default and<font color="#E5E5E5"> allowed by exception as</font>

262
00:11:24,360 --> 00:11:30,779
this is a mandatory access system indeed

263
00:11:28,649 --> 00:11:34,199
these three policies here are more<font color="#E5E5E5"> or</font>

264
00:11:30,779 --> 00:11:36,269
less in a hierarchy in terms of targeted

265
00:11:34,199 --> 00:11:38,370
being the lowest everything in targeted

266
00:11:36,269 --> 00:11:40,649
then would be in mcs which stands<font color="#E5E5E5"> for</font>

267
00:11:38,370 --> 00:11:42,180
multiple category security and

268
00:11:40,649 --> 00:11:44,100
everything and multiple category

269
00:11:42,180 --> 00:11:46,739
security would be in the multi-level

270
00:11:44,100 --> 00:11:49,190
security which is the most enforcing

271
00:11:46,740 --> 00:11:49,190
policy

272
00:11:51,310 --> 00:11:58,180
so this yeah you can kind of see<font color="#E5E5E5"> those</font>

273
00:11:54,100 --> 00:12:00,730
so I'll take this this chart here real

274
00:11:58,180 --> 00:12:02,109
quick to show you<font color="#CCCCCC"> a</font><font color="#E5E5E5"> kind of the</font>

275
00:12:00,730 --> 00:12:05,380
difference between<font color="#E5E5E5"> the</font><font color="#CCCCCC"> traditional and</font>

276
00:12:02,110 --> 00:12:06,580
<font color="#E5E5E5">the bent or access control over here in</font>

277
00:12:05,380 --> 00:12:09,430
this yellow that's kind of the

278
00:12:06,580 --> 00:12:11,560
traditional discretionary permissions

279
00:12:09,430 --> 00:12:14,020
<font color="#E5E5E5">you have read write execute for owner</font>

280
00:12:11,560 --> 00:12:15,790
group in everybody that's that's what

281
00:12:14,020 --> 00:12:17,439
you used to<font color="#E5E5E5"> seeing on a Linux system and</font>

282
00:12:15,790 --> 00:12:19,949
then you have the user and group right

283
00:12:17,440 --> 00:12:23,680
next to<font color="#CCCCCC"> that and then you have these</font>

284
00:12:19,950 --> 00:12:26,589
these other multiples<font color="#E5E5E5"> colored strings</font>

285
00:12:23,680 --> 00:12:30,989
next to it<font color="#E5E5E5"> and</font><font color="#CCCCCC"> that makes</font><font color="#E5E5E5"> up what s key</font>

286
00:12:26,589 --> 00:12:34,510
<font color="#E5E5E5">linux ask ads for the targeted policy um</font>

287
00:12:30,990 --> 00:12:39,820
these are oh so you have this is the

288
00:12:34,510 --> 00:12:42,550
user type I'm sorry the user label<font color="#E5E5E5"> the</font>

289
00:12:39,820 --> 00:12:44,260
roll label and<font color="#CCCCCC"> the type that's the</font><font color="#E5E5E5"> most</font>

290
00:12:42,550 --> 00:12:46,959
important being the type of course

291
00:12:44,260 --> 00:12:49,569
because that is the main label living

292
00:12:46,960 --> 00:12:51,010
system when within selinux and provides

293
00:12:49,570 --> 00:12:54,160
the basis for how it enforces the

294
00:12:51,010 --> 00:12:56,220
mandatory access control with so within

295
00:12:54,160 --> 00:13:00,400
<font color="#E5E5E5">this policy this is the one that's the</font>

296
00:12:56,220 --> 00:13:03,400
enabled by default one you see the user

297
00:13:00,400 --> 00:13:05,110
rule and type is required and this<font color="#E5E5E5"> the</font>

298
00:13:03,400 --> 00:13:08,140
sensitivity in category which is more or

299
00:13:05,110 --> 00:13:11,740
<font color="#E5E5E5">less classification in category those</font>

300
00:13:08,140 --> 00:13:16,420
two are not mandatory but<font color="#E5E5E5"> I'll get into</font>

301
00:13:11,740 --> 00:13:19,300
<font color="#E5E5E5">the next one real quick so in these</font>

302
00:13:16,420 --> 00:13:22,750
to category and multi-level policies all

303
00:13:19,300 --> 00:13:25,599
five of the labels are required and<font color="#E5E5E5"> the</font>

304
00:13:22,750 --> 00:13:28,750
difference between the<font color="#E5E5E5"> target policies</font>

305
00:13:25,600 --> 00:13:31,029
in these policies<font color="#CCCCCC"> are</font><font color="#E5E5E5"> business this kind</font>

306
00:13:28,750 --> 00:13:32,470
of red green<font color="#E5E5E5"> orange and yellow thing</font>

307
00:13:31,029 --> 00:13:35,680
that are that's at the end<font color="#E5E5E5"> there and</font>

308
00:13:32,470 --> 00:13:38,410
that's the sensitivity which is more<font color="#E5E5E5"> or</font>

309
00:13:35,680 --> 00:13:42,040
less a level of trust that that a user

310
00:13:38,410 --> 00:13:44,139
has or that services<font color="#E5E5E5"> mean allowed to</font>

311
00:13:42,040 --> 00:13:45,430
operate at and then you have categories

312
00:13:44,139 --> 00:13:48,310
which is more or<font color="#CCCCCC"> less than need to know</font>

313
00:13:45,430 --> 00:13:49,870
and these are<font color="#CCCCCC"> all yeah these are all</font>

314
00:13:48,310 --> 00:13:51,790
government like terms but this certainly

315
00:13:49,870 --> 00:13:54,790
can be applied to corporate you could

316
00:13:51,790 --> 00:13:57,160
have a<font color="#CCCCCC"> category of HR and a category of</font>

317
00:13:54,790 --> 00:13:58,510
<font color="#E5E5E5">Finance and they probably aren't going</font>

318
00:13:57,160 --> 00:14:00,550
to<font color="#E5E5E5"> talk to</font><font color="#CCCCCC"> each other they're probably</font>

319
00:13:58,510 --> 00:14:02,019
not<font color="#E5E5E5"> going to have interactions with the</font>

320
00:14:00,550 --> 00:14:04,660
files<font color="#E5E5E5"> that are specifically finance or</font>

321
00:14:02,019 --> 00:14:09,490
specifically HR maybe well I'm<font color="#E5E5E5"> just a</font>

322
00:14:04,660 --> 00:14:12,430
poor example but anyway um this is this

323
00:14:09,490 --> 00:14:13,810
can get very complex in here and the<font color="#E5E5E5"> MLS</font>

324
00:14:12,430 --> 00:14:15,550
stuff so I'm not<font color="#E5E5E5"> going to get tuned up</font>

325
00:14:13,810 --> 00:14:17,500
with it I actually would<font color="#CCCCCC"> have loved to</font>

326
00:14:15,550 --> 00:14:19,029
do it entire presentation on this but i

327
00:14:17,500 --> 00:14:23,230
also wanted people to show up for<font color="#CCCCCC"> my</font>

328
00:14:19,029 --> 00:14:27,160
talk so um yeah not going to go too much

329
00:14:23,230 --> 00:14:29,860
further than that mls is a Bella poodle

330
00:14:27,160 --> 00:14:33,819
oh security model if anyone's familiar

331
00:14:29,860 --> 00:14:35,980
with that so the security level a user

332
00:14:33,820 --> 00:14:39,130
at a certain security level may not read

333
00:14:35,980 --> 00:14:40,870
an object at a higher level and a user

334
00:14:39,130 --> 00:14:43,449
at a certain security level may not

335
00:14:40,870 --> 00:14:46,029
<font color="#CCCCCC">write at an object lower than its level</font>

336
00:14:43,449 --> 00:14:49,359
that's<font color="#E5E5E5"> how it enforces the multi level</font>

337
00:14:46,029 --> 00:14:52,180
and just one final<font color="#E5E5E5"> thing the multi</font>

338
00:14:49,360 --> 00:14:56,800
category security is the default that is

339
00:14:52,180 --> 00:14:58,329
an<font color="#E5E5E5"> Android selinux and it's kind of more</font>

340
00:14:56,800 --> 00:15:03,130
or less sandboxes applications from

341
00:14:58,329 --> 00:15:05,849
other and it's also used in the<font color="#CCCCCC"> Red Hat</font>

342
00:15:03,130 --> 00:15:10,019
atomic project which is selinux on<font color="#CCCCCC"> doc</font>

343
00:15:05,850 --> 00:15:13,750
<font color="#E5E5E5">all right so all of these policies</font>

344
00:15:10,019 --> 00:15:17,290
provide confinement

345
00:15:13,750 --> 00:15:18,760
and they confine and constrain objects

346
00:15:17,290 --> 00:15:22,420
and subjects as they were defined in the

347
00:15:18,760 --> 00:15:24,910
policy the rule sets and basis for

348
00:15:22,420 --> 00:15:28,000
instance selinux can confine<font color="#CCCCCC"> attacks an</font>

349
00:15:24,910 --> 00:15:29,800
application within its own domain so it

350
00:15:28,000 --> 00:15:33,190
has<font color="#CCCCCC"> a label that belongs</font><font color="#E5E5E5"> to that type of</font>

351
00:15:29,800 --> 00:15:36,609
application and allow<font color="#CCCCCC"> it to have only</font>

352
00:15:33,190 --> 00:15:39,160
the minimum privileges required and this

353
00:15:36,610 --> 00:15:40,450
is important coming up in the demo that

354
00:15:39,160 --> 00:15:43,150
<font color="#CCCCCC">I'll show you what happens when that</font>

355
00:15:40,450 --> 00:15:45,100
that's no longer the case so shouldn't

356
00:15:43,150 --> 00:15:47,620
application or access to another network

357
00:15:45,100 --> 00:15:49,810
and it wasn't explicitly allowed it

358
00:15:47,620 --> 00:15:52,510
would have to<font color="#CCCCCC"> be explicitly it granted</font>

359
00:15:49,810 --> 00:15:54,550
within the rule set so yea once again

360
00:15:52,510 --> 00:15:55,780
this is<font color="#CCCCCC"> a deny by default and</font><font color="#E5E5E5"> this is</font>

361
00:15:54,550 --> 00:15:59,290
what makes it<font color="#E5E5E5"> mandatory access control</font>

362
00:15:55,780 --> 00:16:02,680
versus discretionary and this

363
00:15:59,290 --> 00:16:05,349
confinement also allows<font color="#CCCCCC"> for a great way</font>

364
00:16:02,680 --> 00:16:07,750
to present further exposure if you have

365
00:16:05,350 --> 00:16:12,340
say a web server that<font color="#E5E5E5"> gets compromised</font>

366
00:16:07,750 --> 00:16:16,090
well that web server can't do hey your

367
00:16:12,340 --> 00:16:19,089
NS of that nature just because it's

368
00:16:16,090 --> 00:16:22,420
confined with<font color="#CCCCCC"> its</font><font color="#E5E5E5"> explicitly allowed set</font>

369
00:16:19,089 --> 00:16:24,649
of rules it's allowed<font color="#CCCCCC"> to perform</font><font color="#E5E5E5"> all</font>

370
00:16:22,420 --> 00:16:26,509
<font color="#E5E5E5">right so</font>

371
00:16:24,649 --> 00:16:27,949
this is a term I kind of made up I'm

372
00:16:26,509 --> 00:16:29,629
confined<font color="#CCCCCC"> the real thing but one can find</font>

373
00:16:27,949 --> 00:16:32,240
compromise is something I<font color="#CCCCCC"> just made up</font>

374
00:16:29,629 --> 00:16:33,800
here this<font color="#E5E5E5"> more or less came about</font>

375
00:16:32,240 --> 00:16:37,040
because there used to be a policy<font color="#E5E5E5"> called</font>

376
00:16:33,800 --> 00:16:39,050
strict and that's what led to<font color="#E5E5E5"> a lot of</font>

377
00:16:37,040 --> 00:16:41,660
<font color="#E5E5E5">people disabling selinux because</font>

378
00:16:39,050 --> 00:16:42,878
everything had to be defined so there

379
00:16:41,660 --> 00:16:47,449
was kind<font color="#E5E5E5"> of there was a compromise</font>

380
00:16:42,879 --> 00:16:50,269
unconfined came out and this basically

381
00:16:47,449 --> 00:16:52,459
allows demons that selinux doesn't know

382
00:16:50,269 --> 00:16:54,170
about to run if se Linux doesn't know

383
00:16:52,459 --> 00:16:57,018
about them in a non can find a man it's

384
00:16:54,170 --> 00:16:59,569
more or less an entirely permissive

385
00:16:57,019 --> 00:17:05,089
domain where<font color="#E5E5E5"> it's selinux rules are not</font>

386
00:16:59,569 --> 00:17:07,188
enforced so why this isn't<font color="#E5E5E5"> I mean in a</font>

387
00:17:05,089 --> 00:17:08,688
perfect world we'd have allow rules for

388
00:17:07,189 --> 00:17:10,459
everything and everything else we deny

389
00:17:08,689 --> 00:17:12,709
but realistically it can be very

390
00:17:10,459 --> 00:17:14,689
<font color="#E5E5E5">difficult to do especially on a system</font>

391
00:17:12,709 --> 00:17:16,760
that may not<font color="#E5E5E5"> be of super high importance</font>

392
00:17:14,689 --> 00:17:18,949
and I think<font color="#CCCCCC"> that's</font><font color="#E5E5E5"> another reason that</font>

393
00:17:16,760 --> 00:17:20,929
you'll see it<font color="#CCCCCC"> deci Linux disabled for a</font>

394
00:17:18,949 --> 00:17:23,149
lot of<font color="#CCCCCC"> the</font><font color="#E5E5E5"> time so this</font><font color="#CCCCCC"> is better</font><font color="#E5E5E5"> than</font>

395
00:17:20,929 --> 00:17:26,209
outright just disabling selinux so you

396
00:17:23,148 --> 00:17:30,408
have your services that have rules

397
00:17:26,209 --> 00:17:32,210
defined by generally<font color="#E5E5E5"> Red Hat and if you</font>

398
00:17:30,409 --> 00:17:33,679
can keep<font color="#CCCCCC"> Perry's defined especially</font>

399
00:17:32,210 --> 00:17:36,169
important services you have<font color="#E5E5E5"> any public</font>

400
00:17:33,679 --> 00:17:38,929
<font color="#E5E5E5">facing services like a web server or DNS</font>

401
00:17:36,169 --> 00:17:41,570
or anything anything of that nature it'd

402
00:17:38,929 --> 00:17:45,710
be good to keep them confined and that

403
00:17:41,570 --> 00:17:47,210
and still run other internal things that

404
00:17:45,710 --> 00:17:51,020
you may need to run in an unconfined

405
00:17:47,210 --> 00:17:52,309
domain so I think<font color="#E5E5E5"> it's a decent</font>

406
00:17:51,020 --> 00:17:57,350
compromise because you don't completely

407
00:17:52,309 --> 00:17:58,639
lose your security but<font color="#E5E5E5"> it's not perfect</font>

408
00:17:57,350 --> 00:18:03,469
but then again we're not a perfect world

409
00:17:58,640 --> 00:18:06,169
so this by the way is the<font color="#CCCCCC"> default</font>

410
00:18:03,470 --> 00:18:08,480
of user label and roll label and type in

411
00:18:06,169 --> 00:18:10,700
the targeted policy for a user so if

412
00:18:08,480 --> 00:18:13,520
<font color="#E5E5E5">you're just too bulba console and type</font>

413
00:18:10,700 --> 00:18:16,340
<font color="#CCCCCC">idg it would tell you that</font><font color="#E5E5E5"> you're on can</font>

414
00:18:13,520 --> 00:18:18,049
find all right we're<font color="#E5E5E5"> going to move along</font>

415
00:18:16,340 --> 00:18:19,850
<font color="#CCCCCC">a little bit here so this</font><font color="#E5E5E5"> is not a</font>

416
00:18:18,049 --> 00:18:22,129
partisan life is<font color="#E5E5E5"> very important because</font>

417
00:18:19,850 --> 00:18:25,189
anything any important information for

418
00:18:22,130 --> 00:18:27,679
<font color="#CCCCCC">best elonex goes of the</font><font color="#E5E5E5"> audit logs and</font>

419
00:18:25,190 --> 00:18:30,710
we will<font color="#CCCCCC"> I'll show you that a bit more</font><font color="#E5E5E5"> in</font>

420
00:18:27,679 --> 00:18:31,970
the demo later because it's important in

421
00:18:30,710 --> 00:18:33,799
the case<font color="#CCCCCC"> that it can be</font><font color="#E5E5E5"> used to</font>

422
00:18:31,970 --> 00:18:38,090
<font color="#E5E5E5">automatically generate modules to allow</font>

423
00:18:33,799 --> 00:18:40,070
something that has already failed and we

424
00:18:38,090 --> 00:18:44,030
are going<font color="#E5E5E5"> to</font><font color="#CCCCCC"> move on to living with</font>

425
00:18:40,070 --> 00:18:45,649
selinux and what I found this is how

426
00:18:44,030 --> 00:18:47,720
most people live with selinux and this

427
00:18:45,650 --> 00:18:50,510
may be difficult to see this is google

428
00:18:47,720 --> 00:18:52,429
trends and<font color="#CCCCCC"> i put an SEO linux and the</font>

429
00:18:50,510 --> 00:18:55,280
top result for the related search was

430
00:18:52,429 --> 00:18:56,360
selinux disabled and then we have

431
00:18:55,280 --> 00:19:00,080
another one down there at the bottom

432
00:18:56,360 --> 00:19:01,969
selinux disabled<font color="#E5E5E5"> centos so</font><font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> just</font>

433
00:19:00,080 --> 00:19:02,840
going to<font color="#E5E5E5"> ignore whatever this be I'm</font>

434
00:19:01,970 --> 00:19:04,220
gonna call this one<font color="#E5E5E5"> hundred thirty</font>

435
00:19:02,840 --> 00:19:09,350
percent of people want to<font color="#E5E5E5"> save lessee</font>

436
00:19:04,220 --> 00:19:10,490
Linux um oh I'm trying to<font color="#CCCCCC"> change that a</font>

437
00:19:09,350 --> 00:19:14,418
little bit or at least have you

438
00:19:10,490 --> 00:19:16,520
understand what it<font color="#CCCCCC"> is so this is from an</font>

439
00:19:14,419 --> 00:19:19,539
older document that was<font color="#E5E5E5"> published by the</font>

440
00:19:16,520 --> 00:19:22,190
maintainer of the selinux tools and

441
00:19:19,539 --> 00:19:24,350
packages for red hat band<font color="#CCCCCC"> walsh so I got</font>

442
00:19:22,190 --> 00:19:26,360
<font color="#E5E5E5">like what 15 minutes and no</font><font color="#CCCCCC"> presentation</font>

443
00:19:24,350 --> 00:19:27,918
we're not mention him these are the four

444
00:19:26,360 --> 00:19:30,889
most common causes of errors and this

445
00:19:27,919 --> 00:19:32,299
pretty much is<font color="#E5E5E5"> top down if you have a</font>

446
00:19:30,890 --> 00:19:34,250
label problem you're going to get an

447
00:19:32,299 --> 00:19:37,090
error that's the most common thing you

448
00:19:34,250 --> 00:19:39,500
always see the second one for<font color="#E5E5E5"> instance</font>

449
00:19:37,090 --> 00:19:43,250
say you want<font color="#E5E5E5"> to run apache on a port</font>

450
00:19:39,500 --> 00:19:45,650
that's not a<font color="#E5E5E5"> not 443 not 8080 not one of</font>

451
00:19:43,250 --> 00:19:49,669
the ones in policy that's going to cause

452
00:19:45,650 --> 00:19:51,549
an error and then<font color="#E5E5E5"> a lesser extent above</font>

453
00:19:49,669 --> 00:19:56,390
and policy<font color="#E5E5E5"> our application can occur and</font>

454
00:19:51,549 --> 00:19:58,929
if you're compromised good luck so we

455
00:19:56,390 --> 00:20:02,510
have the tool sets here<font color="#E5E5E5"> I do den bit ah</font>

456
00:19:58,929 --> 00:20:05,120
english is hard today uh selinux tool

457
00:20:02,510 --> 00:20:07,549
sets these packages aren't included by

458
00:20:05,120 --> 00:20:09,709
default which<font color="#CCCCCC"> um kind of bugs me because</font>

459
00:20:07,549 --> 00:20:11,150
of those because a lot of<font color="#E5E5E5"> the districts</font>

460
00:20:09,710 --> 00:20:13,850
<font color="#E5E5E5">that come with us helix come with it</font>

461
00:20:11,150 --> 00:20:15,740
enforcing by default the most important

462
00:20:13,850 --> 00:20:17,419
one here at the top is<font color="#E5E5E5"> this you or the</font>

463
00:20:15,740 --> 00:20:19,550
policy<font color="#CCCCCC"> for utils by</font>

464
00:20:17,420 --> 00:20:22,100
it comes with one of the most important

465
00:20:19,550 --> 00:20:23,780
commands to even like add an additional

466
00:20:22,100 --> 00:20:25,399
port like you want<font color="#E5E5E5"> to run apache like I</font>

467
00:20:23,780 --> 00:20:29,270
said on<font color="#E5E5E5"> 99-year something of that nature</font>

468
00:20:25,400 --> 00:20:31,070
you can't do it<font color="#E5E5E5"> with the default package</font>

469
00:20:29,270 --> 00:20:32,330
groups that you get from most<font color="#CCCCCC"> days</font>

470
00:20:31,070 --> 00:20:35,090
operating system which is kind<font color="#E5E5E5"> of</font>

471
00:20:32,330 --> 00:20:36,649
terrible and you really<font color="#CCCCCC"> really need</font><font color="#E5E5E5"> se</font>

472
00:20:35,090 --> 00:20:38,360
manage in order to be able to do that

473
00:20:36,650 --> 00:20:42,650
and<font color="#E5E5E5"> that comes in that top package there</font>

474
00:20:38,360 --> 00:20:44,090
for Policy<font color="#E5E5E5"> Cory</font><font color="#CCCCCC"> tails and I'll demo some</font>

475
00:20:42,650 --> 00:20:45,470
of the pet I'm going<font color="#E5E5E5"> to go over some of</font>

476
00:20:44,090 --> 00:20:48,580
them real quick and then I'll get into

477
00:20:45,470 --> 00:20:50,750
<font color="#E5E5E5">the demo of what they what they can do</font>

478
00:20:48,580 --> 00:20:53,810
these are the two most basic things this

479
00:20:50,750 --> 00:20:56,270
<font color="#CCCCCC">is how you would turn on enforcement of</font>

480
00:20:53,810 --> 00:20:58,070
the policy or turn<font color="#CCCCCC"> it off and the</font>

481
00:20:56,270 --> 00:20:59,960
following one is the status of it so

482
00:20:58,070 --> 00:21:03,110
it's set in forcing getting<font color="#CCCCCC"> force pretty</font>

483
00:20:59,960 --> 00:21:04,400
straightforward<font color="#E5E5E5"> pretty basic</font><font color="#CCCCCC"> um another</font>

484
00:21:03,110 --> 00:21:05,959
pretty basic one there are a lot of

485
00:21:04,400 --> 00:21:08,660
switches or<font color="#CCCCCC"> bully ends that are great</font>

486
00:21:05,960 --> 00:21:11,060
that are built in the policy um for

487
00:21:08,660 --> 00:21:13,760
instance this is this is one for things

488
00:21:11,060 --> 00:21:16,070
that are virtual devices if<font color="#E5E5E5"> they're</font>

489
00:21:13,760 --> 00:21:17,540
allowed to use the host USB which is

490
00:21:16,070 --> 00:21:18,860
actually on by default which I<font color="#E5E5E5"> don't</font>

491
00:21:17,540 --> 00:21:21,530
really<font color="#E5E5E5"> like so I use this as an example</font>

492
00:21:18,860 --> 00:21:24,439
to turn it off so<font color="#CCCCCC"> you can set that um</font>

493
00:21:21,530 --> 00:21:27,170
and then you can get it get the current

494
00:21:24,440 --> 00:21:28,220
status<font color="#E5E5E5"> of whatever there may be and I'm</font>

495
00:21:27,170 --> 00:21:30,080
going<font color="#E5E5E5"> to move through these little</font>

496
00:21:28,220 --> 00:21:32,690
quickly<font color="#E5E5E5"> because I want to I want to do</font>

497
00:21:30,080 --> 00:21:35,179
the demo portion restore<font color="#E5E5E5"> con means</font>

498
00:21:32,690 --> 00:21:37,820
restore<font color="#CCCCCC"> context but wait them up within</font>

499
00:21:35,180 --> 00:21:40,160
<font color="#E5E5E5">the policy that's defined all your types</font>

500
00:21:37,820 --> 00:21:42,560
will have labels already defined or

501
00:21:40,160 --> 00:21:44,000
wherever that foul maybe there's a ton

502
00:21:42,560 --> 00:21:48,530
of reg ex enter that define certain

503
00:21:44,000 --> 00:21:51,950
areas and you can tell this command to

504
00:21:48,530 --> 00:21:55,270
restore the label of a file that it it's

505
00:21:51,950 --> 00:21:59,120
very<font color="#CCCCCC"> helpful very useful certain certain</font>

506
00:21:55,270 --> 00:22:00,770
operations will not real able a file if

507
00:21:59,120 --> 00:22:03,260
you<font color="#E5E5E5"> move it for instance when it won't</font>

508
00:22:00,770 --> 00:22:06,560
be relabeled so this comes in handy and

509
00:22:03,260 --> 00:22:09,110
gets rid of errors pretty pretty common

510
00:22:06,560 --> 00:22:12,740
errors<font color="#E5E5E5"> all right these are two nearly</font>

511
00:22:09,110 --> 00:22:15,290
magic commands for some people<font color="#E5E5E5"> so if you</font>

512
00:22:12,740 --> 00:22:17,600
get a failure and in esky<font color="#E5E5E5"> lenox you're</font>

513
00:22:15,290 --> 00:22:21,220
preventing something from happening you

514
00:22:17,600 --> 00:22:21,219
can pipe that error

515
00:22:22,530 --> 00:22:27,210
type that air through audit to allow and

516
00:22:24,930 --> 00:22:29,700
we can automatically create an selinux

517
00:22:27,210 --> 00:22:35,880
module for you allowing whatever just

518
00:22:29,700 --> 00:22:37,500
got denied um this takes seconds and can

519
00:22:35,880 --> 00:22:39,450
prevent you from completely disabling

520
00:22:37,500 --> 00:22:41,970
selinux and if that happens<font color="#E5E5E5"> I'm happy so</font>

521
00:22:39,450 --> 00:22:43,920
<font color="#E5E5E5">that's my goal here and there's a</font>

522
00:22:41,970 --> 00:22:45,390
there's<font color="#E5E5E5"> one thing one thing this is not</font>

523
00:22:43,920 --> 00:22:47,520
<font color="#E5E5E5">related to ask you linux but it can be</font>

524
00:22:45,390 --> 00:22:49,680
important it's this<font color="#E5E5E5"> as a search</font>

525
00:22:47,520 --> 00:22:52,560
capability for the audit engine you<font color="#E5E5E5"> can</font>

526
00:22:49,680 --> 00:22:54,720
search specifically for audit I'm sorry

527
00:22:52,560 --> 00:22:56,820
bryci Linux denials so it can be quicker

528
00:22:54,720 --> 00:22:59,430
and then the command that may actually

529
00:22:56,820 --> 00:23:01,260
be magic this does everything possible

530
00:22:59,430 --> 00:23:04,890
you<font color="#E5E5E5"> would need to do within selinux</font>

531
00:23:01,260 --> 00:23:07,470
policy currently running it<font color="#E5E5E5"> add ports at</font>

532
00:23:04,890 --> 00:23:10,320
<font color="#E5E5E5">additional contacts mirror context all</font>

533
00:23:07,470 --> 00:23:12,690
kinds of<font color="#E5E5E5"> things and then all that all</font>

534
00:23:10,320 --> 00:23:15,810
the kind of traditional<font color="#E5E5E5"> to for utils for</font>

535
00:23:12,690 --> 00:23:18,060
<font color="#E5E5E5">Linux a point of lists and ID and PS and</font>

536
00:23:15,810 --> 00:23:20,220
<font color="#E5E5E5">that's that and all those things if you</font>

537
00:23:18,060 --> 00:23:24,100
add capital e to them up<font color="#CCCCCC"> then really</font>

538
00:23:20,220 --> 00:23:27,360
will show you the selinux label

539
00:23:24,100 --> 00:23:31,270
alright so moving on to a demo which

540
00:23:27,360 --> 00:23:37,449
probably will blow up horribly since

541
00:23:31,270 --> 00:23:39,129
this is live and if it does it was

542
00:23:37,450 --> 00:23:41,880
<font color="#CCCCCC">asking again is anyone thoroughly</font>

543
00:23:39,130 --> 00:23:41,880
confused at this point

544
00:23:45,610 --> 00:23:47,669
you

545
00:23:49,830 --> 00:23:56,570
they're stored in policy like

546
00:23:53,120 --> 00:24:01,580
those are defined in policy and uh yeah

547
00:23:56,570 --> 00:24:03,470
it's<font color="#E5E5E5"> a binary policy and those labels</font>

548
00:24:01,580 --> 00:24:04,909
are defined they were defined in the

549
00:24:03,470 --> 00:24:06,320
original reference policy and they just

550
00:24:04,910 --> 00:24:07,640
<font color="#E5E5E5">kind of been inherited at this point if</font>

551
00:24:06,320 --> 00:24:09,409
you would have<font color="#E5E5E5"> start something from</font>

552
00:24:07,640 --> 00:24:12,580
scratch you could define whatever you

553
00:24:09,410 --> 00:24:17,270
would like that's quite<font color="#E5E5E5"> an undertaking</font>

554
00:24:12,580 --> 00:24:18,439
<font color="#E5E5E5">all right can</font><font color="#CCCCCC"> I merit us oh wow that's a</font>

555
00:24:17,270 --> 00:24:20,710
much different resolution I was

556
00:24:18,440 --> 00:24:20,710
expecting

557
00:24:21,970 --> 00:24:30,919
art is<font color="#E5E5E5"> this legible anyway alright</font>

558
00:24:26,080 --> 00:24:32,449
<font color="#E5E5E5">alright cool alright so first thing</font>

559
00:24:30,919 --> 00:24:36,290
we're going to do is this<font color="#E5E5E5"> isn't it this</font>

560
00:24:32,450 --> 00:24:38,030
has<font color="#CCCCCC"> st long song right now um</font><font color="#E5E5E5"> I can show</font>

561
00:24:36,290 --> 00:24:40,428
that as he linux is currently enforcing

562
00:24:38,030 --> 00:24:42,410
so there's certain things that it

563
00:24:40,429 --> 00:24:45,410
prevents you from doing<font color="#CCCCCC"> I want to see</font>

564
00:24:42,410 --> 00:24:49,130
what uh what's up<font color="#E5E5E5"> with</font><font color="#CCCCCC"> the shadow oh I</font>

565
00:24:45,410 --> 00:24:51,350
can't even list the shadow file so

566
00:24:49,130 --> 00:24:53,929
that's traditionally work password

567
00:24:51,350 --> 00:24:55,699
hashes are or kept so yeah you don't

568
00:24:53,929 --> 00:24:59,150
want to be able to do that another thing

569
00:24:55,700 --> 00:25:03,559
is<font color="#E5E5E5"> this is a I guess issue min so this</font>

570
00:24:59,150 --> 00:25:06,410
is a combined user so it doesn't have

571
00:25:03,559 --> 00:25:08,570
permission to do very many things this

572
00:25:06,410 --> 00:25:10,309
is just<font color="#E5E5E5"> the regular user but it is</font>

573
00:25:08,570 --> 00:25:12,200
confined and I'm using this as an

574
00:25:10,309 --> 00:25:14,600
example<font color="#E5E5E5"> of what happens within a</font>

575
00:25:12,200 --> 00:25:16,580
confined domain it's easiest to show you

576
00:25:14,600 --> 00:25:18,320
with a user but you can have apply a

577
00:25:16,580 --> 00:25:20,480
type of domain to anything else whether

578
00:25:18,320 --> 00:25:22,730
it be<font color="#E5E5E5"> like an Apache to make domain and</font>

579
00:25:20,480 --> 00:25:27,770
I don't<font color="#CCCCCC"> mean like like a website within</font>

580
00:25:22,730 --> 00:25:29,360
the HTTP type of domain I want to<font color="#E5E5E5"> show</font>

581
00:25:27,770 --> 00:25:30,918
the constraints that can be put upon

582
00:25:29,360 --> 00:25:33,559
something and then what happens when you

583
00:25:30,919 --> 00:25:38,720
turn them off so let's<font color="#CCCCCC"> just say that</font>

584
00:25:33,559 --> 00:25:40,820
this person is not very this is a

585
00:25:38,720 --> 00:25:43,750
malicious user and they want<font color="#CCCCCC"> to</font><font color="#E5E5E5"> try to</font>

586
00:25:40,820 --> 00:25:43,750
share their

587
00:25:44,450 --> 00:25:50,700
directory as a one as a web server so

588
00:25:48,720 --> 00:25:53,250
you can<font color="#E5E5E5"> I just tried to run a simple</font>

589
00:25:50,700 --> 00:25:57,269
HTTP server from Python<font color="#E5E5E5"> and it just</font>

590
00:25:53,250 --> 00:25:58,980
completely blew up and if i were to go

591
00:25:57,269 --> 00:26:03,330
back over here this is a<font color="#E5E5E5"> root on the</font>

592
00:25:58,980 --> 00:26:06,299
<font color="#CCCCCC">same p.m. so i want</font><font color="#E5E5E5"> to display the</font>

593
00:26:03,330 --> 00:26:07,980
current the current error is that just

594
00:26:06,299 --> 00:26:09,330
came through<font color="#E5E5E5"> within the last five</font>

595
00:26:07,980 --> 00:26:11,429
minutes either<font color="#E5E5E5"> five or</font><font color="#CCCCCC"> ten minutes i</font>

596
00:26:09,330 --> 00:26:13,320
don't remember<font color="#E5E5E5"> what recent is um it'll</font>

597
00:26:11,429 --> 00:26:15,960
tell you what's going<font color="#E5E5E5"> on this</font><font color="#CCCCCC"> is hard to</font>

598
00:26:13,320 --> 00:26:17,970
read if you've never seen<font color="#CCCCCC"> this but it'll</font>

599
00:26:15,960 --> 00:26:20,429
tell you why it denied it and it's

600
00:26:17,970 --> 00:26:25,019
always within these curly brackets so

601
00:26:20,429 --> 00:26:28,830
when i tried to use sudo<font color="#E5E5E5"> i would deny me</font>

602
00:26:25,019 --> 00:26:31,350
for a set uid capability

603
00:26:28,830 --> 00:26:33,210
and what I was down here is where I

604
00:26:31,350 --> 00:26:36,550
tried to start the web server it was

605
00:26:33,210 --> 00:26:38,890
preventing me from doing a mind

606
00:26:36,550 --> 00:26:41,080
and there's one<font color="#E5E5E5"> more portion to listen</font>

607
00:26:38,890 --> 00:26:43,270
to clear this so I also maybe want to

608
00:26:41,080 --> 00:26:45,070
see all the processes on the system oh

609
00:26:43,270 --> 00:26:47,650
no I can't I can only see mine is this

610
00:26:45,070 --> 00:26:50,799
is a confined domain

611
00:26:47,650 --> 00:26:53,090
<font color="#E5E5E5">alright so I'm going</font><font color="#CCCCCC"> to do</font><font color="#E5E5E5"> something</font>

612
00:26:50,799 --> 00:26:55,610
this is commander hopefully none of you

613
00:26:53,090 --> 00:27:00,580
have ever run oh I've disable selinux

614
00:26:55,610 --> 00:27:03,979
and let's try some of these<font color="#E5E5E5"> things again</font>

615
00:27:00,580 --> 00:27:05,689
so<font color="#E5E5E5"> I can stat shadow now that let's find</font>

616
00:27:03,980 --> 00:27:07,039
out the permission there 000 so<font color="#E5E5E5"> I'm not</font>

617
00:27:05,690 --> 00:27:09,380
<font color="#E5E5E5">going to be able to actually read it as</font>

618
00:27:07,039 --> 00:27:11,000
a unprivileged user because DAC is

619
00:27:09,380 --> 00:27:12,860
actually the discretionary access

620
00:27:11,000 --> 00:27:14,840
control is preventing me so there's some

621
00:27:12,860 --> 00:27:17,209
security here and by<font color="#E5E5E5"> the way this is</font><font color="#CCCCCC"> a</font>

622
00:27:14,840 --> 00:27:20,629
sin to<font color="#CCCCCC"> West machine this uh this VM and</font>

623
00:27:17,210 --> 00:27:23,990
it's completely stock this is from

624
00:27:20,630 --> 00:27:26,330
<font color="#CCCCCC">Center West install policies completely</font>

625
00:27:23,990 --> 00:27:28,549
stock<font color="#CCCCCC"> I installed the policy for</font><font color="#E5E5E5"> utils</font>

626
00:27:26,330 --> 00:27:31,639
that's it so there's no major changes

627
00:27:28,549 --> 00:27:33,860
being done here so the process list

628
00:27:31,640 --> 00:27:37,190
before I saw my four processes but now I

629
00:27:33,860 --> 00:27:39,168
kind of see a lot more<font color="#E5E5E5"> than that because</font>

630
00:27:37,190 --> 00:27:41,179
<font color="#E5E5E5">I'm no longer confined by anything so i</font>

631
00:27:39,169 --> 00:27:42,750
can just see everything running on the

632
00:27:41,179 --> 00:27:45,180
system

633
00:27:42,750 --> 00:27:47,630
um<font color="#CCCCCC"> alright so</font><font color="#E5E5E5"> let's do something else</font>

634
00:27:45,180 --> 00:27:47,630
for a quick

635
00:27:50,029 --> 00:27:55,009
not us in like because it's really

636
00:27:53,090 --> 00:27:56,869
simile<font color="#E5E5E5"> alright so I want to start up</font><font color="#CCCCCC"> the</font>

637
00:27:55,009 --> 00:27:59,269
<font color="#E5E5E5">Python server again see if that does</font>

638
00:27:56,869 --> 00:28:03,609
something<font color="#CCCCCC"> ok so I just started a web</font>

639
00:27:59,269 --> 00:28:06,849
server out of<font color="#E5E5E5"> my yes compromise domain</font>

640
00:28:03,609 --> 00:28:06,849
what's this

641
00:28:08,169 --> 00:28:10,230
you

642
00:28:11,030 --> 00:28:17,090
<font color="#E5E5E5">alright hey cool and there's my not a</font>

643
00:28:14,120 --> 00:28:19,100
symlink which I kind of em went back to

644
00:28:17,090 --> 00:28:22,340
dot dot slash dot dot which leads me to

645
00:28:19,100 --> 00:28:27,429
<font color="#CCCCCC">the root of this system so I</font><font color="#E5E5E5"> couldn't</font>

646
00:28:22,340 --> 00:28:27,429
<font color="#CCCCCC">just kind of him go</font><font color="#E5E5E5"> through etsy</font>

647
00:28:27,710 --> 00:28:37,570
click passwd meaning oh look downloading

648
00:28:30,980 --> 00:28:37,570
it Hey look<font color="#E5E5E5"> I passwd that's kind of cool</font>

649
00:28:39,380 --> 00:28:46,509
all right melts i had on here<font color="#E5E5E5"> i am</font>

650
00:28:43,870 --> 00:28:48,039
excellent

651
00:28:46,509 --> 00:28:50,349
<font color="#E5E5E5">I neither something I had on there</font>

652
00:28:48,039 --> 00:28:52,629
<font color="#CCCCCC">alright so</font><font color="#E5E5E5"> I'm going to show one more</font>

653
00:28:50,349 --> 00:28:55,599
quick demo on here and<font color="#E5E5E5"> this is more of a</font>

654
00:28:52,629 --> 00:29:00,549
sysadmin and a level thing that would

655
00:28:55,599 --> 00:29:03,158
occur set for us I'll<font color="#E5E5E5"> turn this back on</font>

656
00:29:00,549 --> 00:29:06,459
so a common thing is to want<font color="#E5E5E5"> to run a</font>

657
00:29:03,159 --> 00:29:07,779
web server on a different port but as he

658
00:29:06,459 --> 00:29:09,849
<font color="#E5E5E5">linux is going to prevent it so in this</font>

659
00:29:07,779 --> 00:29:11,849
case I do have a patchy on here but I

660
00:29:09,849 --> 00:29:15,029
actually lied i installed<font color="#E5E5E5"> apache as well</font>

661
00:29:11,849 --> 00:29:15,029
about that

662
00:29:15,480 --> 00:29:17,520
alright so I already have<font color="#CCCCCC"> this</font>

663
00:29:16,440 --> 00:29:19,620
pre-configured I'm going to add a

664
00:29:17,520 --> 00:29:23,510
different<font color="#E5E5E5"> port of 99 1 which is not a</font>

665
00:29:19,620 --> 00:29:31,290
default port if I actually try<font color="#E5E5E5"> to start</font>

666
00:29:23,510 --> 00:29:35,760
um good running service so it fails

667
00:29:31,290 --> 00:29:37,080
because it's<font color="#E5E5E5"> not a default port oh sorry</font>

668
00:29:35,760 --> 00:29:38,790
about this resolution was a little bit

669
00:29:37,080 --> 00:29:39,899
difficult to see it's a similar kind<font color="#E5E5E5"> of</font>

670
00:29:38,790 --> 00:29:41,760
error that we were getting<font color="#E5E5E5"> before with</font>

671
00:29:39,900 --> 00:29:44,010
unable to name by<font color="#E5E5E5"> the same thing i had</font>

672
00:29:41,760 --> 00:29:46,300
with<font color="#E5E5E5"> python although we can make this</font>

673
00:29:44,010 --> 00:29:47,860
pretty simple

674
00:29:46,300 --> 00:29:49,570
or the use of that audit to allow

675
00:29:47,860 --> 00:29:51,939
command that<font color="#E5E5E5"> I'll shown you this isn't</font>

676
00:29:49,570 --> 00:29:53,560
<font color="#E5E5E5">the best way to do</font><font color="#CCCCCC"> this but</font><font color="#E5E5E5"> I</font><font color="#CCCCCC"> really</font>

677
00:29:51,940 --> 00:29:56,430
want to show<font color="#E5E5E5"> you how audit to allow can</font>

678
00:29:53,560 --> 00:29:56,429
really make this easy

679
00:29:57,500 --> 00:30:01,430
<font color="#E5E5E5">alright well the web servers down I mean</font>

680
00:29:59,660 --> 00:30:03,830
I<font color="#CCCCCC"> can't even show you that so I can't</font>

681
00:30:01,430 --> 00:30:07,550
<font color="#CCCCCC">even show you a denial of any sort so we</font>

682
00:30:03,830 --> 00:30:09,669
have the recently denied in here so same

683
00:30:07,550 --> 00:30:13,970
command that was piping out the errors I

684
00:30:09,670 --> 00:30:17,960
can push this through<font color="#E5E5E5"> Dada to allow and</font>

685
00:30:13,970 --> 00:30:20,450
i'll call the module just a allow 991

686
00:30:17,960 --> 00:30:22,220
<font color="#CCCCCC">apache and this is going</font><font color="#E5E5E5"> to</font>

687
00:30:20,450 --> 00:30:25,580
automatically right and generate me a

688
00:30:22,220 --> 00:30:28,130
module that<font color="#CCCCCC"> I can I mean it tells me</font>

689
00:30:25,580 --> 00:30:30,770
<font color="#E5E5E5">what to do it's pretty pretty simple I</font>

690
00:30:28,130 --> 00:30:34,010
can literally run the same thing as he

691
00:30:30,770 --> 00:30:36,470
module<font color="#E5E5E5"> install</font>

692
00:30:34,010 --> 00:30:38,510
so this<font color="#CCCCCC"> is going to import it and put</font>

693
00:30:36,470 --> 00:30:40,190
into<font color="#E5E5E5"> the selinux policy it does take a</font>

694
00:30:38,510 --> 00:30:42,710
sec because that's a recompile entire

695
00:30:40,190 --> 00:30:47,410
policy that's why it's hanging here for

696
00:30:42,710 --> 00:30:47,410
10 to 15 seconds depends on<font color="#E5E5E5"> the speed oh</font>

697
00:30:50,320 --> 00:30:58,820
yeah it's it so um is a good point

698
00:30:56,360 --> 00:31:02,979
um you do have<font color="#E5E5E5"> to be specific in what</font>

699
00:30:58,820 --> 00:31:05,360
you're putting in there this is going to

700
00:31:02,980 --> 00:31:08,299
have to look to see<font color="#E5E5E5"> what um the recent</font>

701
00:31:05,360 --> 00:31:09,530
<font color="#CCCCCC">one</font><font color="#E5E5E5"> was but yeah you need to specify</font>

702
00:31:08,299 --> 00:31:13,910
exactly what you want to put in there

703
00:31:09,530 --> 00:31:15,530
<font color="#E5E5E5">just in case you don't have right</font>

704
00:31:13,910 --> 00:31:17,299
because it was within the last five

705
00:31:15,530 --> 00:31:20,928
minutes I'm probably good on time so I

706
00:31:17,299 --> 00:31:26,170
could I could have mentioned um yes sure

707
00:31:20,929 --> 00:31:26,170
<font color="#E5E5E5">yes of course yeah</font>

708
00:31:32,180 --> 00:31:39,260
like that out yeah yeah yeah I<font color="#E5E5E5"> mean I I</font>

709
00:31:36,480 --> 00:31:39,260
could

710
00:31:40,620 --> 00:31:44,590
exactly what he said and I thought I was

711
00:31:43,030 --> 00:31:47,020
going<font color="#E5E5E5"> to be shorter on time and I</font>

712
00:31:44,590 --> 00:31:48,610
actually was uh<font color="#E5E5E5"> you could just copy it</font>

713
00:31:47,020 --> 00:31:50,770
into a text file for instance cat the

714
00:31:48,610 --> 00:31:52,629
text file and pipe it brought it to

715
00:31:50,770 --> 00:31:55,510
allow and do the same exact thing that's

716
00:31:52,630 --> 00:31:58,720
a safer way to do it but uh I kind of

717
00:31:55,510 --> 00:32:00,070
wanted to show more of now there's a

718
00:31:58,720 --> 00:32:03,370
<font color="#CCCCCC">good points you don't want to allow more</font>

719
00:32:00,070 --> 00:32:05,520
than<font color="#CCCCCC"> than necessary but for instance I'm</font>

720
00:32:03,370 --> 00:32:10,989
now able to<font color="#E5E5E5"> start the Apache service and</font>

721
00:32:05,520 --> 00:32:12,700
I want<font color="#E5E5E5"> to go to this crazy site is it oh</font>

722
00:32:10,990 --> 00:32:15,670
I probably should go to the port<font color="#E5E5E5"> that I</font>

723
00:32:12,700 --> 00:32:17,860
just define huh all right look so this

724
00:32:15,670 --> 00:32:19,960
is the default<font color="#CCCCCC"> center</font><font color="#E5E5E5"> west page that you</font>

725
00:32:17,860 --> 00:32:22,240
get when you start<font color="#CCCCCC"> patching so I mean</font>

726
00:32:19,960 --> 00:32:24,820
that instead of turning off selinux

727
00:32:22,240 --> 00:32:27,340
there I made one module and it brought

728
00:32:24,820 --> 00:32:30,010
it back up and<font color="#E5E5E5"> running in 55 minutes or</font>

729
00:32:27,340 --> 00:32:32,320
so it was pretty quick um there's<font color="#CCCCCC"> one</font>

730
00:32:30,010 --> 00:32:35,230
more thing I swear<font color="#CCCCCC"> this the last part of</font>

731
00:32:32,320 --> 00:32:36,730
<font color="#CCCCCC">this demo so I have a file this is a</font>

732
00:32:35,230 --> 00:32:38,980
label based issue i'm going to show you

733
00:32:36,730 --> 00:32:43,270
this is really<font color="#CCCCCC"> common</font><font color="#E5E5E5"> i have a file here</font>

734
00:32:38,980 --> 00:32:46,150
called a demo dot HTML and the label<font color="#CCCCCC"> of</font>

735
00:32:43,270 --> 00:32:51,490
it is user temp a user temp run out of

736
00:32:46,150 --> 00:32:54,400
our ww probably not so we're getting

737
00:32:51,490 --> 00:32:55,690
forbidden on a file that has 64 for

738
00:32:54,400 --> 00:33:00,760
permissions that should be readable

739
00:32:55,690 --> 00:33:02,800
right well it because the label here the

740
00:33:00,760 --> 00:33:05,920
mandatory access control label user temp

741
00:33:02,800 --> 00:33:09,700
is not a<font color="#CCCCCC"> thora tative or is not part of</font>

742
00:33:05,920 --> 00:33:12,250
policy or that domain so one commands<font color="#E5E5E5"> i</font>

743
00:33:09,700 --> 00:33:14,370
mentioned for silver contacts or restore

744
00:33:12,250 --> 00:33:20,850
label

745
00:33:14,370 --> 00:33:22,919
uh demo right Oh HTML to him and I

746
00:33:20,850 --> 00:33:29,070
generally you verbose i did not that

747
00:33:22,920 --> 00:33:31,200
time but<font color="#CCCCCC"> alright so change it to issue</font>

748
00:33:29,070 --> 00:33:32,490
visas content team but the same thing<font color="#CCCCCC"> i</font>

749
00:33:31,200 --> 00:33:34,890
didn't change any of the discretionary

750
00:33:32,490 --> 00:33:40,990
permissions on you read this the page

751
00:33:34,890 --> 00:33:43,360
loaded that's my clever phrase all right

752
00:33:40,990 --> 00:33:48,570
that's pretty<font color="#CCCCCC"> much the end of the demo</font>

753
00:33:43,360 --> 00:33:48,570
there<font color="#E5E5E5"> I'm gonna end of it yes</font>

754
00:33:57,650 --> 00:34:04,760
so<font color="#CCCCCC"> um be yeah when it's</font><font color="#E5E5E5"> not an enforcing</font>

755
00:34:01,110 --> 00:34:08,129
mode and that this<font color="#E5E5E5"> is a good question</font><font color="#CCCCCC"> um</font>

756
00:34:04,760 --> 00:34:09,989
when<font color="#CCCCCC"> for instance when you're setting up</font>

757
00:34:08,129 --> 00:34:12,540
server a server from scratch or

758
00:34:09,989 --> 00:34:13,979
something of that nature and something

759
00:34:12,540 --> 00:34:15,869
comes along like you<font color="#CCCCCC"> want</font><font color="#E5E5E5"> to do you use</font>

760
00:34:13,980 --> 00:34:20,580
additional ports like i<font color="#CCCCCC"> just showed with</font>

761
00:34:15,869 --> 00:34:22,730
apache it may be more beneficial to run

762
00:34:20,580 --> 00:34:24,750
in the permissive<font color="#CCCCCC"> bow temporarily</font>

763
00:34:22,730 --> 00:34:29,250
because you may have more than one

764
00:34:24,750 --> 00:34:31,168
denial that comes through and after<font color="#E5E5E5"> the</font>

765
00:34:29,250 --> 00:34:34,020
first one it can't get move on to the

766
00:34:31,168 --> 00:34:35,730
next<font color="#E5E5E5"> thing that wasn't allowed so for</font>

767
00:34:34,020 --> 00:34:37,379
non-production systems that that's

768
00:34:35,730 --> 00:34:42,119
probably<font color="#E5E5E5"> the recommended way of going</font>

769
00:34:37,379 --> 00:34:43,500
through initially because very often you

770
00:34:42,119 --> 00:34:45,659
could come across seven things in a row

771
00:34:43,500 --> 00:34:47,580
that get denied in a you don't<font color="#E5E5E5"> want to</font>

772
00:34:45,659 --> 00:34:50,849
be<font color="#E5E5E5"> making seven modules that is a very</font>

773
00:34:47,580 --> 00:34:53,909
<font color="#E5E5E5">good point do</font><font color="#CCCCCC"> I wouldn't recommend it in</font>

774
00:34:50,849 --> 00:34:56,399
an operational environment but yeah

775
00:34:53,909 --> 00:34:58,550
that's<font color="#E5E5E5"> a very good good point did put it</font>

776
00:34:56,399 --> 00:34:58,549
there

777
00:34:59,300 --> 00:35:03,450
alright so my resolution<font color="#E5E5E5"> is not changing</font>

778
00:35:01,650 --> 00:35:07,170
back

779
00:35:03,450 --> 00:35:10,098
all right well that's<font color="#E5E5E5"> interesting that's</font>

780
00:35:07,170 --> 00:35:10,099
not<font color="#E5E5E5"> what I have up here all</font>

781
00:35:10,119 --> 00:35:18,579
I so these<font color="#E5E5E5"> are</font><font color="#CCCCCC"> just some resources that</font>

782
00:35:16,839 --> 00:35:21,670
can be referenced for further

783
00:35:18,579 --> 00:35:23,499
information the selinux project wiki is

784
00:35:21,670 --> 00:35:26,559
the first link that's<font color="#E5E5E5"> probably the most</font>

785
00:35:23,499 --> 00:35:28,868
valuable one on here ens a link on here

786
00:35:26,559 --> 00:35:30,609
is just kind of historical data there's

787
00:35:28,869 --> 00:35:32,470
not too much more to that the genteel

788
00:35:30,609 --> 00:35:35,440
wiki has some real crazy stuff but it's

789
00:35:32,470 --> 00:35:37,930
great I mean it's been two and then of

790
00:35:35,440 --> 00:35:42,130
course<font color="#E5E5E5"> got man pages you can just pull</font>

791
00:35:37,930 --> 00:35:43,808
up anything that<font color="#E5E5E5"> has selinux and if</font>

792
00:35:42,130 --> 00:35:45,190
<font color="#E5E5E5">anyone has any further questions that</font>

793
00:35:43,809 --> 00:35:46,630
that's that's the end of this

794
00:35:45,190 --> 00:35:49,450
presentation I'll pull up<font color="#E5E5E5"> one more slide</font>

795
00:35:46,630 --> 00:35:51,999
that have all the kind of a command<font color="#E5E5E5"> list</font>

796
00:35:49,450 --> 00:35:53,589
of things I wanted to cover these are

797
00:35:51,999 --> 00:35:55,480
things that will<font color="#E5E5E5"> help you but if anyone</font>

798
00:35:53,589 --> 00:35:57,930
<font color="#E5E5E5">has any questions feel free to go ahead</font>

799
00:35:55,480 --> 00:35:57,930
yeah

800
00:36:09,770 --> 00:36:12,490
uh-huh

801
00:36:17,940 --> 00:36:29,200
um I'm sorry you said yeah I<font color="#E5E5E5"> don't know</font>

802
00:36:27,280 --> 00:36:31,060
it offhand but as<font color="#CCCCCC"> s you manage has the</font>

803
00:36:29,200 --> 00:36:33,189
ability to I<font color="#CCCCCC"> think</font><font color="#E5E5E5"> it's a capital C with</font>

804
00:36:31,060 --> 00:36:36,130
everything you throw at it it lists all

805
00:36:33,190 --> 00:36:39,720
the local modifications and additionally

806
00:36:36,130 --> 00:36:39,720
just as a kind of<font color="#E5E5E5"> a best practice thing</font>

807
00:36:40,020 --> 00:36:45,520
in my operational environments<font color="#E5E5E5"> I will</font>

808
00:36:43,180 --> 00:36:48,580
prefix any modules that make with like

809
00:36:45,520 --> 00:36:50,590
local or or the host name of the system

810
00:36:48,580 --> 00:36:53,549
so you know that those weren't the

811
00:36:50,590 --> 00:36:58,570
modules that came with any sort of

812
00:36:53,550 --> 00:36:59,980
distribution policy I don't know I don't

813
00:36:58,570 --> 00:37:01,420
<font color="#E5E5E5">have it all found I believe its capital</font>

814
00:36:59,980 --> 00:37:03,840
<font color="#E5E5E5">C where it shows all the local changes</font>

815
00:37:01,420 --> 00:37:07,090
when you're looking at us he managed and

816
00:37:03,840 --> 00:37:09,580
their sub quarterback set subcategories

817
00:37:07,090 --> 00:37:12,270
he managed like<font color="#E5E5E5"> four contacts and</font>

818
00:37:09,580 --> 00:37:15,270
bullion's and<font color="#E5E5E5"> whatnot it's very powerful</font>

819
00:37:12,270 --> 00:37:15,270
yes

820
00:37:16,190 --> 00:37:24,040
yes yes you can um so with the dip with

821
00:37:21,020 --> 00:37:27,780
the distribution modules

822
00:37:24,040 --> 00:37:30,279
they sit in<font color="#CCCCCC"> a depending on which version</font>

823
00:37:27,780 --> 00:37:32,200
or which district<font color="#CCCCCC"> Lennox you're running</font>

824
00:37:30,280 --> 00:37:34,240
they sit in different places I'm just

825
00:37:32,200 --> 00:37:35,770
<font color="#E5E5E5">going to say there in a sec selinux and</font>

826
00:37:34,240 --> 00:37:38,850
then targeted for the targeted policy

827
00:37:35,770 --> 00:37:38,850
all the distribution ones

828
00:37:39,470 --> 00:37:43,160
you'd have<font color="#CCCCCC"> to actually remove a</font>

829
00:37:40,910 --> 00:37:44,509
distribution module from the<font color="#CCCCCC"> active</font>

830
00:37:43,160 --> 00:37:45,890
kernel and then if you wanted to re-add

831
00:37:44,510 --> 00:37:48,260
it you have to point back to etsy

832
00:37:45,890 --> 00:37:53,359
selinux targeted but yeah you can add

833
00:37:48,260 --> 00:37:54,550
remove<font color="#CCCCCC"> at will and yeah it's it's rare</font>

834
00:37:53,359 --> 00:37:57,560
that I've had to do with the

835
00:37:54,550 --> 00:37:59,810
distribution policy they've gotten

836
00:37:57,560 --> 00:38:01,849
pretty<font color="#CCCCCC"> good by the time i got the rail</font>

837
00:37:59,810 --> 00:38:06,720
<font color="#CCCCCC">six real seven but yeah it certainly can</font>

838
00:38:01,849 --> 00:38:08,580
be done we have any uh anyone else

839
00:38:06,720 --> 00:38:10,410
all right<font color="#CCCCCC"> thank you</font><font color="#E5E5E5"> all for</font><font color="#CCCCCC"> coming to</font>

840
00:38:08,580 --> 00:38:13,170
this presentation I know it was a lot

841
00:38:10,410 --> 00:38:17,220
and<font color="#E5E5E5"> I want to thank well then it besides</font>

842
00:38:13,170 --> 00:38:19,050
for let me present on a very I'm very

843
00:38:17,220 --> 00:38:22,890
interesting topic and something that's

844
00:38:19,050 --> 00:38:25,340
<font color="#CCCCCC">very uh close close to me yeah</font><font color="#E5E5E5"> was weird</font>

845
00:38:22,890 --> 00:38:25,339
all right

