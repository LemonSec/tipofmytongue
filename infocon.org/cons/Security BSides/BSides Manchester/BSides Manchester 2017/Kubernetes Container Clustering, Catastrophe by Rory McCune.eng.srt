1
00:00:02,570 --> 00:00:07,439
<font color="#E5E5E5">okay afternoon everyone welcome</font><font color="#CCCCCC"> to the</font>

2
00:00:05,819 --> 00:00:09,600
sleepy<font color="#CCCCCC"> Gaul by buying</font><font color="#E5E5E5"> after</font><font color="#CCCCCC"> lunch time</font>

3
00:00:07,440 --> 00:00:11,639
slot<font color="#CCCCCC"> ice will try to</font><font color="#E5E5E5"> keep people awake</font>

4
00:00:09,600 --> 00:00:15,209
<font color="#CCCCCC">um so this</font><font color="#E5E5E5"> talk today is about</font>

5
00:00:11,639 --> 00:00:17,730
kubernetes<font color="#E5E5E5"> you can see quite a lot of</font>

6
00:00:15,209 --> 00:00:19,500
nautical imagery<font color="#E5E5E5"> docker and kubernetes</font>

7
00:00:17,730 --> 00:00:20,880
<font color="#E5E5E5">projects seem to love the</font><font color="#CCCCCC"> analogies</font><font color="#E5E5E5"> to</font>

8
00:00:19,500 --> 00:00:22,590
<font color="#E5E5E5">do with like container shipping</font>

9
00:00:20,880 --> 00:00:25,169
containers<font color="#CCCCCC"> they've taken</font><font color="#E5E5E5"> it really far</font>

10
00:00:22,590 --> 00:00:26,009
so kubernetes is<font color="#E5E5E5"> Greek for steersman so</font>

11
00:00:25,170 --> 00:00:27,870
I thought well<font color="#CCCCCC"> that's a good</font><font color="#E5E5E5"> opportunity</font>

12
00:00:26,010 --> 00:00:30,660
<font color="#E5E5E5">to find some nice</font><font color="#CCCCCC"> pictures to</font><font color="#E5E5E5"> put in the</font>

13
00:00:27,870 --> 00:00:32,399
presentation<font color="#CCCCCC"> just before I</font><font color="#E5E5E5"> get started</font>

14
00:00:30,660 --> 00:00:35,010
<font color="#E5E5E5">I'd guess if people heard it I guess he</font>

15
00:00:32,399 --> 00:00:37,200
heard of kubernetes<font color="#E5E5E5"> is</font><font color="#CCCCCC"> a yes</font><font color="#E5E5E5"> usually</font>

16
00:00:35,010 --> 00:00:40,440
protectees like<font color="#E5E5E5"> to</font><font color="#CCCCCC"> fire</font><font color="#E5E5E5"> either running</font>

17
00:00:37,200 --> 00:00:41,670
<font color="#E5E5E5">it in production to do brave people</font>

18
00:00:40,440 --> 00:00:43,260
running in production fantastic

19
00:00:41,670 --> 00:00:45,300
<font color="#E5E5E5">excellent so hopefully some of this will</font>

20
00:00:43,260 --> 00:00:46,949
<font color="#CCCCCC">be interesting</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> I'm what I'm going to</font>

21
00:00:45,300 --> 00:00:49,828
do as I got involved<font color="#CCCCCC"> in kubernetes about</font>

22
00:00:46,950 --> 00:00:52,170
just over<font color="#CCCCCC"> a year</font><font color="#E5E5E5"> ago</font><font color="#CCCCCC"> it was about</font><font color="#E5E5E5"> middle</font>

23
00:00:49,829 --> 00:00:53,579
of summer<font color="#E5E5E5"> last year and it was how I</font>

24
00:00:52,170 --> 00:00:56,460
<font color="#E5E5E5">usually get involved in new things</font><font color="#CCCCCC"> which</font>

25
00:00:53,579 --> 00:00:58,110
was client came along said you know

26
00:00:56,460 --> 00:00:59,550
about<font color="#E5E5E5"> docker so people</font><font color="#CCCCCC"> said oh</font><font color="#E5E5E5"> well you</font>

27
00:00:58,110 --> 00:01:01,920
<font color="#E5E5E5">can't talk to people of kubernetes that</font>

28
00:00:59,550 --> 00:01:03,089
I said what<font color="#CCCCCC"> so I did a</font><font color="#E5E5E5"> better reading</font>

29
00:01:01,920 --> 00:01:06,240
and try to work<font color="#E5E5E5"> out</font><font color="#CCCCCC"> what this kubernetes</font>

30
00:01:03,090 --> 00:01:07,289
thing was and<font color="#CCCCCC"> after a while I found</font><font color="#E5E5E5"> some</font>

31
00:01:06,240 --> 00:01:08,579
<font color="#E5E5E5">stuff which was quite</font><font color="#CCCCCC"> interesting on</font><font color="#E5E5E5"> it</font>

32
00:01:07,289 --> 00:01:10,499
was interesting<font color="#CCCCCC"> to me about</font><font color="#E5E5E5"> how this</font>

33
00:01:08,579 --> 00:01:11,759
<font color="#E5E5E5">this product was developed and that's</font>

34
00:01:10,499 --> 00:01:13,350
where this presentation came out of

35
00:01:11,759 --> 00:01:14,729
really<font color="#E5E5E5"> it was from my explorations</font>

36
00:01:13,350 --> 00:01:16,318
around kubernetes and<font color="#E5E5E5"> things I've found</font>

37
00:01:14,729 --> 00:01:17,909
<font color="#CCCCCC">that could be interesting if you're</font>

38
00:01:16,319 --> 00:01:19,020
looking at it or things I've found<font color="#E5E5E5"> that</font>

39
00:01:17,909 --> 00:01:20,909
might be interesting if you want to

40
00:01:19,020 --> 00:01:22,139
break<font color="#E5E5E5"> into it so if</font><font color="#CCCCCC"> your</font><font color="#E5E5E5"> security</font><font color="#CCCCCC"> tester</font>

41
00:01:20,909 --> 00:01:24,479
you might start running<font color="#E5E5E5"> into this stuff</font>

42
00:01:22,139 --> 00:01:26,039
on day to<font color="#E5E5E5"> day basis and it's kind of</font>

43
00:01:24,479 --> 00:01:29,069
there's some stuff to know<font color="#E5E5E5"> but that's</font>

44
00:01:26,039 --> 00:01:31,499
<font color="#E5E5E5">what this is about very brief about me</font>

45
00:01:29,069 --> 00:01:34,859
<font color="#E5E5E5">I've been in security for a large number</font>

46
00:01:31,499 --> 00:01:36,779
of<font color="#E5E5E5"> years</font><font color="#CCCCCC"> I'm a man to consult the NCC a</font>

47
00:01:34,859 --> 00:01:37,949
<font color="#E5E5E5">contributor at security Stack Exchange</font>

48
00:01:36,779 --> 00:01:39,389
<font color="#E5E5E5">people heard of security Stack Exchange</font>

49
00:01:37,950 --> 00:01:41,189
so I've asked<font color="#E5E5E5"> the question started yeah</font>

50
00:01:39,389 --> 00:01:42,298
cool so if you<font color="#E5E5E5"> haven't heard</font><font color="#CCCCCC"> of it</font><font color="#E5E5E5"> it's</font>

51
00:01:41,189 --> 00:01:45,208
really<font color="#E5E5E5"> useful it's like Stack Overflow</font>

52
00:01:42,299 --> 00:01:46,649
<font color="#E5E5E5">but for security questions</font><font color="#CCCCCC"> and there's</font>

53
00:01:45,209 --> 00:01:47,849
lots of<font color="#E5E5E5"> helpful people there who are</font>

54
00:01:46,649 --> 00:01:49,200
happy to answer questions

55
00:01:47,849 --> 00:01:50,759
it's<font color="#E5E5E5"> a good place to go if</font><font color="#CCCCCC"> you have</font>

56
00:01:49,200 --> 00:01:53,639
<font color="#E5E5E5">questions I'm also a contributing author</font>

57
00:01:50,759 --> 00:01:55,319
to the<font color="#E5E5E5"> CIS docker Kibera</font><font color="#CCCCCC"> aunty standards</font>

58
00:01:53,639 --> 00:01:56,458
<font color="#E5E5E5">so there are a</font><font color="#CCCCCC"> couple of standards one</font>

59
00:01:55,319 --> 00:01:57,959
of the things I noticed when<font color="#E5E5E5"> I</font><font color="#CCCCCC"> started</font>

60
00:01:56,459 --> 00:02:00,479
looking<font color="#CCCCCC"> at kubernetes was there was very</font>

61
00:01:57,959 --> 00:02:02,939
little documentation<font color="#E5E5E5"> about security</font><font color="#CCCCCC"> so</font>

62
00:02:00,479 --> 00:02:04,590
<font color="#CCCCCC">luckily a guy started</font><font color="#E5E5E5"> out a standard</font><font color="#CCCCCC"> for</font>

63
00:02:02,939 --> 00:02:05,788
it till in<font color="#E5E5E5"> the last year and we've got</font>

64
00:02:04,590 --> 00:02:08,039
that<font color="#CCCCCC"> freshness at you up-to-date with</font>

65
00:02:05,789 --> 00:02:09,239
<font color="#E5E5E5">the labor actually kubernetes net 1.7 so</font>

66
00:02:08,038 --> 00:02:10,859
that's kind of worth looking at<font color="#E5E5E5"> as well</font>

67
00:02:09,239 --> 00:02:12,720
I'll talk<font color="#CCCCCC"> a</font><font color="#E5E5E5"> bit more about that as</font><font color="#CCCCCC"> we go</font>

68
00:02:10,860 --> 00:02:15,360
through<font color="#E5E5E5"> what we're going to talk about</font>

69
00:02:12,720 --> 00:02:16,319
<font color="#E5E5E5">today start off with kubernetes</font>

70
00:02:15,360 --> 00:02:18,450
architecture

71
00:02:16,319 --> 00:02:19,530
how does this thing<font color="#E5E5E5"> actually work I'm</font>

72
00:02:18,450 --> 00:02:20,458
gonna<font color="#E5E5E5"> go to bed about that</font><font color="#CCCCCC"> I always</font>

73
00:02:19,530 --> 00:02:22,170
<font color="#E5E5E5">think it's really important you're</font>

74
00:02:20,459 --> 00:02:23,579
getting to a new topic is you have to

75
00:02:22,170 --> 00:02:25,260
understand how it works<font color="#CCCCCC"> before you</font><font color="#E5E5E5"> can</font>

76
00:02:23,579 --> 00:02:26,909
understand<font color="#E5E5E5"> how to break it or it's a lot</font>

77
00:02:25,260 --> 00:02:29,069
easier<font color="#CCCCCC"> if</font><font color="#E5E5E5"> you do understand how it works</font>

78
00:02:26,909 --> 00:02:31,290
so<font color="#CCCCCC"> what going to</font><font color="#E5E5E5"> be</font><font color="#CCCCCC"> a bit</font><font color="#E5E5E5"> of</font><font color="#CCCCCC"> high-level</font>

79
00:02:29,069 --> 00:02:33,179
<font color="#E5E5E5">better talk about</font><font color="#CCCCCC"> that we're</font><font color="#E5E5E5"> going to</font>

80
00:02:31,290 --> 00:02:34,200
talk about<font color="#E5E5E5"> deployment options because</font>

81
00:02:33,180 --> 00:02:35,760
one<font color="#CCCCCC"> of the things I</font><font color="#E5E5E5"> found out</font><font color="#CCCCCC"> when I</font>

82
00:02:34,200 --> 00:02:37,708
started looking<font color="#CCCCCC"> at this was there isn't</font>

83
00:02:35,760 --> 00:02:39,510
just one<font color="#CCCCCC"> way to</font><font color="#E5E5E5"> rule this out there's</font>

84
00:02:37,709 --> 00:02:41,129
<font color="#E5E5E5">lots of different ways and it</font><font color="#CCCCCC"> really</font>

85
00:02:39,510 --> 00:02:42,599
<font color="#E5E5E5">matters when you're coming to look at it</font>

86
00:02:41,129 --> 00:02:46,499
in terms of<font color="#CCCCCC"> security</font><font color="#E5E5E5"> how it's been ruled</font>

87
00:02:42,599 --> 00:02:47,969
out threat model if no one attacks my

88
00:02:46,499 --> 00:02:50,189
system<font color="#E5E5E5"> it doesn't really matter how</font>

89
00:02:47,969 --> 00:02:52,138
secure it is so who is going to attack a

90
00:02:50,189 --> 00:02:54,030
kubernetes cluster<font color="#E5E5E5"> how might they want</font>

91
00:02:52,139 --> 00:02:55,139
<font color="#E5E5E5">to attack</font><font color="#CCCCCC"> it so we're gonna try</font><font color="#E5E5E5"> and walk</font>

92
00:02:54,030 --> 00:02:56,340
through some<font color="#E5E5E5"> of the common attack</font>

93
00:02:55,139 --> 00:02:59,370
scenarios to see<font color="#E5E5E5"> have something might</font>

94
00:02:56,340 --> 00:03:01,409
<font color="#E5E5E5">break into something and key security</font>

95
00:02:59,370 --> 00:03:02,609
concerns<font color="#E5E5E5"> no point talking about how to</font>

96
00:03:01,409 --> 00:03:04,078
break<font color="#CCCCCC"> into</font><font color="#E5E5E5"> it I can't talk about how to</font>

97
00:03:02,609 --> 00:03:05,280
fix the problems so we'll talk<font color="#CCCCCC"> about</font>

98
00:03:04,079 --> 00:03:06,659
<font color="#E5E5E5">some of the settings you should look at</font>

99
00:03:05,280 --> 00:03:11,400
here deploying this to make it<font color="#E5E5E5"> a bit</font>

100
00:03:06,659 --> 00:03:13,918
<font color="#E5E5E5">more secure what is it first</font><font color="#CCCCCC"> thing</font><font color="#E5E5E5"> start</font>

101
00:03:11,400 --> 00:03:16,739
off with so the kubernetes website will

102
00:03:13,919 --> 00:03:18,750
<font color="#E5E5E5">describe it as an open source system for</font>

103
00:03:16,739 --> 00:03:21,239
automating deploying scaling management

104
00:03:18,750 --> 00:03:22,229
of<font color="#E5E5E5"> containerized applications it groups</font>

105
00:03:21,239 --> 00:03:23,909
containers that<font color="#E5E5E5"> make up an application</font>

106
00:03:22,229 --> 00:03:26,449
<font color="#CCCCCC">it's logical units for easy management</font>

107
00:03:23,909 --> 00:03:29,819
<font color="#E5E5E5">and discovery isn't that emmaus full</font>

108
00:03:26,449 --> 00:03:30,900
basically it's a way<font color="#CCCCCC"> of</font><font color="#E5E5E5"> making letting</font>

109
00:03:29,819 --> 00:03:32,909
<font color="#CCCCCC">people who have want</font><font color="#E5E5E5"> to deploy an</font>

110
00:03:30,900 --> 00:03:34,769
application<font color="#E5E5E5"> and they want to deploy on a</font>

111
00:03:32,909 --> 00:03:36,328
cluster<font color="#E5E5E5"> of containers and they wanted to</font>

112
00:03:34,769 --> 00:03:37,859
have<font color="#E5E5E5"> a nice scalable system and they</font>

113
00:03:36,329 --> 00:03:39,540
want to<font color="#CCCCCC"> just work and they</font><font color="#E5E5E5"> don't want to</font>

114
00:03:37,859 --> 00:03:41,609
have to worry too much about<font color="#E5E5E5"> how the</font>

115
00:03:39,540 --> 00:03:42,720
underlying<font color="#E5E5E5"> cluster does its job they</font>

116
00:03:41,609 --> 00:03:45,540
want to just deal with<font color="#CCCCCC"> our high-level</font>

117
00:03:42,720 --> 00:03:47,069
<font color="#CCCCCC">say here is a</font><font color="#E5E5E5"> system I want now to scale</font>

118
00:03:45,540 --> 00:03:48,870
this I want<font color="#E5E5E5"> to make it work I want to</font>

119
00:03:47,069 --> 00:03:50,698
<font color="#E5E5E5">upgrade to a new version and I just</font>

120
00:03:48,870 --> 00:03:52,019
wanted<font color="#E5E5E5"> to work and the idea</font><font color="#CCCCCC"> is</font>

121
00:03:50,699 --> 00:03:54,000
kubernetes kind of takes away<font color="#E5E5E5"> a lot of</font>

122
00:03:52,019 --> 00:03:55,560
<font color="#CCCCCC">those concerns in theory</font><font color="#E5E5E5"> abstract them</font>

123
00:03:54,000 --> 00:03:57,449
away and lets you as a developer that

124
00:03:55,560 --> 00:03:59,879
<font color="#CCCCCC">you're a developer</font><font color="#E5E5E5"> system not have to</font>

125
00:03:57,449 --> 00:04:02,069
worry too much about them it's last

126
00:03:59,879 --> 00:04:03,509
<font color="#E5E5E5">theory</font><font color="#CCCCCC"> Fujii background</font><font color="#E5E5E5"> just give me a</font>

127
00:04:02,069 --> 00:04:06,268
bit where it's come from<font color="#E5E5E5"> started by</font>

128
00:04:03,509 --> 00:04:07,888
Google in 2014<font color="#E5E5E5"> so Google run everything</font>

129
00:04:06,269 --> 00:04:09,739
<font color="#E5E5E5">they do in containers and they had a</font>

130
00:04:07,889 --> 00:04:11,250
<font color="#E5E5E5">system internal system called</font><font color="#CCCCCC"> Borg</font>

131
00:04:09,739 --> 00:04:12,299
<font color="#CCCCCC">basically some people said</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> was</font>

132
00:04:11,250 --> 00:04:13,859
<font color="#CCCCCC">really</font><font color="#E5E5E5"> nice it</font><font color="#CCCCCC"> was</font><font color="#E5E5E5"> an</font><font color="#CCCCCC"> open source</font>

133
00:04:12,299 --> 00:04:15,569
<font color="#CCCCCC">outside</font><font color="#E5E5E5"> version of this Borg thing</font>

134
00:04:13,859 --> 00:04:19,799
so some people<font color="#E5E5E5"> from Google starts with</font>

135
00:04:15,569 --> 00:04:21,570
kubernetes in 2014 in 2015 that got its

136
00:04:19,798 --> 00:04:23,039
1.0 release<font color="#E5E5E5"> so the very first public</font>

137
00:04:21,570 --> 00:04:25,320
version<font color="#E5E5E5"> so it's pretty new we're talking</font>

138
00:04:23,039 --> 00:04:26,400
like sub<font color="#E5E5E5"> two years I think</font><font color="#CCCCCC"> it is</font><font color="#E5E5E5"> two</font>

139
00:04:25,320 --> 00:04:29,260
year<font color="#E5E5E5"> anniversary the first public</font>

140
00:04:26,400 --> 00:04:30,310
<font color="#E5E5E5">release just now and it's managed</font>

141
00:04:29,260 --> 00:04:31,990
something called<font color="#CCCCCC"> the</font><font color="#E5E5E5"> cloud native</font>

142
00:04:30,310 --> 00:04:34,330
computing foundation which you might

143
00:04:31,990 --> 00:04:35,860
well<font color="#CCCCCC"> not have heard of</font><font color="#E5E5E5"> but all the big</font>

144
00:04:34,330 --> 00:04:39,640
cloud players<font color="#E5E5E5"> are involved so Microsoft</font>

145
00:04:35,860 --> 00:04:40,810
<font color="#E5E5E5">Google Amazon Red Hat IBM you name it if</font>

146
00:04:39,640 --> 00:04:42,640
they're<font color="#E5E5E5"> involved in cloud stuff that</font>

147
00:04:40,810 --> 00:04:43,540
<font color="#E5E5E5">problem members</font><font color="#CCCCCC"> of the CN CF</font><font color="#E5E5E5"> and there's</font>

148
00:04:42,640 --> 00:04:45,310
a whole<font color="#E5E5E5"> world of projects of which</font>

149
00:04:43,540 --> 00:04:47,530
kubernetes<font color="#E5E5E5"> is probably the biggest that</font>

150
00:04:45,310 --> 00:04:49,600
come<font color="#E5E5E5"> under their banner</font><font color="#CCCCCC"> and rapid</font>

151
00:04:47,530 --> 00:04:50,919
<font color="#E5E5E5">deployment and rapid adoption</font>

152
00:04:49,600 --> 00:04:52,540
it's fair<font color="#E5E5E5"> to</font><font color="#CCCCCC"> say that</font><font color="#E5E5E5"> this is a very</font>

153
00:04:50,920 --> 00:04:53,980
quick moving project<font color="#E5E5E5"> basically new</font>

154
00:04:52,540 --> 00:04:55,210
releases every three months<font color="#E5E5E5"> which is a</font>

155
00:04:53,980 --> 00:04:56,830
nightmare<font color="#E5E5E5"> if</font><font color="#CCCCCC"> you're a security</font><font color="#E5E5E5"> person</font>

156
00:04:55,210 --> 00:04:58,270
<font color="#E5E5E5">because it means things change every</font>

157
00:04:56,830 --> 00:04:59,650
<font color="#E5E5E5">three months and something you can tell</font>

158
00:04:58,270 --> 00:05:00,789
someone<font color="#E5E5E5"> give us some advice</font><font color="#CCCCCC"> new version</font>

159
00:04:59,650 --> 00:05:02,049
comes<font color="#E5E5E5"> out certainly the advice</font><font color="#CCCCCC"> doesn't</font>

160
00:05:00,790 --> 00:05:04,810
work anymore because<font color="#E5E5E5"> something's changed</font>

161
00:05:02,050 --> 00:05:06,490
<font color="#CCCCCC">and rapid adoption is fair to</font><font color="#E5E5E5"> say as</font>

162
00:05:04,810 --> 00:05:08,800
well<font color="#E5E5E5"> when I started</font><font color="#CCCCCC"> looking</font><font color="#E5E5E5"> at this I</font>

163
00:05:06,490 --> 00:05:11,200
was<font color="#E5E5E5"> quite surprised because companies</font>

164
00:05:08,800 --> 00:05:13,480
from<font color="#E5E5E5"> financial services so our bank</font>

165
00:05:11,200 --> 00:05:14,560
called<font color="#CCCCCC"> Monza they</font><font color="#E5E5E5"> used kubernetes</font><font color="#CCCCCC"> and</font>

166
00:05:13,480 --> 00:05:16,260
they would be<font color="#CCCCCC"> talking</font><font color="#E5E5E5"> about how they've</font>

167
00:05:14,560 --> 00:05:18,730
used<font color="#E5E5E5"> it for quite some time</font><font color="#CCCCCC"> and publicly</font>

168
00:05:16,260 --> 00:05:21,010
<font color="#E5E5E5">so they're big</font><font color="#CCCCCC"> use that's get use</font>

169
00:05:18,730 --> 00:05:22,240
<font color="#CCCCCC">they're the UK</font><font color="#E5E5E5"> Home Office</font><font color="#CCCCCC"> our bigger</font>

170
00:05:21,010 --> 00:05:23,650
users of kubernetes and<font color="#E5E5E5"> they've done</font>

171
00:05:22,240 --> 00:05:25,960
presentations publicly about how they

172
00:05:23,650 --> 00:05:28,090
use give or<font color="#E5E5E5"> Nettie's so using the public</font>

173
00:05:25,960 --> 00:05:30,430
<font color="#E5E5E5">sector it's also used in places like</font>

174
00:05:28,090 --> 00:05:31,659
<font color="#E5E5E5">Walmart and Cod or both recently did</font>

175
00:05:30,430 --> 00:05:33,130
announcements<font color="#E5E5E5"> about how they were moving</font>

176
00:05:31,660 --> 00:05:34,360
to<font color="#CCCCCC"> kurban actus</font><font color="#E5E5E5"> they were deploying a</font>

177
00:05:33,130 --> 00:05:35,860
lot there so<font color="#E5E5E5"> we're seeing a lot of</font>

178
00:05:34,360 --> 00:05:37,390
<font color="#CCCCCC">Industry adoption of this this</font><font color="#E5E5E5"> isn't</font>

179
00:05:35,860 --> 00:05:38,590
<font color="#E5E5E5">just something that you know some</font><font color="#CCCCCC"> people</font>

180
00:05:37,390 --> 00:05:42,630
are playing<font color="#E5E5E5"> with we're seeing large</font>

181
00:05:38,590 --> 00:05:42,630
companies really getting into this stuff

182
00:05:42,720 --> 00:05:47,050
so let's talk<font color="#CCCCCC"> about the architecture</font>

183
00:05:44,440 --> 00:05:48,820
<font color="#E5E5E5">let's talk about how it all works first</font>

184
00:05:47,050 --> 00:05:54,970
however<font color="#E5E5E5"> I'm sufficiently mad to find</font><font color="#CCCCCC"> new</font>

185
00:05:48,820 --> 00:05:55,719
demos so let's do some demos<font color="#CCCCCC"> ok I have</font>

186
00:05:54,970 --> 00:05:58,030
<font color="#E5E5E5">got a</font><font color="#CCCCCC"> cluster</font>

187
00:05:55,720 --> 00:05:59,740
<font color="#E5E5E5">I'll using this this command cube CTL is</font>

188
00:05:58,030 --> 00:06:01,299
basically how<font color="#E5E5E5"> you interact with clusters</font>

189
00:05:59,740 --> 00:06:04,110
that<font color="#CCCCCC"> curate these</font><font color="#E5E5E5"> clusters pretty much</font>

190
00:06:01,300 --> 00:06:06,370
at the<font color="#CCCCCC"> moment</font><font color="#E5E5E5"> I don't have any services</font>

191
00:06:04,110 --> 00:06:07,720
<font color="#E5E5E5">so I just have</font><font color="#CCCCCC"> to kubernetes service now</font>

192
00:06:06,370 --> 00:06:08,920
that's the service<font color="#CCCCCC"> that has to run to</font>

193
00:06:07,720 --> 00:06:11,410
<font color="#E5E5E5">meet the cluster work so it's just</font>

194
00:06:08,920 --> 00:06:12,520
<font color="#E5E5E5">sitting there what</font><font color="#CCCCCC"> I can do is I can say</font>

195
00:06:11,410 --> 00:06:19,150
cube

196
00:06:12,520 --> 00:06:20,080
CTL create<font color="#E5E5E5"> -</font><font color="#CCCCCC"> eff example and</font><font color="#E5E5E5"> it'll go</font>

197
00:06:19,150 --> 00:06:21,700
<font color="#E5E5E5">away and it says here I'm going to</font>

198
00:06:20,080 --> 00:06:25,060
create some stuff now<font color="#E5E5E5"> well how did</font><font color="#CCCCCC"> it do</font>

199
00:06:21,700 --> 00:06:25,840
that what it did if I find example that

200
00:06:25,060 --> 00:06:27,730
yeah here we<font color="#CCCCCC"> go</font>

201
00:06:25,840 --> 00:06:30,460
<font color="#E5E5E5">basically everything in kubernetes land</font>

202
00:06:27,730 --> 00:06:32,890
uses<font color="#E5E5E5"> Yammer so what you do is you chuck</font>

203
00:06:30,460 --> 00:06:34,120
<font color="#CCCCCC">Yambol</font><font color="#E5E5E5"> files at the server you say I'm</font>

204
00:06:32,890 --> 00:06:36,039
<font color="#E5E5E5">going to tell you how this</font><font color="#CCCCCC"> application</font>

205
00:06:34,120 --> 00:06:38,320
is defined in this<font color="#CCCCCC"> llamó file</font><font color="#E5E5E5"> you will</font>

206
00:06:36,040 --> 00:06:40,300
go<font color="#E5E5E5"> and create it for me and</font><font color="#CCCCCC"> that why</font>

207
00:06:38,320 --> 00:06:42,280
just<font color="#CCCCCC"> chuck that it was this</font><font color="#E5E5E5"> and this</font>

208
00:06:40,300 --> 00:06:42,920
basically<font color="#E5E5E5"> has a series</font><font color="#CCCCCC"> of containers</font>

209
00:06:42,280 --> 00:06:45,020
<font color="#CCCCCC">soon as that</font>

210
00:06:42,920 --> 00:06:46,070
occasions and it defines how they work

211
00:06:45,020 --> 00:06:49,789
and how<font color="#E5E5E5"> they interact with each other</font>

212
00:06:46,070 --> 00:06:54,349
<font color="#E5E5E5">and know if I go here and I do cube GTL</font>

213
00:06:49,790 --> 00:06:56,540
get<font color="#E5E5E5"> serviced again you see it</font><font color="#CCCCCC"> the older</font>

214
00:06:54,350 --> 00:06:59,740
services and I've got a port here<font color="#CCCCCC"> of</font>

215
00:06:56,540 --> 00:07:01,100
<font color="#CCCCCC">their</font><font color="#E5E5E5"> 306</font><font color="#CCCCCC"> five two so if I go in here</font>

216
00:06:59,740 --> 00:07:04,100
<font color="#CCCCCC">mm-hmm</font>

217
00:07:01,100 --> 00:07:05,620
and here and I do got<font color="#CCCCCC"> my cure Bonetti is</font>

218
00:07:04,100 --> 00:07:12,020
one and I do

219
00:07:05,620 --> 00:07:12,620
<font color="#E5E5E5">what was that</font><font color="#CCCCCC"> Court 306 where do we get</font>

220
00:07:12,020 --> 00:07:14,330
<font color="#CCCCCC">a guestbook</font>

221
00:07:12,620 --> 00:07:16,310
that's my<font color="#E5E5E5"> applications I was</font><font color="#CCCCCC"> run</font><font color="#E5E5E5"> up two</font>

222
00:07:14,330 --> 00:07:18,409
instances of run end and some Redis

223
00:07:16,310 --> 00:07:22,730
slaves and masters from<font color="#E5E5E5"> that yellow</font><font color="#CCCCCC"> far</font>

224
00:07:18,410 --> 00:07:24,830
<font color="#E5E5E5">and I can</font><font color="#CCCCCC"> say</font><font color="#E5E5E5"> there's a message and it's</font>

225
00:07:22,730 --> 00:07:26,930
a message<font color="#E5E5E5"> and then the interesting thing</font>

226
00:07:24,830 --> 00:07:30,109
is if I go to another node in<font color="#E5E5E5"> my</font><font color="#CCCCCC"> cluster</font>

227
00:07:26,930 --> 00:07:31,550
<font color="#E5E5E5">you know to it exists there too so it's</font>

228
00:07:30,110 --> 00:07:32,930
exposed and it's worked<font color="#E5E5E5"> out how to root</font>

229
00:07:31,550 --> 00:07:34,760
and<font color="#CCCCCC"> it's routing that traffic into</font><font color="#E5E5E5"> my</font>

230
00:07:32,930 --> 00:07:35,990
<font color="#CCCCCC">cluster</font><font color="#E5E5E5"> to one of the application nodes</font>

231
00:07:34,760 --> 00:07:37,670
and it's doing all that for<font color="#CCCCCC"> me I</font><font color="#E5E5E5"> don't</font>

232
00:07:35,990 --> 00:07:39,140
actually need to<font color="#CCCCCC"> know</font><font color="#E5E5E5"> I don't need to</font>

233
00:07:37,670 --> 00:07:40,670
know where those containers are running

234
00:07:39,140 --> 00:07:42,800
<font color="#E5E5E5">I don't need to know how they work I</font>

235
00:07:40,670 --> 00:07:46,910
<font color="#E5E5E5">just need to tell</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> to do it stuff</font><font color="#CCCCCC"> I</font>

236
00:07:42,800 --> 00:07:48,620
might<font color="#CCCCCC"> say hello</font><font color="#E5E5E5"> and it does it so it</font>

237
00:07:46,910 --> 00:07:50,030
works<font color="#CCCCCC"> quite nicely</font><font color="#E5E5E5"> so</font><font color="#CCCCCC"> that's you can see</font>

238
00:07:48,620 --> 00:07:51,860
why<font color="#CCCCCC"> people like like that</font><font color="#E5E5E5"> right if I'm a</font>

239
00:07:50,030 --> 00:07:53,750
<font color="#CCCCCC">developer and I want to deploy</font><font color="#E5E5E5"> something</font>

240
00:07:51,860 --> 00:07:55,400
and I can say to an ops guy or<font color="#CCCCCC"> I could</font>

241
00:07:53,750 --> 00:07:57,050
<font color="#CCCCCC">say dev ops</font><font color="#E5E5E5"> tile I'm just</font><font color="#CCCCCC"> gonna deploy</font>

242
00:07:55,400 --> 00:07:57,349
this<font color="#E5E5E5"> and you pass it to that</font><font color="#CCCCCC"> there</font><font color="#E5E5E5"> you</font>

243
00:07:57,050 --> 00:08:00,230
go

244
00:07:57,350 --> 00:08:02,660
great excellent<font color="#E5E5E5"> works really nicely as</font>

245
00:08:00,230 --> 00:08:05,690
did my demos which is always nice<font color="#E5E5E5"> right</font>

246
00:08:02,660 --> 00:08:07,730
<font color="#E5E5E5">so I don't need that because that's a</font>

247
00:08:05,690 --> 00:08:09,469
<font color="#E5E5E5">video feel</font><font color="#CCCCCC"> it didn't so a little</font><font color="#E5E5E5"> bit</font>

248
00:08:07,730 --> 00:08:10,850
about some terminology<font color="#CCCCCC"> quickly it's</font>

249
00:08:09,470 --> 00:08:12,320
<font color="#CCCCCC">worth kind of covering off scurvy it</font>

250
00:08:10,850 --> 00:08:13,280
started using terminology already and

251
00:08:12,320 --> 00:08:15,440
it's worth mentioning<font color="#CCCCCC"> what they are</font>

252
00:08:13,280 --> 00:08:17,090
containers<font color="#E5E5E5"> if you've not really come</font>

253
00:08:15,440 --> 00:08:18,920
<font color="#E5E5E5">across them it's basically a packaging</font>

254
00:08:17,090 --> 00:08:20,900
mechanism for an<font color="#E5E5E5"> application that gives</font>

255
00:08:18,920 --> 00:08:23,030
you a nice<font color="#E5E5E5"> little way to package up an</font>

256
00:08:20,900 --> 00:08:25,039
application<font color="#E5E5E5"> in a standard format docker</font>

257
00:08:23,030 --> 00:08:27,080
images are the default standard there

258
00:08:25,040 --> 00:08:28,040
are others<font color="#E5E5E5"> however most people</font><font color="#CCCCCC"> they talk</font>

259
00:08:27,080 --> 00:08:31,310
about containers I'm talking about

260
00:08:28,040 --> 00:08:33,080
docker images a pod<font color="#E5E5E5"> humanities has the</font>

261
00:08:31,310 --> 00:08:34,460
idea of<font color="#E5E5E5"> a pod and a pod is a group of</font>

262
00:08:33,080 --> 00:08:36,410
containers<font color="#E5E5E5"> that work really closely</font>

263
00:08:34,460 --> 00:08:37,490
together<font color="#E5E5E5"> so</font><font color="#CCCCCC"> they share a network</font>

264
00:08:36,409 --> 00:08:39,350
<font color="#E5E5E5">namespace if you deploy multiple</font>

265
00:08:37,490 --> 00:08:40,640
containers inside<font color="#E5E5E5"> a pod they get the</font>

266
00:08:39,350 --> 00:08:42,470
same<font color="#E5E5E5"> network stack they get the same</font>

267
00:08:40,640 --> 00:08:44,439
various other namespaces as well so

268
00:08:42,470 --> 00:08:48,230
they're very tightly put together<font color="#E5E5E5"> a</font>

269
00:08:44,440 --> 00:08:50,180
service is what gets exposed<font color="#E5E5E5"> so that I</font>

270
00:08:48,230 --> 00:08:52,940
created three services<font color="#CCCCCC"> there a Redis</font>

271
00:08:50,180 --> 00:08:55,550
service<font color="#CCCCCC"> back-end and front-end and a</font>

272
00:08:52,940 --> 00:08:56,810
<font color="#CCCCCC">front-end web service so basically group</font>

273
00:08:55,550 --> 00:08:59,180
<font color="#E5E5E5">the pods together and</font><font color="#CCCCCC"> cubed</font>

274
00:08:56,810 --> 00:09:01,459
then says the<font color="#CCCCCC"> service gets a stable IP</font>

275
00:08:59,180 --> 00:09:02,510
<font color="#E5E5E5">address the pods</font><font color="#CCCCCC"> they could be created</font>

276
00:09:01,460 --> 00:09:03,890
they could be deleted they<font color="#CCCCCC"> could be</font>

277
00:09:02,510 --> 00:09:05,840
moved<font color="#CCCCCC"> you don't</font><font color="#E5E5E5"> need to know any of</font>

278
00:09:03,890 --> 00:09:07,699
those things<font color="#CCCCCC"> you talk to the service</font><font color="#E5E5E5"> the</font>

279
00:09:05,840 --> 00:09:09,290
<font color="#CCCCCC">service stays put so that's an important</font>

280
00:09:07,700 --> 00:09:10,790
one<font color="#E5E5E5"> and nodes are just notes in my</font>

281
00:09:09,290 --> 00:09:13,730
<font color="#CCCCCC">cluster</font><font color="#E5E5E5"> so you got a number</font><font color="#CCCCCC"> of notes to</font>

282
00:09:10,790 --> 00:09:14,930
<font color="#CCCCCC">make</font><font color="#E5E5E5"> up a cluster</font><font color="#CCCCCC"> you can you've got</font>

283
00:09:13,730 --> 00:09:16,880
kind of masters<font color="#E5E5E5"> and slaves on top of</font>

284
00:09:14,930 --> 00:09:18,560
that I<font color="#E5E5E5"> said so how does it'll do it</font>

285
00:09:16,880 --> 00:09:20,089
right<font color="#CCCCCC"> one this</font><font color="#E5E5E5"> very cool thing it all</font>

286
00:09:18,560 --> 00:09:21,619
<font color="#E5E5E5">just worked do we need to know how it</font>

287
00:09:20,089 --> 00:09:24,440
<font color="#E5E5E5">works</font><font color="#CCCCCC"> well this is how</font><font color="#E5E5E5"> it works</font><font color="#CCCCCC"> so</font>

288
00:09:21,620 --> 00:09:27,500
basically the API server right<font color="#E5E5E5"> in the</font>

289
00:09:24,440 --> 00:09:30,140
middle the API server<font color="#E5E5E5"> right in the</font>

290
00:09:27,500 --> 00:09:31,220
middle<font color="#CCCCCC"> that is</font><font color="#E5E5E5"> the sort</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> beating</font>

291
00:09:30,140 --> 00:09:33,080
heart the cluster if you look at all the

292
00:09:31,220 --> 00:09:34,880
lines on the diagram<font color="#E5E5E5"> there they all go</font>

293
00:09:33,080 --> 00:09:36,110
<font color="#E5E5E5">through the API server everything talks</font>

294
00:09:34,880 --> 00:09:37,640
to the API server it doesn't talk

295
00:09:36,110 --> 00:09:39,200
directly component to component<font color="#E5E5E5"> they all</font>

296
00:09:37,640 --> 00:09:41,150
go<font color="#CCCCCC"> through the API server so from</font>

297
00:09:39,200 --> 00:09:43,160
security standpoint<font color="#E5E5E5"> the API server is</font>

298
00:09:41,150 --> 00:09:44,660
<font color="#E5E5E5">obviously our key goal right if we can</font>

299
00:09:43,160 --> 00:09:45,800
control the API server<font color="#E5E5E5"> we're going</font><font color="#CCCCCC"> to</font>

300
00:09:44,660 --> 00:09:48,410
<font color="#E5E5E5">compromise the cluster because that's</font>

301
00:09:45,800 --> 00:09:49,760
where all<font color="#E5E5E5"> the stuff</font><font color="#CCCCCC"> goes through however</font>

302
00:09:48,410 --> 00:09:52,219
people<font color="#CCCCCC"> in</font><font color="#E5E5E5"> these clusters</font><font color="#CCCCCC"> are stateless</font>

303
00:09:49,760 --> 00:09:53,630
<font color="#CCCCCC">so the API</font><font color="#E5E5E5"> server doesn't store its own</font>

304
00:09:52,220 --> 00:09:55,310
state it<font color="#E5E5E5"> doesn't know</font><font color="#CCCCCC"> anything</font><font color="#E5E5E5"> about how</font>

305
00:09:53,630 --> 00:09:58,430
pods are put together<font color="#CCCCCC"> it stores</font><font color="#E5E5E5"> it all</font>

306
00:09:55,310 --> 00:10:00,800
in etcd<font color="#E5E5E5"> so at the top</font><font color="#CCCCCC"> that's</font><font color="#E5E5E5"> a key value</font>

307
00:09:58,430 --> 00:10:02,750
<font color="#E5E5E5">store and you generally get a cluster</font><font color="#CCCCCC"> of</font>

308
00:10:00,800 --> 00:10:04,430
those<font color="#E5E5E5"> so you'll have a cluster of etcd</font>

309
00:10:02,750 --> 00:10:06,260
stores and what they do is they

310
00:10:04,430 --> 00:10:07,819
essentially store<font color="#E5E5E5"> all the configuration</font>

311
00:10:06,260 --> 00:10:09,530
<font color="#CCCCCC">in the</font><font color="#E5E5E5"> cluster so from a security</font>

312
00:10:07,820 --> 00:10:11,930
standpoint if I can get to<font color="#CCCCCC"> that that's</font>

313
00:10:09,530 --> 00:10:13,160
<font color="#E5E5E5">bad too because I can drag the entire</font>

314
00:10:11,930 --> 00:10:14,390
<font color="#E5E5E5">configuration and I've got all the</font>

315
00:10:13,160 --> 00:10:17,030
secrets and<font color="#CCCCCC"> everything else</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> goes</font>

316
00:10:14,390 --> 00:10:18,350
into<font color="#CCCCCC"> your cluster</font><font color="#E5E5E5"> and then down</font><font color="#CCCCCC"> the</font>

317
00:10:17,030 --> 00:10:19,819
<font color="#CCCCCC">bottom there</font><font color="#E5E5E5"> so we've got that's our</font>

318
00:10:18,350 --> 00:10:21,440
control<font color="#E5E5E5"> plane those three</font><font color="#CCCCCC"> components</font>

319
00:10:19,820 --> 00:10:23,089
there then the<font color="#CCCCCC"> mote we've</font><font color="#E5E5E5"> got our worker</font>

320
00:10:21,440 --> 00:10:25,130
nodes<font color="#E5E5E5"> so they're the ones actually run</font>

321
00:10:23,089 --> 00:10:27,020
the application<font color="#E5E5E5"> and the probably most</font>

322
00:10:25,130 --> 00:10:29,510
<font color="#E5E5E5">interesting component there is the cue</font>

323
00:10:27,020 --> 00:10:31,370
blue and the<font color="#CCCCCC"> Quba essentially talks to</font>

324
00:10:29,510 --> 00:10:33,589
the<font color="#E5E5E5"> API server and the API server will</font>

325
00:10:31,370 --> 00:10:35,210
say go and<font color="#E5E5E5"> create me some containers go</font>

326
00:10:33,589 --> 00:10:36,890
and create<font color="#E5E5E5"> this use this image</font><font color="#CCCCCC"> uses</font>

327
00:10:35,210 --> 00:10:39,200
docker image<font color="#E5E5E5"> run it up expose the</font>

328
00:10:36,890 --> 00:10:40,880
service do that do this and<font color="#E5E5E5"> the cubelet</font>

329
00:10:39,200 --> 00:10:42,050
handles<font color="#CCCCCC"> that on each worker node</font><font color="#E5E5E5"> so</font>

330
00:10:40,880 --> 00:10:43,970
obviously if you control<font color="#E5E5E5"> the cue blur</font>

331
00:10:42,050 --> 00:10:44,959
<font color="#E5E5E5">you can run containers which again is</font>

332
00:10:43,970 --> 00:10:46,790
going<font color="#CCCCCC"> to</font><font color="#E5E5E5"> be bad for</font><font color="#CCCCCC"> a security</font>

333
00:10:44,959 --> 00:10:48,229
standpoint<font color="#CCCCCC"> so those are our</font><font color="#E5E5E5"> three main</font>

334
00:10:46,790 --> 00:10:49,610
ones<font color="#E5E5E5"> and then the container engine over</font>

335
00:10:48,230 --> 00:10:51,350
there on the<font color="#E5E5E5"> right is generally darker</font>

336
00:10:49,610 --> 00:10:53,150
so docker sits underneath all<font color="#E5E5E5"> of this</font>

337
00:10:51,350 --> 00:10:56,029
you don't<font color="#E5E5E5"> have</font><font color="#CCCCCC"> to use docker but most</font>

338
00:10:53,150 --> 00:10:59,390
deployments use docker so that's how it

339
00:10:56,029 --> 00:11:00,529
all hangs<font color="#E5E5E5"> together one</font><font color="#CCCCCC"> other thing</font><font color="#E5E5E5"> to</font>

340
00:10:59,390 --> 00:11:01,970
mention<font color="#E5E5E5"> it but</font><font color="#CCCCCC"> this is networking</font>

341
00:11:00,529 --> 00:11:05,150
because kubernetes networking is<font color="#CCCCCC"> kinda</font>

342
00:11:01,970 --> 00:11:08,120
weird<font color="#E5E5E5"> um when I roll out those</font>

343
00:11:05,150 --> 00:11:09,589
containers<font color="#E5E5E5"> inside that application they</font>

344
00:11:08,120 --> 00:11:10,550
all get to talk to<font color="#CCCCCC"> each other across a</font>

345
00:11:09,589 --> 00:11:12,500
flat<font color="#E5E5E5"> network</font>

346
00:11:10,550 --> 00:11:14,359
no matter what underlying node they are

347
00:11:12,500 --> 00:11:15,589
on they can all<font color="#CCCCCC"> see each other and</font><font color="#E5E5E5"> they</font>

348
00:11:14,360 --> 00:11:17,570
have their own addressable<font color="#E5E5E5"> network and</font>

349
00:11:15,589 --> 00:11:19,730
is a flat network by default and it

350
00:11:17,570 --> 00:11:21,589
doesn't have any firewall<font color="#E5E5E5"> by default so</font>

351
00:11:19,730 --> 00:11:24,680
<font color="#E5E5E5">typically anything</font><font color="#CCCCCC"> on the cluster</font><font color="#E5E5E5"> could</font>

352
00:11:21,589 --> 00:11:26,450
see<font color="#E5E5E5"> anything else on the</font><font color="#CCCCCC"> cluster which</font>

353
00:11:24,680 --> 00:11:27,680
has obviously security<font color="#E5E5E5"> concerns</font><font color="#CCCCCC"> because</font>

354
00:11:26,450 --> 00:11:29,060
<font color="#E5E5E5">some sessoms I've done a bunch of</font>

355
00:11:27,680 --> 00:11:31,040
<font color="#E5E5E5">assessments of container networks and</font>

356
00:11:29,060 --> 00:11:32,420
people might<font color="#CCCCCC"> make</font><font color="#E5E5E5"> this</font><font color="#CCCCCC"> stick mistake of</font>

357
00:11:31,040 --> 00:11:33,920
assuming that that container networks

358
00:11:32,420 --> 00:11:35,660
trusted so they'll put<font color="#E5E5E5"> things like</font>

359
00:11:33,920 --> 00:11:37,610
MongoDB instances with no passwords<font color="#CCCCCC"> in</font>

360
00:11:35,660 --> 00:11:39,199
the container<font color="#CCCCCC"> Network assuming you can't</font>

361
00:11:37,610 --> 00:11:41,060
get to them turns out not to<font color="#CCCCCC"> be true in</font>

362
00:11:39,200 --> 00:11:43,010
some<font color="#CCCCCC"> cases the other</font><font color="#E5E5E5"> weird thing</font><font color="#CCCCCC"> about</font>

363
00:11:41,060 --> 00:11:45,199
<font color="#CCCCCC">it is kubernetes doesn't do its own</font>

364
00:11:43,010 --> 00:11:46,850
networking it assumes for some reason

365
00:11:45,200 --> 00:11:48,560
you want to<font color="#E5E5E5"> use</font><font color="#CCCCCC"> a plugin for</font><font color="#E5E5E5"> that so it</font>

366
00:11:46,850 --> 00:11:50,450
passes it off to third parties<font color="#CCCCCC"> and</font>

367
00:11:48,560 --> 00:11:51,589
you'll see things<font color="#E5E5E5"> like we've calico</font>

368
00:11:50,450 --> 00:11:53,240
flannel<font color="#CCCCCC"> ramana</font>

369
00:11:51,589 --> 00:11:55,370
<font color="#E5E5E5">lots of projects with Kenna weird names</font>

370
00:11:53,240 --> 00:11:57,950
and they provide various different ways

371
00:11:55,370 --> 00:11:59,180
<font color="#E5E5E5">of doing networking but the advantage is</font>

372
00:11:57,950 --> 00:12:00,529
clear<font color="#E5E5E5"> because it means I could have a</font>

373
00:11:59,180 --> 00:12:01,880
cluster of<font color="#E5E5E5"> running on different</font><font color="#CCCCCC"> cloud</font>

374
00:12:00,529 --> 00:12:03,500
providers<font color="#E5E5E5"> at different nodes in</font>

375
00:12:01,880 --> 00:12:04,670
different clouds different networks as

376
00:12:03,500 --> 00:12:06,440
far as the apps are concerned they're on

377
00:12:04,670 --> 00:12:07,910
the same addressable network<font color="#E5E5E5"> very</font>

378
00:12:06,440 --> 00:12:11,660
important in<font color="#E5E5E5"> terms of</font><font color="#CCCCCC"> making the thing</font>

379
00:12:07,910 --> 00:12:13,250
work oh and deployments yeah<font color="#CCCCCC"> I mentioned</font>

380
00:12:11,660 --> 00:12:14,689
this<font color="#E5E5E5"> before this is the word cloud I</font>

381
00:12:13,250 --> 00:12:16,279
made of<font color="#E5E5E5"> all</font><font color="#CCCCCC"> the different deployment</font>

382
00:12:14,690 --> 00:12:17,839
methods I could find if there's a

383
00:12:16,279 --> 00:12:20,510
spreadsheets<font color="#E5E5E5"> gets maintained there are</font>

384
00:12:17,839 --> 00:12:22,490
66<font color="#E5E5E5"> different either corporate supported</font>

385
00:12:20,510 --> 00:12:23,870
or<font color="#CCCCCC"> open-source projects which tell</font><font color="#E5E5E5"> you</font>

386
00:12:22,490 --> 00:12:26,000
how we give you ways<font color="#E5E5E5"> of deploying</font>

387
00:12:23,870 --> 00:12:27,709
kubernetes clusters um

388
00:12:26,000 --> 00:12:29,240
<font color="#CCCCCC">the very firm just</font><font color="#E5E5E5"> like bash scripts</font>

389
00:12:27,709 --> 00:12:30,770
<font color="#E5E5E5">that deploy the components all the way</font>

390
00:12:29,240 --> 00:12:31,790
up to<font color="#E5E5E5"> platform</font><font color="#CCCCCC"> as-a-service to suddenly</font>

391
00:12:30,770 --> 00:12:33,649
<font color="#E5E5E5">read how</font><font color="#CCCCCC"> OpenShift</font>

392
00:12:31,790 --> 00:12:37,790
but it's a whole<font color="#CCCCCC"> lot of stuff</font><font color="#E5E5E5"> on top</font><font color="#CCCCCC"> of</font>

393
00:12:33,649 --> 00:12:39,649
<font color="#CCCCCC">Kibera at ease um the thing about</font>

394
00:12:37,790 --> 00:12:41,240
security<font color="#E5E5E5"> that is they all have</font><font color="#CCCCCC"> their own</font>

395
00:12:39,649 --> 00:12:42,440
<font color="#CCCCCC">idea but what secure</font><font color="#E5E5E5"> means and they</font>

396
00:12:41,240 --> 00:12:43,820
don't all have<font color="#CCCCCC"> their own</font><font color="#E5E5E5"> idea</font><font color="#CCCCCC"> about what</font>

397
00:12:42,440 --> 00:12:45,950
default security<font color="#CCCCCC"> option should be in</font>

398
00:12:43,820 --> 00:12:47,959
place<font color="#E5E5E5"> so if you're</font><font color="#CCCCCC"> assessing a cluster</font>

399
00:12:45,950 --> 00:12:50,690
<font color="#E5E5E5">or thinking about</font><font color="#CCCCCC"> deploying it probably</font>

400
00:12:47,959 --> 00:12:52,279
the<font color="#E5E5E5"> most important</font><font color="#CCCCCC"> thing is what are</font><font color="#E5E5E5"> the</font>

401
00:12:50,690 --> 00:12:54,740
defaults that<font color="#E5E5E5"> my cluster deployment</font>

402
00:12:52,279 --> 00:12:56,300
method chose<font color="#E5E5E5"> what did they</font><font color="#CCCCCC"> think I had</font>

403
00:12:54,740 --> 00:12:57,440
to do<font color="#E5E5E5"> from retirement security because</font>

404
00:12:56,300 --> 00:12:59,000
once it's up<font color="#CCCCCC"> and running</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> you got</font>

405
00:12:57,440 --> 00:13:00,170
production workloads on it let's be

406
00:12:59,000 --> 00:13:00,620
honest a lot<font color="#CCCCCC"> this stuff's really</font><font color="#E5E5E5"> hard to</font>

407
00:13:00,170 --> 00:13:03,920
<font color="#E5E5E5">change</font>

408
00:13:00,620 --> 00:13:05,420
so<font color="#E5E5E5"> what secure defaults you choose</font><font color="#CCCCCC"> it's</font>

409
00:13:03,920 --> 00:13:06,140
probably the most important<font color="#CCCCCC"> decision</font>

410
00:13:05,420 --> 00:13:08,240
you're going to<font color="#E5E5E5"> make</font><font color="#CCCCCC"> when</font><font color="#E5E5E5"> you're rolling</font>

411
00:13:06,140 --> 00:13:09,800
<font color="#CCCCCC">this stuff out and if it's the one thing</font>

412
00:13:08,240 --> 00:13:12,140
<font color="#E5E5E5">you think about take away from this</font>

413
00:13:09,800 --> 00:13:13,670
presentation<font color="#E5E5E5"> is that's really important</font>

414
00:13:12,140 --> 00:13:15,740
because I did quite<font color="#E5E5E5"> a lot</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> what I was</font>

415
00:13:13,670 --> 00:13:17,390
<font color="#E5E5E5">looking</font><font color="#CCCCCC"> at</font><font color="#E5E5E5"> this I got various default</font>

416
00:13:15,740 --> 00:13:18,890
install mechanisms for open<font color="#E5E5E5"> source</font>

417
00:13:17,390 --> 00:13:19,910
projects and from cloud mechanisms I

418
00:13:18,890 --> 00:13:22,310
installed them<font color="#E5E5E5"> and I got some</font>

419
00:13:19,910 --> 00:13:23,600
interesting<font color="#E5E5E5"> surprises</font><font color="#CCCCCC"> about what some</font>

420
00:13:22,310 --> 00:13:24,349
people think secure<font color="#CCCCCC"> default</font><font color="#E5E5E5"> should look</font>

421
00:13:23,600 --> 00:13:26,300
like<font color="#E5E5E5"> major</font>

422
00:13:24,350 --> 00:13:27,830
providers<font color="#E5E5E5"> think their default security</font>

423
00:13:26,300 --> 00:13:32,060
<font color="#CCCCCC">option should</font><font color="#E5E5E5"> look like definitely not</font>

424
00:13:27,830 --> 00:13:34,250
what I would choose a<font color="#E5E5E5"> secure</font><font color="#CCCCCC"> so let's</font>

425
00:13:32,060 --> 00:13:37,369
talk<font color="#CCCCCC"> about some of</font><font color="#E5E5E5"> those model threat</font>

426
00:13:34,250 --> 00:13:38,840
<font color="#CCCCCC">model</font><font color="#E5E5E5"> super important</font><font color="#CCCCCC"> if you never get</font>

427
00:13:37,370 --> 00:13:40,790
attacked<font color="#CCCCCC"> doesn't</font><font color="#E5E5E5"> matter if you're secure</font>

428
00:13:38,840 --> 00:13:42,110
<font color="#CCCCCC">all right okay</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> what security in the</font>

429
00:13:40,790 --> 00:13:45,949
<font color="#E5E5E5">world if no one ever tries</font><font color="#CCCCCC"> to attack you</font>

430
00:13:42,110 --> 00:13:47,600
who cares<font color="#E5E5E5"> but there's obviously this is</font>

431
00:13:45,950 --> 00:13:49,370
the<font color="#E5E5E5"> real world</font><font color="#CCCCCC"> and systems always</font><font color="#E5E5E5"> get</font>

432
00:13:47,600 --> 00:13:52,040
attacked who's going to attack<font color="#CCCCCC"> Acosta</font>

433
00:13:49,370 --> 00:13:53,810
external<font color="#E5E5E5"> attackers right if you deploy</font>

434
00:13:52,040 --> 00:13:54,980
<font color="#CCCCCC">your cluster on the</font><font color="#E5E5E5"> cloud then it's</font>

435
00:13:53,810 --> 00:13:56,449
gonna<font color="#E5E5E5"> have some internet accessible</font>

436
00:13:54,980 --> 00:13:58,670
component so<font color="#CCCCCC"> someone's going to</font><font color="#E5E5E5"> try and</font>

437
00:13:56,450 --> 00:14:00,230
<font color="#E5E5E5">attack it if you just will deploy your</font>

438
00:13:58,670 --> 00:14:02,030
cluster in<font color="#CCCCCC"> the corporate network you</font>

439
00:14:00,230 --> 00:14:04,400
don't know<font color="#E5E5E5"> one people can attack systems</font>

440
00:14:02,030 --> 00:14:07,910
on a<font color="#E5E5E5"> one external attackers are factor</font>

441
00:14:04,400 --> 00:14:08,480
like this<font color="#CCCCCC"> one is a wee bit more</font>

442
00:14:07,910 --> 00:14:09,920
interesting

443
00:14:08,480 --> 00:14:11,870
what about<font color="#E5E5E5"> an attacker who's got</font><font color="#CCCCCC"> access</font>

444
00:14:09,920 --> 00:14:13,459
to one<font color="#E5E5E5"> container so</font><font color="#CCCCCC"> you've ruled</font><font color="#E5E5E5"> out an</font>

445
00:14:11,870 --> 00:14:15,680
application<font color="#CCCCCC"> at your container</font><font color="#E5E5E5"> it's got a</font>

446
00:14:13,460 --> 00:14:18,050
security<font color="#E5E5E5"> flaw the attacker gets access</font>

447
00:14:15,680 --> 00:14:20,030
to<font color="#E5E5E5"> that one container how hard or easy</font>

448
00:14:18,050 --> 00:14:22,790
should it be for<font color="#E5E5E5"> them to get cluster</font>

449
00:14:20,030 --> 00:14:23,930
admin once it done<font color="#E5E5E5"> that this one is</font>

450
00:14:22,790 --> 00:14:25,280
weird because this is the one I<font color="#E5E5E5"> have a</font>

451
00:14:23,930 --> 00:14:27,439
difference of opinion to<font color="#E5E5E5"> some people who</font>

452
00:14:25,280 --> 00:14:28,370
make human<font color="#CCCCCC"> it's deployments</font><font color="#E5E5E5"> some people</font>

453
00:14:27,440 --> 00:14:29,930
don't think that's part of our threat

454
00:14:28,370 --> 00:14:31,880
model<font color="#E5E5E5"> so</font><font color="#CCCCCC"> what I say</font><font color="#E5E5E5"> that they will</font>

455
00:14:29,930 --> 00:14:33,709
<font color="#E5E5E5">deploy clusters they'll say the default</font>

456
00:14:31,880 --> 00:14:35,270
option<font color="#CCCCCC"> basically if someone</font><font color="#E5E5E5"> gets access</font>

457
00:14:33,710 --> 00:14:37,190
to one container<font color="#E5E5E5"> cluster</font><font color="#CCCCCC"> app and should</font>

458
00:14:35,270 --> 00:14:38,870
be trivial and is trivial like really

459
00:14:37,190 --> 00:14:39,680
<font color="#CCCCCC">easy we'll see that and that's</font><font color="#E5E5E5"> where I</font>

460
00:14:38,870 --> 00:14:41,120
have a difference between<font color="#CCCCCC"> that's why I'm</font>

461
00:14:39,680 --> 00:14:42,469
saying<font color="#E5E5E5"> be really careful when you're</font>

462
00:14:41,120 --> 00:14:44,120
<font color="#E5E5E5">choosing your cloud to</font><font color="#CCCCCC"> plan your</font><font color="#E5E5E5"> choose</font>

463
00:14:42,470 --> 00:14:45,440
<font color="#CCCCCC">newcomers deployment method</font><font color="#E5E5E5"> make sure</font>

464
00:14:44,120 --> 00:14:48,710
that<font color="#E5E5E5"> if you think that's a problem</font><font color="#CCCCCC"> that</font>

465
00:14:45,440 --> 00:14:50,870
<font color="#CCCCCC">they think that's</font><font color="#E5E5E5"> probably and the last</font>

466
00:14:48,710 --> 00:14:52,910
one is what about<font color="#E5E5E5"> an attacker who's got</font>

467
00:14:50,870 --> 00:14:54,170
rights to run a container<font color="#E5E5E5"> so if you</font><font color="#CCCCCC"> work</font>

468
00:14:52,910 --> 00:14:55,550
<font color="#E5E5E5">in a</font><font color="#CCCCCC"> really</font><font color="#E5E5E5"> big</font><font color="#CCCCCC"> company and</font><font color="#E5E5E5"> you start</font>

469
00:14:54,170 --> 00:14:57,199
<font color="#CCCCCC">rolling this out across your corporate</font>

470
00:14:55,550 --> 00:14:59,089
you might have groups of people who you

471
00:14:57,200 --> 00:15:00,410
want<font color="#CCCCCC"> to be able to use it</font><font color="#E5E5E5"> but</font><font color="#CCCCCC"> you don't</font>

472
00:14:59,090 --> 00:15:01,250
<font color="#E5E5E5">want to give them cluster admin</font><font color="#CCCCCC"> all</font>

473
00:15:00,410 --> 00:15:02,660
right you don't<font color="#E5E5E5"> necessarily want</font>

474
00:15:01,250 --> 00:15:04,670
everyone<font color="#CCCCCC"> people</font><font color="#E5E5E5"> to get full control</font><font color="#CCCCCC"> of</font>

475
00:15:02,660 --> 00:15:08,930
your<font color="#E5E5E5"> cluster so how</font><font color="#CCCCCC"> easy or hard is that</font>

476
00:15:04,670 --> 00:15:10,880
going to be external attackers so start

477
00:15:08,930 --> 00:15:11,810
from<font color="#E5E5E5"> the</font><font color="#CCCCCC"> other side world</font><font color="#E5E5E5"> right we're</font>

478
00:15:10,880 --> 00:15:12,800
<font color="#E5E5E5">gonna start as a point of view of</font>

479
00:15:11,810 --> 00:15:17,869
someone who's trying<font color="#E5E5E5"> to break into this</font>

480
00:15:12,800 --> 00:15:20,030
cluster from external so what do you do

481
00:15:17,870 --> 00:15:22,160
as soon<font color="#E5E5E5"> as you try</font><font color="#CCCCCC"> and test assess the</font>

482
00:15:20,030 --> 00:15:23,630
security<font color="#CCCCCC"> of</font><font color="#E5E5E5"> a network system you port</font>

483
00:15:22,160 --> 00:15:25,550
<font color="#E5E5E5">scanner well it's that's what I do and</font>

484
00:15:23,630 --> 00:15:27,830
if you port scanner kubernetes cluster

485
00:15:25,550 --> 00:15:30,650
<font color="#CCCCCC">you get lots of potentially interesting</font>

486
00:15:27,830 --> 00:15:33,200
things so we've got<font color="#CCCCCC"> 2379</font>

487
00:15:30,650 --> 00:15:34,880
that's you<font color="#CCCCCC"> mention event ID etcd so</font>

488
00:15:33,200 --> 00:15:37,440
that's the<font color="#E5E5E5"> default port for</font><font color="#CCCCCC"> the key</font>

489
00:15:34,880 --> 00:15:39,030
value store if you<font color="#E5E5E5"> see that that means</font>

490
00:15:37,440 --> 00:15:40,140
they've got a clustered version of that

491
00:15:39,030 --> 00:15:42,030
<font color="#E5E5E5">running so they're listing on a</font><font color="#CCCCCC"> network</font>

492
00:15:40,140 --> 00:15:46,650
interface and you can<font color="#E5E5E5"> try and attack it</font>

493
00:15:42,030 --> 00:15:47,970
we've got<font color="#E5E5E5"> 41 94 to see</font><font color="#CCCCCC"> advisor the one</font>

494
00:15:46,650 --> 00:15:49,650
below that<font color="#E5E5E5"> which I've got kind</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> in</font>

495
00:15:47,970 --> 00:15:50,880
brackets it's an<font color="#CCCCCC"> eight it's because they</font>

496
00:15:49,650 --> 00:15:52,290
<font color="#CCCCCC">can't</font><font color="#E5E5E5"> make up their main what port to</font>

497
00:15:50,880 --> 00:15:53,850
<font color="#E5E5E5">run that on some run it on six four four</font>

498
00:15:52,290 --> 00:15:55,589
three<font color="#CCCCCC"> eight four four three or just four</font>

499
00:15:53,850 --> 00:15:57,300
four<font color="#E5E5E5"> three</font><font color="#CCCCCC"> that's the API server</font>

500
00:15:55,590 --> 00:15:59,130
<font color="#CCCCCC">everyone knows that's gonna let the most</font>

501
00:15:57,300 --> 00:16:02,160
important one<font color="#E5E5E5"> the next one's kind of</font>

502
00:15:59,130 --> 00:16:04,290
interesting<font color="#E5E5E5"> 8080 is the insecure API</font>

503
00:16:02,160 --> 00:16:06,030
server that's<font color="#E5E5E5"> a call and you</font><font color="#CCCCCC"> can guess</font>

504
00:16:04,290 --> 00:16:10,290
from that that it may not have the<font color="#CCCCCC"> best</font>

505
00:16:06,030 --> 00:16:12,150
security<font color="#E5E5E5"> in the world</font><font color="#CCCCCC"> and I have seen</font>

506
00:16:10,290 --> 00:16:14,010
<font color="#E5E5E5">that exposed inside a cluster by default</font>

507
00:16:12,150 --> 00:16:15,840
so anyone<font color="#CCCCCC"> in the cluster</font><font color="#E5E5E5"> can just go</font>

508
00:16:14,010 --> 00:16:18,270
8080 thank you very much I will<font color="#CCCCCC"> show you</font>

509
00:16:15,840 --> 00:16:19,830
that<font color="#E5E5E5"> and</font><font color="#CCCCCC"> I set ten to fifteen to</font><font color="#E5E5E5"> fifty</font>

510
00:16:18,270 --> 00:16:21,600
<font color="#E5E5E5">five or think what are the pupils</font><font color="#CCCCCC"> we</font>

511
00:16:19,830 --> 00:16:23,430
talked<font color="#E5E5E5"> about about that and then various</font>

512
00:16:21,600 --> 00:16:24,600
so that depending<font color="#E5E5E5"> on what network</font>

513
00:16:23,430 --> 00:16:26,370
<font color="#E5E5E5">plug-in you go for you're gonna</font><font color="#CCCCCC"> get</font>

514
00:16:24,600 --> 00:16:28,650
various ports there some of them do for

515
00:16:26,370 --> 00:16:30,720
<font color="#CCCCCC">example use</font><font color="#E5E5E5"> BGP so you'll see the BGP</font>

516
00:16:28,650 --> 00:16:32,760
ports often you<font color="#E5E5E5"> want</font><font color="#CCCCCC"> to what he'll</font><font color="#E5E5E5"> this</font>

517
00:16:30,720 --> 00:16:35,670
<font color="#E5E5E5">is</font><font color="#CCCCCC"> an</font><font color="#E5E5E5"> internal system they use BGP to</font>

518
00:16:32,760 --> 00:16:36,930
manage routing so that's<font color="#E5E5E5"> interesting in</font>

519
00:16:35,670 --> 00:16:39,180
and of itself<font color="#E5E5E5"> some of</font><font color="#CCCCCC"> them will have</font>

520
00:16:36,930 --> 00:16:40,439
<font color="#E5E5E5">their own etcd instances for managing</font>

521
00:16:39,180 --> 00:16:42,689
their configuration<font color="#E5E5E5"> so you'll see</font>

522
00:16:40,440 --> 00:16:46,530
<font color="#E5E5E5">another port</font><font color="#CCCCCC"> VT CD</font><font color="#E5E5E5"> they don't like</font><font color="#CCCCCC"> 4001</font>

523
00:16:42,690 --> 00:16:48,020
or somebody so let's let's let's do some

524
00:16:46,530 --> 00:16:50,040
more<font color="#CCCCCC"> demos</font><font color="#E5E5E5"> because you know why not</font>

525
00:16:48,020 --> 00:16:54,329
first we're not<font color="#E5E5E5"> see</font><font color="#CCCCCC"> you've either got</font>

526
00:16:50,040 --> 00:16:56,040
<font color="#CCCCCC">it's loaded</font><font color="#E5E5E5"> so see advisor is installed</font>

527
00:16:54,330 --> 00:16:58,380
by default<font color="#E5E5E5"> in most</font><font color="#CCCCCC"> cube writers clusters</font>

528
00:16:56,040 --> 00:16:59,610
<font color="#E5E5E5">I've seen</font><font color="#CCCCCC"> it's unauthenticated and there</font>

529
00:16:58,380 --> 00:17:01,740
is no<font color="#CCCCCC"> option to keep make it authentic</font>

530
00:16:59,610 --> 00:17:04,170
ated so you have if it's<font color="#E5E5E5"> there and it's</font>

531
00:17:01,740 --> 00:17:05,880
running<font color="#E5E5E5"> it is available and if I'm an</font>

532
00:17:04,170 --> 00:17:08,760
attacker<font color="#E5E5E5"> I'm kind of look at it this</font>

533
00:17:05,880 --> 00:17:10,230
<font color="#E5E5E5">going you</font><font color="#CCCCCC"> know it's</font><font color="#E5E5E5"> not it's not you</font>

534
00:17:08,760 --> 00:17:12,150
don't can't come<font color="#E5E5E5"> on it but you do get</font>

535
00:17:10,230 --> 00:17:15,180
cool stuff like<font color="#E5E5E5"> this is a list of all</font>

536
00:17:12,150 --> 00:17:16,650
the pods are running on this<font color="#E5E5E5"> host</font><font color="#CCCCCC"> and</font>

537
00:17:15,180 --> 00:17:17,640
there's all version there's the darker

538
00:17:16,650 --> 00:17:18,780
version<font color="#E5E5E5"> that's running there's the</font>

539
00:17:17,640 --> 00:17:19,650
kernel version<font color="#CCCCCC"> that's running there's</font>

540
00:17:18,780 --> 00:17:21,180
the operating system version that's

541
00:17:19,650 --> 00:17:24,390
<font color="#E5E5E5">running some directory information</font>

542
00:17:21,180 --> 00:17:26,430
<font color="#E5E5E5">that's quite handy</font><font color="#CCCCCC"> and lastly some nice</font>

543
00:17:24,390 --> 00:17:28,020
brush and information as<font color="#E5E5E5"> well so you get</font>

544
00:17:26,430 --> 00:17:29,640
some nice<font color="#CCCCCC"> information disclosure out of</font>

545
00:17:28,020 --> 00:17:30,690
<font color="#E5E5E5">that and that's pretty much if you find</font>

546
00:17:29,640 --> 00:17:32,160
<font color="#CCCCCC">that poor open it's going to be</font>

547
00:17:30,690 --> 00:17:33,690
available<font color="#CCCCCC"> it's unencrypted it doesn't</font>

548
00:17:32,160 --> 00:17:35,280
have SSL<font color="#CCCCCC"> and it's never</font><font color="#E5E5E5"> a</font><font color="#CCCCCC"> center gated</font>

549
00:17:33,690 --> 00:17:36,960
as far as I can see<font color="#E5E5E5"> so that's a nice</font>

550
00:17:35,280 --> 00:17:41,760
good starting point at<font color="#E5E5E5"> the end of the</font>

551
00:17:36,960 --> 00:17:45,240
world<font color="#E5E5E5"> but you know kind</font><font color="#CCCCCC"> of handy way to</font>

552
00:17:41,760 --> 00:17:46,530
next<font color="#E5E5E5"> don't you that but let's</font><font color="#CCCCCC"> top</font><font color="#E5E5E5"> with</font><font color="#CCCCCC"> a</font>

553
00:17:45,240 --> 00:17:49,020
<font color="#CCCCCC">cube lip</font><font color="#E5E5E5"> because the cube was kinda more</font>

554
00:17:46,530 --> 00:17:51,250
interesting um there's two<font color="#E5E5E5"> different</font>

555
00:17:49,020 --> 00:17:53,500
<font color="#CCCCCC">poorest before I mentioned</font><font color="#E5E5E5"> ten to</font>

556
00:17:51,250 --> 00:17:55,870
<font color="#CCCCCC">five-five is read-only right read-only</font>

557
00:17:53,500 --> 00:17:58,060
again the read-only port it's enabled

558
00:17:55,870 --> 00:18:00,010
for so that services<font color="#CCCCCC"> can hit it for a</font>

559
00:17:58,060 --> 00:18:01,270
<font color="#E5E5E5">management and diagnostics it's pretty</font>

560
00:18:00,010 --> 00:18:03,160
much enable in every cluster<font color="#E5E5E5"> I've seen</font>

561
00:18:01,270 --> 00:18:05,650
<font color="#CCCCCC">it's</font><font color="#E5E5E5"> unauthenticated</font><font color="#CCCCCC"> on a per cluster</font>

562
00:18:03,160 --> 00:18:07,330
<font color="#E5E5E5">I've seen and it's not encrypted</font><font color="#CCCCCC"> so yeah</font>

563
00:18:05,650 --> 00:18:08,260
but you and what can<font color="#CCCCCC"> you get</font><font color="#E5E5E5"> out</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> that</font>

564
00:18:07,330 --> 00:18:12,090
you can kind of get some more

565
00:18:08,260 --> 00:18:15,550
<font color="#CCCCCC">interesting stuff</font><font color="#E5E5E5"> where are we</font>

566
00:18:12,090 --> 00:18:17,620
<font color="#E5E5E5">yeah so everything it</font><font color="#CCCCCC"> talks</font><font color="#E5E5E5"> out things</font>

567
00:18:15,550 --> 00:18:18,790
are very<font color="#E5E5E5"> nice can like JSON format so</font>

568
00:18:17,620 --> 00:18:20,709
you<font color="#CCCCCC"> can basically hit</font><font color="#E5E5E5"> most of these</font>

569
00:18:18,790 --> 00:18:21,760
api's with a browser or with curl<font color="#E5E5E5"> which</font>

570
00:18:20,710 --> 00:18:23,590
is really cool<font color="#E5E5E5"> if you're testing them</font>

571
00:18:21,760 --> 00:18:25,210
because it makes it<font color="#E5E5E5"> super</font><font color="#CCCCCC"> easy or you</font>

572
00:18:23,590 --> 00:18:26,649
<font color="#CCCCCC">can if you've got</font><font color="#E5E5E5"> Firefox signature</font>

573
00:18:25,210 --> 00:18:27,310
that's nice and this will<font color="#CCCCCC"> basically this</font>

574
00:18:26,650 --> 00:18:29,140
<font color="#E5E5E5">is what you get this is our</font>

575
00:18:27,310 --> 00:18:31,000
authenticated stuff this is a list of

576
00:18:29,140 --> 00:18:32,380
all the pods running<font color="#E5E5E5"> but there is one</font>

577
00:18:31,000 --> 00:18:33,970
kind<font color="#CCCCCC"> of</font><font color="#E5E5E5"> thing I wanted to mention</font>

578
00:18:32,380 --> 00:18:37,540
<font color="#E5E5E5">specifically which is if we search for</font>

579
00:18:33,970 --> 00:18:39,700
API server this<font color="#CCCCCC"> is the</font><font color="#E5E5E5"> manifest of</font><font color="#CCCCCC"> the</font>

580
00:18:37,540 --> 00:18:42,850
API server and in the<font color="#E5E5E5"> interesting part</font>

581
00:18:39,700 --> 00:18:44,560
is<font color="#E5E5E5"> this if we kubernetes configuration</font>

582
00:18:42,850 --> 00:18:47,050
option is passed as a command line

583
00:18:44,560 --> 00:18:48,790
parameter to the to the component that's

584
00:18:47,050 --> 00:18:50,710
just the way it works<font color="#CCCCCC"> so if you get that</font>

585
00:18:48,790 --> 00:18:51,790
dumped out you can get every single

586
00:18:50,710 --> 00:18:53,380
<font color="#CCCCCC">piece of</font><font color="#E5E5E5"> information about how its</font>

587
00:18:51,790 --> 00:18:55,120
configured<font color="#E5E5E5"> which is kind of nice and</font>

588
00:18:53,380 --> 00:18:57,130
handy so it tells you<font color="#CCCCCC"> things like</font><font color="#E5E5E5"> what</font>

589
00:18:55,120 --> 00:18:59,500
ports things are running<font color="#E5E5E5"> on what files</font>

590
00:18:57,130 --> 00:19:01,090
so<font color="#E5E5E5"> there's</font><font color="#CCCCCC"> a service</font><font color="#E5E5E5"> code key file so</font>

591
00:18:59,500 --> 00:19:03,970
<font color="#E5E5E5">that for example is our private key for</font>

592
00:19:01,090 --> 00:19:05,230
<font color="#E5E5E5">a net for communications now you know</font>

593
00:19:03,970 --> 00:19:07,000
the file name so if you get some other

594
00:19:05,230 --> 00:19:09,250
<font color="#CCCCCC">vulnerability let you</font><font color="#E5E5E5"> read files</font><font color="#CCCCCC"> you</font>

595
00:19:07,000 --> 00:19:10,750
know where to go<font color="#CCCCCC"> to get it so</font><font color="#E5E5E5"> again this</font>

596
00:19:09,250 --> 00:19:13,060
isn't catastrophic<font color="#CCCCCC"> you're not</font><font color="#E5E5E5"> going to</font>

597
00:19:10,750 --> 00:19:14,260
get like<font color="#CCCCCC"> you know end of the game</font><font color="#E5E5E5"> but</font>

598
00:19:13,060 --> 00:19:16,060
this but it does tell you lots<font color="#E5E5E5"> of</font>

599
00:19:14,260 --> 00:19:17,470
<font color="#E5E5E5">information and authorization board</font>

600
00:19:16,060 --> 00:19:19,000
running<font color="#E5E5E5"> in I know what ports</font><font color="#CCCCCC"> you're</font>

601
00:19:17,470 --> 00:19:21,220
binding<font color="#E5E5E5"> to I know what services</font><font color="#CCCCCC"> you're</font>

602
00:19:19,000 --> 00:19:22,780
running again<font color="#E5E5E5"> pretty</font><font color="#CCCCCC"> much</font><font color="#E5E5E5"> on every</font>

603
00:19:21,220 --> 00:19:24,100
cluster I've seen if you can get to that

604
00:19:22,780 --> 00:19:25,690
war it's out<font color="#CCCCCC"> of that community I</font><font color="#E5E5E5"> bet</font>

605
00:19:24,100 --> 00:19:34,929
some<font color="#E5E5E5"> encrypted it's available so</font><font color="#CCCCCC"> that's</font>

606
00:19:25,690 --> 00:19:37,260
<font color="#E5E5E5">kind</font><font color="#CCCCCC"> of useful okay right however</font><font color="#E5E5E5"> more</font>

607
00:19:34,930 --> 00:19:41,620
interestingly<font color="#CCCCCC"> cubelet read/write</font>

608
00:19:37,260 --> 00:19:43,210
this is more<font color="#E5E5E5"> interesting first off the</font>

609
00:19:41,620 --> 00:19:45,129
<font color="#CCCCCC">read/write</font><font color="#E5E5E5"> port it's SSL which is nice</font>

610
00:19:43,210 --> 00:19:48,280
<font color="#E5E5E5">although</font><font color="#CCCCCC"> it uses internal it's the</font>

611
00:19:45,130 --> 00:19:50,110
<font color="#CCCCCC">spigots in this case you can dump the</font>

612
00:19:48,280 --> 00:19:52,810
log files at<font color="#CCCCCC"> anything</font><font color="#E5E5E5"> if you get the</font>

613
00:19:50,110 --> 00:19:54,100
<font color="#E5E5E5">read/write poor now before like two</font>

614
00:19:52,810 --> 00:19:58,389
versions ago which is only four months

615
00:19:54,100 --> 00:20:00,040
<font color="#CCCCCC">ago this was unattended by default I'm I</font>

616
00:19:58,390 --> 00:20:01,510
did for another version<font color="#E5E5E5"> before that</font>

617
00:20:00,040 --> 00:20:03,790
there<font color="#E5E5E5"> was no option</font><font color="#CCCCCC"> to authenticate</font><font color="#E5E5E5"> it</font>

618
00:20:01,510 --> 00:20:05,080
<font color="#CCCCCC">it wasn't possible so I</font><font color="#E5E5E5"> thought before</font>

619
00:20:03,790 --> 00:20:07,090
<font color="#CCCCCC">about start this year you couldn't</font>

620
00:20:05,080 --> 00:20:08,290
have this authenticated<font color="#E5E5E5"> for starters you</font>

621
00:20:07,090 --> 00:20:09,760
can do this which<font color="#E5E5E5"> is kind of cool</font>

622
00:20:08,290 --> 00:20:11,590
<font color="#E5E5E5">because you can dump out all the</font><font color="#CCCCCC"> the log</font>

623
00:20:09,760 --> 00:20:13,150
files from the server<font color="#CCCCCC"> that's</font><font color="#E5E5E5"> quite nice</font>

624
00:20:11,590 --> 00:20:15,939
<font color="#E5E5E5">but again it's</font><font color="#CCCCCC"> not catastrophic</font>

625
00:20:13,150 --> 00:20:17,140
however yeah I'm gonna<font color="#E5E5E5"> go and copy this</font>

626
00:20:15,940 --> 00:20:20,230
because I<font color="#E5E5E5"> just never remember this come</font>

627
00:20:17,140 --> 00:20:21,280
<font color="#CCCCCC">out I've stopped</font><font color="#E5E5E5"> my head like I said</font>

628
00:20:20,230 --> 00:20:26,910
<font color="#E5E5E5">before you</font><font color="#CCCCCC"> can hit these things</font><font color="#E5E5E5"> with</font>

629
00:20:21,280 --> 00:20:30,430
<font color="#CCCCCC">curl</font><font color="#E5E5E5"> so why should be able to do is see</font>

630
00:20:26,910 --> 00:20:32,950
okay so<font color="#CCCCCC"> I'm doing here is I'm</font><font color="#E5E5E5"> posting to</font>

631
00:20:30,430 --> 00:20:35,050
an API<font color="#E5E5E5"> and I'm posting to the Cuba API</font>

632
00:20:32,950 --> 00:20:36,490
what's interesting<font color="#CCCCCC"> so I'm hitting</font><font color="#E5E5E5"> and</font>

633
00:20:35,050 --> 00:20:38,020
what you can do with it is you<font color="#CCCCCC"> can</font><font color="#E5E5E5"> run</font>

634
00:20:36,490 --> 00:20:40,390
<font color="#CCCCCC">commands</font><font color="#E5E5E5"> right and you can run her</font>

635
00:20:38,020 --> 00:20:43,150
commands on any container running<font color="#E5E5E5"> on the</font>

636
00:20:40,390 --> 00:20:44,650
node using<font color="#E5E5E5"> the</font><font color="#CCCCCC"> cubelet api</font><font color="#E5E5E5"> in this case</font>

637
00:20:43,150 --> 00:20:46,120
what I'm going<font color="#CCCCCC"> to do is I'm going to cau</font>

638
00:20:44,650 --> 00:20:48,400
you see the end<font color="#CCCCCC"> commands here at the end</font>

639
00:20:46,120 --> 00:20:50,889
<font color="#CCCCCC">I'm gonna cat out slash ETCs left</font>

640
00:20:48,400 --> 00:20:52,060
kubernetes slash admin<font color="#CCCCCC"> comm</font><font color="#E5E5E5"> that's got</font>

641
00:20:50,890 --> 00:20:53,860
the key for a third to get<font color="#E5E5E5"> into the</font>

642
00:20:52,060 --> 00:20:55,179
<font color="#CCCCCC">cluster so if I can get that file</font><font color="#E5E5E5"> I can</font>

643
00:20:53,860 --> 00:20:57,580
use that<font color="#E5E5E5"> then to</font><font color="#CCCCCC"> then keep the cluster</font>

644
00:20:55,180 --> 00:21:03,610
game over<font color="#E5E5E5"> and cluster happen and</font>

645
00:20:57,580 --> 00:21:05,949
hopefully yeah that works<font color="#E5E5E5"> so that's me</font>

646
00:21:03,610 --> 00:21:07,419
if you get that<font color="#CCCCCC"> port</font><font color="#E5E5E5"> and you can</font><font color="#CCCCCC"> run</font>

647
00:21:05,950 --> 00:21:09,100
<font color="#E5E5E5">that command you can take</font><font color="#CCCCCC"> it all the</font>

648
00:21:07,420 --> 00:21:11,080
cluster<font color="#E5E5E5"> because that's the token that</font>

649
00:21:09,100 --> 00:21:12,310
<font color="#E5E5E5">ledge ticket all the cluster until</font>

650
00:21:11,080 --> 00:21:14,470
<font color="#E5E5E5">couple of Russians ago that was</font>

651
00:21:12,310 --> 00:21:18,360
available but<font color="#E5E5E5"> fall which is not good so</font>

652
00:21:14,470 --> 00:21:20,740
<font color="#CCCCCC">if you're using all the Russians upgrade</font>

653
00:21:18,360 --> 00:21:22,659
so yeah<font color="#E5E5E5"> that's the first one that's like</font>

654
00:21:20,740 --> 00:21:24,370
really really<font color="#E5E5E5"> bad and that's the cupola</font>

655
00:21:22,660 --> 00:21:26,320
<font color="#E5E5E5">the cupola basically if you get</font><font color="#CCCCCC"> to on a</font>

656
00:21:24,370 --> 00:21:27,790
node lets you run commands it's not

657
00:21:26,320 --> 00:21:32,169
going to be good<font color="#CCCCCC"> news and you</font><font color="#E5E5E5"> run</font>

658
00:21:27,790 --> 00:21:35,050
commands<font color="#E5E5E5"> inside containers so let's talk</font>

659
00:21:32,170 --> 00:21:38,260
<font color="#CCCCCC">about</font><font color="#E5E5E5"> what just containers let's talk</font>

660
00:21:35,050 --> 00:21:39,730
about much<font color="#CCCCCC"> is</font><font color="#E5E5E5"> containers so we can have</font>

661
00:21:38,260 --> 00:21:40,990
a condition<font color="#CCCCCC"> a container that's malicious</font>

662
00:21:39,730 --> 00:21:42,490
<font color="#E5E5E5">and I mention before it is a bit dispute</font>

663
00:21:40,990 --> 00:21:44,440
about how to you I<font color="#E5E5E5"> personally think this</font>

664
00:21:42,490 --> 00:21:46,000
<font color="#E5E5E5">is a bad one because I've seen too</font><font color="#CCCCCC"> many</font>

665
00:21:44,440 --> 00:21:47,770
cases<font color="#CCCCCC"> where I'm a web app test or a lot</font>

666
00:21:46,000 --> 00:21:49,690
of<font color="#E5E5E5"> the time you get some form of command</font>

667
00:21:47,770 --> 00:21:50,950
execution via web app<font color="#E5E5E5"> and at that point</font>

668
00:21:49,690 --> 00:21:53,140
<font color="#CCCCCC">you're inside the environment you can</font>

669
00:21:50,950 --> 00:21:54,190
execute commands to me that's not<font color="#CCCCCC"> a</font>

670
00:21:53,140 --> 00:21:55,120
<font color="#CCCCCC">scenario where I should be able to go</font>

671
00:21:54,190 --> 00:21:56,620
<font color="#CCCCCC">and take</font><font color="#E5E5E5"> over a whole cluster</font>

672
00:21:55,120 --> 00:21:59,979
I shouldn't be<font color="#E5E5E5"> easy for me it should</font>

673
00:21:56,620 --> 00:22:01,419
least be make<font color="#CCCCCC"> it difficult</font><font color="#E5E5E5"> we've got</font>

674
00:21:59,980 --> 00:22:02,770
<font color="#E5E5E5">increased attack surface at this point</font>

675
00:22:01,420 --> 00:22:03,970
<font color="#E5E5E5">and as a couple different ways</font><font color="#CCCCCC"> that</font>

676
00:22:02,770 --> 00:22:05,800
relevant once we're running on a

677
00:22:03,970 --> 00:22:07,330
container<font color="#E5E5E5"> we've got container file</font>

678
00:22:05,800 --> 00:22:08,950
system access so<font color="#E5E5E5"> you've got access to</font><font color="#CCCCCC"> a</font>

679
00:22:07,330 --> 00:22:10,870
single file system<font color="#E5E5E5"> of the continual</font>

680
00:22:08,950 --> 00:22:12,330
running in which it's bad for the app

681
00:22:10,870 --> 00:22:14,860
but could also be back<font color="#E5E5E5"> for the cluster</font>

682
00:22:12,330 --> 00:22:16,600
we've got this internal network position

683
00:22:14,860 --> 00:22:18,490
<font color="#CCCCCC">so before I mentioned the fact</font><font color="#E5E5E5"> that this</font>

684
00:22:16,600 --> 00:22:19,418
is a nice flat internal network<font color="#E5E5E5"> that's</font>

685
00:22:18,490 --> 00:22:20,589
good for as an attack

686
00:22:19,419 --> 00:22:23,700
as<font color="#CCCCCC"> once we're in there we're in there</font>

687
00:22:20,589 --> 00:22:26,019
which<font color="#CCCCCC"> is</font><font color="#E5E5E5"> great and this</font><font color="#CCCCCC"> Kerala tax</font>

688
00:22:23,700 --> 00:22:27,339
containers all run on<font color="#E5E5E5"> an old obviously</font>

689
00:22:26,019 --> 00:22:28,419
<font color="#CCCCCC">one of</font><font color="#E5E5E5"> the key</font><font color="#CCCCCC"> things about docker</font><font color="#E5E5E5"> and</font>

690
00:22:27,339 --> 00:22:30,190
everything<font color="#E5E5E5"> else is you're running</font><font color="#CCCCCC"> as the</font>

691
00:22:28,419 --> 00:22:31,329
shared Linux kernel so if this is zero

692
00:22:30,190 --> 00:22:32,349
day in<font color="#E5E5E5"> that kernel or you're running</font><font color="#CCCCCC"> an</font>

693
00:22:31,329 --> 00:22:33,940
old colonel<font color="#E5E5E5"> once I've got the</font>

694
00:22:32,349 --> 00:22:36,549
opportunity to<font color="#E5E5E5"> run code on</font><font color="#CCCCCC"> it I might</font><font color="#E5E5E5"> be</font>

695
00:22:33,940 --> 00:22:38,259
<font color="#E5E5E5">able to get in that way but let's talk</font>

696
00:22:36,549 --> 00:22:40,839
<font color="#E5E5E5">about</font><font color="#CCCCCC"> service account</font><font color="#E5E5E5"> tokens because</font>

697
00:22:38,259 --> 00:22:45,039
they're<font color="#E5E5E5"> really wacky and by default</font>

698
00:22:40,839 --> 00:22:47,320
kubernetes up<font color="#E5E5E5"> to</font><font color="#CCCCCC"> can stop it</font><font color="#E5E5E5"> now but</font>

699
00:22:45,039 --> 00:22:50,320
<font color="#CCCCCC">basically anything</font><font color="#E5E5E5"> for 1.6 loaded by</font>

700
00:22:47,320 --> 00:22:51,820
default<font color="#CCCCCC"> definitely</font><font color="#E5E5E5"> when you run up a</font>

701
00:22:50,320 --> 00:22:53,889
container in Kibera native land

702
00:22:51,820 --> 00:22:55,149
it gives it a token<font color="#CCCCCC"> and it gives the</font>

703
00:22:53,889 --> 00:22:57,039
container a token so they can

704
00:22:55,149 --> 00:22:58,478
communicate<font color="#E5E5E5"> back to the API server so</font>

705
00:22:57,039 --> 00:23:00,519
maybe it wants to talk to<font color="#CCCCCC"> the API server</font>

706
00:22:58,479 --> 00:23:02,019
to do something maybe<font color="#E5E5E5"> it was like get</font>

707
00:23:00,519 --> 00:23:03,249
some stats<font color="#E5E5E5"> or talk to the API server to</font>

708
00:23:02,019 --> 00:23:05,379
tell<font color="#CCCCCC"> it's deployed itself or whatever</font>

709
00:23:03,249 --> 00:23:07,089
else<font color="#E5E5E5"> the weird</font><font color="#CCCCCC"> thing is</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> by default</font>

710
00:23:05,379 --> 00:23:09,759
until recently those tokens<font color="#CCCCCC"> were cluster</font>

711
00:23:07,089 --> 00:23:12,070
admin so if you get<font color="#E5E5E5"> inside the container</font>

712
00:23:09,759 --> 00:23:13,209
you've got<font color="#CCCCCC"> cost</font><font color="#E5E5E5"> robin token which is</font>

713
00:23:12,070 --> 00:23:16,839
nice if you're<font color="#E5E5E5"> an attacker</font>

714
00:23:13,209 --> 00:23:18,579
so<font color="#CCCCCC"> Boulder here is we're going</font><font color="#E5E5E5"> to we're</font>

715
00:23:16,839 --> 00:23:21,658
going<font color="#CCCCCC"> to</font><font color="#E5E5E5"> deploy container simulate our</font>

716
00:23:18,579 --> 00:23:23,889
<font color="#CCCCCC">bat this</font><font color="#E5E5E5"> is our compromised container</font>

717
00:23:21,659 --> 00:23:26,200
right<font color="#CCCCCC"> I'm gonna</font><font color="#E5E5E5"> call the bad container</font>

718
00:23:23,889 --> 00:23:29,379
because you know why not<font color="#E5E5E5"> so we've got</font>

719
00:23:26,200 --> 00:23:39,999
<font color="#E5E5E5">our bad container</font><font color="#CCCCCC"> and now I</font><font color="#E5E5E5"> should be</font>

720
00:23:29,379 --> 00:23:42,728
able<font color="#E5E5E5"> to do cube CTL exactly well passes</font>

721
00:23:39,999 --> 00:23:44,079
inside the container so now<font color="#E5E5E5"> I'm on I'm</font>

722
00:23:42,729 --> 00:23:46,269
on the container<font color="#CCCCCC"> network I'm back at</font>

723
00:23:44,079 --> 00:23:47,559
that's me<font color="#CCCCCC"> I know running</font><font color="#E5E5E5"> as my container</font>

724
00:23:46,269 --> 00:23:50,169
<font color="#E5E5E5">and I'd like to say there</font><font color="#CCCCCC"> was some like</font>

725
00:23:47,559 --> 00:23:52,719
long complex<font color="#CCCCCC"> elite process</font><font color="#E5E5E5"> that I needed</font>

726
00:23:50,169 --> 00:23:56,739
to carry out<font color="#E5E5E5"> to do this but I hate to</font>

727
00:23:52,719 --> 00:23:59,679
<font color="#E5E5E5">say</font><font color="#CCCCCC"> that works if you've got the cube</font>

728
00:23:56,739 --> 00:24:01,359
CTL binary inside your container<font color="#E5E5E5"> there</font>

729
00:23:59,679 --> 00:24:03,539
is a token in a<font color="#E5E5E5"> default location that it</font>

730
00:24:01,359 --> 00:24:05,649
knows to<font color="#E5E5E5"> pick up which you will get and</font>

731
00:24:03,539 --> 00:24:07,179
kubernetes handily sets environment

732
00:24:05,649 --> 00:24:09,218
variables which tell it where to<font color="#E5E5E5"> find</font>

733
00:24:07,179 --> 00:24:10,359
the<font color="#CCCCCC"> api server</font><font color="#E5E5E5"> so it just picks up the</font>

734
00:24:09,219 --> 00:24:12,489
environment<font color="#CCCCCC"> variable says where is my</font>

735
00:24:10,359 --> 00:24:13,869
API server<font color="#E5E5E5"> oh right it's there then it</font>

736
00:24:12,489 --> 00:24:15,969
goes<font color="#E5E5E5"> and says can a my token yet that's</font>

737
00:24:13,869 --> 00:24:18,968
there and<font color="#E5E5E5"> then</font><font color="#CCCCCC"> it runs</font><font color="#E5E5E5"> and then your</font>

738
00:24:15,969 --> 00:24:21,909
cost<font color="#CCCCCC"> Ravin not very very</font><font color="#E5E5E5"> easy to pull</font>

739
00:24:18,969 --> 00:24:24,369
off if I'll talk about<font color="#E5E5E5"> how to give it</font>

740
00:24:21,909 --> 00:24:25,539
<font color="#E5E5E5">but basically you need</font><font color="#CCCCCC"> to not be</font>

741
00:24:24,369 --> 00:24:26,799
mounting service tokens inside

742
00:24:25,539 --> 00:24:28,569
containers at all under<font color="#CCCCCC"> any</font>

743
00:24:26,799 --> 00:24:30,429
circumstances if you do you<font color="#E5E5E5"> have to be</font>

744
00:24:28,569 --> 00:24:32,710
using authorization to lock it<font color="#E5E5E5"> down</font>

745
00:24:30,429 --> 00:24:37,480
otherwise that happens

746
00:24:32,710 --> 00:24:40,240
which is bad<font color="#CCCCCC"> Koster so yeah service Kent</font>

747
00:24:37,480 --> 00:24:43,539
tokens are super<font color="#E5E5E5"> dangerous actually</font><font color="#CCCCCC"> kind</font>

748
00:24:40,240 --> 00:24:45,399
of fun<font color="#E5E5E5"> someone only there's a b-side to</font>

749
00:24:43,539 --> 00:24:47,440
San Francisco<font color="#E5E5E5"> right up</font><font color="#CCCCCC"> I don't know I</font>

750
00:24:45,399 --> 00:24:49,418
<font color="#E5E5E5">see they run their seat they run their</font>

751
00:24:47,440 --> 00:24:51,700
CTF is here in kubernetes<font color="#CCCCCC"> as a cluster</font>

752
00:24:49,419 --> 00:24:53,590
<font color="#CCCCCC">and of course yeah</font><font color="#E5E5E5"> in a CTF the job is</font>

753
00:24:51,700 --> 00:24:55,509
to get flags<font color="#CCCCCC"> off boxes</font><font color="#E5E5E5"> right</font>

754
00:24:53,590 --> 00:24:58,029
so they<font color="#CCCCCC"> Admiral readies containers and</font>

755
00:24:55,509 --> 00:24:59,559
one bright spot<font color="#E5E5E5"> the first one got flag</font>

756
00:24:58,029 --> 00:25:01,570
went hang on<font color="#E5E5E5"> this is a kubernetes</font>

757
00:24:59,559 --> 00:25:04,149
cluster<font color="#E5E5E5"> got the service token got</font>

758
00:25:01,570 --> 00:25:06,369
cluster admin<font color="#CCCCCC"> won the CTF got all the</font>

759
00:25:04,149 --> 00:25:07,330
<font color="#E5E5E5">other flags bomb in an incident because</font>

760
00:25:06,369 --> 00:25:08,580
they didn't know about the<font color="#E5E5E5"> fact the</font>

761
00:25:07,330 --> 00:25:12,039
<font color="#CCCCCC">service to open star cluster happens</font>

762
00:25:08,580 --> 00:25:15,820
that was a<font color="#CCCCCC"> surprised um</font>

763
00:25:12,039 --> 00:25:18,279
<font color="#E5E5E5">API server attacks so yeah if the if the</font>

764
00:25:15,820 --> 00:25:20,259
so in this case<font color="#E5E5E5"> and I have seen this</font>

765
00:25:18,279 --> 00:25:24,279
from<font color="#E5E5E5"> inside the cluster as a default</font>

766
00:25:20,259 --> 00:25:32,080
<font color="#E5E5E5">option</font><font color="#CCCCCC"> and a major cloud</font><font color="#E5E5E5"> provider you</font>

767
00:25:24,279 --> 00:25:38,440
get<font color="#CCCCCC"> twenty</font><font color="#E5E5E5"> six eight</font><font color="#CCCCCC"> ten</font><font color="#E5E5E5"> that's not the</font>

768
00:25:32,080 --> 00:25:39,999
<font color="#E5E5E5">all</font><font color="#CCCCCC"> core so</font><font color="#E5E5E5"> it wasn't here forever yeah</font>

769
00:25:38,440 --> 00:25:42,249
so that you<font color="#E5E5E5"> will see sometimes</font><font color="#CCCCCC"> your CDN</font>

770
00:25:39,999 --> 00:25:47,369
skip or open if you see<font color="#E5E5E5"> open it's super</font>

771
00:25:42,249 --> 00:25:47,369
simple<font color="#CCCCCC"> you just do cube CTL - s-http</font>

772
00:25:53,539 --> 00:25:57,869
so you can just<font color="#E5E5E5"> point at the insecure</font>

773
00:25:55,950 --> 00:26:00,210
<font color="#E5E5E5">API server so basically if</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> have an</font>

774
00:25:57,869 --> 00:26:01,830
app<font color="#CCCCCC"> for 8080 of</font><font color="#E5E5E5"> them you can use curl</font>

775
00:26:00,210 --> 00:26:04,169
<font color="#E5E5E5">and you can do all this stuff with curl</font>

776
00:26:01,830 --> 00:26:05,699
<font color="#E5E5E5">because it is an HTTP API but frankly if</font>

777
00:26:04,169 --> 00:26:07,919
I'm attacking it I'm gonna<font color="#E5E5E5"> get cube CTL</font>

778
00:26:05,700 --> 00:26:08,970
down just as the binary<font color="#E5E5E5"> it's a static go</font>

779
00:26:07,919 --> 00:26:11,009
by<font color="#CCCCCC"> notice it's really easy to</font><font color="#E5E5E5"> get hold</font>

780
00:26:08,970 --> 00:26:12,179
<font color="#E5E5E5">off no dependencies and</font><font color="#CCCCCC"> just run it</font>

781
00:26:11,009 --> 00:26:14,070
because<font color="#E5E5E5"> it's much easier</font><font color="#CCCCCC"> getting stuff</font>

782
00:26:12,179 --> 00:26:15,179
back and<font color="#E5E5E5"> the format's kind of funky it's</font>

783
00:26:14,070 --> 00:26:17,249
starting<font color="#E5E5E5"> anything complicated squares</font>

784
00:26:15,179 --> 00:26:19,409
<font color="#CCCCCC">cubes details super easy</font><font color="#E5E5E5"> so yeah if you</font>

785
00:26:17,249 --> 00:26:26,009
see the insecure port<font color="#E5E5E5"> game over again</font><font color="#CCCCCC"> is</font>

786
00:26:19,409 --> 00:26:29,639
they always<font color="#E5E5E5"> cost</font><font color="#CCCCCC"> forever</font><font color="#E5E5E5"> and etcd last</font>

787
00:26:26,009 --> 00:26:33,210
<font color="#E5E5E5">ones etcd</font><font color="#CCCCCC"> etcd is interesting if it's if</font>

788
00:26:29,639 --> 00:26:35,129
it's open<font color="#CCCCCC"> you can dump bio as well</font><font color="#E5E5E5"> so</font>

789
00:26:33,210 --> 00:26:42,029
let<font color="#CCCCCC"> me get the command for</font><font color="#E5E5E5"> max I'm not</font>

790
00:26:35,129 --> 00:26:44,399
<font color="#E5E5E5">gonna remember it so basically there's a</font>

791
00:26:42,029 --> 00:26:46,379
command called<font color="#CCCCCC"> ECC control which you can</font>

792
00:26:44,399 --> 00:26:48,570
use to dump or to interact<font color="#CCCCCC"> with</font><font color="#E5E5E5"> etcd</font>

793
00:26:46,379 --> 00:26:50,490
<font color="#CCCCCC">eita</font><font color="#E5E5E5"> bases it used to be that it</font><font color="#CCCCCC"> was a</font>

794
00:26:48,570 --> 00:26:51,570
nice HTTP<font color="#E5E5E5"> API in all the Russians and</font>

795
00:26:50,490 --> 00:26:53,340
<font color="#E5E5E5">indeed if you get all the Russian it is</font>

796
00:26:51,570 --> 00:26:54,749
<font color="#CCCCCC">in HTTP and you hit with curl</font><font color="#E5E5E5"> and you</font>

797
00:26:53,340 --> 00:26:56,309
can just do recursive guess and scale

798
00:26:54,749 --> 00:26:58,080
stuff that way they've moved to a binary

799
00:26:56,309 --> 00:27:00,090
<font color="#E5E5E5">format now which is a bit less friendly</font>

800
00:26:58,080 --> 00:27:02,460
<font color="#E5E5E5">but you can still do something like</font><font color="#CCCCCC"> that</font>

801
00:27:00,090 --> 00:27:05,730
<font color="#E5E5E5">and it is not authentic ated that saves</font>

802
00:27:02,460 --> 00:27:06,960
a file called test<font color="#CCCCCC"> dot DB</font><font color="#E5E5E5"> and then you</font>

803
00:27:05,730 --> 00:27:08,879
can use a thing called<font color="#CCCCCC"> bold browser it's</font>

804
00:27:06,960 --> 00:27:11,249
this weird<font color="#E5E5E5"> bolt format which I've not</font>

805
00:27:08,879 --> 00:27:14,879
seen before<font color="#CCCCCC"> I</font><font color="#E5E5E5"> thought and</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> can just</font>

806
00:27:11,249 --> 00:27:16,549
do<font color="#CCCCCC"> that</font><font color="#E5E5E5"> and then that's yeah that's</font><font color="#CCCCCC"> the</font>

807
00:27:14,879 --> 00:27:19,139
entire configuration of the cluster<font color="#CCCCCC"> just</font>

808
00:27:16,549 --> 00:27:20,249
<font color="#CCCCCC">sitting there</font><font color="#E5E5E5"> so it's in this kind</font><font color="#CCCCCC"> of</font>

809
00:27:19,139 --> 00:27:21,658
slightly<font color="#E5E5E5"> weird you can see the questions</font>

810
00:27:20,249 --> 00:27:22,950
in<font color="#CCCCCC"> it's kind of</font><font color="#E5E5E5"> weird binary format so</font>

811
00:27:21,659 --> 00:27:25,289
if you want<font color="#E5E5E5"> to really get older but</font>

812
00:27:22,950 --> 00:27:27,539
<font color="#E5E5E5">you'll need to deserialize</font><font color="#CCCCCC"> G RPC which</font>

813
00:27:25,289 --> 00:27:29,009
<font color="#E5E5E5">is what it is but frankly if you're just</font>

814
00:27:27,539 --> 00:27:30,179
<font color="#E5E5E5">dumping stuff you've got way enough</font>

815
00:27:29,009 --> 00:27:31,259
information to<font color="#CCCCCC"> get there's tokens of</font>

816
00:27:30,179 --> 00:27:33,360
stuff in there if you look around long

817
00:27:31,259 --> 00:27:37,799
enough so<font color="#E5E5E5"> that's a really</font><font color="#CCCCCC"> good one</font><font color="#E5E5E5"> if he</font>

818
00:27:33,360 --> 00:27:39,479
hit poor and<font color="#E5E5E5"> the really the interesting</font>

819
00:27:37,799 --> 00:27:41,070
thing about a<font color="#CCCCCC"> TC d is if it's</font>

820
00:27:39,480 --> 00:27:42,389
<font color="#E5E5E5">authenticated it only has one option to</font>

821
00:27:41,070 --> 00:27:44,309
be authenticated and that's client

822
00:27:42,389 --> 00:27:45,240
certificates<font color="#E5E5E5"> so the way kubernetes works</font>

823
00:27:44,309 --> 00:27:46,619
with etcd

824
00:27:45,240 --> 00:27:48,090
it's all or nothing<font color="#E5E5E5"> and</font><font color="#CCCCCC"> its</font>

825
00:27:46,619 --> 00:27:50,999
authentication based on client

826
00:27:48,090 --> 00:27:52,470
certificate but he trusts<font color="#CCCCCC"> basically</font><font color="#E5E5E5"> i</font>

827
00:27:50,999 --> 00:27:53,970
has a<font color="#E5E5E5"> clustered</font><font color="#CCCCCC"> CCA so as a trusted</font>

828
00:27:52,470 --> 00:27:55,980
certificate<font color="#E5E5E5"> authority and it says any</font>

829
00:27:53,970 --> 00:27:58,440
certificate issued by<font color="#E5E5E5"> my trust by the</font>

830
00:27:55,980 --> 00:28:01,169
state court authority<font color="#CCCCCC"> i trust is cool</font>

831
00:27:58,440 --> 00:28:02,369
and can download the<font color="#E5E5E5"> file so if you use</font>

832
00:28:01,169 --> 00:28:03,450
<font color="#CCCCCC">certificates defecate or tea for a</font>

833
00:28:02,369 --> 00:28:05,369
number of<font color="#E5E5E5"> different things including</font>

834
00:28:03,450 --> 00:28:06,490
each CD and<font color="#E5E5E5"> all who can get client</font>

835
00:28:05,369 --> 00:28:08,110
certificate can hit it

836
00:28:06,490 --> 00:28:09,429
<font color="#E5E5E5">I'd dump the configuration out</font><font color="#CCCCCC"> so you</font>

837
00:28:08,110 --> 00:28:13,809
happy<font color="#CCCCCC"> we be careful with how you</font><font color="#E5E5E5"> can</font>

838
00:28:09,429 --> 00:28:15,490
figure<font color="#E5E5E5"> it the certificates for that but</font>

839
00:28:13,809 --> 00:28:17,139
it's cool<font color="#CCCCCC"> to</font><font color="#E5E5E5"> attacking</font><font color="#CCCCCC"> me where's</font>

840
00:28:15,490 --> 00:28:18,790
<font color="#CCCCCC">Colonel um basically</font><font color="#E5E5E5"> this is just</font>

841
00:28:17,140 --> 00:28:20,260
<font color="#CCCCCC">standard Linux kernel stuff</font><font color="#E5E5E5"> if you get</font>

842
00:28:18,790 --> 00:28:21,520
<font color="#CCCCCC">onto a container</font><font color="#E5E5E5"> they're running old</font>

843
00:28:20,260 --> 00:28:22,750
<font color="#E5E5E5">versions the kernel you probably</font><font color="#CCCCCC"> call</font>

844
00:28:21,520 --> 00:28:24,429
<font color="#CCCCCC">that</font><font color="#E5E5E5"> see</font><font color="#CCCCCC"> advise or something</font><font color="#E5E5E5"> like</font><font color="#CCCCCC"> that</font>

845
00:28:22,750 --> 00:28:25,809
you can look<font color="#CCCCCC"> things like</font><font color="#E5E5E5"> dirty care or</font>

846
00:28:24,429 --> 00:28:28,990
some of the other<font color="#E5E5E5"> Linux exploits that</font>

847
00:28:25,809 --> 00:28:31,990
<font color="#E5E5E5">might let you break out but that depends</font>

848
00:28:28,990 --> 00:28:36,130
us environment specific so malicious

849
00:28:31,990 --> 00:28:37,390
users are obviously much<font color="#E5E5E5"> as users are</font>

850
00:28:36,130 --> 00:28:38,890
harder to<font color="#CCCCCC"> stall right it's</font><font color="#E5E5E5"> gonna be</font>

851
00:28:37,390 --> 00:28:40,510
<font color="#E5E5E5">harder to stall people but you might</font>

852
00:28:38,890 --> 00:28:41,890
have circumstances where you've got

853
00:28:40,510 --> 00:28:43,360
upset<font color="#CCCCCC"> people you don't</font><font color="#E5E5E5"> necessarily want</font>

854
00:28:41,890 --> 00:28:44,590
to get<font color="#E5E5E5"> the ball cluster happen right you</font>

855
00:28:43,360 --> 00:28:47,260
might want to say<font color="#CCCCCC"> oh</font><font color="#E5E5E5"> you can do this</font><font color="#CCCCCC"> you</font>

856
00:28:44,590 --> 00:28:48,970
do<font color="#CCCCCC"> that by default</font><font color="#E5E5E5"> in older</font><font color="#CCCCCC"> versions</font>

857
00:28:47,260 --> 00:28:50,050
definitely that which is not starter<font color="#E5E5E5"> you</font>

858
00:28:48,970 --> 00:28:52,600
know your cluster<font color="#CCCCCC"> app and your cluster</font>

859
00:28:50,050 --> 00:28:53,620
app and that's<font color="#E5E5E5"> just the way it is um but</font>

860
00:28:52,600 --> 00:28:56,169
I'll<font color="#E5E5E5"> talk a little bit about it because</font>

861
00:28:53,620 --> 00:28:57,669
<font color="#E5E5E5">cube CTL you've seen me</font><font color="#CCCCCC"> alright so I've</font>

862
00:28:56,170 --> 00:28:59,140
used<font color="#CCCCCC"> cube detail for everything here and</font>

863
00:28:57,670 --> 00:29:00,760
I did see one talk where they were

864
00:28:59,140 --> 00:29:02,020
saying<font color="#E5E5E5"> the develop that the people</font>

865
00:29:00,760 --> 00:29:03,910
rolling out we're saying we don't want

866
00:29:02,020 --> 00:29:05,650
<font color="#CCCCCC">to give the developers SSH access to the</font>

867
00:29:03,910 --> 00:29:07,720
cluster<font color="#CCCCCC"> we'll</font><font color="#E5E5E5"> just give them cubes ETL</font>

868
00:29:05,650 --> 00:29:10,360
<font color="#E5E5E5">promise you've seen me exactly into</font>

869
00:29:07,720 --> 00:29:11,950
container<font color="#E5E5E5"> cubes ETL is SSH it's</font>

870
00:29:10,360 --> 00:29:13,419
everything<font color="#E5E5E5"> you can you can turn it into</font>

871
00:29:11,950 --> 00:29:15,760
<font color="#CCCCCC">a proxy</font><font color="#E5E5E5"> you can do</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> substation</font><font color="#CCCCCC"> is a</font>

872
00:29:13,420 --> 00:29:17,559
cool<font color="#E5E5E5"> program but if you give someone</font>

873
00:29:15,760 --> 00:29:19,330
cubes ETL access and you don't lock down

874
00:29:17,559 --> 00:29:21,990
their rights<font color="#E5E5E5"> they are basically going to</font>

875
00:29:19,330 --> 00:29:25,780
<font color="#E5E5E5">be clustered but very quickly because</font>

876
00:29:21,990 --> 00:29:29,740
<font color="#E5E5E5">I'll</font><font color="#CCCCCC"> show</font><font color="#E5E5E5"> you a little example there's a</font>

877
00:29:25,780 --> 00:29:31,720
concept in container land of privileged

878
00:29:29,740 --> 00:29:33,370
containers and basically<font color="#E5E5E5"> a privileged</font>

879
00:29:31,720 --> 00:29:35,770
container<font color="#E5E5E5"> says turn off all the</font>

880
00:29:33,370 --> 00:29:38,409
isolation<font color="#E5E5E5"> the doctor</font><font color="#CCCCCC"> provides just give</font>

881
00:29:35,770 --> 00:29:40,270
me<font color="#CCCCCC"> route like I'm on the node</font><font color="#E5E5E5"> so if you</font>

882
00:29:38,410 --> 00:29:43,600
wrote a<font color="#CCCCCC"> privileged container then that's</font>

883
00:29:40,270 --> 00:29:44,679
bad kubernetes has an option called<font color="#E5E5E5"> a</font>

884
00:29:43,600 --> 00:29:46,449
<font color="#CCCCCC">low privileged</font>

885
00:29:44,679 --> 00:29:48,850
which there's an API server level<font color="#E5E5E5"> I</font><font color="#CCCCCC"> can</font>

886
00:29:46,450 --> 00:29:50,860
<font color="#E5E5E5">just say no don't do</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> don't allow</font>

887
00:29:48,850 --> 00:29:52,330
privileges on in every single deployment

888
00:29:50,860 --> 00:29:53,889
I've seen and the<font color="#CCCCCC"> reason it's</font><font color="#E5E5E5"> on a</font>

889
00:29:52,330 --> 00:29:56,290
certain<font color="#E5E5E5"> system components need it</font><font color="#CCCCCC"> so</font>

890
00:29:53,890 --> 00:29:58,510
<font color="#E5E5E5">basically it will be</font><font color="#CCCCCC"> enabled and so here</font>

891
00:29:56,290 --> 00:30:00,490
I've got<font color="#CCCCCC"> a wall container which</font><font color="#E5E5E5"> it's</font>

892
00:29:58,510 --> 00:30:01,690
privileged and what you can do is with

893
00:30:00,490 --> 00:30:03,370
kubernetes containers is you can

894
00:30:01,690 --> 00:30:05,590
basically<font color="#E5E5E5"> say I want to mount in stuff</font>

895
00:30:03,370 --> 00:30:08,409
from the node so by<font color="#E5E5E5"> default so I can</font>

896
00:30:05,590 --> 00:30:11,439
just say mount in a<font color="#E5E5E5"> host path of the rip</font>

897
00:30:08,410 --> 00:30:14,320
into slash node and I can do<font color="#E5E5E5"> something</font>

898
00:30:11,440 --> 00:30:17,490
like<font color="#E5E5E5"> this</font><font color="#CCCCCC"> so exit back at my pad</font>

899
00:30:14,320 --> 00:30:17,490
container and then<font color="#CCCCCC"> we'll do</font>

900
00:30:17,990 --> 00:30:31,640
<font color="#E5E5E5">eight once I have recalled and</font><font color="#CCCCCC"> then we</font>

901
00:30:21,950 --> 00:30:33,920
do CTO<font color="#CCCCCC"> is</font><font color="#E5E5E5"> just okay and what I've got</font>

902
00:30:31,640 --> 00:30:35,450
<font color="#E5E5E5">here essentially is in here that's the</font>

903
00:30:33,920 --> 00:30:38,800
<font color="#E5E5E5">that's the root filesystem the</font><font color="#CCCCCC"> underline</font>

904
00:30:35,450 --> 00:30:41,300
node and if we look at who I am Andrew

905
00:30:38,800 --> 00:30:42,830
<font color="#E5E5E5">so it's game over for that node out</font><font color="#CCCCCC"> of</font>

906
00:30:41,300 --> 00:30:44,030
its game<font color="#CCCCCC"> room for the node</font><font color="#E5E5E5"> unless you've</font>

907
00:30:42,830 --> 00:30:44,990
done<font color="#E5E5E5"> a lot configuration on your</font><font color="#CCCCCC"> cluster</font>

908
00:30:44,030 --> 00:30:46,820
<font color="#E5E5E5">it's</font><font color="#CCCCCC"> pull</font><font color="#E5E5E5"> the game over for the whole</font>

909
00:30:44,990 --> 00:30:48,200
<font color="#E5E5E5">cluster because the cubelet has got</font>

910
00:30:46,820 --> 00:30:51,260
<font color="#CCCCCC">certificates in it which allow it to</font><font color="#E5E5E5"> top</font>

911
00:30:48,200 --> 00:30:53,059
the<font color="#E5E5E5"> API server and allow it to do things</font>

912
00:30:51,260 --> 00:30:55,160
to<font color="#E5E5E5"> water for the API server so that's</font>

913
00:30:53,059 --> 00:30:57,170
probably game over<font color="#E5E5E5"> and I can add users</font>

914
00:30:55,160 --> 00:30:59,090
<font color="#E5E5E5">or else I</font><font color="#CCCCCC"> watch</font><font color="#E5E5E5"> just by mounting in the</font>

915
00:30:57,170 --> 00:31:01,040
<font color="#CCCCCC">filesystem</font><font color="#E5E5E5"> so basically if</font><font color="#CCCCCC"> you let</font>

916
00:30:59,090 --> 00:31:02,360
someone run containers<font color="#E5E5E5"> in an</font>

917
00:31:01,040 --> 00:31:03,559
unconstrained fashioning use basically

918
00:31:02,360 --> 00:31:05,090
<font color="#CCCCCC">say I'm gonna let you do what you</font><font color="#E5E5E5"> want</font>

919
00:31:03,559 --> 00:31:06,350
<font color="#E5E5E5">the if you</font><font color="#CCCCCC"> want</font><font color="#E5E5E5"> to be</font>

920
00:31:05,090 --> 00:31:08,059
they'll be<font color="#E5E5E5"> route really really quickly</font>

921
00:31:06,350 --> 00:31:13,399
<font color="#CCCCCC">on</font><font color="#E5E5E5"> your cluster and there's not a lot</font>

922
00:31:08,059 --> 00:31:15,470
<font color="#CCCCCC">you can do to</font><font color="#E5E5E5"> stop them access to nodes</font>

923
00:31:13,400 --> 00:31:20,660
<font color="#CCCCCC">are super bad</font><font color="#E5E5E5"> basically so yeah in</font>

924
00:31:15,470 --> 00:31:21,860
<font color="#E5E5E5">general that stuff not good um so how</font>

925
00:31:20,660 --> 00:31:22,970
are we<font color="#E5E5E5"> gonna fix</font><font color="#CCCCCC"> all this</font><font color="#E5E5E5"> so I've kind</font>

926
00:31:21,860 --> 00:31:24,678
of<font color="#E5E5E5"> basically told you about how to break</font>

927
00:31:22,970 --> 00:31:27,110
all these things and how to totally

928
00:31:24,679 --> 00:31:29,000
<font color="#E5E5E5">describe clusters it all comes down to</font>

929
00:31:27,110 --> 00:31:31,879
what options<font color="#E5E5E5"> you choose and what</font>

930
00:31:29,000 --> 00:31:32,929
versions you run<font color="#E5E5E5"> it's getting a lot</font>

931
00:31:31,880 --> 00:31:35,630
better<font color="#CCCCCC"> where I started</font><font color="#E5E5E5"> looking at this</font>

932
00:31:32,929 --> 00:31:37,250
like nine months<font color="#CCCCCC"> ago</font><font color="#E5E5E5"> a lot of</font><font color="#CCCCCC"> these</font>

933
00:31:35,630 --> 00:31:38,780
<font color="#E5E5E5">options didn't exist and basically there</font>

934
00:31:37,250 --> 00:31:39,200
was no way to stop<font color="#CCCCCC"> a</font><font color="#E5E5E5"> lot of</font><font color="#CCCCCC"> these</font>

935
00:31:38,780 --> 00:31:41,360
<font color="#E5E5E5">attacks</font>

936
00:31:39,200 --> 00:31:42,350
apart from lots of<font color="#E5E5E5"> firewall</font><font color="#CCCCCC"> ax I'm</font>

937
00:31:41,360 --> 00:31:43,340
trying to<font color="#E5E5E5"> stop</font><font color="#CCCCCC"> people getting</font><font color="#E5E5E5"> to the</font>

938
00:31:42,350 --> 00:31:45,439
<font color="#CCCCCC">ports because if they could get to the</font>

939
00:31:43,340 --> 00:31:47,959
<font color="#E5E5E5">ports it was going to be super bad knots</font>

940
00:31:45,440 --> 00:31:50,660
about<font color="#E5E5E5"> not so</font><font color="#CCCCCC"> much the case now um</font>

941
00:31:47,960 --> 00:31:53,030
restarting<font color="#E5E5E5"> turn off the unsecured port</font>

942
00:31:50,660 --> 00:31:54,290
the clue is in the name<font color="#E5E5E5"> do not enable</font>

943
00:31:53,030 --> 00:31:56,990
the insecure port it's a really bad<font color="#CCCCCC"> idea</font>

944
00:31:54,290 --> 00:31:58,790
<font color="#CCCCCC">if you absolutely</font><font color="#E5E5E5"> have</font><font color="#CCCCCC"> to find it</font>

945
00:31:56,990 --> 00:32:00,290
<font color="#CCCCCC">localhost on the API server that</font><font color="#E5E5E5"> at</font>

946
00:31:58,790 --> 00:32:01,730
<font color="#E5E5E5">least gives you some degree</font><font color="#CCCCCC"> of it'll</font><font color="#E5E5E5"> be</font>

947
00:32:00,290 --> 00:32:03,678
harder for<font color="#CCCCCC"> someone to</font><font color="#E5E5E5"> get to but</font>

948
00:32:01,730 --> 00:32:08,120
generally I would<font color="#CCCCCC"> say get rid</font><font color="#E5E5E5"> of the</font>

949
00:32:03,679 --> 00:32:10,730
insecure port<font color="#E5E5E5"> it's not good idea API</font>

950
00:32:08,120 --> 00:32:12,110
server authentication<font color="#E5E5E5"> this is kind of</font>

951
00:32:10,730 --> 00:32:13,400
interesting<font color="#CCCCCC"> right so obviously</font><font color="#E5E5E5"> turn off</font>

952
00:32:12,110 --> 00:32:16,340
anonymous authentication that's again

953
00:32:13,400 --> 00:32:18,620
kind<font color="#E5E5E5"> of an obvious</font><font color="#CCCCCC"> one</font><font color="#E5E5E5"> authentication</font><font color="#CCCCCC"> to</font>

954
00:32:16,340 --> 00:32:21,230
kubernetes is<font color="#E5E5E5"> kind of weird it used to</font>

955
00:32:18,620 --> 00:32:23,120
be<font color="#E5E5E5"> you used basic HTTP</font><font color="#CCCCCC"> or or token off</font>

956
00:32:21,230 --> 00:32:25,840
which were our static tokens which lived

957
00:32:23,120 --> 00:32:28,280
in a file on the API server in the clear

958
00:32:25,840 --> 00:32:30,230
<font color="#CCCCCC">this</font><font color="#E5E5E5"> always an ideal if you wanted to</font>

959
00:32:28,280 --> 00:32:31,610
add or remove<font color="#E5E5E5"> a</font><font color="#CCCCCC"> user you had to go in</font>

960
00:32:30,230 --> 00:32:33,380
SSH<font color="#CCCCCC"> onto the API</font>

961
00:32:31,610 --> 00:32:35,659
server<font color="#E5E5E5"> modify the file</font><font color="#CCCCCC"> and reboot</font><font color="#E5E5E5"> the</font>

962
00:32:33,380 --> 00:32:37,640
service this<font color="#E5E5E5"> is not a scalable of</font>

963
00:32:35,660 --> 00:32:38,780
<font color="#CCCCCC">abdication</font><font color="#E5E5E5"> mechanism so these days it</font>

964
00:32:37,640 --> 00:32:40,309
uses client certificate authentication

965
00:32:38,780 --> 00:32:41,960
<font color="#CCCCCC">you notice when I was running</font><font color="#E5E5E5"> all those</font>

966
00:32:40,309 --> 00:32:43,309
<font color="#E5E5E5">cubes ETL commands that wasn't I</font>

967
00:32:41,960 --> 00:32:44,840
disabled authentication on the cluster

968
00:32:43,309 --> 00:32:47,240
<font color="#CCCCCC">it's just that it knows where to</font><font color="#E5E5E5"> get the</font>

969
00:32:44,840 --> 00:32:50,330
<font color="#CCCCCC">compact file to do</font><font color="#E5E5E5"> my client certificate</font>

970
00:32:47,240 --> 00:32:51,500
to pass it to<font color="#CCCCCC"> thee the API server um</font><font color="#E5E5E5"> the</font>

971
00:32:50,330 --> 00:32:52,520
one<font color="#CCCCCC"> problem with certificate</font>

972
00:32:51,500 --> 00:32:54,559
authentication that<font color="#E5E5E5"> I think should</font>

973
00:32:52,520 --> 00:32:56,270
probably get<font color="#CCCCCC"> mentioned is</font><font color="#E5E5E5"> within</font>

974
00:32:54,559 --> 00:32:59,030
kubernetes itself<font color="#E5E5E5"> there is no</font>

975
00:32:56,270 --> 00:33:01,400
certificate<font color="#CCCCCC"> revocation</font><font color="#E5E5E5"> as a concept so</font>

976
00:32:59,030 --> 00:33:02,750
if you lose<font color="#E5E5E5"> someone's certificate you</font>

977
00:33:01,400 --> 00:33:04,460
either have to recreate<font color="#E5E5E5"> the entire</font>

978
00:33:02,750 --> 00:33:06,919
certificate authority<font color="#CCCCCC"> or live</font><font color="#E5E5E5"> with the</font>

979
00:33:04,460 --> 00:33:09,799
risk until<font color="#E5E5E5"> it expires so either</font><font color="#CCCCCC"> use</font>

980
00:33:06,919 --> 00:33:11,360
short-lived certificates or have some

981
00:33:09,799 --> 00:33:13,010
other means<font color="#E5E5E5"> of doing stuff accreditation</font>

982
00:33:11,360 --> 00:33:14,600
<font color="#E5E5E5">you</font><font color="#CCCCCC"> can use</font><font color="#E5E5E5"> external authentication</font>

983
00:33:13,010 --> 00:33:16,220
services<font color="#E5E5E5"> and that's probably the</font><font color="#CCCCCC"> most</font>

984
00:33:14,600 --> 00:33:17,870
flexible<font color="#CCCCCC"> option right now so</font><font color="#E5E5E5"> the things</font>

985
00:33:16,220 --> 00:33:19,250
<font color="#CCCCCC">that you have a web hook</font><font color="#E5E5E5"> and you can</font>

986
00:33:17,870 --> 00:33:21,439
tell the API server go<font color="#E5E5E5"> and talk this way</font>

987
00:33:19,250 --> 00:33:23,210
<font color="#E5E5E5">to do that occasionally shion's all the</font>

988
00:33:21,440 --> 00:33:24,230
other ones<font color="#E5E5E5"> are a</font><font color="#CCCCCC"> bit kind of I wouldn't</font>

989
00:33:23,210 --> 00:33:25,910
<font color="#E5E5E5">want</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> scale them they're</font><font color="#CCCCCC"> okay for</font>

990
00:33:24,230 --> 00:33:27,290
<font color="#CCCCCC">small numbers of</font><font color="#E5E5E5"> users but if I had like</font>

991
00:33:25,910 --> 00:33:28,040
100 users<font color="#E5E5E5"> I wouldn't be using</font><font color="#CCCCCC"> Cline's</font>

992
00:33:27,290 --> 00:33:29,330
certificates<font color="#CCCCCC"> like that with no</font>

993
00:33:28,040 --> 00:33:30,918
revocation because you're just<font color="#E5E5E5"> gonna end</font>

994
00:33:29,330 --> 00:33:32,030
<font color="#CCCCCC">up</font><font color="#E5E5E5"> with some of this as a laptop</font><font color="#CCCCCC"> and</font>

995
00:33:30,919 --> 00:33:33,710
it's like<font color="#CCCCCC"> oh smack what do we do now</font>

996
00:33:32,030 --> 00:33:37,129
that's<font color="#E5E5E5"> not a good situation to</font><font color="#CCCCCC"> be in</font>

997
00:33:33,710 --> 00:33:39,440
author authentication is<font color="#E5E5E5"> cannot or</font>

998
00:33:37,130 --> 00:33:40,190
authorization<font color="#E5E5E5"> so it used to be once</font>

999
00:33:39,440 --> 00:33:42,049
you're in there was no authorization

1000
00:33:40,190 --> 00:33:43,640
<font color="#CCCCCC">it's</font><font color="#E5E5E5"> cluster I feel like one</font><font color="#CCCCCC"> point fire</font>

1001
00:33:42,049 --> 00:33:45,559
<font color="#E5E5E5">earlier it's almost inevitably there's</font>

1002
00:33:43,640 --> 00:33:48,230
no authorization<font color="#E5E5E5"> now there's our back</font>

1003
00:33:45,559 --> 00:33:49,790
<font color="#E5E5E5">row based authentication</font><font color="#CCCCCC"> it's worth</font>

1004
00:33:48,230 --> 00:33:52,100
definitely that's<font color="#E5E5E5"> the way to go so you</font>

1005
00:33:49,790 --> 00:33:53,389
want to<font color="#E5E5E5"> lock down what users can do you</font>

1006
00:33:52,100 --> 00:33:55,070
want to start applying<font color="#E5E5E5"> role based</font>

1007
00:33:53,390 --> 00:33:57,290
authentication<font color="#E5E5E5"> to users</font>

1008
00:33:55,070 --> 00:33:59,090
the other thing I'll say is<font color="#E5E5E5"> it can get</font><font color="#CCCCCC"> a</font>

1009
00:33:57,290 --> 00:34:04,220
wee bit complicated<font color="#CCCCCC"> just to give</font><font color="#E5E5E5"> you a</font>

1010
00:33:59,090 --> 00:34:06,678
demonstration<font color="#CCCCCC"> um</font><font color="#E5E5E5"> you know cluster rules</font>

1011
00:34:04,220 --> 00:34:09,859
this<font color="#E5E5E5"> is a default give me a DM install</font>

1012
00:34:06,679 --> 00:34:11,179
<font color="#CCCCCC">that's the</font><font color="#E5E5E5"> list of roles</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> that's not</font>

1013
00:34:09,859 --> 00:34:13,869
all there's more roles as<font color="#CCCCCC"> there are</font>

1014
00:34:11,179 --> 00:34:13,869
ordinary<font color="#E5E5E5"> rules as well</font>

1015
00:34:15,580 --> 00:34:20,029
<font color="#CCCCCC">yeah there's</font><font color="#E5E5E5"> two rules industrial</font>

1016
00:34:17,629 --> 00:34:21,350
bindings<font color="#E5E5E5"> and it's like what is that</font><font color="#CCCCCC"> 40</font>

1017
00:34:20,030 --> 00:34:22,820
<font color="#E5E5E5">these things so it gets a wee bit</font>

1018
00:34:21,350 --> 00:34:23,960
complicated<font color="#E5E5E5"> so</font><font color="#CCCCCC"> I will say that you know</font>

1019
00:34:22,820 --> 00:34:27,109
if you're starting<font color="#CCCCCC"> with a lot users on a</font>

1020
00:34:23,960 --> 00:34:28,520
cluster<font color="#E5E5E5"> thinking through how you want to</font>

1021
00:34:27,109 --> 00:34:29,899
<font color="#E5E5E5">do your authorization</font><font color="#CCCCCC"> and getting that</font>

1022
00:34:28,520 --> 00:34:31,639
right early on<font color="#E5E5E5"> it's</font><font color="#CCCCCC"> probably really</font>

1023
00:34:29,899 --> 00:34:33,618
<font color="#E5E5E5">important because you can end up with a</font>

1024
00:34:31,639 --> 00:34:35,960
<font color="#E5E5E5">really complex situation and the funny</font>

1025
00:34:33,619 --> 00:34:38,440
thing<font color="#CCCCCC"> about kubernetes</font><font color="#E5E5E5"> is it doesn't</font>

1026
00:34:35,960 --> 00:34:41,240
<font color="#E5E5E5">have a list of what users it knows</font><font color="#CCCCCC"> about</font>

1027
00:34:38,440 --> 00:34:44,570
so if you said to<font color="#E5E5E5"> a cluster I've been</font>

1028
00:34:41,239 --> 00:34:45,560
off<font color="#E5E5E5"> who is cumulative users don't know</font>

1029
00:34:44,570 --> 00:34:47,600
just<font color="#CCCCCC"> to into the certificates</font><font color="#E5E5E5"> are</font>

1030
00:34:45,560 --> 00:34:48,889
presented this difficult it it has the

1031
00:34:47,600 --> 00:34:51,139
name<font color="#CCCCCC"> of</font><font color="#E5E5E5"> the user in the</font><font color="#CCCCCC"> certificate</font>

1032
00:34:48,889 --> 00:34:52,879
fields that's how it knows who you are

1033
00:34:51,139 --> 00:34:54,080
<font color="#CCCCCC">I have what role</font><font color="#E5E5E5"> sure you've got they</font>

1034
00:34:52,880 --> 00:34:55,310
don't actually know who all<font color="#E5E5E5"> the users</font>

1035
00:34:54,080 --> 00:34:56,480
are the<font color="#CCCCCC"> cost to can tell you that you</font>

1036
00:34:55,310 --> 00:34:57,920
have to be<font color="#E5E5E5"> your</font><font color="#CCCCCC"> CA Authenticator or</font>

1037
00:34:56,480 --> 00:34:59,900
whoever else<font color="#E5E5E5"> manages</font><font color="#CCCCCC"> your authentication</font>

1038
00:34:57,920 --> 00:35:02,600
<font color="#E5E5E5">service who's gonna know that so you can</font>

1039
00:34:59,900 --> 00:35:03,980
end up the BMS I think they're lying<font color="#E5E5E5"> so</font>

1040
00:35:02,600 --> 00:35:05,480
that's yeah but definitely use our back

1041
00:35:03,980 --> 00:35:06,680
<font color="#E5E5E5">don't use anything else use our back</font>

1042
00:35:05,480 --> 00:35:07,720
<font color="#E5E5E5">it's the way</font><font color="#CCCCCC"> forward that's definite</font>

1043
00:35:06,680 --> 00:35:10,549
where they're heading

1044
00:35:07,720 --> 00:35:12,049
<font color="#CCCCCC">patrol</font><font color="#E5E5E5"> access</font><font color="#CCCCCC"> to cubelet</font><font color="#E5E5E5"> turn off</font>

1045
00:35:10,550 --> 00:35:15,020
anonymous the<font color="#CCCCCC"> educational to Kuebler</font>

1046
00:35:12,050 --> 00:35:17,420
absolutely<font color="#CCCCCC"> set the authorization</font><font color="#E5E5E5"> mode</font>

1047
00:35:15,020 --> 00:35:19,700
not<font color="#E5E5E5"> to always</font><font color="#CCCCCC"> allow</font><font color="#E5E5E5"> which is</font><font color="#CCCCCC"> false</font>

1048
00:35:17,420 --> 00:35:21,200
settings<font color="#CCCCCC"> and older versions turn off the</font>

1049
00:35:19,700 --> 00:35:23,450
read-only port and turn off<font color="#E5E5E5"> see</font><font color="#CCCCCC"> advisor</font>

1050
00:35:21,200 --> 00:35:25,790
<font color="#E5E5E5">if you absolutely need these things</font><font color="#CCCCCC"> bind</font>

1051
00:35:23,450 --> 00:35:27,259
them to<font color="#E5E5E5"> local</font><font color="#CCCCCC"> host</font><font color="#E5E5E5"> far all them</font><font color="#CCCCCC"> off but</font>

1052
00:35:25,790 --> 00:35:28,430
you've<font color="#E5E5E5"> seen you can get information that</font>

1053
00:35:27,260 --> 00:35:30,950
<font color="#E5E5E5">attackers</font><font color="#CCCCCC"> gonna be</font><font color="#E5E5E5"> really happy about</font>

1054
00:35:28,430 --> 00:35:35,029
finding if you see<font color="#E5E5E5"> leave these</font><font color="#CCCCCC"> things</font>

1055
00:35:30,950 --> 00:35:37,520
open so<font color="#E5E5E5"> definitely turn them off</font><font color="#CCCCCC"> control</font>

1056
00:35:35,030 --> 00:35:38,900
<font color="#CCCCCC">access</font><font color="#E5E5E5"> CCD</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> I'm basically before the</font>

1057
00:35:37,520 --> 00:35:39,890
certificate authorities need<font color="#CCCCCC"> CCD a bit</font>

1058
00:35:38,900 --> 00:35:41,720
funny<font color="#E5E5E5"> so you have to be a bit careful</font>

1059
00:35:39,890 --> 00:35:46,069
there but but absolutely trying<font color="#E5E5E5"> to</font>

1060
00:35:41,720 --> 00:35:48,950
control<font color="#E5E5E5"> access to that as well other</font>

1061
00:35:46,070 --> 00:35:50,810
things<font color="#CCCCCC"> to think</font><font color="#E5E5E5"> about</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> when I was</font>

1062
00:35:48,950 --> 00:35:53,330
<font color="#E5E5E5">running out</font><font color="#CCCCCC"> that hard there and I</font><font color="#E5E5E5"> said</font>

1063
00:35:50,810 --> 00:35:54,440
let it be privileged<font color="#E5E5E5"> until recently that</font>

1064
00:35:53,330 --> 00:35:55,430
<font color="#E5E5E5">was you've never what choice to lock</font>

1065
00:35:54,440 --> 00:35:58,010
that down but there's<font color="#E5E5E5"> never a thing</font>

1066
00:35:55,430 --> 00:35:59,270
called<font color="#E5E5E5"> pod security policy applied pod</font>

1067
00:35:58,010 --> 00:36:01,310
security policies to all your pods

1068
00:35:59,270 --> 00:36:04,340
basically you can say no privileged no

1069
00:36:01,310 --> 00:36:05,690
mounting stuff off the<font color="#E5E5E5"> host no doing</font>

1070
00:36:04,340 --> 00:36:07,430
things are dangerous no adding yourself

1071
00:36:05,690 --> 00:36:09,620
extra<font color="#E5E5E5"> rights no binding to the host</font>

1072
00:36:07,430 --> 00:36:11,240
<font color="#CCCCCC">network no doing any of these things so</font>

1073
00:36:09,620 --> 00:36:12,950
you need to<font color="#CCCCCC"> find a pod security policy</font>

1074
00:36:11,240 --> 00:36:14,629
for any pod you deploy<font color="#CCCCCC"> out</font><font color="#E5E5E5"> the cluster</font>

1075
00:36:12,950 --> 00:36:17,330
and get that<font color="#E5E5E5"> stuff right before</font><font color="#CCCCCC"> you</font>

1076
00:36:14,630 --> 00:36:20,060
start deploying things security contexts

1077
00:36:17,330 --> 00:36:21,590
so containers both docker and everything

1078
00:36:20,060 --> 00:36:22,759
else<font color="#CCCCCC"> they kind of have an idea of</font><font color="#E5E5E5"> what</font>

1079
00:36:21,590 --> 00:36:24,560
they're<font color="#CCCCCC"> going to do is default</font><font color="#E5E5E5"> they say</font>

1080
00:36:22,760 --> 00:36:27,020
here are your default security options

1081
00:36:24,560 --> 00:36:28,430
you can harden<font color="#E5E5E5"> that stuff down</font><font color="#CCCCCC"> you can</font>

1082
00:36:27,020 --> 00:36:30,290
make it you can<font color="#CCCCCC"> give the thing</font><font color="#E5E5E5"> less</font>

1083
00:36:28,430 --> 00:36:32,779
right you can take away capabilities you

1084
00:36:30,290 --> 00:36:34,310
<font color="#CCCCCC">can add a farmer or say SELinux policies</font>

1085
00:36:32,780 --> 00:36:35,780
if you're rolling<font color="#E5E5E5"> out</font><font color="#CCCCCC"> across private</font>

1086
00:36:34,310 --> 00:36:37,190
well worth<font color="#CCCCCC"> looking at that</font><font color="#E5E5E5"> I'm not gonna</font>

1087
00:36:35,780 --> 00:36:38,810
<font color="#CCCCCC">pretend it's gonna be</font><font color="#E5E5E5"> super easy to do</font>

1088
00:36:37,190 --> 00:36:40,580
but<font color="#E5E5E5"> if you have a</font><font color="#CCCCCC"> high-value cluster you</font>

1089
00:36:38,810 --> 00:36:42,980
start using stuff production it's worth

1090
00:36:40,580 --> 00:36:44,569
looking<font color="#E5E5E5"> at</font><font color="#CCCCCC"> and the last one which is</font>

1091
00:36:42,980 --> 00:36:46,760
putting<font color="#E5E5E5"> you in leak em out into</font>

1092
00:36:44,570 --> 00:36:49,160
production<font color="#E5E5E5"> in the lease version</font><font color="#CCCCCC"> three</font>

1093
00:36:46,760 --> 00:36:51,860
weeks<font color="#E5E5E5"> ago is network policy so Network</font>

1094
00:36:49,160 --> 00:36:53,390
policy stops the problem of everything

1095
00:36:51,860 --> 00:36:55,730
<font color="#E5E5E5">can see everything else you can</font><font color="#CCCCCC"> apply</font>

1096
00:36:53,390 --> 00:36:56,930
essentially firewall ACL<font color="#E5E5E5"> to containers</font>

1097
00:36:55,730 --> 00:36:58,360
so<font color="#E5E5E5"> you can say I'm going to find a</font>

1098
00:36:56,930 --> 00:36:59,740
network policy this gives

1099
00:36:58,360 --> 00:37:02,080
<font color="#E5E5E5">I can only talk</font><font color="#CCCCCC"> to these containers on</font>

1100
00:36:59,740 --> 00:37:04,509
these<font color="#CCCCCC"> ports</font><font color="#E5E5E5"> it's not super flexible yet</font>

1101
00:37:02,080 --> 00:37:06,190
but it's absolutely<font color="#CCCCCC"> work</font><font color="#E5E5E5"> better than</font>

1102
00:37:04,510 --> 00:37:10,960
having nothing and<font color="#E5E5E5"> having this big</font><font color="#CCCCCC"> flat</font>

1103
00:37:06,190 --> 00:37:13,750
internal network<font color="#CCCCCC"> there across so</font>

1104
00:37:10,960 --> 00:37:16,090
<font color="#E5E5E5">resources there's a couple of things to</font>

1105
00:37:13,750 --> 00:37:16,720
<font color="#E5E5E5">look at there's the</font><font color="#CCCCCC"> CIS gate absolutely</font>

1106
00:37:16,090 --> 00:37:18,160
worth looking at

1107
00:37:16,720 --> 00:37:20,919
this is something I've started writing

1108
00:37:18,160 --> 00:37:22,480
<font color="#E5E5E5">oh yeah</font>

1109
00:37:20,920 --> 00:37:27,850
this is something I've started writing

1110
00:37:22,480 --> 00:37:29,290
so can I show<font color="#E5E5E5"> you briefly</font><font color="#CCCCCC"> oh yeah</font><font color="#E5E5E5"> so I</font>

1111
00:37:27,850 --> 00:37:30,790
<font color="#E5E5E5">started doing a little analyzer tool</font>

1112
00:37:29,290 --> 00:37:32,380
which basically gets<font color="#E5E5E5"> the CIS guy who</font>

1113
00:37:30,790 --> 00:37:37,180
tries to<font color="#E5E5E5"> actually</font><font color="#CCCCCC"> like turn it into a</font>

1114
00:37:32,380 --> 00:37:39,220
<font color="#CCCCCC">report this is a demo so it will go</font>

1115
00:37:37,180 --> 00:37:41,440
through and it'll check essentially pass

1116
00:37:39,220 --> 00:37:43,930
or fail on<font color="#E5E5E5"> each one of</font><font color="#CCCCCC"> the checks which</font>

1117
00:37:41,440 --> 00:37:45,070
is just the wife<font color="#CCCCCC"> found is oh and it</font><font color="#E5E5E5"> also</font>

1118
00:37:43,930 --> 00:37:49,060
<font color="#CCCCCC">dumped out all the</font><font color="#E5E5E5"> evidence so it says</font>

1119
00:37:45,070 --> 00:37:50,590
why do I<font color="#E5E5E5"> think that's the case</font><font color="#CCCCCC"> and it</font>

1120
00:37:49,060 --> 00:37:51,970
I've started picking some vulnerability

1121
00:37:50,590 --> 00:37:54,360
checks<font color="#E5E5E5"> so things like unauthenticated</font>

1122
00:37:51,970 --> 00:37:57,640
<font color="#E5E5E5">cubelet we talked</font><font color="#CCCCCC"> about look at</font><font color="#E5E5E5"> that</font>

1123
00:37:54,360 --> 00:37:58,510
<font color="#CCCCCC">internal access API</font><font color="#E5E5E5"> poor access the</font>

1124
00:37:57,640 --> 00:38:00,009
<font color="#CCCCCC">other</font><font color="#E5E5E5"> thing I'll say about this in</font>

1125
00:37:58,510 --> 00:38:04,450
writing<font color="#CCCCCC"> this</font><font color="#E5E5E5"> and dependent liked rating</font>

1126
00:38:00,010 --> 00:38:05,620
<font color="#CCCCCC">Ruby</font><font color="#E5E5E5"> because it's the best language</font><font color="#CCCCCC"> if</font>

1127
00:38:04,450 --> 00:38:07,930
everyone likes rating Ruby a literary

1128
00:38:05,620 --> 00:38:09,430
more<font color="#E5E5E5"> that's why I</font><font color="#CCCCCC"> phoned this</font><font color="#E5E5E5"> complex is</font>

1129
00:38:07,930 --> 00:38:11,290
<font color="#E5E5E5">I memorize makes in</font><font color="#CCCCCC"> 66 different</font>

1130
00:38:09,430 --> 00:38:13,990
deployment options<font color="#E5E5E5"> it turns out each</font>

1131
00:38:11,290 --> 00:38:15,070
<font color="#E5E5E5">deployment option makes it harder to</font>

1132
00:38:13,990 --> 00:38:15,939
check so some<font color="#CCCCCC"> of these things will</font>

1133
00:38:15,070 --> 00:38:17,110
deploy<font color="#CCCCCC"> on with everything this</font>

1134
00:38:15,940 --> 00:38:18,490
<font color="#E5E5E5">containers and you can query</font><font color="#CCCCCC"> the</font>

1135
00:38:17,110 --> 00:38:20,500
container and<font color="#E5E5E5"> get the information you</font>

1136
00:38:18,490 --> 00:38:22,089
need<font color="#E5E5E5"> some of them will deploy mayor node</font>

1137
00:38:20,500 --> 00:38:23,380
<font color="#E5E5E5">some of the cluster options like</font><font color="#CCCCCC"> google</font>

1138
00:38:22,090 --> 00:38:25,180
container<font color="#E5E5E5"> don't let you see</font><font color="#CCCCCC"> some of the</font>

1139
00:38:23,380 --> 00:38:26,980
<font color="#E5E5E5">stuff they manage at a cloud level</font><font color="#CCCCCC"> so</font>

1140
00:38:25,180 --> 00:38:28,180
it's a bit trickier<font color="#CCCCCC"> to</font><font color="#E5E5E5"> write but that</font>

1141
00:38:26,980 --> 00:38:30,400
can work for<font color="#CCCCCC"> certain deployment options</font>

1142
00:38:28,180 --> 00:38:31,480
and it's a nice easy<font color="#E5E5E5"> way of</font><font color="#CCCCCC"> saying give</font>

1143
00:38:30,400 --> 00:38:41,470
<font color="#E5E5E5">me a quick check</font><font color="#CCCCCC"> to see what's going</font>

1144
00:38:31,480 --> 00:38:41,860
wrong<font color="#CCCCCC"> I knew eventually</font><font color="#E5E5E5"> I would end up</font>

1145
00:38:41,470 --> 00:38:44,529
<font color="#CCCCCC">though</font>

1146
00:38:41,860 --> 00:38:47,080
there we go conclusion right so why was

1147
00:38:44,530 --> 00:38:48,730
<font color="#E5E5E5">he in conclusion to all this</font><font color="#CCCCCC"> um the</font>

1148
00:38:47,080 --> 00:38:50,020
security model<font color="#CCCCCC"> of kubernetes</font><font color="#E5E5E5"> is kind of</font>

1149
00:38:48,730 --> 00:38:51,730
<font color="#E5E5E5">like where docker was a year ago</font>

1150
00:38:50,020 --> 00:38:53,620
docker had this<font color="#E5E5E5"> period where it rapidly</font>

1151
00:38:51,730 --> 00:38:55,360
added new security capabilities and got

1152
00:38:53,620 --> 00:38:56,859
a lot<font color="#E5E5E5"> better than</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> was and a lot</font><font color="#CCCCCC"> of</font>

1153
00:38:55,360 --> 00:38:58,540
the very early stuff about Dockers

1154
00:38:56,860 --> 00:39:00,370
horribly insecure<font color="#E5E5E5"> where the way as the</font>

1155
00:38:58,540 --> 00:39:02,710
added ease<font color="#E5E5E5"> kubernetes to me is going</font>

1156
00:39:00,370 --> 00:39:05,049
through<font color="#E5E5E5"> that same process of adding</font>

1157
00:39:02,710 --> 00:39:06,880
capabilities<font color="#CCCCCC"> and adding things that at</font>

1158
00:39:05,050 --> 00:39:11,140
<font color="#E5E5E5">least you can configure it securely</font>

1159
00:39:06,880 --> 00:39:12,230
why<font color="#E5E5E5"> I would say however is that not all</font>

1160
00:39:11,140 --> 00:39:14,420
<font color="#E5E5E5">the different</font><font color="#CCCCCC"> people</font>

1161
00:39:12,230 --> 00:39:15,920
deploying kubernetes decided to deploy

1162
00:39:14,420 --> 00:39:17,660
<font color="#E5E5E5">all those things</font><font color="#CCCCCC"> so a good</font><font color="#E5E5E5"> example</font><font color="#CCCCCC"> of</font>

1163
00:39:15,920 --> 00:39:19,340
this is our<font color="#E5E5E5"> back so our back as I've</font>

1164
00:39:17,660 --> 00:39:20,930
<font color="#E5E5E5">mentioned this kind of complex</font><font color="#CCCCCC"> I know</font>

1165
00:39:19,340 --> 00:39:22,280
that<font color="#CCCCCC"> several of</font><font color="#E5E5E5"> the big</font><font color="#CCCCCC"> communities</font>

1166
00:39:20,930 --> 00:39:23,540
distributions aren't putting<font color="#E5E5E5"> our</font><font color="#CCCCCC"> back</font>

1167
00:39:22,280 --> 00:39:24,980
<font color="#CCCCCC">end yet right</font><font color="#E5E5E5"> now because it's too</font>

1168
00:39:23,540 --> 00:39:26,540
complicated<font color="#CCCCCC"> and</font><font color="#E5E5E5"> they don't want to do it</font>

1169
00:39:24,980 --> 00:39:27,440
there's a<font color="#E5E5E5"> lot work and they've got other</font>

1170
00:39:26,540 --> 00:39:28,430
<font color="#CCCCCC">things</font><font color="#E5E5E5"> to be doing and</font><font color="#CCCCCC"> there's an</font><font color="#E5E5E5"> open</font>

1171
00:39:27,440 --> 00:39:30,140
<font color="#E5E5E5">source project you know they don't</font><font color="#CCCCCC"> we're</font>

1172
00:39:28,430 --> 00:39:31,490
<font color="#CCCCCC">out of</font><font color="#E5E5E5"> time so</font><font color="#CCCCCC"> you have to be careful</font>

1173
00:39:30,140 --> 00:39:33,650
when you choose<font color="#E5E5E5"> how you're going to</font>

1174
00:39:31,490 --> 00:39:34,910
<font color="#E5E5E5">deploy kubernetes who which one you</font>

1175
00:39:33,650 --> 00:39:36,410
choose<font color="#E5E5E5"> because some people don't you</font>

1176
00:39:34,910 --> 00:39:38,660
<font color="#E5E5E5">know think that's a priority for them</font>

1177
00:39:36,410 --> 00:39:39,560
<font color="#E5E5E5">it's getting better</font><font color="#CCCCCC"> over it definitely</font>

1178
00:39:38,660 --> 00:39:40,580
is<font color="#CCCCCC"> getting better</font><font color="#E5E5E5"> or adding more things</font>

1179
00:39:39,560 --> 00:39:42,109
to it

1180
00:39:40,580 --> 00:39:43,369
<font color="#E5E5E5">and always think about your threat model</font>

1181
00:39:42,109 --> 00:39:45,140
attack surface when you're deploying

1182
00:39:43,369 --> 00:39:46,640
<font color="#E5E5E5">this stuff if internal containers are</font>

1183
00:39:45,140 --> 00:39:47,930
<font color="#E5E5E5">concerned for you make sure you've</font>

1184
00:39:46,640 --> 00:39:50,830
thought about that<font color="#E5E5E5"> and you've applied it</font>

1185
00:39:47,930 --> 00:40:13,040
<font color="#E5E5E5">if they're not then fine</font>

1186
00:39:50,830 --> 00:40:15,200
yeah<font color="#E5E5E5"> questions there are</font><font color="#CCCCCC"> are people</font>

1187
00:40:13,040 --> 00:40:16,880
<font color="#E5E5E5">doing add-on products they don't do</font>

1188
00:40:15,200 --> 00:40:19,129
there's a lot<font color="#CCCCCC"> of what I'm fighting the</font>

1189
00:40:16,880 --> 00:40:20,660
<font color="#E5E5E5">more is a very early days but you're</font>

1190
00:40:19,130 --> 00:40:22,700
starting<font color="#CCCCCC"> to see a couple of cluster</font>

1191
00:40:20,660 --> 00:40:24,500
<font color="#CCCCCC">focuses security startups who are</font>

1192
00:40:22,700 --> 00:40:25,879
looking at things<font color="#CCCCCC"> like yeah IDs inside</font>

1193
00:40:24,500 --> 00:40:27,680
<font color="#E5E5E5">the network it's a bit of a problem</font>

1194
00:40:25,880 --> 00:40:29,210
though<font color="#CCCCCC"> because one of the</font><font color="#E5E5E5"> things I</font>

1195
00:40:27,680 --> 00:40:30,049
realized<font color="#CCCCCC"> is that traditional</font><font color="#E5E5E5"> IDs</font>

1196
00:40:29,210 --> 00:40:31,670
<font color="#E5E5E5">probably won't see anything on the</font>

1197
00:40:30,050 --> 00:40:33,109
overlay<font color="#CCCCCC"> network because the overlay</font>

1198
00:40:31,670 --> 00:40:35,210
<font color="#E5E5E5">network can be encrypted and probably</font>

1199
00:40:33,109 --> 00:40:37,549
should be encrypted<font color="#CCCCCC"> so yeah you're</font><font color="#E5E5E5"> blind</font>

1200
00:40:35,210 --> 00:40:39,350
<font color="#CCCCCC">lower-level</font><font color="#E5E5E5"> network censors I haven't</font>

1201
00:40:37,550 --> 00:40:40,280
seen<font color="#E5E5E5"> anyone like there's nothing cool</font>

1202
00:40:39,350 --> 00:40:42,049
that's<font color="#CCCCCC"> like this</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> definitely the way</font>

1203
00:40:40,280 --> 00:40:43,609
to go<font color="#E5E5E5"> the first part has been</font><font color="#CCCCCC"> network</font>

1204
00:40:42,050 --> 00:40:45,530
<font color="#E5E5E5">policy coming along and you can no</font>

1205
00:40:43,609 --> 00:40:47,210
actually apply<font color="#E5E5E5"> it apply ACLs which is a</font>

1206
00:40:45,530 --> 00:40:49,250
huge<font color="#E5E5E5"> step forward in terms</font><font color="#CCCCCC"> of like</font>

1207
00:40:47,210 --> 00:40:55,030
locking<font color="#CCCCCC"> it down a bit</font><font color="#E5E5E5"> but no</font><font color="#CCCCCC"> I'm getting</font>

1208
00:40:49,250 --> 00:40:55,030
like specific in terms<font color="#E5E5E5"> of products yeah</font>

1209
00:40:58,059 --> 00:41:10,309
yeah so if I was picking one on security

1210
00:41:07,940 --> 00:41:12,890
<font color="#E5E5E5">and just security</font><font color="#CCCCCC"> I would probably pick</font>

1211
00:41:10,309 --> 00:41:14,450
open chef<font color="#E5E5E5"> rat how object because a lot</font>

1212
00:41:12,890 --> 00:41:15,979
of<font color="#E5E5E5"> the stuff going</font><font color="#CCCCCC"> into kubernetes</font><font color="#E5E5E5"> from</font>

1213
00:41:14,450 --> 00:41:17,479
a security standpoint has come from Red

1214
00:41:15,979 --> 00:41:18,769
Hat<font color="#CCCCCC"> and they've I said</font><font color="#E5E5E5"> you have their</font>

1215
00:41:17,479 --> 00:41:21,439
own implementation and<font color="#E5E5E5"> they're pushing</font>

1216
00:41:18,769 --> 00:41:23,569
it upstream into kubernetes however

1217
00:41:21,440 --> 00:41:24,950
obviously<font color="#E5E5E5"> that if you want to go past</font>

1218
00:41:23,569 --> 00:41:26,538
<font color="#E5E5E5">the basic options</font>

1219
00:41:24,950 --> 00:41:28,009
that's a<font color="#CCCCCC"> pay-for our</font><font color="#E5E5E5"> platform so they</font>

1220
00:41:26,539 --> 00:41:29,839
have an<font color="#CCCCCC"> open-source version</font><font color="#E5E5E5"> but it's can</font>

1221
00:41:28,009 --> 00:41:30,979
like that's obviously<font color="#E5E5E5"> not interfere</font>

1222
00:41:29,839 --> 00:41:32,959
they've<font color="#CCCCCC"> gotta make money</font><font color="#E5E5E5"> at this so</font>

1223
00:41:30,979 --> 00:41:35,299
<font color="#CCCCCC">their</font><font color="#E5E5E5"> bin thing is the deploy option and</font>

1224
00:41:32,959 --> 00:41:37,190
<font color="#E5E5E5">they're hosted options</font><font color="#CCCCCC"> and it's a paid</font>

1225
00:41:35,299 --> 00:41:38,869
for a product<font color="#E5E5E5"> but definitely they have</font>

1226
00:41:37,190 --> 00:41:39,920
<font color="#E5E5E5">thought these things through and applied</font>

1227
00:41:38,869 --> 00:41:41,660
lots of things like they<font color="#CCCCCC"> had network</font>

1228
00:41:39,920 --> 00:41:44,509
<font color="#E5E5E5">policy before humanities-based</font><font color="#CCCCCC"> ed and</font>

1229
00:41:41,660 --> 00:41:46,129
various other ones<font color="#E5E5E5"> QB ADM which is one</font>

1230
00:41:44,509 --> 00:41:48,829
of<font color="#E5E5E5"> the other like mainline options it's</font>

1231
00:41:46,130 --> 00:41:50,180
quite good<font color="#E5E5E5"> and it's getting better and</font>

1232
00:41:48,829 --> 00:41:51,920
it's applying<font color="#E5E5E5"> more it seems to be</font>

1233
00:41:50,180 --> 00:41:53,598
<font color="#E5E5E5">applying like I feel that like that's</font>

1234
00:41:51,920 --> 00:41:55,759
<font color="#E5E5E5">the base queue ATMs like where</font><font color="#CCCCCC"> things</font>

1235
00:41:53,599 --> 00:41:57,680
<font color="#CCCCCC">should be so they're not bad the other</font>

1236
00:41:55,759 --> 00:42:00,279
one if you're going for<font color="#CCCCCC"> a hosted option</font>

1237
00:41:57,680 --> 00:42:01,489
Google compute engine or cloud<font color="#CCCCCC"> computing</font>

1238
00:42:00,279 --> 00:42:02,930
<font color="#CCCCCC">you</font>

1239
00:42:01,489 --> 00:42:04,190
they<font color="#CCCCCC"> said</font><font color="#E5E5E5"> Google's container one is</font>

1240
00:42:02,930 --> 00:42:06,229
probably<font color="#CCCCCC"> the best just because it's</font>

1241
00:42:04,190 --> 00:42:07,729
Google's Project<font color="#E5E5E5"> honestly and therefore</font>

1242
00:42:06,229 --> 00:42:09,078
they have a lot of<font color="#E5E5E5"> people who are</font>

1243
00:42:07,729 --> 00:42:10,879
helping<font color="#E5E5E5"> to write it so sometimes they</font>

1244
00:42:09,079 --> 00:42:12,170
tend to be<font color="#E5E5E5"> ahead but it's a slightly</font>

1245
00:42:10,880 --> 00:42:13,699
<font color="#CCCCCC">different game we should quite tied into</font>

1246
00:42:12,170 --> 00:42:15,199
<font color="#E5E5E5">their cloud at that point so it depends</font>

1247
00:42:13,699 --> 00:42:30,440
on<font color="#E5E5E5"> whether you</font><font color="#CCCCCC"> you're your heavy GCP</font>

1248
00:42:15,199 --> 00:42:31,549
user or<font color="#E5E5E5"> not I think I don't think they I</font>

1249
00:42:30,440 --> 00:42:32,749
<font color="#CCCCCC">don't</font><font color="#E5E5E5"> think</font><font color="#CCCCCC"> they're prescriptive about</font>

1250
00:42:31,549 --> 00:42:34,459
<font color="#E5E5E5">it</font><font color="#CCCCCC"> I think they kind</font><font color="#E5E5E5"> of let you</font>

1251
00:42:32,749 --> 00:42:36,649
basically you<font color="#E5E5E5"> know you you can you</font><font color="#CCCCCC"> can</font>

1252
00:42:34,459 --> 00:42:37,879
<font color="#E5E5E5">pop you you were trying to fail</font><font color="#CCCCCC"> past and</font>

1253
00:42:36,650 --> 00:42:40,489
so how you gonna do that<font color="#E5E5E5"> it's kind of an</font>

1254
00:42:37,880 --> 00:42:41,449
implementation issue<font color="#CCCCCC"> they're not if so</font>

1255
00:42:40,489 --> 00:42:42,859
say it's kind of funny they've obviously

1256
00:42:41,449 --> 00:42:45,170
decided<font color="#E5E5E5"> where they want their boundaries</font>

1257
00:42:42,859 --> 00:42:47,269
of<font color="#E5E5E5"> responsibility to be and for me</font>

1258
00:42:45,170 --> 00:42:48,529
<font color="#E5E5E5">having a database of users and managing</font>

1259
00:42:47,269 --> 00:42:49,939
<font color="#CCCCCC">that would be part of</font><font color="#E5E5E5"> what they do but</font>

1260
00:42:48,529 --> 00:42:51,079
they've<font color="#E5E5E5"> said no no we're</font><font color="#CCCCCC"> not</font><font color="#E5E5E5"> going to do</font>

1261
00:42:49,940 --> 00:42:52,309
that<font color="#E5E5E5"> we're going to pass it</font><font color="#CCCCCC"> all by the</font>

1262
00:42:51,079 --> 00:42:53,869
certificate authorities or to these

1263
00:42:52,309 --> 00:42:54,979
external third parties<font color="#E5E5E5"> so they've kind</font>

1264
00:42:53,869 --> 00:42:56,719
<font color="#E5E5E5">of said</font><font color="#CCCCCC"> no that's</font><font color="#E5E5E5"> not us</font>

1265
00:42:54,979 --> 00:43:00,279
<font color="#E5E5E5">so yeah I don't think they're actually</font>

1266
00:42:56,719 --> 00:43:00,279
<font color="#E5E5E5">like</font><font color="#CCCCCC"> dictating</font><font color="#E5E5E5"> the path through so</font>

1267
00:43:03,220 --> 00:43:08,330
you know<font color="#CCCCCC"> I</font><font color="#E5E5E5"> swarm I've looked at quite I</font>

1268
00:43:06,740 --> 00:43:09,890
think<font color="#CCCCCC"> I would say</font><font color="#E5E5E5"> about if I was picking</font>

1269
00:43:08,330 --> 00:43:11,990
between kubernetes and<font color="#CCCCCC"> swarm swarm is</font>

1270
00:43:09,890 --> 00:43:13,640
better at the<font color="#CCCCCC"> box</font><font color="#E5E5E5"> in that it's a lot</font>

1271
00:43:11,990 --> 00:43:14,569
less complex<font color="#E5E5E5"> so you know all these</font>

1272
00:43:13,640 --> 00:43:15,859
<font color="#CCCCCC">different services</font><font color="#E5E5E5"> I've been talking</font>

1273
00:43:14,570 --> 00:43:17,150
<font color="#CCCCCC">about it's been attack points then you</font>

1274
00:43:15,860 --> 00:43:19,100
can get<font color="#E5E5E5"> your</font><font color="#CCCCCC"> Stacey T stuck into</font><font color="#E5E5E5"> and</font>

1275
00:43:17,150 --> 00:43:21,530
break swarm doesn't have any<font color="#E5E5E5"> of</font><font color="#CCCCCC"> that</font>

1276
00:43:19,100 --> 00:43:23,210
<font color="#E5E5E5">it's got one</font><font color="#CCCCCC"> poor</font><font color="#E5E5E5"> and it's</font><font color="#CCCCCC"> pathetic is</font>

1277
00:43:21,530 --> 00:43:24,740
<font color="#CCCCCC">by default and you're not</font><font color="#E5E5E5"> getting it in</font>

1278
00:43:23,210 --> 00:43:27,350
<font color="#CCCCCC">a hurry the</font><font color="#E5E5E5"> only thing I'd say about</font>

1279
00:43:24,740 --> 00:43:29,660
swarm which puts me off a little<font color="#E5E5E5"> bit at</font>

1280
00:43:27,350 --> 00:43:31,130
the moment<font color="#E5E5E5"> is</font><font color="#CCCCCC"> they're missing security</font>

1281
00:43:29,660 --> 00:43:33,259
profiles<font color="#CCCCCC"> she</font><font color="#E5E5E5"> was talking about you</font><font color="#CCCCCC"> can</font>

1282
00:43:31,130 --> 00:43:33,890
apply<font color="#CCCCCC"> odd security policies</font><font color="#E5E5E5"> looked and</font>

1283
00:43:33,260 --> 00:43:35,630
what can<font color="#CCCCCC"> be</font><font color="#E5E5E5"> done</font>

1284
00:43:33,890 --> 00:43:36,920
swarm haven't done that<font color="#E5E5E5"> yet if you had</font>

1285
00:43:35,630 --> 00:43:39,860
it in docker run but then when they<font color="#CCCCCC"> went</font>

1286
00:43:36,920 --> 00:43:41,690
to swarm is still in development<font color="#E5E5E5"> so you</font>

1287
00:43:39,860 --> 00:43:43,040
<font color="#E5E5E5">can't in the open</font><font color="#CCCCCC"> source</font><font color="#E5E5E5"> project anyway</font>

1288
00:43:41,690 --> 00:43:44,420
<font color="#E5E5E5">you can't actually say I'm gonna lock</font>

1289
00:43:43,040 --> 00:43:45,800
this container down<font color="#CCCCCC"> by tape removing</font><font color="#E5E5E5"> so</font>

1290
00:43:44,420 --> 00:43:47,810
<font color="#E5E5E5">there's options we submit the shame but</font>

1291
00:43:45,800 --> 00:43:49,400
<font color="#E5E5E5">in terms of simplicity</font><font color="#CCCCCC"> its way simpler</font>

1292
00:43:47,810 --> 00:43:51,110
and less complex and<font color="#CCCCCC"> if you don't</font><font color="#E5E5E5"> need</font>

1293
00:43:49,400 --> 00:43:52,580
the scale of kubernetes<font color="#CCCCCC"> I would say</font>

1294
00:43:51,110 --> 00:43:54,230
swarms are much you know if it works for

1295
00:43:52,580 --> 00:43:55,640
<font color="#E5E5E5">you it's a better option</font><font color="#CCCCCC"> just from</font>

1296
00:43:54,230 --> 00:43:58,030
scripts that point<font color="#CCCCCC"> anymore not the other</font>

1297
00:43:55,640 --> 00:43:58,029
example

1298
00:44:03,880 --> 00:44:09,880
[Applause]

