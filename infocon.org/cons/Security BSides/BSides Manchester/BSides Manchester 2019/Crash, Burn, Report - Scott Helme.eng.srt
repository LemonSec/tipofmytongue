1
00:00:03,970 --> 00:00:10,099
so yeah welcome people here may know me

2
00:00:07,310 --> 00:00:11,870
from the Twitter's so you can find me up

3
00:00:10,099 --> 00:00:14,360
on that I ramble a lot I have my blog

4
00:00:11,870 --> 00:00:15,649
where you can find like extra reading

5
00:00:14,360 --> 00:00:16,490
information and details about all of the

6
00:00:15,650 --> 00:00:19,970
things that I'm going to talk about

7
00:00:16,490 --> 00:00:22,369
today but I want to talk about something

8
00:00:19,970 --> 00:00:24,348
that I've been working on quite a lot

9
00:00:22,369 --> 00:00:26,330
over the last two or three years and I

10
00:00:24,349 --> 00:00:27,529
honestly and you can tell me whether you

11
00:00:26,330 --> 00:00:30,439
agree at the end thing that this could

12
00:00:27,529 --> 00:00:32,570
be one of if not the largest kind of

13
00:00:30,439 --> 00:00:34,070
monitoring and telemetry platforms in

14
00:00:32,570 --> 00:00:35,600
the world and what we're gonna be

15
00:00:34,070 --> 00:00:38,150
looking through throughout this talk is

16
00:00:35,600 --> 00:00:39,710
how we can actually leverage the browser

17
00:00:38,150 --> 00:00:41,720
select the browser on every devices

18
00:00:39,710 --> 00:00:44,360
every visitor coming to our website to

19
00:00:41,720 --> 00:00:46,519
look at information about our sign

20
00:00:44,360 --> 00:00:47,360
errors security problems so some of

21
00:00:46,520 --> 00:00:48,710
these areas we're going to look at

22
00:00:47,360 --> 00:00:50,120
security related some of them are not

23
00:00:48,710 --> 00:00:51,530
and how we can actually gather all of

24
00:00:50,120 --> 00:00:53,750
this feedback and all of this telemetry

25
00:00:51,530 --> 00:00:55,340
with no code to deploy no agent to

26
00:00:53,750 --> 00:00:57,800
deploy on the endpoint everything that

27
00:00:55,340 --> 00:00:59,990
I'm going to talk about is native

28
00:00:57,800 --> 00:01:01,669
browser functionality so everything that

29
00:00:59,990 --> 00:01:03,890
I'm going to touch on today is all built

30
00:01:01,670 --> 00:01:05,300
into every you know mainstream browser

31
00:01:03,890 --> 00:01:08,660
that's been updated in like the last

32
00:01:05,300 --> 00:01:09,890
year or two at least so bad I might but

33
00:01:08,660 --> 00:01:11,270
as soon as I started talking about like

34
00:01:09,890 --> 00:01:12,890
these cool new browser features we

35
00:01:11,270 --> 00:01:14,420
always have to have kind of the browser

36
00:01:12,890 --> 00:01:15,980
support discussion because it was like

37
00:01:14,420 --> 00:01:17,330
look great so you know maybe these

38
00:01:15,980 --> 00:01:20,750
things only I'm like one browser or this

39
00:01:17,330 --> 00:01:21,980
other browser and I mean the good news

40
00:01:20,750 --> 00:01:23,360
first of all to stop is it's actually

41
00:01:21,980 --> 00:01:24,470
pretty good like the support but

42
00:01:23,360 --> 00:01:26,420
everything that I'm about to talk about

43
00:01:24,470 --> 00:01:27,770
is really awesome it's quite widespread

44
00:01:26,420 --> 00:01:29,150
like I said yes you have to have

45
00:01:27,770 --> 00:01:31,899
depended on the clients who have done an

46
00:01:29,150 --> 00:01:33,740
update in like the last 12 to 24 months

47
00:01:31,900 --> 00:01:34,730
arguably if they've not done an update

48
00:01:33,740 --> 00:01:37,339
and that long they've got other issues

49
00:01:34,730 --> 00:01:39,080
anyway but the the point is are these

50
00:01:37,340 --> 00:01:39,980
widespread support and the kind of the

51
00:01:39,080 --> 00:01:41,539
more important thing is it doesn't

52
00:01:39,980 --> 00:01:43,159
really matter so if the client doesn't

53
00:01:41,540 --> 00:01:45,170
support one of the things that we're

54
00:01:43,159 --> 00:01:46,520
about to talk about it just means you

55
00:01:45,170 --> 00:01:48,409
don't get feedback from that client

56
00:01:46,520 --> 00:01:49,640
about an error it's like right okay but

57
00:01:48,409 --> 00:01:51,200
they've had a very we just don't know

58
00:01:49,640 --> 00:01:53,000
about it which is exactly where we are

59
00:01:51,200 --> 00:01:55,280
now if the client does support all of

60
00:01:53,000 --> 00:01:56,810
these monitoring and telemetry services

61
00:01:55,280 --> 00:01:58,490
then we will get the feedback so

62
00:01:56,810 --> 00:02:01,880
actually we don't really need to worry

63
00:01:58,490 --> 00:02:03,110
too much about the problem of support as

64
00:02:01,880 --> 00:02:05,449
widespread as it is it's going to

65
00:02:03,110 --> 00:02:07,340
continue to get better and you'll see

66
00:02:05,450 --> 00:02:09,170
why that's relevant as we go through so

67
00:02:07,340 --> 00:02:12,170
I'm sure many people here like me have a

68
00:02:09,169 --> 00:02:13,910
website so I have a website I write

69
00:02:12,170 --> 00:02:14,839
blogs you might have a corporate website

70
00:02:13,910 --> 00:02:16,220
you might

71
00:02:14,840 --> 00:02:17,180
have like a really important website

72
00:02:16,220 --> 00:02:20,060
let's say you're an e-commerce platform

73
00:02:17,180 --> 00:02:22,580
yeah your website is literally the thing

74
00:02:20,060 --> 00:02:25,340
that you sell and generate your revenue

75
00:02:22,580 --> 00:02:26,720
through I want my website to be online I

76
00:02:25,340 --> 00:02:28,340
want it to be available I want to be

77
00:02:26,720 --> 00:02:29,959
secure as much as it's just a blog and I

78
00:02:28,340 --> 00:02:32,090
rise to fajn that I still don't want bad

79
00:02:29,959 --> 00:02:33,650
things to happen on it and I want to

80
00:02:32,090 --> 00:02:36,560
know if things go wrong I want to know

81
00:02:33,650 --> 00:02:38,900
if my website is not working as expected

82
00:02:36,560 --> 00:02:40,849
not performing as expected I really want

83
00:02:38,900 --> 00:02:42,319
to know if there's actually some kind of

84
00:02:40,849 --> 00:02:44,500
security issue that I need to be

85
00:02:42,319 --> 00:02:47,149
concerned about so bearing that in mind

86
00:02:44,500 --> 00:02:48,830
we have like a fairly typical browsing

87
00:02:47,150 --> 00:02:50,480
scenario right like we have people come

88
00:02:48,830 --> 00:02:52,459
to our website they send us a request on

89
00:02:50,480 --> 00:02:54,079
the server side you know we generate the

90
00:02:52,459 --> 00:02:57,830
page the response whatever it might be

91
00:02:54,080 --> 00:03:00,080
and on our server side we have probably

92
00:02:57,830 --> 00:03:01,310
I mean people maybe even familiar with

93
00:03:00,080 --> 00:03:02,660
some of the things open I actually you

94
00:03:01,310 --> 00:03:05,480
see is what do we have we used to have

95
00:03:02,660 --> 00:03:07,340
New Relic currently I use paper trail we

96
00:03:05,480 --> 00:03:08,929
have lots of things to monitor for stuff

97
00:03:07,340 --> 00:03:11,060
going around already so this is a an

98
00:03:08,930 --> 00:03:12,590
area where we can already agree there's

99
00:03:11,060 --> 00:03:13,670
a lot of interest right like this you

100
00:03:12,590 --> 00:03:15,590
know quick show of hands like who

101
00:03:13,670 --> 00:03:17,750
recognizes or uses an alternative to one

102
00:03:15,590 --> 00:03:20,870
of these things up here but it's like

103
00:03:17,750 --> 00:03:22,220
half the room ballpark so you know we're

104
00:03:20,870 --> 00:03:24,320
already familiar with this concept that

105
00:03:22,220 --> 00:03:26,299
we want to track performance we want to

106
00:03:24,320 --> 00:03:27,410
track areas we want to log exceptions we

107
00:03:26,299 --> 00:03:28,850
want to see when things go wrong and

108
00:03:27,410 --> 00:03:29,930
likewise when we built the responsive

109
00:03:28,850 --> 00:03:31,310
actually send it back there's a whole

110
00:03:29,930 --> 00:03:33,470
heap of stuff we can do on the client

111
00:03:31,310 --> 00:03:35,810
side already now yes we have to deploy

112
00:03:33,470 --> 00:03:37,670
some kind of thing some kind of agent

113
00:03:35,810 --> 00:03:39,319
some kind of library but again like I've

114
00:03:37,670 --> 00:03:41,780
had some interactions with tracker

115
00:03:39,319 --> 00:03:44,328
century there's lots of client side

116
00:03:41,780 --> 00:03:46,639
issues that can go wrong as well and we

117
00:03:44,329 --> 00:03:49,190
have tools and services to monitor and

118
00:03:46,639 --> 00:03:51,290
keep an eye on these so the whole idea

119
00:03:49,190 --> 00:03:53,630
here is you know we can acknowledge that

120
00:03:51,290 --> 00:03:55,220
as application owners as site owners we

121
00:03:53,630 --> 00:03:56,750
want to know when stuff goes wrong like

122
00:03:55,220 --> 00:03:58,010
I want to know that something has gone

123
00:03:56,750 --> 00:03:59,480
wrong because I'm going to go fix it

124
00:03:58,010 --> 00:04:01,429
that's the whole point that's why we

125
00:03:59,480 --> 00:04:04,310
have all of this monitoring and

126
00:04:01,430 --> 00:04:07,370
telemetry now there's kind of a

127
00:04:04,310 --> 00:04:09,170
prerequisite that is required for any of

128
00:04:07,370 --> 00:04:11,000
these things to work and it's that the

129
00:04:09,170 --> 00:04:12,319
person actually visits your site and

130
00:04:11,000 --> 00:04:13,700
that sounds kind of silly like well if

131
00:04:12,319 --> 00:04:14,839
they don't come to my site but what if

132
00:04:13,700 --> 00:04:17,329
they tries to go to your site and they

133
00:04:14,840 --> 00:04:18,649
can't get to your site so there's

134
00:04:17,329 --> 00:04:20,180
actually a whole heap of scenarios where

135
00:04:18,649 --> 00:04:22,190
someone can try and come to your website

136
00:04:20,180 --> 00:04:23,510
and they actually don't make it they're

137
00:04:22,190 --> 00:04:24,979
like what if your DMS is in resolving

138
00:04:23,510 --> 00:04:26,870
but if they've come to a subdomain I

139
00:04:24,979 --> 00:04:28,130
mean obviously it does not exist Oscar

140
00:04:26,870 --> 00:04:29,450
how am i Cody okay those are

141
00:04:28,130 --> 00:04:31,460
actually exist you can try and go there

142
00:04:29,450 --> 00:04:32,840
now and it will just obviously throw in

143
00:04:31,460 --> 00:04:34,130
that next domain and say well like this

144
00:04:32,840 --> 00:04:36,049
subdomain doesn't exist maybe I gave

145
00:04:34,130 --> 00:04:38,030
someone a bad link or they missed IT

146
00:04:36,050 --> 00:04:39,920
like I don't know what went wrong but

147
00:04:38,030 --> 00:04:41,419
something went wrong this is not a good

148
00:04:39,920 --> 00:04:44,330
user experience when someone comes to my

149
00:04:41,420 --> 00:04:46,430
site I'm like okay now if we think about

150
00:04:44,330 --> 00:04:47,750
this particular error and other errors

151
00:04:46,430 --> 00:04:49,160
like it we like these full-page

152
00:04:47,750 --> 00:04:50,600
interstitials we call them where you get

153
00:04:49,160 --> 00:04:52,100
like the big full screen error and

154
00:04:50,600 --> 00:04:53,600
literally the site doesn't work there's

155
00:04:52,100 --> 00:04:56,750
a whole heap of reasons this can happen

156
00:04:53,600 --> 00:04:59,510
but they share like a common thread and

157
00:04:56,750 --> 00:05:00,560
it's going back to this diagram here so

158
00:04:59,510 --> 00:05:02,810
if we think about the error message that

159
00:05:00,560 --> 00:05:04,250
we just saw in the context of this

160
00:05:02,810 --> 00:05:06,620
particular diagram and all of our

161
00:05:04,250 --> 00:05:08,560
current like monitoring and services

162
00:05:06,620 --> 00:05:11,600
that help us keep our website online

163
00:05:08,560 --> 00:05:13,760
well if the DNS didn't resolve did a

164
00:05:11,600 --> 00:05:15,020
request gets then it's like well no of

165
00:05:13,760 --> 00:05:16,849
course not like if we can't resolve the

166
00:05:15,020 --> 00:05:19,280
DNS then we can't send an HTTP request

167
00:05:16,850 --> 00:05:21,110
so we can just scrub this pile and if we

168
00:05:19,280 --> 00:05:23,210
don't send the HTTP request can any of

169
00:05:21,110 --> 00:05:24,620
our service ID logging tools and

170
00:05:23,210 --> 00:05:25,880
utilities like anything's like well no

171
00:05:24,620 --> 00:05:26,990
because there was no requests and so

172
00:05:25,880 --> 00:05:28,700
there's nothing up for the application

173
00:05:26,990 --> 00:05:30,740
to see and if there's no request there's

174
00:05:28,700 --> 00:05:31,940
certainly no response if there's no

175
00:05:30,740 --> 00:05:33,830
response none other stuff on the client

176
00:05:31,940 --> 00:05:35,180
side could help us so this is the

177
00:05:33,830 --> 00:05:36,680
situation where you end up it's like

178
00:05:35,180 --> 00:05:38,720
right you've got a user side the browser

179
00:05:36,680 --> 00:05:40,550
and they're looking at some big error

180
00:05:38,720 --> 00:05:43,870
message that's like a full screen thing

181
00:05:40,550 --> 00:05:46,250
most like awesome how would you actually

182
00:05:43,870 --> 00:05:48,740
log this how would you actually monitor

183
00:05:46,250 --> 00:05:50,060
this and this is what we're going to

184
00:05:48,740 --> 00:05:51,890
talk about this is how we're going to do

185
00:05:50,060 --> 00:05:53,390
it because we're going to be looking at

186
00:05:51,890 --> 00:05:54,650
something called the reporting API which

187
00:05:53,390 --> 00:05:56,210
is only been around for about a year

188
00:05:54,650 --> 00:05:59,150
right now but it's already seeing

189
00:05:56,210 --> 00:06:01,130
widespread support out in the wider web

190
00:05:59,150 --> 00:06:02,450
and it will let those monitor and track

191
00:06:01,130 --> 00:06:03,650
all of the things that we've just talked

192
00:06:02,450 --> 00:06:05,630
about plus a whole heap of other

193
00:06:03,650 --> 00:06:07,909
security focused stuff as well which is

194
00:06:05,630 --> 00:06:09,980
the bits that I'm most interested in so

195
00:06:07,910 --> 00:06:11,240
the reporting API allows you to do this

196
00:06:09,980 --> 00:06:13,190
so I want you to take that kind of

197
00:06:11,240 --> 00:06:14,690
standard communication channel between

198
00:06:13,190 --> 00:06:16,700
the browser and your application when

199
00:06:14,690 --> 00:06:18,140
that channel breaks down and all of our

200
00:06:16,700 --> 00:06:20,690
kind of like standard services that we

201
00:06:18,140 --> 00:06:22,010
have are just not capable of logging

202
00:06:20,690 --> 00:06:24,430
anything because there's nothing to log

203
00:06:22,010 --> 00:06:27,980
it introduces this kind of external

204
00:06:24,430 --> 00:06:29,270
out-of-band reporting channel so you can

205
00:06:27,980 --> 00:06:30,680
literally say to the browsers that look

206
00:06:29,270 --> 00:06:33,260
like if you try and come to my website

207
00:06:30,680 --> 00:06:36,440
and something is wrong like DNS is burst

208
00:06:33,260 --> 00:06:38,840
by HTTPS certificate expired like

209
00:06:36,440 --> 00:06:40,400
whatever the issue might be there's a

210
00:06:38,840 --> 00:06:41,960
whole heap of scenarios when the browser

211
00:06:40,400 --> 00:06:43,099
can't get to your site

212
00:06:41,960 --> 00:06:45,138
and of course if you can't get to your

213
00:06:43,100 --> 00:06:47,060
site it can't send you the Thomas you

214
00:06:45,139 --> 00:06:49,520
need an out-of-band Channel and this is

215
00:06:47,060 --> 00:06:51,530
what the reporting API allows you to

216
00:06:49,520 --> 00:06:53,270
introduce now of course to do this you

217
00:06:51,530 --> 00:06:55,068
have to actually ask the browser to do

218
00:06:53,270 --> 00:06:57,530
it and it's just the case of asking like

219
00:06:55,069 --> 00:06:59,300
I said before there's no code or agent

220
00:06:57,530 --> 00:07:00,198
to deploy you know visitors to your

221
00:06:59,300 --> 00:07:02,000
website don't need to have an

222
00:07:00,199 --> 00:07:03,410
application installed or an extension or

223
00:07:02,000 --> 00:07:07,639
anything like that this is native

224
00:07:03,410 --> 00:07:09,169
browser functionality so what you do is

225
00:07:07,639 --> 00:07:11,240
you ask the browser and you say hey look

226
00:07:09,169 --> 00:07:12,948
if you go to my website and there's some

227
00:07:11,240 --> 00:07:14,630
kind of problem that's stopping you

228
00:07:12,949 --> 00:07:16,310
getting to my website I would like you

229
00:07:14,630 --> 00:07:20,360
to send me the information and you ask

230
00:07:16,310 --> 00:07:21,590
by setting a HTTP response header so

231
00:07:20,360 --> 00:07:23,060
we've got some standard headers up here

232
00:07:21,590 --> 00:07:24,380
you might be familiar with some of these

233
00:07:23,060 --> 00:07:26,060
ago like the date header the server

234
00:07:24,380 --> 00:07:27,320
header the content encoding cache

235
00:07:26,060 --> 00:07:29,150
control like all of the standard stuff

236
00:07:27,320 --> 00:07:32,509
that you're probably super familiar with

237
00:07:29,150 --> 00:07:35,570
you just add a new HTTP response header

238
00:07:32,509 --> 00:07:37,639
seen here as the report - header now

239
00:07:35,570 --> 00:07:40,190
this is how we instruct the browser that

240
00:07:37,639 --> 00:07:41,599
we want to send these reports back

241
00:07:40,190 --> 00:07:42,860
towards this information these error

242
00:07:41,599 --> 00:07:44,659
logs these crash logs whatever you only

243
00:07:42,860 --> 00:07:47,330
refer to them as as you can see the

244
00:07:44,659 --> 00:07:48,590
header takes some JSON content so just

245
00:07:47,330 --> 00:07:50,389
gonna blow that up to take a bit of a

246
00:07:48,590 --> 00:07:53,270
closer look at it this is the value of

247
00:07:50,389 --> 00:07:55,159
the actual header itself so a really

248
00:07:53,270 --> 00:07:57,380
simple piece of JSON to say right look I

249
00:07:55,159 --> 00:07:58,909
want to subscribe for this information I

250
00:07:57,380 --> 00:08:01,159
want you to send it to me you have a

251
00:07:58,909 --> 00:08:02,539
group of reporting endpoints these are

252
00:08:01,159 --> 00:08:04,639
the locations that it's going to send

253
00:08:02,539 --> 00:08:06,380
the data to the group needs a name I've

254
00:08:04,639 --> 00:08:08,990
just called it default here you can call

255
00:08:06,380 --> 00:08:11,479
it whatever you wish the next value is

256
00:08:08,990 --> 00:08:13,909
kind of the really important one because

257
00:08:11,479 --> 00:08:16,099
if you think about it the client needs

258
00:08:13,909 --> 00:08:17,780
to remember this preference because it

259
00:08:16,099 --> 00:08:19,669
could be the next connection that fails

260
00:08:17,780 --> 00:08:21,650
so there has to be some kind of memory

261
00:08:19,669 --> 00:08:23,539
effects in the client itself in the

262
00:08:21,650 --> 00:08:25,549
browser because if I go to my website

263
00:08:23,539 --> 00:08:27,199
today and it works when I go back to my

264
00:08:25,550 --> 00:08:28,639
website tomorrow and it breaks the

265
00:08:27,199 --> 00:08:29,960
browser needs to remember that it's

266
00:08:28,639 --> 00:08:31,490
supposed to do something and this is

267
00:08:29,960 --> 00:08:32,838
what the max age setting is it's the

268
00:08:31,490 --> 00:08:34,969
number of seconds that the browser must

269
00:08:32,839 --> 00:08:36,620
cache and apply this policy fault

270
00:08:34,969 --> 00:08:37,729
locally so it's like right I've seen

271
00:08:36,620 --> 00:08:39,828
this header Scott turned on these

272
00:08:37,729 --> 00:08:41,300
settings and I'm gonna remember and send

273
00:08:39,828 --> 00:08:44,000
these reports for the next one year

274
00:08:41,299 --> 00:08:45,589
ballparking seconds that is so I know

275
00:08:44,000 --> 00:08:47,180
that for the next year this browser ever

276
00:08:45,589 --> 00:08:49,820
comes back to my site and as a problem

277
00:08:47,180 --> 00:08:51,979
it will tell me about it fairly

278
00:08:49,820 --> 00:08:54,020
self-explanatory endpoints just an array

279
00:08:51,980 --> 00:08:55,200
of URLs where do you actually want to

280
00:08:54,020 --> 00:08:57,720
send the report

281
00:08:55,200 --> 00:08:59,970
so these are just really simple HTTP

282
00:08:57,720 --> 00:09:01,050
POST requests with a JSON payload we're

283
00:08:59,970 --> 00:09:02,520
going to take a look at one of them in a

284
00:09:01,050 --> 00:09:04,260
minute so it doesn't need to be anything

285
00:09:02,520 --> 00:09:06,270
particularly fancy on the receiving end

286
00:09:04,260 --> 00:09:09,090
just something that can ingest and

287
00:09:06,270 --> 00:09:11,040
process JSON include subdomains again

288
00:09:09,090 --> 00:09:12,690
does what it says on the tin I apply

289
00:09:11,040 --> 00:09:14,849
this policy on like Scott hub blocker to

290
00:09:12,690 --> 00:09:16,740
UK do we want to also have all the

291
00:09:14,850 --> 00:09:19,200
airports for all of my subdomains yes I

292
00:09:16,740 --> 00:09:21,030
do set it to true if you just want it on

293
00:09:19,200 --> 00:09:24,090
the domain that set the policy you would

294
00:09:21,030 --> 00:09:26,040
set this to false so this is this is the

295
00:09:24,090 --> 00:09:28,410
basic of setting up the reporting API

296
00:09:26,040 --> 00:09:30,300
this is giving the browser the piece of

297
00:09:28,410 --> 00:09:31,740
information on where to send all of

298
00:09:30,300 --> 00:09:34,050
these error reports when these things

299
00:09:31,740 --> 00:09:35,460
happen the next thing that you need to

300
00:09:34,050 --> 00:09:36,780
do is then tell it like what kind of

301
00:09:35,460 --> 00:09:39,180
things do you want to know about because

302
00:09:36,780 --> 00:09:40,829
this is just where to send the stuff now

303
00:09:39,180 --> 00:09:42,989
you need to say like what stuff do you

304
00:09:40,830 --> 00:09:43,890
one that the most powerful one and the

305
00:09:42,990 --> 00:09:45,990
one that I've been spending a lot of

306
00:09:43,890 --> 00:09:48,810
time working on recently is something

307
00:09:45,990 --> 00:09:51,770
called network error logging now as we

308
00:09:48,810 --> 00:09:54,780
just kind of abbreviate this - is

309
00:09:51,770 --> 00:09:56,370
Nellie's is super powerful and super

310
00:09:54,780 --> 00:09:58,020
underutilized as well actually looking

311
00:09:56,370 --> 00:09:59,760
all of my data of all of the sites out

312
00:09:58,020 --> 00:10:03,300
on the web there's really not many

313
00:09:59,760 --> 00:10:04,530
people leveraging this the the Nell

314
00:10:03,300 --> 00:10:07,109
reports are broken down into several

315
00:10:04,530 --> 00:10:09,060
different several different phases as we

316
00:10:07,110 --> 00:10:11,370
call them like which part of the

317
00:10:09,060 --> 00:10:12,750
connection to my site failed so we have

318
00:10:11,370 --> 00:10:14,460
obviously like first of all DNS

319
00:10:12,750 --> 00:10:16,320
basically it basically puts you in like

320
00:10:14,460 --> 00:10:17,700
Scott Hancock coding ok the first thing

321
00:10:16,320 --> 00:10:20,100
you've got to do is a DNS lookup

322
00:10:17,700 --> 00:10:22,050
and it's like right ok did it work has

323
00:10:20,100 --> 00:10:24,150
the dress change did we get an NX domain

324
00:10:22,050 --> 00:10:27,150
like we just saw a couple of slides ago

325
00:10:24,150 --> 00:10:29,160
maybe you know you've got a failed DNS

326
00:10:27,150 --> 00:10:31,020
lookup because your DNS providers bad or

327
00:10:29,160 --> 00:10:32,459
you know whoever they use is DNS

328
00:10:31,020 --> 00:10:34,890
providers but if something goes wrong at

329
00:10:32,460 --> 00:10:37,560
the DNS stage of making a connection to

330
00:10:34,890 --> 00:10:39,270
the site then you can get error reports

331
00:10:37,560 --> 00:10:40,680
about this this is also by the way not

332
00:10:39,270 --> 00:10:41,939
an exhaustive list I've just cherry

333
00:10:40,680 --> 00:10:43,949
picked like what I think of some of the

334
00:10:41,940 --> 00:10:45,480
cool ones but ok let's say we make it

335
00:10:43,950 --> 00:10:47,700
through DNS what's the next step of the

336
00:10:45,480 --> 00:10:49,170
connection got to go through TCP turns

337
00:10:47,700 --> 00:10:52,170
out whole heap of stuff can fail there

338
00:10:49,170 --> 00:10:53,939
as well right the TCP connection might

339
00:10:52,170 --> 00:10:56,310
I'm out the server might close or reset

340
00:10:53,940 --> 00:10:57,930
it refused it could be an invalid IP

341
00:10:56,310 --> 00:11:00,569
that you're resolving so there can't be

342
00:10:57,930 --> 00:11:02,760
a TCP connection again like if any of

343
00:11:00,570 --> 00:11:04,350
these things happen the client isn't

344
00:11:02,760 --> 00:11:06,720
going to make that connection to your

345
00:11:04,350 --> 00:11:09,030
site and I would like to know about all

346
00:11:06,720 --> 00:11:10,410
of these but then

347
00:11:09,030 --> 00:11:11,670
just like for anyone that bowls me on

348
00:11:10,410 --> 00:11:14,730
twitter you'll know that I'm super big

349
00:11:11,670 --> 00:11:16,229
on TLS and crypto we have a whole heap

350
00:11:14,730 --> 00:11:17,940
of stuff that can go wrong in the TLS

351
00:11:16,230 --> 00:11:19,290
space as well now a really interesting

352
00:11:17,940 --> 00:11:21,270
thing for me about this one is that a

353
00:11:19,290 --> 00:11:24,390
lot of people are migrating their sites

354
00:11:21,270 --> 00:11:25,860
from HTTP to HTTPS at the minute and it

355
00:11:24,390 --> 00:11:28,650
means it's kind of like their first

356
00:11:25,860 --> 00:11:31,110
foray into using certificates and TLS

357
00:11:28,650 --> 00:11:32,970
conflicts and there's a whole ton beyond

358
00:11:31,110 --> 00:11:34,890
this list here of stuff that you can get

359
00:11:32,970 --> 00:11:36,810
wrong and my favorite one kind of like

360
00:11:34,890 --> 00:11:38,730
down here somewhere where is it date

361
00:11:36,810 --> 00:11:40,109
invalid my certificate expired is like

362
00:11:38,730 --> 00:11:41,460
hey I bought this thing like two years

363
00:11:40,110 --> 00:11:43,350
ago and the person that boss said

364
00:11:41,460 --> 00:11:46,530
installed it has left the company and it

365
00:11:43,350 --> 00:11:48,450
expired and it happens all the time but

366
00:11:46,530 --> 00:11:50,579
again if a client goes to your site and

367
00:11:48,450 --> 00:11:52,170
like your cert has expired they'll just

368
00:11:50,580 --> 00:11:53,340
get a big red everyone's seen one of

369
00:11:52,170 --> 00:11:54,540
these right like you get the big red

370
00:11:53,340 --> 00:11:56,490
error message on the screen and it's

371
00:11:54,540 --> 00:11:59,000
like great they just sit there and you

372
00:11:56,490 --> 00:12:01,380
don't know about it until sometime later

373
00:11:59,000 --> 00:12:03,510
so I would look the browser to tell me

374
00:12:01,380 --> 00:12:05,280
hey if you come to my site and I've got

375
00:12:03,510 --> 00:12:08,010
like an expired certificate invalid sir

376
00:12:05,280 --> 00:12:09,540
or I've screwed something up tell me and

377
00:12:08,010 --> 00:12:11,970
these are all of the types of things

378
00:12:09,540 --> 00:12:14,670
that you can subscribe to but the same

379
00:12:11,970 --> 00:12:15,750
they make you know DNS TCP TLS all work

380
00:12:14,670 --> 00:12:17,280
we get up to the application layer

381
00:12:15,750 --> 00:12:19,410
there's still stuff that can go wrong

382
00:12:17,280 --> 00:12:20,970
there as well arguably you might have

383
00:12:19,410 --> 00:12:22,230
some indication on the server side by

384
00:12:20,970 --> 00:12:24,120
the time we get up to the application

385
00:12:22,230 --> 00:12:26,190
layer but again you know maybe you're

386
00:12:24,120 --> 00:12:27,720
sending but HTTP responses there's one

387
00:12:26,190 --> 00:12:30,840
down here that I see a lot don't know

388
00:12:27,720 --> 00:12:32,490
why HTTP redirect loop like for some

389
00:12:30,840 --> 00:12:34,320
reason if I every now and again when I

390
00:12:32,490 --> 00:12:35,970
log into Google I just sit there for

391
00:12:34,320 --> 00:12:37,650
like a few seconds and it's like I give

392
00:12:35,970 --> 00:12:39,870
up there's too many redirects and I just

393
00:12:37,650 --> 00:12:41,459
need to clear my cookies done so again

394
00:12:39,870 --> 00:12:44,250
there's loads of stuff that can go wrong

395
00:12:41,460 --> 00:12:46,560
at the application layer including down

396
00:12:44,250 --> 00:12:48,330
at the bottom abandoned something takes

397
00:12:46,560 --> 00:12:50,400
too long or the client just simply gives

398
00:12:48,330 --> 00:12:51,750
up and shows the user in error they'll

399
00:12:50,400 --> 00:12:53,010
send you in abandon message and say well

400
00:12:51,750 --> 00:12:54,900
I tried to come to your website but I

401
00:12:53,010 --> 00:12:58,590
gave up and there will be details inside

402
00:12:54,900 --> 00:13:00,180
of why the client gave up so all of

403
00:12:58,590 --> 00:13:02,220
these plus all of those I just don't

404
00:13:00,180 --> 00:13:04,319
have time to cover some of the things

405
00:13:02,220 --> 00:13:05,730
that you can get feedback on but I want

406
00:13:04,320 --> 00:13:07,380
to take a look specifically at the TLS

407
00:13:05,730 --> 00:13:09,720
stuff because this is just becoming a

408
00:13:07,380 --> 00:13:10,890
really big problem at the minute if you

409
00:13:09,720 --> 00:13:12,150
know I said before if you follow me on

410
00:13:10,890 --> 00:13:14,040
Twitter you'll know that I talked about

411
00:13:12,150 --> 00:13:16,199
the certificate you go system in TLS a

412
00:13:14,040 --> 00:13:18,180
lot and you know every now and again we

413
00:13:16,200 --> 00:13:20,100
kind of semi seriously kind of like poke

414
00:13:18,180 --> 00:13:21,569
fun and organizations it's like hey look

415
00:13:20,100 --> 00:13:24,060
like their certificates expired and

416
00:13:21,570 --> 00:13:25,530
their whole website is done because if

417
00:13:24,060 --> 00:13:27,420
your certificate expires that you're

418
00:13:25,530 --> 00:13:29,970
literally off working it's like no one

419
00:13:27,420 --> 00:13:31,969
can go to your website anymore and this

420
00:13:29,970 --> 00:13:34,440
I don't know why but this is becoming

421
00:13:31,970 --> 00:13:35,610
more of a problem over time than less of

422
00:13:34,440 --> 00:13:38,220
a problem over time it's kind of like

423
00:13:35,610 --> 00:13:40,200
the wrong way around so the question

424
00:13:38,220 --> 00:13:43,410
then is you know do you want to know

425
00:13:40,200 --> 00:13:45,720
about this stuff do you want to know if

426
00:13:43,410 --> 00:13:47,069
your DNS isn't working TCP connections

427
00:13:45,720 --> 00:13:48,000
are all being dropped your certs expired

428
00:13:47,070 --> 00:13:49,440
or you've installed the wrong

429
00:13:48,000 --> 00:13:50,850
certificate you know sometimes we see

430
00:13:49,440 --> 00:13:53,100
websites getting them mixed up

431
00:13:50,850 --> 00:13:54,870
you just have to ask the browser so the

432
00:13:53,100 --> 00:13:56,820
browser now knows where to send the

433
00:13:54,870 --> 00:13:59,100
reports because we specified that in the

434
00:13:56,820 --> 00:14:00,570
report too had a few slides ago now you

435
00:13:59,100 --> 00:14:02,160
need to say okay I would like these

436
00:14:00,570 --> 00:14:04,920
Network era logs but is because these

437
00:14:02,160 --> 00:14:06,959
are fantastic so you issue another HTTP

438
00:14:04,920 --> 00:14:08,790
response header to say yeah I would like

439
00:14:06,960 --> 00:14:11,430
now we're Kara logging to be enabled I

440
00:14:08,790 --> 00:14:14,099
would like you to send the reports to

441
00:14:11,430 --> 00:14:15,449
the group name default so report to the

442
00:14:14,100 --> 00:14:18,390
default group because that's the name

443
00:14:15,450 --> 00:14:20,070
that I gave it and again how long would

444
00:14:18,390 --> 00:14:21,420
you like the browser to remember this

445
00:14:20,070 --> 00:14:23,160
because the browser has to remember it

446
00:14:21,420 --> 00:14:25,349
because if I go to your web site today I

447
00:14:23,160 --> 00:14:26,520
will see the policy I go to your web

448
00:14:25,350 --> 00:14:28,620
site tomorrow and you've made some

449
00:14:26,520 --> 00:14:30,390
mistake that's when it needs to know

450
00:14:28,620 --> 00:14:32,220
this information so there has to be like

451
00:14:30,390 --> 00:14:34,170
caching a memory effect for the client

452
00:14:32,220 --> 00:14:36,630
to be able to apply and do this on an

453
00:14:34,170 --> 00:14:38,699
ongoing basis and that's it so that

454
00:14:36,630 --> 00:14:40,500
first header report - that's where they

455
00:14:38,700 --> 00:14:42,480
go the nail head is so far we've

456
00:14:40,500 --> 00:14:44,310
subscribed to network our logs from the

457
00:14:42,480 --> 00:14:45,900
browser and then it will just simply

458
00:14:44,310 --> 00:14:48,449
send you them and they just look like

459
00:14:45,900 --> 00:14:52,020
this as I said it's a pretty simple JSON

460
00:14:48,450 --> 00:14:54,210
payload sent as a HTTP POST request and

461
00:14:52,020 --> 00:14:56,040
that's it soon as you hit the error the

462
00:14:54,210 --> 00:14:58,620
browser will send this report now the

463
00:14:56,040 --> 00:15:00,630
age is how long because the browser

464
00:14:58,620 --> 00:15:03,030
cached it before sending it because

465
00:15:00,630 --> 00:15:04,200
maybe the browser isn't online right now

466
00:15:03,030 --> 00:15:05,670
maybe there's some kind of network

467
00:15:04,200 --> 00:15:07,350
condition that's preventing it so the

468
00:15:05,670 --> 00:15:09,329
browser might hold on to this report for

469
00:15:07,350 --> 00:15:11,820
a small period of time and send it later

470
00:15:09,330 --> 00:15:14,010
so the age indicates you know if you get

471
00:15:11,820 --> 00:15:16,020
a report in actually this happened like

472
00:15:14,010 --> 00:15:18,000
four minutes ago not right now so the

473
00:15:16,020 --> 00:15:19,260
age is quite important they're also good

474
00:15:18,000 --> 00:15:20,820
because it means the browser will catch

475
00:15:19,260 --> 00:15:22,460
up these reports or send them to you and

476
00:15:20,820 --> 00:15:24,570
it's online so you won't miss anything

477
00:15:22,460 --> 00:15:25,890
then we've got the time so we're going

478
00:15:24,570 --> 00:15:27,120
to see a few different types as we go

479
00:15:25,890 --> 00:15:28,949
through right now we're talking about

480
00:15:27,120 --> 00:15:31,680
network paralogs so you see Network

481
00:15:28,950 --> 00:15:33,210
error as a report type the URL where is

482
00:15:31,680 --> 00:15:34,739
the user trying to go when this

483
00:15:33,210 --> 00:15:37,980
particular error happened

484
00:15:34,740 --> 00:15:39,839
the body of the report itself now the

485
00:15:37,980 --> 00:15:42,360
sampling fraction was something that we

486
00:15:39,839 --> 00:15:44,430
learned the hard way and previous

487
00:15:42,360 --> 00:15:45,690
features like the ones that we're

488
00:15:44,430 --> 00:15:48,180
talking about there is no ability to

489
00:15:45,690 --> 00:15:50,610
down sample so if you're a website that

490
00:15:48,180 --> 00:15:52,439
gets like 50 million visits a day and

491
00:15:50,610 --> 00:15:53,610
you have an error like every single one

492
00:15:52,440 --> 00:15:54,690
of your users is going to be telling you

493
00:15:53,610 --> 00:15:57,000
about the error and you're like whoa

494
00:15:54,690 --> 00:15:58,050
okay you know we only need like a small

495
00:15:57,000 --> 00:15:59,670
number of people to tell us at our

496
00:15:58,050 --> 00:16:01,319
website is down so now with a sampling

497
00:15:59,670 --> 00:16:03,990
fraction you can just kill that right

498
00:16:01,320 --> 00:16:05,339
down and if you go look at mine my

499
00:16:03,990 --> 00:16:07,620
sampling fraction is one tenth of a

500
00:16:05,339 --> 00:16:10,440
percent because I don't need like this

501
00:16:07,620 --> 00:16:11,970
rush of a million people telling me like

502
00:16:10,440 --> 00:16:13,709
hey your certificate expired it's like

503
00:16:11,970 --> 00:16:15,839
great I only need 10 of you to tell me

504
00:16:13,709 --> 00:16:18,449
so if like let's just back that off so

505
00:16:15,839 --> 00:16:21,839
sampling fractions really good things

506
00:16:18,450 --> 00:16:24,420
like refer the server IP protocol if

507
00:16:21,839 --> 00:16:26,640
like this particular error if you know

508
00:16:24,420 --> 00:16:27,719
if no connection is made then some of

509
00:16:26,640 --> 00:16:29,250
these values will obviously not be

510
00:16:27,720 --> 00:16:31,230
populated it depends on whether or not

511
00:16:29,250 --> 00:16:33,270
the actual connection and the request

512
00:16:31,230 --> 00:16:35,490
was made method it was a get request

513
00:16:33,270 --> 00:16:37,500
status code was 0 because nothing

514
00:16:35,490 --> 00:16:39,630
actually happened so there can't be a

515
00:16:37,500 --> 00:16:41,220
status code because though HTTP request

516
00:16:39,630 --> 00:16:42,779
was made and then you can see the

517
00:16:41,220 --> 00:16:44,520
elapsed time it took the client 92

518
00:16:42,779 --> 00:16:47,279
milliseconds from the start of the

519
00:16:44,520 --> 00:16:50,640
action to the error and the type of the

520
00:16:47,279 --> 00:16:52,260
error TLS date invalid so you can see

521
00:16:50,640 --> 00:16:54,449
that this user tried to navigate to my

522
00:16:52,260 --> 00:16:57,870
home page but couldn't get there because

523
00:16:54,450 --> 00:16:59,610
my certificate was expired and as soon

524
00:16:57,870 --> 00:17:00,810
as they load that page of as soon as

525
00:16:59,610 --> 00:17:02,640
they get that error message just

526
00:17:00,810 --> 00:17:04,409
completely transparently invisibly in

527
00:17:02,640 --> 00:17:06,540
the background the browser will fire

528
00:17:04,410 --> 00:17:07,860
that post request as long as I've sat

529
00:17:06,540 --> 00:17:09,688
listening at the endpoint on the other

530
00:17:07,859 --> 00:17:12,208
side I can know about it as soon as

531
00:17:09,689 --> 00:17:14,010
those reports start coming in but we

532
00:17:12,209 --> 00:17:15,600
have had the ability to mitre for things

533
00:17:14,010 --> 00:17:18,000
like this before we have had the ability

534
00:17:15,599 --> 00:17:19,649
to monitor for things like certificates

535
00:17:18,000 --> 00:17:21,780
expiring and it has happened to some

536
00:17:19,650 --> 00:17:23,370
really big organizations you know this

537
00:17:21,780 --> 00:17:25,500
isn't just like small people having

538
00:17:23,369 --> 00:17:28,409
their first foray into certificates like

539
00:17:25,500 --> 00:17:30,150
really big organizations sometimes kind

540
00:17:28,410 --> 00:17:32,190
of common stock because certificates

541
00:17:30,150 --> 00:17:34,050
expire and when they do expire they

542
00:17:32,190 --> 00:17:38,309
generally cause like quite significant

543
00:17:34,050 --> 00:17:39,960
outages so the the kind of the normal

544
00:17:38,309 --> 00:17:41,910
thing that we depend on up until the

545
00:17:39,960 --> 00:17:44,550
introduction of now we did have a super

546
00:17:41,910 --> 00:17:46,320
reliable mechanism for telling us when

547
00:17:44,550 --> 00:17:50,010
our site was broken

548
00:17:46,320 --> 00:17:51,870
anyone has it a guess Twitter whoever

549
00:17:50,010 --> 00:17:53,370
said hot you're right like the number

550
00:17:51,870 --> 00:17:55,199
one reporting mechanism for things like

551
00:17:53,370 --> 00:17:56,909
this like your website is catastrophic

552
00:17:55,200 --> 00:17:57,480
lis broken where do you find out first

553
00:17:56,910 --> 00:17:59,280
whoa

554
00:17:57,480 --> 00:18:00,390
ask your social team so I can go check

555
00:17:59,280 --> 00:18:02,280
your Twitter handle because you'll

556
00:18:00,390 --> 00:18:05,790
probably have loads of people telling

557
00:18:02,280 --> 00:18:08,010
you about it now this is really not the

558
00:18:05,790 --> 00:18:10,680
way that I want to find out if something

559
00:18:08,010 --> 00:18:11,910
is catastrophic leap Rokinon my side my

560
00:18:10,680 --> 00:18:13,770
website is just completely down and

561
00:18:11,910 --> 00:18:15,930
unavailable we really don't want to

562
00:18:13,770 --> 00:18:17,160
depend on people on social media but

563
00:18:15,930 --> 00:18:19,080
it's okay because like social media

564
00:18:17,160 --> 00:18:20,310
teams already have some like really good

565
00:18:19,080 --> 00:18:21,659
answers and helpful things they were

566
00:18:20,310 --> 00:18:24,030
here it's like could you please try

567
00:18:21,660 --> 00:18:26,700
using a different browser it's like oh

568
00:18:24,030 --> 00:18:28,200
the certs expired it's out of date but

569
00:18:26,700 --> 00:18:29,760
like maybe if we open Firefox we can go

570
00:18:28,200 --> 00:18:34,740
back to yesterday and everything I'll be

571
00:18:29,760 --> 00:18:36,300
ok like I don't know so you know this

572
00:18:34,740 --> 00:18:38,700
it's not the way that you want to find

573
00:18:36,300 --> 00:18:40,169
out about it and outside of actually

574
00:18:38,700 --> 00:18:42,570
asking the client is kind of difficult

575
00:18:40,170 --> 00:18:44,610
right because you just have to have some

576
00:18:42,570 --> 00:18:46,080
kind of external service connecting to

577
00:18:44,610 --> 00:18:48,360
you from all over the world monitoring

578
00:18:46,080 --> 00:18:49,409
everything on your behalf and you know

579
00:18:48,360 --> 00:18:50,969
there's obviously gonna be a finite

580
00:18:49,410 --> 00:18:52,650
number of monitoring stations and how

581
00:18:50,970 --> 00:18:53,880
frequently they can monitor you in all

582
00:18:52,650 --> 00:18:55,170
of these kinds of things it's like with

583
00:18:53,880 --> 00:18:57,390
the client when you're doing it with the

584
00:18:55,170 --> 00:19:01,110
browser it's like the first one that

585
00:18:57,390 --> 00:19:02,910
sees the error will send the report and

586
00:19:01,110 --> 00:19:05,370
that means that every single one of your

587
00:19:02,910 --> 00:19:09,210
visitors to your site is is some kind of

588
00:19:05,370 --> 00:19:10,709
like monitoring telemetry endpoint you

589
00:19:09,210 --> 00:19:12,510
know they're basically checking your

590
00:19:10,710 --> 00:19:13,920
site for you as they visit a browser

591
00:19:12,510 --> 00:19:15,540
sign this is the thing that I love about

592
00:19:13,920 --> 00:19:16,890
now without the deploying the

593
00:19:15,540 --> 00:19:19,080
infrastructure assignment funny stuff

594
00:19:16,890 --> 00:19:20,040
you just say like hey browsers like if

595
00:19:19,080 --> 00:19:26,129
you come back tomorrow and everything's

596
00:19:20,040 --> 00:19:27,960
broken tell me about it awesome so just

597
00:19:26,130 --> 00:19:29,400
to show how about this problem is I'm

598
00:19:27,960 --> 00:19:30,900
going to be firsta some data from one of

599
00:19:29,400 --> 00:19:33,210
my other projects so I run a separate

600
00:19:30,900 --> 00:19:35,400
project called crawler ninja and if

601
00:19:33,210 --> 00:19:36,570
you've not seen this project and I'll do

602
00:19:35,400 --> 00:19:39,150
this live I'm gonna do a live demo

603
00:19:36,570 --> 00:19:41,970
because these things always work so well

604
00:19:39,150 --> 00:19:43,710
when I do them I literally sell my lab

605
00:19:41,970 --> 00:19:46,530
so when I got here the Wi-Fi had like D

606
00:19:43,710 --> 00:19:48,360
off to me and it's like oh boy you know

607
00:19:46,530 --> 00:19:51,560
why I'm trying to do this but I run this

608
00:19:48,360 --> 00:19:54,570
project called crawl Adan ninja and

609
00:19:51,560 --> 00:19:57,330
where are we here so we're gonna go take

610
00:19:54,570 --> 00:19:58,740
a look at this and one of the things any

611
00:19:57,330 --> 00:19:59,409
psych super simple in principle right I

612
00:19:58,740 --> 00:20:01,000
take the

613
00:19:59,410 --> 00:20:03,190
to top 1 million lists so if you're not

614
00:20:01,000 --> 00:20:05,770
familiar with it it's the list of like

615
00:20:03,190 --> 00:20:07,090
the the day's top 1 million websites in

616
00:20:05,770 --> 00:20:08,889
the world by traffic and a few of the

617
00:20:07,090 --> 00:20:10,870
kind of ranks so I take the 1 million

618
00:20:08,890 --> 00:20:12,670
list I crawl through and I look at whole

619
00:20:10,870 --> 00:20:15,010
heaps of different kind of security

620
00:20:12,670 --> 00:20:16,780
configurations on their site what see

621
00:20:15,010 --> 00:20:18,190
less protocols cipher suites have they

622
00:20:16,780 --> 00:20:20,020
got security features enabled or

623
00:20:18,190 --> 00:20:21,460
disabled like what's going on and then

624
00:20:20,020 --> 00:20:22,540
the crawler just dumps out the raw data

625
00:20:21,460 --> 00:20:24,580
every day so if you ever want to come

626
00:20:22,540 --> 00:20:26,470
and have a look you can actually I mean

627
00:20:24,580 --> 00:20:29,530
zips open everything it's like just shy

628
00:20:26,470 --> 00:20:31,300
of 3 gig or day of raw data and I also

629
00:20:29,530 --> 00:20:33,310
dump out like these raw kind of text

630
00:20:31,300 --> 00:20:34,960
files which is just some super cursory

631
00:20:33,310 --> 00:20:38,740
analysis if you just want like a quick

632
00:20:34,960 --> 00:20:39,700
reference on a particular metric now let

633
00:20:38,740 --> 00:20:41,290
us zoom in a little bit for everyone

634
00:20:39,700 --> 00:20:43,120
there one of the things that I dumped

635
00:20:41,290 --> 00:20:46,210
out is a list of all the size with

636
00:20:43,120 --> 00:20:48,250
certificates that are expiring in 24

637
00:20:46,210 --> 00:20:49,930
hours or less now remember this is from

638
00:20:48,250 --> 00:20:51,760
the point in time that the crawler

639
00:20:49,930 --> 00:20:54,460
observed it so this is probably

640
00:20:51,760 --> 00:20:56,620
somewhere like UK time between yesterday

641
00:20:54,460 --> 00:20:58,030
late afternoon and kind of like 2:00

642
00:20:56,620 --> 00:20:59,379
a.m. this morning cuz that's the period

643
00:20:58,030 --> 00:21:01,090
where the crawlers like really getting

644
00:20:59,380 --> 00:21:02,890
into action so you can come and find

645
00:21:01,090 --> 00:21:04,629
this list here and just be like hey all

646
00:21:02,890 --> 00:21:07,630
of these websites should have a

647
00:21:04,630 --> 00:21:09,070
certificate that will be expiring within

648
00:21:07,630 --> 00:21:11,230
it maybe even a few hours of now it's

649
00:21:09,070 --> 00:21:13,540
like poker discover god did this once

650
00:21:11,230 --> 00:21:16,180
and it wasn't a great website when I

651
00:21:13,540 --> 00:21:17,500
London they're saying never all f-words

652
00:21:16,180 --> 00:21:19,600
so fast in my life

653
00:21:17,500 --> 00:21:22,720
so let's just have a look at that sir so

654
00:21:19,600 --> 00:21:24,070
what we'll see is like yeah so they you

655
00:21:22,720 --> 00:21:25,690
can see right there if I just try

656
00:21:24,070 --> 00:21:30,310
actually let me just put my zoom too

657
00:21:25,690 --> 00:21:31,870
long for everyone aback zoom so if i

658
00:21:30,310 --> 00:21:33,490
zoom in here you can see that they've

659
00:21:31,870 --> 00:21:35,590
got a brand new certificate because he's

660
00:21:33,490 --> 00:21:37,420
valid from the 28th of august which was

661
00:21:35,590 --> 00:21:39,370
yesterday so they've literally got like

662
00:21:37,420 --> 00:21:40,740
right to the end I mean like on crack we

663
00:21:39,370 --> 00:21:42,790
gotta get a new one and drop it on

664
00:21:40,740 --> 00:21:45,100
sometimes you come to these and you open

665
00:21:42,790 --> 00:21:46,690
them up and they're literally down and

666
00:21:45,100 --> 00:21:50,800
offline so let's find another one

667
00:21:46,690 --> 00:21:52,330
blow horn we'll skip past that this is

668
00:21:50,800 --> 00:21:56,110
live this is a real list I have no

669
00:21:52,330 --> 00:21:58,960
control I can not responsible Oh to

670
00:21:56,110 --> 00:22:02,590
start traitor that sounds safe enough to

671
00:21:58,960 --> 00:22:06,510
open a live demo there we go so let's

672
00:22:02,590 --> 00:22:09,399
have a look at their certificate here so

673
00:22:06,510 --> 00:22:10,660
yeah first of August 19 this one was

674
00:22:09,400 --> 00:22:13,360
valid from so one of the other things I

675
00:22:10,660 --> 00:22:15,730
find is if they have like geo sensitive

676
00:22:13,360 --> 00:22:18,040
infrastructure as well my Corolla looks

677
00:22:15,730 --> 00:22:21,550
at things from a single vantage point so

678
00:22:18,040 --> 00:22:23,379
like if it's a super kind of diverse

679
00:22:21,550 --> 00:22:25,120
organization sometimes you'll find if

680
00:22:23,380 --> 00:22:30,420
you like VPN through America you'll see

681
00:22:25,120 --> 00:22:30,419
like a different certificate but sorry

682
00:22:31,080 --> 00:22:35,919
startup or study study comm there we go

683
00:22:34,030 --> 00:22:37,180
so there so this is their Alexa rank on

684
00:22:35,920 --> 00:22:38,920
the left hand side so that the nine

685
00:22:37,180 --> 00:22:40,750
hundred and fifty fifth largest website

686
00:22:38,920 --> 00:22:42,400
in the world and the fact that they let

687
00:22:40,750 --> 00:22:45,430
her get a certificate get that close to

688
00:22:42,400 --> 00:22:47,340
its expiry is kind of surprising you

689
00:22:45,430 --> 00:22:49,930
would really hope that they would be

690
00:22:47,340 --> 00:22:53,020
renewing it and again look same thing so

691
00:22:49,930 --> 00:22:55,000
they literally got down to the last day

692
00:22:53,020 --> 00:22:57,820
yesterday and renewed it on the day that

693
00:22:55,000 --> 00:22:59,350
it expired and it's like why it's like

694
00:22:57,820 --> 00:23:00,790
oh you go to your CA and it's like oh

695
00:22:59,350 --> 00:23:02,409
sorry we've got a bit of downtime today

696
00:23:00,790 --> 00:23:04,090
you can't get a new certificate it's

697
00:23:02,410 --> 00:23:06,730
like by website if you're going offline

698
00:23:04,090 --> 00:23:09,520
when that search ROPS so common apple

699
00:23:06,730 --> 00:23:11,290
flick through this list you will find a

700
00:23:09,520 --> 00:23:12,820
heap of porn sites because they're

701
00:23:11,290 --> 00:23:14,020
really popular apparently but there are

702
00:23:12,820 --> 00:23:17,830
some like genuine

703
00:23:14,020 --> 00:23:19,540
other websites in there and have a look

704
00:23:17,830 --> 00:23:21,790
at them because like the I did this in

705
00:23:19,540 --> 00:23:24,280
Norway in January it's like a separate

706
00:23:21,790 --> 00:23:25,360
talk with a similar demo and we'll I

707
00:23:24,280 --> 00:23:26,440
just basically went through and I was

708
00:23:25,360 --> 00:23:28,600
like oh hey let's have all the flight

709
00:23:26,440 --> 00:23:30,850
dino-sized that there's not in there

710
00:23:28,600 --> 00:23:32,350
today but we found a Dino site and we

711
00:23:30,850 --> 00:23:34,750
went to look at it inspected the sternum

712
00:23:32,350 --> 00:23:36,490
like oh wow there sir expires in like 43

713
00:23:34,750 --> 00:23:38,830
minutes and I had a one-hour talk and

714
00:23:36,490 --> 00:23:40,660
I'm the closing section of my talk I

715
00:23:38,830 --> 00:23:42,669
literally just like altered back to the

716
00:23:40,660 --> 00:23:45,760
browser hit f5 and he was like BAM sir

717
00:23:42,670 --> 00:23:49,600
expired website down so these things

718
00:23:45,760 --> 00:23:52,330
happen this is this is a big problem

719
00:23:49,600 --> 00:23:53,770
because like I say people are doing

720
00:23:52,330 --> 00:23:55,360
things for the first time they've just

721
00:23:53,770 --> 00:23:57,370
migrated their website it might be a new

722
00:23:55,360 --> 00:23:58,719
process one of the really common things

723
00:23:57,370 --> 00:24:00,760
that I come across is it's like oh hey

724
00:23:58,720 --> 00:24:02,080
you know like Dave install the

725
00:24:00,760 --> 00:24:03,460
certificate two years ago it didn't

726
00:24:02,080 --> 00:24:05,230
document the process and also doesn't

727
00:24:03,460 --> 00:24:06,520
work here anymore and no one knows and

728
00:24:05,230 --> 00:24:08,680
it's like this thing somewhere in the

729
00:24:06,520 --> 00:24:10,090
background we have loads of stuff like

730
00:24:08,680 --> 00:24:13,030
that in our infrastructure in our

731
00:24:10,090 --> 00:24:14,860
applications and this and you know these

732
00:24:13,030 --> 00:24:16,450
lists need to they only have a look at

733
00:24:14,860 --> 00:24:17,919
this expired one similar thing but

734
00:24:16,450 --> 00:24:19,240
they've already expired when the crawler

735
00:24:17,920 --> 00:24:21,130
saw them so you can generally just go

736
00:24:19,240 --> 00:24:23,289
get a whole list of websites that are

737
00:24:21,130 --> 00:24:25,870
currently offline

738
00:24:23,289 --> 00:24:28,389
it happens it happens frequently it

739
00:24:25,870 --> 00:24:29,768
happens a lot and it's you can't avoid

740
00:24:28,389 --> 00:24:31,090
it like don't get me wrong network error

741
00:24:29,769 --> 00:24:32,830
logging is not going to stop your sir

742
00:24:31,090 --> 00:24:34,689
expiring and you won't get the warning

743
00:24:32,830 --> 00:24:36,549
until your cert has expired but the

744
00:24:34,690 --> 00:24:39,460
point is it's like if it really gets to

745
00:24:36,549 --> 00:24:40,929
that stage the first browser that sees

746
00:24:39,460 --> 00:24:43,509
the error message will send you the

747
00:24:40,929 --> 00:24:46,629
alert and say hey your sirs dead it's

748
00:24:43,509 --> 00:24:48,370
expired so yep you know like I hold my

749
00:24:46,629 --> 00:24:50,080
hand up like this will not warn you in

750
00:24:48,370 --> 00:24:51,939
advance like you should have known in

751
00:24:50,080 --> 00:24:53,649
advance from some of the mechanism this

752
00:24:51,940 --> 00:24:55,269
is like the ultimate safety net it's

753
00:24:53,649 --> 00:24:58,360
like if we really get to the point where

754
00:24:55,269 --> 00:25:00,759
it's dead then you can reliably be

755
00:24:58,360 --> 00:25:01,840
informed but it's not just about TLS and

756
00:25:00,759 --> 00:25:03,669
DNS and all the things that we just

757
00:25:01,840 --> 00:25:05,769
talked about because what we just talked

758
00:25:03,669 --> 00:25:08,350
about was only one of the things that

759
00:25:05,769 --> 00:25:09,669
you can ask the browser for information

760
00:25:08,350 --> 00:25:10,928
about that was network area logging but

761
00:25:09,669 --> 00:25:12,700
I'm gonna take a look at deprecation

762
00:25:10,929 --> 00:25:15,220
reports these things are going to become

763
00:25:12,700 --> 00:25:16,690
super handy for websites like I will

764
00:25:15,220 --> 00:25:18,580
hopefully be abbé sieyès Manchester next

765
00:25:16,690 --> 00:25:20,710
year and hopefully I can be like yes I

766
00:25:18,580 --> 00:25:22,389
was right they are super handy because

767
00:25:20,710 --> 00:25:24,879
they tell you about things that are

768
00:25:22,389 --> 00:25:26,080
going to stop working on your website

769
00:25:24,879 --> 00:25:27,549
and this is what I like about

770
00:25:26,080 --> 00:25:29,649
deprecation reports there are future

771
00:25:27,549 --> 00:25:31,539
kind of warning but hey this thing that

772
00:25:29,649 --> 00:25:33,248
you use is going to stop working because

773
00:25:31,539 --> 00:25:35,710
the browser intends to deprecated the

774
00:25:33,249 --> 00:25:37,200
feature and that we had an example of

775
00:25:35,710 --> 00:25:39,850
when this would have been perfect but

776
00:25:37,200 --> 00:25:40,899
before deprecation reports existed so

777
00:25:39,850 --> 00:25:42,730
this is the kind of thing that can

778
00:25:40,899 --> 00:25:44,139
happen everyone's probably familiar with

779
00:25:42,730 --> 00:25:46,029
something like this you go into like a

780
00:25:44,139 --> 00:25:47,439
retailer's website Sainsbury's Tesco or

781
00:25:46,029 --> 00:25:49,419
whatever you want you're like hey where

782
00:25:47,440 --> 00:25:51,220
is your store I don't know go to the map

783
00:25:49,419 --> 00:25:52,779
and you press like the Lord GPS button

784
00:25:51,220 --> 00:25:54,220
up here and it's like do you want to

785
00:25:52,779 --> 00:25:55,240
give your location to the website yes

786
00:25:54,220 --> 00:25:58,509
and then it plots a route to your

787
00:25:55,240 --> 00:26:00,279
nearest store fairly handy feature kind

788
00:25:58,509 --> 00:26:03,119
of you know get me to the supermarket

789
00:26:00,279 --> 00:26:05,320
buy the fastest route except one day

790
00:26:03,119 --> 00:26:07,480
pretty much thank most of these websites

791
00:26:05,320 --> 00:26:08,889
in the UK and for other major retailers

792
00:26:07,480 --> 00:26:10,990
around the world as well just stopped

793
00:26:08,889 --> 00:26:12,820
working you would come to this page you

794
00:26:10,990 --> 00:26:14,100
would press the little GPS button and

795
00:26:12,820 --> 00:26:16,629
nothing would happen

796
00:26:14,100 --> 00:26:20,699
can anyone tell me why nothing happens

797
00:26:16,629 --> 00:26:22,498
now because what

798
00:26:20,700 --> 00:26:26,820
yes something hard but what can we go

799
00:26:22,499 --> 00:26:30,769
more specific so the scheme in the

800
00:26:26,820 --> 00:26:33,090
address bar is HTTP now previously

801
00:26:30,769 --> 00:26:35,159
several a couple years ago so many many

802
00:26:33,090 --> 00:26:38,519
months ago you used to be able to send

803
00:26:35,159 --> 00:26:40,859
GPS coordinates of the device over HTTP

804
00:26:38,519 --> 00:26:42,749
but the browser vendors in there kind of

805
00:26:40,859 --> 00:26:44,189
onward march of improving security and

806
00:26:42,749 --> 00:26:45,690
privacy for their users looked at this

807
00:26:44,190 --> 00:26:46,950
and said well actually you know we're

808
00:26:45,690 --> 00:26:48,330
doing all of these things to try and

809
00:26:46,950 --> 00:26:50,279
protect people's privacy and information

810
00:26:48,330 --> 00:26:52,590
and we're willing to send their GPS

811
00:26:50,279 --> 00:26:56,190
coordinates to like six decimal places

812
00:26:52,590 --> 00:26:59,249
which is like this tile of carpet over

813
00:26:56,190 --> 00:27:01,139
HTTP for everybody to see does that

814
00:26:59,249 --> 00:27:02,940
sound like a good idea no it's not a

815
00:27:01,139 --> 00:27:04,918
good idea we're going to require this

816
00:27:02,940 --> 00:27:07,019
sensitive data like GPS coordinates be

817
00:27:04,919 --> 00:27:08,580
sent on a secure connection so the

818
00:27:07,019 --> 00:27:11,239
official term is there deprecating the

819
00:27:08,580 --> 00:27:13,049
geolocation API on insecure contexts

820
00:27:11,239 --> 00:27:15,840
basically they're going to make GPS

821
00:27:13,049 --> 00:27:17,039
stopped working on HTTP now they did

822
00:27:15,840 --> 00:27:19,199
this they announced they're on their

823
00:27:17,039 --> 00:27:20,940
blogs they do their tweets from there

824
00:27:19,200 --> 00:27:22,710
you know like the chrome dev channel and

825
00:27:20,940 --> 00:27:24,570
things like this and then eventually

826
00:27:22,710 --> 00:27:26,249
like the day comes when they release the

827
00:27:24,570 --> 00:27:27,720
build of chrome and very shortly after

828
00:27:26,249 --> 00:27:29,220
Firefox and all the other browsers and

829
00:27:27,720 --> 00:27:32,129
then of course to your location stops

830
00:27:29,220 --> 00:27:33,570
working on HTTP now hands up if you read

831
00:27:32,129 --> 00:27:37,080
the developer blogs for all of the

832
00:27:33,570 --> 00:27:39,149
browsers in the world alright like no

833
00:27:37,080 --> 00:27:41,249
I'm really good now I put their hand up

834
00:27:39,149 --> 00:27:43,590
and let the record reflect no one put

835
00:27:41,249 --> 00:27:44,970
their hand up so you don't know what the

836
00:27:43,590 --> 00:27:47,189
browser's are doing like is there a

837
00:27:44,970 --> 00:27:48,809
feature that you depend on that they're

838
00:27:47,190 --> 00:27:50,460
going to turn off what we call a

839
00:27:48,809 --> 00:27:52,619
deprecation so chrome has like a whole

840
00:27:50,460 --> 00:27:53,970
dedicated deprecation section where you

841
00:27:52,619 --> 00:27:55,470
can look at all of the things being

842
00:27:53,970 --> 00:27:57,090
deprecated the next version of chrome

843
00:27:55,470 --> 00:27:58,499
and I guess the idea is you're supposed

844
00:27:57,090 --> 00:28:00,209
to go there and read the things and be

845
00:27:58,499 --> 00:28:02,489
like hey we use this thing we should

846
00:28:00,210 --> 00:28:04,019
change or stop or migrate to some other

847
00:28:02,489 --> 00:28:06,210
thing whatever but no one does that

848
00:28:04,019 --> 00:28:09,389
right I don't do that and it's kind of

849
00:28:06,210 --> 00:28:11,340
my job but don't tell anyone so what we

850
00:28:09,389 --> 00:28:13,738
have now is deprecation reporting

851
00:28:11,340 --> 00:28:16,918
built-in and sending through the

852
00:28:13,739 --> 00:28:18,480
reporting API now if we had deprecation

853
00:28:16,919 --> 00:28:20,580
reporting when this happened which we

854
00:28:18,480 --> 00:28:23,460
didn't we would have got a JSON payload

855
00:28:20,580 --> 00:28:25,379
exactly like this so I filled out the

856
00:28:23,460 --> 00:28:26,460
fields according to the specification to

857
00:28:25,379 --> 00:28:28,830
see what it would have looked like

858
00:28:26,460 --> 00:28:31,200
so again h0 we've covered that and the

859
00:28:28,830 --> 00:28:33,230
type is now deprecation the URL where

860
00:28:31,200 --> 00:28:35,450
did the user try and go

861
00:28:33,230 --> 00:28:38,360
then the body of the report so it says

862
00:28:35,450 --> 00:28:40,490
here ID geolocation so this is a feature

863
00:28:38,360 --> 00:28:43,129
that was intended to be used but would

864
00:28:40,490 --> 00:28:46,370
be soon deprecated remember this is sent

865
00:28:43,130 --> 00:28:48,230
before the deprecation happens so

866
00:28:46,370 --> 00:28:49,610
anticipated removal and they would tell

867
00:28:48,230 --> 00:28:51,260
you hey you're using this thing and

868
00:28:49,610 --> 00:28:53,178
we're going to remove it on this date in

869
00:28:51,260 --> 00:28:55,220
the future you get a nice message as

870
00:28:53,179 --> 00:28:57,350
human readable Chrome is deprecated sort

871
00:28:55,220 --> 00:29:01,250
of geolocation is deprecated over HTTP

872
00:28:57,350 --> 00:29:05,449
and will be removed in chrome 50 now if

873
00:29:01,250 --> 00:29:07,700
you started to get these you could do

874
00:29:05,450 --> 00:29:09,590
something about them and there's been a

875
00:29:07,700 --> 00:29:10,940
load of changes in the browsers like the

876
00:29:09,590 --> 00:29:12,290
number of deprivation reports that you

877
00:29:10,940 --> 00:29:13,880
can receive right now is massive it

878
00:29:12,290 --> 00:29:15,918
depends what features you're using on

879
00:29:13,880 --> 00:29:18,200
your site but the idea is that you

880
00:29:15,919 --> 00:29:19,940
subscribe for these reports and if there

881
00:29:18,200 --> 00:29:21,860
is something on your page that will soon

882
00:29:19,940 --> 00:29:23,030
break because the browser vendors going

883
00:29:21,860 --> 00:29:25,040
to remove it then it will send the

884
00:29:23,030 --> 00:29:26,960
report and this could be a performance

885
00:29:25,040 --> 00:29:28,280
feature a security feature usability

886
00:29:26,960 --> 00:29:30,679
feature like whatever it is this was

887
00:29:28,280 --> 00:29:32,780
like a privacy security change in the

888
00:29:30,679 --> 00:29:35,240
browser and there's been lots of those

889
00:29:32,780 --> 00:29:36,410
recently as well and you can get this

890
00:29:35,240 --> 00:29:37,669
information you should only get these

891
00:29:36,410 --> 00:29:39,230
reports when something's going to break

892
00:29:37,669 --> 00:29:41,059
so this is what I like about them it's

893
00:29:39,230 --> 00:29:42,860
like 99% of the time the browser

894
00:29:41,059 --> 00:29:44,450
shouldn't say a thing but as soon as

895
00:29:42,860 --> 00:29:46,219
they intend to deprecated something you

896
00:29:44,450 --> 00:29:50,090
use you'll suddenly start getting these

897
00:29:46,220 --> 00:29:51,740
reports so why I think this is just

898
00:29:50,090 --> 00:29:53,809
going to become really big especially

899
00:29:51,740 --> 00:29:56,390
all the changes in the browsers kind of

900
00:29:53,809 --> 00:29:58,399
been the last 8 to 12 months they've

901
00:29:56,390 --> 00:30:00,020
really been driving a lot of kind of new

902
00:29:58,400 --> 00:30:02,090
technologies for words and deprecating a

903
00:30:00,020 --> 00:30:03,980
lot of also as a result Mike wrote was

904
00:30:02,090 --> 00:30:04,939
deprecating the ability to use ftp

905
00:30:03,980 --> 00:30:07,700
schemes in the browser

906
00:30:04,940 --> 00:30:09,169
probably q1 next year I think so if you

907
00:30:07,700 --> 00:30:10,730
try and go to like FTP colon slash slash

908
00:30:09,169 --> 00:30:12,530
something in the chrome address bar it's

909
00:30:10,730 --> 00:30:14,720
just gonna be like what's this I don't

910
00:30:12,530 --> 00:30:17,270
know because they're not using anymore

911
00:30:14,720 --> 00:30:18,919
they're going to deprecated it so maybe

912
00:30:17,270 --> 00:30:21,379
you don't use FTP but you know the point

913
00:30:18,919 --> 00:30:24,470
is if you did you would know before it

914
00:30:21,380 --> 00:30:26,570
broke so that's why I like deprecation

915
00:30:24,470 --> 00:30:30,110
reports but there's even more than we

916
00:30:26,570 --> 00:30:31,668
can talk about and intervention will

917
00:30:30,110 --> 00:30:35,120
trigger an intervention report and an

918
00:30:31,669 --> 00:30:38,000
intervention is when you ask a browser

919
00:30:35,120 --> 00:30:40,729
to do something and the browser decides

920
00:30:38,000 --> 00:30:42,020
not to now you might think ok the

921
00:30:40,730 --> 00:30:44,299
browser comes to my website and I say

922
00:30:42,020 --> 00:30:46,500
like load this picture load this script

923
00:30:44,299 --> 00:30:48,960
file load this CSS do you know base

924
00:30:46,500 --> 00:30:50,880
do what the page says now most people

925
00:30:48,960 --> 00:30:52,290
kind of like okay I sent the browser the

926
00:30:50,880 --> 00:30:53,970
page and the browser does what the page

927
00:30:52,290 --> 00:30:56,520
says but actually no the browser can

928
00:30:53,970 --> 00:30:58,020
choose not to the browser can intervene

929
00:30:56,520 --> 00:31:00,150
and choose to do something differently

930
00:30:58,020 --> 00:31:03,240
there's three scenarios when the browser

931
00:31:00,150 --> 00:31:04,500
can decide to kind of ignore you a

932
00:31:03,240 --> 00:31:07,530
little bit I don't use it so ignore you

933
00:31:04,500 --> 00:31:08,820
but it's because of performance if you

934
00:31:07,530 --> 00:31:10,410
want to do something on the page of this

935
00:31:08,820 --> 00:31:12,600
very detrimental to performance the

936
00:31:10,410 --> 00:31:14,520
browser will ignore you if it's because

937
00:31:12,600 --> 00:31:16,560
of security if you want to do something

938
00:31:14,520 --> 00:31:18,870
insecure on the page the browser can

939
00:31:16,560 --> 00:31:20,429
choose to intervene and not do it or if

940
00:31:18,870 --> 00:31:22,199
it impacts the privacy of the user as

941
00:31:20,430 --> 00:31:23,940
well the browser may step in and say no

942
00:31:22,200 --> 00:31:25,290
I'm not going to do this thing because

943
00:31:23,940 --> 00:31:27,570
remember the browser is actually called

944
00:31:25,290 --> 00:31:30,690
the user agent it's there to serve the

945
00:31:27,570 --> 00:31:33,899
user and it will act in the interest and

946
00:31:30,690 --> 00:31:36,180
on behalf of the user so there aren't

947
00:31:33,900 --> 00:31:37,650
very many scenarios when you should be

948
00:31:36,180 --> 00:31:40,230
triggering intervention reports but

949
00:31:37,650 --> 00:31:43,380
again here is something that you might

950
00:31:40,230 --> 00:31:44,760
see and I like I'm so glad that they

951
00:31:43,380 --> 00:31:46,230
introduced this intervention because it

952
00:31:44,760 --> 00:31:47,970
was massively not you have like if you

953
00:31:46,230 --> 00:31:49,500
like me like 47 tabs open in your

954
00:31:47,970 --> 00:31:50,760
browser I'm like which bloody one is

955
00:31:49,500 --> 00:31:51,900
playing the sound and you like going

956
00:31:50,760 --> 00:31:54,180
through them all trying to find the tab

957
00:31:51,900 --> 00:31:55,770
that's playing the audio because some

958
00:31:54,180 --> 00:31:57,480
website reloaded in the background and

959
00:31:55,770 --> 00:31:59,550
now he's playing some annoying adverts

960
00:31:57,480 --> 00:32:02,040
ound that I didn't ask for so we get a

961
00:31:59,550 --> 00:32:04,020
an intervention here again a zero type

962
00:32:02,040 --> 00:32:07,230
is now intervention you came to my

963
00:32:04,020 --> 00:32:08,639
website the ID is audio no gesture and

964
00:32:07,230 --> 00:32:10,260
it says in the message a request to play

965
00:32:08,640 --> 00:32:12,690
audio was blocked because it was not

966
00:32:10,260 --> 00:32:14,970
triggered by user activations such as a

967
00:32:12,690 --> 00:32:16,470
click now this is like super annoying

968
00:32:14,970 --> 00:32:18,000
for the user right you're going to book

969
00:32:16,470 --> 00:32:20,520
the user if you start author playing

970
00:32:18,000 --> 00:32:22,980
videos and sounds and stuff like this so

971
00:32:20,520 --> 00:32:24,629
you might build your site with one

972
00:32:22,980 --> 00:32:26,790
expectation in mind of like what the

973
00:32:24,630 --> 00:32:27,810
experience of coming to your site is but

974
00:32:26,790 --> 00:32:29,399
then the browser is doing something

975
00:32:27,810 --> 00:32:30,510
different feel like oh yes the user

976
00:32:29,400 --> 00:32:32,430
comes to our website and we start

977
00:32:30,510 --> 00:32:34,560
playing like our theme to music in the

978
00:32:32,430 --> 00:32:35,910
background whatever but it's like no

979
00:32:34,560 --> 00:32:37,679
that's actually not happening because

980
00:32:35,910 --> 00:32:40,620
the browser's are doing something else

981
00:32:37,680 --> 00:32:42,000
so again you know if you've got like

982
00:32:40,620 --> 00:32:43,350
good examples now are trying to submit

983
00:32:42,000 --> 00:32:46,470
things like password or credit card

984
00:32:43,350 --> 00:32:49,080
fields over HTTP we can all agree that

985
00:32:46,470 --> 00:32:51,450
that's terrible for security the browser

986
00:32:49,080 --> 00:32:53,730
might intervene and say no you're not

987
00:32:51,450 --> 00:32:56,130
allowed to submit a form that contains a

988
00:32:53,730 --> 00:32:59,220
password field on HTTP because it's

989
00:32:56,130 --> 00:33:01,169
obviously not secure so if any

990
00:32:59,220 --> 00:33:03,120
these things either do happen presently

991
00:33:01,169 --> 00:33:05,250
or start to happen you know because some

992
00:33:03,120 --> 00:33:07,139
stunts changes in the future again

993
00:33:05,250 --> 00:33:08,520
you'll start to get this feedback from

994
00:33:07,140 --> 00:33:10,530
the browser with intervention of course

995
00:33:08,520 --> 00:33:13,250
any time the browser steps in and does

996
00:33:10,530 --> 00:33:16,220
something other than what you expected

997
00:33:13,250 --> 00:33:18,690
sounds like a pretty reliable feature

998
00:33:16,220 --> 00:33:20,520
now the last kind of major one that

999
00:33:18,690 --> 00:33:23,820
we're going to look at and talk about is

1000
00:33:20,520 --> 00:33:25,408
crash reports so these this is currently

1001
00:33:23,820 --> 00:33:26,908
only spotting Chrome and there's

1002
00:33:25,409 --> 00:33:30,270
currently only one that I've actually

1003
00:33:26,909 --> 00:33:31,140
seen and like this is like the only

1004
00:33:30,270 --> 00:33:32,610
browser at the world that was going to

1005
00:33:31,140 --> 00:33:35,730
send this error message was chrome and

1006
00:33:32,610 --> 00:33:37,070
here's the JSON and the reason that you

1007
00:33:35,730 --> 00:33:38,940
want right down at the bottom

1008
00:33:37,070 --> 00:33:40,049
everyone can understand why chrome is

1009
00:33:38,940 --> 00:33:41,789
there on the browser that sends these

1010
00:33:40,049 --> 00:33:43,970
because chrome is the only browser that

1011
00:33:41,789 --> 00:33:46,408
eats all 64 KB of RAM on my desktop so

1012
00:33:43,970 --> 00:33:48,000
right now there is only this particular

1013
00:33:46,409 --> 00:33:49,530
error message sent by Chrome and so if

1014
00:33:48,000 --> 00:33:51,870
your application somehow manages to

1015
00:33:49,530 --> 00:33:54,030
consume whatever Ram may be left on the

1016
00:33:51,870 --> 00:33:55,590
client after launching chrome anyway and

1017
00:33:54,030 --> 00:33:58,020
you also get a crash ID which you can

1018
00:33:55,590 --> 00:33:59,580
map back to map back to a crash report

1019
00:33:58,020 --> 00:34:00,720
with the vendor as well so you can kind

1020
00:33:59,580 --> 00:34:02,970
of correlate some additional information

1021
00:34:00,720 --> 00:34:04,169
there which will be really cool but the

1022
00:34:02,970 --> 00:34:05,970
idea is crash reports are going to be

1023
00:34:04,169 --> 00:34:08,310
extended out into other features other

1024
00:34:05,970 --> 00:34:10,109
areas everything that we're talking

1025
00:34:08,310 --> 00:34:10,889
about here is still pretty new you know

1026
00:34:10,109 --> 00:34:13,859
some of these things have been around

1027
00:34:10,889 --> 00:34:16,320
for a year next month actually but that

1028
00:34:13,859 --> 00:34:18,060
like an internet age that's brand new

1029
00:34:16,320 --> 00:34:21,629
that's literally like a cutting-edge

1030
00:34:18,060 --> 00:34:23,489
feature so you know you have to rely on

1031
00:34:21,629 --> 00:34:25,230
having a modern client they have to have

1032
00:34:23,489 --> 00:34:27,359
been updated recently but I guess the

1033
00:34:25,230 --> 00:34:29,190
point really is you know even if only

1034
00:34:27,359 --> 00:34:31,319
let's say like 1% of your visitors have

1035
00:34:29,190 --> 00:34:33,629
an up-to-date enough browser to support

1036
00:34:31,320 --> 00:34:35,849
this if 1% of your visitors are sending

1037
00:34:33,629 --> 00:34:37,739
you any of these reports is it enough

1038
00:34:35,849 --> 00:34:40,619
for you to identify and fix the problem

1039
00:34:37,739 --> 00:34:42,089
and this is why I think like the support

1040
00:34:40,619 --> 00:34:44,820
discussion is really actually not that

1041
00:34:42,089 --> 00:34:46,139
important at all because I use this day

1042
00:34:44,820 --> 00:34:47,940
to day on my production sites I know

1043
00:34:46,139 --> 00:34:49,710
that there is enough of a sliver of

1044
00:34:47,940 --> 00:34:53,010
people out there that support this that

1045
00:34:49,710 --> 00:34:54,210
I can get useful feedback and I move my

1046
00:34:53,010 --> 00:34:57,330
monitor over here enough I don't know

1047
00:34:54,210 --> 00:34:59,010
what I did so as I say like I really

1048
00:34:57,330 --> 00:35:00,750
don't think for that reason the support

1049
00:34:59,010 --> 00:35:02,070
description is is such a big deal but

1050
00:35:00,750 --> 00:35:04,230
there's even more stuff that the

1051
00:35:02,070 --> 00:35:05,550
browsers can do this is only this stuff

1052
00:35:04,230 --> 00:35:07,320
that I've had time to go into there's

1053
00:35:05,550 --> 00:35:08,580
even more things if you follow me on

1054
00:35:07,320 --> 00:35:10,430
Twitter again you'll know that I'm a

1055
00:35:08,580 --> 00:35:12,920
huge fan of content security policy

1056
00:35:10,430 --> 00:35:16,669
punches smiling it's like Ledisi

1057
00:35:12,920 --> 00:35:19,010
P content security policy is a hugely

1058
00:35:16,670 --> 00:35:21,290
powerful mechanism and it allows you to

1059
00:35:19,010 --> 00:35:24,050
define a whitelist of the content that

1060
00:35:21,290 --> 00:35:25,520
you expect to be on your website so if

1061
00:35:24,050 --> 00:35:27,170
you come to my website you can see this

1062
00:35:25,520 --> 00:35:29,180
if you look at the headers and it

1063
00:35:27,170 --> 00:35:31,220
literally says I load JavaScript from

1064
00:35:29,180 --> 00:35:34,100
these two CD ends I load images from

1065
00:35:31,220 --> 00:35:37,040
this one CDM I load my fonts from this

1066
00:35:34,100 --> 00:35:39,110
CDN so on and so forth now what that

1067
00:35:37,040 --> 00:35:42,050
means is if you come to my website and

1068
00:35:39,110 --> 00:35:43,520
there's some new script tag stuck at the

1069
00:35:42,050 --> 00:35:45,500
bottom of the page and it's like mage

1070
00:35:43,520 --> 00:35:47,150
can't come forward slash keylogger dodge

1071
00:35:45,500 --> 00:35:49,130
is the browser is going to look at I'd

1072
00:35:47,150 --> 00:35:51,350
be like well Scott doesn't load

1073
00:35:49,130 --> 00:35:52,550
JavaScript from hcar calm he only loves

1074
00:35:51,350 --> 00:35:53,750
you from these two CD ends that he

1075
00:35:52,550 --> 00:35:56,270
specifies service we would take the

1076
00:35:53,750 --> 00:35:57,710
script tag I'm going to toss it away so

1077
00:35:56,270 --> 00:35:59,660
most people when they look at deploying

1078
00:35:57,710 --> 00:36:01,400
content security policy are going for

1079
00:35:59,660 --> 00:36:03,350
cross-site scripting protection because

1080
00:36:01,400 --> 00:36:06,320
if you can take full control of all of

1081
00:36:03,350 --> 00:36:07,790
the JavaScript on your site then the

1082
00:36:06,320 --> 00:36:12,170
idea is that you can't have any bad

1083
00:36:07,790 --> 00:36:13,670
JavaScript on your site so CSP is super

1084
00:36:12,170 --> 00:36:16,070
powerful and again it hooks into the

1085
00:36:13,670 --> 00:36:18,140
reporting API if someone gets a script

1086
00:36:16,070 --> 00:36:19,760
tag onto my page and the browser picks

1087
00:36:18,140 --> 00:36:21,500
it up and tosses it away it will at the

1088
00:36:19,760 --> 00:36:23,750
same time to send a report and say hey

1089
00:36:21,500 --> 00:36:25,160
Scott we came to this page you told us

1090
00:36:23,750 --> 00:36:27,170
you only have JavaScript from these two

1091
00:36:25,160 --> 00:36:29,629
domains and this is the script tag that

1092
00:36:27,170 --> 00:36:31,970
we threw away and I can be like wow hey

1093
00:36:29,630 --> 00:36:33,620
you know like what is this Rando script

1094
00:36:31,970 --> 00:36:36,350
tag or my home page that shouldn't be

1095
00:36:33,620 --> 00:36:38,779
there so that is a super powerful one

1096
00:36:36,350 --> 00:36:41,660
this is the number one use of the

1097
00:36:38,780 --> 00:36:43,490
reporting API so I mean the service that

1098
00:36:41,660 --> 00:36:45,350
collects the jace of the people and this

1099
00:36:43,490 --> 00:36:47,120
is literally by far like the number one

1100
00:36:45,350 --> 00:36:51,290
thing that people are collecting reports

1101
00:36:47,120 --> 00:36:53,830
about so it's it's hard to deploy like I

1102
00:36:51,290 --> 00:36:55,970
give you fair warning up front CSP is

1103
00:36:53,830 --> 00:36:58,279
not the easiest thing in the world to

1104
00:36:55,970 --> 00:37:00,259
get working but once you get it working

1105
00:36:58,280 --> 00:37:03,200
you have a huge level of kind of control

1106
00:37:00,260 --> 00:37:04,370
and protection there HP KP talk about

1107
00:37:03,200 --> 00:37:07,399
hard things to deploy I know I'm

1108
00:37:04,370 --> 00:37:09,890
familiar with HP KP now know so this

1109
00:37:07,400 --> 00:37:12,230
this has been deprecated in Chrome

1110
00:37:09,890 --> 00:37:13,730
already and probably before the end of

1111
00:37:12,230 --> 00:37:15,020
the year Firefox are actually very soon

1112
00:37:13,730 --> 00:37:17,630
I'm just going to delete this orange box

1113
00:37:15,020 --> 00:37:19,640
and have a space because it's just such

1114
00:37:17,630 --> 00:37:21,920
a powerful mechanism and it's so

1115
00:37:19,640 --> 00:37:23,779
complicated to deploy that people

1116
00:37:21,920 --> 00:37:26,060
deployed and got it wrong and actually

1117
00:37:23,780 --> 00:37:26,540
broke their website so HP KP allows you

1118
00:37:26,060 --> 00:37:28,400
to say

1119
00:37:26,540 --> 00:37:30,740
these are the encryption keys on my

1120
00:37:28,400 --> 00:37:32,210
server you take the hash with the public

1121
00:37:30,740 --> 00:37:34,250
key which is the one half of the key

1122
00:37:32,210 --> 00:37:35,840
pair and then you pin that into the

1123
00:37:34,250 --> 00:37:37,430
browser by sending it inside the

1124
00:37:35,840 --> 00:37:39,230
response header and then every single

1125
00:37:37,430 --> 00:37:41,029
time the browser comes back to your

1126
00:37:39,230 --> 00:37:42,620
website it expects the public key and

1127
00:37:41,030 --> 00:37:45,140
your certificate to hash to the same

1128
00:37:42,620 --> 00:37:46,549
value now it sounds really simple in

1129
00:37:45,140 --> 00:37:48,500
principle right looks like a two

1130
00:37:46,550 --> 00:37:50,210
sentences explanation of what entropy KP

1131
00:37:48,500 --> 00:37:52,040
is but it means that you have to be

1132
00:37:50,210 --> 00:37:54,200
super confident that you can maintain

1133
00:37:52,040 --> 00:37:55,790
those keys so you have to think about

1134
00:37:54,200 --> 00:37:57,140
your rotation strategy going forward so

1135
00:37:55,790 --> 00:37:59,450
it's like okay I'm using this key now

1136
00:37:57,140 --> 00:38:00,830
but I'm gonna use this key next month so

1137
00:37:59,450 --> 00:38:02,810
I need to send you the information about

1138
00:38:00,830 --> 00:38:04,850
this key now so that if you don't come

1139
00:38:02,810 --> 00:38:06,710
back until next month you know what my

1140
00:38:04,850 --> 00:38:08,420
rotation strategy and all kinds of

1141
00:38:06,710 --> 00:38:10,490
complex things from him and he turned

1142
00:38:08,420 --> 00:38:13,070
out that actually more people got HP KP

1143
00:38:10,490 --> 00:38:14,750
wrong the right so the browser's like

1144
00:38:13,070 --> 00:38:17,810
look this was a really good idea but

1145
00:38:14,750 --> 00:38:19,370
actually people aren't I don't know I

1146
00:38:17,810 --> 00:38:20,960
had honestly not equipped enough but

1147
00:38:19,370 --> 00:38:22,190
like people made too many mistakes and

1148
00:38:20,960 --> 00:38:23,600
it caused more harm than good so this is

1149
00:38:22,190 --> 00:38:25,880
actually being phased out of chrome

1150
00:38:23,600 --> 00:38:28,670
already and as I said it might be out of

1151
00:38:25,880 --> 00:38:30,050
Firefox before the end of the year then

1152
00:38:28,670 --> 00:38:32,660
in the top right here

1153
00:38:30,050 --> 00:38:34,130
certificate transparency this is a new

1154
00:38:32,660 --> 00:38:35,480
feature that's coming to the the

1155
00:38:34,130 --> 00:38:37,790
ecosystem more recent anyone familiar

1156
00:38:35,480 --> 00:38:40,010
with CT always interested oh that's

1157
00:38:37,790 --> 00:38:41,540
pretty good it's like one third of the

1158
00:38:40,010 --> 00:38:43,190
room and very my right we're the

1159
00:38:41,540 --> 00:38:45,080
security focus conference as well when I

1160
00:38:43,190 --> 00:38:46,640
do this in like more general development

1161
00:38:45,080 --> 00:38:49,610
or technical conferences is like three

1162
00:38:46,640 --> 00:38:53,990
people in a room this size Ct is hugely

1163
00:38:49,610 --> 00:38:57,050
powerful if you own a domain just got

1164
00:38:53,990 --> 00:38:59,330
home calm it exists but the chance that

1165
00:38:57,050 --> 00:39:00,680
I might not know about all the

1166
00:38:59,330 --> 00:39:02,210
certificates that have been issued to

1167
00:39:00,680 --> 00:39:03,560
that site let's say I mean he's Paul's

1168
00:39:02,210 --> 00:39:05,570
an example because he sat here Paul is

1169
00:39:03,560 --> 00:39:07,430
an evil person and he's gone to a CA and

1170
00:39:05,570 --> 00:39:10,460
he's like bribed them said I want a

1171
00:39:07,430 --> 00:39:11,480
certificate viscosity r--'s $10,000 he

1172
00:39:10,460 --> 00:39:14,600
gave me the certificate

1173
00:39:11,480 --> 00:39:15,950
we'll keep quiet Scott doesn't know if

1174
00:39:14,600 --> 00:39:18,020
Porter's in town and he's not going to

1175
00:39:15,950 --> 00:39:19,549
then he has a certificate for my site

1176
00:39:18,020 --> 00:39:22,070
meaning he can impersonate me he can

1177
00:39:19,550 --> 00:39:24,140
decrypt traffic to my site he can do all

1178
00:39:22,070 --> 00:39:25,940
these bad things and I literally have no

1179
00:39:24,140 --> 00:39:28,129
opportunity to find out what certificate

1180
00:39:25,940 --> 00:39:30,830
transparency fix this because you can go

1181
00:39:28,130 --> 00:39:33,890
to any one of multiple sites out there

1182
00:39:30,830 --> 00:39:36,710
that do CT monitoring and we now have a

1183
00:39:33,890 --> 00:39:39,920
public log of all certificates that have

1184
00:39:36,710 --> 00:39:40,590
been issued for sites out there so let's

1185
00:39:39,920 --> 00:39:42,390
take I always

1186
00:39:40,590 --> 00:39:44,670
just because it's super simple and easy

1187
00:39:42,390 --> 00:39:47,190
so if you're interested there is the

1188
00:39:44,670 --> 00:39:49,410
domain up there and you can literally

1189
00:39:47,190 --> 00:39:51,930
come here and say I want to see what's

1190
00:39:49,410 --> 00:39:56,370
the b-sides website is like UK like

1191
00:39:51,930 --> 00:39:59,220
b-sides where is it MCR dot org dot uk'

1192
00:39:56,370 --> 00:40:00,480
that was it so i can see a list of

1193
00:39:59,220 --> 00:40:02,759
certificates here that have been issued

1194
00:40:00,480 --> 00:40:04,710
for the domain name because they're all

1195
00:40:02,760 --> 00:40:07,320
required to be logged into these public

1196
00:40:04,710 --> 00:40:08,880
locks so when a CA issues is certificate

1197
00:40:07,320 --> 00:40:10,470
now they write an entry onto the log and

1198
00:40:08,880 --> 00:40:11,880
the log is publicly visible or we can

1199
00:40:10,470 --> 00:40:13,140
come and search them now you can

1200
00:40:11,880 --> 00:40:15,630
actually do any sign that you want so

1201
00:40:13,140 --> 00:40:17,220
that's B sides I can come here be like I

1202
00:40:15,630 --> 00:40:18,570
don't know you know BBC dope code at UK

1203
00:40:17,220 --> 00:40:20,879
let's have a look here are all the

1204
00:40:18,570 --> 00:40:22,440
certificates that contain BBC code at UK

1205
00:40:20,880 --> 00:40:24,630
in them the really cool thing that you

1206
00:40:22,440 --> 00:40:30,450
can do if you like wild card

1207
00:40:24,630 --> 00:40:32,520
bbc.co.uk/topgear certificate so we'll

1208
00:40:30,450 --> 00:40:34,560
give that a second you can look for just

1209
00:40:32,520 --> 00:40:36,570
two subjects next time run a smaller

1210
00:40:34,560 --> 00:40:38,700
query you can look for like just

1211
00:40:36,570 --> 00:40:40,050
subdomains of an organisation as well

1212
00:40:38,700 --> 00:40:41,939
and I already know there's loads of kind

1213
00:40:40,050 --> 00:40:44,040
of osing tools out there that you see t

1214
00:40:41,940 --> 00:40:45,990
logs to scrape these lists and look like

1215
00:40:44,040 --> 00:40:48,930
what subdomains does an organization

1216
00:40:45,990 --> 00:40:50,939
have because sometimes and I love this

1217
00:40:48,930 --> 00:40:53,759
now so these this is basically anything

1218
00:40:50,940 --> 00:40:56,190
BBC coding UK like squirrel straight

1219
00:40:53,760 --> 00:40:58,980
away no idea what's going on magpie and

1220
00:40:56,190 --> 00:41:03,720
aren't here working the BBC know we'll

1221
00:40:58,980 --> 00:41:06,720
keep digging you know it's like buzz CMS

1222
00:41:03,720 --> 00:41:08,609
at anytime I see like test or dev or

1223
00:41:06,720 --> 00:41:10,740
something in a subdomain like I found us

1224
00:41:08,610 --> 00:41:12,210
countless Jenkins environments just

1225
00:41:10,740 --> 00:41:14,459
exposed to the internet because there

1226
00:41:12,210 --> 00:41:15,960
I'm like dead company comm or some you

1227
00:41:14,460 --> 00:41:17,220
know like dev one two three four no one

1228
00:41:15,960 --> 00:41:19,320
will find this it's like pop sitting you

1229
00:41:17,220 --> 00:41:20,910
certificate so you just come through

1230
00:41:19,320 --> 00:41:22,640
here just like grab one and I'm just

1231
00:41:20,910 --> 00:41:25,890
like to see what it does

1232
00:41:22,640 --> 00:41:28,980
maybe we'll find like some account test

1233
00:41:25,890 --> 00:41:31,020
dot domain so you can come in here and

1234
00:41:28,980 --> 00:41:32,400
then find like really interesting stuff

1235
00:41:31,020 --> 00:41:34,490
about your isn't only giving that

1236
00:41:32,400 --> 00:41:36,369
company domain come on somebody brave

1237
00:41:34,490 --> 00:41:40,769
anyone

1238
00:41:36,369 --> 00:41:44,710
now no literally and everyone's like new

1239
00:41:40,769 --> 00:41:45,939
so this they say selfie certificate

1240
00:41:44,710 --> 00:41:48,130
transparency and the thing that the

1241
00:41:45,940 --> 00:41:49,960
browser can tell you here is that for a

1242
00:41:48,130 --> 00:41:51,460
a certificate to be what we call CT

1243
00:41:49,960 --> 00:41:53,859
qualified when a CA issues our

1244
00:41:51,460 --> 00:41:56,440
certificate it must go into at least two

1245
00:41:53,859 --> 00:41:57,729
of these independent logs so make sure

1246
00:41:56,440 --> 00:42:00,430
that there's at least two known

1247
00:41:57,729 --> 00:42:02,229
instances of it so we call that CT

1248
00:42:00,430 --> 00:42:03,759
qualification for a certificate to be CT

1249
00:42:02,229 --> 00:42:07,569
qualified it has to go into at least two

1250
00:42:03,759 --> 00:42:10,029
logs now the browser will know if it

1251
00:42:07,569 --> 00:42:11,799
hasn't so the browser will come to your

1252
00:42:10,029 --> 00:42:13,239
website and you're like hey like there's

1253
00:42:11,799 --> 00:42:14,739
no proof that this certificate has been

1254
00:42:13,239 --> 00:42:16,420
locked publicly it could be like some

1255
00:42:14,739 --> 00:42:18,369
secret backroom deal mat just been a

1256
00:42:16,420 --> 00:42:20,349
mistake whatever but it hasn't been

1257
00:42:18,369 --> 00:42:21,489
written into these logs and we don't

1258
00:42:20,349 --> 00:42:23,079
have any proof of that

1259
00:42:21,489 --> 00:42:24,700
so the browser will actually reject it

1260
00:42:23,079 --> 00:42:26,559
and say well look I don't know if this

1261
00:42:24,700 --> 00:42:30,218
is like some dodgy certificate so I'm

1262
00:42:26,559 --> 00:42:32,109
just not going to accept it so again you

1263
00:42:30,219 --> 00:42:34,960
can ask the browser and say look if you

1264
00:42:32,109 --> 00:42:36,369
come to my website and for some reason

1265
00:42:34,960 --> 00:42:38,829
you're going to reject my certificate

1266
00:42:36,369 --> 00:42:40,900
because it's not CT qualified tell me

1267
00:42:38,829 --> 00:42:42,369
about it and the browser will not only

1268
00:42:40,900 --> 00:42:43,420
tell you about it it will actually send

1269
00:42:42,369 --> 00:42:44,710
you a copy of the certificate as well

1270
00:42:43,420 --> 00:42:46,210
and say like hey we found this

1271
00:42:44,710 --> 00:42:48,729
certificate and we don't believe it CT

1272
00:42:46,210 --> 00:42:50,650
qualified because maybe there's only one

1273
00:42:48,729 --> 00:42:53,049
log entry or there's not or you know

1274
00:42:50,650 --> 00:42:55,989
whatever it is so again it's a scenario

1275
00:42:53,049 --> 00:42:57,460
when a user can come to your website and

1276
00:42:55,989 --> 00:42:59,440
hit some kind of security issue that

1277
00:42:57,460 --> 00:43:02,469
previously you wouldn't have had any

1278
00:42:59,440 --> 00:43:05,410
real hope of learning about down in the

1279
00:43:02,469 --> 00:43:07,269
bottom my future policy another powerful

1280
00:43:05,410 --> 00:43:09,129
control feature that you can have like

1281
00:43:07,269 --> 00:43:11,078
browsers nowadays they've got so many

1282
00:43:09,130 --> 00:43:13,359
api's that expose so much information we

1283
00:43:11,079 --> 00:43:15,400
talked about geolocation just a few

1284
00:43:13,359 --> 00:43:17,019
slides ago but you can access the camera

1285
00:43:15,400 --> 00:43:19,269
you can access the microphone you can

1286
00:43:17,019 --> 00:43:21,640
access local media like pictures videos

1287
00:43:19,269 --> 00:43:23,049
there's a whole heap of stuff that uses

1288
00:43:21,640 --> 00:43:26,969
an application in the browser can

1289
00:43:23,049 --> 00:43:28,900
request access to on the system and

1290
00:43:26,969 --> 00:43:30,549
unfortunately as those things become

1291
00:43:28,900 --> 00:43:32,349
available people start to abuse them so

1292
00:43:30,549 --> 00:43:34,390
feature policy allows you to control

1293
00:43:32,349 --> 00:43:36,339
them so for example on my website on my

1294
00:43:34,390 --> 00:43:38,440
blog I don't need access to your camera

1295
00:43:36,339 --> 00:43:39,489
or your geolocation or your microphone

1296
00:43:38,440 --> 00:43:42,069
or anything like this

1297
00:43:39,489 --> 00:43:43,779
so on my website I use feature policy to

1298
00:43:42,069 --> 00:43:45,999
disable those features when your browser

1299
00:43:43,779 --> 00:43:47,890
comes to my website I say to your

1300
00:43:45,999 --> 00:43:50,019
browser I don't need to access your

1301
00:43:47,890 --> 00:43:50,230
camera so under no circumstances like

1302
00:43:50,019 --> 00:43:52,299
that

1303
00:43:50,230 --> 00:43:53,980
be the case and the idea here is if you

1304
00:43:52,300 --> 00:43:55,210
start to include third-party content

1305
00:43:53,980 --> 00:43:57,070
this is when this becomes a bit dodgy

1306
00:43:55,210 --> 00:43:58,540
let's say you pull in some adverts from

1307
00:43:57,070 --> 00:44:00,340
a third-party provider it's just like

1308
00:43:58,540 --> 00:44:01,840
you know take all the random Java

1309
00:44:00,340 --> 00:44:03,550
scripts and put it in my page that

1310
00:44:01,840 --> 00:44:05,770
JavaScript might decide to do something

1311
00:44:03,550 --> 00:44:07,030
like access the microphone API and then

1312
00:44:05,770 --> 00:44:08,740
it will pop that little box at the top

1313
00:44:07,030 --> 00:44:10,510
which says you know like this website

1314
00:44:08,740 --> 00:44:12,580
wants to access your location or access

1315
00:44:10,510 --> 00:44:14,590
your microphone except I'm on your

1316
00:44:12,580 --> 00:44:16,270
website and your website is asking to

1317
00:44:14,590 --> 00:44:17,920
access my microphone and I'm like hey

1318
00:44:16,270 --> 00:44:20,080
why the hell are you trying to listen to

1319
00:44:17,920 --> 00:44:21,580
me so if you want to prevent things like

1320
00:44:20,080 --> 00:44:23,920
that from happening especially if you

1321
00:44:21,580 --> 00:44:25,420
load third-party content you can set a

1322
00:44:23,920 --> 00:44:26,800
feature policy to say look we don't use

1323
00:44:25,420 --> 00:44:28,960
the microphone so just like turn that

1324
00:44:26,800 --> 00:44:31,750
thing off and don't let anything access

1325
00:44:28,960 --> 00:44:33,700
it so a feature policy again super

1326
00:44:31,750 --> 00:44:37,330
powerful feature and again you can get

1327
00:44:33,700 --> 00:44:38,680
feedback from the browser XSS auditor so

1328
00:44:37,330 --> 00:44:40,180
I'm actually gonna have to delete this

1329
00:44:38,680 --> 00:44:42,520
one soon as well it's the middle column

1330
00:44:40,180 --> 00:44:44,410
actually I've just noticed because the

1331
00:44:42,520 --> 00:44:46,720
browser's have been abandoning the XSS

1332
00:44:44,410 --> 00:44:49,450
order - recently it was like a built-in

1333
00:44:46,720 --> 00:44:51,310
filter in chromium where you're doing

1334
00:44:49,450 --> 00:44:53,439
try and detect a cross-site scripting

1335
00:44:51,310 --> 00:44:55,390
attack so if the browser saw script in

1336
00:44:53,440 --> 00:44:57,460
like a get parameter like a query string

1337
00:44:55,390 --> 00:44:59,650
parameter and it saw a similar or the

1338
00:44:57,460 --> 00:45:00,880
same script in the page somewhere the

1339
00:44:59,650 --> 00:45:01,900
browser might look at those and think

1340
00:45:00,880 --> 00:45:03,340
hey this could be a reflecting

1341
00:45:01,900 --> 00:45:04,810
cross-site scripting attack and it would

1342
00:45:03,340 --> 00:45:06,460
either try and filter the script out of

1343
00:45:04,810 --> 00:45:07,690
the page all right some scenarios

1344
00:45:06,460 --> 00:45:09,640
depending on the settings it would just

1345
00:45:07,690 --> 00:45:11,470
outright refuse to render the page

1346
00:45:09,640 --> 00:45:13,029
because it's like I don't know you know

1347
00:45:11,470 --> 00:45:17,319
whether this is whether this is an

1348
00:45:13,030 --> 00:45:20,050
attack on art now the XSS auditor is

1349
00:45:17,320 --> 00:45:21,160
currently being deprecated in chrome I

1350
00:45:20,050 --> 00:45:23,050
don't know if they'll actually be gone

1351
00:45:21,160 --> 00:45:25,330
tomorrow to be gone what version of

1352
00:45:23,050 --> 00:45:28,480
stable chrome we're on right now no no I

1353
00:45:25,330 --> 00:45:31,270
75 serve a six so the auditor might

1354
00:45:28,480 --> 00:45:32,890
actually already be gone so it turned

1355
00:45:31,270 --> 00:45:36,220
out that this is a huge amount code to

1356
00:45:32,890 --> 00:45:38,560
maintain the auditor wasn't perfect it

1357
00:45:36,220 --> 00:45:41,020
could be tricked but when it did work

1358
00:45:38,560 --> 00:45:42,670
you could say to it look again if you if

1359
00:45:41,020 --> 00:45:44,770
you think there is an attack on my page

1360
00:45:42,670 --> 00:45:46,510
so much so that you're taking action and

1361
00:45:44,770 --> 00:45:48,490
refusing to render the page or you're

1362
00:45:46,510 --> 00:45:50,080
slicing content out of the page please

1363
00:45:48,490 --> 00:45:51,879
tell me and you can say to the order to

1364
00:45:50,080 --> 00:45:53,230
look if you do this

1365
00:45:51,880 --> 00:45:54,670
send me the payload the really cool

1366
00:45:53,230 --> 00:45:55,720
thing about the oil is two reports and

1367
00:45:54,670 --> 00:45:57,340
very amount we're still going to have

1368
00:45:55,720 --> 00:45:58,930
all versions who've all browsers around

1369
00:45:57,340 --> 00:46:00,640
for like ever so you'll still get these

1370
00:45:58,930 --> 00:46:02,770
reports is they actually send you the

1371
00:46:00,640 --> 00:46:04,210
attack payload so if someone is trying

1372
00:46:02,770 --> 00:46:05,770
to pop cross-site scripting on you

1373
00:46:04,210 --> 00:46:07,000
sigh and they're triggering the auditor

1374
00:46:05,770 --> 00:46:08,500
the auditor will send you the attack

1375
00:46:07,000 --> 00:46:10,270
payload so you actually get a copy of it

1376
00:46:08,500 --> 00:46:11,740
as well which is kind of nice I found

1377
00:46:10,270 --> 00:46:14,530
some very interesting things in my logs

1378
00:46:11,740 --> 00:46:19,598
with that in the past and then lasting

1379
00:46:14,530 --> 00:46:22,060
OCSP anyone familiar with OCSP apart

1380
00:46:19,599 --> 00:46:23,859
from the people that work at cas so the

1381
00:46:22,060 --> 00:46:25,660
online certificate status protocol is

1382
00:46:23,859 --> 00:46:29,740
when you get a certificate for your

1383
00:46:25,660 --> 00:46:31,868
website you may someday lose it so I may

1384
00:46:29,740 --> 00:46:33,310
steal your key from you you may be

1385
00:46:31,869 --> 00:46:35,260
compromised heartbleed version two might

1386
00:46:33,310 --> 00:46:37,470
come along and we have this thing called

1387
00:46:35,260 --> 00:46:41,260
OCSP which is like the most unreliable

1388
00:46:37,470 --> 00:46:43,419
mechanism we have but we had something

1389
00:46:41,260 --> 00:46:45,849
called OCSP stapling which was a really

1390
00:46:43,420 --> 00:46:47,380
good privacy and performance feature and

1391
00:46:45,849 --> 00:46:48,910
every website in the world should

1392
00:46:47,380 --> 00:46:50,050
support this so if you if you have a

1393
00:46:48,910 --> 00:46:52,629
certificate on your website which

1394
00:46:50,050 --> 00:46:54,520
hopefully it eats is 2019 then you

1395
00:46:52,630 --> 00:46:55,750
should have our CSP stapling enabled

1396
00:46:54,520 --> 00:46:58,480
because it will improve the performance

1397
00:46:55,750 --> 00:47:00,220
of your website and it will improve the

1398
00:46:58,480 --> 00:47:01,330
performance of the visitors coming to

1399
00:47:00,220 --> 00:47:02,560
your website if you're not familiar with

1400
00:47:01,330 --> 00:47:04,450
that again I've got a blog post that

1401
00:47:02,560 --> 00:47:05,890
explains all the details but the point

1402
00:47:04,450 --> 00:47:09,368
is you might have this feature turned on

1403
00:47:05,890 --> 00:47:11,400
on your website and say look we should

1404
00:47:09,369 --> 00:47:13,450
have this feature turned on but maybe

1405
00:47:11,400 --> 00:47:14,680
someone broke the configuration maybe

1406
00:47:13,450 --> 00:47:15,939
there's a problem on your server maybe

1407
00:47:14,680 --> 00:47:18,549
for some reason this feature isn't

1408
00:47:15,940 --> 00:47:20,290
working as intended again you can say to

1409
00:47:18,550 --> 00:47:21,580
the browser look when you come to my

1410
00:47:20,290 --> 00:47:23,980
website I should have this feature

1411
00:47:21,580 --> 00:47:25,119
turned on but if I'd um I would like you

1412
00:47:23,980 --> 00:47:26,650
to send me report and say hey I just

1413
00:47:25,119 --> 00:47:28,300
came to your website and for some reason

1414
00:47:26,650 --> 00:47:30,550
you didn't send me a no CSP staple

1415
00:47:28,300 --> 00:47:32,410
because something is broken turned off

1416
00:47:30,550 --> 00:47:34,119
someone flipped the wrong switch like I

1417
00:47:32,410 --> 00:47:36,190
don't know why but the point is it

1418
00:47:34,119 --> 00:47:40,270
stopped working and the client can get

1419
00:47:36,190 --> 00:47:41,410
in touch with you and tell you so those

1420
00:47:40,270 --> 00:47:43,150
things kind of like all of the main

1421
00:47:41,410 --> 00:47:44,319
things I want to spend we've got about

1422
00:47:43,150 --> 00:47:45,609
10 minutes left so I'm running pretty

1423
00:47:44,320 --> 00:47:47,740
much on time I just want to do a couple

1424
00:47:45,609 --> 00:47:49,029
more demos over a few of the features

1425
00:47:47,740 --> 00:47:51,040
that I've just talked about and then I

1426
00:47:49,030 --> 00:47:53,920
want to open it up to like a Q&A so

1427
00:47:51,040 --> 00:47:55,990
we're gonna try try and do some live

1428
00:47:53,920 --> 00:47:59,500
demos so I tested these about eight

1429
00:47:55,990 --> 00:48:01,089
times today and they all worked now what

1430
00:47:59,500 --> 00:48:04,900
we're going to take a look at close all

1431
00:48:01,089 --> 00:48:08,200
of these ones from earlier first of all

1432
00:48:04,900 --> 00:48:09,880
I want to try and trigger an L arrow so

1433
00:48:08,200 --> 00:48:11,830
we looked at now before Network error

1434
00:48:09,880 --> 00:48:12,960
logging and I said I gave the example of

1435
00:48:11,830 --> 00:48:17,140
the doesn't I exist

1436
00:48:12,960 --> 00:48:17,950
so does not exist that's got home code

1437
00:48:17,140 --> 00:48:20,859
at UK

1438
00:48:17,950 --> 00:48:22,598
we should get a nice dns era so if you

1439
00:48:20,859 --> 00:48:23,920
have a phone a tablet browser whatever

1440
00:48:22,599 --> 00:48:25,510
open up your device now because we're

1441
00:48:23,920 --> 00:48:27,190
all gonna do this all together and I

1442
00:48:25,510 --> 00:48:28,990
want you to just make first of all we

1443
00:48:27,190 --> 00:48:31,030
need to make a request to my site so go

1444
00:48:28,990 --> 00:48:33,009
to scott home docker at UK this is not

1445
00:48:31,030 --> 00:48:35,050
just the bump my visit account there's a

1446
00:48:33,010 --> 00:48:37,359
genuine reason because you need to go to

1447
00:48:35,050 --> 00:48:38,619
my website at least once to pick up

1448
00:48:37,359 --> 00:48:40,328
those headers that i just talked about

1449
00:48:38,619 --> 00:48:41,619
so when you go to my website you're

1450
00:48:40,329 --> 00:48:43,270
going to receive the report to header

1451
00:48:41,619 --> 00:48:44,680
which says please send the reports to

1452
00:48:43,270 --> 00:48:46,359
this location and you're going to

1453
00:48:44,680 --> 00:48:49,149
receive the nel header which says i

1454
00:48:46,359 --> 00:48:51,250
would like to get these error reports

1455
00:48:49,150 --> 00:48:53,470
i'll just zoom in sorry for people way

1456
00:48:51,250 --> 00:48:54,910
at the back there so the scott home doc

1457
00:48:53,470 --> 00:48:56,348
early UK when you visit that page that

1458
00:48:54,910 --> 00:48:58,299
will set those two policies in your

1459
00:48:56,349 --> 00:49:01,270
browser and say scott would like this

1460
00:48:58,300 --> 00:49:03,550
information once you've done that make

1461
00:49:01,270 --> 00:49:05,380
up a subdomain right just just pick

1462
00:49:03,550 --> 00:49:06,640
anything like please keep it clean I'm

1463
00:49:05,380 --> 00:49:09,400
gonna put these reports on the screen i

1464
00:49:06,640 --> 00:49:11,710
rephrase the keep i rephrase pick

1465
00:49:09,400 --> 00:49:13,450
anything pick something nice so you can

1466
00:49:11,710 --> 00:49:15,400
just do like you know wall what dot

1467
00:49:13,450 --> 00:49:17,950
scott how I'm coding okay and you should

1468
00:49:15,400 --> 00:49:19,020
get an error message like this and what

1469
00:49:17,950 --> 00:49:20,950
your browser will do in the background

1470
00:49:19,020 --> 00:49:22,240
assuming you're using at least the

1471
00:49:20,950 --> 00:49:24,250
recent itch browser which we should

1472
00:49:22,240 --> 00:49:26,049
because we're all security people then

1473
00:49:24,250 --> 00:49:27,310
your browser will send that report in

1474
00:49:26,050 --> 00:49:28,450
the background to me and what I'm going

1475
00:49:27,310 --> 00:49:29,650
to do like once I've done all these

1476
00:49:28,450 --> 00:49:30,700
demos I'm going to go look at them so

1477
00:49:29,650 --> 00:49:32,500
hopefully we'll have like a whole

1478
00:49:30,700 --> 00:49:34,750
collection of non rude words in

1479
00:49:32,500 --> 00:49:39,160
subdomains I've just realized how

1480
00:49:34,750 --> 00:49:41,050
terrible this one is oh crap so so

1481
00:49:39,160 --> 00:49:42,848
that's the first one so this should

1482
00:49:41,050 --> 00:49:45,130
trigger a whole heap and bunch of

1483
00:49:42,849 --> 00:49:46,359
reports from everyone in the room now

1484
00:49:45,130 --> 00:49:47,380
whilst they're all being sent and

1485
00:49:46,359 --> 00:49:48,880
everyone's kind of messing around with

1486
00:49:47,380 --> 00:49:50,859
this and it's not to show a couple more

1487
00:49:48,880 --> 00:49:52,510
bits as well so one of the things that I

1488
00:49:50,859 --> 00:49:54,190
want to show is CS because I do think

1489
00:49:52,510 --> 00:49:56,200
that this is actually a really powerful

1490
00:49:54,190 --> 00:49:59,650
mechanism that I know based on my own

1491
00:49:56,200 --> 00:50:01,569
data is very underutilized so on this

1492
00:49:59,650 --> 00:50:04,390
page here I'm just going to inspect the

1493
00:50:01,569 --> 00:50:06,520
source of this page and you can see I've

1494
00:50:04,390 --> 00:50:07,900
got this script tag here so that's just

1495
00:50:06,520 --> 00:50:10,270
the code view on the page but if I

1496
00:50:07,900 --> 00:50:12,790
actually come down here and I'll zoom in

1497
00:50:10,270 --> 00:50:14,410
for everyone you can see here in the

1498
00:50:12,790 --> 00:50:15,730
dharmic syntax highlighted this is an

1499
00:50:14,410 --> 00:50:17,529
actual script on the page also the page

1500
00:50:15,730 --> 00:50:19,030
is live so you can literally go to this

1501
00:50:17,530 --> 00:50:21,339
page and see that I'm not making this up

1502
00:50:19,030 --> 00:50:23,200
so there is a page then it's got a

1503
00:50:21,339 --> 00:50:25,630
script tag and it's loading from evil

1504
00:50:23,200 --> 00:50:26,980
comm slash keyloggers is now we always

1505
00:50:25,630 --> 00:50:28,810
people in this room can look at this and

1506
00:50:26,980 --> 00:50:30,830
be like dirt no one wants this to load

1507
00:50:28,810 --> 00:50:34,190
but the browser whacks that context

1508
00:50:30,830 --> 00:50:36,080
and know what evil.com means and what

1509
00:50:34,190 --> 00:50:37,520
key luggage is means it's like I just go

1510
00:50:36,080 --> 00:50:39,170
to the source attribute and fetch all of

1511
00:50:37,520 --> 00:50:42,320
the Java scripts and put them in the

1512
00:50:39,170 --> 00:50:44,810
page now because I have a content

1513
00:50:42,320 --> 00:50:45,950
security policy on my site if we take a

1514
00:50:44,810 --> 00:50:47,840
look down here you can see that I've

1515
00:50:45,950 --> 00:50:50,359
actually already got an error in the

1516
00:50:47,840 --> 00:50:52,880
console on this page so if I just click

1517
00:50:50,360 --> 00:50:55,070
over and take a look at that error you

1518
00:50:52,880 --> 00:50:58,220
can see that I have this particular

1519
00:50:55,070 --> 00:50:59,900
error message down here refused to load

1520
00:50:58,220 --> 00:51:01,160
the script because it violates the

1521
00:50:59,900 --> 00:51:03,440
following content security policy

1522
00:51:01,160 --> 00:51:05,180
directive script source and you can see

1523
00:51:03,440 --> 00:51:07,640
there that is the actual list of

1524
00:51:05,180 --> 00:51:09,230
locations that I expect my page to load

1525
00:51:07,640 --> 00:51:11,450
script from so I've got you know like

1526
00:51:09,230 --> 00:51:13,970
Twitter embeds YouTube but a Facebook

1527
00:51:11,450 --> 00:51:15,859
stuff I've got this ghost comment system

1528
00:51:13,970 --> 00:51:17,540
things like that but the point is that

1529
00:51:15,860 --> 00:51:20,480
evil comm is not one of the locations

1530
00:51:17,540 --> 00:51:22,009
that I expected to load JavaScript from

1531
00:51:20,480 --> 00:51:23,870
so the browser is seen the script tag

1532
00:51:22,010 --> 00:51:26,210
picked it out on the page tossed it away

1533
00:51:23,870 --> 00:51:28,520
and as we'll see in a minute sent a

1534
00:51:26,210 --> 00:51:30,920
report so it'll send me one of those

1535
00:51:28,520 --> 00:51:32,780
JSON reports that we talked about and

1536
00:51:30,920 --> 00:51:34,280
it's not just about fetching stuff you

1537
00:51:32,780 --> 00:51:36,380
know that you can control scripts styles

1538
00:51:34,280 --> 00:51:37,700
images where do I what we can't I refer

1539
00:51:36,380 --> 00:51:39,620
to as the fetch direct is where do I

1540
00:51:37,700 --> 00:51:42,950
fetch the from but what about where we

1541
00:51:39,620 --> 00:51:45,290
send stuff let's say this is the actual

1542
00:51:42,950 --> 00:51:46,759
login form for my site and again I'll

1543
00:51:45,290 --> 00:51:49,009
inspect the elements so we can see that

1544
00:51:46,760 --> 00:51:50,840
there's no funny business going on close

1545
00:51:49,010 --> 00:51:52,760
the console where are we so form action

1546
00:51:50,840 --> 00:51:54,980
just here so here is the form on the

1547
00:51:52,760 --> 00:51:56,990
page action evil com4 slash steal fast

1548
00:51:54,980 --> 00:51:59,540
we've got PHP because hackers right but

1549
00:51:56,990 --> 00:52:02,569
code this I'm a PHP developer I can say

1550
00:51:59,540 --> 00:52:04,550
that it's okay but I think we could all

1551
00:52:02,570 --> 00:52:06,020
agree that no matter how this form got

1552
00:52:04,550 --> 00:52:08,990
there maybe it's a disgruntled employee

1553
00:52:06,020 --> 00:52:10,550
or someone's found like a HTML injection

1554
00:52:08,990 --> 00:52:11,899
or whatever it might be we don't want

1555
00:52:10,550 --> 00:52:14,330
that form to submit if this is

1556
00:52:11,900 --> 00:52:18,250
especially if this is my login form so

1557
00:52:14,330 --> 00:52:23,720
I'm gonna put my username password in

1558
00:52:18,250 --> 00:52:25,550
I'm gonna hit the submit button nothing

1559
00:52:23,720 --> 00:52:28,520
happens but if we look at the error

1560
00:52:25,550 --> 00:52:29,870
count in the console it went up when I

1561
00:52:28,520 --> 00:52:31,550
hit the button if you were paying really

1562
00:52:29,870 --> 00:52:33,980
close attention and what I can do now

1563
00:52:31,550 --> 00:52:37,850
jump back over to the console take a

1564
00:52:33,980 --> 00:52:40,190
look down here refused to send form data

1565
00:52:37,850 --> 00:52:42,440
because it violates the following CSP

1566
00:52:40,190 --> 00:52:43,610
directive form action self and then

1567
00:52:42,440 --> 00:52:45,560
Twitter because you can tweet

1568
00:52:43,610 --> 00:52:47,390
my son so again I'm telling the browser

1569
00:52:45,560 --> 00:52:49,730
look when you come to my website I only

1570
00:52:47,390 --> 00:52:53,660
post forms to two locations and it's me

1571
00:52:49,730 --> 00:52:55,190
or Twitter evil calm is not on the list

1572
00:52:53,660 --> 00:52:55,730
so the browser said don't I'm not gonna

1573
00:52:55,190 --> 00:52:57,890
do that

1574
00:52:55,730 --> 00:53:02,300
toss that away send the report in the

1575
00:52:57,890 --> 00:53:03,890
background so there's a couple of things

1576
00:53:02,300 --> 00:53:05,150
on the CSP demo page you can go take a

1577
00:53:03,890 --> 00:53:06,830
look at those yourself or the last thing

1578
00:53:05,150 --> 00:53:08,150
that I want to look at and again like

1579
00:53:06,830 --> 00:53:10,040
before I go side on this for

1580
00:53:08,150 --> 00:53:11,810
transparency this is my website and by

1581
00:53:10,040 --> 00:53:13,310
my website I mean like this is a service

1582
00:53:11,810 --> 00:53:14,480
that I run and I want to be completely

1583
00:53:13,310 --> 00:53:16,160
open and transparent about this with

1584
00:53:14,480 --> 00:53:18,530
everyone because we are a commercial

1585
00:53:16,160 --> 00:53:20,899
service that does this so I've been so

1586
00:53:18,530 --> 00:53:23,090
heavily invested in this space for years

1587
00:53:20,900 --> 00:53:24,740
now no one was doing this and I'm like

1588
00:53:23,090 --> 00:53:26,420
if you want to collect these reports

1589
00:53:24,740 --> 00:53:28,129
like you have to go build your own thing

1590
00:53:26,420 --> 00:53:29,330
like you have to ingest the JSON and

1591
00:53:28,130 --> 00:53:31,340
process it and build the graphs and

1592
00:53:29,330 --> 00:53:33,740
whatever and I wanted to subscribe to

1593
00:53:31,340 --> 00:53:35,270
them myself and there was no service I'd

1594
00:53:33,740 --> 00:53:36,290
like hit Google couldn't find it in like

1595
00:53:35,270 --> 00:53:38,750
three minutes which means it doesn't

1596
00:53:36,290 --> 00:53:40,340
exist so I decided to build one so like

1597
00:53:38,750 --> 00:53:41,780
full transparency this is my website but

1598
00:53:40,340 --> 00:53:43,820
the point that I want to show you is

1599
00:53:41,780 --> 00:53:46,010
just like how easy it can be to do this

1600
00:53:43,820 --> 00:53:48,050
you could just whizz up and Alex acting

1601
00:53:46,010 --> 00:53:49,850
like AWS and shove all of the JSON in

1602
00:53:48,050 --> 00:53:51,380
there if you want to so these are all of

1603
00:53:49,850 --> 00:53:53,690
my actual live reports coming into my

1604
00:53:51,380 --> 00:53:55,640
account so first of all I want to see

1605
00:53:53,690 --> 00:53:57,190
this page let me just grab the path so

1606
00:53:55,640 --> 00:53:59,330
just gonna filter out all of the noise

1607
00:53:57,190 --> 00:54:00,670
so I can say right show me all of the

1608
00:53:59,330 --> 00:54:03,380
things that are happening on this page

1609
00:54:00,670 --> 00:54:05,660
now I've just done a very quick search

1610
00:54:03,380 --> 00:54:06,710
for Scott humbler cutter UK the pager we

1611
00:54:05,660 --> 00:54:08,480
were just looking at and you can see

1612
00:54:06,710 --> 00:54:10,220
that there's these two particular areas

1613
00:54:08,480 --> 00:54:12,050
they've happened one of them was a

1614
00:54:10,220 --> 00:54:13,399
script source element R so to zoom in

1615
00:54:12,050 --> 00:54:16,160
how's that for size everyone it's are

1616
00:54:13,400 --> 00:54:17,840
good enough so here you can see we had a

1617
00:54:16,160 --> 00:54:19,580
script source element and this is the

1618
00:54:17,840 --> 00:54:21,590
source attribute that was blocked here

1619
00:54:19,580 --> 00:54:23,420
we had a form action and this is the

1620
00:54:21,590 --> 00:54:26,510
form action that was blocked you can see

1621
00:54:23,420 --> 00:54:29,810
down there that the JSON payloads coming

1622
00:54:26,510 --> 00:54:31,490
through from the client so you know like

1623
00:54:29,810 --> 00:54:32,990
if you want to look at the raw JSON for

1624
00:54:31,490 --> 00:54:34,819
some reason like you can't do it all

1625
00:54:32,990 --> 00:54:36,439
there but you can go and dig into that

1626
00:54:34,820 --> 00:54:38,000
data as well and take a look at it and

1627
00:54:36,440 --> 00:54:39,130
all of that happened transparently in

1628
00:54:38,000 --> 00:54:41,420
the background like there's no

1629
00:54:39,130 --> 00:54:43,040
JavaScript library on that page I don't

1630
00:54:41,420 --> 00:54:44,930
have a browser extension or some agent

1631
00:54:43,040 --> 00:54:47,600
on my PC like all of this is done by

1632
00:54:44,930 --> 00:54:48,950
just setting those headers because all

1633
00:54:47,600 --> 00:54:50,810
the functionality itself is in the

1634
00:54:48,950 --> 00:54:52,759
browser and this is what I want to show

1635
00:54:50,810 --> 00:54:54,590
is how easy it is to leverage this stuff

1636
00:54:52,760 --> 00:54:57,260
so if I come down to like my nail

1637
00:54:54,590 --> 00:54:57,530
reports so let's see what now I Carol

1638
00:54:57,260 --> 00:54:59,990
logging

1639
00:54:57,530 --> 00:55:02,710
stuff I've got in the West how is this

1640
00:54:59,990 --> 00:55:04,910
we're looking about the last hour so

1641
00:55:02,710 --> 00:55:06,530
host name again let's just filter out

1642
00:55:04,910 --> 00:55:10,370
there's too much noise so I just want to

1643
00:55:06,530 --> 00:55:11,990
see the ones on my blog so here we can

1644
00:55:10,370 --> 00:55:14,290
see I mean I've got should probably look

1645
00:55:11,990 --> 00:55:16,669
at these I've got loads of abundant ones

1646
00:55:14,290 --> 00:55:17,240
HTTP error so Isis actually just look

1647
00:55:16,670 --> 00:55:20,780
good

1648
00:55:17,240 --> 00:55:33,080
see if we've got any DNS actually just

1649
00:55:20,780 --> 00:55:36,170
go straight to DNS so oops come on you

1650
00:55:33,080 --> 00:55:39,560
still yes Dylan give that a second to

1651
00:55:36,170 --> 00:55:41,810
load but again you can ingest these

1652
00:55:39,560 --> 00:55:43,850
yourselves like we do it loaded we did

1653
00:55:41,810 --> 00:55:45,650
have flight free account spot you can do

1654
00:55:43,850 --> 00:55:47,690
this stuff yourselves so easily

1655
00:55:45,650 --> 00:55:49,070
I just realized if everyone starts

1656
00:55:47,690 --> 00:55:51,710
laughing I'm gonna have to all f4

1657
00:55:49,070 --> 00:55:54,950
because there's like a rude weird name

1658
00:55:51,710 --> 00:55:57,380
in here somewhere but actually because

1659
00:55:54,950 --> 00:56:02,750
we all did subdomains let's have a look

1660
00:55:57,380 --> 00:56:04,610
at subdomains that's interesting did

1661
00:56:02,750 --> 00:56:13,100
anyone doing it someone must've done it

1662
00:56:04,610 --> 00:56:13,460
yeah let's have a look the moment of

1663
00:56:13,100 --> 00:56:16,610
truth

1664
00:56:13,460 --> 00:56:20,180
yeah and I saw it turned on quote to max

1665
00:56:16,610 --> 00:56:21,200
age so we have it like we bought for all

1666
00:56:20,180 --> 00:56:22,640
of our reports on the way in but I'm

1667
00:56:21,200 --> 00:56:24,290
pretty sure it's been 15 minutes since

1668
00:56:22,640 --> 00:56:27,680
we did it I'll refresh the page in a

1669
00:56:24,290 --> 00:56:29,870
minute but again the point is it's just

1670
00:56:27,680 --> 00:56:31,640
JSON sent in the background we've got

1671
00:56:29,870 --> 00:56:34,040
the expect CT worms that we just talked

1672
00:56:31,640 --> 00:56:35,330
about hopefully there's not only many of

1673
00:56:34,040 --> 00:56:36,860
these yet so that's good

1674
00:56:35,330 --> 00:56:38,360
a lot of these you don't want reports

1675
00:56:36,860 --> 00:56:40,130
remember like this is kind of the point

1676
00:56:38,360 --> 00:56:42,740
right you just like you only hear about

1677
00:56:40,130 --> 00:56:44,120
things that go wrong so you know if

1678
00:56:42,740 --> 00:56:46,759
you've I came on here the other day and

1679
00:56:44,120 --> 00:56:48,620
I deployed a change I'd forgot to add a

1680
00:56:46,760 --> 00:56:49,970
new piece of CSS that we were loading in

1681
00:56:48,620 --> 00:56:53,230
through a third party and we just had

1682
00:56:49,970 --> 00:56:54,859
like this massive spike so you can get

1683
00:56:53,230 --> 00:56:56,390
you know you don't even have to like

1684
00:56:54,860 --> 00:56:57,590
monitor the reports necessarily you can

1685
00:56:56,390 --> 00:56:59,060
just look for the trends right it's like

1686
00:56:57,590 --> 00:57:01,070
hey we've had a sudden surge of reports

1687
00:56:59,060 --> 00:57:04,250
today that in itself can be the trigger

1688
00:57:01,070 --> 00:57:05,870
of what you need to go look at so I'm

1689
00:57:04,250 --> 00:57:07,310
going to keep that and I'm gonna keep

1690
00:57:05,870 --> 00:57:08,839
our page open I'm gonna rerun that Nell

1691
00:57:07,310 --> 00:57:10,730
query in just a second but I do only

1692
00:57:08,840 --> 00:57:11,360
have a few minutes left and I did not

1693
00:57:10,730 --> 00:57:13,370
open this up

1694
00:57:11,360 --> 00:57:18,500
some Q&A as well so I don't want to burn

1695
00:57:13,370 --> 00:57:28,520
all of my time um so first of all okay

1696
00:57:18,500 --> 00:57:30,200
yep okay yes so the the sampling

1697
00:57:28,520 --> 00:57:31,790
fraction was part of the response header

1698
00:57:30,200 --> 00:57:33,859
so the question now is how D basically

1699
00:57:31,790 --> 00:57:35,180
how do you set the sampling fraction so

1700
00:57:33,860 --> 00:57:37,310
the website I'm using here is security

1701
00:57:35,180 --> 00:57:39,680
headers it just scans the HTTP response

1702
00:57:37,310 --> 00:57:41,299
headers of a website so you can come

1703
00:57:39,680 --> 00:57:44,290
down here and see these are all my raw

1704
00:57:41,300 --> 00:57:46,490
response headers and if I look at my

1705
00:57:44,290 --> 00:57:49,279
reports who had it and I'll zoom in

1706
00:57:46,490 --> 00:57:50,149
sorry sighs you can see here is my

1707
00:57:49,280 --> 00:57:52,970
report two header

1708
00:57:50,150 --> 00:57:55,400
I've got like group max age endpoints

1709
00:57:52,970 --> 00:57:56,870
etc but I don't set it on my blog

1710
00:57:55,400 --> 00:58:00,950
because I take a hundred percent of

1711
00:57:56,870 --> 00:58:02,569
reports but I do set it on here so you

1712
00:58:00,950 --> 00:58:02,870
literally just put the value into the

1713
00:58:02,570 --> 00:58:06,470
header

1714
00:58:02,870 --> 00:58:08,900
I think we're taking like one where is

1715
00:58:06,470 --> 00:58:10,100
it report to I know we don't so we're

1716
00:58:08,900 --> 00:58:12,560
taking a hundred percent there as well

1717
00:58:10,100 --> 00:58:15,020
Wow but yeah it would just go in there

1718
00:58:12,560 --> 00:58:16,640
but we tweak this around and if you get

1719
00:58:15,020 --> 00:58:20,300
sudden influx of reports you can just

1720
00:58:16,640 --> 00:58:23,339
like go jump on in and say drop 99% them

1721
00:58:20,300 --> 00:58:23,339
[Music]

1722
00:58:26,530 --> 00:58:39,620
when you say respond sorry just so if

1723
00:58:37,190 --> 00:58:41,090
you have a script tag and like a new

1724
00:58:39,620 --> 00:58:43,160
block origin new to it

1725
00:58:41,090 --> 00:58:45,050
no you wouldn't get a report for that

1726
00:58:43,160 --> 00:58:46,819
because nothing actually loaded

1727
00:58:45,050 --> 00:58:49,190
therefore like nothing would be blocked

1728
00:58:46,820 --> 00:58:51,800
kind of thing so yeah there is a lot of

1729
00:58:49,190 --> 00:58:53,360
interaction between CSP and browser

1730
00:58:51,800 --> 00:58:55,070
extensions the problem is not browser

1731
00:58:53,360 --> 00:58:57,080
extensions removing stuff the problem is

1732
00:58:55,070 --> 00:58:58,370
browser extensions adding stuff so if

1733
00:58:57,080 --> 00:58:59,480
you have a CSP on your site and a

1734
00:58:58,370 --> 00:59:00,470
browser extension comes along and says

1735
00:58:59,480 --> 00:59:02,600
hey we're gonna shove all of these

1736
00:59:00,470 --> 00:59:04,970
script tags in the page no you're gonna

1737
00:59:02,600 --> 00:59:06,980
trigger some CSP errors the the

1738
00:59:04,970 --> 00:59:09,410
interesting thing about report your I

1739
00:59:06,980 --> 00:59:11,240
because we collect for many people we

1740
00:59:09,410 --> 00:59:13,339
can kind of see these like sudden spikes

1741
00:59:11,240 --> 00:59:15,020
when some browser extension goes rogue

1742
00:59:13,340 --> 00:59:17,060
and hostile and they start injecting

1743
00:59:15,020 --> 00:59:20,270
like ads or key loggers or things into

1744
00:59:17,060 --> 00:59:22,279
pages so yeah usually the problem is

1745
00:59:20,270 --> 00:59:24,740
extensions adding stuff not removing

1746
00:59:22,280 --> 00:59:26,930
stuff sorry Scott we're gonna have to

1747
00:59:24,740 --> 00:59:28,129
cut off their just lead oh yeah that's

1748
00:59:26,930 --> 00:59:29,779
that's an hour

1749
00:59:28,130 --> 00:59:33,320
Scott's gonna be hanging around right

1750
00:59:29,780 --> 00:59:35,180
sure my time I can't time because it

1751
00:59:33,320 --> 00:59:37,369
says one minute nine so no account and

1752
00:59:35,180 --> 00:59:39,940
everyone give it up for the beautiful

1753
00:59:37,369 --> 00:59:39,940
Scott hell

