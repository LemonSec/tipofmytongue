1
00:00:01,439 --> 00:00:06,399
um

2
00:00:03,520 --> 00:00:08,880
my talk is going to be over uh there's

3
00:00:06,399 --> 00:00:11,679
no place like a dual home

4
00:00:08,880 --> 00:00:13,040
um i want to thank everybody for

5
00:00:11,679 --> 00:00:17,920
attending

6
00:00:13,040 --> 00:00:17,919
and watching

7
00:00:18,000 --> 00:00:25,039
so first off who is david e young jr

8
00:00:21,520 --> 00:00:27,439
well i've worked in the it industry for

9
00:00:25,039 --> 00:00:28,880
approximately 23 years last 10 11 years

10
00:00:27,439 --> 00:00:31,198
in the security industry

11
00:00:28,880 --> 00:00:31,919
i have now worked in healthcare

12
00:00:31,199 --> 00:00:36,640
government

13
00:00:31,920 --> 00:00:39,600
financial and utility industries uh

14
00:00:36,640 --> 00:00:40,239
i'm a very amateur lock picker avid

15
00:00:39,600 --> 00:00:43,440
gamer

16
00:00:40,239 --> 00:00:44,559
pc master race i like nerd car rap and

17
00:00:43,440 --> 00:00:48,559
dubstep

18
00:00:44,559 --> 00:00:48,559
and i'm into anime and gundam models

19
00:00:48,960 --> 00:00:54,640
so first off before we get into this

20
00:00:51,680 --> 00:00:57,920
talk we of course have to give the

21
00:00:54,640 --> 00:01:00,160
disclaimer i'm going to read this i do

22
00:00:57,920 --> 00:01:02,239
apologize for reading it directly

23
00:01:00,160 --> 00:01:03,839
the views opinions and research

24
00:01:02,239 --> 00:01:05,280
expressed in this presentation are those

25
00:01:03,840 --> 00:01:07,680
of the researcher

26
00:01:05,280 --> 00:01:08,799
and do not represent any current or past

27
00:01:07,680 --> 00:01:10,479
employers

28
00:01:08,799 --> 00:01:12,400
all questions and concerns regarding

29
00:01:10,479 --> 00:01:14,799
this research should be forwarded

30
00:01:12,400 --> 00:01:17,600
to the researcher for comment and

31
00:01:14,799 --> 00:01:17,600
consideration

32
00:01:18,880 --> 00:01:22,399
so what are we going to talk about today

33
00:01:20,880 --> 00:01:23,439
well we're going to discuss a little bit

34
00:01:22,400 --> 00:01:26,400
about

35
00:01:23,439 --> 00:01:28,639
what the standard definition of a dual

36
00:01:26,400 --> 00:01:32,479
home system is

37
00:01:28,640 --> 00:01:36,079
why people would use a dual home system

38
00:01:32,479 --> 00:01:38,079
um talk a little bit more on

39
00:01:36,079 --> 00:01:40,000
but wait there's more going deeper that

40
00:01:38,079 --> 00:01:43,279
i discovered in mine

41
00:01:40,000 --> 00:01:45,119
a little bit of a demo video that i have

42
00:01:43,280 --> 00:01:47,200
and then discuss how to prevent this

43
00:01:45,119 --> 00:01:50,720
from happening on your network

44
00:01:47,200 --> 00:01:52,640
um now the questions because of the way

45
00:01:50,720 --> 00:01:54,000
besides columbus is doing the

46
00:01:52,640 --> 00:01:57,520
presentation format

47
00:01:54,000 --> 00:01:59,280
questions will of course be available in

48
00:01:57,520 --> 00:02:02,079
the

49
00:01:59,280 --> 00:02:03,439
chat afterwards and i will make sure to

50
00:02:02,079 --> 00:02:06,320
make myself available to answer any

51
00:02:03,439 --> 00:02:06,320
questions that time

52
00:02:07,200 --> 00:02:12,160
so let's go over a dual home system

53
00:02:10,639 --> 00:02:14,160
so the standard definition of a dual

54
00:02:12,160 --> 00:02:17,359
home system is

55
00:02:14,160 --> 00:02:20,879
more than one network interface

56
00:02:17,360 --> 00:02:22,160
now generally this was put in equipment

57
00:02:20,879 --> 00:02:24,799
for redundancy

58
00:02:22,160 --> 00:02:25,920
you'd see server class a lot of network

59
00:02:24,800 --> 00:02:28,400
type equipment

60
00:02:25,920 --> 00:02:29,839
would have dual interfaces so that if

61
00:02:28,400 --> 00:02:31,840
something happened

62
00:02:29,840 --> 00:02:33,360
to the one interface you could easily be

63
00:02:31,840 --> 00:02:35,440
back up and running quickly on the

64
00:02:33,360 --> 00:02:38,560
second interface

65
00:02:35,440 --> 00:02:39,680
um now what's interesting with windows

66
00:02:38,560 --> 00:02:43,120
and the windows os

67
00:02:39,680 --> 00:02:45,440
when you put two network interfaces in

68
00:02:43,120 --> 00:02:47,040
you can then set them up on different

69
00:02:45,440 --> 00:02:48,959
subnets so you essentially you can

70
00:02:47,040 --> 00:02:52,720
create

71
00:02:48,959 --> 00:02:56,000
uh a a kind of a homemade os based

72
00:02:52,720 --> 00:02:59,359
router or or hidden network

73
00:02:56,000 --> 00:03:01,200
behind that second interface

74
00:02:59,360 --> 00:03:03,680
and this is a little graphic that kind

75
00:03:01,200 --> 00:03:04,000
of exemplifies this now what was kind of

76
00:03:03,680 --> 00:03:07,599
funny

77
00:03:04,000 --> 00:03:10,000
was way back in the i 386 days and yes

78
00:03:07,599 --> 00:03:12,560
i'm dating myself a little bit there

79
00:03:10,000 --> 00:03:13,599
i had cable modem and then i had an old

80
00:03:12,560 --> 00:03:16,800
system

81
00:03:13,599 --> 00:03:18,238
that had two network interfaces

82
00:03:16,800 --> 00:03:20,480
and it really didn't have the router but

83
00:03:18,239 --> 00:03:22,800
it was a dual home system

84
00:03:20,480 --> 00:03:25,599
where i used internet connection sharing

85
00:03:22,800 --> 00:03:28,159
back in the windows 95 98 days

86
00:03:25,599 --> 00:03:30,560
and i bridged those across so that i

87
00:03:28,159 --> 00:03:34,239
could have multiple systems behind a

88
00:03:30,560 --> 00:03:36,239
small hub connected into that one

89
00:03:34,239 --> 00:03:39,200
so that they all got internet and had

90
00:03:36,239 --> 00:03:39,200
internet access

91
00:03:39,760 --> 00:03:43,200
well why would you use a dual home

92
00:03:41,519 --> 00:03:46,319
system you know

93
00:03:43,200 --> 00:03:49,839
but why and i wondered this too

94
00:03:46,319 --> 00:03:51,359
so before we de dive into this a little

95
00:03:49,840 --> 00:03:53,439
bit more

96
00:03:51,360 --> 00:03:56,720
i'm going to give you a little bit of a

97
00:03:53,439 --> 00:03:59,680
story so we're on an assessment

98
00:03:56,720 --> 00:04:01,200
now this assessment is we already kind

99
00:03:59,680 --> 00:04:04,080
of know the network

100
00:04:01,200 --> 00:04:05,599
uh we work for the company uh we're

101
00:04:04,080 --> 00:04:07,280
provided with all the information we

102
00:04:05,599 --> 00:04:08,879
know kind of the ins and outs of the

103
00:04:07,280 --> 00:04:11,040
network at that time

104
00:04:08,879 --> 00:04:13,200
we're told at one point that they do

105
00:04:11,040 --> 00:04:15,200
have a lab environment

106
00:04:13,200 --> 00:04:16,880
and they were told us that even if you

107
00:04:15,200 --> 00:04:18,000
find it you'll never get into that lab

108
00:04:16,880 --> 00:04:20,159
environment

109
00:04:18,000 --> 00:04:21,918
well that was kind of mistake number one

110
00:04:20,160 --> 00:04:23,360
never challenge someone

111
00:04:21,918 --> 00:04:24,880
going on an assessment because they will

112
00:04:23,360 --> 00:04:26,960
do everything they can to figure out how

113
00:04:24,880 --> 00:04:28,960
to get in there

114
00:04:26,960 --> 00:04:30,719
so based on this information and we kind

115
00:04:28,960 --> 00:04:34,159
of knew where it was we kind of went

116
00:04:30,720 --> 00:04:35,520
looking for it so let's kind of go over

117
00:04:34,160 --> 00:04:38,560
why you use a dual

118
00:04:35,520 --> 00:04:41,039
home system now

119
00:04:38,560 --> 00:04:42,080
in like the previous slide its original

120
00:04:41,040 --> 00:04:45,360
concept and thought

121
00:04:42,080 --> 00:04:47,919
pattern was to be used for

122
00:04:45,360 --> 00:04:48,880
network redundancy that was the original

123
00:04:47,919 --> 00:04:51,039
thought

124
00:04:48,880 --> 00:04:52,479
on a windows system though you can set

125
00:04:51,040 --> 00:04:54,240
the second interface

126
00:04:52,479 --> 00:04:55,680
to a different subnet so this helps

127
00:04:54,240 --> 00:04:59,120
create a whole

128
00:04:55,680 --> 00:05:01,680
different network within a network

129
00:04:59,120 --> 00:05:03,520
per se if you want to do that now

130
00:05:01,680 --> 00:05:05,600
sometimes

131
00:05:03,520 --> 00:05:07,599
if you're using a legitimate use that

132
00:05:05,600 --> 00:05:09,280
other subnet could be

133
00:05:07,600 --> 00:05:11,440
a backup network or something like that

134
00:05:09,280 --> 00:05:14,400
where you're pulling backups onto that

135
00:05:11,440 --> 00:05:15,680
or even remote management ilos are are

136
00:05:14,400 --> 00:05:17,280
known for that that's more at the

137
00:05:15,680 --> 00:05:18,960
hardware level though not at the os

138
00:05:17,280 --> 00:05:21,440
level of course

139
00:05:18,960 --> 00:05:22,239
so with this network second network

140
00:05:21,440 --> 00:05:25,440
interface

141
00:05:22,240 --> 00:05:27,360
you can then have a lab a dev

142
00:05:25,440 --> 00:05:29,600
a test environment without the

143
00:05:27,360 --> 00:05:32,639
additional cost of network hardware

144
00:05:29,600 --> 00:05:35,440
you don't have to buy you know a switch

145
00:05:32,639 --> 00:05:36,160
and get it plugged in and go through all

146
00:05:35,440 --> 00:05:38,479
the

147
00:05:36,160 --> 00:05:39,280
processes within the company of first

148
00:05:38,479 --> 00:05:41,039
figuring out

149
00:05:39,280 --> 00:05:43,119
you know how are you going to purchase

150
00:05:41,039 --> 00:05:44,800
it where does the money come from

151
00:05:43,120 --> 00:05:47,520
then of course the process of getting it

152
00:05:44,800 --> 00:05:49,120
approved then once it's purchased uh of

153
00:05:47,520 --> 00:05:51,359
course then you've got to work with your

154
00:05:49,120 --> 00:05:53,680
your it our networking staff to get it

155
00:05:51,360 --> 00:05:57,039
installed to get it configured

156
00:05:53,680 --> 00:05:59,039
that type of thing and generally

157
00:05:57,039 --> 00:06:00,639
no offense to those departments they're

158
00:05:59,039 --> 00:06:02,880
all busy everybody's you know

159
00:06:00,639 --> 00:06:03,919
extremely busy doing everything they can

160
00:06:02,880 --> 00:06:05,759
to do what they can

161
00:06:03,919 --> 00:06:08,400
and sometimes these things fall on the

162
00:06:05,759 --> 00:06:10,000
wayside because they're not a priority

163
00:06:08,400 --> 00:06:12,000
in order to maintain the network and

164
00:06:10,000 --> 00:06:13,919
keep the company running

165
00:06:12,000 --> 00:06:15,600
and i'm i'm not faulting any companies

166
00:06:13,919 --> 00:06:17,520
i've worked uh in i.t

167
00:06:15,600 --> 00:06:19,120
and all aspects of iit and i know what

168
00:06:17,520 --> 00:06:22,159
it's like to be there

169
00:06:19,120 --> 00:06:25,520
but sometimes these processes is what

170
00:06:22,160 --> 00:06:27,840
create these problems in the first place

171
00:06:25,520 --> 00:06:30,000
so how do you discover a dual home

172
00:06:27,840 --> 00:06:32,799
system well

173
00:06:30,000 --> 00:06:33,280
first off during your normal recon say

174
00:06:32,800 --> 00:06:37,039
you

175
00:06:33,280 --> 00:06:39,758
are able to get onto a

176
00:06:37,039 --> 00:06:41,360
system uh primarily as this is showing

177
00:06:39,759 --> 00:06:43,199
it's a window system and we were using

178
00:06:41,360 --> 00:06:44,160
cobalt strikes so as you can see this is

179
00:06:43,199 --> 00:06:47,280
a beacon

180
00:06:44,160 --> 00:06:49,759
and i run the ipconfig on this now

181
00:06:47,280 --> 00:06:51,119
what's interesting is i see okay well

182
00:06:49,759 --> 00:06:52,479
there's a one nine two one six eight

183
00:06:51,120 --> 00:06:55,599
twenty dot ten

184
00:06:52,479 --> 00:06:57,520
that's we'll say is these uh

185
00:06:55,599 --> 00:06:59,199
expected network but then we see a

186
00:06:57,520 --> 00:07:00,080
second network interface on there and

187
00:06:59,199 --> 00:07:02,800
i'm like

188
00:07:00,080 --> 00:07:04,159
well what is this 10 10 50 network what

189
00:07:02,800 --> 00:07:07,520
what is there

190
00:07:04,160 --> 00:07:11,280
and okay so we have two

191
00:07:07,520 --> 00:07:13,680
different ip addresses and 10 1050

192
00:07:11,280 --> 00:07:15,758
according to all our documentation

193
00:07:13,680 --> 00:07:16,880
wasn't supposed to be any aspect of that

194
00:07:15,759 --> 00:07:20,560
network or anywhere

195
00:07:16,880 --> 00:07:22,800
on that network so then

196
00:07:20,560 --> 00:07:24,639
you know in the thinking is okay well

197
00:07:22,800 --> 00:07:27,199
they have

198
00:07:24,639 --> 00:07:28,160
a hidden network and i'm going to air

199
00:07:27,199 --> 00:07:30,720
quote that

200
00:07:28,160 --> 00:07:32,240
in a sense that they had a network that

201
00:07:30,720 --> 00:07:33,759
nobody else knew about that they had

202
00:07:32,240 --> 00:07:36,560
created kind of on their own

203
00:07:33,759 --> 00:07:38,000
by just throwing in a seven to ten

204
00:07:36,560 --> 00:07:42,479
dollar network card

205
00:07:38,000 --> 00:07:42,479
uh into uh the system

206
00:07:42,840 --> 00:07:47,758
so now you see

207
00:07:45,520 --> 00:07:49,039
you've compromised the dual home system

208
00:07:47,759 --> 00:07:51,440
what is the new network

209
00:07:49,039 --> 00:07:53,360
you see a second adapter is there

210
00:07:51,440 --> 00:07:56,400
anything behind it

211
00:07:53,360 --> 00:07:57,199
now there are various methods uh to use

212
00:07:56,400 --> 00:07:59,280
the initial

213
00:07:57,199 --> 00:08:01,520
device as a pivot uh the most common one

214
00:07:59,280 --> 00:08:05,039
is to set up a proxy through it

215
00:08:01,520 --> 00:08:06,960
uh or there or

216
00:08:05,039 --> 00:08:08,318
other tools where you can install some

217
00:08:06,960 --> 00:08:09,840
of the tools on the compromise system

218
00:08:08,319 --> 00:08:12,879
and scan behind it

219
00:08:09,840 --> 00:08:13,440
now installing tools can unfortunately

220
00:08:12,879 --> 00:08:16,240
trigger

221
00:08:13,440 --> 00:08:17,759
you know their av their ids ips can

222
00:08:16,240 --> 00:08:18,879
trigger all kind of alerts and let them

223
00:08:17,759 --> 00:08:20,720
know that you're there

224
00:08:18,879 --> 00:08:22,319
if you're trying to be a bit stealthy

225
00:08:20,720 --> 00:08:23,280
you kind of want to avoid that you might

226
00:08:22,319 --> 00:08:26,080
want to make sure you

227
00:08:23,280 --> 00:08:27,359
you live off the lan as they say and use

228
00:08:26,080 --> 00:08:28,800
some of the built-in tools within

229
00:08:27,360 --> 00:08:31,360
windows if you can

230
00:08:28,800 --> 00:08:32,240
in order to keep from being detected now

231
00:08:31,360 --> 00:08:34,800
obviously if

232
00:08:32,240 --> 00:08:36,399
you're already compromised the system

233
00:08:34,799 --> 00:08:37,760
theoretically should be detected but a

234
00:08:36,399 --> 00:08:39,599
lot of times you're not

235
00:08:37,760 --> 00:08:42,880
and then there's this thing called smb

236
00:08:39,599 --> 00:08:44,320
name pipe which you can use

237
00:08:42,880 --> 00:08:47,279
now you can use the initial target as a

238
00:08:44,320 --> 00:08:50,640
pivot to perform a quick ping sweep

239
00:08:47,279 --> 00:08:52,320
another good one is arp dash a

240
00:08:50,640 --> 00:08:54,560
this kind of shows you the arp tables

241
00:08:52,320 --> 00:08:57,839
and kind of reveals to you

242
00:08:54,560 --> 00:08:59,119
all the other systems that this target

243
00:08:57,839 --> 00:09:02,480
that you're on

244
00:08:59,120 --> 00:09:02,480
has already talked with

245
00:09:05,360 --> 00:09:10,160
so here's a quick screenshot uh once

246
00:09:07,920 --> 00:09:13,519
we're on that system we do

247
00:09:10,160 --> 00:09:17,120
uh run the shell run at arp dash a

248
00:09:13,519 --> 00:09:19,600
i can see the interface 192.168.20.10

249
00:09:17,120 --> 00:09:20,959
it's talked to different addresses on

250
00:09:19,600 --> 00:09:26,000
the 192.168

251
00:09:20,959 --> 00:09:29,199
area okay then i see um

252
00:09:26,000 --> 00:09:30,399
looking at the 1010.5 interface and i

253
00:09:29,200 --> 00:09:33,600
says i'm like well

254
00:09:30,399 --> 00:09:37,040
wait a minute it's talked to a

255
00:09:33,600 --> 00:09:39,760
1010 50.10 so it has

256
00:09:37,040 --> 00:09:40,719
talked to other devices on that other

257
00:09:39,760 --> 00:09:42,959
side

258
00:09:40,720 --> 00:09:45,279
of that interface well that proved to be

259
00:09:42,959 --> 00:09:48,640
very interesting

260
00:09:45,279 --> 00:09:50,880
so how can you get

261
00:09:48,640 --> 00:09:54,160
the systems behind the dual home one

262
00:09:50,880 --> 00:09:55,680
that you've initially compromised

263
00:09:54,160 --> 00:09:58,079
how can you get to those other systems

264
00:09:55,680 --> 00:10:01,599
behind there now like i said you can

265
00:09:58,080 --> 00:10:03,680
use a proxy pivot

266
00:10:01,600 --> 00:10:04,720
now in my experience of using a proxy

267
00:10:03,680 --> 00:10:07,439
pivot

268
00:10:04,720 --> 00:10:09,200
whilst effective they the technique can

269
00:10:07,440 --> 00:10:12,480
be very slow

270
00:10:09,200 --> 00:10:13,040
and i seem to have or i personally have

271
00:10:12,480 --> 00:10:15,360
had

272
00:10:13,040 --> 00:10:17,439
issues with not you can't get all the

273
00:10:15,360 --> 00:10:20,160
tools you might want to use

274
00:10:17,440 --> 00:10:21,680
to work through that proxy pivot so

275
00:10:20,160 --> 00:10:23,439
there have been some

276
00:10:21,680 --> 00:10:25,519
issues with that now after a little bit

277
00:10:23,440 --> 00:10:27,760
of research and

278
00:10:25,519 --> 00:10:29,040
working with one of my co-workers we

279
00:10:27,760 --> 00:10:30,800
found that cobalt strike can do

280
00:10:29,040 --> 00:10:33,120
something called an s b named pipe and

281
00:10:30,800 --> 00:10:36,240
we said well

282
00:10:33,120 --> 00:10:38,000
can we use this can we use this smb

283
00:10:36,240 --> 00:10:40,720
named pipe in order to tunnel through

284
00:10:38,000 --> 00:10:45,200
from one interface to the other

285
00:10:40,720 --> 00:10:48,160
into that further network so

286
00:10:45,200 --> 00:10:48,720
this is the route we decided to go with

287
00:10:48,160 --> 00:10:52,079
um

288
00:10:48,720 --> 00:10:54,800
so what is an smb name pipe so

289
00:10:52,079 --> 00:10:56,959
name pipes are like open tcp ports where

290
00:10:54,800 --> 00:11:00,000
the client can connect to a server

291
00:10:56,959 --> 00:11:00,959
listening to a given port a process is

292
00:11:00,000 --> 00:11:02,880
registered

293
00:11:00,959 --> 00:11:05,040
and then the name pipe and connections

294
00:11:02,880 --> 00:11:06,959
to that smb to the endpoint are sent to

295
00:11:05,040 --> 00:11:09,360
this process

296
00:11:06,959 --> 00:11:10,000
so another good reason to use s p name

297
00:11:09,360 --> 00:11:12,240
pipe is

298
00:11:10,000 --> 00:11:14,640
on networks if you're dealing in a

299
00:11:12,240 --> 00:11:16,959
network that's monitored

300
00:11:14,640 --> 00:11:18,800
they have a blue team that's watching

301
00:11:16,959 --> 00:11:22,800
traffic

302
00:11:18,800 --> 00:11:23,599
sometimes if they see http or https

303
00:11:22,800 --> 00:11:26,319
traffic

304
00:11:23,600 --> 00:11:28,240
going from one device to another device

305
00:11:26,320 --> 00:11:30,800
that might raise some alarms

306
00:11:28,240 --> 00:11:32,720
but smb in a windows environment or if

307
00:11:30,800 --> 00:11:34,959
there are windows in that environment

308
00:11:32,720 --> 00:11:36,640
that traffic is everywhere it's hard to

309
00:11:34,959 --> 00:11:40,719
really filter down

310
00:11:36,640 --> 00:11:43,920
now a good finely tuned uh blue team

311
00:11:40,720 --> 00:11:46,000
will know that if smb is talking from

312
00:11:43,920 --> 00:11:47,760
one endpoint device to another endpoint

313
00:11:46,000 --> 00:11:49,600
device this isn't right because

314
00:11:47,760 --> 00:11:50,160
generally that smb is normally talking

315
00:11:49,600 --> 00:11:53,200
from

316
00:11:50,160 --> 00:11:58,000
endpoint device to servers um

317
00:11:53,200 --> 00:12:00,800
and also to a lot of the times

318
00:11:58,000 --> 00:12:02,399
when you use the smb that's not blocked

319
00:12:00,800 --> 00:12:03,279
because of it being a windows

320
00:12:02,399 --> 00:12:05,680
environment

321
00:12:03,279 --> 00:12:06,800
but a lot of the other channels that you

322
00:12:05,680 --> 00:12:10,000
might use

323
00:12:06,800 --> 00:12:12,319
whether it be tcp or http or https

324
00:12:10,000 --> 00:12:14,560
might be blocked if you are dealing with

325
00:12:12,320 --> 00:12:16,240
any firewalls in between there

326
00:12:14,560 --> 00:12:18,160
now fortunately with this situation

327
00:12:16,240 --> 00:12:21,040
there are no firewalls other than

328
00:12:18,160 --> 00:12:23,680
possibly what's enabled on the endpoint

329
00:12:21,040 --> 00:12:27,040
device that we've compromised itself

330
00:12:23,680 --> 00:12:29,279
but we were fortunate and we did not run

331
00:12:27,040 --> 00:12:31,599
into any of that

332
00:12:29,279 --> 00:12:31,600
so

333
00:12:32,320 --> 00:12:36,320
but wait there's more

334
00:12:36,560 --> 00:12:42,319
so as we compromised

335
00:12:39,920 --> 00:12:44,639
the initial host and then we're able to

336
00:12:42,320 --> 00:12:48,399
use smb name pipe and to

337
00:12:44,639 --> 00:12:51,440
get into another host inside of that

338
00:12:48,399 --> 00:12:52,800
10 1050 network looking around on

339
00:12:51,440 --> 00:12:54,480
different machines in there

340
00:12:52,800 --> 00:12:56,000
or fight you know finding different

341
00:12:54,480 --> 00:12:58,639
machines and running some

342
00:12:56,000 --> 00:13:00,079
arps and we did do some initial ping

343
00:12:58,639 --> 00:13:01,920
scans to try to figure out what's on

344
00:13:00,079 --> 00:13:04,079
those networks

345
00:13:01,920 --> 00:13:05,599
i was able to discover that there was

346
00:13:04,079 --> 00:13:10,079
another on the 10 10

347
00:13:05,600 --> 00:13:13,519
50 another dual home system there

348
00:13:10,079 --> 00:13:16,638
and it had a we'll say a 1 7

349
00:13:13,519 --> 00:13:19,519
to 16 address range so it was even

350
00:13:16,639 --> 00:13:20,160
a different subnet so essentially they

351
00:13:19,519 --> 00:13:22,800
had gone

352
00:13:20,160 --> 00:13:25,360
three deep and creating the this uh in

353
00:13:22,800 --> 00:13:29,040
secret environment that they had running

354
00:13:25,360 --> 00:13:30,639
um so then the question became well can

355
00:13:29,040 --> 00:13:33,760
cobalt strike

356
00:13:30,639 --> 00:13:35,519
with the s p name pipe drill even

357
00:13:33,760 --> 00:13:36,639
further in there and that says pip i do

358
00:13:35,519 --> 00:13:38,720
apologize pipe

359
00:13:36,639 --> 00:13:39,680
connect into those areas essentially go

360
00:13:38,720 --> 00:13:44,240
three deep

361
00:13:39,680 --> 00:13:47,439
so we go from the compromised hose into

362
00:13:44,240 --> 00:13:49,040
another host within there with smb name

363
00:13:47,440 --> 00:13:50,800
pipe on that second interface on the

364
00:13:49,040 --> 00:13:53,680
initial compromise hose

365
00:13:50,800 --> 00:13:55,519
and then from that host that's dual home

366
00:13:53,680 --> 00:13:56,399
can we use smb named pipe to tunnel

367
00:13:55,519 --> 00:13:58,800
through into

368
00:13:56,399 --> 00:14:00,000
that third network that we're finding

369
00:13:58,800 --> 00:14:02,719
and what was

370
00:14:00,000 --> 00:14:03,839
really interesting is that yes we were

371
00:14:02,720 --> 00:14:04,720
able to do this now here's an

372
00:14:03,839 --> 00:14:07,920
interesting

373
00:14:04,720 --> 00:14:10,399
uh lovely diagram so user a

374
00:14:07,920 --> 00:14:11,120
on pc box a now this is in a lab

375
00:14:10,399 --> 00:14:13,360
environment

376
00:14:11,120 --> 00:14:17,120
that i set up so that we can protect the

377
00:14:13,360 --> 00:14:19,120
innocent of where this really happened

378
00:14:17,120 --> 00:14:21,440
is the initial compromised host uh we

379
00:14:19,120 --> 00:14:24,480
were able to get on that host we'll say

380
00:14:21,440 --> 00:14:24,959
because it was missing a patch um and

381
00:14:24,480 --> 00:14:27,440
then we

382
00:14:24,959 --> 00:14:29,040
escalated up uh the star or the red you

383
00:14:27,440 --> 00:14:31,519
know the star there represents that i

384
00:14:29,040 --> 00:14:34,639
have system level privileges on it

385
00:14:31,519 --> 00:14:35,440
and then via smb named pipe i was able

386
00:14:34,639 --> 00:14:38,880
to tunnel through

387
00:14:35,440 --> 00:14:40,560
it into box b

388
00:14:38,880 --> 00:14:42,160
and as you can see it came through a

389
00:14:40,560 --> 00:14:43,760
system because

390
00:14:42,160 --> 00:14:45,439
they were doing password reuse

391
00:14:43,760 --> 00:14:46,319
throughout this these two other

392
00:14:45,440 --> 00:14:47,839
environments

393
00:14:46,320 --> 00:14:49,440
so that made it easier that everything

394
00:14:47,839 --> 00:14:52,560
that i dumped off of

395
00:14:49,440 --> 00:14:53,680
the user a box and from previous areas

396
00:14:52,560 --> 00:14:57,119
within this assessment

397
00:14:53,680 --> 00:14:58,000
i was able to reuse hashes and tie

398
00:14:57,120 --> 00:15:01,360
through through s b

399
00:14:58,000 --> 00:15:04,480
name pipe into box b and then also

400
00:15:01,360 --> 00:15:04,480
into box c

401
00:15:10,839 --> 00:15:14,480
so

402
00:15:12,320 --> 00:15:17,199
so going even further down the yellow

403
00:15:14,480 --> 00:15:20,560
brick smb name pipe road

404
00:15:17,199 --> 00:15:22,639
so i was even to go even deeper as i

405
00:15:20,560 --> 00:15:24,239
said in this third makeshift network

406
00:15:22,639 --> 00:15:26,160
i was able to gain full control of all

407
00:15:24,240 --> 00:15:28,800
systems at each level

408
00:15:26,160 --> 00:15:30,480
and then i was also able to exfoliate x

409
00:15:28,800 --> 00:15:32,639
filtrate

410
00:15:30,480 --> 00:15:33,839
uh sensitive data and more password

411
00:15:32,639 --> 00:15:36,160
hashes as i went in

412
00:15:33,839 --> 00:15:38,480
because they did have a few passwords

413
00:15:36,160 --> 00:15:39,839
that were local only to those small

414
00:15:38,480 --> 00:15:42,079
work group networks that they had

415
00:15:39,839 --> 00:15:44,079
created

416
00:15:42,079 --> 00:15:46,399
one of the main things too that popped

417
00:15:44,079 --> 00:15:46,880
up three levels deep was they had went

418
00:15:46,399 --> 00:15:50,720
out

419
00:15:46,880 --> 00:15:54,000
and bought a off-the-shelf nas

420
00:15:50,720 --> 00:15:55,600
system which you know something

421
00:15:54,000 --> 00:15:57,839
they were using for drive storage and

422
00:15:55,600 --> 00:16:00,160
they were storing files there

423
00:15:57,839 --> 00:16:02,320
and unfortunately with that they had

424
00:16:00,160 --> 00:16:05,040
left all the default credentials on that

425
00:16:02,320 --> 00:16:05,440
so i was able to log into those uh those

426
00:16:05,040 --> 00:16:07,279
uh

427
00:16:05,440 --> 00:16:09,680
mini nas those hard drive storage

428
00:16:07,279 --> 00:16:11,040
systems pull all the data off of them

429
00:16:09,680 --> 00:16:12,560
and then show that i was able to

430
00:16:11,040 --> 00:16:14,719
compromise all the way into those

431
00:16:12,560 --> 00:16:17,040
systems

432
00:16:14,720 --> 00:16:18,240
so we're going to get a little brave now

433
00:16:17,040 --> 00:16:20,880
now um

434
00:16:18,240 --> 00:16:22,000
i am not going to try this live i'm

435
00:16:20,880 --> 00:16:24,000
going to use a demo

436
00:16:22,000 --> 00:16:26,240
video that i had created previously

437
00:16:24,000 --> 00:16:26,959
because i'm not quite brave enough to do

438
00:16:26,240 --> 00:16:30,639
that

439
00:16:26,959 --> 00:16:30,638
let me just switch over here

440
00:16:33,279 --> 00:16:37,519
so as you can see i'm showing that i've

441
00:16:35,680 --> 00:16:40,239
already compromised

442
00:16:37,519 --> 00:16:40,240
box a

443
00:16:41,279 --> 00:16:47,920
and i've escalated this the the star as

444
00:16:44,160 --> 00:16:47,920
it designates here in cobalt strike

445
00:16:49,600 --> 00:16:56,160
and at this time i

446
00:16:52,959 --> 00:16:59,199
um i don't show in this video but

447
00:16:56,160 --> 00:17:00,639
i've already done the arp a and

448
00:16:59,199 --> 00:17:03,199
i've already figured out that there's

449
00:17:00,639 --> 00:17:06,319
another box back behind there

450
00:17:03,199 --> 00:17:09,520
on 10 10 50 10

451
00:17:06,319 --> 00:17:12,879
via the arp a command through a shell

452
00:17:09,520 --> 00:17:14,480
so i go in i add it in as a target

453
00:17:12,880 --> 00:17:16,160
i don't put any information because i'm

454
00:17:14,480 --> 00:17:18,480
not sure

455
00:17:16,160 --> 00:17:19,919
you know what type of os this target is

456
00:17:18,480 --> 00:17:22,400
i know it's a windows

457
00:17:19,919 --> 00:17:23,520
uh you know is it windows 10 windows 7 a

458
00:17:22,400 --> 00:17:25,760
server class

459
00:17:23,520 --> 00:17:26,879
or anything i just put in the ip so that

460
00:17:25,760 --> 00:17:31,280
i can target it

461
00:17:26,880 --> 00:17:34,960
via cobalt strike and then i use ps exec

462
00:17:31,280 --> 00:17:34,960
to log in and i

463
00:17:35,120 --> 00:17:39,360
used a box a to box b

464
00:17:39,600 --> 00:17:43,360
listener that i created which is the smb

465
00:17:41,840 --> 00:17:46,000
named pipe listener

466
00:17:43,360 --> 00:17:47,439
that i've created and i called it box a

467
00:17:46,000 --> 00:17:50,160
to box b

468
00:17:47,440 --> 00:17:52,000
and reusing the administrator local

469
00:17:50,160 --> 00:17:54,160
administrator credentials which

470
00:17:52,000 --> 00:17:55,840
unfortunately was shared throughout this

471
00:17:54,160 --> 00:17:58,960
environment

472
00:17:55,840 --> 00:18:01,520
and launched the attack

473
00:17:58,960 --> 00:18:03,200
waited for it to come back and then as

474
00:18:01,520 --> 00:18:06,320
you can see

475
00:18:03,200 --> 00:18:07,440
based on this and with this little chain

476
00:18:06,320 --> 00:18:10,559
linkages here

477
00:18:07,440 --> 00:18:12,240
i am now tied into that system

478
00:18:10,559 --> 00:18:14,559
and cobalt strike does an interesting

479
00:18:12,240 --> 00:18:17,120
thing it sees the other interface

480
00:18:14,559 --> 00:18:18,879
already the 172 1650

481
00:18:17,120 --> 00:18:22,399
and kind of gives me a hint that this

482
00:18:18,880 --> 00:18:22,400
system is dual homed also

483
00:18:22,720 --> 00:18:27,360
so once i get on that system i need to

484
00:18:26,080 --> 00:18:30,720
interact with it

485
00:18:27,360 --> 00:18:30,719
and as i'm pointing out here

486
00:18:31,200 --> 00:18:34,799
change the sleep time so that i can

487
00:18:33,600 --> 00:18:38,559
interact a little bit quicker with it

488
00:18:34,799 --> 00:18:38,559
which i just change it to sleep zero

489
00:18:40,160 --> 00:18:44,559
and as we're waiting for that to cycle

490
00:18:41,760 --> 00:18:44,559
back around

491
00:18:51,120 --> 00:18:54,399
skip ahead a little bit here

492
00:18:54,640 --> 00:18:58,640
i'll still see it's talking back through

493
00:18:56,720 --> 00:19:02,400
the initial host that i've

494
00:18:58,640 --> 00:19:04,320
uh that i compromised

495
00:19:02,400 --> 00:19:06,240
so then i decided to say okay let's dump

496
00:19:04,320 --> 00:19:08,240
some hashes

497
00:19:06,240 --> 00:19:11,440
and let's run meme cats on us and pull

498
00:19:08,240 --> 00:19:13,600
anything we can and

499
00:19:11,440 --> 00:19:14,640
there are clear texts on this and that i

500
00:19:13,600 --> 00:19:16,959
also

501
00:19:14,640 --> 00:19:18,960
looking at the credentials tab i notice

502
00:19:16,960 --> 00:19:22,880
that the hashes are the same

503
00:19:18,960 --> 00:19:24,880
for the administrator from both sides

504
00:19:22,880 --> 00:19:26,240
and this is all that i pulled off a box

505
00:19:24,880 --> 00:19:29,280
b

506
00:19:26,240 --> 00:19:31,360
now based off of that and

507
00:19:29,280 --> 00:19:33,918
seeing okay now i'm going to do this

508
00:19:31,360 --> 00:19:37,360
ipconfig on the box and i'm like oh

509
00:19:33,919 --> 00:19:41,280
well wait a minute this system

510
00:19:37,360 --> 00:19:43,120
has two network interfaces so

511
00:19:41,280 --> 00:19:45,360
can i go even deeper so i'm going to do

512
00:19:43,120 --> 00:19:48,320
an arp dash a

513
00:19:45,360 --> 00:19:51,600
and i can say oh well it's it's 50.5 but

514
00:19:48,320 --> 00:19:55,280
it's been talking to 50.10

515
00:19:51,600 --> 00:19:57,360
well can i target that 50.10

516
00:19:55,280 --> 00:19:59,120
and create another connection and

517
00:19:57,360 --> 00:20:01,520
essentially go 3d

518
00:19:59,120 --> 00:20:02,639
now unfortunately i've kind of spoiled

519
00:20:01,520 --> 00:20:07,840
this and showing the

520
00:20:02,640 --> 00:20:07,840
yes you can so i add the target

521
00:20:07,919 --> 00:20:13,760
i put it as an unknown as i said because

522
00:20:09,919 --> 00:20:13,760
i'm not sure what the system is

523
00:20:14,720 --> 00:20:22,159
so i've got the target set up

524
00:20:20,080 --> 00:20:24,158
and i'm going to say okay let's use the

525
00:20:22,159 --> 00:20:25,360
box b administrator password but let's

526
00:20:24,159 --> 00:20:27,760
take out the domain

527
00:20:25,360 --> 00:20:29,439
because it's actually a work group and i

528
00:20:27,760 --> 00:20:34,080
forgot i need to create

529
00:20:29,440 --> 00:20:38,000
the named pipe listener so let's add it

530
00:20:34,080 --> 00:20:42,080
so this is going to be

531
00:20:38,000 --> 00:20:42,080
as i call it box b to box c

532
00:20:43,600 --> 00:20:50,559
it's going to be an s b named pipe

533
00:20:47,600 --> 00:20:52,320
one more there we go but the host is

534
00:20:50,559 --> 00:20:56,879
going to be the second interface

535
00:20:52,320 --> 00:20:56,879
in box b which is the

536
00:20:57,440 --> 00:21:03,679
172 16 50.10 and unfortunately

537
00:21:00,640 --> 00:21:05,120
when you click away

538
00:21:03,679 --> 00:21:07,360
your pop-up drops away and you have to

539
00:21:05,120 --> 00:21:09,360
start all over beginning end

540
00:21:07,360 --> 00:21:13,520
so i enter in the information in the

541
00:21:09,360 --> 00:21:13,520
drop down i select smb named pipe

542
00:21:14,080 --> 00:21:21,678
i set it to 172 1650.5

543
00:21:18,559 --> 00:21:23,760
which is where i want from that box c

544
00:21:21,679 --> 00:21:24,880
to talk into in box b and hopefully that

545
00:21:23,760 --> 00:21:29,039
talks back

546
00:21:24,880 --> 00:21:30,640
back all right i select a port for it

547
00:21:29,039 --> 00:21:33,520
and then now i'm going to say okay well

548
00:21:30,640 --> 00:21:33,520
let's ps exec

549
00:21:34,000 --> 00:21:39,520
into that box using box b

550
00:21:37,200 --> 00:21:45,840
administrator credentials which if you

551
00:21:39,520 --> 00:21:45,840
look the hashes are the same

552
00:21:49,200 --> 00:21:54,240
and i'm going to choose the session

553
00:21:50,559 --> 00:21:54,240
that's on box b already

554
00:21:55,039 --> 00:22:00,158
i'm going to launch that and we gotta

555
00:21:58,320 --> 00:22:02,480
wait for it now it gets a little bit

556
00:22:00,159 --> 00:22:03,360
it does get a little laggy but as you

557
00:22:02,480 --> 00:22:06,480
can see now

558
00:22:03,360 --> 00:22:10,479
let's pause that i now

559
00:22:06,480 --> 00:22:14,559
have access system level access on 172

560
00:22:10,480 --> 00:22:18,480
1650 50. 5 50.10

561
00:22:14,559 --> 00:22:20,399
sorry through 172 1650.5

562
00:22:18,480 --> 00:22:22,159
so essentially now and as you can see

563
00:22:20,400 --> 00:22:26,240
with the little chain links there

564
00:22:22,159 --> 00:22:29,679
the cobalt strike shows i have access

565
00:22:26,240 --> 00:22:32,159
three networks deep

566
00:22:29,679 --> 00:22:34,880
all because they use dual network

567
00:22:32,159 --> 00:22:34,880
systems here

568
00:22:37,919 --> 00:22:42,720
so hit play and of course uh

569
00:22:41,360 --> 00:22:44,399
that time i'm going to interact with

570
00:22:42,720 --> 00:22:47,039
that system

571
00:22:44,400 --> 00:22:49,360
then i'm going to uh change it to sleep

572
00:22:47,039 --> 00:22:52,559
zero so they interact as fast

573
00:22:49,360 --> 00:22:53,039
dump some more hashes also run mimikatz

574
00:22:52,559 --> 00:22:54,960
on it

575
00:22:53,039 --> 00:22:56,799
i also did some more exploring but for

576
00:22:54,960 --> 00:22:59,840
this example for the talk

577
00:22:56,799 --> 00:23:03,520
i just kind of show getting

578
00:22:59,840 --> 00:23:04,959
getting the target and also

579
00:23:03,520 --> 00:23:07,280
getting the credentials off of it at the

580
00:23:04,960 --> 00:23:08,960
time

581
00:23:07,280 --> 00:23:10,559
and as i show there that i have now

582
00:23:08,960 --> 00:23:14,400
landed on 172

583
00:23:10,559 --> 00:23:16,399
16 uh 50.10

584
00:23:14,400 --> 00:23:18,080
now co-op strike has this interesting

585
00:23:16,400 --> 00:23:20,080
visualization which i'll show again

586
00:23:18,080 --> 00:23:23,840
the pivot graph and this is what i

587
00:23:20,080 --> 00:23:23,840
showed before in my slide deck

588
00:23:24,000 --> 00:23:28,559
and i kind of move it around here to

589
00:23:25,360 --> 00:23:31,840
give you a better view so essentially

590
00:23:28,559 --> 00:23:35,600
i am daisy chained from box

591
00:23:31,840 --> 00:23:39,280
a through s b name pipe

592
00:23:35,600 --> 00:23:40,639
into box b through two interfaces there

593
00:23:39,280 --> 00:23:43,760
through an smb name pipe

594
00:23:40,640 --> 00:23:43,760
into box c

595
00:23:46,799 --> 00:23:49,918
so that's essentially how we were able

596
00:23:48,159 --> 00:23:51,039
to get three deep into this network and

597
00:23:49,919 --> 00:23:53,520
find

598
00:23:51,039 --> 00:23:55,840
this hidden lab dev network that they

599
00:23:53,520 --> 00:23:57,520
had set up

600
00:23:55,840 --> 00:23:59,678
and told us that we would never find and

601
00:23:57,520 --> 00:24:02,240
we'd never be able to get into

602
00:23:59,679 --> 00:24:04,000
well at this point in time uh of course

603
00:24:02,240 --> 00:24:06,640
like i said i found the

604
00:24:04,000 --> 00:24:08,080
little off-the-shelf home nas that they

605
00:24:06,640 --> 00:24:10,240
had put in there

606
00:24:08,080 --> 00:24:11,360
i had exfiltrated all of course all the

607
00:24:10,240 --> 00:24:13,039
passwords from

608
00:24:11,360 --> 00:24:14,879
this local networks that they were the

609
00:24:13,039 --> 00:24:18,320
work groups that they were using

610
00:24:14,880 --> 00:24:21,200
i also exfiltrated all the config files

611
00:24:18,320 --> 00:24:22,480
this was mainly for config files and

612
00:24:21,200 --> 00:24:25,840
different system files

613
00:24:22,480 --> 00:24:26,480
for setting up some very secure network

614
00:24:25,840 --> 00:24:28,720
areas

615
00:24:26,480 --> 00:24:30,000
and we were able to use show that

616
00:24:28,720 --> 00:24:30,720
information that we were able to gather

617
00:24:30,000 --> 00:24:32,240
those

618
00:24:30,720 --> 00:24:34,000
and what we could have done you know as

619
00:24:32,240 --> 00:24:36,159
a malicious actor is we could have

620
00:24:34,000 --> 00:24:38,080
re-reviewed those config files

621
00:24:36,159 --> 00:24:40,080
altered them some way to get some type

622
00:24:38,080 --> 00:24:41,279
of persistence put them back in place

623
00:24:40,080 --> 00:24:47,840
and they would have never known

624
00:24:41,279 --> 00:24:47,840
that we were there

625
00:24:48,799 --> 00:24:52,720
so what if we don't have cobalt strike

626
00:24:51,679 --> 00:24:54,559
and this is kind of the issue i'm

627
00:24:52,720 --> 00:24:56,559
running into now because

628
00:24:54,559 --> 00:24:58,000
i'm at a new company and i don't have

629
00:24:56,559 --> 00:25:00,240
access to cobalt strike

630
00:24:58,000 --> 00:25:02,240
there has been an smb named pipe added

631
00:25:00,240 --> 00:25:04,960
to metasploit

632
00:25:02,240 --> 00:25:06,640
but i tried i've tried several times and

633
00:25:04,960 --> 00:25:09,120
i still continue to work on it

634
00:25:06,640 --> 00:25:09,840
i was only able to go we'll say from box

635
00:25:09,120 --> 00:25:12,559
a

636
00:25:09,840 --> 00:25:13,120
to box b i can't seem to get it to go

637
00:25:12,559 --> 00:25:16,879
from

638
00:25:13,120 --> 00:25:20,399
box b to box c and talk all the way back

639
00:25:16,880 --> 00:25:20,400
to box a which talks to me

640
00:25:20,480 --> 00:25:24,880
i just i haven't been able to work on it

641
00:25:23,600 --> 00:25:27,600
i'm hoping somebody else would be

642
00:25:24,880 --> 00:25:30,799
willing to help me out with this or

643
00:25:27,600 --> 00:25:32,799
if they see this talk they have got it

644
00:25:30,799 --> 00:25:35,279
working in this type of method

645
00:25:32,799 --> 00:25:37,440
and they can let me know because i would

646
00:25:35,279 --> 00:25:41,279
love to be able to provide

647
00:25:37,440 --> 00:25:44,000
a way that users can see this

648
00:25:41,279 --> 00:25:44,799
and work on this and and use this

649
00:25:44,000 --> 00:25:47,919
without

650
00:25:44,799 --> 00:25:49,600
uh if they don't have the option of a

651
00:25:47,919 --> 00:25:52,799
cobalt strike license

652
00:25:49,600 --> 00:25:54,639
uh even though uh i hope one day to

653
00:25:52,799 --> 00:25:56,720
go back to using cobalt strike and

654
00:25:54,640 --> 00:25:59,360
cobalt strike is a wonderful tool

655
00:25:56,720 --> 00:25:59,840
but you know there has to be either

656
00:25:59,360 --> 00:26:01,840
either

657
00:25:59,840 --> 00:26:03,360
via metasploit or if they know some

658
00:26:01,840 --> 00:26:05,039
other c2

659
00:26:03,360 --> 00:26:06,879
software out there that uses smb

660
00:26:05,039 --> 00:26:07,440
namepipe that possibly can do this

661
00:26:06,880 --> 00:26:09,120
that's

662
00:26:07,440 --> 00:26:11,840
open source and free and that we can

663
00:26:09,120 --> 00:26:11,840
possibly use

664
00:26:12,720 --> 00:26:20,320
here i link the reference material the

665
00:26:16,159 --> 00:26:23,440
blog from cobalt strike on smb

666
00:26:20,320 --> 00:26:25,200
help on smb beacon and also on named

667
00:26:23,440 --> 00:26:28,000
pipe pivoting

668
00:26:25,200 --> 00:26:28,640
and then also uh the article that i used

669
00:26:28,000 --> 00:26:30,960
for

670
00:26:28,640 --> 00:26:32,400
that says it's smb name pipe pivoting on

671
00:26:30,960 --> 00:26:34,799
interpreter

672
00:26:32,400 --> 00:26:36,400
i think my terpreter works if it's if

673
00:26:34,799 --> 00:26:37,918
you're named pipe pivoting

674
00:26:36,400 --> 00:26:39,760
and you're all on the same network

675
00:26:37,919 --> 00:26:41,520
you're not hopping through from one

676
00:26:39,760 --> 00:26:44,080
interface to another interface

677
00:26:41,520 --> 00:26:45,679
um i imagine it works really good if

678
00:26:44,080 --> 00:26:47,199
you're hopping from machine to machine

679
00:26:45,679 --> 00:26:48,880
via smb name pipe

680
00:26:47,200 --> 00:26:50,799
which i can see advantages to that in a

681
00:26:48,880 --> 00:26:54,400
network if you're also wanting to be

682
00:26:50,799 --> 00:26:57,120
a little stealthy you're wanting to hide

683
00:26:54,400 --> 00:26:57,760
your traffic you don't want you to be

684
00:26:57,120 --> 00:27:00,000
noticed

685
00:26:57,760 --> 00:27:02,080
if you're using smb traffic again like

686
00:27:00,000 --> 00:27:03,760
i've said previously

687
00:27:02,080 --> 00:27:05,360
this would prevent you from being

688
00:27:03,760 --> 00:27:08,879
spotted as easily

689
00:27:05,360 --> 00:27:12,399
versus doing you know http or https

690
00:27:08,880 --> 00:27:12,400
traffic from pc to pc

691
00:27:12,640 --> 00:27:18,159
so yeah if you could go ahead and fix

692
00:27:16,559 --> 00:27:19,360
your broken stuff that would be great so

693
00:27:18,159 --> 00:27:22,480
some of the mitigations

694
00:27:19,360 --> 00:27:23,199
so the biggest one that came out of this

695
00:27:22,480 --> 00:27:26,159
after we

696
00:27:23,200 --> 00:27:29,039
did our out briefing on this was really

697
00:27:26,159 --> 00:27:32,640
look at your policies and procedures

698
00:27:29,039 --> 00:27:34,960
um it

699
00:27:32,640 --> 00:27:36,000
it was kind of interesting that the

700
00:27:34,960 --> 00:27:38,399
biggest problem

701
00:27:36,000 --> 00:27:39,679
that they they needed a lab dev

702
00:27:38,399 --> 00:27:42,158
environment

703
00:27:39,679 --> 00:27:42,960
but they ran into issues with uh

704
00:27:42,159 --> 00:27:46,240
budgeting

705
00:27:42,960 --> 00:27:47,760
and knowing how to

706
00:27:46,240 --> 00:27:49,440
get the equipment ordered get it

707
00:27:47,760 --> 00:27:51,840
installed get it set up

708
00:27:49,440 --> 00:27:53,840
properly uh that was the biggest thing

709
00:27:51,840 --> 00:27:56,799
that we heard was

710
00:27:53,840 --> 00:27:58,000
yeah we get that we understand that we

711
00:27:56,799 --> 00:28:00,000
shouldn't have done that but

712
00:27:58,000 --> 00:28:01,279
the problem is we needed this dev

713
00:28:00,000 --> 00:28:02,960
environment we needed

714
00:28:01,279 --> 00:28:05,200
we thought this was the most secure way

715
00:28:02,960 --> 00:28:07,520
that we could set it up on our own

716
00:28:05,200 --> 00:28:08,240
and that's what happens users need

717
00:28:07,520 --> 00:28:11,760
something done

718
00:28:08,240 --> 00:28:13,520
they are going to find a way to do it

719
00:28:11,760 --> 00:28:14,799
another big thing is of course if you do

720
00:28:13,520 --> 00:28:16,639
set up properly use

721
00:28:14,799 --> 00:28:18,559
a proper network segmentation with

722
00:28:16,640 --> 00:28:19,840
firewalls consider two-factor

723
00:28:18,559 --> 00:28:21,600
authentication

724
00:28:19,840 --> 00:28:24,959
especially if there it's highly

725
00:28:21,600 --> 00:28:27,918
sensitive data behind in those areas

726
00:28:24,960 --> 00:28:29,279
and you know i'm a fan of if if it's

727
00:28:27,919 --> 00:28:32,000
really really high sensitive

728
00:28:29,279 --> 00:28:33,279
it should have a true air gap yeah you

729
00:28:32,000 --> 00:28:36,080
have to come up with a

730
00:28:33,279 --> 00:28:37,039
procedure or policy or way to move the

731
00:28:36,080 --> 00:28:40,480
data

732
00:28:37,039 --> 00:28:43,520
from inside that air gap network to

733
00:28:40,480 --> 00:28:45,120
on your regular network so it's a matter

734
00:28:43,520 --> 00:28:46,158
of you know which way do you want to

735
00:28:45,120 --> 00:28:49,360
work with that

736
00:28:46,159 --> 00:28:50,559
um also user education um you know i

737
00:28:49,360 --> 00:28:52,240
don't want to beat up on the user that's

738
00:28:50,559 --> 00:28:59,840
why it's kind of in the bottom of my

739
00:28:52,240 --> 00:28:59,840
list here because um account

740
00:29:06,159 --> 00:29:10,799
i apologize for that my microphone died

741
00:29:08,640 --> 00:29:12,320
so i had to switch batteries

742
00:29:10,799 --> 00:29:14,480
user education i was saying password

743
00:29:12,320 --> 00:29:16,000
reviews uh

744
00:29:14,480 --> 00:29:17,760
also let them know that setting up home

745
00:29:16,000 --> 00:29:20,799
brewed networks bringing in

746
00:29:17,760 --> 00:29:23,679
equipment that's not authorized or not

747
00:29:20,799 --> 00:29:24,639
approved does not provide adequate

748
00:29:23,679 --> 00:29:26,720
security

749
00:29:24,640 --> 00:29:28,000
does open things up and cause more

750
00:29:26,720 --> 00:29:31,200
problems than they

751
00:29:28,000 --> 00:29:33,279
might know also consistent hardware

752
00:29:31,200 --> 00:29:35,919
inventory of your environment

753
00:29:33,279 --> 00:29:38,320
catching when you notice that for some

754
00:29:35,919 --> 00:29:41,279
odd reason now

755
00:29:38,320 --> 00:29:42,879
john's pc now has two network cards why

756
00:29:41,279 --> 00:29:44,880
does it have two network cards

757
00:29:42,880 --> 00:29:46,320
that's not what we issue out standard

758
00:29:44,880 --> 00:29:49,279
how did that happen

759
00:29:46,320 --> 00:29:50,799
um i so you know keeping a good

760
00:29:49,279 --> 00:29:53,279
inventory of your systems

761
00:29:50,799 --> 00:29:55,840
and keeping track of that is really

762
00:29:53,279 --> 00:29:55,840
important

763
00:29:58,880 --> 00:30:03,679
so uh questions um i'm going to leave

764
00:30:02,000 --> 00:30:08,399
this only up here for a second

765
00:30:03,679 --> 00:30:10,480
i will be in the chat available uh

766
00:30:08,399 --> 00:30:12,320
to answer any questions anybody has once

767
00:30:10,480 --> 00:30:15,520
they watch this talk

768
00:30:12,320 --> 00:30:16,960
um i will put up my information that is

769
00:30:15,520 --> 00:30:18,080
my twitter account if you wish to

770
00:30:16,960 --> 00:30:21,760
contact me that way

771
00:30:18,080 --> 00:30:22,480
or my email and you know i'm not afraid

772
00:30:21,760 --> 00:30:25,520
of

773
00:30:22,480 --> 00:30:26,960
any spam uh because gmail does have some

774
00:30:25,520 --> 00:30:28,240
decent filters so i'm not too worried

775
00:30:26,960 --> 00:30:31,679
about that

776
00:30:28,240 --> 00:30:33,919
so i do want to thank b-sides i really

777
00:30:31,679 --> 00:30:35,679
want to thank b-sides i did have

778
00:30:33,919 --> 00:30:37,760
emergency pop-up and i did have to

779
00:30:35,679 --> 00:30:39,440
record this video a little bit later

780
00:30:37,760 --> 00:30:40,799
than the deadline and i appreciate them

781
00:30:39,440 --> 00:30:43,440
giving me the opportunity

782
00:30:40,799 --> 00:30:45,360
to go ahead and record it um at this

783
00:30:43,440 --> 00:30:45,919
time when i've got it done and get it to

784
00:30:45,360 --> 00:30:48,320
them

785
00:30:45,919 --> 00:30:49,200
and i do appreciate them accepting me uh

786
00:30:48,320 --> 00:30:52,158
to

787
00:30:49,200 --> 00:30:53,600
talk uh at these sides i really do enjoy

788
00:30:52,159 --> 00:30:56,480
b-sides and i do hope

789
00:30:53,600 --> 00:30:57,120
to be able to shake hands and see people

790
00:30:56,480 --> 00:31:00,399
next year

791
00:30:57,120 --> 00:31:03,120
face-to-face uh but

792
00:31:00,399 --> 00:31:04,399
um you know it is what it is with the

793
00:31:03,120 --> 00:31:05,760
whole uh

794
00:31:04,399 --> 00:31:06,959
world and how everything's going on

795
00:31:05,760 --> 00:31:08,080
right now so hopefully that's all

796
00:31:06,960 --> 00:31:09,679
cleared up by next year

797
00:31:08,080 --> 00:31:11,279
and we can all see each other face to

798
00:31:09,679 --> 00:31:12,559
face then again i want to thank

799
00:31:11,279 --> 00:31:14,960
everybody for

800
00:31:12,559 --> 00:31:16,799
watching my talk and attending i want to

801
00:31:14,960 --> 00:31:20,559
thank besides columbus

802
00:31:16,799 --> 00:31:27,840
and everybody i hope you have a good day

803
00:31:20,559 --> 00:31:27,840
thank you

