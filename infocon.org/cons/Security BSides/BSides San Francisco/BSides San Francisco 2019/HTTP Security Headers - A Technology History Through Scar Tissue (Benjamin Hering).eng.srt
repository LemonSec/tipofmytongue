1
00:00:00,030 --> 00:00:05,490
let's all welcome Benjamin<font color="#CCCCCC"> Haring with</font>

2
00:00:02,870 --> 00:00:09,920
HTTP<font color="#E5E5E5"> security headers a technology</font>

3
00:00:05,490 --> 00:00:11,820
<font color="#CCCCCC">history</font><font color="#E5E5E5"> through scar tissue hello hello</font>

4
00:00:09,920 --> 00:00:13,530
<font color="#E5E5E5">hopefully we got the slides up here</font><font color="#CCCCCC"> in</font>

5
00:00:11,820 --> 00:00:16,079
just a little<font color="#E5E5E5"> bit hopefully</font><font color="#CCCCCC"> you guys are</font>

6
00:00:13,530 --> 00:00:18,330
here<font color="#E5E5E5"> to talk</font><font color="#CCCCCC"> about</font><font color="#E5E5E5"> HTTP security headers</font>

7
00:00:16,079 --> 00:00:19,619
if you're not looking<font color="#CCCCCC"> for that you're in</font>

8
00:00:18,330 --> 00:00:22,139
the wrong<font color="#E5E5E5"> room</font><font color="#CCCCCC"> you better run downstairs</font>

9
00:00:19,619 --> 00:00:24,720
<font color="#E5E5E5">to</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> theater real quick all right</font>

10
00:00:22,140 --> 00:00:26,609
<font color="#E5E5E5">anyway let's start</font><font color="#CCCCCC"> my name is Benjamin</font>

11
00:00:24,720 --> 00:00:28,288
<font color="#CCCCCC">Herron I'm a sans Community mentor I</font>

12
00:00:26,609 --> 00:00:31,439
<font color="#E5E5E5">help out</font><font color="#CCCCCC"> a little bit here with b-sides</font>

13
00:00:28,289 --> 00:00:33,899
<font color="#CCCCCC">SS I work at the company that bought</font><font color="#E5E5E5"> you</font>

14
00:00:31,439 --> 00:00:36,239
<font color="#E5E5E5">all lunch yesterday</font><font color="#CCCCCC"> but you're not here</font>

15
00:00:33,899 --> 00:00:38,100
<font color="#CCCCCC">to learn about</font><font color="#E5E5E5"> me let's move on get to</font>

16
00:00:36,239 --> 00:00:40,949
the content first<font color="#E5E5E5"> a little</font><font color="#CCCCCC"> bit</font><font color="#E5E5E5"> of</font>

17
00:00:38,100 --> 00:00:43,170
housekeeping<font color="#CCCCCC"> things</font><font color="#E5E5E5"> if you are wanting</font>

18
00:00:40,950 --> 00:00:45,180
to capture<font color="#E5E5E5"> the slides</font><font color="#CCCCCC"> feel</font><font color="#E5E5E5"> free to take</font>

19
00:00:43,170 --> 00:00:47,520
<font color="#CCCCCC">photos post them on Twitter don't get</font>

20
00:00:45,180 --> 00:00:48,780
anybody<font color="#E5E5E5"> else in the shot but if you want</font>

21
00:00:47,520 --> 00:00:51,600
to<font color="#E5E5E5"> just go straight</font><font color="#CCCCCC"> to the</font><font color="#E5E5E5"> information</font>

22
00:00:48,780 --> 00:00:54,120
there's<font color="#CCCCCC"> pdfs</font><font color="#E5E5E5"> already uploaded</font><font color="#CCCCCC"> to this</font>

23
00:00:51,600 --> 00:00:56,210
event here in<font color="#E5E5E5"> sched you can follow</font><font color="#CCCCCC"> along</font>

24
00:00:54,120 --> 00:00:59,660
in<font color="#CCCCCC"> real-time whatever else you'd like</font>

25
00:00:56,210 --> 00:01:02,940
also we're gonna do questions today

26
00:00:59,660 --> 00:01:06,060
without<font color="#CCCCCC"> this clicker</font><font color="#E5E5E5"> let's try something</font>

27
00:01:02,940 --> 00:01:07,380
else<font color="#E5E5E5"> all right</font><font color="#CCCCCC"> so if you</font><font color="#E5E5E5"> have a question</font>

28
00:01:06,060 --> 00:01:09,270
we're<font color="#CCCCCC"> trying something a little bit new</font>

29
00:01:07,380 --> 00:01:11,189
here at<font color="#CCCCCC"> b-sides we're gonna do</font><font color="#E5E5E5"> slide oh</font>

30
00:01:09,270 --> 00:01:14,429
you can<font color="#E5E5E5"> just open</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> up on your phone</font>

31
00:01:11,189 --> 00:01:16,169
<font color="#E5E5E5">enter in b-sides of</font><font color="#CCCCCC"> F 2019 and the</font>

32
00:01:14,430 --> 00:01:17,400
<font color="#CCCCCC">proctor</font><font color="#E5E5E5"> you can vote on what questions</font>

33
00:01:16,170 --> 00:01:19,350
you want if there's some time at the end

34
00:01:17,400 --> 00:01:21,960
<font color="#E5E5E5">we'll definitely go over</font><font color="#CCCCCC"> those</font><font color="#E5E5E5"> and</font>

35
00:01:19,350 --> 00:01:24,330
<font color="#E5E5E5">anything else feel</font><font color="#CCCCCC"> free to</font><font color="#E5E5E5"> just yell at</font>

36
00:01:21,960 --> 00:01:25,979
me<font color="#CCCCCC"> at Twitter I will</font><font color="#E5E5E5"> generally enjoy</font>

37
00:01:24,330 --> 00:01:27,689
going through all the posting you

38
00:01:25,979 --> 00:01:29,850
have to tell at me once we get<font color="#E5E5E5"> done with</font>

39
00:01:27,689 --> 00:01:32,039
<font color="#E5E5E5">this talk the handles right there but</font>

40
00:01:29,850 --> 00:01:35,640
with that let's get<font color="#CCCCCC"> into the content so</font>

41
00:01:32,040 --> 00:01:38,490
I really like HTTP<font color="#E5E5E5"> security headers</font>

42
00:01:35,640 --> 00:01:40,950
<font color="#E5E5E5">because</font><font color="#CCCCCC"> they are a living</font><font color="#E5E5E5"> record of</font>

43
00:01:38,490 --> 00:01:43,259
history<font color="#CCCCCC"> of all the times where people</font>

44
00:01:40,950 --> 00:01:46,290
<font color="#CCCCCC">have gone and</font><font color="#E5E5E5"> went wait that's super bad</font>

45
00:01:43,259 --> 00:01:48,750
and it always kind<font color="#E5E5E5"> of follows the same</font>

46
00:01:46,290 --> 00:01:50,820
pattern where someone somewhere finds

47
00:01:48,750 --> 00:01:53,189
<font color="#E5E5E5">something bad</font><font color="#CCCCCC"> on the</font><font color="#E5E5E5"> internet and it</font>

48
00:01:50,820 --> 00:01:55,710
turns out<font color="#E5E5E5"> that in order</font><font color="#CCCCCC"> to shut off that</font>

49
00:01:53,189 --> 00:01:57,809
bad thing it's gonna break a lot<font color="#E5E5E5"> of</font>

50
00:01:55,710 --> 00:02:00,210
functionality<font color="#E5E5E5"> on</font><font color="#CCCCCC"> the internet so what we</font>

51
00:01:57,810 --> 00:02:02,460
always<font color="#E5E5E5"> come up with</font><font color="#CCCCCC"> is oh</font><font color="#E5E5E5"> we'll just</font>

52
00:02:00,210 --> 00:02:04,350
have this very special<font color="#E5E5E5"> Security header</font>

53
00:02:02,460 --> 00:02:05,759
that if you send<font color="#E5E5E5"> it will turn on this</font>

54
00:02:04,350 --> 00:02:08,068
great security<font color="#E5E5E5"> control but it's just</font>

55
00:02:05,759 --> 00:02:10,530
<font color="#CCCCCC">gonna</font><font color="#E5E5E5"> be off by default and then wash</font>

56
00:02:08,068 --> 00:02:12,730
rinse repeat<font color="#CCCCCC"> we keep fighting this</font><font color="#E5E5E5"> over</font>

57
00:02:10,530 --> 00:02:16,690
and over<font color="#CCCCCC"> again or to put it</font>

58
00:02:12,730 --> 00:02:18,909
another way<font color="#CCCCCC"> Yarra</font><font color="#E5E5E5"> wizard</font><font color="#CCCCCC"> Hattie and</font><font color="#E5E5E5"> the</font>

59
00:02:16,690 --> 00:02:23,290
internet<font color="#CCCCCC"> is full of terrible terrible</font>

60
00:02:18,909 --> 00:02:26,109
<font color="#E5E5E5">things fortunately we have a browser</font>

61
00:02:23,290 --> 00:02:28,239
that's big and strong and<font color="#E5E5E5"> has lots of</font>

62
00:02:26,110 --> 00:02:30,790
security<font color="#CCCCCC"> controls just</font><font color="#E5E5E5"> waiting for you</font>

63
00:02:28,239 --> 00:02:32,519
<font color="#CCCCCC">but in</font><font color="#E5E5E5"> order to make it work</font><font color="#CCCCCC"> you have to</font>

64
00:02:30,790 --> 00:02:36,160
know the magic words

65
00:02:32,519 --> 00:02:37,540
so here's<font color="#E5E5E5"> our magic words here's the</font>

66
00:02:36,160 --> 00:02:39,609
headers<font color="#CCCCCC"> that we're</font><font color="#E5E5E5"> going to be talking</font>

67
00:02:37,540 --> 00:02:41,140
<font color="#CCCCCC">about today</font><font color="#E5E5E5"> and let's get straight</font><font color="#CCCCCC"> into</font>

68
00:02:39,610 --> 00:02:43,989
it<font color="#E5E5E5"> so the first</font><font color="#CCCCCC"> one that kind of jumps</font>

69
00:02:41,140 --> 00:02:47,109
<font color="#CCCCCC">up on the</font><font color="#E5E5E5"> scene is these ex-con tight</font>

70
00:02:43,989 --> 00:02:49,959
top options<font color="#E5E5E5"> about a decade ago somewhere</font>

71
00:02:47,110 --> 00:02:52,120
<font color="#E5E5E5">around December 2008</font><font color="#CCCCCC"> all right so what's</font>

72
00:02:49,959 --> 00:02:54,099
the<font color="#E5E5E5"> bad thing so back in the day when</font>

73
00:02:52,120 --> 00:02:56,349
people<font color="#E5E5E5"> were building</font><font color="#CCCCCC"> web sites</font><font color="#E5E5E5"> browser</font>

74
00:02:54,099 --> 00:02:58,750
manufacturers found that people kept on

75
00:02:56,349 --> 00:03:01,179
<font color="#CCCCCC">running</font><font color="#E5E5E5"> into this</font><font color="#CCCCCC"> problem of</font><font color="#E5E5E5"> why is my</font>

76
00:02:58,750 --> 00:03:03,220
JavaScript just<font color="#E5E5E5"> displaying as a text</font>

77
00:03:01,180 --> 00:03:05,590
file and<font color="#E5E5E5"> not actually running and that</font>

78
00:03:03,220 --> 00:03:08,290
<font color="#E5E5E5">issue was as they had</font><font color="#CCCCCC"> uploaded it as</font>

79
00:03:05,590 --> 00:03:10,299
<font color="#E5E5E5">plain text</font><font color="#CCCCCC"> Mimmi type weren't on execute</font>

80
00:03:08,290 --> 00:03:11,920
about many times so browser<font color="#CCCCCC"> manufacturer</font>

81
00:03:10,299 --> 00:03:14,379
said you know what we're<font color="#E5E5E5"> gonna make</font><font color="#CCCCCC"> this</font>

82
00:03:11,920 --> 00:03:16,059
super<font color="#E5E5E5"> convenient for you</font><font color="#CCCCCC"> we know what</font>

83
00:03:14,379 --> 00:03:18,608
<font color="#CCCCCC">javascript looks like we run it all the</font>

84
00:03:16,060 --> 00:03:21,040
<font color="#E5E5E5">time</font><font color="#CCCCCC"> so if</font><font color="#E5E5E5"> you send us a file that looks</font>

85
00:03:18,609 --> 00:03:22,930
like<font color="#E5E5E5"> it should</font><font color="#CCCCCC"> be executed even if you</font>

86
00:03:21,040 --> 00:03:24,190
set the mini type wrong<font color="#CCCCCC"> we'll</font><font color="#E5E5E5"> just go</font>

87
00:03:22,930 --> 00:03:26,349
ahead<font color="#CCCCCC"> and switch that</font><font color="#E5E5E5"> for you so</font>

88
00:03:24,190 --> 00:03:29,139
everything<font color="#E5E5E5"> works out just fine</font><font color="#CCCCCC"> well</font>

89
00:03:26,349 --> 00:03:31,149
turns out a common security<font color="#E5E5E5"> control when</font>

90
00:03:29,139 --> 00:03:33,340
you're<font color="#E5E5E5"> uploading arbitrary files are</font>

91
00:03:31,150 --> 00:03:34,720
letting users<font color="#E5E5E5"> upload arbitrary files is</font>

92
00:03:33,340 --> 00:03:37,030
you know upload wherever you want but

93
00:03:34,720 --> 00:03:38,349
<font color="#CCCCCC">nothing</font><font color="#E5E5E5"> that's executable and then you</font>

94
00:03:37,030 --> 00:03:40,090
<font color="#E5E5E5">combine this with</font><font color="#CCCCCC"> this new browser</font>

95
00:03:38,349 --> 00:03:41,349
feature that says<font color="#CCCCCC"> oh we'll take down</font>

96
00:03:40,090 --> 00:03:43,269
executable things and make them

97
00:03:41,349 --> 00:03:45,280
executable for you again<font color="#E5E5E5"> and surprise</font>

98
00:03:43,269 --> 00:03:47,290
surprise<font color="#CCCCCC"> you start to have some</font><font color="#E5E5E5"> sort of</font>

99
00:03:45,280 --> 00:03:49,690
problem<font color="#CCCCCC"> so if you're gonna set</font><font color="#E5E5E5"> this</font>

100
00:03:47,290 --> 00:03:52,569
header<font color="#E5E5E5"> just go ahead and set</font><font color="#CCCCCC"> it to</font><font color="#E5E5E5"> no</font>

101
00:03:49,690 --> 00:03:54,700
sniff which basically says browser<font color="#E5E5E5"> don't</font>

102
00:03:52,569 --> 00:03:56,738
try to guess anything<font color="#CCCCCC"> just do what</font>

103
00:03:54,700 --> 00:03:58,780
you're told<font color="#CCCCCC"> and then obviously</font><font color="#E5E5E5"> you got</font>

104
00:03:56,739 --> 00:04:01,000
to set your memory types correctly<font color="#E5E5E5"> all</font>

105
00:03:58,780 --> 00:04:03,609
right moving on<font color="#E5E5E5"> the next one that kind</font>

106
00:04:01,000 --> 00:04:05,650
of shows up on the scene is this<font color="#E5E5E5"> X cross</font>

107
00:04:03,609 --> 00:04:08,319
site scripting protection again<font color="#E5E5E5"> about</font>

108
00:04:05,650 --> 00:04:10,269
<font color="#CCCCCC">ten years</font><font color="#E5E5E5"> old or so and the bad thing</font>

109
00:04:08,319 --> 00:04:12,429
<font color="#CCCCCC">that it tries to protect against it's</font>

110
00:04:10,269 --> 00:04:15,040
right there in the name now this

111
00:04:12,430 --> 00:04:17,500
cross-site scripting protection is not

112
00:04:15,040 --> 00:04:20,320
exactly the<font color="#CCCCCC"> most intelligent all</font><font color="#E5E5E5"> right</font>

113
00:04:17,500 --> 00:04:22,360
all<font color="#CCCCCC"> it's doing is really dumb pattern</font>

114
00:04:20,320 --> 00:04:24,849
matching where if it sees something

115
00:04:22,360 --> 00:04:25,810
<font color="#E5E5E5">that's in the URI and that something is</font>

116
00:04:24,849 --> 00:04:28,330
<font color="#E5E5E5">also</font>

117
00:04:25,810 --> 00:04:30,520
side the HTML source<font color="#E5E5E5"> of the page it</font>

118
00:04:28,330 --> 00:04:32,260
things<font color="#CCCCCC"> ah that must be cross-site</font>

119
00:04:30,520 --> 00:04:34,240
scripting<font color="#E5E5E5"> let me go ahead and filter</font>

120
00:04:32,260 --> 00:04:36,789
that out<font color="#CCCCCC"> and it's</font><font color="#E5E5E5"> stopping just the</font>

121
00:04:34,240 --> 00:04:40,120
bare-bones<font color="#E5E5E5"> lowest cross-site scripting</font>

122
00:04:36,790 --> 00:04:42,100
<font color="#CCCCCC">that you can find now with that</font><font color="#E5E5E5"> the</font>

123
00:04:40,120 --> 00:04:43,780
default<font color="#E5E5E5"> of this filter setting is not</font>

124
00:04:42,100 --> 00:04:46,300
<font color="#E5E5E5">what I'd recommend</font><font color="#CCCCCC"> that you</font><font color="#E5E5E5"> keep it</font><font color="#CCCCCC"> too</font>

125
00:04:43,780 --> 00:04:49,000
<font color="#E5E5E5">the reason</font><font color="#CCCCCC"> for that is that the filter</font>

126
00:04:46,300 --> 00:04:51,100
<font color="#E5E5E5">settings are kind of so not the most</font>

127
00:04:49,000 --> 00:04:53,560
<font color="#E5E5E5">intelligent that there's actually been</font>

128
00:04:51,100 --> 00:04:55,510
<font color="#CCCCCC">CVS issued where the cross-site filter</font>

129
00:04:53,560 --> 00:04:58,270
is<font color="#E5E5E5"> actually then used to deliver a</font>

130
00:04:55,510 --> 00:05:01,180
cross-site scripting payload<font color="#E5E5E5"> in addition</font>

131
00:04:58,270 --> 00:05:04,750
an attacker really it's trivial<font color="#E5E5E5"> to craft</font>

132
00:05:01,180 --> 00:05:05,919
a URL<font color="#E5E5E5"> that knocks out correct legitimate</font>

133
00:05:04,750 --> 00:05:07,960
scripts that<font color="#E5E5E5"> are supposed to be there</font>

134
00:05:05,919 --> 00:05:10,419
<font color="#E5E5E5">all you got to do is have the attacker</font>

135
00:05:07,960 --> 00:05:12,310
add a query<font color="#CCCCCC"> parameter set that query</font>

136
00:05:10,419 --> 00:05:14,169
parameter to be<font color="#E5E5E5"> the script tag</font><font color="#CCCCCC"> that you</font>

137
00:05:12,310 --> 00:05:16,030
<font color="#E5E5E5">want to get knocked off the cross-site</font>

138
00:05:14,169 --> 00:05:17,830
filter says oh it's the same in both

139
00:05:16,030 --> 00:05:20,109
places get rid of it<font color="#E5E5E5"> and they can</font>

140
00:05:17,830 --> 00:05:22,450
selectively disable functionality in

141
00:05:20,110 --> 00:05:24,970
<font color="#CCCCCC">your site</font><font color="#E5E5E5"> so don't keep it at the</font>

142
00:05:22,450 --> 00:05:26,620
default<font color="#CCCCCC"> either shut it off entirely</font><font color="#E5E5E5"> and</font>

143
00:05:24,970 --> 00:05:29,290
say hey we have<font color="#E5E5E5"> better ways</font><font color="#CCCCCC"> to deal with</font>

144
00:05:26,620 --> 00:05:32,200
<font color="#E5E5E5">cross-site scripting protection or set</font>

145
00:05:29,290 --> 00:05:34,360
it to mode equals block<font color="#E5E5E5"> now</font><font color="#CCCCCC"> any time I'm</font>

146
00:05:32,200 --> 00:05:36,880
trying<font color="#E5E5E5"> to research these kinds of things</font>

147
00:05:34,360 --> 00:05:38,530
I like<font color="#CCCCCC"> to</font><font color="#E5E5E5"> go out</font><font color="#CCCCCC"> and see well how is</font>

148
00:05:36,880 --> 00:05:40,510
this actually<font color="#CCCCCC"> looking in the real world</font>

149
00:05:38,530 --> 00:05:42,700
so here's a<font color="#CCCCCC"> couple of examples</font><font color="#E5E5E5"> from</font>

150
00:05:40,510 --> 00:05:43,870
companies with security budgets way way

151
00:05:42,700 --> 00:05:45,909
way larger<font color="#CCCCCC"> than mine</font>

152
00:05:43,870 --> 00:05:47,919
and you can see they<font color="#E5E5E5"> don't always</font><font color="#CCCCCC"> agree</font>

153
00:05:45,910 --> 00:05:50,080
on what the correct set of security

154
00:05:47,919 --> 00:05:51,849
headers are that's because these<font color="#E5E5E5"> things</font>

155
00:05:50,080 --> 00:05:53,680
do need to be tailored<font color="#CCCCCC"> to your</font>

156
00:05:51,850 --> 00:05:55,600
organization one thing they<font color="#E5E5E5"> both agree</font>

157
00:05:53,680 --> 00:05:57,190
on<font color="#E5E5E5"> though is that the defaults suck and</font>

158
00:05:55,600 --> 00:05:59,200
you should<font color="#E5E5E5"> change them so</font><font color="#CCCCCC"> you can see</font>

159
00:05:57,190 --> 00:06:01,600
that Facebook includes the<font color="#E5E5E5"> X content</font>

160
00:05:59,200 --> 00:06:04,360
type options but Google on their hyper

161
00:06:01,600 --> 00:06:06,460
optimized<font color="#CCCCCC"> homepage does</font><font color="#E5E5E5"> not and</font><font color="#CCCCCC"> they're</font>

162
00:06:04,360 --> 00:06:08,680
fit I dia of that really<font color="#E5E5E5"> really</font><font color="#CCCCCC"> basic</font>

163
00:06:06,460 --> 00:06:09,969
cross site scripting filter<font color="#E5E5E5"> Google says</font>

164
00:06:08,680 --> 00:06:11,950
<font color="#CCCCCC">ok we're gonna use it</font><font color="#E5E5E5"> but we're gonna</font>

165
00:06:09,970 --> 00:06:13,389
set it<font color="#CCCCCC"> to block and Facebook says not</font>

166
00:06:11,950 --> 00:06:15,849
we're<font color="#E5E5E5"> gonna take care</font><font color="#CCCCCC"> of this</font><font color="#E5E5E5"> another</font>

167
00:06:13,389 --> 00:06:17,500
<font color="#E5E5E5">one so with these things you do have to</font>

168
00:06:15,850 --> 00:06:20,470
understand the very specifics of<font color="#CCCCCC"> your</font>

169
00:06:17,500 --> 00:06:22,330
<font color="#E5E5E5">website now moving on the next</font><font color="#CCCCCC"> one that</font>

170
00:06:20,470 --> 00:06:24,490
<font color="#CCCCCC">we see is that</font><font color="#E5E5E5"> X frames option that you</font>

171
00:06:22,330 --> 00:06:26,229
saw in that<font color="#CCCCCC"> previous example</font><font color="#E5E5E5"> this is a</font>

172
00:06:24,490 --> 00:06:28,770
little<font color="#CCCCCC"> bit newer maybe eight nine years</font>

173
00:06:26,229 --> 00:06:31,750
or so<font color="#E5E5E5"> something like that</font><font color="#CCCCCC"> and basically</font>

174
00:06:28,770 --> 00:06:34,270
it's all<font color="#CCCCCC"> about embedding websites in</font>

175
00:06:31,750 --> 00:06:36,039
other<font color="#CCCCCC"> websites</font><font color="#E5E5E5"> the frame tag that this</font>

176
00:06:34,270 --> 00:06:37,539
was named after is now deprecated but

177
00:06:36,039 --> 00:06:39,639
this applies to iframes<font color="#E5E5E5"> and objects</font>

178
00:06:37,539 --> 00:06:41,318
which<font color="#E5E5E5"> I think I frames even though</font>

179
00:06:39,639 --> 00:06:43,210
last time<font color="#E5E5E5"> I</font><font color="#CCCCCC"> touched them was embedding</font>

180
00:06:41,319 --> 00:06:45,009
some<font color="#CCCCCC"> Facebook social media feed like</font>

181
00:06:43,210 --> 00:06:46,568
<font color="#E5E5E5">eight years ago</font><font color="#CCCCCC"> I don't think it's ever</font>

182
00:06:45,009 --> 00:06:48,610
ever going<font color="#E5E5E5"> to die it's gonna be with</font><font color="#CCCCCC"> us</font>

183
00:06:46,569 --> 00:06:50,740
forever<font color="#CCCCCC"> and the bad</font><font color="#E5E5E5"> thing is is</font>

184
00:06:48,610 --> 00:06:53,199
<font color="#CCCCCC">obviously if you have a good page</font>

185
00:06:50,740 --> 00:06:55,120
embedded inside<font color="#E5E5E5"> an attackers web page</font>

186
00:06:53,199 --> 00:06:57,909
<font color="#CCCCCC">well then the attacker can do all sorts</font>

187
00:06:55,120 --> 00:07:00,189
of<font color="#CCCCCC"> nasty stuff</font><font color="#E5E5E5"> so unless your</font><font color="#CCCCCC"> website or</font>

188
00:06:57,909 --> 00:07:02,319
web application is<font color="#CCCCCC"> designed to be and</font>

189
00:07:00,189 --> 00:07:03,580
abetted<font color="#E5E5E5"> into other people's pages you</font>

190
00:07:02,319 --> 00:07:06,279
<font color="#E5E5E5">probably don't want</font><font color="#CCCCCC"> to let them do that</font>

191
00:07:03,580 --> 00:07:09,099
<font color="#CCCCCC">and that's what x-frame</font><font color="#E5E5E5"> options does so</font>

192
00:07:06,279 --> 00:07:11,979
<font color="#E5E5E5">some common good settings are just shut</font>

193
00:07:09,099 --> 00:07:13,930
it<font color="#CCCCCC"> down straight-up deny or use</font><font color="#E5E5E5"> same</font>

194
00:07:11,979 --> 00:07:16,180
<font color="#E5E5E5">origin which says hey you can embed this</font>

195
00:07:13,930 --> 00:07:18,099
but only on the same<font color="#CCCCCC"> domain that it was</font>

196
00:07:16,180 --> 00:07:20,439
loaded from none of this cross-site

197
00:07:18,099 --> 00:07:22,599
embedding<font color="#E5E5E5"> or you can do a very very</font>

198
00:07:20,439 --> 00:07:24,340
<font color="#E5E5E5">specific whitelist with the allow from</font>

199
00:07:22,599 --> 00:07:26,550
directive all of those<font color="#E5E5E5"> will give you</font>

200
00:07:24,340 --> 00:07:29,258
some more security here<font color="#CCCCCC"> that said</font>

201
00:07:26,550 --> 00:07:31,210
<font color="#E5E5E5">spoiler</font><font color="#CCCCCC"> alert content</font><font color="#E5E5E5"> security policy</font>

202
00:07:29,259 --> 00:07:33,279
which<font color="#E5E5E5"> we'll talk about right at the end</font>

203
00:07:31,210 --> 00:07:35,948
is way better<font color="#E5E5E5"> than all of this it's way</font>

204
00:07:33,279 --> 00:07:37,389
more customizable way stronger<font color="#CCCCCC"> but it's</font>

205
00:07:35,949 --> 00:07:39,339
not really interpreted well<font color="#E5E5E5"> without</font>

206
00:07:37,389 --> 00:07:41,050
older<font color="#CCCCCC"> browsers so if you have a</font>

207
00:07:39,339 --> 00:07:43,810
<font color="#E5E5E5">public-facing site on the</font><font color="#CCCCCC"> internet</font><font color="#E5E5E5"> and</font>

208
00:07:41,050 --> 00:07:45,939
like me have a depressing percentage of

209
00:07:43,810 --> 00:07:48,400
your visitors still on Internet<font color="#E5E5E5"> Explorer</font>

210
00:07:45,939 --> 00:07:50,680
<font color="#E5E5E5">you're gonna want to send both the X</font>

211
00:07:48,400 --> 00:07:52,750
frame options and the content security

212
00:07:50,680 --> 00:07:54,430
policy header<font color="#E5E5E5"> to make sure you have</font>

213
00:07:52,750 --> 00:07:58,240
something<font color="#CCCCCC"> that</font><font color="#E5E5E5"> all browsers</font><font color="#CCCCCC"> actually</font>

214
00:07:54,430 --> 00:08:00,759
understand<font color="#E5E5E5"> next up is strict Transport</font>

215
00:07:58,240 --> 00:08:02,529
Security<font color="#E5E5E5"> and this is one that I really</font>

216
00:08:00,759 --> 00:08:04,060
enjoy<font color="#E5E5E5"> because it's around the time when</font>

217
00:08:02,529 --> 00:08:06,729
we realized that we<font color="#E5E5E5"> didn't have</font><font color="#CCCCCC"> to have</font>

218
00:08:04,060 --> 00:08:09,879
X in front<font color="#CCCCCC"> of every single</font><font color="#E5E5E5"> custom HTTP</font>

219
00:08:06,729 --> 00:08:12,430
header<font color="#E5E5E5"> this came out of Moxie</font>

220
00:08:09,879 --> 00:08:16,419
Marlinspike demo of SSL strip<font color="#E5E5E5"> at</font>

221
00:08:12,430 --> 00:08:18,099
blackhat in 2009 I believe<font color="#E5E5E5"> and in order</font>

222
00:08:16,419 --> 00:08:20,109
to<font color="#E5E5E5"> understand what's going</font><font color="#CCCCCC"> on</font><font color="#E5E5E5"> here</font><font color="#CCCCCC"> let's</font>

223
00:08:18,099 --> 00:08:22,060
do a<font color="#CCCCCC"> walk-through</font><font color="#E5E5E5"> of what what a normal</font>

224
00:08:20,110 --> 00:08:24,550
<font color="#CCCCCC">simple browser request is supposed to</font>

225
00:08:22,060 --> 00:08:26,379
look like<font color="#CCCCCC"> alright</font><font color="#E5E5E5"> so you got your client</font>

226
00:08:24,550 --> 00:08:29,050
the client wants to go to example.com

227
00:08:26,379 --> 00:08:31,930
<font color="#E5E5E5">they type it</font><font color="#CCCCCC"> into their browser</font><font color="#E5E5E5"> simple</font>

228
00:08:29,050 --> 00:08:34,390
<font color="#CCCCCC">DNS free resolution lets</font><font color="#E5E5E5"> them know the</font>

229
00:08:31,930 --> 00:08:36,190
<font color="#E5E5E5">IP address and the default of every</font>

230
00:08:34,390 --> 00:08:37,958
single<font color="#E5E5E5"> major browser is something that</font>

231
00:08:36,190 --> 00:08:40,570
the user happened to type in rather than

232
00:08:37,958 --> 00:08:44,109
click is we're going<font color="#CCCCCC"> to start over</font><font color="#E5E5E5"> HTTP</font>

233
00:08:40,570 --> 00:08:46,839
over an unencrypted session so any major

234
00:08:44,110 --> 00:08:49,720
server<font color="#E5E5E5"> modern server and built in the</font>

235
00:08:46,839 --> 00:08:51,550
past<font color="#CCCCCC"> 10 years is</font><font color="#E5E5E5"> only listening on HTTP</font>

236
00:08:49,720 --> 00:08:53,360
to say<font color="#E5E5E5"> oh whoa whoa wait a sec let's</font>

237
00:08:51,550 --> 00:08:56,209
redirect<font color="#E5E5E5"> this conversation back</font><font color="#CCCCCC"> to a CH</font>

238
00:08:53,360 --> 00:08:57,380
yes<font color="#E5E5E5"> which should work just fine the</font>

239
00:08:56,209 --> 00:08:59,689
<font color="#CCCCCC">browser's gonna honor it</font>

240
00:08:57,380 --> 00:09:02,000
<font color="#E5E5E5">you're gonna do that TLS negotiation and</font>

241
00:08:59,690 --> 00:09:04,370
dance with public in private<font color="#CCCCCC"> keys</font>

242
00:09:02,000 --> 00:09:06,620
I trust it awesome here's the content

243
00:09:04,370 --> 00:09:08,300
way to go now<font color="#E5E5E5"> that's off everything's</font>

244
00:09:06,620 --> 00:09:10,519
working<font color="#E5E5E5"> great</font><font color="#CCCCCC"> but let's assume</font><font color="#E5E5E5"> that</font>

245
00:09:08,300 --> 00:09:11,240
there's someone not so great<font color="#E5E5E5"> surprise</font>

246
00:09:10,519 --> 00:09:13,760
<font color="#CCCCCC">surprise</font>

247
00:09:11,240 --> 00:09:15,500
that's large chunks<font color="#E5E5E5"> of the</font><font color="#CCCCCC"> internet</font><font color="#E5E5E5"> so</font>

248
00:09:13,760 --> 00:09:17,089
if you have someone<font color="#CCCCCC"> not so great a</font>

249
00:09:15,500 --> 00:09:19,640
person in the<font color="#E5E5E5"> middle attack looks like</font>

250
00:09:17,089 --> 00:09:21,800
this<font color="#E5E5E5"> where the client still requests</font>

251
00:09:19,640 --> 00:09:25,040
<font color="#E5E5E5">that domain and they can just straight</font>

252
00:09:21,800 --> 00:09:27,079
up<font color="#E5E5E5"> and lie about the DNS resolution</font><font color="#CCCCCC"> okay</font>

253
00:09:25,040 --> 00:09:29,180
<font color="#E5E5E5">again the default is</font><font color="#CCCCCC"> going to go</font><font color="#E5E5E5"> over</font>

254
00:09:27,079 --> 00:09:31,399
HTTP but remember the<font color="#CCCCCC"> server's</font><font color="#E5E5E5"> only</font>

255
00:09:29,180 --> 00:09:33,380
<font color="#E5E5E5">going to respond with content over HTTP</font>

256
00:09:31,399 --> 00:09:35,329
but for the person<font color="#CCCCCC"> in the</font><font color="#E5E5E5"> middle attack</font>

257
00:09:33,380 --> 00:09:38,269
<font color="#E5E5E5">that doesn't matter</font><font color="#CCCCCC"> it will</font><font color="#E5E5E5"> communicate</font>

258
00:09:35,329 --> 00:09:40,010
<font color="#E5E5E5">with the server over</font><font color="#CCCCCC"> HTTP doesn't care</font>

259
00:09:38,269 --> 00:09:42,050
about anything just<font color="#E5E5E5"> grabs the content</font>

260
00:09:40,010 --> 00:09:44,000
<font color="#E5E5E5">and then on the way back</font><font color="#CCCCCC"> inserts</font>

261
00:09:42,050 --> 00:09:47,300
whatever a<font color="#E5E5E5"> little malicious tidbit it</font>

262
00:09:44,000 --> 00:09:50,029
wants and the end client is gonna<font color="#E5E5E5"> get</font>

263
00:09:47,300 --> 00:09:51,760
<font color="#E5E5E5">that and gonna run it because even</font>

264
00:09:50,029 --> 00:09:55,130
<font color="#CCCCCC">though the server thinks</font><font color="#E5E5E5"> it's only</font>

265
00:09:51,760 --> 00:09:56,750
communicating with<font color="#CCCCCC"> clients over HTTP the</font>

266
00:09:55,130 --> 00:09:58,880
man and<font color="#E5E5E5"> that or the person in the middle</font>

267
00:09:56,750 --> 00:10:01,430
is able to<font color="#CCCCCC"> downgrade that</font><font color="#E5E5E5"> to plaintext</font>

268
00:09:58,880 --> 00:10:03,500
HTTP all right so how does strict

269
00:10:01,430 --> 00:10:05,239
Transport Security<font color="#CCCCCC"> help with this</font>

270
00:10:03,500 --> 00:10:08,510
<font color="#CCCCCC">situation all right</font>

271
00:10:05,240 --> 00:10:10,760
same deal client can look<font color="#E5E5E5"> and still get</font>

272
00:10:08,510 --> 00:10:12,620
a faulty<font color="#E5E5E5"> DNS record the attacker can</font>

273
00:10:10,760 --> 00:10:14,600
still<font color="#CCCCCC"> totally lie strict Transport</font>

274
00:10:12,620 --> 00:10:15,980
Security doesn't<font color="#E5E5E5"> help with that that's a</font>

275
00:10:14,600 --> 00:10:18,529
different<font color="#CCCCCC"> set of security controls that</font>

276
00:10:15,980 --> 00:10:21,230
<font color="#E5E5E5">people are working</font><font color="#CCCCCC"> on what it does do</font>

277
00:10:18,529 --> 00:10:23,779
however<font color="#E5E5E5"> is if it realizes that strict</font>

278
00:10:21,230 --> 00:10:27,370
Transport Security is set for<font color="#E5E5E5"> that site</font>

279
00:10:23,779 --> 00:10:30,110
<font color="#CCCCCC">it will do an internal redirect to HTTPS</font>

280
00:10:27,370 --> 00:10:32,540
<font color="#CCCCCC">before the</font><font color="#E5E5E5"> request</font><font color="#CCCCCC"> ever leaves the</font>

281
00:10:30,110 --> 00:10:34,519
browser<font color="#CCCCCC"> at which</font><font color="#E5E5E5"> point the attacker can</font>

282
00:10:32,540 --> 00:10:36,349
send<font color="#CCCCCC"> a garbled</font><font color="#E5E5E5"> cert or whatever and</font>

283
00:10:34,519 --> 00:10:38,240
you're<font color="#E5E5E5"> gonna get a certain mismatch and</font>

284
00:10:36,350 --> 00:10:41,329
<font color="#E5E5E5">in addition</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> your regular cert</font>

285
00:10:38,240 --> 00:10:43,880
mismatch if strict Transport Security is

286
00:10:41,329 --> 00:10:45,680
enabled<font color="#E5E5E5"> it's much much</font><font color="#CCCCCC"> harder</font><font color="#E5E5E5"> for the</font>

287
00:10:43,880 --> 00:10:48,560
user to<font color="#E5E5E5"> just stupidly click through and</font>

288
00:10:45,680 --> 00:10:50,510
be like yeah<font color="#CCCCCC"> okay whatever all</font><font color="#E5E5E5"> right so</font>

289
00:10:48,560 --> 00:10:52,310
if you're<font color="#CCCCCC"> gonna be</font><font color="#E5E5E5"> setting this for your</font>

290
00:10:50,510 --> 00:10:54,949
site here's what<font color="#E5E5E5"> you're gonna do basic</font>

291
00:10:52,310 --> 00:10:58,160
version<font color="#CCCCCC"> of strict Transport Security</font><font color="#E5E5E5"> is</font>

292
00:10:54,949 --> 00:11:00,109
just<font color="#CCCCCC"> Mac's</font><font color="#E5E5E5"> age equals expires times in a</font>

293
00:10:58,160 --> 00:11:02,630
number of<font color="#E5E5E5"> seconds and</font><font color="#CCCCCC"> every single</font>

294
00:11:00,110 --> 00:11:04,590
request<font color="#CCCCCC"> after that</font><font color="#E5E5E5"> initial headers</font>

295
00:11:02,630 --> 00:11:07,650
respond until the time expires

296
00:11:04,590 --> 00:11:09,000
is going<font color="#E5E5E5"> to be over HTTP now the next</font>

297
00:11:07,650 --> 00:11:11,130
<font color="#CCCCCC">level that you can get with that is</font>

298
00:11:09,000 --> 00:11:14,400
<font color="#E5E5E5">adding that</font><font color="#CCCCCC"> little pre lookup sorry</font>

299
00:11:11,130 --> 00:11:16,230
the include subdomains<font color="#E5E5E5"> flag and for</font>

300
00:11:14,400 --> 00:11:17,819
include subdomains if<font color="#E5E5E5"> you're responding</font>

301
00:11:16,230 --> 00:11:20,700
<font color="#E5E5E5">with that at the root of your site</font>

302
00:11:17,820 --> 00:11:22,380
example.com<font color="#CCCCCC"> then the</font><font color="#E5E5E5"> browser's</font><font color="#CCCCCC"> gonna</font>

303
00:11:20,700 --> 00:11:24,990
treat<font color="#CCCCCC"> that strict Transport Security</font>

304
00:11:22,380 --> 00:11:27,660
header<font color="#E5E5E5"> for all your subdomains</font><font color="#CCCCCC"> mail that</font>

305
00:11:24,990 --> 00:11:30,510
<font color="#E5E5E5">example calm or</font><font color="#CCCCCC"> dub dub dub</font><font color="#E5E5E5"> example.com</font>

306
00:11:27,660 --> 00:11:32,400
or fubar whatever<font color="#E5E5E5"> example.com</font><font color="#CCCCCC"> will get</font>

307
00:11:30,510 --> 00:11:35,490
the same strict Transport Security

308
00:11:32,400 --> 00:11:37,740
header but here's the thing

309
00:11:35,490 --> 00:11:39,839
these two<font color="#E5E5E5"> versions work great at</font>

310
00:11:37,740 --> 00:11:43,200
<font color="#E5E5E5">protecting your end users the end</font>

311
00:11:39,839 --> 00:11:46,080
clients for the second request<font color="#E5E5E5"> onwards</font>

312
00:11:43,200 --> 00:11:48,600
it can't predict it protect<font color="#CCCCCC"> the</font><font color="#E5E5E5"> client</font>

313
00:11:46,080 --> 00:11:50,970
<font color="#E5E5E5">from the very first request if you still</font>

314
00:11:48,600 --> 00:11:53,279
have a man in the<font color="#E5E5E5"> middle that very first</font>

315
00:11:50,970 --> 00:11:55,110
request might not realize that strict

316
00:11:53,279 --> 00:11:57,270
Transport Security is enabled<font color="#E5E5E5"> for your</font>

317
00:11:55,110 --> 00:11:59,430
site and on the way<font color="#E5E5E5"> back the attacker</font>

318
00:11:57,270 --> 00:12:02,220
<font color="#E5E5E5">can both strip out</font><font color="#CCCCCC"> the strict Transport</font>

319
00:11:59,430 --> 00:12:05,010
Security header<font color="#E5E5E5"> and still downgraded</font><font color="#CCCCCC"> to</font>

320
00:12:02,220 --> 00:12:08,070
http<font color="#E5E5E5"> and so the way</font><font color="#CCCCCC"> that we've decided</font>

321
00:12:05,010 --> 00:12:11,610
to do this is by excuse me<font color="#E5E5E5"> strict</font>

322
00:12:08,070 --> 00:12:13,980
Transport Security<font color="#CCCCCC"> pre loading</font><font color="#E5E5E5"> which if</font>

323
00:12:11,610 --> 00:12:15,990
you do all of<font color="#E5E5E5"> the requirements basically</font>

324
00:12:13,980 --> 00:12:18,780
every single sub domain on this domain

325
00:12:15,990 --> 00:12:21,330
it's gonna be<font color="#CCCCCC"> HTTP enabled</font><font color="#E5E5E5"> with a valid</font>

326
00:12:18,780 --> 00:12:23,550
cert<font color="#E5E5E5"> you</font><font color="#CCCCCC"> can get a max</font><font color="#E5E5E5"> age over a year</font>

327
00:12:21,330 --> 00:12:25,890
you<font color="#CCCCCC"> can then submit this to</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> browser</font>

328
00:12:23,550 --> 00:12:28,859
manufacturers<font color="#CCCCCC"> to have</font><font color="#E5E5E5"> it pre-loaded and</font>

329
00:12:25,890 --> 00:12:31,470
<font color="#E5E5E5">pre-loaded basically means you add your</font>

330
00:12:28,860 --> 00:12:33,780
<font color="#E5E5E5">site to a really really</font><font color="#CCCCCC"> long</font><font color="#E5E5E5"> text file</font>

331
00:12:31,470 --> 00:12:36,030
<font color="#CCCCCC">so what this means is my tiny little</font>

332
00:12:33,780 --> 00:12:38,880
<font color="#E5E5E5">blog</font><font color="#CCCCCC"> domain that gets two hits year</font><font color="#E5E5E5"> is</font>

333
00:12:36,030 --> 00:12:41,100
on a text file<font color="#E5E5E5"> on everyone's computer in</font>

334
00:12:38,880 --> 00:12:42,960
this<font color="#CCCCCC"> room</font><font color="#E5E5E5"> probably</font><font color="#CCCCCC"> more</font><font color="#E5E5E5"> than once once</font>

335
00:12:41,100 --> 00:12:45,570
for Chrome<font color="#E5E5E5"> another for Firefox and other</font>

336
00:12:42,960 --> 00:12:47,070
<font color="#E5E5E5">for brave</font><font color="#CCCCCC"> and this is</font><font color="#E5E5E5"> obviously totally</font>

337
00:12:45,570 --> 00:12:48,930
<font color="#E5E5E5">sustainable where we're going to just</font>

338
00:12:47,070 --> 00:12:50,130
<font color="#CCCCCC">include every single</font><font color="#E5E5E5"> domain that's ever</font>

339
00:12:48,930 --> 00:12:51,930
going<font color="#E5E5E5"> to be on the Internet</font>

340
00:12:50,130 --> 00:12:53,459
<font color="#E5E5E5">now</font><font color="#CCCCCC"> it's seriously</font><font color="#E5E5E5"> though</font><font color="#CCCCCC"> if we do get</font>

341
00:12:51,930 --> 00:12:55,890
<font color="#E5E5E5">to a problem where the strict Transport</font>

342
00:12:53,459 --> 00:12:58,050
Security preload list is hundreds<font color="#E5E5E5"> of</font>

343
00:12:55,890 --> 00:13:00,060
gigabytes long that's a problem<font color="#CCCCCC"> that I'd</font>

344
00:12:58,050 --> 00:13:02,339
like to<font color="#CCCCCC"> deal with because that means</font>

345
00:13:00,060 --> 00:13:04,469
<font color="#CCCCCC">HTTP is ubiquitous and</font><font color="#E5E5E5"> going absolutely</font>

346
00:13:02,339 --> 00:13:05,970
<font color="#E5E5E5">everywhere but that's not the</font><font color="#CCCCCC"> future</font>

347
00:13:04,470 --> 00:13:08,130
that we live in<font color="#E5E5E5"> now and so we'll have</font>

348
00:13:05,970 --> 00:13:09,420
<font color="#E5E5E5">the browser of manufacturers deep figure</font>

349
00:13:08,130 --> 00:13:11,850
out what we're gonna do when this<font color="#E5E5E5"> file</font>

350
00:13:09,420 --> 00:13:14,490
grows<font color="#E5E5E5"> to big but until then go ahead</font><font color="#CCCCCC"> and</font>

351
00:13:11,850 --> 00:13:16,650
preload<font color="#CCCCCC"> your site so that</font><font color="#E5E5E5"> the very first</font>

352
00:13:14,490 --> 00:13:18,339
time<font color="#CCCCCC"> that a</font><font color="#E5E5E5"> client comes and tries to</font>

353
00:13:16,650 --> 00:13:20,680
<font color="#CCCCCC">talk</font><font color="#E5E5E5"> with you they'll be</font>

354
00:13:18,339 --> 00:13:25,029
connected<font color="#E5E5E5"> by</font><font color="#CCCCCC"> HTTP before the request</font>

355
00:13:20,680 --> 00:13:26,949
<font color="#CCCCCC">ever leads the browser</font><font color="#E5E5E5"> moving on we got</font>

356
00:13:25,029 --> 00:13:28,240
<font color="#E5E5E5">refer policy</font><font color="#CCCCCC"> it's one of the more modern</font>

357
00:13:26,949 --> 00:13:30,969
only been around for<font color="#CCCCCC"> a couple of years</font>

358
00:13:28,240 --> 00:13:32,769
<font color="#E5E5E5">and so well the first thing</font><font color="#CCCCCC"> that I don't</font>

359
00:13:30,970 --> 00:13:35,319
<font color="#E5E5E5">like</font><font color="#CCCCCC"> about</font><font color="#E5E5E5"> refer policy is</font><font color="#CCCCCC"> that</font>

360
00:13:32,769 --> 00:13:37,959
officially codifies in the<font color="#E5E5E5"> internet that</font>

361
00:13:35,319 --> 00:13:40,269
the original referer header with<font color="#CCCCCC"> 3 R's</font>

362
00:13:37,959 --> 00:13:42,489
<font color="#E5E5E5">is in fact a typo that</font><font color="#CCCCCC"> we're stuck with</font>

363
00:13:40,269 --> 00:13:45,009
forever<font color="#CCCCCC"> because it is dealt with using</font>

364
00:13:42,490 --> 00:13:47,199
<font color="#CCCCCC">VB fer policy with four R's</font>

365
00:13:45,009 --> 00:13:49,269
<font color="#CCCCCC">I kind of wish that we had just</font><font color="#E5E5E5"> decided</font>

366
00:13:47,199 --> 00:13:51,309
<font color="#CCCCCC">that refer with 3 R's</font><font color="#E5E5E5"> is a new word that</font>

367
00:13:49,269 --> 00:13:53,949
<font color="#E5E5E5">we made up in technology and totally not</font>

368
00:13:51,309 --> 00:13:56,680
a typo and<font color="#E5E5E5"> refer policy blows up that</font>

369
00:13:53,949 --> 00:13:58,809
<font color="#E5E5E5">fantasy of mine</font><font color="#CCCCCC"> that's</font><font color="#E5E5E5"> not the timeline</font>

370
00:13:56,680 --> 00:14:01,959
that<font color="#CCCCCC"> we're living when anyway the refer</font>

371
00:13:58,809 --> 00:14:04,420
a policy with<font color="#CCCCCC"> 3 R's</font><font color="#E5E5E5"> can sometimes leak</font>

372
00:14:01,959 --> 00:14:06,489
information<font color="#CCCCCC"> about your</font><font color="#E5E5E5"> users</font><font color="#CCCCCC"> to other</font>

373
00:14:04,420 --> 00:14:08,349
sites so for those<font color="#E5E5E5"> of</font><font color="#CCCCCC"> you who may not be</font>

374
00:14:06,490 --> 00:14:10,269
familiar basically every time<font color="#CCCCCC"> that</font>

375
00:14:08,350 --> 00:14:11,050
someone<font color="#E5E5E5"> it clicks on a link or navigate</font>

376
00:14:10,269 --> 00:14:13,959
somewhere<font color="#E5E5E5"> else</font>

377
00:14:11,050 --> 00:14:16,269
the<font color="#CCCCCC"> refer policy is set</font><font color="#E5E5E5"> that says hey</font>

378
00:14:13,959 --> 00:14:18,878
this person arrived at your site<font color="#E5E5E5"> coming</font>

379
00:14:16,269 --> 00:14:21,100
from here<font color="#E5E5E5"> and that could leak some</font>

380
00:14:18,879 --> 00:14:23,740
sensitive<font color="#CCCCCC"> information</font><font color="#E5E5E5"> so maybe there's</font>

381
00:14:21,100 --> 00:14:25,779
very specific query parameters or URI

382
00:14:23,740 --> 00:14:28,059
strings that really identify<font color="#E5E5E5"> the user</font>

383
00:14:25,779 --> 00:14:30,790
maybe you're running<font color="#CCCCCC"> a website that</font><font color="#E5E5E5"> is</font>

384
00:14:28,059 --> 00:14:32,620
<font color="#E5E5E5">you know politically sensitive or might</font>

385
00:14:30,790 --> 00:14:35,379
<font color="#CCCCCC">be something that your users would like</font>

386
00:14:32,620 --> 00:14:37,600
to be really<font color="#CCCCCC"> private</font><font color="#E5E5E5"> about or maybe</font>

387
00:14:35,379 --> 00:14:39,939
those you<font color="#E5E5E5"> are eyes include very</font>

388
00:14:37,600 --> 00:14:42,129
personally identifiable information<font color="#CCCCCC"> I</font>

389
00:14:39,939 --> 00:14:44,529
remember there<font color="#E5E5E5"> was some researchers out</font>

390
00:14:42,129 --> 00:14:46,649
of<font color="#CCCCCC"> Germany when they realize that ISPs</font>

391
00:14:44,529 --> 00:14:49,179
<font color="#E5E5E5">were selling what they said were quote</font>

392
00:14:46,649 --> 00:14:51,670
<font color="#E5E5E5">anonymized browsing records at their</font>

393
00:14:49,179 --> 00:14:54,639
customers<font color="#E5E5E5"> they went and bought a set and</font>

394
00:14:51,670 --> 00:14:57,490
<font color="#CCCCCC">we're able</font><font color="#E5E5E5"> to track</font><font color="#CCCCCC"> down individual</font>

395
00:14:54,639 --> 00:14:59,829
users because of things<font color="#CCCCCC"> like</font><font color="#E5E5E5"> very</font>

396
00:14:57,490 --> 00:15:02,110
<font color="#E5E5E5">specific URI</font><font color="#CCCCCC"> Suri's like there's a</font>

397
00:14:59,829 --> 00:15:04,388
profile edit page that you could only

398
00:15:02,110 --> 00:15:06,069
get<font color="#CCCCCC"> to if you were logged in</font><font color="#E5E5E5"> that</font>

399
00:15:04,389 --> 00:15:08,559
includes the name of the profile so I

400
00:15:06,069 --> 00:15:11,860
log<font color="#CCCCCC"> into LinkedIn</font><font color="#E5E5E5"> to edit my profile I</font>

401
00:15:08,559 --> 00:15:14,469
get a URI<font color="#CCCCCC"> that only</font><font color="#E5E5E5"> I will ever get and</font>

402
00:15:11,860 --> 00:15:16,870
that identifies an otherwise anonymous

403
00:15:14,470 --> 00:15:18,429
user<font color="#E5E5E5"> so if you don't want to think or</font>

404
00:15:16,870 --> 00:15:21,160
deal with<font color="#CCCCCC"> any</font><font color="#E5E5E5"> sort of information</font>

405
00:15:18,429 --> 00:15:23,079
<font color="#E5E5E5">leakage</font><font color="#CCCCCC"> you can use the referrer policy</font>

406
00:15:21,160 --> 00:15:24,999
the specific things that<font color="#E5E5E5"> you</font><font color="#CCCCCC"> want</font><font color="#E5E5E5"> to set</font>

407
00:15:23,079 --> 00:15:27,699
again is going<font color="#E5E5E5"> to</font><font color="#CCCCCC"> depend on</font><font color="#E5E5E5"> your</font>

408
00:15:24,999 --> 00:15:29,769
<font color="#E5E5E5">specific site but some good options</font>

409
00:15:27,699 --> 00:15:32,079
might include<font color="#E5E5E5"> setting it to strict</font>

410
00:15:29,769 --> 00:15:34,380
origin which you just<font color="#E5E5E5"> slice off the URI</font>

411
00:15:32,080 --> 00:15:37,630
that just include the domain<font color="#E5E5E5"> name or</font>

412
00:15:34,380 --> 00:15:39,700
strict<font color="#E5E5E5"> origin when cross</font><font color="#CCCCCC"> origin which</font>

413
00:15:37,630 --> 00:15:41,110
will give the full referer header as

414
00:15:39,700 --> 00:15:43,120
they're bouncing around<font color="#E5E5E5"> inside of your</font>

415
00:15:41,110 --> 00:15:45,820
site which is usually<font color="#CCCCCC"> helpful for</font><font color="#E5E5E5"> things</font>

416
00:15:43,120 --> 00:15:48,460
like<font color="#E5E5E5"> user tracking excuse me like</font>

417
00:15:45,820 --> 00:15:50,620
various analytics<font color="#E5E5E5"> use the full refer</font>

418
00:15:48,460 --> 00:15:52,480
header to help you<font color="#CCCCCC"> track</font><font color="#E5E5E5"> trace the path</font>

419
00:15:50,620 --> 00:15:55,060
that users are going<font color="#E5E5E5"> through your site</font>

420
00:15:52,480 --> 00:15:57,250
marketing<font color="#E5E5E5"> UI folks really enjoy having</font>

421
00:15:55,060 --> 00:15:59,619
that<font color="#E5E5E5"> information but when you go across</font>

422
00:15:57,250 --> 00:16:02,230
<font color="#E5E5E5">to a different site it'll slice off that</font>

423
00:15:59,620 --> 00:16:03,700
URI information or you can say<font color="#E5E5E5"> hey I</font>

424
00:16:02,230 --> 00:16:05,650
don't want to deal<font color="#CCCCCC"> with this crap just</font>

425
00:16:03,700 --> 00:16:08,680
<font color="#E5E5E5">shut it off entirely set the</font><font color="#CCCCCC"> nodal</font>

426
00:16:05,650 --> 00:16:11,140
referer header<font color="#E5E5E5"> that all works</font><font color="#CCCCCC"> all right</font>

427
00:16:08,680 --> 00:16:12,790
<font color="#E5E5E5">I want to briefly touch on feature</font>

428
00:16:11,140 --> 00:16:14,740
policy without<font color="#E5E5E5"> going too in-depth</font>

429
00:16:12,790 --> 00:16:16,150
<font color="#E5E5E5">because spoiler alert</font>

430
00:16:14,740 --> 00:16:18,340
if you understand content security

431
00:16:16,150 --> 00:16:20,140
policy which is<font color="#E5E5E5"> coming up right next you</font>

432
00:16:18,340 --> 00:16:22,720
understand feature policy it's like

433
00:16:20,140 --> 00:16:25,330
content<font color="#E5E5E5"> security policy but for features</font>

434
00:16:22,720 --> 00:16:27,340
and for features I mean things that are

435
00:16:25,330 --> 00:16:28,930
functionality so whether<font color="#E5E5E5"> or not your</font>

436
00:16:27,340 --> 00:16:31,900
site's gonna use the microphone or

437
00:16:28,930 --> 00:16:32,620
geolocation data or video or<font color="#E5E5E5"> so on and</font>

438
00:16:31,900 --> 00:16:34,390
<font color="#E5E5E5">so forth</font>

439
00:16:32,620 --> 00:16:36,580
feature policy is something<font color="#CCCCCC"> that you</font>

440
00:16:34,390 --> 00:16:39,069
could use<font color="#CCCCCC"> to restrict your</font><font color="#E5E5E5"> site to a</font>

441
00:16:36,580 --> 00:16:41,110
small<font color="#E5E5E5"> subset of</font><font color="#CCCCCC"> features the only</font>

442
00:16:39,070 --> 00:16:42,490
problem is is this<font color="#CCCCCC"> something that Google</font>

443
00:16:41,110 --> 00:16:44,650
came up with and<font color="#E5E5E5"> thought was a great</font>

444
00:16:42,490 --> 00:16:46,780
<font color="#CCCCCC">idea</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> so is totally implemented</font>

445
00:16:44,650 --> 00:16:48,520
across<font color="#E5E5E5"> every single browser that Google</font>

446
00:16:46,780 --> 00:16:50,230
manufacturers or is based on the

447
00:16:48,520 --> 00:16:52,300
chromium<font color="#CCCCCC"> open</font><font color="#E5E5E5"> source version that they</font>

448
00:16:50,230 --> 00:16:54,010
release and everybody else is kind<font color="#CCCCCC"> of</font>

449
00:16:52,300 --> 00:16:55,839
deciding how this is<font color="#E5E5E5"> going to work</font><font color="#CCCCCC"> so in</font>

450
00:16:54,010 --> 00:16:57,760
<font color="#E5E5E5">the past couple</font><font color="#CCCCCC"> of months</font><font color="#E5E5E5"> Firefox</font>

451
00:16:55,840 --> 00:17:00,640
actually added this<font color="#E5E5E5"> functionality but</font>

452
00:16:57,760 --> 00:17:02,020
<font color="#E5E5E5">they turned it off by default</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> but</font>

453
00:17:00,640 --> 00:17:03,819
then again everything<font color="#CCCCCC"> is becoming the</font>

454
00:17:02,020 --> 00:17:04,930
Google Chrome browser so<font color="#E5E5E5"> you know maybe</font>

455
00:17:03,820 --> 00:17:08,050
this will show up sooner<font color="#CCCCCC"> than will</font>

456
00:17:04,930 --> 00:17:09,550
exceed but know that it's here<font color="#E5E5E5"> this is</font>

457
00:17:08,050 --> 00:17:11,349
<font color="#E5E5E5">probably going</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> be a tool</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> you can</font>

458
00:17:09,550 --> 00:17:12,879
<font color="#E5E5E5">leverage in</font><font color="#CCCCCC"> your toolbox</font><font color="#E5E5E5"> more</font>

459
00:17:11,349 --> 00:17:14,829
<font color="#E5E5E5">consistently across your user base</font>

460
00:17:12,880 --> 00:17:17,280
<font color="#CCCCCC">within a couple</font><font color="#E5E5E5"> of years it's just</font>

461
00:17:14,829 --> 00:17:19,899
something that's coming<font color="#E5E5E5"> down the road</font>

462
00:17:17,280 --> 00:17:22,660
<font color="#E5E5E5">now with that I want to do a deeper dive</font>

463
00:17:19,900 --> 00:17:26,050
<font color="#E5E5E5">into content security policy because</font>

464
00:17:22,660 --> 00:17:30,520
content security policy<font color="#E5E5E5"> is the 800-pound</font>

465
00:17:26,050 --> 00:17:31,990
gorilla<font color="#E5E5E5"> of security headers because when</font>

466
00:17:30,520 --> 00:17:36,100
we talk about<font color="#CCCCCC"> content security</font><font color="#E5E5E5"> policy</font>

467
00:17:31,990 --> 00:17:38,740
<font color="#E5E5E5">the bad thing is somehow somewhere who</font>

468
00:17:36,100 --> 00:17:40,209
knows what or why there's some content

469
00:17:38,740 --> 00:17:40,800
that's<font color="#E5E5E5"> running on your site that</font><font color="#CCCCCC"> you</font>

470
00:17:40,210 --> 00:17:43,200
<font color="#E5E5E5">don't</font>

471
00:17:40,800 --> 00:17:45,810
<font color="#E5E5E5">there and so content</font><font color="#CCCCCC"> security policy</font>

472
00:17:43,200 --> 00:17:47,940
lets you lock down<font color="#E5E5E5"> to a very specific</font>

473
00:17:45,810 --> 00:17:50,940
whitelist<font color="#E5E5E5"> what type</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> content that you</font>

474
00:17:47,940 --> 00:17:53,640
want<font color="#E5E5E5"> in your site imagine this like a</font>

475
00:17:50,940 --> 00:17:55,950
big bouncer<font color="#E5E5E5"> standing outside of a club</font>

476
00:17:53,640 --> 00:17:58,140
with a little you know clipboard that

477
00:17:55,950 --> 00:18:00,090
lists every<font color="#CCCCCC"> single piece of content that</font>

478
00:17:58,140 --> 00:18:02,250
<font color="#CCCCCC">is invited to</font><font color="#E5E5E5"> come to</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> party that</font><font color="#CCCCCC"> is</font>

479
00:18:00,090 --> 00:18:04,290
your website<font color="#CCCCCC"> and if something shows up</font>

480
00:18:02,250 --> 00:18:05,940
<font color="#CCCCCC">that's not on the</font><font color="#E5E5E5"> list</font><font color="#CCCCCC"> they beat</font><font color="#E5E5E5"> them up</font>

481
00:18:04,290 --> 00:18:07,649
<font color="#E5E5E5">and they throw them out and then they</font>

482
00:18:05,940 --> 00:18:09,450
<font color="#E5E5E5">send you a report to let them to let you</font>

483
00:18:07,650 --> 00:18:12,390
know who<font color="#E5E5E5"> tried to force their</font><font color="#CCCCCC"> way</font><font color="#E5E5E5"> into</font>

484
00:18:09,450 --> 00:18:14,340
the<font color="#E5E5E5"> party and when I say content that's</font>

485
00:18:12,390 --> 00:18:17,160
a really generic<font color="#E5E5E5"> kind of term what do I</font>

486
00:18:14,340 --> 00:18:20,520
mean when<font color="#CCCCCC"> I say content</font><font color="#E5E5E5"> I mean</font>

487
00:18:17,160 --> 00:18:22,950
content I mean fonts I mean<font color="#E5E5E5"> JavaScript</font>

488
00:18:20,520 --> 00:18:24,840
I mean CSS I mean images I mean whether

489
00:18:22,950 --> 00:18:26,910
or not<font color="#E5E5E5"> they're sub resource integrity</font>

490
00:18:24,840 --> 00:18:29,550
enabled on everything I mean upgrading

491
00:18:26,910 --> 00:18:31,740
HTTP requests to<font color="#E5E5E5"> HTTPS who gets to</font><font color="#CCCCCC"> embed</font>

492
00:18:29,550 --> 00:18:33,899
you get the<font color="#E5E5E5"> idea if there's something</font>

493
00:18:31,740 --> 00:18:35,910
that<font color="#E5E5E5"> your website</font><font color="#CCCCCC"> is able to do more</font>

494
00:18:33,900 --> 00:18:38,070
<font color="#E5E5E5">likely than not</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> there is a content</font>

495
00:18:35,910 --> 00:18:41,370
security policy directive<font color="#E5E5E5"> for that</font>

496
00:18:38,070 --> 00:18:44,040
specific<font color="#CCCCCC"> type</font><font color="#E5E5E5"> of content so let's dive a</font>

497
00:18:41,370 --> 00:18:46,139
little deeper and see how we would<font color="#CCCCCC"> build</font>

498
00:18:44,040 --> 00:18:48,930
<font color="#E5E5E5">this type of a content security policy</font>

499
00:18:46,140 --> 00:18:51,810
header<font color="#CCCCCC"> so here's the basic</font><font color="#E5E5E5"> one where you</font>

500
00:18:48,930 --> 00:18:53,700
say the default<font color="#CCCCCC"> for any type of content</font>

501
00:18:51,810 --> 00:18:57,419
<font color="#E5E5E5">is that it's got to come from me and</font>

502
00:18:53,700 --> 00:18:59,460
that means<font color="#E5E5E5"> the specific</font><font color="#CCCCCC"> origin</font><font color="#E5E5E5"> no other</font>

503
00:18:57,420 --> 00:19:01,560
subdomains allowed and we're gonna throw

504
00:18:59,460 --> 00:19:03,450
in a report URI which says hey<font color="#E5E5E5"> here's</font>

505
00:19:01,560 --> 00:19:05,580
the place to<font color="#CCCCCC"> send warnings of when I</font>

506
00:19:03,450 --> 00:19:07,020
block stuff for you<font color="#CCCCCC"> and then the</font>

507
00:19:05,580 --> 00:19:08,699
developer runs up<font color="#CCCCCC"> inside oh wait wait</font>

508
00:19:07,020 --> 00:19:10,470
wait<font color="#E5E5E5"> wait we need to be</font><font color="#CCCCCC"> able to connect</font>

509
00:19:08,700 --> 00:19:12,810
<font color="#CCCCCC">to Google</font><font color="#E5E5E5"> Analytics for a metric stuff</font>

510
00:19:10,470 --> 00:19:14,880
and you say<font color="#E5E5E5"> okay</font><font color="#CCCCCC"> no sweat we're gonna</font>

511
00:19:12,810 --> 00:19:17,580
add another line to<font color="#CCCCCC"> the</font><font color="#E5E5E5"> clipboard guest</font>

512
00:19:14,880 --> 00:19:19,380
<font color="#CCCCCC">list great</font><font color="#E5E5E5"> Google Analytics that's a</font>

513
00:19:17,580 --> 00:19:21,330
site<font color="#CCCCCC"> that you're now allowed to connect</font>

514
00:19:19,380 --> 00:19:23,580
to and everyone's like<font color="#CCCCCC"> okay</font><font color="#E5E5E5"> fine</font><font color="#CCCCCC"> oh but</font>

515
00:19:21,330 --> 00:19:25,230
wait we have inline JavaScript<font color="#E5E5E5"> and this</font>

516
00:19:23,580 --> 00:19:27,360
little Facebook<font color="#E5E5E5"> Connect widget</font><font color="#CCCCCC"> you're</font>

517
00:19:25,230 --> 00:19:29,850
like<font color="#E5E5E5"> okay okay we're just</font><font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> add</font>

518
00:19:27,360 --> 00:19:31,889
<font color="#E5E5E5">another line and you</font><font color="#CCCCCC"> can</font><font color="#E5E5E5"> see how you can</font>

519
00:19:29,850 --> 00:19:34,649
be slowly building out a<font color="#E5E5E5"> content</font>

520
00:19:31,890 --> 00:19:36,090
security policy<font color="#E5E5E5"> as your guest list of</font>

521
00:19:34,650 --> 00:19:39,990
<font color="#E5E5E5">who's invited to show up up to your</font>

522
00:19:36,090 --> 00:19:42,770
<font color="#E5E5E5">website now I want to outline the unsafe</font>

523
00:19:39,990 --> 00:19:45,660
inline<font color="#E5E5E5"> for the script source parameter</font>

524
00:19:42,770 --> 00:19:47,670
<font color="#E5E5E5">it would be our goal as security</font>

525
00:19:45,660 --> 00:19:50,220
professionals<font color="#CCCCCC"> to</font><font color="#E5E5E5"> be</font><font color="#CCCCCC"> able</font><font color="#E5E5E5"> to get that out</font>

526
00:19:47,670 --> 00:19:52,500
<font color="#E5E5E5">of your content security policy because</font>

527
00:19:50,220 --> 00:19:54,490
if you're able<font color="#CCCCCC"> to successfully</font><font color="#E5E5E5"> pull that</font>

528
00:19:52,500 --> 00:19:58,630
out<font color="#E5E5E5"> of your content security policy</font>

529
00:19:54,490 --> 00:20:01,450
entire classes of<font color="#E5E5E5"> bugs just died</font><font color="#CCCCCC"> your</font>

530
00:19:58,630 --> 00:20:03,400
<font color="#E5E5E5">website might have the most horrible</font>

531
00:20:01,450 --> 00:20:04,240
cross-site scripting vulnerabilities

532
00:20:03,400 --> 00:20:07,300
known to man

533
00:20:04,240 --> 00:20:09,370
but if unsafe in line is not in there an

534
00:20:07,300 --> 00:20:11,200
attacker can shove as much inline

535
00:20:09,370 --> 00:20:13,030
<font color="#E5E5E5">JavaScript as they want</font><font color="#CCCCCC"> into your web</font>

536
00:20:11,200 --> 00:20:16,570
application<font color="#E5E5E5"> and it's just not going to</font>

537
00:20:13,030 --> 00:20:19,000
run that said<font color="#E5E5E5"> getting read of unsafe</font>

538
00:20:16,570 --> 00:20:20,889
<font color="#CCCCCC">inline is particularly</font><font color="#E5E5E5"> difficult for</font>

539
00:20:19,000 --> 00:20:22,900
<font color="#CCCCCC">most organizations so let's take a look</font>

540
00:20:20,890 --> 00:20:24,430
at a couple<font color="#CCCCCC"> of</font><font color="#E5E5E5"> real-life examples of how</font>

541
00:20:22,900 --> 00:20:24,790
some<font color="#CCCCCC"> companies have</font><font color="#E5E5E5"> actually dealt with</font>

542
00:20:24,430 --> 00:20:28,390
this

543
00:20:24,790 --> 00:20:30,190
so here's news.google.com<font color="#CCCCCC"> and</font><font color="#E5E5E5"> I want you</font>

544
00:20:28,390 --> 00:20:33,160
to notice<font color="#CCCCCC"> that they're using unsafe</font>

545
00:20:30,190 --> 00:20:35,260
inline<font color="#E5E5E5"> in addition to sending</font><font color="#CCCCCC"> a nonce</font>

546
00:20:33,160 --> 00:20:37,240
<font color="#CCCCCC">now</font><font color="#E5E5E5"> Ananse has a very specific</font>

547
00:20:35,260 --> 00:20:38,850
cryptographic<font color="#E5E5E5"> term so if there's any</font>

548
00:20:37,240 --> 00:20:41,110
cryptographers in<font color="#E5E5E5"> the audience</font><font color="#CCCCCC"> I</font>

549
00:20:38,850 --> 00:20:43,810
apologize I'm sure I'm not<font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> be 100%</font>

550
00:20:41,110 --> 00:20:45,370
<font color="#E5E5E5">correct</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> encryption involves about</font>

551
00:20:43,810 --> 00:20:46,960
getting absolutely<font color="#E5E5E5"> everything 100%</font>

552
00:20:45,370 --> 00:20:49,060
<font color="#E5E5E5">correct thank you so much for</font><font color="#CCCCCC"> your work</font>

553
00:20:46,960 --> 00:20:52,120
but<font color="#CCCCCC"> the short version is a nots</font><font color="#E5E5E5"> is a</font>

554
00:20:49,060 --> 00:20:54,520
random unguessable string of some sort

555
00:20:52,120 --> 00:20:56,469
and it needs to<font color="#CCCCCC"> change every single</font><font color="#E5E5E5"> time</font>

556
00:20:54,520 --> 00:20:58,600
the page refreshes<font color="#CCCCCC"> and the way this</font>

557
00:20:56,470 --> 00:21:01,510
works<font color="#E5E5E5"> is if</font><font color="#CCCCCC"> the knots</font><font color="#E5E5E5"> in the content</font>

558
00:20:58,600 --> 00:21:03,760
security policy header<font color="#E5E5E5"> is the same as</font>

559
00:21:01,510 --> 00:21:06,040
the knots that's in the script tag it

560
00:21:03,760 --> 00:21:07,870
runs and if it's<font color="#CCCCCC"> at all</font><font color="#E5E5E5"> different</font>

561
00:21:06,040 --> 00:21:09,670
content security policy shoots it in the

562
00:21:07,870 --> 00:21:11,560
head you see why this has to change

563
00:21:09,670 --> 00:21:13,540
<font color="#E5E5E5">every single time if you used a static</font>

564
00:21:11,560 --> 00:21:15,940
<font color="#CCCCCC">non</font><font color="#E5E5E5"> switch any cryptographer</font><font color="#CCCCCC"> and the</font>

565
00:21:13,540 --> 00:21:17,920
word just look at the word static<font color="#CCCCCC"> nonce</font>

566
00:21:15,940 --> 00:21:20,580
<font color="#CCCCCC">the attacker just</font><font color="#E5E5E5"> drops that same string</font>

567
00:21:17,920 --> 00:21:24,070
<font color="#CCCCCC">and it has to change</font><font color="#E5E5E5"> every single time</font>

568
00:21:20,580 --> 00:21:25,330
and with modern browsers<font color="#CCCCCC"> that understand</font>

569
00:21:24,070 --> 00:21:28,389
the idea of knots

570
00:21:25,330 --> 00:21:30,100
<font color="#CCCCCC">it will then ignore the following unsafe</font>

571
00:21:28,390 --> 00:21:32,590
inline part of the content security

572
00:21:30,100 --> 00:21:34,360
policy<font color="#E5E5E5"> so this lets you fail open if you</font>

573
00:21:32,590 --> 00:21:36,280
have<font color="#CCCCCC"> a modern browser it's</font><font color="#E5E5E5"> protected</font><font color="#CCCCCC"> by</font>

574
00:21:34,360 --> 00:21:38,379
the nonce<font color="#CCCCCC"> if it doesn't understand what</font>

575
00:21:36,280 --> 00:21:39,820
a nonce is<font color="#E5E5E5"> the stuffs still gonna run</font>

576
00:21:38,380 --> 00:21:42,820
<font color="#E5E5E5">you're not</font><font color="#CCCCCC"> gonna break your</font><font color="#E5E5E5"> site on</font>

577
00:21:39,820 --> 00:21:46,060
older<font color="#CCCCCC"> browsers</font><font color="#E5E5E5"> another way that you can</font>

578
00:21:42,820 --> 00:21:48,580
deal with unsafe<font color="#CCCCCC"> inline is by hashing</font>

579
00:21:46,060 --> 00:21:51,490
<font color="#E5E5E5">the script and putting that into the</font>

580
00:21:48,580 --> 00:21:54,100
content security policy tab<font color="#E5E5E5"> now I want</font>

581
00:21:51,490 --> 00:21:57,520
<font color="#E5E5E5">to say that I got this exact example</font>

582
00:21:54,100 --> 00:21:58,810
<font color="#CCCCCC">from Mozilla stocks</font><font color="#E5E5E5"> and I really wanted</font>

583
00:21:57,520 --> 00:22:00,790
<font color="#E5E5E5">to show this really cool bit of</font>

584
00:21:58,810 --> 00:22:03,340
<font color="#CCCCCC">command-line foo of</font><font color="#E5E5E5"> echoing it and</font>

585
00:22:00,790 --> 00:22:05,260
piping it<font color="#CCCCCC"> into</font><font color="#E5E5E5"> sha-256 just the right</font>

586
00:22:03,340 --> 00:22:07,720
way to get<font color="#E5E5E5"> the exact thing here and I</font>

587
00:22:05,260 --> 00:22:09,610
couldn't<font color="#CCCCCC"> figure this</font><font color="#E5E5E5"> out so I'm</font>

588
00:22:07,720 --> 00:22:11,919
sure<font color="#E5E5E5"> Mozilla didn't get it wrong</font><font color="#CCCCCC"> so my</font>

589
00:22:09,610 --> 00:22:13,299
<font color="#E5E5E5">recommendation to you all is to do the</font>

590
00:22:11,919 --> 00:22:15,250
<font color="#E5E5E5">same thing that I did is where you load</font>

591
00:22:13,299 --> 00:22:16,900
it up<font color="#E5E5E5"> into a browser and you have</font>

592
00:22:15,250 --> 00:22:18,100
content<font color="#E5E5E5"> security policy shoot it in</font><font color="#CCCCCC"> the</font>

593
00:22:16,900 --> 00:22:19,419
<font color="#CCCCCC">head</font><font color="#E5E5E5"> and look at the console errors</font>

594
00:22:18,100 --> 00:22:20,709
there'll be a really nice<font color="#E5E5E5"> helpful thing</font>

595
00:22:19,419 --> 00:22:22,030
where it says hey by the<font color="#E5E5E5"> way if you want</font>

596
00:22:20,710 --> 00:22:24,850
this<font color="#E5E5E5"> to run just drop in this hash and</font>

597
00:22:22,030 --> 00:22:27,370
<font color="#CCCCCC">yeah</font><font color="#E5E5E5"> much better way to do that this</font><font color="#CCCCCC"> is</font>

598
00:22:24,850 --> 00:22:29,020
<font color="#CCCCCC">really</font><font color="#E5E5E5"> similar</font><font color="#CCCCCC"> to sub resource integrity</font>

599
00:22:27,370 --> 00:22:31,539
if you're familiar with<font color="#E5E5E5"> that where you</font>

600
00:22:29,020 --> 00:22:33,400
specify the hash of third-party

601
00:22:31,539 --> 00:22:35,140
resources<font color="#E5E5E5"> that you're embedding into</font>

602
00:22:33,400 --> 00:22:38,049
<font color="#E5E5E5">your site to say hey if this ever</font>

603
00:22:35,140 --> 00:22:40,870
changes<font color="#E5E5E5"> stop do not pass go do not</font>

604
00:22:38,049 --> 00:22:42,429
collect $200<font color="#E5E5E5"> which by the way sub</font>

605
00:22:40,870 --> 00:22:44,918
resource integrity<font color="#CCCCCC"> you can mandate</font>

606
00:22:42,429 --> 00:22:47,860
through content<font color="#E5E5E5"> security policy</font><font color="#CCCCCC"> anyway</font>

607
00:22:44,919 --> 00:22:49,150
<font color="#CCCCCC">but to again go over this the they seem</font>

608
00:22:47,860 --> 00:22:52,418
similar but<font color="#CCCCCC"> they're different</font>

609
00:22:49,150 --> 00:22:54,070
so just to recap<font color="#E5E5E5"> a nonce is different</font>

610
00:22:52,419 --> 00:22:57,370
every single<font color="#E5E5E5"> time</font><font color="#CCCCCC"> that you load the page</font>

611
00:22:54,070 --> 00:22:59,530
<font color="#CCCCCC">and can never ever be the same</font><font color="#E5E5E5"> and the</font>

612
00:22:57,370 --> 00:23:01,899
hash is always the same and you update

613
00:22:59,530 --> 00:23:05,129
<font color="#E5E5E5">it</font><font color="#CCCCCC"> anytime that you changed the</font><font color="#E5E5E5"> script</font>

614
00:23:01,900 --> 00:23:07,960
<font color="#E5E5E5">and both of these</font><font color="#CCCCCC"> are ways to</font><font color="#E5E5E5"> get</font><font color="#CCCCCC"> inline</font>

615
00:23:05,130 --> 00:23:10,659
<font color="#CCCCCC">javascript protected by your content</font>

616
00:23:07,960 --> 00:23:11,710
security policy header<font color="#E5E5E5"> all right with</font>

617
00:23:10,659 --> 00:23:14,110
that<font color="#E5E5E5"> let's take a look at another</font>

618
00:23:11,710 --> 00:23:16,000
<font color="#CCCCCC">example</font><font color="#E5E5E5"> which not</font><font color="#CCCCCC"> just to bag</font><font color="#E5E5E5"> on</font>

619
00:23:14,110 --> 00:23:18,309
<font color="#E5E5E5">Facebook but just to say as I said</font><font color="#CCCCCC"> if</font>

620
00:23:16,000 --> 00:23:20,110
<font color="#E5E5E5">you are at an organization and you just</font>

621
00:23:18,309 --> 00:23:22,750
can't<font color="#E5E5E5"> tighten the screws enough to get</font>

622
00:23:20,110 --> 00:23:25,510
rid<font color="#CCCCCC"> of unsafe inline</font><font color="#E5E5E5"> in your content</font>

623
00:23:22,750 --> 00:23:27,789
security policy header that's<font color="#CCCCCC"> ok all</font>

624
00:23:25,510 --> 00:23:29,370
right<font color="#CCCCCC"> you're not if very very large</font>

625
00:23:27,789 --> 00:23:31,690
companies with way way bigger

626
00:23:29,370 --> 00:23:33,158
<font color="#CCCCCC">application security budget still</font><font color="#E5E5E5"> can't</font>

627
00:23:31,690 --> 00:23:34,990
<font color="#E5E5E5">get rid of</font><font color="#CCCCCC"> ends life inline and</font><font color="#E5E5E5"> their</font>

628
00:23:33,159 --> 00:23:37,210
content security policy<font color="#E5E5E5"> know that you</font>

629
00:23:34,990 --> 00:23:39,429
are in good company<font color="#CCCCCC"> aim for</font><font color="#E5E5E5"> that if you</font>

630
00:23:37,210 --> 00:23:41,020
can but know<font color="#CCCCCC"> that while it's technically</font>

631
00:23:39,429 --> 00:23:43,210
simple it<font color="#E5E5E5"> can often</font><font color="#CCCCCC"> be really</font>

632
00:23:41,020 --> 00:23:46,030
politically difficult<font color="#E5E5E5"> to get an entire</font>

633
00:23:43,210 --> 00:23:48,190
organization<font color="#CCCCCC"> to</font><font color="#E5E5E5"> clean up every single</font>

634
00:23:46,030 --> 00:23:49,990
possible instance of inline running

635
00:23:48,190 --> 00:23:51,610
JavaScript<font color="#E5E5E5"> and let's take another</font>

636
00:23:49,990 --> 00:23:59,140
example<font color="#CCCCCC"> of what it looks like in real</font>

637
00:23:51,610 --> 00:24:01,570
life<font color="#E5E5E5"> here is Twitter that's crazy big so</font>

638
00:23:59,140 --> 00:24:03,309
<font color="#E5E5E5">lots of times</font><font color="#CCCCCC"> various people look</font><font color="#E5E5E5"> at</font>

639
00:24:01,570 --> 00:24:05,470
<font color="#CCCCCC">hopefully you get</font><font color="#E5E5E5"> an idea of how</font>

640
00:24:03,309 --> 00:24:07,690
specific<font color="#E5E5E5"> you're able to get with this</font>

641
00:24:05,470 --> 00:24:09,880
content<font color="#E5E5E5"> security policy that you can</font>

642
00:24:07,690 --> 00:24:12,039
<font color="#E5E5E5">tighten things down really really tight</font>

643
00:24:09,880 --> 00:24:13,809
but in order to<font color="#E5E5E5"> do that you need</font><font color="#CCCCCC"> to have</font>

644
00:24:12,039 --> 00:24:16,240
a complete guest list<font color="#E5E5E5"> you need to know</font>

645
00:24:13,809 --> 00:24:18,070
everybody that's coming<font color="#CCCCCC"> to the party so</font>

646
00:24:16,240 --> 00:24:19,929
<font color="#CCCCCC">oftentimes</font><font color="#E5E5E5"> when</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> talk to</font><font color="#CCCCCC"> various</font>

647
00:24:18,070 --> 00:24:20,590
developers like this they say oh wow

648
00:24:19,929 --> 00:24:22,179
that looks<font color="#CCCCCC"> really</font>

649
00:24:20,590 --> 00:24:23,709
complicated I'm so glad that we have<font color="#CCCCCC"> a</font>

650
00:24:22,179 --> 00:24:26,919
<font color="#CCCCCC">security</font><font color="#E5E5E5"> team</font><font color="#CCCCCC"> that can</font><font color="#E5E5E5"> think</font><font color="#CCCCCC"> about this</font>

651
00:24:23,710 --> 00:24:30,130
and at least in<font color="#E5E5E5"> my experience that</font>

652
00:24:26,919 --> 00:24:32,020
doesn't<font color="#E5E5E5"> work particularly well</font><font color="#CCCCCC"> I mean to</font>

653
00:24:30,130 --> 00:24:34,450
<font color="#E5E5E5">put</font><font color="#CCCCCC"> it another</font><font color="#E5E5E5"> way</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> content security</font>

654
00:24:32,020 --> 00:24:36,100
policy header<font color="#E5E5E5"> the only reason that it</font>

655
00:24:34,450 --> 00:24:38,650
gets out<font color="#CCCCCC"> of bed in the morning is to</font>

656
00:24:36,100 --> 00:24:41,770
<font color="#CCCCCC">break stuff</font><font color="#E5E5E5"> and to break stuff in</font>

657
00:24:38,650 --> 00:24:44,140
production<font color="#E5E5E5"> so the greater organizational</font>

658
00:24:41,770 --> 00:24:46,059
distance your company has between<font color="#E5E5E5"> the</font>

659
00:24:44,140 --> 00:24:47,409
people<font color="#E5E5E5"> writing the content and the</font>

660
00:24:46,059 --> 00:24:50,440
people<font color="#E5E5E5"> writing the content security</font>

661
00:24:47,409 --> 00:24:52,510
policy header<font color="#E5E5E5"> the more likely it is that</font>

662
00:24:50,440 --> 00:24:54,130
<font color="#E5E5E5">it's gonna wake up one day and break</font>

663
00:24:52,510 --> 00:24:56,200
something<font color="#E5E5E5"> in production that we didn't</font>

664
00:24:54,130 --> 00:24:57,760
want<font color="#E5E5E5"> it to because the left hand didn't</font>

665
00:24:56,200 --> 00:25:00,880
quite know what<font color="#CCCCCC"> the right</font><font color="#E5E5E5"> hand</font><font color="#CCCCCC"> was</font><font color="#E5E5E5"> doing</font>

666
00:24:57,760 --> 00:25:03,220
so at least<font color="#E5E5E5"> for me a couple of things</font>

667
00:25:00,880 --> 00:25:06,010
<font color="#E5E5E5">that have worked well is well first off</font>

668
00:25:03,220 --> 00:25:07,419
I<font color="#E5E5E5"> think for as much as</font><font color="#CCCCCC"> I love to have</font>

669
00:25:06,010 --> 00:25:09,250
developers work on<font color="#E5E5E5"> everything just</font>

670
00:25:07,419 --> 00:25:11,080
<font color="#E5E5E5">politically there's always been some</font>

671
00:25:09,250 --> 00:25:12,970
legacy application that was<font color="#E5E5E5"> written by</font>

672
00:25:11,080 --> 00:25:15,039
someone<font color="#CCCCCC"> 17 years</font><font color="#E5E5E5"> ago</font><font color="#CCCCCC"> and no one</font>

673
00:25:12,970 --> 00:25:17,559
everybody wants<font color="#CCCCCC"> to touch again</font><font color="#E5E5E5"> to try</font><font color="#CCCCCC"> to</font>

674
00:25:15,039 --> 00:25:19,149
add a content security policy header<font color="#E5E5E5"> for</font>

675
00:25:17,559 --> 00:25:21,279
things<font color="#CCCCCC"> like that the content on that</font>

676
00:25:19,149 --> 00:25:23,350
side is<font color="#E5E5E5"> probably not going to change</font><font color="#CCCCCC"> too</font>

677
00:25:21,279 --> 00:25:25,090
dynamically and just<font color="#E5E5E5"> doing a bit of an</font>

678
00:25:23,350 --> 00:25:27,520
audit<font color="#E5E5E5"> and then tacking on that header</font>

679
00:25:25,090 --> 00:25:29,770
<font color="#E5E5E5">using a proxy or</font><font color="#CCCCCC"> a load balancer</font><font color="#E5E5E5"> seems</font>

680
00:25:27,520 --> 00:25:30,879
to work<font color="#CCCCCC"> pretty decently well but for the</font>

681
00:25:29,770 --> 00:25:33,850
rest<font color="#E5E5E5"> of the things that you're doing</font>

682
00:25:30,880 --> 00:25:35,830
<font color="#E5E5E5">with I again recommend to empower your</font>

683
00:25:33,850 --> 00:25:38,408
developers to be<font color="#E5E5E5"> able</font><font color="#CCCCCC"> to know what a</font>

684
00:25:35,830 --> 00:25:41,289
<font color="#E5E5E5">content security policy is and to be</font>

685
00:25:38,409 --> 00:25:43,360
able<font color="#CCCCCC"> to be authoring it</font><font color="#E5E5E5"> I'd also</font>

686
00:25:41,289 --> 00:25:45,070
recommend<font color="#E5E5E5"> that</font><font color="#CCCCCC"> you think</font><font color="#E5E5E5"> really</font>

687
00:25:43,360 --> 00:25:46,928
intentionally about whether or<font color="#E5E5E5"> not you</font>

688
00:25:45,070 --> 00:25:50,408
want your<font color="#E5E5E5"> content security policy to</font>

689
00:25:46,929 --> 00:25:52,029
<font color="#E5E5E5">fail open or</font><font color="#CCCCCC"> to fail closed</font><font color="#E5E5E5"> this</font><font color="#CCCCCC"> is the</font>

690
00:25:50,409 --> 00:25:54,100
<font color="#CCCCCC">same</font><font color="#E5E5E5"> with many other security tools</font>

691
00:25:52,029 --> 00:25:55,840
where you<font color="#E5E5E5"> get to decide depending on how</font>

692
00:25:54,100 --> 00:25:57,789
you<font color="#E5E5E5"> want to deal with</font><font color="#CCCCCC"> things fail open</font>

693
00:25:55,840 --> 00:26:00,428
<font color="#E5E5E5">or fail close could both be could a</font>

694
00:25:57,789 --> 00:26:02,350
correct security decision<font color="#CCCCCC"> but it depends</font>

695
00:26:00,429 --> 00:26:04,360
on<font color="#E5E5E5"> the context and the default source</font>

696
00:26:02,350 --> 00:26:06,908
are going to this dip in the next slide

697
00:26:04,360 --> 00:26:08,199
<font color="#E5E5E5">the default source is where you decide</font>

698
00:26:06,909 --> 00:26:10,539
whether or<font color="#E5E5E5"> not your content security</font>

699
00:26:08,200 --> 00:26:12,100
policy fails open or fails closed and

700
00:26:10,539 --> 00:26:13,390
the third thing<font color="#CCCCCC"> that I recommend which</font>

701
00:26:12,100 --> 00:26:16,649
we'll go over<font color="#E5E5E5"> in a little</font><font color="#CCCCCC"> bit again is</font>

702
00:26:13,390 --> 00:26:19,029
use the report only header<font color="#E5E5E5"> in order to</font>

703
00:26:16,649 --> 00:26:20,500
figure<font color="#CCCCCC"> out what's</font><font color="#E5E5E5"> going to happen when</font>

704
00:26:19,029 --> 00:26:22,570
<font color="#E5E5E5">you</font><font color="#CCCCCC"> make a change or</font><font color="#E5E5E5"> an edit to your</font>

705
00:26:20,500 --> 00:26:24,690
content<font color="#E5E5E5"> security policy</font><font color="#CCCCCC"> so what do I</font>

706
00:26:22,570 --> 00:26:26,830
<font color="#E5E5E5">mean</font><font color="#CCCCCC"> about this fail open</font><font color="#E5E5E5"> or fail close</font>

707
00:26:24,690 --> 00:26:28,750
imagine that there's a new type<font color="#CCCCCC"> of</font>

708
00:26:26,830 --> 00:26:31,270
content<font color="#CCCCCC"> that we all want to</font><font color="#E5E5E5"> be</font><font color="#CCCCCC"> running</font>

709
00:26:28,750 --> 00:26:33,010
on our site called<font color="#CCCCCC"> fubar</font><font color="#E5E5E5"> and so browser</font>

710
00:26:31,270 --> 00:26:33,770
people get together<font color="#E5E5E5"> and</font><font color="#CCCCCC"> we're like great</font>

711
00:26:33,010 --> 00:26:35,780
<font color="#E5E5E5">we're gonna add a</font>

712
00:26:33,770 --> 00:26:38,030
<font color="#CCCCCC">fubar source directive</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> the content</font>

713
00:26:35,780 --> 00:26:40,850
security policy<font color="#E5E5E5"> and you're like great</font><font color="#CCCCCC"> I</font>

714
00:26:38,030 --> 00:26:43,040
use fubar in fact<font color="#E5E5E5"> I use fubar from super</font>

715
00:26:40,850 --> 00:26:44,719
food<font color="#CCCCCC"> comm</font><font color="#E5E5E5"> I'm just gonna go ahead</font><font color="#CCCCCC"> and</font>

716
00:26:43,040 --> 00:26:47,480
add that<font color="#E5E5E5"> line into my content security</font>

717
00:26:44,720 --> 00:26:50,480
policy<font color="#CCCCCC"> what you have</font><font color="#E5E5E5"> done</font><font color="#CCCCCC"> is 100%</font>

718
00:26:47,480 --> 00:26:52,730
<font color="#CCCCCC">correct a hundred percent</font><font color="#E5E5E5"> to spec but</font>

719
00:26:50,480 --> 00:26:54,680
the problem is that<font color="#CCCCCC"> if</font><font color="#E5E5E5"> you have an older</font>

720
00:26:52,730 --> 00:26:57,290
browser<font color="#E5E5E5"> that</font><font color="#CCCCCC"> hasn't been</font><font color="#E5E5E5"> updated to</font>

721
00:26:54,680 --> 00:26:58,970
understand what the fubar source is it's

722
00:26:57,290 --> 00:27:01,280
<font color="#E5E5E5">just going to</font><font color="#CCCCCC"> ignore that</font><font color="#E5E5E5"> directive</font>

723
00:26:58,970 --> 00:27:03,530
entirely<font color="#E5E5E5"> and once it's ignored the</font>

724
00:27:01,280 --> 00:27:07,310
directive entirely<font color="#E5E5E5"> it's gonna fail back</font>

725
00:27:03,530 --> 00:27:09,470
to the default source so you<font color="#CCCCCC"> can</font><font color="#E5E5E5"> either</font>

726
00:27:07,310 --> 00:27:11,810
say<font color="#CCCCCC"> that your default</font><font color="#E5E5E5"> source is none</font>

727
00:27:09,470 --> 00:27:13,430
<font color="#CCCCCC">I've white listed every possible content</font>

728
00:27:11,810 --> 00:27:16,909
<font color="#E5E5E5">that I want</font><font color="#CCCCCC"> and if it's not on the list</font>

729
00:27:13,430 --> 00:27:18,860
kick it out or set default source to

730
00:27:16,910 --> 00:27:21,170
star which will still protect your site

731
00:27:18,860 --> 00:27:23,060
<font color="#E5E5E5">for every single part every single</font>

732
00:27:21,170 --> 00:27:25,160
directive<font color="#E5E5E5"> that the browser understands</font>

733
00:27:23,060 --> 00:27:26,780
it is restricted to<font color="#CCCCCC"> the</font><font color="#E5E5E5"> whitelist and</font>

734
00:27:25,160 --> 00:27:28,880
then everything that<font color="#E5E5E5"> it doesn't</font>

735
00:27:26,780 --> 00:27:30,950
understand it just lets through again

736
00:27:28,880 --> 00:27:32,870
<font color="#E5E5E5">I'm not gonna tell</font><font color="#CCCCCC"> Wii which of these</font>

737
00:27:30,950 --> 00:27:35,270
two modes<font color="#E5E5E5"> is correct for your</font>

738
00:27:32,870 --> 00:27:40,570
application<font color="#CCCCCC"> just know that you can write</font>

739
00:27:35,270 --> 00:27:42,740
<font color="#E5E5E5">a 100% perfect</font><font color="#CCCCCC"> 100%</font><font color="#E5E5E5"> to spec perfectly</font>

740
00:27:40,570 --> 00:27:45,139
exquisitely crafted content security

741
00:27:42,740 --> 00:27:47,060
policy<font color="#E5E5E5"> and still break something in</font>

742
00:27:45,140 --> 00:27:48,410
<font color="#E5E5E5">production you weren't meaning to not</font>

743
00:27:47,060 --> 00:27:50,899
because of<font color="#E5E5E5"> your fault that because</font>

744
00:27:48,410 --> 00:27:53,600
that's the ecosystem of browsers that<font color="#E5E5E5"> we</font>

745
00:27:50,900 --> 00:27:55,310
have to deal with<font color="#E5E5E5"> and</font><font color="#CCCCCC"> I just</font><font color="#E5E5E5"> say the</font>

746
00:27:53,600 --> 00:27:57,020
other<font color="#CCCCCC"> thing that's worked</font><font color="#E5E5E5"> really well</font>

747
00:27:55,310 --> 00:27:59,090
and<font color="#E5E5E5"> the places where I've tried to</font>

748
00:27:57,020 --> 00:28:02,360
<font color="#CCCCCC">implement this is</font><font color="#E5E5E5"> using the content</font>

749
00:27:59,090 --> 00:28:03,980
security policy<font color="#CCCCCC"> report only header which</font>

750
00:28:02,360 --> 00:28:06,199
if you understand content security

751
00:28:03,980 --> 00:28:08,180
policy<font color="#CCCCCC"> you understand the report only</font>

752
00:28:06,200 --> 00:28:10,580
header you just<font color="#E5E5E5"> tack those two words on</font>

753
00:28:08,180 --> 00:28:13,280
at the end and it looks and acts and

754
00:28:10,580 --> 00:28:14,030
<font color="#E5E5E5">feels</font><font color="#CCCCCC"> 99% the same as content security</font>

755
00:28:13,280 --> 00:28:16,670
policy

756
00:28:14,030 --> 00:28:18,980
it just doesn't break anything and when

757
00:28:16,670 --> 00:28:21,470
it does that<font color="#E5E5E5"> it'll still send you the</font>

758
00:28:18,980 --> 00:28:24,470
report both the content security policy

759
00:28:21,470 --> 00:28:26,450
and the report only header will send

760
00:28:24,470 --> 00:28:28,850
this little JSON blurb that's very

761
00:28:26,450 --> 00:28:30,620
helpful tells you exactly where<font color="#E5E5E5"> the</font>

762
00:28:28,850 --> 00:28:32,929
thing was blocked what was blocked

763
00:28:30,620 --> 00:28:35,300
what directive it violated<font color="#CCCCCC"> that caused</font>

764
00:28:32,930 --> 00:28:37,370
it to be blocked<font color="#E5E5E5"> and</font><font color="#CCCCCC"> lets you</font><font color="#E5E5E5"> know what</font>

765
00:28:35,300 --> 00:28:39,320
the<font color="#E5E5E5"> policy it saw on</font><font color="#CCCCCC"> that page was and</font>

766
00:28:37,370 --> 00:28:41,330
the<font color="#CCCCCC"> only part that's gonna</font><font color="#E5E5E5"> be different</font>

767
00:28:39,320 --> 00:28:43,429
<font color="#CCCCCC">is</font><font color="#E5E5E5"> that disposition down at the bottom</font>

768
00:28:41,330 --> 00:28:45,949
<font color="#CCCCCC">where either it's just gonna be</font>

769
00:28:43,430 --> 00:28:47,630
reporting and we let this go<font color="#E5E5E5"> through or</font>

770
00:28:45,950 --> 00:28:49,940
says<font color="#E5E5E5"> enforce where I took</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> out back</font>

771
00:28:47,630 --> 00:28:52,760
and<font color="#E5E5E5"> shot it in the head so that's</font>

772
00:28:49,940 --> 00:28:55,220
content security policy<font color="#CCCCCC"> again we're</font>

773
00:28:52,760 --> 00:28:56,809
trying<font color="#E5E5E5"> the</font><font color="#CCCCCC"> sly do thing if the</font><font color="#E5E5E5"> proctor</font>

774
00:28:55,220 --> 00:28:59,059
wants to get up whatever<font color="#E5E5E5"> questions that</font>

775
00:28:56,809 --> 00:29:00,649
we have<font color="#E5E5E5"> here at the time if there's not</font>

776
00:28:59,059 --> 00:29:02,240
<font color="#CCCCCC">enough time for questions</font><font color="#E5E5E5"> go ahead</font><font color="#CCCCCC"> and</font>

777
00:29:00,649 --> 00:29:04,789
<font color="#E5E5E5">get my contact information off there</font>

778
00:29:02,240 --> 00:29:07,639
again go to this event<font color="#CCCCCC"> in</font><font color="#E5E5E5"> sched you can</font>

779
00:29:04,789 --> 00:29:09,408
download the PDF<font color="#CCCCCC"> of</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> slides</font><font color="#E5E5E5"> and thank</font>

780
00:29:07,639 --> 00:29:17,840
you guys so much<font color="#E5E5E5"> for your time</font><font color="#CCCCCC"> that's</font>

781
00:29:09,409 --> 00:29:21,760
<font color="#E5E5E5">what I got we have about three minutes</font>

782
00:29:17,840 --> 00:29:26,689
<font color="#CCCCCC">for questions again</font><font color="#E5E5E5"> go to slide oh and</font>

783
00:29:21,760 --> 00:29:30,769
the code is<font color="#CCCCCC"> b-sides FF 2019 they'll come</font>

784
00:29:26,690 --> 00:29:31,639
up over<font color="#E5E5E5"> here our first</font><font color="#CCCCCC"> question is what</font>

785
00:29:30,769 --> 00:29:35,269
about cores

786
00:29:31,639 --> 00:29:37,129
what about cores<font color="#E5E5E5"> so cores is another</font>

787
00:29:35,269 --> 00:29:38,870
header that you can be setting<font color="#E5E5E5"> so if</font>

788
00:29:37,130 --> 00:29:41,720
you're familiar with same origin policy

789
00:29:38,870 --> 00:29:45,229
this<font color="#E5E5E5"> is basically a default in most</font>

790
00:29:41,720 --> 00:29:48,380
browsers<font color="#E5E5E5"> that restricts content for</font>

791
00:29:45,230 --> 00:29:50,990
operating in the same kind<font color="#E5E5E5"> of a same</font>

792
00:29:48,380 --> 00:29:52,730
origin<font color="#CCCCCC"> and this helps</font><font color="#E5E5E5"> protect against</font>

793
00:29:50,990 --> 00:29:54,380
cross-site request forgery where you go

794
00:29:52,730 --> 00:29:56,690
to attacker site and it tries to

795
00:29:54,380 --> 00:29:59,659
<font color="#E5E5E5">impersonate you</font><font color="#CCCCCC"> on</font><font color="#E5E5E5"> some other</font><font color="#CCCCCC"> side</font><font color="#E5E5E5"> core</font>

796
00:29:56,690 --> 00:30:02,299
is is something<font color="#CCCCCC"> that loosens the same</font>

797
00:29:59,659 --> 00:30:04,580
<font color="#CCCCCC">origin policy it doesn't tighten</font><font color="#E5E5E5"> it so I</font>

798
00:30:02,299 --> 00:30:06,289
don't<font color="#CCCCCC"> necessarily it's related to</font>

799
00:30:04,580 --> 00:30:08,809
security<font color="#E5E5E5"> and so much that if you set it</font>

800
00:30:06,289 --> 00:30:10,490
wrong it will you<font color="#CCCCCC"> know help shoot</font>

801
00:30:08,809 --> 00:30:11,990
yourself in the foot<font color="#E5E5E5"> but it's not</font>

802
00:30:10,490 --> 00:30:13,250
something<font color="#CCCCCC"> that</font><font color="#E5E5E5"> I find the default is</font>

803
00:30:11,990 --> 00:30:14,080
more secure<font color="#CCCCCC"> it please to my</font>

804
00:30:13,250 --> 00:30:17,210
<font color="#E5E5E5">understanding</font>

805
00:30:14,080 --> 00:30:19,428
do we<font color="#E5E5E5"> have more questions</font><font color="#CCCCCC"> um or</font><font color="#E5E5E5"> are we</font>

806
00:30:17,210 --> 00:30:21,649
out of time<font color="#CCCCCC"> we have a little</font><font color="#E5E5E5"> bit more</font>

807
00:30:19,429 --> 00:30:29,330
time but no more questions

808
00:30:21,649 --> 00:30:30,830
<font color="#CCCCCC">well question in the room</font><font color="#E5E5E5"> yeah you</font>

809
00:30:29,330 --> 00:30:34,340
mentioned<font color="#CCCCCC"> it's</font><font color="#E5E5E5"> not all the browser's</font>

810
00:30:30,830 --> 00:30:38,689
support<font color="#E5E5E5"> this what about kind of browser</font>

811
00:30:34,340 --> 00:30:42,620
like tools like curl or<font color="#CCCCCC"> W</font><font color="#E5E5E5"> get</font><font color="#CCCCCC"> debase</font><font color="#E5E5E5"> any</font>

812
00:30:38,690 --> 00:30:45,409
of these<font color="#E5E5E5"> so for things like curl or W</font>

813
00:30:42,620 --> 00:30:47,719
get it it will<font color="#E5E5E5"> show you the</font><font color="#CCCCCC"> header that</font>

814
00:30:45,409 --> 00:30:50,059
<font color="#CCCCCC">comes back</font><font color="#E5E5E5"> but</font><font color="#CCCCCC"> because it's not like</font>

815
00:30:47,720 --> 00:30:51,769
executing JavaScript or loading images

816
00:30:50,059 --> 00:30:53,658
<font color="#E5E5E5">it's not really something that it's</font>

817
00:30:51,769 --> 00:30:55,940
looking at like it's gonna give you the

818
00:30:53,659 --> 00:30:56,680
the response<font color="#CCCCCC"> that the tool gets</font><font color="#E5E5E5"> back but</font>

819
00:30:55,940 --> 00:30:58,930
isn't

820
00:30:56,680 --> 00:31:00,280
I don't know off the top of my<font color="#E5E5E5"> head the</font>

821
00:30:58,930 --> 00:31:01,990
types<font color="#E5E5E5"> of attacks that</font><font color="#CCCCCC"> you would do</font>

822
00:31:00,280 --> 00:31:04,450
against curl<font color="#E5E5E5"> except don't pipe it</font>

823
00:31:01,990 --> 00:31:05,890
straight to bash<font color="#CCCCCC"> but that</font><font color="#E5E5E5"> the content</font>

824
00:31:04,450 --> 00:31:07,870
security policy is not entirely

825
00:31:05,890 --> 00:31:08,260
applicable<font color="#E5E5E5"> to command-line tools like</font>

826
00:31:07,870 --> 00:31:10,179
<font color="#E5E5E5">that</font>

827
00:31:08,260 --> 00:31:12,340
yep it's designed for kind<font color="#E5E5E5"> of</font>

828
00:31:10,180 --> 00:31:13,810
full-featured browsers again if I'm

829
00:31:12,340 --> 00:31:16,030
totally wrong you want<font color="#CCCCCC"> to yell at me</font>

830
00:31:13,810 --> 00:31:19,030
<font color="#E5E5E5">there's my contact information</font><font color="#CCCCCC"> I'm gonna</font>

831
00:31:16,030 --> 00:31:21,520
be hanging<font color="#CCCCCC"> outside come say hi thanks</font>

832
00:31:19,030 --> 00:31:24,220
you<font color="#E5E5E5"> guys for the time so much all right</font>

833
00:31:21,520 --> 00:31:25,810
<font color="#CCCCCC">on</font><font color="#E5E5E5"> behalf of</font><font color="#CCCCCC"> b-side San Francisco I'd</font>

834
00:31:24,220 --> 00:31:28,620
like to thank you let's have<font color="#CCCCCC"> a round of</font>

835
00:31:25,810 --> 00:31:28,620
applause<font color="#CCCCCC"> for</font><font color="#E5E5E5"> Benjamin</font>

