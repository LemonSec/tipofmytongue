1
00:00:00,030 --> 00:00:06,150
good afternoon everyone we're ready for

2
00:00:01,800 --> 00:00:09,450
<font color="#E5E5E5">the next session</font><font color="#CCCCCC"> from Tyler Patterson on</font>

3
00:00:06,150 --> 00:00:16,020
the secure<font color="#CCCCCC"> metamorphoses streaming logs</font>

4
00:00:09,450 --> 00:00:21,420
with kappa and TLS welcome<font color="#E5E5E5"> all right</font>

5
00:00:16,020 --> 00:00:22,500
<font color="#E5E5E5">thank you</font><font color="#CCCCCC"> we give this work</font><font color="#E5E5E5"> in</font><font color="#CCCCCC"> alright</font>

6
00:00:21,420 --> 00:00:24,779
<font color="#E5E5E5">today we're gonna talk a little bit</font>

7
00:00:22,500 --> 00:00:26,550
<font color="#CCCCCC">about Kafka</font><font color="#E5E5E5"> the few things</font><font color="#CCCCCC"> I'm gonna</font><font color="#E5E5E5"> run</font>

8
00:00:24,779 --> 00:00:29,039
<font color="#E5E5E5">through are gonna be just a quick</font>

9
00:00:26,550 --> 00:00:32,969
introduction<font color="#E5E5E5"> of myself</font><font color="#CCCCCC"> the data</font><font color="#E5E5E5"> that we</font>

10
00:00:29,039 --> 00:00:34,800
deal with what Kafka is and what the

11
00:00:32,969 --> 00:00:37,200
security considerations<font color="#CCCCCC"> are for Kafka</font>

12
00:00:34,800 --> 00:00:38,790
<font color="#E5E5E5">how to secure Kafka and then some of the</font>

13
00:00:37,200 --> 00:00:41,250
<font color="#CCCCCC">lessons that we've learned</font><font color="#E5E5E5"> as we've been</font>

14
00:00:38,790 --> 00:00:42,780
doing<font color="#CCCCCC"> that at our</font><font color="#E5E5E5"> organization</font><font color="#CCCCCC"> they</font>

15
00:00:41,250 --> 00:00:44,640
asked me to<font color="#E5E5E5"> do this as a reminder there</font>

16
00:00:42,780 --> 00:00:46,379
<font color="#CCCCCC">is</font><font color="#E5E5E5"> a slide oh and then that's the the</font>

17
00:00:44,640 --> 00:00:48,120
tag for the room<font color="#CCCCCC"> if you want to have</font>

18
00:00:46,379 --> 00:00:51,660
questions<font color="#CCCCCC"> and we can we can review</font><font color="#E5E5E5"> those</font>

19
00:00:48,120 --> 00:00:53,940
at the end<font color="#CCCCCC"> so I'm I work for</font><font color="#E5E5E5"> distill</font>

20
00:00:51,660 --> 00:00:56,250
<font color="#E5E5E5">networks we protect against automated</font>

21
00:00:53,940 --> 00:00:58,050
threats<font color="#E5E5E5"> I'm a product manager there I'm</font>

22
00:00:56,250 --> 00:01:00,480
<font color="#CCCCCC">responsible for our research</font><font color="#E5E5E5"> and our</font>

23
00:00:58,050 --> 00:01:06,840
data so we have<font color="#CCCCCC"> a lot of data that flows</font>

24
00:01:00,480 --> 00:01:09,929
<font color="#CCCCCC">through we sit as a layer 7 inline bot</font>

25
00:01:06,840 --> 00:01:11,520
mitigation<font color="#E5E5E5"> and some of the things that</font>

26
00:01:09,930 --> 00:01:13,939
<font color="#CCCCCC">we protect against</font><font color="#E5E5E5"> are people that might</font>

27
00:01:11,520 --> 00:01:19,439
<font color="#E5E5E5">be doing account fraud</font><font color="#CCCCCC"> web scraping</font>

28
00:01:13,939 --> 00:01:21,210
<font color="#E5E5E5">trying to do card card cracking or any</font>

29
00:01:19,439 --> 00:01:23,758
other type of<font color="#E5E5E5"> abuse</font><font color="#CCCCCC"> you would use an</font>

30
00:01:21,210 --> 00:01:26,729
automated<font color="#CCCCCC"> automated piece of software to</font>

31
00:01:23,759 --> 00:01:30,030
<font color="#E5E5E5">do because</font><font color="#CCCCCC"> of that we have a ton of</font><font color="#E5E5E5"> data</font>

32
00:01:26,729 --> 00:01:31,890
that<font color="#E5E5E5"> we collect</font><font color="#CCCCCC"> we use the data for</font>

33
00:01:30,030 --> 00:01:35,159
monitoring<font color="#CCCCCC"> our systems for</font><font color="#E5E5E5"> visualizing</font>

34
00:01:31,890 --> 00:01:37,860
the data for doing detection and then

35
00:01:35,159 --> 00:01:39,240
<font color="#E5E5E5">also use that to</font><font color="#CCCCCC"> provide professional</font>

36
00:01:37,860 --> 00:01:42,060
services<font color="#CCCCCC"> to help</font><font color="#E5E5E5"> consult with our</font>

37
00:01:39,240 --> 00:01:47,759
customers<font color="#E5E5E5"> so some of</font><font color="#CCCCCC"> the pieces of data</font>

38
00:01:42,060 --> 00:01:50,329
that<font color="#E5E5E5"> we have are we have web mobile API</font>

39
00:01:47,759 --> 00:01:53,729
protection we do browser interrogation

40
00:01:50,329 --> 00:01:55,250
<font color="#E5E5E5">we have a</font><font color="#CCCCCC"> Mobile SDK and all of that</font>

41
00:01:53,729 --> 00:01:57,179
data flows in to us<font color="#E5E5E5"> and then we</font>

42
00:01:55,250 --> 00:01:59,939
consolidate<font color="#CCCCCC"> that and use</font><font color="#E5E5E5"> it</font><font color="#CCCCCC"> for those</font>

43
00:01:57,180 --> 00:02:02,579
various purposes we take in<font color="#CCCCCC"> about five</font>

44
00:01:59,939 --> 00:02:04,100
billion<font color="#CCCCCC"> messages per day and</font><font color="#E5E5E5"> it's just</font>

45
00:02:02,579 --> 00:02:07,559
growing rapidly

46
00:02:04,100 --> 00:02:10,769
so our messages are<font color="#E5E5E5"> typically in some</font>

47
00:02:07,560 --> 00:02:12,569
sort of structured format like a

48
00:02:10,770 --> 00:02:14,040
<font color="#CCCCCC">protobuf or</font><font color="#E5E5E5"> JSON</font>

49
00:02:12,569 --> 00:02:16,920
but we have them<font color="#E5E5E5"> coming in in various</font>

50
00:02:14,040 --> 00:02:19,560
various formats<font color="#CCCCCC"> depending</font><font color="#E5E5E5"> on different</font>

51
00:02:16,920 --> 00:02:21,929
<font color="#E5E5E5">parts of the system so these are</font><font color="#CCCCCC"> an</font>

52
00:02:19,560 --> 00:02:22,769
<font color="#E5E5E5">example of some of our</font><font color="#CCCCCC"> producers there</font>

53
00:02:21,930 --> 00:02:24,090
are different ways<font color="#CCCCCC"> that you can</font>

54
00:02:22,769 --> 00:02:26,340
<font color="#E5E5E5">integrate with this still we have a</font>

55
00:02:24,090 --> 00:02:28,409
<font color="#E5E5E5">global CDN</font><font color="#CCCCCC"> you can have your own</font><font color="#E5E5E5"> virtual</font>

56
00:02:26,340 --> 00:02:31,019
private cloud<font color="#E5E5E5"> you can have a dedicated</font>

57
00:02:28,409 --> 00:02:33,480
<font color="#CCCCCC">device</font><font color="#E5E5E5"> and your infrastructure you can</font>

58
00:02:31,019 --> 00:02:35,849
<font color="#E5E5E5">take our connector and install it into</font>

59
00:02:33,480 --> 00:02:37,048
your<font color="#CCCCCC"> application and then in addition</font><font color="#E5E5E5"> to</font>

60
00:02:35,849 --> 00:02:40,798
those those<font color="#CCCCCC"> are constantly</font><font color="#E5E5E5"> reporting</font>

61
00:02:37,049 --> 00:02:42,060
telemetry<font color="#E5E5E5"> access logs</font><font color="#CCCCCC"> there also we also</font>

62
00:02:40,799 --> 00:02:43,620
have the<font color="#E5E5E5"> browsers where we have</font>

63
00:02:42,060 --> 00:02:46,500
JavaScript that goes to fingerprint the

64
00:02:43,620 --> 00:02:48,560
devices so that<font color="#E5E5E5"> we can track them all of</font>

65
00:02:46,500 --> 00:02:50,519
that data comes back<font color="#E5E5E5"> to us and includes</font>

66
00:02:48,560 --> 00:02:51,900
<font color="#CCCCCC">information about the browser it</font>

67
00:02:50,519 --> 00:02:54,090
includes<font color="#E5E5E5"> biometric data that we're</font>

68
00:02:51,900 --> 00:02:56,669
gathering to determine if you're a human

69
00:02:54,090 --> 00:02:58,290
<font color="#E5E5E5">or not and then of the same thing and</font>

70
00:02:56,669 --> 00:03:01,620
coming<font color="#E5E5E5"> from</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> mobile sdk we've got the</font>

71
00:02:58,290 --> 00:03:04,379
same<font color="#E5E5E5"> sort of telemetry data so all those</font>

72
00:03:01,620 --> 00:03:05,519
things produce<font color="#E5E5E5"> logs and there are a lot</font>

73
00:03:04,379 --> 00:03:08,040
<font color="#CCCCCC">of different things</font><font color="#E5E5E5"> we want to use those</font>

74
00:03:05,519 --> 00:03:09,930
logs for<font color="#CCCCCC"> I've</font><font color="#E5E5E5"> mentioned a few of them</font>

75
00:03:08,040 --> 00:03:11,220
monitoring we enrich the logs with

76
00:03:09,930 --> 00:03:13,859
additional<font color="#CCCCCC"> information</font><font color="#E5E5E5"> to make the</font>

77
00:03:11,220 --> 00:03:16,169
analysis more complete<font color="#E5E5E5"> we use</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> to do</font>

78
00:03:13,859 --> 00:03:17,579
machine<font color="#CCCCCC"> learning and</font><font color="#E5E5E5"> detection it</font>

79
00:03:16,169 --> 00:03:19,919
eventually<font color="#E5E5E5"> all ends up in</font><font color="#CCCCCC"> our data</font>

80
00:03:17,579 --> 00:03:21,780
warehouse<font color="#CCCCCC"> and then</font><font color="#E5E5E5"> that can be used for</font>

81
00:03:19,919 --> 00:03:24,269
reporting<font color="#E5E5E5"> and our portal for dashboards</font>

82
00:03:21,780 --> 00:03:27,269
<font color="#E5E5E5">and then also for our</font><font color="#CCCCCC"> analyst to</font><font color="#E5E5E5"> you to</font>

83
00:03:24,269 --> 00:03:29,489
use now if everything<font color="#E5E5E5"> wants to get all</font>

84
00:03:27,269 --> 00:03:32,760
of the logs<font color="#CCCCCC"> without something like cough</font>

85
00:03:29,489 --> 00:03:34,470
can place a a messaging broker

86
00:03:32,760 --> 00:03:36,599
<font color="#E5E5E5">everything would have</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> be aware of</font>

87
00:03:34,470 --> 00:03:38,340
where the logs were and try to gather

88
00:03:36,599 --> 00:03:41,190
them and<font color="#CCCCCC"> it</font><font color="#E5E5E5"> gets pretty unwieldly and</font>

89
00:03:38,340 --> 00:03:42,989
messy and<font color="#E5E5E5"> that's where Kafka comes in so</font>

90
00:03:41,190 --> 00:03:44,340
how many people<font color="#CCCCCC"> just</font><font color="#E5E5E5"> for a sense how</font>

91
00:03:42,989 --> 00:03:47,099
many people here are familiar with<font color="#CCCCCC"> Kaka</font>

92
00:03:44,340 --> 00:03:53,239
<font color="#E5E5E5">Kafka or</font><font color="#CCCCCC"> used Kafka alright cool</font>

93
00:03:47,099 --> 00:03:57,000
all right<font color="#E5E5E5"> so not</font><font color="#CCCCCC"> this Kafka the author</font>

94
00:03:53,239 --> 00:04:00,180
<font color="#CCCCCC">instead it's caca the pub/sub message</font>

95
00:03:57,000 --> 00:04:01,470
broker<font color="#E5E5E5"> so in Kafka some of the basics</font>

96
00:04:00,180 --> 00:04:03,750
about Kafka is there's two<font color="#CCCCCC"> different</font>

97
00:04:01,470 --> 00:04:04,919
<font color="#E5E5E5">types of clients</font><font color="#CCCCCC"> you have producers</font>

98
00:04:03,750 --> 00:04:07,049
they're the ones that are publishing

99
00:04:04,919 --> 00:04:09,689
logs<font color="#E5E5E5"> and then you have consumers they're</font>

100
00:04:07,049 --> 00:04:11,430
the ones that are<font color="#E5E5E5"> consuming logs</font><font color="#CCCCCC"> then</font>

101
00:04:09,689 --> 00:04:12,930
they typically what they're the logs

102
00:04:11,430 --> 00:04:14,909
that<font color="#CCCCCC"> are sent or considered messages</font>

103
00:04:12,930 --> 00:04:17,190
those messages can be sent as individual

104
00:04:14,909 --> 00:04:19,320
messages or also<font color="#E5E5E5"> sent in batch so you</font>

105
00:04:17,190 --> 00:04:23,870
can<font color="#E5E5E5"> reduce how often you're calling out</font>

106
00:04:19,320 --> 00:04:25,980
<font color="#CCCCCC">to the the broker the message a message</font>

107
00:04:23,870 --> 00:04:27,150
<font color="#E5E5E5">schema that can be varied</font>

108
00:04:25,980 --> 00:04:29,340
can be whatever you want<font color="#CCCCCC"> that you put</font>

109
00:04:27,150 --> 00:04:30,510
into there<font color="#CCCCCC"> you can have no schema if you</font>

110
00:04:29,340 --> 00:04:35,549
want I guess

111
00:04:30,510 --> 00:04:37,890
and the<font color="#E5E5E5"> Kafka's or</font><font color="#CCCCCC"> Copco organization is</font>

112
00:04:35,550 --> 00:04:40,050
organized by topics so you publish<font color="#CCCCCC"> to a</font>

113
00:04:37,890 --> 00:04:41,990
specific topic<font color="#E5E5E5"> you can also subscribe to</font>

114
00:04:40,050 --> 00:04:44,790
a specific<font color="#CCCCCC"> topic and</font><font color="#E5E5E5"> consume those logs</font>

115
00:04:41,990 --> 00:04:49,190
<font color="#E5E5E5">once they end up in a topic the data is</font>

116
00:04:44,790 --> 00:04:51,330
<font color="#E5E5E5">broken out into partitions</font><font color="#CCCCCC"> Kafka uses</font>

117
00:04:49,190 --> 00:04:53,400
sequential writes to<font color="#E5E5E5"> disks they get high</font>

118
00:04:51,330 --> 00:04:55,260
<font color="#E5E5E5">performance those partitions are spread</font>

119
00:04:53,400 --> 00:04:56,940
across<font color="#E5E5E5"> multiple brokers and then every</font>

120
00:04:55,260 --> 00:04:59,430
but and then<font color="#E5E5E5"> the consumers can go in a</font>

121
00:04:56,940 --> 00:05:01,320
consumer<font color="#E5E5E5"> group and consume from each of</font>

122
00:04:59,430 --> 00:05:03,060
those partitions<font color="#CCCCCC"> and</font><font color="#E5E5E5"> we'll take a look</font>

123
00:05:01,320 --> 00:05:03,990
at<font color="#E5E5E5"> just real briefly what that looks</font>

124
00:05:03,060 --> 00:05:05,790
like

125
00:05:03,990 --> 00:05:09,060
<font color="#E5E5E5">they then use an offset so you know</font>

126
00:05:05,790 --> 00:05:12,660
<font color="#E5E5E5">we're in the log stream you're consuming</font>

127
00:05:09,060 --> 00:05:14,040
and that way you<font color="#E5E5E5"> have some feel over</font>

128
00:05:12,660 --> 00:05:17,790
<font color="#E5E5E5">redundancy if you need to go back and</font>

129
00:05:14,040 --> 00:05:19,680
reconsider<font color="#CCCCCC"> Group has their own offset so</font>

130
00:05:17,790 --> 00:05:22,200
they know where they<font color="#CCCCCC"> are in the stream</font>

131
00:05:19,680 --> 00:05:23,670
<font color="#E5E5E5">of data so this is sort of what it looks</font>

132
00:05:22,200 --> 00:05:26,430
like on<font color="#E5E5E5"> the left you have the producers</font>

133
00:05:23,670 --> 00:05:28,410
on the right you<font color="#CCCCCC"> have</font><font color="#E5E5E5"> the consumers they</font>

134
00:05:26,430 --> 00:05:30,210
publish in they'll go to a leader broker

135
00:05:28,410 --> 00:05:32,040
for each topic<font color="#E5E5E5"> that leader broker how it</font>

136
00:05:30,210 --> 00:05:35,729
can replicate the data so that<font color="#E5E5E5"> you know</font>

137
00:05:32,040 --> 00:05:38,280
one broker<font color="#E5E5E5"> dies</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> data persist</font><font color="#CCCCCC"> and</font>

138
00:05:35,730 --> 00:05:42,030
then the consumers consume from the<font color="#E5E5E5"> the</font>

139
00:05:38,280 --> 00:05:45,510
lead partition<font color="#E5E5E5"> on that for the for that</font>

140
00:05:42,030 --> 00:05:47,309
<font color="#E5E5E5">topic this</font><font color="#CCCCCC"> is an idea</font><font color="#E5E5E5"> of</font><font color="#CCCCCC"> just</font><font color="#E5E5E5"> what</font><font color="#CCCCCC"> the</font>

141
00:05:45,510 --> 00:05:49,080
partitions look like<font color="#CCCCCC"> clogs are</font><font color="#E5E5E5"> just</font>

142
00:05:47,310 --> 00:05:51,030
being sequentially written at the<font color="#CCCCCC"> end</font>

143
00:05:49,080 --> 00:05:55,919
and then<font color="#E5E5E5"> you just know where you are</font><font color="#CCCCCC"> and</font>

144
00:05:51,030 --> 00:05:58,020
<font color="#E5E5E5">consuming those logs all right so with</font>

145
00:05:55,920 --> 00:05:59,820
coffee you have<font color="#E5E5E5"> Kafka itself with the</font>

146
00:05:58,020 --> 00:06:02,039
new<font color="#E5E5E5"> all set and the brokers within</font><font color="#CCCCCC"> that</font>

147
00:05:59,820 --> 00:06:05,219
you also have<font color="#E5E5E5"> zookeeper zookeeper</font><font color="#CCCCCC"> is</font>

148
00:06:02,040 --> 00:06:07,800
used to help orchestrate the work that

149
00:06:05,220 --> 00:06:09,560
the brokers<font color="#E5E5E5"> are doing so zookeeper</font><font color="#CCCCCC"> is</font>

150
00:06:07,800 --> 00:06:11,760
just a distributed<font color="#E5E5E5"> open source</font>

151
00:06:09,560 --> 00:06:14,790
<font color="#CCCCCC">coordination service and this helps you</font>

152
00:06:11,760 --> 00:06:18,390
<font color="#E5E5E5">make sure</font><font color="#CCCCCC"> that you're coordinating</font>

153
00:06:14,790 --> 00:06:19,770
<font color="#E5E5E5">services across each of the brokers it</font>

154
00:06:18,390 --> 00:06:21,599
<font color="#CCCCCC">also a man is a couple</font><font color="#E5E5E5"> of other things</font>

155
00:06:19,770 --> 00:06:24,930
<font color="#CCCCCC">that we'll talk about</font><font color="#E5E5E5"> like access</font>

156
00:06:21,600 --> 00:06:27,120
control<font color="#CCCCCC"> lists and and some of</font><font color="#E5E5E5"> that so</font>

157
00:06:24,930 --> 00:06:28,920
with Kafka in place<font color="#E5E5E5"> instead it can look</font>

158
00:06:27,120 --> 00:06:32,640
a<font color="#CCCCCC"> little</font><font color="#E5E5E5"> bit cleaner like this you have</font>

159
00:06:28,920 --> 00:06:33,660
one<font color="#E5E5E5"> Kafka service obviously</font><font color="#CCCCCC"> with</font>

160
00:06:32,640 --> 00:06:35,159
multiple topics

161
00:06:33,660 --> 00:06:36,420
you know it might be<font color="#E5E5E5"> a little bit</font>

162
00:06:35,160 --> 00:06:37,380
<font color="#E5E5E5">messier than that we might have you're</font>

163
00:06:36,420 --> 00:06:38,850
not<font color="#E5E5E5"> gonna have just one topic</font>

164
00:06:37,380 --> 00:06:39,330
<font color="#CCCCCC">everything's</font><font color="#E5E5E5"> gonna push</font><font color="#CCCCCC"> to otherwise</font>

165
00:06:38,850 --> 00:06:40,889
<font color="#CCCCCC">your</font>

166
00:06:39,330 --> 00:06:42,389
have to<font color="#E5E5E5"> spend a lot</font><font color="#CCCCCC"> of time parsing</font>

167
00:06:40,889 --> 00:06:44,129
<font color="#CCCCCC">those logs figuring out which</font><font color="#E5E5E5"> of them</font>

168
00:06:42,389 --> 00:06:45,509
<font color="#E5E5E5">you need to consume and throw</font><font color="#CCCCCC"> away so</font>

169
00:06:44,129 --> 00:06:47,490
you can segment them so that<font color="#E5E5E5"> you're only</font>

170
00:06:45,509 --> 00:06:49,520
consuming<font color="#E5E5E5"> each service is only</font><font color="#CCCCCC"> consuming</font>

171
00:06:47,490 --> 00:06:51,479
the logs that<font color="#CCCCCC"> are important</font><font color="#E5E5E5"> to them</font><font color="#CCCCCC"> so</font>

172
00:06:49,520 --> 00:06:54,508
<font color="#CCCCCC">today we're going</font><font color="#E5E5E5"> to talk a little bit</font>

173
00:06:51,479 --> 00:06:55,949
<font color="#CCCCCC">about securing Kafka some of the reasons</font>

174
00:06:54,509 --> 00:06:58,050
<font color="#CCCCCC">you might want to do it is just for good</font>

175
00:06:55,949 --> 00:07:00,719
security hygiene you might have some

176
00:06:58,050 --> 00:07:06,270
<font color="#E5E5E5">requirements around</font><font color="#CCCCCC"> compliance for PCI</font>

177
00:07:00,719 --> 00:07:07,919
<font color="#CCCCCC">GD P R people pH I like</font><font color="#E5E5E5"> HIPAA and then</font>

178
00:07:06,270 --> 00:07:09,419
you also<font color="#E5E5E5"> want to just avoid</font><font color="#CCCCCC"> any</font><font color="#E5E5E5"> problems</font>

179
00:07:07,919 --> 00:07:12,479
you<font color="#E5E5E5"> might have if</font><font color="#CCCCCC"> you just let anybody</font>

180
00:07:09,419 --> 00:07:15,448
publish you could have abuse and and

181
00:07:12,479 --> 00:07:16,830
contaminated data<font color="#E5E5E5"> so there are several</font>

182
00:07:15,449 --> 00:07:18,389
things<font color="#CCCCCC"> you need to consider when</font><font color="#E5E5E5"> you're</font>

183
00:07:16,830 --> 00:07:20,878
using Kafka the first is that<font color="#E5E5E5"> you're</font>

184
00:07:18,389 --> 00:07:22,770
encrypting<font color="#CCCCCC"> the data in transport</font><font color="#E5E5E5"> so that</font>

185
00:07:20,879 --> 00:07:25,139
<font color="#CCCCCC">is data that's coming from a producer</font>

186
00:07:22,770 --> 00:07:28,080
<font color="#CCCCCC">into the brokers or out of the brokers</font>

187
00:07:25,139 --> 00:07:32,279
to<font color="#CCCCCC"> the consumers</font><font color="#E5E5E5"> and then also from</font>

188
00:07:28,080 --> 00:07:33,810
<font color="#CCCCCC">server to server as well this</font><font color="#E5E5E5"> you also</font>

189
00:07:32,279 --> 00:07:34,919
have<font color="#E5E5E5"> authentication so you want to make</font>

190
00:07:33,810 --> 00:07:36,479
<font color="#CCCCCC">sure that you're authenticating the</font>

191
00:07:34,919 --> 00:07:38,008
clients<font color="#CCCCCC"> that are communicating with you</font>

192
00:07:36,479 --> 00:07:40,050
so a client<font color="#CCCCCC"> in this</font><font color="#E5E5E5"> case I'm gonna</font><font color="#CCCCCC"> use</font>

193
00:07:38,009 --> 00:07:42,210
the word client and when I say client I

194
00:07:40,050 --> 00:07:45,479
mean either<font color="#E5E5E5"> the producer or consumer</font>

195
00:07:42,210 --> 00:07:47,638
consumer authentication<font color="#E5E5E5"> again just make</font>

196
00:07:45,479 --> 00:07:48,330
sure<font color="#CCCCCC"> that you're communicating with</font><font color="#E5E5E5"> who</font>

197
00:07:47,639 --> 00:07:50,840
you intended

198
00:07:48,330 --> 00:07:53,068
you also have<font color="#E5E5E5"> encryption at rest and</font>

199
00:07:50,840 --> 00:07:55,349
<font color="#CCCCCC">this</font><font color="#E5E5E5"> is to ensure</font><font color="#CCCCCC"> the data</font><font color="#E5E5E5"> is protected</font>

200
00:07:53,069 --> 00:07:57,240
<font color="#E5E5E5">while it's being stored on disk and then</font>

201
00:07:55,349 --> 00:07:59,490
you have<font color="#E5E5E5"> authorizations so you might</font>

202
00:07:57,240 --> 00:08:00,659
have encrypted communication<font color="#E5E5E5"> you might</font>

203
00:07:59,490 --> 00:08:02,990
know who you're<font color="#CCCCCC"> working with but</font><font color="#E5E5E5"> you</font>

204
00:08:00,659 --> 00:08:08,009
want<font color="#E5E5E5"> to limit them to certain privileges</font>

205
00:08:02,990 --> 00:08:10,409
<font color="#E5E5E5">within the service so out</font><font color="#CCCCCC"> of the</font><font color="#E5E5E5"> box</font>

206
00:08:08,009 --> 00:08:12,690
<font color="#CCCCCC">just</font><font color="#E5E5E5"> within each of these so transport</font>

207
00:08:10,409 --> 00:08:14,279
encryption<font color="#E5E5E5"> all messages out of the box</font>

208
00:08:12,690 --> 00:08:16,289
are send in<font color="#CCCCCC"> plain text by default</font>

209
00:08:14,279 --> 00:08:18,599
authentication<font color="#CCCCCC"> there's no authentication</font>

210
00:08:16,289 --> 00:08:20,490
required by default encryption arrest

211
00:08:18,599 --> 00:08:23,099
<font color="#E5E5E5">there's no special accommodations made</font>

212
00:08:20,490 --> 00:08:24,330
for Kafka<font color="#E5E5E5"> with within Kafka for it we'll</font>

213
00:08:23,099 --> 00:08:27,120
talk<font color="#CCCCCC"> about what options</font><font color="#E5E5E5"> there could be</font>

214
00:08:24,330 --> 00:08:29,758
<font color="#E5E5E5">and then for authorization</font><font color="#CCCCCC"> again open by</font>

215
00:08:27,120 --> 00:08:31,169
<font color="#CCCCCC">default so let's take a look at some</font><font color="#E5E5E5"> of</font>

216
00:08:29,759 --> 00:08:34,800
these the<font color="#CCCCCC"> first thing we're going</font><font color="#E5E5E5"> to</font>

217
00:08:31,169 --> 00:08:36,328
<font color="#CCCCCC">look at is the khakha defaults just to</font>

218
00:08:34,799 --> 00:08:37,620
take a<font color="#E5E5E5"> look at what that looks</font><font color="#CCCCCC"> like</font>

219
00:08:36,328 --> 00:08:41,789
so in<font color="#E5E5E5"> here the only thing that I've</font>

220
00:08:37,620 --> 00:08:44,070
changed<font color="#E5E5E5"> is instead of listening on on</font>

221
00:08:41,789 --> 00:08:48,480
any address I've changed<font color="#E5E5E5"> to just listen</font>

222
00:08:44,070 --> 00:08:53,100
to my my Kafka<font color="#E5E5E5"> service this is just a</font>

223
00:08:48,480 --> 00:08:54,330
single ec2 instance<font color="#E5E5E5"> there's there's</font>

224
00:08:53,100 --> 00:08:58,220
you can see that<font color="#E5E5E5"> I'm listening on</font>

225
00:08:54,330 --> 00:09:01,620
<font color="#CCCCCC">plaintexts on port here is 1992 and then</font>

226
00:08:58,220 --> 00:09:03,240
<font color="#E5E5E5">zookeeper</font><font color="#CCCCCC"> is on port 21 81 we'll talk a</font>

227
00:09:01,620 --> 00:09:05,850
little<font color="#E5E5E5"> bit about securing zookeeper and</font>

228
00:09:03,240 --> 00:09:09,120
<font color="#E5E5E5">the challenges there again there's no</font>

229
00:09:05,850 --> 00:09:11,550
default authorization<font color="#CCCCCC"> or authentication</font>

230
00:09:09,120 --> 00:09:14,160
so that means that<font color="#CCCCCC"> anybody could create</font>

231
00:09:11,550 --> 00:09:17,699
or delete<font color="#CCCCCC"> a topic so what</font><font color="#E5E5E5"> that would</font>

232
00:09:14,160 --> 00:09:19,980
look like is here I have<font color="#E5E5E5"> a sample</font><font color="#CCCCCC"> Kafka</font>

233
00:09:17,700 --> 00:09:22,080
client<font color="#E5E5E5"> that I've connected to my Kafka</font>

234
00:09:19,980 --> 00:09:24,840
service I've just asked it to create<font color="#E5E5E5"> a</font>

235
00:09:22,080 --> 00:09:26,490
<font color="#E5E5E5">topic</font><font color="#CCCCCC"> there's no authentication going on</font>

236
00:09:24,840 --> 00:09:28,050
here<font color="#E5E5E5"> and once I've done that I get a</font>

237
00:09:26,490 --> 00:09:29,400
created topic and everything's happy

238
00:09:28,050 --> 00:09:33,060
<font color="#E5E5E5">again this is just what it</font><font color="#CCCCCC"> looks like</font>

239
00:09:29,400 --> 00:09:34,439
out of<font color="#E5E5E5"> the box and any client can</font>

240
00:09:33,060 --> 00:09:36,150
connect and then a client<font color="#E5E5E5"> can produce</font>

241
00:09:34,440 --> 00:09:40,650
messages and anybody<font color="#E5E5E5"> can consume</font>

242
00:09:36,150 --> 00:09:43,829
messages so up here on the top this<font color="#E5E5E5"> is</font>

243
00:09:40,650 --> 00:09:46,290
<font color="#CCCCCC">my producer</font><font color="#E5E5E5"> I'm gonna connect I get the</font>

244
00:09:43,830 --> 00:09:47,880
<font color="#CCCCCC">little</font><font color="#E5E5E5"> shout I get my Chevron I can type</font>

245
00:09:46,290 --> 00:09:51,599
in<font color="#E5E5E5"> if I get another Chevron that can</font>

246
00:09:47,880 --> 00:09:54,150
confirms my message was was published

247
00:09:51,600 --> 00:10:01,530
and<font color="#E5E5E5"> we can see</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> being consumed on</font>

248
00:09:54,150 --> 00:10:05,760
below for my consumer<font color="#CCCCCC"> again they're in</font>

249
00:10:01,530 --> 00:10:08,040
<font color="#E5E5E5">transport</font><font color="#CCCCCC"> that means that we can see</font>

250
00:10:05,760 --> 00:10:09,810
everything<font color="#CCCCCC"> that's being sent</font><font color="#E5E5E5"> that means</font>

251
00:10:08,040 --> 00:10:13,560
it's prone to sniffing and tampering and

252
00:10:09,810 --> 00:10:15,449
other PII<font color="#E5E5E5"> can be exposed</font><font color="#CCCCCC"> so here I have</font>

253
00:10:13,560 --> 00:10:18,060
again let's say I'm sending a you know

254
00:10:15,450 --> 00:10:21,750
<font color="#CCCCCC">social security</font><font color="#E5E5E5"> numbers across</font><font color="#CCCCCC"> the wire</font>

255
00:10:18,060 --> 00:10:24,089
<font color="#E5E5E5">using my publisher</font><font color="#CCCCCC"> if we send those then</font>

256
00:10:21,750 --> 00:10:27,930
I can just you know<font color="#E5E5E5"> I'm just listening</font>

257
00:10:24,090 --> 00:10:30,030
on anything<font color="#E5E5E5"> that's going to</font><font color="#CCCCCC"> my Kafka</font>

258
00:10:27,930 --> 00:10:31,979
server and I can see in the bottom<font color="#E5E5E5"> right</font>

259
00:10:30,030 --> 00:10:33,839
my<font color="#E5E5E5"> social security number</font><font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> showing up</font>

260
00:10:31,980 --> 00:10:39,450
<font color="#E5E5E5">that is not my actual social security</font>

261
00:10:33,840 --> 00:10:42,300
number<font color="#E5E5E5"> so Kafka transport encryption so</font>

262
00:10:39,450 --> 00:10:45,240
Kafka just has normal transport

263
00:10:42,300 --> 00:10:46,770
encryption and<font color="#E5E5E5"> through TLS</font><font color="#CCCCCC"> you can set</font>

264
00:10:45,240 --> 00:10:50,910
it<font color="#E5E5E5"> up</font><font color="#CCCCCC"> as either one</font><font color="#E5E5E5"> way meaning that the</font>

265
00:10:46,770 --> 00:10:52,560
clients only<font color="#E5E5E5"> need to encrypt what</font>

266
00:10:50,910 --> 00:10:54,600
they're sending to the brokers or you

267
00:10:52,560 --> 00:11:00,000
can set<font color="#E5E5E5"> it up as mutual TLS it supports</font>

268
00:10:54,600 --> 00:11:02,010
TLS 1.0 1.1 and<font color="#E5E5E5"> 1.2 what this looks like</font>

269
00:11:00,000 --> 00:11:03,870
is a quick TLS overview is on the<font color="#CCCCCC"> left I</font>

270
00:11:02,010 --> 00:11:06,120
<font color="#CCCCCC">have a caucus server on the right I have</font>

271
00:11:03,870 --> 00:11:06,800
<font color="#E5E5E5">a</font><font color="#CCCCCC"> copy</font><font color="#E5E5E5"> of client the caucus server is</font>

272
00:11:06,120 --> 00:11:08,420
<font color="#CCCCCC">going</font><font color="#E5E5E5"> to have a key</font>

273
00:11:06,800 --> 00:11:10,040
door and a trust store in the<font color="#CCCCCC"> coffee</font>

274
00:11:08,420 --> 00:11:13,069
<font color="#E5E5E5">client in this example is</font><font color="#CCCCCC"> only</font><font color="#E5E5E5"> going to</font>

275
00:11:10,040 --> 00:11:14,779
<font color="#E5E5E5">really need the trust or the</font><font color="#CCCCCC"> Kafka's</font>

276
00:11:13,070 --> 00:11:17,000
server will have a signed certificate

277
00:11:14,779 --> 00:11:19,820
<font color="#E5E5E5">from our certificate authority or your</font>

278
00:11:17,000 --> 00:11:23,360
certificate authority the<font color="#CCCCCC"> Kafka client</font>

279
00:11:19,820 --> 00:11:25,550
will have<font color="#E5E5E5"> the public certificate and</font>

280
00:11:23,360 --> 00:11:28,160
then in the when the copy of client

281
00:11:25,550 --> 00:11:30,500
wants to initiate communication<font color="#CCCCCC"> they'll</font>

282
00:11:28,160 --> 00:11:32,329
get back the signed certificate they'll

283
00:11:30,500 --> 00:11:34,579
validate it<font color="#CCCCCC"> and then they'll initiate</font>

284
00:11:32,329 --> 00:11:40,189
<font color="#CCCCCC">secured</font><font color="#E5E5E5"> communication</font><font color="#CCCCCC"> this is an overly</font>

285
00:11:34,579 --> 00:11:41,449
simplified version of<font color="#E5E5E5"> TLS</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> so let's</font>

286
00:11:40,190 --> 00:11:45,190
take a look at that what you need to do

287
00:11:41,450 --> 00:11:47,990
to set<font color="#CCCCCC"> cock-up to have this one-way</font>

288
00:11:45,190 --> 00:11:50,390
<font color="#CCCCCC">encrypted</font><font color="#E5E5E5"> communication first</font><font color="#CCCCCC"> you need</font>

289
00:11:47,990 --> 00:11:51,800
to identify<font color="#E5E5E5"> your CA so hopefully we have</font>

290
00:11:50,390 --> 00:11:55,399
something<font color="#E5E5E5"> to have a CA at your</font>

291
00:11:51,800 --> 00:11:56,990
organization or you can you know create

292
00:11:55,399 --> 00:11:59,810
<font color="#E5E5E5">your</font><font color="#CCCCCC"> own CA and I'm gonna</font><font color="#E5E5E5"> do that in</font>

293
00:11:56,990 --> 00:12:03,230
<font color="#E5E5E5">this in my examples here you'll generate</font>

294
00:11:59,810 --> 00:12:05,959
a key store on the server you'll

295
00:12:03,230 --> 00:12:07,730
generate a<font color="#CCCCCC"> java key a</font><font color="#E5E5E5"> java key store</font>

296
00:12:05,959 --> 00:12:09,589
you'll generate a new key<font color="#E5E5E5"> you'll</font>

297
00:12:07,730 --> 00:12:12,440
generate a server request<font color="#E5E5E5"> get that</font>

298
00:12:09,589 --> 00:12:14,120
signed<font color="#E5E5E5"> server cert from your CA and then</font>

299
00:12:12,440 --> 00:12:17,360
install<font color="#E5E5E5"> that server cert into your key</font>

300
00:12:14,120 --> 00:12:19,820
store install the public CA<font color="#E5E5E5"> assert into</font>

301
00:12:17,360 --> 00:12:22,760
your key store and then<font color="#E5E5E5"> job generate a</font>

302
00:12:19,820 --> 00:12:24,649
<font color="#E5E5E5">Java trust trust store and put the</font>

303
00:12:22,760 --> 00:12:27,140
public CA shirt into that trust or as

304
00:12:24,649 --> 00:12:28,760
well then you'll need<font color="#E5E5E5"> to go into Kafka</font>

305
00:12:27,140 --> 00:12:30,980
and configure the server properties<font color="#E5E5E5"> and</font>

306
00:12:28,760 --> 00:12:33,709
then you'll need<font color="#E5E5E5"> to</font><font color="#CCCCCC"> ensure that the new</font>

307
00:12:30,980 --> 00:12:35,510
the ssl port that you've configured is

308
00:12:33,709 --> 00:12:37,609
open and then<font color="#E5E5E5"> you can go ahead and</font>

309
00:12:35,510 --> 00:12:39,649
restart<font color="#E5E5E5"> your server so let's go through</font>

310
00:12:37,610 --> 00:12:41,630
<font color="#E5E5E5">those steps really quickly</font><font color="#CCCCCC"> I'm gonna</font>

311
00:12:39,649 --> 00:12:43,640
blast through these<font color="#E5E5E5"> because this</font><font color="#CCCCCC"> is all</font>

312
00:12:41,630 --> 00:12:46,010
normal<font color="#E5E5E5"> just like CA cert stuff but just</font>

313
00:12:43,640 --> 00:12:50,329
<font color="#E5E5E5">for an idea</font><font color="#CCCCCC"> Here I am generating a new</font>

314
00:12:46,010 --> 00:12:53,180
key store within<font color="#E5E5E5"> that key store</font><font color="#CCCCCC"> I'm also</font>

315
00:12:50,329 --> 00:12:55,099
going to<font color="#E5E5E5"> just look at what I have in</font>

316
00:12:53,180 --> 00:12:57,709
there<font color="#CCCCCC"> after I generate a new key I can</font>

317
00:12:55,100 --> 00:13:00,230
see<font color="#E5E5E5"> that I have a key for my my</font><font color="#CCCCCC"> don't</font><font color="#E5E5E5"> my</font>

318
00:12:57,709 --> 00:13:05,569
<font color="#E5E5E5">host</font><font color="#CCCCCC"> caca de taille Lee Paxton comm and</font>

319
00:13:00,230 --> 00:13:10,790
then I'm<font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> go</font><font color="#CCCCCC"> ahead and import the</font>

320
00:13:05,570 --> 00:13:16,730
root certificate<font color="#E5E5E5"> from the from my public</font>

321
00:13:10,790 --> 00:13:18,260
CA<font color="#E5E5E5"> and then I'm going to request a</font><font color="#CCCCCC"> sign</font>

322
00:13:16,730 --> 00:13:20,080
<font color="#E5E5E5">certificate using that public</font>

323
00:13:18,260 --> 00:13:23,680
certificate in my

324
00:13:20,080 --> 00:13:25,300
my key that's in my key store<font color="#E5E5E5"> so now I</font>

325
00:13:23,680 --> 00:13:27,250
have a certificate request<font color="#CCCCCC"> I'm going to</font>

326
00:13:25,300 --> 00:13:29,709
send<font color="#CCCCCC"> that over to</font><font color="#E5E5E5"> my CA</font><font color="#CCCCCC"> if you're paying</font>

327
00:13:27,250 --> 00:13:32,440
attention<font color="#CCCCCC"> this same server</font><font color="#E5E5E5"> also has my</font>

328
00:13:29,709 --> 00:13:34,300
cert of my CA cert and key on it so it's

329
00:13:32,440 --> 00:13:37,810
pretty easy<font color="#CCCCCC"> for me to</font><font color="#E5E5E5"> do normally you</font>

330
00:13:34,300 --> 00:13:40,089
<font color="#E5E5E5">would you know send this over to whoever</font>

331
00:13:37,810 --> 00:13:42,369
<font color="#CCCCCC">it is that's responsible for the your</font><font color="#E5E5E5"> CA</font>

332
00:13:40,089 --> 00:13:44,500
in your organization<font color="#CCCCCC"> so I generate that</font>

333
00:13:42,370 --> 00:13:46,930
<font color="#CCCCCC">and now I can verify my sign cert</font><font color="#E5E5E5"> I have</font>

334
00:13:44,500 --> 00:13:49,420
a<font color="#E5E5E5"> signed cert for my</font><font color="#CCCCCC"> host from my CA</font><font color="#E5E5E5"> and</font>

335
00:13:46,930 --> 00:13:52,000
I'm<font color="#E5E5E5"> gonna go ahead and import</font><font color="#CCCCCC"> that into</font>

336
00:13:49,420 --> 00:13:56,610
my key store<font color="#E5E5E5"> so now in my key store</font><font color="#CCCCCC"> I</font>

337
00:13:52,000 --> 00:14:01,600
have my key I have<font color="#CCCCCC"> a sign sign key and</font>

338
00:13:56,610 --> 00:14:03,519
the the cert from<font color="#E5E5E5"> the public CA so again</font>

339
00:14:01,600 --> 00:14:05,709
<font color="#CCCCCC">that's all pretty pretty straightforward</font>

340
00:14:03,519 --> 00:14:09,760
if you worked with any sort<font color="#E5E5E5"> of</font>

341
00:14:05,709 --> 00:14:11,109
encryption<font color="#E5E5E5"> in the past and then the next</font>

342
00:14:09,760 --> 00:14:13,569
thing<font color="#E5E5E5"> that we need</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> do is</font><font color="#CCCCCC"> open up our</font>

343
00:14:11,110 --> 00:14:16,660
server properties<font color="#E5E5E5"> file so in the server</font>

344
00:14:13,570 --> 00:14:20,860
properties<font color="#E5E5E5"> file</font><font color="#CCCCCC"> again I just initially</font>

345
00:14:16,660 --> 00:14:22,449
was set up to<font color="#E5E5E5"> listen on port</font><font color="#CCCCCC"> 90</font><font color="#E5E5E5"> 92</font><font color="#CCCCCC"> and</font>

346
00:14:20,860 --> 00:14:25,420
I'm going<font color="#E5E5E5"> to configure it</font><font color="#CCCCCC"> to listen on</font>

347
00:14:22,450 --> 00:14:27,700
port<font color="#CCCCCC"> 1993 I'm gonna still listen on port</font>

348
00:14:25,420 --> 00:14:29,349
1992 as well you can<font color="#E5E5E5"> have both in place</font>

349
00:14:27,700 --> 00:14:30,579
obviously<font color="#CCCCCC"> that's not</font><font color="#E5E5E5"> you know if any</font>

350
00:14:29,350 --> 00:14:31,870
it's<font color="#E5E5E5"> not going to be secure but I'm</font>

351
00:14:30,579 --> 00:14:33,969
<font color="#E5E5E5">gonna use</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> just as I walk</font><font color="#CCCCCC"> through my</font>

352
00:14:31,870 --> 00:14:36,820
examples you could<font color="#E5E5E5"> eventually remove</font>

353
00:14:33,970 --> 00:14:38,770
that<font color="#E5E5E5"> or if you want to not have inter</font>

354
00:14:36,820 --> 00:14:40,660
broker<font color="#E5E5E5"> secure communication you would</font>

355
00:14:38,770 --> 00:14:44,110
need to<font color="#E5E5E5"> continue</font><font color="#CCCCCC"> listening on port 1980</font>

356
00:14:40,660 --> 00:14:46,000
to 1992 as well<font color="#E5E5E5"> there's some</font><font color="#CCCCCC"> additional</font>

357
00:14:44,110 --> 00:14:47,800
<font color="#E5E5E5">configuration settings that I have here</font>

358
00:14:46,000 --> 00:14:52,209
<font color="#E5E5E5">that point to where my key store</font><font color="#CCCCCC"> or</font><font color="#E5E5E5"> my</font>

359
00:14:47,800 --> 00:14:55,479
trust or are and have my my passwords

360
00:14:52,209 --> 00:14:57,369
for them<font color="#E5E5E5"> the last thing that you can do</font>

361
00:14:55,480 --> 00:14:58,779
this is an optional setting<font color="#E5E5E5"> so</font><font color="#CCCCCC"> you don't</font>

362
00:14:57,370 --> 00:15:01,630
have to set this but you can set the

363
00:14:58,779 --> 00:15:04,540
protocols<font color="#E5E5E5"> that you allow so ideally</font><font color="#CCCCCC"> you</font>

364
00:15:01,630 --> 00:15:07,689
would limit it to TLS 1.2<font color="#E5E5E5"> you could do</font>

365
00:15:04,540 --> 00:15:11,170
<font color="#E5E5E5">1.1 optionally as well hopefully not 1.0</font>

366
00:15:07,690 --> 00:15:13,360
as it's no longer<font color="#E5E5E5"> considered secure the</font>

367
00:15:11,170 --> 00:15:16,390
next step is to open<font color="#E5E5E5"> up the</font><font color="#CCCCCC"> your</font><font color="#E5E5E5"> port so</font>

368
00:15:13,360 --> 00:15:18,100
<font color="#E5E5E5">I'm going</font><font color="#CCCCCC"> to open up my port</font><font color="#E5E5E5"> for SSL so</font>

369
00:15:16,390 --> 00:15:20,170
I can allow secure communication and

370
00:15:18,100 --> 00:15:22,810
accept income ends and accept incoming

371
00:15:20,170 --> 00:15:24,250
<font color="#E5E5E5">requests on that port so now that I have</font>

372
00:15:22,810 --> 00:15:26,349
my server set up<font color="#E5E5E5"> the next</font><font color="#CCCCCC"> thing that I'm</font>

373
00:15:24,250 --> 00:15:27,730
<font color="#CCCCCC">going to do is set up</font><font color="#E5E5E5"> my client on</font><font color="#CCCCCC"> my</font>

374
00:15:26,350 --> 00:15:29,380
client I<font color="#E5E5E5"> want to go through and I just</font>

375
00:15:27,730 --> 00:15:30,760
<font color="#CCCCCC">need</font><font color="#E5E5E5"> to generate a trust store here so</font>

376
00:15:29,380 --> 00:15:32,470
only<font color="#E5E5E5"> a trust</font><font color="#CCCCCC"> door in this first step</font>

377
00:15:30,760 --> 00:15:33,140
unless<font color="#E5E5E5"> I'm doing mutual TLS and</font><font color="#CCCCCC"> we'll</font>

378
00:15:32,470 --> 00:15:34,940
<font color="#E5E5E5">get to that</font>

379
00:15:33,140 --> 00:15:36,589
<font color="#E5E5E5">I'm going to import the see a public</font>

380
00:15:34,940 --> 00:15:38,209
<font color="#CCCCCC">cert into that trust door what that</font>

381
00:15:36,589 --> 00:15:42,110
allows<font color="#E5E5E5"> me to do is confirm that the sign</font>

382
00:15:38,209 --> 00:15:45,680
<font color="#E5E5E5">cert was signed by I my trusted CA and</font>

383
00:15:42,110 --> 00:15:47,269
keep<font color="#E5E5E5"> that chain of trust now neck the</font>

384
00:15:45,680 --> 00:15:50,930
next<font color="#CCCCCC"> thing that</font><font color="#E5E5E5"> I want to do is set up</font>

385
00:15:47,269 --> 00:15:53,510
<font color="#E5E5E5">the client properties and then change my</font>

386
00:15:50,930 --> 00:15:56,750
<font color="#E5E5E5">connection</font><font color="#CCCCCC"> information to include those</font>

387
00:15:53,510 --> 00:15:59,839
client properties in them<font color="#E5E5E5"> so again</font>

388
00:15:56,750 --> 00:16:05,630
creating a trust<font color="#E5E5E5"> or using key tool</font><font color="#CCCCCC"> I</font>

389
00:15:59,839 --> 00:16:08,089
have<font color="#CCCCCC"> a now I imported the</font><font color="#E5E5E5"> see a public</font>

390
00:16:05,630 --> 00:16:10,279
certificate into my trust<font color="#E5E5E5"> store and then</font>

391
00:16:08,089 --> 00:16:12,709
I'm gonna go into<font color="#CCCCCC"> my client properties</font>

392
00:16:10,279 --> 00:16:16,160
and I'm going to set the security

393
00:16:12,709 --> 00:16:18,199
<font color="#E5E5E5">protocol to be SSL and point to my trust</font>

394
00:16:16,160 --> 00:16:19,490
<font color="#CCCCCC">store and give it my password</font><font color="#E5E5E5"> so now</font>

395
00:16:18,200 --> 00:16:21,500
that's all set up I'm gonna save that

396
00:16:19,490 --> 00:16:23,649
into a file called<font color="#E5E5E5"> client properties and</font>

397
00:16:21,500 --> 00:16:28,070
in my connection information<font color="#E5E5E5"> I'm gonna</font>

398
00:16:23,649 --> 00:16:29,779
create<font color="#E5E5E5"> a topic and you'll know that when</font>

399
00:16:28,070 --> 00:16:36,829
<font color="#E5E5E5">I'm creating</font><font color="#CCCCCC"> my topic</font><font color="#E5E5E5"> I'm pointing to</font>

400
00:16:29,779 --> 00:16:39,470
not the<font color="#E5E5E5"> I'm I am pointing to sorry</font><font color="#CCCCCC"> I</font>

401
00:16:36,829 --> 00:16:41,599
went<font color="#E5E5E5"> once led to many there we go right</font>

402
00:16:39,470 --> 00:16:43,519
<font color="#CCCCCC">there so when I'm creating my topic</font><font color="#E5E5E5"> I am</font>

403
00:16:41,600 --> 00:16:44,959
pointing to<font color="#E5E5E5"> the zookeeper port so</font>

404
00:16:43,519 --> 00:16:46,519
zookeeper<font color="#CCCCCC"> is responsible for</font><font color="#E5E5E5"> creating</font>

405
00:16:44,959 --> 00:16:48,260
<font color="#CCCCCC">the topic so even though I've been</font>

406
00:16:46,519 --> 00:16:50,630
forced as a cell I've set that in my

407
00:16:48,260 --> 00:16:54,800
client properties I<font color="#E5E5E5"> can still create</font>

408
00:16:50,630 --> 00:16:57,829
topics<font color="#E5E5E5"> at will</font><font color="#CCCCCC"> but if I want to connect</font>

409
00:16:54,800 --> 00:17:01,250
to<font color="#CCCCCC"> as a producer and</font><font color="#E5E5E5"> want to produce on</font>

410
00:16:57,829 --> 00:17:04,339
my new topic called<font color="#CCCCCC"> Kafka</font><font color="#E5E5E5"> secure</font><font color="#CCCCCC"> I will</font>

411
00:17:01,250 --> 00:17:07,250
I need to pass in the parameter for my

412
00:17:04,339 --> 00:17:10,188
client properties file and now I'm able

413
00:17:07,250 --> 00:17:13,939
to successfully<font color="#E5E5E5"> produce messages to my</font>

414
00:17:10,189 --> 00:17:17,410
<font color="#CCCCCC">Kopke broker so let's take a look at</font>

415
00:17:13,939 --> 00:17:20,630
what<font color="#E5E5E5"> that</font><font color="#CCCCCC"> looks like here I</font><font color="#E5E5E5"> have the</font>

416
00:17:17,410 --> 00:17:22,579
<font color="#CCCCCC">khakha</font><font color="#E5E5E5"> broker with the client properties</font>

417
00:17:20,630 --> 00:17:25,429
passed in my consumer does not<font color="#E5E5E5"> have it</font>

418
00:17:22,579 --> 00:17:27,379
<font color="#CCCCCC">and</font><font color="#E5E5E5"> it is still listening</font><font color="#CCCCCC"> on port 1992</font>

419
00:17:25,429 --> 00:17:28,669
so in this<font color="#E5E5E5"> example I have both in place</font>

420
00:17:27,380 --> 00:17:30,830
<font color="#E5E5E5">I'm publishing</font>

421
00:17:28,669 --> 00:17:32,570
I'm encrypting messages<font color="#E5E5E5"> as I publish</font>

422
00:17:30,830 --> 00:17:34,668
them but when I consume them they're not

423
00:17:32,570 --> 00:17:37,460
<font color="#E5E5E5">being encrypted on the way out so still</font>

424
00:17:34,669 --> 00:17:38,990
not<font color="#E5E5E5"> quite what</font><font color="#CCCCCC"> we want so I'm</font><font color="#E5E5E5"> going to</font>

425
00:17:37,460 --> 00:17:40,669
<font color="#E5E5E5">update my consumer connection to have</font>

426
00:17:38,990 --> 00:17:42,679
the same properties<font color="#CCCCCC"> let me use the same</font>

427
00:17:40,669 --> 00:17:44,480
properties file and in this case my

428
00:17:42,679 --> 00:17:46,820
consumer<font color="#E5E5E5"> my producer are both on the</font>

429
00:17:44,480 --> 00:17:48,679
<font color="#CCCCCC">same box so I'm just using</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> same</font><font color="#E5E5E5"> good</font>

430
00:17:46,820 --> 00:17:50,840
properties file<font color="#E5E5E5"> I'm gonna update my</font>

431
00:17:48,679 --> 00:17:53,299
connection and now that I'm connecting

432
00:17:50,840 --> 00:17:56,658
<font color="#CCCCCC">over both on</font><font color="#E5E5E5"> port</font><font color="#CCCCCC"> 1993 on both of them</font>

433
00:17:53,299 --> 00:18:01,400
I'm<font color="#E5E5E5"> able to both encrypt as I publish</font>

434
00:17:56,659 --> 00:18:02,809
<font color="#E5E5E5">and encrypt as I consume all right let's</font>

435
00:18:01,400 --> 00:18:05,390
take a<font color="#E5E5E5"> look at the next thing</font><font color="#CCCCCC"> Kafka</font>

436
00:18:02,809 --> 00:18:09,139
<font color="#E5E5E5">authentication so within Kafka</font>

437
00:18:05,390 --> 00:18:10,970
authentication<font color="#CCCCCC"> this is going to</font>

438
00:18:09,140 --> 00:18:13,039
authenticate<font color="#CCCCCC"> the clients that we are</font>

439
00:18:10,970 --> 00:18:14,750
<font color="#E5E5E5">communicating</font><font color="#CCCCCC"> with we trust</font><font color="#E5E5E5"> so we</font>

440
00:18:13,039 --> 00:18:16,700
<font color="#CCCCCC">already</font><font color="#E5E5E5"> have the see a public</font>

441
00:18:14,750 --> 00:18:19,130
certificate in our trust<font color="#E5E5E5"> store so now we</font>

442
00:18:16,700 --> 00:18:21,590
<font color="#E5E5E5">just need to get a signed certificate</font><font color="#CCCCCC"> to</font>

443
00:18:19,130 --> 00:18:23,600
the clients<font color="#CCCCCC"> so once we have the</font><font color="#E5E5E5"> client</font>

444
00:18:21,590 --> 00:18:25,549
sign<font color="#E5E5E5"> client certificate that enables us</font>

445
00:18:23,600 --> 00:18:28,580
to<font color="#E5E5E5"> have a mutual</font><font color="#CCCCCC"> trust</font><font color="#E5E5E5"> and then we can</font>

446
00:18:25,549 --> 00:18:33,830
have<font color="#E5E5E5"> security communication</font><font color="#CCCCCC"> to do that</font>

447
00:18:28,580 --> 00:18:35,899
will configure the Kafka to require off

448
00:18:33,830 --> 00:18:39,949
<font color="#E5E5E5">a Kafka server properties to require</font>

449
00:18:35,900 --> 00:18:42,740
authentication when connected over when

450
00:18:39,950 --> 00:18:44,450
we're using SSL<font color="#CCCCCC"> there are a</font><font color="#E5E5E5"> bunch of</font>

451
00:18:42,740 --> 00:18:47,120
other optional parameters that we<font color="#CCCCCC"> have</font>

452
00:18:44,450 --> 00:18:49,070
here<font color="#E5E5E5"> so within the client we've already</font>

453
00:18:47,120 --> 00:18:50,449
talked about generating<font color="#E5E5E5"> a key store I'm</font>

454
00:18:49,070 --> 00:18:54,740
gonna<font color="#E5E5E5"> skip through these pretty quick</font>

455
00:18:50,450 --> 00:18:58,070
and<font color="#CCCCCC"> just look at our are here</font><font color="#E5E5E5"> we have</font>

456
00:18:54,740 --> 00:19:03,470
<font color="#CCCCCC">our certificate our signed certificate</font>

457
00:18:58,070 --> 00:19:05,299
we install<font color="#CCCCCC"> it into</font><font color="#E5E5E5"> our key store and now</font>

458
00:19:03,470 --> 00:19:07,159
we're going to update<font color="#E5E5E5"> our client</font>

459
00:19:05,299 --> 00:19:10,700
properties to include the key store in

460
00:19:07,159 --> 00:19:12,710
the client properties so now I've

461
00:19:10,700 --> 00:19:14,330
actually changed<font color="#E5E5E5"> this</font><font color="#CCCCCC"> is this</font><font color="#E5E5E5"> is SSL off</font>

462
00:19:12,710 --> 00:19:16,220
<font color="#E5E5E5">property so I'm</font><font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> start using that</font>

463
00:19:14,330 --> 00:19:19,000
in my connection and I'm gonna use<font color="#CCCCCC"> that</font>

464
00:19:16,220 --> 00:19:22,720
<font color="#CCCCCC">in my connection as well for my consumer</font>

465
00:19:19,000 --> 00:19:27,049
again still communicating<font color="#CCCCCC"> over my secure</font>

466
00:19:22,720 --> 00:19:31,610
<font color="#E5E5E5">SSL port so in this example example now</font>

467
00:19:27,049 --> 00:19:33,799
I'm I have mutual TLS<font color="#CCCCCC"> I I know as a as a</font>

468
00:19:31,610 --> 00:19:35,750
client<font color="#E5E5E5"> that I'm communicating with</font><font color="#CCCCCC"> the</font>

469
00:19:33,799 --> 00:19:36,950
<font color="#E5E5E5">server</font><font color="#CCCCCC"> that I want to and I know as a</font>

470
00:19:35,750 --> 00:19:39,110
<font color="#E5E5E5">server I'm communicating with clients</font>

471
00:19:36,950 --> 00:19:40,549
<font color="#E5E5E5">that I want to so</font><font color="#CCCCCC"> what are some</font><font color="#E5E5E5"> of the</font>

472
00:19:39,110 --> 00:19:42,908
lessons<font color="#E5E5E5"> that we lack we've learned here</font>

473
00:19:40,549 --> 00:19:46,820
a<font color="#E5E5E5"> couple of things that we found is that</font>

474
00:19:42,909 --> 00:19:50,360
<font color="#E5E5E5">or that job is</font><font color="#CCCCCC"> very slow</font><font color="#E5E5E5"> and especially</font>

475
00:19:46,820 --> 00:19:52,520
<font color="#E5E5E5">in</font><font color="#CCCCCC"> 1.8</font><font color="#E5E5E5"> so</font><font color="#CCCCCC"> we get we got significant</font>

476
00:19:50,360 --> 00:19:57,049
increases in<font color="#E5E5E5"> performance by going to</font>

477
00:19:52,520 --> 00:19:59,350
Java 1.9 and<font color="#E5E5E5"> zookeeper as I mentioned</font>

478
00:19:57,049 --> 00:20:01,240
doesn't support TLS so

479
00:19:59,350 --> 00:20:03,850
to enable<font color="#CCCCCC"> secure communication between</font>

480
00:20:01,240 --> 00:20:05,530
them<font color="#E5E5E5"> easy they're gonna take a lot of</font>

481
00:20:03,850 --> 00:20:08,919
effort<font color="#E5E5E5"> or you'll want</font><font color="#CCCCCC"> to take other</font>

482
00:20:05,530 --> 00:20:10,750
measures<font color="#E5E5E5"> to</font><font color="#CCCCCC"> help secure a zookeeper and</font>

483
00:20:08,920 --> 00:20:13,030
then the other another thing that we

484
00:20:10,750 --> 00:20:14,860
learned was<font color="#CCCCCC"> that we wanted to confirm</font>

485
00:20:13,030 --> 00:20:16,090
the cipher suite compatibility with<font color="#CCCCCC"> the</font>

486
00:20:14,860 --> 00:20:18,580
different client libraries<font color="#CCCCCC"> that we're</font>

487
00:20:16,090 --> 00:20:21,310
using<font color="#E5E5E5"> our producers</font><font color="#CCCCCC"> actually have a go</font>

488
00:20:18,580 --> 00:20:25,300
Kafka library called<font color="#CCCCCC"> sarama</font><font color="#E5E5E5"> and only</font>

489
00:20:21,310 --> 00:20:28,060
supported a certain subset of cipher

490
00:20:25,300 --> 00:20:29,710
suites<font color="#CCCCCC"> and so we just</font><font color="#E5E5E5"> needed to go</font>

491
00:20:28,060 --> 00:20:31,780
through and ensure<font color="#CCCCCC"> that we were using</font>

492
00:20:29,710 --> 00:20:34,450
<font color="#E5E5E5">one of those that was compatible other</font>

493
00:20:31,780 --> 00:20:35,920
things we learned is that it's<font color="#E5E5E5"> this</font><font color="#CCCCCC"> is</font>

494
00:20:34,450 --> 00:20:38,680
just really tricky<font color="#CCCCCC"> to automate</font><font color="#E5E5E5"> I'm doing</font>

495
00:20:35,920 --> 00:20:40,240
it on one broker and just one consumer

496
00:20:38,680 --> 00:20:41,470
when publisher you get a lot of keys

497
00:20:40,240 --> 00:20:47,080
you're<font color="#E5E5E5"> going to want to have some sort</font>

498
00:20:41,470 --> 00:20:48,520
of<font color="#CCCCCC"> PK PK management</font><font color="#E5E5E5"> and the other issue</font>

499
00:20:47,080 --> 00:20:49,990
that<font color="#E5E5E5"> you have is if you issue these</font>

500
00:20:48,520 --> 00:20:54,160
certificates there's no easy way<font color="#CCCCCC"> to</font>

501
00:20:49,990 --> 00:20:57,670
revoke them there's<font color="#E5E5E5"> nothing in Kafka to</font>

502
00:20:54,160 --> 00:21:03,640
ensures that<font color="#E5E5E5"> so to</font><font color="#CCCCCC"> ensure to do that</font>

503
00:20:57,670 --> 00:21:06,370
there<font color="#E5E5E5"> is there are a couple of options</font>

504
00:21:03,640 --> 00:21:09,220
<font color="#CCCCCC">that</font><font color="#E5E5E5"> you can that are outside of Kafka</font>

505
00:21:06,370 --> 00:21:12,129
that you can pursue to<font color="#E5E5E5"> support of the to</font>

506
00:21:09,220 --> 00:21:15,640
use<font color="#E5E5E5"> the native</font><font color="#CCCCCC"> Java</font><font color="#E5E5E5"> certificate</font>

507
00:21:12,130 --> 00:21:17,470
revocation<font color="#E5E5E5"> list by jumping into</font>

508
00:21:15,640 --> 00:21:19,990
authorization so authorization is the

509
00:21:17,470 --> 00:21:22,330
next level<font color="#CCCCCC"> this</font><font color="#E5E5E5"> is when we want to do</font>

510
00:21:19,990 --> 00:21:24,490
<font color="#E5E5E5">additional authentication</font><font color="#CCCCCC"> of individual</font>

511
00:21:22,330 --> 00:21:27,159
<font color="#E5E5E5">users</font><font color="#CCCCCC"> and then we want</font><font color="#E5E5E5"> to manage what</font>

512
00:21:24,490 --> 00:21:29,440
those users have access<font color="#E5E5E5"> to ideally</font>

513
00:21:27,160 --> 00:21:30,880
you're doing authentic authorization

514
00:21:29,440 --> 00:21:32,440
between all your<font color="#E5E5E5"> brokers from your</font>

515
00:21:30,880 --> 00:21:35,730
brokers to your zookeeper<font color="#E5E5E5"> and from your</font>

516
00:21:32,440 --> 00:21:38,110
clients to your cluster<font color="#E5E5E5"> as well</font>

517
00:21:35,730 --> 00:21:40,840
<font color="#E5E5E5">authentication comes in a few flavors</font>

518
00:21:38,110 --> 00:21:42,040
<font color="#E5E5E5">there's plain</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> is just a simple</font>

519
00:21:40,840 --> 00:21:46,360
<font color="#E5E5E5">username password</font>

520
00:21:42,040 --> 00:21:48,159
there's the salted<font color="#E5E5E5"> challenge</font><font color="#CCCCCC"> response</font>

521
00:21:46,360 --> 00:21:49,959
<font color="#E5E5E5">and authentication mechanism which</font><font color="#CCCCCC"> is</font>

522
00:21:48,160 --> 00:21:52,720
again username and passwords with a

523
00:21:49,960 --> 00:21:56,320
challenge or<font color="#E5E5E5"> assault and then there's</font>

524
00:21:52,720 --> 00:21:58,450
Kerberos which is a ticket based

525
00:21:56,320 --> 00:22:01,060
authentication<font color="#E5E5E5"> and it would be the</font>

526
00:21:58,450 --> 00:22:03,810
<font color="#E5E5E5">recommended option</font><font color="#CCCCCC"> to pursue Kerberos is</font>

527
00:22:01,060 --> 00:22:05,500
<font color="#CCCCCC">obtained and so it's going</font><font color="#E5E5E5"> to be painful</font>

528
00:22:03,810 --> 00:22:06,970
<font color="#CCCCCC">hopefully you already</font><font color="#E5E5E5"> have Kerberos</font>

529
00:22:05,500 --> 00:22:08,050
<font color="#CCCCCC">setup and you</font><font color="#E5E5E5"> can leverage that</font><font color="#CCCCCC"> and you</font>

530
00:22:06,970 --> 00:22:10,120
have an expert somewhere that you<font color="#E5E5E5"> can</font>

531
00:22:08,050 --> 00:22:12,110
rely on<font color="#E5E5E5"> today I'm going to</font><font color="#CCCCCC"> walk through</font>

532
00:22:10,120 --> 00:22:14,149
just doing<font color="#E5E5E5"> plain</font>

533
00:22:12,110 --> 00:22:16,399
authorization so you can see what that

534
00:22:14,150 --> 00:22:17,840
<font color="#CCCCCC">looks like for</font><font color="#E5E5E5"> that we're gonna have to</font>

535
00:22:16,400 --> 00:22:20,270
<font color="#CCCCCC">update our listeners we're gonna have to</font>

536
00:22:17,840 --> 00:22:24,939
enable<font color="#CCCCCC"> Sasol and then choose the broker</font>

537
00:22:20,270 --> 00:22:27,139
protocol<font color="#E5E5E5"> and then configure the</font><font color="#CCCCCC"> Java</font>

538
00:22:24,940 --> 00:22:29,210
<font color="#E5E5E5">authentication authorization service and</font>

539
00:22:27,140 --> 00:22:30,410
then add users to<font color="#CCCCCC"> that and on</font><font color="#E5E5E5"> the client</font>

540
00:22:29,210 --> 00:22:32,390
<font color="#CCCCCC">we're just going to</font><font color="#E5E5E5"> need to change the</font>

541
00:22:30,410 --> 00:22:35,390
client properties to include the<font color="#CCCCCC"> the</font>

542
00:22:32,390 --> 00:22:39,320
<font color="#E5E5E5">username and password</font><font color="#CCCCCC"> so what</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> looks</font>

543
00:22:35,390 --> 00:22:42,110
like<font color="#CCCCCC"> is</font><font color="#E5E5E5"> in where</font><font color="#CCCCCC"> before I</font><font color="#E5E5E5"> had plain text</font>

544
00:22:39,320 --> 00:22:45,620
and SSL I've changed SSL to be<font color="#CCCCCC"> sasso</font>

545
00:22:42,110 --> 00:22:48,129
underscore SSL<font color="#CCCCCC"> and then I have a couple</font>

546
00:22:45,620 --> 00:22:49,969
<font color="#E5E5E5">of additional server properties here</font>

547
00:22:48,130 --> 00:22:55,580
<font color="#E5E5E5">telling it which type of</font>

548
00:22:49,970 --> 00:22:56,450
<font color="#CCCCCC">Sasol to use and I'm also telling</font><font color="#E5E5E5"> it to</font>

549
00:22:55,580 --> 00:22:59,600
<font color="#E5E5E5">use</font>

550
00:22:56,450 --> 00:23:00,530
Sasol authorization between brokers<font color="#CCCCCC"> and</font>

551
00:22:59,600 --> 00:23:02,000
<font color="#E5E5E5">we're not gonna be able to see that</font>

552
00:23:00,530 --> 00:23:05,810
today<font color="#CCCCCC"> because again this is a single</font>

553
00:23:02,000 --> 00:23:08,510
single<font color="#E5E5E5"> broker cluster so you can add the</font>

554
00:23:05,810 --> 00:23:13,700
Jazz config to your server properties<font color="#E5E5E5"> or</font>

555
00:23:08,510 --> 00:23:15,800
<font color="#E5E5E5">you can you can have an external file</font>

556
00:23:13,700 --> 00:23:17,780
and point to that we've had some<font color="#E5E5E5"> issues</font>

557
00:23:15,800 --> 00:23:20,419
just<font color="#CCCCCC"> pointing to an external</font><font color="#E5E5E5"> file and</font>

558
00:23:17,780 --> 00:23:22,190
<font color="#E5E5E5">found that it was a little bit less</font>

559
00:23:20,420 --> 00:23:24,500
troublesome to put directly into<font color="#CCCCCC"> the</font>

560
00:23:22,190 --> 00:23:27,740
server<font color="#CCCCCC"> properties if you</font><font color="#E5E5E5"> wanted to do</font>

561
00:23:24,500 --> 00:23:30,500
<font color="#E5E5E5">that this</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> what the the the Jazz</font>

562
00:23:27,740 --> 00:23:32,060
configuration would look like<font color="#E5E5E5"> so in the</font>

563
00:23:30,500 --> 00:23:35,210
server file<font color="#E5E5E5"> I'm just gonna add the</font>

564
00:23:32,060 --> 00:23:37,429
listener<font color="#E5E5E5"> I'm gonna put a listener</font><font color="#CCCCCC"> SATA</font>

565
00:23:35,210 --> 00:23:40,850
config<font color="#E5E5E5"> on the listener name that I want</font>

566
00:23:37,430 --> 00:23:42,740
it to be on<font color="#E5E5E5"> and then the other nice</font>

567
00:23:40,850 --> 00:23:46,520
thing is if you<font color="#E5E5E5"> use the external</font><font color="#CCCCCC"> Jaz</font>

568
00:23:42,740 --> 00:23:49,790
file you<font color="#E5E5E5"> can include that in Kafka ops</font>

569
00:23:46,520 --> 00:23:51,620
which is an option that<font color="#E5E5E5"> runs all the</font>

570
00:23:49,790 --> 00:23:56,120
<font color="#E5E5E5">time and just starts out blank when</font>

571
00:23:51,620 --> 00:23:57,949
you're starting<font color="#E5E5E5"> your</font><font color="#CCCCCC"> khakha brokers so</font>

572
00:23:56,120 --> 00:23:59,750
this is what I've<font color="#E5E5E5"> created a user I've</font>

573
00:23:57,950 --> 00:24:03,380
called it Kafka client<font color="#E5E5E5"> giving it a</font>

574
00:23:59,750 --> 00:24:04,820
password<font color="#E5E5E5"> now I have a password</font><font color="#CCCCCC"> and I'm</font>

575
00:24:03,380 --> 00:24:08,240
<font color="#CCCCCC">gonna include that in</font><font color="#E5E5E5"> my client</font>

576
00:24:04,820 --> 00:24:11,600
properties<font color="#E5E5E5"> so and I've told it also to</font>

577
00:24:08,240 --> 00:24:13,550
use<font color="#CCCCCC"> Sasol in the client properties so</font><font color="#E5E5E5"> I</font>

578
00:24:11,600 --> 00:24:15,620
also<font color="#E5E5E5"> created a bad password and I'm</font>

579
00:24:13,550 --> 00:24:17,389
gonna<font color="#E5E5E5"> go ahead</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> test that out so</font>

580
00:24:15,620 --> 00:24:20,479
first I'm<font color="#E5E5E5"> gonna try it with the wrong</font>

581
00:24:17,390 --> 00:24:22,010
password<font color="#E5E5E5"> properties file and we can</font><font color="#CCCCCC"> see</font>

582
00:24:20,480 --> 00:24:24,770
<font color="#CCCCCC">that I get an error saying I have an</font>

583
00:24:22,010 --> 00:24:27,440
invalid<font color="#CCCCCC"> user name or password</font><font color="#E5E5E5"> so</font>

584
00:24:24,770 --> 00:24:30,470
before when I<font color="#CCCCCC"> had</font><font color="#E5E5E5"> that's one of the nice</font>

585
00:24:27,440 --> 00:24:32,810
<font color="#CCCCCC">things about using</font><font color="#E5E5E5"> the authorization as</font>

586
00:24:30,470 --> 00:24:35,120
you get a little<font color="#CCCCCC"> bit better messaging</font>

587
00:24:32,810 --> 00:24:38,179
around<font color="#CCCCCC"> if you're not able to</font>

588
00:24:35,120 --> 00:24:39,679
successfully connect<font color="#E5E5E5"> when I don't know</font>

589
00:24:38,180 --> 00:24:42,710
if I can't remember<font color="#E5E5E5"> if I had an example</font>

590
00:24:39,680 --> 00:24:44,540
but if<font color="#CCCCCC"> you were using</font><font color="#E5E5E5"> just encrypted TLS</font>

591
00:24:42,710 --> 00:24:47,210
<font color="#E5E5E5">and you connect and you try to produce</font>

592
00:24:44,540 --> 00:24:48,800
you know<font color="#E5E5E5"> you don't get any message back</font>

593
00:24:47,210 --> 00:24:50,450
telling<font color="#E5E5E5"> you that it didn't produce or</font>

594
00:24:48,800 --> 00:24:52,220
why all you get is<font color="#CCCCCC"> just you know that it</font>

595
00:24:50,450 --> 00:24:54,290
didn't produce<font color="#E5E5E5"> it doesn't it</font><font color="#CCCCCC"> doesn't</font>

596
00:24:52,220 --> 00:24:57,560
produce so this is a little<font color="#CCCCCC"> bit better</font>

597
00:24:54,290 --> 00:24:59,210
<font color="#E5E5E5">for</font><font color="#CCCCCC"> troubleshooting now I'm gonna change</font>

598
00:24:57,560 --> 00:25:07,300
<font color="#E5E5E5">it to the correct properties and here</font>

599
00:24:59,210 --> 00:25:09,410
I'm<font color="#E5E5E5"> gonna go in let me hit play manually</font>

600
00:25:07,300 --> 00:25:12,080
<font color="#E5E5E5">so now I'm gonna go ahead and connect</font>

601
00:25:09,410 --> 00:25:16,310
and in this case now I am

602
00:25:12,080 --> 00:25:23,689
I'm authenticated using<font color="#E5E5E5"> my username and</font>

603
00:25:16,310 --> 00:25:26,659
password and the messages will publish

604
00:25:23,690 --> 00:25:28,340
so now I have authenticated<font color="#E5E5E5"> messages the</font>

605
00:25:26,660 --> 00:25:29,870
<font color="#E5E5E5">only thing here is now my publishers and</font>

606
00:25:28,340 --> 00:25:32,750
consumers<font color="#CCCCCC"> can read on everything</font>

607
00:25:29,870 --> 00:25:34,189
<font color="#CCCCCC">everything is open</font><font color="#E5E5E5"> open to the world so</font>

608
00:25:32,750 --> 00:25:36,530
now I want to go in and add some access

609
00:25:34,190 --> 00:25:38,690
control<font color="#CCCCCC"> lists</font><font color="#E5E5E5"> to do that</font><font color="#CCCCCC"> Kafka</font><font color="#E5E5E5"> ships</font>

610
00:25:36,530 --> 00:25:40,700
with a pluggable<font color="#E5E5E5"> authorizer the</font><font color="#CCCCCC"> Ackles</font>

611
00:25:38,690 --> 00:25:43,370
are stored in zookeeper typical

612
00:25:40,700 --> 00:25:46,070
operations<font color="#CCCCCC"> read/write create the</font>

613
00:25:43,370 --> 00:25:49,520
<font color="#E5E5E5">resources include the topic the cluster</font>

614
00:25:46,070 --> 00:25:51,800
and then<font color="#E5E5E5"> a consumer group and here's</font>

615
00:25:49,520 --> 00:25:53,330
some<font color="#E5E5E5"> examples of</font><font color="#CCCCCC"> those I'm gonna jump</font>

616
00:25:51,800 --> 00:25:55,010
through a little bit to do a

617
00:25:53,330 --> 00:25:56,659
configuration<font color="#E5E5E5"> you're gonna edit</font><font color="#CCCCCC"> your</font>

618
00:25:55,010 --> 00:25:59,240
server<font color="#CCCCCC"> properties you're</font><font color="#E5E5E5"> gonna add the</font>

619
00:25:56,660 --> 00:26:01,310
authorizer<font color="#CCCCCC"> add super users which is an</font>

620
00:25:59,240 --> 00:26:05,510
important step it's really easy with<font color="#E5E5E5"> zoo</font>

621
00:26:01,310 --> 00:26:07,669
P zookeeper<font color="#CCCCCC"> Akal management</font><font color="#E5E5E5"> - it doesn't</font>

622
00:26:05,510 --> 00:26:09,710
depend it's gonna overwrite so it's

623
00:26:07,670 --> 00:26:11,300
really<font color="#E5E5E5"> easy</font><font color="#CCCCCC"> to wipe out the the</font>

624
00:26:09,710 --> 00:26:13,160
authorization<font color="#E5E5E5"> that you've set</font><font color="#CCCCCC"> up and</font>

625
00:26:11,300 --> 00:26:15,230
then we're gonna add some<font color="#CCCCCC"> ackles and</font>

626
00:26:13,160 --> 00:26:16,190
edit the client properties so here I'm

627
00:26:15,230 --> 00:26:19,940
adding the authorizer

628
00:26:16,190 --> 00:26:22,310
I'm setting up a super user<font color="#E5E5E5"> and I'm</font>

629
00:26:19,940 --> 00:26:23,720
<font color="#E5E5E5">gonna go ahead</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> try to connect we see</font>

630
00:26:22,310 --> 00:26:25,580
here<font color="#E5E5E5"> that I was unable to connect</font>

631
00:26:23,720 --> 00:26:28,220
because<font color="#E5E5E5"> I have no allies access now</font><font color="#CCCCCC"> to</font>

632
00:26:25,580 --> 00:26:30,860
<font color="#CCCCCC">kafka secure so because</font><font color="#E5E5E5"> I've</font><font color="#CCCCCC"> setup</font>

633
00:26:28,220 --> 00:26:33,620
<font color="#E5E5E5">enable or I've added the user I'm</font>

634
00:26:30,860 --> 00:26:34,020
connecting with<font color="#CCCCCC"> the user</font><font color="#E5E5E5"> I get them and</font>

635
00:26:33,620 --> 00:26:37,500
<font color="#E5E5E5">I have</font>

636
00:26:34,020 --> 00:26:40,260
added any<font color="#CCCCCC"> Ackles</font><font color="#E5E5E5"> I'm not able to do</font>

637
00:26:37,500 --> 00:26:42,840
anything so same thing<font color="#E5E5E5"> on the client I'm</font>

638
00:26:40,260 --> 00:26:44,460
not able<font color="#CCCCCC"> to access the topic</font><font color="#E5E5E5"> so I'm</font>

639
00:26:42,840 --> 00:26:47,070
gonna go ahead<font color="#CCCCCC"> and I'm</font><font color="#E5E5E5"> going to first</font>

640
00:26:44,460 --> 00:26:49,470
<font color="#E5E5E5">create a user a</font><font color="#CCCCCC"> wildcard user there are</font>

641
00:26:47,070 --> 00:26:51,030
no groups in these<font color="#CCCCCC"> Ackles so you can</font>

642
00:26:49,470 --> 00:26:52,980
either<font color="#E5E5E5"> do wildcards or specific named</font>

643
00:26:51,030 --> 00:26:55,440
users and then<font color="#E5E5E5"> I'm</font><font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> set</font><font color="#CCCCCC"> that up to</font>

644
00:26:52,980 --> 00:26:59,310
<font color="#E5E5E5">be</font><font color="#CCCCCC"> able</font><font color="#E5E5E5"> to any user to be able</font><font color="#CCCCCC"> to read</font>

645
00:26:55,440 --> 00:27:04,590
<font color="#CCCCCC">from my</font><font color="#E5E5E5"> Kafka secure topic we see that</font>

646
00:26:59,310 --> 00:27:06,000
<font color="#E5E5E5">that takes and now I'm my consumer</font><font color="#CCCCCC"> it's</font>

647
00:27:04,590 --> 00:27:07,470
you can't tell here<font color="#CCCCCC"> but I've started my</font>

648
00:27:06,000 --> 00:27:09,330
consumer it's consuming<font color="#E5E5E5"> I don't get an</font>

649
00:27:07,470 --> 00:27:10,740
error<font color="#CCCCCC"> message</font><font color="#E5E5E5"> but my producer does get</font>

650
00:27:09,330 --> 00:27:12,840
an error<font color="#CCCCCC"> message that it can't access</font>

651
00:27:10,740 --> 00:27:15,210
the topic to<font color="#E5E5E5"> produce to it so now</font><font color="#CCCCCC"> I'm</font>

652
00:27:12,840 --> 00:27:17,280
gonna go<font color="#E5E5E5"> add for Kafka client my user</font>

653
00:27:15,210 --> 00:27:19,290
that<font color="#E5E5E5"> I set</font><font color="#CCCCCC"> up in my properties</font><font color="#E5E5E5"> I'm gonna</font>

654
00:27:17,280 --> 00:27:22,379
add the operation right<font color="#E5E5E5"> I'm gonna make</font>

655
00:27:19,290 --> 00:27:26,700
<font color="#CCCCCC">sure that</font><font color="#E5E5E5"> that takes and then now I I</font>

656
00:27:22,380 --> 00:27:29,930
can<font color="#E5E5E5"> see that I have</font><font color="#CCCCCC"> secure messages that</font>

657
00:27:26,700 --> 00:27:32,790
are authenticated<font color="#E5E5E5"> authorized</font>

658
00:27:29,930 --> 00:27:35,460
appropriately so some of<font color="#E5E5E5"> the lessons</font>

659
00:27:32,790 --> 00:27:38,399
<font color="#CCCCCC">that we learned</font><font color="#E5E5E5"> here again Kerberos is</font><font color="#CCCCCC"> a</font>

660
00:27:35,460 --> 00:27:40,110
pain I can't say it enough<font color="#CCCCCC"> Akal changes</font>

661
00:27:38,400 --> 00:27:42,320
<font color="#E5E5E5">I talked about those being overwritten</font>

662
00:27:40,110 --> 00:27:44,669
<font color="#CCCCCC">making</font><font color="#E5E5E5"> sure to set up a you super user</font>

663
00:27:42,320 --> 00:27:47,879
<font color="#CCCCCC">there's also if you do end up using</font>

664
00:27:44,670 --> 00:27:50,490
doing<font color="#E5E5E5"> a coal management using</font><font color="#CCCCCC"> sass a</font>

665
00:27:47,880 --> 00:27:54,390
plane or<font color="#CCCCCC"> sessile scram you would there</font>

666
00:27:50,490 --> 00:27:59,970
is a tool that<font color="#E5E5E5"> helps manage</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> the</font>

667
00:27:54,390 --> 00:28:02,700
those<font color="#CCCCCC"> ackles and has also appropriate</font>

668
00:27:59,970 --> 00:28:05,370
auditing<font color="#E5E5E5"> in place for that so that'll</font><font color="#CCCCCC"> be</font>

669
00:28:02,700 --> 00:28:07,410
useful<font color="#E5E5E5"> another thing to consider is that</font>

670
00:28:05,370 --> 00:28:08,939
Kafka is responsible for<font color="#CCCCCC"> the ackles</font><font color="#E5E5E5"> that</font>

671
00:28:07,410 --> 00:28:11,370
has some<font color="#E5E5E5"> metadata in there so you want</font>

672
00:28:08,940 --> 00:28:13,440
<font color="#E5E5E5">to separate out zookeeper and limit</font>

673
00:28:11,370 --> 00:28:15,419
<font color="#E5E5E5">access to it and then for encryption at</font>

674
00:28:13,440 --> 00:28:18,420
risk<font color="#CCCCCC"> really the best option is just</font><font color="#E5E5E5"> to</font>

675
00:28:15,420 --> 00:28:20,550
<font color="#CCCCCC">increase encrypt your</font><font color="#E5E5E5"> filesystem and</font>

676
00:28:18,420 --> 00:28:24,510
we're using if you're<font color="#E5E5E5"> doing it in AWS</font>

677
00:28:20,550 --> 00:28:27,000
you can use encrypted<font color="#E5E5E5"> EBS volumes or in</font>

678
00:28:24,510 --> 00:28:29,129
HDFS you can encrypt<font color="#CCCCCC"> there a couple of</font>

679
00:28:27,000 --> 00:28:32,280
resources<font color="#E5E5E5"> there's all the documentation</font>

680
00:28:29,130 --> 00:28:35,100
<font color="#E5E5E5">it's dry as you'd expect but really</font>

681
00:28:32,280 --> 00:28:36,660
thorough and helpful<font color="#CCCCCC"> and</font><font color="#E5E5E5"> if you're doing</font>

682
00:28:35,100 --> 00:28:39,120
an<font color="#CCCCCC"> ad above us there is a best practices</font>

683
00:28:36,660 --> 00:28:41,670
for<font color="#CCCCCC"> that there's also a couple</font><font color="#E5E5E5"> of things</font>

684
00:28:39,120 --> 00:28:44,590
<font color="#E5E5E5">that I recommend one is the the O'Reilly</font>

685
00:28:41,670 --> 00:28:48,730
<font color="#E5E5E5">Kafka book and then there's</font>

686
00:28:44,590 --> 00:28:50,559
there's a course by<font color="#CCCCCC"> Stefan</font><font color="#E5E5E5"> and GERD</font><font color="#CCCCCC"> I'm</font>

687
00:28:48,730 --> 00:28:53,380
not gonna attend their last names<font color="#CCCCCC"> but</font>

688
00:28:50,559 --> 00:28:56,260
this is a they have a Kafka<font color="#E5E5E5"> security</font>

689
00:28:53,380 --> 00:28:58,780
series it's<font color="#E5E5E5"> $15</font><font color="#CCCCCC"> super thorough helps you</font>

690
00:28:56,260 --> 00:29:00,908
go get through setting up a basic<font color="#CCCCCC"> set up</font>

691
00:28:58,780 --> 00:29:03,428
so I think I'm out of time<font color="#E5E5E5"> I don't have</font>

692
00:29:00,909 --> 00:29:04,929
any time for<font color="#E5E5E5"> any questions</font><font color="#CCCCCC"> right now</font><font color="#E5E5E5"> so</font>

693
00:29:03,429 --> 00:29:06,190
I<font color="#E5E5E5"> apologize but if you want to find me</font>

694
00:29:04,929 --> 00:29:08,950
I'm<font color="#E5E5E5"> happy to jump in and</font><font color="#CCCCCC"> answer any</font>

695
00:29:06,190 --> 00:29:11,020
<font color="#E5E5E5">specific questions that you have thanks</font>

696
00:29:08,950 --> 00:29:12,940
everybody<font color="#E5E5E5"> Thank You Tyler</font>

697
00:29:11,020 --> 00:29:15,879
there was one<font color="#E5E5E5"> question what is the</font>

698
00:29:12,940 --> 00:29:17,409
relationship with Kafka and<font color="#E5E5E5"> gdpr so</font>

699
00:29:15,880 --> 00:29:19,539
maybe<font color="#E5E5E5"> you know that's</font><font color="#CCCCCC"> something that you</font>

700
00:29:17,409 --> 00:29:21,580
can oh sure yeah so just<font color="#E5E5E5"> for gdpr</font>

701
00:29:19,539 --> 00:29:23,620
you need to keep track<font color="#CCCCCC"> of PII and you</font>

702
00:29:21,580 --> 00:29:25,750
need to ensure<font color="#CCCCCC"> that</font><font color="#E5E5E5"> it's that it's</font>

703
00:29:23,620 --> 00:29:28,289
secured so for us it's just<font color="#E5E5E5"> ensuring</font>

704
00:29:25,750 --> 00:29:31,000
that<font color="#CCCCCC"> our data</font><font color="#E5E5E5"> is encrypted</font><font color="#CCCCCC"> in</font><font color="#E5E5E5"> transport</font>

705
00:29:28,289 --> 00:29:32,260
on behalf of besides we thank you for

706
00:29:31,000 --> 00:29:35,100
<font color="#E5E5E5">your presentation thank you appreciate</font>

707
00:29:32,260 --> 00:29:35,100
it thank<font color="#E5E5E5"> you everybody</font>

