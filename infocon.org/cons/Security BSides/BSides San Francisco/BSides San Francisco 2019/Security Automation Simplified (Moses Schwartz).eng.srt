1
00:00:00,000 --> 00:00:04,520
good afternoon everyone apologies for

2
00:00:01,740 --> 00:00:07,080
<font color="#CCCCCC">the delay without further</font><font color="#E5E5E5"> ado let's</font>

3
00:00:04,520 --> 00:00:10,410
<font color="#E5E5E5">start with our Nets presentation by</font>

4
00:00:07,080 --> 00:00:18,300
<font color="#CCCCCC">Moss's Swartz</font><font color="#E5E5E5"> on security animations</font>

5
00:00:10,410 --> 00:00:21,350
simplify<font color="#E5E5E5"> hi everyone thank you for</font>

6
00:00:18,300 --> 00:00:23,189
<font color="#CCCCCC">coming it's audio</font><font color="#E5E5E5"> good everything that's</font>

7
00:00:21,350 --> 00:00:26,189
<font color="#CCCCCC">ok sorry about the delayed start</font>

8
00:00:23,189 --> 00:00:27,410
<font color="#CCCCCC">computers are hard I think most of you</font>

9
00:00:26,189 --> 00:00:31,619
know<font color="#CCCCCC"> that</font>

10
00:00:27,410 --> 00:00:33,899
so I'm Moses<font color="#CCCCCC"> I work at box as a security</font>

11
00:00:31,619 --> 00:00:35,850
automation engineer my whole job is

12
00:00:33,899 --> 00:00:37,110
building automations that make our cert

13
00:00:35,850 --> 00:00:41,430
run more efficiently

14
00:00:37,110 --> 00:00:43,320
<font color="#E5E5E5">and we're running our whole big like DIY</font>

15
00:00:41,430 --> 00:00:45,840
<font color="#E5E5E5">Python stack that</font><font color="#CCCCCC"> we built over the</font>

16
00:00:43,320 --> 00:00:47,460
<font color="#E5E5E5">years there are a lot of vendors out in</font>

17
00:00:45,840 --> 00:00:49,079
<font color="#E5E5E5">the space a lot of</font><font color="#CCCCCC"> them charging a lot</font>

18
00:00:47,460 --> 00:00:51,930
<font color="#E5E5E5">of money</font><font color="#CCCCCC"> one</font><font color="#E5E5E5"> of them getting bought for</font>

19
00:00:49,079 --> 00:00:54,480
<font color="#E5E5E5">five hundred</font><font color="#CCCCCC"> million</font><font color="#E5E5E5"> dollars but you</font>

20
00:00:51,930 --> 00:00:56,640
<font color="#E5E5E5">don't actually need to buy a big</font>

21
00:00:54,480 --> 00:00:58,769
<font color="#CCCCCC">platform to</font><font color="#E5E5E5"> get started in automation</font>

22
00:00:56,640 --> 00:01:01,140
<font color="#E5E5E5">and I'm hoping to kind</font><font color="#CCCCCC"> of give in an</font>

23
00:00:58,770 --> 00:01:03,210
overview of you know how you can start

24
00:01:01,140 --> 00:01:08,040
<font color="#E5E5E5">doing</font><font color="#CCCCCC"> this stuff in</font><font color="#E5E5E5"> Python pretty</font>

25
00:01:03,210 --> 00:01:10,470
quickly<font color="#E5E5E5"> so this is a really generic</font>

26
00:01:08,040 --> 00:01:12,119
<font color="#CCCCCC">high-level overview</font><font color="#E5E5E5"> of the</font>

27
00:01:10,470 --> 00:01:14,610
infrastructure<font color="#CCCCCC"> that you</font><font color="#E5E5E5"> usually see at</font>

28
00:01:12,119 --> 00:01:17,040
<font color="#E5E5E5">assert or you know sock any kind of</font>

29
00:01:14,610 --> 00:01:18,479
<font color="#E5E5E5">security monitor and it says set up you</font>

30
00:01:17,040 --> 00:01:20,909
<font color="#E5E5E5">have a whole bunch of logs that feed</font>

31
00:01:18,479 --> 00:01:23,009
into<font color="#CCCCCC"> a sim</font><font color="#E5E5E5"> which in my</font><font color="#CCCCCC"> mind is</font><font color="#E5E5E5"> basically</font>

32
00:01:20,909 --> 00:01:25,170
<font color="#CCCCCC">equivalent to a database that can also</font>

33
00:01:23,009 --> 00:01:27,060
send alerts somewhere those alerts

34
00:01:25,170 --> 00:01:29,759
usually end up<font color="#E5E5E5"> in a ticketing system and</font>

35
00:01:27,060 --> 00:01:31,950
then Freddie Mercury there goes and

36
00:01:29,759 --> 00:01:33,329
looks at<font color="#E5E5E5"> that alert looks</font><font color="#CCCCCC"> at the user</font>

37
00:01:31,950 --> 00:01:35,670
<font color="#CCCCCC">name in</font><font color="#E5E5E5"> Active Directory it looks up</font>

38
00:01:33,329 --> 00:01:37,589
hashes and virus total looks up their

39
00:01:35,670 --> 00:01:40,740
<font color="#E5E5E5">playbook documentation maybe it's some</font>

40
00:01:37,590 --> 00:01:42,780
confluence or something and really<font color="#CCCCCC"> just</font>

41
00:01:40,740 --> 00:01:47,669
does all<font color="#E5E5E5"> these manual steps that could</font>

42
00:01:42,780 --> 00:01:49,829
<font color="#E5E5E5">be</font><font color="#CCCCCC"> automated so if we actually</font><font color="#E5E5E5"> want to</font>

43
00:01:47,670 --> 00:01:53,130
go<font color="#E5E5E5"> and start automating this there are a</font>

44
00:01:49,829 --> 00:01:54,869
couple ways<font color="#CCCCCC"> we</font><font color="#E5E5E5"> can go</font><font color="#CCCCCC"> you can look at us</font>

45
00:01:53,130 --> 00:01:57,689
one of<font color="#CCCCCC"> these centralized solutions you</font>

46
00:01:54,869 --> 00:01:59,520
<font color="#E5E5E5">can go by a big platform or you</font><font color="#CCCCCC"> know to</font>

47
00:01:57,689 --> 00:02:01,710
start<font color="#CCCCCC"> building something giant</font><font color="#E5E5E5"> that</font>

48
00:01:59,520 --> 00:02:03,990
takes care<font color="#CCCCCC"> of</font><font color="#E5E5E5"> everything</font><font color="#CCCCCC"> or you could</font>

49
00:02:01,710 --> 00:02:05,969
start building<font color="#CCCCCC"> out like just</font><font color="#E5E5E5"> little</font>

50
00:02:03,990 --> 00:02:07,890
pieces<font color="#E5E5E5"> of automation you know I call</font>

51
00:02:05,969 --> 00:02:09,269
this distributed<font color="#E5E5E5"> like just a couple</font>

52
00:02:07,890 --> 00:02:11,220
tools that work together where<font color="#E5E5E5"> you can</font>

53
00:02:09,270 --> 00:02:13,290
point to<font color="#CCCCCC"> a web hook at the</font><font color="#E5E5E5"> other and get</font>

54
00:02:11,220 --> 00:02:14,700
one little<font color="#E5E5E5"> task automated that's a</font>

55
00:02:13,290 --> 00:02:16,739
fine place<font color="#CCCCCC"> to start it doesn't really</font>

56
00:02:14,700 --> 00:02:20,069
scale<font color="#CCCCCC"> up to</font><font color="#E5E5E5"> build more advanced</font>

57
00:02:16,739 --> 00:02:23,760
workflows but it's there's nothing<font color="#E5E5E5"> wrong</font>

58
00:02:20,069 --> 00:02:28,530
<font color="#CCCCCC">with starting</font><font color="#E5E5E5"> small now building an</font>

59
00:02:23,760 --> 00:02:29,489
automation<font color="#E5E5E5"> orchestration platform that</font>

60
00:02:28,530 --> 00:02:32,549
<font color="#E5E5E5">works for everyone</font>

61
00:02:29,489 --> 00:02:35,220
and every use case<font color="#E5E5E5"> is really hard which</font>

62
00:02:32,549 --> 00:02:38,010
is<font color="#E5E5E5"> why there are these big vendors that</font>

63
00:02:35,220 --> 00:02:40,650
<font color="#E5E5E5">are getting acquired but building one</font>

64
00:02:38,010 --> 00:02:42,659
for your own environment is a much<font color="#E5E5E5"> more</font>

65
00:02:40,650 --> 00:02:45,090
tractable problem<font color="#CCCCCC"> you'll</font><font color="#E5E5E5"> only have</font><font color="#CCCCCC"> a few</font>

66
00:02:42,659 --> 00:02:46,769
tools<font color="#E5E5E5"> that you need to tie together you</font>

67
00:02:45,090 --> 00:02:48,599
only have a few use cases<font color="#E5E5E5"> and you</font>

68
00:02:46,769 --> 00:02:49,560
already<font color="#E5E5E5"> know your exact workflow</font><font color="#CCCCCC"> so you</font>

69
00:02:48,599 --> 00:02:51,000
don't<font color="#E5E5E5"> need to build</font><font color="#CCCCCC"> that generic</font>

70
00:02:49,560 --> 00:02:54,959
workflow engine<font color="#CCCCCC"> you don't</font><font color="#E5E5E5"> need to</font>

71
00:02:51,000 --> 00:02:56,760
implement<font color="#E5E5E5"> you know that one workflow so</font>

72
00:02:54,959 --> 00:02:58,889
I'm<font color="#E5E5E5"> gonna walk through an</font><font color="#CCCCCC"> example kind</font>

73
00:02:56,760 --> 00:03:00,418
<font color="#E5E5E5">of end to</font><font color="#CCCCCC"> end</font><font color="#E5E5E5"> using the tools that I'm</font>

74
00:02:58,889 --> 00:03:04,400
most familiar<font color="#E5E5E5"> with it's gonna be</font><font color="#CCCCCC"> Splunk</font>

75
00:03:00,419 --> 00:03:07,680
<font color="#E5E5E5">JIRA and Python to build a basic</font>

76
00:03:04,400 --> 00:03:09,209
security automation system so we're

77
00:03:07,680 --> 00:03:11,669
gonna start<font color="#E5E5E5"> by</font><font color="#CCCCCC"> just going into Splunk</font>

78
00:03:09,209 --> 00:03:13,470
and developing<font color="#E5E5E5"> an alert you do that just</font>

79
00:03:11,669 --> 00:03:15,659
by going<font color="#CCCCCC"> and searching developing a</font>

80
00:03:13,470 --> 00:03:18,000
query to<font color="#E5E5E5"> find the logs that you want to</font>

81
00:03:15,659 --> 00:03:20,728
alert on this<font color="#E5E5E5"> is the first step</font>

82
00:03:18,000 --> 00:03:23,010
this query found some faked<font color="#E5E5E5"> up data that</font>

83
00:03:20,729 --> 00:03:25,229
I dropped in<font color="#CCCCCC"> there</font><font color="#E5E5E5"> we've got</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> host name</font>

84
00:03:23,010 --> 00:03:28,769
md5<font color="#CCCCCC"> username things that we're gonna</font>

85
00:03:25,229 --> 00:03:31,379
<font color="#CCCCCC">want later</font><font color="#E5E5E5"> on then we're gonna go into</font>

86
00:03:28,769 --> 00:03:32,819
the create alert page and we're<font color="#CCCCCC"> just</font>

87
00:03:31,379 --> 00:03:36,328
going<font color="#CCCCCC"> to take that same</font><font color="#E5E5E5"> query drop that</font>

88
00:03:32,819 --> 00:03:38,458
in there<font color="#CCCCCC"> put it into its own app that's</font>

89
00:03:36,329 --> 00:03:40,409
a<font color="#CCCCCC"> Splunk</font><font color="#E5E5E5"> best practice and it makes a</font>

90
00:03:38,459 --> 00:03:41,519
<font color="#E5E5E5">lot of things</font><font color="#CCCCCC"> a lot easier and then</font>

91
00:03:40,409 --> 00:03:44,459
we're going<font color="#CCCCCC"> to set it to run on a</font>

92
00:03:41,519 --> 00:03:46,949
scheduled basis<font color="#CCCCCC"> I like to</font><font color="#E5E5E5"> specify this</font>

93
00:03:44,459 --> 00:03:49,530
<font color="#CCCCCC">in the cron syntax but they have little</font>

94
00:03:46,949 --> 00:03:52,169
<font color="#E5E5E5">dropdowns to help you choose and specify</font>

95
00:03:49,530 --> 00:03:58,919
a time range this<font color="#CCCCCC"> is how you know</font><font color="#E5E5E5"> long</font>

96
00:03:52,169 --> 00:03:59,939
back your query is gonna look it

97
00:03:58,919 --> 00:04:01,290
wouldn't<font color="#E5E5E5"> make</font><font color="#CCCCCC"> any sense</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> have</font>

98
00:03:59,939 --> 00:04:02,638
something<font color="#CCCCCC"> that</font><font color="#E5E5E5"> runs every 10 minutes</font><font color="#CCCCCC"> so</font>

99
00:04:01,290 --> 00:04:04,290
<font color="#E5E5E5">it's at a 10 minute time range because</font>

100
00:04:02,639 --> 00:04:07,590
then you<font color="#CCCCCC"> have gaps and</font><font color="#E5E5E5"> you don't want to</font>

101
00:04:04,290 --> 00:04:10,970
double alert either we're<font color="#E5E5E5"> gonna scroll</font>

102
00:04:07,590 --> 00:04:12,900
down<font color="#E5E5E5"> and we're gonna say when to trigger</font>

103
00:04:10,970 --> 00:04:15,060
<font color="#CCCCCC">we're gonna said to trigger for each</font>

104
00:04:12,900 --> 00:04:16,918
<font color="#E5E5E5">result because</font><font color="#CCCCCC"> Splunk only puts the</font>

105
00:04:15,060 --> 00:04:19,079
result<font color="#CCCCCC"> from the</font><font color="#E5E5E5"> first entry in the</font>

106
00:04:16,918 --> 00:04:21,870
<font color="#E5E5E5">actual</font><font color="#CCCCCC"> webhook payload</font><font color="#E5E5E5"> and then we're</font>

107
00:04:19,079 --> 00:04:24,389
<font color="#CCCCCC">gonna</font><font color="#E5E5E5"> specify a webhook trigger action</font>

108
00:04:21,870 --> 00:04:27,040
and we're gonna put in<font color="#CCCCCC"> here an IP</font>

109
00:04:24,389 --> 00:04:28,870
address<font color="#E5E5E5"> and this you</font><font color="#CCCCCC"> know slide</font><font color="#E5E5E5"> swung</font>

110
00:04:27,040 --> 00:04:30,610
underscore webhook which is a server

111
00:04:28,870 --> 00:04:33,090
<font color="#CCCCCC">that we're</font><font color="#E5E5E5"> gonna go and write on the</font>

112
00:04:30,610 --> 00:04:33,090
<font color="#CCCCCC">next slide</font>

113
00:04:33,120 --> 00:04:40,810
so here's version 0.1 of<font color="#E5E5E5"> automation</font>

114
00:04:37,870 --> 00:04:42,340
server<font color="#CCCCCC"> PI</font><font color="#E5E5E5"> we're gonna use flask</font><font color="#CCCCCC"> which I</font>

115
00:04:40,810 --> 00:04:44,740
really like it's a really lightweight

116
00:04:42,340 --> 00:04:47,049
<font color="#E5E5E5">Python micro framework for and it's</font>

117
00:04:44,740 --> 00:04:48,520
<font color="#E5E5E5">commonly</font><font color="#CCCCCC"> used for developing api's</font><font color="#E5E5E5"> there</font>

118
00:04:47,050 --> 00:04:51,220
are also a lot<font color="#CCCCCC"> of projects that</font><font color="#E5E5E5"> make it</font>

119
00:04:48,520 --> 00:04:54,039
easier<font color="#CCCCCC"> to build a POS on top of flask</font>

120
00:04:51,220 --> 00:04:56,710
I might go more<font color="#E5E5E5"> in depth on those in a</font>

121
00:04:54,040 --> 00:04:58,750
<font color="#E5E5E5">later presentation so we're gonna start</font>

122
00:04:56,710 --> 00:05:02,109
<font color="#E5E5E5">by writing basically our hello world</font>

123
00:04:58,750 --> 00:05:04,300
endpoint or a status endpoint<font color="#E5E5E5"> these are</font>

124
00:05:02,110 --> 00:05:05,830
super<font color="#CCCCCC"> useful because you can</font><font color="#E5E5E5"> check to</font>

125
00:05:04,300 --> 00:05:07,930
<font color="#E5E5E5">make</font><font color="#CCCCCC"> sure your app is actually up after</font>

126
00:05:05,830 --> 00:05:10,060
pushing<font color="#E5E5E5"> an update</font><font color="#CCCCCC"> makes it easy to</font><font color="#E5E5E5"> put a</font>

127
00:05:07,930 --> 00:05:12,790
to integrate into<font color="#CCCCCC"> a status monitoring</font>

128
00:05:10,060 --> 00:05:17,290
system<font color="#CCCCCC"> and then we're gonna write our</font>

129
00:05:12,790 --> 00:05:19,720
spunk<font color="#E5E5E5"> webhook function so this</font><font color="#CCCCCC"> @ app dot</font>

130
00:05:17,290 --> 00:05:22,450
<font color="#CCCCCC">route</font><font color="#E5E5E5"> syntax is one of the weird things</font>

131
00:05:19,720 --> 00:05:24,790
<font color="#E5E5E5">about flask but it's just the way you do</font>

132
00:05:22,450 --> 00:05:27,520
it<font color="#E5E5E5"> we're telling it slash</font><font color="#CCCCCC"> Splunk webhook</font>

133
00:05:24,790 --> 00:05:29,980
it's gonna go and<font color="#E5E5E5"> listen</font><font color="#CCCCCC"> at that</font><font color="#E5E5E5"> URL</font>

134
00:05:27,520 --> 00:05:31,750
basically<font color="#E5E5E5"> and when it</font><font color="#CCCCCC"> gets called</font><font color="#E5E5E5"> it's</font>

135
00:05:29,980 --> 00:05:34,560
gonna go call our function<font color="#CCCCCC"> and</font><font color="#E5E5E5"> it's</font>

136
00:05:31,750 --> 00:05:36,760
gonna provide this<font color="#E5E5E5"> request object so</font>

137
00:05:34,560 --> 00:05:38,740
this is<font color="#E5E5E5"> really just gonna be a few lines</font>

138
00:05:36,760 --> 00:05:41,469
<font color="#CCCCCC">we're gonna go grab that</font><font color="#E5E5E5"> request object</font>

139
00:05:38,740 --> 00:05:43,480
to pull the<font color="#E5E5E5"> JSON out of it and then it's</font>

140
00:05:41,470 --> 00:05:45,220
kind of an insight into my<font color="#CCCCCC"> development</font>

141
00:05:43,480 --> 00:05:47,350
process not what we're gonna get at as

142
00:05:45,220 --> 00:05:49,510
the end result<font color="#E5E5E5"> we're going</font><font color="#CCCCCC"> to dump that</font>

143
00:05:47,350 --> 00:05:51,040
into<font color="#E5E5E5"> a file just so that we can open it</font>

144
00:05:49,510 --> 00:05:52,810
<font color="#E5E5E5">up we can read it in a Python</font>

145
00:05:51,040 --> 00:05:54,310
<font color="#E5E5E5">interactive terminal we can figure out</font>

146
00:05:52,810 --> 00:05:56,050
what data we need<font color="#CCCCCC"> to get out</font><font color="#E5E5E5"> of there</font>

147
00:05:54,310 --> 00:06:02,470
<font color="#E5E5E5">and then we can write</font><font color="#CCCCCC"> it in our</font><font color="#E5E5E5"> next</font>

148
00:05:56,050 --> 00:06:05,980
<font color="#CCCCCC">step so we're gonna go</font><font color="#E5E5E5"> into our</font>

149
00:06:02,470 --> 00:06:08,020
automation<font color="#E5E5E5"> server here and I literally</font>

150
00:06:05,980 --> 00:06:10,750
<font color="#E5E5E5">just bun up a droplet in</font><font color="#CCCCCC"> digitalocean</font>

151
00:06:08,020 --> 00:06:13,240
<font color="#CCCCCC">SSH tin it doesn't</font><font color="#E5E5E5"> necessarily have</font><font color="#CCCCCC"> to</font>

152
00:06:10,750 --> 00:06:16,300
<font color="#E5E5E5">be</font><font color="#CCCCCC"> a lot of setup</font><font color="#E5E5E5"> and I run Python</font>

153
00:06:13,240 --> 00:06:19,450
<font color="#E5E5E5">automation server dot pi and is</font><font color="#CCCCCC"> that'll</font>

154
00:06:16,300 --> 00:06:21,640
start<font color="#E5E5E5"> up the</font><font color="#CCCCCC"> built-in flask</font><font color="#E5E5E5"> development</font>

155
00:06:19,450 --> 00:06:22,990
server<font color="#CCCCCC"> you</font><font color="#E5E5E5"> don't run around want to run</font>

156
00:06:21,640 --> 00:06:24,580
<font color="#E5E5E5">that</font><font color="#CCCCCC"> in production and you definitely</font>

157
00:06:22,990 --> 00:06:27,130
<font color="#CCCCCC">want to have the debugging features</font>

158
00:06:24,580 --> 00:06:28,990
turned<font color="#E5E5E5"> off because they are awesome what</font>

159
00:06:27,130 --> 00:06:32,710
they allow remote code execution by

160
00:06:28,990 --> 00:06:35,470
design so this server is now just<font color="#CCCCCC"> gonna</font>

161
00:06:32,710 --> 00:06:39,430
<font color="#E5E5E5">sit</font><font color="#CCCCCC"> there waiting until we call it</font><font color="#E5E5E5"> we</font>

162
00:06:35,470 --> 00:06:40,389
could go a curl that status endpoint for

163
00:06:39,430 --> 00:06:42,039
starters to make sure<font color="#E5E5E5"> it's</font>

164
00:06:40,389 --> 00:06:44,889
but then we're just<font color="#E5E5E5"> gonna wait until</font>

165
00:06:42,039 --> 00:06:46,659
<font color="#CCCCCC">Splunk</font><font color="#E5E5E5"> fires that webhook it'll print</font>

166
00:06:44,889 --> 00:06:48,639
out the log<font color="#E5E5E5"> showing that it we received</font>

167
00:06:46,659 --> 00:06:50,409
that<font color="#E5E5E5"> and I'm just gonna control see out</font>

168
00:06:48,639 --> 00:06:52,860
of<font color="#CCCCCC"> it and print out the</font><font color="#E5E5E5"> first few lines</font>

169
00:06:50,409 --> 00:06:54,969
of<font color="#E5E5E5"> that JSON file and that is what the</font>

170
00:06:52,860 --> 00:07:01,629
<font color="#E5E5E5">JSON coming out of</font><font color="#CCCCCC"> Splunk in that</font>

171
00:06:54,969 --> 00:07:03,610
<font color="#CCCCCC">webhook looks like so that's</font><font color="#E5E5E5"> pretty cool</font>

172
00:07:01,629 --> 00:07:06,039
we<font color="#E5E5E5"> got the first step working I'm gonna</font>

173
00:07:03,610 --> 00:07:08,199
briefly<font color="#E5E5E5"> kind</font><font color="#CCCCCC"> of pivot into secret</font>

174
00:07:06,039 --> 00:07:12,219
management<font color="#E5E5E5"> this is a problem</font><font color="#CCCCCC"> that</font>

175
00:07:08,199 --> 00:07:14,560
balloons<font color="#E5E5E5"> to be unbelievably complex but</font>

176
00:07:12,219 --> 00:07:16,719
<font color="#E5E5E5">for the simple example what we're gonna</font>

177
00:07:14,560 --> 00:07:18,940
do is<font color="#CCCCCC"> just keep a separate Python file</font>

178
00:07:16,719 --> 00:07:20,560
<font color="#CCCCCC">call you in settings PI and we're gonna</font>

179
00:07:18,940 --> 00:07:22,449
put our<font color="#E5E5E5"> user names and passwords in</font>

180
00:07:20,560 --> 00:07:24,370
there you can actually use this<font color="#E5E5E5"> approach</font>

181
00:07:22,449 --> 00:07:25,740
in production and<font color="#E5E5E5"> just push this file to</font>

182
00:07:24,370 --> 00:07:28,569
your<font color="#CCCCCC"> server manually or with</font>

183
00:07:25,740 --> 00:07:30,039
configuration management<font color="#E5E5E5"> bonus points if</font>

184
00:07:28,569 --> 00:07:32,349
<font color="#E5E5E5">your configuration management has built</font>

185
00:07:30,039 --> 00:07:34,628
in secret management then you know it

186
00:07:32,349 --> 00:07:36,639
all<font color="#CCCCCC"> just works out kind</font><font color="#E5E5E5"> of perfectly so</font>

187
00:07:34,629 --> 00:07:37,990
in the code examples later on<font color="#E5E5E5"> they're</font>

188
00:07:36,639 --> 00:07:39,789
<font color="#E5E5E5">gonna be references to settings not</font>

189
00:07:37,990 --> 00:07:41,050
<font color="#CCCCCC">username things like that I'm not</font><font color="#E5E5E5"> gonna</font>

190
00:07:39,789 --> 00:07:46,690
<font color="#E5E5E5">come back here but that's where it's</font>

191
00:07:41,050 --> 00:07:48,219
getting<font color="#E5E5E5"> into</font><font color="#CCCCCC"> those values from so we're</font>

192
00:07:46,690 --> 00:07:50,740
<font color="#E5E5E5">gonna go back</font><font color="#CCCCCC"> to this automation</font><font color="#E5E5E5"> server</font>

193
00:07:48,219 --> 00:07:52,810
dot<font color="#CCCCCC"> pi and now that we've</font><font color="#E5E5E5"> got that</font>

194
00:07:50,740 --> 00:07:54,819
<font color="#CCCCCC">webhook and we know how to</font><font color="#E5E5E5"> parse it</font>

195
00:07:52,810 --> 00:08:00,460
let's just<font color="#CCCCCC"> go and create</font><font color="#E5E5E5"> a ticket in</font>

196
00:07:54,819 --> 00:08:02,620
JIRA so to do this<font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> gonna write a new</font>

197
00:08:00,460 --> 00:08:04,719
function create JIRA issue and it's

198
00:08:02,620 --> 00:08:06,099
really<font color="#E5E5E5"> just two lines just broken up</font>

199
00:08:04,719 --> 00:08:11,710
because<font color="#E5E5E5"> they'd be really long lines to</font>

200
00:08:06,099 --> 00:08:13,990
<font color="#CCCCCC">use the</font><font color="#E5E5E5"> Atlassian JIRA SDK that</font><font color="#CCCCCC"> they</font>

201
00:08:11,710 --> 00:08:15,460
provide<font color="#E5E5E5"> for Python we connect with our</font>

202
00:08:13,990 --> 00:08:17,259
<font color="#CCCCCC">username and password and then we just</font>

203
00:08:15,460 --> 00:08:20,888
say create issue and we provide the<font color="#E5E5E5"> data</font>

204
00:08:17,259 --> 00:08:23,020
we're gonna drop the full alert body

205
00:08:20,889 --> 00:08:26,020
into the description<font color="#E5E5E5"> field</font><font color="#CCCCCC"> and we're</font>

206
00:08:23,020 --> 00:08:26,469
gonna name the spunk alert<font color="#E5E5E5"> : name of the</font>

207
00:08:26,020 --> 00:08:29,589
alert

208
00:08:26,469 --> 00:08:31,719
now right here<font color="#E5E5E5"> we could go and start</font>

209
00:08:29,589 --> 00:08:32,529
setting fields or assign this ticket or

210
00:08:31,719 --> 00:08:34,899
things like<font color="#CCCCCC"> that</font>

211
00:08:32,529 --> 00:08:36,399
<font color="#E5E5E5">so it's kind</font><font color="#CCCCCC"> of already</font><font color="#E5E5E5"> a step</font><font color="#CCCCCC"> ahead</font><font color="#E5E5E5"> of</font>

212
00:08:34,899 --> 00:08:38,708
just<font color="#E5E5E5"> having them send an email and</font>

213
00:08:36,399 --> 00:08:40,419
<font color="#CCCCCC">create a ticket or using their provided</font>

214
00:08:38,708 --> 00:08:44,018
<font color="#E5E5E5">add-on but we're not gonna add a whole</font>

215
00:08:40,419 --> 00:08:45,850
<font color="#CCCCCC">lot</font><font color="#E5E5E5"> to this</font><font color="#CCCCCC"> function</font><font color="#E5E5E5"> we're gonna instead</font>

216
00:08:44,019 --> 00:08:48,520
do that in a couple<font color="#E5E5E5"> steps with JIRA</font><font color="#CCCCCC"> web</font>

217
00:08:45,850 --> 00:08:51,459
<font color="#CCCCCC">hooks so this is what we get the next</font>

218
00:08:48,520 --> 00:08:53,350
<font color="#E5E5E5">time that</font><font color="#CCCCCC"> Splunk Save</font><font color="#E5E5E5"> Search runs it</font>

219
00:08:51,459 --> 00:08:53,829
will hit our<font color="#E5E5E5"> webserver web server we'll</font>

220
00:08:53,350 --> 00:08:57,300
reach out to

221
00:08:53,830 --> 00:08:59,470
<font color="#E5E5E5">gerrae and bam we</font><font color="#CCCCCC"> have</font><font color="#E5E5E5"> an issue created</font>

222
00:08:57,300 --> 00:09:01,089
<font color="#CCCCCC">the first time</font><font color="#E5E5E5"> you see this is always</font>

223
00:08:59,470 --> 00:09:03,190
<font color="#CCCCCC">kind of magic to me like I wrote</font>

224
00:09:01,090 --> 00:09:04,360
<font color="#E5E5E5">something</font><font color="#CCCCCC"> that actually</font><font color="#E5E5E5"> worked so that</font>

225
00:09:03,190 --> 00:09:06,310
<font color="#E5E5E5">it's pretty cool</font>

226
00:09:04,360 --> 00:09:08,860
look there's JSON in that description

227
00:09:06,310 --> 00:09:12,670
<font color="#CCCCCC">it's not super useful but we can do</font>

228
00:09:08,860 --> 00:09:17,130
<font color="#E5E5E5">something about that so we're gonna go</font>

229
00:09:12,670 --> 00:09:20,260
<font color="#CCCCCC">into the JIRA</font><font color="#E5E5E5"> web</font><font color="#CCCCCC"> hooks set settings and</font>

230
00:09:17,130 --> 00:09:22,540
create a web hook<font color="#E5E5E5"> we're gonna give it a</font>

231
00:09:20,260 --> 00:09:24,910
URL<font color="#E5E5E5"> that's pointing back</font><font color="#CCCCCC"> at our server</font>

232
00:09:22,540 --> 00:09:27,640
<font color="#CCCCCC">and I just made up</font><font color="#E5E5E5"> a name JIRA</font><font color="#CCCCCC"> Marx can</font>

233
00:09:24,910 --> 00:09:29,709
create a web<font color="#CCCCCC"> hook and you can give</font><font color="#E5E5E5"> it a</font>

234
00:09:27,640 --> 00:09:32,199
filter<font color="#CCCCCC"> to say only</font><font color="#E5E5E5"> fire on these tickets</font>

235
00:09:29,710 --> 00:09:34,660
and if you scroll down<font color="#E5E5E5"> further you can</font>

236
00:09:32,200 --> 00:09:37,960
trigger these web hooks on all kinds of

237
00:09:34,660 --> 00:09:41,290
ticket events like transitions<font color="#E5E5E5"> closed</font>

238
00:09:37,960 --> 00:09:43,300
opened<font color="#CCCCCC"> assigned</font><font color="#E5E5E5"> but for now we're just</font>

239
00:09:41,290 --> 00:09:46,110
gonna<font color="#CCCCCC"> only</font><font color="#E5E5E5"> look at tickets being created</font>

240
00:09:43,300 --> 00:09:47,829
just<font color="#CCCCCC"> cuz that</font><font color="#E5E5E5"> makes the problem</font><font color="#CCCCCC"> easier</font>

241
00:09:46,110 --> 00:09:52,900
<font color="#E5E5E5">so we're gonna go back to that</font>

242
00:09:47,830 --> 00:09:55,480
automation<font color="#E5E5E5"> server</font><font color="#CCCCCC"> pie oh I forgot</font><font color="#E5E5E5"> to</font>

243
00:09:52,900 --> 00:10:00,069
<font color="#CCCCCC">mention if anyone can't read this</font><font color="#E5E5E5"> the</font>

244
00:09:55,480 --> 00:10:01,600
slides are uploaded to<font color="#CCCCCC"> sked</font><font color="#E5E5E5"> so you can</font>

245
00:10:00,070 --> 00:10:05,680
pull<font color="#CCCCCC"> that up</font><font color="#E5E5E5"> and follow along if you</font>

246
00:10:01,600 --> 00:10:07,330
<font color="#E5E5E5">need to so this</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> kind of the biggest</font>

247
00:10:05,680 --> 00:10:11,709
chunk of new code<font color="#CCCCCC"> that we're adding</font>

248
00:10:07,330 --> 00:10:13,510
<font color="#E5E5E5">we've got a JIRA comment function which</font>

249
00:10:11,710 --> 00:10:17,110
is<font color="#E5E5E5"> really similar to that pre at issue</font>

250
00:10:13,510 --> 00:10:18,460
one it's<font color="#E5E5E5"> just going to connect pull that</font>

251
00:10:17,110 --> 00:10:23,680
issue out<font color="#CCCCCC"> of JIRA and</font><font color="#E5E5E5"> then add our</font>

252
00:10:18,460 --> 00:10:25,120
comment then we've got<font color="#CCCCCC"> another one</font><font color="#E5E5E5"> which</font>

253
00:10:23,680 --> 00:10:29,079
<font color="#CCCCCC">is going</font><font color="#E5E5E5"> to receive that</font><font color="#CCCCCC"> webhook</font><font color="#E5E5E5"> from</font>

254
00:10:25,120 --> 00:10:30,430
JIRA this one has a bit of ugly JSON

255
00:10:29,080 --> 00:10:33,730
probably<font color="#CCCCCC"> gonna clean that up</font>

256
00:10:30,430 --> 00:10:35,770
but honestly<font color="#CCCCCC"> like ugly JSON parsing is</font>

257
00:10:33,730 --> 00:10:39,630
half of my<font color="#CCCCCC"> job doing security automation</font>

258
00:10:35,770 --> 00:10:42,340
engineering so we're gonna pull<font color="#CCCCCC"> that</font>

259
00:10:39,630 --> 00:10:45,189
description<font color="#E5E5E5"> out of the JSON and then</font>

260
00:10:42,340 --> 00:10:47,080
<font color="#CCCCCC">we're gonna actually</font><font color="#E5E5E5"> load the JSON that</font>

261
00:10:45,190 --> 00:10:49,840
was in the description which was the

262
00:10:47,080 --> 00:10:51,430
original spunk alert and then we're

263
00:10:49,840 --> 00:10:55,390
gonna pull<font color="#E5E5E5"> out a username and</font><font color="#CCCCCC"> I'm d-5</font>

264
00:10:51,430 --> 00:10:57,430
<font color="#E5E5E5">and just post those</font><font color="#CCCCCC"> to the ticket so now</font>

265
00:10:55,390 --> 00:10:59,620
suddenly we have<font color="#CCCCCC"> a couple</font><font color="#E5E5E5"> fields being</font>

266
00:10:57,430 --> 00:11:01,030
extracted<font color="#E5E5E5"> and posted</font><font color="#CCCCCC"> to our ticket</font><font color="#E5E5E5"> we</font>

267
00:10:59,620 --> 00:11:04,870
<font color="#E5E5E5">already had those in the ticket so this</font>

268
00:11:01,030 --> 00:11:07,220
isn't super useful<font color="#E5E5E5"> but we can go and</font>

269
00:11:04,870 --> 00:11:11,810
make<font color="#CCCCCC"> it a little</font><font color="#E5E5E5"> bit cooler</font>

270
00:11:07,220 --> 00:11:13,010
so this is<font color="#CCCCCC"> a</font><font color="#E5E5E5"> tea</font><font color="#CCCCCC"> lookup pie it's just a</font>

271
00:11:11,810 --> 00:11:16,280
little<font color="#E5E5E5"> bit of code to</font><font color="#CCCCCC"> do an</font><font color="#E5E5E5"> active</font>

272
00:11:13,010 --> 00:11:18,530
<font color="#E5E5E5">directory like that</font><font color="#CCCCCC"> I won't go into</font>

273
00:11:16,280 --> 00:11:21,589
<font color="#CCCCCC">details in</font><font color="#E5E5E5"> the code here</font><font color="#CCCCCC"> except to say</font>

274
00:11:18,530 --> 00:11:23,660
that<font color="#E5E5E5"> LDAP 3 is so much better than</font>

275
00:11:21,590 --> 00:11:28,610
Python LDAP if you ever want to talk to

276
00:11:23,660 --> 00:11:29,930
LDAP or Active Directory so basically

277
00:11:28,610 --> 00:11:32,330
we're just<font color="#E5E5E5"> going</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> connect to</font><font color="#CCCCCC"> our ad</font>

278
00:11:29,930 --> 00:11:33,979
server<font color="#E5E5E5"> sending that username</font><font color="#CCCCCC"> and it</font>

279
00:11:32,330 --> 00:11:37,130
<font color="#E5E5E5">returns a JSON object like we see on</font><font color="#CCCCCC"> the</font>

280
00:11:33,980 --> 00:11:39,530
<font color="#E5E5E5">left we're gonna go back to our</font>

281
00:11:37,130 --> 00:11:41,390
automation<font color="#E5E5E5"> server code and just add a</font>

282
00:11:39,530 --> 00:11:45,380
function<font color="#E5E5E5"> that's going to call that</font>

283
00:11:41,390 --> 00:11:47,960
<font color="#E5E5E5">module we just wrote and that module was</font>

284
00:11:45,380 --> 00:11:49,280
not tied in any<font color="#E5E5E5"> way to flask</font><font color="#CCCCCC"> or to the</font>

285
00:11:47,960 --> 00:11:52,040
rest of the application<font color="#CCCCCC"> we could pull</font>

286
00:11:49,280 --> 00:11:54,079
that<font color="#E5E5E5"> into other modules when in this</font>

287
00:11:52,040 --> 00:11:55,540
<font color="#E5E5E5">case we're just</font><font color="#CCCCCC"> going to do a lookup</font><font color="#E5E5E5"> and</font>

288
00:11:54,080 --> 00:11:58,100
then we're<font color="#CCCCCC"> going to do a little</font><font color="#E5E5E5"> bit</font><font color="#CCCCCC"> of</font>

289
00:11:55,540 --> 00:12:00,230
string formatting to build what we want

290
00:11:58,100 --> 00:12:03,530
those comment to look like and then up

291
00:12:00,230 --> 00:12:05,080
in our<font color="#E5E5E5"> mark</font><font color="#CCCCCC"> skin created function</font><font color="#E5E5E5"> we're</font>

292
00:12:03,530 --> 00:12:09,110
just gonna add<font color="#E5E5E5"> a call to</font><font color="#CCCCCC"> that function</font>

293
00:12:05,080 --> 00:12:11,990
<font color="#CCCCCC">the new one and now right away</font><font color="#E5E5E5"> in our</font>

294
00:12:09,110 --> 00:12:14,270
<font color="#E5E5E5">JIRA ticket we have</font><font color="#CCCCCC"> active directory</font>

295
00:12:11,990 --> 00:12:20,240
details for the user in<font color="#E5E5E5"> the alert posted</font>

296
00:12:14,270 --> 00:12:24,170
to the ticket then we also had an md5

297
00:12:20,240 --> 00:12:25,400
and when I see a<font color="#E5E5E5"> file hash my first</font>

298
00:12:24,170 --> 00:12:26,060
thought<font color="#E5E5E5"> is</font><font color="#CCCCCC"> to go look it</font><font color="#E5E5E5"> up in</font>

299
00:12:25,400 --> 00:12:28,280
virustotal

300
00:12:26,060 --> 00:12:31,280
so we're gonna write<font color="#CCCCCC"> another script</font>

301
00:12:28,280 --> 00:12:31,939
<font color="#E5E5E5">virustotal</font><font color="#CCCCCC"> PI again no dependencies on</font>

302
00:12:31,280 --> 00:12:35,420
<font color="#E5E5E5">flask</font>

303
00:12:31,940 --> 00:12:37,220
no no you<font color="#E5E5E5"> know overhead really we can</font>

304
00:12:35,420 --> 00:12:39,110
just developed us like we're writing a

305
00:12:37,220 --> 00:12:40,250
little<font color="#CCCCCC"> Python script and this is pretty</font>

306
00:12:39,110 --> 00:12:40,880
much copied and pasted from the

307
00:12:40,250 --> 00:12:46,100
virustotal

308
00:12:40,880 --> 00:12:47,540
public<font color="#CCCCCC"> API documentation and if we give</font>

309
00:12:46,100 --> 00:12:49,760
it that<font color="#CCCCCC"> hash it's gonna send</font><font color="#E5E5E5"> us back a</font>

310
00:12:47,540 --> 00:12:51,680
JSON object like that<font color="#CCCCCC"> so I'm gonna go in</font>

311
00:12:49,760 --> 00:12:55,700
pull out a few pieces that<font color="#E5E5E5"> I</font><font color="#CCCCCC"> think</font><font color="#E5E5E5"> are</font>

312
00:12:51,680 --> 00:12:58,849
most<font color="#CCCCCC"> interesting probably the positives</font>

313
00:12:55,700 --> 00:13:04,220
the total number of scans and link to

314
00:12:58,850 --> 00:13:05,600
the full results and then we're<font color="#CCCCCC"> just</font>

315
00:13:04,220 --> 00:13:08,720
<font color="#CCCCCC">gonna add</font><font color="#E5E5E5"> it the exact same</font><font color="#CCCCCC"> way</font><font color="#E5E5E5"> as we</font>

316
00:13:05,600 --> 00:13:10,010
<font color="#E5E5E5">did the</font><font color="#CCCCCC"> active directory look</font><font color="#E5E5E5"> up so this</font>

317
00:13:08,720 --> 00:13:12,500
is where it<font color="#CCCCCC"> actually</font><font color="#E5E5E5"> starts to get</font>

318
00:13:10,010 --> 00:13:14,000
<font color="#CCCCCC">pretty cool now we have</font><font color="#E5E5E5"> tickets being</font>

319
00:13:12,500 --> 00:13:16,070
created<font color="#E5E5E5"> and then automatically those</font>

320
00:13:14,000 --> 00:13:17,990
first two lookups that<font color="#E5E5E5"> our analyst would</font>

321
00:13:16,070 --> 00:13:20,560
be doing are already in the ticket when

322
00:13:17,990 --> 00:13:20,560
they get to it

323
00:13:22,960 --> 00:13:27,890
so this is kind of what our

324
00:13:25,250 --> 00:13:30,380
infrastructure looks like now<font color="#E5E5E5"> right we</font>

325
00:13:27,890 --> 00:13:31,490
have to recap<font color="#E5E5E5"> as the the flow is a</font>

326
00:13:30,380 --> 00:13:33,470
<font color="#CCCCCC">little bit complicated</font>

327
00:13:31,490 --> 00:13:35,450
we have those alerts reaching out to our

328
00:13:33,470 --> 00:13:37,490
<font color="#CCCCCC">automation server which reaches out to</font>

329
00:13:35,450 --> 00:13:40,400
JIRA and creates a ticket<font color="#E5E5E5"> and then that</font>

330
00:13:37,490 --> 00:13:41,840
create create ticket part is done

331
00:13:40,400 --> 00:13:43,069
you could also receive a ticket<font color="#E5E5E5"> via</font>

332
00:13:41,840 --> 00:13:45,620
email and it could work the same way

333
00:13:43,070 --> 00:13:46,910
<font color="#CCCCCC">after that we rely on the</font><font color="#E5E5E5"> Giro web hooks</font>

334
00:13:45,620 --> 00:13:49,190
to let us know when I take<font color="#E5E5E5"> it was</font>

335
00:13:46,910 --> 00:13:51,829
created or<font color="#E5E5E5"> changed</font><font color="#CCCCCC"> to reach back to our</font>

336
00:13:49,190 --> 00:13:53,330
<font color="#E5E5E5">automation server and then we run</font>

337
00:13:51,830 --> 00:13:55,700
whatever functions we<font color="#CCCCCC"> have to find for</font>

338
00:13:53,330 --> 00:14:02,780
that<font color="#E5E5E5"> web hook endpoint</font><font color="#CCCCCC"> - and post</font>

339
00:13:55,700 --> 00:14:04,190
details back to the ticket now the<font color="#CCCCCC"> the</font>

340
00:14:02,780 --> 00:14:06,740
nice<font color="#E5E5E5"> thing about those approach is that</font>

341
00:14:04,190 --> 00:14:09,650
<font color="#E5E5E5">we can literally automate anything that</font>

342
00:14:06,740 --> 00:14:11,840
we can write a<font color="#E5E5E5"> script to do so just the</font>

343
00:14:09,650 --> 00:14:15,500
the really<font color="#CCCCCC"> low hanging fruit</font><font color="#E5E5E5"> we can go</font>

344
00:14:11,840 --> 00:14:17,800
<font color="#E5E5E5">and populate ticket fields search for</font>

345
00:14:15,500 --> 00:14:20,240
previous<font color="#E5E5E5"> tickets that kind of thing</font><font color="#CCCCCC"> I</font>

346
00:14:17,800 --> 00:14:21,439
know that<font color="#CCCCCC"> a lot of the time when an</font>

347
00:14:20,240 --> 00:14:22,400
analyst pulls up a<font color="#E5E5E5"> ticket that's the</font>

348
00:14:21,440 --> 00:14:24,620
first thing you do you've<font color="#CCCCCC"> got to</font>

349
00:14:22,400 --> 00:14:28,880
classify<font color="#E5E5E5"> it as you know type of</font><font color="#CCCCCC"> threat</font>

350
00:14:24,620 --> 00:14:31,040
check a few<font color="#CCCCCC"> boxes we could run a spunk</font>

351
00:14:28,880 --> 00:14:33,439
search and post the results<font color="#E5E5E5"> to it we can</font>

352
00:14:31,040 --> 00:14:35,240
<font color="#CCCCCC">look up DNS and who is</font><font color="#E5E5E5"> records</font><font color="#CCCCCC"> I don't</font>

353
00:14:33,440 --> 00:14:38,620
want to read everything<font color="#E5E5E5"> here but you</font><font color="#CCCCCC"> can</font>

354
00:14:35,240 --> 00:14:42,170
definitely upload files to box<font color="#E5E5E5"> you can</font>

355
00:14:38,620 --> 00:14:44,330
connect<font color="#E5E5E5"> to a smart device you can set up</font>

356
00:14:42,170 --> 00:14:47,150
<font color="#CCCCCC">a light to flash if you have a critical</font>

357
00:14:44,330 --> 00:14:49,490
alert I mean really anything<font color="#E5E5E5"> that can be</font>

358
00:14:47,150 --> 00:14:52,819
put into<font color="#CCCCCC"> a script we could</font><font color="#E5E5E5"> automate here</font>

359
00:14:49,490 --> 00:14:57,260
there are some<font color="#CCCCCC"> considerations</font><font color="#E5E5E5"> about how</font>

360
00:14:52,820 --> 00:14:59,000
we're gonna run<font color="#E5E5E5"> it though so you know in</font>

361
00:14:57,260 --> 00:15:00,770
<font color="#E5E5E5">that example we had a single function</font>

362
00:14:59,000 --> 00:15:03,500
<font color="#CCCCCC">that did an</font><font color="#E5E5E5"> active directory lookup and</font>

363
00:15:00,770 --> 00:15:05,329
<font color="#E5E5E5">a virus</font><font color="#CCCCCC"> todo</font><font color="#E5E5E5"> look up and the the</font><font color="#CCCCCC"> one</font>

364
00:15:03,500 --> 00:15:08,420
problem<font color="#CCCCCC"> there is if that active</font>

365
00:15:05,330 --> 00:15:10,160
directory lookup fails<font color="#CCCCCC"> you know say just</font>

366
00:15:08,420 --> 00:15:12,770
a<font color="#E5E5E5"> network hiccup or</font><font color="#CCCCCC"> they're rebooting</font>

367
00:15:10,160 --> 00:15:14,150
the server<font color="#E5E5E5"> then the</font><font color="#CCCCCC"> whole thing</font><font color="#E5E5E5"> is gonna</font>

368
00:15:12,770 --> 00:15:19,370
error out and we're never<font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> do that</font>

369
00:15:14,150 --> 00:15:20,750
<font color="#CCCCCC">virustotal lookup</font><font color="#E5E5E5"> so if you're</font><font color="#CCCCCC"> actually</font>

370
00:15:19,370 --> 00:15:22,850
gonna go to<font color="#E5E5E5"> apply this you definitely</font>

371
00:15:20,750 --> 00:15:26,480
<font color="#CCCCCC">want to</font><font color="#E5E5E5"> think about ways to make it</font>

372
00:15:22,850 --> 00:15:28,370
<font color="#E5E5E5">asynchronous</font><font color="#CCCCCC"> by which I</font><font color="#E5E5E5"> mean separating</font>

373
00:15:26,480 --> 00:15:30,500
<font color="#E5E5E5">the job so that one failing doesn't kill</font>

374
00:15:28,370 --> 00:15:33,230
all of<font color="#E5E5E5"> them</font><font color="#CCCCCC"> there are a few ways</font><font color="#E5E5E5"> you</font>

375
00:15:30,500 --> 00:15:34,160
<font color="#E5E5E5">could do that one kind of intuitive way</font>

376
00:15:33,230 --> 00:15:37,230
would just be

377
00:15:34,160 --> 00:15:38,850
to set up<font color="#CCCCCC"> a</font><font color="#E5E5E5"> JIRA</font><font color="#CCCCCC"> web hook for each</font>

378
00:15:37,230 --> 00:15:41,610
ticket<font color="#CCCCCC"> enrichment</font><font color="#E5E5E5"> that you want to run</font>

379
00:15:38,850 --> 00:15:43,079
then you<font color="#E5E5E5"> have to go and manage a whole</font>

380
00:15:41,610 --> 00:15:45,480
bunch of JIRA web hooks but we can

381
00:15:43,079 --> 00:15:47,969
specify with that filter<font color="#E5E5E5"> that you know</font>

382
00:15:45,480 --> 00:15:50,730
we want<font color="#E5E5E5"> all</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> our carbon black alerts</font>

383
00:15:47,970 --> 00:15:53,549
to do an active directory lookup and we

384
00:15:50,730 --> 00:15:57,269
want all of our OS query<font color="#E5E5E5"> alerts to do</font>

385
00:15:53,549 --> 00:15:58,799
some other<font color="#E5E5E5"> lookup and you know you can</font>

386
00:15:57,269 --> 00:16:00,420
add as many as<font color="#E5E5E5"> you</font><font color="#CCCCCC"> need</font><font color="#E5E5E5"> I'm not sure if</font>

387
00:15:58,799 --> 00:16:01,980
they actually<font color="#CCCCCC"> have a limit on how many</font>

388
00:16:00,420 --> 00:16:05,399
<font color="#CCCCCC">Web books you can use I haven't tested</font>

389
00:16:01,980 --> 00:16:06,989
that or you can build<font color="#E5E5E5"> out</font><font color="#CCCCCC"> your code to</font>

390
00:16:05,399 --> 00:16:10,739
<font color="#CCCCCC">actually do this asynchronous</font><font color="#E5E5E5"> stuff</font>

391
00:16:06,989 --> 00:16:12,480
itself<font color="#E5E5E5"> we could use celery and</font><font color="#CCCCCC"> RabbitMQ</font>

392
00:16:10,739 --> 00:16:13,980
or something<font color="#E5E5E5"> or we could use an async</font>

393
00:16:12,480 --> 00:16:19,769
<font color="#E5E5E5">i/o which I'm going to learn about any</font>

394
00:16:13,980 --> 00:16:23,399
day now or we could go and use a<font color="#E5E5E5"> DevOps</font>

395
00:16:19,769 --> 00:16:25,199
platform<font color="#E5E5E5"> like Jenkins I've seen really</font>

396
00:16:23,399 --> 00:16:27,749
complicated stuff built on top of

397
00:16:25,199 --> 00:16:30,179
Jenkins<font color="#E5E5E5"> basically it's a service</font><font color="#CCCCCC"> that</font>

398
00:16:27,749 --> 00:16:32,009
<font color="#E5E5E5">just runs things when you tell it</font><font color="#CCCCCC"> to</font>

399
00:16:30,179 --> 00:16:34,920
<font color="#CCCCCC">that that's exactly what we're</font><font color="#E5E5E5"> doing</font>

400
00:16:32,009 --> 00:16:36,929
<font color="#E5E5E5">here so there are a lot of opportunities</font>

401
00:16:34,920 --> 00:16:39,660
<font color="#CCCCCC">to use tools that are not actually</font>

402
00:16:36,929 --> 00:16:42,329
marketed at security but could<font color="#E5E5E5"> still fit</font>

403
00:16:39,660 --> 00:16:44,219
in this use case<font color="#E5E5E5"> we can if you're a</font>

404
00:16:42,329 --> 00:16:46,439
cloud native we could also do this all

405
00:16:44,220 --> 00:16:48,360
in<font color="#E5E5E5"> AWS lambda jobs</font><font color="#CCCCCC"> it's actually a</font>

406
00:16:46,439 --> 00:16:50,579
really<font color="#E5E5E5"> good fit this entire thing could</font>

407
00:16:48,360 --> 00:16:51,990
be<font color="#E5E5E5"> lambda jobs and then you don't have</font>

408
00:16:50,579 --> 00:16:55,888
<font color="#E5E5E5">to worry about your infrastructure for</font>

409
00:16:51,990 --> 00:16:57,779
the most part<font color="#CCCCCC"> kind</font><font color="#E5E5E5"> of a</font><font color="#CCCCCC"> follow-on to</font>

410
00:16:55,889 --> 00:17:00,509
<font color="#CCCCCC">this you know if one fails they all fail</font>

411
00:16:57,779 --> 00:17:02,309
<font color="#CCCCCC">problem everything is going</font><font color="#E5E5E5"> to fail at</font>

412
00:17:00,509 --> 00:17:05,010
some point or another<font color="#E5E5E5"> even</font><font color="#CCCCCC"> if you</font><font color="#E5E5E5"> think</font>

413
00:17:02,309 --> 00:17:07,559
<font color="#E5E5E5">it shouldn't getting logging in and</font>

414
00:17:05,010 --> 00:17:09,179
<font color="#E5E5E5">exception</font><font color="#CCCCCC"> handling is vital</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> biggest</font>

415
00:17:07,559 --> 00:17:11,428
thing is<font color="#CCCCCC"> knowing when something breaks</font>

416
00:17:09,179 --> 00:17:11,909
<font color="#E5E5E5">even</font><font color="#CCCCCC"> if you don't actually fix it</font><font color="#E5E5E5"> right</font>

417
00:17:11,429 --> 00:17:14,100
<font color="#E5E5E5">away</font>

418
00:17:11,909 --> 00:17:15,990
just having<font color="#CCCCCC"> that visibility</font><font color="#E5E5E5"> into your</font>

419
00:17:14,099 --> 00:17:18,629
<font color="#E5E5E5">infrastructure of when things are on one</font>

420
00:17:15,990 --> 00:17:20,039
thing<font color="#E5E5E5"> to break it's it's really critical</font>

421
00:17:18,630 --> 00:17:29,580
when<font color="#E5E5E5"> you actually get this running in</font>

422
00:17:20,039 --> 00:17:32,309
production<font color="#CCCCCC"> so once you do have</font><font color="#E5E5E5"> it</font>

423
00:17:29,580 --> 00:17:34,408
running<font color="#E5E5E5"> in production the next step is</font>

424
00:17:32,309 --> 00:17:36,539
<font color="#CCCCCC">that you've</font><font color="#E5E5E5"> really got to do some</font>

425
00:17:34,409 --> 00:17:39,720
metrics<font color="#E5E5E5"> you've got to start trying to</font>

426
00:17:36,539 --> 00:17:43,830
integrate automation into your process

427
00:17:39,720 --> 00:17:45,840
so<font color="#CCCCCC"> I think that security operations is</font>

428
00:17:43,830 --> 00:17:47,139
kind<font color="#E5E5E5"> of converging on a model similar</font><font color="#CCCCCC"> to</font>

429
00:17:45,840 --> 00:17:49,178
<font color="#CCCCCC">the DevOps mindset</font>

430
00:17:47,140 --> 00:17:50,799
<font color="#E5E5E5">we're part of your time always has to be</font>

431
00:17:49,179 --> 00:17:55,030
spent automating<font color="#E5E5E5"> and you've got to</font>

432
00:17:50,799 --> 00:17:57,700
quantify quantify the impact quantify

433
00:17:55,030 --> 00:17:59,799
the time spent on tasks this little

434
00:17:57,700 --> 00:18:01,990
graphic<font color="#E5E5E5"> in the corner is similar to</font>

435
00:17:59,799 --> 00:18:04,330
<font color="#E5E5E5">something</font><font color="#CCCCCC"> that my team actually</font><font color="#E5E5E5"> sends</font>

436
00:18:01,990 --> 00:18:06,160
out in our weekly<font color="#E5E5E5"> status updates we go</font>

437
00:18:04,330 --> 00:18:08,139
through the logs and say you know every

438
00:18:06,160 --> 00:18:10,059
time we ran this<font color="#E5E5E5"> look up that saved</font>

439
00:18:08,140 --> 00:18:12,010
about<font color="#CCCCCC"> two minutes of analyst time and we</font>

440
00:18:10,059 --> 00:18:14,830
got our cert to say yeah<font color="#E5E5E5"> that's about</font>

441
00:18:12,010 --> 00:18:17,140
right<font color="#CCCCCC"> and then we just add it</font><font color="#E5E5E5"> all up and</font>

442
00:18:14,830 --> 00:18:20,290
end up with<font color="#E5E5E5"> something</font><font color="#CCCCCC"> like 81 hour is</font>

443
00:18:17,140 --> 00:18:21,970
saved<font color="#E5E5E5"> in a week that</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> really</font>

444
00:18:20,290 --> 00:18:23,740
compelling<font color="#CCCCCC"> to management and it really</font>

445
00:18:21,970 --> 00:18:34,960
justifies the time spent on those

446
00:18:23,740 --> 00:18:36,840
automation so takeaways<font color="#E5E5E5"> the stuff I hope</font>

447
00:18:34,960 --> 00:18:41,200
<font color="#E5E5E5">you guys got from this kind of basic</font>

448
00:18:36,840 --> 00:18:43,540
<font color="#E5E5E5">intro talk is the security on a security</font>

449
00:18:41,200 --> 00:18:45,730
automation isn't magic<font color="#E5E5E5"> you can actually</font>

450
00:18:43,540 --> 00:18:48,010
start building<font color="#E5E5E5"> these things out pretty</font>

451
00:18:45,730 --> 00:18:50,380
easily with a little bit of<font color="#E5E5E5"> Python like</font>

452
00:18:48,010 --> 00:18:53,230
for real there are a lot<font color="#CCCCCC"> of analysts</font><font color="#E5E5E5"> who</font>

453
00:18:50,380 --> 00:18:55,179
could set this up and start<font color="#E5E5E5"> using it in</font>

454
00:18:53,230 --> 00:18:57,790
their<font color="#CCCCCC"> environment</font><font color="#E5E5E5"> and I hope I can kind</font>

455
00:18:55,179 --> 00:18:59,320
<font color="#CCCCCC">of</font><font color="#E5E5E5"> encourage that</font><font color="#CCCCCC"> even if you can't</font><font color="#E5E5E5"> do</font>

456
00:18:57,790 --> 00:19:01,899
<font color="#E5E5E5">one by a super expensive automation</font>

457
00:18:59,320 --> 00:19:04,540
platform<font color="#E5E5E5"> you can use Jenkins if you've</font>

458
00:19:01,900 --> 00:19:05,710
got Jenkins<font color="#CCCCCC"> if you're standing</font><font color="#E5E5E5"> up</font>

459
00:19:04,540 --> 00:19:07,928
something new you<font color="#E5E5E5"> could use a</font><font color="#CCCCCC"> tool like</font>

460
00:19:05,710 --> 00:19:11,230
<font color="#E5E5E5">stack storm which I've</font><font color="#CCCCCC"> used</font><font color="#E5E5E5"> before and I</font>

461
00:19:07,929 --> 00:19:12,730
thought was pretty cool<font color="#E5E5E5"> but there are</font>

462
00:19:11,230 --> 00:19:14,740
just<font color="#E5E5E5"> lots of options and there's so much</font>

463
00:19:12,730 --> 00:19:17,559
low-hanging fruit right<font color="#E5E5E5"> so many</font>

464
00:19:14,740 --> 00:19:20,169
opportunities<font color="#CCCCCC"> in</font><font color="#E5E5E5"> a lot</font><font color="#CCCCCC"> of certs and</font>

465
00:19:17,559 --> 00:19:22,240
<font color="#E5E5E5">socks and even other IT operations areas</font>

466
00:19:20,169 --> 00:19:24,429
we're just doing some<font color="#E5E5E5"> of these lookups</font>

467
00:19:22,240 --> 00:19:26,590
directly into the<font color="#E5E5E5"> ticket before</font><font color="#CCCCCC"> analyst</font>

468
00:19:24,429 --> 00:19:29,200
ever gets to it can save hours and hours

469
00:19:26,590 --> 00:19:32,980
of copy<font color="#E5E5E5"> and pasting between browser tabs</font>

470
00:19:29,200 --> 00:19:35,200
<font color="#E5E5E5">and then finally I just want to say I</font>

471
00:19:32,980 --> 00:19:35,799
think<font color="#E5E5E5"> this is like the</font><font color="#CCCCCC"> coolest job in</font>

472
00:19:35,200 --> 00:19:38,200
the world

473
00:19:35,799 --> 00:19:40,750
<font color="#E5E5E5">you know I spend my time trying</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> make</font>

474
00:19:38,200 --> 00:19:42,610
the rest<font color="#CCCCCC"> of my</font><font color="#E5E5E5"> team more efficient when</font>

475
00:19:40,750 --> 00:19:44,530
people say they have<font color="#E5E5E5"> a problem I can go</font>

476
00:19:42,610 --> 00:19:47,229
<font color="#CCCCCC">and fix it I can ask them</font><font color="#E5E5E5"> the next day</font>

477
00:19:44,530 --> 00:19:48,820
if they fix if that fixed it and<font color="#E5E5E5"> you</font>

478
00:19:47,230 --> 00:19:50,380
know we can collaborate<font color="#CCCCCC"> it so it's a</font>

479
00:19:48,820 --> 00:19:52,389
really<font color="#E5E5E5"> neat place to be it's different</font>

480
00:19:50,380 --> 00:19:54,549
from<font color="#CCCCCC"> normal software</font><font color="#E5E5E5"> development it's</font>

481
00:19:52,390 --> 00:19:57,160
different<font color="#E5E5E5"> from normal</font><font color="#CCCCCC"> Incident Response</font>

482
00:19:54,549 --> 00:20:00,280
<font color="#CCCCCC">or security analyst roles</font><font color="#E5E5E5"> but it's</font>

483
00:19:57,160 --> 00:20:01,090
<font color="#E5E5E5">pretty awesome and it's a great way to</font>

484
00:20:00,280 --> 00:20:03,370
get into secure

485
00:20:01,090 --> 00:20:06,790
for<font color="#E5E5E5"> developers and a great way to get</font>

486
00:20:03,370 --> 00:20:09,729
into development for security folks<font color="#E5E5E5"> and</font>

487
00:20:06,790 --> 00:20:16,060
like everyone else here<font color="#E5E5E5"> we're hiring so</font>

488
00:20:09,730 --> 00:20:18,160
I you<font color="#CCCCCC"> know any interest let me know with</font>

489
00:20:16,060 --> 00:20:19,629
that<font color="#CCCCCC"> I think we've got about</font><font color="#E5E5E5"> five</font>

490
00:20:18,160 --> 00:20:22,420
minutes left<font color="#E5E5E5"> and if you guys have</font>

491
00:20:19,630 --> 00:20:26,200
<font color="#E5E5E5">questions I'd love to answer them</font><font color="#CCCCCC"> we</font>

492
00:20:22,420 --> 00:20:35,380
have this slide<font color="#CCCCCC"> Oh thing and</font><font color="#E5E5E5"> the</font>

493
00:20:26,200 --> 00:20:37,840
<font color="#E5E5E5">questions</font><font color="#CCCCCC"> they are is I agree</font><font color="#E5E5E5"> that</font>

494
00:20:35,380 --> 00:20:41,940
<font color="#E5E5E5">security automation is amazing and it's</font>

495
00:20:37,840 --> 00:20:46,179
one of<font color="#CCCCCC"> the best jobs my opinion awesome</font>

496
00:20:41,940 --> 00:20:49,020
<font color="#CCCCCC">do your metrics include the time</font><font color="#E5E5E5"> that</font>

497
00:20:46,180 --> 00:20:53,710
goes into building maintaining and

498
00:20:49,020 --> 00:20:56,290
troubleshooting<font color="#CCCCCC"> so not</font><font color="#E5E5E5"> quite as much as</font>

499
00:20:53,710 --> 00:20:58,870
that hours saved metric but our actual

500
00:20:56,290 --> 00:21:00,730
<font color="#E5E5E5">status report shows that</font><font color="#CCCCCC"> these are how</font>

501
00:20:58,870 --> 00:21:03,219
many bug tickets we worked and how many

502
00:21:00,730 --> 00:21:04,750
you know new development stories and we

503
00:21:03,220 --> 00:21:06,370
have some graphs around that to kind of

504
00:21:04,750 --> 00:21:08,740
show the effort that's<font color="#E5E5E5"> going into this</font>

505
00:21:06,370 --> 00:21:12,850
as well as new lines of code added or

506
00:21:08,740 --> 00:21:15,220
removed from our repos can I ask well

507
00:21:12,850 --> 00:21:17,679
I'm gonna<font color="#E5E5E5"> ask a follow-up question</font><font color="#CCCCCC"> so</font>

508
00:21:15,220 --> 00:21:22,030
then how do<font color="#E5E5E5"> you convince leadership or</font>

509
00:21:17,680 --> 00:21:26,890
management<font color="#E5E5E5"> to devote some man-hours to</font>

510
00:21:22,030 --> 00:21:30,730
automate well<font color="#E5E5E5"> so at box I'll say I am</font>

511
00:21:26,890 --> 00:21:32,650
unbelievably lucky we really built this

512
00:21:30,730 --> 00:21:35,290
out from<font color="#E5E5E5"> the start believing automation</font>

513
00:21:32,650 --> 00:21:38,350
was important and we now have a<font color="#E5E5E5"> four</font>

514
00:21:35,290 --> 00:21:41,100
<font color="#E5E5E5">person full-time automation team</font><font color="#CCCCCC"> I know</font>

515
00:21:38,350 --> 00:21:44,830
that's not the<font color="#CCCCCC"> norm across</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> industry</font>

516
00:21:41,100 --> 00:21:47,080
but in another<font color="#E5E5E5"> place I worked I actually</font>

517
00:21:44,830 --> 00:21:48,879
just kind of started automating and when

518
00:21:47,080 --> 00:21:50,560
everyone<font color="#E5E5E5"> loved it I was able to show you</font>

519
00:21:48,880 --> 00:21:54,190
<font color="#E5E5E5">know the value and</font><font color="#CCCCCC"> it pretty much</font><font color="#E5E5E5"> became</font>

520
00:21:50,560 --> 00:21:56,610
my full-time job<font color="#E5E5E5"> so I don't know if that</font>

521
00:21:54,190 --> 00:22:03,280
answers your question

522
00:21:56,610 --> 00:22:05,620
there's time for one<font color="#CCCCCC"> more question in</font>

523
00:22:03,280 --> 00:22:08,320
<font color="#CCCCCC">your site</font><font color="#E5E5E5"> you mentioned that liking</font>

524
00:22:05,620 --> 00:22:11,860
exception<font color="#E5E5E5"> even the even the code is</font>

525
00:22:08,320 --> 00:22:15,159
perfect<font color="#E5E5E5"> is</font><font color="#CCCCCC"> not good</font><font color="#E5E5E5"> is it is it in the</font>

526
00:22:11,860 --> 00:22:17,229
<font color="#CCCCCC">environment or production</font><font color="#E5E5E5"> because</font>

527
00:22:15,160 --> 00:22:21,040
basically<font color="#E5E5E5"> be all logging in all the</font>

528
00:22:17,230 --> 00:22:24,280
exceptions<font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> talking you say that</font>

529
00:22:21,040 --> 00:22:26,820
again<font color="#E5E5E5"> louder or in one of in one of your</font>

530
00:22:24,280 --> 00:22:29,620
slide<font color="#E5E5E5"> you mentioned that logging</font>

531
00:22:26,820 --> 00:22:34,230
exception handling exceptions<font color="#CCCCCC"> is not a</font>

532
00:22:29,620 --> 00:22:37,570
good<font color="#E5E5E5"> idea</font><font color="#CCCCCC"> and even your code is perfect</font>

533
00:22:34,230 --> 00:22:39,680
<font color="#E5E5E5">do you mean that we don't we</font><font color="#CCCCCC"> don't</font><font color="#E5E5E5"> have</font>

534
00:22:37,570 --> 00:22:44,570
to like any exception

535
00:22:39,680 --> 00:22:47,230
<font color="#CCCCCC">oh</font><font color="#E5E5E5"> so exception handling and logging is</font>

536
00:22:44,570 --> 00:22:49,909
critical but<font color="#CCCCCC"> what I was</font><font color="#E5E5E5"> trying to say is</font>

537
00:22:47,230 --> 00:22:51,860
<font color="#CCCCCC">actually fixing that exception</font><font color="#E5E5E5"> doesn't</font>

538
00:22:49,910 --> 00:22:53,690
<font color="#CCCCCC">have</font><font color="#E5E5E5"> to be like automated you can go and</font>

539
00:22:51,860 --> 00:22:57,379
fix it up later as long as you know that

540
00:22:53,690 --> 00:23:01,290
<font color="#CCCCCC">it happened</font><font color="#E5E5E5"> okay</font><font color="#CCCCCC"> on</font><font color="#E5E5E5"> behalf of</font><font color="#CCCCCC"> II sighs</font>

541
00:22:57,380 --> 00:23:05,160
we thank you for your presentation Moses

542
00:23:01,290 --> 00:23:05,159
[Applause]

