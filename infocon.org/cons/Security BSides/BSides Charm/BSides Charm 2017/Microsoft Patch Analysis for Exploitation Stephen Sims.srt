1
00:00:01,220 --> 00:00:05,758
<font color="#E5E5E5">all right good afternoon and thank you</font>

2
00:00:03,659 --> 00:00:10,530
for<font color="#E5E5E5"> coming to my talk on Microsoft patch</font>

3
00:00:05,759 --> 00:00:12,120
analysis<font color="#E5E5E5"> for exploitation I'm not used</font>

4
00:00:10,530 --> 00:00:13,889
to standing<font color="#E5E5E5"> still but they told me I</font>

5
00:00:12,120 --> 00:00:15,780
have<font color="#E5E5E5"> to kind of stay in this</font><font color="#CCCCCC"> area so</font>

6
00:00:13,889 --> 00:00:18,299
<font color="#E5E5E5">well I'll try to struggle through that</font>

7
00:00:15,780 --> 00:00:21,210
<font color="#E5E5E5">we'll see how it goes but real quickly I</font>

8
00:00:18,300 --> 00:00:23,789
want<font color="#E5E5E5"> to just kind of give</font><font color="#CCCCCC"> it quick intro</font>

9
00:00:21,210 --> 00:00:25,320
<font color="#CCCCCC">to what the talk will be</font><font color="#E5E5E5"> about so I'm</font>

10
00:00:23,789 --> 00:00:27,000
<font color="#E5E5E5">not big on intro slides so I'll just</font>

11
00:00:25,320 --> 00:00:28,769
quickly<font color="#E5E5E5"> give</font><font color="#CCCCCC"> you a summary</font><font color="#E5E5E5"> of who I</font><font color="#CCCCCC"> am</font>

12
00:00:27,000 --> 00:00:30,480
if you're not familiar<font color="#E5E5E5"> with me my name</font>

13
00:00:28,769 --> 00:00:32,699
is<font color="#E5E5E5"> Steven Sims I live out in</font><font color="#CCCCCC"> the San</font>

14
00:00:30,480 --> 00:00:34,350
Francisco<font color="#CCCCCC"> Bay Area I grew up here</font>

15
00:00:32,700 --> 00:00:34,829
actually<font color="#E5E5E5"> and thank you to B sides for</font>

16
00:00:34,350 --> 00:00:37,710
having me

17
00:00:34,829 --> 00:00:39,480
I am<font color="#E5E5E5"> I've been teaching for</font><font color="#CCCCCC"> the SANS</font>

18
00:00:37,710 --> 00:00:41,520
Institute for<font color="#E5E5E5"> the last</font><font color="#CCCCCC"> 10 years</font><font color="#E5E5E5"> or</font><font color="#CCCCCC"> so I</font>

19
00:00:39,480 --> 00:00:44,190
<font color="#E5E5E5">have a couple courses on exploit writing</font>

20
00:00:41,520 --> 00:00:45,899
<font color="#E5E5E5">and advanced penetration testing one of</font>

21
00:00:44,190 --> 00:00:47,129
the authors<font color="#CCCCCC"> of</font><font color="#E5E5E5"> grey hat hacking fourth</font>

22
00:00:45,899 --> 00:00:49,710
edition and we're working<font color="#CCCCCC"> on</font><font color="#E5E5E5"> the fifth</font>

23
00:00:47,129 --> 00:00:51,449
edition now<font color="#CCCCCC"> I do a lot of</font><font color="#E5E5E5"> consulting for</font>

24
00:00:49,710 --> 00:00:53,280
security development<font color="#CCCCCC"> lifecycle as</font><font color="#E5E5E5"> well</font>

25
00:00:51,449 --> 00:00:55,019
as a lot of exploit development and

26
00:00:53,280 --> 00:00:57,510
vulnerability research so selling

27
00:00:55,020 --> 00:01:00,180
exploits things like that<font color="#CCCCCC"> said it's</font>

28
00:00:57,510 --> 00:01:03,989
enough on these this talk is<font color="#E5E5E5"> going to be</font>

29
00:01:00,180 --> 00:01:06,240
about taking Microsoft patches and

30
00:01:03,989 --> 00:01:08,908
reverse engineering them against a prior

31
00:01:06,240 --> 00:01:10,830
update to a particular file<font color="#E5E5E5"> to try and</font>

32
00:01:08,909 --> 00:01:12,360
see if<font color="#CCCCCC"> we</font><font color="#E5E5E5"> can discover the bug the code</font>

33
00:01:10,830 --> 00:01:15,000
changes that are related to<font color="#E5E5E5"> the</font>

34
00:01:12,360 --> 00:01:17,490
vulnerability<font color="#E5E5E5"> and the faster you</font><font color="#CCCCCC"> can do</font>

35
00:01:15,000 --> 00:01:18,750
that then<font color="#E5E5E5"> you can</font><font color="#CCCCCC"> get a working exploit</font>

36
00:01:17,490 --> 00:01:20,670
potentially and most organizations

37
00:01:18,750 --> 00:01:22,650
<font color="#CCCCCC">aren't</font><font color="#E5E5E5"> so good about patching very</font>

38
00:01:20,670 --> 00:01:24,659
quickly or if they<font color="#CCCCCC"> are it's kind</font><font color="#E5E5E5"> of</font>

39
00:01:22,650 --> 00:01:26,820
inconsistent<font color="#CCCCCC"> or maybe they choose some</font>

40
00:01:24,659 --> 00:01:28,890
patches to roll out<font color="#CCCCCC"> but not others and</font>

41
00:01:26,820 --> 00:01:31,619
there's been a lot of changes<font color="#CCCCCC"> over the</font>

42
00:01:28,890 --> 00:01:33,570
last year<font color="#CCCCCC"> or so</font><font color="#E5E5E5"> with how patches are</font>

43
00:01:31,619 --> 00:01:34,860
distributed along with Windows<font color="#E5E5E5"> 10</font>

44
00:01:33,570 --> 00:01:36,360
there's just been<font color="#E5E5E5"> change you have to</font>

45
00:01:34,860 --> 00:01:38,700
<font color="#E5E5E5">change you have to</font><font color="#CCCCCC"> change</font><font color="#E5E5E5"> and then again</font>

46
00:01:36,360 --> 00:01:41,250
<font color="#E5E5E5">this month's patch for April they</font>

47
00:01:38,700 --> 00:01:44,220
changed it again<font color="#CCCCCC"> they've used a technic</font>

48
00:01:41,250 --> 00:01:45,840
site for a very<font color="#CCCCCC"> very</font><font color="#E5E5E5"> long</font><font color="#CCCCCC"> time since I</font>

49
00:01:44,220 --> 00:01:47,548
can<font color="#CCCCCC"> remember</font><font color="#E5E5E5"> you always used to go and</font>

50
00:01:45,840 --> 00:01:49,350
get your patches<font color="#CCCCCC"> on this one particular</font>

51
00:01:47,549 --> 00:01:52,049
site<font color="#E5E5E5"> and now they</font><font color="#CCCCCC"> just change that</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> an</font>

52
00:01:49,350 --> 00:01:53,880
<font color="#E5E5E5">nsrc location so again changes there's</font>

53
00:01:52,049 --> 00:01:55,740
more changes coming<font color="#CCCCCC"> so I'll kind</font><font color="#E5E5E5"> of give</font>

54
00:01:53,880 --> 00:01:57,479
you an<font color="#CCCCCC"> update as to how that's going</font>

55
00:01:55,740 --> 00:02:00,929
because<font color="#E5E5E5"> it affects the way</font><font color="#CCCCCC"> we</font><font color="#E5E5E5"> can</font>

56
00:01:57,479 --> 00:02:02,640
extract and identify which files and a

57
00:02:00,930 --> 00:02:04,680
<font color="#E5E5E5">cumulative</font><font color="#CCCCCC"> update are related to a</font>

58
00:02:02,640 --> 00:02:06,719
<font color="#CCCCCC">particular security fix and it just</font>

59
00:02:04,680 --> 00:02:08,789
makes<font color="#CCCCCC"> life a little</font><font color="#E5E5E5"> bit more difficult</font>

60
00:02:06,719 --> 00:02:10,199
<font color="#E5E5E5">there first a quick note on the</font>

61
00:02:08,788 --> 00:02:11,819
operating<font color="#E5E5E5"> system</font><font color="#CCCCCC"> market share because</font>

62
00:02:10,199 --> 00:02:13,200
<font color="#CCCCCC">this comes up a</font><font color="#E5E5E5"> lot especially when</font>

63
00:02:11,819 --> 00:02:14,970
you're<font color="#E5E5E5"> doing things like any</font>

64
00:02:13,200 --> 00:02:17,730
<font color="#E5E5E5">thing from writing</font><font color="#CCCCCC"> courseware</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> train</font>

65
00:02:14,970 --> 00:02:21,390
to actually doing<font color="#E5E5E5"> things in practice to</font>

66
00:02:17,730 --> 00:02:23,399
find bugs some bugs<font color="#CCCCCC"> affect many</font>

67
00:02:21,390 --> 00:02:25,529
operating systems sometimes all<font color="#CCCCCC"> of them</font>

68
00:02:23,400 --> 00:02:27,180
and other ones<font color="#E5E5E5"> only affect</font><font color="#CCCCCC"> specific</font>

69
00:02:25,530 --> 00:02:28,739
operating systems<font color="#CCCCCC"> like one might affect</font>

70
00:02:27,180 --> 00:02:31,980
only<font color="#E5E5E5"> Windows 10</font><font color="#CCCCCC"> I'll give you an example</font>

71
00:02:28,739 --> 00:02:33,810
<font color="#E5E5E5">of that today if you're looking for a</font>

72
00:02:31,980 --> 00:02:36,268
<font color="#E5E5E5">vulnerability that's been patched and</font>

73
00:02:33,810 --> 00:02:38,190
you know that it's affected multiple

74
00:02:36,269 --> 00:02:41,489
operating systems<font color="#CCCCCC"> it's clear that it</font>

75
00:02:38,190 --> 00:02:43,769
<font color="#E5E5E5">would be easier</font><font color="#CCCCCC"> to reverse engineer</font><font color="#E5E5E5"> the</font>

76
00:02:41,489 --> 00:02:45,540
earlier version<font color="#E5E5E5"> the earliest version of</font>

77
00:02:43,769 --> 00:02:47,670
Windows as possible so<font color="#E5E5E5"> Windows 7 for</font>

78
00:02:45,540 --> 00:02:50,190
<font color="#CCCCCC">example</font><font color="#E5E5E5"> is going</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> be</font><font color="#CCCCCC"> a lot easier</font><font color="#E5E5E5"> to</font>

79
00:02:47,670 --> 00:02:53,130
<font color="#E5E5E5">potentially</font><font color="#CCCCCC"> find a security fix than</font>

80
00:02:50,190 --> 00:02:54,569
Windows 10<font color="#E5E5E5"> 64-bit enterprise</font><font color="#CCCCCC"> that's not</font>

81
00:02:53,130 --> 00:02:56,579
always the<font color="#CCCCCC"> case but it</font><font color="#E5E5E5"> just seems</font>

82
00:02:54,569 --> 00:02:58,920
obvious I know some people<font color="#E5E5E5"> still try and</font>

83
00:02:56,579 --> 00:03:00,569
<font color="#E5E5E5">get the XP embedded patches that</font><font color="#CCCCCC"> are</font>

84
00:02:58,920 --> 00:03:02,179
still out there<font color="#E5E5E5"> to try and and look at</font>

85
00:03:00,569 --> 00:03:04,589
<font color="#E5E5E5">those because the code is</font><font color="#CCCCCC"> just less code</font>

86
00:03:02,180 --> 00:03:06,840
<font color="#E5E5E5">so this right here</font><font color="#CCCCCC"> shows you that I</font>

87
00:03:04,590 --> 00:03:09,959
pulled<font color="#E5E5E5"> this yesterday I</font><font color="#CCCCCC"> believe and the</font>

88
00:03:06,840 --> 00:03:12,239
windows<font color="#E5E5E5"> 7 market share is around 50% if</font>

89
00:03:09,959 --> 00:03:15,900
this is accurate<font color="#CCCCCC"> right</font><font color="#E5E5E5"> net market share</font>

90
00:03:12,239 --> 00:03:17,489
<font color="#CCCCCC">comm so</font><font color="#E5E5E5"> 50% of the</font><font color="#CCCCCC"> market clearly</font>

91
00:03:15,900 --> 00:03:19,290
attackers are going to want to focus on

92
00:03:17,489 --> 00:03:22,230
the most heavily used<font color="#E5E5E5"> operating systems</font>

93
00:03:19,290 --> 00:03:24,600
and<font color="#CCCCCC"> 75%</font><font color="#E5E5E5"> of the market is Windows</font><font color="#CCCCCC"> 7 and</font>

94
00:03:22,230 --> 00:03:26,880
Windows<font color="#CCCCCC"> 10 and I'll tell you as long as</font>

95
00:03:24,600 --> 00:03:28,470
<font color="#CCCCCC">I've been doing bug</font><font color="#E5E5E5"> research and</font>

96
00:03:26,880 --> 00:03:30,060
vulnerability of<font color="#CCCCCC"> exploitation whatever</font>

97
00:03:28,470 --> 00:03:36,060
you<font color="#CCCCCC"> want to call</font><font color="#E5E5E5"> it it's been well over</font>

98
00:03:30,060 --> 00:03:39,180
<font color="#CCCCCC">10</font><font color="#E5E5E5"> 15</font><font color="#CCCCCC"> years</font><font color="#E5E5E5"> it is Microsoft Windows 7 is</font>

99
00:03:36,060 --> 00:03:42,630
is kind of like XP was<font color="#CCCCCC"> to Vista and 7</font>

100
00:03:39,180 --> 00:03:43,500
<font color="#E5E5E5">Windows 7 is that to Windows 10</font><font color="#CCCCCC"> in terms</font>

101
00:03:42,630 --> 00:03:45,150
of security

102
00:03:43,500 --> 00:03:46,889
there's just underlying security

103
00:03:45,150 --> 00:03:48,569
problems that are<font color="#CCCCCC"> inherent in the</font><font color="#E5E5E5"> kernel</font>

104
00:03:46,889 --> 00:03:50,579
<font color="#E5E5E5">and things</font><font color="#CCCCCC"> that they can't change</font><font color="#E5E5E5"> an</font>

105
00:03:48,569 --> 00:03:52,410
example would<font color="#E5E5E5"> be a newer control that</font>

106
00:03:50,579 --> 00:03:54,540
Microsoft believes very heavily and

107
00:03:52,410 --> 00:03:56,910
strongly<font color="#CCCCCC"> in is control flow guard</font><font color="#E5E5E5"> and</font>

108
00:03:54,540 --> 00:03:58,950
control flow guard the idea is let's<font color="#E5E5E5"> try</font>

109
00:03:56,910 --> 00:04:01,799
to stop things like<font color="#E5E5E5"> return-oriented</font>

110
00:03:58,950 --> 00:04:05,638
programming<font color="#CCCCCC"> by building a bitmap</font>

111
00:04:01,799 --> 00:04:07,739
<font color="#E5E5E5">basically a way of tracking all the</font>

112
00:04:05,639 --> 00:04:11,400
valid entry points for functions inside

113
00:04:07,739 --> 00:04:13,200
a<font color="#CCCCCC"> DLL or other file and if someone tries</font>

114
00:04:11,400 --> 00:04:15,000
<font color="#CCCCCC">to</font><font color="#E5E5E5"> do an indirect call as part of their</font>

115
00:04:13,200 --> 00:04:17,579
<font color="#CCCCCC">return oriented programing attack or</font>

116
00:04:15,000 --> 00:04:19,620
using<font color="#CCCCCC"> that technique it would say</font><font color="#E5E5E5"> no</font>

117
00:04:17,579 --> 00:04:20,668
<font color="#E5E5E5">that's not an entry point</font><font color="#CCCCCC"> for a function</font>

118
00:04:19,620 --> 00:04:22,800
so therefore I'm<font color="#E5E5E5"> going to throw an</font>

119
00:04:20,668 --> 00:04:25,469
exception<font color="#E5E5E5"> and terminate the process it's</font>

120
00:04:22,800 --> 00:04:27,130
a pretty<font color="#CCCCCC"> effective control so much that</font>

121
00:04:25,470 --> 00:04:29,440
<font color="#E5E5E5">Microsoft believes that</font>

122
00:04:27,130 --> 00:04:31,600
discontinuing the enhanced mitigation

123
00:04:29,440 --> 00:04:34,750
experience toolkit in July<font color="#E5E5E5"> of 2018</font>

124
00:04:31,600 --> 00:04:36,460
is heavily mitigated by control<font color="#E5E5E5"> flow</font>

125
00:04:34,750 --> 00:04:37,930
<font color="#E5E5E5">garden there's a lot of research</font><font color="#CCCCCC"> going</font>

126
00:04:36,460 --> 00:04:40,539
on now in the<font color="#CCCCCC"> last couple years on</font>

127
00:04:37,930 --> 00:04:42,100
<font color="#E5E5E5">bypassing control flow</font><font color="#CCCCCC"> card and</font><font color="#E5E5E5"> we've</font>

128
00:04:40,540 --> 00:04:43,990
got newer controls like edge detection

129
00:04:42,100 --> 00:04:45,880
<font color="#E5E5E5">and things like that and control flow</font>

130
00:04:43,990 --> 00:04:47,770
integrity and<font color="#CCCCCC"> shadows stacks all these</font>

131
00:04:45,880 --> 00:04:50,110
things coming soon that<font color="#CCCCCC"> we'll have to</font>

132
00:04:47,770 --> 00:04:51,849
deal<font color="#CCCCCC"> with as</font><font color="#E5E5E5"> well so my point again is</font>

133
00:04:50,110 --> 00:04:53,500
control flow guard is supported<font color="#E5E5E5"> on</font>

134
00:04:51,850 --> 00:04:55,240
<font color="#E5E5E5">Windows 10 and a back ported it to</font>

135
00:04:53,500 --> 00:04:56,740
<font color="#E5E5E5">Windows 8 but it's not supported</font><font color="#CCCCCC"> on</font>

136
00:04:55,240 --> 00:04:59,860
Windows 7<font color="#E5E5E5"> I don't think it ever will be</font>

137
00:04:56,740 --> 00:05:02,230
<font color="#E5E5E5">so there's a lot of</font><font color="#CCCCCC"> inherent</font><font color="#E5E5E5"> lacking in</font>

138
00:04:59,860 --> 00:05:04,750
the kernel for exploit mitigations and

139
00:05:02,230 --> 00:05:06,640
the like<font color="#E5E5E5"> that you can't do anything</font>

140
00:05:04,750 --> 00:05:07,870
about until<font color="#E5E5E5"> you upgrade to Windows 10 so</font>

141
00:05:06,640 --> 00:05:09,969
<font color="#E5E5E5">that's the big push but as you can</font><font color="#CCCCCC"> see</font>

142
00:05:07,870 --> 00:05:11,530
<font color="#E5E5E5">half</font><font color="#CCCCCC"> the world which that translates I'm</font>

143
00:05:09,970 --> 00:05:14,470
sure<font color="#E5E5E5"> the billions of computers are</font>

144
00:05:11,530 --> 00:05:16,900
running<font color="#CCCCCC"> Windows 7 Windows XP is still at</font>

145
00:05:14,470 --> 00:05:19,870
seven point<font color="#E5E5E5"> four four percent so ATM</font>

146
00:05:16,900 --> 00:05:21,940
machines<font color="#E5E5E5"> industrial control environments</font>

147
00:05:19,870 --> 00:05:24,010
<font color="#E5E5E5">some government environment still there</font>

148
00:05:21,940 --> 00:05:26,650
still<font color="#CCCCCC"> there a lot</font><font color="#E5E5E5"> of video game players</font>

149
00:05:24,010 --> 00:05:28,330
in China intentionally stay on XP so

150
00:05:26,650 --> 00:05:30,250
that the<font color="#E5E5E5"> video game companies like Riot</font>

151
00:05:28,330 --> 00:05:31,870
Games for example have to support<font color="#E5E5E5"> it</font>

152
00:05:30,250 --> 00:05:33,580
<font color="#E5E5E5">then it makes it easier</font><font color="#CCCCCC"> to hack so</font>

153
00:05:31,870 --> 00:05:35,110
things<font color="#E5E5E5"> like that you'll see</font><font color="#CCCCCC"> this does</font>

154
00:05:33,580 --> 00:05:37,870
not up<font color="#E5E5E5"> fair sadly and I don't think</font><font color="#CCCCCC"> it</font>

155
00:05:35,110 --> 00:05:40,240
ever<font color="#CCCCCC"> has</font><font color="#E5E5E5"> been up there the two people</font>

156
00:05:37,870 --> 00:05:43,800
just had some bad<font color="#CCCCCC"> news this month with</font>

157
00:05:40,240 --> 00:05:43,800
<font color="#E5E5E5">the</font><font color="#CCCCCC"> end-of-life</font><font color="#E5E5E5"> for Vista who used this</font>

158
00:05:44,370 --> 00:05:48,310
so real quick application patching

159
00:05:46,870 --> 00:05:51,160
versus<font color="#E5E5E5"> OS patching we're going to look</font>

160
00:05:48,310 --> 00:05:53,140
at operating system and library and

161
00:05:51,160 --> 00:05:55,660
Driver patches<font color="#E5E5E5"> to specifically the</font>

162
00:05:53,140 --> 00:05:57,940
Windows operating<font color="#E5E5E5"> system</font><font color="#CCCCCC"> Microsoft had</font>

163
00:05:55,660 --> 00:06:00,790
<font color="#CCCCCC">Patch Tuesday for a long time back as</font>

164
00:05:57,940 --> 00:06:02,410
far<font color="#E5E5E5"> as like</font><font color="#CCCCCC"> 2002 2003 when</font><font color="#E5E5E5"> Bill Gates</font>

165
00:06:00,790 --> 00:06:03,970
sent out the trustworthy computing memo

166
00:06:02,410 --> 00:06:06,100
and<font color="#E5E5E5"> Microsoft kicked off the whole</font>

167
00:06:03,970 --> 00:06:09,580
<font color="#E5E5E5">security development</font><font color="#CCCCCC"> lifecycle process</font>

168
00:06:06,100 --> 00:06:11,710
and it's it's<font color="#E5E5E5"> been very useful it's</font>

169
00:06:09,580 --> 00:06:13,419
helpful<font color="#E5E5E5"> for administrators to know that</font>

170
00:06:11,710 --> 00:06:15,340
patches are going to be coming out at a

171
00:06:13,420 --> 00:06:17,590
specific time<font color="#CCCCCC"> each months they can</font><font color="#E5E5E5"> plan</font>

172
00:06:15,340 --> 00:06:19,690
for it<font color="#E5E5E5"> the newer models that they want</font>

173
00:06:17,590 --> 00:06:21,099
to<font color="#E5E5E5"> roll to are of course it's cumulative</font>

174
00:06:19,690 --> 00:06:23,560
<font color="#CCCCCC">they want to be able to push</font><font color="#E5E5E5"> these</font>

175
00:06:21,100 --> 00:06:26,800
updates constantly and<font color="#E5E5E5"> it's Windows as a</font>

176
00:06:23,560 --> 00:06:28,660
service now which makes<font color="#E5E5E5"> life a little</font>

177
00:06:26,800 --> 00:06:31,060
bit more<font color="#CCCCCC"> difficult potentially if</font>

178
00:06:28,660 --> 00:06:33,040
there's constantly patches rolling out

179
00:06:31,060 --> 00:06:34,300
and you've<font color="#CCCCCC"> got to push them</font><font color="#E5E5E5"> out and if</font>

180
00:06:33,040 --> 00:06:36,790
things<font color="#E5E5E5"> break things all that fun stuff</font>

181
00:06:34,300 --> 00:06:38,290
<font color="#CCCCCC">but anyway application patches will</font>

182
00:06:36,790 --> 00:06:39,640
really not focus too<font color="#CCCCCC"> much on but I'm</font>

183
00:06:38,290 --> 00:06:40,389
<font color="#E5E5E5">going to do some</font><font color="#CCCCCC"> demonstrations of</font>

184
00:06:39,640 --> 00:06:42,128
binary

185
00:06:40,389 --> 00:06:43,389
and you could do<font color="#E5E5E5"> that against</font>

186
00:06:42,129 --> 00:06:45,310
application<font color="#CCCCCC"> it's the problem with</font>

187
00:06:43,389 --> 00:06:47,349
application binary dipping is there's

188
00:06:45,310 --> 00:06:49,360
usually<font color="#E5E5E5"> so many changes</font><font color="#CCCCCC"> that are</font>

189
00:06:47,349 --> 00:06:51,490
unrelated<font color="#CCCCCC"> to security vulnerabilities</font>

190
00:06:49,360 --> 00:06:53,830
<font color="#CCCCCC">that it's just noise and it kind of</font>

191
00:06:51,490 --> 00:06:56,500
defeats<font color="#E5E5E5"> the</font><font color="#CCCCCC"> purpose of</font><font color="#E5E5E5"> doing binary</font>

192
00:06:53,830 --> 00:06:58,539
<font color="#E5E5E5">dipping but not always some</font>

193
00:06:56,500 --> 00:07:00,129
<font color="#CCCCCC">organizations will</font><font color="#E5E5E5"> make it clear as</font><font color="#CCCCCC"> to</font>

194
00:06:58,539 --> 00:07:01,930
<font color="#E5E5E5">what a patch is for like this is a</font>

195
00:07:00,129 --> 00:07:04,150
security<font color="#E5E5E5"> update to address a flash</font>

196
00:07:01,930 --> 00:07:07,030
vulnerability<font color="#CCCCCC"> other ones are not</font><font color="#E5E5E5"> so</font>

197
00:07:04,150 --> 00:07:08,799
clear<font color="#CCCCCC"> if</font><font color="#E5E5E5"> you look at</font><font color="#CCCCCC"> Apple</font><font color="#E5E5E5"> and Oracle or</font>

198
00:07:07,030 --> 00:07:10,508
whoever<font color="#CCCCCC"> else versus</font><font color="#E5E5E5"> Microsoft you can</font>

199
00:07:08,800 --> 00:07:13,360
see differences Oracle typically we<font color="#CCCCCC"> have</font>

200
00:07:10,509 --> 00:07:15,430
<font color="#E5E5E5">our quarterly updates so Patch Tuesday</font>

201
00:07:13,360 --> 00:07:16,810
<font color="#E5E5E5">been pretty much talking</font><font color="#CCCCCC"> about</font><font color="#E5E5E5"> that</font>

202
00:07:15,430 --> 00:07:18,969
<font color="#E5E5E5">already the idea</font><font color="#CCCCCC"> was to simplify</font><font color="#E5E5E5"> the</font>

203
00:07:16,810 --> 00:07:20,199
patching process<font color="#E5E5E5"> but it's understandable</font>

204
00:07:18,969 --> 00:07:22,300
<font color="#E5E5E5">that there's going to be out-of-band</font>

205
00:07:20,199 --> 00:07:24,189
patches when there are emergencies and

206
00:07:22,300 --> 00:07:26,379
<font color="#E5E5E5">zero days discovered in the wild</font><font color="#CCCCCC"> as long</font>

207
00:07:24,189 --> 00:07:29,139
as there's<font color="#E5E5E5"> not too many of them but one</font>

208
00:07:26,379 --> 00:07:31,779
thought is if<font color="#E5E5E5"> I'm gonna if I'm a bad guy</font>

209
00:07:29,139 --> 00:07:33,550
<font color="#E5E5E5">and I figure out discover a zero day and</font>

210
00:07:31,779 --> 00:07:34,900
I want to use it<font color="#E5E5E5"> it makes sense for me</font>

211
00:07:33,550 --> 00:07:37,270
<font color="#CCCCCC">to start using</font><font color="#E5E5E5"> it on Patch Tuesday</font>

212
00:07:34,900 --> 00:07:39,310
<font color="#CCCCCC">because then I can assume</font><font color="#E5E5E5"> that it might</font>

213
00:07:37,270 --> 00:07:43,180
<font color="#CCCCCC">take Microsoft up to another month</font><font color="#E5E5E5"> to</font>

214
00:07:39,310 --> 00:07:46,180
<font color="#CCCCCC">actually pass that vulnerability so</font>

215
00:07:43,180 --> 00:07:48,159
exploits are sometimes released days the

216
00:07:46,180 --> 00:07:49,330
days after now you might say well<font color="#E5E5E5"> I</font>

217
00:07:48,159 --> 00:07:50,710
<font color="#CCCCCC">don't hear</font><font color="#E5E5E5"> much about it and that's</font>

218
00:07:49,330 --> 00:07:53,710
because<font color="#CCCCCC"> there's a price tag on that</font>

219
00:07:50,710 --> 00:07:56,948
if Patch Tuesday occurs and I download

220
00:07:53,710 --> 00:07:58,388
the<font color="#E5E5E5"> update and I can quickly hone in on</font>

221
00:07:56,949 --> 00:08:00,639
code changes<font color="#CCCCCC"> and identify the</font>

222
00:07:58,389 --> 00:08:02,919
vulnerability<font color="#CCCCCC"> and get a working exploit</font>

223
00:08:00,639 --> 00:08:05,020
which is hard but if you can do<font color="#E5E5E5"> that</font>

224
00:08:02,919 --> 00:08:07,029
<font color="#E5E5E5">quickly and it's lucrative if it's</font>

225
00:08:05,020 --> 00:08:10,060
something like<font color="#E5E5E5"> Microsoft Office where</font>

226
00:08:07,029 --> 00:08:11,740
you can do a client-side exploit<font color="#CCCCCC"> you're</font>

227
00:08:10,060 --> 00:08:13,930
hoping<font color="#E5E5E5"> that organizations and people</font>

228
00:08:11,740 --> 00:08:17,169
users whatever aren't patching quickly

229
00:08:13,930 --> 00:08:20,620
and the faster you<font color="#CCCCCC"> get that exploit</font>

230
00:08:17,169 --> 00:08:22,508
written the<font color="#E5E5E5"> more value so it's the</font>

231
00:08:20,620 --> 00:08:24,069
<font color="#E5E5E5">return on</font><font color="#CCCCCC"> investment is high the closer</font>

232
00:08:22,509 --> 00:08:25,839
to<font color="#CCCCCC"> the date the patch was released and</font>

233
00:08:24,069 --> 00:08:27,490
then as<font color="#E5E5E5"> time goes on</font><font color="#CCCCCC"> more</font><font color="#E5E5E5"> and more</font>

234
00:08:25,839 --> 00:08:30,250
<font color="#E5E5E5">organizations will patch up to date and</font>

235
00:08:27,490 --> 00:08:32,469
<font color="#CCCCCC">that value will decrease</font><font color="#E5E5E5"> so if I go</font>

236
00:08:30,250 --> 00:08:35,260
through<font color="#E5E5E5"> the and take the time to do that</font>

237
00:08:32,469 --> 00:08:37,839
<font color="#CCCCCC">I</font><font color="#E5E5E5"> don't</font><font color="#CCCCCC"> just go back on</font><font color="#E5E5E5"> another path</font><font color="#CCCCCC"> for</font>

238
00:08:35,260 --> 00:08:39,819
example<font color="#E5E5E5"> if you were to sell say a couple</font>

239
00:08:37,839 --> 00:08:41,380
<font color="#E5E5E5">years ago before Microsoft really spent</font>

240
00:08:39,820 --> 00:08:44,470
a<font color="#E5E5E5"> lot of time trying to mitigate use</font>

241
00:08:41,380 --> 00:08:46,779
after free<font color="#E5E5E5"> exploits if you were to sell</font>

242
00:08:44,470 --> 00:08:48,880
that said like I defense or<font color="#E5E5E5"> VDI</font>

243
00:08:46,779 --> 00:08:50,410
something like that an ethical buyer<font color="#E5E5E5"> you</font>

244
00:08:48,880 --> 00:08:53,589
could get<font color="#CCCCCC"> ten twenty thousand dollars</font>

245
00:08:50,410 --> 00:08:53,889
for it<font color="#E5E5E5"> and nowadays Microsoft spent so</font>

246
00:08:53,589 --> 00:08:55,209
much

247
00:08:53,889 --> 00:08:56,619
<font color="#E5E5E5">I'm trying to</font><font color="#CCCCCC"> mitigate that</font><font color="#E5E5E5"> stuff the</font>

248
00:08:55,209 --> 00:08:58,959
values gone up if you can get around

249
00:08:56,619 --> 00:09:00,879
<font color="#E5E5E5">exploit mitigations like mem GC and</font>

250
00:08:58,959 --> 00:09:02,199
isolated heaps<font color="#E5E5E5"> and other ones then the</font>

251
00:09:00,879 --> 00:09:04,839
value the price<font color="#CCCCCC"> tax</font><font color="#E5E5E5"> is going to be</font>

252
00:09:02,199 --> 00:09:06,488
higher<font color="#E5E5E5"> but back to</font><font color="#CCCCCC"> patch dippin you're</font>

253
00:09:04,839 --> 00:09:08,470
not going to<font color="#E5E5E5"> get that much money it's</font>

254
00:09:06,489 --> 00:09:10,779
not<font color="#E5E5E5"> the same as a</font><font color="#CCCCCC"> zero-day but they call</font>

255
00:09:08,470 --> 00:09:12,669
it one day<font color="#E5E5E5"> exploits because if you can</font>

256
00:09:10,779 --> 00:09:14,529
get a exploit written one day after<font color="#CCCCCC"> the</font>

257
00:09:12,669 --> 00:09:16,419
<font color="#E5E5E5">pass comes out there's a good return</font><font color="#CCCCCC"> and</font>

258
00:09:14,529 --> 00:09:19,089
it's<font color="#CCCCCC"> valuable</font><font color="#E5E5E5"> because again</font>

259
00:09:16,419 --> 00:09:21,009
<font color="#E5E5E5">organizations don't patch quickly often</font>

260
00:09:19,089 --> 00:09:22,419
a lot of<font color="#CCCCCC"> them so you could still get</font>

261
00:09:21,009 --> 00:09:23,980
<font color="#E5E5E5">money for that</font><font color="#CCCCCC"> or you</font><font color="#E5E5E5"> could use it as</font>

262
00:09:22,419 --> 00:09:25,749
part<font color="#CCCCCC"> of</font><font color="#E5E5E5"> your pen test or whatever you're</font>

263
00:09:23,980 --> 00:09:27,699
<font color="#E5E5E5">trying to do out there with this exploit</font>

264
00:09:25,749 --> 00:09:29,350
there's also buyers out<font color="#E5E5E5"> there I'm</font><font color="#CCCCCC"> not</font>

265
00:09:27,699 --> 00:09:31,449
going<font color="#E5E5E5"> to name any companies but there</font>

266
00:09:29,350 --> 00:09:32,859
are companies that make<font color="#E5E5E5"> exploitation</font>

267
00:09:31,449 --> 00:09:35,108
frameworks<font color="#E5E5E5"> we know who they are</font>

268
00:09:32,859 --> 00:09:38,319
<font color="#E5E5E5">and they want to be able to tell others</font>

269
00:09:35,109 --> 00:09:40,119
that<font color="#CCCCCC"> hey I've got more exploits for</font>

270
00:09:38,319 --> 00:09:42,040
privately disclosed vulnerabilities than

271
00:09:40,119 --> 00:09:43,989
any of my<font color="#CCCCCC"> competitors so you should buy</font>

272
00:09:42,040 --> 00:09:45,219
my product<font color="#E5E5E5"> and that makes sense</font><font color="#CCCCCC"> so some</font>

273
00:09:43,989 --> 00:09:47,199
of<font color="#E5E5E5"> these companies have a shopping list</font>

274
00:09:45,220 --> 00:09:52,299
<font color="#E5E5E5">and they'll put price tags</font><font color="#CCCCCC"> next to it</font>

275
00:09:47,199 --> 00:09:55,719
and you<font color="#E5E5E5"> can you can sell it to</font><font color="#CCCCCC"> them so</font>

276
00:09:52,299 --> 00:09:59,019
<font color="#E5E5E5">on Windows as a service real quickly</font>

277
00:09:55,720 --> 00:10:00,249
this started<font color="#E5E5E5"> with Windows 10 primarily</font>

278
00:09:59,019 --> 00:10:02,169
where it was known<font color="#CCCCCC"> that they</font><font color="#E5E5E5"> were going</font>

279
00:10:00,249 --> 00:10:03,879
to<font color="#E5E5E5"> be cumulative updates and I'll talk</font>

280
00:10:02,169 --> 00:10:07,149
more<font color="#E5E5E5"> about what these cumulative updates</font>

281
00:10:03,879 --> 00:10:09,579
mean<font color="#E5E5E5"> a little</font><font color="#CCCCCC"> bit later</font><font color="#E5E5E5"> Windows 7 and 8</font>

282
00:10:07,149 --> 00:10:10,929
they also wanted<font color="#CCCCCC"> to push that those</font>

283
00:10:09,579 --> 00:10:13,179
operating systems towards using

284
00:10:10,929 --> 00:10:15,819
cumulative updates as well they<font color="#E5E5E5"> can I'll</font>

285
00:10:13,179 --> 00:10:18,910
explain more<font color="#CCCCCC"> about</font><font color="#E5E5E5"> that Microsoft they</font>

286
00:10:15,819 --> 00:10:20,979
test<font color="#E5E5E5"> in their lab environment new</font>

287
00:10:18,910 --> 00:10:22,689
features new rollouts<font color="#E5E5E5"> and services</font>

288
00:10:20,980 --> 00:10:26,739
things<font color="#E5E5E5"> like that in the</font><font color="#CCCCCC"> Azure cloud</font><font color="#E5E5E5"> on a</font>

289
00:10:22,689 --> 00:10:29,769
fully patched system they want to know

290
00:10:26,739 --> 00:10:31,299
what state your system is in so that

291
00:10:29,769 --> 00:10:32,889
they know when they do things<font color="#E5E5E5"> in their</font>

292
00:10:31,299 --> 00:10:34,299
lab it's going to match what's out there

293
00:10:32,889 --> 00:10:36,939
in<font color="#E5E5E5"> the real</font><font color="#CCCCCC"> world and that's a</font><font color="#E5E5E5"> hard</font>

294
00:10:34,299 --> 00:10:38,679
<font color="#CCCCCC">thing to</font><font color="#E5E5E5"> do</font><font color="#CCCCCC"> up-to-date</font><font color="#E5E5E5"> organizations get</font>

295
00:10:36,939 --> 00:10:40,238
to pick and choose<font color="#E5E5E5"> when they want</font><font color="#CCCCCC"> to</font>

296
00:10:38,679 --> 00:10:42,309
roll<font color="#E5E5E5"> out patches and which patches they</font>

297
00:10:40,239 --> 00:10:43,480
want to roll out<font color="#CCCCCC"> and Microsoft may never</font>

298
00:10:42,309 --> 00:10:44,618
know what<font color="#E5E5E5"> kind of state you're in it's</font>

299
00:10:43,480 --> 00:10:46,029
kind of like when you're<font color="#E5E5E5"> doing</font>

300
00:10:44,619 --> 00:10:47,519
<font color="#CCCCCC">regression testing or even</font><font color="#E5E5E5"> Quality</font>

301
00:10:46,029 --> 00:10:50,259
<font color="#E5E5E5">Assurance</font><font color="#CCCCCC"> in a development</font><font color="#E5E5E5"> lifecycle</font>

302
00:10:47,519 --> 00:10:52,689
<font color="#CCCCCC">you're trying to test your application</font>

303
00:10:50,259 --> 00:10:55,299
<font color="#CCCCCC">under every condition</font><font color="#E5E5E5"> possible but</font>

304
00:10:52,689 --> 00:10:56,709
that's impossible<font color="#CCCCCC"> so Microsoft wants to</font>

305
00:10:55,299 --> 00:10:59,799
be<font color="#CCCCCC"> able</font><font color="#E5E5E5"> to get as close</font><font color="#CCCCCC"> to that as</font>

306
00:10:56,709 --> 00:11:02,018
possible<font color="#CCCCCC"> these cumulative updates</font><font color="#E5E5E5"> are</font>

307
00:10:59,799 --> 00:11:04,389
supposed<font color="#E5E5E5"> to supersede the prior months</font>

308
00:11:02,019 --> 00:11:07,730
update and with Windows<font color="#E5E5E5"> 10</font><font color="#CCCCCC"> that means</font><font color="#E5E5E5"> if</font>

309
00:11:04,389 --> 00:11:09,440
you were to update<font color="#CCCCCC"> april's 2017</font>

310
00:11:07,730 --> 00:11:11,029
unpatch<font color="#CCCCCC"> windows 7 box it's got</font>

311
00:11:09,440 --> 00:11:13,399
everything<font color="#E5E5E5"> you need to get you up</font><font color="#CCCCCC"> to</font>

312
00:11:11,029 --> 00:11:14,750
speed<font color="#CCCCCC"> you</font><font color="#E5E5E5"> don't have to go start at one</font>

313
00:11:13,399 --> 00:11:16,790
and<font color="#CCCCCC"> then go to</font><font color="#E5E5E5"> two then three then four</font>

314
00:11:14,750 --> 00:11:18,260
<font color="#CCCCCC">it's all there and they're</font><font color="#E5E5E5"> trying to get</font>

315
00:11:16,790 --> 00:11:21,949
the<font color="#CCCCCC"> other operating</font><font color="#E5E5E5"> system to follow</font>

316
00:11:18,260 --> 00:11:23,930
<font color="#CCCCCC">suit as well</font><font color="#E5E5E5"> so this</font><font color="#CCCCCC"> is what I mean it's</font>

317
00:11:21,949 --> 00:11:25,760
a graphic I took<font color="#E5E5E5"> from Microsoft straight</font>

318
00:11:23,930 --> 00:11:28,099
from<font color="#E5E5E5"> their information talking about</font>

319
00:11:25,760 --> 00:11:30,980
this on<font color="#CCCCCC"> the right that's what</font><font color="#E5E5E5"> it looks</font>

320
00:11:28,100 --> 00:11:33,620
like that's those squares<font color="#CCCCCC"> I don't they</font>

321
00:11:30,980 --> 00:11:35,329
are<font color="#E5E5E5"> patches basically and on the left</font>

322
00:11:33,620 --> 00:11:37,250
you can<font color="#CCCCCC"> see that's</font><font color="#E5E5E5"> the typical business</font>

323
00:11:35,329 --> 00:11:38,930
<font color="#CCCCCC">it's what they're saying</font><font color="#E5E5E5"> a typical</font>

324
00:11:37,250 --> 00:11:40,940
business<font color="#E5E5E5"> even</font><font color="#CCCCCC"> though the business</font><font color="#E5E5E5"> is</font>

325
00:11:38,930 --> 00:11:43,519
saying all<font color="#CCCCCC"> of our systems are patched up</font>

326
00:11:40,940 --> 00:11:46,519
<font color="#E5E5E5">to date they may have chosen a</font><font color="#CCCCCC"> certain</font>

327
00:11:43,519 --> 00:11:48,199
updates<font color="#CCCCCC"> to not apply because maybe it</font>

328
00:11:46,519 --> 00:11:50,420
<font color="#E5E5E5">affected something in the organization</font>

329
00:11:48,199 --> 00:11:51,500
they're<font color="#E5E5E5"> afraid</font><font color="#CCCCCC"> to roll it out</font><font color="#E5E5E5"> so even</font>

330
00:11:50,420 --> 00:11:53,719
though they say they're<font color="#CCCCCC"> up-to-date</font>

331
00:11:51,500 --> 00:11:56,300
<font color="#E5E5E5">they're not 100% it's kind of scattered</font>

332
00:11:53,720 --> 00:11:59,600
like that on the<font color="#E5E5E5"> left so that's why it</font>

333
00:11:56,300 --> 00:12:02,990
<font color="#E5E5E5">never gets</font><font color="#CCCCCC"> old or it's</font><font color="#E5E5E5"> always still a</font>

334
00:11:59,600 --> 00:12:05,060
good<font color="#E5E5E5"> thing to do when</font><font color="#CCCCCC"> you're doing</font><font color="#E5E5E5"> a</font>

335
00:12:02,990 --> 00:12:06,920
penetration<font color="#E5E5E5"> test to use things</font><font color="#CCCCCC"> like</font>

336
00:12:05,060 --> 00:12:09,229
power up<font color="#E5E5E5"> and those</font><font color="#CCCCCC"> Power Cells</font><font color="#E5E5E5"> scripts</font>

337
00:12:06,920 --> 00:12:10,610
and<font color="#CCCCCC"> things that basically</font><font color="#E5E5E5"> tell us what</font>

338
00:12:09,230 --> 00:12:11,959
<font color="#E5E5E5">kind of vulnerabilities might be there</font>

339
00:12:10,610 --> 00:12:13,959
on the system even if it is patched up

340
00:12:11,959 --> 00:12:16,369
<font color="#E5E5E5">to date it's probably missing something</font>

341
00:12:13,959 --> 00:12:17,810
so these<font color="#CCCCCC"> servicing branches I don't want</font>

342
00:12:16,370 --> 00:12:20,240
to spend much time talking<font color="#CCCCCC"> about this</font>

343
00:12:17,810 --> 00:12:21,888
but again<font color="#E5E5E5"> it's all about they want to</font>

344
00:12:20,240 --> 00:12:24,500
force the updates on you if you ever

345
00:12:21,889 --> 00:12:27,199
<font color="#E5E5E5">play</font><font color="#CCCCCC"> Xbox</font><font color="#E5E5E5"> and there's an update required</font>

346
00:12:24,500 --> 00:12:29,000
<font color="#E5E5E5">you can't log on to Xbox Live until you</font>

347
00:12:27,199 --> 00:12:31,969
apply<font color="#E5E5E5"> that update they can do that with</font>

348
00:12:29,000 --> 00:12:33,949
Xbox and<font color="#E5E5E5"> they'll log you off until you</font>

349
00:12:31,970 --> 00:12:35,630
apply<font color="#E5E5E5"> it that's what they want to do</font>

350
00:12:33,949 --> 00:12:37,609
here and again it's all about<font color="#E5E5E5"> making</font>

351
00:12:35,630 --> 00:12:39,170
<font color="#CCCCCC">people</font><font color="#E5E5E5"> more secure and getting them in</font>

352
00:12:37,610 --> 00:12:41,089
<font color="#E5E5E5">that known good state so they know their</font>

353
00:12:39,170 --> 00:12:43,180
features<font color="#CCCCCC"> are going</font><font color="#E5E5E5"> to work so they have</font>

354
00:12:41,089 --> 00:12:45,410
this<font color="#E5E5E5"> current branch which is good for</font>

355
00:12:43,180 --> 00:12:46,939
developers and things like<font color="#CCCCCC"> that who need</font>

356
00:12:45,410 --> 00:12:48,469
to test the applications to<font color="#E5E5E5"> make sure</font>

357
00:12:46,940 --> 00:12:50,149
everything<font color="#E5E5E5"> looks good</font><font color="#CCCCCC"> for compatibility</font>

358
00:12:48,470 --> 00:12:51,529
issues<font color="#E5E5E5"> they've got the current branch</font>

359
00:12:50,149 --> 00:12:54,199
for business which would be your<font color="#E5E5E5"> typical</font>

360
00:12:51,529 --> 00:12:56,540
organization<font color="#CCCCCC"> that's what Microsoft wants</font>

361
00:12:54,199 --> 00:13:00,709
you to be under so<font color="#CCCCCC"> that everything is</font><font color="#E5E5E5"> is</font>

362
00:12:56,540 --> 00:13:02,719
<font color="#CCCCCC">up-to-date and</font><font color="#E5E5E5"> you've got some ability</font>

363
00:13:00,709 --> 00:13:04,250
to defer patch updates but not much it's

364
00:13:02,720 --> 00:13:05,870
like<font color="#E5E5E5"> 30 days or something like</font><font color="#CCCCCC"> that but</font>

365
00:13:04,250 --> 00:13:07,610
<font color="#E5E5E5">this everything I'm saying could change</font>

366
00:13:05,870 --> 00:13:08,839
it's been<font color="#E5E5E5"> changing every month and it's</font>

367
00:13:07,610 --> 00:13:10,940
<font color="#E5E5E5">complicated and people</font><font color="#CCCCCC"> are getting</font>

368
00:13:08,839 --> 00:13:12,920
<font color="#CCCCCC">frustrated</font><font color="#E5E5E5"> the other one down at the</font>

369
00:13:10,940 --> 00:13:15,170
<font color="#E5E5E5">bottom long-term servicing branch that</font>

370
00:13:12,920 --> 00:13:16,279
would be you<font color="#E5E5E5"> can defer a couple years</font>

371
00:13:15,170 --> 00:13:19,430
and that would be on embedded systems

372
00:13:16,279 --> 00:13:20,330
<font color="#CCCCCC">like</font><font color="#E5E5E5"> MRI machines or maybe ATM machines</font>

373
00:13:19,430 --> 00:13:24,109
because you know that's<font color="#E5E5E5"> good</font>

374
00:13:20,330 --> 00:13:25,970
and things like<font color="#CCCCCC"> that Pat's distribution</font>

375
00:13:24,110 --> 00:13:29,390
<font color="#E5E5E5">this can</font><font color="#CCCCCC"> change as well it's all very</font>

376
00:13:25,970 --> 00:13:31,400
<font color="#CCCCCC">live state right now windows update that</font>

377
00:13:29,390 --> 00:13:32,810
when you get<font color="#CCCCCC"> your updates for</font><font color="#E5E5E5"> your</font>

378
00:13:31,400 --> 00:13:35,420
<font color="#E5E5E5">computer you typically have an</font>

379
00:13:32,810 --> 00:13:37,329
organizational patch<font color="#E5E5E5"> management solution</font>

380
00:13:35,420 --> 00:13:40,459
like<font color="#E5E5E5"> W</font><font color="#CCCCCC"> Seuss or something like</font><font color="#E5E5E5"> that and</font>

381
00:13:37,330 --> 00:13:43,130
your workstations are configured to<font color="#E5E5E5"> use</font>

382
00:13:40,460 --> 00:13:44,780
your company's update service<font color="#E5E5E5"> and you</font>

383
00:13:43,130 --> 00:13:47,150
can<font color="#E5E5E5"> push out what we want when</font><font color="#CCCCCC"> we want</font>

384
00:13:44,780 --> 00:13:48,560
it<font color="#E5E5E5"> as an administrator</font><font color="#CCCCCC"> of course</font>

385
00:13:47,150 --> 00:13:50,480
independent systems that they're allowed

386
00:13:48,560 --> 00:13:54,140
can go out to Microsoft and patch

387
00:13:50,480 --> 00:13:56,510
independently and then when<font color="#E5E5E5"> you're</font>

388
00:13:54,140 --> 00:13:57,830
reverse engineering patches so someone

389
00:13:56,510 --> 00:14:00,140
like<font color="#E5E5E5"> myself who wants to get them every</font>

390
00:13:57,830 --> 00:14:01,760
patch Tuesday<font color="#E5E5E5"> we want to be able to go</font>

391
00:14:00,140 --> 00:14:03,439
to a website<font color="#CCCCCC"> and download</font><font color="#E5E5E5"> these patches</font>

392
00:14:01,760 --> 00:14:05,000
<font color="#E5E5E5">and it used</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> be when you would</font>

393
00:14:03,440 --> 00:14:06,410
<font color="#CCCCCC">download the patches the patch you're</font>

394
00:14:05,000 --> 00:14:09,470
looking for tied to a<font color="#CCCCCC"> knowledgebase</font>

395
00:14:06,410 --> 00:14:11,209
<font color="#E5E5E5">number or a</font><font color="#CCCCCC"> CVE</font><font color="#E5E5E5"> would be for that</font>

396
00:14:09,470 --> 00:14:12,710
specific vulnerability and what you're

397
00:14:11,210 --> 00:14:15,410
downloading sometimes it's as small as

398
00:14:12,710 --> 00:14:18,290
100k tiny<font color="#E5E5E5"> little file and it's just</font>

399
00:14:15,410 --> 00:14:20,030
kernel32.dll or just the driver or

400
00:14:18,290 --> 00:14:21,410
whatever that's effective and<font color="#CCCCCC"> that made</font>

401
00:14:20,030 --> 00:14:24,230
life<font color="#E5E5E5"> really</font><font color="#CCCCCC"> easy</font><font color="#E5E5E5"> because then you could</font>

402
00:14:21,410 --> 00:14:25,939
download the new one go to the<font color="#E5E5E5"> prior</font>

403
00:14:24,230 --> 00:14:27,800
months update or at least the most

404
00:14:25,940 --> 00:14:29,870
recent time that that same file was

405
00:14:27,800 --> 00:14:31,640
<font color="#CCCCCC">updated</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> you can disk the - and</font>

406
00:14:29,870 --> 00:14:33,680
<font color="#E5E5E5">that's what I'll demo soon you can dip</font>

407
00:14:31,640 --> 00:14:35,360
them<font color="#E5E5E5"> and you're hoping</font><font color="#CCCCCC"> that very few</font>

408
00:14:33,680 --> 00:14:37,160
changes<font color="#CCCCCC"> for made then it</font><font color="#E5E5E5"> makes it real</font>

409
00:14:35,360 --> 00:14:38,390
it's<font color="#CCCCCC"> like a flashlight pointing at you</font>

410
00:14:37,160 --> 00:14:40,430
it's like<font color="#E5E5E5"> over here and you can see</font>

411
00:14:38,390 --> 00:14:42,439
exactly<font color="#E5E5E5"> what the the code changes are</font>

412
00:14:40,430 --> 00:14:45,109
and<font color="#E5E5E5"> in disassembly and then of course</font>

413
00:14:42,440 --> 00:14:47,420
you can<font color="#CCCCCC"> D compile from</font><font color="#E5E5E5"> there but with</font>

414
00:14:45,110 --> 00:14:48,950
<font color="#E5E5E5">the newer ones it's all rolled up</font>

415
00:14:47,420 --> 00:14:50,599
<font color="#CCCCCC">together</font><font color="#E5E5E5"> and it's kind</font><font color="#CCCCCC"> of ugly and</font><font color="#E5E5E5"> I'll</font>

416
00:14:48,950 --> 00:14:54,980
talk<font color="#CCCCCC"> about a</font><font color="#E5E5E5"> solution there that</font><font color="#CCCCCC"> Greg</font>

417
00:14:50,600 --> 00:14:56,840
<font color="#E5E5E5">Linares came up with so Windows Update</font>

418
00:14:54,980 --> 00:14:59,990
for business is specific to<font color="#E5E5E5"> Windows 10</font>

419
00:14:56,840 --> 00:15:01,730
<font color="#CCCCCC">if you want to go</font><font color="#E5E5E5"> that route so I'm just</font>

420
00:14:59,990 --> 00:15:04,190
<font color="#CCCCCC">moving along here</font><font color="#E5E5E5"> quickly</font><font color="#CCCCCC"> so I can</font><font color="#E5E5E5"> get</font>

421
00:15:01,730 --> 00:15:05,510
<font color="#CCCCCC">to the</font><font color="#E5E5E5"> good stuff but it's important to</font>

422
00:15:04,190 --> 00:15:07,010
understand where<font color="#E5E5E5"> things are going so</font>

423
00:15:05,510 --> 00:15:08,450
reverse engineering updates that's<font color="#E5E5E5"> done</font>

424
00:15:07,010 --> 00:15:10,010
by the<font color="#E5E5E5"> good guys the</font><font color="#CCCCCC"> bad guys and</font>

425
00:15:08,450 --> 00:15:11,900
everybody<font color="#E5E5E5"> in</font><font color="#CCCCCC"> between and of course it's</font>

426
00:15:10,010 --> 00:15:13,430
all<font color="#CCCCCC"> about finding</font><font color="#E5E5E5"> the vulnerability</font><font color="#CCCCCC"> and</font>

427
00:15:11,900 --> 00:15:16,760
being able to<font color="#E5E5E5"> get code execution</font>

428
00:15:13,430 --> 00:15:18,979
<font color="#E5E5E5">sometimes</font><font color="#CCCCCC"> it's easy</font><font color="#E5E5E5"> and I'm saying that</font>

429
00:15:16,760 --> 00:15:21,140
<font color="#E5E5E5">relatively and sometimes it's</font>

430
00:15:18,980 --> 00:15:22,610
ridiculously hard and<font color="#CCCCCC"> time-consuming for</font>

431
00:15:21,140 --> 00:15:26,930
<font color="#CCCCCC">example if you</font><font color="#E5E5E5"> were going</font><font color="#CCCCCC"> to download</font>

432
00:15:22,610 --> 00:15:28,540
<font color="#E5E5E5">edge HTML or MS HTML</font><font color="#CCCCCC"> DLL for internet</font>

433
00:15:26,930 --> 00:15:31,060
<font color="#CCCCCC">explorer 11</font>

434
00:15:28,540 --> 00:15:33,310
and you try<font color="#E5E5E5"> to do a</font><font color="#CCCCCC"> diff on that a lot</font>

435
00:15:31,060 --> 00:15:36,640
of<font color="#E5E5E5"> times there's anywhere</font><font color="#CCCCCC"> from 10 to 50</font>

436
00:15:33,310 --> 00:15:38,410
patches security<font color="#CCCCCC"> fixes in that</font><font color="#E5E5E5"> one DLL</font>

437
00:15:36,640 --> 00:15:40,510
for the browser<font color="#CCCCCC"> to deal with things</font><font color="#E5E5E5"> like</font>

438
00:15:38,410 --> 00:15:44,079
<font color="#E5E5E5">use after free or type confusion bugs</font>

439
00:15:40,510 --> 00:15:46,000
and doing a binary<font color="#CCCCCC"> diff of that it's</font>

440
00:15:44,080 --> 00:15:48,010
it's just<font color="#CCCCCC"> a nightmare</font><font color="#E5E5E5"> it's you're trying</font>

441
00:15:46,000 --> 00:15:50,020
<font color="#E5E5E5">to find the code changes but there's so</font>

442
00:15:48,010 --> 00:15:51,819
many code changes that it becomes hard

443
00:15:50,020 --> 00:15:54,370
<font color="#E5E5E5">so it's easier when you're doing things</font>

444
00:15:51,820 --> 00:15:55,330
that<font color="#E5E5E5"> are</font><font color="#CCCCCC"> not browsers</font><font color="#E5E5E5"> and such but it's</font>

445
00:15:54,370 --> 00:15:59,260
still<font color="#CCCCCC"> very lucrative</font>

446
00:15:55,330 --> 00:16:01,180
<font color="#E5E5E5">you can also diff drivers</font><font color="#CCCCCC"> the nice</font><font color="#E5E5E5"> thing</font>

447
00:15:59,260 --> 00:16:03,400
about a lot of<font color="#E5E5E5"> Microsoft products is</font>

448
00:16:01,180 --> 00:16:05,829
they give you<font color="#CCCCCC"> the symbols so the symbols</font>

449
00:16:03,400 --> 00:16:07,990
are the function names and internally

450
00:16:05,830 --> 00:16:09,340
when our programmers<font color="#E5E5E5"> writing code they</font>

451
00:16:07,990 --> 00:16:10,900
name the functions<font color="#E5E5E5"> things that are</font>

452
00:16:09,340 --> 00:16:13,660
<font color="#CCCCCC">useful that</font><font color="#E5E5E5"> are meaningful</font><font color="#CCCCCC"> to people</font>

453
00:16:10,900 --> 00:16:15,520
like load cursors and<font color="#E5E5E5"> icons and we know</font>

454
00:16:13,660 --> 00:16:17,170
what<font color="#E5E5E5"> that function does but once we</font>

455
00:16:15,520 --> 00:16:18,730
compile<font color="#CCCCCC"> that we don't want people</font><font color="#E5E5E5"> to</font>

456
00:16:17,170 --> 00:16:20,650
<font color="#CCCCCC">easily reverse engineer</font><font color="#E5E5E5"> and know what</font>

457
00:16:18,730 --> 00:16:22,660
that function<font color="#E5E5E5"> does</font><font color="#CCCCCC"> so we strip</font><font color="#E5E5E5"> it and</font>

458
00:16:20,650 --> 00:16:24,010
then when someone's looking<font color="#CCCCCC"> at it all</font>

459
00:16:22,660 --> 00:16:25,510
they get<font color="#E5E5E5"> is</font><font color="#CCCCCC"> a memory address and they</font>

460
00:16:24,010 --> 00:16:27,250
have no idea<font color="#CCCCCC"> what that</font><font color="#E5E5E5"> function does</font>

461
00:16:25,510 --> 00:16:28,780
well Microsoft<font color="#E5E5E5"> where a lot of their</font>

462
00:16:27,250 --> 00:16:30,790
products will provide us with the

463
00:16:28,780 --> 00:16:32,770
<font color="#E5E5E5">symbols make it download them and we get</font>

464
00:16:30,790 --> 00:16:34,719
<font color="#E5E5E5">to see all those internal function names</font>

465
00:16:32,770 --> 00:16:36,310
which makes life a lot easier<font color="#CCCCCC"> I know</font>

466
00:16:34,720 --> 00:16:37,750
most<font color="#E5E5E5"> people that reverse engineer</font>

467
00:16:36,310 --> 00:16:41,439
malware would love to have the symbols

468
00:16:37,750 --> 00:16:43,960
<font color="#E5E5E5">but when they don't have to give you</font>

469
00:16:41,440 --> 00:16:46,570
symbols they don't like for<font color="#E5E5E5"> Microsoft</font>

470
00:16:43,960 --> 00:16:48,940
<font color="#E5E5E5">Office suite and such they the developer</font>

471
00:16:46,570 --> 00:16:51,160
in a typical<font color="#CCCCCC"> organization</font><font color="#E5E5E5"> who's writing</font>

472
00:16:48,940 --> 00:16:53,560
an application<font color="#CCCCCC"> to work on Windows</font>

473
00:16:51,160 --> 00:16:55,810
doesn't<font color="#E5E5E5"> need the symbols for things like</font>

474
00:16:53,560 --> 00:16:57,550
<font color="#E5E5E5">office but they do need symbols for</font>

475
00:16:55,810 --> 00:17:00,969
things like ntdll because that's the

476
00:16:57,550 --> 00:17:02,979
gateway into<font color="#CCCCCC"> the</font><font color="#E5E5E5"> kernel</font><font color="#CCCCCC"> so reversing</font>

477
00:17:00,970 --> 00:17:04,390
patches it's a very acquired skill if

478
00:17:02,980 --> 00:17:07,120
you want to get<font color="#E5E5E5"> into it it's best to</font>

479
00:17:04,390 --> 00:17:09,370
start off<font color="#E5E5E5"> simple and then</font><font color="#CCCCCC"> ramped up i</font>

480
00:17:07,119 --> 00:17:11,709
joking and joke and<font color="#CCCCCC"> say all the time</font>

481
00:17:09,369 --> 00:17:13,179
you've got to suffer<font color="#E5E5E5"> through it like we</font>

482
00:17:11,710 --> 00:17:15,010
all did when learning<font color="#E5E5E5"> how to reverse</font>

483
00:17:13,180 --> 00:17:16,660
engineer there<font color="#E5E5E5"> is no magic course or</font>

484
00:17:15,010 --> 00:17:19,060
anything that<font color="#E5E5E5"> can make you an expert at</font>

485
00:17:16,660 --> 00:17:20,890
programming<font color="#E5E5E5"> in C++</font><font color="#CCCCCC"> you could be</font>

486
00:17:19,060 --> 00:17:22,540
programming<font color="#CCCCCC"> in C++ for 10 years and</font>

487
00:17:20,890 --> 00:17:26,530
<font color="#CCCCCC">still not be an</font><font color="#E5E5E5"> expert at</font><font color="#CCCCCC"> it because</font>

488
00:17:22,540 --> 00:17:28,629
it's a<font color="#E5E5E5"> complicated language so obtaining</font>

489
00:17:26,530 --> 00:17:30,879
patches up until this month<font color="#E5E5E5"> because like</font>

490
00:17:28,630 --> 00:17:32,470
<font color="#CCCCCC">I said it changes constantly lately</font><font color="#E5E5E5"> you</font>

491
00:17:30,880 --> 00:17:34,780
would<font color="#E5E5E5"> just go to tech nap</font><font color="#CCCCCC"> as I mentioned</font>

492
00:17:32,470 --> 00:17:36,310
earlier and<font color="#E5E5E5"> you could type in like the</font>

493
00:17:34,780 --> 00:17:39,490
easiest<font color="#E5E5E5"> way is go to</font><font color="#CCCCCC"> Google</font><font color="#E5E5E5"> and you just</font>

494
00:17:36,310 --> 00:17:41,110
type in<font color="#CCCCCC"> MS 1701 zero and it would</font>

495
00:17:39,490 --> 00:17:43,029
take you straight to<font color="#CCCCCC"> the TechNet</font><font color="#E5E5E5"> link</font>

496
00:17:41,110 --> 00:17:45,699
for that specific update like you're

497
00:17:43,029 --> 00:17:48,340
seeing<font color="#E5E5E5"> up here</font><font color="#CCCCCC"> this one's for ms 1700</font>

498
00:17:45,700 --> 00:17:49,419
<font color="#CCCCCC">for and if</font><font color="#E5E5E5"> you were to scroll down you</font>

499
00:17:48,340 --> 00:17:52,059
would see the patches

500
00:17:49,419 --> 00:17:52,419
<font color="#E5E5E5">that you could download now it used to</font>

501
00:17:52,059 --> 00:17:54,100
be

502
00:17:52,419 --> 00:17:56,890
those were the patches for that

503
00:17:54,100 --> 00:17:59,469
specifically a snubber that specific

504
00:17:56,890 --> 00:18:02,260
vulnerability<font color="#E5E5E5"> but now it's cumulative</font><font color="#CCCCCC"> so</font>

505
00:17:59,470 --> 00:18:04,570
you can't<font color="#E5E5E5"> just download typically one</font>

506
00:18:02,260 --> 00:18:06,580
patch you're getting every patch<font color="#E5E5E5"> that's</font>

507
00:18:04,570 --> 00:18:08,408
associated with that month's update<font color="#E5E5E5"> or</font>

508
00:18:06,580 --> 00:18:10,809
if<font color="#CCCCCC"> you're dealing</font><font color="#E5E5E5"> with Windows 10 and</font>

509
00:18:08,409 --> 00:18:14,110
where Microsoft's going forward<font color="#E5E5E5"> this</font>

510
00:18:10,809 --> 00:18:15,730
<font color="#E5E5E5">changed it was October 2016 when</font>

511
00:18:14,110 --> 00:18:17,439
Microsoft tried to roll this same kind

512
00:18:15,730 --> 00:18:19,750
<font color="#CCCCCC">of cumulative updates out for Windows 7</font>

513
00:18:17,440 --> 00:18:22,360
<font color="#CCCCCC">and Windows 8 and the idea is if you</font>

514
00:18:19,750 --> 00:18:24,760
<font color="#CCCCCC">were to</font><font color="#E5E5E5"> get the patch in October</font>

515
00:18:22,360 --> 00:18:26,529
then you're downloading<font color="#CCCCCC"> all the patches</font>

516
00:18:24,760 --> 00:18:29,559
in<font color="#CCCCCC"> one file the security fixes anyway</font>

517
00:18:26,529 --> 00:18:32,100
and then when you go to November's patch

518
00:18:29,559 --> 00:18:34,270
update it's got October and November

519
00:18:32,100 --> 00:18:35,439
<font color="#E5E5E5">patches and then so you would think the</font>

520
00:18:34,270 --> 00:18:37,389
files are<font color="#CCCCCC"> going</font><font color="#E5E5E5"> to get bigger each time</font>

521
00:18:35,440 --> 00:18:39,039
<font color="#CCCCCC">it's</font><font color="#E5E5E5"> been kind of inconsistent but</font>

522
00:18:37,390 --> 00:18:41,260
Windows 10 has always been<font color="#E5E5E5"> that way</font>

523
00:18:39,039 --> 00:18:43,809
<font color="#E5E5E5">Windows 10 has feature updates and</font>

524
00:18:41,260 --> 00:18:45,760
security<font color="#CCCCCC"> updates</font><font color="#E5E5E5"> in the same cumulative</font>

525
00:18:43,809 --> 00:18:48,908
<font color="#CCCCCC">update and they're</font><font color="#E5E5E5"> very large as I'll</font>

526
00:18:45,760 --> 00:18:50,980
show<font color="#CCCCCC"> you in a moment</font><font color="#E5E5E5"> so we could go here</font>

527
00:18:48,909 --> 00:18:52,450
choose our desired operating<font color="#E5E5E5"> system that</font>

528
00:18:50,980 --> 00:18:53,710
<font color="#E5E5E5">we want to download the patch for and</font>

529
00:18:52,450 --> 00:18:56,740
then we've got the patch we'd have to

530
00:18:53,710 --> 00:18:58,690
extract<font color="#CCCCCC"> at them this month they changed</font>

531
00:18:56,740 --> 00:19:01,000
it again<font color="#CCCCCC"> and now you've</font><font color="#E5E5E5"> got to go to</font><font color="#CCCCCC"> MSR</font>

532
00:18:58,690 --> 00:19:03,010
<font color="#CCCCCC">see that</font><font color="#E5E5E5"> Microsoft comm to see the</font>

533
00:19:01,000 --> 00:19:05,200
updates and get the patches<font color="#E5E5E5"> so this is</font>

534
00:19:03,010 --> 00:19:07,539
the first month<font color="#E5E5E5"> that's changed it's</font>

535
00:19:05,200 --> 00:19:10,510
really complicated<font color="#E5E5E5"> I don't</font><font color="#CCCCCC"> know why they</font>

536
00:19:07,539 --> 00:19:13,179
did<font color="#CCCCCC"> it this way but there's search bars</font>

537
00:19:10,510 --> 00:19:15,340
and such where you can try<font color="#E5E5E5"> and find the</font>

538
00:19:13,179 --> 00:19:17,289
vulnerability disclosure that you're

539
00:19:15,340 --> 00:19:20,139
looking for the announcement<font color="#E5E5E5"> but it's a</font>

540
00:19:17,289 --> 00:19:21,730
lot of<font color="#E5E5E5"> noise I mean tons of the same hit</font>

541
00:19:20,140 --> 00:19:23,470
over<font color="#E5E5E5"> and over</font><font color="#CCCCCC"> again I really don't like</font>

542
00:19:21,730 --> 00:19:25,090
this<font color="#E5E5E5"> particular way that they're doing</font>

543
00:19:23,470 --> 00:19:27,130
<font color="#CCCCCC">it</font><font color="#E5E5E5"> right</font><font color="#CCCCCC"> now</font><font color="#E5E5E5"> and hopefully that</font><font color="#CCCCCC"> changes</font>

544
00:19:25,090 --> 00:19:28,899
you could<font color="#E5E5E5"> actually get the vulnerability</font>

545
00:19:27,130 --> 00:19:30,220
<font color="#CCCCCC">information on the bottom link</font><font color="#E5E5E5"> the upper</font>

546
00:19:28,899 --> 00:19:32,289
link is where<font color="#E5E5E5"> you have to go to start</font>

547
00:19:30,220 --> 00:19:34,299
<font color="#E5E5E5">doing your searches and such and then</font>

548
00:19:32,289 --> 00:19:37,289
from there you'll find<font color="#E5E5E5"> a link</font><font color="#CCCCCC"> to be</font><font color="#E5E5E5"> able</font>

549
00:19:34,299 --> 00:19:39,908
<font color="#E5E5E5">to download the actual cumulative update</font>

550
00:19:37,289 --> 00:19:43,419
so types of patches back in the old days

551
00:19:39,909 --> 00:19:44,950
with XP and Windows 2000 2003<font color="#E5E5E5"> they were</font>

552
00:19:43,419 --> 00:19:46,450
<font color="#CCCCCC">executables that it patches you a</font>

553
00:19:44,950 --> 00:19:48,279
download<font color="#CCCCCC"> it's just an executable you</font>

554
00:19:46,450 --> 00:19:50,740
<font color="#CCCCCC">double-click</font><font color="#E5E5E5"> it and installs it replaces</font>

555
00:19:48,279 --> 00:19:52,840
<font color="#E5E5E5">the</font><font color="#CCCCCC"> old file and back puts the other one</font>

556
00:19:50,740 --> 00:19:53,380
to a<font color="#E5E5E5"> backup location</font><font color="#CCCCCC"> and you would</font>

557
00:19:52,840 --> 00:19:56,980
extract

558
00:19:53,380 --> 00:19:59,860
with the extract<font color="#E5E5E5"> tool in das or command</font>

559
00:19:56,980 --> 00:20:02,440
line<font color="#E5E5E5"> on Windows 7</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> this does</font><font color="#CCCCCC"> seven</font>

560
00:19:59,860 --> 00:20:03,549
<font color="#CCCCCC">eight ten</font><font color="#E5E5E5"> whatever</font><font color="#CCCCCC"> their MSU files and</font>

561
00:20:02,440 --> 00:20:05,320
you've got to extract them with the

562
00:20:03,549 --> 00:20:07,270
expand tool so I'll show<font color="#E5E5E5"> you this in a</font>

563
00:20:05,320 --> 00:20:10,780
moment<font color="#E5E5E5"> here's the command you would run</font>

564
00:20:07,270 --> 00:20:12,850
expand<font color="#CCCCCC"> -</font><font color="#E5E5E5"> F and then use you say expand</font>

565
00:20:10,780 --> 00:20:14,590
everything<font color="#E5E5E5"> give it the</font><font color="#CCCCCC"> MSU file</font><font color="#E5E5E5"> and then</font>

566
00:20:12,850 --> 00:20:16,270
once you do that there's a cabinet file

567
00:20:14,590 --> 00:20:19,059
<font color="#E5E5E5">you would have to then do the same</font>

568
00:20:16,270 --> 00:20:20,320
extraction method on the cabinet file<font color="#E5E5E5"> so</font>

569
00:20:19,059 --> 00:20:22,629
<font color="#E5E5E5">here you can see we're</font><font color="#CCCCCC"> extracting the</font>

570
00:20:20,320 --> 00:20:25,090
cabinet one with the expand tool and

571
00:20:22,630 --> 00:20:26,710
we're running a dir<font color="#E5E5E5"> to look and see what</font>

572
00:20:25,090 --> 00:20:28,030
<font color="#CCCCCC">changes are</font><font color="#E5E5E5"> in there what directories</font>

573
00:20:26,710 --> 00:20:31,630
are in there<font color="#E5E5E5"> you can see there's one for</font>

574
00:20:28,030 --> 00:20:33,940
user pretty<font color="#E5E5E5"> - and one for</font><font color="#CCCCCC"> 132</font><font color="#E5E5E5"> K so 132 K</font>

575
00:20:31,630 --> 00:20:36,880
the driver file it's actually the kernel

576
00:20:33,940 --> 00:20:38,380
side of the windows subsystem<font color="#CCCCCC"> CSRs</font><font color="#E5E5E5"> s</font>

577
00:20:36,880 --> 00:20:41,440
that<font color="#E5E5E5"> XE would be user land side and then</font>

578
00:20:38,380 --> 00:20:43,390
we've got user 32 updated as well<font color="#E5E5E5"> so in</font>

579
00:20:41,440 --> 00:20:46,419
this<font color="#E5E5E5"> next</font><font color="#CCCCCC"> slide I</font><font color="#E5E5E5"> basically just go in</font>

580
00:20:43,390 --> 00:20:48,640
change directory to<font color="#E5E5E5"> the one for user 32</font>

581
00:20:46,419 --> 00:20:51,309
and we run a dir<font color="#CCCCCC"> and you can see there's</font>

582
00:20:48,640 --> 00:20:53,799
the<font color="#E5E5E5"> path right</font><font color="#CCCCCC"> there so user 32 dll</font>

583
00:20:51,309 --> 00:20:56,200
that's the<font color="#E5E5E5"> past file</font><font color="#CCCCCC"> you'd want to dip</font>

584
00:20:53,799 --> 00:20:58,299
<font color="#CCCCCC">that one against a prior update to that</font>

585
00:20:56,200 --> 00:20:59,919
file<font color="#E5E5E5"> they used to make it real easy</font>

586
00:20:58,299 --> 00:21:01,480
<font color="#E5E5E5">where you could go on the site on</font>

587
00:20:59,919 --> 00:21:03,429
<font color="#E5E5E5">TechNet and</font><font color="#CCCCCC"> you could say updates</font>

588
00:21:01,480 --> 00:21:05,230
<font color="#CCCCCC">replaced by you could click on</font><font color="#E5E5E5"> it</font><font color="#CCCCCC"> and</font>

589
00:21:03,429 --> 00:21:07,240
find the<font color="#CCCCCC"> most recent time</font><font color="#E5E5E5"> that that same</font>

590
00:21:05,230 --> 00:21:10,330
file was updated<font color="#CCCCCC"> extract it and dip it</font>

591
00:21:07,240 --> 00:21:12,159
<font color="#E5E5E5">same way so extracting cumulative</font>

592
00:21:10,330 --> 00:21:13,870
updates which is where we're<font color="#CCCCCC"> at today</font><font color="#E5E5E5"> I</font>

593
00:21:12,159 --> 00:21:15,370
was talking<font color="#CCCCCC"> with Gregg</font><font color="#E5E5E5"> Linares who's</font>

594
00:21:13,870 --> 00:21:17,289
laughing<font color="#E5E5E5"> Malthus on Twitter back in</font>

595
00:21:15,370 --> 00:21:19,510
October<font color="#E5E5E5"> and he was working on a</font>

596
00:21:17,289 --> 00:21:21,940
<font color="#E5E5E5">PowerShell script called patch extract</font>

597
00:21:19,510 --> 00:21:23,440
<font color="#E5E5E5">to go through and extract everything out</font>

598
00:21:21,940 --> 00:21:25,270
<font color="#CCCCCC">of these cumulative</font><font color="#E5E5E5"> updates because</font>

599
00:21:23,440 --> 00:21:26,890
again it's a ton of files to<font color="#E5E5E5"> give you an</font>

600
00:21:25,270 --> 00:21:29,408
<font color="#CCCCCC">example</font><font color="#E5E5E5"> you'll see</font><font color="#CCCCCC"> on the next slide err</font>

601
00:21:26,890 --> 00:21:31,780
<font color="#CCCCCC">to the Windows 10</font><font color="#E5E5E5"> one is around a gig</font>

602
00:21:29,409 --> 00:21:34,120
for<font color="#E5E5E5"> 64 bits you're</font><font color="#CCCCCC"> downloading a one gig</font>

603
00:21:31,780 --> 00:21:36,158
cumulative update<font color="#E5E5E5"> file and when you</font>

604
00:21:34,120 --> 00:21:38,590
extract<font color="#E5E5E5"> that there are thousands of</font>

605
00:21:36,159 --> 00:21:40,360
files in there<font color="#E5E5E5"> and making sense of that</font>

606
00:21:38,590 --> 00:21:41,620
and organizing it<font color="#E5E5E5"> and getting rid of all</font>

607
00:21:40,360 --> 00:21:44,260
the garbage<font color="#E5E5E5"> that you don't care about</font>

608
00:21:41,620 --> 00:21:46,000
and<font color="#E5E5E5"> manifest stuff</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> annoying</font>

609
00:21:44,260 --> 00:21:48,370
<font color="#E5E5E5">to do it by hand anyway so he wrote this</font>

610
00:21:46,000 --> 00:21:49,840
<font color="#CCCCCC">pad extract tool and that's exactly what</font>

611
00:21:48,370 --> 00:21:52,178
it does it extracts everything and makes

612
00:21:49,840 --> 00:21:54,850
<font color="#E5E5E5">some put</font><font color="#CCCCCC"> get</font><font color="#E5E5E5"> some</font><font color="#CCCCCC"> organization in there</font>

613
00:21:52,179 --> 00:21:57,970
<font color="#E5E5E5">and then there's also a tool</font><font color="#CCCCCC"> hero called</font>

614
00:21:54,850 --> 00:22:00,219
patch clean patch cleans<font color="#E5E5E5"> quite simple</font>

615
00:21:57,970 --> 00:22:02,110
concept<font color="#CCCCCC"> that goes through the extracted</font>

616
00:22:00,220 --> 00:22:04,990
files<font color="#E5E5E5"> looks for files that have changed</font>

617
00:22:02,110 --> 00:22:06,459
<font color="#CCCCCC">in</font><font color="#E5E5E5"> the last</font><font color="#CCCCCC"> 30 days and puts them</font><font color="#E5E5E5"> into</font>

618
00:22:04,990 --> 00:22:06,990
one directory<font color="#E5E5E5"> that says these are the</font>

619
00:22:06,460 --> 00:22:08,700
ones you<font color="#CCCCCC"> should</font>

620
00:22:06,990 --> 00:22:10,590
care about<font color="#CCCCCC"> because they've been updated</font>

621
00:22:08,700 --> 00:22:12,179
<font color="#E5E5E5">in the last</font><font color="#CCCCCC"> 30 days and then it puts</font>

622
00:22:10,590 --> 00:22:15,240
everything<font color="#E5E5E5"> that's older</font><font color="#CCCCCC"> than 30 days</font>

623
00:22:12,179 --> 00:22:18,090
into an old folder and<font color="#CCCCCC"> that way you're</font>

624
00:22:15,240 --> 00:22:19,230
honing<font color="#E5E5E5"> in on that month updates so</font>

625
00:22:18,090 --> 00:22:21,270
<font color="#E5E5E5">hopefully you</font><font color="#CCCCCC"> see why that's useful</font>

626
00:22:19,230 --> 00:22:23,940
<font color="#CCCCCC">you've got a cumulative update of</font>

627
00:22:21,270 --> 00:22:25,920
thousands of files<font color="#E5E5E5"> tons of patches it</font>

628
00:22:23,940 --> 00:22:27,720
<font color="#E5E5E5">extracts everything makes sense of it</font>

629
00:22:25,920 --> 00:22:29,670
<font color="#CCCCCC">and then you run patch clean so it only</font>

630
00:22:27,720 --> 00:22:31,440
<font color="#E5E5E5">points out the files that have</font><font color="#CCCCCC"> changed</font>

631
00:22:29,670 --> 00:22:33,150
<font color="#E5E5E5">in the</font><font color="#CCCCCC"> last</font><font color="#E5E5E5"> 30 days so</font><font color="#CCCCCC"> you know that</font>

632
00:22:31,440 --> 00:22:36,260
those<font color="#E5E5E5"> are the</font><font color="#CCCCCC"> ones</font><font color="#E5E5E5"> associated with this</font>

633
00:22:33,150 --> 00:22:38,250
month updates so it's very useful<font color="#E5E5E5"> tool</font>

634
00:22:36,260 --> 00:22:41,010
and here's that<font color="#E5E5E5"> example I was talking</font>

635
00:22:38,250 --> 00:22:43,679
<font color="#CCCCCC">about it's one over</font><font color="#E5E5E5"> 1,000 Meg's so it's</font>

636
00:22:41,010 --> 00:22:46,740
<font color="#E5E5E5">almost a gig for</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> 64-bit Windows 10</font>

637
00:22:43,679 --> 00:22:49,290
update that same month so April<font color="#E5E5E5"> Windows</font>

638
00:22:46,740 --> 00:22:51,120
7 update was only around<font color="#E5E5E5"> 100 Meg's so</font>

639
00:22:49,290 --> 00:22:52,950
big difference<font color="#CCCCCC"> in the size</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> that's</font>

640
00:22:51,120 --> 00:22:54,719
because Windows 10 they truly are

641
00:22:52,950 --> 00:22:57,900
<font color="#E5E5E5">accumulative with the features and</font>

642
00:22:54,720 --> 00:23:00,150
<font color="#CCCCCC">everything</font><font color="#E5E5E5"> from the start so</font><font color="#CCCCCC"> pats</font>

643
00:22:57,900 --> 00:23:02,220
extract<font color="#CCCCCC"> I'll just demo this here in a</font>

644
00:23:00,150 --> 00:23:04,050
<font color="#CCCCCC">moment</font><font color="#E5E5E5"> but it takes a while to run it's</font>

645
00:23:02,220 --> 00:23:05,640
expanding and doing<font color="#CCCCCC"> a lot of stuff so</font>

646
00:23:04,050 --> 00:23:07,678
<font color="#CCCCCC">you can</font><font color="#E5E5E5"> expect it to take around 10</font>

647
00:23:05,640 --> 00:23:09,929
<font color="#CCCCCC">minutes depending on how big that file</font>

648
00:23:07,679 --> 00:23:11,280
is that<font color="#E5E5E5"> you're extracting so the one</font>

649
00:23:09,929 --> 00:23:12,510
that I'm going<font color="#CCCCCC"> to do here</font><font color="#E5E5E5"> in a</font><font color="#CCCCCC"> moment</font>

650
00:23:11,280 --> 00:23:13,770
<font color="#E5E5E5">and we'll</font><font color="#CCCCCC"> have to let it</font><font color="#E5E5E5"> run in the</font>

651
00:23:12,510 --> 00:23:15,870
<font color="#CCCCCC">background because it</font><font color="#E5E5E5"> still takes a</font>

652
00:23:13,770 --> 00:23:18,900
couple minutes<font color="#CCCCCC"> will be for</font><font color="#E5E5E5"> Windows 7 so</font>

653
00:23:15,870 --> 00:23:20,309
it'll only be for<font color="#CCCCCC"> that 100 Meg file so</font>

654
00:23:18,900 --> 00:23:22,950
you<font color="#CCCCCC"> would</font><font color="#E5E5E5"> run this PowerShell command</font>

655
00:23:20,309 --> 00:23:25,350
<font color="#E5E5E5">and use the tool and basically tell it</font>

656
00:23:22,950 --> 00:23:27,900
where you want it<font color="#E5E5E5"> to extract to then</font>

657
00:23:25,350 --> 00:23:29,178
when you run patch<font color="#E5E5E5"> clean you can see</font>

658
00:23:27,900 --> 00:23:33,840
that it narrows<font color="#E5E5E5"> it down and says</font>

659
00:23:29,179 --> 00:23:36,720
<font color="#CCCCCC">high-priority</font><font color="#E5E5E5"> folders 16</font><font color="#CCCCCC"> verses 30 810</font>

660
00:23:33,840 --> 00:23:40,020
low priority folders<font color="#E5E5E5"> that's showing you</font>

661
00:23:36,720 --> 00:23:41,340
that<font color="#E5E5E5"> you want to focus on those 16</font>

662
00:23:40,020 --> 00:23:43,950
folders because<font color="#E5E5E5"> those are likely the</font>

663
00:23:41,340 --> 00:23:47,250
<font color="#E5E5E5">ones associated</font><font color="#CCCCCC"> with</font><font color="#E5E5E5"> this</font><font color="#CCCCCC"> month</font><font color="#E5E5E5"> patches</font>

664
00:23:43,950 --> 00:23:53,790
<font color="#E5E5E5">so a huge</font><font color="#CCCCCC"> time-saver right there so</font><font color="#E5E5E5"> I'm</font>

665
00:23:47,250 --> 00:23:55,140
going<font color="#E5E5E5"> to jump</font><font color="#CCCCCC"> over to</font><font color="#E5E5E5"> Windows here and</font>

666
00:23:53,790 --> 00:23:57,600
I've<font color="#CCCCCC"> got a set</font><font color="#E5E5E5"> up and ready</font><font color="#CCCCCC"> to run the</font>

667
00:23:55,140 --> 00:23:59,280
<font color="#E5E5E5">command anyway</font><font color="#CCCCCC"> I need to</font><font color="#E5E5E5"> change</font><font color="#CCCCCC"> my date</font>

668
00:23:57,600 --> 00:24:01,230
because today is not past Tuesday and

669
00:23:59,280 --> 00:24:03,750
<font color="#E5E5E5">you'd want to make sure it's saying 30</font>

670
00:24:01,230 --> 00:24:05,280
days from Patch Tuesday<font color="#E5E5E5"> back or you're</font>

671
00:24:03,750 --> 00:24:07,650
<font color="#E5E5E5">going to miss some so I'm going to</font>

672
00:24:05,280 --> 00:24:14,850
change<font color="#CCCCCC"> my date here to</font><font color="#E5E5E5"> Patch Tuesday</font>

673
00:24:07,650 --> 00:24:17,050
<font color="#E5E5E5">from this month that would be the 11th</font>

674
00:24:14,850 --> 00:24:18,730
analysis command<font color="#E5E5E5"> runs you can see the</font>

675
00:24:17,050 --> 00:24:19,960
<font color="#CCCCCC">knowledge-based number over here you'll</font>

676
00:24:18,730 --> 00:24:23,350
see<font color="#CCCCCC"> a</font><font color="#E5E5E5"> bunch of stuff start to show up</font>

677
00:24:19,960 --> 00:24:24,070
<font color="#E5E5E5">but this again will</font><font color="#CCCCCC"> take some time so</font>

678
00:24:23,350 --> 00:24:26,500
we're<font color="#E5E5E5"> going</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> let it run in the</font>

679
00:24:24,070 --> 00:24:28,659
<font color="#E5E5E5">background</font><font color="#CCCCCC"> and once it's</font><font color="#E5E5E5"> done expanding</font>

680
00:24:26,500 --> 00:24:30,400
everything and cleaning up<font color="#E5E5E5"> then I'll</font>

681
00:24:28,660 --> 00:24:31,840
<font color="#CCCCCC">switch back over to this and we can run</font>

682
00:24:30,400 --> 00:24:34,390
<font color="#E5E5E5">the patch clean tool and see how many</font>

683
00:24:31,840 --> 00:24:36,669
<font color="#E5E5E5">files were left over</font><font color="#CCCCCC"> with</font><font color="#E5E5E5"> it all depends</font>

684
00:24:34,390 --> 00:24:38,350
like<font color="#E5E5E5"> February's patches got skipped if</font>

685
00:24:36,670 --> 00:24:40,240
you remember and<font color="#CCCCCC"> that's because of</font><font color="#E5E5E5"> some</font>

686
00:24:38,350 --> 00:24:42,879
<font color="#E5E5E5">interesting things</font><font color="#CCCCCC"> with the SMB bug and</font>

687
00:24:40,240 --> 00:24:44,980
how<font color="#CCCCCC"> microsoft was informed about said</font>

688
00:24:42,880 --> 00:24:46,930
bug and<font color="#E5E5E5"> so they skipped the month and</font>

689
00:24:44,980 --> 00:24:49,780
<font color="#E5E5E5">march was the next one</font><font color="#CCCCCC"> so March is</font>

690
00:24:46,930 --> 00:24:50,620
update was massive<font color="#E5E5E5"> and we</font><font color="#CCCCCC"> have April's</font>

691
00:24:49,780 --> 00:24:53,830
now of course

692
00:24:50,620 --> 00:24:55,260
so<font color="#E5E5E5"> I'm extracting April's update so all</font>

693
00:24:53,830 --> 00:24:57,490
<font color="#E5E5E5">that's running</font><font color="#CCCCCC"> will go back</font><font color="#E5E5E5"> out here</font>

694
00:24:55,260 --> 00:24:58,810
<font color="#E5E5E5">this would</font><font color="#CCCCCC"> be</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> result though that</font>

695
00:24:57,490 --> 00:25:00,340
I'll show<font color="#E5E5E5"> you in a moment this is</font><font color="#CCCCCC"> not</font>

696
00:24:58,810 --> 00:25:02,409
the same one I'm<font color="#E5E5E5"> extracting now this I</font>

697
00:25:00,340 --> 00:25:04,689
believe is January's updates<font color="#E5E5E5"> but you can</font>

698
00:25:02,410 --> 00:25:07,510
see that we've<font color="#E5E5E5"> got</font><font color="#CCCCCC"> nineteen directories</font>

699
00:25:04,690 --> 00:25:09,010
<font color="#CCCCCC">that have pointed</font><font color="#E5E5E5"> out as interesting so</font>

700
00:25:07,510 --> 00:25:12,090
all those ones that<font color="#E5E5E5"> are put into the old</font>

701
00:25:09,010 --> 00:25:14,770
directory we don't have to care<font color="#CCCCCC"> about</font>

702
00:25:12,090 --> 00:25:15,939
this<font color="#E5E5E5"> right</font><font color="#CCCCCC"> here so a next question while</font>

703
00:25:14,770 --> 00:25:20,230
we're<font color="#CCCCCC"> letting that run in</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> background</font>

704
00:25:15,940 --> 00:25:24,610
is how do you<font color="#E5E5E5"> map an extracted update to</font>

705
00:25:20,230 --> 00:25:27,640
the<font color="#E5E5E5"> KB number or the CVE in other words</font>

706
00:25:24,610 --> 00:25:29,830
if I've got if I'm<font color="#E5E5E5"> left with</font><font color="#CCCCCC"> 20 folders</font>

707
00:25:27,640 --> 00:25:32,260
and those<font color="#E5E5E5"> 20 folders have patched files</font>

708
00:25:29,830 --> 00:25:34,810
in them like dll's and drivers<font color="#E5E5E5"> how do I</font>

709
00:25:32,260 --> 00:25:36,010
know<font color="#E5E5E5"> which ones map to the</font><font color="#CCCCCC"> knowledgebase</font>

710
00:25:34,810 --> 00:25:38,320
number the vulnerability<font color="#CCCCCC"> that I'm</font>

711
00:25:36,010 --> 00:25:40,120
interested<font color="#CCCCCC"> in researching</font><font color="#E5E5E5"> well here's</font>

712
00:25:38,320 --> 00:25:42,040
this an<font color="#E5E5E5"> example where we see a security</font>

713
00:25:40,120 --> 00:25:44,500
bullet and security update<font color="#CCCCCC"> for Microsoft</font>

714
00:25:42,040 --> 00:25:46,570
edge and since we're only left with a

715
00:25:44,500 --> 00:25:49,120
little<font color="#CCCCCC"> bit of a small number</font><font color="#E5E5E5"> of folders</font>

716
00:25:46,570 --> 00:25:52,090
we got to kind of infer so we see a file

717
00:25:49,120 --> 00:25:54,340
<font color="#CCCCCC">there</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> ie HTML rendering and we go in</font>

718
00:25:52,090 --> 00:25:55,899
<font color="#E5E5E5">there and it's</font><font color="#CCCCCC"> edged HTML so common</font>

719
00:25:54,340 --> 00:25:57,970
sense<font color="#E5E5E5"> would have us say well that's</font>

720
00:25:55,900 --> 00:25:59,410
probably<font color="#E5E5E5"> the one associated with that</font>

721
00:25:57,970 --> 00:26:02,080
and I'll show<font color="#CCCCCC"> you another</font><font color="#E5E5E5"> example of</font>

722
00:25:59,410 --> 00:26:03,430
<font color="#E5E5E5">this in a moment</font><font color="#CCCCCC"> with a demo</font><font color="#E5E5E5"> so it's</font>

723
00:26:02,080 --> 00:26:06,340
still running<font color="#E5E5E5"> in the background</font><font color="#CCCCCC"> so we'll</font>

724
00:26:03,430 --> 00:26:10,930
let<font color="#CCCCCC"> that</font><font color="#E5E5E5"> go</font><font color="#CCCCCC"> so while that's</font><font color="#E5E5E5"> happening</font>

725
00:26:06,340 --> 00:26:12,850
I'll explain patch<font color="#CCCCCC"> dippin patch dipping</font>

726
00:26:10,930 --> 00:26:15,100
as I already mentioned is we take one

727
00:26:12,850 --> 00:26:16,570
<font color="#E5E5E5">version of a file and we dip</font><font color="#CCCCCC"> it against</font>

728
00:26:15,100 --> 00:26:17,709
another<font color="#CCCCCC"> version</font><font color="#E5E5E5"> of a file and</font><font color="#CCCCCC"> we're</font>

729
00:26:16,570 --> 00:26:19,570
there's a<font color="#E5E5E5"> bunch of tools that can</font><font color="#CCCCCC"> help</font>

730
00:26:17,710 --> 00:26:21,280
<font color="#E5E5E5">us do this I'll talk about them in a</font>

731
00:26:19,570 --> 00:26:23,980
moment<font color="#E5E5E5"> and I'm</font><font color="#CCCCCC"> going to use</font><font color="#E5E5E5"> bin diff</font>

732
00:26:21,280 --> 00:26:25,360
which was<font color="#E5E5E5"> originally written by Dynamix</font>

733
00:26:23,980 --> 00:26:27,460
which was<font color="#E5E5E5"> Halbert flake or Tomas</font>

734
00:26:25,360 --> 00:26:29,560
<font color="#E5E5E5">DeLeon's company out</font><font color="#CCCCCC"> of Germany</font><font color="#E5E5E5"> but goo</font>

735
00:26:27,460 --> 00:26:31,480
acquire them a<font color="#E5E5E5"> number of years</font><font color="#CCCCCC"> ago so</font>

736
00:26:29,560 --> 00:26:34,030
now<font color="#CCCCCC"> it's owned by</font><font color="#E5E5E5"> them and they</font><font color="#CCCCCC"> release</font>

737
00:26:31,480 --> 00:26:36,640
<font color="#E5E5E5">it for</font><font color="#CCCCCC"> free now which is nice</font><font color="#E5E5E5"> so</font>

738
00:26:34,030 --> 00:26:37,899
security patches are often made<font color="#E5E5E5"> we hope</font>

739
00:26:36,640 --> 00:26:39,100
that they're<font color="#CCCCCC"> not feature updates we</font>

740
00:26:37,900 --> 00:26:40,360
don't want to be<font color="#E5E5E5"> looking at feature</font>

741
00:26:39,100 --> 00:26:42,399
updates because we don't<font color="#E5E5E5"> really care</font>

742
00:26:40,360 --> 00:26:44,770
<font color="#E5E5E5">about those as</font><font color="#CCCCCC"> far as a dip is concerned</font>

743
00:26:42,400 --> 00:26:46,840
<font color="#E5E5E5">when a new version is</font><font color="#CCCCCC"> released it's hard</font>

744
00:26:44,770 --> 00:26:48,730
to know what code changes are<font color="#CCCCCC"> related to</font>

745
00:26:46,840 --> 00:26:50,320
a specific vulnerability sometimes

746
00:26:48,730 --> 00:26:52,540
<font color="#E5E5E5">Microsoft's more generous with the</font>

747
00:26:50,320 --> 00:26:54,820
disclosure<font color="#CCCCCC"> C they might say this is</font><font color="#E5E5E5"> a</font>

748
00:26:52,540 --> 00:26:58,570
<font color="#CCCCCC">member one there was</font><font color="#E5E5E5"> one for tcp/ip and</font>

749
00:26:54,820 --> 00:26:59,830
<font color="#E5E5E5">it said TCP syn wait vulnerability well</font>

750
00:26:58,570 --> 00:27:01,540
that's helpful<font color="#E5E5E5"> to me</font><font color="#CCCCCC"> because then what</font>

751
00:26:59,830 --> 00:27:03,399
I'm<font color="#E5E5E5"> doing</font><font color="#CCCCCC"> ad</font><font color="#E5E5E5"> if I can look at the symbol</font>

752
00:27:01,540 --> 00:27:05,649
names the functions and<font color="#E5E5E5"> say hey there's</font>

753
00:27:03,400 --> 00:27:07,540
a function called TCP<font color="#E5E5E5"> fin acknowledged</font>

754
00:27:05,650 --> 00:27:09,940
and the vulnerability disclosure is

755
00:27:07,540 --> 00:27:11,500
called TCP syn<font color="#E5E5E5"> without weight</font>

756
00:27:09,940 --> 00:27:13,330
vulnerability so we can put<font color="#E5E5E5"> that</font>

757
00:27:11,500 --> 00:27:14,890
<font color="#E5E5E5">together right</font><font color="#CCCCCC"> other</font><font color="#E5E5E5"> times they're very</font>

758
00:27:13,330 --> 00:27:18,189
<font color="#E5E5E5">discreet or they</font><font color="#CCCCCC"> don't tell us</font><font color="#E5E5E5"> anything</font>

759
00:27:14,890 --> 00:27:20,140
<font color="#CCCCCC">and it makes it more</font><font color="#E5E5E5"> difficult so some</font>

760
00:27:18,190 --> 00:27:22,180
vendors make it really clear and they're

761
00:27:20,140 --> 00:27:24,340
very helpful with what they're fixing

762
00:27:22,180 --> 00:27:25,840
other vendors are<font color="#E5E5E5"> not good at all about</font>

763
00:27:24,340 --> 00:27:28,720
<font color="#CCCCCC">it and</font><font color="#E5E5E5"> they don't want you looking</font><font color="#CCCCCC"> at</font>

764
00:27:25,840 --> 00:27:30,040
their stuff<font color="#CCCCCC"> so some of</font><font color="#E5E5E5"> those tools that</font>

765
00:27:28,720 --> 00:27:32,530
<font color="#CCCCCC">I was</font><font color="#E5E5E5"> going to talk</font><font color="#CCCCCC"> about we've got</font>

766
00:27:30,040 --> 00:27:34,690
<font color="#E5E5E5">dynamics bin</font><font color="#CCCCCC"> diff</font><font color="#E5E5E5"> again acquired by</font>

767
00:27:32,530 --> 00:27:37,149
Google<font color="#E5E5E5"> that was free as of March last</font>

768
00:27:34,690 --> 00:27:38,560
year<font color="#E5E5E5"> core security I had a tool called</font>

769
00:27:37,150 --> 00:27:41,350
turbo disk that's been around for a very

770
00:27:38,560 --> 00:27:43,570
<font color="#CCCCCC">long time</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> that's free darn grim for</font>

771
00:27:41,350 --> 00:27:45,699
by<font color="#CCCCCC"> young</font><font color="#E5E5E5"> work</font><font color="#CCCCCC"> Oh was Matt oh he went to</font>

772
00:27:43,570 --> 00:27:47,169
go work<font color="#E5E5E5"> for Microsoft like a year or so</font>

773
00:27:45,700 --> 00:27:48,400
ago<font color="#E5E5E5"> maybe a little bit longer so</font><font color="#CCCCCC"> he</font>

774
00:27:47,170 --> 00:27:49,870
stopped doing<font color="#CCCCCC"> development because</font>

775
00:27:48,400 --> 00:27:51,880
<font color="#E5E5E5">Microsoft asked him to stop doing</font>

776
00:27:49,870 --> 00:27:53,949
<font color="#CCCCCC">development on that</font><font color="#E5E5E5"> tool</font><font color="#CCCCCC"> that was a neat</font>

777
00:27:51,880 --> 00:27:55,990
one<font color="#CCCCCC"> where he made it as a standalone</font>

778
00:27:53,950 --> 00:27:58,000
tool<font color="#CCCCCC"> he still had</font><font color="#E5E5E5"> to have Ida the</font>

779
00:27:55,990 --> 00:27:59,980
<font color="#E5E5E5">interactive disassembler but you could</font>

780
00:27:58,000 --> 00:28:02,110
export your<font color="#CCCCCC"> results into Ida and do some</font>

781
00:27:59,980 --> 00:28:04,060
color coding<font color="#E5E5E5"> that</font><font color="#CCCCCC"> was really neat patch</font>

782
00:28:02,110 --> 00:28:05,830
<font color="#CCCCCC">TIFF -</font><font color="#E5E5E5"> there's another one</font><font color="#CCCCCC"> that's free</font>

783
00:28:04,060 --> 00:28:07,990
which is<font color="#E5E5E5"> nice you</font><font color="#CCCCCC"> still need a licensed</font>

784
00:28:05,830 --> 00:28:10,179
copy of Ida<font color="#CCCCCC"> if you don't have a licensed</font>

785
00:28:07,990 --> 00:28:12,220
copy<font color="#E5E5E5"> of Ida</font><font color="#CCCCCC"> you have to use core</font>

786
00:28:10,180 --> 00:28:14,770
<font color="#CCCCCC">Securities turbo</font><font color="#E5E5E5"> diff with the free</font>

787
00:28:12,220 --> 00:28:17,590
version<font color="#CCCCCC"> of</font><font color="#E5E5E5"> Ida which is Ida 5.0 which is</font>

788
00:28:14,770 --> 00:28:18,940
quite old<font color="#CCCCCC"> now and</font><font color="#E5E5E5"> slow</font><font color="#CCCCCC"> Daiya</font><font color="#E5E5E5"> for is a</font>

789
00:28:17,590 --> 00:28:20,770
great<font color="#E5E5E5"> tool written by Jacque Dean</font>

790
00:28:18,940 --> 00:28:23,170
curette<font color="#E5E5E5"> who's written tons of really</font>

791
00:28:20,770 --> 00:28:25,750
<font color="#E5E5E5">great tools and gives away a lot of free</font>

792
00:28:23,170 --> 00:28:28,840
software<font color="#CCCCCC"> that</font><font color="#E5E5E5"> ones at least actively</font>

793
00:28:25,750 --> 00:28:30,400
maintained<font color="#CCCCCC"> and it is written</font><font color="#E5E5E5"> in Python</font>

794
00:28:28,840 --> 00:28:34,179
<font color="#CCCCCC">so it's going</font><font color="#E5E5E5"> to be a bit slower</font><font color="#CCCCCC"> it's</font>

795
00:28:30,400 --> 00:28:37,840
not C++ like<font color="#E5E5E5"> bendeth is</font><font color="#CCCCCC"> binned</font><font color="#E5E5E5"> it's very</font>

796
00:28:34,180 --> 00:28:39,610
fast<font color="#CCCCCC"> Daiya</font><font color="#E5E5E5"> for is great uses tons of</font>

797
00:28:37,840 --> 00:28:40,929
heuristic to try to identify the code

798
00:28:39,610 --> 00:28:41,290
change that's one of the big<font color="#CCCCCC"> questions</font>

799
00:28:40,930 --> 00:28:43,330
right

800
00:28:41,290 --> 00:28:44,830
how do<font color="#E5E5E5"> these tools actually know when</font>

801
00:28:43,330 --> 00:28:46,480
there's a code change<font color="#E5E5E5"> and it's a</font>

802
00:28:44,830 --> 00:28:48,370
combination<font color="#CCCCCC"> of</font><font color="#E5E5E5"> things like string</font>

803
00:28:46,480 --> 00:28:50,560
matching and name matching which is the

804
00:28:48,370 --> 00:28:51,939
easy and obvious<font color="#E5E5E5"> ones and then it goes</font>

805
00:28:50,560 --> 00:28:53,710
through<font color="#CCCCCC"> and uses</font><font color="#E5E5E5"> different types of</font>

806
00:28:51,940 --> 00:28:56,590
heuristics because it gets complicated

807
00:28:53,710 --> 00:29:00,340
<font color="#CCCCCC">in</font><font color="#E5E5E5"> where a compiler or an assembler</font>

808
00:28:56,590 --> 00:29:02,080
<font color="#E5E5E5">might assemble the code differently even</font>

809
00:29:00,340 --> 00:29:03,520
<font color="#CCCCCC">though</font><font color="#E5E5E5"> it's the same code depending on</font>

810
00:29:02,080 --> 00:29:05,770
<font color="#E5E5E5">you know how it's feeling that day or</font>

811
00:29:03,520 --> 00:29:09,220
what<font color="#CCCCCC"> kind of</font><font color="#E5E5E5"> features and compiler flags</font>

812
00:29:05,770 --> 00:29:11,590
you use so<font color="#E5E5E5"> it the assembly it looks</font>

813
00:29:09,220 --> 00:29:14,260
different<font color="#E5E5E5"> when</font><font color="#CCCCCC"> you compile it</font><font color="#E5E5E5"> two</font>

814
00:29:11,590 --> 00:29:16,959
different<font color="#E5E5E5"> times</font><font color="#CCCCCC"> you want a tool that's</font>

815
00:29:14,260 --> 00:29:19,060
smart enough<font color="#CCCCCC"> to know hey</font><font color="#E5E5E5"> if this says</font>

816
00:29:16,960 --> 00:29:20,680
we're going<font color="#E5E5E5"> to zero out this register</font>

817
00:29:19,060 --> 00:29:23,230
<font color="#E5E5E5">that's the same thing as subtracting</font>

818
00:29:20,680 --> 00:29:24,700
something<font color="#E5E5E5"> or negating it once it's this</font>

819
00:29:23,230 --> 00:29:26,860
<font color="#CCCCCC">value or there's different ways</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> can</font>

820
00:29:24,700 --> 00:29:28,090
<font color="#E5E5E5">have</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> same result</font><font color="#CCCCCC"> so we want</font>

821
00:29:26,860 --> 00:29:29,709
<font color="#E5E5E5">something that's smart like that</font><font color="#CCCCCC"> daya</font>

822
00:29:28,090 --> 00:29:34,720
<font color="#CCCCCC">forest some really great heuristics that</font>

823
00:29:29,710 --> 00:29:38,610
<font color="#E5E5E5">it uses so this is done here now</font><font color="#CCCCCC"> and if</font>

824
00:29:34,720 --> 00:29:40,780
we look in the results it means<font color="#E5E5E5"> zoom in</font>

825
00:29:38,610 --> 00:29:42,669
you<font color="#CCCCCC"> can</font><font color="#E5E5E5"> see that this is what we're left</font>

826
00:29:40,780 --> 00:29:43,930
with and this<font color="#E5E5E5"> was the x86 version of the</font>

827
00:29:42,670 --> 00:29:46,090
<font color="#E5E5E5">patches because</font><font color="#CCCCCC"> I wanted</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> keep it</font>

828
00:29:43,930 --> 00:29:48,640
relatively small so we go in here<font color="#E5E5E5"> and</font>

829
00:29:46,090 --> 00:29:50,649
there's a ton<font color="#E5E5E5"> of files so</font><font color="#CCCCCC"> we scroll down</font>

830
00:29:48,640 --> 00:29:52,900
<font color="#E5E5E5">and you can</font><font color="#CCCCCC"> see lots</font><font color="#E5E5E5"> and lots and lots</font>

831
00:29:50,650 --> 00:29:54,460
<font color="#E5E5E5">of stuff so wouldn't</font><font color="#CCCCCC"> it be nice to</font><font color="#E5E5E5"> have</font>

832
00:29:52,900 --> 00:29:56,470
a tool<font color="#CCCCCC"> that goes</font><font color="#E5E5E5"> and it cleans it up a</font>

833
00:29:54,460 --> 00:29:57,850
bit<font color="#CCCCCC"> now we're still we still</font><font color="#E5E5E5"> may be left</font>

834
00:29:56,470 --> 00:29:59,980
with a lot it depends<font color="#E5E5E5"> on</font><font color="#CCCCCC"> two</font><font color="#E5E5E5"> months</font>

835
00:29:57,850 --> 00:30:05,860
<font color="#E5E5E5">updates and other things but let me go</font>

836
00:29:59,980 --> 00:30:08,910
<font color="#E5E5E5">ahead and run patch clean against it and</font>

837
00:30:05,860 --> 00:30:08,909
we'll see<font color="#E5E5E5"> what we're left with</font>

838
00:30:19,240 --> 00:30:32,140
<font color="#E5E5E5">so I'm</font><font color="#CCCCCC"> stepping</font><font color="#E5E5E5"> -</font><font color="#CCCCCC"> past</font><font color="#E5E5E5"> and in the</font><font color="#CCCCCC"> past</font>

839
00:30:21,190 --> 00:30:33,909
it attaches so run this guy this one

840
00:30:32,140 --> 00:30:35,230
won't take as long<font color="#CCCCCC"> as the last one but</font>

841
00:30:33,909 --> 00:30:36,760
<font color="#CCCCCC">it's moving</font><font color="#E5E5E5"> things around so what we</font>

842
00:30:35,230 --> 00:30:39,070
hopefully<font color="#CCCCCC"> will see is this shrinking on</font>

843
00:30:36,760 --> 00:30:42,520
the<font color="#E5E5E5"> left what's done so we're left with</font>

844
00:30:39,070 --> 00:30:44,320
<font color="#CCCCCC">high-priority folders 56 so it moved 490</font>

845
00:30:42,520 --> 00:30:47,080
<font color="#E5E5E5">one of those folders into the old</font>

846
00:30:44,320 --> 00:30:49,720
<font color="#E5E5E5">directory which</font><font color="#CCCCCC"> is very</font><font color="#E5E5E5"> useful we can</font>

847
00:30:47,080 --> 00:30:51,039
zoom in here and<font color="#E5E5E5"> we could see if we</font>

848
00:30:49,720 --> 00:30:53,620
<font color="#E5E5E5">scroll</font><font color="#CCCCCC"> down there's not</font><font color="#E5E5E5"> many left</font>

849
00:30:51,039 --> 00:30:55,510
<font color="#E5E5E5">there's the</font><font color="#CCCCCC"> old folder and you'd want to</font>

850
00:30:53,620 --> 00:30:56,918
try<font color="#E5E5E5"> and correlate so these all</font><font color="#CCCCCC"> say</font><font color="#E5E5E5"> ie on</font>

851
00:30:55,510 --> 00:30:58,450
the front so<font color="#CCCCCC"> we'd probably</font><font color="#E5E5E5"> assume</font>

852
00:30:56,919 --> 00:31:00,789
they're related<font color="#E5E5E5"> to</font><font color="#CCCCCC"> internet explorer</font>

853
00:30:58,450 --> 00:31:03,669
<font color="#E5E5E5">scroll up top</font><font color="#CCCCCC"> tons</font><font color="#E5E5E5"> of them are ie and</font>

854
00:31:00,789 --> 00:31:07,179
again here's GDI up there<font color="#E5E5E5"> so GDI 32</font>

855
00:31:03,669 --> 00:31:10,899
<font color="#CCCCCC">there</font><font color="#E5E5E5"> is a</font><font color="#CCCCCC"> path file so a dll so zoom</font>

856
00:31:07,179 --> 00:31:13,360
back out go back<font color="#CCCCCC"> out here this is an</font>

857
00:31:10,899 --> 00:31:15,340
example of results<font color="#E5E5E5"> when we</font><font color="#CCCCCC"> do a</font>

858
00:31:13,360 --> 00:31:17,439
graphical<font color="#E5E5E5"> diff a visual diff using the</font>

859
00:31:15,340 --> 00:31:19,029
bin diff tool and I'll zoom<font color="#CCCCCC"> in a</font><font color="#E5E5E5"> moment</font>

860
00:31:17,440 --> 00:31:21,130
when I<font color="#CCCCCC"> actually demo this</font><font color="#E5E5E5"> a bit but what</font>

861
00:31:19,029 --> 00:31:23,440
you see<font color="#CCCCCC"> is on the left is one version of</font>

862
00:31:21,130 --> 00:31:25,299
the file<font color="#E5E5E5"> typically I like</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> put the</font>

863
00:31:23,440 --> 00:31:27,549
unpatched version on the left<font color="#CCCCCC"> and the</font>

864
00:31:25,299 --> 00:31:29,950
patch version<font color="#CCCCCC"> on the right and when you</font>

865
00:31:27,549 --> 00:31:31,779
identify blocks that<font color="#CCCCCC"> are green as you</font>

866
00:31:29,950 --> 00:31:33,880
<font color="#CCCCCC">see up there</font><font color="#E5E5E5"> the color coding depends on</font>

867
00:31:31,779 --> 00:31:36,970
a tool then you<font color="#E5E5E5"> know that the blocks are</font>

868
00:31:33,880 --> 00:31:39,070
the same<font color="#E5E5E5"> between both sides when you see</font>

869
00:31:36,970 --> 00:31:41,440
yellow like<font color="#CCCCCC"> that you can't really</font><font color="#E5E5E5"> see</font><font color="#CCCCCC"> it</font>

870
00:31:39,070 --> 00:31:43,389
<font color="#CCCCCC">I'll</font><font color="#E5E5E5"> trans do min so you can see and you</font>

871
00:31:41,440 --> 00:31:44,950
<font color="#CCCCCC">see yellow it means</font><font color="#E5E5E5"> there's code changes</font>

872
00:31:43,390 --> 00:31:46,120
inside so you can<font color="#CCCCCC"> barely see it but</font>

873
00:31:44,950 --> 00:31:47,860
<font color="#E5E5E5">there's a little blue highlighting right</font>

874
00:31:46,120 --> 00:31:50,260
there that<font color="#E5E5E5"> doesn't exist on the other</font>

875
00:31:47,860 --> 00:31:51,610
<font color="#E5E5E5">side so</font><font color="#CCCCCC"> you know the block exists</font><font color="#E5E5E5"> but</font>

876
00:31:50,260 --> 00:31:54,070
there's a change within the block to the

877
00:31:51,610 --> 00:31:55,750
assembly<font color="#E5E5E5"> and then if it's a red block</font>

878
00:31:54,070 --> 00:31:57,220
<font color="#E5E5E5">then you know that that block doesn't</font>

879
00:31:55,750 --> 00:31:58,809
<font color="#E5E5E5">even exist on the</font><font color="#CCCCCC"> other</font><font color="#E5E5E5"> side and you'll</font>

880
00:31:57,220 --> 00:32:02,350
see<font color="#CCCCCC"> a lot of</font><font color="#E5E5E5"> that when I demo it here in</font>

881
00:31:58,809 --> 00:32:04,270
a moment here's an<font color="#E5E5E5"> example of a patch</font>

882
00:32:02,350 --> 00:32:09,399
vulnerability and I'm just<font color="#E5E5E5"> instead going</font>

883
00:32:04,270 --> 00:32:11,260
<font color="#CCCCCC">to demo this instead of instead</font><font color="#E5E5E5"> of</font>

884
00:32:09,399 --> 00:32:17,100
<font color="#CCCCCC">showing on a slide so let me jump back</font>

885
00:32:11,260 --> 00:32:21,340
<font color="#E5E5E5">over to</font><font color="#CCCCCC"> Windows I'm going to start up I</font>

886
00:32:17,100 --> 00:32:23,020
<font color="#E5E5E5">264 but I'll keep zooming</font><font color="#CCCCCC"> send it's a</font>

887
00:32:21,340 --> 00:32:24,668
little bit small on<font color="#E5E5E5"> the screen</font><font color="#CCCCCC"> but right</font>

888
00:32:23,020 --> 00:32:27,250
here<font color="#CCCCCC"> I've got a folder set up for MS</font>

889
00:32:24,669 --> 00:32:28,510
1600<font color="#CCCCCC"> 9 and I go in there you can</font><font color="#E5E5E5"> see</font>

890
00:32:27,250 --> 00:32:30,490
I've<font color="#CCCCCC"> got the pats and</font><font color="#E5E5E5"> the unpatched</font>

891
00:32:28,510 --> 00:32:32,139
version<font color="#E5E5E5"> and I had to get this out of a</font>

892
00:32:30,490 --> 00:32:32,710
<font color="#CCCCCC">cumulative update O's from last year for</font>

893
00:32:32,139 --> 00:32:34,299
Windows 10

894
00:32:32,710 --> 00:32:37,690
this one specifically is<font color="#CCCCCC"> for</font><font color="#E5E5E5"> Windows 10</font>

895
00:32:34,299 --> 00:32:39,460
64 bit so we'll<font color="#E5E5E5"> go into the unpatched</font>

896
00:32:37,690 --> 00:32:41,230
version here you can see<font color="#E5E5E5"> I have dipped</font>

897
00:32:39,460 --> 00:32:42,429
it previously<font color="#E5E5E5"> there's the Ida database</font>

898
00:32:41,230 --> 00:32:47,490
file so I'll just double click on that

899
00:32:42,429 --> 00:32:50,559
to<font color="#E5E5E5"> bring up Ida and I'll zoom</font><font color="#CCCCCC"> out here</font>

900
00:32:47,490 --> 00:32:52,299
<font color="#E5E5E5">so here we have Ida if you're not</font>

901
00:32:50,559 --> 00:32:54,070
<font color="#E5E5E5">familiar with the tool it's a great tool</font>

902
00:32:52,299 --> 00:32:55,870
it's a learning<font color="#CCCCCC"> curve of course because</font>

903
00:32:54,070 --> 00:32:57,639
it's a complicated<font color="#E5E5E5"> tool you kind of have</font>

904
00:32:55,870 --> 00:32:59,678
to<font color="#CCCCCC"> know how to</font><font color="#E5E5E5"> read</font><font color="#CCCCCC"> disassembly but it's</font>

905
00:32:57,640 --> 00:33:01,240
<font color="#E5E5E5">extremely powerful</font><font color="#CCCCCC"> and if I show you on</font>

906
00:32:59,679 --> 00:33:03,429
the left here you<font color="#E5E5E5"> can see</font><font color="#CCCCCC"> all</font><font color="#E5E5E5"> these</font>

907
00:33:01,240 --> 00:33:06,250
names<font color="#CCCCCC"> that's because we have the symbols</font>

908
00:33:03,429 --> 00:33:07,929
Microsoft gave us a symbol for this<font color="#CCCCCC"> DLL</font>

909
00:33:06,250 --> 00:33:12,250
that<font color="#E5E5E5"> we're looking</font><font color="#CCCCCC"> at</font><font color="#E5E5E5"> and makes life</font>

910
00:33:07,929 --> 00:33:14,559
much easier that's an interesting one

911
00:33:12,250 --> 00:33:16,419
<font color="#E5E5E5">should you or</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> be me anyway</font>

912
00:33:14,559 --> 00:33:18,970
this right here<font color="#E5E5E5"> I joke and say looks</font>

913
00:33:16,419 --> 00:33:21,549
like extreme<font color="#CCCCCC"> Donkey Kong but this is a</font>

914
00:33:18,970 --> 00:33:24,399
<font color="#E5E5E5">disassembly of a function and if we</font><font color="#CCCCCC"> zoom</font>

915
00:33:21,549 --> 00:33:26,379
in you<font color="#CCCCCC"> can see the</font><font color="#E5E5E5"> disassembly there and</font>

916
00:33:24,399 --> 00:33:28,149
<font color="#E5E5E5">these are all blocks blocks typically</font>

917
00:33:26,380 --> 00:33:30,309
<font color="#E5E5E5">have something called edges and an edge</font>

918
00:33:28,149 --> 00:33:32,320
<font color="#CCCCCC">just means we</font><font color="#E5E5E5"> get down here and it says</font>

919
00:33:30,309 --> 00:33:33,730
jump<font color="#E5E5E5"> it's zero</font><font color="#CCCCCC"> so we</font><font color="#E5E5E5"> can take two</font>

920
00:33:32,320 --> 00:33:35,470
directions we<font color="#CCCCCC"> can go that</font><font color="#E5E5E5"> way</font><font color="#CCCCCC"> or that</font>

921
00:33:33,730 --> 00:33:38,169
<font color="#CCCCCC">way and that's going</font><font color="#E5E5E5"> to be based on the</font>

922
00:33:35,470 --> 00:33:39,850
result of some arithmetic<font color="#E5E5E5"> or some</font>

923
00:33:38,169 --> 00:33:41,500
comparison or whatever else that's going

924
00:33:39,850 --> 00:33:43,449
<font color="#E5E5E5">on</font><font color="#CCCCCC"> now you can</font><font color="#E5E5E5"> double click on this</font><font color="#CCCCCC"> and</font>

925
00:33:41,500 --> 00:33:45,970
say well<font color="#E5E5E5"> we would have gone to here had</font>

926
00:33:43,450 --> 00:33:48,370
that been true<font color="#CCCCCC"> on the one side versus</font>

927
00:33:45,970 --> 00:33:49,630
false on<font color="#E5E5E5"> the other side so that's just I</font>

928
00:33:48,370 --> 00:33:52,059
don't<font color="#CCCCCC"> really have time to</font><font color="#E5E5E5"> go</font><font color="#CCCCCC"> into the</font>

929
00:33:49,630 --> 00:33:54,909
depths of<font color="#E5E5E5"> Ida right now but again</font><font color="#CCCCCC"> very</font>

930
00:33:52,059 --> 00:33:56,559
useful<font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> going to now bring up bin</font>

931
00:33:54,909 --> 00:33:59,860
<font color="#CCCCCC">diff here and we're going to diff</font>

932
00:33:56,559 --> 00:34:02,408
<font color="#E5E5E5">against the patched version so go in</font>

933
00:33:59,860 --> 00:34:03,370
here<font color="#CCCCCC"> I don't</font><font color="#E5E5E5"> want I don't know why it's</font>

934
00:34:02,409 --> 00:34:07,480
taking<font color="#CCCCCC"> me there</font><font color="#E5E5E5"> and it's not where I</font>

935
00:34:03,370 --> 00:34:09,699
want to<font color="#E5E5E5"> be give you a moment so patched</font>

936
00:34:07,480 --> 00:34:11,889
and we go like that<font color="#E5E5E5"> and it's pretty</font>

937
00:34:09,699 --> 00:34:14,439
<font color="#E5E5E5">quick again C++ so it's not going to</font>

938
00:34:11,889 --> 00:34:16,599
take very<font color="#CCCCCC"> long it's going through the</font>

939
00:34:14,440 --> 00:34:18,399
Ida databases and comparing<font color="#E5E5E5"> and trying</font>

940
00:34:16,599 --> 00:34:19,960
to<font color="#CCCCCC"> identify those code changes using</font>

941
00:34:18,399 --> 00:34:22,060
various heuristics like<font color="#E5E5E5"> we talked</font><font color="#CCCCCC"> about</font>

942
00:34:19,960 --> 00:34:24,040
once it's done it's<font color="#CCCCCC"> just about</font><font color="#E5E5E5"> finished</font>

943
00:34:22,060 --> 00:34:26,589
<font color="#CCCCCC">here</font><font color="#E5E5E5"> up on</font><font color="#CCCCCC"> the right</font><font color="#E5E5E5"> will get a bunch of</font>

944
00:34:24,040 --> 00:34:29,159
new columns and I'm going to shut<font color="#CCCCCC"> down</font>

945
00:34:26,589 --> 00:34:34,029
most of them because<font color="#E5E5E5"> we don't need them</font>

946
00:34:29,159 --> 00:34:36,849
there it is so I'm going to<font color="#E5E5E5"> close the</font>

947
00:34:34,030 --> 00:34:39,849
ones we<font color="#E5E5E5"> don't need and this</font><font color="#CCCCCC"> guy's</font><font color="#E5E5E5"> the</font>

948
00:34:36,849 --> 00:34:41,800
<font color="#CCCCCC">one we do need so what you see here when</font>

949
00:34:39,849 --> 00:34:43,149
it says similarity those are the

950
00:34:41,800 --> 00:34:45,609
function names<font color="#E5E5E5"> over here on the right</font>

951
00:34:43,149 --> 00:34:46,330
and it's saying that<font color="#E5E5E5"> they are identical</font>

952
00:34:45,609 --> 00:34:47,830
so<font color="#E5E5E5"> that</font>

953
00:34:46,330 --> 00:34:50,069
<font color="#E5E5E5">past version versus the unpatched</font>

954
00:34:47,830 --> 00:34:52,060
version<font color="#E5E5E5"> are identical and we</font><font color="#CCCCCC"> scroll down</font>

955
00:34:50,070 --> 00:34:54,990
<font color="#E5E5E5">you can see most of them are identical</font>

956
00:34:52,060 --> 00:34:57,490
<font color="#CCCCCC">so they click</font><font color="#E5E5E5"> on similarity to sort it</font>

957
00:34:54,989 --> 00:35:01,419
<font color="#E5E5E5">and we scroll up there was only one</font>

958
00:34:57,490 --> 00:35:03,250
function out<font color="#CCCCCC"> of 45 hundred</font><font color="#E5E5E5"> with the code</font>

959
00:35:01,420 --> 00:35:05,980
change<font color="#E5E5E5"> let's say it's a little bit of</font>

960
00:35:03,250 --> 00:35:08,140
time<font color="#E5E5E5"> right having to go through</font><font color="#CCCCCC"> that</font>

961
00:35:05,980 --> 00:35:09,700
<font color="#E5E5E5">manually and looking for code changes so</font>

962
00:35:08,140 --> 00:35:11,529
<font color="#E5E5E5">now we'll do a graphical diff</font><font color="#CCCCCC"> we're</font>

963
00:35:09,700 --> 00:35:14,410
going to say<font color="#CCCCCC"> control E and bring up a</font>

964
00:35:11,530 --> 00:35:15,880
graphical diff of it notice there's a

965
00:35:14,410 --> 00:35:18,310
large function so it's going to take<font color="#E5E5E5"> me</font>

966
00:35:15,880 --> 00:35:21,310
a<font color="#CCCCCC"> moment to find the spot</font><font color="#E5E5E5"> but that's the</font>

967
00:35:18,310 --> 00:35:23,440
<font color="#CCCCCC">side-by-side comparison now</font><font color="#E5E5E5"> and over on</font>

968
00:35:21,310 --> 00:35:30,160
the patch side<font color="#CCCCCC"> I'll just shrink this</font>

969
00:35:23,440 --> 00:35:31,630
down it's really<font color="#E5E5E5"> small I'm</font><font color="#CCCCCC"> going to duck</font>

970
00:35:30,160 --> 00:35:54,220
my head<font color="#E5E5E5"> for a second so I</font><font color="#CCCCCC"> can find that</font>

971
00:35:31,630 --> 00:35:57,670
bug hold on<font color="#CCCCCC"> alright so right here let me</font>

972
00:35:54,220 --> 00:35:59,980
<font color="#CCCCCC">zoom this was a</font><font color="#E5E5E5"> DLL</font><font color="#CCCCCC"> side loading bug and</font>

973
00:35:57,670 --> 00:36:03,520
on the left on<font color="#E5E5E5"> the unpatched version you</font>

974
00:35:59,980 --> 00:36:05,790
can see<font color="#E5E5E5"> DW</font><font color="#CCCCCC"> Flags DW</font><font color="#E5E5E5"> flags</font><font color="#CCCCCC"> when we pass</font>

975
00:36:03,520 --> 00:36:09,580
it to a function called load library<font color="#CCCCCC"> exa</font>

976
00:36:05,790 --> 00:36:11,770
we are asking this particular code block

977
00:36:09,580 --> 00:36:13,990
here to load a module we<font color="#E5E5E5"> want to load</font>

978
00:36:11,770 --> 00:36:16,750
some<font color="#E5E5E5"> DLL into</font><font color="#CCCCCC"> the process because it</font>

979
00:36:13,990 --> 00:36:18,819
<font color="#CCCCCC">apparently it needs it with DW</font><font color="#E5E5E5"> flags it</font>

980
00:36:16,750 --> 00:36:23,110
allows<font color="#CCCCCC"> us</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> specify where could that</font>

981
00:36:18,820 --> 00:36:24,640
DLL be located so Microsoft implements

982
00:36:23,110 --> 00:36:26,980
something in<font color="#CCCCCC"> MSDN you can see it called</font>

983
00:36:24,640 --> 00:36:28,680
safe DLL search ordering and it's kind

984
00:36:26,980 --> 00:36:32,800
of<font color="#E5E5E5"> like if you</font><font color="#CCCCCC"> were in your house and</font>

985
00:36:28,680 --> 00:36:35,169
you knew that<font color="#E5E5E5"> the salt is typically in a</font>

986
00:36:32,800 --> 00:36:36,400
particular cabinet<font color="#E5E5E5"> and you open up the</font>

987
00:36:35,170 --> 00:36:38,290
<font color="#CCCCCC">cabinet and</font><font color="#E5E5E5"> you look in there</font><font color="#CCCCCC"> and it's</font>

988
00:36:36,400 --> 00:36:40,360
<font color="#E5E5E5">not there</font><font color="#CCCCCC"> you go looking for it right</font>

989
00:36:38,290 --> 00:36:41,890
<font color="#CCCCCC">you go to the</font><font color="#E5E5E5"> next cabinet you look in</font>

990
00:36:40,360 --> 00:36:43,210
the closet you look on the<font color="#CCCCCC"> table and you</font>

991
00:36:41,890 --> 00:36:44,799
go<font color="#CCCCCC"> around till you find it and</font>

992
00:36:43,210 --> 00:36:46,750
eventually<font color="#CCCCCC"> you give off you'll exhaust</font>

993
00:36:44,800 --> 00:36:48,100
<font color="#CCCCCC">and that's kind of what we do when we</font>

994
00:36:46,750 --> 00:36:50,560
search for dll's if they're<font color="#E5E5E5"> not where we</font>

995
00:36:48,100 --> 00:36:53,350
expect them the DW<font color="#CCCCCC"> flags option in this</font>

996
00:36:50,560 --> 00:36:54,400
one you can<font color="#CCCCCC"> see it's being have</font><font color="#E5E5E5"> to zoom</font>

997
00:36:53,350 --> 00:36:56,110
<font color="#E5E5E5">over a</font><font color="#CCCCCC"> little</font><font color="#E5E5E5"> bit and I</font><font color="#CCCCCC"> don't want to</font>

998
00:36:54,400 --> 00:36:58,630
try and<font color="#CCCCCC"> grab on this or might fly gonna</font>

999
00:36:56,110 --> 00:37:02,200
<font color="#CCCCCC">throw them they will</font><font color="#E5E5E5"> get lucky</font>

1000
00:36:58,630 --> 00:37:05,829
<font color="#E5E5E5">ooh there we</font><font color="#CCCCCC"> go</font><font color="#E5E5E5"> so see how it's saying X</font>

1001
00:37:02,200 --> 00:37:07,479
or<font color="#CCCCCC"> R</font><font color="#E5E5E5"> 8 r 8 as register 8 64-bit it's</font>

1002
00:37:05,829 --> 00:37:10,630
zeroing it out so we're passing a DW

1003
00:37:07,479 --> 00:37:12,399
<font color="#CCCCCC">Flags</font><font color="#E5E5E5"> argument of 0 and that means go</font>

1004
00:37:10,630 --> 00:37:13,239
look for<font color="#E5E5E5"> it anywhere you can find</font><font color="#CCCCCC"> it for</font>

1005
00:37:12,400 --> 00:37:15,099
<font color="#E5E5E5">the most part</font><font color="#CCCCCC"> I mean</font><font color="#E5E5E5"> there are</font>

1006
00:37:13,239 --> 00:37:17,609
limitations<font color="#E5E5E5"> but that's when we get</font><font color="#CCCCCC"> into</font>

1007
00:37:15,099 --> 00:37:20,739
<font color="#CCCCCC">trouble</font><font color="#E5E5E5"> if you've ever run a tool like</font>

1008
00:37:17,609 --> 00:37:22,960
<font color="#CCCCCC">powerup on the</font><font color="#E5E5E5"> power shell and it says I</font>

1009
00:37:20,739 --> 00:37:23,950
<font color="#E5E5E5">found a dll hackable hijack herbal</font>

1010
00:37:22,960 --> 00:37:25,599
location<font color="#E5E5E5"> or something</font>

1011
00:37:23,950 --> 00:37:27,519
what it's doing<font color="#CCCCCC"> is</font><font color="#E5E5E5"> looking for things in</font>

1012
00:37:25,599 --> 00:37:29,799
your system<font color="#CCCCCC"> paths and</font><font color="#E5E5E5"> other areas</font><font color="#CCCCCC"> like</font>

1013
00:37:27,519 --> 00:37:31,598
if you install<font color="#CCCCCC"> python pythons</font>

1014
00:37:29,799 --> 00:37:34,390
automatically in<font color="#CCCCCC"> your path and if</font>

1015
00:37:31,599 --> 00:37:36,670
someone can get<font color="#E5E5E5"> a dll that's involved in</font>

1016
00:37:34,390 --> 00:37:38,319
a<font color="#E5E5E5"> dll sideloading exploit then they can</font>

1017
00:37:36,670 --> 00:37:40,420
get code execution that way<font color="#CCCCCC"> and</font><font color="#E5E5E5"> as other</font>

1018
00:37:38,319 --> 00:37:42,489
places it'll look for<font color="#E5E5E5"> as</font><font color="#CCCCCC"> well on the</font>

1019
00:37:40,420 --> 00:37:46,509
<font color="#E5E5E5">patch version</font><font color="#CCCCCC"> on the right</font><font color="#E5E5E5"> to fix that</font>

1020
00:37:42,489 --> 00:37:49,839
<font color="#E5E5E5">we move</font><font color="#CCCCCC"> eight zero zero</font><font color="#E5E5E5"> into</font><font color="#CCCCCC"> r8 and that</font>

1021
00:37:46,509 --> 00:37:51,999
serves as DW<font color="#CCCCCC"> flags</font><font color="#E5E5E5"> that restricts and</font>

1022
00:37:49,839 --> 00:37:53,680
says the<font color="#E5E5E5"> only place like back to</font><font color="#CCCCCC"> my</font>

1023
00:37:51,999 --> 00:37:55,209
analogy if you go to look<font color="#E5E5E5"> for the salt</font>

1024
00:37:53,680 --> 00:37:56,348
and<font color="#E5E5E5"> the cabinet where it normally</font><font color="#CCCCCC"> is or</font>

1025
00:37:55,210 --> 00:37:59,289
where<font color="#E5E5E5"> it should be and it's</font><font color="#CCCCCC"> not there</font>

1026
00:37:56,349 --> 00:38:02,019
<font color="#E5E5E5">you stop so it basically says if it's</font>

1027
00:37:59,289 --> 00:38:03,579
not in<font color="#E5E5E5"> system 32 don't continue and try</font>

1028
00:38:02,019 --> 00:38:05,769
<font color="#E5E5E5">to find it by you know troll in the</font>

1029
00:38:03,579 --> 00:38:07,119
<font color="#E5E5E5">operating system and looking for it so</font>

1030
00:38:05,769 --> 00:38:09,218
that's<font color="#CCCCCC"> how they fix this</font><font color="#E5E5E5"> bugs there's</font>

1031
00:38:07,119 --> 00:38:11,739
two problems<font color="#CCCCCC"> that allow</font><font color="#E5E5E5"> this bug</font><font color="#CCCCCC"> to be</font>

1032
00:38:09,219 --> 00:38:13,719
<font color="#E5E5E5">exploitable the first one is that they</font>

1033
00:38:11,739 --> 00:38:15,339
set the wrong<font color="#CCCCCC"> VW</font><font color="#E5E5E5"> flags the other one is</font>

1034
00:38:13,719 --> 00:38:19,239
that<font color="#E5E5E5"> they forgot the</font><font color="#CCCCCC"> dll in the first</font>

1035
00:38:15,339 --> 00:38:21,819
place so Windows 10<font color="#E5E5E5"> 64-bit did not have</font>

1036
00:38:19,239 --> 00:38:23,289
the<font color="#CCCCCC"> dll that was needed so when you go</font>

1037
00:38:21,819 --> 00:38:24,519
<font color="#CCCCCC">to look</font><font color="#E5E5E5"> for something</font><font color="#CCCCCC"> and it's not there</font>

1038
00:38:23,289 --> 00:38:26,319
<font color="#E5E5E5">that's why it keeps looking everywhere</font>

1039
00:38:24,519 --> 00:38:30,488
<font color="#CCCCCC">for it</font><font color="#E5E5E5"> this particular</font><font color="#CCCCCC"> vulnerability</font>

1040
00:38:26,319 --> 00:38:32,499
affected<font color="#E5E5E5"> Skype it affected onedrive and</font>

1041
00:38:30,489 --> 00:38:34,539
<font color="#CCCCCC">ie11 as well so I'll do a demonstration</font>

1042
00:38:32,499 --> 00:38:38,109
of the exploits is to show you a working

1043
00:38:34,539 --> 00:38:41,170
example so I'm just<font color="#E5E5E5"> shutting down Ida</font>

1044
00:38:38,109 --> 00:38:42,339
real quickly<font color="#E5E5E5"> and then you know demo</font><font color="#CCCCCC"> gods</font>

1045
00:38:41,170 --> 00:38:44,049
sometimes they're not<font color="#E5E5E5"> very friendly</font>

1046
00:38:42,339 --> 00:38:45,578
we'll see what they're<font color="#CCCCCC"> doing today</font><font color="#E5E5E5"> maybe</font>

1047
00:38:44,049 --> 00:38:49,660
they're<font color="#CCCCCC"> busy hopefully and that room</font>

1048
00:38:45,579 --> 00:38:51,219
over<font color="#E5E5E5"> there so here I've got</font><font color="#CCCCCC"> Metasploit</font>

1049
00:38:49,660 --> 00:38:52,118
running and it's just a handler and<font color="#E5E5E5"> I'm</font>

1050
00:38:51,219 --> 00:38:53,799
sure<font color="#CCCCCC"> you're most of you are</font><font color="#E5E5E5"> familiar</font>

1051
00:38:52,119 --> 00:38:55,809
<font color="#E5E5E5">with</font><font color="#CCCCCC"> Metasploit</font><font color="#E5E5E5"> it's an exploitation</font>

1052
00:38:53,799 --> 00:38:57,999
framework and this particular piece I'm

1053
00:38:55,809 --> 00:38:59,410
using says I'm listening<font color="#E5E5E5"> on a port and</font>

1054
00:38:57,999 --> 00:39:01,118
I'm waiting<font color="#CCCCCC"> for the victim</font><font color="#E5E5E5"> to connect</font>

1055
00:38:59,410 --> 00:39:03,759
<font color="#E5E5E5">back to</font><font color="#CCCCCC"> me so that the attacker can have</font>

1056
00:39:01,119 --> 00:39:05,349
access<font color="#E5E5E5"> to</font><font color="#CCCCCC"> that system so that's</font><font color="#E5E5E5"> all</font>

1057
00:39:03,759 --> 00:39:08,140
<font color="#E5E5E5">that's doing here's the victim right</font>

1058
00:39:05,349 --> 00:39:10,119
here<font color="#E5E5E5"> is Windows 10</font><font color="#CCCCCC"> box</font><font color="#E5E5E5"> and I might have</font>

1059
00:39:08,140 --> 00:39:13,150
to revert the<font color="#E5E5E5"> snapshot will try but the</font>

1060
00:39:10,119 --> 00:39:15,280
idea is imagine that<font color="#E5E5E5"> you were</font>

1061
00:39:13,150 --> 00:39:17,110
you got an email and of course you<font color="#E5E5E5"> guys</font>

1062
00:39:15,280 --> 00:39:19,450
wouldn't fall victim to this but<font color="#E5E5E5"> imagine</font>

1063
00:39:17,110 --> 00:39:21,310
you<font color="#CCCCCC"> got an email - zip file and</font><font color="#E5E5E5"> it said</font>

1064
00:39:19,450 --> 00:39:23,290
critical<font color="#CCCCCC"> skype update you need</font><font color="#E5E5E5"> to</font>

1065
00:39:21,310 --> 00:39:24,580
install<font color="#E5E5E5"> this so just double click on the</font>

1066
00:39:23,290 --> 00:39:27,040
<font color="#CCCCCC">installer</font><font color="#E5E5E5"> and it will fix everything</font>

1067
00:39:24,580 --> 00:39:29,440
<font color="#CCCCCC">obviously people fall victim to this or</font>

1068
00:39:27,040 --> 00:39:30,700
attackers wouldn't bother doing<font color="#E5E5E5"> it so</font>

1069
00:39:29,440 --> 00:39:36,580
I'm<font color="#E5E5E5"> going to go ahead and extract this</font>

1070
00:39:30,700 --> 00:39:41,169
guy<font color="#E5E5E5"> so say extract all don't do that</font>

1071
00:39:36,580 --> 00:39:43,029
directory<font color="#CCCCCC"> and extract so it just</font>

1072
00:39:41,170 --> 00:39:45,760
extracted it<font color="#E5E5E5"> and we go in here it says</font>

1073
00:39:43,030 --> 00:39:47,440
so<font color="#E5E5E5"> and info dot</font><font color="#CCCCCC"> DL l that is</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> DLL</font>

1074
00:39:45,760 --> 00:39:50,440
that's involved in<font color="#CCCCCC"> a side loading bug it</font>

1075
00:39:47,440 --> 00:39:53,860
doesn't exist<font color="#E5E5E5"> on Windows 10 64 bit base</font>

1076
00:39:50,440 --> 00:39:55,870
installed by<font color="#CCCCCC"> default so if we what I did</font>

1077
00:39:53,860 --> 00:39:58,210
on this example<font color="#E5E5E5"> if I use MSF venom to</font>

1078
00:39:55,870 --> 00:40:00,670
create a malicious DLL<font color="#E5E5E5"> and this one upon</font>

1079
00:39:58,210 --> 00:40:02,770
DLL entry it will execute the

1080
00:40:00,670 --> 00:40:05,230
meterpreter code and connect back to<font color="#E5E5E5"> the</font>

1081
00:40:02,770 --> 00:40:06,850
attacker system this readme is there is

1082
00:40:05,230 --> 00:40:07,600
<font color="#E5E5E5">just to help people exploit themselves</font>

1083
00:40:06,850 --> 00:40:11,830
so it's just<font color="#E5E5E5"> a little announcement</font>

1084
00:40:07,600 --> 00:40:13,569
<font color="#CCCCCC">double-click on it</font><font color="#E5E5E5"> please</font><font color="#CCCCCC"> and then as</font>

1085
00:40:11,830 --> 00:40:15,670
you can<font color="#CCCCCC"> see over here I've got onedrive</font>

1086
00:40:13,570 --> 00:40:17,350
<font color="#E5E5E5">I 11 and Skype those were</font><font color="#CCCCCC"> the three that</font>

1087
00:40:15,670 --> 00:40:19,330
<font color="#E5E5E5">were involved in this bug so I'll just</font>

1088
00:40:17,350 --> 00:40:21,190
double click on<font color="#CCCCCC"> Skype updater</font><font color="#E5E5E5"> and we'll</font>

1089
00:40:19,330 --> 00:40:25,000
go<font color="#CCCCCC"> back over to</font><font color="#E5E5E5"> the attacker system and</font>

1090
00:40:21,190 --> 00:40:29,650
we hope<font color="#CCCCCC"> that something appears and there</font>

1091
00:40:25,000 --> 00:40:32,380
it is so we're on that box<font color="#E5E5E5"> we're in the</font>

1092
00:40:29,650 --> 00:40:33,580
Windows 10<font color="#E5E5E5"> Skype phone directory we go</font>

1093
00:40:32,380 --> 00:40:35,530
back<font color="#E5E5E5"> over here I love this part if you</font>

1094
00:40:33,580 --> 00:40:41,799
look<font color="#CCCCCC"> at</font><font color="#E5E5E5"> Skype</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> sad like</font><font color="#CCCCCC"> a nose that</font>

1095
00:40:35,530 --> 00:40:45,520
got compromised<font color="#E5E5E5"> but so that's one</font>

1096
00:40:41,800 --> 00:40:47,320
example of me<font color="#CCCCCC"> obviously taking a pass</font>

1097
00:40:45,520 --> 00:40:49,210
reversing through<font color="#E5E5E5"> to exploitation by</font>

1098
00:40:47,320 --> 00:40:50,340
reverse and<font color="#E5E5E5"> obviously cut a few steps</font><font color="#CCCCCC"> it</font>

1099
00:40:49,210 --> 00:40:53,710
takes a little longer than that normally

1100
00:40:50,340 --> 00:40:56,530
<font color="#E5E5E5">let's go back out here and I'll</font><font color="#CCCCCC"> show</font><font color="#E5E5E5"> you</font>

1101
00:40:53,710 --> 00:40:58,320
another one<font color="#E5E5E5"> this is the bit one of</font><font color="#CCCCCC"> the</font>

1102
00:40:56,530 --> 00:41:02,290
<font color="#E5E5E5">big ones</font><font color="#CCCCCC"> that came out recently right Ms</font>

1103
00:40:58,320 --> 00:41:04,540
1701<font color="#CCCCCC"> zero this was the infamous</font><font color="#E5E5E5"> SMB</font><font color="#CCCCCC"> 1</font>

1104
00:41:02,290 --> 00:41:06,400
and<font color="#CCCCCC"> V 2</font><font color="#E5E5E5"> bug that allowed for a remote</font>

1105
00:41:04,540 --> 00:41:08,350
<font color="#E5E5E5">code execution</font><font color="#CCCCCC"> it's very rare that a</font>

1106
00:41:06,400 --> 00:41:10,540
service side bug comes out these days I

1107
00:41:08,350 --> 00:41:12,400
mean<font color="#E5E5E5"> it's it's a huge deal and they do I</font>

1108
00:41:10,540 --> 00:41:14,950
remember<font color="#CCCCCC"> one</font><font color="#E5E5E5"> of the original</font><font color="#CCCCCC"> ones when</font>

1109
00:41:12,400 --> 00:41:17,500
<font color="#CCCCCC">Metasploit first came out it was MS</font><font color="#E5E5E5"> 0 3</font>

1110
00:41:14,950 --> 00:41:19,210
0<font color="#E5E5E5"> to 6 and and it was one</font><font color="#CCCCCC"> of the few</font>

1111
00:41:17,500 --> 00:41:22,390
exploits<font color="#E5E5E5"> in</font><font color="#CCCCCC"> Metasploit at the time so it</font>

1112
00:41:19,210 --> 00:41:24,970
<font color="#CCCCCC">was new and you would just</font><font color="#E5E5E5"> type your</font>

1113
00:41:22,390 --> 00:41:25,779
target type your payload type exploit

1114
00:41:24,970 --> 00:41:26,919
and<font color="#E5E5E5"> you never show</font>

1115
00:41:25,780 --> 00:41:28,180
on your screen<font color="#CCCCCC"> I remember the first</font><font color="#E5E5E5"> time</font>

1116
00:41:26,920 --> 00:41:30,040
<font color="#E5E5E5">I'm like what just happened I thought I</font>

1117
00:41:28,180 --> 00:41:31,629
had<font color="#CCCCCC"> a shell</font><font color="#E5E5E5"> in my</font><font color="#CCCCCC"> own box or</font><font color="#E5E5E5"> something</font><font color="#CCCCCC"> I</font>

1118
00:41:30,040 --> 00:41:34,090
<font color="#CCCCCC">think you do it</font><font color="#E5E5E5"> again do it again and</font>

1119
00:41:31,630 --> 00:41:35,320
<font color="#E5E5E5">you you could just get shells all</font><font color="#CCCCCC"> over</font>

1120
00:41:34,090 --> 00:41:37,480
the place was super easy<font color="#E5E5E5"> and that's</font>

1121
00:41:35,320 --> 00:41:39,730
<font color="#E5E5E5">because it was that kind of bug and then</font>

1122
00:41:37,480 --> 00:41:40,780
<font color="#CCCCCC">m/s with zero eight zero six seven or</font>

1123
00:41:39,730 --> 00:41:43,090
something<font color="#E5E5E5"> and there's a couple other</font>

1124
00:41:40,780 --> 00:41:46,510
<font color="#CCCCCC">ones this one was</font><font color="#E5E5E5"> the new one of that</font>

1125
00:41:43,090 --> 00:41:49,300
because of<font color="#CCCCCC"> the</font><font color="#E5E5E5"> leaks that came out</font><font color="#CCCCCC"> you</font>

1126
00:41:46,510 --> 00:41:50,740
could send a crafted packet over<font color="#E5E5E5"> SMB</font><font color="#CCCCCC"> at</font>

1127
00:41:49,300 --> 00:41:53,800
four four five four four four five<font color="#E5E5E5"> and</font>

1128
00:41:50,740 --> 00:41:56,770
you would potentially get a shell<font color="#E5E5E5"> those</font>

1129
00:41:53,800 --> 00:41:58,870
are huge<font color="#CCCCCC"> there were a lot of patches</font><font color="#E5E5E5"> in</font>

1130
00:41:56,770 --> 00:42:00,250
this particular one associated<font color="#E5E5E5"> with SMB</font>

1131
00:41:58,870 --> 00:42:01,990
though it wasn't<font color="#CCCCCC"> just one little thing</font>

1132
00:42:00,250 --> 00:42:04,530
that they had to fix<font color="#E5E5E5"> so what we're going</font>

1133
00:42:01,990 --> 00:42:06,910
<font color="#E5E5E5">to do is just hone and real quickly</font><font color="#CCCCCC"> on a</font>

1134
00:42:04,530 --> 00:42:08,980
information<font color="#E5E5E5"> disclosure vulnerability</font>

1135
00:42:06,910 --> 00:42:11,350
that came out with that information

1136
00:42:08,980 --> 00:42:14,050
<font color="#E5E5E5">disclosure typically means that we can</font>

1137
00:42:11,350 --> 00:42:16,480
send something<font color="#E5E5E5"> to</font><font color="#CCCCCC"> a service or a server</font>

1138
00:42:14,050 --> 00:42:18,790
and<font color="#E5E5E5"> application and the response that it</font>

1139
00:42:16,480 --> 00:42:20,470
gives us is a<font color="#E5E5E5"> little too friendly and it</font>

1140
00:42:18,790 --> 00:42:22,509
might give<font color="#E5E5E5"> us information</font><font color="#CCCCCC"> you know what</font>

1141
00:42:20,470 --> 00:42:23,830
was it<font color="#E5E5E5"> heartbleed I think was an example</font>

1142
00:42:22,510 --> 00:42:25,960
<font color="#CCCCCC">that</font><font color="#E5E5E5"> had an information disclosure</font>

1143
00:42:23,830 --> 00:42:27,670
<font color="#E5E5E5">because</font><font color="#CCCCCC"> they didn't clear out and</font>

1144
00:42:25,960 --> 00:42:29,560
initialize the memory what was sitting

1145
00:42:27,670 --> 00:42:31,600
<font color="#E5E5E5">around and left resident there was</font>

1146
00:42:29,560 --> 00:42:33,100
meaningful<font color="#E5E5E5"> and we know as developers</font>

1147
00:42:31,600 --> 00:42:35,110
you're<font color="#E5E5E5"> totally to initialize your code</font>

1148
00:42:33,100 --> 00:42:38,230
<font color="#CCCCCC">it's why functions like callek for</font>

1149
00:42:35,110 --> 00:42:40,120
example<font color="#E5E5E5"> men set everything to null when</font>

1150
00:42:38,230 --> 00:42:41,320
<font color="#E5E5E5">it allocates memory to make sure you</font>

1151
00:42:40,120 --> 00:42:44,740
know what's<font color="#E5E5E5"> there and there's nothing</font>

1152
00:42:41,320 --> 00:42:46,270
stale sitting there another big woman's

1153
00:42:44,740 --> 00:42:47,890
like null pointer dereferencing where if

1154
00:42:46,270 --> 00:42:50,620
you could get<font color="#E5E5E5"> under the context of the</font>

1155
00:42:47,890 --> 00:42:52,569
kernel to go and try<font color="#E5E5E5"> to execute code at</font>

1156
00:42:50,620 --> 00:42:54,009
memory address<font color="#E5E5E5"> 0 then you could</font>

1157
00:42:52,570 --> 00:42:56,440
potentially<font color="#CCCCCC"> get kernel code execution</font>

1158
00:42:54,010 --> 00:42:59,920
than a user<font color="#E5E5E5"> land process so Microsoft</font>

1159
00:42:56,440 --> 00:43:03,220
Maps the first<font color="#CCCCCC"> 64k</font><font color="#E5E5E5"> I believe on starting</font>

1160
00:42:59,920 --> 00:43:05,080
with<font color="#E5E5E5"> Windows</font><font color="#CCCCCC"> 7 or so</font><font color="#E5E5E5"> all</font><font color="#CCCCCC"> right so this</font>

1161
00:43:03,220 --> 00:43:06,640
<font color="#CCCCCC">guy here it says an information is</font>

1162
00:43:05,080 --> 00:43:09,850
<font color="#CCCCCC">closed</font><font color="#E5E5E5"> or vulnerability exists in the</font>

1163
00:43:06,640 --> 00:43:11,140
<font color="#CCCCCC">waste server message block 1.0 handles</font>

1164
00:43:09,850 --> 00:43:12,549
certain<font color="#E5E5E5"> requests an attacker who</font>

1165
00:43:11,140 --> 00:43:14,080
successfully<font color="#E5E5E5"> exploited it could craft a</font>

1166
00:43:12,550 --> 00:43:16,870
special packet lead to<font color="#E5E5E5"> information</font>

1167
00:43:14,080 --> 00:43:19,990
disclosure<font color="#CCCCCC"> in most situations blah blah</font>

1168
00:43:16,870 --> 00:43:22,509
<font color="#CCCCCC">blah has to be 1.0</font><font color="#E5E5E5"> and just apply the</font>

1169
00:43:19,990 --> 00:43:23,919
pad so when you when you<font color="#E5E5E5"> clicked on this</font>

1170
00:43:22,510 --> 00:43:25,750
particular update<font color="#E5E5E5"> you're going to get</font>

1171
00:43:23,920 --> 00:43:29,410
that<font color="#E5E5E5"> cumulative update now this one I'm</font>

1172
00:43:25,750 --> 00:43:32,140
going to do the reversing arm real

1173
00:43:29,410 --> 00:43:33,819
quickly is<font color="#CCCCCC"> going to be</font><font color="#E5E5E5"> Windows 7 I don't</font>

1174
00:43:32,140 --> 00:43:36,520
have a working<font color="#E5E5E5"> exploit of this one but</font>

1175
00:43:33,820 --> 00:43:37,480
<font color="#CCCCCC">we'll still take a quick look because</font>

1176
00:43:36,520 --> 00:43:39,280
<font color="#E5E5E5">I'm not going to spend my time</font><font color="#CCCCCC"> on</font>

1177
00:43:37,480 --> 00:43:41,750
information disclosure bugs

1178
00:43:39,280 --> 00:43:56,690
so let<font color="#E5E5E5"> me go back to Windows 7 where</font>

1179
00:43:41,750 --> 00:44:01,280
I've got Ida<font color="#CCCCCC"> all right so right here at</font>

1180
00:43:56,690 --> 00:44:03,800
<font color="#E5E5E5">this loaded server</font><font color="#CCCCCC"> SS RV is associated</font>

1181
00:44:01,280 --> 00:44:05,380
with SMB<font color="#E5E5E5"> and if we were to look at where</font>

1182
00:44:03,800 --> 00:44:14,090
I got this<font color="#E5E5E5"> from let me show you the</font>

1183
00:44:05,380 --> 00:44:17,390
extraction so we go<font color="#CCCCCC"> to this</font><font color="#E5E5E5"> one was from</font>

1184
00:44:14,090 --> 00:44:20,960
<font color="#E5E5E5">March I believe</font><font color="#CCCCCC"> so March x86</font><font color="#E5E5E5"> and we</font>

1185
00:44:17,390 --> 00:44:26,120
scroll down<font color="#E5E5E5"> to SMB and right here</font>

1186
00:44:20,960 --> 00:44:27,470
version<font color="#E5E5E5"> 1 go in there and</font><font color="#CCCCCC"> that's where I</font>

1187
00:44:26,120 --> 00:44:29,330
<font color="#E5E5E5">just pulled that file from</font><font color="#CCCCCC"> that so</font>

1188
00:44:27,470 --> 00:44:30,709
that's<font color="#E5E5E5"> the extraction I went</font><font color="#CCCCCC"> and got the</font>

1189
00:44:29,330 --> 00:44:32,299
old version<font color="#E5E5E5"> and</font><font color="#CCCCCC"> that's the moment</font><font color="#E5E5E5"> got</font>

1190
00:44:30,710 --> 00:44:33,680
<font color="#E5E5E5">loaded right now and then the new</font>

1191
00:44:32,300 --> 00:44:35,450
version is<font color="#E5E5E5"> right here so</font><font color="#CCCCCC"> that's the one</font>

1192
00:44:33,680 --> 00:44:36,109
we're going to diff against so<font color="#E5E5E5"> they go</font>

1193
00:44:35,450 --> 00:44:48,500
<font color="#E5E5E5">back</font><font color="#CCCCCC"> to Ida</font>

1194
00:44:36,110 --> 00:44:54,980
<font color="#E5E5E5">I'll hit</font><font color="#CCCCCC"> control</font><font color="#E5E5E5"> 6</font><font color="#CCCCCC"> diff database give</font>

1195
00:44:48,500 --> 00:44:56,090
<font color="#CCCCCC">you a moment and we'll dip it against</font>

1196
00:44:54,980 --> 00:44:58,360
<font color="#E5E5E5">the new one so this shouldn't take long</font>

1197
00:44:56,090 --> 00:45:01,010
at all<font color="#CCCCCC"> it's pretty small files</font><font color="#E5E5E5"> and I got</font>

1198
00:44:58,360 --> 00:45:04,160
705 functions to give an example

1199
00:45:01,010 --> 00:45:06,110
sometimes<font color="#CCCCCC"> Ms HTML dot DLL can have 30 40</font>

1200
00:45:04,160 --> 00:45:08,270
<font color="#E5E5E5">50 thousand or more functions it's a</font>

1201
00:45:06,110 --> 00:45:11,050
massive file to go through so it's<font color="#E5E5E5"> going</font>

1202
00:45:08,270 --> 00:45:13,940
<font color="#E5E5E5">to close these guys none of zoom in now</font>

1203
00:45:11,050 --> 00:45:15,890
<font color="#CCCCCC">this one a lot more code changes than</font>

1204
00:45:13,940 --> 00:45:18,290
that last<font color="#E5E5E5"> example</font><font color="#CCCCCC"> I showed you</font><font color="#E5E5E5"> so when I</font>

1205
00:45:15,890 --> 00:45:20,000
sort by similarity<font color="#CCCCCC"> you can see that most</font>

1206
00:45:18,290 --> 00:45:21,650
<font color="#E5E5E5">of them are same but up here we got</font>

1207
00:45:20,000 --> 00:45:22,850
quite a<font color="#E5E5E5"> few changes but that's way</font>

1208
00:45:21,650 --> 00:45:25,070
better<font color="#E5E5E5"> than all these having to go</font>

1209
00:45:22,850 --> 00:45:26,150
<font color="#CCCCCC">through everything right so we again</font>

1210
00:45:25,070 --> 00:45:29,030
<font color="#E5E5E5">want to look for things that look</font>

1211
00:45:26,150 --> 00:45:30,350
<font color="#E5E5E5">interesting these</font><font color="#CCCCCC"> WPP</font><font color="#E5E5E5"> this mangled stuff</font>

1212
00:45:29,030 --> 00:45:32,000
on the end I<font color="#E5E5E5"> don't know what that</font><font color="#CCCCCC"> is</font>

1213
00:45:30,350 --> 00:45:34,520
<font color="#CCCCCC">right now</font><font color="#E5E5E5"> something used for function</font>

1214
00:45:32,000 --> 00:45:35,420
overloading or<font color="#CCCCCC"> I I</font><font color="#E5E5E5"> don't know but we</font>

1215
00:45:34,520 --> 00:45:37,820
want to look<font color="#CCCCCC"> for things that have</font>

1216
00:45:35,420 --> 00:45:40,490
<font color="#E5E5E5">something intuitive and so we see stuff</font>

1217
00:45:37,820 --> 00:45:42,440
<font color="#E5E5E5">like server SMB transaction that looks</font>

1218
00:45:40,490 --> 00:45:45,189
interesting<font color="#CCCCCC"> to me so I'll go</font><font color="#E5E5E5"> ahead and</font>

1219
00:45:42,440 --> 00:45:45,190
do a visual disk

1220
00:45:46,780 --> 00:45:51,800
and it's another<font color="#CCCCCC"> relatively large</font>

1221
00:45:49,010 --> 00:45:53,090
function so I'm going<font color="#E5E5E5"> to zoom in and I'm</font>

1222
00:45:51,800 --> 00:45:56,920
<font color="#E5E5E5">going to duck my</font><font color="#CCCCCC"> head down</font><font color="#E5E5E5"> to find the</font>

1223
00:45:53,090 --> 00:45:56,920
bug<font color="#E5E5E5"> or what I think is</font><font color="#CCCCCC"> the fix</font>

1224
00:45:57,490 --> 00:46:09,919
give me a moment<font color="#CCCCCC"> I say here's the bug</font>

1225
00:46:06,950 --> 00:46:12,350
<font color="#E5E5E5">that was fixed right here this is the</font>

1226
00:46:09,920 --> 00:46:14,570
unpatched<font color="#CCCCCC"> died on the</font><font color="#E5E5E5"> left and if it's a</font>

1227
00:46:12,350 --> 00:46:16,520
<font color="#CCCCCC">patch died on the right so you</font><font color="#E5E5E5"> can see</font>

1228
00:46:14,570 --> 00:46:18,620
it runs<font color="#E5E5E5"> this code</font><font color="#CCCCCC"> is system disassembly</font>

1229
00:46:16,520 --> 00:46:24,170
here and then it on the unpatched

1230
00:46:18,620 --> 00:46:36,980
version<font color="#E5E5E5"> it goes down so</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> hard when</font>

1231
00:46:24,170 --> 00:46:38,510
I'm<font color="#CCCCCC"> zoom document moment actually I</font>

1232
00:46:36,980 --> 00:46:41,170
<font color="#E5E5E5">don't</font><font color="#CCCCCC"> think it was the bug give me one</font>

1233
00:46:38,510 --> 00:46:41,170
more<font color="#E5E5E5"> moment here</font>

1234
00:47:08,500 --> 00:47:18,020
there it is<font color="#E5E5E5"> who took</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> moment</font><font color="#CCCCCC"> so over on</font>

1235
00:47:11,690 --> 00:47:19,760
the unpatched version down here you can

1236
00:47:18,020 --> 00:47:21,970
<font color="#E5E5E5">see it runs this block of</font><font color="#CCCCCC"> code and then</font>

1237
00:47:19,760 --> 00:47:25,520
it<font color="#E5E5E5"> goes down and calls a function called</font>

1238
00:47:21,970 --> 00:47:31,939
<font color="#E5E5E5">execute transaction over</font><font color="#CCCCCC"> on the patch</font>

1239
00:47:25,520 --> 00:47:33,410
side it has that same block<font color="#E5E5E5"> of code some</font>

1240
00:47:31,940 --> 00:47:35,750
code changes in it but the<font color="#E5E5E5"> same block</font>

1241
00:47:33,410 --> 00:47:38,029
<font color="#CCCCCC">but it doesn't directly go down and call</font>

1242
00:47:35,750 --> 00:47:41,140
there's no line going<font color="#CCCCCC"> to that call to</font>

1243
00:47:38,030 --> 00:47:44,600
execute transaction like we saw before

1244
00:47:41,140 --> 00:47:46,370
<font color="#CCCCCC">first what it does is</font><font color="#E5E5E5"> goes this way</font><font color="#CCCCCC"> and</font>

1245
00:47:44,600 --> 00:47:50,900
let me try to get there<font color="#CCCCCC"> without screwing</font>

1246
00:47:46,370 --> 00:47:53,000
<font color="#CCCCCC">this</font><font color="#E5E5E5"> up and it calls</font><font color="#CCCCCC"> mem set so</font><font color="#E5E5E5"> that</font>

1247
00:47:50,900 --> 00:47:55,160
clearly<font color="#E5E5E5"> looks</font><font color="#CCCCCC"> like it's setting</font><font color="#E5E5E5"> the</font>

1248
00:47:53,000 --> 00:47:56,480
memory before<font color="#E5E5E5"> it allows some transaction</font>

1249
00:47:55,160 --> 00:47:59,210
to execute it that way the memory

1250
00:47:56,480 --> 00:48:01,130
disclosure<font color="#E5E5E5"> is gone so that's</font><font color="#CCCCCC"> going</font><font color="#E5E5E5"> to be</font>

1251
00:47:59,210 --> 00:48:11,660
all the<font color="#E5E5E5"> zeros now so it's interesting</font>

1252
00:48:01,130 --> 00:48:12,890
right so let me<font color="#E5E5E5"> see</font><font color="#CCCCCC"> what time it is we</font>

1253
00:48:11,660 --> 00:48:14,629
have a couple more<font color="#CCCCCC"> minutes here so I'll</font>

1254
00:48:12,890 --> 00:48:16,839
show you<font color="#E5E5E5"> one last example it's an oldie</font>

1255
00:48:14,630 --> 00:48:18,680
but goodie<font color="#E5E5E5"> it's</font><font color="#CCCCCC"> used a</font><font color="#E5E5E5"> lot as</font>

1256
00:48:16,840 --> 00:48:20,480
demonstrations and examples I actually

1257
00:48:18,680 --> 00:48:22,850
<font color="#E5E5E5">use it</font><font color="#CCCCCC"> in one of</font><font color="#E5E5E5"> my courses because it's</font>

1258
00:48:20,480 --> 00:48:25,100
really digestible<font color="#CCCCCC"> its exploitable and</font>

1259
00:48:22,850 --> 00:48:27,259
it's digestible<font color="#E5E5E5"> meaning you can get it</font>

1260
00:48:25,100 --> 00:48:29,509
in one<font color="#E5E5E5"> sitting</font><font color="#CCCCCC"> if you're in that type of</font>

1261
00:48:27,260 --> 00:48:32,330
a class<font color="#E5E5E5"> so this was an animated cursor</font>

1262
00:48:29,510 --> 00:48:34,580
bug<font color="#E5E5E5"> that came out back in 2007 it's a</font>

1263
00:48:32,330 --> 00:48:37,160
funny story<font color="#CCCCCC"> because</font><font color="#E5E5E5"> in 2005</font><font color="#CCCCCC"> EE</font><font color="#E5E5E5"> I</font>

1264
00:48:34,580 --> 00:48:40,549
digitized<font color="#CCCCCC"> acuity discovered the same</font>

1265
00:48:37,160 --> 00:48:45,230
type of<font color="#E5E5E5"> bug in the same DLL only one</font>

1266
00:48:40,550 --> 00:48:47,840
function away<font color="#E5E5E5"> Alexander so</font><font color="#CCCCCC"> drove in 2007</font>

1267
00:48:45,230 --> 00:48:50,150
was doing some<font color="#CCCCCC"> analysis of</font><font color="#E5E5E5"> that earlier</font>

1268
00:48:47,840 --> 00:48:52,550
<font color="#E5E5E5">patch in the file I believe and he</font>

1269
00:48:50,150 --> 00:48:55,790
noticed<font color="#CCCCCC"> that</font><font color="#E5E5E5"> one cross-reference away</font>

1270
00:48:52,550 --> 00:48:57,290
was the exact same bug<font color="#E5E5E5"> so if you would</font>

1271
00:48:55,790 --> 00:49:00,080
have<font color="#E5E5E5"> just</font><font color="#CCCCCC"> taken the time to do it's</font>

1272
00:48:57,290 --> 00:49:01,700
<font color="#E5E5E5">really hard control X and Ida and take a</font>

1273
00:49:00,080 --> 00:49:03,590
look<font color="#CCCCCC"> you would</font><font color="#E5E5E5"> have found that bug so</font>

1274
00:49:01,700 --> 00:49:05,029
that happens sometimes<font color="#CCCCCC"> and it's a little</font>

1275
00:49:03,590 --> 00:49:06,130
<font color="#CCCCCC">bit embarrassing for the</font><font color="#E5E5E5"> organization</font>

1276
00:49:05,030 --> 00:49:07,599
<font color="#CCCCCC">involved but</font>

1277
00:49:06,130 --> 00:49:09,460
it is what it is<font color="#CCCCCC"> so I'm going to go and</font>

1278
00:49:07,599 --> 00:49:30,849
<font color="#E5E5E5">try to load that real quickly give me a</font>

1279
00:49:09,460 --> 00:49:36,460
moment so I look at the one for Vista

1280
00:49:30,849 --> 00:49:38,470
<font color="#CCCCCC">will first load the patch version in and</font>

1281
00:49:36,460 --> 00:49:40,119
we're going to<font color="#E5E5E5"> go to a function actually</font>

1282
00:49:38,470 --> 00:49:48,910
<font color="#E5E5E5">I'll dip</font><font color="#CCCCCC"> it so we can see what's going</font>

1283
00:49:40,119 --> 00:49:50,470
<font color="#E5E5E5">on so let the different it won't take</font>

1284
00:49:48,910 --> 00:49:52,140
too<font color="#CCCCCC"> long it's a</font><font color="#E5E5E5"> vista file so it's not</font>

1285
00:49:50,470 --> 00:49:54,759
<font color="#CCCCCC">very large</font>

1286
00:49:52,140 --> 00:49:57,788
this has<font color="#CCCCCC"> 2100 functions in it so</font><font color="#E5E5E5"> we'll</font>

1287
00:49:54,759 --> 00:50:03,519
go close this out<font color="#CCCCCC"> and</font><font color="#E5E5E5"> hear the results</font>

1288
00:49:57,789 --> 00:50:04,869
so let's zoom<font color="#E5E5E5"> in sort by similarity it's</font>

1289
00:50:03,519 --> 00:50:06,788
<font color="#E5E5E5">another easy one where there's only one</font>

1290
00:50:04,869 --> 00:50:08,980
change right<font color="#CCCCCC"> it's a load and I icon</font>

1291
00:50:06,789 --> 00:50:11,500
<font color="#CCCCCC">that's what I'm saying by function names</font>

1292
00:50:08,980 --> 00:50:15,000
<font color="#E5E5E5">being useful load animated icon you know</font>

1293
00:50:11,500 --> 00:50:22,630
what that does then so we go<font color="#CCCCCC"> ahead and</font>

1294
00:50:15,000 --> 00:50:24,069
load up a graphical<font color="#CCCCCC"> diff and as a few</font>

1295
00:50:22,630 --> 00:50:26,490
<font color="#E5E5E5">changes in here so let</font><font color="#CCCCCC"> me identify</font><font color="#E5E5E5"> it</font>

1296
00:50:24,069 --> 00:50:26,490
real quickly

1297
00:50:40,060 --> 00:50:44,840
and here's the patch I have the patched

1298
00:50:42,920 --> 00:50:50,230
version on the<font color="#CCCCCC"> left this time</font><font color="#E5E5E5"> and you</font>

1299
00:50:44,840 --> 00:50:53,660
can see there is this comparison<font color="#E5E5E5"> here it</font>

1300
00:50:50,230 --> 00:50:56,720
says<font color="#E5E5E5"> compare some offset</font><font color="#CCCCCC"> and memory on</font>

1301
00:50:53,660 --> 00:50:59,540
the stack<font color="#CCCCCC"> to hex to four before you</font>

1302
00:50:56,720 --> 00:51:02,629
<font color="#CCCCCC">actually then call a function called</font>

1303
00:50:59,540 --> 00:51:04,430
<font color="#E5E5E5">read chunk</font><font color="#CCCCCC"> B chunks right there on the</font>

1304
00:51:02,630 --> 00:51:06,560
unpassed version over here you see<font color="#E5E5E5"> that</font>

1305
00:51:04,430 --> 00:51:11,750
<font color="#E5E5E5">same call to read chunk but when you go</font>

1306
00:51:06,560 --> 00:51:13,549
up<font color="#CCCCCC"> there is no check to</font><font color="#E5E5E5"> 24 hex against</font>

1307
00:51:11,750 --> 00:51:17,540
some stack variable<font color="#E5E5E5"> so that's a</font><font color="#CCCCCC"> balanced</font>

1308
00:51:13,550 --> 00:51:19,220
check there and what this leads<font color="#E5E5E5"> to I'll</font>

1309
00:51:17,540 --> 00:51:25,550
show you<font color="#E5E5E5"> so I'll go back out of here</font><font color="#CCCCCC"> and</font>

1310
00:51:19,220 --> 00:51:28,069
<font color="#CCCCCC">we'll</font><font color="#E5E5E5"> go to load and I icon so here's</font>

1311
00:51:25,550 --> 00:51:35,990
that function and<font color="#E5E5E5"> we're just talking</font>

1312
00:51:28,070 --> 00:51:39,920
<font color="#CCCCCC">about</font><font color="#E5E5E5"> pretty large</font><font color="#CCCCCC"> you zoom out and</font><font color="#E5E5E5"> you</font>

1313
00:51:35,990 --> 00:51:41,270
<font color="#E5E5E5">can see here is that comparison</font><font color="#CCCCCC"> to two</font>

1314
00:51:39,920 --> 00:51:43,250
<font color="#CCCCCC">four so we're looking at actually the</font>

1315
00:51:41,270 --> 00:51:44,330
patched version right<font color="#E5E5E5"> now and not the</font>

1316
00:51:43,250 --> 00:51:45,619
unpatched version in the unpatched

1317
00:51:44,330 --> 00:51:47,779
version that doesn't<font color="#E5E5E5"> exist like you just</font>

1318
00:51:45,619 --> 00:51:49,430
saw and then it calls<font color="#E5E5E5"> read chunk</font><font color="#CCCCCC"> what</font>

1319
00:51:47,780 --> 00:51:51,440
happens<font color="#E5E5E5"> when it calls read chunk them is</font>

1320
00:51:49,430 --> 00:51:53,390
we go and call a function<font color="#CCCCCC"> called a read</font>

1321
00:51:51,440 --> 00:51:55,250
file<font color="#E5E5E5"> porn or copy which leads us to</font><font color="#CCCCCC"> a</font>

1322
00:51:53,390 --> 00:51:59,150
call to mem copy and that's<font color="#E5E5E5"> the problem</font>

1323
00:51:55,250 --> 00:52:02,990
mem copies taken the Desai's argument

1324
00:51:59,150 --> 00:52:06,100
based on a stack something on a stack

1325
00:52:02,990 --> 00:52:08,180
<font color="#CCCCCC">and it's an attacker</font><font color="#E5E5E5"> crafts</font><font color="#CCCCCC"> a malicious</font>

1326
00:52:06,100 --> 00:52:11,060
animated cursor and<font color="#E5E5E5"> it gets loaded by a</font>

1327
00:52:08,180 --> 00:52:12,950
browser<font color="#E5E5E5"> then it will trust what's in</font>

1328
00:52:11,060 --> 00:52:14,810
that<font color="#E5E5E5"> animated cursor as to size and then</font>

1329
00:52:12,950 --> 00:52:16,399
copies like okay<font color="#CCCCCC"> I got</font><font color="#E5E5E5"> it from there in</font>

1330
00:52:14,810 --> 00:52:18,140
memory<font color="#E5E5E5"> so I'm just going to copy as much</font>

1331
00:52:16,400 --> 00:52:20,810
as you<font color="#CCCCCC"> ask me to and it results in a</font>

1332
00:52:18,140 --> 00:52:23,868
buffer overflow<font color="#E5E5E5"> and that what</font><font color="#CCCCCC"> that check</font>

1333
00:52:20,810 --> 00:52:25,369
does it says<font color="#E5E5E5"> it has to equal hex to</font><font color="#CCCCCC"> four</font>

1334
00:52:23,869 --> 00:52:27,320
that should be the<font color="#E5E5E5"> size of the animated</font>

1335
00:52:25,369 --> 00:52:29,570
header<font color="#CCCCCC"> so you can't crap the malicious</font>

1336
00:52:27,320 --> 00:52:32,420
and<font color="#CCCCCC"> it made a curse at this time</font><font color="#E5E5E5"> and the</font>

1337
00:52:29,570 --> 00:52:34,609
funny part that I was saying is if we do

1338
00:52:32,420 --> 00:52:37,150
a<font color="#CCCCCC"> cross-reference to the beginning of</font>

1339
00:52:34,609 --> 00:52:37,150
this function

1340
00:52:40,650 --> 00:52:45,900
and now we're back to<font color="#CCCCCC"> the</font><font color="#E5E5E5"> caller so what</font>

1341
00:52:43,080 --> 00:52:48,180
I just<font color="#CCCCCC"> did is I said who actually</font><font color="#E5E5E5"> calls</font>

1342
00:52:45,900 --> 00:52:49,980
the function<font color="#E5E5E5"> load and I</font><font color="#CCCCCC"> icon and it's a</font>

1343
00:52:48,180 --> 00:52:52,169
<font color="#E5E5E5">function called Lu</font><font color="#CCCCCC"> loathe</font><font color="#E5E5E5"> cursor icon</font>

1344
00:52:49,980 --> 00:52:54,120
from<font color="#CCCCCC"> file map</font><font color="#E5E5E5"> so here's where that call</font>

1345
00:52:52,170 --> 00:52:56,760
occurs and the way to put the patch<font color="#E5E5E5"> if</font>

1346
00:52:54,120 --> 00:53:00,390
we<font color="#CCCCCC"> zoom up and follow back earlier on</font>

1347
00:52:56,760 --> 00:53:03,120
you<font color="#CCCCCC"> can see that same exact thing</font>

1348
00:53:00,390 --> 00:53:05,310
happening<font color="#CCCCCC"> again compare a nih to</font>

1349
00:53:03,120 --> 00:53:07,259
something on<font color="#E5E5E5"> the stack and then do that</font>

1350
00:53:05,310 --> 00:53:08,940
sanity check the little validation<font color="#CCCCCC"> and</font>

1351
00:53:07,260 --> 00:53:11,100
then call read chunk that's what<font color="#E5E5E5"> i was</font>

1352
00:53:08,940 --> 00:53:13,260
<font color="#E5E5E5">saying by one function away that same</font>

1353
00:53:11,100 --> 00:53:14,910
bug existed and they just didn't<font color="#CCCCCC"> notice</font>

1354
00:53:13,260 --> 00:53:16,500
it<font color="#E5E5E5"> and it took two years to discover it</font>

1355
00:53:14,910 --> 00:53:22,440
<font color="#E5E5E5">and these bugs</font><font color="#CCCCCC"> sometimes sit around for</font>

1356
00:53:16,500 --> 00:53:24,510
a very long<font color="#CCCCCC"> time as we've seen alright</font>

1357
00:53:22,440 --> 00:53:26,670
so that is<font color="#CCCCCC"> the end of the presentation</font>

1358
00:53:24,510 --> 00:53:28,050
it<font color="#E5E5E5"> is</font><font color="#CCCCCC"> 253 I've definitely have time</font><font color="#E5E5E5"> for</font>

1359
00:53:26,670 --> 00:53:30,030
a couple<font color="#E5E5E5"> questions if anyone has</font>

1360
00:53:28,050 --> 00:53:31,350
<font color="#CCCCCC">anything to ask</font><font color="#E5E5E5"> otherwise thank you very</font>

1361
00:53:30,030 --> 00:53:33,300
<font color="#E5E5E5">much for attending and hopefully I'll</font>

1362
00:53:31,350 --> 00:53:41,828
see you<font color="#E5E5E5"> again</font><font color="#CCCCCC"> sometime</font>

1363
00:53:33,300 --> 00:53:41,829
[Applause]

1364
00:53:45,500 --> 00:53:55,829
yep I'll go away<font color="#E5E5E5"> to practices go oh you</font>

1365
00:53:53,010 --> 00:53:58,680
can google<font color="#CCCCCC"> around for examples of people</font>

1366
00:53:55,829 --> 00:53:59,910
<font color="#E5E5E5">have done</font><font color="#CCCCCC"> patched if publicly like look</font>

1367
00:53:58,680 --> 00:54:01,319
at<font color="#CCCCCC"> people like Jacque seen curette and</font>

1368
00:53:59,910 --> 00:54:04,558
other folks who have released those kind

1369
00:54:01,319 --> 00:54:06,029
of things publicly<font color="#CCCCCC"> there's starting with</font>

1370
00:54:04,559 --> 00:54:07,260
one<font color="#E5E5E5"> of the earlier patches something</font>

1371
00:54:06,030 --> 00:54:09,329
that<font color="#CCCCCC"> looks relatively easy</font>

1372
00:54:07,260 --> 00:54:12,589
you know and and going through an easy

1373
00:54:09,329 --> 00:54:12,589
example like I was just<font color="#CCCCCC"> showing you</font>

1374
00:54:14,930 --> 00:54:19,200
yep

1375
00:54:17,180 --> 00:54:20,549
where can<font color="#E5E5E5"> you access the</font><font color="#CCCCCC"> PowerPoint I</font>

1376
00:54:19,200 --> 00:54:27,210
don't know<font color="#E5E5E5"> it it gets posted</font><font color="#CCCCCC"> yeah I</font>

1377
00:54:20,550 --> 00:54:30,050
think<font color="#E5E5E5"> it's been recorded right okay</font><font color="#CCCCCC"> yeah</font>

1378
00:54:27,210 --> 00:54:30,050
it'll be a little tweet it

