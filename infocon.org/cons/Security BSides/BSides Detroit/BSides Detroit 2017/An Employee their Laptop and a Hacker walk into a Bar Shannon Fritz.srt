1
00:00:04,310 --> 00:00:14,489
<font color="#CCCCCC">hey what I forgot where I was</font><font color="#E5E5E5"> I've</font>

2
00:00:09,240 --> 00:00:15,960
initiated<font color="#CCCCCC"> all right</font><font color="#E5E5E5"> well thank you</font>

3
00:00:14,490 --> 00:00:17,910
everybody for<font color="#E5E5E5"> joining me on this the</font>

4
00:00:15,960 --> 00:00:19,550
<font color="#E5E5E5">last session of b-sides today's</font>

5
00:00:17,910 --> 00:00:25,560
everybody<font color="#E5E5E5"> even having a good time</font><font color="#CCCCCC"> so far</font>

6
00:00:19,550 --> 00:00:27,539
<font color="#E5E5E5">yeah all right great</font><font color="#CCCCCC"> so I have a</font>

7
00:00:25,560 --> 00:00:30,359
presentation<font color="#CCCCCC"> that I normally do in two</font>

8
00:00:27,539 --> 00:00:31,740
parts<font color="#CCCCCC"> that</font><font color="#E5E5E5"> normally takes almost three</font>

9
00:00:30,359 --> 00:00:33,329
hours<font color="#E5E5E5"> to go through</font><font color="#CCCCCC"> and I'm going to</font>

10
00:00:31,740 --> 00:00:34,620
cram it<font color="#E5E5E5"> into 50 minutes which means I'm</font>

11
00:00:33,329 --> 00:00:35,969
going<font color="#E5E5E5"> to do a lot of demos a lot of</font>

12
00:00:34,620 --> 00:00:37,649
talking a little<font color="#E5E5E5"> bit of talk about</font>

13
00:00:35,969 --> 00:00:39,090
remediation<font color="#E5E5E5"> and at the end of it I'll</font>

14
00:00:37,649 --> 00:00:40,680
give<font color="#E5E5E5"> you my email address with a</font>

15
00:00:39,090 --> 00:00:42,780
specially crafted subject line<font color="#CCCCCC"> it'll</font>

16
00:00:40,680 --> 00:00:44,090
automatically<font color="#CCCCCC"> email you the deck okay so</font>

17
00:00:42,780 --> 00:00:46,829
you have to<font color="#CCCCCC"> worry too much about getting</font>

18
00:00:44,090 --> 00:00:48,420
<font color="#E5E5E5">notes if you do have questions you might</font>

19
00:00:46,829 --> 00:00:50,460
<font color="#E5E5E5">be able to</font><font color="#CCCCCC"> sneak</font><font color="#E5E5E5"> one</font><font color="#CCCCCC"> in but</font><font color="#E5E5E5"> otherwise</font>

20
00:00:48,420 --> 00:00:51,420
try and crab me afterwards<font color="#E5E5E5"> which also is</font>

21
00:00:50,460 --> 00:00:54,059
going<font color="#CCCCCC"> to be a short window</font><font color="#E5E5E5"> because I</font>

22
00:00:51,420 --> 00:00:56,579
have to catch a flight<font color="#CCCCCC"> really fast</font><font color="#E5E5E5"> so I</font>

23
00:00:54,059 --> 00:00:58,890
want to<font color="#E5E5E5"> walk</font><font color="#CCCCCC"> you through a series of</font>

24
00:00:56,579 --> 00:01:01,109
<font color="#E5E5E5">attacks that we can do and I'm really</font>

25
00:00:58,890 --> 00:01:02,820
<font color="#E5E5E5">glad that I heard earlier</font><font color="#CCCCCC"> about</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> idea</font>

26
00:01:01,109 --> 00:01:05,850
of<font color="#CCCCCC"> needing to</font><font color="#E5E5E5"> get back to basics because</font>

27
00:01:02,820 --> 00:01:08,070
what I'm<font color="#E5E5E5"> doing in this series is all</font>

28
00:01:05,850 --> 00:01:10,500
basic stuff<font color="#CCCCCC"> right I'm trying to</font><font color="#E5E5E5"> show</font>

29
00:01:08,070 --> 00:01:13,080
some exploits and<font color="#CCCCCC"> atactic we can do</font><font color="#E5E5E5"> that</font>

30
00:01:10,500 --> 00:01:15,960
take<font color="#CCCCCC"> advantage of some bad practices for</font>

31
00:01:13,080 --> 00:01:19,350
configurations<font color="#E5E5E5"> and just see where we can</font>

32
00:01:15,960 --> 00:01:22,380
go<font color="#E5E5E5"> from there</font><font color="#CCCCCC"> so when</font><font color="#E5E5E5"> we go</font><font color="#CCCCCC"> through this</font>

33
00:01:19,350 --> 00:01:24,059
list I am<font color="#CCCCCC"> using</font><font color="#E5E5E5"> some really lazy</font><font color="#CCCCCC"> really</font>

34
00:01:22,380 --> 00:01:25,408
loud kinds of activities<font color="#CCCCCC"> these aren't</font>

35
00:01:24,060 --> 00:01:27,360
<font color="#E5E5E5">necessarily the kinds of attacks that</font>

36
00:01:25,409 --> 00:01:29,250
<font color="#E5E5E5">you might see from you know experienced</font>

37
00:01:27,360 --> 00:01:30,509
<font color="#E5E5E5">and seasoned pen testers but these are</font>

38
00:01:29,250 --> 00:01:32,430
also the<font color="#E5E5E5"> kinds of things that pretty</font>

39
00:01:30,509 --> 00:01:33,630
much anybody can do<font color="#E5E5E5"> and some of these</font>

40
00:01:32,430 --> 00:01:34,860
<font color="#E5E5E5">things</font><font color="#CCCCCC"> they're going</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> go</font><font color="#E5E5E5"> through</font><font color="#CCCCCC"> you</font>

41
00:01:33,630 --> 00:01:37,490
<font color="#E5E5E5">should be able</font><font color="#CCCCCC"> to remember</font><font color="#E5E5E5"> how to do</font>

42
00:01:34,860 --> 00:01:39,689
them right<font color="#CCCCCC"> after</font><font color="#E5E5E5"> we go</font><font color="#CCCCCC"> through them so</font>

43
00:01:37,490 --> 00:01:41,579
<font color="#CCCCCC">there</font><font color="#E5E5E5"> are obviously better</font><font color="#CCCCCC"> tools that</font>

44
00:01:39,689 --> 00:01:43,039
you can<font color="#E5E5E5"> use but we're not</font><font color="#CCCCCC"> necessarily</font>

45
00:01:41,579 --> 00:01:45,750
<font color="#E5E5E5">going to use any of the Suites of things</font>

46
00:01:43,040 --> 00:01:47,399
<font color="#E5E5E5">so just to</font><font color="#CCCCCC"> kind of set the stage we're</font>

47
00:01:45,750 --> 00:01:49,350
going<font color="#CCCCCC"> to start at the beginning where we</font>

48
00:01:47,399 --> 00:01:51,270
<font color="#E5E5E5">have to get into</font><font color="#CCCCCC"> an environment and then</font>

49
00:01:49,350 --> 00:01:52,199
we're<font color="#E5E5E5"> going to grab a foothold and do</font>

50
00:01:51,270 --> 00:01:54,119
some reconnaissance

51
00:01:52,200 --> 00:01:55,259
find our way<font color="#CCCCCC"> around the environment and</font>

52
00:01:54,119 --> 00:01:57,299
then actually<font color="#E5E5E5"> get to the point where we</font>

53
00:01:55,259 --> 00:01:58,619
steal some stuff<font color="#E5E5E5"> right</font><font color="#CCCCCC"> so the</font><font color="#E5E5E5"> first</font>

54
00:01:57,299 --> 00:02:00,810
thing we're going to do this<font color="#E5E5E5"> also</font>

55
00:01:58,619 --> 00:02:02,219
<font color="#E5E5E5">relates to the three machines that</font>

56
00:02:00,810 --> 00:02:03,600
ultimately we're going<font color="#CCCCCC"> to be</font><font color="#E5E5E5"> working on</font>

57
00:02:02,219 --> 00:02:05,939
first is the<font color="#E5E5E5"> workstation</font><font color="#CCCCCC"> that we're</font>

58
00:02:03,600 --> 00:02:08,489
going to<font color="#E5E5E5"> compromise find our way around</font>

59
00:02:05,939 --> 00:02:10,318
<font color="#E5E5E5">that box</font><font color="#CCCCCC"> steal some stuff off of it</font><font color="#E5E5E5"> use</font>

60
00:02:08,489 --> 00:02:11,310
<font color="#E5E5E5">that to jump</font><font color="#CCCCCC"> into a member server in an</font>

61
00:02:10,318 --> 00:02:13,290
environment<font color="#E5E5E5"> and</font>

62
00:02:11,310 --> 00:02:15,000
then<font color="#CCCCCC"> own that as well</font><font color="#E5E5E5"> and jump from</font>

63
00:02:13,290 --> 00:02:16,470
<font color="#E5E5E5">there over to</font><font color="#CCCCCC"> a domain</font><font color="#E5E5E5"> controller where</font>

64
00:02:15,000 --> 00:02:19,640
we ultimately<font color="#E5E5E5"> steal all the things that</font>

65
00:02:16,470 --> 00:02:24,359
<font color="#CCCCCC">sound</font><font color="#E5E5E5"> good when</font><font color="#CCCCCC"> I check it out okay</font>

66
00:02:19,640 --> 00:02:27,049
so first thing<font color="#CCCCCC"> I'm Shannon</font><font color="#E5E5E5"> fritz I'm a</font>

67
00:02:24,360 --> 00:02:29,550
Solutions Architect at concurrency<font color="#E5E5E5"> and</font>

68
00:02:27,050 --> 00:02:32,340
active currency my job is basically to

69
00:02:29,550 --> 00:02:33,930
<font color="#CCCCCC">work with customers on improving the way</font>

70
00:02:32,340 --> 00:02:35,819
that<font color="#CCCCCC"> they do things so I help people</font>

71
00:02:33,930 --> 00:02:38,430
figure<font color="#CCCCCC"> out better ways to</font><font color="#E5E5E5"> use tools that</font>

72
00:02:35,819 --> 00:02:41,220
<font color="#E5E5E5">they already have as well as work their</font>

73
00:02:38,430 --> 00:02:42,900
way through some problems<font color="#CCCCCC"> that they have</font>

74
00:02:41,220 --> 00:02:46,650
so one of the<font color="#E5E5E5"> problems I have</font><font color="#CCCCCC"> are my</font>

75
00:02:42,900 --> 00:02:53,730
notes are missing so we'll grab<font color="#E5E5E5"> but this</font>

76
00:02:46,650 --> 00:02:54,450
I said I<font color="#CCCCCC"> haven't no time</font><font color="#E5E5E5"> okay we'll use</font>

77
00:02:53,730 --> 00:03:00,200
<font color="#CCCCCC">this notes</font>

78
00:02:54,450 --> 00:03:01,890
great so<font color="#E5E5E5"> let's go ahead and</font><font color="#CCCCCC"> get started</font>

79
00:03:00,200 --> 00:03:05,640
<font color="#E5E5E5">we're going to kind</font><font color="#CCCCCC"> of set</font><font color="#E5E5E5"> the</font>

80
00:03:01,890 --> 00:03:07,048
<font color="#CCCCCC">environment where we are</font><font color="#E5E5E5"> at a company</font>

81
00:03:05,640 --> 00:03:08,910
where somebody<font color="#CCCCCC"> just like lost their</font>

82
00:03:07,049 --> 00:03:11,209
laptop<font color="#E5E5E5"> that could be somebody actually</font>

83
00:03:08,910 --> 00:03:13,829
got mugged<font color="#E5E5E5"> maybe they left it in a</font>

84
00:03:11,209 --> 00:03:15,450
<font color="#E5E5E5">subway or</font><font color="#CCCCCC"> something but like maybe</font>

85
00:03:13,830 --> 00:03:16,859
somebody<font color="#E5E5E5"> went</font><font color="#CCCCCC"> to the bar and they went</font>

86
00:03:15,450 --> 00:03:18,570
<font color="#E5E5E5">to the bathroom and come back in our</font>

87
00:03:16,859 --> 00:03:19,859
<font color="#CCCCCC">laptop's gone</font><font color="#E5E5E5"> right just like I did</font><font color="#CCCCCC"> just</font>

88
00:03:18,570 --> 00:03:23,100
<font color="#CCCCCC">before the thing nobody</font><font color="#E5E5E5"> stole my laptop</font>

89
00:03:19,859 --> 00:03:25,530
<font color="#E5E5E5">so thanks for that</font><font color="#CCCCCC"> yeah the question</font>

90
00:03:23,100 --> 00:03:27,000
<font color="#CCCCCC">though is what can happen to with that</font>

91
00:03:25,530 --> 00:03:27,930
laptop<font color="#CCCCCC"> you know sometimes people</font><font color="#E5E5E5"> are</font>

92
00:03:27,000 --> 00:03:29,489
thinking they're<font color="#E5E5E5"> just going to format</font>

93
00:03:27,930 --> 00:03:31,440
the<font color="#CCCCCC"> machine</font><font color="#E5E5E5"> and then you're going to</font>

94
00:03:29,489 --> 00:03:33,209
give it<font color="#CCCCCC"> to somebody right well</font><font color="#E5E5E5"> that's a</font>

95
00:03:31,440 --> 00:03:34,350
loss of equipment but<font color="#E5E5E5"> what else could</font>

96
00:03:33,209 --> 00:03:37,109
happen if<font color="#E5E5E5"> somebody</font><font color="#CCCCCC"> had</font><font color="#E5E5E5"> somewhere into</font>

97
00:03:34,350 --> 00:03:39,269
various things in mind<font color="#CCCCCC"> so let's go ahead</font>

98
00:03:37,109 --> 00:03:42,299
<font color="#E5E5E5">and jump over to the environment here</font>

99
00:03:39,269 --> 00:03:43,859
where maybe this is the laptop<font color="#E5E5E5"> so</font>

100
00:03:42,299 --> 00:03:45,959
assuming<font color="#E5E5E5"> that I'm the person</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> stole</font>

101
00:03:43,859 --> 00:03:48,540
<font color="#E5E5E5">the machine and I booted it up I can</font>

102
00:03:45,959 --> 00:03:50,850
tell that<font color="#E5E5E5"> this</font><font color="#CCCCCC"> is David's laptop right</font>

103
00:03:48,540 --> 00:03:52,709
<font color="#E5E5E5">and if I wanted</font><font color="#CCCCCC"> to I could click over</font>

104
00:03:50,850 --> 00:03:54,720
<font color="#CCCCCC">here another user</font><font color="#E5E5E5"> and I can see the name</font>

105
00:03:52,709 --> 00:03:57,900
<font color="#CCCCCC">of the domain that this is on so I get</font>

106
00:03:54,720 --> 00:04:00,660
an idea<font color="#E5E5E5"> of you know what</font><font color="#CCCCCC"> organization</font>

107
00:03:57,900 --> 00:04:02,910
this belongs<font color="#E5E5E5"> to if I want to get into</font>

108
00:04:00,660 --> 00:04:04,769
<font color="#CCCCCC">this machine</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> actually take some</font>

109
00:04:02,910 --> 00:04:05,760
stuff off of it if I knew his in the

110
00:04:04,769 --> 00:04:07,319
<font color="#E5E5E5">username and</font><font color="#CCCCCC"> password that'd be really</font>

111
00:04:05,760 --> 00:04:09,030
handy but I don't<font color="#CCCCCC"> right I don't</font><font color="#E5E5E5"> have his</font>

112
00:04:07,319 --> 00:04:10,290
finger so<font color="#CCCCCC"> I can't do</font><font color="#E5E5E5"> fingerprints</font><font color="#CCCCCC"> they</font>

113
00:04:09,030 --> 00:04:11,579
don't know his pin and I don't<font color="#E5E5E5"> know any</font>

114
00:04:10,290 --> 00:04:13,828
<font color="#E5E5E5">of those other kinds</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> gestures to get</font>

115
00:04:11,579 --> 00:04:16,260
into the<font color="#E5E5E5"> machine so</font><font color="#CCCCCC"> the easiest thing</font>

116
00:04:13,829 --> 00:04:18,750
<font color="#CCCCCC">that we can do it's</font><font color="#E5E5E5"> really just reboot</font>

117
00:04:16,260 --> 00:04:21,089
the computer<font color="#E5E5E5"> and of course we boot this</font>

118
00:04:18,750 --> 00:04:24,150
thing off of<font color="#E5E5E5"> a CD like the Windows setup</font>

119
00:04:21,089 --> 00:04:25,179
CD right so we're<font color="#E5E5E5"> not using</font><font color="#CCCCCC"> a hacking</font>

120
00:04:24,150 --> 00:04:26,229
tool or a suite<font color="#CCCCCC"> or anything</font>

121
00:04:25,180 --> 00:04:28,780
we're literally<font color="#E5E5E5"> just getting the windows</font>

122
00:04:26,229 --> 00:04:30,250
<font color="#E5E5E5">set up</font><font color="#CCCCCC"> disc</font><font color="#E5E5E5"> booting off of that and then</font>

123
00:04:28,780 --> 00:04:32,650
<font color="#E5E5E5">when we're running</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> Windows setup it</font>

124
00:04:30,250 --> 00:04:34,720
loads<font color="#CCCCCC"> windows PE if you Windows PE is</font>

125
00:04:32,650 --> 00:04:36,460
the<font color="#E5E5E5"> windows pre pre execution</font>

126
00:04:34,720 --> 00:04:38,979
environment which windows uses to run

127
00:04:36,460 --> 00:04:42,039
<font color="#CCCCCC">Windows setup and windows PE includes if</font>

128
00:04:38,979 --> 00:04:44,169
you hit shift<font color="#CCCCCC"> f10 a command prompt</font><font color="#E5E5E5"> right</font>

129
00:04:42,039 --> 00:04:45,820
so in this command prompt<font color="#E5E5E5"> we can start</font>

130
00:04:44,169 --> 00:04:48,340
<font color="#CCCCCC">looking around and interacting with the</font>

131
00:04:45,820 --> 00:04:50,259
<font color="#CCCCCC">system and</font><font color="#E5E5E5"> if we want to do things</font><font color="#CCCCCC"> with</font>

132
00:04:48,340 --> 00:04:52,900
a GUI<font color="#E5E5E5"> of course we can</font><font color="#CCCCCC"> do something like</font>

133
00:04:50,259 --> 00:04:55,690
<font color="#E5E5E5">notepad and notepad if we go into file</font>

134
00:04:52,900 --> 00:04:58,299
and choose<font color="#E5E5E5"> open we can</font><font color="#CCCCCC"> use this as a way</font>

135
00:04:55,690 --> 00:05:01,240
of<font color="#CCCCCC"> browsing around</font><font color="#E5E5E5"> file system and we</font>

136
00:04:58,300 --> 00:05:03,910
can<font color="#CCCCCC"> see</font><font color="#E5E5E5"> that I have on here the the C</font>

137
00:05:01,240 --> 00:05:06,490
Drive<font color="#E5E5E5"> and</font><font color="#CCCCCC"> I have a USB</font><font color="#E5E5E5"> Drive and</font><font color="#CCCCCC"> I can</font>

138
00:05:03,910 --> 00:05:09,430
use this to exfiltrate some data so what

139
00:05:06,490 --> 00:05:11,259
I'm going<font color="#CCCCCC"> to be using</font><font color="#E5E5E5"> it for but because</font>

140
00:05:09,430 --> 00:05:12,970
I have this I can<font color="#CCCCCC"> actually go ahead and</font>

141
00:05:11,259 --> 00:05:15,430
browse<font color="#CCCCCC"> around and see on the C Drive</font>

142
00:05:12,970 --> 00:05:17,380
<font color="#E5E5E5">under the users directory here's David's</font>

143
00:05:15,430 --> 00:05:19,720
profile<font color="#E5E5E5"> under</font><font color="#CCCCCC"> there I can see his</font>

144
00:05:17,380 --> 00:05:22,539
documents<font color="#E5E5E5"> and then if I change the type</font>

145
00:05:19,720 --> 00:05:25,630
down here to everything I can<font color="#E5E5E5"> like copy</font>

146
00:05:22,539 --> 00:05:30,430
this file<font color="#CCCCCC"> go over</font><font color="#E5E5E5"> here</font><font color="#CCCCCC"> to the USB</font><font color="#E5E5E5"> Drive</font>

147
00:05:25,630 --> 00:05:33,370
<font color="#E5E5E5">and I can paste it</font><font color="#CCCCCC"> right</font><font color="#E5E5E5"> and then oh wow</font>

148
00:05:30,430 --> 00:05:35,620
I just<font color="#E5E5E5"> stole some stuff</font><font color="#CCCCCC"> right that's</font>

149
00:05:33,370 --> 00:05:37,240
that's all well and<font color="#CCCCCC"> good but</font><font color="#E5E5E5"> it's pretty</font>

150
00:05:35,620 --> 00:05:39,220
cumbersome we're not going to get<font color="#CCCCCC"> very</font>

151
00:05:37,240 --> 00:05:43,389
<font color="#CCCCCC">far doing this onesie twosie file copy</font>

152
00:05:39,220 --> 00:05:45,159
stuff<font color="#E5E5E5"> so of course if I had other stuff</font>

153
00:05:43,389 --> 00:05:46,270
<font color="#CCCCCC">on this</font><font color="#E5E5E5"> USB Drive like some tools I</font>

154
00:05:45,159 --> 00:05:48,159
could run I might be able<font color="#CCCCCC"> to</font><font color="#E5E5E5"> do</font>

155
00:05:46,270 --> 00:05:50,919
<font color="#CCCCCC">something</font><font color="#E5E5E5"> with that but we actually want</font>

156
00:05:48,159 --> 00:05:52,990
to get into this<font color="#CCCCCC"> user's machine</font><font color="#E5E5E5"> so we</font>

157
00:05:50,919 --> 00:05:56,698
<font color="#E5E5E5">can do something</font><font color="#CCCCCC"> else where</font><font color="#E5E5E5"> we go to the</font>

158
00:05:52,990 --> 00:06:01,150
<font color="#E5E5E5">C Drive go to the windows go to system</font>

159
00:05:56,699 --> 00:06:05,370
<font color="#E5E5E5">32 and there's a file here</font><font color="#CCCCCC"> called set HC</font>

160
00:06:01,150 --> 00:06:10,419
<font color="#CCCCCC">Exe and we're</font><font color="#E5E5E5"> going</font><font color="#CCCCCC"> to copy</font><font color="#E5E5E5"> that cmd.exe</font>

161
00:06:05,370 --> 00:06:13,840
<font color="#E5E5E5">right over top of it yes and then we're</font>

162
00:06:10,419 --> 00:06:16,389
going to<font color="#E5E5E5"> close this close this say yes</font>

163
00:06:13,840 --> 00:06:17,619
and it will reboot the computer this

164
00:06:16,389 --> 00:06:18,699
<font color="#CCCCCC">time we're not going to boot off the CD</font>

165
00:06:17,620 --> 00:06:22,949
we're just going<font color="#E5E5E5"> to let</font><font color="#CCCCCC"> windows load</font>

166
00:06:18,699 --> 00:06:26,169
normally anyone know it's that HC is<font color="#E5E5E5"> no</font>

167
00:06:22,949 --> 00:06:28,389
sticky keys<font color="#E5E5E5"> yeah sticky keys is an</font>

168
00:06:26,169 --> 00:06:30,698
accessibility option right<font color="#CCCCCC"> so if I need</font>

169
00:06:28,389 --> 00:06:32,380
<font color="#E5E5E5">to type a lot of things and</font><font color="#CCCCCC"> I don't have</font>

170
00:06:30,699 --> 00:06:35,260
<font color="#E5E5E5">all the fingers that I need sticky keys</font>

171
00:06:32,380 --> 00:06:37,539
can be really helpful<font color="#E5E5E5"> well I can use</font>

172
00:06:35,260 --> 00:06:37,960
that<font color="#CCCCCC"> just</font><font color="#E5E5E5"> by hitting</font><font color="#CCCCCC"> shift so if you've</font>

173
00:06:37,539 --> 00:06:39,370
got<font color="#CCCCCC"> your</font>

174
00:06:37,960 --> 00:06:43,180
<font color="#E5E5E5">Windows machines open you can hit shift</font>

175
00:06:39,370 --> 00:06:49,840
<font color="#E5E5E5">5 times you hit shift 1 2 3</font><font color="#CCCCCC"> or 5 so 1 2</font>

176
00:06:43,180 --> 00:06:54,850
3<font color="#CCCCCC"> 4 5 and stickykeys runs and if we look</font>

177
00:06:49,840 --> 00:06:56,830
at<font color="#E5E5E5"> this machine</font><font color="#CCCCCC"> which</font><font color="#E5E5E5"> I want Who am I so</font>

178
00:06:54,850 --> 00:06:59,080
now we can see that stickykeys does in

179
00:06:56,830 --> 00:07:01,270
fact run<font color="#E5E5E5"> said HC that exe is the file</font>

180
00:06:59,080 --> 00:07:04,090
that<font color="#CCCCCC"> ran but</font><font color="#E5E5E5"> I can also see that</font><font color="#CCCCCC"> I'm</font>

181
00:07:01,270 --> 00:07:05,740
running<font color="#E5E5E5"> into context system so</font><font color="#CCCCCC"> I'm the</font>

182
00:07:04,090 --> 00:07:07,508
<font color="#E5E5E5">lock</font><font color="#CCCCCC"> screen of this machine without</font><font color="#E5E5E5"> any</font>

183
00:07:05,740 --> 00:07:09,639
<font color="#E5E5E5">kind of account or access to it I can</font>

184
00:07:07,509 --> 00:07:11,500
actually<font color="#E5E5E5"> now invoke actions as the</font>

185
00:07:09,639 --> 00:07:14,560
system which<font color="#E5E5E5"> is going to be super</font>

186
00:07:11,500 --> 00:07:17,199
<font color="#E5E5E5">helpful right</font><font color="#CCCCCC"> because now I can start</font>

187
00:07:14,560 --> 00:07:19,720
<font color="#CCCCCC">getting into the computer well the the</font>

188
00:07:17,199 --> 00:07:21,699
question<font color="#E5E5E5"> is you know what would have</font>

189
00:07:19,720 --> 00:07:23,530
stopped<font color="#E5E5E5"> that right we'll get to that in</font>

190
00:07:21,699 --> 00:07:25,300
<font color="#CCCCCC">a second I want to get into this</font>

191
00:07:23,530 --> 00:07:28,289
computer<font color="#E5E5E5"> first so the first thing that</font>

192
00:07:25,300 --> 00:07:30,759
<font color="#CCCCCC">we'll do is run comp</font><font color="#E5E5E5"> MGMT</font><font color="#CCCCCC"> at</font><font color="#E5E5E5"> MSC</font><font color="#CCCCCC"> and</font>

193
00:07:28,289 --> 00:07:32,590
this will run the<font color="#CCCCCC"> computer</font><font color="#E5E5E5"> management</font>

194
00:07:30,759 --> 00:07:34,960
console<font color="#E5E5E5"> again in context of</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> system</font>

195
00:07:32,590 --> 00:07:37,929
<font color="#CCCCCC">and we go</font><font color="#E5E5E5"> over</font><font color="#CCCCCC"> here to</font><font color="#E5E5E5"> local users and</font>

196
00:07:34,960 --> 00:07:39,909
<font color="#CCCCCC">groups we can see hey this account this</font>

197
00:07:37,930 --> 00:07:42,610
computer has an<font color="#E5E5E5"> account on here called</font>

198
00:07:39,910 --> 00:07:44,380
local admin now<font color="#E5E5E5"> I could right</font><font color="#CCCCCC"> click on</font>

199
00:07:42,610 --> 00:07:47,020
this<font color="#CCCCCC"> and reset their password and</font><font color="#E5E5E5"> then</font>

200
00:07:44,380 --> 00:07:48,400
login<font color="#E5E5E5"> with that account but I want to</font>

201
00:07:47,020 --> 00:07:50,620
save that<font color="#CCCCCC"> for later</font><font color="#E5E5E5"> we're going to leave</font>

202
00:07:48,400 --> 00:07:52,590
this<font color="#E5E5E5"> account for now so instead we'll</font>

203
00:07:50,620 --> 00:07:56,260
right-click<font color="#E5E5E5"> we'll create a new user</font>

204
00:07:52,590 --> 00:08:01,710
we'll give them<font color="#E5E5E5"> a clever name I'll give</font>

205
00:07:56,260 --> 00:08:03,849
them a even clever or a password tab

206
00:08:01,710 --> 00:08:06,430
make<font color="#E5E5E5"> sure that password doesn't expire</font>

207
00:08:03,849 --> 00:08:09,009
click on create<font color="#E5E5E5"> then</font><font color="#CCCCCC"> we're going to go</font>

208
00:08:06,430 --> 00:08:13,900
to the properties of<font color="#CCCCCC"> that user</font><font color="#E5E5E5"> and we'll</font>

209
00:08:09,009 --> 00:08:18,130
make<font color="#E5E5E5"> them a member administrators say ok</font>

210
00:08:13,900 --> 00:08:20,679
<font color="#E5E5E5">ok and</font><font color="#CCCCCC"> we'll close this and then we'll</font>

211
00:08:18,130 --> 00:08:23,229
go<font color="#CCCCCC"> ahead and click on other user login</font>

212
00:08:20,680 --> 00:08:25,240
to the local machine<font color="#E5E5E5"> as my hex or</font>

213
00:08:23,229 --> 00:08:27,490
account<font color="#E5E5E5"> and then we're login with that</font>

214
00:08:25,240 --> 00:08:30,099
password I just set and now I<font color="#CCCCCC"> can get</font>

215
00:08:27,490 --> 00:08:32,320
<font color="#E5E5E5">into the computer that's pretty handy</font>

216
00:08:30,099 --> 00:08:33,549
<font color="#E5E5E5">right and that's an easy one</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> one we</font>

217
00:08:32,320 --> 00:08:34,959
should<font color="#E5E5E5"> be able to</font><font color="#CCCCCC"> remember without a</font>

218
00:08:33,549 --> 00:08:36,728
whole<font color="#E5E5E5"> lot</font><font color="#CCCCCC"> of effort you literally just</font>

219
00:08:34,958 --> 00:08:39,218
replace sticky keys with<font color="#CCCCCC"> commands reboot</font>

220
00:08:36,729 --> 00:08:40,779
the<font color="#CCCCCC"> machine and</font><font color="#E5E5E5"> then you're in so let's</font>

221
00:08:39,219 --> 00:08:42,940
jump over<font color="#E5E5E5"> the</font><font color="#CCCCCC"> duck here quick and then</font>

222
00:08:40,779 --> 00:08:45,419
ask that question what would have

223
00:08:42,940 --> 00:08:45,419
stopped<font color="#E5E5E5"> that</font>

224
00:08:45,490 --> 00:08:55,370
any ideas event logs<font color="#E5E5E5"> event logs would</font>

225
00:08:53,720 --> 00:08:56,690
show that<font color="#E5E5E5"> that happened sure but what</font>

226
00:08:55,370 --> 00:09:06,680
would have prevented<font color="#CCCCCC"> me from</font><font color="#E5E5E5"> changing</font>

227
00:08:56,690 --> 00:09:08,630
that file loading<font color="#E5E5E5"> up the</font><font color="#CCCCCC"> CD well not</font>

228
00:09:06,680 --> 00:09:11,060
<font color="#E5E5E5">exactly that</font><font color="#CCCCCC"> would have prevented me</font>

229
00:09:08,630 --> 00:09:12,890
from using<font color="#E5E5E5"> that</font><font color="#CCCCCC"> particular method</font><font color="#E5E5E5"> but if</font>

230
00:09:11,060 --> 00:09:14,300
I wanted<font color="#E5E5E5"> to stop users from</font><font color="#CCCCCC"> changing</font>

231
00:09:12,890 --> 00:09:15,649
those files<font color="#E5E5E5"> outside of the system</font><font color="#CCCCCC"> I</font>

232
00:09:14,300 --> 00:09:17,990
<font color="#E5E5E5">basically want to encrypt the file</font>

233
00:09:15,649 --> 00:09:20,720
system<font color="#CCCCCC"> all</font><font color="#E5E5E5"> right so if I want to encrypt</font>

234
00:09:17,990 --> 00:09:22,430
the C Drive<font color="#CCCCCC"> that</font><font color="#E5E5E5"> would mean that unless</font>

235
00:09:20,720 --> 00:09:24,740
<font color="#E5E5E5">I have the decryption keys I can't</font>

236
00:09:22,430 --> 00:09:27,170
<font color="#E5E5E5">interact with the file system right well</font>

237
00:09:24,740 --> 00:09:29,360
lucky for<font color="#CCCCCC"> us we</font><font color="#E5E5E5"> have ways of doing that</font>

238
00:09:27,170 --> 00:09:30,829
inside<font color="#CCCCCC"> of</font><font color="#E5E5E5"> Windows it has BitLocker built</font>

239
00:09:29,360 --> 00:09:32,540
into it if<font color="#E5E5E5"> you have</font><font color="#CCCCCC"> Windows pro or</font>

240
00:09:30,829 --> 00:09:33,979
Enterprise Edition then BitLocker is

241
00:09:32,540 --> 00:09:36,199
included and<font color="#CCCCCC"> you just have</font><font color="#E5E5E5"> to turn it on</font>

242
00:09:33,980 --> 00:09:38,300
<font color="#E5E5E5">and a lot</font><font color="#CCCCCC"> of times that</font><font color="#E5E5E5"> does</font><font color="#CCCCCC"> not</font><font color="#E5E5E5"> happen</font>

243
00:09:36,200 --> 00:09:39,800
because<font color="#CCCCCC"> people don't know</font><font color="#E5E5E5"> it exists</font><font color="#CCCCCC"> or</font>

244
00:09:38,300 --> 00:09:42,380
they<font color="#E5E5E5"> think they need a certain special</font>

245
00:09:39,800 --> 00:09:43,760
<font color="#E5E5E5">SKU</font><font color="#CCCCCC"> or something for</font><font color="#E5E5E5"> it but BitLocker is</font>

246
00:09:42,380 --> 00:09:44,959
just part of Windows any<font color="#E5E5E5"> users should</font><font color="#CCCCCC"> be</font>

247
00:09:43,760 --> 00:09:48,260
<font color="#E5E5E5">able to</font><font color="#CCCCCC"> go to the C Drive right-click</font>

248
00:09:44,959 --> 00:09:50,300
and enable BitLocker<font color="#CCCCCC"> if you want to</font>

249
00:09:48,260 --> 00:09:51,290
control<font color="#E5E5E5"> it there are group policies you</font>

250
00:09:50,300 --> 00:09:52,939
can<font color="#E5E5E5"> put in place</font><font color="#CCCCCC"> so they'll tell you</font>

251
00:09:51,290 --> 00:09:55,219
what<font color="#CCCCCC"> to do when you enable</font><font color="#E5E5E5"> the</font>

252
00:09:52,940 --> 00:09:56,630
encryption<font color="#E5E5E5"> so you can say force the</font>

253
00:09:55,220 --> 00:09:58,399
recovery<font color="#E5E5E5"> keys to be stored in Active</font>

254
00:09:56,630 --> 00:09:59,630
Directory for example so if a user were

255
00:09:58,399 --> 00:10:02,089
<font color="#E5E5E5">to encrypt</font><font color="#CCCCCC"> something you could</font><font color="#E5E5E5"> actually</font>

256
00:09:59,630 --> 00:10:03,920
<font color="#E5E5E5">decrypt it as an owner of the of the</font>

257
00:10:02,089 --> 00:10:05,660
hardware<font color="#CCCCCC"> but if you want to</font>

258
00:10:03,920 --> 00:10:08,750
programmatically encrypt it<font color="#E5E5E5"> you know</font>

259
00:10:05,660 --> 00:10:10,459
make it happen<font color="#CCCCCC"> you need</font><font color="#E5E5E5"> an</font><font color="#CCCCCC"> agent to</font><font color="#E5E5E5"> do</font>

260
00:10:08,750 --> 00:10:11,630
that and that's what<font color="#CCCCCC"> ambam is and them</font>

261
00:10:10,459 --> 00:10:13,670
is the Microsoft BitLocker

262
00:10:11,630 --> 00:10:15,170
administration and monitoring<font color="#E5E5E5"> part of</font>

263
00:10:13,670 --> 00:10:17,120
<font color="#CCCCCC">MDOT so if you have</font><font color="#E5E5E5"> Software Assurance</font>

264
00:10:15,170 --> 00:10:18,620
it's all part of<font color="#E5E5E5"> that</font><font color="#CCCCCC"> - it actually also</font>

265
00:10:17,120 --> 00:10:20,209
includes self-service portals and

266
00:10:18,620 --> 00:10:22,940
<font color="#CCCCCC">helpdesk portals so people can go there</font>

267
00:10:20,209 --> 00:10:25,880
and<font color="#E5E5E5"> get their recovery keys you</font><font color="#CCCCCC"> can show</font>

268
00:10:22,940 --> 00:10:28,220
auditing of those recovery keys<font color="#E5E5E5"> being</font>

269
00:10:25,880 --> 00:10:29,899
distributed<font color="#E5E5E5"> and you can also show</font>

270
00:10:28,220 --> 00:10:31,760
<font color="#E5E5E5">compliance so if you need to show</font><font color="#CCCCCC"> that</font>

271
00:10:29,899 --> 00:10:33,079
your machines<font color="#CCCCCC"> in the environment are</font>

272
00:10:31,760 --> 00:10:35,569
being encrypted<font color="#E5E5E5"> and bam can give you</font>

273
00:10:33,079 --> 00:10:38,120
those reports<font color="#CCCCCC"> - there's also a new</font>

274
00:10:35,570 --> 00:10:41,510
option<font color="#CCCCCC"> in Windows 10 called</font><font color="#E5E5E5"> azure ad</font>

275
00:10:38,120 --> 00:10:43,010
<font color="#E5E5E5">join as anyone heard of that as radiant</font>

276
00:10:41,510 --> 00:10:45,350
yeah<font color="#E5E5E5"> so if you've got Azure Active</font>

277
00:10:43,010 --> 00:10:47,959
Directory<font color="#E5E5E5"> the new thing for Windows 10</font>

278
00:10:45,350 --> 00:10:50,510
is you can still do the traditional

279
00:10:47,959 --> 00:10:52,579
domain join against Active Directory but

280
00:10:50,510 --> 00:10:54,829
you can also do as your ad join which is

281
00:10:52,579 --> 00:10:56,300
a whole<font color="#CCCCCC"> different thing</font><font color="#E5E5E5"> as your ad and</font>

282
00:10:54,829 --> 00:10:57,770
<font color="#CCCCCC">Windows ad are synchronized with each</font>

283
00:10:56,300 --> 00:10:58,130
other so whether you join<font color="#E5E5E5"> one or the</font>

284
00:10:57,770 --> 00:10:59,270
other

285
00:10:58,130 --> 00:11:01,100
<font color="#CCCCCC">our corporate</font><font color="#E5E5E5"> accounts can still log</font>

286
00:10:59,270 --> 00:11:03,470
<font color="#E5E5E5">into those accounts but if you're an</font>

287
00:11:01,100 --> 00:11:05,480
azure ad<font color="#CCCCCC"> join machine that</font><font color="#E5E5E5"> the hardware</font>

288
00:11:03,470 --> 00:11:07,970
<font color="#E5E5E5">is instant go capable which is the</font>

289
00:11:05,480 --> 00:11:08,870
marketing term<font color="#E5E5E5"> for connected standby the</font>

290
00:11:07,970 --> 00:11:10,190
hardware can do that it will

291
00:11:08,870 --> 00:11:12,050
automatically be encrypted<font color="#E5E5E5"> with</font>

292
00:11:10,190 --> 00:11:14,750
BitLocker<font color="#E5E5E5"> so there's a lot of ways that</font>

293
00:11:12,050 --> 00:11:16,520
<font color="#CCCCCC">you can</font><font color="#E5E5E5"> turn BitLocker on and off some</font>

294
00:11:14,750 --> 00:11:19,040
other<font color="#E5E5E5"> things that we can do with Windows</font>

295
00:11:16,520 --> 00:11:21,020
10 is called Windows Defender ATP has

296
00:11:19,040 --> 00:11:23,990
anyone heard<font color="#E5E5E5"> of that you've heard of</font>

297
00:11:21,020 --> 00:11:27,110
defender<font color="#E5E5E5"> right but defender ATP yeah so</font>

298
00:11:23,990 --> 00:11:30,650
defender ATP is new for Windows 10

299
00:11:27,110 --> 00:11:32,030
<font color="#E5E5E5">enterprise and it requires the e 5 SKU</font>

300
00:11:30,650 --> 00:11:33,890
and<font color="#E5E5E5"> what this does is it gives you</font>

301
00:11:32,030 --> 00:11:35,750
visibility to activities happening on

302
00:11:33,890 --> 00:11:37,460
the workstation<font color="#CCCCCC"> so it</font><font color="#E5E5E5"> lets you see</font>

303
00:11:35,750 --> 00:11:40,460
<font color="#E5E5E5">things inside of memory it shows</font>

304
00:11:37,460 --> 00:11:42,470
processes that fork other processes it

305
00:11:40,460 --> 00:11:43,850
sees where files come from<font color="#E5E5E5"> it can even</font>

306
00:11:42,470 --> 00:11:46,430
integrate<font color="#CCCCCC"> into other services</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> effuse</font>

307
00:11:43,850 --> 00:11:49,460
<font color="#CCCCCC">like office 365 for example we can see</font>

308
00:11:46,430 --> 00:11:50,900
<font color="#E5E5E5">that a file that was open from an email</font>

309
00:11:49,460 --> 00:11:53,180
attachment we can actually<font color="#E5E5E5"> go back</font><font color="#CCCCCC"> into</font>

310
00:11:50,900 --> 00:11:54,860
<font color="#E5E5E5">365 and see the email message that</font><font color="#CCCCCC"> it</font>

311
00:11:53,180 --> 00:11:56,120
came from<font color="#E5E5E5"> and then reach into other</font>

312
00:11:54,860 --> 00:11:58,190
people's mailboxes and take those

313
00:11:56,120 --> 00:12:01,040
<font color="#CCCCCC">attachments out so it's got quite</font><font color="#E5E5E5"> a bit</font>

314
00:11:58,190 --> 00:12:03,110
<font color="#E5E5E5">of access into the environment depending</font>

315
00:12:01,040 --> 00:12:05,329
<font color="#E5E5E5">on the services you're using so I want</font>

316
00:12:03,110 --> 00:12:06,890
you to see<font color="#CCCCCC"> that quick so if we come back</font>

317
00:12:05,330 --> 00:12:09,680
<font color="#CCCCCC">over here</font>

318
00:12:06,890 --> 00:12:11,510
<font color="#E5E5E5">this is the council for defender ATP</font>

319
00:12:09,680 --> 00:12:13,790
<font color="#CCCCCC">that's under the defender Security</font>

320
00:12:11,510 --> 00:12:16,760
<font color="#CCCCCC">Center</font><font color="#E5E5E5"> and in here we can see</font><font color="#CCCCCC"> things</font>

321
00:12:13,790 --> 00:12:19,219
like<font color="#CCCCCC"> alert so this</font><font color="#E5E5E5"> dashboard shows a</font>

322
00:12:16,760 --> 00:12:21,380
<font color="#CCCCCC">heads-up</font><font color="#E5E5E5"> of various alerts and</font>

323
00:12:19,220 --> 00:12:23,570
environment I do various<font color="#CCCCCC"> things so</font>

324
00:12:21,380 --> 00:12:25,880
various alerts will appear but we can

325
00:12:23,570 --> 00:12:27,680
see things like<font color="#E5E5E5"> this abnormal file</font>

326
00:12:25,880 --> 00:12:29,720
information mismatch so<font color="#E5E5E5"> we can click on</font>

327
00:12:27,680 --> 00:12:32,390
<font color="#E5E5E5">that and and we can see that hey this</font>

328
00:12:29,720 --> 00:12:33,980
file doesn't look<font color="#E5E5E5"> like what it's</font>

329
00:12:32,390 --> 00:12:35,330
supposed to<font color="#E5E5E5"> be so here's a message</font>

330
00:12:33,980 --> 00:12:38,120
<font color="#E5E5E5">saying look</font><font color="#CCCCCC"> stickykeys</font>

331
00:12:35,330 --> 00:12:40,190
is what I expected this<font color="#CCCCCC"> to be but it</font>

332
00:12:38,120 --> 00:12:44,210
actually<font color="#E5E5E5"> is</font><font color="#CCCCCC"> not right</font><font color="#E5E5E5"> and we can see</font>

333
00:12:40,190 --> 00:12:46,400
what it did so here the sticky keys<font color="#E5E5E5"> came</font>

334
00:12:44,210 --> 00:12:49,280
<font color="#E5E5E5">down and ran Who am I and it also ran</font>

335
00:12:46,400 --> 00:12:51,709
<font color="#E5E5E5">the</font><font color="#CCCCCC"> MMC which is what we did earlier I</font>

336
00:12:49,280 --> 00:12:53,240
started it<font color="#E5E5E5"> up I ran</font><font color="#CCCCCC"> Who am I to</font><font color="#E5E5E5"> make</font>

337
00:12:51,710 --> 00:12:56,300
sure I was running<font color="#E5E5E5"> the system and then I</font>

338
00:12:53,240 --> 00:12:57,830
ran the computer<font color="#CCCCCC"> console so we can see</font>

339
00:12:56,300 --> 00:13:01,219
<font color="#E5E5E5">those processes that</font><font color="#CCCCCC"> are happening</font><font color="#E5E5E5"> on</font>

340
00:12:57,830 --> 00:13:02,780
<font color="#CCCCCC">the client and then we can also start</font>

341
00:13:01,220 --> 00:13:04,970
taking some actions on these things<font color="#E5E5E5"> so</font>

342
00:13:02,780 --> 00:13:07,280
<font color="#CCCCCC">we can see well this was running on this</font>

343
00:13:04,970 --> 00:13:09,950
<font color="#CCCCCC">winton user machine and on this machine</font>

344
00:13:07,280 --> 00:13:11,430
<font color="#E5E5E5">we can see well what</font><font color="#CCCCCC"> other alerts on</font>

345
00:13:09,950 --> 00:13:14,070
there well<font color="#E5E5E5"> I've done</font>

346
00:13:11,430 --> 00:13:16,319
demo before<font color="#E5E5E5"> so we'll see some</font><font color="#CCCCCC"> other</font>

347
00:13:14,070 --> 00:13:18,540
<font color="#CCCCCC">things that</font><font color="#E5E5E5"> I'd done</font><font color="#CCCCCC"> in the</font><font color="#E5E5E5"> past but we</font>

348
00:13:16,320 --> 00:13:20,940
can<font color="#E5E5E5"> see that</font><font color="#CCCCCC"> there's something bad going</font>

349
00:13:18,540 --> 00:13:23,069
<font color="#CCCCCC">on</font><font color="#E5E5E5"> here and we can use</font><font color="#CCCCCC"> this to dig</font>

350
00:13:20,940 --> 00:13:25,170
further into<font color="#E5E5E5"> where it came from what it</font>

351
00:13:23,070 --> 00:13:26,880
touched who it involves but we can also

352
00:13:25,170 --> 00:13:29,339
see like who else is logged<font color="#CCCCCC"> onto</font><font color="#E5E5E5"> this</font>

353
00:13:26,880 --> 00:13:31,529
<font color="#E5E5E5">machine so we can</font><font color="#CCCCCC"> see</font><font color="#E5E5E5"> here that you know</font>

354
00:13:29,339 --> 00:13:33,630
not<font color="#E5E5E5"> only is David using this computer</font>

355
00:13:31,529 --> 00:13:35,970
<font color="#CCCCCC">but so is the</font><font color="#E5E5E5"> tax or account that I</font><font color="#CCCCCC"> just</font>

356
00:13:33,630 --> 00:13:39,209
<font color="#CCCCCC">created and all this</font><font color="#E5E5E5"> stuff gets bubbled</font>

357
00:13:35,970 --> 00:13:41,970
up into the<font color="#E5E5E5"> azure</font><font color="#CCCCCC"> hosted defender ATP</font>

358
00:13:39,209 --> 00:13:43,319
service<font color="#E5E5E5"> now if I decided that I don't</font>

359
00:13:41,970 --> 00:13:45,660
<font color="#E5E5E5">like what I'm seeing here</font><font color="#CCCCCC"> and I want to</font>

360
00:13:43,320 --> 00:13:48,899
kill this machine under actions I can

361
00:13:45,660 --> 00:13:51,630
<font color="#E5E5E5">come in here</font><font color="#CCCCCC"> and click on isolate</font>

362
00:13:48,899 --> 00:13:53,670
machine<font color="#E5E5E5"> there's also the option for an</font>

363
00:13:51,630 --> 00:13:55,709
investigation package<font color="#E5E5E5"> which basically</font>

364
00:13:53,670 --> 00:13:57,689
lets me remotely<font color="#E5E5E5"> and struck the machine</font>

365
00:13:55,709 --> 00:13:59,310
to give me a memory dump and other file

366
00:13:57,690 --> 00:14:01,290
collections of what's going<font color="#E5E5E5"> on in this</font>

367
00:13:59,310 --> 00:14:02,760
<font color="#E5E5E5">computer so I'm going to look at it if I</font>

368
00:14:01,290 --> 00:14:04,589
want to get<font color="#E5E5E5"> more information if maybe</font>

369
00:14:02,760 --> 00:14:06,959
what's in the dashboard is not adequate

370
00:14:04,589 --> 00:14:08,339
<font color="#E5E5E5">but if I do isolate machine it basically</font>

371
00:14:06,959 --> 00:14:10,709
instructs the client to<font color="#E5E5E5"> shields up the</font>

372
00:14:08,339 --> 00:14:12,209
firewall<font color="#E5E5E5"> so no communications in or out</font>

373
00:14:10,709 --> 00:14:14,489
<font color="#E5E5E5">of the machine except for the defender</font>

374
00:14:12,209 --> 00:14:15,989
ATP service so<font color="#E5E5E5"> that way if you know</font>

375
00:14:14,490 --> 00:14:17,430
someone's on the box and has a reverse

376
00:14:15,990 --> 00:14:18,240
<font color="#CCCCCC">shell and I said</font><font color="#E5E5E5"> no can't talk to</font>

377
00:14:17,430 --> 00:14:20,040
anything<font color="#CCCCCC"> anymore</font>

378
00:14:18,240 --> 00:14:22,650
that machine effectively goes offline

379
00:14:20,040 --> 00:14:24,390
<font color="#E5E5E5">and now I can call the user up and say</font>

380
00:14:22,650 --> 00:14:26,790
hey something<font color="#E5E5E5"> went bad let's talk</font><font color="#CCCCCC"> about</font>

381
00:14:24,390 --> 00:14:29,520
this and<font color="#E5E5E5"> then figure</font><font color="#CCCCCC"> out</font><font color="#E5E5E5"> what else I</font>

382
00:14:26,790 --> 00:14:31,170
need<font color="#CCCCCC"> to do so the really</font><font color="#E5E5E5"> nice thing</font>

383
00:14:29,520 --> 00:14:34,290
about<font color="#E5E5E5"> this service is that you actually</font>

384
00:14:31,170 --> 00:14:36,120
get<font color="#E5E5E5"> visibility to actions very near</font>

385
00:14:34,290 --> 00:14:38,189
<font color="#CCCCCC">real-time</font><font color="#E5E5E5"> you know you get your alerts</font>

386
00:14:36,120 --> 00:14:39,690
but you can also then stop it remotely

387
00:14:38,190 --> 00:14:41,339
you<font color="#E5E5E5"> don't have to go find the port that</font>

388
00:14:39,690 --> 00:14:43,260
it's on and like pull it<font color="#CCCCCC"> up to switch or</font>

389
00:14:41,339 --> 00:14:46,830
drop it up the<font color="#E5E5E5"> network you can do this</font>

390
00:14:43,260 --> 00:14:49,380
through<font color="#E5E5E5"> an Internet connected machine so</font>

391
00:14:46,830 --> 00:14:53,880
that's<font color="#E5E5E5"> that's a real quick overview</font><font color="#CCCCCC"> of</font>

392
00:14:49,380 --> 00:14:59,880
defender ATP<font color="#E5E5E5"> let's jump</font><font color="#CCCCCC"> back over</font><font color="#E5E5E5"> here</font>

393
00:14:53,880 --> 00:15:03,630
and show you what's next<font color="#CCCCCC"> okay so now</font>

394
00:14:59,880 --> 00:15:05,310
<font color="#E5E5E5">that we're on this machine we</font><font color="#CCCCCC"> want</font><font color="#E5E5E5"> to</font>

395
00:15:03,630 --> 00:15:07,649
figure<font color="#E5E5E5"> out what we can do with</font><font color="#CCCCCC"> it right</font>

396
00:15:05,310 --> 00:15:11,579
<font color="#CCCCCC">so we've got an account on the computer</font>

397
00:15:07,649 --> 00:15:16,890
what's what's on here we jump back<font color="#E5E5E5"> over</font>

398
00:15:11,579 --> 00:15:19,290
here<font color="#CCCCCC"> to my workstation now we're logged</font>

399
00:15:16,890 --> 00:15:21,329
<font color="#E5E5E5">into this</font><font color="#CCCCCC"> computer as</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> hax or account</font>

400
00:15:19,290 --> 00:15:22,980
and some of the stuff that<font color="#E5E5E5"> you typically</font>

401
00:15:21,329 --> 00:15:24,349
do when<font color="#E5E5E5"> you get into the machine is much</font>

402
00:15:22,980 --> 00:15:27,680
like what<font color="#CCCCCC"> I</font><font color="#E5E5E5"> did when we boot</font>

403
00:15:24,350 --> 00:15:30,080
off of the off of<font color="#CCCCCC"> the disk so we'll go</font>

404
00:15:27,680 --> 00:15:31,819
<font color="#E5E5E5">into users and here's David's account we</font>

405
00:15:30,080 --> 00:15:33,320
click on it in this context it now it

406
00:15:31,820 --> 00:15:36,170
says I<font color="#E5E5E5"> don't have permissions to access</font>

407
00:15:33,320 --> 00:15:37,880
David's files but I'm a<font color="#E5E5E5"> local admin so I</font>

408
00:15:36,170 --> 00:15:39,860
can<font color="#E5E5E5"> grant myself permissions to those</font>

409
00:15:37,880 --> 00:15:41,750
files<font color="#E5E5E5"> so</font><font color="#CCCCCC"> I go ahead and</font><font color="#E5E5E5"> do that</font><font color="#CCCCCC"> now I</font>

410
00:15:39,860 --> 00:15:43,430
<font color="#E5E5E5">can still go into David's documents I</font>

411
00:15:41,750 --> 00:15:45,710
can<font color="#CCCCCC"> see all</font><font color="#E5E5E5"> the stuff</font><font color="#CCCCCC"> that he had in</font>

412
00:15:43,430 --> 00:15:47,540
<font color="#E5E5E5">here</font><font color="#CCCCCC"> I can copy these files</font><font color="#E5E5E5"> of course</font>

413
00:15:45,710 --> 00:15:51,070
<font color="#E5E5E5">and then if I wanted to actually take</font>

414
00:15:47,540 --> 00:15:53,810
<font color="#E5E5E5">them we'll go ahead and</font><font color="#CCCCCC"> go over to the</font>

415
00:15:51,070 --> 00:15:55,880
USB Drive that<font color="#CCCCCC"> I've cleverly attached to</font>

416
00:15:53,810 --> 00:15:57,770
this<font color="#CCCCCC"> machine</font><font color="#E5E5E5"> and we'll paste it in there</font>

417
00:15:55,880 --> 00:15:59,300
<font color="#E5E5E5">and look we just</font><font color="#CCCCCC"> stole its documents</font><font color="#E5E5E5"> we</font>

418
00:15:57,770 --> 00:16:02,000
<font color="#E5E5E5">can also see</font><font color="#CCCCCC"> some other</font><font color="#E5E5E5"> stuff</font><font color="#CCCCCC"> like in</font>

419
00:15:59,300 --> 00:16:03,650
this case David happens to use onedrive

420
00:16:02,000 --> 00:16:06,560
for business and in onedrive for

421
00:16:03,650 --> 00:16:08,540
business is an office<font color="#CCCCCC"> 365 component but</font>

422
00:16:06,560 --> 00:16:10,760
he's got his content synchronized

423
00:16:08,540 --> 00:16:12,890
locally which we can then<font color="#E5E5E5"> browse through</font>

424
00:16:10,760 --> 00:16:15,110
here<font color="#E5E5E5"> and then there's all his</font><font color="#CCCCCC"> Docs and</font>

425
00:16:12,890 --> 00:16:17,569
passwords as always my favorite one to

426
00:16:15,110 --> 00:16:19,880
look at because<font color="#E5E5E5"> look I can see context</font>

427
00:16:17,570 --> 00:16:22,040
of passwords that<font color="#CCCCCC"> he's used and this is</font>

428
00:16:19,880 --> 00:16:23,630
not a terribly<font color="#E5E5E5"> uncommon practice for</font>

429
00:16:22,040 --> 00:16:25,160
people<font color="#CCCCCC"> because they manage and</font><font color="#E5E5E5"> deal</font><font color="#CCCCCC"> with</font>

430
00:16:23,630 --> 00:16:26,810
<font color="#E5E5E5">a lot of passwords so they have them</font>

431
00:16:25,160 --> 00:16:28,610
<font color="#CCCCCC">somewhere and now we can read them and</font>

432
00:16:26,810 --> 00:16:29,810
now as an attacker I can use these

433
00:16:28,610 --> 00:16:32,210
against them because<font color="#E5E5E5"> now I could</font><font color="#CCCCCC"> just</font>

434
00:16:29,810 --> 00:16:33,770
log<font color="#E5E5E5"> into these services most the time so</font>

435
00:16:32,210 --> 00:16:35,900
if we are<font color="#CCCCCC"> not using things like</font>

436
00:16:33,770 --> 00:16:39,199
multi-factor authentication or we're

437
00:16:35,900 --> 00:16:40,579
using password manager this<font color="#E5E5E5"> is a pretty</font>

438
00:16:39,200 --> 00:16:43,550
big risk of somebody's machine if

439
00:16:40,580 --> 00:16:45,080
they're not encrypted but I'm not

440
00:16:43,550 --> 00:16:46,880
looking at<font color="#E5E5E5"> those services just now</font>

441
00:16:45,080 --> 00:16:48,800
instead I<font color="#E5E5E5"> just want to take all</font><font color="#CCCCCC"> of this</font>

442
00:16:46,880 --> 00:16:51,560
<font color="#CCCCCC">stuff so we'll come over here we'll take</font>

443
00:16:48,800 --> 00:16:53,839
his his pictures<font color="#CCCCCC"> and his taxes and</font><font color="#E5E5E5"> paste</font>

444
00:16:51,560 --> 00:16:57,439
these over here<font color="#E5E5E5"> so now I just stole all</font>

445
00:16:53,840 --> 00:17:00,070
his stuff<font color="#E5E5E5"> one of</font><font color="#CCCCCC"> the other fun things to</font>

446
00:16:57,440 --> 00:17:07,820
grab off of a machine on is<font color="#E5E5E5"> app data</font>

447
00:17:00,070 --> 00:17:10,190
<font color="#CCCCCC">like local Microsoft Outlook and in here</font>

448
00:17:07,819 --> 00:17:13,280
is this<font color="#E5E5E5"> mail so I'll go and copy paste</font>

449
00:17:10,190 --> 00:17:14,780
that and<font color="#E5E5E5"> I</font><font color="#CCCCCC"> just stole his</font><font color="#E5E5E5"> inbox at least</font>

450
00:17:13,280 --> 00:17:17,300
I stole what's been cached which by

451
00:17:14,780 --> 00:17:19,250
default is<font color="#CCCCCC"> a year</font><font color="#E5E5E5"> and if I go and open</font>

452
00:17:17,300 --> 00:17:21,379
<font color="#CCCCCC">that up I can now read</font><font color="#E5E5E5"> David's mail for</font>

453
00:17:19,250 --> 00:17:24,140
the last year or<font color="#CCCCCC"> so</font><font color="#E5E5E5"> and what kind of</font>

454
00:17:21,380 --> 00:17:27,260
stuff<font color="#CCCCCC"> can I find in his mail</font><font color="#E5E5E5"> like a lot</font>

455
00:17:24,140 --> 00:17:29,480
<font color="#E5E5E5">right I can start making associations</font>

456
00:17:27,260 --> 00:17:31,040
<font color="#CCCCCC">with</font><font color="#E5E5E5"> understanding who he works with who</font>

457
00:17:29,480 --> 00:17:33,290
his<font color="#E5E5E5"> friends are who his enemies are what</font>

458
00:17:31,040 --> 00:17:34,790
his projects are if he's been<font color="#E5E5E5"> Don</font>

459
00:17:33,290 --> 00:17:36,710
boarded recently I can probably<font color="#CCCCCC"> going</font><font color="#E5E5E5"> to</font>

460
00:17:34,790 --> 00:17:38,120
figure<font color="#E5E5E5"> out how do you get on the VPN</font><font color="#CCCCCC"> or</font>

461
00:17:36,710 --> 00:17:39,890
how you get<font color="#CCCCCC"> on the Wi-Fi there's</font>

462
00:17:38,120 --> 00:17:42,500
<font color="#E5E5E5">credentials</font><font color="#CCCCCC"> and things to</font><font color="#E5E5E5"> get into the</font>

463
00:17:39,890 --> 00:17:43,970
organization in this person's inbox<font color="#CCCCCC"> so</font>

464
00:17:42,500 --> 00:17:45,080
it's a treasure trove<font color="#E5E5E5"> of things to dig</font>

465
00:17:43,970 --> 00:17:47,929
<font color="#E5E5E5">through</font><font color="#CCCCCC"> but we're going</font><font color="#E5E5E5"> to deal with</font>

466
00:17:45,080 --> 00:17:51,439
<font color="#CCCCCC">that later</font><font color="#E5E5E5"> right so once we've got all</font>

467
00:17:47,929 --> 00:17:54,260
<font color="#CCCCCC">of that</font><font color="#E5E5E5"> the question then</font><font color="#CCCCCC"> comes back to</font>

468
00:17:51,440 --> 00:17:57,799
what are we what we can do<font color="#E5E5E5"> about that</font>

469
00:17:54,260 --> 00:17:59,570
<font color="#E5E5E5">you</font><font color="#CCCCCC"> know</font><font color="#E5E5E5"> I</font><font color="#CCCCCC"> just</font><font color="#E5E5E5"> stole a bunch of stuff</font>

470
00:17:57,799 --> 00:18:03,500
off of<font color="#CCCCCC"> his files is there something that</font>

471
00:17:59,570 --> 00:18:04,879
I<font color="#E5E5E5"> can do to to mitigate</font><font color="#CCCCCC"> that risk</font><font color="#E5E5E5"> yeah</font>

472
00:18:03,500 --> 00:18:08,240
yeah there's a couple<font color="#CCCCCC"> things</font><font color="#E5E5E5"> we</font><font color="#CCCCCC"> can</font><font color="#E5E5E5"> do</font>

473
00:18:04,880 --> 00:18:09,919
<font color="#E5E5E5">one is indirectly we</font><font color="#CCCCCC"> can solve this with</font>

474
00:18:08,240 --> 00:18:11,240
some some encryption right if I can't

475
00:18:09,919 --> 00:18:13,190
get<font color="#E5E5E5"> into the machine in the first place</font>

476
00:18:11,240 --> 00:18:15,830
then I can't still<font color="#E5E5E5"> was filed of course</font>

477
00:18:13,190 --> 00:18:18,440
if we're<font color="#CCCCCC"> dealing with</font><font color="#E5E5E5"> access via</font><font color="#CCCCCC"> River</font>

478
00:18:15,830 --> 00:18:20,870
<font color="#E5E5E5">shell right somebody got a attachment</font>

479
00:18:18,440 --> 00:18:23,630
and he ran in a malicious macro or

480
00:18:20,870 --> 00:18:25,489
something and now I'm actually acting as

481
00:18:23,630 --> 00:18:27,409
the attacker remotely in the context of

482
00:18:25,490 --> 00:18:29,090
David<font color="#E5E5E5"> well</font><font color="#CCCCCC"> david has access to all of</font>

483
00:18:27,409 --> 00:18:31,580
<font color="#E5E5E5">this content so</font><font color="#CCCCCC"> I can still get the</font>

484
00:18:29,090 --> 00:18:33,470
files<font color="#E5E5E5"> so BitLocker doesn't</font><font color="#CCCCCC"> totally help</font>

485
00:18:31,580 --> 00:18:35,658
in<font color="#E5E5E5"> that case but if we wanted to</font>

486
00:18:33,470 --> 00:18:38,059
<font color="#CCCCCC">actually encrypt the files themselves we</font>

487
00:18:35,659 --> 00:18:42,039
<font color="#E5E5E5">can use something like</font><font color="#CCCCCC"> Azure RMS as your</font>

488
00:18:38,059 --> 00:18:44,570
RMS allows us to encrypt the files as

489
00:18:42,039 --> 00:18:47,000
and associated<font color="#CCCCCC"> with the user's account</font>

490
00:18:44,570 --> 00:18:49,220
<font color="#E5E5E5">so David would have access</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> decrypt</font>

491
00:18:47,000 --> 00:18:51,830
<font color="#E5E5E5">and read the files but if I'm on a river</font>

492
00:18:49,220 --> 00:18:53,450
shell and I copy the files down<font color="#E5E5E5"> I'm no</font>

493
00:18:51,830 --> 00:18:55,100
<font color="#E5E5E5">longer running in the context of David</font>

494
00:18:53,450 --> 00:18:56,779
and I can't read the content of the file

495
00:18:55,100 --> 00:18:59,120
<font color="#E5E5E5">so if I</font><font color="#CCCCCC"> took it</font><font color="#E5E5E5"> offline like in this</font>

496
00:18:56,779 --> 00:19:01,340
<font color="#E5E5E5">case I am not running as David I'm</font>

497
00:18:59,120 --> 00:19:02,809
running as hacks or and hacks or does

498
00:19:01,340 --> 00:19:04,970
not have<font color="#CCCCCC"> the ability to decrypt</font><font color="#E5E5E5"> those</font>

499
00:19:02,809 --> 00:19:06,770
files we<font color="#CCCCCC"> can also use azure RMS for</font>

500
00:19:04,970 --> 00:19:08,990
encrypting<font color="#E5E5E5"> email messages so while I</font>

501
00:19:06,770 --> 00:19:10,070
might<font color="#E5E5E5"> have taken</font><font color="#CCCCCC"> his mailbox I wouldn't</font>

502
00:19:08,990 --> 00:19:12,440
be able to read necessarily the

503
00:19:10,070 --> 00:19:14,418
protected messages in the mailbox<font color="#CCCCCC"> so you</font>

504
00:19:12,440 --> 00:19:16,279
might<font color="#E5E5E5"> decide that messages from a</font>

505
00:19:14,419 --> 00:19:18,169
certain<font color="#CCCCCC"> department or containing certain</font>

506
00:19:16,279 --> 00:19:20,149
keywords or some other type of<font color="#E5E5E5"> syntax</font>

507
00:19:18,169 --> 00:19:21,679
<font color="#E5E5E5">should</font><font color="#CCCCCC"> be automatically protected with</font>

508
00:19:20,149 --> 00:19:25,520
RMS<font color="#E5E5E5"> and we can we can do that</font>

509
00:19:21,679 --> 00:19:26,960
automatically<font color="#CCCCCC"> Windows 10 also includes</font>

510
00:19:25,520 --> 00:19:28,639
something<font color="#CCCCCC"> called whip which is Windows</font>

511
00:19:26,960 --> 00:19:30,919
<font color="#CCCCCC">Information protection and it</font><font color="#E5E5E5"> uses as</font>

512
00:19:28,640 --> 00:19:34,610
your RMS under the covers<font color="#CCCCCC"> it allows you</font>

513
00:19:30,919 --> 00:19:36,740
<font color="#CCCCCC">to take the complexities out of RMS as a</font>

514
00:19:34,610 --> 00:19:38,360
developer so if you look<font color="#E5E5E5"> back in the</font>

515
00:19:36,740 --> 00:19:39,890
<font color="#CCCCCC">history</font><font color="#E5E5E5"> of RMS it hasn't been well</font>

516
00:19:38,360 --> 00:19:41,240
adopted because<font color="#E5E5E5"> setting up the</font>

517
00:19:39,890 --> 00:19:44,179
infrastructure for<font color="#E5E5E5"> an organization is a</font>

518
00:19:41,240 --> 00:19:46,520
big pain<font color="#CCCCCC"> in</font><font color="#E5E5E5"> the butt</font><font color="#CCCCCC"> and coordinating</font>

519
00:19:44,179 --> 00:19:47,960
the<font color="#CCCCCC"> use of RMS between organizations is</font>

520
00:19:46,520 --> 00:19:49,610
<font color="#CCCCCC">a even worse pain in the butt</font><font color="#E5E5E5"> because</font>

521
00:19:47,960 --> 00:19:50,720
you have to like authenticate across to

522
00:19:49,610 --> 00:19:51,760
<font color="#CCCCCC">each other to</font><font color="#E5E5E5"> be able to read the</font>

523
00:19:50,720 --> 00:19:53,920
documents<font color="#E5E5E5"> and</font>

524
00:19:51,760 --> 00:19:55,629
big pain<font color="#CCCCCC"> in</font><font color="#E5E5E5"> the back as your RMS takes</font>

525
00:19:53,920 --> 00:19:57,340
that away<font color="#E5E5E5"> because you're all using Azure</font>

526
00:19:55,630 --> 00:19:59,350
ad<font color="#E5E5E5"> and your organization's are</font>

527
00:19:57,340 --> 00:20:01,419
effectively federated and you're all big

528
00:19:59,350 --> 00:20:02,740
one happy<font color="#CCCCCC"> family in the cloud because</font>

529
00:20:01,420 --> 00:20:06,190
you can authenticate<font color="#E5E5E5"> and share with</font><font color="#CCCCCC"> each</font>

530
00:20:02,740 --> 00:20:09,340
other what<font color="#CCCCCC"> whip does is it takes the</font>

531
00:20:06,190 --> 00:20:11,580
requirement of putting the<font color="#E5E5E5"> SDK</font><font color="#CCCCCC"> in your</font>

532
00:20:09,340 --> 00:20:13,810
application<font color="#CCCCCC"> to</font><font color="#E5E5E5"> leverage the RMS</font>

533
00:20:11,580 --> 00:20:15,250
functionality<font color="#E5E5E5"> and it actually does it in</font>

534
00:20:13,810 --> 00:20:17,409
the<font color="#E5E5E5"> operating system so now we can</font>

535
00:20:15,250 --> 00:20:19,540
declare enterprise applications and

536
00:20:17,410 --> 00:20:21,850
<font color="#E5E5E5">windows will do the encryption</font><font color="#CCCCCC"> of the</font>

537
00:20:19,540 --> 00:20:23,980
files that<font color="#E5E5E5"> they interact with for</font><font color="#CCCCCC"> us</font><font color="#E5E5E5"> so</font>

538
00:20:21,850 --> 00:20:25,899
now<font color="#CCCCCC"> I can say notepad is an</font><font color="#E5E5E5"> enterprise</font>

539
00:20:23,980 --> 00:20:27,760
application you create<font color="#E5E5E5"> this text file in</font>

540
00:20:25,900 --> 00:20:29,230
its RMS protected but<font color="#E5E5E5"> the</font><font color="#CCCCCC"> users</font><font color="#E5E5E5"> still</font>

541
00:20:27,760 --> 00:20:30,879
just<font color="#CCCCCC"> interactively</font><font color="#E5E5E5"> like a regular text</font>

542
00:20:29,230 --> 00:20:33,490
file<font color="#E5E5E5"> and as soon as they close the</font>

543
00:20:30,880 --> 00:20:34,960
<font color="#CCCCCC">application that text file</font><font color="#E5E5E5"> on disk if I</font>

544
00:20:33,490 --> 00:20:36,730
were to take<font color="#E5E5E5"> the text file away it would</font>

545
00:20:34,960 --> 00:20:38,230
just be an encrypted file and I would be

546
00:20:36,730 --> 00:20:40,240
able<font color="#E5E5E5"> to do anything with it</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> David</font>

547
00:20:38,230 --> 00:20:45,300
wouldn't<font color="#E5E5E5"> really know any different</font><font color="#CCCCCC"> so</font>

548
00:20:40,240 --> 00:20:47,380
that's that's<font color="#CCCCCC"> WIPP alright</font><font color="#E5E5E5"> so now we</font><font color="#CCCCCC"> are</font>

549
00:20:45,300 --> 00:20:49,690
done with<font color="#CCCCCC"> the client right we've</font>

550
00:20:47,380 --> 00:20:51,760
basically<font color="#CCCCCC"> broke into</font><font color="#E5E5E5"> the machine we</font>

551
00:20:49,690 --> 00:20:55,270
stole a bunch of files off of<font color="#CCCCCC"> it and now</font>

552
00:20:51,760 --> 00:20:56,980
we want to go<font color="#E5E5E5"> to the next thing so how</font>

553
00:20:55,270 --> 00:21:01,360
do<font color="#E5E5E5"> we how do we find our</font><font color="#CCCCCC"> way to</font><font color="#E5E5E5"> the</font>

554
00:20:56,980 --> 00:21:02,920
corpnet<font color="#E5E5E5"> in this case</font><font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> actually going</font>

555
00:21:01,360 --> 00:21:05,169
to<font color="#E5E5E5"> show</font><font color="#CCCCCC"> a different machine real quick</font>

556
00:21:02,920 --> 00:21:06,940
so the demos that<font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> doing around VMs</font>

557
00:21:05,170 --> 00:21:08,530
because I'd<font color="#E5E5E5"> like to rewind on a snapshot</font>

558
00:21:06,940 --> 00:21:10,450
<font color="#E5E5E5">but</font><font color="#CCCCCC"> it's really</font><font color="#E5E5E5"> hard to put a wireless</font>

559
00:21:08,530 --> 00:21:12,460
<font color="#CCCCCC">network</font><font color="#E5E5E5"> adapter in a virtual</font><font color="#CCCCCC"> machine</font><font color="#E5E5E5"> so</font>

560
00:21:10,450 --> 00:21:14,920
I have a physical<font color="#CCCCCC"> machine that is set up</font>

561
00:21:12,460 --> 00:21:17,620
<font color="#CCCCCC">very much</font><font color="#E5E5E5"> the same if we open up a</font>

562
00:21:14,920 --> 00:21:21,670
command prompt here<font color="#E5E5E5"> I'm actually running</font>

563
00:21:17,620 --> 00:21:24,159
<font color="#E5E5E5">this machine it's a joint</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> the same</font>

564
00:21:21,670 --> 00:21:25,690
domain<font color="#CCCCCC"> but I'm logged in as a local</font>

565
00:21:24,160 --> 00:21:28,450
<font color="#E5E5E5">account on here</font><font color="#CCCCCC"> that I</font><font color="#E5E5E5"> created the same</font>

566
00:21:25,690 --> 00:21:30,940
<font color="#CCCCCC">way we</font><font color="#E5E5E5"> did earlier</font><font color="#CCCCCC"> on this computer</font>

567
00:21:28,450 --> 00:21:32,140
<font color="#CCCCCC">other users</font><font color="#E5E5E5"> other domain users have used</font>

568
00:21:30,940 --> 00:21:35,170
<font color="#CCCCCC">this</font><font color="#E5E5E5"> machine</font><font color="#CCCCCC"> to connect to other</font>

569
00:21:32,140 --> 00:21:37,570
wireless networks so when they do that

570
00:21:35,170 --> 00:21:39,430
the computer stores the<font color="#E5E5E5"> pre shared key</font>

571
00:21:37,570 --> 00:21:40,419
in the registry so<font color="#CCCCCC"> it can be used to</font>

572
00:21:39,430 --> 00:21:42,580
automatically connect to<font color="#E5E5E5"> the wireless</font>

573
00:21:40,420 --> 00:21:45,490
<font color="#CCCCCC">network later which is super</font><font color="#E5E5E5"> handy for</font>

574
00:21:42,580 --> 00:21:47,760
me because I'm glad<font color="#CCCCCC"> Minh on the machine</font>

575
00:21:45,490 --> 00:21:50,920
and<font color="#E5E5E5"> when I go to the wireless networks</font><font color="#CCCCCC"> I</font>

576
00:21:47,760 --> 00:21:52,720
can click on network settings<font color="#CCCCCC"> and I</font><font color="#E5E5E5"> can</font>

577
00:21:50,920 --> 00:21:54,580
see<font color="#E5E5E5"> all of the other networks under</font>

578
00:21:52,720 --> 00:21:57,220
<font color="#CCCCCC">manage known networks that this person</font>

579
00:21:54,580 --> 00:21:59,199
or this computer has connected to so I

580
00:21:57,220 --> 00:22:01,240
can<font color="#CCCCCC"> see things</font><font color="#E5E5E5"> like you</font><font color="#CCCCCC"> know my boss's</font>

581
00:21:59,200 --> 00:22:02,710
phone<font color="#E5E5E5"> I can see our corporate network I</font>

582
00:22:01,240 --> 00:22:04,750
can<font color="#CCCCCC"> see home networks and all that stuff</font>

583
00:22:02,710 --> 00:22:05,620
<font color="#E5E5E5">and since</font><font color="#CCCCCC"> I have this</font><font color="#E5E5E5"> machine all of</font>

584
00:22:04,750 --> 00:22:09,010
<font color="#CCCCCC">that data is</font>

585
00:22:05,620 --> 00:22:17,679
stored on the computer<font color="#E5E5E5"> so what we can do</font>

586
00:22:09,010 --> 00:22:28,020
let's<font color="#CCCCCC"> go to users text</font><font color="#E5E5E5"> or desktop and</font>

587
00:22:17,680 --> 00:22:34,980
<font color="#E5E5E5">let's do net shw and export profile key</font>

588
00:22:28,020 --> 00:22:37,570
clear<font color="#CCCCCC"> oh you got</font><font color="#E5E5E5"> a spell net</font><font color="#CCCCCC"> Sh</font><font color="#E5E5E5"> right</font>

589
00:22:34,980 --> 00:22:39,580
and what this does is it<font color="#E5E5E5"> goes through</font>

590
00:22:37,570 --> 00:22:41,139
<font color="#CCCCCC">that list of all</font><font color="#E5E5E5"> the profiles</font><font color="#CCCCCC"> that have</font>

591
00:22:39,580 --> 00:22:44,169
already<font color="#E5E5E5"> been saved and it creates these</font>

592
00:22:41,140 --> 00:22:46,450
XML files on the desktop<font color="#E5E5E5"> or wherever</font><font color="#CCCCCC"> and</font>

593
00:22:44,170 --> 00:22:49,179
<font color="#E5E5E5">because I told it to make the key clear</font>

594
00:22:46,450 --> 00:22:51,190
I can<font color="#E5E5E5"> see not only the SSID of the</font>

595
00:22:49,179 --> 00:22:54,250
network<font color="#CCCCCC"> that I'm connecting to</font><font color="#E5E5E5"> but I can</font>

596
00:22:51,190 --> 00:22:57,280
see it's a wpa2<font color="#E5E5E5"> and here's the plaintext</font>

597
00:22:54,250 --> 00:23:00,520
password so if you want to connect to<font color="#E5E5E5"> my</font>

598
00:22:57,280 --> 00:23:02,620
boss's phone<font color="#CCCCCC"> here's his</font><font color="#E5E5E5"> appreciated key</font>

599
00:23:00,520 --> 00:23:04,570
<font color="#E5E5E5">happens to be all ones and zeros which</font>

600
00:23:02,620 --> 00:23:06,760
is a great<font color="#E5E5E5"> practice</font><font color="#CCCCCC"> it's actually not</font>

601
00:23:04,570 --> 00:23:08,559
<font color="#CCCCCC">his password I made that</font><font color="#E5E5E5"> up</font><font color="#CCCCCC"> but any</font>

602
00:23:06,760 --> 00:23:09,700
wireless network<font color="#CCCCCC"> that this machine is</font>

603
00:23:08,559 --> 00:23:11,080
<font color="#CCCCCC">connected to I can do that</font><font color="#E5E5E5"> this</font>

604
00:23:09,700 --> 00:23:13,270
administrative Lee actually has a

605
00:23:11,080 --> 00:23:15,070
purpose the idea here<font color="#CCCCCC"> is that</font><font color="#E5E5E5"> I could</font>

606
00:23:13,270 --> 00:23:16,660
pre-configure my<font color="#E5E5E5"> wireless connections</font>

607
00:23:15,070 --> 00:23:18,280
and then distribute these files and<font color="#E5E5E5"> not</font>

608
00:23:16,660 --> 00:23:19,809
have to tell users<font color="#E5E5E5"> how to do that</font>

609
00:23:18,280 --> 00:23:22,600
difficult process of<font color="#CCCCCC"> connecting the</font>

610
00:23:19,809 --> 00:23:25,510
wireless networks<font color="#CCCCCC"> but there are much</font>

611
00:23:22,600 --> 00:23:28,120
better ways to<font color="#E5E5E5"> do that</font><font color="#CCCCCC"> what I can do now</font>

612
00:23:25,510 --> 00:23:30,790
is<font color="#CCCCCC"> take this information</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> I can go to</font>

613
00:23:28,120 --> 00:23:32,320
this person's<font color="#CCCCCC"> corporation and I can now</font>

614
00:23:30,790 --> 00:23:34,450
connect<font color="#CCCCCC"> to their network because I have</font>

615
00:23:32,320 --> 00:23:37,360
the pre shared key<font color="#CCCCCC"> information right so</font>

616
00:23:34,450 --> 00:23:40,270
if we were to pretend<font color="#E5E5E5"> that we did that</font>

617
00:23:37,360 --> 00:23:41,919
<font color="#E5E5E5">right we could go look</font><font color="#CCCCCC"> up their company</font>

618
00:23:40,270 --> 00:23:43,929
<font color="#CCCCCC">name maybe I'm targeting this company</font>

619
00:23:41,920 --> 00:23:46,000
<font color="#E5E5E5">and</font><font color="#CCCCCC"> that's why I took the machine or I</font>

620
00:23:43,929 --> 00:23:47,800
just<font color="#CCCCCC"> looked them up online sometimes</font><font color="#E5E5E5"> the</font>

621
00:23:46,000 --> 00:23:49,780
<font color="#E5E5E5">SSID is you can go to like wiggle net</font>

622
00:23:47,800 --> 00:23:51,790
and you can search<font color="#CCCCCC"> for the SSID and</font>

623
00:23:49,780 --> 00:23:54,100
figure out<font color="#E5E5E5"> where it is on a map but now</font>

624
00:23:51,790 --> 00:23:56,020
I can go and connect to<font color="#E5E5E5"> the network so</font>

625
00:23:54,100 --> 00:23:58,870
let's take a second click here and go

626
00:23:56,020 --> 00:24:01,059
back<font color="#E5E5E5"> and say what can we do to stop</font><font color="#CCCCCC"> that</font>

627
00:23:58,870 --> 00:24:04,510
right how do you stop stealing that off

628
00:24:01,059 --> 00:24:06,129
of the<font color="#E5E5E5"> machine well first local admins</font>

629
00:24:04,510 --> 00:24:09,100
can do this right so<font color="#CCCCCC"> if you're a local</font>

630
00:24:06,130 --> 00:24:12,010
<font color="#E5E5E5">admin then there's not something</font><font color="#CCCCCC"> to stop</font>

631
00:24:09,100 --> 00:24:14,080
you doing<font color="#E5E5E5"> it so the</font><font color="#CCCCCC"> first</font><font color="#E5E5E5"> thing is stop</font>

632
00:24:12,010 --> 00:24:16,240
giving people<font color="#E5E5E5"> local admin</font><font color="#CCCCCC"> rates</font><font color="#E5E5E5"> so in</font>

633
00:24:14,080 --> 00:24:18,060
the case<font color="#E5E5E5"> of a remote shell right if I'm</font>

634
00:24:16,240 --> 00:24:21,540
remoted into this<font color="#E5E5E5"> guy's</font>

635
00:24:18,060 --> 00:24:24,570
<font color="#CCCCCC">she threw some malware hijack for</font>

636
00:24:21,540 --> 00:24:26,129
example<font color="#CCCCCC"> if he's a local</font><font color="#E5E5E5"> admin I can lurk</font>

637
00:24:24,570 --> 00:24:27,570
off of his machine all the<font color="#CCCCCC"> wireless</font>

638
00:24:26,130 --> 00:24:30,420
<font color="#CCCCCC">networks</font><font color="#E5E5E5"> and I can go in and attach my</font>

639
00:24:27,570 --> 00:24:31,919
<font color="#E5E5E5">own device so if</font><font color="#CCCCCC"> he's not a</font><font color="#E5E5E5"> local admin</font>

640
00:24:30,420 --> 00:24:35,190
this isn't the way<font color="#E5E5E5"> that I could pull</font>

641
00:24:31,920 --> 00:24:37,050
that<font color="#E5E5E5"> off</font><font color="#CCCCCC"> I'm also told that</font><font color="#E5E5E5"> this will</font>

642
00:24:35,190 --> 00:24:38,190
also<font color="#E5E5E5"> export the certificates of the</font>

643
00:24:37,050 --> 00:24:40,230
wireless network if you're using

644
00:24:38,190 --> 00:24:41,760
<font color="#E5E5E5">certificate based Wi-Fi I haven't</font>

645
00:24:40,230 --> 00:24:45,300
verified that but I understand that's

646
00:24:41,760 --> 00:24:47,100
<font color="#E5E5E5">the way it works and if if you're using</font>

647
00:24:45,300 --> 00:24:49,530
<font color="#E5E5E5">the certificate based Wi-Fi which is a</font>

648
00:24:47,100 --> 00:24:51,240
good idea<font color="#CCCCCC"> just make</font><font color="#E5E5E5"> sure that</font><font color="#CCCCCC"> the client</font>

649
00:24:49,530 --> 00:24:53,310
certificate doesn't<font color="#CCCCCC"> have the private key</font>

650
00:24:51,240 --> 00:24:54,690
marked as exportable<font color="#E5E5E5"> sometimes the</font>

651
00:24:53,310 --> 00:24:57,360
template that's put in the certificate

652
00:24:54,690 --> 00:25:00,300
<font color="#CCCCCC">authority has that certificate is</font>

653
00:24:57,360 --> 00:25:04,800
<font color="#E5E5E5">exportable</font><font color="#CCCCCC"> checkbox</font><font color="#E5E5E5"> set in this case</font>

654
00:25:00,300 --> 00:25:19,050
that's<font color="#E5E5E5"> not</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> great yeah sorry with the</font>

655
00:25:04,800 --> 00:25:19,889
private key yeah yeah yeah<font color="#CCCCCC"> forget it</font>

656
00:25:19,050 --> 00:25:24,060
all right you're gonna have<font color="#CCCCCC"> to show me</font>

657
00:25:19,890 --> 00:25:25,110
<font color="#CCCCCC">that I want to know that trick</font><font color="#E5E5E5"> and the</font>

658
00:25:24,060 --> 00:25:26,970
<font color="#E5E5E5">other option</font><font color="#CCCCCC"> then is</font><font color="#E5E5E5"> when you're</font>

659
00:25:25,110 --> 00:25:28,560
connecting if you can if you use radius

660
00:25:26,970 --> 00:25:30,660
then<font color="#E5E5E5"> the you have to have the users</font>

661
00:25:28,560 --> 00:25:32,550
credentials to connect<font color="#E5E5E5"> by radius as long</font>

662
00:25:30,660 --> 00:25:33,780
as<font color="#E5E5E5"> that information</font><font color="#CCCCCC"> is not stored</font><font color="#E5E5E5"> that</font>

663
00:25:32,550 --> 00:25:35,040
makes a little<font color="#E5E5E5"> bit</font><font color="#CCCCCC"> more cumbersome on</font>

664
00:25:33,780 --> 00:25:37,200
<font color="#E5E5E5">the user now because they have</font><font color="#CCCCCC"> to enter</font>

665
00:25:35,040 --> 00:25:39,110
the cred<font color="#E5E5E5"> or if they're doing</font><font color="#CCCCCC"> a Windows</font>

666
00:25:37,200 --> 00:25:41,580
<font color="#CCCCCC">based authentication they can then do</font>

667
00:25:39,110 --> 00:25:43,740
SSO now in<font color="#E5E5E5"> this context I don't</font><font color="#CCCCCC"> have</font>

668
00:25:41,580 --> 00:25:45,810
David's credentials on this machine<font color="#E5E5E5"> I'm</font>

669
00:25:43,740 --> 00:25:47,940
just logged in<font color="#E5E5E5"> as a local account so I</font>

670
00:25:45,810 --> 00:25:50,610
still can't<font color="#CCCCCC"> login if I'm using radius in</font>

671
00:25:47,940 --> 00:25:52,470
that case and if you do go<font color="#E5E5E5"> down this</font>

672
00:25:50,610 --> 00:25:54,510
path<font color="#CCCCCC"> to do the</font><font color="#E5E5E5"> the management</font><font color="#CCCCCC"> of the</font>

673
00:25:52,470 --> 00:25:55,530
wireless<font color="#E5E5E5"> networks</font><font color="#CCCCCC"> using</font><font color="#E5E5E5"> group policy as</font>

674
00:25:54,510 --> 00:25:57,030
your friend I<font color="#E5E5E5"> mean you can do</font>

675
00:25:55,530 --> 00:25:59,399
certificate enrollment automatically

676
00:25:57,030 --> 00:26:00,720
certificate<font color="#CCCCCC"> renew man automatically you</font>

677
00:25:59,400 --> 00:26:03,390
can<font color="#E5E5E5"> configure the wireless network</font>

678
00:26:00,720 --> 00:26:04,380
<font color="#E5E5E5">settings automatically</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> can also do</font>

679
00:26:03,390 --> 00:26:06,120
the<font color="#CCCCCC"> same thing with mobile device</font>

680
00:26:04,380 --> 00:26:08,520
management so<font color="#E5E5E5"> if you're doing this like</font>

681
00:26:06,120 --> 00:26:09,899
with in tune<font color="#CCCCCC"> for example you can manage</font>

682
00:26:08,520 --> 00:26:11,910
<font color="#CCCCCC">that through enrollment of</font><font color="#E5E5E5"> the device</font>

683
00:26:09,900 --> 00:26:13,980
and Windows 10<font color="#E5E5E5"> can also be managed as</font>

684
00:26:11,910 --> 00:26:16,320
MDM now so if you want<font color="#CCCCCC"> to use</font><font color="#E5E5E5"> you know</font>

685
00:26:13,980 --> 00:26:18,780
in tune or you want to use<font color="#E5E5E5"> air watch or</font>

686
00:26:16,320 --> 00:26:20,159
something<font color="#E5E5E5"> arguably you can use in tune</font>

687
00:26:18,780 --> 00:26:23,879
for<font color="#E5E5E5"> managing and configuring those</font>

688
00:26:20,160 --> 00:26:26,160
settings as well<font color="#CCCCCC"> okay so if that is the</font>

689
00:26:23,880 --> 00:26:27,930
<font color="#CCCCCC">end of the client side we've basically</font>

690
00:26:26,160 --> 00:26:29,220
gone through the point where we got<font color="#E5E5E5"> into</font>

691
00:26:27,930 --> 00:26:30,630
the environment<font color="#E5E5E5"> and we</font>

692
00:26:29,220 --> 00:26:32,280
into the machine<font color="#E5E5E5"> and now we're ready to</font>

693
00:26:30,630 --> 00:26:34,740
<font color="#CCCCCC">start moving around right</font><font color="#E5E5E5"> we've got the</font>

694
00:26:32,280 --> 00:26:36,090
wireless<font color="#E5E5E5"> network information we know</font>

695
00:26:34,740 --> 00:26:37,620
where this network is and we've gone<font color="#E5E5E5"> to</font>

696
00:26:36,090 --> 00:26:38,010
connect to it<font color="#CCCCCC"> so</font><font color="#E5E5E5"> let's look</font><font color="#CCCCCC"> around a</font>

697
00:26:37,620 --> 00:26:41,428
little<font color="#E5E5E5"> bit</font>

698
00:26:38,010 --> 00:26:43,440
<font color="#E5E5E5">and figure out what we can do we are</font>

699
00:26:41,429 --> 00:26:45,929
<font color="#E5E5E5">going to go over</font><font color="#CCCCCC"> to this member server</font>

700
00:26:43,440 --> 00:26:52,080
so<font color="#E5E5E5"> to do that what we're going to do is</font>

701
00:26:45,929 --> 00:26:56,100
jump back to our workstation and we can

702
00:26:52,080 --> 00:26:59,129
close<font color="#E5E5E5"> these out</font><font color="#CCCCCC"> now one</font><font color="#E5E5E5"> of the tools</font>

703
00:26:56,100 --> 00:27:00,870
that I've ended<font color="#E5E5E5"> up using a lot</font><font color="#CCCCCC"> I used to</font>

704
00:26:59,130 --> 00:27:03,240
do a lot of deployments of direct<font color="#E5E5E5"> access</font>

705
00:27:00,870 --> 00:27:06,260
<font color="#E5E5E5">and with direct access I had to talk</font><font color="#CCCCCC"> to</font>

706
00:27:03,240 --> 00:27:08,850
<font color="#E5E5E5">Active Directory a lot and there is a</font>

707
00:27:06,260 --> 00:27:10,500
tool<font color="#CCCCCC"> to talk to Active Directory called</font>

708
00:27:08,850 --> 00:27:12,510
<font color="#CCCCCC">an OL test</font><font color="#E5E5E5"> I don't know if you've</font><font color="#CCCCCC"> used</font>

709
00:27:10,500 --> 00:27:16,429
<font color="#E5E5E5">that</font><font color="#CCCCCC"> before but let's</font><font color="#E5E5E5"> make this a little</font>

710
00:27:12,510 --> 00:27:19,770
bit bigger<font color="#E5E5E5"> so you can</font><font color="#CCCCCC"> see it</font><font color="#E5E5E5"> change that</font>

711
00:27:16,429 --> 00:27:21,390
<font color="#CCCCCC">okay so an OU test allows</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> to</font>

712
00:27:19,770 --> 00:27:22,950
<font color="#E5E5E5">basically do</font><font color="#CCCCCC"> queries against Active</font>

713
00:27:21,390 --> 00:27:26,250
Directory and interrogate some

714
00:27:22,950 --> 00:27:29,820
properties<font color="#CCCCCC"> of the DC's</font><font color="#E5E5E5"> so if we do NL</font>

715
00:27:26,250 --> 00:27:31,710
<font color="#CCCCCC">tests / DC list</font><font color="#E5E5E5"> what this should do is</font>

716
00:27:29,820 --> 00:27:33,990
connect<font color="#E5E5E5"> to Active Directory and list out</font>

717
00:27:31,710 --> 00:27:36,030
<font color="#CCCCCC">the domain</font><font color="#E5E5E5"> controllers but I'm getting</font>

718
00:27:33,990 --> 00:27:37,770
<font color="#CCCCCC">that</font><font color="#E5E5E5"> error</font><font color="#CCCCCC"> message here that</font><font color="#E5E5E5"> says</font><font color="#CCCCCC"> that I</font>

719
00:27:36,030 --> 00:27:39,690
don't<font color="#CCCCCC"> have access to</font><font color="#E5E5E5"> do a directory</font>

720
00:27:37,770 --> 00:27:41,129
services bind<font color="#E5E5E5"> but then it tells me the</font>

721
00:27:39,690 --> 00:27:43,110
name<font color="#CCCCCC"> of the domain controller so that's</font>

722
00:27:41,130 --> 00:27:44,669
super handy<font color="#CCCCCC"> it also happens to tell me</font>

723
00:27:43,110 --> 00:27:46,590
down below<font color="#E5E5E5"> that it is the primary domain</font>

724
00:27:44,669 --> 00:27:48,720
controller<font color="#CCCCCC"> so that's</font><font color="#E5E5E5"> also really useful</font>

725
00:27:46,590 --> 00:27:50,299
<font color="#CCCCCC">because ultimately that's</font><font color="#E5E5E5"> my goal right</font>

726
00:27:48,720 --> 00:27:52,620
my goal<font color="#E5E5E5"> is to get to</font><font color="#CCCCCC"> the domain</font>

727
00:27:50,299 --> 00:27:56,610
controllers and<font color="#E5E5E5"> why not go for</font><font color="#CCCCCC"> the PDC</font>

728
00:27:52,620 --> 00:27:58,199
<font color="#E5E5E5">so the one caveat is I would like</font><font color="#CCCCCC"> to</font>

729
00:27:56,610 --> 00:27:59,969
know a little<font color="#E5E5E5"> bit more</font><font color="#CCCCCC"> about the</font>

730
00:27:58,200 --> 00:28:01,830
<font color="#CCCCCC">environment and ENIL tests usually tells</font>

731
00:27:59,970 --> 00:28:04,380
me more than<font color="#E5E5E5"> just</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> single domain</font>

732
00:28:01,830 --> 00:28:06,330
controller<font color="#E5E5E5"> the problem is I can't do a</font>

733
00:28:04,380 --> 00:28:08,400
query<font color="#E5E5E5"> against the directory services</font>

734
00:28:06,330 --> 00:28:10,168
because I don't have credentials<font color="#CCCCCC"> because</font>

735
00:28:08,400 --> 00:28:12,240
<font color="#CCCCCC">I'm a local</font><font color="#E5E5E5"> account on this</font><font color="#CCCCCC"> machine but</font>

736
00:28:10,169 --> 00:28:16,500
<font color="#E5E5E5">this</font><font color="#CCCCCC"> machine is joined to</font><font color="#E5E5E5"> the domain</font><font color="#CCCCCC"> so</font>

737
00:28:12,240 --> 00:28:18,600
the<font color="#E5E5E5"> domain allows a gated user to do</font>

738
00:28:16,500 --> 00:28:20,429
queries against it<font color="#E5E5E5"> and the computer is</font>

739
00:28:18,600 --> 00:28:22,770
an authenticated user<font color="#E5E5E5"> so if I can use</font>

740
00:28:20,429 --> 00:28:25,470
the computer<font color="#CCCCCC"> I could</font><font color="#E5E5E5"> do these queries</font>

741
00:28:22,770 --> 00:28:27,360
and we<font color="#CCCCCC"> did</font><font color="#E5E5E5"> that before by using the</font>

742
00:28:25,470 --> 00:28:30,510
sticky keys right so one two<font color="#CCCCCC"> three</font><font color="#E5E5E5"> four</font>

743
00:28:27,360 --> 00:28:32,280
<font color="#E5E5E5">or</font><font color="#CCCCCC"> five and if I do Who</font><font color="#E5E5E5"> am I the</font>

744
00:28:30,510 --> 00:28:34,620
downside<font color="#E5E5E5"> here</font><font color="#CCCCCC"> is I'm actually still</font>

745
00:28:32,280 --> 00:28:38,520
running<font color="#CCCCCC"> that axilor instead of system so</font>

746
00:28:34,620 --> 00:28:40,080
I want<font color="#E5E5E5"> to use another</font><font color="#CCCCCC"> tool now for sake</font>

747
00:28:38,520 --> 00:28:41,429
<font color="#CCCCCC">of time</font><font color="#E5E5E5"> I already</font><font color="#CCCCCC"> downloaded some of</font>

748
00:28:40,080 --> 00:28:42,399
these tools but the tool that<font color="#E5E5E5"> I'm</font><font color="#CCCCCC"> going</font>

749
00:28:41,429 --> 00:28:46,390
to<font color="#E5E5E5"> use</font>

750
00:28:42,400 --> 00:28:49,870
is our good old friend<font color="#CCCCCC"> PS</font><font color="#E5E5E5"> exec will go</font>

751
00:28:46,390 --> 00:28:54,130
<font color="#E5E5E5">ahead and copy our PS exact tool right</font>

752
00:28:49,870 --> 00:28:56,320
over here to our<font color="#CCCCCC"> C Drive</font><font color="#E5E5E5"> I'm going to</font>

753
00:28:54,130 --> 00:29:00,220
make a new folder<font color="#CCCCCC"> over here just</font><font color="#E5E5E5"> called</font>

754
00:28:56,320 --> 00:29:01,720
tools<font color="#CCCCCC"> when</font><font color="#E5E5E5"> I paste that and then I'm</font>

755
00:29:00,220 --> 00:29:05,170
going<font color="#CCCCCC"> to change over to the tools</font>

756
00:29:01,720 --> 00:29:08,560
directory<font color="#E5E5E5"> and then here's PS exec so if</font>

757
00:29:05,170 --> 00:29:13,180
I use PS exec<font color="#E5E5E5"> I do a system interactive</font>

758
00:29:08,560 --> 00:29:14,800
do not wait cmd.exe<font color="#CCCCCC"> and then accept</font><font color="#E5E5E5"> the</font>

759
00:29:13,180 --> 00:29:21,730
<font color="#E5E5E5">EULA right we're going to make sure we</font>

760
00:29:14,800 --> 00:29:25,750
do<font color="#CCCCCC"> that and now I can say</font><font color="#E5E5E5"> Who am I</font><font color="#CCCCCC"> and</font>

761
00:29:21,730 --> 00:29:28,750
of course I do get the system back<font color="#CCCCCC"> so</font>

762
00:29:25,750 --> 00:29:31,060
now I can use tools just to<font color="#E5E5E5"> invoke</font>

763
00:29:28,750 --> 00:29:32,800
system process because<font color="#CCCCCC"> again I'm a</font><font color="#E5E5E5"> local</font>

764
00:29:31,060 --> 00:29:34,870
<font color="#CCCCCC">administrator so I'm allowed to</font><font color="#E5E5E5"> do these</font>

765
00:29:32,800 --> 00:29:37,020
sorts of things<font color="#E5E5E5"> make this a little</font>

766
00:29:34,870 --> 00:29:44,020
bigger so<font color="#CCCCCC"> you can</font><font color="#E5E5E5"> see this as well</font>

767
00:29:37,020 --> 00:29:45,520
properties and change that here and

768
00:29:44,020 --> 00:29:50,500
we'll<font color="#E5E5E5"> make this scroll back a little bit</font>

769
00:29:45,520 --> 00:29:54,010
<font color="#E5E5E5">bigger</font><font color="#CCCCCC"> okay</font><font color="#E5E5E5"> now if I go back</font><font color="#CCCCCC"> to our</font>

770
00:29:50,500 --> 00:29:55,980
<font color="#E5E5E5">tools directory</font><font color="#CCCCCC"> I can do NL tests /dc</font>

771
00:29:54,010 --> 00:29:58,390
<font color="#CCCCCC">list which is what i'd done last time</font>

772
00:29:55,980 --> 00:30:00,970
now<font color="#CCCCCC"> I can see a little</font><font color="#E5E5E5"> bit more</font>

773
00:29:58,390 --> 00:30:04,000
information<font color="#E5E5E5"> right so now I can see</font><font color="#CCCCCC"> that</font>

774
00:30:00,970 --> 00:30:05,650
not<font color="#E5E5E5"> only is DC 3 there but I have DC 4</font>

775
00:30:04,000 --> 00:30:08,440
and I also have a domain controller<font color="#CCCCCC"> and</font>

776
00:30:05,650 --> 00:30:11,320
a whole nother site so what that<font color="#CCCCCC"> gives</font>

777
00:30:08,440 --> 00:30:13,240
me is the<font color="#E5E5E5"> some layout lay of the land</font>

778
00:30:11,320 --> 00:30:15,700
<font color="#E5E5E5">right if I want to go after other things</font>

779
00:30:13,240 --> 00:30:16,930
<font color="#E5E5E5">I know what other sites there might be</font><font color="#CCCCCC"> I</font>

780
00:30:15,700 --> 00:30:19,180
can start<font color="#E5E5E5"> looking around for different</font>

781
00:30:16,930 --> 00:30:20,320
<font color="#E5E5E5">subnets and</font><font color="#CCCCCC"> routes of things</font><font color="#E5E5E5"> but it just</font>

782
00:30:19,180 --> 00:30:23,710
<font color="#CCCCCC">going</font><font color="#E5E5E5"> to gives me a little bit more</font>

783
00:30:20,320 --> 00:30:26,230
information<font color="#CCCCCC"> so what's next what else can</font>

784
00:30:23,710 --> 00:30:28,030
we find<font color="#E5E5E5"> well now that I'm able to do</font>

785
00:30:26,230 --> 00:30:29,980
queries<font color="#E5E5E5"> against Active Directory I can</font>

786
00:30:28,030 --> 00:30:35,950
do things<font color="#CCCCCC"> like tell me who's</font><font color="#E5E5E5"> in the</font>

787
00:30:29,980 --> 00:30:40,690
directory right so there's net user user

788
00:30:35,950 --> 00:30:42,460
in the domain and<font color="#E5E5E5"> this dumps out all the</font>

789
00:30:40,690 --> 00:30:44,470
users<font color="#CCCCCC"> in Active Directory so I can get a</font>

790
00:30:42,460 --> 00:30:47,260
list<font color="#E5E5E5"> of all of the accounts</font><font color="#CCCCCC"> I can see</font>

791
00:30:44,470 --> 00:30:48,910
<font color="#E5E5E5">naming conventions I can</font><font color="#CCCCCC"> usually do some</font>

792
00:30:47,260 --> 00:30:50,140
guessing on other<font color="#E5E5E5"> services and products</font>

793
00:30:48,910 --> 00:30:53,470
that<font color="#E5E5E5"> they're using because naming</font>

794
00:30:50,140 --> 00:30:55,020
conventions are inherent to<font color="#CCCCCC"> humans we</font>

795
00:30:53,470 --> 00:30:59,190
<font color="#E5E5E5">can also do</font>

796
00:30:55,020 --> 00:31:00,810
<font color="#E5E5E5">that group in the domain and this will</font>

797
00:30:59,190 --> 00:31:03,720
<font color="#E5E5E5">actually dump out a list of all</font><font color="#CCCCCC"> of the</font>

798
00:31:00,810 --> 00:31:05,700
<font color="#E5E5E5">groups and</font><font color="#CCCCCC"> AD which again gives</font><font color="#E5E5E5"> me more</font>

799
00:31:03,720 --> 00:31:07,290
insight<font color="#CCCCCC"> to things like what products</font>

800
00:31:05,700 --> 00:31:09,750
<font color="#E5E5E5">they're using right here's some</font><font color="#CCCCCC"> RDS and</font>

801
00:31:07,290 --> 00:31:11,639
there's sequel exchange<font color="#E5E5E5"> and I can start</font>

802
00:31:09,750 --> 00:31:13,680
<font color="#E5E5E5">using that to look up what kinds of</font>

803
00:31:11,640 --> 00:31:15,720
attacks might I do<font color="#E5E5E5"> right if</font><font color="#CCCCCC"> I if</font><font color="#E5E5E5"> I</font>

804
00:31:13,680 --> 00:31:17,730
wanted<font color="#CCCCCC"> to get into sequel I can at least</font>

805
00:31:15,720 --> 00:31:20,580
<font color="#E5E5E5">know what versions are what servers they</font>

806
00:31:17,730 --> 00:31:25,230
have but<font color="#E5E5E5"> even a better one to do here is</font>

807
00:31:20,580 --> 00:31:31,560
if I do net group<font color="#E5E5E5"> domain admins in the</font>

808
00:31:25,230 --> 00:31:33,930
domain<font color="#E5E5E5"> do ma</font><font color="#CCCCCC"> I n now I can see</font><font color="#E5E5E5"> that</font>

809
00:31:31,560 --> 00:31:37,399
these<font color="#CCCCCC"> are the</font><font color="#E5E5E5"> users that are domain</font>

810
00:31:33,930 --> 00:31:40,250
admins<font color="#E5E5E5"> in this in this environment now</font>

811
00:31:37,400 --> 00:31:44,280
what can<font color="#CCCCCC"> you infer from these names</font>

812
00:31:40,250 --> 00:31:46,140
right it starts with a probably<font color="#E5E5E5"> the</font>

813
00:31:44,280 --> 00:31:47,310
<font color="#E5E5E5">admin accounts and</font><font color="#CCCCCC"> their people</font><font color="#E5E5E5"> the</font>

814
00:31:46,140 --> 00:31:50,730
other ones that start with<font color="#E5E5E5"> S are</font>

815
00:31:47,310 --> 00:31:52,730
probably<font color="#E5E5E5"> what service accounts</font><font color="#CCCCCC"> yeah and</font>

816
00:31:50,730 --> 00:31:55,260
what do we know about service accounts

817
00:31:52,730 --> 00:31:56,880
they<font color="#E5E5E5"> never change</font><font color="#CCCCCC"> passwords never</font>

818
00:31:55,260 --> 00:31:58,050
changed because<font color="#E5E5E5"> you</font><font color="#CCCCCC"> know</font><font color="#E5E5E5"> that's pain in</font>

819
00:31:56,880 --> 00:31:59,760
the butt<font color="#E5E5E5"> so we don't want to deal</font><font color="#CCCCCC"> with</font>

820
00:31:58,050 --> 00:32:00,960
changing passwords<font color="#E5E5E5"> but it turns out we</font>

821
00:31:59,760 --> 00:32:03,660
have<font color="#E5E5E5"> servers accounts that</font><font color="#CCCCCC"> are</font><font color="#E5E5E5"> domain</font>

822
00:32:00,960 --> 00:32:04,920
admins so why not<font color="#E5E5E5"> go after those right</font>

823
00:32:03,660 --> 00:32:06,840
we'll have all the time<font color="#CCCCCC"> in</font><font color="#E5E5E5"> the world to</font>

824
00:32:04,920 --> 00:32:09,390
try and figure out their passwords and

825
00:32:06,840 --> 00:32:11,399
they have all the<font color="#CCCCCC"> access that we</font><font color="#E5E5E5"> need so</font>

826
00:32:09,390 --> 00:32:13,470
if we start<font color="#CCCCCC"> looking</font><font color="#E5E5E5"> at these we might</font>

827
00:32:11,400 --> 00:32:15,300
say well I<font color="#E5E5E5"> want</font><font color="#CCCCCC"> to go after</font><font color="#E5E5E5"> sequel</font>

828
00:32:13,470 --> 00:32:17,280
server or maybe I want to go after this

829
00:32:15,300 --> 00:32:19,470
<font color="#CCCCCC">one called app service or I want</font><font color="#E5E5E5"> to go</font>

830
00:32:17,280 --> 00:32:22,260
after<font color="#E5E5E5"> you</font><font color="#CCCCCC"> know some</font><font color="#E5E5E5"> other user that's in</font>

831
00:32:19,470 --> 00:32:24,110
here but I'm adding<font color="#E5E5E5"> that</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> to the list</font>

832
00:32:22,260 --> 00:32:27,990
<font color="#CCCCCC">right so I know the domain I know the</font>

833
00:32:24,110 --> 00:32:30,060
domain admins<font color="#E5E5E5"> and I know some about the</font>

834
00:32:27,990 --> 00:32:31,380
products that<font color="#E5E5E5"> they have installed but I</font>

835
00:32:30,060 --> 00:32:33,090
need to<font color="#E5E5E5"> know where</font><font color="#CCCCCC"> to go I need</font><font color="#E5E5E5"> to</font>

836
00:32:31,380 --> 00:32:35,250
<font color="#E5E5E5">figure out where where I can find these</font>

837
00:32:33,090 --> 00:32:39,750
accounts<font color="#E5E5E5"> so one of the things that we</font>

838
00:32:35,250 --> 00:32:41,940
can do is go back<font color="#CCCCCC"> to comp MGMT MSc and</font>

839
00:32:39,750 --> 00:32:43,980
again<font color="#CCCCCC"> i'm</font><font color="#E5E5E5"> running in context of the</font>

840
00:32:41,940 --> 00:32:46,290
<font color="#E5E5E5">system so this</font><font color="#CCCCCC"> is going</font><font color="#E5E5E5"> to be able to</font>

841
00:32:43,980 --> 00:32:48,090
talk<font color="#CCCCCC"> to Active Directory will go under</font>

842
00:32:46,290 --> 00:32:50,340
users and groups but this<font color="#E5E5E5"> time</font><font color="#CCCCCC"> we'll go</font>

843
00:32:48,090 --> 00:32:52,889
to groups pick any group administrators

844
00:32:50,340 --> 00:32:54,449
is fun so we'll just<font color="#E5E5E5"> use</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> and then</font>

845
00:32:52,890 --> 00:32:56,610
we're<font color="#E5E5E5"> going to go to an advanced search</font>

846
00:32:54,450 --> 00:32:58,750
we're<font color="#E5E5E5"> going to change the</font><font color="#CCCCCC"> object types</font>

847
00:32:56,610 --> 00:33:00,820
to just be computers

848
00:32:58,750 --> 00:33:04,030
and then we're<font color="#E5E5E5"> going to go ahead and hit</font>

849
00:33:00,820 --> 00:33:06,490
find now and when we<font color="#E5E5E5"> make this window a</font>

850
00:33:04,030 --> 00:33:08,799
little bit<font color="#E5E5E5"> bigger</font><font color="#CCCCCC"> basically what we were</font>

851
00:33:06,490 --> 00:33:10,690
<font color="#CCCCCC">able to do here is just dump out</font><font color="#E5E5E5"> a list</font>

852
00:33:08,799 --> 00:33:12,940
of<font color="#CCCCCC"> all of the computers that are in</font>

853
00:33:10,690 --> 00:33:16,750
<font color="#CCCCCC">Active Directory and if my fingers would</font>

854
00:33:12,940 --> 00:33:18,850
work with me here I'd show<font color="#E5E5E5"> you that so</font>

855
00:33:16,750 --> 00:33:20,830
here<font color="#CCCCCC"> alright so we've got some some</font>

856
00:33:18,850 --> 00:33:22,260
computers and now we can start<font color="#E5E5E5"> getting</font>

857
00:33:20,830 --> 00:33:23,980
names of machines a further

858
00:33:22,260 --> 00:33:25,480
<font color="#E5E5E5">understanding of what other stuffs</font>

859
00:33:23,980 --> 00:33:27,880
installed because<font color="#E5E5E5"> you know we typically</font>

860
00:33:25,480 --> 00:33:30,039
<font color="#E5E5E5">install our products on servers that are</font>

861
00:33:27,880 --> 00:33:32,110
<font color="#E5E5E5">named after what they run so we can</font>

862
00:33:30,039 --> 00:33:35,110
start<font color="#E5E5E5"> doing some inferences here to</font>

863
00:33:32,110 --> 00:33:37,149
understand where<font color="#CCCCCC"> to go</font><font color="#E5E5E5"> well lucky</font><font color="#CCCCCC"> for us</font>

864
00:33:35,110 --> 00:33:39,399
we<font color="#E5E5E5"> have this machine here called app</font>

865
00:33:37,150 --> 00:33:41,590
server and we know we<font color="#E5E5E5"> have a service</font>

866
00:33:39,400 --> 00:33:44,110
account called<font color="#E5E5E5"> app service so if we're</font>

867
00:33:41,590 --> 00:33:45,699
you know going to<font color="#CCCCCC"> be a betting man I'd</font>

868
00:33:44,110 --> 00:33:48,428
say<font color="#E5E5E5"> that they're probably related</font><font color="#CCCCCC"> to</font>

869
00:33:45,700 --> 00:33:52,539
<font color="#E5E5E5">each other so if I wanted</font><font color="#CCCCCC"> to get to</font><font color="#E5E5E5"> app</font>

870
00:33:48,429 --> 00:33:54,549
server<font color="#CCCCCC"> I need to know how to</font><font color="#E5E5E5"> get to the</font>

871
00:33:52,539 --> 00:33:58,480
<font color="#E5E5E5">machine right now what if I was an</font>

872
00:33:54,549 --> 00:34:01,240
administrator in the environment<font color="#CCCCCC"> what do</font>

873
00:33:58,480 --> 00:34:02,679
I<font color="#CCCCCC"> need to</font><font color="#E5E5E5"> get</font><font color="#CCCCCC"> onto that</font><font color="#E5E5E5"> machine how do i</font>

874
00:34:01,240 --> 00:34:06,299
how do<font color="#E5E5E5"> i administer that</font><font color="#CCCCCC"> machine if i'm</font>

875
00:34:02,679 --> 00:34:08,679
an administrator in the organization

876
00:34:06,299 --> 00:34:10,239
probably remote desktop<font color="#E5E5E5"> right</font>

877
00:34:08,679 --> 00:34:11,740
<font color="#CCCCCC">I'd already pee</font><font color="#E5E5E5"> to the</font><font color="#CCCCCC"> Machine</font><font color="#E5E5E5"> so</font>

878
00:34:10,239 --> 00:34:13,719
chances are<font color="#E5E5E5"> I can already pee to this</font>

879
00:34:11,739 --> 00:34:16,868
<font color="#E5E5E5">machine</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> to get to RDP I need</font>

880
00:34:13,719 --> 00:34:18,609
<font color="#E5E5E5">credentials right so let's</font><font color="#CCCCCC"> some let's</font>

881
00:34:16,869 --> 00:34:21,040
actually just pause for<font color="#CCCCCC"> a quick second</font>

882
00:34:18,609 --> 00:34:22,418
and go and<font color="#E5E5E5"> find out what we can do to</font>

883
00:34:21,040 --> 00:34:24,668
stop what we've done so far which is

884
00:34:22,418 --> 00:34:29,319
<font color="#CCCCCC">mostly our recon right so let's go over</font>

885
00:34:24,668 --> 00:34:34,469
here to<font color="#CCCCCC"> our deck and say what can we</font><font color="#E5E5E5"> do</font>

886
00:34:29,320 --> 00:34:36,820
to stop some of<font color="#E5E5E5"> this okay so actually</font>

887
00:34:34,469 --> 00:34:40,239
<font color="#CCCCCC">try</font><font color="#E5E5E5"> remember if I have this part next</font>

888
00:34:36,820 --> 00:34:41,379
<font color="#E5E5E5">yeah let's let's do one more</font><font color="#CCCCCC"> thing</font><font color="#E5E5E5"> and</font>

889
00:34:40,239 --> 00:34:42,428
<font color="#E5E5E5">then we'll come</font><font color="#CCCCCC"> back to the deck</font><font color="#E5E5E5"> I want</font>

890
00:34:41,379 --> 00:34:44,080
to show you<font color="#CCCCCC"> a little</font><font color="#E5E5E5"> bit more and we'll</font>

891
00:34:42,429 --> 00:34:47,139
<font color="#CCCCCC">could do that again okay so</font><font color="#E5E5E5"> if I want to</font>

892
00:34:44,080 --> 00:34:49,690
<font color="#E5E5E5">get this I want to RDP to this machine</font>

893
00:34:47,139 --> 00:34:51,429
<font color="#E5E5E5">I need credentials and I don't have any</font>

894
00:34:49,690 --> 00:34:54,520
credentials<font color="#E5E5E5"> for the domain I know I want</font>

895
00:34:51,429 --> 00:34:58,359
app server<font color="#CCCCCC"> app service but what I do</font>

896
00:34:54,520 --> 00:35:01,869
have<font color="#CCCCCC"> is this local admin account</font><font color="#E5E5E5"> on this</font>

897
00:34:58,359 --> 00:35:03,279
machine<font color="#E5E5E5"> right</font><font color="#CCCCCC"> now because</font><font color="#E5E5E5"> this is an</font>

898
00:35:01,869 --> 00:35:04,720
account<font color="#CCCCCC"> that lives on this machine that</font>

899
00:35:03,280 --> 00:35:07,000
<font color="#E5E5E5">means it's credential lives on this</font>

900
00:35:04,720 --> 00:35:09,368
machine<font color="#CCCCCC"> too and I'm also a local</font><font color="#E5E5E5"> admin</font>

901
00:35:07,000 --> 00:35:11,080
<font color="#E5E5E5">so I can go and read that</font><font color="#CCCCCC"> now I want to</font>

902
00:35:09,369 --> 00:35:11,820
use another<font color="#E5E5E5"> tool</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> do that</font>

903
00:35:11,080 --> 00:35:13,799
wait

904
00:35:11,820 --> 00:35:16,920
is a tool that we all know fairly well

905
00:35:13,800 --> 00:35:19,440
<font color="#CCCCCC">Mimi</font><font color="#E5E5E5"> cats so I've downloaded that</font><font color="#CCCCCC"> too</font>

906
00:35:16,920 --> 00:35:22,080
<font color="#CCCCCC">we'll go over here to our tools</font>

907
00:35:19,440 --> 00:35:24,270
directory and here's<font color="#CCCCCC"> Mimi cats</font><font color="#E5E5E5"> and if I</font>

908
00:35:22,080 --> 00:35:27,660
want to<font color="#E5E5E5"> take these</font><font color="#CCCCCC"> two these three files</font>

909
00:35:24,270 --> 00:35:29,700
rather will copy these and<font color="#E5E5E5"> then we'll go</font>

910
00:35:27,660 --> 00:35:32,339
over here and<font color="#E5E5E5"> paste it to</font><font color="#CCCCCC"> our C Drive</font>

911
00:35:29,700 --> 00:35:34,439
and then all goodness<font color="#E5E5E5"> defender just</font>

912
00:35:32,340 --> 00:35:39,330
<font color="#CCCCCC">boarded me</font><font color="#E5E5E5"> so let's go</font><font color="#CCCCCC"> ahead and click</font>

913
00:35:34,440 --> 00:35:42,360
on defender and say hey<font color="#E5E5E5"> not scan we want</font>

914
00:35:39,330 --> 00:35:44,790
to go<font color="#E5E5E5"> to our protection</font><font color="#CCCCCC"> settings</font><font color="#E5E5E5"> and we</font>

915
00:35:42,360 --> 00:35:47,940
want to turn<font color="#CCCCCC"> off</font><font color="#E5E5E5"> real time protection</font>

916
00:35:44,790 --> 00:35:52,890
<font color="#E5E5E5">yes turn it off and then we're going to</font>

917
00:35:47,940 --> 00:35:54,900
<font color="#E5E5E5">go ahead paste it and there so now we</font>

918
00:35:52,890 --> 00:35:56,430
have our<font color="#E5E5E5"> Mimi cat stuff because we told</font>

919
00:35:54,900 --> 00:35:58,800
defender hey I'm local<font color="#E5E5E5"> admin I know what</font>

920
00:35:56,430 --> 00:36:02,220
I'm doing I want<font color="#E5E5E5"> this file</font><font color="#CCCCCC"> okay</font>

921
00:35:58,800 --> 00:36:07,170
so we'll come back<font color="#E5E5E5"> over here and we're</font>

922
00:36:02,220 --> 00:36:08,459
<font color="#E5E5E5">going to do a have</font><font color="#CCCCCC"> that file right here</font>

923
00:36:07,170 --> 00:36:11,010
just to<font color="#CCCCCC"> make it quicker</font>

924
00:36:08,460 --> 00:36:18,990
I don't<font color="#E5E5E5"> okay so what we're going to do</font>

925
00:36:11,010 --> 00:36:20,760
is load up mini cats and I do have a

926
00:36:18,990 --> 00:36:22,919
script that<font color="#E5E5E5"> I wrote</font><font color="#CCCCCC"> just so they don't</font>

927
00:36:20,760 --> 00:36:26,400
have to type it<font color="#E5E5E5"> all</font><font color="#CCCCCC"> out and what it'll</font>

928
00:36:22,920 --> 00:36:28,470
do is where's that I don't have<font color="#E5E5E5"> the</font>

929
00:36:26,400 --> 00:36:33,240
<font color="#E5E5E5">final on they're trying to get</font><font color="#CCCCCC"> faster</font>

930
00:36:28,470 --> 00:36:35,310
and<font color="#E5E5E5"> I'm</font><font color="#CCCCCC"> making</font><font color="#E5E5E5"> it slower so we</font><font color="#CCCCCC"> get oh I</font>

931
00:36:33,240 --> 00:36:43,649
got to restore<font color="#E5E5E5"> those files because I let</font>

932
00:36:35,310 --> 00:36:48,990
defender do that<font color="#E5E5E5"> where you</font><font color="#CCCCCC"> hear tools</font>

933
00:36:43,650 --> 00:36:49,880
<font color="#E5E5E5">copy from</font><font color="#CCCCCC"> here let's paste it back over</font>

934
00:36:48,990 --> 00:36:54,629
here

935
00:36:49,880 --> 00:36:57,120
come on<font color="#CCCCCC"> RDP</font><font color="#E5E5E5"> there alright now I can</font><font color="#CCCCCC"> go</font>

936
00:36:54,630 --> 00:37:00,120
<font color="#E5E5E5">ahead and</font><font color="#CCCCCC"> run it</font><font color="#E5E5E5"> so what this will do</font><font color="#CCCCCC"> is</font>

937
00:36:57,120 --> 00:37:02,490
it<font color="#CCCCCC"> will run the</font><font color="#E5E5E5"> debug it'll load the LSA</font>

938
00:37:00,120 --> 00:37:04,170
dump command<font color="#E5E5E5"> and it will then dump the</font>

939
00:37:02,490 --> 00:37:07,259
Sam database so if you want<font color="#E5E5E5"> to see that</font>

940
00:37:04,170 --> 00:37:12,210
real quick<font color="#CCCCCC"> I can open that up too so</font>

941
00:37:07,260 --> 00:37:14,340
we've got<font color="#E5E5E5"> this command right</font><font color="#CCCCCC"> here</font><font color="#E5E5E5"> so</font>

942
00:37:12,210 --> 00:37:16,530
it's basically just<font color="#E5E5E5"> running the LSA dump</font>

943
00:37:14,340 --> 00:37:18,300
for the Sam database<font color="#E5E5E5"> right so if you</font>

944
00:37:16,530 --> 00:37:19,290
want<font color="#CCCCCC"> to see that later there's your</font>

945
00:37:18,300 --> 00:37:21,360
notes

946
00:37:19,290 --> 00:37:24,060
so what this<font color="#E5E5E5"> does is</font><font color="#CCCCCC"> it dumps</font><font color="#E5E5E5"> the Sam</font>

947
00:37:21,360 --> 00:37:27,150
<font color="#CCCCCC">database</font><font color="#E5E5E5"> and I can see in here I go to</font>

948
00:37:24,060 --> 00:37:29,670
edit<font color="#E5E5E5"> and I</font><font color="#CCCCCC"> can mark I can copy</font><font color="#E5E5E5"> this</font>

949
00:37:27,150 --> 00:37:31,650
right here which is<font color="#CCCCCC"> the ntlm hash of the</font>

950
00:37:29,670 --> 00:37:33,330
password of the local admin account<font color="#E5E5E5"> now</font>

951
00:37:31,650 --> 00:37:35,010
I can take this hash and<font color="#CCCCCC"> I can try</font><font color="#E5E5E5"> and</font>

952
00:37:33,330 --> 00:37:37,799
crack it<font color="#CCCCCC"> right</font><font color="#E5E5E5"> like I run it</font><font color="#CCCCCC"> through a</font>

953
00:37:35,010 --> 00:37:39,750
hash<font color="#E5E5E5"> cat or John the Ripper</font><font color="#CCCCCC"> or something</font>

954
00:37:37,800 --> 00:37:41,760
like<font color="#CCCCCC"> that</font><font color="#E5E5E5"> and I can try</font><font color="#CCCCCC"> and reverse this</font>

955
00:37:39,750 --> 00:37:43,530
but I'm<font color="#E5E5E5"> trying to do really super lazy</font>

956
00:37:41,760 --> 00:37:48,180
things so let's just use our hacking

957
00:37:43,530 --> 00:37:53,040
tool the<font color="#CCCCCC"> internet</font><font color="#E5E5E5"> and go over to crack</font>

958
00:37:48,180 --> 00:37:54,210
station net<font color="#E5E5E5"> and on this website I have</font>

959
00:37:53,040 --> 00:37:59,930
this<font color="#E5E5E5"> handy little box</font>

960
00:37:54,210 --> 00:37:59,930
that<font color="#CCCCCC"> allows me to</font><font color="#E5E5E5"> type in a park</font><font color="#CCCCCC"> app but</font>

961
00:38:00,200 --> 00:38:06,810
and then<font color="#CCCCCC"> it will search their database</font>

962
00:38:04,140 --> 00:38:10,020
for this<font color="#E5E5E5"> hash that</font><font color="#CCCCCC"> ID that I'd copied</font>

963
00:38:06,810 --> 00:38:13,170
off the<font color="#E5E5E5"> machine and if I typed Park Ave</font>

964
00:38:10,020 --> 00:38:14,940
<font color="#CCCCCC">Blood correctly we should</font><font color="#E5E5E5"> see that in</font>

965
00:38:13,170 --> 00:38:18,630
<font color="#E5E5E5">fact might the password for this account</font>

966
00:38:14,940 --> 00:38:20,970
is in their database<font color="#E5E5E5"> so not</font><font color="#CCCCCC"> only do I</font>

967
00:38:18,630 --> 00:38:22,620
not<font color="#CCCCCC"> have</font><font color="#E5E5E5"> to worry about trying to crack</font>

968
00:38:20,970 --> 00:38:25,410
it<font color="#CCCCCC"> I can</font><font color="#E5E5E5"> just ask the internet for the</font>

969
00:38:22,620 --> 00:38:26,819
answer<font color="#CCCCCC"> and</font><font color="#E5E5E5"> basically the</font><font color="#CCCCCC"> point of this</font>

970
00:38:25,410 --> 00:38:28,890
is don't use passwords that<font color="#E5E5E5"> are 8</font>

971
00:38:26,820 --> 00:38:30,750
characters long<font color="#E5E5E5"> because they're</font><font color="#CCCCCC"> really</font>

972
00:38:28,890 --> 00:38:34,080
super<font color="#CCCCCC"> easy to undo and they're also</font>

973
00:38:30,750 --> 00:38:36,360
pretty<font color="#CCCCCC"> much searchable so don't don't</font>

974
00:38:34,080 --> 00:38:38,250
use a short passwords<font color="#CCCCCC"> used longer</font>

975
00:38:36,360 --> 00:38:41,160
<font color="#CCCCCC">machine-generated passwords and all that</font>

976
00:38:38,250 --> 00:38:43,050
<font color="#E5E5E5">but the other point</font><font color="#CCCCCC"> is this machine has</font>

977
00:38:41,160 --> 00:38:44,790
an account on it that I can get the hash

978
00:38:43,050 --> 00:38:48,000
<font color="#CCCCCC">and</font><font color="#E5E5E5"> I can do other</font><font color="#CCCCCC"> things</font><font color="#E5E5E5"> with</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> like I</font>

979
00:38:44,790 --> 00:38:49,470
know some<font color="#E5E5E5"> people who have like a 25 GPU</font>

980
00:38:48,000 --> 00:38:51,270
password cracking farm in<font color="#CCCCCC"> their basement</font>

981
00:38:49,470 --> 00:38:52,799
<font color="#E5E5E5">right this is not sunny you need to be</font>

982
00:38:51,270 --> 00:38:54,660
<font color="#CCCCCC">state-sponsored</font><font color="#E5E5E5"> person to be able to</font>

983
00:38:52,800 --> 00:38:56,490
reverse crack passwords right there's

984
00:38:54,660 --> 00:39:01,740
people local that do<font color="#E5E5E5"> this kind of stuff</font>

985
00:38:56,490 --> 00:39:05,160
but what<font color="#E5E5E5"> we want to do then</font><font color="#CCCCCC"> is ask how</font>

986
00:39:01,740 --> 00:39:09,060
do we stop all of<font color="#E5E5E5"> this so we'll come</font>

987
00:39:05,160 --> 00:39:11,700
<font color="#CCCCCC">back over here</font><font color="#E5E5E5"> go back to this and ways</font>

988
00:39:09,060 --> 00:39:13,650
<font color="#CCCCCC">to stop it well for one don't have a</font>

989
00:39:11,700 --> 00:39:15,089
count<font color="#CCCCCC"> that you</font><font color="#E5E5E5"> create on your own that's</font>

990
00:39:13,650 --> 00:39:17,490
a local admin<font color="#E5E5E5"> on the machine right</font>

991
00:39:15,090 --> 00:39:19,290
that's a bad practice and it usually

992
00:39:17,490 --> 00:39:21,870
<font color="#CCCCCC">means that</font><font color="#E5E5E5"> you're using that account</font>

993
00:39:19,290 --> 00:39:23,340
<font color="#E5E5E5">across multiple assistants right imaging</font>

994
00:39:21,870 --> 00:39:25,020
systems tend<font color="#E5E5E5"> to do that right you'll</font>

995
00:39:23,340 --> 00:39:26,700
build a machine<font color="#E5E5E5"> using configuration</font>

996
00:39:25,020 --> 00:39:28,170
manager or something<font color="#CCCCCC"> and part</font><font color="#E5E5E5"> of the</font>

997
00:39:26,700 --> 00:39:29,609
<font color="#CCCCCC">test</font><font color="#E5E5E5"> sequence is to create</font><font color="#CCCCCC"> yourself this</font>

998
00:39:28,170 --> 00:39:31,620
backdoor in case something<font color="#CCCCCC"> goes wrong</font>

999
00:39:29,610 --> 00:39:33,090
well we're going<font color="#E5E5E5"> to use it</font><font color="#CCCCCC"> so that</font>

1000
00:39:31,620 --> 00:39:34,980
<font color="#E5E5E5">something goes wrong</font>

1001
00:39:33,090 --> 00:39:36,960
and not<font color="#E5E5E5"> putting it in there in the</font><font color="#CCCCCC"> first</font>

1002
00:39:34,980 --> 00:39:38,520
<font color="#CCCCCC">place is a good</font><font color="#E5E5E5"> idea there's also</font><font color="#CCCCCC"> laughs</font>

1003
00:39:36,960 --> 00:39:40,350
which is<font color="#CCCCCC"> the local administrator</font>

1004
00:39:38,520 --> 00:39:43,440
password<font color="#CCCCCC"> solutions so the named local</font>

1005
00:39:40,350 --> 00:39:44,940
administrator account<font color="#CCCCCC"> we can</font><font color="#E5E5E5"> use group</font>

1006
00:39:43,440 --> 00:39:47,040
policy<font color="#CCCCCC"> to</font><font color="#E5E5E5"> roll and set</font><font color="#CCCCCC"> that password</font>

1007
00:39:44,940 --> 00:39:48,810
automatically so group policy runs a

1008
00:39:47,040 --> 00:39:50,550
little extension<font color="#E5E5E5"> that looks up its</font>

1009
00:39:48,810 --> 00:39:52,710
property<font color="#CCCCCC"> nad and says hey is this</font>

1010
00:39:50,550 --> 00:39:55,230
password<font color="#E5E5E5"> expired</font><font color="#CCCCCC"> and it</font><font color="#E5E5E5"> will regenerate</font>

1011
00:39:52,710 --> 00:39:56,580
a new<font color="#CCCCCC"> one</font><font color="#E5E5E5"> for you automatically so some</font>

1012
00:39:55,230 --> 00:39:58,950
of you download<font color="#E5E5E5"> from the technicality</font>

1013
00:39:56,580 --> 00:40:00,630
<font color="#E5E5E5">it's free and easy to</font><font color="#CCCCCC"> use</font><font color="#E5E5E5"> we can also</font>

1014
00:39:58,950 --> 00:40:02,160
use things<font color="#E5E5E5"> like device guard to prevent</font>

1015
00:40:00,630 --> 00:40:04,230
us from running<font color="#E5E5E5"> applications that aren't</font>

1016
00:40:02,160 --> 00:40:07,710
<font color="#E5E5E5">on a whitelist so tools like</font><font color="#CCCCCC"> movie cats</font>

1017
00:40:04,230 --> 00:40:09,450
are harder to<font color="#E5E5E5"> invoke and then we can use</font>

1018
00:40:07,710 --> 00:40:10,950
tools<font color="#E5E5E5"> like advanced threat analytics so</font>

1019
00:40:09,450 --> 00:40:14,160
<font color="#CCCCCC">that we can do some</font><font color="#E5E5E5"> monitoring and</font>

1020
00:40:10,950 --> 00:40:16,560
activities of what's<font color="#E5E5E5"> going on on</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> on</font>

1021
00:40:14,160 --> 00:40:21,359
the<font color="#E5E5E5"> network so if we jump real quick</font>

1022
00:40:16,560 --> 00:40:25,440
over here<font color="#E5E5E5"> to this web portal I also have</font>

1023
00:40:21,360 --> 00:40:27,330
a TA<font color="#CCCCCC"> advanced</font><font color="#E5E5E5"> threat analytics is</font>

1024
00:40:25,440 --> 00:40:29,160
actually<font color="#E5E5E5"> something</font><font color="#CCCCCC"> that you deploy on</font>

1025
00:40:27,330 --> 00:40:30,720
premise of directory that<font color="#E5E5E5"> allows you</font><font color="#CCCCCC"> to</font>

1026
00:40:29,160 --> 00:40:32,399
see activities going<font color="#E5E5E5"> against your domain</font>

1027
00:40:30,720 --> 00:40:34,109
<font color="#CCCCCC">controllers</font><font color="#E5E5E5"> so when I was</font><font color="#CCCCCC"> doing those</font>

1028
00:40:32,400 --> 00:40:35,610
<font color="#E5E5E5">queries to say give</font><font color="#CCCCCC"> me a list of</font><font color="#E5E5E5"> all the</font>

1029
00:40:34,110 --> 00:40:38,340
<font color="#E5E5E5">users and</font><font color="#CCCCCC"> all of the groups in Active</font>

1030
00:40:35,610 --> 00:40:39,930
Directory<font color="#CCCCCC"> a ta can see that</font><font color="#E5E5E5"> so right</font>

1031
00:40:38,340 --> 00:40:41,400
here I can say hey someone's doing some

1032
00:40:39,930 --> 00:40:42,660
<font color="#E5E5E5">recon they're trying to dump all the</font>

1033
00:40:41,400 --> 00:40:43,980
users in<font color="#E5E5E5"> all of the groups that's</font>

1034
00:40:42,660 --> 00:40:45,480
probably<font color="#CCCCCC"> not a</font><font color="#E5E5E5"> good thing</font><font color="#CCCCCC"> this user</font>

1035
00:40:43,980 --> 00:40:47,580
generally doesn't<font color="#E5E5E5"> do that sort of thing</font>

1036
00:40:45,480 --> 00:40:49,410
and<font color="#CCCCCC"> you get an alert about</font><font color="#E5E5E5"> it it can</font>

1037
00:40:47,580 --> 00:40:51,210
also see<font color="#E5E5E5"> other things like pass a hash</font>

1038
00:40:49,410 --> 00:40:52,710
<font color="#CCCCCC">and credential replays and</font><font color="#E5E5E5"> golden</font>

1039
00:40:51,210 --> 00:40:54,390
tickets and all kinds of other stuff

1040
00:40:52,710 --> 00:40:56,100
<font color="#E5E5E5">happening against Active Directory and</font>

1041
00:40:54,390 --> 00:40:57,870
with<font color="#E5E5E5"> these alerts getting</font><font color="#CCCCCC"> generated you</font>

1042
00:40:56,100 --> 00:41:01,020
<font color="#E5E5E5">can start taking actions on what's</font>

1043
00:40:57,870 --> 00:41:04,650
happening<font color="#E5E5E5"> so that that's a TA in</font><font color="#CCCCCC"> a super</font>

1044
00:41:01,020 --> 00:41:08,070
brief nutshell but if we go from here

1045
00:41:04,650 --> 00:41:09,330
then we're ready to move right we're

1046
00:41:08,070 --> 00:41:14,880
going<font color="#E5E5E5"> to do some lateral movement like</font>

1047
00:41:09,330 --> 00:41:19,130
an IT<font color="#CCCCCC"> pro so now that we're we've got</font>

1048
00:41:14,880 --> 00:41:22,980
this this<font color="#CCCCCC"> plain</font><font color="#E5E5E5"> text password for the</font>

1049
00:41:19,130 --> 00:41:25,200
local admin account let's go back over

1050
00:41:22,980 --> 00:41:26,550
<font color="#CCCCCC">here</font><font color="#E5E5E5"> let's copy this password because</font>

1051
00:41:25,200 --> 00:41:28,589
you know<font color="#E5E5E5"> it's complex I don't want to</font>

1052
00:41:26,550 --> 00:41:31,140
type it so we'll copy that<font color="#E5E5E5"> we're going</font>

1053
00:41:28,590 --> 00:41:34,170
<font color="#CCCCCC">to</font><font color="#E5E5E5"> use our hacking tool called remote</font>

1054
00:41:31,140 --> 00:41:39,299
<font color="#E5E5E5">desktop</font><font color="#CCCCCC"> and we're going to</font><font color="#E5E5E5"> connect</font><font color="#CCCCCC"> to</font>

1055
00:41:34,170 --> 00:41:42,150
app server<font color="#CCCCCC"> all right and on app server</font>

1056
00:41:39,300 --> 00:41:45,570
we want<font color="#E5E5E5"> to</font><font color="#CCCCCC"> login to app server</font><font color="#E5E5E5"> with the</font>

1057
00:41:42,150 --> 00:41:46,920
<font color="#E5E5E5">local admin account using</font><font color="#CCCCCC"> the password</font>

1058
00:41:45,570 --> 00:41:50,940
<font color="#CCCCCC">we just</font><font color="#E5E5E5"> stole</font>

1059
00:41:46,920 --> 00:41:51,960
and see if we<font color="#CCCCCC"> can get</font><font color="#E5E5E5"> into it and then</font>

1060
00:41:50,940 --> 00:41:54,839
<font color="#E5E5E5">it tells me hey</font><font color="#CCCCCC"> this certain on that</font>

1061
00:41:51,960 --> 00:41:57,720
<font color="#CCCCCC">machine is unknown</font><font color="#E5E5E5"> but</font><font color="#CCCCCC"> I am able to</font>

1062
00:41:54,839 --> 00:41:59,819
<font color="#CCCCCC">login so this</font><font color="#E5E5E5"> this</font><font color="#CCCCCC"> is the result of bad</font>

1063
00:41:57,720 --> 00:42:01,140
practice right creating the local

1064
00:41:59,819 --> 00:42:03,210
administrator account on all the

1065
00:42:01,140 --> 00:42:04,859
<font color="#E5E5E5">machines in the domain effectively gives</font>

1066
00:42:03,210 --> 00:42:08,000
you this<font color="#E5E5E5"> backdoor into everything in the</font>

1067
00:42:04,859 --> 00:42:12,750
domain<font color="#CCCCCC"> so don't</font><font color="#E5E5E5"> know don't don't do</font><font color="#CCCCCC"> that</font>

1068
00:42:08,000 --> 00:42:14,849
but<font color="#E5E5E5"> we'll jump real quick back and say</font>

1069
00:42:12,750 --> 00:42:16,619
what would have stopped that how do we

1070
00:42:14,849 --> 00:42:17,099
<font color="#E5E5E5">stop using these accounts on these</font>

1071
00:42:16,619 --> 00:42:19,559
machines

1072
00:42:17,099 --> 00:42:21,329
well again<font color="#CCCCCC"> laughs if we actually have</font>

1073
00:42:19,559 --> 00:42:22,950
accounts with<font color="#E5E5E5"> different passwords on the</font>

1074
00:42:21,329 --> 00:42:25,650
machines<font color="#E5E5E5"> this particular tactic doesn't</font>

1075
00:42:22,950 --> 00:42:27,180
work I can't log into<font color="#E5E5E5"> that box</font><font color="#CCCCCC"> but some</font>

1076
00:42:25,650 --> 00:42:29,670
simple stuff<font color="#E5E5E5"> like leave the firewall</font>

1077
00:42:27,180 --> 00:42:31,200
alone right if you<font color="#E5E5E5"> don't allow RDP then</font>

1078
00:42:29,670 --> 00:42:34,559
you can't use<font color="#CCCCCC"> that</font><font color="#E5E5E5"> method of getting</font>

1079
00:42:31,200 --> 00:42:37,069
<font color="#E5E5E5">into the</font><font color="#CCCCCC"> machine and further we can use</font>

1080
00:42:34,559 --> 00:42:40,109
group policies if you do want to have

1081
00:42:37,069 --> 00:42:41,430
<font color="#E5E5E5">RDP enabled do it by group policy so</font>

1082
00:42:40,109 --> 00:42:43,288
many times I go<font color="#E5E5E5"> into places</font><font color="#CCCCCC"> where they</font>

1083
00:42:41,430 --> 00:42:45,450
are<font color="#E5E5E5"> still disabling the Windows Firewall</font>

1084
00:42:43,289 --> 00:42:47,339
because they want to RDP<font color="#E5E5E5"> to or paying a</font>

1085
00:42:45,450 --> 00:42:50,160
machine<font color="#E5E5E5"> like that</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> the worst laziest</font>

1086
00:42:47,339 --> 00:42:52,308
<font color="#CCCCCC">thing ever use a</font><font color="#E5E5E5"> group policy</font><font color="#CCCCCC"> to turn</font>

1087
00:42:50,160 --> 00:42:57,269
them on<font color="#E5E5E5"> furthermore you can lock down</font>

1088
00:42:52,309 --> 00:42:58,740
<font color="#E5E5E5">the allowable source IPS to do RDP so</font>

1089
00:42:57,269 --> 00:43:01,078
you could use<font color="#E5E5E5"> things like jump boxes</font>

1090
00:42:58,740 --> 00:43:02,700
right you can go to a jump<font color="#CCCCCC"> box</font><font color="#E5E5E5"> and from</font>

1091
00:43:01,079 --> 00:43:03,900
<font color="#E5E5E5">there you can get</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> other things but</font>

1092
00:43:02,700 --> 00:43:05,549
<font color="#E5E5E5">you can't just go from</font><font color="#CCCCCC"> your workstation</font>

1093
00:43:03,900 --> 00:43:08,220
because<font color="#E5E5E5"> remember in this scenario I'm</font>

1094
00:43:05,549 --> 00:43:10,440
sitting in the parking lot with a stolen

1095
00:43:08,220 --> 00:43:12,509
<font color="#CCCCCC">laptop and I just connected to a member</font>

1096
00:43:10,440 --> 00:43:15,089
server through RDP right so flat

1097
00:43:12,509 --> 00:43:16,980
networks are a bad<font color="#E5E5E5"> idea</font><font color="#CCCCCC"> but you can</font>

1098
00:43:15,089 --> 00:43:19,019
mitigate some of<font color="#E5E5E5"> these with things like</font>

1099
00:43:16,980 --> 00:43:21,480
policies and then<font color="#E5E5E5"> network segmentation</font>

1100
00:43:19,019 --> 00:43:23,640
is a much better solution<font color="#CCCCCC"> it does</font>

1101
00:43:21,480 --> 00:43:25,319
require<font color="#CCCCCC"> more work but</font><font color="#E5E5E5"> it means</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> you</font>

1102
00:43:23,640 --> 00:43:26,970
can control<font color="#CCCCCC"> this at the network level so</font>

1103
00:43:25,319 --> 00:43:31,170
if I do have access<font color="#CCCCCC"> to a server</font><font color="#E5E5E5"> I can't</font>

1104
00:43:26,970 --> 00:43:35,160
just undo<font color="#CCCCCC"> it</font><font color="#E5E5E5"> okay</font><font color="#CCCCCC"> so back again here</font><font color="#E5E5E5"> to</font>

1105
00:43:31,170 --> 00:43:37,349
our machine<font color="#E5E5E5"> oh yeah the other part is</font>

1106
00:43:35,160 --> 00:43:39,960
time to level<font color="#E5E5E5"> up so we're on this this</font>

1107
00:43:37,349 --> 00:43:42,569
computer and I want<font color="#E5E5E5"> to know more about</font>

1108
00:43:39,960 --> 00:43:43,950
what's on this machine<font color="#CCCCCC"> so</font><font color="#E5E5E5"> other recon</font>

1109
00:43:42,569 --> 00:43:45,329
things I do on<font color="#E5E5E5"> here right you can look</font>

1110
00:43:43,950 --> 00:43:46,799
at the roles that<font color="#CCCCCC"> are installed</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> can</font>

1111
00:43:45,329 --> 00:43:50,369
<font color="#E5E5E5">look at software installed and attribute</font>

1112
00:43:46,799 --> 00:43:55,910
programs<font color="#CCCCCC"> but one of the easy ones</font><font color="#E5E5E5"> is if</font>

1113
00:43:50,369 --> 00:43:59,430
we go to services that's<font color="#CCCCCC"> pellit right</font>

1114
00:43:55,910 --> 00:44:02,368
<font color="#CCCCCC">yes</font><font color="#E5E5E5"> sir this is</font>

1115
00:43:59,430 --> 00:44:04,140
in the services<font color="#E5E5E5"> and</font><font color="#CCCCCC"> then</font><font color="#E5E5E5"> see we can see</font>

1116
00:44:02,369 --> 00:44:06,030
a list<font color="#E5E5E5"> of services that are</font><font color="#CCCCCC"> running</font><font color="#E5E5E5"> and</font>

1117
00:44:04,140 --> 00:44:08,879
in this case we actually<font color="#E5E5E5"> happen to be</font>

1118
00:44:06,030 --> 00:44:11,460
running a service<font color="#CCCCCC"> under our golden</font>

1119
00:44:08,880 --> 00:44:13,619
needle in the haystack<font color="#CCCCCC"> right</font><font color="#E5E5E5"> this is</font>

1120
00:44:11,460 --> 00:44:15,750
what we're<font color="#E5E5E5"> really looking for right this</font>

1121
00:44:13,619 --> 00:44:17,550
<font color="#CCCCCC">app's service account is</font><font color="#E5E5E5"> that we know</font>

1122
00:44:15,750 --> 00:44:18,960
it's a domain administrator<font color="#CCCCCC"> and it's</font>

1123
00:44:17,550 --> 00:44:21,780
being used<font color="#CCCCCC"> to</font><font color="#E5E5E5"> run</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> service on this</font>

1124
00:44:18,960 --> 00:44:23,940
machine<font color="#CCCCCC"> now</font><font color="#E5E5E5"> think about</font><font color="#CCCCCC"> how</font><font color="#E5E5E5"> this works</font>

1125
00:44:21,780 --> 00:44:25,470
<font color="#E5E5E5">when this computer reboots it has to</font>

1126
00:44:23,940 --> 00:44:26,700
start the service<font color="#E5E5E5"> up again using</font><font color="#CCCCCC"> that</font>

1127
00:44:25,470 --> 00:44:28,049
service<font color="#CCCCCC"> account which means that this</font>

1128
00:44:26,700 --> 00:44:30,210
<font color="#E5E5E5">computer needs to know the password</font><font color="#CCCCCC"> for</font>

1129
00:44:28,050 --> 00:44:32,040
the account<font color="#CCCCCC"> turns</font><font color="#E5E5E5"> out I'm a local admin</font>

1130
00:44:30,210 --> 00:44:33,390
on the machine<font color="#E5E5E5"> so I can do things as the</font>

1131
00:44:32,040 --> 00:44:35,130
system including getting<font color="#E5E5E5"> this password</font>

1132
00:44:33,390 --> 00:44:39,750
<font color="#E5E5E5">and to do that we're going to use</font>

1133
00:44:35,130 --> 00:44:45,360
another<font color="#CCCCCC"> tool so what we have over here</font>

1134
00:44:39,750 --> 00:44:48,360
<font color="#E5E5E5">under my tools directory is you can</font>

1135
00:44:45,360 --> 00:44:50,369
actually<font color="#E5E5E5"> download this tool from secure</font>

1136
00:44:48,360 --> 00:44:52,860
<font color="#CCCCCC">Academy if you've heard apology she's</font>

1137
00:44:50,369 --> 00:44:56,820
<font color="#CCCCCC">part of this</font><font color="#E5E5E5"> she has</font><font color="#CCCCCC"> this blog post</font>

1138
00:44:52,860 --> 00:45:00,240
<font color="#CCCCCC">about using service accounts and there's</font>

1139
00:44:56,820 --> 00:45:01,619
a tool<font color="#CCCCCC"> on here for getting the secrets</font>

1140
00:45:00,240 --> 00:45:03,240
dumper and there's a it's

1141
00:45:01,619 --> 00:45:04,650
<font color="#CCCCCC">password-protected so</font><font color="#E5E5E5"> you know don't</font>

1142
00:45:03,240 --> 00:45:06,089
worry<font color="#CCCCCC"> about</font><font color="#E5E5E5"> it it's so safe out</font><font color="#CCCCCC"> there</font>

1143
00:45:04,650 --> 00:45:08,070
but you can download the tool<font color="#E5E5E5"> and</font>

1144
00:45:06,090 --> 00:45:09,390
extract it I already<font color="#E5E5E5"> did that</font><font color="#CCCCCC"> so we're</font>

1145
00:45:08,070 --> 00:45:11,010
just going<font color="#E5E5E5"> to take the secrets dump</font>

1146
00:45:09,390 --> 00:45:13,410
order and we're going to<font color="#E5E5E5"> take PS exec</font>

1147
00:45:11,010 --> 00:45:17,130
<font color="#E5E5E5">and we're going to jump over</font><font color="#CCCCCC"> here to our</font>

1148
00:45:13,410 --> 00:45:18,960
<font color="#E5E5E5">server</font><font color="#CCCCCC"> we'll go to the C Drive we'll</font>

1149
00:45:17,130 --> 00:45:21,359
make ourselves a new folder called tools

1150
00:45:18,960 --> 00:45:24,960
<font color="#E5E5E5">and then we'll paste our files there</font>

1151
00:45:21,359 --> 00:45:30,450
open<font color="#E5E5E5"> up command prompt and then we're</font>

1152
00:45:24,960 --> 00:45:35,550
going<font color="#CCCCCC"> to go to our tools directory all</font>

1153
00:45:30,450 --> 00:45:37,560
<font color="#CCCCCC">right so if we</font><font color="#E5E5E5"> run because</font><font color="#CCCCCC"> I need</font><font color="#E5E5E5"> to get</font>

1154
00:45:35,550 --> 00:45:39,930
this as a system<font color="#E5E5E5"> again I need</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> run a</font>

1155
00:45:37,560 --> 00:45:51,200
<font color="#E5E5E5">system which we did with PS exec right</font>

1156
00:45:39,930 --> 00:45:55,618
<font color="#E5E5E5">PS exec</font><font color="#CCCCCC"> si D cmd.exe</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> say Who am I</font>

1157
00:45:51,200 --> 00:45:57,180
there we go a<font color="#E5E5E5"> little bit delayed and I'm</font>

1158
00:45:55,619 --> 00:45:59,430
system again right<font color="#CCCCCC"> so I go back</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> my</font>

1159
00:45:57,180 --> 00:46:01,500
<font color="#E5E5E5">tools directory and I can run the</font><font color="#CCCCCC"> CQ</font>

1160
00:45:59,430 --> 00:46:04,618
<font color="#CCCCCC">secret stumper and it tells you how to</font>

1161
00:46:01,500 --> 00:46:08,880
use<font color="#CCCCCC"> it it basically says if you know the</font>

1162
00:46:04,619 --> 00:46:10,980
service<font color="#E5E5E5"> name we can get the value out</font><font color="#CCCCCC"> of</font>

1163
00:46:08,880 --> 00:46:11,810
the registry<font color="#E5E5E5"> so what we need is</font><font color="#CCCCCC"> the</font>

1164
00:46:10,980 --> 00:46:13,580
service<font color="#E5E5E5"> name right</font>

1165
00:46:11,810 --> 00:46:15,259
well that's not<font color="#E5E5E5"> difficult</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> get we just</font>

1166
00:46:13,580 --> 00:46:17,779
<font color="#CCCCCC">double-click</font><font color="#E5E5E5"> here here's our service</font>

1167
00:46:15,260 --> 00:46:20,900
name<font color="#CCCCCC"> we'll go ahead</font><font color="#E5E5E5"> and copy that go to</font>

1168
00:46:17,780 --> 00:46:26,540
our<font color="#E5E5E5"> tools will run the CQ</font><font color="#CCCCCC"> secret stumper</font>

1169
00:46:20,900 --> 00:46:29,030
<font color="#E5E5E5">say the service equals the name and then</font>

1170
00:46:26,540 --> 00:46:31,820
<font color="#E5E5E5">it dumps out this blob of text</font><font color="#CCCCCC"> so if we</font>

1171
00:46:29,030 --> 00:46:33,920
go<font color="#E5E5E5"> ahead and click on edit work we'll</font>

1172
00:46:31,820 --> 00:46:38,360
copy this blob of text<font color="#E5E5E5"> right</font><font color="#CCCCCC"> here and</font>

1173
00:46:33,920 --> 00:46:40,790
then we will go<font color="#CCCCCC"> up sendest right</font><font color="#E5E5E5"> click</font>

1174
00:46:38,360 --> 00:46:43,850
and copy<font color="#E5E5E5"> that we'll go to our other</font>

1175
00:46:40,790 --> 00:46:47,990
hacker tool called notepad<font color="#E5E5E5"> I'll paste</font>

1176
00:46:43,850 --> 00:46:51,259
that I'll<font color="#E5E5E5"> go to file edit</font><font color="#CCCCCC"> where's</font><font color="#E5E5E5"> edit</font>

1177
00:46:47,990 --> 00:46:51,979
and we'll replace all of our dots with

1178
00:46:51,260 --> 00:46:56,600
nothing

1179
00:46:51,980 --> 00:46:59,120
<font color="#CCCCCC">I</font><font color="#E5E5E5"> want to replace dot replace all there</font>

1180
00:46:56,600 --> 00:47:01,700
and then we'll remove<font color="#E5E5E5"> our carriage</font>

1181
00:46:59,120 --> 00:47:07,670
returns<font color="#E5E5E5"> and then this is actually our</font>

1182
00:47:01,700 --> 00:47:10,009
<font color="#E5E5E5">plain text password right</font><font color="#CCCCCC"> here right so</font>

1183
00:47:07,670 --> 00:47:11,690
<font color="#CCCCCC">this is</font><font color="#E5E5E5"> actually a pretty good password</font>

1184
00:47:10,010 --> 00:47:14,090
right it's<font color="#E5E5E5"> machine-generated it's pretty</font>

1185
00:47:11,690 --> 00:47:15,650
long this<font color="#E5E5E5"> one would take a while to undo</font>

1186
00:47:14,090 --> 00:47:17,480
with a cracker but because it's stored

1187
00:47:15,650 --> 00:47:20,780
<font color="#E5E5E5">in the registry I can just copy it right</font>

1188
00:47:17,480 --> 00:47:22,970
<font color="#CCCCCC">so</font><font color="#E5E5E5"> that's one</font><font color="#CCCCCC"> of the one of the</font><font color="#E5E5E5"> bigger</font>

1189
00:47:20,780 --> 00:47:25,130
<font color="#E5E5E5">problems here is that</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> can</font><font color="#CCCCCC"> just get</font>

1190
00:47:22,970 --> 00:47:28,100
this password<font color="#E5E5E5"> out of here so the</font>

1191
00:47:25,130 --> 00:47:31,490
<font color="#E5E5E5">question</font><font color="#CCCCCC"> then is what what do we do to</font>

1192
00:47:28,100 --> 00:47:32,150
stop<font color="#CCCCCC"> that</font><font color="#E5E5E5"> okay well let's take a look</font>

1193
00:47:31,490 --> 00:47:40,759
real<font color="#E5E5E5"> quick</font>

1194
00:47:32,150 --> 00:47:43,640
<font color="#CCCCCC">I got another minute or</font><font color="#E5E5E5"> so</font><font color="#CCCCCC"> so main thing</font>

1195
00:47:40,760 --> 00:47:45,650
here is the service account<font color="#E5E5E5"> itself if</font>

1196
00:47:43,640 --> 00:47:47,000
you<font color="#E5E5E5"> can stop using what it's ultimately</font>

1197
00:47:45,650 --> 00:47:49,460
really just a regular<font color="#CCCCCC"> account that we</font>

1198
00:47:47,000 --> 00:47:51,050
happen to be<font color="#CCCCCC"> using for</font><font color="#E5E5E5"> services we would</font>

1199
00:47:49,460 --> 00:47:53,630
we would<font color="#E5E5E5"> not run into this problem</font>

1200
00:47:51,050 --> 00:47:55,010
<font color="#CCCCCC">you've seen Server 2012 in 2012 r2</font>

1201
00:47:53,630 --> 00:47:56,690
there's something called<font color="#E5E5E5"> group managed</font>

1202
00:47:55,010 --> 00:47:58,550
<font color="#E5E5E5">service accounts it's an account and</font>

1203
00:47:56,690 --> 00:48:01,880
<font color="#E5E5E5">active directory</font><font color="#CCCCCC"> that the password is a</font>

1204
00:47:58,550 --> 00:48:04,370
is not stored on these<font color="#E5E5E5"> systems instead</font>

1205
00:48:01,880 --> 00:48:05,960
it will be delegated the rights to<font color="#E5E5E5"> use</font>

1206
00:48:04,370 --> 00:48:08,960
<font color="#CCCCCC">the credential</font><font color="#E5E5E5"> from the machine but it</font>

1207
00:48:05,960 --> 00:48:10,490
doesn't actually<font color="#E5E5E5"> allow you</font><font color="#CCCCCC"> to get the</font>

1208
00:48:08,960 --> 00:48:11,630
password for the account<font color="#E5E5E5"> so group</font>

1209
00:48:10,490 --> 00:48:13,040
managed service accounts are a much

1210
00:48:11,630 --> 00:48:14,900
better<font color="#CCCCCC"> solution than using service</font>

1211
00:48:13,040 --> 00:48:16,750
accounts<font color="#E5E5E5"> and again things like device</font>

1212
00:48:14,900 --> 00:48:19,820
guard to stop us<font color="#CCCCCC"> from using</font><font color="#E5E5E5"> tools that</font>

1213
00:48:16,750 --> 00:48:21,530
<font color="#CCCCCC">were not supposed to</font><font color="#E5E5E5"> be running on</font>

1214
00:48:19,820 --> 00:48:22,820
machines for monitoring<font color="#E5E5E5"> we can use</font>

1215
00:48:21,530 --> 00:48:25,670
things like a little<font color="#CCCCCC"> mess and if you</font>

1216
00:48:22,820 --> 00:48:27,049
<font color="#E5E5E5">haven't seen</font><font color="#CCCCCC"> sis Mon this month actually</font>

1217
00:48:25,670 --> 00:48:28,099
allows you to create<font color="#E5E5E5"> a whole new event</font>

1218
00:48:27,049 --> 00:48:29,809
log that<font color="#E5E5E5"> will show you things like</font>

1219
00:48:28,099 --> 00:48:32,030
<font color="#E5E5E5">process</font><font color="#CCCCCC"> forking and logging</font><font color="#E5E5E5"> and</font>

1220
00:48:29,809 --> 00:48:34,760
ultrasonic<font color="#CCCCCC"> network activity mark</font>

1221
00:48:32,030 --> 00:48:36,410
russinovich also mentioned about<font color="#CCCCCC"> swift</font>

1222
00:48:34,760 --> 00:48:39,710
on security is that<font color="#CCCCCC"> twitter account that</font>

1223
00:48:36,410 --> 00:48:41,509
<font color="#E5E5E5">has a configuration file for for system</font>

1224
00:48:39,710 --> 00:48:44,210
<font color="#CCCCCC">um that's actually</font><font color="#E5E5E5"> really</font><font color="#CCCCCC"> useful</font><font color="#E5E5E5"> so you</font>

1225
00:48:41,510 --> 00:48:46,520
can check<font color="#E5E5E5"> those out as</font><font color="#CCCCCC"> well so let's go</font>

1226
00:48:44,210 --> 00:48:50,089
<font color="#E5E5E5">over to this</font><font color="#CCCCCC"> machine we're going to take</font>

1227
00:48:46,520 --> 00:48:54,530
this<font color="#E5E5E5"> password we're going to go ahead</font>

1228
00:48:50,089 --> 00:48:58,069
and open<font color="#CCCCCC"> up our</font><font color="#E5E5E5"> hacker tool and we want</font>

1229
00:48:54,530 --> 00:49:00,290
to go<font color="#E5E5E5"> to</font><font color="#CCCCCC"> dc-3</font><font color="#E5E5E5"> right and on dc-3 we are</font>

1230
00:48:58,069 --> 00:49:01,819
going to use the domain<font color="#E5E5E5"> name we're going</font>

1231
00:49:00,290 --> 00:49:04,250
<font color="#CCCCCC">to login with</font><font color="#E5E5E5"> the service account for</font>

1232
00:49:01,819 --> 00:49:07,130
app service<font color="#CCCCCC"> and we're going to</font><font color="#E5E5E5"> go</font><font color="#CCCCCC"> ahead</font>

1233
00:49:04,250 --> 00:49:09,260
and paste in that<font color="#E5E5E5"> password</font><font color="#CCCCCC"> and see if</font>

1234
00:49:07,130 --> 00:49:10,520
that lets us in and of course does

1235
00:49:09,260 --> 00:49:12,260
because now I have<font color="#E5E5E5"> a domain</font>

1236
00:49:10,520 --> 00:49:15,020
administrator<font color="#E5E5E5"> account and I was able</font><font color="#CCCCCC"> to</font>

1237
00:49:12,260 --> 00:49:18,530
RDP to the domain controller so now that

1238
00:49:15,020 --> 00:49:20,599
<font color="#E5E5E5">I'm on the domain controller another</font>

1239
00:49:18,530 --> 00:49:23,420
pause quick<font color="#E5E5E5"> how do you stop</font><font color="#CCCCCC"> it</font>

1240
00:49:20,599 --> 00:49:26,900
oh let's<font color="#E5E5E5"> see right</font><font color="#CCCCCC"> basically</font><font color="#E5E5E5"> what we</font>

1241
00:49:23,420 --> 00:49:29,240
want to<font color="#E5E5E5"> do here is use things like group</font>

1242
00:49:26,900 --> 00:49:30,559
policy to<font color="#E5E5E5"> say that if you</font><font color="#CCCCCC"> are a service</font>

1243
00:49:29,240 --> 00:49:31,729
<font color="#E5E5E5">account you</font><font color="#CCCCCC"> should be able</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> log in and</font>

1244
00:49:30,559 --> 00:49:32,900
<font color="#E5E5E5">are actively to stuff because you're</font>

1245
00:49:31,730 --> 00:49:33,859
<font color="#CCCCCC">supposed to</font><font color="#E5E5E5"> be doing services you're not</font>

1246
00:49:32,900 --> 00:49:36,730
supposed to be an account<font color="#E5E5E5"> that people</font>

1247
00:49:33,859 --> 00:49:39,348
<font color="#CCCCCC">use</font><font color="#E5E5E5"> right that's pretty good good method</font>

1248
00:49:36,730 --> 00:49:40,579
so as far<font color="#E5E5E5"> as where we're at now we did</font>

1249
00:49:39,349 --> 00:49:42,140
the<font color="#E5E5E5"> Recon we're into the environment</font>

1250
00:49:40,579 --> 00:49:45,140
<font color="#E5E5E5">it's time to start</font><font color="#CCCCCC"> taking all our stuff</font>

1251
00:49:42,140 --> 00:49:48,190
<font color="#E5E5E5">so let's go ahead and do that</font><font color="#CCCCCC"> and if we</font>

1252
00:49:45,140 --> 00:49:50,960
jump<font color="#CCCCCC"> over to our</font><font color="#E5E5E5"> domain controller I</font>

1253
00:49:48,190 --> 00:49:53,809
wrote<font color="#E5E5E5"> out a couple of scripts to make</font>

1254
00:49:50,960 --> 00:49:56,869
this a little bit quicker<font color="#CCCCCC"> so we're go</font>

1255
00:49:53,809 --> 00:50:00,890
ahead and edit this copy all<font color="#CCCCCC"> of our</font>

1256
00:49:56,869 --> 00:50:05,599
scripts<font color="#E5E5E5"> go to the domain controller open</font>

1257
00:50:00,890 --> 00:50:07,730
up notepad<font color="#E5E5E5"> paste that in</font><font color="#CCCCCC"> here and then</font>

1258
00:50:05,599 --> 00:50:11,599
we'll open up<font color="#E5E5E5"> command prompt on this box</font>

1259
00:50:07,730 --> 00:50:14,059
so again<font color="#CCCCCC"> just using</font><font color="#E5E5E5"> some lazy native</font>

1260
00:50:11,599 --> 00:50:19,690
tools on here<font color="#CCCCCC"> we're going to go ahead</font>

1261
00:50:14,059 --> 00:50:22,280
and make a directory<font color="#CCCCCC"> let's click and</font>

1262
00:50:19,690 --> 00:50:25,190
this will make a directory here<font color="#E5E5E5"> on the</font><font color="#CCCCCC"> C</font>

1263
00:50:22,280 --> 00:50:27,319
<font color="#CCCCCC">Drive</font><font color="#E5E5E5"> for me</font><font color="#CCCCCC"> I'm also going to use</font><font color="#E5E5E5"> a</font>

1264
00:50:25,190 --> 00:50:29,750
volume<font color="#E5E5E5"> Shadow Copy</font><font color="#CCCCCC"> so volume Shadow Copy</font>

1265
00:50:27,319 --> 00:50:32,869
lets you copy files that are in use on

1266
00:50:29,750 --> 00:50:34,549
this machine<font color="#E5E5E5"> I have this NTDs directory</font>

1267
00:50:32,869 --> 00:50:36,170
so this domain controller happens to be

1268
00:50:34,549 --> 00:50:37,970
storing its<font color="#E5E5E5"> Active Directory database on</font>

1269
00:50:36,170 --> 00:50:39,100
a different<font color="#CCCCCC"> drive so if we go under</font>

1270
00:50:37,970 --> 00:50:42,379
<font color="#E5E5E5">windows</font>

1271
00:50:39,100 --> 00:50:44,960
<font color="#E5E5E5">NTDs the file I really want is this</font><font color="#CCCCCC"> NTDs</font>

1272
00:50:42,380 --> 00:50:47,090
<font color="#E5E5E5">it file there's also a system file that</font>

1273
00:50:44,960 --> 00:50:49,190
basically holds the secrets to read the

1274
00:50:47,090 --> 00:50:50,810
contents of<font color="#E5E5E5"> it but I want those files</font>

1275
00:50:49,190 --> 00:50:52,370
the problem is this domain controller is

1276
00:50:50,810 --> 00:50:54,470
operational so the file is<font color="#CCCCCC"> locked and</font>

1277
00:50:52,370 --> 00:50:56,630
<font color="#E5E5E5">copying it's not really a good idea</font><font color="#CCCCCC"> so</font>

1278
00:50:54,470 --> 00:50:58,040
instead we're<font color="#CCCCCC"> going to</font><font color="#E5E5E5"> use the VSS admin</font>

1279
00:50:56,630 --> 00:51:00,590
to create a<font color="#CCCCCC"> volume shadow of the drive</font>

1280
00:50:58,040 --> 00:51:02,120
<font color="#E5E5E5">so we'll go</font><font color="#CCCCCC"> ahead</font><font color="#E5E5E5"> and that's what this</font>

1281
00:51:00,590 --> 00:51:04,670
<font color="#E5E5E5">command here does right so it creates a</font>

1282
00:51:02,120 --> 00:51:06,920
<font color="#CCCCCC">shadow</font><font color="#E5E5E5"> copy for the C Drive we paste</font>

1283
00:51:04,670 --> 00:51:09,140
<font color="#E5E5E5">this in and when you run</font><font color="#CCCCCC"> that it tells</font>

1284
00:51:06,920 --> 00:51:12,710
<font color="#E5E5E5">me hey I just created this volume Shadow</font>

1285
00:51:09,140 --> 00:51:15,049
Copy<font color="#CCCCCC"> 3 so this</font><font color="#E5E5E5"> might have</font><font color="#CCCCCC"> been done</font>

1286
00:51:12,710 --> 00:51:16,520
<font color="#E5E5E5">before but we'll hit 3 I'm going to do</font>

1287
00:51:15,050 --> 00:51:18,890
it<font color="#CCCCCC"> again and</font><font color="#E5E5E5"> I know numerically it's</font>

1288
00:51:16,520 --> 00:51:20,900
going to know being<font color="#E5E5E5"> 4 so the next one is</font>

1289
00:51:18,890 --> 00:51:23,660
literally<font color="#CCCCCC"> just a copy command</font><font color="#E5E5E5"> and I'm</font>

1290
00:51:20,900 --> 00:51:24,560
just going<font color="#CCCCCC"> to copy a file off the drive</font>

1291
00:51:23,660 --> 00:51:26,569
and<font color="#E5E5E5"> I'm going to put it in that</font>

1292
00:51:24,560 --> 00:51:28,130
<font color="#E5E5E5">directory that I created I'm going to do</font>

1293
00:51:26,570 --> 00:51:29,540
the same thing on the other<font color="#CCCCCC"> drive and</font>

1294
00:51:28,130 --> 00:51:30,920
then I'm going<font color="#CCCCCC"> to clean up my mess by</font>

1295
00:51:29,540 --> 00:51:33,860
deleting the<font color="#CCCCCC"> shadow so that they don't</font>

1296
00:51:30,920 --> 00:51:38,930
linger around afterwards so now if I go

1297
00:51:33,860 --> 00:51:43,460
<font color="#CCCCCC">to the C Drive</font><font color="#E5E5E5"> go to this home directory</font>

1298
00:51:38,930 --> 00:51:49,549
I have my<font color="#E5E5E5"> NTDs</font><font color="#CCCCCC"> dip</font><font color="#E5E5E5"> and looks like it</font>

1299
00:51:43,460 --> 00:51:56,030
didn't copy my system well let's do this

1300
00:51:49,550 --> 00:51:59,560
here<font color="#E5E5E5"> copy</font><font color="#CCCCCC"> paste and</font><font color="#E5E5E5"> I need this one here</font>

1301
00:51:56,030 --> 00:52:06,670
<font color="#E5E5E5">oh that's why so this is going to be</font>

1302
00:51:59,560 --> 00:52:13,400
stick there<font color="#CCCCCC"> I come here</font>

1303
00:52:06,670 --> 00:52:17,080
copy<font color="#E5E5E5"> that paste that and I got 6 forgot</font>

1304
00:52:13,400 --> 00:52:17,080
to delete the pound in my script<font color="#CCCCCC"> and</font>

1305
00:52:18,430 --> 00:52:28,430
<font color="#E5E5E5">here we go copy this there we go all</font>

1306
00:52:26,480 --> 00:52:30,020
<font color="#E5E5E5">right so now I have both of the files</font>

1307
00:52:28,430 --> 00:52:32,899
<font color="#CCCCCC">that I need</font><font color="#E5E5E5"> and I</font><font color="#CCCCCC"> can just highlight</font>

1308
00:52:30,020 --> 00:52:35,900
these files<font color="#CCCCCC"> send it</font><font color="#E5E5E5"> to a little zip file</font>

1309
00:52:32,900 --> 00:52:37,370
<font color="#E5E5E5">and then I've got all the stuff that I</font>

1310
00:52:35,900 --> 00:52:38,900
<font color="#E5E5E5">need so I</font><font color="#CCCCCC"> can do</font><font color="#E5E5E5"> everything with active</font>

1311
00:52:37,370 --> 00:52:41,990
<font color="#E5E5E5">directory right</font><font color="#CCCCCC"> I can go and</font><font color="#E5E5E5"> take this</font>

1312
00:52:38,900 --> 00:52:43,760
and crack<font color="#CCCCCC"> it offline</font><font color="#E5E5E5"> I can get all the</font>

1313
00:52:41,990 --> 00:52:45,290
passwords<font color="#E5E5E5"> and hashes out of people's</font>

1314
00:52:43,760 --> 00:52:47,210
accounts I can see groups and all<font color="#E5E5E5"> the</font>

1315
00:52:45,290 --> 00:52:50,940
stuff that<font color="#CCCCCC"> I want in Active Directory so</font>

1316
00:52:47,210 --> 00:52:54,990
I'm going<font color="#CCCCCC"> to take this file here copy it</font>

1317
00:52:50,940 --> 00:52:59,339
go over to<font color="#CCCCCC"> my USB Drive again and then I</font>

1318
00:52:54,990 --> 00:53:03,000
can paste it let's paste it<font color="#CCCCCC"> right over</font>

1319
00:52:59,339 --> 00:53:05,490
here<font color="#E5E5E5"> and there</font><font color="#CCCCCC"> I just</font><font color="#E5E5E5"> stole</font><font color="#CCCCCC"> all of</font>

1320
00:53:03,000 --> 00:53:07,049
<font color="#E5E5E5">Active Directory so that was that was</font>

1321
00:53:05,490 --> 00:53:09,808
<font color="#CCCCCC">the end goal right I got what I wanted</font>

1322
00:53:07,049 --> 00:53:11,400
the question is how do I stop<font color="#CCCCCC"> it again</font>

1323
00:53:09,809 --> 00:53:12,869
<font color="#CCCCCC">network segmentation keep me off the</font><font color="#E5E5E5"> d</font>

1324
00:53:11,400 --> 00:53:15,059
<font color="#E5E5E5">c-- is that's going to be the real trick</font>

1325
00:53:12,869 --> 00:53:16,380
<font color="#CCCCCC">and then using group policies we can say</font>

1326
00:53:15,059 --> 00:53:17,910
<font color="#CCCCCC">things like don't</font><font color="#E5E5E5"> allow the service</font>

1327
00:53:16,380 --> 00:53:19,769
accounts to<font color="#CCCCCC"> login if you're not a</font><font color="#E5E5E5"> domain</font>

1328
00:53:17,910 --> 00:53:21,089
admin you can't get to a DC if you are a

1329
00:53:19,769 --> 00:53:23,519
domain admin you shouldn't get to

1330
00:53:21,089 --> 00:53:25,099
anything<font color="#E5E5E5"> but</font><font color="#CCCCCC"> at DC right so do those</font>

1331
00:53:23,519 --> 00:53:27,419
kinds of permissions<font color="#E5E5E5"> and we can also</font>

1332
00:53:25,099 --> 00:53:29,190
restrict<font color="#E5E5E5"> access to the hardware so this</font>

1333
00:53:27,420 --> 00:53:31,079
was a physical DC that first thing<font color="#CCCCCC"> i did</font>

1334
00:53:29,190 --> 00:53:32,339
<font color="#CCCCCC">with the stickykeys</font><font color="#E5E5E5"> hijack</font><font color="#CCCCCC"> i could do</font>

1335
00:53:31,079 --> 00:53:34,140
that<font color="#CCCCCC"> there as well and</font><font color="#E5E5E5"> then</font><font color="#CCCCCC"> i maybe</font>

1336
00:53:32,339 --> 00:53:35,400
could use that notepad trick to copy the

1337
00:53:34,140 --> 00:53:38,098
file off of the drive because<font color="#E5E5E5"> it's not</font>

1338
00:53:35,400 --> 00:53:40,049
in use right so<font color="#CCCCCC"> we</font><font color="#E5E5E5"> gone</font><font color="#CCCCCC"> through</font><font color="#E5E5E5"> the</font>

1339
00:53:38,099 --> 00:53:41,970
<font color="#E5E5E5">whole thing we did our attack we stole</font>

1340
00:53:40,049 --> 00:53:43,380
<font color="#CCCCCC">all the things and we</font><font color="#E5E5E5"> want to look at it</font>

1341
00:53:41,970 --> 00:53:45,149
real quick on the mitigation list

1342
00:53:43,380 --> 00:53:47,369
<font color="#E5E5E5">basically the first thing that we went</font>

1343
00:53:45,150 --> 00:53:49,920
<font color="#E5E5E5">through here was you know the</font><font color="#CCCCCC"> stickykeys</font>

1344
00:53:47,369 --> 00:53:51,240
<font color="#E5E5E5">hijack and</font><font color="#CCCCCC"> i didn't show the demo of</font><font color="#E5E5E5"> the</font>

1345
00:53:49,920 --> 00:53:54,029
macro I actually have a longer version

1346
00:53:51,240 --> 00:53:55,529
<font color="#CCCCCC">of</font><font color="#E5E5E5"> this that I can get you a link</font><font color="#CCCCCC"> to if</font>

1347
00:53:54,029 --> 00:53:57,569
you want to<font color="#E5E5E5"> watch how that part works</font>

1348
00:53:55,529 --> 00:53:59,130
and then<font color="#E5E5E5"> stealing the wireless network</font>

1349
00:53:57,569 --> 00:54:00,420
so and doing encryption<font color="#CCCCCC"> on the</font><font color="#E5E5E5"> drive</font>

1350
00:53:59,130 --> 00:54:03,420
whether that's Windows Information

1351
00:54:00,420 --> 00:54:04,829
protection or RMS<font color="#E5E5E5"> or just BitLocker</font><font color="#CCCCCC"> and</font>

1352
00:54:03,420 --> 00:54:06,119
then using group policies to help

1353
00:54:04,829 --> 00:54:08,730
configure the machines to<font color="#E5E5E5"> make this</font>

1354
00:54:06,119 --> 00:54:11,730
harder<font color="#CCCCCC"> to do</font><font color="#E5E5E5"> and monitoring with</font>

1355
00:54:08,730 --> 00:54:13,259
defender<font color="#E5E5E5"> ATP the</font><font color="#CCCCCC"> Recon stage when we</font>

1356
00:54:11,730 --> 00:54:16,170
<font color="#E5E5E5">were doing that we can do things</font><font color="#CCCCCC"> like</font>

1357
00:54:13,259 --> 00:54:18,630
monitoring<font color="#CCCCCC"> with</font><font color="#E5E5E5"> ata and configurations</font>

1358
00:54:16,170 --> 00:54:20,220
with group policies<font color="#E5E5E5"> the domain</font>

1359
00:54:18,630 --> 00:54:21,839
controller exploit we just did the

1360
00:54:20,220 --> 00:54:23,279
<font color="#CCCCCC">stealing of</font><font color="#E5E5E5"> the NTDs that did there's a</font>

1361
00:54:21,839 --> 00:54:25,859
lot of other really cool<font color="#CCCCCC"> ones</font><font color="#E5E5E5"> I didn't</font>

1362
00:54:23,279 --> 00:54:28,170
show but we can also protect a lot of

1363
00:54:25,859 --> 00:54:30,960
that with again group policies and<font color="#CCCCCC"> and</font>

1364
00:54:28,170 --> 00:54:32,460
configurations on the machines<font color="#E5E5E5"> one of</font>

1365
00:54:30,960 --> 00:54:35,279
the things that we end<font color="#E5E5E5"> up</font><font color="#CCCCCC"> doing that</font>

1366
00:54:32,460 --> 00:54:38,789
concurrency is we work<font color="#E5E5E5"> with customers</font>

1367
00:54:35,279 --> 00:54:40,140
against the CSF and some of<font color="#E5E5E5"> these at the</font>

1368
00:54:38,789 --> 00:54:41,640
bottom<font color="#E5E5E5"> are really like the products that</font>

1369
00:54:40,140 --> 00:54:44,038
<font color="#CCCCCC">really aligned with</font><font color="#E5E5E5"> those five</font><font color="#CCCCCC"> different</font>

1370
00:54:41,640 --> 00:54:46,848
<font color="#CCCCCC">categories on how you do</font><font color="#E5E5E5"> protection and</font>

1371
00:54:44,039 --> 00:54:49,259
improving<font color="#CCCCCC"> security</font><font color="#E5E5E5"> so just kind of a</font>

1372
00:54:46,849 --> 00:54:50,700
quick slide about what we went<font color="#E5E5E5"> in there</font>

1373
00:54:49,259 --> 00:54:53,819
<font color="#CCCCCC">a lot of the things we covered</font><font color="#E5E5E5"> cross</font>

1374
00:54:50,700 --> 00:54:55,740
<font color="#E5E5E5">over all of these different areas</font><font color="#CCCCCC"> and</font>

1375
00:54:53,819 --> 00:54:57,150
<font color="#CCCCCC">again most of</font><font color="#E5E5E5"> these things that I got</font>

1376
00:54:55,740 --> 00:54:58,859
came from<font color="#CCCCCC"> other people I didn't</font><font color="#E5E5E5"> develop</font>

1377
00:54:57,150 --> 00:55:00,509
<font color="#E5E5E5">this stuff so you know standing on the</font>

1378
00:54:58,859 --> 00:55:02,578
shoulders of giants<font color="#E5E5E5"> up here these are</font>

1379
00:55:00,509 --> 00:55:04,190
some of<font color="#CCCCCC"> the folks that I plagiarized</font>

1380
00:55:02,579 --> 00:55:05,690
some of their demos in the

1381
00:55:04,190 --> 00:55:07,069
extra and I really encourage you<font color="#CCCCCC"> to</font>

1382
00:55:05,690 --> 00:55:11,420
<font color="#E5E5E5">check them out if you</font><font color="#CCCCCC"> want to learn</font><font color="#E5E5E5"> more</font>

1383
00:55:07,069 --> 00:55:12,770
than big inspirations for<font color="#E5E5E5"> me</font><font color="#CCCCCC"> and then if</font>

1384
00:55:11,420 --> 00:55:15,260
you want to get the deck you go ahead

1385
00:55:12,770 --> 00:55:16,880
<font color="#CCCCCC">and email me with converge deck in the</font>

1386
00:55:15,260 --> 00:55:18,260
subject and<font color="#CCCCCC"> it'll just automatically</font>

1387
00:55:16,880 --> 00:55:19,430
email you<font color="#CCCCCC"> back so</font><font color="#E5E5E5"> not going to add you</font>

1388
00:55:18,260 --> 00:55:21,170
to<font color="#E5E5E5"> a list I don't share with our</font>

1389
00:55:19,430 --> 00:55:22,910
<font color="#E5E5E5">marketing</font><font color="#CCCCCC"> department or anything</font><font color="#E5E5E5"> unless</font>

1390
00:55:21,170 --> 00:55:24,349
<font color="#CCCCCC">you</font><font color="#E5E5E5"> want to be contacted</font><font color="#CCCCCC"> but feel free</font>

1391
00:55:22,910 --> 00:55:26,299
to reach<font color="#E5E5E5"> out to me if</font><font color="#CCCCCC"> you have any</font>

1392
00:55:24,349 --> 00:55:35,780
questions and I hope<font color="#E5E5E5"> you found it</font>

1393
00:55:26,300 --> 00:55:37,190
interesting so<font color="#E5E5E5"> thank you</font><font color="#CCCCCC"> very much does</font>

1394
00:55:35,780 --> 00:55:38,960
anybody have<font color="#CCCCCC"> any questions I know</font><font color="#E5E5E5"> we're</font>

1395
00:55:37,190 --> 00:55:40,310
<font color="#E5E5E5">kind of at the end and we're over but if</font>

1396
00:55:38,960 --> 00:55:43,819
you do have<font color="#E5E5E5"> questions I'll take them</font>

1397
00:55:40,310 --> 00:55:48,560
<font color="#E5E5E5">unless you want</font><font color="#CCCCCC"> to come up Daniel no</font>

1398
00:55:43,819 --> 00:55:51,190
we're all set<font color="#CCCCCC"> okay cool I think</font><font color="#E5E5E5"> Daniels</font>

1399
00:55:48,560 --> 00:55:51,190
up next right

