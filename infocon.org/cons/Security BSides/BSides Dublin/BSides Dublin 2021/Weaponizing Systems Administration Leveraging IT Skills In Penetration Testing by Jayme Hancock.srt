1
00:00:06,560 --> 00:00:08,880
uh thank you everybody for coming um

2
00:00:08,880 --> 00:00:10,400
as paul said i'm jamie this is

3
00:00:10,400 --> 00:00:12,240
weaponizing systems administration uh

4
00:00:12,240 --> 00:00:13,840
we'll be talking about leveraging i.t

5
00:00:13,840 --> 00:00:14,400
skills

6
00:00:14,400 --> 00:00:17,359
in penetration testing um excited to be

7
00:00:17,359 --> 00:00:19,279
here at b-sides dublin virtually

8
00:00:19,279 --> 00:00:20,880
i had a chance to visit dublin a few

9
00:00:20,880 --> 00:00:22,560
years ago and really

10
00:00:22,560 --> 00:00:24,720
really loved it so happy to be a part of

11
00:00:24,720 --> 00:00:26,880
this

12
00:00:29,279 --> 00:00:31,359
so a little bit about me to start off i

13
00:00:31,359 --> 00:00:33,120
work in offensive security in the

14
00:00:33,120 --> 00:00:34,160
financial industry

15
00:00:34,160 --> 00:00:36,880
um this talk is not representative of my

16
00:00:36,880 --> 00:00:38,480
employer's opinions or stances

17
00:00:38,480 --> 00:00:42,399
um but i do work in that industry um

18
00:00:42,399 --> 00:00:43,920
a couple of certifications in

19
00:00:43,920 --> 00:00:46,079
information security uh general systems

20
00:00:46,079 --> 00:00:48,480
administration some other things as well

21
00:00:48,480 --> 00:00:50,000
i have a heavy systems administration

22
00:00:50,000 --> 00:00:51,680
background um

23
00:00:51,680 --> 00:00:54,000
prior to working in security i worked as

24
00:00:54,000 --> 00:00:56,160
a systems admin for fortune 100

25
00:00:56,160 --> 00:00:56,719
companies

26
00:00:56,719 --> 00:01:00,320
i worked for some smaller organizations

27
00:01:00,320 --> 00:01:00,800
as well

28
00:01:00,800 --> 00:01:03,680
kind of as the solo i.t administrator

29
00:01:03,680 --> 00:01:05,438
network administrator kind of everything

30
00:01:05,438 --> 00:01:06,640
in between

31
00:01:06,640 --> 00:01:10,840
and live near dc and i am jaime on

32
00:01:10,840 --> 00:01:13,360
twitter

33
00:01:13,360 --> 00:01:14,960
so a little bit about this talk before

34
00:01:14,960 --> 00:01:16,720
we get going i've had a lot of people

35
00:01:16,720 --> 00:01:18,479
ask me how to get started in offensive

36
00:01:18,479 --> 00:01:21,040
security and specifically in pen testing

37
00:01:21,040 --> 00:01:23,600
and my usual answer is do some time as

38
00:01:23,600 --> 00:01:25,360
assistance administrator or an nit

39
00:01:25,360 --> 00:01:26,240
operations

40
00:01:26,240 --> 00:01:27,920
and kind of learn those underlying

41
00:01:27,920 --> 00:01:29,520
technologies that you'll be

42
00:01:29,520 --> 00:01:32,640
attacking and pen testing later and the

43
00:01:32,640 --> 00:01:33,840
more that i thought about that the more

44
00:01:33,840 --> 00:01:34,640
i realized

45
00:01:34,640 --> 00:01:37,200
it really is true there's a lot of

46
00:01:37,200 --> 00:01:38,320
overlap between

47
00:01:38,320 --> 00:01:40,320
systems administration and between

48
00:01:40,320 --> 00:01:42,799
hacking or penetration testing

49
00:01:42,799 --> 00:01:44,079
and wanted to build out this talk to

50
00:01:44,079 --> 00:01:46,399
kind of explore some of those

51
00:01:46,399 --> 00:01:48,560
i wanted to show value in an i.t

52
00:01:48,560 --> 00:01:50,159
operations background

53
00:01:50,159 --> 00:01:52,479
and just as a disclaimer this is mostly

54
00:01:52,479 --> 00:01:53,920
given from a network fantastic point of

55
00:01:53,920 --> 00:01:54,720
view

56
00:01:54,720 --> 00:01:56,399
uh if you're looking specifically at

57
00:01:56,399 --> 00:01:58,000
like web app penetration testing

58
00:01:58,000 --> 00:01:59,439
your mileage may vary but i think a lot

59
00:01:59,439 --> 00:02:01,360
of it still holds true

60
00:02:01,360 --> 00:02:03,119
and this talk was originally given at

61
00:02:03,119 --> 00:02:04,719
besides dc a few years ago

62
00:02:04,719 --> 00:02:07,040
it's been updated since then but just in

63
00:02:07,040 --> 00:02:10,160
the interest of full disclosure

64
00:02:13,520 --> 00:02:15,520
so by now it's probably pretty common

65
00:02:15,520 --> 00:02:17,440
knowledge that uh people make mistakes

66
00:02:17,440 --> 00:02:19,360
even systems admins so they may not want

67
00:02:19,360 --> 00:02:20,840
you to believe that

68
00:02:20,840 --> 00:02:24,400
um most breaches that you hear about

69
00:02:24,400 --> 00:02:26,480
are due to weak or incorrect

70
00:02:26,480 --> 00:02:27,680
configurations

71
00:02:27,680 --> 00:02:31,519
in systems um when we look at the news

72
00:02:31,519 --> 00:02:32,720
and we hear about breaches a lot of

73
00:02:32,720 --> 00:02:33,599
things that are really

74
00:02:33,599 --> 00:02:36,879
trumped up are zero days and

75
00:02:36,879 --> 00:02:39,120
you know talking about apt groups that

76
00:02:39,120 --> 00:02:40,160
spent

77
00:02:40,160 --> 00:02:42,640
months years whatever trying to develop

78
00:02:42,640 --> 00:02:44,239
this one exploit for this one particular

79
00:02:44,239 --> 00:02:45,120
system but

80
00:02:45,120 --> 00:02:47,360
oftentimes it's the result of really

81
00:02:47,360 --> 00:02:48,800
mispatched cycles or

82
00:02:48,800 --> 00:02:50,319
a temporary workaround that ended up

83
00:02:50,319 --> 00:02:53,599
being not so temporary

84
00:02:54,879 --> 00:02:57,680
each year rapid7 puts out a report

85
00:02:57,680 --> 00:02:59,040
called under the hoodie

86
00:02:59,040 --> 00:03:00,879
and this describes their internal

87
00:03:00,879 --> 00:03:02,319
engagements for the past year their

88
00:03:02,319 --> 00:03:03,599
penetration tests and the

89
00:03:03,599 --> 00:03:05,040
vulnerabilities that are found

90
00:03:05,040 --> 00:03:06,480
and i'm not going to dive too deep into

91
00:03:06,480 --> 00:03:08,319
this but if we look at all the

92
00:03:08,319 --> 00:03:10,800
vulnerabilities that they list here

93
00:03:10,800 --> 00:03:12,560
most of them are misconfigurations or

94
00:03:12,560 --> 00:03:14,400
reconfigurations and

95
00:03:14,400 --> 00:03:16,239
honestly probably the other category too

96
00:03:16,239 --> 00:03:18,239
right it's just not specifically labeled

97
00:03:18,239 --> 00:03:19,360
out

98
00:03:19,360 --> 00:03:20,879
but we're seeing things that would

99
00:03:20,879 --> 00:03:23,440
probably be caught by a penetration test

100
00:03:23,440 --> 00:03:25,519
a really thorough security assessment or

101
00:03:25,519 --> 00:03:27,120
just adhering to best practices and

102
00:03:27,120 --> 00:03:30,400
being consistent with those best

103
00:03:30,840 --> 00:03:32,400
practices

104
00:03:32,400 --> 00:03:34,640
so what does this all mean um defenders

105
00:03:34,640 --> 00:03:36,239
and attackers are looking for the same

106
00:03:36,239 --> 00:03:36,640
thing

107
00:03:36,640 --> 00:03:38,159
you're looking for vulnerabilities

108
00:03:38,159 --> 00:03:40,319
caused by misconfigurations

109
00:03:40,319 --> 00:03:42,400
again we're not seeing zero days here

110
00:03:42,400 --> 00:03:43,840
we're seeing things that really would

111
00:03:43,840 --> 00:03:44,879
have been caught

112
00:03:44,879 --> 00:03:48,239
by these misconfigurations

113
00:03:51,519 --> 00:03:52,959
so i want to talk for a second about the

114
00:03:52,959 --> 00:03:55,680
traits of a penetration tester

115
00:03:55,680 --> 00:03:56,799
these are things that i think are really

116
00:03:56,799 --> 00:03:58,959
important to somebody who is successful

117
00:03:58,959 --> 00:04:00,000
in that role

118
00:04:00,000 --> 00:04:02,720
um the first being the ability to break

119
00:04:02,720 --> 00:04:05,840
down problems into multiple components

120
00:04:05,840 --> 00:04:07,840
if you think about it from a hacker's

121
00:04:07,840 --> 00:04:09,360
perspective you find an exploit

122
00:04:09,360 --> 00:04:12,000
let's say in a web app that allows you

123
00:04:12,000 --> 00:04:13,280
to access a file you shouldn't be able

124
00:04:13,280 --> 00:04:14,799
to access

125
00:04:14,799 --> 00:04:17,358
well you need to break that that factor

126
00:04:17,358 --> 00:04:19,040
that concept down into its components

127
00:04:19,040 --> 00:04:22,000
um how are you going to get the payload

128
00:04:22,000 --> 00:04:24,000
across to actually read this file

129
00:04:24,000 --> 00:04:27,040
um how would you verify the file is read

130
00:04:27,040 --> 00:04:28,880
only or if you have write access

131
00:04:28,880 --> 00:04:30,960
um what context is the vulnerable

132
00:04:30,960 --> 00:04:32,240
service running in

133
00:04:32,240 --> 00:04:33,840
if you upload a file where does that

134
00:04:33,840 --> 00:04:35,040
actually land so there's a lot of

135
00:04:35,040 --> 00:04:36,880
individual pieces to this that you have

136
00:04:36,880 --> 00:04:37,759
to be able to

137
00:04:37,759 --> 00:04:39,280
kind of troubleshoot and work within the

138
00:04:39,280 --> 00:04:41,120
constraints of to

139
00:04:41,120 --> 00:04:42,880
successfully exploit the vulnerability

140
00:04:42,880 --> 00:04:44,479
you found

141
00:04:44,479 --> 00:04:46,720
um a penetration tester or hacker needs

142
00:04:46,720 --> 00:04:48,400
to understand workflow

143
00:04:48,400 --> 00:04:50,639
um being able to identify how attacking

144
00:04:50,639 --> 00:04:52,000
one system could attack

145
00:04:52,000 --> 00:04:54,320
excuse me could affect another system if

146
00:04:54,320 --> 00:04:55,600
you're attacking a database what does

147
00:04:55,600 --> 00:04:56,479
that do to

148
00:04:56,479 --> 00:04:59,600
the login flow on your end users um

149
00:04:59,600 --> 00:05:02,080
interface right and you need to be able

150
00:05:02,080 --> 00:05:03,759
to identify why an attack isn't working

151
00:05:03,759 --> 00:05:05,440
and troubleshoot that

152
00:05:05,440 --> 00:05:09,199
um a lot of times exploit code

153
00:05:09,199 --> 00:05:12,080
will be pretty basic um and might not

154
00:05:12,080 --> 00:05:13,039
work right off the bat

155
00:05:13,039 --> 00:05:15,360
so you might have to figure out what do

156
00:05:15,360 --> 00:05:16,320
i actually have to do

157
00:05:16,320 --> 00:05:17,919
why isn't it working what's the

158
00:05:17,919 --> 00:05:19,919
remediation and how do i get this

159
00:05:19,919 --> 00:05:22,840
working or identify a workaround

160
00:05:22,840 --> 00:05:24,080
altogether

161
00:05:24,080 --> 00:05:25,199
and finally you need to be good at

162
00:05:25,199 --> 00:05:27,440
communicating complex technical info to

163
00:05:27,440 --> 00:05:29,360
audiences that are either very technical

164
00:05:29,360 --> 00:05:30,000
like the

165
00:05:30,000 --> 00:05:31,680
engineers you might be working with or

166
00:05:31,680 --> 00:05:33,520
completely non-technical like maybe

167
00:05:33,520 --> 00:05:37,680
a cso or another business executive who

168
00:05:37,680 --> 00:05:38,800
is

169
00:05:38,800 --> 00:05:40,400
not necessarily hands on keyboard every

170
00:05:40,400 --> 00:05:41,680
day but still needs to understand the

171
00:05:41,680 --> 00:05:43,360
concepts and understand what you found

172
00:05:43,360 --> 00:05:46,400
and how to fix it

173
00:05:49,039 --> 00:05:50,479
if we look at the traits of a systems

174
00:05:50,479 --> 00:05:52,000
administrator you see that there's a lot

175
00:05:52,000 --> 00:05:53,840
of crossover

176
00:05:53,840 --> 00:05:56,000
now systems admin needs to be able to

177
00:05:56,000 --> 00:05:57,600
break down problems into its individual

178
00:05:57,600 --> 00:05:59,759
components as well

179
00:05:59,759 --> 00:06:01,600
how many times has a system and received

180
00:06:01,600 --> 00:06:02,800
a ticket that says

181
00:06:02,800 --> 00:06:05,440
email doesn't work and has to determine

182
00:06:05,440 --> 00:06:06,319
okay is that

183
00:06:06,319 --> 00:06:08,639
the client is at the server is it dns

184
00:06:08,639 --> 00:06:10,000
probably dns

185
00:06:10,000 --> 00:06:12,720
um is it a routing issue is it a hosting

186
00:06:12,720 --> 00:06:14,160
issue right you have to be able to look

187
00:06:14,160 --> 00:06:15,360
at all of these things and really break

188
00:06:15,360 --> 00:06:18,479
it down to find the root cause

189
00:06:18,479 --> 00:06:20,240
i think that a systems admin really

190
00:06:20,240 --> 00:06:21,840
needs expertise in troubleshooting and

191
00:06:21,840 --> 00:06:22,160
that's

192
00:06:22,160 --> 00:06:23,840
that's really where they shine is being

193
00:06:23,840 --> 00:06:25,600
able to take those problems and break

194
00:06:25,600 --> 00:06:26,960
them down and troubleshoot each

195
00:06:26,960 --> 00:06:29,759
individually and rule them out

196
00:06:29,759 --> 00:06:31,440
they tend to like solving problems

197
00:06:31,440 --> 00:06:33,520
finding workarounds um finding creative

198
00:06:33,520 --> 00:06:34,800
solutions to problems

199
00:06:34,800 --> 00:06:37,199
and that's especially true if like me

200
00:06:37,199 --> 00:06:38,800
you've worked for an organization in the

201
00:06:38,800 --> 00:06:40,400
past that maybe didn't have a big budget

202
00:06:40,400 --> 00:06:41,919
for it

203
00:06:41,919 --> 00:06:43,039
you find out how much of your

204
00:06:43,039 --> 00:06:44,960
organization can really be kind of held

205
00:06:44,960 --> 00:06:45,680
together with

206
00:06:45,680 --> 00:06:48,960
bash scripts and creativity right

207
00:06:48,960 --> 00:06:50,080
and then they also need to be

208
00:06:50,080 --> 00:06:52,080
communicating technical information to

209
00:06:52,080 --> 00:06:53,840
technical and non-technical audiences

210
00:06:53,840 --> 00:06:56,080
you have to be able to communicate with

211
00:06:56,080 --> 00:06:58,160
vendors with support with escalation

212
00:06:58,160 --> 00:06:59,840
staff but you also have to be able to

213
00:06:59,840 --> 00:07:00,240
tell

214
00:07:00,240 --> 00:07:01,520
your boss at the end of the day what

215
00:07:01,520 --> 00:07:03,039
happened why was there downtime how do

216
00:07:03,039 --> 00:07:06,318
we fix that that type of thing

217
00:07:08,800 --> 00:07:10,800
so this is a sysadmin job post that i

218
00:07:10,800 --> 00:07:12,160
pulled off of craigslist

219
00:07:12,160 --> 00:07:14,960
maybe a year ago or so and just taking a

220
00:07:14,960 --> 00:07:16,080
look at this this is a very

221
00:07:16,080 --> 00:07:18,720
common type of systems administrator job

222
00:07:18,720 --> 00:07:19,919
post that we would see

223
00:07:19,919 --> 00:07:22,560
uh here in the states and look at how

224
00:07:22,560 --> 00:07:25,440
many individual technologies are covered

225
00:07:25,440 --> 00:07:26,800
this person that's being hired as a

226
00:07:26,800 --> 00:07:29,280
systems admin needs skills in linux and

227
00:07:29,280 --> 00:07:30,400
windows

228
00:07:30,400 --> 00:07:32,160
troubleshooting patch management

229
00:07:32,160 --> 00:07:34,479
configuration windows servers

230
00:07:34,479 --> 00:07:36,400
security third-party assessment tool or

231
00:07:36,400 --> 00:07:37,759
excuse me third-party tools

232
00:07:37,759 --> 00:07:41,120
um virtualization backup disaster

233
00:07:41,120 --> 00:07:42,319
recovery there's a lot of different

234
00:07:42,319 --> 00:07:43,520
concepts here that

235
00:07:43,520 --> 00:07:46,800
honestly could be expertise expertise is

236
00:07:46,800 --> 00:07:49,120
in their own right

237
00:07:49,120 --> 00:07:52,240
that's a lot for a person to take on

238
00:07:52,240 --> 00:07:54,000
but if we look at a more recent

239
00:07:54,000 --> 00:07:55,599
penetration test from a few years ago

240
00:07:55,599 --> 00:07:56,879
that i did this is

241
00:07:56,879 --> 00:07:58,400
the technologies that were encountered

242
00:07:58,400 --> 00:08:00,560
on a single slash 24 network

243
00:08:00,560 --> 00:08:03,440
it's a lot of those same things windows

244
00:08:03,440 --> 00:08:04,319
linux

245
00:08:04,319 --> 00:08:07,520
mac we have email deployment pipelines

246
00:08:07,520 --> 00:08:08,960
virtualization

247
00:08:08,960 --> 00:08:10,800
looking back here there's a lot of

248
00:08:10,800 --> 00:08:13,840
crossover there too right

249
00:08:16,960 --> 00:08:19,120
so in the end when it comes down to it

250
00:08:19,120 --> 00:08:20,400
there's not a lot of difference between

251
00:08:20,400 --> 00:08:21,520
these two pictures

252
00:08:21,520 --> 00:08:23,599
um the person on the left maybe going

253
00:08:23,599 --> 00:08:25,360
through a disaster recovery scenario i

254
00:08:25,360 --> 00:08:26,800
need access to this database but i don't

255
00:08:26,800 --> 00:08:28,080
have credentials

256
00:08:28,080 --> 00:08:29,680
versus somebody trying to maliciously

257
00:08:29,680 --> 00:08:31,520
access the data underneath

258
00:08:31,520 --> 00:08:32,880
i need access to the database but i

259
00:08:32,880 --> 00:08:34,958
don't have the credentials right

260
00:08:34,958 --> 00:08:36,479
the difference there is the intent of

261
00:08:36,479 --> 00:08:38,640
what they want to do

262
00:08:38,640 --> 00:08:40,080
one of them may be trying to bypass

263
00:08:40,080 --> 00:08:42,080
security controls to bring the system

264
00:08:42,080 --> 00:08:43,279
back online

265
00:08:43,279 --> 00:08:44,480
whereas the other might be trying to

266
00:08:44,480 --> 00:08:46,399
bypass the security controls to steal

267
00:08:46,399 --> 00:08:47,760
and exfiltrate data

268
00:08:47,760 --> 00:08:49,519
the processes they use are probably

269
00:08:49,519 --> 00:08:55,839
going to be very similar

270
00:08:56,720 --> 00:08:58,240
this is one of my favorite tweets and

271
00:08:58,240 --> 00:09:00,000
quotes of all time which is sometimes

272
00:09:00,000 --> 00:09:00,880
hacking is just

273
00:09:00,880 --> 00:09:03,040
spending more time on something than

274
00:09:03,040 --> 00:09:05,920
anyone else might reasonably expect

275
00:09:05,920 --> 00:09:08,720
i 100 believe that um anyone who has

276
00:09:08,720 --> 00:09:10,640
worked in i.t in any capacity

277
00:09:10,640 --> 00:09:13,120
via security or operations can attest to

278
00:09:13,120 --> 00:09:14,160
have spent

279
00:09:14,160 --> 00:09:17,360
many hours on something

280
00:09:17,360 --> 00:09:18,800
when they knew it was either a lost

281
00:09:18,800 --> 00:09:20,480
cause or there was a faster way to do it

282
00:09:20,480 --> 00:09:21,680
just because you wanted to fix the

283
00:09:21,680 --> 00:09:22,320
problem

284
00:09:22,320 --> 00:09:24,959
right that's really what hacking is it's

285
00:09:24,959 --> 00:09:25,680
not

286
00:09:25,680 --> 00:09:28,240
settling for the answer no when you try

287
00:09:28,240 --> 00:09:30,080
to access the system or gain access to

288
00:09:30,080 --> 00:09:30,959
data

289
00:09:30,959 --> 00:09:33,360
and continuing to spend time trying to

290
00:09:33,360 --> 00:09:34,720
get creative and trying to get around

291
00:09:34,720 --> 00:09:37,839
those controls

292
00:09:39,519 --> 00:09:41,519
in security we hear this a lot

293
00:09:41,519 --> 00:09:42,959
especially on the offensive side which

294
00:09:42,959 --> 00:09:44,320
is think like a bad guy

295
00:09:44,320 --> 00:09:46,399
right and they tell you that on the on

296
00:09:46,399 --> 00:09:48,080
the blue team side as well think like a

297
00:09:48,080 --> 00:09:50,080
bad guy figure out what a bad guy would

298
00:09:50,080 --> 00:09:51,760
do in this situation what a criminal is

299
00:09:51,760 --> 00:09:54,000
going to do to try to get access to this

300
00:09:54,000 --> 00:09:55,200
and i think there's a lot of value in

301
00:09:55,200 --> 00:09:57,200
that i do think it's a great mindset and

302
00:09:57,200 --> 00:09:58,640
very necessary

303
00:09:58,640 --> 00:10:00,800
but i'd also encourage you to think like

304
00:10:00,800 --> 00:10:02,640
you manage the system

305
00:10:02,640 --> 00:10:04,959
what processes are in place and what

306
00:10:04,959 --> 00:10:06,399
controls have or have not been

307
00:10:06,399 --> 00:10:07,440
implemented

308
00:10:07,440 --> 00:10:09,600
um and what would you be most concerned

309
00:10:09,600 --> 00:10:11,120
about if you are responsible for

310
00:10:11,120 --> 00:10:12,560
securing that system

311
00:10:12,560 --> 00:10:14,959
and then figure that out i think at some

312
00:10:14,959 --> 00:10:16,399
point we've all managed a system where

313
00:10:16,399 --> 00:10:17,600
we knew there were skeletons in the

314
00:10:17,600 --> 00:10:18,000
closet

315
00:10:18,000 --> 00:10:19,760
and we knew that there was something

316
00:10:19,760 --> 00:10:21,279
that kind of kept us up at night

317
00:10:21,279 --> 00:10:22,959
and we thought well if anyone ever finds

318
00:10:22,959 --> 00:10:24,399
this

319
00:10:24,399 --> 00:10:26,640
i'm done the system is done think about

320
00:10:26,640 --> 00:10:28,160
where that might be

321
00:10:28,160 --> 00:10:30,160
and look at that to start your attacks

322
00:10:30,160 --> 00:10:33,839
as a penetration tester

323
00:10:36,320 --> 00:10:37,839
so i want to talk about a few skill sets

324
00:10:37,839 --> 00:10:40,320
that i think are core to it but have a

325
00:10:40,320 --> 00:10:40,959
lot of

326
00:10:40,959 --> 00:10:44,079
crossover in penetration testing this is

327
00:10:44,079 --> 00:10:45,760
by no means all of them but it gives us

328
00:10:45,760 --> 00:10:46,399
a good idea

329
00:10:46,399 --> 00:10:49,680
of kind of how everything fits in

330
00:10:50,720 --> 00:10:53,680
so first off server administration

331
00:10:53,680 --> 00:10:55,040
knowing how operating systems are

332
00:10:55,040 --> 00:10:56,560
configured by default how they're

333
00:10:56,560 --> 00:10:58,720
typically configured that's invaluable

334
00:10:58,720 --> 00:11:00,880
knowing what services are typically

335
00:11:00,880 --> 00:11:02,320
enabled or what services need to be

336
00:11:02,320 --> 00:11:04,160
enabled for something else to work

337
00:11:04,160 --> 00:11:05,279
is very helpful when you're trying to

338
00:11:05,279 --> 00:11:07,600
attack those services um

339
00:11:07,600 --> 00:11:09,120
installation of software looking at

340
00:11:09,120 --> 00:11:11,040
config files looking at

341
00:11:11,040 --> 00:11:13,360
where they're stored what's in them do

342
00:11:13,360 --> 00:11:14,880
we have credentials stored inside the

343
00:11:14,880 --> 00:11:17,040
config files are they encrypted are they

344
00:11:17,040 --> 00:11:19,279
encoded with base64

345
00:11:19,279 --> 00:11:20,720
or are we storing them in the registry

346
00:11:20,720 --> 00:11:22,640
how can we quickly retrieve those

347
00:11:22,640 --> 00:11:24,399
and then leveraging that to break into

348
00:11:24,399 --> 00:11:26,399
the system or escalate privileges

349
00:11:26,399 --> 00:11:29,600
versus just setting up configurations um

350
00:11:29,600 --> 00:11:30,480
how do systems

351
00:11:30,480 --> 00:11:33,040
interact with other services do users

352
00:11:33,040 --> 00:11:35,120
log in directly are they logging in

353
00:11:35,120 --> 00:11:37,040
through a client are they logging in and

354
00:11:37,040 --> 00:11:39,519
then accessing a backend server

355
00:11:39,519 --> 00:11:41,040
how are things updated what network

356
00:11:41,040 --> 00:11:42,640
ports need to be open

357
00:11:42,640 --> 00:11:44,720
if you take a look at a server and see

358
00:11:44,720 --> 00:11:47,120
that port 8443 is open

359
00:11:47,120 --> 00:11:49,120
do you know right away oh that's because

360
00:11:49,120 --> 00:11:50,880
software x is running and can you kind

361
00:11:50,880 --> 00:11:52,399
of infer what else might be running on

362
00:11:52,399 --> 00:11:57,040
that system

363
00:11:57,040 --> 00:12:00,000
active directory and group policy active

364
00:12:00,000 --> 00:12:01,200
directory is

365
00:12:01,200 --> 00:12:03,600
super important it runs pretty much

366
00:12:03,600 --> 00:12:06,720
everywhere these days

367
00:12:06,800 --> 00:12:09,920
excuse me look at things like bloodhound

368
00:12:09,920 --> 00:12:11,440
tools like bloodhound go through active

369
00:12:11,440 --> 00:12:13,360
directory and parts out permissions and

370
00:12:13,360 --> 00:12:15,839
they look at all of the stacked uh

371
00:12:15,839 --> 00:12:18,000
security groups and figure out

372
00:12:18,000 --> 00:12:20,399
how to get to domain admin fastest right

373
00:12:20,399 --> 00:12:21,120
but

374
00:12:21,120 --> 00:12:22,800
how can that be leveraged in other

375
00:12:22,800 --> 00:12:24,880
locations or another in other situations

376
00:12:24,880 --> 00:12:26,720
can we look at a user and

377
00:12:26,720 --> 00:12:29,440
figure out if that user has elevated

378
00:12:29,440 --> 00:12:30,320
privileges

379
00:12:30,320 --> 00:12:31,519
by looking at other groups that are

380
00:12:31,519 --> 00:12:34,000
members of

381
00:12:35,279 --> 00:12:37,279
look at active directory procedures in

382
00:12:37,279 --> 00:12:39,920
general how are the user roles actually

383
00:12:39,920 --> 00:12:42,240
managed is it somebody going in and

384
00:12:42,240 --> 00:12:45,519
adding users to every role is it a user

385
00:12:45,519 --> 00:12:47,600
administrator going in and adding groups

386
00:12:47,600 --> 00:12:49,200
security groups to a user

387
00:12:49,200 --> 00:12:51,200
um how is all that enforced and where

388
00:12:51,200 --> 00:12:52,880
are the domain controllers what's on the

389
00:12:52,880 --> 00:12:54,160
domain controllers

390
00:12:54,160 --> 00:12:55,440
how is this integrated with other

391
00:12:55,440 --> 00:12:57,920
services that's an important one because

392
00:12:57,920 --> 00:12:59,200
if you're brute forcing

393
00:12:59,200 --> 00:13:01,839
a login page and it's tied to active

394
00:13:01,839 --> 00:13:03,279
directory maybe you're actually locking

395
00:13:03,279 --> 00:13:05,200
out all of the users on the penetration

396
00:13:05,200 --> 00:13:06,079
test if you're doing

397
00:13:06,079 --> 00:13:07,920
and not just trying to find the password

398
00:13:07,920 --> 00:13:09,279
right realizing

399
00:13:09,279 --> 00:13:10,320
not realizing that you're actually

400
00:13:10,320 --> 00:13:13,279
locking out users

401
00:13:17,200 --> 00:13:19,839
network demonstration understanding

402
00:13:19,839 --> 00:13:21,760
network protocols is huge even just the

403
00:13:21,760 --> 00:13:23,920
difference between tcp and udp

404
00:13:23,920 --> 00:13:25,920
um understanding firewall rules and the

405
00:13:25,920 --> 00:13:27,440
difference between like

406
00:13:27,440 --> 00:13:29,120
getting a reset packet and a finish back

407
00:13:29,120 --> 00:13:30,959
to back right

408
00:13:30,959 --> 00:13:33,839
wireshark and tcp dump are huge two

409
00:13:33,839 --> 00:13:35,440
tools i use all the time

410
00:13:35,440 --> 00:13:37,600
it's very helpful for finding out what's

411
00:13:37,600 --> 00:13:38,720
happening under the hood when you're

412
00:13:38,720 --> 00:13:40,480
running an exploit or

413
00:13:40,480 --> 00:13:43,120
looking at a particular piece of traffic

414
00:13:43,120 --> 00:13:44,399
actually knowing what the packets are

415
00:13:44,399 --> 00:13:45,040
doing

416
00:13:45,040 --> 00:13:47,440
and being able to interpret that is

417
00:13:47,440 --> 00:13:48,320
really helpful

418
00:13:48,320 --> 00:13:49,760
but as a systems admin it's also

419
00:13:49,760 --> 00:13:51,199
something that you're doing all the time

420
00:13:51,199 --> 00:13:52,800
to figure out what your network is doing

421
00:13:52,800 --> 00:13:56,480
in general um routing and switching do

422
00:13:56,480 --> 00:13:57,440
you know

423
00:13:57,440 --> 00:14:00,480
what protocols can traverse a broadcast

424
00:14:00,480 --> 00:14:02,000
domain and why a certain

425
00:14:02,000 --> 00:14:04,079
attack might not be working do you

426
00:14:04,079 --> 00:14:05,360
understand the routing and switching a

427
00:14:05,360 --> 00:14:06,800
systems admin will typically have at

428
00:14:06,800 --> 00:14:08,240
least a basic understanding if you have

429
00:14:08,240 --> 00:14:09,680
a network admin background probably you

430
00:14:09,680 --> 00:14:10,959
need a better understanding of those

431
00:14:10,959 --> 00:14:13,199
types of things

432
00:14:13,199 --> 00:14:15,600
and then multi-home systems um there's a

433
00:14:15,600 --> 00:14:17,360
lot of pivoting in modern networks

434
00:14:17,360 --> 00:14:19,519
uh not all networks are flat anymore so

435
00:14:19,519 --> 00:14:20,560
if you end up

436
00:14:20,560 --> 00:14:23,680
exploiting a web server that has several

437
00:14:23,680 --> 00:14:24,959
network cards

438
00:14:24,959 --> 00:14:26,560
are you comfortable being able to pivot

439
00:14:26,560 --> 00:14:28,079
into another network or are you stuck

440
00:14:28,079 --> 00:14:31,839
online network

441
00:14:33,120 --> 00:14:35,360
software and script deployment this kind

442
00:14:35,360 --> 00:14:36,639
of ties back to gpo

443
00:14:36,639 --> 00:14:39,839
in in a sense scripts and their physical

444
00:14:39,839 --> 00:14:40,639
locations

445
00:14:40,639 --> 00:14:45,120
are defined by gpo and do you know

446
00:14:45,120 --> 00:14:46,399
that you can actually access those

447
00:14:46,399 --> 00:14:49,279
scripts as a domain user

448
00:14:49,279 --> 00:14:52,079
by just going into the system folder um

449
00:14:52,079 --> 00:14:53,440
you know furthermore d

450
00:14:53,440 --> 00:14:55,600
there's a group policy object for some

451
00:14:55,600 --> 00:14:57,199
legacy systems that

452
00:14:57,199 --> 00:14:59,680
pushes out the administrator password to

453
00:14:59,680 --> 00:15:01,440
the system folder and encrypts it with a

454
00:15:01,440 --> 00:15:02,399
really weak key

455
00:15:02,399 --> 00:15:05,680
32-bit i think it is um knowing where

456
00:15:05,680 --> 00:15:07,120
that's stored and that you can go in

457
00:15:07,120 --> 00:15:08,639
there and pull that

458
00:15:08,639 --> 00:15:11,120
administrator password out of a

459
00:15:11,120 --> 00:15:12,240
potentially open

460
00:15:12,240 --> 00:15:15,600
smb share that's that's huge to know

461
00:15:15,600 --> 00:15:16,959
um other things like system

462
00:15:16,959 --> 00:15:19,279
configuration uh cron jobs and schedule

463
00:15:19,279 --> 00:15:20,000
tasks and

464
00:15:20,000 --> 00:15:21,360
third-party options there's a lot of

465
00:15:21,360 --> 00:15:23,120
smaller shops that use things like pdq

466
00:15:23,120 --> 00:15:24,720
deploy and ps exec

467
00:15:24,720 --> 00:15:26,560
those are also things that attackers

468
00:15:26,560 --> 00:15:27,760
will use ps exec

469
00:15:27,760 --> 00:15:30,880
in pen testing is is pretty common um

470
00:15:30,880 --> 00:15:32,959
so it's good to know how that works and

471
00:15:32,959 --> 00:15:40,000
how it all fits together

472
00:15:40,000 --> 00:15:42,320
so i learned scripting and programming

473
00:15:42,320 --> 00:15:43,120
in general

474
00:15:43,120 --> 00:15:45,759
much later in my career than i would

475
00:15:45,759 --> 00:15:47,120
like to admit i think it's something

476
00:15:47,120 --> 00:15:47,600
that

477
00:15:47,600 --> 00:15:50,399
is absolutely a must to learn to at

478
00:15:50,399 --> 00:15:51,120
least read

479
00:15:51,120 --> 00:15:53,040
the code um you don't necessarily have

480
00:15:53,040 --> 00:15:54,880
to program or have to be able to write

481
00:15:54,880 --> 00:15:55,839
code but

482
00:15:55,839 --> 00:15:57,440
to grow out your career and do things

483
00:15:57,440 --> 00:15:59,920
consistently and do things quickly

484
00:15:59,920 --> 00:16:03,519
and at scale writing code is definitely

485
00:16:03,519 --> 00:16:05,199
a must

486
00:16:05,199 --> 00:16:08,240
um one of the ways i learned was to

487
00:16:08,240 --> 00:16:10,000
grab some proof of concept code from

488
00:16:10,000 --> 00:16:11,519
exploitdb

489
00:16:11,519 --> 00:16:14,480
and just try to customize it exploitdb

490
00:16:14,480 --> 00:16:16,079
has a ton of proof of concept code out

491
00:16:16,079 --> 00:16:17,839
there that's not super well written

492
00:16:17,839 --> 00:16:19,600
it works in terms of triggering the

493
00:16:19,600 --> 00:16:22,240
exploit but it relies on

494
00:16:22,240 --> 00:16:24,959
some manual work so i would take that

495
00:16:24,959 --> 00:16:26,480
code and i would start commenting each

496
00:16:26,480 --> 00:16:27,120
line

497
00:16:27,120 --> 00:16:28,480
you know this is where it's setting a

498
00:16:28,480 --> 00:16:29,839
variable this is where it's sending the

499
00:16:29,839 --> 00:16:31,279
payload this is where it's defining the

500
00:16:31,279 --> 00:16:32,399
payload to kind of

501
00:16:32,399 --> 00:16:33,920
see what i understood and what i didn't

502
00:16:33,920 --> 00:16:35,360
and then figure out what i didn't

503
00:16:35,360 --> 00:16:37,759
understand

504
00:16:37,759 --> 00:16:39,600
and then customizing it too um can you

505
00:16:39,600 --> 00:16:41,759
make it so that an ip address is in line

506
00:16:41,759 --> 00:16:43,360
on the command line rather than

507
00:16:43,360 --> 00:16:44,880
having to go in and edit this file every

508
00:16:44,880 --> 00:16:47,839
time you exploit the system

509
00:16:47,839 --> 00:16:49,360
you can really pick whatever language

510
00:16:49,360 --> 00:16:51,600
you want um python ruby

511
00:16:51,600 --> 00:16:54,959
python go python

512
00:16:54,959 --> 00:16:57,040
all popular for penetration testing and

513
00:16:57,040 --> 00:16:59,120
a big python fan but

514
00:16:59,120 --> 00:17:00,959
um in all seriousness they're all very

515
00:17:00,959 --> 00:17:02,639
popular for penetration testing and for

516
00:17:02,639 --> 00:17:04,559
security in general knowing any of them

517
00:17:04,559 --> 00:17:05,679
is really going to help up

518
00:17:05,679 --> 00:17:08,959
your game um there's

519
00:17:08,959 --> 00:17:12,240
also kind of a like prideful resistance

520
00:17:12,240 --> 00:17:14,079
in learning powershell for a lot of

521
00:17:14,079 --> 00:17:16,000
systems admins but

522
00:17:16,000 --> 00:17:18,480
it's not really going anywhere um

523
00:17:18,480 --> 00:17:19,760
learning how to learn it

524
00:17:19,760 --> 00:17:21,039
if you don't want to learn it outright i

525
00:17:21,039 --> 00:17:22,880
think it's just as important learning

526
00:17:22,880 --> 00:17:24,799
these two commands get command dash down

527
00:17:24,799 --> 00:17:25,919
and what you're trying to do

528
00:17:25,919 --> 00:17:28,079
and then get help dash name the command

529
00:17:28,079 --> 00:17:30,000
you just found and examples

530
00:17:30,000 --> 00:17:32,320
that gives you probably 50 of what you

531
00:17:32,320 --> 00:17:33,039
need to

532
00:17:33,039 --> 00:17:36,559
start writing some basic powershell

533
00:17:38,720 --> 00:17:40,799
and here i'm going to say something

534
00:17:40,799 --> 00:17:42,160
that's going to sound really sarcastic

535
00:17:42,160 --> 00:17:43,600
but honestly it's not uh

536
00:17:43,600 --> 00:17:45,919
do some time in tech support i don't

537
00:17:45,919 --> 00:17:47,440
think i have ever in my life

538
00:17:47,440 --> 00:17:49,520
seen so many creative ways to dodge

539
00:17:49,520 --> 00:17:50,640
security controls

540
00:17:50,640 --> 00:17:52,480
as when i was working desk side support

541
00:17:52,480 --> 00:17:54,880
with users

542
00:17:54,880 --> 00:17:56,720
in the case on the right here this was

543
00:17:56,720 --> 00:17:58,240
an actual real example friend

544
00:17:58,240 --> 00:18:00,160
years ago where users realized they

545
00:18:00,160 --> 00:18:02,400
couldn't send exe files over email

546
00:18:02,400 --> 00:18:05,200
so they would open up wordpad create a

547
00:18:05,200 --> 00:18:06,160
document

548
00:18:06,160 --> 00:18:09,200
drag the exe in there save it send

549
00:18:09,200 --> 00:18:12,400
the rtf document to another user over

550
00:18:12,400 --> 00:18:14,640
exchange and that went through because

551
00:18:14,640 --> 00:18:16,799
rtf files weren't being blocked and the

552
00:18:16,799 --> 00:18:18,559
user on the other side would download it

553
00:18:18,559 --> 00:18:20,559
drag the file back to their desktop and

554
00:18:20,559 --> 00:18:23,600
they had bypassed our security controls

555
00:18:23,600 --> 00:18:25,360
um it's not something i ever would have

556
00:18:25,360 --> 00:18:26,720
thought of but

557
00:18:26,720 --> 00:18:28,400
it's a it's a valid method of

558
00:18:28,400 --> 00:18:30,320
exfiltration as well right if you have

559
00:18:30,320 --> 00:18:32,400
dlp that's blocking certain files but

560
00:18:32,400 --> 00:18:34,160
you can send an rtf out and that's

561
00:18:34,160 --> 00:18:38,640
a lot listed maybe that's the way to go

562
00:18:39,520 --> 00:18:41,120
malware there's really not a lot of

563
00:18:41,120 --> 00:18:43,039
difference between fighting malware

564
00:18:43,039 --> 00:18:45,679
and fighting system restrictions for edr

565
00:18:45,679 --> 00:18:46,799
or antivirus

566
00:18:46,799 --> 00:18:50,320
those things do not like to to be shut

567
00:18:50,320 --> 00:18:51,679
down

568
00:18:51,679 --> 00:18:53,520
and they will fight you they will try to

569
00:18:53,520 --> 00:18:54,960
spawn in the background they'll try to

570
00:18:54,960 --> 00:18:56,559
prevent you from closing them out

571
00:18:56,559 --> 00:18:57,200
entirely

572
00:18:57,200 --> 00:18:59,520
or removing files or removing some sort

573
00:18:59,520 --> 00:19:01,280
of persistence that they might have

574
00:19:01,280 --> 00:19:02,880
it gives you a lot of experience finding

575
00:19:02,880 --> 00:19:05,520
malware that you'll see as a penetration

576
00:19:05,520 --> 00:19:07,360
tester landing on a box that has

577
00:19:07,360 --> 00:19:10,640
a protective software installed on it

578
00:19:10,640 --> 00:19:12,240
and even looking at where malware

579
00:19:12,240 --> 00:19:14,559
persists and how it kind of hides and

580
00:19:14,559 --> 00:19:17,200
and you know stays running after reboot

581
00:19:17,200 --> 00:19:18,240
and all that that might give you some

582
00:19:18,240 --> 00:19:20,559
ideas as a pen tester on

583
00:19:20,559 --> 00:19:23,120
how do you actually maintain persistence

584
00:19:23,120 --> 00:19:26,479
on the system that you've exported

585
00:19:26,640 --> 00:19:28,640
it also gives you a great understanding

586
00:19:28,640 --> 00:19:30,559
of how systems work

587
00:19:30,559 --> 00:19:32,799
being able to really dig into a problem

588
00:19:32,799 --> 00:19:34,320
and dig into the logs

589
00:19:34,320 --> 00:19:36,480
and looking at how software interacts

590
00:19:36,480 --> 00:19:37,760
with each other i think is really

591
00:19:37,760 --> 00:19:39,600
important

592
00:19:39,600 --> 00:19:44,240
there tends to be uh kind of a

593
00:19:44,240 --> 00:19:46,880
desire to just wipe a system back it up

594
00:19:46,880 --> 00:19:48,240
format it

595
00:19:48,240 --> 00:19:49,919
when there's an issue and i think if you

596
00:19:49,919 --> 00:19:51,360
can avoid that and actually do the

597
00:19:51,360 --> 00:19:52,160
troubleshooting

598
00:19:52,160 --> 00:19:54,160
and try to get to the root cause you

599
00:19:54,160 --> 00:19:57,840
learn a lot that's really valuable later

600
00:20:02,000 --> 00:20:04,400
so native tooling relying on hacking

601
00:20:04,400 --> 00:20:05,840
tools means you have to get them on a

602
00:20:05,840 --> 00:20:08,320
compromise system

603
00:20:08,320 --> 00:20:10,159
you never want to end up exploiting a

604
00:20:10,159 --> 00:20:11,760
web server and realizing that you can't

605
00:20:11,760 --> 00:20:13,039
do anything because you don't have that

606
00:20:13,039 --> 00:20:14,240
split installed

607
00:20:14,240 --> 00:20:16,960
not a good place to be in standardizing

608
00:20:16,960 --> 00:20:19,039
your processes on built-in tools

609
00:20:19,039 --> 00:20:21,200
really help you build processes that are

610
00:20:21,200 --> 00:20:22,240
repeatable

611
00:20:22,240 --> 00:20:25,760
that are probably not on block lists

612
00:20:25,760 --> 00:20:28,080
probably allowed and parts of normal

613
00:20:28,080 --> 00:20:30,080
systems administration

614
00:20:30,080 --> 00:20:31,919
so to the left here we have some

615
00:20:31,919 --> 00:20:33,679
metasploit modules until they write

616
00:20:33,679 --> 00:20:35,360
their native equivalent on various

617
00:20:35,360 --> 00:20:36,640
operating systems

618
00:20:36,640 --> 00:20:37,919
these are all types of things that

619
00:20:37,919 --> 00:20:39,840
assist at system admin is going to do

620
00:20:39,840 --> 00:20:41,280
pretty regularly as they're going

621
00:20:41,280 --> 00:20:42,880
through managed systems

622
00:20:42,880 --> 00:20:45,760
um it's kind of intuitive to add a user

623
00:20:45,760 --> 00:20:47,520
through maybe net user

624
00:20:47,520 --> 00:20:50,720
or user adam linux for somebody who's

625
00:20:50,720 --> 00:20:52,080
done that hundreds of times

626
00:20:52,080 --> 00:20:55,360
actually adding real users

627
00:20:58,640 --> 00:21:00,559
but that said tooling does exist for a

628
00:21:00,559 --> 00:21:01,760
reason and

629
00:21:01,760 --> 00:21:04,240
you need to understand how it works you

630
00:21:04,240 --> 00:21:05,360
need to have a plan b

631
00:21:05,360 --> 00:21:08,000
so you can use that native tooling but

632
00:21:08,000 --> 00:21:09,039
at the end of the day

633
00:21:09,039 --> 00:21:11,120
your client or your organization is

634
00:21:11,120 --> 00:21:12,720
paying you to cover as much ground as

635
00:21:12,720 --> 00:21:13,919
possible

636
00:21:13,919 --> 00:21:16,960
in the length of time you have so don't

637
00:21:16,960 --> 00:21:18,720
let that pride of well

638
00:21:18,720 --> 00:21:20,480
i don't need to use this tool because i

639
00:21:20,480 --> 00:21:22,640
can do it manually take priority

640
00:21:22,640 --> 00:21:24,559
um use whatever provides the most value

641
00:21:24,559 --> 00:21:25,840
in your situation

642
00:21:25,840 --> 00:21:27,120
i think learning nmap scripts and

643
00:21:27,120 --> 00:21:30,240
metasploit framework are fantastic

644
00:21:30,240 --> 00:21:32,960
time savers and saves you a lot of

645
00:21:32,960 --> 00:21:35,200
effort

646
00:21:35,919 --> 00:21:38,000
and just one last note on on native

647
00:21:38,000 --> 00:21:39,120
commands

648
00:21:39,120 --> 00:21:40,400
there's often multiple ways to

649
00:21:40,400 --> 00:21:42,240
accomplish a task relying on tooling

650
00:21:42,240 --> 00:21:44,320
means that you have maybe one module or

651
00:21:44,320 --> 00:21:45,679
one thing you can run

652
00:21:45,679 --> 00:21:46,960
but if you look at all of these

653
00:21:46,960 --> 00:21:49,120
different commands these are all

654
00:21:49,120 --> 00:21:50,960
different ways to transfer a file off of

655
00:21:50,960 --> 00:21:52,240
a server and these are just the ones i

656
00:21:52,240 --> 00:21:53,200
could think of in

657
00:21:53,200 --> 00:21:55,280
a couple of minutes of writing slide

658
00:21:55,280 --> 00:21:57,600
there's probably a lot more

659
00:21:57,600 --> 00:21:59,840
and knowing all of these and knowing

660
00:21:59,840 --> 00:22:01,440
different ways to move

661
00:22:01,440 --> 00:22:05,840
um to move files off of a system

662
00:22:05,840 --> 00:22:08,159
gives you options when one fails if scp

663
00:22:08,159 --> 00:22:09,039
fails and that's what you're most

664
00:22:09,039 --> 00:22:10,480
comfortable with there's

665
00:22:10,480 --> 00:22:14,720
15 other ways to do the same thing

666
00:22:18,799 --> 00:22:20,720
so i'd like to go through a few real

667
00:22:20,720 --> 00:22:22,320
real world instances

668
00:22:22,320 --> 00:22:23,760
where i've been able to leverage system

669
00:22:23,760 --> 00:22:26,559
administrator skill sets in pen tests so

670
00:22:26,559 --> 00:22:28,240
none of these use any sort of exploits

671
00:22:28,240 --> 00:22:29,840
it's just built-in commands knowledge of

672
00:22:29,840 --> 00:22:32,879
how systems operate

673
00:22:34,080 --> 00:22:36,000
so this is unfortunately a real scenario

674
00:22:36,000 --> 00:22:37,520
and i know this because this is

675
00:22:37,520 --> 00:22:39,200
a past job that i had this was my

676
00:22:39,200 --> 00:22:41,679
scenario it was a small business about

677
00:22:41,679 --> 00:22:43,600
50 employees

678
00:22:43,600 --> 00:22:45,200
the longtime systems administrator was

679
00:22:45,200 --> 00:22:46,880
fired and i knew he was

680
00:22:46,880 --> 00:22:48,480
going to be let go i was interviewing

681
00:22:48,480 --> 00:22:51,280
for his replacement position

682
00:22:51,280 --> 00:22:53,679
what i didn't know is that i would be

683
00:22:53,679 --> 00:22:54,799
onboarded

684
00:22:54,799 --> 00:22:56,880
the same not only day but pretty much

685
00:22:56,880 --> 00:22:58,080
the same minute that

686
00:22:58,080 --> 00:23:00,559
he was being fired in another room i was

687
00:23:00,559 --> 00:23:02,000
walking into the office he was walking

688
00:23:02,000 --> 00:23:03,919
into a conference room so very awkward

689
00:23:03,919 --> 00:23:06,480
first day

690
00:23:06,640 --> 00:23:09,039
of course this person wasn't happy so

691
00:23:09,039 --> 00:23:10,960
there were no notes documents no network

692
00:23:10,960 --> 00:23:12,080
diagrams

693
00:23:12,080 --> 00:23:13,520
didn't give me credentials when he left

694
00:23:13,520 --> 00:23:16,640
he just walked out of the building so

695
00:23:16,640 --> 00:23:19,520
i'm new to my position brand new company

696
00:23:19,520 --> 00:23:21,039
first day

697
00:23:21,039 --> 00:23:22,799
i'm the network administrator and i have

698
00:23:22,799 --> 00:23:25,039
no way to administer my network

699
00:23:25,039 --> 00:23:28,480
so what do you do at that point

700
00:23:28,880 --> 00:23:31,679
well you hack it so i rebooted his

701
00:23:31,679 --> 00:23:32,880
laptop

702
00:23:32,880 --> 00:23:34,799
put in a password reset cd reset it as

703
00:23:34,799 --> 00:23:36,480
local localhost reset his local admin

704
00:23:36,480 --> 00:23:38,000
password

705
00:23:38,000 --> 00:23:39,919
started looking through folders and

706
00:23:39,919 --> 00:23:41,600
finding some scripts that seem to have

707
00:23:41,600 --> 00:23:43,679
hard coded credentials for a backup exec

708
00:23:43,679 --> 00:23:46,000
user anyone who's ever dealt with backup

709
00:23:46,000 --> 00:23:47,360
exec

710
00:23:47,360 --> 00:23:50,080
can probably attest that the backup exec

711
00:23:50,080 --> 00:23:51,200
user

712
00:23:51,200 --> 00:23:53,760
needs a lot of access um what i've seen

713
00:23:53,760 --> 00:23:55,919
in the past was most people will

714
00:23:55,919 --> 00:23:57,919
fight back at exec for a while trying to

715
00:23:57,919 --> 00:23:59,919
set permissions and then ultimately give

716
00:23:59,919 --> 00:24:01,520
it domain admin permissions call it a

717
00:24:01,520 --> 00:24:02,159
day

718
00:24:02,159 --> 00:24:04,080
so i figured that was a good place to

719
00:24:04,080 --> 00:24:06,640
start and i saw some credentials that

720
00:24:06,640 --> 00:24:08,400
were based on a year so i started

721
00:24:08,400 --> 00:24:09,200
incrementing them

722
00:24:09,200 --> 00:24:11,200
ended up finding one that worked logged

723
00:24:11,200 --> 00:24:12,240
in as backup exec

724
00:24:12,240 --> 00:24:14,000
and found out it was in fact a member of

725
00:24:14,000 --> 00:24:16,400
the domain administrator

726
00:24:16,400 --> 00:24:18,480
so reset the admin password created an

727
00:24:18,480 --> 00:24:19,760
account for myself

728
00:24:19,760 --> 00:24:21,120
found out what was running on that

729
00:24:21,120 --> 00:24:23,200
server that i was on and started

730
00:24:23,200 --> 00:24:24,640
doing some scanning figuring out what

731
00:24:24,640 --> 00:24:26,000
other hosts were on the network what

732
00:24:26,000 --> 00:24:27,279
were they running

733
00:24:27,279 --> 00:24:29,840
um what other users were around what

734
00:24:29,840 --> 00:24:30,960
types of just kind of gaining some

735
00:24:30,960 --> 00:24:32,000
situational awareness

736
00:24:32,000 --> 00:24:34,320
in general and then documenting it all

737
00:24:34,320 --> 00:24:35,760
again this is day one and i need to

738
00:24:35,760 --> 00:24:39,360
figure out what i actually signed on for

739
00:24:40,559 --> 00:24:42,960
but if you look at all of these phases

740
00:24:42,960 --> 00:24:44,159
that's essentially the same as a

741
00:24:44,159 --> 00:24:45,760
penetration test

742
00:24:45,760 --> 00:24:47,679
we have initial access by resetting the

743
00:24:47,679 --> 00:24:49,120
admin password

744
00:24:49,120 --> 00:24:51,120
we have privilege escalation by finding

745
00:24:51,120 --> 00:24:53,360
a user with a higher level of privilege

746
00:24:53,360 --> 00:24:55,600
and then escalating to that we have

747
00:24:55,600 --> 00:24:57,120
persistence by resetting the domain

748
00:24:57,120 --> 00:24:59,760
admin password creating a new account

749
00:24:59,760 --> 00:25:01,520
local enumeration identifying all the

750
00:25:01,520 --> 00:25:02,960
services running

751
00:25:02,960 --> 00:25:04,640
some recon figuring out what else is on

752
00:25:04,640 --> 00:25:06,159
the network and then reporting by

753
00:25:06,159 --> 00:25:08,559
actually documenting everything

754
00:25:08,559 --> 00:25:10,960
and as it turns out taking over a system

755
00:25:10,960 --> 00:25:12,840
is not much different than taking over a

756
00:25:12,840 --> 00:25:15,760
system um you're doing the same things

757
00:25:15,760 --> 00:25:18,880
now compare this to a typical pem test

758
00:25:18,880 --> 00:25:19,600
cycle

759
00:25:19,600 --> 00:25:23,440
life cycle these are out of order

760
00:25:23,440 --> 00:25:25,600
but they're all there we're doing the

761
00:25:25,600 --> 00:25:28,880
same things

762
00:25:28,880 --> 00:25:30,960
so let's look at another one this was a

763
00:25:30,960 --> 00:25:32,720
goal-based pen test with heavy social

764
00:25:32,720 --> 00:25:33,760
engineering

765
00:25:33,760 --> 00:25:36,000
i was asked to phish or wish for initial

766
00:25:36,000 --> 00:25:37,760
access and then pivot off the user

767
00:25:37,760 --> 00:25:38,559
network

768
00:25:38,559 --> 00:25:40,400
get access to a private code repository

769
00:25:40,400 --> 00:25:42,320
on a developer network

770
00:25:42,320 --> 00:25:44,720
this is a very very large software

771
00:25:44,720 --> 00:25:45,520
organization

772
00:25:45,520 --> 00:25:47,600
they're in a bunch of countries tens of

773
00:25:47,600 --> 00:25:48,720
thousands of people

774
00:25:48,720 --> 00:25:51,279
and um extremely security aware right

775
00:25:51,279 --> 00:25:53,200
they undergo anti-social engineering

776
00:25:53,200 --> 00:25:54,559
training and anti-phishing training

777
00:25:54,559 --> 00:25:56,080
quarterly and have to be

778
00:25:56,080 --> 00:25:59,279
certified in it so i was in for

779
00:25:59,279 --> 00:26:02,640
a little bit of a tough time so to set

780
00:26:02,640 --> 00:26:04,480
up the scenario

781
00:26:04,480 --> 00:26:06,159
i had to perform a bunch of tasks before

782
00:26:06,159 --> 00:26:07,919
the engagement started registering

783
00:26:07,919 --> 00:26:10,320
domains for c2 and phishing as youtubing

784
00:26:10,320 --> 00:26:11,279
command and control

785
00:26:11,279 --> 00:26:13,760
and phishing spinning up web servers

786
00:26:13,760 --> 00:26:15,600
spinning up my c2 infrastructure

787
00:26:15,600 --> 00:26:18,799
my redirectors cobalt strike configuring

788
00:26:18,799 --> 00:26:20,320
security groups

789
00:26:20,320 --> 00:26:22,240
mail servers all of these different

790
00:26:22,240 --> 00:26:23,360
things are

791
00:26:23,360 --> 00:26:24,960
tasks that a systems admin is going to

792
00:26:24,960 --> 00:26:26,480
do regularly

793
00:26:26,480 --> 00:26:28,080
right maybe not installing cobalt strike

794
00:26:28,080 --> 00:26:30,080
but installing software on a server that

795
00:26:30,080 --> 00:26:30,559
you've

796
00:26:30,559 --> 00:26:34,080
spun up in aws or gcp or what have you

797
00:26:34,080 --> 00:26:35,520
and configuring it so that everything

798
00:26:35,520 --> 00:26:39,679
flows and everything works

799
00:26:39,679 --> 00:26:42,000
when the scenario actually began i ended

800
00:26:42,000 --> 00:26:44,159
up phishing users for initial access got

801
00:26:44,159 --> 00:26:45,840
some reverse shells found the domain

802
00:26:45,840 --> 00:26:47,039
user that

803
00:26:47,039 --> 00:26:50,640
had pretty decent access and decided to

804
00:26:50,640 --> 00:26:52,960
log into their system start enumerating

805
00:26:52,960 --> 00:26:54,000
again just getting that basic

806
00:26:54,000 --> 00:26:57,120
situational awareness

807
00:26:57,440 --> 00:27:00,559
and found some web servers that were

808
00:27:00,559 --> 00:27:02,080
on that sensitive network that dev

809
00:27:02,080 --> 00:27:03,600
network

810
00:27:03,600 --> 00:27:05,679
so i used rdp and the credentials that i

811
00:27:05,679 --> 00:27:07,039
had

812
00:27:07,039 --> 00:27:09,039
logged in as the user after hours and i

813
00:27:09,039 --> 00:27:10,320
started just browsing to these

814
00:27:10,320 --> 00:27:13,120
internal websites found an out-of-band

815
00:27:13,120 --> 00:27:14,320
management console

816
00:27:14,320 --> 00:27:15,840
in this case they were even dell so it

817
00:27:15,840 --> 00:27:17,679
was idrac if you use hp

818
00:27:17,679 --> 00:27:21,039
it's ilo that same type of thing

819
00:27:21,039 --> 00:27:23,760
has a default password um 10 points if

820
00:27:23,760 --> 00:27:24,480
you know the

821
00:27:24,480 --> 00:27:26,880
i direct default password um which would

822
00:27:26,880 --> 00:27:28,480
be kelvin

823
00:27:28,480 --> 00:27:30,480
and then the admin user was logged into

824
00:27:30,480 --> 00:27:32,320
the console so

825
00:27:32,320 --> 00:27:34,799
the issue with this is console access is

826
00:27:34,799 --> 00:27:36,080
literally console access

827
00:27:36,080 --> 00:27:38,080
if you can log into an out-of-band

828
00:27:38,080 --> 00:27:39,360
console

829
00:27:39,360 --> 00:27:41,520
and the user is already logged in it's

830
00:27:41,520 --> 00:27:43,200
effectively the same as sitting down at

831
00:27:43,200 --> 00:27:44,159
their desk

832
00:27:44,159 --> 00:27:46,559
with an unlocked computer with the

833
00:27:46,559 --> 00:27:47,919
keyboard in front of you and they're

834
00:27:47,919 --> 00:27:48,480
logged in

835
00:27:48,480 --> 00:27:52,000
so now i'm the admin right

836
00:27:52,480 --> 00:27:56,080
so real quick cat bash history and i saw

837
00:27:56,080 --> 00:27:58,080
a database server that i didn't know

838
00:27:58,080 --> 00:28:00,080
existed yet hadn't found it

839
00:28:00,080 --> 00:28:02,000
um on another host and they put the

840
00:28:02,000 --> 00:28:04,559
password in line

841
00:28:04,559 --> 00:28:08,480
so that was easy um ssh to that other

842
00:28:08,480 --> 00:28:09,520
host and that worked

843
00:28:09,520 --> 00:28:12,720
grab etsy shadow cracked it and

844
00:28:12,720 --> 00:28:14,480
noticed that my sequel was running on

845
00:28:14,480 --> 00:28:15,840
the server that i had compromised

846
00:28:15,840 --> 00:28:18,080
initially so i tried that same password

847
00:28:18,080 --> 00:28:20,159
and what do you know there's

848
00:28:20,159 --> 00:28:22,559
code signing keys private and public

849
00:28:22,559 --> 00:28:23,679
code repository

850
00:28:23,679 --> 00:28:26,399
credentials api keys and lateral

851
00:28:26,399 --> 00:28:27,440
movement everywhere

852
00:28:27,440 --> 00:28:30,720
with the same username and password so

853
00:28:30,720 --> 00:28:34,399
that's a lot to get out of

854
00:28:34,399 --> 00:28:38,480
catting one file right nobody wants to

855
00:28:38,480 --> 00:28:40,080
be the organization that has to tell

856
00:28:40,080 --> 00:28:41,840
their investors that the elite hacking

857
00:28:41,840 --> 00:28:44,000
tool that took them down was big cat

858
00:28:44,000 --> 00:28:47,760
but sometimes that's the case

859
00:28:50,640 --> 00:28:52,880
so another scenario here this was kind

860
00:28:52,880 --> 00:28:54,720
of fun in its simplicity

861
00:28:54,720 --> 00:28:56,399
there was a web application that

862
00:28:56,399 --> 00:28:58,240
connected to active directory uh

863
00:28:58,240 --> 00:29:01,360
did authentication over ldap uh the web

864
00:29:01,360 --> 00:29:01,840
app

865
00:29:01,840 --> 00:29:03,840
had domain admin credentials saved in

866
00:29:03,840 --> 00:29:04,880
the config form

867
00:29:04,880 --> 00:29:06,880
but the user that logged in was able to

868
00:29:06,880 --> 00:29:08,320
change the server address that it

869
00:29:08,320 --> 00:29:09,600
pointed to without

870
00:29:09,600 --> 00:29:12,559
entering a password so some of you might

871
00:29:12,559 --> 00:29:15,200
know where this is going already but

872
00:29:15,200 --> 00:29:17,840
we know that ldap is clear text it's not

873
00:29:17,840 --> 00:29:19,600
ldaps

874
00:29:19,600 --> 00:29:22,640
we know that we can control where this

875
00:29:22,640 --> 00:29:24,080
goes where this

876
00:29:24,080 --> 00:29:28,240
credential goes and we know that we can

877
00:29:28,240 --> 00:29:29,840
hit the test button to see if it

878
00:29:29,840 --> 00:29:31,600
connects to ldap

879
00:29:31,600 --> 00:29:33,520
and when there's an ldap query like that

880
00:29:33,520 --> 00:29:35,279
it sends the username and password in

881
00:29:35,279 --> 00:29:35,760
this case

882
00:29:35,760 --> 00:29:38,880
in cleartext to the server so

883
00:29:38,880 --> 00:29:41,760
all we need to do is run slash bin slash

884
00:29:41,760 --> 00:29:42,559
nc

885
00:29:42,559 --> 00:29:44,960
on a server we control change the ldap

886
00:29:44,960 --> 00:29:47,360
server address to our own server

887
00:29:47,360 --> 00:29:50,000
and hit test and sure enough the domain

888
00:29:50,000 --> 00:29:51,520
admin credentials came on over

889
00:29:51,520 --> 00:29:53,360
captured them in clear text and was used

890
00:29:53,360 --> 00:29:56,719
to escalate privileges from there

891
00:29:58,080 --> 00:30:01,440
so this is the last one it was an ubuntu

892
00:30:01,440 --> 00:30:03,039
web server

893
00:30:03,039 --> 00:30:04,880
there was a vulnerable vulnerability in

894
00:30:04,880 --> 00:30:06,159
the app that

895
00:30:06,159 --> 00:30:08,640
let me access the underlying file system

896
00:30:08,640 --> 00:30:10,480
with uh write access so i could write to

897
00:30:10,480 --> 00:30:11,520
files

898
00:30:11,520 --> 00:30:13,200
um i could do this as root because the

899
00:30:13,200 --> 00:30:14,640
application was running as root so

900
00:30:14,640 --> 00:30:15,120
that's

901
00:30:15,120 --> 00:30:17,679
really not good um no interactive

902
00:30:17,679 --> 00:30:19,360
command execution because again i could

903
00:30:19,360 --> 00:30:21,120
just write the files but the great thing

904
00:30:21,120 --> 00:30:23,279
here is it's linux so everything is a

905
00:30:23,279 --> 00:30:24,159
file

906
00:30:24,159 --> 00:30:27,279
a user is basically three lines and

907
00:30:27,279 --> 00:30:29,279
three files that's easy shadow etsy

908
00:30:29,279 --> 00:30:31,200
password and etsy group and if you enter

909
00:30:31,200 --> 00:30:33,120
the right information in each of those

910
00:30:33,120 --> 00:30:34,720
you effectively have created a new user

911
00:30:34,720 --> 00:30:36,640
on that system and you control the

912
00:30:36,640 --> 00:30:38,000
password because you're generating the

913
00:30:38,000 --> 00:30:39,840
hash yourself

914
00:30:39,840 --> 00:30:42,080
so the server was running ssh i went

915
00:30:42,080 --> 00:30:43,679
through modified these three files

916
00:30:43,679 --> 00:30:46,320
ssh into the new server and now i'm on

917
00:30:46,320 --> 00:30:46,960
the server

918
00:30:46,960 --> 00:30:49,600
interactively executing commands and got

919
00:30:49,600 --> 00:30:52,158
root access

920
00:30:57,120 --> 00:30:58,799
so where were the hacking tools in any

921
00:30:58,799 --> 00:31:01,120
of these we didn't really use anything

922
00:31:01,120 --> 00:31:02,000
we

923
00:31:02,000 --> 00:31:04,080
were basically troubleshooting all of

924
00:31:04,080 --> 00:31:05,279
these systems

925
00:31:05,279 --> 00:31:06,799
but with a different perspective and

926
00:31:06,799 --> 00:31:09,200
intending on a different outcome

927
00:31:09,200 --> 00:31:10,960
if we take the penetration testing life

928
00:31:10,960 --> 00:31:13,519
cycle that i showed you a few slides ago

929
00:31:13,519 --> 00:31:15,679
we can reframe that and just ask

930
00:31:15,679 --> 00:31:17,279
questions at each of the steps that

931
00:31:17,279 --> 00:31:18,480
maybe a systems admin

932
00:31:18,480 --> 00:31:21,519
or a network admin would be asking and

933
00:31:21,519 --> 00:31:23,440
we can go through that process so let's

934
00:31:23,440 --> 00:31:24,640
take a look at that again

935
00:31:24,640 --> 00:31:27,679
um recon is just what's on the network

936
00:31:27,679 --> 00:31:29,440
enumeration what's on the server what's

937
00:31:29,440 --> 00:31:31,760
it running initial access how do i log

938
00:31:31,760 --> 00:31:32,240
in

939
00:31:32,240 --> 00:31:35,200
and you can answer that as creatively as

940
00:31:35,200 --> 00:31:36,640
popping in a password reset cd and

941
00:31:36,640 --> 00:31:38,399
rebooting or

942
00:31:38,399 --> 00:31:41,279
brute forcing or what have you but a lot

943
00:31:41,279 --> 00:31:43,200
of different options there

944
00:31:43,200 --> 00:31:45,679
exfiltration um you can ask how do i

945
00:31:45,679 --> 00:31:46,559
back this up

946
00:31:46,559 --> 00:31:49,039
remotely how do i get this off of the

947
00:31:49,039 --> 00:31:49,600
system

948
00:31:49,600 --> 00:31:52,159
with whatever restrictions are in place

949
00:31:52,159 --> 00:31:53,600
persistence how do i make sure i can get

950
00:31:53,600 --> 00:31:55,039
back into the system later

951
00:31:55,039 --> 00:31:56,240
the last thing you want is to gain

952
00:31:56,240 --> 00:31:58,159
access to a system get disconnected and

953
00:31:58,159 --> 00:32:01,760
not be able to have a way to get back in

954
00:32:01,760 --> 00:32:03,120
and then lateral movement what else can

955
00:32:03,120 --> 00:32:05,440
i access from here um when i was in the

956
00:32:05,440 --> 00:32:06,559
first scenario

957
00:32:06,559 --> 00:32:08,960
i had admin on the system that i had

958
00:32:08,960 --> 00:32:09,600
logged into

959
00:32:09,600 --> 00:32:11,519
but i had no idea what the other servers

960
00:32:11,519 --> 00:32:13,279
in the back were doing

961
00:32:13,279 --> 00:32:15,279
so can i move to those other servers and

962
00:32:15,279 --> 00:32:17,840
start enumerating them

963
00:32:17,840 --> 00:32:19,840
and prove ask how do i log in as root

964
00:32:19,840 --> 00:32:21,600
i'm already logged in but how do i log

965
00:32:21,600 --> 00:32:23,840
in as a user with more permissions

966
00:32:23,840 --> 00:32:25,279
and then finally you have the reporting

967
00:32:25,279 --> 00:32:27,840
phase how do i explain this to my boss

968
00:32:27,840 --> 00:32:29,279
or how do i explain this to another

969
00:32:29,279 --> 00:32:31,840
systems admin two different audiences

970
00:32:31,840 --> 00:32:32,960
and they're going to have two different

971
00:32:32,960 --> 00:32:34,960
types of explanations but

972
00:32:34,960 --> 00:32:36,559
that's the same as essentially writing

973
00:32:36,559 --> 00:32:38,159
an executive summary in a report and

974
00:32:38,159 --> 00:32:43,840
writing the technical details

975
00:32:45,200 --> 00:32:47,360
so we'll switch gears a little bit um

976
00:32:47,360 --> 00:32:48,720
talk about making the jump to an

977
00:32:48,720 --> 00:32:50,159
offensive security role

978
00:32:50,159 --> 00:32:52,880
from a system's admin role i'm going to

979
00:32:52,880 --> 00:32:54,000
give you my experience

980
00:32:54,000 --> 00:32:55,679
and things that i've seen that work so

981
00:32:55,679 --> 00:32:58,080
your mileage may vary but

982
00:32:58,080 --> 00:33:00,399
we'll talk about each of these um the

983
00:33:00,399 --> 00:33:01,760
thing i would recommend most is take on

984
00:33:01,760 --> 00:33:04,080
security projects within your role

985
00:33:04,080 --> 00:33:05,519
definitely ask you know work with

986
00:33:05,519 --> 00:33:07,600
security if you have a security team and

987
00:33:07,600 --> 00:33:08,880
talk to them about what you can help

988
00:33:08,880 --> 00:33:10,480
them with but also think about what you

989
00:33:10,480 --> 00:33:12,320
can do within your own role

990
00:33:12,320 --> 00:33:15,039
if you're a systems or network admin

991
00:33:15,039 --> 00:33:16,320
maybe scanning the network

992
00:33:16,320 --> 00:33:18,559
for systems and services and seeing if

993
00:33:18,559 --> 00:33:20,720
anything new pops up or if anything

994
00:33:20,720 --> 00:33:23,600
is running older software older services

995
00:33:23,600 --> 00:33:24,640
remediating that

996
00:33:24,640 --> 00:33:28,080
that's a security issue right um

997
00:33:28,080 --> 00:33:30,559
inventory is asset inventory is maybe

998
00:33:30,559 --> 00:33:32,159
the most boring thing you could possibly

999
00:33:32,159 --> 00:33:33,440
do in technology but

1000
00:33:33,440 --> 00:33:34,640
in security it's one of the most

1001
00:33:34,640 --> 00:33:38,000
important i can't tell you how many pen

1002
00:33:38,000 --> 00:33:38,640
tests

1003
00:33:38,640 --> 00:33:40,880
uh red team operations and bug bounties

1004
00:33:40,880 --> 00:33:41,919
i've seen

1005
00:33:41,919 --> 00:33:44,240
started off with somebody discovering a

1006
00:33:44,240 --> 00:33:45,440
system that

1007
00:33:45,440 --> 00:33:48,240
the it team had forgotten about and

1008
00:33:48,240 --> 00:33:50,080
hadn't patched hadn't hardened didn't

1009
00:33:50,080 --> 00:33:51,120
even know was there until the

1010
00:33:51,120 --> 00:33:54,399
vulnerability report came in

1011
00:33:55,120 --> 00:33:57,200
autumn account access look at your file

1012
00:33:57,200 --> 00:33:59,039
shares see who has access to what

1013
00:33:59,039 --> 00:34:01,039
look and see if you can anonymously log

1014
00:34:01,039 --> 00:34:02,480
into sensitive shares

1015
00:34:02,480 --> 00:34:05,200
that's things that penetration testers

1016
00:34:05,200 --> 00:34:06,720
are gonna do regularly

1017
00:34:06,720 --> 00:34:08,239
looking for hard-coded passwords and

1018
00:34:08,239 --> 00:34:09,760
scripts and in files again

1019
00:34:09,760 --> 00:34:12,320
super common um scripts are usually

1020
00:34:12,320 --> 00:34:14,480
stored on a network share so

1021
00:34:14,480 --> 00:34:17,520
leverage number two with number three

1022
00:34:17,520 --> 00:34:19,119
and then test deployed application for

1023
00:34:19,119 --> 00:34:20,960
default passwords if you went through

1024
00:34:20,960 --> 00:34:22,480
your network and found every web

1025
00:34:22,480 --> 00:34:23,760
interface and just typed in

1026
00:34:23,760 --> 00:34:26,639
admin admin and admin password you would

1027
00:34:26,639 --> 00:34:27,119
probably

1028
00:34:27,119 --> 00:34:29,520
be surprised what you find a number of

1029
00:34:29,520 --> 00:34:31,520
applications that i've gained access to

1030
00:34:31,520 --> 00:34:34,000
were using default threads that would

1031
00:34:34,000 --> 00:34:35,599
make a attacker's life

1032
00:34:35,599 --> 00:34:36,879
much more difficult if you were the

1033
00:34:36,879 --> 00:34:38,480
network admin of the system's admin

1034
00:34:38,480 --> 00:34:39,359
finding that first

1035
00:34:39,359 --> 00:34:42,399
and fixing that first

1036
00:34:42,719 --> 00:34:44,639
you can even kind of pick the jump to

1037
00:34:44,639 --> 00:34:46,800
offense starting in technical support

1038
00:34:46,800 --> 00:34:48,800
look at phishing campaign reports and

1039
00:34:48,800 --> 00:34:50,800
look at the evidence

1040
00:34:50,800 --> 00:34:52,879
look at what phishing messages make it

1041
00:34:52,879 --> 00:34:54,639
through your your security controls

1042
00:34:54,639 --> 00:34:55,359
versus

1043
00:34:55,359 --> 00:34:56,399
what do not make it through your

1044
00:34:56,399 --> 00:34:59,359
security controls having that insight

1045
00:34:59,359 --> 00:35:01,040
helps tremendously when you're tuning

1046
00:35:01,040 --> 00:35:02,960
the controls themselves but

1047
00:35:02,960 --> 00:35:04,400
also when you're generating phishing

1048
00:35:04,400 --> 00:35:07,280
campaigns on your own

1049
00:35:07,280 --> 00:35:09,359
when you get a system in look at the

1050
00:35:09,359 --> 00:35:10,800
user account and see if it's over

1051
00:35:10,800 --> 00:35:11,359
privileged

1052
00:35:11,359 --> 00:35:14,240
see if it's in a maybe a security role

1053
00:35:14,240 --> 00:35:17,760
or security group for a previous role

1054
00:35:17,760 --> 00:35:20,000
use your position to deep dive into

1055
00:35:20,000 --> 00:35:21,680
system tools i mentioned earlier that if

1056
00:35:21,680 --> 00:35:23,280
you can avoid just

1057
00:35:23,280 --> 00:35:26,880
wiping the system and restoring it

1058
00:35:26,880 --> 00:35:28,960
you can really gain some insight into

1059
00:35:28,960 --> 00:35:30,640
how the underlying systems work and how

1060
00:35:30,640 --> 00:35:33,599
the different tools on board work

1061
00:35:33,599 --> 00:35:37,200
and i mentioned that asset inventory was

1062
00:35:37,200 --> 00:35:38,000
the most

1063
00:35:38,000 --> 00:35:40,079
boring thing in security the second most

1064
00:35:40,079 --> 00:35:41,200
boring is probably building out

1065
00:35:41,200 --> 00:35:42,800
documents and procedures but

1066
00:35:42,800 --> 00:35:44,240
it's also one of the most important

1067
00:35:44,240 --> 00:35:45,760
being able to replicate something

1068
00:35:45,760 --> 00:35:47,200
consistently

1069
00:35:47,200 --> 00:35:49,839
very very important in security and

1070
00:35:49,839 --> 00:35:51,599
having documentation

1071
00:35:51,599 --> 00:35:53,839
also is important for being able to show

1072
00:35:53,839 --> 00:35:55,520
that you know how to write

1073
00:35:55,520 --> 00:35:57,520
the first pen test job i ever got the

1074
00:35:57,520 --> 00:35:58,800
interviewer asked me for a writing

1075
00:35:58,800 --> 00:35:59,599
sample

1076
00:35:59,599 --> 00:36:01,040
and being able to provide a document

1077
00:36:01,040 --> 00:36:02,079
that i had written the technical

1078
00:36:02,079 --> 00:36:03,599
document is one of the things that

1079
00:36:03,599 --> 00:36:06,480
helped me get that job

1080
00:36:10,000 --> 00:36:13,200
but how do you do this without actually

1081
00:36:13,200 --> 00:36:15,440
going through the steps and lapping out

1082
00:36:15,440 --> 00:36:16,800
some of the situations that you would

1083
00:36:16,800 --> 00:36:18,480
find

1084
00:36:18,480 --> 00:36:20,000
there's a ton of premium offerings you

1085
00:36:20,000 --> 00:36:22,400
can find for lab environments to

1086
00:36:22,400 --> 00:36:24,560
do penetration testing kind of practice

1087
00:36:24,560 --> 00:36:26,480
or learning the ropes

1088
00:36:26,480 --> 00:36:28,000
offensive security proving grounds are a

1089
00:36:28,000 --> 00:36:30,400
great one hack the box try hack me

1090
00:36:30,400 --> 00:36:32,640
um i believe hack the box has a free

1091
00:36:32,640 --> 00:36:34,720
version as well as does try hackney but

1092
00:36:34,720 --> 00:36:36,800
there's other free resources you can

1093
00:36:36,800 --> 00:36:39,200
download virtualbox or vmware

1094
00:36:39,200 --> 00:36:41,359
download some linux isos and some trial

1095
00:36:41,359 --> 00:36:43,839
images of windows servers

1096
00:36:43,839 --> 00:36:47,440
just set up your own environment

1097
00:36:47,440 --> 00:36:49,440
for cloud cloud is huge right now any

1098
00:36:49,440 --> 00:36:51,119
experience working in aws

1099
00:36:51,119 --> 00:36:54,079
azure gcp is going to be huge on when

1100
00:36:54,079 --> 00:36:55,520
you're making the move to offensive

1101
00:36:55,520 --> 00:36:56,320
security

1102
00:36:56,320 --> 00:36:58,880
looks great on your resume and all of

1103
00:36:58,880 --> 00:37:00,560
those services give out a certain amount

1104
00:37:00,560 --> 00:37:02,720
of free time in the cloud so

1105
00:37:02,720 --> 00:37:05,359
i think aws does like 12 months of free

1106
00:37:05,359 --> 00:37:06,320
micro service

1107
00:37:06,320 --> 00:37:08,320
azure does a hundred dollars for the

1108
00:37:08,320 --> 00:37:09,520
first year or something along those

1109
00:37:09,520 --> 00:37:10,320
lines so

1110
00:37:10,320 --> 00:37:12,640
leverage that use the free trials and

1111
00:37:12,640 --> 00:37:14,720
the free credits available to you

1112
00:37:14,720 --> 00:37:17,680
and spin up some servers you've also got

1113
00:37:17,680 --> 00:37:19,440
intentionally vulnerable systems vuln

1114
00:37:19,440 --> 00:37:20,240
hub

1115
00:37:20,240 --> 00:37:21,760
hack the box metasploitable those all

1116
00:37:21,760 --> 00:37:23,280
have walkthroughs available you can look

1117
00:37:23,280 --> 00:37:25,040
at either online

1118
00:37:25,040 --> 00:37:27,520
youtube or on individual blogger pages i

1119
00:37:27,520 --> 00:37:28,960
have a resource page coming up that

1120
00:37:28,960 --> 00:37:30,880
lists some of those out

1121
00:37:30,880 --> 00:37:32,800
and finally just unpatched windows and

1122
00:37:32,800 --> 00:37:34,880
linux systems throw a old xp

1123
00:37:34,880 --> 00:37:37,200
box on your network don't patch it and

1124
00:37:37,200 --> 00:37:38,400
see how many different ways you can

1125
00:37:38,400 --> 00:37:40,880
export it

1126
00:37:42,000 --> 00:37:44,320
in terms of exploits read about them

1127
00:37:44,320 --> 00:37:45,839
understand how they work

1128
00:37:45,839 --> 00:37:48,960
lab them out install a vulnerable piece

1129
00:37:48,960 --> 00:37:50,240
of software and then

1130
00:37:50,240 --> 00:37:52,720
change some things change some variables

1131
00:37:52,720 --> 00:37:55,520
uh for ms 1701 out the eternal blue

1132
00:37:55,520 --> 00:37:57,599
exploit try disabling smb1

1133
00:37:57,599 --> 00:37:59,599
try disabling it entirely firewall it

1134
00:37:59,599 --> 00:38:01,359
off enable defender

1135
00:38:01,359 --> 00:38:03,280
look at these different things and

1136
00:38:03,280 --> 00:38:05,200
determine how does it look

1137
00:38:05,200 --> 00:38:07,520
on the attack side what what responses

1138
00:38:07,520 --> 00:38:09,520
do your payloads and your

1139
00:38:09,520 --> 00:38:11,200
exploits give you and how does that

1140
00:38:11,200 --> 00:38:12,720
change as you go through each piece

1141
00:38:12,720 --> 00:38:13,920
that'll help you later

1142
00:38:13,920 --> 00:38:15,520
kind of infer what's going on on the

1143
00:38:15,520 --> 00:38:17,119
other end when you're doing a zero

1144
00:38:17,119 --> 00:38:18,000
knowledge penetration

1145
00:38:18,000 --> 00:38:20,240
test

1146
00:38:21,440 --> 00:38:23,839
and then lastly consider reframing your

1147
00:38:23,839 --> 00:38:25,520
resume but be honest because

1148
00:38:25,520 --> 00:38:27,040
interviewers will know when you're just

1149
00:38:27,040 --> 00:38:28,960
pulling their leg um

1150
00:38:28,960 --> 00:38:30,640
but you can change some things around to

1151
00:38:30,640 --> 00:38:32,079
be more

1152
00:38:32,079 --> 00:38:34,079
security focused so instead of creating

1153
00:38:34,079 --> 00:38:35,680
system inventory scripts tell them you

1154
00:38:35,680 --> 00:38:37,040
built out a procedure for detecting

1155
00:38:37,040 --> 00:38:38,400
these systems on the network tell them

1156
00:38:38,400 --> 00:38:39,359
what you enumerated

1157
00:38:39,359 --> 00:38:41,440
what you did from there who you reported

1158
00:38:41,440 --> 00:38:42,800
it to or how you handled

1159
00:38:42,800 --> 00:38:45,920
remediation instead of just saying you

1160
00:38:45,920 --> 00:38:47,599
administered active directory say that

1161
00:38:47,599 --> 00:38:48,079
you

1162
00:38:48,079 --> 00:38:49,599
created group policies you managed

1163
00:38:49,599 --> 00:38:51,200
security groups you audited account

1164
00:38:51,200 --> 00:38:52,560
access again all things that are really

1165
00:38:52,560 --> 00:38:55,040
important to the security role

1166
00:38:55,040 --> 00:38:56,480
and finally if you're at a smaller shop

1167
00:38:56,480 --> 00:38:58,160
and you're responsible for

1168
00:38:58,160 --> 00:39:02,800
running let's say qualis what have you

1169
00:39:02,800 --> 00:39:04,480
talk about configuring the jobs talk

1170
00:39:04,480 --> 00:39:06,320
about reporting the findings and how you

1171
00:39:06,320 --> 00:39:08,079
manually verified or if you manually

1172
00:39:08,079 --> 00:39:10,240
verified how you handled remediation how

1173
00:39:10,240 --> 00:39:11,520
you passed all that off

1174
00:39:11,520 --> 00:39:13,119
it's all really important and it's the

1175
00:39:13,119 --> 00:39:15,200
type of thing that offensive security

1176
00:39:15,200 --> 00:39:18,160
professionals do every day

1177
00:39:19,440 --> 00:39:21,520
and then finally just some resources i

1178
00:39:21,520 --> 00:39:22,560
will post the

1179
00:39:22,560 --> 00:39:25,200
slides on twitter after the talk so

1180
00:39:25,200 --> 00:39:27,200
you're welcome to grab the slides and

1181
00:39:27,200 --> 00:39:30,640
take a look at some of these resources

1182
00:39:31,359 --> 00:39:32,880
and that's it i really appreciate

1183
00:39:32,880 --> 00:39:35,359
everybody spending your saturday with me

1184
00:39:35,359 --> 00:39:37,520
and discussing systems administration

1185
00:39:37,520 --> 00:39:39,599
i've got a couple of minutes left so if

1186
00:39:39,599 --> 00:39:42,800
there's any questions i'm happy to take

1187
00:39:42,800 --> 00:39:46,000
thank you so much jamie great insight

1188
00:39:46,000 --> 00:39:48,720
and with one question here it's asking

1189
00:39:48,720 --> 00:39:49,040
do

1190
00:39:49,040 --> 00:39:51,040
do you think that the demand for blue

1191
00:39:51,040 --> 00:39:52,960
team staff

1192
00:39:52,960 --> 00:39:55,760
will outpace that for red team in the

1193
00:39:55,760 --> 00:39:56,960
industry

1194
00:39:56,960 --> 00:40:00,160
and you know we always hear about the

1195
00:40:00,160 --> 00:40:02,480
technology skills shortage and and the

1196
00:40:02,480 --> 00:40:03,839
likes but it seems to be a little bit

1197
00:40:03,839 --> 00:40:06,560
asymmetric the demand seems to be more

1198
00:40:06,560 --> 00:40:09,599
for blue team and if you think that is

1199
00:40:09,599 --> 00:40:11,359
the case do you think purple team is the

1200
00:40:11,359 --> 00:40:13,759
future

1201
00:40:13,839 --> 00:40:15,440
sure so i think there's always going to

1202
00:40:15,440 --> 00:40:17,760
be a need for blue team and for red team

1203
00:40:17,760 --> 00:40:18,079
um

1204
00:40:18,079 --> 00:40:19,839
i think of it kind of like as a as a

1205
00:40:19,839 --> 00:40:21,280
boxing match right you've always got the

1206
00:40:21,280 --> 00:40:22,480
person that's doing the boxing but

1207
00:40:22,480 --> 00:40:23,680
you've also got the trainers and you've

1208
00:40:23,680 --> 00:40:24,960
got the people that are standing in the

1209
00:40:24,960 --> 00:40:26,000
ring and they're

1210
00:40:26,000 --> 00:40:27,359
they're helping them get better that's

1211
00:40:27,359 --> 00:40:29,680
kind of what i see the the red team

1212
00:40:29,680 --> 00:40:32,160
and the uh offensive side doing is

1213
00:40:32,160 --> 00:40:32,960
really helping

1214
00:40:32,960 --> 00:40:34,560
the blue team understand what the

1215
00:40:34,560 --> 00:40:35,920
attacks look like from a practical

1216
00:40:35,920 --> 00:40:36,720
aspect

1217
00:40:36,720 --> 00:40:38,720
in the real world i think there's

1218
00:40:38,720 --> 00:40:40,319
definitely a need for both and i think

1219
00:40:40,319 --> 00:40:42,400
honestly folks that are good at red

1220
00:40:42,400 --> 00:40:44,319
teaming have done some sort of blue team

1221
00:40:44,319 --> 00:40:44,800
before

1222
00:40:44,800 --> 00:40:46,720
whether that be sock work or systems

1223
00:40:46,720 --> 00:40:48,000
administration

1224
00:40:48,000 --> 00:40:49,760
knowing both sides of it gives you a

1225
00:40:49,760 --> 00:40:51,440
tremendous leg up

1226
00:40:51,440 --> 00:40:53,280
i think there's a ton of value in purple

1227
00:40:53,280 --> 00:40:55,119
teaming and i think that we'll start

1228
00:40:55,119 --> 00:40:57,280
seeing that even more than we are now

1229
00:40:57,280 --> 00:41:00,160
um doing purple team exercises in

1230
00:41:00,160 --> 00:41:01,280
addition to doing

1231
00:41:01,280 --> 00:41:03,200
like the zero knowledge red team tests

1232
00:41:03,200 --> 00:41:05,520
or doing penetration tests

1233
00:41:05,520 --> 00:41:08,000
it really levels up your defenders and

1234
00:41:08,000 --> 00:41:09,359
helps them understand what they're going

1235
00:41:09,359 --> 00:41:10,560
to see and what they should be seeing

1236
00:41:10,560 --> 00:41:12,480
but in a way where they can ask directly

1237
00:41:12,480 --> 00:41:13,920
and say was this you

1238
00:41:13,920 --> 00:41:16,480
um is this specific ioc something we

1239
00:41:16,480 --> 00:41:17,680
should look out for

1240
00:41:17,680 --> 00:41:19,200
and it also helps your red team because

1241
00:41:19,200 --> 00:41:20,960
now they know what types of defenses and

1242
00:41:20,960 --> 00:41:24,079
detections are available

1243
00:41:27,440 --> 00:41:30,720
so hope that answered the question

1244
00:41:31,760 --> 00:41:32,839
yeah i don't think there's any more

1245
00:41:32,839 --> 00:41:35,680
questions and

1246
00:41:35,680 --> 00:41:38,000
yes so um yeah there's no more questions

1247
00:41:38,000 --> 00:41:39,119
there so appreciate that

1248
00:41:39,119 --> 00:41:40,240
and thank you very much for your time

1249
00:41:40,240 --> 00:41:42,240
today

1250
00:41:42,240 --> 00:41:43,680
great thank you very much and i hope

1251
00:41:43,680 --> 00:41:44,880
everyone enjoys the rest of the

1252
00:41:44,880 --> 00:41:46,480
conference

1253
00:41:46,480 --> 00:41:49,839
thank you

