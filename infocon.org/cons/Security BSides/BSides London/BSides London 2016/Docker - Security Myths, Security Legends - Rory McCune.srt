1
00:00:00,000 --> 00:00:05,100
okay<font color="#CCCCCC"> uh afternoon</font><font color="#E5E5E5"> everyone um welcome</font>

2
00:00:02,879 --> 00:00:06,629
<font color="#E5E5E5">homes last talk of the day I quite see</font>

3
00:00:05,100 --> 00:00:10,440
Cooper still here and still awake and

4
00:00:06,629 --> 00:00:11,670
not drunk um quick sure hands I guess if

5
00:00:10,440 --> 00:00:15,680
<font color="#CCCCCC">you'll have heard a doctor heard a</font>

6
00:00:11,670 --> 00:00:18,390
docker use docker written the dockerfile

7
00:00:15,680 --> 00:00:20,160
<font color="#E5E5E5">okay so got a good variety I first</font>

8
00:00:18,390 --> 00:00:23,970
encountered docker is about two years

9
00:00:20,160 --> 00:00:25,410
<font color="#E5E5E5">ago now in 2014 early 2014 customer</font>

10
00:00:23,970 --> 00:00:27,990
asked me to do a security architecture

11
00:00:25,410 --> 00:00:29,310
review and they said in where whereas

12
00:00:27,990 --> 00:00:31,019
expectancy virtual machines they had

13
00:00:29,310 --> 00:00:33,660
this docker thing so I thought what I

14
00:00:31,019 --> 00:00:35,219
hell's that and<font color="#E5E5E5"> I googled it and it was</font>

15
00:00:33,660 --> 00:00:36,449
<font color="#E5E5E5">a really easy review for me because I</font>

16
00:00:35,219 --> 00:00:38,850
went to doctors<font color="#E5E5E5"> home page and they said</font>

17
00:00:36,450 --> 00:00:43,020
under heavy development do not use in

18
00:00:38,850 --> 00:00:44,370
production free finding great but I

19
00:00:43,020 --> 00:00:46,200
thought to myself<font color="#E5E5E5"> oh hang on if this is</font>

20
00:00:44,370 --> 00:00:47,788
so cool obviously people are using this

21
00:00:46,200 --> 00:00:49,140
thing<font color="#CCCCCC"> even though it's like</font><font color="#E5E5E5"> you know not</font>

22
00:00:47,789 --> 00:00:50,700
even in production so why is<font color="#E5E5E5"> this so</font>

23
00:00:49,140 --> 00:00:52,230
cool why do people want to<font color="#CCCCCC"> use it and</font>

24
00:00:50,700 --> 00:00:54,300
that got<font color="#CCCCCC"> me into looking at daughter and</font>

25
00:00:52,230 --> 00:00:56,250
it's kind<font color="#CCCCCC"> of where this talk came from</font>

26
00:00:54,300 --> 00:00:57,930
is from my explorations around darker

27
00:00:56,250 --> 00:01:01,649
and I'm wife found out about it over the

28
00:00:57,930 --> 00:01:03,989
<font color="#E5E5E5">last couple of years so implicit or</font>

29
00:01:01,649 --> 00:01:06,060
about<font color="#E5E5E5"> me I've been</font><font color="#CCCCCC"> in information IT</font>

30
00:01:03,989 --> 00:01:08,640
security for X years where<font color="#E5E5E5"> X is a number</font>

31
00:01:06,060 --> 00:01:11,220
i don't want to talk about x-men's five

32
00:01:08,640 --> 00:01:14,670
in security testing and<font color="#CCCCCC"> I'm currently</font><font color="#E5E5E5"> a</font>

33
00:01:11,220 --> 00:01:16,439
managing consultant at ncc group as I'm

34
00:01:14,670 --> 00:01:19,619
a pen tester that means I get to work

35
00:01:16,439 --> 00:01:21,000
<font color="#E5E5E5">from home</font><font color="#CCCCCC"> so I get</font><font color="#E5E5E5"> to live here which is</font>

36
00:01:19,619 --> 00:01:22,770
locked oil head in Scottish Highlands

37
00:01:21,000 --> 00:01:26,369
which is<font color="#CCCCCC"> very nice bull to the year when</font>

38
00:01:22,770 --> 00:01:29,369
<font color="#CCCCCC">the midges aren't here so or are we</font>

39
00:01:26,369 --> 00:01:30,420
<font color="#E5E5E5">going to talk about today um this kind</font>

40
00:01:29,369 --> 00:01:32,310
of three years the stock is going<font color="#E5E5E5"> to</font>

41
00:01:30,420 --> 00:01:33,540
talk of three<font color="#E5E5E5"> parts the first part is</font>

42
00:01:32,310 --> 00:01:35,369
kind of<font color="#CCCCCC"> doctor introduction because</font>

43
00:01:33,540 --> 00:01:37,229
although lots<font color="#E5E5E5"> of people are talking</font>

44
00:01:35,369 --> 00:01:39,299
<font color="#E5E5E5">about</font><font color="#CCCCCC"> it and a lot company saying doctor</font>

45
00:01:37,229 --> 00:01:40,920
dr. Tophet containers containers there's

46
00:01:39,299 --> 00:01:42,720
not<font color="#E5E5E5"> necessarily a lot of information</font>

47
00:01:40,920 --> 00:01:44,100
about<font color="#E5E5E5"> how exactly it works and how what</font>

48
00:01:42,720 --> 00:01:45,630
you do with it how it all put together

49
00:01:44,100 --> 00:01:48,360
and some of the terminology is a bit big

50
00:01:45,630 --> 00:01:50,070
so we'll do about that container

51
00:01:48,360 --> 00:01:51,420
security so obviously going to<font color="#E5E5E5"> talk</font>

52
00:01:50,070 --> 00:01:53,008
about how this is actually secured how

53
00:01:51,420 --> 00:01:55,020
does it do what it does how does it

54
00:01:53,009 --> 00:01:57,450
<font color="#E5E5E5">actually work and then I want</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> take a</font>

55
00:01:55,020 --> 00:01:59,100
bit of kind of practical look like an

56
00:01:57,450 --> 00:02:00,479
attacker and defender of you so if

57
00:01:59,100 --> 00:02:01,949
you're a pen tester you come across<font color="#E5E5E5"> doc</font>

58
00:02:00,479 --> 00:02:03,780
or what do you want to do if you're

59
00:02:01,950 --> 00:02:08,190
trying to secure darker how do you want

60
00:02:03,780 --> 00:02:09,720
to do that<font color="#CCCCCC"> as well so background</font>

61
00:02:08,190 --> 00:02:11,579
introduction if you don't know<font color="#E5E5E5"> this</font>

62
00:02:09,720 --> 00:02:13,359
<font color="#E5E5E5">started in 2013 this is a relatively</font>

63
00:02:11,580 --> 00:02:15,580
young<font color="#E5E5E5"> piece</font><font color="#CCCCCC"> of software but</font>

64
00:02:13,360 --> 00:02:18,100
really active so their main code bases

65
00:02:15,580 --> 00:02:19,300
got 25,000 commits and I've been<font color="#E5E5E5"> doing</font>

66
00:02:18,100 --> 00:02:21,370
<font color="#CCCCCC">this talk for six months and I've</font>

67
00:02:19,300 --> 00:02:24,880
upgraded that number of about 3,000 so

68
00:02:21,370 --> 00:02:27,720
they're going really quickly there's a

69
00:02:24,880 --> 00:02:30,490
<font color="#CCCCCC">lot of big tech company interest in this</font>

70
00:02:27,720 --> 00:02:31,930
IBM have got services running on it and

71
00:02:30,490 --> 00:02:34,030
commit I've got<font color="#E5E5E5"> people who work</font>

72
00:02:31,930 --> 00:02:37,510
full-time on it Microsoft are actually

73
00:02:34,030 --> 00:02:39,040
writing essentially integrating doctrine

74
00:02:37,510 --> 00:02:40,780
to Windows Server 2016 so when you get

75
00:02:39,040 --> 00:02:42,370
Windows Server 2016 you can run windows

76
00:02:40,780 --> 00:02:43,720
containers I'm going<font color="#E5E5E5"> to cover that here</font>

77
00:02:42,370 --> 00:02:44,950
but<font color="#E5E5E5"> there are since you're writing a</font>

78
00:02:43,720 --> 00:02:46,959
whole<font color="#E5E5E5"> lot of stuff to make that work</font><font color="#CCCCCC"> and</font>

79
00:02:44,950 --> 00:02:48,940
contributing loads and if you go to

80
00:02:46,959 --> 00:02:50,740
people like sewer or Amazon Web Services

81
00:02:48,940 --> 00:02:52,480
or google cloud services they've all got

82
00:02:50,740 --> 00:02:54,130
container services right so they'll tell

83
00:02:52,480 --> 00:02:57,910
you that they'll have you can deploy

84
00:02:54,130 --> 00:02:59,290
containers on their clout and its own

85
00:02:57,910 --> 00:03:02,020
yeah it's involved in container ization

86
00:02:59,290 --> 00:03:03,700
software in a variety of ways so the

87
00:03:02,020 --> 00:03:07,030
first<font color="#CCCCCC"> thing to kind of cover is well</font>

88
00:03:03,700 --> 00:03:08,738
what is a container right so so what why

89
00:03:07,030 --> 00:03:10,750
and<font color="#E5E5E5"> I was going to use an analogy I</font>

90
00:03:08,739 --> 00:03:12,850
thought a bit of a user quick analogy of

91
00:03:10,750 --> 00:03:14,770
Goldilocks and the three bears so think

92
00:03:12,850 --> 00:03:16,359
about the gold<font color="#CCCCCC"> l2 the three bears she</font>

93
00:03:14,770 --> 00:03:18,940
had our porridge that was too cold to

94
00:03:16,360 --> 00:03:19,989
hot and just a bit right if you think

95
00:03:18,940 --> 00:03:21,820
about how<font color="#CCCCCC"> we used to run or how we</font>

96
00:03:19,989 --> 00:03:24,549
traditionally run processes on<font color="#E5E5E5"> Linux</font>

97
00:03:21,820 --> 00:03:27,010
when you run a process on Linux you run

98
00:03:24,549 --> 00:03:28,930
it as the as a user and it has all the

99
00:03:27,010 --> 00:03:30,579
<font color="#E5E5E5">rights of the invoking user so if you</font>

100
00:03:28,930 --> 00:03:33,459
run it as root the process has<font color="#CCCCCC"> the</font>

101
00:03:30,580 --> 00:03:34,900
<font color="#E5E5E5">rights of root if it this behaves if it</font>

102
00:03:33,459 --> 00:03:36,430
does something it shouldn't do it does

103
00:03:34,900 --> 00:03:38,560
it with the<font color="#E5E5E5"> rights of root and it could</font>

104
00:03:36,430 --> 00:03:40,239
do bad things that<font color="#E5E5E5"> I would argue is too</font>

105
00:03:38,560 --> 00:03:42,130
cold from an isolation point of view

106
00:03:40,239 --> 00:03:43,900
it's not enough isolation so a lot of

107
00:03:42,130 --> 00:03:45,549
people<font color="#E5E5E5"> say well</font><font color="#CCCCCC"> that's bad and we're</font>

108
00:03:43,900 --> 00:03:47,260
running<font color="#CCCCCC"> servers are</font><font color="#E5E5E5"> running services we</font>

109
00:03:45,549 --> 00:03:49,480
were going to isolate everything we'll

110
00:03:47,260 --> 00:03:51,640
put them on separate<font color="#E5E5E5"> VMs or maybe even</font>

111
00:03:49,480 --> 00:03:53,440
separate physical servers so there<font color="#E5E5E5"> you</font>

112
00:03:51,640 --> 00:03:54,820
get<font color="#E5E5E5"> a lot of isolation each processor</font>

113
00:03:53,440 --> 00:03:57,579
each application service has its own

114
00:03:54,820 --> 00:03:58,750
full operating system stack and<font color="#E5E5E5"> it's</font>

115
00:03:57,580 --> 00:04:01,269
maybe even got<font color="#E5E5E5"> its own</font><font color="#CCCCCC"> Hardware</font>

116
00:03:58,750 --> 00:04:03,280
definitely own virtual hardware<font color="#CCCCCC"> Oh with</font>

117
00:04:01,269 --> 00:04:05,080
that<font color="#CCCCCC"> goes Partlow of overhead both in</font>

118
00:04:03,280 --> 00:04:06,489
terms of performance and in terms of

119
00:04:05,080 --> 00:04:08,769
manageability you've got to manage all

120
00:04:06,489 --> 00:04:11,110
those operating system instances so that

121
00:04:08,769 --> 00:04:13,239
can maybe too hot in terms of how<font color="#E5E5E5"> much</font>

122
00:04:11,110 --> 00:04:15,340
isolation is too much isolation and so

123
00:04:13,239 --> 00:04:17,890
the<font color="#CCCCCC"> idea of containerization is you take</font>

124
00:04:15,340 --> 00:04:20,260
a middle path you have<font color="#CCCCCC"> one open system</font>

125
00:04:17,890 --> 00:04:22,690
kernel and everything runs off<font color="#CCCCCC"> that but</font>

126
00:04:20,260 --> 00:04:25,180
<font color="#E5E5E5">you have isolation that sits there and</font>

127
00:04:22,690 --> 00:04:26,800
manages to isolate each individual

128
00:04:25,180 --> 00:04:27,250
application process so they can't

129
00:04:26,800 --> 00:04:28,450
interfere

130
00:04:27,250 --> 00:04:29,770
with each other but you get all<font color="#E5E5E5"> the</font>

131
00:04:28,450 --> 00:04:31,240
performance of not having to have

132
00:04:29,770 --> 00:04:34,900
different<font color="#E5E5E5"> free ends or different</font>

133
00:04:31,240 --> 00:04:38,400
physical hardware that's<font color="#E5E5E5"> the idea this</font>

134
00:04:34,900 --> 00:04:40,810
isn't new it's in no way in you so I

135
00:04:38,400 --> 00:04:42,909
Linux containerization has been<font color="#E5E5E5"> around</font>

136
00:04:40,810 --> 00:04:45,430
<font color="#CCCCCC">since the 80s churu I mean everyone who</font>

137
00:04:42,910 --> 00:04:48,040
if you use Linux you come across chroot

138
00:04:45,430 --> 00:04:49,180
jails so they presented our isolated

139
00:04:48,040 --> 00:04:50,740
view of the file system and that<font color="#E5E5E5"> was the</font>

140
00:04:49,180 --> 00:04:53,320
first kind<font color="#E5E5E5"> of containerization and since</font>

141
00:04:50,740 --> 00:04:55,630
then there have been a variety of things

142
00:04:53,320 --> 00:04:58,659
that look to that like openvz freebsd

143
00:04:55,630 --> 00:04:59,800
jail are zones and lxc and the argument

144
00:04:58,660 --> 00:05:01,630
might come<font color="#CCCCCC"> a</font><font color="#E5E5E5"> why's everyone so</font>

145
00:04:59,800 --> 00:05:04,210
interested in this now this<font color="#CCCCCC"> isn't new in</font>

146
00:05:01,630 --> 00:05:05,440
any way<font color="#CCCCCC"> shape or form so I cannot in</font>

147
00:05:04,210 --> 00:05:07,599
from from my point of view for my

148
00:05:05,440 --> 00:05:09,610
<font color="#E5E5E5">looking at it it's really a couple of</font>

149
00:05:07,600 --> 00:05:11,020
<font color="#CCCCCC">things darker</font><font color="#E5E5E5"> let should be portable</font>

150
00:05:09,610 --> 00:05:13,090
right so one of the big<font color="#CCCCCC"> problems of</font>

151
00:05:11,020 --> 00:05:14,560
application development is<font color="#CCCCCC"> the developer</font>

152
00:05:13,090 --> 00:05:16,419
says hey this art works fine in my

153
00:05:14,560 --> 00:05:17,860
development laptop and then you deploy

154
00:05:16,419 --> 00:05:20,409
it to production server and suddenly it

155
00:05:17,860 --> 00:05:22,060
doesn't work anymore dr. kinda solves

156
00:05:20,410 --> 00:05:23,710
that probe in a lot of<font color="#E5E5E5"> cases by bundling</font>

157
00:05:22,060 --> 00:05:25,360
up all the dependencies that sit with

158
00:05:23,710 --> 00:05:27,039
<font color="#E5E5E5">the application and having them in a</font>

159
00:05:25,360 --> 00:05:28,930
nice reproducible container you can just

160
00:05:27,040 --> 00:05:32,440
deploy anywhere you like that's the goal

161
00:05:28,930 --> 00:05:34,240
speed you get a lot<font color="#E5E5E5"> faster it's a lot</font>

162
00:05:32,440 --> 00:05:36,280
faster to deploy a lot Buster to develop

163
00:05:34,240 --> 00:05:38,710
if you<font color="#E5E5E5"> use all the dockers tools and</font>

164
00:05:36,280 --> 00:05:39,849
<font color="#E5E5E5">size so compared to virtual machines</font>

165
00:05:38,710 --> 00:05:42,460
your daughter images should be a lot

166
00:05:39,850 --> 00:05:44,080
smaller you go the way down to busy box

167
00:05:42,460 --> 00:05:45,669
has a docker image which presents<font color="#CCCCCC"> a</font>

168
00:05:44,080 --> 00:05:48,550
reasonably usable Linux environment in

169
00:05:45,669 --> 00:05:50,440
about 1.5<font color="#E5E5E5"> Meg so it's a lot smaller than</font>

170
00:05:48,550 --> 00:05:53,229
running a full vm so there's some

171
00:05:50,440 --> 00:05:56,590
benefits there and because i'm mad i'm

172
00:05:53,229 --> 00:06:00,430
going to do demos so let's try see how

173
00:05:56,590 --> 00:06:03,460
the first demo goes to<font color="#CCCCCC"> ok so what i've</font>

174
00:06:00,430 --> 00:06:04,570
got<font color="#CCCCCC"> here is I've got a little screen</font>

175
00:06:03,460 --> 00:06:06,669
while all this is going to do is it's

176
00:06:04,570 --> 00:06:08,500
going to<font color="#E5E5E5"> launch up ten instances of a</font>

177
00:06:06,669 --> 00:06:14,289
gun<font color="#E5E5E5"> to right it's going to lunch at bash</font>

178
00:06:08,500 --> 00:06:16,780
in each one so if<font color="#CCCCCC"> I do that right I saw</font>

179
00:06:14,290 --> 00:06:18,640
on a laptop running locally about three

180
00:06:16,780 --> 00:06:20,049
seconds four seconds and that's a three

181
00:06:18,640 --> 00:06:21,400
year old laptop this is not a brand-new

182
00:06:20,050 --> 00:06:23,530
piece<font color="#CCCCCC"> of kit with like quad core and the</font>

183
00:06:21,400 --> 00:06:26,440
color and I can look and each one of

184
00:06:23,530 --> 00:06:30,820
these has got its own oops look like a

185
00:06:26,440 --> 00:06:32,560
type got its own network stack and it's

186
00:06:30,820 --> 00:06:33,580
got its own file system so if you create

187
00:06:32,560 --> 00:06:35,080
a file on one of these you don't create

188
00:06:33,580 --> 00:06:36,909
it anywhere<font color="#CCCCCC"> else and it's got its own</font>

189
00:06:35,080 --> 00:06:38,820
process list so none of these conflict

190
00:06:36,910 --> 00:06:41,130
so you can see from that

191
00:06:38,820 --> 00:06:42,420
you can see by developers like it right

192
00:06:41,130 --> 00:06:44,460
that's a<font color="#CCCCCC"> hell of a</font><font color="#E5E5E5"> lot easier than</font>

193
00:06:42,420 --> 00:06:46,920
<font color="#CCCCCC">running up 10 virtual machines or even</font>

194
00:06:44,460 --> 00:06:47,849
worse<font color="#E5E5E5"> 10 physical servers so that kind</font>

195
00:06:46,920 --> 00:06:49,020
of gives you an idea of I think<font color="#E5E5E5"> why</font>

196
00:06:47,850 --> 00:06:52,740
people are kind of keen on this as an

197
00:06:49,020 --> 00:06:55,380
idea<font color="#CCCCCC"> I tend to think</font><font color="#E5E5E5"> I've been looking</font>

198
00:06:52,740 --> 00:06:57,000
<font color="#E5E5E5">this and I can tend to think of dockers</font>

199
00:06:55,380 --> 00:06:57,930
like a<font color="#E5E5E5"> kind of cornucopia because every</font>

200
00:06:57,000 --> 00:06:59,790
<font color="#CCCCCC">time I turn around they got a</font><font color="#E5E5E5"> new</font>

201
00:06:57,930 --> 00:07:01,230
product when I used to i've given this

202
00:06:59,790 --> 00:07:02,580
presentation by six months<font color="#CCCCCC"> there when I</font>

203
00:07:01,230 --> 00:07:04,080
started off I tried to cover all the

204
00:07:02,580 --> 00:07:05,460
products in their lineup and I<font color="#E5E5E5"> just</font>

205
00:07:04,080 --> 00:07:07,710
forget<font color="#E5E5E5"> it I can't do that anymore</font><font color="#CCCCCC"> I'd be</font>

206
00:07:05,460 --> 00:07:09,870
here just talking about that so can't

207
00:07:07,710 --> 00:07:13,770
talk about<font color="#CCCCCC"> some kinky ones the first one</font>

208
00:07:09,870 --> 00:07:14,760
is dr. engine so what<font color="#CCCCCC"> dr. does is it it</font>

209
00:07:13,770 --> 00:07:17,640
has all this kind of containerization

210
00:07:14,760 --> 00:07:19,110
but it has a linux demon which sits

211
00:07:17,640 --> 00:07:20,490
there and manages all that for you so

212
00:07:19,110 --> 00:07:22,950
you have<font color="#CCCCCC"> a command line or you have an</font>

213
00:07:20,490 --> 00:07:25,740
API and you send commands<font color="#E5E5E5"> the docker</font>

214
00:07:22,950 --> 00:07:27,479
engine and it then creates images it

215
00:07:25,740 --> 00:07:29,280
creates containers it creates networks

216
00:07:27,480 --> 00:07:30,900
volumes all that sort of thing it's a

217
00:07:29,280 --> 00:07:32,909
fairly big<font color="#E5E5E5"> go code base and that's</font>

218
00:07:30,900 --> 00:07:34,979
whenever one ever talks about docker and

219
00:07:32,910 --> 00:07:36,480
they don't see what could talk<font color="#E5E5E5"> about the</font>

220
00:07:34,980 --> 00:07:38,640
amine docker engine<font color="#E5E5E5"> is called up but</font>

221
00:07:36,480 --> 00:07:39,840
<font color="#E5E5E5">that's what actual product name is what</font>

222
00:07:38,640 --> 00:07:42,090
actually<font color="#E5E5E5"> I'll mention is just in passing</font>

223
00:07:39,840 --> 00:07:43,950
while I think about it if you're looking

224
00:07:42,090 --> 00:07:46,289
more security and darker be very careful

225
00:07:43,950 --> 00:07:48,360
about the age of the article you're

226
00:07:46,290 --> 00:07:50,370
looking at anything<font color="#E5E5E5"> from more than six</font>

227
00:07:48,360 --> 00:07:53,040
months ago<font color="#E5E5E5"> is ancient times in dockland</font>

228
00:07:50,370 --> 00:07:54,930
and probably doesn't come<font color="#CCCCCC"> they're doing</font>

229
00:07:53,040 --> 00:07:56,130
what one release every two months so I

230
00:07:54,930 --> 00:07:57,990
they put you<font color="#E5E5E5"> security features into</font>

231
00:07:56,130 --> 00:08:00,000
every release so pretty<font color="#E5E5E5"> much yeah</font>

232
00:07:57,990 --> 00:08:01,560
keeping<font color="#E5E5E5"> up the date is kind of key so</font>

233
00:08:00,000 --> 00:08:03,900
that's dr. engine that's the main key

234
00:08:01,560 --> 00:08:05,430
part<font color="#CCCCCC"> of it on top</font><font color="#E5E5E5"> of that is the other</font>

235
00:08:03,900 --> 00:08:08,640
thing which makes docker so amazingly

236
00:08:05,430 --> 00:08:10,830
attractive to people is um<font color="#CCCCCC"> doctor appt</font>

237
00:08:08,640 --> 00:08:12,840
dr. registry others<font color="#CCCCCC"> there's a public one</font>

238
00:08:10,830 --> 00:08:14,789
called our hub if you want to install<font color="#CCCCCC"> a</font>

239
00:08:12,840 --> 00:08:17,429
new for example wordpress blog you can

240
00:08:14,790 --> 00:08:18,660
just go darker run<font color="#E5E5E5"> wordpress</font><font color="#CCCCCC"> oh where</font>

241
00:08:17,430 --> 00:08:19,860
<font color="#E5E5E5">you go and it will pull down all the</font>

242
00:08:18,660 --> 00:08:20,910
components needed for wordpress and

243
00:08:19,860 --> 00:08:22,200
install them and get them running and

244
00:08:20,910 --> 00:08:23,940
you just get<font color="#E5E5E5"> a docker you get wordpress</font>

245
00:08:22,200 --> 00:08:24,900
image you want to<font color="#E5E5E5"> do</font><font color="#CCCCCC"> oracle you get an</font>

246
00:08:23,940 --> 00:08:26,370
oracle image you want to<font color="#E5E5E5"> do a pin to</font>

247
00:08:24,900 --> 00:08:28,440
your day be on pretty much anything you

248
00:08:26,370 --> 00:08:29,970
can think of someone has created an

249
00:08:28,440 --> 00:08:32,460
image for it put it<font color="#E5E5E5"> in the app store so</font>

250
00:08:29,970 --> 00:08:34,349
it's like iOS<font color="#E5E5E5"> App Store for servers and</font>

251
00:08:32,460 --> 00:08:36,870
you just run it and it runs really nice

252
00:08:34,349 --> 00:08:38,700
really fast and I this actually this

253
00:08:36,870 --> 00:08:39,929
presentation is in the docker hub so if

254
00:08:38,700 --> 00:08:41,160
you go looking for my presentation in

255
00:08:39,929 --> 00:08:44,430
docker hub I think this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> just reading</font>

256
00:08:41,159 --> 00:08:45,780
off a docker image other thing i

257
00:08:44,430 --> 00:08:47,010
mentioned i'm passing<font color="#CCCCCC"> cuz i'm going</font><font color="#E5E5E5"> to</font>

258
00:08:45,780 --> 00:08:49,290
demo later on<font color="#CCCCCC"> it's thing called docker</font>

259
00:08:47,010 --> 00:08:51,240
compose so most servers aren't so simple

260
00:08:49,290 --> 00:08:52,230
that you can run one component and you

261
00:08:51,240 --> 00:08:54,060
can say here

262
00:08:52,230 --> 00:08:55,230
just a server you may have databases you

263
00:08:54,060 --> 00:08:57,239
might have load balancers you might have

264
00:08:55,230 --> 00:09:00,150
lots of components what this lets you do

265
00:08:57,240 --> 00:09:02,220
is say here is a complex environment or

266
00:09:00,150 --> 00:09:03,540
made up of multiple components I'm going

267
00:09:02,220 --> 00:09:04,920
<font color="#E5E5E5">to put all these components</font><font color="#CCCCCC"> together or</font>

268
00:09:03,540 --> 00:09:07,560
describe their networks<font color="#E5E5E5"> describe their</font>

269
00:09:04,920 --> 00:09:09,209
volumes and run one command and bring

270
00:09:07,560 --> 00:09:14,160
the entire<font color="#CCCCCC"> thing up or down which is</font>

271
00:09:09,210 --> 00:09:15,900
very handy so useful you sleep your

272
00:09:14,160 --> 00:09:17,339
daughter I thought<font color="#E5E5E5"> I'd quickly talk</font>

273
00:09:15,900 --> 00:09:20,459
about<font color="#CCCCCC"> a couple of uses which I like</font>

274
00:09:17,340 --> 00:09:23,130
which I've started using for myself so

275
00:09:20,460 --> 00:09:25,650
if you're a pen tester like me you might

276
00:09:23,130 --> 00:09:27,300
have all encountered online sometimes

277
00:09:25,650 --> 00:09:29,459
you'll find people will say here got

278
00:09:27,300 --> 00:09:30,719
this great exploit that's totally going

279
00:09:29,460 --> 00:09:32,250
to<font color="#E5E5E5"> get this new vulnerability and you</font>

280
00:09:30,720 --> 00:09:34,260
totally compromised a server<font color="#E5E5E5"> you're</font>

281
00:09:32,250 --> 00:09:36,090
<font color="#E5E5E5">trying to compromise on your test you</font>

282
00:09:34,260 --> 00:09:37,710
might not always want to trust them they

283
00:09:36,090 --> 00:09:39,540
might not<font color="#CCCCCC"> be</font><font color="#E5E5E5"> telling you the truth I</font>

284
00:09:37,710 --> 00:09:41,100
<font color="#E5E5E5">don't know sometimes you and I've seen</font>

285
00:09:39,540 --> 00:09:42,240
this using this malicious exploits out

286
00:09:41,100 --> 00:09:43,530
there so one of the things you can use

287
00:09:42,240 --> 00:09:45,240
<font color="#CCCCCC">doctor for is to kind of have a short</font>

288
00:09:43,530 --> 00:09:46,829
with something in a quick<font color="#CCCCCC"> and easy way</font>

289
00:09:45,240 --> 00:09:48,180
isolated away from your main operating

290
00:09:46,830 --> 00:09:50,640
system before you try running<font color="#E5E5E5"> this in</font>

291
00:09:48,180 --> 00:09:53,459
kind of a real way so I've got an

292
00:09:50,640 --> 00:09:54,930
example here I've<font color="#E5E5E5"> got a script in this</font>

293
00:09:53,460 --> 00:09:56,580
directory called punto sure which I've

294
00:09:54,930 --> 00:09:58,439
been<font color="#E5E5E5"> reliably informed will totally</font>

295
00:09:56,580 --> 00:10:00,060
exploit the targa I'm looking at right

296
00:09:58,440 --> 00:10:02,370
now and I can<font color="#CCCCCC"> mount that and say the</font>

297
00:10:00,060 --> 00:10:04,760
container so I'm never inside my

298
00:10:02,370 --> 00:10:08,640
container I'm ain't going to script

299
00:10:04,760 --> 00:10:09,980
<font color="#CCCCCC">unlike run conduction and it's obviously</font>

300
00:10:08,640 --> 00:10:13,170
legit because it's got<font color="#E5E5E5"> great ascii art</font>

301
00:10:09,980 --> 00:10:15,420
and it says please wait<font color="#CCCCCC"> for footage and</font>

302
00:10:13,170 --> 00:10:19,110
<font color="#CCCCCC">then is it ah it didn't work</font><font color="#E5E5E5"> reply hazy</font>

303
00:10:15,420 --> 00:10:21,719
hack again later so it didn't work fine

304
00:10:19,110 --> 00:10:24,240
but<font color="#CCCCCC"> what did it actually</font><font color="#E5E5E5"> do so</font><font color="#CCCCCC"> darker</font>

305
00:10:21,720 --> 00:10:25,890
because<font color="#CCCCCC"> it's running in a container and</font>

306
00:10:24,240 --> 00:10:27,270
what it does is<font color="#CCCCCC"> it has this base file</font>

307
00:10:25,890 --> 00:10:28,230
system and then it layers on your

308
00:10:27,270 --> 00:10:30,300
changes<font color="#CCCCCC"> the use of thing called</font>

309
00:10:28,230 --> 00:10:31,830
copy-on-write so the layer any changes

310
00:10:30,300 --> 00:10:33,359
you make to on top of it it's easy for

311
00:10:31,830 --> 00:10:35,940
them to examine that layer and say what

312
00:10:33,360 --> 00:10:37,200
changed what happened in this<font color="#E5E5E5"> image so</font>

313
00:10:35,940 --> 00:10:40,800
what you can<font color="#E5E5E5"> do is you can just say dr.</font>

314
00:10:37,200 --> 00:10:41,970
TIFF TIFF devil<font color="#CCCCCC"> 2 and that tells</font><font color="#E5E5E5"> me</font>

315
00:10:40,800 --> 00:10:44,760
everything has changed since that image

316
00:10:41,970 --> 00:10:47,130
was launched oh so he changed ET SI

317
00:10:44,760 --> 00:10:49,350
password on dtc shadow I'd created

318
00:10:47,130 --> 00:10:51,030
something called home Bob maybe that

319
00:10:49,350 --> 00:10:53,040
wasn't quite<font color="#CCCCCC"> what I wanted to do maybe</font>

320
00:10:51,030 --> 00:10:54,480
that was a bad container and a bad

321
00:10:53,040 --> 00:10:56,939
script so what you can<font color="#CCCCCC"> just do is just</font>

322
00:10:54,480 --> 00:10:58,650
go darker our demo<font color="#E5E5E5"> 2 and all that's gone</font>

323
00:10:56,940 --> 00:11:00,090
so anything that person tried<font color="#CCCCCC"> to do to</font>

324
00:10:58,650 --> 00:11:02,430
your machine<font color="#CCCCCC"> is now gone vanished off</font>

325
00:11:00,090 --> 00:11:03,900
the<font color="#CCCCCC"> system and that to me is quite</font>

326
00:11:02,430 --> 00:11:05,699
useful technique

327
00:11:03,900 --> 00:11:08,490
the other one I've<font color="#CCCCCC"> been kind</font><font color="#E5E5E5"> of playing</font>

328
00:11:05,700 --> 00:11:09,900
with looking at is pen test environment

329
00:11:08,490 --> 00:11:11,640
occupation you can tell my<font color="#CCCCCC"> backpack test</font>

330
00:11:09,900 --> 00:11:14,189
what kind of gets my interest in these

331
00:11:11,640 --> 00:11:16,319
<font color="#E5E5E5">things sometimes I've had customers that</font>

332
00:11:14,190 --> 00:11:17,690
say you go and you go to go on site and

333
00:11:16,320 --> 00:11:20,160
they say<font color="#E5E5E5"> you can't plug your laptop in</font>

334
00:11:17,690 --> 00:11:21,630
which is kind<font color="#E5E5E5"> of annoying and then they</font>

335
00:11:20,160 --> 00:11:24,060
say but you can give us tools and we'll

336
00:11:21,630 --> 00:11:25,710
run them and you can think<font color="#E5E5E5"> well mm-hmm</font>

337
00:11:24,060 --> 00:11:26,939
doesn't anyone sense to me but anyway

338
00:11:25,710 --> 00:11:28,530
<font color="#E5E5E5">that's how it works is a security balls</font>

339
00:11:26,940 --> 00:11:29,970
out there you can't connect a laptop the

340
00:11:28,530 --> 00:11:31,380
problem of<font color="#E5E5E5"> that tends to</font><font color="#CCCCCC"> be that</font><font color="#E5E5E5"> some</font>

341
00:11:29,970 --> 00:11:33,210
pen test tools are true you recognize

342
00:11:31,380 --> 00:11:34,740
aren't always the most easy things to

343
00:11:33,210 --> 00:11:36,540
<font color="#E5E5E5">get working properly and configure</font>

344
00:11:34,740 --> 00:11:38,640
properly so it's really nice to be able

345
00:11:36,540 --> 00:11:40,620
to say well<font color="#E5E5E5"> I'll just give you a dock or</font>

346
00:11:38,640 --> 00:11:42,420
set of docker images you just run these

347
00:11:40,620 --> 00:11:43,500
and they will give<font color="#E5E5E5"> me a configured</font>

348
00:11:42,420 --> 00:11:45,680
environment the way I want and it's

349
00:11:43,500 --> 00:11:50,730
<font color="#E5E5E5">really</font><font color="#CCCCCC"> easy to do that's a basic example</font>

350
00:11:45,680 --> 00:11:54,390
<font color="#E5E5E5">what basic example so I've got our I</font>

351
00:11:50,730 --> 00:11:56,280
shall it'll look at it so this is<font color="#CCCCCC"> a</font>

352
00:11:54,390 --> 00:11:57,510
doctor composed llamo file and it's

353
00:11:56,280 --> 00:11:59,040
<font color="#E5E5E5">really straightforward you can see what</font>

354
00:11:57,510 --> 00:12:02,069
it does it basically says there's my

355
00:11:59,040 --> 00:12:03,900
firefox image and I'm gruff image as

356
00:12:02,070 --> 00:12:05,550
well and it<font color="#E5E5E5"> basically it gives me a</font>

357
00:12:03,900 --> 00:12:07,410
little volume so I can basically share

358
00:12:05,550 --> 00:12:08,670
the data from my pen test in an isolated

359
00:12:07,410 --> 00:12:09,959
volume and then take it away after it's

360
00:12:08,670 --> 00:12:12,630
just to give<font color="#E5E5E5"> me a copy that volume and</font>

361
00:12:09,960 --> 00:12:13,860
it maps mall together and actually can

362
00:12:12,630 --> 00:12:14,790
let you<font color="#E5E5E5"> know says okay you two are going</font>

363
00:12:13,860 --> 00:12:16,380
<font color="#E5E5E5">to work together and those are</font>

364
00:12:14,790 --> 00:12:20,430
configured the way I want so all<font color="#E5E5E5"> I have</font>

365
00:12:16,380 --> 00:12:24,660
to do in theory there's go darker those

366
00:12:20,430 --> 00:12:27,239
up and it'll go away and yeah and<font color="#CCCCCC"> I get</font>

367
00:12:24,660 --> 00:12:30,000
firefox image and in a<font color="#E5E5E5"> couple of seconds</font>

368
00:12:27,240 --> 00:12:32,250
cuz joey is slow I should get a burger

369
00:12:30,000 --> 00:12:33,690
with you yeah and I get a<font color="#E5E5E5"> rope on you as</font>

370
00:12:32,250 --> 00:12:35,340
well and those are configured with my

371
00:12:33,690 --> 00:12:36,600
tools are configured with my add-ins the

372
00:12:35,340 --> 00:12:38,970
proxy is configured to talk to<font color="#E5E5E5"> each</font>

373
00:12:36,600 --> 00:12:40,260
other CA certificates pre-configured so

374
00:12:38,970 --> 00:12:41,580
in terms of creating an isolated

375
00:12:40,260 --> 00:12:43,860
parenting environment and when<font color="#E5E5E5"> I'm</font>

376
00:12:41,580 --> 00:12:45,330
finished I can say zip<font color="#E5E5E5"> up the contents</font>

377
00:12:43,860 --> 00:12:46,770
of those two images and that is

378
00:12:45,330 --> 00:12:47,970
<font color="#E5E5E5">everything that</font><font color="#CCCCCC"> I went with his pen test</font>

379
00:12:46,770 --> 00:12:49,920
that is all the artifacts with it if you

380
00:12:47,970 --> 00:12:51,630
need<font color="#E5E5E5"> to recreate a test finding i can</font>

381
00:12:49,920 --> 00:12:53,670
get my environment<font color="#E5E5E5"> by the exact way it</font>

382
00:12:51,630 --> 00:12:58,800
was what i was doing this test quite

383
00:12:53,670 --> 00:13:02,189
useful so this<font color="#E5E5E5"> is all great and super</font>

384
00:12:58,800 --> 00:13:04,500
useful but is actually secure right so

385
00:13:02,190 --> 00:13:07,050
is<font color="#CCCCCC"> it actually any use or does it bad so</font>

386
00:13:04,500 --> 00:13:09,000
if you look at<font color="#CCCCCC"> 4dr security articles</font>

387
00:13:07,050 --> 00:13:11,609
online you will encounter the phrase

388
00:13:09,000 --> 00:13:13,200
containers don't contain so like

389
00:13:11,610 --> 00:13:14,970
Pandora's box<font color="#CCCCCC"> they let all the bad stuff</font>

390
00:13:13,200 --> 00:13:16,380
out and<font color="#CCCCCC"> definitely</font><font color="#E5E5E5"> some of the older</font>

391
00:13:14,970 --> 00:13:17,400
articles went<font color="#CCCCCC"> down this</font><font color="#E5E5E5"> late if</font>

392
00:13:16,380 --> 00:13:19,280
containers don't contain

393
00:13:17,400 --> 00:13:21,150
can't trust<font color="#E5E5E5"> them to provide isolation</font>

394
00:13:19,280 --> 00:13:22,530
the answer is<font color="#E5E5E5"> is not quite</font>

395
00:13:21,150 --> 00:13:24,420
straightforward as that but you need to

396
00:13:22,530 --> 00:13:27,949
understand how it does it to say how

397
00:13:24,420 --> 00:13:30,900
happy<font color="#E5E5E5"> you are first thing to recognize</font>

398
00:13:27,950 --> 00:13:33,270
container security is Linux security

399
00:13:30,900 --> 00:13:35,400
there's<font color="#E5E5E5"> absolutely nothing</font><font color="#CCCCCC"> doctor does</font>

400
00:13:33,270 --> 00:13:36,960
to create a container you can't do

401
00:13:35,400 --> 00:13:39,270
yourself manually with Linux commands

402
00:13:36,960 --> 00:13:40,950
same with rockets in with<font color="#CCCCCC"> alexi or like</font>

403
00:13:39,270 --> 00:13:42,329
any of these container<font color="#E5E5E5"> let us container</font>

404
00:13:40,950 --> 00:13:44,220
platforms you can<font color="#CCCCCC"> do all yourself</font>

405
00:13:42,330 --> 00:13:46,230
<font color="#E5E5E5">manually it's just really painful and</font>

406
00:13:44,220 --> 00:13:49,560
really awkward and dr. hides all that

407
00:13:46,230 --> 00:13:51,360
from you how does it do<font color="#CCCCCC"> it first thing</font>

408
00:13:49,560 --> 00:13:53,339
it uses his name spaces so obviously

409
00:13:51,360 --> 00:13:57,240
when you saw me running up containers

410
00:13:53,340 --> 00:13:58,470
there<font color="#E5E5E5"> Bluebird why do you want to be</font>

411
00:13:57,240 --> 00:14:01,980
elephant you don't get to go the further

412
00:13:58,470 --> 00:14:04,200
<font color="#E5E5E5">go away so yeah when you saw me run up</font>

413
00:14:01,980 --> 00:14:06,510
those containers there I<font color="#E5E5E5"> had my</font><font color="#CCCCCC"> own</font>

414
00:14:04,200 --> 00:14:08,130
isolated file systems if I done PS i

415
00:14:06,510 --> 00:14:09,420
wouldn't have seen all the processes I

416
00:14:08,130 --> 00:14:11,340
wouldn't<font color="#E5E5E5"> see in the same network stack</font>

417
00:14:09,420 --> 00:14:12,839
<font color="#E5E5E5">how's</font><font color="#CCCCCC"> it doing that an answer is using</font>

418
00:14:11,340 --> 00:14:14,150
Linux name spaces which are a feature

419
00:14:12,840 --> 00:14:16,350
which lens has had for quite a long time

420
00:14:14,150 --> 00:14:18,390
they're adding more namespaces all the

421
00:14:16,350 --> 00:14:21,420
time but the older ones have been there

422
00:14:18,390 --> 00:14:23,520
<font color="#E5E5E5">for</font><font color="#CCCCCC"> quite a long time first one is Mount</font>

423
00:14:21,420 --> 00:14:25,290
chroot so that's basically<font color="#CCCCCC"> churu</font><font color="#E5E5E5"> that's</font>

424
00:14:23,520 --> 00:14:27,090
what gives you an isolated file system

425
00:14:25,290 --> 00:14:29,160
and it lets you see only subset of the

426
00:14:27,090 --> 00:14:30,540
files are available it's probably<font color="#E5E5E5"> one of</font>

427
00:14:29,160 --> 00:14:32,370
the key ones obviously<font color="#CCCCCC"> if</font><font color="#E5E5E5"> I could see</font>

428
00:14:30,540 --> 00:14:34,380
the real root filesystem and I can see

429
00:14:32,370 --> 00:14:36,030
the real<font color="#CCCCCC"> et Cie directory I might start</font>

430
00:14:34,380 --> 00:14:38,220
<font color="#CCCCCC">be able</font><font color="#E5E5E5"> to do bad things to the host I</font>

431
00:14:36,030 --> 00:14:39,810
need to isolate that off so almost<font color="#E5E5E5"> all</font>

432
00:14:38,220 --> 00:14:42,750
containers will run inside an isolated

433
00:14:39,810 --> 00:14:43,979
filesystem one thing what been cheating

434
00:14:42,750 --> 00:14:45,840
is dr. lett should turn any of this off

435
00:14:43,980 --> 00:14:47,280
so if you want to<font color="#E5E5E5"> they will give you</font>

436
00:14:45,840 --> 00:14:48,600
<font color="#E5E5E5">they give you like a kind of safe set</font>

437
00:14:47,280 --> 00:14:50,819
defaults what they think are safe set

438
00:14:48,600 --> 00:14:52,770
defaults which can tend more towards

439
00:14:50,820 --> 00:14:53,970
ease of use and security but you can

440
00:14:52,770 --> 00:14:58,020
turn everything off and just savor I

441
00:14:53,970 --> 00:14:59,640
don't want to do this but<font color="#CCCCCC"> yeah process</font>

442
00:14:58,020 --> 00:15:01,230
if I can see the process list<font color="#CCCCCC"> from other</font>

443
00:14:59,640 --> 00:15:02,850
from other containers we've got problems

444
00:15:01,230 --> 00:15:04,560
sometimes<font color="#E5E5E5"> there are you'll find things</font>

445
00:15:02,850 --> 00:15:05,700
like secrets inside a process if you do

446
00:15:04,560 --> 00:15:06,719
PS you might find the secrets and run

447
00:15:05,700 --> 00:15:08,190
off<font color="#E5E5E5"> the command line you make for the</font>

448
00:15:06,720 --> 00:15:09,510
environment variable you might find all

449
00:15:08,190 --> 00:15:11,610
sorts of leakage also if you're running

450
00:15:09,510 --> 00:15:12,569
as root inside a container if you can

451
00:15:11,610 --> 00:15:14,250
see the process place you can probably

452
00:15:12,570 --> 00:15:15,600
kill other processes unless you're

453
00:15:14,250 --> 00:15:18,240
running user name spaces which we'll

454
00:15:15,600 --> 00:15:19,350
talk about in a bit so obviously

455
00:15:18,240 --> 00:15:21,870
isolating process<font color="#CCCCCC"> quest is</font><font color="#E5E5E5"> really</font>

456
00:15:19,350 --> 00:15:25,140
important and isolating the network as

457
00:15:21,870 --> 00:15:26,790
well you don't want to be running the

458
00:15:25,140 --> 00:15:29,250
hosts network stack because then you get

459
00:15:26,790 --> 00:15:31,010
the same local host interface and as

460
00:15:29,250 --> 00:15:33,650
we've seen in probably if you've done

461
00:15:31,010 --> 00:15:35,420
linux security some or any security

462
00:15:33,650 --> 00:15:36,829
sometimes people will assume if<font color="#E5E5E5"> there if</font>

463
00:15:35,420 --> 00:15:38,150
<font color="#E5E5E5">you if your bite can buy into local</font>

464
00:15:36,830 --> 00:15:40,070
hosting you can address local host your

465
00:15:38,150 --> 00:15:41,150
trusted so you don't want that so<font color="#E5E5E5"> you</font>

466
00:15:40,070 --> 00:15:42,950
want to have a different<font color="#E5E5E5"> network stack</font>

467
00:15:41,150 --> 00:15:44,360
and isolated so don't forget this whole

468
00:15:42,950 --> 00:15:48,560
little<font color="#E5E5E5"> network and all the containers go</font>

469
00:15:44,360 --> 00:15:51,350
to live on that<font color="#E5E5E5"> network other ones less</font>

470
00:15:48,560 --> 00:15:52,670
relevant IPC still needed it in case

471
00:15:51,350 --> 00:15:54,740
you're running using process that run

472
00:15:52,670 --> 00:15:56,420
IPC you can get memory clashes so you

473
00:15:54,740 --> 00:15:59,480
can<font color="#E5E5E5"> get people squatting on memory so</font>

474
00:15:56,420 --> 00:16:01,219
you want to give<font color="#CCCCCC"> isolated IPC UTS is</font>

475
00:15:59,480 --> 00:16:02,510
just<font color="#CCCCCC"> guys don't know why it's</font><font color="#E5E5E5"> got his</font>

476
00:16:01,220 --> 00:16:04,250
own<font color="#E5E5E5"> who is namespace this is the</font>

477
00:16:02,510 --> 00:16:05,780
hostname and domain name so basically

478
00:16:04,250 --> 00:16:08,660
UTS namespace says give me<font color="#E5E5E5"> my own</font>

479
00:16:05,780 --> 00:16:10,910
hostname don't use the hosts one the

480
00:16:08,660 --> 00:16:13,910
last one<font color="#E5E5E5"> is the most important one and</font>

481
00:16:10,910 --> 00:16:15,949
it's the newest one so another complaint

482
00:16:13,910 --> 00:16:18,319
that you often see about docker security

483
00:16:15,950 --> 00:16:20,930
is your people<font color="#E5E5E5"> saying written the</font>

484
00:16:18,320 --> 00:16:22,730
container is root on<font color="#CCCCCC"> the host which used</font>

485
00:16:20,930 --> 00:16:24,589
to be<font color="#CCCCCC"> the true so if I'm the root user</font>

486
00:16:22,730 --> 00:16:26,900
inside a container unless I turn this on

487
00:16:24,590 --> 00:16:29,030
I am the same root user as it is on the

488
00:16:26,900 --> 00:16:30,740
host I'm a constrained root user a hold

489
00:16:29,030 --> 00:16:32,510
of things are stopping me doing<font color="#E5E5E5"> things</font>

490
00:16:30,740 --> 00:16:34,310
but ultimately if I can bypass those I'm

491
00:16:32,510 --> 00:16:37,160
still route to the OS will treat<font color="#CCCCCC"> me like</font>

492
00:16:34,310 --> 00:16:39,920
root it's<font color="#E5E5E5"> very dangerous to run as root</font>

493
00:16:37,160 --> 00:16:41,660
obviously so<font color="#CCCCCC"> what you can do now is you</font>

494
00:16:39,920 --> 00:16:43,430
can enable user name space and what that

495
00:16:41,660 --> 00:16:44,839
does is it<font color="#CCCCCC"> says you may be root inside</font>

496
00:16:43,430 --> 00:16:46,910
the container but in the outside world

497
00:16:44,840 --> 00:16:48,800
<font color="#CCCCCC">you're this random high user generally</font>

498
00:16:46,910 --> 00:16:51,980
like you ID 10,000 or something it

499
00:16:48,800 --> 00:16:53,510
creates an high user launch time for the

500
00:16:51,980 --> 00:16:57,020
conferral the containers in a given

501
00:16:53,510 --> 00:16:59,840
image or her honor given server um it's

502
00:16:57,020 --> 00:17:01,430
<font color="#E5E5E5">not turned on by default very important</font>

503
00:16:59,840 --> 00:17:04,459
point if anyone's planning to deploy<font color="#E5E5E5"> to</font>

504
00:17:01,430 --> 00:17:05,839
poker dr. turn that on that's like if

505
00:17:04,459 --> 00:17:07,579
you<font color="#E5E5E5"> don't remember anything else as the</font>

506
00:17:05,839 --> 00:17:09,440
beauty haze after tonight and you wake

507
00:17:07,579 --> 00:17:11,448
up win what does that guy say turn on

508
00:17:09,440 --> 00:17:14,000
user name spaces<font color="#CCCCCC"> as way said because it</font>

509
00:17:11,449 --> 00:17:15,589
gets it by far away gets rid of a lot of

510
00:17:14,000 --> 00:17:18,349
<font color="#E5E5E5">the problems with container secured your</font>

511
00:17:15,589 --> 00:17:19,579
makes them a lot less bad and there's

512
00:17:18,349 --> 00:17:21,500
lots<font color="#E5E5E5"> of ways that if you haven't turned</font>

513
00:17:19,579 --> 00:17:23,060
it all you can get get tripped up so

514
00:17:21,500 --> 00:17:26,990
<font color="#CCCCCC">user names basis as a great idea</font><font color="#E5E5E5"> to turn</font>

515
00:17:23,060 --> 00:17:28,429
on so that's all great but what else

516
00:17:26,990 --> 00:17:30,230
does it do so it tries<font color="#CCCCCC"> to create</font>

517
00:17:28,430 --> 00:17:33,680
isolated view everything it also uses

518
00:17:30,230 --> 00:17:35,240
linux capabilities<font color="#CCCCCC"> they're a reasonably</font>

519
00:17:33,680 --> 00:17:38,600
new feature and you may not have<font color="#E5E5E5"> come</font>

520
00:17:35,240 --> 00:17:40,580
across them in<font color="#E5E5E5"> Linux um in in Linux land</font>

521
00:17:38,600 --> 00:17:42,080
or a<font color="#E5E5E5"> UNIX land in general you used to</font>

522
00:17:40,580 --> 00:17:43,620
have this concept of root and not room

523
00:17:42,080 --> 00:17:45,000
so either your route

524
00:17:43,620 --> 00:17:46,709
and you can do<font color="#E5E5E5"> everything or you're not</font>

525
00:17:45,000 --> 00:17:48,510
root and you're heavily constrained and

526
00:17:46,710 --> 00:17:51,120
this led to<font color="#E5E5E5"> people doing things like set</font>

527
00:17:48,510 --> 00:17:53,010
uid binaries so we'll say for example a

528
00:17:51,120 --> 00:17:55,110
good example<font color="#CCCCCC"> of one else uses ping ping</font>

529
00:17:53,010 --> 00:17:57,450
is generally set uid root which means if

530
00:17:55,110 --> 00:17:59,699
you can find compromise the ping binary

531
00:17:57,450 --> 00:18:01,230
your<font color="#E5E5E5"> route which is obviously not great</font>

532
00:17:59,700 --> 00:18:03,809
because ping doesn't really do a lot of

533
00:18:01,230 --> 00:18:05,220
very high privilege stuff what

534
00:18:03,809 --> 00:18:07,350
capabilities do is they get that

535
00:18:05,220 --> 00:18:09,600
monolithic root privilege and they boy

536
00:18:07,350 --> 00:18:13,649
out into 40 something different

537
00:18:09,600 --> 00:18:15,540
capabilities so now instead of<font color="#CCCCCC"> having</font>

538
00:18:13,650 --> 00:18:16,950
just<font color="#CCCCCC"> roots set your ID programs what you</font>

539
00:18:15,540 --> 00:18:19,260
can do is you can see<font color="#E5E5E5"> give me that</font>

540
00:18:16,950 --> 00:18:22,290
capability so one did lettuce debian

541
00:18:19,260 --> 00:18:24,690
linux you know get ping is no longer set

542
00:18:22,290 --> 00:18:25,950
your ID root it's got cat net raw which

543
00:18:24,690 --> 00:18:28,320
is the thing that lets you send raw

544
00:18:25,950 --> 00:18:30,059
packets auditing point actually<font color="#CCCCCC"> be doing</font>

545
00:18:28,320 --> 00:18:31,350
in<font color="#E5E5E5"> linux audits and one of your audit</font>

546
00:18:30,059 --> 00:18:33,928
points<font color="#E5E5E5"> has always look for it set your</font>

547
00:18:31,350 --> 00:18:35,309
ID binaries also use get cap to find

548
00:18:33,929 --> 00:18:37,530
people who may<font color="#CCCCCC"> have given</font><font color="#E5E5E5"> binaries</font>

549
00:18:35,309 --> 00:18:39,420
capabilities they shouldn't have<font color="#E5E5E5"> so you</font>

550
00:18:37,530 --> 00:18:41,428
there's<font color="#CCCCCC"> one program called capsis admin</font>

551
00:18:39,420 --> 00:18:43,800
which is basically root so if you wanted

552
00:18:41,429 --> 00:18:45,150
to sneakily create a file and have it

553
00:18:43,800 --> 00:18:48,500
give more privileges than it should have

554
00:18:45,150 --> 00:18:50,309
give it cap sysadmin and away you go um

555
00:18:48,500 --> 00:18:52,470
they're<font color="#E5E5E5"> very useful for that and what</font>

556
00:18:50,309 --> 00:18:54,540
<font color="#E5E5E5">doctor does is it has a default set of</font>

557
00:18:52,470 --> 00:18:56,010
capabilities so they've said here's a

558
00:18:54,540 --> 00:18:58,470
whitelist here's the default whitelist

559
00:18:56,010 --> 00:19:00,360
if you you can go<font color="#CCCCCC"> up</font><font color="#E5E5E5"> or down from that</font>

560
00:18:58,470 --> 00:19:02,309
but we're going<font color="#E5E5E5"> to give</font><font color="#CCCCCC"> you this they do</font>

561
00:19:00,360 --> 00:19:04,050
do things like give cabinet<font color="#E5E5E5"> role which</font>

562
00:19:02,309 --> 00:19:06,090
can be a bit dangerous for denial of

563
00:19:04,050 --> 00:19:08,040
service and other purposes so again if

564
00:19:06,090 --> 00:19:09,870
you're deploying docker is worth looking

565
00:19:08,040 --> 00:19:11,220
<font color="#CCCCCC">at can you remove capabilities from the</font>

566
00:19:09,870 --> 00:19:13,020
base image can<font color="#E5E5E5"> you actually lock that</font>

567
00:19:11,220 --> 00:19:16,130
down a bit further because otherwise it

568
00:19:13,020 --> 00:19:18,809
can get a bit<font color="#E5E5E5"> dicey see groups and</font>

569
00:19:16,130 --> 00:19:20,460
another a problem with running all<font color="#CCCCCC"> your</font>

570
00:19:18,809 --> 00:19:22,080
processes say you're running container

571
00:19:20,460 --> 00:19:23,640
as a service so IBM and other companies

572
00:19:22,080 --> 00:19:25,290
have containers or service platforms

573
00:19:23,640 --> 00:19:26,730
where they<font color="#E5E5E5"> will run your container on</font>

574
00:19:25,290 --> 00:19:28,950
their servers and then<font color="#E5E5E5"> obviously running</font>

575
00:19:26,730 --> 00:19:29,850
multiple containers on<font color="#E5E5E5"> the same vm so</font>

576
00:19:28,950 --> 00:19:32,010
they have to watch<font color="#CCCCCC"> for resource</font>

577
00:19:29,850 --> 00:19:34,050
management if<font color="#CCCCCC"> I can</font><font color="#E5E5E5"> just see inside a</font>

578
00:19:32,010 --> 00:19:35,460
container hey give me all the CPU give

579
00:19:34,050 --> 00:19:37,800
me<font color="#E5E5E5"> all the memory give me a little scale</font>

580
00:19:35,460 --> 00:19:39,210
and denial of service the box that's

581
00:19:37,800 --> 00:19:40,980
obviously not great and the way that

582
00:19:39,210 --> 00:19:43,470
gets really<font color="#E5E5E5"> is</font><font color="#CCCCCC"> is there's a default set</font>

583
00:19:40,980 --> 00:19:45,059
of<font color="#CCCCCC"> cgroups aside so that limits the</font>

584
00:19:43,470 --> 00:19:46,770
resources that can be used by a given

585
00:19:45,059 --> 00:19:49,320
container it<font color="#E5E5E5"> also limits access to</font>

586
00:19:46,770 --> 00:19:51,870
devices because you can't<font color="#E5E5E5"> namespace</font>

587
00:19:49,320 --> 00:19:52,950
devices at the<font color="#E5E5E5"> moment one of the things</font>

588
00:19:51,870 --> 00:19:54,840
<font color="#E5E5E5">that people almost used to say about</font>

589
00:19:52,950 --> 00:19:56,310
containers is you could<font color="#E5E5E5"> just do a fork</font>

590
00:19:54,840 --> 00:19:56,820
bomb so you could<font color="#E5E5E5"> just run the</font><font color="#CCCCCC"> bash</font>

591
00:19:56,310 --> 00:19:58,678
script

592
00:19:56,820 --> 00:20:00,269
<font color="#E5E5E5">Forex or process after process after</font>

593
00:19:58,679 --> 00:20:02,100
process which was true until one point

594
00:20:00,269 --> 00:20:03,450
12 when they introduced the<font color="#E5E5E5"> ped see</font>

595
00:20:02,100 --> 00:20:05,639
group so now you can't do that anymore

596
00:20:03,450 --> 00:20:07,500
so you can lock<font color="#E5E5E5"> that down but they're</font>

597
00:20:05,639 --> 00:20:08,939
kind of going round adding features one

598
00:20:07,500 --> 00:20:10,380
of the things definitely and this was

599
00:20:08,940 --> 00:20:12,000
saying about versions and if you're

600
00:20:10,380 --> 00:20:13,169
deploying docker is you<font color="#E5E5E5"> kind of have to</font>

601
00:20:12,000 --> 00:20:14,250
keep<font color="#E5E5E5"> up to</font><font color="#CCCCCC"> date players aggressions</font>

602
00:20:13,169 --> 00:20:16,200
because they<font color="#E5E5E5"> keep adding cool new stuff</font>

603
00:20:14,250 --> 00:20:18,600
and by<font color="#E5E5E5"> the lips versions I mean every</font>

604
00:20:16,200 --> 00:20:21,059
other month so yeah<font color="#E5E5E5"> yeah bit painful</font>

605
00:20:18,600 --> 00:20:23,850
stare keeping up what else<font color="#E5E5E5"> do they do</font>

606
00:20:21,059 --> 00:20:26,399
second<font color="#CCCCCC"> second is</font><font color="#E5E5E5"> really cool um so</font>

607
00:20:23,850 --> 00:20:28,889
anytime so the key difference before

608
00:20:26,399 --> 00:20:30,719
between<font color="#CCCCCC"> VMS and containers is that</font>

609
00:20:28,889 --> 00:20:31,979
containers are run off the<font color="#E5E5E5"> one colonel</font>

610
00:20:30,720 --> 00:20:33,570
so they all addressing the same

611
00:20:31,980 --> 00:20:35,429
operating system kernel and the way

612
00:20:33,570 --> 00:20:38,460
Linux processes<font color="#CCCCCC"> address the Colonel's</font>

613
00:20:35,429 --> 00:20:40,230
they used syscalls so obviously if<font color="#CCCCCC"> I can</font>

614
00:20:38,460 --> 00:20:42,210
<font color="#E5E5E5">make a bad Cisco law right NASA's called</font>

615
00:20:40,230 --> 00:20:43,620
<font color="#E5E5E5">has got vulnerability I can try</font><font color="#CCCCCC"> and</font>

616
00:20:42,210 --> 00:20:45,149
attack the colonel and<font color="#E5E5E5"> then break out to</font>

617
00:20:43,620 --> 00:20:47,100
the host and basically if you're

618
00:20:45,149 --> 00:20:50,279
breaking<font color="#CCCCCC"> out containers you do</font><font color="#E5E5E5"> assess</font>

619
00:20:47,100 --> 00:20:52,529
calls you can use set comp set

620
00:20:50,279 --> 00:20:54,269
composition a filtering system so you

621
00:20:52,529 --> 00:20:55,679
can say this container can only make

622
00:20:54,269 --> 00:20:58,440
these Cisco's and not these other ones

623
00:20:55,679 --> 00:20:59,730
again docker have given you a whitelist

624
00:20:58,440 --> 00:21:01,620
they've said but the way this is<font color="#E5E5E5"> kind of</font>

625
00:20:59,730 --> 00:21:03,720
long so there's 400<font color="#E5E5E5"> something available</font>

626
00:21:01,620 --> 00:21:05,189
says calls they give you 300 and

627
00:21:03,720 --> 00:21:07,080
something by default so it's not<font color="#CCCCCC"> a</font>

628
00:21:05,190 --> 00:21:08,220
greatly locked out but you can do more

629
00:21:07,080 --> 00:21:09,960
<font color="#CCCCCC">than that if you want to you can lock</font><font color="#E5E5E5"> it</font>

630
00:21:08,220 --> 00:21:11,820
down further and say these<font color="#E5E5E5"> are the sis</font>

631
00:21:09,960 --> 00:21:16,799
<font color="#E5E5E5">calls you can't use that's quite</font>

632
00:21:11,820 --> 00:21:18,658
valuable to do and the last one<font color="#E5E5E5"> you can</font>

633
00:21:16,799 --> 00:21:21,240
do mandatory access control profiles so

634
00:21:18,659 --> 00:21:24,269
you if you got a<font color="#CCCCCC"> parmer and selinux you</font>

635
00:21:21,240 --> 00:21:26,850
could apply those two containers the

636
00:21:24,269 --> 00:21:28,440
<font color="#CCCCCC">doctor demon itself gets are that far</font>

637
00:21:26,850 --> 00:21:29,668
more<font color="#CCCCCC"> su-lin its policy by default but it</font>

638
00:21:28,440 --> 00:21:30,750
doesn't do<font color="#E5E5E5"> it two containers by default</font>

639
00:21:29,669 --> 00:21:32,730
so you want to do<font color="#E5E5E5"> that you have to write</font>

640
00:21:30,750 --> 00:21:33,990
<font color="#E5E5E5">your own</font><font color="#CCCCCC"> se lens policies and then</font>

641
00:21:32,730 --> 00:21:36,059
always<font color="#E5E5E5"> done that i think is politically</font>

642
00:21:33,990 --> 00:21:37,259
oh<font color="#E5E5E5"> god right</font><font color="#CCCCCC"> now because it's the most</font>

643
00:21:36,059 --> 00:21:39,210
<font color="#CCCCCC">user-friendly thing of the universe to</font>

644
00:21:37,259 --> 00:21:41,850
<font color="#CCCCCC">have</font><font color="#E5E5E5"> to write and there are another</font>

645
00:21:39,210 --> 00:21:43,259
level of<font color="#E5E5E5"> protection which you can add in</font>

646
00:21:41,850 --> 00:21:44,879
and they will actually<font color="#E5E5E5"> like little sit</font>

647
00:21:43,259 --> 00:21:49,230
on there and<font color="#E5E5E5"> try and stop the container</font>

648
00:21:44,879 --> 00:21:51,600
doing bad things so all that's great but

649
00:21:49,230 --> 00:21:52,919
it leads you to the question that will

650
00:21:51,600 --> 00:21:54,090
get asked all run the thing when people

651
00:21:52,919 --> 00:21:56,610
<font color="#CCCCCC">are talking about deploying containers</font>

652
00:21:54,090 --> 00:21:59,658
which is more secure and the answer is

653
00:21:56,610 --> 00:22:02,399
as if everything is security it depends

654
00:21:59,659 --> 00:22:05,100
if<font color="#E5E5E5"> someone said</font><font color="#CCCCCC"> to be a gun to my</font><font color="#E5E5E5"> head</font>

655
00:22:02,399 --> 00:22:06,479
and said<font color="#E5E5E5"> pick I'm good to save VMs quite</font>

656
00:22:05,100 --> 00:22:09,418
clearly because they have a much smaller

657
00:22:06,480 --> 00:22:10,419
attack surface right hypervisors and the

658
00:22:09,419 --> 00:22:11,980
virtual<font color="#E5E5E5"> hardware that was with</font>

659
00:22:10,419 --> 00:22:13,629
them are quite small code bases that

660
00:22:11,980 --> 00:22:14,799
quite well defined and hopefully the

661
00:22:13,629 --> 00:22:18,279
right now that are quite well audited

662
00:22:14,799 --> 00:22:20,830
the<font color="#CCCCCC"> attack surface for containers is the</font>

663
00:22:18,279 --> 00:22:24,279
linux kernel which is a big thing with

664
00:22:20,830 --> 00:22:25,749
lots of code in it not to say that<font color="#E5E5E5"> you</font>

665
00:22:24,279 --> 00:22:26,919
know<font color="#E5E5E5"> on a given day actually your vm</font>

666
00:22:25,749 --> 00:22:30,639
might be<font color="#E5E5E5"> more vulnerable at a container</font>

667
00:22:26,919 --> 00:22:32,739
ball on an average is basis<font color="#CCCCCC"> i'm going</font><font color="#E5E5E5"> to</font>

668
00:22:30,639 --> 00:22:36,309
<font color="#CCCCCC">take VMS over containers every time in</font>

669
00:22:32,739 --> 00:22:39,190
terms of isolation provided<font color="#E5E5E5"> but it kind</font>

670
00:22:36,309 --> 00:22:40,450
of depends but yeah<font color="#E5E5E5"> i think why would</font>

671
00:22:39,190 --> 00:22:42,429
say<font color="#CCCCCC"> but the</font><font color="#E5E5E5"> other thing about all those</font>

672
00:22:40,450 --> 00:22:45,220
run through a sermon through namespaces

673
00:22:42,429 --> 00:22:46,779
<font color="#E5E5E5">cgroups capabilities says calls there's</font>

674
00:22:45,220 --> 00:22:48,009
a lot<font color="#CCCCCC"> of moving parts there and you have</font>

675
00:22:46,779 --> 00:22:49,299
to do quite<font color="#E5E5E5"> a bit stuff manually if you</font>

676
00:22:48,009 --> 00:22:50,859
want to play<font color="#E5E5E5"> with it there's not like a</font>

677
00:22:49,299 --> 00:22:52,658
good<font color="#E5E5E5"> security profile that we can say</font>

678
00:22:50,859 --> 00:22:54,699
just give<font color="#E5E5E5"> it this profile it's like give</font>

679
00:22:52,659 --> 00:22:56,549
it a second profile give it a second or

680
00:22:54,700 --> 00:23:02,220
drop this capability add this namespace

681
00:22:56,549 --> 00:23:04,690
it's a bit fiddly so defenders view um

682
00:23:02,220 --> 00:23:10,570
you want<font color="#E5E5E5"> to protect yourself from all</font>

683
00:23:04,690 --> 00:23:12,039
this bad stuff how do you<font color="#E5E5E5"> do dr. engine</font>

684
00:23:10,570 --> 00:23:13,840
security<font color="#CCCCCC"> so that was all containers</font><font color="#E5E5E5"> give</font>

685
00:23:12,039 --> 00:23:15,158
you<font color="#E5E5E5"> right that was all it could have</font>

686
00:23:13,840 --> 00:23:16,149
<font color="#CCCCCC">applied to rock it or any of the</font>

687
00:23:15,159 --> 00:23:17,950
container engines that there are out

688
00:23:16,149 --> 00:23:19,809
there<font color="#CCCCCC"> the door</font><font color="#E5E5E5"> engine sits there and it</font>

689
00:23:17,950 --> 00:23:21,190
praises this<font color="#E5E5E5"> demon which you run against</font>

690
00:23:19,809 --> 00:23:22,600
and it's the entry point for doing

691
00:23:21,190 --> 00:23:25,840
anything with darker and there are some

692
00:23:22,600 --> 00:23:27,850
<font color="#E5E5E5">things to know about it first up m it</font>

693
00:23:25,840 --> 00:23:29,369
has a<font color="#E5E5E5"> really kind of weak authentication</font>

694
00:23:27,850 --> 00:23:31,719
<font color="#CCCCCC">and authorization story at the moment</font>

695
00:23:29,369 --> 00:23:33,609
basically if you're local you either

696
00:23:31,720 --> 00:23:35,470
have to<font color="#CCCCCC"> be in the docker group or you</font>

697
00:23:33,609 --> 00:23:37,629
have to run sudo or you have to run<font color="#E5E5E5"> its</font>

698
00:23:35,470 --> 00:23:40,090
<font color="#CCCCCC">root if you're in the darker group your</font>

699
00:23:37,629 --> 00:23:42,219
route anyone you give dr.<font color="#CCCCCC"> grube access</font>

700
00:23:40,090 --> 00:23:44,080
to<font color="#E5E5E5"> israel accept that fact and treat it</font>

701
00:23:42,220 --> 00:23:46,149
<font color="#E5E5E5">and manage those users in that way</font>

702
00:23:44,080 --> 00:23:47,289
because if you go access to talk or dr.

703
00:23:46,149 --> 00:23:48,758
runs as root and you just run a

704
00:23:47,289 --> 00:23:50,649
container that<font color="#E5E5E5"> says mountain ET see</font>

705
00:23:48,759 --> 00:23:52,450
inside this and then change shadow

706
00:23:50,649 --> 00:23:54,459
wherever<font color="#E5E5E5"> else basically except that they</font>

707
00:23:52,450 --> 00:23:57,070
are group remotely<font color="#E5E5E5"> what they do is to</font>

708
00:23:54,460 --> 00:23:58,749
use ssl certificates so you generate an

709
00:23:57,070 --> 00:24:00,340
ssl certificate and have a client sir

710
00:23:58,749 --> 00:24:02,259
and it connects to<font color="#CCCCCC"> it but it's the same</font>

711
00:24:00,340 --> 00:24:04,178
game by default there's no authorization

712
00:24:02,259 --> 00:24:05,679
so once you're in you're in on a given

713
00:24:04,179 --> 00:24:06,820
dr. engine instance if you give someone

714
00:24:05,679 --> 00:24:08,109
access to that they<font color="#CCCCCC"> can</font><font color="#E5E5E5"> basically take</font>

715
00:24:06,820 --> 00:24:11,259
root in the whole story without any

716
00:24:08,109 --> 00:24:12,279
difficulty they are there<font color="#E5E5E5"> is a</font><font color="#CCCCCC"> plug-in</font>

717
00:24:11,259 --> 00:24:13,450
so if you want to<font color="#E5E5E5"> write your own</font>

718
00:24:12,279 --> 00:24:15,070
authorization<font color="#E5E5E5"> plugin they have a</font>

719
00:24:13,450 --> 00:24:17,109
framework for it but i'm not aware this

720
00:24:15,070 --> 00:24:18,609
one I<font color="#E5E5E5"> think that's being written I've</font>

721
00:24:17,109 --> 00:24:19,928
not seen any other<font color="#E5E5E5"> ones so</font><font color="#CCCCCC"> what other</font>

722
00:24:18,609 --> 00:24:21,220
people will do maybe a sit like a web

723
00:24:19,929 --> 00:24:22,659
service or something<font color="#E5E5E5"> on top</font><font color="#CCCCCC"> of that you</font>

724
00:24:21,220 --> 00:24:24,550
log into the web service and it<font color="#E5E5E5"> maybe it</font>

725
00:24:22,659 --> 00:24:25,930
does your authentication piecing

726
00:24:24,550 --> 00:24:30,190
dreams what you can do but by default

727
00:24:25,930 --> 00:24:33,430
there isn't much into container

728
00:24:30,190 --> 00:24:35,530
networking so before<font color="#CCCCCC"> I mentioned the</font>

729
00:24:33,430 --> 00:24:38,230
doctor gets his own network and all the

730
00:24:35,530 --> 00:24:39,820
containers live on there by default they

731
00:24:38,230 --> 00:24:41,590
can all talk to each other or any port

732
00:24:39,820 --> 00:24:42,909
they want which is<font color="#E5E5E5"> kenna misleading</font>

733
00:24:41,590 --> 00:24:44,470
because a lot the doctor documentation

734
00:24:42,910 --> 00:24:45,820
will say it has got this exposed

735
00:24:44,470 --> 00:24:47,800
statement which meant to expose the poor

736
00:24:45,820 --> 00:24:48,909
but really<font color="#CCCCCC"> you don't need it because by</font>

737
00:24:47,800 --> 00:24:51,399
default they can all talk to each other

738
00:24:48,910 --> 00:24:52,930
<font color="#CCCCCC">I want any port so if any of the</font>

739
00:24:51,400 --> 00:24:54,670
services you're running inside dr.<font color="#E5E5E5"> are</font>

740
00:24:52,930 --> 00:24:56,410
making assumptions like hey because I'm

741
00:24:54,670 --> 00:24:57,460
on this isolated network I'm secure

742
00:24:56,410 --> 00:24:58,600
night after whatever<font color="#E5E5E5"> it doing a</font><font color="#CCCCCC"> scent</font>

743
00:24:57,460 --> 00:25:01,270
occation<font color="#E5E5E5"> may be running long ago or</font>

744
00:24:58,600 --> 00:25:03,610
something that's bad are you be in turn

745
00:25:01,270 --> 00:25:05,170
that off so you<font color="#CCCCCC"> set icc equals false and</font>

746
00:25:03,610 --> 00:25:07,479
that goes away and then you have<font color="#E5E5E5"> to</font>

747
00:25:05,170 --> 00:25:09,160
explicitly say this poor this container

748
00:25:07,480 --> 00:25:13,030
to that container which is a lot better

749
00:25:09,160 --> 00:25:15,820
situation to be in the perils are

750
00:25:13,030 --> 00:25:17,710
privileged developers like things to be

751
00:25:15,820 --> 00:25:18,790
nice and<font color="#CCCCCC"> easy and doctor helps them out</font>

752
00:25:17,710 --> 00:25:20,920
there because<font color="#E5E5E5"> it provides a switch</font>

753
00:25:18,790 --> 00:25:22,840
called minus minus privileged if you run

754
00:25:20,920 --> 00:25:24,040
privileged your route the container<font color="#E5E5E5"> is</font>

755
00:25:22,840 --> 00:25:26,110
running as root anything the container

756
00:25:24,040 --> 00:25:28,149
wants to do it can I've seen instances

757
00:25:26,110 --> 00:25:29,740
where documentation will say in order<font color="#CCCCCC"> to</font>

758
00:25:28,150 --> 00:25:31,630
do this one thing just one minus one is

759
00:25:29,740 --> 00:25:33,550
privileged right that's a bad<font color="#CCCCCC"> idea</font>

760
00:25:31,630 --> 00:25:35,110
nevermind Spanish unless you're happy

761
00:25:33,550 --> 00:25:39,790
with the idea that the container is root

762
00:25:35,110 --> 00:25:42,969
on<font color="#CCCCCC"> the host I'm mounting darker sock so</font>

763
00:25:39,790 --> 00:25:44,409
before I said that locally if you want

764
00:25:42,970 --> 00:25:46,630
to use dr. your safety addressing a unix

765
00:25:44,410 --> 00:25:50,110
socket people will note that socket

766
00:25:46,630 --> 00:25:51,280
inside the container to do like to find

767
00:25:50,110 --> 00:25:52,959
out<font color="#E5E5E5"> information about what doctors doing</font>

768
00:25:51,280 --> 00:25:54,190
and there are business cases where

769
00:25:52,960 --> 00:25:55,390
people want to<font color="#E5E5E5"> do that I've talked to</font>

770
00:25:54,190 --> 00:25:57,190
<font color="#E5E5E5">developers about this they say oh yeah</font>

771
00:25:55,390 --> 00:25:58,600
we do that because we have this

772
00:25:57,190 --> 00:26:00,640
container that does management and

773
00:25:58,600 --> 00:26:02,409
monitoring stuff if you can get<font color="#E5E5E5"> to</font>

774
00:26:00,640 --> 00:26:04,120
darker sock your route on<font color="#CCCCCC"> the host</font>

775
00:26:02,410 --> 00:26:05,710
because you can just run dog commands

776
00:26:04,120 --> 00:26:07,149
against it so you just<font color="#CCCCCC"> if you get into a</font>

777
00:26:05,710 --> 00:26:08,560
container and dr. Salk is there you

778
00:26:07,150 --> 00:26:11,560
download a copy the doctor binary<font color="#E5E5E5"> as a</font>

779
00:26:08,560 --> 00:26:13,750
point to that and they do everyone even

780
00:26:11,560 --> 00:26:15,550
if you meant it read only so if you<font color="#CCCCCC"> were</font>

781
00:26:13,750 --> 00:26:16,870
<font color="#CCCCCC">to</font><font color="#E5E5E5"> read only I did this blog post where</font>

782
00:26:15,550 --> 00:26:18,159
<font color="#CCCCCC">as like aa</font><font color="#E5E5E5"> you just need to mint repeat</font>

783
00:26:16,870 --> 00:26:20,409
only then someone said no that's<font color="#E5E5E5"> the</font>

784
00:26:18,160 --> 00:26:22,810
works and<font color="#E5E5E5"> so oh I didn't</font><font color="#CCCCCC"> expect that it</font>

785
00:26:20,410 --> 00:26:24,640
does though try it so yeah magnetic dr.

786
00:26:22,810 --> 00:26:25,780
Salk is is dangerous and again<font color="#E5E5E5"> something</font>

787
00:26:24,640 --> 00:26:27,490
you should watch out for if<font color="#E5E5E5"> people are</font>

788
00:26:25,780 --> 00:26:28,810
deploying darker watch out<font color="#CCCCCC"> for people</font>

789
00:26:27,490 --> 00:26:29,830
who want to mount dora sock inside a

790
00:26:28,810 --> 00:26:31,330
container because they're basically

791
00:26:29,830 --> 00:26:35,800
saying I trust this container or not to

792
00:26:31,330 --> 00:26:37,659
do bad things dr. hub so yeah I talked

793
00:26:35,800 --> 00:26:37,928
before about as this app store and which

794
00:26:37,660 --> 00:26:40,090
is

795
00:26:37,929 --> 00:26:42,309
hub are and it's<font color="#E5E5E5"> really cool and</font><font color="#CCCCCC"> it's</font>

796
00:26:40,090 --> 00:26:46,629
<font color="#E5E5E5">really great but you have to be a wee</font>

797
00:26:42,309 --> 00:26:48,850
bit careful so image provenance is

798
00:26:46,629 --> 00:26:50,080
really important and it's just like<font color="#E5E5E5"> if</font>

799
00:26:48,850 --> 00:26:51,850
you're using<font color="#E5E5E5"> open source anything else</font>

800
00:26:50,080 --> 00:26:53,559
if<font color="#E5E5E5"> you're using node or using Ruby or</font>

801
00:26:51,850 --> 00:26:55,059
using Python you have all these modules

802
00:26:53,559 --> 00:26:56,649
in<font color="#CCCCCC"> this great app store and</font><font color="#E5E5E5"> you can just</font>

803
00:26:55,059 --> 00:26:58,720
go install this module and it's all

804
00:26:56,649 --> 00:27:00,549
great who wrote that module where did

805
00:26:58,720 --> 00:27:01,960
they come from where they secure with

806
00:27:00,549 --> 00:27:03,460
the security conscious do they do bad

807
00:27:01,960 --> 00:27:05,139
things where they employed by someone

808
00:27:03,460 --> 00:27:06,789
who maybe doesn't like your company all

809
00:27:05,139 --> 00:27:08,229
sorts of potential problems and docker

810
00:27:06,789 --> 00:27:11,619
hub is the same they do have some

811
00:27:08,230 --> 00:27:13,450
trusted images so people have been<font color="#E5E5E5"> to</font><font color="#CCCCCC"> in</font>

812
00:27:11,619 --> 00:27:14,860
<font color="#CCCCCC">davie on</font><font color="#E5E5E5"> the OS</font><font color="#CCCCCC"> manufacturers a put-up</font>

813
00:27:13,450 --> 00:27:16,809
clustered images which are braided by

814
00:27:14,860 --> 00:27:18,850
them and managed<font color="#CCCCCC"> by darker that's okay</font>

815
00:27:16,809 --> 00:27:20,289
everyone every other image you get you

816
00:27:18,850 --> 00:27:23,049
should have a look at the<font color="#E5E5E5"> doc repellency</font>

817
00:27:20,289 --> 00:27:24,639
how is essentially being created a nun

818
00:27:23,049 --> 00:27:26,168
really important point<font color="#E5E5E5"> is that docker</font>

819
00:27:24,639 --> 00:27:27,969
files which<font color="#E5E5E5"> is how you build a container</font>

820
00:27:26,169 --> 00:27:29,350
essentially like a<font color="#E5E5E5"> batch bash script</font>

821
00:27:27,970 --> 00:27:31,230
they basically have command like go<font color="#E5E5E5"> and</font>

822
00:27:29,350 --> 00:27:33,459
get this file go and do<font color="#CCCCCC"> this they're</font>

823
00:27:31,230 --> 00:27:34,450
iterative so one drop profile inherit

824
00:27:33,460 --> 00:27:35,769
some another doctor<font color="#E5E5E5"> polym</font><font color="#CCCCCC"> harris or</font>

825
00:27:34,450 --> 00:27:37,690
another doctor file you need to check

826
00:27:35,769 --> 00:27:38,649
all of them<font color="#E5E5E5"> because if some one halfway</font>

827
00:27:37,690 --> 00:27:41,590
up that tree someone does something

828
00:27:38,649 --> 00:27:43,389
really stupid like<font color="#CCCCCC"> W get file from a</font>

829
00:27:41,590 --> 00:27:45,970
random not https source and just take it

830
00:27:43,389 --> 00:27:48,508
to bash you know you could infect the

831
00:27:45,970 --> 00:27:51,549
entire chain of containers if I was

832
00:27:48,509 --> 00:27:53,950
deploying in production<font color="#E5E5E5"> I wouldn't use</font>

833
00:27:51,549 --> 00:27:56,429
docker hub unless I had private images

834
00:27:53,950 --> 00:27:58,539
because and I manage them all myself

835
00:27:56,429 --> 00:28:00,340
because<font color="#E5E5E5"> you really are trusting a lot of</font>

836
00:27:58,539 --> 00:28:02,350
<font color="#E5E5E5">people I would have you can get your own</font>

837
00:28:00,340 --> 00:28:04,029
internal docker registry and put your

838
00:28:02,350 --> 00:28:05,439
ear images there look<font color="#E5E5E5"> at other peoples</font>

839
00:28:04,029 --> 00:28:06,759
docker files for inspiration but don't

840
00:28:05,440 --> 00:28:07,960
use them in production because they

841
00:28:06,759 --> 00:28:09,940
could change them and then if you're

842
00:28:07,960 --> 00:28:10,929
pulling from latest you've suddenly got

843
00:28:09,940 --> 00:28:12,309
changed image and it might do something

844
00:28:10,929 --> 00:28:13,059
you didn't<font color="#E5E5E5"> want it</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> and you didn't</font>

845
00:28:12,309 --> 00:28:14,320
necessarily know it's going to<font color="#E5E5E5"> happen</font>

846
00:28:13,059 --> 00:28:16,749
actually happened to me of my demos

847
00:28:14,320 --> 00:28:19,629
today I was doing<font color="#CCCCCC"> that little demo with</font>

848
00:28:16,749 --> 00:28:21,369
the fire up 10 vintage<font color="#E5E5E5"> and I called</font>

849
00:28:19,629 --> 00:28:22,418
pulled from latest and I didn't realize

850
00:28:21,369 --> 00:28:24,340
the latest image it got rid of if

851
00:28:22,419 --> 00:28:25,929
conflict inside the container it's like

852
00:28:24,340 --> 00:28:27,070
my demo was failed randomly and I

853
00:28:25,929 --> 00:28:28,419
realized what happened<font color="#CCCCCC"> that</font><font color="#E5E5E5"> I was</font>

854
00:28:27,070 --> 00:28:30,759
getting a little image and they've moved

855
00:28:28,419 --> 00:28:33,940
on 1604 from 1404 so yeah you have<font color="#E5E5E5"> to be</font>

856
00:28:30,759 --> 00:28:36,360
really careful with images and image

857
00:28:33,940 --> 00:28:38,559
hardening so one of the big benefits of

858
00:28:36,360 --> 00:28:40,809
containers and one of the huge benefits

859
00:28:38,559 --> 00:28:42,129
doing this is that<font color="#E5E5E5"> you are locking down</font>

860
00:28:40,809 --> 00:28:43,899
the container and<font color="#E5E5E5"> you're saying right</font>

861
00:28:42,129 --> 00:28:45,428
you get<font color="#E5E5E5"> is very isolated environment and</font>

862
00:28:43,899 --> 00:28:47,739
you can't do a lot of stuff you can't

863
00:28:45,429 --> 00:28:49,330
break out people put all sorts of stuff

864
00:28:47,740 --> 00:28:51,100
inside their images that<font color="#CCCCCC"> they probably</font>

865
00:28:49,330 --> 00:28:51,580
<font color="#E5E5E5">shouldn't they've run like big hundred</font>

866
00:28:51,100 --> 00:28:53,350
Meg to

867
00:28:51,580 --> 00:28:55,270
make images there's no need for<font color="#E5E5E5"> that you</font>

868
00:28:53,350 --> 00:28:57,280
can get<font color="#E5E5E5"> an hour pain linux image which</font>

869
00:28:55,270 --> 00:28:58,510
is<font color="#E5E5E5"> reasonably functional in five</font><font color="#CCCCCC"> meg all</font>

870
00:28:57,280 --> 00:28:59,920
<font color="#CCCCCC">right so in terms of attack surface in</font>

871
00:28:58,510 --> 00:29:01,510
<font color="#E5E5E5">terms of what the attacker can do if</font>

872
00:28:59,920 --> 00:29:02,770
they<font color="#CCCCCC"> compromised a container you're</font>

873
00:29:01,510 --> 00:29:06,640
locked a<font color="#E5E5E5"> lockdown if you've got a lot</font>

874
00:29:02,770 --> 00:29:07,780
<font color="#CCCCCC">less to attack with so your image</font>

875
00:29:06,640 --> 00:29:10,420
hardening is important oh and<font color="#E5E5E5"> the other</font>

876
00:29:07,780 --> 00:29:11,649
thing<font color="#E5E5E5"> is patching so you're</font><font color="#CCCCCC"> putting all</font>

877
00:29:10,420 --> 00:29:14,350
these boundaries inside containers that

878
00:29:11,650 --> 00:29:15,910
doesn't literally patched the more

879
00:29:14,350 --> 00:29:18,030
binary<font color="#CCCCCC"> pions had a container image the</font>

880
00:29:15,910 --> 00:29:21,870
more I matching you got to do so the

881
00:29:18,030 --> 00:29:24,820
leader of the image the less patching

882
00:29:21,870 --> 00:29:27,489
takes a<font color="#CCCCCC"> loop for its really really easy</font>

883
00:29:24,820 --> 00:29:28,990
i mean the term vm sprawl has become a

884
00:29:27,490 --> 00:29:30,070
thing<font color="#E5E5E5"> at every one is about vm sprawl</font>

885
00:29:28,990 --> 00:29:31,720
you have to watch out that people create

886
00:29:30,070 --> 00:29:33,490
these<font color="#CCCCCC"> v ends</font><font color="#E5E5E5"> and leave them and they're</font>

887
00:29:31,720 --> 00:29:35,560
not they're starting containers is

888
00:29:33,490 --> 00:29:37,150
really really really easy and it doesn't

889
00:29:35,560 --> 00:29:38,440
necessarily clean up after itself you

890
00:29:37,150 --> 00:29:40,740
can leave containers lying around on

891
00:29:38,440 --> 00:29:43,030
hosts and images lying around on hosts

892
00:29:40,740 --> 00:29:44,380
with redundant information and maybe

893
00:29:43,030 --> 00:29:45,550
also the running container you did

894
00:29:44,380 --> 00:29:47,830
something sensitive inside that

895
00:29:45,550 --> 00:29:49,780
container if you don't delete it

896
00:29:47,830 --> 00:29:51,669
afterwards and you<font color="#E5E5E5"> don't remember to</font>

897
00:29:49,780 --> 00:29:53,110
bestbuy the RM<font color="#E5E5E5"> swift italy it's still</font>

898
00:29:51,670 --> 00:29:54,400
sitting there<font color="#E5E5E5"> on desk waiting for</font>

899
00:29:53,110 --> 00:29:55,659
someone to<font color="#E5E5E5"> come along and find it so you</font>

900
00:29:54,400 --> 00:29:58,060
can easily have stuff lying around you

901
00:29:55,660 --> 00:29:59,890
<font color="#E5E5E5">don't want to secrets management is a</font>

902
00:29:58,060 --> 00:30:01,060
bit of a tricky area so obviously you're

903
00:29:59,890 --> 00:30:02,350
starting up servers they need to know

904
00:30:01,060 --> 00:30:04,000
how<font color="#E5E5E5"> to do things like</font><font color="#CCCCCC"> login</font><font color="#E5E5E5"> to other</font>

905
00:30:02,350 --> 00:30:06,040
services<font color="#E5E5E5"> so they may be did an API key</font>

906
00:30:04,000 --> 00:30:08,650
and they may be need credits for a

907
00:30:06,040 --> 00:30:10,210
database at the moment that tends to be

908
00:30:08,650 --> 00:30:11,680
done by environment variables so you

909
00:30:10,210 --> 00:30:13,540
pass in some environment variables when

910
00:30:11,680 --> 00:30:14,860
you launch the container managing and

911
00:30:13,540 --> 00:30:16,510
storing those environment variables is

912
00:30:14,860 --> 00:30:17,860
kind of important because this is all

913
00:30:16,510 --> 00:30:19,629
meant<font color="#CCCCCC"> to work in like automated</font>

914
00:30:17,860 --> 00:30:20,830
continuous integration processes where

915
00:30:19,630 --> 00:30:22,720
you don't<font color="#E5E5E5"> have</font><font color="#CCCCCC"> a human signal Iroquois</font>

916
00:30:20,830 --> 00:30:23,830
typing it the<font color="#E5E5E5"> password every time it's</font>

917
00:30:22,720 --> 00:30:25,810
all stored somewhere so where that

918
00:30:23,830 --> 00:30:28,510
<font color="#E5E5E5">stored and where it's coming from and</font>

919
00:30:25,810 --> 00:30:30,550
have it secured is really important<font color="#E5E5E5"> and</font>

920
00:30:28,510 --> 00:30:32,170
container history so you remember should

921
00:30:30,550 --> 00:30:33,520
you<font color="#E5E5E5"> talk or diff there you can also do</font>

922
00:30:32,170 --> 00:30:34,690
docker history I don't show<font color="#CCCCCC"> you</font>

923
00:30:33,520 --> 00:30:36,639
everything commander has ever run inside

924
00:30:34,690 --> 00:30:38,440
that<font color="#E5E5E5"> container it's great for</font><font color="#CCCCCC"> forensics</font>

925
00:30:36,640 --> 00:30:39,880
standpoint right off but dangerous if

926
00:30:38,440 --> 00:30:40,870
you're<font color="#CCCCCC"> leaving it lying around you know</font>

927
00:30:39,880 --> 00:30:41,950
you<font color="#E5E5E5"> got these containers left lying</font>

928
00:30:40,870 --> 00:30:43,629
around maybe you did something like that

929
00:30:41,950 --> 00:30:44,830
password in someone gets access to it

930
00:30:43,630 --> 00:30:46,750
looks at the history goes all look I've

931
00:30:44,830 --> 00:30:49,210
got a new password to play with<font color="#E5E5E5"> so</font>

932
00:30:46,750 --> 00:30:51,430
definitely watch out for that wall and

933
00:30:49,210 --> 00:30:53,620
tools you're not so there are<font color="#E5E5E5"> some tools</font>

934
00:30:51,430 --> 00:30:56,020
look at this and to help so this docker

935
00:30:53,620 --> 00:30:58,239
bench which is dr. provider and it's a

936
00:30:56,020 --> 00:31:01,000
docker image which essentially analyzes

937
00:30:58,240 --> 00:31:02,680
the running set of running<font color="#E5E5E5"> dr. engine</font>

938
00:31:01,000 --> 00:31:04,480
all the containers and looks for best

939
00:31:02,680 --> 00:31:05,260
practice which it gets from the<font color="#CCCCCC"> CIS</font>

940
00:31:04,480 --> 00:31:07,000
guide

941
00:31:05,260 --> 00:31:08,620
interestingly<font color="#CCCCCC"> the darker bench because</font>

942
00:31:07,000 --> 00:31:10,300
it is to do that<font color="#E5E5E5"> runs with all this</font>

943
00:31:08,620 --> 00:31:11,649
terminal turns off all the security so

944
00:31:10,300 --> 00:31:14,020
be very sure you want it's from docker

945
00:31:11,650 --> 00:31:15,130
so you probably can trust it<font color="#E5E5E5"> but yeah it</font>

946
00:31:14,020 --> 00:31:16,330
turns off all the security in order to

947
00:31:15,130 --> 00:31:18,310
me in that work and it gets it from the

948
00:31:16,330 --> 00:31:19,780
citizen<font color="#CCCCCC"> CIS guide which is reasonably up</font>

949
00:31:18,310 --> 00:31:20,770
to date I think they're going<font color="#E5E5E5"> to have a</font>

950
00:31:19,780 --> 00:31:22,450
challenge keeping up to date all the

951
00:31:20,770 --> 00:31:24,190
<font color="#E5E5E5">time but it is relatively up to date a</font>

952
00:31:22,450 --> 00:31:25,420
bit wordy but it is good<font color="#E5E5E5"> place to start</font>

953
00:31:24,190 --> 00:31:30,190
for in terms of like gardening

954
00:31:25,420 --> 00:31:31,900
information so attackers view you might

955
00:31:30,190 --> 00:31:36,040
be a pen tester wanting to play with

956
00:31:31,900 --> 00:31:38,650
these things um the first thing<font color="#E5E5E5"> to look</font>

957
00:31:36,040 --> 00:31:42,820
for is it so see I'm doing a web app

958
00:31:38,650 --> 00:31:44,230
test and I I get shield the box first<font color="#E5E5E5"> of</font>

959
00:31:42,820 --> 00:31:45,520
<font color="#E5E5E5">all</font><font color="#CCCCCC"> this how do I nominate container</font>

960
00:31:44,230 --> 00:31:47,500
<font color="#E5E5E5">alright so I've got a real good</font>

961
00:31:45,520 --> 00:31:49,450
execution what do<font color="#CCCCCC"> I do look at your</font>

962
00:31:47,500 --> 00:31:51,220
process list if your process list

963
00:31:49,450 --> 00:31:52,510
doesn't have an init process one or

964
00:31:51,220 --> 00:31:54,220
<font color="#E5E5E5">something like that you're probably in a</font>

965
00:31:52,510 --> 00:31:56,650
container if you got<font color="#E5E5E5"> Apache as process</font>

966
00:31:54,220 --> 00:31:58,210
PID one you're<font color="#E5E5E5"> in a container if you</font>

967
00:31:56,650 --> 00:32:01,540
have no processes releasing<font color="#CCCCCC"> two hardware</font>

968
00:31:58,210 --> 00:32:02,860
management you're in a container that's

969
00:32:01,540 --> 00:32:05,290
the easiest way to find out if you guys

970
00:32:02,860 --> 00:32:08,469
it's a PS which probably do that's

971
00:32:05,290 --> 00:32:09,970
that's well worth doing available

972
00:32:08,470 --> 00:32:11,350
programs so if they've done<font color="#CCCCCC"> a good job</font>

973
00:32:09,970 --> 00:32:13,030
of container hardening you might not

974
00:32:11,350 --> 00:32:14,260
have W get you might not have curl you

975
00:32:13,030 --> 00:32:16,540
might have a lot of tools you're used to

976
00:32:14,260 --> 00:32:19,060
using for compromising systems so it's

977
00:32:16,540 --> 00:32:20,350
well worth if that starts happening then

978
00:32:19,060 --> 00:32:21,700
<font color="#E5E5E5">you might start thinking here I've wiser</font>

979
00:32:20,350 --> 00:32:25,270
w get the answers you're prolly in a

980
00:32:21,700 --> 00:32:27,820
container and read only files as root so

981
00:32:25,270 --> 00:32:28,960
you might<font color="#CCCCCC"> think all you do at uid you</font>

982
00:32:27,820 --> 00:32:30,280
find out your route and then suddenly

983
00:32:28,960 --> 00:32:31,630
<font color="#E5E5E5">you're finding things are read-only that</font>

984
00:32:30,280 --> 00:32:33,070
shouldn't be that's<font color="#E5E5E5"> probably because</font>

985
00:32:31,630 --> 00:32:34,960
you're<font color="#E5E5E5"> in a container the amount several</font>

986
00:32:33,070 --> 00:32:38,080
kind of like various other file systems

987
00:32:34,960 --> 00:32:42,340
as read-only so you can't do the things

988
00:32:38,080 --> 00:32:44,379
you want to do breaking out so you<font color="#E5E5E5"> want</font>

989
00:32:42,340 --> 00:32:45,280
to do<font color="#E5E5E5"> a container break out the best way</font>

990
00:32:44,380 --> 00:32:47,500
to do<font color="#CCCCCC"> it is fine the colonel</font>

991
00:32:45,280 --> 00:32:49,810
vulnerability if the host Colonel isn't

992
00:32:47,500 --> 00:32:51,370
patched properly or you are<font color="#E5E5E5"> really cool</font>

993
00:32:49,810 --> 00:32:53,020
and<font color="#E5E5E5"> you have a</font><font color="#CCCCCC"> zero-day in the linux</font>

994
00:32:51,370 --> 00:32:55,120
kernel you can get out with that in a

995
00:32:53,020 --> 00:32:57,010
lot<font color="#E5E5E5"> of cases unless the cisco that uses</font>

996
00:32:55,120 --> 00:32:58,689
is filtered now or the kitty or<font color="#E5E5E5"> its plot</font>

997
00:32:57,010 --> 00:33:00,550
<font color="#E5E5E5">my capabilities so depending on how</font>

998
00:32:58,690 --> 00:33:02,320
<font color="#CCCCCC">hardened the containers are that that</font>

999
00:33:00,550 --> 00:33:04,510
might not<font color="#E5E5E5"> be too hard definitely if you</font>

1000
00:33:02,320 --> 00:33:07,240
look at the as a guy doing talks this

1001
00:33:04,510 --> 00:33:08,650
year on dr.<font color="#E5E5E5"> break oh and also</font><font color="#CCCCCC"> p.m.</font>

1002
00:33:07,240 --> 00:33:10,750
<font color="#CCCCCC">breakout she's like saying Hank break</font>

1003
00:33:08,650 --> 00:33:12,190
into both but the one<font color="#CCCCCC"> who's dr. wouldn't</font>

1004
00:33:10,750 --> 00:33:14,950
seem to be as a kernel vulnerability

1005
00:33:12,190 --> 00:33:16,600
<font color="#E5E5E5">which he's using to break out mounted</font>

1006
00:33:14,950 --> 00:33:18,390
file systems so you can mount file

1007
00:33:16,600 --> 00:33:20,250
systems we saw me doing there i melted

1008
00:33:18,390 --> 00:33:22,290
factory inside<font color="#E5E5E5"> my container people</font>

1009
00:33:20,250 --> 00:33:24,240
running containers might mount<font color="#CCCCCC"> faster</font>

1010
00:33:22,290 --> 00:33:25,590
<font color="#CCCCCC">since they shouldn't like /</font><font color="#E5E5E5"> gtc inside</font>

1011
00:33:24,240 --> 00:33:27,150
the container which might be very

1012
00:33:25,590 --> 00:33:28,590
<font color="#E5E5E5">dangerous so watching find out what you</font>

1013
00:33:27,150 --> 00:33:31,470
got mounted is a good way if you're

1014
00:33:28,590 --> 00:33:33,000
<font color="#E5E5E5">breaking out dr dot sock access yeah if</font>

1015
00:33:31,470 --> 00:33:34,170
they've been to<font color="#CCCCCC"> dr. sockets game over</font>

1016
00:33:33,000 --> 00:33:35,910
you can get the<font color="#E5E5E5"> host up really quickly</font>

1017
00:33:34,170 --> 00:33:38,400
just download docker and run it and it's

1018
00:33:35,910 --> 00:33:40,110
really<font color="#E5E5E5"> easy I'm container network access</font>

1019
00:33:38,400 --> 00:33:41,280
so that was that bit before<font color="#E5E5E5"> I was</font>

1020
00:33:40,110 --> 00:33:43,139
talking about<font color="#CCCCCC"> we're saying</font><font color="#E5E5E5"> that you know</font>

1021
00:33:41,280 --> 00:33:45,629
<font color="#E5E5E5">does this contain our network and you</font>

1022
00:33:43,140 --> 00:33:47,130
can go<font color="#E5E5E5"> around and scanner in that and</font>

1023
00:33:45,630 --> 00:33:50,330
try and<font color="#E5E5E5"> find other vulnerable hosts</font>

1024
00:33:47,130 --> 00:33:50,330
that's not a bad they're doing it

1025
00:33:50,870 --> 00:33:59,820
conclusion cool so yeah in conclusion

1026
00:33:56,850 --> 00:34:01,919
why would say<font color="#CCCCCC"> about docker</font><font color="#E5E5E5"> is it is very</font>

1027
00:33:59,820 --> 00:34:06,360
useful right it's very<font color="#E5E5E5"> handy it's very</font>

1028
00:34:01,920 --> 00:34:07,650
convenient the security isn't the same

1029
00:34:06,360 --> 00:34:09,239
as running on a separate<font color="#CCCCCC"> principle host</font>

1030
00:34:07,650 --> 00:34:11,100
<font color="#E5E5E5">and anyone tells you</font><font color="#CCCCCC"> it's as good as</font><font color="#E5E5E5"> I</font>

1031
00:34:09,239 --> 00:34:13,979
personally think<font color="#E5E5E5"> telling being entirely</font>

1032
00:34:11,100 --> 00:34:15,690
truthful because of the bigger attack

1033
00:34:13,980 --> 00:34:17,399
surface but that said there's a lot you

1034
00:34:15,690 --> 00:34:18,810
can do to lock it down and there's a<font color="#E5E5E5"> lot</font>

1035
00:34:17,399 --> 00:34:20,580
you can do to make it<font color="#CCCCCC"> more secure if</font>

1036
00:34:18,810 --> 00:34:22,469
you're worried about<font color="#CCCCCC"> that it does</font>

1037
00:34:20,580 --> 00:34:24,270
provide a level of isolation as part of

1038
00:34:22,469 --> 00:34:26,370
a kind<font color="#E5E5E5"> of overall solution it might be</font>

1039
00:34:24,270 --> 00:34:29,130
<font color="#CCCCCC">an</font><font color="#E5E5E5"> is a good place and realistically</font>

1040
00:34:26,370 --> 00:34:30,630
<font color="#CCCCCC">speaking people are going to start</font><font color="#E5E5E5"> using</font>

1041
00:34:29,130 --> 00:34:32,550
containers whether you want them to at

1042
00:34:30,630 --> 00:34:33,510
<font color="#E5E5E5">all if your</font><font color="#CCCCCC"> insecurities realistically I</font>

1043
00:34:32,550 --> 00:34:35,159
think trying to hold back the

1044
00:34:33,510 --> 00:34:36,390
containerization saying not doing that

1045
00:34:35,159 --> 00:34:38,460
isn't<font color="#E5E5E5"> going to be a winning</font><font color="#CCCCCC"> game in the</font>

1046
00:34:36,389 --> 00:34:40,500
long term so it's better to try and work

1047
00:34:38,460 --> 00:34:41,820
how we can actually<font color="#E5E5E5"> say okay</font><font color="#CCCCCC"> what</font><font color="#E5E5E5"> how</font>

1048
00:34:40,500 --> 00:34:44,219
can we make this better help me<font color="#E5E5E5"> secure</font>

1049
00:34:41,820 --> 00:34:46,260
it more rather than try<font color="#CCCCCC"> to say no and</font>

1050
00:34:44,219 --> 00:34:47,639
<font color="#CCCCCC">the scooter wasn't good but it isn't</font>

1051
00:34:46,260 --> 00:34:48,960
<font color="#CCCCCC">perfect yet but it is improving so</font>

1052
00:34:47,639 --> 00:34:50,370
things are getting better they are

1053
00:34:48,960 --> 00:34:51,840
adding new<font color="#E5E5E5"> features they are locking</font>

1054
00:34:50,370 --> 00:34:54,480
things down there giving you more

1055
00:34:51,840 --> 00:34:55,830
options next there's meant to becoming a

1056
00:34:54,480 --> 00:34:57,360
security profile option where you can

1057
00:34:55,830 --> 00:34:59,190
actually<font color="#E5E5E5"> just say here's a predefined</font>

1058
00:34:57,360 --> 00:35:01,920
security profile for white container run

1059
00:34:59,190 --> 00:35:03,300
this and there's lots<font color="#E5E5E5"> of potential as a</font>

1060
00:35:01,920 --> 00:35:04,590
lot of potential<font color="#E5E5E5"> for actually using it</font>

1061
00:35:03,300 --> 00:35:05,790
in security I've seen you start to see

1062
00:35:04,590 --> 00:35:07,470
blog<font color="#E5E5E5"> posts people coming up saying</font>

1063
00:35:05,790 --> 00:35:09,509
here's a nice way<font color="#E5E5E5"> to do something</font>

1064
00:35:07,470 --> 00:35:11,790
complicated with pen test tools and you

1065
00:35:09,510 --> 00:35:14,130
can just set make a container image no

1066
00:35:11,790 --> 00:35:15,360
way you go<font color="#CCCCCC"> there's guide to 114 wash art</font>

1067
00:35:14,130 --> 00:35:16,680
stuff and the other day<font color="#CCCCCC"> that was very</font>

1068
00:35:15,360 --> 00:35:17,910
useful<font color="#CCCCCC"> you can just say rocky I can</font>

1069
00:35:16,680 --> 00:35:19,529
<font color="#E5E5E5">create this image I'd have to worry</font>

1070
00:35:17,910 --> 00:35:20,790
about dependencies I mean you run some

1071
00:35:19,530 --> 00:35:21,870
<font color="#E5E5E5">of the old pen testing tools you know</font>

1072
00:35:20,790 --> 00:35:23,610
it's gets like stuff<font color="#CCCCCC"> written all</font>

1073
00:35:21,870 --> 00:35:25,500
<font color="#CCCCCC">versions of pearl that you know no one</font>

1074
00:35:23,610 --> 00:35:27,360
uses any more and you know<font color="#E5E5E5"> put it in a</font>

1075
00:35:25,500 --> 00:35:28,800
container image and keep that there with

1076
00:35:27,360 --> 00:35:30,210
all its very old dependencies that may

1077
00:35:28,800 --> 00:35:31,650
be vulnerable you don't want left lying

1078
00:35:30,210 --> 00:35:32,250
around on<font color="#E5E5E5"> your system keep it in</font><font color="#CCCCCC"> a</font>

1079
00:35:31,650 --> 00:35:33,690
container

1080
00:35:32,250 --> 00:35:36,090
in a way it goes it's a nice way<font color="#E5E5E5"> to keep</font>

1081
00:35:33,690 --> 00:35:39,750
access to all tools as well and lots of

1082
00:35:36,090 --> 00:35:41,010
potential Oh further reading if you want

1083
00:35:39,750 --> 00:35:42,180
to do further reading this is this is

1084
00:35:41,010 --> 00:35:44,190
sparked off a great interest in

1085
00:35:42,180 --> 00:35:45,779
container and container security and CC

1086
00:35:44,190 --> 00:35:47,640
actually have and I know I'm pimping a

1087
00:35:45,780 --> 00:35:50,190
sec<font color="#E5E5E5"> here I feel bad but they do have</font><font color="#CCCCCC"> two</font>

1088
00:35:47,640 --> 00:35:52,319
really<font color="#E5E5E5"> good white papers on this there's</font>

1089
00:35:50,190 --> 00:35:53,790
<font color="#CCCCCC">one about approve abusing privilege</font>

1090
00:35:52,320 --> 00:35:56,460
unprivileged containers which is carry a

1091
00:35:53,790 --> 00:35:57,810
couple couple of days ago<font color="#E5E5E5"> actually and</font>

1092
00:35:56,460 --> 00:35:59,160
that's focusing on trying to break out

1093
00:35:57,810 --> 00:36:00,870
<font color="#E5E5E5">and the different ways you can try and</font>

1094
00:35:59,160 --> 00:36:03,390
break out and it talks a lot<font color="#CCCCCC"> more depth</font>

1095
00:36:00,870 --> 00:36:05,100
about how you can abuse syscalls and the

1096
00:36:03,390 --> 00:36:06,810
various ways you can try and and get out

1097
00:36:05,100 --> 00:36:08,790
of the container the other one is

1098
00:36:06,810 --> 00:36:11,370
understanding and hardening<font color="#E5E5E5"> linux</font>

1099
00:36:08,790 --> 00:36:13,170
containers which came out<font color="#E5E5E5"> april and</font>

1100
00:36:11,370 --> 00:36:14,490
that's a big long paper<font color="#CCCCCC"> it was</font><font color="#E5E5E5"> it a lot</font>

1101
00:36:13,170 --> 00:36:16,080
<font color="#E5E5E5">the history but we're containers have</font>

1102
00:36:14,490 --> 00:36:17,970
come from and how they've kind of

1103
00:36:16,080 --> 00:36:21,299
developed and<font color="#CCCCCC"> the different ways you can</font>

1104
00:36:17,970 --> 00:36:22,410
secure them and do various things with

1105
00:36:21,300 --> 00:36:23,550
them and<font color="#CCCCCC"> again it kind</font><font color="#E5E5E5"> of covers other</font>

1106
00:36:22,410 --> 00:36:24,930
it doesn't<font color="#CCCCCC"> just</font><font color="#E5E5E5"> cover docker it covers</font>

1107
00:36:23,550 --> 00:36:28,860
<font color="#E5E5E5">like rocketing the various competitors</font>

1108
00:36:24,930 --> 00:36:31,259
<font color="#CCCCCC">to questions oh and contact details um</font>

1109
00:36:28,860 --> 00:36:33,510
the slides for<font color="#CCCCCC"> this are on github and</font>

1110
00:36:31,260 --> 00:36:35,340
they are on docker i will put or tweet

1111
00:36:33,510 --> 00:36:37,200
out later<font color="#E5E5E5"> on to vent was to just follow</font>

1112
00:36:35,340 --> 00:36:41,300
<font color="#E5E5E5">that or look at that and i'll tweet</font>

1113
00:36:37,200 --> 00:36:41,299
earlier on any questions

