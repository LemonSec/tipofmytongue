1
00:00:00,120 --> 00:00:04,680
[Applause]

2
00:00:00,920 --> 00:00:06,060
so hi everyone<font color="#E5E5E5"> I'm Felix</font><font color="#CCCCCC"> I'm a</font><font color="#E5E5E5"> freelance</font>

3
00:00:04,680 --> 00:00:07,770
<font color="#CCCCCC">pen</font><font color="#E5E5E5"> tester</font><font color="#CCCCCC"> I've been doing this for a</font>

4
00:00:06,060 --> 00:00:11,790
<font color="#E5E5E5">while now</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> breaking it to stuff you</font>

5
00:00:07,770 --> 00:00:13,678
know<font color="#E5E5E5"> longer but yeah</font><font color="#CCCCCC"> today I'm here to</font>

6
00:00:11,790 --> 00:00:17,009
talk<font color="#E5E5E5"> to you about some</font><font color="#CCCCCC"> work</font><font color="#E5E5E5"> that I did</font>

7
00:00:13,679 --> 00:00:19,500
<font color="#E5E5E5">for</font><font color="#CCCCCC"> my Master's dissertation</font><font color="#E5E5E5"> essentially</font>

8
00:00:17,010 --> 00:00:21,210
<font color="#E5E5E5">I was told</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> always find a find a</font>

9
00:00:19,500 --> 00:00:24,000
project<font color="#CCCCCC"> you go do some sort</font><font color="#E5E5E5"> of mild</font>

10
00:00:21,210 --> 00:00:25,800
research and at the same time<font color="#E5E5E5"> I had a</font>

11
00:00:24,000 --> 00:00:28,830
client that basically with you to take

12
00:00:25,800 --> 00:00:31,140
<font color="#E5E5E5">my word</font><font color="#CCCCCC"> for it</font><font color="#E5E5E5"> they they told me</font><font color="#CCCCCC"> that</font>

13
00:00:28,830 --> 00:00:33,390
they had lots<font color="#E5E5E5"> of people who lived in</font>

14
00:00:31,140 --> 00:00:37,200
cafes and airports<font color="#E5E5E5"> and hotels and stuff</font>

15
00:00:33,390 --> 00:00:38,280
using<font color="#E5E5E5"> free Wi-Fi and open Wi-Fi and they</font>

16
00:00:37,200 --> 00:00:40,020
did nothing<font color="#CCCCCC"> about it they they</font>

17
00:00:38,280 --> 00:00:41,250
essentially had<font color="#E5E5E5"> all of the traffic</font><font color="#CCCCCC"> just</font>

18
00:00:40,020 --> 00:00:43,950
going across<font color="#E5E5E5"> the internet and and it</font>

19
00:00:41,250 --> 00:00:45,120
worried me<font color="#E5E5E5"> and and so the</font><font color="#CCCCCC"> guy turn</font>

20
00:00:43,950 --> 00:00:46,739
<font color="#CCCCCC">around to me</font><font color="#E5E5E5"> when I was telling him this</font>

21
00:00:45,120 --> 00:00:48,570
<font color="#E5E5E5">and said well</font><font color="#CCCCCC"> can you can you prove it</font>

22
00:00:46,739 --> 00:00:49,890
<font color="#E5E5E5">can you show</font><font color="#CCCCCC"> me this and because</font>

23
00:00:48,570 --> 00:00:52,469
otherwise I'm gonna do nothing about<font color="#E5E5E5"> it</font>

24
00:00:49,890 --> 00:00:53,969
<font color="#CCCCCC">I had a look around and</font><font color="#E5E5E5"> I genuinely I</font>

25
00:00:52,469 --> 00:00:56,760
couldn't find a tool<font color="#CCCCCC"> that really</font><font color="#E5E5E5"> did</font>

26
00:00:53,969 --> 00:01:00,899
<font color="#E5E5E5">anything that the business</font><font color="#CCCCCC"> care about so</font>

27
00:00:56,760 --> 00:01:02,910
I started<font color="#E5E5E5"> out by doing it myself the</font>

28
00:01:00,899 --> 00:01:04,110
work I'm about to show you<font color="#E5E5E5"> relies quite</font>

29
00:01:02,910 --> 00:01:06,000
heavily on<font color="#CCCCCC"> man-in-the-middle</font><font color="#E5E5E5"> so just as</font>

30
00:01:04,110 --> 00:01:07,740
a recap for everyone who may or may not

31
00:01:06,000 --> 00:01:10,350
<font color="#E5E5E5">know</font><font color="#CCCCCC"> in</font><font color="#E5E5E5"> the middle conditions are</font>

32
00:01:07,740 --> 00:01:11,490
essentially where you have a bit of

33
00:01:10,350 --> 00:01:14,189
<font color="#E5E5E5">infrastructure where an attacker</font>

34
00:01:11,490 --> 00:01:15,600
controls<font color="#E5E5E5"> it</font><font color="#CCCCCC"> and can do</font><font color="#E5E5E5"> stuff</font><font color="#CCCCCC"> with the</font>

35
00:01:14,189 --> 00:01:18,449
<font color="#E5E5E5">communication that's</font><font color="#CCCCCC"> going back</font><font color="#E5E5E5"> and</font>

36
00:01:15,600 --> 00:01:20,280
forth between<font color="#E5E5E5"> legitimate user</font><font color="#CCCCCC"> and as a</font>

37
00:01:18,450 --> 00:01:22,049
service<font color="#CCCCCC"> so things</font><font color="#E5E5E5"> you can do listen</font><font color="#CCCCCC"> to</font>

38
00:01:20,280 --> 00:01:24,840
communication change the<font color="#E5E5E5"> communication</font>

39
00:01:22,049 --> 00:01:28,290
or block the communication<font color="#E5E5E5"> and so I</font>

40
00:01:24,840 --> 00:01:31,829
decided<font color="#E5E5E5"> I was gonna basically make my</font>

41
00:01:28,290 --> 00:01:35,100
own Wi-Fi access point<font color="#E5E5E5"> yeah and it</font>

42
00:01:31,829 --> 00:01:37,500
steals some users creds by being a man

43
00:01:35,100 --> 00:01:39,119
in the<font color="#E5E5E5"> middle and then turn</font><font color="#CCCCCC"> around to my</font>

44
00:01:37,500 --> 00:01:41,880
client and say well you<font color="#E5E5E5"> know this is why</font>

45
00:01:39,119 --> 00:01:44,640
<font color="#E5E5E5">you need</font><font color="#CCCCCC"> to do something</font><font color="#E5E5E5"> about</font><font color="#CCCCCC"> it at</font>

46
00:01:41,880 --> 00:01:46,500
<font color="#E5E5E5">this point in time I thought this is</font>

47
00:01:44,640 --> 00:01:49,560
gonna<font color="#E5E5E5"> be easy</font><font color="#CCCCCC"> you know why would it be</font>

48
00:01:46,500 --> 00:01:50,729
hard<font color="#E5E5E5"> it's open Wi-Fi right anyway it</font>

49
00:01:49,560 --> 00:01:52,950
<font color="#E5E5E5">turns out encryption is a thing</font>

50
00:01:50,729 --> 00:01:54,240
<font color="#E5E5E5">obviously I already</font><font color="#CCCCCC"> knew this but it can</font>

51
00:01:52,950 --> 00:01:55,860
<font color="#E5E5E5">be done at lots of</font><font color="#CCCCCC"> different places and</font>

52
00:01:54,240 --> 00:01:58,530
<font color="#CCCCCC">these days there's</font><font color="#E5E5E5"> not that much in</font>

53
00:01:55,860 --> 00:02:00,240
terms<font color="#CCCCCC"> of plain text</font><font color="#E5E5E5"> creds going around</font>

54
00:01:58,530 --> 00:02:02,549
the world<font color="#CCCCCC"> it's usually encoded in</font>

55
00:02:00,240 --> 00:02:05,429
something encrypted somewhere and so

56
00:02:02,549 --> 00:02:06,600
that sort<font color="#CCCCCC"> of proved very</font><font color="#E5E5E5"> quickly to me</font>

57
00:02:05,430 --> 00:02:10,170
that I<font color="#CCCCCC"> needed</font><font color="#E5E5E5"> to do something</font><font color="#CCCCCC"> a bit</font>

58
00:02:06,600 --> 00:02:12,959
<font color="#CCCCCC">different so the idea was to go from</font>

59
00:02:10,169 --> 00:02:14,159
<font color="#E5E5E5">this normal transaction to</font>

60
00:02:12,959 --> 00:02:15,840
<font color="#CCCCCC">a</font><font color="#E5E5E5"> little bit more like this</font><font color="#CCCCCC"> and I</font>

61
00:02:14,159 --> 00:02:17,429
already<font color="#CCCCCC"> had a bit of a</font><font color="#E5E5E5"> plan based on</font>

62
00:02:15,840 --> 00:02:18,900
some<font color="#CCCCCC"> other work that I've seen</font><font color="#E5E5E5"> and I</font>

63
00:02:17,430 --> 00:02:21,180
know is quite<font color="#E5E5E5"> prevalent</font><font color="#CCCCCC"> out</font><font color="#E5E5E5"> there in the</font>

64
00:02:18,900 --> 00:02:22,920
world<font color="#CCCCCC"> and essentially</font><font color="#E5E5E5"> I do stuff down at</font>

65
00:02:21,180 --> 00:02:25,769
the bottom<font color="#E5E5E5"> with this this pink bit here</font>

66
00:02:22,920 --> 00:02:28,828
is where the me<font color="#CCCCCC"> as the attacker can I</font>

67
00:02:25,769 --> 00:02:30,209
can do stuff as the man in<font color="#CCCCCC"> the</font><font color="#E5E5E5"> middle so</font>

68
00:02:28,829 --> 00:02:33,120
what I actually did<font color="#E5E5E5"> I took Wi-Fi</font>

69
00:02:30,209 --> 00:02:34,769
<font color="#E5E5E5">pineapple</font><font color="#CCCCCC"> and I set up</font><font color="#E5E5E5"> a wireless</font>

70
00:02:33,120 --> 00:02:36,659
<font color="#E5E5E5">network</font><font color="#CCCCCC"> and I thought</font><font color="#E5E5E5"> I was pretty</font>

71
00:02:34,769 --> 00:02:36,989
obvious with<font color="#E5E5E5"> the name that</font><font color="#CCCCCC"> I used</font><font color="#E5E5E5"> you</font>

72
00:02:36,659 --> 00:02:39,689
<font color="#CCCCCC">know</font>

73
00:02:36,989 --> 00:02:43,200
don't touch it<font color="#CCCCCC"> but</font><font color="#E5E5E5"> people did anyway why</font>

74
00:02:39,689 --> 00:02:45,900
<font color="#E5E5E5">not</font><font color="#CCCCCC"> and so this is what it actually</font>

75
00:02:43,200 --> 00:02:47,339
<font color="#E5E5E5">looked like</font><font color="#CCCCCC"> had a 4G modem</font><font color="#E5E5E5"> my Wi-Fi</font>

76
00:02:45,900 --> 00:02:49,019
pineapple battery I wanted to prove to

77
00:02:47,340 --> 00:02:52,760
<font color="#E5E5E5">my client that it was portable you could</font>

78
00:02:49,019 --> 00:02:52,760
<font color="#E5E5E5">do it anywhere and it was nice</font><font color="#CCCCCC"> and easy</font>

79
00:02:52,819 --> 00:02:58,768
<font color="#CCCCCC">anyway so I I decided writing my tool so</font>

80
00:02:57,629 --> 00:03:02,548
<font color="#CCCCCC">I had an idea of what I wanted to do</font>

81
00:02:58,769 --> 00:03:04,680
with<font color="#E5E5E5"> it all</font><font color="#CCCCCC"> and so I I took somebody</font>

82
00:03:02,549 --> 00:03:06,919
<font color="#CCCCCC">else's code frankly</font><font color="#E5E5E5"> because it was easy</font>

83
00:03:04,680 --> 00:03:09,900
it worked and then I added stuff to it

84
00:03:06,919 --> 00:03:12,060
and and I went<font color="#E5E5E5"> through this process over</font>

85
00:03:09,900 --> 00:03:13,469
<font color="#E5E5E5">quite a long time of you know building a</font>

86
00:03:12,060 --> 00:03:15,209
bit and it worked a<font color="#E5E5E5"> bit and then I would</font>

87
00:03:13,469 --> 00:03:16,620
<font color="#E5E5E5">come up</font><font color="#CCCCCC"> with a bug later and it'll</font><font color="#E5E5E5"> tear</font>

88
00:03:15,209 --> 00:03:18,359
my hair out and<font color="#E5E5E5"> leaving it coming back</font>

89
00:03:16,620 --> 00:03:21,269
<font color="#E5E5E5">to it later</font><font color="#CCCCCC"> you know a good</font><font color="#E5E5E5"> software</font>

90
00:03:18,359 --> 00:03:24,180
development<font color="#E5E5E5"> lifecycle obviously but this</font>

91
00:03:21,269 --> 00:03:27,000
is what it fundamentally does it is a

92
00:03:24,180 --> 00:03:30,150
<font color="#CCCCCC">transparent proxy sat on top of the SMB</font>

93
00:03:27,000 --> 00:03:32,310
<font color="#E5E5E5">capture stack from responder and what it</font>

94
00:03:30,150 --> 00:03:35,840
<font color="#CCCCCC">does</font><font color="#E5E5E5"> the bit that's important is it</font>

95
00:03:32,310 --> 00:03:37,409
inject an image tag<font color="#E5E5E5"> in there in HTML</font>

96
00:03:35,840 --> 00:03:39,000
<font color="#CCCCCC">because then you I couldn't get</font>

97
00:03:37,409 --> 00:03:40,560
plaintext creds<font color="#E5E5E5"> so what I was going</font><font color="#CCCCCC"> to</font>

98
00:03:39,000 --> 00:03:42,750
do instead is the next best<font color="#E5E5E5"> thing</font><font color="#CCCCCC"> and</font>

99
00:03:40,560 --> 00:03:44,849
get a net<font color="#CCCCCC"> until M hashes so that I can</font>

100
00:03:42,750 --> 00:03:47,519
do cracking against those I<font color="#E5E5E5"> call the</font>

101
00:03:44,849 --> 00:03:51,858
attack so evil twin<font color="#E5E5E5"> authentication</font>

102
00:03:47,519 --> 00:03:54,419
capture<font color="#E5E5E5"> because you know so</font><font color="#CCCCCC"> windows off</font>

103
00:03:51,859 --> 00:03:57,750
one<font color="#CCCCCC"> of the things that you can do with</font>

104
00:03:54,419 --> 00:04:00,870
<font color="#E5E5E5">windows off is basically use things like</font>

105
00:03:57,750 --> 00:04:02,879
Internet Explorer to do<font color="#E5E5E5"> authentication</font>

106
00:04:00,870 --> 00:04:05,519
attempts against resources that you've

107
00:04:02,879 --> 00:04:07,620
got in<font color="#E5E5E5"> your control</font><font color="#CCCCCC"> I was convinced that</font>

108
00:04:05,519 --> 00:04:10,470
<font color="#E5E5E5">it was really important</font><font color="#CCCCCC"> for me to make</font>

109
00:04:07,620 --> 00:04:13,290
sure<font color="#CCCCCC"> that this was done against as stock</font>

110
00:04:10,470 --> 00:04:14,728
<font color="#CCCCCC">windows as possible</font><font color="#E5E5E5"> because I've seen</font>

111
00:04:13,290 --> 00:04:17,699
<font color="#E5E5E5">lots of presentations of similar nature</font>

112
00:04:14,729 --> 00:04:18,989
<font color="#E5E5E5">that you kind of tweak things and move</font>

113
00:04:17,699 --> 00:04:20,489
stuff around and make it<font color="#CCCCCC"> really weak</font><font color="#E5E5E5"> and</font>

114
00:04:18,988 --> 00:04:22,508
<font color="#E5E5E5">then it works but I wanted this to be</font>

115
00:04:20,488 --> 00:04:25,419
<font color="#E5E5E5">something more real than that</font>

116
00:04:22,509 --> 00:04:26,650
so I didn't even install anything<font color="#CCCCCC"> so no</font>

117
00:04:25,419 --> 00:04:28,750
<font color="#E5E5E5">Firefox or anything along those lines</font>

118
00:04:26,650 --> 00:04:30,638
the only change I made to my<font color="#CCCCCC"> victim</font>

119
00:04:28,750 --> 00:04:32,770
machines<font color="#E5E5E5"> which you'll</font><font color="#CCCCCC"> see in a bit is I</font>

120
00:04:30,639 --> 00:04:39,009
<font color="#E5E5E5">added them to an Active Directory domain</font>

121
00:04:32,770 --> 00:04:40,659
<font color="#E5E5E5">and sort of so to clarify what I'm</font>

122
00:04:39,009 --> 00:04:43,060
trying<font color="#E5E5E5"> to do is get Internet Explorer to</font>

123
00:04:40,659 --> 00:04:46,000
authenticate against something<font color="#E5E5E5"> and the</font>

124
00:04:43,060 --> 00:04:48,099
<font color="#E5E5E5">way that by stock it can do that is</font><font color="#CCCCCC"> if</font>

125
00:04:46,000 --> 00:04:49,750
on the left<font color="#E5E5E5"> hand side there you can see</font>

126
00:04:48,099 --> 00:04:51,219
it says automatic logon only on<font color="#CCCCCC"> internet</font>

127
00:04:49,750 --> 00:04:53,620
zone<font color="#E5E5E5"> so if it thinks</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> it's part of</font>

128
00:04:51,220 --> 00:04:56,229
<font color="#E5E5E5">Internet it will do it and the</font><font color="#CCCCCC"> Internet</font>

129
00:04:53,620 --> 00:04:59,139
<font color="#E5E5E5">is defined by this one on the right hand</font>

130
00:04:56,229 --> 00:05:01,090
<font color="#CCCCCC">side which is essentially all sites that</font>

131
00:04:59,139 --> 00:05:03,789
<font color="#E5E5E5">are explicitly listed as your</font><font color="#CCCCCC"> Internet</font>

132
00:05:01,090 --> 00:05:06,250
in your<font color="#E5E5E5"> internet zone all sites that</font>

133
00:05:03,789 --> 00:05:09,099
bypass the proxy server<font color="#CCCCCC"> and anything</font>

134
00:05:06,250 --> 00:05:11,860
<font color="#CCCCCC">that</font><font color="#E5E5E5"> is a</font><font color="#CCCCCC"> UNC path better known as the</font>

135
00:05:09,099 --> 00:05:13,150
dot rule which essentially<font color="#E5E5E5"> means</font><font color="#CCCCCC"> you can</font>

136
00:05:11,860 --> 00:05:14,440
only<font color="#E5E5E5"> do this against host names you</font>

137
00:05:13,150 --> 00:05:15,880
can't do it against IP addresses or

138
00:05:14,440 --> 00:05:17,500
fully qualified<font color="#CCCCCC"> domain names because</font>

139
00:05:15,880 --> 00:05:18,969
well they have a dot in them they're

140
00:05:17,500 --> 00:05:22,659
obviously<font color="#E5E5E5"> not part of your internet and</font>

141
00:05:18,969 --> 00:05:24,219
so on so I realized<font color="#CCCCCC"> very quickly</font><font color="#E5E5E5"> I</font>

142
00:05:22,659 --> 00:05:27,270
needed a DNS<font color="#CCCCCC"> server that was under my</font>

143
00:05:24,219 --> 00:05:30,159
control as well<font color="#E5E5E5"> oh sorry go back one</font>

144
00:05:27,270 --> 00:05:32,229
this<font color="#E5E5E5"> is what my attack structure ended</font>

145
00:05:30,159 --> 00:05:34,479
up being<font color="#E5E5E5"> so first of all you're on the</font>

146
00:05:32,229 --> 00:05:37,770
<font color="#CCCCCC">Left you've</font><font color="#E5E5E5"> got the the victim joins the</font>

147
00:05:34,479 --> 00:05:40,449
evil twin wireless network<font color="#CCCCCC"> ask for DHCP</font>

148
00:05:37,770 --> 00:05:44,109
<font color="#E5E5E5">at least and it gets one from the</font>

149
00:05:40,449 --> 00:05:46,419
attackers of<font color="#E5E5E5"> attackers server and then</font>

150
00:05:44,110 --> 00:05:50,199
this<font color="#E5E5E5"> bit here we've got two transactions</font>

151
00:05:46,419 --> 00:05:52,389
really one both of<font color="#CCCCCC"> them go</font><font color="#E5E5E5"> through the</font>

152
00:05:50,199 --> 00:05:56,169
the web proxy but<font color="#CCCCCC"> ones the</font><font color="#E5E5E5"> requests and</font>

153
00:05:52,389 --> 00:05:57,969
ones the response<font color="#E5E5E5"> now on the way out I I</font>

154
00:05:56,169 --> 00:05:59,440
do my best

155
00:05:57,969 --> 00:06:01,690
not exactly<font color="#CCCCCC"> downgraded off but kind</font><font color="#E5E5E5"> of</font>

156
00:05:59,440 --> 00:06:04,569
weakened the<font color="#CCCCCC"> requests a</font><font color="#E5E5E5"> little bit so</font>

157
00:06:01,690 --> 00:06:06,669
deal<font color="#CCCCCC"> with certain headers that</font><font color="#E5E5E5"> are in</font>

158
00:06:04,569 --> 00:06:08,349
the HTTP transaction and a few other

159
00:06:06,669 --> 00:06:09,940
<font color="#CCCCCC">bits and</font><font color="#E5E5E5"> pieces not so much like it has</font>

160
00:06:08,349 --> 00:06:12,669
to sell stripping I wasn't interested<font color="#CCCCCC"> in</font>

161
00:06:09,940 --> 00:06:15,639
that<font color="#E5E5E5"> was trying</font><font color="#CCCCCC"> to just make it</font><font color="#E5E5E5"> easy</font>

162
00:06:12,669 --> 00:06:18,279
frankly for<font color="#E5E5E5"> me on the return path</font><font color="#CCCCCC"> on the</font>

163
00:06:15,639 --> 00:06:19,960
return path I then do lots of things<font color="#CCCCCC"> but</font>

164
00:06:18,279 --> 00:06:21,969
one of them is inject<font color="#CCCCCC"> that</font><font color="#E5E5E5"> image tag</font>

165
00:06:19,960 --> 00:06:25,270
that<font color="#E5E5E5"> I've showed</font><font color="#CCCCCC"> you earlier and then</font>

166
00:06:21,969 --> 00:06:27,099
obviously the<font color="#CCCCCC"> next bit is the victim</font>

167
00:06:25,270 --> 00:06:28,900
machine<font color="#E5E5E5"> needs to know where to send the</font>

168
00:06:27,099 --> 00:06:31,800
<font color="#E5E5E5">next request so it has to do a DNS</font>

169
00:06:28,900 --> 00:06:35,789
lookup<font color="#E5E5E5"> so it gets</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> and then here</font>

170
00:06:31,800 --> 00:06:38,759
in is where the SMB stack stuff from

171
00:06:35,789 --> 00:06:40,800
responder kicks in<font color="#E5E5E5"> so it asks for a</font>

172
00:06:38,759 --> 00:06:42,930
<font color="#E5E5E5">resource</font><font color="#CCCCCC"> it's told no</font><font color="#E5E5E5"> you need</font><font color="#CCCCCC"> to</font>

173
00:06:40,800 --> 00:06:44,550
authenticate<font color="#E5E5E5"> first and then it</font><font color="#CCCCCC"> oughtn't</font>

174
00:06:42,930 --> 00:06:47,669
<font color="#E5E5E5">Achatz and that's where the resource and</font>

175
00:06:44,550 --> 00:06:50,430
maybe get something<font color="#E5E5E5"> back so that sounds</font>

176
00:06:47,669 --> 00:06:53,370
<font color="#E5E5E5">like it should be brilliant right it</font>

177
00:06:50,430 --> 00:06:56,430
kind of<font color="#CCCCCC"> works</font><font color="#E5E5E5"> I'll explain why</font>

178
00:06:53,370 --> 00:06:58,669
first of all HTTP<font color="#CCCCCC"> ER is a pain frankly</font>

179
00:06:56,430 --> 00:07:01,650
there's quite a lot<font color="#CCCCCC"> of variants in there</font>

180
00:06:58,669 --> 00:07:03,599
<font color="#CCCCCC">so the Wi-Fi pineapple doesn't have a</font>

181
00:07:01,650 --> 00:07:06,690
lot<font color="#CCCCCC"> of power to it so one of the things</font>

182
00:07:03,599 --> 00:07:08,130
I had<font color="#CCCCCC"> to do was not go</font><font color="#E5E5E5"> into just using</font>

183
00:07:06,690 --> 00:07:09,630
other<font color="#E5E5E5"> people's libraries and click click</font>

184
00:07:08,130 --> 00:07:10,280
click<font color="#CCCCCC"> done</font><font color="#E5E5E5"> I had to write most of this</font>

185
00:07:09,630 --> 00:07:12,659
myself

186
00:07:10,280 --> 00:07:14,489
<font color="#E5E5E5">and then there was status codes that</font>

187
00:07:12,659 --> 00:07:16,080
<font color="#E5E5E5">kept</font><font color="#CCCCCC"> coming up with</font><font color="#E5E5E5"> problems I had no</font>

188
00:07:14,490 --> 00:07:20,610
idea I've never seen<font color="#CCCCCC"> before</font><font color="#E5E5E5"> like four on</font>

189
00:07:16,080 --> 00:07:22,229
six<font color="#E5E5E5"> which is range not satisfiable</font><font color="#CCCCCC"> or</font><font color="#E5E5E5"> s</font>

190
00:07:20,610 --> 00:07:24,090
does that mean<font color="#CCCCCC"> and then working through</font>

191
00:07:22,229 --> 00:07:25,520
<font color="#CCCCCC">the</font><font color="#E5E5E5"> different</font><font color="#CCCCCC"> types of headers that</font><font color="#E5E5E5"> I</font>

192
00:07:24,090 --> 00:07:28,919
spotted which were<font color="#E5E5E5"> causing</font><font color="#CCCCCC"> me problems</font>

193
00:07:25,520 --> 00:07:30,030
<font color="#E5E5E5">and and then normal error</font><font color="#CCCCCC"> handler</font>

194
00:07:28,919 --> 00:07:32,190
because<font color="#CCCCCC"> you know</font><font color="#E5E5E5"> sometimes people don't</font>

195
00:07:30,030 --> 00:07:33,539
finish<font color="#E5E5E5"> a connection it just</font><font color="#CCCCCC"> it dies for</font>

196
00:07:32,190 --> 00:07:35,880
whatever reason they can<font color="#E5E5E5"> they escape it</font>

197
00:07:33,539 --> 00:07:38,159
<font color="#CCCCCC">and then obviously there's differences</font>

198
00:07:35,880 --> 00:07:41,340
between transparent proxies and declared

199
00:07:38,159 --> 00:07:43,500
proxies<font color="#E5E5E5"> sometimes one of</font><font color="#CCCCCC"> the things that</font>

200
00:07:41,340 --> 00:07:45,780
<font color="#E5E5E5">I hadn't realized before hundreds of the</font>

201
00:07:43,500 --> 00:07:47,759
transparent proxies don't get explicitly

202
00:07:45,780 --> 00:07:49,080
told<font color="#E5E5E5"> what port to actually go and</font><font color="#CCCCCC"> make</font>

203
00:07:47,759 --> 00:07:51,029
the<font color="#E5E5E5"> request on because it's part of the</font>

204
00:07:49,080 --> 00:07:52,979
<font color="#CCCCCC">original transaction</font><font color="#E5E5E5"> so if you're doing</font>

205
00:07:51,029 --> 00:07:55,800
iptables manipulations<font color="#CCCCCC"> you lose some of</font>

206
00:07:52,979 --> 00:07:57,389
<font color="#E5E5E5">that information</font><font color="#CCCCCC"> it's it's easy to kind</font>

207
00:07:55,800 --> 00:08:00,150
<font color="#CCCCCC">of</font><font color="#E5E5E5"> guess it but you have to code it all</font>

208
00:07:57,389 --> 00:08:05,099
in<font color="#E5E5E5"> and then my</font><font color="#CCCCCC"> favorite bit was the</font>

209
00:08:00,150 --> 00:08:06,690
chunking so HTTP one point naught and

210
00:08:05,099 --> 00:08:08,610
one point one<font color="#E5E5E5"> working a little bit of a</font>

211
00:08:06,690 --> 00:08:11,279
different<font color="#CCCCCC"> way and although they</font><font color="#E5E5E5"> are a</font>

212
00:08:08,610 --> 00:08:12,900
<font color="#E5E5E5">bit interchangeable</font><font color="#CCCCCC"> one of the most</font>

213
00:08:11,279 --> 00:08:16,340
<font color="#CCCCCC">difficult</font><font color="#E5E5E5"> parts of this was dealing with</font>

214
00:08:12,900 --> 00:08:18,239
<font color="#E5E5E5">chunked transfer encoding</font><font color="#CCCCCC"> CTE</font><font color="#E5E5E5"> because</font>

215
00:08:16,340 --> 00:08:20,008
essentially<font color="#E5E5E5"> if you think</font><font color="#CCCCCC"> about</font><font color="#E5E5E5"> it you</font>

216
00:08:18,240 --> 00:08:21,300
<font color="#CCCCCC">you get</font><font color="#E5E5E5"> a chunk of information and then</font>

217
00:08:20,009 --> 00:08:23,940
the next chunk<font color="#CCCCCC"> of the next chunk of the</font>

218
00:08:21,300 --> 00:08:25,500
<font color="#E5E5E5">next chunk and and that's fine</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> you</font>

219
00:08:23,940 --> 00:08:27,779
<font color="#E5E5E5">have to work out what the schema is and</font>

220
00:08:25,500 --> 00:08:30,210
there seems to<font color="#E5E5E5"> be two main types there's</font>

221
00:08:27,779 --> 00:08:31,740
one which are<font color="#E5E5E5"> marked</font><font color="#CCCCCC"> try which is on the</font>

222
00:08:30,210 --> 00:08:33,510
<font color="#E5E5E5">left hand</font><font color="#CCCCCC"> side at the bottom</font><font color="#E5E5E5"> here and it</font>

223
00:08:31,740 --> 00:08:34,919
says<font color="#E5E5E5"> how big the next chunk is and then</font>

224
00:08:33,510 --> 00:08:37,649
there's ones<font color="#E5E5E5"> that don't have any markers</font>

225
00:08:34,919 --> 00:08:40,020
at all but<font color="#E5E5E5"> either way if you</font><font color="#CCCCCC"> think about</font>

226
00:08:37,649 --> 00:08:41,250
it I'm<font color="#CCCCCC"> trying to inject an HTML tag</font><font color="#E5E5E5"> you</font>

227
00:08:40,020 --> 00:08:42,569
<font color="#CCCCCC">have to be quite careful where that goes</font>

228
00:08:41,250 --> 00:08:43,559
otherwise you end<font color="#E5E5E5"> up with half of it in</font>

229
00:08:42,570 --> 00:08:45,870
one<font color="#E5E5E5"> chunk and half of</font>

230
00:08:43,559 --> 00:08:47,790
next chunk or<font color="#E5E5E5"> you save it all up</font><font color="#CCCCCC"> in your</font>

231
00:08:45,870 --> 00:08:49,380
transparent proxy manipulate the whole

232
00:08:47,790 --> 00:08:51,300
thing and then spit it<font color="#E5E5E5"> out</font><font color="#CCCCCC"> that that</font>

233
00:08:49,380 --> 00:08:55,470
then gives you a massive<font color="#E5E5E5"> delay which you</font>

234
00:08:51,300 --> 00:08:57,900
know<font color="#E5E5E5"> Mike make users suspicious anyway</font>

235
00:08:55,470 --> 00:09:00,750
<font color="#E5E5E5">so the success I</font><font color="#CCCCCC"> had was the</font><font color="#E5E5E5"> fact that a</font>

236
00:08:57,900 --> 00:09:02,640
standalone<font color="#E5E5E5"> Windows 7 machine gave me net</font>

237
00:09:00,750 --> 00:09:04,830
and<font color="#E5E5E5"> tell'em creds</font><font color="#CCCCCC"> no problem</font><font color="#E5E5E5"> whatsoever</font>

238
00:09:02,640 --> 00:09:06,120
<font color="#E5E5E5">every single time it was happy the</font>

239
00:09:04,830 --> 00:09:07,950
moment<font color="#CCCCCC"> I joined it to an Active</font>

240
00:09:06,120 --> 00:09:11,850
Directory domain<font color="#E5E5E5"> things started going a</font>

241
00:09:07,950 --> 00:09:13,850
bit pear-shaped<font color="#E5E5E5"> what happens is you</font><font color="#CCCCCC"> have</font>

242
00:09:11,850 --> 00:09:16,740
the the SMB connection up here and

243
00:09:13,850 --> 00:09:21,300
<font color="#E5E5E5">almost</font><font color="#CCCCCC"> straightaway</font><font color="#E5E5E5"> it tries to work out</font>

244
00:09:16,740 --> 00:09:23,580
where the<font color="#E5E5E5"> Kerberos KDC is at the fqdn of</font>

245
00:09:21,300 --> 00:09:25,740
its<font color="#E5E5E5"> domain that it knows</font><font color="#CCCCCC"> about and when</font>

246
00:09:23,580 --> 00:09:28,110
it<font color="#E5E5E5"> doesn't get a response back no such</font>

247
00:09:25,740 --> 00:09:30,710
name you<font color="#E5E5E5"> just it just literally sends an</font>

248
00:09:28,110 --> 00:09:32,910
RS team<font color="#E5E5E5"> end of connection game</font><font color="#CCCCCC"> over</font>

249
00:09:30,710 --> 00:09:35,250
there's lots of<font color="#E5E5E5"> ways that I</font><font color="#CCCCCC"> think I</font>

250
00:09:32,910 --> 00:09:36,600
could maybe develop this further<font color="#E5E5E5"> bluntly</font>

251
00:09:35,250 --> 00:09:38,070
putting it I ran out of<font color="#E5E5E5"> time</font><font color="#CCCCCC"> from my</font>

252
00:09:36,600 --> 00:09:40,950
master's thesis so I had to<font color="#CCCCCC"> submit and</font>

253
00:09:38,070 --> 00:09:42,300
it was fine but<font color="#CCCCCC"> I</font><font color="#E5E5E5"> think you might well</font>

254
00:09:40,950 --> 00:09:45,420
<font color="#CCCCCC">be able</font><font color="#E5E5E5"> to develop</font><font color="#CCCCCC"> this further so that</font>

255
00:09:42,300 --> 00:09:47,189
<font color="#E5E5E5">you could impersonate the KDC perhaps</font>

256
00:09:45,420 --> 00:09:48,870
depends on<font color="#CCCCCC"> exactly what it's looking for</font>

257
00:09:47,190 --> 00:09:53,850
<font color="#E5E5E5">to prove that it is within the network</font>

258
00:09:48,870 --> 00:09:57,300
that<font color="#E5E5E5"> it thinks it's in so in summary my</font>

259
00:09:53,850 --> 00:09:58,740
tool<font color="#CCCCCC"> is on github I definitely think I</font>

260
00:09:57,300 --> 00:10:02,099
could develop it further<font color="#E5E5E5"> and I really</font>

261
00:09:58,740 --> 00:10:03,390
would<font color="#E5E5E5"> like</font><font color="#CCCCCC"> to but you know time needs</font><font color="#E5E5E5"> to</font>

262
00:10:02,100 --> 00:10:07,050
happen if you guys want to do<font color="#CCCCCC"> it</font><font color="#E5E5E5"> please</font>

263
00:10:03,390 --> 00:10:08,640
do essentially<font color="#E5E5E5"> ad join</font><font color="#CCCCCC"> network</font><font color="#E5E5E5"> machines</font>

264
00:10:07,050 --> 00:10:10,770
not<font color="#CCCCCC"> going to happen at this point in</font>

265
00:10:08,640 --> 00:10:15,810
time<font color="#E5E5E5"> but anything else anything loose</font>

266
00:10:10,770 --> 00:10:18,140
you're<font color="#E5E5E5"> onto a winner so do I</font><font color="#CCCCCC"> have any</font>

267
00:10:15,810 --> 00:10:18,140
questions

