1
00:00:02,689 --> 00:00:10,139
how many people here work for Microsoft

2
00:00:05,790 --> 00:00:11,849
or Amazon so a few and probably a few

3
00:00:10,139 --> 00:00:13,920
more who are who are keeping their hands

4
00:00:11,849 --> 00:00:15,929
down and doing shy but very you're

5
00:00:13,920 --> 00:00:20,180
welcome so you know nice to have you

6
00:00:15,929 --> 00:00:25,619
here so then we are going to do a vote

7
00:00:20,180 --> 00:00:28,080
and the support guys from besides are

8
00:00:25,619 --> 00:00:31,980
very hardly helps offered to help with

9
00:00:28,080 --> 00:00:32,849
that and will they will then announce

10
00:00:31,980 --> 00:00:36,390
the result

11
00:00:32,850 --> 00:00:38,309
and then a wrap up and we'll all move on

12
00:00:36,390 --> 00:00:42,210
with our lives and the rest of the

13
00:00:38,309 --> 00:00:46,169
conference so let's get going so I

14
00:00:42,210 --> 00:00:51,120
started off by listing out the cloud

15
00:00:46,170 --> 00:00:53,039
security services and this isn't even

16
00:00:51,120 --> 00:00:57,000
all of them there's a lot of security

17
00:00:53,039 --> 00:01:01,260
services both with Amazon and Microsoft

18
00:00:57,000 --> 00:01:03,420
just here so for example Amazon has a

19
00:01:01,260 --> 00:01:07,020
density and access management service I

20
00:01:03,420 --> 00:01:10,820
am and that's used to control and manage

21
00:01:07,020 --> 00:01:13,289
users groups policies and rules

22
00:01:10,820 --> 00:01:16,770
Microsoft Azure has Azure Active

23
00:01:13,290 --> 00:01:17,820
Directory I'm don't worry I'm not going

24
00:01:16,770 --> 00:01:19,830
to read through the whole list because

25
00:01:17,820 --> 00:01:23,039
you'll get bored for just to mention a

26
00:01:19,830 --> 00:01:27,470
couple of others AWS has key management

27
00:01:23,040 --> 00:01:31,500
service kms for hardware protection of

28
00:01:27,470 --> 00:01:34,020
cryptographic keys as you has Kevon so a

29
00:01:31,500 --> 00:01:36,900
lot of these different services there

30
00:01:34,020 --> 00:01:41,250
AWS services and their equivalent zero

31
00:01:36,900 --> 00:01:45,420
ones but there are some which are so for

32
00:01:41,250 --> 00:01:47,460
example guard duty is Amazon's threat

33
00:01:45,420 --> 00:01:49,740
detection and automated remediation

34
00:01:47,460 --> 00:01:51,798
response tool there's not really a

35
00:01:49,740 --> 00:01:55,890
desert problem for that

36
00:01:51,799 --> 00:01:58,320
similarly inspector for vulnerability

37
00:01:55,890 --> 00:01:59,700
assessment in AWS again there's no real

38
00:01:58,320 --> 00:02:02,869
equivalent for that it is you there you

39
00:01:59,700 --> 00:02:07,170
can use something from the marketplace

40
00:02:02,869 --> 00:02:09,899
but equally the zero has some services

41
00:02:07,170 --> 00:02:12,480
that Amazon doesn't have like Sentinel

42
00:02:09,899 --> 00:02:13,350
the preview of the security information

43
00:02:12,480 --> 00:02:15,989
and event

44
00:02:13,350 --> 00:02:17,700
same system as your Active Directory

45
00:02:15,990 --> 00:02:21,720
privileged Identity Management is a

46
00:02:17,700 --> 00:02:24,899
great tool for temporarily elevating

47
00:02:21,720 --> 00:02:27,330
roles and workflow and order seeing

48
00:02:24,900 --> 00:02:31,380
privileged roles then there's some

49
00:02:27,330 --> 00:02:33,720
services which are exist in both but

50
00:02:31,380 --> 00:02:35,549
they're different feature sets all the

51
00:02:33,720 --> 00:02:39,210
different pricing so for example

52
00:02:35,550 --> 00:02:41,610
Amazon's certificate manager you can

53
00:02:39,210 --> 00:02:42,750
issue free of charge trusted

54
00:02:41,610 --> 00:02:47,100
certificates they're trusted by a

55
00:02:42,750 --> 00:02:49,260
browser the equivalent is your app

56
00:02:47,100 --> 00:02:51,720
server certificates cost fifty two

57
00:02:49,260 --> 00:02:53,459
pounds a year or two hundred twenty four

58
00:02:51,720 --> 00:02:56,790
pounds a year for a world Constitution

59
00:02:53,460 --> 00:02:59,310
so that gives you an idea but as you can

60
00:02:56,790 --> 00:03:00,810
see is not particularly helpful in

61
00:02:59,310 --> 00:03:03,150
deciding which is better it's just a

62
00:03:00,810 --> 00:03:06,030
list at the end of the day so I thought

63
00:03:03,150 --> 00:03:11,550
a different approach is needed so what I

64
00:03:06,030 --> 00:03:15,480
then have prepared for this is oops

65
00:03:11,550 --> 00:03:18,540
didn't want to do that just yet some

66
00:03:15,480 --> 00:03:20,369
real-life security implementations so I

67
00:03:18,540 --> 00:03:22,290
thought to myself well what do I what

68
00:03:20,370 --> 00:03:24,450
have I done recently at work and this is

69
00:03:22,290 --> 00:03:27,000
not including going into the kitchen and

70
00:03:24,450 --> 00:03:29,459
having a chat in the coffee but actual

71
00:03:27,000 --> 00:03:31,050
security implementation work so I just

72
00:03:29,460 --> 00:03:32,460
thought well what things have I done

73
00:03:31,050 --> 00:03:34,320
recently so three things that I did

74
00:03:32,460 --> 00:03:36,150
recently and this is that a financial

75
00:03:34,320 --> 00:03:37,829
services organization who are very

76
00:03:36,150 --> 00:03:41,220
concerned about security in the cloud

77
00:03:37,830 --> 00:03:44,790
and three of the tasks which I did so

78
00:03:41,220 --> 00:03:49,200
this are firstly to prevent public

79
00:03:44,790 --> 00:03:54,840
storage secondly to encrypt virtual

80
00:03:49,200 --> 00:03:57,810
machines and thirdly to alert when a

81
00:03:54,840 --> 00:03:59,190
service principle is used from an

82
00:03:57,810 --> 00:04:01,880
unauthorized IP address that the

83
00:03:59,190 --> 00:04:04,410
scenario there is a service principle is

84
00:04:01,880 --> 00:04:07,109
running on an orchestrated server on

85
00:04:04,410 --> 00:04:09,210
premise going out through the proxy so

86
00:04:07,110 --> 00:04:11,220
that should only ever originate from

87
00:04:09,210 --> 00:04:13,560
particular addresses and we wanted to be

88
00:04:11,220 --> 00:04:17,130
alerted when the happen so there are

89
00:04:13,560 --> 00:04:18,329
three things that I did recently so what

90
00:04:17,130 --> 00:04:20,730
I'm going to do for each of those three

91
00:04:18,329 --> 00:04:22,979
things I'm going to show you how I've

92
00:04:20,730 --> 00:04:25,410
set that up in AWS and how I've set it

93
00:04:22,979 --> 00:04:26,609
up in is year so then you'll get a sort

94
00:04:25,410 --> 00:04:29,819
of idea of tracks

95
00:04:26,610 --> 00:04:33,389
terms what does it actually like to work

96
00:04:29,819 --> 00:04:37,740
in both clouds providers from a security

97
00:04:33,389 --> 00:04:41,689
perspective so let's start with

98
00:04:37,740 --> 00:04:45,300
preventing public access to storage so

99
00:04:41,689 --> 00:04:47,520
you'll all be aware I'm sure now over

100
00:04:45,300 --> 00:04:51,090
the last few years there have been a lot

101
00:04:47,520 --> 00:04:53,849
of very serious data breaches resulting

102
00:04:51,090 --> 00:05:01,650
from misconfigured storage accounts in

103
00:04:53,849 --> 00:05:03,900
the cloud Dow Jones Federal Express even

104
00:05:01,650 --> 00:05:08,878
the Pentagon has misconfigured storage

105
00:05:03,900 --> 00:05:10,888
accounts and who the Oba breach which

106
00:05:08,879 --> 00:05:13,110
was a bit more complex but ultimately

107
00:05:10,889 --> 00:05:17,189
the data was in the end taken from an s3

108
00:05:13,110 --> 00:05:18,599
bucket so there's good reason for

109
00:05:17,189 --> 00:05:22,129
wanting to prevent these sort of things

110
00:05:18,599 --> 00:05:26,279
happening by accident or intentionally

111
00:05:22,129 --> 00:05:28,289
so let's start by looking at how I'd

112
00:05:26,279 --> 00:05:34,050
implement this or how I've implemented

113
00:05:28,289 --> 00:05:38,690
this in Amazon so first of all to just

114
00:05:34,050 --> 00:05:44,849
show you the issue so I'm going to sue

115
00:05:38,690 --> 00:05:46,680
so I've logged into a Amazon account and

116
00:05:44,849 --> 00:05:49,620
a created an s3 bucket

117
00:05:46,680 --> 00:05:53,250
so this s3 bucket is this one so I've

118
00:05:49,620 --> 00:05:57,270
called it security spotlight and I've

119
00:05:53,250 --> 00:06:00,930
got a file in here called passwords not

120
00:05:57,270 --> 00:06:04,500
very imaginative and if I just click on

121
00:06:00,930 --> 00:06:08,099
this you'll see that there's an object

122
00:06:04,500 --> 00:06:10,439
URL at the bottom so if I right click on

123
00:06:08,099 --> 00:06:14,938
this and open in new tab let's see what

124
00:06:10,439 --> 00:06:16,979
happens so here are my passwords so any

125
00:06:14,939 --> 00:06:18,539
of you can get the password some Mickey

126
00:06:16,979 --> 00:06:21,180
Mouse and Donald Duck if you're quick

127
00:06:18,539 --> 00:06:23,270
enough by going to the address there

128
00:06:21,180 --> 00:06:26,639
it's the public you know public address

129
00:06:23,270 --> 00:06:30,810
for that s3 bucket so it's very very

130
00:06:26,639 --> 00:06:35,520
easy to upload items to s3 buckets and

131
00:06:30,810 --> 00:06:39,220
make them public but how could we

132
00:06:35,520 --> 00:06:44,770
prevent that well let's have a look

133
00:06:39,220 --> 00:06:53,080
so I go back to the console and go back

134
00:06:44,770 --> 00:06:56,140
to s3 last November at reinvent so

135
00:06:53,080 --> 00:06:59,140
November 2018 Amazon announced a new

136
00:06:56,140 --> 00:07:01,599
service called bloc public access and

137
00:06:59,140 --> 00:07:03,219
this is one of a raft of improvements

138
00:07:01,600 --> 00:07:06,210
that they've made over the last couple

139
00:07:03,220 --> 00:07:08,650
of years to make it much clearer that

140
00:07:06,210 --> 00:07:10,450
objects are being made public and in

141
00:07:08,650 --> 00:07:13,650
this case to control them at the account

142
00:07:10,450 --> 00:07:15,640
level so I could click on here and

143
00:07:13,650 --> 00:07:18,580
you'll see that there's this great new

144
00:07:15,640 --> 00:07:22,570
feature whereby I can block all public

145
00:07:18,580 --> 00:07:25,419
access in an AWS account so let's see

146
00:07:22,570 --> 00:07:28,300
what happens if I do that I'm going to

147
00:07:25,420 --> 00:07:31,480
edit this and I'm going to block all

148
00:07:28,300 --> 00:07:35,590
public access in this you can going to

149
00:07:31,480 --> 00:07:37,660
save this and confirm that I really want

150
00:07:35,590 --> 00:07:38,890
to save this by the way don't just go

151
00:07:37,660 --> 00:07:40,720
home and do this on your production

152
00:07:38,890 --> 00:07:43,919
account because something might stop

153
00:07:40,720 --> 00:07:47,350
working but it's fine on this account

154
00:07:43,919 --> 00:07:50,349
right so I've done this so now let's go

155
00:07:47,350 --> 00:07:53,140
back to my passwords file and see what

156
00:07:50,350 --> 00:07:55,840
happens if i refresh it and great is

157
00:07:53,140 --> 00:07:59,890
blocked what I'd expect so not only have

158
00:07:55,840 --> 00:08:01,929
I turned off have I made all objects in

159
00:07:59,890 --> 00:08:06,900
all this three buckets in this account

160
00:08:01,930 --> 00:08:09,940
private what I've also done is prevented

161
00:08:06,900 --> 00:08:12,489
anybody creating new public s3 buckets

162
00:08:09,940 --> 00:08:17,410
or uploading new objects to s3 and

163
00:08:12,490 --> 00:08:22,330
making them public so that's how I would

164
00:08:17,410 --> 00:08:27,130
do this in Amazon so let's just go back

165
00:08:22,330 --> 00:08:28,510
to the PowerPoint asset so these are

166
00:08:27,130 --> 00:08:32,830
just screenshots of what I've shown you

167
00:08:28,510 --> 00:08:38,830
and what about is here so let's move on

168
00:08:32,830 --> 00:08:41,589
to Azure storage so with the 0th storage

169
00:08:38,830 --> 00:08:43,270
I wanted to do a similar sort of thing

170
00:08:41,589 --> 00:08:46,450
so the first thing that I looked at was

171
00:08:43,270 --> 00:08:49,780
well could we use as your policy so as

172
00:08:46,450 --> 00:08:52,180
your policy is a really great tool which

173
00:08:49,780 --> 00:08:55,420
is Microsoft as you have implemented

174
00:08:52,180 --> 00:08:59,229
and it's quite similar to service

175
00:08:55,420 --> 00:09:02,229
control policies in AWS and with this

176
00:08:59,230 --> 00:09:04,750
year policy you can set rules to say

177
00:09:02,230 --> 00:09:08,560
things like you can only deploy

178
00:09:04,750 --> 00:09:10,000
resources in Europe for example so you

179
00:09:08,560 --> 00:09:11,140
could do a lot of control have a lot of

180
00:09:10,000 --> 00:09:13,210
controls like this but wouldn't it be

181
00:09:11,140 --> 00:09:16,990
great if there's a zero policy that just

182
00:09:13,210 --> 00:09:19,480
stopped you from creating a can

183
00:09:16,990 --> 00:09:23,170
container in the storage account with

184
00:09:19,480 --> 00:09:24,430
there was public so I did what we all do

185
00:09:23,170 --> 00:09:27,939
when we wanted to find something

186
00:09:24,430 --> 00:09:33,339
searched on Google and the page which

187
00:09:27,940 --> 00:09:35,110
came up was this page so hacker would

188
00:09:33,340 --> 00:09:38,950
fit improve as your storage so there was

189
00:09:35,110 --> 00:09:41,260
a request or suggestion about a year ago

190
00:09:38,950 --> 00:09:44,110
to do exactly what I was thinking would

191
00:09:41,260 --> 00:09:46,390
be a good idea and the message from

192
00:09:44,110 --> 00:09:48,970
Microsoft is the feedback is well

193
00:09:46,390 --> 00:09:50,830
received as a storage team is working on

194
00:09:48,970 --> 00:09:53,410
the feature for this scenario it's

195
00:09:50,830 --> 00:09:56,200
estimated to ship in calendar year 2019

196
00:09:53,410 --> 00:09:58,870
so it's not there yet hopefully it will

197
00:09:56,200 --> 00:10:01,900
be soon and then you know we can't we

198
00:09:58,870 --> 00:10:05,320
can't control create unintentional

199
00:10:01,900 --> 00:10:07,240
creation of public objects using a zero

200
00:10:05,320 --> 00:10:12,180
policy but in the meantime I need to

201
00:10:07,240 --> 00:10:14,950
come up with the solution so what I did

202
00:10:12,180 --> 00:10:18,189
well just show you the issue and then

203
00:10:14,950 --> 00:10:22,120
what I did so these are my storage

204
00:10:18,190 --> 00:10:25,300
accounts in Microsoft Azure make that a

205
00:10:22,120 --> 00:10:27,730
little bit bigger so I created the

206
00:10:25,300 --> 00:10:34,050
storage account called confidential

207
00:10:27,730 --> 00:10:37,330
storage data and if I look at blobs

208
00:10:34,050 --> 00:10:43,750
you'll see here I've got a container

209
00:10:37,330 --> 00:10:46,960
called personal data so what I could do

210
00:10:43,750 --> 00:10:48,610
here is change the access level so the

211
00:10:46,960 --> 00:10:51,580
moment it is actually set to private but

212
00:10:48,610 --> 00:10:56,140
I'm going to change this to blob and

213
00:10:51,580 --> 00:10:59,230
press ok so it's now if you look at the

214
00:10:56,140 --> 00:11:01,720
access type it's now listed as blob

215
00:10:59,230 --> 00:11:04,060
which at which does actually mean public

216
00:11:01,720 --> 00:11:05,710
though that's not immediately obvious so

217
00:11:04,060 --> 00:11:07,660
then I can go into

218
00:11:05,710 --> 00:11:10,570
my file here which is called

219
00:11:07,660 --> 00:11:12,430
confidential and I've got a URL here so

220
00:11:10,570 --> 00:11:17,230
I'm gonna copy that to the clipboard and

221
00:11:12,430 --> 00:11:19,959
I'm going to paste that in and let's see

222
00:11:17,230 --> 00:11:21,970
what happens so here's my file that I've

223
00:11:19,960 --> 00:11:28,240
made public in Anna's your storage

224
00:11:21,970 --> 00:11:32,250
account there it is so what I wanted to

225
00:11:28,240 --> 00:11:35,110
do was to come up with the solution to

226
00:11:32,250 --> 00:11:37,510
prevent that happening or if it does

227
00:11:35,110 --> 00:11:38,620
happen to change it to be private as

228
00:11:37,510 --> 00:11:45,850
quickly as possible

229
00:11:38,620 --> 00:11:49,270
so here's what I did so I created an

230
00:11:45,850 --> 00:11:53,650
automation account saves my automation

231
00:11:49,270 --> 00:11:57,880
account in is here and created a rum

232
00:11:53,650 --> 00:12:02,850
book called remediates orange jobs and

233
00:11:57,880 --> 00:12:07,960
this is a PowerShell script that runs

234
00:12:02,850 --> 00:12:10,990
every 15 minutes and what it does is it

235
00:12:07,960 --> 00:12:14,980
uses is your mpow shell to search across

236
00:12:10,990 --> 00:12:16,840
the account the subscription look for

237
00:12:14,980 --> 00:12:18,220
all is their storage accounts and then

238
00:12:16,840 --> 00:12:20,140
for every is their storage account look

239
00:12:18,220 --> 00:12:22,030
at all the containers and for all the

240
00:12:20,140 --> 00:12:25,810
containers look to see are any of them

241
00:12:22,030 --> 00:12:27,339
public and if they are then to change

242
00:12:25,810 --> 00:12:31,180
the access level to be private

243
00:12:27,340 --> 00:12:32,710
so have I talked long enough to so that

244
00:12:31,180 --> 00:12:34,270
this has happened so what I've done so

245
00:12:32,710 --> 00:12:36,550
we avoid waiting 15 minutes I just

246
00:12:34,270 --> 00:12:40,329
kicked it off manually so let's see if

247
00:12:36,550 --> 00:12:44,260
that's actually taking the fact shirt it

248
00:12:40,330 --> 00:12:46,180
has so it's found the container which I

249
00:12:44,260 --> 00:12:49,090
just showed you called personal data and

250
00:12:46,180 --> 00:12:52,390
then it should have changed the access

251
00:12:49,090 --> 00:12:55,720
level to be private instead of public so

252
00:12:52,390 --> 00:13:02,770
let's see if that works so I'll go back

253
00:12:55,720 --> 00:13:06,850
to my object and yes it did work so you

254
00:13:02,770 --> 00:13:10,500
can see now that we've got an AWS and an

255
00:13:06,850 --> 00:13:13,900
is your approach for making sure that

256
00:13:10,500 --> 00:13:19,300
objects in storage accounts are private

257
00:13:13,900 --> 00:13:22,839
so just going back to here here are some

258
00:13:19,300 --> 00:13:25,630
screenshots of what I just showed you

259
00:13:22,839 --> 00:13:32,020
so the difference are supposin is that

260
00:13:25,630 --> 00:13:38,439
with AWS block public access you can

261
00:13:32,020 --> 00:13:42,310
prevent creation of public objects in s3

262
00:13:38,440 --> 00:13:43,960
buckets with a 0 at the moment they

263
00:13:42,310 --> 00:13:44,949
could get created but you can clean them

264
00:13:43,960 --> 00:13:47,680
up very quickly

265
00:13:44,950 --> 00:13:48,390
using an automation script so that's

266
00:13:47,680 --> 00:13:52,060
number one

267
00:13:48,390 --> 00:13:59,170
let's move on to number two so number

268
00:13:52,060 --> 00:14:01,959
two is encrypting virtual machines so

269
00:13:59,170 --> 00:14:03,339
this is a very common requirement for

270
00:14:01,960 --> 00:14:06,460
any organization concerned about

271
00:14:03,339 --> 00:14:08,380
security or with regulatory requirements

272
00:14:06,460 --> 00:14:11,790
to make sure that all machines are

273
00:14:08,380 --> 00:14:16,089
encrypted so with Amazon Web Services

274
00:14:11,790 --> 00:14:17,650
the approach for the absolute virtual

275
00:14:16,089 --> 00:14:19,750
machine can have route drive and attach

276
00:14:17,650 --> 00:14:22,660
drives so the approach is to create a

277
00:14:19,750 --> 00:14:26,500
key in key management service KMS and

278
00:14:22,660 --> 00:14:30,310
then to create an encrypted Amazon

279
00:14:26,500 --> 00:14:34,060
machine image or ami encrypted with that

280
00:14:30,310 --> 00:14:37,319
key and then to build the virtual

281
00:14:34,060 --> 00:14:41,650
machine in Amazon using that AMI and

282
00:14:37,320 --> 00:14:46,209
then for attached drives to encrypt as

283
00:14:41,650 --> 00:14:51,189
they're built using the key so let's

284
00:14:46,209 --> 00:14:57,369
just have a quick look at that so if I

285
00:14:51,190 --> 00:14:59,130
go through my instances in AWS yes

286
00:14:57,370 --> 00:15:04,720
you'll see that I have an instance

287
00:14:59,130 --> 00:15:08,980
running in West Europe this is my

288
00:15:04,720 --> 00:15:12,730
virtual machine if I have a look at the

289
00:15:08,980 --> 00:15:17,620
attached volume I can get the reference

290
00:15:12,730 --> 00:15:22,930
number the ID of the attached EBS

291
00:15:17,620 --> 00:15:27,610
elastic block store image volume and

292
00:15:22,930 --> 00:15:30,160
then I can look at that volume here

293
00:15:27,610 --> 00:15:33,519
and you'll see that yes it is encrypted

294
00:15:30,160 --> 00:15:37,469
and it's encrypted using that key so

295
00:15:33,519 --> 00:15:37,470
that's the Amazon approach

296
00:15:41,160 --> 00:15:49,779
what about Microsoft is here well with

297
00:15:45,160 --> 00:15:52,810
Azur again you can encrypt the route and

298
00:15:49,779 --> 00:15:54,250
attach drives of virtual machines so the

299
00:15:52,810 --> 00:15:58,599
first thing you have to do is to create

300
00:15:54,250 --> 00:16:01,589
a key vault then create a key in the key

301
00:15:58,600 --> 00:16:05,079
vault and then build the virtual machine

302
00:16:01,589 --> 00:16:08,529
unencrypted and then run Pasha a

303
00:16:05,079 --> 00:16:10,390
PowerShell script which encrypts using

304
00:16:08,529 --> 00:16:14,640
BitLocker if it's a Windows virtual

305
00:16:10,390 --> 00:16:17,350
machine or DM crypt if it's Linux and

306
00:16:14,640 --> 00:16:19,510
that uses the key that's in key vaults

307
00:16:17,350 --> 00:16:22,200
which actually encrypts the secret that

308
00:16:19,510 --> 00:16:26,350
said used to as the BitLocker encryption

309
00:16:22,200 --> 00:16:28,899
key and this process takes around about

310
00:16:26,350 --> 00:16:31,149
10 minutes per virtual machine and of

311
00:16:28,899 --> 00:16:32,860
course this can be sequence into a build

312
00:16:31,149 --> 00:16:34,750
pipeline so as soon as you build the

313
00:16:32,860 --> 00:16:36,399
virtual machine you then run the patch

314
00:16:34,750 --> 00:16:39,370
file script so you can complete you can

315
00:16:36,399 --> 00:16:46,420
completely automate this so I'm just

316
00:16:39,370 --> 00:16:48,579
gonna show you that in Azure so back in

317
00:16:46,420 --> 00:16:51,880
this year portal I'm going to go into

318
00:16:48,579 --> 00:16:59,229
virtual machines and here's my virtual

319
00:16:51,880 --> 00:17:01,540
machine and if I select this go to disks

320
00:16:59,230 --> 00:17:03,490
you'll see yes

321
00:17:01,540 --> 00:17:06,428
encryption is enabled and that was

322
00:17:03,490 --> 00:17:11,349
achieved using the approach which I just

323
00:17:06,429 --> 00:17:13,209
showed you so comparing AWS adizero for

324
00:17:11,349 --> 00:17:16,389
virtual machine encryption both have a

325
00:17:13,209 --> 00:17:18,220
solution both work very well the main

326
00:17:16,390 --> 00:17:20,799
difference is that with AWS the machine

327
00:17:18,220 --> 00:17:23,079
can be encrypted right from the moment

328
00:17:20,799 --> 00:17:25,569
that is built because the ami is

329
00:17:23,079 --> 00:17:28,740
encrypted with the 0 is not encrypted to

330
00:17:25,569 --> 00:17:31,840
start with and then you encrypt it using

331
00:17:28,740 --> 00:17:34,320
half ah you found on the encryption

332
00:17:31,840 --> 00:17:34,320
using partial

333
00:17:34,650 --> 00:17:43,410
so that's number two let's move on to

334
00:17:37,920 --> 00:17:46,880
number three of my tasks at work so the

335
00:17:43,410 --> 00:17:50,130
third one is alerting on an unauthorized

336
00:17:46,880 --> 00:17:53,250
API or service principle call so we

337
00:17:50,130 --> 00:17:55,620
start off with AWS so the requirement

338
00:17:53,250 --> 00:17:59,040
was to come up with an alert if a

339
00:17:55,620 --> 00:18:00,780
particular AWS key is used from an IP

340
00:17:59,040 --> 00:18:02,790
address which is not supposed to be used

341
00:18:00,780 --> 00:18:06,059
from so again a fairly common

342
00:18:02,790 --> 00:18:09,510
requirement for organizations concerned

343
00:18:06,059 --> 00:18:11,399
about security so there's more than one

344
00:18:09,510 --> 00:18:13,800
ways that this could be done but the way

345
00:18:11,400 --> 00:18:17,280
we tried did it was to implement a

346
00:18:13,800 --> 00:18:19,770
lambda function so a lambda function

347
00:18:17,280 --> 00:18:22,170
that I implemented is shown here so

348
00:18:19,770 --> 00:18:25,290
turned on Cloud trails the Cloud trail

349
00:18:22,170 --> 00:18:28,350
provides a log of all activity on the

350
00:18:25,290 --> 00:18:33,059
account that I then configured to send

351
00:18:28,350 --> 00:18:35,850
to mystery bucket the s3 the objects

352
00:18:33,059 --> 00:18:37,770
arriving in s3 is then used to trigger

353
00:18:35,850 --> 00:18:40,830
the lambda function which then does some

354
00:18:37,770 --> 00:18:43,230
analysis to see if it matches the

355
00:18:40,830 --> 00:18:47,189
particular condition for the key and IP

356
00:18:43,230 --> 00:18:49,140
address and then to actually send an

357
00:18:47,190 --> 00:18:53,160
alert to a simple notification service

358
00:18:49,140 --> 00:18:58,710
or SLS which are then subscribed to from

359
00:18:53,160 --> 00:19:00,240
my email address so this code is in this

360
00:18:58,710 --> 00:19:02,730
case it's JavaScript it could equally

361
00:19:00,240 --> 00:19:06,320
well be and nodejs it could equally well

362
00:19:02,730 --> 00:19:09,270
be Python so if I look at my email

363
00:19:06,320 --> 00:19:14,820
you'll see here oops that's the wrong

364
00:19:09,270 --> 00:19:17,040
one as obvious yeah so here's here's an

365
00:19:14,820 --> 00:19:21,059
example alert received using this

366
00:19:17,040 --> 00:19:22,520
mechanism from AWS so that's the Amazon

367
00:19:21,059 --> 00:19:26,090
solution

368
00:19:22,520 --> 00:19:26,090
what about is you

369
00:19:33,690 --> 00:19:43,120
okay well in his ear similar requirement

370
00:19:40,990 --> 00:19:45,310
that if a particular SEO service

371
00:19:43,120 --> 00:19:48,429
principle is used from an unauthorized

372
00:19:45,310 --> 00:19:50,620
IP address I want to get an alert so the

373
00:19:48,430 --> 00:19:53,140
solution that I came up with there was

374
00:19:50,620 --> 00:19:56,199
firstly to use as your activity log so

375
00:19:53,140 --> 00:19:58,330
it's your activity log is equivalent to

376
00:19:56,200 --> 00:20:01,870
cloud trail and it's a record of all of

377
00:19:58,330 --> 00:20:05,409
the different changes and calls that are

378
00:20:01,870 --> 00:20:09,610
made to that subscription I configured

379
00:20:05,410 --> 00:20:10,300
that as your activity log - to send that

380
00:20:09,610 --> 00:20:14,050
information

381
00:20:10,300 --> 00:20:17,169
- as your log Analytics and then within

382
00:20:14,050 --> 00:20:19,680
log Analytics wrote a saved search to

383
00:20:17,170 --> 00:20:23,080
look for that particular pattern of

384
00:20:19,680 --> 00:20:26,320
information and then within as your

385
00:20:23,080 --> 00:20:28,389
monitor traitors and alerts trivial and

386
00:20:26,320 --> 00:20:32,860
alert rule and an alert action group

387
00:20:28,390 --> 00:20:35,410
which pointed to my email address so

388
00:20:32,860 --> 00:20:38,770
that was the approach with this year so

389
00:20:35,410 --> 00:20:42,430
just taking a look at that if I go back

390
00:20:38,770 --> 00:20:46,600
into the the CEO portal go back to not

391
00:20:42,430 --> 00:20:50,020
going to monitor and then alerts and

392
00:20:46,600 --> 00:20:53,080
I'll just change this so the past seven

393
00:20:50,020 --> 00:20:56,170
days so here at my alerts so they're

394
00:20:53,080 --> 00:21:00,580
generated using this mechanism and if I

395
00:20:56,170 --> 00:21:03,790
go into email there's an example email

396
00:21:00,580 --> 00:21:05,770
from that alert so you can see that with

397
00:21:03,790 --> 00:21:07,659
both a SS enters year it's possible to

398
00:21:05,770 --> 00:21:09,280
come up with good solutions I'm probably

399
00:21:07,660 --> 00:21:11,160
found the easier one a bit more

400
00:21:09,280 --> 00:21:14,110
straightforward to do because just

401
00:21:11,160 --> 00:21:16,120
personally the way that you write the

402
00:21:14,110 --> 00:21:20,199
search queries is this should be easy

403
00:21:16,120 --> 00:21:23,889
whereas for me writing nodejs and Java

404
00:21:20,200 --> 00:21:25,090
scripts is a bit more time-consuming but

405
00:21:23,890 --> 00:21:28,030
they're nothing wrong you know either

406
00:21:25,090 --> 00:21:38,699
approach either solution is is great and

407
00:21:28,030 --> 00:21:42,540
works very well so so

408
00:21:38,700 --> 00:21:45,210
my third actual implementation so we're

409
00:21:42,540 --> 00:21:49,770
now going to move what we're going to do

410
00:21:45,210 --> 00:21:53,400
now is rather than do any questions at

411
00:21:49,770 --> 00:21:55,370
the end we're going to do a few just got

412
00:21:53,400 --> 00:22:01,410
time for a few questions or comments

413
00:21:55,370 --> 00:22:04,530
okay see one here already and the B

414
00:22:01,410 --> 00:22:07,970
sides volunteers are very kindly going

415
00:22:04,530 --> 00:22:11,460
to go around the room with microphones

416
00:22:07,970 --> 00:22:13,500
so that one there so if what have you

417
00:22:11,460 --> 00:22:15,180
want to start I say we've only got time

418
00:22:13,500 --> 00:22:16,680
for about three questions I should think

419
00:22:15,180 --> 00:22:18,630
or comments if you just want to make a

420
00:22:16,680 --> 00:22:21,480
comment all this equipment

421
00:22:18,630 --> 00:22:23,100
so when building fears and then

422
00:22:21,480 --> 00:22:25,620
encrypting their personal see really

423
00:22:23,100 --> 00:22:27,990
build of retrospective going into this

424
00:22:25,620 --> 00:22:29,939
later then encrypt in their to state to

425
00:22:27,990 --> 00:22:33,000
neighbors and zero and you do the

426
00:22:29,940 --> 00:22:35,970
improvements there well okay so I think

427
00:22:33,000 --> 00:22:39,930
you all heard that the difference I

428
00:22:35,970 --> 00:22:41,430
guess well obviously if it's if it's an

429
00:22:39,930 --> 00:22:43,560
existing a state and they're not

430
00:22:41,430 --> 00:22:46,680
encrypted then it can take a lot longer

431
00:22:43,560 --> 00:22:48,480
than ten minutes I've to be quite honest

432
00:22:46,680 --> 00:22:51,090
I've that would definitely work in this

433
00:22:48,480 --> 00:22:53,670
year to be honest I haven't ever thought

434
00:22:51,090 --> 00:22:56,459
about how that might be done with AWS or

435
00:22:53,670 --> 00:22:58,590
whether it's possible I don't if anybody

436
00:22:56,460 --> 00:23:00,960
else has but so I wouldn't like to

437
00:22:58,590 --> 00:23:02,280
comment about AWS but as you would

438
00:23:00,960 --> 00:23:05,160
definitely work but it would take a lot

439
00:23:02,280 --> 00:23:07,530
longer than 10 minutes so I think we had

440
00:23:05,160 --> 00:23:10,560
another question at the front or comment

441
00:23:07,530 --> 00:23:11,960
oh sorry whatever they were just going

442
00:23:10,560 --> 00:23:16,320
to anyone near the back first

443
00:23:11,960 --> 00:23:18,750
yeah I think the student beaches on both

444
00:23:16,320 --> 00:23:21,870
is quite featuring both partners are

445
00:23:18,750 --> 00:23:24,840
very feature it either best way to me

446
00:23:21,870 --> 00:23:28,020
compared the security of the department

447
00:23:24,840 --> 00:23:31,439
is to see if their resources are secure

448
00:23:28,020 --> 00:23:34,379
by default and they can't follow that

449
00:23:31,440 --> 00:23:36,810
sort of policy how I think a Joe had

450
00:23:34,380 --> 00:23:40,370
done really bad job of doing that you

451
00:23:36,810 --> 00:23:42,899
know so making a question which means

452
00:23:40,370 --> 00:23:47,489
public the public IP addresses I think

453
00:23:42,900 --> 00:23:50,580
that's kind of not very good she already

454
00:23:47,490 --> 00:23:53,940
did are following their superb ideas

455
00:23:50,580 --> 00:23:55,350
yes okay well thank you for that so in

456
00:23:53,940 --> 00:23:57,570
case anybody didn't hear I think the

457
00:23:55,350 --> 00:24:01,408
comment to summarize was that you feel

458
00:23:57,570 --> 00:24:03,360
that one should make it a choice or

459
00:24:01,409 --> 00:24:06,870
decision according to the default

460
00:24:03,360 --> 00:24:10,379
settings and you believe that a SS does

461
00:24:06,870 --> 00:24:14,789
a better job of that okay go ahead

462
00:24:10,380 --> 00:24:16,590
sorry in confluence here well one in the

463
00:24:14,789 --> 00:24:18,149
back and then we'll do one at the front

464
00:24:16,590 --> 00:24:19,620
and then we'll have to carry on we'll

465
00:24:18,149 --> 00:24:24,860
have to move on for there it's just a

466
00:24:19,620 --> 00:24:31,969
time so if you want to go ahead one or

467
00:24:24,860 --> 00:24:34,649
both of the other one okay if you get

468
00:24:31,970 --> 00:24:38,039
well how's it your disagreement with a

469
00:24:34,649 --> 00:24:39,600
Muslim okay so basically you're

470
00:24:38,039 --> 00:24:41,549
advocating your multi-cloud strategy

471
00:24:39,600 --> 00:24:43,799
which a lot of organizations to do I

472
00:24:41,549 --> 00:24:45,840
completely you know agree with that okay

473
00:24:43,799 --> 00:24:47,850
they will take them out as a comment and

474
00:24:45,840 --> 00:24:49,949
last one and then we need to move on in

475
00:24:47,850 --> 00:24:52,379
the interest of time and the next

476
00:24:49,950 --> 00:24:54,269
speakers thank you just a question based

477
00:24:52,380 --> 00:24:57,809
on your it's you service another

478
00:24:54,269 --> 00:25:00,389
customer having seen security be a

479
00:24:57,809 --> 00:25:03,059
defining factor between the two flowers

480
00:25:00,389 --> 00:25:05,219
or is it a matter that should be to

481
00:25:03,059 --> 00:25:07,950
secure AWS because they have already

482
00:25:05,220 --> 00:25:11,010
chosen AWS or secure assured because

483
00:25:07,950 --> 00:25:13,409
they have already chosen sure yes that's

484
00:25:11,010 --> 00:25:16,320
a really good question and in my

485
00:25:13,409 --> 00:25:18,419
personal experience the decision has

486
00:25:16,320 --> 00:25:20,129
always been made by very senior

487
00:25:18,419 --> 00:25:23,279
management without really any knowledge

488
00:25:20,130 --> 00:25:25,080
of security much at all and then it's

489
00:25:23,279 --> 00:25:28,049
been my job to make it secure whichever

490
00:25:25,080 --> 00:25:30,600
it may be some of you may have different

491
00:25:28,049 --> 00:25:32,129
experiences so thank you for those

492
00:25:30,600 --> 00:25:34,760
comments and questions really appreciate

493
00:25:32,130 --> 00:25:38,779
that so what we're going to do now is

494
00:25:34,760 --> 00:25:42,769
we're actually going to do a vote and

495
00:25:38,779 --> 00:25:46,679
don't take this too seriously we've had

496
00:25:42,769 --> 00:25:48,990
the three besides well three as the pea

497
00:25:46,679 --> 00:25:51,929
sized volunteers are very card Lee gonna

498
00:25:48,990 --> 00:25:54,870
come up and help with this so that they

499
00:25:51,929 --> 00:25:57,510
can take a view and then I'll announce

500
00:25:54,870 --> 00:26:00,539
the results and then it will wrap up at

501
00:25:57,510 --> 00:26:03,029
that point and finish so what we're

502
00:26:00,539 --> 00:26:04,500
going to do here is what I'm asking you

503
00:26:03,029 --> 00:26:07,860
to do

504
00:26:04,500 --> 00:26:10,169
is vote for AWS or Z though this is not

505
00:26:07,860 --> 00:26:14,820
a referendum or anything like that okay

506
00:26:10,169 --> 00:26:16,770
is don't take it too seriously and you

507
00:26:14,820 --> 00:26:18,240
can vote if you don't agree with this

508
00:26:16,770 --> 00:26:21,990
whole thing you don't have to vote right

509
00:26:18,240 --> 00:26:24,120
and if you think that both AWS and this

510
00:26:21,990 --> 00:26:26,220
year they're both you know more or less

511
00:26:24,120 --> 00:26:27,928
equivalent on security mirrors damn it

512
00:26:26,220 --> 00:26:29,250
then you can vote for both nothing wrong

513
00:26:27,929 --> 00:26:31,169
with you voting for both if that's what

514
00:26:29,250 --> 00:26:33,330
you feel and you're going to just

515
00:26:31,169 --> 00:26:36,590
determine the result by looking at the

516
00:26:33,330 --> 00:26:39,960
audience so you guys ready okay

517
00:26:36,590 --> 00:26:42,418
so those of you who want to vote for AWS

518
00:26:39,960 --> 00:26:44,750
please raise your hands now and keep

519
00:26:42,419 --> 00:26:47,669
them up for a little while

520
00:26:44,750 --> 00:26:49,080
so you'll go back in your mind okay

521
00:26:47,669 --> 00:26:51,299
thank you so now put your hands down

522
00:26:49,080 --> 00:26:55,850
please and now those of you want to vote

523
00:26:51,299 --> 00:26:55,850
for is here please put your hands up now

524
00:26:56,900 --> 00:27:01,740
okay if you got that thank you

525
00:26:59,850 --> 00:27:04,260
so I'm going to leave it to you to

526
00:27:01,740 --> 00:27:12,690
announce the results okay so the winner

527
00:27:04,260 --> 00:27:14,730
is okay that's the winners so okay

528
00:27:12,690 --> 00:27:17,190
so what I would say and we haven't

529
00:27:14,730 --> 00:27:20,299
finished yet what I would just like to

530
00:27:17,190 --> 00:27:23,280
say is and I hope you'll join me in

531
00:27:20,299 --> 00:27:26,700
appreciating you know all the hard work

532
00:27:23,280 --> 00:27:28,970
which both AWS and as you have put into

533
00:27:26,700 --> 00:27:32,120
developing a very conference

534
00:27:28,970 --> 00:27:33,929
comprehensive set of security services

535
00:27:32,120 --> 00:27:35,969
so you know thank you to both

536
00:27:33,929 --> 00:27:37,770
organizations so I'm just going to

537
00:27:35,970 --> 00:27:42,120
hopefully your honor say well that's a

538
00:27:37,770 --> 00:27:45,770
boat okay if you just hang on for a

539
00:27:42,120 --> 00:27:50,070
minute just got a couple of last words

540
00:27:45,770 --> 00:27:52,260
so firstly if any of you wish to are

541
00:27:50,070 --> 00:27:54,470
interested in finding out more than we

542
00:27:52,260 --> 00:27:57,270
can go into in half an hour

543
00:27:54,470 --> 00:27:59,520
my next cloud security deficit cops

544
00:27:57,270 --> 00:28:02,639
training course is at 44 Khan in

545
00:27:59,520 --> 00:28:05,460
September details on the 44 comm website

546
00:28:02,640 --> 00:28:09,120
be great to see some of you there and if

547
00:28:05,460 --> 00:28:10,590
you want to follow me on Twitter connect

548
00:28:09,120 --> 00:28:11,729
on LinkedIn I'm the only four

549
00:28:10,590 --> 00:28:15,178
Schwarzenegger working in security

550
00:28:11,730 --> 00:28:16,890
you're very welcome to email or we'll be

551
00:28:15,179 --> 00:28:18,180
around the rest of the day as well so

552
00:28:16,890 --> 00:28:21,440
thank you very much and thank you also

553
00:28:18,180 --> 00:28:21,440
to the p-side

