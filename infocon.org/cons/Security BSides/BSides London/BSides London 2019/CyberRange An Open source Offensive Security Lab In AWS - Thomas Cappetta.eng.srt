1
00:00:02,300 --> 00:00:08,160
great first thank you everybody first

2
00:00:06,870 --> 00:00:09,629
time over in London so I really

3
00:00:08,160 --> 00:00:12,150
appreciate the invite first time

4
00:00:09,630 --> 00:00:13,740
attending b-side so really appreciate

5
00:00:12,150 --> 00:00:16,230
being able to join the community and

6
00:00:13,740 --> 00:00:18,779
first time I'm presenting the project so

7
00:00:16,230 --> 00:00:21,330
you know if the demo gods are able to

8
00:00:18,779 --> 00:00:23,759
grace me with three first-time things

9
00:00:21,330 --> 00:00:27,359
that'd be great I do have a live demo

10
00:00:23,760 --> 00:00:29,039
that I'll start up it takes me maybe

11
00:00:27,359 --> 00:00:31,320
about five minutes to get everything up

12
00:00:29,039 --> 00:00:33,059
and running there's some configuration

13
00:00:31,320 --> 00:00:35,489
aspects of it that if I can I'll dive

14
00:00:33,059 --> 00:00:38,180
into it and actually do a demo or

15
00:00:35,489 --> 00:00:41,910
actually do the configuration and and

16
00:00:38,180 --> 00:00:46,289
show you everything that I can so this

17
00:00:41,910 --> 00:00:47,879
is cypher range the inspiration of this

18
00:00:46,289 --> 00:00:50,760
project really came when I was working

19
00:00:47,879 --> 00:00:54,930
at JP Morgan Chase a few years ago

20
00:00:50,760 --> 00:00:58,320
between 2009 2014 we have a large

21
00:00:54,930 --> 00:01:00,210
enterprise environment very complex and

22
00:00:58,320 --> 00:01:02,760
I thought there was we were seeing a lot

23
00:01:00,210 --> 00:01:05,400
of issues within the the environment and

24
00:01:02,760 --> 00:01:08,250
we always needed to figure out a way to

25
00:01:05,400 --> 00:01:10,200
recreate those environments those issues

26
00:01:08,250 --> 00:01:14,659
the technologies that we were using and

27
00:01:10,200 --> 00:01:14,659
we noticed step back

28
00:01:16,159 --> 00:01:26,850
start with the demo because it's gonna

29
00:01:20,159 --> 00:01:30,299
take a few minutes so bear with me all

30
00:01:26,850 --> 00:01:32,130
right so again going back to the

31
00:01:30,299 --> 00:01:33,390
inspiration working in a large

32
00:01:32,130 --> 00:01:35,579
enterprise environment you have a lot of

33
00:01:33,390 --> 00:01:37,799
complexities and one of the challenges

34
00:01:35,579 --> 00:01:39,509
that you have is always trying to

35
00:01:37,799 --> 00:01:41,850
replicate those environments and being

36
00:01:39,509 --> 00:01:43,579
able to reproduce things right from a

37
00:01:41,850 --> 00:01:45,780
quality assurance perspective

38
00:01:43,579 --> 00:01:49,258
environments differ from development to

39
00:01:45,780 --> 00:01:52,020
production we know that quite often so

40
00:01:49,259 --> 00:01:54,210
the goal here was to really invest in

41
00:01:52,020 --> 00:01:56,689
DevOps tooling and being able to take

42
00:01:54,210 --> 00:01:58,949
that tooling and constantly reproduce

43
00:01:56,689 --> 00:01:59,398
assets environments and things of that

44
00:01:58,950 --> 00:02:02,969
nature

45
00:01:59,399 --> 00:02:06,270
so I spawned or I went into cloud

46
00:02:02,969 --> 00:02:07,259
computing with Cisco and OpenStack when

47
00:02:06,270 --> 00:02:11,099
they were doing their OpenStack

48
00:02:07,259 --> 00:02:12,720
deployments we very quickly learned why

49
00:02:11,099 --> 00:02:13,929
very quickly learned that OpenStack was

50
00:02:12,720 --> 00:02:17,049
well behind a double

51
00:02:13,930 --> 00:02:19,299
less and so I switched over and actually

52
00:02:17,049 --> 00:02:21,340
joined tenable who I'm a part of now and

53
00:02:19,299 --> 00:02:23,709
I've really started diving into cloud

54
00:02:21,340 --> 00:02:25,780
computing since that time I've really

55
00:02:23,709 --> 00:02:27,640
embraced the DevOps methodology I've

56
00:02:25,780 --> 00:02:29,200
thrown a little bit of security aspect

57
00:02:27,640 --> 00:02:31,899
into it so we've got this new coined

58
00:02:29,200 --> 00:02:33,879
phrase of SEC DevOps I'd like to say I'm

59
00:02:31,900 --> 00:02:36,969
really helping spearhead that movement

60
00:02:33,879 --> 00:02:39,700
so cyber range is really a the goal of

61
00:02:36,969 --> 00:02:41,530
this is an offensive defensive security

62
00:02:39,700 --> 00:02:44,950
environment a safe environment for folks

63
00:02:41,530 --> 00:02:46,480
that do research you know you use your

64
00:02:44,950 --> 00:02:48,668
laptops quite often like I do

65
00:02:46,480 --> 00:02:50,319
your memory your compute it's always

66
00:02:48,669 --> 00:02:52,090
getting over utilized we need the

67
00:02:50,319 --> 00:02:53,828
ability to leverage and tap into the

68
00:02:52,090 --> 00:02:58,810
cloud to really expand our capabilities

69
00:02:53,829 --> 00:03:01,959
right so that said if you're interested

70
00:02:58,810 --> 00:03:04,000
go ahead to the github it's right on

71
00:03:01,959 --> 00:03:08,409
cyber range and it's a fork of the

72
00:03:04,000 --> 00:03:10,599
circle see I example right there so a

73
00:03:08,409 --> 00:03:12,129
few thank-yous these are folks that

74
00:03:10,599 --> 00:03:13,500
might not have known that they've

75
00:03:12,129 --> 00:03:16,510
contributed in some way shape or form

76
00:03:13,500 --> 00:03:18,129
right off the bat I mentioned on Tom

77
00:03:16,510 --> 00:03:20,500
kappa tammeh vulnerability research

78
00:03:18,129 --> 00:03:22,690
engineer I work for tenable I'm part of

79
00:03:20,500 --> 00:03:24,519
the tenable research organization so

80
00:03:22,690 --> 00:03:26,198
they're the ones that really sponsored

81
00:03:24,519 --> 00:03:28,090
being in getting me over here I want to

82
00:03:26,199 --> 00:03:31,150
send a big THANK YOU to them

83
00:03:28,090 --> 00:03:32,859
Serkis University I mentioned JPMorgan

84
00:03:31,150 --> 00:03:34,629
Chase when I was with Chase I was

85
00:03:32,859 --> 00:03:37,030
sitting on the Serkis University campus

86
00:03:34,629 --> 00:03:39,220
we had a Tech Center there great

87
00:03:37,030 --> 00:03:41,560
collaboration they don't know that I'm

88
00:03:39,220 --> 00:03:43,629
gonna be applying to their masters

89
00:03:41,560 --> 00:03:45,280
program my goal there is to go into

90
00:03:43,629 --> 00:03:47,018
their cybersecurity master's program and

91
00:03:45,280 --> 00:03:48,729
to take this project and kind of bring

92
00:03:47,019 --> 00:03:50,650
it to the next level so I'm gonna thank

93
00:03:48,729 --> 00:03:52,120
them in advance if they get a copy of

94
00:03:50,650 --> 00:03:56,650
the record and hopefully they say hey

95
00:03:52,120 --> 00:03:58,209
good kudos to that guy right and then

96
00:03:56,650 --> 00:04:01,180
there's a few other folks as well that I

97
00:03:58,209 --> 00:04:03,579
want to call out form assembly a great

98
00:04:01,180 --> 00:04:06,549
company they have a really nice way of

99
00:04:03,579 --> 00:04:10,419
streamlining your data with forms the

100
00:04:06,549 --> 00:04:12,879
owner is actually a French so I've got

101
00:04:10,419 --> 00:04:14,650
if you go to the github there's a

102
00:04:12,879 --> 00:04:15,909
sign-up link I'll explain why there's a

103
00:04:14,650 --> 00:04:19,030
sign-up and why I need your information

104
00:04:15,909 --> 00:04:20,709
I share some of the tools with you but

105
00:04:19,029 --> 00:04:24,039
I'm using a forum assembly form so I'll

106
00:04:20,709 --> 00:04:26,860
give them a quick shout out a few other

107
00:04:24,039 --> 00:04:27,639
folks so nessus is Central's just a

108
00:04:26,860 --> 00:04:29,889
quick touch I know

109
00:04:27,639 --> 00:04:31,360
we can't really pitch products here I'm

110
00:04:29,889 --> 00:04:33,129
a terrible guy so I don't want to be

111
00:04:31,360 --> 00:04:35,379
overly biased I've included a bunch of

112
00:04:33,129 --> 00:04:37,870
other folks that we've collaborated with

113
00:04:35,379 --> 00:04:40,150
and compete with at the same time or in

114
00:04:37,870 --> 00:04:41,949
the market with us but tenable has done

115
00:04:40,150 --> 00:04:43,659
some really interesting things just a

116
00:04:41,949 --> 00:04:45,879
few weeks ago they announced nessus

117
00:04:43,659 --> 00:04:47,710
essentials the goal here with neces

118
00:04:45,879 --> 00:04:50,259
essentials is they've rebranded necess

119
00:04:47,710 --> 00:04:52,180
home and they're trying to take that and

120
00:04:50,259 --> 00:04:53,199
say hey look we're involved in learning

121
00:04:52,180 --> 00:04:54,879
aspect of it

122
00:04:53,199 --> 00:04:56,979
cybersecurity is always going to be

123
00:04:54,879 --> 00:04:58,360
constantly learning understanding what's

124
00:04:56,979 --> 00:05:00,039
going on in environment learning new

125
00:04:58,360 --> 00:05:00,879
tools alert and learning new procedures

126
00:05:00,039 --> 00:05:03,029
things of that nature

127
00:05:00,879 --> 00:05:05,349
nessus essentials is really trying to

128
00:05:03,029 --> 00:05:08,139
help you break into that market of our

129
00:05:05,349 --> 00:05:10,449
nobility management and the tooling we

130
00:05:08,139 --> 00:05:13,539
all know Callie rapid7 they have a well

131
00:05:10,449 --> 00:05:14,139
known footprint and then we have a few

132
00:05:13,539 --> 00:05:16,180
other folks

133
00:05:14,139 --> 00:05:17,560
fireEye they've come out with some

134
00:05:16,180 --> 00:05:19,360
really interesting stuff that I've

135
00:05:17,560 --> 00:05:20,800
leveraged and I've tapped onto they

136
00:05:19,360 --> 00:05:23,080
don't really they might not know them

137
00:05:20,800 --> 00:05:25,479
I'm leveraging them but commando VM and

138
00:05:23,080 --> 00:05:30,998
flair you know are really the two tools

139
00:05:25,479 --> 00:05:33,729
they're a commando VM is is a it's a

140
00:05:30,999 --> 00:05:36,460
windows-based penetration testing system

141
00:05:33,729 --> 00:05:39,159
so it's similar to Kali Linux just

142
00:05:36,460 --> 00:05:43,419
windows-based and flair is a is a

143
00:05:39,159 --> 00:05:46,360
malware analysis toolkit all right so

144
00:05:43,419 --> 00:05:51,128
let's see how we're doing on this of

145
00:05:46,360 --> 00:05:58,990
course demo guys crushed me oh there you

146
00:05:51,129 --> 00:06:02,800
go that's an easy fix in one second GZ

147
00:05:58,990 --> 00:06:05,919
what we have created first all right so

148
00:06:02,800 --> 00:06:08,229
the general goal of the project is to be

149
00:06:05,919 --> 00:06:10,419
able to create a ton of different

150
00:06:08,229 --> 00:06:13,719
vulnerable assets in an environment in

151
00:06:10,419 --> 00:06:15,250
AWS and in February AWS announced that

152
00:06:13,719 --> 00:06:17,409
they were gonna allow folks to do

153
00:06:15,250 --> 00:06:20,649
penetration testing within the

154
00:06:17,409 --> 00:06:21,909
environment there we go we do have some

155
00:06:20,649 --> 00:06:23,649
asset so I'm going to ignore the errors

156
00:06:21,909 --> 00:06:25,719
just for sake of time and not going

157
00:06:23,649 --> 00:06:27,639
through a debugging session live on on a

158
00:06:25,719 --> 00:06:30,729
demo it just doesn't work well typically

159
00:06:27,639 --> 00:06:32,469
so I'll ignore whatever errors I have if

160
00:06:30,729 --> 00:06:34,659
I can't jump into configuration that's

161
00:06:32,469 --> 00:06:36,699
fine but AWS back in February we went

162
00:06:34,659 --> 00:06:38,199
ahead and said they recognize that

163
00:06:36,699 --> 00:06:40,569
people are using their platforms they

164
00:06:38,199 --> 00:06:41,320
recognize that they have a process for

165
00:06:40,569 --> 00:06:43,870
allowing

166
00:06:41,320 --> 00:06:45,610
you to do penetration test and analysis

167
00:06:43,870 --> 00:06:47,020
on your own systems and they've gone

168
00:06:45,610 --> 00:06:49,210
ahead and opened that up to say if

169
00:06:47,020 --> 00:06:51,070
you're doing testing on your own systems

170
00:06:49,210 --> 00:06:53,469
we're gonna just allow you to do

171
00:06:51,070 --> 00:06:54,969
whatever you want to do so two weeks

172
00:06:53,470 --> 00:06:57,460
prior to that I was building this

173
00:06:54,970 --> 00:07:00,640
project he really know that I knew that

174
00:06:57,460 --> 00:07:02,620
they had a process of asking for

175
00:07:00,640 --> 00:07:03,880
permission but I'm not necessarily and

176
00:07:02,620 --> 00:07:06,130
asked for a permission type of guy I'm

177
00:07:03,880 --> 00:07:07,420
more of a sent me the email tell me that

178
00:07:06,130 --> 00:07:11,080
I'm doing something abusive and then

179
00:07:07,420 --> 00:07:12,610
I'll go ahead and step back so two weeks

180
00:07:11,080 --> 00:07:13,960
before they announced that they were

181
00:07:12,610 --> 00:07:16,660
allowing us to do that I was already

182
00:07:13,960 --> 00:07:18,280
working on this project so I believe I'm

183
00:07:16,660 --> 00:07:20,470
the first in the market right now and

184
00:07:18,280 --> 00:07:22,000
it's all open source and like I said

185
00:07:20,470 --> 00:07:23,320
it's gonna be used for education on my

186
00:07:22,000 --> 00:07:25,900
own benefit hopefully it's something

187
00:07:23,320 --> 00:07:28,150
that you guys can all get get something

188
00:07:25,900 --> 00:07:37,630
out of it so in general I'm using a

189
00:07:28,150 --> 00:07:40,479
bunch of tools let's go - apologies I'll

190
00:07:37,630 --> 00:07:42,010
be jumping around here now so I'm using

191
00:07:40,480 --> 00:07:44,500
a bunch of tooling to go ahead and

192
00:07:42,010 --> 00:07:47,430
create all of these different assets and

193
00:07:44,500 --> 00:07:48,850
I've actually leveraged a few different

194
00:07:47,430 --> 00:07:50,560
tools

195
00:07:48,850 --> 00:07:52,450
one of them is cloud craft you can see

196
00:07:50,560 --> 00:07:54,490
that on the right hand side cloud CREF

197
00:07:52,450 --> 00:07:57,070
is a excellent architectural blueprint

198
00:07:54,490 --> 00:07:58,690
and tool it allows you to not only spec

199
00:07:57,070 --> 00:08:01,180
out your architecture it allows you to

200
00:07:58,690 --> 00:08:03,010
also build it or even connect your

201
00:08:01,180 --> 00:08:04,000
environment hold back what you have in

202
00:08:03,010 --> 00:08:07,719
your environment and give you a

203
00:08:04,000 --> 00:08:09,550
relatively accurate analysis of the cost

204
00:08:07,720 --> 00:08:11,740
so right hand side what we're seeing is

205
00:08:09,550 --> 00:08:13,810
this toolkit in general when you spawn

206
00:08:11,740 --> 00:08:14,380
everything up it cost you about a dollar

207
00:08:13,810 --> 00:08:16,420
an hour

208
00:08:14,380 --> 00:08:18,130
I think that's relatively reasonable

209
00:08:16,420 --> 00:08:21,130
given everything that we have you know

210
00:08:18,130 --> 00:08:25,240
roughly 3035 assets on the left-hand

211
00:08:21,130 --> 00:08:26,620
side like you saw in the ec2 console on

212
00:08:25,240 --> 00:08:28,900
the left hand side we just have a whole

213
00:08:26,620 --> 00:08:31,090
bunch of different assets I realized

214
00:08:28,900 --> 00:08:33,669
that it's very small I don't expect you

215
00:08:31,090 --> 00:08:35,079
to really be able to see it apologies

216
00:08:33,669 --> 00:08:36,760
for that but I wanted to just give you a

217
00:08:35,080 --> 00:08:43,690
little bit of an insight into the size

218
00:08:36,760 --> 00:08:46,060
and scale the goal of this the goal of

219
00:08:43,690 --> 00:08:48,310
this really is to create a few different

220
00:08:46,060 --> 00:08:50,979
areas that you can work in so we know

221
00:08:48,310 --> 00:08:52,780
that red teamers have a dedicated

222
00:08:50,980 --> 00:08:54,940
network that they typically work in a

223
00:08:52,780 --> 00:08:56,800
bunch of assets that they need to have

224
00:08:54,940 --> 00:08:58,630
control over and their goal the goal

225
00:08:56,800 --> 00:08:59,560
there and the thought there is we're

226
00:08:58,630 --> 00:09:01,689
going to go ahead and give you a

227
00:08:59,560 --> 00:09:07,119
separate subnet up there in top left

228
00:09:01,690 --> 00:09:08,980
corner on the over to the right see if

229
00:09:07,120 --> 00:09:11,560
this works there you go hey you think at

230
00:09:08,980 --> 00:09:13,360
a nice little point over here we've got

231
00:09:11,560 --> 00:09:15,790
just a bunch of vulnerable assets look

232
00:09:13,360 --> 00:09:19,030
I'm no expert I'd like to leverage tools

233
00:09:15,790 --> 00:09:20,860
okay I leverage tools quite often and I

234
00:09:19,030 --> 00:09:22,870
believe leveraging tools allows me to

235
00:09:20,860 --> 00:09:24,430
get up to speed quicker and faster a lot

236
00:09:22,870 --> 00:09:26,890
of these vulnerable assets that are over

237
00:09:24,430 --> 00:09:28,569
there on in that section are all things

238
00:09:26,890 --> 00:09:29,860
that I've gotten offline it's not

239
00:09:28,570 --> 00:09:31,660
something that I've actually built

240
00:09:29,860 --> 00:09:33,970
myself so I don't want to take

241
00:09:31,660 --> 00:09:37,959
authorship of that these are things that

242
00:09:33,970 --> 00:09:39,760
I found on Vong hob Metasploit both two

243
00:09:37,960 --> 00:09:41,440
and three I've been able to leverage and

244
00:09:39,760 --> 00:09:43,270
I've had to do some building to be able

245
00:09:41,440 --> 00:09:44,830
to get these things up to Amazon so

246
00:09:43,270 --> 00:09:46,990
there's a little bit of work it's not as

247
00:09:44,830 --> 00:09:48,610
easy as coming in and being able to say

248
00:09:46,990 --> 00:09:50,050
hey look I take this and I just put it

249
00:09:48,610 --> 00:09:51,820
up there and it works fine out of the

250
00:09:50,050 --> 00:09:54,099
box I've gone through a bunch of

251
00:09:51,820 --> 00:09:56,110
different assets and at times there are

252
00:09:54,100 --> 00:09:58,150
challenges in some areas

253
00:09:56,110 --> 00:10:00,010
I tried get in Windows XP up there

254
00:09:58,150 --> 00:10:02,500
unfortunately Amazon doesn't like

255
00:10:00,010 --> 00:10:04,630
Windows XP I'm not really sure why but I

256
00:10:02,500 --> 00:10:06,490
was hoping that they would like it so

257
00:10:04,630 --> 00:10:07,660
you know in that green area we have a

258
00:10:06,490 --> 00:10:10,540
whole bunch of targets these are all

259
00:10:07,660 --> 00:10:12,699
purposely vulnerable assets that you

260
00:10:10,540 --> 00:10:15,040
know the red teamers can actually use to

261
00:10:12,700 --> 00:10:17,620
go ahead and target all of the assets

262
00:10:15,040 --> 00:10:20,890
that are there that are listed there are

263
00:10:17,620 --> 00:10:24,160
quite you know quite documented right so

264
00:10:20,890 --> 00:10:26,170
if you are like me and your research and

265
00:10:24,160 --> 00:10:27,459
our offensive security the thought here

266
00:10:26,170 --> 00:10:29,199
is you're going to be doing a lot of

267
00:10:27,460 --> 00:10:30,220
research into how do i exploit things

268
00:10:29,200 --> 00:10:34,330
what am I looking at

269
00:10:30,220 --> 00:10:36,250
and having folks tell you using a model

270
00:10:34,330 --> 00:10:38,560
try harder is great but when you

271
00:10:36,250 --> 00:10:40,839
constantly hit brick walls it's it's

272
00:10:38,560 --> 00:10:43,180
frustrating and so really the benefit of

273
00:10:40,839 --> 00:10:45,130
the project in general is to help you

274
00:10:43,180 --> 00:10:47,349
identify how to get through those walls

275
00:10:45,130 --> 00:10:49,030
right so if we give you some assets and

276
00:10:47,350 --> 00:10:50,650
we tell you hey look you can spawn off

277
00:10:49,030 --> 00:10:52,810
this environment you can create these

278
00:10:50,650 --> 00:10:54,520
assets you can go ahead and attack your

279
00:10:52,810 --> 00:10:55,930
own assets and you can do the research

280
00:10:54,520 --> 00:10:57,640
that you need to do to be able to

281
00:10:55,930 --> 00:10:59,439
understand how to get through and how to

282
00:10:57,640 --> 00:11:03,280
compromise those systems I think that

283
00:10:59,440 --> 00:11:05,770
becomes something that's a value add to

284
00:11:03,280 --> 00:11:06,699
expand on that I've started looking into

285
00:11:05,770 --> 00:11:08,590
what do I

286
00:11:06,700 --> 00:11:09,970
want to do next right where do I want to

287
00:11:08,590 --> 00:11:12,100
focus how do I want to educate myself

288
00:11:09,970 --> 00:11:13,210
next and these are the things that I'm

289
00:11:12,100 --> 00:11:16,150
highlighting are going to be in the

290
00:11:13,210 --> 00:11:17,830
yellow area as well as the malware so

291
00:11:16,150 --> 00:11:20,439
now where's a very big area of

292
00:11:17,830 --> 00:11:22,570
opportunity for myself as well as many

293
00:11:20,440 --> 00:11:24,310
other folks and the biggest concern that

294
00:11:22,570 --> 00:11:25,960
I have with malware is we really don't

295
00:11:24,310 --> 00:11:28,390
know what's going on there I don't don't

296
00:11:25,960 --> 00:11:29,800
trust any type of malware on my home

297
00:11:28,390 --> 00:11:31,689
network I don't trust any type of

298
00:11:29,800 --> 00:11:33,729
malware on my computer even in a

299
00:11:31,690 --> 00:11:34,570
virtualized environment I'm kind of

300
00:11:33,730 --> 00:11:36,190
nervous about that

301
00:11:34,570 --> 00:11:39,120
so the thought here is I went ahead and

302
00:11:36,190 --> 00:11:41,440
put that up into the cloud I completed I

303
00:11:39,120 --> 00:11:43,510
created a completely separate and

304
00:11:41,440 --> 00:11:44,920
segregated environment that was isolated

305
00:11:43,510 --> 00:11:47,110
that would allow you to do your own

306
00:11:44,920 --> 00:11:51,189
level of malware analysis and so that's

307
00:11:47,110 --> 00:11:53,800
that malware subnet this detection lab

308
00:11:51,190 --> 00:11:56,110
the goal here is for the blue teamers

309
00:11:53,800 --> 00:11:57,790
that detection lab is something that I

310
00:11:56,110 --> 00:11:59,680
found just recently that's quite

311
00:11:57,790 --> 00:12:03,430
interesting a gentleman by the name of

312
00:11:59,680 --> 00:12:05,020
Chris Long created a project and that

313
00:12:03,430 --> 00:12:06,969
project out there on github the

314
00:12:05,020 --> 00:12:08,920
challenge that I have with being able to

315
00:12:06,970 --> 00:12:12,280
take that project and fully incorporate

316
00:12:08,920 --> 00:12:14,140
it into the solution is it requires a

317
00:12:12,280 --> 00:12:15,790
bunch of reconfigurations they use a ton

318
00:12:14,140 --> 00:12:17,740
of different scripts I have no problem

319
00:12:15,790 --> 00:12:19,870
parsing through those scripts but the

320
00:12:17,740 --> 00:12:21,550
challenge there is getting that to work

321
00:12:19,870 --> 00:12:23,610
with the currently existent environment

322
00:12:21,550 --> 00:12:27,400
it's going to be somewhat of a challenge

323
00:12:23,610 --> 00:12:29,560
and then the honeypot network we were

324
00:12:27,400 --> 00:12:31,480
just talking about Magna Carta mad cart

325
00:12:29,560 --> 00:12:34,569
a few moments ago the gentleman that was

326
00:12:31,480 --> 00:12:38,050
right before me honey pot honey tokens I

327
00:12:34,570 --> 00:12:39,640
think those are always valuable tools

328
00:12:38,050 --> 00:12:41,800
that you can leverage from an

329
00:12:39,640 --> 00:12:43,090
intelligence perspective so the thought

330
00:12:41,800 --> 00:12:46,380
here is you have a fully comprehensive

331
00:12:43,090 --> 00:12:49,330
Red Team Blue team intelligence

332
00:12:46,380 --> 00:12:52,360
collection network toolset that you can

333
00:12:49,330 --> 00:12:55,900
leverage to advance your own training

334
00:12:52,360 --> 00:12:58,990
knowledge and understanding I've touched

335
00:12:55,900 --> 00:13:02,170
briefly on some of the technologies used

336
00:12:58,990 --> 00:13:05,830
here obviously we've got AWS for those

337
00:13:02,170 --> 00:13:09,030
that do cloud computing in any way shape

338
00:13:05,830 --> 00:13:12,100
or form please take note of get secrets

339
00:13:09,030 --> 00:13:14,079
any repository that you are working in

340
00:13:12,100 --> 00:13:16,300
any code repository that you are working

341
00:13:14,080 --> 00:13:20,520
in where you are leveraging your API

342
00:13:16,300 --> 00:13:22,229
keys please use this tool this tool will

343
00:13:20,520 --> 00:13:25,590
help you prevent committing those keys

344
00:13:22,230 --> 00:13:28,380
to your repository and just in case

345
00:13:25,590 --> 00:13:29,970
you're not aware when folks scan github

346
00:13:28,380 --> 00:13:31,860
and they see your keys you're probably

347
00:13:29,970 --> 00:13:34,500
looking at less than a minute or two

348
00:13:31,860 --> 00:13:36,930
before your entire accounts compromised

349
00:13:34,500 --> 00:13:39,570
so get secrets huge tool definitely

350
00:13:36,930 --> 00:13:41,969
leverage it is very simple to get up and

351
00:13:39,570 --> 00:13:43,770
running I'm a big believer in terraform

352
00:13:41,970 --> 00:13:47,460
terraform has been doing amazing things

353
00:13:43,770 --> 00:13:50,579
for me I also like vagrant quite often I

354
00:13:47,460 --> 00:13:53,790
used the - but terraform seems to work a

355
00:13:50,580 --> 00:13:56,250
little bit better at scale I've recently

356
00:13:53,790 --> 00:13:58,170
been talking about and excuse me I've

357
00:13:56,250 --> 00:14:01,500
recently been introduced and inspect

358
00:13:58,170 --> 00:14:03,870
inspect is a testament ology if you will

359
00:14:01,500 --> 00:14:05,370
or test and tool set that you can go and

360
00:14:03,870 --> 00:14:08,520
you can define infrastructure and

361
00:14:05,370 --> 00:14:10,020
leverage that those definitions to

362
00:14:08,520 --> 00:14:12,720
confirm that your systems and your

363
00:14:10,020 --> 00:14:14,250
applications are up and running the way

364
00:14:12,720 --> 00:14:16,830
that you expect so I'm gonna introduce

365
00:14:14,250 --> 00:14:19,290
some inspect and the goal here is when

366
00:14:16,830 --> 00:14:21,000
you go ahead and boot up this range I

367
00:14:19,290 --> 00:14:21,980
want to make sure that everything is up

368
00:14:21,000 --> 00:14:25,430
and running

369
00:14:21,980 --> 00:14:28,170
exactly as I would expect it so Kali is

370
00:14:25,430 --> 00:14:30,540
pretty standard Packers another great

371
00:14:28,170 --> 00:14:34,949
tool Packer was used for the Metasploit

372
00:14:30,540 --> 00:14:37,620
2 & 3 stuff so rapid7 does publish the

373
00:14:34,950 --> 00:14:39,180
Metasploit on their github and you're

374
00:14:37,620 --> 00:14:44,010
able to actually go ahead and build that

375
00:14:39,180 --> 00:14:46,319
and a lot of that uses packer chocolaty

376
00:14:44,010 --> 00:14:49,680
windows package manager and cloud in it

377
00:14:46,320 --> 00:14:52,110
is basically just a start up for Amazon

378
00:14:49,680 --> 00:14:54,180
I start up script for Amazon it allows

379
00:14:52,110 --> 00:14:56,520
you to just go ahead and define a few

380
00:14:54,180 --> 00:14:58,739
scripts saying get those assets up and

381
00:14:56,520 --> 00:15:01,170
running with a few definitions that are

382
00:14:58,740 --> 00:15:03,510
used at boot and that's really the

383
00:15:01,170 --> 00:15:05,040
benefit of cloud annette the more

384
00:15:03,510 --> 00:15:06,290
Norvell assets I covered that I'm not

385
00:15:05,040 --> 00:15:08,790
going to really go too deep into that

386
00:15:06,290 --> 00:15:12,740
and then the researcher assets I touched

387
00:15:08,790 --> 00:15:16,020
on Kali in the end commando one of our

388
00:15:12,740 --> 00:15:18,030
reverse engineers introduced us to REM

389
00:15:16,020 --> 00:15:19,710
Knox I'm just starting to get this

390
00:15:18,030 --> 00:15:22,050
introduced into the environment I have

391
00:15:19,710 --> 00:15:24,000
one slight issue where I can't get SSH

392
00:15:22,050 --> 00:15:25,319
connectivity but I'll be working on that

393
00:15:24,000 --> 00:15:28,260
over the next few days and getting that

394
00:15:25,320 --> 00:15:29,550
in there and then the only other thing

395
00:15:28,260 --> 00:15:32,060
I'll really call out because I think

396
00:15:29,550 --> 00:15:34,660
this is quite interested in is teapot

397
00:15:32,060 --> 00:15:38,709
teapot is t-mobile's

398
00:15:34,660 --> 00:15:40,959
honeypot system it's been quite advanced

399
00:15:38,709 --> 00:15:42,189
since I last used it which was about a

400
00:15:40,959 --> 00:15:43,959
year ago

401
00:15:42,190 --> 00:15:46,420
and they've gone ahead and updated

402
00:15:43,959 --> 00:15:47,949
recently so I am reintroducing that

403
00:15:46,420 --> 00:15:50,319
hopefully that'll be up and running in a

404
00:15:47,950 --> 00:15:53,010
second the cloud init scripts does take

405
00:15:50,320 --> 00:15:55,290
quite a while to get that up and running

406
00:15:53,010 --> 00:15:57,399
so let's dive into some of the code

407
00:15:55,290 --> 00:15:58,810
aspects of it if you're not familiar

408
00:15:57,399 --> 00:16:02,589
with terraform you need to kind of

409
00:15:58,810 --> 00:16:06,189
understand what terraform requires both

410
00:16:02,589 --> 00:16:08,829
from a manifest and an asset declaration

411
00:16:06,190 --> 00:16:10,060
perspective so in the project we need to

412
00:16:08,829 --> 00:16:12,189
start navigating through some of the

413
00:16:10,060 --> 00:16:13,719
code you'll see a terraform folder in

414
00:16:12,190 --> 00:16:15,459
that terraform folder there's a few

415
00:16:13,720 --> 00:16:19,089
environments these environments are

416
00:16:15,459 --> 00:16:20,800
where I have the AWS ami set up these

417
00:16:19,089 --> 00:16:23,500
a.m. eyes again I've had to take these

418
00:16:20,800 --> 00:16:24,880
systems I've had to go ahead and get

419
00:16:23,500 --> 00:16:26,889
them up and running on my own system

420
00:16:24,880 --> 00:16:29,649
I've had to export them then I've had to

421
00:16:26,889 --> 00:16:31,990
import them into AWS sometimes I'm

422
00:16:29,649 --> 00:16:32,470
successful and we have an ami sometimes

423
00:16:31,990 --> 00:16:34,420
I'm not

424
00:16:32,470 --> 00:16:36,490
and I can't add that to our repository

425
00:16:34,420 --> 00:16:40,170
so there are some reasons why we don't

426
00:16:36,490 --> 00:16:42,850
have all the a.m. eyes or all the images

427
00:16:40,170 --> 00:16:46,800
vulnerabilities that I'd like within

428
00:16:42,850 --> 00:16:49,029
those environments we have a few

429
00:16:46,800 --> 00:16:51,160
different manifests one is the main

430
00:16:49,029 --> 00:16:57,160
manifest and one is the variables we'll

431
00:16:51,160 --> 00:16:59,920
go through that in just a second so from

432
00:16:57,160 --> 00:17:02,410
a main manifest perspective it's pretty

433
00:16:59,920 --> 00:17:03,880
straightforward we've got an AWS

434
00:17:02,410 --> 00:17:07,389
provider that we go ahead and identify

435
00:17:03,880 --> 00:17:09,640
and I just want to call out a proper way

436
00:17:07,390 --> 00:17:12,910
of leveraging your credentials

437
00:17:09,640 --> 00:17:15,100
within these manifests I when I first

438
00:17:12,910 --> 00:17:17,260
got introduced into terraform I was hard

439
00:17:15,099 --> 00:17:18,609
coding my credentials in a provider and

440
00:17:17,260 --> 00:17:19,750
now I've gone ahead and used this I

441
00:17:18,609 --> 00:17:22,719
think this is just a little bit more

442
00:17:19,750 --> 00:17:24,869
secure I'm sure there's probably even a

443
00:17:22,720 --> 00:17:26,589
more better more secure way of

444
00:17:24,869 --> 00:17:28,239
introducing your credentials into

445
00:17:26,589 --> 00:17:31,860
terraform but right now that seems to be

446
00:17:28,240 --> 00:17:33,760
the best option for me we have the

447
00:17:31,860 --> 00:17:35,949
modules that are being defined the

448
00:17:33,760 --> 00:17:38,410
stages stage and a terraform back in the

449
00:17:35,950 --> 00:17:41,260
terraform back end really just allows

450
00:17:38,410 --> 00:17:42,820
you to say I'm gonna go ahead and create

451
00:17:41,260 --> 00:17:44,530
a bunch of assets and when I create

452
00:17:42,820 --> 00:17:47,530
those assets we're going to create a

453
00:17:44,530 --> 00:17:48,730
file that says these assets are

454
00:17:47,530 --> 00:17:51,760
in this state and that's where that

455
00:17:48,730 --> 00:17:53,980
stored it's stored in an s3 bucket and

456
00:17:51,760 --> 00:17:55,629
then on a final piece down below we have

457
00:17:53,980 --> 00:17:57,430
the stage and infrastructure that's

458
00:17:55,630 --> 00:18:00,370
really just calling the actual

459
00:17:57,430 --> 00:18:02,590
infrastructure itself the infrastructure

460
00:18:00,370 --> 00:18:04,750
manifests itself I would say it's

461
00:18:02,590 --> 00:18:06,580
inherited in those declarations and then

462
00:18:04,750 --> 00:18:08,590
it's taken those declarations and going

463
00:18:06,580 --> 00:18:11,649
ahead and and creating the assets like

464
00:18:08,590 --> 00:18:13,840
you just saw a few minutes ago variables

465
00:18:11,650 --> 00:18:16,810
we have a lot of variables that are

466
00:18:13,840 --> 00:18:20,620
being defined across the board but these

467
00:18:16,810 --> 00:18:24,610
are pretty straightforward and in the in

468
00:18:20,620 --> 00:18:26,800
the main terraform folder these are

469
00:18:24,610 --> 00:18:29,439
there's just a few couple variables

470
00:18:26,800 --> 00:18:35,950
there but in the second folder which is

471
00:18:29,440 --> 00:18:39,820
a if it's on the next page in a setup

472
00:18:35,950 --> 00:18:43,180
folder we do have variables here and

473
00:18:39,820 --> 00:18:45,939
that has many more declarations it not

474
00:18:43,180 --> 00:18:48,370
only defines all of the different ami

475
00:18:45,940 --> 00:18:50,560
look ups but it also defines a few other

476
00:18:48,370 --> 00:18:51,219
things such as instance size and things

477
00:18:50,560 --> 00:18:56,290
of that nature

478
00:18:51,220 --> 00:18:58,330
I mentioned good in bed I covered this

479
00:18:56,290 --> 00:19:00,909
just a minute ago but this was a just a

480
00:18:58,330 --> 00:19:03,070
very good example of the good in a bed

481
00:19:00,910 --> 00:19:05,020
please don't do this this is horrible if

482
00:19:03,070 --> 00:19:06,850
you're gonna leverage sheriff um and

483
00:19:05,020 --> 00:19:08,740
commit your your keys that's probably a

484
00:19:06,850 --> 00:19:11,350
bad thing this is where it gets secrets

485
00:19:08,740 --> 00:19:13,360
would help you okay just to call

486
00:19:11,350 --> 00:19:15,040
attention to that so if you implement

487
00:19:13,360 --> 00:19:17,080
kit secrets and you're using terraform

488
00:19:15,040 --> 00:19:20,230
please go ahead and run a scan against

489
00:19:17,080 --> 00:19:22,110
your repo within the infrastructure

490
00:19:20,230 --> 00:19:24,640
folder we have a bunch of definitions

491
00:19:22,110 --> 00:19:26,050
again this is a Sabra range the goal of

492
00:19:24,640 --> 00:19:27,970
the range is to be able to define a

493
00:19:26,050 --> 00:19:31,090
bunch of assets and get those assets up

494
00:19:27,970 --> 00:19:32,860
and running so how do we do that well we

495
00:19:31,090 --> 00:19:34,629
do that with two different sets of

496
00:19:32,860 --> 00:19:36,310
modules one of those modules is a

497
00:19:34,630 --> 00:19:38,740
network module and the other is a sec

498
00:19:36,310 --> 00:19:41,950
devops module again you know I'm

499
00:19:38,740 --> 00:19:44,440
embracing the sec DevOps of mentality

500
00:19:41,950 --> 00:19:45,940
and I'm saying hey look let's go ahead

501
00:19:44,440 --> 00:19:48,190
and start coining that phrase and really

502
00:19:45,940 --> 00:19:51,030
promoting it obviously within the

503
00:19:48,190 --> 00:19:52,990
network stuff we have network based

504
00:19:51,030 --> 00:19:54,310
assets that are going to be created I'll

505
00:19:52,990 --> 00:19:56,260
show the you those in a few minutes and

506
00:19:54,310 --> 00:19:58,299
then with intersective ops stuff we're

507
00:19:56,260 --> 00:20:00,190
just calling everything together

508
00:19:58,299 --> 00:20:02,190
sharing all the information prompt that

509
00:20:00,190 --> 00:20:05,769
was previously created in a network

510
00:20:02,190 --> 00:20:07,059
layer over to that particular module so

511
00:20:05,769 --> 00:20:09,700
that the instances that are being

512
00:20:07,059 --> 00:20:10,269
created actually understand where are

513
00:20:09,700 --> 00:20:11,769
they going

514
00:20:10,269 --> 00:20:15,749
you know what subnets are they going in

515
00:20:11,769 --> 00:20:15,749
and whatnot

516
00:20:19,139 --> 00:20:26,769
okay github repo has quite a few folders

517
00:20:24,459 --> 00:20:28,479
want to read Me's as well as a bunch of

518
00:20:26,769 --> 00:20:31,409
other things I've gone ahead and

519
00:20:28,479 --> 00:20:33,639
identified the network in a sec DevOps

520
00:20:31,409 --> 00:20:34,149
asset folders that we were just talking

521
00:20:33,639 --> 00:20:36,339
about

522
00:20:34,149 --> 00:20:39,070
I do leverage a bunch of cloud and NIT

523
00:20:36,339 --> 00:20:40,629
stuff the one thing I would say here is

524
00:20:39,070 --> 00:20:43,629
I've pulled away from leveraging cloud

525
00:20:40,629 --> 00:20:45,218
in it and I've gone into a snapshot in

526
00:20:43,629 --> 00:20:47,379
the instances once I have them up and

527
00:20:45,219 --> 00:20:49,209
running the benefit of the snapshot in

528
00:20:47,379 --> 00:20:50,619
is I can get these assets up and running

529
00:20:49,209 --> 00:20:52,599
quicker so when I come to the stage and

530
00:20:50,619 --> 00:20:54,158
I say hey I can do this in less than

531
00:20:52,599 --> 00:20:55,958
five minutes it's because I've done all

532
00:20:54,159 --> 00:20:57,639
of the work and I've taken the snapshots

533
00:20:55,959 --> 00:20:59,529
and really all I'm doing is saying hey

534
00:20:57,639 --> 00:21:01,418
let me just boot up an asset instead of

535
00:20:59,529 --> 00:21:05,379
let me do all of the configuration

536
00:21:01,419 --> 00:21:08,139
that's necessary for that asset a good

537
00:21:05,379 --> 00:21:11,168
example of the amount excuse me

538
00:21:08,139 --> 00:21:13,359
teapot is a good example of an asset

539
00:21:11,169 --> 00:21:15,519
that I have to configure on the fly

540
00:21:13,359 --> 00:21:17,678
every time it gets booted up so it

541
00:21:15,519 --> 00:21:19,959
doesn't come up right away and when it

542
00:21:17,679 --> 00:21:21,669
comes up it probably takes about five or

543
00:21:19,959 --> 00:21:23,349
ten minutes for that teapot asset to

544
00:21:21,669 --> 00:21:25,179
really come up I would say closer to ten

545
00:21:23,349 --> 00:21:28,089
and then once it does you actually have

546
00:21:25,179 --> 00:21:30,309
to reboot it so again the cloud Annette

547
00:21:28,089 --> 00:21:32,139
stuff is there it's for examples but the

548
00:21:30,309 --> 00:21:33,489
challenge there is that it's going to

549
00:21:32,139 --> 00:21:35,199
increase the amount of time that it

550
00:21:33,489 --> 00:21:37,809
takes to actually get this system up and

551
00:21:35,200 --> 00:21:40,570
running for you within a network folder

552
00:21:37,809 --> 00:21:42,869
in the sec ops folder sector bops folder

553
00:21:40,570 --> 00:21:45,519
we have a bunch of different manifest

554
00:21:42,869 --> 00:21:48,339
obviously in a network in space we have

555
00:21:45,519 --> 00:21:50,859
a bunch of VIPs gateways routes subnets

556
00:21:48,339 --> 00:21:54,309
and the variables doesn't really have

557
00:21:50,859 --> 00:21:58,119
anything in it and a VPC so the benefit

558
00:21:54,309 --> 00:22:00,849
here is you take this repository this

559
00:21:58,119 --> 00:22:02,889
code repository this project you go

560
00:22:00,849 --> 00:22:04,989
ahead and spawn and up in your own AWS

561
00:22:02,889 --> 00:22:06,668
environment hopefully you don't use a

562
00:22:04,989 --> 00:22:08,769
corporate environment I personally use

563
00:22:06,669 --> 00:22:10,059
my own personal environment simply

564
00:22:08,769 --> 00:22:11,120
because I don't want to corrupt the

565
00:22:10,059 --> 00:22:15,590
corporate

566
00:22:11,120 --> 00:22:17,419
would would crap so this allows you to

567
00:22:15,590 --> 00:22:18,889
define everything that's going on in

568
00:22:17,420 --> 00:22:21,650
that network what your network looks

569
00:22:18,890 --> 00:22:23,750
like in that sector Pop's folder there's

570
00:22:21,650 --> 00:22:25,490
a bunch of other things right I think we

571
00:22:23,750 --> 00:22:29,360
can clearly see some attacker stuff

572
00:22:25,490 --> 00:22:31,940
we've got some compares this AWS ami is

573
00:22:29,360 --> 00:22:33,469
just a data lookup it tells me all of

574
00:22:31,940 --> 00:22:36,350
the different ami is that I'm going to

575
00:22:33,470 --> 00:22:38,420
be using for creating the assets I've

576
00:22:36,350 --> 00:22:41,899
got a CTF playground some honey pods

577
00:22:38,420 --> 00:22:44,179
malware security groups are our rules on

578
00:22:41,900 --> 00:22:46,010
networking rules that allow assets to

579
00:22:44,179 --> 00:22:48,590
talk to each other as well as assets to

580
00:22:46,010 --> 00:22:50,240
talk to the outside and then I have a

581
00:22:48,590 --> 00:22:53,678
bunch of different targets both Windows

582
00:22:50,240 --> 00:22:58,100
and Linux that if you go to the github

583
00:22:53,679 --> 00:23:02,059
repository I'll take a quick second to

584
00:22:58,100 --> 00:23:05,209
go there on github there is a to get

585
00:23:02,059 --> 00:23:06,020
started go here link okay and it's very

586
00:23:05,210 --> 00:23:08,360
straightforward

587
00:23:06,020 --> 00:23:09,679
I had this signup form and I don't want

588
00:23:08,360 --> 00:23:11,360
you to think that I'm sitting here

589
00:23:09,679 --> 00:23:13,130
trying to pitch something or trying to

590
00:23:11,360 --> 00:23:15,169
collect your data I really don't want to

591
00:23:13,130 --> 00:23:17,120
collect any information but there's a

592
00:23:15,170 --> 00:23:20,120
reason why I need your account number

593
00:23:17,120 --> 00:23:22,459
these images the windows images I have a

594
00:23:20,120 --> 00:23:23,899
concern with Windows licensing I can't

595
00:23:22,460 --> 00:23:26,030
open these images up to the public

596
00:23:23,900 --> 00:23:27,980
unless somebody and Microsoft is here

597
00:23:26,030 --> 00:23:31,399
and can go ahead and give me that little

598
00:23:27,980 --> 00:23:32,929
note my concern there is that I can have

599
00:23:31,400 --> 00:23:35,300
the repo taken down I could have my

600
00:23:32,929 --> 00:23:37,190
account lock down and I want to avoid

601
00:23:35,300 --> 00:23:38,960
some Windows license and stuff so if

602
00:23:37,190 --> 00:23:41,030
this is a project that interests you

603
00:23:38,960 --> 00:23:42,830
just trust that I'm not going to be

604
00:23:41,030 --> 00:23:44,720
taking any of your information and using

605
00:23:42,830 --> 00:23:46,189
it in any bad way it's just I need your

606
00:23:44,720 --> 00:23:47,990
account number to be able to share those

607
00:23:46,190 --> 00:23:56,150
images with you so that you can actually

608
00:23:47,990 --> 00:23:58,190
create these assets on your own okay I

609
00:23:56,150 --> 00:24:01,460
also have I mentioned at the very

610
00:23:58,190 --> 00:24:03,679
beginning there was a circle CI project

611
00:24:01,460 --> 00:24:06,910
that I leveraged that circle CI project

612
00:24:03,679 --> 00:24:10,370
was fantastic it gave me a multi-tiered

613
00:24:06,910 --> 00:24:13,250
AWS environment and I've leveraged that

614
00:24:10,370 --> 00:24:17,870
to go ahead and build multiple layers of

615
00:24:13,250 --> 00:24:23,090
builds the project itself was upgraded

616
00:24:17,870 --> 00:24:23,449
to terraform vo 0.12 just recently as I

617
00:24:23,090 --> 00:24:24,889
was

618
00:24:23,450 --> 00:24:28,700
preparing for this over the past two

619
00:24:24,889 --> 00:24:31,010
weeks that was released on the 23rd that

620
00:24:28,700 --> 00:24:33,649
was I found a few bugs as a result of

621
00:24:31,010 --> 00:24:35,419
the CI builds I did find a few bugs this

622
00:24:33,649 --> 00:24:38,178
last bill just came in I think last

623
00:24:35,419 --> 00:24:40,760
night I opened it up and the one before

624
00:24:38,179 --> 00:24:43,340
that was just earlier in this week

625
00:24:40,760 --> 00:24:45,379
they're not blockers but if you are

626
00:24:43,340 --> 00:24:47,750
using terraform and you're having an

627
00:24:45,380 --> 00:24:50,779
issue go ahead and do diligence and just

628
00:24:47,750 --> 00:24:52,940
make sure that you're on on the same

629
00:24:50,779 --> 00:24:56,090
version the concern that I have with

630
00:24:52,940 --> 00:24:59,330
that V 12 version is once you upgrade to

631
00:24:56,090 --> 00:25:02,600
V 12 V 0.12

632
00:24:59,330 --> 00:25:05,090
it looks like terraform creates a file

633
00:25:02,600 --> 00:25:08,240
that says you must have a minimum

634
00:25:05,090 --> 00:25:10,010
terraform version so there are some

635
00:25:08,240 --> 00:25:12,559
changes that are going on there I think

636
00:25:10,010 --> 00:25:16,549
we're still to some degree at an early

637
00:25:12,559 --> 00:25:18,500
testing phase of 0.12 but everything

638
00:25:16,549 --> 00:25:20,450
seems to be working so if you do

639
00:25:18,500 --> 00:25:22,130
download the project and you find hey

640
00:25:20,450 --> 00:25:23,779
this is not working for me I can't get

641
00:25:22,130 --> 00:25:25,700
terraform the function as as I would

642
00:25:23,779 --> 00:25:31,120
expect just go ahead and double check

643
00:25:25,700 --> 00:25:33,260
your versions there within the circle CI

644
00:25:31,120 --> 00:25:36,139
workflow we've got a bunch of different

645
00:25:33,260 --> 00:25:38,658
steps that circle CI workflow is in a

646
00:25:36,139 --> 00:25:39,350
project the declarations are under the

647
00:25:38,659 --> 00:25:42,380
circle SIA

648
00:25:39,350 --> 00:25:43,639
the dot circle CI folder and there are a

649
00:25:42,380 --> 00:25:45,649
bunch of different steps that are being

650
00:25:43,639 --> 00:25:47,750
done here the thing that I want to draw

651
00:25:45,649 --> 00:25:49,729
attention to when I say that I'm able to

652
00:25:47,750 --> 00:25:51,260
go ahead and create these assets in a

653
00:25:49,730 --> 00:25:53,870
very short period of time is that

654
00:25:51,260 --> 00:25:56,330
terraform apply step it only takes about

655
00:25:53,870 --> 00:25:58,189
two minutes to go ahead and get all

656
00:25:56,330 --> 00:25:59,960
those assets up and running what's

657
00:25:58,190 --> 00:26:03,289
interesting is it takes about six

658
00:25:59,960 --> 00:26:05,269
minutes to get them destroyed so I'll

659
00:26:03,289 --> 00:26:06,320
walk you through the destruction aspect

660
00:26:05,269 --> 00:26:08,630
of it because I've noticed that

661
00:26:06,320 --> 00:26:10,340
terraform doesn't necessarily clean up

662
00:26:08,630 --> 00:26:11,299
all of your assets in the environment as

663
00:26:10,340 --> 00:26:14,090
much as you'd like

664
00:26:11,299 --> 00:26:16,668
I found that terraform in general has

665
00:26:14,090 --> 00:26:22,428
lingering volumes and sometimes there

666
00:26:16,669 --> 00:26:24,200
are some other things for sake of not

667
00:26:22,429 --> 00:26:27,980
going through all of the configurations

668
00:26:24,200 --> 00:26:30,590
and not spend an ample amount of time

669
00:26:27,980 --> 00:26:32,029
trying to bug this while everybody's

670
00:26:30,590 --> 00:26:33,559
looking at me and staring at my screen

671
00:26:32,029 --> 00:26:35,480
I'm just going to show you a little bit

672
00:26:33,559 --> 00:26:36,960
of a visual I just created this earlier

673
00:26:35,480 --> 00:26:39,810
today

674
00:26:36,960 --> 00:26:41,850
I got the system up and running it boots

675
00:26:39,810 --> 00:26:43,200
up quite like I said it boots up the

676
00:26:41,850 --> 00:26:46,260
errors that I saw before was just

677
00:26:43,200 --> 00:26:48,420
because I reconfigured a volume size

678
00:26:46,260 --> 00:26:50,580
that I don't know why I reduced it

679
00:26:48,420 --> 00:26:52,890
apparently I broke things so I just have

680
00:26:50,580 --> 00:26:54,510
to revert that back but once you get the

681
00:26:52,890 --> 00:26:57,210
system up and running you now have a

682
00:26:54,510 --> 00:26:59,340
playground full of vulnerable things and

683
00:26:57,210 --> 00:27:02,220
as you can see here you've got quite a

684
00:26:59,340 --> 00:27:03,899
few loops as you can see there you've

685
00:27:02,220 --> 00:27:06,210
got quite a few Reds on a few of those

686
00:27:03,900 --> 00:27:07,830
different assets I'm gonna suspect that

687
00:27:06,210 --> 00:27:11,520
this is one of those Metasploit able

688
00:27:07,830 --> 00:27:12,210
assets and the thought here is is

689
00:27:11,520 --> 00:27:15,030
twofold

690
00:27:12,210 --> 00:27:17,310
right again it's an open source project

691
00:27:15,030 --> 00:27:19,320
that thought with open source projects

692
00:27:17,310 --> 00:27:21,000
and open source knowledge is that you

693
00:27:19,320 --> 00:27:24,330
have the ability to see things without

694
00:27:21,000 --> 00:27:25,650
having to fear a black box scenario so

695
00:27:24,330 --> 00:27:27,419
if you know the assets that are going to

696
00:27:25,650 --> 00:27:28,920
be created if you know the assets that

697
00:27:27,420 --> 00:27:30,930
you're going to be looking at and you

698
00:27:28,920 --> 00:27:33,450
want to practice and fine-tune some of

699
00:27:30,930 --> 00:27:36,990
your skills you can leverage a scanner

700
00:27:33,450 --> 00:27:38,670
in this case necess or rapid7 or open

701
00:27:36,990 --> 00:27:40,830
files or whatever other scanner you want

702
00:27:38,670 --> 00:27:43,410
to leverage but I've included necess and

703
00:27:40,830 --> 00:27:45,389
rapid7 in here but you can leverage the

704
00:27:43,410 --> 00:27:47,700
scanners to go ahead and just do a quick

705
00:27:45,390 --> 00:27:49,320
scan of your system to say hey what do I

706
00:27:47,700 --> 00:27:50,790
have here right and what can I start

707
00:27:49,320 --> 00:27:52,530
research and that gives you information

708
00:27:50,790 --> 00:27:54,530
on the software that's being installed

709
00:27:52,530 --> 00:27:57,270
the versions as well as any other

710
00:27:54,530 --> 00:27:59,250
indicators of vulnerabilities the

711
00:27:57,270 --> 00:28:01,650
benefit here for obviously for red

712
00:27:59,250 --> 00:28:03,920
teamers is you have the ability to very

713
00:28:01,650 --> 00:28:05,880
easily see some of the low-hanging fruit

714
00:28:03,920 --> 00:28:09,590
as well as some of the more challenging

715
00:28:05,880 --> 00:28:09,590
things that you can focus on as well

716
00:28:10,280 --> 00:28:21,240
AWS nuke this is a great tool let me

717
00:28:17,210 --> 00:28:23,910
very quickly show you AWS nuke so we're

718
00:28:21,240 --> 00:28:25,980
gonna go ahead and run it and AWS nuke

719
00:28:23,910 --> 00:28:28,080
is a fantastic little tool what it

720
00:28:25,980 --> 00:28:30,510
allows you to do is completely wipe out

721
00:28:28,080 --> 00:28:33,120
your environment the thing that I would

722
00:28:30,510 --> 00:28:35,400
caution you on is wiping out your

723
00:28:33,120 --> 00:28:38,040
environment can be very destructive if

724
00:28:35,400 --> 00:28:40,470
you're in an enterprise and AWS milk

725
00:28:38,040 --> 00:28:42,060
does not discriminate against what you

726
00:28:40,470 --> 00:28:43,860
have in your environment if you do not

727
00:28:42,060 --> 00:28:47,010
have termination protection on your

728
00:28:43,860 --> 00:28:49,959
assets and you go ahead and there were

729
00:28:47,010 --> 00:28:53,350
just tooling and start wiping out your

730
00:28:49,960 --> 00:28:56,799
very likely you're gonna have severity 1

731
00:28:53,350 --> 00:28:59,049
P 1 whatever incident you might think of

732
00:28:56,799 --> 00:29:00,429
in your environment but one of the

733
00:28:59,049 --> 00:29:02,110
benefits is if you're using your own

734
00:29:00,429 --> 00:29:03,940
personal invite your own personal

735
00:29:02,110 --> 00:29:06,939
account like I do I can go ahead and

736
00:29:03,940 --> 00:29:08,500
nuke my account quite often and I have

737
00:29:06,940 --> 00:29:11,169
no concerns new cannon I destroy

738
00:29:08,500 --> 00:29:13,240
absolutely everything the account has

739
00:29:11,169 --> 00:29:14,860
nothing in it and then I can go ahead

740
00:29:13,240 --> 00:29:18,610
and get started again right from scratch

741
00:29:14,860 --> 00:29:21,010
so AWS nuke is a fantastic tool

742
00:29:18,610 --> 00:29:23,740
the caution here is that you really need

743
00:29:21,010 --> 00:29:25,419
to be careful with what you're you're

744
00:29:23,740 --> 00:29:29,320
doing and what your new can I'll come

745
00:29:25,419 --> 00:29:32,529
back to that in just a minute so a few

746
00:29:29,320 --> 00:29:34,658
tips right if you are in an enterprise

747
00:29:32,529 --> 00:29:36,700
the environment my suggestion would be

748
00:29:34,659 --> 00:29:38,950
talk with your cloud security folks or

749
00:29:36,700 --> 00:29:40,510
your cloud architects I believe if

750
00:29:38,950 --> 00:29:42,669
you've gone ahead and set up a separate

751
00:29:40,510 --> 00:29:45,309
organization or account ID I believe you

752
00:29:42,669 --> 00:29:47,049
should be safe because AWS nuke can look

753
00:29:45,309 --> 00:29:48,370
at just a count ID and you could say

754
00:29:47,049 --> 00:29:52,240
okay I'm just gonna wipe everything out

755
00:29:48,370 --> 00:29:54,850
at that account it will do a global scan

756
00:29:52,240 --> 00:29:56,919
if you define all of the different

757
00:29:54,850 --> 00:30:01,029
regions so my suggestion is go ahead and

758
00:29:56,919 --> 00:30:03,669
just target one region at a time drive

759
00:30:01,029 --> 00:30:05,320
run output so when you run at AWS nuke

760
00:30:03,669 --> 00:30:06,880
you can go ahead and just say hey just

761
00:30:05,320 --> 00:30:09,730
show me everything that I'm gonna be

762
00:30:06,880 --> 00:30:11,860
wiping out and you can just do a simple

763
00:30:09,730 --> 00:30:14,559
dry run you can take that output you can

764
00:30:11,860 --> 00:30:17,529
analyze it there is a white listing

765
00:30:14,559 --> 00:30:20,470
approach so when you leverage that dry

766
00:30:17,529 --> 00:30:21,730
run and you go ahead and see all the

767
00:30:20,470 --> 00:30:23,320
things that you don't want to delete

768
00:30:21,730 --> 00:30:24,850
there's a way that you can go ahead and

769
00:30:23,320 --> 00:30:27,070
define those things in a configuration

770
00:30:24,850 --> 00:30:30,490
file and that white list an approach for

771
00:30:27,070 --> 00:30:32,200
me I whitelist my a.m. eyes and I've

772
00:30:30,490 --> 00:30:34,480
whitelist my volumes and my snapshots

773
00:30:32,200 --> 00:30:37,679
beyond that I pretty much delete

774
00:30:34,480 --> 00:30:40,899
everything in Sep for my account right

775
00:30:37,679 --> 00:30:42,789
and then my thought there is my final

776
00:30:40,899 --> 00:30:46,289
thought here is initialized early and

777
00:30:42,789 --> 00:30:48,520
purged often like I said terraform is a

778
00:30:46,289 --> 00:30:50,500
fantastic tool but I've noticed that

779
00:30:48,520 --> 00:30:53,770
there's some opportunity in a terraform

780
00:30:50,500 --> 00:30:57,039
destroy phase where it does destroy

781
00:30:53,770 --> 00:30:58,720
instances altogether but I do notice

782
00:30:57,039 --> 00:31:00,549
that there are sometimes lingering

783
00:30:58,720 --> 00:31:01,690
volumes and snapshots and things of that

784
00:31:00,549 --> 00:31:04,840
nature that are

785
00:31:01,690 --> 00:31:07,629
hanging around and so AWS new just comes

786
00:31:04,840 --> 00:31:11,590
in right behind it and it wipes out why

787
00:31:07,629 --> 00:31:14,649
is AWS nuke important well if you're

788
00:31:11,590 --> 00:31:16,990
using your own environment your own

789
00:31:14,649 --> 00:31:18,789
account and you have a bunch of assets

790
00:31:16,990 --> 00:31:21,909
that are lingering you're gonna end up

791
00:31:18,789 --> 00:31:23,740
accumulating costs right so one thing I

792
00:31:21,909 --> 00:31:27,940
would suggest is go ahead and do that

793
00:31:23,740 --> 00:31:29,649
Persian and a little tip just because

794
00:31:27,940 --> 00:31:33,309
we're all here and I have the

795
00:31:29,649 --> 00:31:34,959
opportunity to mention it if you are

796
00:31:33,309 --> 00:31:36,970
interested in getting your own AWS

797
00:31:34,960 --> 00:31:40,360
account set up and running you can set

798
00:31:36,970 --> 00:31:42,370
up a free tier account I believe and

799
00:31:40,360 --> 00:31:44,740
I'll double check I believe every

800
00:31:42,370 --> 00:31:46,840
definition of assets is defined as a t2

801
00:31:44,740 --> 00:31:50,049
micro so I believe it should all be

802
00:31:46,840 --> 00:31:52,149
underneath that free tier but the one

803
00:31:50,049 --> 00:31:54,850
thing I would say is don't hesitate to

804
00:31:52,149 --> 00:31:57,758
go onto eBay and grab a few AWS credits

805
00:31:54,850 --> 00:32:01,809
you could get like $150 AWS credit for

806
00:31:57,759 --> 00:32:04,840
like 20 bucks 30 bucks USD so I don't

807
00:32:01,809 --> 00:32:09,668
know what that converts into town wise

808
00:32:04,840 --> 00:32:11,080
but very simple I often get AWS credits

809
00:32:09,669 --> 00:32:14,080
and I just stack them on to my account

810
00:32:11,080 --> 00:32:15,970
and I have a minimal bill at the end of

811
00:32:14,080 --> 00:32:19,629
the month but really AWS nuke really

812
00:32:15,970 --> 00:32:23,590
helps you maintain your calls or at

813
00:32:19,629 --> 00:32:25,209
least reduce your cost so next steps and

814
00:32:23,590 --> 00:32:27,939
what I'm looking to do I mentioned

815
00:32:25,210 --> 00:32:29,769
inspect the gold would inspect is really

816
00:32:27,940 --> 00:32:31,240
to be able to make sure that the things

817
00:32:29,769 --> 00:32:32,860
that I'm spawning up and the things that

818
00:32:31,240 --> 00:32:34,720
I'm creating are actually being created

819
00:32:32,860 --> 00:32:37,299
and set up the way that I'm hoping that

820
00:32:34,720 --> 00:32:40,720
they are so I believe inspect is going

821
00:32:37,299 --> 00:32:42,399
to be huge area an investment for me the

822
00:32:40,720 --> 00:32:44,320
goal there is I want to learn about the

823
00:32:42,399 --> 00:32:47,168
tooling I think there's a lot of benefit

824
00:32:44,320 --> 00:32:49,210
in being able to say hey I need to

825
00:32:47,169 --> 00:32:51,909
define infrastructure and assets and web

826
00:32:49,210 --> 00:32:53,490
apps and I need to define and make sure

827
00:32:51,909 --> 00:32:56,860
that they are set up in certain ways

828
00:32:53,490 --> 00:32:59,169
from a secure set DevOps perspective I

829
00:32:56,860 --> 00:33:00,939
believe that tooling is going to be

830
00:32:59,169 --> 00:33:02,169
relatively key it should be something

831
00:33:00,940 --> 00:33:04,360
that you can introduce into your

832
00:33:02,169 --> 00:33:05,919
environment if you have insecure code

833
00:33:04,360 --> 00:33:07,120
configurations you should be able to

834
00:33:05,919 --> 00:33:09,309
introduce that you should be able to

835
00:33:07,120 --> 00:33:11,199
define what those configurations are

836
00:33:09,309 --> 00:33:13,210
that you want on the system and you

837
00:33:11,200 --> 00:33:13,900
should be able to monitor that system in

838
00:33:13,210 --> 00:33:16,870
that environment

839
00:33:13,900 --> 00:33:20,140
on a regular basis I will be looking to

840
00:33:16,870 --> 00:33:22,330
get those tests into the CI CD pipeline

841
00:33:20,140 --> 00:33:25,240
and the goal there is during a build

842
00:33:22,330 --> 00:33:27,129
phase a doing a build process I already

843
00:33:25,240 --> 00:33:28,420
have definitions of what my systems are

844
00:33:27,130 --> 00:33:31,690
going to look like I want to make sure

845
00:33:28,420 --> 00:33:33,790
that everything is passing some of the

846
00:33:31,690 --> 00:33:36,190
additional next steps is the malware

847
00:33:33,790 --> 00:33:38,440
stuff I'm going to be focusing more on

848
00:33:36,190 --> 00:33:40,870
the malware area I think the thought

849
00:33:38,440 --> 00:33:42,700
there is I want to have an environment

850
00:33:40,870 --> 00:33:44,560
where I can really do some some deeper

851
00:33:42,700 --> 00:33:45,820
reverse engineering and I think these

852
00:33:44,560 --> 00:33:47,050
are some of the things that I've seen

853
00:33:45,820 --> 00:33:49,929
that I'm going to be looking at and

854
00:33:47,050 --> 00:33:52,270
doing some research on fuzzing on the

855
00:33:49,930 --> 00:33:54,160
very bottom having a separate pleasant

856
00:33:52,270 --> 00:33:56,350
environment is going to be kind of key

857
00:33:54,160 --> 00:33:58,750
as well being able to actually spawn

858
00:33:56,350 --> 00:34:00,939
something up in AWS put an application

859
00:33:58,750 --> 00:34:02,890
there and being able to just run and

860
00:34:00,940 --> 00:34:05,470
execute and see what comes out of that

861
00:34:02,890 --> 00:34:08,140
after a day or two weeks whatever it

862
00:34:05,470 --> 00:34:11,440
might be of analysis I think that's

863
00:34:08,139 --> 00:34:13,620
going to be relatively key and then you

864
00:34:11,440 --> 00:34:17,070
know Packer and compile explode

865
00:34:13,620 --> 00:34:19,659
explorers as well as a honeypot Network

866
00:34:17,070 --> 00:34:22,600
the honeypot network is something that I

867
00:34:19,659 --> 00:34:24,159
think is really quite interesting if you

868
00:34:22,600 --> 00:34:25,839
haven't explored or played with honey

869
00:34:24,159 --> 00:34:29,200
pots i really suggest you to take a look

870
00:34:25,840 --> 00:34:32,530
at that teapot asset you can download it

871
00:34:29,199 --> 00:34:33,759
as an OVA on your own system hopefully

872
00:34:32,530 --> 00:34:35,679
with this you'll be able to get it up

873
00:34:33,760 --> 00:34:40,050
and running in your own AWS environment

874
00:34:35,679 --> 00:34:42,630
last year for an Asia conference I did a

875
00:34:40,050 --> 00:34:45,190
embracing the rise of Sec DevOps

876
00:34:42,630 --> 00:34:46,780
presentation one of my peers actually

877
00:34:45,190 --> 00:34:48,639
presented it but I helped construct the

878
00:34:46,780 --> 00:34:51,550
presentation and I set up the honeypot

879
00:34:48,639 --> 00:34:53,620
over in Australia and I just wanted to

880
00:34:51,550 --> 00:34:55,870
see what was going on like what are

881
00:34:53,620 --> 00:34:57,339
people doing and and I got to tell you

882
00:34:55,870 --> 00:34:58,930
it was it was alarming it was

883
00:34:57,340 --> 00:35:00,940
interesting as you were able to track

884
00:34:58,930 --> 00:35:02,080
the different threat actors across the

885
00:35:00,940 --> 00:35:03,970
world and where they were coming from

886
00:35:02,080 --> 00:35:06,100
and I've got to imagine that folks were

887
00:35:03,970 --> 00:35:07,870
cloaking where their location was but

888
00:35:06,100 --> 00:35:09,190
it's just interesting to see the

889
00:35:07,870 --> 00:35:10,720
different types of things are coming

890
00:35:09,190 --> 00:35:11,860
over the network and how these honey

891
00:35:10,720 --> 00:35:17,049
pots are able to capture that

892
00:35:11,860 --> 00:35:19,420
information that said 525 I think I've

893
00:35:17,050 --> 00:35:21,670
ever done wrote relatively well I did

894
00:35:19,420 --> 00:35:23,860
not at all dive into the configuration

895
00:35:21,670 --> 00:35:24,550
and actually getting a live demo up and

896
00:35:23,860 --> 00:35:27,790
running

897
00:35:24,550 --> 00:35:31,060
um too deeply but I let's go back really

898
00:35:27,790 --> 00:35:32,620
quick to your destruction of all the

899
00:35:31,060 --> 00:35:34,390
assets so it took about five minutes

900
00:35:32,620 --> 00:35:36,670
here last time it took just about

901
00:35:34,390 --> 00:35:40,359
two-and-a-half so it took about five

902
00:35:36,670 --> 00:35:42,880
minutes to do the full AWS nuke and just

903
00:35:40,360 --> 00:35:43,930
to confirm again alright let's go ahead

904
00:35:42,880 --> 00:35:48,190
and make sure all these things are

905
00:35:43,930 --> 00:35:49,740
destroyed alright so basically the tool

906
00:35:48,190 --> 00:35:52,990
here that I'm trying to introduce you to

907
00:35:49,740 --> 00:35:54,819
is something that you can use to be able

908
00:35:52,990 --> 00:35:57,399
to get your own security environment

909
00:35:54,820 --> 00:35:59,920
security lab up and running it should be

910
00:35:57,400 --> 00:36:02,080
bootstrap about my goal is get you to

911
00:35:59,920 --> 00:36:04,510
download it you go ahead and do a little

912
00:36:02,080 --> 00:36:06,220
bit of a configuration hook in your AWS

913
00:36:04,510 --> 00:36:08,650
keys or make sure that you have

914
00:36:06,220 --> 00:36:10,799
connectivity to that give you access to

915
00:36:08,650 --> 00:36:14,320
the MIS and boom you're up and running

916
00:36:10,800 --> 00:36:17,410
from a collaboration perspective if you

917
00:36:14,320 --> 00:36:19,870
go ahead and do poke and prod at this

918
00:36:17,410 --> 00:36:21,220
project and you find any issues I'm more

919
00:36:19,870 --> 00:36:22,779
than willing to look into them I'm more

920
00:36:21,220 --> 00:36:25,000
than willing to fix them because I do

921
00:36:22,780 --> 00:36:26,860
leverage some third-party tools it might

922
00:36:25,000 --> 00:36:29,860
be outside of the scope of what I can do

923
00:36:26,860 --> 00:36:32,140
or what I can fix but by all means if

924
00:36:29,860 --> 00:36:34,810
you see an issue open it up against the

925
00:36:32,140 --> 00:36:36,310
project ping me on LinkedIn I don't know

926
00:36:34,810 --> 00:36:38,560
if you see me in the streets tapped me

927
00:36:36,310 --> 00:36:40,750
on the shoulder whatever it might be I'm

928
00:36:38,560 --> 00:36:43,320
definitely willing to to look into it

929
00:36:40,750 --> 00:36:46,950
and continue to enhance this project

930
00:36:43,320 --> 00:36:49,150
that said we got about five minutes I

931
00:36:46,950 --> 00:36:51,460
assume in towards the end of the day we

932
00:36:49,150 --> 00:36:53,230
can go ahead and break out and allow

933
00:36:51,460 --> 00:36:54,640
everybody to take a few drinks but if

934
00:36:53,230 --> 00:36:58,090
anybody has any questions by all means

935
00:36:54,640 --> 00:37:01,049
raise your hand ask it otherwise I

936
00:36:58,090 --> 00:37:01,050
appreciate your time

937
00:37:01,860 --> 00:37:06,369
[Applause]

