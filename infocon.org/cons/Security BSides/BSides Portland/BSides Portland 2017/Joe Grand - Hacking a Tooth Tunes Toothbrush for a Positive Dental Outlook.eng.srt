1
00:00:14,160 --> 00:00:18,119
that you guys could hear that in the

2
00:00:16,020 --> 00:00:20,610
back okay so a toothbrush that plays

3
00:00:18,119 --> 00:00:22,560
music in that video you know imagine

4
00:00:20,610 --> 00:00:25,980
having somebody replace it with like

5
00:00:22,560 --> 00:00:28,890
death metal or porn or something like

6
00:00:25,980 --> 00:00:31,019
that sorry if you're underage yeah so

7
00:00:28,890 --> 00:00:32,759
you know it's it's it was a constant so

8
00:00:31,019 --> 00:00:34,110
people are like oh I want to I want to

9
00:00:32,759 --> 00:00:35,910
make it play whatever but nobody ever

10
00:00:34,110 --> 00:00:38,610
did it so my whole thing was like this

11
00:00:35,910 --> 00:00:40,679
is a cool concept but it needs a little

12
00:00:38,610 --> 00:00:43,440
bit of finessing these a little bit of

13
00:00:40,680 --> 00:00:46,320
help all right yeah so plays a

14
00:00:43,440 --> 00:00:48,149
two-minute song clip of the the world's

15
00:00:46,320 --> 00:00:51,899
most popular artists according to

16
00:00:48,149 --> 00:00:54,090
somebody probably not in this community

17
00:00:51,899 --> 00:00:56,670
though yeah so originally came out in

18
00:00:54,090 --> 00:00:59,399
2007 and then was re-released in 2012

19
00:00:56,670 --> 00:01:01,469
which is when I found out about it what

20
00:00:59,399 --> 00:01:04,349
the real kind of thing is is based on

21
00:01:01,469 --> 00:01:06,240
bone conduction which I guess is called

22
00:01:04,349 --> 00:01:09,929
a denta mandibular sound transmitting

23
00:01:06,240 --> 00:01:12,869
system where the the element that

24
00:01:09,930 --> 00:01:14,100
vibrates kind of runs the vibrations run

25
00:01:12,869 --> 00:01:16,080
through your bone you can actually hear

26
00:01:14,100 --> 00:01:17,640
it in like your inner ear which is

27
00:01:16,080 --> 00:01:20,130
awesome and this is dated back a long

28
00:01:17,640 --> 00:01:21,990
time I was talking to rob earlier who

29
00:01:20,130 --> 00:01:24,810
just gave the talk and he was saying

30
00:01:21,990 --> 00:01:26,550
something about a retainer that you

31
00:01:24,810 --> 00:01:28,140
could do something to play music I had

32
00:01:26,550 --> 00:01:29,479
seen once like some swim goggles that

33
00:01:28,140 --> 00:01:31,530
had something on the back that would

34
00:01:29,479 --> 00:01:33,179
tell you how many laps you've run so

35
00:01:31,530 --> 00:01:34,470
there's been attempts at doing consumer

36
00:01:33,179 --> 00:01:37,110
electronic stuff for a while in this

37
00:01:34,470 --> 00:01:38,700
space and if you look at at this main

38
00:01:37,110 --> 00:01:41,220
patent which is the arm and hammer now

39
00:01:38,700 --> 00:01:42,989
owned by Armand Hammer patent it has

40
00:01:41,220 --> 00:01:44,880
some references and prior art and ideas

41
00:01:42,989 --> 00:01:46,050
of like spoons that play music and this

42
00:01:44,880 --> 00:01:48,720
and that and anything you put in your

43
00:01:46,050 --> 00:01:51,479
mouth will play music there are lots of

44
00:01:48,720 --> 00:01:54,929
options and but the toothbrush is the

45
00:01:51,479 --> 00:01:58,800
one that stuck it seems like so here's

46
00:01:54,929 --> 00:02:01,380
what the packaging looked like yeah it's

47
00:01:58,800 --> 00:02:02,789
great if you're 12 it which is probably

48
00:02:01,380 --> 00:02:05,880
why you need help brushing your teeth

49
00:02:02,789 --> 00:02:07,500
anyway but this is you know interesting

50
00:02:05,880 --> 00:02:10,829
concept but definitely not targeted

51
00:02:07,500 --> 00:02:12,390
towards people like me and I wanted that

52
00:02:10,830 --> 00:02:13,680
targeted towards people like me so I

53
00:02:12,390 --> 00:02:15,149
mean I think the toothbrush is good but

54
00:02:13,680 --> 00:02:18,360
the main problem is that all the songs

55
00:02:15,150 --> 00:02:23,640
just you know just totally sucked it was

56
00:02:18,360 --> 00:02:25,380
lame so the process is I'm gonna replace

57
00:02:23,640 --> 00:02:27,540
the circuitry with something that allows

58
00:02:25,380 --> 00:02:29,859
me to play whatever music I want

59
00:02:27,540 --> 00:02:32,379
here's the timeline so ya talking about

60
00:02:29,860 --> 00:02:36,099
spending lots of time on projects this

61
00:02:32,379 --> 00:02:39,399
was a five-year endeavor and I probably

62
00:02:36,099 --> 00:02:42,549
spent I don't know maybe two twelve or

63
00:02:39,400 --> 00:02:44,530
twenty or forty hours on it total or

64
00:02:42,550 --> 00:02:46,390
something way way more than you would

65
00:02:44,530 --> 00:02:48,010
expect for like hacking a toothbrush but

66
00:02:46,390 --> 00:02:49,359
yeah so I bought it right when it came

67
00:02:48,010 --> 00:02:52,000
out and I was like this is so cool the

68
00:02:49,360 --> 00:02:53,500
music sucks and I'm gonna fix it I did

69
00:02:52,000 --> 00:02:55,510
build a prototype in 2013 which I'll

70
00:02:53,500 --> 00:02:59,049
show you the pictures of then I moved

71
00:02:55,510 --> 00:03:02,890
here thank you and thank you for

72
00:02:59,049 --> 00:03:03,819
accepting me and everything was in boxes

73
00:03:02,890 --> 00:03:05,559
for a few years and I just totally

74
00:03:03,819 --> 00:03:07,420
forgot about it like I sort of knew in

75
00:03:05,560 --> 00:03:09,010
my head I had wanted to do it but it

76
00:03:07,420 --> 00:03:11,048
just like was not something that could

77
00:03:09,010 --> 00:03:12,548
find and I wasn't really like I'm gonna

78
00:03:11,049 --> 00:03:15,790
hack the toothbrush now so I eventually

79
00:03:12,549 --> 00:03:19,450
found it last year and then finished it

80
00:03:15,790 --> 00:03:21,730
this year so yeah a long time that's the

81
00:03:19,450 --> 00:03:23,890
death dedication right dedication to the

82
00:03:21,730 --> 00:03:27,578
cause of making tooth brushing better

83
00:03:23,890 --> 00:03:29,048
for all of you okay so here's the

84
00:03:27,579 --> 00:03:30,519
teardown first thing that I like to do

85
00:03:29,049 --> 00:03:31,750
is I get the product take it apart look

86
00:03:30,519 --> 00:03:35,280
at the circuitry and figure out how I

87
00:03:31,750 --> 00:03:37,840
can manipulate that so normal toothbrush

88
00:03:35,280 --> 00:03:40,389
looking at the top this is all like a

89
00:03:37,840 --> 00:03:42,340
one-piece molded plastic and there's

90
00:03:40,389 --> 00:03:44,049
some rubber built in but it needs to be

91
00:03:42,340 --> 00:03:47,260
water-resistant and it's probably pretty

92
00:03:44,049 --> 00:03:48,970
waterproof the batteries which are down

93
00:03:47,260 --> 00:03:50,290
here are not replaceable I don't know

94
00:03:48,970 --> 00:03:51,730
how long the thing is supposed to last

95
00:03:50,290 --> 00:03:53,260
but if it's a two-minute song clip but

96
00:03:51,730 --> 00:03:54,819
you know some it's three triple-a so

97
00:03:53,260 --> 00:03:55,179
it's probably gonna still last a few

98
00:03:54,819 --> 00:03:56,738
years

99
00:03:55,180 --> 00:03:57,849
maybe with self-discharge I don't know I

100
00:03:56,739 --> 00:03:59,799
didn't do the calculations but it will

101
00:03:57,849 --> 00:04:01,569
last long enough until the kids get sick

102
00:03:59,799 --> 00:04:04,120
of a song and throw it out or buy a new

103
00:04:01,569 --> 00:04:06,220
one but there's like a overhang around

104
00:04:04,120 --> 00:04:08,380
here to keep everything pretty well

105
00:04:06,220 --> 00:04:09,760
sealed up so it wasn't something that I

106
00:04:08,380 --> 00:04:11,019
could just open up and take the stuff

107
00:04:09,760 --> 00:04:13,239
out it took a little bit of kind of

108
00:04:11,019 --> 00:04:16,180
breaking I broke quite a few of them

109
00:04:13,239 --> 00:04:17,500
which I bought them all on eBay and to

110
00:04:16,180 --> 00:04:19,180
try to figure out like how can I get the

111
00:04:17,500 --> 00:04:20,649
circuitry out in a way that when I put

112
00:04:19,180 --> 00:04:25,389
my new circuitry back in I wouldn't

113
00:04:20,649 --> 00:04:29,289
break everything and figure out how I'm

114
00:04:25,389 --> 00:04:30,490
gonna attach the element so that was one

115
00:04:29,289 --> 00:04:31,840
tricky thing his hat figuring out how to

116
00:04:30,490 --> 00:04:33,220
get access to this back part which was

117
00:04:31,840 --> 00:04:35,049
like glued in and there was like a post

118
00:04:33,220 --> 00:04:37,419
and everything so once I got like a neat

119
00:04:35,050 --> 00:04:39,039
little method of like some you know nose

120
00:04:37,419 --> 00:04:40,479
pliers and just some finesse to pull

121
00:04:39,039 --> 00:04:41,200
that out that worked okay the other

122
00:04:40,479 --> 00:04:42,400
trick was getting

123
00:04:41,200 --> 00:04:44,830
to the element which is here and it's

124
00:04:42,400 --> 00:04:46,060
all molded in the actual head I don't

125
00:04:44,830 --> 00:04:47,849
have a picture of the head here but it's

126
00:04:46,060 --> 00:04:49,990
up here it's sort of a round thing

127
00:04:47,850 --> 00:04:51,640
that's not directly connected to the

128
00:04:49,990 --> 00:04:54,130
bristles it's just in that housing and

129
00:04:51,640 --> 00:04:56,440
the wires come down to here and then

130
00:04:54,130 --> 00:04:58,719
their heat shrink to some wires that go

131
00:04:56,440 --> 00:05:00,310
down to the circuitry which actually so

132
00:04:58,720 --> 00:05:02,440
they kind of continue along here and

133
00:05:00,310 --> 00:05:04,450
then over to here

134
00:05:02,440 --> 00:05:05,740
so I couldn't figure out any easy way to

135
00:05:04,450 --> 00:05:07,870
get that out without doing some

136
00:05:05,740 --> 00:05:12,910
modification of the of the area around

137
00:05:07,870 --> 00:05:14,770
here which I'll show you later on this

138
00:05:12,910 --> 00:05:16,990
plastic piece you see here if you pull

139
00:05:14,770 --> 00:05:19,060
that out it's this plastic how this

140
00:05:16,990 --> 00:05:21,400
little carrier here which has the space

141
00:05:19,060 --> 00:05:22,900
for the batteries so now that I know how

142
00:05:21,400 --> 00:05:25,750
to open this I can replace the batteries

143
00:05:22,900 --> 00:05:27,940
which is good this is the circuitry here

144
00:05:25,750 --> 00:05:29,650
which there are some discretes there's

145
00:05:27,940 --> 00:05:30,640
nothing on the back side and so there's

146
00:05:29,650 --> 00:05:32,710
the button to start and stop the

147
00:05:30,640 --> 00:05:33,789
playback you can you can play the song

148
00:05:32,710 --> 00:05:35,260
and it will continue to play all the way

149
00:05:33,790 --> 00:05:36,670
through or you can stop it if you're

150
00:05:35,260 --> 00:05:37,870
done early which is cheating because

151
00:05:36,670 --> 00:05:39,220
they're supposed to brush your teeth for

152
00:05:37,870 --> 00:05:41,520
two minutes right but who actually

153
00:05:39,220 --> 00:05:45,820
brushes their teeth for two minutes

154
00:05:41,520 --> 00:05:47,169
really okay I have a dentist

155
00:05:45,820 --> 00:05:51,520
appointment on Wednesday so maybe I

156
00:05:47,170 --> 00:05:54,880
should start yeah I always say I do and

157
00:05:51,520 --> 00:05:56,289
they know I'm lying I didn't realize

158
00:05:54,880 --> 00:06:01,300
that people actually do good for you

159
00:05:56,290 --> 00:06:04,360
guys that's amazing okay so don't come

160
00:06:01,300 --> 00:06:05,800
close to me I guess so this is the main

161
00:06:04,360 --> 00:06:06,940
circuit shows here so you have a button

162
00:06:05,800 --> 00:06:09,880
here and then this is a chip on board

163
00:06:06,940 --> 00:06:11,290
type of device so if you if you think

164
00:06:09,880 --> 00:06:12,190
about like a normal integrated circuit

165
00:06:11,290 --> 00:06:14,170
that you see in a circuit board it's

166
00:06:12,190 --> 00:06:16,030
like a black plastic housing with wires

167
00:06:14,170 --> 00:06:17,230
with leads coming off or maybe there's

168
00:06:16,030 --> 00:06:19,869
leaves underneath you can't see them

169
00:06:17,230 --> 00:06:21,760
this is the silicon underneath here

170
00:06:19,870 --> 00:06:24,610
actually an integrated circuit or just

171
00:06:21,760 --> 00:06:26,849
just the chip wire bonded with little

172
00:06:24,610 --> 00:06:29,140
tiny wires to the circuit board and then

173
00:06:26,850 --> 00:06:30,970
coated with epoxy on top Blagh with

174
00:06:29,140 --> 00:06:32,560
epoxy this is like a really hard coating

175
00:06:30,970 --> 00:06:33,940
that if you want to manipulate devices

176
00:06:32,560 --> 00:06:35,590
like this you could either get the

177
00:06:33,940 --> 00:06:37,270
coating off with chemicals or scrape it

178
00:06:35,590 --> 00:06:39,789
or more likely just look for other

179
00:06:37,270 --> 00:06:42,430
places to tap on to it so it's a

180
00:06:39,790 --> 00:06:44,920
possibility that you know I like I could

181
00:06:42,430 --> 00:06:45,970
maybe monitor some stuff here and see

182
00:06:44,920 --> 00:06:47,380
but it's really just looking for the

183
00:06:45,970 --> 00:06:49,000
button press all the songs stuff is

184
00:06:47,380 --> 00:06:51,219
stored in here and that's this stuff the

185
00:06:49,000 --> 00:06:53,290
chip on board is really common for high

186
00:06:51,220 --> 00:06:54,920
volume low cost stuff where things

187
00:06:53,290 --> 00:06:57,290
aren't gonna change at all

188
00:06:54,920 --> 00:06:59,030
but I wanted to be able to change the

189
00:06:57,290 --> 00:07:00,710
music and have control of the music so

190
00:06:59,030 --> 00:07:02,690
my whole thing was like alright just get

191
00:07:00,710 --> 00:07:04,789
rid of this build something that looks

192
00:07:02,690 --> 00:07:06,080
exactly like that that can take an SD

193
00:07:04,790 --> 00:07:12,140
card that will play songs

194
00:07:06,080 --> 00:07:13,940
I don't like recreating the wheel and I

195
00:07:12,140 --> 00:07:15,500
like you know being able to share my

196
00:07:13,940 --> 00:07:17,480
project so other people can build on

197
00:07:15,500 --> 00:07:18,950
them and in the same way I don't mind

198
00:07:17,480 --> 00:07:20,720
using other people's projects to build

199
00:07:18,950 --> 00:07:22,130
on my stuff so this just happened to be

200
00:07:20,720 --> 00:07:25,210
I did some google searching of like

201
00:07:22,130 --> 00:07:27,469
audio player wav file microcontroller

202
00:07:25,210 --> 00:07:29,390
because I didn't want to have to design

203
00:07:27,470 --> 00:07:32,360
the whole SD card interface the fat

204
00:07:29,390 --> 00:07:34,039
filesystem all of that so this person

205
00:07:32,360 --> 00:07:37,190
named Chan there's not I don't know much

206
00:07:34,040 --> 00:07:38,450
about that person because there's not a

207
00:07:37,190 --> 00:07:40,640
lot of information but there's tons of

208
00:07:38,450 --> 00:07:42,979
great projects on the website and this

209
00:07:40,640 --> 00:07:46,789
was one of like this project that that

210
00:07:42,980 --> 00:07:50,540
he or she came up with that was a tiny

211
00:07:46,790 --> 00:07:54,110
wave player for an 8-bit 80 tiny AVR

212
00:07:50,540 --> 00:07:56,150
Atmel AVR microcontroller that also had

213
00:07:54,110 --> 00:07:58,550
support already for the fat filesystem

214
00:07:56,150 --> 00:08:00,560
so you it would read a memory card and

215
00:07:58,550 --> 00:08:01,640
play the song so it's great that was

216
00:08:00,560 --> 00:08:02,840
like a perfect starting point so I

217
00:08:01,640 --> 00:08:05,719
didn't have to do like all this crazy

218
00:08:02,840 --> 00:08:07,340
reverse engineering or crazy engineering

219
00:08:05,720 --> 00:08:09,880
to get this stuff done so this was the

220
00:08:07,340 --> 00:08:13,780
starting point for the for the project

221
00:08:09,880 --> 00:08:16,250
let's see so yeah he has or she has a

222
00:08:13,780 --> 00:08:19,729
bunch of code in here two two-bit bang

223
00:08:16,250 --> 00:08:22,190
through over SPI so software spi control

224
00:08:19,730 --> 00:08:24,200
to read the SD card which is a standard

225
00:08:22,190 --> 00:08:28,070
kind of SPI interface and then there's

226
00:08:24,200 --> 00:08:30,349
some module fat FS that that people have

227
00:08:28,070 --> 00:08:32,350
been using I think it's for at males I'm

228
00:08:30,350 --> 00:08:35,930
not exactly sure at some C library so

229
00:08:32,350 --> 00:08:40,970
well well fat Oh fat FSS is that generic

230
00:08:35,929 --> 00:08:43,010
library what's that oh okay cool yeah so

231
00:08:40,970 --> 00:08:45,620
that's still the standard so he wrote or

232
00:08:43,010 --> 00:08:47,120
she wrote a petite fat FS which was just

233
00:08:45,620 --> 00:08:48,860
sort of a carved out version too you

234
00:08:47,120 --> 00:08:50,330
know for what for what's gonna fit with

235
00:08:48,860 --> 00:08:52,610
this particular microcontroller so less

236
00:08:50,330 --> 00:08:54,170
than 512 bytes of RAM which is cool

237
00:08:52,610 --> 00:08:56,150
so if you take nothing else out of this

238
00:08:54,170 --> 00:08:57,920
if you ever want to play WAV files from

239
00:08:56,150 --> 00:09:01,430
a microcontroller of an SD card you just

240
00:08:57,920 --> 00:09:04,459
use this stuff yeah so standard WAV

241
00:09:01,430 --> 00:09:07,459
format in RIF 8 or 16-bit files and then

242
00:09:04,460 --> 00:09:08,750
it's mono so yeah all that all all that

243
00:09:07,460 --> 00:09:12,980
starting point was there

244
00:09:08,750 --> 00:09:14,300
so I built up a prototype and just had

245
00:09:12,980 --> 00:09:16,850
it working without the toothbrush right

246
00:09:14,300 --> 00:09:18,920
so eighty tiny microcontroller little

247
00:09:16,850 --> 00:09:20,529
circuit and SD card with a little

248
00:09:18,920 --> 00:09:23,860
carrier board from Adafruit

249
00:09:20,529 --> 00:09:26,899
over to a speaker and it worked fine as

250
00:09:23,860 --> 00:09:29,120
expected right because the project that

251
00:09:26,899 --> 00:09:30,470
part of the project already worked I did

252
00:09:29,120 --> 00:09:32,449
have to make some firmware changes to

253
00:09:30,470 --> 00:09:33,889
get the code to compile because the last

254
00:09:32,449 --> 00:09:36,439
time it was worked on was 2000 between

255
00:09:33,889 --> 00:09:38,480
2009 2012 so I had to get some stuff

256
00:09:36,439 --> 00:09:40,849
tweak some stuff to get it working to

257
00:09:38,480 --> 00:09:42,920
compile in 2017 but that was not too

258
00:09:40,850 --> 00:09:44,480
much of a problem we also build the

259
00:09:42,920 --> 00:09:46,189
prototype up and this is again part of

260
00:09:44,480 --> 00:09:48,050
the standard process for me anyway is

261
00:09:46,189 --> 00:09:50,180
when I'm starting to design a circuit I

262
00:09:48,050 --> 00:09:51,500
will do something on a breadboard like

263
00:09:50,180 --> 00:09:54,589
this where you can plug stuff in take

264
00:09:51,500 --> 00:09:56,600
things out change values get everything

265
00:09:54,589 --> 00:09:59,060
working here before you kind of hard you

266
00:09:56,600 --> 00:10:04,389
know code it into circuitry on a circuit

267
00:09:59,060 --> 00:10:06,979
board so that worked so then I went and

268
00:10:04,389 --> 00:10:08,930
built my first version of the board

269
00:10:06,980 --> 00:10:10,610
which doesn't get a lot of respect in

270
00:10:08,930 --> 00:10:13,489
this presentation because it didn't

271
00:10:10,610 --> 00:10:14,689
totally work the way I wanted it to but

272
00:10:13,490 --> 00:10:16,579
I will mention so I got the board back

273
00:10:14,689 --> 00:10:19,670
through OSH park of course because

274
00:10:16,579 --> 00:10:23,300
they're awesome and local and here and

275
00:10:19,670 --> 00:10:25,339
here in the front row so yeah got the

276
00:10:23,300 --> 00:10:28,309
board's back built it up just like the

277
00:10:25,339 --> 00:10:30,170
prototype and which was just like the

278
00:10:28,309 --> 00:10:32,300
version that Shan had written or had

279
00:10:30,170 --> 00:10:33,500
made but it turns out when I hooked it

280
00:10:32,300 --> 00:10:36,258
up to the actual element

281
00:10:33,500 --> 00:10:37,910
it was way not loud enough and I had

282
00:10:36,259 --> 00:10:41,360
actually tested that with the prototype

283
00:10:37,910 --> 00:10:42,709
at the beginning but I it just didn't

284
00:10:41,360 --> 00:10:44,209
occur to me that it wasn't loud enough I

285
00:10:42,709 --> 00:10:45,979
heard it and I'm like yes it works but

286
00:10:44,209 --> 00:10:48,378
then I didn't I didn't test it as much

287
00:10:45,980 --> 00:10:49,910
as I should have before I built the

288
00:10:48,379 --> 00:10:51,470
first version so I built it and realized

289
00:10:49,910 --> 00:10:53,029
it wasn't loud enough and I tried to

290
00:10:51,470 --> 00:10:54,709
convince myself that it would be okay

291
00:10:53,029 --> 00:10:56,180
I was like well I can kind of hear it as

292
00:10:54,709 --> 00:10:58,250
long as there's nothing else going on

293
00:10:56,180 --> 00:10:59,750
around and like but I just couldn't

294
00:10:58,250 --> 00:11:02,540
bring myself to actually call that

295
00:10:59,750 --> 00:11:04,939
complete and I was like damn now I have

296
00:11:02,540 --> 00:11:07,160
to go and find an amplifier and build

297
00:11:04,939 --> 00:11:09,500
another circuit and hack on that and try

298
00:11:07,160 --> 00:11:11,449
to get it a little better what I ended

299
00:11:09,500 --> 00:11:13,189
up doing is using a little little level

300
00:11:11,449 --> 00:11:15,170
meter to measure the sound of the

301
00:11:13,189 --> 00:11:17,000
original and then try to match it a

302
00:11:15,170 --> 00:11:18,529
little bit to see you know okay let's

303
00:11:17,000 --> 00:11:19,730
let's add my amplifier and see if I can

304
00:11:18,529 --> 00:11:21,500
jack up the volume and make it work

305
00:11:19,730 --> 00:11:22,670
because with the speaker with my

306
00:11:21,500 --> 00:11:24,410
amplifier it was suit

307
00:11:22,670 --> 00:11:26,209
was really loud but then with the

308
00:11:24,410 --> 00:11:27,740
transducer it wasn't because whatever

309
00:11:26,210 --> 00:11:29,630
the you know however the construction of

310
00:11:27,740 --> 00:11:32,210
that thing is and the the resistance and

311
00:11:29,630 --> 00:11:33,650
I mean I don't even know so I figured I

312
00:11:32,210 --> 00:11:36,470
would just do like some test once I got

313
00:11:33,650 --> 00:11:38,689
it close enough I ended up using a LM 48

314
00:11:36,470 --> 00:11:40,370
64 which I'll show you on the next slide

315
00:11:38,690 --> 00:11:42,500
just a standard kind of audio amplifier

316
00:11:40,370 --> 00:11:47,660
to take the output of chance of chance

317
00:11:42,500 --> 00:11:50,660
design and then amplify that so here's

318
00:11:47,660 --> 00:11:52,790
the final look of the circuitry fits

319
00:11:50,660 --> 00:11:55,569
right in place so ya button micro SD

320
00:11:52,790 --> 00:11:58,760
card slot let's see the battery

321
00:11:55,570 --> 00:12:02,090
transducer and then the backside had the

322
00:11:58,760 --> 00:12:03,080
micro controller the amplifier and an

323
00:12:02,090 --> 00:12:04,460
on/off control which I'll talk about

324
00:12:03,080 --> 00:12:06,530
when I show you the schematic and then

325
00:12:04,460 --> 00:12:08,240
the voltage regulator so power comes in

326
00:12:06,530 --> 00:12:09,560
goes the voltage regulator gets

327
00:12:08,240 --> 00:12:12,070
regulated down from the four and a half

328
00:12:09,560 --> 00:12:15,260
volts to three volts to power everything

329
00:12:12,070 --> 00:12:17,140
micro controller has the code the on-off

330
00:12:15,260 --> 00:12:19,280
control again I'll talk about later and

331
00:12:17,140 --> 00:12:20,480
then the amplifier takes the sound in

332
00:12:19,280 --> 00:12:24,140
amplifies it and then sends it out to

333
00:12:20,480 --> 00:12:25,520
the transducer and it just so happened

334
00:12:24,140 --> 00:12:26,630
that like the board I'd already design

335
00:12:25,520 --> 00:12:28,400
you know for the first version it looked

336
00:12:26,630 --> 00:12:29,960
exactly the same except without the

337
00:12:28,400 --> 00:12:31,910
amplifier there was nothing under here I

338
00:12:29,960 --> 00:12:34,310
might have had a big bypass capacitor or

339
00:12:31,910 --> 00:12:35,839
decoupling cap or something over here so

340
00:12:34,310 --> 00:12:38,839
it just happened that this was like just

341
00:12:35,840 --> 00:12:40,790
the right size so you know I didn't want

342
00:12:38,840 --> 00:12:44,570
to have to like go to smaller components

343
00:12:40,790 --> 00:12:46,640
or anything like that so here's the

344
00:12:44,570 --> 00:12:49,160
final schematic sort of you know assume

345
00:12:46,640 --> 00:12:51,410
Chan's design is this and then I have

346
00:12:49,160 --> 00:12:53,540
kind of the simple stuff added to it so

347
00:12:51,410 --> 00:12:55,579
yeah SD card goes in here with the wav

348
00:12:53,540 --> 00:12:59,300
file gets communicated over SPI to here

349
00:12:55,580 --> 00:13:00,710
and then this will output PWM to the

350
00:12:59,300 --> 00:13:04,810
audio amplifier which will amplify it

351
00:13:00,710 --> 00:13:07,160
and then play the sound a cool thing is

352
00:13:04,810 --> 00:13:08,660
down here we have the voltage regulator

353
00:13:07,160 --> 00:13:09,829
here and then remember at the beginning

354
00:13:08,660 --> 00:13:11,750
I mentioned you can play the song you

355
00:13:09,830 --> 00:13:12,980
can also stop the song halfway through

356
00:13:11,750 --> 00:13:15,650
for people like me who don't brush our

357
00:13:12,980 --> 00:13:17,420
teeth for two minutes I needed a way to

358
00:13:15,650 --> 00:13:20,390
do that sort of have on/off control of

359
00:13:17,420 --> 00:13:21,860
the system and there are ways that I

360
00:13:20,390 --> 00:13:23,300
that I had thought about using

361
00:13:21,860 --> 00:13:24,560
transistors you could have two two

362
00:13:23,300 --> 00:13:26,329
transistors and do some stuff with

363
00:13:24,560 --> 00:13:28,880
discrete components but that would have

364
00:13:26,330 --> 00:13:30,410
been way too big to fit on the board it

365
00:13:28,880 --> 00:13:32,510
turns out that Maxim has a chip this

366
00:13:30,410 --> 00:13:34,630
sixty no 54 which is an actual on-off

367
00:13:32,510 --> 00:13:36,759
controller so

368
00:13:34,630 --> 00:13:39,459
typically the the setup is you have your

369
00:13:36,759 --> 00:13:41,560
on-off controller with an input on a

370
00:13:39,459 --> 00:13:43,000
button and then the output and the

371
00:13:41,560 --> 00:13:44,649
inverted outputs you can choose you know

372
00:13:43,000 --> 00:13:48,160
depending on your system feed that

373
00:13:44,649 --> 00:13:50,019
directly into the enable pin of the low

374
00:13:48,160 --> 00:13:51,490
dropout linear regulator a lot of

375
00:13:50,019 --> 00:13:53,440
designs you know normally the enable pin

376
00:13:51,490 --> 00:13:54,790
is just pulled high so it's always on so

377
00:13:53,440 --> 00:13:57,130
this is like any actual use of the

378
00:13:54,790 --> 00:13:59,139
enable pin so now you can push the

379
00:13:57,130 --> 00:14:00,610
button this this will always stay on

380
00:13:59,139 --> 00:14:01,930
this has like a pretty wide voltage

381
00:14:00,610 --> 00:14:04,389
range so you power it directly from the

382
00:14:01,930 --> 00:14:06,099
batteries and this will always stay on

383
00:14:04,389 --> 00:14:07,870
and I think it sucks like seven micro

384
00:14:06,100 --> 00:14:10,089
amps or something it's it's small enough

385
00:14:07,870 --> 00:14:11,380
for for most battery-powered systems and

386
00:14:10,089 --> 00:14:13,480
it will eventually kill the batteries

387
00:14:11,380 --> 00:14:15,850
over time but I thought it was a good

388
00:14:13,480 --> 00:14:17,949
compromise so it stays on waits for an

389
00:14:15,850 --> 00:14:21,009
interrupt and then we'll set the output

390
00:14:17,949 --> 00:14:22,508
will toggle the output so when I want to

391
00:14:21,009 --> 00:14:23,769
interrupt to the playback I can push the

392
00:14:22,509 --> 00:14:25,870
button again it's gonna change the state

393
00:14:23,769 --> 00:14:28,110
of that disable the voltage regulator

394
00:14:25,870 --> 00:14:30,370
and turn it off alright so that's cool

395
00:14:28,110 --> 00:14:32,620
what I also did is modified the firmware

396
00:14:30,370 --> 00:14:34,540
to change one of the pins so there's a

397
00:14:32,620 --> 00:14:37,389
reset pin normally that with this chip

398
00:14:34,540 --> 00:14:41,230
this eighty tiny 85 three set pin is by

399
00:14:37,389 --> 00:14:42,910
default a reset pin I disabled that

400
00:14:41,230 --> 00:14:44,980
change the fuses to turn it into GPIO

401
00:14:42,910 --> 00:14:47,290
pin and then modified the code so once

402
00:14:44,980 --> 00:14:49,779
the song stops playing the way it turns

403
00:14:47,290 --> 00:14:51,490
itself off is it will set this pin high

404
00:14:49,779 --> 00:14:54,370
normally it's low set the pin high which

405
00:14:51,490 --> 00:14:56,769
clears sort of as a secondary input into

406
00:14:54,370 --> 00:14:58,779
this part and then toggles the output so

407
00:14:56,769 --> 00:15:00,459
it will shut itself off so now the user

408
00:14:58,779 --> 00:15:02,470
can manually turn off the unit and then

409
00:15:00,459 --> 00:15:04,469
the electronics can manually turn itself

410
00:15:02,470 --> 00:15:07,509
off also aside thought was sort of cool

411
00:15:04,470 --> 00:15:10,329
and then the amplifier bridge siloed

412
00:15:07,509 --> 00:15:12,639
output and it's pretty loud with a

413
00:15:10,329 --> 00:15:15,599
normal speaker but not with this but

414
00:15:12,639 --> 00:15:17,649
louder than it was before the amplifier

415
00:15:15,600 --> 00:15:20,350
so yeah just a list of some of the code

416
00:15:17,649 --> 00:15:21,759
changes this stuffs all on where did I

417
00:15:20,350 --> 00:15:23,050
put that code I think there's a link to

418
00:15:21,759 --> 00:15:25,209
it on my website I think it's on my

419
00:15:23,050 --> 00:15:27,699
website I don't know but you can see the

420
00:15:25,209 --> 00:15:29,170
code modifications on there but yeah so

421
00:15:27,699 --> 00:15:32,380
fix some of the stuff that that would

422
00:15:29,170 --> 00:15:33,910
that wasn't working the way that Chan's

423
00:15:32,380 --> 00:15:36,370
code was is it would play every single

424
00:15:33,910 --> 00:15:38,500
file in the directory like one time and

425
00:15:36,370 --> 00:15:39,880
then it would keep keep repeating it you

426
00:15:38,500 --> 00:15:41,199
know yeah I would play each one one time

427
00:15:39,880 --> 00:15:43,720
and they repeat and keep playing sort of

428
00:15:41,199 --> 00:15:45,670
constant stream so I just changed that

429
00:15:43,720 --> 00:15:47,559
to just play the first file it found on

430
00:15:45,670 --> 00:15:47,930
the filesystem and play it once and then

431
00:15:47,559 --> 00:15:50,870
turn it

432
00:15:47,930 --> 00:15:52,699
and then dealing with the with problems

433
00:15:50,870 --> 00:15:54,800
of that because when you disable the

434
00:15:52,700 --> 00:15:56,570
reset pin that lets that prevents you

435
00:15:54,800 --> 00:15:59,240
from doing any subsequent in circuit

436
00:15:56,570 --> 00:16:00,620
programming so you can only program it

437
00:15:59,240 --> 00:16:02,060
and I think it's the high voltage

438
00:16:00,620 --> 00:16:03,260
programming mode or something I had to

439
00:16:02,060 --> 00:16:06,500
use a device programmer to do that

440
00:16:03,260 --> 00:16:10,189
instead of like the you know standard

441
00:16:06,500 --> 00:16:12,529
wavelet whatever the Adafruit um oh the

442
00:16:10,190 --> 00:16:14,330
USB you know tiny isp stuff sort of in

443
00:16:12,529 --> 00:16:15,170
circuit serial programming so it's a

444
00:16:14,330 --> 00:16:16,550
little bit of a problem when I was

445
00:16:15,170 --> 00:16:18,170
modifying the code and then testing the

446
00:16:16,550 --> 00:16:20,839
code because I couldn't just do the

447
00:16:18,170 --> 00:16:22,250
typical iteration of make code changes

448
00:16:20,839 --> 00:16:23,959
program it tested it was like make code

449
00:16:22,250 --> 00:16:25,820
changes put it in the device programmer

450
00:16:23,959 --> 00:16:27,439
program it stick it in the device

451
00:16:25,820 --> 00:16:28,580
you know socket and go from there

452
00:16:27,440 --> 00:16:30,020
there's just a longer process but

453
00:16:28,580 --> 00:16:32,990
luckily the changes weren't like that

454
00:16:30,020 --> 00:16:34,490
crazy but if you wanted you know compile

455
00:16:32,990 --> 00:16:36,320
your own you grab the code use these

456
00:16:34,490 --> 00:16:40,100
things with these few settings and you

457
00:16:36,320 --> 00:16:41,420
should be good to go so here are some of

458
00:16:40,100 --> 00:16:44,149
the pictures of the final board now that

459
00:16:41,420 --> 00:16:46,279
I knew that board worked you know again

460
00:16:44,149 --> 00:16:48,380
I want to make it look as stock as

461
00:16:46,279 --> 00:16:50,510
possible but I just couldn't figure out

462
00:16:48,380 --> 00:16:54,170
a good way to get into that transducer

463
00:16:50,510 --> 00:16:56,029
so I took a little um little little

464
00:16:54,170 --> 00:16:58,579
drill drilled in use some dental tools

465
00:16:56,029 --> 00:17:00,560
to like fish out the wire so cut them

466
00:16:58,580 --> 00:17:02,060
with one dental tool and then use

467
00:17:00,560 --> 00:17:03,920
another one to fish out the wires and

468
00:17:02,060 --> 00:17:06,470
just left enough that I could strip it

469
00:17:03,920 --> 00:17:09,649
off add some you know blue wire 30 gauge

470
00:17:06,470 --> 00:17:11,809
wire yeah it was like it was like

471
00:17:09,650 --> 00:17:14,270
laparoscopic without a camera right so

472
00:17:11,809 --> 00:17:15,889
you just sort of sort of guessing and

473
00:17:14,270 --> 00:17:17,420
you'll maybe I could do a smaller hole

474
00:17:15,890 --> 00:17:20,270
with better tools or something but that

475
00:17:17,420 --> 00:17:21,920
was fine what I didn't end up doing is

476
00:17:20,270 --> 00:17:23,480
putting like you know silicone in here

477
00:17:21,920 --> 00:17:26,390
and I probably could if I was actually

478
00:17:23,480 --> 00:17:27,740
gonna use it but after all this work I

479
00:17:26,390 --> 00:17:29,900
didn't want to use it because it's like

480
00:17:27,740 --> 00:17:31,910
I only had the one that actually works

481
00:17:29,900 --> 00:17:36,590
well and looks good and I was like I

482
00:17:31,910 --> 00:17:38,030
just want brush my teeth yeah so this is

483
00:17:36,590 --> 00:17:39,530
what it looks like so final things

484
00:17:38,030 --> 00:17:41,420
circuitry you know the transducer gets

485
00:17:39,530 --> 00:17:42,678
extended out to here and then SD card

486
00:17:41,420 --> 00:17:47,809
here slides it in put the batteries in

487
00:17:42,679 --> 00:17:50,809
and and that's it so with that let's

488
00:17:47,809 --> 00:17:52,700
give our demonstration so I released a

489
00:17:50,809 --> 00:17:54,200
video about this online I don't member

490
00:17:52,700 --> 00:17:57,169
when if you want to go or something and

491
00:17:54,200 --> 00:17:58,730
the original intent so I grew up in sort

492
00:17:57,169 --> 00:17:59,760
of that kind of punk hardcore scene in

493
00:17:58,730 --> 00:18:01,500
Boston

494
00:17:59,760 --> 00:18:03,720
and listen to a lot of straightedge

495
00:18:01,500 --> 00:18:05,280
hardcore so kind of positive message and

496
00:18:03,720 --> 00:18:07,110
drug free and all this stuff and there's

497
00:18:05,280 --> 00:18:08,879
a band called Crucial youth that had a

498
00:18:07,110 --> 00:18:11,129
song which was a spoof of like a lot of

499
00:18:08,880 --> 00:18:12,510
the positive bands at the time and they

500
00:18:11,130 --> 00:18:15,180
had a song called positive dental

501
00:18:12,510 --> 00:18:17,100
outlook which I thought would be like

502
00:18:15,180 --> 00:18:18,810
totally fitting for this toothbrush

503
00:18:17,100 --> 00:18:20,429
because there's a lot of songs about

504
00:18:18,810 --> 00:18:21,929
positive mental attitude you know and

505
00:18:20,430 --> 00:18:24,900
being positive so I thought that would

506
00:18:21,930 --> 00:18:27,510
be funny so I made a video and showed

507
00:18:24,900 --> 00:18:28,800
that song and realized pretty quickly

508
00:18:27,510 --> 00:18:30,540
that like most people didn't know what

509
00:18:28,800 --> 00:18:31,889
that was and could barely understand it

510
00:18:30,540 --> 00:18:35,190
because it was loud and fast and

511
00:18:31,890 --> 00:18:37,380
everything so when I got accepted to be

512
00:18:35,190 --> 00:18:40,080
sighs which thank you to everybody who

513
00:18:37,380 --> 00:18:42,060
accepted me because I wasn't expecting

514
00:18:40,080 --> 00:18:44,040
to give a talk on packing a toothbrush

515
00:18:42,060 --> 00:18:47,190
and to Chris and staff for convincing me

516
00:18:44,040 --> 00:18:48,540
to also submit it I figured I should do

517
00:18:47,190 --> 00:18:50,790
something more portland-based right

518
00:18:48,540 --> 00:18:52,050
because we're Portland and it would be

519
00:18:50,790 --> 00:18:53,490
it would be pretty silly to just play

520
00:18:52,050 --> 00:18:55,010
the same song so I have a special song

521
00:18:53,490 --> 00:18:57,740
for you that nobody has heard yet and

522
00:18:55,010 --> 00:18:59,940
well at least not in toothbrush form and

523
00:18:57,740 --> 00:19:01,710
I'm pretty proud of it I think it's

524
00:18:59,940 --> 00:19:04,080
pretty hilarious and hopefully somebody

525
00:19:01,710 --> 00:19:05,510
will recognize it let's see so I'm gonna

526
00:19:04,080 --> 00:19:09,300
do this alright so I'm gonna put this

527
00:19:05,510 --> 00:19:11,420
microphone over here and oh I should

528
00:19:09,300 --> 00:19:14,100
mention so I have two different speakers

529
00:19:11,420 --> 00:19:15,240
because if I just held the transducer to

530
00:19:14,100 --> 00:19:18,360
here you're probably not gonna hear it

531
00:19:15,240 --> 00:19:19,770
so I have the paper cup which were a wax

532
00:19:18,360 --> 00:19:22,050
coated paper cup which works pretty well

533
00:19:19,770 --> 00:19:24,840
and then there's this kind of metal

534
00:19:22,050 --> 00:19:26,580
Mancala box which this sounds a little

535
00:19:24,840 --> 00:19:27,750
bit tinny but this is what i use for the

536
00:19:26,580 --> 00:19:29,970
other videos i think i'm gonna try it

537
00:19:27,750 --> 00:19:31,140
with the with the cup first and we'll

538
00:19:29,970 --> 00:19:33,540
see if you can hear it I have a backup

539
00:19:31,140 --> 00:19:48,720
video just in case anyway so but let's

540
00:19:33,540 --> 00:19:57,170
see what happens will you be able to

541
00:19:48,720 --> 00:19:57,170
hear that wiggle around too much

542
00:19:58,520 --> 00:20:02,070
all right so I might have to do this a

543
00:20:01,170 --> 00:20:04,260
few times I don't know let's see if

544
00:20:02,070 --> 00:20:19,629
let's see if you can hear it ready don't

545
00:20:04,260 --> 00:20:44,420
count down three two one the whole thing

546
00:20:19,630 --> 00:20:44,980
[Music]

547
00:20:44,420 --> 00:20:54,030
[Applause]

548
00:20:44,980 --> 00:20:54,030
[Music]

549
00:21:13,750 --> 00:21:16,900
[Music]

550
00:21:20,070 --> 00:21:23,200
[Music]

551
00:21:34,660 --> 00:21:40,940
[Applause]

552
00:21:50,290 --> 00:21:53,510
[Applause]

553
00:21:59,910 --> 00:22:04,600
that's now officially my favorite song

554
00:22:02,410 --> 00:22:06,640
and I've listened to it like a thousand

555
00:22:04,600 --> 00:22:08,560
times as I was getting the volume right

556
00:22:06,640 --> 00:22:10,450
and everything and that was actually the

557
00:22:08,560 --> 00:22:12,760
remix so if you watch the first episode

558
00:22:10,450 --> 00:22:16,360
of Portlandia that's where this tune

559
00:22:12,760 --> 00:22:18,250
came from and this was a remix version

560
00:22:16,360 --> 00:22:20,979
so somebody took it and made it sound

561
00:22:18,250 --> 00:22:21,940
even better so yeah that's one thing you

562
00:22:20,980 --> 00:22:23,890
have to do is you're gonna have to fine

563
00:22:21,940 --> 00:22:26,830
tune your audio for the transducer cuz

564
00:22:23,890 --> 00:22:28,030
it just has a much weirder response but

565
00:22:26,830 --> 00:22:31,179
yeah you know then you can have awesome

566
00:22:28,030 --> 00:22:32,889
songs like that so possible enhancements

567
00:22:31,180 --> 00:22:35,350
I think none I think it's fine the way

568
00:22:32,890 --> 00:22:36,580
it is but of course people have opinions

569
00:22:35,350 --> 00:22:38,740
so when I originally posted the video

570
00:22:36,580 --> 00:22:39,820
they're like well you have Bluetooth and

571
00:22:38,740 --> 00:22:40,570
you can play it from your phone it's

572
00:22:39,820 --> 00:22:41,770
like because I don't want to have my

573
00:22:40,570 --> 00:22:43,149
phone in the bathroom when I'm brushing

574
00:22:41,770 --> 00:22:44,020
my teeth for less than two minutes

575
00:22:43,150 --> 00:22:45,910
anyway

576
00:22:44,020 --> 00:22:47,110
uh-huh so I don't know and then

577
00:22:45,910 --> 00:22:48,970
inductive charging maybe we don't have

578
00:22:47,110 --> 00:22:50,590
to change the batteries and then

579
00:22:48,970 --> 00:22:52,750
actually the one thing I would say is

580
00:22:50,590 --> 00:22:54,399
some easy access to to the to the SD

581
00:22:52,750 --> 00:22:56,290
card cuz getting to it you have to

582
00:22:54,400 --> 00:22:57,160
unscrew the screw on the back of the you

583
00:22:56,290 --> 00:22:59,560
know where the batteries are pull that

584
00:22:57,160 --> 00:23:00,760
out pull the housing out and then change

585
00:22:59,560 --> 00:23:03,639
it so that's sort of a pain especially

586
00:23:00,760 --> 00:23:05,620
for for testing but works fine for my

587
00:23:03,640 --> 00:23:09,430
purposes of giving a talk and putting it

588
00:23:05,620 --> 00:23:10,419
in a box okay so final slide yeah if you

589
00:23:09,430 --> 00:23:13,390
want to build your own everything's on

590
00:23:10,420 --> 00:23:14,560
my website and you can go directly to

591
00:23:13,390 --> 00:23:16,150
ash Park if you want to order the bare

592
00:23:14,560 --> 00:23:17,740
boards I have them shared so you can

593
00:23:16,150 --> 00:23:20,530
just go there order them get your

594
00:23:17,740 --> 00:23:23,920
toothbrush and you know have better

595
00:23:20,530 --> 00:23:26,800
sounds so with that yeah thank you and

596
00:23:23,920 --> 00:23:29,250
remember to keep that positive dental

597
00:23:26,800 --> 00:23:29,250
outlook

598
00:23:29,309 --> 00:23:35,590
and this by the way was another

599
00:23:34,299 --> 00:23:38,520
inspiration this is called the youth

600
00:23:35,590 --> 00:23:41,320
brush that's like for the youth of today

601
00:23:38,520 --> 00:23:44,260
yeah so thank you oh do we have any

602
00:23:41,320 --> 00:23:46,418
questions no kind you're not allowed to

603
00:23:44,260 --> 00:23:48,960
ask questions but I'll be outside if you

604
00:23:46,419 --> 00:23:48,960
have any

605
00:23:55,120 --> 00:23:57,179
you

