1
00:00:15,580 --> 00:00:22,689
um so I'm Topher wearing a Sauer shirt

2
00:00:20,860 --> 00:00:24,279
if anybody can tell me the country that

3
00:00:22,689 --> 00:00:27,250
the spant hails from I will buy you a

4
00:00:24,279 --> 00:00:29,410
beer across the street after the talk I

5
00:00:27,250 --> 00:00:31,360
red team at a large fortune 500 I'm a

6
00:00:29,410 --> 00:00:32,590
self-proclaimed vulnerability enthusiast

7
00:00:31,360 --> 00:00:35,680
who likes cause and constructive

8
00:00:32,590 --> 00:00:37,809
mischief previously to this I had lots

9
00:00:35,680 --> 00:00:40,000
of three letters of government fun over

10
00:00:37,809 --> 00:00:41,709
in a place far far away on the east

11
00:00:40,000 --> 00:00:44,410
coast where it was awful because living

12
00:00:41,710 --> 00:00:45,550
in Maryland boo because I'd rather be

13
00:00:44,410 --> 00:00:49,089
mountain biking and the Pacific

14
00:00:45,550 --> 00:00:51,580
Northwest is the best place for it so

15
00:00:49,089 --> 00:00:53,949
today I'm gonna talk about for the 20

16
00:00:51,580 --> 00:00:55,989
minutes that I have firstly why you want

17
00:00:53,949 --> 00:00:58,059
to train offensively and we just heard

18
00:00:55,989 --> 00:00:59,769
for about an hour about challenging your

19
00:00:58,059 --> 00:01:01,659
own biases and this is where I'm

20
00:00:59,769 --> 00:01:03,850
certainly biased because I do come from

21
00:01:01,659 --> 00:01:05,379
more of an offensive background and now

22
00:01:03,850 --> 00:01:07,799
in a position both from a product

23
00:01:05,379 --> 00:01:11,590
security standpoint and a more

24
00:01:07,799 --> 00:01:13,240
adversarial modeling standpoint of I do

25
00:01:11,590 --> 00:01:15,010
a lot of offensive nature but I also

26
00:01:13,240 --> 00:01:17,408
want defense people to know how that

27
00:01:15,010 --> 00:01:18,880
behavior and that nature entails the

28
00:01:17,409 --> 00:01:19,750
environment so they get a better idea of

29
00:01:18,880 --> 00:01:21,970
how to stop it

30
00:01:19,750 --> 00:01:23,260
then I'm going to talk about CTF and

31
00:01:21,970 --> 00:01:25,179
this notion that I've came up with

32
00:01:23,260 --> 00:01:26,530
called a shooting gallery which is a

33
00:01:25,180 --> 00:01:28,480
training mechanism that I've been

34
00:01:26,530 --> 00:01:30,640
utilizing in order to help train people

35
00:01:28,480 --> 00:01:32,800
offensively with and then I'm gonna go

36
00:01:30,640 --> 00:01:35,170
into the actual tribulations of

37
00:01:32,800 --> 00:01:36,910
struggles that I ran in with and things

38
00:01:35,170 --> 00:01:38,680
that you can do to build and deploy

39
00:01:36,910 --> 00:01:42,009
challenges and then go into a little bit

40
00:01:38,680 --> 00:01:44,440
of infrastructure and hosting so first

41
00:01:42,010 --> 00:01:45,880
of all why train offensively and like I

42
00:01:44,440 --> 00:01:47,380
said this is where I'm a little bit

43
00:01:45,880 --> 00:01:50,289
biased because I do have that this

44
00:01:47,380 --> 00:01:51,789
offensive background in mindset but you

45
00:01:50,290 --> 00:01:53,470
know a lot of people will say oh well

46
00:01:51,790 --> 00:01:55,240
offense is better than defense or a

47
00:01:53,470 --> 00:01:56,830
defense is better than offense but I

48
00:01:55,240 --> 00:02:00,580
don't believe that's necessarily true in

49
00:01:56,830 --> 00:02:02,408
both sides and lots of angles have to

50
00:02:00,580 --> 00:02:03,670
work together and yeah you're gonna you

51
00:02:02,409 --> 00:02:05,290
know have your nation-states where

52
00:02:03,670 --> 00:02:07,420
they're only focused with offense and

53
00:02:05,290 --> 00:02:09,220
you do this cat-and-mouse type game but

54
00:02:07,420 --> 00:02:10,780
internally in an organization I feel

55
00:02:09,220 --> 00:02:12,580
that the teams need to work in tandem

56
00:02:10,780 --> 00:02:14,080
together without going into this you

57
00:02:12,580 --> 00:02:17,620
know notion of purple teaming that we

58
00:02:14,080 --> 00:02:19,120
just heard is a terrible concept but you

59
00:02:17,620 --> 00:02:20,980
know security training from an offensive

60
00:02:19,120 --> 00:02:22,629
standpoint I think is important in order

61
00:02:20,980 --> 00:02:24,579
for defenders to know and understand

62
00:02:22,629 --> 00:02:25,959
what attackers do you'll get a lot of

63
00:02:24,580 --> 00:02:28,060
people on the defense side you know

64
00:02:25,959 --> 00:02:29,200
running edr tools or looking through

65
00:02:28,060 --> 00:02:32,349
logs and trying to

66
00:02:29,200 --> 00:02:34,420
early TTP's but without actually you

67
00:02:32,349 --> 00:02:36,069
know understanding what tools are being

68
00:02:34,420 --> 00:02:37,569
used and what kind of footprints they

69
00:02:36,069 --> 00:02:39,359
leave in the environment or why an

70
00:02:37,569 --> 00:02:42,640
attacker would want to use them from a

71
00:02:39,360 --> 00:02:44,290
you know methodology points of view into

72
00:02:42,640 --> 00:02:46,899
why they would use you know this tool

73
00:02:44,290 --> 00:02:48,519
versus another you really get into their

74
00:02:46,900 --> 00:02:49,989
mindset and that helps you track down

75
00:02:48,519 --> 00:02:53,200
what they were actually going after how

76
00:02:49,989 --> 00:02:54,670
they operate so this you know helps

77
00:02:53,200 --> 00:02:55,988
answer a couple of questions like what

78
00:02:54,670 --> 00:02:58,149
do you look for in and seemingly endless

79
00:02:55,989 --> 00:03:00,430
cloud of blogs or if you're doing more

80
00:02:58,150 --> 00:03:02,769
of you know a threat model what parts of

81
00:03:00,430 --> 00:03:04,060
an app couldn't attacker hit or you know

82
00:03:02,769 --> 00:03:06,840
if you want to go back into the whole

83
00:03:04,060 --> 00:03:09,130
red teaming concept of you know

84
00:03:06,840 --> 00:03:11,170
constructive thought and being more

85
00:03:09,130 --> 00:03:12,910
analytical you need other people's

86
00:03:11,170 --> 00:03:15,220
perspectives not just offenders or

87
00:03:12,910 --> 00:03:18,940
defenders to answer that question of

88
00:03:15,220 --> 00:03:21,130
where can I attack and of course this

89
00:03:18,940 --> 00:03:23,079
talk isn't about you know offensive

90
00:03:21,130 --> 00:03:29,739
teams and defense teams this is really

91
00:03:23,079 --> 00:03:31,030
about CTF so capture the flag I'm

92
00:03:29,739 --> 00:03:32,650
certain that a lot of people are now

93
00:03:31,030 --> 00:03:33,970
familiar with this since it's you know a

94
00:03:32,650 --> 00:03:36,910
concept that's being put into place

95
00:03:33,970 --> 00:03:39,280
across multiple security conferences and

96
00:03:36,910 --> 00:03:41,459
inside of organizations but it's you

97
00:03:39,280 --> 00:03:44,200
know an informal security competition

98
00:03:41,459 --> 00:03:46,630
it's it's the hacker Olympics where

99
00:03:44,200 --> 00:03:48,760
players are competing they're exploiting

100
00:03:46,630 --> 00:03:51,190
binaries or reverse engineering binaries

101
00:03:48,760 --> 00:03:53,108
or writing shellcode to you know

102
00:03:51,190 --> 00:03:55,060
essentially find a flag hidden in the

103
00:03:53,109 --> 00:03:57,100
service or on a on a website somewhere

104
00:03:55,060 --> 00:03:58,870
you grab that you cat it into a

105
00:03:57,100 --> 00:04:00,730
leaderboard and then you endpoints and

106
00:03:58,870 --> 00:04:03,239
the hacker with the most points was the

107
00:04:00,730 --> 00:04:06,100
best hacker in that particular case it

108
00:04:03,239 --> 00:04:08,019
demo of course it demonstrates refrig

109
00:04:06,100 --> 00:04:10,480
proficiency or excellence in one

110
00:04:08,019 --> 00:04:12,760
particular area like if you look at the

111
00:04:10,480 --> 00:04:14,230
CTF that I'm currently running here most

112
00:04:12,760 --> 00:04:15,700
people are attacking the web side

113
00:04:14,230 --> 00:04:17,228
because web is you know the current

114
00:04:15,700 --> 00:04:18,639
hotness and that's where everything's

115
00:04:17,228 --> 00:04:20,709
really being attacked from an initial

116
00:04:18,639 --> 00:04:23,680
point of view but then there is other

117
00:04:20,709 --> 00:04:26,770
areas of exploitation or CTF such as

118
00:04:23,680 --> 00:04:27,849
binary cryptography programming that are

119
00:04:26,770 --> 00:04:30,400
often too overlooked in these

120
00:04:27,849 --> 00:04:32,349
competitions and this is where as an

121
00:04:30,400 --> 00:04:34,150
organizer you really get to choose which

122
00:04:32,349 --> 00:04:36,250
areas are being stressed over for a

123
00:04:34,150 --> 00:04:39,549
particular event so in are as we did a

124
00:04:36,250 --> 00:04:41,560
4x4 so for shell code for binary for web

125
00:04:39,550 --> 00:04:43,100
and for reverse engineering there's

126
00:04:41,560 --> 00:04:45,890
others where it's you know entire

127
00:04:43,100 --> 00:04:47,630
or entirely binary driven or if you look

128
00:04:45,890 --> 00:04:49,940
into you know how Def Con does where

129
00:04:47,630 --> 00:04:52,310
it's this attack defense model it's a

130
00:04:49,940 --> 00:04:53,660
lot of you know for fronted services and

131
00:04:52,310 --> 00:04:55,550
then behind those there's more

132
00:04:53,660 --> 00:04:57,470
vulnerabilities and it's more of a you

133
00:04:55,550 --> 00:04:58,970
know full-fledged systems view as

134
00:04:57,470 --> 00:05:01,160
opposed to you're just getting into web

135
00:04:58,970 --> 00:05:03,950
service with sequel injection or landing

136
00:05:01,160 --> 00:05:04,850
a buffer overflow so that kind of brings

137
00:05:03,950 --> 00:05:07,130
into the types

138
00:05:04,850 --> 00:05:08,270
so there's jeopardy which you've seen

139
00:05:07,130 --> 00:05:09,850
the show you kind of know what that

140
00:05:08,270 --> 00:05:12,500
entails that's what we're doing here at

141
00:05:09,850 --> 00:05:13,850
b-sides and then there's the attack and

142
00:05:12,500 --> 00:05:15,410
defense where teams are attacking each

143
00:05:13,850 --> 00:05:19,010
other services and some court of

144
00:05:15,410 --> 00:05:21,080
contained environment there is another

145
00:05:19,010 --> 00:05:22,730
concept beyond that which is called boot

146
00:05:21,080 --> 00:05:25,070
to root which is exactly as the name

147
00:05:22,730 --> 00:05:27,680
suggests and this has really be become

148
00:05:25,070 --> 00:05:29,420
popular with vuln of and now hack the

149
00:05:27,680 --> 00:05:31,490
box which if you haven't heard of it or

150
00:05:29,420 --> 00:05:33,980
playing it it's a fantastic resource

151
00:05:31,490 --> 00:05:35,690
that just hosts you know a bunch of

152
00:05:33,980 --> 00:05:37,880
boots root exercises and you can go

153
00:05:35,690 --> 00:05:39,380
through the full you know initial access

154
00:05:37,880 --> 00:05:40,730
to a box all the way down to getting

155
00:05:39,380 --> 00:05:42,740
root on the machine and it's a great

156
00:05:40,730 --> 00:05:45,170
learning opportunity but you know these

157
00:05:42,740 --> 00:05:47,330
are intentionally vulnerable and if you

158
00:05:45,170 --> 00:05:49,580
want to take it into how I help train

159
00:05:47,330 --> 00:05:51,950
people that are on defensive to think

160
00:05:49,580 --> 00:05:55,219
offensively they like this whole cyber

161
00:05:51,950 --> 00:05:57,020
kill chain aspect and one thing that I

162
00:05:55,220 --> 00:05:58,850
really like attributing to this is you

163
00:05:57,020 --> 00:06:00,830
have this you know enumeration model

164
00:05:58,850 --> 00:06:02,540
where you end map the host and then you

165
00:06:00,830 --> 00:06:03,830
do vulnerability discovery to see you

166
00:06:02,540 --> 00:06:06,860
know what's listening on it maybe it's

167
00:06:03,830 --> 00:06:08,150
vulnerable Tomcat or something and then

168
00:06:06,860 --> 00:06:10,040
you do your initial access your

169
00:06:08,150 --> 00:06:11,450
exploitation and then the big part of

170
00:06:10,040 --> 00:06:13,550
boots routes is there's a privilege

171
00:06:11,450 --> 00:06:15,170
escalation concept because you know you

172
00:06:13,550 --> 00:06:18,440
boot it you get onto it then you got to

173
00:06:15,170 --> 00:06:20,450
route it so there's you know typically a

174
00:06:18,440 --> 00:06:21,710
CV that's off the shelf that you can use

175
00:06:20,450 --> 00:06:23,450
and these are you know if you've ever

176
00:06:21,710 --> 00:06:25,010
played around with the OS CP the

177
00:06:23,450 --> 00:06:27,050
penetration testing with Kali Linux

178
00:06:25,010 --> 00:06:31,340
course the offensive security offers

179
00:06:27,050 --> 00:06:33,080
this is exactly what those are so I

180
00:06:31,340 --> 00:06:34,159
briefly mentioned the kill chain and you

181
00:06:33,080 --> 00:06:36,650
know this is where you can really

182
00:06:34,160 --> 00:06:39,170
question my biases as somebody that does

183
00:06:36,650 --> 00:06:40,789
offensive but I like kind of relating

184
00:06:39,170 --> 00:06:42,620
this to the defense teams because they

185
00:06:40,790 --> 00:06:44,210
really you know it clicks when they're

186
00:06:42,620 --> 00:06:46,460
playing a boots route of okay you're at

187
00:06:44,210 --> 00:06:49,609
this phase you've done your enumeration

188
00:06:46,460 --> 00:06:51,530
you've done XYZ but then there's this

189
00:06:49,610 --> 00:06:53,840
fusion X kill chain that kind of took

190
00:06:51,530 --> 00:06:55,320
the miter kill chain and really brought

191
00:06:53,840 --> 00:06:57,659
it down and

192
00:06:55,320 --> 00:06:59,280
you know more of an adversarial view of

193
00:06:57,660 --> 00:07:00,960
you have this whole legacy cyber kill

194
00:06:59,280 --> 00:07:02,580
chain which is like The MITRE framework

195
00:07:00,960 --> 00:07:04,560
but then you do different things when

196
00:07:02,580 --> 00:07:06,359
you're both internal to the organization

197
00:07:04,560 --> 00:07:09,420
once you're on a box there's things you

198
00:07:06,360 --> 00:07:11,630
do past that but with boots arute and

199
00:07:09,420 --> 00:07:14,370
where people are really getting a lot of

200
00:07:11,630 --> 00:07:16,020
you know steam with this concept is

201
00:07:14,370 --> 00:07:18,210
you're playing around with this internal

202
00:07:16,020 --> 00:07:21,479
kill chain quite a bit by solving these

203
00:07:18,210 --> 00:07:24,120
challenges which kind of comes into the

204
00:07:21,480 --> 00:07:26,460
shooting-gallery concept which is a form

205
00:07:24,120 --> 00:07:28,080
of CTF but it's not meant to be a

206
00:07:26,460 --> 00:07:32,640
competition it's meant to be a learning

207
00:07:28,080 --> 00:07:34,650
environment so you take the CTF idea and

208
00:07:32,640 --> 00:07:36,419
you build an internal isolated

209
00:07:34,650 --> 00:07:38,010
playground inside of your organization

210
00:07:36,420 --> 00:07:40,530
to build offensive security techniques

211
00:07:38,010 --> 00:07:42,659
and of course like I said hack the box

212
00:07:40,530 --> 00:07:44,520
is pretty much doing this but the

213
00:07:42,660 --> 00:07:45,930
unfortunate part with that is inside of

214
00:07:44,520 --> 00:07:47,640
your organization if you wanted to

215
00:07:45,930 --> 00:07:49,680
implement something like this there's

216
00:07:47,640 --> 00:07:51,510
going to likely be a huge barrier to

217
00:07:49,680 --> 00:07:53,280
entry whether or not it be dealing with

218
00:07:51,510 --> 00:07:55,230
your corporate network and allowing you

219
00:07:53,280 --> 00:07:57,260
to SSH outside of it without doing weird

220
00:07:55,230 --> 00:07:59,520
proxying or maybe they're you know

221
00:07:57,260 --> 00:08:01,710
blocking particular ports you need to

222
00:07:59,520 --> 00:08:03,090
get onto these boxes and that's not

223
00:08:01,710 --> 00:08:04,799
really okay because you're not trying to

224
00:08:03,090 --> 00:08:06,780
teach people the intricacies of

225
00:08:04,800 --> 00:08:08,910
networking you're trying to teach people

226
00:08:06,780 --> 00:08:12,030
how to solve you know exploitation

227
00:08:08,910 --> 00:08:14,000
problems so I feel building something

228
00:08:12,030 --> 00:08:16,500
like this inside is massively useful

229
00:08:14,000 --> 00:08:18,270
that also opens up a lot of mentorship

230
00:08:16,500 --> 00:08:20,190
capabilities because you're able to do

231
00:08:18,270 --> 00:08:21,510
internal tracking monitoring of the

232
00:08:20,190 --> 00:08:23,700
environment and then the mentorship

233
00:08:21,510 --> 00:08:25,890
process becomes a lot easier because you

234
00:08:23,700 --> 00:08:27,570
can go into you know a conference room

235
00:08:25,890 --> 00:08:29,940
within your organization and just sit

236
00:08:27,570 --> 00:08:31,290
down log into your infrastructure that

237
00:08:29,940 --> 00:08:33,120
you're the one managing that you have

238
00:08:31,290 --> 00:08:36,180
full control over so you know nothing's

239
00:08:33,120 --> 00:08:39,390
leaking outside and you can actually you

240
00:08:36,179 --> 00:08:41,880
know teach and get motivated and get

241
00:08:39,390 --> 00:08:43,530
excited about this stuff which is really

242
00:08:41,880 --> 00:08:45,180
awesome to see from you know the

243
00:08:43,530 --> 00:08:47,310
defenders because they and a lot of

244
00:08:45,180 --> 00:08:48,959
times are good at defense they've never

245
00:08:47,310 --> 00:08:51,089
done offense and things start to click

246
00:08:48,960 --> 00:08:55,620
of what they're finding when they do log

247
00:08:51,090 --> 00:08:57,090
correlation and whatnot and really the

248
00:08:55,620 --> 00:08:59,490
thing with this is it's reducing

249
00:08:57,090 --> 00:09:01,290
overhead needed to get interested in

250
00:08:59,490 --> 00:09:02,760
this and to have an environment set up

251
00:09:01,290 --> 00:09:05,849
such that you're able to do it

252
00:09:02,760 --> 00:09:07,170
relatively effectively in the open

253
00:09:05,850 --> 00:09:08,410
source implementation that I'm going to

254
00:09:07,170 --> 00:09:10,360
be publishing it's

255
00:09:08,410 --> 00:09:13,480
just using things like KVM and libvirt

256
00:09:10,360 --> 00:09:16,829
which you know deployments pretty easy

257
00:09:13,480 --> 00:09:19,899
but not really because KVM and libvirt

258
00:09:16,829 --> 00:09:21,219
but you know you build a couple of

259
00:09:19,899 --> 00:09:22,389
scripts to like you know Buddha machine

260
00:09:21,220 --> 00:09:24,430
into the network throw it into your

261
00:09:22,389 --> 00:09:26,139
isolated subnet and then you're done and

262
00:09:24,430 --> 00:09:27,899
then you just need to import more VMS or

263
00:09:26,139 --> 00:09:31,689
more challenges and it's seamless I

264
00:09:27,899 --> 00:09:34,480
really like using vagrant which is you

265
00:09:31,689 --> 00:09:35,889
know you you get base box you spin it up

266
00:09:34,480 --> 00:09:37,779
you run one command and now you have a

267
00:09:35,889 --> 00:09:39,970
VM and that's really cool too because

268
00:09:37,779 --> 00:09:42,399
you get the redeploy ability aspect so

269
00:09:39,970 --> 00:09:44,170
if somebody is you know ruining a box

270
00:09:42,399 --> 00:09:46,060
because it's a multiplayer environment

271
00:09:44,170 --> 00:09:49,089
you have the ability to really quickly

272
00:09:46,060 --> 00:09:50,229
revert or reload the VM and get it back

273
00:09:49,089 --> 00:09:53,800
to the blank state where it is

274
00:09:50,230 --> 00:09:56,379
exploitable and then the implementation

275
00:09:53,800 --> 00:09:58,990
I'm using which I'll publish is this

276
00:09:56,379 --> 00:10:01,629
whole notion of you use Open VPN and you

277
00:09:58,990 --> 00:10:03,550
privately connect into a subnet so this

278
00:10:01,629 --> 00:10:05,709
is the thing too right you don't want to

279
00:10:03,550 --> 00:10:07,628
have intentionally vulnerable machines

280
00:10:05,709 --> 00:10:09,969
in your network that's ridiculous we

281
00:10:07,629 --> 00:10:12,430
know not to do that so what you do is

282
00:10:09,970 --> 00:10:14,319
you can take a server put an open VPN

283
00:10:12,430 --> 00:10:16,170
server on top of it have everybody log

284
00:10:14,319 --> 00:10:18,819
into that and then it you know does

285
00:10:16,170 --> 00:10:20,740
firewall rules such that when you're

286
00:10:18,819 --> 00:10:22,630
connected into the Open VPN as a client

287
00:10:20,740 --> 00:10:24,610
you're now in a virtual environment that

288
00:10:22,630 --> 00:10:26,019
you can't break out of and all of your

289
00:10:24,610 --> 00:10:28,029
VMs are hosted in that private

290
00:10:26,019 --> 00:10:30,220
environment so this makes it you know

291
00:10:28,029 --> 00:10:31,870
from an organizational standpoint and

292
00:10:30,220 --> 00:10:33,670
looking at with the security risk of

293
00:10:31,870 --> 00:10:37,199
having intentionally vulnerable security

294
00:10:33,670 --> 00:10:37,199
problems in the network that goes away

295
00:10:37,380 --> 00:10:41,380
there's a couple of things that you will

296
00:10:39,459 --> 00:10:43,449
need to be wary of though because you're

297
00:10:41,380 --> 00:10:46,449
gonna have this restart service in a in

298
00:10:43,449 --> 00:10:48,519
a tunnel in your private subnet you're

299
00:10:46,449 --> 00:10:50,258
not going to be able to as a player and

300
00:10:48,519 --> 00:10:52,779
this is kind of where I attribute the

301
00:10:50,259 --> 00:10:54,699
pwk and osep course as a huge

302
00:10:52,779 --> 00:10:56,290
inspiration because they allow you

303
00:10:54,699 --> 00:10:58,029
because it's a multiplayer environment

304
00:10:56,290 --> 00:11:00,519
to restart services with the click of a

305
00:10:58,029 --> 00:11:02,019
button you need to implement that such

306
00:11:00,519 --> 00:11:03,579
that when three people are owning the

307
00:11:02,019 --> 00:11:04,990
same box and somebody does something

308
00:11:03,579 --> 00:11:06,878
dickish and their root and then they

309
00:11:04,990 --> 00:11:08,769
make it not solvable anymore you can be

310
00:11:06,879 --> 00:11:10,600
like well no restart and now it's

311
00:11:08,769 --> 00:11:12,250
solvable again and that solves the

312
00:11:10,600 --> 00:11:15,430
problem of this multi and multiplayer

313
00:11:12,250 --> 00:11:17,889
environment model you also if you want

314
00:11:15,430 --> 00:11:20,349
to track progress but not in a way that

315
00:11:17,889 --> 00:11:22,000
you you can sure it is competitive you

316
00:11:20,350 --> 00:11:23,740
need some sort of leaderboard

317
00:11:22,000 --> 00:11:25,540
I really like using C T FD for that

318
00:11:23,740 --> 00:11:29,110
which is also what the CTF here is using

319
00:11:25,540 --> 00:11:31,480
this year so I have source code for this

320
00:11:29,110 --> 00:11:33,580
it's going to be published shortly after

321
00:11:31,480 --> 00:11:35,260
besides I'm still waiting on open source

322
00:11:33,580 --> 00:11:36,730
approval but it'll be at this github

323
00:11:35,260 --> 00:11:40,060
link and I'll tweet it out if you follow

324
00:11:36,730 --> 00:11:42,330
me on Twitter so as far as playing

325
00:11:40,060 --> 00:11:44,829
building and deploying challenges go

326
00:11:42,330 --> 00:11:46,600
participating in CTF and I've talked to

327
00:11:44,830 --> 00:11:48,990
a lot of people at this conference in

328
00:11:46,600 --> 00:11:52,480
the past and at other conferences where

329
00:11:48,990 --> 00:11:55,060
it's discouraging you see people at Def

330
00:11:52,480 --> 00:11:56,740
Con playing in the CTF room and it's a

331
00:11:55,060 --> 00:11:59,319
bunch of you know really smart people

332
00:11:56,740 --> 00:12:00,940
that have been doing this for years that

333
00:11:59,320 --> 00:12:03,880
are writing the tools that you use to

334
00:12:00,940 --> 00:12:06,370
solve CTF challenges and it's you know

335
00:12:03,880 --> 00:12:07,990
it's there is a barrier to entry such

336
00:12:06,370 --> 00:12:10,090
that people that don't necessarily have

337
00:12:07,990 --> 00:12:12,460
these skills are intimidated by it but

338
00:12:10,090 --> 00:12:14,290
really just do it there's a lot of

339
00:12:12,460 --> 00:12:15,970
really excellent babies first challenges

340
00:12:14,290 --> 00:12:18,969
like if you've never exploited a buffer

341
00:12:15,970 --> 00:12:21,160
overflow before there's especially an AR

342
00:12:18,970 --> 00:12:24,280
CTF even you can go through and read

343
00:12:21,160 --> 00:12:25,900
Alif ones paper understand how it works

344
00:12:24,280 --> 00:12:28,930
and then land that exploit on our

345
00:12:25,900 --> 00:12:31,030
leaderboard and get a flag the whole

346
00:12:28,930 --> 00:12:34,060
notion of every CTF having this barrier

347
00:12:31,030 --> 00:12:36,160
to entry I think is per cuted in the in

348
00:12:34,060 --> 00:12:38,469
the community is oh yeah people that

349
00:12:36,160 --> 00:12:40,000
place ETF's are really good or they're

350
00:12:38,470 --> 00:12:41,589
the challenges are really hard it

351
00:12:40,000 --> 00:12:43,390
doesn't need to be that way and I feel

352
00:12:41,589 --> 00:12:45,670
b-sides is a really good environment to

353
00:12:43,390 --> 00:12:48,220
have more intermediate and amateur

354
00:12:45,670 --> 00:12:50,020
challenges that target beginners and not

355
00:12:48,220 --> 00:12:52,750
just people that are you know super lead

356
00:12:50,020 --> 00:12:55,329
at DEFCON CTF with that said it is a

357
00:12:52,750 --> 00:12:57,250
good idea as a challenge organizer to

358
00:12:55,330 --> 00:12:59,410
have challenges that are going to be

359
00:12:57,250 --> 00:13:01,780
hard and unsolvable such as this year

360
00:12:59,410 --> 00:13:03,969
pwned 400 I'm going to talk about this

361
00:13:01,780 --> 00:13:07,180
in another slide with the notion of open

362
00:13:03,970 --> 00:13:08,740
sourcing CTF pwned 400 is not solvable

363
00:13:07,180 --> 00:13:10,630
in the way I intended it to be when I

364
00:13:08,740 --> 00:13:12,370
wrote it and as I was writing it I

365
00:13:10,630 --> 00:13:14,890
started thinking well it's a 400 level

366
00:13:12,370 --> 00:13:16,450
challenge people can solve the first

367
00:13:14,890 --> 00:13:18,339
three and then get stuck on the fourth

368
00:13:16,450 --> 00:13:19,630
and that's fine with the way that I'm

369
00:13:18,339 --> 00:13:21,670
doing it and where I'm going to publish

370
00:13:19,630 --> 00:13:23,830
a solution in source code you can go see

371
00:13:21,670 --> 00:13:26,199
and learn from that in a CTF that you

372
00:13:23,830 --> 00:13:28,930
participated in which I think has great

373
00:13:26,200 --> 00:13:30,070
value there's also some resources here

374
00:13:28,930 --> 00:13:31,989
where you can read trail of bits

375
00:13:30,070 --> 00:13:34,180
actually does a fantastic job of getting

376
00:13:31,990 --> 00:13:35,710
people stoked on CTF and giving you very

377
00:13:34,180 --> 00:13:38,140
bare-bones

378
00:13:35,710 --> 00:13:39,280
here's how you get started and I highly

379
00:13:38,140 --> 00:13:41,770
recommend reading those and that's how I

380
00:13:39,280 --> 00:13:43,480
got started I mean quite frankly I'm not

381
00:13:41,770 --> 00:13:46,630
that great at exploitation but I really

382
00:13:43,480 --> 00:13:48,840
like writing and playing CTF so there's

383
00:13:46,630 --> 00:13:51,340
lots of resources out there for you and

384
00:13:48,840 --> 00:13:53,320
that's really where creating comes in a

385
00:13:51,340 --> 00:13:55,300
lot of people think oh the people

386
00:13:53,320 --> 00:13:56,980
writing CTFs must be good developers

387
00:13:55,300 --> 00:13:59,079
because they have all of these concepts

388
00:13:56,980 --> 00:14:01,300
of how the CTF is solvable and it can

389
00:13:59,080 --> 00:14:01,960
only be solvable in one way and that's

390
00:14:01,300 --> 00:14:04,120
not true

391
00:14:01,960 --> 00:14:06,220
I'm a terrible developer I do security

392
00:14:04,120 --> 00:14:07,720
and red teaming I don't know how you

393
00:14:06,220 --> 00:14:09,400
know a lot of intricacies of a lot of

394
00:14:07,720 --> 00:14:10,900
programming languages work but the

395
00:14:09,400 --> 00:14:13,270
intention is your code needs to be

396
00:14:10,900 --> 00:14:14,590
intentionally vulnerable and even if

397
00:14:13,270 --> 00:14:16,420
it's not vulnerable in the way you and

398
00:14:14,590 --> 00:14:18,580
originally intended in your concept

399
00:14:16,420 --> 00:14:19,870
that's still okay because at the end of

400
00:14:18,580 --> 00:14:21,820
the day if somebody can land an

401
00:14:19,870 --> 00:14:23,770
exploitation primitive on your service

402
00:14:21,820 --> 00:14:25,990
or on your binary and they're able to

403
00:14:23,770 --> 00:14:27,960
actually solve it in a constructive way

404
00:14:25,990 --> 00:14:30,430
that's totally fine

405
00:14:27,960 --> 00:14:32,200
the way I started doing this was just by

406
00:14:30,430 --> 00:14:33,579
writing challenges and sending them to

407
00:14:32,200 --> 00:14:35,320
friends and saying oh can you solve this

408
00:14:33,580 --> 00:14:36,790
this is how I kind of think it goes and

409
00:14:35,320 --> 00:14:38,290
then they'd come back and be like oh no

410
00:14:36,790 --> 00:14:39,550
you're an idiot it's solvable in a

411
00:14:38,290 --> 00:14:40,780
totally other way and it's like okay

412
00:14:39,550 --> 00:14:42,400
that's fine and then you learn and you

413
00:14:40,780 --> 00:14:45,850
keep progressing through actually being

414
00:14:42,400 --> 00:14:48,010
able to write these one thing that

415
00:14:45,850 --> 00:14:49,960
hasn't necessarily been done and this is

416
00:14:48,010 --> 00:14:51,910
something that when I was at Def Con I

417
00:14:49,960 --> 00:14:54,190
met up with the challenge organizers for

418
00:14:51,910 --> 00:14:56,079
besides San Francisco where I really

419
00:14:54,190 --> 00:14:59,260
model a lot of what I did this year on

420
00:14:56,080 --> 00:15:01,420
the b-sides PDX CTF is the content

421
00:14:59,260 --> 00:15:04,000
creators aren't open sourcing or

422
00:15:01,420 --> 00:15:05,589
showcasing the concepts and the the work

423
00:15:04,000 --> 00:15:07,870
of how their CTF worked

424
00:15:05,590 --> 00:15:10,210
there's write-ups aplenty and you can go

425
00:15:07,870 --> 00:15:11,650
you know Google whatever CTF imaginable

426
00:15:10,210 --> 00:15:15,340
and people are writing up how to solve

427
00:15:11,650 --> 00:15:17,680
this the challenges more times than not

428
00:15:15,340 --> 00:15:19,240
the challenge organisers do not publish

429
00:15:17,680 --> 00:15:20,739
anything about how their infrastructure

430
00:15:19,240 --> 00:15:22,870
worked or about how their source code

431
00:15:20,740 --> 00:15:24,520
looked or about what the concepts behind

432
00:15:22,870 --> 00:15:26,290
before they even wrote the source code

433
00:15:24,520 --> 00:15:28,480
and what their intentions were and I

434
00:15:26,290 --> 00:15:30,610
think that's not good for moving the

435
00:15:28,480 --> 00:15:33,580
community forward in building CTF that

436
00:15:30,610 --> 00:15:35,230
do have this educational perspective and

437
00:15:33,580 --> 00:15:39,250
I'm looking to change that with the way

438
00:15:35,230 --> 00:15:41,620
we're doing it this year so I really

439
00:15:39,250 --> 00:15:44,320
want to see as far as creating CTFs go

440
00:15:41,620 --> 00:15:47,800
to open source challenges show concepts

441
00:15:44,320 --> 00:15:48,940
show solutions so you know and this is a

442
00:15:47,800 --> 00:15:50,199
problem that we ran into this you

443
00:15:48,940 --> 00:15:51,520
to where we didn't have time to make

444
00:15:50,200 --> 00:15:52,990
sure that every challenge was solvable

445
00:15:51,520 --> 00:15:55,750
which is where we're in the problem with

446
00:15:52,990 --> 00:15:57,880
cone 400 but if you publish the

447
00:15:55,750 --> 00:15:59,410
solutions and you prove with your team

448
00:15:57,880 --> 00:16:03,280
that they're solvable challenges that

449
00:15:59,410 --> 00:16:05,410
really moves the event forward so I mean

450
00:16:03,280 --> 00:16:08,050
really as far as creating goes the first

451
00:16:05,410 --> 00:16:10,180
step is get involved people that are

452
00:16:08,050 --> 00:16:11,800
organizing these things aren't they're

453
00:16:10,180 --> 00:16:13,750
not gonna be mad at you for wanting to

454
00:16:11,800 --> 00:16:15,130
learn or to want to get involved it's

455
00:16:13,750 --> 00:16:17,260
open and it's super awesome and

456
00:16:15,130 --> 00:16:18,810
appreciated so if you're interested in

457
00:16:17,260 --> 00:16:21,010
creating come up and talk to me or any

458
00:16:18,810 --> 00:16:23,560
organizers that helped out this year or

459
00:16:21,010 --> 00:16:25,420
at other besides or others CTFs and

460
00:16:23,560 --> 00:16:26,680
mention that hey have this idea for a

461
00:16:25,420 --> 00:16:28,449
challenge I'd like to implement it for

462
00:16:26,680 --> 00:16:31,719
your CTF and that would be totally

463
00:16:28,450 --> 00:16:33,280
awesome like I said I'm gonna open

464
00:16:31,720 --> 00:16:35,890
source the CTF as well and I'll tweet

465
00:16:33,280 --> 00:16:37,689
that out the CTF ends at 4:30 right but

466
00:16:35,890 --> 00:16:39,130
right before closing ceremonies and I'm

467
00:16:37,690 --> 00:16:41,320
gonna get push it pretty much right a

468
00:16:39,130 --> 00:16:42,550
ceremony start and you can start viewing

469
00:16:41,320 --> 00:16:46,180
the source of how the challenge has

470
00:16:42,550 --> 00:16:47,829
worked so as far as infrastructure in

471
00:16:46,180 --> 00:16:50,109
hosting goes this is really the most

472
00:16:47,830 --> 00:16:54,190
painful part of CTF and this could be a

473
00:16:50,110 --> 00:16:57,190
talk in like in itself the first CTF are

474
00:16:54,190 --> 00:17:00,460
really organized I did it in in VMs and

475
00:16:57,190 --> 00:17:01,750
I gave people you know dovey A's and I

476
00:17:00,460 --> 00:17:03,280
was I was talking to a guy that's like

477
00:17:01,750 --> 00:17:04,660
oh yeah I've solved all I solved all of

478
00:17:03,280 --> 00:17:06,459
your challenges and I'm like oh great

479
00:17:04,660 --> 00:17:08,140
how did you get the flags oh you know I

480
00:17:06,459 --> 00:17:14,079
boot it into single user mode as a root

481
00:17:08,140 --> 00:17:16,300
and catted flag it's like oh so you know

482
00:17:14,079 --> 00:17:17,829
yeah if you want to cheat that's that's

483
00:17:16,300 --> 00:17:19,540
your that's you know you're not gonna

484
00:17:17,829 --> 00:17:21,280
learn the way that it was intended but

485
00:17:19,540 --> 00:17:22,629
also by giving people the opportunity to

486
00:17:21,280 --> 00:17:25,389
that to think Oh

487
00:17:22,630 --> 00:17:28,420
vn single user mode that kinda is

488
00:17:25,390 --> 00:17:30,940
defeating the intention of it so moving

489
00:17:28,420 --> 00:17:33,430
beyond that I ran a CTF where I was

490
00:17:30,940 --> 00:17:35,050
giving people I see a true to them I was

491
00:17:33,430 --> 00:17:36,400
running everything in docker but I

492
00:17:35,050 --> 00:17:38,889
didn't yet know how like kubernetes

493
00:17:36,400 --> 00:17:40,030
worked so I gave people an SSH key they

494
00:17:38,890 --> 00:17:41,770
logged in and then they ran docker

495
00:17:40,030 --> 00:17:43,030
commands that I was allowing them to run

496
00:17:41,770 --> 00:17:44,020
and somebody broke out of it and it's

497
00:17:43,030 --> 00:17:45,970
like oh I probably shouldn't have done

498
00:17:44,020 --> 00:17:48,220
that either

499
00:17:45,970 --> 00:17:49,930
so now moving you know to where we ran

500
00:17:48,220 --> 00:17:52,270
this year and last year CTF it's all

501
00:17:49,930 --> 00:17:54,340
hosted in kubernetes in a secure way and

502
00:17:52,270 --> 00:17:56,500
if you caught the b-sides PDX 101 talk

503
00:17:54,340 --> 00:17:58,360
Yussef from Mozilla talked about how

504
00:17:56,500 --> 00:18:00,040
that infrastructure was ran which is

505
00:17:58,360 --> 00:18:02,909
also going to be open source and will be

506
00:18:00,040 --> 00:18:02,909
linked to in our repo

507
00:18:03,310 --> 00:18:07,030
with infrastructure and with creating

508
00:18:05,470 --> 00:18:09,490
CTF challenges as well

509
00:18:07,030 --> 00:18:10,300
there are organizers that are open to

510
00:18:09,490 --> 00:18:13,000
talk about it

511
00:18:10,300 --> 00:18:14,909
so one thing with legit bs running CTF

512
00:18:13,000 --> 00:18:17,400
for the last several years at DEFCON

513
00:18:14,910 --> 00:18:20,170
veto now that they've stepped down after

514
00:18:17,400 --> 00:18:22,390
DEFCON twenty-fives has been blogging

515
00:18:20,170 --> 00:18:24,760
about how their team communicated and

516
00:18:22,390 --> 00:18:27,160
how they built and orchestrated CTFs as

517
00:18:24,760 --> 00:18:30,010
a team and it's been really valuable to

518
00:18:27,160 --> 00:18:31,510
see from the perspective of being a CTF

519
00:18:30,010 --> 00:18:33,340
organizer that didn't necessarily have

520
00:18:31,510 --> 00:18:36,520
the resources that we needed this year

521
00:18:33,340 --> 00:18:39,760
it was me and this this guy Eric who's

522
00:18:36,520 --> 00:18:41,200
sitting in the CTF room as well we wrote

523
00:18:39,760 --> 00:18:43,090
all of the challenges with somewhat of a

524
00:18:41,200 --> 00:18:43,990
constricted time frame and there were

525
00:18:43,090 --> 00:18:47,080
things that we could have done

526
00:18:43,990 --> 00:18:48,880
tremendously better and it really

527
00:18:47,080 --> 00:18:50,919
because of the help of Mozilla for our

528
00:18:48,880 --> 00:18:52,480
infrastructure if that wasn't the case

529
00:18:50,920 --> 00:18:53,800
we would have had an infrastructure that

530
00:18:52,480 --> 00:18:56,530
was lackluster and that could have been

531
00:18:53,800 --> 00:18:58,030
easily pwned because kubernetes they're

532
00:18:56,530 --> 00:19:01,870
you know it's really easy to default

533
00:18:58,030 --> 00:19:06,250
queue brunet ease to being suck so we're

534
00:19:01,870 --> 00:19:08,469
fortunate for that with that said this

535
00:19:06,250 --> 00:19:12,160
hacker moon a hacker noon article is

536
00:19:08,470 --> 00:19:13,960
from besides SF like I said I kind of

537
00:19:12,160 --> 00:19:15,370
modeled this after there is because they

538
00:19:13,960 --> 00:19:16,930
were the first ones I really saw that

539
00:19:15,370 --> 00:19:19,659
open sourced all challenges all

540
00:19:16,930 --> 00:19:22,840
solutions and all infrastructure so I I

541
00:19:19,660 --> 00:19:25,120
took that as a huge inspiration and they

542
00:19:22,840 --> 00:19:26,320
did this whole walkthrough of how when

543
00:19:25,120 --> 00:19:30,040
they were going through and running

544
00:19:26,320 --> 00:19:31,720
kubernetes with their CTF somebody pwned

545
00:19:30,040 --> 00:19:33,570
the infrastructure live but was

546
00:19:31,720 --> 00:19:36,910
gracefully enough to tell them about it

547
00:19:33,570 --> 00:19:38,470
but like anything see TFS do kind of

548
00:19:36,910 --> 00:19:40,270
need an attack model to be done to them

549
00:19:38,470 --> 00:19:42,400
what are we giving to the competitors if

550
00:19:40,270 --> 00:19:45,100
they were able to break out of the

551
00:19:42,400 --> 00:19:47,230
cluster what secrets are we leaking to

552
00:19:45,100 --> 00:19:48,610
them are there creds that AWS might

553
00:19:47,230 --> 00:19:50,800
still have in the cluster that now you

554
00:19:48,610 --> 00:19:52,389
can you know start mining Bitcoin so you

555
00:19:50,800 --> 00:19:54,070
really need to think about all of these

556
00:19:52,390 --> 00:19:56,500
intricate problems of the

557
00:19:54,070 --> 00:19:57,129
infrastructural standpoint that might

558
00:19:56,500 --> 00:19:59,470
get in your way

559
00:19:57,130 --> 00:20:01,210
don't let that be a discouragement like

560
00:19:59,470 --> 00:20:03,790
I said we're we're gonna open source the

561
00:20:01,210 --> 00:20:05,740
infra so you have at least a base

562
00:20:03,790 --> 00:20:10,450
reference to go off of which is the

563
00:20:05,740 --> 00:20:12,430
intention here so with that I encourage

564
00:20:10,450 --> 00:20:14,080
everybody to play CTF we are in the

565
00:20:12,430 --> 00:20:16,150
second day and it is going to be ending

566
00:20:14,080 --> 00:20:17,740
at 4:30 but that's not

567
00:20:16,150 --> 00:20:20,500
that you can't come in and solve you

568
00:20:17,740 --> 00:20:22,780
know some of the 100 level challenges

569
00:20:20,500 --> 00:20:24,640
that are relatively amateur and if

570
00:20:22,780 --> 00:20:26,440
you're stuck on something I can direct

571
00:20:24,640 --> 00:20:27,730
you to a blog post that you can read and

572
00:20:26,440 --> 00:20:30,040
then solve the challenge and cut your

573
00:20:27,730 --> 00:20:31,780
first flag and you know have besides PDX

574
00:20:30,040 --> 00:20:34,450
ETF be the first time you ever scored a

575
00:20:31,780 --> 00:20:35,920
flag which that's happened so far and

576
00:20:34,450 --> 00:20:39,790
it's really awesome and empowering to

577
00:20:35,920 --> 00:20:41,620
see so yeah come come to the event room

578
00:20:39,790 --> 00:20:44,200
play help us organize next year's I

579
00:20:41,620 --> 00:20:46,300
would love to build you know a core

580
00:20:44,200 --> 00:20:48,790
organization team for the CTF to get it

581
00:20:46,300 --> 00:20:53,200
even bigger with more capacity and more

582
00:20:48,790 --> 00:20:55,450
challenges to showcase so the kind of

583
00:20:53,200 --> 00:20:58,900
conclusion that and I want you to drive

584
00:20:55,450 --> 00:21:01,690
away from this is you can as an

585
00:20:58,900 --> 00:21:03,460
offensive security practitioner really

586
00:21:01,690 --> 00:21:04,960
instill knowledge and the defenders in

587
00:21:03,460 --> 00:21:06,910
order to get them were excited about

588
00:21:04,960 --> 00:21:09,880
catching you we're more excited about

589
00:21:06,910 --> 00:21:11,290
actually understanding the intricacies

590
00:21:09,880 --> 00:21:12,910
of how the tools they're catching work

591
00:21:11,290 --> 00:21:15,970
and why they're working or why they're

592
00:21:12,910 --> 00:21:17,440
being operated with CTF is also a really

593
00:21:15,970 --> 00:21:20,680
good way to challenge yourself and grow

594
00:21:17,440 --> 00:21:22,330
skills in this domain I encourage you to

595
00:21:20,680 --> 00:21:24,010
deploy shooting-gallery in your

596
00:21:22,330 --> 00:21:27,250
organization to have this you know

597
00:21:24,010 --> 00:21:29,320
self-contained resource within within in

598
00:21:27,250 --> 00:21:32,680
order to train and mentor individuals

599
00:21:29,320 --> 00:21:34,870
and really just go for go forth and hack

600
00:21:32,680 --> 00:21:36,940
the blank deployment scripts are all

601
00:21:34,870 --> 00:21:39,219
gonna be on github I'm gonna tweet the

602
00:21:36,940 --> 00:21:41,320
link out CTF is going to be open source

603
00:21:39,220 --> 00:21:44,890
right as the conference ends when we

604
00:21:41,320 --> 00:21:46,149
give our prizes during closing so there

605
00:21:44,890 --> 00:21:48,730
are people I need to thank

606
00:21:46,150 --> 00:21:50,590
so CTF would not have been possible this

607
00:21:48,730 --> 00:21:53,920
year without the awesome team backing me

608
00:21:50,590 --> 00:21:56,649
so I had pwned P&W helped me with all

609
00:21:53,920 --> 00:21:58,480
the challenges and then Yusuf and Andrew

610
00:21:56,650 --> 00:22:00,250
helped me out from Mozilla on doing all

611
00:21:58,480 --> 00:22:03,280
of the kubernetes security I needed for

612
00:22:00,250 --> 00:22:04,780
the infrastructure so that's it if

613
00:22:03,280 --> 00:22:09,330
there's questions I'd love to take them

614
00:22:04,780 --> 00:22:09,330
I have like a couple of minutes left

615
00:22:18,600 --> 00:22:20,659
you

