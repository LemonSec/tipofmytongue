1
00:00:08,900 --> 00:00:16,020
the first speaker<font color="#E5E5E5"> is from</font><font color="#CCCCCC"> fastly Lorenzo</font>

2
00:00:13,019 --> 00:00:18,119
<font color="#CCCCCC">say no and his</font><font color="#E5E5E5"> topic is hashing on</font>

3
00:00:16,020 --> 00:00:24,719
<font color="#E5E5E5">Brooklyn's assumptions please welcome</font>

4
00:00:18,119 --> 00:00:26,579
him thank you<font color="#CCCCCC"> very</font><font color="#E5E5E5"> much</font><font color="#CCCCCC"> my</font><font color="#E5E5E5"> name is</font>

5
00:00:24,719 --> 00:00:28,800
Lorenzo Serena I'm a software engineer

6
00:00:26,579 --> 00:00:31,739
fastly<font color="#E5E5E5"> and I talk that I will give to</font>

7
00:00:28,800 --> 00:00:34,260
you<font color="#CCCCCC"> today is about floor level hashing</font>

8
00:00:31,739 --> 00:00:36,680
and in particular is about<font color="#E5E5E5"> assumptions</font>

9
00:00:34,260 --> 00:00:39,000
on which<font color="#E5E5E5"> pro level hashing real-life</font>

10
00:00:36,680 --> 00:00:41,010
situations in which<font color="#CCCCCC"> this assumption</font>

11
00:00:39,000 --> 00:00:43,620
breaks and the consequences when this

12
00:00:41,010 --> 00:00:45,660
happens so before jumping directly

13
00:00:43,620 --> 00:00:47,519
<font color="#CCCCCC">straight into the pro level hashing</font>

14
00:00:45,660 --> 00:00:49,078
<font color="#E5E5E5">let's try to understand what is the</font>

15
00:00:47,520 --> 00:00:51,329
<font color="#E5E5E5">problem we're trying to solve with</font><font color="#CCCCCC"> Prada</font>

16
00:00:49,079 --> 00:00:53,700
<font color="#CCCCCC">rushing</font><font color="#E5E5E5"> well the problem is that we want</font>

17
00:00:51,329 --> 00:00:56,220
<font color="#CCCCCC">to spread traffic across</font><font color="#E5E5E5"> a multitude</font><font color="#CCCCCC"> of</font>

18
00:00:53,700 --> 00:00:58,380
natural<font color="#E5E5E5"> resources such as</font><font color="#CCCCCC"> path links and</font>

19
00:00:56,220 --> 00:01:00,210
<font color="#CCCCCC">hosts and the</font><font color="#E5E5E5"> radio wide variety of</font>

20
00:00:58,380 --> 00:01:02,489
solutions<font color="#E5E5E5"> products in this problem</font><font color="#CCCCCC"> such</font>

21
00:01:00,210 --> 00:01:05,309
as<font color="#CCCCCC"> link aggregation in equal cost multi</font>

22
00:01:02,489 --> 00:01:07,590
path link aggregation for example is a

23
00:01:05,309 --> 00:01:10,649
technique<font color="#CCCCCC"> that allows us to combine</font>

24
00:01:07,590 --> 00:01:13,260
<font color="#E5E5E5">multiple physical links</font><font color="#CCCCCC"> between adjacent</font>

25
00:01:10,649 --> 00:01:15,360
<font color="#E5E5E5">network devices into one single</font><font color="#CCCCCC"> logical</font>

26
00:01:13,260 --> 00:01:17,490
link<font color="#E5E5E5"> so for example let's say that</font><font color="#CCCCCC"> we</font>

27
00:01:15,360 --> 00:01:20,039
are two switches<font color="#E5E5E5"> and for</font><font color="#CCCCCC"> convenience or</font>

28
00:01:17,490 --> 00:01:22,649
capacity purposes we want<font color="#E5E5E5"> to connecting</font>

29
00:01:20,040 --> 00:01:24,119
with multiple physical<font color="#E5E5E5"> links well link</font>

30
00:01:22,650 --> 00:01:26,580
aggregation give us the capability to

31
00:01:24,119 --> 00:01:29,310
abstract these physical links into one

32
00:01:26,580 --> 00:01:32,340
single logical links which can<font color="#E5E5E5"> then get</font>

33
00:01:29,310 --> 00:01:34,049
<font color="#CCCCCC">shorted to the</font><font color="#E5E5E5"> other layer equal code</font>

34
00:01:32,340 --> 00:01:35,670
<font color="#CCCCCC">Kosmos new multi path is another</font>

35
00:01:34,049 --> 00:01:39,420
technique<font color="#E5E5E5"> that we can use</font><font color="#CCCCCC"> to spread</font>

36
00:01:35,670 --> 00:01:41,610
traffic across<font color="#E5E5E5"> path links and and host</font>

37
00:01:39,420 --> 00:01:44,040
and normally allows network devices

38
00:01:41,610 --> 00:01:46,200
which<font color="#CCCCCC"> are got multiple routes to a given</font>

39
00:01:44,040 --> 00:01:48,000
<font color="#CCCCCC">destination</font><font color="#E5E5E5"> with the same cost to</font>

40
00:01:46,200 --> 00:01:50,430
equally spread traffic across these

41
00:01:48,000 --> 00:01:52,080
different<font color="#CCCCCC"> routes equal cost multi path</font>

42
00:01:50,430 --> 00:01:54,750
is used normally<font color="#E5E5E5"> in two</font><font color="#CCCCCC"> main use cases</font>

43
00:01:52,080 --> 00:01:56,700
<font color="#E5E5E5">the first use case is to spread balanced</font>

44
00:01:54,750 --> 00:01:58,259
traffic across<font color="#E5E5E5"> paths say we go to</font>

45
00:01:56,700 --> 00:02:01,140
<font color="#CCCCCC">endpoint with different</font><font color="#E5E5E5"> paths across</font>

46
00:01:58,259 --> 00:02:02,610
<font color="#E5E5E5">them we can use</font><font color="#CCCCCC"> the CMP</font><font color="#E5E5E5"> to spy traffic</font>

47
00:02:01,140 --> 00:02:04,979
across this different<font color="#CCCCCC"> path</font>

48
00:02:02,610 --> 00:02:07,170
it simply can also be used to<font color="#E5E5E5"> spread</font>

49
00:02:04,979 --> 00:02:08,939
traffic<font color="#E5E5E5"> across different</font><font color="#CCCCCC"> hosts</font><font color="#E5E5E5"> we can</font>

50
00:02:07,170 --> 00:02:12,090
have some set of any casted<font color="#E5E5E5"> hosts</font><font color="#CCCCCC"> and we</font>

51
00:02:08,939 --> 00:02:15,900
<font color="#CCCCCC">can route traffic</font><font color="#E5E5E5"> to any</font><font color="#CCCCCC"> resource using</font>

52
00:02:12,090 --> 00:02:18,239
<font color="#CCCCCC">SNP so all</font><font color="#E5E5E5"> these techniques that</font><font color="#CCCCCC"> allows</font>

53
00:02:15,900 --> 00:02:21,030
us<font color="#E5E5E5"> to spray traffic across devices and</font>

54
00:02:18,239 --> 00:02:21,840
<font color="#CCCCCC">deep natural</font><font color="#E5E5E5"> resources they need</font><font color="#CCCCCC"> to meet</font>

55
00:02:21,030 --> 00:02:24,150
<font color="#E5E5E5">to require</font>

56
00:02:21,840 --> 00:02:26,190
<font color="#CCCCCC">the first requirement is a load balance</font>

57
00:02:24,150 --> 00:02:30,540
requirement<font color="#E5E5E5"> that is to ensure</font><font color="#CCCCCC"> that all</font>

58
00:02:26,190 --> 00:02:31,950
these natural<font color="#CCCCCC"> resources so that the</font>

59
00:02:30,540 --> 00:02:34,109
traffic is uniformly spread across the

60
00:02:31,950 --> 00:02:35,940
<font color="#E5E5E5">resources and the secure requirements</font>

61
00:02:34,110 --> 00:02:37,830
what we could call<font color="#E5E5E5"> a stateless bus</font>

62
00:02:35,940 --> 00:02:40,590
<font color="#E5E5E5">ticket path painting that is to ensure</font>

63
00:02:37,830 --> 00:02:42,269
<font color="#CCCCCC">that</font><font color="#E5E5E5"> however</font><font color="#CCCCCC"> the traffic is allocated</font><font color="#E5E5E5"> we</font>

64
00:02:40,590 --> 00:02:44,730
need to make<font color="#CCCCCC"> sure</font><font color="#E5E5E5"> that all packets</font>

65
00:02:42,269 --> 00:02:47,250
belonging to the<font color="#E5E5E5"> same flow take exactly</font>

66
00:02:44,730 --> 00:02:49,738
<font color="#E5E5E5">the same path we</font><font color="#CCCCCC"> need</font><font color="#E5E5E5"> to do so without</font>

67
00:02:47,250 --> 00:02:53,010
<font color="#CCCCCC">requiring to maintain per flow state in</font>

68
00:02:49,739 --> 00:02:54,450
network devices<font color="#E5E5E5"> now after I stated this</font>

69
00:02:53,010 --> 00:02:56,010
<font color="#CCCCCC">requirement I would like</font><font color="#E5E5E5"> to spend some</font>

70
00:02:54,450 --> 00:02:57,630
<font color="#CCCCCC">minutes to convince</font><font color="#E5E5E5"> you why</font><font color="#CCCCCC"> these</font>

71
00:02:56,010 --> 00:02:59,340
requirements are important<font color="#E5E5E5"> and what are</font>

72
00:02:57,630 --> 00:03:01,410
the consequences<font color="#CCCCCC"> if these requirements</font>

73
00:02:59,340 --> 00:03:03,540
are<font color="#E5E5E5"> not met let's start with loading</font>

74
00:03:01,410 --> 00:03:05,390
balance<font color="#CCCCCC"> the main reason why we're</font>

75
00:03:03,540 --> 00:03:08,540
interested in load balancing is that

76
00:03:05,390 --> 00:03:10,768
loading balance<font color="#E5E5E5"> reduces system capacity</font>

77
00:03:08,540 --> 00:03:13,170
<font color="#CCCCCC">let me show this with a simple toy</font>

78
00:03:10,769 --> 00:03:14,880
<font color="#CCCCCC">example let's assume</font><font color="#E5E5E5"> that we got the set</font>

79
00:03:13,170 --> 00:03:17,700
of natural<font color="#E5E5E5"> resources which can be host</font>

80
00:03:14,880 --> 00:03:20,220
<font color="#CCCCCC">path and</font><font color="#E5E5E5"> link and let's assume that</font><font color="#CCCCCC"> we</font>

81
00:03:17,700 --> 00:03:22,319
can uniformly spread traffic<font color="#E5E5E5"> perfectly</font>

82
00:03:20,220 --> 00:03:24,299
across<font color="#CCCCCC"> the resources that's</font><font color="#E5E5E5"> what we have</font>

83
00:03:22,319 --> 00:03:27,179
we got traffic perfectly spread across

84
00:03:24,299 --> 00:03:29,370
resources if the load on these<font color="#E5E5E5"> resources</font>

85
00:03:27,180 --> 00:03:30,989
increases<font color="#E5E5E5"> we</font><font color="#CCCCCC"> can imagine</font><font color="#E5E5E5"> will increase</font>

86
00:03:29,370 --> 00:03:33,359
the traffic<font color="#E5E5E5"> on cross the resources and</font>

87
00:03:30,989 --> 00:03:36,180
fully use all the available<font color="#CCCCCC"> resources</font><font color="#E5E5E5"> in</font>

88
00:03:33,359 --> 00:03:38,310
our system but what happens if<font color="#E5E5E5"> we got</font>

89
00:03:36,180 --> 00:03:39,810
some degree<font color="#CCCCCC"> of load imbalance</font><font color="#E5E5E5"> when what</font>

90
00:03:38,310 --> 00:03:42,420
happens that<font color="#E5E5E5"> we can increase the load</font>

91
00:03:39,810 --> 00:03:44,910
<font color="#E5E5E5">only</font><font color="#CCCCCC"> up to the level where the most</font>

92
00:03:42,420 --> 00:03:46,858
loading resources<font color="#E5E5E5"> is fully loaded</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> up</font>

93
00:03:44,910 --> 00:03:48,720
to this level<font color="#CCCCCC"> we</font><font color="#E5E5E5"> cannot take any further</font>

94
00:03:46,859 --> 00:03:50,100
different traffic<font color="#E5E5E5"> because any different</font>

95
00:03:48,720 --> 00:03:52,230
traffic<font color="#E5E5E5"> will make the most of the</font>

96
00:03:50,100 --> 00:03:55,108
resource<font color="#E5E5E5"> overflow so we end up with a</font>

97
00:03:52,230 --> 00:03:57,030
bunch of unused<font color="#E5E5E5"> capacity over the</font><font color="#CCCCCC"> list</font>

98
00:03:55,109 --> 00:03:59,970
<font color="#E5E5E5">uses</font><font color="#CCCCCC"> resources which is a variant</font>

99
00:03:57,030 --> 00:04:02,280
desirable<font color="#E5E5E5"> situation we can</font><font color="#CCCCCC"> actually</font>

100
00:03:59,970 --> 00:04:04,709
<font color="#E5E5E5">quantify numerically what is the impact</font>

101
00:04:02,280 --> 00:04:08,489
the load imbalance has on<font color="#CCCCCC"> the</font><font color="#E5E5E5"> available</font>

102
00:04:04,709 --> 00:04:10,200
capacity and to<font color="#CCCCCC"> do so let's recall the</font>

103
00:04:08,489 --> 00:04:11,130
<font color="#E5E5E5">graph there so in the previous</font><font color="#CCCCCC"> slide</font>

104
00:04:10,200 --> 00:04:12,630
<font color="#CCCCCC">okay</font>

105
00:04:11,130 --> 00:04:16,529
let's hope you saw some very<font color="#E5E5E5"> simple</font>

106
00:04:12,630 --> 00:04:19,680
notation let's define<font color="#E5E5E5"> L max to be the</font>

107
00:04:16,529 --> 00:04:22,048
load on the<font color="#CCCCCC"> most all the</font><font color="#E5E5E5"> resources and</font>

108
00:04:19,680 --> 00:04:24,090
let's<font color="#CCCCCC"> define an average to be the load</font>

109
00:04:22,048 --> 00:04:25,429
<font color="#E5E5E5">the average load across all available</font>

110
00:04:24,090 --> 00:04:29,340
resources

111
00:04:25,430 --> 00:04:32,159
finally<font color="#CCCCCC"> let's define U max</font><font color="#E5E5E5"> to be the</font>

112
00:04:29,340 --> 00:04:33,250
maximal attainable utilization which is

113
00:04:32,159 --> 00:04:35,159
the maximum

114
00:04:33,250 --> 00:04:38,260
fraction of<font color="#CCCCCC"> the overall system capacity</font>

115
00:04:35,160 --> 00:04:41,080
<font color="#E5E5E5">which</font><font color="#CCCCCC"> we can use given a</font><font color="#E5E5E5"> certain load</font>

116
00:04:38,260 --> 00:04:43,599
imbalance<font color="#E5E5E5"> so this practically correspond</font>

117
00:04:41,080 --> 00:04:47,380
to the red area<font color="#CCCCCC"> is a fraction of</font><font color="#E5E5E5"> the</font>

118
00:04:43,600 --> 00:04:49,990
overall<font color="#E5E5E5"> system area clearly in an ideal</font>

119
00:04:47,380 --> 00:04:52,360
<font color="#E5E5E5">situation</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> must is equal to 1 that</font>

120
00:04:49,990 --> 00:04:55,000
<font color="#CCCCCC">means that</font><font color="#E5E5E5"> the overall capacity</font><font color="#CCCCCC"> of the</font>

121
00:04:52,360 --> 00:04:57,130
system<font color="#CCCCCC"> can be</font><font color="#E5E5E5"> used but there's loading</font>

122
00:04:55,000 --> 00:04:58,930
<font color="#CCCCCC">bars</font><font color="#E5E5E5"> increases the</font><font color="#CCCCCC"> maximal tinium</font>

123
00:04:57,130 --> 00:05:00,790
brutalization can decrease<font color="#CCCCCC"> they can get</font>

124
00:04:58,930 --> 00:05:04,420
close<font color="#CCCCCC"> to zero if you got a</font><font color="#E5E5E5"> very severe</font>

125
00:05:00,790 --> 00:05:06,520
degree<font color="#E5E5E5"> of loading</font><font color="#CCCCCC"> balance in</font><font color="#E5E5E5"> scientific</font>

126
00:05:04,420 --> 00:05:08,860
literature<font color="#CCCCCC"> loading balance is normally</font>

127
00:05:06,520 --> 00:05:11,049
quantified as the<font color="#CCCCCC"> ratio</font><font color="#E5E5E5"> between the most</font>

128
00:05:08,860 --> 00:05:13,780
<font color="#E5E5E5">loaded resource and the average load</font>

129
00:05:11,050 --> 00:05:15,910
over<font color="#CCCCCC"> the resources</font><font color="#E5E5E5"> again in the ideal</font>

130
00:05:13,780 --> 00:05:18,219
<font color="#CCCCCC">case of poor fellow balancing</font><font color="#E5E5E5"> across the</font>

131
00:05:15,910 --> 00:05:20,590
resources this fraction is equal to<font color="#CCCCCC"> 1</font>

132
00:05:18,220 --> 00:05:22,390
because<font color="#E5E5E5"> clearly the load on the most of</font>

133
00:05:20,590 --> 00:05:24,039
the<font color="#E5E5E5"> resources is also equal to the</font>

134
00:05:22,390 --> 00:05:27,099
<font color="#CCCCCC">average load across</font><font color="#E5E5E5"> the resources so the</font>

135
00:05:24,040 --> 00:05:28,630
fraction is equal<font color="#E5E5E5"> to 1 we can prove with</font>

136
00:05:27,100 --> 00:05:30,520
<font color="#E5E5E5">very simple back on the envelope</font>

137
00:05:28,630 --> 00:05:32,620
calculations<font color="#CCCCCC"> that there is a clear</font>

138
00:05:30,520 --> 00:05:34,990
<font color="#E5E5E5">simple relation between the maximal</font>

139
00:05:32,620 --> 00:05:37,000
attainable utilization<font color="#E5E5E5"> you max</font><font color="#CCCCCC"> and the</font>

140
00:05:34,990 --> 00:05:39,280
load imbalance<font color="#E5E5E5"> Express the ratio between</font>

141
00:05:37,000 --> 00:05:41,950
load<font color="#CCCCCC"> max</font><font color="#E5E5E5"> and no leverage in this</font>

142
00:05:39,280 --> 00:05:44,849
relation is<font color="#CCCCCC"> that u max is equal to the</font>

143
00:05:41,950 --> 00:05:47,050
inverse of<font color="#E5E5E5"> the load imbalance</font>

144
00:05:44,850 --> 00:05:50,200
<font color="#CCCCCC">representative ratio between load</font><font color="#E5E5E5"> max</font>

145
00:05:47,050 --> 00:05:52,240
<font color="#CCCCCC">and not average</font><font color="#E5E5E5"> it's not clear from</font><font color="#CCCCCC"> this</font>

146
00:05:50,200 --> 00:05:53,740
equation what the relationship<font color="#E5E5E5"> so let's</font>

147
00:05:52,240 --> 00:05:55,330
<font color="#E5E5E5">actually try</font><font color="#CCCCCC"> to plot</font><font color="#E5E5E5"> this in a graph to</font>

148
00:05:53,740 --> 00:05:59,320
try to understand<font color="#CCCCCC"> better what is this</font>

149
00:05:55,330 --> 00:06:01,120
relation in the x axis I plot the ratio

150
00:05:59,320 --> 00:06:03,700
between maximum<font color="#E5E5E5"> load and average load</font>

151
00:06:01,120 --> 00:06:06,880
which<font color="#E5E5E5"> is a quantification of a load</font>

152
00:06:03,700 --> 00:06:08,950
imbalance<font color="#CCCCCC"> well on the y axis I plot the</font>

153
00:06:06,880 --> 00:06:10,659
maximum<font color="#CCCCCC"> attained mutilation</font><font color="#E5E5E5"> which is the</font>

154
00:06:08,950 --> 00:06:13,810
maximum<font color="#CCCCCC"> fraction of available capacity</font>

155
00:06:10,660 --> 00:06:17,560
<font color="#CCCCCC">that we can use</font><font color="#E5E5E5"> now in the case of</font><font color="#CCCCCC"> ideal</font>

156
00:06:13,810 --> 00:06:19,660
load balance<font color="#E5E5E5"> L max over L average is</font>

157
00:06:17,560 --> 00:06:21,550
equal<font color="#CCCCCC"> to 1 in this case you can</font><font color="#E5E5E5"> fool</font>

158
00:06:19,660 --> 00:06:25,000
utilize<font color="#E5E5E5"> your resources because</font><font color="#CCCCCC"> u max is</font>

159
00:06:21,550 --> 00:06:27,070
<font color="#CCCCCC">equal to 1</font><font color="#E5E5E5"> however if the load imbalance</font>

160
00:06:25,000 --> 00:06:30,220
increase the maximum attainable

161
00:06:27,070 --> 00:06:32,830
<font color="#CCCCCC">transition rapidly decreases if we take</font>

162
00:06:30,220 --> 00:06:35,500
<font color="#E5E5E5">for</font><font color="#CCCCCC"> example the case of</font><font color="#E5E5E5"> the most</font><font color="#CCCCCC"> rugged</font>

163
00:06:32,830 --> 00:06:37,840
<font color="#E5E5E5">resources with</font><font color="#CCCCCC"> 50%</font><font color="#E5E5E5"> more load over</font>

164
00:06:35,500 --> 00:06:39,100
leveraged resource which as I will<font color="#CCCCCC"> show</font>

165
00:06:37,840 --> 00:06:41,349
later<font color="#CCCCCC"> in</font><font color="#E5E5E5"> the presentation is not quite</font>

166
00:06:39,100 --> 00:06:44,349
an<font color="#CCCCCC"> unusual case</font><font color="#E5E5E5"> we end up in a situation</font>

167
00:06:41,349 --> 00:06:46,300
<font color="#E5E5E5">where we lose</font><font color="#CCCCCC"> 33.3%</font><font color="#E5E5E5"> of all of our</font>

168
00:06:44,349 --> 00:06:47,070
available<font color="#E5E5E5"> capacity so immediately we go</font>

169
00:06:46,300 --> 00:06:50,040
to 200

170
00:06:47,070 --> 00:06:52,950
verse 66 servers are gone<font color="#E5E5E5"> as a result of</font>

171
00:06:50,040 --> 00:06:56,040
these loading balance which is<font color="#E5E5E5"> applied</font>

172
00:06:52,950 --> 00:06:57,659
to a severe problem<font color="#E5E5E5"> now hopefully</font><font color="#CCCCCC"> I</font>

173
00:06:56,040 --> 00:06:59,760
<font color="#E5E5E5">convinced you while load imbalance is a</font>

174
00:06:57,660 --> 00:07:01,620
load balancing is important<font color="#E5E5E5"> let me try</font>

175
00:06:59,760 --> 00:07:03,450
to<font color="#E5E5E5"> convince you why it is important to</font>

176
00:07:01,620 --> 00:07:05,760
pin packets belonging to the same<font color="#E5E5E5"> flow</font>

177
00:07:03,450 --> 00:07:08,280
to the same path so the consequences

178
00:07:05,760 --> 00:07:09,900
when we<font color="#E5E5E5"> don't have path thinning depend</font>

179
00:07:08,280 --> 00:07:13,020
on the kind of scenario<font color="#CCCCCC"> that we use</font>

180
00:07:09,900 --> 00:07:16,200
depends on<font color="#E5E5E5"> whether we</font><font color="#CCCCCC"> use</font><font color="#E5E5E5"> SMP or this</font>

181
00:07:13,020 --> 00:07:18,000
technology to distribute traffic<font color="#E5E5E5"> between</font>

182
00:07:16,200 --> 00:07:20,340
different paths<font color="#E5E5E5"> but within the</font><font color="#CCCCCC"> same</font>

183
00:07:18,000 --> 00:07:23,190
standpoint<font color="#CCCCCC"> all we use to speed traffic</font>

184
00:07:20,340 --> 00:07:26,400
<font color="#CCCCCC">across different point</font><font color="#E5E5E5"> so the first case</font>

185
00:07:23,190 --> 00:07:28,290
where we use<font color="#E5E5E5"> our techniques to balance</font>

186
00:07:26,400 --> 00:07:31,200
traffic across different paths<font color="#E5E5E5"> but</font>

187
00:07:28,290 --> 00:07:33,900
between<font color="#E5E5E5"> the same</font><font color="#CCCCCC"> end point</font><font color="#E5E5E5"> not pin in</font>

188
00:07:31,200 --> 00:07:36,539
packet to the same path<font color="#E5E5E5"> causes out of</font>

189
00:07:33,900 --> 00:07:38,580
<font color="#CCCCCC">order packet which</font><font color="#E5E5E5"> as a result</font><font color="#CCCCCC"> can be</font>

190
00:07:36,540 --> 00:07:41,130
interpreted<font color="#E5E5E5"> by TCP stacks the signal or</font>

191
00:07:38,580 --> 00:07:43,200
congestion<font color="#E5E5E5"> and will causes in</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> TCP</font>

192
00:07:41,130 --> 00:07:45,360
<font color="#E5E5E5">senders</font><font color="#CCCCCC"> to drop</font><font color="#E5E5E5"> repeatedly congestion</font>

193
00:07:43,200 --> 00:07:48,390
<font color="#E5E5E5">windows and they will cause a Putridity</font>

194
00:07:45,360 --> 00:07:50,580
<font color="#E5E5E5">CP performance clear the situation is</font>

195
00:07:48,390 --> 00:07:53,640
very undesirable<font color="#E5E5E5"> available the situation</font>

196
00:07:50,580 --> 00:07:55,229
is way worse<font color="#CCCCCC"> if we</font><font color="#E5E5E5"> the same we use we</font>

197
00:07:53,640 --> 00:07:57,539
want<font color="#E5E5E5"> to split traffic across different</font>

198
00:07:55,230 --> 00:07:59,430
<font color="#CCCCCC">endpoints in this case and not pinning</font>

199
00:07:57,540 --> 00:08:02,760
packets belonging to the<font color="#E5E5E5"> same flow to</font>

200
00:07:59,430 --> 00:08:05,640
the same path will cause<font color="#CCCCCC"> tcp rosette</font><font color="#E5E5E5"> let</font>

201
00:08:02,760 --> 00:08:07,349
me show you in a simple<font color="#E5E5E5"> example when the</font>

202
00:08:05,640 --> 00:08:10,050
superior<font color="#E5E5E5"> set can arise and what are the</font>

203
00:08:07,350 --> 00:08:11,550
<font color="#E5E5E5">consequences let's assume that the</font><font color="#CCCCCC"> host</font>

204
00:08:10,050 --> 00:08:13,500
on<font color="#E5E5E5"> the</font><font color="#CCCCCC"> left hand</font><font color="#E5E5E5"> side want to</font>

205
00:08:11,550 --> 00:08:15,660
communicate<font color="#CCCCCC"> with any of the two hosts</font><font color="#E5E5E5"> on</font>

206
00:08:13,500 --> 00:08:17,970
the<font color="#E5E5E5"> right hand</font><font color="#CCCCCC"> side and in the</font><font color="#E5E5E5"> middle we</font>

207
00:08:15,660 --> 00:08:19,590
go to router which has not pin<font color="#E5E5E5"> packet</font>

208
00:08:17,970 --> 00:08:21,900
belonging<font color="#CCCCCC"> to the same flow to the same</font>

209
00:08:19,590 --> 00:08:24,000
path<font color="#CCCCCC"> where the</font><font color="#E5E5E5"> host on the</font><font color="#CCCCCC"> left-hand</font>

210
00:08:21,900 --> 00:08:26,190
side<font color="#E5E5E5"> starts the TCP handshake on sending</font>

211
00:08:24,000 --> 00:08:28,500
<font color="#E5E5E5">us in they also will reply with</font><font color="#CCCCCC"> a seen</font>

212
00:08:26,190 --> 00:08:31,410
<font color="#E5E5E5">and an ACK then the host will send an</font>

213
00:08:28,500 --> 00:08:33,630
ACK which will be ready forwarded to a

214
00:08:31,410 --> 00:08:35,360
different host but now<font color="#CCCCCC"> the host</font><font color="#E5E5E5"> on the</font>

215
00:08:33,630 --> 00:08:37,679
bottom<font color="#E5E5E5"> does not have any socket</font>

216
00:08:35,360 --> 00:08:39,390
regarding<font color="#E5E5E5"> this connection so we send</font><font color="#CCCCCC"> the</font>

217
00:08:37,679 --> 00:08:41,309
<font color="#CCCCCC">reset back</font><font color="#E5E5E5"> and the flow will be</font>

218
00:08:39,390 --> 00:08:43,409
<font color="#CCCCCC">interrupted</font><font color="#E5E5E5"> and so the flow will</font><font color="#CCCCCC"> not be</font>

219
00:08:41,309 --> 00:08:44,969
able<font color="#E5E5E5"> to progress which is</font><font color="#CCCCCC"> a very</font>

220
00:08:43,409 --> 00:08:50,280
<font color="#E5E5E5">undesirable situation and would break</font>

221
00:08:44,970 --> 00:08:52,940
connections so there are two main

222
00:08:50,280 --> 00:08:56,990
<font color="#E5E5E5">requirements is a</font><font color="#CCCCCC"> discuss</font>

223
00:08:52,940 --> 00:08:58,910
not sure why<font color="#CCCCCC"> there's another line so</font>

224
00:08:56,990 --> 00:09:01,730
this<font color="#E5E5E5"> to</font><font color="#CCCCCC"> me requirements are not banners</font>

225
00:08:58,910 --> 00:09:05,209
and<font color="#CCCCCC"> path teaming</font><font color="#E5E5E5"> and there is the de</font>

226
00:09:01,730 --> 00:09:07,340
<font color="#E5E5E5">facto</font><font color="#CCCCCC"> standard solutions for addressing</font>

227
00:09:05,210 --> 00:09:10,430
this problem without requiring<font color="#CCCCCC"> flow</font>

228
00:09:07,340 --> 00:09:12,440
<font color="#CCCCCC">level state is a flow level hashing okay</font>

229
00:09:10,430 --> 00:09:14,329
so<font color="#CCCCCC"> further in hashing simply works as</font>

230
00:09:12,440 --> 00:09:17,060
for long let's assume that we<font color="#E5E5E5"> got an</font>

231
00:09:14,330 --> 00:09:19,570
input packet<font color="#E5E5E5"> okay</font>

232
00:09:17,060 --> 00:09:22,550
the deserve that is provided to a

233
00:09:19,570 --> 00:09:24,140
network devices<font color="#CCCCCC"> the natural device</font><font color="#E5E5E5"> will</font>

234
00:09:22,550 --> 00:09:26,089
read the fact table out to this packet

235
00:09:24,140 --> 00:09:28,300
and<font color="#E5E5E5"> will part and</font><font color="#CCCCCC"> will extract them</font>

236
00:09:26,090 --> 00:09:33,170
which are<font color="#CCCCCC"> source</font><font color="#E5E5E5"> and destination address</font>

237
00:09:28,300 --> 00:09:36,770
<font color="#E5E5E5">protocol Association port then it will</font>

238
00:09:33,170 --> 00:09:40,939
compute a<font color="#E5E5E5"> hash function on this fact</font>

239
00:09:36,770 --> 00:09:44,569
<font color="#CCCCCC">Apple and we compute a next all the test</font>

240
00:09:40,940 --> 00:09:48,770
is used to<font color="#CCCCCC"> forward traffic okay know</font>

241
00:09:44,570 --> 00:09:52,180
this<font color="#E5E5E5"> and flow level hashing relies is</font>

242
00:09:48,770 --> 00:09:55,880
predicated upon two assumptions<font color="#CCCCCC"> that</font>

243
00:09:52,180 --> 00:09:57,770
<font color="#CCCCCC">flowing based on the packet fight</font><font color="#E5E5E5"> Apple</font>

244
00:09:55,880 --> 00:10:00,350
will ensure a uniform spread of load

245
00:09:57,770 --> 00:10:02,180
across<font color="#CCCCCC"> net jobs</font><font color="#E5E5E5"> and at the hashing again</font>

246
00:10:00,350 --> 00:10:05,150
on this<font color="#E5E5E5"> fact Apple will ensure that</font>

247
00:10:02,180 --> 00:10:07,250
packet belong to the same flow<font color="#E5E5E5"> a pinned</font>

248
00:10:05,150 --> 00:10:09,170
on the<font color="#E5E5E5"> same path however we</font><font color="#CCCCCC"> should</font>

249
00:10:07,250 --> 00:10:12,380
<font color="#E5E5E5">question to these assumptions really</font>

250
00:10:09,170 --> 00:10:13,729
hold but we're<font color="#E5E5E5"> going to find out let's</font>

251
00:10:12,380 --> 00:10:15,470
<font color="#CCCCCC">start discussing the</font><font color="#E5E5E5"> first assumption</font>

252
00:10:13,730 --> 00:10:16,160
which is<font color="#CCCCCC"> the</font><font color="#E5E5E5"> load balance assumption</font>

253
00:10:15,470 --> 00:10:19,700
<font color="#E5E5E5">okay</font>

254
00:10:16,160 --> 00:10:21,530
so we assume<font color="#CCCCCC"> that hashing uniformly</font>

255
00:10:19,700 --> 00:10:25,370
spread traffic across next<font color="#CCCCCC"> stops let's</font>

256
00:10:21,530 --> 00:10:28,040
see if this happens so we<font color="#E5E5E5"> add fastly</font><font color="#CCCCCC"> a</font>

257
00:10:25,370 --> 00:10:31,040
been operating a<font color="#CCCCCC"> B news</font><font color="#E5E5E5"> D simply for</font>

258
00:10:28,040 --> 00:10:33,290
many years expensively<font color="#E5E5E5"> in a certain</font>

259
00:10:31,040 --> 00:10:34,520
point we incur in control situation when

260
00:10:33,290 --> 00:10:36,829
we found some occurrence of<font color="#CCCCCC"> load</font>

261
00:10:34,520 --> 00:10:38,750
<font color="#CCCCCC">imbalance</font><font color="#E5E5E5"> which seemed only to appear in</font>

262
00:10:36,830 --> 00:10:42,380
a<font color="#E5E5E5"> certain only using specific</font><font color="#CCCCCC"> network</font>

263
00:10:38,750 --> 00:10:45,140
devices<font color="#CCCCCC"> so</font><font color="#E5E5E5"> we wanted to experiment and</font>

264
00:10:42,380 --> 00:10:46,700
prove our conjecture<font color="#E5E5E5"> and we perform a</font>

265
00:10:45,140 --> 00:10:48,890
<font color="#E5E5E5">little experiment so we</font><font color="#CCCCCC"> use two</font>

266
00:10:46,700 --> 00:10:53,000
<font color="#CCCCCC">different network switches and</font><font color="#E5E5E5"> we set up</font>

267
00:10:48,890 --> 00:10:54,650
each of these witches to have 256 next

268
00:10:53,000 --> 00:10:57,500
<font color="#CCCCCC">stop so we set it</font><font color="#E5E5E5"> up with a route which</font>

269
00:10:54,650 --> 00:10:59,840
<font color="#E5E5E5">one the 56 and stops then we submit we</font>

270
00:10:57,500 --> 00:11:02,390
some<font color="#CCCCCC"> sent</font><font color="#E5E5E5"> to this router a</font><font color="#CCCCCC"> combination</font>

271
00:10:59,840 --> 00:11:05,060
of<font color="#E5E5E5"> values in packet with different fact</font>

272
00:11:02,390 --> 00:11:06,300
apple and then counted how many of<font color="#E5E5E5"> this</font>

273
00:11:05,060 --> 00:11:08,609
packet<font color="#E5E5E5"> ended up to</font>

274
00:11:06,300 --> 00:11:10,410
<font color="#E5E5E5">to these next stops I'm</font><font color="#CCCCCC"> now</font><font color="#E5E5E5"> going</font><font color="#CCCCCC"> to</font>

275
00:11:08,610 --> 00:11:13,710
<font color="#E5E5E5">show</font><font color="#CCCCCC"> you in this graph there is after we</font>

276
00:11:10,410 --> 00:11:16,530
<font color="#CCCCCC">got on the</font><font color="#E5E5E5"> x-axis</font><font color="#CCCCCC"> I show the next top</font>

277
00:11:13,710 --> 00:11:19,980
<font color="#E5E5E5">rank which is the next stop</font><font color="#CCCCCC"> rank for in</font>

278
00:11:16,530 --> 00:11:21,990
increasing order of packet received<font color="#E5E5E5"> so</font>

279
00:11:19,980 --> 00:11:23,400
the leftmost next stop is<font color="#E5E5E5"> the one they</font>

280
00:11:21,990 --> 00:11:24,810
<font color="#E5E5E5">receive the least</font><font color="#CCCCCC"> amount of packet and</font>

281
00:11:23,400 --> 00:11:27,060
the one on<font color="#CCCCCC"> the</font><font color="#E5E5E5"> right is the one they</font>

282
00:11:24,810 --> 00:11:30,810
receive the<font color="#CCCCCC"> greatest amount so next</font><font color="#E5E5E5"> jobs</font>

283
00:11:27,060 --> 00:11:32,310
and on the<font color="#E5E5E5"> y-axis</font><font color="#CCCCCC"> I showed the load</font><font color="#E5E5E5"> the</font>

284
00:11:30,810 --> 00:11:34,410
number of packets that<font color="#E5E5E5"> each next stop</font>

285
00:11:32,310 --> 00:11:36,239
received<font color="#E5E5E5"> normalized by the average</font>

286
00:11:34,410 --> 00:11:38,939
number of<font color="#CCCCCC"> packet</font><font color="#E5E5E5"> received by any next</font>

287
00:11:36,240 --> 00:11:40,650
talk now in<font color="#CCCCCC"> a Diaz case this would</font><font color="#E5E5E5"> be</font>

288
00:11:38,940 --> 00:11:42,060
the graph they would expect<font color="#E5E5E5"> and would</font>

289
00:11:40,650 --> 00:11:44,340
expect<font color="#E5E5E5"> each next table to receive</font>

290
00:11:42,060 --> 00:11:46,469
exactly<font color="#CCCCCC"> the same amount of packet that</font>

291
00:11:44,340 --> 00:11:48,930
indicates a perfect load balancing in

292
00:11:46,470 --> 00:11:50,850
the case of a switch a the<font color="#CCCCCC"> measured</font>

293
00:11:48,930 --> 00:11:52,979
result was pretty<font color="#E5E5E5"> close to</font><font color="#CCCCCC"> the actual</font>

294
00:11:50,850 --> 00:11:54,930
<font color="#E5E5E5">intended result to the point we could</font>

295
00:11:52,980 --> 00:11:57,780
not<font color="#E5E5E5"> really distinguish the plot of</font>

296
00:11:54,930 --> 00:11:59,219
profit action and the major one<font color="#E5E5E5"> however</font>

297
00:11:57,780 --> 00:12:00,839
the situation<font color="#E5E5E5"> was a bit different</font><font color="#CCCCCC"> with</font>

298
00:11:59,220 --> 00:12:02,700
which in a rich B this was the switch

299
00:12:00,840 --> 00:12:05,010
<font color="#CCCCCC">that introduces some level of balancing</font>

300
00:12:02,700 --> 00:12:07,710
the<font color="#E5E5E5"> measure result in this</font><font color="#CCCCCC"> case was</font>

301
00:12:05,010 --> 00:12:09,060
pretty<font color="#E5E5E5"> different from expected and as</font>

302
00:12:07,710 --> 00:12:11,700
you can<font color="#CCCCCC"> see from</font><font color="#E5E5E5"> this graph</font><font color="#CCCCCC"> the</font>

303
00:12:09,060 --> 00:12:13,560
difference between<font color="#E5E5E5"> the most</font><font color="#CCCCCC"> low the next</font>

304
00:12:11,700 --> 00:12:16,740
<font color="#CCCCCC">top</font><font color="#E5E5E5"> and the average load the</font><font color="#CCCCCC"> next stop</font>

305
00:12:13,560 --> 00:12:19,410
is<font color="#E5E5E5"> 50%</font><font color="#CCCCCC"> and there was also 6 fold</font>

306
00:12:16,740 --> 00:12:22,500
difference<font color="#E5E5E5"> between the most loaded and</font>

307
00:12:19,410 --> 00:12:24,180
the least loaded<font color="#E5E5E5"> bucket if you recall</font>

308
00:12:22,500 --> 00:12:25,770
the graph there show your<font color="#CCCCCC"> iran in a</font>

309
00:12:24,180 --> 00:12:28,050
situation like<font color="#CCCCCC"> this</font><font color="#E5E5E5"> with the most load</font>

310
00:12:25,770 --> 00:12:30,390
the<font color="#E5E5E5"> next</font><font color="#CCCCCC"> stop with heavy</font><font color="#E5E5E5"> 50% more</font>

311
00:12:28,050 --> 00:12:32,069
traffic than the average<font color="#E5E5E5"> next stop they</font>

312
00:12:30,390 --> 00:12:33,750
would have caused a loss of 1/3 of our

313
00:12:32,070 --> 00:12:36,660
<font color="#E5E5E5">capacity so situation</font><font color="#CCCCCC"> these will really</font>

314
00:12:33,750 --> 00:12:38,190
<font color="#E5E5E5">cost a large amount of capacity switch B</font>

315
00:12:36,660 --> 00:12:40,680
<font color="#E5E5E5">also add an additional problem because</font>

316
00:12:38,190 --> 00:12:43,560
it was supposed to support an arbitrary

317
00:12:40,680 --> 00:12:46,020
number<font color="#CCCCCC"> of next stops between 156 as you</font>

318
00:12:43,560 --> 00:12:47,520
can<font color="#E5E5E5"> show in this table however</font><font color="#CCCCCC"> the</font>

319
00:12:46,020 --> 00:12:50,160
situation<font color="#CCCCCC"> in reality was a bit different</font>

320
00:12:47,520 --> 00:12:53,069
<font color="#CCCCCC">because only a</font><font color="#E5E5E5"> subset of next stops were</font>

321
00:12:50,160 --> 00:12:55,680
actually supported so it turns out<font color="#E5E5E5"> that</font>

322
00:12:53,070 --> 00:12:57,630
if<font color="#CCCCCC"> we try</font><font color="#E5E5E5"> to select a number of next</font>

323
00:12:55,680 --> 00:12:59,010
stops<font color="#E5E5E5"> which was not supporting say for</font>

324
00:12:57,630 --> 00:13:02,010
example<font color="#CCCCCC"> hundred 26</font>

325
00:12:59,010 --> 00:13:04,319
only<font color="#CCCCCC"> hundred</font><font color="#E5E5E5"> twenty next stops</font><font color="#CCCCCC"> will</font>

326
00:13:02,010 --> 00:13:06,060
receive any traffic at all<font color="#E5E5E5"> six of</font><font color="#CCCCCC"> these</font>

327
00:13:04,320 --> 00:13:08,880
<font color="#CCCCCC">nice jobs will not</font><font color="#E5E5E5"> receive any traffic</font>

328
00:13:06,060 --> 00:13:10,530
<font color="#E5E5E5">which further exacerbate</font><font color="#CCCCCC"> Dell degree or</font>

329
00:13:08,880 --> 00:13:13,320
load imbalance<font color="#CCCCCC"> they</font><font color="#E5E5E5"> we</font><font color="#CCCCCC"> experienced</font><font color="#E5E5E5"> using</font>

330
00:13:10,530 --> 00:13:17,100
this which again<font color="#E5E5E5"> hopefully</font><font color="#CCCCCC"> I showed you</font>

331
00:13:13,320 --> 00:13:18,840
that load imbalance<font color="#E5E5E5"> assumption not</font>

332
00:13:17,100 --> 00:13:20,300
always holds even<font color="#CCCCCC"> on commercially</font>

333
00:13:18,840 --> 00:13:21,800
successful switches

334
00:13:20,300 --> 00:13:23,719
let's<font color="#E5E5E5"> all talk about</font><font color="#CCCCCC"> path painting</font><font color="#E5E5E5"> and</font>

335
00:13:21,800 --> 00:13:25,880
let's discuss where the Russian<font color="#E5E5E5"> defect</font>

336
00:13:23,720 --> 00:13:28,040
<font color="#E5E5E5">effect Apple really</font><font color="#CCCCCC"> maintained sky</font>

337
00:13:25,880 --> 00:13:30,860
<font color="#CCCCCC">cleaning one thing that can really</font><font color="#E5E5E5"> break</font>

338
00:13:28,040 --> 00:13:33,079
<font color="#CCCCCC">five pinion pinning back spinning is</font>

339
00:13:30,860 --> 00:13:35,390
hashing on the<font color="#CCCCCC"> PV for type of service</font>

340
00:13:33,080 --> 00:13:37,610
field such as discussed before normally

341
00:13:35,390 --> 00:13:39,620
<font color="#CCCCCC">I'll tonight before header</font><font color="#E5E5E5"> we should</font>

342
00:13:37,610 --> 00:13:41,590
normally consider protocol source in

343
00:13:39,620 --> 00:13:44,240
<font color="#E5E5E5">this initial dress in our - decision</font>

344
00:13:41,590 --> 00:13:47,420
<font color="#E5E5E5">however we found out the certain routers</font>

345
00:13:44,240 --> 00:13:49,670
around<font color="#E5E5E5"> also hash based on type of</font>

346
00:13:47,420 --> 00:13:51,530
service<font color="#E5E5E5"> why would this rather do this</font>

347
00:13:49,670 --> 00:13:53,000
<font color="#E5E5E5">what they would do this because</font>

348
00:13:51,530 --> 00:13:56,380
<font color="#CCCCCC">originally that</font><font color="#E5E5E5"> was specifically</font>

349
00:13:53,000 --> 00:13:59,120
permitted by RFC 1812 which specifically

350
00:13:56,380 --> 00:14:02,180
permitted using the type of<font color="#E5E5E5"> service</font>

351
00:13:59,120 --> 00:14:05,840
<font color="#CCCCCC">fixer feed erupting decision this</font>

352
00:14:02,180 --> 00:14:08,109
however<font color="#E5E5E5"> was 22 years ago</font><font color="#CCCCCC"> reason ellipses</font>

353
00:14:05,840 --> 00:14:11,660
<font color="#CCCCCC">changed the situation</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> example</font><font color="#E5E5E5"> RFC</font>

354
00:14:08,110 --> 00:14:13,490
2474 deprecated<font color="#CCCCCC"> the type of service</font>

355
00:14:11,660 --> 00:14:15,650
field<font color="#CCCCCC"> and redefine it would be a</font>

356
00:14:13,490 --> 00:14:18,560
differentiated service<font color="#CCCCCC"> pin but what</font>

357
00:14:15,650 --> 00:14:21,380
really made the type<font color="#CCCCCC"> of service field</font><font color="#E5E5E5"> an</font>

358
00:14:18,560 --> 00:14:25,010
<font color="#E5E5E5">unsuitable field for rational is RFC</font>

359
00:14:21,380 --> 00:14:28,370
3168 which reserved the latest<font color="#E5E5E5"> two bit</font>

360
00:14:25,010 --> 00:14:32,689
of the type of<font color="#E5E5E5"> service opted for ICN</font>

361
00:14:28,370 --> 00:14:35,320
kpcn capable definition so<font color="#E5E5E5"> n with this</font>

362
00:14:32,690 --> 00:14:37,670
RFC we can along<font color="#E5E5E5"> a guarantee that</font>

363
00:14:35,320 --> 00:14:39,590
<font color="#CCCCCC">packets belonging to the</font><font color="#E5E5E5"> same flow will</font>

364
00:14:37,670 --> 00:14:40,849
always have the<font color="#E5E5E5"> same type of service</font>

365
00:14:39,590 --> 00:14:43,370
<font color="#E5E5E5">field because they will change or</font>

366
00:14:40,850 --> 00:14:45,620
control<font color="#CCCCCC"> the flow let me</font><font color="#E5E5E5"> show this with a</font>

367
00:14:43,370 --> 00:14:47,540
<font color="#E5E5E5">very simple example</font><font color="#CCCCCC"> that we experience</font>

368
00:14:45,620 --> 00:14:48,680
in practice<font color="#E5E5E5"> on the left hand side</font>

369
00:14:47,540 --> 00:14:49,939
there's a<font color="#E5E5E5"> host and they want to</font>

370
00:14:48,680 --> 00:14:51,979
<font color="#CCCCCC">communicate</font><font color="#E5E5E5"> with any of the hosts on</font><font color="#CCCCCC"> the</font>

371
00:14:49,940 --> 00:14:54,800
<font color="#E5E5E5">right hand</font><font color="#CCCCCC"> side and all of this hosts</font>

372
00:14:51,980 --> 00:14:56,510
<font color="#E5E5E5">are easy</font><font color="#CCCCCC"> and capable</font><font color="#E5E5E5"> in</font><font color="#CCCCCC"> the router hash</font>

373
00:14:54,800 --> 00:14:59,030
is based on<font color="#E5E5E5"> the</font><font color="#CCCCCC"> FE</font><font color="#E5E5E5"> before that</font><font color="#CCCCCC"> for</font>

374
00:14:56,510 --> 00:15:02,150
service<font color="#E5E5E5"> field as mondays are allowed by</font>

375
00:14:59,030 --> 00:15:03,110
RFC 1812<font color="#E5E5E5"> so the host on the right hand</font>

376
00:15:02,150 --> 00:15:05,660
on<font color="#E5E5E5"> the left hand side</font>

377
00:15:03,110 --> 00:15:08,630
initiates a TCP connection<font color="#CCCCCC"> and that gets</font>

378
00:15:05,660 --> 00:15:11,209
asked to<font color="#E5E5E5"> the topmost host during</font><font color="#CCCCCC"> a TCP</font>

379
00:15:08,630 --> 00:15:12,920
handshake<font color="#CCCCCC"> the EC incapable bits of the</font>

380
00:15:11,210 --> 00:15:15,530
type of service field<font color="#CCCCCC"> are at left</font><font color="#E5E5E5"> hand</font>

381
00:15:12,920 --> 00:15:18,410
set because the same capabilities be

382
00:15:15,530 --> 00:15:20,959
negotiated<font color="#E5E5E5"> but after the</font><font color="#CCCCCC"> shakin is</font>

383
00:15:18,410 --> 00:15:22,880
completed then the<font color="#E5E5E5"> en cada bit is</font>

384
00:15:20,960 --> 00:15:26,630
negotiated the<font color="#E5E5E5"> host on left hand side</font>

385
00:15:22,880 --> 00:15:29,780
<font color="#E5E5E5">sent the pro data including</font><font color="#CCCCCC"> safety net</font>

386
00:15:26,630 --> 00:15:32,030
value<font color="#E5E5E5"> 1 to the EC incapable</font><font color="#CCCCCC"> bit the</font>

387
00:15:29,780 --> 00:15:33,720
router then takes this bit into account

388
00:15:32,030 --> 00:15:35,189
in<font color="#E5E5E5"> ash compilation</font>

389
00:15:33,720 --> 00:15:37,949
<font color="#CCCCCC">let's end up on a different</font><font color="#E5E5E5"> horse</font>

390
00:15:35,189 --> 00:15:39,329
<font color="#CCCCCC">therefore breaking the flow we should</font>

391
00:15:37,949 --> 00:15:42,000
experience<font color="#E5E5E5"> in practice this issue</font>

392
00:15:39,329 --> 00:15:44,430
<font color="#CCCCCC">towards the</font><font color="#E5E5E5"> end of 2015</font><font color="#CCCCCC"> when I first</font>

393
00:15:42,000 --> 00:15:46,860
started enabling by default<font color="#CCCCCC"> ecn on iOS</font>

394
00:15:44,430 --> 00:15:48,599
and OS X and<font color="#E5E5E5"> we</font><font color="#CCCCCC"> have observed</font><font color="#E5E5E5"> an</font>

395
00:15:46,860 --> 00:15:49,920
increase<font color="#E5E5E5"> number</font><font color="#CCCCCC"> of reset</font><font color="#E5E5E5"> but we all</font>

396
00:15:48,600 --> 00:15:52,079
serve that this was only caused

397
00:15:49,920 --> 00:15:53,699
<font color="#E5E5E5">afternoon on a specific path</font><font color="#CCCCCC"> we</font>

398
00:15:52,079 --> 00:15:55,109
identified<font color="#CCCCCC"> the certain operators were</font>

399
00:15:53,699 --> 00:15:59,849
deploying some<font color="#CCCCCC"> drafters that had this</font>

400
00:15:55,110 --> 00:16:01,589
behavior we had to solve this problem

401
00:15:59,850 --> 00:16:03,720
<font color="#CCCCCC">the only weight we saw this problem was</font>

402
00:16:01,589 --> 00:16:05,160
to<font color="#E5E5E5"> disable</font><font color="#CCCCCC"> ecn on our side</font><font color="#E5E5E5"> and</font>

403
00:16:03,720 --> 00:16:08,339
<font color="#CCCCCC">unfortunately had</font><font color="#E5E5E5"> to say that the</font>

404
00:16:05,160 --> 00:16:10,019
routers<font color="#CCCCCC"> in the wild</font><font color="#E5E5E5"> that hash based on a</font>

405
00:16:08,339 --> 00:16:11,519
<font color="#CCCCCC">pitiful type of service field</font><font color="#E5E5E5"> is</font>

406
00:16:10,019 --> 00:16:13,019
<font color="#CCCCCC">actually one</font><font color="#E5E5E5"> things that make it</font><font color="#CCCCCC"> seem</font>

407
00:16:11,519 --> 00:16:15,990
pretty much<font color="#E5E5E5"> and deplorable at this time</font>

408
00:16:13,019 --> 00:16:17,970
so<font color="#CCCCCC"> we talked about an mpeg-4</font><font color="#E5E5E5"> specific</font>

409
00:16:15,990 --> 00:16:20,490
issue<font color="#E5E5E5"> let's talk about any pv6 one</font>

410
00:16:17,970 --> 00:16:22,560
specific so we<font color="#E5E5E5"> received a set a few</font>

411
00:16:20,490 --> 00:16:24,449
months ago<font color="#E5E5E5"> we have</font><font color="#CCCCCC"> served few months ago</font>

412
00:16:22,560 --> 00:16:26,910
<font color="#E5E5E5">there was an increased rate of reset in</font>

413
00:16:24,449 --> 00:16:29,008
our network<font color="#E5E5E5"> coming from ipv6</font><font color="#CCCCCC"> packets</font>

414
00:16:26,910 --> 00:16:30,810
from<font color="#E5E5E5"> a specific</font><font color="#CCCCCC"> isp</font><font color="#E5E5E5"> we did some</font>

415
00:16:29,009 --> 00:16:32,699
investigation<font color="#E5E5E5"> and we found the middle</font>

416
00:16:30,810 --> 00:16:35,040
<font color="#E5E5E5">box which has a quite a remarkable</font>

417
00:16:32,699 --> 00:16:36,930
behavior<font color="#CCCCCC"> so this middle box was</font>

418
00:16:35,040 --> 00:16:38,969
performing the following thing if<font color="#E5E5E5"> you</font>

419
00:16:36,930 --> 00:16:41,128
received a packet with a flow label

420
00:16:38,970 --> 00:16:43,649
<font color="#E5E5E5">which is equal to</font><font color="#CCCCCC"> 0 you</font><font color="#E5E5E5"> will follow the</font>

421
00:16:41,129 --> 00:16:47,009
<font color="#E5E5E5">pv6 packet and modify without making a</font>

422
00:16:43,649 --> 00:16:49,259
change however<font color="#E5E5E5"> if this a pv6 packet at</font>

423
00:16:47,009 --> 00:16:51,149
the flow<font color="#E5E5E5"> level with a different value</font>

424
00:16:49,259 --> 00:16:54,569
double value which is<font color="#E5E5E5"> set different than</font>

425
00:16:51,149 --> 00:16:57,059
0 you<font color="#CCCCCC"> will rewrite this label to a value</font>

426
00:16:54,569 --> 00:16:58,589
which looked random to us which varied

427
00:16:57,059 --> 00:17:00,600
across different packets of<font color="#E5E5E5"> the same</font>

428
00:16:58,589 --> 00:17:04,409
flow which by the way is specifically

429
00:17:00,600 --> 00:17:06,809
forbidden by<font color="#CCCCCC"> the</font><font color="#E5E5E5"> FC 64-37 under the same</font>

430
00:17:04,409 --> 00:17:09,120
on our side we had a switch which was

431
00:17:06,809 --> 00:17:11,369
<font color="#E5E5E5">using the</font><font color="#CCCCCC"> pv6 floor label for harsh</font>

432
00:17:09,119 --> 00:17:15,059
computation<font color="#E5E5E5"> which is instead allowed by</font>

433
00:17:11,369 --> 00:17:17,549
RFC 64<font color="#CCCCCC"> 437</font><font color="#E5E5E5"> and this is the situation we</font>

434
00:17:15,059 --> 00:17:19,168
had we had<font color="#E5E5E5"> the host on one side wants to</font>

435
00:17:17,549 --> 00:17:21,959
<font color="#CCCCCC">communicate</font><font color="#E5E5E5"> with any holes on the other</font>

436
00:17:19,169 --> 00:17:24,209
<font color="#E5E5E5">side so the first host has a negative</font><font color="#CCCCCC"> 6</font>

437
00:17:21,959 --> 00:17:26,789
packet with<font color="#CCCCCC"> the flow label</font><font color="#E5E5E5"> X with X</font>

438
00:17:24,209 --> 00:17:29,580
equal to<font color="#E5E5E5"> 0 that gets randomly written by</font>

439
00:17:26,789 --> 00:17:31,830
this middle<font color="#E5E5E5"> box to a value Y and then</font>

440
00:17:29,580 --> 00:17:33,840
<font color="#E5E5E5">the switch uses this value Y</font><font color="#CCCCCC"> in</font><font color="#E5E5E5"> making</font>

441
00:17:31,830 --> 00:17:36,870
<font color="#E5E5E5">its folding decision and then the packet</font>

442
00:17:33,840 --> 00:17:38,668
lands on the first host then the host

443
00:17:36,870 --> 00:17:41,010
signs again another packet with the<font color="#E5E5E5"> same</font>

444
00:17:38,669 --> 00:17:42,780
flow label<font color="#E5E5E5"> different from</font><font color="#CCCCCC"> 0</font><font color="#E5E5E5"> gets</font>

445
00:17:41,010 --> 00:17:45,510
rewritten to<font color="#E5E5E5"> another random value our</font>

446
00:17:42,780 --> 00:17:46,740
<font color="#CCCCCC">energy</font><font color="#E5E5E5"> this value gets the game to come</font>

447
00:17:45,510 --> 00:17:48,800
by the switch and

448
00:17:46,740 --> 00:17:50,460
different<font color="#E5E5E5"> laws</font><font color="#CCCCCC"> and the flow is broken</font>

449
00:17:48,800 --> 00:17:52,200
unfortunately the<font color="#E5E5E5"> situation was</font>

450
00:17:50,460 --> 00:17:53,970
aggravated by<font color="#CCCCCC"> the fact</font><font color="#E5E5E5"> that we were</font><font color="#CCCCCC"> not</font>

451
00:17:52,200 --> 00:17:56,220
<font color="#E5E5E5">been able we are not able on our side to</font>

452
00:17:53,970 --> 00:17:57,840
disable hashing on the people<font color="#E5E5E5"> sixth</font>

453
00:17:56,220 --> 00:17:59,610
floor<font color="#CCCCCC"> label</font><font color="#E5E5E5"> because this was not a</font>

454
00:17:57,840 --> 00:18:01,678
capability that<font color="#CCCCCC"> were</font><font color="#E5E5E5"> been exposed to us</font>

455
00:17:59,610 --> 00:18:06,809
<font color="#E5E5E5">so the only way we had</font><font color="#CCCCCC"> to fix this</font>

456
00:18:01,679 --> 00:18:11,280
problem was<font color="#CCCCCC"> to go back</font><font color="#E5E5E5"> to to</font><font color="#CCCCCC"> the middle</font>

457
00:18:06,809 --> 00:18:13,740
box operator<font color="#E5E5E5"> and ask them to and flesh</font>

458
00:18:11,280 --> 00:18:16,678
and<font color="#E5E5E5"> do</font><font color="#CCCCCC"> a firm regret</font><font color="#E5E5E5"> around the middle</font>

459
00:18:13,740 --> 00:18:18,960
boxes<font color="#E5E5E5"> finally another situation that we</font>

460
00:18:16,679 --> 00:18:21,300
had was caused by<font color="#E5E5E5"> sin proxies so</font><font color="#CCCCCC"> this</font>

461
00:18:18,960 --> 00:18:23,460
<font color="#CCCCCC">occult provider which uses sim proxies</font>

462
00:18:21,300 --> 00:18:25,409
<font color="#CCCCCC">to establish outgoing connection</font><font color="#E5E5E5"> so</font>

463
00:18:23,460 --> 00:18:27,750
whenever one host<font color="#E5E5E5"> wants to establish a</font>

464
00:18:25,410 --> 00:18:30,000
TCP<font color="#CCCCCC"> connection to the outside world you</font>

465
00:18:27,750 --> 00:18:31,950
request this imp<font color="#E5E5E5"> Roxy to start to create</font>

466
00:18:30,000 --> 00:18:34,010
<font color="#E5E5E5">the TCP connection and trade and shake</font>

467
00:18:31,950 --> 00:18:37,650
on his<font color="#CCCCCC"> BS</font><font color="#E5E5E5"> and return the connection back</font>

468
00:18:34,010 --> 00:18:39,330
on the other<font color="#CCCCCC"> side these</font><font color="#E5E5E5"> are us where we</font>

469
00:18:37,650 --> 00:18:40,800
<font color="#E5E5E5">have a set</font><font color="#CCCCCC"> of switches</font><font color="#E5E5E5"> connecting a</font>

470
00:18:39,330 --> 00:18:43,050
fully bipartite apology to a set of

471
00:18:40,800 --> 00:18:45,240
<font color="#CCCCCC">whores in</font><font color="#E5E5E5"> all these switches have either</font>

472
00:18:43,050 --> 00:18:46,950
one<font color="#E5E5E5"> of these characteristics</font><font color="#CCCCCC"> either they</font>

473
00:18:45,240 --> 00:18:50,309
use<font color="#E5E5E5"> English interface</font><font color="#CCCCCC"> force computation</font>

474
00:18:46,950 --> 00:18:52,650
<font color="#CCCCCC">or that configure using differences in</font>

475
00:18:50,309 --> 00:18:54,690
the hash function<font color="#E5E5E5"> that's what happened</font>

476
00:18:52,650 --> 00:18:57,330
to us<font color="#E5E5E5"> the host on the</font><font color="#CCCCCC"> left-hand side</font>

477
00:18:54,690 --> 00:19:00,240
<font color="#E5E5E5">wants to set up a TCP</font><font color="#CCCCCC"> connection so we</font>

478
00:18:57,330 --> 00:19:01,800
<font color="#E5E5E5">request the simple</font><font color="#CCCCCC"> city to do so</font><font color="#E5E5E5"> the sim</font>

479
00:19:00,240 --> 00:19:04,620
proxy will then mix a<font color="#E5E5E5"> raffle kappa</font>

480
00:19:01,800 --> 00:19:06,600
<font color="#E5E5E5">mikkel</font><font color="#CCCCCC"> kappa we like different</font><font color="#E5E5E5"> available</font>

481
00:19:04,620 --> 00:19:08,699
it will pick up<font color="#E5E5E5"> the</font><font color="#CCCCCC"> seda switch on the</font>

482
00:19:06,600 --> 00:19:11,040
top<font color="#E5E5E5"> side</font><font color="#CCCCCC"> okay</font><font color="#E5E5E5"> the switch then will pick</font>

483
00:19:08,700 --> 00:19:13,950
up the first<font color="#CCCCCC"> host and will</font><font color="#E5E5E5"> establish the</font>

484
00:19:11,040 --> 00:19:15,270
<font color="#E5E5E5">TCP connection the sim proxy then</font><font color="#CCCCCC"> we</font>

485
00:19:13,950 --> 00:19:17,330
<font color="#E5E5E5">return establish this connection to the</font>

486
00:19:15,270 --> 00:19:20,129
<font color="#E5E5E5">host which can then start sending</font><font color="#CCCCCC"> data</font>

487
00:19:17,330 --> 00:19:22,080
<font color="#E5E5E5">so the host again does not</font><font color="#CCCCCC"> look up but</font>

488
00:19:20,130 --> 00:19:24,090
<font color="#CCCCCC">there are the host might have a</font>

489
00:19:22,080 --> 00:19:26,220
<font color="#E5E5E5">different set of routes available</font><font color="#CCCCCC"> may I</font>

490
00:19:24,090 --> 00:19:28,139
<font color="#E5E5E5">have a different heart seed may have</font>

491
00:19:26,220 --> 00:19:29,340
different characteristic it is not

492
00:19:28,140 --> 00:19:31,080
guarantee that<font color="#CCCCCC"> will pick up the same</font>

493
00:19:29,340 --> 00:19:32,459
route and in the case which actually

494
00:19:31,080 --> 00:19:34,860
picking up a different<font color="#CCCCCC"> out of the switch</font>

495
00:19:32,460 --> 00:19:36,480
<font color="#CCCCCC">now remember this which could correct</font>

496
00:19:34,860 --> 00:19:38,879
the situation if<font color="#CCCCCC"> he was actually</font><font color="#E5E5E5"> the</font>

497
00:19:36,480 --> 00:19:40,500
<font color="#E5E5E5">same way of the switchable</font><font color="#CCCCCC"> aware that</font>

498
00:19:38,880 --> 00:19:42,690
<font color="#CCCCCC">was not the case a</font><font color="#E5E5E5"> picks up the second</font>

499
00:19:40,500 --> 00:19:44,370
host and<font color="#CCCCCC"> that breaks the flow in a case</font>

500
00:19:42,690 --> 00:19:46,710
in the situation we got the same problem

501
00:19:44,370 --> 00:19:48,989
and in<font color="#E5E5E5"> the case before that we were not</font>

502
00:19:46,710 --> 00:19:51,920
able to<font color="#E5E5E5"> configure our switches to either</font>

503
00:19:48,990 --> 00:19:54,330
use the same<font color="#E5E5E5"> hash seed across the old</font>

504
00:19:51,920 --> 00:19:56,160
<font color="#CCCCCC">deployments of the switch and we were</font>

505
00:19:54,330 --> 00:19:57,928
not disabled we were able<font color="#E5E5E5"> to disable</font>

506
00:19:56,160 --> 00:20:00,510
<font color="#E5E5E5">using the u.s. interface in</font><font color="#CCCCCC"> our</font>

507
00:19:57,929 --> 00:20:01,890
<font color="#E5E5E5">computation so the way we had</font>

508
00:20:00,510 --> 00:20:04,050
of this<font color="#E5E5E5"> program was to</font><font color="#CCCCCC"> be in</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> BGP</font>

509
00:20:01,890 --> 00:20:05,880
connection the BGP session with the

510
00:20:04,050 --> 00:20:07,830
double pair on it one specifically<font color="#E5E5E5"> which</font>

511
00:20:05,880 --> 00:20:10,980
<font color="#CCCCCC">they're sure</font><font color="#E5E5E5"> that all the traffic will</font>

512
00:20:07,830 --> 00:20:14,100
come on it one specific switch so this

513
00:20:10,980 --> 00:20:15,900
concludes a bit my presentation if we

514
00:20:14,100 --> 00:20:18,209
could draw a set<font color="#CCCCCC"> of conclusions out of</font>

515
00:20:15,900 --> 00:20:20,580
this<font color="#E5E5E5"> presentation</font><font color="#CCCCCC"> I could say that well</font>

516
00:20:18,210 --> 00:20:23,100
that<font color="#CCCCCC"> the load balancing assumption is</font>

517
00:20:20,580 --> 00:20:25,050
sometimes<font color="#CCCCCC"> broken sometimes device do not</font>

518
00:20:23,100 --> 00:20:25,740
has uniformly<font color="#CCCCCC"> it should not</font><font color="#E5E5E5"> probably</font>

519
00:20:25,050 --> 00:20:27,750
<font color="#E5E5E5">write on it</font>

520
00:20:25,740 --> 00:20:30,420
another thing<font color="#E5E5E5"> probably more</font><font color="#CCCCCC"> important</font><font color="#E5E5E5"> I</font>

521
00:20:27,750 --> 00:20:31,980
<font color="#E5E5E5">will say that hashing on any field which</font>

522
00:20:30,420 --> 00:20:35,640
is different from the type fact a pole

523
00:20:31,980 --> 00:20:38,010
can and<font color="#E5E5E5"> will break is simply so action</font>

524
00:20:35,640 --> 00:20:40,470
on<font color="#CCCCCC"> fields</font><font color="#E5E5E5"> like</font><font color="#CCCCCC"> ingre</font><font color="#E5E5E5"> sports ipv4 type of</font>

525
00:20:38,010 --> 00:20:41,550
service pin or<font color="#E5E5E5"> a</font><font color="#CCCCCC"> pv6 or label as the</font>

526
00:20:40,470 --> 00:20:45,710
potential<font color="#CCCCCC"> to disrupt</font>

527
00:20:41,550 --> 00:20:47,639
<font color="#CCCCCC">ecmp finally if you can distill this</font>

528
00:20:45,710 --> 00:20:50,610
conclusion into a set<font color="#E5E5E5"> of</font><font color="#CCCCCC"> recommendations</font>

529
00:20:47,640 --> 00:20:51,930
<font color="#CCCCCC">I would say operators they should</font>

530
00:20:50,610 --> 00:20:54,330
probably ensure that your<font color="#CCCCCC"> network</font>

531
00:20:51,930 --> 00:20:56,250
devices<font color="#E5E5E5"> hash flows uniformly otherwise</font>

532
00:20:54,330 --> 00:20:59,179
that will reduce<font color="#E5E5E5"> your available capacity</font>

533
00:20:56,250 --> 00:21:02,480
<font color="#E5E5E5">and cost money</font><font color="#CCCCCC"> and also</font><font color="#E5E5E5"> I</font><font color="#CCCCCC"> would</font><font color="#E5E5E5"> say that</font>

534
00:20:59,180 --> 00:21:05,160
unless<font color="#E5E5E5"> you</font><font color="#CCCCCC"> have a specific</font><font color="#E5E5E5"> reason for</font>

535
00:21:02,480 --> 00:21:07,320
enabling<font color="#E5E5E5"> hashing another field except to</font>

536
00:21:05,160 --> 00:21:08,850
the<font color="#CCCCCC"> fight</font><font color="#E5E5E5"> table or you don't need an</font>

537
00:21:07,320 --> 00:21:10,830
extra<font color="#E5E5E5"> entropy you should probably maybe</font>

538
00:21:08,850 --> 00:21:13,860
<font color="#E5E5E5">consider disabled that because they</font>

539
00:21:10,830 --> 00:21:15,270
might break<font color="#E5E5E5"> flows downstream and finally</font>

540
00:21:13,860 --> 00:21:17,100
if I could give some recommendation to

541
00:21:15,270 --> 00:21:19,950
vendors<font color="#CCCCCC"> I would say that it could be</font>

542
00:21:17,100 --> 00:21:22,620
probably<font color="#E5E5E5"> advisable to expose to your</font>

543
00:21:19,950 --> 00:21:25,200
customized availability to configure the

544
00:21:22,620 --> 00:21:27,449
seed of the rush function and<font color="#E5E5E5"> also give</font>

545
00:21:25,200 --> 00:21:31,110
the possibility<font color="#CCCCCC"> to</font><font color="#E5E5E5"> disable hashing on</font>

546
00:21:27,450 --> 00:21:33,690
the frame put apart from the defect

547
00:21:31,110 --> 00:21:35,879
double<font color="#E5E5E5"> and probably leave them default</font>

548
00:21:33,690 --> 00:21:37,650
by disabled by default<font color="#CCCCCC"> so understand</font>

549
00:21:35,880 --> 00:21:39,540
this which is normally achieved with a

550
00:21:37,650 --> 00:21:41,760
<font color="#E5E5E5">configuration which is more suitable for</font>

551
00:21:39,540 --> 00:21:43,290
<font color="#CCCCCC">designers case a waiver switches are</font>

552
00:21:41,760 --> 00:21:46,170
normally<font color="#CCCCCC"> used for this case different</font>

553
00:21:43,290 --> 00:21:49,350
from the<font color="#CCCCCC"> 21 over the time and maybe in</font>

554
00:21:46,170 --> 00:21:51,930
this<font color="#E5E5E5"> case</font><font color="#CCCCCC"> is probably advisable idea to</font>

555
00:21:49,350 --> 00:21:54,149
disable<font color="#E5E5E5"> hash on this field by default on</font>

556
00:21:51,930 --> 00:21:55,500
<font color="#CCCCCC">all your switches</font><font color="#E5E5E5"> so this concludes</font><font color="#CCCCCC"> my</font>

557
00:21:54,150 --> 00:21:57,090
presentation<font color="#CCCCCC"> I</font><font color="#E5E5E5"> would like to thank you</font>

558
00:21:55,500 --> 00:21:58,740
<font color="#E5E5E5">very much for attention</font><font color="#CCCCCC"> and I'm happy to</font>

559
00:21:57,090 --> 00:22:01,129
take any<font color="#E5E5E5"> questions you may have</font><font color="#CCCCCC"> thank</font>

560
00:21:58,740 --> 00:22:01,130
<font color="#E5E5E5">you very much</font>

561
00:22:04,940 --> 00:22:10,860
all right<font color="#E5E5E5"> Chris</font><font color="#CCCCCC"> Whitfield</font><font color="#E5E5E5"> Salesforce</font><font color="#CCCCCC"> I</font>

562
00:22:08,480 --> 00:22:14,040
know that there's a<font color="#E5E5E5"> number of switches</font>

563
00:22:10,860 --> 00:22:16,260
now that have more advanced hashing

564
00:22:14,040 --> 00:22:17,850
features mainly<font color="#E5E5E5"> based around cheating</font>

565
00:22:16,260 --> 00:22:20,549
consistent hashing<font color="#E5E5E5"> based around</font>

566
00:22:17,850 --> 00:22:22,469
consistent hashing algorithms of<font color="#E5E5E5"> ring</font>

567
00:22:20,549 --> 00:22:25,200
hashing resilient hashing different

568
00:22:22,470 --> 00:22:28,110
vendors call it different names<font color="#CCCCCC"> did you</font>

569
00:22:25,200 --> 00:22:31,470
in<font color="#E5E5E5"> your testing here were you able to</font>

570
00:22:28,110 --> 00:22:35,189
<font color="#E5E5E5">evaluate any of those those feature sets</font>

571
00:22:31,470 --> 00:22:37,530
and<font color="#E5E5E5"> did you see any different different</font>

572
00:22:35,190 --> 00:22:40,470
outlets than what you reported in in

573
00:22:37,530 --> 00:22:42,690
your representation<font color="#E5E5E5"> no we did</font><font color="#CCCCCC"> not detect</font>

574
00:22:40,470 --> 00:22:44,160
<font color="#E5E5E5">it with consistent hashing but is it my</font>

575
00:22:42,690 --> 00:22:45,240
<font color="#E5E5E5">understanding</font><font color="#CCCCCC"> that normally consistent</font>

576
00:22:44,160 --> 00:22:47,100
hashing that should be<font color="#E5E5E5"> built on</font><font color="#CCCCCC"> top of</font>

577
00:22:45,240 --> 00:22:49,710
traditional hashing so send later

578
00:22:47,100 --> 00:22:50,790
<font color="#E5E5E5">abstraction top of that so unfortunate</font>

579
00:22:49,710 --> 00:22:52,559
don't<font color="#E5E5E5"> have the data I cannot tell you</font><font color="#CCCCCC"> if</font>

580
00:22:50,790 --> 00:22:54,510
<font color="#E5E5E5">this we</font><font color="#CCCCCC"> lost</font><font color="#E5E5E5"> and also with the caseta</font>

581
00:22:52,559 --> 00:22:56,190
<font color="#CCCCCC">gnashing but if</font><font color="#E5E5E5"> I to make a guess</font><font color="#CCCCCC"> or</font>

582
00:22:54,510 --> 00:22:58,440
<font color="#E5E5E5">probably</font><font color="#CCCCCC"> guess that we have</font><font color="#E5E5E5"> pretty much</font>

583
00:22:56,190 --> 00:23:02,700
<font color="#CCCCCC">the</font><font color="#E5E5E5"> same behavior okay but I don't</font><font color="#CCCCCC"> have</font>

584
00:22:58,440 --> 00:23:04,320
any date unfortunate man<font color="#CCCCCC"> pJAK yahoo</font><font color="#E5E5E5"> so</font>

585
00:23:02,700 --> 00:23:08,250
if you've got<font color="#E5E5E5"> a switch vendor out there</font>

586
00:23:04,320 --> 00:23:12,149
that claims it can hash on up to 256

587
00:23:08,250 --> 00:23:15,030
<font color="#E5E5E5">values for for your lag bond or ecmp</font>

588
00:23:12,150 --> 00:23:17,940
and yet it's consistently and repeatedly

589
00:23:15,030 --> 00:23:19,770
<font color="#E5E5E5">not hashing on that is this something</font>

590
00:23:17,940 --> 00:23:22,230
that<font color="#E5E5E5"> the vendor confirmed was a bug they</font>

591
00:23:19,770 --> 00:23:25,710
were fixing or is this a hardware flaw

592
00:23:22,230 --> 00:23:26,970
<font color="#CCCCCC">that it might behoove you to share some</font>

593
00:23:25,710 --> 00:23:29,040
<font color="#CCCCCC">information</font><font color="#E5E5E5"> with the rest of the</font>

594
00:23:26,970 --> 00:23:30,770
<font color="#E5E5E5">community on</font><font color="#CCCCCC"> beware this hardware</font>

595
00:23:29,040 --> 00:23:34,830
platform you will screw you<font color="#E5E5E5"> over</font>

596
00:23:30,770 --> 00:23:36,990
I didn't<font color="#E5E5E5"> mentioned a specific</font><font color="#CCCCCC"> platform</font>

597
00:23:34,830 --> 00:23:38,370
and I<font color="#CCCCCC"> don't know if well I'm curious too</font>

598
00:23:36,990 --> 00:23:39,510
did the<font color="#E5E5E5"> vendor that you talked to I</font>

599
00:23:38,370 --> 00:23:41,668
<font color="#CCCCCC">assume you</font><font color="#E5E5E5"> went to the vendor and said</font>

600
00:23:39,510 --> 00:23:43,320
<font color="#CCCCCC">yeah this</font><font color="#E5E5E5"> looks really broken is it</font>

601
00:23:41,669 --> 00:23:45,419
fixable to the vendor tell you if it was

602
00:23:43,320 --> 00:23:49,139
fixable<font color="#CCCCCC"> we didn't go back to us on this</font>

603
00:23:45,419 --> 00:23:54,720
one so<font color="#E5E5E5"> we're talking to the vendors</font><font color="#CCCCCC"> oh I</font>

604
00:23:49,140 --> 00:23:58,650
<font color="#CCCCCC">need 70 follow up Julie eglee</font><font color="#E5E5E5"> oh I'm not</font>

605
00:23:54,720 --> 00:24:01,350
<font color="#E5E5E5">here to sandbag you given that you</font><font color="#CCCCCC"> know</font>

606
00:23:58,650 --> 00:24:03,809
we do<font color="#E5E5E5"> work for the same company</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> I</font>

607
00:24:01,350 --> 00:24:06,330
think there's an interesting like<font color="#E5E5E5"> punch</font>

608
00:24:03,809 --> 00:24:08,210
<font color="#E5E5E5">line to the flow label thing right</font>

609
00:24:06,330 --> 00:24:11,428
because when we started<font color="#E5E5E5"> with flow labels</font>

610
00:24:08,210 --> 00:24:13,140
<font color="#E5E5E5">you know</font><font color="#CCCCCC"> they're</font><font color="#E5E5E5"> supposed to be unique</font>

611
00:24:11,429 --> 00:24:14,310
when you create them except of course

612
00:24:13,140 --> 00:24:15,750
<font color="#E5E5E5">that you can mostly set</font>

613
00:24:14,310 --> 00:24:18,810
them to<font color="#E5E5E5"> zero and get away with</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> for</font>

614
00:24:15,750 --> 00:24:20,040
<font color="#CCCCCC">a number of years then the ITF came</font>

615
00:24:18,810 --> 00:24:22,350
along and decided<font color="#CCCCCC"> that</font><font color="#E5E5E5"> we should</font>

616
00:24:20,040 --> 00:24:24,300
rehabilitate the flow label<font color="#E5E5E5"> a little bit</font>

617
00:24:22,350 --> 00:24:28,379
and one of the potential use cases for

618
00:24:24,300 --> 00:24:30,889
<font color="#E5E5E5">it</font><font color="#CCCCCC"> of course was load balancing which of</font>

619
00:24:28,380 --> 00:24:34,460
<font color="#CCCCCC">course because it's not immutable</font><font color="#E5E5E5"> and</font>

620
00:24:30,890 --> 00:24:36,750
bugs in the<font color="#E5E5E5"> internet could change it</font>

621
00:24:34,460 --> 00:24:42,390
<font color="#CCCCCC">seems to</font><font color="#E5E5E5"> be a bit of a problem</font>

622
00:24:36,750 --> 00:24:45,150
<font color="#E5E5E5">um I personally don't see us</font><font color="#CCCCCC"> being able</font>

623
00:24:42,390 --> 00:24:48,840
to<font color="#E5E5E5"> ever use the flow label for load</font>

624
00:24:45,150 --> 00:24:51,350
balancing<font color="#CCCCCC"> so I wonder what your thoughts</font>

625
00:24:48,840 --> 00:24:58,470
<font color="#CCCCCC">are on that</font>

626
00:24:51,350 --> 00:24:59,879
<font color="#CCCCCC">hey we do yeah I mean to be honest it's</font>

627
00:24:58,470 --> 00:25:04,790
<font color="#CCCCCC">probably best at every sound</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> Google</font>

628
00:24:59,880 --> 00:25:04,790
loading balance<font color="#CCCCCC"> then braking flows so</font>

629
00:25:05,000 --> 00:25:10,290
yeah so at<font color="#E5E5E5"> least at the</font><font color="#CCCCCC"> only well</font><font color="#E5E5E5"> it's</font>

630
00:25:08,220 --> 00:25:11,910
kind of like it's kind<font color="#CCCCCC"> of like</font><font color="#E5E5E5"> packet</font>

631
00:25:10,290 --> 00:25:13,710
<font color="#E5E5E5">coloring if I thought it was dangerous</font>

632
00:25:11,910 --> 00:25:17,070
<font color="#E5E5E5">at any speed I'd probably choose to</font>

633
00:25:13,710 --> 00:25:18,540
<font color="#E5E5E5">sanitize them like as they were leaving</font>

634
00:25:17,070 --> 00:25:20,700
my network so that<font color="#CCCCCC"> I wasn't</font>

635
00:25:18,540 --> 00:25:24,060
inadvertently responsible for creating

636
00:25:20,700 --> 00:25:25,920
<font color="#E5E5E5">this mess for</font><font color="#CCCCCC"> someone else</font><font color="#E5E5E5"> right and I</font>

637
00:25:24,060 --> 00:25:28,139
don't<font color="#CCCCCC"> think that's a recommendation</font><font color="#E5E5E5"> that</font>

638
00:25:25,920 --> 00:25:30,330
<font color="#CCCCCC">like we as operators would</font><font color="#E5E5E5"> make to the</font>

639
00:25:28,140 --> 00:25:32,880
IETF<font color="#E5E5E5"> or at least not one that would</font><font color="#CCCCCC"> be</font>

640
00:25:30,330 --> 00:25:37,199
<font color="#CCCCCC">well-received sanitizing all your flow</font>

641
00:25:32,880 --> 00:25:38,580
<font color="#E5E5E5">labels</font><font color="#CCCCCC"> but I would</font><font color="#E5E5E5"> be sort of deeply</font>

642
00:25:37,200 --> 00:25:41,130
concerned that the<font color="#E5E5E5"> sort of thing can</font>

643
00:25:38,580 --> 00:25:46,110
<font color="#CCCCCC">happen on accident and people don't</font>

644
00:25:41,130 --> 00:25:47,940
necessarily<font color="#E5E5E5"> notice</font><font color="#CCCCCC"> okay</font><font color="#E5E5E5"> I agree until we</font>

645
00:25:46,110 --> 00:25:53,879
shoot<font color="#E5E5E5"> ourselves in the foot with it with</font>

646
00:25:47,940 --> 00:25:56,190
stateless load balancing it's still

647
00:25:53,880 --> 00:25:57,990
guitar<font color="#CCCCCC"> Francisco if have you approached</font>

648
00:25:56,190 --> 00:25:59,880
vendors about<font color="#E5E5E5"> more about user</font>

649
00:25:57,990 --> 00:26:02,520
configurable hashing and like how much

650
00:25:59,880 --> 00:26:04,260
you know have you like<font color="#E5E5E5"> we're kind of in</font>

651
00:26:02,520 --> 00:26:05,910
<font color="#E5E5E5">roads have you made with getting vendors</font>

652
00:26:04,260 --> 00:26:07,320
to support those<font color="#E5E5E5"> types of fun so yeah</font>

653
00:26:05,910 --> 00:26:09,210
we've<font color="#CCCCCC"> been</font><font color="#E5E5E5"> talking to diagnose and we</font>

654
00:26:07,320 --> 00:26:11,310
<font color="#CCCCCC">said for us and feature</font><font color="#E5E5E5"> requests and</font>

655
00:26:09,210 --> 00:26:13,830
some<font color="#CCCCCC"> of them slowly been</font><font color="#E5E5E5"> being addressed</font>

656
00:26:11,310 --> 00:26:15,690
and but yeah we still don't have<font color="#CCCCCC"> full</font>

657
00:26:13,830 --> 00:26:17,129
capability<font color="#E5E5E5"> oh no</font><font color="#CCCCCC"> I've got a fleet</font><font color="#E5E5E5"> and to</font>

658
00:26:15,690 --> 00:26:19,500
completely configure there<font color="#E5E5E5"> she as much</font>

659
00:26:17,130 --> 00:26:22,040
as we want<font color="#E5E5E5"> and we would like to have</font>

660
00:26:19,500 --> 00:26:22,040
<font color="#E5E5E5">more actually</font>

661
00:26:22,190 --> 00:26:26,240
good evening<font color="#E5E5E5"> Joel Stedman juniper</font>

662
00:26:23,870 --> 00:26:28,909
<font color="#E5E5E5">networks one of your</font><font color="#CCCCCC"> Hurst slides showed</font>

663
00:26:26,240 --> 00:26:30,370
an example<font color="#CCCCCC"> of load and balance</font><font color="#E5E5E5"> and how</font>

664
00:26:28,910 --> 00:26:34,400
that can affect the<font color="#CCCCCC"> total throughput</font>

665
00:26:30,370 --> 00:26:36,770
<font color="#E5E5E5">yeah I haven't</font><font color="#CCCCCC"> actually seen that</font><font color="#E5E5E5"> I mean</font>

666
00:26:34,400 --> 00:26:39,320
the<font color="#CCCCCC"> network's I work on and hardware I</font>

667
00:26:36,770 --> 00:26:41,180
work on load<font color="#CCCCCC"> balancers</font><font color="#E5E5E5"> very well and if</font>

668
00:26:39,320 --> 00:26:42,919
you<font color="#E5E5E5"> have a large number of users it</font>

669
00:26:41,180 --> 00:26:44,150
generally balances out pretty<font color="#CCCCCC"> well but</font>

670
00:26:42,920 --> 00:26:47,090
<font color="#E5E5E5">let's say</font><font color="#CCCCCC"> for the fact that it didn't</font>

671
00:26:44,150 --> 00:26:49,040
<font color="#E5E5E5">and you actually had that what scenario</font>

672
00:26:47,090 --> 00:26:51,740
or I guess why do you assume or say or

673
00:26:49,040 --> 00:26:54,350
<font color="#E5E5E5">what scenario</font><font color="#CCCCCC"> would lower the</font><font color="#E5E5E5"> maximum</font>

674
00:26:51,740 --> 00:26:57,080
the<font color="#E5E5E5"> maximum tenable utilization</font><font color="#CCCCCC"> over all</font>

675
00:26:54,350 --> 00:26:59,540
links because one link is full<font color="#E5E5E5"> I would</font>

676
00:26:57,080 --> 00:27:02,510
expect that<font color="#E5E5E5"> if you're hashing to TCP UDP</font>

677
00:26:59,540 --> 00:27:04,100
<font color="#E5E5E5">and you have a fat flow that fat flow is</font>

678
00:27:02,510 --> 00:27:05,810
going<font color="#E5E5E5"> to slow down but if you have a</font>

679
00:27:04,100 --> 00:27:07,790
million<font color="#CCCCCC"> subscribers or even a</font><font color="#E5E5E5"> hundred</font>

680
00:27:05,810 --> 00:27:09,379
thousand<font color="#CCCCCC"> subscribers the other ones</font>

681
00:27:07,790 --> 00:27:10,909
aren't going to know or care<font color="#E5E5E5"> everyone</font>

682
00:27:09,380 --> 00:27:13,520
<font color="#CCCCCC">who's hashed across the</font><font color="#E5E5E5"> other links</font><font color="#CCCCCC"> I</font>

683
00:27:10,910 --> 00:27:16,040
would expect them to be fine<font color="#E5E5E5"> can you</font>

684
00:27:13,520 --> 00:27:18,080
elaborate<font color="#E5E5E5"> those</font><font color="#CCCCCC"> to what scenario</font><font color="#E5E5E5"> you see</font>

685
00:27:16,040 --> 00:27:23,330
this<font color="#E5E5E5"> often what scenario creates this</font>

686
00:27:18,080 --> 00:27:26,449
<font color="#E5E5E5">and why are other I guess well why do</font>

687
00:27:23,330 --> 00:27:29,389
you see the<font color="#CCCCCC"> maximal use relation</font>

688
00:27:26,450 --> 00:27:30,770
<font color="#CCCCCC">actually being capped</font><font color="#E5E5E5"> okay so in this</font>

689
00:27:29,390 --> 00:27:32,960
<font color="#E5E5E5">case for example let's say maybe the</font>

690
00:27:30,770 --> 00:27:34,430
<font color="#CCCCCC">cases my interest for example we got we</font>

691
00:27:32,960 --> 00:27:35,780
use<font color="#CCCCCC"> these in peat wash across</font><font color="#E5E5E5"> servers</font>

692
00:27:34,430 --> 00:27:39,800
right<font color="#CCCCCC"> it servers can take a maximum</font>

693
00:27:35,780 --> 00:27:41,660
<font color="#CCCCCC">capacity of traffic right so yeah the</font>

694
00:27:39,800 --> 00:27:44,810
more<font color="#CCCCCC"> capacity if we reach a</font><font color="#E5E5E5"> compute</font>

695
00:27:41,660 --> 00:27:46,040
capacity<font color="#CCCCCC"> so that</font><font color="#E5E5E5"> sorry let me rephrase</font>

696
00:27:44,810 --> 00:27:47,899
<font color="#E5E5E5">we're actually banned by the</font><font color="#CCCCCC"> cpu</font>

697
00:27:46,040 --> 00:27:50,000
capacity that<font color="#E5E5E5"> takes to process the flow</font>

698
00:27:47,900 --> 00:27:51,890
<font color="#E5E5E5">right so even</font><font color="#CCCCCC"> cause some degree</font>

699
00:27:50,000 --> 00:27:53,630
something that gives us a<font color="#E5E5E5"> level of</font>

700
00:27:51,890 --> 00:27:55,580
imbalance there's a pretty<font color="#E5E5E5"> much the</font>

701
00:27:53,630 --> 00:27:59,450
situation<font color="#CCCCCC"> with rhythm where we have</font>

702
00:27:55,580 --> 00:28:01,520
right not<font color="#E5E5E5"> sure if I absolutely I always</font>

703
00:27:59,450 --> 00:28:03,170
my perspective is<font color="#CCCCCC"> always I always</font><font color="#E5E5E5"> look a</font>

704
00:28:01,520 --> 00:28:05,990
TCP within<font color="#CCCCCC"> a network so moderate</font><font color="#E5E5E5"> your</font>

705
00:28:03,170 --> 00:28:08,330
<font color="#E5E5E5">router is</font><font color="#CCCCCC"> going to switch I</font><font color="#E5E5E5"> had second</font>

706
00:28:05,990 --> 00:28:11,150
question<font color="#CCCCCC"> about host so I guess if you</font>

707
00:28:08,330 --> 00:28:14,030
<font color="#E5E5E5">see this you see this in a switch or</font>

708
00:28:11,150 --> 00:28:17,960
device to end host perspective<font color="#E5E5E5"> hmm and I</font>

709
00:28:14,030 --> 00:28:21,139
have seen<font color="#CCCCCC"> that</font><font color="#E5E5E5"> with</font><font color="#CCCCCC"> Microsoft's</font><font color="#E5E5E5"> old SLB</font>

710
00:28:17,960 --> 00:28:23,150
<font color="#E5E5E5">where you were limited</font><font color="#CCCCCC"> to one link 1</font>

711
00:28:21,140 --> 00:28:25,340
link utilization<font color="#E5E5E5"> but I don't see that</font>

712
00:28:23,150 --> 00:28:27,020
<font color="#CCCCCC">being a common problem anymore but but</font>

713
00:28:25,340 --> 00:28:28,760
if you have a problem<font color="#CCCCCC"> ok let's assume</font>

714
00:28:27,020 --> 00:28:30,139
<font color="#CCCCCC">that</font><font color="#E5E5E5"> for some reason you got this level</font>

715
00:28:28,760 --> 00:28:31,580
of imbalance so<font color="#CCCCCC"> it should mean letters</font>

716
00:28:30,140 --> 00:28:33,470
<font color="#E5E5E5">like</font><font color="#CCCCCC"> that it was caused by some</font><font color="#E5E5E5"> issue in</font>

717
00:28:31,580 --> 00:28:34,379
the action you see<font color="#CCCCCC"> NPM valves</font><font color="#E5E5E5"> is a</font>

718
00:28:33,470 --> 00:28:36,270
common issue

719
00:28:34,380 --> 00:28:40,520
you see it<font color="#E5E5E5"> frequently in networks it's</font>

720
00:28:36,270 --> 00:28:43,379
not unusual<font color="#E5E5E5"> he's right okay thank you</font>

721
00:28:40,520 --> 00:28:47,580
yeah<font color="#CCCCCC"> because I can keel</font><font color="#E5E5E5"> ever get that</font>

722
00:28:43,380 --> 00:28:50,700
cuz I have<font color="#CCCCCC"> hey if you've got large</font>

723
00:28:47,580 --> 00:28:51,689
server clusters or storage clusters in

724
00:28:50,700 --> 00:28:54,300
data centers and you're replicating

725
00:28:51,690 --> 00:28:56,550
between data centers<font color="#CCCCCC"> you will see flow</font>

726
00:28:54,300 --> 00:29:00,210
situations like that where<font color="#E5E5E5"> you're</font>

727
00:28:56,550 --> 00:29:02,159
hashing on<font color="#E5E5E5"> to</font><font color="#CCCCCC"> 1 out of 8 bundle 8 links</font>

728
00:29:00,210 --> 00:29:04,830
in a bundle<font color="#E5E5E5"> or 16 links in a bundle and</font>

729
00:29:02,160 --> 00:29:06,810
you're looking<font color="#E5E5E5"> at it going well</font><font color="#CCCCCC"> I</font>

730
00:29:04,830 --> 00:29:08,550
just<font color="#CCCCCC"> can't pump any more across because</font>

731
00:29:06,810 --> 00:29:11,310
<font color="#E5E5E5">I'm just flatlining that link more and</font>

732
00:29:08,550 --> 00:29:14,550
more and<font color="#E5E5E5"> more well yes</font><font color="#CCCCCC"> in that point</font><font color="#E5E5E5"> if</font>

733
00:29:11,310 --> 00:29:16,050
you have<font color="#CCCCCC"> a PD that's low problem you're</font>

734
00:29:14,550 --> 00:29:18,480
always going to have<font color="#CCCCCC"> your fat flow can</font>

735
00:29:16,050 --> 00:29:20,970
never exceed<font color="#CCCCCC"> the link speed of your</font>

736
00:29:18,480 --> 00:29:23,070
member links but<font color="#E5E5E5"> that's not necessarily</font>

737
00:29:20,970 --> 00:29:25,800
<font color="#E5E5E5">and it will impact all other customers</font>

738
00:29:23,070 --> 00:29:28,649
<font color="#CCCCCC">on that link</font><font color="#E5E5E5"> but</font><font color="#CCCCCC"> I'd not I have not seen</font>

739
00:29:25,800 --> 00:29:30,780
that impact customers<font color="#E5E5E5"> on it a</font><font color="#CCCCCC"> hashed</font>

740
00:29:28,650 --> 00:29:32,700
<font color="#E5E5E5">across links 3 through 8 which are going</font>

741
00:29:30,780 --> 00:29:34,710
<font color="#E5E5E5">to be different servers or at least</font>

742
00:29:32,700 --> 00:29:36,690
different<font color="#E5E5E5"> place it's a little hard to</font>

743
00:29:34,710 --> 00:29:37,020
<font color="#CCCCCC">say all right now everything</font><font color="#E5E5E5"> else in the</font>

744
00:29:36,690 --> 00:29:39,060
network

745
00:29:37,020 --> 00:29:42,470
make sure you hash on the other links

746
00:29:39,060 --> 00:29:44,669
because this<font color="#CCCCCC"> guy is really full and</font>

747
00:29:42,470 --> 00:29:46,560
unfortunately you're going to<font color="#E5E5E5"> have other</font>

748
00:29:44,670 --> 00:29:48,510
traffic<font color="#CCCCCC"> hashing onto that</font><font color="#E5E5E5"> so what you</font>

749
00:29:46,560 --> 00:29:51,120
have is<font color="#E5E5E5"> your elephant flow starts</font>

750
00:29:48,510 --> 00:29:54,080
crowding out in this case<font color="#E5E5E5"> it would</font><font color="#CCCCCC"> be</font>

751
00:29:51,120 --> 00:29:57,689
25%<font color="#CCCCCC"> of</font><font color="#E5E5E5"> your non elephant flows as well</font>

752
00:29:54,080 --> 00:30:00,090
<font color="#E5E5E5">yes</font><font color="#CCCCCC"> and so you've got 25% impact across</font>

753
00:29:57,690 --> 00:30:02,670
your your flow base this<font color="#E5E5E5"> is not a happy</font>

754
00:30:00,090 --> 00:30:05,629
<font color="#E5E5E5">situation for a network to</font><font color="#CCCCCC"> be in Oh</font>

755
00:30:02,670 --> 00:30:07,860
with all that<font color="#E5E5E5"> but there is still</font><font color="#CCCCCC"> the</font>

756
00:30:05,630 --> 00:30:09,630
<font color="#CCCCCC">other</font><font color="#E5E5E5"> the other bandwidth can</font><font color="#CCCCCC"> be</font>

757
00:30:07,860 --> 00:30:11,520
utilized<font color="#E5E5E5"> you still have impact a</font>

758
00:30:09,630 --> 00:30:13,650
customer you can't you can't magically

759
00:30:11,520 --> 00:30:16,770
change your hash algorithm<font color="#E5E5E5"> on the fly to</font>

760
00:30:13,650 --> 00:30:19,170
say more<font color="#E5E5E5"> if you go over here but that's</font>

761
00:30:16,770 --> 00:30:21,270
<font color="#E5E5E5">the problem is you can't tell the</font>

762
00:30:19,170 --> 00:30:23,430
network<font color="#CCCCCC"> go use the unused capacity</font>

763
00:30:21,270 --> 00:30:26,820
<font color="#CCCCCC">there's no magic knob that does it on</font>

764
00:30:23,430 --> 00:30:28,800
<font color="#E5E5E5">the fly well there is they're having not</font>

765
00:30:26,820 --> 00:30:30,240
personally had to use<font color="#E5E5E5"> because we had</font>

766
00:30:28,800 --> 00:30:32,340
this problem my customers network but

767
00:30:30,240 --> 00:30:33,090
<font color="#E5E5E5">you tell us about the magic knob I love</font>

768
00:30:32,340 --> 00:30:35,220
magic knobs

769
00:30:33,090 --> 00:30:37,649
I want more magic knobs in my network I

770
00:30:35,220 --> 00:30:38,970
don't<font color="#E5E5E5"> hijack this conversation but</font>

771
00:30:37,650 --> 00:30:41,550
complic me afterwards we'll talk about

772
00:30:38,970 --> 00:30:43,170
<font color="#CCCCCC">it all right yeah if he tells me</font><font color="#E5E5E5"> about a</font>

773
00:30:41,550 --> 00:30:44,639
magic knob I promise to share it with

774
00:30:43,170 --> 00:30:46,710
<font color="#E5E5E5">the</font><font color="#CCCCCC"> community because I think</font><font color="#E5E5E5"> we</font><font color="#CCCCCC"> all</font>

775
00:30:44,640 --> 00:30:51,299
need<font color="#CCCCCC"> more magic in</font><font color="#E5E5E5"> our networks</font>

776
00:30:46,710 --> 00:30:54,090
<font color="#E5E5E5">okay the thing with them</font><font color="#CCCCCC"> is over yeah I</font>

777
00:30:51,299 --> 00:30:56,460
just<font color="#CCCCCC"> took you respond to that quickly I</font>

778
00:30:54,090 --> 00:30:59,070
think<font color="#E5E5E5"> the law of small numbers sort of</font>

779
00:30:56,460 --> 00:31:02,250
applies to the distribution<font color="#CCCCCC"> of very</font>

780
00:30:59,070 --> 00:31:03,870
large flows in this case um but you you

781
00:31:02,250 --> 00:31:06,659
do<font color="#E5E5E5"> actually get into consistent</font>

782
00:31:03,870 --> 00:31:10,320
situations where you become unlucky<font color="#E5E5E5"> for</font>

783
00:31:06,659 --> 00:31:12,600
lack of<font color="#E5E5E5"> a better term and yeah everybody</font>

784
00:31:10,320 --> 00:31:14,490
else on the<font color="#E5E5E5"> link is fine and the and the</font>

785
00:31:12,600 --> 00:31:17,789
lag bundle itself is running<font color="#CCCCCC"> at thirty</font>

786
00:31:14,490 --> 00:31:20,640
<font color="#CCCCCC">percent</font><font color="#E5E5E5"> utilization</font><font color="#CCCCCC"> um but the</font>

787
00:31:17,789 --> 00:31:23,658
distribution<font color="#CCCCCC"> of traffic</font><font color="#E5E5E5"> is such that the</font>

788
00:31:20,640 --> 00:31:26,399
bundle<font color="#E5E5E5"> or</font><font color="#CCCCCC"> the portion of the bundle</font><font color="#E5E5E5"> that</font>

789
00:31:23,659 --> 00:31:29,059
<font color="#E5E5E5">has ten percent of the traffic on it</font>

790
00:31:26,399 --> 00:31:32,070
continues to get more<font color="#E5E5E5"> flows because well</font>

791
00:31:29,059 --> 00:31:35,610
<font color="#CCCCCC">that end of</font><font color="#E5E5E5"> the hash distribution is</font>

792
00:31:32,070 --> 00:31:37,139
continuing<font color="#CCCCCC"> to you know get a slightly</font>

793
00:31:35,610 --> 00:31:39,510
higher<font color="#CCCCCC"> percentage of all of the flows</font>

794
00:31:37,140 --> 00:31:42,450
than<font color="#E5E5E5"> the other members of the bundle</font>

795
00:31:39,510 --> 00:31:43,919
right so that's kind of<font color="#E5E5E5"> cool in the</font>

796
00:31:42,450 --> 00:31:45,779
<font color="#E5E5E5">sense that if you alarm it like 50</font>

797
00:31:43,919 --> 00:31:47,880
percent<font color="#CCCCCC"> or 70 percent utilization on</font>

798
00:31:45,779 --> 00:31:49,529
your links<font color="#E5E5E5"> you might want to also alarm</font>

799
00:31:47,880 --> 00:31:50,789
at<font color="#CCCCCC"> twenty</font><font color="#E5E5E5"> or</font><font color="#CCCCCC"> thirty percent utilization</font>

800
00:31:49,529 --> 00:31:53,130
where there's a hundred percent

801
00:31:50,789 --> 00:31:55,230
utilization on one member right so if

802
00:31:53,130 --> 00:31:58,620
you have<font color="#CCCCCC"> thirty-two member lag bundles</font>

803
00:31:55,230 --> 00:32:00,029
like<font color="#E5E5E5"> you can get unlucky that's</font>

804
00:31:58,620 --> 00:32:03,899
<font color="#E5E5E5">definitely a thing that happens and</font>

805
00:32:00,029 --> 00:32:06,510
you'll be like well I'm<font color="#E5E5E5"> it's not being</font>

806
00:32:03,899 --> 00:32:09,270
heavily<font color="#E5E5E5"> utilized except a small part of</font>

807
00:32:06,510 --> 00:32:11,158
it is a great<font color="#E5E5E5"> understand</font><font color="#CCCCCC"> much for the</font>

808
00:32:09,270 --> 00:32:11,800
audience participation<font color="#CCCCCC"> and</font><font color="#E5E5E5"> thank you for</font>

809
00:32:11,159 --> 00:32:17,599
the<font color="#E5E5E5"> scooper</font>

810
00:32:11,800 --> 00:32:17,599
[Applause]

