1
00:00:00,410 --> 00:00:05,910
thank you<font color="#CCCCCC"> I'm gonna talk today about</font><font color="#E5E5E5"> the</font>

2
00:00:03,929 --> 00:00:08,189
work I did<font color="#CCCCCC"> in AT&T during this summer</font>

3
00:00:05,910 --> 00:00:10,710
with a<font color="#CCCCCC"> man shake Tim Griffin and</font>

4
00:00:08,189 --> 00:00:13,650
Jennifer<font color="#CCCCCC"> Rexford</font><font color="#E5E5E5"> on the interaction of</font>

5
00:00:10,710 --> 00:00:15,570
OSPF and BGP<font color="#CCCCCC"> and you're gonna see</font><font color="#E5E5E5"> how</font>

6
00:00:13,650 --> 00:00:19,020
hot potatoes are hitting<font color="#CCCCCC"> up our</font><font color="#E5E5E5"> BGP</font>

7
00:00:15,570 --> 00:00:21,480
routing<font color="#E5E5E5"> so first of all most</font><font color="#CCCCCC"> people when</font>

8
00:00:19,020 --> 00:00:24,359
they think about BGP<font color="#E5E5E5"> they think about</font>

9
00:00:21,480 --> 00:00:26,340
<font color="#CCCCCC">intradomain routing mainly and then talk</font>

10
00:00:24,359 --> 00:00:29,760
about<font color="#CCCCCC"> ok routing in</font><font color="#E5E5E5"> southern areas we</font>

11
00:00:26,340 --> 00:00:32,250
<font color="#CCCCCC">think of OSPF is is but in large transit</font>

12
00:00:29,760 --> 00:00:36,989
areas<font color="#E5E5E5"> most of the</font><font color="#CCCCCC"> traffic</font><font color="#E5E5E5"> is actually</font>

13
00:00:32,250 --> 00:00:38,250
<font color="#E5E5E5">routed using BGP and IP</font><font color="#CCCCCC"> changed so</font>

14
00:00:36,989 --> 00:00:41,820
things that<font color="#E5E5E5"> happen inside</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> network</font>

15
00:00:38,250 --> 00:00:44,879
<font color="#E5E5E5">can and do have impact in the BGP</font>

16
00:00:41,820 --> 00:00:47,730
decisions<font color="#E5E5E5"> so in this work are trying to</font>

17
00:00:44,879 --> 00:00:49,829
understand<font color="#E5E5E5"> how these interactions happen</font>

18
00:00:47,730 --> 00:00:51,980
and mainly it happens<font color="#E5E5E5"> because</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> hot</font>

19
00:00:49,829 --> 00:00:55,980
potato<font color="#E5E5E5"> routing so let's look at this</font>

20
00:00:51,980 --> 00:00:58,349
<font color="#E5E5E5">simple</font><font color="#CCCCCC"> example of an IP network</font><font color="#E5E5E5"> where we</font>

21
00:00:55,980 --> 00:01:02,059
have routers in San Francisco New York

22
00:00:58,350 --> 00:01:04,979
and Dallas imagine now we have

23
00:01:02,059 --> 00:01:08,850
<font color="#E5E5E5">destination</font><font color="#CCCCCC"> outside so external this</font>

24
00:01:04,979 --> 00:01:11,100
nation to<font color="#E5E5E5"> these</font><font color="#CCCCCC"> areas with two</font><font color="#E5E5E5"> equally</font>

25
00:01:08,850 --> 00:01:12,449
good routes that<font color="#CCCCCC"> are learned in</font><font color="#E5E5E5"> San</font>

26
00:01:11,100 --> 00:01:17,189
Francisco<font color="#CCCCCC"> in</font><font color="#E5E5E5"> New</font><font color="#CCCCCC"> York</font>

27
00:01:12,450 --> 00:01:21,390
<font color="#E5E5E5">and Dallas</font><font color="#CCCCCC"> has to the students of routes</font>

28
00:01:17,189 --> 00:01:23,970
one of<font color="#E5E5E5"> cost</font><font color="#CCCCCC"> 9ig because 9 to reach the</font>

29
00:01:21,390 --> 00:01:27,240
destination<font color="#CCCCCC"> and</font><font color="#E5E5E5"> the other one with cost</font>

30
00:01:23,970 --> 00:01:30,420
<font color="#CCCCCC">10 so in this case hot potato routing</font>

31
00:01:27,240 --> 00:01:34,589
tells us that Dallas would choose the

32
00:01:30,420 --> 00:01:39,150
exit point with closes<font color="#CCCCCC"> IDP</font><font color="#E5E5E5"> distance to</font>

33
00:01:34,590 --> 00:01:42,930
forward<font color="#E5E5E5"> traffic to this</font><font color="#CCCCCC"> destination</font><font color="#E5E5E5"> so</font>

34
00:01:39,150 --> 00:01:46,470
<font color="#E5E5E5">imagine</font><font color="#CCCCCC"> that something</font><font color="#E5E5E5"> internal habit of</font>

35
00:01:42,930 --> 00:01:49,140
failure or some<font color="#CCCCCC"> plan maintenance or even</font>

36
00:01:46,470 --> 00:01:52,530
traffic engineering that made the cost

37
00:01:49,140 --> 00:01:55,860
from<font color="#CCCCCC"> the path to Dallas to San Francisco</font>

38
00:01:52,530 --> 00:02:00,390
to change from<font color="#E5E5E5"> 9 to 11 so now in this</font>

39
00:01:55,860 --> 00:02:02,850
example<font color="#E5E5E5"> the all the the</font><font color="#CCCCCC"> routes</font><font color="#E5E5E5"> are being</font>

40
00:02:00,390 --> 00:02:06,360
<font color="#E5E5E5">forwarded through San Francisco going to</font>

41
00:02:02,850 --> 00:02:08,128
start using<font color="#CCCCCC"> the exit point</font><font color="#E5E5E5"> in New York</font>

42
00:02:06,360 --> 00:02:12,330
and that's what we are<font color="#E5E5E5"> calling here</font><font color="#CCCCCC"> a</font>

43
00:02:08,128 --> 00:02:13,120
hot<font color="#E5E5E5"> potato change so the BGP routes look</font>

44
00:02:12,330 --> 00:02:15,879
the same

45
00:02:13,120 --> 00:02:18,280
just<font color="#E5E5E5"> changed because</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> the IGP cost</font><font color="#CCCCCC"> in</font>

46
00:02:15,879 --> 00:02:23,649
this example<font color="#E5E5E5"> I'm just showing it for one</font>

47
00:02:18,280 --> 00:02:25,989
destination prefix but in a big trans

48
00:02:23,650 --> 00:02:28,750
<font color="#CCCCCC">Network you have it may have thousands</font>

49
00:02:25,989 --> 00:02:30,459
of destinations shifting<font color="#E5E5E5"> from</font><font color="#CCCCCC"> Mon egress</font>

50
00:02:28,750 --> 00:02:33,250
<font color="#CCCCCC">point</font><font color="#E5E5E5"> to the other just</font><font color="#CCCCCC"> because of a</font>

51
00:02:30,459 --> 00:02:37,900
small cost change inside the<font color="#E5E5E5"> network and</font>

52
00:02:33,250 --> 00:02:40,480
this has<font color="#E5E5E5"> consequences for so during this</font>

53
00:02:37,900 --> 00:02:43,180
the time that the traffic shifting you

54
00:02:40,480 --> 00:02:46,268
may have trans routing instability and

55
00:02:43,180 --> 00:02:49,989
the<font color="#E5E5E5"> track shift may cause congestion in</font>

56
00:02:46,269 --> 00:02:53,530
in this path<font color="#E5E5E5"> which will cause delays and</font>

57
00:02:49,989 --> 00:02:57,120
losses<font color="#E5E5E5"> and some of these may be exported</font>

58
00:02:53,530 --> 00:02:59,859
to external<font color="#E5E5E5"> bgp</font><font color="#CCCCCC"> to your neighbors</font><font color="#E5E5E5"> and</font>

59
00:02:57,120 --> 00:03:02,739
<font color="#E5E5E5">the reason</font><font color="#CCCCCC"> that there is this</font>

60
00:02:59,859 --> 00:03:07,540
interaction<font color="#E5E5E5"> between</font><font color="#CCCCCC"> those two is</font><font color="#E5E5E5"> that</font>

61
00:03:02,739 --> 00:03:09,220
<font color="#E5E5E5">BGP uses</font><font color="#CCCCCC"> IGP information in its decision</font>

62
00:03:07,540 --> 00:03:12,069
process first of all of<font color="#CCCCCC"> course has</font><font color="#E5E5E5"> to</font>

63
00:03:09,220 --> 00:03:17,200
check if the<font color="#E5E5E5"> next hop is reachable and</font>

64
00:03:12,069 --> 00:03:19,510
it uses<font color="#CCCCCC"> AGP</font><font color="#E5E5E5"> then if all the other</font>

65
00:03:17,200 --> 00:03:21,940
attributes<font color="#CCCCCC"> look the same so if the</font>

66
00:03:19,510 --> 00:03:24,668
routes are equally good from<font color="#CCCCCC"> BGP</font>

67
00:03:21,940 --> 00:03:27,849
standpoint they need to do the hot

68
00:03:24,669 --> 00:03:31,690
potato check so to check if which one

69
00:03:27,849 --> 00:03:34,738
has lowest<font color="#E5E5E5"> Deepika and in this work what</font>

70
00:03:31,690 --> 00:03:37,829
we want to understand<font color="#CCCCCC"> is so how much</font>

71
00:03:34,739 --> 00:03:41,620
<font color="#E5E5E5">that's the impact of hot potato</font><font color="#CCCCCC"> routing</font>

72
00:03:37,829 --> 00:03:43,660
<font color="#E5E5E5">in a real network so why do we care</font>

73
00:03:41,620 --> 00:03:48,430
<font color="#CCCCCC">about for hot potatoes so first of all</font>

74
00:03:43,660 --> 00:03:50,620
there<font color="#CCCCCC"> is a large number of</font><font color="#E5E5E5"> prefix that</font>

75
00:03:48,430 --> 00:03:52,930
<font color="#E5E5E5">can be potentially affected so all</font>

76
00:03:50,620 --> 00:03:56,459
prefix that<font color="#E5E5E5"> we learn</font><font color="#CCCCCC"> from peers are</font>

77
00:03:52,930 --> 00:03:59,980
learned<font color="#E5E5E5"> in lots of different pops and</font>

78
00:03:56,459 --> 00:04:01,690
may be affected by<font color="#E5E5E5"> hot potato and all</font>

79
00:03:59,980 --> 00:04:05,768
motorhome customers<font color="#E5E5E5"> so the customers</font>

80
00:04:01,690 --> 00:04:08,290
that pay more<font color="#E5E5E5"> also may be affected by</font>

81
00:04:05,769 --> 00:04:10,720
<font color="#E5E5E5">hot potato routing so we want to</font>

82
00:04:08,290 --> 00:04:13,959
understand<font color="#E5E5E5"> the impact now and real</font>

83
00:04:10,720 --> 00:04:18,029
<font color="#CCCCCC">networks</font><font color="#E5E5E5"> how often does hot potato</font>

84
00:04:13,959 --> 00:04:20,530
routing<font color="#E5E5E5"> causes bgp routes to shift and</font>

85
00:04:18,029 --> 00:04:23,229
when this change happened

86
00:04:20,529 --> 00:04:25,030
how many prefix are impacted what's the

87
00:04:23,230 --> 00:04:28,150
<font color="#E5E5E5">fraction of our BGP table that's</font>

88
00:04:25,030 --> 00:04:32,109
changing because of<font color="#E5E5E5"> the</font><font color="#CCCCCC"> this shift and</font>

89
00:04:28,150 --> 00:04:36,580
also what's the<font color="#E5E5E5"> delay from an IG</font><font color="#CCCCCC"> P</font>

90
00:04:32,110 --> 00:04:42,640
change<font color="#E5E5E5"> to to the time that the BGP</font>

91
00:04:36,580 --> 00:04:45,340
<font color="#E5E5E5">routes</font><font color="#CCCCCC"> a converge so and after</font>

92
00:04:42,640 --> 00:04:47,380
ultimately what we<font color="#CCCCCC"> want to do is to try</font>

93
00:04:45,340 --> 00:04:50,710
<font color="#CCCCCC">to</font><font color="#E5E5E5"> avoid routing instability caused by</font>

94
00:04:47,380 --> 00:04:54,400
<font color="#E5E5E5">hot potato so operators should try to</font>

95
00:04:50,710 --> 00:04:57,159
minimize the number<font color="#CCCCCC"> of times</font><font color="#E5E5E5"> that the</font>

96
00:04:54,400 --> 00:05:00,070
hot potato chains happen and for<font color="#E5E5E5"> the</font>

97
00:04:57,160 --> 00:05:02,320
vendors the messages<font color="#CCCCCC"> so how if the hot</font>

98
00:05:00,070 --> 00:05:04,210
potato has to happen<font color="#CCCCCC"> so if you have to</font>

99
00:05:02,320 --> 00:05:06,099
change your<font color="#CCCCCC"> BGP routes because</font><font color="#E5E5E5"> something</font>

100
00:05:04,210 --> 00:05:09,700
<font color="#CCCCCC">happened inside</font><font color="#E5E5E5"> a network how can you</font>

101
00:05:06,100 --> 00:05:12,000
minimize<font color="#E5E5E5"> the impact of that by making</font>

102
00:05:09,700 --> 00:05:15,610
this interaction<font color="#E5E5E5"> as smooth as possible</font>

103
00:05:12,000 --> 00:05:19,180
<font color="#E5E5E5">our approach to do that is to we</font><font color="#CCCCCC"> measure</font>

104
00:05:15,610 --> 00:05:22,750
<font color="#E5E5E5">hot potato changes in</font><font color="#CCCCCC"> 18 T's Network so</font>

105
00:05:19,180 --> 00:05:27,190
<font color="#E5E5E5">we collected measurement of both OSPF</font>

106
00:05:22,750 --> 00:05:30,850
and BGP<font color="#E5E5E5"> methods in the common backbone</font>

107
00:05:27,190 --> 00:05:33,340
for<font color="#CCCCCC"> each</font><font color="#E5E5E5"> in</font><font color="#CCCCCC"> C and we</font><font color="#E5E5E5"> have one</font><font color="#CCCCCC"> OSPF</font>

108
00:05:30,850 --> 00:05:36,160
monitor that<font color="#E5E5E5"> collects all the link state</font>

109
00:05:33,340 --> 00:05:40,570
advertisements<font color="#E5E5E5"> and a BGP monitor that</font>

110
00:05:36,160 --> 00:05:43,930
has feeds of tables<font color="#E5E5E5"> and updates from at</font>

111
00:05:40,570 --> 00:05:46,780
least<font color="#E5E5E5"> one router per pop in the common</font>

112
00:05:43,930 --> 00:05:48,970
backbone we process we process these

113
00:05:46,780 --> 00:05:51,909
<font color="#CCCCCC">messages to cluster</font><font color="#E5E5E5"> them in time so</font><font color="#CCCCCC"> that</font>

114
00:05:48,970 --> 00:05:54,970
we can get clear events for both<font color="#E5E5E5"> the</font>

115
00:05:51,910 --> 00:05:57,729
<font color="#CCCCCC">west</font><font color="#E5E5E5"> PF and</font><font color="#CCCCCC"> BGP and then we correlate</font>

116
00:05:54,970 --> 00:06:01,270
this<font color="#E5E5E5"> these two streams</font><font color="#CCCCCC"> of data</font><font color="#E5E5E5"> so the</font>

117
00:05:57,729 --> 00:06:03,880
idea<font color="#CCCCCC"> here is</font><font color="#E5E5E5"> to emulate one operational</font>

118
00:06:01,270 --> 00:06:06,130
router<font color="#E5E5E5"> and we can see all the changes</font>

119
00:06:03,880 --> 00:06:08,650
<font color="#E5E5E5">there SPF changes from that router point</font>

120
00:06:06,130 --> 00:06:11,740
of view and also<font color="#E5E5E5"> the BGP updates that it</font>

121
00:06:08,650 --> 00:06:13,960
sends<font color="#E5E5E5"> here's just an example of how we</font>

122
00:06:11,740 --> 00:06:17,620
do<font color="#E5E5E5"> this matching so first we have</font><font color="#CCCCCC"> to</font>

123
00:06:13,960 --> 00:06:20,950
transform the stream of<font color="#CCCCCC"> OSPF messages</font>

124
00:06:17,620 --> 00:06:22,750
dialysis<font color="#CCCCCC"> into changes with the router</font>

125
00:06:20,950 --> 00:06:24,250
that<font color="#E5E5E5"> we are trying</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> simulate the point</font>

126
00:06:22,750 --> 00:06:27,400
of view<font color="#E5E5E5"> of that router so you mentioned</font>

127
00:06:24,250 --> 00:06:29,289
<font color="#CCCCCC">that you have</font><font color="#E5E5E5"> this series</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> methods</font>

128
00:06:27,400 --> 00:06:32,260
<font color="#E5E5E5">refresh link failures which change</font>

129
00:06:29,289 --> 00:06:33,090
things<font color="#E5E5E5"> like that and then we</font><font color="#CCCCCC"> transform</font>

130
00:06:32,260 --> 00:06:34,830
them

131
00:06:33,090 --> 00:06:36,270
- this<font color="#CCCCCC"> volatile</font><font color="#E5E5E5"> quantity also refresh</font>

132
00:06:34,830 --> 00:06:40,010
<font color="#CCCCCC">message don't</font><font color="#E5E5E5"> we don't really care about</font>

133
00:06:36,270 --> 00:06:43,770
<font color="#E5E5E5">them so</font><font color="#CCCCCC"> a link</font><font color="#E5E5E5"> failure may cause the</font>

134
00:06:40,010 --> 00:06:46,860
<font color="#E5E5E5">path strong the our point of</font><font color="#CCCCCC"> view to a</font>

135
00:06:43,770 --> 00:06:49,200
lot<font color="#E5E5E5"> of the egress points to change costs</font>

136
00:06:46,860 --> 00:06:52,740
may cause some<font color="#E5E5E5"> of them to</font><font color="#CCCCCC"> be deleted and</font>

137
00:06:49,200 --> 00:06:55,500
<font color="#E5E5E5">so</font><font color="#CCCCCC"> we just</font><font color="#E5E5E5"> classify that we also look at</font>

138
00:06:52,740 --> 00:06:57,120
<font color="#E5E5E5">the BGP side we get a stream of BGP</font>

139
00:06:55,500 --> 00:06:58,860
updates I'm not going to explain<font color="#CCCCCC"> exactly</font>

140
00:06:57,120 --> 00:07:00,810
how<font color="#E5E5E5"> I do this if you</font><font color="#CCCCCC"> are</font><font color="#E5E5E5"> interested in</font>

141
00:06:58,860 --> 00:07:03,210
in<font color="#E5E5E5"> my</font><font color="#CCCCCC"> webpage you can find some</font><font color="#E5E5E5"> more</font>

142
00:07:00,810 --> 00:07:07,470
detail<font color="#E5E5E5"> on that</font><font color="#CCCCCC"> but to classify all the</font>

143
00:07:03,210 --> 00:07:09,900
<font color="#CCCCCC">BGP updates according</font><font color="#E5E5E5"> to how if they</font>

144
00:07:07,470 --> 00:07:12,600
could be caused<font color="#E5E5E5"> by</font><font color="#CCCCCC"> an or SPF event or</font>

145
00:07:09,900 --> 00:07:15,299
not in<font color="#E5E5E5"> which kind of voice path event</font>

146
00:07:12,600 --> 00:07:18,360
could cause<font color="#CCCCCC"> that update and then we</font>

147
00:07:15,300 --> 00:07:21,389
match them<font color="#CCCCCC"> in time so in this case I put</font>

148
00:07:18,360 --> 00:07:25,260
<font color="#CCCCCC">an example of this path cost change that</font>

149
00:07:21,389 --> 00:07:28,620
caused a<font color="#E5E5E5"> couple of</font><font color="#CCCCCC"> BGP</font><font color="#E5E5E5"> updates to happen</font>

150
00:07:25,260 --> 00:07:30,810
so how much nice now<font color="#CCCCCC"> we</font><font color="#E5E5E5"> wanna try to</font>

151
00:07:28,620 --> 00:07:34,889
answer<font color="#E5E5E5"> acquired so how how much of this</font>

152
00:07:30,810 --> 00:07:37,470
<font color="#E5E5E5">really happened in the TNT network so we</font>

153
00:07:34,889 --> 00:07:42,600
I'm presenting<font color="#CCCCCC"> here</font><font color="#E5E5E5"> some results that</font><font color="#CCCCCC"> I</font>

154
00:07:37,470 --> 00:07:44,880
found for June last year<font color="#E5E5E5"> and I am</font>

155
00:07:42,600 --> 00:07:48,030
presenting the<font color="#CCCCCC"> results for two routers I</font>

156
00:07:44,880 --> 00:07:51,090
chose one router<font color="#E5E5E5"> in a</font><font color="#CCCCCC"> path</font><font color="#E5E5E5"> with rich</font>

157
00:07:48,030 --> 00:07:53,849
peering so where it in<font color="#CCCCCC"> C appears with</font>

158
00:07:51,090 --> 00:07:57,479
all the other big<font color="#E5E5E5"> guys all the tier ones</font>

159
00:07:53,850 --> 00:08:00,660
and another<font color="#E5E5E5"> path with no peering so</font>

160
00:07:57,479 --> 00:08:04,229
there is no no peering that<font color="#CCCCCC"> path</font><font color="#E5E5E5"> and we</font>

161
00:08:00,660 --> 00:08:07,710
see the<font color="#CCCCCC"> first table</font><font color="#E5E5E5"> it shows the</font>

162
00:08:04,229 --> 00:08:11,550
percentage of<font color="#E5E5E5"> updates in a day that</font><font color="#CCCCCC"> was</font>

163
00:08:07,710 --> 00:08:14,510
caused by<font color="#E5E5E5"> OSPF and we can see that in a</font>

164
00:08:11,550 --> 00:08:20,039
pop of rich peering it doesn't really

165
00:08:14,510 --> 00:08:23,039
have<font color="#CCCCCC"> much OSPF hot</font><font color="#E5E5E5"> potato related</font>

166
00:08:20,039 --> 00:08:25,710
<font color="#CCCCCC">updates and but in</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> pub</font><font color="#E5E5E5"> with no</font>

167
00:08:23,039 --> 00:08:28,380
peering it varies from of<font color="#CCCCCC"> course there</font>

168
00:08:25,710 --> 00:08:30,900
is some days that<font color="#CCCCCC"> there is no updates or</font>

169
00:08:28,380 --> 00:08:34,200
<font color="#E5E5E5">caused by hot potato but there are some</font>

170
00:08:30,900 --> 00:08:36,390
days that go up<font color="#E5E5E5"> to</font><font color="#CCCCCC"> 46% of the updates in</font>

171
00:08:34,200 --> 00:08:38,039
<font color="#E5E5E5">a day that were caused by hot potato and</font>

172
00:08:36,390 --> 00:08:41,130
you<font color="#CCCCCC"> can see the last column</font><font color="#E5E5E5"> of this</font>

173
00:08:38,039 --> 00:08:43,380
table it shows you for the month of<font color="#E5E5E5"> June</font>

174
00:08:41,130 --> 00:08:43,700
<font color="#CCCCCC">the percent of drug day</font><font color="#E5E5E5"> is the number of</font>

175
00:08:43,380 --> 00:08:48,320
<font color="#E5E5E5">the</font>

176
00:08:43,700 --> 00:08:51,200
<font color="#CCCCCC">had more</font><font color="#E5E5E5"> than 10% of updates caused by</font>

177
00:08:48,320 --> 00:08:53,360
hot potato<font color="#E5E5E5"> and in this for the</font><font color="#CCCCCC"> gnome</font>

178
00:08:51,200 --> 00:08:56,270
peering round to<font color="#CCCCCC"> recede that there are</font>

179
00:08:53,360 --> 00:08:57,830
five days so now<font color="#E5E5E5"> answer the first</font>

180
00:08:56,270 --> 00:09:03,079
question<font color="#CCCCCC"> hot potato</font>

181
00:08:57,830 --> 00:09:06,290
does happen and it can have some impact

182
00:09:03,080 --> 00:09:08,750
<font color="#CCCCCC">but</font><font color="#E5E5E5"> how much is the</font><font color="#CCCCCC"> this impact so now</font>

183
00:09:06,290 --> 00:09:11,959
we have the second<font color="#CCCCCC"> table that shows for</font>

184
00:09:08,750 --> 00:09:14,630
<font color="#CCCCCC">one LSA</font><font color="#E5E5E5"> one</font><font color="#CCCCCC"> or</font><font color="#E5E5E5"> SPF let's say what was</font>

185
00:09:11,960 --> 00:09:19,070
<font color="#E5E5E5">the impact that it</font><font color="#CCCCCC"> costs</font><font color="#E5E5E5"> the good news</font>

186
00:09:14,630 --> 00:09:21,920
is so most of the LSA is around<font color="#CCCCCC"> 95%</font><font color="#E5E5E5"> for</font>

187
00:09:19,070 --> 00:09:24,950
both routers doesn't cause any impact<font color="#CCCCCC"> so</font>

188
00:09:21,920 --> 00:09:28,520
it doesn't impact<font color="#E5E5E5"> it doesn't generate</font>

189
00:09:24,950 --> 00:09:31,940
<font color="#CCCCCC">any</font><font color="#E5E5E5"> bgp update but for a small</font>

190
00:09:28,520 --> 00:09:34,160
percentage of the<font color="#CCCCCC"> Alice's that do impact</font>

191
00:09:31,940 --> 00:09:37,490
bgp they can have a significant impact

192
00:09:34,160 --> 00:09:41,810
for<font color="#CCCCCC"> the router if no</font><font color="#E5E5E5"> peering we</font><font color="#CCCCCC"> thought</font>

193
00:09:37,490 --> 00:09:45,230
we saw<font color="#E5E5E5"> a day in which 90 59 percent of</font>

194
00:09:41,810 --> 00:09:51,770
the BGP<font color="#E5E5E5"> table change because of one</font>

195
00:09:45,230 --> 00:09:54,710
<font color="#E5E5E5">single event inside the network so we</font>

196
00:09:51,770 --> 00:09:57,290
understand now that<font color="#E5E5E5"> this hot potato can</font>

197
00:09:54,710 --> 00:10:01,310
have<font color="#E5E5E5"> a significant impact</font><font color="#CCCCCC"> but how long</font>

198
00:09:57,290 --> 00:10:04,790
does it take after the<font color="#CCCCCC"> OSPF change</font>

199
00:10:01,310 --> 00:10:08,449
happened for the<font color="#E5E5E5"> BGP updates to come out</font>

200
00:10:04,790 --> 00:10:11,719
so<font color="#E5E5E5"> we</font><font color="#CCCCCC"> can divide this this delay in</font>

201
00:10:08,450 --> 00:10:15,290
three three different parts<font color="#E5E5E5"> first the</font>

202
00:10:11,720 --> 00:10:19,070
router<font color="#E5E5E5"> has to learn after the</font><font color="#CCCCCC"> OSPF</font>

203
00:10:15,290 --> 00:10:22,730
converts and<font color="#CCCCCC"> OSPF route is installed you</font>

204
00:10:19,070 --> 00:10:26,570
have<font color="#CCCCCC"> to</font><font color="#E5E5E5"> you have to revisit your PCP</font>

205
00:10:22,730 --> 00:10:28,120
decision<font color="#CCCCCC"> too and see how long does it</font>

206
00:10:26,570 --> 00:10:30,920
take<font color="#CCCCCC"> so this</font><font color="#E5E5E5"> depends a lot on</font>

207
00:10:28,120 --> 00:10:32,690
<font color="#CCCCCC">implementation in the router</font><font color="#E5E5E5"> and there</font>

208
00:10:30,920 --> 00:10:35,870
are different ways<font color="#E5E5E5"> of doing it</font><font color="#CCCCCC"> so you</font>

209
00:10:32,690 --> 00:10:39,620
<font color="#E5E5E5">can do</font><font color="#CCCCCC"> in</font><font color="#E5E5E5"> a time a timer based so every</font>

210
00:10:35,870 --> 00:10:42,320
X seconds<font color="#E5E5E5"> you run a timer</font><font color="#CCCCCC"> that process</font>

211
00:10:39,620 --> 00:10:45,590
that will revisit your decision and then

212
00:10:42,320 --> 00:10:48,590
you can update your<font color="#CCCCCC"> BGP routes according</font>

213
00:10:45,590 --> 00:10:50,000
to your<font color="#CCCCCC"> OSPF information</font><font color="#E5E5E5"> or it can be</font>

214
00:10:48,590 --> 00:10:52,730
<font color="#E5E5E5">even driven whenever something happens</font>

215
00:10:50,000 --> 00:10:55,160
in<font color="#CCCCCC"> OSPF that who is</font><font color="#E5E5E5"> going to be</font>

216
00:10:52,730 --> 00:10:59,090
<font color="#E5E5E5">reflected into a BGP decision</font>

217
00:10:55,160 --> 00:11:01,670
after that<font color="#E5E5E5"> so in the case of</font><font color="#CCCCCC"> ATT and</font>

218
00:10:59,090 --> 00:11:05,210
<font color="#E5E5E5">lots of big networks there is an IB GP</font>

219
00:11:01,670 --> 00:11:07,550
hierarchy and you<font color="#E5E5E5"> may</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> may also have</font>

220
00:11:05,210 --> 00:11:10,100
<font color="#CCCCCC">to wait for your rod reflector to tell</font>

221
00:11:07,550 --> 00:11:13,819
you that<font color="#E5E5E5"> your of the new route you may</font>

222
00:11:10,100 --> 00:11:17,180
not know of the the route that has the

223
00:11:13,820 --> 00:11:19,250
shortest path from<font color="#CCCCCC"> you now and so that's</font>

224
00:11:17,180 --> 00:11:21,469
a something that's<font color="#E5E5E5"> an hour delay</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> all</font>

225
00:11:19,250 --> 00:11:23,810
this<font color="#CCCCCC"> this tube first points</font><font color="#E5E5E5"> takes the</font>

226
00:11:21,470 --> 00:11:26,840
delay from whence the<font color="#CCCCCC"> OSPF</font><font color="#E5E5E5"> can happen</font>

227
00:11:23,810 --> 00:11:29,359
it's<font color="#E5E5E5"> you BGP learns about the change and</font>

228
00:11:26,840 --> 00:11:31,100
<font color="#E5E5E5">then of</font><font color="#CCCCCC"> course if you're changing fifty</font>

229
00:11:29,360 --> 00:11:33,140
<font color="#CCCCCC">nine percent</font><font color="#E5E5E5"> of your routing table it</font>

230
00:11:31,100 --> 00:11:35,600
may take a while to<font color="#E5E5E5"> transfer all these</font>

231
00:11:33,140 --> 00:11:39,980
updates<font color="#CCCCCC"> until the last</font><font color="#E5E5E5"> up to</font><font color="#CCCCCC"> the updates</font>

232
00:11:35,600 --> 00:11:42,980
gonna come out so let's see now<font color="#E5E5E5"> what we</font>

233
00:11:39,980 --> 00:11:44,870
owe<font color="#E5E5E5"> first of all so that's one thing</font>

234
00:11:42,980 --> 00:11:47,720
<font color="#E5E5E5">that's very important is so this delay</font>

235
00:11:44,870 --> 00:11:50,030
<font color="#CCCCCC">is a very sensitive both to the router</font>

236
00:11:47,720 --> 00:11:53,240
implementations<font color="#E5E5E5"> and the design of</font><font color="#CCCCCC"> your</font>

237
00:11:50,030 --> 00:11:55,819
<font color="#E5E5E5">network and I'm gonna show here one</font>

238
00:11:53,240 --> 00:11:59,120
<font color="#E5E5E5">example that we saw in the</font><font color="#CCCCCC"> eighteen t</font>

239
00:11:55,820 --> 00:12:03,020
<font color="#CCCCCC">network first this</font><font color="#E5E5E5"> graph it shows</font><font color="#CCCCCC"> the</font>

240
00:11:59,120 --> 00:12:05,750
time difference so<font color="#E5E5E5"> when I saw the LSA so</font>

241
00:12:03,020 --> 00:12:10,130
the time<font color="#E5E5E5"> that I saw the</font><font color="#CCCCCC"> first update I</font>

242
00:12:05,750 --> 00:12:13,420
came for<font color="#CCCCCC"> that LSA and in the y-axis see</font>

243
00:12:10,130 --> 00:12:16,850
the fraction of hot<font color="#E5E5E5"> potato changes</font>

244
00:12:13,420 --> 00:12:18,800
cumulative fraction and first of<font color="#E5E5E5"> all</font>

245
00:12:16,850 --> 00:12:22,070
let's look at the<font color="#CCCCCC"> the blue curve we did</font>

246
00:12:18,800 --> 00:12:26,120
some lab experiments with<font color="#E5E5E5"> a router and</font>

247
00:12:22,070 --> 00:12:28,550
we<font color="#E5E5E5"> we can see that in this case</font><font color="#CCCCCC"> that we</font>

248
00:12:26,120 --> 00:12:32,120
have a uniform distribution in the range

249
00:12:28,550 --> 00:12:34,069
<font color="#E5E5E5">from</font><font color="#CCCCCC"> zero to around 60 seconds</font><font color="#E5E5E5"> which</font>

250
00:12:32,120 --> 00:12:38,780
<font color="#E5E5E5">suggests that this</font><font color="#CCCCCC"> rather had a timer</font>

251
00:12:34,070 --> 00:12:40,730
<font color="#CCCCCC">base implementation to for the OSPF bgp</font>

252
00:12:38,780 --> 00:12:44,150
interaction so in this straight<font color="#CCCCCC"> line</font>

253
00:12:40,730 --> 00:12:46,790
just<font color="#CCCCCC"> means that the OSPF event can</font>

254
00:12:44,150 --> 00:12:49,250
<font color="#E5E5E5">happen in any time in this range from</font>

255
00:12:46,790 --> 00:12:51,680
<font color="#CCCCCC">zero to sixty and depending when it</font>

256
00:12:49,250 --> 00:12:55,190
happens then it's<font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> see a higher or</font>

257
00:12:51,680 --> 00:12:57,890
lower<font color="#E5E5E5"> delay</font><font color="#CCCCCC"> up to sixty seconds</font><font color="#E5E5E5"> you can</font>

258
00:12:55,190 --> 00:12:59,930
<font color="#E5E5E5">see that in the than there are two other</font>

259
00:12:57,890 --> 00:13:02,270
lines it's for the operational routers

260
00:12:59,930 --> 00:13:05,390
<font color="#CCCCCC">that we are emulating using the data we</font>

261
00:13:02,270 --> 00:13:07,010
collected and one<font color="#CCCCCC"> line is for the month</font>

262
00:13:05,390 --> 00:13:08,930
of<font color="#CCCCCC"> june</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> the other for the</font><font color="#E5E5E5"> month of</font>

263
00:13:07,010 --> 00:13:12,590
September and you<font color="#CCCCCC"> can see that it also</font>

264
00:13:08,930 --> 00:13:14,479
has<font color="#CCCCCC"> this the 60-second timer of course</font>

265
00:13:12,590 --> 00:13:16,550
the<font color="#CCCCCC"> lines not</font><font color="#E5E5E5"> so straight because I just</font>

266
00:13:14,480 --> 00:13:18,920
used I<font color="#E5E5E5"> mean the events that happen in</font>

267
00:13:16,550 --> 00:13:21,620
<font color="#E5E5E5">the network and they're not as many</font>

268
00:13:18,920 --> 00:13:24,290
<font color="#E5E5E5">samples as the blue line but you can</font>

269
00:13:21,620 --> 00:13:27,050
also see<font color="#E5E5E5"> that there</font><font color="#CCCCCC"> is this part</font><font color="#E5E5E5"> of</font><font color="#CCCCCC"> the</font>

270
00:13:24,290 --> 00:13:29,569
curve there in the end that has a little

271
00:13:27,050 --> 00:13:32,150
<font color="#CCCCCC">bit</font><font color="#E5E5E5"> longer delays and we contractor now</font>

272
00:13:29,570 --> 00:13:34,520
that that's because of the ibgp

273
00:13:32,150 --> 00:13:38,470
hierarchy<font color="#CCCCCC"> that</font><font color="#E5E5E5"> we may have to wait for</font>

274
00:13:34,520 --> 00:13:42,650
two<font color="#E5E5E5"> runs of the timer for some of these</font>

275
00:13:38,470 --> 00:13:45,230
of these routes<font color="#E5E5E5"> now let's look at how</font>

276
00:13:42,650 --> 00:13:49,370
<font color="#E5E5E5">long does it take for transferring all</font>

277
00:13:45,230 --> 00:13:53,660
the multiple prefixes again I'm showing

278
00:13:49,370 --> 00:13:57,040
<font color="#E5E5E5">the time between the LSA and the BGP</font>

279
00:13:53,660 --> 00:13:59,930
update and here I<font color="#CCCCCC"> just chose</font><font color="#E5E5E5"> three</font>

280
00:13:57,040 --> 00:14:02,030
sample events that caused lots of

281
00:13:59,930 --> 00:14:04,189
<font color="#CCCCCC">updates and</font><font color="#E5E5E5"> I'm showing on the y-axis</font>

282
00:14:02,030 --> 00:14:07,699
<font color="#CCCCCC">the cumulative number</font><font color="#E5E5E5"> of hot potato</font>

283
00:14:04,190 --> 00:14:10,490
changes and<font color="#CCCCCC"> it's just</font><font color="#E5E5E5"> a cumulative</font>

284
00:14:07,700 --> 00:14:13,880
number of<font color="#E5E5E5"> updates that that particular</font>

285
00:14:10,490 --> 00:14:15,530
<font color="#CCCCCC">OSPF event caused let's just</font><font color="#E5E5E5"> look at the</font>

286
00:14:13,880 --> 00:14:18,110
red curve because all of<font color="#E5E5E5"> them are</font>

287
00:14:15,530 --> 00:14:21,230
similar<font color="#E5E5E5"> just different events so</font><font color="#CCCCCC"> we</font><font color="#E5E5E5"> can</font>

288
00:14:18,110 --> 00:14:23,410
still it starts around<font color="#E5E5E5"> 25 seconds let's</font>

289
00:14:21,230 --> 00:14:28,400
say and so that<font color="#E5E5E5"> means that the BGP</font>

290
00:14:23,410 --> 00:14:30,800
<font color="#E5E5E5">process run at 25 seconds after the</font><font color="#CCCCCC"> OSPF</font>

291
00:14:28,400 --> 00:14:35,020
event happened<font color="#E5E5E5"> and then</font><font color="#CCCCCC"> it can</font><font color="#E5E5E5"> take</font><font color="#CCCCCC"> ups</font>

292
00:14:30,800 --> 00:14:38,390
<font color="#CCCCCC">too it took 81 seconds to transfer</font><font color="#E5E5E5"> all</font>

293
00:14:35,020 --> 00:14:42,199
this because<font color="#CCCCCC"> this event</font><font color="#E5E5E5"> caused more</font><font color="#CCCCCC"> than</font>

294
00:14:38,390 --> 00:14:43,910
<font color="#CCCCCC">80,000 prefixes to</font><font color="#E5E5E5"> shift and so the</font>

295
00:14:42,200 --> 00:14:48,620
bottom line<font color="#E5E5E5"> here</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> that in the worst</font>

296
00:14:43,910 --> 00:14:50,719
case<font color="#E5E5E5"> scenario</font><font color="#CCCCCC"> we</font><font color="#E5E5E5"> can take around 100 120</font>

297
00:14:48,620 --> 00:14:53,320
seconds to revisit<font color="#E5E5E5"> your decision and</font>

298
00:14:50,720 --> 00:14:56,210
then you may<font color="#CCCCCC"> take 80 seconds more to</font>

299
00:14:53,320 --> 00:14:59,930
<font color="#CCCCCC">transfer</font><font color="#E5E5E5"> all the rods so the last prefix</font>

300
00:14:56,210 --> 00:15:01,550
<font color="#E5E5E5">may take up</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> three minutes</font><font color="#CCCCCC"> to to get</font>

301
00:14:59,930 --> 00:15:04,370
<font color="#CCCCCC">updated to</font><font color="#E5E5E5"> get installed in the fable</font>

302
00:15:01,550 --> 00:15:08,109
<font color="#CCCCCC">and we didn't even count the time and to</font>

303
00:15:04,370 --> 00:15:12,080
install<font color="#CCCCCC"> the new prefix in the</font><font color="#E5E5E5"> feeb and</font>

304
00:15:08,110 --> 00:15:15,200
so what the implications<font color="#CCCCCC"> that is have</font>

305
00:15:12,080 --> 00:15:16,790
for in your<font color="#E5E5E5"> near for forwarding packets</font>

306
00:15:15,200 --> 00:15:18,920
so first

307
00:15:16,790 --> 00:15:22,579
the<font color="#CCCCCC"> FIB is only going</font><font color="#E5E5E5"> to be updated when</font>

308
00:15:18,920 --> 00:15:25,670
both<font color="#CCCCCC"> your</font><font color="#E5E5E5"> IDP and your BGP converge so</font>

309
00:15:22,580 --> 00:15:27,140
people talk a lot about<font color="#E5E5E5"> the IGP</font><font color="#CCCCCC"> converse</font>

310
00:15:25,670 --> 00:15:29,990
that's important because of<font color="#CCCCCC"> course that</font>

311
00:15:27,140 --> 00:15:31,880
has<font color="#CCCCCC"> to happen first but if</font><font color="#E5E5E5"> your BGP</font>

312
00:15:29,990 --> 00:15:36,380
didn't converge<font color="#E5E5E5"> all the external routes</font>

313
00:15:31,880 --> 00:15:38,660
are didn't convert yet<font color="#CCCCCC"> and the second</font>

314
00:15:36,380 --> 00:15:40,820
<font color="#E5E5E5">question we had</font><font color="#CCCCCC"> is do the measurements</font>

315
00:15:38,660 --> 00:15:44,000
<font color="#E5E5E5">we</font><font color="#CCCCCC"> have today to measure the customer</font>

316
00:15:40,820 --> 00:15:48,020
experience<font color="#E5E5E5"> and of the network do they</font>

317
00:15:44,000 --> 00:15:51,040
cap to catch these kinds<font color="#E5E5E5"> of performance</font>

318
00:15:48,020 --> 00:15:54,439
degradations<font color="#E5E5E5"> so first let's look</font><font color="#CCCCCC"> of how</font>

319
00:15:51,040 --> 00:15:56,870
this can impact the<font color="#E5E5E5"> forwarding</font>

320
00:15:54,440 --> 00:15:59,600
<font color="#E5E5E5">conversions so imagine</font><font color="#CCCCCC"> now this</font><font color="#E5E5E5"> example</font>

321
00:15:56,870 --> 00:16:04,130
in the in the top where he<font color="#E5E5E5"> had routers</font>

322
00:15:59,600 --> 00:16:08,330
r1 and r2<font color="#CCCCCC"> both using the egress points</font>

323
00:16:04,130 --> 00:16:12,460
<font color="#E5E5E5">you're right there and imagine that the</font>

324
00:16:08,330 --> 00:16:15,260
cost to<font color="#CCCCCC"> that link</font><font color="#E5E5E5"> changed from 10 to 111</font>

325
00:16:12,460 --> 00:16:17,720
<font color="#E5E5E5">so what's gonna happen</font><font color="#CCCCCC"> is that in the</font>

326
00:16:15,260 --> 00:16:20,930
end<font color="#E5E5E5"> both are 1 and our</font><font color="#CCCCCC"> twos are</font><font color="#E5E5E5"> going to</font>

327
00:16:17,720 --> 00:16:24,500
shift<font color="#CCCCCC"> to the</font><font color="#E5E5E5"> egress point in the left</font>

328
00:16:20,930 --> 00:16:28,370
<font color="#E5E5E5">but depending on the order that these</font>

329
00:16:24,500 --> 00:16:31,250
the the timer runs the BGP decision is

330
00:16:28,370 --> 00:16:32,690
revisiting each of these routers<font color="#E5E5E5"> what</font>

331
00:16:31,250 --> 00:16:35,720
can happen imagine<font color="#E5E5E5"> this following</font>

332
00:16:32,690 --> 00:16:39,440
scenario<font color="#E5E5E5"> that the</font><font color="#CCCCCC"> hour to revisit this</font>

333
00:16:35,720 --> 00:16:41,840
decision first then it starts<font color="#E5E5E5"> using our</font>

334
00:16:39,440 --> 00:16:45,860
<font color="#CCCCCC">1</font><font color="#E5E5E5"> to forward packets to this particular</font>

335
00:16:41,840 --> 00:16:47,750
destination<font color="#CCCCCC"> then our 1 runs but</font><font color="#E5E5E5"> you</font>

336
00:16:45,860 --> 00:16:49,670
<font color="#CCCCCC">don't know how long it's gonna take it</font>

337
00:16:47,750 --> 00:16:52,550
may take up to<font color="#E5E5E5"> 60 seconds</font><font color="#CCCCCC"> for a run to</font>

338
00:16:49,670 --> 00:16:54,500
revisit its decision<font color="#E5E5E5"> and all this time</font>

339
00:16:52,550 --> 00:16:57,380
<font color="#E5E5E5">the packets to</font><font color="#CCCCCC"> the destination are going</font>

340
00:16:54,500 --> 00:17:01,610
to be caught in<font color="#CCCCCC"> a loop between</font><font color="#E5E5E5"> r1 and r2</font>

341
00:16:57,380 --> 00:17:03,530
<font color="#CCCCCC">and now let's see if how can</font><font color="#E5E5E5"> we detect</font>

342
00:17:01,610 --> 00:17:05,390
these<font color="#E5E5E5"> loops can you imagine this can we</font>

343
00:17:03,530 --> 00:17:08,839
see if these<font color="#E5E5E5"> are actually happening</font><font color="#CCCCCC"> in</font>

344
00:17:05,390 --> 00:17:12,199
the network<font color="#CCCCCC"> so today the way that the</font>

345
00:17:08,839 --> 00:17:15,470
measuring<font color="#E5E5E5"> of the</font><font color="#CCCCCC"> cosmic</font><font color="#E5E5E5"> experience work</font>

346
00:17:12,199 --> 00:17:19,130
we put some two machines W 1 and W 2

347
00:17:15,470 --> 00:17:20,870
that will try<font color="#CCCCCC"> to measure this but</font><font color="#E5E5E5"> this</font>

348
00:17:19,130 --> 00:17:23,270
loop is only<font color="#E5E5E5"> happening for this</font>

349
00:17:20,869 --> 00:17:25,609
particular<font color="#CCCCCC"> destination so if you probe</font>

350
00:17:23,270 --> 00:17:28,040
<font color="#E5E5E5">from W 1 so W 2 even though</font><font color="#CCCCCC"> you're</font>

351
00:17:25,609 --> 00:17:30,040
probably<font color="#E5E5E5"> the same path</font><font color="#CCCCCC"> you're not gonna</font>

352
00:17:28,040 --> 00:17:34,450
catch your traffic<font color="#CCCCCC"> it's not going to be</font>

353
00:17:30,040 --> 00:17:37,420
in this loop<font color="#E5E5E5"> so now how can you avoid</font>

354
00:17:34,450 --> 00:17:39,670
unnecessary changes<font color="#CCCCCC"> of course sometimes</font>

355
00:17:37,420 --> 00:17:43,060
just have to change<font color="#E5E5E5"> but can we do</font>

356
00:17:39,670 --> 00:17:46,300
something<font color="#E5E5E5"> can we try to avoid it so we</font>

357
00:17:43,060 --> 00:17:49,480
see<font color="#E5E5E5"> that router</font><font color="#CCCCCC"> with the router in a</font><font color="#E5E5E5"> pop</font>

358
00:17:46,300 --> 00:17:51,340
with<font color="#E5E5E5"> no peer see many more of these</font>

359
00:17:49,480 --> 00:17:53,770
changes in a router and<font color="#E5E5E5"> a</font><font color="#CCCCCC"> popovich</font>

360
00:17:51,340 --> 00:17:58,060
peering so how<font color="#CCCCCC"> can we play with</font><font color="#E5E5E5"> the</font>

361
00:17:53,770 --> 00:18:00,790
topology<font color="#E5E5E5"> to make to avoid</font><font color="#CCCCCC"> this changes</font>

362
00:17:58,060 --> 00:18:02,560
and<font color="#E5E5E5"> also can we do maintenance plan</font>

363
00:18:00,790 --> 00:18:06,100
<font color="#CCCCCC">maintenance in a better way that will</font>

364
00:18:02,560 --> 00:18:10,210
<font color="#E5E5E5">not cause these hot potato changes so</font>

365
00:18:06,100 --> 00:18:13,300
first look at this<font color="#CCCCCC"> 3 Toyota polities</font>

366
00:18:10,210 --> 00:18:16,060
<font color="#CCCCCC">here you can see that the the topology</font>

367
00:18:13,300 --> 00:18:19,120
<font color="#E5E5E5">so if from Dallas to</font><font color="#CCCCCC"> San Francisco we</font>

368
00:18:16,060 --> 00:18:21,700
have just<font color="#CCCCCC"> Karsten and from Dallas to New</font>

369
00:18:19,120 --> 00:18:24,929
York have cost<font color="#E5E5E5"> 10 any little change in</font>

370
00:18:21,700 --> 00:18:29,560
your network<font color="#E5E5E5"> is</font><font color="#CCCCCC"> likely to make the</font>

371
00:18:24,930 --> 00:18:32,350
<font color="#E5E5E5">shortest path shift and so this is much</font>

372
00:18:29,560 --> 00:18:35,770
more prone<font color="#CCCCCC"> to have hot potato changes</font>

373
00:18:32,350 --> 00:18:38,199
<font color="#E5E5E5">whereas the other two so if Dallas is</font>

374
00:18:35,770 --> 00:18:40,330
really close to<font color="#CCCCCC"> San Francisco</font><font color="#E5E5E5"> and really</font>

375
00:18:38,200 --> 00:18:43,240
far<font color="#CCCCCC"> away</font><font color="#E5E5E5"> from New</font><font color="#CCCCCC"> York there</font><font color="#E5E5E5"> has to be a</font>

376
00:18:40,330 --> 00:18:45,460
big change in the network to Dallas to

377
00:18:43,240 --> 00:18:47,170
shift from<font color="#E5E5E5"> one to the other and the</font><font color="#CCCCCC"> same</font>

378
00:18:45,460 --> 00:18:51,460
thing<font color="#E5E5E5"> that</font><font color="#CCCCCC"> in the bottom</font><font color="#E5E5E5"> one if you have</font>

379
00:18:47,170 --> 00:18:54,340
multiple paths that are<font color="#E5E5E5"> equally good in</font>

380
00:18:51,460 --> 00:18:56,980
<font color="#E5E5E5">terms of</font><font color="#CCCCCC"> IGP distance then it's also</font>

381
00:18:54,340 --> 00:18:59,290
harder for it to<font color="#E5E5E5"> change it</font><font color="#CCCCCC"> may be think</font>

382
00:18:56,980 --> 00:19:01,210
of oh of course it's<font color="#E5E5E5"> very easy to do</font>

383
00:18:59,290 --> 00:19:03,040
<font color="#CCCCCC">that and the</font><font color="#E5E5E5"> stoy examples but how</font><font color="#CCCCCC"> can I</font>

384
00:19:01,210 --> 00:19:05,170
do that<font color="#E5E5E5"> in my</font><font color="#CCCCCC"> network so yeah I don't</font>

385
00:19:03,040 --> 00:19:07,389
<font color="#E5E5E5">have the answer for that yet but it's</font>

386
00:19:05,170 --> 00:19:09,700
just to<font color="#E5E5E5"> give you some food for thought</font>

387
00:19:07,390 --> 00:19:12,550
you know your network<font color="#E5E5E5"> and you may be</font>

388
00:19:09,700 --> 00:19:13,840
able<font color="#CCCCCC"> to</font><font color="#E5E5E5"> so it's just something</font><font color="#CCCCCC"> else</font><font color="#E5E5E5"> that</font>

389
00:19:12,550 --> 00:19:16,090
you<font color="#CCCCCC"> should think</font><font color="#E5E5E5"> of when you do your</font>

390
00:19:13,840 --> 00:19:18,669
<font color="#E5E5E5">traffic engineering when you when you're</font>

391
00:19:16,090 --> 00:19:21,639
<font color="#E5E5E5">doing</font><font color="#CCCCCC"> your planning</font><font color="#E5E5E5"> and tools for doing</font>

392
00:19:18,670 --> 00:19:24,520
<font color="#E5E5E5">that yeah of course we have to work on</font>

393
00:19:21,640 --> 00:19:27,700
that<font color="#E5E5E5"> and that's something else that we</font>

394
00:19:24,520 --> 00:19:30,040
<font color="#CCCCCC">you can do is if</font><font color="#E5E5E5"> you look at so how can</font>

395
00:19:27,700 --> 00:19:31,510
<font color="#E5E5E5">we if you're doing</font><font color="#CCCCCC"> maintenance</font><font color="#E5E5E5"> so</font>

396
00:19:30,040 --> 00:19:34,000
<font color="#E5E5E5">imagine you have</font><font color="#CCCCCC"> to do maintenance in</font>

397
00:19:31,510 --> 00:19:35,920
the<font color="#E5E5E5"> path from New York to San Francisco</font>

398
00:19:34,000 --> 00:19:38,910
and<font color="#CCCCCC"> there's just again a tight apology</font>

399
00:19:35,920 --> 00:19:41,380
and now all your traffic<font color="#E5E5E5"> is going</font>

400
00:19:38,910 --> 00:19:42,680
through San Francisco and<font color="#E5E5E5"> you want to</font>

401
00:19:41,380 --> 00:19:45,680
take out

402
00:19:42,680 --> 00:19:48,680
this link<font color="#CCCCCC"> yonder Montanans</font><font color="#E5E5E5"> there so what</font>

403
00:19:45,680 --> 00:19:50,720
can you<font color="#CCCCCC"> do so if you if you</font><font color="#E5E5E5"> just put it</font>

404
00:19:48,680 --> 00:19:52,700
to a very high<font color="#CCCCCC"> cost all your traffic is</font>

405
00:19:50,720 --> 00:19:54,740
gonna<font color="#E5E5E5"> start using the exit point two</font>

406
00:19:52,700 --> 00:19:57,860
<font color="#E5E5E5">dollars and you're gonna have all the</font>

407
00:19:54,740 --> 00:20:00,140
penalty of doing<font color="#CCCCCC"> hot potato changes but</font>

408
00:19:57,860 --> 00:20:02,659
if you think<font color="#E5E5E5"> of it</font><font color="#CCCCCC"> ahead of</font><font color="#E5E5E5"> time you</font><font color="#CCCCCC"> can</font>

409
00:20:00,140 --> 00:20:06,290
change<font color="#E5E5E5"> the cost of that middle link</font><font color="#CCCCCC"> from</font>

410
00:20:02,660 --> 00:20:09,170
<font color="#CCCCCC">10:00 to 4:00 and then</font><font color="#E5E5E5"> you can cause out</font>

411
00:20:06,290 --> 00:20:12,200
your link<font color="#E5E5E5"> and all your traffic gonna</font>

412
00:20:09,170 --> 00:20:15,320
still<font color="#CCCCCC"> be using</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> san francisco</font><font color="#E5E5E5"> egress</font>

413
00:20:12,200 --> 00:20:17,960
point of course you have to wait for SPF

414
00:20:15,320 --> 00:20:21,439
<font color="#E5E5E5">to</font><font color="#CCCCCC"> converge in that example</font><font color="#E5E5E5"> but all your</font>

415
00:20:17,960 --> 00:20:24,860
your<font color="#CCCCCC"> BGP routes</font><font color="#E5E5E5"> won't change so</font><font color="#CCCCCC"> the</font>

416
00:20:21,440 --> 00:20:29,330
convergences or SPF times seconds

417
00:20:24,860 --> 00:20:33,590
instead of<font color="#E5E5E5"> minutes the traffic is much</font>

418
00:20:29,330 --> 00:20:36,409
more predictable<font color="#CCCCCC"> faster and again as I</font>

419
00:20:33,590 --> 00:20:39,830
said<font color="#E5E5E5"> before you</font><font color="#CCCCCC"> have to judge how much</font>

420
00:20:36,410 --> 00:20:42,710
<font color="#E5E5E5">of you can do in a real</font><font color="#CCCCCC"> network like</font>

421
00:20:39,830 --> 00:20:46,310
that but it's important<font color="#CCCCCC"> to</font><font color="#E5E5E5"> have tools</font>

422
00:20:42,710 --> 00:20:49,580
that<font color="#E5E5E5"> will predict these kinds of changes</font>

423
00:20:46,310 --> 00:20:53,030
<font color="#CCCCCC">and will give you answers for that</font>

424
00:20:49,580 --> 00:20:56,870
<font color="#E5E5E5">so in conclusion</font><font color="#CCCCCC"> show that hot potato</font>

425
00:20:53,030 --> 00:20:59,920
can have an effect<font color="#CCCCCC"> on a large</font><font color="#E5E5E5"> number of</font>

426
00:20:56,870 --> 00:21:03,320
prefixes and it does have higher

427
00:20:59,920 --> 00:21:06,730
conversions delays so for the<font color="#CCCCCC"> the</font>

428
00:21:03,320 --> 00:21:10,399
vendors the method here is<font color="#E5E5E5"> even driven</font>

429
00:21:06,730 --> 00:21:14,540
implementations of the IGP<font color="#E5E5E5"> bgp</font>

430
00:21:10,400 --> 00:21:16,400
interaction will help to<font color="#CCCCCC"> minimize some</font>

431
00:21:14,540 --> 00:21:19,340
<font color="#E5E5E5">of</font><font color="#CCCCCC"> the effects of course you</font><font color="#E5E5E5"> still have</font>

432
00:21:16,400 --> 00:21:22,580
<font color="#CCCCCC">to wait for the path vector protocol to</font>

433
00:21:19,340 --> 00:21:25,340
converge on<font color="#E5E5E5"> top of the link state but at</font>

434
00:21:22,580 --> 00:21:28,580
least the timer effects going to<font color="#CCCCCC"> wait</font>

435
00:21:25,340 --> 00:21:31,159
it's<font color="#CCCCCC"> something</font><font color="#E5E5E5"> that amplifies the the</font>

436
00:21:28,580 --> 00:21:32,929
convergence delay and<font color="#E5E5E5"> also once you do</font>

437
00:21:31,160 --> 00:21:36,530
your studies you<font color="#CCCCCC"> have to</font><font color="#E5E5E5"> look at in a</font>

438
00:21:32,930 --> 00:21:38,690
more<font color="#E5E5E5"> network wide</font><font color="#CCCCCC"> effect not only in the</font>

439
00:21:36,530 --> 00:21:41,780
<font color="#E5E5E5">box level</font><font color="#CCCCCC"> because</font><font color="#E5E5E5"> these events they</font><font color="#CCCCCC"> are</font>

440
00:21:38,690 --> 00:21:43,970
very hard to<font color="#E5E5E5"> just see how they they</font>

441
00:21:41,780 --> 00:21:45,800
happen in<font color="#E5E5E5"> the box level</font><font color="#CCCCCC"> and for the</font>

442
00:21:43,970 --> 00:21:46,400
operators of<font color="#E5E5E5"> course you can tune your</font>

443
00:21:45,800 --> 00:21:49,760
timer

444
00:21:46,400 --> 00:21:51,650
you know our network is you know how how

445
00:21:49,760 --> 00:21:53,820
<font color="#CCCCCC">low we</font><font color="#E5E5E5"> can put the timers down</font><font color="#CCCCCC"> I can</font>

446
00:21:51,650 --> 00:21:57,179
tell you what the right values are

447
00:21:53,820 --> 00:22:00,749
and you can try to<font color="#E5E5E5"> play with some</font><font color="#CCCCCC"> of the</font>

448
00:21:57,179 --> 00:22:04,019
examples<font color="#CCCCCC"> I</font><font color="#E5E5E5"> showed here in how to set up</font>

449
00:22:00,749 --> 00:22:06,320
<font color="#E5E5E5">your</font><font color="#CCCCCC"> weights</font><font color="#E5E5E5"> and to do maintenance in a</font>

450
00:22:04,019 --> 00:22:09,840
way that will<font color="#E5E5E5"> avoid hot potato changes</font>

451
00:22:06,320 --> 00:22:13,918
for in our side we are trying to<font color="#CCCCCC"> do some</font>

452
00:22:09,840 --> 00:22:16,649
work<font color="#CCCCCC"> into quantifying the impact of hot</font>

453
00:22:13,919 --> 00:22:18,960
potato changes in<font color="#E5E5E5"> in shifts of traffic</font>

454
00:22:16,649 --> 00:22:21,478
<font color="#E5E5E5">also trying</font><font color="#CCCCCC"> to see if</font><font color="#E5E5E5"> you can catch</font>

455
00:22:18,960 --> 00:22:23,999
<font color="#E5E5E5">these loops in the in the commercial</font>

456
00:22:21,479 --> 00:22:27,659
<font color="#CCCCCC">network to see if it's</font><font color="#E5E5E5"> really happening</font>

457
00:22:23,999 --> 00:22:29,399
and also quantify how much of it is

458
00:22:27,659 --> 00:22:32,669
<font color="#CCCCCC">exported to</font><font color="#E5E5E5"> your neighbors because most</font>

459
00:22:29,399 --> 00:22:35,158
of<font color="#CCCCCC"> these</font><font color="#E5E5E5"> updates probably just ibgp</font>

460
00:22:32,669 --> 00:22:37,950
updates<font color="#E5E5E5"> and don't go to to the neighbors</font>

461
00:22:35,159 --> 00:22:42,979
but<font color="#CCCCCC"> we want to</font><font color="#E5E5E5"> quantify how much of it</font>

462
00:22:37,950 --> 00:22:42,979
<font color="#E5E5E5">is happening</font><font color="#CCCCCC"> so anyone has any</font><font color="#E5E5E5"> questions</font>

463
00:22:52,760 --> 00:23:00,530
hi<font color="#CCCCCC"> Rob</font><font color="#E5E5E5"> Rob</font><font color="#CCCCCC"> Renison Laurel networks these</font>

464
00:22:56,000 --> 00:23:02,890
<font color="#E5E5E5">are probably simple and first of all</font>

465
00:23:00,530 --> 00:23:05,389
<font color="#CCCCCC">regarding the the how we would react</font>

466
00:23:02,890 --> 00:23:07,970
<font color="#CCCCCC">yeah we would listen to rib changes and</font>

467
00:23:05,390 --> 00:23:11,000
<font color="#E5E5E5">obviously could be event-driven then</font>

468
00:23:07,970 --> 00:23:13,040
so if<font color="#CCCCCC"> BGP I was trying to</font><font color="#E5E5E5"> resolve its</font>

469
00:23:11,000 --> 00:23:15,650
<font color="#E5E5E5">next</font><font color="#CCCCCC"> topic it listens</font><font color="#E5E5E5"> to the IDP change</font>

470
00:23:13,040 --> 00:23:19,970
and would<font color="#CCCCCC"> failover and in</font><font color="#E5E5E5"> milliseconds</font>

471
00:23:15,650 --> 00:23:22,549
<font color="#E5E5E5">and then an observation which is</font><font color="#CCCCCC"> the</font>

472
00:23:19,970 --> 00:23:24,500
fact that<font color="#E5E5E5"> for</font><font color="#CCCCCC"> some for some</font><font color="#E5E5E5"> failures in</font>

473
00:23:22,549 --> 00:23:27,049
even in the like your first<font color="#E5E5E5"> slide the</font>

474
00:23:24,500 --> 00:23:29,450
simplest of case<font color="#CCCCCC"> mmm-hmm the only real</font>

475
00:23:27,049 --> 00:23:32,150
way<font color="#CCCCCC"> to</font><font color="#E5E5E5"> measure there would be no routing</font>

476
00:23:29,450 --> 00:23:35,390
change because BGP would just resolve

477
00:23:32,150 --> 00:23:37,700
its own<font color="#E5E5E5"> next</font><font color="#CCCCCC"> stop failover to fail over</font>

478
00:23:35,390 --> 00:23:39,700
to another<font color="#E5E5E5"> link and the only way you</font>

479
00:23:37,700 --> 00:23:42,110
<font color="#E5E5E5">could see any problem there would be by</font>

480
00:23:39,700 --> 00:23:52,640
traffic analysis and scenes of traffic

481
00:23:42,110 --> 00:23:53,780
loss there<font color="#E5E5E5"> are</font><font color="#CCCCCC"> BGP changes yeah</font><font color="#E5E5E5"> yeah</font>

482
00:23:52,640 --> 00:23:56,900
what I'm saying is<font color="#E5E5E5"> for the for the</font>

483
00:23:53,780 --> 00:23:59,120
simplest of topology with one one router

484
00:23:56,900 --> 00:24:01,940
one speaker advertising next<font color="#E5E5E5"> stop self</font>

485
00:23:59,120 --> 00:24:05,030
and he's got two links<font color="#CCCCCC"> to go to the one</font>

486
00:24:01,940 --> 00:24:07,549
<font color="#CCCCCC">of them</font><font color="#E5E5E5"> fails he</font><font color="#CCCCCC"> reader he changes his</font>

487
00:24:05,030 --> 00:24:09,500
own his<font color="#E5E5E5"> own view of what the</font><font color="#CCCCCC"> next</font><font color="#E5E5E5"> stop</font>

488
00:24:07,549 --> 00:24:11,090
is<font color="#E5E5E5"> and there's no impact he doesn't</font>

489
00:24:09,500 --> 00:24:13,190
<font color="#CCCCCC">withdraw the routes he just fixes</font>

490
00:24:11,090 --> 00:24:17,120
<font color="#E5E5E5">hundred thousand prefixes go to a next</font>

491
00:24:13,190 --> 00:24:18,980
<font color="#E5E5E5">hop so in the simple case you're not</font>

492
00:24:17,120 --> 00:24:20,449
going<font color="#E5E5E5"> to see problems now obviously in a</font>

493
00:24:18,980 --> 00:24:23,540
real<font color="#E5E5E5"> network with a more richly</font>

494
00:24:20,450 --> 00:24:25,490
<font color="#E5E5E5">connected to apology you</font><font color="#CCCCCC"> made any</font>

495
00:24:23,540 --> 00:24:29,990
<font color="#CCCCCC">changes</font><font color="#E5E5E5"> I'm sorry I think</font><font color="#CCCCCC"> so my example</font>

496
00:24:25,490 --> 00:24:31,100
<font color="#CCCCCC">it was not a link it was a path</font><font color="#E5E5E5"> so yeah</font>

497
00:24:29,990 --> 00:24:35,740
that's why I did<font color="#E5E5E5"> the cut this squiggly</font>

498
00:24:31,100 --> 00:24:35,740
<font color="#E5E5E5">line because</font><font color="#CCCCCC"> okay yeah but</font>

499
00:24:37,360 --> 00:24:41,679
that's probably<font color="#E5E5E5"> cuz I'm getting here</font>

500
00:24:39,520 --> 00:24:46,060
<font color="#E5E5E5">your simple example but in terms of</font>

501
00:24:41,680 --> 00:24:48,480
<font color="#CCCCCC">correlation</font><font color="#E5E5E5"> so an LSA is withdrawn once</font>

502
00:24:46,060 --> 00:24:52,120
again that's that's<font color="#CCCCCC"> withdrawn for</font>

503
00:24:48,480 --> 00:24:54,520
finding the<font color="#E5E5E5"> next</font><font color="#CCCCCC"> talk</font><font color="#E5E5E5"> I'm a speaker and</font>

504
00:24:52,120 --> 00:24:57,939
I'm advertising next top self and I see

505
00:24:54,520 --> 00:25:00,510
an LSA withdrawn for for how I get<font color="#E5E5E5"> to to</font>

506
00:24:57,940 --> 00:25:03,310
my next<font color="#E5E5E5"> top what I've learned by ibgp</font>

507
00:25:00,510 --> 00:25:05,110
how do you<font color="#E5E5E5"> correlate the LSA for the</font>

508
00:25:03,310 --> 00:25:07,419
prefix that<font color="#CCCCCC"> I'm using to forward the</font>

509
00:25:05,110 --> 00:25:10,060
routes<font color="#E5E5E5"> with you know the fact that I've</font>

510
00:25:07,420 --> 00:25:12,430
suddenly started with drawing all these

511
00:25:10,060 --> 00:25:14,830
prefixes<font color="#E5E5E5"> you know there's a time thing</font>

512
00:25:12,430 --> 00:25:18,190
about oh yeah<font color="#E5E5E5"> yeah withdrawn but there's</font>

513
00:25:14,830 --> 00:25:20,919
no you don't I don't announce that what

514
00:25:18,190 --> 00:25:25,090
was in that LSA<font color="#E5E5E5"> so when we look at the</font><font color="#CCCCCC"> L</font>

515
00:25:20,920 --> 00:25:28,120
<font color="#E5E5E5">essays and we look at how Dallas isn't</font>

516
00:25:25,090 --> 00:25:31,000
<font color="#E5E5E5">in fact affect the table for that</font>

517
00:25:28,120 --> 00:25:33,070
particular router<font color="#E5E5E5"> and we look at the BGP</font>

518
00:25:31,000 --> 00:25:36,970
<font color="#E5E5E5">update and you see what kind</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> update</font>

519
00:25:33,070 --> 00:25:40,570
it is for<font color="#E5E5E5"> which next hop and then we</font>

520
00:25:36,970 --> 00:25:43,900
manage them<font color="#CCCCCC"> in time but it firemen</font><font color="#E5E5E5"> helps</font>

521
00:25:40,570 --> 00:25:46,270
<font color="#E5E5E5">in the next</font><font color="#CCCCCC"> stop so then or I'm</font>

522
00:25:43,900 --> 00:25:48,880
withdrawing routes through<font color="#E5E5E5"> still it was</font>

523
00:25:46,270 --> 00:25:51,400
difficult to correlate because<font color="#E5E5E5"> myself</font>

524
00:25:48,880 --> 00:25:53,530
<font color="#CCCCCC">hasn't changed</font><font color="#E5E5E5"> the LSA was one that I</font>

525
00:25:51,400 --> 00:25:59,050
<font color="#E5E5E5">was using because</font><font color="#CCCCCC"> that was announced</font><font color="#E5E5E5"> by</font>

526
00:25:53,530 --> 00:26:01,870
my ibgp peers<font color="#E5E5E5"> know between so we we get</font>

527
00:25:59,050 --> 00:26:05,580
we<font color="#E5E5E5"> get so the data we have it so I bgp</font>

528
00:26:01,870 --> 00:26:11,729
data and so<font color="#E5E5E5"> we get all this information</font>

529
00:26:05,580 --> 00:26:14,730
<font color="#CCCCCC">it's</font><font color="#E5E5E5"> yeah</font><font color="#CCCCCC"> for the for these routers okay</font>

530
00:26:11,730 --> 00:26:14,730
yeah

