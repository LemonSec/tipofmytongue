1
00:00:00,199 --> 00:00:07,470
so hi I'm Brent<font color="#CCCCCC"> IM hause this is scott</font>

2
00:00:03,990 --> 00:00:12,809
beretsky and so the talking about bgp

3
00:00:07,470 --> 00:00:23,310
negative testing so how do<font color="#E5E5E5"> i make this</font>

4
00:00:12,809 --> 00:00:25,799
go page down<font color="#CCCCCC"> no</font><font color="#E5E5E5"> alright cool so we've</font>

5
00:00:23,310 --> 00:00:29,340
had code bugs for forever we will

6
00:00:25,800 --> 00:00:36,030
<font color="#CCCCCC">continue to have</font><font color="#E5E5E5"> code bugs even back as</font>

7
00:00:29,340 --> 00:00:37,590
far<font color="#CCCCCC"> as 1996 the the best way to find</font>

8
00:00:36,030 --> 00:00:39,390
these bugs though is typically in<font color="#CCCCCC"> tests</font>

9
00:00:37,590 --> 00:00:41,190
or the the<font color="#CCCCCC"> most convenient places to</font>

10
00:00:39,390 --> 00:00:48,899
find it<font color="#CCCCCC"> as in tests you'd rather find it</font>

11
00:00:41,190 --> 00:00:51,930
there than in production<font color="#E5E5E5"> and anyway so</font>

12
00:00:48,899 --> 00:00:54,149
that some of ways the reasons you would

13
00:00:51,930 --> 00:00:58,289
want<font color="#E5E5E5"> to test for negative bgp conditions</font>

14
00:00:54,149 --> 00:01:01,649
for a multi-vendor so if you have a

15
00:00:58,289 --> 00:01:03,750
cisco and a cisco operability may work

16
00:01:01,649 --> 00:01:07,159
fairly well but if you have a juniper

17
00:01:03,750 --> 00:01:10,020
and cisco say you want<font color="#E5E5E5"> to make sure that</font>

18
00:01:07,159 --> 00:01:11,220
<font color="#E5E5E5">the juniper does something the cisco is</font>

19
00:01:10,020 --> 00:01:16,429
going to be<font color="#CCCCCC"> able to</font><font color="#E5E5E5"> handle it in a way</font>

20
00:01:11,220 --> 00:01:16,429
that doesn't impact you negatively

21
00:01:22,759 --> 00:01:28,220
excuse me do this

22
00:01:35,710 --> 00:01:45,110
okay hi<font color="#E5E5E5"> I'm Scott co-presenting here</font>

23
00:01:40,219 --> 00:01:47,449
with with<font color="#E5E5E5"> Brent so negative BGP</font>

24
00:01:45,110 --> 00:01:50,649
conditions that we have<font color="#E5E5E5"> observed in</font>

25
00:01:47,450 --> 00:01:52,819
networks are update message errors

26
00:01:50,649 --> 00:01:54,560
something as<font color="#E5E5E5"> simple as an error in an</font>

27
00:01:52,819 --> 00:01:57,350
update<font color="#E5E5E5"> message error even causing a</font>

28
00:01:54,560 --> 00:01:59,179
crash in a router of course we have BGP

29
00:01:57,350 --> 00:02:02,419
route<font color="#CCCCCC"> explosion which can result in out</font>

30
00:01:59,179 --> 00:02:04,849
of memory conditions and that may in

31
00:02:02,420 --> 00:02:09,318
fact cause a router to reboot reboot and

32
00:02:04,849 --> 00:02:11,180
<font color="#E5E5E5">then we've all observed a extensive</font><font color="#CCCCCC"> BGP</font>

33
00:02:09,318 --> 00:02:13,488
processing where<font color="#E5E5E5"> we see high CPU</font>

34
00:02:11,180 --> 00:02:16,700
utilization under certain conditions

35
00:02:13,489 --> 00:02:19,220
particularly around<font color="#E5E5E5"> BGP session and</font>

36
00:02:16,700 --> 00:02:22,518
route flapping another thing we've seen

37
00:02:19,220 --> 00:02:25,400
<font color="#E5E5E5">is incorrect BGP path selection process</font>

38
00:02:22,519 --> 00:02:28,280
maybe not so<font color="#CCCCCC"> much a bug in a vendor's</font>

39
00:02:25,400 --> 00:02:31,910
implementation but just by the fact<font color="#E5E5E5"> that</font>

40
00:02:28,280 --> 00:02:33,829
<font color="#E5E5E5">the selection process is now so complex</font>

41
00:02:31,910 --> 00:02:38,299
that whether you have a 10-step process

42
00:02:33,829 --> 00:02:40,549
<font color="#E5E5E5">11 step 12 step 13 step 14 step process</font>

43
00:02:38,299 --> 00:02:42,079
is dependent upon which vendor you have

44
00:02:40,549 --> 00:02:44,510
and which version<font color="#E5E5E5"> of software you have</font>

45
00:02:42,079 --> 00:02:47,389
<font color="#E5E5E5">at any given time so</font><font color="#CCCCCC"> you could have</font>

46
00:02:44,510 --> 00:02:49,340
different different routers and in fact

47
00:02:47,389 --> 00:02:52,459
calculating a different path selection

48
00:02:49,340 --> 00:02:55,069
process and then also a hardware problem

49
00:02:52,459 --> 00:02:57,470
that's been observed in routers is stuck

50
00:02:55,069 --> 00:03:00,679
routes where routes don't get cleared

51
00:02:57,470 --> 00:03:04,609
from the ASIC at the interface and the

52
00:03:00,680 --> 00:03:06,349
forwarding table is incorrect so those

53
00:03:04,609 --> 00:03:08,359
<font color="#CCCCCC">are a lot of negative conditions that</font>

54
00:03:06,349 --> 00:03:15,319
occur in<font color="#E5E5E5"> a network we want to</font><font color="#CCCCCC"> ensure</font>

55
00:03:08,359 --> 00:03:19,030
that we want to<font color="#E5E5E5"> ensure</font><font color="#CCCCCC"> that router is</font>

56
00:03:15,319 --> 00:03:22,220
deployed in a network do not exhibit

57
00:03:19,030 --> 00:03:23,750
catastrophic<font color="#E5E5E5"> conditions and even better</font>

58
00:03:22,220 --> 00:03:26,750
are able to handle those conditions

59
00:03:23,750 --> 00:03:29,720
properly so BGP<font color="#CCCCCC"> can continue along</font>

60
00:03:26,750 --> 00:03:33,739
happily so to do that we want to<font color="#E5E5E5"> do BGP</font>

61
00:03:29,720 --> 00:03:35,480
negative testing negative testing is the

62
00:03:33,739 --> 00:03:35,840
kind<font color="#E5E5E5"> of testing in which you ensure that</font>

63
00:03:35,480 --> 00:03:38,359
under

64
00:03:35,840 --> 00:03:41,599
our arid conditions the networking

65
00:03:38,360 --> 00:03:43,700
device does respond properly it's a lot

66
00:03:41,599 --> 00:03:47,000
different from typical testing<font color="#E5E5E5"> it's it's</font>

67
00:03:43,700 --> 00:03:48,560
more difficult from functionality test

68
00:03:47,000 --> 00:03:50,599
and conformance testing and even

69
00:03:48,560 --> 00:03:52,790
interoperability testing because

70
00:03:50,599 --> 00:03:54,980
negative testing is really boundless the

71
00:03:52,790 --> 00:03:57,650
amount<font color="#E5E5E5"> of error conditions that you</font><font color="#CCCCCC"> can</font>

72
00:03:54,980 --> 00:03:59,869
have with a routing protocol really you

73
00:03:57,650 --> 00:04:01,940
could<font color="#E5E5E5"> just continue to list them forever</font>

74
00:03:59,870 --> 00:04:04,040
but in the<font color="#E5E5E5"> case of functionality</font>

75
00:04:01,940 --> 00:04:06,470
conformance you of an RFC with a

76
00:04:04,040 --> 00:04:09,859
definitive amount of things<font color="#E5E5E5"> that should</font>

77
00:04:06,470 --> 00:04:13,790
go right so<font color="#E5E5E5"> negative testing is in fact</font>

78
00:04:09,860 --> 00:04:18,320
more difficult so<font color="#CCCCCC"> around this came a</font>

79
00:04:13,790 --> 00:04:22,400
great question as far<font color="#E5E5E5"> back as 2008 Ling</font>

80
00:04:18,320 --> 00:04:24,620
list it was entitled<font color="#CCCCCC"> BGP testing ? does</font>

81
00:04:22,400 --> 00:04:27,109
anyone<font color="#E5E5E5"> have a script or a series thereof</font>

82
00:04:24,620 --> 00:04:28,340
to do large-scale<font color="#E5E5E5"> BGP testing I'm</font>

83
00:04:27,110 --> 00:04:30,200
<font color="#E5E5E5">looking for something that will generate</font>

84
00:04:28,340 --> 00:04:32,570
<font color="#CCCCCC">male</font><font color="#E5E5E5"> down several hundred networks or</font>

85
00:04:30,200 --> 00:04:34,520
varying sizes and or fake pairing

86
00:04:32,570 --> 00:04:37,280
relationships with similar purpose and

87
00:04:34,520 --> 00:04:39,799
or do<font color="#E5E5E5"> things that don't meet the BGP</font>

88
00:04:37,280 --> 00:04:41,599
protocol standard so Tim Brown I don't

89
00:04:39,800 --> 00:04:45,830
know you but back in<font color="#E5E5E5"> two thousand you</font>

90
00:04:41,600 --> 00:04:48,229
showed a lot<font color="#CCCCCC"> of vision so where do we</font><font color="#E5E5E5"> go</font>

91
00:04:45,830 --> 00:04:51,889
<font color="#E5E5E5">if we want to do that kind of negative</font>

92
00:04:48,229 --> 00:04:54,560
testing the first place one would look

93
00:04:51,889 --> 00:04:57,020
to is the IETF benchmarking methodology

94
00:04:54,560 --> 00:04:59,300
working group that's the IETF working

95
00:04:57,020 --> 00:05:02,380
group in<font color="#CCCCCC"> the operations area that</font>

96
00:04:59,300 --> 00:05:07,340
defines that<font color="#E5E5E5"> develop standards for</font>

97
00:05:02,380 --> 00:05:09,919
router and switch testing however the

98
00:05:07,340 --> 00:05:11,960
BMW<font color="#E5E5E5"> G really focuses on scaling</font>

99
00:05:09,919 --> 00:05:15,560
forwarding performance and convergence

100
00:05:11,960 --> 00:05:20,388
types issues there's no standardization

101
00:05:15,560 --> 00:05:22,700
of negative testing going<font color="#E5E5E5"> on now typical</font>

102
00:05:20,389 --> 00:05:26,990
typical RFC's and works that you'll see

103
00:05:22,700 --> 00:05:29,560
<font color="#CCCCCC">in the BMW</font><font color="#E5E5E5"> g is the</font><font color="#CCCCCC"> afib based router</font>

104
00:05:26,990 --> 00:05:32,210
performance which is our c3222

105
00:05:29,560 --> 00:05:34,370
benchmarking of<font color="#CCCCCC"> bgp device convergence</font>

106
00:05:32,210 --> 00:05:37,159
in the control plane which is an

107
00:05:34,370 --> 00:05:40,070
official internet-draft benchmarking

108
00:05:37,160 --> 00:05:42,289
terminology and methodology for<font color="#CCCCCC"> IGP data</font>

109
00:05:40,070 --> 00:05:45,560
plane convergence also an official work

110
00:05:42,289 --> 00:05:46,930
item of the BMW<font color="#CCCCCC"> g in fact brent and i</font>

111
00:05:45,560 --> 00:05:49,150
are co-authors on that

112
00:05:46,930 --> 00:05:51,430
so there is work being done around

113
00:05:49,150 --> 00:05:55,330
routing protocols testing of<font color="#E5E5E5"> it within</font>

114
00:05:51,430 --> 00:05:57,190
the IETF however there is no no work

115
00:05:55,330 --> 00:05:59,050
being done around negative testing so

116
00:05:57,190 --> 00:06:01,930
that's really getting to the to the

117
00:05:59,050 --> 00:06:03,520
purpose of<font color="#CCCCCC"> this presentation we wanted</font>

118
00:06:01,930 --> 00:06:06,490
to<font color="#E5E5E5"> help define what should be done for</font>

119
00:06:03,520 --> 00:06:09,219
<font color="#E5E5E5">bgp negative tests and given those given</font>

120
00:06:06,490 --> 00:06:12,610
those negative conditions that can occur

121
00:06:09,220 --> 00:06:14,500
in networks and in fact do so starting

122
00:06:12,610 --> 00:06:17,020
with update errors when you do negative

123
00:06:14,500 --> 00:06:19,180
testing with<font color="#CCCCCC"> bgp you want to do bad</font>

124
00:06:17,020 --> 00:06:20,710
things with your<font color="#CCCCCC"> a.s path list when</font>

125
00:06:19,180 --> 00:06:22,750
you're doing testing you want to create

126
00:06:20,710 --> 00:06:24,969
routing loops in the<font color="#CCCCCC"> a</font><font color="#E5E5E5"> s path list you</font>

127
00:06:22,750 --> 00:06:27,370
want to do testing<font color="#E5E5E5"> with the maximum a s</font>

128
00:06:24,970 --> 00:06:29,949
path length first determining in fact

129
00:06:27,370 --> 00:06:32,349
what that maximum length is you want to

130
00:06:29,949 --> 00:06:34,870
send update messages with missing

131
00:06:32,349 --> 00:06:36,490
incorrect errored attributes you want to

132
00:06:34,870 --> 00:06:39,690
do this for different types of pairing

133
00:06:36,490 --> 00:06:42,220
sessions ebgp I BGP route reflectors

134
00:06:39,690 --> 00:06:44,650
<font color="#CCCCCC">confederations if you're using those so</font>

135
00:06:42,220 --> 00:06:46,750
you<font color="#CCCCCC"> really want</font><font color="#E5E5E5"> to mess around with the</font>

136
00:06:44,650 --> 00:06:49,060
update packet it is possible you may

137
00:06:46,750 --> 00:06:51,520
have a implementation in your network

138
00:06:49,060 --> 00:06:53,770
that does something incorrectly with an

139
00:06:51,520 --> 00:06:55,570
attribute and a<font color="#CCCCCC"> neighboring router</font>

140
00:06:53,770 --> 00:06:57,190
doesn't know how to handle that there's

141
00:06:55,570 --> 00:07:00,340
been<font color="#E5E5E5"> a known case where that neighboring</font>

142
00:06:57,190 --> 00:07:02,199
router crashes okay so negative tests

143
00:07:00,340 --> 00:07:03,909
like that should<font color="#CCCCCC"> be done you want to do</font>

144
00:07:02,199 --> 00:07:07,150
testing<font color="#CCCCCC"> in your update message where the</font>

145
00:07:03,909 --> 00:07:09,280
nlr I next<font color="#CCCCCC"> hop is incorrect you want to</font>

146
00:07:07,150 --> 00:07:12,729
have the receiving router be the next

147
00:07:09,280 --> 00:07:14,948
top for that nlr I you<font color="#E5E5E5"> want the nlr I in</font>

148
00:07:12,729 --> 00:07:16,599
<font color="#E5E5E5">fact to be its own next top and you want</font>

149
00:07:14,949 --> 00:07:18,880
to have of course an unreachable next

150
00:07:16,599 --> 00:07:20,710
top make<font color="#CCCCCC"> sure the device</font><font color="#E5E5E5"> under test can</font>

151
00:07:18,880 --> 00:07:22,419
handle all of those negative conditions

152
00:07:20,710 --> 00:07:25,060
and then you also want to do

153
00:07:22,419 --> 00:07:29,289
interoperability with negotiated

154
00:07:25,060 --> 00:07:31,690
capabilities and you want you want

155
00:07:29,289 --> 00:07:33,550
attributes to be in the update<font color="#E5E5E5"> message</font>

156
00:07:31,690 --> 00:07:35,560
that should<font color="#E5E5E5"> in fact not be there because</font>

157
00:07:33,550 --> 00:07:40,449
they weren't agreed upon in the

158
00:07:35,560 --> 00:07:42,669
negotiation negative testing of<font color="#E5E5E5"> BGP</font>

159
00:07:40,449 --> 00:07:44,770
resources I really consider this the

160
00:07:42,669 --> 00:07:47,948
cornerstone of the BGP negative testing

161
00:07:44,770 --> 00:07:51,909
you want to maximize memory utilization

162
00:07:47,949 --> 00:07:54,340
and cpu utilization and see how your<font color="#CCCCCC"> BGP</font>

163
00:07:51,909 --> 00:07:56,919
speaking device performs so first

164
00:07:54,340 --> 00:07:58,869
without<font color="#CCCCCC"> in memory simulating a BGP route</font>

165
00:07:56,919 --> 00:08:00,810
explosion case in your network

166
00:07:58,870 --> 00:08:03,820
you force that out of memory<font color="#E5E5E5"> condition</font>

167
00:08:00,810 --> 00:08:06,220
by advertising<font color="#E5E5E5"> nlr eyes until there is</font>

168
00:08:03,820 --> 00:08:08,440
no memory available so you do do need<font color="#CCCCCC"> to</font>

169
00:08:06,220 --> 00:08:10,420
observe the memory utilization on the

170
00:08:08,440 --> 00:08:12,730
device<font color="#E5E5E5"> and then you want to continue to</font>

171
00:08:10,420 --> 00:08:15,580
advertise so that you go beyond that

172
00:08:12,730 --> 00:08:17,860
<font color="#E5E5E5">point this is a good test because</font>

173
00:08:15,580 --> 00:08:19,780
<font color="#E5E5E5">different implementations handle the out</font>

174
00:08:17,860 --> 00:08:21,670
of memory condition differently there

175
00:08:19,780 --> 00:08:23,799
are implementations<font color="#E5E5E5"> that purposely crash</font>

176
00:08:21,670 --> 00:08:26,080
and reboot<font color="#CCCCCC"> your router there are</font>

177
00:08:23,800 --> 00:08:27,700
implementations<font color="#E5E5E5"> that bring down pairing</font>

178
00:08:26,080 --> 00:08:29,380
sessions from which the most routes are

179
00:08:27,700 --> 00:08:31,380
<font color="#E5E5E5">being learned there are implementations</font>

180
00:08:29,380 --> 00:08:33,909
where it just hits that point of maximum

181
00:08:31,380 --> 00:08:36,220
memory utilization and stops learning

182
00:08:33,909 --> 00:08:37,900
routes period so there are<font color="#CCCCCC"> different</font>

183
00:08:36,220 --> 00:08:39,880
ways<font color="#E5E5E5"> that different implementations</font>

184
00:08:37,900 --> 00:08:41,650
handle this case none of<font color="#E5E5E5"> which is</font>

185
00:08:39,880 --> 00:08:44,200
standardized so you do want<font color="#E5E5E5"> to do this-</font>

186
00:08:41,650 --> 00:08:46,540
testing and see how your router handles

187
00:08:44,200 --> 00:08:48,940
us then there's the<font color="#E5E5E5"> case of bgp</font>

188
00:08:46,540 --> 00:08:51,730
processing this is where you force high

189
00:08:48,940 --> 00:08:54,400
<font color="#E5E5E5">cpu utilization and see how your router</font>

190
00:08:51,730 --> 00:08:56,950
handles that the two classic cases for

191
00:08:54,400 --> 00:08:59,770
the high<font color="#E5E5E5"> cpu utilization to classic test</font>

192
00:08:56,950 --> 00:09:01,300
cases our first one removed that ebgp

193
00:08:59,770 --> 00:09:03,340
<font color="#CCCCCC">pair from what you've learned the most</font>

194
00:09:01,300 --> 00:09:06,069
routes in your fib just take that away

195
00:09:03,340 --> 00:09:07,870
that'll force high<font color="#E5E5E5"> cpu utilization that</font>

196
00:09:06,070 --> 00:09:09,670
<font color="#E5E5E5">pair from from whom you've learned say</font>

197
00:09:07,870 --> 00:09:11,440
even as high as a hundred thousand

198
00:09:09,670 --> 00:09:14,620
routes remove it<font color="#E5E5E5"> see how your router</font>

199
00:09:11,440 --> 00:09:16,900
handles that case the next one<font color="#CCCCCC"> is what i</font>

200
00:09:14,620 --> 00:09:19,030
call the nested convergence event will

201
00:09:16,900 --> 00:09:21,340
<font color="#E5E5E5">you force a convergence event and while</font>

202
00:09:19,030 --> 00:09:23,920
the device is still converging force

203
00:09:21,340 --> 00:09:26,650
another convergence event so on<font color="#CCCCCC"> one like</font>

204
00:09:23,920 --> 00:09:29,110
you may bring that link down<font color="#CCCCCC"> and on</font>

205
00:09:26,650 --> 00:09:30,670
another interface remove the<font color="#E5E5E5"> BGP peering</font>

206
00:09:29,110 --> 00:09:32,560
session so you have these nested

207
00:09:30,670 --> 00:09:35,290
convergence events that will cause a

208
00:09:32,560 --> 00:09:38,109
very high<font color="#E5E5E5"> CPU utilization and then</font>

209
00:09:35,290 --> 00:09:41,469
there's the the case of redistributing

210
00:09:38,110 --> 00:09:44,260
<font color="#CCCCCC">BGP into your IGP that's a</font><font color="#E5E5E5"> very good-</font>

211
00:09:41,470 --> 00:09:49,360
case to see how your your router can

212
00:09:44,260 --> 00:09:52,120
handle memory conditions<font color="#CCCCCC"> okay so now in</font>

213
00:09:49,360 --> 00:09:54,540
the in the convergence test cases where

214
00:09:52,120 --> 00:09:55,960
you have it's a rather simple setup

215
00:09:54,540 --> 00:09:57,370
<font color="#CCCCCC">straightforward there are a lot of</font>

216
00:09:55,960 --> 00:09:59,260
<font color="#CCCCCC">different conditions for what you</font><font color="#E5E5E5"> want</font>

217
00:09:57,370 --> 00:10:01,120
to do this so you have your device under

218
00:09:59,260 --> 00:10:03,670
test and you have your<font color="#E5E5E5"> test equipment</font>

219
00:10:01,120 --> 00:10:06,070
your test equipment Ford's traffic in on

220
00:10:03,670 --> 00:10:08,589
one interface and the dot<font color="#CCCCCC"> has device</font>

221
00:10:06,070 --> 00:10:09,550
under test has two interfaces outbound

222
00:10:08,590 --> 00:10:10,990
that are your

223
00:10:09,550 --> 00:10:13,959
options there's the preferred egress

224
00:10:10,990 --> 00:10:15,910
interface and<font color="#CCCCCC"> the next</font><font color="#E5E5E5"> best egress</font>

225
00:10:13,959 --> 00:10:18,699
interface you want to cause a

226
00:10:15,910 --> 00:10:21,089
convergence event to occur so that the

227
00:10:18,700 --> 00:10:24,250
traffic coming inbound going outbound

228
00:10:21,089 --> 00:10:26,290
switches from the<font color="#E5E5E5"> preferred to the next</font>

229
00:10:24,250 --> 00:10:28,209
best egress interface and you want to

230
00:10:26,290 --> 00:10:29,860
measure the time that this<font color="#E5E5E5"> takes to</font>

231
00:10:28,209 --> 00:10:31,869
happen and you want to do it<font color="#E5E5E5"> under a</font>

232
00:10:29,860 --> 00:10:34,209
variety of negative conditions because

233
00:10:31,870 --> 00:10:36,430
you will get different results for each

234
00:10:34,209 --> 00:10:38,050
of these conditions<font color="#E5E5E5"> there's cases of</font>

235
00:10:36,430 --> 00:10:40,029
link failure where you have local

236
00:10:38,050 --> 00:10:42,399
interface failure neighbor interface

237
00:10:40,029 --> 00:10:44,860
failure even a remote interface failure

238
00:10:42,399 --> 00:10:47,709
layer to failure so your physical link

239
00:10:44,860 --> 00:10:50,769
is still<font color="#E5E5E5"> up but you lose PPP Giggy may</font>

240
00:10:47,709 --> 00:10:53,859
go<font color="#CCCCCC"> down igp adjacency fail or failure so</font>

241
00:10:50,769 --> 00:10:56,440
you have likely<font color="#CCCCCC"> IGP next</font><font color="#E5E5E5"> hops for your</font>

242
00:10:53,860 --> 00:10:58,779
bgp routes and that adjacency goes down

243
00:10:56,440 --> 00:11:01,089
you want to cause route withdrawals to

244
00:10:58,779 --> 00:11:03,700
force the convergence and then do a cost

245
00:11:01,089 --> 00:11:05,740
change for your<font color="#CCCCCC"> IGP or even a med change</font>

246
00:11:03,700 --> 00:11:07,540
for<font color="#E5E5E5"> your bgp routes to force the</font>

247
00:11:05,740 --> 00:11:09,279
convergence events it<font color="#E5E5E5"> really is</font>

248
00:11:07,540 --> 00:11:11,319
important to run<font color="#E5E5E5"> through all</font><font color="#CCCCCC"> of these</font>

249
00:11:09,279 --> 00:11:15,279
cases<font color="#E5E5E5"> because you can get different</font>

250
00:11:11,320 --> 00:11:17,170
results for each of these cases<font color="#E5E5E5"> okay and</font>

251
00:11:15,279 --> 00:11:19,839
<font color="#E5E5E5">then there's BGP functionality there's</font>

252
00:11:17,170 --> 00:11:21,279
the path decision process you want to go

253
00:11:19,839 --> 00:11:24,130
through the process so that you

254
00:11:21,279 --> 00:11:27,640
<font color="#CCCCCC">advertise the same nlr I from multiple</font>

255
00:11:24,130 --> 00:11:29,320
simulated neighbors and force ties so

256
00:11:27,640 --> 00:11:31,390
that you walk<font color="#E5E5E5"> through each</font><font color="#CCCCCC"> of the steps</font>

257
00:11:29,320 --> 00:11:34,300
in the process and make<font color="#CCCCCC"> sure that each</font>

258
00:11:31,390 --> 00:11:35,800
of those steps is handled correctly then

259
00:11:34,300 --> 00:11:37,689
you also want<font color="#E5E5E5"> to do negative testing</font>

260
00:11:35,800 --> 00:11:39,939
with invalid peering you want to ensure

261
00:11:37,690 --> 00:11:42,190
your device will not care when it should

262
00:11:39,940 --> 00:11:44,020
not peer so you want to do incorrect<font color="#CCCCCC"> a/s</font>

263
00:11:42,190 --> 00:11:45,520
numbers you want<font color="#E5E5E5"> to do md5</font>

264
00:11:44,020 --> 00:11:47,050
authentication and you want to do it

265
00:11:45,520 --> 00:11:49,720
with invalid passwords and keys

266
00:11:47,050 --> 00:11:53,620
different combinations of<font color="#E5E5E5"> that make</font><font color="#CCCCCC"> sure</font>

267
00:11:49,720 --> 00:11:56,320
your device does<font color="#CCCCCC"> not care</font><font color="#E5E5E5"> okay and then</font>

268
00:11:53,620 --> 00:11:58,449
there's a particular BGP configuration

269
00:11:56,320 --> 00:12:00,490
that really can influence the

270
00:11:58,449 --> 00:12:02,890
performance of your vgp speaking device

271
00:12:00,490 --> 00:12:06,160
the first one is your hello keep a live

272
00:12:02,890 --> 00:12:08,860
timer you can have it set to 30 90

273
00:12:06,160 --> 00:12:11,949
seconds or 60 180 with different

274
00:12:08,860 --> 00:12:14,130
implementations you can really<font color="#E5E5E5"> notice mm</font>

275
00:12:11,949 --> 00:12:17,609
difference you

276
00:12:14,130 --> 00:12:22,380
I think what<font color="#E5E5E5"> you have is contagious so</font>

277
00:12:17,610 --> 00:12:24,840
different so different implementations

278
00:12:22,380 --> 00:12:27,300
will actually have different performance

279
00:12:24,840 --> 00:12:29,490
especially around the area of CPU

280
00:12:27,300 --> 00:12:31,770
utilization with that hello<font color="#CCCCCC"> keep alive</font>

281
00:12:29,490 --> 00:12:35,520
time are being<font color="#E5E5E5"> set so you may in fact</font>

282
00:12:31,770 --> 00:12:38,400
want to set it lower to 30 90 from 60 80

283
00:12:35,520 --> 00:12:40,530
and see what the performance<font color="#E5E5E5"> it is that</font>

284
00:12:38,400 --> 00:12:42,750
you actually get another configuration

285
00:12:40,530 --> 00:12:45,959
and this one<font color="#CCCCCC"> comes more from your test</font>

286
00:12:42,750 --> 00:12:48,690
equipment is the update rate routers are

287
00:12:45,960 --> 00:12:51,450
typically stable learning<font color="#CCCCCC"> 2000 nlr eyes</font>

288
00:12:48,690 --> 00:12:53,880
per second however if it gets much

289
00:12:51,450 --> 00:12:55,860
<font color="#E5E5E5">higher than that you can</font><font color="#CCCCCC"> see sessions</font>

290
00:12:53,880 --> 00:12:58,800
start to come down<font color="#E5E5E5"> so you want to do</font>

291
00:12:55,860 --> 00:13:01,050
negative testing test<font color="#CCCCCC"> equipment now can</font>

292
00:12:58,800 --> 00:13:02,670
even go as high as 5,000 nlr eyes per

293
00:13:01,050 --> 00:13:05,040
second you want to set the test

294
00:13:02,670 --> 00:13:07,140
equipment to that and ensure that<font color="#CCCCCC"> you</font>

295
00:13:05,040 --> 00:13:09,660
can handle<font color="#CCCCCC"> that case and if you're</font>

296
00:13:07,140 --> 00:13:12,870
<font color="#E5E5E5">getting flooded with</font><font color="#CCCCCC"> too many</font><font color="#E5E5E5"> out nlr</font>

297
00:13:09,660 --> 00:13:14,730
eyes quickly now in combination with

298
00:13:12,870 --> 00:13:17,790
hello keep a lifetime or an update rate

299
00:13:14,730 --> 00:13:19,950
your results for cpu utilization memory

300
00:13:17,790 --> 00:13:21,900
utilization can be impacted<font color="#CCCCCC"> by the</font>

301
00:13:19,950 --> 00:13:24,810
number of peers you have<font color="#E5E5E5"> established</font>

302
00:13:21,900 --> 00:13:26,430
what types of peers those are the number

303
00:13:24,810 --> 00:13:28,319
of routes you've learned<font color="#CCCCCC"> from each pair</font>

304
00:13:26,430 --> 00:13:30,300
and the total<font color="#E5E5E5"> number of routes in your</font>

305
00:13:28,320 --> 00:13:32,760
fib so you have your ribs and your FEHB

306
00:13:30,300 --> 00:13:34,829
number of sessions those can also

307
00:13:32,760 --> 00:13:36,750
influence your<font color="#E5E5E5"> CPU utilization and</font>

308
00:13:34,830 --> 00:13:40,050
memory utilization so you want to test

309
00:13:36,750 --> 00:13:41,850
with very various scaling to improve

310
00:13:40,050 --> 00:13:43,589
performance with various scaling you

311
00:13:41,850 --> 00:13:45,720
configure peer groups that way you're

312
00:13:43,590 --> 00:13:47,810
sharing memory resources so you want to

313
00:13:45,720 --> 00:13:50,250
do<font color="#E5E5E5"> testing with peer groups too in fact</font>

314
00:13:47,810 --> 00:13:54,510
notice the savings<font color="#CCCCCC"> that you</font><font color="#E5E5E5"> expect to</font>

315
00:13:50,250 --> 00:13:57,210
get in your router<font color="#CCCCCC"> okay so we started to</font>

316
00:13:54,510 --> 00:13:59,130
talk about the test tools test tools for

317
00:13:57,210 --> 00:14:01,490
vgp negative testing really have come<font color="#E5E5E5"> a</font>

318
00:13:59,130 --> 00:14:04,830
long way in the last year if<font color="#CCCCCC"> there any</font>

319
00:14:01,490 --> 00:14:07,230
test equipment vendors out here I I

320
00:14:04,830 --> 00:14:08,370
<font color="#E5E5E5">personally want to thank you</font><font color="#CCCCCC"> for the</font>

321
00:14:07,230 --> 00:14:10,320
improvements<font color="#E5E5E5"> that have been made over</font>

322
00:14:08,370 --> 00:14:13,410
the last year<font color="#CCCCCC"> for doing</font><font color="#E5E5E5"> BGP negative</font>

323
00:14:10,320 --> 00:14:16,590
testing you now have<font color="#CCCCCC"> the ability</font><font color="#E5E5E5"> to do</font>

324
00:14:13,410 --> 00:14:19,980
<font color="#E5E5E5">ibgp or ebgp capability while</font>

325
00:14:16,590 --> 00:14:22,650
configuring an igp ospf for is is or

326
00:14:19,980 --> 00:14:25,950
even rip if<font color="#E5E5E5"> you want on that</font><font color="#CCCCCC"> same test</font>

327
00:14:22,650 --> 00:14:26,720
port and force your<font color="#E5E5E5"> BGP routes being</font>

328
00:14:25,950 --> 00:14:30,019
advertised

329
00:14:26,720 --> 00:14:31,910
to use those advertised<font color="#CCCCCC"> igp routes is</font>

330
00:14:30,019 --> 00:14:33,769
the next top so<font color="#E5E5E5"> you really from your</font>

331
00:14:31,910 --> 00:14:36,529
<font color="#E5E5E5">test equipment can get the relationship</font>

332
00:14:33,769 --> 00:14:38,540
between your<font color="#CCCCCC"> bgp and igp on the same</font>

333
00:14:36,529 --> 00:14:40,370
interfaces you have the<font color="#E5E5E5"> ability</font><font color="#CCCCCC"> to</font>

334
00:14:38,540 --> 00:14:43,040
configure update rates and timers to

335
00:14:40,370 --> 00:14:45,529
test the various combinations that we

336
00:14:43,040 --> 00:14:47,149
just<font color="#E5E5E5"> talked about another nice feature</font>

337
00:14:45,529 --> 00:14:49,100
that<font color="#CCCCCC"> a</font><font color="#E5E5E5"> couple of the test equipment</font>

338
00:14:47,149 --> 00:14:51,889
vendors have come up up<font color="#E5E5E5"> with is you can</font>

339
00:14:49,100 --> 00:14:54,889
load an external route table for example

340
00:14:51,889 --> 00:14:57,019
show IP bgp<font color="#CCCCCC"> i know in fact not showing</font>

341
00:14:54,889 --> 00:15:00,470
vendor favoritism in any way believe me

342
00:14:57,019 --> 00:15:03,800
<font color="#E5E5E5">i know that the cisco show IP IP bgp</font>

343
00:15:00,470 --> 00:15:05,509
format that output is supported by test

344
00:15:03,800 --> 00:15:08,269
equipment where you load a file with

345
00:15:05,509 --> 00:15:11,389
that show IP bgp format of your BGP

346
00:15:08,269 --> 00:15:14,060
route table 120,000 routes those with

347
00:15:11,389 --> 00:15:17,660
are the routes that<font color="#E5E5E5"> the BGP session will</font>

348
00:15:14,060 --> 00:15:20,329
use in advertising<font color="#CCCCCC"> it's nlr eyes when</font>

349
00:15:17,660 --> 00:15:21,709
emulating the<font color="#E5E5E5"> BGP session so that's a</font>

350
00:15:20,329 --> 00:15:24,709
very<font color="#E5E5E5"> nice feature so you can do your</font>

351
00:15:21,709 --> 00:15:27,469
<font color="#E5E5E5">testing with</font><font color="#CCCCCC"> the actual route table</font><font color="#E5E5E5"> okay</font>

352
00:15:24,709 --> 00:15:29,359
and<font color="#E5E5E5"> also now all the test equipment</font>

353
00:15:27,470 --> 00:15:31,550
vendors are supporting a tickle

354
00:15:29,360 --> 00:15:33,790
scripting<font color="#E5E5E5"> of their routing protocols so</font>

355
00:15:31,550 --> 00:15:36,500
you can<font color="#E5E5E5"> really do some nice automated</font>

356
00:15:33,790 --> 00:15:39,259
testing of these negative test cases in

357
00:15:36,500 --> 00:15:42,199
fact<font color="#CCCCCC"> I'd really like to see the test</font>

358
00:15:39,259 --> 00:15:44,209
equipment vendors come up with a suite

359
00:15:42,199 --> 00:15:46,609
of negative tests so we don't have<font color="#E5E5E5"> to</font><font color="#CCCCCC"> go</font>

360
00:15:44,209 --> 00:15:48,079
write our own if we go<font color="#E5E5E5"> all go have to go</font>

361
00:15:46,610 --> 00:15:50,029
write our own<font color="#E5E5E5"> where we're wasting</font>

362
00:15:48,079 --> 00:15:51,829
resources right if the test equipment

363
00:15:50,029 --> 00:15:54,319
vendors could write it<font color="#E5E5E5"> for us and we'll</font>

364
00:15:51,829 --> 00:15:56,449
just<font color="#E5E5E5"> go pay some small price for</font><font color="#CCCCCC"> it then</font>

365
00:15:54,319 --> 00:15:58,878
then we'd be willing to would<font color="#E5E5E5"> be very</font>

366
00:15:56,449 --> 00:16:00,378
eager<font color="#CCCCCC"> to have that all right now and of</font>

367
00:15:58,879 --> 00:16:02,870
course we'd like something can for the

368
00:16:00,379 --> 00:16:05,120
path selection process as<font color="#E5E5E5"> well in case</font>

369
00:16:02,870 --> 00:16:06,680
<font color="#CCCCCC">you don't want to go the route of buying</font>

370
00:16:05,120 --> 00:16:08,720
anything there are a couple freeware

371
00:16:06,680 --> 00:16:10,729
tools out there there's the<font color="#CCCCCC"> python</font>

372
00:16:08,720 --> 00:16:13,129
routing toolkit from sprint that you can

373
00:16:10,730 --> 00:16:15,139
use<font color="#CCCCCC"> to emulate a large BGP topology and</font>

374
00:16:13,129 --> 00:16:17,990
do<font color="#E5E5E5"> some negative testing and then</font>

375
00:16:15,139 --> 00:16:20,600
there's<font color="#E5E5E5"> BGP sim from Merritt that's now</font>

376
00:16:17,990 --> 00:16:23,029
on<font color="#E5E5E5"> sourceforge com so those</font><font color="#CCCCCC"> are a couple</font>

377
00:16:20,600 --> 00:16:26,720
low-cost alternatives you can use<font color="#E5E5E5"> for</font>

378
00:16:23,029 --> 00:16:30,110
your<font color="#E5E5E5"> bgp negative tested</font><font color="#CCCCCC"> all right so in</font>

379
00:16:26,720 --> 00:16:32,600
summary negative testing is very

380
00:16:30,110 --> 00:16:34,639
critical especially for bgp and we've

381
00:16:32,600 --> 00:16:36,740
seen what's happened in networks under-

382
00:16:34,639 --> 00:16:38,990
conditions so we need to do negative

383
00:16:36,740 --> 00:16:40,730
testing in the lab before deployment

384
00:16:38,990 --> 00:16:42,920
make sure<font color="#CCCCCC"> your negative</font>

385
00:16:40,730 --> 00:16:46,339
thing is driving high memory and cpu

386
00:16:42,920 --> 00:16:48,560
utilization and since the the BMW<font color="#CCCCCC"> g</font>

387
00:16:46,339 --> 00:16:51,050
really hasn't given us anything to grab

388
00:16:48,560 --> 00:16:54,439
on to<font color="#E5E5E5"> as far as negative testing we've</font>

389
00:16:51,050 --> 00:16:55,939
outlined some key areas that<font color="#E5E5E5"> where we</font>

390
00:16:54,440 --> 00:16:58,130
should do the negative testing update

391
00:16:55,940 --> 00:17:00,889
message errors route convergence path

392
00:16:58,130 --> 00:17:04,760
selection process appearing errors and

393
00:17:00,889 --> 00:17:06,620
then configuration details as well what

394
00:17:04,760 --> 00:17:09,500
Brent and I would like to do at this

395
00:17:06,619 --> 00:17:12,438
point is we'd like<font color="#E5E5E5"> to</font><font color="#CCCCCC"> bring this as a</font>

396
00:17:09,500 --> 00:17:15,470
draft of the BMW<font color="#E5E5E5"> G and even though it's</font>

397
00:17:12,439 --> 00:17:17,839
not<font color="#E5E5E5"> a negative testings not part of the</font>

398
00:17:15,470 --> 00:17:20,270
<font color="#E5E5E5">Charter we think we think that this is</font>

399
00:17:17,839 --> 00:17:23,629
<font color="#E5E5E5">important enough that maybe does get</font>

400
00:17:20,270 --> 00:17:27,619
looked at since the BMW<font color="#E5E5E5"> G is part of the</font>

401
00:17:23,630 --> 00:17:30,140
operations area your your input their

402
00:17:27,619 --> 00:17:31,729
your involvement on all of the BMW<font color="#CCCCCC"> G</font>

403
00:17:30,140 --> 00:17:35,630
drafts but would<font color="#CCCCCC"> be very much</font>

404
00:17:31,730 --> 00:17:37,160
appreciated<font color="#E5E5E5"> ok and</font><font color="#CCCCCC"> then of course for</font>

405
00:17:35,630 --> 00:17:38,720
all this testing that we're doing<font color="#CCCCCC"> I</font>

406
00:17:37,160 --> 00:17:41,510
think<font color="#CCCCCC"> the test equipment we need to get</font>

407
00:17:38,720 --> 00:17:44,960
<font color="#E5E5E5">it</font><font color="#CCCCCC"> done is there now alright so thank</font>

408
00:17:41,510 --> 00:17:49,250
you<font color="#CCCCCC"> and thank you very much any</font>

409
00:17:44,960 --> 00:17:50,600
questions all right<font color="#CCCCCC"> ok well</font><font color="#E5E5E5"> you're</font>

410
00:17:49,250 --> 00:17:54,500
coming<font color="#E5E5E5"> up I have one have you seen</font>

411
00:17:50,600 --> 00:17:57,110
anybody doing or having the short enough

412
00:17:54,500 --> 00:18:02,980
wit and enough cannabinol fortitude to

413
00:17:57,110 --> 00:18:02,979
actually test live routers in the wild

414
00:18:03,460 --> 00:18:12,169
no and I think that's a good thing hi

415
00:18:09,530 --> 00:18:14,059
<font color="#E5E5E5">I'm just yours hi I'm Tim Brown thanks</font>

416
00:18:12,169 --> 00:18:16,070
for mentioning me and your PO hey nice

417
00:18:14,059 --> 00:18:17,629
to meet you just a just a couple really

418
00:18:16,070 --> 00:18:20,990
<font color="#E5E5E5">quick comments and questions I think</font>

419
00:18:17,630 --> 00:18:22,610
first the challenge is a lot<font color="#E5E5E5"> of the</font>

420
00:18:20,990 --> 00:18:24,140
vendors that are out there and<font color="#CCCCCC"> a lot</font><font color="#E5E5E5"> of</font>

421
00:18:22,610 --> 00:18:26,418
the operators are out there have written

422
00:18:24,140 --> 00:18:28,220
these in-house tools I get a lot of

423
00:18:26,419 --> 00:18:31,250
private responses when I wrote that post

424
00:18:28,220 --> 00:18:32,840
and I think there's a I think there's a

425
00:18:31,250 --> 00:18:33,980
call for operators to try to release

426
00:18:32,840 --> 00:18:35,899
some of the in-house tools<font color="#E5E5E5"> that they</font>

427
00:18:33,980 --> 00:18:37,220
design because it often meets a<font color="#CCCCCC"> lot of</font>

428
00:18:35,900 --> 00:18:40,669
these needs that we talked about<font color="#CCCCCC"> here at</font>

429
00:18:37,220 --> 00:18:42,380
nog the second thing is I think<font color="#E5E5E5"> there's</font>

430
00:18:40,669 --> 00:18:44,419
<font color="#CCCCCC">been a lot of advancement in the</font><font color="#E5E5E5"> open</font>

431
00:18:42,380 --> 00:18:46,490
source routing community quag a zebra

432
00:18:44,419 --> 00:18:48,080
etc and those have been real enablers as

433
00:18:46,490 --> 00:18:50,270
far as you know doing these statistics

434
00:18:48,080 --> 00:18:51,889
and stuff and I mean I think<font color="#E5E5E5"> that you</font>

435
00:18:50,270 --> 00:18:53,210
know if any of the folks that are

436
00:18:51,890 --> 00:18:54,050
contributing<font color="#E5E5E5"> to those projects are</font>

437
00:18:53,210 --> 00:18:56,270
listening<font color="#CCCCCC"> this</font>

438
00:18:54,050 --> 00:18:57,500
statistics<font color="#CCCCCC"> ID is really I think one of</font>

439
00:18:56,270 --> 00:18:59,030
the primary things that interest

440
00:18:57,500 --> 00:19:00,980
operators because generally operators

441
00:18:59,030 --> 00:19:02,210
aren't running their networks on PC

442
00:19:00,980 --> 00:19:04,100
routers and things like that<font color="#E5E5E5"> but the</font>

443
00:19:02,210 --> 00:19:06,680
statistics<font color="#CCCCCC"> side has definitely</font><font color="#E5E5E5"> helped to</font>

444
00:19:04,100 --> 00:19:10,399
to us so yeah absolutely thank you yeah

445
00:19:06,680 --> 00:19:15,070
thanks for<font color="#CCCCCC"> the comments if there's</font>

446
00:19:10,400 --> 00:19:15,070
nothing else thank you very much guys

