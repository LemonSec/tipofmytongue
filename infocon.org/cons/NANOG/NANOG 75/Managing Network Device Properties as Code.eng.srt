1
00:00:10,690 --> 00:00:15,950
hi everyone so I'm doing a network for

2
00:00:15,680 --> 00:00:19,490
that

3
00:00:15,950 --> 00:00:21,650
engineer infobox in today I'm going to

4
00:00:19,490 --> 00:00:23,750
explain how to manage your network

5
00:00:21,650 --> 00:00:26,509
device property differently a little bit

6
00:00:23,750 --> 00:00:28,160
of background about myself a general box

7
00:00:26,509 --> 00:00:30,919
- a year ago and before that I spent

8
00:00:28,160 --> 00:00:33,829
most of my career on working for

9
00:00:30,919 --> 00:00:36,950
different vendors so I can say it's been

10
00:00:33,829 --> 00:00:38,480
a very interesting experience for me to

11
00:00:36,950 --> 00:00:40,250
move from vendor customers and I'm

12
00:00:38,480 --> 00:00:44,209
hoping to share a bit of that knowledge

13
00:00:40,250 --> 00:00:46,040
with you today some of the agenda after

14
00:00:44,210 --> 00:00:47,300
the introductions I'm going to spend

15
00:00:46,040 --> 00:00:49,280
some time make sure we all had the same

16
00:00:47,300 --> 00:00:51,140
definition of what are the network

17
00:00:49,280 --> 00:00:53,300
device properties took a little bit

18
00:00:51,140 --> 00:00:55,790
about how why they're important and the

19
00:00:53,300 --> 00:00:58,879
challenges then I'm going to try to

20
00:00:55,790 --> 00:01:00,379
explain how our our industry in what is

21
00:00:58,880 --> 00:01:02,270
the state of how we are managing that

22
00:01:00,380 --> 00:01:04,489
today and what are the challenges with

23
00:01:02,270 --> 00:01:07,220
those approaches and then we'll look on

24
00:01:04,489 --> 00:01:11,990
what how can we do that differently and

25
00:01:07,220 --> 00:01:15,289
we'll finish with a question so first

26
00:01:11,990 --> 00:01:18,770
what is roblox roblox is a social and

27
00:01:15,290 --> 00:01:20,689
gaming platform for kids it's really the

28
00:01:18,770 --> 00:01:22,009
idea is that we don't build a game we

29
00:01:20,689 --> 00:01:24,169
build the platform's we build everything

30
00:01:22,009 --> 00:01:26,119
so that anybody can write their own

31
00:01:24,170 --> 00:01:28,189
games and play their own games witchu

32
00:01:26,119 --> 00:01:31,850
they have over 2 million active

33
00:01:28,189 --> 00:01:34,669
developers and over 80 million active

34
00:01:31,850 --> 00:01:37,880
months the user for the network industry

35
00:01:34,670 --> 00:01:43,939
for you we are also the as to 2 697 and

36
00:01:37,880 --> 00:01:45,859
you can find us on many AI axis so 2018

37
00:01:43,939 --> 00:01:47,958
for us has been very interesting years

38
00:01:45,859 --> 00:01:50,329
because our mission on the network side

39
00:01:47,959 --> 00:01:52,279
was pretty much to rebuild everything we

40
00:01:50,329 --> 00:01:54,859
started the year with one big asset at

41
00:01:52,279 --> 00:01:56,509
the center layer - and the goal that was

42
00:01:54,859 --> 00:01:58,669
sold to the board was we will finish the

43
00:01:56,509 --> 00:02:00,709
year by replacing these data centers

44
00:01:58,670 --> 00:02:03,469
building two new one building a global

45
00:02:00,709 --> 00:02:06,170
backbone in 12oz with a very small team

46
00:02:03,469 --> 00:02:08,750
and the state was at this time we had

47
00:02:06,170 --> 00:02:10,880
pretty much no automation so that's kind

48
00:02:08,750 --> 00:02:13,310
of where I got hired and the way we won

49
00:02:10,880 --> 00:02:14,780
I did the team was actually we went way

50
00:02:13,310 --> 00:02:16,340
faster than expected after only a few

51
00:02:14,780 --> 00:02:18,260
months we had the switches and the rider

52
00:02:16,340 --> 00:02:19,849
automated and we went to the low bouncer

53
00:02:18,260 --> 00:02:22,069
but what they think is really

54
00:02:19,849 --> 00:02:23,899
interesting is that I think the real

55
00:02:22,069 --> 00:02:26,089
important decision that we made in the

56
00:02:23,900 --> 00:02:26,870
early day was that we invested on what

57
00:02:26,090 --> 00:02:29,510
he called the source of

58
00:02:26,870 --> 00:02:31,879
truce and why it's important here is

59
00:02:29,510 --> 00:02:33,018
that the source of truth is what I call

60
00:02:31,879 --> 00:02:35,179
the property story

61
00:02:33,019 --> 00:02:36,620
so all this presentation is about how we

62
00:02:35,180 --> 00:02:38,870
manage those properties but at the end

63
00:02:36,620 --> 00:02:41,690
we were able to centralize them in the

64
00:02:38,870 --> 00:02:43,909
source of truth and really I think our

65
00:02:41,690 --> 00:02:46,730
strategy was we start with the source of

66
00:02:43,909 --> 00:02:48,920
truth and then we integrate everything

67
00:02:46,730 --> 00:02:50,659
around it we integrate our monitoring

68
00:02:48,920 --> 00:02:53,268
and alluring solutions we integrate our

69
00:02:50,659 --> 00:02:55,280
system to generate the configuration but

70
00:02:53,269 --> 00:02:58,069
at the end your source of truth is

71
00:02:55,280 --> 00:03:00,230
really storage of their ein informations

72
00:02:58,069 --> 00:03:02,238
about your network and it's only as good

73
00:03:00,230 --> 00:03:04,399
as the quality of the data you're having

74
00:03:02,239 --> 00:03:06,109
there so to be able to achieve that at

75
00:03:04,400 --> 00:03:08,299
this scale it was super important to

76
00:03:06,109 --> 00:03:10,670
start building tools that will help us

77
00:03:08,299 --> 00:03:11,659
populate this source of truth that's

78
00:03:10,670 --> 00:03:13,010
really what we're going to talk about

79
00:03:11,659 --> 00:03:15,019
today I'm going to explain what we've

80
00:03:13,010 --> 00:03:18,500
been doing for nine months and what has

81
00:03:15,019 --> 00:03:19,819
been really successful for us now I've

82
00:03:18,500 --> 00:03:21,019
been surprised a lot of people came to

83
00:03:19,819 --> 00:03:22,940
me and I talked about it's like how come

84
00:03:21,019 --> 00:03:24,859
I never heard this story about the

85
00:03:22,940 --> 00:03:26,510
source of truth before there are so many

86
00:03:24,859 --> 00:03:28,609
people talking about automation they

87
00:03:26,510 --> 00:03:30,500
don't talk about that and I have to say

88
00:03:28,609 --> 00:03:32,569
I used to be this guy I used to be this

89
00:03:30,500 --> 00:03:34,700
guy working for a vendor that will never

90
00:03:32,569 --> 00:03:37,608
mention the source of truth because the

91
00:03:34,700 --> 00:03:39,230
state of our industry is that there is

92
00:03:37,609 --> 00:03:41,150
no standard for a source of truth there

93
00:03:39,230 --> 00:03:43,280
is no really product you can tag it's

94
00:03:41,150 --> 00:03:47,000
all built in-house so it mean that

95
00:03:43,280 --> 00:03:48,680
there's a lot of external solution it's

96
00:03:47,000 --> 00:03:50,660
really hard for them to build a story on

97
00:03:48,680 --> 00:03:52,160
that we explain because they don't have

98
00:03:50,660 --> 00:03:54,829
something clear to explain or give to

99
00:03:52,160 --> 00:03:58,129
you but from my point of view it still

100
00:03:54,829 --> 00:04:00,980
the most important part don't don't lose

101
00:03:58,129 --> 00:04:02,540
this part just a little bit of

102
00:04:00,980 --> 00:04:04,340
information about our diamond stack I

103
00:04:02,540 --> 00:04:06,560
found that people really has questions

104
00:04:04,340 --> 00:04:09,530
about that in terms of source of truth

105
00:04:06,560 --> 00:04:11,989
we build something around an open

106
00:04:09,530 --> 00:04:13,459
software thing called net box and gets

107
00:04:11,989 --> 00:04:15,980
or whatever we couldn't put in that box

108
00:04:13,459 --> 00:04:19,280
back to your throwing that in gates for

109
00:04:15,980 --> 00:04:21,500
configuration generation deployment we

110
00:04:19,279 --> 00:04:23,419
are using ansible because it's really

111
00:04:21,500 --> 00:04:26,240
good at integrating with the external

112
00:04:23,419 --> 00:04:29,120
source of informations and managing all

113
00:04:26,240 --> 00:04:31,070
those data and on the monitoring side

114
00:04:29,120 --> 00:04:31,960
well we started with observing um and

115
00:04:31,070 --> 00:04:34,250
SNMP

116
00:04:31,960 --> 00:04:36,349
because we want more integrations or

117
00:04:34,250 --> 00:04:39,200
source out of truth we are really moving

118
00:04:36,349 --> 00:04:40,128
to a more of a modern stack based on in

119
00:04:39,200 --> 00:04:42,649
Flex Debian

120
00:04:40,129 --> 00:04:47,449
fana and we have some custom collector

121
00:04:42,649 --> 00:04:49,909
in the process so let's look at what are

122
00:04:47,449 --> 00:04:52,550
those network device properties what do

123
00:04:49,909 --> 00:04:54,860
I think when I talk about them so for me

124
00:04:52,550 --> 00:04:56,929
it's everything that really is unique to

125
00:04:54,860 --> 00:04:59,449
a device and I will come from the name

126
00:04:56,929 --> 00:05:02,419
all the IP addresses but also the

127
00:04:59,449 --> 00:05:05,119
cabling all the services BG position

128
00:05:02,419 --> 00:05:07,639
anything that is really specific to a

129
00:05:05,119 --> 00:05:10,129
device and if you think about it I think

130
00:05:07,639 --> 00:05:12,619
our industry has done a lot of job and a

131
00:05:10,129 --> 00:05:15,229
lot of progress in terms of automating

132
00:05:12,619 --> 00:05:17,119
the configuration templating so we are

133
00:05:15,229 --> 00:05:19,099
able now we have a few number of

134
00:05:17,119 --> 00:05:21,559
templates that we use in our networks

135
00:05:19,099 --> 00:05:23,990
one peer role but we really just push

136
00:05:21,559 --> 00:05:26,389
the problem somewhere else because we

137
00:05:23,990 --> 00:05:29,179
still have to manage a set of unique

138
00:05:26,389 --> 00:05:31,669
device properties for each and every

139
00:05:29,179 --> 00:05:33,739
device we still have to manage all of

140
00:05:31,669 --> 00:05:36,318
that and when you think about it those

141
00:05:33,740 --> 00:05:39,110
network device property there are direct

142
00:05:36,319 --> 00:05:42,349
reflections of your network design of

143
00:05:39,110 --> 00:05:44,839
the cabling information of the naming

144
00:05:42,349 --> 00:05:46,639
conventions and and one thing I didn't

145
00:05:44,839 --> 00:05:48,439
realize is how important the naming

146
00:05:46,639 --> 00:05:50,679
convention where and how much time we

147
00:05:48,439 --> 00:05:52,729
could spend talking about that but

148
00:05:50,679 --> 00:05:53,989
what's really important is that you

149
00:05:52,729 --> 00:05:57,199
cannot mess with that you have to

150
00:05:53,990 --> 00:05:58,819
respect that and and all of those will

151
00:05:57,199 --> 00:06:01,099
change all the times you have to manage

152
00:05:58,819 --> 00:06:03,949
the layout of the data center it is

153
00:06:01,099 --> 00:06:07,419
really super important what I realized

154
00:06:03,949 --> 00:06:10,759
when I drawn is that we often

155
00:06:07,419 --> 00:06:12,909
oversimplify this complexity of that and

156
00:06:10,759 --> 00:06:14,929
how things are changing all the time and

157
00:06:12,909 --> 00:06:16,879
honestly if I take all the

158
00:06:14,929 --> 00:06:18,739
simplification I was doing when I was

159
00:06:16,879 --> 00:06:20,689
doing demos I realized that it's just

160
00:06:18,740 --> 00:06:22,819
not applicable to production and and

161
00:06:20,689 --> 00:06:24,259
I've seen people just failing at

162
00:06:22,819 --> 00:06:26,449
automating the network because it just

163
00:06:24,259 --> 00:06:29,509
assume it's going to be homogeneous and

164
00:06:26,449 --> 00:06:31,999
simple let's take this example like if I

165
00:06:29,509 --> 00:06:33,649
have two IP fabric a year ago are

166
00:06:31,999 --> 00:06:36,259
probably at all like exactly the same

167
00:06:33,649 --> 00:06:39,529
just put an ID they're the same sorry to

168
00:06:36,259 --> 00:06:41,449
rags but if you look at them if I deploy

169
00:06:39,529 --> 00:06:42,919
them on two different sites I might

170
00:06:41,449 --> 00:06:44,329
actually have to deal I will have to

171
00:06:42,919 --> 00:06:46,818
this world the physical layout of my

172
00:06:44,329 --> 00:06:49,879
data center and also what I learn is

173
00:06:46,819 --> 00:06:52,729
that for me today it is as important to

174
00:06:49,879 --> 00:06:53,930
automate the management network than it

175
00:06:52,729 --> 00:06:56,000
is to make the production it

176
00:06:53,930 --> 00:06:58,520
in the consolidator because I won't

177
00:06:56,000 --> 00:07:00,770
bring a device or rack to service until

178
00:06:58,520 --> 00:07:02,780
all of those aspects are done and for

179
00:07:00,770 --> 00:07:05,479
example the console servers there are

180
00:07:02,780 --> 00:07:08,630
very much you know based on copper are

181
00:07:05,479 --> 00:07:10,310
very dependent on how many the roles you

182
00:07:08,630 --> 00:07:13,130
have and where your console servers are

183
00:07:10,310 --> 00:07:15,500
so if you're not set too many those kind

184
00:07:13,130 --> 00:07:18,770
of differences you will really get in in

185
00:07:15,500 --> 00:07:20,240
trouble and when iPhone is every time

186
00:07:18,770 --> 00:07:22,698
you put something and you try to really

187
00:07:20,240 --> 00:07:24,229
like define and put the standards

188
00:07:22,699 --> 00:07:25,940
somebody comes and bring you in your

189
00:07:24,229 --> 00:07:28,310
requirement so you have to adapt and

190
00:07:25,940 --> 00:07:30,289
then a vendor put your device in an

191
00:07:28,310 --> 00:07:31,970
offline thing you have to create a new

192
00:07:30,289 --> 00:07:33,650
evolutions of that and manage a new

193
00:07:31,970 --> 00:07:35,270
evolution and every time you think

194
00:07:33,650 --> 00:07:38,179
you're done every time something happen

195
00:07:35,270 --> 00:07:41,080
and every time you have to manage for

196
00:07:38,180 --> 00:07:43,699
that so really my my message here is

197
00:07:41,080 --> 00:07:45,859
you'd rather have you really need to

198
00:07:43,699 --> 00:07:48,800
prepare to have many many many versions

199
00:07:45,860 --> 00:07:51,259
of your device property and what I found

200
00:07:48,800 --> 00:07:53,720
is that for every rule there is an

201
00:07:51,259 --> 00:07:54,949
exception so what you do is you follow

202
00:07:53,720 --> 00:07:57,080
the rule except when you follow the

203
00:07:54,949 --> 00:07:58,849
exception which what you just did is

204
00:07:57,080 --> 00:08:01,909
just just create a new rule that is

205
00:07:58,849 --> 00:08:03,889
based on this exception and there's some

206
00:08:01,909 --> 00:08:07,190
reason business reasons you will never

207
00:08:03,889 --> 00:08:09,050
be able to push back on so again you

208
00:08:07,190 --> 00:08:12,919
should be prepared to have many versions

209
00:08:09,050 --> 00:08:15,169
of your of your properties just to give

210
00:08:12,919 --> 00:08:17,539
you some numbers what we had to deal

211
00:08:15,169 --> 00:08:19,280
with this year robots we probably want a

212
00:08:17,539 --> 00:08:21,260
little faster than most because we

213
00:08:19,280 --> 00:08:24,198
really had very aggressive goals but in

214
00:08:21,260 --> 00:08:26,419
12 months we had to manage 42 different

215
00:08:24,199 --> 00:08:29,240
revisions of our design and device

216
00:08:26,419 --> 00:08:31,039
properties one of our device management

217
00:08:29,240 --> 00:08:33,770
which we had to my name nine different

218
00:08:31,039 --> 00:08:35,510
version because we wanted to reuse a lot

219
00:08:33,770 --> 00:08:37,309
of hardware we had to manage three

220
00:08:35,510 --> 00:08:39,289
different set of hardware different

221
00:08:37,309 --> 00:08:40,728
architectures so just one roll we

222
00:08:39,289 --> 00:08:43,360
actually went up to to nine different

223
00:08:40,729 --> 00:08:45,829
version just drink some numbers here so

224
00:08:43,360 --> 00:08:47,570
people often ask about it how many

225
00:08:45,829 --> 00:08:49,550
device we deploy and all of that but

226
00:08:47,570 --> 00:08:49,940
really this this talk is not about scale

227
00:08:49,550 --> 00:08:52,219
I

228
00:08:49,940 --> 00:08:53,690
I personally believe a beyond like ten

229
00:08:52,220 --> 00:08:57,470
devices I will not want to manage

230
00:08:53,690 --> 00:08:58,790
anything manually so some of you might

231
00:08:57,470 --> 00:09:02,360
found that big some of you might found

232
00:08:58,790 --> 00:09:05,020
that small it's really more applying so

233
00:09:02,360 --> 00:09:07,640
how are the industries organization

234
00:09:05,020 --> 00:09:07,850
managing the network device property to

235
00:09:07,640 --> 00:09:09,920
the

236
00:09:07,850 --> 00:09:12,320
in the first aspect is how do we

237
00:09:09,920 --> 00:09:14,390
generate them personally I've seen two

238
00:09:12,320 --> 00:09:16,550
situation people are doing that by hand

239
00:09:14,390 --> 00:09:18,080
and I'm just going to assume that we all

240
00:09:16,550 --> 00:09:20,780
agree that we should never do that

241
00:09:18,080 --> 00:09:22,820
beyond ten devices and so the other

242
00:09:20,780 --> 00:09:24,910
scroll is people are using script and

243
00:09:22,820 --> 00:09:28,220
code so let's let's focus on this one

244
00:09:24,910 --> 00:09:31,430
script and code you can get a lot done

245
00:09:28,220 --> 00:09:33,770
very fast you can have a very large

246
00:09:31,430 --> 00:09:35,329
number of device property technically it

247
00:09:33,770 --> 00:09:37,640
is very flexible because you have all

248
00:09:35,330 --> 00:09:40,070
the flexibility of the code but what I

249
00:09:37,640 --> 00:09:42,140
found is that it's really hard to

250
00:09:40,070 --> 00:09:44,720
maintain when you start having multiple

251
00:09:42,140 --> 00:09:47,060
variations if you sneeze to have nuances

252
00:09:44,720 --> 00:09:50,120
and high you manage things that start

253
00:09:47,060 --> 00:09:52,520
becoming really hard also the issue is

254
00:09:50,120 --> 00:09:54,890
code is that you need to have software

255
00:09:52,520 --> 00:09:56,840
skill and in more complicated these

256
00:09:54,890 --> 00:09:59,510
piece of software is more complicated is

257
00:09:56,840 --> 00:10:01,430
to interact meaning every time a network

258
00:09:59,510 --> 00:10:03,800
engineers want to make changes you will

259
00:10:01,430 --> 00:10:05,900
have to depend on somebody else and then

260
00:10:03,800 --> 00:10:08,150
you just get into and slow down the

261
00:10:05,900 --> 00:10:11,300
innovation process to adapt your network

262
00:10:08,150 --> 00:10:13,069
infrastructure and again as you have

263
00:10:11,300 --> 00:10:16,670
more versions and more versions becomes

264
00:10:13,070 --> 00:10:19,040
really really hard to maintain how are

265
00:10:16,670 --> 00:10:19,490
we storing those property so I gave you

266
00:10:19,040 --> 00:10:21,770
a hint

267
00:10:19,490 --> 00:10:23,990
one approach our approach to use a

268
00:10:21,770 --> 00:10:26,840
central source of truth either based on

269
00:10:23,990 --> 00:10:29,810
the data base and get all of the above

270
00:10:26,840 --> 00:10:31,520
and the other approach is a lot of

271
00:10:29,810 --> 00:10:33,050
people they don't have a source of truth

272
00:10:31,520 --> 00:10:35,120
they considered the network to be the

273
00:10:33,050 --> 00:10:38,060
source of truth I personally don't

274
00:10:35,120 --> 00:10:39,590
really think it is an approach that

275
00:10:38,060 --> 00:10:43,810
works very well with automation but

276
00:10:39,590 --> 00:10:47,840
that's that's the states of our industry

277
00:10:43,810 --> 00:10:50,119
so what can we do differently and what

278
00:10:47,840 --> 00:10:52,220
do I mean by infrastructure is code and

279
00:10:50,120 --> 00:10:54,440
ask code sure a lot of you are like Oh

280
00:10:52,220 --> 00:10:56,540
still a guy that's gonna tell us too we

281
00:10:54,440 --> 00:10:58,280
need to write code and you know so it's

282
00:10:56,540 --> 00:11:00,050
not about that for me what

283
00:10:58,280 --> 00:11:02,780
infrastructure could mean is we have a

284
00:11:00,050 --> 00:11:06,079
system that is in them pretend there is

285
00:11:02,780 --> 00:11:07,880
a version control friendly and that is

286
00:11:06,080 --> 00:11:09,470
really self so what I mean is like Hindi

287
00:11:07,880 --> 00:11:11,300
important you mean we'll have an input

288
00:11:09,470 --> 00:11:13,490
file and my system will be smart enough

289
00:11:11,300 --> 00:11:16,069
to understand all the step that needs to

290
00:11:13,490 --> 00:11:19,240
happen to deploy those changes and it

291
00:11:16,070 --> 00:11:21,160
will just not execute like

292
00:11:19,240 --> 00:11:22,630
action one by one without really

293
00:11:21,160 --> 00:11:23,949
thinking about it so it has certain

294
00:11:22,630 --> 00:11:26,050
understanding of what you're trying to

295
00:11:23,950 --> 00:11:27,580
do the system needs to be version

296
00:11:26,050 --> 00:11:29,079
control friendly meaning is going to

297
00:11:27,580 --> 00:11:31,570
have to work with some configuration

298
00:11:29,080 --> 00:11:33,340
files put that in some git repo being

299
00:11:31,570 --> 00:11:36,340
able to make that a part of our review

300
00:11:33,340 --> 00:11:38,680
process Trust ability having multiple

301
00:11:36,340 --> 00:11:41,560
versions configuration just make it

302
00:11:38,680 --> 00:11:43,390
really index file easy and safe and

303
00:11:41,560 --> 00:11:44,800
predictable what I really appreciate

304
00:11:43,390 --> 00:11:47,770
through the automation tools then when I

305
00:11:44,800 --> 00:11:51,160
can see what is going to happen before

306
00:11:47,770 --> 00:11:53,050
it happened when I can start running in

307
00:11:51,160 --> 00:11:54,579
check modes and I have an idea of what

308
00:11:53,050 --> 00:11:56,050
the tool is gonna do and not just be

309
00:11:54,580 --> 00:11:58,440
scared of what's gonna happen when I

310
00:11:56,050 --> 00:12:01,180
press Enter

311
00:11:58,440 --> 00:12:02,650
so let me try to give you an else I'll

312
00:12:01,180 --> 00:12:04,449
start to go quickly on that but a

313
00:12:02,650 --> 00:12:07,510
high-level overview of what I'm talking

314
00:12:04,450 --> 00:12:08,920
about here to be able to achieve that we

315
00:12:07,510 --> 00:12:11,050
need to have a source of truth a user

316
00:12:08,920 --> 00:12:12,819
and first we need to be able to have a

317
00:12:11,050 --> 00:12:15,400
configuration found something that

318
00:12:12,820 --> 00:12:17,020
define what we want to do if I was

319
00:12:15,400 --> 00:12:20,770
marketing guys or probably call that my

320
00:12:17,020 --> 00:12:22,360
intent but and and we need a tool in the

321
00:12:20,770 --> 00:12:24,790
middle that we call here the network

322
00:12:22,360 --> 00:12:26,710
builder that we'll be able to understand

323
00:12:24,790 --> 00:12:28,360
and we'll read this configuration file

324
00:12:26,710 --> 00:12:30,370
and interact with your source of truth

325
00:12:28,360 --> 00:12:32,830
then I'm reading and making them

326
00:12:30,370 --> 00:12:34,810
unification to be able to push all those

327
00:12:32,830 --> 00:12:37,600
information very high level so let's

328
00:12:34,810 --> 00:12:39,670
start to go down if we want to have

329
00:12:37,600 --> 00:12:42,460
those safe mode we want to be able to

330
00:12:39,670 --> 00:12:44,500
run in what I call plan where the system

331
00:12:42,460 --> 00:12:46,510
is not making any changes you just take

332
00:12:44,500 --> 00:12:49,480
my configuration files render it and

333
00:12:46,510 --> 00:12:52,120
show me exactly how it looks like if I

334
00:12:49,480 --> 00:12:53,770
were to actually execute that and then

335
00:12:52,120 --> 00:12:58,210
of course the mode where I will actually

336
00:12:53,770 --> 00:12:59,829
make the changes and if you do that I

337
00:12:58,210 --> 00:13:00,790
believe you will be able to have really

338
00:12:59,830 --> 00:13:02,730
something that follow those

339
00:13:00,790 --> 00:13:04,870
infrastructure our scope principle

340
00:13:02,730 --> 00:13:09,370
independent version control friendly

341
00:13:04,870 --> 00:13:10,690
self and predictable so now the big

342
00:13:09,370 --> 00:13:13,950
question is how do we actually define

343
00:13:10,690 --> 00:13:16,690
this configuration files and the way I

344
00:13:13,950 --> 00:13:18,400
understood it when I John is really

345
00:13:16,690 --> 00:13:20,680
people are thinking about it in terms of

346
00:13:18,400 --> 00:13:23,770
when I build a rack switch for example I

347
00:13:20,680 --> 00:13:25,120
want to assign a slash pony for for the

348
00:13:23,770 --> 00:13:27,760
interfaces fixed in the server

349
00:13:25,120 --> 00:13:29,950
coming from this pool of ideas that has

350
00:13:27,760 --> 00:13:32,649
been reserved for these sites and I want

351
00:13:29,950 --> 00:13:34,269
a slash sorry to for the loop back that

352
00:13:32,649 --> 00:13:36,160
in reserved for another pool like that's

353
00:13:34,269 --> 00:13:38,230
the kind of high level you want to sink

354
00:13:36,160 --> 00:13:40,540
off you don't really care which type is

355
00:13:38,230 --> 00:13:41,829
assigned to which device but you want to

356
00:13:40,540 --> 00:13:43,569
make sure that they are sent from the

357
00:13:41,829 --> 00:13:45,699
right pool the right type of resources

358
00:13:43,569 --> 00:13:50,319
that match all the requirement that you

359
00:13:45,699 --> 00:13:52,599
define so how can we do that so if you

360
00:13:50,319 --> 00:13:54,699
look back at the network builder we have

361
00:13:52,600 --> 00:13:56,769
this module that is doing this in the

362
00:13:54,699 --> 00:13:58,599
impotency creating talking with the

363
00:13:56,769 --> 00:14:01,540
source of truth we won't really go into

364
00:13:58,600 --> 00:14:03,129
in details about this one today but what

365
00:14:01,540 --> 00:14:05,949
I want to talk about is this is what I

366
00:14:03,129 --> 00:14:08,920
call the resource manager and the idea

367
00:14:05,949 --> 00:14:12,099
is what if you could manage all your

368
00:14:08,920 --> 00:14:15,040
resources as simply as you manage IP

369
00:14:12,100 --> 00:14:16,929
with DHCP iPhone DHCP protocol very

370
00:14:15,040 --> 00:14:19,449
interesting because it's the pure

371
00:14:16,929 --> 00:14:22,329
definition of Indian potent a server

372
00:14:19,449 --> 00:14:24,189
doesn't have any state server is always

373
00:14:22,329 --> 00:14:26,378
asking the same question give me an IP

374
00:14:24,189 --> 00:14:28,240
give me an IP and you never have to

375
00:14:26,379 --> 00:14:29,889
think where it is where it's doing like

376
00:14:28,240 --> 00:14:32,050
the infrastructure is providing that for

377
00:14:29,889 --> 00:14:34,059
it and it doesn't have to think do I

378
00:14:32,050 --> 00:14:35,740
already have an IP reserved this the

379
00:14:34,059 --> 00:14:38,860
query is always the same can I have an

380
00:14:35,740 --> 00:14:40,809
IP and all the interest the complexities

381
00:14:38,860 --> 00:14:42,370
happening on the server side the server

382
00:14:40,809 --> 00:14:44,649
will manage the pool of IPs that have

383
00:14:42,370 --> 00:14:46,300
been reserved the system and how the

384
00:14:44,649 --> 00:14:48,149
query reach the server's will define

385
00:14:46,300 --> 00:14:51,429
what type of IP we need to provide and

386
00:14:48,149 --> 00:14:53,740
and if the IP is already reserved then

387
00:14:51,429 --> 00:14:55,839
we always give back the same IP but if

388
00:14:53,740 --> 00:14:58,149
no FP are reserved on the table then we

389
00:14:55,839 --> 00:15:00,459
allocate a new IP what if you could do

390
00:14:58,149 --> 00:15:02,649
that for everything the idea is that

391
00:15:00,459 --> 00:15:05,109
what if we could create pools of

392
00:15:02,649 --> 00:15:07,420
resources pools of ASN pulls off

393
00:15:05,110 --> 00:15:10,449
prefixes and loopback for specific site

394
00:15:07,420 --> 00:15:13,620
and build the systems where you will be

395
00:15:10,449 --> 00:15:17,920
able to say hey resource manager give me

396
00:15:13,620 --> 00:15:20,559
an i ascend from a device called device

397
00:15:17,920 --> 00:15:22,839
one in SFO and the system or give me a

398
00:15:20,559 --> 00:15:25,449
loopback and the query the resource

399
00:15:22,839 --> 00:15:28,569
manager will have this intelligence to

400
00:15:25,449 --> 00:15:31,029
be able to say oh no IP where sign

401
00:15:28,569 --> 00:15:33,670
before so here here's one IP in the next

402
00:15:31,029 --> 00:15:34,899
time you ask you will know that an IP

403
00:15:33,670 --> 00:15:37,689
was already assigned it will always

404
00:15:34,899 --> 00:15:41,589
return the same one but I really give

405
00:15:37,689 --> 00:15:43,870
you this Indian patent approach and what

406
00:15:41,589 --> 00:15:46,600
we did is we created this kind of

407
00:15:43,870 --> 00:15:48,879
variable systems that lets you define

408
00:15:46,600 --> 00:15:51,759
what you want like to express this query

409
00:15:48,879 --> 00:15:54,490
I want to loop back and what you define

410
00:15:51,759 --> 00:15:56,379
is really what you want and which from

411
00:15:54,490 --> 00:15:58,089
which pulls you want it and you say I

412
00:15:56,379 --> 00:16:00,999
want to look back I'm on an IP here on

413
00:15:58,089 --> 00:16:03,759
an interface I'm on a VLAN ID and I want

414
00:16:00,999 --> 00:16:05,439
it from a specific pole and then the

415
00:16:03,759 --> 00:16:08,230
information of with making the request

416
00:16:05,439 --> 00:16:11,259
the identifier is really passed at at

417
00:16:08,230 --> 00:16:12,639
runtime and the way it looks now if we

418
00:16:11,259 --> 00:16:14,079
put that together for example its

419
00:16:12,639 --> 00:16:16,480
variable to build those configurations

420
00:16:14,079 --> 00:16:18,459
files where we're able to using those

421
00:16:16,480 --> 00:16:21,490
variables to express in a very generic

422
00:16:18,459 --> 00:16:23,919
way but really very close to the way we

423
00:16:21,490 --> 00:16:26,410
think on what we need to allocate for a

424
00:16:23,919 --> 00:16:28,569
specific device I want an ASN from a

425
00:16:26,410 --> 00:16:30,219
specific pool I want to slash 31 I want

426
00:16:28,569 --> 00:16:32,679
multiple of them I want to do back and

427
00:16:30,220 --> 00:16:35,259
the IDS that has you pass that through

428
00:16:32,679 --> 00:16:37,449
the resource manager you will get all

429
00:16:35,259 --> 00:16:40,419
your information resolved and then you

430
00:16:37,449 --> 00:16:42,399
can pass that to the next block you will

431
00:16:40,419 --> 00:16:43,209
make sure that all the changes are

432
00:16:42,399 --> 00:16:45,490
properly

433
00:16:43,209 --> 00:16:47,768
propagating so now when you're here

434
00:16:45,490 --> 00:16:49,089
we're doing one device but we're very

435
00:16:47,769 --> 00:16:52,240
close to actually turn that into a

436
00:16:49,089 --> 00:16:54,790
template like I really have to pass a

437
00:16:52,240 --> 00:16:56,470
specific ID or some more information and

438
00:16:54,790 --> 00:16:59,949
I can start seeing that as a template

439
00:16:56,470 --> 00:17:02,889
and this exact template I will be able

440
00:16:59,949 --> 00:17:05,559
to use that across multiple rack so now

441
00:17:02,889 --> 00:17:08,199
I have one template the same definition

442
00:17:05,559 --> 00:17:10,539
the same architectures and those rags I

443
00:17:08,199 --> 00:17:12,189
can propagate they're everywhere and if

444
00:17:10,539 --> 00:17:13,658
one of my racks or multiple of my

445
00:17:12,189 --> 00:17:15,639
arrives have a different template it's

446
00:17:13,659 --> 00:17:17,380
super easy to create multiple of them

447
00:17:15,638 --> 00:17:19,898
with different variations and keep track

448
00:17:17,380 --> 00:17:22,750
of that and understand which design go

449
00:17:19,898 --> 00:17:25,708
and we track and if things change I can

450
00:17:22,750 --> 00:17:30,039
create new revision of that and so on

451
00:17:25,709 --> 00:17:32,710
now often the design is really based on

452
00:17:30,039 --> 00:17:34,779
the location of the device you need to

453
00:17:32,710 --> 00:17:36,429
understand which console servers you

454
00:17:34,779 --> 00:17:38,710
need to connect to which cluster which

455
00:17:36,429 --> 00:17:41,289
part you're part of what part of a

456
00:17:38,710 --> 00:17:43,299
network you're part of so really we

457
00:17:41,289 --> 00:17:45,669
needed to provide more informations on

458
00:17:43,299 --> 00:17:48,309
the way we were defining that so what we

459
00:17:45,669 --> 00:17:50,409
did is we try to build what we call the

460
00:17:48,309 --> 00:17:52,360
context resolutions now I actually try

461
00:17:50,409 --> 00:17:53,649
to think of it as the facts of the rack

462
00:17:52,360 --> 00:17:56,168
I don't know if you're doing automation

463
00:17:53,649 --> 00:17:58,540
usually that that speaks but the idea is

464
00:17:56,169 --> 00:17:59,800
that we have a systems where at

465
00:17:58,540 --> 00:18:01,870
we actually collect a lot of

466
00:17:59,800 --> 00:18:03,510
informations about the specific location

467
00:18:01,870 --> 00:18:06,489
of the device we're trying to generate

468
00:18:03,510 --> 00:18:08,370
resources from where is it which parts

469
00:18:06,490 --> 00:18:11,830
and we provide all those information as

470
00:18:08,370 --> 00:18:14,050
variable and we are leveraging like on

471
00:18:11,830 --> 00:18:17,050
top of whatever I showed you we're

472
00:18:14,050 --> 00:18:19,270
injecting those variables using Jinja

473
00:18:17,050 --> 00:18:22,419
and let us really make all of those

474
00:18:19,270 --> 00:18:24,460
templates now really location

475
00:18:22,420 --> 00:18:26,650
independent and so this template that

476
00:18:24,460 --> 00:18:29,650
previously was good for one side or one

477
00:18:26,650 --> 00:18:31,990
part no I can reuse that on any of my

478
00:18:29,650 --> 00:18:38,620
site as long as they are using exactly

479
00:18:31,990 --> 00:18:40,000
the same design so if we summarize for

480
00:18:38,620 --> 00:18:43,750
us the network builders there's really

481
00:18:40,000 --> 00:18:45,850
three components we have we need to

482
00:18:43,750 --> 00:18:47,260
resolve the context and there's the

483
00:18:45,850 --> 00:18:49,540
resource manager and then there's

484
00:18:47,260 --> 00:18:53,230
component that is really managing the

485
00:18:49,540 --> 00:18:56,860
modification of and the the interaction

486
00:18:53,230 --> 00:18:58,780
was the with the source of truth so

487
00:18:56,860 --> 00:19:01,209
what's next step for us the first is

488
00:18:58,780 --> 00:19:02,620
we'd love to get feedback we haven't

489
00:19:01,210 --> 00:19:05,200
seen many people taking this approach

490
00:19:02,620 --> 00:19:07,719
it's been very successful for us but I'm

491
00:19:05,200 --> 00:19:10,480
sure we can do better so whatever you

492
00:19:07,720 --> 00:19:13,600
like it or don't like it I'd love to

493
00:19:10,480 --> 00:19:15,730
hear your feedback and would love to

494
00:19:13,600 --> 00:19:18,040
bring some of those component is by

495
00:19:15,730 --> 00:19:21,910
piece into more open source and sure

496
00:19:18,040 --> 00:19:24,310
that and collaborate so we started that

497
00:19:21,910 --> 00:19:26,530
but again if you're interested to take a

498
00:19:24,310 --> 00:19:28,659
look participate collaborate reach out

499
00:19:26,530 --> 00:19:30,860
to me thanks all for time and if you

500
00:19:28,660 --> 00:19:37,779
have question

501
00:19:30,860 --> 00:19:40,219
[Applause]

502
00:19:37,779 --> 00:19:42,289
Android dance with OneNote great

503
00:19:40,220 --> 00:19:44,389
presentation can you talk a little bit

504
00:19:42,289 --> 00:19:47,059
more about that resource manager is it

505
00:19:44,389 --> 00:19:48,408
something of an abstraction is it excuse

506
00:19:47,059 --> 00:19:50,779
me is it is it a server and then also

507
00:19:48,409 --> 00:19:52,970
query so that resource manager you kind

508
00:19:50,779 --> 00:19:56,659
of compared it to DHCP is it is it a

509
00:19:52,970 --> 00:19:58,610
custom protocol it's just an API call so

510
00:19:56,659 --> 00:20:01,220
for us today we managed it as a Python

511
00:19:58,610 --> 00:20:03,289
library we purposefully run it outside

512
00:20:01,220 --> 00:20:05,450
of the source of truths because the idea

513
00:20:03,289 --> 00:20:06,408
is that when you're in plan mode or when

514
00:20:05,450 --> 00:20:07,760
you need something you actually don't

515
00:20:06,409 --> 00:20:09,320
want to propagate your changes so

516
00:20:07,760 --> 00:20:11,720
there's these parts where everything run

517
00:20:09,320 --> 00:20:13,970
in memory so it's the Python script that

518
00:20:11,720 --> 00:20:16,059
will interact on one way with the source

519
00:20:13,970 --> 00:20:19,130
of truth and the other one was the

520
00:20:16,059 --> 00:20:20,750
Surfaris automation I it's very much

521
00:20:19,130 --> 00:20:22,970
inspired from something like terraform

522
00:20:20,750 --> 00:20:24,350
where you have a tool that will you know

523
00:20:22,970 --> 00:20:26,049
give you some idea what's gonna happen

524
00:20:24,350 --> 00:20:31,279
before it happened

525
00:20:26,049 --> 00:20:34,760
thank you all right Louis Bolanos with

526
00:20:31,279 --> 00:20:37,809
box I have two questions so can you talk

527
00:20:34,760 --> 00:20:40,279
about a little bit on your approach for

528
00:20:37,809 --> 00:20:42,470
defining inventory for the initial data

529
00:20:40,279 --> 00:20:47,330
seeing Presutti and then how do you keep

530
00:20:42,470 --> 00:20:49,519
that data valid so we use the Builder to

531
00:20:47,330 --> 00:20:51,529
input our devices so the workflow we

532
00:20:49,519 --> 00:20:54,260
agreed is that even before the device

533
00:20:51,529 --> 00:20:57,559
gets racked we actually populate

534
00:20:54,260 --> 00:20:59,929
everything using the network builder so

535
00:20:57,559 --> 00:21:02,690
that's how we do that now we haven't

536
00:20:59,929 --> 00:21:03,950
really went that far but the idea is

537
00:21:02,690 --> 00:21:06,649
that we would like to start using the

538
00:21:03,950 --> 00:21:08,929
Builder in plan mode on a daily basis

539
00:21:06,649 --> 00:21:11,928
and since in plan mony will tell us why

540
00:21:08,929 --> 00:21:13,519
change the expectation is whatever part

541
00:21:11,929 --> 00:21:15,110
of the network priority provision are

542
00:21:13,519 --> 00:21:16,760
defining the source of truth it should

543
00:21:15,110 --> 00:21:19,158
tell us nothing will change because it's

544
00:21:16,760 --> 00:21:22,820
all final state based like we define

545
00:21:19,159 --> 00:21:25,070
what we want so in our plan is that as

546
00:21:22,820 --> 00:21:27,710
we do that the system will we'll be able

547
00:21:25,070 --> 00:21:29,330
to identify drift into what we define

548
00:21:27,710 --> 00:21:31,460
and keep track in the source control and

549
00:21:29,330 --> 00:21:35,689
what is actually deployed we haven't

550
00:21:31,460 --> 00:21:39,110
gone that far okay thank you yeah Matt

551
00:21:35,690 --> 00:21:40,850
Peterson open fiber in this context did

552
00:21:39,110 --> 00:21:43,399
you guys look at using the net box

553
00:21:40,850 --> 00:21:47,419
configuration context

554
00:21:43,400 --> 00:21:49,460
abilities it sounds very similar so we

555
00:21:47,420 --> 00:21:52,490
haven't look at I mean we're a couple of

556
00:21:49,460 --> 00:21:54,230
versions behind my understanding is the

557
00:21:52,490 --> 00:21:55,070
configuration context as far as I know

558
00:21:54,230 --> 00:21:57,260
and maybe I don't have the whole

559
00:21:55,070 --> 00:21:59,240
information well save those context

560
00:21:57,260 --> 00:22:01,850
information they will not generate them

561
00:21:59,240 --> 00:22:03,440
for them and even though even that's

562
00:22:01,850 --> 00:22:05,389
that will not generate the cabling that

563
00:22:03,440 --> 00:22:07,340
will not generate the IP addresses so I

564
00:22:05,390 --> 00:22:10,970
don't think it's a it's probably

565
00:22:07,340 --> 00:22:12,559
something complimentary but it's I think

566
00:22:10,970 --> 00:22:14,420
it's more it's gonna we could put

567
00:22:12,559 --> 00:22:19,100
something in there that today we're

568
00:22:14,420 --> 00:22:20,690
putting in get but even that we we have

569
00:22:19,100 --> 00:22:22,760
done some analysis and we know that

570
00:22:20,690 --> 00:22:25,610
there's still a lot of things we cannot

571
00:22:22,760 --> 00:22:27,890
put so having this mixed approach it's

572
00:22:25,610 --> 00:22:29,419
been working so far and then a follow-up

573
00:22:27,890 --> 00:22:31,940
question you mentioned that you're

574
00:22:29,420 --> 00:22:34,250
pulling data from that box and then get

575
00:22:31,940 --> 00:22:36,679
and are you merging that as part of your

576
00:22:34,250 --> 00:22:38,840
ginger to template of things that netbox

577
00:22:36,679 --> 00:22:40,250
don't have proper objects for is that

578
00:22:38,840 --> 00:22:43,580
kind of the use case there is it

579
00:22:40,250 --> 00:22:46,340
something else so net box is the source

580
00:22:43,580 --> 00:22:49,070
of truth for cabling IP devices and one

581
00:22:46,340 --> 00:22:50,928
of things so we had actually to extend

582
00:22:49,070 --> 00:22:53,780
that box to create our own set of api's

583
00:22:50,929 --> 00:22:57,950
to really have like be able to get a

584
00:22:53,780 --> 00:23:00,080
consistent type of data that will define

585
00:22:57,950 --> 00:23:01,730
one device and then yes winches that and

586
00:23:00,080 --> 00:23:06,050
that into the change at some point okay

587
00:23:01,730 --> 00:23:08,150
thank you Hey certainly Major League

588
00:23:06,050 --> 00:23:10,850
Baseball so this is all about building

589
00:23:08,150 --> 00:23:12,679
deploy have you tried to marry to stay

590
00:23:10,850 --> 00:23:14,990
yet is that like a future thing so as

591
00:23:12,679 --> 00:23:16,809
far as operators and you know compare

592
00:23:14,990 --> 00:23:21,020
back to the original config

593
00:23:16,809 --> 00:23:23,450
so what we're doing is for us monitoring

594
00:23:21,020 --> 00:23:25,400
in actual state in all that is another

595
00:23:23,450 --> 00:23:26,630
component and everything since that's

596
00:23:25,400 --> 00:23:28,370
why we want to have everything in a

597
00:23:26,630 --> 00:23:31,610
source of truth in a central place where

598
00:23:28,370 --> 00:23:33,590
everybody can looks like with this tool

599
00:23:31,610 --> 00:23:35,149
we generate who pull it populate or

600
00:23:33,590 --> 00:23:36,530
source of truth we have other tools that

601
00:23:35,150 --> 00:23:39,950
extract things and deploy in

602
00:23:36,530 --> 00:23:41,870
configuration and every single personal

603
00:23:39,950 --> 00:23:44,360
monitoring alerting actually refer to

604
00:23:41,870 --> 00:23:47,419
that to understand how is the network

605
00:23:44,360 --> 00:23:49,729
suppose to run at this time and you know

606
00:23:47,420 --> 00:23:51,100
it will automatically understand the

607
00:23:49,730 --> 00:23:53,710
device that are in maintenance

608
00:23:51,100 --> 00:23:55,779
not active housings are connected and

609
00:23:53,710 --> 00:23:59,919
all of that so it's kind of that's why

610
00:23:55,779 --> 00:24:01,690
it's in the in the middle okay thanks hi

611
00:23:59,919 --> 00:24:03,399
beaker from workday do you guys do any

612
00:24:01,690 --> 00:24:05,610
validation in Emily immolated

613
00:24:03,399 --> 00:24:08,350
environment and the OSC ICT pipoint

614
00:24:05,610 --> 00:24:11,459
we're actually working closely with the

615
00:24:08,350 --> 00:24:15,519
team at batfish I'm trying to leverage

616
00:24:11,460 --> 00:24:19,120
bad fish to do that so we're not fully

617
00:24:15,519 --> 00:24:23,559
there yet but working toward us thank

618
00:24:19,120 --> 00:24:24,389
you cool thanks oh thanks for staying

619
00:24:23,559 --> 00:24:29,428
all the way

620
00:24:24,390 --> 00:24:29,429
[Applause]

621
00:24:34,380 --> 00:24:36,440
you

