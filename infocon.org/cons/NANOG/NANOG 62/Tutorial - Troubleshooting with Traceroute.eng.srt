1
00:00:10,860 --> 00:00:20,350
so good<font color="#E5E5E5"> morning everyone who</font><font color="#CCCCCC"> else's as</font>

2
00:00:16,180 --> 00:00:22,420
hungover as<font color="#E5E5E5"> I am so my name is Richard</font>

3
00:00:20,350 --> 00:00:25,150
<font color="#E5E5E5">Steenburgen and I'm doing a tutorial on</font>

4
00:00:22,420 --> 00:00:29,230
a<font color="#E5E5E5"> practical guide</font><font color="#CCCCCC"> to how do correctly</font>

5
00:00:25,150 --> 00:00:31,119
troubleshoot with tracer album so<font color="#E5E5E5"> I</font>

6
00:00:29,230 --> 00:00:33,610
think<font color="#E5E5E5"> most people kind of know what</font>

7
00:00:31,119 --> 00:00:36,600
traceroute is<font color="#E5E5E5"> it's the number one go-to</font>

8
00:00:33,610 --> 00:00:39,340
tool for doing<font color="#E5E5E5"> all kinds of Diagnostics</font>

9
00:00:36,600 --> 00:00:41,590
<font color="#E5E5E5">every OS out there comes with some form</font>

10
00:00:39,340 --> 00:00:42,970
of<font color="#CCCCCC"> tracer out tool there's thousands of</font>

11
00:00:41,590 --> 00:00:44,530
<font color="#CCCCCC">websites out there where you can do</font>

12
00:00:42,970 --> 00:00:46,470
<font color="#CCCCCC">tracer out there's looking-glasses</font>

13
00:00:44,530 --> 00:00:48,250
there's<font color="#E5E5E5"> a visual</font><font color="#CCCCCC"> tracer else there's</font>

14
00:00:46,470 --> 00:00:50,410
things that<font color="#CCCCCC"> will try to</font><font color="#E5E5E5"> make</font><font color="#CCCCCC"> pretty</font>

15
00:00:48,250 --> 00:00:52,960
<font color="#E5E5E5">little maps out of it</font><font color="#CCCCCC"> there's commercial</font>

16
00:00:50,410 --> 00:00:54,489
versions there's free versions it seems

17
00:00:52,960 --> 00:00:56,740
like it<font color="#E5E5E5"> would be</font><font color="#CCCCCC"> a simple tool tool to</font>

18
00:00:54,490 --> 00:00:58,990
use<font color="#E5E5E5"> you put in an IP address</font><font color="#CCCCCC"> and you see</font>

19
00:00:56,740 --> 00:01:03,760
a path<font color="#E5E5E5"> and somehow that helps you with</font>

20
00:00:58,990 --> 00:01:05,019
your<font color="#E5E5E5"> Diagnostics</font><font color="#CCCCCC"> you know you look at</font>

21
00:01:03,760 --> 00:01:06,670
the path and<font color="#E5E5E5"> you see where does the</font>

22
00:01:05,019 --> 00:01:08,290
<font color="#CCCCCC">trace route stop or</font><font color="#E5E5E5"> where is the latency</font>

23
00:01:06,670 --> 00:01:09,579
jumped and<font color="#E5E5E5"> that must be the problem</font>

24
00:01:08,290 --> 00:01:11,260
right<font color="#E5E5E5"> the most people</font><font color="#CCCCCC"> think</font><font color="#E5E5E5"> that that's</font>

25
00:01:09,579 --> 00:01:13,570
<font color="#E5E5E5">how this works and that this will</font>

26
00:01:11,260 --> 00:01:15,580
immediately<font color="#E5E5E5"> help them figure things out</font>

27
00:01:13,570 --> 00:01:19,210
and<font color="#E5E5E5"> the reality is it almost never</font><font color="#CCCCCC"> works</font>

28
00:01:15,580 --> 00:01:21,370
that<font color="#E5E5E5"> way in practice so the question is</font>

29
00:01:19,210 --> 00:01:22,809
what's wrong with<font color="#CCCCCC"> tracer ality well it</font>

30
00:01:21,370 --> 00:01:25,720
turns out most modern networks are

31
00:01:22,810 --> 00:01:28,690
<font color="#E5E5E5">actually run pretty decently well so the</font>

32
00:01:25,720 --> 00:01:30,100
<font color="#E5E5E5">really simple issues like congestion</font>

33
00:01:28,690 --> 00:01:31,690
routing loops the things that you would

34
00:01:30,100 --> 00:01:34,390
<font color="#CCCCCC">think are most obvious you run a</font>

35
00:01:31,690 --> 00:01:37,450
traceroute you see the<font color="#E5E5E5"> the latency go up</font>

36
00:01:34,390 --> 00:01:40,810
and you say that's where it is those

37
00:01:37,450 --> 00:01:42,580
tend not to be real issues<font color="#E5E5E5"> anymore so</font>

38
00:01:40,810 --> 00:01:44,229
what you mostly see<font color="#E5E5E5"> for for the</font>

39
00:01:42,580 --> 00:01:46,390
<font color="#CCCCCC">remaining issues or the things</font><font color="#E5E5E5"> that are</font>

40
00:01:44,229 --> 00:01:48,630
<font color="#E5E5E5">more complex</font><font color="#CCCCCC"> what happens there is</font>

41
00:01:46,390 --> 00:01:53,140
people<font color="#E5E5E5"> who just use a</font><font color="#CCCCCC"> very naive</font>

42
00:01:48,630 --> 00:01:55,990
implementation of<font color="#CCCCCC"> traceroute</font><font color="#E5E5E5"> turns out</font>

43
00:01:53,140 --> 00:02:02,110
mostly to be wrong<font color="#CCCCCC"> so the problem is</font>

44
00:01:55,990 --> 00:02:03,939
<font color="#CCCCCC">very few</font><font color="#E5E5E5"> people out there very few</font>

45
00:02:02,110 --> 00:02:07,299
people out there<font color="#CCCCCC"> are actually terribly</font>

46
00:02:03,939 --> 00:02:09,340
skilled at interpreting<font color="#E5E5E5"> traceroute you</font>

47
00:02:07,299 --> 00:02:11,049
know it looks relatively<font color="#CCCCCC"> straightforward</font>

48
00:02:09,340 --> 00:02:14,019
and it gives the<font color="#CCCCCC"> impression that you</font>

49
00:02:11,049 --> 00:02:16,599
know how to read<font color="#E5E5E5"> it but I have yet to</font>

50
00:02:14,019 --> 00:02:18,640
find any major<font color="#E5E5E5"> ISP knock that is</font>

51
00:02:16,599 --> 00:02:19,660
<font color="#E5E5E5">terribly good and I still to this day</font>

52
00:02:18,640 --> 00:02:21,970
encounter many

53
00:02:19,660 --> 00:02:24,340
engineering departments<font color="#CCCCCC"> many people who</font>

54
00:02:21,970 --> 00:02:27,070
are in<font color="#E5E5E5"> theory very senior engineers who</font>

55
00:02:24,340 --> 00:02:28,540
aren't able to<font color="#E5E5E5"> read it well so the</font>

56
00:02:27,070 --> 00:02:31,120
purpose of this<font color="#CCCCCC"> tutorial is to kind of</font>

57
00:02:28,540 --> 00:02:34,540
go<font color="#CCCCCC"> through some of</font><font color="#E5E5E5"> the realities behind</font>

58
00:02:31,120 --> 00:02:35,860
it how it actually works<font color="#E5E5E5"> how you can</font><font color="#CCCCCC"> how</font>

59
00:02:34,540 --> 00:02:37,929
<font color="#E5E5E5">you can read it better and how you can</font>

60
00:02:35,860 --> 00:02:39,940
troubleshoot networks with it

61
00:02:37,930 --> 00:02:42,190
one of the downsides<font color="#CCCCCC"> to people</font><font color="#E5E5E5"> not being</font>

62
00:02:39,940 --> 00:02:44,859
able<font color="#E5E5E5"> to retrace your out well is most of</font>

63
00:02:42,190 --> 00:02:46,630
the time if you go to a<font color="#CCCCCC"> NOC</font><font color="#E5E5E5"> and you open</font>

64
00:02:44,860 --> 00:02:47,830
a trace<font color="#E5E5E5"> rail ticket</font><font color="#CCCCCC"> most people don't</font>

65
00:02:46,630 --> 00:02:50,829
<font color="#E5E5E5">believe you because there's so many</font>

66
00:02:47,830 --> 00:02:52,740
false positive reports so<font color="#E5E5E5"> any way to</font>

67
00:02:50,830 --> 00:02:56,400
improve that<font color="#E5E5E5"> is better</font>

68
00:02:52,740 --> 00:02:58,840
so here's<font color="#CCCCCC"> traceroute at its most basic</font>

69
00:02:56,400 --> 00:03:00,640
<font color="#CCCCCC">all the implementations vary a little</font>

70
00:02:58,840 --> 00:03:03,310
bit<font color="#E5E5E5"> but it mostly looks something like</font>

71
00:03:00,640 --> 00:03:05,109
this<font color="#CCCCCC"> you have a bunch</font><font color="#E5E5E5"> of lines of output</font>

72
00:03:03,310 --> 00:03:08,010
<font color="#E5E5E5">and on each line you're going to get the</font>

73
00:03:05,110 --> 00:03:10,810
hop number you're going<font color="#CCCCCC"> to get the hop</font>

74
00:03:08,010 --> 00:03:14,829
<font color="#CCCCCC">dns in theory what should be a router</font>

75
00:03:10,810 --> 00:03:16,420
along the way<font color="#E5E5E5"> the IP address really</font><font color="#CCCCCC"> you</font>

76
00:03:14,830 --> 00:03:18,520
get the IP address<font color="#CCCCCC"> and then you do</font>

77
00:03:16,420 --> 00:03:20,019
reverse<font color="#CCCCCC"> dns on that get the get the dns</font>

78
00:03:18,520 --> 00:03:22,060
<font color="#E5E5E5">and you're going to get some type of</font>

79
00:03:20,020 --> 00:03:23,830
latency measurement and typically most

80
00:03:22,060 --> 00:03:26,170
most standard trace routes<font color="#CCCCCC"> are going to</font>

81
00:03:23,830 --> 00:03:26,920
do three independent probes<font color="#E5E5E5"> and they're</font>

82
00:03:26,170 --> 00:03:28,750
<font color="#E5E5E5">going to come</font><font color="#CCCCCC"> back with three</font>

83
00:03:26,920 --> 00:03:32,109
<font color="#E5E5E5">independent results so you see here's an</font>

84
00:03:28,750 --> 00:03:34,450
example where hop<font color="#E5E5E5"> one this IP resolves</font>

85
00:03:32,110 --> 00:03:37,660
to<font color="#CCCCCC"> this</font><font color="#E5E5E5"> DNS and here's three independent</font>

86
00:03:34,450 --> 00:03:40,660
probes<font color="#E5E5E5"> but what are you really</font><font color="#CCCCCC"> getting</font>

87
00:03:37,660 --> 00:03:41,950
<font color="#E5E5E5">when you do that so let's look at trace</font>

88
00:03:40,660 --> 00:03:44,560
<font color="#E5E5E5">route how it actually works at the</font>

89
00:03:41,950 --> 00:03:46,780
packet<font color="#CCCCCC"> level</font><font color="#E5E5E5"> so the very first</font><font color="#CCCCCC"> step when</font>

90
00:03:44,560 --> 00:03:48,640
you're<font color="#E5E5E5"> doing a trace route is to launch</font>

91
00:03:46,780 --> 00:03:51,910
a packet towards the<font color="#CCCCCC"> destination with a</font>

92
00:03:48,640 --> 00:03:54,220
TTL value<font color="#CCCCCC"> of</font><font color="#E5E5E5"> one and what happens is</font>

93
00:03:51,910 --> 00:03:56,079
<font color="#CCCCCC">every time a router receives a packet</font>

94
00:03:54,220 --> 00:03:58,570
and forwards it it decrements<font color="#E5E5E5"> the TTL</font>

95
00:03:56,080 --> 00:04:01,090
value<font color="#E5E5E5"> once it gets to</font><font color="#CCCCCC"> zero the router</font>

96
00:03:58,570 --> 00:04:05,250
drops the<font color="#CCCCCC"> packet and returns an ICMP</font>

97
00:04:01,090 --> 00:04:08,170
message<font color="#CCCCCC"> so that's step</font><font color="#E5E5E5"> two step three</font>

98
00:04:05,250 --> 00:04:09,940
<font color="#E5E5E5">returns the TC the TTL exceed message</font>

99
00:04:08,170 --> 00:04:12,549
back to<font color="#CCCCCC"> the</font><font color="#E5E5E5"> original sender</font><font color="#CCCCCC"> of the</font>

100
00:04:09,940 --> 00:04:14,530
source<font color="#E5E5E5"> that source receives that ICMP</font>

101
00:04:12,550 --> 00:04:17,168
and it knows it says I sent<font color="#E5E5E5"> this thing</font>

102
00:04:14,530 --> 00:04:20,108
<font color="#E5E5E5">out</font><font color="#CCCCCC"> 50 milliseconds ago</font><font color="#E5E5E5"> and I just got</font>

103
00:04:17,168 --> 00:04:22,029
my icing<font color="#CCCCCC"> and</font><font color="#E5E5E5"> P back and so I've now got</font>

104
00:04:20,108 --> 00:04:24,549
a measurement of<font color="#E5E5E5"> 50 milliseconds it's</font>

105
00:04:22,029 --> 00:04:26,380
the round-trip time for how long it took

106
00:04:24,550 --> 00:04:29,620
to send the probe out how long it took

107
00:04:26,380 --> 00:04:30,969
<font color="#CCCCCC">to get the ICMP message back and then it</font>

108
00:04:29,620 --> 00:04:33,070
<font color="#E5E5E5">goes all the way back to step</font><font color="#CCCCCC"> one but</font>

109
00:04:30,970 --> 00:04:34,960
<font color="#E5E5E5">now we start with</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> TTL of two</font>

110
00:04:33,070 --> 00:04:36,460
so the packet makes it further<font color="#E5E5E5"> into the</font>

111
00:04:34,960 --> 00:04:39,700
network it makes it<font color="#CCCCCC"> to</font><font color="#E5E5E5"> hobson before it</font>

112
00:04:36,460 --> 00:04:42,960
<font color="#E5E5E5">gets dropped rinse repeat</font><font color="#CCCCCC"> there's a</font>

113
00:04:39,700 --> 00:04:46,659
little<font color="#E5E5E5"> diagram that shows basically that</font>

114
00:04:42,960 --> 00:04:48,460
<font color="#E5E5E5">you're sending out incrementally one</font>

115
00:04:46,660 --> 00:04:49,840
more TTL at a time one more TTL at a

116
00:04:48,460 --> 00:04:52,030
time the packets making it one step

117
00:04:49,840 --> 00:04:53,919
further<font color="#E5E5E5"> in the network being dropped and</font>

118
00:04:52,030 --> 00:04:56,440
<font color="#CCCCCC">you're getting</font><font color="#E5E5E5"> an ICMP message back and</font>

119
00:04:53,920 --> 00:05:01,060
<font color="#E5E5E5">responding and seeing that response and</font>

120
00:04:56,440 --> 00:05:03,700
<font color="#E5E5E5">using that</font><font color="#CCCCCC"> to display</font><font color="#E5E5E5"> your result so</font>

121
00:05:01,060 --> 00:05:07,180
<font color="#CCCCCC">when you said before trace routes doing</font>

122
00:05:03,700 --> 00:05:08,920
multiple probes<font color="#E5E5E5"> per</font><font color="#CCCCCC"> hopped</font><font color="#E5E5E5"> so like I</font>

123
00:05:07,180 --> 00:05:11,830
<font color="#E5E5E5">said the vast majority</font><font color="#CCCCCC"> it's going to be</font>

124
00:05:08,920 --> 00:05:14,380
three<font color="#CCCCCC"> what that is</font><font color="#E5E5E5"> is three independent</font>

125
00:05:11,830 --> 00:05:16,240
probes<font color="#E5E5E5"> so it's in packet one that goes</font>

126
00:05:14,380 --> 00:05:19,719
all the way<font color="#CCCCCC"> through TTL gets decremented</font>

127
00:05:16,240 --> 00:05:21,190
<font color="#E5E5E5">hit zero gets dropped returns a</font><font color="#CCCCCC"> result</font>

128
00:05:19,720 --> 00:05:22,990
and then it sends<font color="#CCCCCC"> another packet and</font>

129
00:05:21,190 --> 00:05:26,350
does this three times before it

130
00:05:22,990 --> 00:05:28,270
increments<font color="#E5E5E5"> the TTL in each probe packet</font>

131
00:05:26,350 --> 00:05:29,560
uses a unique key to distinguish itself

132
00:05:28,270 --> 00:05:32,799
so how do you know the difference

133
00:05:29,560 --> 00:05:34,120
<font color="#E5E5E5">between probe</font><font color="#CCCCCC"> one two and three so if</font>

134
00:05:32,800 --> 00:05:37,200
you look at most<font color="#E5E5E5"> trace route</font>

135
00:05:34,120 --> 00:05:39,640
implementations the the UNIX systems

136
00:05:37,200 --> 00:05:41,260
<font color="#E5E5E5">most you know like junipers and things</font>

137
00:05:39,640 --> 00:05:43,750
like that<font color="#E5E5E5"> anything</font><font color="#CCCCCC"> that's based off that</font>

138
00:05:41,260 --> 00:05:45,640
<font color="#CCCCCC">it's a it's a</font><font color="#E5E5E5"> UDP packet and it's</font><font color="#CCCCCC"> using</font>

139
00:05:43,750 --> 00:05:48,610
a<font color="#E5E5E5"> destination port to distinguish itself</font>

140
00:05:45,640 --> 00:05:51,099
so by the time it hits probe to probe

141
00:05:48,610 --> 00:05:54,130
<font color="#E5E5E5">three the UDP port goes up by one every</font>

142
00:05:51,100 --> 00:05:55,600
time that's<font color="#E5E5E5"> how it knows okay this is</font>

143
00:05:54,130 --> 00:05:57,850
probe<font color="#CCCCCC"> two this</font><font color="#E5E5E5"> is probe three how to</font>

144
00:05:55,600 --> 00:05:58,900
display<font color="#E5E5E5"> the</font><font color="#CCCCCC"> results correctly there's</font>

145
00:05:57,850 --> 00:06:01,360
some other implementations out<font color="#E5E5E5"> there</font>

146
00:05:58,900 --> 00:06:05,530
<font color="#CCCCCC">that use</font><font color="#E5E5E5"> other things</font><font color="#CCCCCC"> windows for</font>

147
00:06:01,360 --> 00:06:08,530
example<font color="#E5E5E5"> famously uses ICMP there's a lot</font>

148
00:06:05,530 --> 00:06:10,809
of tools out<font color="#E5E5E5"> there</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> use TCP</font><font color="#CCCCCC"> not so</font>

149
00:06:08,530 --> 00:06:12,789
much<font color="#E5E5E5"> that those are better but sometimes</font>

150
00:06:10,810 --> 00:06:16,120
those will<font color="#CCCCCC"> work around firewalls or</font><font color="#E5E5E5"> some</font>

151
00:06:12,790 --> 00:06:18,130
<font color="#CCCCCC">people</font><font color="#E5E5E5"> will just randomly block UDP</font><font color="#CCCCCC"> but</font>

152
00:06:16,120 --> 00:06:20,260
<font color="#E5E5E5">ultimately the thing</font><font color="#CCCCCC"> to remember</font><font color="#E5E5E5"> is that</font>

153
00:06:18,130 --> 00:06:22,450
each probe packet is a completely

154
00:06:20,260 --> 00:06:23,950
independent trial<font color="#E5E5E5"> it has nothing to do</font>

155
00:06:22,450 --> 00:06:27,070
<font color="#CCCCCC">with the pro packet</font><font color="#E5E5E5"> that happened before</font>

156
00:06:23,950 --> 00:06:28,750
<font color="#CCCCCC">the results</font><font color="#E5E5E5"> are different the path that</font>

157
00:06:27,070 --> 00:06:32,400
it took over<font color="#E5E5E5"> the Internet</font><font color="#CCCCCC"> can be very</font>

158
00:06:28,750 --> 00:06:34,870
different<font color="#CCCCCC"> and what you're seeing is</font><font color="#E5E5E5"> only</font>

159
00:06:32,400 --> 00:06:37,060
that last hop where that packet got

160
00:06:34,870 --> 00:06:42,130
dropped<font color="#E5E5E5"> for each probe and I'll get into</font>

161
00:06:37,060 --> 00:06:44,080
<font color="#CCCCCC">that</font><font color="#E5E5E5"> in more detail later on so remember</font>

162
00:06:42,130 --> 00:06:46,050
we talked about<font color="#E5E5E5"> how</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> actually see</font>

163
00:06:44,080 --> 00:06:47,878
<font color="#CCCCCC">traceroute latency and</font><font color="#E5E5E5"> this is real</font>

164
00:06:46,050 --> 00:06:50,370
important when<font color="#E5E5E5"> you go to try and figure</font>

165
00:06:47,879 --> 00:06:52,500
<font color="#CCCCCC">out what's the source of latency there</font>

166
00:06:50,370 --> 00:06:55,590
are three things that<font color="#E5E5E5"> factor into</font>

167
00:06:52,500 --> 00:06:59,580
<font color="#E5E5E5">traceroute latency actually</font><font color="#CCCCCC"> I get to the</font>

168
00:06:55,590 --> 00:07:01,258
other<font color="#CCCCCC"> the latency calculation is nothing</font>

169
00:06:59,580 --> 00:07:05,580
more than you take<font color="#E5E5E5"> a</font><font color="#CCCCCC"> timestamp</font><font color="#E5E5E5"> for when</font>

170
00:07:01,259 --> 00:07:07,139
you launch the probe you<font color="#CCCCCC"> take a</font>

171
00:07:05,580 --> 00:07:09,568
<font color="#CCCCCC">timestamp when</font><font color="#E5E5E5"> you launch the probe you</font>

172
00:07:07,139 --> 00:07:11,580
take a<font color="#CCCCCC"> timestamp of when you get the</font>

173
00:07:09,569 --> 00:07:15,000
ICMP back and you take the<font color="#E5E5E5"> difference</font>

174
00:07:11,580 --> 00:07:16,919
<font color="#E5E5E5">that's that's your time</font><font color="#CCCCCC"> something that</font>

175
00:07:15,000 --> 00:07:18,449
people<font color="#E5E5E5"> get confused by is they think the</font>

176
00:07:16,919 --> 00:07:21,719
routers along<font color="#E5E5E5"> the path are doing</font>

177
00:07:18,449 --> 00:07:23,669
<font color="#E5E5E5">something</font><font color="#CCCCCC"> to time processing they're not</font>

178
00:07:21,719 --> 00:07:24,750
putting a<font color="#E5E5E5"> timestamp in the packet</font>

179
00:07:23,669 --> 00:07:26,909
they're not doing anything<font color="#E5E5E5"> special</font>

180
00:07:24,750 --> 00:07:28,259
they're just dropping<font color="#CCCCCC"> the packets a</font>

181
00:07:26,909 --> 00:07:30,360
normal function of<font color="#E5E5E5"> the router when the</font>

182
00:07:28,259 --> 00:07:33,840
TTL is exceeded and they send<font color="#E5E5E5"> back an</font>

183
00:07:30,360 --> 00:07:36,419
ICMP message so the latency<font color="#E5E5E5"> is always</font>

184
00:07:33,840 --> 00:07:38,369
going<font color="#E5E5E5"> to be the sum of the time taken</font>

185
00:07:36,419 --> 00:07:40,919
<font color="#CCCCCC">for that forward probe to get to that</font>

186
00:07:38,370 --> 00:07:42,780
<font color="#E5E5E5">last hop</font><font color="#CCCCCC"> so however long</font><font color="#E5E5E5"> it</font><font color="#CCCCCC"> takes me</font><font color="#E5E5E5"> to</font>

187
00:07:40,919 --> 00:07:44,969
send my probe out to where<font color="#E5E5E5"> it gets</font>

188
00:07:42,780 --> 00:07:48,000
dropped the time that it takes for<font color="#CCCCCC"> the</font>

189
00:07:44,969 --> 00:07:50,159
router to generate the ICMP which turns

190
00:07:48,000 --> 00:07:52,529
<font color="#E5E5E5">out to be measurable</font><font color="#CCCCCC"> and then the time</font>

191
00:07:50,159 --> 00:07:54,029
that it takes for<font color="#CCCCCC"> that ICMP packet to</font>

192
00:07:52,529 --> 00:07:57,270
get all the way<font color="#CCCCCC"> back to the sender</font><font color="#E5E5E5"> so</font>

193
00:07:54,029 --> 00:08:01,289
it's a it's a full round-trip<font color="#CCCCCC"> and that's</font>

194
00:07:57,270 --> 00:08:03,630
that's<font color="#CCCCCC"> very important later</font><font color="#E5E5E5"> on</font><font color="#CCCCCC"> so here's</font>

195
00:08:01,289 --> 00:08:06,659
<font color="#E5E5E5">some</font><font color="#CCCCCC"> details on</font><font color="#E5E5E5"> the hops that you're</font>

196
00:08:03,630 --> 00:08:08,789
seeing<font color="#E5E5E5"> one important</font><font color="#CCCCCC"> thing to remember</font>

197
00:08:06,659 --> 00:08:12,270
about<font color="#CCCCCC"> trace route is that it's</font><font color="#E5E5E5"> going</font><font color="#CCCCCC"> to</font>

198
00:08:08,789 --> 00:08:14,250
<font color="#E5E5E5">show you the ingress hop</font><font color="#CCCCCC"> so here's an</font>

199
00:08:12,270 --> 00:08:16,529
example<font color="#E5E5E5"> where the first packet goes to</font>

200
00:08:14,250 --> 00:08:19,349
router<font color="#E5E5E5"> one and has an ingress interface</font>

201
00:08:16,529 --> 00:08:23,039
you know one seven two one<font color="#E5E5E5"> six</font><font color="#CCCCCC"> two don't</font>

202
00:08:19,349 --> 00:08:25,229
<font color="#E5E5E5">one when it sends its tracer I'll result</font>

203
00:08:23,039 --> 00:08:27,659
back it's going<font color="#E5E5E5"> to show you that ingress</font>

204
00:08:25,229 --> 00:08:30,240
interface the packet came in over this

205
00:08:27,659 --> 00:08:33,059
when when router one drops it<font color="#E5E5E5"> it's not</font>

206
00:08:30,240 --> 00:08:35,669
going to show you the path that it took

207
00:08:33,059 --> 00:08:38,039
to come back<font color="#E5E5E5"> that it took to return the</font>

208
00:08:35,669 --> 00:08:39,779
ICMP TTL exceed which is in no way

209
00:08:38,039 --> 00:08:42,328
guaranteed to be the same path that<font color="#CCCCCC"> it</font>

210
00:08:39,779 --> 00:08:45,720
came in<font color="#E5E5E5"> on and it's not going to show</font>

211
00:08:42,328 --> 00:08:47,910
you the egress path<font color="#CCCCCC"> so then when router</font>

212
00:08:45,720 --> 00:08:49,230
<font color="#CCCCCC">two gets it</font><font color="#E5E5E5"> it's receiving the packet</font>

213
00:08:47,910 --> 00:08:52,769
<font color="#CCCCCC">over this interface it's going to show</font>

214
00:08:49,230 --> 00:08:55,470
you<font color="#CCCCCC"> 10 dot three two two and it's up to</font>

215
00:08:52,769 --> 00:08:56,860
you to figure<font color="#E5E5E5"> out the egress interface</font>

216
00:08:55,470 --> 00:08:58,870
from router<font color="#CCCCCC"> one</font><font color="#E5E5E5"> but</font>

217
00:08:56,860 --> 00:09:00,670
everything that<font color="#CCCCCC"> you're</font><font color="#E5E5E5"> seeing is every</font>

218
00:08:58,870 --> 00:09:02,860
<font color="#E5E5E5">router's ingress interface you're seeing</font>

219
00:09:00,670 --> 00:09:04,810
how it got to<font color="#CCCCCC"> that router</font><font color="#E5E5E5"> it returns an</font>

220
00:09:02,860 --> 00:09:06,610
ICP<font color="#E5E5E5"> how it got</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> that router returns</font>

221
00:09:04,810 --> 00:09:09,069
and I<font color="#CCCCCC"> see into you an interesting</font>

222
00:09:06,610 --> 00:09:10,660
<font color="#CCCCCC">factoid that's actually not what the</font><font color="#E5E5E5"> RFC</font>

223
00:09:09,070 --> 00:09:13,960
and<font color="#E5E5E5"> standard says to do</font>

224
00:09:10,660 --> 00:09:16,420
RFC 1812 which defines this<font color="#E5E5E5"> says the</font>

225
00:09:13,960 --> 00:09:18,880
ICMP must be sourced from the<font color="#E5E5E5"> egress</font>

226
00:09:16,420 --> 00:09:20,560
interface<font color="#E5E5E5"> and if that was followed</font>

227
00:09:18,880 --> 00:09:22,390
<font color="#CCCCCC">traceroute wouldn't work</font><font color="#E5E5E5"> it would</font>

228
00:09:20,560 --> 00:09:24,760
actually be completely<font color="#E5E5E5"> unintelligible</font>

229
00:09:22,390 --> 00:09:26,980
<font color="#E5E5E5">for troubleshooting so that's one of</font>

230
00:09:24,760 --> 00:09:28,810
<font color="#E5E5E5">those</font><font color="#CCCCCC"> random people disobey the standard</font>

231
00:09:26,980 --> 00:09:34,330
and everyone continues<font color="#CCCCCC"> to do it and it</font>

232
00:09:28,810 --> 00:09:36,250
has obvious benefits<font color="#CCCCCC"> why</font><font color="#E5E5E5"> now we get into</font>

233
00:09:34,330 --> 00:09:38,380
one<font color="#E5E5E5"> of the first things you can do to</font>

234
00:09:36,250 --> 00:09:40,300
<font color="#E5E5E5">really figure</font><font color="#CCCCCC"> out</font><font color="#E5E5E5"> traceroute is how do</font>

235
00:09:38,380 --> 00:09:42,400
<font color="#E5E5E5">you interpret the DNS data that's been</font>

236
00:09:40,300 --> 00:09:44,260
put in<font color="#E5E5E5"> there this is how</font><font color="#CCCCCC"> you can can do</font>

237
00:09:42,400 --> 00:09:46,959
better troubleshooting as you as you

238
00:09:44,260 --> 00:09:47,500
read it<font color="#CCCCCC"> really one does not read</font>

239
00:09:46,960 --> 00:09:51,820
traceroute

240
00:09:47,500 --> 00:09:53,620
<font color="#CCCCCC">be</font><font color="#E5E5E5"> IP IP alone</font><font color="#CCCCCC"> almost every operator for</font>

241
00:09:51,820 --> 00:09:56,650
their own sanity<font color="#E5E5E5"> as well as people on</font>

242
00:09:53,620 --> 00:09:58,720
the<font color="#CCCCCC"> internet</font><font color="#E5E5E5"> is putting</font><font color="#CCCCCC"> DNS in there and</font>

243
00:09:56,650 --> 00:10:01,120
the<font color="#E5E5E5"> more you can interpret out of it the</font>

244
00:09:58,720 --> 00:10:02,620
<font color="#E5E5E5">better</font><font color="#CCCCCC"> Diagnostics you can do so</font>

245
00:10:01,120 --> 00:10:05,440
typically you're<font color="#CCCCCC"> going to find in there</font>

246
00:10:02,620 --> 00:10:07,660
<font color="#E5E5E5">some type of geographic location what</font>

247
00:10:05,440 --> 00:10:09,130
pop it is what's idiots in what<font color="#E5E5E5"> what</font>

248
00:10:07,660 --> 00:10:12,010
<font color="#E5E5E5">region is sends something along those</font>

249
00:10:09,130 --> 00:10:14,200
lines<font color="#CCCCCC"> you can pull out in a lot of cases</font>

250
00:10:12,010 --> 00:10:17,470
the router<font color="#E5E5E5"> types and capabilities you</font>

251
00:10:14,200 --> 00:10:19,090
can figure out what type of<font color="#E5E5E5"> box it is if</font>

252
00:10:17,470 --> 00:10:20,710
it's if<font color="#CCCCCC"> it's a core router if it's a</font>

253
00:10:19,090 --> 00:10:23,740
really<font color="#CCCCCC"> low end edge router</font><font color="#E5E5E5"> things like</font>

254
00:10:20,710 --> 00:10:25,300
<font color="#E5E5E5">that you can figure out in a lot</font><font color="#CCCCCC"> of</font>

255
00:10:23,740 --> 00:10:26,740
networks with different<font color="#E5E5E5"> hierarchies you</font>

256
00:10:25,300 --> 00:10:28,510
can figure out<font color="#E5E5E5"> the type and</font><font color="#CCCCCC"> role</font>

257
00:10:26,740 --> 00:10:30,550
they'll be border routers core routers

258
00:10:28,510 --> 00:10:32,950
<font color="#E5E5E5">and and those will have different</font>

259
00:10:30,550 --> 00:10:34,089
<font color="#E5E5E5">properties</font><font color="#CCCCCC"> but the most important thing</font>

260
00:10:32,950 --> 00:10:35,920
that<font color="#E5E5E5"> you're looking for when you're</font>

261
00:10:34,090 --> 00:10:37,420
<font color="#CCCCCC">working with</font><font color="#E5E5E5"> traceroute</font><font color="#CCCCCC"> is identifying</font>

262
00:10:35,920 --> 00:10:40,270
the network boundaries<font color="#E5E5E5"> and I'll get into</font>

263
00:10:37,420 --> 00:10:42,189
<font color="#CCCCCC">that more later</font><font color="#E5E5E5"> but</font><font color="#CCCCCC"> anytime</font><font color="#E5E5E5"> the packet</font>

264
00:10:40,270 --> 00:10:44,949
leaves<font color="#CCCCCC"> network</font><font color="#E5E5E5"> a and goes to network B</font>

265
00:10:42,190 --> 00:10:46,660
that is potentially a it's a point where

266
00:10:44,950 --> 00:10:48,310
problems<font color="#E5E5E5"> occur and B as potentially a</font>

267
00:10:46,660 --> 00:10:52,689
point where traceroute interpretation

268
00:10:48,310 --> 00:10:56,170
problems<font color="#E5E5E5"> occurred so interpreting</font><font color="#CCCCCC"> trace</font>

269
00:10:52,690 --> 00:10:58,570
<font color="#CCCCCC">file</font><font color="#E5E5E5"> locations</font><font color="#CCCCCC"> it helps if you know the</font>

270
00:10:56,170 --> 00:11:00,459
geographical location<font color="#CCCCCC"> because that's the</font>

271
00:10:58,570 --> 00:11:03,040
first<font color="#E5E5E5"> step to identifying suboptimal</font>

272
00:11:00,460 --> 00:11:04,990
routing<font color="#E5E5E5"> if you see a packet go from San</font>

273
00:11:03,040 --> 00:11:08,530
Jose<font color="#E5E5E5"> to Baltimore to back to San Jose</font>

274
00:11:04,990 --> 00:11:10,920
that's probably<font color="#E5E5E5"> wrong and if you see a</font>

275
00:11:08,530 --> 00:11:13,780
latency<font color="#CCCCCC"> of</font><font color="#E5E5E5"> 100 milliseconds</font>

276
00:11:10,920 --> 00:11:15,280
<font color="#CCCCCC">that might explain it whereas if you saw</font>

277
00:11:13,780 --> 00:11:17,170
a latency<font color="#E5E5E5"> of 100 milliseconds and it</font>

278
00:11:15,280 --> 00:11:18,970
went<font color="#E5E5E5"> San Jose to San Jose to San Jose</font>

279
00:11:17,170 --> 00:11:21,729
<font color="#CCCCCC">there might be something else you're</font>

280
00:11:18,970 --> 00:11:24,330
<font color="#CCCCCC">looking for so that's why you you really</font>

281
00:11:21,730 --> 00:11:26,770
want to be able<font color="#E5E5E5"> to interpret location</font>

282
00:11:24,330 --> 00:11:29,140
<font color="#CCCCCC">the most commonly used location</font>

283
00:11:26,770 --> 00:11:30,069
identifiers<font color="#CCCCCC"> a lot</font><font color="#E5E5E5"> of people do it with</font>

284
00:11:29,140 --> 00:11:33,310
<font color="#E5E5E5">airport codes</font>

285
00:11:30,070 --> 00:11:37,840
there's the ITA and<font color="#E5E5E5"> the the ICAO airport</font>

286
00:11:33,310 --> 00:11:40,540
codes<font color="#CCCCCC"> basically a nice globally unique</font>

287
00:11:37,840 --> 00:11:43,210
list of<font color="#CCCCCC"> Airport codes</font><font color="#E5E5E5"> that mostly</font>

288
00:11:40,540 --> 00:11:44,589
identify major metropolitan regions and

289
00:11:43,210 --> 00:11:46,000
<font color="#CCCCCC">it gets a</font><font color="#E5E5E5"> little confusing once you</font>

290
00:11:44,590 --> 00:11:48,250
start<font color="#E5E5E5"> talking about cities with multiple</font>

291
00:11:46,000 --> 00:11:50,580
airports<font color="#E5E5E5"> or smaller cities that don't</font>

292
00:11:48,250 --> 00:11:53,200
<font color="#E5E5E5">have airports but as a way to identify a</font>

293
00:11:50,580 --> 00:11:55,840
major region that matters<font color="#CCCCCC"> that</font><font color="#E5E5E5"> is likely</font>

294
00:11:53,200 --> 00:11:58,900
to<font color="#CCCCCC"> be a hub of</font><font color="#E5E5E5"> Internet connectivity it</font>

295
00:11:55,840 --> 00:12:01,180
tends<font color="#E5E5E5"> to work relatively well</font><font color="#CCCCCC"> the other</font>

296
00:11:58,900 --> 00:12:04,150
major identifier is called a silly code

297
00:12:01,180 --> 00:12:07,469
<font color="#CCCCCC">CLI</font><font color="#E5E5E5"> I'll get into that in more detail</font>

298
00:12:04,150 --> 00:12:07,470
but<font color="#CCCCCC"> basically you're</font><font color="#E5E5E5"> just</font>

299
00:12:14,529 --> 00:12:18,130
you're just attempting to identify

300
00:12:16,270 --> 00:12:20,920
sometimes people will<font color="#E5E5E5"> just make up</font>

301
00:12:18,130 --> 00:12:22,600
something<font color="#CCCCCC"> that</font><font color="#E5E5E5"> they</font><font color="#CCCCCC"> think sounds</font><font color="#E5E5E5"> good</font>

302
00:12:20,920 --> 00:12:25,689
<font color="#CCCCCC">you know they'll</font><font color="#E5E5E5"> they'll say</font><font color="#CCCCCC"> wass</font><font color="#E5E5E5"> for a</font>

303
00:12:22,600 --> 00:12:30,040
<font color="#E5E5E5">city for Washington or just try to take</font>

304
00:12:25,690 --> 00:12:31,540
<font color="#CCCCCC">a guess so the the airport codes</font><font color="#E5E5E5"> like I</font>

305
00:12:30,040 --> 00:12:35,020
said there's good<font color="#E5E5E5"> international coverage</font>

306
00:12:31,540 --> 00:12:38,949
for<font color="#E5E5E5"> almost every major large city</font><font color="#CCCCCC"> and</font>

307
00:12:35,020 --> 00:12:40,750
<font color="#E5E5E5">you'll find lots of good examples out</font>

308
00:12:38,950 --> 00:12:42,959
there<font color="#E5E5E5"> for most networks I'd say maybe</font>

309
00:12:40,750 --> 00:12:46,300
75%<font color="#E5E5E5"> of networks out there do it</font>

310
00:12:42,959 --> 00:12:50,920
<font color="#E5E5E5">something like</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> give or take</font>

311
00:12:46,300 --> 00:12:53,140
so examples<font color="#E5E5E5"> sdq</font><font color="#CCCCCC"> senator Mingo SJC</font><font color="#E5E5E5"> San</font>

312
00:12:50,920 --> 00:12:55,990
Jose California<font color="#CCCCCC"> you can go look</font><font color="#E5E5E5"> these</font>

313
00:12:53,140 --> 00:12:57,790
all up<font color="#CCCCCC"> sometimes there's</font><font color="#E5E5E5"> their pseudo</font>

314
00:12:55,990 --> 00:12:59,950
airport codes and this is where it

315
00:12:57,790 --> 00:13:02,920
starts getting tricky<font color="#E5E5E5"> for things like</font>

316
00:12:59,950 --> 00:13:06,490
New York City which<font color="#CCCCCC"> is served by JFK</font>

317
00:13:02,920 --> 00:13:08,229
<font color="#E5E5E5">LaGuardia and Newark airports and some</font>

318
00:13:06,490 --> 00:13:09,790
people will actually<font color="#E5E5E5"> use those</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> mean</font>

319
00:13:08,230 --> 00:13:11,560
distinct things this is you know<font color="#E5E5E5"> our</font>

320
00:13:09,790 --> 00:13:14,199
<font color="#E5E5E5">Newark pop versus our New York City pop</font>

321
00:13:11,560 --> 00:13:16,209
<font color="#E5E5E5">and some people will just</font><font color="#CCCCCC"> use there's</font>

322
00:13:14,200 --> 00:13:19,720
there's codes that<font color="#CCCCCC"> represent all of them</font>

323
00:13:16,209 --> 00:13:21,790
NYC<font color="#CCCCCC"> things</font><font color="#E5E5E5"> like that so that's a at any</font>

324
00:13:19,720 --> 00:13:24,640
rate<font color="#CCCCCC"> you</font><font color="#E5E5E5"> your understanding that you see</font>

325
00:13:21,790 --> 00:13:26,980
NYC and you know that it's New York<font color="#E5E5E5"> City</font>

326
00:13:24,640 --> 00:13:28,959
Northern Virginia similar<font color="#E5E5E5"> thing ie D</font>

327
00:13:26,980 --> 00:13:33,899
served<font color="#E5E5E5"> also by DC a and so some people</font>

328
00:13:28,959 --> 00:13:37,119
<font color="#CCCCCC">just do W DC or WI yes things like that</font>

329
00:13:33,899 --> 00:13:39,100
<font color="#CCCCCC">the silly codes look like this so</font>

330
00:13:37,120 --> 00:13:43,380
<font color="#CCCCCC">basically these are these are full codes</font>

331
00:13:39,100 --> 00:13:46,029
that identify very specific telco things

332
00:13:43,380 --> 00:13:48,070
<font color="#CCCCCC">the actual full code looks something</font>

333
00:13:46,029 --> 00:13:52,720
<font color="#E5E5E5">like</font><font color="#CCCCCC"> you know this</font><font color="#E5E5E5"> example and it's</font>

334
00:13:48,070 --> 00:13:54,760
telling you down to a facility and<font color="#E5E5E5"> a</font>

335
00:13:52,720 --> 00:13:56,649
switch in<font color="#E5E5E5"> Iraq and and it's mostly used</font>

336
00:13:54,760 --> 00:13:59,350
in voice networks<font color="#CCCCCC"> and it's something</font>

337
00:13:56,649 --> 00:14:02,500
<font color="#E5E5E5">that's maintained and sold by</font><font color="#CCCCCC"> tel Cordia</font>

338
00:13:59,350 --> 00:14:06,279
<font color="#E5E5E5">and you'll see a lot</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> ilex and people</font>

339
00:14:02,500 --> 00:14:07,570
like that<font color="#E5E5E5"> use it in an antelco role most</font>

340
00:14:06,279 --> 00:14:09,160
people just<font color="#E5E5E5"> strip off everything else</font>

341
00:14:07,570 --> 00:14:11,940
<font color="#E5E5E5">and you're only looking at the first six</font>

342
00:14:09,160 --> 00:14:15,130
it's called the the<font color="#CCCCCC"> geopolitical and</font>

343
00:14:11,940 --> 00:14:18,550
basically just<font color="#CCCCCC"> at the state and</font><font color="#E5E5E5"> the city</font>

344
00:14:15,130 --> 00:14:20,320
in the<font color="#CCCCCC"> state</font><font color="#E5E5E5"> so again you can google all</font>

345
00:14:18,550 --> 00:14:22,660
these and<font color="#E5E5E5"> figure</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> out you know</font><font color="#CCCCCC"> HS TN</font>

346
00:14:20,320 --> 00:14:26,380
<font color="#E5E5E5">TX houston texas it's it's pretty</font>

347
00:14:22,660 --> 00:14:29,199
obvious<font color="#CCCCCC"> this is a</font><font color="#E5E5E5"> u.s. standard</font>

348
00:14:26,380 --> 00:14:31,240
so you've got perfect coverage for every

349
00:14:29,200 --> 00:14:35,230
<font color="#E5E5E5">US city that matters</font><font color="#CCCCCC"> including many that</font>

350
00:14:31,240 --> 00:14:37,209
<font color="#E5E5E5">don't and you'll you'll typically see</font>

351
00:14:35,230 --> 00:14:39,160
<font color="#CCCCCC">that</font><font color="#E5E5E5"> if you got like a</font><font color="#CCCCCC"> u.s. network with</font>

352
00:14:37,209 --> 00:14:41,380
a lot<font color="#CCCCCC"> of</font><font color="#E5E5E5"> cities where you need actual</font>

353
00:14:39,160 --> 00:14:43,269
distinction between Baltimore and like

354
00:14:41,380 --> 00:14:45,610
the five suburbs of Baltimore and things

355
00:14:43,269 --> 00:14:48,310
like<font color="#E5E5E5"> that</font><font color="#CCCCCC"> but it's not</font><font color="#E5E5E5"> an actual</font>

356
00:14:45,610 --> 00:14:50,230
standard outside of North America<font color="#CCCCCC"> so</font>

357
00:14:48,310 --> 00:14:53,709
what you see in some cases<font color="#CCCCCC"> is people</font>

358
00:14:50,230 --> 00:14:55,269
<font color="#CCCCCC">just fudge this</font><font color="#E5E5E5"> they'll make up what</font>

359
00:14:53,709 --> 00:14:57,449
would<font color="#CCCCCC"> be a silly code but it's</font><font color="#E5E5E5"> not a</font>

360
00:14:55,269 --> 00:15:00,250
standard<font color="#E5E5E5"> that you can for</font><font color="#CCCCCC"> sure Google</font>

361
00:14:57,449 --> 00:15:02,109
with six letters you kind of able<font color="#E5E5E5"> to</font>

362
00:15:00,250 --> 00:15:07,810
<font color="#E5E5E5">figure out</font><font color="#CCCCCC"> you know Amsterdam</font>

363
00:15:02,110 --> 00:15:09,880
<font color="#E5E5E5">Netherlands</font><font color="#CCCCCC"> things</font><font color="#E5E5E5"> like that arbitrary</font>

364
00:15:07,810 --> 00:15:14,399
values<font color="#E5E5E5"> sometimes people</font><font color="#CCCCCC"> just make stuff</font>

365
00:15:09,880 --> 00:15:17,290
up<font color="#E5E5E5"> this is probably a huge percentage</font>

366
00:15:14,399 --> 00:15:20,709
<font color="#E5E5E5">you know</font><font color="#CCCCCC"> you get</font><font color="#E5E5E5"> into example Chicago</font>

367
00:15:17,290 --> 00:15:22,199
<font color="#E5E5E5">the airport codes or</font><font color="#CCCCCC"> Ohio Rd</font><font color="#E5E5E5"> and Midway</font>

368
00:15:20,709 --> 00:15:25,239
<font color="#E5E5E5">MDW</font>

369
00:15:22,199 --> 00:15:27,449
some people say I don't know what that

370
00:15:25,240 --> 00:15:30,699
means I'm just<font color="#E5E5E5"> going</font><font color="#CCCCCC"> to call it CH</font><font color="#E5E5E5"> I</font>

371
00:15:27,449 --> 00:15:33,640
things like that<font color="#E5E5E5"> Toronto</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> lot of people</font>

372
00:15:30,699 --> 00:15:36,670
don't<font color="#E5E5E5"> know it's YYZ as an airport code</font>

373
00:15:33,640 --> 00:15:40,029
or<font color="#CCCCCC"> ypc is</font><font color="#E5E5E5"> another</font><font color="#CCCCCC"> airport there</font><font color="#E5E5E5"> so they</font>

374
00:15:36,670 --> 00:15:41,469
make<font color="#E5E5E5"> things like cor</font><font color="#CCCCCC"> and these you know</font>

375
00:15:40,029 --> 00:15:43,149
they they have the best<font color="#E5E5E5"> intentions when</font>

376
00:15:41,470 --> 00:15:46,899
they make these things<font color="#E5E5E5"> they they try to</font>

377
00:15:43,149 --> 00:15:48,279
<font color="#E5E5E5">pick things that look right</font><font color="#CCCCCC"> and make</font>

378
00:15:46,899 --> 00:15:49,990
sense in English and you think<font color="#E5E5E5"> most</font>

379
00:15:48,279 --> 00:15:52,300
<font color="#E5E5E5">people be able</font><font color="#CCCCCC"> to interpret</font><font color="#E5E5E5"> and for the</font>

380
00:15:49,990 --> 00:15:53,920
most<font color="#E5E5E5"> part you can but it also gets into</font>

381
00:15:52,300 --> 00:15:56,199
<font color="#E5E5E5">situations where there's no actual</font>

382
00:15:53,920 --> 00:15:58,719
standard and someone else uses<font color="#CCCCCC"> TRN or</font>

383
00:15:56,199 --> 00:16:01,060
something like<font color="#E5E5E5"> that so that's if you're</font>

384
00:15:58,720 --> 00:16:02,500
naming your your router's<font color="#E5E5E5"> I prefer to</font>

385
00:16:01,060 --> 00:16:06,040
stick with<font color="#E5E5E5"> something that has an actual</font>

386
00:16:02,500 --> 00:16:08,709
convention that you've been mapped to so

387
00:16:06,040 --> 00:16:10,899
<font color="#CCCCCC">I include a table of some of the most</font>

388
00:16:08,709 --> 00:16:14,290
common major US cities as<font color="#CCCCCC"> far as the</font>

389
00:16:10,899 --> 00:16:15,940
internet goes and the airport codes that

390
00:16:14,290 --> 00:16:19,599
<font color="#CCCCCC">represent them</font><font color="#E5E5E5"> so you'll see a lot of</font>

391
00:16:15,940 --> 00:16:21,430
<font color="#E5E5E5">those the the silly codes so like you</font>

392
00:16:19,600 --> 00:16:25,540
know<font color="#E5E5E5"> NTP</font><font color="#CCCCCC"> is a big user of those for</font>

393
00:16:21,430 --> 00:16:27,910
<font color="#CCCCCC">example</font><font color="#E5E5E5"> other other more more telco like</font>

394
00:16:25,540 --> 00:16:30,490
folks<font color="#E5E5E5"> and then some of the other codes</font>

395
00:16:27,910 --> 00:16:32,199
so between<font color="#CCCCCC"> all of these these are very</font>

396
00:16:30,490 --> 00:16:34,510
representative of<font color="#CCCCCC"> the</font><font color="#E5E5E5"> types of things</font>

397
00:16:32,199 --> 00:16:36,130
you'll see<font color="#E5E5E5"> and once you get into San</font>

398
00:16:34,510 --> 00:16:39,040
Jose some people will start to do things

399
00:16:36,130 --> 00:16:40,270
<font color="#E5E5E5">like</font><font color="#CCCCCC"> SV Silicon Valley to</font><font color="#E5E5E5"> represent San</font>

400
00:16:39,040 --> 00:16:43,990
Jose Palo Alto

401
00:16:40,270 --> 00:16:48,460
<font color="#E5E5E5">Santa Clara etc lots of little cities</font>

402
00:16:43,990 --> 00:16:50,320
<font color="#E5E5E5">within a region</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> international</font>

403
00:16:48,460 --> 00:16:52,390
<font color="#E5E5E5">version looks like this so these are you</font>

404
00:16:50,320 --> 00:16:54,880
know as the internet goes<font color="#E5E5E5"> the most</font>

405
00:16:52,390 --> 00:16:56,350
important cities<font color="#CCCCCC"> so these are like</font><font color="#E5E5E5"> their</font>

406
00:16:54,880 --> 00:16:57,820
representative airport codes the silly

407
00:16:56,350 --> 00:17:01,000
codes and then some of the other codes

408
00:16:57,820 --> 00:17:03,520
that people<font color="#CCCCCC"> commonly use to represent</font>

409
00:17:01,000 --> 00:17:07,720
them<font color="#E5E5E5"> good back to refer back</font><font color="#CCCCCC"> to if</font>

410
00:17:03,520 --> 00:17:10,930
you're looking at stuff so the next

411
00:17:07,720 --> 00:17:13,510
thing you want<font color="#CCCCCC"> to</font><font color="#E5E5E5"> get out</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> DNS is the</font>

412
00:17:10,930 --> 00:17:15,100
interface types<font color="#CCCCCC"> the way</font><font color="#E5E5E5"> most networks do</font>

413
00:17:13,510 --> 00:17:18,490
this<font color="#E5E5E5"> is they'll</font><font color="#CCCCCC"> put their full interface</font>

414
00:17:15,099 --> 00:17:20,949
info into<font color="#E5E5E5"> DNS</font><font color="#CCCCCC"> again</font><font color="#E5E5E5"> mostly to help</font>

415
00:17:18,490 --> 00:17:22,329
<font color="#E5E5E5">themselves troubleshoot not so much for</font>

416
00:17:20,950 --> 00:17:23,620
<font color="#CCCCCC">people on</font><font color="#E5E5E5"> the internet but if you're</font>

417
00:17:22,329 --> 00:17:25,990
<font color="#E5E5E5">smart and you know how</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> interpret it</font>

418
00:17:23,619 --> 00:17:27,339
<font color="#E5E5E5">it can help you and you know whether who</font>

419
00:17:25,990 --> 00:17:29,320
to<font color="#CCCCCC"> complain to correctly</font><font color="#E5E5E5"> and if you</font>

420
00:17:27,339 --> 00:17:33,220
direct<font color="#E5E5E5"> your complaint to the right place</font>

421
00:17:29,320 --> 00:17:34,360
first<font color="#E5E5E5"> you'll be a lot better off so you</font>

422
00:17:33,220 --> 00:17:35,920
<font color="#E5E5E5">can you can</font><font color="#CCCCCC"> pull a lot of stuff out</font><font color="#E5E5E5"> of</font>

423
00:17:34,360 --> 00:17:41,290
it so here's an example

424
00:17:35,920 --> 00:17:44,680
<font color="#E5E5E5">level 3 hop XE - 11 - 1-0</font><font color="#CCCCCC"> edge one New</font>

425
00:17:41,290 --> 00:17:45,250
<font color="#E5E5E5">York</font><font color="#CCCCCC"> one so here I'm obviously it's in</font>

426
00:17:44,680 --> 00:17:47,680
New York<font color="#E5E5E5"> City</font>

427
00:17:45,250 --> 00:17:49,720
I learned the role<font color="#CCCCCC"> of the router it's</font>

428
00:17:47,680 --> 00:17:51,190
edge<font color="#E5E5E5"> box that's where they're</font>

429
00:17:49,720 --> 00:17:53,830
terminating some of their appearing

430
00:17:51,190 --> 00:17:56,560
circuits and you can start to look<font color="#E5E5E5"> at</font>

431
00:17:53,830 --> 00:17:59,800
the the<font color="#CCCCCC"> naming format XE - is juniper</font>

432
00:17:56,560 --> 00:18:02,020
<font color="#E5E5E5">convention for 10 gig and you can look</font>

433
00:17:59,800 --> 00:18:03,970
at and this changes over time as new

434
00:18:02,020 --> 00:18:06,550
<font color="#E5E5E5">line card models come out but at the</font>

435
00:18:03,970 --> 00:18:07,930
time this<font color="#E5E5E5"> was written you know you could</font>

436
00:18:06,550 --> 00:18:09,610
you could say it's the<font color="#E5E5E5"> 11th slot</font>

437
00:18:07,930 --> 00:18:13,360
<font color="#E5E5E5">starting from</font><font color="#CCCCCC"> 0 so it's actually</font><font color="#E5E5E5"> the</font>

438
00:18:09,610 --> 00:18:15,669
<font color="#E5E5E5">12th slot in a Juniper device that does</font>

439
00:18:13,360 --> 00:18:17,649
<font color="#E5E5E5">10 gig</font><font color="#CCCCCC"> and you can tell by the the</font>

440
00:18:15,670 --> 00:18:19,210
<font color="#E5E5E5">numbering since the last one was 0 that</font>

441
00:18:17,650 --> 00:18:21,010
it does at least<font color="#E5E5E5"> this never reports and</font>

442
00:18:19,210 --> 00:18:23,950
you could actually<font color="#E5E5E5"> deduce hey this was a</font>

443
00:18:21,010 --> 00:18:27,580
this back of the time was a Juniper<font color="#E5E5E5"> DPC</font>

444
00:18:23,950 --> 00:18:29,920
with a four port 10 gig slot and this

445
00:18:27,580 --> 00:18:34,659
<font color="#E5E5E5">was no other device could fit that</font>

446
00:18:29,920 --> 00:18:37,510
naming profile<font color="#E5E5E5"> so I include a table of</font>

447
00:18:34,660 --> 00:18:39,820
the most common interface types and how

448
00:18:37,510 --> 00:18:42,129
they get represented<font color="#E5E5E5"> typically people</font>

449
00:18:39,820 --> 00:18:45,250
<font color="#E5E5E5">there's a lot of</font><font color="#CCCCCC"> for good</font><font color="#E5E5E5"> networks</font>

450
00:18:42,130 --> 00:18:48,100
<font color="#E5E5E5">automation that comes into this so SNMP</font>

451
00:18:45,250 --> 00:18:49,480
will shorten things down to the short

452
00:18:48,100 --> 00:18:51,760
name it'll it'll turn Gigabit Ethernet

453
00:18:49,480 --> 00:18:53,770
<font color="#E5E5E5">into GI</font>

454
00:18:51,760 --> 00:18:56,470
and then you'll be<font color="#E5E5E5"> able to see the those</font>

455
00:18:53,770 --> 00:18:58,750
those patterns<font color="#E5E5E5"> but</font><font color="#CCCCCC"> you know you can you</font>

456
00:18:56,470 --> 00:19:01,090
can<font color="#CCCCCC"> tell if</font><font color="#E5E5E5"> you see a GI and depending</font>

457
00:18:58,750 --> 00:19:05,110
<font color="#E5E5E5">on the the number of fields</font><font color="#CCCCCC"> if</font><font color="#E5E5E5"> it's iOS</font>

458
00:19:01,090 --> 00:19:07,510
if<font color="#CCCCCC"> it's</font><font color="#E5E5E5"> iOS</font><font color="#CCCCCC"> XR if it's GE - that's the</font>

459
00:19:05,110 --> 00:19:08,919
Juniper geeky<font color="#E5E5E5"> so you can refer</font><font color="#CCCCCC"> to a</font>

460
00:19:07,510 --> 00:19:11,140
table like<font color="#E5E5E5"> this and really have an</font>

461
00:19:08,920 --> 00:19:13,480
understanding<font color="#E5E5E5"> of what the device type is</font>

462
00:19:11,140 --> 00:19:15,910
and then later on what the behavior is

463
00:19:13,480 --> 00:19:17,440
for<font color="#CCCCCC"> that model especially as</font><font color="#E5E5E5"> it affects</font>

464
00:19:15,910 --> 00:19:19,420
traceroute because I'll get<font color="#CCCCCC"> into that</font><font color="#E5E5E5"> in</font>

465
00:19:17,440 --> 00:19:21,550
more detail<font color="#CCCCCC"> but every router</font><font color="#E5E5E5"> behaves a</font>

466
00:19:19,420 --> 00:19:23,410
little<font color="#E5E5E5"> bit differently when it comes to</font>

467
00:19:21,550 --> 00:19:29,080
how it<font color="#E5E5E5"> drops the packet and sends back</font>

468
00:19:23,410 --> 00:19:31,360
<font color="#CCCCCC">the ICMP so the other thing</font><font color="#E5E5E5"> I said you</font>

469
00:19:29,080 --> 00:19:34,830
could get out of<font color="#E5E5E5"> DNS is the the router</font>

470
00:19:31,360 --> 00:19:37,419
types and roles<font color="#E5E5E5"> every network has a</font>

471
00:19:34,830 --> 00:19:38,770
different<font color="#E5E5E5"> standard right you know what's</font>

472
00:19:37,420 --> 00:19:41,580
a core what's an edge what's appearing

473
00:19:38,770 --> 00:19:44,740
box what's a customer aggregation box

474
00:19:41,580 --> 00:19:47,980
<font color="#CCCCCC">most people kind of mostly</font><font color="#E5E5E5"> mean the same</font>

475
00:19:44,740 --> 00:19:51,340
things<font color="#E5E5E5"> and you can have an</font><font color="#CCCCCC"> understanding</font>

476
00:19:47,980 --> 00:19:54,460
of what<font color="#E5E5E5"> those devices are and then again</font>

477
00:19:51,340 --> 00:19:55,840
how they're going to behave<font color="#CCCCCC"> so your</font>

478
00:19:54,460 --> 00:20:00,840
typical core routers they're gonna be

479
00:19:55,840 --> 00:20:03,879
named<font color="#E5E5E5"> things like</font><font color="#CCCCCC"> CR core gbr backbone</font>

480
00:20:00,840 --> 00:20:05,379
<font color="#CCCCCC">CCR</font><font color="#E5E5E5"> EB are things like that there's</font>

481
00:20:03,880 --> 00:20:07,600
those are some examples<font color="#CCCCCC"> from prominent</font>

482
00:20:05,380 --> 00:20:09,790
networks out there<font color="#E5E5E5"> but you know</font><font color="#CCCCCC"> you can</font>

483
00:20:07,600 --> 00:20:12,129
you<font color="#CCCCCC"> can</font><font color="#E5E5E5"> get an idea</font><font color="#CCCCCC"> that this is</font><font color="#E5E5E5"> a core</font>

484
00:20:09,790 --> 00:20:13,389
device<font color="#CCCCCC"> there's a lot</font><font color="#E5E5E5"> of networks that</font>

485
00:20:12,130 --> 00:20:15,550
will do they're appearing on dedicated

486
00:20:13,390 --> 00:20:19,450
<font color="#CCCCCC">edge devices</font><font color="#E5E5E5"> be</font><font color="#CCCCCC"> are border routers</font>

487
00:20:15,550 --> 00:20:21,820
borders edges<font color="#CCCCCC"> IR interconnection routers</font>

488
00:20:19,450 --> 00:20:23,140
<font color="#CCCCCC">IG are</font><font color="#E5E5E5"> gateway routers you know people</font>

489
00:20:21,820 --> 00:20:25,300
come up<font color="#E5E5E5"> with with names for all these</font>

490
00:20:23,140 --> 00:20:27,190
<font color="#E5E5E5">things but you</font><font color="#CCCCCC"> can kind of look at</font><font color="#E5E5E5"> these</font>

491
00:20:25,300 --> 00:20:30,040
and<font color="#E5E5E5"> figure out</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> is this is a peering</font>

492
00:20:27,190 --> 00:20:33,880
router and the other one to<font color="#E5E5E5"> look for is</font>

493
00:20:30,040 --> 00:20:36,250
a customer router<font color="#CCCCCC"> an AR an aggregation</font>

494
00:20:33,880 --> 00:20:38,320
box<font color="#E5E5E5"> a nagger customer box a CA our</font>

495
00:20:36,250 --> 00:20:40,360
customer aggregation router<font color="#E5E5E5"> HS a</font>

496
00:20:38,320 --> 00:20:41,970
<font color="#CCCCCC">high-speed aggregation and everyone</font>

497
00:20:40,360 --> 00:20:44,229
comes up<font color="#E5E5E5"> with their own little thing but</font>

498
00:20:41,970 --> 00:20:48,520
<font color="#E5E5E5">these are the most common ones out there</font>

499
00:20:44,230 --> 00:20:50,920
<font color="#E5E5E5">for some large networks and the most</font>

500
00:20:48,520 --> 00:20:53,770
important thing you<font color="#CCCCCC"> can get</font><font color="#E5E5E5"> out of it is</font>

501
00:20:50,920 --> 00:20:55,450
identifying the network boundary<font color="#CCCCCC"> so like</font>

502
00:20:53,770 --> 00:20:58,750
<font color="#CCCCCC">I said</font><font color="#E5E5E5"> it's important the reason</font><font color="#CCCCCC"> that</font>

503
00:20:55,450 --> 00:21:01,210
it's important is a it's it's<font color="#E5E5E5"> always</font>

504
00:20:58,750 --> 00:21:03,040
<font color="#E5E5E5">more difficult to in the order the</font>

505
00:21:01,210 --> 00:21:05,080
slides those are where the routing

506
00:21:03,040 --> 00:21:07,809
policy changes occur so

507
00:21:05,080 --> 00:21:09,220
if it's on my network<font color="#E5E5E5"> and I prefer level</font>

508
00:21:07,809 --> 00:21:11,590
<font color="#CCCCCC">three and</font><font color="#E5E5E5"> I hand it off</font><font color="#CCCCCC"> to this other</font>

509
00:21:09,220 --> 00:21:14,440
<font color="#E5E5E5">guy and he prefers sprint for the return</font>

510
00:21:11,590 --> 00:21:17,019
path and the return path changes<font color="#E5E5E5"> the</font>

511
00:21:14,440 --> 00:21:18,749
instant<font color="#E5E5E5"> it leaves my network and so by</font>

512
00:21:17,019 --> 00:21:21,220
<font color="#E5E5E5">knowing where the network boundary is</font>

513
00:21:18,749 --> 00:21:23,379
you're going<font color="#E5E5E5"> to know how the return path</font>

514
00:21:21,220 --> 00:21:26,350
was affected how how all the routing<font color="#E5E5E5"> was</font>

515
00:21:23,379 --> 00:21:28,029
affected<font color="#E5E5E5"> and and how that's</font><font color="#CCCCCC"> going to</font>

516
00:21:26,350 --> 00:21:30,129
affect<font color="#CCCCCC"> traceroute</font><font color="#E5E5E5"> and it also tends to</font>

517
00:21:28,029 --> 00:21:32,200
be<font color="#E5E5E5"> the area where capacity and routing</font>

518
00:21:30,129 --> 00:21:35,590
or difficult<font color="#E5E5E5"> those</font><font color="#CCCCCC"> are the areas where</font>

519
00:21:32,200 --> 00:21:36,970
one<font color="#CCCCCC"> of us may be paying one</font><font color="#E5E5E5"> of us may</font><font color="#CCCCCC"> be</font>

520
00:21:35,590 --> 00:21:39,220
waiting<font color="#E5E5E5"> on the</font><font color="#CCCCCC"> other</font><font color="#E5E5E5"> one to upgrade</font>

521
00:21:36,970 --> 00:21:41,320
appearing circuit<font color="#E5E5E5"> and so it typically</font>

522
00:21:39,220 --> 00:21:44,320
tends to be<font color="#E5E5E5"> easier</font><font color="#CCCCCC"> to fix yourself to</font>

523
00:21:41,320 --> 00:21:47,830
<font color="#CCCCCC">yourself than it is yourself to some</font>

524
00:21:44,320 --> 00:21:50,980
other<font color="#E5E5E5"> third party and then identifying</font>

525
00:21:47,830 --> 00:21:53,830
the relationship you want<font color="#E5E5E5"> to figure</font><font color="#CCCCCC"> out</font>

526
00:21:50,980 --> 00:21:56,019
if it's a transit relationship if one

527
00:21:53,830 --> 00:21:57,279
person is a provider to<font color="#CCCCCC"> the</font><font color="#E5E5E5"> other if</font>

528
00:21:56,019 --> 00:21:58,659
it's a peer if it's a truce

529
00:21:57,279 --> 00:21:59,799
<font color="#E5E5E5">interconnection it doesn't matter if</font>

530
00:21:58,659 --> 00:22:02,590
<font color="#CCCCCC">it's settlement free or</font><font color="#E5E5E5"> not but if it's</font>

531
00:21:59,799 --> 00:22:04,658
routed<font color="#E5E5E5"> as a peer so the only customer</font>

532
00:22:02,590 --> 00:22:09,070
routes are advertised to each other and

533
00:22:04,659 --> 00:22:12,100
if it's a customer<font color="#E5E5E5"> and especially the</font>

534
00:22:09,070 --> 00:22:13,840
customer side<font color="#CCCCCC"> a lot of networks are very</font>

535
00:22:12,100 --> 00:22:16,840
very clear<font color="#CCCCCC"> about where the</font><font color="#E5E5E5"> customers</font>

536
00:22:13,840 --> 00:22:21,369
they'll put things like<font color="#CCCCCC"> that customer</font><font color="#E5E5E5"> or</font>

537
00:22:16,840 --> 00:22:23,799
you know GW<font color="#CCCCCC"> or</font><font color="#E5E5E5"> they'll put an a s number</font>

538
00:22:21,369 --> 00:22:25,119
in the boundary<font color="#E5E5E5"> that's really helpful</font>

539
00:22:23,799 --> 00:22:27,429
<font color="#E5E5E5">and I'll go into that in</font><font color="#CCCCCC"> some more</font>

540
00:22:25,119 --> 00:22:30,279
detail and<font color="#E5E5E5"> kind of the the naming but</font>

541
00:22:27,429 --> 00:22:32,859
that's really<font color="#E5E5E5"> helpful</font><font color="#CCCCCC"> because</font><font color="#E5E5E5"> most</font>

542
00:22:30,279 --> 00:22:35,889
customer interfaces<font color="#E5E5E5"> come out of the IP</font>

543
00:22:32,859 --> 00:22:38,019
space<font color="#E5E5E5"> of their provider and probably 80%</font>

544
00:22:35,889 --> 00:22:41,080
of<font color="#E5E5E5"> the the bogus traceroute complaints</font>

545
00:22:38,019 --> 00:22:42,549
that<font color="#E5E5E5"> I see are people who send a report</font>

546
00:22:41,080 --> 00:22:43,629
<font color="#CCCCCC">to someone</font><font color="#E5E5E5"> who can do</font><font color="#CCCCCC"> nothing about</font><font color="#E5E5E5"> it</font>

547
00:22:42,549 --> 00:22:45,759
<font color="#CCCCCC">because the packet</font><font color="#E5E5E5"> has already left</font>

548
00:22:43,629 --> 00:22:47,529
their network<font color="#E5E5E5"> gone to someone else but</font>

549
00:22:45,759 --> 00:22:49,950
the IP space came out of their network

550
00:22:47,529 --> 00:22:52,629
and<font color="#E5E5E5"> so that's that's how they got found</font>

551
00:22:49,950 --> 00:22:54,879
so here's an example<font color="#E5E5E5"> where it's real</font>

552
00:22:52,629 --> 00:22:56,350
<font color="#E5E5E5">easy</font><font color="#CCCCCC"> to spot the DNS changes and yeah</font>

553
00:22:54,879 --> 00:22:58,209
I'm still<font color="#CCCCCC"> using old slides that still</font>

554
00:22:56,350 --> 00:23:01,629
have a<font color="#CCCCCC"> Global Crossing</font><font color="#E5E5E5"> you know here you</font>

555
00:22:58,210 --> 00:23:03,970
<font color="#CCCCCC">can you can see this was on device AR 3</font>

556
00:23:01,629 --> 00:23:07,389
<font color="#CCCCCC">D CA 3 and</font><font color="#E5E5E5"> Global Crossing and then the</font>

557
00:23:03,970 --> 00:23:08,799
next<font color="#E5E5E5"> stop it's on Sprint</font><font color="#CCCCCC"> the other thing</font>

558
00:23:07,389 --> 00:23:11,248
you can do is to look for the remote

559
00:23:08,799 --> 00:23:15,100
party name so here in the next<font color="#E5E5E5"> example</font>

560
00:23:11,249 --> 00:23:18,090
<font color="#E5E5E5">you see cogent on a</font><font color="#CCCCCC"> global crossing peer</font>

561
00:23:15,100 --> 00:23:20,490
but it's it<font color="#E5E5E5"> still says</font><font color="#CCCCCC"> GPL X net</font>

562
00:23:18,090 --> 00:23:21,840
what happened there<font color="#E5E5E5"> was when the the two</font>

563
00:23:20,490 --> 00:23:23,039
parties got together and they said<font color="#CCCCCC"> we're</font>

564
00:23:21,840 --> 00:23:26,158
gonna set up<font color="#E5E5E5"> an</font><font color="#CCCCCC"> interconnection between</font>

565
00:23:23,039 --> 00:23:27,629
<font color="#E5E5E5">us</font><font color="#CCCCCC"> one person said I'm</font><font color="#E5E5E5"> gonna do the</font>

566
00:23:26,159 --> 00:23:29,909
<font color="#CCCCCC">slash 30 for</font><font color="#E5E5E5"> this in this case it was</font>

567
00:23:27,630 --> 00:23:31,529
<font color="#CCCCCC">Global Crossing and they didn't take the</font>

568
00:23:29,909 --> 00:23:33,179
<font color="#CCCCCC">time to say hey cogent</font><font color="#E5E5E5"> what do you want</font>

569
00:23:31,529 --> 00:23:36,440
your full<font color="#CCCCCC"> DNS to look like for</font><font color="#E5E5E5"> your</font>

570
00:23:33,179 --> 00:23:39,360
router<font color="#CCCCCC"> they just through cogent into</font>

571
00:23:36,440 --> 00:23:42,090
<font color="#E5E5E5">their naming scheme so if you look for</font>

572
00:23:39,360 --> 00:23:44,850
<font color="#CCCCCC">that</font><font color="#E5E5E5"> third party thing on the the slash</font>

573
00:23:42,090 --> 00:23:46,379
<font color="#E5E5E5">30 that's how you can tell</font><font color="#CCCCCC"> and then the</font>

574
00:23:44,850 --> 00:23:49,110
<font color="#CCCCCC">other thing you want to do is look</font><font color="#E5E5E5"> up</font>

575
00:23:46,380 --> 00:23:52,350
the<font color="#CCCCCC"> other</font><font color="#E5E5E5"> side of the slash 30 so you do</font>

576
00:23:49,110 --> 00:23:56,070
a<font color="#CCCCCC"> traceroute you see</font><font color="#E5E5E5"> top</font><font color="#CCCCCC"> 5 here</font><font color="#E5E5E5"> and you</font>

577
00:23:52,350 --> 00:23:58,830
say dot 90<font color="#CCCCCC"> I you know do simple bit math</font>

578
00:23:56,070 --> 00:24:01,950
and know that<font color="#E5E5E5"> that's dot 88</font><font color="#CCCCCC"> / 30 so the</font>

579
00:23:58,830 --> 00:24:04,168
other side<font color="#E5E5E5"> is 89 so do look up on dot 89</font>

580
00:24:01,950 --> 00:24:06,960
and you can see that's<font color="#CCCCCC"> the other</font><font color="#E5E5E5"> side</font>

581
00:24:04,169 --> 00:24:09,899
that's<font color="#CCCCCC"> the Global Crossing interface on</font>

582
00:24:06,960 --> 00:24:14,190
<font color="#CCCCCC">AR</font><font color="#E5E5E5"> 5 which</font><font color="#CCCCCC"> matches up with the ingress</font>

583
00:24:09,899 --> 00:24:16,350
interface that<font color="#E5E5E5"> you see on hop 4 so now</font>

584
00:24:14,190 --> 00:24:18,270
we get<font color="#E5E5E5"> into the most fun part of</font><font color="#CCCCCC"> tracer</font>

585
00:24:16,350 --> 00:24:22,469
<font color="#CCCCCC">out in my opinion understanding the</font>

586
00:24:18,270 --> 00:24:25,620
network latency so there are three main

587
00:24:22,470 --> 00:24:28,049
causes<font color="#E5E5E5"> that contribute to network</font>

588
00:24:25,620 --> 00:24:29,879
induced latency the the things that you

589
00:24:28,049 --> 00:24:32,190
actually<font color="#E5E5E5"> see performance-wise on a</font>

590
00:24:29,880 --> 00:24:34,169
packet that<font color="#E5E5E5"> that are going</font><font color="#CCCCCC"> to</font>

591
00:24:32,190 --> 00:24:35,820
<font color="#E5E5E5">potentially impact performance or that</font>

592
00:24:34,169 --> 00:24:38,549
are<font color="#E5E5E5"> definitely going to impact tracer on</font>

593
00:24:35,820 --> 00:24:40,740
<font color="#E5E5E5">the</font><font color="#CCCCCC"> first is serialization</font><font color="#E5E5E5"> delay that's</font>

594
00:24:38,549 --> 00:24:43,049
the delay that's caused by<font color="#CCCCCC"> the packet</font>

595
00:24:40,740 --> 00:24:46,200
moving<font color="#E5E5E5"> across</font><font color="#CCCCCC"> the network and packet</font>

596
00:24:43,049 --> 00:24:48,389
<font color="#E5E5E5">size chunks</font><font color="#CCCCCC"> that the as you encode it</font>

597
00:24:46,200 --> 00:24:50,460
transmitted<font color="#CCCCCC"> across the wire pull it</font><font color="#E5E5E5"> back</font>

598
00:24:48,390 --> 00:24:53,700
out serialization<font color="#E5E5E5"> delay and go into more</font>

599
00:24:50,460 --> 00:24:56,340
detail<font color="#E5E5E5"> here</font><font color="#CCCCCC"> queuing delay is the delay</font>

600
00:24:53,700 --> 00:24:58,529
the of the packet<font color="#E5E5E5"> sitting on a router</font>

601
00:24:56,340 --> 00:25:01,439
<font color="#E5E5E5">waiting for an opportunity</font><font color="#CCCCCC"> to be</font>

602
00:24:58,529 --> 00:25:04,080
transmitted and propagation delay is

603
00:25:01,440 --> 00:25:06,179
purely<font color="#E5E5E5"> the speed of light it's how long</font>

604
00:25:04,080 --> 00:25:07,799
<font color="#E5E5E5">it takes the signal to actually flow</font>

605
00:25:06,179 --> 00:25:11,490
<font color="#CCCCCC">through the wire and come out on</font><font color="#E5E5E5"> the</font>

606
00:25:07,799 --> 00:25:13,230
<font color="#CCCCCC">other end so</font><font color="#E5E5E5"> serialization delay</font><font color="#CCCCCC"> like I</font>

607
00:25:11,490 --> 00:25:17,159
<font color="#E5E5E5">said it's the</font><font color="#CCCCCC"> process of encoding the</font>

608
00:25:13,230 --> 00:25:20,340
data into chunks<font color="#E5E5E5"> so if I send a</font><font color="#CCCCCC"> 1,500</font>

609
00:25:17,159 --> 00:25:22,770
byte packet you can't start transmitting

610
00:25:20,340 --> 00:25:24,240
the packets first byte until you've

611
00:25:22,770 --> 00:25:27,210
received its last byte so there will<font color="#E5E5E5"> be</font>

612
00:25:24,240 --> 00:25:29,309
a<font color="#E5E5E5"> delay as you chunk it and the way that</font>

613
00:25:27,210 --> 00:25:30,710
the math works on this<font color="#E5E5E5"> is the faster the</font>

614
00:25:29,309 --> 00:25:33,320
interface the quicker the process

615
00:25:30,710 --> 00:25:36,559
will occur<font color="#CCCCCC"> so it's</font><font color="#E5E5E5"> basically nothing</font>

616
00:25:33,320 --> 00:25:39,379
<font color="#E5E5E5">more than</font><font color="#CCCCCC"> convert it into into bits and</font>

617
00:25:36,559 --> 00:25:41,330
divide<font color="#CCCCCC"> or eight or</font><font color="#E5E5E5"> convert convert the</font>

618
00:25:39,380 --> 00:25:45,020
bits and<font color="#E5E5E5"> device</font><font color="#CCCCCC"> so if you have a one</font>

619
00:25:41,330 --> 00:25:48,080
megabit link<font color="#E5E5E5"> that's actually</font><font color="#CCCCCC"> 125</font>

620
00:25:45,020 --> 00:25:49,520
kilobytes per second<font color="#E5E5E5"> and you're sending</font>

621
00:25:48,080 --> 00:25:54,049
a<font color="#E5E5E5"> 1500 byte packet</font>

622
00:25:49,520 --> 00:25:56,029
do the math<font color="#CCCCCC"> it's 0.01 two seconds or</font>

623
00:25:54,049 --> 00:26:01,520
<font color="#CCCCCC">twelve milliseconds of propagation</font><font color="#E5E5E5"> delay</font>

624
00:25:56,029 --> 00:26:03,860
across this one megabit link<font color="#CCCCCC"> like I</font><font color="#E5E5E5"> said</font>

625
00:26:01,520 --> 00:26:06,289
it you know moves as an<font color="#E5E5E5"> atomic unit so</font>

626
00:26:03,860 --> 00:26:09,500
every time you hit mostly this<font color="#E5E5E5"> is this</font>

627
00:26:06,289 --> 00:26:11,559
is<font color="#CCCCCC"> low-speed</font><font color="#E5E5E5"> devices</font><font color="#CCCCCC"> so on a you know</font>

628
00:26:09,500 --> 00:26:14,600
here's a here's a<font color="#E5E5E5"> table that shows</font><font color="#CCCCCC"> the</font>

629
00:26:11,559 --> 00:26:17,840
<font color="#CCCCCC">serialization delay fortunately what's</font>

630
00:26:14,600 --> 00:26:20,090
happened is the internet essentially

631
00:26:17,840 --> 00:26:22,668
transmits almost all<font color="#CCCCCC"> 1,500 byte packets</font>

632
00:26:20,090 --> 00:26:24,770
<font color="#CCCCCC">it was the the</font><font color="#E5E5E5"> max payload size for</font>

633
00:26:22,669 --> 00:26:26,720
Ethernet and<font color="#CCCCCC"> no-one's really</font><font color="#E5E5E5"> gotten</font>

634
00:26:24,770 --> 00:26:28,070
above that<font color="#CCCCCC"> there's jumbo frames out</font>

635
00:26:26,720 --> 00:26:29,649
there but they're not<font color="#E5E5E5"> widely</font><font color="#CCCCCC"> used</font>

636
00:26:28,070 --> 00:26:32,750
they're definitely not widely<font color="#E5E5E5"> supported</font>

637
00:26:29,649 --> 00:26:35,059
<font color="#E5E5E5">so typically what you've seen is you</font>

638
00:26:32,750 --> 00:26:36,980
know exponential increases in speed with

639
00:26:35,059 --> 00:26:38,779
the packet size staying the same<font color="#CCCCCC"> so the</font>

640
00:26:36,980 --> 00:26:40,309
serialization delay for modern

641
00:26:38,779 --> 00:26:44,029
<font color="#CCCCCC">high-speed networks has gone down</font><font color="#E5E5E5"> in</font>

642
00:26:40,309 --> 00:26:45,529
2.000 doesn't matter<font color="#E5E5E5"> milliseconds but if</font>

643
00:26:44,029 --> 00:26:47,630
you're<font color="#E5E5E5"> transmitting this over someone's</font>

644
00:26:45,529 --> 00:26:48,950
you know<font color="#CCCCCC"> one megabit</font><font color="#E5E5E5"> DSL</font><font color="#CCCCCC"> and you're</font>

645
00:26:47,630 --> 00:26:51,919
wondering<font color="#CCCCCC"> what</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> 12 millisecond delay</font>

646
00:26:48,950 --> 00:26:54,230
is<font color="#E5E5E5"> that's an important thing you're</font>

647
00:26:51,919 --> 00:26:56,210
gonna see and remember<font color="#CCCCCC"> also the</font>

648
00:26:54,230 --> 00:26:58,370
traceroute is using small packets it's

649
00:26:56,210 --> 00:27:00,679
using you know like 64 byte packets give

650
00:26:58,370 --> 00:27:02,779
or take depending on<font color="#E5E5E5"> implementation</font><font color="#CCCCCC"> but</font>

651
00:27:00,679 --> 00:27:05,590
you may see<font color="#CCCCCC"> four different levels of</font>

652
00:27:02,779 --> 00:27:08,179
performance different different results

653
00:27:05,590 --> 00:27:11,539
<font color="#CCCCCC">the next big one is queuing delay</font><font color="#E5E5E5"> that's</font>

654
00:27:08,179 --> 00:27:13,940
<font color="#CCCCCC">anytime the router is holding the packet</font>

655
00:27:11,539 --> 00:27:15,980
on<font color="#CCCCCC"> the router or switch</font><font color="#E5E5E5"> holding it in</font>

656
00:27:13,940 --> 00:27:18,890
its memory<font color="#E5E5E5"> waiting for an opportunity</font><font color="#CCCCCC"> to</font>

657
00:27:15,980 --> 00:27:20,270
transmit<font color="#E5E5E5"> and this is an important one to</font>

658
00:27:18,890 --> 00:27:22,130
<font color="#E5E5E5">point out because I think a lot</font><font color="#CCCCCC"> of</font>

659
00:27:20,270 --> 00:27:24,379
people<font color="#E5E5E5"> don't understand how queuing</font>

660
00:27:22,130 --> 00:27:25,700
works and why<font color="#E5E5E5"> queuing works and it's</font>

661
00:27:24,380 --> 00:27:27,950
very important when you<font color="#CCCCCC"> start dealing</font>

662
00:27:25,700 --> 00:27:30,529
<font color="#E5E5E5">with congested links and interpreting</font>

663
00:27:27,950 --> 00:27:33,140
<font color="#E5E5E5">tracer so first a quick word about</font>

664
00:27:30,529 --> 00:27:35,690
utilization<font color="#CCCCCC"> when someone says I'm</font><font color="#E5E5E5"> doing</font>

665
00:27:33,140 --> 00:27:37,130
<font color="#E5E5E5">five gigs on a 10 gig port I'm</font><font color="#CCCCCC"> 50</font>

666
00:27:35,690 --> 00:27:40,610
<font color="#CCCCCC">percent utilized that's actually not</font>

667
00:27:37,130 --> 00:27:42,500
true<font color="#E5E5E5"> at what they're saying is it's 50</font>

668
00:27:40,610 --> 00:27:44,080
percent utilized<font color="#E5E5E5"> over some period</font><font color="#CCCCCC"> of</font>

669
00:27:42,500 --> 00:27:45,970
time<font color="#E5E5E5"> so</font>

670
00:27:44,080 --> 00:27:47,439
it's over the period<font color="#CCCCCC"> of one second or</font>

671
00:27:45,970 --> 00:27:49,360
five minutes or<font color="#CCCCCC"> whatever the average</font><font color="#E5E5E5"> is</font>

672
00:27:47,440 --> 00:27:51,220
on their counter<font color="#CCCCCC"> but at any</font><font color="#E5E5E5"> given moment</font>

673
00:27:49,360 --> 00:27:53,469
<font color="#CCCCCC">an interface can either be transmitting</font>

674
00:27:51,220 --> 00:27:56,380
100% utilized or not transmitting not

675
00:27:53,470 --> 00:27:58,769
utilized<font color="#CCCCCC"> and so as the packet comes in</font>

676
00:27:56,380 --> 00:28:01,779
<font color="#E5E5E5">it says I want to go out this interface</font>

677
00:27:58,769 --> 00:28:03,039
is it used or not<font color="#E5E5E5"> if it's not used I can</font>

678
00:28:01,779 --> 00:28:04,840
immediately send it I have no need to

679
00:28:03,039 --> 00:28:06,399
<font color="#CCCCCC">queue anything if it</font><font color="#E5E5E5"> is in use if it's</font>

680
00:28:04,840 --> 00:28:09,039
still<font color="#E5E5E5"> transmitting the packet from the</font>

681
00:28:06,399 --> 00:28:10,658
the previous<font color="#E5E5E5"> packet then it has to hold</font>

682
00:28:09,039 --> 00:28:12,640
<font color="#CCCCCC">on</font><font color="#E5E5E5"> to it</font><font color="#CCCCCC"> and that's</font><font color="#E5E5E5"> just a basic</font>

683
00:28:10,659 --> 00:28:15,070
<font color="#E5E5E5">function of</font><font color="#CCCCCC"> routers so basically</font><font color="#E5E5E5"> some</font>

684
00:28:12,640 --> 00:28:19,000
<font color="#CCCCCC">queuing is going to be</font><font color="#E5E5E5"> necessary</font><font color="#CCCCCC"> all the</font>

685
00:28:15,070 --> 00:28:20,320
time for for every purpose<font color="#CCCCCC"> sometimes it</font>

686
00:28:19,000 --> 00:28:23,039
<font color="#E5E5E5">gets to be a little excessive but</font><font color="#CCCCCC"> again</font>

687
00:28:20,320 --> 00:28:27,039
into<font color="#E5E5E5"> that more detail later</font>

688
00:28:23,039 --> 00:28:28,990
so again when is<font color="#CCCCCC"> queuing good thing when</font>

689
00:28:27,039 --> 00:28:32,500
<font color="#E5E5E5">you have mismatched interface speeds so</font>

690
00:28:28,990 --> 00:28:36,100
if you have for example a<font color="#E5E5E5"> 10 GE client</font>

691
00:28:32,500 --> 00:28:38,409
feeding data up to<font color="#CCCCCC"> a</font><font color="#E5E5E5"> one gig transit</font>

692
00:28:36,100 --> 00:28:40,750
<font color="#E5E5E5">link or</font><font color="#CCCCCC"> pier or</font><font color="#E5E5E5"> something like that</font><font color="#CCCCCC"> even</font>

693
00:28:38,409 --> 00:28:43,659
<font color="#CCCCCC">if you're transmitting 500 megabits</font><font color="#E5E5E5"> even</font>

694
00:28:40,750 --> 00:28:46,419
if by all<font color="#E5E5E5"> by all means the data should</font>

695
00:28:43,659 --> 00:28:48,190
fit in the pipe<font color="#CCCCCC"> what actually happens is</font>

696
00:28:46,419 --> 00:28:50,409
<font color="#CCCCCC">because the</font><font color="#E5E5E5"> the link is faster because</font>

697
00:28:48,190 --> 00:28:52,659
the data serializes faster over the<font color="#E5E5E5"> 10</font>

698
00:28:50,409 --> 00:28:55,510
gig<font color="#E5E5E5"> because it comes in faster</font><font color="#CCCCCC"> the</font>

699
00:28:52,659 --> 00:28:56,889
packets arrive faster<font color="#CCCCCC"> then they can go</font>

700
00:28:55,510 --> 00:29:01,480
out<font color="#CCCCCC"> on that one gig link and so they</font>

701
00:28:56,889 --> 00:29:07,959
<font color="#E5E5E5">must be buffered typically you know you</font>

702
00:29:01,480 --> 00:29:09,820
see that<font color="#E5E5E5"> on oh yeah so so the purpose of</font>

703
00:29:07,960 --> 00:29:11,889
queuing queuing technically always

704
00:29:09,820 --> 00:29:14,320
increases throughput<font color="#E5E5E5"> the longer you hold</font>

705
00:29:11,889 --> 00:29:16,689
<font color="#E5E5E5">on to a packet the more opportunity</font><font color="#CCCCCC"> you</font>

706
00:29:14,320 --> 00:29:18,730
have<font color="#CCCCCC"> the transmitted</font><font color="#E5E5E5"> and what happens is</font>

707
00:29:16,690 --> 00:29:21,070
as you as you<font color="#E5E5E5"> become closer and closer</font>

708
00:29:18,730 --> 00:29:24,070
to being<font color="#CCCCCC"> full as a link gets to like 85</font>

709
00:29:21,070 --> 00:29:26,860
90<font color="#E5E5E5"> percent full on a you know second</font>

710
00:29:24,070 --> 00:29:28,299
average<font color="#E5E5E5"> what happens is the</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> amount</font>

711
00:29:26,860 --> 00:29:30,309
of<font color="#E5E5E5"> time</font><font color="#CCCCCC"> that the interface</font><font color="#E5E5E5"> is</font>

712
00:29:28,299 --> 00:29:32,350
transmitting<font color="#E5E5E5"> turns out to be very very</font>

713
00:29:30,309 --> 00:29:35,230
high and the the packet has to<font color="#E5E5E5"> get</font>

714
00:29:32,350 --> 00:29:37,209
queued a lot so you might have a packet

715
00:29:35,230 --> 00:29:39,309
<font color="#CCCCCC">that is perfectly</font><font color="#E5E5E5"> capable of being</font>

716
00:29:37,210 --> 00:29:44,590
transmitted it just has to<font color="#CCCCCC"> be held for</font>

717
00:29:39,309 --> 00:29:48,070
<font color="#E5E5E5">an extra</font><font color="#CCCCCC"> 5 milliseconds to get</font><font color="#E5E5E5"> you know</font>

718
00:29:44,590 --> 00:29:50,289
<font color="#E5E5E5">60 to 85 percent now maybe you have to</font>

719
00:29:48,070 --> 00:29:53,529
<font color="#E5E5E5">hold it</font><font color="#CCCCCC"> for an extra 500 milliseconds to</font>

720
00:29:50,289 --> 00:29:55,779
get<font color="#E5E5E5"> it from 90</font><font color="#CCCCCC"> to 95% and</font><font color="#E5E5E5"> the question</font>

721
00:29:53,529 --> 00:29:56,620
is is that<font color="#E5E5E5"> worth it maybe maybe not but</font>

722
00:29:55,779 --> 00:29:58,510
<font color="#CCCCCC">you need to</font>

723
00:29:56,620 --> 00:30:02,199
<font color="#CCCCCC">when that's occurring on the Internet</font><font color="#E5E5E5"> to</font>

724
00:29:58,510 --> 00:30:04,270
<font color="#E5E5E5">troubleshoot it in</font><font color="#CCCCCC"> traceroute when it's</font>

725
00:30:02,200 --> 00:30:07,179
a bad<font color="#CCCCCC"> thing like I</font><font color="#E5E5E5"> said as the interface</font>

726
00:30:04,270 --> 00:30:08,650
becomes more and more full<font color="#CCCCCC"> you're</font>

727
00:30:07,179 --> 00:30:10,720
spending more and more time<font color="#E5E5E5"> holding on</font>

728
00:30:08,650 --> 00:30:13,029
<font color="#E5E5E5">to this</font><font color="#CCCCCC"> packet</font><font color="#E5E5E5"> you hold on to it for 500</font>

729
00:30:10,720 --> 00:30:14,620
milliseconds looking for a chance to

730
00:30:13,029 --> 00:30:16,570
transmit it and<font color="#E5E5E5"> you very well might</font>

731
00:30:14,620 --> 00:30:18,158
<font color="#CCCCCC">right you might</font><font color="#E5E5E5"> not see packet loss but</font>

732
00:30:16,570 --> 00:30:19,658
<font color="#E5E5E5">that's where you start</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> see every</font>

733
00:30:18,159 --> 00:30:22,029
packet<font color="#CCCCCC"> that goes through the box or</font>

734
00:30:19,659 --> 00:30:24,940
almost every packet has this noticeable

735
00:30:22,029 --> 00:30:26,679
queuing delay behind us<font color="#E5E5E5"> but</font><font color="#CCCCCC"> beyond a</font>

736
00:30:24,940 --> 00:30:28,840
certain<font color="#E5E5E5"> point</font><font color="#CCCCCC"> you know did</font><font color="#E5E5E5"> you really</font>

737
00:30:26,679 --> 00:30:30,970
<font color="#E5E5E5">want to hold it</font><font color="#CCCCCC"> for an extra 5,000</font>

738
00:30:28,840 --> 00:30:34,120
milliseconds<font color="#E5E5E5"> just to get that packet</font>

739
00:30:30,970 --> 00:30:37,870
through from<font color="#CCCCCC"> 98% to 99%</font><font color="#E5E5E5"> probably not you</font>

740
00:30:34,120 --> 00:30:39,459
<font color="#E5E5E5">probably impacted the application</font><font color="#CCCCCC"> most</font>

741
00:30:37,870 --> 00:30:42,668
people tend<font color="#CCCCCC"> to see internet</font><font color="#E5E5E5"> mixed</font>

742
00:30:39,460 --> 00:30:44,950
<font color="#CCCCCC">traffic the reality be around 95 percent</font>

743
00:30:42,669 --> 00:30:49,299
<font color="#E5E5E5">as the the most they can get through</font>

744
00:30:44,950 --> 00:30:51,039
before<font color="#E5E5E5"> it starts to be really really bad</font>

745
00:30:49,299 --> 00:30:53,350
<font color="#E5E5E5">there's there's been some presentations</font>

746
00:30:51,039 --> 00:30:56,740
on buffer bloat<font color="#E5E5E5"> but what tends to happen</font>

747
00:30:53,350 --> 00:30:59,260
<font color="#E5E5E5">is</font><font color="#CCCCCC"> a lot</font><font color="#E5E5E5"> of routers especially carrier</font>

748
00:30:56,740 --> 00:31:01,029
designed routers routers meant to be

749
00:30:59,260 --> 00:31:04,600
bought<font color="#CCCCCC"> by carriers have been built with</font>

750
00:31:01,029 --> 00:31:06,399
<font color="#CCCCCC">very large buffers</font><font color="#E5E5E5"> way beyond</font><font color="#CCCCCC"> and in far</font>

751
00:31:04,600 --> 00:31:09,520
excessive what could possibly be needed

752
00:31:06,399 --> 00:31:11,289
for<font color="#E5E5E5"> a reality and so a lot of routers by</font>

753
00:31:09,520 --> 00:31:13,029
default<font color="#E5E5E5"> we're more than happy</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> hold on</font>

754
00:31:11,289 --> 00:31:15,250
<font color="#E5E5E5">to your packet for five thousand</font>

755
00:31:13,029 --> 00:31:17,200
milliseconds<font color="#E5E5E5"> to try and get it through</font>

756
00:31:15,250 --> 00:31:18,460
and unless you go configure that down

757
00:31:17,200 --> 00:31:19,690
and go configure your<font color="#CCCCCC"> queuing</font>

758
00:31:18,460 --> 00:31:21,990
differently<font color="#E5E5E5"> you'll still see that</font>

759
00:31:19,690 --> 00:31:24,630
<font color="#E5E5E5">behavior</font><font color="#CCCCCC"> a lot</font><font color="#E5E5E5"> on the</font><font color="#CCCCCC"> Internet</font>

760
00:31:21,990 --> 00:31:27,100
and the third form of<font color="#E5E5E5"> latency is</font>

761
00:31:24,630 --> 00:31:30,520
propagation<font color="#E5E5E5"> delay the the time spent on</font>

762
00:31:27,100 --> 00:31:32,139
<font color="#E5E5E5">the wire</font><font color="#CCCCCC"> so really the math here is is</font>

763
00:31:30,520 --> 00:31:32,440
pretty<font color="#E5E5E5"> straightforward</font><font color="#CCCCCC"> it's the speed of</font>

764
00:31:32,140 --> 00:31:34,600
light

765
00:31:32,440 --> 00:31:37,360
so if you want<font color="#E5E5E5"> to know how the math</font>

766
00:31:34,600 --> 00:31:41,139
works<font color="#CCCCCC"> for</font><font color="#E5E5E5"> fiber fibers is made of glass</font>

767
00:31:37,360 --> 00:31:43,178
<font color="#CCCCCC">I have a tutorial</font><font color="#E5E5E5"> on</font><font color="#CCCCCC"> that also</font><font color="#E5E5E5"> but it's</font>

768
00:31:41,140 --> 00:31:44,470
two forms of<font color="#E5E5E5"> glass it's a core and a</font>

769
00:31:43,179 --> 00:31:46,299
cladding<font color="#E5E5E5"> and what happens is they</font><font color="#CCCCCC"> have</font>

770
00:31:44,470 --> 00:31:48,190
<font color="#CCCCCC">different refraction indexes the light</font>

771
00:31:46,299 --> 00:31:49,779
hits it bounces back off the cladding

772
00:31:48,190 --> 00:31:52,500
stays in the core and<font color="#CCCCCC"> just propagates</font>

773
00:31:49,779 --> 00:31:55,870
along and it's propagating through glass

774
00:31:52,500 --> 00:31:59,350
with a refractive index<font color="#CCCCCC"> for fiber of</font>

775
00:31:55,870 --> 00:32:02,469
around<font color="#CCCCCC"> 1.4 eight so</font><font color="#E5E5E5"> that means it's</font>

776
00:31:59,350 --> 00:32:05,289
traveling at<font color="#E5E5E5"> about 0.67 see about 0.67</font>

777
00:32:02,470 --> 00:32:07,570
the speed of light so roughly 200,000

778
00:32:05,289 --> 00:32:08,980
<font color="#E5E5E5">kilometers per second is how fast it</font>

779
00:32:07,570 --> 00:32:11,590
moves<font color="#E5E5E5"> across the</font><font color="#CCCCCC"> wire</font>

780
00:32:08,980 --> 00:32:13,720
<font color="#E5E5E5">fiber</font><font color="#CCCCCC"> so two</font><font color="#E5E5E5"> hundred thousand kilometers</font>

781
00:32:11,590 --> 00:32:15,760
per second<font color="#E5E5E5"> you can turn it into two</font>

782
00:32:13,720 --> 00:32:18,400
hundred<font color="#CCCCCC"> kilometers or 125</font><font color="#E5E5E5"> miles per</font>

783
00:32:15,760 --> 00:32:21,100
millisecond<font color="#CCCCCC"> well simple</font><font color="#E5E5E5"> math and then</font>

784
00:32:18,400 --> 00:32:22,660
divide<font color="#CCCCCC"> by</font><font color="#E5E5E5"> two to take into</font><font color="#CCCCCC"> account the</font>

785
00:32:21,100 --> 00:32:25,149
<font color="#E5E5E5">round-trip</font><font color="#CCCCCC"> times</font><font color="#E5E5E5"> remember</font><font color="#CCCCCC"> trail just</font>

786
00:32:22,660 --> 00:32:27,460
<font color="#CCCCCC">showing you forward and backward</font><font color="#E5E5E5"> so as</font>

787
00:32:25,150 --> 00:32:29,230
an example<font color="#CCCCCC"> a round trip</font><font color="#E5E5E5"> around the</font>

788
00:32:27,460 --> 00:32:31,059
equator of<font color="#CCCCCC"> a perfectly straight fiber L</font>

789
00:32:29,230 --> 00:32:32,919
<font color="#CCCCCC">well the point</font><font color="#E5E5E5"> of that</font><font color="#CCCCCC"> V through a lot</font>

790
00:32:31,059 --> 00:32:36,309
<font color="#E5E5E5">of</font><font color="#CCCCCC"> ocean would take</font><font color="#E5E5E5"> 400 milliseconds</font>

791
00:32:32,919 --> 00:32:38,290
<font color="#E5E5E5">just from the speed of light delay so it</font>

792
00:32:36,309 --> 00:32:39,850
sometimes<font color="#E5E5E5"> gamers complain and they say I</font>

793
00:32:38,290 --> 00:32:45,159
<font color="#E5E5E5">want it to be faster</font><font color="#CCCCCC"> and you say take it</font>

794
00:32:39,850 --> 00:32:47,080
up with God so then the<font color="#CCCCCC"> question</font><font color="#E5E5E5"> becomes</font>

795
00:32:45,160 --> 00:32:48,790
how do you identify<font color="#E5E5E5"> what latency is</font>

796
00:32:47,080 --> 00:32:51,159
affecting you

797
00:32:48,790 --> 00:32:53,500
you start by looking<font color="#E5E5E5"> at location</font>

798
00:32:51,160 --> 00:32:57,070
identifiers you look to see if the

799
00:32:53,500 --> 00:32:58,750
routing is as expected<font color="#E5E5E5"> and and if it</font>

800
00:32:57,070 --> 00:33:02,830
<font color="#E5E5E5">fits in the propagation delay so here's</font>

801
00:32:58,750 --> 00:33:06,309
an<font color="#CCCCCC"> example of something going from NYC</font>

802
00:33:02,830 --> 00:33:08,470
<font color="#E5E5E5">New York to</font><font color="#CCCCCC"> LA char of</font><font color="#E5E5E5"> London</font><font color="#CCCCCC"> so there's</font>

803
00:33:06,309 --> 00:33:10,899
a difference of<font color="#CCCCCC"> 67 point 6 milliseconds</font>

804
00:33:08,470 --> 00:33:13,960
<font color="#E5E5E5">and that happens to be 4200 mile route</font>

805
00:33:10,900 --> 00:33:16,330
it sounds about right actually it's

806
00:33:13,960 --> 00:33:19,059
another<font color="#E5E5E5"> example where you</font><font color="#CCCCCC"> see the</font>

807
00:33:16,330 --> 00:33:23,980
latency shoot up<font color="#E5E5E5"> from you know you've</font>

808
00:33:19,059 --> 00:33:27,970
got<font color="#CCCCCC"> WDC on</font><font color="#E5E5E5"> hop</font><font color="#CCCCCC"> 7 here 80</font><font color="#E5E5E5"> and you're</font>

809
00:33:23,980 --> 00:33:30,700
still an<font color="#CCCCCC"> AED that's also DC</font><font color="#E5E5E5"> and hop 9</font>

810
00:33:27,970 --> 00:33:33,669
<font color="#CCCCCC">and yet the latency is</font><font color="#E5E5E5"> shot up 220</font>

811
00:33:30,700 --> 00:33:36,130
milliseconds that's<font color="#E5E5E5"> probably not speed</font>

812
00:33:33,669 --> 00:33:37,900
of light related<font color="#E5E5E5"> and the other thing to</font>

813
00:33:36,130 --> 00:33:40,570
<font color="#E5E5E5">remember is no</font><font color="#CCCCCC"> 1 laser</font><font color="#E5E5E5"> fiber out</font>

814
00:33:37,900 --> 00:33:42,940
<font color="#E5E5E5">straight people tend to run their fiber</font>

815
00:33:40,570 --> 00:33:45,129
on paths to go to major<font color="#E5E5E5"> cities</font><font color="#CCCCCC"> and</font>

816
00:33:42,940 --> 00:33:47,559
populations<font color="#CCCCCC"> and</font><font color="#E5E5E5"> so it will never be as</font>

817
00:33:45,130 --> 00:33:50,679
perfect as a perfect scenario<font color="#E5E5E5"> you've got</font>

818
00:33:47,559 --> 00:33:52,090
repeaters region<font color="#CCCCCC"> if the slack loops the</font>

819
00:33:50,679 --> 00:33:54,610
<font color="#CCCCCC">Fiber goes</font><font color="#E5E5E5"> through all these different</font>

820
00:33:52,090 --> 00:33:56,860
different places<font color="#CCCCCC"> but</font><font color="#E5E5E5"> this gives you at</font>

821
00:33:54,610 --> 00:33:58,600
least a ballpark of doing the math<font color="#CCCCCC"> and</font>

822
00:33:56,860 --> 00:34:02,949
seeing does this make sense<font color="#CCCCCC"> for the</font>

823
00:33:58,600 --> 00:34:04,418
latency that<font color="#E5E5E5"> I'm seeing so the next big</font>

824
00:34:02,950 --> 00:34:07,330
thing we get into and we're interpreting

825
00:34:04,419 --> 00:34:10,000
traceroute results is prioritization and

826
00:34:07,330 --> 00:34:13,330
rate limiting<font color="#E5E5E5"> and remember that I said</font>

827
00:34:10,000 --> 00:34:15,100
<font color="#E5E5E5">the traceroute latency is the sum of the</font>

828
00:34:13,330 --> 00:34:18,129
time that takes<font color="#CCCCCC"> for the pro packet to go</font>

829
00:34:15,100 --> 00:34:21,460
out the time required for<font color="#E5E5E5"> the router to</font>

830
00:34:18,129 --> 00:34:23,409
drop that packet and send<font color="#E5E5E5"> back its ICMP</font>

831
00:34:21,460 --> 00:34:25,570
the time for that ICMP to get all the

832
00:34:23,409 --> 00:34:27,820
way back<font color="#CCCCCC"> to the source</font><font color="#E5E5E5"> so numbers 1 & 3</font>

833
00:34:25,570 --> 00:34:29,440
<font color="#CCCCCC">are real</font><font color="#E5E5E5"> network characteristics</font><font color="#CCCCCC"> that</font>

834
00:34:27,820 --> 00:34:31,450
<font color="#CCCCCC">affect real</font><font color="#E5E5E5"> packets including things</font>

835
00:34:29,440 --> 00:34:33,639
<font color="#E5E5E5">that are not tracer on packets number 2</font>

836
00:34:31,449 --> 00:34:36,009
on the<font color="#CCCCCC"> other hand is</font><font color="#E5E5E5"> only affecting</font>

837
00:34:33,639 --> 00:34:38,050
<font color="#CCCCCC">trace route packets this</font><font color="#E5E5E5"> is a</font><font color="#CCCCCC"> behavior</font>

838
00:34:36,010 --> 00:34:40,000
that<font color="#CCCCCC"> the router typically turns out</font><font color="#E5E5E5"> not</font>

839
00:34:38,050 --> 00:34:43,810
<font color="#CCCCCC">to be very good at doing I get into that</font>

840
00:34:40,000 --> 00:34:46,510
<font color="#CCCCCC">in more detail but number 2 if there's</font>

841
00:34:43,810 --> 00:34:49,179
any type of delay in the routers ability

842
00:34:46,510 --> 00:34:51,970
to<font color="#E5E5E5"> drop the packet generate an ICMP and</font>

843
00:34:49,179 --> 00:34:53,800
send it out<font color="#CCCCCC"> that's</font><font color="#E5E5E5"> going to cause</font><font color="#CCCCCC"> tracer</font>

844
00:34:51,969 --> 00:34:56,049
<font color="#CCCCCC">out to look</font><font color="#E5E5E5"> bad</font><font color="#CCCCCC"> even though</font><font color="#E5E5E5"> network</font>

845
00:34:53,800 --> 00:34:59,530
<font color="#CCCCCC">performance is fine</font><font color="#E5E5E5"> so there's a lot of</font>

846
00:34:56,050 --> 00:35:02,260
conditions that<font color="#CCCCCC"> cause this</font><font color="#E5E5E5"> you can hit</font>

847
00:34:59,530 --> 00:35:05,080
hit rate limits on<font color="#E5E5E5"> your generation of</font>

848
00:35:02,260 --> 00:35:05,440
your ICMP message causing artificial

849
00:35:05,080 --> 00:35:06,609
loss

850
00:35:05,440 --> 00:35:07,810
so you'll see<font color="#E5E5E5"> loss in the middle of a</font>

851
00:35:06,609 --> 00:35:09,490
trace route and you'll think<font color="#E5E5E5"> that</font>

852
00:35:07,810 --> 00:35:12,310
there's a problem<font color="#E5E5E5"> and there might not</font><font color="#CCCCCC"> be</font>

853
00:35:09,490 --> 00:35:13,930
<font color="#E5E5E5">and the router can be slow</font><font color="#CCCCCC"> on the</font>

854
00:35:12,310 --> 00:35:18,490
<font color="#E5E5E5">generation and that causes artificial</font>

855
00:35:13,930 --> 00:35:22,890
latency so to understand<font color="#E5E5E5"> that we have to</font>

856
00:35:18,490 --> 00:35:22,890
talk<font color="#E5E5E5"> about the</font><font color="#CCCCCC"> architecture of a router</font>

857
00:35:30,520 --> 00:35:36,380
so modern routers have distinct

858
00:35:34,640 --> 00:35:38,210
forbidding paths the different ways that

859
00:35:36,380 --> 00:35:40,730
<font color="#E5E5E5">packets get handled as they they go</font>

860
00:35:38,210 --> 00:35:42,619
through the<font color="#E5E5E5"> box so the data plane is</font>

861
00:35:40,730 --> 00:35:44,450
what it's<font color="#E5E5E5"> called when the packets are</font>

862
00:35:42,619 --> 00:35:45,680
going<font color="#E5E5E5"> through a router the router is</font>

863
00:35:44,450 --> 00:35:47,089
doing its job<font color="#E5E5E5"> its routing you know</font>

864
00:35:45,680 --> 00:35:49,790
<font color="#E5E5E5">millions of packets per second from</font>

865
00:35:47,090 --> 00:35:52,490
point A to point B<font color="#E5E5E5"> its shipping</font><font color="#CCCCCC"> at via</font>

866
00:35:49,790 --> 00:35:54,500
the data<font color="#E5E5E5"> plane</font><font color="#CCCCCC"> and even inside</font><font color="#E5E5E5"> of a data</font>

867
00:35:52,490 --> 00:35:57,290
plane<font color="#E5E5E5"> even inside</font><font color="#CCCCCC"> of a modern</font><font color="#E5E5E5"> box fully</font>

868
00:35:54,500 --> 00:35:59,390
ASIC<font color="#E5E5E5"> enabled doing millions and millions</font>

869
00:35:57,290 --> 00:36:01,670
of packets per second<font color="#CCCCCC"> there's a fast</font>

870
00:35:59,390 --> 00:36:04,069
path and a slow path<font color="#E5E5E5"> the fast path is</font>

871
00:36:01,670 --> 00:36:06,230
anything that<font color="#E5E5E5"> can be handled well in</font>

872
00:36:04,070 --> 00:36:08,570
<font color="#E5E5E5">hardware it's the ordinary shipping of</font>

873
00:36:06,230 --> 00:36:10,460
packets and the slow path is anything

874
00:36:08,570 --> 00:36:12,260
<font color="#E5E5E5">that's an exception packet so those</font>

875
00:36:10,460 --> 00:36:15,140
examples<font color="#E5E5E5"> of</font><font color="#CCCCCC"> things</font><font color="#E5E5E5"> that cause exception</font>

876
00:36:12,260 --> 00:36:16,910
packets if you have IP options on the

877
00:36:15,140 --> 00:36:19,640
<font color="#CCCCCC">Box</font><font color="#E5E5E5"> if</font><font color="#CCCCCC"> you're</font><font color="#E5E5E5"> trying to do you know</font>

878
00:36:16,910 --> 00:36:22,160
<font color="#E5E5E5">source routing through IP options</font><font color="#CCCCCC"> if you</font>

879
00:36:19,640 --> 00:36:24,080
require ICMP generation<font color="#E5E5E5"> so that's the</font>

880
00:36:22,160 --> 00:36:26,200
important<font color="#CCCCCC"> one for</font><font color="#E5E5E5"> trail</font><font color="#CCCCCC"> if you have the</font>

881
00:36:24,080 --> 00:36:28,160
<font color="#CCCCCC">BOK</font><font color="#E5E5E5"> box configured to do logging</font>

882
00:36:26,200 --> 00:36:30,980
<font color="#CCCCCC">anything like that</font><font color="#E5E5E5"> what tends to happen</font>

883
00:36:28,160 --> 00:36:33,230
is the packet actually gets punted<font color="#E5E5E5"> to a</font>

884
00:36:30,980 --> 00:36:34,790
<font color="#CCCCCC">cpu</font><font color="#E5E5E5"> to handle this stuff</font><font color="#CCCCCC"> this is you</font>

885
00:36:33,230 --> 00:36:38,119
know stuff<font color="#CCCCCC"> that's relatively</font><font color="#E5E5E5"> complicated</font>

886
00:36:34,790 --> 00:36:40,250
and isn't<font color="#E5E5E5"> just as simple as look up an</font>

887
00:36:38,119 --> 00:36:43,130
IP<font color="#CCCCCC"> address and a table figure out</font><font color="#E5E5E5"> a next</font>

888
00:36:40,250 --> 00:36:45,650
<font color="#CCCCCC">hop</font><font color="#E5E5E5"> interface and ship</font><font color="#CCCCCC"> it and so even on</font>

889
00:36:43,130 --> 00:36:47,180
a modern box<font color="#E5E5E5"> all of these boxes with</font>

890
00:36:45,650 --> 00:36:49,369
<font color="#E5E5E5">their very high end line cards have a</font>

891
00:36:47,180 --> 00:36:51,500
little<font color="#E5E5E5"> CPU sitting on</font><font color="#CCCCCC"> every one and it's</font>

892
00:36:49,369 --> 00:36:54,440
<font color="#E5E5E5">doing this type of stuff</font><font color="#CCCCCC"> and then the</font>

893
00:36:51,500 --> 00:36:57,200
control plane is the packets that<font color="#CCCCCC"> are</font>

894
00:36:54,440 --> 00:36:59,780
<font color="#CCCCCC">going</font><font color="#E5E5E5"> to the router</font><font color="#CCCCCC"> these are control</font>

895
00:36:57,200 --> 00:37:02,930
protocols so your BGP your is is in your

896
00:36:59,780 --> 00:37:05,359
<font color="#CCCCCC">OSPF your SNMP packets your CLI</font><font color="#E5E5E5"> XS when</font>

897
00:37:02,930 --> 00:37:08,560
you're logged<font color="#CCCCCC"> onto</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> Box</font><font color="#E5E5E5"> all your your</font>

898
00:37:05,359 --> 00:37:11,960
<font color="#CCCCCC">SSH and telnet stuff is going there</font>

899
00:37:08,560 --> 00:37:14,750
<font color="#CCCCCC">anytime you ping the router directly any</font>

900
00:37:11,960 --> 00:37:17,030
<font color="#CCCCCC">time the router is doing</font><font color="#E5E5E5"> ARP</font><font color="#CCCCCC"> so every</font>

901
00:37:14,750 --> 00:37:19,310
default gateway every dot one every time

902
00:37:17,030 --> 00:37:21,430
<font color="#E5E5E5">you type IP address blah</font><font color="#CCCCCC"> that's an entry</font>

903
00:37:19,310 --> 00:37:25,029
<font color="#CCCCCC">point to the control plane on the router</font>

904
00:37:21,430 --> 00:37:28,609
<font color="#CCCCCC">and</font><font color="#E5E5E5"> a lot of router CPUs out there are</font>

905
00:37:25,030 --> 00:37:31,220
horribly horribly underpowered<font color="#CCCCCC"> so this</font>

906
00:37:28,609 --> 00:37:33,140
is not uncommon<font color="#E5E5E5"> to this day to see very</font>

907
00:37:31,220 --> 00:37:36,319
<font color="#CCCCCC">high end you</font><font color="#E5E5E5"> know multi hundred gigabit</font>

908
00:37:33,140 --> 00:37:39,890
devices with an old 600 megahertz MIPS

909
00:37:36,320 --> 00:37:43,430
or PowerPC CPU

910
00:37:39,890 --> 00:37:45,650
and typically even<font color="#E5E5E5"> the best highest</font>

911
00:37:43,430 --> 00:37:47,299
<font color="#CCCCCC">inbox</font><font color="#E5E5E5"> what the newest rallying engine is</font>

912
00:37:45,650 --> 00:37:49,310
going to be three to four years behind

913
00:37:47,300 --> 00:37:51,020
whatever's available out there for<font color="#E5E5E5"> PC</font>

914
00:37:49,310 --> 00:37:52,970
because people are building<font color="#E5E5E5"> these as</font>

915
00:37:51,020 --> 00:37:54,650
industrial<font color="#E5E5E5"> applications hardened against</font>

916
00:37:52,970 --> 00:37:55,910
temperature and you know they're slow to

917
00:37:54,650 --> 00:37:58,010
ship new ones

918
00:37:55,910 --> 00:38:00,080
and remember ICMP generation is not

919
00:37:58,010 --> 00:38:02,060
really a priority<font color="#E5E5E5"> for the router that's</font>

920
00:38:00,080 --> 00:38:05,380
a that's a nice to have<font color="#E5E5E5"> but ICMP</font>

921
00:38:02,060 --> 00:38:09,020
generation<font color="#E5E5E5"> doesn't make the packets flow</font>

922
00:38:05,380 --> 00:38:12,110
<font color="#CCCCCC">so on a lot of boxes out there</font><font color="#E5E5E5"> like old</font>

923
00:38:09,020 --> 00:38:15,530
Cisco IOS boxes<font color="#CCCCCC"> there</font><font color="#E5E5E5"> is an infamous</font>

924
00:38:12,110 --> 00:38:18,560
process called BGP scanner<font color="#E5E5E5"> and the way</font>

925
00:38:15,530 --> 00:38:20,720
that iOS works is every 60<font color="#E5E5E5"> seconds it</font>

926
00:38:18,560 --> 00:38:21,830
has<font color="#CCCCCC"> a</font><font color="#E5E5E5"> little process that walks down the</font>

927
00:38:20,720 --> 00:38:23,149
routing table and checks to<font color="#CCCCCC"> make sure</font>

928
00:38:21,830 --> 00:38:26,690
all the routes<font color="#E5E5E5"> are still valid and pulls</font>

929
00:38:23,150 --> 00:38:29,450
things that<font color="#E5E5E5"> doesn't basically the the</font>

930
00:38:26,690 --> 00:38:31,970
symptom here is on some platforms<font color="#E5E5E5"> the</font>

931
00:38:29,450 --> 00:38:33,710
slow path<font color="#E5E5E5"> data plane the the the stuff</font>

932
00:38:31,970 --> 00:38:35,330
that is doing the exception generation

933
00:38:33,710 --> 00:38:38,660
for I<font color="#E5E5E5"> just dropped the packet now I need</font>

934
00:38:35,330 --> 00:38:41,210
to send<font color="#E5E5E5"> an ICMP</font><font color="#CCCCCC"> is shared with the</font>

935
00:38:38,660 --> 00:38:44,660
<font color="#E5E5E5">control plane so you tend to see</font><font color="#CCCCCC"> things</font>

936
00:38:41,210 --> 00:38:46,400
like<font color="#E5E5E5"> someone turns BGP</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> all of a</font>

937
00:38:44,660 --> 00:38:47,980
<font color="#CCCCCC">sudden you give a traceroute</font><font color="#E5E5E5"> spike</font>

938
00:38:46,400 --> 00:38:50,240
it can even<font color="#E5E5E5"> be something as simple as</font>

939
00:38:47,980 --> 00:38:53,240
someone from your<font color="#E5E5E5"> NOC logs into</font><font color="#CCCCCC"> a box</font>

940
00:38:50,240 --> 00:38:56,089
and types of<font color="#E5E5E5"> big expensive command and</font>

941
00:38:53,240 --> 00:38:59,720
the<font color="#CCCCCC"> box is calculating it and traceroute</font>

942
00:38:56,090 --> 00:39:01,400
latency spikes<font color="#CCCCCC"> that's typically not</font>

943
00:38:59,720 --> 00:39:03,830
found on a lot<font color="#E5E5E5"> of the</font><font color="#CCCCCC"> higher-end box's</font>

944
00:39:01,400 --> 00:39:06,620
they'll have a dedicated control plane

945
00:39:03,830 --> 00:39:08,779
and<font color="#E5E5E5"> slow path data plane but even on</font>

946
00:39:06,620 --> 00:39:11,029
<font color="#E5E5E5">things like 6500</font><font color="#CCCCCC"> 9s which are</font><font color="#E5E5E5"> still</font>

947
00:39:08,780 --> 00:39:12,920
hideously common it's it's the same

948
00:39:11,030 --> 00:39:14,150
resource it's the same CPU that's<font color="#E5E5E5"> doing</font>

949
00:39:12,920 --> 00:39:16,610
it and so if it's busy doing one thing

950
00:39:14,150 --> 00:39:18,740
<font color="#CCCCCC">it's</font><font color="#E5E5E5"> not doing the</font><font color="#CCCCCC"> other so the most</font>

951
00:39:16,610 --> 00:39:21,050
famous<font color="#E5E5E5"> example of this is the the old</font>

952
00:39:18,740 --> 00:39:22,520
Cisco IOS<font color="#CCCCCC"> BGP scanner</font><font color="#E5E5E5"> every 60 seconds</font>

953
00:39:21,050 --> 00:39:26,810
you see<font color="#CCCCCC"> it's spiking traceroute</font><font color="#E5E5E5"> and you</font>

954
00:39:22,520 --> 00:39:30,650
have no idea<font color="#CCCCCC"> why the other big one again</font>

955
00:39:26,810 --> 00:39:32,690
is rate limited ICMP generation<font color="#E5E5E5"> even</font><font color="#CCCCCC"> in</font>

956
00:39:30,650 --> 00:39:34,880
the the<font color="#CCCCCC"> slow path data plane operation</font>

957
00:39:32,690 --> 00:39:38,120
there are many reasons<font color="#CCCCCC"> for</font><font color="#E5E5E5"> an ICMP</font>

958
00:39:34,880 --> 00:39:41,120
generation<font color="#CCCCCC"> besides TTL exceed there's</font>

959
00:39:38,120 --> 00:39:42,890
lots of everything from destination

960
00:39:41,120 --> 00:39:45,830
unreachable because the route didn't

961
00:39:42,890 --> 00:39:49,350
exist<font color="#CCCCCC"> because you're going to a host</font>

962
00:39:45,830 --> 00:39:51,960
where<font color="#CCCCCC"> ARP hasn't been resolved yet too</font>

963
00:39:49,350 --> 00:39:54,990
pack it<font color="#CCCCCC"> too big there's there's</font><font color="#E5E5E5"> dozens</font>

964
00:39:51,960 --> 00:39:56,790
and dozens of reasons<font color="#E5E5E5"> why and I pack it</font>

965
00:39:54,990 --> 00:39:58,979
<font color="#E5E5E5">would get dropped or an ICMP message</font>

966
00:39:56,790 --> 00:40:00,870
<font color="#E5E5E5">would need to get generated and there's</font>

967
00:39:58,980 --> 00:40:03,750
no such thing out there as a traceroute

968
00:40:00,870 --> 00:40:06,000
<font color="#E5E5E5">ace it could be nice</font><font color="#CCCCCC"> no one's done</font><font color="#E5E5E5"> it no</font>

969
00:40:03,750 --> 00:40:07,860
one's put any any effort into<font color="#E5E5E5"> making it</font>

970
00:40:06,000 --> 00:40:10,800
really faster<font color="#E5E5E5"> so you've got a general</font>

971
00:40:07,860 --> 00:40:13,470
<font color="#CCCCCC">purpose</font><font color="#E5E5E5"> CPU that's generating ICMP as a</font>

972
00:40:10,800 --> 00:40:15,960
not critical function and the routers

973
00:40:13,470 --> 00:40:19,470
are typically<font color="#E5E5E5"> they have two choices you</font>

974
00:40:15,960 --> 00:40:19,800
<font color="#E5E5E5">can either process</font><font color="#CCCCCC"> all the ICMP as best</font>

975
00:40:19,470 --> 00:40:21,270
you can

976
00:40:19,800 --> 00:40:23,510
<font color="#CCCCCC">until</font><font color="#E5E5E5"> it takes down your other services</font>

977
00:40:21,270 --> 00:40:26,310
which is bad or you<font color="#E5E5E5"> can rate limit them</font>

978
00:40:23,510 --> 00:40:29,220
and try not<font color="#E5E5E5"> to take down those services</font>

979
00:40:26,310 --> 00:40:31,770
but<font color="#CCCCCC"> effect traceroute so remember it's</font>

980
00:40:29,220 --> 00:40:34,200
actually relatively<font color="#E5E5E5"> easy to cause a TTL</font>

981
00:40:31,770 --> 00:40:36,660
zero denial of service<font color="#E5E5E5"> it's as something</font>

982
00:40:34,200 --> 00:40:39,359
as simple as<font color="#E5E5E5"> a routing loop you turn up</font>

983
00:40:36,660 --> 00:40:40,529
a customer<font color="#E5E5E5"> you assign</font><font color="#CCCCCC"> them as slash 24</font>

984
00:40:39,360 --> 00:40:42,000
you route it<font color="#E5E5E5"> to them they haven't</font>

985
00:40:40,530 --> 00:40:43,110
<font color="#CCCCCC">actually</font><font color="#E5E5E5"> installed it on their router</font>

986
00:40:42,000 --> 00:40:44,460
you<font color="#CCCCCC"> ought to have a default pointing</font>

987
00:40:43,110 --> 00:40:46,740
back to you you just<font color="#E5E5E5"> created a routing</font>

988
00:40:44,460 --> 00:40:48,510
loop<font color="#E5E5E5"> some worm on the internet sends one</font>

989
00:40:46,740 --> 00:40:52,020
packet<font color="#E5E5E5"> it loops between the two of you</font>

990
00:40:48,510 --> 00:40:56,280
forever<font color="#CCCCCC"> and every time that that TTL</font>

991
00:40:52,020 --> 00:40:58,050
<font color="#E5E5E5">zero is hit it's it's generating ICMP so</font>

992
00:40:56,280 --> 00:40:59,670
if there wasn't a rate limit this would

993
00:40:58,050 --> 00:41:03,600
<font color="#CCCCCC">actually be a big denial of service</font>

994
00:40:59,670 --> 00:41:05,280
vector for routers so most<font color="#E5E5E5"> routers are</font>

995
00:41:03,600 --> 00:41:07,980
<font color="#CCCCCC">gonna put an</font><font color="#E5E5E5"> artificial rate limit on</font>

996
00:41:05,280 --> 00:41:10,350
this<font color="#CCCCCC"> and the</font><font color="#E5E5E5"> reality of this is the rate</font>

997
00:41:07,980 --> 00:41:12,630
limits<font color="#E5E5E5"> tend to vary wildly not only by</font>

998
00:41:10,350 --> 00:41:15,210
vendor by platform by software revision

999
00:41:12,630 --> 00:41:17,340
by individual line cards by models of

1000
00:41:15,210 --> 00:41:19,230
line cards and<font color="#CCCCCC"> a lot of</font><font color="#E5E5E5"> cases they're</font>

1001
00:41:17,340 --> 00:41:20,490
<font color="#CCCCCC">not easily configured log you have no</font>

1002
00:41:19,230 --> 00:41:22,560
idea if you're<font color="#CCCCCC"> heading them and you have</font>

1003
00:41:20,490 --> 00:41:27,270
no idea<font color="#CCCCCC"> if you've hit them on FPC 7 but</font>

1004
00:41:22,560 --> 00:41:29,009
FPC<font color="#CCCCCC"> 8</font><font color="#E5E5E5"> fine and all it takes is you know</font>

1005
00:41:27,270 --> 00:41:31,440
one of the common trail tools out there

1006
00:41:29,010 --> 00:41:33,930
<font color="#E5E5E5">that</font><font color="#CCCCCC"> does repetitive</font><font color="#E5E5E5"> tracer all over and</font>

1007
00:41:31,440 --> 00:41:36,300
<font color="#E5E5E5">over and</font><font color="#CCCCCC"> over</font><font color="#E5E5E5"> as MTR and people will</font>

1008
00:41:33,930 --> 00:41:37,350
look<font color="#CCCCCC"> up very thin TRS left it</font><font color="#E5E5E5"> running</font>

1009
00:41:36,300 --> 00:41:38,730
for<font color="#E5E5E5"> six hours and it's been sitting</font>

1010
00:41:37,350 --> 00:41:40,770
<font color="#CCCCCC">there sending traceroute packets over</font>

1011
00:41:38,730 --> 00:41:42,270
<font color="#E5E5E5">and over you get a couple users doing</font>

1012
00:41:40,770 --> 00:41:46,650
<font color="#E5E5E5">that and all of</font><font color="#CCCCCC"> a sudden</font><font color="#E5E5E5"> you start</font><font color="#CCCCCC"> to</font>

1013
00:41:42,270 --> 00:41:48,720
<font color="#E5E5E5">hit some of these</font><font color="#CCCCCC"> baked-in limits so you</font>

1014
00:41:46,650 --> 00:41:50,730
<font color="#CCCCCC">need to figure</font><font color="#E5E5E5"> out how you can tell the</font>

1015
00:41:48,720 --> 00:41:52,500
<font color="#E5E5E5">difference between the cosmetic loss and</font>

1016
00:41:50,730 --> 00:41:55,170
latency<font color="#E5E5E5"> the things that are just</font><font color="#CCCCCC"> tracy</font>

1017
00:41:52,500 --> 00:41:58,500
are all specific<font color="#E5E5E5"> and the</font><font color="#CCCCCC"> things</font><font color="#E5E5E5"> that are</font>

1018
00:41:55,170 --> 00:42:01,260
<font color="#E5E5E5">actual forwarding issues and the secret</font>

1019
00:41:58,500 --> 00:42:02,880
to<font color="#CCCCCC"> that is if it's an actual forwarding</font>

1020
00:42:01,260 --> 00:42:05,640
issue the loss or<font color="#E5E5E5"> the latency</font>

1021
00:42:02,880 --> 00:42:09,089
will persist across<font color="#E5E5E5"> all future hops so</font>

1022
00:42:05,640 --> 00:42:10,558
here's an example hop<font color="#CCCCCC"> two you see 18</font>

1023
00:42:09,089 --> 00:42:11,819
milliseconds<font color="#E5E5E5"> 80 milliseconds 60</font>

1024
00:42:10,559 --> 00:42:14,730
<font color="#E5E5E5">milliseconds oh no the</font><font color="#CCCCCC"> world's ending</font>

1025
00:42:11,819 --> 00:42:17,519
<font color="#E5E5E5">well actually not because and it goes</font>

1026
00:42:14,730 --> 00:42:20,160
away in hop<font color="#CCCCCC"> three so that means that was</font>

1027
00:42:17,519 --> 00:42:22,799
purely a<font color="#CCCCCC"> function of the</font><font color="#E5E5E5"> ICMP generation</font>

1028
00:42:20,160 --> 00:42:24,598
<font color="#E5E5E5">if it was affecting all packets you</font>

1029
00:42:22,799 --> 00:42:26,788
would see at least 60 milliseconds or

1030
00:42:24,599 --> 00:42:28,289
more<font color="#E5E5E5"> persist</font><font color="#CCCCCC"> all the way through in the</font>

1031
00:42:26,789 --> 00:42:30,720
<font color="#E5E5E5">next hop sometimes you need</font><font color="#CCCCCC"> more probes</font>

1032
00:42:28,289 --> 00:42:31,980
<font color="#E5E5E5">to figure that</font><font color="#CCCCCC"> out</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> sure but</font><font color="#E5E5E5"> if you</font>

1033
00:42:30,720 --> 00:42:33,379
see latency<font color="#E5E5E5"> spike in the middle</font><font color="#CCCCCC"> of a</font>

1034
00:42:31,980 --> 00:42:36,150
trace route it means absolutely<font color="#CCCCCC"> nothing</font>

1035
00:42:33,380 --> 00:42:37,769
<font color="#CCCCCC">if you see</font><font color="#E5E5E5"> lost in the middle of the</font>

1036
00:42:36,150 --> 00:42:39,930
trace route<font color="#E5E5E5"> it usually means absolutely</font>

1037
00:42:37,769 --> 00:42:41,939
nothing<font color="#CCCCCC"> but</font><font color="#E5E5E5"> those are again</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> huge</font>

1038
00:42:39,930 --> 00:42:43,589
source of people opening<font color="#E5E5E5"> trace route</font>

1039
00:42:41,940 --> 00:42:46,289
<font color="#E5E5E5">based tickets I saw a drop somewhere in</font>

1040
00:42:43,589 --> 00:42:48,089
the middle<font color="#E5E5E5"> that</font><font color="#CCCCCC"> didn't mean</font><font color="#E5E5E5"> anything</font><font color="#CCCCCC"> at</font>

1041
00:42:46,289 --> 00:42:49,829
worst it could<font color="#E5E5E5"> be the</font><font color="#CCCCCC"> result of an</font>

1042
00:42:48,089 --> 00:42:51,990
asymmetric path it just it took<font color="#E5E5E5"> a</font>

1043
00:42:49,829 --> 00:42:54,599
different<font color="#E5E5E5"> path to come back and it</font>

1044
00:42:51,990 --> 00:42:56,368
<font color="#E5E5E5">doesn't really matter</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> more</font><font color="#CCCCCC"> often</font>

1045
00:42:54,599 --> 00:42:58,230
<font color="#E5E5E5">than that it's it's an indication of</font>

1046
00:42:56,369 --> 00:43:01,440
just artificial<font color="#CCCCCC"> rate limiting you you</font>

1047
00:42:58,230 --> 00:43:03,059
see a delay like that<font color="#E5E5E5"> or the box was</font>

1048
00:43:01,440 --> 00:43:06,480
busy<font color="#CCCCCC"> on that</font><font color="#E5E5E5"> particular control plane</font><font color="#CCCCCC"> at</font>

1049
00:43:03,059 --> 00:43:08,400
that particular<font color="#CCCCCC"> time so it's a good way</font>

1050
00:43:06,480 --> 00:43:10,049
<font color="#CCCCCC">to test that is if you're if you're</font><font color="#E5E5E5"> very</font>

1051
00:43:08,400 --> 00:43:11,369
concerned if you<font color="#E5E5E5"> think that maybe</font>

1052
00:43:10,049 --> 00:43:15,059
there's something<font color="#E5E5E5"> wrong</font><font color="#CCCCCC"> with this</font>

1053
00:43:11,369 --> 00:43:16,829
<font color="#E5E5E5">interface</font><font color="#CCCCCC"> try a non TTL expiring method</font>

1054
00:43:15,059 --> 00:43:18,109
and again this is control plane<font color="#CCCCCC"> so it's</font>

1055
00:43:16,829 --> 00:43:20,670
it's gonna have<font color="#CCCCCC"> different performance</font>

1056
00:43:18,109 --> 00:43:23,220
<font color="#E5E5E5">but try just pinging the interface and</font>

1057
00:43:20,670 --> 00:43:25,019
<font color="#E5E5E5">see if you see that that loss persist or</font>

1058
00:43:23,220 --> 00:43:29,759
if it's<font color="#E5E5E5"> just</font><font color="#CCCCCC"> something that's</font><font color="#E5E5E5"> happening</font>

1059
00:43:25,019 --> 00:43:31,799
from from ICMP generation<font color="#E5E5E5"> so the next</font>

1060
00:43:29,759 --> 00:43:33,420
thing we<font color="#E5E5E5"> get into with</font><font color="#CCCCCC"> traceroute is</font><font color="#E5E5E5"> how</font>

1061
00:43:31,799 --> 00:43:34,549
do<font color="#E5E5E5"> you how do you troubleshoot all these</font>

1062
00:43:33,420 --> 00:43:37,769
asymmetric paths

1063
00:43:34,549 --> 00:43:39,660
so remember traceroute<font color="#E5E5E5"> is only showing</font>

1064
00:43:37,769 --> 00:43:41,578
<font color="#E5E5E5">you the forward path and remember</font><font color="#CCCCCC"> I</font>

1065
00:43:39,660 --> 00:43:44,098
<font color="#CCCCCC">showed it only shows the ingress</font>

1066
00:43:41,579 --> 00:43:46,680
interface of how the packet went there

1067
00:43:44,099 --> 00:43:50,099
it shows you absolutely<font color="#E5E5E5"> nothing about</font>

1068
00:43:46,680 --> 00:43:51,990
the return path but the return path is

1069
00:43:50,099 --> 00:43:54,569
<font color="#CCCCCC">1/2</font><font color="#E5E5E5"> of the latency value at the very</font>

1070
00:43:51,990 --> 00:43:56,519
<font color="#E5E5E5">least</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> completely invisible you have</font>

1071
00:43:54,569 --> 00:43:58,799
no idea<font color="#E5E5E5"> and the only way that</font><font color="#CCCCCC"> you will</font>

1072
00:43:56,519 --> 00:44:00,359
ever know<font color="#CCCCCC"> about it is to contact</font><font color="#E5E5E5"> the</font>

1073
00:43:58,799 --> 00:44:02,009
person on the<font color="#E5E5E5"> other side and say can</font><font color="#CCCCCC"> you</font>

1074
00:44:00,359 --> 00:44:04,049
<font color="#CCCCCC">please do a trace route back</font><font color="#E5E5E5"> to me and</font>

1075
00:44:02,009 --> 00:44:05,759
<font color="#E5E5E5">even that is a guarantee of absolutely</font>

1076
00:44:04,049 --> 00:44:07,670
<font color="#E5E5E5">nothing but it's at least a place to</font>

1077
00:44:05,759 --> 00:44:10,799
start

1078
00:44:07,670 --> 00:44:13,470
so that's<font color="#CCCCCC"> thus the</font><font color="#E5E5E5"> real hazard of trace</font>

1079
00:44:10,799 --> 00:44:15,590
route is it's<font color="#E5E5E5"> completely hidden</font><font color="#CCCCCC"> it can</font>

1080
00:44:13,470 --> 00:44:17,959
be completely<font color="#E5E5E5"> different in every path</font>

1081
00:44:15,590 --> 00:44:20,060
and as one<font color="#E5E5E5"> person without</font><font color="#CCCCCC"> any</font>

1082
00:44:17,960 --> 00:44:21,350
<font color="#CCCCCC">cooperation from the</font><font color="#E5E5E5"> other side if you</font>

1083
00:44:20,060 --> 00:44:22,610
don't<font color="#CCCCCC"> have a lookingglass on that side</font>

1084
00:44:21,350 --> 00:44:24,319
if you<font color="#E5E5E5"> don't have a customer who can do</font>

1085
00:44:22,610 --> 00:44:26,720
a trace you're out back at you<font color="#E5E5E5"> you have</font>

1086
00:44:24,320 --> 00:44:28,880
half the<font color="#CCCCCC"> information that you need and</font>

1087
00:44:26,720 --> 00:44:30,830
you're<font color="#E5E5E5"> trying to make a determination</font><font color="#CCCCCC"> so</font>

1088
00:44:28,880 --> 00:44:32,480
the only way<font color="#E5E5E5"> you can confidently analyze</font>

1089
00:44:30,830 --> 00:44:34,640
a traceroute is<font color="#CCCCCC"> to have it in both</font>

1090
00:44:32,480 --> 00:44:38,180
<font color="#CCCCCC">directions and you know a lot of knocks</font>

1091
00:44:34,640 --> 00:44:40,069
<font color="#E5E5E5">that get tracer</font><font color="#CCCCCC"> I'll tickets source and</font>

1092
00:44:38,180 --> 00:44:42,529
desk<font color="#E5E5E5"> source and destin'd does always ask</font>

1093
00:44:40,070 --> 00:44:44,150
<font color="#E5E5E5">for that and</font><font color="#CCCCCC"> even then like I said</font><font color="#E5E5E5"> you</font>

1094
00:44:42,530 --> 00:44:46,070
can't catch all the potential stuff but

1095
00:44:44,150 --> 00:44:46,810
now we'll talk<font color="#E5E5E5"> about some</font><font color="#CCCCCC"> of the</font><font color="#E5E5E5"> details</font>

1096
00:44:46,070 --> 00:44:50,450
of<font color="#E5E5E5"> that</font>

1097
00:44:46,810 --> 00:44:51,830
so<font color="#E5E5E5"> asymmetric paths</font><font color="#CCCCCC"> I said before start</font>

1098
00:44:50,450 --> 00:44:54,830
at<font color="#CCCCCC"> network</font><font color="#E5E5E5"> boundaries that's where</font>

1099
00:44:51,830 --> 00:44:57,200
administrative policies change<font color="#E5E5E5"> so here's</font>

1100
00:44:54,830 --> 00:45:00,710
an<font color="#CCCCCC"> example of a traceroute that's going</font>

1101
00:44:57,200 --> 00:45:04,879
<font color="#E5E5E5">from</font><font color="#CCCCCC"> DC a3 Global Crossing we know that</font>

1102
00:45:00,710 --> 00:45:06,980
that's DC area<font color="#CCCCCC"> to Ashburn sprint link</font>

1103
00:45:04,880 --> 00:45:10,730
also DC area<font color="#CCCCCC"> and those are both</font><font color="#E5E5E5"> actually</font>

1104
00:45:06,980 --> 00:45:12,830
like<font color="#E5E5E5"> Equinix Ashburn so as it goes from</font>

1105
00:45:10,730 --> 00:45:14,330
this one particular router on<font color="#E5E5E5"> Global</font>

1106
00:45:12,830 --> 00:45:17,150
<font color="#E5E5E5">Crossing this one particular router on</font>

1107
00:45:14,330 --> 00:45:19,700
<font color="#E5E5E5">Sprint you see 100 millisecond spike in</font>

1108
00:45:17,150 --> 00:45:20,480
latency so now you<font color="#E5E5E5"> actually shelf what</font>

1109
00:45:19,700 --> 00:45:24,890
could be wrong here

1110
00:45:20,480 --> 00:45:26,000
<font color="#E5E5E5">it could be congestion on that path that</font>

1111
00:45:24,890 --> 00:45:27,470
particular link<font color="#E5E5E5"> could</font><font color="#CCCCCC"> be full</font><font color="#E5E5E5"> and it</font>

1112
00:45:26,000 --> 00:45:29,060
could be<font color="#E5E5E5"> exactly 100 milliseconds worth</font>

1113
00:45:27,470 --> 00:45:31,970
of queuing that's happening things like

1114
00:45:29,060 --> 00:45:35,120
that<font color="#CCCCCC"> it could also be an asymmetric</font>

1115
00:45:31,970 --> 00:45:37,339
reverse path so as we see once the

1116
00:45:35,120 --> 00:45:40,370
packet crosses the boundary once it hits

1117
00:45:37,340 --> 00:45:42,320
sprint sprint is now in<font color="#E5E5E5"> control of how</font>

1118
00:45:40,370 --> 00:45:44,000
it sends<font color="#CCCCCC"> that return path back it's</font>

1119
00:45:42,320 --> 00:45:46,250
gonna<font color="#E5E5E5"> have its</font><font color="#CCCCCC"> own routing</font><font color="#E5E5E5"> table its own</font>

1120
00:45:44,000 --> 00:45:47,720
policy<font color="#E5E5E5"> its own peering policies its own</font>

1121
00:45:46,250 --> 00:45:49,730
local<font color="#E5E5E5"> pref</font><font color="#CCCCCC"> all</font><font color="#E5E5E5"> of the above</font>

1122
00:45:47,720 --> 00:45:52,609
and it's going to<font color="#E5E5E5"> vastly affect what</font>

1123
00:45:49,730 --> 00:45:54,770
path gets used and<font color="#CCCCCC"> a good cue here that</font>

1124
00:45:52,610 --> 00:45:56,210
that's<font color="#E5E5E5"> what's happening is it's</font>

1125
00:45:54,770 --> 00:45:59,480
consistently 100 milliseconds like

1126
00:45:56,210 --> 00:46:01,310
precisely<font color="#E5E5E5"> across all things typically if</font>

1127
00:45:59,480 --> 00:46:04,790
it's congestion you're gonna see some

1128
00:46:01,310 --> 00:46:06,259
variance there as<font color="#E5E5E5"> TCP</font><font color="#CCCCCC"> backs often things</font>

1129
00:46:04,790 --> 00:46:07,310
like that<font color="#E5E5E5"> so when you see exactly</font><font color="#CCCCCC"> a</font>

1130
00:46:06,260 --> 00:46:10,810
hundred<font color="#E5E5E5"> milliseconds you started</font>

1131
00:46:07,310 --> 00:46:14,180
thinking<font color="#CCCCCC"> hmm</font><font color="#E5E5E5"> maybe it's the reverse path</font>

1132
00:46:10,810 --> 00:46:16,370
<font color="#CCCCCC">so how do you work</font><font color="#E5E5E5"> around</font><font color="#CCCCCC"> asymmetric</font>

1133
00:46:14,180 --> 00:46:18,620
paths like that the most<font color="#E5E5E5"> powerful thing</font>

1134
00:46:16,370 --> 00:46:19,940
you<font color="#CCCCCC"> can do as a ninja</font><font color="#E5E5E5"> eusers sitting</font>

1135
00:46:18,620 --> 00:46:21,890
here working<font color="#CCCCCC"> Treasure Isle trying to</font>

1136
00:46:19,940 --> 00:46:23,210
figure things<font color="#E5E5E5"> out</font><font color="#CCCCCC"> without you know</font>

1137
00:46:21,890 --> 00:46:25,040
magically being able<font color="#E5E5E5"> to get the other</font>

1138
00:46:23,210 --> 00:46:27,560
guy<font color="#CCCCCC"> on the</font><font color="#E5E5E5"> phone and</font><font color="#CCCCCC"> do house of trace</font>

1139
00:46:25,040 --> 00:46:28,460
<font color="#E5E5E5">routes for you</font><font color="#CCCCCC"> is to control your</font><font color="#E5E5E5"> source</font>

1140
00:46:27,560 --> 00:46:30,920
address

1141
00:46:28,460 --> 00:46:32,690
so here's an<font color="#CCCCCC"> example say your your</font>

1142
00:46:30,920 --> 00:46:34,190
<font color="#CCCCCC">multi-home your you're an</font><font color="#E5E5E5"> ISP you're</font>

1143
00:46:32,690 --> 00:46:35,990
buying transit and you're connected<font color="#CCCCCC"> to</font>

1144
00:46:34,190 --> 00:46:38,390
two networks<font color="#CCCCCC"> they're now the same thing</font>

1145
00:46:35,990 --> 00:46:40,430
Global Crossing in level<font color="#CCCCCC"> three so you</font>

1146
00:46:38,390 --> 00:46:42,890
know that Global Crossing reaches you<font color="#E5E5E5"> if</font>

1147
00:46:40,430 --> 00:46:44,779
you have Global Crossing<font color="#CCCCCC"> and it so</font>

1148
00:46:42,890 --> 00:46:46,490
happens that<font color="#E5E5E5"> Sprint because of their</font>

1149
00:46:44,780 --> 00:46:49,700
different policies<font color="#E5E5E5"> they reach you via</font>

1150
00:46:46,490 --> 00:46:52,279
level<font color="#E5E5E5"> three so that's how you start</font><font color="#CCCCCC"> to</font>

1151
00:46:49,700 --> 00:46:55,310
say<font color="#E5E5E5"> hmm maybe the</font><font color="#CCCCCC"> reverse path is is</font>

1152
00:46:52,280 --> 00:46:56,720
<font color="#E5E5E5">between</font><font color="#CCCCCC"> its going over level</font><font color="#E5E5E5"> three and</font>

1153
00:46:55,310 --> 00:46:59,120
that's<font color="#E5E5E5"> the issue</font><font color="#CCCCCC"> how can you how can</font><font color="#E5E5E5"> you</font>

1154
00:46:56,720 --> 00:47:00,379
<font color="#E5E5E5">prove that without having</font><font color="#CCCCCC"> access to</font><font color="#E5E5E5"> a</font>

1155
00:46:59,120 --> 00:47:03,020
<font color="#E5E5E5">lookingglass</font><font color="#CCCCCC"> and all the routers and</font>

1156
00:47:00,380 --> 00:47:05,660
<font color="#E5E5E5">although all the endpoints</font><font color="#CCCCCC"> one thing you</font>

1157
00:47:03,020 --> 00:47:08,480
can do is to run<font color="#E5E5E5"> a traceroute on your</font>

1158
00:47:05,660 --> 00:47:11,420
side from<font color="#CCCCCC"> your router sourced from your</font>

1159
00:47:08,480 --> 00:47:13,040
slash 30 so the way<font color="#CCCCCC"> that almost</font><font color="#E5E5E5"> every</font>

1160
00:47:11,420 --> 00:47:15,920
<font color="#E5E5E5">ISP works is when you connect as a</font>

1161
00:47:13,040 --> 00:47:18,170
customer<font color="#CCCCCC"> they give you the slash 30 the</font>

1162
00:47:15,920 --> 00:47:20,930
interface IP out of their IP space and

1163
00:47:18,170 --> 00:47:22,640
that's IP<font color="#E5E5E5"> space that's owned by them</font>

1164
00:47:20,930 --> 00:47:24,710
routed by them part of their super net

1165
00:47:22,640 --> 00:47:27,470
and it's<font color="#CCCCCC"> gonna be</font><font color="#E5E5E5"> routed that way so you</font>

1166
00:47:24,710 --> 00:47:28,850
do a traceroute<font color="#E5E5E5"> and you manually set and</font>

1167
00:47:27,470 --> 00:47:30,709
you're in your<font color="#CCCCCC"> traceroute command the</font>

1168
00:47:28,850 --> 00:47:32,720
source address<font color="#E5E5E5"> to be that</font><font color="#CCCCCC"> Global</font>

1169
00:47:30,710 --> 00:47:35,090
<font color="#CCCCCC">Crossing slash 30</font><font color="#E5E5E5"> you're forcing the</font>

1170
00:47:32,720 --> 00:47:36,799
return path<font color="#CCCCCC"> went even once it hits</font>

1171
00:47:35,090 --> 00:47:38,720
<font color="#CCCCCC">Sprint</font><font color="#E5E5E5"> to come back to be a Global</font>

1172
00:47:36,800 --> 00:47:41,600
Crossing<font color="#CCCCCC"> so then you can</font><font color="#E5E5E5"> look and see</font><font color="#CCCCCC"> if</font>

1173
00:47:38,720 --> 00:47:43,640
that affected<font color="#CCCCCC"> your results if it did try</font>

1174
00:47:41,600 --> 00:47:45,200
it on your your level<font color="#E5E5E5"> 3 path oh look you</font>

1175
00:47:43,640 --> 00:47:47,089
know see 100 milliseconds on everything

1176
00:47:45,200 --> 00:47:49,370
<font color="#CCCCCC">so you know</font><font color="#E5E5E5"> the the</font><font color="#CCCCCC"> path the the issue</font>

1177
00:47:47,090 --> 00:47:53,420
in<font color="#CCCCCC"> the</font><font color="#E5E5E5"> previous</font><font color="#CCCCCC"> example is a return path</font>

1178
00:47:49,370 --> 00:47:55,069
coming<font color="#E5E5E5"> back in over level 3 now we get</font>

1179
00:47:53,420 --> 00:47:57,680
<font color="#CCCCCC">into some more</font><font color="#E5E5E5"> complicated stuff</font>

1180
00:47:55,070 --> 00:48:01,010
asymmetric paths with multiple exits

1181
00:47:57,680 --> 00:48:03,319
so remember<font color="#CCCCCC"> asymmetric paths can</font><font color="#E5E5E5"> happen</font>

1182
00:48:01,010 --> 00:48:05,180
anywhere<font color="#CCCCCC"> and they do</font><font color="#E5E5E5"> and in</font><font color="#CCCCCC"> fact the the</font>

1183
00:48:03,320 --> 00:48:08,000
way the modern in networks<font color="#E5E5E5"> they happen</font>

1184
00:48:05,180 --> 00:48:11,770
pretty<font color="#E5E5E5"> much everywhere</font><font color="#CCCCCC"> turns</font><font color="#E5E5E5"> out there's</font>

1185
00:48:08,000 --> 00:48:15,410
no terabit Ethernet yet sorry Randy<font color="#E5E5E5"> so</font>

1186
00:48:11,770 --> 00:48:17,870
people tend to splay things out<font color="#E5E5E5"> over you</font>

1187
00:48:15,410 --> 00:48:20,899
know it's<font color="#E5E5E5"> not uncommon to see 64 by 10</font>

1188
00:48:17,870 --> 00:48:22,520
gig<font color="#E5E5E5"> paths it's not uncommon to</font><font color="#CCCCCC"> see many</font>

1189
00:48:20,900 --> 00:48:24,950
many many different parallel<font color="#E5E5E5"> paths</font>

1190
00:48:22,520 --> 00:48:26,720
happening and so all these asymmetric

1191
00:48:24,950 --> 00:48:30,109
routes are happening all the<font color="#E5E5E5"> time as</font>

1192
00:48:26,720 --> 00:48:31,520
traffic is<font color="#CCCCCC"> load-balanced and networks</font>

1193
00:48:30,110 --> 00:48:33,200
interconnect with each<font color="#E5E5E5"> other in multiple</font>

1194
00:48:31,520 --> 00:48:36,590
points so here's a very<font color="#E5E5E5"> simplified</font>

1195
00:48:33,200 --> 00:48:38,359
example of a major network with three

1196
00:48:36,590 --> 00:48:40,250
locations San<font color="#E5E5E5"> Jose Chicago and</font>

1197
00:48:38,360 --> 00:48:41,390
Washington<font color="#CCCCCC"> DC they interconnect</font><font color="#E5E5E5"> with</font>

1198
00:48:40,250 --> 00:48:44,420
each other and all<font color="#CCCCCC"> three point</font>

1199
00:48:41,390 --> 00:48:48,710
and remember<font color="#E5E5E5"> that in almost all examples</font>

1200
00:48:44,420 --> 00:48:50,509
<font color="#CCCCCC">peering</font><font color="#E5E5E5"> is done via hot potato routing</font>

1201
00:48:48,710 --> 00:48:51,950
closest exit routing so you want to get

1202
00:48:50,509 --> 00:48:53,390
the packet to<font color="#E5E5E5"> the other network as</font>

1203
00:48:51,950 --> 00:48:55,669
quickly as possible<font color="#CCCCCC"> because they know</font>

1204
00:48:53,390 --> 00:48:57,710
more about routing<font color="#E5E5E5"> it than you do</font><font color="#CCCCCC"> so in</font>

1205
00:48:55,670 --> 00:48:59,630
hop<font color="#CCCCCC"> one we see an</font><font color="#E5E5E5"> example where the</font>

1206
00:48:57,710 --> 00:49:02,420
outbound packet goes out of Washington

1207
00:48:59,630 --> 00:49:05,720
DC interface<font color="#CCCCCC"> and comes back in that</font><font color="#E5E5E5"> same</font>

1208
00:49:02,420 --> 00:49:07,430
interface very<font color="#E5E5E5"> simple</font><font color="#CCCCCC"> hop to</font><font color="#E5E5E5"> weave now</font>

1209
00:49:05,720 --> 00:49:09,470
<font color="#E5E5E5">in committed the TTL by one we've sent</font>

1210
00:49:07,430 --> 00:49:11,680
the packet through<font color="#E5E5E5"> Washington DC the</font>

1211
00:49:09,470 --> 00:49:15,140
little red line it goes out<font color="#CCCCCC"> to Chicago</font>

1212
00:49:11,680 --> 00:49:17,589
Chicago drops it sends its ICMP back but

1213
00:49:15,140 --> 00:49:20,299
the return path that Chicago<font color="#E5E5E5"> sends is</font>

1214
00:49:17,589 --> 00:49:21,828
via the Chicago interconnection<font color="#E5E5E5"> so if</font>

1215
00:49:20,299 --> 00:49:24,440
<font color="#CCCCCC">for example</font><font color="#E5E5E5"> there was congestion there</font>

1216
00:49:21,829 --> 00:49:27,410
or something<font color="#E5E5E5"> about that path was broken</font>

1217
00:49:24,440 --> 00:49:29,450
<font color="#E5E5E5">you would see the latency</font><font color="#CCCCCC"> spiked</font><font color="#E5E5E5"> for</font>

1218
00:49:27,410 --> 00:49:31,339
that hop but then by<font color="#E5E5E5"> the time it hits</font>

1219
00:49:29,450 --> 00:49:32,868
hop three by the<font color="#E5E5E5"> time the</font><font color="#CCCCCC"> the third</font>

1220
00:49:31,339 --> 00:49:34,788
packet the<font color="#E5E5E5"> green line goes out and it's</font>

1221
00:49:32,869 --> 00:49:36,769
made it three routers deep and it's hit

1222
00:49:34,789 --> 00:49:39,739
San Jose San Jose drops it<font color="#CCCCCC"> and sends it</font>

1223
00:49:36,769 --> 00:49:41,180
<font color="#E5E5E5">back it's got a different</font><font color="#CCCCCC"> path so every</font>

1224
00:49:39,739 --> 00:49:42,470
point along the way<font color="#E5E5E5"> can have a</font>

1225
00:49:41,180 --> 00:49:45,109
completely potentially different

1226
00:49:42,470 --> 00:49:46,700
asymmetric path<font color="#E5E5E5"> with all these different</font>

1227
00:49:45,109 --> 00:49:48,710
exits so sometimes you'll see a latency

1228
00:49:46,700 --> 00:49:51,618
spike in the<font color="#E5E5E5"> middle</font><font color="#CCCCCC"> that's caused by</font>

1229
00:49:48,710 --> 00:49:52,730
<font color="#E5E5E5">that and not caused by the cosmetic</font>

1230
00:49:51,619 --> 00:49:55,249
<font color="#E5E5E5">stuff and that's where you kind</font><font color="#CCCCCC"> of have</font>

1231
00:49:52,730 --> 00:49:56,660
<font color="#CCCCCC">to to ping all the</font><font color="#E5E5E5"> interfaces manually</font>

1232
00:49:55,249 --> 00:49:58,519
one thing at a time and<font color="#CCCCCC"> really</font><font color="#E5E5E5"> deduce</font>

1233
00:49:56,660 --> 00:50:03,259
one thing<font color="#E5E5E5"> after another after another to</font>

1234
00:49:58,519 --> 00:50:05,508
figure out what the real issue<font color="#CCCCCC"> is so</font>

1235
00:50:03,259 --> 00:50:07,099
then the<font color="#CCCCCC"> question</font><font color="#E5E5E5"> becomes some more</font>

1236
00:50:05,509 --> 00:50:10,130
advanced troubleshooting with source

1237
00:50:07,099 --> 00:50:11,779
address<font color="#E5E5E5"> what happens if you know it's a</font>

1238
00:50:10,130 --> 00:50:13,519
peer address or I'm the transit<font color="#CCCCCC"> provider</font>

1239
00:50:11,779 --> 00:50:15,380
and the slash<font color="#E5E5E5"> 30 is numbered out of my</font>

1240
00:50:13,519 --> 00:50:19,038
space<font color="#E5E5E5"> well you can still get some</font>

1241
00:50:15,380 --> 00:50:21,109
benefits by playing<font color="#E5E5E5"> around with it</font><font color="#CCCCCC"> a lot</font>

1242
00:50:19,039 --> 00:50:24,640
<font color="#CCCCCC">of times you'll see different results</font>

1243
00:50:21,109 --> 00:50:27,828
just<font color="#E5E5E5"> by different hashing</font><font color="#CCCCCC"> so for</font><font color="#E5E5E5"> example</font>

1244
00:50:24,640 --> 00:50:29,239
if you have a router and<font color="#E5E5E5"> it's dot one</font>

1245
00:50:27,829 --> 00:50:32,299
and<font color="#CCCCCC"> you do a trace your outsource from</font>

1246
00:50:29,239 --> 00:50:33,559
that and the hash<font color="#E5E5E5"> that gets</font><font color="#CCCCCC"> calculated</font>

1247
00:50:32,299 --> 00:50:35,450
from<font color="#E5E5E5"> that address sends it down this</font>

1248
00:50:33,559 --> 00:50:37,130
path<font color="#CCCCCC"> and</font><font color="#E5E5E5"> you do it from</font><font color="#CCCCCC"> a different</font>

1249
00:50:35,450 --> 00:50:38,359
interface<font color="#E5E5E5"> on</font><font color="#CCCCCC"> your router with a</font>

1250
00:50:37,130 --> 00:50:39,410
different hash<font color="#E5E5E5"> and the way</font><font color="#CCCCCC"> that gets</font>

1251
00:50:38,359 --> 00:50:41,089
calculated<font color="#E5E5E5"> differently it's going to</font>

1252
00:50:39,410 --> 00:50:43,640
expose different paths that<font color="#E5E5E5"> you weren't</font>

1253
00:50:41,089 --> 00:50:45,140
<font color="#E5E5E5">seeing before and there's a lot of</font>

1254
00:50:43,640 --> 00:50:46,578
examples<font color="#E5E5E5"> out</font><font color="#CCCCCC"> there where people</font><font color="#E5E5E5"> be</font>

1255
00:50:45,140 --> 00:50:48,739
reporting intermittent loss and you

1256
00:50:46,579 --> 00:50:50,539
won't be able<font color="#E5E5E5"> to figure out why and</font><font color="#CCCCCC"> it's</font>

1257
00:50:48,739 --> 00:50:52,819
because your particular trace route just

1258
00:50:50,539 --> 00:50:54,140
<font color="#E5E5E5">happens to be sourced from you know</font>

1259
00:50:52,819 --> 00:50:54,770
<font color="#E5E5E5">using the hash that just sends it over</font>

1260
00:50:54,140 --> 00:50:56,868
<font color="#E5E5E5">the clean path</font>

1261
00:50:54,770 --> 00:50:59,180
not the broken path so the more<font color="#E5E5E5"> things</font>

1262
00:50:56,869 --> 00:51:05,270
<font color="#E5E5E5">you can</font><font color="#CCCCCC"> try</font><font color="#E5E5E5"> the more likely you are to</font>

1263
00:50:59,180 --> 00:51:06,618
uncover those types of issues<font color="#CCCCCC"> another</font>

1264
00:51:05,270 --> 00:51:10,100
thing to remember<font color="#E5E5E5"> when working with</font>

1265
00:51:06,619 --> 00:51:14,420
traceroute<font color="#E5E5E5"> is where is your source</font>

1266
00:51:10,100 --> 00:51:17,779
address<font color="#E5E5E5"> coming from most routers Cisco I</font>

1267
00:51:14,420 --> 00:51:22,430
don't know X<font color="#CCCCCC"> our most most classic boxes</font>

1268
00:51:17,780 --> 00:51:24,500
out there<font color="#CCCCCC"> set the source address to the</font>

1269
00:51:22,430 --> 00:51:26,149
<font color="#E5E5E5">egress interface that was used so if I'm</font>

1270
00:51:24,500 --> 00:51:28,910
<font color="#E5E5E5">sitting on a router and I do traceroute</font>

1271
00:51:26,150 --> 00:51:30,740
1.2.3.4<font color="#CCCCCC"> and it goes out</font><font color="#E5E5E5"> my level 3</font>

1272
00:51:28,910 --> 00:51:33,410
<font color="#E5E5E5">interface it's going to set my source</font>

1273
00:51:30,740 --> 00:51:34,759
address to<font color="#E5E5E5"> that level 3 interface and</font>

1274
00:51:33,410 --> 00:51:38,299
<font color="#E5E5E5">juniper is going to do that by default</font>

1275
00:51:34,760 --> 00:51:40,250
<font color="#CCCCCC">too but they have a command system</font>

1276
00:51:38,300 --> 00:51:42,980
default address<font color="#CCCCCC"> selection that forces it</font>

1277
00:51:40,250 --> 00:51:46,130
to<font color="#E5E5E5"> use the router loopback in a lot</font><font color="#CCCCCC"> of</font>

1278
00:51:42,980 --> 00:51:48,410
cases that<font color="#E5E5E5"> might be more more more what</font>

1279
00:51:46,130 --> 00:51:50,240
<font color="#E5E5E5">you're looking for so for</font><font color="#CCCCCC"> example if you</font>

1280
00:51:48,410 --> 00:51:52,310
<font color="#E5E5E5">did that traceroute</font><font color="#CCCCCC"> at level 3 and</font><font color="#E5E5E5"> it</font>

1281
00:51:50,240 --> 00:51:54,290
<font color="#E5E5E5">was sourced</font><font color="#CCCCCC"> from level 3 AP space that</font>

1282
00:51:52,310 --> 00:51:55,670
might not be exposing<font color="#E5E5E5"> all</font><font color="#CCCCCC"> of the</font>

1283
00:51:54,290 --> 00:51:57,380
different return paths that<font color="#E5E5E5"> are coming</font>

1284
00:51:55,670 --> 00:51:58,940
from your real IP space<font color="#E5E5E5"> from a real</font>

1285
00:51:57,380 --> 00:52:01,940
customer who's really multihomed with

1286
00:51:58,940 --> 00:52:03,500
you so again try all those different

1287
00:52:01,940 --> 00:52:06,230
things<font color="#E5E5E5"> and take that into</font><font color="#CCCCCC"> account when</font>

1288
00:52:03,500 --> 00:52:08,420
<font color="#E5E5E5">you're looking at</font><font color="#CCCCCC"> your paths</font><font color="#E5E5E5"> so the next</font>

1289
00:52:06,230 --> 00:52:12,380
one thing about<font color="#CCCCCC"> trace route multiple</font>

1290
00:52:08,420 --> 00:52:14,119
paths and load balancing so remember

1291
00:52:12,380 --> 00:52:17,450
that<font color="#E5E5E5"> I said every probe is an</font>

1292
00:52:14,119 --> 00:52:19,580
independent trial and you<font color="#E5E5E5"> see P and TCP</font>

1293
00:52:17,450 --> 00:52:23,750
<font color="#E5E5E5">trace route probes like I said are using</font>

1294
00:52:19,580 --> 00:52:26,270
a different<font color="#E5E5E5"> port every time and the ICMP</font>

1295
00:52:23,750 --> 00:52:29,330
stuff may use some other method<font color="#E5E5E5"> to to</font>

1296
00:52:26,270 --> 00:52:32,000
encode<font color="#E5E5E5"> that but what's happening is</font>

1297
00:52:29,330 --> 00:52:37,700
whenever<font color="#E5E5E5"> there's multiple paths on on a</font>

1298
00:52:32,000 --> 00:52:40,070
link<font color="#CCCCCC"> you've got 4 by 10 gig and they're</font>

1299
00:52:37,700 --> 00:52:42,470
not<font color="#E5E5E5"> done as a layer 2 bundle it's not an</font>

1300
00:52:40,070 --> 00:52:44,359
<font color="#CCCCCC">LACP bundle it's done as for independent</font>

1301
00:52:42,470 --> 00:52:46,310
links and you're trying to<font color="#E5E5E5"> do layer 3</font>

1302
00:52:44,359 --> 00:52:49,190
hashing across them that's called<font color="#CCCCCC"> EC and</font>

1303
00:52:46,310 --> 00:52:52,070
<font color="#E5E5E5">P equal cost multi path and what happens</font>

1304
00:52:49,190 --> 00:52:54,950
there is<font color="#CCCCCC"> you tend to see</font><font color="#E5E5E5"> multiple hops</font>

1305
00:52:52,070 --> 00:52:58,100
show up<font color="#E5E5E5"> at every point so here's an</font>

1306
00:52:54,950 --> 00:53:00,710
example<font color="#E5E5E5"> of a link that's clearly multi</font>

1307
00:52:58,100 --> 00:53:04,779
path going<font color="#E5E5E5"> through</font><font color="#CCCCCC"> T Lea we're four hops</font>

1308
00:53:00,710 --> 00:53:07,640
<font color="#E5E5E5">six two of the probes landed on bb2</font><font color="#CCCCCC"> and</font>

1309
00:53:04,780 --> 00:53:09,680
one<font color="#E5E5E5"> of the probes landed on</font><font color="#CCCCCC"> Bibi</font>

1310
00:53:07,640 --> 00:53:10,730
<font color="#CCCCCC">in</font><font color="#E5E5E5"> this you know their routers that are</font>

1311
00:53:09,680 --> 00:53:13,009
<font color="#E5E5E5">probably sitting right next to each</font>

1312
00:53:10,730 --> 00:53:14,510
other and traffic's being evenly

1313
00:53:13,010 --> 00:53:17,030
distributed across<font color="#E5E5E5"> them and what</font>

1314
00:53:14,510 --> 00:53:19,490
traceroute does is when it encounters a

1315
00:53:17,030 --> 00:53:20,930
different return<font color="#E5E5E5"> address than what it</font>

1316
00:53:19,490 --> 00:53:23,060
<font color="#E5E5E5">got in his</font><font color="#CCCCCC"> previous result it just</font>

1317
00:53:20,930 --> 00:53:26,450
<font color="#CCCCCC">displays it like this it</font><font color="#E5E5E5"> says here's</font>

1318
00:53:23,060 --> 00:53:28,190
another result that we got<font color="#E5E5E5"> and so people</font>

1319
00:53:26,450 --> 00:53:30,560
have to know<font color="#E5E5E5"> how to interpret that you</font>

1320
00:53:28,190 --> 00:53:32,570
see that a lot on the Internet

1321
00:53:30,560 --> 00:53:35,570
of the three probes<font color="#E5E5E5"> to go over one path</font>

1322
00:53:32,570 --> 00:53:37,840
one goes over<font color="#CCCCCC"> very</font><font color="#E5E5E5"> simple</font><font color="#CCCCCC"> now we get</font>

1323
00:53:35,570 --> 00:53:42,200
into<font color="#E5E5E5"> some more complex examples here's</font>

1324
00:53:37,840 --> 00:53:44,120
<font color="#CCCCCC">all very</font><font color="#E5E5E5"> ODS</font><font color="#CCCCCC"> here's an</font><font color="#E5E5E5"> example of a</font>

1325
00:53:42,200 --> 00:53:46,460
packet<font color="#E5E5E5"> going through what used to be</font>

1326
00:53:44,120 --> 00:53:49,160
<font color="#CCCCCC">very</font><font color="#E5E5E5"> own entity</font><font color="#CCCCCC"> and you see the</font><font color="#E5E5E5"> first</font>

1327
00:53:46,460 --> 00:53:50,810
hop is is in Ashburn<font color="#CCCCCC"> and then hop five</font>

1328
00:53:49,160 --> 00:53:53,480
<font color="#E5E5E5">you see some very different load</font>

1329
00:53:50,810 --> 00:53:56,150
balancing you see New York and Chicago

1330
00:53:53,480 --> 00:53:58,010
<font color="#CCCCCC">and a naive person</font><font color="#E5E5E5"> might look at that</font>

1331
00:53:56,150 --> 00:54:00,710
<font color="#E5E5E5">and think oh my god my packet</font><font color="#CCCCCC"> just went</font>

1332
00:53:58,010 --> 00:54:02,840
in weird ways<font color="#E5E5E5"> the wrong direction we</font>

1333
00:54:00,710 --> 00:54:04,460
have no idea what's going<font color="#E5E5E5"> on</font><font color="#CCCCCC"> what's</font>

1334
00:54:02,840 --> 00:54:06,980
actually happening here<font color="#CCCCCC"> is it's being</font>

1335
00:54:04,460 --> 00:54:09,230
load balanced between<font color="#E5E5E5"> two paths</font><font color="#CCCCCC"> one that</font>

1336
00:54:06,980 --> 00:54:12,620
<font color="#E5E5E5">goes New York Seattle</font><font color="#CCCCCC"> and one that goes</font>

1337
00:54:09,230 --> 00:54:14,510
Chicago Seattle<font color="#CCCCCC"> so again that's</font>

1338
00:54:12,620 --> 00:54:16,549
completely<font color="#E5E5E5"> harmless but if you are a</font>

1339
00:54:14,510 --> 00:54:18,080
naive user looking<font color="#CCCCCC"> at traceroute and you</font>

1340
00:54:16,550 --> 00:54:19,520
don't know how to interpret that you're

1341
00:54:18,080 --> 00:54:22,900
going to<font color="#E5E5E5"> come up with the</font><font color="#CCCCCC"> wrong results</font>

1342
00:54:19,520 --> 00:54:27,830
now we get into<font color="#CCCCCC"> the</font><font color="#E5E5E5"> really painful stuff</font>

1343
00:54:22,900 --> 00:54:31,220
unequal<font color="#CCCCCC"> equal cost multi path so that's</font>

1344
00:54:27,830 --> 00:54:33,529
an<font color="#CCCCCC"> example where it's load</font><font color="#E5E5E5"> balanced</font>

1345
00:54:31,220 --> 00:54:35,450
<font color="#CCCCCC">across two equal paths but</font><font color="#E5E5E5"> one happens</font>

1346
00:54:33,530 --> 00:54:37,610
to<font color="#E5E5E5"> have</font><font color="#CCCCCC"> more hops than another</font><font color="#E5E5E5"> and it</font>

1347
00:54:35,450 --> 00:54:40,700
makes the paths look<font color="#E5E5E5"> like this so here's</font>

1348
00:54:37,610 --> 00:54:42,530
an<font color="#CCCCCC"> example of load balancing</font><font color="#E5E5E5"> where X got</font>

1349
00:54:40,700 --> 00:54:44,629
inserted<font color="#E5E5E5"> in the</font><font color="#CCCCCC"> middle and what it does</font>

1350
00:54:42,530 --> 00:54:49,280
<font color="#E5E5E5">you get traceroute results that look</font>

1351
00:54:44,630 --> 00:54:52,130
like<font color="#E5E5E5"> hop three has hop two's result in</font>

1352
00:54:49,280 --> 00:54:53,270
it and so<font color="#CCCCCC"> people get real confused by</font>

1353
00:54:52,130 --> 00:54:55,670
this<font color="#E5E5E5"> one they go it's going back and</font>

1354
00:54:53,270 --> 00:54:58,340
<font color="#CCCCCC">forth I don't know what's going on</font><font color="#E5E5E5"> it</font>

1355
00:54:55,670 --> 00:55:00,020
it's it's out there you'll encounter it

1356
00:54:58,340 --> 00:55:03,800
you just<font color="#E5E5E5"> you</font><font color="#CCCCCC"> have to</font><font color="#E5E5E5"> look and when you</font>

1357
00:55:00,020 --> 00:55:05,509
see hey I'm seeing that same hop<font color="#E5E5E5"> that's</font>

1358
00:55:03,800 --> 00:55:08,840
that's tends to be an indication that

1359
00:55:05,510 --> 00:55:10,100
<font color="#E5E5E5">you're seeing that</font><font color="#CCCCCC"> so when in doubt you</font>

1360
00:55:08,840 --> 00:55:12,530
can<font color="#E5E5E5"> eliminate the whole thing by</font><font color="#CCCCCC"> just</font>

1361
00:55:10,100 --> 00:55:14,330
doing a single<font color="#E5E5E5"> probe so your standard</font>

1362
00:55:12,530 --> 00:55:16,610
<font color="#CCCCCC">UNIX</font><font color="#E5E5E5"> traceroute implementations the</font>

1363
00:55:14,330 --> 00:55:18,110
command is - q1<font color="#E5E5E5"> and so instead of</font>

1364
00:55:16,610 --> 00:55:20,180
sending<font color="#E5E5E5"> three probes for every hop it's</font>

1365
00:55:18,110 --> 00:55:21,079
going to<font color="#E5E5E5"> send one and if you're confused</font>

1366
00:55:20,180 --> 00:55:23,538
and you don't know what

1367
00:55:21,079 --> 00:55:25,489
send one probe<font color="#E5E5E5"> look at that path and</font>

1368
00:55:23,539 --> 00:55:27,380
then send<font color="#E5E5E5"> it</font><font color="#CCCCCC"> again</font><font color="#E5E5E5"> see if</font><font color="#CCCCCC"> it comes</font><font color="#E5E5E5"> up</font>

1369
00:55:25,489 --> 00:55:29,569
something different<font color="#CCCCCC"> but again remember</font>

1370
00:55:27,380 --> 00:55:32,929
every probe is still an independent

1371
00:55:29,569 --> 00:55:35,989
trial<font color="#CCCCCC"> so just</font><font color="#E5E5E5"> because in this one</font>

1372
00:55:32,929 --> 00:55:38,479
example<font color="#CCCCCC"> you</font><font color="#E5E5E5"> see a return that</font><font color="#CCCCCC"> says</font><font color="#E5E5E5"> this</font>

1373
00:55:35,989 --> 00:55:40,429
that in no<font color="#CCCCCC"> way means that's</font><font color="#E5E5E5"> the path</font>

1374
00:55:38,479 --> 00:55:41,718
your flow went over or<font color="#E5E5E5"> anything like</font>

1375
00:55:40,429 --> 00:55:44,449
<font color="#E5E5E5">that so</font><font color="#CCCCCC"> when you're working with tracer</font>

1376
00:55:41,719 --> 00:55:46,069
<font color="#CCCCCC">out your</font><font color="#E5E5E5"> you're</font><font color="#CCCCCC"> looking at many</font>

1377
00:55:44,449 --> 00:55:47,809
different variants<font color="#E5E5E5"> and and how to</font>

1378
00:55:46,069 --> 00:55:51,169
interpret<font color="#E5E5E5"> all these results to build a</font>

1379
00:55:47,809 --> 00:55:53,179
complete picture and like I<font color="#CCCCCC"> said one way</font>

1380
00:55:51,169 --> 00:55:54,859
to try out<font color="#CCCCCC"> different paths is just to</font>

1381
00:55:53,179 --> 00:55:58,249
increment the destination IP<font color="#E5E5E5"> or the</font>

1382
00:55:54,859 --> 00:55:59,899
source IP by one<font color="#E5E5E5"> so if you're tracing to</font>

1383
00:55:58,249 --> 00:56:02,299
a customer and<font color="#CCCCCC"> their dot</font><font color="#E5E5E5"> one two three</font>

1384
00:55:59,899 --> 00:56:04,159
<font color="#E5E5E5">and everything looks fine</font>

1385
00:56:02,299 --> 00:56:06,259
<font color="#E5E5E5">trace you know dot 1 2 4 see if it</font>

1386
00:56:04,159 --> 00:56:07,669
changes the path<font color="#E5E5E5"> along</font><font color="#CCCCCC"> the way</font><font color="#E5E5E5"> and see</font>

1387
00:56:06,259 --> 00:56:09,109
<font color="#E5E5E5">if it changes it in a way that breaks</font>

1388
00:56:07,669 --> 00:56:10,879
<font color="#E5E5E5">something in the middle</font><font color="#CCCCCC"> because that's</font>

1389
00:56:09,109 --> 00:56:13,098
that's<font color="#E5E5E5"> a common thing that you'll see as</font>

1390
00:56:10,880 --> 00:56:18,969
the the different IPS get hashed

1391
00:56:13,099 --> 00:56:21,949
differently<font color="#CCCCCC"> and</font><font color="#E5E5E5"> now MPLS and traceroute</font>

1392
00:56:18,969 --> 00:56:25,069
<font color="#E5E5E5">how</font><font color="#CCCCCC"> howell traceroute behaves when you</font>

1393
00:56:21,949 --> 00:56:26,509
put it on<font color="#E5E5E5"> an MPLS network so there's a</font>

1394
00:56:25,069 --> 00:56:29,509
lot of<font color="#E5E5E5"> large networks out</font><font color="#CCCCCC"> there who</font>

1395
00:56:26,509 --> 00:56:33,019
operate an MPLS based<font color="#E5E5E5"> core in fact most</font>

1396
00:56:29,509 --> 00:56:35,449
large ones at this point and a<font color="#E5E5E5"> lot</font><font color="#CCCCCC"> of</font>

1397
00:56:33,019 --> 00:56:38,149
them out<font color="#E5E5E5"> there</font><font color="#CCCCCC"> they run it in such a way</font>

1398
00:56:35,449 --> 00:56:40,729
that their core devices<font color="#E5E5E5"> their core label</font>

1399
00:56:38,149 --> 00:56:43,399
switching devices<font color="#CCCCCC"> don't</font><font color="#E5E5E5"> even carry an IP</font>

1400
00:56:40,729 --> 00:56:45,009
routing table<font color="#E5E5E5"> and in fact but the the</font>

1401
00:56:43,399 --> 00:56:47,868
<font color="#CCCCCC">Juniper PTX</font>

1402
00:56:45,009 --> 00:56:50,689
<font color="#E5E5E5">isn't even capable of</font><font color="#CCCCCC"> doing it it's it's</font>

1403
00:56:47,869 --> 00:56:53,419
a dedicated MPLS only box<font color="#E5E5E5"> and so that's</font>

1404
00:56:50,689 --> 00:56:55,609
that's<font color="#E5E5E5"> fine for tracing for delivering</font>

1405
00:56:53,419 --> 00:56:57,529
an MPLS packet then the question becomes

1406
00:56:55,609 --> 00:56:59,269
if you want to show<font color="#E5E5E5"> that hop you have</font>

1407
00:56:57,529 --> 00:57:01,549
two choices<font color="#CCCCCC"> you</font><font color="#E5E5E5"> can either completely</font>

1408
00:56:59,269 --> 00:57:04,459
hide the hop so MPLS gives you the

1409
00:57:01,549 --> 00:57:05,749
<font color="#CCCCCC">capability to turn off TTL decrement</font><font color="#E5E5E5"> so</font>

1410
00:57:04,459 --> 00:57:07,459
you can magically make<font color="#E5E5E5"> the packet go</font>

1411
00:57:05,749 --> 00:57:09,439
from point<font color="#E5E5E5"> A to point B and hide all</font><font color="#CCCCCC"> of</font>

1412
00:57:07,459 --> 00:57:12,229
<font color="#E5E5E5">your network in the middle some people</font>

1413
00:57:09,439 --> 00:57:14,359
do that<font color="#E5E5E5"> just to make</font><font color="#CCCCCC"> sure about shorter</font>

1414
00:57:12,229 --> 00:57:16,368
or not confuse people<font color="#CCCCCC"> and some</font><font color="#E5E5E5"> people</font>

1415
00:57:14,359 --> 00:57:17,659
don't because you're<font color="#CCCCCC"> actually</font><font color="#E5E5E5"> trying to</font>

1416
00:57:16,369 --> 00:57:21,079
<font color="#E5E5E5">figure</font><font color="#CCCCCC"> out what's</font><font color="#E5E5E5"> going on inside your</font>

1417
00:57:17,659 --> 00:57:23,689
network<font color="#CCCCCC"> but when you've got</font><font color="#E5E5E5"> an MPLS only</font>

1418
00:57:21,079 --> 00:57:26,059
box and you are<font color="#CCCCCC"> trying</font><font color="#E5E5E5"> to show</font><font color="#CCCCCC"> that hop</font>

1419
00:57:23,689 --> 00:57:28,489
you you need to<font color="#CCCCCC"> figure out where am I</font>

1420
00:57:26,059 --> 00:57:29,749
going to send that ICMP back<font color="#CCCCCC"> and if you</font>

1421
00:57:28,489 --> 00:57:31,549
don't have a<font color="#E5E5E5"> routing table and you can't</font>

1422
00:57:29,749 --> 00:57:33,678
do<font color="#E5E5E5"> that</font><font color="#CCCCCC"> lookup you've</font><font color="#E5E5E5"> got a problem</font><font color="#CCCCCC"> so</font>

1423
00:57:31,549 --> 00:57:34,759
one common<font color="#E5E5E5"> solution to this is something</font>

1424
00:57:33,679 --> 00:57:37,580
<font color="#E5E5E5">called ICMP</font>

1425
00:57:34,760 --> 00:57:40,880
<font color="#E5E5E5">humming what happens there is if you</font>

1426
00:57:37,580 --> 00:57:42,470
generate an ICMP<font color="#CCCCCC"> on the inside of an LSP</font>

1427
00:57:40,880 --> 00:57:45,080
as its as<font color="#CCCCCC"> it's being forwarded</font><font color="#E5E5E5"> through a</font>

1428
00:57:42,470 --> 00:57:47,930
<font color="#E5E5E5">network rather than have that router</font>

1429
00:57:45,080 --> 00:57:49,790
immediately<font color="#E5E5E5"> look do</font><font color="#CCCCCC"> a lookup and send it</font>

1430
00:57:47,930 --> 00:57:51,379
<font color="#CCCCCC">back to the source the router puts it</font>

1431
00:57:49,790 --> 00:57:53,630
back in the same LSP that<font color="#CCCCCC"> it got</font><font color="#E5E5E5"> it from</font>

1432
00:57:51,380 --> 00:57:56,750
and the packet continues all the<font color="#CCCCCC"> way to</font>

1433
00:57:53,630 --> 00:57:59,480
the end<font color="#E5E5E5"> pops out there and then routes</font>

1434
00:57:56,750 --> 00:58:02,570
<font color="#E5E5E5">so it makes it work but it makes</font>

1435
00:57:59,480 --> 00:58:05,030
traceroute look really weird<font color="#E5E5E5"> so here's</font>

1436
00:58:02,570 --> 00:58:06,830
the<font color="#CCCCCC"> the details on that you know throw</font>

1437
00:58:05,030 --> 00:58:08,300
out your your previous example of how

1438
00:58:06,830 --> 00:58:11,060
traceroute works<font color="#E5E5E5"> as you weren't coming</font>

1439
00:58:08,300 --> 00:58:13,850
through hops 1 2 3 4<font color="#CCCCCC"> you what's</font>

1440
00:58:11,060 --> 00:58:15,680
happening<font color="#E5E5E5"> now is router 1 sends its ICMP</font>

1441
00:58:13,850 --> 00:58:18,279
message all the<font color="#E5E5E5"> way down to router four</font>

1442
00:58:15,680 --> 00:58:20,509
<font color="#E5E5E5">before returning it to the source and</font>

1443
00:58:18,280 --> 00:58:24,530
here's what it looks like<font color="#E5E5E5"> here's an</font>

1444
00:58:20,510 --> 00:58:26,540
<font color="#CCCCCC">example of 18t doing it</font><font color="#E5E5E5"> so you see a</font>

1445
00:58:24,530 --> 00:58:28,670
packet sitting in<font color="#E5E5E5"> Global Crossing Palo</font>

1446
00:58:26,540 --> 00:58:31,730
Alto it<font color="#E5E5E5"> hands off to AT&T in San</font>

1447
00:58:28,670 --> 00:58:35,600
Francisco<font color="#E5E5E5"> and you</font><font color="#CCCCCC"> say oh</font><font color="#E5E5E5"> no the latency</font>

1448
00:58:31,730 --> 00:58:38,090
just went up 72 milliseconds<font color="#E5E5E5"> in San</font>

1449
00:58:35,600 --> 00:58:41,299
<font color="#E5E5E5">Francisco is a congested link</font><font color="#CCCCCC"> no</font><font color="#E5E5E5"> what's</font>

1450
00:58:38,090 --> 00:58:43,310
happening is that<font color="#CCCCCC"> San Francisco packet</font>

1451
00:58:41,300 --> 00:58:45,410
and then the<font color="#E5E5E5"> Chicago packet and then the</font>

1452
00:58:43,310 --> 00:58:47,900
<font color="#CCCCCC">New York packet everything there is</font>

1453
00:58:45,410 --> 00:58:50,270
<font color="#E5E5E5">going all the way down</font><font color="#CCCCCC"> to that</font><font color="#E5E5E5"> very last</font>

1454
00:58:47,900 --> 00:58:52,190
<font color="#CCCCCC">router in New York</font><font color="#E5E5E5"> before</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> return</font>

1455
00:58:50,270 --> 00:58:55,100
<font color="#E5E5E5">mass message can come back to you so</font>

1456
00:58:52,190 --> 00:58:57,530
<font color="#E5E5E5">that's why you see every path every hop</font>

1457
00:58:55,100 --> 00:58:58,970
along the way has 74 milliseconds<font color="#E5E5E5"> that's</font>

1458
00:58:57,530 --> 00:59:01,040
<font color="#E5E5E5">usually the indication</font><font color="#CCCCCC"> that that's</font>

1459
00:58:58,970 --> 00:59:02,750
happening if<font color="#E5E5E5"> you see something the</font>

1460
00:59:01,040 --> 00:59:05,359
latency<font color="#CCCCCC"> is precisely the same or</font>

1461
00:59:02,750 --> 00:59:07,640
precisely the<font color="#E5E5E5"> same</font><font color="#CCCCCC"> as you</font><font color="#E5E5E5"> can get</font><font color="#CCCCCC"> going</font>

1462
00:59:05,359 --> 00:59:10,490
through all these<font color="#E5E5E5"> different hops all the</font>

1463
00:59:07,640 --> 00:59:12,470
way to the edge point you're inside of

1464
00:59:10,490 --> 00:59:17,149
<font color="#CCCCCC">an LSP and you're seeing ICMP tunneling</font>

1465
00:59:12,470 --> 00:59:21,020
so try not<font color="#CCCCCC"> to freak out over</font><font color="#E5E5E5"> that really</font>

1466
00:59:17,150 --> 00:59:22,850
final thoughts on<font color="#E5E5E5"> trace</font><font color="#CCCCCC"> route</font><font color="#E5E5E5"> before</font>

1467
00:59:21,020 --> 00:59:26,810
beginning a trace route for any type of

1468
00:59:22,850 --> 00:59:28,600
serious analysis always<font color="#E5E5E5"> ask for forward</font>

1469
00:59:26,810 --> 00:59:30,770
<font color="#E5E5E5">and reverse source and destination paths</font>

1470
00:59:28,600 --> 00:59:32,960
<font color="#CCCCCC">someone sends you a trace route and they</font>

1471
00:59:30,770 --> 00:59:35,060
take out<font color="#E5E5E5"> three lines in the middle and</font>

1472
00:59:32,960 --> 00:59:37,910
they send<font color="#E5E5E5"> it to you they've done</font><font color="#CCCCCC"> almost</font>

1473
00:59:35,060 --> 00:59:39,380
<font color="#CCCCCC">nothing for you make sure</font><font color="#E5E5E5"> your NOC knows</font>

1474
00:59:37,910 --> 00:59:41,000
make sure<font color="#CCCCCC"> anyone that you talked</font><font color="#E5E5E5"> to</font>

1475
00:59:39,380 --> 00:59:42,320
knows make sure when you send a

1476
00:59:41,000 --> 00:59:44,150
traceroute<font color="#E5E5E5"> complaint yourself you don't</font>

1477
00:59:42,320 --> 00:59:45,380
<font color="#E5E5E5">get to get snippy</font><font color="#CCCCCC"> and say I've already</font>

1478
00:59:44,150 --> 00:59:46,449
<font color="#E5E5E5">done all</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> work and here's the three</font>

1479
00:59:45,380 --> 00:59:49,359
lines<font color="#E5E5E5"> that matter</font>

1480
00:59:46,449 --> 00:59:51,759
send us the<font color="#E5E5E5"> source and destination IP so</font>

1481
00:59:49,359 --> 00:59:53,769
people can actually troubleshoot it like

1482
00:59:51,759 --> 00:59:57,369
beware of<font color="#E5E5E5"> snippets of traceroute of</font>

1483
00:59:53,769 --> 00:59:59,669
missing information<font color="#CCCCCC"> and</font><font color="#E5E5E5"> also remember</font>

1484
00:59:57,369 --> 01:00:01,929
<font color="#E5E5E5">that</font><font color="#CCCCCC"> a user's</font><font color="#E5E5E5"> running a trace route</font>

1485
00:59:59,670 --> 01:00:05,380
towards an IP they saw<font color="#E5E5E5"> in</font><font color="#CCCCCC"> another trace</font>

1486
01:00:01,929 --> 01:00:09,969
route is is where<font color="#E5E5E5"> things tend</font><font color="#CCCCCC"> to go</font>

1487
01:00:05,380 --> 01:00:12,130
south<font color="#CCCCCC"> so a user might trace route dub</font>

1488
01:00:09,969 --> 01:00:13,839
dub dub<font color="#CCCCCC"> Yahoo comm and</font><font color="#E5E5E5"> they get 3/4 of</font>

1489
01:00:12,130 --> 01:00:16,630
the way<font color="#CCCCCC"> there and they find a yahoo</font>

1490
01:00:13,839 --> 01:00:18,640
router<font color="#CCCCCC"> and they say</font><font color="#E5E5E5"> I'm gonna trace her</font>

1491
01:00:16,630 --> 01:00:20,410
out to that Yahoo router<font color="#E5E5E5"> that's a</font>

1492
01:00:18,640 --> 01:00:23,019
<font color="#E5E5E5">completely</font><font color="#CCCCCC"> different forwarding</font>

1493
01:00:20,410 --> 01:00:25,359
characteristic than the<font color="#CCCCCC"> in</font><font color="#E5E5E5"> host so you</font>

1494
01:00:23,019 --> 01:00:27,279
really<font color="#E5E5E5"> need that real destination</font><font color="#CCCCCC"> IP you</font>

1495
01:00:25,359 --> 01:00:30,009
can't just<font color="#E5E5E5"> look at those IPs in the</font>

1496
01:00:27,279 --> 01:00:33,339
middle<font color="#E5E5E5"> and try to make your</font>

1497
01:00:30,009 --> 01:00:48,670
determinations<font color="#E5E5E5"> and that is my tutorial</font>

1498
01:00:33,339 --> 01:00:53,979
<font color="#E5E5E5">on trace route questions anybody</font><font color="#CCCCCC"> mic so</font>

1499
01:00:48,670 --> 01:00:57,029
it's on the recording<font color="#CCCCCC"> I can't get to a</font>

1500
01:00:53,979 --> 01:01:01,118
mic you can<font color="#E5E5E5"> see me</font><font color="#CCCCCC"> res but this is ready</font>

1501
01:00:57,029 --> 01:01:04,779
<font color="#E5E5E5">um so I traced</font><font color="#CCCCCC"> her out to my</font><font color="#E5E5E5"> host in</font>

1502
01:01:01,119 --> 01:01:09,039
Seattle<font color="#CCCCCC"> and</font><font color="#E5E5E5"> I from that host I traced</font>

1503
01:01:04,779 --> 01:01:11,949
her<font color="#E5E5E5"> out back here am</font><font color="#CCCCCC"> i seeing the full</font>

1504
01:01:09,039 --> 01:01:14,140
return path that that kind of

1505
01:01:11,949 --> 01:01:17,589
corresponds to the way<font color="#CCCCCC"> things</font><font color="#E5E5E5"> would have</font>

1506
01:01:14,140 --> 01:01:21,719
come back<font color="#E5E5E5"> from there</font><font color="#CCCCCC"> etc</font><font color="#E5E5E5"> and what am i</font>

1507
01:01:17,589 --> 01:01:24,099
learning how<font color="#CCCCCC"> much is it worth doing so</font>

1508
01:01:21,719 --> 01:01:26,109
<font color="#E5E5E5">you're not guaranteed</font><font color="#CCCCCC"> that you're seeing</font>

1509
01:01:24,099 --> 01:01:29,349
the full<font color="#E5E5E5"> reverse path but you're you're</font>

1510
01:01:26,109 --> 01:01:30,459
much more likely<font color="#E5E5E5"> to be assured</font><font color="#CCCCCC"> that</font>

1511
01:01:29,349 --> 01:01:32,079
you're seeing<font color="#CCCCCC"> something much more</font>

1512
01:01:30,459 --> 01:01:35,618
<font color="#E5E5E5">similar</font><font color="#CCCCCC"> to what that path would look</font>

1513
01:01:32,079 --> 01:01:38,890
like<font color="#CCCCCC"> so he's saying I'm</font><font color="#E5E5E5"> doing a tracer</font>

1514
01:01:35,619 --> 01:01:41,469
<font color="#E5E5E5">out to him in Seattle</font><font color="#CCCCCC"> he does the trace</font>

1515
01:01:38,890 --> 01:01:43,598
<font color="#CCCCCC">route</font><font color="#E5E5E5"> back to me back</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> my actual</font><font color="#CCCCCC"> end</font>

1516
01:01:41,469 --> 01:01:45,670
<font color="#CCCCCC">user host where I'm communicating from</font>

1517
01:01:43,599 --> 01:01:47,650
<font color="#E5E5E5">that is the best way you can</font><font color="#CCCCCC"> eliminate</font>

1518
01:01:45,670 --> 01:01:49,989
all of the the different things out

1519
01:01:47,650 --> 01:01:52,719
<font color="#E5E5E5">there</font><font color="#CCCCCC"> and really</font><font color="#E5E5E5"> get the route this</font><font color="#CCCCCC"> is</font>

1520
01:01:49,989 --> 01:01:54,339
how the packet got to me this is<font color="#E5E5E5"> how my</font>

1521
01:01:52,719 --> 01:01:57,269
packet got to him this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> how his packet</font>

1522
01:01:54,339 --> 01:01:58,970
got to me with all the disclaimers of

1523
01:01:57,269 --> 01:02:01,790
multipath

1524
01:01:58,970 --> 01:02:03,319
hashing all of<font color="#E5E5E5"> those things that can you</font>

1525
01:02:01,790 --> 01:02:05,750
<font color="#E5E5E5">know maybe that traceroute packet went</font>

1526
01:02:03,319 --> 01:02:07,310
down<font color="#CCCCCC"> the clean path and maybe the the</font>

1527
01:02:05,750 --> 01:02:08,990
real<font color="#CCCCCC"> flow that's been broken has gone</font>

1528
01:02:07,310 --> 01:02:11,750
down the broken path<font color="#E5E5E5"> but you've</font>

1529
01:02:08,990 --> 01:02:14,868
eliminated<font color="#E5E5E5"> most of the issues</font><font color="#CCCCCC"> that you</font>

1530
01:02:11,750 --> 01:02:18,380
see<font color="#E5E5E5"> are around the the policy change</font>

1531
01:02:14,869 --> 01:02:20,060
<font color="#E5E5E5">where you know the</font><font color="#CCCCCC"> the IP address</font>

1532
01:02:18,380 --> 01:02:21,349
crosses into<font color="#CCCCCC"> Sprint</font><font color="#E5E5E5"> and so suddenly</font>

1533
01:02:20,060 --> 01:02:23,000
<font color="#E5E5E5">their routing policy changes</font><font color="#CCCCCC"> their</font>

1534
01:02:21,349 --> 01:02:24,500
reverse path changes and you can't see

1535
01:02:23,000 --> 01:02:26,660
it<font color="#E5E5E5"> if you can get the guy on</font><font color="#CCCCCC"> the other</font>

1536
01:02:24,500 --> 01:02:28,190
<font color="#E5E5E5">end to do that trace</font><font color="#CCCCCC"> route and send it</font>

1537
01:02:26,660 --> 01:02:30,950
back<font color="#CCCCCC"> to</font><font color="#E5E5E5"> you it's a much better place to</font>

1538
01:02:28,190 --> 01:02:32,930
start from<font color="#CCCCCC"> its its eliminates</font><font color="#E5E5E5"> eighty</font>

1539
01:02:30,950 --> 01:02:36,618
five ninety percent of the issues<font color="#CCCCCC"> that</font>

1540
01:02:32,930 --> 01:02:39,950
<font color="#E5E5E5">you'll see right off the</font><font color="#CCCCCC"> bat</font><font color="#E5E5E5"> one ring</font>

1541
01:02:36,619 --> 01:02:42,260
about the current slide<font color="#CCCCCC"> how to read it</font>

1542
01:02:39,950 --> 01:02:45,169
<font color="#E5E5E5">does it mean that starting with the top</font>

1543
01:02:42,260 --> 01:02:48,020
number three<font color="#E5E5E5"> we have this MPLS tunneling</font>

1544
01:02:45,170 --> 01:02:51,230
<font color="#CCCCCC">and can I say that it is that all</font><font color="#E5E5E5"> the</font>

1545
01:02:48,020 --> 01:02:55,310
<font color="#CCCCCC">devices maybe up</font><font color="#E5E5E5"> to hop number nine our</font>

1546
01:02:51,230 --> 01:02:57,650
MPLS tunneling devices or yeah so you

1547
01:02:55,310 --> 01:02:59,660
know MPLS is<font color="#E5E5E5"> used by large carrier</font>

1548
01:02:57,650 --> 01:03:00,920
networks<font color="#E5E5E5"> to move the the packet</font><font color="#CCCCCC"> from</font>

1549
01:02:59,660 --> 01:03:02,480
point A to point B and<font color="#CCCCCC"> so what's</font>

1550
01:03:00,920 --> 01:03:04,520
happening here<font color="#E5E5E5"> is there's an LSP that's</font>

1551
01:03:02,480 --> 01:03:06,710
<font color="#CCCCCC">taking the packet from this router in</font>

1552
01:03:04,520 --> 01:03:09,619
San Francisco to that router in<font color="#E5E5E5"> New York</font>

1553
01:03:06,710 --> 01:03:11,869
<font color="#E5E5E5">but because they haven't turned off</font>

1554
01:03:09,619 --> 01:03:14,180
TTL decrement<font color="#E5E5E5"> you can still see all the</font>

1555
01:03:11,869 --> 01:03:16,730
<font color="#E5E5E5">hops along the way so what's happening</font>

1556
01:03:14,180 --> 01:03:18,649
is hop<font color="#E5E5E5"> three after it does its</font>

1557
01:03:16,730 --> 01:03:21,109
<font color="#CCCCCC">traceroute</font><font color="#E5E5E5"> and it says I'm dropping this</font>

1558
01:03:18,650 --> 01:03:23,930
packet<font color="#E5E5E5"> here in San Francisco</font><font color="#CCCCCC"> I need to</font>

1559
01:03:21,109 --> 01:03:25,339
return my ICMP it's not doing a routing

1560
01:03:23,930 --> 01:03:27,140
lookup finding the source<font color="#E5E5E5"> address and</font>

1561
01:03:25,339 --> 01:03:28,910
<font color="#E5E5E5">sending it back it's putting it in that</font>

1562
01:03:27,140 --> 01:03:31,190
<font color="#E5E5E5">same LSP going all the way to that</font>

1563
01:03:28,910 --> 01:03:33,879
original<font color="#E5E5E5"> destination so yeah you're</font>

1564
01:03:31,190 --> 01:03:36,349
seeing all the router<font color="#CCCCCC"> pads along the way</font>

1565
01:03:33,880 --> 01:03:38,210
to<font color="#E5E5E5"> that final</font><font color="#CCCCCC"> destination and</font><font color="#E5E5E5"> once it</font>

1566
01:03:36,349 --> 01:03:39,980
hops out at the end it routes all the

1567
01:03:38,210 --> 01:03:42,050
way back but that<font color="#E5E5E5"> explains the the</font>

1568
01:03:39,980 --> 01:03:44,119
latency so this is the same<font color="#E5E5E5"> for number</font>

1569
01:03:42,050 --> 01:03:47,470
four and so<font color="#E5E5E5"> on so</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> number fours</font><font color="#CCCCCC"> it's</font>

1570
01:03:44,119 --> 01:03:50,240
the same thing and<font color="#E5E5E5"> so on yes</font><font color="#CCCCCC"> thank you</font>

1571
01:03:47,470 --> 01:03:52,520
<font color="#CCCCCC">I'm Matthias from D cakes</font>

1572
01:03:50,240 --> 01:03:54,470
I was wondering some new tracer tools I

1573
01:03:52,520 --> 01:04:02,480
have<font color="#CCCCCC"> this</font><font color="#E5E5E5"> additional option it's called</font>

1574
01:03:54,470 --> 01:04:05,959
Paris so I was thinking it has<font color="#CCCCCC"> to do</font>

1575
01:04:02,480 --> 01:04:07,339
that<font color="#CCCCCC"> they tried to</font><font color="#E5E5E5"> change port numbers</font>

1576
01:04:05,960 --> 01:04:09,170
and stuff<font color="#E5E5E5"> like this</font><font color="#CCCCCC"> so that</font><font color="#E5E5E5"> they</font>

1577
01:04:07,339 --> 01:04:11,420
<font color="#E5E5E5">enforced different</font><font color="#CCCCCC"> he seemed pleased do</font>

1578
01:04:09,170 --> 01:04:14,599
you have any<font color="#E5E5E5"> details</font><font color="#CCCCCC"> on that</font>

1579
01:04:11,420 --> 01:04:16,880
yeah<font color="#CCCCCC"> I</font><font color="#E5E5E5"> should've mentioned that so like</font>

1580
01:04:14,599 --> 01:04:19,339
<font color="#E5E5E5">I said the more</font><font color="#CCCCCC"> you can change the port</font>

1581
01:04:16,880 --> 01:04:20,990
numbers<font color="#CCCCCC"> the more you</font><font color="#E5E5E5"> can you can vary</font>

1582
01:04:19,339 --> 01:04:23,119
the probe the<font color="#CCCCCC"> more likely you are to</font>

1583
01:04:20,990 --> 01:04:25,129
encounter<font color="#E5E5E5"> all</font><font color="#CCCCCC"> the different paths out</font>

1584
01:04:23,119 --> 01:04:27,530
there<font color="#E5E5E5"> so there's there's many different</font>

1585
01:04:25,130 --> 01:04:31,190
<font color="#E5E5E5">tration implementations out there one</font>

1586
01:04:27,530 --> 01:04:32,930
obviously<font color="#E5E5E5"> Paris that</font><font color="#CCCCCC"> we'll try to build</font>

1587
01:04:31,190 --> 01:04:34,849
<font color="#E5E5E5">that in so as it does multiple probes</font>

1588
01:04:32,930 --> 01:04:37,098
and to some degree<font color="#CCCCCC"> you</font><font color="#E5E5E5"> can</font><font color="#CCCCCC"> get this out</font>

1589
01:04:34,849 --> 01:04:38,960
of<font color="#CCCCCC"> Mt r2</font><font color="#E5E5E5"> if you leave in TR running it's</font>

1590
01:04:37,099 --> 01:04:40,220
basically just like top for<font color="#E5E5E5"> your</font><font color="#CCCCCC"> trace</font>

1591
01:04:38,960 --> 01:04:42,440
<font color="#CCCCCC">route that's it</font><font color="#E5E5E5"> there and repeats over</font>

1592
01:04:40,220 --> 01:04:45,140
and over<font color="#E5E5E5"> and over every</font><font color="#CCCCCC"> time it does it</font>

1593
01:04:42,440 --> 01:04:47,450
<font color="#E5E5E5">launches a new probe potentially exposes</font>

1594
01:04:45,140 --> 01:04:49,129
a new path so if you leave an MTR

1595
01:04:47,450 --> 01:04:51,558
running you'll tend<font color="#CCCCCC"> to see all of</font><font color="#E5E5E5"> those</font>

1596
01:04:49,130 --> 01:04:55,280
<font color="#E5E5E5">and</font><font color="#CCCCCC"> there's other tools</font><font color="#E5E5E5"> out there that</font>

1597
01:04:51,559 --> 01:04:57,200
<font color="#E5E5E5">I'm not familiar with all</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> them but as</font>

1598
01:04:55,280 --> 01:04:59,089
a way to<font color="#E5E5E5"> kind of go out and find all</font>

1599
01:04:57,200 --> 01:05:01,250
those different paths<font color="#CCCCCC"> yeah</font><font color="#E5E5E5"> change</font><font color="#CCCCCC"> the</font>

1600
01:04:59,089 --> 01:05:04,520
change of the<font color="#E5E5E5"> destination ports source</font>

1601
01:05:01,250 --> 01:05:07,520
<font color="#CCCCCC">ports</font><font color="#E5E5E5"> everything so and the second</font>

1602
01:05:04,520 --> 01:05:10,520
question<font color="#E5E5E5"> so some sometimes you see an</font>

1603
01:05:07,520 --> 01:05:13,040
even your presentation<font color="#CCCCCC"> some</font><font color="#E5E5E5"> trace first</font>

1604
01:05:10,520 --> 01:05:19,970
give back some MPLS labels do they help

1605
01:05:13,040 --> 01:05:23,089
<font color="#E5E5E5">you with any debugging</font><font color="#CCCCCC"> I meant</font><font color="#E5E5E5"> to throw</font>

1606
01:05:19,970 --> 01:05:25,459
<font color="#E5E5E5">that in there</font><font color="#CCCCCC"> so there's a wind MPLS</font>

1607
01:05:23,089 --> 01:05:27,710
came out<font color="#E5E5E5"> there was</font><font color="#CCCCCC"> a big question of how</font>

1608
01:05:25,460 --> 01:05:29,359
do we<font color="#E5E5E5"> communicate MPLS information back</font>

1609
01:05:27,710 --> 01:05:33,710
in<font color="#E5E5E5"> that trace route and so there was an</font>

1610
01:05:29,359 --> 01:05:36,020
extension<font color="#E5E5E5"> basically what happens is you</font>

1611
01:05:33,710 --> 01:05:38,710
<font color="#CCCCCC">can encode some amount</font><font color="#E5E5E5"> of information in</font>

1612
01:05:36,020 --> 01:05:41,660
the ICMP message as<font color="#E5E5E5"> you send it</font><font color="#CCCCCC"> back</font>

1613
01:05:38,710 --> 01:05:44,089
<font color="#E5E5E5">when you send the</font><font color="#CCCCCC"> the returned packet</font>

1614
01:05:41,660 --> 01:05:47,000
<font color="#E5E5E5">back you send some</font><font color="#CCCCCC"> of the</font><font color="#E5E5E5"> original</font>

1615
01:05:44,089 --> 01:05:50,150
packet so tell you back to an example<font color="#CCCCCC"> I</font>

1616
01:05:47,000 --> 01:05:53,329
launched a pro packet it's 64 bytes long

1617
01:05:50,150 --> 01:05:55,670
<font color="#CCCCCC">I stick some piece of</font><font color="#E5E5E5"> information in the</font>

1618
01:05:53,329 --> 01:05:57,770
header<font color="#E5E5E5"> you know I know the source</font><font color="#CCCCCC"> the</font>

1619
01:05:55,670 --> 01:06:00,079
desks all that stuff<font color="#CCCCCC"> when the router</font>

1620
01:05:57,770 --> 01:06:02,450
drops<font color="#E5E5E5"> that packet and sends its ICMP</font>

1621
01:06:00,079 --> 01:06:05,540
back it copies the<font color="#CCCCCC"> first bit</font><font color="#E5E5E5"> of that</font>

1622
01:06:02,450 --> 01:06:08,839
message and in doing that copy<font color="#E5E5E5"> it can</font>

1623
01:06:05,540 --> 01:06:11,270
also include MPLS information<font color="#E5E5E5"> it's not</font>

1624
01:06:08,839 --> 01:06:13,670
<font color="#E5E5E5">terribly helpful for anyone outside of</font>

1625
01:06:11,270 --> 01:06:15,470
<font color="#E5E5E5">the the isp network and it's actually</font>

1626
01:06:13,670 --> 01:06:18,559
<font color="#E5E5E5">not</font><font color="#CCCCCC"> even</font><font color="#E5E5E5"> helpful for that it's basically</font>

1627
01:06:15,470 --> 01:06:20,240
telling you the<font color="#E5E5E5"> label number which</font>

1628
01:06:18,559 --> 01:06:22,860
you're not really<font color="#E5E5E5"> going to do</font><font color="#CCCCCC"> anything</font>

1629
01:06:20,240 --> 01:06:25,109
with unless you are troubleshooting and

1630
01:06:22,860 --> 01:06:26,370
<font color="#E5E5E5">implementation that's broken</font><font color="#CCCCCC"> you pretty</font>

1631
01:06:25,110 --> 01:06:29,670
<font color="#E5E5E5">much have to be the carrier on the</font>

1632
01:06:26,370 --> 01:06:31,830
<font color="#E5E5E5">network looking at it to see but some</font>

1633
01:06:29,670 --> 01:06:33,630
<font color="#CCCCCC">traceroute</font><font color="#E5E5E5"> implementations will be able</font>

1634
01:06:31,830 --> 01:06:35,910
to interpret<font color="#E5E5E5"> that and display an actual</font>

1635
01:06:33,630 --> 01:06:37,260
label number<font color="#CCCCCC"> as it goes through</font><font color="#E5E5E5"> or</font>

1636
01:06:35,910 --> 01:06:38,670
you'll be<font color="#CCCCCC"> able to see the stack depth</font>

1637
01:06:37,260 --> 01:06:41,970
you'll be able to see if it's inside<font color="#E5E5E5"> of</font>

1638
01:06:38,670 --> 01:06:43,710
<font color="#E5E5E5">two LS B's or three LSPs for someone on</font>

1639
01:06:41,970 --> 01:06:48,419
<font color="#E5E5E5">the</font><font color="#CCCCCC"> internet</font><font color="#E5E5E5"> not on that network it's</font>

1640
01:06:43,710 --> 01:06:52,970
essentially pointless<font color="#CCCCCC"> Annie</font><font color="#E5E5E5"> I'm Randy</font>

1641
01:06:48,420 --> 01:06:57,000
<font color="#CCCCCC">bozo</font><font color="#E5E5E5"> J again</font><font color="#CCCCCC"> um</font><font color="#E5E5E5"> regarding exploring</font>

1642
01:06:52,970 --> 01:06:59,339
different hashing etc some if anybody's

1643
01:06:57,000 --> 01:07:05,030
interested<font color="#CCCCCC"> just write to me</font><font color="#E5E5E5"> and I'll</font>

1644
01:06:59,340 --> 01:07:07,980
point you to<font color="#E5E5E5"> our ICM</font><font color="#CCCCCC"> internet</font>

1645
01:07:05,030 --> 01:07:10,590
measurement conference paper from a year

1646
01:07:07,980 --> 01:07:17,450
ago<font color="#E5E5E5"> where we</font><font color="#CCCCCC"> actually looked very</font>

1647
01:07:10,590 --> 01:07:19,380
heavily at using ping with I deem

1648
01:07:17,450 --> 01:07:22,529
manipulation<font color="#E5E5E5"> just as Paris or a</font>

1649
01:07:19,380 --> 01:07:26,250
<font color="#E5E5E5">traceroute those to explore pads and</font>

1650
01:07:22,530 --> 01:07:33,000
find out how radically crazily different

1651
01:07:26,250 --> 01:07:38,130
they can<font color="#CCCCCC"> be over and what's worse is on</font>

1652
01:07:33,000 --> 01:07:39,870
the same physical<font color="#CCCCCC"> fiber with people</font>

1653
01:07:38,130 --> 01:07:43,200
<font color="#E5E5E5">because you can't get a hundred gig</font>

1654
01:07:39,870 --> 01:07:48,230
interface from Ashburn to Dallas<font color="#E5E5E5"> so you</font>

1655
01:07:43,200 --> 01:07:48,230
take ten<font color="#CCCCCC"> of them and you</font><font color="#E5E5E5"> lag them</font>

1656
01:07:48,260 --> 01:07:52,980
radically different times<font color="#E5E5E5"> if you can</font>

1657
01:07:51,030 --> 01:07:58,680
explore those different fibers in the

1658
01:07:52,980 --> 01:08:00,780
<font color="#E5E5E5">lag so be careful um for the kind of</font>

1659
01:07:58,680 --> 01:08:04,740
stuff we as operators do you're close

1660
01:08:00,780 --> 01:08:08,190
enough<font color="#CCCCCC"> for</font><font color="#E5E5E5"> government work for</font><font color="#CCCCCC"> the kind</font>

1661
01:08:04,740 --> 01:08:10,140
of things researchers do you better know

1662
01:08:08,190 --> 01:08:12,360
what<font color="#E5E5E5"> you're</font><font color="#CCCCCC"> doing with paying and</font><font color="#E5E5E5"> we saw</font>

1663
01:08:10,140 --> 01:08:16,800
like<font color="#E5E5E5"> 30 percent differences on the same</font>

1664
01:08:12,360 --> 01:08:20,430
path<font color="#E5E5E5"> on the same fiber hope not to see</font>

1665
01:08:16,800 --> 01:08:23,370
<font color="#E5E5E5">that not on the same fiber but a lot of</font>

1666
01:08:20,430 --> 01:08:25,650
<font color="#E5E5E5">times what will</font><font color="#CCCCCC"> happen</font><font color="#E5E5E5"> is you'll someone</font>

1667
01:08:23,370 --> 01:08:28,380
will take<font color="#CCCCCC"> ten geeky circuits or ten by</font>

1668
01:08:25,649 --> 01:08:30,240
ten<font color="#E5E5E5"> between Ashburn and Dallas</font><font color="#CCCCCC"> and</font>

1669
01:08:28,380 --> 01:08:31,680
<font color="#CCCCCC">they'll get</font><font color="#E5E5E5"> it from three different</font>

1670
01:08:30,240 --> 01:08:33,059
carriers for<font color="#E5E5E5"> three different</font><font color="#CCCCCC"> fiber paths</font>

1671
01:08:31,680 --> 01:08:35,370
and<font color="#E5E5E5"> they'll they'll treat it the same</font>

1672
01:08:33,060 --> 01:08:36,630
internally you'll do a low balance

1673
01:08:35,370 --> 01:08:38,279
<font color="#CCCCCC">across all three</font>

1674
01:08:36,630 --> 01:08:41,250
and all that<font color="#E5E5E5"> but one will be much higher</font>

1675
01:08:38,279 --> 01:08:44,279
than<font color="#CCCCCC"> the other it's really rare to see</font>

1676
01:08:41,250 --> 01:08:46,290
that<font color="#CCCCCC"> big of a variance on the same path</font>

1677
01:08:44,279 --> 01:08:48,689
you'll see some and that's<font color="#E5E5E5"> why you have</font>

1678
01:08:46,290 --> 01:08:50,609
to do hashing you can't just ship<font color="#E5E5E5"> every</font>

1679
01:08:48,689 --> 01:08:52,500
packet down with a perfectly<font color="#E5E5E5"> even load</font>

1680
01:08:50,609 --> 01:08:54,450
<font color="#E5E5E5">balancer you'll see reordering different</font>

1681
01:08:52,500 --> 01:08:55,890
<font color="#CCCCCC">fibre cable lengths different different</font>

1682
01:08:54,450 --> 01:08:58,649
<font color="#CCCCCC">things like that</font><font color="#E5E5E5"> different</font><font color="#CCCCCC"> queue depths</font>

1683
01:08:55,890 --> 01:09:01,920
on every interface<font color="#CCCCCC"> but a lot of carriers</font>

1684
01:08:58,649 --> 01:09:03,540
out there are mixing<font color="#E5E5E5"> and matching you</font>

1685
01:09:01,920 --> 01:09:05,700
know you go<font color="#E5E5E5"> out and you</font><font color="#CCCCCC"> buy whatever the</font>

1686
01:09:03,540 --> 01:09:08,370
cheapest path is at the time and you in

1687
01:09:05,700 --> 01:09:12,569
some ways<font color="#CCCCCC"> load-balanced it with a longer</font>

1688
01:09:08,370 --> 01:09:15,870
path<font color="#CCCCCC"> and a shorter path</font><font color="#E5E5E5"> yeah hi Joe with</font>

1689
01:09:12,569 --> 01:09:19,880
<font color="#CCCCCC">info</font><font color="#E5E5E5"> relay</font><font color="#CCCCCC"> our help desk is</font><font color="#E5E5E5"> really smart</font>

1690
01:09:15,870 --> 01:09:22,380
<font color="#E5E5E5">so we asked for forward and reverse</font><font color="#CCCCCC"> mtrs</font>

1691
01:09:19,880 --> 01:09:24,600
<font color="#E5E5E5">instead of trace routes from customers</font>

1692
01:09:22,380 --> 01:09:26,819
<font color="#E5E5E5">and then you know trust that they can</font>

1693
01:09:24,600 --> 01:09:28,890
<font color="#E5E5E5">get it but you made an</font><font color="#CCCCCC"> offhand comment</font>

1694
01:09:26,819 --> 01:09:32,040
<font color="#E5E5E5">about that</font><font color="#CCCCCC"> bang</font><font color="#E5E5E5"> on the CPU of every</font>

1695
01:09:28,890 --> 01:09:36,300
intermediate<font color="#E5E5E5"> router in between is that</font>

1696
01:09:32,040 --> 01:09:40,019
are we being bad net citizens<font color="#E5E5E5"> when we do</font>

1697
01:09:36,300 --> 01:09:42,180
that<font color="#CCCCCC"> maybe so I'll give you</font><font color="#E5E5E5"> an example</font>

1698
01:09:40,020 --> 01:09:44,910
<font color="#CCCCCC">and I thought</font><font color="#E5E5E5"> I had more details in here</font>

1699
01:09:42,180 --> 01:09:47,490
<font color="#E5E5E5">slide wise on some of the</font><font color="#CCCCCC"> the different</font>

1700
01:09:44,910 --> 01:09:49,680
hard coded limits but<font color="#E5E5E5"> you know and again</font>

1701
01:09:47,490 --> 01:09:51,330
<font color="#CCCCCC">this depends</font><font color="#E5E5E5"> greatly on</font><font color="#CCCCCC"> router vendor</font>

1702
01:09:49,680 --> 01:09:53,130
and software and<font color="#E5E5E5"> things like that but</font>

1703
01:09:51,330 --> 01:09:54,809
there are<font color="#CCCCCC"> a lot of</font><font color="#E5E5E5"> boxes out</font><font color="#CCCCCC"> there a lot</font>

1704
01:09:53,130 --> 01:09:56,370
<font color="#CCCCCC">of box is still</font><font color="#E5E5E5"> deployed where there's a</font>

1705
01:09:54,810 --> 01:09:58,980
limit of like a hundred<font color="#E5E5E5"> packets per</font>

1706
01:09:56,370 --> 01:10:02,400
second per line card for you know an 80

1707
01:09:58,980 --> 01:10:05,099
gig or a 40 gig line card<font color="#E5E5E5"> and so it</font>

1708
01:10:02,400 --> 01:10:07,230
doesn't<font color="#E5E5E5"> take much it takes you know 10</font>

1709
01:10:05,100 --> 01:10:09,750
<font color="#E5E5E5">10 gamers and three guys in the NOC</font>

1710
01:10:07,230 --> 01:10:11,339
running MTR and all of a<font color="#E5E5E5"> sudden you've</font>

1711
01:10:09,750 --> 01:10:14,400
<font color="#CCCCCC">got enough packets coming</font><font color="#E5E5E5"> through</font><font color="#CCCCCC"> that</font>

1712
01:10:11,340 --> 01:10:16,320
you're now dropping<font color="#CCCCCC"> TTL</font><font color="#E5E5E5"> and what tends</font>

1713
01:10:14,400 --> 01:10:17,280
to happen is the more people<font color="#E5E5E5"> that do</font>

1714
01:10:16,320 --> 01:10:18,570
<font color="#E5E5E5">that</font><font color="#CCCCCC"> and the worse it gets</font><font color="#E5E5E5"> the more</font>

1715
01:10:17,280 --> 01:10:20,730
people<font color="#E5E5E5"> fire up traceroute to figure out</font>

1716
01:10:18,570 --> 01:10:22,889
what's<font color="#E5E5E5"> wrong and so you yeah you can</font>

1717
01:10:20,730 --> 01:10:23,969
very<font color="#CCCCCC"> easily get you know</font><font color="#E5E5E5"> 100 gamers</font>

1718
01:10:22,890 --> 01:10:25,470
<font color="#CCCCCC">they're all</font><font color="#E5E5E5"> pissed off</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> they're</font>

1719
01:10:23,970 --> 01:10:27,240
their server rebooted they all fire<font color="#E5E5E5"> up</font>

1720
01:10:25,470 --> 01:10:30,300
<font color="#E5E5E5">traceroute and now you just broke more</font>

1721
01:10:27,240 --> 01:10:32,340
<font color="#E5E5E5">traceroute for a lot of people just make</font>

1722
01:10:30,300 --> 01:10:33,840
sure<font color="#CCCCCC"> that they keep in mind</font><font color="#E5E5E5"> don't leave</font>

1723
01:10:32,340 --> 01:10:35,820
it running<font color="#E5E5E5"> forever</font>

1724
01:10:33,840 --> 01:10:37,500
really the<font color="#CCCCCC"> the bigger fix there is talk</font>

1725
01:10:35,820 --> 01:10:39,360
to<font color="#E5E5E5"> your router vendors and ask for</font>

1726
01:10:37,500 --> 01:10:41,970
better<font color="#CCCCCC"> handling</font><font color="#E5E5E5"> and we've started to see</font>

1727
01:10:39,360 --> 01:10:43,469
<font color="#E5E5E5">more</font><font color="#CCCCCC"> and more of that over time so one</font>

1728
01:10:41,970 --> 01:10:47,700
of<font color="#E5E5E5"> the the</font><font color="#CCCCCC"> things I didn't</font><font color="#E5E5E5"> get to put in</font>

1729
01:10:43,470 --> 01:10:49,810
here<font color="#E5E5E5"> is juniper as I think</font><font color="#CCCCCC"> 11/4 pulled</font>

1730
01:10:47,700 --> 01:10:51,460
all of<font color="#CCCCCC"> their ICMP</font>

1731
01:10:49,810 --> 01:10:53,140
generation<font color="#CCCCCC"> rate-limiting out into a</font>

1732
01:10:51,460 --> 01:10:56,200
standard structure<font color="#E5E5E5"> called DDoS</font>

1733
01:10:53,140 --> 01:10:58,120
protection<font color="#CCCCCC"> miss names but</font><font color="#E5E5E5"> and you can</font>

1734
01:10:56,200 --> 01:11:00,940
<font color="#CCCCCC">actually</font><font color="#E5E5E5"> configure it and you can log it</font>

1735
01:10:58,120 --> 01:11:02,559
so you can see on MPC<font color="#E5E5E5"> seven I'm hitting</font>

1736
01:11:00,940 --> 01:11:04,629
this<font color="#CCCCCC"> limit and</font><font color="#E5E5E5"> that's why I'm not</font>

1737
01:11:02,560 --> 01:11:06,910
<font color="#E5E5E5">returning traceroute packets</font><font color="#CCCCCC"> and you</font><font color="#E5E5E5"> can</font>

1738
01:11:04,630 --> 01:11:09,280
<font color="#CCCCCC">actually bump</font><font color="#E5E5E5"> it up</font><font color="#CCCCCC"> but for a lot of</font>

1739
01:11:06,910 --> 01:11:11,470
boxes<font color="#E5E5E5"> for a lot of legacy deployed</font>

1740
01:11:09,280 --> 01:11:13,929
systems out<font color="#CCCCCC"> there</font><font color="#E5E5E5"> it's it's</font><font color="#CCCCCC"> hard-coded</font>

1741
01:11:11,470 --> 01:11:16,150
<font color="#CCCCCC">its per per line card it's per version</font>

1742
01:11:13,930 --> 01:11:18,370
<font color="#E5E5E5">of OS and you have no way to</font><font color="#CCCCCC"> change it</font>

1743
01:11:16,150 --> 01:11:24,849
<font color="#E5E5E5">even if the box is perfectly capable of</font>

1744
01:11:18,370 --> 01:11:28,480
doing<font color="#CCCCCC"> more</font><font color="#E5E5E5"> than that anybody else behind</font>

1745
01:11:24,850 --> 01:11:30,840
any pillars<font color="#E5E5E5"> all right well thank you</font>

1746
01:11:28,480 --> 01:11:30,839
guys<font color="#E5E5E5"> very much</font>

1747
01:11:45,790 --> 01:11:47,850
you

