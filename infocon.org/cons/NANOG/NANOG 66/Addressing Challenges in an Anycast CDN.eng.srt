1
00:00:05,170 --> 00:00:09,490
<font color="#E5E5E5">um we're</font><font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> go ahead and get</font><font color="#CCCCCC"> started</font>

2
00:00:07,540 --> 00:00:10,930
first up like to call up<font color="#E5E5E5"> Nick Holt from</font>

3
00:00:09,490 --> 00:00:12,940
Microsoft he'll be giving a talk<font color="#CCCCCC"> on</font>

4
00:00:10,930 --> 00:00:21,310
addressing<font color="#CCCCCC"> challenges in an inny caste</font>

5
00:00:12,940 --> 00:00:22,960
CDN<font color="#CCCCCC"> okay good</font><font color="#E5E5E5"> morning yeah</font><font color="#CCCCCC"> thanks you I</font>

6
00:00:21,310 --> 00:00:24,369
don't see so<font color="#E5E5E5"> much staggering</font><font color="#CCCCCC"> I think</font>

7
00:00:22,960 --> 00:00:27,520
you're off there people<font color="#E5E5E5"> are just getting</font>

8
00:00:24,369 --> 00:00:29,740
<font color="#E5E5E5">up slowly so hi I am Nick</font><font color="#CCCCCC"> Holt</font><font color="#E5E5E5"> from</font>

9
00:00:27,520 --> 00:00:32,528
Microsoft<font color="#CCCCCC"> I work in the Azure networking</font>

10
00:00:29,740 --> 00:00:34,780
team my largest<font color="#E5E5E5"> team I'm part</font><font color="#CCCCCC"> of is</font>

11
00:00:32,529 --> 00:00:36,940
responsible for<font color="#E5E5E5"> Microsoft's overall</font>

12
00:00:34,780 --> 00:00:38,949
backbone<font color="#CCCCCC"> Network 8075</font>

13
00:00:36,940 --> 00:00:41,739
a global network preparing all over the

14
00:00:38,949 --> 00:00:43,239
world<font color="#E5E5E5"> and in addition proxy and content</font>

15
00:00:41,739 --> 00:00:45,760
services to help<font color="#E5E5E5"> speed up</font><font color="#CCCCCC"> the</font>

16
00:00:43,239 --> 00:00:46,690
<font color="#E5E5E5">application performance that's what I'm</font>

17
00:00:45,760 --> 00:00:50,140
going<font color="#CCCCCC"> to talk about</font><font color="#E5E5E5"> today</font>

18
00:00:46,690 --> 00:00:50,890
and fast route was a paper that a bunch

19
00:00:50,140 --> 00:00:54,159
of us<font color="#E5E5E5"> put together</font>

20
00:00:50,890 --> 00:00:56,619
<font color="#CCCCCC">led by</font><font color="#E5E5E5"> Ashley Flavel</font><font color="#CCCCCC"> a great guy from</font>

21
00:00:54,159 --> 00:00:58,299
Australia<font color="#CCCCCC"> who is no longer with</font><font color="#E5E5E5"> the</font>

22
00:00:56,619 --> 00:01:00,970
<font color="#CCCCCC">company so he was kind enough</font><font color="#E5E5E5"> to lend me</font>

23
00:00:58,299 --> 00:01:02,820
<font color="#E5E5E5">all his slides</font><font color="#CCCCCC"> okay</font>

24
00:01:00,970 --> 00:01:05,950
and I'm<font color="#E5E5E5"> gonna push the green button</font>

25
00:01:02,820 --> 00:01:07,270
<font color="#E5E5E5">fabulous so let me give you an</font><font color="#CCCCCC"> overview</font>

26
00:01:05,950 --> 00:01:10,509
of what I'll<font color="#E5E5E5"> talk about today</font>

27
00:01:07,270 --> 00:01:13,060
<font color="#CCCCCC">so first rail was designed to help us</font>

28
00:01:10,509 --> 00:01:15,670
with our<font color="#E5E5E5"> load management most online</font>

29
00:01:13,060 --> 00:01:17,590
services<font color="#E5E5E5"> today exist in a small set</font><font color="#CCCCCC"> of</font>

30
00:01:15,670 --> 00:01:19,750
data centers it used<font color="#E5E5E5"> to be the case you</font>

31
00:01:17,590 --> 00:01:22,030
had a web server with the content on it

32
00:01:19,750 --> 00:01:23,770
delivering an HTML page<font color="#CCCCCC"> now all major</font>

33
00:01:22,030 --> 00:01:26,200
<font color="#CCCCCC">web sites you're coming</font><font color="#E5E5E5"> back to a data</font>

34
00:01:23,770 --> 00:01:28,060
<font color="#E5E5E5">center to get specific information and</font>

35
00:01:26,200 --> 00:01:30,130
placement whatever for that user<font color="#E5E5E5"> and</font>

36
00:01:28,060 --> 00:01:31,869
there's thousands<font color="#E5E5E5"> of machines doing that</font>

37
00:01:30,130 --> 00:01:34,899
so<font color="#E5E5E5"> you can't get that same stamp all</font>

38
00:01:31,869 --> 00:01:36,399
<font color="#CCCCCC">over the world</font><font color="#E5E5E5"> so the set of content</font>

39
00:01:34,899 --> 00:01:38,950
we're looking at is going<font color="#CCCCCC"> to be in a few</font>

40
00:01:36,399 --> 00:01:41,469
<font color="#CCCCCC">places</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> that you add a set</font><font color="#E5E5E5"> of edge</font>

41
00:01:38,950 --> 00:01:44,380
<font color="#E5E5E5">nodes you can</font><font color="#CCCCCC"> put edge nodes</font><font color="#E5E5E5"> anywhere</font><font color="#CCCCCC"> on</font>

42
00:01:41,469 --> 00:01:45,969
the<font color="#CCCCCC"> internet peering points</font><font color="#E5E5E5"> deep in ISPs</font>

43
00:01:44,380 --> 00:01:48,490
<font color="#CCCCCC">and in our data centers we have them</font>

44
00:01:45,969 --> 00:01:50,380
spread everywhere<font color="#E5E5E5"> and the goal of those</font>

45
00:01:48,490 --> 00:01:53,199
edge nodes is to reduce the latency of

46
00:01:50,380 --> 00:01:54,670
<font color="#E5E5E5">the services mainly through proxying the</font>

47
00:01:53,200 --> 00:01:57,310
traffic<font color="#E5E5E5"> I have a couple of slides I'll</font>

48
00:01:54,670 --> 00:01:59,079
explain<font color="#CCCCCC"> how we're going about that fast</font>

49
00:01:57,310 --> 00:02:02,079
route will be<font color="#E5E5E5"> the last section of the</font>

50
00:01:59,079 --> 00:02:05,678
<font color="#E5E5E5">talk that's the mechanism we</font><font color="#CCCCCC"> use to</font>

51
00:02:02,079 --> 00:02:07,538
manage load<font color="#E5E5E5"> so in the best case with</font>

52
00:02:05,679 --> 00:02:08,170
<font color="#CCCCCC">anycast</font><font color="#E5E5E5"> you have sufficient</font><font color="#CCCCCC"> server</font>

53
00:02:07,539 --> 00:02:10,600
capacity

54
00:02:08,169 --> 00:02:13,149
wherever the users organically land<font color="#E5E5E5"> and</font>

55
00:02:10,600 --> 00:02:15,849
their traffic<font color="#E5E5E5"> just goes there but there</font>

56
00:02:13,150 --> 00:02:17,620
can be<font color="#CCCCCC"> issues with swarming</font><font color="#E5E5E5"> organic</font>

57
00:02:15,849 --> 00:02:18,950
growth<font color="#E5E5E5"> and so we needed a load</font>

58
00:02:17,620 --> 00:02:20,510
<font color="#E5E5E5">management system and that's why</font>

59
00:02:18,950 --> 00:02:22,040
I'm going to talk<font color="#E5E5E5"> about and I put the</font>

60
00:02:20,510 --> 00:02:24,230
note at bottom traffic routing and<font color="#E5E5E5"> fast</font>

61
00:02:22,040 --> 00:02:26,090
<font color="#E5E5E5">route relies on</font><font color="#CCCCCC"> anycast</font><font color="#E5E5E5"> so you can all</font>

62
00:02:24,230 --> 00:02:27,980
prep your anycast<font color="#E5E5E5"> heart questions to hit</font>

63
00:02:26,090 --> 00:02:30,560
me<font color="#E5E5E5"> with at the end that's the point I'm</font>

64
00:02:27,980 --> 00:02:34,099
looking<font color="#E5E5E5"> forward to so it talks three</font>

65
00:02:30,560 --> 00:02:36,500
parts<font color="#E5E5E5"> why use an edge choosing the best</font>

66
00:02:34,099 --> 00:02:40,369
one<font color="#E5E5E5"> and then what fast route</font><font color="#CCCCCC"> adds on top</font>

67
00:02:36,500 --> 00:02:42,019
<font color="#E5E5E5">of that so why use an edge so as you can</font>

68
00:02:40,370 --> 00:02:45,049
<font color="#E5E5E5">tell</font><font color="#CCCCCC"> this example was by my colleague</font>

69
00:02:42,019 --> 00:02:47,780
Ashley so it deals with<font color="#E5E5E5"> a very important</font>

70
00:02:45,049 --> 00:02:49,040
user in Australia<font color="#CCCCCC"> and so we're assuming</font>

71
00:02:47,780 --> 00:02:51,319
the service<font color="#E5E5E5"> they're trying to connect to</font>

72
00:02:49,040 --> 00:02:53,500
is hosted<font color="#E5E5E5"> in the</font><font color="#CCCCCC"> US if you look at the</font>

73
00:02:51,319 --> 00:02:55,700
round-trip time from a user in Australia

74
00:02:53,500 --> 00:02:57,950
<font color="#CCCCCC">either</font><font color="#E5E5E5"> overall backbone or over the</font>

75
00:02:55,700 --> 00:03:00,980
<font color="#E5E5E5">internet it's about 180 milliseconds to</font>

76
00:02:57,950 --> 00:03:03,380
get<font color="#E5E5E5"> to the US and so to get the TCP</font>

77
00:03:00,980 --> 00:03:04,849
connection you got one<font color="#CCCCCC"> round trip the</font>

78
00:03:03,380 --> 00:03:07,549
first<font color="#CCCCCC"> byte</font><font color="#E5E5E5"> of</font><font color="#CCCCCC"> the response you've got a</font>

79
00:03:04,849 --> 00:03:09,470
second round trip if your<font color="#E5E5E5"> content is</font>

80
00:03:07,549 --> 00:03:10,940
<font color="#E5E5E5">over SSL</font><font color="#CCCCCC"> which</font><font color="#E5E5E5"> increasingly it is these</font>

81
00:03:09,470 --> 00:03:13,549
days<font color="#E5E5E5"> you've</font><font color="#CCCCCC"> got</font><font color="#E5E5E5"> another two round trips</font>

82
00:03:10,940 --> 00:03:15,440
for that handshake negotiation<font color="#E5E5E5"> so you</font>

83
00:03:13,549 --> 00:03:18,200
end up<font color="#E5E5E5"> with doing the math it says here</font>

84
00:03:15,440 --> 00:03:21,680
<font color="#CCCCCC">I'm glad I</font><font color="#E5E5E5"> wrote that down</font><font color="#CCCCCC"> 720</font>

85
00:03:18,200 --> 00:03:24,310
milliseconds for an SSL first bytes

86
00:03:21,680 --> 00:03:27,500
comes back to you<font color="#E5E5E5"> and with modern apps</font>

87
00:03:24,310 --> 00:03:29,480
<font color="#E5E5E5">we started off working on bing Microsoft</font>

88
00:03:27,500 --> 00:03:33,079
when we did this<font color="#E5E5E5"> project the page load</font>

89
00:03:29,480 --> 00:03:35,810
time goal is sub<font color="#E5E5E5"> one second at the 90th</font>

90
00:03:33,079 --> 00:03:39,620
percentile<font color="#E5E5E5"> of the</font><font color="#CCCCCC"> internet so we lose</font><font color="#E5E5E5"> if</font>

91
00:03:35,810 --> 00:03:42,440
<font color="#E5E5E5">we do this so how</font><font color="#CCCCCC"> does</font><font color="#E5E5E5"> an edge help so</font>

92
00:03:39,620 --> 00:03:44,959
if<font color="#E5E5E5"> you add in</font><font color="#CCCCCC"> the edge the client will</font>

93
00:03:42,440 --> 00:03:46,340
connect to the closest edge<font color="#E5E5E5"> next</font><font color="#CCCCCC"> section</font>

94
00:03:44,959 --> 00:03:48,350
of<font color="#E5E5E5"> the talk is</font><font color="#CCCCCC"> how you find the closest</font>

95
00:03:46,340 --> 00:03:50,120
edge<font color="#CCCCCC"> anis let's assume</font><font color="#E5E5E5"> they're</font>

96
00:03:48,350 --> 00:03:53,358
<font color="#E5E5E5">round-trip time is</font><font color="#CCCCCC"> a lot</font><font color="#E5E5E5"> better say 20</font>

97
00:03:50,120 --> 00:03:57,200
in the<font color="#E5E5E5"> 20 30 millisecond range your</font>

98
00:03:53,359 --> 00:03:59,510
initial handshake<font color="#E5E5E5"> TCP connect SSL</font><font color="#CCCCCC"> set up</font>

99
00:03:57,200 --> 00:04:01,849
get request is now over<font color="#E5E5E5"> that tiny</font>

100
00:03:59,510 --> 00:04:04,489
round-trip time so you've got<font color="#E5E5E5"> four times</font>

101
00:04:01,849 --> 00:04:06,858
<font color="#CCCCCC">twenty milliseconds</font><font color="#E5E5E5"> and then it takes</font>

102
00:04:04,489 --> 00:04:08,989
one round-trip<font color="#E5E5E5"> time we assume from that</font>

103
00:04:06,859 --> 00:04:11,389
edge site back to the main data center

104
00:04:08,989 --> 00:04:12,769
to<font color="#E5E5E5"> get</font><font color="#CCCCCC"> the content</font><font color="#E5E5E5"> there are a couple of</font>

105
00:04:11,389 --> 00:04:14,870
assumptions<font color="#E5E5E5"> in there one is this is</font>

106
00:04:12,769 --> 00:04:17,539
going to be<font color="#E5E5E5"> over a hot TCP connection or</font>

107
00:04:14,870 --> 00:04:18,950
you could use<font color="#E5E5E5"> your own protocol for</font>

108
00:04:17,539 --> 00:04:21,500
error correction anything you like<font color="#CCCCCC"> but</font>

109
00:04:18,950 --> 00:04:23,599
in general<font color="#CCCCCC"> for these connections which</font>

110
00:04:21,500 --> 00:04:25,639
are<font color="#E5E5E5"> across our</font><font color="#CCCCCC"> backbone</font><font color="#E5E5E5"> network over</font>

111
00:04:23,599 --> 00:04:27,200
previously<font color="#CCCCCC"> warmed connections it's one</font>

112
00:04:25,639 --> 00:04:29,150
<font color="#E5E5E5">round-trip time to go get the content</font>

113
00:04:27,200 --> 00:04:30,750
and<font color="#E5E5E5"> obviously on the</font><font color="#CCCCCC"> back end there's</font>

114
00:04:29,150 --> 00:04:32,729
some time for the<font color="#E5E5E5"> data center to figure</font>

115
00:04:30,750 --> 00:04:34,380
what the answer<font color="#CCCCCC"> is what the search</font>

116
00:04:32,730 --> 00:04:36,780
result is<font color="#E5E5E5"> or which piece of</font><font color="#CCCCCC"> email you</font>

117
00:04:34,380 --> 00:04:38,940
<font color="#E5E5E5">want so the math there</font><font color="#CCCCCC"> is four times the</font>

118
00:04:36,780 --> 00:04:41,219
<font color="#CCCCCC">twenty</font><font color="#E5E5E5"> plus</font><font color="#CCCCCC"> one times the one it's 70</font>

119
00:04:38,940 --> 00:04:43,650
now you're at 250 milliseconds so we

120
00:04:41,220 --> 00:04:45,720
basically<font color="#E5E5E5"> have the time to get that</font>

121
00:04:43,650 --> 00:04:48,090
first page<font color="#E5E5E5"> first bite of</font><font color="#CCCCCC"> the page to the</font>

122
00:04:45,720 --> 00:04:50,040
<font color="#CCCCCC">user so significant improvement</font><font color="#E5E5E5"> this is</font>

123
00:04:48,090 --> 00:04:53,030
called split<font color="#E5E5E5"> TCP this principle overall</font>

124
00:04:50,040 --> 00:04:55,470
didn't invent<font color="#E5E5E5"> this we just read about it</font>

125
00:04:53,030 --> 00:04:58,799
<font color="#CCCCCC">that's</font><font color="#E5E5E5"> only the start</font><font color="#CCCCCC"> of the</font><font color="#E5E5E5"> story right</font>

126
00:04:55,470 --> 00:05:00,810
<font color="#CCCCCC">because if your page weight is</font><font color="#E5E5E5"> 30 40 K</font>

127
00:04:58,800 --> 00:05:02,760
if has multiple URLs in there<font color="#E5E5E5"> all</font><font color="#CCCCCC"> of</font>

128
00:05:00,810 --> 00:05:05,970
that stacks on to the download time<font color="#E5E5E5"> and</font>

129
00:05:02,760 --> 00:05:08,310
all of<font color="#CCCCCC"> it can be accelerated any TCP</font>

130
00:05:05,970 --> 00:05:10,470
packet drops retransmits are now within

131
00:05:08,310 --> 00:05:14,580
<font color="#E5E5E5">that</font><font color="#CCCCCC"> short</font><font color="#E5E5E5"> 20 millisecond loop and that</font>

132
00:05:10,470 --> 00:05:16,770
<font color="#E5E5E5">really helps with</font><font color="#CCCCCC"> a slow start etc so</font>

133
00:05:14,580 --> 00:05:19,140
that's<font color="#E5E5E5"> why we</font><font color="#CCCCCC"> believe in the proxies and</font>

134
00:05:16,770 --> 00:05:21,120
the<font color="#E5E5E5"> problem</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> talk of</font><font color="#CCCCCC"> them as proxies</font>

135
00:05:19,140 --> 00:05:23,280
<font color="#E5E5E5">they are also doing caching so if the</font>

136
00:05:21,120 --> 00:05:24,810
content that is<font color="#CCCCCC"> being proxy it has a TTL</font>

137
00:05:23,280 --> 00:05:27,570
on it it'll<font color="#E5E5E5"> hold it there and deliver it</font>

138
00:05:24,810 --> 00:05:29,550
so that's the closest we are to a CDN<font color="#E5E5E5"> I</font>

139
00:05:27,570 --> 00:05:33,360
wouldn't say we're<font color="#E5E5E5"> a CDN we are a proxy</font>

140
00:05:29,550 --> 00:05:34,800
<font color="#E5E5E5">service that can cache static assets</font><font color="#CCCCCC"> so</font>

141
00:05:33,360 --> 00:05:36,450
the<font color="#E5E5E5"> next</font><font color="#CCCCCC"> section is how do</font><font color="#E5E5E5"> I direct the</font>

142
00:05:34,800 --> 00:05:38,310
user to the closest edge<font color="#E5E5E5"> the classic</font>

143
00:05:36,450 --> 00:05:39,539
answer<font color="#E5E5E5"> is mapped the</font><font color="#CCCCCC"> internet and then</font>

144
00:05:38,310 --> 00:05:42,000
we prefer<font color="#E5E5E5"> that anycast</font>

145
00:05:39,540 --> 00:05:43,740
so I'm gonna do<font color="#CCCCCC"> that one second and say</font>

146
00:05:42,000 --> 00:05:46,560
it's<font color="#E5E5E5"> better but everyone can have their</font>

147
00:05:43,740 --> 00:05:48,780
own<font color="#E5E5E5"> opinion</font><font color="#CCCCCC"> on this so with the map the</font>

148
00:05:46,560 --> 00:05:50,100
<font color="#CCCCCC">internet approach say you have here's</font>

149
00:05:48,780 --> 00:05:51,840
our<font color="#CCCCCC"> example you have four data</font><font color="#E5E5E5"> centers</font>

150
00:05:50,100 --> 00:05:54,270
around the world<font color="#CCCCCC"> let's call them</font><font color="#E5E5E5"> a</font><font color="#CCCCCC"> b c</font>

151
00:05:51,840 --> 00:05:55,919
<font color="#CCCCCC">and d creative naming and a set of</font>

152
00:05:54,270 --> 00:05:58,590
distributed users and what you want to

153
00:05:55,920 --> 00:06:00,600
do is figure out how to get each user<font color="#E5E5E5"> to</font>

154
00:05:58,590 --> 00:06:02,000
<font color="#CCCCCC">the closest data center to them because</font>

155
00:06:00,600 --> 00:06:04,710
<font color="#E5E5E5">that will give them the best performance</font>

156
00:06:02,000 --> 00:06:07,290
so the first thing you have<font color="#CCCCCC"> to</font><font color="#E5E5E5"> do is go</font>

157
00:06:04,710 --> 00:06:09,270
<font color="#CCCCCC">out and ping the internet or run a</font>

158
00:06:07,290 --> 00:06:11,700
flight that gathers data from your

159
00:06:09,270 --> 00:06:14,760
customers to say<font color="#CCCCCC"> ok the customer</font><font color="#E5E5E5"> that</font>

160
00:06:11,700 --> 00:06:17,070
use this<font color="#E5E5E5"> DNS server went</font><font color="#CCCCCC"> to this HTTP</font>

161
00:06:14,760 --> 00:06:18,900
endpoint<font color="#E5E5E5"> you can do that by doing a</font>

162
00:06:17,070 --> 00:06:21,240
flight<font color="#E5E5E5"> with goods on the</font><font color="#CCCCCC"> urls and</font>

163
00:06:18,900 --> 00:06:22,830
joining the data many different ways<font color="#E5E5E5"> but</font>

164
00:06:21,240 --> 00:06:25,160
you<font color="#CCCCCC"> basically come up</font><font color="#E5E5E5"> with some</font><font color="#CCCCCC"> giant</font>

165
00:06:22,830 --> 00:06:27,750
set of<font color="#E5E5E5"> data that is your map calculator</font>

166
00:06:25,160 --> 00:06:31,170
you feed the<font color="#CCCCCC"> output of that into your</font>

167
00:06:27,750 --> 00:06:32,670
DNS system<font color="#E5E5E5"> and then when any client</font>

168
00:06:31,170 --> 00:06:35,520
comes to<font color="#E5E5E5"> ask for the address</font><font color="#CCCCCC"> of your</font>

169
00:06:32,670 --> 00:06:39,150
service your DNS system<font color="#E5E5E5"> says ok like</font>

170
00:06:35,520 --> 00:06:43,979
magic the the<font color="#E5E5E5"> people in Asia will go to</font>

171
00:06:39,150 --> 00:06:46,318
data<font color="#CCCCCC"> center C pretty</font><font color="#E5E5E5"> common approach</font>

172
00:06:43,979 --> 00:06:47,699
and the one case I want<font color="#E5E5E5"> to</font><font color="#CCCCCC"> look at here</font>

173
00:06:46,319 --> 00:06:51,239
is<font color="#E5E5E5"> say one of your data centers goes</font>

174
00:06:47,699 --> 00:06:53,279
offline<font color="#E5E5E5"> like the Australia one</font><font color="#CCCCCC"> you have</font>

175
00:06:51,239 --> 00:06:55,349
to have some<font color="#CCCCCC"> kind of endpoint health</font>

176
00:06:53,279 --> 00:06:56,459
monitoring<font color="#E5E5E5"> from your DNS</font><font color="#CCCCCC"> system so it</font>

177
00:06:55,349 --> 00:06:58,558
realizes it needs to give out a

178
00:06:56,459 --> 00:06:59,999
different<font color="#CCCCCC"> answer because the set</font><font color="#E5E5E5"> of</font>

179
00:06:58,559 --> 00:07:02,429
people<font color="#E5E5E5"> who've you've given out the</font>

180
00:06:59,999 --> 00:07:03,899
answer<font color="#CCCCCC"> to the data center Australia</font><font color="#E5E5E5"> can</font>

181
00:07:02,429 --> 00:07:07,708
no<font color="#E5E5E5"> longer get there so they're having</font>

182
00:07:03,899 --> 00:07:09,869
like<font color="#E5E5E5"> a short service outage once you've</font>

183
00:07:07,709 --> 00:07:11,759
<font color="#E5E5E5">decided to change the answer you give</font>

184
00:07:09,869 --> 00:07:14,129
you<font color="#E5E5E5"> they have to wait for</font><font color="#CCCCCC"> DNS TTLs to</font>

185
00:07:11,759 --> 00:07:16,079
expire<font color="#E5E5E5"> and you</font><font color="#CCCCCC"> have to</font><font color="#E5E5E5"> wait for</font><font color="#CCCCCC"> the</font>

186
00:07:14,129 --> 00:07:17,609
application<font color="#E5E5E5"> to</font><font color="#CCCCCC"> give up and I'm windows</font>

187
00:07:16,079 --> 00:07:20,999
unfortunately hangs on to these DNS

188
00:07:17,609 --> 00:07:23,698
records for<font color="#E5E5E5"> quite a while but once</font>

189
00:07:20,999 --> 00:07:25,199
that's<font color="#CCCCCC"> happened</font><font color="#E5E5E5"> your DNS system your big</font>

190
00:07:23,699 --> 00:07:29,029
brain in the center<font color="#E5E5E5"> of the whole thing</font>

191
00:07:25,199 --> 00:07:31,199
can give out a better answer<font color="#E5E5E5"> there's a</font>

192
00:07:29,029 --> 00:07:33,689
couple<font color="#E5E5E5"> of</font><font color="#CCCCCC"> benefits from doing this the</font>

193
00:07:31,199 --> 00:07:36,449
primary<font color="#CCCCCC"> one is is control you can</font>

194
00:07:33,689 --> 00:07:38,639
ultimately<font color="#E5E5E5"> take any user to</font><font color="#CCCCCC"> any server</font>

195
00:07:36,449 --> 00:07:40,379
<font color="#E5E5E5">and this is really handy particularly</font>

196
00:07:38,639 --> 00:07:43,319
<font color="#CCCCCC">when you have</font><font color="#E5E5E5"> load and you</font><font color="#CCCCCC"> try to</font><font color="#E5E5E5"> move</font>

197
00:07:40,379 --> 00:07:45,479
<font color="#E5E5E5">traffic around based on load</font><font color="#CCCCCC"> we're more</font>

198
00:07:43,319 --> 00:07:47,369
<font color="#E5E5E5">focused on the performance</font><font color="#CCCCCC"> side</font><font color="#E5E5E5"> so</font>

199
00:07:45,479 --> 00:07:49,339
that's why the<font color="#CCCCCC"> I'll talk about anycast</font>

200
00:07:47,369 --> 00:07:51,989
next why we lean in that<font color="#E5E5E5"> direction</font>

201
00:07:49,339 --> 00:07:53,699
<font color="#CCCCCC">trade-offs does a high cost in</font>

202
00:07:51,989 --> 00:07:56,279
complexity<font color="#E5E5E5"> to this central DNS system</font>

203
00:07:53,699 --> 00:07:59,429
<font color="#E5E5E5">you have to have regular map builders</font>

204
00:07:56,279 --> 00:08:01,619
running gathering that data<font color="#E5E5E5"> any change</font>

205
00:07:59,429 --> 00:08:03,688
in<font color="#E5E5E5"> bgp on the internet will invalidate</font>

206
00:08:01,619 --> 00:08:05,189
<font color="#E5E5E5">your map there's some length of time</font>

207
00:08:03,689 --> 00:08:07,439
before<font color="#E5E5E5"> you found out</font><font color="#CCCCCC"> about that</font><font color="#E5E5E5"> change</font>

208
00:08:05,189 --> 00:08:11,839
<font color="#E5E5E5">and you update the map</font><font color="#CCCCCC"> too to give out</font>

209
00:08:07,439 --> 00:08:14,159
the new answers<font color="#CCCCCC"> DNS can be inaccurate</font>

210
00:08:11,839 --> 00:08:16,319
<font color="#CCCCCC">this is also a commonly known</font><font color="#E5E5E5"> problem</font>

211
00:08:14,159 --> 00:08:18,659
and a<font color="#E5E5E5"> DNS is one of the answers</font><font color="#CCCCCC"> to it</font>

212
00:08:16,319 --> 00:08:20,489
that you're<font color="#CCCCCC"> not</font><font color="#E5E5E5"> getting a call from the</font>

213
00:08:18,659 --> 00:08:22,438
<font color="#E5E5E5">client to</font><font color="#CCCCCC"> ask which is the server</font>

214
00:08:20,489 --> 00:08:25,258
closest to them<font color="#E5E5E5"> you're getting</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> call</font>

215
00:08:22,439 --> 00:08:27,209
from<font color="#E5E5E5"> the clients DNS server so the IP</font>

216
00:08:25,259 --> 00:08:29,969
address<font color="#CCCCCC"> you're doing the the</font><font color="#E5E5E5"> information</font>

217
00:08:27,209 --> 00:08:33,179
<font color="#E5E5E5">selection on is actually</font><font color="#CCCCCC"> off their DNS</font>

218
00:08:29,969 --> 00:08:34,708
server<font color="#E5E5E5"> and for availability it's quite</font>

219
00:08:33,179 --> 00:08:37,318
common<font color="#CCCCCC"> for a provider</font><font color="#E5E5E5"> to have</font><font color="#CCCCCC"> to</font>

220
00:08:34,708 --> 00:08:38,848
geographically separate<font color="#E5E5E5"> DNS servers so</font>

221
00:08:37,318 --> 00:08:41,789
for example at home<font color="#E5E5E5"> in</font><font color="#CCCCCC"> Seattle on my</font>

222
00:08:38,849 --> 00:08:43,559
local<font color="#E5E5E5"> ISP</font><font color="#CCCCCC"> the DNS servers when</font><font color="#E5E5E5"> we did</font>

223
00:08:41,789 --> 00:08:46,110
this<font color="#CCCCCC"> experiments was one was in Phoenix</font>

224
00:08:43,558 --> 00:08:48,839
and Arizona<font color="#E5E5E5"> and one was in Portland</font>

225
00:08:46,110 --> 00:08:51,529
<font color="#E5E5E5">Oregon</font><font color="#CCCCCC"> and I'm in Seattle so the closest</font>

226
00:08:48,839 --> 00:08:53,579
you can get to naming<font color="#E5E5E5"> me through DNS is</font>

227
00:08:51,529 --> 00:08:56,370
that I'm somewhere<font color="#CCCCCC"> between</font><font color="#E5E5E5"> those</font><font color="#CCCCCC"> two</font>

228
00:08:53,579 --> 00:08:57,120
spots<font color="#E5E5E5"> and then availability as I say one</font>

229
00:08:56,370 --> 00:08:59,370
of<font color="#E5E5E5"> the key facts</font>

230
00:08:57,120 --> 00:09:01,920
when a site goes down<font color="#CCCCCC"> you have</font><font color="#E5E5E5"> to change</font>

231
00:08:59,370 --> 00:09:03,300
<font color="#E5E5E5">your answer is the length of the TTL you</font>

232
00:09:01,920 --> 00:09:05,040
would have to<font color="#E5E5E5"> wait for</font><font color="#CCCCCC"> those</font><font color="#E5E5E5"> TTL is to</font>

233
00:09:03,300 --> 00:09:08,790
<font color="#CCCCCC">expires this drives people to use</font>

234
00:09:05,040 --> 00:09:11,400
relatively<font color="#E5E5E5"> short TTLs</font><font color="#CCCCCC"> on</font><font color="#E5E5E5"> unicast answers</font>

235
00:09:08,790 --> 00:09:14,790
and that causes<font color="#E5E5E5"> a lot of DNS lookups and</font>

236
00:09:11,400 --> 00:09:17,760
<font color="#E5E5E5">those we looked probably two years</font><font color="#CCCCCC"> ago</font>

237
00:09:14,790 --> 00:09:20,130
now<font color="#CCCCCC"> and the like 75th percentile for DNS</font>

238
00:09:17,760 --> 00:09:22,500
lookup time was<font color="#E5E5E5"> between 50 and 80</font>

239
00:09:20,130 --> 00:09:24,120
milliseconds<font color="#E5E5E5"> so that's doesn't</font><font color="#CCCCCC"> again</font><font color="#E5E5E5"> I</font>

240
00:09:22,500 --> 00:09:27,540
guess coming from the bank side they're

241
00:09:24,120 --> 00:09:29,370
totally perfect<font color="#CCCCCC"> those those are key</font>

242
00:09:27,540 --> 00:09:31,650
times to get<font color="#E5E5E5"> rid</font><font color="#CCCCCC"> of so as</font><font color="#E5E5E5"> actually</font>

243
00:09:29,370 --> 00:09:35,310
writes here there is an alternative and

244
00:09:31,650 --> 00:09:37,500
<font color="#CCCCCC">that's anycast</font><font color="#E5E5E5"> so how do we do the same</font>

245
00:09:35,310 --> 00:09:40,290
<font color="#E5E5E5">problem in any</font><font color="#CCCCCC"> cast</font><font color="#E5E5E5"> so same for data</font>

246
00:09:37,500 --> 00:09:42,150
centers<font color="#E5E5E5"> this time instead of giving out</font>

247
00:09:40,290 --> 00:09:44,930
a different<font color="#CCCCCC"> IP address from</font><font color="#E5E5E5"> each they</font>

248
00:09:42,150 --> 00:09:47,790
all announce exactly<font color="#CCCCCC"> the same IP address</font>

249
00:09:44,930 --> 00:09:49,650
<font color="#E5E5E5">those code in the service and the data</font>

250
00:09:47,790 --> 00:09:53,670
<font color="#E5E5E5">center if they're</font><font color="#CCCCCC"> unhealthy they pull</font>

251
00:09:49,650 --> 00:09:54,900
their out so any healthy<font color="#CCCCCC"> edge location</font>

252
00:09:53,670 --> 00:10:01,589
is going<font color="#CCCCCC"> to be announcing the</font><font color="#E5E5E5"> same</font>

253
00:09:54,900 --> 00:10:04,650
<font color="#E5E5E5">anycast IPS the DNS system is trivial at</font>

254
00:10:01,589 --> 00:10:07,320
this point<font color="#E5E5E5"> whatever your</font><font color="#CCCCCC"> question the</font>

255
00:10:04,650 --> 00:10:09,959
<font color="#CCCCCC">answer is</font><font color="#E5E5E5"> the same IP address so it's a</font>

256
00:10:07,320 --> 00:10:11,970
relatively little code in there<font color="#CCCCCC"> it helps</font>

257
00:10:09,959 --> 00:10:13,670
<font color="#E5E5E5">perform really quickly and it gets rid</font>

258
00:10:11,970 --> 00:10:16,260
of the whole giant<font color="#E5E5E5"> table creation phase</font>

259
00:10:13,670 --> 00:10:18,810
so essentially lazy<font color="#E5E5E5"> will just give it</font>

260
00:10:16,260 --> 00:10:20,910
<font color="#E5E5E5">the same answer to everybody and then by</font>

261
00:10:18,810 --> 00:10:23,640
the magic of<font color="#CCCCCC"> the internet as</font><font color="#E5E5E5"> they like</font>

262
00:10:20,910 --> 00:10:25,500
to<font color="#CCCCCC"> say</font><font color="#E5E5E5"> the right users are connected to</font>

263
00:10:23,640 --> 00:10:27,779
the<font color="#E5E5E5"> right data centers and this isn't</font>

264
00:10:25,500 --> 00:10:29,790
<font color="#CCCCCC">100%</font><font color="#E5E5E5"> there's a lot of work it goes into</font>

265
00:10:27,779 --> 00:10:32,520
<font color="#E5E5E5">this but it moves the performance</font>

266
00:10:29,790 --> 00:10:34,709
problem from being that of table

267
00:10:32,520 --> 00:10:37,500
generation and figuring<font color="#E5E5E5"> out and</font>

268
00:10:34,709 --> 00:10:39,359
algorithms<font color="#E5E5E5"> into a more steady paced big</font>

269
00:10:37,500 --> 00:10:41,610
data problem<font color="#CCCCCC"> where you look at the</font><font color="#E5E5E5"> set</font>

270
00:10:39,360 --> 00:10:43,230
<font color="#CCCCCC">of people coming to an edge</font><font color="#E5E5E5"> you say are</font>

271
00:10:41,610 --> 00:10:46,560
they geographically close to this edge

272
00:10:43,230 --> 00:10:48,990
<font color="#E5E5E5">if not break it down which</font><font color="#CCCCCC"> ASNs are not</font>

273
00:10:46,560 --> 00:10:50,459
coming here<font color="#CCCCCC"> and</font><font color="#E5E5E5"> gonna talk to those pick</font>

274
00:10:48,990 --> 00:10:51,990
up the phone<font color="#E5E5E5"> talk to people say hey we'd</font>

275
00:10:50,459 --> 00:10:53,729
like to pair with<font color="#E5E5E5"> you your customers</font>

276
00:10:51,990 --> 00:10:57,600
<font color="#CCCCCC">will benefit bringing in the traffic</font>

277
00:10:53,730 --> 00:11:00,570
more locally again if<font color="#CCCCCC"> Australia</font><font color="#E5E5E5"> goes out</font>

278
00:10:57,600 --> 00:11:02,010
this<font color="#E5E5E5"> is one</font><font color="#CCCCCC"> of the things people</font><font color="#E5E5E5"> worry</font>

279
00:11:00,570 --> 00:11:04,140
about<font color="#E5E5E5"> about anycast one if the data</font>

280
00:11:02,010 --> 00:11:07,829
center goes<font color="#E5E5E5"> down well actually it makes</font>

281
00:11:04,140 --> 00:11:10,830
no difference<font color="#E5E5E5"> any in-flight TCP sessions</font>

282
00:11:07,829 --> 00:11:13,019
will<font color="#CCCCCC"> be broken</font><font color="#E5E5E5"> what will happen is</font>

283
00:11:10,830 --> 00:11:15,000
the client<font color="#E5E5E5"> will receive the data that</font>

284
00:11:13,019 --> 00:11:18,630
had<font color="#CCCCCC"> already requested because this</font>

285
00:11:15,000 --> 00:11:20,970
session is fine<font color="#E5E5E5"> when it acts that data</font>

286
00:11:18,630 --> 00:11:22,649
<font color="#E5E5E5">the</font><font color="#CCCCCC"> ACK will land on</font><font color="#E5E5E5"> a different server</font>

287
00:11:20,970 --> 00:11:24,959
in a different data center<font color="#E5E5E5"> who has no</font>

288
00:11:22,649 --> 00:11:26,910
idea<font color="#CCCCCC"> about</font><font color="#E5E5E5"> this TCP stream so the key</font>

289
00:11:24,959 --> 00:11:29,040
thing<font color="#CCCCCC"> to do is immediately reset that</font>

290
00:11:26,910 --> 00:11:31,469
connection<font color="#E5E5E5"> so the client isn't left</font>

291
00:11:29,040 --> 00:11:35,010
handing hanging and then you rely on

292
00:11:31,470 --> 00:11:37,560
either<font color="#E5E5E5"> HTTP level to retransmit</font><font color="#CCCCCC"> or the</font>

293
00:11:35,010 --> 00:11:39,689
user to push<font color="#CCCCCC"> fi</font><font color="#E5E5E5"> even try again</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> there</font>

294
00:11:37,560 --> 00:11:42,268
is any<font color="#E5E5E5"> in-flight sessions will be</font><font color="#CCCCCC"> broken</font>

295
00:11:39,690 --> 00:11:44,700
<font color="#CCCCCC">any new ones if what if they get the</font>

296
00:11:42,269 --> 00:11:46,110
reset and retry<font color="#E5E5E5"> they'll immediately</font>

297
00:11:44,700 --> 00:11:48,839
<font color="#E5E5E5">start a new connection with the</font>

298
00:11:46,110 --> 00:11:50,610
<font color="#CCCCCC">brand-new server so date Australia's</font>

299
00:11:48,839 --> 00:11:52,980
gone down all the users<font color="#CCCCCC"> that we're</font><font color="#E5E5E5"> going</font>

300
00:11:50,610 --> 00:11:55,079
there get resets they immediately<font color="#E5E5E5"> try</font><font color="#CCCCCC"> to</font>

301
00:11:52,980 --> 00:11:57,600
reconnect<font color="#E5E5E5"> and they will find the next</font>

302
00:11:55,079 --> 00:11:59,939
closest server<font color="#E5E5E5"> in this case most of them</font>

303
00:11:57,600 --> 00:12:02,430
probably<font color="#E5E5E5"> would go to Asia</font><font color="#CCCCCC"> but it could</font>

304
00:11:59,940 --> 00:12:04,950
be that<font color="#CCCCCC"> for a particular</font><font color="#E5E5E5"> ISP</font><font color="#CCCCCC"> if you're</font>

305
00:12:02,430 --> 00:12:06,540
in Brisbane<font color="#CCCCCC"> the west coast of</font><font color="#E5E5E5"> the US is</font>

306
00:12:04,950 --> 00:12:09,000
closer<font color="#E5E5E5"> so the traffic will organically</font>

307
00:12:06,540 --> 00:12:10,500
go to the closest place<font color="#CCCCCC"> I think that's</font>

308
00:12:09,000 --> 00:12:12,870
one<font color="#CCCCCC"> of my themes is that the traffic</font>

309
00:12:10,500 --> 00:12:14,579
<font color="#E5E5E5">just goes where it's supposed</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> we</font>

310
00:12:12,870 --> 00:12:16,670
have<font color="#E5E5E5"> to deal</font><font color="#CCCCCC"> with that</font><font color="#E5E5E5"> versus trying to</font>

311
00:12:14,579 --> 00:12:20,420
be in control<font color="#E5E5E5"> and</font><font color="#CCCCCC"> direct where it</font><font color="#E5E5E5"> goes</font>

312
00:12:16,670 --> 00:12:23,099
so benefits we think of this<font color="#CCCCCC"> it's</font><font color="#E5E5E5"> simple</font>

313
00:12:20,420 --> 00:12:25,380
<font color="#E5E5E5">it's highly performant</font><font color="#CCCCCC"> so we're going</font><font color="#E5E5E5"> to</font>

314
00:12:23,100 --> 00:12:28,310
<font color="#E5E5E5">serve the request from the point at</font>

315
00:12:25,380 --> 00:12:32,450
which the traffic<font color="#E5E5E5"> entered our network</font>

316
00:12:28,310 --> 00:12:35,069
<font color="#E5E5E5">and that is the best we can do it avoids</font>

317
00:12:32,450 --> 00:12:37,020
<font color="#E5E5E5">today nice correlation issues it doesn't</font>

318
00:12:35,070 --> 00:12:39,180
matter which DNS server IP you came with

319
00:12:37,020 --> 00:12:41,399
<font color="#E5E5E5">because whoever you were I gave you the</font>

320
00:12:39,180 --> 00:12:43,560
<font color="#CCCCCC">same answer so the clients are all</font>

321
00:12:41,399 --> 00:12:45,750
getting<font color="#E5E5E5"> the</font><font color="#CCCCCC"> same IP address and then now</font>

322
00:12:43,560 --> 00:12:47,969
from the client<font color="#CCCCCC"> machine</font><font color="#E5E5E5"> it is taking the</font>

323
00:12:45,750 --> 00:12:49,589
fastest path versus a path that<font color="#E5E5E5"> was</font>

324
00:12:47,970 --> 00:12:52,740
determined based on<font color="#E5E5E5"> what their DNS</font>

325
00:12:49,589 --> 00:12:55,199
server was and it reacts<font color="#CCCCCC"> very quickly to</font>

326
00:12:52,740 --> 00:12:57,720
<font color="#CCCCCC">changes</font><font color="#E5E5E5"> even</font><font color="#CCCCCC"> with a long TTL on the DNS</font>

327
00:12:55,199 --> 00:13:00,329
answer because the<font color="#CCCCCC"> answer itself is high</font>

328
00:12:57,720 --> 00:13:02,850
availability<font color="#E5E5E5"> if a server goes down it'll</font>

329
00:13:00,329 --> 00:13:05,370
<font color="#E5E5E5">go to a different</font><font color="#CCCCCC"> location we're able</font><font color="#E5E5E5"> to</font>

330
00:13:02,850 --> 00:13:08,160
<font color="#E5E5E5">just let the BGP on the</font><font color="#CCCCCC"> internet</font><font color="#E5E5E5"> direct</font>

331
00:13:05,370 --> 00:13:09,870
<font color="#E5E5E5">traffic around a trade off I</font><font color="#CCCCCC"> love</font>

332
00:13:08,160 --> 00:13:12,630
<font color="#CCCCCC">Ashley's line here so it relinquishes</font>

333
00:13:09,870 --> 00:13:14,420
control to the<font color="#CCCCCC"> internet</font><font color="#E5E5E5"> which</font>

334
00:13:12,630 --> 00:13:18,240
fortunately<font color="#CCCCCC"> it's not</font><font color="#E5E5E5"> that scary</font><font color="#CCCCCC"> a thing</font>

335
00:13:14,420 --> 00:13:20,910
<font color="#E5E5E5">but it does it</font><font color="#CCCCCC"> does mean that</font><font color="#E5E5E5"> you're</font>

336
00:13:18,240 --> 00:13:22,110
subject<font color="#CCCCCC"> to where the traffic</font><font color="#E5E5E5"> comes in</font>

337
00:13:20,910 --> 00:13:23,850
and you have to<font color="#CCCCCC"> deal with that</font><font color="#E5E5E5"> and</font>

338
00:13:22,110 --> 00:13:25,769
that's<font color="#E5E5E5"> what</font><font color="#CCCCCC"> this there</font>

339
00:13:23,850 --> 00:13:27,300
part of<font color="#E5E5E5"> the talk</font><font color="#CCCCCC"> here is</font><font color="#E5E5E5"> about the fast</font>

340
00:13:25,769 --> 00:13:30,000
<font color="#E5E5E5">roads is how we worked out how to deal</font>

341
00:13:27,300 --> 00:13:31,889
<font color="#CCCCCC">with that another</font><font color="#E5E5E5"> interesting point you</font>

342
00:13:30,000 --> 00:13:34,350
<font color="#E5E5E5">have to size your pops your edge</font>

343
00:13:31,889 --> 00:13:37,680
locations based<font color="#E5E5E5"> on organic traffic</font>

344
00:13:34,350 --> 00:13:40,319
volume so if you put a node<font color="#E5E5E5"> at an IXP</font>

345
00:13:37,680 --> 00:13:42,209
<font color="#E5E5E5">with relatively little peering it won't</font>

346
00:13:40,319 --> 00:13:44,370
<font color="#E5E5E5">get much traffic as you pick up peers</font>

347
00:13:42,209 --> 00:13:46,170
<font color="#E5E5E5">there over time the traffic grows so</font>

348
00:13:44,370 --> 00:13:48,630
there's a fairly tricky capacity

349
00:13:46,170 --> 00:13:51,569
planning<font color="#CCCCCC"> which we've</font><font color="#E5E5E5"> had a few attempts</font>

350
00:13:48,630 --> 00:13:53,459
at to determine<font color="#E5E5E5"> how do you size each</font>

351
00:13:51,569 --> 00:13:57,180
site based on<font color="#E5E5E5"> the traffic that's</font><font color="#CCCCCC"> coming</font>

352
00:13:53,459 --> 00:13:59,339
in<font color="#E5E5E5"> and our canonical challenge actually</font>

353
00:13:57,180 --> 00:14:01,170
<font color="#CCCCCC">was Miami we looked at the traffic</font>

354
00:13:59,339 --> 00:14:02,759
<font color="#CCCCCC">coming into Miami tana traffic comes</font>

355
00:14:01,170 --> 00:14:04,979
into Miami put<font color="#E5E5E5"> a lot of servers there</font>

356
00:14:02,759 --> 00:14:06,870
<font color="#E5E5E5">that's gonna be good and then we got</font>

357
00:14:04,980 --> 00:14:09,509
peering in several places in<font color="#CCCCCC"> Latin</font>

358
00:14:06,870 --> 00:14:11,430
America<font color="#CCCCCC"> oh</font><font color="#E5E5E5"> all the traffic went away</font><font color="#CCCCCC"> so</font>

359
00:14:09,509 --> 00:14:13,560
now I have a lot<font color="#CCCCCC"> of servers</font><font color="#E5E5E5"> in Miami</font><font color="#CCCCCC"> if</font>

360
00:14:11,430 --> 00:14:15,930
anybody wants some and not much traffic

361
00:14:13,560 --> 00:14:18,839
come in there<font color="#E5E5E5"> so you do</font><font color="#CCCCCC"> have to try and</font>

362
00:14:15,930 --> 00:14:21,569
predict as the<font color="#CCCCCC"> Internet</font><font color="#E5E5E5"> topology changes</font>

363
00:14:18,839 --> 00:14:23,130
<font color="#E5E5E5">where the traffic is</font><font color="#CCCCCC"> going to</font><font color="#E5E5E5"> be and the</font>

364
00:14:21,569 --> 00:14:26,819
third one<font color="#E5E5E5"> is the</font><font color="#CCCCCC"> possibility of overload</font>

365
00:14:23,130 --> 00:14:30,300
clue<font color="#CCCCCC"> queue the</font><font color="#E5E5E5"> next slide so fast routes</font>

366
00:14:26,819 --> 00:14:31,800
is our load management<font color="#E5E5E5"> system we</font><font color="#CCCCCC"> Orion</font>

367
00:14:30,300 --> 00:14:33,719
<font color="#E5E5E5">to be simple highly available high</font>

368
00:14:31,800 --> 00:14:36,209
<font color="#E5E5E5">performance doesn't</font><font color="#CCCCCC"> everybody</font><font color="#E5E5E5"> of every</font>

369
00:14:33,720 --> 00:14:38,610
<font color="#E5E5E5">service and so what we're looking</font><font color="#CCCCCC"> for</font>

370
00:14:36,209 --> 00:14:42,149
was a<font color="#E5E5E5"> solution that was as simple as</font>

371
00:14:38,610 --> 00:14:44,430
<font color="#CCCCCC">anycast</font><font color="#E5E5E5"> but had enough control to handle</font>

372
00:14:42,149 --> 00:14:46,110
the overload so we didn't<font color="#E5E5E5"> want to get in</font>

373
00:14:44,430 --> 00:14:48,660
the way of any cast<font color="#E5E5E5"> for the high</font>

374
00:14:46,110 --> 00:14:50,250
performance routing if a node was able

375
00:14:48,660 --> 00:14:53,160
to<font color="#E5E5E5"> take all the traffic</font><font color="#CCCCCC"> it should</font><font color="#E5E5E5"> get</font>

376
00:14:50,250 --> 00:14:55,170
all the<font color="#E5E5E5"> traffic but say it's there's a</font>

377
00:14:53,160 --> 00:14:57,149
gradual traffic ramp<font color="#E5E5E5"> during the diurnal</font>

378
00:14:55,170 --> 00:14:59,160
<font color="#CCCCCC">in the day and</font><font color="#E5E5E5"> you starts to get a</font>

379
00:14:57,149 --> 00:15:00,870
<font color="#E5E5E5">little too much traffic you want to</font>

380
00:14:59,160 --> 00:15:03,360
still serve as much as you can from<font color="#CCCCCC"> that</font>

381
00:15:00,870 --> 00:15:05,759
location<font color="#CCCCCC"> but take say the top percent</font>

382
00:15:03,360 --> 00:15:07,290
made<font color="#CCCCCC"> 10</font><font color="#E5E5E5"> percent and move it somewhere</font>

383
00:15:05,759 --> 00:15:08,550
else<font color="#CCCCCC"> how do you move</font><font color="#E5E5E5"> it somewhere else</font>

384
00:15:07,290 --> 00:15:12,329
where'd you move<font color="#E5E5E5"> it to</font><font color="#CCCCCC"> with the</font>

385
00:15:08,550 --> 00:15:14,250
<font color="#E5E5E5">questions so let me describe what's</font>

386
00:15:12,329 --> 00:15:17,219
behind our model and<font color="#CCCCCC"> then I'll say how</font>

387
00:15:14,250 --> 00:15:19,019
it works<font color="#E5E5E5"> so as I realize it's been great</font>

388
00:15:17,220 --> 00:15:21,300
talking to people here<font color="#E5E5E5"> everybody has a</font>

389
00:15:19,019 --> 00:15:23,279
different<font color="#E5E5E5"> internet in their head because</font>

390
00:15:21,300 --> 00:15:26,040
<font color="#CCCCCC">it depends where you stand looking</font><font color="#E5E5E5"> at it</font>

391
00:15:23,279 --> 00:15:27,870
so from where I stand<font color="#CCCCCC"> looking</font><font color="#E5E5E5"> at the</font>

392
00:15:26,040 --> 00:15:30,810
<font color="#E5E5E5">internet we</font><font color="#CCCCCC"> have this giant</font><font color="#E5E5E5"> backbone</font>

393
00:15:27,870 --> 00:15:32,910
global network and some spots on it are

394
00:15:30,810 --> 00:15:35,430
<font color="#E5E5E5">really strong so</font><font color="#CCCCCC"> we have giant data</font>

395
00:15:32,910 --> 00:15:36,150
centers<font color="#CCCCCC"> you can host any service there</font>

396
00:15:35,430 --> 00:15:39,270
you put<font color="#E5E5E5"> it in</font>

397
00:15:36,150 --> 00:15:40,590
you could do the same<font color="#E5E5E5"> in a</font><font color="#CCCCCC"> ws but there</font>

398
00:15:39,270 --> 00:15:43,470
are places<font color="#E5E5E5"> on the internet that are</font>

399
00:15:40,590 --> 00:15:45,660
super strong<font color="#CCCCCC"> so those we have as</font><font color="#E5E5E5"> red we</font>

400
00:15:43,470 --> 00:15:47,730
call<font color="#E5E5E5"> those data</font><font color="#CCCCCC"> center edges essentially</font>

401
00:15:45,660 --> 00:15:50,610
<font color="#E5E5E5">infinite capacity for this proxy level</font>

402
00:15:47,730 --> 00:15:55,110
traffic but quite a ways from<font color="#CCCCCC"> the user</font>

403
00:15:50,610 --> 00:15:57,960
so maybe these are 100 150 milliseconds

404
00:15:55,110 --> 00:16:00,690
<font color="#CCCCCC">away from the 75th percentile of users</font>

405
00:15:57,960 --> 00:16:03,030
<font color="#E5E5E5">the next step up i've called these</font>

406
00:16:00,690 --> 00:16:05,190
backbone edges<font color="#CCCCCC"> they don't have to be on</font>

407
00:16:03,030 --> 00:16:07,110
<font color="#E5E5E5">your backbone</font><font color="#CCCCCC"> they are in our case</font><font color="#E5E5E5"> so</font>

408
00:16:05,190 --> 00:16:10,650
these would<font color="#E5E5E5"> be at strong internet</font>

409
00:16:07,110 --> 00:16:13,290
exchanges<font color="#CCCCCC"> so one Wilshire won more</font><font color="#E5E5E5"> money</font>

410
00:16:10,650 --> 00:16:15,480
the<font color="#E5E5E5"> West in Seattle</font><font color="#CCCCCC"> wherever there's a</font>

411
00:16:13,290 --> 00:16:18,060
lot of traffic<font color="#E5E5E5"> that you can</font><font color="#CCCCCC"> peer within</font>

412
00:16:15,480 --> 00:16:20,130
one place it's worth putting<font color="#E5E5E5"> a largest</font>

413
00:16:18,060 --> 00:16:21,900
stamp<font color="#E5E5E5"> so these will be so the data</font>

414
00:16:20,130 --> 00:16:23,580
centers are<font color="#CCCCCC"> like you know</font><font color="#E5E5E5"> tens of</font>

415
00:16:21,900 --> 00:16:26,370
thousands of<font color="#E5E5E5"> machines backbone edges</font>

416
00:16:23,580 --> 00:16:27,780
<font color="#E5E5E5">probably in the two to five rack range</font>

417
00:16:26,370 --> 00:16:30,060
<font color="#CCCCCC">something like that</font><font color="#E5E5E5"> depending on how</font>

418
00:16:27,780 --> 00:16:31,970
<font color="#E5E5E5">much traffic again organically sized per</font>

419
00:16:30,060 --> 00:16:34,800
<font color="#CCCCCC">location based</font><font color="#E5E5E5"> on the traffic volume and</font>

420
00:16:31,970 --> 00:16:37,080
then the last set is the reach edges

421
00:16:34,800 --> 00:16:39,120
<font color="#E5E5E5">this these are the exciting ones right</font>

422
00:16:37,080 --> 00:16:41,610
<font color="#E5E5E5">these get as close</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> the customers they</font>

423
00:16:39,120 --> 00:16:43,770
can in<font color="#E5E5E5"> Ashley's diagram of his mum's</font>

424
00:16:41,610 --> 00:16:47,250
distance<font color="#E5E5E5"> from an edge we can get this</font>

425
00:16:43,770 --> 00:16:49,860
down<font color="#E5E5E5"> to</font><font color="#CCCCCC"> twenty ten as few milliseconds</font>

426
00:16:47,250 --> 00:16:53,190
as we can depending<font color="#E5E5E5"> on the carrier</font>

427
00:16:49,860 --> 00:16:55,260
<font color="#E5E5E5">technology</font><font color="#CCCCCC"> so those those that's where</font>

428
00:16:53,190 --> 00:16:56,970
we<font color="#E5E5E5"> really want</font><font color="#CCCCCC"> the traffic that is the</font>

429
00:16:55,260 --> 00:16:59,460
shortest round-trip time to the user

430
00:16:56,970 --> 00:17:02,430
which based on<font color="#E5E5E5"> the math earlier on gives</font>

431
00:16:59,460 --> 00:17:04,680
us the<font color="#E5E5E5"> largest overall gain but they are</font>

432
00:17:02,430 --> 00:17:06,329
necessarily fragile<font color="#E5E5E5"> they're smaller</font>

433
00:17:04,680 --> 00:17:07,709
they're less reliable<font color="#CCCCCC"> so you have to</font>

434
00:17:06,329 --> 00:17:11,159
have a way<font color="#CCCCCC"> to move traffic up and down</font>

435
00:17:07,709 --> 00:17:14,339
<font color="#E5E5E5">here's the same thing drawn on a map</font><font color="#CCCCCC"> big</font>

436
00:17:11,160 --> 00:17:15,930
data centers probably<font color="#E5E5E5"> three maybe as up</font>

437
00:17:14,339 --> 00:17:17,940
to<font color="#CCCCCC"> twenty different places now you could</font>

438
00:17:15,930 --> 00:17:19,950
go<font color="#E5E5E5"> for a big data center</font>

439
00:17:17,940 --> 00:17:21,990
the yellow ones would<font color="#CCCCCC"> be these larger</font>

440
00:17:19,950 --> 00:17:23,730
peering points where a lot of<font color="#E5E5E5"> traffic</font>

441
00:17:21,990 --> 00:17:25,260
<font color="#E5E5E5">comes maybe pick up a good transit</font>

442
00:17:23,730 --> 00:17:28,380
carrier<font color="#E5E5E5"> there I get a lot of traffic and</font>

443
00:17:25,260 --> 00:17:30,180
then the green edges<font color="#CCCCCC"> are as far as deep</font>

444
00:17:28,380 --> 00:17:32,720
in the network as we can<font color="#E5E5E5"> how do we</font>

445
00:17:30,180 --> 00:17:34,830
manage<font color="#E5E5E5"> traffic across this whole set I</font>

446
00:17:32,720 --> 00:17:38,760
<font color="#E5E5E5">should have said on the previous slide</font>

447
00:17:34,830 --> 00:17:41,760
<font color="#CCCCCC">eke was three IP addresses the first IP</font>

448
00:17:38,760 --> 00:17:43,830
address<font color="#CCCCCC"> IP a is announced</font><font color="#E5E5E5"> from every</font>

449
00:17:41,760 --> 00:17:46,440
edge we<font color="#CCCCCC"> have whether it's a reach a</font>

450
00:17:43,830 --> 00:17:48,899
backbone or<font color="#E5E5E5"> a data center so whichever</font>

451
00:17:46,440 --> 00:17:49,770
as the client comes in it will<font color="#CCCCCC"> come to</font>

452
00:17:48,900 --> 00:17:52,410
<font color="#E5E5E5">whichever the close</font>

453
00:17:49,770 --> 00:17:54,690
<font color="#E5E5E5">server</font><font color="#CCCCCC"> - it is and then we have another</font>

454
00:17:52,410 --> 00:17:57,720
IP address<font color="#CCCCCC"> that</font><font color="#E5E5E5"> DNS could choose to give</font>

455
00:17:54,690 --> 00:17:59,670
out<font color="#E5E5E5"> that has only the backbones and the</font>

456
00:17:57,720 --> 00:18:02,760
data centers<font color="#E5E5E5"> so if you start</font><font color="#CCCCCC"> giving out</font>

457
00:17:59,670 --> 00:18:05,040
<font color="#CCCCCC">that IP address</font><font color="#E5E5E5"> the clients can see all</font>

458
00:18:02,760 --> 00:18:07,650
of the big edges but they can't see the

459
00:18:05,040 --> 00:18:10,230
<font color="#E5E5E5">little tiny ones basically</font><font color="#CCCCCC"> the technique</font>

460
00:18:07,650 --> 00:18:11,580
is if I can't handle<font color="#CCCCCC"> the traffic throw</font>

461
00:18:10,230 --> 00:18:14,040
it<font color="#E5E5E5"> to the big guy that stood right</font>

462
00:18:11,580 --> 00:18:16,379
<font color="#E5E5E5">behind me I don't care which big guy I</font>

463
00:18:14,040 --> 00:18:18,360
don't<font color="#CCCCCC"> even</font><font color="#E5E5E5"> I'm not able to direct to</font>

464
00:18:16,380 --> 00:18:20,550
them I<font color="#E5E5E5"> just say I am</font><font color="#CCCCCC"> getting overloaded</font>

465
00:18:18,360 --> 00:18:22,020
<font color="#CCCCCC">help somebody</font><font color="#E5E5E5"> bigger behind me help and</font>

466
00:18:20,550 --> 00:18:23,399
that happens at each level if the

467
00:18:22,020 --> 00:18:26,520
backbone edges are overloaded they do

468
00:18:23,400 --> 00:18:29,280
the same<font color="#E5E5E5"> so here's that in slides</font><font color="#CCCCCC"> your</font>

469
00:18:26,520 --> 00:18:31,620
problem is an individual edge right<font color="#E5E5E5"> out</font>

470
00:18:29,280 --> 00:18:33,270
at<font color="#E5E5E5"> the edge is getting too hot</font><font color="#CCCCCC"> and what</font>

471
00:18:31,620 --> 00:18:35,129
you want<font color="#E5E5E5"> to do is shave</font><font color="#CCCCCC"> a small</font>

472
00:18:33,270 --> 00:18:37,260
percentage of<font color="#E5E5E5"> that traffic the overload</font>

473
00:18:35,130 --> 00:18:41,220
amount and give it to<font color="#CCCCCC"> people in the</font>

474
00:18:37,260 --> 00:18:43,470
yellow ring and the key point here<font color="#E5E5E5"> is</font>

475
00:18:41,220 --> 00:18:45,960
<font color="#E5E5E5">there's no interaction</font><font color="#CCCCCC"> between edges</font>

476
00:18:43,470 --> 00:18:47,970
there's no global state required<font color="#E5E5E5"> each</font>

477
00:18:45,960 --> 00:18:49,890
edge can make its<font color="#E5E5E5"> own decision I'm</font>

478
00:18:47,970 --> 00:18:52,290
getting too hot<font color="#CCCCCC"> I need to</font><font color="#E5E5E5"> get rid</font><font color="#CCCCCC"> of a</font>

479
00:18:49,890 --> 00:18:54,870
bit of traffic the same thing can<font color="#E5E5E5"> happen</font>

480
00:18:52,290 --> 00:18:56,700
<font color="#E5E5E5">at the yellow layer if one of those gets</font>

481
00:18:54,870 --> 00:18:58,770
too hot it<font color="#CCCCCC"> starts giving</font><font color="#E5E5E5"> out the IP</font>

482
00:18:56,700 --> 00:19:02,610
address that<font color="#CCCCCC"> only has the red in it and</font>

483
00:18:58,770 --> 00:19:05,940
that's<font color="#E5E5E5"> done through</font><font color="#CCCCCC"> cname chaining in</font>

484
00:19:02,610 --> 00:19:08,250
order<font color="#E5E5E5"> for a node in the yellow ring to</font>

485
00:19:05,940 --> 00:19:09,900
be able<font color="#E5E5E5"> to shed it has to be handling</font>

486
00:19:08,250 --> 00:19:11,730
that DNS<font color="#E5E5E5"> request because we tie the two</font>

487
00:19:09,900 --> 00:19:14,670
together<font color="#E5E5E5"> in DNS I'll do that in a couple</font>

488
00:19:11,730 --> 00:19:18,690
<font color="#E5E5E5">of slides</font><font color="#CCCCCC"> and in order for that DNS</font>

489
00:19:14,670 --> 00:19:20,310
<font color="#E5E5E5">request to come the NS records for the</font>

490
00:19:18,690 --> 00:19:22,890
DNS<font color="#E5E5E5"> have to be in the same ring</font>

491
00:19:20,310 --> 00:19:24,659
<font color="#E5E5E5">otherwise what happened</font><font color="#CCCCCC"> okay well</font><font color="#E5E5E5"> the</font>

492
00:19:22,890 --> 00:19:26,700
first<font color="#E5E5E5"> time we did it is the traffic</font><font color="#CCCCCC"> came</font>

493
00:19:24,660 --> 00:19:28,260
<font color="#CCCCCC">to the green ring through to the</font><font color="#E5E5E5"> next</font>

494
00:19:26,700 --> 00:19:30,510
layer but it recursed within the local

495
00:19:28,260 --> 00:19:33,330
<font color="#CCCCCC">DNS server and</font><font color="#E5E5E5"> gave out the wrong answer</font>

496
00:19:30,510 --> 00:19:35,580
so<font color="#CCCCCC"> I can give people more</font><font color="#E5E5E5"> horror stories</font>

497
00:19:33,330 --> 00:19:38,850
afterwards if they're interested<font color="#CCCCCC"> so how</font>

498
00:19:35,580 --> 00:19:40,649
do you throw<font color="#E5E5E5"> the traffic key key part so</font>

499
00:19:38,850 --> 00:19:44,219
what<font color="#E5E5E5"> we've done is</font><font color="#CCCCCC"> we've co-located the</font>

500
00:19:40,650 --> 00:19:46,950
DNS servers with the HTTP proxies<font color="#E5E5E5"> so</font>

501
00:19:44,220 --> 00:19:49,050
every edge your<font color="#E5E5E5"> DNS request is going to</font>

502
00:19:46,950 --> 00:19:52,440
land on the<font color="#CCCCCC"> same edge that is going to</font>

503
00:19:49,050 --> 00:19:54,899
<font color="#E5E5E5">serve the traffic we have a feedback</font>

504
00:19:52,440 --> 00:19:57,750
<font color="#CCCCCC">loop on the DNS servers that they</font>

505
00:19:54,900 --> 00:20:00,540
monitor the HTTP service<font color="#E5E5E5"> so if load is</font>

506
00:19:57,750 --> 00:20:03,190
<font color="#CCCCCC">getting too high on the edge overall</font>

507
00:20:00,540 --> 00:20:04,659
then DNS is able to respond<font color="#E5E5E5"> to that</font>

508
00:20:03,190 --> 00:20:06,970
simply give out a<font color="#E5E5E5"> different answer and</font>

509
00:20:04,660 --> 00:20:09,340
we've tuned<font color="#E5E5E5"> this over time it was great</font>

510
00:20:06,970 --> 00:20:12,700
<font color="#E5E5E5">we started just with</font><font color="#CCCCCC"> cpu load</font><font color="#E5E5E5"> because</font>

511
00:20:09,340 --> 00:20:14,350
that was our key metric<font color="#E5E5E5"> and then as as</font>

512
00:20:12,700 --> 00:20:16,480
we improve<font color="#CCCCCC"> the software</font><font color="#E5E5E5"> we could do more</font>

513
00:20:14,350 --> 00:20:18,129
<font color="#CCCCCC">for the same CPU</font><font color="#E5E5E5"> the NIC starting to get</font>

514
00:20:16,480 --> 00:20:20,320
hot<font color="#E5E5E5"> so we added shedding on that and</font>

515
00:20:18,130 --> 00:20:21,790
then the<font color="#CCCCCC"> top of rack</font><font color="#E5E5E5"> up links would</font>

516
00:20:20,320 --> 00:20:23,200
start to get<font color="#E5E5E5"> hot so we shed it on that</font>

517
00:20:21,790 --> 00:20:24,639
so we sort of gradually worked our way

518
00:20:23,200 --> 00:20:27,010
<font color="#E5E5E5">out</font><font color="#CCCCCC"> of the network</font>

519
00:20:24,640 --> 00:20:29,170
<font color="#E5E5E5">my</font><font color="#CCCCCC"> favorite</font><font color="#E5E5E5"> shared at the moment is if</font>

520
00:20:27,010 --> 00:20:30,820
there's too much<font color="#E5E5E5"> power consumed in the</font>

521
00:20:29,170 --> 00:20:32,050
rack<font color="#E5E5E5"> we start to give traffic to</font>

522
00:20:30,820 --> 00:20:33,879
somebody else and<font color="#E5E5E5"> there was just one</font>

523
00:20:32,050 --> 00:20:35,350
<font color="#CCCCCC">location we have a rack</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> was very</font>

524
00:20:33,880 --> 00:20:37,590
power constraint that<font color="#E5E5E5"> we</font><font color="#CCCCCC"> added that</font><font color="#E5E5E5"> for</font>

525
00:20:35,350 --> 00:20:40,389
us<font color="#E5E5E5"> so it you can build any number of</font>

526
00:20:37,590 --> 00:20:42,990
<font color="#E5E5E5">metrics that you care about that you</font>

527
00:20:40,390 --> 00:20:46,870
required to<font color="#E5E5E5"> move load so the DNS system</font>

528
00:20:42,990 --> 00:20:48,820
<font color="#E5E5E5">you come to the DNS server if it's</font>

529
00:20:46,870 --> 00:20:51,159
<font color="#E5E5E5">running too hot</font><font color="#CCCCCC"> by any definition of hot</font>

530
00:20:48,820 --> 00:20:54,490
it<font color="#CCCCCC"> starts to give out probablistic alee</font>

531
00:20:51,160 --> 00:20:56,860
a cname<font color="#E5E5E5"> to the next layer so there's</font>

532
00:20:54,490 --> 00:20:59,650
again<font color="#E5E5E5"> no knowledge of the entire system</font>

533
00:20:56,860 --> 00:21:01,330
<font color="#CCCCCC">it's just saying ok I'm getting</font><font color="#E5E5E5"> really</font>

534
00:20:59,650 --> 00:21:03,280
hot<font color="#E5E5E5"> instead of giving out an IP</font><font color="#CCCCCC"> address</font>

535
00:21:01,330 --> 00:21:04,600
that<font color="#E5E5E5"> comes to me I'm gonna give an IP</font>

536
00:21:03,280 --> 00:21:08,379
<font color="#CCCCCC">address that</font><font color="#E5E5E5"> comes to those big guys</font>

537
00:21:04,600 --> 00:21:10,899
<font color="#CCCCCC">right</font><font color="#E5E5E5"> behind me</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> yeah preserves the</font>

538
00:21:08,380 --> 00:21:12,910
independence<font color="#CCCCCC"> of</font><font color="#E5E5E5"> the nodes</font><font color="#CCCCCC"> so there is a</font>

539
00:21:10,900 --> 00:21:15,640
key<font color="#E5E5E5"> assumption in here</font><font color="#CCCCCC"> should come clean</font>

540
00:21:12,910 --> 00:21:18,400
<font color="#CCCCCC">on which is that the</font><font color="#E5E5E5"> DNS request is</font>

541
00:21:15,640 --> 00:21:21,250
landing on<font color="#E5E5E5"> the same place that the HTTP</font>

542
00:21:18,400 --> 00:21:23,740
<font color="#E5E5E5">request is going to land and there's</font>

543
00:21:21,250 --> 00:21:25,990
good correlation<font color="#E5E5E5"> here but it's it's not</font>

544
00:21:23,740 --> 00:21:30,970
<font color="#CCCCCC">guaranteed so in the example I gave</font>

545
00:21:25,990 --> 00:21:33,610
earlier<font color="#E5E5E5"> if your providers DNS service</font><font color="#CCCCCC"> l</font>

546
00:21:30,970 --> 00:21:35,440
<font color="#CCCCCC">DNS is are in geographically separate</font>

547
00:21:33,610 --> 00:21:36,939
places<font color="#CCCCCC"> from</font><font color="#E5E5E5"> where your customer is it's</font>

548
00:21:35,440 --> 00:21:39,220
<font color="#CCCCCC">possible they would</font><font color="#E5E5E5"> land on a different</font>

549
00:21:36,940 --> 00:21:41,680
<font color="#E5E5E5">edge so in the example I gave if your</font>

550
00:21:39,220 --> 00:21:43,060
DNS was served from<font color="#E5E5E5"> Phoenix we have an</font>

551
00:21:41,680 --> 00:21:45,100
edge<font color="#E5E5E5"> in Phoenix it's</font><font color="#CCCCCC"> going to go</font><font color="#E5E5E5"> to that</font>

552
00:21:43,060 --> 00:21:46,899
node<font color="#E5E5E5"> and then if you're in Seattle when</font>

553
00:21:45,100 --> 00:21:48,820
you actually go for HTTP<font color="#E5E5E5"> or</font><font color="#CCCCCC"> you're</font>

554
00:21:46,900 --> 00:21:50,070
landing<font color="#CCCCCC"> in the westin</font><font color="#E5E5E5"> so there's not a</font>

555
00:21:48,820 --> 00:21:52,689
correlation there

556
00:21:50,070 --> 00:21:55,600
<font color="#CCCCCC">the answer is although it's not</font>

557
00:21:52,690 --> 00:21:57,640
<font color="#CCCCCC">guaranteed it is good enough so we see</font>

558
00:21:55,600 --> 00:22:00,189
when we scrape through<font color="#E5E5E5"> the data there's</font>

559
00:21:57,640 --> 00:22:03,040
about<font color="#E5E5E5"> an 80% correlation between where</font>

560
00:22:00,190 --> 00:22:04,780
the DNS request lands and where the HTTP

561
00:22:03,040 --> 00:22:08,350
request<font color="#E5E5E5"> lands and there are some</font>

562
00:22:04,780 --> 00:22:10,300
outliers<font color="#CCCCCC"> based on</font><font color="#E5E5E5"> an</font><font color="#CCCCCC"> ISP configuration</font>

563
00:22:08,350 --> 00:22:13,929
but in general it's that and the good

564
00:22:10,300 --> 00:22:15,190
news<font color="#E5E5E5"> is you</font><font color="#CCCCCC"> only need to shared the</font>

565
00:22:13,930 --> 00:22:17,020
percentage of traffic<font color="#CCCCCC"> that you're</font>

566
00:22:15,190 --> 00:22:19,840
overloaded<font color="#E5E5E5"> so if you're</font><font color="#CCCCCC"> overloaded</font>

567
00:22:17,020 --> 00:22:22,990
<font color="#CCCCCC">10% you can</font><font color="#E5E5E5"> shed it if you have 80%</font>

568
00:22:19,840 --> 00:22:25,600
correlation you can shed<font color="#CCCCCC"> 80% of traffic</font>

569
00:22:22,990 --> 00:22:27,040
there's<font color="#E5E5E5"> just 20% somebody else</font><font color="#CCCCCC"> is given</font>

570
00:22:25,600 --> 00:22:29,290
<font color="#E5E5E5">out the DNS and so</font><font color="#CCCCCC"> for and you're</font>

571
00:22:27,040 --> 00:22:31,600
getting that traffic<font color="#E5E5E5"> so if this is being</font>

572
00:22:29,290 --> 00:22:33,250
sufficient in the real world<font color="#E5E5E5"> and if you</font>

573
00:22:31,600 --> 00:22:35,139
get a super huge spike that's just

574
00:22:33,250 --> 00:22:36,550
killing you because<font color="#CCCCCC"> it's any caste you</font>

575
00:22:35,140 --> 00:22:38,400
<font color="#E5E5E5">just pull the node out of the way and</font>

576
00:22:36,550 --> 00:22:41,620
<font color="#E5E5E5">let it go somewhere else</font>

577
00:22:38,400 --> 00:22:43,720
so here's<font color="#CCCCCC"> 2 slides to go here's the</font>

578
00:22:41,620 --> 00:22:47,110
actual<font color="#CCCCCC"> slide of it</font><font color="#E5E5E5"> working in practice</font>

579
00:22:43,720 --> 00:22:49,120
<font color="#E5E5E5">this is one</font><font color="#CCCCCC"> of our</font><font color="#E5E5E5"> services running this</font>

580
00:22:47,110 --> 00:22:50,889
<font color="#E5E5E5">is over a day so you can see there's a</font>

581
00:22:49,120 --> 00:22:53,979
couple<font color="#CCCCCC"> of spikes at peak time for the</font>

582
00:22:50,890 --> 00:22:56,530
day which looks to<font color="#E5E5E5"> be midnight UTC</font><font color="#CCCCCC"> no no</font>

583
00:22:53,980 --> 00:22:58,960
where that<font color="#E5E5E5"> is</font><font color="#CCCCCC"> and as the traffic</font><font color="#E5E5E5"> load</font>

584
00:22:56,530 --> 00:23:01,450
<font color="#E5E5E5">this was just CPU at this point crosses</font>

585
00:22:58,960 --> 00:23:04,180
what you just<font color="#E5E5E5"> decide is your operating</font>

586
00:23:01,450 --> 00:23:06,250
threshold the bottom graph shows that

587
00:23:04,180 --> 00:23:09,880
<font color="#CCCCCC">the amount of traffic that gets the</font>

588
00:23:06,250 --> 00:23:11,860
second DNS answer ramped up<font color="#CCCCCC"> to</font><font color="#E5E5E5"> 30%</font><font color="#CCCCCC"> and</font>

589
00:23:09,880 --> 00:23:14,740
we have some done a lot<font color="#CCCCCC"> of work here on</font>

590
00:23:11,860 --> 00:23:17,110
the loop<font color="#CCCCCC"> feedback algorithm</font><font color="#E5E5E5"> you want it</font>

591
00:23:14,740 --> 00:23:19,600
to take a<font color="#E5E5E5"> fairly strong first step in</font>

592
00:23:17,110 --> 00:23:21,219
case it's a sudden<font color="#E5E5E5"> event</font><font color="#CCCCCC"> but you</font><font color="#E5E5E5"> don't</font>

593
00:23:19,600 --> 00:23:22,840
want the traffic<font color="#E5E5E5"> to bounce backwards and</font>

594
00:23:21,220 --> 00:23:25,810
forwards between<font color="#E5E5E5"> two and we had some</font>

595
00:23:22,840 --> 00:23:27,730
flapping initially so<font color="#CCCCCC"> we've</font><font color="#E5E5E5"> worked on</font>

596
00:23:25,810 --> 00:23:29,440
<font color="#E5E5E5">those and then again it's during the day</font>

597
00:23:27,730 --> 00:23:30,940
<font color="#E5E5E5">when it's</font><font color="#CCCCCC"> quiet you</font><font color="#E5E5E5"> serve 100%</font><font color="#CCCCCC"> of the</font>

598
00:23:29,440 --> 00:23:32,980
traffic everybody's getting off to wall

599
00:23:30,940 --> 00:23:34,540
performance and then again when the<font color="#E5E5E5"> peak</font>

600
00:23:32,980 --> 00:23:36,490
comes the next<font color="#CCCCCC"> day this time</font><font color="#E5E5E5"> it wasn't</font>

601
00:23:34,540 --> 00:23:38,409
quite as big<font color="#E5E5E5"> you</font><font color="#CCCCCC"> just shaved off the</font>

602
00:23:36,490 --> 00:23:41,020
<font color="#E5E5E5">amount of</font><font color="#CCCCCC"> traffic you need it to be able</font>

603
00:23:38,410 --> 00:23:45,940
<font color="#CCCCCC">to</font><font color="#E5E5E5"> have each node operating at full</font>

604
00:23:41,020 --> 00:23:47,740
efficiency so in summary we statically

605
00:23:45,940 --> 00:23:50,380
configured the edges<font color="#E5E5E5"> into multiple</font>

606
00:23:47,740 --> 00:23:53,680
anycast layers<font color="#CCCCCC"> anycase rings we call</font>

607
00:23:50,380 --> 00:23:56,830
them each edge independently<font color="#CCCCCC"> -</font><font color="#E5E5E5"> as its</font>

608
00:23:53,680 --> 00:23:59,080
load<font color="#E5E5E5"> and if it gets too busy it just for</font>

609
00:23:56,830 --> 00:24:01,480
some<font color="#E5E5E5"> percentage says hey guy behind me</font>

610
00:23:59,080 --> 00:24:04,360
you deal with<font color="#E5E5E5"> it we we didn't want</font><font color="#CCCCCC"> to</font>

611
00:24:01,480 --> 00:24:06,610
shed<font color="#E5E5E5"> across the same layer because you</font>

612
00:24:04,360 --> 00:24:08,139
can<font color="#E5E5E5"> get into</font><font color="#CCCCCC"> oscillation</font><font color="#E5E5E5"> there that one</font>

613
00:24:06,610 --> 00:24:10,449
node gives<font color="#E5E5E5"> up</font><font color="#CCCCCC"> traffic to the guy next</font><font color="#E5E5E5"> to</font>

614
00:24:08,140 --> 00:24:11,680
him that<font color="#E5E5E5"> that edge then has too much</font>

615
00:24:10,450 --> 00:24:13,180
traffic gives it away<font color="#E5E5E5"> it might come</font>

616
00:24:11,680 --> 00:24:16,810
right<font color="#E5E5E5"> back to</font><font color="#CCCCCC"> you so we just goes</font>

617
00:24:13,180 --> 00:24:18,340
<font color="#CCCCCC">straight</font><font color="#E5E5E5"> it's up the chain of size and</font>

618
00:24:16,810 --> 00:24:21,100
in our world that's<font color="#E5E5E5"> like back towards</font>

619
00:24:18,340 --> 00:24:22,629
the center<font color="#CCCCCC"> of</font><font color="#E5E5E5"> the network and the final</font>

620
00:24:21,100 --> 00:24:25,510
layer<font color="#E5E5E5"> we assume is</font><font color="#CCCCCC"> dimension</font>

621
00:24:22,630 --> 00:24:27,610
sufficiently to handle<font color="#CCCCCC"> all load in an</font>

622
00:24:25,510 --> 00:24:29,770
azure world<font color="#E5E5E5"> in AWS world you can</font>

623
00:24:27,610 --> 00:24:31,719
dynamically scale now so you just<font color="#E5E5E5"> it is</font>

624
00:24:29,770 --> 00:24:34,780
fairly simple<font color="#CCCCCC"> to do</font><font color="#E5E5E5"> that</font>

625
00:24:31,720 --> 00:24:37,360
and then my pitch at the<font color="#CCCCCC"> end is to get</font>

626
00:24:34,780 --> 00:24:40,389
the<font color="#E5E5E5"> maximum benefit from any cast does</font>

627
00:24:37,360 --> 00:24:43,270
require a collaboration we can't impact

628
00:24:40,390 --> 00:24:45,040
the inbound<font color="#E5E5E5"> path from your customers to</font>

629
00:24:43,270 --> 00:24:47,139
our<font color="#CCCCCC"> service at all</font><font color="#E5E5E5"> totally under your</font>

630
00:24:45,040 --> 00:24:48,639
control we're announcing the same reps

631
00:24:47,140 --> 00:24:50,920
to you from every point of<font color="#CCCCCC"> presence we</font>

632
00:24:48,640 --> 00:24:52,240
have if<font color="#E5E5E5"> you choose</font><font color="#CCCCCC"> to send</font><font color="#E5E5E5"> all the</font>

633
00:24:50,920 --> 00:24:54,760
traffic<font color="#CCCCCC"> whoa sorry</font>

634
00:24:52,240 --> 00:24:57,760
sorry buddy send all<font color="#CCCCCC"> the traffic to one</font>

635
00:24:54,760 --> 00:24:59,320
location then that<font color="#E5E5E5"> location your users</font>

636
00:24:57,760 --> 00:25:01,810
will get<font color="#E5E5E5"> slow performance</font><font color="#CCCCCC"> we'll handle</font>

637
00:24:59,320 --> 00:25:05,760
<font color="#E5E5E5">it will</font><font color="#CCCCCC"> shed traffic</font><font color="#E5E5E5"> but in order</font><font color="#CCCCCC"> to get</font>

638
00:25:01,810 --> 00:25:08,139
the<font color="#E5E5E5"> maximum performance here having the</font>

639
00:25:05,760 --> 00:25:10,830
<font color="#E5E5E5">customers connection land or server that</font>

640
00:25:08,140 --> 00:25:12,340
is closest to the eyeballs is important

641
00:25:10,830 --> 00:25:15,330
and<font color="#E5E5E5"> that's it</font>

642
00:25:12,340 --> 00:25:15,330
any questions

643
00:25:19,030 --> 00:25:25,840
the exciting moment<font color="#CCCCCC"> for me here right hi</font>

644
00:25:22,780 --> 00:25:28,510
<font color="#CCCCCC">Chris would</font><font color="#E5E5E5"> feel with Twitter</font><font color="#CCCCCC"> a lot</font><font color="#E5E5E5"> of</font>

645
00:25:25,840 --> 00:25:32,610
us are now<font color="#E5E5E5"> doing stuff</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> lot o TCP</font><font color="#CCCCCC"> /</font>

646
00:25:28,510 --> 00:25:35,230
anycast nowadays and it does seem that

647
00:25:32,610 --> 00:25:39,158
different people<font color="#E5E5E5"> that do</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> tend to have</font>

648
00:25:35,230 --> 00:25:42,120
<font color="#E5E5E5">different solutions for the</font><font color="#CCCCCC"> ICMP path</font>

649
00:25:39,159 --> 00:25:46,000
MTU issue that inevitably comes up where

650
00:25:42,120 --> 00:25:48,610
if if you send a packet back to a client

651
00:25:46,000 --> 00:25:51,010
<font color="#E5E5E5">that would generate an ICMP error the</font>

652
00:25:48,610 --> 00:25:52,928
return error won't necessarily hit the

653
00:25:51,010 --> 00:25:57,700
same host or<font color="#E5E5E5"> even sometimes not even</font><font color="#CCCCCC"> the</font>

654
00:25:52,929 --> 00:25:59,440
same site<font color="#CCCCCC"> that where the where the</font>

655
00:25:57,700 --> 00:26:02,770
server<font color="#E5E5E5"> that generated that offending</font>

656
00:25:59,440 --> 00:26:04,270
packet lives<font color="#CCCCCC"> has that proved</font><font color="#E5E5E5"> to be an</font>

657
00:26:02,770 --> 00:26:06,309
issue for<font color="#E5E5E5"> you and if so I'm curious what</font>

658
00:26:04,270 --> 00:26:10,030
<font color="#E5E5E5">your solution to</font><font color="#CCCCCC"> that has</font><font color="#E5E5E5"> been right</font>

659
00:26:06,309 --> 00:26:12,730
<font color="#CCCCCC">it's a great question um that</font><font color="#E5E5E5"> is not so</font>

660
00:26:10,030 --> 00:26:14,590
I will find you later<font color="#E5E5E5"> and</font><font color="#CCCCCC"> ask</font><font color="#E5E5E5"> to learn</font>

661
00:26:12,730 --> 00:26:17,080
more<font color="#E5E5E5"> about</font><font color="#CCCCCC"> that in</font><font color="#E5E5E5"> general we see I</font>

662
00:26:14,590 --> 00:26:18,668
<font color="#E5E5E5">think we have an advantage</font><font color="#CCCCCC"> I say to some</font>

663
00:26:17,080 --> 00:26:21,039
people earlier<font color="#E5E5E5"> that your review</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> the</font>

664
00:26:18,669 --> 00:26:23,559
<font color="#CCCCCC">Internet is based on where you stand</font><font color="#E5E5E5"> so</font>

665
00:26:21,039 --> 00:26:25,539
standing inside<font color="#CCCCCC"> eighty seventy five we</font>

666
00:26:23,559 --> 00:26:28,120
have a<font color="#E5E5E5"> consistent announcement from the</font>

667
00:26:25,539 --> 00:26:30,610
<font color="#E5E5E5">edge sites of the network regardless if</font>

668
00:26:28,120 --> 00:26:32,770
one of my pops goes up or down<font color="#E5E5E5"> as far as</font>

669
00:26:30,610 --> 00:26:34,600
<font color="#E5E5E5">the Internet</font><font color="#CCCCCC"> is concerned</font><font color="#E5E5E5"> the address is</font>

670
00:26:32,770 --> 00:26:38,740
still announced in the BGP<font color="#CCCCCC"> is stable so</font>

671
00:26:34,600 --> 00:26:41,139
<font color="#CCCCCC">we see a super high correlation on very</font>

672
00:26:38,740 --> 00:26:42,850
<font color="#CCCCCC">little route flapping</font><font color="#E5E5E5"> right so I would</font>

673
00:26:41,140 --> 00:26:45,130
expect<font color="#CCCCCC"> that traffic to come back to the</font>

674
00:26:42,850 --> 00:26:46,360
same server but<font color="#CCCCCC"> we I'd</font><font color="#E5E5E5"> love</font><font color="#CCCCCC"> to hear</font><font color="#E5E5E5"> some</font>

675
00:26:45,130 --> 00:26:50,710
<font color="#CCCCCC">more details because thanks for the</font>

676
00:26:46,360 --> 00:26:52,959
question<font color="#CCCCCC"> Thank You Philip</font><font color="#E5E5E5"> Matthews</font><font color="#CCCCCC"> Nakia</font>

677
00:26:50,710 --> 00:26:55,320
<font color="#E5E5E5">I guess my question</font><font color="#CCCCCC"> is actually</font><font color="#E5E5E5"> perhaps</font>

678
00:26:52,960 --> 00:26:58,110
<font color="#E5E5E5">even more basic</font><font color="#CCCCCC"> than there is how much</font>

679
00:26:55,320 --> 00:27:03,700
problems do<font color="#CCCCCC"> you see with running TCP</font>

680
00:26:58,110 --> 00:27:05,260
over<font color="#E5E5E5"> anycast because some years</font><font color="#CCCCCC"> ago when</font>

681
00:27:03,700 --> 00:27:07,480
I was<font color="#CCCCCC"> doing some work in</font><font color="#E5E5E5"> the IETF</font><font color="#CCCCCC"> and</font>

682
00:27:05,260 --> 00:27:09,400
had to do this I got a lot<font color="#E5E5E5"> of pushback</font>

683
00:27:07,480 --> 00:27:11,409
from<font color="#CCCCCC"> the various powers in the IETF</font>

684
00:27:09,400 --> 00:27:13,179
<font color="#E5E5E5">about the idea of you know the first</font>

685
00:27:11,409 --> 00:27:15,010
packet might go to<font color="#E5E5E5"> one server and the</font>

686
00:27:13,179 --> 00:27:16,840
second packet might go to<font color="#E5E5E5"> the second so</font>

687
00:27:15,010 --> 00:27:18,879
it's a<font color="#E5E5E5"> bunch of ideas like I got</font><font color="#CCCCCC"> shot</font>

688
00:27:16,840 --> 00:27:20,168
down by that<font color="#E5E5E5"> and so I'm curious you're</font>

689
00:27:18,880 --> 00:27:23,740
bringing in some<font color="#CCCCCC"> real-world</font><font color="#E5E5E5"> experience</font>

690
00:27:20,169 --> 00:27:25,299
<font color="#CCCCCC">and</font><font color="#E5E5E5"> Silex mothers are</font><font color="#CCCCCC"> - how how do you</font>

691
00:27:23,740 --> 00:27:28,090
<font color="#E5E5E5">punished you find</font><font color="#CCCCCC"> a problem with you</font>

692
00:27:25,299 --> 00:27:29,500
know<font color="#E5E5E5"> your first TCP it's going to one</font>

693
00:27:28,090 --> 00:27:31,100
server and<font color="#CCCCCC"> the second one</font><font color="#E5E5E5"> do you guys</font>

694
00:27:29,500 --> 00:27:34,490
<font color="#E5E5E5">try to measure that</font>

695
00:27:31,100 --> 00:27:37,189
<font color="#CCCCCC">I can speak to</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> so again I think one</font>

696
00:27:34,490 --> 00:27:38,960
of the<font color="#CCCCCC"> advantages or the way it's been</font>

697
00:27:37,190 --> 00:27:41,120
<font color="#E5E5E5">easier as where I stand is having this</font>

698
00:27:38,960 --> 00:27:43,160
global<font color="#CCCCCC"> network</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> the announcements to</font>

699
00:27:41,120 --> 00:27:45,289
the Internet are not flapping<font color="#E5E5E5"> but yes</font>

700
00:27:43,160 --> 00:27:47,419
we've been<font color="#E5E5E5"> live now about four years</font>

701
00:27:45,289 --> 00:27:50,150
<font color="#E5E5E5">with this gradually ramping</font><font color="#CCCCCC"> the traffic</font>

702
00:27:47,419 --> 00:27:52,309
<font color="#E5E5E5">and we have had three instances where</font>

703
00:27:50,150 --> 00:27:55,340
the<font color="#E5E5E5"> traffic coming in has been a</font><font color="#CCCCCC"> problem</font>

704
00:27:52,309 --> 00:27:58,340
and we've had a call for<font color="#CCCCCC"> that so it does</font>

705
00:27:55,340 --> 00:28:00,740
happen<font color="#CCCCCC"> it's very rare we have to reach</font>

706
00:27:58,340 --> 00:28:02,299
out to<font color="#E5E5E5"> the provider in</font><font color="#CCCCCC"> that case and it</font>

707
00:28:00,740 --> 00:28:05,090
<font color="#E5E5E5">is exactly</font><font color="#CCCCCC"> what</font><font color="#E5E5E5"> you say so we had an</font>

708
00:28:02,299 --> 00:28:09,139
instance where we<font color="#E5E5E5"> paired with a provider</font>

709
00:28:05,090 --> 00:28:10,520
in links and in<font color="#CCCCCC"> AM</font><font color="#E5E5E5"> zzyx we paid directly</font>

710
00:28:09,140 --> 00:28:13,850
<font color="#E5E5E5">in</font><font color="#CCCCCC"> am-6 and</font><font color="#E5E5E5"> they just heard our routes</font>

711
00:28:10,520 --> 00:28:15,230
through the<font color="#CCCCCC"> rap server in links and due</font>

712
00:28:13,850 --> 00:28:17,270
to some network configuration on their

713
00:28:15,230 --> 00:28:20,210
side they'd send alternating packets to

714
00:28:17,270 --> 00:28:22,549
one or<font color="#CCCCCC"> the other</font><font color="#E5E5E5"> so we got the sin in</font>

715
00:28:20,210 --> 00:28:23,870
Amsterdam and the server would respond

716
00:28:22,549 --> 00:28:27,650
with<font color="#CCCCCC"> the ACK</font><font color="#E5E5E5"> that went through fine</font>

717
00:28:23,870 --> 00:28:29,658
<font color="#E5E5E5">they'd send the ACK to London and the</font>

718
00:28:27,650 --> 00:28:33,049
<font color="#CCCCCC">server sieving that would go</font><font color="#E5E5E5"> what on</font>

719
00:28:29,659 --> 00:28:34,159
earth is this reset<font color="#CCCCCC"> it's very clear when</font>

720
00:28:33,049 --> 00:28:36,470
you have a problem<font color="#E5E5E5"> because it's</font>

721
00:28:34,159 --> 00:28:38,570
<font color="#CCCCCC">completely broken</font><font color="#E5E5E5"> for that ISP in that</font>

722
00:28:36,470 --> 00:28:41,830
location<font color="#CCCCCC"> so there's no like I'm not sure</font>

723
00:28:38,570 --> 00:28:44,059
<font color="#CCCCCC">it's working</font><font color="#E5E5E5"> right it's it's busted</font><font color="#CCCCCC"> and</font>

724
00:28:41,830 --> 00:28:45,949
during debugging of that we figured out

725
00:28:44,059 --> 00:28:48,918
<font color="#E5E5E5">like if they change their source address</font>

726
00:28:45,950 --> 00:28:50,720
it worked fine if they hit different

727
00:28:48,919 --> 00:28:52,640
<font color="#E5E5E5">destination addresses within the slash</font>

728
00:28:50,720 --> 00:28:55,909
24 some of them work some of<font color="#E5E5E5"> them didn't</font>

729
00:28:52,640 --> 00:28:57,380
<font color="#E5E5E5">so it seemed to be a hashing problem on</font>

730
00:28:55,909 --> 00:28:59,390
their side as<font color="#CCCCCC"> to where</font><font color="#E5E5E5"> it was going</font>

731
00:28:57,380 --> 00:29:01,309
<font color="#E5E5E5">and in</font><font color="#CCCCCC"> general we</font><font color="#E5E5E5"> you have to work with</font>

732
00:28:59,390 --> 00:29:03,260
<font color="#E5E5E5">people because</font><font color="#CCCCCC"> the inbound path as I say</font>

733
00:29:01,309 --> 00:29:05,270
is<font color="#E5E5E5"> not under our</font><font color="#CCCCCC"> control at all so yes</font>

734
00:29:03,260 --> 00:29:08,120
if someone<font color="#CCCCCC"> sends it all telling</font><font color="#E5E5E5"> packets</font>

735
00:29:05,270 --> 00:29:10,639
so<font color="#E5E5E5"> I think probably helped by everybody</font>

736
00:29:08,120 --> 00:29:12,830
<font color="#CCCCCC">else</font><font color="#E5E5E5"> and the fact there are several big</font>

737
00:29:10,640 --> 00:29:15,020
anycast CD ends<font color="#E5E5E5"> people</font><font color="#CCCCCC"> have been fixing</font>

738
00:29:12,830 --> 00:29:17,030
those issues in their networks so<font color="#E5E5E5"> it's</font>

739
00:29:15,020 --> 00:29:19,520
it's<font color="#E5E5E5"> pretty rare but it does happen</font>

740
00:29:17,030 --> 00:29:21,918
<font color="#E5E5E5">yeah that's right I am I think it would</font>

741
00:29:19,520 --> 00:29:23,059
be<font color="#E5E5E5"> great</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> somebody do a redo</font><font color="#CCCCCC"> on how</font>

742
00:29:21,919 --> 00:29:26,120
stable is<font color="#CCCCCC"> anycast</font>

743
00:29:23,059 --> 00:29:28,549
you know five years<font color="#E5E5E5"> on and I did see one</font>

744
00:29:26,120 --> 00:29:30,649
a paper that said for the larger

745
00:29:28,549 --> 00:29:31,879
providers<font color="#CCCCCC"> it is much</font><font color="#E5E5E5"> more stable</font><font color="#CCCCCC"> if you</font>

746
00:29:30,650 --> 00:29:33,289
only have a<font color="#CCCCCC"> couple</font><font color="#E5E5E5"> of spots and you're</font>

747
00:29:31,880 --> 00:29:34,850
any casting and you go up and<font color="#CCCCCC"> down</font><font color="#E5E5E5"> that</font>

748
00:29:33,289 --> 00:29:36,408
could have a<font color="#E5E5E5"> big difference</font><font color="#CCCCCC"> but yeah</font>

749
00:29:34,850 --> 00:29:37,010
when we're announcing from 80 places

750
00:29:36,409 --> 00:29:39,710
around the world

751
00:29:37,010 --> 00:29:41,540
it works well<font color="#E5E5E5"> thank you</font><font color="#CCCCCC"> okay hey better</font>

752
00:29:39,710 --> 00:29:42,470
<font color="#CCCCCC">public oh you're</font><font color="#E5E5E5"> getting your run back</font>

753
00:29:41,540 --> 00:29:44,090
because I asked you<font color="#E5E5E5"> a question</font>

754
00:29:42,470 --> 00:29:47,330
I know<font color="#E5E5E5"> Facebook</font>

755
00:29:44,090 --> 00:29:49,189
question here<font color="#E5E5E5"> Lord Shannon I think</font>

756
00:29:47,330 --> 00:29:52,100
previously<font color="#CCCCCC"> we're looking to</font><font color="#E5E5E5"> using elf</font>

757
00:29:49,190 --> 00:29:55,730
for<font color="#E5E5E5"> load</font><font color="#CCCCCC"> balancing to offload</font><font color="#E5E5E5"> traffic</font>

758
00:29:52,100 --> 00:29:57,560
from a pop<font color="#E5E5E5"> to different pop so how do</font>

759
00:29:55,730 --> 00:29:59,480
you guys actually use that<font color="#CCCCCC"> or ideal</font>

760
00:29:57,560 --> 00:30:01,490
<font color="#CCCCCC">workout at all because</font><font color="#E5E5E5"> right now it</font>

761
00:29:59,480 --> 00:30:04,070
<font color="#E5E5E5">seems like the</font><font color="#CCCCCC"> DNS space yep no we are</font>

762
00:30:01,490 --> 00:30:06,320
<font color="#E5E5E5">not using that currently yes so today as</font>

763
00:30:04,070 --> 00:30:08,960
I described it's all<font color="#E5E5E5"> DNS based there's a</font>

764
00:30:06,320 --> 00:30:10,760
fascinating thought as<font color="#E5E5E5"> you say that when</font>

765
00:30:08,960 --> 00:30:13,460
the<font color="#E5E5E5"> traffic comes in to any edge node</font>

766
00:30:10,760 --> 00:30:15,080
right you could look basically<font color="#E5E5E5"> say I've</font>

767
00:30:13,460 --> 00:30:16,670
got that traffic<font color="#E5E5E5"> which is</font><font color="#CCCCCC"> the best</font><font color="#E5E5E5"> place</font>

768
00:30:15,080 --> 00:30:18,409
<font color="#CCCCCC">behind me to serve it and</font><font color="#E5E5E5"> add another</font>

769
00:30:16,670 --> 00:30:19,850
layer in<font color="#E5E5E5"> and we're investigating that</font>

770
00:30:18,410 --> 00:30:21,980
<font color="#E5E5E5">but it hasn't made it</font><font color="#CCCCCC"> to production</font><font color="#E5E5E5"> yet</font>

771
00:30:19,850 --> 00:30:24,379
<font color="#E5E5E5">so question is</font><font color="#CCCCCC"> you kind of have the</font><font color="#E5E5E5"> same</font>

772
00:30:21,980 --> 00:30:27,470
<font color="#E5E5E5">genus problem GTO</font><font color="#CCCCCC"> expiration in this</font>

773
00:30:24,380 --> 00:30:30,590
case right<font color="#CCCCCC"> we should describe before</font><font color="#E5E5E5"> DNS</font>

774
00:30:27,470 --> 00:30:32,150
has timeout issue you have to<font color="#CCCCCC"> reduce it</font>

775
00:30:30,590 --> 00:30:33,500
<font color="#E5E5E5">here all</font><font color="#CCCCCC"> these things to</font><font color="#E5E5E5"> be able to</font>

776
00:30:32,150 --> 00:30:35,690
redirect<font color="#E5E5E5"> traffic quicker</font>

777
00:30:33,500 --> 00:30:37,340
yes that's<font color="#CCCCCC"> true</font><font color="#E5E5E5"> so yeah and when you add</font>

778
00:30:35,690 --> 00:30:39,590
in the<font color="#E5E5E5"> load shipping so what we start to</font>

779
00:30:37,340 --> 00:30:42,050
<font color="#E5E5E5">do with the DNS servers as the load is</font>

780
00:30:39,590 --> 00:30:43,580
rising<font color="#E5E5E5"> we start to drop the TTL we're</font>

781
00:30:42,050 --> 00:30:45,530
<font color="#E5E5E5">giving out so some</font><font color="#CCCCCC"> people are able to</font>

782
00:30:43,580 --> 00:30:47,449
<font color="#E5E5E5">change direction more quickly but yeah</font>

783
00:30:45,530 --> 00:30:49,639
there's a time<font color="#E5E5E5"> period as a change based</font>

784
00:30:47,450 --> 00:30:54,260
on TTLs<font color="#CCCCCC"> okay thanks yeah</font><font color="#E5E5E5"> thank you I</font>

785
00:30:49,640 --> 00:30:56,900
know - last<font color="#CCCCCC"> question hi Daniel Ryan with</font>

786
00:30:54,260 --> 00:30:58,670
MaxCDN<font color="#CCCCCC"> I just had a quick question on</font>

787
00:30:56,900 --> 00:31:01,520
you said<font color="#E5E5E5"> you announce your anycast</font>

788
00:30:58,670 --> 00:31:03,710
networks globally<font color="#CCCCCC"> do you see</font><font color="#E5E5E5"> yourself</font>

789
00:31:01,520 --> 00:31:05,810
running<font color="#E5E5E5"> into issues with Route leaking</font>

790
00:31:03,710 --> 00:31:07,550
and since the<font color="#CCCCCC"> AAS path might be the same</font>

791
00:31:05,810 --> 00:31:09,919
whether it's going<font color="#E5E5E5"> to Asia or South</font>

792
00:31:07,550 --> 00:31:11,419
America and do you use any<font color="#E5E5E5"> kind of</font><font color="#CCCCCC"> geo</font>

793
00:31:09,920 --> 00:31:13,070
<font color="#CCCCCC">DNS or is there some</font><font color="#E5E5E5"> kind</font><font color="#CCCCCC"> of back</font>

794
00:31:11,420 --> 00:31:17,000
something<font color="#CCCCCC"> you do in the back end on your</font>

795
00:31:13,070 --> 00:31:18,889
<font color="#E5E5E5">side to deal with this issue yeah so the</font>

796
00:31:17,000 --> 00:31:21,160
questions on the route leaking<font color="#E5E5E5"> we have</font>

797
00:31:18,890 --> 00:31:23,600
had one<font color="#E5E5E5"> instance of</font><font color="#CCCCCC"> that so in general</font>

798
00:31:21,160 --> 00:31:25,580
we're leaking<font color="#E5E5E5"> ourselves in</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> we're</font>

799
00:31:23,600 --> 00:31:27,709
given<font color="#CCCCCC"> the same</font><font color="#E5E5E5"> IPS out from 80 different</font>

800
00:31:25,580 --> 00:31:30,169
<font color="#CCCCCC">internet locations</font><font color="#E5E5E5"> so there's a lot</font><font color="#CCCCCC"> of</font>

801
00:31:27,710 --> 00:31:31,850
cross feed and we just rely on<font color="#CCCCCC"> BGP</font>

802
00:31:30,170 --> 00:31:34,280
shortest route sure it's perhaps<font color="#E5E5E5"> to</font>

803
00:31:31,850 --> 00:31:36,649
answer that<font color="#E5E5E5"> we had one of nodes we have</font>

804
00:31:34,280 --> 00:31:38,030
<font color="#CCCCCC">this</font><font color="#E5E5E5"> embedded in an</font><font color="#CCCCCC"> ISP that was leaking</font>

805
00:31:36,650 --> 00:31:40,010
to<font color="#CCCCCC"> the</font><font color="#E5E5E5"> Internet and it pulled a lot of</font>

806
00:31:38,030 --> 00:31:43,220
<font color="#CCCCCC">traffic to that location</font><font color="#E5E5E5"> that's totally</font>

807
00:31:40,010 --> 00:31:46,420
possible<font color="#CCCCCC"> in general when we</font><font color="#E5E5E5"> announced</font>

808
00:31:43,220 --> 00:31:48,440
the routes to an isp location that

809
00:31:46,420 --> 00:31:51,590
<font color="#E5E5E5">contractually that's supposed</font><font color="#CCCCCC"> to stay</font>

810
00:31:48,440 --> 00:31:53,330
within<font color="#E5E5E5"> their network</font><font color="#CCCCCC"> and so we have</font>

811
00:31:51,590 --> 00:31:55,490
monitors and if it starts<font color="#CCCCCC"> to</font><font color="#E5E5E5"> get too</font>

812
00:31:53,330 --> 00:31:57,740
much<font color="#E5E5E5"> load too much traffic</font><font color="#CCCCCC"> then we just</font>

813
00:31:55,490 --> 00:31:59,539
pull<font color="#CCCCCC"> that location</font><font color="#E5E5E5"> again</font><font color="#CCCCCC"> with any cast</font>

814
00:31:57,740 --> 00:32:00,980
it's pretty easy<font color="#E5E5E5"> to</font><font color="#CCCCCC"> make changes if</font>

815
00:31:59,539 --> 00:32:02,240
something's gone wrong just take it out

816
00:32:00,980 --> 00:32:04,520
<font color="#E5E5E5">and the traffic will</font><font color="#CCCCCC"> go to the next</font>

817
00:32:02,240 --> 00:32:06,500
<font color="#CCCCCC">place</font><font color="#E5E5E5"> so yeah those ones</font><font color="#CCCCCC"> that have</font>

818
00:32:04,520 --> 00:32:08,149
leaked<font color="#E5E5E5"> the v1 that has leaked the</font><font color="#CCCCCC"> rats</font>

819
00:32:06,500 --> 00:32:09,649
<font color="#E5E5E5">we just</font><font color="#CCCCCC"> turn</font><font color="#E5E5E5"> it off and then talk</font><font color="#CCCCCC"> to</font>

820
00:32:08,149 --> 00:32:13,330
<font color="#E5E5E5">them and got it fixed thank you thank</font>

821
00:32:09,649 --> 00:32:13,330
you great thank you everyone

