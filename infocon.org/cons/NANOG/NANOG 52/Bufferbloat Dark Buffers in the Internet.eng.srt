1
00:00:05,750 --> 00:00:12,360
if I persuade you<font color="#CCCCCC"> to leave here paranoid</font>

2
00:00:09,650 --> 00:00:14,260
then I<font color="#E5E5E5"> will have succeeded you should</font>

3
00:00:12,360 --> 00:00:16,180
all be paranoid to begin

4
00:00:14,260 --> 00:00:18,130
we want to thank lots of people who've

5
00:00:16,180 --> 00:00:21,580
handed me lots of puzzle pieces I've

6
00:00:18,130 --> 00:00:23,770
hoped I've assembled found a few myself

7
00:00:21,580 --> 00:00:26,459
<font color="#E5E5E5">but mostly as other</font><font color="#CCCCCC"> people's puzzle</font>

8
00:00:23,770 --> 00:00:30,490
pieces my apologies<font color="#CCCCCC"> if I've missed</font>

9
00:00:26,460 --> 00:00:32,710
acknowledgments that I should have most

10
00:00:30,490 --> 00:00:37,089
of you know this stuff but I need to

11
00:00:32,710 --> 00:00:39,280
<font color="#E5E5E5">remind everyone of it tcp will of course</font>

12
00:00:37,090 --> 00:00:42,910
fill any buffer just<font color="#E5E5E5"> before the</font>

13
00:00:39,280 --> 00:00:46,170
bottleneck of a path there is a pretty

14
00:00:42,910 --> 00:00:49,860
much unstated design assumption that

15
00:00:46,170 --> 00:00:53,229
there will be timely signaling of

16
00:00:49,860 --> 00:00:57,190
congestion and the network by packet

17
00:00:53,229 --> 00:01:01,210
loss if<font color="#E5E5E5"> you don't do this you get into a</font>

18
00:00:57,190 --> 00:01:03,970
world<font color="#E5E5E5"> of hurt as you're about to see we</font>

19
00:01:01,210 --> 00:01:05,880
judge all other transport protocols by

20
00:01:03,970 --> 00:01:08,770
whether it's at least as good as TCP

21
00:01:05,880 --> 00:01:13,060
what happens if we violated<font color="#E5E5E5"> this</font>

22
00:01:08,770 --> 00:01:15,490
presumption and the fact<font color="#E5E5E5"> that seems to</font>

23
00:01:13,060 --> 00:01:19,690
me<font color="#CCCCCC"> lots of people miss maybe not in this</font>

24
00:01:15,490 --> 00:01:22,360
audience but in most audiences is that a

25
00:01:19,690 --> 00:01:25,750
small amount of timely packet loss is

26
00:01:22,360 --> 00:01:30,130
actually necessary for<font color="#E5E5E5"> TCP to behave</font>

27
00:01:25,750 --> 00:01:33,100
correctly in a congested network and by

28
00:01:30,130 --> 00:01:35,050
the<font color="#E5E5E5"> way we always are running in a</font>

29
00:01:33,100 --> 00:01:38,070
congested network these days just not

30
00:01:35,050 --> 00:01:40,660
where we were in the 1990s as commonly

31
00:01:38,070 --> 00:01:43,419
there's also this mythology<font color="#E5E5E5"> I'd like to</font>

32
00:01:40,660 --> 00:01:45,520
puncture which is the bandwidth delay

33
00:01:43,420 --> 00:01:48,820
product which is<font color="#E5E5E5"> indeed true for a</font>

34
00:01:45,520 --> 00:01:52,030
single flow but we don't know what the

35
00:01:48,820 --> 00:01:53,289
delay is typically we've not put all

36
00:01:52,030 --> 00:01:56,620
sorts of boxes<font color="#CCCCCC"> in the middle of the</font>

37
00:01:53,290 --> 00:01:58,780
network to minimize delay and the

38
00:01:56,620 --> 00:02:01,870
bandwidth varies all over the place so

39
00:01:58,780 --> 00:02:06,640
any time<font color="#E5E5E5"> in many devices you see some</font>

40
00:02:01,870 --> 00:02:10,090
static buffer size it can't possibly be

41
00:02:06,640 --> 00:02:13,330
correct and it can and you'll see will

42
00:02:10,090 --> 00:02:15,519
bite you how many<font color="#E5E5E5"> of you have had</font>

43
00:02:13,330 --> 00:02:17,769
experiences like this<font color="#E5E5E5"> I had this for the</font>

44
00:02:15,519 --> 00:02:21,400
last five or six<font color="#CCCCCC"> years as my own home</font>

45
00:02:17,769 --> 00:02:23,519
network manager at least<font color="#E5E5E5"> some people in</font>

46
00:02:21,400 --> 00:02:25,749
the audience have raised their hands

47
00:02:23,519 --> 00:02:27,010
every time I would try to seriously

48
00:02:25,749 --> 00:02:30,230
debug this

49
00:02:27,010 --> 00:02:34,879
network would stop misbehaving so much a

50
00:02:30,230 --> 00:02:38,119
little over a year ago I got this in

51
00:02:34,879 --> 00:02:39,560
spades one day and knew<font color="#CCCCCC"> that I had to</font>

52
00:02:38,120 --> 00:02:41,840
<font color="#E5E5E5">chase it because I'm supposed to be</font>

53
00:02:39,560 --> 00:02:46,069
working on immersive teleconferencing

54
00:02:41,840 --> 00:02:48,739
and a network with over 1 seconds

55
00:02:46,069 --> 00:02:50,450
latency with huge jitter which is

56
00:02:48,739 --> 00:02:52,909
somewhere between here in the moon and

57
00:02:50,450 --> 00:02:54,920
moving back<font color="#E5E5E5"> and forth</font><font color="#CCCCCC"> at a high fraction</font>

58
00:02:52,909 --> 00:02:57,078
of the speed of light<font color="#E5E5E5"> is not something</font>

59
00:02:54,920 --> 00:02:59,238
you're ever going to successfully do

60
00:02:57,079 --> 00:03:01,370
that on and so I was<font color="#E5E5E5"> trying to</font><font color="#CCCCCC"> figure</font>

61
00:02:59,239 --> 00:03:06,290
this out and thought it might be power

62
00:03:01,370 --> 00:03:09,950
boost and ended up having lunch with one

63
00:03:06,290 --> 00:03:12,200
of its creators the morning of this we

64
00:03:09,950 --> 00:03:14,149
talked for a long time<font color="#CCCCCC"> that day I</font>

65
00:03:12,200 --> 00:03:16,849
finally figured out how to<font color="#CCCCCC"> take all</font><font color="#E5E5E5"> the</font>

66
00:03:14,150 --> 00:03:19,970
problem for real and basically is a

67
00:03:16,849 --> 00:03:25,569
really simple test from my house to a

68
00:03:19,970 --> 00:03:25,569
machine 10 milliseconds away at MIT and

69
00:03:27,549 --> 00:03:32,569
so that morning I figured<font color="#E5E5E5"> out</font><font color="#CCCCCC"> how to do</font>

70
00:03:31,340 --> 00:03:34,370
<font color="#E5E5E5">it but I haven't played with it very</font>

71
00:03:32,569 --> 00:03:36,828
much we talked about<font color="#E5E5E5"> a pile of things</font><font color="#CCCCCC"> we</font>

72
00:03:34,370 --> 00:03:39,410
<font color="#E5E5E5">would I talked with rich windy and he</font>

73
00:03:36,829 --> 00:03:41,810
mentioned the one well could be power

74
00:03:39,410 --> 00:03:43,730
boost but probably not he<font color="#E5E5E5"> thought it</font>

75
00:03:41,810 --> 00:03:45,669
more likely be<font color="#CCCCCC"> the</font><font color="#E5E5E5"> big buffers problem</font>

76
00:03:43,730 --> 00:03:50,000
that<font color="#E5E5E5"> Dave Clark had been warning about</font>

77
00:03:45,669 --> 00:03:52,040
he also<font color="#E5E5E5"> told me that well</font><font color="#CCCCCC"> red is often</font>

78
00:03:50,000 --> 00:03:55,069
not being turned on by some of the

79
00:03:52,040 --> 00:03:57,410
network operators why because I sort of

80
00:03:55,069 --> 00:04:01,190
thought that<font color="#CCCCCC"> a qm was old hat in the</font>

81
00:03:57,410 --> 00:04:02,569
1990s things like also ecn weren't

82
00:04:01,190 --> 00:04:05,269
working but I don't<font color="#E5E5E5"> have time here to</font>

83
00:04:02,569 --> 00:04:07,638
really talk about ecn at all today<font color="#CCCCCC"> and</font>

84
00:04:05,269 --> 00:04:11,299
he also gave me<font color="#CCCCCC"> a pointer to the icsi</font>

85
00:04:07,639 --> 00:04:14,660
metalizer project which pay played a

86
00:04:11,299 --> 00:04:20,510
pivotal role in understanding just how

87
00:04:14,660 --> 00:04:22,699
much trouble were in so<font color="#E5E5E5"> I got my real</font>

88
00:04:20,510 --> 00:04:25,250
smoking gun the<font color="#E5E5E5"> next day with smoke bang</font>

89
00:04:22,699 --> 00:04:27,320
this<font color="#E5E5E5"> was my home network as I</font><font color="#CCCCCC"> move 20</font>

90
00:04:25,250 --> 00:04:31,540
gigabytes of data from my house to MIT

91
00:04:27,320 --> 00:04:35,170
and those yes those are seconds and yes

92
00:04:31,540 --> 00:04:37,180
there's lots of<font color="#E5E5E5"> pack applause and what</font>

93
00:04:35,170 --> 00:04:40,420
and the only<font color="#E5E5E5"> time that the behavior is</font>

94
00:04:37,180 --> 00:04:43,780
reasonable is even surfing the web was

95
00:04:40,420 --> 00:04:46,240
so painful I had to suspend my my

96
00:04:43,780 --> 00:04:50,229
transfers from time to time just to be

97
00:04:46,240 --> 00:04:53,560
able to get some email and do things so

98
00:04:50,230 --> 00:04:56,410
complete brokenness this is what a

99
00:04:53,560 --> 00:04:58,030
normal TCP trace might look like and<font color="#E5E5E5"> so</font>

100
00:04:56,410 --> 00:05:01,660
I was motivated<font color="#CCCCCC"> enough to take a packet</font>

101
00:04:58,030 --> 00:05:03,159
capture and eventually plotted it up a

102
00:05:01,660 --> 00:05:04,480
few<font color="#E5E5E5"> weeks later I hadn't done any of</font>

103
00:05:03,160 --> 00:05:07,930
<font color="#CCCCCC">this sort</font><font color="#E5E5E5"> of stuff since I was working</font>

104
00:05:04,480 --> 00:05:13,660
on HTTP in the 1990s and instead what I

105
00:05:07,930 --> 00:05:15,880
got<font color="#E5E5E5"> out was this these amazing</font><font color="#CCCCCC"> spikes</font>

106
00:05:13,660 --> 00:05:17,710
you see those red the red lines are most

107
00:05:15,880 --> 00:05:20,409
interesting what's this is the

108
00:05:17,710 --> 00:05:22,989
outstanding data the<font color="#CCCCCC"> TCP has in flight</font>

109
00:05:20,410 --> 00:05:26,140
this doesn't look<font color="#CCCCCC"> like a normal TCP</font>

110
00:05:22,990 --> 00:05:29,830
sawtooth at all those those spikes are

111
00:05:26,140 --> 00:05:32,200
like 10 seconds apart there's half of

112
00:05:29,830 --> 00:05:34,900
order half a megabyte in transit at once

113
00:05:32,200 --> 00:05:39,070
over<font color="#E5E5E5"> 10 millisecond path that's way more</font>

114
00:05:34,900 --> 00:05:41,320
than<font color="#E5E5E5"> you'd ever want to see for a 10</font>

115
00:05:39,070 --> 00:05:45,880
millisecond path so what in the world is

116
00:05:41,320 --> 00:05:48,760
<font color="#E5E5E5">going on</font><font color="#CCCCCC"> here it looked</font><font color="#E5E5E5"> like nothing I</font>

117
00:05:45,880 --> 00:05:53,830
did and later we verified it really

118
00:05:48,760 --> 00:05:55,870
wasn't<font color="#CCCCCC"> my cable at all week or two later</font>

119
00:05:53,830 --> 00:05:59,590
as<font color="#E5E5E5"> down in New Jersey and did the</font><font color="#CCCCCC"> same</font>

120
00:05:55,870 --> 00:06:01,210
sort of tests on fios service and got

121
00:05:59,590 --> 00:06:03,340
very similar results they tend to be

122
00:06:01,210 --> 00:06:05,200
ready or because I had no way of locking

123
00:06:03,340 --> 00:06:07,150
everything rest of the family out and

124
00:06:05,200 --> 00:06:09,610
there was some interfering traffic but

125
00:06:07,150 --> 00:06:12,700
essentially the same pattern in this

126
00:06:09,610 --> 00:06:16,450
case<font color="#CCCCCC"> 20 200 milliseconds latency quarter</font>

127
00:06:12,700 --> 00:06:19,990
megabyte of data in flight on symmetric

128
00:06:16,450 --> 00:06:21,700
<font color="#CCCCCC">25 25 service you know 200 milliseconds</font>

129
00:06:19,990 --> 00:06:23,830
of latency this is way more<font color="#CCCCCC"> than it</font>

130
00:06:21,700 --> 00:06:27,340
<font color="#E5E5E5">ought to be over 20 millisecond path</font>

131
00:06:23,830 --> 00:06:29,140
from New Jersey to<font color="#E5E5E5"> MIT and wireless is</font>

132
00:06:27,340 --> 00:06:30,359
even worse and<font color="#CCCCCC"> I didn't understand why</font>

133
00:06:29,140 --> 00:06:36,719
it might be one

134
00:06:30,360 --> 00:06:41,789
other so<font color="#CCCCCC"> I ended up calling for help at</font>

135
00:06:36,719 --> 00:06:45,300
<font color="#E5E5E5">this point and we had a lengthy email</font>

136
00:06:41,789 --> 00:06:48,889
<font color="#E5E5E5">thread discussing what was going on in</font>

137
00:06:45,300 --> 00:06:52,680
these traces and it's not a pretty sight

138
00:06:48,889 --> 00:06:54,330
the there are very large buffers in this

139
00:06:52,680 --> 00:06:57,629
path in particular in this<font color="#E5E5E5"> particular</font>

140
00:06:54,330 --> 00:07:00,900
case and in the cable<font color="#E5E5E5"> modem or the fios</font>

141
00:06:57,629 --> 00:07:02,879
you know cpe and it's so bad<font color="#CCCCCC"> that we've</font>

142
00:07:00,900 --> 00:07:09,750
actually defeated TCP congestion

143
00:07:02,879 --> 00:07:11,610
avoidance so the<font color="#CCCCCC"> hosts are not backing</font>

144
00:07:09,750 --> 00:07:14,039
off when they should we're inducing

145
00:07:11,610 --> 00:07:16,349
congestion we're inducing these spikes

146
00:07:14,039 --> 00:07:19,259
of really nasty packet loss along the

147
00:07:16,349 --> 00:07:21,389
way um so I seeing significantly more

148
00:07:19,259 --> 00:07:23,879
packet loss in a normal tcp would

149
00:07:21,389 --> 00:07:26,129
normally have at this point so<font color="#CCCCCC"> the</font>

150
00:07:23,879 --> 00:07:28,469
attempt by buffering to avoid packet

151
00:07:26,129 --> 00:07:31,340
loss is actually coming back to bite you

152
00:07:28,469 --> 00:07:33,120
and making<font color="#E5E5E5"> it worse you can't</font>

153
00:07:31,340 --> 00:07:36,359
classification doesn't help you these

154
00:07:33,120 --> 00:07:38,580
devices<font color="#E5E5E5"> have like one</font><font color="#CCCCCC"> queue um and</font>

155
00:07:36,360 --> 00:07:41,849
there's no fair queuing there's nothing

156
00:07:38,580 --> 00:07:44,159
that you can get once once you've dumped

157
00:07:41,849 --> 00:07:45,659
pack us into these queues you're stuck

158
00:07:44,159 --> 00:07:49,319
they'll come<font color="#CCCCCC"> out the other side no</font>

159
00:07:45,659 --> 00:07:51,120
matter how hard you try well what<font color="#CCCCCC"> can</font>

160
00:07:49,319 --> 00:07:53,789
trigger<font color="#E5E5E5"> this kind of problem anything</font>

161
00:07:51,120 --> 00:07:55,529
that saturates the network will do this

162
00:07:53,789 --> 00:07:57,628
so<font color="#CCCCCC"> I'll give a few simple</font><font color="#E5E5E5"> examples</font>

163
00:07:55,529 --> 00:08:00,629
things like uploading a video to<font color="#CCCCCC"> YouTube</font>

164
00:07:57,629 --> 00:08:02,430
<font color="#CCCCCC">or I found Google Chrome which with my</font>

165
00:08:00,629 --> 00:08:04,979
permission was uploading<font color="#E5E5E5"> it's dead</font>

166
00:08:02,430 --> 00:08:08,810
corpse to Google one night when it had

167
00:08:04,979 --> 00:08:12,719
crashed email with large attachments

168
00:08:08,810 --> 00:08:14,580
BitTorrent more about that later just

169
00:08:12,719 --> 00:08:17,969
file copies which is what<font color="#CCCCCC"> all</font><font color="#E5E5E5"> I was</font>

170
00:08:14,580 --> 00:08:20,039
doing of course if you run tcp on top of

171
00:08:17,969 --> 00:08:21,990
TCP you're gonna lose completely i'm

172
00:08:20,039 --> 00:08:24,000
downloading movies could potentially do

173
00:08:21,990 --> 00:08:27,900
this to disk in others<font color="#E5E5E5"> anything</font>

174
00:08:24,000 --> 00:08:29,699
associates video streaming itself

175
00:08:27,900 --> 00:08:31,169
doesn't necessarily saturate the length

176
00:08:29,699 --> 00:08:33,570
but it means that<font color="#E5E5E5"> you have much less</font>

177
00:08:31,169 --> 00:08:36,059
<font color="#CCCCCC">headroom to saturating and when you do</font>

178
00:08:33,570 --> 00:08:38,819
saturate from other traffic then the

179
00:08:36,059 --> 00:08:40,589
it'll go on for much longer more

180
00:08:38,818 --> 00:08:43,829
insidiously but<font color="#CCCCCC"> i don't have</font>

181
00:08:40,590 --> 00:08:48,180
time here is even web browsing does this

182
00:08:43,830 --> 00:08:50,460
na in when you hit a website with lots

183
00:08:48,180 --> 00:08:52,199
of images on a page you<font color="#E5E5E5"> can end up with</font>

184
00:08:50,460 --> 00:08:53,910
a hundred<font color="#E5E5E5"> or more packets flying all at</font>

185
00:08:52,200 --> 00:08:57,150
once to the<font color="#E5E5E5"> poor broadband connection</font>

186
00:08:53,910 --> 00:09:00,209
where<font color="#E5E5E5"> it goes to splat and fills those</font>

187
00:08:57,150 --> 00:09:03,390
<font color="#E5E5E5">q's about it so there's transient</font>

188
00:09:00,210 --> 00:09:06,620
behavior that also is happening and the

189
00:09:03,390 --> 00:09:08,790
web guys need to clean up<font color="#E5E5E5"> their act too</font>

190
00:09:06,620 --> 00:09:12,480
but that's<font color="#E5E5E5"> not all the bad things that</font>

191
00:09:08,790 --> 00:09:15,000
happen dns starts to have failures so I

192
00:09:12,480 --> 00:09:18,510
my traces found a few DNS lookup

193
00:09:15,000 --> 00:09:20,220
failures of course adding a second or

194
00:09:18,510 --> 00:09:23,970
two of latency really kills your

195
00:09:20,220 --> 00:09:27,900
browsing experience lots of other<font color="#CCCCCC"> things</font>

196
00:09:23,970 --> 00:09:30,720
break our<font color="#CCCCCC"> DHCP you know the whole thing</font>

197
00:09:27,900 --> 00:09:32,819
god forbid<font color="#CCCCCC"> you try to do voice over IP</font>

198
00:09:30,720 --> 00:09:33,990
over a saturated link with anything like

199
00:09:32,820 --> 00:09:38,520
this kind of buffering you will

200
00:09:33,990 --> 00:09:41,370
completely lose or and web browsing will

201
00:09:38,520 --> 00:09:44,130
cause transient dropouts everything

202
00:09:41,370 --> 00:09:45,930
suffers<font color="#E5E5E5"> you know just think what</font>

203
00:09:44,130 --> 00:09:49,380
protocols do you run that will die with

204
00:09:45,930 --> 00:09:53,569
bad timeouts and when they see the wrong

205
00:09:49,380 --> 00:09:57,060
packets getting step fun<font color="#CCCCCC"> okay a year ago</font>

206
00:09:53,570 --> 00:09:59,010
the metalizer folks are here I don't

207
00:09:57,060 --> 00:10:00,390
know since I wasn't here<font color="#E5E5E5"> I don't know at</font>

208
00:09:59,010 --> 00:10:03,840
nanog I don't know who did the

209
00:10:00,390 --> 00:10:07,949
presentation early versions<font color="#CCCCCC"> of this data</font>

210
00:10:03,840 --> 00:10:10,830
set were presented them and this is for

211
00:10:07,950 --> 00:10:14,690
both upstream and downstream this shows

212
00:10:10,830 --> 00:10:21,840
the<font color="#E5E5E5"> inferred amount of buffering in the</font>

213
00:10:14,690 --> 00:10:24,780
in in the broadband edge and the actual

214
00:10:21,840 --> 00:10:29,910
amount<font color="#E5E5E5"> of latency you can see depends</font>

215
00:10:24,780 --> 00:10:32,010
upon the the lines the dashed line<font color="#E5E5E5"> I put</font>

216
00:10:29,910 --> 00:10:33,780
in here is 150 milliseconds which has

217
00:10:32,010 --> 00:10:35,700
been the normal telephony standards for

218
00:10:33,780 --> 00:10:38,100
what<font color="#E5E5E5"> is quote good enough historically</font>

219
00:10:35,700 --> 00:10:41,610
for long before even<font color="#CCCCCC"> the internet came</font>

220
00:10:38,100 --> 00:10:45,060
along but the next<font color="#CCCCCC"> screen line</font><font color="#E5E5E5"> is half a</font>

221
00:10:41,610 --> 00:10:47,280
second you're up at four seconds down

222
00:10:45,060 --> 00:10:50,369
here and this is<font color="#CCCCCC"> where the test just</font>

223
00:10:47,280 --> 00:10:52,920
stops trying to to do stuff so as<font color="#E5E5E5"> you</font>

224
00:10:50,370 --> 00:10:56,250
can see most of our broadband at

225
00:10:52,920 --> 00:10:59,550
has excessive buffering sort of end of

226
00:10:56,250 --> 00:11:03,720
story icsi has just you know closed the

227
00:10:59,550 --> 00:11:06,599
<font color="#E5E5E5">case on this particular problem that it</font>

228
00:11:03,720 --> 00:11:09,089
exists and it's massively pervasive what

229
00:11:06,600 --> 00:11:11,190
they didn't have last year was a split

230
00:11:09,089 --> 00:11:13,769
by the different technologies the

231
00:11:11,190 --> 00:11:18,540
different colored dots makes it obvious

232
00:11:13,769 --> 00:11:20,730
that it's in cable dsl and and fiber

233
00:11:18,540 --> 00:11:27,779
alike the only question is<font color="#E5E5E5"> really of one</font>

234
00:11:20,730 --> 00:11:31,380
at a degree so our broadband edge is

235
00:11:27,779 --> 00:11:34,050
broken unfortunately it<font color="#E5E5E5"> doesn't stop</font>

236
00:11:31,380 --> 00:11:36,360
<font color="#CCCCCC">there and I want you to end up as</font>

237
00:11:34,050 --> 00:11:41,160
paranoid as I now AM about excessive

238
00:11:36,360 --> 00:11:43,260
buffering so I had seen some<font color="#CCCCCC"> strange</font>

239
00:11:41,160 --> 00:11:44,939
behavior last summer as I was poking at

240
00:11:43,260 --> 00:11:49,110
things<font color="#E5E5E5"> I did not understand so I did</font>

241
00:11:44,940 --> 00:11:51,510
more more work at home for example

242
00:11:49,110 --> 00:11:54,300
during my<font color="#E5E5E5"> tests I caught I caught my</font>

243
00:11:51,510 --> 00:11:57,240
home router as observed from outside

244
00:11:54,300 --> 00:12:01,229
<font color="#E5E5E5">with literally like eight second latency</font>

245
00:11:57,240 --> 00:12:02,850
one event much worse in broadband what

246
00:12:01,230 --> 00:12:06,110
what in<font color="#E5E5E5"> the world is causing this this</font>

247
00:12:02,850 --> 00:12:08,550
is a stock recent commercial home router

248
00:12:06,110 --> 00:12:11,190
and at this particular incident I'd

249
00:12:08,550 --> 00:12:13,740
operated my service<font color="#CCCCCC"> 250 10 service at</font>

250
00:12:11,190 --> 00:12:16,380
<font color="#CCCCCC">that instant when I happen to do this</font>

251
00:12:13,740 --> 00:12:17,579
this<font color="#E5E5E5"> particular things like before going</font>

252
00:12:16,380 --> 00:12:20,689
public with<font color="#CCCCCC"> this</font><font color="#E5E5E5"> I really wouldn't</font>

253
00:12:17,579 --> 00:12:25,500
understand what what's<font color="#E5E5E5"> causing this too</font>

254
00:12:20,690 --> 00:12:27,060
and it didn't stop there so having seen

255
00:12:25,500 --> 00:12:28,800
this insanity i played with three or

256
00:12:27,060 --> 00:12:33,060
four different home routers and found

257
00:12:28,800 --> 00:12:34,740
similar sorts of behaviors and then I

258
00:12:33,060 --> 00:12:36,630
eventually wanted to actually play

259
00:12:34,740 --> 00:12:38,970
around myself so<font color="#CCCCCC"> I installed open wrt</font>

260
00:12:36,630 --> 00:12:40,890
I'm one of them and started<font color="#E5E5E5"> playing with</font>

261
00:12:38,970 --> 00:12:42,720
one of the knobs<font color="#E5E5E5"> I suspected ought to</font>

262
00:12:40,890 --> 00:12:46,980
have ought to be able<font color="#E5E5E5"> to control the</font>

263
00:12:42,720 --> 00:12:48,690
latency the on many of these routers are

264
00:12:46,980 --> 00:12:51,029
running<font color="#E5E5E5"> Linux problem is not unique to</font>

265
00:12:48,690 --> 00:12:53,910
Linux but on Linux there's this transmit

266
00:12:51,029 --> 00:12:56,069
queue I'll length you can control and I

267
00:12:53,910 --> 00:12:58,410
set set that to zero<font color="#CCCCCC"> on</font><font color="#E5E5E5"> the router</font>

268
00:12:56,069 --> 00:13:00,389
nothing happened I started<font color="#CCCCCC"> carrying my</font>

269
00:12:58,410 --> 00:13:03,120
hair out<font color="#E5E5E5"> in two days later I remember oh</font>

270
00:13:00,389 --> 00:13:04,380
I<font color="#E5E5E5"> was copying upstream so the buffers</font>

271
00:13:03,120 --> 00:13:07,430
have to be in my

272
00:13:04,380 --> 00:13:10,860
host operating system in my<font color="#E5E5E5"> case Linux</font>

273
00:13:07,430 --> 00:13:13,620
so this case occurs anytime your

274
00:13:10,860 --> 00:13:15,240
broadband bandwidth exceeds how many

275
00:13:13,620 --> 00:13:17,760
bits you're actually able<font color="#E5E5E5"> to get over</font>

276
00:13:15,240 --> 00:13:19,230
<font color="#E5E5E5">your wire length the wireless link the</font>

277
00:13:17,760 --> 00:13:21,390
bottlenecks not going to be in the end

278
00:13:19,230 --> 00:13:23,160
be in the broadband gear at all it's

279
00:13:21,390 --> 00:13:26,460
going<font color="#E5E5E5"> to be in</font><font color="#CCCCCC"> that file if the final</font>

280
00:13:23,160 --> 00:13:28,829
hop so we have to fix both the operating

281
00:13:26,460 --> 00:13:30,930
systems which is more detail about

282
00:13:28,830 --> 00:13:37,350
what's working there and their home

283
00:13:30,930 --> 00:13:39,930
routers as well so unfortunately<font color="#CCCCCC"> buffers</font>

284
00:13:37,350 --> 00:13:41,760
sort of digging into this<font color="#E5E5E5"> side and</font>

285
00:13:39,930 --> 00:13:43,859
modern operating systems all over the

286
00:13:41,760 --> 00:13:45,540
place but<font color="#E5E5E5"> I want to try to help you</font>

287
00:13:43,860 --> 00:13:48,870
understand how sensitive things are the

288
00:13:45,540 --> 00:13:51,630
two this so if you have 256 packets of

289
00:13:48,870 --> 00:13:53,670
buffering and you're able<font color="#CCCCCC"> to get 10</font>

290
00:13:51,630 --> 00:13:56,130
megabits a second over your wireless

291
00:13:53,670 --> 00:13:58,199
link which<font color="#CCCCCC"> is not unusual that's a third</font>

292
00:13:56,130 --> 00:14:03,780
of a second of<font color="#E5E5E5"> latency right there by</font>

293
00:13:58,200 --> 00:14:06,870
simple arithmetic and things will fill

294
00:14:03,780 --> 00:14:10,050
those buffers what happens in<font color="#CCCCCC"> the busy</font>

295
00:14:06,870 --> 00:14:12,420
conference thankfully not this one I am

296
00:14:10,050 --> 00:14:16,829
in awe<font color="#CCCCCC"> of the quality of the network</font>

297
00:14:12,420 --> 00:14:18,780
here so there<font color="#E5E5E5"> is hope where your fair</font>

298
00:14:16,830 --> 00:14:19,980
share might be<font color="#E5E5E5"> 100 kilobits well the</font>

299
00:14:18,780 --> 00:14:22,079
same<font color="#CCCCCC"> amount of buffering becomes</font>

300
00:14:19,980 --> 00:14:25,710
30-second latency well you've just lost

301
00:14:22,080 --> 00:14:29,040
completely along<font color="#CCCCCC"> with the additional</font>

302
00:14:25,710 --> 00:14:30,570
packet losses you get in various ways so

303
00:14:29,040 --> 00:14:33,750
you can ask yourself as I was for a

304
00:14:30,570 --> 00:14:38,160
while do and don't why when I see<font color="#E5E5E5"> this</font>

305
00:14:33,750 --> 00:14:39,930
on<font color="#E5E5E5"> Ethernet and of course as I started</font>

306
00:14:38,160 --> 00:14:43,110
to understand what I<font color="#E5E5E5"> was doing I did</font>

307
00:14:39,930 --> 00:14:49,140
plug the one gigabit per second neck and

308
00:14:43,110 --> 00:14:53,040
into into a switch and it<font color="#E5E5E5"> turns out that</font>

309
00:14:49,140 --> 00:14:55,980
<font color="#E5E5E5">the device drivers or the hardware has</font>

310
00:14:53,040 --> 00:14:58,050
now sprouted these ring these ring

311
00:14:55,980 --> 00:14:59,790
buffers internally and they're typically

312
00:14:58,050 --> 00:15:04,349
on all of the operating<font color="#E5E5E5"> systems as far</font>

313
00:14:59,790 --> 00:15:06,599
as I can figure out about 256 packets of

314
00:15:04,350 --> 00:15:09,300
buffering sitting down in your device

315
00:15:06,600 --> 00:15:11,400
driver underneath<font color="#E5E5E5"> whatever the operating</font>

316
00:15:09,300 --> 00:15:13,319
system queuing and classification might

317
00:15:11,400 --> 00:15:14,089
be you<font color="#E5E5E5"> don't see it on Windows</font>

318
00:15:13,320 --> 00:15:17,809
interestingly

319
00:15:14,089 --> 00:15:21,290
and i grovelled around on on<font color="#E5E5E5"> Microsoft's</font>

320
00:15:17,809 --> 00:15:23,809
website and and they actually bandwidth

321
00:15:21,290 --> 00:15:25,998
limit their their<font color="#E5E5E5"> traffic so they never</font>

322
00:15:23,809 --> 00:15:27,980
quite saturated 100 megabit per second

323
00:15:25,999 --> 00:15:30,379
link i think they saw a buffer bloating

324
00:15:27,980 --> 00:15:32,449
and adopted a very nice pragmatic

325
00:15:30,379 --> 00:15:34,999
solution to this at<font color="#E5E5E5"> least for a campus</font>

326
00:15:32,449 --> 00:15:37,219
network and i've recently<font color="#CCCCCC"> was looking at</font>

327
00:15:34,999 --> 00:15:38,660
ethernet switch<font color="#CCCCCC"> jeff's which have you</font>

328
00:15:37,220 --> 00:15:42,829
know one or more mega bits of<font color="#E5E5E5"> ram</font>

329
00:15:38,660 --> 00:15:46,009
internally we were playing<font color="#E5E5E5"> with a Dave</font>

330
00:15:42,829 --> 00:15:49,040
tots been playing with with a modern

331
00:15:46,009 --> 00:15:51,259
home router and and you know<font color="#E5E5E5"> we were</font>

332
00:15:49,040 --> 00:15:54,699
seeing 70 millisecond latency in the

333
00:15:51,259 --> 00:15:58,459
switch itself so some of these devices

334
00:15:54,699 --> 00:16:00,019
even individual chips are having large

335
00:15:58,459 --> 00:16:02,930
amounts of buffering<font color="#CCCCCC"> they're well beyond</font>

336
00:16:00,019 --> 00:16:05,360
what<font color="#E5E5E5"> is probably necessary so where does</font>

337
00:16:02,930 --> 00:16:09,290
this hurt us well you know lots of

338
00:16:05,360 --> 00:16:11,209
places trying to keep<font color="#E5E5E5"> us oriented by by</font>

339
00:16:09,290 --> 00:16:13,849
<font color="#E5E5E5">sword is using this sort</font><font color="#CCCCCC"> of the same map</font>

340
00:16:11,209 --> 00:16:15,550
everywhere because<font color="#E5E5E5"> our operating systems</font>

341
00:16:13,850 --> 00:16:20,179
which are also in you know these guys

342
00:16:15,550 --> 00:16:22,339
have problems and our laptops yeah it's

343
00:16:20,179 --> 00:16:30,410
<font color="#E5E5E5">sort of all over</font><font color="#CCCCCC"> the edge of</font><font color="#E5E5E5"> the network</font>

344
00:16:22,339 --> 00:16:33,259
there um<font color="#CCCCCC"> okay so</font><font color="#E5E5E5"> in the 1990s I know I</font>

345
00:16:30,410 --> 00:16:36,350
suffered with the rest of people here<font color="#E5E5E5"> or</font>

346
00:16:33,259 --> 00:16:41,199
many of the people here with the very

347
00:16:36,350 --> 00:16:43,790
large congestion problems we had then

348
00:16:41,199 --> 00:16:47,109
but<font color="#E5E5E5"> it doesn't stop there the same kind</font>

349
00:16:43,790 --> 00:16:49,490
<font color="#E5E5E5">of thing now can occur in lots of places</font>

350
00:16:47,110 --> 00:16:51,740
in particular<font color="#E5E5E5"> in wireless technologies</font>

351
00:16:49,490 --> 00:16:54,829
people put in lots of buffers for lots

352
00:16:51,740 --> 00:16:56,779
of reasons that<font color="#E5E5E5"> seem sensible the</font>

353
00:16:54,829 --> 00:17:01,219
problem is<font color="#CCCCCC"> they're statically sized and</font>

354
00:16:56,779 --> 00:17:03,350
unmanaged buffers for<font color="#CCCCCC"> example in 3g</font>

355
00:17:01,220 --> 00:17:05,419
there's various stuff to try to deal

356
00:17:03,350 --> 00:17:09,319
with error correction which can add

357
00:17:05,419 --> 00:17:10,760
pretty large amounts of buffering the

358
00:17:09,319 --> 00:17:13,908
wireless<font color="#E5E5E5"> protocols themselves have</font>

359
00:17:10,760 --> 00:17:16,908
interesting things you end up with<font color="#E5E5E5"> a</font>

360
00:17:13,909 --> 00:17:18,799
situation where the aggregate buffering

361
00:17:16,909 --> 00:17:22,280
all over the network when it saturates

362
00:17:18,799 --> 00:17:23,959
has a real problem so<font color="#E5E5E5"> if you've wondered</font>

363
00:17:22,280 --> 00:17:27,539
why

364
00:17:23,959 --> 00:17:30,090
various of the<font color="#E5E5E5"> 3g carriers have had very</font>

365
00:17:27,539 --> 00:17:31,950
high latency you should stop wondering

366
00:17:30,090 --> 00:17:34,049
it's basically the<font color="#CCCCCC"> same kind</font><font color="#E5E5E5"> of</font>

367
00:17:31,950 --> 00:17:37,080
phenomena we had in the core of<font color="#E5E5E5"> the</font>

368
00:17:34,049 --> 00:17:39,360
<font color="#E5E5E5">Internet in</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> 1990s in large part</font>

369
00:17:37,080 --> 00:17:41,908
they've read tried to make people<font color="#E5E5E5"> aware</font>

370
00:17:39,360 --> 00:17:43,949
of this about a couple years<font color="#E5E5E5"> ago I've</font>

371
00:17:41,909 --> 00:17:45,990
personally seen<font color="#CCCCCC"> six-second Layton sees</font>

372
00:17:43,950 --> 00:17:48,659
I've talked to other people who've seen

373
00:17:45,990 --> 00:17:51,389
up to 60 second Layton sees<font color="#E5E5E5"> I can</font>

374
00:17:48,659 --> 00:17:53,610
confirm<font color="#CCCCCC"> now that this is a problem</font><font color="#E5E5E5"> in at</font>

375
00:17:51,389 --> 00:17:56,039
least some RNC's probably all<font color="#CCCCCC"> of them as</font>

376
00:17:53,610 --> 00:17:58,019
far<font color="#E5E5E5"> as I would guess but also certain</font>

377
00:17:56,039 --> 00:17:59,399
carriers not doing the<font color="#E5E5E5"> right thing in</font>

378
00:17:58,019 --> 00:18:07,019
their backhaul networks that are running

379
00:17:59,399 --> 00:18:08,639
congested ok so<font color="#E5E5E5"> why given we sort of</font>

380
00:18:07,019 --> 00:18:12,269
thought we had the congestion problem

381
00:18:08,639 --> 00:18:14,250
solved in the 1990s is it clearly not

382
00:18:12,269 --> 00:18:16,440
just<font color="#E5E5E5"> turned on everywhere and so that</font>

383
00:18:14,250 --> 00:18:18,059
<font color="#CCCCCC">was</font><font color="#E5E5E5"> one of</font><font color="#CCCCCC"> the questions that I needed</font>

384
00:18:16,440 --> 00:18:23,220
to understand and so I called up and

385
00:18:18,059 --> 00:18:26,279
Jacobson several times last year told me

386
00:18:23,220 --> 00:18:28,350
<font color="#E5E5E5">the interesting story here thankfully it</font>

387
00:18:26,279 --> 00:18:30,240
has some amusing things since i'm doing

388
00:18:28,350 --> 00:18:33,059
bearing bad news i like i like to have

389
00:18:30,240 --> 00:18:34,649
some funny stories as well so attend a

390
00:18:33,059 --> 00:18:37,769
little over<font color="#E5E5E5"> 10 something over 10 years</font>

391
00:18:34,649 --> 00:18:40,350
<font color="#E5E5E5">ago in 1999</font><font color="#CCCCCC"> Cathy Nichols walked into</font>

392
00:18:37,769 --> 00:18:42,630
man's office and choked him over a

393
00:18:40,350 --> 00:18:45,600
couple period a couple hour period that

394
00:18:42,630 --> 00:18:48,360
red had several pretty fundamental miss

395
00:18:45,600 --> 00:18:52,110
features and they tried<font color="#E5E5E5"> to publish this</font>

396
00:18:48,360 --> 00:18:54,719
result the<font color="#CCCCCC"> first time they tried to</font>

397
00:18:52,110 --> 00:18:57,120
<font color="#E5E5E5">publish the results with maybe a</font>

398
00:18:54,720 --> 00:19:01,679
possible solution for it the paper was

399
00:18:57,120 --> 00:19:04,289
rejected because<font color="#CCCCCC"> Vanna chosen a to</font>

400
00:19:01,679 --> 00:19:07,620
explain the<font color="#E5E5E5"> TCP servo system a flush</font>

401
00:19:04,289 --> 00:19:11,970
toilet and<font color="#CCCCCC"> this offended one of the one</font>

402
00:19:07,620 --> 00:19:16,918
of<font color="#E5E5E5"> the key on committee members and then</font>

403
00:19:11,970 --> 00:19:22,740
they tried again in like<font color="#E5E5E5"> 2004 blinded</font>

404
00:19:16,919 --> 00:19:28,700
conference submission<font color="#E5E5E5"> and the reviewers</font>

405
00:19:22,740 --> 00:19:32,070
comments came back that the the

406
00:19:28,700 --> 00:19:35,010
that the<font color="#CCCCCC"> author's can't possibly know</font>

407
00:19:32,070 --> 00:19:36,770
<font color="#CCCCCC">yeah need need to understand how a qm</font>

408
00:19:35,010 --> 00:19:42,720
actually works and<font color="#E5E5E5"> they should go read</font>

409
00:19:36,770 --> 00:19:45,120
<font color="#E5E5E5">Floyd in</font><font color="#CCCCCC"> Jacobson 1993 there is a draft</font>

410
00:19:42,720 --> 00:19:47,340
of a paper called<font color="#E5E5E5"> read in a different</font>

411
00:19:45,120 --> 00:19:49,620
light from 1999 that did escape it'll

412
00:19:47,340 --> 00:19:53,040
give you some insight as to to the

413
00:19:49,620 --> 00:19:54,949
problems there's also a potential I

414
00:19:53,040 --> 00:19:57,930
don't know how big for time-based

415
00:19:54,950 --> 00:20:01,320
congestion which is the thing that

416
00:19:57,930 --> 00:20:03,960
causes me to lose sleep a lot people are

417
00:20:01,320 --> 00:20:05,580
not pacing packets out and they're

418
00:20:03,960 --> 00:20:07,860
injecting them in bursts in the network

419
00:20:05,580 --> 00:20:09,800
this is<font color="#E5E5E5"> also making</font><font color="#CCCCCC"> it much harder to</font>

420
00:20:07,860 --> 00:20:12,750
deal with queue management at<font color="#CCCCCC"> the edge</font>

421
00:20:09,800 --> 00:20:15,680
so it's the<font color="#CCCCCC"> question is will we start</font>

422
00:20:12,750 --> 00:20:17,880
seeing global or regional

423
00:20:15,680 --> 00:20:20,790
synchronization phenomena causing

424
00:20:17,880 --> 00:20:24,510
time-based congestion the network<font color="#CCCCCC"> donno</font>

425
00:20:20,790 --> 00:20:28,290
we'll see so we see this<font color="#CCCCCC"> on a number of</font>

426
00:20:24,510 --> 00:20:30,540
locations unfortunately some carriers

427
00:20:28,290 --> 00:20:34,110
are not enabling<font color="#E5E5E5"> red even in places</font>

428
00:20:30,540 --> 00:20:38,000
where they could<font color="#E5E5E5"> and should for example</font>

429
00:20:34,110 --> 00:20:40,139
in the<font color="#CCCCCC"> headend year of of broadband</font>

430
00:20:38,000 --> 00:20:44,580
certainly the wrong things are happening

431
00:20:40,140 --> 00:20:46,950
in a lot<font color="#CCCCCC"> of the current 3g networks some</font>

432
00:20:44,580 --> 00:20:49,889
pieces<font color="#CCCCCC"> of the internet it's clear the</font>

433
00:20:46,950 --> 00:20:51,510
operators are running naked in places

434
00:20:49,890 --> 00:20:54,380
where they shouldn't I've certainly

435
00:20:51,510 --> 00:20:57,150
verified that just by looking<font color="#CCCCCC"> at at the</font>

436
00:20:54,380 --> 00:20:59,880
<font color="#E5E5E5">Layton sees going back on certain</font>

437
00:20:57,150 --> 00:21:03,000
networks I've seen satellite Layton sees

438
00:20:59,880 --> 00:21:05,700
of insanity to Peru you often see this

439
00:21:03,000 --> 00:21:09,090
in hotels for lots of reasons that have

440
00:21:05,700 --> 00:21:14,220
to do with<font color="#CCCCCC"> it we have lots of problems</font>

441
00:21:09,090 --> 00:21:15,990
in 802 11 again you have ultimately you

442
00:21:14,220 --> 00:21:17,760
have to worry about even a single packet

443
00:21:15,990 --> 00:21:19,740
of buffering in many environments is a

444
00:21:17,760 --> 00:21:23,150
real issue and we aren't<font color="#E5E5E5"> doing</font>

445
00:21:19,740 --> 00:21:27,120
controlling our buffering dynamically so

446
00:21:23,150 --> 00:21:29,220
it's a real headache the result of this

447
00:21:27,120 --> 00:21:32,100
is a real mess and it's why<font color="#CCCCCC"> it's been</font>

448
00:21:29,220 --> 00:21:33,690
hard for people to<font color="#E5E5E5"> figure out every</font>

449
00:21:32,100 --> 00:21:35,350
other conference I've been to I've seen

450
00:21:33,690 --> 00:21:38,260
<font color="#E5E5E5">problems than they go to 11</font>

451
00:21:35,350 --> 00:21:41,230
here schools hotels are particularly

452
00:21:38,260 --> 00:21:43,900
notorious like I see in my across across

453
00:21:41,230 --> 00:21:46,270
the street and it's<font color="#E5E5E5"> hard to figure this</font>

454
00:21:43,900 --> 00:21:49,770
out<font color="#E5E5E5"> we had our network completely fail</font>

455
00:21:46,270 --> 00:21:51,820
at<font color="#CCCCCC"> one laptop per child when I was there</font>

456
00:21:49,770 --> 00:21:54,100
buffer blow it was certainly one of the

457
00:21:51,820 --> 00:21:58,090
two causes that causes real grief and we

458
00:21:54,100 --> 00:21:59,500
never figured it<font color="#E5E5E5"> out then there's tons</font>

459
00:21:58,090 --> 00:22:01,928
of<font color="#E5E5E5"> different places where buffering can</font>

460
00:21:59,500 --> 00:22:04,450
hide in our systems all the way up into

461
00:22:01,929 --> 00:22:06,220
applications themselves I don't<font color="#E5E5E5"> have</font>

462
00:22:04,450 --> 00:22:09,100
<font color="#E5E5E5">time to</font><font color="#CCCCCC"> go through this</font><font color="#E5E5E5"> but it's a long</font>

463
00:22:06,220 --> 00:22:13,960
list and vm systems are adding yet more

464
00:22:09,100 --> 00:22:15,760
layers of potential buffering corporate

465
00:22:13,960 --> 00:22:16,960
networks another issue for example<font color="#E5E5E5"> I</font>

466
00:22:15,760 --> 00:22:18,580
discovered<font color="#E5E5E5"> that our own internal</font>

467
00:22:16,960 --> 00:22:20,640
corporate network while we were running

468
00:22:18,580 --> 00:22:23,110
we are running very sophisticated

469
00:22:20,640 --> 00:22:25,090
classification for wipe and so on has no

470
00:22:23,110 --> 00:22:27,840
queue management enabled them the

471
00:22:25,090 --> 00:22:30,908
process of getting through this fixed

472
00:22:27,840 --> 00:22:33,610
when windows seven takes over from

473
00:22:30,909 --> 00:22:35,409
Windows XP<font color="#E5E5E5"> in corporate environments so</font>

474
00:22:33,610 --> 00:22:37,840
become much more of an issue when

475
00:22:35,409 --> 00:22:39,520
windows XP does not turn on<font color="#CCCCCC"> windows</font>

476
00:22:37,840 --> 00:22:42,730
scaling by default and so won't

477
00:22:39,520 --> 00:22:46,379
typically saturate most corporate

478
00:22:42,730 --> 00:22:48,970
<font color="#E5E5E5">long-haul links everything else does</font>

479
00:22:46,380 --> 00:22:51,039
I've seen<font color="#E5E5E5"> problems than our IPSec</font>

480
00:22:48,970 --> 00:22:54,010
infrastructure at the point where it it

481
00:22:51,039 --> 00:22:55,360
comes down there are lots of other place

482
00:22:54,010 --> 00:22:58,900
you need<font color="#CCCCCC"> to worry about encryption</font>

483
00:22:55,360 --> 00:23:02,260
buffers and so on so where do we have

484
00:22:58,900 --> 00:23:05,289
problems<font color="#E5E5E5"> unfortunately we're now most of</font>

485
00:23:02,260 --> 00:23:06,908
the internet not always there<font color="#CCCCCC"> are some</font>

486
00:23:05,289 --> 00:23:12,270
places some people run really clean

487
00:23:06,909 --> 00:23:15,580
networks my hat's off to them I the

488
00:23:12,270 --> 00:23:17,860
hypothesis is people who operate errs

489
00:23:15,580 --> 00:23:21,039
who grew up in the 1990s who were burned

490
00:23:17,860 --> 00:23:23,199
badly by congestion then you can do some

491
00:23:21,039 --> 00:23:25,750
things<font color="#E5E5E5"> about this you can even make your</font>

492
00:23:23,200 --> 00:23:29,409
home environment work much better this

493
00:23:25,750 --> 00:23:31,210
<font color="#CCCCCC">is my before and my after is almost</font><font color="#E5E5E5"> 100</font>

494
00:23:29,409 --> 00:23:33,549
times better I have to throw away<font color="#CCCCCC"> a lot</font>

495
00:23:31,210 --> 00:23:36,000
<font color="#CCCCCC">of my bandwidth to do it there's more</font>

496
00:23:33,549 --> 00:23:38,280
<font color="#CCCCCC">information on my blog and so on about</font>

497
00:23:36,000 --> 00:23:40,710
what to do where<font color="#E5E5E5"> there couple of</font>

498
00:23:38,280 --> 00:23:42,270
interesting implications about having to

499
00:23:40,710 --> 00:23:45,870
do with network neutrality in all of

500
00:23:42,270 --> 00:23:47,700
this I don't believe BitTorrent problems

501
00:23:45,870 --> 00:23:49,169
I believe that part of the problems that

502
00:23:47,700 --> 00:23:51,900
bittorrent causes were incorrectly

503
00:23:49,170 --> 00:23:53,640
diagnosed at<font color="#CCCCCC"> the time the BitTorrent</font>

504
00:23:51,900 --> 00:23:57,270
deployed the buffering was already

505
00:23:53,640 --> 00:23:59,220
excessive and at the<font color="#E5E5E5"> time the uplink was</font>

506
00:23:57,270 --> 00:24:02,250
very low you'd end up with multiple

507
00:23:59,220 --> 00:24:04,830
second Layton sees when BitTorrent would

508
00:24:02,250 --> 00:24:07,320
saturate with it yet and XP makes it

509
00:24:04,830 --> 00:24:08,909
much harder to see this because<font color="#E5E5E5"> it's</font>

510
00:24:07,320 --> 00:24:11,100
<font color="#CCCCCC">going</font><font color="#E5E5E5"> to take multiple connections to do</font>

511
00:24:08,910 --> 00:24:14,700
it carriers telephony have a fundamental

512
00:24:11,100 --> 00:24:17,100
advantage of quality over conventional

513
00:24:14,700 --> 00:24:19,020
sip voice or skype that's reality<font color="#E5E5E5"> I</font>

514
00:24:17,100 --> 00:24:21,899
don't believe<font color="#CCCCCC"> this was intentional by</font>

515
00:24:19,020 --> 00:24:25,350
anybody the carrier is get this in the

516
00:24:21,900 --> 00:24:27,510
ear or in the inbox blend in terms of

517
00:24:25,350 --> 00:24:30,449
complaints about their networks not

518
00:24:27,510 --> 00:24:33,840
working properly if we don't roll up our

519
00:24:30,450 --> 00:24:36,450
sleeves and fix this if we want to do

520
00:24:33,840 --> 00:24:38,340
anything<font color="#E5E5E5"> in low latency we have a real</font>

521
00:24:36,450 --> 00:24:41,970
problem<font color="#E5E5E5"> so the situation is getting</font>

522
00:24:38,340 --> 00:24:45,419
worse in part because XP is going away

523
00:24:41,970 --> 00:24:50,490
but also that the video the application

524
00:24:45,420 --> 00:24:52,770
mix is changing and I I fear<font color="#CCCCCC"> for things</font>

525
00:24:50,490 --> 00:24:54,590
like femtocells and like so it's<font color="#E5E5E5"> going</font>

526
00:24:52,770 --> 00:24:56,879
<font color="#E5E5E5">to get worse rather than it gets better</font>

527
00:24:54,590 --> 00:25:00,240
if you don't<font color="#CCCCCC"> know</font><font color="#E5E5E5"> what</font><font color="#CCCCCC"> the buffering is</font>

528
00:24:56,880 --> 00:25:02,520
in your devices it's a bomb waiting to

529
00:25:00,240 --> 00:25:04,590
<font color="#E5E5E5">maybe or may not ever go</font><font color="#CCCCCC"> off for</font><font color="#E5E5E5"> you</font>

530
00:25:02,520 --> 00:25:07,620
because<font color="#CCCCCC"> it only matters at the at the</font>

531
00:25:04,590 --> 00:25:09,990
bottleneck link obviously you can push

532
00:25:07,620 --> 00:25:11,790
<font color="#CCCCCC">back on</font><font color="#E5E5E5"> the suppliers the tests are</font>

533
00:25:09,990 --> 00:25:15,180
actually pretty easy you<font color="#CCCCCC"> just test</font>

534
00:25:11,790 --> 00:25:19,590
latency under load you saturate any link

535
00:25:15,180 --> 00:25:22,320
and measure its latency buffering should

536
00:25:19,590 --> 00:25:24,810
never be static so there are changes

537
00:25:22,320 --> 00:25:27,450
thankfully underway and<font color="#CCCCCC"> docks us to</font>

538
00:25:24,810 --> 00:25:30,389
allow them to control the amount of

539
00:25:27,450 --> 00:25:32,760
buffering<font color="#E5E5E5"> and cable modems but you we</font>

540
00:25:30,390 --> 00:25:34,920
have to get everybody to go beyond the

541
00:25:32,760 --> 00:25:36,390
thought that packet losses evil it's

542
00:25:34,920 --> 00:25:38,760
actually essential for the network<font color="#E5E5E5"> to</font>

543
00:25:36,390 --> 00:25:41,850
work properly<font color="#CCCCCC"> under load and that</font>

544
00:25:38,760 --> 00:25:45,140
<font color="#E5E5E5">message has to get in into the customers</font>

545
00:25:41,850 --> 00:25:45,139
<font color="#E5E5E5">and everybody's minds</font>

546
00:25:45,450 --> 00:25:52,630
take RFC 2309 to heart if you if you're

547
00:25:50,590 --> 00:25:55,899
in a<font color="#CCCCCC"> situation where you can run red you</font>

548
00:25:52,630 --> 00:25:57,130
should be with some possible exceptions

549
00:25:55,900 --> 00:25:59,410
but I don't have<font color="#E5E5E5"> time to go</font><font color="#CCCCCC"> into</font><font color="#E5E5E5"> that</font>

550
00:25:57,130 --> 00:26:01,539
the big place where it's obvious that's

551
00:25:59,410 --> 00:26:05,380
not happening is in a<font color="#E5E5E5"> lot of the</font>

552
00:26:01,539 --> 00:26:07,629
broadband head ends to really fix this

553
00:26:05,380 --> 00:26:10,630
properly as opposed to just reducing the

554
00:26:07,630 --> 00:26:13,590
problem is going<font color="#E5E5E5"> to require at least a</font>

555
00:26:10,630 --> 00:26:17,289
qm everywhere and better algorithms

556
00:26:13,590 --> 00:26:21,220
along<font color="#CCCCCC"> with probably ECM a bunch</font><font color="#E5E5E5"> of other</font>

557
00:26:17,289 --> 00:26:23,740
good things getting deployed one message

558
00:26:21,220 --> 00:26:26,049
<font color="#CCCCCC">for people who are in networks in this</font>

559
00:26:23,740 --> 00:26:27,970
place you guys take<font color="#CCCCCC"> it in the</font><font color="#E5E5E5"> year in</font>

560
00:26:26,049 --> 00:26:31,090
the inbox even when it's somebody else's

561
00:26:27,970 --> 00:26:32,620
bloat<font color="#CCCCCC"> okay so it can be the person's</font>

562
00:26:31,090 --> 00:26:35,439
operating system it can be their home

563
00:26:32,620 --> 00:26:37,600
router but you're the guys who get

564
00:26:35,440 --> 00:26:41,140
blamed when the internet<font color="#E5E5E5"> doesn't work</font>

565
00:26:37,600 --> 00:26:42,639
the way it's supposed to and I know

566
00:26:41,140 --> 00:26:45,820
because I place the service calls

567
00:26:42,640 --> 00:26:47,289
personally and thank you<font color="#E5E5E5"> whoever set up</font>

568
00:26:45,820 --> 00:26:50,250
this network<font color="#E5E5E5"> it's</font><font color="#CCCCCC"> a first</font><font color="#E5E5E5"> time I've</font><font color="#CCCCCC"> seen</font>

569
00:26:47,289 --> 00:26:53,080
a decent network anywhere on the planet

570
00:26:50,250 --> 00:26:55,480
I'm actually running on my linux machine

571
00:26:53,080 --> 00:26:58,360
and algorithm that controls my my

572
00:26:55,480 --> 00:27:02,200
buffering on yet<font color="#E5E5E5"> and so now</font><font color="#CCCCCC"> we have</font><font color="#E5E5E5"> to</font>

573
00:26:58,360 --> 00:27:05,770
fix the rest of the planet so we're all

574
00:27:02,200 --> 00:27:07,780
in<font color="#E5E5E5"> this together please come help think</font>

575
00:27:05,770 --> 00:27:09,879
<font color="#E5E5E5">about all</font><font color="#CCCCCC"> the places where you may have</font>

576
00:27:07,780 --> 00:27:11,590
problems<font color="#E5E5E5"> there's a longer version of</font>

577
00:27:09,880 --> 00:27:15,630
<font color="#E5E5E5">this talk up on YouTube</font><font color="#CCCCCC"> that I gave it</font>

578
00:27:11,590 --> 00:27:18,629
at Google a month or six weeks<font color="#E5E5E5"> ago and</font>

579
00:27:15,630 --> 00:27:18,630
questions

580
00:27:22,330 --> 00:27:27,199
come now note at the<font color="#CCCCCC"> ietf it was</font><font color="#E5E5E5"> exactly</font>

581
00:27:25,610 --> 00:27:29,740
the opposite everybody ran to the

582
00:27:27,200 --> 00:27:29,740
microphone

583
00:27:34,340 --> 00:27:38,370
no oh there<font color="#E5E5E5"> we go we've got a couple</font>

584
00:27:36,630 --> 00:27:44,820
couple minutes for questions<font color="#E5E5E5"> or comments</font>

585
00:27:38,370 --> 00:27:47,629
here thanks Kevin over<font color="#E5E5E5"> 14 vs net buffer</font>

586
00:27:44,820 --> 00:27:50,100
bloat is so pervasive I mean<font color="#E5E5E5"> it</font>

587
00:27:47,630 --> 00:27:53,790
<font color="#E5E5E5">basically everywhere it and everything</font>

588
00:27:50,100 --> 00:27:58,730
has anybody looked into any way that we

589
00:27:53,790 --> 00:28:01,379
can modify TCP congestion algorithms to

590
00:27:58,730 --> 00:28:03,180
recognize an account for buffer bloat it

591
00:28:01,380 --> 00:28:06,180
creates such a very distinctive

592
00:28:03,180 --> 00:28:07,770
signature in the in the traffic flow<font color="#E5E5E5"> I</font>

593
00:28:06,180 --> 00:28:12,230
would think<font color="#E5E5E5"> there ought to be some way</font>

594
00:28:07,770 --> 00:28:14,550
<font color="#E5E5E5">we could we could detect this and</font>

595
00:28:12,230 --> 00:28:16,440
compensate for it if not truly correct

596
00:28:14,550 --> 00:28:19,350
for it well yeah then you have the

597
00:28:16,440 --> 00:28:21,450
deployment problem of the modified<font color="#CCCCCC"> TCPS</font>

598
00:28:19,350 --> 00:28:24,629
game theory tells you that if that puts

599
00:28:21,450 --> 00:28:26,720
you to disadvantaged everybody else that

600
00:28:24,630 --> 00:28:30,090
<font color="#E5E5E5">you're</font><font color="#CCCCCC"> not likely to get it deployed</font>

601
00:28:26,720 --> 00:28:32,040
what's worse is it's often what you do

602
00:28:30,090 --> 00:28:33,840
to other people or they are doing<font color="#E5E5E5"> to</font><font color="#CCCCCC"> you</font>

603
00:28:32,040 --> 00:28:36,300
on the shared link and so<font color="#E5E5E5"> just because</font>

604
00:28:33,840 --> 00:28:39,449
you fig you made your personal machine

605
00:28:36,300 --> 00:28:41,520
work better and be more friendly that

606
00:28:39,450 --> 00:28:45,030
doesn't mean you aren't the poor person

607
00:28:41,520 --> 00:28:47,040
who's dying from it it may be and what I

608
00:28:45,030 --> 00:28:49,230
was doing to my family was when I was

609
00:28:47,040 --> 00:28:52,649
<font color="#E5E5E5">typically copying big stuff to my house</font>

610
00:28:49,230 --> 00:28:56,730
for my job right and so I was usually

611
00:28:52,650 --> 00:28:59,040
<font color="#CCCCCC">the inflict ER of pain so I don't I'm I</font>

612
00:28:56,730 --> 00:29:01,080
think that it's it's often going to be

613
00:28:59,040 --> 00:29:04,170
easier to<font color="#E5E5E5"> fix it in</font><font color="#CCCCCC"> the places where</font><font color="#E5E5E5"> we</font>

614
00:29:01,080 --> 00:29:05,669
had<font color="#CCCCCC"> the biggest problems faster I mean</font>

615
00:29:04,170 --> 00:29:09,780
you know upgrading a lot of this stuff

616
00:29:05,670 --> 00:29:12,060
in the fields really hard so um but

617
00:29:09,780 --> 00:29:14,940
fixing I mean it's not<font color="#E5E5E5"> that I just think</font>

618
00:29:12,060 --> 00:29:16,590
that<font color="#E5E5E5"> better tcp algorithms aren't a good</font>

619
00:29:14,940 --> 00:29:18,770
thing just that I'm pessimistic about

620
00:29:16,590 --> 00:29:21,030
actually getting him out<font color="#CCCCCC"> there I</font>

621
00:29:18,770 --> 00:29:23,330
appreciate<font color="#E5E5E5"> your pessimism but i will</font>

622
00:29:21,030 --> 00:29:26,520
remind<font color="#E5E5E5"> you that it wasn't that long ago</font>

623
00:29:23,330 --> 00:29:29,639
the windows did not do slow start and

624
00:29:26,520 --> 00:29:32,420
that<font color="#CCCCCC"> gave of a definite advantage</font>

625
00:29:29,640 --> 00:29:35,520
any respects and they do slow start now

626
00:29:32,420 --> 00:29:37,170
yeah not hopeless just it's not hopeless

627
00:29:35,520 --> 00:29:40,460
but it's hard<font color="#E5E5E5"> i mean i</font><font color="#CCCCCC"> think we have to</font>

628
00:29:37,170 --> 00:29:43,110
attack this in all directions we can oh

629
00:29:40,460 --> 00:29:44,390
just one of the<font color="#E5E5E5"> folks um</font><font color="#CCCCCC"> after these two</font>

630
00:29:43,110 --> 00:29:47,530
speakers<font color="#E5E5E5"> are going to close them</font>

631
00:29:44,390 --> 00:29:51,140
move on to<font color="#CCCCCC"> the next dogs Randy Bush I</font>

632
00:29:47,530 --> 00:29:54,530
j-jim as I said discussion with you a

633
00:29:51,140 --> 00:29:56,690
year<font color="#E5E5E5"> ago w most of us here transit</font>

634
00:29:54,530 --> 00:30:00,190
providers I've<font color="#CCCCCC"> having</font><font color="#E5E5E5"> trouble hearing</font>

635
00:29:56,690 --> 00:30:05,710
<font color="#E5E5E5">you Randy is that a bug or feature um</font>

636
00:30:00,190 --> 00:30:09,560
most of us here<font color="#E5E5E5"> are transit providers be</font>

637
00:30:05,710 --> 00:30:13,400
in the can available approach to all of

638
00:30:09,560 --> 00:30:20,120
us is w red and how many<font color="#E5E5E5"> people here</font>

639
00:30:13,400 --> 00:30:22,640
have w red turned on exactly<font color="#E5E5E5"> how</font><font color="#CCCCCC"> many</font>

640
00:30:20,120 --> 00:30:27,800
people do not have W red turned on

641
00:30:22,640 --> 00:30:32,050
because parameterization is very

642
00:30:27,800 --> 00:30:32,050
confusing and<font color="#E5E5E5"> you don't know what to do</font>

643
00:30:32,110 --> 00:30:38,120
that's a<font color="#CCCCCC"> shame because what I was going</font>

644
00:30:34,460 --> 00:30:42,200
<font color="#E5E5E5">to suggest is as I was just discussing</font>

645
00:30:38,120 --> 00:30:44,479
with<font color="#E5E5E5"> Sharon a tool to give you a good</font>

646
00:30:42,200 --> 00:30:48,230
guess at the w red parameters which are

647
00:30:44,480 --> 00:30:53,390
difficult it<font color="#CCCCCC"> is an undergraduate level</font>

648
00:30:48,230 --> 00:30:56,690
project so I think you know<font color="#E5E5E5"> you've been</font>

649
00:30:53,390 --> 00:30:59,240
sighs I think<font color="#E5E5E5"> that's great and are the</font>

650
00:30:56,690 --> 00:31:01,670
big challenge we have is not so<font color="#CCCCCC"> much in</font>

651
00:30:59,240 --> 00:31:04,580
the transit part of the network but in

652
00:31:01,670 --> 00:31:06,890
the edge in in Houston where the<font color="#CCCCCC"> edge</font>

653
00:31:04,580 --> 00:31:10,159
but we've got routers that are sitting

654
00:31:06,890 --> 00:31:12,920
between you know<font color="#CCCCCC"> Sacramento</font><font color="#E5E5E5"> in LA or San</font>

655
00:31:10,160 --> 00:31:16,730
<font color="#CCCCCC">Francisco</font><font color="#E5E5E5"> that have buffers sized for</font>

656
00:31:12,920 --> 00:31:23,270
<font color="#CCCCCC">transpac yeah and when they saturate</font>

657
00:31:16,730 --> 00:31:26,120
you'll have problems thanks Steve

658
00:31:23,270 --> 00:31:27,530
<font color="#E5E5E5">Feldman from nanog so thanks for telling</font>

659
00:31:26,120 --> 00:31:29,419
us that our network here is wonderful

660
00:31:27,530 --> 00:31:30,710
but<font color="#E5E5E5"> I'm kind of curious as to why it's</font>

661
00:31:29,420 --> 00:31:34,940
so wonderful compared to what you

662
00:31:30,710 --> 00:31:36,950
normally see well<font color="#E5E5E5"> I think I think</font>

663
00:31:34,940 --> 00:31:39,220
they're couple things going on<font color="#CCCCCC"> here one</font>

664
00:31:36,950 --> 00:31:42,890
<font color="#E5E5E5">of which is that the people to do</font>

665
00:31:39,220 --> 00:31:45,410
enterprise access points have a lot more

666
00:31:42,890 --> 00:31:48,790
<font color="#CCCCCC">of a clue than the people who build the</font>

667
00:31:45,410 --> 00:31:52,130
<font color="#E5E5E5">home router kit which are repackaging</font>

668
00:31:48,790 --> 00:31:54,470
<font color="#CCCCCC">general-purpose</font><font color="#E5E5E5"> operating systems so at</font>

669
00:31:52,130 --> 00:31:56,630
least you don't have the home router

670
00:31:54,470 --> 00:31:58,159
disaster here<font color="#CCCCCC"> i noticed i guess the</font><font color="#E5E5E5"> lou</font>

671
00:31:56,630 --> 00:32:02,059
cisco access points back here that

672
00:31:58,159 --> 00:32:03,200
<font color="#E5E5E5">looked to be the industrial versions the</font>

673
00:32:02,059 --> 00:32:04,789
rest of it is<font color="#E5E5E5"> i</font><font color="#CCCCCC"> think you're probably</font>

674
00:32:03,200 --> 00:32:08,030
<font color="#E5E5E5">running</font><font color="#CCCCCC"> red every place you should</font>

675
00:32:04,789 --> 00:32:10,129
locally at least and the<font color="#E5E5E5"> last reason i</font>

676
00:32:08,030 --> 00:32:12,110
saw a good behavior is that<font color="#E5E5E5"> i'm running</font>

677
00:32:10,130 --> 00:32:13,820
a modified linux kernel that's very

678
00:32:12,110 --> 00:32:15,408
carefully much more carefully

679
00:32:13,820 --> 00:32:18,260
controlling its buffers over that

680
00:32:15,409 --> 00:32:20,030
wireless link so my Layton sees don't go

681
00:32:18,260 --> 00:32:23,450
crazy even when<font color="#E5E5E5"> I copy a hundred</font>

682
00:32:20,030 --> 00:32:27,139
megabyte file because my laptop's yeah

683
00:32:23,450 --> 00:32:29,510
got a kernel that isn't as as insanely

684
00:32:27,140 --> 00:32:31,700
over buffered as most other kernels are

685
00:32:29,510 --> 00:32:33,559
that's the<font color="#CCCCCC"> last piece of</font><font color="#E5E5E5"> this equation</font>

686
00:32:31,700 --> 00:32:38,900
that isn't out there in the<font color="#E5E5E5"> operating</font>

687
00:32:33,559 --> 00:32:42,020
system area Tony capella 59 s data if I

688
00:32:38,900 --> 00:32:44,419
<font color="#E5E5E5">could add one comment to the Y or part</font>

689
00:32:42,020 --> 00:32:46,820
<font color="#E5E5E5">of the answer but may be so bold there's</font>

690
00:32:44,419 --> 00:32:50,179
a presentation from man<font color="#E5E5E5"> I'm 38 that we</font>

691
00:32:46,820 --> 00:32:52,100
did in st. Louis where we first tried<font color="#E5E5E5"> so</font>

692
00:32:50,179 --> 00:32:56,090
<font color="#E5E5E5">called qos or different scheduling</font>

693
00:32:52,100 --> 00:32:57,860
application based or rather a packet

694
00:32:56,090 --> 00:33:01,370
intent if you will scheduling on the

695
00:32:57,860 --> 00:33:03,770
Wi-Fi and it discusses what we did there

696
00:33:01,370 --> 00:33:05,539
and<font color="#CCCCCC"> have been doing since at now I'm the</font>

697
00:33:03,770 --> 00:33:07,490
wireless specifically and I<font color="#E5E5E5"> think that</font>

698
00:33:05,539 --> 00:33:11,299
that contributes at least a small bit to

699
00:33:07,490 --> 00:33:12,470
a reasonable experience yeah I'm part<font color="#E5E5E5"> of</font>

700
00:33:11,299 --> 00:33:15,139
the reason why<font color="#CCCCCC"> this is getting hurt</font>

701
00:33:12,470 --> 00:33:16,880
worse for most people is that<font color="#E5E5E5"> a lot</font><font color="#CCCCCC"> of</font>

702
00:33:15,140 --> 00:33:19,549
<font color="#E5E5E5">the chips that first got this is</font>

703
00:33:16,880 --> 00:33:21,500
designed<font color="#E5E5E5"> for data centers which have</font>

704
00:33:19,549 --> 00:33:24,799
these very huge ring buffers have

705
00:33:21,500 --> 00:33:26,570
migrated into our laptops and so our

706
00:33:24,799 --> 00:33:29,240
laptops five or six years<font color="#E5E5E5"> ago we're</font>

707
00:33:26,570 --> 00:33:31,610
often running<font color="#E5E5E5"> with much tinier buffers</font>

708
00:33:29,240 --> 00:33:33,799
than we have today on a modern laptop

709
00:33:31,610 --> 00:33:36,199
running effectively the same ship as you

710
00:33:33,799 --> 00:33:38,210
might find in a data center and so the

711
00:33:36,200 --> 00:33:40,130
buffering by default same device driver

712
00:33:38,210 --> 00:33:42,799
same default settings in the<font color="#E5E5E5"> operating</font>

713
00:33:40,130 --> 00:33:44,659
systems is typically at<font color="#CCCCCC"> least</font><font color="#E5E5E5"> when we</font>

714
00:33:42,799 --> 00:33:46,309
looked<font color="#E5E5E5"> at all the Linux drivers in</font>

715
00:33:44,659 --> 00:33:49,580
between two and<font color="#E5E5E5"> three hundred packets</font>

716
00:33:46,309 --> 00:33:51,168
sitting there may be a sorta okay<font color="#CCCCCC"> on</font>

717
00:33:49,580 --> 00:33:53,770
received but<font color="#E5E5E5"> for</font><font color="#CCCCCC"> transmitted</font><font color="#E5E5E5"> it's the</font>

718
00:33:51,169 --> 00:33:53,770
kiss of<font color="#CCCCCC"> death</font>

719
00:33:56,910 --> 00:34:01,860
thank you<font color="#E5E5E5"> thank</font><font color="#CCCCCC"> you very</font><font color="#E5E5E5"> much dimmer</font>

720
00:33:59,140 --> 00:34:01,860
appreciate that

