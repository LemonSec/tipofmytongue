1
00:00:00,380 --> 00:00:10,320
can you<font color="#E5E5E5"> guys hear me in back sort of is</font>

2
00:00:05,100 --> 00:00:13,259
this better<font color="#E5E5E5"> all right um so today I'm</font>

3
00:00:10,320 --> 00:00:15,690
here to talk<font color="#E5E5E5"> to you guys about the</font>

4
00:00:13,259 --> 00:00:18,570
possibility<font color="#CCCCCC"> for eliminating packet loss</font>

5
00:00:15,690 --> 00:00:21,630
during BGP convergence my name is Nate

6
00:00:18,570 --> 00:00:24,960
Cushman as Todd said and this is joint

7
00:00:21,630 --> 00:00:28,890
work with some colleagues of mine at MIT

8
00:00:24,960 --> 00:00:30,840
<font color="#CCCCCC">and CMU so the problem</font><font color="#E5E5E5"> that we're</font>

9
00:00:28,890 --> 00:00:34,020
looking<font color="#CCCCCC"> at is that BGP convergence</font>

10
00:00:30,840 --> 00:00:36,239
causes you guys packet loss you guys

11
00:00:34,020 --> 00:00:37,680
know this already<font color="#E5E5E5"> but let me let go over</font>

12
00:00:36,239 --> 00:00:40,169
<font color="#CCCCCC">a few</font><font color="#E5E5E5"> of the measurement studies that</font>

13
00:00:37,680 --> 00:00:42,180
have that have talked<font color="#CCCCCC"> about this a few</font>

14
00:00:40,170 --> 00:00:43,950
years<font color="#E5E5E5"> ago Craig labovitz came up here</font>

15
00:00:42,180 --> 00:00:45,570
and told you<font color="#E5E5E5"> that route changes can</font>

16
00:00:43,950 --> 00:00:48,600
cause up to thirty percent packet loss

17
00:00:45,570 --> 00:00:52,199
for more than two minutes a more<font color="#CCCCCC"> recent</font>

18
00:00:48,600 --> 00:00:54,000
study including Randy Bush has found

19
00:00:52,199 --> 00:00:56,849
<font color="#E5E5E5">that even for domains which are dual</font>

20
00:00:54,000 --> 00:00:59,309
home<font color="#CCCCCC"> to tier1 providers a failover event</font>

21
00:00:56,850 --> 00:01:00,750
can cause multiple lost bursts and one

22
00:00:59,309 --> 00:01:03,899
of these lost<font color="#CCCCCC"> birds can last for up</font><font color="#E5E5E5"> to</font>

23
00:01:00,750 --> 00:01:06,689
20 seconds in a related study they found

24
00:01:03,899 --> 00:01:09,000
that both popular and unpopular prefixes

25
00:01:06,689 --> 00:01:12,270
<font color="#CCCCCC">experience loss during BGP convergence</font>

26
00:01:09,000 --> 00:01:15,900
and finally we didn't study a study of

27
00:01:12,270 --> 00:01:18,600
our own looking at cross domain VoIP

28
00:01:15,900 --> 00:01:20,189
calls and what we found is that fifty

29
00:01:18,600 --> 00:01:23,339
percent<font color="#E5E5E5"> of the disruption seen in these</font>

30
00:01:20,189 --> 00:01:28,048
type of VoIP calls we're very highly

31
00:01:23,340 --> 00:01:29,100
correlated with BGP updates but today

32
00:01:28,049 --> 00:01:33,060
<font color="#E5E5E5">I'm here to</font><font color="#CCCCCC"> talk to you about the</font>

33
00:01:29,100 --> 00:01:34,979
solution<font color="#CCCCCC"> to this problem so what kind of</font>

34
00:01:33,060 --> 00:01:37,590
solution do we really want we would

35
00:01:34,979 --> 00:01:40,679
<font color="#E5E5E5">really</font><font color="#CCCCCC"> like a</font><font color="#E5E5E5"> solution which eliminates</font>

36
00:01:37,590 --> 00:01:42,720
packet loss during BGP convergence but

37
00:01:40,680 --> 00:01:45,060
<font color="#E5E5E5">even more than that proposals which is</font>

38
00:01:42,720 --> 00:01:47,460
looked at BGP have generally run into

39
00:01:45,060 --> 00:01:49,860
the problem net until<font color="#CCCCCC"> a majority of a</font>

40
00:01:47,460 --> 00:01:53,789
esas deploy them<font color="#CCCCCC"> know is an individual</font>

41
00:01:49,860 --> 00:01:55,890
<font color="#E5E5E5">ase significant benefit so instead we</font>

42
00:01:53,790 --> 00:01:58,020
like a solution<font color="#CCCCCC"> when adopting ISP can</font>

43
00:01:55,890 --> 00:02:02,790
protect itself and its customers from

44
00:01:58,020 --> 00:02:04,350
Los even if no other isp cooperates so

45
00:02:02,790 --> 00:02:06,689
let's<font color="#E5E5E5"> look at a little more detail about</font>

46
00:02:04,350 --> 00:02:09,929
<font color="#CCCCCC">what causes packet loss during BGP</font>

47
00:02:06,689 --> 00:02:13,170
convergence to do this let's imagine a

48
00:02:09,929 --> 00:02:13,800
hypothetical example where<font color="#CCCCCC"> arbys decided</font>

49
00:02:13,170 --> 00:02:17,700
to start his own

50
00:02:13,800 --> 00:02:19,350
I SP again and being<font color="#E5E5E5"> the internet</font>

51
00:02:17,700 --> 00:02:22,109
superpower<font color="#E5E5E5"> that he is he was</font><font color="#CCCCCC"> able</font><font color="#E5E5E5"> to</font>

52
00:02:19,350 --> 00:02:25,019
negotiate peering relationships with

53
00:02:22,110 --> 00:02:27,120
some of the tier ones patrick also

54
00:02:25,020 --> 00:02:29,130
decided to start an<font color="#CCCCCC"> ISP but he didn't</font>

55
00:02:27,120 --> 00:02:34,160
fare as well and he was forced<font color="#E5E5E5"> to</font><font color="#CCCCCC"> bry's</font>

56
00:02:29,130 --> 00:02:36,570
service from avi and AT&T now initially

57
00:02:34,160 --> 00:02:40,950
<font color="#E5E5E5">avi and AT&T are both</font><font color="#CCCCCC"> running through</font>

58
00:02:36,570 --> 00:02:42,780
<font color="#E5E5E5">Patrick to get to MIT and</font><font color="#CCCCCC"> since all</font>

59
00:02:40,950 --> 00:02:45,329
<font color="#CCCCCC">Patrick's providers are using him to get</font>

60
00:02:42,780 --> 00:02:50,400
to MIT he has no alternative path to the

61
00:02:45,330 --> 00:02:53,970
destination that's when the<font color="#E5E5E5"> link goes</font>

62
00:02:50,400 --> 00:02:56,070
down Patrick knows no alternative path

63
00:02:53,970 --> 00:02:59,070
to the destination and is forced to

64
00:02:56,070 --> 00:03:03,810
immediately start dropping packets this

65
00:02:59,070 --> 00:03:06,150
makes Patrick very sad even worse than

66
00:03:03,810 --> 00:03:08,160
this however Patrick's not<font color="#E5E5E5"> just dropping</font>

67
00:03:06,150 --> 00:03:12,000
his own packets he's dropping packets

68
00:03:08,160 --> 00:03:17,310
from both AT&T and avi as well and that

69
00:03:12,000 --> 00:03:19,200
makes<font color="#E5E5E5"> it I'll be very angry eventually</font>

70
00:03:17,310 --> 00:03:22,350
of course Patrick's going to send out a

71
00:03:19,200 --> 00:03:24,690
withdrawal AT&T and avi are going to

72
00:03:22,350 --> 00:03:26,340
stop routing through him AT&T will

73
00:03:24,690 --> 00:03:29,120
advertise the path through sprint and

74
00:03:26,340 --> 00:03:32,550
rallying will happen normally again in

75
00:03:29,120 --> 00:03:34,830
the meantime however avi AT&T and

76
00:03:32,550 --> 00:03:37,100
patrick also significant packet loss and

77
00:03:34,830 --> 00:03:39,270
this isn't<font color="#CCCCCC"> just</font><font color="#E5E5E5"> an isolated incident</font>

78
00:03:37,100 --> 00:03:41,250
remember the measurement studies show us

79
00:03:39,270 --> 00:03:43,709
that significant loss happens in today's

80
00:03:41,250 --> 00:03:47,160
<font color="#E5E5E5">internet even when ISPs are connected to</font>

81
00:03:43,709 --> 00:03:54,900
tier ones so how do<font color="#E5E5E5"> we solve Patrick's</font>

82
00:03:47,160 --> 00:03:57,109
problem we want<font color="#CCCCCC"> to tell Patrick a</font>

83
00:03:54,900 --> 00:03:59,850
failover path before the<font color="#E5E5E5"> link fails</font>

84
00:03:57,110 --> 00:04:03,780
rather than afterwards as is often the

85
00:03:59,850 --> 00:04:07,170
case in current<font color="#E5E5E5"> BGP so let's see how</font>

86
00:04:03,780 --> 00:04:09,209
<font color="#CCCCCC">this would work in our example AT&T</font>

87
00:04:07,170 --> 00:04:12,299
might advertise as a failover path to

88
00:04:09,209 --> 00:04:14,610
<font color="#CCCCCC">patrick the AT&T Sprint MIT path and</font>

89
00:04:12,300 --> 00:04:17,269
this advertisement is done before<font color="#CCCCCC"> the</font>

90
00:04:14,610 --> 00:04:19,650
link fails thus when the link fails

91
00:04:17,269 --> 00:04:23,100
<font color="#E5E5E5">Patrick can immediately start routing</font>

92
00:04:19,649 --> 00:04:26,039
the longest failover path thus

93
00:04:23,100 --> 00:04:27,790
completely avoiding packet loss now note

94
00:04:26,039 --> 00:04:30,370
<font color="#CCCCCC">that the rest of</font><font color="#E5E5E5"> BGP converging</font>

95
00:04:27,790 --> 00:04:32,350
happens just as it did before the only

96
00:04:30,370 --> 00:04:33,880
difference<font color="#CCCCCC"> is that</font><font color="#E5E5E5"> Patrick is able</font>

97
00:04:32,350 --> 00:04:38,080
around along this failover path in the

98
00:04:33,880 --> 00:04:39,930
meantime so how does<font color="#E5E5E5"> this actually work</font>

99
00:04:38,080 --> 00:04:42,849
in practice how do we make this<font color="#E5E5E5"> work</font>

100
00:04:39,930 --> 00:04:45,310
really we<font color="#E5E5E5"> need only two simple rules in</font>

101
00:04:42,850 --> 00:04:47,520
order to make this<font color="#E5E5E5"> work the first is</font>

102
00:04:45,310 --> 00:04:50,560
when do we advertise these<font color="#CCCCCC"> fail overpass</font>

103
00:04:47,520 --> 00:04:52,770
and all we need is for each router to

104
00:04:50,560 --> 00:04:55,030
advertise only one failover path and

105
00:04:52,770 --> 00:04:57,789
only to the next top router on his

106
00:04:55,030 --> 00:04:59,979
primary path now note<font color="#CCCCCC"> that normally</font>

107
00:04:57,790 --> 00:05:02,650
routers ever to router advertise no path

108
00:04:59,980 --> 00:05:03,670
<font color="#CCCCCC">to the next top the reason for this is</font>

109
00:05:02,650 --> 00:05:05,429
because if you're routing through

110
00:05:03,670 --> 00:05:09,790
someone you don't advertise him a path

111
00:05:05,430 --> 00:05:12,490
and in order<font color="#CCCCCC"> for the forwarding on the</font>

112
00:05:09,790 --> 00:05:14,050
failover pass to work some router

113
00:05:12,490 --> 00:05:16,000
immediately above the downlink is going

114
00:05:14,050 --> 00:05:18,280
to start traffic on the failover path in

115
00:05:16,000 --> 00:05:20,290
<font color="#E5E5E5">order to ensure that it continues along</font>

116
00:05:18,280 --> 00:05:22,119
the failover path when a router receives

117
00:05:20,290 --> 00:05:24,910
a packet from the next type<font color="#E5E5E5"> interface</font>

118
00:05:22,120 --> 00:05:29,080
for their primary path they forward the

119
00:05:24,910 --> 00:05:31,810
packet along the failover path and with

120
00:05:29,080 --> 00:05:34,210
<font color="#E5E5E5">these two simple rules we can</font><font color="#CCCCCC"> guarantee</font>

121
00:05:31,810 --> 00:05:37,060
that<font color="#CCCCCC"> a router will see no BGP cause</font>

122
00:05:34,210 --> 00:05:38,590
packet loss during convergence as long

123
00:05:37,060 --> 00:05:40,300
as<font color="#CCCCCC"> it will have what we call a valley</font>

124
00:05:38,590 --> 00:05:42,729
free path to<font color="#CCCCCC"> the destination at</font>

125
00:05:40,300 --> 00:05:44,920
convergence and a valley free path is

126
00:05:42,730 --> 00:05:47,800
purely a path where no ASO long the path

127
00:05:44,920 --> 00:05:49,360
is doing transit for a non customer no

128
00:05:47,800 --> 00:05:54,280
one's running from<font color="#E5E5E5"> appear to appear or</font>

129
00:05:49,360 --> 00:05:56,980
from a provider to another provider so

130
00:05:54,280 --> 00:05:58,719
surprisingly this helps us not just an

131
00:05:56,980 --> 00:06:00,970
<font color="#CCCCCC">inner</font><font color="#E5E5E5"> domain scenario though it actually</font>

132
00:05:58,720 --> 00:06:03,490
helps us even when deployed just in a

133
00:06:00,970 --> 00:06:06,880
single is to understand<font color="#E5E5E5"> how that's</font>

134
00:06:03,490 --> 00:06:08,290
<font color="#CCCCCC">possible let's take</font><font color="#E5E5E5"> another example so</font>

135
00:06:06,880 --> 00:06:09,990
let's<font color="#CCCCCC"> imagine that Patrick's actually</font>

136
00:06:08,290 --> 00:06:12,700
able to negotiate a period relationship

137
00:06:09,990 --> 00:06:14,980
and let's imagine<font color="#E5E5E5"> that he negotiates</font>

138
00:06:12,700 --> 00:06:17,860
that with with an AS named<font color="#CCCCCC"> Joe who has a</font>

139
00:06:14,980 --> 00:06:19,600
<font color="#E5E5E5">direct path to MIT now you might</font><font color="#CCCCCC"> think</font>

140
00:06:17,860 --> 00:06:20,920
<font color="#CCCCCC">okay</font><font color="#E5E5E5"> well if that's the case</font><font color="#CCCCCC"> then</font>

141
00:06:19,600 --> 00:06:22,270
<font color="#CCCCCC">Patrick's going to already know an</font>

142
00:06:20,920 --> 00:06:24,910
alternate path and we don't need<font color="#E5E5E5"> any of</font>

143
00:06:22,270 --> 00:06:27,280
this failover path business but<font color="#E5E5E5"> actually</font>

144
00:06:24,910 --> 00:06:30,220
<font color="#E5E5E5">that's not correct and the reason for</font>

145
00:06:27,280 --> 00:06:32,739
<font color="#CCCCCC">that</font><font color="#E5E5E5"> is well yes router one will know an</font>

146
00:06:30,220 --> 00:06:34,510
alternate path when the link fails he's

147
00:06:32,740 --> 00:06:37,060
not going<font color="#CCCCCC"> to advertise that path</font><font color="#E5E5E5"> to</font>

148
00:06:34,510 --> 00:06:39,099
router to because router one is routing

149
00:06:37,060 --> 00:06:41,169
through router<font color="#CCCCCC"> too and as a result when</font>

150
00:06:39,100 --> 00:06:41,500
the link goes down rod or two will still

151
00:06:41,169 --> 00:06:43,450
be

152
00:06:41,500 --> 00:06:45,840
left without a path causing him to

153
00:06:43,450 --> 00:06:48,750
immediately start dropping packets

154
00:06:45,840 --> 00:06:51,820
instead with failover paths sorry

155
00:06:48,750 --> 00:06:54,220
instead with failover paths<font color="#E5E5E5"> router one</font>

156
00:06:51,820 --> 00:06:56,760
will offer a failover path through Joe

157
00:06:54,220 --> 00:06:59,920
to router<font color="#E5E5E5"> two before the link goes down</font>

158
00:06:56,760 --> 00:07:01,960
thus when the link goes down<font color="#CCCCCC"> Rutter to</font>

159
00:06:59,920 --> 00:07:04,510
you turns back its back to router one

160
00:07:01,960 --> 00:07:07,840
router one recognizes that these packets

161
00:07:04,510 --> 00:07:10,030
are coming on the interface on its on

162
00:07:07,840 --> 00:07:11,349
its primary path interface and as a

163
00:07:10,030 --> 00:07:16,030
result forwards them on the failover

164
00:07:11,350 --> 00:07:19,990
path back towards<font color="#E5E5E5"> Joe thus completely</font>

165
00:07:16,030 --> 00:07:23,080
avoiding loss so let's see how<font color="#E5E5E5"> this</font>

166
00:07:19,990 --> 00:07:25,450
<font color="#CCCCCC">works in</font><font color="#E5E5E5"> practice because we want to see</font>

167
00:07:23,080 --> 00:07:27,849
how this works at the<font color="#CCCCCC"> internet scale we</font>

168
00:07:25,450 --> 00:07:29,289
need to do this in simulation so what

169
00:07:27,850 --> 00:07:31,870
we've done<font color="#E5E5E5"> is we've run a router level</font>

170
00:07:29,290 --> 00:07:33,820
stimulation across the full internet to

171
00:07:31,870 --> 00:07:36,669
do<font color="#E5E5E5"> that we build a s graphs based on</font>

172
00:07:33,820 --> 00:07:38,650
both route views and<font color="#E5E5E5"> right bgp data then</font>

173
00:07:36,669 --> 00:07:40,150
we use inference algorithms similar to

174
00:07:38,650 --> 00:07:43,270
the ones that r aneesa's uses for their

175
00:07:40,150 --> 00:07:44,919
tools to put to annotate links with

176
00:07:43,270 --> 00:07:47,320
customer provider and peering

177
00:07:44,919 --> 00:07:50,469
relationships and then we add border

178
00:07:47,320 --> 00:07:52,419
routers on these connections<font color="#E5E5E5"> to sorry we</font>

179
00:07:50,470 --> 00:07:54,460
<font color="#E5E5E5">add border routers in each of the a esas</font>

180
00:07:52,419 --> 00:07:58,479
based on the connections to other a<font color="#CCCCCC"> SS</font>

181
00:07:54,460 --> 00:08:01,419
and for us for<font color="#E5E5E5"> our simulation we use the</font>

182
00:07:58,479 --> 00:08:05,020
RFC based internal am ra of five seconds

183
00:08:01,419 --> 00:08:06,159
<font color="#E5E5E5">and the external MRI of 30 seconds for</font>

184
00:08:05,020 --> 00:08:08,950
each experiment we pick a random

185
00:08:06,160 --> 00:08:11,410
destination we take down a random link

186
00:08:08,950 --> 00:08:13,270
on the network and we find the duration

187
00:08:11,410 --> 00:08:16,150
of packet loss for routers which were

188
00:08:13,270 --> 00:08:17,859
using that link before<font color="#CCCCCC"> the link went</font>

189
00:08:16,150 --> 00:08:21,219
down but still had a path to the

190
00:08:17,860 --> 00:08:22,720
destination after the link went down and

191
00:08:21,220 --> 00:08:24,220
we run this for a thousand randomly

192
00:08:22,720 --> 00:08:28,570
chosen links and destinations for each

193
00:08:24,220 --> 00:08:30,010
experiment so first we said that one<font color="#CCCCCC"> of</font>

194
00:08:28,570 --> 00:08:32,890
<font color="#E5E5E5">our goals is to ensure that just</font>

195
00:08:30,010 --> 00:08:35,559
deploying this in a single<font color="#CCCCCC"> a s allow</font>

196
00:08:32,890 --> 00:08:39,429
<font color="#E5E5E5">provides significant benefit so let's</font>

197
00:08:35,559 --> 00:08:42,400
focus<font color="#E5E5E5"> on AT&T looking just at packet</font>

198
00:08:39,429 --> 00:08:46,000
loss when running<font color="#E5E5E5"> BGP this graph shows</font>

199
00:08:42,400 --> 00:08:48,670
us on the left side here on the left

200
00:08:46,000 --> 00:08:50,500
side here we see<font color="#CCCCCC"> the fraction of routers</font>

201
00:08:48,670 --> 00:08:54,520
which were using the<font color="#CCCCCC"> download</font><font color="#E5E5E5"> the link</font>

202
00:08:50,500 --> 00:08:55,420
<font color="#E5E5E5">before it went down and on the x-axis</font>

203
00:08:54,520 --> 00:08:57,699
here

204
00:08:55,420 --> 00:09:00,160
we see the duration of packet loss seen

205
00:08:57,700 --> 00:09:01,750
by these routers and I want you to focus

206
00:09:00,160 --> 00:09:04,260
on one point here at this<font color="#E5E5E5"> point here</font>

207
00:09:01,750 --> 00:09:06,850
what this point shows is that

208
00:09:04,260 --> 00:09:11,220
approximately<font color="#E5E5E5"> twenty percent of routers</font>

209
00:09:06,850 --> 00:09:11,220
see more than 30 seconds<font color="#E5E5E5"> of packet loss</font>

210
00:09:11,760 --> 00:09:17,410
now you might be thinking okay well if

211
00:09:14,800 --> 00:09:19,029
if I'm AT&T and I<font color="#E5E5E5"> always want to make a</font>

212
00:09:17,410 --> 00:09:21,339
change<font color="#E5E5E5"> within my own is</font><font color="#CCCCCC"> in order to</font>

213
00:09:19,029 --> 00:09:26,199
improve<font color="#E5E5E5"> BGP why don't I</font><font color="#CCCCCC"> just reduce the</font>

214
00:09:21,339 --> 00:09:27,850
MRA I well what if<font color="#CCCCCC"> we and so what we did</font>

215
00:09:26,199 --> 00:09:30,279
is we looked at reducing both the

216
00:09:27,850 --> 00:09:32,110
internal and the external MRI all the

217
00:09:30,279 --> 00:09:33,760
way down to<font color="#E5E5E5"> zero which would think would</font>

218
00:09:32,110 --> 00:09:37,180
be the best<font color="#CCCCCC"> possible scenario from that</font>

219
00:09:33,760 --> 00:09:41,199
perspective and we find is in fact that

220
00:09:37,180 --> 00:09:43,290
helps us relatively little we still see

221
00:09:41,199 --> 00:09:46,359
significant packet loss in this case and

222
00:09:43,290 --> 00:09:48,519
even worse what<font color="#E5E5E5"> this does is it doubles</font>

223
00:09:46,360 --> 00:09:50,470
the number of updates not just for AT&T

224
00:09:48,519 --> 00:09:52,480
but for all of its customers as well

225
00:09:50,470 --> 00:09:56,829
providing a significant burden to all of

226
00:09:52,480 --> 00:10:00,040
its<font color="#CCCCCC"> customers now let's look at</font><font color="#E5E5E5"> what</font>

227
00:09:56,829 --> 00:10:05,019
happens<font color="#CCCCCC"> if we deploy just our failover</font>

228
00:10:00,040 --> 00:10:07,300
<font color="#CCCCCC">path based mechanism just inside AT&T we</font>

229
00:10:05,019 --> 00:10:10,540
see significant reduction<font color="#E5E5E5"> in the packet</font>

230
00:10:07,300 --> 00:10:13,390
<font color="#CCCCCC">loss in fact we see less than</font><font color="#E5E5E5"> three</font>

231
00:10:10,540 --> 00:10:16,750
percent of routers see more than 30

232
00:10:13,390 --> 00:10:20,019
seconds of packet loss when just AT&T

233
00:10:16,750 --> 00:10:21,880
deploys the failover based mechanism now

234
00:10:20,019 --> 00:10:24,279
how is it possible that a point is<font color="#E5E5E5"> just</font>

235
00:10:21,880 --> 00:10:26,589
inside AT&T had such a significant

236
00:10:24,279 --> 00:10:29,199
effect on the packet<font color="#CCCCCC"> loss and the reason</font>

237
00:10:26,589 --> 00:10:32,470
<font color="#CCCCCC">for that comes back to the simple fact</font>

238
00:10:29,199 --> 00:10:35,500
about BGP which is<font color="#E5E5E5"> that the bad news the</font>

239
00:10:32,470 --> 00:10:37,690
withdrawals travel very quickly where's

240
00:10:35,500 --> 00:10:40,540
the good news<font color="#CCCCCC"> the advertisements follow</font>

241
00:10:37,690 --> 00:10:42,819
only<font color="#E5E5E5"> on very slowly and that's what</font>

242
00:10:40,540 --> 00:10:44,829
happens is even a single border router

243
00:10:42,819 --> 00:10:46,990
an AT&T loses connectivity for a moment

244
00:10:44,829 --> 00:10:50,260
it sends out<font color="#E5E5E5"> a withdrawal which quickly</font>

245
00:10:46,990 --> 00:10:52,060
travels out to all of its<font color="#CCCCCC"> customers but</font>

246
00:10:50,260 --> 00:10:53,740
the advertisement which may follow is

247
00:10:52,060 --> 00:10:57,010
going to get too often<font color="#CCCCCC"> get stuck behind</font>

248
00:10:53,740 --> 00:10:58,810
an MRI and as a result of that those

249
00:10:57,010 --> 00:11:01,329
customers in the<font color="#E5E5E5"> meantime are left</font>

250
00:10:58,810 --> 00:11:03,399
without any path to the destination thus

251
00:11:01,329 --> 00:11:06,099
by providing failover paths even just

252
00:11:03,399 --> 00:11:07,720
internal to a single<font color="#CCCCCC"> a s we're able to</font>

253
00:11:06,100 --> 00:11:09,370
almost completely avoid those type of

254
00:11:07,720 --> 00:11:11,020
spurious withdrawals

255
00:11:09,370 --> 00:11:15,460
and the ensuing packet loss that they

256
00:11:11,020 --> 00:11:17,050
<font color="#E5E5E5">caused so we also said that we want to</font>

257
00:11:15,460 --> 00:11:19,630
ensure<font color="#E5E5E5"> that it's completely eliminates</font>

258
00:11:17,050 --> 00:11:21,790
packet loss network-wide if we deployed

259
00:11:19,630 --> 00:11:23,529
in all a<font color="#E5E5E5"> SS so we read another</font>

260
00:11:21,790 --> 00:11:25,990
experiment<font color="#CCCCCC"> we</font><font color="#E5E5E5"> look not</font><font color="#CCCCCC"> just at loss for</font>

261
00:11:23,529 --> 00:11:29,500
AT&T and its customers but for the

262
00:11:25,990 --> 00:11:31,690
entire but for the entire network and we

263
00:11:29,500 --> 00:11:34,120
see two things from<font color="#E5E5E5"> this graph the first</font>

264
00:11:31,690 --> 00:11:37,450
as we<font color="#E5E5E5"> see that the lost for bgp is very</font>

265
00:11:34,120 --> 00:11:39,880
similar to that with with running just

266
00:11:37,450 --> 00:11:41,350
an AT&T and that's because<font color="#CCCCCC"> ATT's</font>

267
00:11:39,880 --> 00:11:43,089
customers don't actually look all that

268
00:11:41,350 --> 00:11:45,640
different<font color="#CCCCCC"> from the average router on the</font>

269
00:11:43,089 --> 00:11:47,500
internet and as a result most of the

270
00:11:45,640 --> 00:11:50,470
internet see the law similar to that of

271
00:11:47,500 --> 00:11:52,270
18 to customers the second thing<font color="#E5E5E5"> we see</font>

272
00:11:50,470 --> 00:11:55,839
and more importantly though is that

273
00:11:52,270 --> 00:11:57,189
deploying this everywhere gives us

274
00:11:55,839 --> 00:12:02,980
completely connected all the time

275
00:11:57,190 --> 00:12:04,420
completely eliminates packet loss so you

276
00:12:02,980 --> 00:12:06,690
might be<font color="#CCCCCC"> thinking okay fine so we've</font>

277
00:12:04,420 --> 00:12:08,800
eliminated packet loss but at what cost

278
00:12:06,690 --> 00:12:10,420
maintaining these failover<font color="#E5E5E5"> PA's must</font>

279
00:12:08,800 --> 00:12:13,990
must be increasing the number of updates

280
00:12:10,420 --> 00:12:15,610
and in fact<font color="#E5E5E5"> we find a relatively small</font>

281
00:12:13,990 --> 00:12:18,310
increase in the number of updates is

282
00:12:15,610 --> 00:12:22,630
necessary and the<font color="#E5E5E5"> reason</font><font color="#CCCCCC"> for this is</font>

283
00:12:18,310 --> 00:12:24,069
that all we're doing in the most part is

284
00:12:22,630 --> 00:12:25,750
replacing what would have been a

285
00:12:24,070 --> 00:12:27,339
withdrawal message with the

286
00:12:25,750 --> 00:12:29,830
advertisement<font color="#CCCCCC"> of a fail of our path</font>

287
00:12:27,339 --> 00:12:32,470
instead and so in fact we see less than

288
00:12:29,830 --> 00:12:37,120
<font color="#E5E5E5">five percent increase in the number of</font>

289
00:12:32,470 --> 00:12:39,430
updates necessary so to conclude I'd

290
00:12:37,120 --> 00:12:42,190
like to summarize what like to summarize

291
00:12:39,430 --> 00:12:44,109
what I've told you<font color="#E5E5E5"> today I've told you</font>

292
00:12:42,190 --> 00:12:46,360
about a simple mechanism which is to

293
00:12:44,110 --> 00:12:50,500
offer a failover path<font color="#CCCCCC"> only to my next</font>

294
00:12:46,360 --> 00:12:53,230
top neighbor this mechanism<font color="#E5E5E5"> solves the</font>

295
00:12:50,500 --> 00:12:55,360
problem that we initially posed which is

296
00:12:53,230 --> 00:12:59,320
<font color="#E5E5E5">that we live</font><font color="#CCCCCC"> in a packet loss resulting</font>

297
00:12:55,360 --> 00:13:01,510
from<font color="#E5E5E5"> BGP convergence and this solution</font>

298
00:12:59,320 --> 00:13:03,670
is relatively deployable and by

299
00:13:01,510 --> 00:13:06,640
deployable I mean that<font color="#CCCCCC"> an adopting</font><font color="#E5E5E5"> ISP</font>

300
00:13:03,670 --> 00:13:11,079
can reduce loss even<font color="#CCCCCC"> if no other isp</font>

301
00:13:06,640 --> 00:13:12,670
cooperates and for those of<font color="#CCCCCC"> you that are</font>

302
00:13:11,080 --> 00:13:14,830
interested in this topic<font color="#E5E5E5"> I encourage you</font>

303
00:13:12,670 --> 00:13:17,290
to<font color="#E5E5E5"> come talk to me afterwards or send me</font>

304
00:13:14,830 --> 00:13:19,030
<font color="#CCCCCC">email I don't have any detailed</font>

305
00:13:17,290 --> 00:13:21,010
documents online yet but I'm<font color="#CCCCCC"> in the</font>

306
00:13:19,030 --> 00:13:23,399
<font color="#E5E5E5">process of writing a couple of papers on</font>

307
00:13:21,010 --> 00:13:25,779
<font color="#E5E5E5">this both of which will come up shortly</font>

308
00:13:23,399 --> 00:13:28,180
and and now I'll take<font color="#E5E5E5"> questions</font><font color="#CCCCCC"> thanks</font>

309
00:13:25,779 --> 00:13:34,660
up excellent thank you are there any

310
00:13:28,180 --> 00:13:36,099
questions questions yeah you can't just

311
00:13:34,660 --> 00:13:39,459
raise your hand you have to go to the

312
00:13:36,100 --> 00:13:41,320
mic it's not third grade and can I<font color="#CCCCCC"> get</font>

313
00:13:39,459 --> 00:13:43,180
the first kind<font color="#E5E5E5"> of get the first</font>

314
00:13:41,320 --> 00:13:46,329
lightning talk speaker Chris Street up

315
00:13:43,180 --> 00:13:50,260
here as well please Dana Blair with

316
00:13:46,329 --> 00:13:53,819
<font color="#E5E5E5">Cisco does the backup path or whatever</font>

317
00:13:50,260 --> 00:13:55,750
you call it assume a separate circuit

318
00:13:53,820 --> 00:14:00,339
separate you mean a separate link

319
00:13:55,750 --> 00:14:02,560
physical circuit no the fail the the

320
00:14:00,339 --> 00:14:04,630
failover path is a virtual path

321
00:14:02,560 --> 00:14:06,609
essentially that's uses exactly the same

322
00:14:04,630 --> 00:14:08,380
links as the normal so if it used the

323
00:14:06,610 --> 00:14:10,720
same circuit you rear out the packets

324
00:14:08,380 --> 00:14:12,610
turn<font color="#E5E5E5"> them around how does the upstream</font>

325
00:14:10,720 --> 00:14:14,260
router node around them back so the

326
00:14:12,610 --> 00:14:15,910
upstream router knows to not route them

327
00:14:14,260 --> 00:14:17,410
bat based on that the forwarding rule

328
00:14:15,910 --> 00:14:19,120
that I told you which is<font color="#E5E5E5"> that if the</font>

329
00:14:17,410 --> 00:14:21,189
<font color="#E5E5E5">primary path that I would send this</font>

330
00:14:19,120 --> 00:14:23,560
router along is<font color="#E5E5E5"> the interface that I</font>

331
00:14:21,190 --> 00:14:24,910
just received this packet from then I

332
00:14:23,560 --> 00:14:27,130
know that it's justin for the failover

333
00:14:24,910 --> 00:14:29,170
path and as a result i<font color="#CCCCCC"> forward it on</font><font color="#E5E5E5"> the</font>

334
00:14:27,130 --> 00:14:30,490
pale of our path instead<font color="#CCCCCC"> okay so as long</font>

335
00:14:29,170 --> 00:14:32,199
<font color="#CCCCCC">as I have the information of what</font>

336
00:14:30,490 --> 00:14:35,410
interfaces packet came with when I do

337
00:14:32,200 --> 00:14:37,089
the lookup I can tell good we're<font color="#E5E5E5"> doing</font>

338
00:14:35,410 --> 00:14:39,069
these three people lined up fast and

339
00:14:37,089 --> 00:14:40,450
<font color="#E5E5E5">then we're done yes sir I just had a</font>

340
00:14:39,070 --> 00:14:42,040
question Marshall you like yeah I<font color="#E5E5E5"> just</font>

341
00:14:40,450 --> 00:14:44,200
had a question about loop detection I

342
00:14:42,040 --> 00:14:46,569
mean if you is this guaranteed to be

343
00:14:44,200 --> 00:14:48,220
loop detect loop free yeah so that

344
00:14:46,570 --> 00:14:49,930
that's<font color="#E5E5E5"> a very good point actually I only</font>

345
00:14:48,220 --> 00:14:52,149
had 15 minutes<font color="#CCCCCC"> so I didn't talk about</font>

346
00:14:49,930 --> 00:14:54,250
the loop avoidance mechanism but we have

347
00:14:52,149 --> 00:14:55,839
an additional mechanism where we

348
00:14:54,250 --> 00:14:58,630
annotate a little bit of information in

349
00:14:55,839 --> 00:15:00,279
the<font color="#E5E5E5"> BGP update itself in order to ensure</font>

350
00:14:58,630 --> 00:15:04,300
<font color="#CCCCCC">that we can avoid loops as well during</font>

351
00:15:00,279 --> 00:15:05,770
convergence yes sir yeah Sarah Carol I'd

352
00:15:04,300 --> 00:15:08,170
like<font color="#E5E5E5"> to understand how you see the</font>

353
00:15:05,770 --> 00:15:11,260
difference between your solution versus

354
00:15:08,170 --> 00:15:13,660
a<font color="#E5E5E5"> link-state routing algorithm where the</font>

355
00:15:11,260 --> 00:15:15,040
node is at the<font color="#CCCCCC"> AAS level have you</font>

356
00:15:13,660 --> 00:15:17,890
thought about the differences between

357
00:15:15,040 --> 00:15:19,029
that so I mean<font color="#CCCCCC"> that's a very good</font>

358
00:15:17,890 --> 00:15:21,089
question and there's a there's a couple

359
00:15:19,029 --> 00:15:23,470
of answers to that the first is that the

360
00:15:21,089 --> 00:15:26,170
<font color="#CCCCCC">problem</font><font color="#E5E5E5"> with link stayed at the</font><font color="#CCCCCC"> AAS</font>

361
00:15:23,470 --> 00:15:28,660
level is that you end up getting a lot

362
00:15:26,170 --> 00:15:30,250
of updates for information<font color="#CCCCCC"> that you</font>

363
00:15:28,660 --> 00:15:31,569
don't care<font color="#E5E5E5"> about it all four pads that</font>

364
00:15:30,250 --> 00:15:34,709
you aren't for links that you aren't

365
00:15:31,570 --> 00:15:36,880
using for any of your routing and and

366
00:15:34,709 --> 00:15:41,859
the other part

367
00:15:36,880 --> 00:15:43,600
<font color="#E5E5E5">okay and and in fact even</font><font color="#CCCCCC"> with</font>

368
00:15:41,860 --> 00:15:44,800
<font color="#E5E5E5">link-state running network-wide that</font>

369
00:15:43,600 --> 00:15:46,990
doesn't guarantee that you're<font color="#E5E5E5"> not going</font>

370
00:15:44,800 --> 00:15:48,490
to see packet loss because the the link

371
00:15:46,990 --> 00:15:50,440
state still needs to the link state

372
00:15:48,490 --> 00:15:52,420
information still needs to<font color="#E5E5E5"> reach all the</font>

373
00:15:50,440 --> 00:15:53,680
way across the<font color="#E5E5E5"> network which you know as</font>

374
00:15:52,420 --> 00:15:55,089
the internet grows it's going to take

375
00:15:53,680 --> 00:15:56,709
longer and longer for that<font color="#CCCCCC"> information</font>

376
00:15:55,090 --> 00:15:58,000
to propagate and especially if we're

377
00:15:56,710 --> 00:15:59,350
sending a<font color="#E5E5E5"> lot</font><font color="#CCCCCC"> of updates which means</font>

378
00:15:58,000 --> 00:16:01,600
that routers need to spend a lot<font color="#E5E5E5"> of time</font>

379
00:15:59,350 --> 00:16:03,880
processing this information which even

380
00:16:01,600 --> 00:16:06,460
slows it down further the<font color="#CCCCCC"> idea here is</font>

381
00:16:03,880 --> 00:16:08,410
that we the<font color="#E5E5E5"> router immediately above the</font>

382
00:16:06,460 --> 00:16:10,090
downlink it already knows a failover

383
00:16:08,410 --> 00:16:11,890
path which you can immediately use and

384
00:16:10,090 --> 00:16:13,780
then we allow convergence to happen

385
00:16:11,890 --> 00:16:15,340
normally but in the meantime we're

386
00:16:13,780 --> 00:16:17,319
sending packets along this failover path

387
00:16:15,340 --> 00:16:18,730
and not dropping them so you you're

388
00:16:17,320 --> 00:16:20,890
basically saying<font color="#E5E5E5"> that this</font><font color="#CCCCCC"> is a</font>

389
00:16:18,730 --> 00:16:25,390
localized link state to<font color="#E5E5E5"> that specific</font>

390
00:16:20,890 --> 00:16:27,220
edge between the two a<font color="#E5E5E5"> esas I guess</font>

391
00:16:25,390 --> 00:16:28,780
<font color="#E5E5E5">you're</font><font color="#CCCCCC"> right in that sense in the sense</font>

392
00:16:27,220 --> 00:16:31,000
that that the router is aware of the

393
00:16:28,780 --> 00:16:32,620
state of the link directly connected to

394
00:16:31,000 --> 00:16:34,090
<font color="#E5E5E5">it but it but it's what we're not doing</font>

395
00:16:32,620 --> 00:16:35,920
<font color="#E5E5E5">is sending this link state information</font>

396
00:16:34,090 --> 00:16:37,810
between routers though<font color="#CCCCCC"> okay thank</font><font color="#E5E5E5"> you</font>

397
00:16:35,920 --> 00:16:39,819
<font color="#CCCCCC">for an interesting presentation Thanks</font>

398
00:16:37,810 --> 00:16:42,280
yes sir michael richardson very good

399
00:16:39,820 --> 00:16:45,580
presentation<font color="#CCCCCC"> i assume that the failover</font>

400
00:16:42,280 --> 00:16:50,290
path is / prefix the failover path is

401
00:16:45,580 --> 00:16:51,610
<font color="#E5E5E5">perfect thank</font><font color="#CCCCCC"> you Danny</font><font color="#E5E5E5"> Macpherson so</font>

402
00:16:50,290 --> 00:16:53,140
yeah on the / prefix thing that<font color="#E5E5E5"> was</font>

403
00:16:51,610 --> 00:16:55,240
<font color="#CCCCCC">actually one of my observations and I'd</font>

404
00:16:53,140 --> 00:16:57,240
say that you know so you<font color="#E5E5E5"> talked about</font>

405
00:16:55,240 --> 00:17:00,070
Luke detection on the control plane and

406
00:16:57,240 --> 00:17:02,470
I would be more concerned with fording

407
00:17:00,070 --> 00:17:05,500
porting loop detection which is<font color="#E5E5E5"> going to</font>

408
00:17:02,470 --> 00:17:08,890
<font color="#E5E5E5">be the big issue and and then two other</font>

409
00:17:05,500 --> 00:17:10,869
comments one was the MRI<font color="#E5E5E5"> MRA I with</font>

410
00:17:08,890 --> 00:17:12,370
hierarchy inside of a network the number

411
00:17:10,869 --> 00:17:13,688
of paths and the number of updates and

412
00:17:12,369 --> 00:17:18,310
the replication of those<font color="#E5E5E5"> things is a</font>

413
00:17:13,689 --> 00:17:19,750
much bigger issue and the final thing I

414
00:17:18,310 --> 00:17:22,720
had was I'd recommend that you actually

415
00:17:19,750 --> 00:17:24,910
attend the defib limits<font color="#E5E5E5"> Boff this</font>

416
00:17:22,720 --> 00:17:26,290
afternoon and I have a look at<font color="#E5E5E5"> that</font>

417
00:17:24,910 --> 00:17:28,209
<font color="#E5E5E5">because all this stuff has to happen in</font>

418
00:17:26,290 --> 00:17:29,530
the forwarding paths and adding<font color="#CCCCCC"> you know</font>

419
00:17:28,209 --> 00:17:31,150
doubling the size of<font color="#CCCCCC"> that you</font><font color="#E5E5E5"> know</font>

420
00:17:29,530 --> 00:17:32,920
arbitrarily or even more than<font color="#E5E5E5"> that would</font>

421
00:17:31,150 --> 00:17:34,600
be a very big issue much less some small

422
00:17:32,920 --> 00:17:35,920
incremental updates yeah and then that's

423
00:17:34,600 --> 00:17:37,659
actually a good point in itself in that

424
00:17:35,920 --> 00:17:41,260
<font color="#E5E5E5">there's there's a couple of answers to</font>

425
00:17:37,660 --> 00:17:42,520
<font color="#CCCCCC">the last 14.1 which is is that depends</font>

426
00:17:41,260 --> 00:17:44,140
on the router architecture a lot of

427
00:17:42,520 --> 00:17:45,879
course but these things don't

428
00:17:44,140 --> 00:17:48,070
necessarily have to be in the forwarding

429
00:17:45,880 --> 00:17:49,570
table before the link goes down they

430
00:17:48,070 --> 00:17:50,950
could potentially be loaded on demand

431
00:17:49,570 --> 00:17:52,720
obviously there's addition

432
00:17:50,950 --> 00:17:54,700
delay that's caused by<font color="#E5E5E5"> that but since</font>

433
00:17:52,720 --> 00:17:56,680
<font color="#E5E5E5">these routers can recognize that these</font>

434
00:17:54,700 --> 00:17:57,880
packets are coming<font color="#E5E5E5"> from there can</font>

435
00:17:56,680 --> 00:18:00,490
recognize that they're in a state where

436
00:17:57,880 --> 00:18:02,500
they need<font color="#E5E5E5"> to use the 14 sorry use the</font>

437
00:18:00,490 --> 00:18:03,910
failover path they can actually<font color="#E5E5E5"> load</font>

438
00:18:02,500 --> 00:18:05,980
these entries into the forwarding table

439
00:18:03,910 --> 00:18:08,740
on demand I don't<font color="#E5E5E5"> think you want to</font>

440
00:18:05,980 --> 00:18:11,020
control<font color="#E5E5E5"> plane data driven function</font><font color="#CCCCCC"> too</font>

441
00:18:08,740 --> 00:18:12,430
yeah there are some issues with that<font color="#E5E5E5"> and</font>

442
00:18:11,020 --> 00:18:14,410
then<font color="#E5E5E5"> in fact we discussed that where</font>

443
00:18:12,430 --> 00:18:16,030
we're working on exactly those kinds of

444
00:18:14,410 --> 00:18:17,620
issues<font color="#E5E5E5"> in the</font><font color="#CCCCCC"> pavement and one of the</font>

445
00:18:16,030 --> 00:18:19,750
<font color="#CCCCCC">things there's been a huge amount</font><font color="#E5E5E5"> of</font>

446
00:18:17,620 --> 00:18:21,370
discussion<font color="#E5E5E5"> in the IETF on the routing</font>

447
00:18:19,750 --> 00:18:24,100
area working group<font color="#CCCCCC"> meling list about</font>

448
00:18:21,370 --> 00:18:26,560
<font color="#E5E5E5">faster about pride GPS and dealing</font><font color="#CCCCCC"> with</font>

449
00:18:24,100 --> 00:18:27,370
<font color="#E5E5E5">just this problem and I'd recommend that</font>

450
00:18:26,560 --> 00:18:29,620
you have a look at some of that as well

451
00:18:27,370 --> 00:18:31,360
<font color="#E5E5E5">yeah in fact i have i have been watching</font>

452
00:18:29,620 --> 00:18:34,709
<font color="#CCCCCC">some of</font><font color="#E5E5E5"> that pretty carefully</font><font color="#CCCCCC"> ok thanks</font>

453
00:18:31,360 --> 00:18:34,709
a lot man excellent thanks

