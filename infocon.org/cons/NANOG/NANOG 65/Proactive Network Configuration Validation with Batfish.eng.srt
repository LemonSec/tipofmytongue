1
00:00:07,210 --> 00:00:13,879
<font color="#E5E5E5">okay</font><font color="#CCCCCC"> all</font><font color="#E5E5E5"> right</font><font color="#CCCCCC"> welcome to the final</font>

2
00:00:11,830 --> 00:00:16,460
session<font color="#CCCCCC"> of</font><font color="#E5E5E5"> nano</font>

3
00:00:13,880 --> 00:00:19,130
<font color="#CCCCCC">sixty-five will have a few different</font>

4
00:00:16,460 --> 00:00:22,720
presentations first<font color="#E5E5E5"> re Fogle present on</font>

5
00:00:19,130 --> 00:00:25,340
<font color="#E5E5E5">network validation and</font><font color="#CCCCCC"> we'll have</font>

6
00:00:22,720 --> 00:00:27,560
Clinton work from<font color="#CCCCCC"> Telus talking about</font>

7
00:00:25,340 --> 00:00:30,860
<font color="#CCCCCC">ipv6 deployment experiences and then</font>

8
00:00:27,560 --> 00:00:34,239
<font color="#E5E5E5">we'll have closing presentation by Betty</font>

9
00:00:30,860 --> 00:00:36,620
<font color="#CCCCCC">Burk</font><font color="#E5E5E5"> the executive director so</font><font color="#CCCCCC"> Ari</font>

10
00:00:34,239 --> 00:00:38,390
hi I'm Ari<font color="#CCCCCC"> Fogel</font><font color="#E5E5E5"> I'm will be presenting</font>

11
00:00:36,620 --> 00:00:40,399
to you proactive network<font color="#E5E5E5"> configuration</font>

12
00:00:38,390 --> 00:00:42,440
validation with batfish<font color="#CCCCCC"> this is joint</font>

13
00:00:40,399 --> 00:00:45,230
work with<font color="#E5E5E5"> Stanley and Todd from UCLA</font>

14
00:00:42,440 --> 00:00:48,110
<font color="#E5E5E5">Lewis and Ramesh from USC and</font><font color="#CCCCCC"> Magma</font><font color="#E5E5E5"> tool</font>

15
00:00:45,230 --> 00:00:49,250
<font color="#E5E5E5">and g2 from Microsoft Research so as</font>

16
00:00:48,110 --> 00:00:50,870
many of<font color="#E5E5E5"> you are probably aware</font>

17
00:00:49,250 --> 00:00:52,970
<font color="#CCCCCC">misconfigurations</font><font color="#E5E5E5"> and enterprise</font>

18
00:00:50,870 --> 00:00:54,379
networks are somewhat common and when

19
00:00:52,970 --> 00:00:57,019
they in the case<font color="#E5E5E5"> that they cause outages</font>

20
00:00:54,380 --> 00:00:59,000
it can be very very<font color="#E5E5E5"> expensive</font><font color="#CCCCCC"> but why do</font>

21
00:00:57,020 --> 00:01:01,280
these misconfigurations happen typically

22
00:00:59,000 --> 00:01:03,170
well one of the main problems is<font color="#E5E5E5"> that</font>

23
00:01:01,280 --> 00:01:04,369
<font color="#CCCCCC">you have to when you're running a</font><font color="#E5E5E5"> bigger</font>

24
00:01:03,170 --> 00:01:07,040
<font color="#E5E5E5">a</font><font color="#CCCCCC"> shion's you have to specify</font><font color="#E5E5E5"> a number</font>

25
00:01:04,369 --> 00:01:09,409
<font color="#E5E5E5">of low level directives for multiple</font>

26
00:01:07,040 --> 00:01:10,729
<font color="#E5E5E5">different routing</font><font color="#CCCCCC"> protocols</font><font color="#E5E5E5"> and then you</font>

27
00:01:09,409 --> 00:01:11,930
also have to model<font color="#E5E5E5"> the</font><font color="#CCCCCC"> interactions</font>

28
00:01:10,729 --> 00:01:13,400
between all these different routing

29
00:01:11,930 --> 00:01:15,710
protocols<font color="#CCCCCC"> four mechanisms like route</font>

30
00:01:13,400 --> 00:01:18,499
redistribution administrative distance

31
00:01:15,710 --> 00:01:20,798
<font color="#E5E5E5">BGP advertisement</font><font color="#CCCCCC"> and with</font><font color="#E5E5E5"> policy</font>

32
00:01:18,499 --> 00:01:23,539
changes<font color="#CCCCCC"> and so on</font>

33
00:01:20,799 --> 00:01:25,700
so<font color="#E5E5E5"> even if you get that configuration</font>

34
00:01:23,539 --> 00:01:28,069
right for a single node<font color="#CCCCCC"> you also have to</font>

35
00:01:25,700 --> 00:01:30,170
<font color="#CCCCCC">consider</font><font color="#E5E5E5"> the sort of holistic way that</font>

36
00:01:28,069 --> 00:01:31,999
all the different<font color="#CCCCCC"> nodes communicate with</font>

37
00:01:30,170 --> 00:01:34,700
each other<font color="#CCCCCC"> and it's</font><font color="#E5E5E5"> really</font><font color="#CCCCCC"> easy to</font><font color="#E5E5E5"> get</font>

38
00:01:31,999 --> 00:01:36,350
<font color="#E5E5E5">that wrong as well so for example we</font>

39
00:01:34,700 --> 00:01:38,450
have this network<font color="#E5E5E5"> in the center here and</font>

40
00:01:36,350 --> 00:01:39,919
on the<font color="#E5E5E5"> top right you</font><font color="#CCCCCC"> see there's</font><font color="#E5E5E5"> this 10</font>

41
00:01:38,450 --> 00:01:42,319
triples own<font color="#E5E5E5"> etwork and we have a simple</font>

42
00:01:39,920 --> 00:01:44,869
<font color="#E5E5E5">intent that we want to implement</font><font color="#CCCCCC"> for</font>

43
00:01:42,319 --> 00:01:46,600
this we<font color="#E5E5E5"> want 10</font><font color="#CCCCCC"> triple o to be reachable</font>

44
00:01:44,869 --> 00:01:51,200
from<font color="#CCCCCC"> the customer see on the left</font>

45
00:01:46,600 --> 00:01:53,298
excuse me from the customer<font color="#E5E5E5"> here and we</font>

46
00:01:51,200 --> 00:01:55,039
want<font color="#E5E5E5"> it to be unreachable</font><font color="#CCCCCC"> from the rest</font>

47
00:01:53,299 --> 00:01:58,639
of the<font color="#CCCCCC"> network that's</font><font color="#E5E5E5"> not involved</font><font color="#CCCCCC"> in</font>

48
00:01:55,039 --> 00:02:00,850
the past<font color="#E5E5E5"> 10 trip below and I've</font>

49
00:01:58,639 --> 00:02:02,749
implemented this using these

50
00:02:00,850 --> 00:02:06,770
configuration snippets that<font color="#E5E5E5"> you see at</font>

51
00:02:02,749 --> 00:02:09,139
<font color="#E5E5E5">the bottom here</font><font color="#CCCCCC"> so in order to make</font><font color="#E5E5E5"> 10</font>

52
00:02:06,770 --> 00:02:11,090
triple o reachable from<font color="#E5E5E5"> C you can see</font>

53
00:02:09,139 --> 00:02:13,609
lines<font color="#CCCCCC"> 3 & 4 on</font><font color="#E5E5E5"> the left for</font><font color="#CCCCCC"> the</font>

54
00:02:11,090 --> 00:02:15,680
configuration<font color="#CCCCCC"> of</font><font color="#E5E5E5"> n2 here what we do is</font>

55
00:02:13,610 --> 00:02:19,459
<font color="#CCCCCC">basically this is a directly connected</font>

56
00:02:15,680 --> 00:02:21,170
<font color="#CCCCCC">network</font><font color="#E5E5E5"> for n2 and for whatever reason</font>

57
00:02:19,459 --> 00:02:23,840
the<font color="#E5E5E5"> operator is decided to redistribute</font>

58
00:02:21,170 --> 00:02:26,140
<font color="#E5E5E5">this connected network into</font><font color="#CCCCCC"> OSPF with</font>

59
00:02:23,840 --> 00:02:29,140
the metric that<font color="#CCCCCC"> you</font><font color="#E5E5E5"> see here</font>

60
00:02:26,140 --> 00:02:31,510
and that's to the<font color="#CCCCCC"> right connectivity 210</font>

61
00:02:29,140 --> 00:02:34,179
<font color="#CCCCCC">ship below to make it unreachable from</font>

62
00:02:31,510 --> 00:02:37,120
everywhere<font color="#E5E5E5"> else on</font><font color="#CCCCCC"> n3 the operator in</font>

63
00:02:34,180 --> 00:02:38,380
lines<font color="#CCCCCC"> 4</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> 5 has installed a static</font>

64
00:02:37,120 --> 00:02:41,440
route that just drops all traffic

65
00:02:38,380 --> 00:02:45,730
<font color="#CCCCCC">retention below and redistributes that</font>

66
00:02:41,440 --> 00:02:47,829
static route<font color="#E5E5E5"> on line 5 so that the its</font>

67
00:02:45,730 --> 00:02:50,320
neighbors<font color="#E5E5E5"> will basically send traffic</font>

68
00:02:47,830 --> 00:02:52,270
<font color="#E5E5E5">there to be dropped now if you're</font>

69
00:02:50,320 --> 00:02:54,670
looking<font color="#CCCCCC"> at this you may notice that</font>

70
00:02:52,270 --> 00:02:58,420
there's a<font color="#CCCCCC"> problem here I wonder</font><font color="#E5E5E5"> if you</font>

71
00:02:54,670 --> 00:02:59,980
can<font color="#E5E5E5"> figure out what might go wrong well</font>

72
00:02:58,420 --> 00:03:01,600
if you actually<font color="#E5E5E5"> were to run this you</font>

73
00:02:59,980 --> 00:03:03,670
would start to<font color="#CCCCCC"> notice that some of the</font>

74
00:03:01,600 --> 00:03:05,320
traffic<font color="#CCCCCC"> that reaches at one that's</font>

75
00:03:03,670 --> 00:03:08,950
destined for the<font color="#CCCCCC"> 10 triple</font><font color="#E5E5E5"> o network</font>

76
00:03:05,320 --> 00:03:11,079
<font color="#E5E5E5">will go in the direction of n 2 and then</font>

77
00:03:08,950 --> 00:03:13,959
<font color="#CCCCCC">2 n 10 and then reaches destination but</font>

78
00:03:11,080 --> 00:03:16,330
some of it will<font color="#E5E5E5"> go</font><font color="#CCCCCC"> to n 3</font><font color="#E5E5E5"> and be dropped</font>

79
00:03:13,959 --> 00:03:17,950
<font color="#E5E5E5">and this is because of equal cost multi</font>

80
00:03:16,330 --> 00:03:20,440
path routing<font color="#E5E5E5"> which is initiated because</font>

81
00:03:17,950 --> 00:03:22,000
<font color="#E5E5E5">these two routes have been redistributed</font>

82
00:03:20,440 --> 00:03:25,150
with the same metric and I both<font color="#CCCCCC"> arrived</font>

83
00:03:22,000 --> 00:03:27,780
at<font color="#CCCCCC"> n1 this</font><font color="#E5E5E5"> problem where you see that a</font>

84
00:03:25,150 --> 00:03:29,800
packet can be delivered<font color="#E5E5E5"> or not delivered</font>

85
00:03:27,780 --> 00:03:32,530
non-deterministically based on you<font color="#E5E5E5"> know</font>

86
00:03:29,800 --> 00:03:37,269
some<font color="#CCCCCC"> hat we call multipath</font><font color="#E5E5E5"> inconsistency</font>

87
00:03:32,530 --> 00:03:38,769
so<font color="#CCCCCC"> in order to find</font><font color="#E5E5E5"> problems like this</font>

88
00:03:37,269 --> 00:03:40,690
<font color="#E5E5E5">we've developed a tool called batfish</font>

89
00:03:38,769 --> 00:03:42,820
<font color="#CCCCCC">which is a proactive configuration</font>

90
00:03:40,690 --> 00:03:44,859
safety checker<font color="#E5E5E5"> it's available online you</font>

91
00:03:42,820 --> 00:03:47,019
<font color="#E5E5E5">can take a look after</font><font color="#CCCCCC"> this talk if you</font>

92
00:03:44,860 --> 00:03:49,269
wish and we've<font color="#CCCCCC"> used</font><font color="#E5E5E5"> it to find real bugs</font>

93
00:03:47,019 --> 00:03:50,830
and real networks and our favorite quote

94
00:03:49,269 --> 00:03:52,060
from<font color="#E5E5E5"> one of the operators of the</font>

95
00:03:50,830 --> 00:03:53,530
networks that<font color="#E5E5E5"> we</font><font color="#CCCCCC"> analyzed is that with</font>

96
00:03:52,060 --> 00:03:55,420
respect<font color="#E5E5E5"> to the prefix that was dual</font>

97
00:03:53,530 --> 00:03:57,430
assigned from<font color="#E5E5E5"> yesterday what am</font><font color="#CCCCCC"> I not</font>

98
00:03:55,420 --> 00:03:59,829
guys stop<font color="#E5E5E5"> I did it ask what</font><font color="#CCCCCC"> voodoo o is</font>

99
00:03:57,430 --> 00:04:03,190
<font color="#CCCCCC">using to find such things</font><font color="#E5E5E5"> so that was</font>

100
00:03:59,830 --> 00:04:05,560
pretty<font color="#E5E5E5"> fun so the way batfish works is</font>

101
00:04:03,190 --> 00:04:08,799
that you<font color="#E5E5E5"> input your router configuration</font>

102
00:04:05,560 --> 00:04:10,660
files<font color="#E5E5E5"> and maybe some information about</font>

103
00:04:08,799 --> 00:04:12,549
external bgp advertisements<font color="#E5E5E5"> that you</font>

104
00:04:10,660 --> 00:04:15,640
want to model<font color="#E5E5E5"> as well as your topology</font>

105
00:04:12,549 --> 00:04:17,140
<font color="#CCCCCC">and</font><font color="#E5E5E5"> you also provide some assertions</font>

106
00:04:15,640 --> 00:04:18,000
<font color="#CCCCCC">that you want to</font><font color="#E5E5E5"> check and then outcome</font>

107
00:04:17,140 --> 00:04:20,260
violations

108
00:04:18,000 --> 00:04:23,860
batfish is divided into<font color="#E5E5E5"> these four</font>

109
00:04:20,260 --> 00:04:25,419
stages that<font color="#CCCCCC"> you see here</font><font color="#E5E5E5"> first we</font><font color="#CCCCCC"> just</font>

110
00:04:23,860 --> 00:04:27,550
process the configurations and you

111
00:04:25,419 --> 00:04:30,190
<font color="#CCCCCC">analyze them with a certian space just</font>

112
00:04:27,550 --> 00:04:31,180
<font color="#E5E5E5">for</font><font color="#CCCCCC"> the unconditioned and then we are</font>

113
00:04:30,190 --> 00:04:32,830
<font color="#E5E5E5">actually able to</font><font color="#CCCCCC"> use all this</font>

114
00:04:31,180 --> 00:04:35,410
information to<font color="#CCCCCC"> generate the forwarding</font>

115
00:04:32,830 --> 00:04:37,479
tables<font color="#E5E5E5"> that would occur if you</font><font color="#CCCCCC"> were</font>

116
00:04:35,410 --> 00:04:38,979
<font color="#CCCCCC">actually</font><font color="#E5E5E5"> to run this network and then</font>

117
00:04:37,479 --> 00:04:39,560
furthermore you<font color="#CCCCCC"> can write assertions</font>

118
00:04:38,979 --> 00:04:42,700
about the

119
00:04:39,560 --> 00:04:42,700
boarding tables<font color="#E5E5E5"> that you'd like</font><font color="#CCCCCC"> to check</font>

120
00:04:42,790 --> 00:04:47,660
so stage<font color="#E5E5E5"> one is</font><font color="#CCCCCC"> it's pretty basically</font>

121
00:04:45,440 --> 00:04:50,960
parts of the configurations<font color="#E5E5E5"> so a line</font>

122
00:04:47,660 --> 00:04:53,120
like<font color="#CCCCCC"> this first</font><font color="#E5E5E5"> one you see here on</font><font color="#CCCCCC"> n3</font>

123
00:04:50,960 --> 00:04:56,359
would<font color="#E5E5E5"> be converted</font><font color="#CCCCCC"> to this fact about</font>

124
00:04:53,120 --> 00:04:58,310
<font color="#CCCCCC">OSPF interface</font><font color="#E5E5E5"> costs in our model so you</font>

125
00:04:56,360 --> 00:05:00,139
<font color="#CCCCCC">see the node isn't</font><font color="#E5E5E5"> three</font><font color="#CCCCCC"> interfaces and</font>

126
00:04:58,310 --> 00:05:02,210
three one<font color="#E5E5E5"> what you see</font><font color="#CCCCCC"> from here and the</font>

127
00:05:00,139 --> 00:05:03,680
cost is one which you get here and we

128
00:05:02,210 --> 00:05:05,150
<font color="#E5E5E5">get similar information about the</font>

129
00:05:03,680 --> 00:05:09,940
topology<font color="#E5E5E5"> and convert</font><font color="#CCCCCC"> that the facts that</font>

130
00:05:05,150 --> 00:05:11,960
<font color="#CCCCCC">we're able to</font><font color="#E5E5E5"> handle in stage</font><font color="#CCCCCC"> two we</font>

131
00:05:09,940 --> 00:05:13,550
basically try<font color="#E5E5E5"> to figure out all the</font>

132
00:05:11,960 --> 00:05:15,320
different simple problems that might

133
00:05:13,550 --> 00:05:16,760
arise during initial check of the

134
00:05:15,320 --> 00:05:19,310
configurations for instance if there any

135
00:05:16,760 --> 00:05:21,800
syntax errors<font color="#CCCCCC"> that'll be reported or</font>

136
00:05:19,310 --> 00:05:23,540
common problems like having an undefined

137
00:05:21,800 --> 00:05:26,680
reference<font color="#E5E5E5"> let's say to a rap map that</font>

138
00:05:23,540 --> 00:05:29,330
<font color="#E5E5E5">doesn't exist</font><font color="#CCCCCC"> would</font><font color="#E5E5E5"> be reported here and</font>

139
00:05:26,680 --> 00:05:31,070
<font color="#E5E5E5">on top of that we</font><font color="#CCCCCC"> also</font><font color="#E5E5E5"> have a language</font>

140
00:05:29,330 --> 00:05:34,520
<font color="#E5E5E5">that we've designed</font><font color="#CCCCCC"> for asking queries</font>

141
00:05:31,070 --> 00:05:35,990
about<font color="#E5E5E5"> the configurations</font><font color="#CCCCCC"> and some of and</font>

142
00:05:34,520 --> 00:05:38,210
we've also provided<font color="#E5E5E5"> a library of</font><font color="#CCCCCC"> common</font>

143
00:05:35,990 --> 00:05:40,010
<font color="#CCCCCC">checks that you may want to use so for</font>

144
00:05:38,210 --> 00:05:42,138
<font color="#E5E5E5">instance you might want to find out if</font>

145
00:05:40,010 --> 00:05:44,030
IP addresses are reused across<font color="#CCCCCC"> all the</font>

146
00:05:42,139 --> 00:05:47,539
routers<font color="#E5E5E5"> in your network so you would</font>

147
00:05:44,030 --> 00:05:49,099
<font color="#CCCCCC">input that assertion</font><font color="#E5E5E5"> and an example</font>

148
00:05:47,539 --> 00:05:50,719
<font color="#CCCCCC">output you might get is that this you</font>

149
00:05:49,100 --> 00:05:52,160
know<font color="#E5E5E5"> this particular IP address</font><font color="#CCCCCC"> you see</font>

150
00:05:50,720 --> 00:05:54,770
here is assigned<font color="#E5E5E5"> to these two interfaces</font>

151
00:05:52,160 --> 00:05:57,350
on these two<font color="#CCCCCC"> routers</font><font color="#E5E5E5"> and you may want to</font>

152
00:05:54,770 --> 00:05:59,840
deal<font color="#CCCCCC"> with</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> another</font><font color="#E5E5E5"> common</font><font color="#CCCCCC"> thing that</font>

153
00:05:57,350 --> 00:06:01,430
<font color="#E5E5E5">operators wanted to see was uh whether</font>

154
00:05:59,840 --> 00:06:03,710
loopback networks were exported into

155
00:06:01,430 --> 00:06:04,850
<font color="#CCCCCC">OSPF</font><font color="#E5E5E5"> you would need this for instance if</font>

156
00:06:03,710 --> 00:06:08,109
you wanted to<font color="#E5E5E5"> run</font>

157
00:06:04,850 --> 00:06:10,850
MPLS or ibgp on top of your IP network

158
00:06:08,110 --> 00:06:12,680
and so some<font color="#E5E5E5"> simple</font><font color="#CCCCCC"> app out</font><font color="#E5E5E5"> right here</font>

159
00:06:10,850 --> 00:06:14,539
<font color="#CCCCCC">would</font><font color="#E5E5E5"> just show you that will actually</font>

160
00:06:12,680 --> 00:06:15,950
<font color="#CCCCCC">loopback 0</font><font color="#E5E5E5"> you know</font><font color="#CCCCCC"> on</font><font color="#E5E5E5"> this particular</font>

161
00:06:14,539 --> 00:06:18,080
router is not<font color="#E5E5E5"> running active or passive</font>

162
00:06:15,950 --> 00:06:20,930
<font color="#CCCCCC">opf so the network is not going to make</font>

163
00:06:18,080 --> 00:06:22,580
it<font color="#E5E5E5"> into</font><font color="#CCCCCC"> the OSPF rip</font><font color="#E5E5E5"> and of course you</font>

164
00:06:20,930 --> 00:06:27,620
can design<font color="#E5E5E5"> your own queries as well and</font>

165
00:06:22,580 --> 00:06:29,359
I'll talk<font color="#CCCCCC"> about that</font><font color="#E5E5E5"> later so after you</font>

166
00:06:27,620 --> 00:06:32,479
process the configurations and<font color="#E5E5E5"> now you</font>

167
00:06:29,360 --> 00:06:34,520
have a model<font color="#E5E5E5"> to handle all</font><font color="#CCCCCC"> of them we</font>

168
00:06:32,479 --> 00:06:36,500
also are now<font color="#CCCCCC"> able to generate the</font>

169
00:06:34,520 --> 00:06:38,570
forwarding tables so<font color="#E5E5E5"> we start with some</font>

170
00:06:36,500 --> 00:06:40,729
<font color="#E5E5E5">basic facts from the configurations</font><font color="#CCCCCC"> like</font>

171
00:06:38,570 --> 00:06:44,680
the fact that let's say a particular

172
00:06:40,729 --> 00:06:47,419
network may be exported into<font color="#CCCCCC"> OSPF</font><font color="#E5E5E5"> and</font>

173
00:06:44,680 --> 00:06:48,979
using all<font color="#CCCCCC"> of</font><font color="#E5E5E5"> these facts</font><font color="#CCCCCC"> together or</font>

174
00:06:47,419 --> 00:06:51,650
able to<font color="#E5E5E5"> compute</font><font color="#CCCCCC"> the actual ribs that</font>

175
00:06:48,979 --> 00:06:52,960
should result if the<font color="#E5E5E5"> routers are working</font>

176
00:06:51,650 --> 00:06:56,080
properly<font color="#E5E5E5"> according to</font>

177
00:06:52,960 --> 00:06:57,849
respect<font color="#E5E5E5"> so for instance that network of</font>

178
00:06:56,080 --> 00:07:02,469
<font color="#E5E5E5">being exported from</font><font color="#CCCCCC"> n2 may make it</font><font color="#E5E5E5"> onto</font>

179
00:06:57,850 --> 00:07:03,490
n1 with such-and-such cost<font color="#E5E5E5"> and from</font>

180
00:07:02,470 --> 00:07:05,169
there we're<font color="#CCCCCC"> all able to</font><font color="#E5E5E5"> figure out</font><font color="#CCCCCC"> you</font>

181
00:07:03,490 --> 00:07:09,460
know<font color="#E5E5E5"> what interface everything will go</font>

182
00:07:05,169 --> 00:07:12,159
out so we have the forwarding tables is

183
00:07:09,460 --> 00:07:13,690
<font color="#E5E5E5">the final</font><font color="#CCCCCC"> output of</font><font color="#E5E5E5"> that stuff then in</font>

184
00:07:12,160 --> 00:07:17,169
stage<font color="#E5E5E5"> 4 we can actually ask</font><font color="#CCCCCC"> questions</font>

185
00:07:13,690 --> 00:07:18,729
now about<font color="#E5E5E5"> the forwarding table so if you</font>

186
00:07:17,169 --> 00:07:20,530
recall<font color="#CCCCCC"> earlier there</font><font color="#E5E5E5"> was a multipath</font>

187
00:07:18,729 --> 00:07:23,020
consistency violation in the example

188
00:07:20,530 --> 00:07:25,690
<font color="#E5E5E5">Network and if you were to ask about</font>

189
00:07:23,020 --> 00:07:28,330
multipath consistency whether it holds

190
00:07:25,690 --> 00:07:31,750
then you'll either get<font color="#E5E5E5"> the answer yes it</font>

191
00:07:28,330 --> 00:07:33,490
does or you'll get a<font color="#E5E5E5"> violation that's</font>

192
00:07:31,750 --> 00:07:34,750
specified<font color="#E5E5E5"> in</font><font color="#CCCCCC"> terms of a packet that</font>

193
00:07:33,490 --> 00:07:37,090
<font color="#E5E5E5">would actually violate multipath</font>

194
00:07:34,750 --> 00:07:39,460
consistency<font color="#E5E5E5"> so in this case if you were</font>

195
00:07:37,090 --> 00:07:42,570
to<font color="#E5E5E5"> create a packet and insert it at</font><font color="#CCCCCC"> n1</font>

196
00:07:39,460 --> 00:07:46,080
<font color="#E5E5E5">over here and give it these parameters</font>

197
00:07:42,570 --> 00:07:47,919
then it would be a violation<font color="#CCCCCC"> because</font>

198
00:07:46,080 --> 00:07:49,960
<font color="#E5E5E5">according</font><font color="#CCCCCC"> to the routes I showed you</font>

199
00:07:47,919 --> 00:07:52,690
before some<font color="#CCCCCC"> of it would go</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> M</font><font color="#E5E5E5"> 10 and</font>

200
00:07:49,960 --> 00:07:55,739
be accepted<font color="#E5E5E5"> and some of it</font><font color="#CCCCCC"> will go to n3</font>

201
00:07:52,690 --> 00:07:55,740
<font color="#E5E5E5">would</font><font color="#CCCCCC"> be and would be dropped</font>

202
00:07:56,760 --> 00:08:00,460
furthermore when we find these example

203
00:07:58,900 --> 00:08:03,250
packets we are also able<font color="#E5E5E5"> to give you a</font>

204
00:08:00,460 --> 00:08:04,479
virtual<font color="#CCCCCC"> traceroute</font><font color="#E5E5E5"> to show you what what</font>

205
00:08:03,250 --> 00:08:06,310
<font color="#E5E5E5">it's actually</font><font color="#CCCCCC"> happening so</font><font color="#E5E5E5"> for that</font>

206
00:08:04,479 --> 00:08:08,800
example packet in the previous slide you

207
00:08:06,310 --> 00:08:11,650
<font color="#E5E5E5">see</font><font color="#CCCCCC"> that on one path that it could take</font>

208
00:08:08,800 --> 00:08:14,050
<font color="#E5E5E5">illigal from hen 1 to n 2 then from</font><font color="#CCCCCC"> n2 2</font>

209
00:08:11,650 --> 00:08:16,388
and 10<font color="#E5E5E5"> and he accepted and now</font><font color="#CCCCCC"> another</font>

210
00:08:14,050 --> 00:08:19,000
path I<font color="#E5E5E5"> could take because of ecmp it</font>

211
00:08:16,389 --> 00:08:20,349
could start at<font color="#CCCCCC"> +</font><font color="#E5E5E5"> 1 and go to and 3 where</font>

212
00:08:19,000 --> 00:08:22,030
it's promptly dropped because<font color="#E5E5E5"> of the</font>

213
00:08:20,349 --> 00:08:26,440
static route that it's discarding

214
00:08:22,030 --> 00:08:28,030
<font color="#E5E5E5">packets for that</font><font color="#CCCCCC"> network</font><font color="#E5E5E5"> so bad fisher</font>

215
00:08:26,440 --> 00:08:29,289
has been quite an undertaking it's

216
00:08:28,030 --> 00:08:32,348
written<font color="#E5E5E5"> in several programming languages</font>

217
00:08:29,289 --> 00:08:34,630
namely<font color="#E5E5E5"> Java for most of the logic antler</font>

218
00:08:32,349 --> 00:08:38,020
for the parsing and data log for the

219
00:08:34,630 --> 00:08:40,809
forwarding table generation I<font color="#E5E5E5"> mean we</font>

220
00:08:38,020 --> 00:08:43,299
also support many different<font color="#E5E5E5"> writing</font>

221
00:08:40,809 --> 00:08:45,640
languages spoke<font color="#E5E5E5"> support Cisco IOS and X</font>

222
00:08:43,299 --> 00:08:48,550
<font color="#E5E5E5">OS</font><font color="#CCCCCC"> juniper Arista quanta and</font><font color="#E5E5E5"> another</font>

223
00:08:45,640 --> 00:08:50,620
similar<font color="#E5E5E5"> router configuration languages</font>

224
00:08:48,550 --> 00:08:52,839
we support a wide<font color="#CCCCCC"> variety of features</font>

225
00:08:50,620 --> 00:08:55,270
<font color="#E5E5E5">including route redistribution</font><font color="#CCCCCC"> internal</font>

226
00:08:52,839 --> 00:08:59,290
<font color="#CCCCCC">external OSPF bgp communities route MOUs</font>

227
00:08:55,270 --> 00:09:00,790
policy statements etc<font color="#E5E5E5"> and again this is</font>

228
00:08:59,290 --> 00:09:02,860
a real tool if you want<font color="#CCCCCC"> to check it out</font>

229
00:09:00,790 --> 00:09:04,750
<font color="#E5E5E5">to see whether it'll support your</font>

230
00:09:02,860 --> 00:09:05,780
network you<font color="#E5E5E5"> can go to</font><font color="#CCCCCC"> bet org</font><font color="#E5E5E5"> and shoot</font>

231
00:09:04,750 --> 00:09:10,730
me a<font color="#CCCCCC"> line and I can hope</font>

232
00:09:05,780 --> 00:09:13,579
with that so<font color="#E5E5E5"> we actually tested out</font>

233
00:09:10,730 --> 00:09:15,130
<font color="#CCCCCC">batfish on</font><font color="#E5E5E5"> two large</font><font color="#CCCCCC"> university networks</font>

234
00:09:13,580 --> 00:09:16,760
as well as Microsoft's<font color="#CCCCCC"> Network</font>

235
00:09:15,130 --> 00:09:18,410
<font color="#CCCCCC">unfortunately</font><font color="#E5E5E5"> won't be able to tell you</font>

236
00:09:16,760 --> 00:09:20,510
<font color="#CCCCCC">anything about the results</font><font color="#E5E5E5"> at Microsoft</font>

237
00:09:18,410 --> 00:09:22,850
but I can explain<font color="#E5E5E5"> what happen at these</font>

238
00:09:20,510 --> 00:09:24,439
<font color="#CCCCCC">university networks</font><font color="#E5E5E5"> so they're</font>

239
00:09:22,850 --> 00:09:26,900
qualitatively different these<font color="#E5E5E5"> two</font><font color="#CCCCCC"> the</font>

240
00:09:24,440 --> 00:09:30,350
first<font color="#E5E5E5"> one has a decentralize design at</font>

241
00:09:26,900 --> 00:09:32,180
the core<font color="#E5E5E5"> well this is managed by the</font>

242
00:09:30,350 --> 00:09:33,410
network<font color="#E5E5E5"> operations center team and then</font>

243
00:09:32,180 --> 00:09:35,930
they have a different team for each

244
00:09:33,410 --> 00:09:38,060
<font color="#E5E5E5">department which is configured as a</font>

245
00:09:35,930 --> 00:09:39,319
different autonomous<font color="#E5E5E5"> system and the core</font>

246
00:09:38,060 --> 00:09:42,109
<font color="#CCCCCC">peers with all of these departments</font>

247
00:09:39,320 --> 00:09:43,520
<font color="#E5E5E5">using BGP in the other</font><font color="#CCCCCC"> University</font>

248
00:09:42,110 --> 00:09:44,240
<font color="#CCCCCC">Network</font><font color="#E5E5E5"> we analyzed it's much more</font>

249
00:09:43,520 --> 00:09:46,250
centralized

250
00:09:44,240 --> 00:09:48,110
it's all one autonomous system and the

251
00:09:46,250 --> 00:09:56,030
different departments<font color="#CCCCCC"> are partitioned by</font>

252
00:09:48,110 --> 00:09:58,100
VLANs sorry so in<font color="#E5E5E5"> addition to sorry on</font>

253
00:09:56,030 --> 00:10:00,770
these two<font color="#E5E5E5"> networks we tested a variety</font>

254
00:09:58,100 --> 00:10:02,450
<font color="#CCCCCC">of forwarding plane properties to which</font>

255
00:10:00,770 --> 00:10:03,829
I'll discuss the first one was a

256
00:10:02,450 --> 00:10:06,530
multipath consistency which I've shown

257
00:10:03,830 --> 00:10:08,120
<font color="#CCCCCC">you earlier</font><font color="#E5E5E5"> and the second one is check</font>

258
00:10:06,530 --> 00:10:10,300
<font color="#E5E5E5">about fault tolerance so we want to see</font>

259
00:10:08,120 --> 00:10:13,010
whether reach ability<font color="#E5E5E5"> will</font><font color="#CCCCCC"> be impacted</font>

260
00:10:10,300 --> 00:10:13,579
<font color="#CCCCCC">by</font><font color="#E5E5E5"> the failure</font><font color="#CCCCCC"> of any single</font><font color="#E5E5E5"> link in the</font>

261
00:10:13,010 --> 00:10:17,569
network

262
00:10:13,580 --> 00:10:19,040
so if you look at<font color="#E5E5E5"> this network below on</font>

263
00:10:17,570 --> 00:10:23,030
the<font color="#CCCCCC"> left there's a customer</font><font color="#E5E5E5"> to this</font>

264
00:10:19,040 --> 00:10:26,839
advertising<font color="#CCCCCC"> two routes</font><font color="#E5E5E5"> 2.2 2.0 and</font>

265
00:10:23,030 --> 00:10:28,339
<font color="#E5E5E5">triple</font><font color="#CCCCCC"> three oh and on the right this</font>

266
00:10:26,839 --> 00:10:31,280
network has<font color="#E5E5E5"> the route maps that will</font>

267
00:10:28,339 --> 00:10:33,500
<font color="#E5E5E5">accept</font><font color="#CCCCCC"> a the two triple - o Network a</font>

268
00:10:31,280 --> 00:10:37,250
<font color="#CCCCCC">ten - and we'll accept advertisements</font>

269
00:10:33,500 --> 00:10:39,800
for both<font color="#CCCCCC"> networks</font><font color="#E5E5E5"> a 10-1 so if you were</font>

270
00:10:37,250 --> 00:10:41,660
to<font color="#E5E5E5"> actually turn off this link then</font><font color="#CCCCCC"> you</font>

271
00:10:39,800 --> 00:10:45,349
<font color="#CCCCCC">would see triple</font><font color="#E5E5E5"> three o is no longer</font>

272
00:10:41,660 --> 00:10:49,250
reachable because<font color="#CCCCCC"> there's nobody to</font>

273
00:10:45,350 --> 00:10:51,110
accept advertisements for it anymore so

274
00:10:49,250 --> 00:10:53,650
this<font color="#CCCCCC"> would be a</font><font color="#E5E5E5"> violation of this fault</font>

275
00:10:51,110 --> 00:10:57,290
tolerance property that we want<font color="#CCCCCC"> to</font><font color="#E5E5E5"> check</font>

276
00:10:53,650 --> 00:10:59,420
so as I said we tested these properties

277
00:10:57,290 --> 00:11:00,800
on these two<font color="#E5E5E5"> networks in this column</font><font color="#CCCCCC"> you</font>

278
00:10:59,420 --> 00:11:02,890
can see the total<font color="#CCCCCC"> number of violations</font>

279
00:11:00,800 --> 00:11:05,510
<font color="#CCCCCC">that were detected initially by our tool</font>

280
00:11:02,890 --> 00:11:07,220
in this con we show the violations<font color="#E5E5E5"> that</font>

281
00:11:05,510 --> 00:11:09,980
were confirmed<font color="#CCCCCC"> to be real problems</font><font color="#E5E5E5"> by</font>

282
00:11:07,220 --> 00:11:11,720
the operators for a multipath<font color="#E5E5E5"> they were</font>

283
00:11:09,980 --> 00:11:14,420
all<font color="#E5E5E5"> confirmed to be problems</font><font color="#CCCCCC"> and for</font>

284
00:11:11,720 --> 00:11:16,640
fault<font color="#CCCCCC"> tolerance we had some false</font>

285
00:11:14,420 --> 00:11:19,469
positives<font color="#CCCCCC"> simply because the way the</font>

286
00:11:16,640 --> 00:11:21,020
network<font color="#CCCCCC"> was organized some</font>

287
00:11:19,470 --> 00:11:23,550
of the<font color="#E5E5E5"> departments actually had</font>

288
00:11:21,020 --> 00:11:24,900
different<font color="#E5E5E5"> names but were really the same</font>

289
00:11:23,550 --> 00:11:27,349
<font color="#E5E5E5">department so it appeared that there was</font>

290
00:11:24,900 --> 00:11:30,090
no fault tolerance but<font color="#E5E5E5"> there really was</font>

291
00:11:27,350 --> 00:11:32,390
for a<font color="#E5E5E5"> net</font><font color="#CCCCCC"> to again all the multipath</font>

292
00:11:30,090 --> 00:11:34,800
violations were confirmed<font color="#E5E5E5"> to</font><font color="#CCCCCC"> be real</font><font color="#E5E5E5"> and</font>

293
00:11:32,390 --> 00:11:36,420
because we had incomplete<font color="#CCCCCC"> topology</font>

294
00:11:34,800 --> 00:11:38,699
<font color="#CCCCCC">information about the way the VLANs were</font>

295
00:11:36,420 --> 00:11:40,920
set up<font color="#E5E5E5"> there were some false</font><font color="#CCCCCC"> positives</font>

296
00:11:38,700 --> 00:11:43,770
in detection<font color="#E5E5E5"> of fault tolerance because</font>

297
00:11:40,920 --> 00:11:46,229
we would have<font color="#CCCCCC"> maybe multiple interfaces</font>

298
00:11:43,770 --> 00:11:47,689
underlying a<font color="#CCCCCC"> VLAN</font><font color="#E5E5E5"> so really no loss of a</font>

299
00:11:46,230 --> 00:11:51,210
<font color="#E5E5E5">single interface would have been able to</font>

300
00:11:47,690 --> 00:11:53,760
cause a loss of<font color="#CCCCCC"> connectivity</font><font color="#E5E5E5"> of these</font>

301
00:11:51,210 --> 00:11:59,940
violations<font color="#E5E5E5"> of the majority of them are</font>

302
00:11:53,760 --> 00:12:02,520
<font color="#CCCCCC">fixed in the case for net1 the multipath</font>

303
00:11:59,940 --> 00:12:04,500
violations were not<font color="#E5E5E5"> fixed</font><font color="#CCCCCC"> immediately</font>

304
00:12:02,520 --> 00:12:07,500
because a discussion needed to be had<font color="#E5E5E5"> at</font>

305
00:12:04,500 --> 00:12:09,780
<font color="#E5E5E5">about the the peering situation between</font>

306
00:12:07,500 --> 00:12:11,400
<font color="#E5E5E5">the core and a particular</font><font color="#CCCCCC"> department</font>

307
00:12:09,780 --> 00:12:13,829
where this violation<font color="#E5E5E5"> occurred and</font>

308
00:12:11,400 --> 00:12:16,800
haven't yet<font color="#E5E5E5"> heard news back about what</font>

309
00:12:13,830 --> 00:12:18,930
they ended up<font color="#E5E5E5"> doing in the fault</font>

310
00:12:16,800 --> 00:12:20,459
tolerance<font color="#CCCCCC"> case for</font><font color="#E5E5E5"> both networks</font><font color="#CCCCCC"> none of</font>

311
00:12:18,930 --> 00:12:22,949
them were fixed<font color="#CCCCCC"> because to actually fix</font>

312
00:12:20,460 --> 00:12:23,940
it required<font color="#CCCCCC"> laying</font><font color="#E5E5E5"> down</font><font color="#CCCCCC"> new lines then</font>

313
00:12:22,950 --> 00:12:26,310
that was not<font color="#CCCCCC"> something that they were</font>

314
00:12:23,940 --> 00:12:27,960
ready to do it just at that<font color="#E5E5E5"> moment but</font>

315
00:12:26,310 --> 00:12:31,319
all the multipath violations for<font color="#CCCCCC"> net 2</font>

316
00:12:27,960 --> 00:12:34,380
were<font color="#E5E5E5"> in fact fixed so I'm gonna do a</font>

317
00:12:31,320 --> 00:12:36,120
quick demo for you with<font color="#E5E5E5"> a network</font><font color="#CCCCCC"> that I</font>

318
00:12:34,380 --> 00:12:39,030
<font color="#E5E5E5">designed that is a sort of</font><font color="#CCCCCC"> analogue of</font>

319
00:12:36,120 --> 00:12:40,920
<font color="#E5E5E5">network</font><font color="#CCCCCC"> 1 I've written</font><font color="#E5E5E5"> Cisco</font>

320
00:12:39,030 --> 00:12:42,990
configuration files<font color="#CCCCCC"> for this example</font>

321
00:12:40,920 --> 00:12:52,290
<font color="#CCCCCC">network</font><font color="#E5E5E5"> and planted some bugs in there</font>

322
00:12:42,990 --> 00:12:53,520
<font color="#E5E5E5">so let's take a look so basically what</font>

323
00:12:52,290 --> 00:12:55,920
we don't<font color="#E5E5E5"> know we've recipt up the</font>

324
00:12:53,520 --> 00:12:57,900
<font color="#E5E5E5">configuration files and on that I've</font>

325
00:12:55,920 --> 00:12:59,219
written<font color="#E5E5E5"> for this network and uploaded</font>

326
00:12:57,900 --> 00:13:01,800
<font color="#E5E5E5">them and now what we're gonna do is</font>

327
00:12:59,220 --> 00:13:06,000
process<font color="#E5E5E5"> them</font><font color="#CCCCCC"> you can't see here</font><font color="#E5E5E5"> but down</font>

328
00:13:01,800 --> 00:13:07,290
here<font color="#E5E5E5"> it's parsing and converting that to</font>

329
00:13:06,000 --> 00:13:09,960
our unified format that we<font color="#CCCCCC"> use to</font>

330
00:13:07,290 --> 00:13:11,730
represent configurations<font color="#E5E5E5"> that's done and</font>

331
00:13:09,960 --> 00:13:15,270
now we're<font color="#E5E5E5"> going</font><font color="#CCCCCC"> to generate</font><font color="#E5E5E5"> the</font>

332
00:13:11,730 --> 00:13:16,410
forwarding tables for that<font color="#CCCCCC"> network now</font>

333
00:13:15,270 --> 00:13:18,180
in<font color="#CCCCCC"> addition</font><font color="#E5E5E5"> to be able to</font><font color="#CCCCCC"> check</font><font color="#E5E5E5"> in</font>

334
00:13:16,410 --> 00:13:20,370
forwarding properties on a single

335
00:13:18,180 --> 00:13:22,109
<font color="#CCCCCC">network we can also look at forwarding</font>

336
00:13:20,370 --> 00:13:24,780
properties related to<font color="#CCCCCC"> the</font><font color="#E5E5E5"> difference</font>

337
00:13:22,110 --> 00:13:28,290
between<font color="#E5E5E5"> two potential versions of a</font>

338
00:13:24,780 --> 00:13:29,640
network so once this is<font color="#CCCCCC"> done</font><font color="#E5E5E5"> I'm also</font>

339
00:13:28,290 --> 00:13:31,680
going to<font color="#E5E5E5"> generate</font><font color="#CCCCCC"> another data plane</font>

340
00:13:29,640 --> 00:13:32,400
which is excuse<font color="#E5E5E5"> me another asset</font>

341
00:13:31,680 --> 00:13:34,109
affording

342
00:13:32,400 --> 00:13:35,339
which is going<font color="#E5E5E5"> to be representative of</font>

343
00:13:34,110 --> 00:13:38,790
<font color="#E5E5E5">the same network but with one</font>

344
00:13:35,339 --> 00:13:39,990
configuration<font color="#CCCCCC"> file modified and then</font>

345
00:13:38,790 --> 00:13:42,839
after that we're going<font color="#E5E5E5"> to try to see</font>

346
00:13:39,990 --> 00:13:44,339
what<font color="#CCCCCC"> the</font><font color="#E5E5E5"> difference is in</font><font color="#CCCCCC"> reach ability</font>

347
00:13:42,839 --> 00:13:46,860
<font color="#E5E5E5">between</font><font color="#CCCCCC"> those two versions</font><font color="#E5E5E5"> of the</font>

348
00:13:44,339 --> 00:13:49,830
network<font color="#E5E5E5"> so the first one is</font><font color="#CCCCCC"> done now</font>

349
00:13:46,860 --> 00:13:51,510
let's<font color="#E5E5E5"> do the second one and while that's</font>

350
00:13:49,830 --> 00:13:53,360
running<font color="#E5E5E5"> let me just show you some of the</font>

351
00:13:51,510 --> 00:13:56,850
configuration files<font color="#E5E5E5"> so you get an idea</font>

352
00:13:53,360 --> 00:13:59,760
<font color="#CCCCCC">of what</font><font color="#E5E5E5"> this all</font><font color="#CCCCCC"> looks like</font><font color="#E5E5E5"> oh I'm sorry</font>

353
00:13:56,850 --> 00:14:02,760
<font color="#E5E5E5">one</font><font color="#CCCCCC"> moment alright</font><font color="#E5E5E5"> so here's the network</font>

354
00:13:59,760 --> 00:14:05,550
<font color="#E5E5E5">that we're actually analyzing</font><font color="#CCCCCC"> there</font><font color="#E5E5E5"> are</font>

355
00:14:02,760 --> 00:14:07,350
<font color="#E5E5E5">as</font><font color="#CCCCCC"> a tier of border routers which is</font>

356
00:14:05,550 --> 00:14:09,329
connected to a tier of core routers<font color="#CCCCCC"> that</font>

357
00:14:07,350 --> 00:14:10,830
serve as route reflectors<font color="#E5E5E5"> which are</font>

358
00:14:09,330 --> 00:14:12,839
connected<font color="#CCCCCC"> to</font><font color="#E5E5E5"> the distribution layer and</font>

359
00:14:10,830 --> 00:14:14,520
this distribution layer appears with

360
00:14:12,839 --> 00:14:15,660
individual<font color="#CCCCCC"> academic departments</font><font color="#E5E5E5"> so in</font>

361
00:14:14,520 --> 00:14:19,050
<font color="#E5E5E5">this</font><font color="#CCCCCC"> example there's just one department</font>

362
00:14:15,660 --> 00:14:21,959
<font color="#CCCCCC">and one</font><font color="#E5E5E5"> host behind it</font><font color="#CCCCCC"> and also there's</font>

363
00:14:19,050 --> 00:14:23,130
two upstream ISPs<font color="#E5E5E5"> that are separate</font>

364
00:14:21,960 --> 00:14:27,450
<font color="#CCCCCC">autonomous systems that this</font><font color="#E5E5E5"> network</font>

365
00:14:23,130 --> 00:14:31,529
peers with so let's go<font color="#CCCCCC"> back and see if</font>

366
00:14:27,450 --> 00:14:32,790
it's<font color="#E5E5E5"> done it appears that it</font><font color="#CCCCCC"> is so let's</font>

367
00:14:31,529 --> 00:14:34,380
take a look at what<font color="#CCCCCC"> has actually</font>

368
00:14:32,790 --> 00:14:36,599
<font color="#CCCCCC">happened so</font><font color="#E5E5E5"> far</font><font color="#CCCCCC"> so right now we're</font>

369
00:14:34,380 --> 00:14:40,110
<font color="#CCCCCC">checking</font><font color="#E5E5E5"> for parse errors and if you</font>

370
00:14:36,600 --> 00:14:43,529
look on the right you see<font color="#CCCCCC"> that there are</font>

371
00:14:40,110 --> 00:14:48,770
<font color="#CCCCCC">none so let's move on to</font><font color="#E5E5E5"> another simple</font>

372
00:14:43,529 --> 00:14:48,770
checklist<font color="#CCCCCC"> oh boy excuse me</font>

373
00:14:51,910 --> 00:14:57,100
sorry this<font color="#E5E5E5"> uh UI is very fragile if you</font>

374
00:14:54,850 --> 00:15:00,280
type<font color="#CCCCCC"> something in</font><font color="#E5E5E5"> the box if it comes</font>

375
00:14:57,100 --> 00:15:02,970
very<font color="#E5E5E5"> hard to show anything there excuse</font>

376
00:15:00,280 --> 00:15:02,970
me one second

377
00:15:03,450 --> 00:15:12,040
should be able<font color="#E5E5E5"> to pick up where I left</font>

378
00:15:05,320 --> 00:15:14,920
off<font color="#CCCCCC"> anyway</font><font color="#E5E5E5"> that's all been processed</font><font color="#CCCCCC"> so</font>

379
00:15:12,040 --> 00:15:19,990
now we can move on to analyzing<font color="#CCCCCC"> the</font><font color="#E5E5E5"> the</font>

380
00:15:14,920 --> 00:15:23,170
<font color="#E5E5E5">forwarding planes so let's pick a</font>

381
00:15:19,990 --> 00:15:26,830
<font color="#E5E5E5">question to ask so for this network</font><font color="#CCCCCC"> you</font>

382
00:15:23,170 --> 00:15:30,130
may want to<font color="#E5E5E5"> know whether IP are reused</font>

383
00:15:26,830 --> 00:15:38,800
<font color="#CCCCCC">on different interfaces</font><font color="#E5E5E5"> so we can ask</font>

384
00:15:30,130 --> 00:15:40,660
this question<font color="#E5E5E5"> and see the results</font><font color="#CCCCCC"> so if</font>

385
00:15:38,800 --> 00:15:42,520
you take<font color="#E5E5E5"> a look here</font><font color="#CCCCCC"> what it's saying is</font>

386
00:15:40,660 --> 00:15:43,750
<font color="#CCCCCC">that on a s2 board or two which is one</font>

387
00:15:42,520 --> 00:15:46,480
of<font color="#E5E5E5"> the border routers I showed you</font>

388
00:15:43,750 --> 00:15:49,570
interface loopback<font color="#E5E5E5"> zero there is</font><font color="#CCCCCC"> an IP</font>

389
00:15:46,480 --> 00:15:52,330
<font color="#CCCCCC">assignment of two one one two</font><font color="#E5E5E5"> and that</font>

390
00:15:49,570 --> 00:15:55,600
same if he IP is also assigned to a s to

391
00:15:52,330 --> 00:15:56,980
host one loopback 0 which is<font color="#E5E5E5"> the host at</font>

392
00:15:55,600 --> 00:16:04,420
the<font color="#E5E5E5"> very top</font><font color="#CCCCCC"> of the</font><font color="#E5E5E5"> picture I showed</font><font color="#CCCCCC"> you</font>

393
00:15:56,980 --> 00:16:10,330
<font color="#E5E5E5">earlier over here we may also want to</font>

394
00:16:04,420 --> 00:16:14,829
check<font color="#CCCCCC"> to see</font><font color="#E5E5E5"> whether</font><font color="#CCCCCC"> OSPF contains all</font>

395
00:16:10,330 --> 00:16:17,310
of the loopback networks so let's check

396
00:16:14,830 --> 00:16:17,310
<font color="#CCCCCC">that</font><font color="#E5E5E5"> for that</font>

397
00:16:21,780 --> 00:16:27,600
so it detected two violations<font color="#CCCCCC"> here the</font>

398
00:16:25,140 --> 00:16:30,600
internal autonomous system at the top<font color="#CCCCCC"> is</font>

399
00:16:27,600 --> 00:16:34,410
<font color="#CCCCCC">to depth one and a s to host one are not</font>

400
00:16:30,600 --> 00:16:41,910
actually exporting loop x0 into<font color="#CCCCCC"> OSPF</font><font color="#E5E5E5"> so</font>

401
00:16:34,410 --> 00:16:43,860
those<font color="#E5E5E5"> violations were detected</font><font color="#CCCCCC"> and we</font>

402
00:16:41,910 --> 00:16:46,350
can also check actual you know

403
00:16:43,860 --> 00:16:49,580
forwarding properties so the first one

404
00:16:46,350 --> 00:16:49,580
we're going<font color="#E5E5E5"> to check is I'm sorry</font>

405
00:17:00,890 --> 00:17:06,160
yeah<font color="#E5E5E5"> okay</font><font color="#CCCCCC"> I entered the wrong texts I</font>

406
00:17:03,500 --> 00:17:06,160
<font color="#E5E5E5">just need to start that over</font>

407
00:17:10,609 --> 00:17:15,229
so what this<font color="#E5E5E5"> is basically</font><font color="#CCCCCC"> doing</font><font color="#E5E5E5"> is</font>

408
00:17:12,949 --> 00:17:18,380
trying to<font color="#E5E5E5"> discover all the packets that</font>

409
00:17:15,230 --> 00:17:19,909
might violate multipath consistency and

410
00:17:18,380 --> 00:17:23,539
<font color="#E5E5E5">then afterwards it figures out what</font>

411
00:17:19,909 --> 00:17:27,490
would<font color="#CCCCCC"> happen to those packets for some</font>

412
00:17:23,539 --> 00:17:27,490
samples<font color="#E5E5E5"> that it gives us</font>

413
00:17:32,760 --> 00:17:41,060
usually quicker<font color="#CCCCCC"> there we go so the</font>

414
00:17:36,300 --> 00:17:41,060
output<font color="#CCCCCC"> is shown on the right</font><font color="#E5E5E5"> here</font>

415
00:17:42,710 --> 00:17:48,270
I'll just pick one particular packet

416
00:17:46,260 --> 00:17:50,580
<font color="#E5E5E5">that it found so it says that if</font><font color="#CCCCCC"> you</font>

417
00:17:48,270 --> 00:17:52,470
insert at a s to Department<font color="#E5E5E5"> one which is</font>

418
00:17:50,580 --> 00:17:57,120
the second one<font color="#CCCCCC"> from the top and the</font>

419
00:17:52,470 --> 00:17:59,790
picture here<font color="#CCCCCC"> a packet with</font><font color="#E5E5E5"> a destination</font>

420
00:17:57,120 --> 00:18:03,360
<font color="#CCCCCC">IP</font><font color="#E5E5E5"> of</font><font color="#CCCCCC"> 3</font><font color="#E5E5E5"> 0 to 2 which would be destined</font>

421
00:17:59,790 --> 00:18:05,280
for<font color="#CCCCCC"> that is</font><font color="#E5E5E5"> P on the right in the bottom</font>

422
00:18:03,360 --> 00:18:08,070
<font color="#E5E5E5">of the picture and if the</font><font color="#CCCCCC"> destination</font>

423
00:18:05,280 --> 00:18:11,490
port on that packet<font color="#E5E5E5"> is telnet then these</font>

424
00:18:08,070 --> 00:18:15,720
<font color="#CCCCCC">are</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> four</font><font color="#E5E5E5"> different paths that that</font>

425
00:18:11,490 --> 00:18:17,280
packet<font color="#E5E5E5"> could take and the first path you</font>

426
00:18:15,720 --> 00:18:19,230
see<font color="#CCCCCC"> it starts at a</font><font color="#E5E5E5"> to Department one</font>

427
00:18:17,280 --> 00:18:21,030
goes through<font color="#E5E5E5"> this set of routers and</font>

428
00:18:19,230 --> 00:18:22,920
interfaces eventually reaches its

429
00:18:21,030 --> 00:18:25,080
destination<font color="#CCCCCC"> a is three core one and is</font>

430
00:18:22,920 --> 00:18:27,030
accepted<font color="#E5E5E5"> however if it takes a slightly</font>

431
00:18:25,080 --> 00:18:27,720
<font color="#E5E5E5">different path which exists because of</font>

432
00:18:27,030 --> 00:18:32,340
ecmt

433
00:18:27,720 --> 00:18:35,010
<font color="#E5E5E5">then it will go and be dropped at a s2</font>

434
00:18:32,340 --> 00:18:38,129
core<font color="#E5E5E5"> one because of the inbound</font><font color="#CCCCCC"> Akal</font>

435
00:18:35,010 --> 00:18:44,040
whose name is<font color="#CCCCCC"> locked tail net line 0</font>

436
00:18:38,130 --> 00:18:46,770
<font color="#CCCCCC">which is the first line</font><font color="#E5E5E5"> of that Akal so</font>

437
00:18:44,040 --> 00:18:51,030
now we can actually take a look<font color="#E5E5E5"> at</font><font color="#CCCCCC"> is</font>

438
00:18:46,770 --> 00:18:53,879
<font color="#CCCCCC">two core one</font><font color="#E5E5E5"> and in fact there</font><font color="#CCCCCC"> is an</font>

439
00:18:51,030 --> 00:18:56,129
echo there called block<font color="#E5E5E5"> telnet and this</font>

440
00:18:53,880 --> 00:19:01,800
line<font color="#E5E5E5"> just simply blocks down that so</font>

441
00:18:56,130 --> 00:19:03,570
that's confirmed<font color="#CCCCCC"> so now for the other</font>

442
00:19:01,800 --> 00:19:10,550
property let me<font color="#E5E5E5"> just get it started and</font>

443
00:19:03,570 --> 00:19:16,159
<font color="#E5E5E5">I'll discuss it so well that's running</font>

444
00:19:10,550 --> 00:19:18,870
there on this<font color="#E5E5E5"> s2 depth one router here</font>

445
00:19:16,160 --> 00:19:24,120
there is<font color="#CCCCCC"> a Knakal which I</font><font color="#E5E5E5"> will show you</font>

446
00:19:18,870 --> 00:19:26,189
<font color="#E5E5E5">in a second on</font><font color="#CCCCCC"> Fast Ethernet one zero</font>

447
00:19:24,120 --> 00:19:28,679
which is the<font color="#CCCCCC"> one pointing</font><font color="#E5E5E5"> up towards the</font>

448
00:19:26,190 --> 00:19:30,630
host there is an app called restrict

449
00:19:28,680 --> 00:19:32,820
host traffic in which is supposed<font color="#CCCCCC"> to</font>

450
00:19:30,630 --> 00:19:35,940
<font color="#E5E5E5">only allow traffic from you know above</font>

451
00:19:32,820 --> 00:19:37,649
in the incoming direction but the

452
00:19:35,940 --> 00:19:39,240
operator sees this and thinks well how

453
00:19:37,650 --> 00:19:40,170
<font color="#E5E5E5">come we're not</font><font color="#CCCCCC"> also restricting traffic</font>

454
00:19:39,240 --> 00:19:42,120
in the other direction

455
00:19:40,170 --> 00:19:45,499
and in fact<font color="#E5E5E5"> there</font><font color="#CCCCCC"> is an Akal</font><font color="#E5E5E5"> defined to</font>

456
00:19:42,120 --> 00:19:49,228
do just that<font color="#E5E5E5"> in this file</font>

457
00:19:45,499 --> 00:19:51,570
here<font color="#E5E5E5"> restrict</font><font color="#CCCCCC"> host traffic</font><font color="#E5E5E5"> out so to fix</font>

458
00:19:49,229 --> 00:19:53,340
<font color="#E5E5E5">this the operator makes an assignment</font><font color="#CCCCCC"> of</font>

459
00:19:51,570 --> 00:19:55,229
that<font color="#CCCCCC"> Akal in the outgoing direction on</font>

460
00:19:53,340 --> 00:20:05,779
<font color="#CCCCCC">that interface</font><font color="#E5E5E5"> and let's see what</font>

461
00:19:55,229 --> 00:20:05,779
happens<font color="#CCCCCC"> so we see on the right</font><font color="#E5E5E5"> here now</font>

462
00:20:09,950 --> 00:20:15,539
is<font color="#E5E5E5"> that there's in the original scenario</font>

463
00:20:13,889 --> 00:20:17,820
with<font color="#CCCCCC"> the rookin figs that</font><font color="#E5E5E5"> are unmodified</font>

464
00:20:15,539 --> 00:20:20,099
there's a packet<font color="#E5E5E5"> that could be sent from</font>

465
00:20:17,820 --> 00:20:23,249
a s1 border one which is the from the

466
00:20:20,099 --> 00:20:26,399
<font color="#CCCCCC">ISP on the left with the destination</font><font color="#E5E5E5"> IP</font>

467
00:20:23,249 --> 00:20:26,879
shown here<font color="#CCCCCC"> that destination</font><font color="#E5E5E5"> IP is for</font>

468
00:20:26,399 --> 00:20:29,639
the<font color="#E5E5E5"> host</font>

469
00:20:26,879 --> 00:20:32,939
at<font color="#E5E5E5"> the very</font><font color="#CCCCCC"> top and in the original</font>

470
00:20:29,639 --> 00:20:34,559
scenario<font color="#E5E5E5"> that packet will be accepted no</font>

471
00:20:32,940 --> 00:20:38,849
<font color="#E5E5E5">matter which of the equal cost paths</font>

472
00:20:34,559 --> 00:20:40,080
that<font color="#E5E5E5"> it takes now in the second scenario</font>

473
00:20:38,849 --> 00:20:42,239
where we've modified one of the

474
00:20:40,080 --> 00:20:45,149
configuration files<font color="#E5E5E5"> we see that in each</font>

475
00:20:42,239 --> 00:20:48,330
situation<font color="#CCCCCC"> it gets to a s2 Department</font><font color="#E5E5E5"> one</font>

476
00:20:45,149 --> 00:20:50,008
and then is dropped<font color="#E5E5E5"> because</font><font color="#CCCCCC"> of an</font><font color="#E5E5E5"> AK</font>

477
00:20:48,330 --> 00:20:54,330
<font color="#E5E5E5">Allah called really restrict host</font>

478
00:20:50,009 --> 00:20:56,309
traffic<font color="#E5E5E5"> in line one</font><font color="#CCCCCC"> of that</font><font color="#E5E5E5"> act</font><font color="#CCCCCC"> so the</font>

479
00:20:54,330 --> 00:20:59,129
problem here<font color="#CCCCCC"> is that the operator</font>

480
00:20:56,309 --> 00:21:02,609
actually<font color="#E5E5E5"> at a typo when they assign this</font>

481
00:20:59,129 --> 00:21:03,869
<font color="#E5E5E5">Akal which is perfectly feasible in</font>

482
00:21:02,609 --> 00:21:05,849
practice<font color="#E5E5E5"> instead of assigning the</font>

483
00:21:03,869 --> 00:21:08,039
outgoing<font color="#CCCCCC"> Apple</font><font color="#E5E5E5"> they assign the incoming</font>

484
00:21:05,849 --> 00:21:10,200
one and so now what happens is all

485
00:21:08,039 --> 00:21:14,549
traffic<font color="#E5E5E5"> to</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> to any host in that</font>

486
00:21:10,200 --> 00:21:17,690
department<font color="#E5E5E5"> ends up getting dropped so</font>

487
00:21:14,549 --> 00:21:17,690
that concludes the<font color="#E5E5E5"> demo</font>

488
00:21:21,800 --> 00:21:27,860
and the presentation<font color="#E5E5E5"> so we have a survey</font>

489
00:21:25,310 --> 00:21:29,480
that we would like<font color="#E5E5E5"> you all to</font><font color="#CCCCCC"> take if</font>

490
00:21:27,860 --> 00:21:33,379
you operate networks because we want to

491
00:21:29,480 --> 00:21:35,510
<font color="#E5E5E5">add feature support for that people</font>

492
00:21:33,380 --> 00:21:37,040
actually<font color="#E5E5E5"> use so please</font><font color="#CCCCCC"> go online and</font>

493
00:21:35,510 --> 00:21:39,950
take it it should only<font color="#E5E5E5"> take</font><font color="#CCCCCC"> about 10-15</font>

494
00:21:37,040 --> 00:21:42,889
<font color="#CCCCCC">minutes and if you have any questions</font>

495
00:21:39,950 --> 00:21:46,690
feel free to email me at<font color="#E5E5E5"> re</font><font color="#CCCCCC"> Fogel let</font>

496
00:21:42,890 --> 00:21:46,690
you see you later I<font color="#CCCCCC"> lead you thank you</font>

497
00:21:53,740 --> 00:21:58,840
we have<font color="#E5E5E5"> time for questions in the room</font>

498
00:21:56,390 --> 00:22:02,750
and we have<font color="#E5E5E5"> questions in the room</font>

499
00:21:58,840 --> 00:22:06,260
good morning Matt<font color="#CCCCCC"> PTAC Yahoo</font><font color="#E5E5E5"> so I saw</font>

500
00:22:02,750 --> 00:22:15,560
like cool ipv4 addresses<font color="#E5E5E5"> does this</font><font color="#CCCCCC"> grok</font>

501
00:22:06,260 --> 00:22:17,450
ipv6 does it support<font color="#E5E5E5"> v6</font><font color="#CCCCCC"> we have parsing</font>

502
00:22:15,560 --> 00:22:20,360
support but because none of the networks

503
00:22:17,450 --> 00:22:23,300
that we<font color="#CCCCCC"> analyze used it in any real</font>

504
00:22:20,360 --> 00:22:25,310
capacity it's not<font color="#E5E5E5"> supported yet but I'm</font>

505
00:22:23,300 --> 00:22:27,470
just sure<font color="#CCCCCC"> in fact we talked to several</font>

506
00:22:25,310 --> 00:22:28,760
<font color="#E5E5E5">operators here already and I've asked</font>

507
00:22:27,470 --> 00:22:33,670
that<font color="#E5E5E5"> very</font><font color="#CCCCCC"> same question</font><font color="#E5E5E5"> so that'll be a</font>

508
00:22:28,760 --> 00:22:35,780
top<font color="#CCCCCC"> priority of</font><font color="#E5E5E5"> feature thank you so</font>

509
00:22:33,670 --> 00:22:39,410
just<font color="#E5E5E5"> a quick</font><font color="#CCCCCC"> follow-up san either</font>

510
00:22:35,780 --> 00:22:42,590
<font color="#CCCCCC">microsoft nor UCLA or using ipv6</font><font color="#E5E5E5"> what's</font>

511
00:22:39,410 --> 00:22:43,580
that<font color="#CCCCCC"> I think it question was I mean I'm</font>

512
00:22:42,590 --> 00:22:50,689
<font color="#CCCCCC">pretty sure they are aren't</font><font color="#E5E5E5"> they</font>

513
00:22:43,580 --> 00:22:53,179
<font color="#CCCCCC">I think the question</font><font color="#E5E5E5"> was yes</font><font color="#CCCCCC"> I support</font>

514
00:22:50,690 --> 00:22:58,340
v6 question mark or how do<font color="#E5E5E5"> you know I</font>

515
00:22:53,180 --> 00:23:00,410
analyzed UCLA well I did that can't tell

516
00:22:58,340 --> 00:23:01,550
you anything<font color="#CCCCCC"> about that that that</font>

517
00:23:00,410 --> 00:23:04,160
network that<font color="#CCCCCC"> you displayed looked an</font>

518
00:23:01,550 --> 00:23:07,000
awful lot like<font color="#E5E5E5"> UCLA's Network</font>

519
00:23:04,160 --> 00:23:10,610
I don't know what you're talking about

520
00:23:07,000 --> 00:23:12,440
<font color="#CCCCCC">right</font><font color="#E5E5E5"> any resemblance to characters and</font>

521
00:23:10,610 --> 00:23:15,799
networks living or dead<font color="#E5E5E5"> purely</font>

522
00:23:12,440 --> 00:23:20,450
coincidental hi<font color="#CCCCCC"> Tiffany</font><font color="#E5E5E5"> plans to support</font>

523
00:23:15,799 --> 00:23:24,679
<font color="#E5E5E5">XR and is is</font><font color="#CCCCCC"> yeah actually we just</font><font color="#E5E5E5"> added</font>

524
00:23:20,450 --> 00:23:27,410
<font color="#CCCCCC">parsing support for XR a couple months</font>

525
00:23:24,679 --> 00:23:29,809
<font color="#E5E5E5">back</font><font color="#CCCCCC"> so there is some basic stuff</font>

526
00:23:27,410 --> 00:23:31,640
generally whenever<font color="#E5E5E5"> we look at a new</font>

527
00:23:29,809 --> 00:23:34,309
network<font color="#E5E5E5"> we we have to update the parser</font>

528
00:23:31,640 --> 00:23:36,169
<font color="#E5E5E5">just because of the way different</font>

529
00:23:34,309 --> 00:23:37,820
constructs are used and<font color="#E5E5E5"> people use</font>

530
00:23:36,169 --> 00:23:40,580
<font color="#E5E5E5">different features</font><font color="#CCCCCC"> but yeah the basic</font>

531
00:23:37,820 --> 00:23:45,590
<font color="#E5E5E5">support is there I believe for</font><font color="#CCCCCC"> iOS as</font>

532
00:23:40,580 --> 00:23:48,139
well<font color="#E5E5E5"> use</font><font color="#CCCCCC"> it for XR right is is</font><font color="#E5E5E5"> as</font>

533
00:23:45,590 --> 00:23:49,879
opposed to exclusively<font color="#CCCCCC"> OSPF</font><font color="#E5E5E5"> oh is</font><font color="#CCCCCC"> I yes</font>

534
00:23:48,140 --> 00:23:52,580
yeah there is support<font color="#E5E5E5"> for iOS is cool</font>

535
00:23:49,880 --> 00:23:54,530
<font color="#E5E5E5">thanks all right so it's a little boo me</font>

536
00:23:52,580 --> 00:23:55,189
up here<font color="#E5E5E5"> with some when things come in</font>

537
00:23:54,530 --> 00:23:57,889
from the audience

538
00:23:55,190 --> 00:23:59,240
<font color="#CCCCCC">it's the patience</font><font color="#E5E5E5"> is appreciated</font><font color="#CCCCCC"> it's</font>

539
00:23:57,890 --> 00:24:03,909
not synchronized so I just<font color="#E5E5E5"> hear</font>

540
00:23:59,240 --> 00:24:08,260
<font color="#CCCCCC">everything like any other questions okay</font>

541
00:24:03,909 --> 00:24:08,260
<font color="#CCCCCC">then thanks very</font><font color="#E5E5E5"> much sorry</font>

