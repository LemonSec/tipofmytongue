1
00:00:00,140 --> 00:00:04,770
<font color="#E5E5E5">okay let's get started good afternoon</font>

2
00:00:02,730 --> 00:00:06,869
everybody virtual<font color="#E5E5E5"> Mahajan from the</font>

3
00:00:04,770 --> 00:00:08,219
University of Washington and like sue

4
00:00:06,870 --> 00:00:09,660
said I'm<font color="#E5E5E5"> going to talk about a new tool</font>

5
00:00:08,220 --> 00:00:11,250
we've developed at the University of

6
00:00:09,660 --> 00:00:13,889
Washington to locate performance

7
00:00:11,250 --> 00:00:15,809
problems along internet paths so let me

8
00:00:13,889 --> 00:00:18,539
<font color="#CCCCCC">start</font><font color="#E5E5E5"> my talk with a very simple</font>

9
00:00:15,809 --> 00:00:20,070
<font color="#E5E5E5">quotient if given a problem path let's</font>

10
00:00:18,539 --> 00:00:22,199
say from that laptop to that server

11
00:00:20,070 --> 00:00:24,090
looking box over there and I'm<font color="#E5E5E5"> talking</font>

12
00:00:22,199 --> 00:00:26,220
about problems such as packet loss hi

13
00:00:24,090 --> 00:00:28,109
<font color="#E5E5E5">queueing or significant reordering along</font>

14
00:00:26,220 --> 00:00:30,390
the path what would you do to figure out

15
00:00:28,109 --> 00:00:33,270
where exactly<font color="#E5E5E5"> along that path the</font>

16
00:00:30,390 --> 00:00:35,010
problem is<font color="#E5E5E5"> I'll come to the limitations</font>

17
00:00:33,270 --> 00:00:37,260
of existing possible tools that you

18
00:00:35,010 --> 00:00:38,849
might<font color="#CCCCCC"> use and what and what the problems</font>

19
00:00:37,260 --> 00:00:40,530
it those<font color="#CCCCCC"> are but you might call your</font>

20
00:00:38,850 --> 00:00:41,520
provider ISP if you have one and<font color="#CCCCCC"> you</font>

21
00:00:40,530 --> 00:00:43,649
know what they're going to say the

22
00:00:41,520 --> 00:00:44,910
<font color="#E5E5E5">problem is elsewhere and beyond that you</font>

23
00:00:43,649 --> 00:00:47,579
have no way of figuring out where the

24
00:00:44,910 --> 00:00:49,288
problem<font color="#CCCCCC"> is exactly along the path so I'm</font>

25
00:00:47,579 --> 00:00:50,850
<font color="#E5E5E5">going to try</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> fix this situation by</font>

26
00:00:49,289 --> 00:00:53,070
telling you guys about a new tool that

27
00:00:50,850 --> 00:00:56,129
<font color="#E5E5E5">we've written and that fixes some of</font>

28
00:00:53,070 --> 00:00:57,449
these problems here<font color="#E5E5E5"> so a very brief</font>

29
00:00:56,129 --> 00:00:59,699
slide on what the limitations of

30
00:00:57,449 --> 00:01:01,410
existing tools are the first is like if

31
00:00:59,699 --> 00:01:03,180
you are<font color="#CCCCCC"> an operator and not like an end</font>

32
00:01:01,410 --> 00:01:05,369
user like me you<font color="#E5E5E5"> might think of using</font>

33
00:01:03,180 --> 00:01:07,890
SNMP stats to figure out where the

34
00:01:05,369 --> 00:01:09,810
problem<font color="#CCCCCC"> is the problem with SNMP search</font>

35
00:01:07,890 --> 00:01:12,990
is that well you have access to only

36
00:01:09,810 --> 00:01:14,760
your router so you can collect<font color="#CCCCCC"> them only</font>

37
00:01:12,990 --> 00:01:16,770
<font color="#E5E5E5">inside your domain and if the problem is</font>

38
00:01:14,760 --> 00:01:18,689
elsewhere SNMP is not going to help<font color="#E5E5E5"> you</font>

39
00:01:16,770 --> 00:01:20,520
figure out where the problem<font color="#CCCCCC"> is and then</font>

40
00:01:18,689 --> 00:01:22,860
there are granularity issues as an MP

41
00:01:20,520 --> 00:01:24,840
you can tell where float packets from a

42
00:01:22,860 --> 00:01:26,820
particular flow are being lost or cute

43
00:01:24,840 --> 00:01:28,170
you can tell something in the aggregator

44
00:01:26,820 --> 00:01:30,750
so if the problem is really widespread

45
00:01:28,170 --> 00:01:33,350
and affecting everybody maybe SNMP can

46
00:01:30,750 --> 00:01:36,329
help you deal<font color="#CCCCCC"> with it but not otherwise</font>

47
00:01:33,350 --> 00:01:38,429
you might think of using pink and trace

48
00:01:36,329 --> 00:01:40,079
out like tools but the<font color="#E5E5E5"> problem with them</font>

49
00:01:38,430 --> 00:01:42,119
is they measure the round-trip path to

50
00:01:40,079 --> 00:01:44,729
the router and not the forward path so

51
00:01:42,119 --> 00:01:46,799
here's an example<font color="#CCCCCC"> path the same path has</font>

52
00:01:44,729 --> 00:01:49,470
on the last slide and the<font color="#E5E5E5"> problem is on</font>

53
00:01:46,799 --> 00:01:51,090
the second link and those<font color="#E5E5E5"> Wiggly arrows</font>

54
00:01:49,470 --> 00:01:53,158
on the<font color="#E5E5E5"> bottom basically show the path</font>

55
00:01:51,090 --> 00:01:55,619
back from the router which is not the

56
00:01:53,159 --> 00:01:58,049
<font color="#CCCCCC">same as path to the router which is like</font>

57
00:01:55,619 --> 00:02:00,030
the<font color="#E5E5E5"> common property of the internet that</font>

58
00:01:58,049 --> 00:02:01,950
paths to and from the destination might

59
00:02:00,030 --> 00:02:04,409
not be the same so what pink<font color="#E5E5E5"> does</font>

60
00:02:01,950 --> 00:02:06,360
suppose you're using a pink like tool to

61
00:02:04,409 --> 00:02:08,250
do a hop by hop localization of the

62
00:02:06,360 --> 00:02:10,229
problem so<font color="#E5E5E5"> you measure to the first</font>

63
00:02:08,250 --> 00:02:11,849
router find that the path is clean so

64
00:02:10,229 --> 00:02:12,710
the first<font color="#E5E5E5"> link along the path should</font><font color="#CCCCCC"> be</font>

65
00:02:11,849 --> 00:02:15,209
clean

66
00:02:12,710 --> 00:02:17,550
but now you measure to the second router

67
00:02:15,210 --> 00:02:19,440
the fact is the<font color="#E5E5E5"> forward path to the</font>

68
00:02:17,550 --> 00:02:22,500
second router is clean but the reverse

69
00:02:19,440 --> 00:02:24,270
unknown path has some problems on it so

70
00:02:22,500 --> 00:02:26,220
ping might basically make an<font color="#E5E5E5"> incorrect</font>

71
00:02:24,270 --> 00:02:28,050
inference here that the second link<font color="#E5E5E5"> is</font>

72
00:02:26,220 --> 00:02:29,790
lossy but in fact when in this

73
00:02:28,050 --> 00:02:32,670
<font color="#E5E5E5">particular path the third link is lossy</font>

74
00:02:29,790 --> 00:02:34,650
or some other problem along it so in

75
00:02:32,670 --> 00:02:36,209
summary<font color="#CCCCCC"> then the problems with ping and</font>

76
00:02:34,650 --> 00:02:37,980
traceroute like tools that measure

77
00:02:36,210 --> 00:02:39,660
round-trip paths through the routers is

78
00:02:37,980 --> 00:02:41,010
basically<font color="#CCCCCC"> that they conflate the</font>

79
00:02:39,660 --> 00:02:43,380
properties of the forward<font color="#E5E5E5"> and the</font>

80
00:02:41,010 --> 00:02:45,690
reverse path and this is kind of makes

81
00:02:43,380 --> 00:02:47,220
the fact that there's path asymmetry in

82
00:02:45,690 --> 00:02:48,840
them to internet it makes it worse

83
00:02:47,220 --> 00:02:49,890
<font color="#E5E5E5">because the reverse path is unknown and</font>

84
00:02:48,840 --> 00:02:53,280
you don't know what you're measuring

85
00:02:49,890 --> 00:02:55,410
when you use paying then so here's an

86
00:02:53,280 --> 00:02:57,540
overview of tulip so what to dip does

87
00:02:55,410 --> 00:02:59,549
<font color="#CCCCCC">it's localizes reordering</font><font color="#E5E5E5"> queueing a</font>

88
00:02:57,540 --> 00:03:01,799
loss along internal path it works just

89
00:02:59,550 --> 00:03:04,310
like pink and traceroute run it from a

90
00:03:01,800 --> 00:03:06,480
horse to any arbitrary IP address and

91
00:03:04,310 --> 00:03:07,950
here's how it works instead of measuring

92
00:03:06,480 --> 00:03:10,140
roundtree pass through the router it

93
00:03:07,950 --> 00:03:11,940
measures the forward path and how it

94
00:03:10,140 --> 00:03:13,320
matches the forward path only it without

95
00:03:11,940 --> 00:03:15,150
measuring the reverse path<font color="#CCCCCC"> I'll get</font><font color="#E5E5E5"> to</font>

96
00:03:13,320 --> 00:03:17,220
<font color="#CCCCCC">in a minute but it measures the forward</font>

97
00:03:15,150 --> 00:03:18,720
path to the router so if<font color="#CCCCCC"> I wanted to</font>

98
00:03:17,220 --> 00:03:21,240
<font color="#E5E5E5">know what's happening on the second link</font>

99
00:03:18,720 --> 00:03:22,980
I'll measure<font color="#CCCCCC"> the path to the second</font>

100
00:03:21,240 --> 00:03:25,380
router and the first order<font color="#E5E5E5"> and subtract</font>

101
00:03:22,980 --> 00:03:27,149
the property so if<font color="#CCCCCC"> I see so I mentioned</font>

102
00:03:25,380 --> 00:03:29,549
<font color="#CCCCCC">the forward path to the second daughter</font>

103
00:03:27,150 --> 00:03:31,230
and if<font color="#E5E5E5"> I see losses and I measure the</font>

104
00:03:29,550 --> 00:03:33,540
forward path to the first router where

105
00:03:31,230 --> 00:03:35,690
there are no losses i know the fault is

106
00:03:33,540 --> 00:03:37,920
probably on the second link here

107
00:03:35,690 --> 00:03:40,770
similarly<font color="#E5E5E5"> for the third link measure the</font>

108
00:03:37,920 --> 00:03:42,570
path to the<font color="#CCCCCC"> two the two</font><font color="#E5E5E5"> routers that</font>

109
00:03:40,770 --> 00:03:44,490
surround the<font color="#E5E5E5"> link only the forward path</font>

110
00:03:42,570 --> 00:03:46,829
mind you<font color="#E5E5E5"> and you know what's going</font><font color="#CCCCCC"> on</font>

111
00:03:44,490 --> 00:03:48,390
<font color="#E5E5E5">here so basically what you Lib does is</font>

112
00:03:46,830 --> 00:03:50,340
measure the forward path to the routers

113
00:03:48,390 --> 00:03:52,260
and uses that as a basic building block

114
00:03:50,340 --> 00:03:54,030
to figure out what's happening on the

115
00:03:52,260 --> 00:03:57,750
forward path from where it's running to

116
00:03:54,030 --> 00:03:58,950
an arbitrary destination so but and how

117
00:03:57,750 --> 00:04:01,560
it measures the forward path is

118
00:03:58,950 --> 00:04:03,450
basically it uses ICMP timestamps and IP

119
00:04:01,560 --> 00:04:04,680
identifiers to<font color="#E5E5E5"> figure out the paths and</font>

120
00:04:03,450 --> 00:04:08,130
I'm going to<font color="#E5E5E5"> talk about both of these</font>

121
00:04:04,680 --> 00:04:09,870
the next two slides so here's what tulip

122
00:04:08,130 --> 00:04:12,540
does for queuing along the forward path

123
00:04:09,870 --> 00:04:14,430
it chooses<font color="#E5E5E5"> ICMP timestamps to access the</font>

124
00:04:12,540 --> 00:04:17,370
router clock so to the router it sends

125
00:04:14,430 --> 00:04:19,170
an ICMP timestamp<font color="#CCCCCC"> request and gets back</font>

126
00:04:17,370 --> 00:04:21,060
<font color="#E5E5E5">a reply which is the routers log local</font>

127
00:04:19,170 --> 00:04:22,590
time this is not synchronized these

128
00:04:21,060 --> 00:04:25,440
clocks are not synchronized by any means

129
00:04:22,590 --> 00:04:26,909
like<font color="#E5E5E5"> the clock on</font><font color="#CCCCCC"> my post my</font><font color="#E5E5E5"> host</font>

130
00:04:25,440 --> 00:04:28,290
I'm running<font color="#CCCCCC"> to leap and there are not</font>

131
00:04:26,910 --> 00:04:30,750
synchronized but<font color="#E5E5E5"> thankfully we don't</font>

132
00:04:28,290 --> 00:04:32,100
need<font color="#CCCCCC"> synchronized</font><font color="#E5E5E5"> clocks at all for the</font>

133
00:04:30,750 --> 00:04:34,560
following reason that we are actually

134
00:04:32,100 --> 00:04:36,930
inferring<font color="#CCCCCC"> cueing from the variation in</font>

135
00:04:34,560 --> 00:04:38,610
<font color="#E5E5E5">the delay so all</font><font color="#CCCCCC"> I need</font><font color="#E5E5E5"> is like how much</font>

136
00:04:36,930 --> 00:04:40,410
the difference in the times my probes

137
00:04:38,610 --> 00:04:41,820
take to reach the rudder and which is

138
00:04:40,410 --> 00:04:43,050
basically just a simple counter

139
00:04:41,820 --> 00:04:45,650
implemented at the router and that's

140
00:04:43,050 --> 00:04:47,670
good<font color="#CCCCCC"> enough</font><font color="#E5E5E5"> to infer delay variation and</font>

141
00:04:45,650 --> 00:04:49,169
there's some amount of engineering

142
00:04:47,670 --> 00:04:51,450
required to make this work<font color="#CCCCCC"> we have to</font>

143
00:04:49,170 --> 00:04:54,000
calibrate the clocks at the rudder along

144
00:04:51,450 --> 00:04:55,530
<font color="#CCCCCC">with the other from the probing horse</font>

145
00:04:54,000 --> 00:04:57,150
basically because the router clock might

146
00:04:55,530 --> 00:04:58,739
be progressing at a different speed<font color="#E5E5E5"> and</font>

147
00:04:57,150 --> 00:05:00,270
then we have to<font color="#CCCCCC"> take into account the</font>

148
00:04:58,740 --> 00:05:02,100
<font color="#E5E5E5">daughter might also take some time</font>

149
00:05:00,270 --> 00:05:03,299
generating the response back so<font color="#E5E5E5"> after</font>

150
00:05:02,100 --> 00:05:05,220
you've dealt<font color="#CCCCCC"> with this level of</font>

151
00:05:03,300 --> 00:05:06,660
engineering what you have is basically

152
00:05:05,220 --> 00:05:08,520
one way delay variation to the router

153
00:05:06,660 --> 00:05:10,350
which is in most cases should be good

154
00:05:08,520 --> 00:05:14,310
<font color="#CCCCCC">enough to infer</font><font color="#E5E5E5"> queuing on the forward</font>

155
00:05:10,350 --> 00:05:16,170
path to the router now if you're going

156
00:05:14,310 --> 00:05:17,790
<font color="#E5E5E5">to pay attention to one slide in this</font>

157
00:05:16,170 --> 00:05:19,560
talk this is the one there's the coolest

158
00:05:17,790 --> 00:05:21,120
trick the one I very like measuring the

159
00:05:19,560 --> 00:05:22,980
loss on the forward path without being

160
00:05:21,120 --> 00:05:25,290
confused about what's happening<font color="#E5E5E5"> at the</font>

161
00:05:22,980 --> 00:05:27,840
reverse path so we use the IP identifier

162
00:05:25,290 --> 00:05:29,610
field here and I be identified field as

163
00:05:27,840 --> 00:05:32,909
most of us know it's basically a special

164
00:05:29,610 --> 00:05:34,590
field in the IP packets initially they

165
00:05:32,910 --> 00:05:35,970
were put<font color="#CCCCCC"> in to enable fragmentation and</font>

166
00:05:34,590 --> 00:05:38,310
detection of unique packets in the

167
00:05:35,970 --> 00:05:40,500
internet and in most routers and end

168
00:05:38,310 --> 00:05:43,230
hosts on the internet this<font color="#CCCCCC"> ipid</font><font color="#E5E5E5"> is</font>

169
00:05:40,500 --> 00:05:44,880
implemented as<font color="#E5E5E5"> a counter so keep in mind</font>

170
00:05:43,230 --> 00:05:45,990
we have<font color="#E5E5E5"> access to this one counter and</font>

171
00:05:44,880 --> 00:05:47,700
<font color="#CCCCCC">I'm going</font><font color="#E5E5E5"> to show you how we can use</font>

172
00:05:45,990 --> 00:05:50,250
this counter to infer loss on the

173
00:05:47,700 --> 00:05:52,229
forward path send three probes to Aurora

174
00:05:50,250 --> 00:05:53,790
let me call the the first and the third

175
00:05:52,230 --> 00:05:56,280
probe as the control<font color="#E5E5E5"> probe and the</font>

176
00:05:53,790 --> 00:05:58,500
<font color="#E5E5E5">middle</font><font color="#CCCCCC"> one as the</font><font color="#E5E5E5"> data probe and I'm</font>

177
00:05:56,280 --> 00:05:59,969
interested<font color="#CCCCCC"> in</font><font color="#E5E5E5"> measuring the loss only of</font>

178
00:05:58,500 --> 00:06:03,540
the data probe and not of the control

179
00:05:59,970 --> 00:06:06,090
probe if there<font color="#CCCCCC"> are</font><font color="#E5E5E5"> no loss is in any</font>

180
00:06:03,540 --> 00:06:07,740
direction what I get back is basically

181
00:06:06,090 --> 00:06:12,299
the IP identifiers that the router port

182
00:06:07,740 --> 00:06:14,610
sent so in this case ID<font color="#CCCCCC"> 1 I</font><font color="#E5E5E5"> ID ID plus 1</font>

183
00:06:12,300 --> 00:06:16,830
re plus to hear keep that the routers

184
00:06:14,610 --> 00:06:19,110
and end hosts they they generate a new

185
00:06:16,830 --> 00:06:21,659
ipid counter<font color="#E5E5E5"> only when they generate a</font>

186
00:06:19,110 --> 00:06:23,250
packet not when they forward so in most

187
00:06:21,660 --> 00:06:25,290
routers in the internet<font color="#E5E5E5"> this counter is</font>

188
00:06:23,250 --> 00:06:28,740
not<font color="#E5E5E5"> moving very fast it is</font><font color="#CCCCCC"> actually very</font>

189
00:06:25,290 --> 00:06:30,450
useful to get<font color="#E5E5E5"> this</font><font color="#CCCCCC"> thing going so</font>

190
00:06:28,740 --> 00:06:32,310
imagine now what happens if the data

191
00:06:30,450 --> 00:06:34,289
packet gets lost on the forward path and

192
00:06:32,310 --> 00:06:36,510
both the control probes actually reach

193
00:06:34,289 --> 00:06:38,219
the router so what you<font color="#E5E5E5"> get basically is</font>

194
00:06:36,510 --> 00:06:40,710
ID<font color="#E5E5E5"> and ID plus 1</font>

195
00:06:38,220 --> 00:06:42,510
so in this particular case unambiguously

196
00:06:40,710 --> 00:06:44,430
you know that the data packet was lost

197
00:06:42,510 --> 00:06:46,289
on the forward path because we<font color="#E5E5E5"> got</font>

198
00:06:44,430 --> 00:06:48,270
consecutive IP addys back hence the

199
00:06:46,290 --> 00:06:50,160
<font color="#CCCCCC">router could not have generated any</font>

200
00:06:48,270 --> 00:06:54,330
other packet in between generating ID

201
00:06:50,160 --> 00:06:56,700
and ID plus<font color="#CCCCCC"> one the problem is there</font>

202
00:06:54,330 --> 00:06:58,710
what if<font color="#E5E5E5"> we get what if we did not get a</font>

203
00:06:56,700 --> 00:07:00,930
response back to the data<font color="#E5E5E5"> packets but</font>

204
00:06:58,710 --> 00:07:02,280
only got back you know ID and ID plus<font color="#CCCCCC"> K</font>

205
00:07:00,930 --> 00:07:04,710
where<font color="#CCCCCC"> K is more than once</font>

206
00:07:02,280 --> 00:07:07,859
non-consecutive IP IDs this is a case

207
00:07:04,710 --> 00:07:09,840
where the direction of loss is basically

208
00:07:07,860 --> 00:07:11,880
ambiguous because we don't know whether

209
00:07:09,840 --> 00:07:13,560
this happened<font color="#E5E5E5"> and the fact that our</font>

210
00:07:11,880 --> 00:07:16,170
<font color="#E5E5E5">control probes did not reach the router</font>

211
00:07:13,560 --> 00:07:18,450
close enough in time or this<font color="#E5E5E5"> could have</font>

212
00:07:16,170 --> 00:07:21,450
happened<font color="#CCCCCC"> that the data probe actually</font>

213
00:07:18,450 --> 00:07:23,250
reached the router but did not but the

214
00:07:21,450 --> 00:07:25,020
response did not make it back so in this

215
00:07:23,250 --> 00:07:26,840
particular case tulip cannot tell in

216
00:07:25,020 --> 00:07:28,859
which<font color="#CCCCCC"> direction the packet was lost</font>

217
00:07:26,840 --> 00:07:31,590
fortunately this does not happen<font color="#E5E5E5"> that</font>

218
00:07:28,860 --> 00:07:34,260
often so so when this happens<font color="#CCCCCC"> its kind</font>

219
00:07:31,590 --> 00:07:35,760
<font color="#E5E5E5">of indicative of flu that the loss is on</font>

220
00:07:34,260 --> 00:07:38,760
the reverse path but it's still

221
00:07:35,760 --> 00:07:40,200
ambiguous but on the other hand when the

222
00:07:38,760 --> 00:07:42,060
loss actually happens with the forward

223
00:07:40,200 --> 00:07:44,400
path there is a case which happens often

224
00:07:42,060 --> 00:07:46,200
enough that you can tell the loss

225
00:07:44,400 --> 00:07:49,109
happened on the forward path and not the

226
00:07:46,200 --> 00:07:50,789
reverse and nothing went notice in my

227
00:07:49,110 --> 00:07:52,200
measurements was that the problem with

228
00:07:50,790 --> 00:07:53,640
measuring to order is you don't<font color="#E5E5E5"> know</font>

229
00:07:52,200 --> 00:07:55,590
<font color="#E5E5E5">what you are seeing especially</font><font color="#CCCCCC"> when</font>

230
00:07:53,640 --> 00:07:57,240
measuring losses is whether you<font color="#E5E5E5"> what</font>

231
00:07:55,590 --> 00:07:59,429
you're seeing is impact of rate limiting

232
00:07:57,240 --> 00:08:01,500
of responses of the router or you're

233
00:07:59,430 --> 00:08:03,360
actually seeing path level losses on

234
00:08:01,500 --> 00:08:04,740
there so where this three packet

235
00:08:03,360 --> 00:08:07,080
technique that you leap uses actually

236
00:08:04,740 --> 00:08:09,090
helps us if response rate limiting is

237
00:08:07,080 --> 00:08:10,770
being implemented at the router if one

238
00:08:09,090 --> 00:08:13,289
of the probes get lost the<font color="#E5E5E5"> probably the</font>

239
00:08:10,770 --> 00:08:14,789
<font color="#E5E5E5">other two would also or if in the second</font>

240
00:08:13,290 --> 00:08:16,410
probe the probe in which we're

241
00:08:14,790 --> 00:08:18,090
interested in gets lost the chances are

242
00:08:16,410 --> 00:08:19,710
<font color="#E5E5E5">the third will also get lost so a</font>

243
00:08:18,090 --> 00:08:21,510
control probe also gets lost in which

244
00:08:19,710 --> 00:08:23,520
case till it fails<font color="#E5E5E5"> to make an inference</font>

245
00:08:21,510 --> 00:08:25,530
but will not make an incorrect inference

246
00:08:23,520 --> 00:08:28,830
and confuse response rate limiting and

247
00:08:25,530 --> 00:08:30,150
loss on the forward path<font color="#CCCCCC"> okay now</font>

248
00:08:28,830 --> 00:08:31,919
<font color="#E5E5E5">they've told you in some detail</font><font color="#CCCCCC"> about</font>

249
00:08:30,150 --> 00:08:33,120
the losses and stuff there's a pop quiz

250
00:08:31,919 --> 00:08:35,098
for you you can keep working<font color="#E5E5E5"> while</font>

251
00:08:33,120 --> 00:08:36,360
listening to the talk and which I am NOT

252
00:08:35,099 --> 00:08:37,890
going to go into what is the basic

253
00:08:36,360 --> 00:08:40,260
building<font color="#E5E5E5"> block formation reordering</font>

254
00:08:37,890 --> 00:08:41,819
remember that we have ipid counters at

255
00:08:40,260 --> 00:08:43,140
the routers and we can use that to

256
00:08:41,820 --> 00:08:46,440
measure reordering<font color="#E5E5E5"> I'm going to leave</font>

257
00:08:43,140 --> 00:08:48,720
that one for you guys here<font color="#E5E5E5"> okay</font>

258
00:08:46,440 --> 00:08:49,970
implementation<font color="#E5E5E5"> tulip is implemented in</font>

259
00:08:48,720 --> 00:08:51,920
<font color="#E5E5E5">Ruby on top</font>

260
00:08:49,970 --> 00:08:53,000
script<font color="#CCCCCC"> route my colleague Neil spring</font>

261
00:08:51,920 --> 00:08:55,009
was here I think<font color="#CCCCCC"> to nannaogsigurd</font>

262
00:08:53,000 --> 00:08:57,980
talking about script route are very

263
00:08:55,009 --> 00:09:00,410
basic but flexible<font color="#E5E5E5"> internet measurement</font>

264
00:08:57,980 --> 00:09:03,250
tool and it runs on wherever script<font color="#E5E5E5"> out</font>

265
00:09:00,410 --> 00:09:06,560
to basically run linux freebsd and OS 10

266
00:09:03,250 --> 00:09:08,569
it runs in three phases it in the first

267
00:09:06,560 --> 00:09:10,849
phase given any destination to probe to

268
00:09:08,569 --> 00:09:12,949
it discovers routers along the path and

269
00:09:10,850 --> 00:09:14,240
the second phase it would test the

270
00:09:12,949 --> 00:09:16,699
routers which support for word pad

271
00:09:14,240 --> 00:09:19,009
diagnosis so not all rodders implement

272
00:09:16,699 --> 00:09:21,319
IP addys at counters similarly not all

273
00:09:19,009 --> 00:09:24,800
routers have ICMP timestamp requests

274
00:09:21,319 --> 00:09:26,509
turned on and then it measures the path

275
00:09:24,800 --> 00:09:30,859
to the<font color="#CCCCCC"> Saudis</font><font color="#E5E5E5"> and at the end of its</font>

276
00:09:26,509 --> 00:09:32,449
probing in period it returns properties

277
00:09:30,860 --> 00:09:37,730
are both the one way and the forward<font color="#E5E5E5"> and</font>

278
00:09:32,449 --> 00:09:39,529
<font color="#CCCCCC">the</font><font color="#E5E5E5"> ranch repairs to the routers here's</font>

279
00:09:37,730 --> 00:09:41,470
a sample output from the tool from those

280
00:09:39,529 --> 00:09:43,550
of you<font color="#E5E5E5"> can actually</font><font color="#CCCCCC"> read that slide but</font>

281
00:09:41,470 --> 00:09:45,860
let me just say it so<font color="#CCCCCC"> basically</font><font color="#E5E5E5"> I</font>

282
00:09:43,550 --> 00:09:47,599
measured from I logged<font color="#E5E5E5"> into my machine</font>

283
00:09:45,860 --> 00:09:49,910
at University of Washington and measure

284
00:09:47,600 --> 00:09:51,259
to my laptop over here so what this<font color="#CCCCCC"> is</font>

285
00:09:49,910 --> 00:09:53,089
showing like the first<font color="#E5E5E5"> column is</font>

286
00:09:51,259 --> 00:09:54,410
basically the<font color="#E5E5E5"> name of the router very</font>

287
00:09:53,089 --> 00:09:56,410
coherent naming scheme if you see you

288
00:09:54,410 --> 00:09:58,490
can tell where the path is going and

289
00:09:56,410 --> 00:10:00,709
this is the IP here this is the

290
00:09:58,490 --> 00:10:02,959
<font color="#E5E5E5">round-trip loss</font><font color="#CCCCCC"> seen along every hop</font>

291
00:10:00,709 --> 00:10:05,149
from the probing host so there's pretty

292
00:10:02,959 --> 00:10:06,878
much no loss here no loss on the forward

293
00:10:05,149 --> 00:10:10,610
path and knowing the round-trip path and

294
00:10:06,879 --> 00:10:12,470
CEO is basically how many consecutive IP

295
00:10:10,610 --> 00:10:14,209
IDs did<font color="#E5E5E5"> I get back which is kind of a</font>

296
00:10:12,470 --> 00:10:16,069
measure of how<font color="#E5E5E5"> fast the routers IP ID</font>

297
00:10:14,209 --> 00:10:18,138
contrary is moving or whether or not we

298
00:10:16,069 --> 00:10:20,019
can<font color="#CCCCCC"> actually get you leap going with</font>

299
00:10:18,139 --> 00:10:22,879
<font color="#CCCCCC">that particular router over there and</font>

300
00:10:20,019 --> 00:10:25,040
reordering app shows<font color="#E5E5E5"> our reordering</font>

301
00:10:22,879 --> 00:10:26,959
because the correctness in some sense of

302
00:10:25,040 --> 00:10:28,430
the<font color="#E5E5E5"> lost probe depends on packets</font><font color="#CCCCCC"> not</font>

303
00:10:26,959 --> 00:10:30,018
being reordered there were some

304
00:10:28,430 --> 00:10:31,670
assumptions in the way we<font color="#CCCCCC"> send triplets</font>

305
00:10:30,019 --> 00:10:33,680
that<font color="#E5E5E5"> package get to the</font><font color="#CCCCCC"> Rotter in</font><font color="#E5E5E5"> the</font>

306
00:10:31,670 --> 00:10:35,449
same order and if reordering happens to

307
00:10:33,680 --> 00:10:38,930
leap can detect that instead of<font color="#CCCCCC"> being</font>

308
00:10:35,449 --> 00:10:41,959
fooled by that completely so so that's

309
00:10:38,930 --> 00:10:44,750
one output the lines where'd we do not

310
00:10:41,959 --> 00:10:46,069
have any forward column printed is

311
00:10:44,750 --> 00:10:47,990
basically<font color="#CCCCCC"> daughter's we cannot measure</font>

312
00:10:46,069 --> 00:10:50,269
the forward path to because we could not

313
00:10:47,990 --> 00:10:52,250
get consecutive IP<font color="#E5E5E5"> IDs from them or they</font>

314
00:10:50,269 --> 00:10:53,660
could did<font color="#CCCCCC"> not return the probes we send</font>

315
00:10:52,250 --> 00:10:56,029
them so they are fair number of routers

316
00:10:53,660 --> 00:10:57,529
that don't let us measure the forward

317
00:10:56,029 --> 00:10:59,389
path to them but a<font color="#E5E5E5"> lot of them actually</font>

318
00:10:57,529 --> 00:11:01,939
do so<font color="#E5E5E5"> 18t is pretty much switched off</font>

319
00:10:59,389 --> 00:11:03,810
here and then attn s not sure what that

320
00:11:01,939 --> 00:11:05,520
is but we can measure<font color="#E5E5E5"> for</font>

321
00:11:03,810 --> 00:11:06,810
path here and here and this part is

322
00:11:05,520 --> 00:11:08,699
pretty<font color="#E5E5E5"> much clean except when you come</font>

323
00:11:06,810 --> 00:11:11,489
towards the end<font color="#E5E5E5"> of it over here there's</font>

324
00:11:08,700 --> 00:11:12,840
actually like loss on the last<font color="#E5E5E5"> hop to my</font>

325
00:11:11,490 --> 00:11:14,970
daughter this is<font color="#E5E5E5"> probably the wireless</font>

326
00:11:12,840 --> 00:11:17,070
hub so unsurprisingly you know we see

327
00:11:14,970 --> 00:11:18,690
about 1.5 percent loss over here in the

328
00:11:17,070 --> 00:11:21,600
round trip path and<font color="#E5E5E5"> not much in the</font>

329
00:11:18,690 --> 00:11:23,190
forward<font color="#E5E5E5"> I have to remind you the</font>

330
00:11:21,600 --> 00:11:24,779
<font color="#CCCCCC">round-trip blah blah straight the way to</font>

331
00:11:23,190 --> 00:11:26,070
leave measures could be<font color="#E5E5E5"> both on the</font>

332
00:11:24,779 --> 00:11:28,380
round trip<font color="#E5E5E5"> or the forward because only</font>

333
00:11:26,070 --> 00:11:29,520
the forward<font color="#CCCCCC"> Direction is unambiguous but</font>

334
00:11:28,380 --> 00:11:31,110
there<font color="#E5E5E5"> was a very interesting thing when</font>

335
00:11:29,520 --> 00:11:33,390
I was<font color="#CCCCCC"> actually running this tool this</font>

336
00:11:31,110 --> 00:11:35,610
morning I started running this tool when

337
00:11:33,390 --> 00:11:37,410
the session was not on and I was seeing

338
00:11:35,610 --> 00:11:39,450
very few loss rates as soon as the

339
00:11:37,410 --> 00:11:41,850
session turned on the loss rate got high

340
00:11:39,450 --> 00:11:43,620
on this link like people were<font color="#E5E5E5"> working on</font>

341
00:11:41,850 --> 00:11:46,620
the laptops more during the talks than

342
00:11:43,620 --> 00:11:50,790
than outside in the session when

343
00:11:46,620 --> 00:11:52,650
<font color="#CCCCCC">everything is</font><font color="#E5E5E5"> open okay this is just</font>

344
00:11:50,790 --> 00:11:54,719
putting a pretty picture here just

345
00:11:52,650 --> 00:11:56,699
because I like this picture a very

346
00:11:54,720 --> 00:11:59,279
similar<font color="#E5E5E5"> experiment was showing it's from</font>

347
00:11:56,700 --> 00:12:01,170
a desktop in CL<font color="#E5E5E5"> I measured to all the</font>

348
00:11:59,279 --> 00:12:03,089
machines that host planet labs this is

349
00:12:01,170 --> 00:12:04,800
this experiments done bout three or four

350
00:12:03,089 --> 00:12:06,060
<font color="#CCCCCC">months back all the machines that</font><font color="#E5E5E5"> was</font>

351
00:12:04,800 --> 00:12:08,459
<font color="#E5E5E5">planned lab and what I'm showing on the</font>

352
00:12:06,060 --> 00:12:11,689
slide<font color="#CCCCCC"> here is the paths to various</font>

353
00:12:08,460 --> 00:12:15,000
<font color="#E5E5E5">places where I actually saw losses and</font>

354
00:12:11,690 --> 00:12:17,280
the roughly the X is<font color="#E5E5E5"> there correspond to</font>

355
00:12:15,000 --> 00:12:19,290
links where the losses were engine also

356
00:12:17,280 --> 00:12:20,939
we see and these were mainly access

357
00:12:19,290 --> 00:12:22,860
links of these universities<font color="#E5E5E5"> or something</font>

358
00:12:20,940 --> 00:12:24,930
so going into<font color="#E5E5E5"> Stanford for instance</font>

359
00:12:22,860 --> 00:12:27,630
there was some malice in their access

360
00:12:24,930 --> 00:12:30,510
link to the ISP and which probably is

361
00:12:27,630 --> 00:12:35,339
Abilene and similarly losses for while

362
00:12:30,510 --> 00:12:36,930
going to other places<font color="#E5E5E5"> and stuff and so I</font>

363
00:12:35,339 --> 00:12:38,820
pointed<font color="#E5E5E5"> out in the beginning that tools</font>

364
00:12:36,930 --> 00:12:41,239
like<font color="#E5E5E5"> paying they can give you incorrect</font>

365
00:12:38,820 --> 00:12:43,260
answer in presence of reverse path

366
00:12:41,240 --> 00:12:45,720
asymmetry and here's just an example

367
00:12:43,260 --> 00:12:47,970
path for that so the red line is the

368
00:12:45,720 --> 00:12:49,800
basically queuing or the delay<font color="#E5E5E5"> variation</font>

369
00:12:47,970 --> 00:12:51,990
measured using ground three probes by

370
00:12:49,800 --> 00:12:53,729
<font color="#CCCCCC">pink and the blue</font><font color="#E5E5E5"> line the bottom line</font>

371
00:12:51,990 --> 00:12:56,130
is<font color="#CCCCCC"> that of tulip which is measuring one</font>

372
00:12:53,730 --> 00:12:57,959
via queuing so if the measurements taken

373
00:12:56,130 --> 00:12:59,760
by ping are consistent with each other

374
00:12:57,959 --> 00:13:01,380
and it's actually measuring the path is

375
00:12:59,760 --> 00:13:02,880
supposed to measure the queuing it

376
00:13:01,380 --> 00:13:05,580
measures to the<font color="#E5E5E5"> router should never go</font>

377
00:13:02,880 --> 00:13:07,830
down so on<font color="#CCCCCC"> the</font><font color="#E5E5E5"> x-axis is basically the</font>

378
00:13:05,580 --> 00:13:09,060
number of hops from the source where the

379
00:13:07,830 --> 00:13:10,800
measurement is happening<font color="#CCCCCC"> and the y-axis</font>

380
00:13:09,060 --> 00:13:13,020
is a measured queuing it's basically

381
00:13:10,800 --> 00:13:14,859
median queuing delay so we think you see

382
00:13:13,020 --> 00:13:16,930
you know queuing goes up and

383
00:13:14,860 --> 00:13:18,400
comes backs down and if ping was

384
00:13:16,930 --> 00:13:20,890
consistent this should not be happening

385
00:13:18,400 --> 00:13:22,840
so the blue line is tulip where you see

386
00:13:20,890 --> 00:13:25,090
it's pretty<font color="#E5E5E5"> much consistent I it goes up</font>

387
00:13:22,840 --> 00:13:26,560
towards the<font color="#E5E5E5"> end</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> the path where you</font>

388
00:13:25,090 --> 00:13:29,140
also see the intron trip but this this

389
00:13:26,560 --> 00:13:30,760
<font color="#E5E5E5">whole area gray area virtually we're</font>

390
00:13:29,140 --> 00:13:32,199
sorry<font color="#E5E5E5"> we're pink and actually confuse</font>

391
00:13:30,760 --> 00:13:36,640
you what's<font color="#E5E5E5"> going on just because the</font>

392
00:13:32,200 --> 00:13:38,140
reverse path is not the<font color="#E5E5E5"> same so apart</font>

393
00:13:36,640 --> 00:13:39,939
<font color="#E5E5E5">from implementing be evaluated in</font>

394
00:13:38,140 --> 00:13:42,130
various ways we evaluated whether tulip

395
00:13:39,940 --> 00:13:43,540
is accurate or there is being confused

396
00:13:42,130 --> 00:13:45,070
by all sorts of lottery dissing

397
00:13:43,540 --> 00:13:46,870
<font color="#E5E5E5">chrissy's in the internet and we did</font>

398
00:13:45,070 --> 00:13:48,640
that<font color="#E5E5E5"> mainly using end-to-end correctness</font>

399
00:13:46,870 --> 00:13:50,170
test where we<font color="#E5E5E5"> could control both ends</font>

400
00:13:48,640 --> 00:13:53,140
and not just the probing end and

401
00:13:50,170 --> 00:13:55,209
measured how internally consistent<font color="#E5E5E5"> tulip</font>

402
00:13:53,140 --> 00:13:56,980
was just like the last experiment if

403
00:13:55,210 --> 00:13:58,390
tulip is correct then the loss rate

404
00:13:56,980 --> 00:14:01,150
measure along the path should increase

405
00:13:58,390 --> 00:14:02,980
along the path and never come down<font color="#E5E5E5"> I'm</font>

406
00:14:01,150 --> 00:14:04,449
<font color="#E5E5E5">not going to go into those experiments</font>

407
00:14:02,980 --> 00:14:06,940
but they are they in a paper<font color="#E5E5E5"> I'll point</font>

408
00:14:04,450 --> 00:14:09,490
out a URL towards anthem a talk where

409
00:14:06,940 --> 00:14:10,930
you can look at the paper but<font color="#E5E5E5"> I'm going</font>

410
00:14:09,490 --> 00:14:13,270
<font color="#E5E5E5">to talk about this another evaluation we</font>

411
00:14:10,930 --> 00:14:16,120
did which is<font color="#E5E5E5"> the what</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> the granularity</font>

412
00:14:13,270 --> 00:14:18,189
of fault localization<font color="#E5E5E5"> tulip can achieve</font>

413
00:14:16,120 --> 00:14:20,350
so in the example I showed you a lot of

414
00:14:18,190 --> 00:14:23,140
routers did not export the forward path

415
00:14:20,350 --> 00:14:25,000
measurement primitives julep needs so<font color="#CCCCCC"> we</font>

416
00:14:23,140 --> 00:14:27,730
try to measure that so just to recap

417
00:14:25,000 --> 00:14:32,110
where does loss in granularity occur

418
00:14:27,730 --> 00:14:33,550
from so<font color="#E5E5E5"> imagine this path where where</font>

419
00:14:32,110 --> 00:14:35,530
there's some problem along the third

420
00:14:33,550 --> 00:14:37,240
link on the path marked by X and the

421
00:14:35,530 --> 00:14:38,560
router that is blacked out till it

422
00:14:37,240 --> 00:14:40,600
cannot measure the forward path to the

423
00:14:38,560 --> 00:14:42,250
router either because the order does not

424
00:14:40,600 --> 00:14:45,700
support the feature we require or

425
00:14:42,250 --> 00:14:48,160
because the or because probes do not

426
00:14:45,700 --> 00:14:50,200
<font color="#E5E5E5">take a prefix path to the router</font><font color="#CCCCCC"> base</font>

427
00:14:48,160 --> 00:14:51,699
<font color="#E5E5E5">mainly they take a completely different</font>

428
00:14:50,200 --> 00:14:52,900
path because you know we<font color="#E5E5E5"> are sending the</font>

429
00:14:51,700 --> 00:14:55,120
path to the Rotter there is no guarantee

430
00:14:52,900 --> 00:14:56,680
that the way the probe will get to the

431
00:14:55,120 --> 00:14:58,570
Rotter is actually a subset of the

432
00:14:56,680 --> 00:14:59,829
end-to-end path we<font color="#CCCCCC"> are in</font><font color="#E5E5E5"> frustrating so</font>

433
00:14:58,570 --> 00:15:01,210
in those particular cases to leap

434
00:14:59,830 --> 00:15:04,120
identifies that and cannot measure

435
00:15:01,210 --> 00:15:05,710
forward path to the raro so what you

436
00:15:04,120 --> 00:15:07,450
would just tell<font color="#CCCCCC"> us it will measure to</font>

437
00:15:05,710 --> 00:15:08,980
the first and the third router and would

438
00:15:07,450 --> 00:15:10,750
tell us well the fault is somewhere

439
00:15:08,980 --> 00:15:12,850
between the first and the third router

440
00:15:10,750 --> 00:15:14,650
and I cannot tell<font color="#CCCCCC"> you in at any more</font>

441
00:15:12,850 --> 00:15:17,350
granularity where it is it's somebody in

442
00:15:14,650 --> 00:15:19,120
<font color="#E5E5E5">the middle over there so we made it</font>

443
00:15:17,350 --> 00:15:21,040
basically thousands of paths from three

444
00:15:19,120 --> 00:15:24,640
sources and this is a graph we obtained

445
00:15:21,040 --> 00:15:26,589
as to the fall grand<font color="#E5E5E5"> localization</font>

446
00:15:24,640 --> 00:15:27,430
granularity it's about two hops for loss

447
00:15:26,590 --> 00:15:29,860
on

448
00:15:27,430 --> 00:15:31,630
average and the<font color="#CCCCCC"> median is too</font><font color="#E5E5E5"> hot for</font>

449
00:15:29,860 --> 00:15:34,600
loss and it's<font color="#CCCCCC"> four hearts are queuing</font>

450
00:15:31,630 --> 00:15:36,610
the reason that granularity of<font color="#CCCCCC"> queuing</font>

451
00:15:34,600 --> 00:15:38,740
is worse than that for loss is basically

452
00:15:36,610 --> 00:15:40,420
for queuing<font color="#CCCCCC"> vdma remember we need icmp</font>

453
00:15:38,740 --> 00:15:42,700
<font color="#CCCCCC">timestamps so we need to address the</font>

454
00:15:40,420 --> 00:15:44,860
router directly but while measuring Los

455
00:15:42,700 --> 00:15:46,870
we can use TT limited probes that are

456
00:15:44,860 --> 00:15:48,760
addressed to the destination but<font color="#CCCCCC"> their</font>

457
00:15:46,870 --> 00:15:51,130
<font color="#CCCCCC">GTL is limited so they come back midway</font>

458
00:15:48,760 --> 00:15:53,080
the chances of us getting to the router

459
00:15:51,130 --> 00:15:55,240
using the same path as taken by the

460
00:15:53,080 --> 00:15:56,740
end-to-end probe is higher when using GT

461
00:15:55,240 --> 00:15:59,320
limited probes and that's the simple

462
00:15:56,740 --> 00:16:00,880
reason why we get mad we get worse

463
00:15:59,320 --> 00:16:02,320
granularity for queuing even though

464
00:16:00,880 --> 00:16:04,810
ninety percent of the<font color="#CCCCCC"> Rogers we measured</font>

465
00:16:02,320 --> 00:16:07,000
to do X for icmp timestamps but only

466
00:16:04,810 --> 00:16:08,829
seventy percent export ipid<font color="#E5E5E5"> zat's</font>

467
00:16:07,000 --> 00:16:10,570
counters so the difference<font color="#E5E5E5"> comes from</font>

468
00:16:08,830 --> 00:16:12,850
the router rotting idiosyncrasy in the

469
00:16:10,570 --> 00:16:16,029
internet this<font color="#CCCCCC"> I should point out is</font>

470
00:16:12,850 --> 00:16:17,620
basically graph if you were doing<font color="#E5E5E5"> only</font>

471
00:16:16,029 --> 00:16:20,200
forward diagnosis but<font color="#E5E5E5"> in some cases</font>

472
00:16:17,620 --> 00:16:22,570
there is<font color="#E5E5E5"> there</font><font color="#CCCCCC"> is chance that you can</font>

473
00:16:20,200 --> 00:16:25,300
localize the fault even further by doing

474
00:16:22,570 --> 00:16:26,890
<font color="#CCCCCC">ground</font><font color="#E5E5E5"> three probing so remember</font><font color="#CCCCCC"> in the</font>

475
00:16:25,300 --> 00:16:28,719
last example<font color="#E5E5E5"> tulip was measuring to the</font>

476
00:16:26,890 --> 00:16:30,220
first and the third<font color="#E5E5E5"> robber suppose we</font>

477
00:16:28,720 --> 00:16:31,959
could<font color="#E5E5E5"> measure the round-trip path to the</font>

478
00:16:30,220 --> 00:16:33,910
second router not the forward path only

479
00:16:31,959 --> 00:16:35,859
but the wrong tree path and that path

480
00:16:33,910 --> 00:16:38,050
comes out clean so the<font color="#E5E5E5"> good</font><font color="#CCCCCC"> thing about</font>

481
00:16:35,860 --> 00:16:39,910
<font color="#E5E5E5">round-trip probing is if the round-trip</font>

482
00:16:38,050 --> 00:16:41,740
probing is clean that means the forward

483
00:16:39,910 --> 00:16:43,329
path is also clean so in this particular

484
00:16:41,740 --> 00:16:44,980
case if<font color="#CCCCCC"> you can measure the round-trip</font>

485
00:16:43,330 --> 00:16:46,930
path to the router we know the fault is

486
00:16:44,980 --> 00:16:50,140
actually in this third link and not in

487
00:16:46,930 --> 00:16:52,930
the<font color="#E5E5E5"> second one so that is basically</font>

488
00:16:50,140 --> 00:16:54,819
where<font color="#CCCCCC"> the current status</font><font color="#E5E5E5"> of</font><font color="#CCCCCC"> cure</font><font color="#E5E5E5"> pays it</font>

489
00:16:52,930 --> 00:16:56,709
converts in our experience it works and

490
00:16:54,820 --> 00:16:58,570
it provides reasonable useful

491
00:16:56,709 --> 00:17:00,099
granularity while diagnosing problems in

492
00:16:58,570 --> 00:17:02,050
the internet today but there<font color="#E5E5E5"> are simple</font>

493
00:17:00,100 --> 00:17:04,540
things we can do to further improve the

494
00:17:02,050 --> 00:17:06,819
granularity of locating problems in the

495
00:17:04,540 --> 00:17:08,800
<font color="#E5E5E5">internet if the tool proves useful first</font>

496
00:17:06,819 --> 00:17:10,959
is to just turn on features use<font color="#CCCCCC"> Virtual</font>

497
00:17:08,800 --> 00:17:12,609
oops if operators keep turning on the

498
00:17:10,959 --> 00:17:14,260
ICMP timestamps even though they can

499
00:17:12,609 --> 00:17:16,510
rate limit them rate limiting will not

500
00:17:14,260 --> 00:17:18,790
confuse<font color="#CCCCCC"> to live and letting</font><font color="#E5E5E5"> they're not</font>

501
00:17:16,510 --> 00:17:20,140
limiting and letting tulips<font color="#CCCCCC"> loss</font>

502
00:17:18,790 --> 00:17:21,790
measurements for instance which need a

503
00:17:20,140 --> 00:17:24,220
three-pack adverse to go through<font color="#E5E5E5"> and</font>

504
00:17:21,790 --> 00:17:25,720
implementing<font color="#CCCCCC"> ipi Jesus counters so</font>

505
00:17:24,220 --> 00:17:28,059
basically<font color="#E5E5E5"> what this would do in a very</font>

506
00:17:25,720 --> 00:17:29,980
<font color="#E5E5E5">simple manner it would let you and other</font>

507
00:17:28,059 --> 00:17:32,590
operators diagnose<font color="#CCCCCC"> paths through your</font>

508
00:17:29,980 --> 00:17:33,820
network without any overhead to you even

509
00:17:32,590 --> 00:17:35,409
when the suspect so they can just

510
00:17:33,820 --> 00:17:37,030
measure and see that you can show them

511
00:17:35,410 --> 00:17:38,380
<font color="#E5E5E5">basically your network is clean and the</font>

512
00:17:37,030 --> 00:17:40,270
problem is somewhere else so they'll

513
00:17:38,380 --> 00:17:41,560
actually believe you when you say that

514
00:17:40,270 --> 00:17:46,000
your<font color="#CCCCCC"> customers if they can do it</font>

515
00:17:41,560 --> 00:17:47,620
themselves<font color="#CCCCCC"> plus then if beyond that if</font>

516
00:17:46,000 --> 00:17:49,330
<font color="#CCCCCC">Julie becomes a runaway success there</font>

517
00:17:47,620 --> 00:17:51,340
<font color="#E5E5E5">are very simple changes that we can make</font>

518
00:17:49,330 --> 00:17:55,120
to the current infrastructure that would

519
00:17:51,340 --> 00:17:56,530
further improve its effectiveness and

520
00:17:55,120 --> 00:17:58,360
I'm going<font color="#E5E5E5"> to talk about two such changes</font>

521
00:17:56,530 --> 00:18:00,550
here one<font color="#E5E5E5"> is just a granularity of</font>

522
00:17:58,360 --> 00:18:03,100
localizing<font color="#E5E5E5"> queuing we saw that</font><font color="#CCCCCC"> it's much</font>

523
00:18:00,550 --> 00:18:05,020
it's a slightly worse than<font color="#E5E5E5"> queuing sorry</font>

524
00:18:03,100 --> 00:18:06,969
it's the granularity of queuing is worse

525
00:18:05,020 --> 00:18:08,290
than that of loss so we can improve<font color="#CCCCCC"> that</font>

526
00:18:06,970 --> 00:18:10,750
a little bitter and get to that in next

527
00:18:08,290 --> 00:18:12,820
slide<font color="#E5E5E5"> and the other one deals with how</font>

528
00:18:10,750 --> 00:18:16,120
do we increase the effectiveness of loss

529
00:18:12,820 --> 00:18:18,100
measurement so here's the problem that

530
00:18:16,120 --> 00:18:19,449
can be<font color="#E5E5E5"> fulfilled so all with a very</font>

531
00:18:18,100 --> 00:18:21,879
simple<font color="#E5E5E5"> fix the problems are following</font>

532
00:18:19,450 --> 00:18:24,580
that ICMP timestamps need to address the

533
00:18:21,880 --> 00:18:26,620
router directly as a result of that<font color="#CCCCCC"> we</font>

534
00:18:24,580 --> 00:18:28,510
get reduced diagnosis granularity or

535
00:18:26,620 --> 00:18:30,129
localization granularity when the

536
00:18:28,510 --> 00:18:31,780
<font color="#CCCCCC">prefect's path property which is the</font>

537
00:18:30,130 --> 00:18:33,490
path the probes take to the router is

538
00:18:31,780 --> 00:18:35,649
not a subset of the patch the

539
00:18:33,490 --> 00:18:38,440
<font color="#E5E5E5">destination when this property does not</font>

540
00:18:35,650 --> 00:18:40,330
hold so here's a simple<font color="#E5E5E5"> fix to that why</font>

541
00:18:38,440 --> 00:18:43,090
don't we<font color="#CCCCCC"> just insert</font><font color="#E5E5E5"> timestamps in the</font>

542
00:18:40,330 --> 00:18:45,429
TTL expired messages themselves they are

543
00:18:43,090 --> 00:18:47,350
32 unused bit sitting in the TTL expired

544
00:18:45,430 --> 00:18:49,780
messages and if<font color="#E5E5E5"> we start inserting</font>

545
00:18:47,350 --> 00:18:52,570
timestamps in those 32 bits what we can

546
00:18:49,780 --> 00:18:54,670
do is not<font color="#CCCCCC"> only</font><font color="#E5E5E5"> major loss and queuing</font>

547
00:18:52,570 --> 00:18:56,980
using the same probe but also the fact

548
00:18:54,670 --> 00:18:58,930
that we get queuing we also improved

549
00:18:56,980 --> 00:19:00,460
much better localization granularity

550
00:18:58,930 --> 00:19:02,020
with queuing and the change is

551
00:19:00,460 --> 00:19:03,670
completely backwards compatible and it

552
00:19:02,020 --> 00:19:07,720
can be<font color="#E5E5E5"> deployed incrementally there's no</font>

553
00:19:03,670 --> 00:19:09,190
<font color="#E5E5E5">flag days required as such he's a second</font>

554
00:19:07,720 --> 00:19:11,530
simple change and here's the problem<font color="#E5E5E5"> and</font>

555
00:19:09,190 --> 00:19:14,200
I wonder if it has occurred<font color="#E5E5E5"> to any of</font>

556
00:19:11,530 --> 00:19:17,050
you when I said<font color="#CCCCCC"> IP addys basically two</font>

557
00:19:14,200 --> 00:19:20,320
diffuses ipid so not<font color="#CCCCCC"> that I PID is a</font>

558
00:19:17,050 --> 00:19:21,760
shared counter for for a router so what

559
00:19:20,320 --> 00:19:23,260
would<font color="#CCCCCC"> happen if all</font><font color="#E5E5E5"> of you sitting here</font>

560
00:19:21,760 --> 00:19:25,300
starts using to leap<font color="#E5E5E5"> at the same time</font>

561
00:19:23,260 --> 00:19:27,280
then that counter is basically moving

562
00:19:25,300 --> 00:19:29,470
very fast as a result<font color="#CCCCCC"> of that what we</font>

563
00:19:27,280 --> 00:19:30,760
get is a success nightmare the contest

564
00:19:29,470 --> 00:19:33,760
moving very fast and tuna please

565
00:19:30,760 --> 00:19:35,410
completely useless than because nobody

566
00:19:33,760 --> 00:19:37,210
can get consecutive IPR is all the

567
00:19:35,410 --> 00:19:40,570
queuing so here's a very simple fix to

568
00:19:37,210 --> 00:19:42,850
that let the router maintain n where n

569
00:19:40,570 --> 00:19:44,439
is a constant number of counters and the

570
00:19:42,850 --> 00:19:46,389
router should<font color="#CCCCCC"> basically pick which</font>

571
00:19:44,440 --> 00:19:48,970
counter to respond to using the source

572
00:19:46,390 --> 00:19:51,610
<font color="#E5E5E5">address and the ipid of the probe so</font>

573
00:19:48,970 --> 00:19:53,620
even a small and like 10 or 100 this is

574
00:19:51,610 --> 00:19:55,360
this is not per flow state by any means

575
00:19:53,620 --> 00:19:57,280
maintain hundred counters instead<font color="#E5E5E5"> of</font>

576
00:19:55,360 --> 00:19:58,719
picking from one counter and whenever a

577
00:19:57,280 --> 00:20:00,850
probe comes to the rudder it should just

578
00:19:58,720 --> 00:20:02,620
<font color="#E5E5E5">hash the source address and the ipid of</font>

579
00:20:00,850 --> 00:20:04,899
the probe to select which counter to use

580
00:20:02,620 --> 00:20:07,030
and return and this is completely

581
00:20:04,900 --> 00:20:09,220
compliant with<font color="#CCCCCC"> the standard in</font><font color="#E5E5E5"> the sense</font>

582
00:20:07,030 --> 00:20:11,440
given a source destination pair the ipid

583
00:20:09,220 --> 00:20:13,030
still remains unique and the change

584
00:20:11,440 --> 00:20:15,190
again like the previous one<font color="#E5E5E5"> is</font>

585
00:20:13,030 --> 00:20:16,870
completely backwards compatible and can

586
00:20:15,190 --> 00:20:18,490
be deployed incrementally in fact<font color="#E5E5E5"> you</font>

587
00:20:16,870 --> 00:20:20,320
can think<font color="#E5E5E5"> of like the current internet</font>

588
00:20:18,490 --> 00:20:22,360
implementing the same scheme it just so

589
00:20:20,320 --> 00:20:25,750
happens that n is equal<font color="#CCCCCC"> to one that</font>

590
00:20:22,360 --> 00:20:28,240
everybody hashes to the same counter so

591
00:20:25,750 --> 00:20:29,830
to summarize<font color="#CCCCCC"> I talked about</font><font color="#E5E5E5"> tulip new</font>

592
00:20:28,240 --> 00:20:32,320
performance diagnosis tool that we've

593
00:20:29,830 --> 00:20:35,139
developed locally till it finds where

594
00:20:32,320 --> 00:20:37,178
packets are lost we are at our<font color="#CCCCCC"> q2 within</font>

595
00:20:35,140 --> 00:20:38,830
4 to 24 Hopsin average depending on what

596
00:20:37,179 --> 00:20:40,300
problem you're diagnosing or what

597
00:20:38,830 --> 00:20:43,919
<font color="#CCCCCC">exactly the path you're</font><font color="#E5E5E5"> going through</font>

598
00:20:40,300 --> 00:20:45,879
and the<font color="#E5E5E5"> biggest feature the biggest</font>

599
00:20:43,920 --> 00:20:47,170
contribution in tulip compared to the

600
00:20:45,880 --> 00:20:49,240
existing tool is that<font color="#E5E5E5"> is completely</font>

601
00:20:47,170 --> 00:20:50,860
compatible with asymmetric routing it

602
00:20:49,240 --> 00:20:51,850
measures the<font color="#E5E5E5"> forward path to the routers</font>

603
00:20:50,860 --> 00:20:54,699
rather than measuring the round-trip

604
00:20:51,850 --> 00:20:57,070
path as a<font color="#E5E5E5"> result of which diagnosis is</font>

605
00:20:54,700 --> 00:20:59,140
more accurate and the source code<font color="#E5E5E5"> of</font>

606
00:20:57,070 --> 00:21:01,450
<font color="#E5E5E5">julep and packages for red hat and</font>

607
00:20:59,140 --> 00:21:03,700
<font color="#CCCCCC">Debian sector are available through that</font>

608
00:21:01,450 --> 00:21:06,600
website over there and that's about it

609
00:21:03,700 --> 00:21:06,600
thanks very much

610
00:21:17,510 --> 00:21:22,410
Jeff good fellow Jeff good pillow the

611
00:21:20,670 --> 00:21:25,470
good<font color="#CCCCCC"> fella media group you mentioned</font>

612
00:21:22,410 --> 00:21:28,110
that you used to look before and after

613
00:21:25,470 --> 00:21:30,000
<font color="#E5E5E5">the sessions here at naga notice the</font>

614
00:21:28,110 --> 00:21:31,770
lost one up during the sessions yeah<font color="#CCCCCC"> did</font>

615
00:21:30,000 --> 00:21:33,510
you<font color="#E5E5E5"> happen</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> use it during the various</font>

616
00:21:31,770 --> 00:21:38,240
sessions to see how the loss rate

617
00:21:33,510 --> 00:21:40,740
changed from speaker to speaker um

618
00:21:38,240 --> 00:21:46,310
that's<font color="#E5E5E5"> a</font><font color="#CCCCCC"> good idea unfortunately I did</font>

619
00:21:40,740 --> 00:21:46,310
not I love ya I should<font color="#E5E5E5"> have done that</font>

