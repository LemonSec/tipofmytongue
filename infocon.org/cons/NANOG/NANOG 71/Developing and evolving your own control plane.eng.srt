1
00:00:09,200 --> 00:00:15,600
and then last<font color="#CCCCCC"> but not least</font><font color="#E5E5E5"> will</font>

2
00:00:13,080 --> 00:00:18,900
about his discussion on developing and

3
00:00:15,600 --> 00:00:24,150
evolving your own<font color="#E5E5E5"> Apple or IP control</font>

4
00:00:18,900 --> 00:00:26,189
<font color="#E5E5E5">plane</font><font color="#CCCCCC"> thank you thank you</font><font color="#E5E5E5"> so my name is</font>

5
00:00:24,150 --> 00:00:28,740
<font color="#CCCCCC">there is a rustle</font><font color="#E5E5E5"> I'm a neighbor systems</font>

6
00:00:26,189 --> 00:00:30,420
engineering<font color="#CCCCCC"> at fastly</font><font color="#E5E5E5"> and now I'm</font><font color="#CCCCCC"> gonna</font>

7
00:00:28,740 --> 00:00:33,510
be talking<font color="#E5E5E5"> about developing and evolving</font>

8
00:00:30,420 --> 00:00:36,379
your own control plane<font color="#E5E5E5"> so this talk is</font>

9
00:00:33,510 --> 00:00:41,610
going<font color="#E5E5E5"> to have three main parts I'm gonna</font>

10
00:00:36,379 --> 00:00:44,280
jump<font color="#CCCCCC"> back to 2013</font><font color="#E5E5E5"> and explain why and</font>

11
00:00:41,610 --> 00:00:47,430
how we<font color="#E5E5E5"> build our</font><font color="#CCCCCC"> own control plane</font><font color="#E5E5E5"> then</font>

12
00:00:44,280 --> 00:00:51,989
I'm gonna<font color="#E5E5E5"> jump to 2015</font><font color="#CCCCCC"> and I'm gonna</font>

13
00:00:47,430 --> 00:00:54,210
detail<font color="#E5E5E5"> a bit how</font><font color="#CCCCCC"> we rethought</font><font color="#E5E5E5"> our</font>

14
00:00:51,989 --> 00:00:57,599
regional control plane and we started

15
00:00:54,210 --> 00:01:01,860
<font color="#E5E5E5">just trying to iterate on it and then</font>

16
00:00:57,600 --> 00:01:04,320
finally<font color="#CCCCCC"> we'll go to early 2017 when we</font>

17
00:01:01,860 --> 00:01:06,450
had already<font color="#E5E5E5"> finished designing our new</font>

18
00:01:04,319 --> 00:01:09,509
control plane and we were started

19
00:01:06,450 --> 00:01:12,150
working on on a<font color="#E5E5E5"> migration plan to go</font>

20
00:01:09,510 --> 00:01:14,700
from the<font color="#E5E5E5"> old to the new control plane so</font>

21
00:01:12,150 --> 00:01:19,680
we<font color="#E5E5E5"> got further ado let's start let's go</font>

22
00:01:14,700 --> 00:01:22,620
back to 2013<font color="#CCCCCC"> so in 2013 the company</font><font color="#E5E5E5"> was</font>

23
00:01:19,680 --> 00:01:24,360
kind of<font color="#E5E5E5"> in the early days so we were</font>

24
00:01:22,620 --> 00:01:26,430
<font color="#E5E5E5">setting requirements</font><font color="#CCCCCC"> for the networking</font>

25
00:01:24,360 --> 00:01:28,440
infrastructure so the first requirement

26
00:01:26,430 --> 00:01:31,080
was that<font color="#E5E5E5"> we wanted to have</font><font color="#CCCCCC"> multiple</font>

27
00:01:28,440 --> 00:01:35,789
transits<font color="#CCCCCC"> on each bulb</font><font color="#E5E5E5"> that was mainly</font>

28
00:01:31,080 --> 00:01:38,700
<font color="#E5E5E5">for performance and reliability reasons</font>

29
00:01:35,790 --> 00:01:41,430
<font color="#E5E5E5">like you</font><font color="#CCCCCC"> don't want</font><font color="#E5E5E5"> to be just tied</font><font color="#CCCCCC"> to a</font>

30
00:01:38,700 --> 00:01:44,040
single translate<font color="#E5E5E5"> that has a bad day</font><font color="#CCCCCC"> and</font>

31
00:01:41,430 --> 00:01:47,159
<font color="#E5E5E5">then of assigned your entire services is</font>

32
00:01:44,040 --> 00:01:48,659
gone<font color="#E5E5E5"> the second requirement was</font><font color="#CCCCCC"> that the</font>

33
00:01:47,159 --> 00:01:52,500
company was fairly<font color="#CCCCCC"> new so</font><font color="#E5E5E5"> it's</font>

34
00:01:48,659 --> 00:01:56,190
impossible<font color="#CCCCCC"> to predict usage or growth so</font>

35
00:01:52,500 --> 00:01:59,700
the detector<font color="#CCCCCC"> hearts had to scale out</font>

36
00:01:56,190 --> 00:02:01,620
horizontally<font color="#CCCCCC"> with demand and then</font>

37
00:01:59,700 --> 00:02:04,350
finally we have<font color="#E5E5E5"> to connect those horse</font>

38
00:02:01,620 --> 00:02:06,690
to the<font color="#E5E5E5"> network and again it's a fairly</font>

39
00:02:04,350 --> 00:02:08,128
new company<font color="#E5E5E5"> so money</font><font color="#CCCCCC"> is kind of our</font>

40
00:02:06,690 --> 00:02:10,169
<font color="#E5E5E5">constraint so we had to be able to</font>

41
00:02:08,128 --> 00:02:13,040
<font color="#E5E5E5">connect all those</font><font color="#CCCCCC"> hosts to</font><font color="#E5E5E5"> all those</font>

42
00:02:10,169 --> 00:02:16,589
transits<font color="#E5E5E5"> in a cost-effective way</font>

43
00:02:13,040 --> 00:02:18,780
when you start<font color="#E5E5E5"> thinking about connecting</font>

44
00:02:16,590 --> 00:02:20,580
<font color="#E5E5E5">to</font><font color="#CCCCCC"> the internet</font><font color="#E5E5E5"> especially you are</font>

45
00:02:18,780 --> 00:02:23,250
thinking<font color="#CCCCCC"> in connecting to multiple</font>

46
00:02:20,580 --> 00:02:25,850
transits<font color="#E5E5E5"> and each transit has like its</font>

47
00:02:23,250 --> 00:02:28,250
own<font color="#CCCCCC"> routing table the</font>

48
00:02:25,850 --> 00:02:32,450
thing that comes to mind<font color="#CCCCCC"> are routers</font>

49
00:02:28,250 --> 00:02:34,190
however routers are expensive<font color="#CCCCCC"> so if you</font>

50
00:02:32,450 --> 00:02:36,920
<font color="#E5E5E5">don't have the money or you</font><font color="#CCCCCC"> want to</font>

51
00:02:34,190 --> 00:02:39,829
build a<font color="#E5E5E5"> network that skills economically</font>

52
00:02:36,920 --> 00:02:43,670
reasonable<font color="#CCCCCC"> that's kind of a</font><font color="#E5E5E5"> a problem</font>

53
00:02:39,830 --> 00:02:45,230
also<font color="#E5E5E5"> routers have a lot of bells and</font>

54
00:02:43,670 --> 00:02:48,049
<font color="#CCCCCC">whistles that you might not care about</font>

55
00:02:45,230 --> 00:02:51,350
<font color="#E5E5E5">and those all those features might lead</font>

56
00:02:48,050 --> 00:02:52,820
to<font color="#E5E5E5"> the box that</font><font color="#CCCCCC"> ok why is this</font><font color="#E5E5E5"> broken I</font>

57
00:02:51,350 --> 00:02:56,780
mean I'm not even<font color="#CCCCCC"> using</font><font color="#E5E5E5"> this this</font>

58
00:02:52,820 --> 00:02:59,030
<font color="#CCCCCC">features</font><font color="#E5E5E5"> and also routers back in 2013</font>

59
00:02:56,780 --> 00:03:01,460
<font color="#CCCCCC">they were</font><font color="#E5E5E5"> kind</font><font color="#CCCCCC"> of limited to</font><font color="#E5E5E5"> the best</font>

60
00:02:59,030 --> 00:03:03,530
path forwarding or to policy-based

61
00:03:01,460 --> 00:03:08,660
routing and<font color="#E5E5E5"> I will get more into details</font>

62
00:03:03,530 --> 00:03:12,410
later so so yeah<font color="#E5E5E5"> Rogers didn't look like</font>

63
00:03:08,660 --> 00:03:14,270
<font color="#E5E5E5">a really good option</font><font color="#CCCCCC"> for LAN for us on</font>

64
00:03:12,410 --> 00:03:17,120
the<font color="#E5E5E5"> other hand you have switches</font>

65
00:03:14,270 --> 00:03:19,070
switches<font color="#E5E5E5"> they're super cheap the port</font>

66
00:03:17,120 --> 00:03:21,440
<font color="#E5E5E5">densities</font><font color="#CCCCCC"> is great which means that you</font>

67
00:03:19,070 --> 00:03:23,660
<font color="#E5E5E5">don't need</font><font color="#CCCCCC"> that much space to rack them</font>

68
00:03:21,440 --> 00:03:24,980
<font color="#E5E5E5">they don't consume that</font><font color="#CCCCCC"> much power</font><font color="#E5E5E5"> which</font>

69
00:03:23,660 --> 00:03:27,010
is good<font color="#E5E5E5"> because I mean that you can have</font>

70
00:03:24,980 --> 00:03:30,560
even more servers in the rack

71
00:03:27,010 --> 00:03:33,140
however it has some limitations like<font color="#E5E5E5"> for</font>

72
00:03:30,560 --> 00:03:34,730
example<font color="#E5E5E5"> you cannot fit all those</font><font color="#CCCCCC"> rods</font>

73
00:03:33,140 --> 00:03:37,730
<font color="#CCCCCC">that</font><font color="#E5E5E5"> you're gonna be getting</font><font color="#CCCCCC"> for your</font>

74
00:03:34,730 --> 00:03:39,290
transits into into the<font color="#E5E5E5"> field and</font><font color="#CCCCCC"> also</font>

75
00:03:37,730 --> 00:03:42,290
back in 2013

76
00:03:39,290 --> 00:03:43,880
switches only<font color="#E5E5E5"> cared about IP and</font>

77
00:03:42,290 --> 00:03:45,440
Ethernet which means that<font color="#E5E5E5"> you want to</font>

78
00:03:43,880 --> 00:03:49,370
start doing overlays or stuff<font color="#CCCCCC"> like that</font>

79
00:03:45,440 --> 00:03:52,370
that's that's<font color="#E5E5E5"> not an option</font><font color="#CCCCCC"> I</font>

80
00:03:49,370 --> 00:03:53,690
in 2013 the team were mostly comprised

81
00:03:52,370 --> 00:03:56,240
<font color="#E5E5E5">of two network engineers that were</font>

82
00:03:53,690 --> 00:03:58,880
<font color="#CCCCCC">dealing with everything</font><font color="#E5E5E5"> in the network</font>

83
00:03:56,240 --> 00:03:59,990
like from operations<font color="#E5E5E5"> provisioning</font>

84
00:03:58,880 --> 00:04:02,780
procurement

85
00:03:59,990 --> 00:04:04,730
<font color="#E5E5E5">they were basically</font><font color="#CCCCCC"> too busy to to care</font>

86
00:04:02,780 --> 00:04:06,440
about dealing<font color="#CCCCCC"> with vendors and asking</font>

87
00:04:04,730 --> 00:04:09,170
features and making<font color="#CCCCCC"> sure that</font><font color="#E5E5E5"> the vendor</font>

88
00:04:06,440 --> 00:04:10,700
would implement them correctly<font color="#CCCCCC"> and we</font>

89
00:04:09,170 --> 00:04:13,519
also had<font color="#CCCCCC"> to solver engineers although</font>

90
00:04:10,700 --> 00:04:14,929
one<font color="#CCCCCC"> of</font><font color="#E5E5E5"> them was the CEO so arguably he's</font>

91
00:04:13,520 --> 00:04:17,600
an accountant because<font color="#E5E5E5"> he had other</font>

92
00:04:14,930 --> 00:04:20,060
<font color="#E5E5E5">things to do and they both had an</font>

93
00:04:17,600 --> 00:04:25,010
<font color="#CCCCCC">open-source background</font><font color="#E5E5E5"> and hated network</font>

94
00:04:20,060 --> 00:04:27,680
vendors as a whole and I'm last but not

95
00:04:25,010 --> 00:04:29,030
least they were determined<font color="#CCCCCC"> to push the</font>

96
00:04:27,680 --> 00:04:31,190
<font color="#E5E5E5">control of the network</font><font color="#CCCCCC"> to the</font>

97
00:04:29,030 --> 00:04:33,770
application like usually you<font color="#CCCCCC"> control the</font>

98
00:04:31,190 --> 00:04:36,080
network<font color="#E5E5E5"> from the network itself like by</font>

99
00:04:33,770 --> 00:04:38,780
setting policies or whatever<font color="#E5E5E5"> but we</font>

100
00:04:36,080 --> 00:04:39,940
wanted<font color="#E5E5E5"> state</font><font color="#CCCCCC"> to push that responsibility</font>

101
00:04:38,780 --> 00:04:44,508
<font color="#E5E5E5">down to</font>

102
00:04:39,940 --> 00:04:46,160
application<font color="#E5E5E5"> so at this point the team</font>

103
00:04:44,509 --> 00:04:50,330
came to the realization that<font color="#E5E5E5"> rotors are</font>

104
00:04:46,160 --> 00:04:52,210
expensive<font color="#E5E5E5"> they don't do what we</font><font color="#CCCCCC"> want</font>

105
00:04:50,330 --> 00:04:54,169
anyway<font color="#CCCCCC"> because we want to</font><font color="#E5E5E5"> push the</font>

106
00:04:52,210 --> 00:04:56,359
<font color="#CCCCCC">responsibility</font><font color="#E5E5E5"> to the application they</font>

107
00:04:54,169 --> 00:04:58,580
are super<font color="#E5E5E5"> expensive and they're yeah</font>

108
00:04:56,360 --> 00:05:01,190
<font color="#E5E5E5">they're portents it is not good</font>

109
00:04:58,580 --> 00:05:02,690
so not only capex is going to be bad

110
00:05:01,190 --> 00:05:04,729
that<font color="#CCCCCC"> optics is going to be bad as well</font>

111
00:05:02,690 --> 00:05:08,060
<font color="#E5E5E5">because of power consumption Rackspace</font>

112
00:05:04,729 --> 00:05:11,169
everything<font color="#E5E5E5"> on the other hand switches</font>

113
00:05:08,060 --> 00:05:15,050
are cheap but they have certain

114
00:05:11,169 --> 00:05:19,490
<font color="#E5E5E5">limitations however in 2013 there was at</font>

115
00:05:15,050 --> 00:05:23,270
least one vendor<font color="#E5E5E5"> maybe two that were</font>

116
00:05:19,490 --> 00:05:26,570
<font color="#E5E5E5">running Linux and would even</font><font color="#CCCCCC"> give you</font>

117
00:05:23,270 --> 00:05:29,570
access<font color="#CCCCCC"> to program the switches yourself</font>

118
00:05:26,570 --> 00:05:32,330
<font color="#E5E5E5">so we decided to build</font><font color="#CCCCCC"> around control</font>

119
00:05:29,570 --> 00:05:34,430
pain how hard can it be<font color="#E5E5E5"> right</font><font color="#CCCCCC"> I'm gonna</font>

120
00:05:32,330 --> 00:05:36,770
be hand waving some of the diesels now

121
00:05:34,430 --> 00:05:39,860
that original control plane you can

122
00:05:36,770 --> 00:05:42,049
visit that<font color="#E5E5E5"> URL you</font><font color="#CCCCCC"> want</font><font color="#E5E5E5"> to go more into</font>

123
00:05:39,860 --> 00:05:45,889
details but yeah<font color="#E5E5E5"> I'm gonna summarize it</font>

124
00:05:42,050 --> 00:05:47,930
<font color="#CCCCCC">right now</font><font color="#E5E5E5"> so we're gonna be using this</font>

125
00:05:45,889 --> 00:05:50,870
network<font color="#E5E5E5"> just to illustrate how the</font>

126
00:05:47,930 --> 00:05:55,340
<font color="#CCCCCC">regional control plane</font><font color="#E5E5E5"> works it's</font><font color="#CCCCCC"> just a</font>

127
00:05:50,870 --> 00:05:56,570
host a<font color="#CCCCCC"> switch and</font><font color="#E5E5E5"> children</font><font color="#CCCCCC"> seats</font><font color="#E5E5E5"> so the</font>

128
00:05:55,340 --> 00:05:58,880
first thing is that<font color="#E5E5E5"> we have a layer</font>

129
00:05:56,570 --> 00:06:00,560
<font color="#E5E5E5">three segments on each link going to the</font>

130
00:05:58,880 --> 00:06:03,590
<font color="#CCCCCC">transits</font><font color="#E5E5E5"> and another layer layer three</font>

131
00:06:00,560 --> 00:06:07,130
<font color="#E5E5E5">segments going from the switch to the to</font>

132
00:06:03,590 --> 00:06:10,039
the<font color="#E5E5E5"> host</font><font color="#CCCCCC"> if we check the</font><font color="#E5E5E5"> layer 2 and</font>

133
00:06:07,130 --> 00:06:12,259
<font color="#CCCCCC">layer 3</font><font color="#E5E5E5"> tables on the</font><font color="#CCCCCC"> devices there are</font>

134
00:06:10,039 --> 00:06:14,180
no<font color="#E5E5E5"> surprises</font><font color="#CCCCCC"> right</font><font color="#E5E5E5"> we have the</font><font color="#CCCCCC"> FIB with</font>

135
00:06:12,259 --> 00:06:17,000
the<font color="#CCCCCC"> connected</font><font color="#E5E5E5"> networks we have the ARP</font>

136
00:06:14,180 --> 00:06:20,690
table with the<font color="#E5E5E5"> neighbors on those</font>

137
00:06:17,000 --> 00:06:21,889
networks<font color="#CCCCCC"> nothing really surprising now</font>

138
00:06:20,690 --> 00:06:24,979
we run<font color="#E5E5E5"> ibgp</font>

139
00:06:21,889 --> 00:06:28,820
down to the<font color="#E5E5E5"> host which means that when a</font>

140
00:06:24,979 --> 00:06:31,900
prefix comes in we get those prefixes

141
00:06:28,820 --> 00:06:34,669
installed<font color="#E5E5E5"> in the feet of the host</font>

142
00:06:31,900 --> 00:06:36,979
<font color="#E5E5E5">however remember</font><font color="#CCCCCC"> that we are</font><font color="#E5E5E5"> dealing</font>

143
00:06:34,669 --> 00:06:40,490
with switches<font color="#E5E5E5"> we don't have space</font><font color="#CCCCCC"> to put</font>

144
00:06:36,979 --> 00:06:41,180
the full<font color="#E5E5E5"> routing tables of all those</font>

145
00:06:40,490 --> 00:06:43,039
transits

146
00:06:41,180 --> 00:06:45,470
<font color="#E5E5E5">into the tip of the switches so we'd</font>

147
00:06:43,039 --> 00:06:48,650
install anything on<font color="#E5E5E5"> the switches</font><font color="#CCCCCC"> we just</font>

148
00:06:45,470 --> 00:06:50,779
send<font color="#E5E5E5"> them down to the to the host but</font>

149
00:06:48,650 --> 00:06:53,539
what happens now it turns out<font color="#E5E5E5"> that the</font>

150
00:06:50,779 --> 00:06:57,020
host now<font color="#CCCCCC"> wants to</font><font color="#E5E5E5"> send traffic to 172 to</font>

151
00:06:53,540 --> 00:06:59,600
zero-one right so<font color="#E5E5E5"> just thus the host</font>

152
00:06:57,020 --> 00:07:03,020
will do just a quadric up<font color="#E5E5E5"> we will see</font>

153
00:06:59,600 --> 00:07:04,610
that it<font color="#E5E5E5"> can send the traffic via those</font>

154
00:07:03,020 --> 00:07:06,560
two<font color="#E5E5E5"> IPs</font>

155
00:07:04,610 --> 00:07:08,300
but turns out<font color="#E5E5E5"> that it</font><font color="#CCCCCC"> doesn't know how</font>

156
00:07:06,560 --> 00:07:10,490
<font color="#CCCCCC">to reach</font><font color="#E5E5E5"> those like this you would</font>

157
00:07:08,300 --> 00:07:14,180
traditionally solve this problem by

158
00:07:10,490 --> 00:07:17,180
running an<font color="#E5E5E5"> AGP and having a recursive</font>

159
00:07:14,180 --> 00:07:20,200
<font color="#CCCCCC">road lookup however remember</font><font color="#E5E5E5"> that the</font>

160
00:07:17,180 --> 00:07:23,690
switch doesn't<font color="#E5E5E5"> know how to reach 170 to</font>

161
00:07:20,200 --> 00:07:25,340
2000<font color="#E5E5E5"> / 24 so you would</font><font color="#CCCCCC"> use an IDP</font><font color="#E5E5E5"> you</font>

162
00:07:23,690 --> 00:07:28,340
would be black hole in traffic<font color="#E5E5E5"> on the</font>

163
00:07:25,340 --> 00:07:31,599
switch instead so here's the trick<font color="#E5E5E5"> we</font>

164
00:07:28,340 --> 00:07:35,299
put everything on the same very<font color="#E5E5E5"> - domain</font>

165
00:07:31,600 --> 00:07:39,080
transits switches and<font color="#E5E5E5"> host</font><font color="#CCCCCC"> I know it's</font>

166
00:07:35,300 --> 00:07:42,350
gross<font color="#E5E5E5"> but it works now you synchronize</font>

167
00:07:39,080 --> 00:07:45,859
they are table<font color="#E5E5E5"> from the switch to the</font>

168
00:07:42,350 --> 00:07:48,170
host you send all the our<font color="#CCCCCC"> pain trees</font>

169
00:07:45,860 --> 00:07:51,350
<font color="#E5E5E5">that belong to transit so now if the</font>

170
00:07:48,170 --> 00:07:53,930
<font color="#CCCCCC">hosts</font><font color="#E5E5E5"> want to send traffic via the blue</font>

171
00:07:51,350 --> 00:07:56,150
transit the only thing has to do is set

172
00:07:53,930 --> 00:07:58,760
the<font color="#CCCCCC"> destination MAC</font><font color="#E5E5E5"> address that</font>

173
00:07:56,150 --> 00:08:01,099
corresponds to the router<font color="#E5E5E5"> of that</font>

174
00:07:58,760 --> 00:08:04,430
transit and the switch will just do what

175
00:08:01,100 --> 00:08:07,340
<font color="#CCCCCC">it knows how to</font><font color="#E5E5E5"> do best which is switch</font>

176
00:08:04,430 --> 00:08:10,550
traffic and if the host wants to send

177
00:08:07,340 --> 00:08:13,849
<font color="#E5E5E5">traffic via they were</font><font color="#CCCCCC"> instances</font><font color="#E5E5E5"> just a</font>

178
00:08:10,550 --> 00:08:17,150
module set in the<font color="#CCCCCC"> correspondent Mike</font>

179
00:08:13,850 --> 00:08:20,300
address and now we can<font color="#E5E5E5"> build tools like</font>

180
00:08:17,150 --> 00:08:23,450
this one this is<font color="#E5E5E5"> an internal ping tool</font>

181
00:08:20,300 --> 00:08:26,300
that we have<font color="#E5E5E5"> where we can actually ping</font>

182
00:08:23,450 --> 00:08:28,520
a destination<font color="#E5E5E5"> over</font><font color="#CCCCCC"> all the available</font>

183
00:08:26,300 --> 00:08:30,380
secrets<font color="#E5E5E5"> on a given side so you can see</font>

184
00:08:28,520 --> 00:08:32,419
here we have<font color="#CCCCCC"> like a bunch of secrets and</font>

185
00:08:30,380 --> 00:08:36,169
<font color="#CCCCCC">we are peeing in the same IP so we can</font>

186
00:08:32,419 --> 00:08:39,490
see the latency<font color="#CCCCCC"> and packet losses</font><font color="#E5E5E5"> for</font>

187
00:08:36,169 --> 00:08:42,860
<font color="#E5E5E5">that particular IP over all the transits</font>

188
00:08:39,490 --> 00:08:46,160
so that was the regional control plane

189
00:08:42,860 --> 00:08:49,310
so now<font color="#E5E5E5"> let's see how we worked on it</font>

190
00:08:46,160 --> 00:08:57,199
over<font color="#E5E5E5"> the years as we gain experience and</font>

191
00:08:49,310 --> 00:08:59,719
the team grew so time passes<font color="#E5E5E5"> and things</font>

192
00:08:57,200 --> 00:09:01,870
are working fine but the turns out that

193
00:08:59,720 --> 00:09:04,250
<font color="#E5E5E5">they all control plane had a few</font>

194
00:09:01,870 --> 00:09:07,340
architectural shortcomings I mean

195
00:09:04,250 --> 00:09:11,150
<font color="#E5E5E5">unsurprisingly layer hugs later - hugs</font>

196
00:09:07,340 --> 00:09:14,270
don't scale well<font color="#E5E5E5"> and sharing</font><font color="#CCCCCC"> here too</font>

197
00:09:11,150 --> 00:09:15,980
<font color="#E5E5E5">with transits has some minor</font><font color="#CCCCCC"> issues</font><font color="#E5E5E5"> do</font>

198
00:09:14,270 --> 00:09:17,449
you<font color="#CCCCCC"> have to start filtering broadcast</font>

199
00:09:15,980 --> 00:09:20,540
traffic<font color="#E5E5E5"> which</font><font color="#CCCCCC"> is not a</font><font color="#E5E5E5"> big deal</font><font color="#CCCCCC"> that you</font>

200
00:09:17,450 --> 00:09:22,310
have to remember to to do<font color="#CCCCCC"> but more</font>

201
00:09:20,540 --> 00:09:23,719
importantly<font color="#E5E5E5"> not having a clear</font>

202
00:09:22,310 --> 00:09:25,729
separation<font color="#E5E5E5"> between layer 2 and layer 3</font>

203
00:09:23,720 --> 00:09:28,400
<font color="#CCCCCC">it's just confusing</font><font color="#E5E5E5"> for people like this</font>

204
00:09:25,730 --> 00:09:32,480
synchronizing our entries and not<font color="#E5E5E5"> having</font>

205
00:09:28,400 --> 00:09:34,640
a<font color="#CCCCCC"> doing a recursive lookup checking the</font>

206
00:09:32,480 --> 00:09:37,040
ARP table instead<font color="#CCCCCC"> of fact connected</font>

207
00:09:34,640 --> 00:09:38,839
rather that's just<font color="#CCCCCC"> confusing for for</font>

208
00:09:37,040 --> 00:09:41,510
<font color="#E5E5E5">people so we wanted to</font><font color="#CCCCCC"> address those</font>

209
00:09:38,839 --> 00:09:42,260
issues<font color="#E5E5E5"> also the previous</font><font color="#CCCCCC"> control pin</font>

210
00:09:41,510 --> 00:09:44,390
didn't support

211
00:09:42,260 --> 00:09:46,069
<font color="#CCCCCC">ixps iyx please / def initial there</font>

212
00:09:44,390 --> 00:09:47,120
already<font color="#CCCCCC"> layer 2 domains</font><font color="#E5E5E5"> and you're not</font>

213
00:09:46,070 --> 00:09:48,380
going to connect<font color="#E5E5E5"> your own layer to</font>

214
00:09:47,120 --> 00:09:50,690
domain with someone else's<font color="#E5E5E5"> because</font>

215
00:09:48,380 --> 00:09:53,450
that's just just just calling for for

216
00:09:50,690 --> 00:09:56,510
disaster<font color="#E5E5E5"> so what we were doing</font><font color="#CCCCCC"> with ixps</font>

217
00:09:53,450 --> 00:09:59,870
was to install routes<font color="#E5E5E5"> coming from peers</font>

218
00:09:56,510 --> 00:10:01,779
in there<font color="#E5E5E5"> into the field which means that</font>

219
00:09:59,870 --> 00:10:10,160
we were running<font color="#CCCCCC"> into fib limitations in</font>

220
00:10:01,779 --> 00:10:13,040
big<font color="#CCCCCC"> IXPs like I'm 6 pickax links etc</font><font color="#E5E5E5"> the</font>

221
00:10:10,160 --> 00:10:16,430
state of networking inches in 2015 was

222
00:10:13,040 --> 00:10:18,020
pretty<font color="#E5E5E5"> much the same as in 2013 but</font>

223
00:10:16,430 --> 00:10:21,920
<font color="#E5E5E5">there were a few differences that</font>

224
00:10:18,020 --> 00:10:23,839
changed completely the<font color="#E5E5E5"> game the it was</font>

225
00:10:21,920 --> 00:10:28,310
the<font color="#E5E5E5"> early days</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> segment</font><font color="#CCCCCC"> rotting on BGP</font>

226
00:10:23,839 --> 00:10:33,170
<font color="#CCCCCC">Lu which basically went very well with</font>

227
00:10:28,310 --> 00:10:36,469
what we<font color="#E5E5E5"> were doing</font><font color="#CCCCCC"> and switches</font><font color="#E5E5E5"> started</font>

228
00:10:33,170 --> 00:10:40,760
to have like more modern<font color="#E5E5E5"> ASIC that could</font>

229
00:10:36,470 --> 00:10:43,339
do encapsulation protocols like MPLS or

230
00:10:40,760 --> 00:10:46,700
via<font color="#CCCCCC"> clan so that kind of was interesting</font>

231
00:10:43,339 --> 00:10:48,770
for<font color="#E5E5E5"> us now the team had grown quite a</font>

232
00:10:46,700 --> 00:10:52,250
<font color="#CCCCCC">bit we had now 6 network engineers still</font>

233
00:10:48,770 --> 00:10:54,170
busy doing all<font color="#E5E5E5"> sorts of stuff</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> we</font>

234
00:10:52,250 --> 00:10:56,720
have<font color="#CCCCCC"> 6 software engineers</font><font color="#E5E5E5"> to work</font><font color="#CCCCCC"> on an</font>

235
00:10:54,170 --> 00:11:01,160
actual<font color="#E5E5E5"> solution that involves less</font>

236
00:10:56,720 --> 00:11:02,930
hiking and<font color="#E5E5E5"> more doing things properly</font><font color="#CCCCCC"> so</font>

237
00:11:01,160 --> 00:11:05,060
now I'm<font color="#E5E5E5"> going to be describing the new</font>

238
00:11:02,930 --> 00:11:09,800
yorky texture<font color="#E5E5E5"> I'm gonna be using this</font>

239
00:11:05,060 --> 00:11:13,969
leaf<font color="#CCCCCC"> h</font><font color="#E5E5E5"> network one horse</font><font color="#CCCCCC"> two</font><font color="#E5E5E5"> transits so</font>

240
00:11:09,800 --> 00:11:17,930
now we have only point-to-point links no

241
00:11:13,970 --> 00:11:20,209
more layer<font color="#CCCCCC"> two shared between</font><font color="#E5E5E5"> transits</font>

242
00:11:17,930 --> 00:11:21,489
or multiple devices only<font color="#E5E5E5"> point-to-point</font>

243
00:11:20,209 --> 00:11:24,380
links

244
00:11:21,490 --> 00:11:29,149
now we run<font color="#E5E5E5"> ebgp</font>

245
00:11:24,380 --> 00:11:32,390
down to the host instead of<font color="#E5E5E5"> ibgp we</font>

246
00:11:29,149 --> 00:11:33,430
assign an MPLS label for each egress

247
00:11:32,390 --> 00:11:36,470
<font color="#CCCCCC">pier</font>

248
00:11:33,430 --> 00:11:41,170
any circuit that takes you<font color="#E5E5E5"> out of the</font>

249
00:11:36,470 --> 00:11:44,630
<font color="#E5E5E5">network has a dedicated MPLS</font><font color="#CCCCCC"> level and</font>

250
00:11:41,170 --> 00:11:46,579
we start MPLS<font color="#E5E5E5"> on the</font><font color="#CCCCCC"> hoe</font><font color="#E5E5E5"> so we're not</font>

251
00:11:44,630 --> 00:11:50,420
<font color="#E5E5E5">only running BGP on the host we are also</font>

252
00:11:46,579 --> 00:11:53,029
running MPLS on the host<font color="#E5E5E5"> so now if the</font>

253
00:11:50,420 --> 00:11:55,969
host wants the same traffic via the blue

254
00:11:53,029 --> 00:11:58,279
<font color="#CCCCCC">transit it only has to select</font><font color="#E5E5E5"> the MPLS</font>

255
00:11:55,970 --> 00:12:00,260
label<font color="#CCCCCC"> corresponding to that transit and</font>

256
00:11:58,279 --> 00:12:05,660
if it wants<font color="#CCCCCC"> to send it via the</font><font color="#E5E5E5"> other</font>

257
00:12:00,260 --> 00:12:07,610
transit<font color="#E5E5E5"> just</font><font color="#CCCCCC"> put the</font><font color="#E5E5E5"> other label</font><font color="#CCCCCC"> okay so</font>

258
00:12:05,660 --> 00:12:09,140
that was more or<font color="#E5E5E5"> less an overview</font><font color="#CCCCCC"> but</font>

259
00:12:07,610 --> 00:12:13,010
let's see have<font color="#E5E5E5"> been wounded</font><font color="#CCCCCC"> or how it</font>

260
00:12:09,140 --> 00:12:15,230
works<font color="#E5E5E5"> we first assign a label at</font>

261
00:12:13,010 --> 00:12:18,800
provision in time so do provision a

262
00:12:15,230 --> 00:12:21,890
circuit that assigns the MPLS label now

263
00:12:18,800 --> 00:12:24,589
<font color="#E5E5E5">silvertone which was the control plane</font>

264
00:12:21,890 --> 00:12:26,990
tool that before would propagate<font color="#E5E5E5"> the</font>

265
00:12:24,589 --> 00:12:29,149
<font color="#E5E5E5">airplane trees now propagates</font><font color="#CCCCCC"> de</font>

266
00:12:26,990 --> 00:12:31,970
<font color="#CCCCCC">l'espace down the network so everything</font>

267
00:12:29,149 --> 00:12:35,120
that you provision is circuit<font color="#E5E5E5"> the label</font>

268
00:12:31,970 --> 00:12:38,779
gets<font color="#CCCCCC"> assigned</font><font color="#E5E5E5"> on</font><font color="#CCCCCC"> the edge and silverton</font>

269
00:12:35,120 --> 00:12:42,170
just announces<font color="#CCCCCC"> that down the</font><font color="#E5E5E5"> non</font><font color="#CCCCCC"> the</font>

270
00:12:38,779 --> 00:12:46,610
network<font color="#E5E5E5"> but here is the</font><font color="#CCCCCC"> interesting bit</font>

271
00:12:42,170 --> 00:12:49,490
when<font color="#E5E5E5"> a prefix reaches the edge of the</font>

272
00:12:46,610 --> 00:12:53,450
<font color="#CCCCCC">network via a particular transit</font><font color="#E5E5E5"> with</font>

273
00:12:49,490 --> 00:12:56,750
<font color="#E5E5E5">tag with an extended community that prot</font>

274
00:12:53,450 --> 00:13:00,200
that<font color="#CCCCCC"> prefix with a community</font><font color="#E5E5E5"> that</font>

275
00:12:56,750 --> 00:13:02,120
identifies<font color="#E5E5E5"> uniquely that LSP</font><font color="#CCCCCC"> so you can</font>

276
00:13:00,200 --> 00:13:03,920
see<font color="#E5E5E5"> for example those prefixes coming</font>

277
00:13:02,120 --> 00:13:05,870
from two<font color="#E5E5E5"> different</font><font color="#CCCCCC"> networks</font><font color="#E5E5E5"> each one is</font>

278
00:13:03,920 --> 00:13:08,469
going to<font color="#E5E5E5"> get a sign that extended</font>

279
00:13:05,870 --> 00:13:12,350
community<font color="#E5E5E5"> identifies the particular LSP</font>

280
00:13:08,470 --> 00:13:16,130
<font color="#E5E5E5">and now the host we only have to extract</font>

281
00:13:12,350 --> 00:13:20,029
the<font color="#E5E5E5"> extended community and read which</font>

282
00:13:16,130 --> 00:13:25,339
MPLS label to use in order<font color="#CCCCCC"> to use that</font>

283
00:13:20,029 --> 00:13:27,439
<font color="#CCCCCC">particular path so now the network is</font>

284
00:13:25,339 --> 00:13:30,529
super simple<font color="#CCCCCC"> with just a</font><font color="#E5E5E5"> bunch of MPLS</font>

285
00:13:27,440 --> 00:13:34,070
routes<font color="#CCCCCC"> nothing else</font><font color="#E5E5E5"> you have MPLS level</font>

286
00:13:30,529 --> 00:13:34,830
<font color="#E5E5E5">1020 just pop the label and send it this</font>

287
00:13:34,070 --> 00:13:37,620
particular

288
00:13:34,830 --> 00:13:40,800
but we<font color="#E5E5E5"> don't have</font><font color="#CCCCCC"> anymore</font><font color="#E5E5E5"> this there</font><font color="#CCCCCC"> two</font>

289
00:13:37,620 --> 00:13:46,230
two layer three<font color="#E5E5E5"> translation stuff doing</font>

290
00:13:40,800 --> 00:13:48,959
<font color="#E5E5E5">weird things</font><font color="#CCCCCC"> this is just a route so I</font>

291
00:13:46,230 --> 00:13:52,170
can show you how the community<font color="#CCCCCC"> maps to</font>

292
00:13:48,960 --> 00:13:54,390
label so we have a route coming from two

293
00:13:52,170 --> 00:13:57,410
<font color="#CCCCCC">different switches</font><font color="#E5E5E5"> we can see on the</font>

294
00:13:54,390 --> 00:14:00,870
<font color="#E5E5E5">first switch how the extended community</font>

295
00:13:57,410 --> 00:14:03,990
<font color="#E5E5E5">8086</font><font color="#CCCCCC"> 1020 maps to the MPLS label 1020</font>

296
00:14:00,870 --> 00:14:07,740
and on the<font color="#CCCCCC"> other hand the other switch</font>

297
00:14:03,990 --> 00:14:11,970
has the extended community<font color="#E5E5E5"> 8080 1624</font>

298
00:14:07,740 --> 00:14:14,910
<font color="#E5E5E5">that maps to the appellate level 1024 so</font>

299
00:14:11,970 --> 00:14:20,480
<font color="#CCCCCC">okay now we</font><font color="#E5E5E5"> have this</font><font color="#CCCCCC"> network that</font><font color="#E5E5E5"> is</font>

300
00:14:14,910 --> 00:14:24,959
able<font color="#E5E5E5"> to</font><font color="#CCCCCC"> just send</font><font color="#E5E5E5"> traffic via multiple</font>

301
00:14:20,480 --> 00:14:27,090
transits on a flow basis<font color="#E5E5E5"> so we need to</font>

302
00:14:24,960 --> 00:14:27,630
expose<font color="#E5E5E5"> that</font><font color="#CCCCCC"> information somehow</font><font color="#E5E5E5"> on</font><font color="#CCCCCC"> the</font>

303
00:14:27,090 --> 00:14:30,180
host

304
00:14:27,630 --> 00:14:33,510
so the application<font color="#CCCCCC"> can make use of it so</font>

305
00:14:30,180 --> 00:14:35,880
<font color="#CCCCCC">the way we do that is we create a</font>

306
00:14:33,510 --> 00:14:37,860
routing table for each particular egress

307
00:14:35,880 --> 00:14:40,500
<font color="#E5E5E5">peer so here we have two</font><font color="#CCCCCC"> different</font>

308
00:14:37,860 --> 00:14:43,560
<font color="#CCCCCC">tables</font><font color="#E5E5E5"> and those tables the only thing</font>

309
00:14:40,500 --> 00:14:47,190
they have is a default route saying<font color="#E5E5E5"> if</font>

310
00:14:43,560 --> 00:14:50,219
you want to exit this way<font color="#E5E5E5"> use this MPLS</font>

311
00:14:47,190 --> 00:14:52,530
label<font color="#CCCCCC"> and then we just have a bunch of</font>

312
00:14:50,220 --> 00:14:56,220
<font color="#E5E5E5">IP routes this is a leonis construct</font>

313
00:14:52,530 --> 00:14:59,600
that says if the<font color="#E5E5E5"> socket has their</font>

314
00:14:56,220 --> 00:15:03,420
forwarding mark<font color="#CCCCCC"> ae</font><font color="#E5E5E5"> do a</font><font color="#CCCCCC"> look-up on</font><font color="#E5E5E5"> this</font>

315
00:14:59,600 --> 00:15:07,110
<font color="#E5E5E5">particular table if the forwarding mark</font>

316
00:15:03,420 --> 00:15:09,360
is<font color="#E5E5E5"> 5:13 do a</font><font color="#CCCCCC"> look-up on this</font><font color="#E5E5E5"> other one</font>

317
00:15:07,110 --> 00:15:10,830
<font color="#E5E5E5">so if we want to send traffic via I</font>

318
00:15:09,360 --> 00:15:12,390
<font color="#E5E5E5">think this is</font><font color="#CCCCCC"> Korean say you want to</font>

319
00:15:10,830 --> 00:15:14,720
send<font color="#E5E5E5"> traffic by</font><font color="#CCCCCC"> recording for example</font>

320
00:15:12,390 --> 00:15:18,900
the<font color="#CCCCCC"> application would</font><font color="#E5E5E5"> just open</font><font color="#CCCCCC"> a socket</font>

321
00:15:14,720 --> 00:15:21,720
<font color="#E5E5E5">put the option the forwarding Mac option</font>

322
00:15:18,900 --> 00:15:23,430
as<font color="#E5E5E5"> AE and that would cause the kernel to</font>

323
00:15:21,720 --> 00:15:24,990
do a<font color="#E5E5E5"> roadblock up on that particular</font>

324
00:15:23,430 --> 00:15:25,709
<font color="#CCCCCC">table that says okay</font><font color="#E5E5E5"> you have to use</font>

325
00:15:24,990 --> 00:15:29,970
this

326
00:15:25,710 --> 00:15:31,530
MPLS<font color="#CCCCCC"> and if the application</font><font color="#E5E5E5"> doesn't know</font>

327
00:15:29,970 --> 00:15:35,040
how to do<font color="#CCCCCC"> these or doesn't</font><font color="#E5E5E5"> care about</font>

328
00:15:31,530 --> 00:15:38,160
<font color="#E5E5E5">this you can always default to the main</font>

329
00:15:35,040 --> 00:15:40,349
<font color="#CCCCCC">table of the link Linux host that will</font>

330
00:15:38,160 --> 00:15:43,020
just have all the routes in there and

331
00:15:40,350 --> 00:15:47,830
then it's just a matter<font color="#E5E5E5"> of writing BGP</font>

332
00:15:43,020 --> 00:15:50,800
policies as as usual so

333
00:15:47,830 --> 00:15:55,810
in retrospective<font color="#E5E5E5"> we managed to</font><font color="#CCCCCC"> rebuild</font>

334
00:15:50,800 --> 00:15:57,670
the the the<font color="#E5E5E5"> control plane juice in while</font>

335
00:15:55,810 --> 00:15:59,680
maintaining<font color="#E5E5E5"> the nice features that we</font>

336
00:15:57,670 --> 00:16:03,099
had in the previous one<font color="#E5E5E5"> which means per</font>

337
00:15:59,680 --> 00:16:05,199
floor Alden while<font color="#E5E5E5"> short address in all</font>

338
00:16:03,100 --> 00:16:07,960
the shortcomings<font color="#CCCCCC"> of</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> previous one</font><font color="#E5E5E5"> and</font>

339
00:16:05,200 --> 00:16:08,470
so far everything has been<font color="#E5E5E5"> work as</font>

340
00:16:07,960 --> 00:16:12,190
<font color="#E5E5E5">expected</font>

341
00:16:08,470 --> 00:16:14,650
working<font color="#E5E5E5"> as expert okay so now we have</font>

342
00:16:12,190 --> 00:16:19,960
<font color="#CCCCCC">two</font><font color="#E5E5E5"> control planes we have the old one</font>

343
00:16:14,650 --> 00:16:23,050
and<font color="#E5E5E5"> the new one</font><font color="#CCCCCC"> so it's early</font><font color="#E5E5E5"> 2017 and</font>

344
00:16:19,960 --> 00:16:25,360
we want to work<font color="#E5E5E5"> on a migration plan so</font>

345
00:16:23,050 --> 00:16:28,900
we can migrate<font color="#E5E5E5"> the old version of the</font>

346
00:16:25,360 --> 00:16:31,660
control planes of the<font color="#CCCCCC"> 21</font><font color="#E5E5E5"> so we</font><font color="#CCCCCC"> had a set</font>

347
00:16:28,900 --> 00:16:34,000
<font color="#E5E5E5">of objectives</font><font color="#CCCCCC"> for for this migration</font>

348
00:16:31,660 --> 00:16:35,290
<font color="#E5E5E5">plan</font><font color="#CCCCCC"> the first one is that we had to</font>

349
00:16:34,000 --> 00:16:38,830
migrate<font color="#CCCCCC"> from</font><font color="#E5E5E5"> ibgp</font>

350
00:16:35,290 --> 00:16:41,260
to ebgp<font color="#E5E5E5"> because ibgp is what the old</font>

351
00:16:38,830 --> 00:16:44,080
<font color="#E5E5E5">control plane was using while ebgp was</font>

352
00:16:41,260 --> 00:16:47,740
being used<font color="#E5E5E5"> in the new one and the main</font>

353
00:16:44,080 --> 00:16:49,260
objective with this migration<font color="#E5E5E5"> was to</font>

354
00:16:47,740 --> 00:16:52,600
make sure<font color="#CCCCCC"> that we weren't</font><font color="#E5E5E5"> running</font>

355
00:16:49,260 --> 00:16:54,460
multiple control planes because<font color="#CCCCCC"> that</font>

356
00:16:52,600 --> 00:16:56,560
means that<font color="#E5E5E5"> you have to maintain twice</font>

357
00:16:54,460 --> 00:16:59,260
the code<font color="#E5E5E5"> you have to maintain twice the</font>

358
00:16:56,560 --> 00:17:01,109
tooling<font color="#E5E5E5"> as well and you have</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> train</font>

359
00:16:59,260 --> 00:17:04,599
people to<font color="#E5E5E5"> be able to operate multiple</font>

360
00:17:01,110 --> 00:17:07,030
<font color="#E5E5E5">different networks and then finally I</font>

361
00:17:04,599 --> 00:17:08,379
mean you have twice<font color="#CCCCCC"> the things running</font>

362
00:17:07,030 --> 00:17:11,319
<font color="#CCCCCC">your network is just</font><font color="#E5E5E5"> twice the things</font>

363
00:17:08,380 --> 00:17:12,910
that can can fail and then finally we

364
00:17:11,319 --> 00:17:16,149
<font color="#E5E5E5">wanted to make sure that</font><font color="#CCCCCC"> this migration</font>

365
00:17:12,910 --> 00:17:19,480
wouldn't take like years<font color="#E5E5E5"> so you have to</font>

366
00:17:16,150 --> 00:17:24,010
migrate like<font color="#E5E5E5"> 40 50</font><font color="#CCCCCC"> Pope's</font><font color="#E5E5E5"> I mean just</font>

367
00:17:19,480 --> 00:17:26,920
<font color="#E5E5E5">between finding resources to do it</font>

368
00:17:24,010 --> 00:17:28,210
notifying customer<font color="#E5E5E5"> scheduling</font>

369
00:17:26,920 --> 00:17:29,680
maintenance windows I mean I<font color="#CCCCCC"> can't take</font>

370
00:17:28,210 --> 00:17:32,850
<font color="#E5E5E5">just forever so we wanted to make sure</font>

371
00:17:29,680 --> 00:17:37,780
<font color="#E5E5E5">that this wasn't going to be an issue</font>

372
00:17:32,850 --> 00:17:40,510
<font color="#CCCCCC">but why is why is</font><font color="#E5E5E5"> it an issue I turns</font>

373
00:17:37,780 --> 00:17:42,850
out that migrating from ibgp to ebgp

374
00:17:40,510 --> 00:17:44,620
has a couple of<font color="#E5E5E5"> problems the</font><font color="#CCCCCC"> first one</font>

375
00:17:42,850 --> 00:17:46,780
is that if you're going<font color="#E5E5E5"> to start</font>

376
00:17:44,620 --> 00:17:48,219
<font color="#E5E5E5">changing</font><font color="#CCCCCC"> a SS in your network</font><font color="#E5E5E5"> you have</font>

377
00:17:46,780 --> 00:17:51,550
<font color="#E5E5E5">to synchronize them if you don't make</font>

378
00:17:48,220 --> 00:17:53,620
the<font color="#E5E5E5"> changes at the same time in all the</font>

379
00:17:51,550 --> 00:17:56,800
<font color="#CCCCCC">involved devices</font><font color="#E5E5E5"> you're just going to</font>

380
00:17:53,620 --> 00:17:58,929
bring<font color="#CCCCCC"> down your network</font><font color="#E5E5E5"> because yeah you</font>

381
00:17:56,800 --> 00:18:01,510
have to<font color="#E5E5E5"> have the</font><font color="#CCCCCC"> local and remote</font><font color="#E5E5E5"> users</font>

382
00:17:58,930 --> 00:18:05,160
<font color="#E5E5E5">in sync in both sides or</font>

383
00:18:01,510 --> 00:18:09,820
<font color="#CCCCCC">our decision one</font><font color="#E5E5E5"> won't come up and also</font>

384
00:18:05,160 --> 00:18:12,190
<font color="#E5E5E5">ibgp any</font><font color="#CCCCCC"> bgp prefixes are not compatible</font>

385
00:18:09,820 --> 00:18:17,830
when it comes to<font color="#CCCCCC"> ecmp</font><font color="#E5E5E5"> routing so you</font>

386
00:18:12,190 --> 00:18:21,160
have like this<font color="#CCCCCC"> three routes that</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> can</font>

387
00:18:17,830 --> 00:18:25,899
use as soon<font color="#E5E5E5"> as you migrate one of the</font>

388
00:18:21,160 --> 00:18:27,850
devices<font color="#E5E5E5"> to ebgp that device is going to</font>

389
00:18:25,900 --> 00:18:30,970
start attracting all the traffic<font color="#E5E5E5"> because</font>

390
00:18:27,850 --> 00:18:34,149
a BGP wins over<font color="#E5E5E5"> ibgp and that might</font>

391
00:18:30,970 --> 00:18:37,030
cause some congestion<font color="#CCCCCC"> issues upstream</font>

392
00:18:34,150 --> 00:18:40,780
which is but it's<font color="#CCCCCC"> just</font><font color="#E5E5E5"> going to drop the</font>

393
00:18:37,030 --> 00:18:43,810
service so how do you solve these

394
00:18:40,780 --> 00:18:45,730
problems<font color="#E5E5E5"> well you ask a traditional</font>

395
00:18:43,810 --> 00:18:49,659
network<font color="#E5E5E5"> architect you're gonna basically</font>

396
00:18:45,730 --> 00:18:51,700
get<font color="#E5E5E5"> a dope dope new loop you can you can</font>

397
00:18:49,660 --> 00:18:56,490
basically do it<font color="#E5E5E5"> however</font><font color="#CCCCCC"> we have software</font>

398
00:18:51,700 --> 00:19:00,130
<font color="#E5E5E5">engineers</font><font color="#CCCCCC"> and we just take irises</font><font color="#E5E5E5"> with a</font>

399
00:18:56,490 --> 00:19:04,000
pinch of<font color="#E5E5E5"> salt</font><font color="#CCCCCC"> so we just hacked</font><font color="#E5E5E5"> our way</font>

400
00:19:00,130 --> 00:19:06,700
into<font color="#E5E5E5"> this migration so the first problem</font>

401
00:19:04,000 --> 00:19:09,970
<font color="#CCCCCC">is</font><font color="#E5E5E5"> the same migration right so this</font><font color="#CCCCCC"> is</font>

402
00:19:06,700 --> 00:19:13,720
actually easy<font color="#E5E5E5"> to solve we just came up</font>

403
00:19:09,970 --> 00:19:16,930
<font color="#CCCCCC">with a secondary guess</font><font color="#E5E5E5"> keyword that</font>

404
00:19:13,720 --> 00:19:20,170
<font color="#E5E5E5">basically says like okay if my neighbor</font>

405
00:19:16,930 --> 00:19:22,600
is coming with either these or these yes

406
00:19:20,170 --> 00:19:25,510
just accept it<font color="#E5E5E5"> simple as</font><font color="#CCCCCC"> that</font>

407
00:19:22,600 --> 00:19:27,969
so now I can<font color="#CCCCCC"> only I can just flip</font><font color="#E5E5E5"> the</font>

408
00:19:25,510 --> 00:19:29,920
<font color="#E5E5E5">local a</font><font color="#CCCCCC"> YES on one of</font><font color="#E5E5E5"> the sides and the</font>

409
00:19:27,970 --> 00:19:32,680
migration<font color="#E5E5E5"> is done like I don't need to</font>

410
00:19:29,920 --> 00:19:36,030
<font color="#E5E5E5">synchronize multiple devices at the same</font>

411
00:19:32,680 --> 00:19:38,950
time I can<font color="#CCCCCC"> just do one change at a time</font>

412
00:19:36,030 --> 00:19:42,879
<font color="#E5E5E5">the second problem is a bit</font><font color="#CCCCCC"> trickier is</font>

413
00:19:38,950 --> 00:19:45,070
how do<font color="#E5E5E5"> you make an</font><font color="#CCCCCC"> eye bgp perfect</font>

414
00:19:42,880 --> 00:19:48,490
<font color="#CCCCCC">compatible with an</font><font color="#E5E5E5"> e bt p1 so you can</font>

415
00:19:45,070 --> 00:19:52,330
actually have both prefixes<font color="#CCCCCC"> both routes</font>

416
00:19:48,490 --> 00:19:55,140
in the<font color="#E5E5E5"> same easy NP route so the first</font>

417
00:19:52,330 --> 00:20:00,220
problem<font color="#E5E5E5"> is that a BGP always wins over</font>

418
00:19:55,140 --> 00:20:02,710
<font color="#E5E5E5">ibgp so we</font><font color="#CCCCCC"> developed this knob that</font><font color="#E5E5E5"> says</font>

419
00:20:00,220 --> 00:20:06,400
compare us<font color="#CCCCCC"> I be</font><font color="#E5E5E5"> GP which basically says</font>

420
00:20:02,710 --> 00:20:09,730
if a<font color="#CCCCCC"> bgp session has this</font><font color="#E5E5E5"> knob enabled</font>

421
00:20:06,400 --> 00:20:13,590
<font color="#E5E5E5">treat incoming prefixes as if they were</font>

422
00:20:09,730 --> 00:20:15,500
a<font color="#E5E5E5"> BGP when comparing against another</font>

423
00:20:13,590 --> 00:20:18,379
ibgp or<font color="#CCCCCC"> e</font>

424
00:20:15,500 --> 00:20:19,480
<font color="#CCCCCC">BGP prefix</font><font color="#E5E5E5"> so this is not a problem any</font>

425
00:20:18,380 --> 00:20:22,100
<font color="#E5E5E5">longer for us</font>

426
00:20:19,480 --> 00:20:23,630
however<font color="#CCCCCC"> you're</font><font color="#E5E5E5"> just moving the problem</font>

427
00:20:22,100 --> 00:20:26,120
somewhere else<font color="#CCCCCC"> because now it turns out</font>

428
00:20:23,630 --> 00:20:27,860
<font color="#CCCCCC">that the es path on the</font><font color="#E5E5E5"> BGP side is</font>

429
00:20:26,120 --> 00:20:31,669
going<font color="#E5E5E5"> to</font><font color="#CCCCCC"> be longer because</font><font color="#E5E5E5"> ebgp keeps</font>

430
00:20:27,860 --> 00:20:35,179
<font color="#CCCCCC">prepending at each</font><font color="#E5E5E5"> halt the the</font><font color="#CCCCCC"> Deus of</font>

431
00:20:31,670 --> 00:20:38,300
the of the router<font color="#E5E5E5"> announcing it so we</font>

432
00:20:35,180 --> 00:20:40,340
developed<font color="#E5E5E5"> this order note</font><font color="#CCCCCC"> that says skip</font>

433
00:20:38,300 --> 00:20:42,290
private a spot prefix which basically

434
00:20:40,340 --> 00:20:44,990
<font color="#E5E5E5">what it</font><font color="#CCCCCC"> does is when computing</font><font color="#E5E5E5"> the</font>

435
00:20:42,290 --> 00:20:47,120
<font color="#E5E5E5">length of the yes path ignore all the</font>

436
00:20:44,990 --> 00:20:49,070
<font color="#CCCCCC">leading</font><font color="#E5E5E5"> private</font>

437
00:20:47,120 --> 00:20:51,320
aliases<font color="#E5E5E5"> so now because</font><font color="#CCCCCC"> they live in a</font>

438
00:20:49,070 --> 00:20:53,510
yes<font color="#CCCCCC"> in the yes</font><font color="#E5E5E5"> part is 65,000 that's</font>

439
00:20:51,320 --> 00:20:55,850
just going<font color="#E5E5E5"> to be ignored</font><font color="#CCCCCC"> so the the</font>

440
00:20:53,510 --> 00:20:58,580
length of both prefixes are just going

441
00:20:55,850 --> 00:21:01,699
<font color="#CCCCCC">to</font><font color="#E5E5E5"> be the same and then finally we</font>

442
00:20:58,580 --> 00:21:03,770
reduce in a local proof to signal

443
00:21:01,700 --> 00:21:07,520
various things in<font color="#E5E5E5"> there in the network</font>

444
00:21:03,770 --> 00:21:11,750
and ebgp doesn't transport local

445
00:21:07,520 --> 00:21:15,139
preference<font color="#E5E5E5"> so we just added</font><font color="#CCCCCC"> another knob</font>

446
00:21:11,750 --> 00:21:20,150
<font color="#E5E5E5">to to be</font><font color="#CCCCCC"> able</font><font color="#E5E5E5"> to transport local proof</font>

447
00:21:15,140 --> 00:21:22,190
<font color="#E5E5E5">between a BGP speakers so now that we</font>

448
00:21:20,150 --> 00:21:25,760
<font color="#CCCCCC">have all</font><font color="#E5E5E5"> these knobs the migration</font>

449
00:21:22,190 --> 00:21:28,370
process is as simple<font color="#CCCCCC"> as as follows doing</font>

450
00:21:25,760 --> 00:21:30,830
<font color="#E5E5E5">the step</font><font color="#CCCCCC"> one</font><font color="#E5E5E5"> you just enable the</font>

451
00:21:28,370 --> 00:21:34,429
secondary a yes that<font color="#CCCCCC"> you want to accept</font>

452
00:21:30,830 --> 00:21:37,790
and all the other knobs compare us ibgp

453
00:21:34,430 --> 00:21:39,440
<font color="#E5E5E5">skip</font><font color="#CCCCCC"> privatize path prefix</font><font color="#E5E5E5"> allow</font><font color="#CCCCCC"> BGP</font>

454
00:21:37,790 --> 00:21:41,690
local<font color="#CCCCCC"> proof and this change is</font>

455
00:21:39,440 --> 00:21:43,280
completely<font color="#E5E5E5"> no cause it has no impact</font>

456
00:21:41,690 --> 00:21:45,380
whatsoever so you<font color="#E5E5E5"> can just you can just</font>

457
00:21:43,280 --> 00:21:48,740
deploy it everywhere without any

458
00:21:45,380 --> 00:21:51,470
maintenance whatsoever<font color="#CCCCCC"> and then step</font><font color="#E5E5E5"> two</font>

459
00:21:48,740 --> 00:21:55,160
is<font color="#CCCCCC"> just as simple as flipping the local</font>

460
00:21:51,470 --> 00:21:58,580
yes on<font color="#CCCCCC"> each</font><font color="#E5E5E5"> advice and because we made a</font>

461
00:21:55,160 --> 00:22:01,160
BGP and ibgp prefixes compatible this

462
00:21:58,580 --> 00:22:03,260
<font color="#E5E5E5">change is going to cause a BGP session</font>

463
00:22:01,160 --> 00:22:06,260
to<font color="#E5E5E5"> flop but it's not going</font><font color="#CCCCCC"> to cause any</font>

464
00:22:03,260 --> 00:22:08,600
traffic<font color="#E5E5E5"> to flow differently when the</font>

465
00:22:06,260 --> 00:22:11,870
session is<font color="#E5E5E5"> up all traffic will</font><font color="#CCCCCC"> flow as</font>

466
00:22:08,600 --> 00:22:13,879
it was flowing before<font color="#E5E5E5"> doing this change</font>

467
00:22:11,870 --> 00:22:16,820
<font color="#CCCCCC">so thanks to this</font><font color="#E5E5E5"> we don't need to start</font>

468
00:22:13,880 --> 00:22:18,710
scheduling maintenances draining traffic

469
00:22:16,820 --> 00:22:20,240
notifying customer because the<font color="#E5E5E5"> change is</font>

470
00:22:18,710 --> 00:22:25,520
not<font color="#CCCCCC"> going</font><font color="#E5E5E5"> to have any</font><font color="#CCCCCC"> impact on the</font>

471
00:22:20,240 --> 00:22:28,190
network<font color="#CCCCCC"> here is an</font><font color="#E5E5E5"> example we</font><font color="#CCCCCC"> have this</font>

472
00:22:25,520 --> 00:22:29,629
prefix<font color="#CCCCCC"> that is coming</font><font color="#E5E5E5"> from two</font><font color="#CCCCCC"> different</font>

473
00:22:28,190 --> 00:22:33,560
switches

474
00:22:29,630 --> 00:22:37,130
one of them is an<font color="#E5E5E5"> ibgp speaker that one</font>

475
00:22:33,560 --> 00:22:41,450
is<font color="#E5E5E5"> a nanny</font><font color="#CCCCCC"> bgp speaker you</font><font color="#E5E5E5"> can see that</font>

476
00:22:37,130 --> 00:22:45,440
the path is completely different

477
00:22:41,450 --> 00:22:47,420
the ebgp one is way way longer<font color="#E5E5E5"> and you</font>

478
00:22:45,440 --> 00:22:49,940
can see that the local<font color="#CCCCCC"> preface being</font>

479
00:22:47,420 --> 00:22:51,980
transported as well on the<font color="#E5E5E5"> on</font><font color="#CCCCCC"> the B TV</font>

480
00:22:49,940 --> 00:22:54,470
speaker<font color="#E5E5E5"> so finally thanks to all the</font>

481
00:22:51,980 --> 00:22:58,040
knobs<font color="#E5E5E5"> we have this</font><font color="#CCCCCC"> ECM Pedro that is</font>

482
00:22:54,470 --> 00:23:05,000
<font color="#E5E5E5">taken</font><font color="#CCCCCC"> into</font><font color="#E5E5E5"> account both next hopes not</font>

483
00:22:58,040 --> 00:23:09,980
only one so yeah<font color="#E5E5E5"> so now I have a few</font>

484
00:23:05,000 --> 00:23:12,980
closing remarks<font color="#E5E5E5"> pretty sure that now</font>

485
00:23:09,980 --> 00:23:16,420
you're thinking<font color="#E5E5E5"> if we consider this or</font>

486
00:23:12,980 --> 00:23:18,440
that so I have a few primitive slides

487
00:23:16,420 --> 00:23:23,780
<font color="#E5E5E5">the first one did you can see your open</font>

488
00:23:18,440 --> 00:23:26,540
<font color="#E5E5E5">flow well just gonna let the gif play a</font>

489
00:23:23,780 --> 00:23:29,600
few times<font color="#E5E5E5"> yeah I'm gonna make any</font>

490
00:23:26,540 --> 00:23:34,190
comment then you can see<font color="#E5E5E5"> there segment</font>

491
00:23:29,600 --> 00:23:35,510
<font color="#CCCCCC">riding so with it segment</font><font color="#E5E5E5"> routing the</font>

492
00:23:34,190 --> 00:23:38,990
core ideas are are great

493
00:23:35,510 --> 00:23:40,760
<font color="#CCCCCC">I actually liked segment in level</font><font color="#E5E5E5"> main</font>

494
00:23:38,990 --> 00:23:43,160
problem for<font color="#CCCCCC"> us is that segment Roddy was</font>

495
00:23:40,760 --> 00:23:45,980
super complex for what we wanted to<font color="#E5E5E5"> do I</font>

496
00:23:43,160 --> 00:23:49,270
<font color="#E5E5E5">mean we just wanted</font><font color="#CCCCCC"> to do a crispier</font>

497
00:23:45,980 --> 00:23:51,770
<font color="#E5E5E5">selection so like 99% of the features of</font>

498
00:23:49,270 --> 00:23:54,110
<font color="#E5E5E5">segment rot in the Sun</font><font color="#CCCCCC"> that didn't I</font>

499
00:23:51,770 --> 00:23:54,860
mean they didn't<font color="#CCCCCC"> really apply to us</font><font color="#E5E5E5"> it</font>

500
00:23:54,110 --> 00:23:57,260
was<font color="#CCCCCC"> assault</font>

501
00:23:54,860 --> 00:24:00,530
<font color="#CCCCCC">half the program like</font><font color="#E5E5E5"> segment</font><font color="#CCCCCC"> routing</font>

502
00:23:57,260 --> 00:24:03,260
<font color="#E5E5E5">kind of still keeps the control</font><font color="#CCCCCC"> of the</font>

503
00:24:00,530 --> 00:24:07,700
<font color="#E5E5E5">other</font><font color="#CCCCCC"> paths in the network either</font><font color="#E5E5E5"> via a</font>

504
00:24:03,260 --> 00:24:11,420
<font color="#E5E5E5">BGP controller or by policies and we</font>

505
00:24:07,700 --> 00:24:12,940
wanted to to push the control<font color="#E5E5E5"> to the to</font>

506
00:24:11,420 --> 00:24:15,620
the application so it didn't really

507
00:24:12,940 --> 00:24:18,560
<font color="#CCCCCC">matter at all with what</font><font color="#E5E5E5"> we wanted to</font><font color="#CCCCCC"> do</font>

508
00:24:15,620 --> 00:24:21,530
and also there<font color="#E5E5E5"> was no open</font><font color="#CCCCCC"> source option</font>

509
00:24:18,560 --> 00:24:22,639
and for<font color="#E5E5E5"> us I</font><font color="#CCCCCC"> mean within we have a few</font>

510
00:24:21,530 --> 00:24:25,070
developers but we don't have<font color="#E5E5E5"> all</font><font color="#CCCCCC"> the</font>

511
00:24:22,640 --> 00:24:27,530
<font color="#CCCCCC">resources to</font><font color="#E5E5E5"> develop everything that</font>

512
00:24:25,070 --> 00:24:29,240
segment routing entails<font color="#CCCCCC"> I don't even</font>

513
00:24:27,530 --> 00:24:32,050
<font color="#CCCCCC">think that</font><font color="#E5E5E5"> any vendor</font><font color="#CCCCCC"> actually</font><font color="#E5E5E5"> support</font>

514
00:24:29,240 --> 00:24:37,280
<font color="#E5E5E5">segment rot in jail at least not in</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> ga</font>

515
00:24:32,050 --> 00:24:40,129
manner<font color="#E5E5E5"> be</font><font color="#CCCCCC"> he</font><font color="#E5E5E5"> PLU</font><font color="#CCCCCC"> so this is interesting</font>

516
00:24:37,280 --> 00:24:42,200
<font color="#E5E5E5">this Maps a bit better to what we</font><font color="#CCCCCC"> are</font>

517
00:24:40,130 --> 00:24:43,760
doing<font color="#CCCCCC"> however</font>

518
00:24:42,200 --> 00:24:46,700
<font color="#E5E5E5">it has the same problem</font><font color="#CCCCCC"> our</font><font color="#E5E5E5"> segment</font>

519
00:24:43,760 --> 00:24:49,160
<font color="#CCCCCC">hardness as it keeps the the decision of</font>

520
00:24:46,700 --> 00:24:50,930
how to roll traffic on the on the

521
00:24:49,160 --> 00:24:53,390
network<font color="#E5E5E5"> and again we wanted to push it</font>

522
00:24:50,930 --> 00:24:55,550
<font color="#CCCCCC">down to</font><font color="#E5E5E5"> the to the tool application</font>

523
00:24:53,390 --> 00:24:58,340
<font color="#CCCCCC">although I think it's the right thing to</font>

524
00:24:55,550 --> 00:25:00,620
<font color="#CCCCCC">do</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> we might in the future revisit</font>

525
00:24:58,340 --> 00:25:04,250
the solution and<font color="#E5E5E5"> maybe implement</font><font color="#CCCCCC"> BGP Lu</font>

526
00:25:00,620 --> 00:25:06,199
<font color="#E5E5E5">at least to transport the information</font>

527
00:25:04,250 --> 00:25:08,680
about<font color="#CCCCCC"> M pillars which we do today with</font>

528
00:25:06,200 --> 00:25:11,030
the communities<font color="#E5E5E5"> but that has a few</font>

529
00:25:08,680 --> 00:25:14,750
complexities<font color="#E5E5E5"> there is no</font><font color="#CCCCCC"> open-source</font>

530
00:25:11,030 --> 00:25:17,300
implementation for<font color="#CCCCCC"> BGP</font><font color="#E5E5E5"> you and the trick</font>

531
00:25:14,750 --> 00:25:18,560
with<font color="#CCCCCC"> bgp</font><font color="#E5E5E5"> lu is that you require a new</font>

532
00:25:17,300 --> 00:25:20,360
<font color="#CCCCCC">address</font><font color="#E5E5E5"> family and you have to</font>

533
00:25:18,560 --> 00:25:24,230
synchronize both<font color="#E5E5E5"> others</font><font color="#CCCCCC"> formally because</font>

534
00:25:20,360 --> 00:25:26,209
people do requires you to do a recursive

535
00:25:24,230 --> 00:25:28,790
lookup to know how to reach the next

536
00:25:26,210 --> 00:25:32,360
hope<font color="#E5E5E5"> or the road that you got via</font>

537
00:25:28,790 --> 00:25:34,520
the regular ipv4<font color="#E5E5E5"> ipv6 address family</font><font color="#CCCCCC"> so</font>

538
00:25:32,360 --> 00:25:37,520
yeah you<font color="#E5E5E5"> have</font><font color="#CCCCCC"> to start dealing with race</font>

539
00:25:34,520 --> 00:25:42,020
conditions or something more<font color="#E5E5E5"> complex</font><font color="#CCCCCC"> to</font>

540
00:25:37,520 --> 00:25:44,500
implement<font color="#E5E5E5"> and yeah to summarize</font>

541
00:25:42,020 --> 00:25:48,520
everything we<font color="#E5E5E5"> build would</font><font color="#CCCCCC"> be built in</font>

542
00:25:44,500 --> 00:25:52,370
2013<font color="#E5E5E5"> because there was nothing better</font>

543
00:25:48,520 --> 00:25:54,170
<font color="#CCCCCC">routers were super expensive switches</font>

544
00:25:52,370 --> 00:25:56,600
had certain limitations so we had to

545
00:25:54,170 --> 00:26:00,110
work<font color="#CCCCCC"> with them and that meant</font><font color="#E5E5E5"> doing all</font>

546
00:25:56,600 --> 00:26:02,600
this horrible<font color="#E5E5E5"> there are two hacks having</font>

547
00:26:00,110 --> 00:26:05,510
the<font color="#CCCCCC"> custom control</font><font color="#E5E5E5"> plane was critical</font>

548
00:26:02,600 --> 00:26:08,330
because we saved a lot of<font color="#E5E5E5"> money</font><font color="#CCCCCC"> in time</font>

549
00:26:05,510 --> 00:26:11,270
<font color="#E5E5E5">and it also allowed us to attract talent</font>

550
00:26:08,330 --> 00:26:13,040
<font color="#E5E5E5">when you have this cool solution</font><font color="#CCCCCC"> it's</font>

551
00:26:11,270 --> 00:26:17,420
easier to hire people<font color="#E5E5E5"> than when you're</font>

552
00:26:13,040 --> 00:26:19,610
just<font color="#CCCCCC"> doing things as as</font><font color="#E5E5E5"> useful</font><font color="#CCCCCC"> and then</font>

553
00:26:17,420 --> 00:26:23,030
finally we<font color="#CCCCCC"> just revisit the dissolution</font>

554
00:26:19,610 --> 00:26:27,169
when the team was larger and the worst

555
00:26:23,030 --> 00:26:28,879
less hard constraints so we<font color="#CCCCCC"> could build</font>

556
00:26:27,170 --> 00:26:31,610
something something better

557
00:26:28,880 --> 00:26:35,000
we finally hide our way into<font color="#E5E5E5"> this</font>

558
00:26:31,610 --> 00:26:37,219
seamless<font color="#E5E5E5"> migration which is mixed</font><font color="#CCCCCC"> a lot</font>

559
00:26:35,000 --> 00:26:38,960
of a difference and<font color="#CCCCCC"> open sore was</font>

560
00:26:37,220 --> 00:26:42,080
critical because<font color="#E5E5E5"> we're not open so we</font>

561
00:26:38,960 --> 00:26:45,880
couldn't<font color="#E5E5E5"> have</font><font color="#CCCCCC"> pull this off because</font>

562
00:26:42,080 --> 00:26:48,560
<font color="#E5E5E5">resources would have been an issue and</font>

563
00:26:45,880 --> 00:26:52,360
this is everything<font color="#E5E5E5"> someone has questions</font>

564
00:26:48,560 --> 00:26:52,360
<font color="#E5E5E5">I'll be happy</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> answer them</font>

565
00:26:56,980 --> 00:27:00,740
so yep

566
00:26:58,790 --> 00:27:04,129
<font color="#E5E5E5">Ryan datalink Inquisitor and which</font>

567
00:27:00,740 --> 00:27:06,440
burner<font color="#CCCCCC"> you mentioned your last slide</font>

568
00:27:04,130 --> 00:27:08,840
you saved a bunch of time and<font color="#CCCCCC"> money can</font>

569
00:27:06,440 --> 00:27:11,030
<font color="#E5E5E5">you quantify that I mean that's four</font>

570
00:27:08,840 --> 00:27:13,699
years<font color="#CCCCCC"> of development and it's software</font>

571
00:27:11,030 --> 00:27:15,649
developments<font color="#E5E5E5"> salaries you know how much</font>

572
00:27:13,700 --> 00:27:19,340
did<font color="#E5E5E5"> you actually say by doing this so</font>

573
00:27:15,650 --> 00:27:21,620
with time<font color="#E5E5E5"> I mean time in getting</font><font color="#CCCCCC"> things</font>

574
00:27:19,340 --> 00:27:24,020
done like if you need<font color="#CCCCCC"> a new feature and</font>

575
00:27:21,620 --> 00:27:26,300
you have the traditional<font color="#E5E5E5"> vendor how long</font>

576
00:27:24,020 --> 00:27:28,790
does it<font color="#E5E5E5"> going to take it's going to take</font>

577
00:27:26,300 --> 00:27:31,399
a<font color="#E5E5E5"> year you</font><font color="#CCCCCC"> have to open</font><font color="#E5E5E5"> you have</font><font color="#CCCCCC"> to talk</font>

578
00:27:28,790 --> 00:27:33,170
with your<font color="#E5E5E5"> se you have to make sure</font><font color="#CCCCCC"> that</font>

579
00:27:31,400 --> 00:27:34,340
they get<font color="#E5E5E5"> it in the pipeline then they</font>

580
00:27:33,170 --> 00:27:37,460
have to develop<font color="#E5E5E5"> it then you have to</font>

581
00:27:34,340 --> 00:27:39,439
<font color="#CCCCCC">upgrade all your</font><font color="#E5E5E5"> network so you have</font>

582
00:27:37,460 --> 00:27:42,800
that new feature so<font color="#E5E5E5"> saving time I mean</font>

583
00:27:39,440 --> 00:27:45,080
<font color="#E5E5E5">we control our own software so we can</font>

584
00:27:42,800 --> 00:27:47,120
<font color="#CCCCCC">just develop it and deploy it</font><font color="#E5E5E5"> and we</font>

585
00:27:45,080 --> 00:27:49,610
have the future<font color="#E5E5E5"> already and morning well</font>

586
00:27:47,120 --> 00:27:51,739
I mean<font color="#E5E5E5"> if you have like I don't know</font>

587
00:27:49,610 --> 00:27:56,139
like<font color="#E5E5E5"> 2000</font><font color="#CCCCCC"> Network</font><font color="#E5E5E5"> Devices and each one</font>

588
00:27:51,740 --> 00:28:02,450
cost like<font color="#CCCCCC"> $20,000 compared to $500,000</font>

589
00:27:56,140 --> 00:28:04,490
<font color="#E5E5E5">it's an easy</font><font color="#CCCCCC"> mad mad</font><font color="#E5E5E5"> PTAC</font><font color="#CCCCCC"> Yahoo this</font>

590
00:28:02,450 --> 00:28:07,520
sounds really<font color="#E5E5E5"> great</font><font color="#CCCCCC"> now I couldn't</font><font color="#E5E5E5"> help</font>

591
00:28:04,490 --> 00:28:09,680
noticing that<font color="#CCCCCC"> you took some</font><font color="#E5E5E5"> of their</font>

592
00:28:07,520 --> 00:28:12,940
learnings<font color="#E5E5E5"> from the past 20 years about</font>

593
00:28:09,680 --> 00:28:15,260
<font color="#E5E5E5">BGP and sort of said</font><font color="#CCCCCC"> well you know</font>

594
00:28:12,940 --> 00:28:17,060
<font color="#E5E5E5">worrying about loops and things like</font>

595
00:28:15,260 --> 00:28:18,890
that<font color="#CCCCCC"> really isn't necessary in this case</font>

596
00:28:17,060 --> 00:28:21,320
<font color="#CCCCCC">so we're gonna ignore things</font><font color="#E5E5E5"> like a s</font>

597
00:28:18,890 --> 00:28:23,570
path length<font color="#E5E5E5"> and we're gonna change</font>

598
00:28:21,320 --> 00:28:25,669
<font color="#E5E5E5">around the route priorities in your</font>

599
00:28:23,570 --> 00:28:27,800
simplistic diagram here<font color="#CCCCCC"> of</font><font color="#E5E5E5"> just kind of</font>

600
00:28:25,670 --> 00:28:29,510
the<font color="#E5E5E5"> why yeah a be and host it looks</font>

601
00:28:27,800 --> 00:28:31,040
fairly<font color="#E5E5E5"> straightforward did you have any</font>

602
00:28:29,510 --> 00:28:34,010
situations where the tweaks you are

603
00:28:31,040 --> 00:28:35,930
doing<font color="#E5E5E5"> caused any potential loop</font>

604
00:28:34,010 --> 00:28:38,030
situations or unexpected

605
00:28:35,930 --> 00:28:39,920
why are my packets going<font color="#E5E5E5"> that away</font>

606
00:28:38,030 --> 00:28:43,820
instead<font color="#CCCCCC"> of this away yeah</font>

607
00:28:39,920 --> 00:28:46,580
so we're ignoring<font color="#CCCCCC"> the yeses the leaving</font>

608
00:28:43,820 --> 00:28:49,939
a yes<font color="#CCCCCC"> system for the sake of computing</font>

609
00:28:46,580 --> 00:28:54,139
the length so we're still doing the

610
00:28:49,940 --> 00:28:55,370
regular probational look so you<font color="#CCCCCC"> didn't</font>

611
00:28:54,140 --> 00:28:56,810
just completely throw them away<font color="#E5E5E5"> they're</font>

612
00:28:55,370 --> 00:28:58,669
still<font color="#E5E5E5"> being considered yeah just</font>

613
00:28:56,810 --> 00:29:00,440
<font color="#CCCCCC">traveling yeah it's just when computing</font>

614
00:28:58,670 --> 00:29:02,900
<font color="#CCCCCC">the length</font><font color="#E5E5E5"> so like just ignore them now</font>

615
00:29:00,440 --> 00:29:04,160
<font color="#E5E5E5">that you're counting them but then when</font>

616
00:29:02,900 --> 00:29:05,800
<font color="#E5E5E5">you are taking them to make</font><font color="#CCCCCC"> sure</font><font color="#E5E5E5"> that</font>

617
00:29:04,160 --> 00:29:17,380
you don't<font color="#E5E5E5"> have a low B still</font>

618
00:29:05,800 --> 00:29:20,440
Justin<font color="#E5E5E5"> okay thank you hey I'm sorry I</font>

619
00:29:17,380 --> 00:29:24,520
guess I have it<font color="#CCCCCC"> dim Honi is see</font><font color="#E5E5E5"> over</font>

620
00:29:20,440 --> 00:29:26,380
here sorry<font color="#CCCCCC"> it looks like you're using</font><font color="#E5E5E5"> a</font>

621
00:29:24,520 --> 00:29:30,270
lot of<font color="#E5E5E5"> mainline bird have any of those</font>

622
00:29:26,380 --> 00:29:30,270
changes<font color="#E5E5E5"> made it back into the</font><font color="#CCCCCC"> mainline</font>

623
00:29:30,660 --> 00:29:37,030
so we we have up streamed everything

624
00:29:34,410 --> 00:29:40,900
<font color="#E5E5E5">both in the kernel</font><font color="#CCCCCC"> because we</font><font color="#E5E5E5"> had to do</font>

625
00:29:37,030 --> 00:29:43,120
a few kernel changes for the for support

626
00:29:40,900 --> 00:29:45,790
in MPLS<font color="#E5E5E5"> on the on the host but</font>

627
00:29:43,120 --> 00:29:48,309
everything has<font color="#E5E5E5"> been submitted</font><font color="#CCCCCC"> to the</font>

628
00:29:45,790 --> 00:29:50,740
<font color="#E5E5E5">respective obstruents bird hasn't</font>

629
00:29:48,309 --> 00:29:53,440
<font color="#E5E5E5">approved yet all the patches but they</font>

630
00:29:50,740 --> 00:29:55,510
are there so<font color="#E5E5E5"> you can either press them</font>

631
00:29:53,440 --> 00:29:58,350
to accept them or just<font color="#E5E5E5"> download</font><font color="#CCCCCC"> them and</font>

632
00:29:55,510 --> 00:30:02,170
<font color="#E5E5E5">apply them yourself excellent thank you</font>

633
00:29:58,350 --> 00:30:05,409
hi<font color="#CCCCCC"> David</font><font color="#E5E5E5"> i'm ernesto by the way awesome</font>

634
00:30:02,170 --> 00:30:11,110
projects all the<font color="#CCCCCC"> way back from to the</font>

635
00:30:05,410 --> 00:30:13,690
spotify<font color="#CCCCCC"> s ir prod</font><font color="#E5E5E5"> okay</font><font color="#CCCCCC"> my question is in</font>

636
00:30:11,110 --> 00:30:15,428
<font color="#CCCCCC">regards to</font><font color="#E5E5E5"> your one of</font><font color="#CCCCCC"> the things that</font>

637
00:30:13,690 --> 00:30:18,010
<font color="#E5E5E5">you address here is kind of purine</font>

638
00:30:15,429 --> 00:30:24,270
engineering on the address so do you

639
00:30:18,010 --> 00:30:27,340
<font color="#E5E5E5">support for</font><font color="#CCCCCC"> the same destination prefix</font>

640
00:30:24,270 --> 00:30:30,490
<font color="#CCCCCC">sending traffic to more than one</font>

641
00:30:27,340 --> 00:30:34,570
interface<font color="#E5E5E5"> and if not then how do you</font>

642
00:30:30,490 --> 00:30:38,380
address<font color="#E5E5E5"> the situations where the certain</font>

643
00:30:34,570 --> 00:30:40,450
prefix attracts a lot of<font color="#E5E5E5"> traffic on one</font>

644
00:30:38,380 --> 00:30:43,179
interface so when you switch from<font color="#E5E5E5"> one to</font>

645
00:30:40,450 --> 00:30:47,230
the other that's<font color="#E5E5E5"> a lot</font><font color="#CCCCCC"> of traffic shift</font>

646
00:30:43,179 --> 00:30:50,590
so this is for for egress<font color="#CCCCCC"> right like if</font>

647
00:30:47,230 --> 00:30:53,320
traffic<font color="#E5E5E5"> is being sent from the transit</font>

648
00:30:50,590 --> 00:30:55,240
<font color="#CCCCCC">provider to us there</font><font color="#E5E5E5"> is nothing we can</font>

649
00:30:53,320 --> 00:30:58,510
do there<font color="#E5E5E5"> with this solution just a</font>

650
00:30:55,240 --> 00:31:01,390
matter of<font color="#CCCCCC"> yes path preparing mate</font>

651
00:30:58,510 --> 00:31:06,490
<font color="#E5E5E5">changing blah blah and regarding</font>

652
00:31:01,390 --> 00:31:09,340
supporting<font color="#E5E5E5"> sending traffic to</font><font color="#CCCCCC"> the same</font>

653
00:31:06,490 --> 00:31:13,510
<font color="#CCCCCC">IP via different transits that's the</font>

654
00:31:09,340 --> 00:31:15,428
whole<font color="#E5E5E5"> point of this so you</font><font color="#CCCCCC"> can you can</font>

655
00:31:13,510 --> 00:31:17,679
send<font color="#CCCCCC"> traffic like that was the</font><font color="#E5E5E5"> STP</font>

656
00:31:15,429 --> 00:31:18,190
example that I showed<font color="#CCCCCC"> where you are</font>

657
00:31:17,679 --> 00:31:19,960
pinging

658
00:31:18,190 --> 00:31:22,540
to the

659
00:31:19,960 --> 00:31:25,240
the same<font color="#CCCCCC"> ip</font><font color="#E5E5E5"> via all the circuits at the</font>

660
00:31:22,540 --> 00:31:28,750
same time so you can get matrix in real

661
00:31:25,240 --> 00:31:31,150
time<font color="#CCCCCC"> over</font><font color="#E5E5E5"> all of them okay</font><font color="#CCCCCC"> and there is</font>

662
00:31:28,750 --> 00:31:36,280
a<font color="#E5E5E5"> feedback loop in terms of utilization</font>

663
00:31:31,150 --> 00:31:38,680
as well<font color="#CCCCCC"> well I mean the bandwidth</font>

664
00:31:36,280 --> 00:31:42,180
utilization you mean yeah is that is

665
00:31:38,680 --> 00:31:45,010
<font color="#CCCCCC">that part</font><font color="#E5E5E5"> of the considerations well</font>

666
00:31:42,180 --> 00:31:47,560
that's kind of a different<font color="#CCCCCC"> topic like</font>

667
00:31:45,010 --> 00:31:50,200
that<font color="#E5E5E5"> tool is just a wrapper around</font><font color="#CCCCCC"> ping</font>

668
00:31:47,560 --> 00:31:55,000
<font color="#E5E5E5">to be able to ping around through all</font>

669
00:31:50,200 --> 00:31:56,950
<font color="#CCCCCC">the other</font><font color="#E5E5E5"> circuits</font><font color="#CCCCCC"> but you could you</font>

670
00:31:55,000 --> 00:31:58,900
could start<font color="#E5E5E5"> measuring things and taking</font>

671
00:31:56,950 --> 00:32:01,720
that<font color="#E5E5E5"> into</font><font color="#CCCCCC"> account so the application</font>

672
00:31:58,900 --> 00:32:03,750
could decide which one to to use but

673
00:32:01,720 --> 00:32:06,460
that's<font color="#E5E5E5"> kind of</font><font color="#CCCCCC"> like</font><font color="#E5E5E5"> a more like</font><font color="#CCCCCC"> a</font>

674
00:32:03,750 --> 00:32:08,200
congestion<font color="#E5E5E5"> control mechanism I guess so</font>

675
00:32:06,460 --> 00:32:20,560
it's kind<font color="#E5E5E5"> of out of scope of this</font>

676
00:32:08,200 --> 00:32:24,460
particular<font color="#CCCCCC"> tool so</font><font color="#E5E5E5"> Linux is and Linux</font>

677
00:32:20,560 --> 00:32:26,590
<font color="#CCCCCC">and MPLS tax or it sounds weird</font><font color="#E5E5E5"> don't</font>

678
00:32:24,460 --> 00:32:31,900
<font color="#E5E5E5">exactly the most high-performance</font><font color="#CCCCCC"> stuff</font>

679
00:32:26,590 --> 00:32:35,800
there<font color="#E5E5E5"> is did you guys figure</font><font color="#CCCCCC"> uh perform</font>

680
00:32:31,900 --> 00:32:37,450
at twice<font color="#E5E5E5"> it's no problem whatsoever you</font>

681
00:32:35,800 --> 00:32:38,919
have<font color="#CCCCCC"> no I mean we have been measuring</font>

682
00:32:37,450 --> 00:32:42,850
<font color="#E5E5E5">things and we get exactly</font><font color="#CCCCCC"> the same</font>

683
00:32:38,920 --> 00:32:46,450
<font color="#E5E5E5">throughput with IP are like regular IP</font>

684
00:32:42,850 --> 00:32:48,070
and mpls<font color="#E5E5E5"> like for us it was I mean we</font>

685
00:32:46,450 --> 00:32:50,340
were that's<font color="#E5E5E5"> the reason why we</font><font color="#CCCCCC"> actually</font>

686
00:32:48,070 --> 00:32:53,020
used MPLS we were<font color="#CCCCCC"> evaluating</font><font color="#E5E5E5"> VX lon</font>

687
00:32:50,340 --> 00:32:54,939
instead of MPLS<font color="#CCCCCC"> but the thing is that</font>

688
00:32:53,020 --> 00:32:57,550
the mix<font color="#E5E5E5"> that we had didn't support</font>

689
00:32:54,940 --> 00:32:59,500
<font color="#CCCCCC">Hardware</font><font color="#E5E5E5"> of loathing for V excellent by</font>

690
00:32:57,550 --> 00:33:00,580
<font color="#E5E5E5">the they did for MPLS which meant that</font>

691
00:32:59,500 --> 00:33:02,920
we could do

692
00:33:00,580 --> 00:33:04,810
MPLS without<font color="#E5E5E5"> losing any performance</font>

693
00:33:02,920 --> 00:33:07,480
whatsoever<font color="#E5E5E5"> because it's done</font><font color="#CCCCCC"> in the neck</font>

694
00:33:04,810 --> 00:33:09,129
so<font color="#E5E5E5"> you your</font><font color="#CCCCCC"> neck support yeah you can</font>

695
00:33:07,480 --> 00:33:11,860
actually see<font color="#CCCCCC"> like there were at the very</font>

696
00:33:09,130 --> 00:33:14,590
<font color="#CCCCCC">beginning a few performances</font><font color="#E5E5E5"> issues but</font>

697
00:33:11,860 --> 00:33:16,330
those were<font color="#CCCCCC"> just bugs in the kernel so</font>

698
00:33:14,590 --> 00:33:18,760
you can see the first two links<font color="#E5E5E5"> that's</font>

699
00:33:16,330 --> 00:33:21,699
actually going to<font color="#E5E5E5"> corrode</font><font color="#CCCCCC"> or those are</font>

700
00:33:18,760 --> 00:33:23,620
the the bug fixes<font color="#CCCCCC"> actually</font><font color="#E5E5E5"> making sure</font>

701
00:33:21,700 --> 00:33:29,790
that performance wise<font color="#E5E5E5"> they behave</font>

702
00:33:23,620 --> 00:33:29,790
exactly<font color="#E5E5E5"> as River IP oh nice thanks</font>

703
00:33:30,060 --> 00:33:36,210
<font color="#E5E5E5">Julie</font><font color="#CCCCCC"> gleefully I'm just one comment</font><font color="#E5E5E5"> on</font>

704
00:33:32,730 --> 00:33:39,180
that<font color="#CCCCCC"> I think one of our experiences with</font>

705
00:33:36,210 --> 00:33:40,620
<font color="#E5E5E5">this was actually</font><font color="#CCCCCC"> that the stuff is</font>

706
00:33:39,180 --> 00:33:44,160
substantially better<font color="#E5E5E5"> than it was two</font>

707
00:33:40,620 --> 00:33:45,870
years<font color="#E5E5E5"> ago</font><font color="#CCCCCC"> which is I think a big</font>

708
00:33:44,160 --> 00:33:49,680
improvement with respect to MPLS

709
00:33:45,870 --> 00:33:51,530
performance<font color="#E5E5E5"> so the</font><font color="#CCCCCC"> inclusion of the</font>

710
00:33:49,680 --> 00:33:56,250
stuff in the kernel<font color="#CCCCCC"> has actually</font>

711
00:33:51,530 --> 00:34:01,560
improved<font color="#E5E5E5"> since early the early</font><font color="#CCCCCC"> era of it</font>

712
00:33:56,250 --> 00:34:05,130
and it's now<font color="#CCCCCC"> tolerable</font><font color="#E5E5E5"> also t OE helps</font>

713
00:34:01,560 --> 00:34:08,370
when<font color="#CCCCCC"> it works and it doesn't always</font><font color="#E5E5E5"> but</font>

714
00:34:05,130 --> 00:34:13,740
it's still<font color="#E5E5E5"> acceptable without it still</font>

715
00:34:08,370 --> 00:34:17,460
at this point<font color="#CCCCCC"> got a Franciscan systems</font>

716
00:34:13,739 --> 00:34:20,009
<font color="#E5E5E5">I'm just curious how many labels you</font>

717
00:34:17,460 --> 00:34:22,980
have to support<font color="#CCCCCC"> on the host</font><font color="#E5E5E5"> so today</font>

718
00:34:20,010 --> 00:34:26,850
<font color="#CCCCCC">we're</font><font color="#E5E5E5"> doing</font><font color="#CCCCCC"> only</font><font color="#E5E5E5"> one because we do we</font>

719
00:34:22,980 --> 00:34:29,418
use<font color="#CCCCCC"> it only for</font><font color="#E5E5E5"> egress path selection we</font>

720
00:34:26,850 --> 00:34:32,940
assign globally unique labels to<font color="#E5E5E5"> each</font>

721
00:34:29,418 --> 00:34:36,509
circuit<font color="#E5E5E5"> so today we only need to do one</font>

722
00:34:32,940 --> 00:34:40,889
we're going<font color="#E5E5E5"> to</font><font color="#CCCCCC"> start soon</font><font color="#E5E5E5"> testing with</font>

723
00:34:36,510 --> 00:34:47,489
<font color="#CCCCCC">you just to see how it works but today</font>

724
00:34:40,889 --> 00:34:56,909
<font color="#CCCCCC">were</font><font color="#E5E5E5"> just doing one okay thank you</font>

725
00:34:47,489 --> 00:34:56,909
[Applause]

