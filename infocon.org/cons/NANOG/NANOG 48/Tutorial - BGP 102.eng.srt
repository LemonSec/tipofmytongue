1
00:00:02,149 --> 00:00:06,839
hello my<font color="#CCCCCC"> name is avi Friedman and we're</font>

2
00:00:05,069 --> 00:00:09,150
going<font color="#CCCCCC"> to</font><font color="#E5E5E5"> continue talking</font><font color="#CCCCCC"> about bgp</font><font color="#E5E5E5"> I</font>

3
00:00:06,839 --> 00:00:11,519
think we have<font color="#E5E5E5"> much of</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> audience from</font>

4
00:00:09,150 --> 00:00:14,250
the first<font color="#E5E5E5"> presentation in the first</font>

5
00:00:11,519 --> 00:00:15,900
presentation talking about<font color="#E5E5E5"> more bgp</font>

6
00:00:14,250 --> 00:00:18,240
basics it looked like almost everyone in

7
00:00:15,900 --> 00:00:20,609
the audience had at least a few routers

8
00:00:18,240 --> 00:00:22,948
up and running and doing bgp a little

9
00:00:20,609 --> 00:00:26,939
bit of experience moving traffic back

10
00:00:22,949 --> 00:00:28,410
and forth some address space a mix of

11
00:00:26,939 --> 00:00:30,900
routers although at least half the

12
00:00:28,410 --> 00:00:32,730
audience didn't actually admit what kind

13
00:00:30,900 --> 00:00:34,610
of router if they have but a lot of

14
00:00:32,729 --> 00:00:36,930
people<font color="#CCCCCC"> had not gotten</font><font color="#E5E5E5"> to the point of</font>

15
00:00:34,610 --> 00:00:40,469
implementing route reflection in their

16
00:00:36,930 --> 00:00:42,870
network how many<font color="#E5E5E5"> people use communities</font>

17
00:00:40,469 --> 00:00:47,430
in their network to tag routes as they

18
00:00:42,870 --> 00:00:50,099
<font color="#E5E5E5">hear and how many people have used their</font>

19
00:00:47,430 --> 00:00:52,980
providers community list to do route

20
00:00:50,100 --> 00:00:54,539
filtering and how many<font color="#E5E5E5"> people have used</font>

21
00:00:52,980 --> 00:00:56,190
their providers community list to change

22
00:00:54,539 --> 00:00:58,829
how their routes are heard by

23
00:00:56,190 --> 00:01:01,349
third-party networks how<font color="#E5E5E5"> there</font><font color="#CCCCCC"> okay cool</font>

24
00:00:58,829 --> 00:01:04,260
so again it looks like a lot of this

25
00:01:01,350 --> 00:01:08,820
will<font color="#CCCCCC"> be old news for some people but we</font>

26
00:01:04,260 --> 00:01:11,340
will go through it the talk got called

27
00:01:08,820 --> 00:01:14,548
bgp 201 this is a<font color="#E5E5E5"> little bit more 102</font>

28
00:01:11,340 --> 00:01:18,540
but<font color="#E5E5E5"> i</font><font color="#CCCCCC"> think that we'll have some time at</font>

29
00:01:14,549 --> 00:01:20,759
the end for some questions and because

30
00:01:18,540 --> 00:01:23,009
it sounded<font color="#E5E5E5"> like some people a lot of</font>

31
00:01:20,759 --> 00:01:25,350
<font color="#CCCCCC">people in</font><font color="#E5E5E5"> the audience knew the how to</font>

32
00:01:23,009 --> 00:01:28,170
use screen and knew how to use the

33
00:01:25,350 --> 00:01:30,089
typescript command and<font color="#CCCCCC"> turl</font><font color="#E5E5E5"> n0 but it</font>

34
00:01:28,170 --> 00:01:32,369
never actually taken to bgp<font color="#CCCCCC"> dumped and</font>

35
00:01:30,090 --> 00:01:34,920
<font color="#CCCCCC">manhandled it with pearl so i will</font>

36
00:01:32,369 --> 00:01:40,740
<font color="#E5E5E5">actually do a demo of that and write</font>

37
00:01:34,920 --> 00:01:43,799
some pro live well I get heckled so bgp

38
00:01:40,740 --> 00:01:47,158
is pretty easy to get configured and

39
00:01:43,799 --> 00:01:48,960
basically working it's actually also not

40
00:01:47,159 --> 00:01:51,360
even<font color="#CCCCCC"> that hard to get complaints and</font>

41
00:01:48,960 --> 00:01:53,460
have<font color="#E5E5E5"> someone say oh my you unit</font>

42
00:01:51,360 --> 00:01:55,710
connectivity is sucking through cogent

43
00:01:53,460 --> 00:01:58,020
when we change that let me change where

44
00:01:55,710 --> 00:02:01,110
<font color="#CCCCCC">i send that it gets a little bit</font><font color="#E5E5E5"> more</font>

45
00:01:58,020 --> 00:02:03,810
difficult<font color="#E5E5E5"> to scale because of the way</font>

46
00:02:01,110 --> 00:02:06,009
the protocol was designed things like

47
00:02:03,810 --> 00:02:09,229
having to have the full ibgp man

48
00:02:06,009 --> 00:02:12,319
and having to build filter list that

49
00:02:09,229 --> 00:02:14,720
specifically list every AAS and route it

50
00:02:12,319 --> 00:02:16,700
gets very difficult to do the way that

51
00:02:14,720 --> 00:02:19,250
works fine<font color="#E5E5E5"> at the small level as you go</font>

52
00:02:16,700 --> 00:02:21,859
to 510 routers tens or hundreds of

53
00:02:19,250 --> 00:02:24,650
customers so there are<font color="#CCCCCC"> some things that</font>

54
00:02:21,860 --> 00:02:27,130
are pretty<font color="#E5E5E5"> old school but a little bit</font>

55
00:02:24,650 --> 00:02:29,360
beyond<font color="#E5E5E5"> the first implementation of BGP</font>

56
00:02:27,130 --> 00:02:32,450
that helps going so we'll talk about

57
00:02:29,360 --> 00:02:34,190
communities route reflection I include

58
00:02:32,450 --> 00:02:35,599
Confederations just to drive other

59
00:02:34,190 --> 00:02:37,310
people crazy because no one uses it

60
00:02:35,599 --> 00:02:39,649
anymore but it's<font color="#CCCCCC"> actually interesting to</font>

61
00:02:37,310 --> 00:02:42,140
think about I think it helps<font color="#CCCCCC"> understand</font>

62
00:02:39,650 --> 00:02:43,519
some of the ways in can scale BTW P&Y

63
00:02:42,140 --> 00:02:46,670
retro factors are nice to look at

64
00:02:43,519 --> 00:02:51,500
Confederations local prep and some

65
00:02:46,670 --> 00:02:53,329
<font color="#CCCCCC">security and scalability issues so there</font>

66
00:02:51,500 --> 00:02:55,310
<font color="#E5E5E5">is a review of BGP I'm going to</font>

67
00:02:53,330 --> 00:02:57,380
basically skip over that because<font color="#E5E5E5"> I think</font>

68
00:02:55,310 --> 00:03:01,750
<font color="#E5E5E5">that most of the people were here the</font>

69
00:02:57,380 --> 00:03:01,750
last one and this is BGP 102 anyway I

70
00:03:02,049 --> 00:03:08,299
talked about<font color="#E5E5E5"> routes so talk a little bit</font>

71
00:03:06,440 --> 00:03:11,390
<font color="#E5E5E5">more</font><font color="#CCCCCC"> about stable routing and scaling</font>

72
00:03:08,299 --> 00:03:13,850
with loot bags so in the last 10<font color="#CCCCCC"> 1 we</font>

73
00:03:11,390 --> 00:03:16,399
talked about how when you create BGP

74
00:03:13,850 --> 00:03:19,820
routes you want to actually have you

75
00:03:16,400 --> 00:03:22,130
really should<font color="#E5E5E5"> have a static route or an</font>

76
00:03:19,820 --> 00:03:24,620
igp route that underlies the BGP route

77
00:03:22,130 --> 00:03:26,180
so<font color="#CCCCCC"> that if the interface that you happen</font>

78
00:03:24,620 --> 00:03:27,950
to have that rel Don goes down you don't

79
00:03:26,180 --> 00:03:29,570
stop advertising the BGP route if you're

80
00:03:27,950 --> 00:03:31,070
the only way to get there<font color="#E5E5E5"> you want to</font>

81
00:03:29,570 --> 00:03:32,299
<font color="#E5E5E5">keep that</font><font color="#CCCCCC"> n out that route advertised</font>

82
00:03:31,070 --> 00:03:34,220
you don't want them to be connectivity

83
00:03:32,299 --> 00:03:36,440
problems and most importantly the world

84
00:03:34,220 --> 00:03:38,600
at large does not want<font color="#CCCCCC"> to hear your</font>

85
00:03:36,440 --> 00:03:41,480
flapping for some interface going up or

86
00:03:38,600 --> 00:03:43,880
down similarly at<font color="#E5E5E5"> BGP sessions</font>

87
00:03:41,480 --> 00:03:46,310
themselves being tied to interfaces<font color="#CCCCCC"> can</font>

88
00:03:43,880 --> 00:03:48,260
cause extra stability when<font color="#E5E5E5"> mr. knock</font>

89
00:03:46,310 --> 00:03:50,660
monkey walks past and jiggles<font color="#E5E5E5"> the cable</font>

90
00:03:48,260 --> 00:03:52,880
or the optic is going slightly flaky and

91
00:03:50,660 --> 00:03:56,060
you<font color="#E5E5E5"> actually can have intermittent</font>

92
00:03:52,880 --> 00:03:57,980
outages in the interface you should be

93
00:03:56,060 --> 00:03:59,840
detecting that by monitoring it anyway

94
00:03:57,980 --> 00:04:01,310
but<font color="#E5E5E5"> you don't actually want the</font><font color="#CCCCCC"> BGP</font>

95
00:03:59,840 --> 00:04:02,900
sessions to go down the last

96
00:04:01,310 --> 00:04:05,450
<font color="#E5E5E5">presentation we talked about inside the</font>

97
00:04:02,900 --> 00:04:07,730
router there's BGP routing table as BF

98
00:04:05,450 --> 00:04:09,888
routing table static routing table the

99
00:04:07,730 --> 00:04:12,768
IP routing table the forwarding table on

100
00:04:09,889 --> 00:04:13,800
each line card every time you kill a BGP

101
00:04:12,769 --> 00:04:16,440
session

102
00:04:13,800 --> 00:04:18,840
packets<font color="#CCCCCC"> die</font><font color="#E5E5E5"> sir every time you kill a</font>

103
00:04:16,440 --> 00:04:23,730
<font color="#CCCCCC">BGP session all of the routes have to be</font>

104
00:04:18,839 --> 00:04:25,080
read withdrawn from your table if you've

105
00:04:23,730 --> 00:04:27,150
advertised them to anyone they need to

106
00:04:25,080 --> 00:04:29,669
be withdrawn from other routers from

107
00:04:27,150 --> 00:04:31,469
sessions if they were the best BGP route

108
00:04:29,670 --> 00:04:33,180
they need to be withdrawn potentially

109
00:04:31,470 --> 00:04:35,940
<font color="#E5E5E5">from the IP routing table from the lion</font>

110
00:04:33,180 --> 00:04:38,430
cars as a lot of work that<font color="#CCCCCC"> goes on so</font>

111
00:04:35,940 --> 00:04:41,730
you want to eliminate flapping in your

112
00:04:38,430 --> 00:04:44,580
network so Luke backs helps with that

113
00:04:41,730 --> 00:04:47,000
since the loop backs don't go down and

114
00:04:44,580 --> 00:04:49,800
it can also be good for load balancing

115
00:04:47,000 --> 00:04:51,690
using bgp blue facts could be good for

116
00:04:49,800 --> 00:04:54,210
load balancing you can have a bunch of

117
00:04:51,690 --> 00:04:55,710
physical links and do multipath routing

118
00:04:54,210 --> 00:04:58,530
is one of the ways<font color="#E5E5E5"> that you can do if</font>

119
00:04:55,710 --> 00:05:02,280
<font color="#E5E5E5">you don't use lacp or etherchannel or</font>

120
00:04:58,530 --> 00:05:04,380
<font color="#CCCCCC">things like that</font><font color="#E5E5E5"> you can have loop backs</font>

121
00:05:02,280 --> 00:05:07,500
that actually span links and have your

122
00:05:04,380 --> 00:05:10,830
<font color="#CCCCCC">IGP do load spreading so you set up a</font>

123
00:05:07,500 --> 00:05:13,170
loopback interface and and then you use

124
00:05:10,830 --> 00:05:15,180
the update source of a loopback

125
00:05:13,170 --> 00:05:17,400
interface to actually make the<font color="#CCCCCC"> BGP so I</font>

126
00:05:15,180 --> 00:05:19,110
should not be<font color="#E5E5E5"> between the IP address of</font>

127
00:05:17,400 --> 00:05:21,810
the interface but actually loop backs

128
00:05:19,110 --> 00:05:23,160
and what that<font color="#E5E5E5"> gets you is if there's</font>

129
00:05:21,810 --> 00:05:27,660
problems with one<font color="#E5E5E5"> of the underlying</font>

130
00:05:23,160 --> 00:05:31,110
interfaces<font color="#CCCCCC"> IGP will not use that path if</font>

131
00:05:27,660 --> 00:05:33,270
you're doing load balancing but your IG

132
00:05:31,110 --> 00:05:34,800
people will<font color="#E5E5E5"> take it out but the BGP</font>

133
00:05:33,270 --> 00:05:36,330
session will stay up and that's

134
00:05:34,800 --> 00:05:40,200
important for making sure that you have

135
00:05:36,330 --> 00:05:41,849
stability in your<font color="#E5E5E5"> network so you own</font>

136
00:05:40,200 --> 00:05:43,770
other nice thing is if you<font color="#CCCCCC"> have a</font>

137
00:05:41,850 --> 00:05:45,330
consistent loopback scheme as you start

138
00:05:43,770 --> 00:05:47,219
growing from two to three to four

139
00:05:45,330 --> 00:05:49,380
routers just like you can grow to

140
00:05:47,220 --> 00:05:52,650
recognize the autonomous system numbers

141
00:05:49,380 --> 00:05:54,330
by you know in a show IP bgp you can

142
00:05:52,650 --> 00:05:55,830
grow to recognize the loopback IP

143
00:05:54,330 --> 00:05:58,200
addresses of the different routers as

144
00:05:55,830 --> 00:05:59,550
you look at things<font color="#E5E5E5"> so as you look at the</font>

145
00:05:58,200 --> 00:06:02,280
output of different commands and see

146
00:05:59,550 --> 00:06:04,860
what's<font color="#E5E5E5"> going on you can buy inspection</font>

147
00:06:02,280 --> 00:06:08,729
look and see<font color="#CCCCCC"> oh I</font><font color="#E5E5E5"> know that's that</font>

148
00:06:04,860 --> 00:06:10,169
router there as you do do I<font color="#CCCCCC"> pgp mashes</font>

149
00:06:08,730 --> 00:06:12,960
it's also nice if you<font color="#CCCCCC"> number your number</font>

150
00:06:10,169 --> 00:06:14,669
your router's from<font color="#E5E5E5"> one to whatever you</font>

151
00:06:12,960 --> 00:06:16,140
can actually<font color="#E5E5E5"> just in spy in spection</font>

152
00:06:14,669 --> 00:06:18,479
make sure that you've listed them all

153
00:06:16,140 --> 00:06:19,659
same thing by monitoring you don't

154
00:06:18,480 --> 00:06:22,030
really want to<font color="#CCCCCC"> be</font>

155
00:06:19,660 --> 00:06:24,370
scale remembering one particular

156
00:06:22,030 --> 00:06:26,440
ethernet interface of the management<font color="#E5E5E5"> of</font>

157
00:06:24,370 --> 00:06:29,290
a router when you SNMP it you want to

158
00:06:26,440 --> 00:06:32,740
have something that you<font color="#CCCCCC"> can expose</font>

159
00:06:29,290 --> 00:06:37,060
access to<font color="#CCCCCC"> lockdown use to get into</font>

160
00:06:32,740 --> 00:06:39,190
canonically and routes to it's good<font color="#E5E5E5"> for</font>

161
00:06:37,060 --> 00:06:41,260
logging and tax and again it makes it

162
00:06:39,190 --> 00:06:42,490
<font color="#E5E5E5">very easy to</font><font color="#CCCCCC"> do consistent configuration</font>

163
00:06:41,260 --> 00:06:46,800
if you have a net block that everything

164
00:06:42,490 --> 00:06:50,350
gets put in for<font color="#E5E5E5"> your loot bags so</font>

165
00:06:46,800 --> 00:06:52,840
another feature in terms of stability is

166
00:06:50,350 --> 00:06:56,260
supporting route reflash route refresh

167
00:06:52,840 --> 00:06:58,060
dynamic reconfig it's better than soft

168
00:06:56,260 --> 00:06:59,920
reconfig one of the challenges with soft

169
00:06:58,060 --> 00:07:03,190
reconfiguration which we talked about<font color="#E5E5E5"> in</font>

170
00:06:59,920 --> 00:07:06,090
<font color="#E5E5E5">the last presentation is that if you</font>

171
00:07:03,190 --> 00:07:08,650
<font color="#E5E5E5">actually want to be</font><font color="#CCCCCC"> able to reapply a</font>

172
00:07:06,090 --> 00:07:10,989
BGP policy you<font color="#CCCCCC"> have a new route map</font>

173
00:07:08,650 --> 00:07:16,330
filters whatever and you want to reapply

174
00:07:10,990 --> 00:07:17,980
it then you need<font color="#E5E5E5"> to clear IP bgp you</font>

175
00:07:16,330 --> 00:07:19,960
need to a plot you need to tell it that

176
00:07:17,980 --> 00:07:23,470
you need to supply the interface now if

177
00:07:19,960 --> 00:07:25,719
you actually kill it if you do that

178
00:07:23,470 --> 00:07:26,950
without saying soft reconfig then it's

179
00:07:25,720 --> 00:07:29,080
actually going to kill the<font color="#CCCCCC"> BGP session</font>

180
00:07:26,950 --> 00:07:31,479
which you don't<font color="#E5E5E5"> want to do but the only</font>

181
00:07:29,080 --> 00:07:33,159
way that routers used to have to be able

182
00:07:31,480 --> 00:07:35,620
<font color="#E5E5E5">to support</font><font color="#CCCCCC"> this kind</font><font color="#E5E5E5"> of feature the</font>

183
00:07:33,160 --> 00:07:37,150
ability to<font color="#CCCCCC"> change the policy and have it</font>

184
00:07:35,620 --> 00:07:38,919
take effect without killing the BGP

185
00:07:37,150 --> 00:07:40,659
session was to<font color="#CCCCCC"> keep a copy of all the</font>

186
00:07:38,919 --> 00:07:42,130
<font color="#E5E5E5">routes that had been advertised or to</font>

187
00:07:40,660 --> 00:07:44,290
tag them in RAM that<font color="#E5E5E5"> they have been</font>

188
00:07:42,130 --> 00:07:46,480
advertised the problem is what if you're

189
00:07:44,290 --> 00:07:47,680
fighting a situation where someone has

190
00:07:46,480 --> 00:07:49,150
advertised a whole bunch<font color="#E5E5E5"> of</font><font color="#CCCCCC"> relatively</font>

191
00:07:47,680 --> 00:07:52,450
<font color="#E5E5E5">should never be there on the internet</font>

192
00:07:49,150 --> 00:07:53,979
like a<font color="#CCCCCC"> DA gregation scenario or what if</font>

193
00:07:52,450 --> 00:07:55,450
you're doing the<font color="#CCCCCC"> D aggregation you can</font>

194
00:07:53,980 --> 00:07:57,370
<font color="#E5E5E5">actually have a lot of</font><font color="#CCCCCC"> RAM be occupied</font>

195
00:07:55,450 --> 00:08:01,570
for routes that you want to be long gone

196
00:07:57,370 --> 00:08:03,280
and forgotten about so with routing code

197
00:08:01,570 --> 00:08:06,099
that supports route refresh you

198
00:08:03,280 --> 00:08:08,440
effectively do the same syntax of soft

199
00:08:06,100 --> 00:08:11,980
clearing but you don't actually<font color="#E5E5E5"> have to</font>

200
00:08:08,440 --> 00:08:13,330
have stored all of<font color="#CCCCCC"> the all the old state</font>

201
00:08:11,980 --> 00:08:15,009
because you can have the routers will

202
00:08:13,330 --> 00:08:19,058
actually communicate that efficiently

203
00:08:15,009 --> 00:08:20,919
but and typically and you can look at it

204
00:08:19,059 --> 00:08:22,360
<font color="#E5E5E5">you can do show IP bgp neighbor and see</font>

205
00:08:20,919 --> 00:08:24,219
what things<font color="#E5E5E5"> are supported and make sure</font>

206
00:08:22,360 --> 00:08:26,349
<font color="#CCCCCC">that we are refresh is supported and</font>

207
00:08:24,219 --> 00:08:28,960
using soft reconfig will do the same

208
00:08:26,349 --> 00:08:31,979
<font color="#E5E5E5">thing</font><font color="#CCCCCC"> but will fall</font><font color="#E5E5E5"> back to it typically</font>

209
00:08:28,960 --> 00:08:34,419
it just uses a little bit more<font color="#CCCCCC"> RAM</font>

210
00:08:31,979 --> 00:08:36,848
typically the limiting factor for most

211
00:08:34,419 --> 00:08:39,039
people<font color="#CCCCCC"> that most people worry about on</font>

212
00:08:36,849 --> 00:08:42,459
routers nowadays is the hardware

213
00:08:39,039 --> 00:08:43,990
forwarding table capacity usually it's

214
00:08:42,458 --> 00:08:47,380
pretty easy to put enough ramen that the

215
00:08:43,990 --> 00:08:49,630
RAM itself isn't an issue but every five

216
00:08:47,380 --> 00:08:51,370
<font color="#E5E5E5">or ten years sort of swaps which is more</font>

217
00:08:49,630 --> 00:08:54,040
important the actual<font color="#E5E5E5"> DRAM in the router</font>

218
00:08:51,370 --> 00:08:56,079
or you know or not typically the rule of

219
00:08:54,040 --> 00:08:59,500
<font color="#E5E5E5">thumb is the biggest baddest core router</font>

220
00:08:56,079 --> 00:09:02,170
that you can buy has the RAM and CPU of

221
00:08:59,500 --> 00:09:04,839
the<font color="#E5E5E5"> medium-sized</font><font color="#CCCCCC"> McIntosh from five</font>

222
00:09:02,170 --> 00:09:06,160
years<font color="#E5E5E5"> prior so if you look back over the</font>

223
00:09:04,839 --> 00:09:08,589
last<font color="#CCCCCC"> twenty years</font><font color="#E5E5E5"> that's pretty much</font>

224
00:09:06,160 --> 00:09:11,490
followed so you still<font color="#CCCCCC"> typically don't</font>

225
00:09:08,589 --> 00:09:14,199
see things with octa-core 72 gig nehalem

226
00:09:11,490 --> 00:09:16,930
you know in<font color="#E5E5E5"> the core routing and</font>

227
00:09:14,199 --> 00:09:19,120
hopefully that won't be needed as the<font color="#CCCCCC"> D</font>

228
00:09:16,930 --> 00:09:21,609
aggregation incident ensues as the

229
00:09:19,120 --> 00:09:25,060
market space in ipv4 explodes the

230
00:09:21,610 --> 00:09:28,930
routing tables in<font color="#E5E5E5"> the next few years so</font>

231
00:09:25,060 --> 00:09:32,859
soft reconfig again low<font color="#CCCCCC"> cpu uses some</font>

232
00:09:28,930 --> 00:09:34,329
ram but really very important to enable

233
00:09:32,860 --> 00:09:37,420
it because you<font color="#E5E5E5"> don't want to be hard</font>

234
00:09:34,329 --> 00:09:39,519
clearing your bgp sessions not only will

235
00:09:37,420 --> 00:09:42,130
you<font color="#CCCCCC"> be</font><font color="#E5E5E5"> having tons of see a few problems</font>

236
00:09:39,519 --> 00:09:44,110
and packets dropping but also if your

237
00:09:42,130 --> 00:09:46,000
routes if you stop advertising your

238
00:09:44,110 --> 00:09:48,069
route to the outside world then they

239
00:09:46,000 --> 00:09:53,620
leave reach ability problems coming back

240
00:09:48,069 --> 00:09:55,599
into<font color="#CCCCCC"> you the simplest method is</font><font color="#E5E5E5"> bgp</font>

241
00:09:53,620 --> 00:09:57,699
passwords which apply action of a TCP

242
00:09:55,600 --> 00:09:59,380
session a<font color="#E5E5E5"> lot of</font><font color="#CCCCCC"> people don't like</font><font color="#E5E5E5"> that</font>

243
00:09:57,699 --> 00:10:02,769
and you can<font color="#E5E5E5"> get pretty much the same</font>

244
00:09:59,380 --> 00:10:05,439
benefit from using the TTL hack the

245
00:10:02,769 --> 00:10:07,779
arguments against<font color="#CCCCCC"> bgp passwords go no</font>

246
00:10:05,440 --> 00:10:10,089
one's ever really shown bgp being

247
00:10:07,779 --> 00:10:13,240
hijacked by people breaking<font color="#E5E5E5"> tcp or even</font>

248
00:10:10,089 --> 00:10:14,730
just bgp sessions interrupted and a lot

249
00:10:13,240 --> 00:10:17,459
of<font color="#CCCCCC"> people don't like</font><font color="#E5E5E5"> having to negotiate</font>

250
00:10:14,730 --> 00:10:19,470
track<font color="#CCCCCC"> and deal with passwords in the</font>

251
00:10:17,459 --> 00:10:23,670
negotiation process but definitely

252
00:10:19,470 --> 00:10:25,139
should do bgp TTL if you're not doing

253
00:10:23,670 --> 00:10:26,910
other kinds of filtering to make sure

254
00:10:25,139 --> 00:10:29,160
that bgp packets can't get in except

255
00:10:26,910 --> 00:10:32,939
<font color="#E5E5E5">from your neighbors there are</font><font color="#CCCCCC"> just</font>

256
00:10:29,160 --> 00:10:33,630
because the in general<font color="#CCCCCC"> the bad guys who</font>

257
00:10:32,940 --> 00:10:34,889
are attacking the<font color="#CCCCCC"> internet</font>

258
00:10:33,630 --> 00:10:36,630
infrastructure actually need the

259
00:10:34,889 --> 00:10:39,810
internet to work but one never knows

260
00:10:36,630 --> 00:10:42,149
when you might set some IRC<font color="#CCCCCC"> kitty or saw</font>

261
00:10:39,810 --> 00:10:44,638
one of<font color="#CCCCCC"> your employees might be that IRC</font>

262
00:10:42,149 --> 00:10:45,839
<font color="#E5E5E5">kitty and someone might have a thing for</font>

263
00:10:44,639 --> 00:10:47,910
your network<font color="#E5E5E5"> and you might get a ton of</font>

264
00:10:45,839 --> 00:10:50,850
packets it's best to make<font color="#CCCCCC"> sure that at</font>

265
00:10:47,910 --> 00:10:53,010
the TCP layer at the filtering layer

266
00:10:50,850 --> 00:10:54,300
that your router CPU doesn't have to

267
00:10:53,010 --> 00:10:58,439
worry about<font color="#E5E5E5"> things that aren't from your</font>

268
00:10:54,300 --> 00:11:01,500
neighbors max prefix filtering also

269
00:10:58,440 --> 00:11:05,070
<font color="#E5E5E5">definitely a good thing to do some</font>

270
00:11:01,500 --> 00:11:07,560
<font color="#CCCCCC">people have more</font><font color="#E5E5E5"> complicated</font><font color="#CCCCCC"> software</font>

271
00:11:05,070 --> 00:11:09,079
that actually tries to figure out when

272
00:11:07,560 --> 00:11:11,910
their peers are sending them garbage

273
00:11:09,079 --> 00:11:14,069
that's<font color="#CCCCCC"> very difficult</font><font color="#E5E5E5"> because there is</font>

274
00:11:11,910 --> 00:11:16,620
no authoritative database of what the

275
00:11:14,070 --> 00:11:19,079
world we should be like in BGP but at

276
00:11:16,620 --> 00:11:21,449
least trying<font color="#E5E5E5"> to make sure that</font><font color="#CCCCCC"> you're to</font>

277
00:11:19,079 --> 00:11:23,069
prefix customer doesn't send you ten

278
00:11:21,449 --> 00:11:25,859
thousand routes is a good place to start

279
00:11:23,069 --> 00:11:27,300
there are a<font color="#E5E5E5"> couple of different failure</font>

280
00:11:25,860 --> 00:11:30,269
modes that<font color="#E5E5E5"> you can have it do you can</font>

281
00:11:27,300 --> 00:11:33,000
have it notify you you can have it kill

282
00:11:30,269 --> 00:11:34,769
the session so you want to<font color="#CCCCCC"> be careful</font>

283
00:11:33,000 --> 00:11:37,380
<font color="#E5E5E5">about that you definitely if you use</font>

284
00:11:34,769 --> 00:11:38,760
this one a half logging enabled it

285
00:11:37,380 --> 00:11:40,769
sounds like<font color="#CCCCCC"> it sounded in less</font>

286
00:11:38,760 --> 00:11:42,899
<font color="#E5E5E5">presentation like most people do know</font>

287
00:11:40,769 --> 00:11:44,940
about syslog and having their routers

288
00:11:42,899 --> 00:11:47,010
log of<font color="#E5E5E5"> BGP events to something</font><font color="#CCCCCC"> that</font>

289
00:11:44,940 --> 00:11:50,819
people look at at<font color="#CCCCCC"> least every</font><font color="#E5E5E5"> day if not</font>

290
00:11:47,010 --> 00:11:52,529
every hour were in semi<font color="#E5E5E5"> real-time so</font>

291
00:11:50,819 --> 00:11:54,719
enabling max prefix filtering is

292
00:11:52,529 --> 00:11:56,420
probably a pretty good<font color="#E5E5E5"> idea and networks</font>

293
00:11:54,720 --> 00:11:59,699
generally don't change their size

294
00:11:56,420 --> 00:12:00,930
massively overnight except for Carpathia

295
00:11:59,699 --> 00:12:02,880
but even that wasn't number of routes

296
00:12:00,930 --> 00:12:07,189
that was just total traffic spewed out

297
00:12:02,880 --> 00:12:11,180
various ports so pretty easy to do

298
00:12:07,190 --> 00:12:15,569
logging you really want to<font color="#E5E5E5"> do it's</font>

299
00:12:11,180 --> 00:12:18,630
pretty important to be able to see<font color="#E5E5E5"> you</font>

300
00:12:15,569 --> 00:12:19,740
know<font color="#E5E5E5"> hopefully you're noticing actually</font>

301
00:12:18,630 --> 00:12:20,080
I'll<font color="#CCCCCC"> just ask the question how many</font>

302
00:12:19,740 --> 00:12:24,310
people

303
00:12:20,080 --> 00:12:25,780
do regularly look at the switch errors

304
00:12:24,310 --> 00:12:29,469
and interface errors that they're seeing

305
00:12:25,780 --> 00:12:33,819
across their whole network<font color="#CCCCCC"> okay how many</font>

306
00:12:29,470 --> 00:12:35,740
people<font color="#E5E5E5"> use the traffic data and say set</font>

307
00:12:33,820 --> 00:12:37,120
thresholds that if traffic goes above or

308
00:12:35,740 --> 00:12:39,370
below a certain amount those are

309
00:12:37,120 --> 00:12:42,210
customers or peers or send that to

310
00:12:39,370 --> 00:12:48,700
salespeople to<font color="#E5E5E5"> upsell their customers so</font>

311
00:12:42,210 --> 00:12:50,650
often a<font color="#CCCCCC"> very small rate of incrementing</font>

312
00:12:48,700 --> 00:12:52,840
of interface errors can actually cause

313
00:12:50,650 --> 00:12:55,300
noticeable<font color="#E5E5E5"> BGP problems which you don't</font>

314
00:12:52,840 --> 00:12:57,940
see until<font color="#E5E5E5"> you look at it so you know</font>

315
00:12:55,300 --> 00:13:00,339
it's<font color="#CCCCCC"> very common to see</font><font color="#E5E5E5"> something that's</font>

316
00:12:57,940 --> 00:13:02,620
a couple<font color="#CCCCCC"> of interface errors</font><font color="#E5E5E5"> an hour but</font>

317
00:13:00,340 --> 00:13:05,200
every hour you wind up having the BGP

318
00:13:02,620 --> 00:13:07,210
session drop and restart and in many

319
00:13:05,200 --> 00:13:08,830
cases<font color="#CCCCCC"> it's an</font><font color="#E5E5E5"> internal session or it's a</font>

320
00:13:07,210 --> 00:13:10,990
session but a customer it doesn't affect

321
00:13:08,830 --> 00:13:12,370
you that much but eventually those

322
00:13:10,990 --> 00:13:16,210
things always turn into<font color="#E5E5E5"> complaints and</font>

323
00:13:12,370 --> 00:13:18,190
it's easier to nip them in the bud so if

324
00:13:16,210 --> 00:13:19,630
you wind up only<font color="#E5E5E5"> having a syslog</font>

325
00:13:18,190 --> 00:13:21,610
infrastructure that has way too much

326
00:13:19,630 --> 00:13:23,320
stuff<font color="#E5E5E5"> with systems set up a separate</font>

327
00:13:21,610 --> 00:13:24,880
blocks I assume most people have the

328
00:13:23,320 --> 00:13:27,190
virtualization<font color="#E5E5E5"> infrastructure so it'd be</font>

329
00:13:24,880 --> 00:13:31,720
pretty easy<font color="#E5E5E5"> to do just to grab the BGP</font>

330
00:13:27,190 --> 00:13:34,780
logging data out<font color="#CCCCCC"> of your router peer</font>

331
00:13:31,720 --> 00:13:38,110
groups is another<font color="#E5E5E5"> thing</font><font color="#CCCCCC"> that is</font><font color="#E5E5E5"> pretty</font>

332
00:13:34,780 --> 00:13:40,329
ancient by now but was added to<font color="#E5E5E5"> BGP as a</font>

333
00:13:38,110 --> 00:13:43,420
scaling functionality they were not

334
00:13:40,330 --> 00:13:47,380
designed to<font color="#E5E5E5"> save typing it was designed</font>

335
00:13:43,420 --> 00:13:49,750
to be able to say if I have<font color="#E5E5E5"> ralphs that</font>

336
00:13:47,380 --> 00:13:51,939
are<font color="#E5E5E5"> going to</font><font color="#CCCCCC"> 10</font><font color="#E5E5E5"> different people and</font>

337
00:13:49,750 --> 00:13:53,350
they're always the same and all the

338
00:13:51,940 --> 00:13:55,960
attributes on those routes are the same

339
00:13:53,350 --> 00:13:57,310
let me create them once so<font color="#E5E5E5"> I can then</font>

340
00:13:55,960 --> 00:13:58,360
include them on<font color="#E5E5E5"> a bunch of</font><font color="#CCCCCC"> different</font>

341
00:13:57,310 --> 00:14:01,839
interface or a bunch of<font color="#E5E5E5"> different</font>

342
00:13:58,360 --> 00:14:03,700
<font color="#E5E5E5">sessions and save the CPU so this was</font>

343
00:14:01,840 --> 00:14:06,880
more back in the days of the routing<font color="#E5E5E5"> of</font>

344
00:14:03,700 --> 00:14:09,520
processors were fast 60 80 40s and

345
00:14:06,880 --> 00:14:11,770
relatively slow RISC processors<font color="#E5E5E5"> but it</font>

346
00:14:09,520 --> 00:14:14,079
also does save typing the major caveat

347
00:14:11,770 --> 00:14:16,360
is basically all of<font color="#CCCCCC"> the attributes have</font>

348
00:14:14,080 --> 00:14:18,040
to be the same<font color="#E5E5E5"> so it also ties to have</font>

349
00:14:16,360 --> 00:14:21,130
in<font color="#E5E5E5"> the same policy so if you have very</font>

350
00:14:18,040 --> 00:14:21,990
<font color="#E5E5E5">similar policy towards a bunch of</font><font color="#CCCCCC"> people</font>

351
00:14:21,130 --> 00:14:24,899
then

352
00:14:21,990 --> 00:14:26,190
you can use peer groups you<font color="#CCCCCC"> can do it</font>

353
00:14:24,899 --> 00:14:28,410
you<font color="#CCCCCC"> can try doing it for different</font>

354
00:14:26,190 --> 00:14:30,000
customers but at that point you might as

355
00:14:28,410 --> 00:14:32,520
<font color="#CCCCCC">well just have different kinds of</font>

356
00:14:30,000 --> 00:14:38,399
configs next hop is one of the

357
00:14:32,520 --> 00:14:40,439
attributes so if you actually have many

358
00:14:38,399 --> 00:14:42,300
different interfaces then it can be

359
00:14:40,440 --> 00:14:44,250
complicated to try to set peer group and

360
00:14:42,300 --> 00:14:45,449
I don't<font color="#E5E5E5"> even know I don't I haven't</font>

361
00:14:44,250 --> 00:14:47,190
tried<font color="#CCCCCC"> it recently to see what the</font>

362
00:14:45,450 --> 00:14:49,860
behavior is if you try<font color="#E5E5E5"> to actually do it</font>

363
00:14:47,190 --> 00:14:51,240
with multiple peers on multiple external

364
00:14:49,860 --> 00:14:54,060
interfaces I guess that would<font color="#CCCCCC"> be</font>

365
00:14:51,240 --> 00:14:56,459
interesting to say so it's useful<font color="#CCCCCC"> for</font>

366
00:14:54,060 --> 00:14:59,160
ebgp peers but sometimes not for ibgp

367
00:14:56,459 --> 00:15:00,779
peers and you can still express

368
00:14:59,160 --> 00:15:03,180
different inbound policy it's really

369
00:15:00,779 --> 00:15:05,640
only that the outbound sets of

370
00:15:03,180 --> 00:15:07,800
attributes have to be the<font color="#E5E5E5"> same so a</font>

371
00:15:05,640 --> 00:15:09,120
sample peer group if you're<font color="#E5E5E5"> peering with</font>

372
00:15:07,800 --> 00:15:11,370
a bunch of people<font color="#CCCCCC"> on a common interface</font>

373
00:15:09,120 --> 00:15:12,510
you've got a route map that says what

374
00:15:11,370 --> 00:15:14,010
you do with the routes of it you get

375
00:15:12,510 --> 00:15:15,360
you've got the route map that does the

376
00:15:14,010 --> 00:15:17,880
same thing when you advertise it's just

377
00:15:15,360 --> 00:15:20,820
my routes and i sanitized next top and

378
00:15:17,880 --> 00:15:24,360
such and I have a<font color="#E5E5E5"> build on filter in and</font>

379
00:15:20,820 --> 00:15:26,399
I apply it to everybody and it saves me

380
00:15:24,360 --> 00:15:28,170
some typing and the routes<font color="#CCCCCC"> that are</font>

381
00:15:26,399 --> 00:15:30,089
going<font color="#E5E5E5"> outbound I only have to run</font>

382
00:15:28,170 --> 00:15:31,890
<font color="#E5E5E5">through my routing table once for all of</font>

383
00:15:30,089 --> 00:15:37,470
those peers and so it saves me some cpu

384
00:15:31,890 --> 00:15:42,569
as well so when you start<font color="#CCCCCC"> getting into</font>

385
00:15:37,470 --> 00:15:43,950
<font color="#E5E5E5">having bgp customers and you have been</font>

386
00:15:42,570 --> 00:15:46,260
in a mode where when<font color="#E5E5E5"> you turn on</font>

387
00:15:43,950 --> 00:15:48,899
customers you<font color="#CCCCCC"> have an IP access-list and</font>

388
00:15:46,260 --> 00:15:50,730
an AS path access list or a prefix list

389
00:15:48,899 --> 00:15:52,410
and a task list that you update every

390
00:15:50,730 --> 00:15:54,959
time you have a customer<font color="#E5E5E5"> you have</font><font color="#CCCCCC"> to</font>

391
00:15:52,410 --> 00:15:57,540
update that on all your external

392
00:15:54,959 --> 00:15:59,670
interfaces so every everyone that you

393
00:15:57,540 --> 00:16:01,529
peer with everyone that<font color="#E5E5E5"> you get transit</font>

394
00:15:59,670 --> 00:16:05,490
from you have to update every time a

395
00:16:01,529 --> 00:16:06,680
customer updates their their routing

396
00:16:05,490 --> 00:16:09,380
plus they're out

397
00:16:06,680 --> 00:16:12,140
and that becomes problematic because

398
00:16:09,380 --> 00:16:14,270
it's<font color="#CCCCCC"> just well it doesn't scale well as</font>

399
00:16:12,140 --> 00:16:16,580
<font color="#E5E5E5">Vijay would say instead what you really</font>

400
00:16:14,270 --> 00:16:18,860
want<font color="#E5E5E5"> to be able to do is at the place</font>

401
00:16:16,580 --> 00:16:20,990
where you speak to the customer on that

402
00:16:18,860 --> 00:16:24,290
interface on that peering session be

403
00:16:20,990 --> 00:16:26,209
able to express the policy and say the

404
00:16:24,290 --> 00:16:28,099
routes<font color="#E5E5E5"> that I hear from here I will</font><font color="#CCCCCC"> only</font>

405
00:16:26,209 --> 00:16:31,189
accept in this list and the<font color="#CCCCCC"> routes that</font>

406
00:16:28,100 --> 00:16:33,529
I do except I must treat them as my most

407
00:16:31,190 --> 00:16:34,880
hyperflight as the highest preferred

408
00:16:33,529 --> 00:16:37,370
customer routes because they're paying

409
00:16:34,880 --> 00:16:41,810
me or<font color="#CCCCCC"> they're appear and I will never</font>

410
00:16:37,370 --> 00:16:43,550
riad ver ties them or tag them with

411
00:16:41,810 --> 00:16:45,529
communities and say I heard them in

412
00:16:43,550 --> 00:16:47,120
ashburn I heard them over a private

413
00:16:45,529 --> 00:16:48,620
interconnect and instead<font color="#CCCCCC"> of applying</font>

414
00:16:47,120 --> 00:16:50,990
that at the edge of your<font color="#E5E5E5"> network it</font>

415
00:16:48,620 --> 00:16:53,899
actually scales better to apply it where

416
00:16:50,990 --> 00:16:56,300
you actually hear from the customer so

417
00:16:53,899 --> 00:17:03,560
the<font color="#E5E5E5"> BGP mechanism for doing that is</font>

418
00:16:56,300 --> 00:17:06,139
communities so again scale issue bgb

419
00:17:03,560 --> 00:17:07,520
communities are just a number someone

420
00:17:06,140 --> 00:17:09,620
asked me a question which<font color="#E5E5E5"> I do not know</font>

421
00:17:07,520 --> 00:17:12,500
the answer<font color="#CCCCCC"> to which is how our community</font>

422
00:17:09,619 --> 00:17:14,300
<font color="#E5E5E5">wits changing with four by two asses and</font>

423
00:17:12,500 --> 00:17:17,390
such so presumably someone in the

424
00:17:14,300 --> 00:17:19,569
audience will know but it gives<font color="#E5E5E5"> you an</font>

425
00:17:17,390 --> 00:17:22,400
easier control of where routes goes

426
00:17:19,569 --> 00:17:24,349
they're just<font color="#CCCCCC"> numbers that you put on to</font>

427
00:17:22,400 --> 00:17:26,000
the BGP routes and they mean whatever

428
00:17:24,349 --> 00:17:28,040
humans decide they mean there's no

429
00:17:26,000 --> 00:17:32,530
canonical well known except for a very

430
00:17:28,040 --> 00:17:35,240
few well-known communities typically you

431
00:17:32,530 --> 00:17:40,639
group them into two<font color="#CCCCCC"> bites colon 2 bytes</font>

432
00:17:35,240 --> 00:17:42,440
so i might say you know IM 6450 and i

433
00:17:40,640 --> 00:17:45,380
put a number on it that means that<font color="#E5E5E5"> i</font>

434
00:17:42,440 --> 00:17:47,840
heard it in ashburn so 6450 colon 30 and

435
00:17:45,380 --> 00:17:53,179
<font color="#CCCCCC">i tell</font><font color="#E5E5E5"> people that's what it means or</font><font color="#CCCCCC"> i</font>

436
00:17:47,840 --> 00:17:54,889
might internally have<font color="#E5E5E5"> 6450 colon 999</font>

437
00:17:53,179 --> 00:17:57,429
means that it's a customer out and then

438
00:17:54,890 --> 00:18:01,370
based on that<font color="#E5E5E5"> I set my local craft pod</font>

439
00:17:57,429 --> 00:18:03,799
so communities by default are not sent

440
00:18:01,370 --> 00:18:05,689
to external peers but you can make them

441
00:18:03,799 --> 00:18:09,020
be sent by saying send communities and

442
00:18:05,690 --> 00:18:11,179
an example of what<font color="#CCCCCC"> you might do is if I</font>

443
00:18:09,020 --> 00:18:14,150
know it's a customer then in the route

444
00:18:11,179 --> 00:18:17,840
map that I applied<font color="#CCCCCC"> to them I'd say set</font>

445
00:18:14,150 --> 00:18:19,820
community colon<font color="#CCCCCC"> 1200 additive if you</font>

446
00:18:17,840 --> 00:18:21,770
don't say additive it will wipe out the

447
00:18:19,820 --> 00:18:25,520
communities that they had been trying to

448
00:18:21,770 --> 00:18:29,030
<font color="#E5E5E5">send me maybe and then later on based on</font>

449
00:18:25,520 --> 00:18:31,760
that I might talk to a pier and have a

450
00:18:29,030 --> 00:18:35,389
route map that says I'm going<font color="#E5E5E5"> to send</font>

451
00:18:31,760 --> 00:18:38,299
the route if it's in IP community list

452
00:18:35,390 --> 00:18:40,880
for and in for I look for<font color="#E5E5E5"> the community</font>

453
00:18:38,299 --> 00:18:44,418
<font color="#E5E5E5">that says it is transit so at the edge I</font>

454
00:18:40,880 --> 00:18:47,120
put 49 69 colon<font color="#E5E5E5"> 1200 on it if it's a</font>

455
00:18:44,419 --> 00:18:50,750
customer us are at the customer edge and

456
00:18:47,120 --> 00:18:53,178
at the peering edge I look for that

457
00:18:50,750 --> 00:18:55,370
community on the<font color="#CCCCCC"> route</font><font color="#E5E5E5"> and if it's there</font>

458
00:18:53,179 --> 00:18:58,010
then I send it<font color="#E5E5E5"> and typically that</font>

459
00:18:55,370 --> 00:18:59,330
community list would be different I

460
00:18:58,010 --> 00:19:03,309
might<font color="#E5E5E5"> have three or four communities</font>

461
00:18:59,330 --> 00:19:05,240
that are routes that I would say<font color="#CCCCCC"> so</font>

462
00:19:03,309 --> 00:19:07,370
another thing<font color="#CCCCCC"> you can do with</font>

463
00:19:05,240 --> 00:19:10,340
communities is not just use it

464
00:19:07,370 --> 00:19:12,379
internally to say<font color="#E5E5E5"> Oh on this peering</font>

465
00:19:10,340 --> 00:19:15,080
session these routes that I except they

466
00:19:12,380 --> 00:19:17,270
are customer routes and I will tag them

467
00:19:15,080 --> 00:19:19,428
and maybe set the local<font color="#E5E5E5"> prep I you can</font>

468
00:19:17,270 --> 00:19:23,330
also use<font color="#CCCCCC"> it so that when a customer says</font>

469
00:19:19,429 --> 00:19:26,059
gee you know I really want<font color="#CCCCCC"> to be seen as</font>

470
00:19:23,330 --> 00:19:27,740
being further away from<font color="#E5E5E5"> you unit when</font>

471
00:19:26,059 --> 00:19:29,840
the route when I advertise<font color="#E5E5E5"> the route</font>

472
00:19:27,740 --> 00:19:31,490
through you well they have no way of

473
00:19:29,840 --> 00:19:34,220
doing that because they don't connect to

474
00:19:31,490 --> 00:19:37,280
you unit you connect to<font color="#E5E5E5"> you that you can</font>

475
00:19:34,220 --> 00:19:39,520
use communities to allow customers to

476
00:19:37,280 --> 00:19:42,110
tell you how to handle their routes now

477
00:19:39,520 --> 00:19:44,030
you don't have<font color="#E5E5E5"> to do anything they're</font>

478
00:19:42,110 --> 00:19:47,270
only<font color="#E5E5E5"> going to be</font><font color="#CCCCCC"> able to use communities</font>

479
00:19:44,030 --> 00:19:48,980
if you create a community policy set you

480
00:19:47,270 --> 00:19:51,200
implement it near routers and you tell

481
00:19:48,980 --> 00:19:53,390
them what the communities are I guess

482
00:19:51,200 --> 00:19:55,370
you can reverse engineer how many<font color="#E5E5E5"> people</font>

483
00:19:53,390 --> 00:19:56,870
have spent over<font color="#E5E5E5"> four hours of their life</font>

484
00:19:55,370 --> 00:19:59,439
<font color="#CCCCCC">reverse engineering other people's</font>

485
00:19:56,870 --> 00:20:04,840
community systems

486
00:19:59,440 --> 00:20:08,230
<font color="#E5E5E5">okay over 24 hours written programs to</font>

487
00:20:04,840 --> 00:20:11,350
do progression<font color="#E5E5E5"> not so hopefully people</font>

488
00:20:08,230 --> 00:20:14,049
will tell you<font color="#CCCCCC"> and typically you know</font>

489
00:20:11,350 --> 00:20:15,789
best practice is that you probably

490
00:20:14,049 --> 00:20:17,980
shouldn't be buying from anyone who

491
00:20:15,789 --> 00:20:21,340
doesn't have at least a minimal

492
00:20:17,980 --> 00:20:23,590
community list and expose it to you you

493
00:20:21,340 --> 00:20:24,789
know<font color="#E5E5E5"> hopefully before your customers so</font>

494
00:20:23,590 --> 00:20:27,580
you can<font color="#E5E5E5"> look at it sometimes at least</font>

495
00:20:24,789 --> 00:20:29,980
<font color="#E5E5E5">after you're a customer we should put</font>

496
00:20:27,580 --> 00:20:32,340
the URL and I think<font color="#E5E5E5"> Raz did a good</font>

497
00:20:29,980 --> 00:20:35,350
presentation<font color="#E5E5E5"> on coming up with the same</font>

498
00:20:32,340 --> 00:20:37,178
community system lots of reg ex and

499
00:20:35,350 --> 00:20:38,620
complicated things that normally make my

500
00:20:37,179 --> 00:20:41,649
eyes bleed unless I sit<font color="#CCCCCC"> down</font><font color="#E5E5E5"> and focus</font>

501
00:20:38,620 --> 00:20:43,620
on it but copy and<font color="#CCCCCC"> paste is a good one</font>

502
00:20:41,649 --> 00:20:49,799
there's no royalties for the end layer

503
00:20:43,620 --> 00:20:54,939
community system so an example might be

504
00:20:49,799 --> 00:20:57,580
49 69 colon 1 2 3 92 might mean<font color="#E5E5E5"> pad 1239</font>

505
00:20:54,940 --> 00:20:59,289
twice in the old<font color="#E5E5E5"> days you would make</font>

506
00:20:57,580 --> 00:21:01,330
specific communities because someone

507
00:20:59,289 --> 00:21:02,919
would ask<font color="#E5E5E5"> for it the newer method is to</font>

508
00:21:01,330 --> 00:21:05,289
actually come<font color="#CCCCCC"> up with a</font><font color="#E5E5E5"> flexible system</font>

509
00:21:02,919 --> 00:21:07,750
that's very regular that you can apply

510
00:21:05,289 --> 00:21:09,700
and if you're actually generating router

511
00:21:07,750 --> 00:21:11,649
config<font color="#CCCCCC"> zor entire system can be embedded</font>

512
00:21:09,700 --> 00:21:14,080
in the router configs as you generate

513
00:21:11,649 --> 00:21:16,209
them and your customers can apply them

514
00:21:14,080 --> 00:21:19,120
to any ass that<font color="#CCCCCC"> you might pier with</font>

515
00:21:16,210 --> 00:21:21,909
whether or<font color="#E5E5E5"> not by hand created it so</font>

516
00:21:19,120 --> 00:21:24,070
skelling was that's important but<font color="#E5E5E5"> you</font>

517
00:21:21,909 --> 00:21:27,970
have a<font color="#E5E5E5"> lot of flexibility oh we</font><font color="#CCCCCC"> actually</font>

518
00:21:24,070 --> 00:21:30,399
do sorry it is not rendering well so an

519
00:21:27,970 --> 00:21:33,429
example<font color="#CCCCCC"> was</font><font color="#E5E5E5"> Emily or.net</font><font color="#CCCCCC"> bgp communities</font>

520
00:21:30,399 --> 00:21:38,320
and then if you search for steam version

521
00:21:33,429 --> 00:21:40,809
<font color="#E5E5E5">then</font><font color="#CCCCCC"> i think number</font><font color="#E5E5E5"> 80 of 236 on the</font>

522
00:21:38,320 --> 00:21:44,600
<font color="#CCCCCC">nanog presentation list is the is the</font>

523
00:21:40,809 --> 00:21:46,770
community system that Richard gave

524
00:21:44,600 --> 00:21:47,969
<font color="#CCCCCC">Skelly with local press</font><font color="#E5E5E5"> we talked about</font>

525
00:21:46,770 --> 00:21:51,389
this a little<font color="#E5E5E5"> bit in the last</font>

526
00:21:47,970 --> 00:21:53,610
presentation but if you're trying to

527
00:21:51,390 --> 00:21:55,500
influence how your outbound traffic goes

528
00:21:53,610 --> 00:21:57,899
and<font color="#E5E5E5"> you don't want</font><font color="#CCCCCC"> to have a fleet of</font>

529
00:21:55,500 --> 00:22:00,440
monkeys typing static routes in and you

530
00:21:57,900 --> 00:22:04,080
don't buy a magic route science or

531
00:22:00,440 --> 00:22:06,210
<font color="#CCCCCC">internap box then typically what happens</font>

532
00:22:04,080 --> 00:22:07,560
is people complain you notice that<font color="#CCCCCC"> you</font>

533
00:22:06,210 --> 00:22:09,900
have poor connectivity to a given

534
00:22:07,560 --> 00:22:15,210
destination you say<font color="#E5E5E5"> oh those are all</font>

535
00:22:09,900 --> 00:22:18,090
inside a s 99999 whatever and you say oh

536
00:22:15,210 --> 00:22:21,570
well I've got a and B and right now show

537
00:22:18,090 --> 00:22:23,610
IP bgp reg you know 99 that's<font color="#E5E5E5"> going out</font>

538
00:22:21,570 --> 00:22:26,179
eh let me try to make it go through big

539
00:22:23,610 --> 00:22:29,100
and you can either do that by pressing

540
00:22:26,180 --> 00:22:32,640
it through B or depressing it<font color="#CCCCCC"> to</font><font color="#E5E5E5"> Ray and</font>

541
00:22:29,100 --> 00:22:34,740
<font color="#E5E5E5">you can either do that by making it look</font>

542
00:22:32,640 --> 00:22:37,410
a<font color="#E5E5E5"> little bit further away in the a s</font>

543
00:22:34,740 --> 00:22:40,110
path which is the primary way that bgp

544
00:22:37,410 --> 00:22:43,140
is going to tie break if<font color="#E5E5E5"> you just turn</font>

545
00:22:40,110 --> 00:22:46,590
it<font color="#E5E5E5"> on and get multiple bgp feeds or you</font>

546
00:22:43,140 --> 00:22:48,870
can use local<font color="#CCCCCC"> preps the you can use</font>

547
00:22:46,590 --> 00:22:51,419
<font color="#E5E5E5">pretty complex policy by doing this</font>

548
00:22:48,870 --> 00:22:55,770
what's<font color="#CCCCCC"> called a s path padding making a</font>

549
00:22:51,420 --> 00:22:58,320
rat I path look further away by<font color="#E5E5E5"> matching</font>

550
00:22:55,770 --> 00:23:00,240
on it and saying set a s path prepend

551
00:22:58,320 --> 00:23:02,790
with an<font color="#CCCCCC"> eye aspect with an ass number</font>

552
00:23:00,240 --> 00:23:05,910
makes it look a<font color="#E5E5E5"> little bit less fat good</font>

553
00:23:02,790 --> 00:23:08,700
you can append you know two three four

554
00:23:05,910 --> 00:23:10,890
or five times you can do<font color="#E5E5E5"> really weird</font>

555
00:23:08,700 --> 00:23:12,360
things where you can append other people

556
00:23:10,890 --> 00:23:13,920
they<font color="#CCCCCC"> SS on the outbound side i would</font>

557
00:23:12,360 --> 00:23:16,860
recommend you don't do<font color="#CCCCCC"> that</font><font color="#E5E5E5"> and you may</font>

558
00:23:13,920 --> 00:23:18,510
get people upset at you but if you're

559
00:23:16,860 --> 00:23:20,399
just trying internally to make a path

560
00:23:18,510 --> 00:23:22,680
look further you<font color="#CCCCCC"> can do that</font><font color="#E5E5E5"> the problem</font>

561
00:23:20,400 --> 00:23:25,980
is how many<font color="#E5E5E5"> people have downstream bgp</font>

562
00:23:22,680 --> 00:23:27,960
customers so your customers probably

563
00:23:25,980 --> 00:23:31,020
don't want that don't want to see that

564
00:23:27,960 --> 00:23:32,530
<font color="#E5E5E5">because there's no set a SD paddy</font>

565
00:23:31,020 --> 00:23:35,530
prevent you

566
00:23:32,530 --> 00:23:40,570
whatever the word is depends for the BDP

567
00:23:35,530 --> 00:23:45,430
growls there's nothing<font color="#CCCCCC"> to</font><font color="#E5E5E5"> subtract a s</font>

568
00:23:40,570 --> 00:23:48,669
pops and that's important<font color="#E5E5E5"> because loop</font>

569
00:23:45,430 --> 00:23:50,620
detection is it depends<font color="#CCCCCC"> on the</font><font color="#E5E5E5"> a s path</font>

570
00:23:48,670 --> 00:23:53,500
accurately describing everywhere that

571
00:23:50,620 --> 00:23:55,389
the route has been so guaranteed if<font color="#CCCCCC"> you</font>

572
00:23:53,500 --> 00:23:57,280
had<font color="#CCCCCC"> the ability to do</font><font color="#E5E5E5"> that some crazy</font>

573
00:23:55,390 --> 00:23:58,900
<font color="#E5E5E5">person would use it for something</font>

574
00:23:57,280 --> 00:24:01,060
inappropriate you have routing loops all

575
00:23:58,900 --> 00:24:03,340
of it internet and that would be bad so

576
00:24:01,060 --> 00:24:05,860
a spat padding there is a good there is

577
00:24:03,340 --> 00:24:09,100
a reason<font color="#CCCCCC"> why people philosophically like</font>

578
00:24:05,860 --> 00:24:11,979
using it which is if I'm trying to

579
00:24:09,100 --> 00:24:14,050
adjust my inbound bandwidth I may try to

580
00:24:11,980 --> 00:24:16,690
make something look further away by a s

581
00:24:14,050 --> 00:24:18,909
path padding outside that's me<font color="#E5E5E5"> signaling</font>

582
00:24:16,690 --> 00:24:23,500
at the edge of the<font color="#CCCCCC"> internet hey I like a</font>

583
00:24:18,910 --> 00:24:26,290
more than B and if everything stays in a

584
00:24:23,500 --> 00:24:28,240
s path padding realm then i can pay

585
00:24:26,290 --> 00:24:32,710
attention to that and modify a little

586
00:24:28,240 --> 00:24:34,690
bit but if you have to redistribute bgp

587
00:24:32,710 --> 00:24:36,550
you don't want to mess up the a s pats

588
00:24:34,690 --> 00:24:37,930
your customers won't like it because

589
00:24:36,550 --> 00:24:40,300
they're trying to do load balancing so

590
00:24:37,930 --> 00:24:42,580
the answer is local prep local / f is a

591
00:24:40,300 --> 00:24:45,669
pretty powerful bgp attribute it's not

592
00:24:42,580 --> 00:24:47,710
as important as the weight in terms of

593
00:24:45,670 --> 00:24:49,960
path selection but you shouldn't be

594
00:24:47,710 --> 00:24:52,600
using the weight attribute anyway but it

595
00:24:49,960 --> 00:24:56,490
does come before a s path<font color="#E5E5E5"> one so if you</font>

596
00:24:52,600 --> 00:25:00,070
set the local prep<font color="#E5E5E5"> it'll override a SPF</font>

597
00:24:56,490 --> 00:25:02,800
the most important thing<font color="#E5E5E5"> is to come up</font>

598
00:25:00,070 --> 00:25:05,710
with a scheme up front think about

599
00:25:02,800 --> 00:25:08,800
routes you might not like routes you

600
00:25:05,710 --> 00:25:11,680
might like reasonably well the ones<font color="#CCCCCC"> I</font>

601
00:25:08,800 --> 00:25:13,540
pay for<font color="#E5E5E5"> typically I would leave it</font><font color="#CCCCCC"> 100</font>

602
00:25:11,680 --> 00:25:15,510
the normal routes that bgp would be

603
00:25:13,540 --> 00:25:18,940
selecting anyway are already at

604
00:25:15,510 --> 00:25:22,090
effectively 100 if there is<font color="#CCCCCC"> no local</font>

605
00:25:18,940 --> 00:25:23,980
pref community then it's as if the local

606
00:25:22,090 --> 00:25:25,689
prep community<font color="#CCCCCC"> is not</font><font color="#E5E5E5"> community</font>

607
00:25:23,980 --> 00:25:27,790
attribute then it's as if there was a

608
00:25:25,690 --> 00:25:30,730
<font color="#E5E5E5">little bit attribute there with the</font>

609
00:25:27,790 --> 00:25:32,649
value of 100 so if you do a show IP bgp

610
00:25:30,730 --> 00:25:34,960
you'll see a 100<font color="#E5E5E5"> and then blank the</font>

611
00:25:32,650 --> 00:25:36,760
blank is<font color="#CCCCCC"> the same as being 100 so</font>

612
00:25:34,960 --> 00:25:38,680
normally<font color="#CCCCCC"> you might leave that but let's</font>

613
00:25:36,760 --> 00:25:41,740
say<font color="#E5E5E5"> you want a deep breath now you might</font>

614
00:25:38,680 --> 00:25:43,480
use less<font color="#CCCCCC"> than 100 now let's say that</font>

615
00:25:41,740 --> 00:25:45,580
you've got<font color="#E5E5E5"> something in the transit</font>

616
00:25:43,480 --> 00:25:48,790
range that you might prefer you might

617
00:25:45,580 --> 00:25:50,379
reserve 110 120 something like that for

618
00:25:48,790 --> 00:25:52,180
that the most important thing<font color="#E5E5E5"> is that</font>

619
00:25:50,380 --> 00:25:54,400
you have<font color="#CCCCCC"> to leave room for customer</font>

620
00:25:52,180 --> 00:25:56,850
<font color="#CCCCCC">routes to always unambiguously be higher</font>

621
00:25:54,400 --> 00:25:59,050
than anything<font color="#E5E5E5"> that you get from transit</font>

622
00:25:56,850 --> 00:26:02,110
biggest problem that I've seen with

623
00:25:59,050 --> 00:26:06,760
weird customer advertisements is someone

624
00:26:02,110 --> 00:26:09,490
goes in and and needs<font color="#E5E5E5"> to change external</font>

625
00:26:06,760 --> 00:26:11,590
traffic and they apply a high local<font color="#E5E5E5"> pref</font>

626
00:26:09,490 --> 00:26:13,480
on<font color="#E5E5E5"> a transit line link just for a given</font>

627
00:26:11,590 --> 00:26:16,090
<font color="#E5E5E5">a ass or something and it winds up</font><font color="#CCCCCC"> being</font>

628
00:26:13,480 --> 00:26:18,460
higher than the trial prep<font color="#CCCCCC"> that they</font>

629
00:26:16,090 --> 00:26:21,459
apply to customers the highest<font color="#E5E5E5"> local / f</font>

630
00:26:18,460 --> 00:26:23,380
wins if you prefer external routes above

631
00:26:21,460 --> 00:26:25,000
a customer you can't advertise that

632
00:26:23,380 --> 00:26:27,010
customers route to every about anyone

633
00:26:25,000 --> 00:26:29,350
and you pretty quickly find out this is

634
00:26:27,010 --> 00:26:30,700
a problem<font color="#E5E5E5"> on</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> other</font><font color="#CCCCCC"> hand you might</font>

635
00:26:29,350 --> 00:26:32,260
<font color="#E5E5E5">not quickly find out it may be a</font>

636
00:26:30,700 --> 00:26:33,610
multi-homed customer and it's only<font color="#E5E5E5"> when</font>

637
00:26:32,260 --> 00:26:35,560
<font color="#CCCCCC">there other link goes down that anyone</font>

638
00:26:33,610 --> 00:26:37,240
notices that there's a<font color="#E5E5E5"> problem so the</font>

639
00:26:35,560 --> 00:26:39,190
important thing is planet in advance so

640
00:26:37,240 --> 00:26:41,410
you might have you might<font color="#E5E5E5"> know that</font><font color="#CCCCCC"> in</font>

641
00:26:39,190 --> 00:26:42,970
you know less<font color="#CCCCCC"> than 100 is the d</font>

642
00:26:41,410 --> 00:26:46,480
preferred routes a hundred might be my

643
00:26:42,970 --> 00:26:47,980
peer routes and I might have a range for

644
00:26:46,480 --> 00:26:49,680
things that I appear with and things

645
00:26:47,980 --> 00:26:52,420
about private interconnects

646
00:26:49,680 --> 00:26:55,420
interconnects that are sucking transit

647
00:26:52,420 --> 00:26:57,850
pipes private cross-connect might be you

648
00:26:55,420 --> 00:27:01,330
know higher than transit because of cost

649
00:26:57,850 --> 00:27:04,000
and then customer<font color="#CCCCCC"> routes</font><font color="#E5E5E5"> I always want</font>

650
00:27:01,330 --> 00:27:06,520
to keep at a certain high level so not

651
00:27:04,000 --> 00:27:07,660
quite as complex as a community system

652
00:27:06,520 --> 00:27:09,040
but<font color="#CCCCCC"> you definitely want to have that</font>

653
00:27:07,660 --> 00:27:12,370
thought out<font color="#E5E5E5"> and have it documented on</font>

654
00:27:09,040 --> 00:27:15,159
your routing wiki wherever<font color="#E5E5E5"> you document</font>

655
00:27:12,370 --> 00:27:16,790
such institutional knowledge and be able

656
00:27:15,160 --> 00:27:19,160
<font color="#E5E5E5">to implement it so</font>

657
00:27:16,790 --> 00:27:22,159
we've got communities that<font color="#E5E5E5"> I can use</font>

658
00:27:19,160 --> 00:27:24,380
instead of having to edit filters on

659
00:27:22,160 --> 00:27:26,990
everyone external link and now we've got

660
00:27:24,380 --> 00:27:28,280
local preps that I can use to be able to

661
00:27:26,990 --> 00:27:30,860
<font color="#E5E5E5">make sure that i prefer the routes</font>

662
00:27:28,280 --> 00:27:33,800
properly so i can now have route maps

663
00:27:30,860 --> 00:27:36,830
that say when i'm<font color="#CCCCCC"> peering with someone</font>

664
00:27:33,800 --> 00:27:39,020
at a public I acts that I you<font color="#E5E5E5"> know don't</font>

665
00:27:36,830 --> 00:27:41,840
<font color="#E5E5E5">have any special reason to love I set</font>

666
00:27:39,020 --> 00:27:44,389
the local prep to 100 and I apply let's

667
00:27:41,840 --> 00:27:46,879
say<font color="#CCCCCC"> 80 100 Boone is where I</font><font color="#E5E5E5"> pier I make</font>

668
00:27:44,390 --> 00:27:50,380
a community that says hey this came from

669
00:27:46,880 --> 00:27:53,240
ed 101 Boulevard and then I've<font color="#CCCCCC"> got a</font>

670
00:27:50,380 --> 00:27:54,670
attribute 6 of 6 it says it's from<font color="#E5E5E5"> the</font>

671
00:27:53,240 --> 00:27:57,380
outside world a lot<font color="#E5E5E5"> of people use a</font>

672
00:27:54,670 --> 00:28:01,910
triple six to mean not me just some

673
00:27:57,380 --> 00:28:03,430
random outside place P&I once you fight

674
00:28:01,910 --> 00:28:08,000
say if it's a private interconnect<font color="#E5E5E5"> I</font>

675
00:28:03,430 --> 00:28:09,320
heard it you know in some pop 609 it's

676
00:28:08,000 --> 00:28:11,090
an external route but i'm going<font color="#E5E5E5"> to set</font>

677
00:28:09,320 --> 00:28:12,980
the local prep fire and then if it's a

678
00:28:11,090 --> 00:28:14,090
customer that<font color="#CCCCCC"> i'm</font><font color="#E5E5E5"> going to do a couple</font>

679
00:28:12,980 --> 00:28:16,910
things i'm going to make sure the local

680
00:28:14,090 --> 00:28:20,389
prep is the highest and<font color="#E5E5E5"> i'm also going</font>

681
00:28:16,910 --> 00:28:22,730
to set a community that 1200 which

682
00:28:20,390 --> 00:28:24,380
elsewhere i'm going to use to say of

683
00:28:22,730 --> 00:28:25,970
community 1200 is set then it's my

684
00:28:24,380 --> 00:28:30,110
customer i'll always advertise them to

685
00:28:25,970 --> 00:28:32,210
someone and<font color="#CCCCCC"> there because i might that</font>

686
00:28:30,110 --> 00:28:33,979
customer might be giving the other

687
00:28:32,210 --> 00:28:35,660
communities that<font color="#E5E5E5"> i might use in other</font>

688
00:28:33,980 --> 00:28:37,130
ways i'm going to say additive because i

689
00:28:35,660 --> 00:28:40,570
want to<font color="#E5E5E5"> make sure</font><font color="#CCCCCC"> that I</font><font color="#E5E5E5"> don't blow away</font>

690
00:28:37,130 --> 00:28:40,570
whatever they might have told me

691
00:28:42,450 --> 00:28:47,100
I'm going<font color="#E5E5E5"> to talk about a couple of ways</font>

692
00:28:44,400 --> 00:28:48,360
of scaling the<font color="#E5E5E5"> ibgp mesh in the last</font>

693
00:28:47,100 --> 00:28:51,990
presentation we talked a little bit

694
00:28:48,360 --> 00:28:54,090
about this the basic problem is I<font color="#CCCCCC"> bgp is</font>

695
00:28:51,990 --> 00:28:58,380
very promiscuous ebgp is very

696
00:28:54,090 --> 00:29:00,000
promiscuous and<font color="#CCCCCC"> I BGP is not so in EV gb</font>

697
00:28:58,380 --> 00:29:01,790
the<font color="#E5E5E5"> default is give everyone everything</font>

698
00:29:00,000 --> 00:29:05,400
and accept everything from everyone in

699
00:29:01,790 --> 00:29:08,100
ibgp there's some limitations you can't

700
00:29:05,400 --> 00:29:09,540
advertise an internal route that you

701
00:29:08,100 --> 00:29:11,520
heard from a third party to another

702
00:29:09,540 --> 00:29:12,990
router and the reason for<font color="#CCCCCC"> that is</font>

703
00:29:11,520 --> 00:29:14,250
there's no way<font color="#CCCCCC"> to do loop detection so</font>

704
00:29:12,990 --> 00:29:16,770
you<font color="#E5E5E5"> just keep advertising the routes</font>

705
00:29:14,250 --> 00:29:18,240
again around and around so ideally what

706
00:29:16,770 --> 00:29:19,710
would have happened was they would<font color="#E5E5E5"> have</font>

707
00:29:18,240 --> 00:29:22,110
had an attribute for doing loop

708
00:29:19,710 --> 00:29:23,760
detection for ibgp in the beginning<font color="#E5E5E5"> but</font>

709
00:29:22,110 --> 00:29:25,919
they didn't so there<font color="#E5E5E5"> are a couple of</font>

710
00:29:23,760 --> 00:29:28,200
approaches<font color="#E5E5E5"> that developed for being</font><font color="#CCCCCC"> able</font>

711
00:29:25,920 --> 00:29:29,730
to deal<font color="#CCCCCC"> with the scalability problem the</font>

712
00:29:28,200 --> 00:29:31,710
scalability problems you don't<font color="#CCCCCC"> want to</font>

713
00:29:29,730 --> 00:29:33,090
have to have if you have 50 routers

714
00:29:31,710 --> 00:29:39,030
every router<font color="#CCCCCC"> talked to every other</font>

715
00:29:33,090 --> 00:29:42,870
router in an IV GP mesh so these rules

716
00:29:39,030 --> 00:29:44,370
are counterintuitive and but you know

717
00:29:42,870 --> 00:29:47,219
ultimately<font color="#CCCCCC"> you don't want to have to</font>

718
00:29:44,370 --> 00:29:48,719
wind up with satanic diagrams of every

719
00:29:47,220 --> 00:29:51,480
every<font color="#E5E5E5"> router appearing with every other</font>

720
00:29:48,720 --> 00:29:55,190
router so the two<font color="#E5E5E5"> approaches are</font>

721
00:29:51,480 --> 00:29:57,090
<font color="#E5E5E5">Confederations and route reflectors and</font>

722
00:29:55,190 --> 00:29:59,480
actually going to edit<font color="#CCCCCC"> this presentation</font>

723
00:29:57,090 --> 00:29:59,480
here

724
00:30:00,080 --> 00:30:05,600
older presentation and route reflectors

725
00:30:02,750 --> 00:30:07,480
of the more commonly used method it's

726
00:30:05,600 --> 00:30:09,289
interesting<font color="#E5E5E5"> to look at</font><font color="#CCCCCC"> Confederations</font>

727
00:30:07,480 --> 00:30:11,330
because it's just<font color="#E5E5E5"> another way of</font>

728
00:30:09,289 --> 00:30:13,940
thinking<font color="#E5E5E5"> about and understandably ibgp</font>

729
00:30:11,330 --> 00:30:15,889
limitation so the Confederations what

730
00:30:13,940 --> 00:30:18,980
happens is ibgp becomes more promiscuous

731
00:30:15,890 --> 00:30:22,190
it sort of become schizophrenic you

732
00:30:18,980 --> 00:30:23,720
configure<font color="#E5E5E5"> BGP so that it looks like</font>

733
00:30:22,190 --> 00:30:26,750
<font color="#E5E5E5">every pop has a different autonomous</font>

734
00:30:23,720 --> 00:30:28,100
system number but in reality there's a

735
00:30:26,750 --> 00:30:29,690
nudge nudge wink wink that they know

736
00:30:28,100 --> 00:30:32,959
<font color="#CCCCCC">that they're all</font><font color="#E5E5E5"> part of the same</font>

737
00:30:29,690 --> 00:30:34,669
network so within a pop all the BGP

738
00:30:32,960 --> 00:30:37,580
speakers talk to each other in a full

739
00:30:34,669 --> 00:30:40,490
mesh every pop is actually router bgp

740
00:30:37,580 --> 00:30:44,059
and then some fake<font color="#CCCCCC"> AAS reserved</font><font color="#E5E5E5"> is 645</font>

741
00:30:40,490 --> 00:30:47,539
12 and above well below<font color="#CCCCCC"> Ford</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> byte</font>

742
00:30:44,059 --> 00:30:50,178
<font color="#E5E5E5">put a boost you know 65535 and then</font>

743
00:30:47,539 --> 00:30:51,799
between pops they use ebgp rules so even

744
00:30:50,179 --> 00:30:54,260
though they<font color="#CCCCCC"> ask numbers are different</font>

745
00:30:51,799 --> 00:30:56,929
when they<font color="#CCCCCC"> peered they use the ebgp rule</font>

746
00:30:54,260 --> 00:31:01,820
so they send local prep etc and within

747
00:30:56,929 --> 00:31:03,799
pops use ibgp rules but but went between

748
00:31:01,820 --> 00:31:06,260
pops they actually send all the routes

749
00:31:03,799 --> 00:31:07,908
so they don't worry<font color="#CCCCCC"> about loop detection</font>

750
00:31:06,260 --> 00:31:10,340
because they can do the protection in

751
00:31:07,909 --> 00:31:13,279
the<font color="#CCCCCC"> a s path because every pop has its</font>

752
00:31:10,340 --> 00:31:16,090
own autonomous system but you<font color="#E5E5E5"> preserve</font>

753
00:31:13,279 --> 00:31:18,830
local crafts so what it looks like is

754
00:31:16,090 --> 00:31:21,470
pentagrams in your network with full

755
00:31:18,830 --> 00:31:24,860
mesh inside each pop and then puree but

756
00:31:21,470 --> 00:31:26,179
<font color="#CCCCCC">645</font><font color="#E5E5E5"> 12 and 6 45 13 really know they're</font>

757
00:31:24,860 --> 00:31:27,740
part of the same<font color="#E5E5E5"> a ask they're just</font>

758
00:31:26,179 --> 00:31:29,929
pretending not to be for the sake of

759
00:31:27,740 --> 00:31:32,059
clarity it gives you some interesting

760
00:31:29,929 --> 00:31:33,919
fallout in that when you look<font color="#E5E5E5"> at your</font>

761
00:31:32,059 --> 00:31:35,379
autonomous system paths internally you

762
00:31:33,919 --> 00:31:37,070
can actually see how the route has been

763
00:31:35,380 --> 00:31:39,919
traveling and there's some interesting

764
00:31:37,070 --> 00:31:43,580
consequence is there and it also helps

765
00:31:39,919 --> 00:31:45,559
sort of understand how you can the

766
00:31:43,580 --> 00:31:48,350
hierarchical nature of how you get

767
00:31:45,559 --> 00:31:51,019
around the scalability problem but most

768
00:31:48,350 --> 00:31:53,658
people don't use<font color="#CCCCCC"> Confederations anymore</font>

769
00:31:51,019 --> 00:31:55,940
you have trickier<font color="#CCCCCC"> a/s paths you have to</font>

770
00:31:53,659 --> 00:31:57,830
do real because you have<font color="#CCCCCC"> parenthesis and</font>

771
00:31:55,940 --> 00:32:00,440
you have to do all sorts of<font color="#E5E5E5"> red X and</font>

772
00:31:57,830 --> 00:32:01,730
people<font color="#E5E5E5"> don't like it it does give you</font>

773
00:32:00,440 --> 00:32:03,769
the ability to use some interesting

774
00:32:01,730 --> 00:32:06,350
traffic engineering if anyone's

775
00:32:03,769 --> 00:32:07,880
interested in some some examples of that

776
00:32:06,350 --> 00:32:08,449
we could talk<font color="#CCCCCC"> about it at some point but</font>

777
00:32:07,880 --> 00:32:10,970
really

778
00:32:08,450 --> 00:32:13,010
pls is the way to go and<font color="#CCCCCC"> Rev reflectors</font>

779
00:32:10,970 --> 00:32:14,030
in<font color="#E5E5E5"> general if nothing else just because</font>

780
00:32:13,010 --> 00:32:14,780
the people<font color="#CCCCCC"> that you're</font><font color="#E5E5E5"> going to hire are</font>

781
00:32:14,030 --> 00:32:16,399
going to be familiar<font color="#CCCCCC"> with those</font>

782
00:32:14,780 --> 00:32:20,420
technologies does anyone run

783
00:32:16,400 --> 00:32:22,610
<font color="#CCCCCC">Confederations the network okay so</font><font color="#E5E5E5"> maybe</font>

784
00:32:20,420 --> 00:32:25,030
we'll take<font color="#CCCCCC"> that out in the future so</font>

785
00:32:22,610 --> 00:32:28,070
route reflectors is another way of

786
00:32:25,030 --> 00:32:29,870
breaking of solving the scalability

787
00:32:28,070 --> 00:32:31,970
problem and again the problem is how do

788
00:32:29,870 --> 00:32:34,879
<font color="#E5E5E5">you do move detection so you nominate</font>

789
00:32:31,970 --> 00:32:36,470
one or two routers in a cluster which is

790
00:32:34,880 --> 00:32:38,960
<font color="#E5E5E5">often a pop or it could be more</font><font color="#CCCCCC"> than a</font>

791
00:32:36,470 --> 00:32:42,050
pop to be allowed to break the<font color="#E5E5E5"> rules for</font>

792
00:32:38,960 --> 00:32:44,360
their clients and reflect these routes

793
00:32:42,050 --> 00:32:47,629
that are these<font color="#CCCCCC"> third-party</font><font color="#E5E5E5"> internal</font>

794
00:32:44,360 --> 00:32:49,280
routes to each other and obviously what

795
00:32:47,630 --> 00:32:51,710
<font color="#E5E5E5">you have to do is they actually</font><font color="#CCCCCC"> have to</font>

796
00:32:49,280 --> 00:32:53,330
<font color="#CCCCCC">have a way to tag how to do the loop</font>

797
00:32:51,710 --> 00:32:55,580
detection and that's what route

798
00:32:53,330 --> 00:32:58,939
reflector am<font color="#E5E5E5"> I using and the rent</font>

799
00:32:55,580 --> 00:33:01,159
reflector keeps track of it so the ibgp

800
00:32:58,940 --> 00:33:04,760
routes heard from non clients<font color="#CCCCCC"> are sent</font>

801
00:33:01,160 --> 00:33:07,970
to clients but not other non clients so

802
00:33:04,760 --> 00:33:09,800
it does reflection internally and ebgp

803
00:33:07,970 --> 00:33:12,470
works like normal and then you fully

804
00:33:09,800 --> 00:33:14,720
match the wrapped reflectors so you

805
00:33:12,470 --> 00:33:17,390
actually do wind up with something that

806
00:33:14,720 --> 00:33:20,000
<font color="#E5E5E5">looks similar to the Confederations</font>

807
00:33:17,390 --> 00:33:22,880
except fewer typically fewer extra fewer

808
00:33:20,000 --> 00:33:24,770
bgp sessions externally and in some

809
00:33:22,880 --> 00:33:27,800
cases you might have one route reflector

810
00:33:24,770 --> 00:33:29,150
for your whole network or for a pop and

811
00:33:27,800 --> 00:33:32,960
then the route reflectors themselves are

812
00:33:29,150 --> 00:33:35,060
fully meshed so on the server and<font color="#CCCCCC"> tag</font>

813
00:33:32,960 --> 00:33:37,150
each client so<font color="#CCCCCC"> that it knows that it's a</font>

814
00:33:35,060 --> 00:33:39,560
client and<font color="#E5E5E5"> it can break the rules and</font>

815
00:33:37,150 --> 00:33:41,870
all the route reflector servers still

816
00:33:39,560 --> 00:33:43,520
have to pee with each other because<font color="#E5E5E5"> they</font>

817
00:33:41,870 --> 00:33:45,620
were<font color="#E5E5E5"> just running high bgp you know</font>

818
00:33:43,520 --> 00:33:49,700
between<font color="#CCCCCC"> each other</font><font color="#E5E5E5"> and you need to get</font>

819
00:33:45,620 --> 00:33:51,409
those routes now one caveat on a lot of

820
00:33:49,700 --> 00:33:53,450
implementations enabling<font color="#E5E5E5"> this will reset</font>

821
00:33:51,410 --> 00:33:55,220
<font color="#CCCCCC">the session because it actually has to</font>

822
00:33:53,450 --> 00:33:58,340
apply new attributes to the routes to

823
00:33:55,220 --> 00:34:00,080
track this all originator ID gets

824
00:33:58,340 --> 00:34:02,449
applied which is how<font color="#E5E5E5"> it knows what</font><font color="#CCCCCC"> ret</font>

825
00:34:00,080 --> 00:34:04,790
reflector is sort of a master<font color="#CCCCCC"> that</font><font color="#E5E5E5"> heard</font>

826
00:34:02,450 --> 00:34:06,710
it<font color="#E5E5E5"> and cluster list which</font><font color="#CCCCCC"> is sort of</font>

827
00:34:04,790 --> 00:34:08,270
like in<font color="#CCCCCC"> the in the</font><font color="#E5E5E5"> Confederations where</font>

828
00:34:06,710 --> 00:34:10,340
you have the fake a s numbers<font color="#CCCCCC"> it</font><font color="#E5E5E5"> sort of</font>

829
00:34:08,270 --> 00:34:12,620
hell did the route propagate so you look

830
00:34:10,340 --> 00:34:14,070
at<font color="#E5E5E5"> the route you could still figure out</font>

831
00:34:12,620 --> 00:34:16,770
someone's apology information

832
00:34:14,070 --> 00:34:18,270
about what's going on your network so

833
00:34:16,770 --> 00:34:19,500
how many<font color="#E5E5E5"> people are planning on</font>

834
00:34:18,270 --> 00:34:22,320
implementing route reflectors in the

835
00:34:19,500 --> 00:34:23,400
next maintenance window how many<font color="#E5E5E5"> people</font>

836
00:34:22,320 --> 00:34:28,370
have thought<font color="#E5E5E5"> about implementing route</font>

837
00:34:23,400 --> 00:34:28,370
reflectors the next year<font color="#CCCCCC"> okay so</font>

838
00:34:28,400 --> 00:34:33,720
supporting<font color="#CCCCCC"> multi-home customers what</font>

839
00:34:31,770 --> 00:34:36,630
they're really<font color="#E5E5E5"> looking from you is some</font>

840
00:34:33,719 --> 00:34:38,639
enlightenment and support in being able

841
00:34:36,630 --> 00:34:40,020
<font color="#E5E5E5">to do what</font><font color="#CCCCCC"> they</font><font color="#E5E5E5"> need to do which is your</font>

842
00:34:38,639 --> 00:34:41,730
<font color="#E5E5E5">multi</font><font color="#CCCCCC"> home</font><font color="#E5E5E5"> customers now have their</font>

843
00:34:40,020 --> 00:34:43,889
customers sort of like one of<font color="#E5E5E5"> the things</font>

844
00:34:41,730 --> 00:34:45,330
<font color="#CCCCCC">that you</font><font color="#E5E5E5"> learn pretty early on is when</font>

845
00:34:43,889 --> 00:34:48,690
your customers screaming at you because

846
00:34:45,330 --> 00:34:50,159
you have an outage they've got customers

847
00:34:48,690 --> 00:34:51,540
screaming at them and in some cases

848
00:34:50,159 --> 00:34:53,759
they've<font color="#CCCCCC"> got customers screaming at them</font>

849
00:34:51,540 --> 00:34:55,199
so the reason<font color="#E5E5E5"> why sometimes it's better</font>

850
00:34:53,760 --> 00:34:56,850
to<font color="#E5E5E5"> have an outage last longer a new</font>

851
00:34:55,199 --> 00:34:58,649
better communication is because people

852
00:34:56,850 --> 00:35:00,750
go much less apeshit especially a

853
00:34:58,650 --> 00:35:02,670
contract renewal time if they can

854
00:35:00,750 --> 00:35:04,350
actually<font color="#E5E5E5"> tell people something even if</font>

855
00:35:02,670 --> 00:35:05,580
it's completely made up about what's

856
00:35:04,350 --> 00:35:07,170
going on<font color="#E5E5E5"> and how long it's going to take</font>

857
00:35:05,580 --> 00:35:08,460
to resolve things then if they're just

858
00:35:07,170 --> 00:35:09,630
<font color="#E5E5E5">sitting there with people calling them</font>

859
00:35:08,460 --> 00:35:11,550
and<font color="#E5E5E5"> they have nothing intelligent to say</font>

860
00:35:09,630 --> 00:35:12,990
other than making something up that

861
00:35:11,550 --> 00:35:15,150
would presumably be less intelligent

862
00:35:12,990 --> 00:35:16,799
than whatever<font color="#E5E5E5"> you would make up because</font>

863
00:35:15,150 --> 00:35:18,630
you release notes and are much more

864
00:35:16,800 --> 00:35:20,250
familiar<font color="#CCCCCC"> with real</font><font color="#E5E5E5"> Cisco things you</font>

865
00:35:18,630 --> 00:35:24,960
could blame you know different vendors

866
00:35:20,250 --> 00:35:26,970
on so another thing is they're<font color="#E5E5E5"> going to</font>

867
00:35:24,960 --> 00:35:29,160
talk to you about advertising routes how

868
00:35:26,970 --> 00:35:31,560
do<font color="#E5E5E5"> I do that they're going to</font><font color="#CCCCCC"> want to</font><font color="#E5E5E5"> be</font>

869
00:35:29,160 --> 00:35:33,629
<font color="#CCCCCC">able to change traffic and profit which</font>

870
00:35:31,560 --> 00:35:37,470
means community system and being able to

871
00:35:33,630 --> 00:35:39,210
implement if you implement communities

872
00:35:37,470 --> 00:35:41,220
then you stop supporting certain things

873
00:35:39,210 --> 00:35:42,780
you need to<font color="#E5E5E5"> warn your customers and</font><font color="#CCCCCC"> make</font>

874
00:35:41,220 --> 00:35:44,970
sure<font color="#CCCCCC"> that you do that generally people</font>

875
00:35:42,780 --> 00:35:47,160
are pretty good<font color="#E5E5E5"> about that and having a</font>

876
00:35:44,970 --> 00:35:49,080
regularized community system is the most

877
00:35:47,160 --> 00:35:51,089
is<font color="#CCCCCC"> the easiest way to make sure that you</font>

878
00:35:49,080 --> 00:35:52,830
<font color="#CCCCCC">don't have</font><font color="#E5E5E5"> people manually creating and</font>

879
00:35:51,090 --> 00:35:55,290
deleting communities you<font color="#CCCCCC"> know that apply</font>

880
00:35:52,830 --> 00:35:58,020
in different places in<font color="#E5E5E5"> your network for</font>

881
00:35:55,290 --> 00:35:59,310
these<font color="#CCCCCC"> multi own customers you're going</font>

882
00:35:58,020 --> 00:36:00,720
to have<font color="#CCCCCC"> people that you give address</font>

883
00:35:59,310 --> 00:36:01,890
space we're going to start along the

884
00:36:00,720 --> 00:36:04,230
path and<font color="#E5E5E5"> not have their own address</font>

885
00:36:01,890 --> 00:36:06,029
space we're going to need<font color="#CCCCCC"> to announce</font>

886
00:36:04,230 --> 00:36:09,270
some<font color="#CCCCCC"> of your address space more</font>

887
00:36:06,030 --> 00:36:11,470
specifically so if you do create routes

888
00:36:09,270 --> 00:36:12,759
into<font color="#CCCCCC"> BGP from redistribution</font>

889
00:36:11,470 --> 00:36:14,799
that will be you know a little bit<font color="#E5E5E5"> of a</font>

890
00:36:12,760 --> 00:36:18,160
trick but with<font color="#CCCCCC"> network statements it's</font>

891
00:36:14,800 --> 00:36:21,550
not that hard and again supporting

892
00:36:18,160 --> 00:36:22,779
implementing communities interesting

893
00:36:21,550 --> 00:36:25,150
thing that<font color="#CCCCCC"> I don't see as much of</font>

894
00:36:22,780 --> 00:36:28,450
anymore I used to see more of it

895
00:36:25,150 --> 00:36:30,250
nowadays a lot of<font color="#E5E5E5"> people do you</font><font color="#CCCCCC"> know</font>

896
00:36:28,450 --> 00:36:34,359
<font color="#CCCCCC">multi-homing is much much more cost</font>

897
00:36:30,250 --> 00:36:36,340
<font color="#CCCCCC">effective as backup transit so this was</font>

898
00:36:34,359 --> 00:36:38,799
something that tripped up the early<font color="#E5E5E5"> BGP</font>

899
00:36:36,340 --> 00:36:43,680
researchers<font color="#E5E5E5"> because there are a set of</font>

900
00:36:38,800 --> 00:36:46,630
<font color="#E5E5E5">people who can vary infinitely from the</font>

901
00:36:43,680 --> 00:36:50,589
expected use of BGP based on severe

902
00:36:46,630 --> 00:36:51,910
economic considerations so mashed potato

903
00:36:50,590 --> 00:36:53,380
route and all sorts of<font color="#E5E5E5"> other things that</font>

904
00:36:51,910 --> 00:36:54,399
happen because you're trying<font color="#E5E5E5"> to save</font>

905
00:36:53,380 --> 00:36:56,470
money you're trying to implement

906
00:36:54,400 --> 00:36:58,690
redundancy<font color="#E5E5E5"> and one of the things</font><font color="#CCCCCC"> that</font>

907
00:36:56,470 --> 00:37:01,419
<font color="#E5E5E5">you can</font><font color="#CCCCCC"> often find is another provider</font>

908
00:36:58,690 --> 00:37:02,859
that might be technically competing with

909
00:37:01,420 --> 00:37:05,410
you but not really head on your

910
00:37:02,859 --> 00:37:07,569
wholesale their retail you can do backup

911
00:37:05,410 --> 00:37:10,240
transit with especially if you're in<font color="#E5E5E5"> a</font>

912
00:37:07,570 --> 00:37:11,859
<font color="#CCCCCC">equinix type data center is often people</font>

913
00:37:10,240 --> 00:37:13,868
that you can<font color="#E5E5E5"> establish those things with</font>

914
00:37:11,859 --> 00:37:16,900
so that if you have two providers or one

915
00:37:13,869 --> 00:37:18,430
provider you guys each can give<font color="#CCCCCC"> each</font>

916
00:37:16,900 --> 00:37:20,380
other a<font color="#E5E5E5"> link that's there for redundancy</font>

917
00:37:18,430 --> 00:37:22,029
so at least it should hit<font color="#E5E5E5"> the fan you</font>

918
00:37:20,380 --> 00:37:23,349
can call each other and all you can

919
00:37:22,030 --> 00:37:24,940
always have the option to turn something

920
00:37:23,349 --> 00:37:27,940
up and<font color="#E5E5E5"> give</font><font color="#CCCCCC"> each other some flexible</font>

921
00:37:24,940 --> 00:37:30,910
connectivity so being able to support

922
00:37:27,940 --> 00:37:33,910
<font color="#CCCCCC">that is something that</font><font color="#E5E5E5"> you'll typically</font>

923
00:37:30,910 --> 00:37:35,348
<font color="#E5E5E5">want to be able to use communities so</font>

924
00:37:33,910 --> 00:37:37,480
that if someone temporarily needs to

925
00:37:35,349 --> 00:37:38,859
borrow a cup of transit you give them

926
00:37:37,480 --> 00:37:40,420
communities that can apply<font color="#E5E5E5"> to the route</font>

927
00:37:38,859 --> 00:37:42,700
<font color="#CCCCCC">that will turn the session from peering</font>

928
00:37:40,420 --> 00:37:44,080
into transit and then back and you may

929
00:37:42,700 --> 00:37:46,000
want<font color="#CCCCCC"> to have</font><font color="#E5E5E5"> a policy and you may charge</font>

930
00:37:44,080 --> 00:37:47,348
you may not charge but some of the

931
00:37:46,000 --> 00:37:48,849
techniques<font color="#E5E5E5"> that you can use to support</font>

932
00:37:47,349 --> 00:37:52,510
customers can also give you more

933
00:37:48,849 --> 00:37:54,640
diversity in<font color="#CCCCCC"> your network or you could</font>

934
00:37:52,510 --> 00:37:56,800
just get a whole bunch<font color="#E5E5E5"> of wimax and get</font>

935
00:37:54,640 --> 00:37:58,390
some<font color="#CCCCCC"> jerry tunnels and hope that all</font>

936
00:37:56,800 --> 00:38:00,310
your customers can shoot<font color="#CCCCCC"> down the 10</font>

937
00:37:58,390 --> 00:38:03,629
megabits for the period of<font color="#CCCCCC"> time that</font>

938
00:38:00,310 --> 00:38:03,630
you're down so

939
00:38:05,140 --> 00:38:12,290
how do<font color="#E5E5E5"> you log config changes how many</font>

940
00:38:08,840 --> 00:38:13,670
people<font color="#CCCCCC"> run rancid many people like run</font>

941
00:38:12,290 --> 00:38:15,860
something like rancid to track their

942
00:38:13,670 --> 00:38:18,230
config changes but not rinse it properly

943
00:38:15,860 --> 00:38:20,960
very useful<font color="#CCCCCC"> to use something that gives</font>

944
00:38:18,230 --> 00:38:23,420
your router configs it's very<font color="#CCCCCC"> useful if</font>

945
00:38:20,960 --> 00:38:24,770
you have more than<font color="#E5E5E5"> one person even if</font>

946
00:38:23,420 --> 00:38:27,860
<font color="#E5E5E5">you don't have more than one person can</font>

947
00:38:24,770 --> 00:38:30,080
be useful it was<font color="#E5E5E5"> great if you're a team</font>

948
00:38:27,860 --> 00:38:32,720
of three four or five people someone

949
00:38:30,080 --> 00:38:35,090
goes on vacation they can come<font color="#CCCCCC"> back and</font>

950
00:38:32,720 --> 00:38:36,770
catch up on everything that<font color="#E5E5E5"> changed you</font>

951
00:38:35,090 --> 00:38:37,760
can have<font color="#E5E5E5"> some senior guys monitoring to</font>

952
00:38:36,770 --> 00:38:39,890
make sure that the<font color="#E5E5E5"> tickets that</font><font color="#CCCCCC"> were</font>

953
00:38:37,760 --> 00:38:41,630
supposed<font color="#E5E5E5"> to be done</font><font color="#CCCCCC"> overnight to change</font>

954
00:38:39,890 --> 00:38:43,730
some static routes that there's no most

955
00:38:41,630 --> 00:38:48,530
PF that magically changed for some

956
00:38:43,730 --> 00:38:51,410
reason that no one<font color="#E5E5E5"> knows about and does</font>

957
00:38:48,530 --> 00:38:54,200
a does rancid<font color="#E5E5E5"> nail actually come with</font>

958
00:38:51,410 --> 00:38:57,799
hooks to book attack I clones or do you

959
00:38:54,200 --> 00:38:58,850
have to<font color="#E5E5E5"> write that</font><font color="#CCCCCC"> okay so they're a</font>

960
00:38:57,800 --> 00:39:01,160
bunch of networks that I've<font color="#E5E5E5"> worked with</font>

961
00:38:58,850 --> 00:39:03,710
we're actually brings some custom code

962
00:39:01,160 --> 00:39:05,509
to the rancid reports actually look at

963
00:39:03,710 --> 00:39:07,370
<font color="#E5E5E5">the</font><font color="#CCCCCC"> tax logs to show you who changed</font>

964
00:39:05,510 --> 00:39:08,960
every line so if there's<font color="#CCCCCC"> something weird</font>

965
00:39:07,370 --> 00:39:11,120
you actually know exactly who to talk to

966
00:39:08,960 --> 00:39:13,610
without<font color="#CCCCCC"> having to go back and grab that</font>

967
00:39:11,120 --> 00:39:15,920
<font color="#E5E5E5">can be interesting so getting some sort</font>

968
00:39:13,610 --> 00:39:18,530
of regular process involved as nice how

969
00:39:15,920 --> 00:39:20,600
many people<font color="#CCCCCC"> have the Holy Grail which is</font>

970
00:39:18,530 --> 00:39:22,310
to say configuration will get pushed

971
00:39:20,600 --> 00:39:25,850
through a central management system that

972
00:39:22,310 --> 00:39:28,759
then detects policy violations and<font color="#E5E5E5"> okay</font>

973
00:39:25,850 --> 00:39:30,560
no one yeah some people<font color="#CCCCCC"> would how many</font>

974
00:39:28,760 --> 00:39:33,130
<font color="#E5E5E5">people would like to</font><font color="#CCCCCC"> have a system that</font>

975
00:39:30,560 --> 00:39:35,950
<font color="#CCCCCC">they use to configure their network</font>

976
00:39:33,130 --> 00:39:38,079
so sort of interesting in the cloud

977
00:39:35,950 --> 00:39:39,609
space where I play a little bit is try

978
00:39:38,079 --> 00:39:41,349
<font color="#E5E5E5">to do that for machines as</font><font color="#CCCCCC"> well</font>

979
00:39:39,609 --> 00:39:42,490
especially the<font color="#CCCCCC"> people that are the real</font>

980
00:39:41,349 --> 00:39:44,619
Holy Grails<font color="#CCCCCC"> that people trying to do</font>

981
00:39:42,490 --> 00:39:47,558
that<font color="#E5E5E5"> for</font><font color="#CCCCCC"> windows machines but you know</font>

982
00:39:44,619 --> 00:39:49,059
the<font color="#CCCCCC"> the ideal is that everything</font><font color="#E5E5E5"> on your</font>

983
00:39:47,559 --> 00:39:51,190
network is configured according to some

984
00:39:49,059 --> 00:39:52,509
canonical policy database rather than

985
00:39:51,190 --> 00:39:53,859
the<font color="#E5E5E5"> video base is being assembled from</font>

986
00:39:52,509 --> 00:39:57,670
whatever randomly got typed into the

987
00:39:53,859 --> 00:39:58,598
<font color="#E5E5E5">network</font><font color="#CCCCCC"> and in some larger companies</font>

988
00:39:57,670 --> 00:40:01,599
they actually have sarbanes-oxley

989
00:39:58,599 --> 00:40:03,009
constraints and basically<font color="#CCCCCC"> all the</font>

990
00:40:01,599 --> 00:40:04,900
auditors are completely ignoring the

991
00:40:03,009 --> 00:40:06,759
fact that there's<font color="#E5E5E5"> no one knows what</font><font color="#CCCCCC"> the</font>

992
00:40:04,900 --> 00:40:09,069
network should look like and if you

993
00:40:06,759 --> 00:40:10,509
<font color="#CCCCCC">think it's bad that I mean you know it</font>

994
00:40:09,069 --> 00:40:12,160
follows<font color="#CCCCCC"> from the fact that no one</font><font color="#E5E5E5"> knows</font>

995
00:40:10,509 --> 00:40:13,900
<font color="#E5E5E5">when any local network should look like</font>

996
00:40:12,160 --> 00:40:15,129
no one shouldn't be surprising that no

997
00:40:13,900 --> 00:40:16,809
one who knows what the<font color="#E5E5E5"> internet should</font>

998
00:40:15,130 --> 00:40:18,069
<font color="#E5E5E5">look like so you're looking at it and</font>

999
00:40:16,809 --> 00:40:20,289
you<font color="#E5E5E5"> just know that it's a mess</font><font color="#CCCCCC"> but you</font>

1000
00:40:18,069 --> 00:40:22,210
don't know exactly why your house so the

1001
00:40:20,289 --> 00:40:23,859
more regular you can get the better off

1002
00:40:22,210 --> 00:40:25,660
you'll be if<font color="#CCCCCC"> you are</font><font color="#E5E5E5"> customer complaints</font>

1003
00:40:23,859 --> 00:40:27,609
the less time you spend you know

1004
00:40:25,660 --> 00:40:32,200
reviewing configs and wondering why

1005
00:40:27,609 --> 00:40:35,009
something was so some things<font color="#E5E5E5"> you</font>

1006
00:40:32,200 --> 00:40:38,348
probably want<font color="#E5E5E5"> to have in your configs is</font>

1007
00:40:35,009 --> 00:40:40,750
have some users has some tac-x servers

1008
00:40:38,349 --> 00:40:44,529
that you talk to now downside is if you

1009
00:40:40,750 --> 00:40:45,880
do log every command then the thing that

1010
00:40:44,529 --> 00:40:48,130
will drive you<font color="#CCCCCC"> crazy if you</font><font color="#E5E5E5"> lose</font>

1011
00:40:45,880 --> 00:40:50,049
connectivity to your<font color="#E5E5E5"> tack x server then</font>

1012
00:40:48,130 --> 00:40:52,930
every<font color="#CCCCCC"> time you type a command and it</font>

1013
00:40:50,049 --> 00:40:54,339
can't connect you may<font color="#E5E5E5"> have a few second</font>

1014
00:40:52,930 --> 00:40:56,288
delay and that can<font color="#E5E5E5"> be a little bit</font>

1015
00:40:54,339 --> 00:40:57,460
annoying so the connectivity problem the

1016
00:40:56,289 --> 00:41:00,549
first thing you may need to do is turn

1017
00:40:57,460 --> 00:41:03,220
off logging one other thing I'll say

1018
00:41:00,549 --> 00:41:06,579
based on some actual experience about 10

1019
00:41:03,220 --> 00:41:09,009
years ago<font color="#E5E5E5"> is do not let the people who</font>

1020
00:41:06,579 --> 00:41:10,990
<font color="#E5E5E5">have enabled on your routers have root</font>

1021
00:41:09,009 --> 00:41:14,200
on<font color="#CCCCCC"> the machines that audit the routers</font>

1022
00:41:10,990 --> 00:41:16,328
or when someone<font color="#E5E5E5"> types redistribute you</font>

1023
00:41:14,200 --> 00:41:18,609
know a and 2 b and the network blows up

1024
00:41:16,329 --> 00:41:20,259
the first thing they'll do is go out of

1025
00:41:18,609 --> 00:41:22,690
band to the logging server and crash it

1026
00:41:20,259 --> 00:41:25,450
or you know kill those lines and log so

1027
00:41:22,690 --> 00:41:27,970
audit can actually be useful for<font color="#E5E5E5"> least</font>

1028
00:41:25,450 --> 00:41:29,870
for training purposes if not for extreme

1029
00:41:27,970 --> 00:41:32,399
sanction

1030
00:41:29,870 --> 00:41:34,830
so let's<font color="#E5E5E5"> say you have a sample network</font>

1031
00:41:32,400 --> 00:41:37,670
you've got different tops you've got

1032
00:41:34,830 --> 00:41:40,680
some more tightly clustered than others

1033
00:41:37,670 --> 00:41:43,440
<font color="#CCCCCC">your you've got a pop of a look at say</font>

1034
00:41:40,680 --> 00:41:45,330
an<font color="#E5E5E5"> Ashburn with some customers core</font>

1035
00:41:43,440 --> 00:41:47,400
router direct some direct connections

1036
00:41:45,330 --> 00:41:51,120
which is I'd say let's<font color="#E5E5E5"> say this is in</font>

1037
00:41:47,400 --> 00:41:53,460
our organically evil network on the side

1038
00:41:51,120 --> 00:41:55,920
I run one such organically<font color="#E5E5E5"> evolved</font>

1039
00:41:53,460 --> 00:41:57,360
network if I had had more time my wife

1040
00:41:55,920 --> 00:42:01,710
had not gotten sick I was going to take

1041
00:41:57,360 --> 00:42:04,590
a victim soup to catalyst and actually

1042
00:42:01,710 --> 00:42:07,620
do some load balancing with some crappy

1043
00:42:04,590 --> 00:42:09,350
traffic that we support but that'll have

1044
00:42:07,620 --> 00:42:12,540
to be next<font color="#CCCCCC"> not on where we actually do</font>

1045
00:42:09,350 --> 00:42:14,759
<font color="#E5E5E5">victimization of traffic for people for</font>

1046
00:42:12,540 --> 00:42:17,610
demonstration purposes so what do I want

1047
00:42:14,760 --> 00:42:21,000
<font color="#E5E5E5">to do with this demo network I want to</font>

1048
00:42:17,610 --> 00:42:24,500
<font color="#E5E5E5">filter customer routes and not accept my</font>

1049
00:42:21,000 --> 00:42:27,540
own routes on the inbound side I want to

1050
00:42:24,500 --> 00:42:29,730
take customers and have a community that

1051
00:42:27,540 --> 00:42:33,710
I that I apply for customers that I'm

1052
00:42:29,730 --> 00:42:35,820
giving transit to I want to filters

1053
00:42:33,710 --> 00:42:37,980
other routes that I really shouldn't be

1054
00:42:35,820 --> 00:42:40,140
seeing on not using route flop happening

1055
00:42:37,980 --> 00:42:43,050
we didn't talk about<font color="#E5E5E5"> it but in the first</font>

1056
00:42:40,140 --> 00:42:44,730
<font color="#E5E5E5">presentation I said if you think that</font>

1057
00:42:43,050 --> 00:42:46,410
you need it you probably don't and if

1058
00:42:44,730 --> 00:42:47,760
you do then there are about<font color="#E5E5E5"> ten papers</font>

1059
00:42:46,410 --> 00:42:49,470
that you should read to make sure that

1060
00:42:47,760 --> 00:42:52,080
you<font color="#E5E5E5"> really do you can really cause</font>

1061
00:42:49,470 --> 00:42:53,370
yourself a world of hurt by turning on

1062
00:42:52,080 --> 00:42:55,440
Ralph laughs dampening it was a nice

1063
00:42:53,370 --> 00:42:57,029
idea and again there's a lot of things

1064
00:42:55,440 --> 00:42:59,940
on the internet that<font color="#E5E5E5"> were fallout from</font>

1065
00:42:57,030 --> 00:43:02,310
the days when routers had<font color="#CCCCCC"> 6240</font><font color="#E5E5E5"> CPUs in</font>

1066
00:42:59,940 --> 00:43:05,430
them that are not quite as big an issue

1067
00:43:02,310 --> 00:43:07,170
nowadays and you do want to allow

1068
00:43:05,430 --> 00:43:09,210
customers some flexibility and how you

1069
00:43:07,170 --> 00:43:12,150
advertise them I should probably<font color="#E5E5E5"> update</font>

1070
00:43:09,210 --> 00:43:14,400
this to pop in a more regular eyes

1071
00:43:12,150 --> 00:43:15,750
community system but it's<font color="#E5E5E5"> pretty simple</font>

1072
00:43:14,400 --> 00:43:18,060
but you give you the general idea of

1073
00:43:15,750 --> 00:43:20,100
what can be done so what I want to do I

1074
00:43:18,060 --> 00:43:22,230
<font color="#CCCCCC">want to prefer customers then private</font>

1075
00:43:20,100 --> 00:43:25,170
interconnects then things I consider

1076
00:43:22,230 --> 00:43:27,420
good public exchanges then some things

1077
00:43:25,170 --> 00:43:29,220
some places that I'm at but I put a bag

1078
00:43:27,420 --> 00:43:30,380
over the router port and then stick the

1079
00:43:29,220 --> 00:43:34,100
cable in and then you know

1080
00:43:30,380 --> 00:43:36,950
and I'm not<font color="#CCCCCC"> really there and then I used</font>

1081
00:43:34,100 --> 00:43:38,210
in<font color="#E5E5E5"> this case i'm using Confederations</font>

1082
00:43:36,950 --> 00:43:40,100
will probably update this for rap

1083
00:43:38,210 --> 00:43:42,860
reflectors next time i'm using loop

1084
00:43:40,100 --> 00:43:45,710
backs for peering so<font color="#CCCCCC"> i've</font><font color="#E5E5E5"> got a bunch of</font>

1085
00:43:42,860 --> 00:43:48,170
interfaces the slides are already

1086
00:43:45,710 --> 00:43:50,630
submitted<font color="#CCCCCC"> i have some slight updates but</font>

1087
00:43:48,170 --> 00:43:53,390
you can download them from the site so i

1088
00:43:50,630 --> 00:43:55,970
won't go over all of the all the details

1089
00:43:53,390 --> 00:43:59,810
there<font color="#E5E5E5"> i'm going to run ospf internally</font>

1090
00:43:55,970 --> 00:44:03,799
to synchronize now you can use I ibgp<font color="#CCCCCC"> as</font>

1091
00:43:59,810 --> 00:44:06,740
an igp generally speaking the<font color="#CCCCCC"> IGP is</font>

1092
00:44:03,800 --> 00:44:08,540
like ospf is I<font color="#E5E5E5"> asking our grp are stable</font>

1093
00:44:06,740 --> 00:44:10,490
enough now<font color="#CCCCCC"> there's really no reason not</font>

1094
00:44:08,540 --> 00:44:12,529
to use<font color="#E5E5E5"> them the only thing</font><font color="#CCCCCC"> you don't</font>

1095
00:44:10,490 --> 00:44:14,629
<font color="#CCCCCC">want to do is cross the streams unless</font>

1096
00:44:12,530 --> 00:44:17,450
you're pretty familiar<font color="#E5E5E5"> with how to do</font>

1097
00:44:14,630 --> 00:44:19,160
that safely so redistributing between

1098
00:44:17,450 --> 00:44:21,620
active routing protocols and get you in

1099
00:44:19,160 --> 00:44:24,440
a world of hurt but just running ospf

1100
00:44:21,620 --> 00:44:26,600
typically not a problem do run

1101
00:44:24,440 --> 00:44:28,370
authentication I guess you're probably

1102
00:44:26,600 --> 00:44:30,049
not worried about smarter hands

1103
00:44:28,370 --> 00:44:33,230
wandering in and sticking a<font color="#CCCCCC"> pc and</font>

1104
00:44:30,050 --> 00:44:37,160
injected jacking into your SPF but still

1105
00:44:33,230 --> 00:44:38,480
good idea seen a<font color="#CCCCCC"> lot of</font><font color="#E5E5E5"> people run ospf</font>

1106
00:44:37,160 --> 00:44:41,480
on interfaces that they thought were

1107
00:44:38,480 --> 00:44:44,630
private<font color="#E5E5E5"> that turned out not to be in BGP</font>

1108
00:44:41,480 --> 00:44:46,820
I always recommend that you have an S

1109
00:44:44,630 --> 00:44:48,530
path access list that you know the

1110
00:44:46,820 --> 00:44:50,900
<font color="#CCCCCC">number of so when you have an oh</font>

1111
00:44:48,530 --> 00:44:52,700
moment you have something<font color="#CCCCCC"> that you</font><font color="#E5E5E5"> can</font>

1112
00:44:50,900 --> 00:44:55,670
deny<font color="#E5E5E5"> everything and one you can permit</font>

1113
00:44:52,700 --> 00:44:57,410
everything typically when you are in<font color="#E5E5E5"> the</font>

1114
00:44:55,670 --> 00:44:59,750
middle of configs and you realize<font color="#CCCCCC"> that</font>

1115
00:44:57,410 --> 00:45:01,330
even despite review you got it wrong you

1116
00:44:59,750 --> 00:45:04,100
don't want to shut the session down

1117
00:45:01,330 --> 00:45:05,810
because you're advertising routes you

1118
00:45:04,100 --> 00:45:07,490
want to stop advertising them but you

1119
00:45:05,810 --> 00:45:09,710
may<font color="#CCCCCC"> want to immediately stop accepting</font>

1120
00:45:07,490 --> 00:45:11,299
because you just you<font color="#E5E5E5"> know applied</font>

1121
00:45:09,710 --> 00:45:14,030
something and now you're<font color="#E5E5E5"> sending too</font>

1122
00:45:11,300 --> 00:45:16,340
much traffic to an interface so I you

1123
00:45:14,030 --> 00:45:19,640
know neighbor foo yes you know two out

1124
00:45:16,340 --> 00:45:20,730
boom clear soft out I'm done airsoft in

1125
00:45:19,640 --> 00:45:23,830
I'm done

1126
00:45:20,730 --> 00:45:25,990
so in this particular case we're using

1127
00:45:23,830 --> 00:45:29,710
Confederations in this example so we

1128
00:45:25,990 --> 00:45:32,470
have a fake a s I find that it's helpful

1129
00:45:29,710 --> 00:45:34,180
to set the router ID set it to<font color="#E5E5E5"> a</font>

1130
00:45:32,470 --> 00:45:37,330
loopback if you've got a canonical loop

1131
00:45:34,180 --> 00:45:39,669
back for that router better than just

1132
00:45:37,330 --> 00:45:41,080
letting<font color="#CCCCCC"> it float or god help you</font>

1133
00:45:39,670 --> 00:45:43,869
actually have multiple routers that have

1134
00:45:41,080 --> 00:45:46,060
the same router ID that can get you into

1135
00:45:43,869 --> 00:45:48,730
<font color="#E5E5E5">trouble as well I've got a network</font>

1136
00:45:46,060 --> 00:45:50,380
statement that I'm creating and in the

1137
00:45:48,730 --> 00:45:52,180
simple world you can rate the network

1138
00:45:50,380 --> 00:45:54,550
statement with just a mask here I apply

1139
00:45:52,180 --> 00:45:56,440
a route map so when<font color="#E5E5E5"> I create the network</font>

1140
00:45:54,550 --> 00:46:00,210
I have a route map and what does the

1141
00:45:56,440 --> 00:46:02,710
route map do it sets the community<font color="#CCCCCC"> 1 2 3</font>

1142
00:46:00,210 --> 00:46:05,440
<font color="#E5E5E5">which says it's an internal realm that</font>

1143
00:46:02,710 --> 00:46:07,300
is also<font color="#E5E5E5"> mine so in this case I'm going</font>

1144
00:46:05,440 --> 00:46:10,330
<font color="#E5E5E5">to have two communities that match</font>

1145
00:46:07,300 --> 00:46:12,700
routes that I advertise 1 2 3 is<font color="#E5E5E5"> the one</font>

1146
00:46:10,330 --> 00:46:15,369
for ones that I<font color="#CCCCCC"> originate and 1200 is</font>

1147
00:46:12,700 --> 00:46:16,990
the one for my customers and there's

1148
00:46:15,369 --> 00:46:19,599
nothing that told me that<font color="#CCCCCC"> I should do</font>

1149
00:46:16,990 --> 00:46:21,250
<font color="#CCCCCC">that except in the network that this was</font>

1150
00:46:19,599 --> 00:46:23,740
an<font color="#CCCCCC"> example</font><font color="#E5E5E5"> of twelve hundred dollars was</font>

1151
00:46:21,250 --> 00:46:25,810
what we sold transit you know for 100

1152
00:46:23,740 --> 00:46:28,540
<font color="#E5E5E5">megs let's say four and one two three we</font>

1153
00:46:25,810 --> 00:46:32,799
just picked<font color="#CCCCCC"> at random so for public</font>

1154
00:46:28,540 --> 00:46:34,359
peers<font color="#E5E5E5"> I'm going to have a route map for</font>

1155
00:46:32,800 --> 00:46:37,270
inbound and outbound that's going to do

1156
00:46:34,359 --> 00:46:40,720
the various Senate sanity checks it

1157
00:46:37,270 --> 00:46:43,750
doesn't hurt to do next top self version

1158
00:46:40,720 --> 00:46:45,430
set the version 24 I don't know the last

1159
00:46:43,750 --> 00:46:47,020
time I had someone<font color="#E5E5E5"> try to speak version</font>

1160
00:46:45,430 --> 00:46:48,460
3 I don't associate with<font color="#CCCCCC"> Vinnie bono</font>

1161
00:46:47,020 --> 00:46:51,190
anymore so that doesn't<font color="#E5E5E5"> happen in a</font>

1162
00:46:48,460 --> 00:46:52,900
while<font color="#E5E5E5"> and soft reconfig if you're not</font>

1163
00:46:51,190 --> 00:46:54,880
running route refresh very important to

1164
00:46:52,900 --> 00:46:57,130
enable soft we can take or all you can

1165
00:46:54,880 --> 00:47:01,800
do is clear the session hard if you need

1166
00:46:57,130 --> 00:47:05,200
to change<font color="#E5E5E5"> the policy in an emergency so</font>

1167
00:47:01,800 --> 00:47:07,780
the old way has anyone does<font color="#E5E5E5"> anyone still</font>

1168
00:47:05,200 --> 00:47:09,819
remember the<font color="#E5E5E5"> universe netmask dinosaur</font>

1169
00:47:07,780 --> 00:47:11,170
cisco stuff anyway you don't have to

1170
00:47:09,820 --> 00:47:13,780
there's three<font color="#E5E5E5"> different ways you can</font>

1171
00:47:11,170 --> 00:47:17,470
talk about prefixes on the cisco you can

1172
00:47:13,780 --> 00:47:22,970
use sight O notation you can use you

1173
00:47:17,470 --> 00:47:25,870
know 255 255 255 0 u / is that or

1174
00:47:22,970 --> 00:47:28,279
you can invert that against the ones and

1175
00:47:25,870 --> 00:47:29,540
do it that<font color="#E5E5E5"> way because sistas hardware</font>

1176
00:47:28,280 --> 00:47:31,010
used to love<font color="#E5E5E5"> it if you did that and</font>

1177
00:47:29,540 --> 00:47:33,259
their software was too lazy to convert

1178
00:47:31,010 --> 00:47:35,540
it<font color="#CCCCCC"> so if you see stuff like that 0</font>

1179
00:47:33,260 --> 00:47:36,980
that's 0 to do it<font color="#E5E5E5"> at 255 you're not</font>

1180
00:47:35,540 --> 00:47:40,910
you're not having a nightmare it's just

1181
00:47:36,980 --> 00:47:44,330
old<font color="#CCCCCC"> cisco configurations so the new way</font>

1182
00:47:40,910 --> 00:47:46,040
is you<font color="#CCCCCC"> actually use prefix lists the</font>

1183
00:47:44,330 --> 00:47:47,480
only really<font color="#E5E5E5"> interesting there a thing</font>

1184
00:47:46,040 --> 00:47:51,200
there is if you<font color="#CCCCCC"> don't specify anything</font>

1185
00:47:47,480 --> 00:47:55,220
at the end and you say / 17 it means

1186
00:47:51,200 --> 00:47:57,080
exactly<font color="#E5E5E5"> / 17 if you mean between a 1724</font>

1187
00:47:55,220 --> 00:48:00,890
you basically have to say between the 17

1188
00:47:57,080 --> 00:48:03,560
and a 24 and you'll want<font color="#E5E5E5"> to filter RFC</font>

1189
00:48:00,890 --> 00:48:06,980
1918 space you want<font color="#E5E5E5"> to make sure no one</font>

1190
00:48:03,560 --> 00:48:10,040
can advertise your routes to you there

1191
00:48:06,980 --> 00:48:12,380
<font color="#E5E5E5">is a time when that was important I</font>

1192
00:48:10,040 --> 00:48:14,300
don't know what year the a s 7007

1193
00:48:12,380 --> 00:48:16,760
incident was but there was a time

1194
00:48:14,300 --> 00:48:20,030
someone d aggregated the internet and

1195
00:48:16,760 --> 00:48:23,390
started throwing back<font color="#E5E5E5"> 24 s to people 17</font>

1196
00:48:20,030 --> 00:48:24,800
<font color="#CCCCCC">s so but also let's</font><font color="#E5E5E5"> say someone is</font>

1197
00:48:23,390 --> 00:48:28,040
maliciously trying<font color="#E5E5E5"> to cause you trouble</font>

1198
00:48:24,800 --> 00:48:30,440
and hijack your<font color="#E5E5E5"> kakak server you're off</font>

1199
00:48:28,040 --> 00:48:31,880
server you know you<font color="#E5E5E5"> don't want people</font><font color="#CCCCCC"> to</font>

1200
00:48:30,440 --> 00:48:33,890
be able to do that if you do to accept

1201
00:48:31,880 --> 00:48:35,990
that route and<font color="#E5E5E5"> it was more specific than</font>

1202
00:48:33,890 --> 00:48:37,730
any even in a static route then you'd

1203
00:48:35,990 --> 00:48:39,620
have a real problem and you probably

1204
00:48:37,730 --> 00:48:41,600
don't<font color="#CCCCCC"> want to accept</font><font color="#E5E5E5"> things that are not</font>

1205
00:48:39,620 --> 00:48:43,310
at<font color="#E5E5E5"> least 24 s you don't want to accept</font>

1206
00:48:41,600 --> 00:48:46,850
the default route from peers stuff like

1207
00:48:43,310 --> 00:48:48,470
that from a public pier<font color="#E5E5E5"> I might have a</font>

1208
00:48:46,850 --> 00:48:50,960
route map that sets the local prep one

1209
00:48:48,470 --> 00:48:54,740
way and then when I want to send transit

1210
00:48:50,960 --> 00:48:57,620
I've got a community list says if at any

1211
00:48:54,740 --> 00:48:59,540
point that<font color="#E5E5E5"> I accepted a route I said 123</font>

1212
00:48:57,620 --> 00:49:01,790
which means<font color="#E5E5E5"> i created it that's what i</font>

1213
00:48:59,540 --> 00:49:04,759
think<font color="#CCCCCC"> it means or 1200 which means it</font>

1214
00:49:01,790 --> 00:49:06,650
was from a<font color="#E5E5E5"> BGP customer then</font><font color="#CCCCCC"> I'm going</font>

1215
00:49:04,760 --> 00:49:09,829
to<font color="#E5E5E5"> send it and when do i send trends</font>

1216
00:49:06,650 --> 00:49:11,809
that I send transit routes to my peers

1217
00:49:09,829 --> 00:49:14,509
you could there's I guess you could

1218
00:49:11,809 --> 00:49:16,910
debate descend transit mean send a full

1219
00:49:14,509 --> 00:49:19,190
transit feet of the internet or does it

1220
00:49:16,910 --> 00:49:21,288
mean send my customers that are paying

1221
00:49:19,190 --> 00:49:25,660
me just give them transit so that's up

1222
00:49:21,289 --> 00:49:27,920
to you to the<font color="#E5E5E5"> side and then you may have</font>

1223
00:49:25,660 --> 00:49:31,160
access lists that prevent you from

1224
00:49:27,920 --> 00:49:32,869
letting someone leaked by<font color="#CCCCCC"> you could</font>

1225
00:49:31,160 --> 00:49:34,999
either have a max prefix or you made

1226
00:49:32,869 --> 00:49:37,700
Dalton suspenders say you know what I

1227
00:49:34,999 --> 00:49:39,049
know that 3356 is probably netting not

1228
00:49:37,700 --> 00:49:40,339
getting transit from hurricane electric

1229
00:49:39,049 --> 00:49:43,219
when<font color="#E5E5E5"> I</font><font color="#CCCCCC"> appear with hurricane electric</font>

1230
00:49:40,339 --> 00:49:46,130
let me not accept certain well-known<font color="#E5E5E5"> is</font>

1231
00:49:43,219 --> 00:49:47,719
is now it may<font color="#E5E5E5"> be that I want I'm happy</font>

1232
00:49:46,130 --> 00:49:49,309
to have people giving<font color="#E5E5E5"> me free transit in</font>

1233
00:49:47,719 --> 00:49:50,599
general when someone's giving you free

1234
00:49:49,309 --> 00:49:52,910
trends that it's worth less than you're

1235
00:49:50,599 --> 00:49:54,739
paying<font color="#E5E5E5"> for it so you probably don't</font><font color="#CCCCCC"> want</font>

1236
00:49:52,910 --> 00:49:56,690
to be getting that over an exchange

1237
00:49:54,739 --> 00:49:58,160
point via someone's because you're

1238
00:49:56,690 --> 00:50:02,390
probably<font color="#E5E5E5"> not the only person</font><font color="#CCCCCC"> that they</font>

1239
00:49:58,160 --> 00:50:04,219
magically decided to give<font color="#CCCCCC"> it to private</font>

1240
00:50:02,390 --> 00:50:05,900
peers you're<font color="#CCCCCC"> basically the</font><font color="#E5E5E5"> main</font>

1241
00:50:04,219 --> 00:50:07,279
difference is you're<font color="#E5E5E5"> going to have a</font>

1242
00:50:05,900 --> 00:50:09,049
route map that's going to set a

1243
00:50:07,279 --> 00:50:12,109
different local prep because<font color="#E5E5E5"> you want to</font>

1244
00:50:09,049 --> 00:50:15,049
prefer it a little bit higher and so

1245
00:50:12,109 --> 00:50:17,140
you'll set the<font color="#E5E5E5"> local prep to 120 and</font>

1246
00:50:15,049 --> 00:50:21,339
again<font color="#CCCCCC"> you may also in a simple config</font>

1247
00:50:17,140 --> 00:50:23,449
statically on a given router set a

1248
00:50:21,339 --> 00:50:26,449
community that says hey I got<font color="#CCCCCC"> it from</font>

1249
00:50:23,449 --> 00:50:28,670
this this pop with this router typically

1250
00:50:26,449 --> 00:50:30,890
this pop not this router so that you can

1251
00:50:28,670 --> 00:50:32,599
look for<font color="#CCCCCC"> that community and see all the</font>

1252
00:50:30,890 --> 00:50:35,959
routes<font color="#E5E5E5"> that we heard at that given</font>

1253
00:50:32,599 --> 00:50:38,180
location and from customers the key

1254
00:50:35,959 --> 00:50:40,698
thing<font color="#CCCCCC"> is you need to filter the prefixes</font>

1255
00:50:38,180 --> 00:50:43,069
so you're going to<font color="#E5E5E5"> have a prefix filter</font>

1256
00:50:40,699 --> 00:50:45,170
from that particular customer ideally

1257
00:50:43,069 --> 00:50:46,459
and the route map that<font color="#E5E5E5"> you apply is</font>

1258
00:50:45,170 --> 00:50:50,469
going to set the local perhaps higher

1259
00:50:46,459 --> 00:50:50,469
can you<font color="#CCCCCC"> use anywhere else</font>

1260
00:50:50,509 --> 00:50:59,509
and if you want again in a simple static

1261
00:50:57,089 --> 00:51:02,460
way to be able<font color="#E5E5E5"> to let your customers</font>

1262
00:50:59,509 --> 00:51:05,369
change how you advertise their routes

1263
00:51:02,460 --> 00:51:07,529
then you can come up with a community

1264
00:51:05,369 --> 00:51:10,920
system that you tell<font color="#CCCCCC"> people</font><font color="#E5E5E5"> that says</font>

1265
00:51:07,529 --> 00:51:13,349
hey if you give me<font color="#CCCCCC"> the community 15,000</font>

1266
00:51:10,920 --> 00:51:15,299
colon for for 360 then I'm not going<font color="#E5E5E5"> to</font>

1267
00:51:13,349 --> 00:51:18,150
advertise it to 4436 I'm going to

1268
00:51:15,299 --> 00:51:21,509
advertise it 0 times or 2 i'm<font color="#CCCCCC"> going to</font>

1269
00:51:18,150 --> 00:51:23,039
prepend it twice or you<font color="#E5E5E5"> know similar</font>

1270
00:51:21,509 --> 00:51:25,109
things these<font color="#CCCCCC"> are all things that you can</font>

1271
00:51:23,039 --> 00:51:27,509
<font color="#E5E5E5">create hopefully based on the same</font>

1272
00:51:25,109 --> 00:51:31,078
system and give<font color="#CCCCCC"> to your customers but</font>

1273
00:51:27,509 --> 00:51:33,180
you can do a more complex but created

1274
00:51:31,079 --> 00:51:36,299
for you in regular way that gives people

1275
00:51:33,180 --> 00:51:38,640
a regular way of looking at what country

1276
00:51:36,299 --> 00:51:41,788
what pop what network what you heard it

1277
00:51:38,640 --> 00:51:46,499
from and how you'd<font color="#CCCCCC"> like to be blocked or</font>

1278
00:51:41,789 --> 00:51:48,390
a spat padded or even in<font color="#CCCCCC"> some cases what</font>

1279
00:51:46,499 --> 00:51:51,299
other communities let's say<font color="#CCCCCC"> I buy from a</font>

1280
00:51:48,390 --> 00:51:53,160
provider<font color="#CCCCCC"> that lets me set it to be a</font>

1281
00:51:51,299 --> 00:51:55,230
slightly deep<font color="#CCCCCC"> reference</font><font color="#E5E5E5"> customer route</font>

1282
00:51:53,160 --> 00:51:57,899
or a higher prep customer route or even

1283
00:51:55,230 --> 00:51:59,700
a peer out I may want to give my

1284
00:51:57,900 --> 00:52:02,069
customers the ability to<font color="#CCCCCC"> change how</font>

1285
00:51:59,700 --> 00:52:04,230
that's seen at unit land and so again

1286
00:52:02,069 --> 00:52:07,859
<font color="#E5E5E5">you would implement communities that let</font>

1287
00:52:04,230 --> 00:52:09,539
the customers implement that so search

1288
00:52:07,859 --> 00:52:11,970
nanite presentations for<font color="#CCCCCC"> steenburgen</font>

1289
00:52:09,539 --> 00:52:14,309
you'll find remember<font color="#CCCCCC"> I think</font><font color="#E5E5E5"> with an 81</font>

1290
00:52:11,970 --> 00:52:18,868
out of 120 or 220 will be that

1291
00:52:14,309 --> 00:52:22,799
presentation<font color="#E5E5E5"> back up transit you can do</font>

1292
00:52:18,869 --> 00:52:25,259
things where you give you set up

1293
00:52:22,799 --> 00:52:27,420
appearing session and<font color="#CCCCCC"> I actually we</font>

1294
00:52:25,259 --> 00:52:31,049
probably don't want the local prep here

1295
00:52:27,420 --> 00:52:32,549
to be 140 but you set up a peering

1296
00:52:31,049 --> 00:52:35,279
session where normal you're not giving

1297
00:52:32,549 --> 00:52:37,109
them transit but by saying additive

1298
00:52:35,279 --> 00:52:41,099
which you normally might not do on a

1299
00:52:37,109 --> 00:52:42,900
pier they can<font color="#E5E5E5"> if they emergency have an</font>

1300
00:52:41,099 --> 00:52:44,759
emergency<font color="#E5E5E5"> and need to turn it into</font>

1301
00:52:42,900 --> 00:52:47,190
transit session you<font color="#CCCCCC"> can tell</font><font color="#E5E5E5"> them hey</font>

1302
00:52:44,759 --> 00:52:50,200
just put 15,000 colon<font color="#CCCCCC"> 1200 on it and</font>

1303
00:52:47,190 --> 00:52:51,849
I'll start advertising your routes

1304
00:52:50,200 --> 00:52:55,180
and I've seen<font color="#E5E5E5"> a lot of different</font><font color="#CCCCCC"> cases</font>

1305
00:52:51,849 --> 00:52:57,490
over the last so many years where people

1306
00:52:55,180 --> 00:53:00,160
have given<font color="#E5E5E5"> the kind</font><font color="#CCCCCC"> of flexibility so if</font>

1307
00:52:57,490 --> 00:53:02,529
someone has an emergency at some pop

1308
00:53:00,160 --> 00:53:04,359
where you have a customer<font color="#CCCCCC"> that we needed</font>

1309
00:53:02,530 --> 00:53:05,849
<font color="#CCCCCC">to go to but</font><font color="#E5E5E5"> you couldn't argue the</font>

1310
00:53:04,359 --> 00:53:08,710
business case to get full of redundant

1311
00:53:05,849 --> 00:53:09,910
you know you want you borrow a cup of

1312
00:53:08,710 --> 00:53:10,960
transit so that you don't<font color="#E5E5E5"> have to wake</font>

1313
00:53:09,910 --> 00:53:14,859
someone up in<font color="#E5E5E5"> the middle like to have</font>

1314
00:53:10,960 --> 00:53:16,570
them configure it for you so the other

1315
00:53:14,859 --> 00:53:21,098
thing that I was<font color="#E5E5E5"> going to</font><font color="#CCCCCC"> show before we</font>

1316
00:53:16,570 --> 00:53:25,990
take questions was the how to use perl

1317
00:53:21,099 --> 00:53:28,810
to mangle routes so<font color="#CCCCCC"> i'll</font><font color="#E5E5E5"> take a I'll</font>

1318
00:53:25,990 --> 00:53:30,848
take a quick poll again how<font color="#E5E5E5"> many people</font>

1319
00:53:28,810 --> 00:53:35,339
<font color="#CCCCCC">have used the screen command in your</font>

1320
00:53:30,849 --> 00:53:37,960
necks<font color="#CCCCCC"> ok the typescript command in UNIX</font>

1321
00:53:35,339 --> 00:53:40,270
<font color="#CCCCCC">okay and know how many</font><font color="#E5E5E5"> people know at</font>

1322
00:53:37,960 --> 00:53:41,740
least some scripting language so it's

1323
00:53:40,270 --> 00:53:45,040
<font color="#CCCCCC">actually really interesting when you</font>

1324
00:53:41,740 --> 00:53:48,509
hire people who a lot<font color="#CCCCCC"> of</font><font color="#E5E5E5"> people that are</font>

1325
00:53:45,040 --> 00:53:51,599
router people if you ask the question

1326
00:53:48,510 --> 00:53:54,940
please tell<font color="#E5E5E5"> me how many different is is</font>

1327
00:53:51,599 --> 00:53:56,230
present behind this other a s they

1328
00:53:54,940 --> 00:53:57,880
wouldn't know how to answer the question

1329
00:53:56,230 --> 00:54:00,220
but they actually<font color="#CCCCCC"> have the skills to put</font>

1330
00:53:57,880 --> 00:54:04,300
it all together if you just be a<font color="#E5E5E5"> little</font>

1331
00:54:00,220 --> 00:54:06,819
creative so I've got screen running here

1332
00:54:04,300 --> 00:54:08,589
why is screen important well if I'm

1333
00:54:06,819 --> 00:54:12,690
going to dump the routing table via

1334
00:54:08,589 --> 00:54:12,690
simple methods that's going<font color="#E5E5E5"> to be</font>

1335
00:54:23,060 --> 00:54:26,240
actually it'll it'll be at least<font color="#CCCCCC"> three</font>

1336
00:54:25,040 --> 00:54:28,070
<font color="#CCCCCC">hundred thousand lines it'll be 30</font>

1337
00:54:26,240 --> 00:54:29,180
megabytes that you don't want to have to

1338
00:54:28,070 --> 00:54:31,730
have scroll across your screen

1339
00:54:29,180 --> 00:54:33,830
especially if it on em doe or god help

1340
00:54:31,730 --> 00:54:36,200
you something slower like<font color="#CCCCCC"> a tease</font>

1341
00:54:33,830 --> 00:54:38,060
network you don't want to have to have

1342
00:54:36,200 --> 00:54:39,740
that<font color="#E5E5E5"> happen so set up the screen session</font>

1343
00:54:38,060 --> 00:54:41,210
already<font color="#CCCCCC"> set it up so that when you</font>

1344
00:54:39,740 --> 00:54:43,879
started firing off you can immediately

1345
00:54:41,210 --> 00:54:46,250
go away from that window if<font color="#E5E5E5"> you just</font>

1346
00:54:43,880 --> 00:54:48,440
<font color="#CCCCCC">change tabs in ssh all that's going</font><font color="#E5E5E5"> to</font>

1347
00:54:46,250 --> 00:54:51,200
be<font color="#CCCCCC"> coming to your</font><font color="#E5E5E5"> machine and if you're</font>

1348
00:54:48,440 --> 00:54:55,070
running<font color="#CCCCCC"> an atom again god help you so</font>

1349
00:54:51,200 --> 00:54:57,200
now what do we want<font color="#E5E5E5"> to do script bgp one</font>

1350
00:54:55,070 --> 00:55:00,500
is just a unix<font color="#E5E5E5"> command that captures</font>

1351
00:54:57,200 --> 00:55:03,040
everything that it sees to a<font color="#E5E5E5"> file tell</font>

1352
00:55:00,500 --> 00:55:03,040
it to a router

1353
00:55:10,670 --> 00:55:13,970
<font color="#E5E5E5">so a router</font>

1354
00:55:18,619 --> 00:55:21,009
and

1355
00:55:21,200 --> 00:55:25,189
I'm going<font color="#E5E5E5"> to do tur len 0 which means</font>

1356
00:55:23,390 --> 00:55:31,040
<font color="#E5E5E5">don't show me the more command every so</font>

1357
00:55:25,190 --> 00:55:33,470
often then show IP bgp neighbor some

1358
00:55:31,040 --> 00:55:35,900
full fee droughts and control a space

1359
00:55:33,470 --> 00:55:40,490
and now that's all<font color="#CCCCCC"> happened in</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> other</font>

1360
00:55:35,900 --> 00:55:43,100
window so if we<font color="#CCCCCC"> were impatient we can</font>

1361
00:55:40,490 --> 00:55:44,870
run the finger under the faucet this is

1362
00:55:43,100 --> 00:55:48,850
an octa-core in a halo and it's a<font color="#E5E5E5"> super</font>

1363
00:55:44,870 --> 00:55:48,850
720 so it should finish reasonably soon

1364
00:55:50,320 --> 00:55:55,280
so you look<font color="#E5E5E5"> at the file and now if you</font>

1365
00:55:53,450 --> 00:55:58,069
edit the<font color="#E5E5E5"> file its going to have these</font>

1366
00:55:55,280 --> 00:56:00,020
control<font color="#CCCCCC"> m's</font><font color="#E5E5E5"> if you're really an seeing</font>

1367
00:55:58,070 --> 00:56:01,310
you hate seeing<font color="#CCCCCC"> that there's a VI</font>

1368
00:56:00,020 --> 00:56:04,280
command i can give you that will

1369
00:56:01,310 --> 00:56:07,610
eliminate them colon 1 comma dollar sign

1370
00:56:04,280 --> 00:56:10,040
s / ctrl v escapes control characters

1371
00:56:07,610 --> 00:56:11,030
and then control<font color="#CCCCCC"> m and that'll boom make</font>

1372
00:56:10,040 --> 00:56:12,770
them go<font color="#CCCCCC"> away but it doesn't</font><font color="#E5E5E5"> really</font>

1373
00:56:11,030 --> 00:56:14,000
matter because the whole<font color="#E5E5E5"> purpose of this</font>

1374
00:56:12,770 --> 00:56:15,920
is you're<font color="#E5E5E5"> not going to look at it by</font>

1375
00:56:14,000 --> 00:56:17,870
hand and use forward slash you're going

1376
00:56:15,920 --> 00:56:20,330
to write<font color="#E5E5E5"> a program it's going to look at</font>

1377
00:56:17,870 --> 00:56:23,120
this and tell you something so what

1378
00:56:20,330 --> 00:56:26,360
might we want to say we might want to

1379
00:56:23,120 --> 00:56:31,609
count how many routes that we hear that

1380
00:56:26,360 --> 00:56:34,540
<font color="#E5E5E5">are right beyond 4436 actually</font><font color="#CCCCCC"> i'm not</font>

1381
00:56:31,610 --> 00:56:34,540
going<font color="#E5E5E5"> to change it because it is</font>

1382
00:56:35,700 --> 00:56:42,210
being currently updated yeah we're done

1383
00:56:38,400 --> 00:56:44,369
so I'm<font color="#CCCCCC"> going to quit one very important</font>

1384
00:56:42,210 --> 00:56:46,980
thing is remember to exit the shell

1385
00:56:44,369 --> 00:56:49,859
otherwise as you write the program it'll

1386
00:56:46,980 --> 00:56:52,140
<font color="#E5E5E5">be in the file and there are strange</font>

1387
00:56:49,859 --> 00:56:54,328
things you could do to cut the file and

1388
00:56:52,140 --> 00:56:56,970
then infinitely<font color="#CCCCCC"> append</font><font color="#E5E5E5"> the file to</font>

1389
00:56:54,329 --> 00:56:59,070
itself<font color="#CCCCCC"> so when you do the typescript</font>

1390
00:56:56,970 --> 00:57:01,290
command it creates a new shell if to

1391
00:56:59,070 --> 00:57:06,690
exit the shell to<font color="#E5E5E5"> stop writing to the</font>

1392
00:57:01,290 --> 00:57:09,900
<font color="#E5E5E5">file so now I want to see how many next</font>

1393
00:57:06,690 --> 00:57:12,170
hops how many next how many routes I

1394
00:57:09,900 --> 00:57:18,050
hear from each a s that<font color="#E5E5E5"> are in</font><font color="#CCCCCC"> front of</font>

1395
00:57:12,170 --> 00:57:18,050
4436 so count that PL

1396
00:57:26,849 --> 00:57:35,259
pearl how many people<font color="#CCCCCC"> know sea pearl for</font>

1397
00:57:32,079 --> 00:57:36,579
the sea guys who don't know Burrell nice

1398
00:57:35,259 --> 00:57:38,349
thing about<font color="#E5E5E5"> pearl is it's got</font>

1399
00:57:36,579 --> 00:57:40,539
associative arrays which we will use and

1400
00:57:38,349 --> 00:57:42,369
the ability to blow apart strings which

1401
00:57:40,539 --> 00:57:43,749
we will use other than that it's

1402
00:57:42,369 --> 00:57:47,289
possible to write promo code that looks

1403
00:57:43,749 --> 00:57:48,638
like awk and if you do I and I you work

1404
00:57:47,289 --> 00:57:50,529
for me you probably won't be for<font color="#E5E5E5"> long</font>

1405
00:57:48,639 --> 00:57:52,389
it's also possible to write promo code

1406
00:57:50,529 --> 00:57:54,909
that looks like say so try to do<font color="#E5E5E5"> that if</font>

1407
00:57:52,389 --> 00:57:58,359
you<font color="#CCCCCC"> wouldn't pearl so what I'm going to</font>

1408
00:57:54,909 --> 00:58:03,849
do is I'm<font color="#CCCCCC"> going to look for space for</font>

1409
00:57:58,359 --> 00:58:07,419
436 and then some numbers so backslash d

1410
00:58:03,849 --> 00:58:08,979
matches a number and then plus matches a

1411
00:58:07,419 --> 00:58:11,199
string of numbers now it's not relevant

1412
00:58:08,979 --> 00:58:14,558
for this application but backslash d

1413
00:58:11,199 --> 00:58:15,849
does not match the minus sign which can

1414
00:58:14,559 --> 00:58:18,609
be interesting if you're actually adding

1415
00:58:15,849 --> 00:58:20,169
real numbers not these fake numbers that

1416
00:58:18,609 --> 00:58:25,538
happen on the internet and then<font color="#CCCCCC"> I'm</font>

1417
00:58:20,169 --> 00:58:27,669
going<font color="#CCCCCC"> to say that so I'm building</font><font color="#E5E5E5"> an</font>

1418
00:58:25,539 --> 00:58:29,259
associative array index by dollar sign

1419
00:58:27,669 --> 00:58:32,499
one is this thing in parentheses which

1420
00:58:29,259 --> 00:58:34,689
is the AAS 646 in this line it would be

1421
00:58:32,499 --> 00:58:36,999
60 or 61<font color="#E5E5E5"> they the autonomous system</font>

1422
00:58:34,689 --> 00:58:38,828
number the set of numbers after 446 I'm

1423
00:58:36,999 --> 00:58:42,549
going to increment the counter for that

1424
00:58:38,829 --> 00:58:48,839
and then all<font color="#E5E5E5"> I do at the end is for each</font>

1425
00:58:42,549 --> 00:58:48,839
AAS in qu<font color="#E5E5E5"> in that associative array</font>

1426
00:58:59,620 --> 00:59:13,120
and theoretically that should count it

1427
00:59:04,690 --> 00:59:15,070
which it did and then<font color="#E5E5E5"> I can count and</font>

1428
00:59:13,120 --> 00:59:16,540
see how many different<font color="#CCCCCC"> so we can see</font>

1429
00:59:15,070 --> 00:59:23,620
that there is a bunch of routes coming

1430
00:59:16,540 --> 00:59:25,360
from 3549 and you know on up so<font color="#CCCCCC"> I</font><font color="#E5E5E5"> can</font>

1431
00:59:23,620 --> 00:59:27,310
also if I was curious how many routes

1432
00:59:25,360 --> 00:59:29,290
were externally originated internally

1433
00:59:27,310 --> 00:59:32,490
originated when you're looking<font color="#E5E5E5"> at if you</font>

1434
00:59:29,290 --> 00:59:35,710
don't have a net flow<font color="#CCCCCC"> esflow collection</font>

1435
00:59:32,490 --> 00:59:37,479
basically your tool in is to move

1436
00:59:35,710 --> 00:59:39,700
traffic for load balancing not

1437
00:59:37,480 --> 00:59:41,560
performance but for load balancing is to

1438
00:59:39,700 --> 00:59:43,240
figure out<font color="#E5E5E5"> roughly which is is</font><font color="#CCCCCC"> to grab</font>

1439
00:59:41,560 --> 00:59:45,970
as you build route nap lists and move

1440
00:59:43,240 --> 00:59:47,560
<font color="#E5E5E5">things around this is a way of simply</font>

1441
00:59:45,970 --> 00:59:49,569
without having to look for your<font color="#E5E5E5"> I look</font>

1442
00:59:47,560 --> 00:59:51,520
at what routes are from where want

1443
00:59:49,570 --> 00:59:52,990
providers and getting some data but once

1444
00:59:51,520 --> 00:59:55,060
you have it in a file you can actually

1445
00:59:52,990 --> 00:59:58,899
<font color="#E5E5E5">write other programs to look at it so</font>

1446
00:59:55,060 --> 01:00:00,730
very<font color="#E5E5E5"> simple stuff I did not get the</font>

1447
00:59:58,900 --> 01:00:04,350
catalyst<font color="#CCCCCC"> setup maybe next time we'll</font>

1448
01:00:00,730 --> 01:00:06,970
have a next bgp panels will be a

1449
01:00:04,350 --> 01:00:08,970
spirited debate about best practices in

1450
01:00:06,970 --> 01:00:11,529
BGP and then maybe<font color="#E5E5E5"> we'll also do a</font>

1451
01:00:08,970 --> 01:00:14,649
influencing load balancing and breaking

1452
01:00:11,530 --> 01:00:22,260
the<font color="#CCCCCC"> internet live on stage presentation</font>

1453
01:00:14,650 --> 01:00:22,260
but any questions yes

1454
01:00:22,850 --> 01:00:33,029
yeah um with the the new feature where

1455
01:00:29,040 --> 01:00:34,890
<font color="#CCCCCC">you don't</font><font color="#E5E5E5"> need the soft reconfig so</font>

1456
01:00:33,030 --> 01:00:38,210
would you<font color="#CCCCCC"> say that it's pretty good to</font>

1457
01:00:34,890 --> 01:00:42,330
<font color="#E5E5E5">turn that on and wherever it's available</font>

1458
01:00:38,210 --> 01:00:48,000
yeah<font color="#E5E5E5"> I think it is correct Richard is it</font>

1459
01:00:42,330 --> 01:00:50,730
on in most configs so there's<font color="#CCCCCC"> actually</font>

1460
01:00:48,000 --> 01:00:52,530
in new iOS code which if you're talking

1461
01:00:50,730 --> 01:00:55,740
<font color="#E5E5E5">6500 s which is probably what most</font>

1462
01:00:52,530 --> 01:00:59,940
people use 12<font color="#E5E5E5"> 2 33 anything that's like</font>

1463
01:00:55,740 --> 01:01:02,250
<font color="#CCCCCC">SX hrs are there's a feature that will</font>

1464
01:00:59,940 --> 01:01:04,320
turn on soft reconfig only if the pier

1465
01:01:02,250 --> 01:01:05,430
does not support route refresh and if

1466
01:01:04,320 --> 01:01:06,840
you're still peering with someone who

1467
01:01:05,430 --> 01:01:09,750
does<font color="#E5E5E5"> not support route refresh you a</font>

1468
01:01:06,840 --> 01:01:11,070
bigger problems right so if it supports

1469
01:01:09,750 --> 01:01:14,160
without reflex you don't have to

1470
01:01:11,070 --> 01:01:17,820
actually turn it on it will be it'll<font color="#E5E5E5"> be</font>

1471
01:01:14,160 --> 01:01:20,310
negotiated and used<font color="#CCCCCC"> ok so so I guess the</font>

1472
01:01:17,820 --> 01:01:21,900
key key thing<font color="#CCCCCC"> I was getting at does it</font>

1473
01:01:20,310 --> 01:01:24,960
makes I guess if it automatically

1474
01:01:21,900 --> 01:01:27,030
detects it and only uses it if it's not

1475
01:01:24,960 --> 01:01:33,900
<font color="#E5E5E5">there it doesn't hurt to just leave it</font>

1476
01:01:27,030 --> 01:01:35,990
on then all right yeah for belt and

1477
01:01:33,900 --> 01:01:35,990
suspenders

1478
01:01:39,369 --> 01:01:46,809
other questions comments I would

1479
01:01:43,480 --> 01:01:48,249
<font color="#CCCCCC">encourage you guys not specifically just</font>

1480
01:01:46,809 --> 01:01:52,690
to give feedback saying that this talk

1481
01:01:48,249 --> 01:01:54,009
sucked but if you have specific things

1482
01:01:52,690 --> 01:01:57,240
that<font color="#CCCCCC"> you would like</font><font color="#E5E5E5"> to see</font><font color="#CCCCCC"> covered in</font>

1483
01:01:54,009 --> 01:02:01,299
the routing realm to suggest them

1484
01:01:57,240 --> 01:02:03,279
because otherwise no one knows what you

1485
01:02:01,299 --> 01:02:06,069
guys would<font color="#CCCCCC"> like</font><font color="#E5E5E5"> to hear and it's</font><font color="#CCCCCC"> always</font>

1486
01:02:03,279 --> 01:02:07,180
a little bit of a it's a little bit

1487
01:02:06,069 --> 01:02:10,599
interesting you know planning<font color="#E5E5E5"> the</font>

1488
01:02:07,180 --> 01:02:14,499
audience because for example in

1489
01:02:10,599 --> 01:02:16,180
Dominican Republic we gave a basically

1490
01:02:14,499 --> 01:02:18,819
<font color="#E5E5E5">this presentation but the only people</font>

1491
01:02:16,180 --> 01:02:20,919
<font color="#CCCCCC">who went were all people who ran you</font>

1492
01:02:18,819 --> 01:02:23,170
know even bigger networks than I run

1493
01:02:20,920 --> 01:02:25,390
personally and so<font color="#E5E5E5"> that was a little bit</font>

1494
01:02:23,170 --> 01:02:27,400
what that degenerated into was a little

1495
01:02:25,390 --> 01:02:31,180
bit<font color="#E5E5E5"> of a best practices debate about how</font>

1496
01:02:27,400 --> 01:02:32,950
you do various things but I think

1497
01:02:31,180 --> 01:02:34,990
there's definitely an audience for at

1498
01:02:32,950 --> 01:02:37,149
least some basic bgp intro for people

1499
01:02:34,990 --> 01:02:39,279
but in terms<font color="#E5E5E5"> of more advanced topics it</font>

1500
01:02:37,150 --> 01:02:43,859
<font color="#E5E5E5">would be useful to hear from people what</font>

1501
01:02:39,279 --> 01:02:43,859
they'd like to<font color="#E5E5E5"> hear so thank you</font>

1502
01:02:49,720 --> 01:02:54,799
come to the community<font color="#CCCCCC"> meetings so that</font>

1503
01:02:51,859 --> 01:02:56,990
<font color="#E5E5E5">you can make fun</font><font color="#CCCCCC"> of people or say random</font>

1504
01:02:54,799 --> 01:02:58,369
weird annoying things or if you've never

1505
01:02:56,990 --> 01:03:00,109
been<font color="#CCCCCC"> to a community</font><font color="#E5E5E5"> meeting that</font><font color="#CCCCCC"> you</font>

1506
01:02:58,369 --> 01:03:03,549
could observe these things and gain<font color="#CCCCCC"> some</font>

1507
01:03:00,109 --> 01:03:03,549
understanding about the<font color="#E5E5E5"> Na Nog community</font>

