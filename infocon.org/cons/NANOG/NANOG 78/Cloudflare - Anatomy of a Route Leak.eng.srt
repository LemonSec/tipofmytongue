1
00:00:00,000 --> 00:00:08,160
greetings I am honored to have a full

2
00:00:05,700 --> 00:00:11,969
room and I'm honored to to talk today

3
00:00:08,160 --> 00:00:17,900
but this is a talk from three people not

4
00:00:11,969 --> 00:00:21,000
just myself this talk has been growing

5
00:00:17,900 --> 00:00:25,909
both on content and on the analytics

6
00:00:21,000 --> 00:00:29,189
behind it from both Tom in our UK office

7
00:00:25,910 --> 00:00:31,140
Jerome myself with help of other

8
00:00:29,189 --> 00:00:36,480
engineers and what I'm going to do is

9
00:00:31,140 --> 00:00:39,420
I'm going to go through a route leak not

10
00:00:36,480 --> 00:00:42,809
the first won't be the last we all know

11
00:00:39,420 --> 00:00:46,280
that but I'm going to go through this

12
00:00:42,809 --> 00:00:50,370
and sort of show you some of the sort of

13
00:00:46,280 --> 00:00:53,850
inside knowledge and also point you

14
00:00:50,370 --> 00:00:55,530
quite frankly before you you you sort of

15
00:00:53,850 --> 00:00:59,370
want to flip through the slides on the

16
00:00:55,530 --> 00:01:02,190
Nanog website there's a fairly in-depth

17
00:00:59,370 --> 00:01:03,780
pair of blogs which covered what I'm

18
00:01:02,190 --> 00:01:06,929
going to talk and go down into the

19
00:01:03,780 --> 00:01:13,439
absolute bit-by-bit route by route

20
00:01:06,930 --> 00:01:16,070
nitty-gritty so in 30 minutes I'm gonna

21
00:01:13,439 --> 00:01:18,508
give you a bit of internet history

22
00:01:16,070 --> 00:01:20,908
I've got gray hair I'm allowed to do

23
00:01:18,509 --> 00:01:23,670
that I'm going to talk about some leaked

24
00:01:20,909 --> 00:01:25,290
history and there won't be anything

25
00:01:23,670 --> 00:01:27,240
surprising there that seems to happen

26
00:01:25,290 --> 00:01:29,700
then I'm going to talk to you about what

27
00:01:27,240 --> 00:01:31,289
happened June last year I'm going to

28
00:01:29,700 --> 00:01:34,200
talk to you about the subject of route

29
00:01:31,290 --> 00:01:36,530
optimizers and for part of the room I'm

30
00:01:34,200 --> 00:01:41,100
going to talk about route optimizers

31
00:01:36,530 --> 00:01:43,110
then I've got some graphs so let's go

32
00:01:41,100 --> 00:01:44,399
back to not the beginning of the

33
00:01:43,110 --> 00:01:48,060
beginning of the beginning but let's

34
00:01:44,399 --> 00:01:51,979
sort of go to to what was becoming sort

35
00:01:48,060 --> 00:01:54,329
of the modern age of the ARPANET and

36
00:01:51,979 --> 00:01:56,429
you've got this these wonderful set of

37
00:01:54,329 --> 00:01:58,408
diagrams all of which are archived out

38
00:01:56,430 --> 00:02:01,110
there this is one I particularly like

39
00:01:58,409 --> 00:02:02,939
because I'm an old pdp-11 guy and

40
00:02:01,110 --> 00:02:04,920
there's a few pdp-11 there's some tens

41
00:02:02,939 --> 00:02:09,299
on this on this diagram there's some

42
00:02:04,920 --> 00:02:12,260
great history on this diagram but this

43
00:02:09,300 --> 00:02:14,569
isn't the internet that we run today

44
00:02:12,260 --> 00:02:18,409
and the overriding part about the

45
00:02:14,569 --> 00:02:23,959
historical information that I'm going to

46
00:02:18,409 --> 00:02:29,769
share is that security wasn't part of

47
00:02:23,959 --> 00:02:33,650
the plan even if you go down to that

48
00:02:29,769 --> 00:02:36,709
transition of NCP to TCP and you start

49
00:02:33,650 --> 00:02:40,579
looking at the spec with inside the

50
00:02:36,709 --> 00:02:45,049
protocol which we still run today RFC

51
00:02:40,579 --> 00:02:47,989
791 is as valid today as the day was

52
00:02:45,049 --> 00:02:52,040
written or published in the early 80s

53
00:02:47,989 --> 00:02:55,370
section 31 has security options and lots

54
00:02:52,040 --> 00:02:58,150
of bits and I'm sure some people have

55
00:02:55,370 --> 00:03:03,760
actually read this because in fact your

56
00:02:58,150 --> 00:03:07,670
include directory on any Linux box or

57
00:03:03,760 --> 00:03:10,519
ESD box or equivalent has got a whole

58
00:03:07,670 --> 00:03:14,750
bunch of of include files with this

59
00:03:10,519 --> 00:03:20,709
defined in it and yet basically no code

60
00:03:14,750 --> 00:03:26,090
ever uses it definitely no applications

61
00:03:20,709 --> 00:03:28,849
in 1989 we start seeing the birth of the

62
00:03:26,090 --> 00:03:30,470
World Wide Web remember that is not the

63
00:03:28,849 --> 00:03:31,638
internet the Internet is the Internet

64
00:03:30,470 --> 00:03:32,299
and the web is the web these are two

65
00:03:31,639 --> 00:03:37,629
different things

66
00:03:32,299 --> 00:03:40,489
however in that the phrase the

67
00:03:37,629 --> 00:03:45,078
information exchange is still more

68
00:03:40,489 --> 00:03:49,750
important than security so this is

69
00:03:45,079 --> 00:03:52,329
secrecy on this one sorry rewind

70
00:03:49,750 --> 00:03:55,669
actually let me just take a break just

71
00:03:52,329 --> 00:03:58,489
want to talk to the to the the operators

72
00:03:55,669 --> 00:04:00,440
of the audio-visual for a second the

73
00:03:58,489 --> 00:04:03,650
30-minute timer that I have has not

74
00:04:00,440 --> 00:04:07,280
started that will inject more of me

75
00:04:03,650 --> 00:04:10,940
talking to the people in the room and in

76
00:04:07,280 --> 00:04:14,269
the interests of everybody here it has

77
00:04:10,940 --> 00:04:18,560
now started thank you if I'm if I may go

78
00:04:14,269 --> 00:04:24,350
back to my subject matter so so secrecy

79
00:04:18,560 --> 00:04:31,280
is a different metric than security but

80
00:04:24,350 --> 00:04:35,380
it continues in BGP three security

81
00:04:31,280 --> 00:04:35,380
issues are not discussed in this memo

82
00:04:35,950 --> 00:04:42,409
there seems to be a pattern and that

83
00:04:39,140 --> 00:04:44,210
pattern unfortunately is the basis of a

84
00:04:42,410 --> 00:04:47,840
lot of what we do today when we talk

85
00:04:44,210 --> 00:04:51,500
about route security so let's look at a

86
00:04:47,840 --> 00:04:54,710
diagram in whichever way you want to do

87
00:04:51,500 --> 00:04:58,130
it but this diagram simply says that we

88
00:04:54,710 --> 00:05:00,200
used to have a connection that needed a

89
00:04:58,130 --> 00:05:03,380
name and it needed to be converted via

90
00:05:00,200 --> 00:05:06,380
DNS to an IP and that IP ran through a

91
00:05:03,380 --> 00:05:11,240
routing table with an ASN and we ended

92
00:05:06,380 --> 00:05:16,880
up connecting if we look these days we

93
00:05:11,240 --> 00:05:20,270
have names and DNS SEC we have CAS for

94
00:05:16,880 --> 00:05:24,530
that TLS style connection we have our

95
00:05:20,270 --> 00:05:27,500
IRS and we have our PKI for a SNS and

96
00:05:24,530 --> 00:05:30,349
IPS we are in a different world we deal

97
00:05:27,500 --> 00:05:33,290
with encryption as the norm for our

98
00:05:30,350 --> 00:05:34,820
everyday use of the Internet and yet

99
00:05:33,290 --> 00:05:37,310
this talk is going to talk obviously

100
00:05:34,820 --> 00:05:40,820
about the lack of that at the routing

101
00:05:37,310 --> 00:05:43,820
level but enough about history but I'm

102
00:05:40,820 --> 00:05:46,640
going to show up a few old articles just

103
00:05:43,820 --> 00:05:48,860
to to give you sort of a one other

104
00:05:46,640 --> 00:05:51,200
aspect this is what the press this is

105
00:05:48,860 --> 00:05:55,040
what the rest of the world will publish

106
00:05:51,200 --> 00:05:59,690
in the case of a hiccup on the internet

107
00:05:55,040 --> 00:06:02,600
and this is a couple of different events

108
00:05:59,690 --> 00:06:05,480
that occurred and and these articles get

109
00:06:02,600 --> 00:06:06,980
written on a regular basis they just

110
00:06:05,480 --> 00:06:09,730
happen okay

111
00:06:06,980 --> 00:06:12,980
so let's let's focus on what we we know

112
00:06:09,730 --> 00:06:19,480
BGP and let's talk about what happens in

113
00:06:12,980 --> 00:06:24,980
that space this is the sordid history of

114
00:06:19,480 --> 00:06:26,750
famous route leaks I reckon a fairly

115
00:06:24,980 --> 00:06:29,510
good percentage of you know some of

116
00:06:26,750 --> 00:06:36,229
these that I'm going to recap it anyway

117
00:06:29,510 --> 00:06:37,830
in 1977 they a 707 did a phenomenally

118
00:06:36,229 --> 00:06:41,760
impressive job of complete

119
00:06:37,830 --> 00:06:45,180
d aggregating the internet and generated

120
00:06:41,760 --> 00:06:46,740
an enormous amount of routes and it was

121
00:06:45,180 --> 00:06:48,720
not a happy day for those people that

122
00:06:46,740 --> 00:06:53,730
were on the internet running a bgp

123
00:06:48,720 --> 00:06:57,630
router on that day 2008 we have the

124
00:06:53,730 --> 00:07:00,930
famous YouTube hiccup with Pakistan

125
00:06:57,630 --> 00:07:04,830
Telecom we have other events that go on

126
00:07:00,930 --> 00:07:07,110
and on and on till we get to 2018 and

127
00:07:04,830 --> 00:07:10,260
then 2019 the one that I'm going to

128
00:07:07,110 --> 00:07:14,490
drill down on and you sort of think okay

129
00:07:10,260 --> 00:07:16,260
that's funny a few events but the

130
00:07:14,490 --> 00:07:18,570
reality is that there's a lot more than

131
00:07:16,260 --> 00:07:20,520
this and there are other talks later on

132
00:07:18,570 --> 00:07:23,219
in the day which will really drill down

133
00:07:20,520 --> 00:07:30,180
on some of the smaller events that have

134
00:07:23,220 --> 00:07:36,150
occurred because only a week ago this

135
00:07:30,180 --> 00:07:38,940
occurred a route leaked from a random

136
00:07:36,150 --> 00:07:41,549
ASN of a set of IP addresses that are

137
00:07:38,940 --> 00:07:44,969
random until you notice what the pattern

138
00:07:41,550 --> 00:07:49,710
is here and you realize this isn't just

139
00:07:44,970 --> 00:07:54,180
a typo this is somebody's test lab or

140
00:07:49,710 --> 00:07:57,140
something that is leaking out and going

141
00:07:54,180 --> 00:08:04,680
to various parts of the global internet

142
00:07:57,140 --> 00:08:08,700
this quad numbers is this isn't just

143
00:08:04,680 --> 00:08:12,390
somebody typoing and yet this goes as I

144
00:08:08,700 --> 00:08:14,570
said and has quite an effect it's not

145
00:08:12,390 --> 00:08:17,460
that safe to run a quad number

146
00:08:14,570 --> 00:08:19,500
CloudFlare has actually talked about the

147
00:08:17,460 --> 00:08:21,210
routing plusses and the routing minuses

148
00:08:19,500 --> 00:08:25,350
of announcing one dot one dot one dot

149
00:08:21,210 --> 00:08:27,989
one it shows up in in enormous numbers

150
00:08:25,350 --> 00:08:32,120
of test labs and other places by mistake

151
00:08:27,990 --> 00:08:34,020
it shows up in hotels on Wi-Fi

152
00:08:32,120 --> 00:08:36,780
controllers but it shows up on the

153
00:08:34,020 --> 00:08:39,090
global internet every now and again okay

154
00:08:36,780 --> 00:08:41,339
so let's go down to the meat of the of

155
00:08:39,090 --> 00:08:45,290
the talk and let's after that nice

156
00:08:41,340 --> 00:08:45,290
background talk about what happened

157
00:08:45,790 --> 00:08:52,180
first of all remember the press is quite

158
00:08:49,690 --> 00:08:55,960
good at writing about this stuff the

159
00:08:52,180 --> 00:08:58,150
press got out pretty damn quickly in in

160
00:08:55,960 --> 00:09:00,280
in talking about the fact that there

161
00:08:58,150 --> 00:09:02,350
were there was a route issue and it

162
00:09:00,280 --> 00:09:04,959
affected us it affected CloudFlare and

163
00:09:02,350 --> 00:09:06,910
it affected us with a rather big hiccup

164
00:09:04,960 --> 00:09:09,910
it affected lots of other people as well

165
00:09:06,910 --> 00:09:15,310
we just so happened to be sort of the

166
00:09:09,910 --> 00:09:19,660
more visible the more visible network

167
00:09:15,310 --> 00:09:22,569
that was affected and well press isn't

168
00:09:19,660 --> 00:09:25,689
good it's important to understand that

169
00:09:22,570 --> 00:09:27,220
what we do as a network as an episode of

170
00:09:25,690 --> 00:09:29,770
networking engineers as a set of

171
00:09:27,220 --> 00:09:31,270
networking operators is now highly

172
00:09:29,770 --> 00:09:33,100
visible to the rest of the world

173
00:09:31,270 --> 00:09:34,720
somebody asked me earlier you know when

174
00:09:33,100 --> 00:09:39,820
did I first come to an an old meeting in

175
00:09:34,720 --> 00:09:41,830
and it was in the 90s mid 90s and

176
00:09:39,820 --> 00:09:43,870
there's not a hope in hell of a press

177
00:09:41,830 --> 00:09:46,600
person ever walking into an an old

178
00:09:43,870 --> 00:09:50,170
meeting or even knowing what routing

179
00:09:46,600 --> 00:09:54,760
tables were about we have changed rather

180
00:09:50,170 --> 00:09:58,030
dramatically so this route leak lasted

181
00:09:54,760 --> 00:10:00,040
about an hour and a bit it started it

182
00:09:58,030 --> 00:10:03,280
affected traffic this is a graph from

183
00:10:00,040 --> 00:10:04,930
SCID exes Alexis's is a company that

184
00:10:03,280 --> 00:10:08,829
measures content delivery network

185
00:10:04,930 --> 00:10:11,229
performance and absolutely as this route

186
00:10:08,830 --> 00:10:16,180
leak occurred the performance of

187
00:10:11,230 --> 00:10:18,640
CloudFlare deteriorated and it had a

188
00:10:16,180 --> 00:10:23,589
known start and it absolutely had a

189
00:10:18,640 --> 00:10:25,780
known end and when this happened we get

190
00:10:23,590 --> 00:10:28,090
as many alerts as you'd expect us to get

191
00:10:25,780 --> 00:10:30,400
and we had to deal with this and we had

192
00:10:28,090 --> 00:10:32,590
to deal with it fairly quickly it

193
00:10:30,400 --> 00:10:36,970
affected our traffic this is an internal

194
00:10:32,590 --> 00:10:40,870
graph I know there's no y-axis but it

195
00:10:36,970 --> 00:10:43,060
started going down it continued and when

196
00:10:40,870 --> 00:10:46,960
it ended it came back up again we were

197
00:10:43,060 --> 00:10:52,630
down for that period of time so how did

198
00:10:46,960 --> 00:10:54,940
we get it solved and the answer is and I

199
00:10:52,630 --> 00:10:57,520
can go on and on and on about this

200
00:10:54,940 --> 00:11:00,910
without any words on this slide

201
00:10:57,520 --> 00:11:04,899
but you know the answer we made phone

202
00:11:00,910 --> 00:11:08,290
calls plural and I have to tell you the

203
00:11:04,899 --> 00:11:11,380
story because it's sort of important we

204
00:11:08,290 --> 00:11:13,750
very quickly realized that there was a

205
00:11:11,380 --> 00:11:17,560
route leak and a very specific a s

206
00:11:13,750 --> 00:11:20,200
number was the cause the source of those

207
00:11:17,560 --> 00:11:22,599
were out leaks and we picked up the

208
00:11:20,200 --> 00:11:24,250
phone and we talked to that a s number

209
00:11:22,600 --> 00:11:26,649
we actually found for who his

210
00:11:24,250 --> 00:11:30,810
information returned a valid piece of

211
00:11:26,649 --> 00:11:34,750
information and we picked up the phone

212
00:11:30,810 --> 00:11:39,760
it was early working hours of the

213
00:11:34,750 --> 00:11:44,080
morning for them East Coast and they

214
00:11:39,760 --> 00:11:45,029
simply say nope not us thank you very

215
00:11:44,080 --> 00:11:51,330
much

216
00:11:45,029 --> 00:11:55,120
click now the thing about routing tables

217
00:11:51,330 --> 00:11:58,120
this twofold one is their beautifully

218
00:11:55,120 --> 00:12:01,890
archived our hats off and thank you to

219
00:11:58,120 --> 00:12:06,040
the people at Oregon rights that cater

220
00:12:01,890 --> 00:12:10,270
other places that save routing tables ad

221
00:12:06,040 --> 00:12:12,610
infinitum secondly when you look at a

222
00:12:10,270 --> 00:12:15,579
BGP route in a routing table and it has

223
00:12:12,610 --> 00:12:17,320
an a s number in it that's it's pretty

224
00:12:15,579 --> 00:12:19,560
accurate you know what's going on you

225
00:12:17,320 --> 00:12:21,670
know the part you know the players

226
00:12:19,560 --> 00:12:26,140
needless to say we had to pick the phone

227
00:12:21,670 --> 00:12:28,270
back up again and it took about well

228
00:12:26,140 --> 00:12:31,149
just shy of an hour to convince them

229
00:12:28,270 --> 00:12:34,360
that they really were the issue by the

230
00:12:31,149 --> 00:12:36,940
way this network was quite a sort of

231
00:12:34,360 --> 00:12:38,320
long way away and not very important and

232
00:12:36,940 --> 00:12:40,570
we didn't quite know what was going on

233
00:12:38,320 --> 00:12:44,770
still at this point in time but this

234
00:12:40,570 --> 00:12:50,680
mechanism was our only mechanism to use

235
00:12:44,770 --> 00:12:52,930
at that point in time not perfectly

236
00:12:50,680 --> 00:12:58,930
formatted but there is in fact actually

237
00:12:52,930 --> 00:13:01,689
there's an RFC on on on what a what a

238
00:12:58,930 --> 00:13:03,849
route week actually is and so it isn't

239
00:13:01,690 --> 00:13:07,840
like we are talking about something that

240
00:13:03,850 --> 00:13:11,740
is to to to various players at this

241
00:13:07,840 --> 00:13:14,410
in the in the the the mid outage

242
00:13:11,740 --> 00:13:16,810
timeframe that isn't that we don't know

243
00:13:14,410 --> 00:13:22,480
what what the the language is it's

244
00:13:16,810 --> 00:13:24,160
actually quite well understood here's an

245
00:13:22,480 --> 00:13:25,870
example of what that route table

246
00:13:24,160 --> 00:13:28,270
actually looked like to show you why we

247
00:13:25,870 --> 00:13:31,930
had sort of somewhat definitive

248
00:13:28,270 --> 00:13:36,400
information we could see the particular

249
00:13:31,930 --> 00:13:41,199
AAS number that shouldn't be in the

250
00:13:36,400 --> 00:13:43,600
route we can see the path this is what

251
00:13:41,200 --> 00:13:46,780
BGP is great at that once you have

252
00:13:43,600 --> 00:13:49,450
enough of a view you can actually see

253
00:13:46,780 --> 00:13:52,540
all of the different information you can

254
00:13:49,450 --> 00:13:55,030
see the players involved so we knew

255
00:13:52,540 --> 00:14:02,560
exactly who to to pick up the phone and

256
00:13:55,030 --> 00:14:04,810
talk to but there was a problem and this

257
00:14:02,560 --> 00:14:06,189
becomes sort of the introduction to the

258
00:14:04,810 --> 00:14:10,689
second part of what I'm going to talk

259
00:14:06,190 --> 00:14:16,390
about in a few slides this is not a

260
00:14:10,690 --> 00:14:20,490
route that we announced we were seeing

261
00:14:16,390 --> 00:14:24,189
if I go back to the previous slide we

262
00:14:20,490 --> 00:14:28,690
were seeing a slash 21 that was being

263
00:14:24,190 --> 00:14:33,600
leaked and yet we only announced a slash

264
00:14:28,690 --> 00:14:39,070
20 and the slash 20 in fact actually is

265
00:14:33,600 --> 00:14:44,700
not only in the IRR but is also rpki

266
00:14:39,070 --> 00:14:48,900
signed with a max length of slash 20

267
00:14:44,700 --> 00:14:53,680
quick aside and a very very quick rpki

268
00:14:48,900 --> 00:14:55,959
tutorial you connect you you create a

269
00:14:53,680 --> 00:14:59,530
roller and a roller has an IP address

270
00:14:55,960 --> 00:15:01,210
and an AS number it has a net mask we're

271
00:14:59,530 --> 00:15:03,430
familiar with that but it also can have

272
00:15:01,210 --> 00:15:07,630
a max length and the max length in this

273
00:15:03,430 --> 00:15:10,359
case equals the max length the the the

274
00:15:07,630 --> 00:15:13,030
mask of the route and therefore that

275
00:15:10,360 --> 00:15:15,160
route can only exist as a slash 20 on

276
00:15:13,030 --> 00:15:18,910
the routing tables and nothing else I

277
00:15:15,160 --> 00:15:20,709
are asked says the same thing except for

278
00:15:18,910 --> 00:15:21,740
it doesn't imply a max length then this

279
00:15:20,710 --> 00:15:25,250
is nicely sized

280
00:15:21,740 --> 00:15:29,390
and cryptographically is it's this is

281
00:15:25,250 --> 00:15:31,880
all good but we were seeing us 21 but

282
00:15:29,390 --> 00:15:36,550
what was more interesting was where we

283
00:15:31,880 --> 00:15:41,270
were seeing it from and so this is the

284
00:15:36,550 --> 00:15:43,400
ripe stat eg play tool can generate in a

285
00:15:41,270 --> 00:15:46,030
very nice picture in this case we've

286
00:15:43,400 --> 00:15:50,630
augmented it with us a set of names and

287
00:15:46,030 --> 00:15:56,480
you'll see it play out where this route

288
00:15:50,630 --> 00:15:59,930
at the end here where it says not

289
00:15:56,480 --> 00:16:04,000
CloudFlare although it is our a s number

290
00:15:59,930 --> 00:16:07,670
on this specific play of this route

291
00:16:04,000 --> 00:16:11,210
equally on both sides it is in fact

292
00:16:07,670 --> 00:16:13,430
actually not us we don't connect through

293
00:16:11,210 --> 00:16:17,420
these other guesses in this particular

294
00:16:13,430 --> 00:16:19,790
way so already at this point in time we

295
00:16:17,420 --> 00:16:21,949
are starting to you know to realize

296
00:16:19,790 --> 00:16:25,579
something else is going on why is this

297
00:16:21,950 --> 00:16:30,170
particular network here which is named

298
00:16:25,580 --> 00:16:31,160
on the on the slide it's very hard by

299
00:16:30,170 --> 00:16:34,370
the way to give one of these talks

300
00:16:31,160 --> 00:16:37,880
without naming names because like I said

301
00:16:34,370 --> 00:16:43,130
in in the BGP world everything is it's

302
00:16:37,880 --> 00:16:45,590
quite well documented so I told you we

303
00:16:43,130 --> 00:16:47,810
wrote two blogs about this the first

304
00:16:45,590 --> 00:16:51,640
blog we wrote within a few hours after

305
00:16:47,810 --> 00:16:55,280
we fixed it simply said what we really

306
00:16:51,640 --> 00:16:58,490
saw happening and and and both of the

307
00:16:55,280 --> 00:17:03,380
urls are here go grab them read through

308
00:16:58,490 --> 00:17:05,089
them it's the type of I'm biased because

309
00:17:03,380 --> 00:17:09,010
I work for cloud player and I write

310
00:17:05,089 --> 00:17:12,530
blogs like this but it is very much the

311
00:17:09,010 --> 00:17:16,359
mechanism of announcing what we are

312
00:17:12,530 --> 00:17:21,020
doing or what happened in a very flat

313
00:17:16,359 --> 00:17:24,379
simple factual way and obviously fairly

314
00:17:21,020 --> 00:17:26,810
quickly that does help so the first one

315
00:17:24,380 --> 00:17:30,260
is simply it went down we think we know

316
00:17:26,810 --> 00:17:33,919
why the second one actually contains a

317
00:17:30,260 --> 00:17:36,260
whole bunch of scripts all of which

318
00:17:33,920 --> 00:17:41,970
we're on get

319
00:17:36,260 --> 00:17:45,530
but the scripts were able to let anybody

320
00:17:41,970 --> 00:17:48,720
run the same analysis of this route leak

321
00:17:45,530 --> 00:17:52,200
the data is out there in this case these

322
00:17:48,720 --> 00:17:56,250
scripts use the right stat capability

323
00:17:52,200 --> 00:18:02,070
use their API generate the correct API

324
00:17:56,250 --> 00:18:03,870
call grab the json data process it do a

325
00:18:02,070 --> 00:18:07,020
whole set of who is is if you need to

326
00:18:03,870 --> 00:18:10,020
and then find out what happens and in

327
00:18:07,020 --> 00:18:12,480
the blog it will give you the x down to

328
00:18:10,020 --> 00:18:14,250
you know down to a second or whatever of

329
00:18:12,480 --> 00:18:17,550
when route showed up and when they

330
00:18:14,250 --> 00:18:19,410
didn't but it was very clear to us at

331
00:18:17,550 --> 00:18:23,340
this point in time first of all that the

332
00:18:19,410 --> 00:18:26,940
route that we saw was not one we were

333
00:18:23,340 --> 00:18:28,949
announcing and also the path was clearly

334
00:18:26,940 --> 00:18:30,690
coming from many other places in the

335
00:18:28,950 --> 00:18:32,820
blog I think we list all the different a

336
00:18:30,690 --> 00:18:34,950
s's that were affected during the same

337
00:18:32,820 --> 00:18:39,780
time as I said we seem to be the biggest

338
00:18:34,950 --> 00:18:41,490
one alright so I'm gonna make it an

339
00:18:39,780 --> 00:18:43,590
aside because if I don't give a talk

340
00:18:41,490 --> 00:18:46,350
with the word ipv6 in it I know some

341
00:18:43,590 --> 00:18:50,100
people will will complain bitterly but

342
00:18:46,350 --> 00:18:55,080
at this point in time for this sort of

343
00:18:50,100 --> 00:19:00,199
hour and a bit we had certain parts of

344
00:18:55,080 --> 00:19:03,419
the internet unable to access us via v4

345
00:19:00,200 --> 00:19:05,820
so we had a whole set of websites that

346
00:19:03,420 --> 00:19:07,110
may be impacted during that time

347
00:19:05,820 --> 00:19:07,649
depending upon where you are on the

348
00:19:07,110 --> 00:19:10,290
Internet

349
00:19:07,650 --> 00:19:15,200
but let's look at this v6 stat this

350
00:19:10,290 --> 00:19:20,550
graph is the percentage of v6 activity

351
00:19:15,200 --> 00:19:25,890
coming in during that point in time it

352
00:19:20,550 --> 00:19:29,159
went up and it went up because you know

353
00:19:25,890 --> 00:19:30,780
that happy eyeballs code that has sort

354
00:19:29,160 --> 00:19:33,150
of sat around and finally been

355
00:19:30,780 --> 00:19:37,649
implemented over the last sort of five

356
00:19:33,150 --> 00:19:40,170
six seven years five years it has in

357
00:19:37,650 --> 00:19:43,170
fact actually solved the day save the

358
00:19:40,170 --> 00:19:47,190
day for a large number of v6 enabled

359
00:19:43,170 --> 00:19:48,160
users they failed to connect on v4 but

360
00:19:47,190 --> 00:19:51,750
because happy I

361
00:19:48,160 --> 00:19:56,320
is doing a v6 connection as well as v4

362
00:19:51,750 --> 00:19:59,170
in parallel they got to the connect they

363
00:19:56,320 --> 00:20:01,929
got to connect to us and get content via

364
00:19:59,170 --> 00:20:04,950
v6 for that period of time now sadly the

365
00:20:01,930 --> 00:20:07,210
graph goes down after this is fixed

366
00:20:04,950 --> 00:20:10,960
meaning that there is an awful lot of

367
00:20:07,210 --> 00:20:13,720
bias towards v4 out there versus v6 and

368
00:20:10,960 --> 00:20:16,600
for those people that know me I am NOT

369
00:20:13,720 --> 00:20:19,810
happy with the bias towards v4 versus v6

370
00:20:16,600 --> 00:20:22,149
but anyway interesting graph at least

371
00:20:19,810 --> 00:20:26,500
it's another way of looking at at what

372
00:20:22,150 --> 00:20:29,040
happened during that time I'm going to

373
00:20:26,500 --> 00:20:31,630
talk about something else very quickly

374
00:20:29,040 --> 00:20:34,420
there are quite frankly much better

375
00:20:31,630 --> 00:20:38,170
talks about peer lock out there but very

376
00:20:34,420 --> 00:20:42,580
quickly this was in the AS par that was

377
00:20:38,170 --> 00:20:45,520
in the particular leaked time and during

378
00:20:42,580 --> 00:20:50,740
that leaked path there are two a S's in

379
00:20:45,520 --> 00:20:57,850
this path that are clearly or should

380
00:20:50,740 --> 00:21:00,550
clearly not exist a Tier one network is

381
00:20:57,850 --> 00:21:02,770
by its very definition a network that

382
00:21:00,550 --> 00:21:04,360
does not need to use another network to

383
00:21:02,770 --> 00:21:07,900
get to the whole rest of the internet

384
00:21:04,360 --> 00:21:11,889
and those tier 1 networks interconnect

385
00:21:07,900 --> 00:21:14,670
in a full mesh such that they never need

386
00:21:11,890 --> 00:21:17,290
never need to see two of their a s's

387
00:21:14,670 --> 00:21:19,350
separated in any way they can be next to

388
00:21:17,290 --> 00:21:22,930
each other but they can't be separated

389
00:21:19,350 --> 00:21:28,030
there is no logical position for seven

390
00:21:22,930 --> 00:21:30,400
sorry for 174 next to 701 to also have a

391
00:21:28,030 --> 00:21:33,220
three three five six in there these are

392
00:21:30,400 --> 00:21:36,700
the a SS of various tier one so level

393
00:21:33,220 --> 00:21:40,420
three now CenturyLink Verizon and cogent

394
00:21:36,700 --> 00:21:45,310
at the beginning of this part this is

395
00:21:40,420 --> 00:21:47,500
the link to the the nano talk that job

396
00:21:45,310 --> 00:21:50,020
Snyder gave much better about peer lot

397
00:21:47,500 --> 00:21:53,620
but here's a very simple diagram of what

398
00:21:50,020 --> 00:21:55,720
was going on if we believe without

399
00:21:53,620 --> 00:21:59,580
getting into an argument that these are

400
00:21:55,720 --> 00:22:01,600
the various tier ones that exist today

401
00:21:59,580 --> 00:22:05,649
they all interconnect

402
00:22:01,600 --> 00:22:08,428
for mass therefore a route coming from a

403
00:22:05,650 --> 00:22:13,750
customer into one of those networks

404
00:22:08,429 --> 00:22:18,549
would only traverse this this area of

405
00:22:13,750 --> 00:22:20,289
the internet once and then wander off to

406
00:22:18,549 --> 00:22:22,750
some other customer environment it

407
00:22:20,289 --> 00:22:26,230
should never wander around and then come

408
00:22:22,750 --> 00:22:30,250
back into any of these a s's and peer

409
00:22:26,230 --> 00:22:32,710
lock is the ability for a set of a SS to

410
00:22:30,250 --> 00:22:34,990
say I will only listen to you through

411
00:22:32,710 --> 00:22:36,880
through a direct connection and I

412
00:22:34,990 --> 00:22:39,760
promise I will never see that route

413
00:22:36,880 --> 00:22:40,929
through anywhere else and peer lock

414
00:22:39,760 --> 00:22:43,299
would have saved the day

415
00:22:40,929 --> 00:22:46,360
for this because as much as it isn't

416
00:22:43,299 --> 00:22:50,490
good to see this route leak it really

417
00:22:46,360 --> 00:22:55,689
should never have traversed this area

418
00:22:50,490 --> 00:22:57,880
except it didn't because as good as peer

419
00:22:55,690 --> 00:23:03,220
lock is for tier one's cetera et cetera

420
00:22:57,880 --> 00:23:06,520
et cetera read job Snyder's slides the

421
00:23:03,220 --> 00:23:10,510
route never touched the particular a s

422
00:23:06,520 --> 00:23:14,650
which is in that BGP path in the first

423
00:23:10,510 --> 00:23:19,570
place it was created by a route

424
00:23:14,650 --> 00:23:25,380
optimizer so now changing the subject

425
00:23:19,570 --> 00:23:28,270
slightly route optimizers are about

426
00:23:25,380 --> 00:23:33,460
improving the internet for whichever

427
00:23:28,270 --> 00:23:35,650
customer plugs one in it seems and we

428
00:23:33,460 --> 00:23:38,080
seem to have the proof on this day that

429
00:23:35,650 --> 00:23:42,610
it doesn't optimize it for the rest of

430
00:23:38,080 --> 00:23:45,789
us a route optimizer injects routes in

431
00:23:42,610 --> 00:23:48,668
order to steer traffic within somebody's

432
00:23:45,789 --> 00:23:51,100
network by generating additional routes

433
00:23:48,669 --> 00:23:54,340
by generating next hops by generating

434
00:23:51,100 --> 00:23:58,059
AAS paths that don't exist and more

435
00:23:54,340 --> 00:24:03,129
importantly and in this case explicitly

436
00:23:58,059 --> 00:24:05,710
by generating more specific routes that

437
00:24:03,130 --> 00:24:08,320
will steer the traffic appropriately a

438
00:24:05,710 --> 00:24:13,090
more specific route is is is got a

439
00:24:08,320 --> 00:24:15,879
higher priority it will be used over a

440
00:24:13,090 --> 00:24:18,550
a nonspecific route and in this case

441
00:24:15,880 --> 00:24:24,310
these these additional routes will be

442
00:24:18,550 --> 00:24:31,840
injected and cause traffic to move with

443
00:24:24,310 --> 00:24:33,280
the inside a specific network well this

444
00:24:31,840 --> 00:24:36,780
is the same diagram right it doesn't

445
00:24:33,280 --> 00:24:40,360
have the same it doesn't have the same

446
00:24:36,780 --> 00:24:41,670
animation on it but simply put whoops

447
00:24:40,360 --> 00:24:45,669
sorry

448
00:24:41,670 --> 00:24:48,100
simply put although Ras is there as it

449
00:24:45,670 --> 00:24:50,290
was in the previous diagram the route

450
00:24:48,100 --> 00:24:53,919
that I showed you with all that movement

451
00:24:50,290 --> 00:24:56,649
is in fact not our route it is generated

452
00:24:53,920 --> 00:24:59,110
by a route optimizer and it is out in

453
00:24:56,650 --> 00:25:02,440
the loose it is out in the rest of the

454
00:24:59,110 --> 00:25:06,100
world and the route optimizer has not

455
00:25:02,440 --> 00:25:15,940
kept the route with insiders it's it's

456
00:25:06,100 --> 00:25:18,969
particular customer network again it's

457
00:25:15,940 --> 00:25:24,520
hard not to name names but the route

458
00:25:18,970 --> 00:25:26,260
optimizer in question has a a blog about

459
00:25:24,520 --> 00:25:28,090
whether it generates fake routes and it

460
00:25:26,260 --> 00:25:31,990
has a tweet about whether it generates

461
00:25:28,090 --> 00:25:37,360
fake routes and whether the filter is

462
00:25:31,990 --> 00:25:42,490
there and the reality is the do route

463
00:25:37,360 --> 00:25:44,139
optimizers cause fake routes yes do they

464
00:25:42,490 --> 00:25:46,180
have a book that sort of says that the

465
00:25:44,140 --> 00:25:51,010
routes won't leak actually that's not

466
00:25:46,180 --> 00:25:53,530
true because what they need to do is to

467
00:25:51,010 --> 00:25:56,830
make sure that routes don't leak by

468
00:25:53,530 --> 00:26:01,060
using standard methodologies the no

469
00:25:56,830 --> 00:26:04,300
export option within BGP is as old as

470
00:26:01,060 --> 00:26:06,639
the hills it isn't a newfangled

471
00:26:04,300 --> 00:26:08,860
community it's a very old fangled

472
00:26:06,640 --> 00:26:12,670
community and it is specifically built

473
00:26:08,860 --> 00:26:14,770
for the likes of this so if we look at

474
00:26:12,670 --> 00:26:17,470
what actually happened you realize that

475
00:26:14,770 --> 00:26:19,870
we can go right back into the beginnings

476
00:26:17,470 --> 00:26:25,490
of the documentation and you realize

477
00:26:19,870 --> 00:26:33,489
that this is sort of set up to fail if

478
00:26:25,490 --> 00:26:39,290
the route gets late now they responded

479
00:26:33,490 --> 00:26:40,910
with that language and part of this

480
00:26:39,290 --> 00:26:43,730
response is correct so I want to make

481
00:26:40,910 --> 00:26:47,840
sure that I explain at this point in the

482
00:26:43,730 --> 00:26:53,860
story what is going on routes have been

483
00:26:47,840 --> 00:26:56,270
created by a route optimizer routes have

484
00:26:53,860 --> 00:26:59,300
exited the particular network that the

485
00:26:56,270 --> 00:27:03,620
route optimizer is on yeah that's not

486
00:26:59,300 --> 00:27:06,560
good but that particular other network

487
00:27:03,620 --> 00:27:09,739
doesn't own the routes anyway so in

488
00:27:06,560 --> 00:27:11,659
theory it's upstream its transit would

489
00:27:09,740 --> 00:27:13,070
be filtering the routes and therefore

490
00:27:11,660 --> 00:27:16,460
that would be the end of the story and

491
00:27:13,070 --> 00:27:20,200
neither myself nor any of you except for

492
00:27:16,460 --> 00:27:23,450
somebody maybe on that network in

493
00:27:20,200 --> 00:27:28,190
Pennsylvania would actually see it but

494
00:27:23,450 --> 00:27:30,670
unfortunately and if you listened by the

495
00:27:28,190 --> 00:27:34,090
way to the keynote yesterday

496
00:27:30,670 --> 00:27:37,160
from Google it was a brilliant story of

497
00:27:34,090 --> 00:27:38,270
well here was a bug in here was another

498
00:27:37,160 --> 00:27:40,340
bug and unfortunately everything

499
00:27:38,270 --> 00:27:42,530
happened at the same time and something

500
00:27:40,340 --> 00:27:46,870
bad happened and this is exactly the

501
00:27:42,530 --> 00:27:50,360
same thing somewhere in the in the world

502
00:27:46,870 --> 00:27:52,699
filtering was missing at that point in

503
00:27:50,360 --> 00:27:55,580
time and at that point in time and

504
00:27:52,700 --> 00:27:58,160
optimizer leaked a bunch of routes at

505
00:27:55,580 --> 00:28:00,500
that point in time and at that point in

506
00:27:58,160 --> 00:28:04,420
time all hell breaks loose

507
00:28:00,500 --> 00:28:07,010
if either event had happened by itself I

508
00:28:04,420 --> 00:28:09,650
wouldn't be here talking about it but

509
00:28:07,010 --> 00:28:14,120
they all happened at the same time so

510
00:28:09,650 --> 00:28:16,160
the incident can argue about this and I

511
00:28:14,120 --> 00:28:19,419
can argue about this and will never come

512
00:28:16,160 --> 00:28:22,640
to an agreement but the reality is that

513
00:28:19,420 --> 00:28:28,490
obviously something bad happened all

514
00:28:22,640 --> 00:28:33,560
right so I mentioned rpki I will finish

515
00:28:28,490 --> 00:28:35,570
up by saying look rpki it isn't the

516
00:28:33,560 --> 00:28:37,549
be-all-end-all to solve the problem that

517
00:28:35,570 --> 00:28:42,889
we had on this particular day

518
00:28:37,549 --> 00:28:45,110
should be it nearly could be it would be

519
00:28:42,889 --> 00:28:50,988
nice to say that some networks and I

520
00:28:45,110 --> 00:28:54,320
have that like AT&T KPN Tilia a few

521
00:28:50,989 --> 00:28:57,080
others that are dropping rpki invalids

522
00:28:54,320 --> 00:29:00,590
would actually be immune to a to to this

523
00:28:57,080 --> 00:29:04,789
type of event because the route was

524
00:29:00,590 --> 00:29:09,980
invalid right from the start it would be

525
00:29:04,789 --> 00:29:11,509
good to say that but at the moment we're

526
00:29:09,980 --> 00:29:14,509
not quite at a hundred percent we don't

527
00:29:11,509 --> 00:29:16,909
have every Tier one running rpki but

528
00:29:14,509 --> 00:29:19,879
peer lock does seem to exist in a much

529
00:29:16,909 --> 00:29:27,919
greater sense within those those players

530
00:29:19,879 --> 00:29:33,559
and that is a good thing I'm going to

531
00:29:27,919 --> 00:29:38,019
show you one other graph and in this

532
00:29:33,559 --> 00:29:38,019
particular case this graph contains

533
00:29:38,470 --> 00:29:45,440
hitting the Romberg this graph contains

534
00:29:40,970 --> 00:29:50,149
c-calm in Africa and c-calm runs rpki

535
00:29:45,440 --> 00:29:51,950
and in the rpki world they should be

536
00:29:50,149 --> 00:29:54,018
good they should never touch this route

537
00:29:51,950 --> 00:29:58,519
but it's very clear from this diagram

538
00:29:54,019 --> 00:30:00,799
that the route is propagating through

539
00:29:58,519 --> 00:30:04,159
their network and here's the reason why

540
00:30:00,799 --> 00:30:10,249
mark Tinka from the network wrote on one

541
00:30:04,159 --> 00:30:12,470
of the I exes in South Africa onto the

542
00:30:10,249 --> 00:30:14,720
mailing list and basically said because

543
00:30:12,470 --> 00:30:20,629
we don't use the errant owl because they

544
00:30:14,720 --> 00:30:23,720
don't use the rpki data from from Arin

545
00:30:20,629 --> 00:30:26,299
they in fact actually don't filter for

546
00:30:23,720 --> 00:30:31,269
rowers in this particular area that is a

547
00:30:26,299 --> 00:30:31,269
subject of a whole separate talk and

548
00:30:31,480 --> 00:30:36,769
somebody should give it no I'm not going

549
00:30:35,299 --> 00:30:38,418
to talk about that slide I'm going to

550
00:30:36,769 --> 00:30:41,299
talk about this one though very quickly

551
00:30:38,419 --> 00:30:42,919
and then I'm going to be quiet this is

552
00:30:41,299 --> 00:30:45,379
what happened to a particular networker

553
00:30:42,919 --> 00:30:48,610
eyeball network that didn't do filtering

554
00:30:45,379 --> 00:30:51,279
and sure enough that should not happen

555
00:30:48,610 --> 00:30:53,799
bit's disappeared for a period of time

556
00:30:51,279 --> 00:30:55,840
here is a network that does do rpki

557
00:30:53,799 --> 00:30:58,330
filtering and does pillock filtering and

558
00:30:55,840 --> 00:31:01,360
nothing happened to them so the good

559
00:30:58,330 --> 00:31:05,439
news is we sort of at least had a couple

560
00:31:01,360 --> 00:31:09,100
of eyeball networks to to look at to to

561
00:31:05,440 --> 00:31:14,080
see the difference here don't need to do

562
00:31:09,100 --> 00:31:17,110
that that's simply Rara rpki and my

563
00:31:14,080 --> 00:31:20,580
summary is that I'm sure I'm going to

564
00:31:17,110 --> 00:31:23,760
get a bunch of questions I thank you for

565
00:31:20,580 --> 00:31:25,960
listening as I said there are blogs

566
00:31:23,760 --> 00:31:28,120
which contain all the in-depth

567
00:31:25,960 --> 00:31:31,000
information on this and I have gone over

568
00:31:28,120 --> 00:31:38,168
my time by one minute and 20 seconds as

569
00:31:31,000 --> 00:31:41,679
expected name and affiliation hi Martin

570
00:31:38,169 --> 00:31:45,100
Jared from Akamai Technologies yes so I

571
00:31:41,679 --> 00:31:46,510
mean we we also saw you know impact from

572
00:31:45,100 --> 00:31:49,480
this I think as many people did there

573
00:31:46,510 --> 00:31:51,158
were about 70,000 prefixes impacted as

574
00:31:49,480 --> 00:31:54,549
part of this it was pretty broad ranging

575
00:31:51,159 --> 00:31:58,090
I'm curious if you've had any better

576
00:31:54,549 --> 00:31:59,559
luck than I have since you know I had

577
00:31:58,090 --> 00:32:02,559
done some original research in the

578
00:31:59,559 --> 00:32:04,178
lightning talk in 2007 about you know

579
00:32:02,559 --> 00:32:06,399
how people should deploy simple

580
00:32:04,179 --> 00:32:07,990
techniques like a s path filtering when

581
00:32:06,399 --> 00:32:10,268
they're not able to do stuff some of

582
00:32:07,990 --> 00:32:11,440
that's come up with pure lock but I'm

583
00:32:10,269 --> 00:32:13,149
curious if you've had any luck

584
00:32:11,440 --> 00:32:17,169
convincing anyone else to do it in the

585
00:32:13,149 --> 00:32:19,779
past you know ten fifteen years compared

586
00:32:17,169 --> 00:32:21,399
to my attempts and others to do this

587
00:32:19,779 --> 00:32:23,320
because I think you know there's a lot

588
00:32:21,399 --> 00:32:24,729
of really simple techniques and I think

589
00:32:23,320 --> 00:32:27,279
you highlight some of those have like be

590
00:32:24,730 --> 00:32:29,289
it you know a s path filtering no export

591
00:32:27,279 --> 00:32:31,690
or whatever but it seems like this is a

592
00:32:29,289 --> 00:32:34,990
this is an ongoing lesson that we're

593
00:32:31,690 --> 00:32:36,100
going to continue to you know or ongoing

594
00:32:34,990 --> 00:32:38,350
experience that we're gonna continue to

595
00:32:36,100 --> 00:32:41,969
have and we were maybe not learning it

596
00:32:38,350 --> 00:32:45,279
yet so I'm curious your thoughts on that

597
00:32:41,970 --> 00:32:49,750
I'm a user of Facebook and I know some

598
00:32:45,279 --> 00:32:54,070
of you are friends on Facebook I was

599
00:32:49,750 --> 00:32:56,409
reminded of a picture seven years ago in

600
00:32:54,070 --> 00:32:58,360
some random foreign country and I was

601
00:32:56,409 --> 00:33:00,490
there to go spend three four days at the

602
00:32:58,360 --> 00:33:03,850
knot of a rather large

603
00:33:00,490 --> 00:33:06,809
in that country to help them understand

604
00:33:03,850 --> 00:33:09,370
how to do better routing and filtering

605
00:33:06,809 --> 00:33:11,170
the network is still operating in the

606
00:33:09,370 --> 00:33:15,120
same mode that it was when I was there

607
00:33:11,170 --> 00:33:17,950
seven years ago and know a lot of people

608
00:33:15,120 --> 00:33:19,989
NSR see is a good example of an entity

609
00:33:17,950 --> 00:33:22,780
that puts a lot of effort into this if

610
00:33:19,990 --> 00:33:25,059
anybody else walks out of this if

611
00:33:22,780 --> 00:33:27,490
anybody walks out of this talk or out of

612
00:33:25,059 --> 00:33:28,928
this session and says who I really

613
00:33:27,490 --> 00:33:31,990
should go actually make sure that we

614
00:33:28,929 --> 00:33:37,110
aren't susceptible then great if you

615
00:33:31,990 --> 00:33:39,280
don't think that well you should because

616
00:33:37,110 --> 00:33:43,000
unfortunately this stuff hits anyone

617
00:33:39,280 --> 00:33:45,370
whether it hits Akamai CloudFlare we can

618
00:33:43,000 --> 00:33:48,429
only protect ourselves so far we are

619
00:33:45,370 --> 00:33:54,070
quite frankly reliant on everybody else

620
00:33:48,429 --> 00:33:56,050
to do their part and yes yes I have no

621
00:33:54,070 --> 00:33:58,379
it doesn't help but I keep standing on

622
00:33:56,050 --> 00:34:00,790
stage and taking more time than actually

623
00:33:58,380 --> 00:34:02,810
I'm around if anybody wants to find me

624
00:34:00,790 --> 00:34:06,990
thank you very much

625
00:34:02,810 --> 00:34:06,990
[Applause]

