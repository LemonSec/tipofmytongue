1
00:00:00,030 --> 00:00:04,920
all right that that last talk was

2
00:00:03,540 --> 00:00:06,509
awesome I work at a software company and

3
00:00:04,920 --> 00:00:08,580
it's been way too much time thinking

4
00:00:06,509 --> 00:00:13,019
about optics and my brain has fully

5
00:00:08,580 --> 00:00:16,020
melted so we'll see how this goes all

6
00:00:13,019 --> 00:00:18,230
right we're gonna talk about a six so I

7
00:00:16,020 --> 00:00:21,689
have to start with the disclaimer

8
00:00:18,230 --> 00:00:24,930
Asics magic and Pro Wrestling are all

9
00:00:21,689 --> 00:00:26,670
very closely guarded secrets speaking

10
00:00:24,930 --> 00:00:29,250
publicly is a good way to have a

11
00:00:26,670 --> 00:00:31,740
windowless van show up put a sack over

12
00:00:29,250 --> 00:00:35,210
you hit your head drive you down to baby

13
00:00:31,740 --> 00:00:37,260
Bay Ridge and never be seen again

14
00:00:35,210 --> 00:00:40,550
everything I talk about I managed to

15
00:00:37,260 --> 00:00:43,230
find a public reference for somewhere so

16
00:00:40,550 --> 00:00:45,030
if I'm violating NDA somewhere I'm

17
00:00:43,230 --> 00:00:49,019
indirectly doing it because somebody

18
00:00:45,030 --> 00:00:51,930
violated NDA first that's like the legal

19
00:00:49,020 --> 00:00:53,640
thing right all of the dates I used are

20
00:00:51,930 --> 00:00:56,190
based on switch or chip announcements

21
00:00:53,640 --> 00:00:58,940
you know marketing is what marketing is

22
00:00:56,190 --> 00:01:02,820
so who knows when things actually happen

23
00:00:58,940 --> 00:01:05,518
and if you like if you make chips or

24
00:01:02,820 --> 00:01:07,409
work for a vendor please don't sue me

25
00:01:05,519 --> 00:01:09,750
like can we just have a conversation I

26
00:01:07,409 --> 00:01:12,240
like my job and I don't have any money

27
00:01:09,750 --> 00:01:17,729
so and I work for a start-up so we don't

28
00:01:12,240 --> 00:01:19,110
have any money either okay so there's a

29
00:01:17,729 --> 00:01:22,920
lot of folks in here we have a pretty

30
00:01:19,110 --> 00:01:25,650
wide variety of skill sets we're really

31
00:01:22,920 --> 00:01:27,000
gonna talk for network engineers I

32
00:01:25,650 --> 00:01:29,130
assume you know a little bit about

33
00:01:27,000 --> 00:01:30,630
hardware a little bit about software but

34
00:01:29,130 --> 00:01:34,439
really don't know you're not experts in

35
00:01:30,630 --> 00:01:37,380
either I'm not trying to speak to the

36
00:01:34,439 --> 00:01:41,220
asic designers my friend from Nokia who

37
00:01:37,380 --> 00:01:45,658
I met yesterday I'm a software guy like

38
00:01:41,220 --> 00:01:48,119
please go easy I like to give this talk

39
00:01:45,659 --> 00:01:51,320
the imposter syndrome silverpool because

40
00:01:48,119 --> 00:01:53,729
I'm extremely under qualified for this

41
00:01:51,320 --> 00:01:56,279
so if you have questions or comments you

42
00:01:53,729 --> 00:01:59,149
can hit me up on Twitter and if you have

43
00:01:56,280 --> 00:01:59,149
complaints I don't care

44
00:01:59,590 --> 00:02:04,369
so my qualifications what like why

45
00:02:02,479 --> 00:02:08,000
should you actually listen to me so bad

46
00:02:04,369 --> 00:02:10,699
news first I was a b-minus computer

47
00:02:08,000 --> 00:02:11,390
science student I've never taken a

48
00:02:10,699 --> 00:02:15,768
physics class

49
00:02:11,390 --> 00:02:16,849
true story I'm afraid electricity I

50
00:02:15,769 --> 00:02:18,349
don't know because I've never taken

51
00:02:16,849 --> 00:02:20,299
physics I did software like I don't know

52
00:02:18,349 --> 00:02:21,410
anything electricity I failed to install

53
00:02:20,300 --> 00:02:23,750
a thermostat once it was really

54
00:02:21,410 --> 00:02:25,970
embarrassing and I can't spell

55
00:02:23,750 --> 00:02:27,200
oscilloscope and for the key night here

56
00:02:25,970 --> 00:02:31,160
you'll see that oscilloscope is spelled

57
00:02:27,200 --> 00:02:33,290
wrong but there's good news I used to

58
00:02:31,160 --> 00:02:35,299
work in Cisco attack as escalation for

59
00:02:33,290 --> 00:02:36,829
outing protocols and although you think

60
00:02:35,299 --> 00:02:39,620
routing protocols is just thinking about

61
00:02:36,830 --> 00:02:41,750
BGP all day we also dealt a lot with the

62
00:02:39,620 --> 00:02:42,110
hardware what is the performance of this

63
00:02:41,750 --> 00:02:44,239
router

64
00:02:42,110 --> 00:02:46,760
what is the multicast replication ASIC

65
00:02:44,239 --> 00:02:48,890
doing how is this MPLS label getting

66
00:02:46,760 --> 00:02:50,329
programmed into the ASIC so this is

67
00:02:48,890 --> 00:02:53,119
really really really where I cut my

68
00:02:50,330 --> 00:02:54,799
teeth on hardware today I do a lot of

69
00:02:53,120 --> 00:02:57,200
web scale data center design helping

70
00:02:54,799 --> 00:02:59,090
customers big large-scale Asics are now

71
00:02:57,200 --> 00:03:00,708
I'm sorry large-scale networks and then

72
00:02:59,090 --> 00:03:03,470
thinking about what Asics are available

73
00:03:00,709 --> 00:03:05,150
in the market what fits their need and I

74
00:03:03,470 --> 00:03:07,280
also act kind of a nice ik translator at

75
00:03:05,150 --> 00:03:08,810
my employer so you know we look at the

76
00:03:07,280 --> 00:03:10,370
marketplace we see what's out there we

77
00:03:08,810 --> 00:03:12,200
have these conversations around does it

78
00:03:10,370 --> 00:03:13,670
make sense for us to invest in it so I

79
00:03:12,200 --> 00:03:16,369
at least get to pretend like I know what

80
00:03:13,670 --> 00:03:19,130
I'm doing even though I can't solve

81
00:03:16,370 --> 00:03:20,720
thermostat so we're gonna talk about a

82
00:03:19,130 --> 00:03:23,680
whole bunch of stuff if you want to read

83
00:03:20,720 --> 00:03:28,130
the agenda you can look at it on the PDF

84
00:03:23,680 --> 00:03:30,829
so how are a six made I assume it's

85
00:03:28,130 --> 00:03:33,130
magic I don't really know I'm a software

86
00:03:30,829 --> 00:03:36,920
guy let's talk about something else

87
00:03:33,130 --> 00:03:38,930
so CPUs versus Asics this kind of sets

88
00:03:36,920 --> 00:03:41,450
the foundation for what we're going to

89
00:03:38,930 --> 00:03:42,829
talk about an ASIC is an

90
00:03:41,450 --> 00:03:45,440
application-specific integrated circuit

91
00:03:42,829 --> 00:03:48,620
it's a circuit built to do one thing

92
00:03:45,440 --> 00:03:51,560
extremely extremely well so I'm gonna

93
00:03:48,620 --> 00:03:54,260
make a circuit that you know divides by

94
00:03:51,560 --> 00:03:57,230
the number seven and it'll do it crazy

95
00:03:54,260 --> 00:03:59,540
fast but it cannot divide by six and it

96
00:03:57,230 --> 00:04:02,480
cannot add two you can only do that one

97
00:03:59,540 --> 00:04:04,670
thing generally any networking device

98
00:04:02,480 --> 00:04:09,350
that is high speed a lot of ports its

99
00:04:04,670 --> 00:04:11,160
ASIC based there are also FPGAs or field

100
00:04:09,350 --> 00:04:12,900
programmable gate arrays

101
00:04:11,160 --> 00:04:14,340
it's kind of like an ASIC but you can

102
00:04:12,900 --> 00:04:17,100
change it you can push code down to it

103
00:04:14,340 --> 00:04:18,149
and muck with things and have it operate

104
00:04:17,100 --> 00:04:20,400
a little bit differently but it's gonna

105
00:04:18,149 --> 00:04:22,079
be a little bit slower if you're

106
00:04:20,399 --> 00:04:27,539
familiar with like the ASR 1000 from

107
00:04:22,079 --> 00:04:31,229
Cisco that is more or less an FPGA and

108
00:04:27,540 --> 00:04:32,880
it the small type there is if you

109
00:04:31,230 --> 00:04:36,870
disagree with me or have comments please

110
00:04:32,880 --> 00:04:37,980
refer to the dumpster slide when we're

111
00:04:36,870 --> 00:04:39,210
talking about a 6 and we're talking

112
00:04:37,980 --> 00:04:41,640
about the hardware it's a spectrum of

113
00:04:39,210 --> 00:04:44,310
trade-offs so on one side you have CPUs

114
00:04:41,640 --> 00:04:45,840
and on the other side you have a 6 you

115
00:04:44,310 --> 00:04:48,570
have GPUs and FPGA is kind of in the

116
00:04:45,840 --> 00:04:51,000
middle so it's a it's a trade-off of

117
00:04:48,570 --> 00:04:53,640
flexibility versus speed versus cost

118
00:04:51,000 --> 00:04:55,280
versus power versus cooling a whole

119
00:04:53,640 --> 00:04:58,770
bunch of things go into this equation

120
00:04:55,280 --> 00:05:02,280
there are no 3.2 terabyte CPUs because

121
00:04:58,770 --> 00:05:03,630
it would just start on fire and there

122
00:05:02,280 --> 00:05:05,969
are no Asics that support every single

123
00:05:03,630 --> 00:05:09,800
feature Under the Sun because it would

124
00:05:05,970 --> 00:05:12,990
you know require the Hoover dam to power

125
00:05:09,800 --> 00:05:14,460
so compromises ends up being a core

126
00:05:12,990 --> 00:05:17,580
component of how you have to think about

127
00:05:14,460 --> 00:05:19,580
networking hardware and Asics everything

128
00:05:17,580 --> 00:05:23,729
in that hardware is a trade-off

129
00:05:19,580 --> 00:05:26,070
so again power space heat cooling the

130
00:05:23,730 --> 00:05:29,010
cost to build the thing the nanometer

131
00:05:26,070 --> 00:05:30,630
physics exists out there so let's take a

132
00:05:29,010 --> 00:05:32,880
real wolf example this is an older

133
00:05:30,630 --> 00:05:35,700
switch but it's a I think a highlight to

134
00:05:32,880 --> 00:05:38,190
the point while the cisco nexus 3548

135
00:05:35,700 --> 00:05:40,770
their ultra-low latency switch designed

136
00:05:38,190 --> 00:05:43,380
for like high frequency trading for

137
00:05:40,770 --> 00:05:46,849
ethernet 50 nanoseconds port the port

138
00:05:43,380 --> 00:05:50,070
fast as hell until you turn on layer 2

139
00:05:46,850 --> 00:05:54,240
then we jump up to 190 nanoseconds by

140
00:05:50,070 --> 00:05:55,680
just enabling a mac look up but if you

141
00:05:54,240 --> 00:06:00,020
want to actually route something and

142
00:05:55,680 --> 00:06:03,360
build networks the right way 250 nanos

143
00:06:00,020 --> 00:06:05,190
teeny tiny tables the the MAC address

144
00:06:03,360 --> 00:06:08,100
tables the routing tables the ECL tables

145
00:06:05,190 --> 00:06:09,900
on this thing are miniscule because

146
00:06:08,100 --> 00:06:10,860
they've made the trade-offs that look we

147
00:06:09,900 --> 00:06:12,419
know where this is going to be placed

148
00:06:10,860 --> 00:06:14,640
it's really designed for low latency

149
00:06:12,419 --> 00:06:18,500
we're gonna chuck everything off in

150
00:06:14,640 --> 00:06:21,120
order to make this as fast as possible

151
00:06:18,500 --> 00:06:26,010
you can look at something like a buffer

152
00:06:21,120 --> 00:06:27,930
so Broadcom tomahawk 16 MIG buffer

153
00:06:26,010 --> 00:06:29,880
shared buffer on the switch

154
00:06:27,930 --> 00:06:32,520
there's 16 Meg's of memory inside that

155
00:06:29,880 --> 00:06:35,280
ASIC and you're like cool anybody can

156
00:06:32,520 --> 00:06:38,099
get 16 Meg's right but it's not fully

157
00:06:35,280 --> 00:06:40,880
shared it is impossible for a port on

158
00:06:38,100 --> 00:06:44,640
that ASIC to get 16 Meg's of a buffer

159
00:06:40,880 --> 00:06:46,590
this is a little graph showing different

160
00:06:44,640 --> 00:06:48,599
performances based on different port

161
00:06:46,590 --> 00:06:50,369
speeds or traffic being injected into

162
00:06:48,600 --> 00:06:52,680
different ports that brought comms

163
00:06:50,370 --> 00:06:53,550
friendly competitor Mellanox put out the

164
00:06:52,680 --> 00:06:55,440
great thing about having multiple

165
00:06:53,550 --> 00:06:57,600
vendors out in the ASIC space now is

166
00:06:55,440 --> 00:06:59,850
they they talk trash about each other

167
00:06:57,600 --> 00:07:00,830
makes for entertainment for software

168
00:06:59,850 --> 00:07:04,980
folks

169
00:07:00,830 --> 00:07:07,830
milik spectrum fully shared buffer low

170
00:07:04,980 --> 00:07:10,380
latency they've they've solved it right

171
00:07:07,830 --> 00:07:12,990
they they can give you any buffer across

172
00:07:10,380 --> 00:07:14,760
any port they have the lowest latency

173
00:07:12,990 --> 00:07:18,000
switch at a hundred gig on the market

174
00:07:14,760 --> 00:07:18,480
really amazing but you can only do 64

175
00:07:18,000 --> 00:07:21,150
ports

176
00:07:18,480 --> 00:07:23,010
you can't break out to more than 64

177
00:07:21,150 --> 00:07:24,810
ports on that search they've made

178
00:07:23,010 --> 00:07:27,780
another trade off everything is a trade

179
00:07:24,810 --> 00:07:29,750
off in building an ASIC when we think

180
00:07:27,780 --> 00:07:31,890
about the trade-off of time to market

181
00:07:29,750 --> 00:07:33,510
everyone's getting really close there's

182
00:07:31,890 --> 00:07:35,130
not a whole lot of difference in the

183
00:07:33,510 --> 00:07:37,770
industry anymore

184
00:07:35,130 --> 00:07:41,010
you know cisco has had a clear edge and

185
00:07:37,770 --> 00:07:42,510
ASIC design and I say this is a Cisco

186
00:07:41,010 --> 00:07:45,260
competitor I think they've clearly done

187
00:07:42,510 --> 00:07:47,520
a great job building 86 over the years

188
00:07:45,260 --> 00:07:50,880
but they're really losing that huge

189
00:07:47,520 --> 00:07:52,620
multi-year edge at most it's like one

190
00:07:50,880 --> 00:07:54,780
two three years before you see somebody

191
00:07:52,620 --> 00:07:56,760
like Broadcom developing more or less

192
00:07:54,780 --> 00:07:58,619
the exact same thing or one of their

193
00:07:56,760 --> 00:08:00,900
competitors coming out with any six that

194
00:07:58,620 --> 00:08:03,600
does relatively the same thing so if you

195
00:08:00,900 --> 00:08:06,270
look at the marketplace and you say all

196
00:08:03,600 --> 00:08:08,400
of these Asics out here terrible I hate

197
00:08:06,270 --> 00:08:10,440
them for some reason or another if you

198
00:08:08,400 --> 00:08:12,239
just wait a little bit and just kind of

199
00:08:10,440 --> 00:08:13,530
like punt on your project the next

200
00:08:12,240 --> 00:08:15,270
generation of ASIC is probably going to

201
00:08:13,530 --> 00:08:17,729
show up very soon and solve whatever

202
00:08:15,270 --> 00:08:20,030
problem you hate except for money that

203
00:08:17,730 --> 00:08:21,900
one I can't solve

204
00:08:20,030 --> 00:08:24,979
everybody building these things are

205
00:08:21,900 --> 00:08:24,979
optimizing for different things

206
00:08:25,140 --> 00:08:29,710
so the next piece we've talked about

207
00:08:28,060 --> 00:08:31,660
compromises is the pipeline

208
00:08:29,710 --> 00:08:33,610
what is the pipeline what is what is

209
00:08:31,660 --> 00:08:35,110
happening inside the ASIC and so these

210
00:08:33,610 --> 00:08:37,800
Asics have pipelines

211
00:08:35,110 --> 00:08:40,479
it's a series of circuits that do stuff

212
00:08:37,799 --> 00:08:42,728
so this is an example of a pipeline

213
00:08:40,479 --> 00:08:44,260
where you come in on the left you go

214
00:08:42,729 --> 00:08:46,990
through the top part you hit the

215
00:08:44,260 --> 00:08:48,310
scheduler that then sends you through

216
00:08:46,990 --> 00:08:51,460
the bottom to come back out the switch

217
00:08:48,310 --> 00:08:55,030
and it's gonna do things like l2 lookups

218
00:08:51,460 --> 00:08:57,790
l3 lookups ACLs the pipeline determines

219
00:08:55,030 --> 00:08:59,949
the feature set of that ASIC some

220
00:08:57,790 --> 00:09:02,500
features literally do not exist in the

221
00:08:59,950 --> 00:09:03,930
ASIC and therefore can't be done so if

222
00:09:02,500 --> 00:09:06,070
you ever have the misfortune of

223
00:09:03,930 --> 00:09:07,239
deploying some switches and then calling

224
00:09:06,070 --> 00:09:09,460
support and be like hey I can figure

225
00:09:07,240 --> 00:09:11,800
this stuff and nothing works and no yep

226
00:09:09,460 --> 00:09:13,960
our real limitation can't do it the

227
00:09:11,800 --> 00:09:15,219
circuits literally do not exist inside

228
00:09:13,960 --> 00:09:17,560
the ASIC to do the thing that you're

229
00:09:15,220 --> 00:09:19,300
trying to do and then you should go kick

230
00:09:17,560 --> 00:09:22,209
your sales engineer in the shins for

231
00:09:19,300 --> 00:09:23,890
selling you the wrong thing pipelines

232
00:09:22,210 --> 00:09:26,680
can sometimes be limited to only one

233
00:09:23,890 --> 00:09:28,960
action so I can either do of the

234
00:09:26,680 --> 00:09:33,849
excellent Vee cancellation or a layer 3

235
00:09:28,960 --> 00:09:37,090
lookup I can do Jiri or MPLS I can't do

236
00:09:33,850 --> 00:09:38,620
both depends on the ASIC I'd have to put

237
00:09:37,090 --> 00:09:42,160
two of these functions next to each

238
00:09:38,620 --> 00:09:46,000
other a GRE D cap and an MPLS label

239
00:09:42,160 --> 00:09:47,410
lookup function or I have one function

240
00:09:46,000 --> 00:09:50,220
that does both purposes and you have to

241
00:09:47,410 --> 00:09:52,510
flip the switch for one or the other

242
00:09:50,220 --> 00:09:54,220
sometimes they solve this with what's

243
00:09:52,510 --> 00:09:55,510
called a recirculation and I literally

244
00:09:54,220 --> 00:09:57,220
just send it back through the second

245
00:09:55,510 --> 00:09:58,870
time so the first time I'm going to send

246
00:09:57,220 --> 00:10:00,940
it through and get a gr VD capsulation

247
00:09:58,870 --> 00:10:02,830
and I'm gonna take that same packet out

248
00:10:00,940 --> 00:10:05,680
and just shove it right back through and

249
00:10:02,830 --> 00:10:10,630
the second time get an MPLS look up some

250
00:10:05,680 --> 00:10:13,000
of the the Broadcom homologue line of a

251
00:10:10,630 --> 00:10:16,510
six can do VX land routing where they

252
00:10:13,000 --> 00:10:19,780
can do a vehicle end cap and an l3 look

253
00:10:16,510 --> 00:10:21,700
up they do exactly this and whether

254
00:10:19,780 --> 00:10:22,839
that's through a port a cable physically

255
00:10:21,700 --> 00:10:26,860
plugged into the switch with a loopback

256
00:10:22,840 --> 00:10:29,200
port or it's through internal ports that

257
00:10:26,860 --> 00:10:30,430
are connected to each other some vendors

258
00:10:29,200 --> 00:10:32,560
have even taken the tomahawk and

259
00:10:30,430 --> 00:10:34,510
basically said this is the 40 gig

260
00:10:32,560 --> 00:10:35,709
version we're gonna sell it as a 10 gig

261
00:10:34,510 --> 00:10:37,270
switch and take all that extra bandwidth

262
00:10:35,710 --> 00:10:37,610
internally and just wire the chip back

263
00:10:37,270 --> 00:10:40,130
to it

264
00:10:37,610 --> 00:10:42,170
to perform this function so think about

265
00:10:40,130 --> 00:10:44,329
that but now you're going through that

266
00:10:42,170 --> 00:10:46,699
pipeline twice and so we've got a six

267
00:10:44,329 --> 00:10:47,689
hundred nanosecond switch well you're

268
00:10:46,700 --> 00:10:49,579
going to go through that same six

269
00:10:47,690 --> 00:10:50,720
hundred nanosecond process so you now

270
00:10:49,579 --> 00:10:52,819
have a twelve hundred nanoseconds switch

271
00:10:50,720 --> 00:10:54,950
for those feature sets just again

272
00:10:52,820 --> 00:10:56,620
important to be aware that nothing comes

273
00:10:54,950 --> 00:11:01,300
for free

274
00:10:56,620 --> 00:11:05,089
next up buffering my favorite topic

275
00:11:01,300 --> 00:11:06,740
buffering is a religion it's the Red Sox

276
00:11:05,089 --> 00:11:08,390
versus the Yankees there's a clear

277
00:11:06,740 --> 00:11:11,779
winner there it's the Red Sox if you

278
00:11:08,390 --> 00:11:14,689
disagree see slide to Madrid vs

279
00:11:11,779 --> 00:11:17,870
Barcelona UNC versus Duke also a clear

280
00:11:14,690 --> 00:11:21,140
winner there and because I'm trying to

281
00:11:17,870 --> 00:11:24,440
be globally inclusive the All Blacks vs.

282
00:11:21,140 --> 00:11:29,000
allez blues I think that's rugby I don't

283
00:11:24,440 --> 00:11:32,029
understand depending on the ASIC form

284
00:11:29,000 --> 00:11:33,500
factor depends on where the buffer lives

285
00:11:32,029 --> 00:11:35,540
there's a bunch of different places you

286
00:11:33,500 --> 00:11:37,640
can have buffering in a switch is it a

287
00:11:35,540 --> 00:11:40,160
chassis does that buffer live on the

288
00:11:37,640 --> 00:11:43,790
line card on the backplane inside the

289
00:11:40,160 --> 00:11:47,529
ASIC is the buffer on chip is it a

290
00:11:43,790 --> 00:11:51,319
sidecar are these external bonus buffers

291
00:11:47,529 --> 00:11:52,990
that I'm using and it's also really

292
00:11:51,320 --> 00:11:56,930
important remember buffers mean latency

293
00:11:52,990 --> 00:11:59,269
it's it's the act of putting a packet

294
00:11:56,930 --> 00:12:03,349
into storage for some period of time

295
00:11:59,269 --> 00:12:06,350
before I can act on it you cannot have

296
00:12:03,350 --> 00:12:11,060
large buffers and low latency doesn't

297
00:12:06,350 --> 00:12:15,910
make any sense they're not necessarily

298
00:12:11,060 --> 00:12:17,660
evil but where and why matters again

299
00:12:15,910 --> 00:12:19,189
trade-offs in building the ASIC

300
00:12:17,660 --> 00:12:21,620
trade-offs and designing networks

301
00:12:19,190 --> 00:12:24,920
trade-offs in picking what platforms

302
00:12:21,620 --> 00:12:27,070
you're going to use so wind chips

303
00:12:24,920 --> 00:12:28,819
buffers be used or when are they used

304
00:12:27,070 --> 00:12:30,199
primarily store-and-forward

305
00:12:28,820 --> 00:12:32,510
right I'm going to receive a frame in

306
00:12:30,199 --> 00:12:34,370
I'm gonna hold it I'm gonna do a lookup

307
00:12:32,510 --> 00:12:37,060
and then send it on well I got a hold it

308
00:12:34,370 --> 00:12:40,339
somewhere I'm holding it in the buffer

309
00:12:37,060 --> 00:12:43,459
egress port congestion two ports sending

310
00:12:40,339 --> 00:12:44,750
the one at the same time right physics

311
00:12:43,459 --> 00:12:47,540
says I can only put one bit on the wire

312
00:12:44,750 --> 00:12:49,600
so that other bit has to wait somewhere

313
00:12:47,540 --> 00:12:52,160
it waits in the buffer

314
00:12:49,600 --> 00:12:53,089
especially within the data center I tell

315
00:12:52,160 --> 00:12:55,879
people to like think about the

316
00:12:53,089 --> 00:12:57,199
statistical probabilities we get really

317
00:12:55,879 --> 00:12:59,480
concerned and data center about

318
00:12:57,199 --> 00:13:01,490
buffering oversubscription in and and

319
00:12:59,480 --> 00:13:03,319
these kinds of things but for most folks

320
00:13:01,490 --> 00:13:05,000
like you're not really gonna have this

321
00:13:03,319 --> 00:13:07,339
problem or it's gonna be like really

322
00:13:05,000 --> 00:13:08,750
rare and far between and you can just

323
00:13:07,339 --> 00:13:11,000
read transmit and I'm not saying that

324
00:13:08,750 --> 00:13:12,680
the use cases don't exist I'm not saying

325
00:13:11,000 --> 00:13:14,600
that there aren't networks who need big

326
00:13:12,680 --> 00:13:15,979
buffers but I think there's a lot of

327
00:13:14,600 --> 00:13:18,500
times where we kind of get ourselves

328
00:13:15,980 --> 00:13:22,519
riled up and the reality is like and

329
00:13:18,500 --> 00:13:24,529
it's not really a big deal anytime the

330
00:13:22,519 --> 00:13:27,350
burst is larger than the packets the

331
00:13:24,529 --> 00:13:29,629
pipeline speed so the pipeline can only

332
00:13:27,350 --> 00:13:31,639
move packets through a specific clock

333
00:13:29,629 --> 00:13:34,279
rate at some speed and it depends on

334
00:13:31,639 --> 00:13:37,490
that packet size every ethic is

335
00:13:34,279 --> 00:13:40,759
optimized for some packet size that

336
00:13:37,490 --> 00:13:43,160
might be 9000 bytes it might be 64 bytes

337
00:13:40,759 --> 00:13:45,889
and what that means is that if you're

338
00:13:43,160 --> 00:13:48,469
optimized for 64 bytes and I send you 65

339
00:13:45,889 --> 00:13:50,899
byte packets I'm gonna get awful awful

340
00:13:48,470 --> 00:13:53,720
performance because I'm now buffering a

341
00:13:50,899 --> 00:13:56,449
bunch of that traffic speed changes is

342
00:13:53,720 --> 00:13:59,449
another one if I'm coming at a 100 gig I

343
00:13:56,449 --> 00:14:01,430
have to slow down to go to 10 gig I got

344
00:13:59,449 --> 00:14:03,920
to slow down somewhere I have to have

345
00:14:01,430 --> 00:14:05,779
the offering up from the freeway when

346
00:14:03,920 --> 00:14:07,009
don't lovers matter when are we not

347
00:14:05,779 --> 00:14:09,290
buffering we're not buffering and

348
00:14:07,009 --> 00:14:10,430
cut-through right as a pack as a frame

349
00:14:09,290 --> 00:14:11,750
comes in I'm gonna mmediately start

350
00:14:10,430 --> 00:14:14,809
sending it out we're never gonna hit the

351
00:14:11,750 --> 00:14:17,930
buffer same speeds no congestion 100 Gig

352
00:14:14,809 --> 00:14:19,129
in 100k out one-to-one port there's no

353
00:14:17,930 --> 00:14:24,559
reason for that to sit in a buffer

354
00:14:19,129 --> 00:14:26,839
anywhere so the first thing of where

355
00:14:24,559 --> 00:14:29,420
buffers live are single-chip shallow

356
00:14:26,839 --> 00:14:33,370
buffers so these usually live on chip

357
00:14:29,420 --> 00:14:36,019
and the buffer is part of that pipeline

358
00:14:33,370 --> 00:14:39,470
yes it's more complicated than that but

359
00:14:36,019 --> 00:14:42,769
again see slide 2 so this is an example

360
00:14:39,470 --> 00:14:44,870
of the Trident 3 pipeline ok packet

361
00:14:42,769 --> 00:14:46,579
comes in does some stuff and then in

362
00:14:44,870 --> 00:14:50,089
highlighted in yellow here in the bottom

363
00:14:46,579 --> 00:14:51,888
right is the packet buffer so as it's

364
00:14:50,089 --> 00:14:56,420
going through it will land in the packet

365
00:14:51,889 --> 00:14:58,519
buffer and it's on the chip you know

366
00:14:56,420 --> 00:15:00,339
you're not gonna see any other memory if

367
00:14:58,519 --> 00:15:02,870
you open up the switch and look at it

368
00:15:00,340 --> 00:15:04,670
it's not deep generally these shallow

369
00:15:02,870 --> 00:15:08,600
what we call shallow buffers are

370
00:15:04,670 --> 00:15:10,329
measured in megabytes but it also means

371
00:15:08,600 --> 00:15:13,100
it's usually a really high speed switch

372
00:15:10,330 --> 00:15:16,490
because of that memory is on chip it

373
00:15:13,100 --> 00:15:21,380
usually can run roughly the speed of the

374
00:15:16,490 --> 00:15:24,520
chip so I can write and read from that

375
00:15:21,380 --> 00:15:27,110
memory as fast as the switch can operate

376
00:15:24,520 --> 00:15:29,510
it can also mean the légion see rang

377
00:15:27,110 --> 00:15:35,330
again buffers have speeds but like it's

378
00:15:29,510 --> 00:15:38,000
complicated when we talk about buffering

379
00:15:35,330 --> 00:15:39,530
you know I just mentioned on chip you're

380
00:15:38,000 --> 00:15:41,240
thinking about a single box but we also

381
00:15:39,530 --> 00:15:43,430
have to think about context of a chassis

382
00:15:41,240 --> 00:15:46,400
so if we look at a chassis so it's

383
00:15:43,430 --> 00:15:49,040
something like the Arista 7300 you have

384
00:15:46,400 --> 00:15:51,079
an ingress and egress link card they

385
00:15:49,040 --> 00:15:53,569
have some sets of forwarding Asics all

386
00:15:51,080 --> 00:15:56,540
four of those forwarding Asics have

387
00:15:53,570 --> 00:15:58,460
buffers on them so I have four 16 Meg

388
00:15:56,540 --> 00:16:01,699
buffers that are each isolated to some

389
00:15:58,460 --> 00:16:04,580
set of ports I then have multiple fabric

390
00:16:01,700 --> 00:16:06,800
cards those fabric cards have a fabric

391
00:16:04,580 --> 00:16:11,930
ASIC that fabric ASIC may or may not

392
00:16:06,800 --> 00:16:14,150
have buffers and then I have what are

393
00:16:11,930 --> 00:16:15,949
called voq buffers this is true of

394
00:16:14,150 --> 00:16:17,930
almost every chassis but there is a

395
00:16:15,950 --> 00:16:21,470
buffer on the line card called a view

396
00:16:17,930 --> 00:16:23,599
cue buffer to prevent packets from going

397
00:16:21,470 --> 00:16:27,230
to the fabric unless they're spaced so

398
00:16:23,600 --> 00:16:28,850
these are virtual output queues this is

399
00:16:27,230 --> 00:16:31,610
how you can have a deep buffer chassis

400
00:16:28,850 --> 00:16:35,360
because although each of those Broadcom

401
00:16:31,610 --> 00:16:38,570
Tomahawks is 16 Meg's my voq might be

402
00:16:35,360 --> 00:16:40,520
multi gig or because I'm in marketing I

403
00:16:38,570 --> 00:16:44,390
had up all of the vo queues together

404
00:16:40,520 --> 00:16:46,040
until you have a 36 gig buffer even

405
00:16:44,390 --> 00:16:49,130
though you have a bunch of line cards

406
00:16:46,040 --> 00:16:50,900
with some percentage of that and it's

407
00:16:49,130 --> 00:16:52,220
there to prevent fabric congestion the

408
00:16:50,900 --> 00:16:54,199
idea is that the fabric is never

409
00:16:52,220 --> 00:16:56,030
congested and so I'm actually going to

410
00:16:54,200 --> 00:16:58,340
put a packet into the vo queue buffer

411
00:16:56,030 --> 00:17:00,800
ask for permission to send it across the

412
00:16:58,340 --> 00:17:03,470
fabric and only when granted permission

413
00:17:00,800 --> 00:17:05,270
will I send it and so the vo queue

414
00:17:03,470 --> 00:17:07,280
buffer is where the packet lives to

415
00:17:05,270 --> 00:17:11,389
prevent congestion on that backplane on

416
00:17:07,280 --> 00:17:13,859
that fabric so it's it's very much like

417
00:17:11,390 --> 00:17:16,049
a sand right I have to be given a credit

418
00:17:13,859 --> 00:17:18,869
by the fabric called an arbiter to

419
00:17:16,049 --> 00:17:20,699
transmit across that fabric and unless

420
00:17:18,869 --> 00:17:23,059
I'm given that credit I'm gonna live in

421
00:17:20,699 --> 00:17:26,730
that voq buffer

422
00:17:23,059 --> 00:17:29,760
however single-line card can still have

423
00:17:26,730 --> 00:17:32,010
congestion that voq buffer gets me from

424
00:17:29,760 --> 00:17:34,679
line card a line card what happens if I

425
00:17:32,010 --> 00:17:36,840
have two ports on the same line card

426
00:17:34,679 --> 00:17:39,000
just blasting traffic

427
00:17:36,840 --> 00:17:40,830
I'm never hitting that extra voq buffer

428
00:17:39,000 --> 00:17:43,350
their implementation details as to

429
00:17:40,830 --> 00:17:44,790
whether or not I am but in general I'm

430
00:17:43,350 --> 00:17:46,590
gonna try to keep all that forwarding

431
00:17:44,790 --> 00:17:48,120
local so I'm gonna come in the first

432
00:17:46,590 --> 00:17:50,070
Broadcom tomahawk and go right back out

433
00:17:48,120 --> 00:17:55,168
it so I can actually exceed the buffer

434
00:17:50,070 --> 00:17:56,939
of that ingress one card AC you know in

435
00:17:55,169 --> 00:17:59,100
cast to a line card can exist I could

436
00:17:56,940 --> 00:18:01,470
have a single uplink and have every line

437
00:17:59,100 --> 00:18:02,760
card sending the bat uplink and all the

438
00:18:01,470 --> 00:18:05,520
back pressure is gonna be pushed into

439
00:18:02,760 --> 00:18:07,590
the video queue buffer and I can still

440
00:18:05,520 --> 00:18:12,929
have congestion and drops they're all

441
00:18:07,590 --> 00:18:15,860
buffering does is buy you time so chasse

442
00:18:12,929 --> 00:18:22,980
e's are basically leaf in spine networks

443
00:18:15,860 --> 00:18:25,379
this is the nexus 9500 or francisco in

444
00:18:22,980 --> 00:18:27,540
the green are the forwarding engines

445
00:18:25,380 --> 00:18:28,740
from the line cards and the orange in

446
00:18:27,540 --> 00:18:30,690
the middle are their forwarding Indians

447
00:18:28,740 --> 00:18:33,480
for the fabrics looks a lot like a leaf

448
00:18:30,690 --> 00:18:36,360
in spine network to me you just don't

449
00:18:33,480 --> 00:18:39,419
know it you don't think about it but the

450
00:18:36,360 --> 00:18:40,889
takeaway from that though is we think of

451
00:18:39,419 --> 00:18:42,440
chassé ease being special magical

452
00:18:40,890 --> 00:18:45,240
devices

453
00:18:42,440 --> 00:18:47,700
it's just sheet metal I mean there's

454
00:18:45,240 --> 00:18:52,110
again more complexity there but you know

455
00:18:47,700 --> 00:18:55,320
don't don't get mixed up in the magic so

456
00:18:52,110 --> 00:18:56,939
if we talk about deep buffers there are

457
00:18:55,320 --> 00:18:58,350
families of Asics with deep buffers

458
00:18:56,940 --> 00:19:00,900
these are generally measured in

459
00:18:58,350 --> 00:19:03,780
gigabytes versus megabytes for shallow

460
00:19:00,900 --> 00:19:05,820
buffers oftentimes they are off chip

461
00:19:03,780 --> 00:19:08,370
meaning that I'm not going to put nine

462
00:19:05,820 --> 00:19:11,610
gigs of memory inside the ASIC I'm gonna

463
00:19:08,370 --> 00:19:14,070
put it next door to the ASIC I can have

464
00:19:11,610 --> 00:19:16,709
high-speed memory but it's not that

465
00:19:14,070 --> 00:19:19,590
super super fast l1 l2 cache like a

466
00:19:16,710 --> 00:19:21,090
shallow buffer ASIC either the physics

467
00:19:19,590 --> 00:19:24,090
don't exist to allow us to have that

468
00:19:21,090 --> 00:19:26,209
much memory and do a lookup that fast or

469
00:19:24,090 --> 00:19:28,759
it's just too expensive

470
00:19:26,210 --> 00:19:32,690
again nothing comes for free I have to

471
00:19:28,759 --> 00:19:34,820
make a trade off somewhere the buffer

472
00:19:32,690 --> 00:19:37,009
can oftentimes be slower than the

473
00:19:34,820 --> 00:19:38,480
transmitted speed so if I have constant

474
00:19:37,009 --> 00:19:40,309
congestion I can actually start to run

475
00:19:38,480 --> 00:19:43,879
into some real lengthy latency problems

476
00:19:40,309 --> 00:19:45,470
and so if it's consistent the buffering

477
00:19:43,879 --> 00:19:48,740
doesn't matter I can still over on any

478
00:19:45,470 --> 00:19:51,080
buffer under consisting congestion and

479
00:19:48,740 --> 00:19:53,690
it creates extremely high latency as a

480
00:19:51,080 --> 00:19:57,769
result and so here we can look at the

481
00:19:53,690 --> 00:20:01,759
Cisco and CS 5500 they have a nine this

482
00:19:57,769 --> 00:20:04,190
huge multi gig off chip buffer you know

483
00:20:01,759 --> 00:20:06,679
for however much to absorb all these

484
00:20:04,190 --> 00:20:08,269
bursts but to write to and from that

485
00:20:06,679 --> 00:20:10,700
memory is only nine hundred gigs a

486
00:20:08,269 --> 00:20:11,960
second I can tell you I don't know what

487
00:20:10,700 --> 00:20:14,840
it is offhand I can tell you that that

488
00:20:11,960 --> 00:20:16,490
switch and that router is gonna do way

489
00:20:14,840 --> 00:20:19,129
more than nine hundred gigs a second of

490
00:20:16,490 --> 00:20:21,230
total throughput capacity so we are

491
00:20:19,129 --> 00:20:23,449
getting limited by our ability to read

492
00:20:21,230 --> 00:20:24,559
and write from that buffer if traffic

493
00:20:23,450 --> 00:20:26,419
gets pushed out there because we have

494
00:20:24,559 --> 00:20:28,279
congestion and so the idea is that I

495
00:20:26,419 --> 00:20:30,230
have a little bit of congestion I push

496
00:20:28,279 --> 00:20:32,059
it out there I think can pull it back in

497
00:20:30,230 --> 00:20:33,980
once the congestion goes away so that's

498
00:20:32,059 --> 00:20:35,658
what I mean by consistent congestion

499
00:20:33,980 --> 00:20:37,879
doesn't matter because if I'm constantly

500
00:20:35,659 --> 00:20:42,889
filling that buffer I'm gonna have some

501
00:20:37,879 --> 00:20:47,719
other bigger problems so my editorial on

502
00:20:42,889 --> 00:20:50,658
buffers deep buffers make sense for long

503
00:20:47,720 --> 00:20:54,440
distance transmissions dark fiber or the

504
00:20:50,659 --> 00:20:56,749
internet basically anywhere where a tiny

505
00:20:54,440 --> 00:20:59,450
little burst causes a packet loss is

506
00:20:56,749 --> 00:21:03,649
going to crush my RTT and have pretty

507
00:20:59,450 --> 00:21:06,590
bad performance impact on TCP if you

508
00:21:03,649 --> 00:21:08,418
hate money deep buffers are great it's

509
00:21:06,590 --> 00:21:10,039
insurance it's not cheap if you look at

510
00:21:08,419 --> 00:21:11,869
a cost report especially in data center

511
00:21:10,039 --> 00:21:14,389
switching of a deep buffered switch

512
00:21:11,869 --> 00:21:18,100
versus a shallow buffer switch it's a

513
00:21:14,389 --> 00:21:22,399
it's a massive difference Shella buffers

514
00:21:18,100 --> 00:21:24,918
basically anything else all buffer

515
00:21:22,399 --> 00:21:27,320
marketing is cooked arista cisco

516
00:21:24,919 --> 00:21:29,600
Mellanox Broadcom they all have white

517
00:21:27,320 --> 00:21:32,769
papers that talk about how their way of

518
00:21:29,600 --> 00:21:34,850
doing buffers is the best and you know

519
00:21:32,769 --> 00:21:38,720
everybody else is stupid and doing it

520
00:21:34,850 --> 00:21:41,330
wrong this is a religious debate you can

521
00:21:38,720 --> 00:21:42,940
do whatever you want to cook the data to

522
00:21:41,330 --> 00:21:46,730
make it look like you want it to

523
00:21:42,940 --> 00:21:48,559
so only come with real-world data right

524
00:21:46,730 --> 00:21:50,900
if you come to me and you say look we

525
00:21:48,559 --> 00:21:53,320
have this huge set cluster and when we

526
00:21:50,900 --> 00:21:56,600
do a big replication we see a bunch of

527
00:21:53,320 --> 00:21:58,070
ingress njet ingress congestion drops on

528
00:21:56,600 --> 00:21:59,658
our shallot buffered switch

529
00:21:58,070 --> 00:22:02,539
I like great let's have a conversation

530
00:21:59,659 --> 00:22:03,980
about B buffers if you're like you know

531
00:22:02,539 --> 00:22:06,049
sometimes I'm really worried about my

532
00:22:03,980 --> 00:22:08,360
Apache web server so we probably need

533
00:22:06,049 --> 00:22:13,639
deeper buffers I probably don't believe

534
00:22:08,360 --> 00:22:15,740
you so briefly to talk about what are

535
00:22:13,640 --> 00:22:19,760
the most common ASIC families out there

536
00:22:15,740 --> 00:22:23,179
Broadcom they have the strata SGX line

537
00:22:19,760 --> 00:22:25,908
this is their data center series it's

538
00:22:23,179 --> 00:22:28,640
mainly named after missiles so Trident

539
00:22:25,909 --> 00:22:29,960
tried to tried to plus maverick tried in

540
00:22:28,640 --> 00:22:32,179
three Trident 4 these are the

541
00:22:29,960 --> 00:22:33,650
feature-rich Asics so they're gonna do

542
00:22:32,179 --> 00:22:35,780
things like the explained routing or

543
00:22:33,650 --> 00:22:39,080
streaming to on a tree or things like

544
00:22:35,780 --> 00:22:41,270
that but this is in contrast to their

545
00:22:39,080 --> 00:22:44,000
high speed brothers and sisters the

546
00:22:41,270 --> 00:22:45,530
tomahawk lines which they're going to

547
00:22:44,000 --> 00:22:48,260
strip out features at the sake of

548
00:22:45,530 --> 00:22:50,990
performance so I think it's tomahawk 3

549
00:22:48,260 --> 00:22:54,919
for example has no capability to do

550
00:22:50,990 --> 00:23:00,650
vehicle and whatsoever but it's 400 gig

551
00:22:54,919 --> 00:23:02,840
super fast future poor strata DNX

552
00:23:00,650 --> 00:23:04,490
is their deep buffer line they're named

553
00:23:02,840 --> 00:23:06,590
after Israeli cities this is actually an

554
00:23:04,490 --> 00:23:07,820
acquisition and that Broadcom did some

555
00:23:06,590 --> 00:23:10,189
number of years ago you'll sometimes

556
00:23:07,820 --> 00:23:13,549
hear him referred to as the dune family

557
00:23:10,190 --> 00:23:15,530
of chips these are you know medium to

558
00:23:13,549 --> 00:23:17,750
large buffers so the heir add the

559
00:23:15,530 --> 00:23:20,418
Kumaran the Jericho Jericho plus Jericho

560
00:23:17,750 --> 00:23:22,340
- Jericho - see these are the routing

561
00:23:20,419 --> 00:23:25,850
platforms you see out there are the

562
00:23:22,340 --> 00:23:27,760
large buffered affix Mellanox

563
00:23:25,850 --> 00:23:29,870
their friendly competitor in the space

564
00:23:27,760 --> 00:23:31,908
Mellon X is really focused on a single

565
00:23:29,870 --> 00:23:33,590
line called spectrum and they're trying

566
00:23:31,909 --> 00:23:35,809
to balance a the low latency

567
00:23:33,590 --> 00:23:37,760
feature-rich so they're not trying to do

568
00:23:35,809 --> 00:23:40,220
deep buffers you know they make some

569
00:23:37,760 --> 00:23:42,530
other trade-offs but what I think is

570
00:23:40,220 --> 00:23:44,870
interesting is if we look at the time

571
00:23:42,530 --> 00:23:47,750
lines of a6 and like I said I think that

572
00:23:44,870 --> 00:23:49,610
window was closing with an ASIC space so

573
00:23:47,750 --> 00:23:50,360
trident 2 was announced or came out

574
00:23:49,610 --> 00:23:54,199
September 20

575
00:23:50,360 --> 00:23:58,820
14 June of 2015 knock him out what their

576
00:23:54,200 --> 00:24:00,830
30 to 500 gig spectrum music into 2016

577
00:23:58,820 --> 00:24:02,540
we had a 32 500 being a sick from

578
00:24:00,830 --> 00:24:05,480
Broadcom so you know they're about a

579
00:24:02,540 --> 00:24:10,430
year behind mellow max once again

580
00:24:05,480 --> 00:24:12,260
leapfrog them 32 by 220 17 Kumaran the

581
00:24:10,430 --> 00:24:14,720
deep buffered switch comes out and this

582
00:24:12,260 --> 00:24:18,290
is interesting right it's 48 by 10 gig

583
00:24:14,720 --> 00:24:20,000
with 600 giggling but they just came out

584
00:24:18,290 --> 00:24:22,790
with a 32 500 why are they coming out

585
00:24:20,000 --> 00:24:26,240
with a 48 by 10 because it's a very

586
00:24:22,790 --> 00:24:28,670
feature rich deep buffered switch it's

587
00:24:26,240 --> 00:24:31,670
focused on you know edge routing MPLS

588
00:24:28,670 --> 00:24:34,060
all of those things and so they're going

589
00:24:31,670 --> 00:24:36,680
to take the advantage of features and

590
00:24:34,060 --> 00:24:40,750
buffering at the trade-off of speeds and

591
00:24:36,680 --> 00:24:43,190
feeds and you will see this consistently

592
00:24:40,750 --> 00:24:46,580
Trident 3 and tomahawk 3 both come out

593
00:24:43,190 --> 00:24:48,950
again a great contrast a 48 by 25 and a

594
00:24:46,580 --> 00:24:52,220
32 by 400 gigs which more or less

595
00:24:48,950 --> 00:24:56,000
announced at the same time tomahawk 3 is

596
00:24:52,220 --> 00:24:57,530
a race car there's like a chair and a

597
00:24:56,000 --> 00:25:00,080
seat belt in a steering wheel and

598
00:24:57,530 --> 00:25:02,930
nothing else inside that car Trident 3

599
00:25:00,080 --> 00:25:05,960
has like six cupholders like an iPad

600
00:25:02,930 --> 00:25:06,560
station in the back you know it's the

601
00:25:05,960 --> 00:25:11,060
feature-rich

602
00:25:06,560 --> 00:25:13,429
but again 48 by 25 a slower chip Jericho

603
00:25:11,060 --> 00:25:15,200
twos announced 24 500 with 400 gig up

604
00:25:13,430 --> 00:25:17,120
links and tried before was just

605
00:25:15,200 --> 00:25:19,430
announced not too long ago with 32 by

606
00:25:17,120 --> 00:25:21,070
400 and so I think the two takeaways I

607
00:25:19,430 --> 00:25:23,210
want you to have here are one

608
00:25:21,070 --> 00:25:26,389
understanding that speeds versus

609
00:25:23,210 --> 00:25:28,580
features across the board but also just

610
00:25:26,390 --> 00:25:31,970
look how fast these things are coming up

611
00:25:28,580 --> 00:25:34,310
you know we did 48 by 10 in 2014 and

612
00:25:31,970 --> 00:25:36,830
here we are in 2019 we're doing 32 by

613
00:25:34,310 --> 00:25:39,139
400 on a single chip and so again that

614
00:25:36,830 --> 00:25:42,620
like huge differentiation in the space

615
00:25:39,140 --> 00:25:43,640
that Juniper that Cisco and some others

616
00:25:42,620 --> 00:25:48,560
used to have I think it's getting

617
00:25:43,640 --> 00:25:51,320
smaller and smaller and smaller quick

618
00:25:48,560 --> 00:25:53,510
note on programmable chips so you have

619
00:25:51,320 --> 00:25:55,490
kind of a spectrum here you have not

620
00:25:53,510 --> 00:25:58,190
programmable which means I cannot talk

621
00:25:55,490 --> 00:26:00,200
to the SDK I have no way to update a

622
00:25:58,190 --> 00:26:03,410
thing in software for what that ASIC

623
00:26:00,200 --> 00:26:03,830
does it's a fixed pipeline so this is

624
00:26:03,410 --> 00:26:05,240
what we've been

625
00:26:03,830 --> 00:26:07,250
talking about what comes in on one side

626
00:26:05,240 --> 00:26:08,539
comes out the other side there's only

627
00:26:07,250 --> 00:26:11,929
certain steps that can happen in the

628
00:26:08,539 --> 00:26:14,510
middle you have semi programmable so I

629
00:26:11,929 --> 00:26:16,039
can't really talk to the SDK I can't do

630
00:26:14,510 --> 00:26:18,200
anything but there's a flexible pipeline

631
00:26:16,039 --> 00:26:20,510
the vendor can release code and like

632
00:26:18,200 --> 00:26:24,529
rejigger the pipeline to do different

633
00:26:20,510 --> 00:26:27,320
things the Asics the the Siskiyou DAP

634
00:26:24,529 --> 00:26:29,179
ASIC but they use in their catalyst 9000

635
00:26:27,320 --> 00:26:30,500
stuff is a good example of this so you

636
00:26:29,179 --> 00:26:31,669
know they can rejigger it and do a

637
00:26:30,500 --> 00:26:33,950
different thing for wireless and

638
00:26:31,669 --> 00:26:36,440
rejigger it do something for Liz but you

639
00:26:33,950 --> 00:26:37,909
can't ever touch it and then there's

640
00:26:36,440 --> 00:26:41,450
fully programmable so this is like

641
00:26:37,909 --> 00:26:44,659
you're barefoot Tofino so it's a

642
00:26:41,450 --> 00:26:45,799
flexible pipeline but you have full

643
00:26:44,659 --> 00:26:47,299
access you have some programming

644
00:26:45,799 --> 00:26:49,039
language that allows you to tell the

645
00:26:47,299 --> 00:26:51,139
switch what to do and how to do it and

646
00:26:49,039 --> 00:26:53,330
program each step of those pipelines and

647
00:26:51,139 --> 00:26:55,100
usually at a high level the way this

648
00:26:53,330 --> 00:26:57,740
works is I have a bunch of forwarding

649
00:26:55,100 --> 00:27:00,289
engines write a bunch of different

650
00:26:57,740 --> 00:27:02,630
little mini pipelines and I chain them

651
00:27:00,289 --> 00:27:04,908
all together and I can pop out at any

652
00:27:02,630 --> 00:27:07,070
point time so as I program it really

653
00:27:04,909 --> 00:27:09,620
what I'm doing is saying okay go to

654
00:27:07,070 --> 00:27:10,820
engines 1 2 & 3 and then do these

655
00:27:09,620 --> 00:27:13,010
functions and then pop out

656
00:27:10,820 --> 00:27:14,750
we don't need Engine 4 for this and so

657
00:27:13,010 --> 00:27:16,789
even that fully programmable switch it's

658
00:27:14,750 --> 00:27:18,860
gonna have some limitation of how many

659
00:27:16,789 --> 00:27:22,370
engines are in there right again nothing

660
00:27:18,860 --> 00:27:24,139
comes for free so I put a packet in it

661
00:27:22,370 --> 00:27:25,489
does each little engine look up and it

662
00:27:24,139 --> 00:27:30,408
can pop out at any point that I tell it

663
00:27:25,490 --> 00:27:32,120
to but let's be honest you're not gonna

664
00:27:30,409 --> 00:27:34,340
program an ASIC I mean it's great for

665
00:27:32,120 --> 00:27:35,629
vendors there are a couple of folks in

666
00:27:34,340 --> 00:27:38,840
here that might have use cases for it

667
00:27:35,630 --> 00:27:40,519
but the reality of the world is even

668
00:27:38,840 --> 00:27:43,699
with something like p4 it's still super

669
00:27:40,519 --> 00:27:45,740
hard to do this no one builds routing

670
00:27:43,700 --> 00:27:47,210
protocols I mean I am a vendor that

671
00:27:45,740 --> 00:27:48,440
produces one of the only systems where

672
00:27:47,210 --> 00:27:49,880
you can build your own software on top

673
00:27:48,440 --> 00:27:52,130
of it they'll join routing protocol and

674
00:27:49,880 --> 00:27:54,220
really go to town and I can think of

675
00:27:52,130 --> 00:27:57,230
like exactly one customer that does this

676
00:27:54,220 --> 00:27:58,789
so again it's not that nobody's gonna do

677
00:27:57,230 --> 00:28:00,200
it but like if you're not gonna do the

678
00:27:58,789 --> 00:28:03,200
easy software stuff we're gonna be the

679
00:28:00,200 --> 00:28:05,059
hard part of our stuff so look there are

680
00:28:03,200 --> 00:28:07,549
some valid use cases maybe you want

681
00:28:05,059 --> 00:28:09,440
custom metadata you need to understand

682
00:28:07,549 --> 00:28:10,879
something about you know that cellular

683
00:28:09,440 --> 00:28:14,330
packet that's coming out and hitting

684
00:28:10,880 --> 00:28:15,260
your mobile backhaul you know I've heard

685
00:28:14,330 --> 00:28:16,879
some interesting use cases around

686
00:28:15,260 --> 00:28:18,620
trading on or

687
00:28:16,880 --> 00:28:21,470
forwarding based on stock ticker symbols

688
00:28:18,620 --> 00:28:23,780
so I might have Exxon and Apple coming

689
00:28:21,470 --> 00:28:25,970
from the same exchange and so they have

690
00:28:23,780 --> 00:28:27,740
the same IP group but I want to send

691
00:28:25,970 --> 00:28:29,270
them to different server clusters so I

692
00:28:27,740 --> 00:28:31,280
want to be able to look deeper in the

693
00:28:29,270 --> 00:28:33,139
packet to see what is the stock ticker

694
00:28:31,280 --> 00:28:35,540
in there and then I can want to send

695
00:28:33,140 --> 00:28:38,060
Apple over to my tech cluster and X on

696
00:28:35,540 --> 00:28:40,399
over my commodities cluster that's super

697
00:28:38,060 --> 00:28:45,889
cool for all like 30 people that need

698
00:28:40,400 --> 00:28:48,380
that so kind of in conclusion you know

699
00:28:45,890 --> 00:28:50,330
ask some questions to your vendors right

700
00:28:48,380 --> 00:28:52,340
the the goal of this talk is to arm you

701
00:28:50,330 --> 00:28:56,090
with enough information to start to ask

702
00:28:52,340 --> 00:28:58,010
questions so the preface and I apologize

703
00:28:56,090 --> 00:29:01,220
in advance for offending both VARs and

704
00:28:58,010 --> 00:29:03,710
SES in the room your var probably won't

705
00:29:01,220 --> 00:29:05,000
know you know they are they are

706
00:29:03,710 --> 00:29:05,930
integrators they you think about a lot

707
00:29:05,000 --> 00:29:07,930
of different vendors they're probably

708
00:29:05,930 --> 00:29:10,040
not gonna know this level of minutiae

709
00:29:07,930 --> 00:29:12,200
again I'm making blanket statements

710
00:29:10,040 --> 00:29:14,330
there will be exceptions your se might

711
00:29:12,200 --> 00:29:16,520
not know good se is like really good a

712
00:29:14,330 --> 00:29:18,020
thieves might but most uh sees this is a

713
00:29:16,520 --> 00:29:20,480
level of detail that they don't know but

714
00:29:18,020 --> 00:29:21,920
they can go find it so you know make

715
00:29:20,480 --> 00:29:24,590
your vendor or their key you're paying

716
00:29:21,920 --> 00:29:28,460
them a lot of money like make them

717
00:29:24,590 --> 00:29:30,320
hustle what does that ship do well think

718
00:29:28,460 --> 00:29:32,090
about that right you have this chip you

719
00:29:30,320 --> 00:29:34,399
have this new shiny platform coming from

720
00:29:32,090 --> 00:29:36,050
some vendor what is their chip do really

721
00:29:34,400 --> 00:29:38,000
well what do they think is their biggest

722
00:29:36,050 --> 00:29:38,540
strengths but also what does it do

723
00:29:38,000 --> 00:29:41,240
poorly

724
00:29:38,540 --> 00:29:43,220
what trade-off did they make right is it

725
00:29:41,240 --> 00:29:47,330
a speeds and feeds trade-off is it a

726
00:29:43,220 --> 00:29:50,630
buffering trade-off is it a congestion

727
00:29:47,330 --> 00:29:54,379
under 65 byte packet trade-off they made

728
00:29:50,630 --> 00:29:56,120
a trade-off somewhere what is it you

729
00:29:54,380 --> 00:29:58,100
know there was some magic function this

730
00:29:56,120 --> 00:30:00,770
thing does you know what what was it

731
00:29:58,100 --> 00:30:02,300
what what trade-off did they make you

732
00:30:00,770 --> 00:30:04,600
know for that Cisco low latency switch

733
00:30:02,300 --> 00:30:07,580
their trade-off was tiny tables and

734
00:30:04,600 --> 00:30:09,980
basically no features so it can go super

735
00:30:07,580 --> 00:30:15,199
fast as long as you're not doing l2 or

736
00:30:09,980 --> 00:30:17,450
l3 lookups you know if you ask your

737
00:30:15,200 --> 00:30:18,950
vendor if I needed more speed or more

738
00:30:17,450 --> 00:30:20,690
features what would you what would the

739
00:30:18,950 --> 00:30:22,880
alternative be right here's my specific

740
00:30:20,690 --> 00:30:23,750
you case but what if I wanted to have a

741
00:30:22,880 --> 00:30:25,910
faster box

742
00:30:23,750 --> 00:30:27,500
what ASIC would do position and what do

743
00:30:25,910 --> 00:30:29,120
I lose well what if I needed more

744
00:30:27,500 --> 00:30:30,610
features are more buffering what would

745
00:30:29,120 --> 00:30:32,919
you position what do I

746
00:30:30,610 --> 00:30:34,179
so again it's about thinking critically

747
00:30:32,920 --> 00:30:36,130
about what are we buying what are we

748
00:30:34,180 --> 00:30:39,220
consuming and how to go back through our

749
00:30:36,130 --> 00:30:43,440
vendors on that nothing is free what is

750
00:30:39,220 --> 00:30:43,440
the trade off and that's all I've got

