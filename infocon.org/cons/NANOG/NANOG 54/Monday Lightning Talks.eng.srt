1
00:00:00,500 --> 00:00:05,940
okay next up we<font color="#E5E5E5"> move on to the lightning</font>

2
00:00:03,149 --> 00:00:08,870
talk portion of our show on first up we

3
00:00:05,940 --> 00:00:08,870
have Randy<font color="#CCCCCC"> Bush</font>

4
00:00:25,720 --> 00:00:28,619
<font color="#CCCCCC">their clicker</font>

5
00:00:29,830 --> 00:00:42,280
Thanks oops okeydoke um pardon yeah I

6
00:00:38,200 --> 00:00:44,950
see<font color="#CCCCCC"> that but okay okay let's</font><font color="#E5E5E5"> figure out</font>

7
00:00:42,280 --> 00:00:48,520
how<font color="#E5E5E5"> to use this so um I work for a</font>

8
00:00:44,950 --> 00:00:49,930
Japanese<font color="#E5E5E5"> ISP in the one of my feet is in</font>

9
00:00:48,520 --> 00:00:54,010
the research side and these are fellow

10
00:00:49,930 --> 00:00:55,120
researchers and we're looking<font color="#E5E5E5"> at of</font>

11
00:00:54,010 --> 00:00:58,000
course you've heard of the wonderful

12
00:00:55,120 --> 00:00:59,320
little event over there so I'll tell<font color="#E5E5E5"> you</font>

13
00:00:58,000 --> 00:01:00,940
something about the<font color="#E5E5E5"> real world event</font>

14
00:00:59,320 --> 00:01:03,670
that we look at it through the routing

15
00:01:00,940 --> 00:01:07,330
we look at it<font color="#E5E5E5"> through traffic that is</font>

16
00:01:03,670 --> 00:01:08,650
Japan the two red lines indicate the two

17
00:01:07,330 --> 00:01:12,548
things we're really going<font color="#E5E5E5"> to look at</font>

18
00:01:08,650 --> 00:01:16,540
which<font color="#CCCCCC"> is the more vertical one is from</font>

19
00:01:12,549 --> 00:01:20,460
Sendai down to Tokyo and then the Tokyo

20
00:01:16,540 --> 00:01:24,369
area oversees the real world events

21
00:01:20,460 --> 00:01:28,839
March the 11th<font color="#CCCCCC"> that 246 in the afternoon</font>

22
00:01:24,369 --> 00:01:31,920
things were<font color="#CCCCCC"> pretty scary things were</font>

23
00:01:28,840 --> 00:01:37,330
highly destructive up in the wat a and

24
00:01:31,920 --> 00:01:41,470
Fukushima prefectures or<font color="#CCCCCC"> iwate and skip</font>

25
00:01:37,330 --> 00:01:44,650
it and so two minutes<font color="#CCCCCC"> later</font><font color="#E5E5E5"> our data</font>

26
00:01:41,470 --> 00:01:48,670
center switched to in-house power the

27
00:01:44,650 --> 00:01:54,780
two links<font color="#E5E5E5"> to send I from Tokyo area were</font>

28
00:01:48,670 --> 00:01:58,990
lost and starting about<font color="#CCCCCC"> five hours later</font>

29
00:01:54,780 --> 00:02:00,460
links oversees the piss<font color="#CCCCCC"> transpac links</font>

30
00:01:58,990 --> 00:02:02,500
were lost why there's the five hour

31
00:02:00,460 --> 00:02:06,339
delay is because what you're really

32
00:02:02,500 --> 00:02:09,459
seeing is land sly underwater landslides

33
00:02:06,340 --> 00:02:13,120
taking out those links considerable

34
00:02:09,459 --> 00:02:19,900
delay um then two more links or lost

35
00:02:13,120 --> 00:02:23,440
<font color="#CCCCCC">Transpac and then a link</font><font color="#E5E5E5"> um is restored</font>

36
00:02:19,900 --> 00:02:25,450
<font color="#E5E5E5">to send I and so forth by the time we</font>

37
00:02:23,440 --> 00:02:33,970
get to two days later everything's back

38
00:02:25,450 --> 00:02:36,730
up<font color="#CCCCCC"> okay ospf is an internal the igp and</font>

39
00:02:33,970 --> 00:02:40,780
we have an external view from a neighbor

40
00:02:36,730 --> 00:02:41,869
who provider bgp um Thank<font color="#CCCCCC"> You packet</font>

41
00:02:40,780 --> 00:02:44,720
design

42
00:02:41,870 --> 00:02:46,720
for giving<font color="#E5E5E5"> us the researchers route</font>

43
00:02:44,720 --> 00:02:51,260
<font color="#E5E5E5">Explorer so we can look at the records</font>

44
00:02:46,720 --> 00:02:56,360
there's about 1500 links at about 325

45
00:02:51,260 --> 00:03:02,810
nodes so we look we bucket events in an

46
00:02:56,360 --> 00:03:06,110
hour okay so um in Asia usually red is

47
00:03:02,810 --> 00:03:10,150
good and green is more neutral so don't

48
00:03:06,110 --> 00:03:13,010
get fooled what you're seeing is the

49
00:03:10,150 --> 00:03:15,500
neighbor<font color="#E5E5E5"> ads</font><font color="#CCCCCC"> or the red going up</font>

50
00:03:13,010 --> 00:03:18,489
neighbor drops to the<font color="#CCCCCC"> Greens</font><font color="#E5E5E5"> going down</font>

51
00:03:15,500 --> 00:03:20,629
you can guess when the events are and

52
00:03:18,489 --> 00:03:24,859
that's about<font color="#E5E5E5"> what it looks like from</font>

53
00:03:20,629 --> 00:03:29,209
ospf at an overview what we see in the

54
00:03:24,859 --> 00:03:32,629
interesting ospf events is we can see

55
00:03:29,209 --> 00:03:37,430
the two links<font color="#E5E5E5"> to send I being lost bang</font>

56
00:03:32,629 --> 00:03:43,730
on<font color="#CCCCCC"> okay we</font><font color="#E5E5E5"> can see the timeouts coming</font>

57
00:03:37,430 --> 00:03:46,099
later ospf is a lazy protocol okay then

58
00:03:43,730 --> 00:03:50,950
we see failing links the timeouts on the

59
00:03:46,099 --> 00:03:54,168
failing links etc and the recoveries

60
00:03:50,950 --> 00:03:58,069
<font color="#CCCCCC">okay so that's the real detailed</font>

61
00:03:54,169 --> 00:04:00,470
timeline on those particular links the

62
00:03:58,069 --> 00:04:03,160
connectivity to send I was lost for<font color="#E5E5E5"> 15</font>

63
00:04:00,470 --> 00:04:08,359
hours and change out<font color="#E5E5E5"> of a dozen or so</font>

64
00:04:03,160 --> 00:04:11,209
<font color="#CCCCCC">transpac links</font><font color="#E5E5E5"> three</font><font color="#CCCCCC"> failed ospf churn</font>

65
00:04:08,359 --> 00:04:15,650
is low compared to the number of<font color="#E5E5E5"> refresh</font>

66
00:04:11,209 --> 00:04:18,099
<font color="#CCCCCC">LSAs so there we can see a</font><font color="#E5E5E5"> hundred</font>

67
00:04:15,650 --> 00:04:21,380
<font color="#E5E5E5">prefixes disappearing but you look at</font>

68
00:04:18,099 --> 00:04:25,490
the prefix events overall and it's the

69
00:04:21,380 --> 00:04:28,159
constant churn<font color="#E5E5E5"> okay the second thing is</font>

70
00:04:25,490 --> 00:04:33,160
we have a friendly neighbor where we

71
00:04:28,160 --> 00:04:33,160
have a<font color="#CCCCCC"> BGP monitor looking at that</font>

72
00:04:33,240 --> 00:04:43,060
<font color="#E5E5E5">thingy thingy I didn't do</font><font color="#CCCCCC"> this there we</font>

73
00:04:36,340 --> 00:04:47,710
go looking at their ibgp um from inside

74
00:04:43,060 --> 00:04:51,930
the neighboring guess I<font color="#E5E5E5"> really wish will</font>

75
00:04:47,710 --> 00:04:51,930
this work from over there so I can

76
00:04:57,860 --> 00:05:13,689
it's my move this way<font color="#E5E5E5"> okay see</font>

77
00:05:22,069 --> 00:05:30,089
there we go<font color="#E5E5E5"> okay so we've got a monitor</font>

78
00:05:25,199 --> 00:05:33,689
inside the neighboring isp monitoring

79
00:05:30,089 --> 00:05:38,460
and so we look at the<font color="#E5E5E5"> our prefixes as</font>

80
00:05:33,689 --> 00:05:45,650
seen by that is<font color="#CCCCCC"> P and what we see is we</font>

81
00:05:38,460 --> 00:05:45,650
can see the event sure

82
00:05:46,249 --> 00:05:54,449
boop-boop-boop-boop you<font color="#CCCCCC"> wanna the answer</font>

83
00:05:51,689 --> 00:06:02,999
<font color="#E5E5E5">is no I can't use that there we go okay</font>

84
00:05:54,449 --> 00:06:10,289
so um oops so what we see is the event

85
00:06:02,999 --> 00:06:17,479
and then we see a mess of prefixes very

86
00:06:10,289 --> 00:06:17,479
few got dropped and there's<font color="#E5E5E5"> the restore</font>

87
00:06:18,800 --> 00:06:25,849
the update seen by the pier are here and

88
00:06:23,399 --> 00:06:29,339
you can see the stuffs are to come up

89
00:06:25,849 --> 00:06:32,688
but<font color="#E5E5E5"> if we look</font><font color="#CCCCCC"> at it</font><font color="#E5E5E5"> in compared</font><font color="#CCCCCC"> to the</font>

90
00:06:29,339 --> 00:06:36,629
rest of what they're seeing in BGP

91
00:06:32,689 --> 00:06:40,879
almost everything is drowned out by just

92
00:06:36,629 --> 00:06:45,870
<font color="#E5E5E5">normal bgp noise okay so it is not a</font>

93
00:06:40,879 --> 00:06:48,209
significant bgp event to them traffic we

94
00:06:45,870 --> 00:06:50,159
can look at and<font color="#CCCCCC"> i'm a rotting guy not a</font>

95
00:06:48,209 --> 00:06:53,240
traffic guy so i'll go through this even

96
00:06:50,159 --> 00:06:58,080
more quickly is up in miyagi prefecture

97
00:06:53,240 --> 00:07:01,469
we see the death of Sendai slow recovery

98
00:06:58,080 --> 00:07:04,349
over multiple days the<font color="#E5E5E5"> rest as far as</font>

99
00:07:01,469 --> 00:07:08,879
its influence on total<font color="#CCCCCC"> japanese boy i</font>

100
00:07:04,349 --> 00:07:14,159
have talent here this is now dead um so

101
00:07:08,879 --> 00:07:16,379
what we see is the<font color="#E5E5E5"> best part of the how</font>

102
00:07:14,159 --> 00:07:21,779
much this represents of total<font color="#E5E5E5"> japanese</font>

103
00:07:16,379 --> 00:07:23,879
traffic not really<font color="#E5E5E5"> that much</font><font color="#CCCCCC"> okay so we</font>

104
00:07:21,779 --> 00:07:26,719
see the trans-pacific links we see the

105
00:07:23,879 --> 00:07:29,699
stuff switch from one to the other of

106
00:07:26,719 --> 00:07:33,240
one of two particular interesting trans

107
00:07:29,699 --> 00:07:34,620
backlinks another<font color="#CCCCCC"> trans packed link here</font>

108
00:07:33,240 --> 00:07:37,350
goes the load

109
00:07:34,620 --> 00:07:40,979
uncut stayed up the whole time no

110
00:07:37,350 --> 00:07:43,710
congestion<font color="#CCCCCC"> okay here's some information</font>

111
00:07:40,979 --> 00:07:49,340
from JP<font color="#CCCCCC"> nif map and we look at their</font>

112
00:07:43,710 --> 00:07:54,090
load here's a tokyo one here's osaka

113
00:07:49,340 --> 00:08:00,179
right you see the hit nothing exciting

114
00:07:54,090 --> 00:08:06,349
just a traffic loss<font color="#E5E5E5"> okay same story what</font>

115
00:08:00,180 --> 00:08:09,360
else did we see we saw one link past

116
00:08:06,350 --> 00:08:11,430
Sendai all the way up to<font color="#E5E5E5"> Sapporo that's</font>

117
00:08:09,360 --> 00:08:15,660
in that<font color="#CCCCCC"> island up on the north end the</font>

118
00:08:11,430 --> 00:08:19,199
Hokkaido went down because<font color="#CCCCCC"> it was shared</font>

119
00:08:15,660 --> 00:08:22,410
fate same ducti as Sendai but there were

120
00:08:19,199 --> 00:08:24,960
other links no customer effect when we

121
00:08:22,410 --> 00:08:28,350
looked inside<font color="#E5E5E5"> the BGP neighbor we found</font>

122
00:08:24,960 --> 00:08:31,770
<font color="#E5E5E5">out one of their routers was doing an</font>

123
00:08:28,350 --> 00:08:33,860
entire<font color="#CCCCCC"> BGP reset for all their sessions</font>

124
00:08:31,770 --> 00:08:37,620
once a day and they hadn't noticed it

125
00:08:33,860 --> 00:08:39,779
they cleared that up um so it's useful

126
00:08:37,620 --> 00:08:42,990
just to walk you<font color="#CCCCCC"> know we don't look at</font>

127
00:08:39,779 --> 00:08:46,320
our routing we don't<font color="#E5E5E5"> actually look at</font>

128
00:08:42,990 --> 00:08:49,620
<font color="#E5E5E5">the routing so send I was disconnected</font>

129
00:08:46,320 --> 00:08:53,000
for more than 15 hours no effect on any

130
00:08:49,620 --> 00:08:55,410
other customers<font color="#CCCCCC"> transpac links were</font>

131
00:08:53,000 --> 00:09:00,959
impacted by<font color="#E5E5E5"> the quake and aftershocks</font>

132
00:08:55,410 --> 00:09:05,189
but<font color="#E5E5E5"> BGP and I GP healed it by the way</font>

133
00:09:00,959 --> 00:09:08,400
we're simple is Pinot mpls real ipv6 by

134
00:09:05,190 --> 00:09:12,589
the way for about 15 years 14 years now

135
00:09:08,400 --> 00:09:15,170
we<font color="#E5E5E5"> have no secret sauce just IP routing</font>

136
00:09:12,589 --> 00:09:17,700
over-provisioning prudent operations

137
00:09:15,170 --> 00:09:20,910
aside from the physical down times to

138
00:09:17,700 --> 00:09:24,110
send I<font color="#E5E5E5"> nothing routing spikes worked</font>

139
00:09:20,910 --> 00:09:27,810
around the cuts life was<font color="#E5E5E5"> pretty boring</font>

140
00:09:24,110 --> 00:09:34,550
so routing works over-provisioning works

141
00:09:27,810 --> 00:09:34,550
and the internet works that's it

142
00:09:44,980 --> 00:09:48,699
any questions for<font color="#E5E5E5"> Andy</font>

