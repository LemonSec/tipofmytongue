1
00:00:00,000 --> 00:00:05,160
this is the<font color="#CCCCCC"> stripper for so</font><font color="#E5E5E5"> good so I'm</font>

2
00:00:03,240 --> 00:00:06,450
Richard<font color="#CCCCCC"> Steenburgen if you don't get</font>

3
00:00:05,160 --> 00:00:08,460
enough of me in<font color="#E5E5E5"> this presentation I'm</font>

4
00:00:06,450 --> 00:00:11,790
doing<font color="#E5E5E5"> three</font><font color="#CCCCCC"> this Nanog so you'll be</font>

5
00:00:08,460 --> 00:00:14,790
seeing lots more<font color="#E5E5E5"> of me soon</font><font color="#CCCCCC"> this is a</font>

6
00:00:11,790 --> 00:00:16,770
repeat of a tutorial<font color="#E5E5E5"> that</font><font color="#CCCCCC"> I did in the</font>

7
00:00:14,790 --> 00:00:18,180
<font color="#E5E5E5">Dominican</font><font color="#CCCCCC"> Republic and there was a lot</font>

8
00:00:16,770 --> 00:00:20,820
<font color="#CCCCCC">of interest in</font><font color="#E5E5E5"> it and a lot</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> belief</font>

9
00:00:18,180 --> 00:00:23,100
<font color="#CCCCCC">that there</font><font color="#E5E5E5"> wasn't enough exposure so I'm</font>

10
00:00:20,820 --> 00:00:26,070
redoing it but<font color="#E5E5E5"> with a little</font><font color="#CCCCCC"> bit of</font>

11
00:00:23,100 --> 00:00:28,439
<font color="#CCCCCC">tweak so hopefully it's gonna get more</font>

12
00:00:26,070 --> 00:00:32,219
<font color="#E5E5E5">exposure and</font><font color="#CCCCCC"> be</font><font color="#E5E5E5"> even more intelligible</font>

13
00:00:28,439 --> 00:00:34,260
<font color="#E5E5E5">to people so we're talking about</font>

14
00:00:32,219 --> 00:00:37,370
traceroute which is the number one

15
00:00:34,260 --> 00:00:40,320
<font color="#E5E5E5">troubleshooting tool on the</font><font color="#CCCCCC"> internet</font>

16
00:00:37,370 --> 00:00:42,718
<font color="#CCCCCC">basically</font><font color="#E5E5E5"> every OS has a traceroute tool</font>

17
00:00:40,320 --> 00:00:44,399
of some kind<font color="#E5E5E5"> there's thousands of</font>

18
00:00:42,719 --> 00:00:45,600
websites<font color="#E5E5E5"> out there where</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> can run</font>

19
00:00:44,399 --> 00:00:47,070
looking class where you can run<font color="#CCCCCC"> a</font>

20
00:00:45,600 --> 00:00:49,890
<font color="#CCCCCC">traceroute store different</font><font color="#E5E5E5"> places</font>

21
00:00:47,070 --> 00:00:52,079
<font color="#E5E5E5">there's dozens of visual traceroute</font>

22
00:00:49,890 --> 00:00:53,520
tools there's people<font color="#E5E5E5"> that don't know the</font>

23
00:00:52,079 --> 00:00:55,680
<font color="#E5E5E5">first thing about routing but somehow</font>

24
00:00:53,520 --> 00:00:57,570
<font color="#E5E5E5">they managed to generate a traceroute</font>

25
00:00:55,680 --> 00:01:01,019
<font color="#CCCCCC">and somehow they also managed to find</font>

26
00:00:57,570 --> 00:01:03,719
your phone number so there's a<font color="#E5E5E5"> lot of</font>

27
00:01:01,020 --> 00:01:06,450
<font color="#E5E5E5">traceroute out there and it seems like</font>

28
00:01:03,719 --> 00:01:08,400
such a simple tool<font color="#CCCCCC"> to use I mean you</font>

29
00:01:06,450 --> 00:01:12,150
type in an<font color="#CCCCCC"> IP address</font><font color="#E5E5E5"> you hit enter</font><font color="#CCCCCC"> you</font>

30
00:01:08,400 --> 00:01:14,159
get<font color="#CCCCCC"> a list</font><font color="#E5E5E5"> of router house and the naive</font>

31
00:01:12,150 --> 00:01:16,259
approach<font color="#E5E5E5"> is wherever you see the latency</font>

32
00:01:14,159 --> 00:01:18,630
go up or you see a drop packet or you

33
00:01:16,259 --> 00:01:20,460
see<font color="#E5E5E5"> something you know</font><font color="#CCCCCC"> like that</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> go</font>

34
00:01:18,630 --> 00:01:22,320
oh that's<font color="#E5E5E5"> the</font><font color="#CCCCCC"> problem</font><font color="#E5E5E5"> and then you call</font>

35
00:01:20,460 --> 00:01:25,679
<font color="#E5E5E5">that provider and you say fix your</font>

36
00:01:22,320 --> 00:01:29,850
network and the reality is<font color="#E5E5E5"> it almost</font>

37
00:01:25,680 --> 00:01:30,600
<font color="#E5E5E5">never happens that way so why doesn't</font>

38
00:01:29,850 --> 00:01:33,030
happen<font color="#E5E5E5"> that</font><font color="#CCCCCC"> way</font>

39
00:01:30,600 --> 00:01:35,280
well in<font color="#CCCCCC"> reality most modern networks are</font>

40
00:01:33,030 --> 00:01:37,979
actually<font color="#E5E5E5"> pretty well run there's you</font>

41
00:01:35,280 --> 00:01:40,920
know a<font color="#E5E5E5"> lot</font><font color="#CCCCCC"> less of the scenarios where</font>

42
00:01:37,979 --> 00:01:43,020
traceroute used to be the<font color="#E5E5E5"> final answer</font>

43
00:01:40,920 --> 00:01:44,880
<font color="#CCCCCC">there's a lot less routing loops there's</font>

44
00:01:43,020 --> 00:01:46,408
a lot less simple congestion there's I

45
00:01:44,880 --> 00:01:48,449
mean<font color="#CCCCCC"> there's just a lot less of it you</font>

46
00:01:46,409 --> 00:01:52,850
<font color="#E5E5E5">don't you don't see the simple problems</font>

47
00:01:48,450 --> 00:01:54,869
anymore<font color="#CCCCCC"> or you see</font><font color="#E5E5E5"> them a lot less and</font>

48
00:01:52,850 --> 00:01:56,610
there's very few people<font color="#E5E5E5"> that are</font>

49
00:01:54,869 --> 00:01:59,579
<font color="#E5E5E5">actually skilled at interpreting a</font>

50
00:01:56,610 --> 00:02:02,189
traceroute<font color="#E5E5E5"> most</font><font color="#CCCCCC"> Knox that I've dealt</font>

51
00:01:59,579 --> 00:02:04,770
<font color="#CCCCCC">with</font><font color="#E5E5E5"> even</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> know</font><font color="#CCCCCC"> their engineering</font>

52
00:02:02,189 --> 00:02:06,298
staff<font color="#E5E5E5"> to to a degree really don't</font>

53
00:02:04,770 --> 00:02:08,600
understand<font color="#CCCCCC"> try</font><font color="#E5E5E5"> out and they think they</font>

54
00:02:06,299 --> 00:02:10,580
do<font color="#E5E5E5"> because hey</font><font color="#CCCCCC"> look</font><font color="#E5E5E5"> that's</font>

55
00:02:08,600 --> 00:02:11,930
<font color="#E5E5E5">I know routers are and I read this list</font>

56
00:02:10,580 --> 00:02:13,790
<font color="#E5E5E5">of routes and I think that I know what</font>

57
00:02:11,930 --> 00:02:16,430
<font color="#CCCCCC">the</font><font color="#E5E5E5"> problem is but there's there's</font>

58
00:02:13,790 --> 00:02:17,630
<font color="#CCCCCC">really</font><font color="#E5E5E5"> there's a lot of subtle things</font>

59
00:02:16,430 --> 00:02:20,210
that<font color="#CCCCCC"> go on behind trace route that</font>

60
00:02:17,630 --> 00:02:22,700
people don't understand<font color="#E5E5E5"> and what happens</font>

61
00:02:20,210 --> 00:02:23,900
is with this flood of<font color="#CCCCCC"> people out there</font>

62
00:02:22,700 --> 00:02:25,970
that are<font color="#E5E5E5"> running this tool that</font><font color="#CCCCCC"> don't</font>

63
00:02:23,900 --> 00:02:27,440
<font color="#E5E5E5">really know how to interpret it they end</font>

64
00:02:25,970 --> 00:02:29,300
up flooding the<font color="#CCCCCC"> knox with all these</font>

65
00:02:27,440 --> 00:02:31,790
<font color="#E5E5E5">false reports if you've ever tried to</font>

66
00:02:29,300 --> 00:02:34,730
<font color="#E5E5E5">submit</font><font color="#CCCCCC"> a traceroute based ticket to a</font>

67
00:02:31,790 --> 00:02:35,959
<font color="#CCCCCC">NOC even if you're exactly right</font><font color="#E5E5E5"> and you</font>

68
00:02:34,730 --> 00:02:37,160
<font color="#E5E5E5">know that you're right you can't</font>

69
00:02:35,960 --> 00:02:38,480
convince<font color="#E5E5E5"> anyone else that you're right</font>

70
00:02:37,160 --> 00:02:39,770
because<font color="#CCCCCC"> they get flooded with just</font>

71
00:02:38,480 --> 00:02:42,049
hundreds<font color="#CCCCCC"> and thousands of</font><font color="#E5E5E5"> these things</font>

72
00:02:39,770 --> 00:02:44,420
<font color="#CCCCCC">every day why is my gaming so slow why</font>

73
00:02:42,050 --> 00:02:45,410
is this not<font color="#CCCCCC"> working and</font><font color="#E5E5E5"> reality most</font>

74
00:02:44,420 --> 00:02:47,019
<font color="#E5E5E5">people</font><font color="#CCCCCC"> just don't</font><font color="#E5E5E5"> know what they're</font>

75
00:02:45,410 --> 00:02:49,340
<font color="#E5E5E5">talking about</font>

76
00:02:47,020 --> 00:02:51,290
<font color="#E5E5E5">so the topics that we're gonna talk</font>

77
00:02:49,340 --> 00:02:53,570
about for traceroute<font color="#E5E5E5"> we're talking</font><font color="#CCCCCC"> about</font>

78
00:02:51,290 --> 00:02:54,980
Hal<font color="#E5E5E5"> tracer</font><font color="#CCCCCC"> how it works in</font><font color="#E5E5E5"> general we're</font>

79
00:02:53,570 --> 00:02:57,829
<font color="#E5E5E5">going</font><font color="#CCCCCC"> to talk</font><font color="#E5E5E5"> about how you can</font>

80
00:02:54,980 --> 00:02:59,299
interpret DNS and traceroute<font color="#E5E5E5"> we're going</font>

81
00:02:57,830 --> 00:03:00,950
to talk about<font color="#CCCCCC"> understanding the</font>

82
00:02:59,300 --> 00:03:03,260
components<font color="#CCCCCC"> of the network latency that</font>

83
00:03:00,950 --> 00:03:05,119
<font color="#CCCCCC">you see in traceroute understanding when</font>

84
00:03:03,260 --> 00:03:07,730
it's legitimate when it's not what the

85
00:03:05,120 --> 00:03:10,100
<font color="#CCCCCC">components are there we talk</font><font color="#E5E5E5"> about what</font>

86
00:03:07,730 --> 00:03:11,869
happens with ICMP prioritization and

87
00:03:10,100 --> 00:03:15,109
rate limiting on or outers why<font color="#CCCCCC"> you'll</font>

88
00:03:11,870 --> 00:03:17,150
<font color="#E5E5E5">sometimes see false false badness in a</font>

89
00:03:15,110 --> 00:03:19,660
<font color="#E5E5E5">traceroute that isn't really</font><font color="#CCCCCC"> real</font><font color="#E5E5E5"> we'll</font>

90
00:03:17,150 --> 00:03:22,340
talk about asymmetric forwarding paths

91
00:03:19,660 --> 00:03:24,590
<font color="#CCCCCC">load balancing across</font><font color="#E5E5E5"> multiple paths and</font>

92
00:03:22,340 --> 00:03:26,240
then finally what happens to<font color="#CCCCCC"> traceroute</font>

93
00:03:24,590 --> 00:03:27,770
<font color="#E5E5E5">when it goes through MPLS and there's a</font>

94
00:03:26,240 --> 00:03:30,560
couple little gotchas<font color="#CCCCCC"> in there that can</font>

95
00:03:27,770 --> 00:03:33,110
<font color="#E5E5E5">look bad but</font><font color="#CCCCCC"> really are so random</font>

96
00:03:30,560 --> 00:03:34,400
traceroute<font color="#CCCCCC"> factoids the starting</font><font color="#E5E5E5"> port</font>

97
00:03:33,110 --> 00:03:38,240
for a<font color="#CCCCCC"> unix traceroute</font>

98
00:03:34,400 --> 00:03:40,580
is 33<font color="#E5E5E5"> for 34 which</font><font color="#CCCCCC"> is 32 768 which is</font><font color="#E5E5E5"> 2</font>

99
00:03:38,240 --> 00:03:43,940
to the<font color="#E5E5E5"> 15th plus 666 the mark of Satan</font>

100
00:03:40,580 --> 00:03:46,120
<font color="#CCCCCC">so always I</font><font color="#E5E5E5"> think there's some kind of</font>

101
00:03:43,940 --> 00:03:49,550
coincidence<font color="#E5E5E5"> there but I'm not</font><font color="#CCCCCC"> sure so</font>

102
00:03:46,120 --> 00:03:52,580
<font color="#CCCCCC">house ratio it works here's the</font><font color="#E5E5E5"> 10,000</font>

103
00:03:49,550 --> 00:03:54,170
<font color="#CCCCCC">float overview the source that's doing</font>

104
00:03:52,580 --> 00:03:55,880
the traceroute launches a packet towards

105
00:03:54,170 --> 00:03:58,790
the destination<font color="#E5E5E5"> and they</font><font color="#CCCCCC"> launched an</font>

106
00:03:55,880 --> 00:04:01,400
initial pack of the TTL of<font color="#CCCCCC"> 1 every time</font>

107
00:03:58,790 --> 00:04:04,160
<font color="#E5E5E5">a packet goes through a router the TTL</font>

108
00:04:01,400 --> 00:04:06,710
is decremented<font color="#CCCCCC"> by 1 when the TTL hits 0</font>

109
00:04:04,160 --> 00:04:09,230
<font color="#CCCCCC">the router drops the packet sends an</font>

110
00:04:06,710 --> 00:04:11,630
ICMP TTL<font color="#CCCCCC"> exceed message back to</font><font color="#E5E5E5"> the</font>

111
00:04:09,230 --> 00:04:13,340
original source with part<font color="#E5E5E5"> of the</font>

112
00:04:11,630 --> 00:04:15,980
original payload part of the original

113
00:04:13,340 --> 00:04:19,548
probe they got dropped the<font color="#E5E5E5"> first 64</font>

114
00:04:15,980 --> 00:04:21,200
bytes<font color="#CCCCCC"> I think</font><font color="#E5E5E5"> as part</font><font color="#CCCCCC"> of that ICMP the</font>

115
00:04:19,548 --> 00:04:23,840
source<font color="#E5E5E5"> gets that ICMP back</font>

116
00:04:21,200 --> 00:04:26,659
says<font color="#CCCCCC"> okay</font><font color="#E5E5E5"> this must be a traceroute hop</font>

117
00:04:23,840 --> 00:04:29,030
and<font color="#E5E5E5"> whatever the the ICMP message source</font>

118
00:04:26,660 --> 00:04:30,980
is that's what<font color="#E5E5E5"> it displays is</font><font color="#CCCCCC"> the hop</font><font color="#E5E5E5"> so</font>

119
00:04:29,030 --> 00:04:32,359
as soon as it's determined what hop<font color="#E5E5E5"> one</font>

120
00:04:30,980 --> 00:04:34,310
is it'll do the<font color="#CCCCCC"> same thing but</font><font color="#E5E5E5"> it'll</font>

121
00:04:32,360 --> 00:04:35,540
start with a TTL of<font color="#E5E5E5"> two you'll get a</font>

122
00:04:34,310 --> 00:04:38,060
<font color="#E5E5E5">message</font><font color="#CCCCCC"> back</font><font color="#E5E5E5"> it'll say that's hop two</font>

123
00:04:35,540 --> 00:04:40,160
and so on<font color="#CCCCCC"> and so forth until it</font><font color="#E5E5E5"> gets to</font>

124
00:04:38,060 --> 00:04:41,660
the<font color="#CCCCCC"> end and when it gets</font><font color="#E5E5E5"> to the end when</font>

125
00:04:40,160 --> 00:04:44,750
it actually<font color="#E5E5E5"> reaches the end host what</font>

126
00:04:41,660 --> 00:04:47,030
it's supposed to do<font color="#E5E5E5"> in classic UDP</font><font color="#CCCCCC"> UNIX</font>

127
00:04:44,750 --> 00:04:48,890
traceroute is<font color="#E5E5E5"> send an ICMP destination</font>

128
00:04:47,030 --> 00:04:50,210
unreachable<font color="#CCCCCC"> so it hits a port there's no</font>

129
00:04:48,890 --> 00:04:52,159
one listening<font color="#CCCCCC"> to and then the end host</font>

130
00:04:50,210 --> 00:04:53,960
says there's no<font color="#E5E5E5"> one listening here it</font>

131
00:04:52,160 --> 00:04:55,310
<font color="#E5E5E5">gets that ICMP message back which is not</font>

132
00:04:53,960 --> 00:05:00,530
the TTL exceed and it says<font color="#E5E5E5"> okay</font>

133
00:04:55,310 --> 00:05:03,440
<font color="#CCCCCC">traceroute</font><font color="#E5E5E5"> done so there's actually a</font>

134
00:05:00,530 --> 00:05:04,969
lot<font color="#CCCCCC"> more detail behind</font><font color="#E5E5E5"> that there's many</font>

135
00:05:03,440 --> 00:05:06,500
<font color="#E5E5E5">different protocols that you can use for</font>

136
00:05:04,970 --> 00:05:07,820
for<font color="#E5E5E5"> trace route</font><font color="#CCCCCC"> I mean</font><font color="#E5E5E5"> actually you can</font>

137
00:05:06,500 --> 00:05:10,520
use anything that<font color="#E5E5E5"> IP will route</font>

138
00:05:07,820 --> 00:05:12,500
essentially<font color="#E5E5E5"> but the classic</font><font color="#CCCCCC"> UNIX tracer</font>

139
00:05:10,520 --> 00:05:14,870
<font color="#E5E5E5">I'll uses UDP probes like I said</font>

140
00:05:12,500 --> 00:05:17,270
starting<font color="#E5E5E5"> a destination port of 33</font><font color="#CCCCCC"> 434</font>

141
00:05:14,870 --> 00:05:18,890
<font color="#CCCCCC">and every</font><font color="#E5E5E5"> time it sends out a probe it</font>

142
00:05:17,270 --> 00:05:21,020
increments<font color="#E5E5E5"> the port and that's how it</font>

143
00:05:18,890 --> 00:05:24,770
knows when it gets a message<font color="#E5E5E5"> back which</font>

144
00:05:21,020 --> 00:05:26,870
probe<font color="#E5E5E5"> it's getting an answer to it</font>

145
00:05:24,770 --> 00:05:29,120
detects<font color="#E5E5E5"> the end when it gets that ICMP</font>

146
00:05:26,870 --> 00:05:31,850
destination unreachable<font color="#CCCCCC"> so if</font><font color="#E5E5E5"> for any</font>

147
00:05:29,120 --> 00:05:34,970
reason your end host is<font color="#E5E5E5"> firewalled if</font>

148
00:05:31,850 --> 00:05:36,170
it's not responding<font color="#CCCCCC"> to UDP</font><font color="#E5E5E5"> or even if</font>

149
00:05:34,970 --> 00:05:37,730
there's a legitimate<font color="#E5E5E5"> application</font>

150
00:05:36,170 --> 00:05:40,310
listening on whichever port it happens

151
00:05:37,730 --> 00:05:41,690
to hit it won't say you won't know that

152
00:05:40,310 --> 00:05:43,730
<font color="#E5E5E5">there's an end of a</font><font color="#CCCCCC"> traceroute and</font>

153
00:05:41,690 --> 00:05:45,020
<font color="#E5E5E5">what'll happen is it'll sure you've all</font>

154
00:05:43,730 --> 00:05:47,090
<font color="#CCCCCC">seen this little</font><font color="#E5E5E5"> star a little</font><font color="#CCCCCC"> time</font><font color="#E5E5E5"> out</font>

155
00:05:45,020 --> 00:05:48,859
<font color="#E5E5E5">and it'll get all the way down to the</font>

156
00:05:47,090 --> 00:05:51,919
maximum possible of hops that<font color="#E5E5E5"> it'll try</font>

157
00:05:48,860 --> 00:05:53,540
before<font color="#E5E5E5"> it terminates the</font><font color="#CCCCCC"> program there's</font>

158
00:05:51,920 --> 00:05:56,810
other implementations that<font color="#E5E5E5"> do this with</font>

159
00:05:53,540 --> 00:06:00,310
ICMP echo requests<font color="#CCCCCC"> the two big examples</font>

160
00:05:56,810 --> 00:06:03,680
are<font color="#CCCCCC"> Windows traceroute trace RTI</font><font color="#E5E5E5"> DXE and</font>

161
00:06:00,310 --> 00:06:05,840
MTR<font color="#E5E5E5"> which is a popular tool which</font>

162
00:06:03,680 --> 00:06:07,460
essentially<font color="#CCCCCC"> just does trace route in a</font>

163
00:06:05,840 --> 00:06:08,659
never-ending cycle like once per second

164
00:06:07,460 --> 00:06:11,330
it<font color="#CCCCCC"> just keeps sending them over and over</font>

165
00:06:08,660 --> 00:06:13,460
but<font color="#E5E5E5"> it's ICMP echo request it's similar</font>

166
00:06:11,330 --> 00:06:15,409
<font color="#CCCCCC">to the UDP probes except when it hits</font>

167
00:06:13,460 --> 00:06:18,049
the<font color="#CCCCCC"> final destination it gets an echo</font>

168
00:06:15,410 --> 00:06:21,020
reply<font color="#E5E5E5"> back so you might say</font><font color="#CCCCCC"> that that's</font>

169
00:06:18,050 --> 00:06:23,570
<font color="#E5E5E5">actually better than the UDP because it</font>

170
00:06:21,020 --> 00:06:26,030
doesn't you know people are more apt<font color="#CCCCCC"> to</font>

171
00:06:23,570 --> 00:06:28,550
reply to an ICMP echo request than they

172
00:06:26,030 --> 00:06:29,900
are<font color="#E5E5E5"> to a UDP probe to a random port that</font>

173
00:06:28,550 --> 00:06:31,640
they're not<font color="#CCCCCC"> listening on</font>

174
00:06:29,900 --> 00:06:35,719
or they may not<font color="#CCCCCC"> they may actually</font><font color="#E5E5E5"> filter</font>

175
00:06:31,640 --> 00:06:38,960
that so<font color="#E5E5E5"> it depends on what the firewall</font>

176
00:06:35,720 --> 00:06:40,310
is what what type of<font color="#E5E5E5"> the end host is and</font>

177
00:06:38,960 --> 00:06:42,500
then there's other<font color="#E5E5E5"> tricks</font><font color="#CCCCCC"> or</font>

178
00:06:40,310 --> 00:06:43,790
implementations<font color="#E5E5E5"> like the stock FreeBSD</font>

179
00:06:42,500 --> 00:06:46,220
<font color="#E5E5E5">tracer round a whole</font><font color="#CCCCCC"> bunch of others</font>

180
00:06:43,790 --> 00:06:48,800
<font color="#E5E5E5">where you can specify which protocol you</font>

181
00:06:46,220 --> 00:06:51,650
want to use so you<font color="#CCCCCC"> can use the the</font><font color="#E5E5E5"> TCP</font>

182
00:06:48,800 --> 00:06:53,420
packets for example<font color="#CCCCCC"> this generally a</font>

183
00:06:51,650 --> 00:06:55,640
poor choice for<font color="#E5E5E5"> general use in a</font>

184
00:06:53,420 --> 00:06:59,720
<font color="#CCCCCC">traceroute because people are more apt</font>

185
00:06:55,640 --> 00:07:01,159
<font color="#E5E5E5">to filter TCP packets destined to things</font>

186
00:06:59,720 --> 00:07:03,920
<font color="#E5E5E5">that they're they're not interested to</font>

187
00:07:01,160 --> 00:07:06,200
<font color="#E5E5E5">but if for</font><font color="#CCCCCC"> some reason someone</font><font color="#E5E5E5"> is</font>

188
00:07:03,920 --> 00:07:07,880
filtering ICP and<font color="#E5E5E5"> UDP it might be a way</font>

189
00:07:06,200 --> 00:07:10,729
to<font color="#E5E5E5"> get around the firewall</font><font color="#CCCCCC"> so it's good</font>

190
00:07:07,880 --> 00:07:14,480
to<font color="#E5E5E5"> have</font><font color="#CCCCCC"> options most implementations</font>

191
00:07:10,730 --> 00:07:16,550
send multiple<font color="#E5E5E5"> probes per hop so classic</font>

192
00:07:14,480 --> 00:07:19,430
traceroute example you see three<font color="#E5E5E5"> results</font>

193
00:07:16,550 --> 00:07:22,010
<font color="#E5E5E5">it's sending three probes before it</font>

194
00:07:19,430 --> 00:07:23,810
moves<font color="#E5E5E5"> on to its next hop and so you're</font>

195
00:07:22,010 --> 00:07:25,659
<font color="#E5E5E5">gonna get three latency results or three</font>

196
00:07:23,810 --> 00:07:28,160
stars if there's no response

197
00:07:25,660 --> 00:07:30,260
except for MTR which is an example<font color="#E5E5E5"> of</font>

198
00:07:28,160 --> 00:07:31,730
one<font color="#CCCCCC"> that just sends</font><font color="#E5E5E5"> it in an endless</font>

199
00:07:30,260 --> 00:07:32,900
<font color="#CCCCCC">loop</font><font color="#E5E5E5"> and it'll when it gets to the</font>

200
00:07:31,730 --> 00:07:37,160
bottom<font color="#E5E5E5"> it</font><font color="#CCCCCC"> starts back</font><font color="#E5E5E5"> at the top again</font>

201
00:07:32,900 --> 00:07:39,799
<font color="#E5E5E5">it just</font><font color="#CCCCCC"> keeps incrementing</font><font color="#E5E5E5"> so each probe</font>

202
00:07:37,160 --> 00:07:42,470
has a unique code in it when you're

203
00:07:39,800 --> 00:07:44,330
using UDP and TCP you're<font color="#CCCCCC"> using the the</font>

204
00:07:42,470 --> 00:07:46,010
layer<font color="#E5E5E5"> four port so so the traceroute</font>

205
00:07:44,330 --> 00:07:49,370
program knows when it gets its response

206
00:07:46,010 --> 00:07:51,080
back which probe this was for for ICP

207
00:07:49,370 --> 00:07:53,000
<font color="#E5E5E5">it's using a sequence</font><font color="#CCCCCC"> number but there's</font>

208
00:07:51,080 --> 00:07:56,750
all there's<font color="#E5E5E5"> always some</font><font color="#CCCCCC"> kind of code</font>

209
00:07:53,000 --> 00:07:58,400
embedded<font color="#E5E5E5"> in the packet and</font><font color="#CCCCCC"> layer four</font>

210
00:07:56,750 --> 00:08:00,080
hashing can send each one of these paths

211
00:07:58,400 --> 00:08:04,340
down<font color="#CCCCCC"> it's different</font><font color="#E5E5E5"> down to different</font>

212
00:08:00,080 --> 00:08:08,060
paths<font color="#E5E5E5"> so what happens here</font><font color="#CCCCCC"> normally</font>

213
00:08:04,340 --> 00:08:11,210
normally<font color="#E5E5E5"> flow hashing will try to keep a</font>

214
00:08:08,060 --> 00:08:13,280
flow<font color="#E5E5E5"> on a specific path but when you're</font>

215
00:08:11,210 --> 00:08:15,200
using an incrementing port it thinks

216
00:08:13,280 --> 00:08:16,969
it's a different flow<font color="#E5E5E5"> so every time you</font>

217
00:08:15,200 --> 00:08:18,800
send<font color="#E5E5E5"> a probe it can go</font><font color="#CCCCCC"> down a completely</font>

218
00:08:16,970 --> 00:08:20,720
different path than<font color="#CCCCCC"> the previous one so</font>

219
00:08:18,800 --> 00:08:23,780
<font color="#CCCCCC">that's where you you can</font><font color="#E5E5E5"> start to see</font>

220
00:08:20,720 --> 00:08:25,730
<font color="#CCCCCC">multiple results if</font><font color="#E5E5E5"> someone is doing</font><font color="#CCCCCC"> ECP</font>

221
00:08:23,780 --> 00:08:27,770
if they're doing load<font color="#E5E5E5"> balancing at layer</font>

222
00:08:25,730 --> 00:08:29,330
3<font color="#E5E5E5"> you will see the multiple paths</font>

223
00:08:27,770 --> 00:08:32,598
because<font color="#E5E5E5"> you'll see</font><font color="#CCCCCC"> different router hops</font>

224
00:08:29,330 --> 00:08:34,429
if they're using a lag you won't see it

225
00:08:32,599 --> 00:08:35,719
in<font color="#E5E5E5"> trace route but it's still</font><font color="#CCCCCC"> happening</font>

226
00:08:34,429 --> 00:08:37,218
<font color="#CCCCCC">if</font><font color="#E5E5E5"> the packets are still going down</font>

227
00:08:35,719 --> 00:08:40,039
specific paths and

228
00:08:37,219 --> 00:08:43,069
so consider the case where one<font color="#E5E5E5"> member of</font>

229
00:08:40,039 --> 00:08:45,290
a<font color="#CCCCCC"> four-member</font><font color="#E5E5E5"> link</font><font color="#CCCCCC"> Agora group</font><font color="#E5E5E5"> a lag is</font>

230
00:08:43,068 --> 00:08:47,420
bad and<font color="#CCCCCC"> you</font><font color="#E5E5E5"> start seeing</font><font color="#CCCCCC"> 1 out of every</font>

231
00:08:45,290 --> 00:08:48,980
<font color="#CCCCCC">4 packets drop you have no visibility</font>

232
00:08:47,420 --> 00:08:50,569
<font color="#CCCCCC">into that to you it</font><font color="#E5E5E5"> looks like the same</font>

233
00:08:48,980 --> 00:08:52,790
path<font color="#CCCCCC"> but it's</font><font color="#E5E5E5"> not it's</font><font color="#CCCCCC"> actually going</font>

234
00:08:50,569 --> 00:08:54,469
over<font color="#CCCCCC"> two different paths</font><font color="#E5E5E5"> and which path</font>

235
00:08:52,790 --> 00:08:56,449
that goes<font color="#E5E5E5"> over can depend on your IP</font>

236
00:08:54,470 --> 00:08:58,310
address<font color="#CCCCCC"> or</font><font color="#E5E5E5"> your port and so that's where</font>

237
00:08:56,449 --> 00:08:59,810
<font color="#E5E5E5">you start to see people say I'm having</font>

238
00:08:58,310 --> 00:09:01,008
problems<font color="#E5E5E5"> with this one application but</font>

239
00:08:59,810 --> 00:09:04,239
not this other<font color="#E5E5E5"> application sometimes</font>

240
00:09:01,009 --> 00:09:04,240
<font color="#E5E5E5">it's just random luck of the draw</font>

241
00:09:04,910 --> 00:09:10,759
traceroute latency is calculated by the

242
00:09:09,500 --> 00:09:12,620
the program that's<font color="#E5E5E5"> launching the</font>

243
00:09:10,759 --> 00:09:16,009
traceroute<font color="#CCCCCC"> timestamps</font><font color="#E5E5E5"> when the packet</font>

244
00:09:12,620 --> 00:09:18,680
went out<font color="#E5E5E5"> it timestamps when it gets the</font>

245
00:09:16,009 --> 00:09:21,199
ICMP back<font color="#E5E5E5"> and the difference between the</font>

246
00:09:18,680 --> 00:09:23,540
two is<font color="#CCCCCC"> the round-trip time the router is</font>

247
00:09:21,199 --> 00:09:25,729
along the<font color="#E5E5E5"> paths don't actually do any</font>

248
00:09:23,540 --> 00:09:27,889
processing<font color="#CCCCCC"> at the</font><font color="#E5E5E5"> time the the routers</font>

249
00:09:25,730 --> 00:09:30,410
along<font color="#E5E5E5"> the path don't timestamp it don't</font>

250
00:09:27,889 --> 00:09:32,329
do anything<font color="#E5E5E5"> all they do is reflect some</font>

251
00:09:30,410 --> 00:09:34,639
<font color="#CCCCCC">of the original packet back to you and</font>

252
00:09:32,329 --> 00:09:36,050
<font color="#CCCCCC">it's ICMP TTL</font><font color="#E5E5E5"> so you've got to</font>

253
00:09:34,639 --> 00:09:38,060
understand that<font color="#E5E5E5"> when you're looking at</font>

254
00:09:36,050 --> 00:09:39,620
the round-trip time<font color="#E5E5E5"> you're looking</font><font color="#CCCCCC"> at</font>

255
00:09:38,060 --> 00:09:40,729
both directions<font color="#CCCCCC"> even though the</font>

256
00:09:39,620 --> 00:09:43,100
<font color="#CCCCCC">traceroute is only</font><font color="#E5E5E5"> showing you the</font>

257
00:09:40,730 --> 00:09:47,809
<font color="#E5E5E5">forward direction and that's more on</font>

258
00:09:43,100 --> 00:09:49,459
that later so it helps to know what hops

259
00:09:47,809 --> 00:09:51,259
you're seeing in a trash out so here's a

260
00:09:49,459 --> 00:09:55,008
here's<font color="#CCCCCC"> a diagram of a simple</font><font color="#E5E5E5"> trace route</font>

261
00:09:51,259 --> 00:09:57,350
starting from a single<font color="#E5E5E5"> source going</font>

262
00:09:55,009 --> 00:10:01,009
through two routers<font color="#CCCCCC"> and what you're</font>

263
00:09:57,350 --> 00:10:03,410
seeing is the ingress router interface

264
00:10:01,009 --> 00:10:06,199
at every point<font color="#E5E5E5"> so for example in this</font>

265
00:10:03,410 --> 00:10:08,899
<font color="#CCCCCC">case the packet comes in is dropped by</font>

266
00:10:06,199 --> 00:10:10,609
router<font color="#CCCCCC"> 1 the address</font><font color="#E5E5E5"> that it's going to</font>

267
00:10:08,899 --> 00:10:12,019
send<font color="#CCCCCC"> its ICMP back on which is how</font>

268
00:10:10,610 --> 00:10:14,000
<font color="#CCCCCC">tracer all</font><font color="#E5E5E5"> it's going</font><font color="#CCCCCC"> to detect the hop</font>

269
00:10:12,019 --> 00:10:18,230
<font color="#E5E5E5">is going to be the ingress interface the</font>

270
00:10:14,000 --> 00:10:20,839
<font color="#CCCCCC">172 16.2 dot 1 in</font><font color="#E5E5E5"> this example it's not</font>

271
00:10:18,230 --> 00:10:22,279
going to show you<font color="#E5E5E5"> the egress interface</font>

272
00:10:20,839 --> 00:10:23,930
<font color="#E5E5E5">it's not going to show you the return</font>

273
00:10:22,279 --> 00:10:25,790
<font color="#E5E5E5">interface it's going to show you the</font>

274
00:10:23,930 --> 00:10:27,410
ingress interface and then the second

275
00:10:25,790 --> 00:10:29,059
router does the same thing so<font color="#CCCCCC"> in this</font>

276
00:10:27,410 --> 00:10:30,680
<font color="#CCCCCC">diagram you</font><font color="#E5E5E5"> can</font><font color="#CCCCCC"> see the two hops that</font>

277
00:10:29,059 --> 00:10:33,069
it's<font color="#E5E5E5"> going to show you and you</font><font color="#CCCCCC"> can see</font>

278
00:10:30,680 --> 00:10:35,239
the hops<font color="#E5E5E5"> that it's not going to show you</font>

279
00:10:33,069 --> 00:10:37,519
you<font color="#E5E5E5"> know you've got to realize</font><font color="#CCCCCC"> that</font>

280
00:10:35,240 --> 00:10:40,730
there's no<font color="#E5E5E5"> visibility into the egress</font>

281
00:10:37,519 --> 00:10:42,079
paths the return paths<font color="#CCCCCC"> and another</font>

282
00:10:40,730 --> 00:10:43,970
random factoid<font color="#E5E5E5"> this is actually a</font>

283
00:10:42,079 --> 00:10:47,000
non-standard behavior if you<font color="#E5E5E5"> if you go</font>

284
00:10:43,970 --> 00:10:48,740
look at RFC 1812 which as<font color="#CCCCCC"> far as I can</font>

285
00:10:47,000 --> 00:10:49,820
tell<font color="#E5E5E5"> has never been updated it actually</font>

286
00:10:48,740 --> 00:10:51,620
says

287
00:10:49,820 --> 00:10:53,840
<font color="#E5E5E5">it should source from the egress</font>

288
00:10:51,620 --> 00:10:56,540
interface of the ICMP not the ingress

289
00:10:53,840 --> 00:10:59,270
interface of the original Datagram<font color="#E5E5E5"> so</font>

290
00:10:56,540 --> 00:11:00,770
it's kind of a weird<font color="#CCCCCC"> de facto</font><font color="#E5E5E5"> standard</font>

291
00:10:59,270 --> 00:11:01,790
that we don't actually follow the

292
00:11:00,770 --> 00:11:06,110
standards<font color="#E5E5E5"> and that's what make</font><font color="#CCCCCC"> trips</font>

293
00:11:01,790 --> 00:11:08,569
don't work<font color="#CCCCCC"> so interpreting DNS and</font>

294
00:11:06,110 --> 00:11:10,400
tracer is one of the most important

295
00:11:08,570 --> 00:11:11,860
things<font color="#E5E5E5"> that you</font><font color="#CCCCCC"> can learn</font><font color="#E5E5E5"> to</font>

296
00:11:10,400 --> 00:11:14,600
troubleshoot<font color="#E5E5E5"> traceroute correctly</font>

297
00:11:11,860 --> 00:11:16,280
<font color="#E5E5E5">because from looking at</font><font color="#CCCCCC"> DNS you can</font>

298
00:11:14,600 --> 00:11:20,960
figure out where these<font color="#E5E5E5"> routers are</font>

299
00:11:16,280 --> 00:11:22,520
located<font color="#CCCCCC"> be it</font><font color="#E5E5E5"> city state country you can</font>

300
00:11:20,960 --> 00:11:24,710
<font color="#E5E5E5">figure out sometimes if it's an inequity</font>

301
00:11:22,520 --> 00:11:26,870
<font color="#CCCCCC">facility or a</font><font color="#E5E5E5"> pax facility or you know</font>

302
00:11:24,710 --> 00:11:28,640
you can<font color="#E5E5E5"> find out some details</font><font color="#CCCCCC"> there you</font>

303
00:11:26,870 --> 00:11:31,520
can figure<font color="#E5E5E5"> out what the interface type</font>

304
00:11:28,640 --> 00:11:33,080
is what the capacity<font color="#CCCCCC"> is you can</font><font color="#E5E5E5"> figure</font>

305
00:11:31,520 --> 00:11:34,790
out what the router type is you can

306
00:11:33,080 --> 00:11:36,790
figure out<font color="#E5E5E5"> if it's appearing router or</font>

307
00:11:34,790 --> 00:11:40,189
core router or customer<font color="#E5E5E5"> read your router</font>

308
00:11:36,790 --> 00:11:41,689
<font color="#E5E5E5">you can figure</font><font color="#CCCCCC"> out if the network</font>

309
00:11:40,190 --> 00:11:43,340
boundary and<font color="#CCCCCC"> relationships</font><font color="#E5E5E5"> so you can</font>

310
00:11:41,690 --> 00:11:45,830
you<font color="#E5E5E5"> can see the</font><font color="#CCCCCC"> d</font><font color="#E5E5E5"> mark point between</font>

311
00:11:43,340 --> 00:11:47,570
<font color="#E5E5E5">network a and network B and then you can</font>

312
00:11:45,830 --> 00:11:48,830
see is<font color="#E5E5E5"> this a transit relationship is</font>

313
00:11:47,570 --> 00:11:51,620
this a<font color="#E5E5E5"> peer relationship is this</font><font color="#CCCCCC"> a</font>

314
00:11:48,830 --> 00:11:53,930
customer<font color="#CCCCCC"> relationship and what you can</font>

315
00:11:51,620 --> 00:11:55,580
<font color="#E5E5E5">deduce from</font><font color="#CCCCCC"> dns really is essential to</font>

316
00:11:53,930 --> 00:11:58,400
figuring out what's going<font color="#E5E5E5"> on</font><font color="#CCCCCC"> and</font>

317
00:11:55,580 --> 00:12:01,910
<font color="#CCCCCC">traceroute</font><font color="#E5E5E5"> why do you need to know</font>

318
00:11:58,400 --> 00:12:03,890
geographical locations<font color="#CCCCCC"> well first off</font>

319
00:12:01,910 --> 00:12:06,350
<font color="#E5E5E5">you need it to identify</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> correct</font><font color="#CCCCCC"> or</font>

320
00:12:03,890 --> 00:12:08,720
suboptimal routing<font color="#CCCCCC"> for example if you're</font>

321
00:12:06,350 --> 00:12:10,520
<font color="#CCCCCC">going</font><font color="#E5E5E5"> from Atlanta to Miami and</font><font color="#CCCCCC"> you see</font>

322
00:12:08,720 --> 00:12:12,140
a hop in the middle in New York there's

323
00:12:10,520 --> 00:12:14,360
probably a<font color="#E5E5E5"> problem there and that's</font>

324
00:12:12,140 --> 00:12:17,110
probably<font color="#E5E5E5"> some some routing issue that</font>

325
00:12:14,360 --> 00:12:20,360
you know you could get addressed

326
00:12:17,110 --> 00:12:22,460
sometimes<font color="#CCCCCC"> tile agency is justified 100</font>

327
00:12:20,360 --> 00:12:24,800
milliseconds across an ocean may<font color="#E5E5E5"> be the</font>

328
00:12:22,460 --> 00:12:26,720
fastest path<font color="#CCCCCC"> possible sometimes it's not</font>

329
00:12:24,800 --> 00:12:28,939
sometimes<font color="#E5E5E5"> it may be congestion sometimes</font>

330
00:12:26,720 --> 00:12:30,680
it may<font color="#E5E5E5"> be suboptimal</font><font color="#CCCCCC"> routing so</font><font color="#E5E5E5"> you've</font>

331
00:12:28,940 --> 00:12:32,660
got<font color="#E5E5E5"> to understand what it should</font><font color="#CCCCCC"> be and</font>

332
00:12:30,680 --> 00:12:36,620
what it should<font color="#CCCCCC"> be is largely determined</font>

333
00:12:32,660 --> 00:12:39,920
by geographical<font color="#E5E5E5"> distance so the most</font>

334
00:12:36,620 --> 00:12:44,810
commonly used identifiers are the IATA

335
00:12:39,920 --> 00:12:46,910
airport codes<font color="#CCCCCC"> CL Li code silly codes and</font>

336
00:12:44,810 --> 00:12:49,640
then non-standard abbreviations that<font color="#E5E5E5"> are</font>

337
00:12:46,910 --> 00:12:51,560
<font color="#CCCCCC">kind of</font><font color="#E5E5E5"> close to</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> English name</font><font color="#CCCCCC"> and</font>

338
00:12:49,640 --> 00:12:56,060
then sometimes<font color="#E5E5E5"> you just have to kind of</font>

339
00:12:51,560 --> 00:12:58,339
guess<font color="#E5E5E5"> I</font><font color="#CCCCCC"> eta airport codes are a good</font>

340
00:12:56,060 --> 00:12:59,869
choice<font color="#CCCCCC"> they have a lot of international</font>

341
00:12:58,340 --> 00:13:02,250
<font color="#CCCCCC">coverage if there's a major city</font>

342
00:12:59,870 --> 00:13:03,570
somewhere<font color="#CCCCCC"> ARDS</font><font color="#E5E5E5"> odds are it has</font>

343
00:13:02,250 --> 00:13:05,520
Airport<font color="#E5E5E5"> as an airport code it has</font><font color="#CCCCCC"> a</font>

344
00:13:03,570 --> 00:13:09,240
standard<font color="#CCCCCC"> three-letter code that's unique</font>

345
00:13:05,520 --> 00:13:13,350
<font color="#CCCCCC">that</font><font color="#E5E5E5"> you can use</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> not as effective</font>

346
00:13:09,240 --> 00:13:15,690
<font color="#E5E5E5">as covering less</font><font color="#CCCCCC"> well-developed</font><font color="#E5E5E5"> areas</font>

347
00:13:13,350 --> 00:13:17,390
covering a large number<font color="#CCCCCC"> of smaller</font>

348
00:13:15,690 --> 00:13:21,030
<font color="#E5E5E5">cities but if you're just talking about</font>

349
00:13:17,390 --> 00:13:23,130
a handful<font color="#E5E5E5"> of very large pops it can be</font>

350
00:13:21,030 --> 00:13:25,260
perfectly<font color="#E5E5E5"> acceptable</font><font color="#CCCCCC"> so for</font><font color="#E5E5E5"> example</font>

351
00:13:23,130 --> 00:13:27,689
Dallas Texas is DFW which stands<font color="#E5E5E5"> for</font>

352
00:13:25,260 --> 00:13:29,670
<font color="#E5E5E5">Dallas Fort Worth</font><font color="#CCCCCC"> you might not know the</font>

353
00:13:27,690 --> 00:13:31,350
DFW<font color="#E5E5E5"> is Dallas but you can go look it up</font>

354
00:13:29,670 --> 00:13:35,729
you can go<font color="#CCCCCC"> google DFW and</font><font color="#E5E5E5"> you can see</font>

355
00:13:31,350 --> 00:13:38,280
that's Dallas<font color="#E5E5E5"> San Jose SJC etc sometimes</font>

356
00:13:35,730 --> 00:13:40,290
<font color="#E5E5E5">these things are</font><font color="#CCCCCC"> represented by pseudo</font>

357
00:13:38,280 --> 00:13:42,750
airport codes<font color="#CCCCCC"> where the airport code</font>

358
00:13:40,290 --> 00:13:45,240
itself is<font color="#E5E5E5"> not</font><font color="#CCCCCC"> very intuitive</font><font color="#E5E5E5"> or where</font>

359
00:13:42,750 --> 00:13:48,090
there's multiple airport codes<font color="#E5E5E5"> so for</font>

360
00:13:45,240 --> 00:13:51,990
example New York is covered by JFK

361
00:13:48,090 --> 00:13:53,610
<font color="#E5E5E5">LaGuardia and Newark</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> you might</font><font color="#CCCCCC"> just</font>

362
00:13:51,990 --> 00:13:55,740
see someone rather than try to break<font color="#E5E5E5"> out</font>

363
00:13:53,610 --> 00:13:57,120
<font color="#E5E5E5">to</font><font color="#CCCCCC"> JFK</font><font color="#E5E5E5"> and LGA which might not be</font>

364
00:13:55,740 --> 00:13:59,790
intuitive you might see someone<font color="#CCCCCC"> just</font>

365
00:13:57,120 --> 00:14:01,500
call it<font color="#E5E5E5"> NYC which is actually a pseudo</font>

366
00:13:59,790 --> 00:14:02,480
<font color="#CCCCCC">airport code</font><font color="#E5E5E5"> it's representative of the</font>

367
00:14:01,500 --> 00:14:05,760
entire<font color="#E5E5E5"> region</font>

368
00:14:02,480 --> 00:14:08,250
<font color="#CCCCCC">similarly in DC there's multiple there's</font>

369
00:14:05,760 --> 00:14:09,689
there's ie<font color="#E5E5E5"> D</font><font color="#CCCCCC"> in Dulles there's</font><font color="#E5E5E5"> D</font><font color="#CCCCCC"> CA and</font>

370
00:14:08,250 --> 00:14:14,220
Washington DC you might see that

371
00:14:09,690 --> 00:14:17,460
<font color="#E5E5E5">represented by w DC</font><font color="#CCCCCC"> the other option</font>

372
00:14:14,220 --> 00:14:19,740
<font color="#CCCCCC">that networks used are silly codes so</font>

373
00:14:17,460 --> 00:14:22,620
the silly codes<font color="#CCCCCC"> are the common language</font>

374
00:14:19,740 --> 00:14:25,740
location identifier<font color="#E5E5E5"> it's a telco spec</font>

375
00:14:22,620 --> 00:14:29,640
that's currently maintained and sold by

376
00:14:25,740 --> 00:14:32,490
telcordia<font color="#E5E5E5"> it's intended for phone</font>

377
00:14:29,640 --> 00:14:34,439
companies mapping all the<font color="#CCCCCC"> way down to</font>

378
00:14:32,490 --> 00:14:37,770
you know their CEO and their switches

379
00:14:34,440 --> 00:14:40,500
<font color="#E5E5E5">and their their panels and positions</font><font color="#CCCCCC"> but</font>

380
00:14:37,770 --> 00:14:42,960
it has the very convenient attribute of

381
00:14:40,500 --> 00:14:46,290
the first six characters<font color="#E5E5E5"> being a</font>

382
00:14:42,960 --> 00:14:49,470
standardized very very well maintained

383
00:14:46,290 --> 00:14:52,650
list of cities and states called geo

384
00:14:49,470 --> 00:14:56,040
political and geographical location

385
00:14:52,650 --> 00:14:58,140
identifiers which make really good you

386
00:14:56,040 --> 00:14:59,819
router naming conventions and<font color="#E5E5E5"> and things</font>

387
00:14:58,140 --> 00:15:02,370
that<font color="#E5E5E5"> you'll</font><font color="#CCCCCC"> see in traceroute so for</font>

388
00:14:59,820 --> 00:15:03,570
example Houston Texas<font color="#CCCCCC"> HST and TX and you</font>

389
00:15:02,370 --> 00:15:06,270
<font color="#E5E5E5">can google</font><font color="#CCCCCC"> that and</font><font color="#E5E5E5"> you can see that</font>

390
00:15:03,570 --> 00:15:07,770
<font color="#E5E5E5">that's used in Texas</font><font color="#CCCCCC"> and it might also</font>

391
00:15:06,270 --> 00:15:09,569
cover cities that are outside<font color="#CCCCCC"> of Houston</font>

392
00:15:07,770 --> 00:15:13,140
they don't have their own airports<font color="#CCCCCC"> so if</font>

393
00:15:09,570 --> 00:15:16,290
you're you're<font color="#E5E5E5"> talking about</font><font color="#CCCCCC"> someone</font><font color="#E5E5E5"> with</font>

394
00:15:13,140 --> 00:15:19,350
<font color="#CCCCCC">a lot of smaller pops</font><font color="#E5E5E5"> you'll see</font>

395
00:15:16,290 --> 00:15:21,269
<font color="#CCCCCC">le codes used more often basically they</font>

396
00:15:19,350 --> 00:15:23,220
have<font color="#E5E5E5"> very complete coverage of North</font>

397
00:15:21,269 --> 00:15:26,339
America and very incomplete coverage

398
00:15:23,220 --> 00:15:28,949
everywhere<font color="#CCCCCC"> else</font><font color="#E5E5E5"> because it's a US and</font>

399
00:15:26,339 --> 00:15:31,110
Canada it's a North American<font color="#E5E5E5"> naming</font>

400
00:15:28,949 --> 00:15:32,939
standard<font color="#CCCCCC"> so there's some providers that</font>

401
00:15:31,110 --> 00:15:33,959
have actually<font color="#CCCCCC"> made up I'm not</font><font color="#E5E5E5"> sure if</font>

402
00:15:32,940 --> 00:15:35,579
there's<font color="#E5E5E5"> any kind of standardization</font>

403
00:15:33,959 --> 00:15:36,630
behind<font color="#E5E5E5"> this at all but I've seen some</font>

404
00:15:35,579 --> 00:15:39,089
<font color="#E5E5E5">providers that have made up</font>

405
00:15:36,630 --> 00:15:42,689
international<font color="#E5E5E5"> codes</font><font color="#CCCCCC"> they kind of fit the</font>

406
00:15:39,089 --> 00:15:44,069
<font color="#E5E5E5">same thing but it's</font><font color="#CCCCCC"> primarily if you're</font>

407
00:15:42,690 --> 00:15:46,319
<font color="#CCCCCC">a</font><font color="#E5E5E5"> North</font><font color="#CCCCCC"> American</font><font color="#E5E5E5"> based</font><font color="#CCCCCC"> network that's</font>

408
00:15:44,069 --> 00:15:47,490
where you're<font color="#CCCCCC"> really gonna see these and</font>

409
00:15:46,319 --> 00:15:50,219
then sometimes there's people<font color="#E5E5E5"> that just</font>

410
00:15:47,490 --> 00:15:52,319
<font color="#CCCCCC">make codes up</font><font color="#E5E5E5"> for example sometimes the</font>

411
00:15:50,220 --> 00:15:54,089
airport codes aren't<font color="#E5E5E5"> very intuitive</font><font color="#CCCCCC"> so</font>

412
00:15:52,319 --> 00:15:56,699
<font color="#CCCCCC">Chicago for example is served by two</font>

413
00:15:54,089 --> 00:15:58,440
airports<font color="#E5E5E5"> O'Hare and Midway</font><font color="#CCCCCC"> and if you</font>

414
00:15:56,699 --> 00:16:01,139
saw<font color="#E5E5E5"> ard and</font><font color="#CCCCCC"> MDW</font>

415
00:15:58,440 --> 00:16:02,910
if you didn't travel<font color="#E5E5E5"> a lot and you</font>

416
00:16:01,139 --> 00:16:07,769
<font color="#E5E5E5">didn't know these were airport codes you</font>

417
00:16:02,910 --> 00:16:10,139
<font color="#CCCCCC">might think so some people</font><font color="#E5E5E5"> for example</font>

418
00:16:07,769 --> 00:16:12,240
<font color="#CCCCCC">we'll just arbitrarily make up we'll</font>

419
00:16:10,139 --> 00:16:14,399
call it CH I<font color="#E5E5E5"> that's not an airport code</font>

420
00:16:12,240 --> 00:16:15,690
it's<font color="#E5E5E5"> not any kind of standard but</font>

421
00:16:14,399 --> 00:16:17,459
they'll<font color="#E5E5E5"> they'll take the ones that are</font>

422
00:16:15,690 --> 00:16:18,509
you know obscure and<font color="#E5E5E5"> they'll turn it</font>

423
00:16:17,459 --> 00:16:20,969
into something<font color="#CCCCCC"> that's a little</font><font color="#E5E5E5"> more</font>

424
00:16:18,509 --> 00:16:24,750
English friendly<font color="#CCCCCC"> another example is</font>

425
00:16:20,970 --> 00:16:27,089
Toronto<font color="#CCCCCC"> where you know YYZ or ytz these</font>

426
00:16:24,750 --> 00:16:28,589
things might<font color="#CCCCCC"> not mean anything to</font><font color="#E5E5E5"> anyone</font>

427
00:16:27,089 --> 00:16:31,740
that didn't know airport codes and so

428
00:16:28,589 --> 00:16:33,360
they might turn it into<font color="#CCCCCC"> T o R it's</font>

429
00:16:31,740 --> 00:16:35,250
generally<font color="#E5E5E5"> based</font><font color="#CCCCCC"> in good</font><font color="#E5E5E5"> intentions it's</font>

430
00:16:33,360 --> 00:16:36,560
based<font color="#E5E5E5"> on people that are</font><font color="#CCCCCC"> are</font><font color="#E5E5E5"> trying to</font>

431
00:16:35,250 --> 00:16:38,639
make things readable and understandable

432
00:16:36,560 --> 00:16:40,500
but<font color="#E5E5E5"> the</font><font color="#CCCCCC"> downside</font><font color="#E5E5E5"> is it doesn't actually</font>

433
00:16:38,639 --> 00:16:42,089
<font color="#E5E5E5">follow a standard so you can't</font>

434
00:16:40,500 --> 00:16:44,750
necessarily<font color="#CCCCCC"> google it but maybe you can</font>

435
00:16:42,089 --> 00:16:49,740
<font color="#E5E5E5">just kind of figure it out on your</font><font color="#CCCCCC"> own</font>

436
00:16:44,750 --> 00:16:52,380
so I have a list of the major US cities

437
00:16:49,740 --> 00:16:54,360
that are important for IP and the

438
00:16:52,380 --> 00:16:56,760
airport codes<font color="#E5E5E5"> that you might see the</font>

439
00:16:54,360 --> 00:16:59,339
silly codes that you might see and a lot

440
00:16:56,760 --> 00:17:02,040
<font color="#CCCCCC">of the common names</font><font color="#E5E5E5"> so for example</font>

441
00:16:59,339 --> 00:17:03,870
<font color="#CCCCCC">Dallas is another one where DFW might</font>

442
00:17:02,040 --> 00:17:07,049
not make<font color="#E5E5E5"> sense but some people call it</font>

443
00:17:03,870 --> 00:17:08,970
<font color="#CCCCCC">DL and you can kind of try to</font><font color="#E5E5E5"> reverse</font>

444
00:17:07,049 --> 00:17:11,069
<font color="#E5E5E5">engineer</font><font color="#CCCCCC"> that but I put this in there is</font>

445
00:17:08,970 --> 00:17:12,689
kind<font color="#E5E5E5"> of a reference guide for people who</font>

446
00:17:11,069 --> 00:17:14,069
are looking at<font color="#E5E5E5"> traceroute trying to</font>

447
00:17:12,689 --> 00:17:16,559
figure out what's<font color="#E5E5E5"> going on they can look</font>

448
00:17:14,069 --> 00:17:19,139
at<font color="#E5E5E5"> this and see see where the packets</font>

449
00:17:16,559 --> 00:17:22,049
are and then here's the the<font color="#CCCCCC"> non-us</font>

450
00:17:19,140 --> 00:17:25,919
<font color="#E5E5E5">cities and the silly codes here I</font><font color="#CCCCCC"> took</font>

451
00:17:22,049 --> 00:17:27,119
from from NTT<font color="#E5E5E5"> because they have a fairly</font>

452
00:17:25,919 --> 00:17:28,230
comprehensive list of them<font color="#E5E5E5"> and like I</font>

453
00:17:27,119 --> 00:17:29,590
said<font color="#CCCCCC"> I have no idea if there's any kind</font>

454
00:17:28,230 --> 00:17:31,600
<font color="#E5E5E5">of standard behind those or not</font>

455
00:17:29,590 --> 00:17:33,220
I don't think<font color="#CCCCCC"> there is but there's</font>

456
00:17:31,600 --> 00:17:36,309
there's an example<font color="#E5E5E5"> of someone who's</font>

457
00:17:33,220 --> 00:17:38,499
using them and generally<font color="#E5E5E5"> speaking you</font>

458
00:17:36,309 --> 00:17:40,539
<font color="#E5E5E5">can kind of breed those and insert some</font>

459
00:17:38,499 --> 00:17:45,159
<font color="#CCCCCC">vowels and</font><font color="#E5E5E5"> figure</font><font color="#CCCCCC"> out what the city name</font>

460
00:17:40,539 --> 00:17:48,490
is<font color="#E5E5E5"> the next thing you</font><font color="#CCCCCC"> can interpret in</font>

461
00:17:45,159 --> 00:17:50,470
<font color="#E5E5E5">DNS is the interface type most networks</font>

462
00:17:48,490 --> 00:17:53,379
will try to put interface info<font color="#E5E5E5"> in DNS</font>

463
00:17:50,470 --> 00:17:57,220
<font color="#E5E5E5">unless they're Google and they won't for</font>

464
00:17:53,379 --> 00:17:58,600
some<font color="#E5E5E5"> inexplicable reason for the most</font>

465
00:17:57,220 --> 00:18:01,240
part<font color="#E5E5E5"> it's to help people troubleshoot</font>

466
00:17:58,600 --> 00:18:03,998
their own network honestly you know no

467
00:18:01,240 --> 00:18:06,940
one<font color="#E5E5E5"> has a handy directory of what this</font>

468
00:18:03,999 --> 00:18:08,200
<font color="#E5E5E5">IP is to what this router is and so</font>

469
00:18:06,940 --> 00:18:09,399
someone<font color="#E5E5E5"> internally oh we're</font><font color="#CCCCCC"> on a</font>

470
00:18:08,200 --> 00:18:10,690
<font color="#E5E5E5">traceroute and then they'll figure out</font>

471
00:18:09,399 --> 00:18:13,840
where their own<font color="#E5E5E5"> router is and let they</font>

472
00:18:10,690 --> 00:18:16,210
look there<font color="#E5E5E5"> but it's also helpful for</font>

473
00:18:13,840 --> 00:18:18,428
<font color="#E5E5E5">people on the Internet in general may</font>

474
00:18:16,210 --> 00:18:21,340
not always be<font color="#CCCCCC"> up-to-date</font><font color="#E5E5E5"> there's some</font>

475
00:18:18,429 --> 00:18:24,539
surprisingly<font color="#E5E5E5"> large networks who don't</font>

476
00:18:21,340 --> 00:18:28,240
keep their<font color="#E5E5E5"> up to date at all example is</font>

477
00:18:24,539 --> 00:18:31,210
<font color="#E5E5E5">very bad</font><font color="#CCCCCC"> about this</font><font color="#E5E5E5"> there's others that</font>

478
00:18:28,240 --> 00:18:33,369
<font color="#E5E5E5">are completely script generated where</font>

479
00:18:31,210 --> 00:18:35,049
there'll be a program<font color="#CCCCCC"> that</font><font color="#E5E5E5"> nightly runs</font>

480
00:18:33,369 --> 00:18:37,330
through the router and<font color="#E5E5E5"> SNMP</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> sets all</font>

481
00:18:35,049 --> 00:18:39,429
<font color="#CCCCCC">the DNS</font><font color="#E5E5E5"> pointers based on what the</font>

482
00:18:37,330 --> 00:18:41,168
routers actually are I think that's a

483
00:18:39,429 --> 00:18:42,850
much better<font color="#E5E5E5"> way to do that and it's it's</font>

484
00:18:41,169 --> 00:18:44,440
presently simple to do<font color="#E5E5E5"> that so I mean I</font>

485
00:18:42,850 --> 00:18:46,299
really<font color="#CCCCCC"> encourage anyone that's running a</font>

486
00:18:44,440 --> 00:18:48,759
big<font color="#CCCCCC"> network to take</font><font color="#E5E5E5"> the time to set</font>

487
00:18:46,299 --> 00:18:52,330
their their<font color="#E5E5E5"> DNS correctly because it's</font>

488
00:18:48,759 --> 00:18:54,669
<font color="#E5E5E5">helpful</font><font color="#CCCCCC"> you can</font><font color="#E5E5E5"> help figure out the</font><font color="#CCCCCC"> type</font>

489
00:18:52,330 --> 00:18:55,840
of interface<font color="#E5E5E5"> and sometimes you can</font><font color="#CCCCCC"> even</font>

490
00:18:54,669 --> 00:18:58,629
figure<font color="#E5E5E5"> out what the make and the model</font>

491
00:18:55,840 --> 00:19:02,619
of<font color="#E5E5E5"> the router is so for example this is</font>

492
00:18:58,629 --> 00:19:08,168
this is a real example<font color="#E5E5E5"> from level 3 XD -</font>

493
00:19:02,619 --> 00:19:11,139
11 -<font color="#E5E5E5"> 1 -</font><font color="#CCCCCC"> oh is the XE - is a</font><font color="#E5E5E5"> naming</font>

494
00:19:08,169 --> 00:19:14,619
scheme from<font color="#E5E5E5"> a Juniper router and because</font>

495
00:19:11,139 --> 00:19:16,689
it has<font color="#E5E5E5"> the second number is</font><font color="#CCCCCC"> not a</font><font color="#E5E5E5"> zero</font>

496
00:19:14,619 --> 00:19:20,649
<font color="#E5E5E5">that means that</font><font color="#CCCCCC"> it can't be</font><font color="#E5E5E5"> a single</font>

497
00:19:16,690 --> 00:19:22,600
<font color="#E5E5E5">port a single slot card it</font><font color="#CCCCCC"> has to have</font>

498
00:19:20,649 --> 00:19:25,449
at<font color="#CCCCCC"> least</font><font color="#E5E5E5"> two</font><font color="#CCCCCC"> 10 gig ports in there and</font>

499
00:19:22,600 --> 00:19:26,980
because it has<font color="#CCCCCC"> at least 12 slots</font><font color="#E5E5E5"> you</font>

500
00:19:25,450 --> 00:19:29,409
pretty much know that<font color="#E5E5E5"> it's a Juniper</font>

501
00:19:26,980 --> 00:19:33,369
<font color="#CCCCCC">hand-mix 960 no other router happens to</font>

502
00:19:29,409 --> 00:19:35,230
<font color="#E5E5E5">fit that naming scheme so I have a list</font>

503
00:19:33,369 --> 00:19:37,869
of naming conventions here that you're

504
00:19:35,230 --> 00:19:40,000
most likely to<font color="#E5E5E5"> see there's the the</font>

505
00:19:37,869 --> 00:19:40,800
standard naming<font color="#E5E5E5"> convention that Cisco</font>

506
00:19:40,000 --> 00:19:43,050
uses

507
00:19:40,800 --> 00:19:48,750
which is<font color="#E5E5E5"> basically the first two letters</font>

508
00:19:43,050 --> 00:19:50,510
of<font color="#E5E5E5"> the interface name so like</font><font color="#CCCCCC"> fasty</font><font color="#E5E5E5"> some</font>

509
00:19:48,750 --> 00:19:53,040
people would expect<font color="#E5E5E5"> that</font><font color="#CCCCCC"> to be Effie</font>

510
00:19:50,510 --> 00:19:56,129
<font color="#CCCCCC">Cisco uses FA</font><font color="#E5E5E5"> because it's the first two</font>

511
00:19:53,040 --> 00:20:00,210
letters of fast<font color="#E5E5E5"> GI for a gigabit same</font>

512
00:19:56,130 --> 00:20:03,180
thing<font color="#E5E5E5"> but you'll see these codes used in</font>

513
00:20:00,210 --> 00:20:05,610
DNS<font color="#E5E5E5"> because that just happens to be the</font>

514
00:20:03,180 --> 00:20:08,130
standard<font color="#E5E5E5"> and it helps you figure out you</font>

515
00:20:05,610 --> 00:20:09,510
<font color="#CCCCCC">know what link speed</font><font color="#E5E5E5"> this</font><font color="#CCCCCC"> is what type</font>

516
00:20:08,130 --> 00:20:11,640
of<font color="#E5E5E5"> interface this is</font><font color="#CCCCCC"> it could really</font>

517
00:20:09,510 --> 00:20:13,260
<font color="#E5E5E5">help you figure</font><font color="#CCCCCC"> out if this is</font><font color="#E5E5E5"> just an</font>

518
00:20:11,640 --> 00:20:15,200
<font color="#E5E5E5">over</font><font color="#CCCCCC"> subscribe link or if this</font><font color="#E5E5E5"> should be</font>

519
00:20:13,260 --> 00:20:17,640
going here<font color="#E5E5E5"> this shouldn't be</font><font color="#CCCCCC"> going</font><font color="#E5E5E5"> here</font>

520
00:20:15,200 --> 00:20:19,980
<font color="#E5E5E5">so it's good to know and the only the</font>

521
00:20:17,640 --> 00:20:21,990
<font color="#CCCCCC">only</font><font color="#E5E5E5"> real disclaimer</font><font color="#CCCCCC"> on here is some</font><font color="#E5E5E5"> of</font>

522
00:20:19,980 --> 00:20:24,240
the early<font color="#CCCCCC"> juniper 10-gig interfaces for</font>

523
00:20:21,990 --> 00:20:27,660
some unknown reason<font color="#E5E5E5"> we're actually named</font>

524
00:20:24,240 --> 00:20:30,180
GE<font color="#CCCCCC"> instead of XE but they fix that in</font>

525
00:20:27,660 --> 00:20:31,920
later<font color="#E5E5E5"> revisions so if you see that if</font>

526
00:20:30,180 --> 00:20:35,330
<font color="#E5E5E5">you see a G</font><font color="#CCCCCC"> you don't necessarily</font><font color="#E5E5E5"> Frank</font>

527
00:20:31,920 --> 00:20:39,780
<font color="#CCCCCC">oh no it's a gig e</font><font color="#E5E5E5"> it might actually be</font>

528
00:20:35,330 --> 00:20:41,610
<font color="#CCCCCC">ten gig the</font><font color="#E5E5E5"> other thing you can</font>

529
00:20:39,780 --> 00:20:45,050
determine obviously is<font color="#E5E5E5"> the router type</font>

530
00:20:41,610 --> 00:20:48,030
<font color="#E5E5E5">and roles</font><font color="#CCCCCC"> which could be pretty</font><font color="#E5E5E5"> helpful</font>

531
00:20:45,050 --> 00:20:51,720
<font color="#CCCCCC">problem</font><font color="#E5E5E5"> being every network has its own</font>

532
00:20:48,030 --> 00:20:54,000
<font color="#E5E5E5">naming convention</font><font color="#CCCCCC"> a lot</font><font color="#E5E5E5"> of the times you</font>

533
00:20:51,720 --> 00:20:56,400
just<font color="#E5E5E5"> have to either have some some idea</font>

534
00:20:54,000 --> 00:20:58,800
about<font color="#E5E5E5"> the network or kind of guess if</font>

535
00:20:56,400 --> 00:21:01,560
you start to see<font color="#E5E5E5"> things that are cooler</font>

536
00:20:58,800 --> 00:21:05,340
out or<font color="#CCCCCC"> core gigabit backbone router</font>

537
00:21:01,560 --> 00:21:08,429
backbone<font color="#CCCCCC"> core Ethernet</font><font color="#E5E5E5"> Internet backbone</font>

538
00:21:05,340 --> 00:21:10,439
router<font color="#E5E5E5"> or some examples some of</font><font color="#CCCCCC"> these</font>

539
00:21:08,430 --> 00:21:11,490
might not<font color="#E5E5E5"> you might look at EBR and</font>

540
00:21:10,440 --> 00:21:13,470
think border router

541
00:21:11,490 --> 00:21:14,820
<font color="#CCCCCC">unless you happen to know that</font><font color="#E5E5E5"> it's an</font>

542
00:21:13,470 --> 00:21:16,560
Ethernet backbone router so some of

543
00:21:14,820 --> 00:21:18,060
<font color="#E5E5E5">these things are very</font><font color="#CCCCCC"> confusing and</font>

544
00:21:16,560 --> 00:21:19,290
really<font color="#E5E5E5"> it's</font><font color="#CCCCCC"> the kind of the kind of</font>

545
00:21:18,060 --> 00:21:21,270
thing you build with experience and

546
00:21:19,290 --> 00:21:22,710
<font color="#E5E5E5">knowing these networks is knowing what</font>

547
00:21:21,270 --> 00:21:25,020
type of<font color="#E5E5E5"> router you're going through on</font>

548
00:21:22,710 --> 00:21:26,630
their side<font color="#CCCCCC"> a lot</font><font color="#E5E5E5"> of peering routers are</font>

549
00:21:25,020 --> 00:21:29,310
called border routers borders<font color="#E5E5E5"> edge</font>

550
00:21:26,630 --> 00:21:32,340
<font color="#E5E5E5">Internet routers interconnection routers</font>

551
00:21:29,310 --> 00:21:34,290
Internet gateway routers peers<font color="#CCCCCC"> a lot of</font>

552
00:21:32,340 --> 00:21:37,530
customer routers are called aggregation

553
00:21:34,290 --> 00:21:39,389
routers a<font color="#CCCCCC"> Gers</font><font color="#E5E5E5"> customer routers customer</font>

554
00:21:37,530 --> 00:21:40,740
access routers<font color="#E5E5E5"> high-speed access and</font>

555
00:21:39,390 --> 00:21:44,810
gateways things like that these<font color="#E5E5E5"> are</font>

556
00:21:40,740 --> 00:21:44,810
<font color="#E5E5E5">these</font><font color="#CCCCCC"> are very common naming</font><font color="#E5E5E5"> conventions</font>

557
00:21:44,990 --> 00:21:48,660
<font color="#CCCCCC">the next thing that you really need to</font>

558
00:21:47,190 --> 00:21:50,940
identify<font color="#E5E5E5"> and this is probably</font><font color="#CCCCCC"> the most</font>

559
00:21:48,660 --> 00:21:53,370
important aspect<font color="#CCCCCC"> of traceroute is</font>

560
00:21:50,940 --> 00:21:55,289
figuring out network bound

561
00:21:53,370 --> 00:21:58,350
the reason being<font color="#CCCCCC"> Network boundaries are</font>

562
00:21:55,289 --> 00:22:00,480
aware the policies tend to change<font color="#E5E5E5"> so for</font>

563
00:21:58,350 --> 00:22:02,668
<font color="#CCCCCC">example when you cross between level 3</font>

564
00:22:00,480 --> 00:22:03,960
<font color="#E5E5E5">and AT&T</font><font color="#CCCCCC"> they're gonna have completely</font>

565
00:22:02,669 --> 00:22:05,909
different routing<font color="#E5E5E5"> policies and the</font>

566
00:22:03,960 --> 00:22:07,350
instant that packet gets<font color="#E5E5E5"> off</font><font color="#CCCCCC"> Level 3's</font>

567
00:22:05,909 --> 00:22:09,179
<font color="#CCCCCC">Network and goes to a TNT's</font><font color="#E5E5E5"> network</font>

568
00:22:07,350 --> 00:22:10,559
guess what you're<font color="#E5E5E5"> gonna expect a</font>

569
00:22:09,179 --> 00:22:12,929
different return<font color="#E5E5E5"> path because they have</font>

570
00:22:10,559 --> 00:22:16,309
different<font color="#E5E5E5"> routing policies so</font>

571
00:22:12,929 --> 00:22:18,539
identifying these<font color="#E5E5E5"> things is</font><font color="#CCCCCC"> really</font>

572
00:22:16,309 --> 00:22:20,250
helpful<font color="#E5E5E5"> to figuring out what the problem</font>

573
00:22:18,539 --> 00:22:22,860
is<font color="#E5E5E5"> it's also an</font><font color="#CCCCCC"> area where</font>

574
00:22:20,250 --> 00:22:24,960
interconnection capacity planning is

575
00:22:22,860 --> 00:22:26,729
hard because it's<font color="#E5E5E5"> too net to companies</font>

576
00:22:24,960 --> 00:22:28,080
who<font color="#CCCCCC"> are working</font><font color="#E5E5E5"> together so it's</font><font color="#CCCCCC"> not</font>

577
00:22:26,730 --> 00:22:31,260
<font color="#CCCCCC">just some</font><font color="#E5E5E5"> internal process there's</font>

578
00:22:28,080 --> 00:22:33,480
there's more<font color="#E5E5E5"> work involved</font><font color="#CCCCCC"> so there's</font>

579
00:22:31,260 --> 00:22:35,070
<font color="#E5E5E5">more likely to be issues there and it</font>

580
00:22:33,480 --> 00:22:36,840
also you<font color="#E5E5E5"> need</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> know who to</font><font color="#CCCCCC"> blame if</font>

581
00:22:35,070 --> 00:22:38,760
you're gonna<font color="#E5E5E5"> open a ticket</font><font color="#CCCCCC"> so</font>

582
00:22:36,840 --> 00:22:41,939
identifying<font color="#E5E5E5"> the border boundary and</font>

583
00:22:38,760 --> 00:22:45,480
identifying who is<font color="#CCCCCC"> at fault</font><font color="#E5E5E5"> is important</font>

584
00:22:41,940 --> 00:22:46,679
and very<font color="#E5E5E5"> often overlooked and then you</font>

585
00:22:45,480 --> 00:22:48,990
need<font color="#E5E5E5"> to identify the type</font><font color="#CCCCCC"> of</font>

586
00:22:46,679 --> 00:22:51,480
relationship or<font color="#E5E5E5"> you can be</font><font color="#CCCCCC"> a transit</font>

587
00:22:48,990 --> 00:22:54,510
<font color="#E5E5E5">provider</font><font color="#CCCCCC"> a peer or customer the best</font>

588
00:22:51,480 --> 00:22:55,950
networks that make this very explicit in

589
00:22:54,510 --> 00:23:00,090
their<font color="#CCCCCC"> DNS</font><font color="#E5E5E5"> they'll say something</font><font color="#CCCCCC"> like</font>

590
00:22:55,950 --> 00:23:02,789
customer name dot customer<font color="#CCCCCC"> it really</font>

591
00:23:00,090 --> 00:23:05,220
helps to know<font color="#CCCCCC"> this is ad mark</font><font color="#E5E5E5"> this is</font>

592
00:23:02,789 --> 00:23:08,250
not not my router this is a customer's

593
00:23:05,220 --> 00:23:09,960
router<font color="#E5E5E5"> so here's some examples</font><font color="#CCCCCC"> sometimes</font>

594
00:23:08,250 --> 00:23:12,419
it's<font color="#E5E5E5"> really easy</font><font color="#CCCCCC"> to spot</font><font color="#E5E5E5"> where the DNS</font>

595
00:23:09,960 --> 00:23:13,919
changes<font color="#E5E5E5"> hey look this was formerly</font><font color="#CCCCCC"> gbx</font>

596
00:23:12,419 --> 00:23:17,669
and now it's<font color="#CCCCCC"> Brent and there's the</font>

597
00:23:13,919 --> 00:23:19,260
border<font color="#E5E5E5"> other times it's</font><font color="#CCCCCC"> not so easy</font><font color="#E5E5E5"> but</font>

598
00:23:17,669 --> 00:23:22,710
you<font color="#E5E5E5"> can look for the other party</font><font color="#CCCCCC"> names</font>

599
00:23:19,260 --> 00:23:25,110
<font color="#E5E5E5">so for example hop fours</font><font color="#CCCCCC"> GBA Lex hop</font>

600
00:23:22,710 --> 00:23:28,320
<font color="#E5E5E5">five says</font><font color="#CCCCCC"> coaching in even though the</font>

601
00:23:25,110 --> 00:23:30,658
<font color="#CCCCCC">name says gb</font><font color="#E5E5E5"> Lex net this is actually</font>

602
00:23:28,320 --> 00:23:32,250
<font color="#E5E5E5">cogent router this is the IP that's</font>

603
00:23:30,659 --> 00:23:33,990
<font color="#E5E5E5">responding is</font><font color="#CCCCCC"> coding throughout or not</font>

604
00:23:32,250 --> 00:23:37,289
<font color="#CCCCCC">gb Alexis</font><font color="#E5E5E5"> it just happens to be the</font>

605
00:23:33,990 --> 00:23:40,710
border<font color="#E5E5E5"> sometimes they'll</font><font color="#CCCCCC"> be no</font><font color="#E5E5E5"> DNS at</font>

606
00:23:37,289 --> 00:23:42,690
all<font color="#CCCCCC"> and you</font><font color="#E5E5E5"> have to figure</font><font color="#CCCCCC"> out</font><font color="#E5E5E5"> for</font>

607
00:23:40,710 --> 00:23:44,909
<font color="#E5E5E5">example</font><font color="#CCCCCC"> in this traceroute</font><font color="#E5E5E5"> is is hop</font>

608
00:23:42,690 --> 00:23:46,889
<font color="#CCCCCC">three</font><font color="#E5E5E5"> the border or is hop for the</font>

609
00:23:44,909 --> 00:23:49,049
border you might not know<font color="#E5E5E5"> and in this</font>

610
00:23:46,889 --> 00:23:50,729
way what you can in this example you<font color="#E5E5E5"> can</font>

611
00:23:49,049 --> 00:23:52,350
do is you can<font color="#CCCCCC"> look up</font><font color="#E5E5E5"> the IP</font><font color="#CCCCCC"> and who is</font>

612
00:23:50,730 --> 00:23:54,659
even though it has no<font color="#E5E5E5"> dns and</font><font color="#CCCCCC"> you can</font>

613
00:23:52,350 --> 00:24:00,059
see well that's owned<font color="#E5E5E5"> by ATT so that's</font>

614
00:23:54,659 --> 00:24:01,559
probably their border<font color="#CCCCCC"> the next thing</font>

615
00:24:00,059 --> 00:24:03,870
that you<font color="#CCCCCC"> can really do to help</font><font color="#E5E5E5"> figure</font>

616
00:24:01,559 --> 00:24:05,730
this out and this<font color="#E5E5E5"> is kind of</font><font color="#CCCCCC"> dependent</font>

617
00:24:03,870 --> 00:24:07,320
on<font color="#E5E5E5"> people</font><font color="#CCCCCC"> using slash</font><font color="#E5E5E5"> 30 so</font>

618
00:24:05,730 --> 00:24:08,639
I'll throw out the<font color="#E5E5E5"> disclaimer that more</font>

619
00:24:07,320 --> 00:24:10,980
<font color="#E5E5E5">and</font><font color="#CCCCCC"> more</font><font color="#E5E5E5"> people are using slash</font><font color="#CCCCCC"> thirty</font>

620
00:24:08,639 --> 00:24:13,649
<font color="#E5E5E5">ones so you</font><font color="#CCCCCC"> should watch out for that</font>

621
00:24:10,980 --> 00:24:15,149
but if they are<font color="#E5E5E5"> using flash 30 so</font><font color="#CCCCCC"> you</font>

622
00:24:13,649 --> 00:24:16,979
can very<font color="#CCCCCC"> easily figure out</font><font color="#E5E5E5"> what the</font>

623
00:24:15,149 --> 00:24:18,268
other side is<font color="#CCCCCC"> and go look up the</font><font color="#E5E5E5"> DNS on</font>

624
00:24:16,980 --> 00:24:21,059
that and that<font color="#E5E5E5"> will give</font><font color="#CCCCCC"> you a lot more</font>

625
00:24:18,269 --> 00:24:23,130
<font color="#E5E5E5">details so in the previous</font><font color="#CCCCCC"> example where</font>

626
00:24:21,059 --> 00:24:24,840
we were talking<font color="#CCCCCC"> about</font><font color="#E5E5E5"> a tracer out here</font>

627
00:24:23,130 --> 00:24:26,760
where hop<font color="#E5E5E5"> five says cogent about</font>

628
00:24:24,840 --> 00:24:29,370
whatever<font color="#E5E5E5"> you can go look up the</font><font color="#CCCCCC"> other</font>

629
00:24:26,760 --> 00:24:31,590
side if you you can just do<font color="#E5E5E5"> this in my</font>

630
00:24:29,370 --> 00:24:32,879
<font color="#E5E5E5">head but if you if you can't there's a</font>

631
00:24:31,590 --> 00:24:34,678
program called<font color="#E5E5E5"> IP caliper there's</font>

632
00:24:32,880 --> 00:24:37,230
various web pages where you<font color="#E5E5E5"> can go type</font>

633
00:24:34,679 --> 00:24:39,720
in<font color="#E5E5E5"> an IP and it'll tell you what the</font>

634
00:24:37,230 --> 00:24:43,110
base interface<font color="#E5E5E5"> so in this case it's six</font>

635
00:24:39,720 --> 00:24:44,940
<font color="#E5E5E5">four two and two dot 107-88 slash 30 and</font>

636
00:24:43,110 --> 00:24:47,610
so<font color="#CCCCCC"> eighty nine is one side and 90 is the</font>

637
00:24:44,940 --> 00:24:50,429
<font color="#CCCCCC">other side so you go look up eighty nine</font>

638
00:24:47,610 --> 00:24:53,219
and you see the egress interface on

639
00:24:50,429 --> 00:24:54,510
<font color="#CCCCCC">Global Crossing so you you have a really</font>

640
00:24:53,220 --> 00:24:55,919
<font color="#E5E5E5">good</font><font color="#CCCCCC"> understanding here from looking at</font>

641
00:24:54,510 --> 00:25:00,840
this you<font color="#CCCCCC"> can see that the fact that came</font>

642
00:24:55,919 --> 00:25:03,600
into their<font color="#E5E5E5"> AR</font><font color="#CCCCCC"> 5</font><font color="#E5E5E5"> DCA 3 router</font><font color="#CCCCCC"> / port</font>

643
00:25:00,840 --> 00:25:07,500
channel<font color="#CCCCCC"> 2</font><font color="#E5E5E5"> and it went out over</font><font color="#CCCCCC"> 10-gig</font>

644
00:25:03,600 --> 00:25:10,049
2/3 and then the other side<font color="#E5E5E5"> of 10-gig</font>

645
00:25:07,500 --> 00:25:12,899
2/3 is<font color="#E5E5E5"> Cochin so even though it says</font>

646
00:25:10,049 --> 00:25:14,279
cogent<font color="#E5E5E5"> in that DNS even if it didn't say</font>

647
00:25:12,899 --> 00:25:17,010
<font color="#CCCCCC">that you should be able</font><font color="#E5E5E5"> to look at this</font>

648
00:25:14,279 --> 00:25:18,870
and determine this is<font color="#E5E5E5"> a</font><font color="#CCCCCC"> Demark and if</font>

649
00:25:17,010 --> 00:25:20,879
there's a problem if there's for<font color="#CCCCCC"> example</font>

650
00:25:18,870 --> 00:25:22,559
high latency starting<font color="#E5E5E5"> on hop</font><font color="#CCCCCC"> 5</font><font color="#E5E5E5"> it's</font>

651
00:25:20,880 --> 00:25:25,799
probably not global crossings fault<font color="#E5E5E5"> or</font>

652
00:25:22,559 --> 00:25:29,158
it very way very<font color="#E5E5E5"> very well</font><font color="#CCCCCC"> may be but it</font>

653
00:25:25,799 --> 00:25:30,629
very well<font color="#E5E5E5"> may be an asymmetric path</font><font color="#CCCCCC"> so</font>

654
00:25:29,159 --> 00:25:33,960
this kind of thing is<font color="#E5E5E5"> common with</font>

655
00:25:30,630 --> 00:25:35,940
private peering what happens is when<font color="#E5E5E5"> you</font>

656
00:25:33,960 --> 00:25:36,330
turn<font color="#CCCCCC"> appear it'll pretty much be a flip</font>

657
00:25:35,940 --> 00:25:39,360
of the coin

658
00:25:36,330 --> 00:25:41,460
who gets the<font color="#E5E5E5"> slash 30 me or</font><font color="#CCCCCC"> them and one</font>

659
00:25:39,360 --> 00:25:43,379
side will give up the<font color="#E5E5E5"> saj 30 and</font>

660
00:25:41,460 --> 00:25:46,049
<font color="#E5E5E5">there'll be one IP and the other net</font>

661
00:25:43,380 --> 00:25:47,490
will<font color="#CCCCCC"> be the other</font><font color="#E5E5E5"> IP but what they won't</font>

662
00:25:46,049 --> 00:25:49,649
do a lot<font color="#CCCCCC"> of the times is get DNS</font>

663
00:25:47,490 --> 00:25:52,289
information<font color="#E5E5E5"> or maintain DNS information</font>

664
00:25:49,649 --> 00:25:54,389
<font color="#E5E5E5">so what will happen</font><font color="#CCCCCC"> is rather than put</font>

665
00:25:52,289 --> 00:25:56,730
the other<font color="#E5E5E5"> side's information in DNS</font>

666
00:25:54,389 --> 00:25:58,229
they'll put their side twice<font color="#CCCCCC"> and</font>

667
00:25:56,730 --> 00:26:00,870
sometimes put a little identifier that

668
00:25:58,230 --> 00:26:02,250
<font color="#CCCCCC">says Cochin</font><font color="#E5E5E5"> but sometimes they won't so</font>

669
00:26:00,870 --> 00:26:05,549
you go look<font color="#CCCCCC"> for that kind of thing to</font>

670
00:26:02,250 --> 00:26:07,320
figure<font color="#E5E5E5"> out where the</font><font color="#CCCCCC"> D mark is next most</font>

671
00:26:05,549 --> 00:26:10,679
important thing understanding<font color="#E5E5E5"> network</font>

672
00:26:07,320 --> 00:26:13,428
latency so this is a big source<font color="#E5E5E5"> of the</font>

673
00:26:10,679 --> 00:26:16,139
<font color="#CCCCCC">traceroute submissions that weekend</font>

674
00:26:13,429 --> 00:26:16,770
<font color="#CCCCCC">basically there's three</font><font color="#E5E5E5"> main sources of</font>

675
00:26:16,139 --> 00:26:19,679
network

676
00:26:16,770 --> 00:26:22,320
that you should care<font color="#CCCCCC"> about</font><font color="#E5E5E5"> the first is</font>

677
00:26:19,680 --> 00:26:24,780
serialization<font color="#E5E5E5"> delay basically that has</font>

678
00:26:22,320 --> 00:26:26,520
to do with<font color="#CCCCCC"> the delay of moving the</font>

679
00:26:24,780 --> 00:26:28,440
packets<font color="#E5E5E5"> through the internet and packet</font>

680
00:26:26,520 --> 00:26:30,150
size chunks because<font color="#CCCCCC"> you can't start</font>

681
00:26:28,440 --> 00:26:31,530
transmitting the next packet until

682
00:26:30,150 --> 00:26:33,240
you've finished<font color="#E5E5E5"> with your</font><font color="#CCCCCC"> first packet</font>

683
00:26:31,530 --> 00:26:34,770
so there's going to be movement<font color="#CCCCCC"> in</font>

684
00:26:33,240 --> 00:26:36,090
discrete networks through the network

685
00:26:34,770 --> 00:26:38,280
<font color="#E5E5E5">and there's gonna be some delay</font>

686
00:26:36,090 --> 00:26:40,080
associated<font color="#CCCCCC"> with</font><font color="#E5E5E5"> that there's queuing</font>

687
00:26:38,280 --> 00:26:42,030
delay<font color="#E5E5E5"> which is</font><font color="#CCCCCC"> the time spent in the</font>

688
00:26:40,080 --> 00:26:44,939
<font color="#CCCCCC">routers queues waiting for transmission</font>

689
00:26:42,030 --> 00:26:47,760
<font color="#E5E5E5">and this is mostly related</font><font color="#CCCCCC"> to full</font>

690
00:26:44,940 --> 00:26:49,230
interfaces<font color="#CCCCCC"> there is a need for</font><font color="#E5E5E5"> queuing</font>

691
00:26:47,760 --> 00:26:51,150
that has<font color="#E5E5E5"> nothing to do with full</font>

692
00:26:49,230 --> 00:26:53,550
interfaces<font color="#CCCCCC"> queuing does serve a useful</font>

693
00:26:51,150 --> 00:26:54,840
function<font color="#E5E5E5"> but when it happens without the</font>

694
00:26:53,550 --> 00:26:56,879
interfaces being full you won't notice

695
00:26:54,840 --> 00:26:57,959
it<font color="#E5E5E5"> if you notice queuing delay it's</font>

696
00:26:56,880 --> 00:27:00,810
because the interfaces<font color="#E5E5E5"> are told</font>

697
00:26:57,960 --> 00:27:03,510
realistically and then the third one<font color="#CCCCCC"> is</font>

698
00:27:00,810 --> 00:27:05,669
<font color="#E5E5E5">propagation delay which is</font><font color="#CCCCCC"> the time that</font>

699
00:27:03,510 --> 00:27:08,160
<font color="#E5E5E5">the packet spins in flight on</font><font color="#CCCCCC"> the wire</font>

700
00:27:05,670 --> 00:27:10,440
and<font color="#E5E5E5"> that's basically</font><font color="#CCCCCC"> a limit of the</font>

701
00:27:08,160 --> 00:27:14,610
speed<font color="#CCCCCC"> of</font><font color="#E5E5E5"> light</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> you know</font>

702
00:27:10,440 --> 00:27:17,430
electromagnetic propagation<font color="#CCCCCC"> so I have</font>

703
00:27:14,610 --> 00:27:19,260
some details<font color="#E5E5E5"> on serialization delay</font><font color="#CCCCCC"> it's</font>

704
00:27:17,430 --> 00:27:21,630
not much of<font color="#CCCCCC"> an</font><font color="#E5E5E5"> issue in modern networks</font>

705
00:27:19,260 --> 00:27:23,310
I mean basically<font color="#E5E5E5"> what's happened is link</font>

706
00:27:21,630 --> 00:27:25,050
speeds are now many orders<font color="#CCCCCC"> of magnitude</font>

707
00:27:23,310 --> 00:27:26,669
faster and packet sizes have stayed the

708
00:27:25,050 --> 00:27:30,360
same and<font color="#E5E5E5"> so it doesn't matter anymore</font>

709
00:27:26,670 --> 00:27:32,250
<font color="#CCCCCC">you run a 1,500 byte packet over</font><font color="#E5E5E5"> a</font><font color="#CCCCCC"> giegi</font>

710
00:27:30,360 --> 00:27:33,629
<font color="#E5E5E5">network and it's point you know</font><font color="#CCCCCC"> oh one</font>

711
00:27:32,250 --> 00:27:35,760
<font color="#CCCCCC">two milliseconds which isn't</font><font color="#E5E5E5"> an issue</font>

712
00:27:33,630 --> 00:27:38,070
<font color="#CCCCCC">whereas if</font><font color="#E5E5E5"> you ran that over a 56k</font>

713
00:27:35,760 --> 00:27:40,200
<font color="#CCCCCC">length that</font><font color="#E5E5E5"> would be responsible for 214</font>

714
00:27:38,070 --> 00:27:43,139
milliseconds of your delay<font color="#E5E5E5"> purely</font>

715
00:27:40,200 --> 00:27:47,520
encoding the packet as a<font color="#CCCCCC"> packet sized</font>

716
00:27:43,140 --> 00:27:50,550
unit queuing delay<font color="#E5E5E5"> so I have some</font>

717
00:27:47,520 --> 00:27:52,379
details<font color="#E5E5E5"> about</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> basically when most</font>

718
00:27:50,550 --> 00:27:53,610
people<font color="#E5E5E5"> talk about utilization they're</font>

719
00:27:52,380 --> 00:27:57,870
not actually<font color="#CCCCCC"> talking about utilization</font>

720
00:27:53,610 --> 00:28:01,320
<font color="#CCCCCC">the</font><font color="#E5E5E5"> right way when you say I'm doing</font><font color="#CCCCCC"> 500</font>

721
00:27:57,870 --> 00:28:03,510
Meg's<font color="#CCCCCC"> on a one gig port</font><font color="#E5E5E5"> you say it's 50%</font>

722
00:28:01,320 --> 00:28:06,330
utilized but what you actually mean<font color="#E5E5E5"> is</font>

723
00:28:03,510 --> 00:28:08,879
it's 50% utilized over one second

724
00:28:06,330 --> 00:28:10,409
<font color="#E5E5E5">because at any given instant that</font>

725
00:28:08,880 --> 00:28:11,850
interface<font color="#CCCCCC"> is either utilized</font><font color="#E5E5E5"> it's</font>

726
00:28:10,410 --> 00:28:13,350
transmitting hundred percent<font color="#E5E5E5"> full or</font>

727
00:28:11,850 --> 00:28:15,899
it's<font color="#E5E5E5"> not utilized it's not transmitting</font>

728
00:28:13,350 --> 00:28:17,850
<font color="#CCCCCC">it's</font><font color="#E5E5E5"> zero and so you're looking at</font>

729
00:28:15,900 --> 00:28:20,460
utilization over<font color="#CCCCCC"> some period of time</font>

730
00:28:17,850 --> 00:28:22,439
<font color="#E5E5E5">which we talked about one second but in</font>

731
00:28:20,460 --> 00:28:25,140
reality in these fractions of a second

732
00:28:22,440 --> 00:28:27,360
<font color="#E5E5E5">you if the interface is in use you have</font>

733
00:28:25,140 --> 00:28:28,909
to<font color="#E5E5E5"> queue the packet for however many</font>

734
00:28:27,360 --> 00:28:31,789
fractions of a second<font color="#E5E5E5"> until</font>

735
00:28:28,909 --> 00:28:34,639
<font color="#CCCCCC">till the interface comes up so the odds</font>

736
00:28:31,789 --> 00:28:37,460
of the interface having to<font color="#CCCCCC"> queue</font><font color="#E5E5E5"> go up</font>

737
00:28:34,639 --> 00:28:39,978
exponentially as<font color="#CCCCCC"> the as the the link</font>

738
00:28:37,460 --> 00:28:42,440
gets fuller over time so if you're using

739
00:28:39,979 --> 00:28:45,200
90%<font color="#CCCCCC"> of the interface</font><font color="#E5E5E5"> on a per second</font>

740
00:28:42,440 --> 00:28:47,570
measurement<font color="#CCCCCC"> there's a very good chance</font>

741
00:28:45,200 --> 00:28:50,539
that at some point an interface is<font color="#E5E5E5"> going</font>

742
00:28:47,570 --> 00:28:52,849
<font color="#CCCCCC">to get packets gonna</font><font color="#E5E5E5"> get cute</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> as</font>

743
00:28:50,539 --> 00:28:55,429
<font color="#CCCCCC">approach to saturation</font><font color="#E5E5E5"> as you get and</font>

744
00:28:52,849 --> 00:28:57,559
you know 98 99 100 percent saturated

745
00:28:55,429 --> 00:28:59,210
<font color="#CCCCCC">what happens is the</font><font color="#E5E5E5"> length of time that</font>

746
00:28:57,559 --> 00:29:01,070
<font color="#E5E5E5">the packet has to spend in the queue</font><font color="#CCCCCC"> to</font>

747
00:28:59,210 --> 00:29:03,139
look for an open slot<font color="#CCCCCC"> in the transmitter</font>

748
00:29:01,070 --> 00:29:04,820
<font color="#E5E5E5">Rises exponentially and that's where you</font>

749
00:29:03,139 --> 00:29:07,039
start<font color="#CCCCCC"> seeing you know many hundreds</font><font color="#E5E5E5"> of</font>

750
00:29:04,820 --> 00:29:08,749
milliseconds or thousands the packet

751
00:29:07,039 --> 00:29:10,489
still gets through<font color="#E5E5E5"> it just has to wait a</font>

752
00:29:08,749 --> 00:29:12,220
really<font color="#CCCCCC"> long</font><font color="#E5E5E5"> time to find an open slot</font>

753
00:29:10,489 --> 00:29:16,099
and effectively that's a full interface

754
00:29:12,220 --> 00:29:18,229
<font color="#E5E5E5">and then propagation delay which is the</font>

755
00:29:16,099 --> 00:29:19,908
<font color="#E5E5E5">biggest source of most of the complaints</font>

756
00:29:18,229 --> 00:29:22,999
<font color="#CCCCCC">and</font><font color="#E5E5E5"> the best thing that you can answer</font>

757
00:29:19,909 --> 00:29:25,609
<font color="#E5E5E5">is say take it up with</font><font color="#CCCCCC"> God because</font><font color="#E5E5E5"> I</font>

758
00:29:22,999 --> 00:29:27,080
didn't set the speed limit<font color="#E5E5E5"> or</font><font color="#CCCCCC"> the answer</font>

759
00:29:25,609 --> 00:29:31,879
that<font color="#E5E5E5"> I give</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> you can tell God wasn't a</font>

760
00:29:27,080 --> 00:29:35,539
gamer basically light will only<font color="#E5E5E5"> travel</font>

761
00:29:31,879 --> 00:29:37,129
so fast<font color="#E5E5E5"> light in a vacuum goes 300,000</font>

762
00:29:35,539 --> 00:29:40,369
kilometers per second which is pretty

763
00:29:37,129 --> 00:29:42,609
<font color="#E5E5E5">fast but not</font><font color="#CCCCCC"> fast enough when your</font><font color="#E5E5E5"> fiber</font>

764
00:29:40,369 --> 00:29:46,759
goes through glass<font color="#CCCCCC"> which is not a vacuum</font>

765
00:29:42,609 --> 00:29:48,379
<font color="#CCCCCC">it's going through</font><font color="#E5E5E5"> there's I left out</font>

766
00:29:46,759 --> 00:29:50,330
<font color="#CCCCCC">the details of</font><font color="#E5E5E5"> how</font><font color="#CCCCCC"> fiber works basically</font>

767
00:29:48,379 --> 00:29:53,539
<font color="#E5E5E5">what's happening is it's it's refracting</font>

768
00:29:50,330 --> 00:29:55,220
inside this<font color="#E5E5E5"> fiber</font><font color="#CCCCCC"> continuously</font><font color="#E5E5E5"> and so</font>

769
00:29:53,539 --> 00:29:57,229
it's going<font color="#E5E5E5"> through the core of the fiber</font>

770
00:29:55,220 --> 00:29:59,090
which has a refractive<font color="#E5E5E5"> index of</font><font color="#CCCCCC"> 1.4</font>

771
00:29:57,229 --> 00:30:01,460
<font color="#E5E5E5">eight which means</font><font color="#CCCCCC"> that it travels that</font>

772
00:29:59,090 --> 00:30:03,830
about 2/3<font color="#CCCCCC"> the speed of light</font><font color="#E5E5E5"> which means</font>

773
00:30:01,460 --> 00:30:05,809
that it's<font color="#E5E5E5"> about</font><font color="#CCCCCC"> 200,000 kilometres per</font>

774
00:30:03,830 --> 00:30:08,269
<font color="#E5E5E5">second and if you divide that</font><font color="#CCCCCC"> out or</font>

775
00:30:05,809 --> 00:30:11,149
multiply that out<font color="#E5E5E5"> it's 200 kilometers</font>

776
00:30:08,269 --> 00:30:12,559
<font color="#E5E5E5">per millisecond per direction and if you</font>

777
00:30:11,149 --> 00:30:13,639
take into<font color="#E5E5E5"> account with rail and trip</font>

778
00:30:12,559 --> 00:30:16,070
time because<font color="#E5E5E5"> that's what traceroute</font>

779
00:30:13,639 --> 00:30:18,830
measures<font color="#E5E5E5"> for every hundred kilometers or</font>

780
00:30:16,070 --> 00:30:20,239
<font color="#CCCCCC">62.5 miles that a packet goes out and</font>

781
00:30:18,830 --> 00:30:22,428
<font color="#CCCCCC">comes back there's</font><font color="#E5E5E5"> gonna be</font><font color="#CCCCCC"> one</font>

782
00:30:20,239 --> 00:30:25,099
millisecond<font color="#CCCCCC"> of propagation</font><font color="#E5E5E5"> delay due to</font>

783
00:30:22,429 --> 00:30:26,749
speed of light so for example if you

784
00:30:25,099 --> 00:30:28,249
were<font color="#CCCCCC"> to go around the world</font><font color="#E5E5E5"> at the</font>

785
00:30:26,749 --> 00:30:31,220
equator be a perfectly<font color="#E5E5E5"> straight fiber</font>

786
00:30:28,249 --> 00:30:34,340
route<font color="#E5E5E5"> it take 400 milliseconds and what</font>

787
00:30:31,220 --> 00:30:36,499
are you gonna do so<font color="#E5E5E5"> how</font><font color="#CCCCCC"> do you determine</font>

788
00:30:34,340 --> 00:30:38,359
<font color="#E5E5E5">if the latency is normal</font>

789
00:30:36,499 --> 00:30:41,269
you really got<font color="#CCCCCC"> to</font><font color="#E5E5E5"> look at the</font>

790
00:30:38,359 --> 00:30:42,449
geographical data and figure out<font color="#E5E5E5"> if if</font>

791
00:30:41,269 --> 00:30:46,320
the<font color="#CCCCCC"> latency fits with</font>

792
00:30:42,450 --> 00:30:49,200
or if it fits<font color="#E5E5E5"> into queuing delays so for</font>

793
00:30:46,320 --> 00:30:50,399
<font color="#E5E5E5">example in this</font><font color="#CCCCCC"> traceroute 67</font>

794
00:30:49,200 --> 00:30:51,299
milliseconds but<font color="#E5E5E5"> you're going between</font>

795
00:30:50,399 --> 00:30:53,189
<font color="#E5E5E5">New York and London</font>

796
00:30:51,299 --> 00:30:54,658
<font color="#E5E5E5">that's</font><font color="#CCCCCC"> 4,200 miles</font><font color="#E5E5E5"> and so this is</font>

797
00:30:53,190 --> 00:30:56,789
actually this is<font color="#CCCCCC"> actually the fastest</font>

798
00:30:54,659 --> 00:30:58,049
commercial<font color="#CCCCCC"> route that you can buy</font><font color="#E5E5E5"> you</font>

799
00:30:56,789 --> 00:31:00,840
can't get any better<font color="#CCCCCC"> the speed of light</font>

800
00:30:58,049 --> 00:31:03,899
<font color="#CCCCCC">there it</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> and the</font><font color="#E5E5E5"> only way to reduce</font>

801
00:31:00,840 --> 00:31:06,809
<font color="#CCCCCC">that</font><font color="#E5E5E5"> latency is to</font><font color="#CCCCCC"> you know</font><font color="#E5E5E5"> move one of</font>

802
00:31:03,899 --> 00:31:11,729
<font color="#CCCCCC">the two parties closer</font>

803
00:31:06,809 --> 00:31:14,190
another example<font color="#CCCCCC"> here for</font><font color="#E5E5E5"> example is AT&T</font>

804
00:31:11,730 --> 00:31:17,220
<font color="#E5E5E5">in Washington DC going to</font><font color="#CCCCCC"> cogent in</font>

805
00:31:14,190 --> 00:31:19,289
Washington DC and 228 milliseconds

806
00:31:17,220 --> 00:31:21,299
<font color="#E5E5E5">that's not normal for Washington</font><font color="#CCCCCC"> DC to</font>

807
00:31:19,289 --> 00:31:23,369
Washington<font color="#E5E5E5"> DC that's probably the result</font>

808
00:31:21,299 --> 00:31:25,908
<font color="#E5E5E5">of either congestion or an asymmetric</font>

809
00:31:23,369 --> 00:31:30,869
path so<font color="#E5E5E5"> you can immediately rule out</font>

810
00:31:25,909 --> 00:31:34,109
<font color="#CCCCCC">propagation delay there so the next big</font>

811
00:31:30,869 --> 00:31:37,350
<font color="#CCCCCC">issue</font><font color="#E5E5E5"> when</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> comes to analyzing</font>

812
00:31:34,109 --> 00:31:41,340
traceroute is cosmetic delays<font color="#E5E5E5"> because</font>

813
00:31:37,350 --> 00:31:44,039
the time taken the<font color="#CCCCCC"> the latency value of</font>

814
00:31:41,340 --> 00:31:46,080
traceroute<font color="#E5E5E5"> is determined by the time</font>

815
00:31:44,039 --> 00:31:48,239
taken<font color="#CCCCCC"> for</font><font color="#E5E5E5"> the packet to get to the</font>

816
00:31:46,080 --> 00:31:50,009
router<font color="#E5E5E5"> that drops the the packet the</font>

817
00:31:48,239 --> 00:31:52,619
time<font color="#E5E5E5"> taken</font><font color="#CCCCCC"> for</font><font color="#E5E5E5"> the router to generate</font>

818
00:31:50,009 --> 00:31:55,169
the ICMP<font color="#E5E5E5"> and the time taken</font><font color="#CCCCCC"> for</font><font color="#E5E5E5"> the ICMP</font>

819
00:31:52,619 --> 00:31:56,820
to get back to you so<font color="#CCCCCC"> I knows 1</font><font color="#E5E5E5"> in</font><font color="#CCCCCC"> 3 our</font>

820
00:31:55,169 --> 00:32:00,869
actual<font color="#E5E5E5"> network conditions that you're</font>

821
00:31:56,820 --> 00:32:02,369
trying to<font color="#E5E5E5"> measure item number</font><font color="#CCCCCC"> two</font><font color="#E5E5E5"> is by</font>

822
00:32:00,869 --> 00:32:04,738
definition<font color="#E5E5E5"> not it's an artifact of</font>

823
00:32:02,369 --> 00:32:07,559
<font color="#CCCCCC">traceroute and so if there's an issue</font>

824
00:32:04,739 --> 00:32:10,649
where the router is slow and generating

825
00:32:07,559 --> 00:32:12,749
the the ICMP message it will look bad<font color="#E5E5E5"> in</font>

826
00:32:10,649 --> 00:32:14,549
traceroute<font color="#E5E5E5"> even though it's not</font><font color="#CCCCCC"> actually</font>

827
00:32:12,749 --> 00:32:16,649
bad to the packet and so you've<font color="#CCCCCC"> got to</font>

828
00:32:14,549 --> 00:32:20,609
<font color="#CCCCCC">kind of figure</font><font color="#E5E5E5"> out when that's happening</font>

829
00:32:16,649 --> 00:32:23,580
<font color="#CCCCCC">and when</font><font color="#E5E5E5"> that's not so basically the big</font>

830
00:32:20,609 --> 00:32:26,970
issue<font color="#CCCCCC"> here is</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> versus through it</font>

831
00:32:23,580 --> 00:32:28,980
modern routers<font color="#E5E5E5"> have what's called a data</font>

832
00:32:26,970 --> 00:32:30,600
plane<font color="#E5E5E5"> which is how packets forward</font>

833
00:32:28,980 --> 00:32:33,119
through the router and a control<font color="#CCCCCC"> plane</font>

834
00:32:30,600 --> 00:32:36,029
which is where<font color="#E5E5E5"> your routing protocols</font>

835
00:32:33,119 --> 00:32:38,369
run where your CLI runs but even within

836
00:32:36,029 --> 00:32:41,039
that data plane there's a fast path and

837
00:32:38,369 --> 00:32:43,109
a slow path<font color="#CCCCCC"> the fast path in a moderator</font>

838
00:32:41,039 --> 00:32:44,580
is implemented in<font color="#E5E5E5"> hardware there's an</font>

839
00:32:43,109 --> 00:32:46,168
ASIC that forwards you<font color="#E5E5E5"> know millions</font>

840
00:32:44,580 --> 00:32:48,840
<font color="#E5E5E5">hundreds of millions</font><font color="#CCCCCC"> of packets per</font>

841
00:32:46,169 --> 00:32:51,539
second<font color="#E5E5E5"> and that's almost every packet</font>

842
00:32:48,840 --> 00:32:55,259
that<font color="#CCCCCC"> goes</font><font color="#E5E5E5"> through then there's a slow</font>

843
00:32:51,539 --> 00:32:56,220
path which<font color="#CCCCCC"> is handled by a</font><font color="#E5E5E5"> CPU</font><font color="#CCCCCC"> and it</font>

844
00:32:55,259 --> 00:32:58,500
<font color="#E5E5E5">handles things that are</font>

845
00:32:56,220 --> 00:33:01,230
or weird random exception packets<font color="#E5E5E5"> that</font>

846
00:32:58,500 --> 00:33:03,179
can't be<font color="#CCCCCC"> processed in</font><font color="#E5E5E5"> ASIC</font><font color="#CCCCCC"> so examples</font>

847
00:33:01,230 --> 00:33:05,159
of that are IP options and ICMP

848
00:33:03,179 --> 00:33:07,710
generation and traceroute happens at

849
00:33:05,159 --> 00:33:09,900
ICMP degeneration<font color="#CCCCCC"> so you're by a</font>

850
00:33:07,710 --> 00:33:12,330
definition<font color="#CCCCCC"> your traceroute</font><font color="#E5E5E5"> is going</font>

851
00:33:09,900 --> 00:33:16,799
through a path that is<font color="#CCCCCC"> not the same as a</font>

852
00:33:12,330 --> 00:33:18,750
normal<font color="#E5E5E5"> network forwarding</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> basically</font>

853
00:33:16,799 --> 00:33:21,809
what<font color="#E5E5E5"> happens is the</font><font color="#CCCCCC"> router CPUs tend to</font>

854
00:33:18,750 --> 00:33:24,090
be pretty underpowered<font color="#CCCCCC"> you may have a</font>

855
00:33:21,809 --> 00:33:26,399
router<font color="#E5E5E5"> that does 640 gigs of traffic</font>

856
00:33:24,090 --> 00:33:29,070
that<font color="#E5E5E5"> might be processing traceroute with</font>

857
00:33:26,400 --> 00:33:30,780
a single<font color="#E5E5E5"> 600 megahertz MIPS CPU but</font>

858
00:33:29,070 --> 00:33:33,389
doing other<font color="#E5E5E5"> things besides processing</font>

859
00:33:30,780 --> 00:33:35,730
traceroute<font color="#E5E5E5"> and what happens is in order</font>

860
00:33:33,390 --> 00:33:37,590
<font color="#CCCCCC">to keep the router functioning</font><font color="#E5E5E5"> the</font>

861
00:33:35,730 --> 00:33:39,809
software will<font color="#E5E5E5"> intentionally deep</font>

862
00:33:37,590 --> 00:33:44,059
<font color="#CCCCCC">referenced the ICMP generation it won't</font>

863
00:33:39,809 --> 00:33:47,549
do it unless there's available<font color="#E5E5E5"> CPU</font><font color="#CCCCCC"> so</font>

864
00:33:44,059 --> 00:33:50,789
what happens is the most<font color="#E5E5E5"> common example</font>

865
00:33:47,549 --> 00:33:54,570
<font color="#CCCCCC">is what's called</font><font color="#E5E5E5"> BGP scanner so BGP</font>

866
00:33:50,789 --> 00:33:56,908
scanner is a process that runs on Cisco

867
00:33:54,570 --> 00:33:59,820
IOS every 60 seconds it doesn't periodic

868
00:33:56,909 --> 00:34:02,520
<font color="#CCCCCC">cleanups of</font><font color="#E5E5E5"> BGP routes and next hop but</font>

869
00:33:59,820 --> 00:34:04,799
what happens is every<font color="#CCCCCC"> 60 seconds when</font>

870
00:34:02,520 --> 00:34:07,530
that<font color="#E5E5E5"> runs that consumes CPU that's no</font>

871
00:34:04,799 --> 00:34:10,109
<font color="#E5E5E5">longer available to generate ICMP so</font>

872
00:34:07,530 --> 00:34:12,179
these routers<font color="#CCCCCC"> a lot of the times they're</font>

873
00:34:10,109 --> 00:34:14,250
sharing the control plane and the

874
00:34:12,179 --> 00:34:15,960
software plan for example<font color="#E5E5E5"> one of the</font>

875
00:34:14,250 --> 00:34:20,460
most<font color="#E5E5E5"> popular</font><font color="#CCCCCC"> platforms the Cisco</font>

876
00:34:15,960 --> 00:34:23,520
Catalyst 6500 7600<font color="#E5E5E5"> it's sharing your CLI</font>

877
00:34:20,460 --> 00:34:25,949
your BGP all your routing protocols and

878
00:34:23,520 --> 00:34:28,560
I've seen<font color="#CCCCCC"> peat generation on the same</font>

879
00:34:25,949 --> 00:34:31,710
processor<font color="#CCCCCC"> and</font><font color="#E5E5E5"> that one processor is for</font>

880
00:34:28,560 --> 00:34:34,259
the entire box<font color="#E5E5E5"> so someone types a big</font>

881
00:34:31,710 --> 00:34:35,940
show IP<font color="#CCCCCC"> vgp complicated</font><font color="#E5E5E5"> rep</font><font color="#CCCCCC"> 6 command</font>

882
00:34:34,260 --> 00:34:38,970
and all<font color="#E5E5E5"> of a sudden</font><font color="#CCCCCC"> your trace routes</font>

883
00:34:35,940 --> 00:34:40,260
<font color="#CCCCCC">get slow or this periodic process</font><font color="#E5E5E5"> runs</font>

884
00:34:38,969 --> 00:34:44,520
and<font color="#E5E5E5"> all of a</font><font color="#CCCCCC"> sudden your trace shots get</font>

885
00:34:40,260 --> 00:34:46,560
<font color="#E5E5E5">slow so the the BGP scanner there's</font>

886
00:34:44,520 --> 00:34:48,509
actually some optimizations in new code

887
00:34:46,560 --> 00:34:51,060
called next hop tracking that<font color="#E5E5E5"> kind</font><font color="#CCCCCC"> of</font>

888
00:34:48,510 --> 00:34:52,830
reduces some of<font color="#E5E5E5"> the impact of</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> so if</font>

889
00:34:51,060 --> 00:34:56,040
you get a<font color="#E5E5E5"> chance to upgrade your routers</font>

890
00:34:52,830 --> 00:34:57,720
to to modern code<font color="#CCCCCC"> you can take advantage</font>

891
00:34:56,040 --> 00:34:59,279
of<font color="#E5E5E5"> that</font><font color="#CCCCCC"> and it'll</font><font color="#E5E5E5"> it'll help at least</font>

892
00:34:57,720 --> 00:35:02,339
reduce the impact for that<font color="#CCCCCC"> one</font>

893
00:34:59,280 --> 00:35:04,470
<font color="#CCCCCC">particular process the other issue is</font>

894
00:35:02,339 --> 00:35:05,890
<font color="#CCCCCC">that most routers</font><font color="#E5E5E5"> actually rate limit</font>

895
00:35:04,470 --> 00:35:07,749
the ICMP generation

896
00:35:05,890 --> 00:35:09,788
and a lot<font color="#CCCCCC"> of times they do it with</font>

897
00:35:07,749 --> 00:35:12,640
hard-coded arbitrary values that<font color="#E5E5E5"> you can</font>

898
00:35:09,789 --> 00:35:14,710
as a user can't change and these values

899
00:35:12,640 --> 00:35:16,629
may<font color="#CCCCCC"> not be sufficient under</font><font color="#E5E5E5"> heavy trace</font>

900
00:35:14,710 --> 00:35:18,400
or a load especially<font color="#CCCCCC"> with more and more</font>

901
00:35:16,630 --> 00:35:20,499
<font color="#E5E5E5">people running MTR which like I</font><font color="#CCCCCC"> said</font>

902
00:35:18,400 --> 00:35:22,989
just<font color="#E5E5E5"> runs the</font><font color="#CCCCCC"> trace</font><font color="#E5E5E5"> route over and over</font>

903
00:35:20,499 --> 00:35:26,230
and<font color="#CCCCCC"> over</font><font color="#E5E5E5"> and exhaust the router</font>

904
00:35:22,989 --> 00:35:28,390
<font color="#E5E5E5">resources</font><font color="#CCCCCC"> so I broke it</font><font color="#E5E5E5"> down</font><font color="#CCCCCC"> by some of</font>

905
00:35:26,230 --> 00:35:32,920
the<font color="#E5E5E5"> most common platform types so the</font>

906
00:35:28,390 --> 00:35:35,170
<font color="#CCCCCC">Juniper Mt MX series is distributed IGP</font>

907
00:35:32,920 --> 00:35:37,690
generation ICMP generation it happens on

908
00:35:35,170 --> 00:35:39,640
the FPC<font color="#E5E5E5"> CPU so it doesn't touch the</font>

909
00:35:37,690 --> 00:35:42,220
routing engine<font color="#E5E5E5"> but there's a</font><font color="#CCCCCC"> hard-coded</font>

910
00:35:39,640 --> 00:35:44,470
limit there's a<font color="#E5E5E5"> hard-coded limit of it</font>

911
00:35:42,220 --> 00:35:46,149
depends<font color="#E5E5E5"> on the type of FPC and they've</font>

912
00:35:44,470 --> 00:35:48,279
changed it in<font color="#E5E5E5"> recent</font><font color="#CCCCCC"> versions but they</font>

913
00:35:46,150 --> 00:35:51,400
haven't bumped it it's not configurable

914
00:35:48,279 --> 00:35:53,559
<font color="#E5E5E5">it's not explicitly clear what some</font><font color="#CCCCCC"> of</font>

915
00:35:51,400 --> 00:35:56,289
these values<font color="#E5E5E5"> are and for certain old</font>

916
00:35:53,559 --> 00:35:59,680
routers it's still a<font color="#E5E5E5"> very low limit so</font>

917
00:35:56,289 --> 00:36:01,420
50<font color="#CCCCCC"> packets per second</font><font color="#E5E5E5"> not much at all if</font>

918
00:35:59,680 --> 00:36:02,710
someone has an actual<font color="#E5E5E5"> forwarding loop</font>

919
00:36:01,420 --> 00:36:04,539
<font color="#E5E5E5">somewhere like just some random user</font>

920
00:36:02,710 --> 00:36:06,279
configures a static route that creates

921
00:36:04,539 --> 00:36:07,869
an actual<font color="#CCCCCC"> forwarding loop</font><font color="#E5E5E5"> your box may</font>

922
00:36:06,279 --> 00:36:11,829
suddenly<font color="#E5E5E5"> stop doing trail because it's</font>

923
00:36:07,869 --> 00:36:13,539
overloaded<font color="#E5E5E5"> Foundry the ml</font><font color="#CCCCCC"> x and xsin are</font>

924
00:36:11,829 --> 00:36:16,089
platforms have a<font color="#E5E5E5"> hard-coded limit of</font><font color="#CCCCCC"> 400</font>

925
00:36:13,539 --> 00:36:18,640
<font color="#E5E5E5">packets per second per interface force</font>

926
00:36:16,089 --> 00:36:20,230
10 has a hard-coded<font color="#E5E5E5"> limit of either 200</font>

927
00:36:18,640 --> 00:36:23,920
or 600 depending on the type<font color="#CCCCCC"> of</font>

928
00:36:20,230 --> 00:36:26,380
interface<font color="#CCCCCC"> cisco is actually one of the</font>

929
00:36:23,920 --> 00:36:28,539
only platforms where it's not hard-coded

930
00:36:26,380 --> 00:36:30,579
<font color="#CCCCCC">but the downside there is that it's</font>

931
00:36:28,539 --> 00:36:32,980
centralized so it's not distributed per

932
00:36:30,579 --> 00:36:35,559
line card it goes<font color="#E5E5E5"> to the central on the</font>

933
00:36:32,980 --> 00:36:38,140
<font color="#CCCCCC">6500 7600 goes to the central control</font>

934
00:36:35,559 --> 00:36:40,089
processor so<font color="#CCCCCC"> you can configure the rate</font>

935
00:36:38,140 --> 00:36:42,519
limit<font color="#E5E5E5"> whatever you want but it's</font>

936
00:36:40,089 --> 00:36:44,470
probably<font color="#E5E5E5"> not going to do as many packets</font>

937
00:36:42,519 --> 00:36:48,488
per second as a distributive platform<font color="#E5E5E5"> or</font>

938
00:36:44,470 --> 00:36:51,160
you<font color="#E5E5E5"> can't configure it the GSR is</font>

939
00:36:48,489 --> 00:36:52,720
<font color="#CCCCCC">hard-coded</font><font color="#E5E5E5"> as far as I can tell</font><font color="#CCCCCC"> even</font>

940
00:36:51,160 --> 00:36:54,660
though the ICMP<font color="#E5E5E5"> generation down the line</font>

941
00:36:52,720 --> 00:36:58,839
<font color="#CCCCCC">cards</font><font color="#E5E5E5"> so it's the same as</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> universe</font>

942
00:36:54,660 --> 00:37:01,019
<font color="#CCCCCC">and apparently</font><font color="#E5E5E5"> on new software on</font><font color="#CCCCCC"> CRS</font>

943
00:36:58,839 --> 00:37:03,970
<font color="#CCCCCC">one you're able to</font><font color="#E5E5E5"> do some type of</font>

944
00:37:01,019 --> 00:37:07,019
<font color="#E5E5E5">configuration and</font><font color="#CCCCCC"> the only</font><font color="#E5E5E5"> example</font><font color="#CCCCCC"> that</font>

945
00:37:03,970 --> 00:37:09,519
I<font color="#E5E5E5"> could get from anyone was was for MPLS</font>

946
00:37:07,019 --> 00:37:12,609
<font color="#E5E5E5">TTL expirations and I'm not sure if that</font>

947
00:37:09,519 --> 00:37:14,879
<font color="#E5E5E5">if that</font><font color="#CCCCCC"> applies to other packets</font><font color="#E5E5E5"> or if</font>

948
00:37:12,609 --> 00:37:16,920
there's<font color="#E5E5E5"> another option outside</font><font color="#CCCCCC"> of MPLS</font>

949
00:37:14,880 --> 00:37:18,750
there's at least some configuration

950
00:37:16,920 --> 00:37:21,540
option the point being<font color="#CCCCCC"> these aren't very</font>

951
00:37:18,750 --> 00:37:23,280
clear<font color="#E5E5E5"> explicit and if you have a big</font>

952
00:37:21,540 --> 00:37:24,810
<font color="#E5E5E5">network you're very likely to bump these</font>

953
00:37:23,280 --> 00:37:26,640
limits<font color="#E5E5E5"> where all of a sudden even though</font>

954
00:37:24,810 --> 00:37:28,410
your router has available processing

955
00:37:26,640 --> 00:37:30,410
resources<font color="#E5E5E5"> it's not generating trace</font>

956
00:37:28,410 --> 00:37:34,020
routes<font color="#CCCCCC"> when people start opening tickets</font>

957
00:37:30,410 --> 00:37:36,180
so the number one rule<font color="#E5E5E5"> for spotting fake</font>

958
00:37:34,020 --> 00:37:38,820
latency is if there's an<font color="#E5E5E5"> actual issue</font>

959
00:37:36,180 --> 00:37:41,609
the latency has to continue for all hops

960
00:37:38,820 --> 00:37:44,070
<font color="#E5E5E5">forward so in this example there's a</font>

961
00:37:41,610 --> 00:37:45,780
latency spike<font color="#E5E5E5"> in the middle</font><font color="#CCCCCC"> of hop</font><font color="#E5E5E5"> two</font>

962
00:37:44,070 --> 00:37:47,370
and it didn't take<font color="#E5E5E5"> me very long over any</font>

963
00:37:45,780 --> 00:37:49,500
trace routes to<font color="#CCCCCC"> hit this because it</font>

964
00:37:47,370 --> 00:37:52,589
basically<font color="#E5E5E5"> happens all the</font><font color="#CCCCCC"> time</font><font color="#E5E5E5"> but you</font>

965
00:37:49,500 --> 00:37:54,360
look at<font color="#E5E5E5"> this and you say</font><font color="#CCCCCC"> okay well that</font>

966
00:37:52,590 --> 00:37:56,640
there was a latency spike there but it

967
00:37:54,360 --> 00:37:58,470
didn't<font color="#E5E5E5"> continue through the next hop so</font>

968
00:37:56,640 --> 00:38:00,120
you can look<font color="#E5E5E5"> at this and say this is</font>

969
00:37:58,470 --> 00:38:02,189
cosmetic because if there was an actual

970
00:38:00,120 --> 00:38:04,350
<font color="#CCCCCC">issue that was causing 68 milliseconds</font>

971
00:38:02,190 --> 00:38:06,360
<font color="#E5E5E5">you</font><font color="#CCCCCC"> would see that</font><font color="#E5E5E5"> increased latency in</font>

972
00:38:04,350 --> 00:38:08,970
hop<font color="#CCCCCC"> three and hop four and hop five and</font>

973
00:38:06,360 --> 00:38:11,880
if<font color="#E5E5E5"> you don't it's fake and</font><font color="#CCCCCC"> that</font>

974
00:38:08,970 --> 00:38:13,290
eliminates<font color="#E5E5E5"> about</font><font color="#CCCCCC"> 80% of the traceroute</font>

975
00:38:11,880 --> 00:38:15,320
tickets that people will submit if they

976
00:38:13,290 --> 00:38:17,340
just understood that<font color="#E5E5E5"> one rule</font><font color="#CCCCCC"> for</font>

977
00:38:15,320 --> 00:38:21,260
<font color="#CCCCCC">telling what's an actual</font><font color="#E5E5E5"> issue and</font>

978
00:38:17,340 --> 00:38:23,670
what's not<font color="#E5E5E5"> but it could also</font><font color="#CCCCCC"> mean</font>

979
00:38:21,260 --> 00:38:26,280
there's an asymmetric path it could<font color="#E5E5E5"> mean</font>

980
00:38:23,670 --> 00:38:29,220
there's an artificial rate limit it

981
00:38:26,280 --> 00:38:31,470
could<font color="#E5E5E5"> mean</font><font color="#CCCCCC"> anything</font><font color="#E5E5E5"> they could</font><font color="#CCCCCC"> it could</font>

982
00:38:29,220 --> 00:38:33,180
actually be an issue<font color="#E5E5E5"> but it's an issue</font>

983
00:38:31,470 --> 00:38:36,660
<font color="#CCCCCC">that only affects</font><font color="#E5E5E5"> traceroute it's not an</font>

984
00:38:33,180 --> 00:38:38,669
issue<font color="#E5E5E5"> that affects real packets</font><font color="#CCCCCC"> so the</font>

985
00:38:36,660 --> 00:38:42,120
<font color="#E5E5E5">next big issue with traceroute is</font>

986
00:38:38,670 --> 00:38:43,860
asymmetric paths<font color="#CCCCCC"> basically the Internet</font>

987
00:38:42,120 --> 00:38:45,569
has absolutely no guarantee<font color="#CCCCCC"> of symmetry</font>

988
00:38:43,860 --> 00:38:46,740
<font color="#E5E5E5">and in fact if there's a guarantee of</font>

989
00:38:45,570 --> 00:38:49,230
<font color="#E5E5E5">anything it's</font><font color="#CCCCCC"> that your</font><font color="#E5E5E5"> paths that are</font>

990
00:38:46,740 --> 00:38:52,229
<font color="#E5E5E5">not going to be a symmetric trace route</font>

991
00:38:49,230 --> 00:38:54,240
is<font color="#E5E5E5"> only showing you the forward path but</font>

992
00:38:52,230 --> 00:38:56,910
your latency calculation is<font color="#E5E5E5"> based on the</font>

993
00:38:54,240 --> 00:38:58,740
return<font color="#CCCCCC"> trip time so there's this</font>

994
00:38:56,910 --> 00:39:00,089
invisible component to trace route that

995
00:38:58,740 --> 00:39:03,299
you can't see<font color="#E5E5E5"> that's affecting your</font>

996
00:39:00,090 --> 00:39:06,210
results<font color="#E5E5E5"> the only</font><font color="#CCCCCC"> way to figure</font><font color="#E5E5E5"> this out</font>

997
00:39:03,300 --> 00:39:08,580
is to<font color="#CCCCCC"> get a trace route</font><font color="#E5E5E5"> and the reverse</font>

998
00:39:06,210 --> 00:39:10,290
path<font color="#E5E5E5"> the problem is it's actually</font>

999
00:39:08,580 --> 00:39:12,770
<font color="#CCCCCC">possible for the the past the be</font>

1000
00:39:10,290 --> 00:39:15,420
asymmetric<font color="#CCCCCC"> at every hop along the path</font>

1001
00:39:12,770 --> 00:39:17,730
so even though you may get a trace route

1002
00:39:15,420 --> 00:39:19,980
from side a<font color="#E5E5E5"> you may get a trace route</font>

1003
00:39:17,730 --> 00:39:21,600
<font color="#E5E5E5">from side Z there can be hops in the</font>

1004
00:39:19,980 --> 00:39:23,400
<font color="#E5E5E5">middle where the paths don't take any of</font>

1005
00:39:21,600 --> 00:39:25,049
the paths<font color="#E5E5E5"> that you've seen and this</font>

1006
00:39:23,400 --> 00:39:26,340
<font color="#E5E5E5">doesn't affect your actual Florida</font>

1007
00:39:25,050 --> 00:39:28,170
traffic but<font color="#E5E5E5"> it affects your trace route</font>

1008
00:39:26,340 --> 00:39:31,140
so<font color="#E5E5E5"> you need to understand</font>

1009
00:39:28,170 --> 00:39:33,359
when you'll see cosmetic problems and

1010
00:39:31,140 --> 00:39:37,529
when you want so here's some<font color="#CCCCCC"> examples of</font>

1011
00:39:33,359 --> 00:39:40,348
cosmetic problems<font color="#E5E5E5"> or asymmetric</font><font color="#CCCCCC"> routing</font>

1012
00:39:37,530 --> 00:39:44,310
problems<font color="#E5E5E5"> I should</font><font color="#CCCCCC"> say where you see</font>

1013
00:39:40,349 --> 00:39:46,800
between<font color="#CCCCCC"> DCA 3 which is Ashburn Virginia</font>

1014
00:39:44,310 --> 00:39:48,660
<font color="#E5E5E5">on Global Crossing and Ashburn and</font>

1015
00:39:46,800 --> 00:39:52,800
<font color="#CCCCCC">Sprint so within</font><font color="#E5E5E5"> probably the same data</font>

1016
00:39:48,660 --> 00:39:54,690
center<font color="#CCCCCC"> you see 100</font><font color="#E5E5E5"> millisecond spike so</font>

1017
00:39:52,800 --> 00:39:56,490
you look at this<font color="#E5E5E5"> and</font><font color="#CCCCCC"> you say well what's</font>

1018
00:39:54,690 --> 00:39:58,920
the<font color="#E5E5E5"> problem</font><font color="#CCCCCC"> what could</font><font color="#E5E5E5"> be going on here</font>

1019
00:39:56,490 --> 00:40:00,540
<font color="#E5E5E5">it could be congestion between</font><font color="#CCCCCC"> Global</font>

1020
00:39:58,920 --> 00:40:02,220
<font color="#CCCCCC">Crossing let's</font><font color="#E5E5E5"> print</font><font color="#CCCCCC"> where global</font>

1021
00:40:00,540 --> 00:40:06,599
crossings interface is full<font color="#CCCCCC"> its queuing</font>

1022
00:40:02,220 --> 00:40:08,368
packets<font color="#CCCCCC"> if you happen to know anything</font>

1023
00:40:06,599 --> 00:40:12,840
about<font color="#CCCCCC"> global crossings infrastructure</font>

1024
00:40:08,369 --> 00:40:15,900
here<font color="#E5E5E5"> you know that</font><font color="#CCCCCC"> AR 3</font><font color="#E5E5E5"> is a Cisco 7600</font>

1025
00:40:12,840 --> 00:40:17,280
that doesn't have a buffer<font color="#E5E5E5"> that could</font>

1026
00:40:15,900 --> 00:40:18,630
hold anything<font color="#E5E5E5"> close to a</font><font color="#CCCCCC"> hundred</font>

1027
00:40:17,280 --> 00:40:20,099
milliseconds so right<font color="#CCCCCC"> off the</font><font color="#E5E5E5"> bat you</font>

1028
00:40:18,630 --> 00:40:23,130
know<font color="#CCCCCC"> that that can't be</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> can't be</font>

1029
00:40:20,099 --> 00:40:27,480
the case<font color="#CCCCCC"> so it pretty much</font><font color="#E5E5E5"> has</font><font color="#CCCCCC"> to be</font><font color="#E5E5E5"> an</font>

1030
00:40:23,130 --> 00:40:29,040
asymmetric<font color="#E5E5E5"> routing path you</font><font color="#CCCCCC"> see that</font>

1031
00:40:27,480 --> 00:40:31,349
this<font color="#E5E5E5"> is this is a border this</font><font color="#CCCCCC"> is where</font>

1032
00:40:29,040 --> 00:40:34,560
the packet goes from<font color="#E5E5E5"> global crossing to</font>

1033
00:40:31,349 --> 00:40:37,140
sprint<font color="#E5E5E5"> so now Sprint's routing policy</font>

1034
00:40:34,560 --> 00:40:38,730
takes effect<font color="#CCCCCC"> for that return path and so</font>

1035
00:40:37,140 --> 00:40:46,529
you you need<font color="#CCCCCC"> to figure out what's going</font>

1036
00:40:38,730 --> 00:40:48,450
<font color="#E5E5E5">on so</font><font color="#CCCCCC"> here's here's the here's an</font>

1037
00:40:46,530 --> 00:40:51,960
example<font color="#E5E5E5"> of how you can well actually</font><font color="#CCCCCC"> let</font>

1038
00:40:48,450 --> 00:40:54,480
<font color="#E5E5E5">me let me</font><font color="#CCCCCC"> explain</font><font color="#E5E5E5"> this more so basically</font>

1039
00:40:51,960 --> 00:40:57,900
asymmetric paths can happen at<font color="#CCCCCC"> every hop</font>

1040
00:40:54,480 --> 00:40:59,849
so here I've Illustrated<font color="#E5E5E5"> packets going</font>

1041
00:40:57,900 --> 00:41:01,140
through a<font color="#CCCCCC"> network that interconnects two</font>

1042
00:40:59,849 --> 00:41:03,270
networks that interconnect in three

1043
00:41:01,140 --> 00:41:06,210
locations<font color="#CCCCCC"> interconnecting DC Chicago</font><font color="#E5E5E5"> and</font>

1044
00:41:03,270 --> 00:41:08,190
San<font color="#CCCCCC"> Jose which is</font><font color="#E5E5E5"> vastly simplified and</font>

1045
00:41:06,210 --> 00:41:10,770
there's three<font color="#E5E5E5"> tracer</font><font color="#CCCCCC"> on top so</font><font color="#E5E5E5"> hop one</font>

1046
00:41:08,190 --> 00:41:14,400
is purple<font color="#E5E5E5"> hop two is red hop three is</font>

1047
00:41:10,770 --> 00:41:16,320
green hop one the packet goes out in

1048
00:41:14,400 --> 00:41:18,119
<font color="#CCCCCC">Washington DC comes back</font><font color="#E5E5E5"> in Washington</font>

1049
00:41:16,320 --> 00:41:22,440
DC goes out the same interface comes

1050
00:41:18,119 --> 00:41:23,849
back the same path hop<font color="#CCCCCC"> - hop potatoes</font>

1051
00:41:22,440 --> 00:41:26,190
out the<font color="#E5E5E5"> network it goes to the other</font>

1052
00:41:23,849 --> 00:41:28,349
router<font color="#E5E5E5"> in Washington DC they haul it</font><font color="#CCCCCC"> to</font>

1053
00:41:26,190 --> 00:41:31,080
<font color="#CCCCCC">Chicago the tracer I'll drop the the</font>

1054
00:41:28,349 --> 00:41:33,900
router drops the the packet generates an

1055
00:41:31,080 --> 00:41:37,230
ICMP TTL that TTL goes back via<font color="#CCCCCC"> the</font>

1056
00:41:33,900 --> 00:41:39,270
<font color="#E5E5E5">Chicago interconnection hop three it</font>

1057
00:41:37,230 --> 00:41:40,330
goes all the way out<font color="#CCCCCC"> to San Jose it</font>

1058
00:41:39,270 --> 00:41:43,090
drops the the<font color="#E5E5E5"> pack</font>

1059
00:41:40,330 --> 00:41:44,680
it generates the TTL it comes back<font color="#E5E5E5"> to be</font>

1060
00:41:43,090 --> 00:41:47,980
at<font color="#CCCCCC"> the San Jose</font><font color="#E5E5E5"> interconnection so</font>

1061
00:41:44,680 --> 00:41:50,950
you've now seen three different<font color="#E5E5E5"> reverse</font>

1062
00:41:47,980 --> 00:41:53,350
paths<font color="#E5E5E5"> that if the final</font><font color="#CCCCCC"> destination was</font>

1063
00:41:50,950 --> 00:41:55,750
<font color="#CCCCCC">LA for example</font><font color="#E5E5E5"> and the packet went out</font>

1064
00:41:53,350 --> 00:41:58,319
the<font color="#CCCCCC"> ail</font><font color="#E5E5E5"> la destination none</font><font color="#CCCCCC"> of your</font>

1065
00:41:55,750 --> 00:42:01,210
traceroute<font color="#E5E5E5"> either direction would show</font>

1066
00:41:58,320 --> 00:42:02,890
the the path<font color="#E5E5E5"> going through either one</font><font color="#CCCCCC"> of</font>

1067
00:42:01,210 --> 00:42:05,140
<font color="#E5E5E5">these three interconnections even though</font>

1068
00:42:02,890 --> 00:42:07,450
those might<font color="#CCCCCC"> be where the problems are</font><font color="#E5E5E5"> so</font>

1069
00:42:05,140 --> 00:42:09,879
if for example there was congestion or

1070
00:42:07,450 --> 00:42:12,520
there was packet<font color="#CCCCCC"> loss or whatever on the</font>

1071
00:42:09,880 --> 00:42:14,830
<font color="#CCCCCC">Chicago winter connection here or the</font>

1072
00:42:12,520 --> 00:42:16,960
<font color="#CCCCCC">Chicago return path</font><font color="#E5E5E5"> you wouldn't see it</font>

1073
00:42:14,830 --> 00:42:18,370
in traceroute<font color="#E5E5E5"> and it might</font><font color="#CCCCCC"> only affect</font>

1074
00:42:16,960 --> 00:42:21,640
the middle hop and then<font color="#E5E5E5"> it might go away</font>

1075
00:42:18,370 --> 00:42:23,920
<font color="#E5E5E5">for the hop after that and you you you</font>

1076
00:42:21,640 --> 00:42:25,420
<font color="#CCCCCC">know have to be able</font><font color="#E5E5E5"> to tell what's</font>

1077
00:42:23,920 --> 00:42:27,130
going<font color="#E5E5E5"> on there whether that's cosmetic</font>

1078
00:42:25,420 --> 00:42:28,960
or<font color="#E5E5E5"> whether in this case it's an actual</font>

1079
00:42:27,130 --> 00:42:30,610
problem<font color="#CCCCCC"> but it doesn't affect your real</font>

1080
00:42:28,960 --> 00:42:34,930
traffic<font color="#CCCCCC"> we use only your</font><font color="#E5E5E5"> tracer</font><font color="#CCCCCC"> all</font>

1081
00:42:30,610 --> 00:42:36,460
traffic<font color="#CCCCCC"> goes over this bad path so</font>

1082
00:42:34,930 --> 00:42:39,009
there's some ways<font color="#E5E5E5"> that you can kind of</font>

1083
00:42:36,460 --> 00:42:40,720
test<font color="#E5E5E5"> around asymmetric paths so consider</font>

1084
00:42:39,010 --> 00:42:44,170
the the<font color="#E5E5E5"> previous example that</font><font color="#CCCCCC"> I had</font>

1085
00:42:40,720 --> 00:42:46,120
where I said<font color="#CCCCCC"> that</font><font color="#E5E5E5"> in this scenario your</font>

1086
00:42:44,170 --> 00:42:49,180
network is connected<font color="#E5E5E5"> to</font><font color="#CCCCCC"> Global Crossing</font>

1087
00:42:46,120 --> 00:42:50,620
<font color="#CCCCCC">and level three when you send a packet</font>

1088
00:42:49,180 --> 00:42:52,390
<font color="#CCCCCC">the Global Crossing it comes back</font><font color="#E5E5E5"> to</font>

1089
00:42:50,620 --> 00:42:54,069
<font color="#CCCCCC">your</font><font color="#E5E5E5"> Global Crossing</font><font color="#CCCCCC"> when you send a</font>

1090
00:42:52,390 --> 00:42:55,990
packet<font color="#CCCCCC"> to level three it comes back to</font>

1091
00:42:54,070 --> 00:42:59,890
<font color="#E5E5E5">be a level three but how do you reach</font>

1092
00:42:55,990 --> 00:43:01,540
<font color="#E5E5E5">sprint in this scenario you send the</font>

1093
00:42:59,890 --> 00:43:03,640
packet to<font color="#CCCCCC"> Global Crossing</font><font color="#E5E5E5"> Global</font>

1094
00:43:01,540 --> 00:43:05,290
Crossing sends the packet<font color="#CCCCCC"> a</font><font color="#E5E5E5"> sprint now</font>

1095
00:43:03,640 --> 00:43:06,430
the packet is on spreads<font color="#E5E5E5"> Network how</font>

1096
00:43:05,290 --> 00:43:08,080
does he<font color="#E5E5E5"> get back to you will</font><font color="#CCCCCC"> Sprint's</font>

1097
00:43:06,430 --> 00:43:09,759
policy is is completely<font color="#CCCCCC"> different</font><font color="#E5E5E5"> than</font>

1098
00:43:08,080 --> 00:43:12,100
<font color="#CCCCCC">either one of these two networks and so</font>

1099
00:43:09,760 --> 00:43:13,600
Sprint's policy for whatever reason says

1100
00:43:12,100 --> 00:43:15,910
<font color="#E5E5E5">we'll send it back</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> be a level three</font>

1101
00:43:13,600 --> 00:43:17,620
<font color="#E5E5E5">which</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> perfectly legitimate but say</font>

1102
00:43:15,910 --> 00:43:21,670
there's a<font color="#CCCCCC"> problem</font><font color="#E5E5E5"> on on that reverse</font>

1103
00:43:17,620 --> 00:43:24,009
<font color="#CCCCCC">path the question is how do you prove</font>

1104
00:43:21,670 --> 00:43:25,600
whether the issue is between Global

1105
00:43:24,010 --> 00:43:27,160
Crossing<font color="#E5E5E5"> a sprint or between sprint and</font>

1106
00:43:25,600 --> 00:43:29,620
level three or<font color="#CCCCCC"> between level three and</font>

1107
00:43:27,160 --> 00:43:32,440
you you know there's a wide variety<font color="#E5E5E5"> of</font>

1108
00:43:29,620 --> 00:43:34,240
places<font color="#E5E5E5"> where the problem could</font><font color="#CCCCCC"> be so one</font>

1109
00:43:32,440 --> 00:43:36,610
of<font color="#E5E5E5"> the the quick and dirty ways to test</font>

1110
00:43:34,240 --> 00:43:39,069
around<font color="#E5E5E5"> this when you have transit</font>

1111
00:43:36,610 --> 00:43:40,990
providers is<font color="#CCCCCC"> to use the</font><font color="#E5E5E5"> slash 30 that</font>

1112
00:43:39,070 --> 00:43:43,720
they've provided<font color="#E5E5E5"> you as a source address</font>

1113
00:43:40,990 --> 00:43:45,609
<font color="#E5E5E5">because</font><font color="#CCCCCC"> what happens is say when</font><font color="#E5E5E5"> you</font>

1114
00:43:43,720 --> 00:43:47,560
turn up<font color="#CCCCCC"> a transit port with with Global</font>

1115
00:43:45,610 --> 00:43:49,600
Crossing or level<font color="#CCCCCC"> 3 or</font><font color="#E5E5E5"> whoever they're</font>

1116
00:43:47,560 --> 00:43:53,170
gonna give you a slash 30 out of<font color="#CCCCCC"> their</font>

1117
00:43:49,600 --> 00:43:53,799
IP space<font color="#E5E5E5"> so if you go to your router and</font>

1118
00:43:53,170 --> 00:43:56,890
<font color="#E5E5E5">you set</font>

1119
00:43:53,800 --> 00:43:59,500
<font color="#CCCCCC">traceroute source to be that IP</font><font color="#E5E5E5"> you will</font>

1120
00:43:56,890 --> 00:44:00,759
guarantee<font color="#E5E5E5"> the this pet this traffic is</font>

1121
00:43:59,500 --> 00:44:02,800
<font color="#CCCCCC">going</font><font color="#E5E5E5"> to come back and be of that</font>

1122
00:44:00,760 --> 00:44:04,060
provider<font color="#E5E5E5"> and via that return interface</font>

1123
00:44:02,800 --> 00:44:05,500
it's not going to come<font color="#CCCCCC"> back via some</font>

1124
00:44:04,060 --> 00:44:07,480
<font color="#E5E5E5">other interface in your network it's</font><font color="#CCCCCC"> not</font>

1125
00:44:05,500 --> 00:44:10,090
going to come back<font color="#E5E5E5"> and be some other</font>

1126
00:44:07,480 --> 00:44:11,530
provider<font color="#E5E5E5"> and so you try</font><font color="#CCCCCC"> different source</font>

1127
00:44:10,090 --> 00:44:13,300
addresses basically you know from

1128
00:44:11,530 --> 00:44:14,980
different<font color="#CCCCCC"> networks</font><font color="#E5E5E5"> from different places</font>

1129
00:44:13,300 --> 00:44:16,840
<font color="#E5E5E5">in</font><font color="#CCCCCC"> your network to kind of</font><font color="#E5E5E5"> figure out</font>

1130
00:44:14,980 --> 00:44:19,600
what<font color="#E5E5E5"> the return path is even if you</font>

1131
00:44:16,840 --> 00:44:21,130
don't have a host in Sprint's network

1132
00:44:19,600 --> 00:44:25,270
somewhere<font color="#E5E5E5"> that you can run</font><font color="#CCCCCC"> this trace</font>

1133
00:44:21,130 --> 00:44:27,130
<font color="#E5E5E5">route</font><font color="#CCCCCC"> but what happens</font><font color="#E5E5E5"> when the slash</font>

1134
00:44:25,270 --> 00:44:29,890
<font color="#E5E5E5">authorities numbered out on MySpace</font><font color="#CCCCCC"> as</font>

1135
00:44:27,130 --> 00:44:32,470
in the<font color="#E5E5E5"> case of</font><font color="#CCCCCC"> a peer</font><font color="#E5E5E5"> or</font><font color="#CCCCCC"> a customer or</font>

1136
00:44:29,890 --> 00:44:34,660
potentially appear<font color="#E5E5E5"> where you</font><font color="#CCCCCC"> know your</font>

1137
00:44:32,470 --> 00:44:37,299
peers probably have a 50/50<font color="#CCCCCC"> chance</font><font color="#E5E5E5"> of</font>

1138
00:44:34,660 --> 00:44:39,759
being your space or their space you can

1139
00:44:37,300 --> 00:44:41,920
still see some benefits here just by

1140
00:44:39,760 --> 00:44:47,290
trying<font color="#CCCCCC"> different</font><font color="#E5E5E5"> size</font><font color="#CCCCCC"> 30 s</font><font color="#E5E5E5"> so for</font>

1141
00:44:41,920 --> 00:44:50,530
<font color="#CCCCCC">example if you set it to your slash 30</font>

1142
00:44:47,290 --> 00:44:52,210
instead<font color="#E5E5E5"> of your loopback address what</font>

1143
00:44:50,530 --> 00:44:54,640
you<font color="#CCCCCC"> might be forcing the peer to do is</font>

1144
00:44:52,210 --> 00:44:57,670
to come back via that one interface<font color="#E5E5E5"> so</font>

1145
00:44:54,640 --> 00:45:01,569
in<font color="#E5E5E5"> in this example here if I were to set</font>

1146
00:44:57,670 --> 00:45:03,760
my<font color="#CCCCCC"> traceroute</font><font color="#E5E5E5"> source to the interface in</font>

1147
00:45:01,570 --> 00:45:05,890
Washington<font color="#CCCCCC"> DC where I'm sending the</font>

1148
00:45:03,760 --> 00:45:08,680
packet<font color="#E5E5E5"> I might force the peer rather</font>

1149
00:45:05,890 --> 00:45:10,509
than return the the<font color="#E5E5E5"> packet via Chicago</font>

1150
00:45:08,680 --> 00:45:13,060
or via San Jose<font color="#E5E5E5"> I might force them to</font>

1151
00:45:10,510 --> 00:45:15,040
<font color="#CCCCCC">return in the packet via</font><font color="#E5E5E5"> Washington DC</font>

1152
00:45:13,060 --> 00:45:17,020
so you<font color="#E5E5E5"> can go through</font><font color="#CCCCCC"> each one</font><font color="#E5E5E5"> of these</font>

1153
00:45:15,040 --> 00:45:23,320
interconnection points and test this

1154
00:45:17,020 --> 00:45:25,090
Apple<font color="#CCCCCC"> and see what the</font><font color="#E5E5E5"> problem is</font><font color="#CCCCCC"> and</font>

1155
00:45:23,320 --> 00:45:27,430
things you<font color="#CCCCCC"> have to</font><font color="#E5E5E5"> know about trace</font>

1156
00:45:25,090 --> 00:45:30,100
routing from<font color="#E5E5E5"> the router</font><font color="#CCCCCC"> the default</font>

1157
00:45:27,430 --> 00:45:32,680
source address on most routers<font color="#CCCCCC"> is going</font>

1158
00:45:30,100 --> 00:45:35,080
<font color="#E5E5E5">to be the source address of the egress</font>

1159
00:45:32,680 --> 00:45:37,180
interface that the probe leaves<font color="#E5E5E5"> from and</font>

1160
00:45:35,080 --> 00:45:38,680
<font color="#E5E5E5">Cisco there's no way to change this</font><font color="#CCCCCC"> I</font>

1161
00:45:37,180 --> 00:45:41,500
don't<font color="#E5E5E5"> think there's a way to change this</font>

1162
00:45:38,680 --> 00:45:43,720
<font color="#E5E5E5">in</font><font color="#CCCCCC"> foundry</font><font color="#E5E5E5"> here or any other Cisco like</font>

1163
00:45:41,500 --> 00:45:46,210
platforms<font color="#E5E5E5"> in juniper there's a way to</font>

1164
00:45:43,720 --> 00:45:48,520
change<font color="#E5E5E5"> it by setting system default</font>

1165
00:45:46,210 --> 00:45:50,740
address selection<font color="#E5E5E5"> but by default when</font>

1166
00:45:48,520 --> 00:45:52,810
you<font color="#E5E5E5"> get the box out</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> the crate it's</font>

1167
00:45:50,740 --> 00:45:54,549
not going to do this so<font color="#CCCCCC"> you need to</font><font color="#E5E5E5"> know</font>

1168
00:45:52,810 --> 00:45:56,200
what your source address is to figure

1169
00:45:54,550 --> 00:45:58,750
out<font color="#E5E5E5"> what the return path is going to</font><font color="#CCCCCC"> be</font>

1170
00:45:56,200 --> 00:46:01,390
and there's also some<font color="#CCCCCC"> issues with clock</font>

1171
00:45:58,750 --> 00:46:03,460
granularity<font color="#CCCCCC"> there are some platforms for</font>

1172
00:46:01,390 --> 00:46:05,299
example Cisco IOS that can only look at

1173
00:46:03,460 --> 00:46:07,610
<font color="#E5E5E5">packets</font>

1174
00:46:05,300 --> 00:46:09,500
second granularity<font color="#E5E5E5"> so</font><font color="#CCCCCC"> you see the packet</font>

1175
00:46:07,610 --> 00:46:11,750
go zero four zero four<font color="#CCCCCC"> zero four in</font>

1176
00:46:09,500 --> 00:46:13,760
reality it<font color="#E5E5E5"> might be one two one two</font><font color="#CCCCCC"> it's</font>

1177
00:46:11,750 --> 00:46:15,200
just<font color="#CCCCCC"> the clock is not accurate enough to</font>

1178
00:46:13,760 --> 00:46:16,670
<font color="#E5E5E5">make that determination so you've got to</font>

1179
00:46:15,200 --> 00:46:18,169
understand when you run<font color="#E5E5E5"> that a</font>

1180
00:46:16,670 --> 00:46:22,610
<font color="#CCCCCC">traceroute from that platform</font><font color="#E5E5E5"> you're not</font>

1181
00:46:18,170 --> 00:46:24,470
gonna get accurate<font color="#CCCCCC"> results the other big</font>

1182
00:46:22,610 --> 00:46:26,450
issues that<font color="#CCCCCC"> come up</font><font color="#E5E5E5"> with traceroute are</font>

1183
00:46:24,470 --> 00:46:29,839
what happens when you load<font color="#CCCCCC"> balance</font>

1184
00:46:26,450 --> 00:46:32,390
across multiple paths<font color="#E5E5E5"> so here's an</font>

1185
00:46:29,840 --> 00:46:35,720
example<font color="#E5E5E5"> of equal cost multi path</font><font color="#CCCCCC"> routing</font>

1186
00:46:32,390 --> 00:46:38,089
where router a can load balance between

1187
00:46:35,720 --> 00:46:43,370
two different paths you can<font color="#CCCCCC"> go to</font><font color="#E5E5E5"> b1 or</font>

1188
00:46:38,090 --> 00:46:45,590
<font color="#E5E5E5">b2</font><font color="#CCCCCC"> and what happens is</font><font color="#E5E5E5"> TCP UDP flow</font>

1189
00:46:43,370 --> 00:46:49,460
mapping will try to keep an individual

1190
00:46:45,590 --> 00:46:52,070
flow between<font color="#E5E5E5"> any two pairs that are</font>

1191
00:46:49,460 --> 00:46:54,620
transmitting data on<font color="#CCCCCC"> a</font><font color="#E5E5E5"> single link the</font>

1192
00:46:52,070 --> 00:46:56,870
reason you want that to happen is<font color="#E5E5E5"> if it</font>

1193
00:46:54,620 --> 00:46:58,430
were to send<font color="#E5E5E5"> say you're starting up</font><font color="#CCCCCC"> here</font>

1194
00:46:56,870 --> 00:47:00,109
your<font color="#E5E5E5"> webpage loading and it were to send</font>

1195
00:46:58,430 --> 00:47:02,299
one packet over<font color="#CCCCCC"> link' and one packet</font>

1196
00:47:00,110 --> 00:47:04,370
over link<font color="#E5E5E5"> B what might happen is the</font>

1197
00:47:02,300 --> 00:47:07,250
packets might get switched<font color="#E5E5E5"> along the way</font>

1198
00:47:04,370 --> 00:47:10,460
and when TCP receives the packets if it

1199
00:47:07,250 --> 00:47:11,990
<font color="#E5E5E5">receives</font><font color="#CCCCCC"> one three two at the</font><font color="#E5E5E5"> moment</font>

1200
00:47:10,460 --> 00:47:14,900
when it receives one and then receives

1201
00:47:11,990 --> 00:47:16,609
three it goes<font color="#E5E5E5"> do got dropped and it</font>

1202
00:47:14,900 --> 00:47:18,320
thinks<font color="#CCCCCC"> that there's packet loss in</font>

1203
00:47:16,610 --> 00:47:20,060
network and it throttles<font color="#E5E5E5"> back so you'll</font>

1204
00:47:18,320 --> 00:47:21,770
<font color="#E5E5E5">very slow the packets will still go</font>

1205
00:47:20,060 --> 00:47:24,950
through<font color="#E5E5E5"> but you'll get very slow</font>

1206
00:47:21,770 --> 00:47:26,450
<font color="#CCCCCC">performance and a</font><font color="#E5E5E5"> lot of the cost of</font>

1207
00:47:24,950 --> 00:47:28,339
slow performance<font color="#CCCCCC"> on the Internet sadly</font>

1208
00:47:26,450 --> 00:47:29,870
there's there's you know<font color="#E5E5E5"> dozen</font><font color="#CCCCCC"> different</font>

1209
00:47:28,340 --> 00:47:32,120
bugs that<font color="#CCCCCC"> can cause packet reordering</font>

1210
00:47:29,870 --> 00:47:35,060
<font color="#CCCCCC">and you know this is</font><font color="#E5E5E5"> actually a pretty</font>

1211
00:47:32,120 --> 00:47:36,230
common<font color="#E5E5E5"> scenario so people try to design</font>

1212
00:47:35,060 --> 00:47:38,660
their routers<font color="#E5E5E5"> for this not to</font><font color="#CCCCCC"> happen</font>

1213
00:47:36,230 --> 00:47:40,930
<font color="#E5E5E5">where it's</font><font color="#CCCCCC"> always gonna send a</font>

1214
00:47:38,660 --> 00:47:43,339
particular flow down a particular path

1215
00:47:40,930 --> 00:47:44,509
<font color="#CCCCCC">like I said</font><font color="#E5E5E5"> earlier when you're when</font>

1216
00:47:43,340 --> 00:47:47,000
you're<font color="#E5E5E5"> running</font><font color="#CCCCCC"> traceroute</font><font color="#E5E5E5"> and you're</font>

1217
00:47:44,510 --> 00:47:49,040
using the standard<font color="#E5E5E5"> UDP or TCP probes</font>

1218
00:47:47,000 --> 00:47:51,800
<font color="#CCCCCC">it's going to look like different layer</font>

1219
00:47:49,040 --> 00:47:54,730
<font color="#E5E5E5">for flows for every probe and so you're</font>

1220
00:47:51,800 --> 00:47:57,890
gonna see both paths in this<font color="#E5E5E5"> example</font>

1221
00:47:54,730 --> 00:47:59,900
here's an example<font color="#E5E5E5"> of</font><font color="#CCCCCC"> hylia load</font>

1222
00:47:57,890 --> 00:48:02,120
balancing<font color="#E5E5E5"> between two different</font><font color="#CCCCCC"> pairs of</font>

1223
00:47:59,900 --> 00:48:06,620
routers along<font color="#CCCCCC"> the way and you'll you'll</font>

1224
00:48:02,120 --> 00:48:08,150
see the the packet for for a1 path and

1225
00:48:06,620 --> 00:48:10,520
you'll see the packet<font color="#E5E5E5"> for the other path</font>

1226
00:48:08,150 --> 00:48:11,150
and it's the same hop it's the same<font color="#E5E5E5"> six</font>

1227
00:48:10,520 --> 00:48:13,460
hops in

1228
00:48:11,150 --> 00:48:14,420
but it's parallel<font color="#E5E5E5"> so you you look at</font>

1229
00:48:13,460 --> 00:48:17,390
this and<font color="#CCCCCC"> you understand that</font>

1230
00:48:14,420 --> 00:48:19,220
there's<font color="#CCCCCC"> ecmp</font><font color="#E5E5E5"> load-balancing going on so</font>

1231
00:48:17,390 --> 00:48:21,348
here's a slightly<font color="#E5E5E5"> more complex</font><font color="#CCCCCC"> example</font>

1232
00:48:19,220 --> 00:48:22,609
where it can kind of get weird<font color="#CCCCCC"> but you</font>

1233
00:48:21,349 --> 00:48:24,950
<font color="#E5E5E5">you just have to look at</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> and</font>

1234
00:48:22,609 --> 00:48:27,558
understand that this is<font color="#CCCCCC"> ecmp</font><font color="#E5E5E5"> between</font>

1235
00:48:24,950 --> 00:48:29,629
somewhat<font color="#E5E5E5"> parallel paths in this case</font>

1236
00:48:27,559 --> 00:48:31,190
there's a path that<font color="#CCCCCC"> goes Ashburn New</font>

1237
00:48:29,630 --> 00:48:33,650
York Seattle<font color="#CCCCCC"> and there's a path that</font>

1238
00:48:31,190 --> 00:48:35,030
<font color="#CCCCCC">goes Ashburn Chicago</font><font color="#E5E5E5"> Seattle</font><font color="#CCCCCC"> there's</font>

1239
00:48:33,650 --> 00:48:36,500
nothing<font color="#CCCCCC"> inherently wrong with</font><font color="#E5E5E5"> this</font>

1240
00:48:35,030 --> 00:48:38,480
<font color="#CCCCCC">everything works</font>

1241
00:48:36,500 --> 00:48:40,940
one path<font color="#CCCCCC"> maybe higher latency</font><font color="#E5E5E5"> there in</font>

1242
00:48:38,480 --> 00:48:42,920
<font color="#E5E5E5">this case it's it's about five</font>

1243
00:48:40,940 --> 00:48:46,040
milliseconds higher to go via one path

1244
00:48:42,920 --> 00:48:47,510
via<font color="#CCCCCC"> than the other</font><font color="#E5E5E5"> but you know it's the</font>

1245
00:48:46,040 --> 00:48:48,950
only<font color="#E5E5E5"> thing that's</font><font color="#CCCCCC"> happening here</font><font color="#E5E5E5"> is the</font>

1246
00:48:47,510 --> 00:48:50,869
tracer might get confusing you might

1247
00:48:48,950 --> 00:48:53,540
look<font color="#E5E5E5"> at this</font><font color="#CCCCCC"> and say Ashburn New York</font>

1248
00:48:50,869 --> 00:48:55,450
<font color="#E5E5E5">Chicago what what what that's not</font>

1249
00:48:53,540 --> 00:48:58,759
actually the case<font color="#E5E5E5"> it's parallel paths</font>

1250
00:48:55,450 --> 00:49:00,710
<font color="#CCCCCC">the place where it really gets screwy</font><font color="#E5E5E5"> is</font>

1251
00:48:58,760 --> 00:49:02,900
when you have multiple unequal length

1252
00:49:00,710 --> 00:49:05,420
paths and<font color="#E5E5E5"> this should really be avoided</font>

1253
00:49:02,900 --> 00:49:06,980
there's potentially scenarios where you

1254
00:49:05,420 --> 00:49:08,359
<font color="#CCCCCC">might configure your network to do this</font>

1255
00:49:06,980 --> 00:49:09,859
but you<font color="#CCCCCC"> should really</font><font color="#E5E5E5"> try to avoid it</font>

1256
00:49:08,359 --> 00:49:13,150
because it makes<font color="#E5E5E5"> tracer</font><font color="#CCCCCC"> outs a complete</font>

1257
00:49:09,859 --> 00:49:16,160
disaster<font color="#E5E5E5"> so what happens in this case</font>

1258
00:49:13,150 --> 00:49:18,619
<font color="#E5E5E5">basically</font><font color="#CCCCCC"> when</font><font color="#E5E5E5"> you have unequal</font><font color="#CCCCCC"> links</font>

1259
00:49:16,160 --> 00:49:21,710
multipath it makes the packets look like

1260
00:49:18,619 --> 00:49:24,319
they're hopping<font color="#E5E5E5"> back and forth so in</font>

1261
00:49:21,710 --> 00:49:26,960
this scenario we<font color="#CCCCCC"> have we have a router</font><font color="#E5E5E5"> X</font>

1262
00:49:24,319 --> 00:49:28,790
inserted in the middle<font color="#CCCCCC"> here and so it's</font>

1263
00:49:26,960 --> 00:49:32,119
gonna it's gonna cause future<font color="#CCCCCC"> tracer</font>

1264
00:49:28,790 --> 00:49:33,170
<font color="#CCCCCC">outs to go</font><font color="#E5E5E5"> DCD EBE</font><font color="#CCCCCC"> it's gonna look like</font>

1265
00:49:32,119 --> 00:49:34,549
it's going back forth<font color="#E5E5E5"> back and forth</font>

1266
00:49:33,170 --> 00:49:35,839
<font color="#E5E5E5">back and forth</font><font color="#CCCCCC"> and if you actually</font><font color="#E5E5E5"> look</font>

1267
00:49:34,549 --> 00:49:37,579
at one<font color="#E5E5E5"> of the Trisha notes I didn't even</font>

1268
00:49:35,839 --> 00:49:39,529
paste in here<font color="#CCCCCC"> because it's so</font><font color="#E5E5E5"> nasty it's</font>

1269
00:49:37,579 --> 00:49:41,089
not even funny<font color="#E5E5E5"> you really want to try to</font>

1270
00:49:39,530 --> 00:49:43,099
<font color="#CCCCCC">avoid setting</font><font color="#E5E5E5"> up the scenario</font><font color="#CCCCCC"> in your</font>

1271
00:49:41,089 --> 00:49:46,250
<font color="#E5E5E5">network but if you ever see something</font>

1272
00:49:43,099 --> 00:49:48,349
like<font color="#CCCCCC"> that</font><font color="#E5E5E5"> the best thing that you can do</font>

1273
00:49:46,250 --> 00:49:50,750
is to<font color="#E5E5E5"> configure your tracer I'll only</font>

1274
00:49:48,349 --> 00:49:53,000
look<font color="#E5E5E5"> at a single</font><font color="#CCCCCC"> path</font><font color="#E5E5E5"> every traceroute</font>

1275
00:49:50,750 --> 00:49:54,650
implementation has some way to change

1276
00:49:53,000 --> 00:49:56,869
the configuration<font color="#CCCCCC"> to where it only</font><font color="#E5E5E5"> sends</font>

1277
00:49:54,650 --> 00:49:58,640
<font color="#E5E5E5">one probe and if you only send one probe</font>

1278
00:49:56,869 --> 00:50:01,670
you only get one path so you you might

1279
00:49:58,640 --> 00:50:04,790
look at<font color="#E5E5E5"> it</font><font color="#CCCCCC"> one path at a time and then</font>

1280
00:50:01,670 --> 00:50:07,160
if you need<font color="#CCCCCC"> to try out the</font><font color="#E5E5E5"> other paths a</font>

1281
00:50:04,790 --> 00:50:08,480
good way to do<font color="#CCCCCC"> that is to increment</font><font color="#E5E5E5"> your</font>

1282
00:50:07,160 --> 00:50:10,700
destination your source of your

1283
00:50:08,480 --> 00:50:13,130
<font color="#E5E5E5">destination IP by one so if I run a</font>

1284
00:50:10,700 --> 00:50:15,140
traceroute<font color="#E5E5E5"> over a single path to X dot X</font>

1285
00:50:13,130 --> 00:50:18,470
<font color="#CCCCCC">dot X</font><font color="#E5E5E5"> dot</font><font color="#CCCCCC"> one</font><font color="#E5E5E5"> then I</font><font color="#CCCCCC"> might run</font><font color="#E5E5E5"> the same</font>

1286
00:50:15,140 --> 00:50:20,569
thing<font color="#E5E5E5"> to dot 2.3.4 and every time I do</font>

1287
00:50:18,470 --> 00:50:21,740
<font color="#E5E5E5">that it</font><font color="#CCCCCC"> changes</font><font color="#E5E5E5"> the hash computation</font><font color="#CCCCCC"> and</font>

1288
00:50:20,569 --> 00:50:23,930
so I might<font color="#CCCCCC"> end</font><font color="#E5E5E5"> up on a different path</font>

1289
00:50:21,740 --> 00:50:25,970
<font color="#E5E5E5">and you do this until</font><font color="#CCCCCC"> you find the path</font>

1290
00:50:23,930 --> 00:50:26,750
<font color="#CCCCCC">that you're looking for</font><font color="#E5E5E5"> or explore all</font>

1291
00:50:25,970 --> 00:50:28,879
the<font color="#CCCCCC"> different paths</font>

1292
00:50:26,750 --> 00:50:31,700
but this is how<font color="#E5E5E5"> you can you do these</font>

1293
00:50:28,880 --> 00:50:33,200
probes one at a time instead<font color="#E5E5E5"> of</font>

1294
00:50:31,700 --> 00:50:38,600
<font color="#E5E5E5">intermingling them and then you</font>

1295
00:50:33,200 --> 00:50:41,720
understand what the paths are<font color="#CCCCCC"> and then</font>

1296
00:50:38,600 --> 00:50:43,400
the other<font color="#E5E5E5"> screwy thing that happens with</font>

1297
00:50:41,720 --> 00:50:47,600
<font color="#E5E5E5">traceroute is when you start getting</font>

1298
00:50:43,400 --> 00:50:50,870
MPLS in the mix here<font color="#CCCCCC"> the</font><font color="#E5E5E5"> biggest problem</font>

1299
00:50:47,600 --> 00:50:52,880
is MPLS ICMP<font color="#CCCCCC"> tolling so what happens is</font>

1300
00:50:50,870 --> 00:50:57,440
you have large networks who are running

1301
00:50:52,880 --> 00:50:58,880
<font color="#E5E5E5">an MPLS core and they run an MPLS only</font>

1302
00:50:57,440 --> 00:51:01,280
core they don't<font color="#CCCCCC"> even</font><font color="#E5E5E5"> carry an IP network</font>

1303
00:50:58,880 --> 00:51:03,260
<font color="#CCCCCC">and they're</font><font color="#E5E5E5"> their routing tables there's</font>

1304
00:51:01,280 --> 00:51:05,440
<font color="#E5E5E5">not really any benefit</font><font color="#CCCCCC"> to doing</font><font color="#E5E5E5"> this</font>

1305
00:51:03,260 --> 00:51:08,450
<font color="#E5E5E5">they happen</font><font color="#CCCCCC"> to do it for whatever reason</font>

1306
00:51:05,440 --> 00:51:10,790
<font color="#CCCCCC">and</font><font color="#E5E5E5"> it's fine for</font><font color="#CCCCCC"> swishing MPLS packets</font>

1307
00:51:08,450 --> 00:51:13,009
but the problem is what happens<font color="#E5E5E5"> when you</font>

1308
00:51:10,790 --> 00:51:16,550
when you don't hide the traceroute hops

1309
00:51:13,010 --> 00:51:18,740
and MPLS<font color="#E5E5E5"> but you don't carry an IP table</font>

1310
00:51:16,550 --> 00:51:20,930
and your<font color="#E5E5E5"> router so when you when you</font>

1311
00:51:18,740 --> 00:51:24,680
drop the<font color="#E5E5E5"> packet and</font><font color="#CCCCCC"> you generate the ICP</font>

1312
00:51:20,930 --> 00:51:26,930
where do you send<font color="#E5E5E5"> it you don't know so</font>

1313
00:51:24,680 --> 00:51:28,700
the workaround<font color="#CCCCCC"> to</font><font color="#E5E5E5"> actually make the</font>

1314
00:51:26,930 --> 00:51:30,950
packet get delivered it's called ICMP

1315
00:51:28,700 --> 00:51:33,319
tunneling<font color="#E5E5E5"> well what happens if you drop</font>

1316
00:51:30,950 --> 00:51:35,960
<font color="#E5E5E5">a packet</font><font color="#CCCCCC"> due to TTL</font><font color="#E5E5E5"> exceed inside the</font>

1317
00:51:33,320 --> 00:51:38,510
LSP<font color="#CCCCCC"> and you generate an ICMP for it</font><font color="#E5E5E5"> you</font>

1318
00:51:35,960 --> 00:51:40,460
stick the ICMP back inside the LSP that

1319
00:51:38,510 --> 00:51:42,290
<font color="#CCCCCC">you got the original</font><font color="#E5E5E5"> packet from and so</font>

1320
00:51:40,460 --> 00:51:44,240
that packets gonna go all<font color="#CCCCCC"> the way to the</font>

1321
00:51:42,290 --> 00:51:45,170
end before<font color="#E5E5E5"> it comes back</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> you and it</font>

1322
00:51:44,240 --> 00:51:47,660
makes<font color="#E5E5E5"> your tracer outs</font>

1323
00:51:45,170 --> 00:51:49,250
look<font color="#E5E5E5"> really weird so you know you can</font>

1324
00:51:47,660 --> 00:51:50,870
<font color="#E5E5E5">kind of discount the the previous</font>

1325
00:51:49,250 --> 00:51:53,390
<font color="#CCCCCC">scenario where each hop had an</font>

1326
00:51:50,870 --> 00:51:55,160
independent return path<font color="#E5E5E5"> and now each hop</font>

1327
00:51:53,390 --> 00:51:58,160
goes all the<font color="#CCCCCC"> way</font><font color="#E5E5E5"> to the end of the LSP</font>

1328
00:51:55,160 --> 00:52:00,830
before coming back<font color="#CCCCCC"> to you it makes your</font>

1329
00:51:58,160 --> 00:52:03,049
<font color="#CCCCCC">trails look like this so in this example</font>

1330
00:52:00,830 --> 00:52:05,900
you<font color="#E5E5E5"> might you might look at this and go</font>

1331
00:52:03,050 --> 00:52:08,360
<font color="#CCCCCC">Palo Alto Global Crossing</font><font color="#E5E5E5"> some hop</font>

1332
00:52:05,900 --> 00:52:10,580
<font color="#E5E5E5">that's not in</font><font color="#CCCCCC"> dns and AT&T</font><font color="#E5E5E5"> and then AT&T</font>

1333
00:52:08,360 --> 00:52:12,530
in San Francisco and I'm going to 74

1334
00:52:10,580 --> 00:52:14,299
milliseconds so you might go<font color="#E5E5E5"> 18 T's</font>

1335
00:52:12,530 --> 00:52:15,860
congested there's some<font color="#E5E5E5"> horrible problem</font>

1336
00:52:14,300 --> 00:52:17,600
what's going on Palo Alto to San

1337
00:52:15,860 --> 00:52:19,700
Francisco shouldn't be 70 milliseconds

1338
00:52:17,600 --> 00:52:21,529
what's happening is ICP tunneling

1339
00:52:19,700 --> 00:52:23,419
because you see<font color="#CCCCCC"> it's 74 milliseconds</font>

1340
00:52:21,530 --> 00:52:25,310
every<font color="#E5E5E5"> hop all the way through to the end</font>

1341
00:52:23,420 --> 00:52:27,230
in New York which happens to be 74

1342
00:52:25,310 --> 00:52:29,270
milliseconds away so when you<font color="#E5E5E5"> see</font>

1343
00:52:27,230 --> 00:52:30,620
something like<font color="#E5E5E5"> this</font><font color="#CCCCCC"> where the latency</font>

1344
00:52:29,270 --> 00:52:32,180
even though the distance gets further

1345
00:52:30,620 --> 00:52:34,220
<font color="#E5E5E5">and</font><font color="#CCCCCC"> further away</font><font color="#E5E5E5"> but the</font><font color="#CCCCCC"> lacy stays the</font>

1346
00:52:32,180 --> 00:52:36,609
same<font color="#CCCCCC"> it's a dead</font><font color="#E5E5E5"> giveaway that</font><font color="#CCCCCC"> it's ICMP</font>

1347
00:52:34,220 --> 00:52:36,609
telling

1348
00:52:38,800 --> 00:52:41,700
<font color="#CCCCCC">I'll take questions</font>

1349
00:52:52,230 --> 00:52:58,630
so for the<font color="#E5E5E5"> load-balancing even if you</font>

1350
00:52:54,760 --> 00:53:01,300
send a<font color="#CCCCCC"> single probe</font><font color="#E5E5E5"> if you have several</font>

1351
00:52:58,630 --> 00:53:05,770
<font color="#E5E5E5">paths so to say the first hop so you</font>

1352
00:53:01,300 --> 00:53:08,830
have to pass a and<font color="#E5E5E5"> B the first hop will</font>

1353
00:53:05,770 --> 00:53:10,840
go to path a the second probe of that

1354
00:53:08,830 --> 00:53:13,990
<font color="#CCCCCC">other that's that probing session</font><font color="#E5E5E5"> will</font>

1355
00:53:10,840 --> 00:53:15,220
go to the<font color="#E5E5E5"> path B and then they could go</font>

1356
00:53:13,990 --> 00:53:22,200
<font color="#CCCCCC">back and</font><font color="#E5E5E5"> forth and you could get this</font>

1357
00:53:15,220 --> 00:53:24,490
topology<font color="#CCCCCC"> that looks like well you can</font>

1358
00:53:22,200 --> 00:53:26,529
<font color="#E5E5E5">basically the the point being there is</font>

1359
00:53:24,490 --> 00:53:28,479
<font color="#E5E5E5">no path a and there is no path B there's</font>

1360
00:53:26,530 --> 00:53:30,970
paths however many there<font color="#E5E5E5"> are</font>

1361
00:53:28,480 --> 00:53:33,850
<font color="#E5E5E5">and so when you set</font><font color="#CCCCCC"> it to a single</font><font color="#E5E5E5"> probe</font>

1362
00:53:30,970 --> 00:53:36,250
<font color="#E5E5E5">you're looking at a single path that</font>

1363
00:53:33,850 --> 00:53:40,170
you're taking<font color="#E5E5E5"> so</font><font color="#CCCCCC"> it might in</font><font color="#E5E5E5"> this</font>

1364
00:53:36,250 --> 00:53:43,000
scenario it might<font color="#E5E5E5"> go router a router</font><font color="#CCCCCC"> B 2</font>

1365
00:53:40,170 --> 00:53:44,890
router<font color="#E5E5E5"> C 1 it could happen because</font>

1366
00:53:43,000 --> 00:53:46,570
router<font color="#E5E5E5"> a it could make that</font>

1367
00:53:44,890 --> 00:53:48,520
determination that<font color="#CCCCCC"> it hashes on to a</font>

1368
00:53:46,570 --> 00:53:51,430
different<font color="#CCCCCC"> flow so you're</font><font color="#E5E5E5"> not you</font><font color="#CCCCCC"> you're</font>

1369
00:53:48,520 --> 00:53:53,140
not looking at this and saying this is

1370
00:53:51,430 --> 00:53:54,759
the<font color="#CCCCCC"> trail of dirt</font><font color="#E5E5E5"> directly</font><font color="#CCCCCC"> connected to</font>

1371
00:53:53,140 --> 00:53:58,210
<font color="#E5E5E5">routers but you're reducing confusion</font>

1372
00:53:54,760 --> 00:54:00,310
because<font color="#E5E5E5"> you're not going B 1 C 3 bingo</font>

1373
00:53:58,210 --> 00:54:02,590
what what's going on<font color="#CCCCCC"> here</font><font color="#E5E5E5"> you're at</font>

1374
00:54:00,310 --> 00:54:04,360
<font color="#E5E5E5">least seeing a single</font><font color="#CCCCCC"> consistent</font><font color="#E5E5E5"> path</font>

1375
00:54:02,590 --> 00:54:06,100
through the network that your<font color="#E5E5E5"> particular</font>

1376
00:54:04,360 --> 00:54:08,200
<font color="#E5E5E5">flow happens</font><font color="#CCCCCC"> to be</font><font color="#E5E5E5"> taking but yeah</font>

1377
00:54:06,100 --> 00:54:10,240
you're<font color="#CCCCCC"> not guaranteed if</font><font color="#E5E5E5"> you go to</font><font color="#CCCCCC"> B -</font>

1378
00:54:08,200 --> 00:54:13,899
you're<font color="#E5E5E5"> not guaranteed to go to C to your</font>

1379
00:54:10,240 --> 00:54:18,660
next time you see one<font color="#CCCCCC"> topology you're</font>

1380
00:54:13,900 --> 00:54:18,660
not guaranteed to get exactly

1381
00:54:24,290 --> 00:54:26,920
<font color="#E5E5E5">okay</font>

1382
00:54:33,140 --> 00:54:39,470
so the ways that you<font color="#E5E5E5"> can see the reverse</font>

1383
00:54:34,940 --> 00:54:40,880
<font color="#E5E5E5">paths you can do it with IEP options and</font>

1384
00:54:39,470 --> 00:54:44,529
the problem is it's<font color="#E5E5E5"> really not</font><font color="#CCCCCC"> a</font>

1385
00:54:40,880 --> 00:54:47,840
reliable<font color="#E5E5E5"> way</font><font color="#CCCCCC"> to do it you can you</font><font color="#E5E5E5"> can do</font>

1386
00:54:44,530 --> 00:54:50,150
<font color="#CCCCCC">you can actually have the packet record</font>

1387
00:54:47,840 --> 00:54:52,580
<font color="#E5E5E5">inside the the packet record the the</font>

1388
00:54:50,150 --> 00:54:54,140
<font color="#CCCCCC">hops that</font><font color="#E5E5E5"> he goes through the problem is</font>

1389
00:54:52,580 --> 00:54:56,270
that almost<font color="#E5E5E5"> every network turns that off</font>

1390
00:54:54,140 --> 00:54:58,759
<font color="#CCCCCC">because it's you know</font><font color="#E5E5E5"> it's it's CPU</font>

1391
00:54:56,270 --> 00:55:00,259
intensive on their routers<font color="#CCCCCC"> and it's it's</font>

1392
00:54:58,760 --> 00:55:02,450
weird non-standard thing<font color="#CCCCCC"> that no one</font>

1393
00:55:00,260 --> 00:55:04,220
<font color="#CCCCCC">uses so people turn off the IP option</font>

1394
00:55:02,450 --> 00:55:06,859
processing it really doesn't<font color="#CCCCCC"> work in any</font>

1395
00:55:04,220 --> 00:55:10,129
kind of reliable way on the<font color="#CCCCCC"> Internet to</font>

1396
00:55:06,860 --> 00:55:11,510
figure out the reverse paths<font color="#CCCCCC"> one of the</font>

1397
00:55:10,130 --> 00:55:14,930
things that I've<font color="#E5E5E5"> been pitching</font><font color="#CCCCCC"> which I</font>

1398
00:55:11,510 --> 00:55:16,970
think I saw<font color="#E5E5E5"> someone propose</font><font color="#CCCCCC"> to the IETF</font>

1399
00:55:14,930 --> 00:55:18,980
but I'm not sure<font color="#E5E5E5"> I don't</font><font color="#CCCCCC"> have</font><font color="#E5E5E5"> any</font>

1400
00:55:16,970 --> 00:55:20,959
<font color="#E5E5E5">details on it there's some kind of</font>

1401
00:55:18,980 --> 00:55:24,200
protocol where you can request the

1402
00:55:20,960 --> 00:55:26,060
<font color="#E5E5E5">reverse path so I might send a request</font>

1403
00:55:24,200 --> 00:55:28,430
to<font color="#E5E5E5"> your router along the way that says</font>

1404
00:55:26,060 --> 00:55:30,440
hey<font color="#E5E5E5"> you generate me a</font><font color="#CCCCCC"> traceroute packet</font>

1405
00:55:28,430 --> 00:55:32,750
and send it back<font color="#CCCCCC"> to</font><font color="#E5E5E5"> me and so you could</font>

1406
00:55:30,440 --> 00:55:34,880
use<font color="#E5E5E5"> something like</font><font color="#CCCCCC"> that to figure out</font>

1407
00:55:32,750 --> 00:55:36,770
the reverse path along the<font color="#CCCCCC"> way and</font>

1408
00:55:34,880 --> 00:55:38,480
that's just a<font color="#E5E5E5"> question of can it be</font>

1409
00:55:36,770 --> 00:55:41,450
designed securely and will people

1410
00:55:38,480 --> 00:55:43,640
<font color="#E5E5E5">implement this</font><font color="#CCCCCC"> there's nothing that's</font>

1411
00:55:41,450 --> 00:55:46,580
out there today<font color="#CCCCCC"> that works but you know</font>

1412
00:55:43,640 --> 00:55:49,609
it's a good<font color="#E5E5E5"> theory for for a way to fix</font>

1413
00:55:46,580 --> 00:55:52,060
<font color="#E5E5E5">this problem in the future</font><font color="#CCCCCC"> that's</font><font color="#E5E5E5"> all</font>

1414
00:55:49,610 --> 00:55:52,060
that I've seen

1415
00:55:56,079 --> 00:56:00,609
going once twice<font color="#CCCCCC"> sold</font>

