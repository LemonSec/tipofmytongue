1
00:00:00,210 --> 00:00:04,588
on time but that's good we'll have<font color="#CCCCCC"> time</font>

2
00:00:02,190 --> 00:00:06,680
for more<font color="#CCCCCC"> questions so next up</font><font color="#E5E5E5"> we have</font>

3
00:00:04,589 --> 00:00:10,050
<font color="#E5E5E5">Danny Reisman from peak web consulting</font>

4
00:00:06,680 --> 00:00:12,030
<font color="#CCCCCC">giving a talk</font><font color="#E5E5E5"> about</font><font color="#CCCCCC"> our STP to MSTP</font>

5
00:00:10,050 --> 00:00:14,330
spanning tree migration in a live data

6
00:00:12,030 --> 00:00:14,329
center

7
00:00:47,640 --> 00:00:54,390
morning everybody<font color="#CCCCCC"> Wow her super early</font>

8
00:00:49,980 --> 00:00:55,879
<font color="#CCCCCC">it's nice but everybody made it</font><font color="#E5E5E5"> which is</font>

9
00:00:54,390 --> 00:00:59,160
really<font color="#E5E5E5"> good</font>

10
00:00:55,879 --> 00:01:00,780
hi my name<font color="#CCCCCC"> is Donnie Royce Minh and I</font>

11
00:00:59,160 --> 00:01:03,259
work with<font color="#CCCCCC"> pika web consulting</font><font color="#E5E5E5"> I've been</font>

12
00:01:00,780 --> 00:01:06,240
doing this for about<font color="#E5E5E5"> four</font><font color="#CCCCCC"> years we do</font>

13
00:01:03,259 --> 00:01:07,920
basically contract work for<font color="#CCCCCC"> network</font>

14
00:01:06,240 --> 00:01:10,020
engineering contract work so folks that

15
00:01:07,920 --> 00:01:11,700
<font color="#E5E5E5">need additional staff or need more</font>

16
00:01:10,020 --> 00:01:13,860
<font color="#CCCCCC">sophisticated staff or need a second</font>

17
00:01:11,700 --> 00:01:16,680
pair<font color="#CCCCCC"> of eyes</font><font color="#E5E5E5"> and don't have it</font><font color="#CCCCCC"> in-house</font>

18
00:01:13,860 --> 00:01:18,000
they can call us up<font color="#E5E5E5"> and it's been nice</font>

19
00:01:16,680 --> 00:01:18,930
<font color="#E5E5E5">about this</font><font color="#CCCCCC"> I've</font><font color="#E5E5E5"> been</font><font color="#CCCCCC"> able to see a lot</font>

20
00:01:18,000 --> 00:01:20,220
<font color="#CCCCCC">of really</font><font color="#E5E5E5"> interesting Network</font>

21
00:01:18,930 --> 00:01:23,039
environments have been able to<font color="#E5E5E5"> come</font><font color="#CCCCCC"> into</font>

22
00:01:20,220 --> 00:01:25,050
<font color="#E5E5E5">a lot of existing operational</font>

23
00:01:23,039 --> 00:01:26,550
environments and find<font color="#CCCCCC"> places where</font>

24
00:01:25,050 --> 00:01:28,830
people have done<font color="#E5E5E5"> things</font><font color="#CCCCCC"> differently then</font>

25
00:01:26,550 --> 00:01:31,920
I<font color="#E5E5E5"> I've done in my previous organizations</font>

26
00:01:28,830 --> 00:01:33,929
<font color="#CCCCCC">I find places were find lots of cool</font>

27
00:01:31,920 --> 00:01:35,970
mistakes that we get to fix<font color="#E5E5E5"> or we get to</font>

28
00:01:33,929 --> 00:01:37,979
talk about a lot<font color="#CCCCCC"> more than just if</font>

29
00:01:35,970 --> 00:01:39,270
you're working in<font color="#E5E5E5"> one</font><font color="#CCCCCC"> Enterprise for</font><font color="#E5E5E5"> a</font>

30
00:01:37,979 --> 00:01:43,140
while which is<font color="#E5E5E5"> what I was doing before</font>

31
00:01:39,270 --> 00:01:45,360
<font color="#CCCCCC">this so this talk I'll just talk about</font>

32
00:01:43,140 --> 00:01:47,190
we found ourselves in a<font color="#CCCCCC"> situation</font><font color="#E5E5E5"> on a</font>

33
00:01:45,360 --> 00:01:49,350
network<font color="#E5E5E5"> we were charged with</font><font color="#CCCCCC"> running</font>

34
00:01:47,190 --> 00:01:51,330
where we had to migrate<font color="#CCCCCC"> from a pervy</font>

35
00:01:49,350 --> 00:01:53,100
land rapid spanning tree to multiple

36
00:01:51,330 --> 00:01:55,560
spanning tree because of<font color="#E5E5E5"> some high</font>

37
00:01:53,100 --> 00:01:57,030
utilization in the network<font color="#E5E5E5"> core so our</font>

38
00:01:55,560 --> 00:01:59,130
primary<font color="#E5E5E5"> challenge was migrating with</font>

39
00:01:57,030 --> 00:02:00,450
minimal impact<font color="#E5E5E5"> to</font><font color="#CCCCCC"> a live production</font>

40
00:01:59,130 --> 00:02:02,460
<font color="#E5E5E5">network we had lots of customers lots of</font>

41
00:02:00,450 --> 00:02:03,720
bits flowing<font color="#E5E5E5"> and we didn't want</font><font color="#CCCCCC"> to do a</font>

42
00:02:02,460 --> 00:02:05,789
<font color="#E5E5E5">major hit since this was pretty much</font>

43
00:02:03,720 --> 00:02:07,530
<font color="#E5E5E5">data center wide our secondary</font>

44
00:02:05,790 --> 00:02:10,950
challenges were to define some best

45
00:02:07,530 --> 00:02:12,810
<font color="#E5E5E5">practices for MST that gave us really</font>

46
00:02:10,949 --> 00:02:16,078
<font color="#E5E5E5">good</font><font color="#CCCCCC"> stability with a good future</font><font color="#E5E5E5"> of</font>

47
00:02:12,810 --> 00:02:18,090
flexibility<font color="#E5E5E5"> and all at the same time</font><font color="#CCCCCC"> we</font>

48
00:02:16,079 --> 00:02:19,860
had<font color="#E5E5E5"> really limited reference material</font>

49
00:02:18,090 --> 00:02:20,880
<font color="#CCCCCC">that we could find online</font><font color="#E5E5E5"> folks we spoke</font>

50
00:02:19,860 --> 00:02:22,860
to not a<font color="#E5E5E5"> lot of people</font><font color="#CCCCCC"> have been</font>

51
00:02:20,880 --> 00:02:25,260
deploying MST at least that I could<font color="#CCCCCC"> do</font>

52
00:02:22,860 --> 00:02:26,700
that<font color="#E5E5E5"> I had access to and we didn't have</font>

53
00:02:25,260 --> 00:02:28,620
a lot of<font color="#E5E5E5"> experience and really</font><font color="#CCCCCC"> I'm</font>

54
00:02:26,700 --> 00:02:30,390
saying a lot<font color="#E5E5E5"> of previous failures we get</font>

55
00:02:28,620 --> 00:02:32,489
to use<font color="#E5E5E5"> we all get to use our failures to</font>

56
00:02:30,390 --> 00:02:33,809
build<font color="#E5E5E5"> best case practices we usually</font>

57
00:02:32,489 --> 00:02:37,290
don't just deploy something<font color="#E5E5E5"> once and</font><font color="#CCCCCC"> say</font>

58
00:02:33,810 --> 00:02:40,260
hey we did<font color="#CCCCCC"> it right and I really I</font>

59
00:02:37,290 --> 00:02:41,790
<font color="#CCCCCC">really enjoy having</font><font color="#E5E5E5"> a bag full of</font>

60
00:02:40,260 --> 00:02:43,290
failures that<font color="#CCCCCC"> I take along with me to</font>

61
00:02:41,790 --> 00:02:44,940
new<font color="#E5E5E5"> jobs because I can say here's all</font>

62
00:02:43,290 --> 00:02:46,290
the ways that<font color="#E5E5E5"> we've tried it that it</font>

63
00:02:44,940 --> 00:02:47,760
<font color="#CCCCCC">doesn't work</font><font color="#E5E5E5"> so I feel really</font>

64
00:02:46,290 --> 00:02:49,069
<font color="#E5E5E5">comfortable confident about</font><font color="#CCCCCC"> doing it</font>

65
00:02:47,760 --> 00:02:52,249
this<font color="#CCCCCC"> way because</font>

66
00:02:49,069 --> 00:02:53,659
<font color="#CCCCCC">I know</font><font color="#E5E5E5"> it'll work</font><font color="#CCCCCC"> really really well</font><font color="#E5E5E5"> so</font>

67
00:02:52,249 --> 00:02:55,879
what this isn't<font color="#CCCCCC"> about I'm not going to</font>

68
00:02:53,659 --> 00:02:57,650
<font color="#E5E5E5">get into the</font><font color="#CCCCCC"> nitty-gritty of rstp</font><font color="#E5E5E5"> MST</font>

69
00:02:55,879 --> 00:03:00,849
state machine topology<font color="#E5E5E5"> change</font>

70
00:02:57,650 --> 00:03:03,499
notifications<font color="#E5E5E5"> CST highest EC is</font><font color="#CCCCCC"> T I</font>

71
00:03:00,849 --> 00:03:05,298
really got<font color="#CCCCCC"> to be honest with you</font><font color="#E5E5E5"> I read</font>

72
00:03:03,499 --> 00:03:06,709
so much about<font color="#E5E5E5"> this I read the vendor</font>

73
00:03:05,299 --> 00:03:09,349
<font color="#E5E5E5">Docs over the white paper sort of the</font>

74
00:03:06,709 --> 00:03:10,489
specs<font color="#CCCCCC"> I got lost in</font><font color="#E5E5E5"> the details some of</font>

75
00:03:09,349 --> 00:03:12,200
<font color="#CCCCCC">the stuff I</font><font color="#E5E5E5"> don't</font><font color="#CCCCCC"> even</font><font color="#E5E5E5"> exactly</font>

76
00:03:10,489 --> 00:03:14,299
<font color="#E5E5E5">understand and</font><font color="#CCCCCC"> I probably wasted a</font>

77
00:03:12,200 --> 00:03:16,219
<font color="#CCCCCC">couple days trying</font><font color="#E5E5E5"> to understand all the</font>

78
00:03:14,299 --> 00:03:19,730
<font color="#CCCCCC">terminology before I just really jumped</font>

79
00:03:16,219 --> 00:03:21,560
in and got<font color="#E5E5E5"> my hand dirty but if you're</font>

80
00:03:19,730 --> 00:03:22,849
interested<font color="#CCCCCC"> check the vendor DAF so check</font>

81
00:03:21,560 --> 00:03:24,859
the white papers you can<font color="#E5E5E5"> read all</font><font color="#CCCCCC"> about</font>

82
00:03:22,849 --> 00:03:26,358
it<font color="#CCCCCC"> you can maybe be get as confused as I</font>

83
00:03:24,859 --> 00:03:28,159
am<font color="#E5E5E5"> and say you know what I'm just</font><font color="#CCCCCC"> gonna</font>

84
00:03:26,359 --> 00:03:29,079
type the config<font color="#CCCCCC"> type</font><font color="#E5E5E5"> of statements</font><font color="#CCCCCC"> and</font>

85
00:03:28,159 --> 00:03:31,040
see what happens

86
00:03:29,079 --> 00:03:33,079
who's gonna be treated in the statement

87
00:03:31,040 --> 00:03:35,418
<font color="#E5E5E5">if you run data centers with large</font>

88
00:03:33,079 --> 00:03:37,099
number of VLANs<font color="#CCCCCC"> if you have layer 2</font>

89
00:03:35,419 --> 00:03:39,169
connectivity to top of your<font color="#CCCCCC"> racks</font><font color="#E5E5E5"> which</font>

90
00:03:37,099 --> 00:03:40,488
<font color="#E5E5E5">is if you're having scaling issues with</font>

91
00:03:39,169 --> 00:03:42,680
a large number of spanning tree

92
00:03:40,489 --> 00:03:44,810
instances if you're<font color="#CCCCCC"> running some vendor</font>

93
00:03:42,680 --> 00:03:46,699
equipment that runs in default<font color="#E5E5E5"> in a mode</font>

94
00:03:44,810 --> 00:03:50,870
that<font color="#CCCCCC"> needs to be adapted as</font><font color="#E5E5E5"> network</font>

95
00:03:46,699 --> 00:03:52,129
<font color="#CCCCCC">grows to a significant scale let me tell</font>

96
00:03:50,870 --> 00:03:53,689
you a<font color="#E5E5E5"> little</font><font color="#CCCCCC"> bit about our environment</font>

97
00:03:52,129 --> 00:03:54,858
this<font color="#E5E5E5"> is really a sample of the real</font>

98
00:03:53,689 --> 00:03:56,299
environment<font color="#CCCCCC"> obviously I can't show you</font>

99
00:03:54,859 --> 00:04:02,689
<font color="#E5E5E5">the exact environment this is</font><font color="#CCCCCC"> a pretty</font>

100
00:03:56,299 --> 00:04:04,310
good representation excuse me I'm not

101
00:04:02,689 --> 00:04:06,709
spreading<font color="#E5E5E5"> this around I promise</font><font color="#CCCCCC"> I am</font>

102
00:04:04,310 --> 00:04:09,379
<font color="#CCCCCC">actually on the healthy side</font><font color="#E5E5E5"> sick last</font>

103
00:04:06,709 --> 00:04:10,879
week I was on<font color="#CCCCCC"> six out of sing so we had</font>

104
00:04:09,379 --> 00:04:12,828
a<font color="#CCCCCC"> managed hosting facility</font><font color="#E5E5E5"> we need</font><font color="#CCCCCC"> a</font>

105
00:04:10,879 --> 00:04:14,418
flexibility of putting any VLAN to any

106
00:04:12,829 --> 00:04:16,099
server and in<font color="#CCCCCC"> Iraq throughout the data</font>

107
00:04:14,419 --> 00:04:19,159
center<font color="#E5E5E5"> every customer has their own</font>

108
00:04:16,099 --> 00:04:20,959
<font color="#CCCCCC">dedicated VLAN and their own subnet we</font>

109
00:04:19,159 --> 00:04:23,150
had layer 2 switches in the racks up

110
00:04:20,959 --> 00:04:26,240
linking to layer 3 layer 3<font color="#E5E5E5"> collapse</font>

111
00:04:23,150 --> 00:04:27,650
distribution core<font color="#E5E5E5"> switches we didn't</font>

112
00:04:26,240 --> 00:04:29,360
have<font color="#E5E5E5"> fault</font><font color="#CCCCCC"> tolerant</font><font color="#E5E5E5"> to no single point</font>

113
00:04:27,650 --> 00:04:32,179
of failure so<font color="#E5E5E5"> therefore running spanning</font>

114
00:04:29,360 --> 00:04:33,710
tree<font color="#CCCCCC"> to up links to heavy racks which we</font>

115
00:04:32,180 --> 00:04:34,969
had in<font color="#CCCCCC"> this environment over to our</font>

116
00:04:33,710 --> 00:04:38,210
customers in the data center so we had

117
00:04:34,969 --> 00:04:39,620
over<font color="#CCCCCC"> 200 live VLANs so</font><font color="#E5E5E5"> where the network</font>

118
00:04:38,210 --> 00:04:41,719
works<font color="#E5E5E5"> you've all seen this before</font>

119
00:04:39,620 --> 00:04:44,090
a couple layer<font color="#CCCCCC"> 3 cores that</font><font color="#E5E5E5"> you know it</font>

120
00:04:41,719 --> 00:04:47,810
<font color="#E5E5E5">looks</font><font color="#CCCCCC"> ok a couple layer 3 cores up here</font>

121
00:04:44,090 --> 00:04:50,388
and a whole<font color="#CCCCCC"> bunch of rack 1-2-3 rack</font>

122
00:04:47,810 --> 00:04:53,060
number<font color="#E5E5E5"> n</font><font color="#CCCCCC"> and dual uplink everybody</font>

123
00:04:50,389 --> 00:04:54,349
blocking towards<font color="#E5E5E5"> core switch to that way</font>

124
00:04:53,060 --> 00:04:55,909
we can guarantee hundred percent

125
00:04:54,349 --> 00:04:58,010
capacity<font color="#CCCCCC"> of course which one or an</font>

126
00:04:55,909 --> 00:05:00,629
uplink were to fail<font color="#E5E5E5"> we know there's an</font>

127
00:04:58,010 --> 00:05:02,979
availability<font color="#E5E5E5"> on the</font>

128
00:05:00,629 --> 00:05:05,169
the problem we saw was<font color="#E5E5E5"> we had a high</font>

129
00:05:02,979 --> 00:05:06,909
<font color="#E5E5E5">number</font><font color="#CCCCCC"> of spanning tree with Cisco calls</font>

130
00:05:05,169 --> 00:05:09,698
logical port instances we were running

131
00:05:06,909 --> 00:05:12,099
Cisco's here<font color="#E5E5E5"> and their default is per</font>

132
00:05:09,699 --> 00:05:13,929
VLAN spanning tree in this<font color="#E5E5E5"> case it was</font>

133
00:05:12,099 --> 00:05:16,179
rst<font color="#E5E5E5"> pieces called rapid</font><font color="#CCCCCC"> PPS T and the</font>

134
00:05:13,929 --> 00:05:17,739
config what you do is you multiply<font color="#E5E5E5"> the</font>

135
00:05:16,179 --> 00:05:19,328
number of VLANs<font color="#E5E5E5"> by the number of</font>

136
00:05:17,739 --> 00:05:21,219
<font color="#E5E5E5">interfaces that</font><font color="#CCCCCC"> are actually live</font><font color="#E5E5E5"> and</font>

137
00:05:19,329 --> 00:05:23,349
you get a logical port a number of

138
00:05:21,219 --> 00:05:25,329
logical port instances<font color="#E5E5E5"> we were in the I</font>

139
00:05:23,349 --> 00:05:27,209
<font color="#E5E5E5">think we were about 6000 on the switch</font>

140
00:05:25,329 --> 00:05:29,559
or start<font color="#E5E5E5"> with</font><font color="#CCCCCC"> 8000 on the switch</font>

141
00:05:27,209 --> 00:05:31,179
<font color="#E5E5E5">recommendation was</font><font color="#CCCCCC"> not to exceed</font><font color="#E5E5E5"> 6000</font>

142
00:05:29,559 --> 00:05:32,979
and every time you added<font color="#CCCCCC"> a new port or</font>

143
00:05:31,179 --> 00:05:34,748
VLAN you got a little syslog message

144
00:05:32,979 --> 00:05:38,589
saying you exceeded<font color="#E5E5E5"> the recommended</font>

145
00:05:34,749 --> 00:05:40,089
maximum what we<font color="#E5E5E5"> ended up with was we had</font>

146
00:05:38,589 --> 00:05:42,399
too many spanning tree<font color="#E5E5E5"> instances for the</font>

147
00:05:40,089 --> 00:05:44,229
layer 3<font color="#E5E5E5"> course which their concerns of</font>

148
00:05:42,399 --> 00:05:47,379
CP utilization<font color="#CCCCCC"> keeping track of all</font>

149
00:05:44,229 --> 00:05:50,279
<font color="#E5E5E5">those BPD use memorization keeping track</font>

150
00:05:47,379 --> 00:05:52,599
of<font color="#E5E5E5"> all the Spanish state machines</font>

151
00:05:50,279 --> 00:05:54,279
<font color="#CCCCCC">convergence when links come up if you</font>

152
00:05:52,599 --> 00:05:55,808
spend too much CPU<font color="#E5E5E5"> cycles and you start</font>

153
00:05:54,279 --> 00:05:58,389
<font color="#CCCCCC">flopping all sorts of other real time</font>

154
00:05:55,809 --> 00:06:00,699
protocols<font color="#CCCCCC"> H SRP maybe I was PF if your</font>

155
00:05:58,389 --> 00:06:02,109
timers are<font color="#CCCCCC"> set really low maybe</font>

156
00:06:00,699 --> 00:06:04,989
<font color="#CCCCCC">BFD if you don't have your</font><font color="#E5E5E5"> new</font>

157
00:06:02,109 --> 00:06:09,099
centralized forwarding there so resource

158
00:06:04,989 --> 00:06:10,539
exhaustion<font color="#E5E5E5"> at the core from</font><font color="#CCCCCC"> want to take</font>

159
00:06:09,099 --> 00:06:12,399
a<font color="#CCCCCC"> moment talk about per VLAN spanning</font>

160
00:06:10,539 --> 00:06:14,679
<font color="#E5E5E5">Francisco prevalent spanning tree is the</font>

161
00:06:12,399 --> 00:06:16,360
default<font color="#E5E5E5"> I haven't found a way</font><font color="#CCCCCC"> to</font>

162
00:06:14,679 --> 00:06:19,839
actually switch to<font color="#E5E5E5"> single</font><font color="#CCCCCC"> instance</font>

163
00:06:16,360 --> 00:06:21,369
spanning tree with you know and I

164
00:06:19,839 --> 00:06:22,599
apologize<font color="#CCCCCC"> I realized too late I actually</font>

165
00:06:21,369 --> 00:06:24,129
put foundry here and I know we're

166
00:06:22,599 --> 00:06:26,739
<font color="#CCCCCC">supposed to</font><font color="#E5E5E5"> say brocade so with brocade</font>

167
00:06:24,129 --> 00:06:28,839
<font color="#E5E5E5">IP switches which used to be foundries</font>

168
00:06:26,739 --> 00:06:29,979
they offer a per VLAN mode which

169
00:06:28,839 --> 00:06:33,279
<font color="#CCCCCC">interoperate should really</font><font color="#E5E5E5"> really well</font>

170
00:06:29,979 --> 00:06:34,359
with<font color="#E5E5E5"> Cisco the</font><font color="#CCCCCC"> juniper</font><font color="#E5E5E5"> MX's and exas in</font>

171
00:06:33,279 --> 00:06:35,709
the newer code they have<font color="#E5E5E5"> something they</font>

172
00:06:34,359 --> 00:06:39,989
<font color="#E5E5E5">call vstp</font>

173
00:06:35,709 --> 00:06:41,859
which which interoperates with<font color="#CCCCCC"> cisco</font>

174
00:06:39,989 --> 00:06:43,089
reportedly really well i haven't<font color="#E5E5E5"> had an</font>

175
00:06:41,859 --> 00:06:46,269
opportunity<font color="#E5E5E5"> in large scale to do this</font>

176
00:06:43,089 --> 00:06:48,969
<font color="#CCCCCC">for stan</font><font color="#E5E5E5"> the FTOs and the newer SFTs</font>

177
00:06:46,269 --> 00:06:51,539
<font color="#CCCCCC">affronting s-series they offer a</font><font color="#E5E5E5"> PBS</font><font color="#CCCCCC"> T</font>

178
00:06:48,969 --> 00:06:54,369
<font color="#CCCCCC">Plus which I just</font><font color="#E5E5E5"> learned this morning</font>

179
00:06:51,539 --> 00:06:56,349
<font color="#E5E5E5">automatically discovers</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> 2.1</font><font color="#CCCCCC"> d vs ater</font>

180
00:06:54,369 --> 00:06:59,109
<font color="#CCCCCC">to no one</font><font color="#E5E5E5"> w so legacy spanning tree</font>

181
00:06:56,349 --> 00:07:00,729
rapid<font color="#CCCCCC"> spanning tree interoperate so</font><font color="#E5E5E5"> lots</font>

182
00:06:59,109 --> 00:07:03,758
of vendors will run in<font color="#E5E5E5"> this mode</font>

183
00:07:00,729 --> 00:07:05,409
Cisco's is the one which<font color="#CCCCCC"> really it kind</font>

184
00:07:03,759 --> 00:07:07,169
<font color="#CCCCCC">of inspired this this talk because it</font>

185
00:07:05,409 --> 00:07:09,820
runs by default in this moon and

186
00:07:07,169 --> 00:07:12,700
when you scale you start having some

187
00:07:09,820 --> 00:07:14,409
problems so looking back we're talking

188
00:07:12,700 --> 00:07:16,360
<font color="#CCCCCC">about</font><font color="#E5E5E5"> this internally when I spent so</font>

189
00:07:14,410 --> 00:07:18,460
much time<font color="#E5E5E5"> on this project like you know</font>

190
00:07:16,360 --> 00:07:19,780
<font color="#CCCCCC">where we</font><font color="#E5E5E5"> too spoiled with</font><font color="#CCCCCC"> too pervy</font><font color="#E5E5E5"> land</font>

191
00:07:18,460 --> 00:07:22,180
spanning tree

192
00:07:19,780 --> 00:07:24,280
<font color="#E5E5E5">Cisco's it's really nice that way and</font><font color="#CCCCCC"> we</font>

193
00:07:22,180 --> 00:07:25,780
we some of us<font color="#E5E5E5"> really grew up on Cisco</font>

194
00:07:24,280 --> 00:07:27,638
switches and we thought this was the

195
00:07:25,780 --> 00:07:29,138
<font color="#E5E5E5">right way</font><font color="#CCCCCC"> to do it but do we really</font><font color="#E5E5E5"> need</font>

196
00:07:27,639 --> 00:07:30,400
<font color="#E5E5E5">it in a data center environment data</font>

197
00:07:29,139 --> 00:07:32,380
<font color="#E5E5E5">center environment it's really</font><font color="#CCCCCC"> simple</font>

198
00:07:30,400 --> 00:07:36,489
<font color="#E5E5E5">you</font><font color="#CCCCCC"> have a whole</font><font color="#E5E5E5"> bunch of inverse</font>

199
00:07:32,380 --> 00:07:37,600
triangles or<font color="#CCCCCC"> v-shaped networks where we</font>

200
00:07:36,490 --> 00:07:38,919
<font color="#E5E5E5">don't want to use the alternate</font><font color="#CCCCCC"> path</font>

201
00:07:37,600 --> 00:07:40,479
during<font color="#E5E5E5"> steady state we want a</font><font color="#CCCCCC"> hundred</font>

202
00:07:38,919 --> 00:07:42,880
percent on<font color="#CCCCCC"> linked one and how much to</font>

203
00:07:40,479 --> 00:07:46,060
<font color="#E5E5E5">back up on</font><font color="#CCCCCC"> linked to in</font><font color="#E5E5E5"> this sub metro</font>

204
00:07:42,880 --> 00:07:48,969
environments or in in legacy time when

205
00:07:46,060 --> 00:07:50,740
we actually<font color="#E5E5E5"> had resource limitations on</font>

206
00:07:48,970 --> 00:07:52,210
the links we would make a make large

207
00:07:50,740 --> 00:07:53,889
rings and we would send some VLANs this

208
00:07:52,210 --> 00:07:55,750
way and some villains<font color="#E5E5E5"> that way and that</font>

209
00:07:53,889 --> 00:07:56,800
<font color="#E5E5E5">was great but the data center varmint we</font>

210
00:07:55,750 --> 00:07:58,990
really don't need it<font color="#CCCCCC"> we just need layer</font>

211
00:07:56,800 --> 00:08:00,729
<font color="#E5E5E5">two</font><font color="#CCCCCC"> redundant paths one</font><font color="#E5E5E5"> uplink passing</font>

212
00:07:58,990 --> 00:08:03,100
one uplink blocking and some kind of

213
00:08:00,729 --> 00:08:04,419
rapid failover<font color="#E5E5E5"> if there's an outage of</font>

214
00:08:03,100 --> 00:08:07,120
some kind or<font color="#E5E5E5"> to allow for easy</font>

215
00:08:04,419 --> 00:08:08,620
maintenance<font color="#CCCCCC"> --is</font><font color="#E5E5E5"> so those are options so</font>

216
00:08:07,120 --> 00:08:10,900
our simple solution is<font color="#E5E5E5"> just to collapse</font>

217
00:08:08,620 --> 00:08:11,890
<font color="#CCCCCC">- from a privy</font><font color="#E5E5E5"> land to a single</font><font color="#CCCCCC"> instance</font>

218
00:08:10,900 --> 00:08:13,690
spanning tree but<font color="#E5E5E5"> since we're running</font>

219
00:08:11,890 --> 00:08:15,909
<font color="#CCCCCC">Cisco</font><font color="#E5E5E5"> the only one to reduce the number</font>

220
00:08:13,690 --> 00:08:18,669
of<font color="#E5E5E5"> logical port instances was to migrate</font>

221
00:08:15,910 --> 00:08:20,410
to MST<font color="#CCCCCC"> either</font><font color="#E5E5E5"> - don't want multiple</font>

222
00:08:18,669 --> 00:08:21,640
spanning tree ironically was called

223
00:08:20,410 --> 00:08:22,870
multiple spanning tree but<font color="#E5E5E5"> in our</font>

224
00:08:21,640 --> 00:08:24,460
environment we're trying to create<font color="#CCCCCC"> a</font>

225
00:08:22,870 --> 00:08:25,930
single spanning tree using multiple

226
00:08:24,460 --> 00:08:28,359
Spanish she was kind of hard to convince

227
00:08:25,930 --> 00:08:30,190
the client<font color="#E5E5E5"> the customer of ours that</font>

228
00:08:28,360 --> 00:08:33,250
<font color="#CCCCCC">this was the right</font><font color="#E5E5E5"> way</font><font color="#CCCCCC"> to go because</font>

229
00:08:30,190 --> 00:08:34,799
because the terminology so here's the

230
00:08:33,250 --> 00:08:37,539
solution design that we came<font color="#E5E5E5"> up</font><font color="#CCCCCC"> with</font>

231
00:08:34,799 --> 00:08:40,559
<font color="#E5E5E5">service T allows you pretty much to map</font>

232
00:08:37,539 --> 00:08:44,350
multiple<font color="#E5E5E5"> VLANs into a single instance</font>

233
00:08:40,559 --> 00:08:46,119
<font color="#CCCCCC">802 dot 1s is a standard allows really</font>

234
00:08:44,350 --> 00:08:47,589
good vendor interoperability for

235
00:08:46,120 --> 00:08:48,959
multiple spanning trees where some

236
00:08:47,589 --> 00:08:51,550
vendors<font color="#E5E5E5"> were doing single instances</font>

237
00:08:48,959 --> 00:08:52,869
<font color="#CCCCCC">tipple</font><font color="#E5E5E5"> get used in non Cisco environment</font>

238
00:08:51,550 --> 00:08:54,910
is you're doing load sharing you're

239
00:08:52,870 --> 00:08:57,250
<font color="#CCCCCC">sending some VLANs live here</font><font color="#E5E5E5"> and some of</font>

240
00:08:54,910 --> 00:08:58,420
the islands live there<font color="#E5E5E5"> and a ring VLANs</font>

241
00:08:57,250 --> 00:09:00,430
in multiple different directions

242
00:08:58,420 --> 00:09:02,020
now the<font color="#E5E5E5"> driver for using this on Cisco</font>

243
00:09:00,430 --> 00:09:03,400
equipment because<font color="#CCCCCC"> disk already has this</font>

244
00:09:02,020 --> 00:09:04,630
<font color="#E5E5E5">is wonderful</font><font color="#CCCCCC"> pretty</font><font color="#E5E5E5"> LAN</font>

245
00:09:03,400 --> 00:09:08,410
well you need<font color="#E5E5E5"> to</font><font color="#CCCCCC"> reduce</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> number of</font>

246
00:09:04,630 --> 00:09:09,550
<font color="#CCCCCC">instances what are the problems</font><font color="#E5E5E5"> with MST</font>

247
00:09:08,410 --> 00:09:11,740
<font color="#E5E5E5">so there's a new configuration</font>

248
00:09:09,550 --> 00:09:13,599
complexity<font color="#CCCCCC"> all switches within one</font>

249
00:09:11,740 --> 00:09:14,920
region which in our environments

250
00:09:13,600 --> 00:09:16,690
typically one data<font color="#E5E5E5"> center</font><font color="#CCCCCC"> is one region</font>

251
00:09:14,920 --> 00:09:16,969
<font color="#CCCCCC">or it may be</font><font color="#E5E5E5"> a slice</font><font color="#CCCCCC"> of data</font><font color="#E5E5E5"> center if</font>

252
00:09:16,690 --> 00:09:19,069
you

253
00:09:16,970 --> 00:09:21,319
very<font color="#E5E5E5"> large environment they have</font><font color="#CCCCCC"> to have</font>

254
00:09:19,069 --> 00:09:23,599
the same exact if<font color="#E5E5E5"> you lend MST mapping</font>

255
00:09:21,319 --> 00:09:25,550
on every single layer 2 switch

256
00:09:23,600 --> 00:09:27,680
participating in the region<font color="#CCCCCC"> in</font><font color="#E5E5E5"> order for</font>

257
00:09:25,550 --> 00:09:30,319
this to work<font color="#CCCCCC"> so it means that</font><font color="#E5E5E5"> anytime</font>

258
00:09:27,680 --> 00:09:32,089
<font color="#E5E5E5">you make a VLAN or an MST mapping change</font>

259
00:09:30,319 --> 00:09:33,620
<font color="#CCCCCC">you have to update every single switch</font>

260
00:09:32,089 --> 00:09:35,180
in that environment<font color="#CCCCCC"> there's an issue</font>

261
00:09:33,620 --> 00:09:37,399
with change control for<font color="#CCCCCC"> example if</font>

262
00:09:35,180 --> 00:09:40,099
you're adding a new<font color="#E5E5E5"> a player VLAN</font><font color="#CCCCCC"> a</font>

263
00:09:37,399 --> 00:09:41,750
<font color="#E5E5E5">database or</font><font color="#CCCCCC"> middleware VLAN now you need</font>

264
00:09:40,100 --> 00:09:45,110
to update<font color="#E5E5E5"> all</font><font color="#CCCCCC"> of your web server racks</font>

265
00:09:41,750 --> 00:09:46,939
with<font color="#E5E5E5"> the new mapping if it's Jordan unto</font>

266
00:09:45,110 --> 00:09:48,889
<font color="#E5E5E5">a new instance or if it joined existing</font>

267
00:09:46,939 --> 00:09:51,349
<font color="#CCCCCC">instance wasn't previously</font><font color="#E5E5E5"> pre generated</font>

268
00:09:48,889 --> 00:09:52,670
and if you have a very strict<font color="#CCCCCC"> change</font>

269
00:09:51,350 --> 00:09:54,259
control environment<font color="#E5E5E5"> you're gonna have to</font>

270
00:09:52,670 --> 00:09:55,759
<font color="#E5E5E5">justify why are we touching web server</font>

271
00:09:54,259 --> 00:09:59,209
racks<font color="#E5E5E5"> when all we're doing is adding an</font>

272
00:09:55,759 --> 00:10:01,759
app server<font color="#E5E5E5"> VLAN so that might impact you</font>

273
00:09:59,209 --> 00:10:03,170
in your environment<font color="#E5E5E5"> some of the design</font>

274
00:10:01,759 --> 00:10:05,149
ideas we considered while trying<font color="#E5E5E5"> to</font>

275
00:10:03,170 --> 00:10:06,620
<font color="#E5E5E5">build this up should we just go</font><font color="#CCCCCC"> ahead</font>

276
00:10:05,149 --> 00:10:08,480
and<font color="#E5E5E5"> create just make a single instance</font>

277
00:10:06,620 --> 00:10:09,800
<font color="#E5E5E5">put</font><font color="#CCCCCC"> 4000 VLANs in it and we're</font><font color="#E5E5E5"> done</font>

278
00:10:08,480 --> 00:10:11,569
we're back to single instance spanning

279
00:10:09,800 --> 00:10:14,839
tree like we've been doing years before

280
00:10:11,569 --> 00:10:17,360
or on other vendor platforms<font color="#CCCCCC"> or should</font>

281
00:10:14,839 --> 00:10:18,680
we pre create some instances<font color="#E5E5E5"> so</font><font color="#CCCCCC"> we could</font>

282
00:10:17,360 --> 00:10:20,420
<font color="#CCCCCC">be a little</font><font color="#E5E5E5"> bit smarter and anticipate</font>

283
00:10:18,680 --> 00:10:22,579
<font color="#CCCCCC">ok we'll make</font><font color="#E5E5E5"> an instance number one and</font>

284
00:10:20,420 --> 00:10:24,139
put<font color="#E5E5E5"> 100 VLANs it's number 100 for the</font>

285
00:10:22,579 --> 00:10:26,209
next hundred VLANs and<font color="#E5E5E5"> the 200 for the</font>

286
00:10:24,139 --> 00:10:29,269
next<font color="#CCCCCC"> hundred VLANs and kind</font><font color="#E5E5E5"> of get the</font>

287
00:10:26,209 --> 00:10:31,069
whole full VLAN bucket bucket<font color="#E5E5E5"> covered</font>

288
00:10:29,269 --> 00:10:32,689
that way<font color="#E5E5E5"> and then we look back said hold</font>

289
00:10:31,069 --> 00:10:35,089
<font color="#E5E5E5">on do all vendor equipments actually</font>

290
00:10:32,689 --> 00:10:37,250
support us using<font color="#E5E5E5"> these number arbitrary</font>

291
00:10:35,089 --> 00:10:39,199
numbers can we do instance 100 200 300

292
00:10:37,250 --> 00:10:40,910
now it turns out<font color="#E5E5E5"> no some of the vendors</font>

293
00:10:39,199 --> 00:10:42,109
<font color="#CCCCCC">you could just if they</font><font color="#E5E5E5"> support 16</font>

294
00:10:40,910 --> 00:10:43,579
instances you<font color="#CCCCCC"> couldn't</font><font color="#E5E5E5"> just number</font><font color="#CCCCCC"> one</font>

295
00:10:42,110 --> 00:10:45,110
<font color="#CCCCCC">through</font><font color="#E5E5E5"> 16 and that's it</font>

296
00:10:43,579 --> 00:10:47,089
so if you went ahead and pre created

297
00:10:45,110 --> 00:10:50,329
<font color="#E5E5E5">instance 100 and then you bought</font>

298
00:10:47,089 --> 00:10:51,350
something<font color="#E5E5E5"> from switch router</font><font color="#CCCCCC"> Z you're</font>

299
00:10:50,329 --> 00:10:52,250
<font color="#E5E5E5">gonna actually</font><font color="#CCCCCC"> have a</font><font color="#E5E5E5"> problem you're</font>

300
00:10:51,350 --> 00:10:53,959
<font color="#E5E5E5">gonna be number all those other</font>

301
00:10:52,250 --> 00:10:56,930
instances which is gonna<font color="#E5E5E5"> be</font><font color="#CCCCCC"> kind of a</font>

302
00:10:53,959 --> 00:10:58,459
pain<font color="#E5E5E5"> our migration challenges</font><font color="#CCCCCC"> we had</font>

303
00:10:56,930 --> 00:11:00,410
this live production<font color="#E5E5E5"> network as I said</font>

304
00:10:58,459 --> 00:11:03,018
and we're trying to do a cut over<font color="#E5E5E5"> with</font>

305
00:11:00,410 --> 00:11:05,120
near zero downtime<font color="#CCCCCC"> we brought</font><font color="#E5E5E5"> up a lab</font>

306
00:11:03,019 --> 00:11:06,500
we kind of simulated it and we<font color="#CCCCCC"> couldn't</font>

307
00:11:05,120 --> 00:11:08,000
<font color="#E5E5E5">find a way with zero downtime we found</font>

308
00:11:06,500 --> 00:11:09,800
plenty<font color="#CCCCCC"> of</font><font color="#E5E5E5"> ways to melt the network if</font>

309
00:11:08,000 --> 00:11:11,059
<font color="#CCCCCC">you do it wrong</font><font color="#E5E5E5"> we had all sorts</font><font color="#CCCCCC"> of fun</font>

310
00:11:09,800 --> 00:11:13,490
stuff<font color="#CCCCCC"> going</font><font color="#E5E5E5"> on</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> we didn't anticipate</font>

311
00:11:11,059 --> 00:11:14,449
<font color="#CCCCCC">so you can actually</font><font color="#E5E5E5"> really kill yourself</font>

312
00:11:13,490 --> 00:11:17,209
which<font color="#E5E5E5"> was kind of</font><font color="#CCCCCC"> cool</font>

313
00:11:14,449 --> 00:11:19,430
and in the end<font color="#E5E5E5"> we found a way to do a</font>

314
00:11:17,209 --> 00:11:21,290
migration<font color="#E5E5E5"> live</font><font color="#CCCCCC"> environment</font><font color="#E5E5E5"> with just a</font>

315
00:11:19,430 --> 00:11:23,029
<font color="#E5E5E5">single 45 second hit which is pretty</font>

316
00:11:21,290 --> 00:11:25,339
<font color="#E5E5E5">much one cycle of the block and learning</font>

317
00:11:23,029 --> 00:11:26,750
forwarding using default<font color="#E5E5E5"> timers so I</font>

318
00:11:25,339 --> 00:11:27,720
<font color="#E5E5E5">personally don't tweak spanning tree</font>

319
00:11:26,750 --> 00:11:29,699
timers if

320
00:11:27,720 --> 00:11:31,139
guys are more ballsy than I am you can

321
00:11:29,699 --> 00:11:34,410
actually<font color="#E5E5E5"> reduce this if you took your</font>

322
00:11:31,139 --> 00:11:37,889
<font color="#E5E5E5">timers here's our lab really simple we</font>

323
00:11:34,410 --> 00:11:41,790
<font color="#E5E5E5">just put a couple</font><font color="#CCCCCC"> 35 60</font><font color="#E5E5E5"> G's as our layer</font>

324
00:11:37,889 --> 00:11:44,279
<font color="#CCCCCC">3 core simulation</font><font color="#E5E5E5"> then we put 329 60 GS</font>

325
00:11:41,790 --> 00:11:46,079
as our rack switches<font color="#E5E5E5"> 29 60 GS our rack</font>

326
00:11:44,279 --> 00:11:47,279
switches and we put<font color="#E5E5E5"> up a couple servers</font>

327
00:11:46,079 --> 00:11:49,469
<font color="#CCCCCC">just so we could</font><font color="#E5E5E5"> do some continuous</font>

328
00:11:47,279 --> 00:11:52,850
pings<font color="#E5E5E5"> and measure really how how</font>

329
00:11:49,470 --> 00:11:54,899
significant the network impact was a

330
00:11:52,850 --> 00:11:57,720
couple key things<font color="#E5E5E5"> that we learned</font><font color="#CCCCCC"> from</font>

331
00:11:54,899 --> 00:12:01,079
our lab was<font color="#CCCCCC"> know your routes so set</font><font color="#E5E5E5"> your</font>

332
00:11:57,720 --> 00:12:03,029
<font color="#E5E5E5">course to route and secondary</font><font color="#CCCCCC"> route you</font>

333
00:12:01,079 --> 00:12:05,399
set it to<font color="#E5E5E5"> the highest STP priority this</font>

334
00:12:03,029 --> 00:12:08,699
is the<font color="#E5E5E5"> lowest numeric priority value</font>

335
00:12:05,399 --> 00:12:09,990
instead of consistent for all VLANs<font color="#E5E5E5"> set</font>

336
00:12:08,699 --> 00:12:12,180
the priority<font color="#CCCCCC"> of your</font><font color="#E5E5E5"> racks which is to</font>

337
00:12:09,990 --> 00:12:14,670
actually<font color="#E5E5E5"> be lower than default so that</font>

338
00:12:12,180 --> 00:12:15,870
<font color="#CCCCCC">if you do miss a VLAN or</font><font color="#E5E5E5"> MST instance</font>

339
00:12:14,670 --> 00:12:18,449
you don't<font color="#E5E5E5"> accidentally have a rack</font>

340
00:12:15,870 --> 00:12:19,709
switch as you<font color="#CCCCCC"> move this can cause weird</font>

341
00:12:18,449 --> 00:12:22,529
things and<font color="#E5E5E5"> weird loops and unanticipated</font>

342
00:12:19,709 --> 00:12:24,329
<font color="#E5E5E5">results start your work from your</font><font color="#CCCCCC"> routes</font>

343
00:12:22,529 --> 00:12:27,569
<font color="#E5E5E5">and kind of work your</font><font color="#CCCCCC"> way down towards</font>

344
00:12:24,329 --> 00:12:30,120
the racks which is interesting to

345
00:12:27,569 --> 00:12:32,910
remember<font color="#CCCCCC"> that MST MSTP actually runs our</font>

346
00:12:30,120 --> 00:12:34,500
STP<font color="#E5E5E5"> BPD use for backwards</font><font color="#CCCCCC"> compatibility</font>

347
00:12:32,910 --> 00:12:36,660
<font color="#E5E5E5">so it makes the migration a lot less</font>

348
00:12:34,500 --> 00:12:40,350
<font color="#CCCCCC">painful if you're</font><font color="#E5E5E5"> already running a</font><font color="#CCCCCC"> 2.1</font>

349
00:12:36,660 --> 00:12:42,000
WR STP in your network and<font color="#E5E5E5"> choose</font><font color="#CCCCCC"> your</font>

350
00:12:40,350 --> 00:12:43,680
VLAN<font color="#CCCCCC"> to instance mapping carefully try</font>

351
00:12:42,000 --> 00:12:45,329
to be smart about what<font color="#E5E5E5"> you choose in</font>

352
00:12:43,680 --> 00:12:47,969
advance<font color="#CCCCCC"> because it is kind of painful to</font>

353
00:12:45,329 --> 00:12:49,859
change in the<font color="#E5E5E5"> future some gotchas that</font>

354
00:12:47,970 --> 00:12:51,569
we found as<font color="#E5E5E5"> I mentioned before</font><font color="#CCCCCC"> some</font>

355
00:12:49,860 --> 00:12:53,279
devices<font color="#CCCCCC"> you can arbitrarily number</font>

356
00:12:51,569 --> 00:12:56,370
instances you can have instance 100 and

357
00:12:53,279 --> 00:12:58,259
since<font color="#E5E5E5"> 706</font><font color="#CCCCCC"> 3000 some devices</font><font color="#E5E5E5"> only support</font>

358
00:12:56,370 --> 00:13:00,660
<font color="#E5E5E5">if they have 16 instances the only</font>

359
00:12:58,259 --> 00:13:03,689
support numerically valued 1 through 16

360
00:13:00,660 --> 00:13:05,579
or 1 through<font color="#E5E5E5"> 32 and of course the MST</font>

361
00:13:03,689 --> 00:13:08,099
does have to match on all<font color="#E5E5E5"> devices that's</font>

362
00:13:05,579 --> 00:13:10,138
the<font color="#E5E5E5"> region name revision number and the</font>

363
00:13:08,100 --> 00:13:12,120
violent instance mapping for all VLANs

364
00:13:10,139 --> 00:13:14,670
<font color="#E5E5E5">even if those VLANs don't exist on that</font>

365
00:13:12,120 --> 00:13:16,139
switch he has to know about<font color="#E5E5E5"> the instance</font>

366
00:13:14,670 --> 00:13:18,420
to be<font color="#CCCCCC"> line mappings</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> are used</font>

367
00:13:16,139 --> 00:13:21,449
throughout<font color="#E5E5E5"> the entire region MST</font>

368
00:13:18,420 --> 00:13:24,809
generates<font color="#E5E5E5"> a md5 checksum value based on</font>

369
00:13:21,449 --> 00:13:26,639
these three key identifiers<font color="#E5E5E5"> and passes</font>

370
00:13:24,809 --> 00:13:29,279
that<font color="#E5E5E5"> md5 around and everyone has to</font>

371
00:13:26,639 --> 00:13:30,899
<font color="#E5E5E5">match if they want to play here's the</font>

372
00:13:29,279 --> 00:13:33,270
migration example on this<font color="#E5E5E5"> in a Cisco</font>

373
00:13:30,899 --> 00:13:35,399
<font color="#CCCCCC">network and how we actually got it done</font>

374
00:13:33,270 --> 00:13:37,680
so our<font color="#CCCCCC"> starting point all of devices</font>

375
00:13:35,399 --> 00:13:40,709
were running prevalent<font color="#CCCCCC"> RSTP hater</font><font color="#E5E5E5"> 2.1 w</font>

376
00:13:37,680 --> 00:13:43,319
core one had a priority of 81 92 for<font color="#E5E5E5"> all</font>

377
00:13:40,709 --> 00:13:45,569
VLANs so he took<font color="#E5E5E5"> root core 2 was our</font>

378
00:13:43,320 --> 00:13:47,910
secondary<font color="#E5E5E5"> route with a priority of 16 3</font>

379
00:13:45,570 --> 00:13:49,770
to 4 for all VLANs<font color="#E5E5E5"> and iraq switches</font>

380
00:13:47,910 --> 00:13:52,199
<font color="#E5E5E5">that were all blocking towards core 2</font>

381
00:13:49,770 --> 00:13:55,500
with the priority of 409 6 a little bit

382
00:13:52,200 --> 00:13:56,760
worse<font color="#CCCCCC"> than default for all VLANs</font><font color="#E5E5E5"> this is</font>

383
00:13:55,500 --> 00:13:59,070
the way it looked at<font color="#CCCCCC"> steady-state</font><font color="#E5E5E5"> you</font>

384
00:13:56,760 --> 00:14:00,420
saw this before<font color="#E5E5E5"> to course which is</font>

385
00:13:59,070 --> 00:14:05,100
<font color="#E5E5E5">everyone blocking towards of course</font>

386
00:14:00,420 --> 00:14:07,349
which<font color="#CCCCCC"> to and this is the walkthrough</font><font color="#E5E5E5"> so</font>

387
00:14:05,100 --> 00:14:08,880
the first thing we did again I'm really

388
00:14:07,350 --> 00:14:11,040
<font color="#E5E5E5">being</font><font color="#CCCCCC"> Cisco focuses where I spend most</font>

389
00:14:08,880 --> 00:14:12,390
<font color="#E5E5E5">the time on this project what's nice</font>

390
00:14:11,040 --> 00:14:14,520
about the way<font color="#E5E5E5"> Cisco implement this is</font>

391
00:14:12,390 --> 00:14:17,520
you can actually pre config<font color="#CCCCCC"> all of the</font>

392
00:14:14,520 --> 00:14:21,240
devices<font color="#E5E5E5"> and with the with the spanning</font>

393
00:14:17,520 --> 00:14:23,279
tree mappings<font color="#E5E5E5"> and not kick them live</font>

394
00:14:21,240 --> 00:14:25,890
until you're<font color="#E5E5E5"> already with one single</font>

395
00:14:23,279 --> 00:14:27,899
config<font color="#E5E5E5"> so you go into Spanish</font><font color="#CCCCCC"> for</font><font color="#E5E5E5"> MST</font>

396
00:14:25,890 --> 00:14:31,439
configuration<font color="#E5E5E5"> you create a region name</font>

397
00:14:27,899 --> 00:14:33,060
this is<font color="#CCCCCC"> datacenter one MST</font><font color="#E5E5E5"> you give it a</font>

398
00:14:31,440 --> 00:14:34,589
revision number I'm<font color="#E5E5E5"> not gonna get in the</font>

399
00:14:33,060 --> 00:14:35,939
details<font color="#CCCCCC"> revision number but</font><font color="#E5E5E5"> just know</font>

400
00:14:34,589 --> 00:14:38,760
they all have<font color="#E5E5E5"> to match</font><font color="#CCCCCC"> we start with</font>

401
00:14:35,940 --> 00:14:41,370
revision<font color="#E5E5E5"> 1 and we decided to pre create</font>

402
00:14:38,760 --> 00:14:44,339
<font color="#CCCCCC">8 instances where we mapped</font><font color="#E5E5E5"> a couple</font>

403
00:14:41,370 --> 00:14:46,459
small a couple small groups of VLANs

404
00:14:44,339 --> 00:14:50,279
where<font color="#CCCCCC"> we're used for infrastructure</font>

405
00:14:46,459 --> 00:14:52,260
<font color="#E5E5E5">device to device and instance number</font><font color="#CCCCCC"> 2</font>

406
00:14:50,279 --> 00:14:53,490
VLANs<font color="#CCCCCC"> 53 9 we actually weren't using at</font>

407
00:14:52,260 --> 00:14:55,050
all but we pre<font color="#CCCCCC"> created</font><font color="#E5E5E5"> them thinking</font>

408
00:14:53,490 --> 00:14:56,250
maybe sometime in<font color="#CCCCCC"> the future we might</font>

409
00:14:55,050 --> 00:14:59,880
need<font color="#E5E5E5"> to do something creative so we had</font>

410
00:14:56,250 --> 00:15:02,640
a block of 50 VLANs<font color="#CCCCCC"> there instance</font>

411
00:14:59,880 --> 00:15:04,140
number<font color="#E5E5E5"> 3 4 5 7 8 is where</font><font color="#CCCCCC"> actually had</font>

412
00:15:02,640 --> 00:15:06,270
all<font color="#CCCCCC"> of</font><font color="#E5E5E5"> our customers we have a 2000</font>

413
00:15:04,140 --> 00:15:09,449
block<font color="#E5E5E5"> we could support up to 2000</font>

414
00:15:06,270 --> 00:15:12,240
customers in this<font color="#CCCCCC"> environment</font><font color="#E5E5E5"> and on</font>

415
00:15:09,450 --> 00:15:16,110
<font color="#CCCCCC">core 1 we went ahead and we said ok MST</font>

416
00:15:12,240 --> 00:15:18,000
0 through 8<font color="#CCCCCC"> 30 81 92 on core 2 of 16 3</font>

417
00:15:16,110 --> 00:15:20,220
<font color="#E5E5E5">to 4 and</font><font color="#CCCCCC"> all the racks which</font><font color="#E5E5E5"> was</font><font color="#CCCCCC"> 4</font><font color="#E5E5E5"> 9 6 0</font>

418
00:15:18,000 --> 00:15:22,950
<font color="#E5E5E5">little note here</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> don't need it you</font>

419
00:15:20,220 --> 00:15:24,930
<font color="#E5E5E5">want to not forget about MST 0 ms-20 is</font>

420
00:15:22,950 --> 00:15:26,640
used for any VLANs that weren't put into

421
00:15:24,930 --> 00:15:28,290
an instance it's like the default<font color="#E5E5E5"> MST</font>

422
00:15:26,640 --> 00:15:29,520
instance<font color="#CCCCCC"> Sonya VLANs that weren't</font>

423
00:15:28,290 --> 00:15:31,649
clearly defined<font color="#E5E5E5"> in this case you notice</font>

424
00:15:29,520 --> 00:15:33,180
<font color="#E5E5E5">that we didn't actually use VLAN 1</font><font color="#CCCCCC"> you</font>

425
00:15:31,649 --> 00:15:35,579
<font color="#E5E5E5">learn what happens to hang out at MSC 0</font>

426
00:15:33,180 --> 00:15:37,500
the point<font color="#E5E5E5"> is don't forget MST 0 we have</font>

427
00:15:35,579 --> 00:15:39,870
<font color="#E5E5E5">so we saw a client who forgot MST 0 and</font>

428
00:15:37,500 --> 00:15:42,470
they were<font color="#E5E5E5"> really regretful of that later</font>

429
00:15:39,870 --> 00:15:46,080
<font color="#CCCCCC">on</font><font color="#E5E5E5"> when they had more rack switches</font>

430
00:15:42,470 --> 00:15:47,190
so going<font color="#CCCCCC"> through the regression</font><font color="#E5E5E5"> step</font>

431
00:15:46,080 --> 00:15:49,440
number one<font color="#E5E5E5"> this is where you take</font><font color="#CCCCCC"> your</font>

432
00:15:47,190 --> 00:15:51,660
network hit you<font color="#E5E5E5"> get on</font><font color="#CCCCCC"> corwin you type</font>

433
00:15:49,440 --> 00:15:54,450
the command spanning<font color="#E5E5E5"> free mode MST at</font>

434
00:15:51,660 --> 00:15:56,339
that<font color="#E5E5E5"> instant in time core</font><font color="#CCCCCC"> one</font><font color="#E5E5E5"> actually</font>

435
00:15:54,450 --> 00:15:58,350
blocks towards<font color="#E5E5E5"> pretty much all of his</font>

436
00:15:56,340 --> 00:16:01,050
<font color="#CCCCCC">layer two ports everybody goes</font><font color="#E5E5E5"> into</font>

437
00:15:58,350 --> 00:16:02,310
blocking and listening forwarding at

438
00:16:01,050 --> 00:16:04,140
that point in<font color="#E5E5E5"> time your network is</font>

439
00:16:02,310 --> 00:16:06,030
pretty<font color="#E5E5E5"> much nice and quiet no bits are</font>

440
00:16:04,140 --> 00:16:08,340
passing that<font color="#E5E5E5"> you where you expect them</font>

441
00:16:06,030 --> 00:16:11,240
to<font color="#E5E5E5"> pass that moment of time your HSR</font><font color="#CCCCCC"> P</font>

442
00:16:08,340 --> 00:16:13,320
may actually flap pretty quick recovery

443
00:16:11,240 --> 00:16:14,970
<font color="#CCCCCC">forty-five</font><font color="#E5E5E5"> seconds later you wait</font>

444
00:16:13,320 --> 00:16:18,480
patiently<font color="#E5E5E5"> and network is restored</font>

445
00:16:14,970 --> 00:16:22,650
everyone's happy and you're not<font color="#CCCCCC"> guys can</font>

446
00:16:18,480 --> 00:16:25,200
go back to surfing YouTube<font color="#E5E5E5"> step number</font>

447
00:16:22,650 --> 00:16:28,290
<font color="#E5E5E5">two migration go</font><font color="#CCCCCC"> encore too and you'd</font>

448
00:16:25,200 --> 00:16:29,820
say spanning<font color="#CCCCCC"> tree mode MST</font><font color="#E5E5E5"> court</font><font color="#CCCCCC"> to has</font>

449
00:16:28,290 --> 00:16:31,980
a brief blocking forwarding cycle

450
00:16:29,820 --> 00:16:33,150
doesn't seem to<font color="#E5E5E5"> impact traffic didn't</font>

451
00:16:31,980 --> 00:16:34,380
<font color="#E5E5E5">impact when the two networks where we</font>

452
00:16:33,150 --> 00:16:37,709
did this<font color="#CCCCCC"> to data centers we did this</font>

453
00:16:34,380 --> 00:16:39,480
<font color="#E5E5E5">everyone's fine and migration step three</font>

454
00:16:37,710 --> 00:16:40,830
<font color="#E5E5E5">you get on your rack switches and you</font>

455
00:16:39,480 --> 00:16:43,710
could<font color="#E5E5E5"> just do a rolling scripted</font>

456
00:16:40,830 --> 00:16:47,280
spanning tree mode MST remember that you

457
00:16:43,710 --> 00:16:50,610
<font color="#CCCCCC">pre-configured this block</font><font color="#E5E5E5"> in advance and</font>

458
00:16:47,280 --> 00:16:52,500
the priorities in<font color="#E5E5E5"> advance so here you're</font>

459
00:16:50,610 --> 00:16:53,880
just<font color="#CCCCCC"> kickin it live at this point in</font>

460
00:16:52,500 --> 00:16:55,560
time the rack switches<font color="#E5E5E5"> go into an</font>

461
00:16:53,880 --> 00:16:58,439
extremely<font color="#E5E5E5"> brief blocking forwarding</font>

462
00:16:55,560 --> 00:17:01,109
cycle we had pings<font color="#E5E5E5"> going from server to</font>

463
00:16:58,440 --> 00:17:03,089
<font color="#CCCCCC">server</font><font color="#E5E5E5"> we were doing</font><font color="#CCCCCC"> tents</font><font color="#E5E5E5"> tenth of a</font>

464
00:17:01,110 --> 00:17:04,650
second so<font color="#CCCCCC"> ten pings per second we didn't</font>

465
00:17:03,089 --> 00:17:06,360
lose a<font color="#CCCCCC"> single ping so</font><font color="#E5E5E5"> I'm not going to</font>

466
00:17:04,650 --> 00:17:09,000
tell you it's zero impact<font color="#E5E5E5"> but it was</font>

467
00:17:06,359 --> 00:17:12,958
less of a tenth of a second<font color="#E5E5E5"> so it was as</font>

468
00:17:09,000 --> 00:17:15,000
negligible<font color="#E5E5E5"> in our environment what what</font>

469
00:17:12,959 --> 00:17:16,860
does MST mean for ongoing<font color="#E5E5E5"> maintenance</font>

470
00:17:15,000 --> 00:17:18,780
<font color="#E5E5E5">once it's deployed there are a few</font>

471
00:17:16,859 --> 00:17:20,609
things you got<font color="#CCCCCC"> to keep in mind all new</font>

472
00:17:18,780 --> 00:17:22,680
devices<font color="#E5E5E5"> really should be</font><font color="#CCCCCC"> pre-configured</font>

473
00:17:20,609 --> 00:17:25,770
with<font color="#E5E5E5"> identical MST parameters</font><font color="#CCCCCC"> before you</font>

474
00:17:22,680 --> 00:17:27,180
plug<font color="#E5E5E5"> them into the network any VLAN to</font>

475
00:17:25,770 --> 00:17:28,950
instance mapping changes you make in the

476
00:17:27,180 --> 00:17:30,450
<font color="#E5E5E5">future you want</font><font color="#CCCCCC"> to make</font><font color="#E5E5E5"> on</font><font color="#CCCCCC"> your</font><font color="#E5E5E5"> route</font>

477
00:17:28,950 --> 00:17:32,100
first then you<font color="#E5E5E5"> pushed your secondary and</font>

478
00:17:30,450 --> 00:17:34,500
<font color="#E5E5E5">then you push it your rack switches</font><font color="#CCCCCC"> you</font>

479
00:17:32,100 --> 00:17:37,469
push it everywhere<font color="#CCCCCC"> don't don't leave any</font>

480
00:17:34,500 --> 00:17:39,060
stragglers currently there isn't<font color="#E5E5E5"> any</font>

481
00:17:37,470 --> 00:17:41,850
widespread protocol to automatically

482
00:17:39,060 --> 00:17:45,840
<font color="#E5E5E5">propagate your MST changes a quarter of</font>

483
00:17:41,850 --> 00:17:48,330
the docks in<font color="#CCCCCC"> VT P</font><font color="#E5E5E5"> ev3 on Cisco</font><font color="#CCCCCC"> I believe</font>

484
00:17:45,840 --> 00:17:50,879
MST instance mapping is actually

485
00:17:48,330 --> 00:17:53,040
propagated<font color="#CCCCCC"> I haven't I don't have any</font>

486
00:17:50,880 --> 00:17:55,310
devices<font color="#E5E5E5"> running code that's</font><font color="#CCCCCC"> VT P v3</font>

487
00:17:53,040 --> 00:17:57,139
capable I believe<font color="#E5E5E5"> they're still</font>

488
00:17:55,310 --> 00:17:58,760
<font color="#E5E5E5">there are limits as</font><font color="#CCCCCC"> to which devices</font><font color="#E5E5E5"> can</font>

489
00:17:57,140 --> 00:18:02,210
do it I think<font color="#CCCCCC"> we're gonna see everything</font>

490
00:17:58,760 --> 00:18:03,650
eventually<font color="#CCCCCC"> but that Cisco only</font><font color="#E5E5E5"> I looked</font>

491
00:18:02,210 --> 00:18:05,840
<font color="#E5E5E5">around on the other vendors I couldn't</font>

492
00:18:03,650 --> 00:18:09,530
find anything that<font color="#E5E5E5"> did propagation of</font>

493
00:18:05,840 --> 00:18:11,600
MST instance mapping<font color="#E5E5E5"> so this is pretty</font>

494
00:18:09,530 --> 00:18:13,850
<font color="#CCCCCC">much a manual or scripted process and</font>

495
00:18:11,600 --> 00:18:14,709
you really want to<font color="#E5E5E5"> make</font><font color="#CCCCCC"> sure you want to</font>

496
00:18:13,850 --> 00:18:16,240
make<font color="#CCCCCC"> sure you have all your</font><font color="#E5E5E5"> devices</font>

497
00:18:14,710 --> 00:18:20,150
<font color="#E5E5E5">matched up</font>

498
00:18:16,240 --> 00:18:21,680
so in summary MST does add some

499
00:18:20,150 --> 00:18:23,020
<font color="#E5E5E5">complexity to your configuration so you</font>

500
00:18:21,680 --> 00:18:26,510
really<font color="#E5E5E5"> need to stay on their toes</font><font color="#CCCCCC"> I</font>

501
00:18:23,020 --> 00:18:28,190
didn't cover in<font color="#E5E5E5"> this talk but MST is is</font>

502
00:18:26,510 --> 00:18:30,140
kind of<font color="#E5E5E5"> a cool</font><font color="#CCCCCC"> thing if you</font><font color="#E5E5E5"> are trying</font>

503
00:18:28,190 --> 00:18:33,170
to do<font color="#E5E5E5"> multi vendor interoperability and</font>

504
00:18:30,140 --> 00:18:36,050
you do want to have<font color="#CCCCCC"> per VLAN per VLAN</font>

505
00:18:33,170 --> 00:18:37,310
diverse paths in your<font color="#E5E5E5"> network</font><font color="#CCCCCC"> and we</font>

506
00:18:36,050 --> 00:18:39,440
only really<font color="#E5E5E5"> deploy the solution</font><font color="#CCCCCC"> a few</font>

507
00:18:37,310 --> 00:18:40,700
times here at peak<font color="#E5E5E5"> and I am interesting</font>

508
00:18:39,440 --> 00:18:42,740
hearing<font color="#E5E5E5"> feedback if anybody else has</font>

509
00:18:40,700 --> 00:18:44,870
done<font color="#CCCCCC"> this before has has a better</font>

510
00:18:42,740 --> 00:18:46,700
suggestion<font color="#E5E5E5"> than some of what I've</font>

511
00:18:44,870 --> 00:18:48,020
recommended<font color="#E5E5E5"> or run to other gotchas that</font>

512
00:18:46,700 --> 00:18:50,780
<font color="#E5E5E5">maybe I didn't cover that other folks</font>

513
00:18:48,020 --> 00:18:52,010
should<font color="#E5E5E5"> be aware of that</font><font color="#CCCCCC"> maybe in a next</font>

514
00:18:50,780 --> 00:18:54,530
revision traditional<font color="#CCCCCC"> write-up I should</font>

515
00:18:52,010 --> 00:18:56,780
cover and if anybody knows<font color="#CCCCCC"> how to</font>

516
00:18:54,530 --> 00:18:59,389
configure<font color="#E5E5E5"> Cisco layer 3 switches for a</font>

517
00:18:56,780 --> 00:19:00,889
single instance of our STP again I

518
00:18:59,390 --> 00:19:05,690
haven't<font color="#E5E5E5"> found it</font><font color="#CCCCCC"> but if anybody knows it</font>

519
00:19:00,890 --> 00:19:07,040
please<font color="#E5E5E5"> please</font><font color="#CCCCCC"> tell</font><font color="#E5E5E5"> me and that's pretty</font>

520
00:19:05,690 --> 00:19:08,450
much it<font color="#E5E5E5"> thanks</font><font color="#CCCCCC"> very much if any of you</font>

521
00:19:07,040 --> 00:19:10,520
have<font color="#E5E5E5"> little kids you might recognize</font>

522
00:19:08,450 --> 00:19:11,600
<font color="#CCCCCC">Plex I'm here</font><font color="#E5E5E5"> for a week so I'm not</font>

523
00:19:10,520 --> 00:19:12,560
<font color="#E5E5E5">going to get to see him although we get</font>

524
00:19:11,600 --> 00:19:13,909
to see him<font color="#E5E5E5"> every</font><font color="#CCCCCC"> day at home</font><font color="#E5E5E5"> so I</font>

525
00:19:12,560 --> 00:19:23,090
<font color="#CCCCCC">figured I'd throw them up here</font><font color="#E5E5E5"> say hey a</font>

526
00:19:13,910 --> 00:19:25,250
place<font color="#E5E5E5"> they do Leo</font><font color="#CCCCCC"> Bicknell with IFC</font><font color="#E5E5E5"> I</font>

527
00:19:23,090 --> 00:19:27,889
have one<font color="#E5E5E5"> comment and</font><font color="#CCCCCC"> one question for</font>

528
00:19:25,250 --> 00:19:30,740
you<font color="#CCCCCC"> the comment I</font><font color="#E5E5E5"> would say having done</font>

529
00:19:27,890 --> 00:19:32,030
several similar deployments<font color="#CCCCCC"> is and all</font>

530
00:19:30,740 --> 00:19:35,060
the ones I've<font color="#CCCCCC"> been involved with we've</font>

531
00:19:32,030 --> 00:19:38,750
pointed half of the rack<font color="#CCCCCC"> switches at one</font>

532
00:19:35,060 --> 00:19:40,669
and<font color="#E5E5E5"> a half at</font><font color="#CCCCCC"> the other core router and</font>

533
00:19:38,750 --> 00:19:42,110
there were sort of<font color="#E5E5E5"> two schools of</font>

534
00:19:40,670 --> 00:19:45,380
<font color="#CCCCCC">thought as to why that was better</font><font color="#E5E5E5"> than</font>

535
00:19:42,110 --> 00:19:48,830
<font color="#CCCCCC">having a a primary</font><font color="#E5E5E5"> and a backup</font><font color="#CCCCCC"> the</font>

536
00:19:45,380 --> 00:19:50,900
first was<font color="#CCCCCC"> in a core failure you only had</font>

537
00:19:48,830 --> 00:19:53,929
to slosh around<font color="#E5E5E5"> half of the</font><font color="#CCCCCC"> traffic not</font>

538
00:19:50,900 --> 00:19:57,230
all of the traffic<font color="#CCCCCC"> and</font><font color="#E5E5E5"> the second was on</font>

539
00:19:53,930 --> 00:19:58,940
<font color="#E5E5E5">the sort of uplink side of those those</font>

540
00:19:57,230 --> 00:20:01,580
core switches towards the ISPs or

541
00:19:58,940 --> 00:20:02,930
whatever you happen to<font color="#E5E5E5"> have it was</font>

542
00:20:01,580 --> 00:20:05,899
better to<font color="#CCCCCC"> have</font>

543
00:20:02,930 --> 00:20:08,420
some amount<font color="#E5E5E5"> of traffic</font><font color="#CCCCCC"> because there are</font>

544
00:20:05,900 --> 00:20:09,920
certain interface conditions like errors

545
00:20:08,420 --> 00:20:11,930
and whatnot that<font color="#E5E5E5"> don't occur with no</font>

546
00:20:09,920 --> 00:20:13,309
traffic<font color="#E5E5E5"> yep you have to put traffic on</font>

547
00:20:11,930 --> 00:20:16,640
them so having some amount<font color="#E5E5E5"> of traffic</font>

548
00:20:13,309 --> 00:20:18,830
allowed you to<font color="#E5E5E5"> monitor that better and</font>

549
00:20:16,640 --> 00:20:20,059
detect those quicker<font color="#E5E5E5"> rather than</font>

550
00:20:18,830 --> 00:20:24,919
detecting them when you already have a

551
00:20:20,059 --> 00:20:27,590
failure<font color="#CCCCCC"> the question I have though is in</font>

552
00:20:24,920 --> 00:20:29,900
all<font color="#E5E5E5"> of the situations I've seen where</font>

553
00:20:27,590 --> 00:20:32,540
they've run into<font color="#E5E5E5"> too many VLANs in a</font>

554
00:20:29,900 --> 00:20:34,929
layer<font color="#CCCCCC"> to instance the same requirement</font>

555
00:20:32,540 --> 00:20:37,909
<font color="#E5E5E5">that you started with</font><font color="#CCCCCC"> has applied any</font>

556
00:20:34,929 --> 00:20:41,059
<font color="#E5E5E5">any device and any rack has to be able</font>

557
00:20:37,910 --> 00:20:43,700
<font color="#E5E5E5">to</font><font color="#CCCCCC"> go on any VLAN and regardless of</font><font color="#E5E5E5"> the</font>

558
00:20:41,059 --> 00:20:46,100
<font color="#E5E5E5">technology</font><font color="#CCCCCC"> involved that reaches a</font>

559
00:20:43,700 --> 00:20:48,710
scaling limit<font color="#E5E5E5"> a different one with each</font>

560
00:20:46,100 --> 00:20:50,178
technology<font color="#CCCCCC"> so in every instance I've</font>

561
00:20:48,710 --> 00:20:53,120
been involved in we've<font color="#E5E5E5"> pushed hard to</font>

562
00:20:50,179 --> 00:20:56,510
move<font color="#E5E5E5"> to rack</font><font color="#CCCCCC"> switches that are layer</font><font color="#E5E5E5"> 3</font>

563
00:20:53,120 --> 00:20:58,189
routers using IPS that are specific to

564
00:20:56,510 --> 00:21:01,190
<font color="#E5E5E5">Iraq but then doing things like virtual</font>

565
00:20:58,190 --> 00:21:04,429
<font color="#CCCCCC">IPS routed with a routing protocol which</font>

566
00:21:01,190 --> 00:21:06,050
appears to<font color="#E5E5E5"> scale much better did you</font>

567
00:21:04,429 --> 00:21:07,760
have those<font color="#CCCCCC"> discussions with</font><font color="#E5E5E5"> your client</font>

568
00:21:06,050 --> 00:21:10,178
where they simply<font color="#CCCCCC"> unwilling to</font><font color="#E5E5E5"> listen to</font>

569
00:21:07,760 --> 00:21:12,530
them or where those discussions not had

570
00:21:10,179 --> 00:21:15,559
you know what are people's experiences

571
00:21:12,530 --> 00:21:17,420
with the the transition<font color="#CCCCCC"> from layer 2</font>

572
00:21:15,559 --> 00:21:20,510
technologies to layer<font color="#E5E5E5"> 3 technologies as</font>

573
00:21:17,420 --> 00:21:22,940
you hit<font color="#E5E5E5"> scaling limits and that's</font><font color="#CCCCCC"> a good</font>

574
00:21:20,510 --> 00:21:25,790
point<font color="#E5E5E5"> so</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> your first</font><font color="#CCCCCC"> point running</font>

575
00:21:22,940 --> 00:21:28,820
<font color="#E5E5E5">running hot on half of your links on</font>

576
00:21:25,790 --> 00:21:31,490
running hot on on both sides<font color="#E5E5E5"> 5050 it's</font>

577
00:21:28,820 --> 00:21:33,409
it's a<font color="#E5E5E5"> really good</font><font color="#CCCCCC"> idea as you said for</font>

578
00:21:31,490 --> 00:21:34,910
<font color="#E5E5E5">a couple</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> reasons one is having</font>

579
00:21:33,410 --> 00:21:36,740
redundancy<font color="#CCCCCC"> is a</font><font color="#E5E5E5"> double-edged</font><font color="#CCCCCC"> sword if</font>

580
00:21:34,910 --> 00:21:38,390
you don't always configure the secondary

581
00:21:36,740 --> 00:21:40,640
device properly<font color="#CCCCCC"> you don't know</font><font color="#E5E5E5"> that it's</font>

582
00:21:38,390 --> 00:21:42,380
not working<font color="#E5E5E5"> until the failover happens</font>

583
00:21:40,640 --> 00:21:44,420
then you realize oh wow<font color="#E5E5E5"> we actually</font>

584
00:21:42,380 --> 00:21:45,800
missed the last couple<font color="#E5E5E5"> updates we've</font>

585
00:21:44,420 --> 00:21:47,780
gone back and<font color="#CCCCCC"> forth on this</font><font color="#E5E5E5"> a few</font><font color="#CCCCCC"> times</font>

586
00:21:45,800 --> 00:21:49,280
<font color="#E5E5E5">it definitely makes more sense to use</font>

587
00:21:47,780 --> 00:21:51,220
your whole<font color="#CCCCCC"> network to some degree that</font>

588
00:21:49,280 --> 00:21:54,410
way you can be assured that<font color="#E5E5E5"> it's there</font>

589
00:21:51,220 --> 00:21:55,880
because<font color="#E5E5E5"> we we build but don't run a lot</font>

590
00:21:54,410 --> 00:21:58,850
<font color="#CCCCCC">of networks we have</font><font color="#E5E5E5"> to leave something</font>

591
00:21:55,880 --> 00:22:00,380
<font color="#E5E5E5">behind</font><font color="#CCCCCC"> that is pretty</font><font color="#E5E5E5"> easy to run and</font>

592
00:21:58,850 --> 00:22:01,939
<font color="#CCCCCC">that seems to be the easiest</font><font color="#E5E5E5"> way as</font>

593
00:22:00,380 --> 00:22:03,320
<font color="#E5E5E5">everybody knows this is primer and if</font>

594
00:22:01,940 --> 00:22:06,340
any traffic's on the secondary<font color="#CCCCCC"> you</font>

595
00:22:03,320 --> 00:22:09,980
haven't have normal condition regarding

596
00:22:06,340 --> 00:22:11,350
<font color="#E5E5E5">using non layer</font><font color="#CCCCCC"> 2</font><font color="#E5E5E5"> environments the</font>

597
00:22:09,980 --> 00:22:13,150
problem is that

598
00:22:11,350 --> 00:22:14,590
the man in a managed hosting environment

599
00:22:13,150 --> 00:22:16,480
advantage<font color="#E5E5E5"> hosting customers kind of</font>

600
00:22:14,590 --> 00:22:18,100
expect to be on one flat VLAN that's

601
00:22:16,480 --> 00:22:19,570
that's their expectation<font color="#CCCCCC"> though I have</font>

602
00:22:18,100 --> 00:22:20,800
three servers and<font color="#E5E5E5"> they they're all need</font>

603
00:22:19,570 --> 00:22:21,970
to be in the<font color="#E5E5E5"> same subnet</font><font color="#CCCCCC"> in</font><font color="#E5E5E5"> VLAN because</font>

604
00:22:20,800 --> 00:22:24,220
I don't want to know how to do<font color="#CCCCCC"> routing</font>

605
00:22:21,970 --> 00:22:25,720
and deal with loopback interfaces and

606
00:22:24,220 --> 00:22:26,950
then if I'm running certain<font color="#E5E5E5"> operating</font>

607
00:22:25,720 --> 00:22:29,650
systems I<font color="#E5E5E5"> have to deal with turning off</font>

608
00:22:26,950 --> 00:22:32,380
our<font color="#CCCCCC"> port turning on our properly or</font>

609
00:22:29,650 --> 00:22:34,720
virtual instances and and then the

610
00:22:32,380 --> 00:22:36,550
managed hosting operator says well I

611
00:22:34,720 --> 00:22:38,280
<font color="#CCCCCC">want to give my custom my server</font>

612
00:22:36,550 --> 00:22:40,659
customers a really simple environment

613
00:22:38,280 --> 00:22:43,210
but at the same time<font color="#E5E5E5"> I can't leave holes</font>

614
00:22:40,660 --> 00:22:45,760
in my racks<font color="#CCCCCC"> for unpopulated servers so</font>

615
00:22:43,210 --> 00:22:47,260
if you say well<font color="#CCCCCC"> 1 1 so this subnet</font>

616
00:22:45,760 --> 00:22:48,610
belongs don't<font color="#E5E5E5"> leave this rack well you</font>

617
00:22:47,260 --> 00:22:50,560
have a customer with only<font color="#CCCCCC"> two servers</font>

618
00:22:48,610 --> 00:22:52,540
<font color="#E5E5E5">but he might buy a third server two</font>

619
00:22:50,560 --> 00:22:53,980
months<font color="#E5E5E5"> from</font><font color="#CCCCCC"> now</font><font color="#E5E5E5"> and then you have to put</font>

620
00:22:52,540 --> 00:22:55,350
<font color="#E5E5E5">him in a rack</font><font color="#CCCCCC"> inside</font><font color="#E5E5E5"> the data center</font><font color="#CCCCCC"> and</font>

621
00:22:53,980 --> 00:22:58,570
you find some way<font color="#CCCCCC"> to bridge it across</font>

622
00:22:55,350 --> 00:23:00,310
there there is a need<font color="#CCCCCC"> to figure</font><font color="#E5E5E5"> out</font><font color="#CCCCCC"> how</font>

623
00:22:58,570 --> 00:23:02,260
to<font color="#E5E5E5"> do really large-scale managed hosting</font>

624
00:23:00,310 --> 00:23:05,260
<font color="#E5E5E5">there aren't that many people to have</font><font color="#CCCCCC"> a</font>

625
00:23:02,260 --> 00:23:08,200
<font color="#E5E5E5">problem</font><font color="#CCCCCC"> so I don't think anybody's</font><font color="#E5E5E5"> found</font>

626
00:23:05,260 --> 00:23:09,160
<font color="#E5E5E5">the right solution</font><font color="#CCCCCC"> in a perfect</font><font color="#E5E5E5"> world</font>

627
00:23:08,200 --> 00:23:10,890
you're absolutely correct

628
00:23:09,160 --> 00:23:13,810
running layer<font color="#E5E5E5"> 3 to have</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> racks which</font>

629
00:23:10,890 --> 00:23:15,730
buys you tremendous scaling capabilities

630
00:23:13,810 --> 00:23:19,360
it's it's really<font color="#E5E5E5"> a much cleaner way to</font>

631
00:23:15,730 --> 00:23:20,230
go<font color="#CCCCCC"> unfortunately it's not always</font><font color="#E5E5E5"> option</font>

632
00:23:19,360 --> 00:23:22,240
when<font color="#E5E5E5"> their customer base is really</font>

633
00:23:20,230 --> 00:23:23,680
<font color="#E5E5E5">expecting</font><font color="#CCCCCC"> oh I want my</font><font color="#E5E5E5"> service to be</font><font color="#CCCCCC"> in</font>

634
00:23:22,240 --> 00:23:25,330
<font color="#CCCCCC">one flat VLAN and I want to be able</font><font color="#E5E5E5"> to</font>

635
00:23:23,680 --> 00:23:26,950
<font color="#E5E5E5">do things like move IP addresses around</font>

636
00:23:25,330 --> 00:23:29,080
<font color="#E5E5E5">from server to server if I need to take</font>

637
00:23:26,950 --> 00:23:33,220
down<font color="#CCCCCC"> a box</font><font color="#E5E5E5"> for maintenance or those</font>

638
00:23:29,080 --> 00:23:35,320
kinds of things<font color="#E5E5E5"> hi Ben Kessler was</font><font color="#CCCCCC"> net</font>

639
00:23:33,220 --> 00:23:37,660
<font color="#CCCCCC">front and</font><font color="#E5E5E5"> we ran</font><font color="#CCCCCC"> into the same issue</font>

640
00:23:35,320 --> 00:23:41,470
with<font color="#CCCCCC"> an</font><font color="#E5E5E5"> enterprise customer</font><font color="#CCCCCC"> and a brand</font>

641
00:23:37,660 --> 00:23:43,870
<font color="#E5E5E5">new deployment</font><font color="#CCCCCC"> about 40 or so</font><font color="#E5E5E5"> racks top</font>

642
00:23:41,470 --> 00:23:46,840
rack design where we<font color="#E5E5E5"> had to layer 2</font>

643
00:23:43,870 --> 00:23:48,399
switches per rack and we had Spanish

644
00:23:46,840 --> 00:23:52,060
<font color="#CCCCCC">obviously running</font><font color="#E5E5E5"> but there were no</font>

645
00:23:48,400 --> 00:23:55,560
ports blocking<font color="#E5E5E5"> it was all basically</font>

646
00:23:52,060 --> 00:23:59,409
there were no loops<font color="#CCCCCC"> by design we did</font>

647
00:23:55,560 --> 00:24:01,000
each cabinet switch and there were two

648
00:23:59,410 --> 00:24:04,690
of<font color="#CCCCCC"> them</font><font color="#E5E5E5"> her cabin of each cabinets which</font>

649
00:24:01,000 --> 00:24:07,000
had<font color="#CCCCCC"> four by giggle uplink to the a</font>

650
00:24:04,690 --> 00:24:09,220
switch or<font color="#CCCCCC"> the B switch for the core</font><font color="#E5E5E5"> and</font>

651
00:24:07,000 --> 00:24:11,380
<font color="#E5E5E5">we ran into the same issue and it melted</font>

652
00:24:09,220 --> 00:24:13,030
down<font color="#E5E5E5"> the network when you started having</font>

653
00:24:11,380 --> 00:24:16,030
<font color="#E5E5E5">some flapping going on with</font><font color="#CCCCCC"> baddest a</font>

654
00:24:13,030 --> 00:24:18,399
<font color="#CCCCCC">piece or whatever</font><font color="#E5E5E5"> and we got the same</font>

655
00:24:16,030 --> 00:24:20,470
feedback<font color="#CCCCCC"> from the vendor well you need</font>

656
00:24:18,400 --> 00:24:22,900
<font color="#E5E5E5">to go layer</font><font color="#CCCCCC"> three like this is a</font>

657
00:24:20,470 --> 00:24:24,760
<font color="#CCCCCC">brand-new</font><font color="#E5E5E5"> environment and the same sort</font>

658
00:24:22,900 --> 00:24:27,370
of<font color="#E5E5E5"> things applied</font><font color="#CCCCCC"> where</font>

659
00:24:24,760 --> 00:24:29,559
you know<font color="#E5E5E5"> network is built so that the</font>

660
00:24:27,370 --> 00:24:33,399
data center<font color="#E5E5E5"> people or the server people</font>

661
00:24:29,559 --> 00:24:34,960
can put their servers wherever for space

662
00:24:33,400 --> 00:24:39,250
or cooling her power or<font color="#E5E5E5"> whatever the</font>

663
00:24:34,960 --> 00:24:40,900
conditions may be and we had the

664
00:24:39,250 --> 00:24:43,059
flexibility<font color="#E5E5E5"> of having a maintenance</font>

665
00:24:40,900 --> 00:24:46,150
<font color="#CCCCCC">window so we basically roasted</font><font color="#E5E5E5"> the</font>

666
00:24:43,059 --> 00:24:48,730
network and rebuilt it<font color="#CCCCCC"> one of the points</font>

667
00:24:46,150 --> 00:24:53,620
I wanted<font color="#E5E5E5"> to bring up was</font><font color="#CCCCCC"> that when you</font>

668
00:24:48,730 --> 00:24:57,190
do<font color="#E5E5E5"> VLAN pruning so for example there</font>

669
00:24:53,620 --> 00:24:59,649
were some one of our MST instances was

670
00:24:57,190 --> 00:25:01,570
for some core network management VLANs

671
00:24:59,649 --> 00:25:04,809
that did<font color="#E5E5E5"> not get extended down to</font><font color="#CCCCCC"> the</font>

672
00:25:01,570 --> 00:25:08,620
<font color="#CCCCCC">cabinets and so we pruned those on the</font>

673
00:25:04,809 --> 00:25:10,870
trunk links well<font color="#E5E5E5"> the edge devices still</font>

674
00:25:08,620 --> 00:25:13,330
needed<font color="#CCCCCC"> to know about those MST instances</font>

675
00:25:10,870 --> 00:25:16,689
otherwise they would get confused<font color="#E5E5E5"> and so</font>

676
00:25:13,330 --> 00:25:18,549
we ended<font color="#E5E5E5"> up one of the the effects of</font>

677
00:25:16,690 --> 00:25:21,690
<font color="#CCCCCC">that was that</font><font color="#E5E5E5"> we had all these little</font>

678
00:25:18,549 --> 00:25:24,010
<font color="#E5E5E5">roots out there because</font><font color="#CCCCCC"> each of these</font>

679
00:25:21,690 --> 00:25:26,169
<font color="#CCCCCC">cabinets which</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> where Islands for</font>

680
00:25:24,010 --> 00:25:27,580
those MST instances they had no

681
00:25:26,169 --> 00:25:29,890
knowledge of any of<font color="#E5E5E5"> the other so that</font>

682
00:25:27,580 --> 00:25:31,480
was you<font color="#E5E5E5"> know we were kind of discussing</font>

683
00:25:29,890 --> 00:25:33,340
back and forth well do we pass them

684
00:25:31,480 --> 00:25:34,690
<font color="#E5E5E5">along the trunk even though nothing out</font>

685
00:25:33,340 --> 00:25:37,449
there<font color="#E5E5E5"> is going to be in there just so</font>

686
00:25:34,690 --> 00:25:39,520
<font color="#CCCCCC">that</font><font color="#E5E5E5"> MST doesn't look goofy</font><font color="#CCCCCC"> or do we</font>

687
00:25:37,450 --> 00:25:42,399
<font color="#CCCCCC">just leave</font><font color="#E5E5E5"> them</font><font color="#CCCCCC"> in</font><font color="#E5E5E5"> seas</font><font color="#CCCCCC"> Islands and so</font>

688
00:25:39,520 --> 00:25:44,320
that was<font color="#E5E5E5"> against some of the the fun</font>

689
00:25:42,399 --> 00:25:46,889
stuff<font color="#CCCCCC"> that</font><font color="#E5E5E5"> we had to deal</font><font color="#CCCCCC"> with</font><font color="#E5E5E5"> tonight</font>

690
00:25:44,320 --> 00:25:48,970
<font color="#E5E5E5">what did what did you end</font><font color="#CCCCCC"> up deciding</font><font color="#E5E5E5"> on</font>

691
00:25:46,890 --> 00:25:51,880
<font color="#E5E5E5">his</font><font color="#CCCCCC"> Islands okay</font>

692
00:25:48,970 --> 00:25:55,659
just figured<font color="#CCCCCC"> that the the chance of</font>

693
00:25:51,880 --> 00:25:58,090
somebody<font color="#E5E5E5"> inadvertently putting traffic</font>

694
00:25:55,659 --> 00:26:00,100
down there<font color="#E5E5E5"> was less desirable than</font><font color="#CCCCCC"> the</font>

695
00:25:58,090 --> 00:26:06,760
oddball of well hey why is this route

696
00:26:00,100 --> 00:26:09,610
<font color="#E5E5E5">down here we found this actually got got</font>

697
00:26:06,760 --> 00:26:11,379
exacerbated with<font color="#E5E5E5"> virtualization even</font>

698
00:26:09,610 --> 00:26:13,418
even though<font color="#E5E5E5"> I think would</font><font color="#CCCCCC"> really make</font>

699
00:26:11,380 --> 00:26:16,029
<font color="#E5E5E5">sense if we could all do layer 3</font><font color="#CCCCCC"> to 2 a</font>

700
00:26:13,419 --> 00:26:17,649
virtual server<font color="#E5E5E5"> and then and then route</font>

701
00:26:16,029 --> 00:26:20,370
internally to all the individual servers

702
00:26:17,649 --> 00:26:23,020
so many of our applications<font color="#E5E5E5"> are built on</font>

703
00:26:20,370 --> 00:26:25,959
this<font color="#E5E5E5"> a group of servers sit it sits</font><font color="#CCCCCC"> in a</font>

704
00:26:23,020 --> 00:26:29,559
flat VLAN and<font color="#E5E5E5"> some applications or</font><font color="#CCCCCC"> even</font>

705
00:26:25,960 --> 00:26:30,700
<font color="#E5E5E5">or even doing multicast you could you</font>

706
00:26:29,559 --> 00:26:31,928
can<font color="#CCCCCC"> hey you could route multicast but</font>

707
00:26:30,700 --> 00:26:34,160
some are doing<font color="#E5E5E5"> kind</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> fake multicast</font>

708
00:26:31,929 --> 00:26:36,050
<font color="#E5E5E5">based</font><font color="#CCCCCC"> or just broadcast discovery</font>

709
00:26:34,160 --> 00:26:37,670
and and the really expecting<font color="#CCCCCC"> servers to</font>

710
00:26:36,050 --> 00:26:39,889
sit in<font color="#E5E5E5"> this flat VLAN and</font><font color="#CCCCCC"> when you're</font>

711
00:26:37,670 --> 00:26:42,500
<font color="#E5E5E5">doing virtualized servers VMware Zen</font><font color="#CCCCCC"> or</font>

712
00:26:39,890 --> 00:26:44,330
<font color="#E5E5E5">whatnot</font><font color="#CCCCCC"> now you actually really need</font>

713
00:26:42,500 --> 00:26:46,460
every VLAN to every single physical

714
00:26:44,330 --> 00:26:50,240
server<font color="#E5E5E5"> port so you can move your VMs</font>

715
00:26:46,460 --> 00:26:52,400
around<font color="#E5E5E5"> and so big layer</font><font color="#CCCCCC"> 2</font><font color="#E5E5E5"> is still out</font>

716
00:26:50,240 --> 00:26:53,780
there and<font color="#CCCCCC"> still a problem that the many</font>

717
00:26:52,400 --> 00:26:55,010
folks are facing more enterprises

718
00:26:53,780 --> 00:26:56,600
nowadays are facing people<font color="#E5E5E5"> when we have</font>

719
00:26:55,010 --> 00:26:59,150
<font color="#E5E5E5">10 20 racks and their data center I'm</font>

720
00:26:56,600 --> 00:27:00,919
<font color="#CCCCCC">going to face it</font><font color="#E5E5E5"> because they're our CTO</font>

721
00:26:59,150 --> 00:27:02,690
so they're CFOs<font color="#E5E5E5"> or opening a</font>

722
00:27:00,920 --> 00:27:04,460
<font color="#CCCCCC">Businessweek magazine and meeting over</font>

723
00:27:02,690 --> 00:27:05,960
<font color="#CCCCCC">qu ization virtually</font><font color="#E5E5E5"> saves you money and</font>

724
00:27:04,460 --> 00:27:07,730
<font color="#E5E5E5">so they say oh you need a push</font>

725
00:27:05,960 --> 00:27:08,930
virtualization<font color="#E5E5E5"> I just I just</font><font color="#CCCCCC"> bought</font><font color="#E5E5E5"> ten</font>

726
00:27:07,730 --> 00:27:13,670
thousand dollars<font color="#E5E5E5"> worth of VMware</font>

727
00:27:08,930 --> 00:27:15,560
licenses so go deploy<font color="#E5E5E5"> so so I say MST</font><font color="#CCCCCC"> is</font>

728
00:27:13,670 --> 00:27:17,990
good<font color="#CCCCCC"> just just know</font><font color="#E5E5E5"> about it the thing</font>

729
00:27:15,560 --> 00:27:19,100
about<font color="#E5E5E5"> pushing it to all the switches we</font>

730
00:27:17,990 --> 00:27:20,480
found you didn't have to tell<font color="#E5E5E5"> all the</font>

731
00:27:19,100 --> 00:27:22,189
<font color="#CCCCCC">Swit you'd have to tell all the switches</font>

732
00:27:20,480 --> 00:27:23,120
about the VLANs themselves so<font color="#E5E5E5"> I don't</font>

733
00:27:22,190 --> 00:27:24,800
<font color="#E5E5E5">think you really</font><font color="#CCCCCC"> have to</font><font color="#E5E5E5"> end up</font><font color="#CCCCCC"> with</font>

734
00:27:23,120 --> 00:27:26,030
<font color="#E5E5E5">Islands there but you do need to tell</font>

735
00:27:24,800 --> 00:27:27,730
them least about<font color="#E5E5E5"> the instance mapping</font>

736
00:27:26,030 --> 00:27:30,200
and that was kind of a<font color="#E5E5E5"> hard</font><font color="#CCCCCC"> one to</font>

737
00:27:27,730 --> 00:27:31,850
<font color="#CCCCCC">understand but once we</font><font color="#E5E5E5"> once we caught</font><font color="#CCCCCC"> it</font>

738
00:27:30,200 --> 00:27:33,140
we make sure<font color="#CCCCCC"> that</font><font color="#E5E5E5"> everybody else who</font>

739
00:27:31,850 --> 00:27:36,379
wants<font color="#E5E5E5"> to know about it please remember</font>

740
00:27:33,140 --> 00:27:38,840
<font color="#CCCCCC">to do it</font><font color="#E5E5E5"> so thank you I thank you very</font>

741
00:27:36,380 --> 00:27:40,460
<font color="#E5E5E5">much if you do need know people who need</font>

742
00:27:38,840 --> 00:27:43,010
assistance<font color="#CCCCCC"> peak is always available here</font>

743
00:27:40,460 --> 00:27:45,170
to help you can email me<font color="#E5E5E5"> here if you</font>

744
00:27:43,010 --> 00:27:46,760
have<font color="#CCCCCC"> any casual questions I'm happy to</font>

745
00:27:45,170 --> 00:27:47,210
always take a phone call<font color="#CCCCCC"> and I am chat</font>

746
00:27:46,760 --> 00:27:49,970
or whatnot

747
00:27:47,210 --> 00:27:51,500
<font color="#CCCCCC">I'd</font><font color="#E5E5E5"> help others in</font><font color="#CCCCCC"> need</font><font color="#E5E5E5"> and if it turns</font>

748
00:27:49,970 --> 00:27:53,330
<font color="#CCCCCC">into</font><font color="#E5E5E5"> a business opportunity great but if</font>

749
00:27:51,500 --> 00:27:55,810
it<font color="#E5E5E5"> helps somebody that's even better so</font>

750
00:27:53,330 --> 00:27:55,810
thank you very<font color="#E5E5E5"> much</font>

