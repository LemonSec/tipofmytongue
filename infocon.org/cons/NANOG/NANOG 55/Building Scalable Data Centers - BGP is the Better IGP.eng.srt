1
00:00:08,119 --> 00:00:26,460
do we have Peter Peter tell us why bgp

2
00:00:15,000 --> 00:00:29,279
is the better<font color="#CCCCCC"> IGP so uh thanks for the</font>

3
00:00:26,460 --> 00:00:32,730
body<font color="#E5E5E5"> for coming and thanks to the</font>

4
00:00:29,279 --> 00:00:34,730
committee for<font color="#CCCCCC"> picking up our talk today</font>

5
00:00:32,729 --> 00:00:39,000
we're going to talk<font color="#E5E5E5"> about our experience</font>

6
00:00:34,730 --> 00:00:42,089
<font color="#CCCCCC">with data center design and user</font><font color="#E5E5E5"> bgp as</font>

7
00:00:39,000 --> 00:00:48,539
the only<font color="#E5E5E5"> protocol for the data center</font>

8
00:00:42,090 --> 00:00:51,629
routing so before<font color="#E5E5E5"> I begin</font><font color="#CCCCCC"> let's quickly</font>

9
00:00:48,539 --> 00:00:53,280
look at<font color="#CCCCCC"> the</font><font color="#E5E5E5"> structure</font><font color="#CCCCCC"> of this table so</font>

10
00:00:51,629 --> 00:00:55,829
I'm going to start<font color="#E5E5E5"> with the problem</font>

11
00:00:53,280 --> 00:01:00,239
statement<font color="#CCCCCC"> talk</font><font color="#E5E5E5"> about our data centers</font>

12
00:00:55,829 --> 00:01:04,650
our<font color="#E5E5E5"> challenges then outline our first</font>

13
00:01:00,239 --> 00:01:07,380
design which was done a few years ago we

14
00:01:04,650 --> 00:01:10,770
<font color="#CCCCCC">got talk about why we chose BGP over</font>

15
00:01:07,380 --> 00:01:14,460
more conventional particles such as<font color="#E5E5E5"> OSPF</font>

16
00:01:10,770 --> 00:01:17,310
or<font color="#E5E5E5"> SAS and finally we will</font><font color="#CCCCCC"> talk about</font>

17
00:01:14,460 --> 00:01:23,429
<font color="#E5E5E5">our new approach we're using right now</font>

18
00:01:17,310 --> 00:01:27,509
<font color="#E5E5E5">for new deployments so let's have a look</font>

19
00:01:23,430 --> 00:01:30,450
at<font color="#E5E5E5"> our up there is any specifics so we</font>

20
00:01:27,509 --> 00:01:33,299
run on<font color="#E5E5E5"> the services and on the services</font>

21
00:01:30,450 --> 00:01:36,840
is everything which serves as customers

22
00:01:33,299 --> 00:01:41,549
over the<font color="#CCCCCC"> Internet</font><font color="#E5E5E5"> and has over millions</font>

23
00:01:36,840 --> 00:01:44,549
of active<font color="#CCCCCC"> users at every time so we do</font>

24
00:01:41,549 --> 00:01:46,950
run<font color="#CCCCCC"> out of servers on the</font><font color="#E5E5E5"> scale of</font>

25
00:01:44,549 --> 00:01:50,450
hundreds of<font color="#E5E5E5"> thousands in other the</font>

26
00:01:46,950 --> 00:01:55,020
<font color="#CCCCCC">center's and these servers</font><font color="#E5E5E5"> utilize</font>

27
00:01:50,450 --> 00:01:57,270
mostly<font color="#E5E5E5"> 10g in 1g</font><font color="#CCCCCC"> Nick's I can say the</font>

28
00:01:55,020 --> 00:02:00,000
old 10g right now<font color="#E5E5E5"> there's still a lot of</font>

29
00:01:57,270 --> 00:02:02,729
<font color="#CCCCCC">one</font><font color="#E5E5E5"> G but 10g Nick's</font>

30
00:02:00,000 --> 00:02:06,689
were a major driver for our<font color="#E5E5E5"> higher</font>

31
00:02:02,729 --> 00:02:09,649
capacity and higher bandwidth so all the

32
00:02:06,689 --> 00:02:12,250
applications we run our kind<font color="#E5E5E5"> of specific</font>

33
00:02:09,649 --> 00:02:15,100
serve applications are well

34
00:02:12,250 --> 00:02:17,920
we're of a network<font color="#E5E5E5"> they designed to be</font>

35
00:02:15,100 --> 00:02:21,280
<font color="#E5E5E5">run the</font><font color="#CCCCCC"> network and we treat network as</font>

36
00:02:17,920 --> 00:02:24,519
computer<font color="#E5E5E5"> so essentially the application</font>

37
00:02:21,280 --> 00:02:27,220
is one aware of topology and utilizes

38
00:02:24,520 --> 00:02:30,280
full capacity<font color="#E5E5E5"> and full capabilities of a</font>

39
00:02:27,220 --> 00:02:32,530
network to prompt computations<font color="#E5E5E5"> in other</font>

40
00:02:30,280 --> 00:02:35,620
words the applications are parallel and

41
00:02:32,530 --> 00:02:38,230
specialized<font color="#E5E5E5"> to perform just say one</font>

42
00:02:35,620 --> 00:02:42,370
function such<font color="#CCCCCC"> as web indexed amputation</font>

43
00:02:38,230 --> 00:02:46,390
or say shows an email<font color="#E5E5E5"> sends a mailbox of</font>

44
00:02:42,370 --> 00:02:49,300
<font color="#CCCCCC">internet</font><font color="#E5E5E5"> and so this is quite different</font>

45
00:02:46,390 --> 00:02:52,450
<font color="#E5E5E5">from traditional enterprise of course</font>

46
00:02:49,300 --> 00:02:58,510
<font color="#E5E5E5">and this brings some specifics to design</font>

47
00:02:52,450 --> 00:03:01,839
an application behavior so most

48
00:02:58,510 --> 00:03:04,390
important part is I believe like Angie

49
00:03:01,840 --> 00:03:08,050
<font color="#E5E5E5">mentioned before</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> a specific type</font><font color="#CCCCCC"> of</font>

50
00:03:04,390 --> 00:03:11,260
traffic<font color="#E5E5E5"> flow that we have so</font><font color="#CCCCCC"> resolve</font>

51
00:03:08,050 --> 00:03:13,900
specifics<font color="#E5E5E5"> but very</font><font color="#CCCCCC"> simply in very simple</font>

52
00:03:11,260 --> 00:03:18,910
<font color="#E5E5E5">fashion you can divide the traffic flows</font>

53
00:03:13,900 --> 00:03:21,519
into queries<font color="#E5E5E5"> and background traffic so</font>

54
00:03:18,910 --> 00:03:23,440
queries is what<font color="#E5E5E5"> customers send you or</font>

55
00:03:21,519 --> 00:03:26,890
what what<font color="#CCCCCC"> applications sends to each</font>

56
00:03:23,440 --> 00:03:29,950
other to perform<font color="#CCCCCC"> say calls or out some</font>

57
00:03:26,890 --> 00:03:32,048
requests and background<font color="#E5E5E5"> traffic is the</font>

58
00:03:29,950 --> 00:03:35,470
majority<font color="#CCCCCC"> all traffic that does all the</font>

59
00:03:32,049 --> 00:03:38,430
<font color="#CCCCCC">work such as</font><font color="#E5E5E5"> weapon</font><font color="#CCCCCC"> desk navigation or</font>

60
00:03:35,470 --> 00:03:41,200
<font color="#E5E5E5">mailbox moves</font><font color="#CCCCCC"> and all those things</font><font color="#E5E5E5"> and</font>

61
00:03:38,430 --> 00:03:43,660
<font color="#E5E5E5">that round is a majority</font><font color="#CCCCCC"> of all traffic</font>

62
00:03:41,200 --> 00:03:47,560
in our data centers<font color="#E5E5E5"> it's a heavy bot</font>

63
00:03:43,660 --> 00:03:50,230
flow and<font color="#CCCCCC"> veyron from server to server or</font>

64
00:03:47,560 --> 00:03:55,600
in other words<font color="#E5E5E5"> that the</font><font color="#CCCCCC"> comb industry</font>

65
00:03:50,230 --> 00:03:59,589
<font color="#CCCCCC">may run east-west so the challenge was</font>

66
00:03:55,600 --> 00:04:01,900
twofold<font color="#CCCCCC"> first to find</font><font color="#E5E5E5"> apology</font><font color="#CCCCCC"> which is</font>

67
00:03:59,590 --> 00:04:05,350
simple enough<font color="#E5E5E5"> but provides enough</font>

68
00:04:01,900 --> 00:04:07,900
<font color="#CCCCCC">capacity</font><font color="#E5E5E5"> from server to server</font><font color="#CCCCCC"> at the</font>

69
00:04:05,350 --> 00:04:11,620
same time allowed us to keep a design

70
00:04:07,900 --> 00:04:14,170
very<font color="#E5E5E5"> simple and uniform and secondly we</font>

71
00:04:11,620 --> 00:04:18,130
<font color="#CCCCCC">hope to pick</font><font color="#E5E5E5"> up a routing protocol but</font>

72
00:04:14,170 --> 00:04:21,608
allows us to use<font color="#E5E5E5"> single solution for</font>

73
00:04:18,130 --> 00:04:24,850
data<font color="#E5E5E5"> center everywhere</font><font color="#CCCCCC"> the protocol</font>

74
00:04:21,608 --> 00:04:27,280
which has as similar as possible

75
00:04:24,850 --> 00:04:30,310
and the protocol which has<font color="#E5E5E5"> a very wide</font>

76
00:04:27,280 --> 00:04:34,539
vendor support so the last requirement

77
00:04:30,310 --> 00:04:37,630
is specific<font color="#E5E5E5"> because we often tend to</font>

78
00:04:34,540 --> 00:04:40,360
<font color="#E5E5E5">change our vendors for purpose of Johnny</font>

79
00:04:37,630 --> 00:04:42,760
costs down<font color="#CCCCCC"> so in order</font><font color="#E5E5E5"> to keep a</font>

80
00:04:40,360 --> 00:04:46,420
solution working we<font color="#CCCCCC"> need</font><font color="#E5E5E5"> a protocol</font>

81
00:04:42,760 --> 00:04:50,950
which<font color="#CCCCCC"> has very wide</font><font color="#E5E5E5"> Interop and support</font>

82
00:04:46,420 --> 00:04:55,330
<font color="#E5E5E5">from every vendor so let's look at our</font>

83
00:04:50,950 --> 00:04:57,760
first initial solution so we choice of

84
00:04:55,330 --> 00:05:02,500
cost apology<font color="#CCCCCC"> I guess is</font><font color="#E5E5E5"> now very common</font>

85
00:04:57,760 --> 00:05:04,750
in the<font color="#CCCCCC"> industry so clause</font><font color="#E5E5E5"> as the comb</font>

86
00:05:02,500 --> 00:05:08,140
industry is a network which has<font color="#E5E5E5"> three</font>

87
00:05:04,750 --> 00:05:10,960
stages<font color="#E5E5E5"> middle stage is often called</font>

88
00:05:08,140 --> 00:05:13,479
spine layer and the input and output

89
00:05:10,960 --> 00:05:18,159
<font color="#E5E5E5">stages are often being folded together</font>

90
00:05:13,480 --> 00:05:20,640
<font color="#E5E5E5">and being</font><font color="#CCCCCC"> called as a leaf leaf layer so</font>

91
00:05:18,160 --> 00:05:24,600
the clause may have multiple stages

92
00:05:20,640 --> 00:05:26,979
<font color="#E5E5E5">normal is a happy having three stages</font>

93
00:05:24,600 --> 00:05:29,800
<font color="#CCCCCC">but you can actually</font><font color="#E5E5E5"> grow with apology</font>

94
00:05:26,980 --> 00:05:31,780
<font color="#E5E5E5">and have five seven</font><font color="#CCCCCC"> and more stages the</font>

95
00:05:29,800 --> 00:05:34,120
only problem is<font color="#CCCCCC"> that as you</font><font color="#E5E5E5"> grow</font><font color="#CCCCCC"> up a</font>

96
00:05:31,780 --> 00:05:38,260
<font color="#E5E5E5">cloth apology you</font><font color="#CCCCCC"> also</font><font color="#E5E5E5"> increase the</font>

97
00:05:34,120 --> 00:05:40,390
complexity of<font color="#CCCCCC"> filling</font><font color="#E5E5E5"> structure so this</font>

98
00:05:38,260 --> 00:05:42,909
<font color="#E5E5E5">topology provides full bisection</font>

99
00:05:40,390 --> 00:05:46,719
bandwidth as long as your number<font color="#E5E5E5"> of up</font>

100
00:05:42,910 --> 00:05:49,390
<font color="#E5E5E5">links</font><font color="#CCCCCC"> M from beliefs which is more or</font>

101
00:05:46,720 --> 00:05:52,300
<font color="#E5E5E5">equal to a number</font><font color="#CCCCCC"> of down links going</font>

102
00:05:49,390 --> 00:05:55,450
<font color="#CCCCCC">down to your</font><font color="#E5E5E5"> say top of rack or end of</font>

103
00:05:52,300 --> 00:05:57,520
row switches we use<font color="#E5E5E5"> top</font><font color="#CCCCCC"> effect only</font><font color="#E5E5E5"> so</font>

104
00:05:55,450 --> 00:06:02,490
this is why you<font color="#E5E5E5"> see top of rack</font><font color="#CCCCCC"> who they</font>

105
00:05:57,520 --> 00:06:06,789
are<font color="#E5E5E5"> on the diagram so our initial design</font>

106
00:06:02,490 --> 00:06:09,640
<font color="#E5E5E5">was exactly</font><font color="#CCCCCC"> a class topology which had</font>

107
00:06:06,790 --> 00:06:12,130
from say anywhere<font color="#CCCCCC"> from</font><font color="#E5E5E5"> eight to</font><font color="#CCCCCC"> thirty</font>

108
00:06:09,640 --> 00:06:15,130
switches in<font color="#E5E5E5"> the spine layer and which</font>

109
00:06:12,130 --> 00:06:17,650
connects our containers<font color="#CCCCCC"> because we</font><font color="#E5E5E5"> most</font>

110
00:06:15,130 --> 00:06:19,659
use can tell deployments<font color="#E5E5E5"> you</font><font color="#CCCCCC"> know the</font>

111
00:06:17,650 --> 00:06:23,979
data centers<font color="#E5E5E5"> that links them into a</font>

112
00:06:19,660 --> 00:06:26,980
single<font color="#E5E5E5"> fabric inside data center so we</font>

113
00:06:23,980 --> 00:06:30,820
deploy live switches in pairs<font color="#CCCCCC"> so this</font>

114
00:06:26,980 --> 00:06:33,910
way<font color="#E5E5E5"> we</font><font color="#CCCCCC"> can use</font><font color="#E5E5E5"> not just</font><font color="#CCCCCC"> aggregation or</font><font color="#E5E5E5"> M</font>

115
00:06:30,820 --> 00:06:36,070
<font color="#CCCCCC">lakhs</font><font color="#E5E5E5"> to increase capacity or bandwidth</font>

116
00:06:33,910 --> 00:06:38,830
inside the container

117
00:06:36,070 --> 00:06:42,760
so as you can see initial design has

118
00:06:38,830 --> 00:06:45,690
allowed<font color="#CCCCCC"> to inside the</font><font color="#E5E5E5"> container so the</font>

119
00:06:42,760 --> 00:06:48,210
reason for<font color="#CCCCCC"> this was most</font><font color="#E5E5E5"> it you have</font>

120
00:06:45,690 --> 00:06:51,010
compatibility<font color="#E5E5E5"> with our old designs</font>

121
00:06:48,210 --> 00:06:56,830
because our old designs were<font color="#CCCCCC"> based on</font>

122
00:06:51,010 --> 00:06:59,380
led to the apologists mostly and as you

123
00:06:56,830 --> 00:07:02,590
can<font color="#E5E5E5"> see</font><font color="#CCCCCC"> am blacks have been chosen as a</font>

124
00:06:59,380 --> 00:07:06,150
solution<font color="#CCCCCC"> to aggregate capacity inside</font>

125
00:07:02,590 --> 00:07:09,489
<font color="#E5E5E5">the pod sets or containers as a coal man</font>

126
00:07:06,150 --> 00:07:11,650
<font color="#CCCCCC">also one specific is a or subscription</font>

127
00:07:09,490 --> 00:07:15,310
is only done at the<font color="#E5E5E5"> top of rack layer</font>

128
00:07:11,650 --> 00:07:17,469
this way you can treat<font color="#E5E5E5"> the</font><font color="#CCCCCC"> topology as a</font>

129
00:07:15,310 --> 00:07:20,170
single<font color="#CCCCCC"> Bennett domain orbit above rack</font>

130
00:07:17,470 --> 00:07:22,720
or<font color="#E5E5E5"> in other words we talked about</font>

131
00:07:20,170 --> 00:07:26,800
<font color="#CCCCCC">location guys you can tell them you have</font>

132
00:07:22,720 --> 00:07:31,740
full capacity in the rack and out of

133
00:07:26,800 --> 00:07:35,380
<font color="#CCCCCC">iraq you</font><font color="#E5E5E5"> have this or subscription ratio</font>

134
00:07:31,740 --> 00:07:38,380
so<font color="#CCCCCC"> pull the</font><font color="#E5E5E5"> routing after a lot of</font>

135
00:07:35,380 --> 00:07:41,860
discussions<font color="#E5E5E5"> we chose to use BGP only as</font>

136
00:07:38,380 --> 00:07:45,190
a<font color="#E5E5E5"> symbolical</font><font color="#CCCCCC"> so as you</font><font color="#E5E5E5"> can</font><font color="#CCCCCC"> see we have a</font>

137
00:07:41,860 --> 00:07:48,340
single<font color="#E5E5E5"> s number single s for the spine</font>

138
00:07:45,190 --> 00:07:53,080
<font color="#E5E5E5">for all spine devices and then a single</font>

139
00:07:48,340 --> 00:07:55,299
<font color="#E5E5E5">s number for every container so</font>

140
00:07:53,080 --> 00:07:58,060
<font color="#E5E5E5">essentially our own belief switches you</font>

141
00:07:55,300 --> 00:08:02,350
simply advertise beliefs belief<font color="#E5E5E5"> events</font>

142
00:07:58,060 --> 00:08:05,650
<font color="#E5E5E5">in to BGP and you use equal cost multi</font>

143
00:08:02,350 --> 00:08:11,350
path followers shown across be links

144
00:08:05,650 --> 00:08:13,780
<font color="#CCCCCC">Amit apology so this fine with is</font>

145
00:08:11,350 --> 00:08:16,270
normally from<font color="#CCCCCC"> 8</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> 32 switches like I</font>

146
00:08:13,780 --> 00:08:18,940
said and this means we<font color="#E5E5E5"> require a vendor</font>

147
00:08:16,270 --> 00:08:22,210
to<font color="#E5E5E5"> support this large fan out for our</font>

148
00:08:18,940 --> 00:08:27,600
equal cost multi path<font color="#E5E5E5"> both on the leaf</font>

149
00:08:22,210 --> 00:08:30,219
and spine layers<font color="#CCCCCC"> based apology so</font>

150
00:08:27,600 --> 00:08:33,010
probably this<font color="#CCCCCC"> is the main question</font><font color="#E5E5E5"> why</font>

151
00:08:30,220 --> 00:08:38,440
we chose<font color="#E5E5E5"> BGP over</font><font color="#CCCCCC"> a more conventional</font>

152
00:08:33,010 --> 00:08:42,159
<font color="#E5E5E5">protocols which OSPF or is is so first</font>

153
00:08:38,440 --> 00:08:45,940
of all the main argument was simplicity

154
00:08:42,159 --> 00:08:49,120
<font color="#E5E5E5">of</font><font color="#CCCCCC"> bgp because if you look</font><font color="#E5E5E5"> at bgp</font>

155
00:08:45,940 --> 00:08:49,900
specification<font color="#E5E5E5"> and source code you can</font>

156
00:08:49,120 --> 00:08:52,000
see the<font color="#E5E5E5"> statement</font>

157
00:08:49,900 --> 00:08:56,980
<font color="#E5E5E5">genes and data structures in</font><font color="#CCCCCC"> BGP</font><font color="#E5E5E5"> are</font>

158
00:08:52,000 --> 00:08:59,950
much simpler compared to say<font color="#CCCCCC"> OSPF if you</font>

159
00:08:56,980 --> 00:09:03,550
simply compare<font color="#CCCCCC"> OSPF adjacency formation</font>

160
00:08:59,950 --> 00:09:07,600
process will be<font color="#CCCCCC"> G be added exchange you</font>

161
00:09:03,550 --> 00:09:12,849
<font color="#CCCCCC">can clearly see what</font><font color="#E5E5E5"> BGP is much simpler</font>

162
00:09:07,600 --> 00:09:15,310
<font color="#CCCCCC">of course back some downsides because</font>

163
00:09:12,850 --> 00:09:18,070
some<font color="#CCCCCC"> limitation of</font><font color="#E5E5E5"> BGP put too much</font>

164
00:09:15,310 --> 00:09:20,650
effort<font color="#E5E5E5"> into optimization specifically</font>

165
00:09:18,070 --> 00:09:22,990
<font color="#CCCCCC">into update taking process and we've</font>

166
00:09:20,650 --> 00:09:25,800
seen<font color="#E5E5E5"> some vendors having issues and bugs</font>

167
00:09:22,990 --> 00:09:28,570
in a specifically update<font color="#E5E5E5"> packing process</font>

168
00:09:25,800 --> 00:09:32,709
<font color="#CCCCCC">but in general our experience in testing</font>

169
00:09:28,570 --> 00:09:36,790
<font color="#CCCCCC">and</font><font color="#E5E5E5"> operations once that BGP deployments</font>

170
00:09:32,710 --> 00:09:40,750
are much<font color="#E5E5E5"> simpler</font><font color="#CCCCCC"> to operate and</font><font color="#E5E5E5"> support</font>

171
00:09:36,790 --> 00:09:44,439
and secondly probably the<font color="#E5E5E5"> our</font><font color="#CCCCCC"> what very</font>

172
00:09:40,750 --> 00:09:46,600
important feature is BGP being

173
00:09:44,440 --> 00:09:50,260
essentially<font color="#CCCCCC"> a</font><font color="#E5E5E5"> particle which is</font><font color="#CCCCCC"> distance</font>

174
00:09:46,600 --> 00:09:52,060
data allows you to change<font color="#E5E5E5"> browsing</font>

175
00:09:50,260 --> 00:09:55,270
behavior<font color="#CCCCCC"> hop-by-hop basis</font>

176
00:09:52,060 --> 00:09:57,640
so essentially<font color="#E5E5E5"> arm in our deployments</font>

177
00:09:55,270 --> 00:09:59,710
will use this to do some sort of simple

178
00:09:57,640 --> 00:10:01,920
<font color="#E5E5E5">traffic engineering we can</font><font color="#CCCCCC"> peer will</font>

179
00:09:59,710 --> 00:10:04,360
every device whose<font color="#CCCCCC"> motor obsession and</font>

180
00:10:01,920 --> 00:10:08,530
inject<font color="#CCCCCC"> route</font><font color="#E5E5E5"> information</font><font color="#CCCCCC"> at every table</font>

181
00:10:04,360 --> 00:10:10,540
and this way<font color="#CCCCCC"> perform some</font><font color="#E5E5E5"> sort of very</font>

182
00:10:08,530 --> 00:10:16,870
simple crude by actually efficient

183
00:10:10,540 --> 00:10:19,240
traffic engineering so secondly trying

184
00:10:16,870 --> 00:10:23,260
to drama-free BGP is generally<font color="#E5E5E5"> more</font>

185
00:10:19,240 --> 00:10:26,440
simple<font color="#CCCCCC"> basically because BGP has the</font>

186
00:10:23,260 --> 00:10:30,069
same single<font color="#E5E5E5"> rib</font><font color="#CCCCCC"> local retail and if you</font>

187
00:10:26,440 --> 00:10:32,260
take<font color="#CCCCCC"> OSPF for is</font><font color="#E5E5E5"> is you</font><font color="#CCCCCC"> have links the</font>

188
00:10:30,070 --> 00:10:34,930
database which has<font color="#E5E5E5"> to be translated into</font>

189
00:10:32,260 --> 00:10:38,740
<font color="#E5E5E5">the routing table using SPF our</font>

190
00:10:34,930 --> 00:10:41,589
calculations<font color="#E5E5E5"> so normally a BGP is a more</font>

191
00:10:38,740 --> 00:10:44,410
<font color="#E5E5E5">explicit in the sense because what you</font>

192
00:10:41,590 --> 00:10:48,730
see basically<font color="#E5E5E5"> is most</font><font color="#CCCCCC"> often what you get</font>

193
00:10:44,410 --> 00:10:50,650
in rows in table<font color="#E5E5E5"> plus you can always see</font>

194
00:10:48,730 --> 00:10:53,470
which<font color="#E5E5E5"> ones you receive and which ones</font>

195
00:10:50,650 --> 00:10:55,870
you send to a<font color="#E5E5E5"> neighbors you ever</font><font color="#CCCCCC"> see</font><font color="#E5E5E5"> no</font>

196
00:10:53,470 --> 00:10:58,650
<font color="#E5E5E5">SPF you have to look at the flood lists</font>

197
00:10:55,870 --> 00:11:03,100
and links being sent to<font color="#CCCCCC"> a</font><font color="#E5E5E5"> neighbors and</font>

198
00:10:58,650 --> 00:11:03,910
<font color="#E5E5E5">overall trying to troubleshoot</font><font color="#CCCCCC"> OSPF is</font>

199
00:11:03,100 --> 00:11:06,900
generally more

200
00:11:03,910 --> 00:11:10,350
difficult of course<font color="#CCCCCC"> whereas some</font>

201
00:11:06,900 --> 00:11:14,069
downsides again<font color="#CCCCCC"> let's say</font><font color="#E5E5E5"> for example</font>

202
00:11:10,350 --> 00:11:17,920
<font color="#CCCCCC">OSPF may allow you to find MTU</font><font color="#E5E5E5"> issue</font>

203
00:11:14,070 --> 00:11:20,890
actually<font color="#CCCCCC"> before</font><font color="#E5E5E5"> you run into any</font>

204
00:11:17,920 --> 00:11:22,030
<font color="#E5E5E5">problems</font><font color="#CCCCCC"> bgp will form adjacency</font><font color="#E5E5E5"> or</font>

205
00:11:20,890 --> 00:11:25,270
actual<font color="#CCCCCC"> fitting session</font>

206
00:11:22,030 --> 00:11:28,329
even if<font color="#E5E5E5"> m2 actually mismatch because</font><font color="#CCCCCC"> tcp</font>

207
00:11:25,270 --> 00:11:30,280
will actually perform<font color="#CCCCCC"> entry discovery</font>

208
00:11:28,330 --> 00:11:35,800
and you'll<font color="#E5E5E5"> never find out an</font><font color="#CCCCCC"> interview</font>

209
00:11:30,280 --> 00:11:37,780
problem however<font color="#CCCCCC"> in our environment we do</font>

210
00:11:35,800 --> 00:11:40,209
have very<font color="#E5E5E5"> tight control of all the</font>

211
00:11:37,780 --> 00:11:42,699
<font color="#E5E5E5">switches and the network so you can</font>

212
00:11:40,210 --> 00:11:47,550
always ensure that the MTU size is

213
00:11:42,700 --> 00:11:51,670
uniform everywhere<font color="#E5E5E5"> so the last argument</font>

214
00:11:47,550 --> 00:11:55,719
<font color="#CCCCCC">even propagation or</font><font color="#E5E5E5"> even flooding in BGP</font>

215
00:11:51,670 --> 00:11:58,800
is<font color="#E5E5E5"> more constrained since BGP</font><font color="#CCCCCC"> is</font>

216
00:11:55,720 --> 00:12:01,240
distance vector<font color="#E5E5E5"> I change the topology</font>

217
00:11:58,800 --> 00:12:03,790
will normally stop at some<font color="#E5E5E5"> point of</font>

218
00:12:01,240 --> 00:12:07,720
hierarchy let's see if a link flaps<font color="#CCCCCC"> in</font>

219
00:12:03,790 --> 00:12:11,219
<font color="#CCCCCC">OSPF the the event floods for whole area</font>

220
00:12:07,720 --> 00:12:13,900
no matter what happens<font color="#E5E5E5"> in BGP normally</font>

221
00:12:11,220 --> 00:12:16,930
once you find<font color="#E5E5E5"> different best paths you</font>

222
00:12:13,900 --> 00:12:20,290
<font color="#E5E5E5">stop</font><font color="#CCCCCC"> volume V DV</font><font color="#E5E5E5"> event and just converge</font>

223
00:12:16,930 --> 00:12:25,000
on it on a<font color="#E5E5E5"> on a new path so in general</font>

224
00:12:20,290 --> 00:12:29,880
we<font color="#E5E5E5"> found that under specific</font><font color="#CCCCCC"> Fedor</font>

225
00:12:25,000 --> 00:12:29,880
scenarios<font color="#E5E5E5"> BGP has better fault isolation</font>

226
00:12:30,480 --> 00:12:37,810
so but<font color="#E5E5E5"> two main common arguments against</font>

227
00:12:34,540 --> 00:12:40,120
BGP the first one is that<font color="#E5E5E5"> configuring</font>

228
00:12:37,810 --> 00:12:42,849
BGP<font color="#E5E5E5"> is much more complex and say</font>

229
00:12:40,120 --> 00:12:46,060
compared to a links a protocol<font color="#E5E5E5"> observe</font>

230
00:12:42,850 --> 00:12:48,000
<font color="#E5E5E5">all the neighbors as numbers</font><font color="#CCCCCC"> possibly be</font>

231
00:12:46,060 --> 00:12:51,219
<font color="#E5E5E5">three policies on the peering sessions</font>

232
00:12:48,000 --> 00:12:53,410
but in our environment<font color="#E5E5E5"> we have this all</font>

233
00:12:51,220 --> 00:12:55,990
<font color="#E5E5E5">done automatically by</font><font color="#CCCCCC"> using every</font>

234
00:12:53,410 --> 00:12:58,719
<font color="#E5E5E5">generation and there is no complex</font>

235
00:12:55,990 --> 00:12:59,350
policies just<font color="#E5E5E5"> viewing sessions and s</font>

236
00:12:58,720 --> 00:13:02,170
numbers

237
00:12:59,350 --> 00:13:03,940
nothing not<font color="#E5E5E5"> nothing special</font><font color="#CCCCCC"> so this</font>

238
00:13:02,170 --> 00:13:06,729
wasn't actually<font color="#CCCCCC"> a problem</font><font color="#E5E5E5"> for our</font>

239
00:13:03,940 --> 00:13:10,900
deployments<font color="#E5E5E5"> and for the convergence time</font>

240
00:13:06,730 --> 00:13:13,059
which is<font color="#CCCCCC"> be gp's main problem on the</font>

241
00:13:10,900 --> 00:13:15,909
<font color="#CCCCCC">Internet</font>

242
00:13:13,059 --> 00:13:19,649
<font color="#CCCCCC">has</font><font color="#E5E5E5"> been</font><font color="#CCCCCC"> issue for us</font><font color="#E5E5E5"> mostly because we</font>

243
00:13:15,909 --> 00:13:22,959
<font color="#CCCCCC">have very</font><font color="#E5E5E5"> simple</font><font color="#CCCCCC"> and symmetric apology</font>

244
00:13:19,649 --> 00:13:27,059
<font color="#CCCCCC">such as</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> class all</font><font color="#E5E5E5"> links a uniform</font>

245
00:13:22,959 --> 00:13:29,589
all pairs a uniform<font color="#E5E5E5"> if something fails</font>

246
00:13:27,059 --> 00:13:32,468
analysis<font color="#E5E5E5"> and simulations and experience</font>

247
00:13:29,589 --> 00:13:35,249
<font color="#CCCCCC">shows bad it takes only a few seconds to</font>

248
00:13:32,469 --> 00:13:38,079
do converge<font color="#E5E5E5"> and probably the biggest</font>

249
00:13:35,249 --> 00:13:40,179
feature which contributes here is that

250
00:13:38,079 --> 00:13:43,209
all<font color="#E5E5E5"> things are</font><font color="#CCCCCC"> point-to-point and it's</font>

251
00:13:40,179 --> 00:13:47,108
all fiber with no<font color="#CCCCCC"> converters so once the</font>

252
00:13:43,209 --> 00:13:49,919
link fails<font color="#CCCCCC"> most</font><font color="#E5E5E5"> between limitations</font><font color="#CCCCCC"> shut</font>

253
00:13:47,109 --> 00:13:53,949
<font color="#CCCCCC">down bgp session and the network</font>

254
00:13:49,919 --> 00:13:56,439
performs restoration of the from failure

255
00:13:53,949 --> 00:13:59,348
almost<font color="#E5E5E5"> instantly</font><font color="#CCCCCC"> so our experience</font><font color="#E5E5E5"> has</font>

256
00:13:56,439 --> 00:14:02,049
been<font color="#CCCCCC"> that</font><font color="#E5E5E5"> practically any failure has</font>

257
00:13:59,349 --> 00:14:06,759
been healed<font color="#E5E5E5"> within like maybe less than</font>

258
00:14:02,049 --> 00:14:09,608
<font color="#E5E5E5">a second and</font><font color="#CCCCCC"> even even if it takes to</font>

259
00:14:06,759 --> 00:14:13,799
<font color="#CCCCCC">say five to six seconds our environment</font>

260
00:14:09,609 --> 00:14:17,049
can tolerate this issue with no problems

261
00:14:13,799 --> 00:14:19,929
<font color="#E5E5E5">so there have</font><font color="#CCCCCC"> been some problems</font><font color="#E5E5E5"> with</font>

262
00:14:17,049 --> 00:14:23,799
this<font color="#CCCCCC"> old approach</font><font color="#E5E5E5"> so first of all as you</font>

263
00:14:19,929 --> 00:14:26,409
<font color="#CCCCCC">can</font><font color="#E5E5E5"> see we still had the two in the</font>

264
00:14:23,799 --> 00:14:29,589
container and this of course had all the

265
00:14:26,409 --> 00:14:33,879
problems<font color="#E5E5E5"> mostly broadcast</font><font color="#CCCCCC"> terms única</font>

266
00:14:29,589 --> 00:14:36,189
storms<font color="#E5E5E5"> and lag issues because all</font><font color="#CCCCCC"> mblaq</font>

267
00:14:33,879 --> 00:14:38,199
implementations are proprietary and<font color="#E5E5E5"> as</font>

268
00:14:36,189 --> 00:14:41,108
you<font color="#CCCCCC"> change the vendor</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> get new issues</font>

269
00:14:38,199 --> 00:14:44,468
with every new implementation so<font color="#CCCCCC"> m lag</font>

270
00:14:41,109 --> 00:14:47,409
is out<font color="#E5E5E5"> that's a nice picture but since</font>

271
00:14:44,469 --> 00:14:49,929
<font color="#E5E5E5">its own unknown standard</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> always</font>

272
00:14:47,409 --> 00:14:53,529
<font color="#CCCCCC">encounter</font><font color="#E5E5E5"> some issues I</font><font color="#CCCCCC"> guess</font><font color="#E5E5E5"> almost</font>

273
00:14:49,929 --> 00:14:56,079
<font color="#CCCCCC">everyone has this experience secondly</font>

274
00:14:53,529 --> 00:14:58,479
having<font color="#E5E5E5"> just single spine singular spine</font>

275
00:14:56,079 --> 00:15:01,508
devices<font color="#CCCCCC"> lingual scalability of the</font>

276
00:14:58,479 --> 00:15:04,359
<font color="#E5E5E5">capacity data center so the only</font><font color="#CCCCCC"> wakens</font>

277
00:15:01,509 --> 00:15:07,389
scale single<font color="#E5E5E5"> spine is by adding</font><font color="#CCCCCC"> more</font>

278
00:15:04,359 --> 00:15:10,709
line cards or more poor density in the

279
00:15:07,389 --> 00:15:14,079
spine boxes which somewhat limits

280
00:15:10,709 --> 00:15:16,388
<font color="#CCCCCC">producer</font><font color="#E5E5E5"> vendors because</font><font color="#CCCCCC"> vendors who</font>

281
00:15:14,079 --> 00:15:19,299
<font color="#CCCCCC">have some really nice spine spine</font>

282
00:15:16,389 --> 00:15:21,669
devices<font color="#E5E5E5"> but say if you have to change</font><font color="#CCCCCC"> a</font>

283
00:15:19,299 --> 00:15:23,799
vendor for<font color="#CCCCCC"> the cost reasons you you</font>

284
00:15:21,669 --> 00:15:26,060
<font color="#E5E5E5">actually limit yourself by walking</font><font color="#CCCCCC"> into</font>

285
00:15:23,799 --> 00:15:29,329
a chassis boxes with

286
00:15:26,060 --> 00:15:32,209
<font color="#CCCCCC">large bore densities</font><font color="#E5E5E5"> so</font><font color="#CCCCCC"> one of reasons</font>

287
00:15:29,330 --> 00:15:35,180
<font color="#E5E5E5">was let's try to get to a simple boxes</font>

288
00:15:32,210 --> 00:15:38,120
with lower<font color="#CCCCCC"> pour densities</font><font color="#E5E5E5"> but just try</font>

289
00:15:35,180 --> 00:15:42,069
to scale the<font color="#E5E5E5"> spy the spine are not up</font>

290
00:15:38,120 --> 00:15:45,200
but horizontally<font color="#E5E5E5"> and lost the</font><font color="#CCCCCC"> M</font><font color="#E5E5E5"> lags</font>

291
00:15:42,070 --> 00:15:48,440
<font color="#CCCCCC">only Matassa</font><font color="#E5E5E5"> to two devices</font><font color="#CCCCCC"> two switches</font>

292
00:15:45,200 --> 00:15:51,710
in<font color="#E5E5E5"> the container so essentially the</font><font color="#CCCCCC"> same</font>

293
00:15:48,440 --> 00:15:56,500
problem<font color="#E5E5E5"> have to</font><font color="#CCCCCC"> grow capacity up and</font><font color="#E5E5E5"> can</font>

294
00:15:51,710 --> 00:15:59,380
scale horizontally<font color="#E5E5E5"> sober new design was</font>

295
00:15:56,500 --> 00:16:01,970
let's pick<font color="#E5E5E5"> up our cross topology and</font>

296
00:15:59,380 --> 00:16:04,820
create multiple<font color="#E5E5E5"> parallel cross</font>

297
00:16:01,970 --> 00:16:08,120
topologists instead so let's say on<font color="#E5E5E5"> this</font>

298
00:16:04,820 --> 00:16:10,730
diagram<font color="#CCCCCC"> you see</font><font color="#E5E5E5"> two</font><font color="#CCCCCC"> class apologies</font>

299
00:16:08,120 --> 00:16:13,430
<font color="#E5E5E5">green and red and every tour switched</font>

300
00:16:10,730 --> 00:16:17,630
over<font color="#CCCCCC"> for X which has an uplink</font><font color="#E5E5E5"> to every</font>

301
00:16:13,430 --> 00:16:22,069
class topology so right now<font color="#CCCCCC"> uww capacity</font>

302
00:16:17,630 --> 00:16:24,950
by having<font color="#E5E5E5"> to boil topologies so in other</font>

303
00:16:22,070 --> 00:16:27,950
<font color="#E5E5E5">words which is actually the same cost</font>

304
00:16:24,950 --> 00:16:30,080
apology<font color="#E5E5E5"> but now her in five stages so if</font>

305
00:16:27,950 --> 00:16:32,540
you count stages from from the tour to<font color="#CCCCCC"> a</font>

306
00:16:30,080 --> 00:16:34,820
spine and then down again you'll see

307
00:16:32,540 --> 00:16:38,180
whether actual five stages<font color="#E5E5E5"> the cross</font>

308
00:16:34,820 --> 00:16:41,330
from<font color="#E5E5E5"> toilet</font><font color="#CCCCCC"> for so bismuth apology</font>

309
00:16:38,180 --> 00:16:44,689
allows you to scale<font color="#E5E5E5"> horizontally by</font>

310
00:16:41,330 --> 00:16:48,470
adding more and<font color="#CCCCCC"> more</font><font color="#E5E5E5"> plural designs or</font>

311
00:16:44,690 --> 00:16:51,640
<font color="#E5E5E5">pair of apologies so you normally depend</font>

312
00:16:48,470 --> 00:16:55,220
on having high<font color="#CCCCCC"> pore densities in your</font>

313
00:16:51,640 --> 00:17:01,280
say spine switches to scale the capacity

314
00:16:55,220 --> 00:17:04,339
and the next problem was hitting our<font color="#E5E5E5"> BGP</font>

315
00:17:01,280 --> 00:17:07,129
design into this new topology<font color="#CCCCCC"> so since</font>

316
00:17:04,339 --> 00:17:10,310
our main intent was to get<font color="#E5E5E5"> rid</font><font color="#CCCCCC"> of well</font>

317
00:17:07,130 --> 00:17:13,400
<font color="#CCCCCC">two in the container</font><font color="#E5E5E5"> we went ahead and</font>

318
00:17:10,310 --> 00:17:15,859
pushed<font color="#CCCCCC"> BGP all the way down to the top</font>

319
00:17:13,400 --> 00:17:18,970
<font color="#CCCCCC">of rack switch so as you can see in this</font>

320
00:17:15,859 --> 00:17:23,569
topology<font color="#E5E5E5"> every top of</font><font color="#CCCCCC"> rack switch has a</font>

321
00:17:18,970 --> 00:17:25,490
separate<font color="#CCCCCC"> SN number so effectively every</font>

322
00:17:23,569 --> 00:17:29,090
<font color="#E5E5E5">top of rack is a small BGP</font>

323
00:17:25,490 --> 00:17:32,660
device in<font color="#CCCCCC"> sonia's so we allocate a</font>

324
00:17:29,090 --> 00:17:35,780
single as per our<font color="#E5E5E5"> role of</font><font color="#CCCCCC"> live devices</font>

325
00:17:32,660 --> 00:17:38,840
in<font color="#CCCCCC"> every container and the spine once</font>

326
00:17:35,780 --> 00:17:39,740
again<font color="#E5E5E5"> all parallel</font><font color="#CCCCCC"> spine</font><font color="#E5E5E5"> is open spines</font>

327
00:17:38,840 --> 00:17:43,820
missed apology

328
00:17:39,740 --> 00:17:47,960
Epis a mass<font color="#E5E5E5"> number so two biggest</font>

329
00:17:43,820 --> 00:17:50,720
benefits is<font color="#CCCCCC"> al3 down to</font><font color="#E5E5E5"> a tour and the</font>

330
00:17:47,960 --> 00:17:56,120
<font color="#E5E5E5">user</font><font color="#CCCCCC"> bgp the same protocol</font><font color="#E5E5E5"> was before</font>

331
00:17:50,720 --> 00:18:01,700
<font color="#E5E5E5">for</font><font color="#CCCCCC"> routing of course</font><font color="#E5E5E5"> our biggest win</font>

332
00:17:56,120 --> 00:18:03,590
was<font color="#E5E5E5"> we don't have any l2 issues</font><font color="#CCCCCC"> because</font>

333
00:18:01,700 --> 00:18:07,100
<font color="#CCCCCC">majority of our support and professional</font>

334
00:18:03,590 --> 00:18:08,899
<font color="#E5E5E5">issues have been tied to broadcast</font><font color="#CCCCCC"> from</font>

335
00:18:07,100 --> 00:18:12,020
so unique as each<font color="#CCCCCC"> bronica storms</font>

336
00:18:08,900 --> 00:18:14,990
anything which<font color="#CCCCCC"> is specifically for net</font>

337
00:18:12,020 --> 00:18:17,450
<font color="#E5E5E5">and now we can grow capacity</font>

338
00:18:14,990 --> 00:18:20,900
horizontally by simply adding more<font color="#E5E5E5"> and</font>

339
00:18:17,450 --> 00:18:24,590
more boxes<font color="#CCCCCC"> in the spine</font><font color="#E5E5E5"> or a leaf layer</font>

340
00:18:20,900 --> 00:18:27,080
can increase capacity<font color="#CCCCCC"> I mean how come</font>

341
00:18:24,590 --> 00:18:29,659
<font color="#E5E5E5">out how much you want of course was a</font>

342
00:18:27,080 --> 00:18:31,790
downside<font color="#CCCCCC"> because</font><font color="#E5E5E5"> by adding more switches</font>

343
00:18:29,660 --> 00:18:34,760
you also increase bullying identity and

344
00:18:31,790 --> 00:18:37,580
so this<font color="#E5E5E5"> problem</font><font color="#CCCCCC"> main challenge trying to</font>

345
00:18:34,760 --> 00:18:41,420
manage read many<font color="#E5E5E5"> links in missed apology</font>

346
00:18:37,580 --> 00:18:42,889
especially handling the link errors but

347
00:18:41,420 --> 00:18:46,940
<font color="#E5E5E5">we do still</font><font color="#CCCCCC"> have same protocol</font>

348
00:18:42,890 --> 00:18:48,920
everywhere<font color="#E5E5E5"> it's still BGP and there is</font>

349
00:18:46,940 --> 00:18:52,700
no requirements to<font color="#E5E5E5"> do any</font><font color="#CCCCCC"> distribution</font>

350
00:18:48,920 --> 00:18:53,330
or interworking just single protocol

351
00:18:52,700 --> 00:18:57,679
<font color="#E5E5E5">everywhere</font>

352
00:18:53,330 --> 00:18:59,990
and lastly<font color="#E5E5E5"> BGP has some some nice</font>

353
00:18:57,679 --> 00:19:02,900
properties specifically the<font color="#E5E5E5"> SPF</font>

354
00:18:59,990 --> 00:19:06,200
attribute allows<font color="#E5E5E5"> you to see the exact</font>

355
00:19:02,900 --> 00:19:09,290
path<font color="#E5E5E5"> you predict stupid apology and this</font>

356
00:19:06,200 --> 00:19:11,450
also helps<font color="#CCCCCC"> in</font><font color="#E5E5E5"> a troubleshooting</font><font color="#CCCCCC"> because</font>

357
00:19:09,290 --> 00:19:14,090
you can<font color="#E5E5E5"> no hate this previous game from</font>

358
00:19:11,450 --> 00:19:20,270
<font color="#E5E5E5">a</font><font color="#CCCCCC"> tour</font><font color="#E5E5E5"> switch</font><font color="#CCCCCC"> embed</font><font color="#E5E5E5"> container in the</font>

359
00:19:14,090 --> 00:19:24,110
container<font color="#CCCCCC"> so I we don't</font><font color="#E5E5E5"> have time to go</font>

360
00:19:20,270 --> 00:19:25,670
over<font color="#CCCCCC"> all specifics of this design</font><font color="#E5E5E5"> with</font>

361
00:19:24,110 --> 00:19:29,479
<font color="#E5E5E5">all the tips and tricks here and there</font>

362
00:19:25,670 --> 00:19:32,809
<font color="#E5E5E5">to optimize BGP and this design so</font><font color="#CCCCCC"> we</font>

363
00:19:29,480 --> 00:19:38,050
only cover a few most important issues

364
00:19:32,809 --> 00:19:40,879
<font color="#E5E5E5">we found in this design so</font><font color="#CCCCCC"> first of all</font>

365
00:19:38,050 --> 00:19:41,389
we need to<font color="#CCCCCC"> support a feature known</font><font color="#E5E5E5"> as a</font>

366
00:19:40,880 --> 00:19:45,370
BGP

367
00:19:41,390 --> 00:19:47,450
<font color="#CCCCCC">most parallax it's not very widely used</font>

368
00:19:45,370 --> 00:19:48,489
<font color="#E5E5E5">stuck it on mobile</font><font color="#CCCCCC"> based</font><font color="#E5E5E5"> some people</font>

369
00:19:47,450 --> 00:19:51,060
don't

370
00:19:48,490 --> 00:19:53,890
the requirement for<font color="#E5E5E5"> this feature is</font>

371
00:19:51,060 --> 00:19:56,830
specifically to allow equal<font color="#E5E5E5"> cost multi</font>

372
00:19:53,890 --> 00:20:00,340
path<font color="#E5E5E5"> across paths which have</font><font color="#CCCCCC"> different</font>

373
00:19:56,830 --> 00:20:01,060
and<font color="#CCCCCC"> spiff attribute contents the same as</font>

374
00:20:00,340 --> 00:20:03,610
the<font color="#CCCCCC"> flamp</font>

375
00:20:01,060 --> 00:20:06,179
<font color="#E5E5E5">but different contents normally BGP</font>

376
00:20:03,610 --> 00:20:09,370
doesn't do Lord surely<font color="#CCCCCC"> cross these</font><font color="#E5E5E5"> bands</font>

377
00:20:06,180 --> 00:20:13,300
but we need ways to<font color="#CCCCCC"> implement</font><font color="#E5E5E5"> our load</font>

378
00:20:09,370 --> 00:20:14,919
balancing<font color="#CCCCCC"> over any case prefixes so this</font>

379
00:20:13,300 --> 00:20:16,690
was<font color="#CCCCCC"> the</font><font color="#E5E5E5"> first requirement to vendors and</font>

380
00:20:14,920 --> 00:20:20,410
not all<font color="#E5E5E5"> vendor support this</font>

381
00:20:16,690 --> 00:20:24,190
functionality<font color="#E5E5E5"> but</font><font color="#CCCCCC"> I guess right</font><font color="#E5E5E5"> now most</font>

382
00:20:20,410 --> 00:20:27,760
of them<font color="#E5E5E5"> actually do secondly we had to</font>

383
00:20:24,190 --> 00:20:31,690
use<font color="#E5E5E5"> 16-bit essence and we had to rely</font><font color="#CCCCCC"> on</font>

384
00:20:27,760 --> 00:20:33,129
the<font color="#E5E5E5"> private</font><font color="#CCCCCC"> test numbers remain use the</font>

385
00:20:31,690 --> 00:20:37,540
main requirement for<font color="#CCCCCC"> private establish</font>

386
00:20:33,130 --> 00:20:39,730
<font color="#E5E5E5">is that we can use that for</font><font color="#CCCCCC"> a simplified</font>

387
00:20:37,540 --> 00:20:42,250
filtering at the edge<font color="#E5E5E5"> and we can use be</font>

388
00:20:39,730 --> 00:20:45,640
removed<font color="#CCCCCC"> by retains feature on the data</font>

389
00:20:42,250 --> 00:20:48,250
center edge to easily strip all the

390
00:20:45,640 --> 00:20:50,140
information<font color="#CCCCCC"> about data center routes</font><font color="#E5E5E5"> so</font>

391
00:20:48,250 --> 00:20:53,950
in other<font color="#E5E5E5"> words this helps to implement</font>

392
00:20:50,140 --> 00:20:58,000
any<font color="#CCCCCC"> chosen</font><font color="#E5E5E5"> policies but the downside we</font>

393
00:20:53,950 --> 00:21:00,750
only have 1000<font color="#E5E5E5"> private s numbers and the</font>

394
00:20:58,000 --> 00:21:06,430
number of<font color="#CCCCCC"> tours which is often exceeds</font>

395
00:21:00,750 --> 00:21:10,660
<font color="#E5E5E5">1000 I mean maybe</font><font color="#CCCCCC"> 2 or 3 folds so the</font>

396
00:21:06,430 --> 00:21:13,770
question was how<font color="#CCCCCC"> can</font><font color="#E5E5E5"> we handle how can</font>

397
00:21:10,660 --> 00:21:18,610
we use<font color="#CCCCCC"> parrot s numbers in this topology</font>

398
00:21:13,770 --> 00:21:21,280
<font color="#CCCCCC">without I mean without getting</font><font color="#E5E5E5"> to any</font>

399
00:21:18,610 --> 00:21:23,229
black<font color="#CCCCCC"> hole</font><font color="#E5E5E5"> routing issues so the</font>

400
00:21:21,280 --> 00:21:26,230
solution was an hour<font color="#E5E5E5"> pretty old and well</font>

401
00:21:23,230 --> 00:21:29,740
<font color="#CCCCCC">well-known functionality known</font><font color="#E5E5E5"> as allow</font>

402
00:21:26,230 --> 00:21:35,020
<font color="#CCCCCC">s in which permits a BGP speaker</font><font color="#E5E5E5"> to</font>

403
00:21:29,740 --> 00:21:37,300
accept his own s number<font color="#CCCCCC"> gain so we apply</font>

404
00:21:35,020 --> 00:21:41,020
this<font color="#E5E5E5"> feature on</font><font color="#CCCCCC"> our tour switches on the</font>

405
00:21:37,300 --> 00:21:45,460
<font color="#E5E5E5">uplink sessions to beliefs</font><font color="#CCCCCC"> and we'll use</font>

406
00:21:41,020 --> 00:21:48,520
<font color="#E5E5E5">the same BGP s numbers beside the</font>

407
00:21:45,460 --> 00:21:50,980
containers so essentially let's say in

408
00:21:48,520 --> 00:21:53,320
every<font color="#E5E5E5"> container with s</font><font color="#CCCCCC"> numbers 1 2 3 4 &</font>

409
00:21:50,980 --> 00:21:57,370
1<font color="#CCCCCC"> 2 3</font><font color="#E5E5E5"> 4 again and so on so forth</font>

410
00:21:53,320 --> 00:22:00,460
something like that once again<font color="#CCCCCC"> this</font>

411
00:21:57,370 --> 00:22:01,989
functionality is<font color="#E5E5E5"> not very as the</font><font color="#CCCCCC"> Uniform</font>

412
00:22:00,460 --> 00:22:04,450
supported by all

413
00:22:01,990 --> 00:22:07,960
let's say<font color="#CCCCCC"> Cisco has been changing</font><font color="#E5E5E5"> this a</font>

414
00:22:04,450 --> 00:22:10,150
few times<font color="#CCCCCC"> so first it wasn't there</font><font color="#E5E5E5"> when</font>

415
00:22:07,960 --> 00:22:14,200
<font color="#E5E5E5">it wasn't again it's different from</font>

416
00:22:10,150 --> 00:22:16,000
<font color="#E5E5E5">nx-os to Cisco IOS and iOS XR but we</font>

417
00:22:14,200 --> 00:22:20,860
managed to get most<font color="#CCCCCC"> vendors to support</font>

418
00:22:16,000 --> 00:22:22,180
this functionality proper properly so

419
00:22:20,860 --> 00:22:25,929
basically<font color="#E5E5E5"> we</font><font color="#CCCCCC"> sneaked a short message</font><font color="#E5E5E5"> to</font>

420
00:22:22,180 --> 00:22:28,150
<font color="#E5E5E5">our vendors if I was listening</font><font color="#CCCCCC"> we only</font>

421
00:22:25,930 --> 00:22:30,820
require a few<font color="#CCCCCC"> very simple features to</font>

422
00:22:28,150 --> 00:22:31,540
make<font color="#E5E5E5"> the design works and most people</font>

423
00:22:30,820 --> 00:22:34,210
<font color="#E5E5E5">have</font><font color="#CCCCCC"> Bose</font>

424
00:22:31,540 --> 00:22:36,670
some people don't<font color="#E5E5E5"> have</font><font color="#CCCCCC"> them implanted</font>

425
00:22:34,210 --> 00:22:38,470
properly<font color="#E5E5E5"> but it's a bit it's</font><font color="#CCCCCC"> a pretty</font>

426
00:22:36,670 --> 00:22:41,500
hard to<font color="#CCCCCC"> implement this functionality in</font>

427
00:22:38,470 --> 00:22:47,200
<font color="#CCCCCC">bgp it's all those are</font><font color="#E5E5E5"> over simple</font>

428
00:22:41,500 --> 00:22:50,410
features to support<font color="#CCCCCC"> we only have a few</font>

429
00:22:47,200 --> 00:22:52,660
<font color="#CCCCCC">minutes left but let</font><font color="#E5E5E5"> me point out about</font>

430
00:22:50,410 --> 00:22:56,410
<font color="#CCCCCC">a few very specific</font><font color="#E5E5E5"> design features</font>

431
00:22:52,660 --> 00:22:58,810
<font color="#CCCCCC">which we run into so first of all you</font>

432
00:22:56,410 --> 00:23:01,090
cannot do summarization in this design

433
00:22:58,810 --> 00:23:05,440
<font color="#E5E5E5">in other words you cannot summarize</font>

434
00:23:01,090 --> 00:23:08,169
server subnets<font color="#CCCCCC"> the reason is if you</font><font color="#E5E5E5"> do</font>

435
00:23:05,440 --> 00:23:11,020
this you<font color="#CCCCCC"> can easily run into black hole</font>

436
00:23:08,170 --> 00:23:13,450
scenarios let's take out the first

437
00:23:11,020 --> 00:23:16,540
<font color="#E5E5E5">specific</font><font color="#CCCCCC"> summarization</font><font color="#E5E5E5"> case default</font>

438
00:23:13,450 --> 00:23:18,910
routing<font color="#E5E5E5"> let's say your leaf switches on</font>

439
00:23:16,540 --> 00:23:22,510
the<font color="#CCCCCC"> same</font><font color="#E5E5E5"> default route to beat or</font>

440
00:23:18,910 --> 00:23:25,480
switches so in our case a<font color="#CCCCCC"> and B send</font>

441
00:23:22,510 --> 00:23:27,850
default only<font color="#E5E5E5"> to return switches to</font>

442
00:23:25,480 --> 00:23:30,580
improve<font color="#E5E5E5"> scalability and reduce table</font>

443
00:23:27,850 --> 00:23:35,500
sizes<font color="#E5E5E5"> what's going to happen if a link</font>

444
00:23:30,580 --> 00:23:37,689
from A to Z fails<font color="#E5E5E5"> the switch now</font><font color="#CCCCCC"> to</font>

445
00:23:35,500 --> 00:23:40,240
switch<font color="#CCCCCC"> C will not</font><font color="#E5E5E5"> know about</font><font color="#CCCCCC"> that and</font>

446
00:23:37,690 --> 00:23:42,550
<font color="#E5E5E5">keep saying traffic to both and belief</font>

447
00:23:40,240 --> 00:23:45,340
switches<font color="#E5E5E5"> and this will create black hole</font>

448
00:23:42,550 --> 00:23:48,100
for traffic going<font color="#E5E5E5"> from switch C to</font>

449
00:23:45,340 --> 00:23:52,209
switch D so the only way<font color="#E5E5E5"> to avoid this</font>

450
00:23:48,100 --> 00:23:54,879
is by not using<font color="#E5E5E5"> c4</font><font color="#CCCCCC"> by not using</font>

451
00:23:52,210 --> 00:23:58,120
summarization from upper layers to

452
00:23:54,880 --> 00:24:00,850
bottom layers and the same problem

453
00:23:58,120 --> 00:24:04,000
applies when try to summarize server

454
00:24:00,850 --> 00:24:07,270
subnets let's say you pick<font color="#E5E5E5"> up leaf</font>

455
00:24:04,000 --> 00:24:10,150
switches<font color="#E5E5E5"> a and B and summarize the</font>

456
00:24:07,270 --> 00:24:12,220
subnets<font color="#E5E5E5"> on C and D into</font><font color="#CCCCCC"> one range</font><font color="#E5E5E5"> and</font>

457
00:24:10,150 --> 00:24:13,350
once the game<font color="#CCCCCC"> is gets a black hole</font>

458
00:24:12,220 --> 00:24:16,710
scenario

459
00:24:13,350 --> 00:24:19,080
were<font color="#CCCCCC"> switch</font><font color="#E5E5E5"> be Mabel's connection to</font>

460
00:24:16,710 --> 00:24:22,500
switch see but<font color="#E5E5E5"> still</font><font color="#CCCCCC"> advertise the</font>

461
00:24:19,080 --> 00:24:24,899
summer<font color="#E5E5E5"> range in traditional designs</font>

462
00:24:22,500 --> 00:24:27,150
<font color="#CCCCCC">people solve is by creating</font><font color="#E5E5E5"> with Peter</font>

463
00:24:24,900 --> 00:24:30,210
links between the leaf switches for

464
00:24:27,150 --> 00:24:33,030
example the<font color="#E5E5E5"> problem here is that the</font>

465
00:24:30,210 --> 00:24:35,400
<font color="#E5E5E5">number of</font><font color="#CCCCCC"> leaf switches</font><font color="#E5E5E5"> is growing when</font>

466
00:24:33,030 --> 00:24:38,250
you have two device you find that when

467
00:24:35,400 --> 00:24:41,039
<font color="#E5E5E5">you</font><font color="#CCCCCC"> have</font><font color="#E5E5E5"> four devices you have</font><font color="#CCCCCC"> to use</font>

468
00:24:38,250 --> 00:24:43,350
more links to<font color="#CCCCCC"> create full</font><font color="#E5E5E5"> pure mesh will</font>

469
00:24:41,039 --> 00:24:47,789
have<font color="#E5E5E5"> 16 devices it's almost impossible</font>

470
00:24:43,350 --> 00:24:50,969
to<font color="#CCCCCC"> create this</font><font color="#E5E5E5"> pure mesh because all</font>

471
00:24:47,789 --> 00:24:54,870
<font color="#CCCCCC">devices to support a big apology in case</font>

472
00:24:50,970 --> 00:24:59,130
of failure<font color="#E5E5E5"> so this might be</font><font color="#CCCCCC"> a skill</font>

473
00:24:54,870 --> 00:25:02,149
<font color="#E5E5E5">limitation but in our case the switches</font>

474
00:24:59,130 --> 00:25:05,640
we use and the skillet<font color="#CCCCCC"> praedyth is a</font>

475
00:25:02,150 --> 00:25:11,400
pretty consistent<font color="#E5E5E5"> and the only use</font><font color="#CCCCCC"> may</font>

476
00:25:05,640 --> 00:25:13,799
<font color="#CCCCCC">be about 40% 50% of full Phebe size in</font>

477
00:25:11,400 --> 00:25:17,940
every switch in the network<font color="#E5E5E5"> so we found</font>

478
00:25:13,799 --> 00:25:19,559
out we<font color="#CCCCCC"> don't need to summarize</font><font color="#E5E5E5"> and if we</font>

479
00:25:17,940 --> 00:25:22,169
need to<font color="#E5E5E5"> work in</font><font color="#CCCCCC"> only somewhere as a</font>

480
00:25:19,559 --> 00:25:28,820
point point things which hasn't<font color="#E5E5E5"> got any</font>

481
00:25:22,169 --> 00:25:31,980
<font color="#CCCCCC">issues alright so the quick summary</font>

482
00:25:28,820 --> 00:25:33,990
<font color="#E5E5E5">traditional perception of bgp was a</font><font color="#CCCCCC"> bgp</font>

483
00:25:31,980 --> 00:25:38,250
only suitable<font color="#CCCCCC"> for large-scale</font>

484
00:25:33,990 --> 00:25:40,830
deployments and<font color="#E5E5E5"> it went</font><font color="#CCCCCC"> bouncing but</font>

485
00:25:38,250 --> 00:25:43,740
what he found<font color="#E5E5E5"> out in that aside</font><font color="#CCCCCC"> that it</font>

486
00:25:40,830 --> 00:25:48,418
works perfectly as an IG<font color="#CCCCCC"> be a single</font>

487
00:25:43,740 --> 00:25:49,230
protocol for our<font color="#CCCCCC"> routing problems</font><font color="#E5E5E5"> so BGP</font>

488
00:25:48,419 --> 00:25:52,260
is simple enough

489
00:25:49,230 --> 00:25:55,590
it supports<font color="#CCCCCC"> per hub for hope traffic</font>

490
00:25:52,260 --> 00:25:58,049
<font color="#E5E5E5">engineering and it's been implemented</font>

491
00:25:55,590 --> 00:26:01,620
<font color="#E5E5E5">and supported by basically all vendors</font>

492
00:25:58,049 --> 00:26:03,330
we know and so this all together<font color="#E5E5E5"> made</font>

493
00:26:01,620 --> 00:26:06,000
<font color="#E5E5E5">this particle probably the best choice</font>

494
00:26:03,330 --> 00:26:08,520
<font color="#CCCCCC">for us do</font><font color="#E5E5E5"> this while using in our data</font>

495
00:26:06,000 --> 00:26:11,179
centers thank<font color="#E5E5E5"> you</font>

496
00:26:08,520 --> 00:26:11,179
any<font color="#E5E5E5"> questions</font>

497
00:26:14,450 --> 00:26:17,450
<font color="#E5E5E5">Thanks</font>

498
00:26:24,160 --> 00:26:29,020
<font color="#E5E5E5">okay so we are over a little bit of time</font>

499
00:26:26,980 --> 00:26:31,870
on break<font color="#CCCCCC"> we're gonna try</font><font color="#E5E5E5"> to come back on</font>

500
00:26:29,020 --> 00:26:33,520
time though<font color="#CCCCCC"> real</font><font color="#E5E5E5"> quick we do have a</font>

501
00:26:31,870 --> 00:26:39,729
survey<font color="#CCCCCC"> winner from</font><font color="#E5E5E5"> the surveys yesterday</font>

502
00:26:33,520 --> 00:26:43,650
is<font color="#E5E5E5"> Hans</font><font color="#CCCCCC"> Otto being in the room go to</font><font color="#E5E5E5"> the</font>

503
00:26:39,730 --> 00:26:45,940
<font color="#CCCCCC">back table</font><font color="#E5E5E5"> to collect an iPod</font><font color="#CCCCCC"> Touch</font><font color="#E5E5E5"> and</font>

504
00:26:43,650 --> 00:26:48,040
for the rest<font color="#E5E5E5"> of the giveaways for</font><font color="#CCCCCC"> the</font>

505
00:26:45,940 --> 00:26:52,620
rest of<font color="#E5E5E5"> the week we</font><font color="#CCCCCC"> have another</font><font color="#E5E5E5"> ipod</font>

506
00:26:48,040 --> 00:26:52,620
<font color="#E5E5E5">touch and a pair of noise cancelling</font>

