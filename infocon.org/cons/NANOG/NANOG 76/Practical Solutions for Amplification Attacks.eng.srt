1
00:00:13,139 --> 00:00:21,119
okay guess I'll give a minute for people

2
00:00:18,850 --> 00:00:21,119
to move

3
00:00:23,560 --> 00:00:29,189
okay you know that much time so I'll

4
00:00:26,620 --> 00:00:32,529
jump into a quick hundred introduction

5
00:00:29,190 --> 00:00:35,380
I'm Damian mnsure I'm working at Google

6
00:00:32,529 --> 00:00:38,050
I am NOT a network engineer I actually

7
00:00:35,380 --> 00:00:41,410
but I do focus on networks related

8
00:00:38,050 --> 00:00:44,410
security issues so you know when Google

9
00:00:41,410 --> 00:00:46,330
goes down like yeah everyone panics I

10
00:00:44,410 --> 00:00:48,480
panic if especially if it's related to a

11
00:00:46,330 --> 00:00:51,820
network security issue like a DOS attack

12
00:00:48,480 --> 00:00:53,470
because I focus on DOS I write horrible

13
00:00:51,820 --> 00:00:56,610
evil pages like this that serve you

14
00:00:53,470 --> 00:00:59,739
CAPTCHAs I'm sorry I know you hate me

15
00:00:56,610 --> 00:01:02,440
before Google I was doing particle

16
00:00:59,739 --> 00:01:03,580
physics so I'm really not a network

17
00:01:02,440 --> 00:01:05,230
engineer but I do have a bit of a

18
00:01:03,580 --> 00:01:09,460
scientific background hopefully I can

19
00:01:05,230 --> 00:01:12,070
give you some interesting commentary so

20
00:01:09,460 --> 00:01:16,089
today's talk I'm going to be covering

21
00:01:12,070 --> 00:01:17,860
dos attacks in general and going over

22
00:01:16,090 --> 00:01:21,400
sort of some general classifications of

23
00:01:17,860 --> 00:01:22,810
attacks I'm going to survey some prior

24
00:01:21,400 --> 00:01:25,690
approaches to this problem of dos

25
00:01:22,810 --> 00:01:28,119
attacks and why they failed and then I'm

26
00:01:25,690 --> 00:01:30,100
gonna wrap up with a solution to the

27
00:01:28,119 --> 00:01:31,750
problem an actual practical solution

28
00:01:30,100 --> 00:01:33,759
that we can implement and discuss ways

29
00:01:31,750 --> 00:01:36,750
to remediate attacks even if there are

30
00:01:33,759 --> 00:01:39,009
sort of uncooperative sources of abuse

31
00:01:36,750 --> 00:01:41,439
just you know to give an example this

32
00:01:39,009 --> 00:01:42,909
graph shows a legitimate traffic to one

33
00:01:41,439 --> 00:01:44,439
of our services in green the red is

34
00:01:42,909 --> 00:01:46,479
attack traffic so that gives you a sense

35
00:01:44,439 --> 00:01:51,689
of scale of what these things can look

36
00:01:46,479 --> 00:01:53,350
like okay so let's get started

37
00:01:51,689 --> 00:01:55,538
obviously there's a lot of news

38
00:01:53,350 --> 00:01:57,460
headlines big high bandwidth attacks or

39
00:01:55,539 --> 00:01:59,020
always out there always seem to be

40
00:01:57,460 --> 00:02:00,429
increasing obviously they're not going

41
00:01:59,020 --> 00:02:03,850
to decrease no but nobody's going to

42
00:02:00,430 --> 00:02:05,170
report on that but you know when you

43
00:02:03,850 --> 00:02:07,089
sort of look at this you you have to

44
00:02:05,170 --> 00:02:09,460
think like there are turbit scale

45
00:02:07,090 --> 00:02:12,190
attacks out there do the criminals have

46
00:02:09,460 --> 00:02:13,810
access to Turbots kill networks probably

47
00:02:12,190 --> 00:02:15,550
not right they're doing something else

48
00:02:13,810 --> 00:02:16,780
and so you need to think a little bit

49
00:02:15,550 --> 00:02:21,160
about how these attacks are being

50
00:02:16,780 --> 00:02:23,950
generated turns out it doesn't require a

51
00:02:21,160 --> 00:02:25,810
lot of skill you you can find services

52
00:02:23,950 --> 00:02:29,079
out there called booters or stressors

53
00:02:25,810 --> 00:02:31,030
you pay them a small you know monthly

54
00:02:29,080 --> 00:02:34,450
fee and they give you access to a large

55
00:02:31,030 --> 00:02:35,569
variety of attack styles right so this

56
00:02:34,450 --> 00:02:37,219
is sort of

57
00:02:35,569 --> 00:02:39,170
how these attacks are generally

58
00:02:37,219 --> 00:02:40,608
happening obviously there are more

59
00:02:39,170 --> 00:02:42,649
advanced things out there that you know

60
00:02:40,609 --> 00:02:44,359
that this is the bottom tier of their

61
00:02:42,650 --> 00:02:48,799
pricing structure I didn't bother who's

62
00:02:44,359 --> 00:02:49,579
showing the top tiers for VIPs but you

63
00:02:48,799 --> 00:02:52,220
know how are they doing this

64
00:02:49,579 --> 00:02:53,780
obviously there's you know if they want

65
00:02:52,220 --> 00:02:56,470
to if you want to disrupt a target

66
00:02:53,780 --> 00:02:58,849
that's larger than yourself you need to

67
00:02:56,470 --> 00:03:00,379
bypass this resource constraint somehow

68
00:02:58,849 --> 00:03:02,000
right you you have a limited amount of

69
00:03:00,379 --> 00:03:03,798
bandwidth available to you maybe maybe

70
00:03:02,000 --> 00:03:06,319
you have a server in a data center with

71
00:03:03,799 --> 00:03:09,470
a gig uplink but you want to generate

72
00:03:06,319 --> 00:03:10,578
much more than a gig right so somehow

73
00:03:09,470 --> 00:03:13,220
you have to figure out how to use other

74
00:03:10,579 --> 00:03:14,359
people's resources know one way to an

75
00:03:13,220 --> 00:03:16,579
obvious way to do this is through a

76
00:03:14,359 --> 00:03:19,549
botnet right you compromised a lot of

77
00:03:16,579 --> 00:03:21,200
machines and that gives you a lot of

78
00:03:19,549 --> 00:03:23,689
resources right all the resources of

79
00:03:21,200 --> 00:03:25,730
those machines but this is kind of

80
00:03:23,689 --> 00:03:27,980
difficult to do right when you think

81
00:03:25,730 --> 00:03:29,209
about it you have to have some skill in

82
00:03:27,980 --> 00:03:31,030
order to figure out how to compromise

83
00:03:29,209 --> 00:03:33,260
all of these machines you need a

84
00:03:31,030 --> 00:03:34,849
vulnerability in them or you know you

85
00:03:33,260 --> 00:03:37,280
need to be able to guess that the

86
00:03:34,849 --> 00:03:40,608
default root password is root like that

87
00:03:37,280 --> 00:03:42,019
takes some skill but also when you

88
00:03:40,609 --> 00:03:43,609
consider the amount of skill that's

89
00:03:42,019 --> 00:03:46,430
required there there's resource

90
00:03:43,609 --> 00:03:47,870
contention right typically if you

91
00:03:46,430 --> 00:03:50,239
compromise a machine you don't want to

92
00:03:47,870 --> 00:03:51,680
be sharing that with another kid who's

93
00:03:50,239 --> 00:03:53,750
also compromised that machine right you

94
00:03:51,680 --> 00:03:56,150
want that whole to yourself and so

95
00:03:53,750 --> 00:03:59,030
there's a bit of contention over this

96
00:03:56,150 --> 00:04:00,799
pool of vulnerable devices we saw this

97
00:03:59,030 --> 00:04:03,349
particularly with Mirai

98
00:04:00,799 --> 00:04:06,379
so some of you may remember it was late

99
00:04:03,349 --> 00:04:08,418
2016 where I was this really big threat

100
00:04:06,379 --> 00:04:11,478
right it caused fairly large stas

101
00:04:08,419 --> 00:04:15,530
attacks like 623 gig I think was the

102
00:04:11,479 --> 00:04:17,180
peak reported that that was pretty scary

103
00:04:15,530 --> 00:04:19,940
but then they published a source code

104
00:04:17,180 --> 00:04:21,889
right and what happens immediately after

105
00:04:19,940 --> 00:04:24,740
that well now there are 20 Mirai botnets

106
00:04:21,889 --> 00:04:26,300
and it turns out that's not worse right

107
00:04:24,740 --> 00:04:27,740
that's actually a really big benefit to

108
00:04:26,300 --> 00:04:29,780
everyone because if there are 20 Mirai

109
00:04:27,740 --> 00:04:32,180
button that's each one only gets like 5%

110
00:04:29,780 --> 00:04:33,469
of the bots and therefore now you have a

111
00:04:32,180 --> 00:04:36,889
lot of little attacks that you can just

112
00:04:33,470 --> 00:04:38,599
absorb so and the other interesting

113
00:04:36,889 --> 00:04:40,400
thing about botnets is victims are

114
00:04:38,599 --> 00:04:42,440
incentivized to patch right if if your

115
00:04:40,400 --> 00:04:44,090
bandwidth is totally toast because of

116
00:04:42,440 --> 00:04:47,750
being infected you're going to want to

117
00:04:44,090 --> 00:04:48,349
fix that so I don't worry too much about

118
00:04:47,750 --> 00:04:49,370
botnets

119
00:04:48,349 --> 00:04:52,219
because it's sort of a

120
00:04:49,370 --> 00:04:55,880
regulating problem but there are sort of

121
00:04:52,220 --> 00:04:58,880
other methods out there so something to

122
00:04:55,880 --> 00:05:01,430
consider is with like for example DNS if

123
00:04:58,880 --> 00:05:03,650
you make this very brief query for

124
00:05:01,430 --> 00:05:06,820
cpsc.gov and you ask it for everything

125
00:05:03,650 --> 00:05:09,859
it gives you this massive response right

126
00:05:06,820 --> 00:05:13,790
now is that a problem well think about

127
00:05:09,860 --> 00:05:16,610
this it occurs over UDP right so imagine

128
00:05:13,790 --> 00:05:18,919
you're this evil cat a cat Pixar a

129
00:05:16,610 --> 00:05:22,130
necessity at nano great on the Internet

130
00:05:18,919 --> 00:05:23,690
so imagine you're an evil cat and you

131
00:05:22,130 --> 00:05:26,180
want to attack somebody well you can

132
00:05:23,690 --> 00:05:30,110
make a request with a source IP of your

133
00:05:26,180 --> 00:05:32,180
victim to a DNS server out there or any

134
00:05:30,110 --> 00:05:35,180
other type of UDP service that will give

135
00:05:32,180 --> 00:05:37,400
a larger response right and because you

136
00:05:35,180 --> 00:05:39,440
gave the source IP of your packet as the

137
00:05:37,400 --> 00:05:42,320
victim that large response will go to

138
00:05:39,440 --> 00:05:45,410
your port victim right and that victim

139
00:05:42,320 --> 00:05:47,840
is pretty much toast to give you an

140
00:05:45,410 --> 00:05:50,870
example the the size that you can

141
00:05:47,840 --> 00:05:52,580
increase the bandwidth is a factor of a

142
00:05:50,870 --> 00:05:55,010
hundred times maybe even a thousand

143
00:05:52,580 --> 00:05:57,650
times there are some protocols where you

144
00:05:55,010 --> 00:05:59,900
can get even more right so that means

145
00:05:57,650 --> 00:06:01,520
that this attacker who has a one gig

146
00:05:59,900 --> 00:06:03,138
uplink from their server hosted

147
00:06:01,520 --> 00:06:05,510
somewhere can actually generate a

148
00:06:03,139 --> 00:06:08,720
terabyte scale attack from their single

149
00:06:05,510 --> 00:06:10,729
machine how do you know if you're

150
00:06:08,720 --> 00:06:11,990
getting hit by one of these well it

151
00:06:10,729 --> 00:06:16,539
turns out that you know here's an

152
00:06:11,990 --> 00:06:18,470
example of an attack that we saw in 2017

153
00:06:16,539 --> 00:06:20,719
when you're receiving one of these

154
00:06:18,470 --> 00:06:23,660
because you're receiving the responses

155
00:06:20,720 --> 00:06:26,270
from these servers you see this source

156
00:06:23,660 --> 00:06:28,190
port is that servers the port that

157
00:06:26,270 --> 00:06:30,830
server was listening on so in this case

158
00:06:28,190 --> 00:06:33,020
you can look at this attack and you see

159
00:06:30,830 --> 00:06:35,389
that very frequently the source port was

160
00:06:33,020 --> 00:06:38,060
53 this was a DNS amplification attack

161
00:06:35,389 --> 00:06:40,520
coming to us you'll also see if you're

162
00:06:38,060 --> 00:06:42,889
using that flow a lot of source port 0

163
00:06:40,520 --> 00:06:44,180
those are packet fragments so obviously

164
00:06:42,889 --> 00:06:47,500
the fragment doesn't contain a port

165
00:06:44,180 --> 00:06:49,849
number right and that gets reported as 0

166
00:06:47,500 --> 00:06:51,440
as I sort of alluded to earlier I don't

167
00:06:49,849 --> 00:06:53,620
want to imply that DNS is the only

168
00:06:51,440 --> 00:06:56,510
problematic protocol there are several

169
00:06:53,620 --> 00:06:58,370
here's this is on a log scale but an

170
00:06:56,510 --> 00:07:01,750
example of a day of attacks that we saw

171
00:06:58,370 --> 00:07:04,060
to multiple victims so

172
00:07:01,750 --> 00:07:07,720
you know the the one that's standing out

173
00:07:04,060 --> 00:07:12,090
here port 1 1 2 1 1 is memcache D but

174
00:07:07,720 --> 00:07:15,010
you can also see here NTP C LDAP NTP I

175
00:07:12,090 --> 00:07:19,840
don't know why I said n to be twice s

176
00:07:15,010 --> 00:07:21,849
SDP and fascinating.i there was an

177
00:07:19,840 --> 00:07:27,849
attack I'd never noticed before a quote

178
00:07:21,850 --> 00:07:30,310
of the day if anyone remembers that so

179
00:07:27,850 --> 00:07:32,050
how do we defend against these well you

180
00:07:30,310 --> 00:07:34,360
know obviously you have to be able to

181
00:07:32,050 --> 00:07:37,360
absorb the traffic somehow right so fat

182
00:07:34,360 --> 00:07:38,710
pipes and it helps to have global

183
00:07:37,360 --> 00:07:43,210
peering you don't want it to be able to

184
00:07:38,710 --> 00:07:45,280
aggregate in any single location and you

185
00:07:43,210 --> 00:07:46,719
can use Ackles to sort of rate limit how

186
00:07:45,280 --> 00:07:48,429
much traffic you're letting into your

187
00:07:46,720 --> 00:07:50,170
your network obviously you don't want to

188
00:07:48,430 --> 00:07:51,960
completely block the idea of the ACK

189
00:07:50,170 --> 00:07:53,800
hole is you want something that's

190
00:07:51,960 --> 00:07:55,510
throttling at a level that you can

191
00:07:53,800 --> 00:07:58,150
manage and the higher you set that the

192
00:07:55,510 --> 00:07:58,990
safer you're gonna be right or safer in

193
00:07:58,150 --> 00:08:00,429
the sense that you're not going to

194
00:07:58,990 --> 00:08:03,850
affect legitimate traffic unless you

195
00:08:00,430 --> 00:08:06,180
absolutely have to these axles can be

196
00:08:03,850 --> 00:08:09,010
directional so they only need to filter

197
00:08:06,180 --> 00:08:11,620
stuff coming into your network from one

198
00:08:09,010 --> 00:08:14,500
of these source ports that can be used

199
00:08:11,620 --> 00:08:15,700
for amplification and you can also write

200
00:08:14,500 --> 00:08:17,350
your ACK hole so that it's limited in

201
00:08:15,700 --> 00:08:18,969
the size of the packet right if if

202
00:08:17,350 --> 00:08:20,830
you're getting a small DNS response

203
00:08:18,970 --> 00:08:25,600
that's not likely to be a part of an

204
00:08:20,830 --> 00:08:28,810
attack in terms of what we're seeing for

205
00:08:25,600 --> 00:08:31,600
growth here's an example I've been

206
00:08:28,810 --> 00:08:33,460
watching this for over 10 years so I put

207
00:08:31,600 --> 00:08:35,710
this on a log scale because any other

208
00:08:33,460 --> 00:08:37,630
way it just blows up too fast and you

209
00:08:35,710 --> 00:08:39,099
can't see anything but you'll see that

210
00:08:37,630 --> 00:08:41,169
this is going up pretty quickly even on

211
00:08:39,099 --> 00:08:44,050
a log scale so you know think of this as

212
00:08:41,169 --> 00:08:45,910
exponential growth that shouldn't

213
00:08:44,049 --> 00:08:48,250
surprise anyone if you've heard of

214
00:08:45,910 --> 00:08:50,260
Moore's law like computers tend to get

215
00:08:48,250 --> 00:08:51,940
exponentially better over time that

216
00:08:50,260 --> 00:08:54,520
applies to everything related to

217
00:08:51,940 --> 00:08:56,020
computers there's also an explosion in

218
00:08:54,520 --> 00:08:57,339
the internet right there's there are

219
00:08:56,020 --> 00:08:59,740
more devices out there which means

220
00:08:57,339 --> 00:09:01,510
you're going to have you know not only

221
00:08:59,740 --> 00:09:03,550
more bandwidth per device or more

222
00:09:01,510 --> 00:09:08,140
compute power per device but also more

223
00:09:03,550 --> 00:09:10,209
devices participating so you know when I

224
00:09:08,140 --> 00:09:12,970
look at this I be at all surprised to

225
00:09:10,209 --> 00:09:13,930
see a 5 terabit attack right now like I

226
00:09:12,970 --> 00:09:15,220
don't know if that would surprise

227
00:09:13,930 --> 00:09:17,469
anybody here I hope

228
00:09:15,220 --> 00:09:21,779
doesn't but five turbit to sort of the

229
00:09:17,470 --> 00:09:24,610
expected value when I mentioned this to

230
00:09:21,779 --> 00:09:26,769
my my company's leadership they say okay

231
00:09:24,610 --> 00:09:29,199
well what if you know that's that's just

232
00:09:26,769 --> 00:09:30,639
your prediction of average what if it's

233
00:09:29,199 --> 00:09:33,878
above average what if it's ten terabits

234
00:09:30,639 --> 00:09:35,560
great so you know you sort of think

235
00:09:33,879 --> 00:09:37,720
about it like who cares prepared for a

236
00:09:35,560 --> 00:09:40,989
10 terabyte attack you have 10 T of

237
00:09:37,720 --> 00:09:43,089
spare capacity okay I see one hand only

238
00:09:40,990 --> 00:09:45,279
one - okay - hands

239
00:09:43,089 --> 00:09:48,759
great what are the rest of you planning

240
00:09:45,279 --> 00:09:49,480
to do like make me maybe this is a

241
00:09:48,759 --> 00:09:51,250
problem okay

242
00:09:49,480 --> 00:09:56,259
so that that's sort of the myth the

243
00:09:51,250 --> 00:09:57,819
motivation for this talk so first I want

244
00:09:56,259 --> 00:09:59,500
to go over like what others have done

245
00:09:57,819 --> 00:10:01,199
because I you know obviously a lot of

246
00:09:59,500 --> 00:10:03,970
work has been done in this area before

247
00:10:01,199 --> 00:10:06,069
some people have talked about you know

248
00:10:03,970 --> 00:10:08,589
maybe UDP is the problem right UDP

249
00:10:06,069 --> 00:10:11,139
doesn't require a handshake at session

250
00:10:08,589 --> 00:10:14,709
setup and therefore it can be you know

251
00:10:11,139 --> 00:10:17,259
spoofing is an issue for it should we

252
00:10:14,709 --> 00:10:19,329
just block all UDP like the UDP should

253
00:10:17,259 --> 00:10:20,980
be forbidden on the Internet

254
00:10:19,329 --> 00:10:23,109
I think that's probably not a great

255
00:10:20,980 --> 00:10:24,670
solution you know you're you're gonna

256
00:10:23,110 --> 00:10:28,389
cause a lot of problems for existing

257
00:10:24,670 --> 00:10:31,089
things like DNS also quick a lot of

258
00:10:28,389 --> 00:10:35,139
games use UDP because of the latency

259
00:10:31,089 --> 00:10:37,300
improvement you know voice protocols and

260
00:10:35,139 --> 00:10:38,680
also this doesn't actually fully solve

261
00:10:37,300 --> 00:10:41,349
the problem there's the concept out

262
00:10:38,680 --> 00:10:43,319
there of TCP amplification right so if

263
00:10:41,350 --> 00:10:46,000
you send the syn packet to somebody

264
00:10:43,319 --> 00:10:47,199
they're gonna send this an ACK back what

265
00:10:46,000 --> 00:10:49,329
if you don't respond to that syn ACK

266
00:10:47,199 --> 00:10:51,550
they're gonna send you another syn ACK

267
00:10:49,329 --> 00:10:54,069
what if you don't respond to that well

268
00:10:51,550 --> 00:10:55,920
so do exponential back-off but they're

269
00:10:54,069 --> 00:10:58,779
gonna send you another syn ACK right and

270
00:10:55,920 --> 00:11:01,389
it's pretty common to see like maybe a

271
00:10:58,779 --> 00:11:03,970
factor of 5 amplification just in terms

272
00:11:01,389 --> 00:11:06,939
of syntax so this isn't purely a UDP

273
00:11:03,970 --> 00:11:11,040
problem this is this can apply to TCP as

274
00:11:06,939 --> 00:11:13,269
well another idea that people have

275
00:11:11,040 --> 00:11:16,449
proposed is cleaning up the amplifiers

276
00:11:13,269 --> 00:11:18,100
right so there are some great projects

277
00:11:16,449 --> 00:11:21,550
that have been used to track how many

278
00:11:18,100 --> 00:11:23,199
amplifiers are there so you know right

279
00:11:21,550 --> 00:11:25,389
now I think there's around 16 million

280
00:11:23,199 --> 00:11:28,459
DNS servers out there that can be used

281
00:11:25,389 --> 00:11:29,870
for amplification so you know

282
00:11:28,460 --> 00:11:31,550
try to we could try to clean all those

283
00:11:29,870 --> 00:11:33,500
up there there changes that we can make

284
00:11:31,550 --> 00:11:35,660
similar with ntp there's about 4 million

285
00:11:33,500 --> 00:11:37,790
of those you know you can change the

286
00:11:35,660 --> 00:11:39,589
default packages to not allow for

287
00:11:37,790 --> 00:11:42,560
amplification but that's gonna take a

288
00:11:39,589 --> 00:11:43,959
very long time to roll out right so you

289
00:11:42,560 --> 00:11:46,459
know even if we do this today and

290
00:11:43,959 --> 00:11:48,319
best-case scenario you imagine like you

291
00:11:46,459 --> 00:11:50,779
know we we get on the news we get

292
00:11:48,320 --> 00:11:52,910
everyone to update and we get a 99.9

293
00:11:50,779 --> 00:11:54,800
percent success rate like that would be

294
00:11:52,910 --> 00:11:56,360
so amazing like look at all these people

295
00:11:54,800 --> 00:11:58,609
who patched you've accomplished

296
00:11:56,360 --> 00:11:59,720
absolutely nothing right you're still

297
00:11:58,610 --> 00:12:02,089
they're still going to be enough

298
00:11:59,720 --> 00:12:04,940
amplifiers out there that they can still

299
00:12:02,089 --> 00:12:06,620
cause these 10 terabit attacks so I

300
00:12:04,940 --> 00:12:08,450
don't think this is you know it's great

301
00:12:06,620 --> 00:12:10,520
to clean up amplifiers it's good for

302
00:12:08,450 --> 00:12:11,990
your own bandwidth if if you've been

303
00:12:10,520 --> 00:12:14,240
wasting your bandwidth amplifying

304
00:12:11,990 --> 00:12:18,410
attacks for others but this isn't a

305
00:12:14,240 --> 00:12:21,620
solution to the problem now they're

306
00:12:18,410 --> 00:12:23,029
saying you know BCP 38 I assume

307
00:12:21,620 --> 00:12:24,740
everybody here has heard about it

308
00:12:23,029 --> 00:12:25,880
because it's 20 years old and gets

309
00:12:24,740 --> 00:12:28,070
brought up basically every year

310
00:12:25,880 --> 00:12:29,689
everyone's saying hey if everybody were

311
00:12:28,070 --> 00:12:32,029
a good citizen then there would be no

312
00:12:29,690 --> 00:12:35,839
problems that's sort of a generic

313
00:12:32,029 --> 00:12:38,240
statement not just for the Internet it

314
00:12:35,839 --> 00:12:42,200
turns out there's something like sixty

315
00:12:38,240 --> 00:12:44,180
thousand a SS out there right that

316
00:12:42,200 --> 00:12:45,740
sounds like a large number but keep in

317
00:12:44,180 --> 00:12:46,849
mind this is like a thousand times

318
00:12:45,740 --> 00:12:49,220
smaller than the number of amplifiers

319
00:12:46,850 --> 00:12:50,660
out there so like we've already

320
00:12:49,220 --> 00:12:52,550
constrained the number of people we

321
00:12:50,660 --> 00:12:55,130
would need to convince to take action

322
00:12:52,550 --> 00:12:56,540
and also if you own an AAS you're

323
00:12:55,130 --> 00:12:59,570
probably a bit more technical than the

324
00:12:56,540 --> 00:13:03,050
average home user so this does seem like

325
00:12:59,570 --> 00:13:04,520
it's the right direction to go but you

326
00:13:03,050 --> 00:13:05,689
know obviously this has been out for

327
00:13:04,520 --> 00:13:08,060
twenty years and there hasn't been much

328
00:13:05,690 --> 00:13:10,240
progress and so I've thought a lot about

329
00:13:08,060 --> 00:13:12,770
why isn't there much progress there and

330
00:13:10,240 --> 00:13:15,470
part of this is the lack of awareness

331
00:13:12,770 --> 00:13:17,390
right like there are networks you know

332
00:13:15,470 --> 00:13:19,160
some new network up there maybe they

333
00:13:17,390 --> 00:13:22,520
don't come to nanog as often as they

334
00:13:19,160 --> 00:13:24,500
should and they might be sending spoofed

335
00:13:22,520 --> 00:13:26,329
traffic out and not aware that they're

336
00:13:24,500 --> 00:13:28,670
doing it or that it's a problem right so

337
00:13:26,329 --> 00:13:29,930
they just need to be informed there's

338
00:13:28,670 --> 00:13:34,399
also a difficulty with lack of

339
00:13:29,930 --> 00:13:35,779
accountability it turns out that if if

340
00:13:34,399 --> 00:13:37,850
nobody knows that you're sending this

341
00:13:35,779 --> 00:13:38,630
abuse then you can't really be held

342
00:13:37,850 --> 00:13:40,640
responsible for it

343
00:13:38,630 --> 00:13:41,840
so not really your problem

344
00:13:40,640 --> 00:13:43,160
so there's no strong incentive for

345
00:13:41,840 --> 00:13:46,910
people to clean up because they can't

346
00:13:43,160 --> 00:13:48,469
really be traced anyway there's an

347
00:13:46,910 --> 00:13:51,050
interesting analogy here to like

348
00:13:48,470 --> 00:13:52,910
pollution right if you're polluting it's

349
00:13:51,050 --> 00:13:55,010
sort of bad for everyone but nobody can

350
00:13:52,910 --> 00:13:58,640
really pin it on you specifically with

351
00:13:55,010 --> 00:14:01,370
without significant effort okay so I

352
00:13:58,640 --> 00:14:03,470
feel like you know there's been a lot of

353
00:14:01,370 --> 00:14:04,700
guesses at solutions but I rather than

354
00:14:03,470 --> 00:14:07,100
guessing I think maybe we should just

355
00:14:04,700 --> 00:14:08,870
try to design a solution so you know

356
00:14:07,100 --> 00:14:12,050
what goes into designing a good solution

357
00:14:08,870 --> 00:14:14,780
to this problem well one way I think of

358
00:14:12,050 --> 00:14:17,839
it is you're gonna make progress if you

359
00:14:14,780 --> 00:14:19,130
have people have be incentivized to make

360
00:14:17,840 --> 00:14:21,110
a change great

361
00:14:19,130 --> 00:14:24,110
you need some incentive and you also

362
00:14:21,110 --> 00:14:27,260
need to have as few people involved as

363
00:14:24,110 --> 00:14:28,610
possible right you don't obviously you

364
00:14:27,260 --> 00:14:30,680
can't have millions of people adjust

365
00:14:28,610 --> 00:14:32,180
their behavior even tens of thousands

366
00:14:30,680 --> 00:14:33,560
might be too many right so you need to

367
00:14:32,180 --> 00:14:36,800
try to minimize how many people are

368
00:14:33,560 --> 00:14:39,020
involved so first I want to try to

369
00:14:36,800 --> 00:14:41,030
reduce that number of 60,000 a a sense

370
00:14:39,020 --> 00:14:44,060
to you know can we identify just the

371
00:14:41,030 --> 00:14:45,430
problematic ones and you know how would

372
00:14:44,060 --> 00:14:47,959
we go about doing that

373
00:14:45,430 --> 00:14:49,630
well it turns out in order to launch one

374
00:14:47,960 --> 00:14:51,950
of these attacks you're typically

375
00:14:49,630 --> 00:14:54,710
reflecting off of a very very large

376
00:14:51,950 --> 00:14:57,440
number of devices so you know thousands

377
00:14:54,710 --> 00:14:59,120
or tens of thousands of DNS servers or

378
00:14:57,440 --> 00:15:02,480
NTP servers depending on whatever the

379
00:14:59,120 --> 00:15:03,950
attack style is right the attacker has

380
00:15:02,480 --> 00:15:05,930
no choice but to reflect off a lot of

381
00:15:03,950 --> 00:15:08,150
them and in addition to that they need

382
00:15:05,930 --> 00:15:10,699
them to be spread out sort of across the

383
00:15:08,150 --> 00:15:14,360
entire internet it doesn't help me to

384
00:15:10,700 --> 00:15:16,070
find like you know a thousand DNS

385
00:15:14,360 --> 00:15:18,260
servers all at a single hosting provider

386
00:15:16,070 --> 00:15:20,030
or at a single ISP because basically

387
00:15:18,260 --> 00:15:21,319
you're just going to knock that ISP off

388
00:15:20,030 --> 00:15:23,630
the internet when they try to send this

389
00:15:21,320 --> 00:15:26,570
much to their upstream right so you do

390
00:15:23,630 --> 00:15:27,830
want it globally distributed so we can

391
00:15:26,570 --> 00:15:30,170
take we can use this to our advantage

392
00:15:27,830 --> 00:15:33,410
because this means that you basically

393
00:15:30,170 --> 00:15:34,550
have a window into the attackers traffic

394
00:15:33,410 --> 00:15:36,620
right they're trying to reflect off of

395
00:15:34,550 --> 00:15:37,420
servers if you have any of these servers

396
00:15:36,620 --> 00:15:39,680
on your network

397
00:15:37,420 --> 00:15:41,780
now you could set up one of these

398
00:15:39,680 --> 00:15:43,579
servers on your network but fortunately

399
00:15:41,780 --> 00:15:46,130
for most of us we have customers who do

400
00:15:43,580 --> 00:15:48,620
that for us right that's the great thing

401
00:15:46,130 --> 00:15:50,840
about customers so they're already

402
00:15:48,620 --> 00:15:52,730
running this infrastructure on our

403
00:15:50,840 --> 00:15:53,980
behalf right all we have to do is look

404
00:15:52,730 --> 00:15:55,480
at our data to

405
00:15:53,980 --> 00:15:58,870
advantage of that information that

406
00:15:55,480 --> 00:16:01,000
they're there collecting so we need to

407
00:15:58,870 --> 00:16:02,920
figure out where to how to identify

408
00:16:01,000 --> 00:16:05,320
where these packets are entering our

409
00:16:02,920 --> 00:16:08,650
network the spoofed packets coming from

410
00:16:05,320 --> 00:16:11,260
the attacker so one simple thing you

411
00:16:08,650 --> 00:16:13,240
could do is router counters right if you

412
00:16:11,260 --> 00:16:18,730
deploy a term like this on your routers

413
00:16:13,240 --> 00:16:20,530
this is basically just looking for UDP

414
00:16:18,730 --> 00:16:22,990
packets that are destined to

415
00:16:20,530 --> 00:16:24,819
amplification ports right so ports that

416
00:16:22,990 --> 00:16:27,760
could be are commonly used by attackers

417
00:16:24,820 --> 00:16:31,180
for launching outbound for launching

418
00:16:27,760 --> 00:16:33,760
amplification attacks if you put this on

419
00:16:31,180 --> 00:16:36,849
your routers then you get like a per

420
00:16:33,760 --> 00:16:38,350
link account of where this traffic is

421
00:16:36,850 --> 00:16:41,200
coming from and that will give you a

422
00:16:38,350 --> 00:16:43,090
great insight into if any of your peers

423
00:16:41,200 --> 00:16:46,300
are likely the source of these types of

424
00:16:43,090 --> 00:16:48,610
attacks right obviously if you're a leaf

425
00:16:46,300 --> 00:16:49,599
node and your only peers that transit

426
00:16:48,610 --> 00:16:52,060
provider this isn't going to be very

427
00:16:49,600 --> 00:16:54,670
helpful to you but if you have a lot of

428
00:16:52,060 --> 00:16:58,359
peers then this can be used essentially

429
00:16:54,670 --> 00:17:01,199
for some form of trace back now you know

430
00:16:58,360 --> 00:17:03,310
keep in mind this isn't going to show up

431
00:17:01,200 --> 00:17:06,490
you know that this is only going to show

432
00:17:03,310 --> 00:17:08,079
like the largest attacks but as you get

433
00:17:06,490 --> 00:17:10,329
closer to the source these things are

434
00:17:08,079 --> 00:17:12,939
very focused right the the spoof traffic

435
00:17:10,329 --> 00:17:15,429
traffic is probably coming from only one

436
00:17:12,940 --> 00:17:17,440
or two original sources and so as you

437
00:17:15,430 --> 00:17:19,930
get nearer to that it's easier to to see

438
00:17:17,440 --> 00:17:22,720
it and this is certainly a lot easier

439
00:17:19,930 --> 00:17:24,970
than like trying to trait get a packet

440
00:17:22,720 --> 00:17:27,190
capture on your router and then look and

441
00:17:24,970 --> 00:17:29,050
see which port it came in on and then go

442
00:17:27,190 --> 00:17:30,340
to that router right if you can if you

443
00:17:29,050 --> 00:17:32,560
have any monitoring of your network

444
00:17:30,340 --> 00:17:33,909
infrastructure with router counters this

445
00:17:32,560 --> 00:17:38,260
is an easy one to add that'll give you a

446
00:17:33,910 --> 00:17:40,570
a great visibility but still that's a

447
00:17:38,260 --> 00:17:44,680
bit of a pain much easier if you can do

448
00:17:40,570 --> 00:17:47,620
it is net flow or s flow so you know

449
00:17:44,680 --> 00:17:49,450
obviously here like a lot of people

450
00:17:47,620 --> 00:17:51,429
should have net flow it's really sort of

451
00:17:49,450 --> 00:17:54,400
essential for debugging any traffic

452
00:17:51,430 --> 00:17:55,750
weirdness so I strongly encourage it I

453
00:17:54,400 --> 00:17:57,940
know some people are nervous about

454
00:17:55,750 --> 00:18:00,340
having net flow they have concerns about

455
00:17:57,940 --> 00:18:02,110
the size of the data that they're

456
00:18:00,340 --> 00:18:04,629
collecting but keep in mind this can be

457
00:18:02,110 --> 00:18:06,370
sampled so it's you can reduce the

458
00:18:04,630 --> 00:18:07,820
amount of data you have to receive you

459
00:18:06,370 --> 00:18:11,179
can adjust privacy concerns with

460
00:18:07,820 --> 00:18:12,710
to be too weak for attention period it's

461
00:18:11,180 --> 00:18:14,270
very rare for anybody to need you to

462
00:18:12,710 --> 00:18:17,660
trace an attack that happened more than

463
00:18:14,270 --> 00:18:19,250
a few days ago and then analysis it was

464
00:18:17,660 --> 00:18:20,570
also typically a problem I recommend

465
00:18:19,250 --> 00:18:22,850
putting it into some sort of database

466
00:18:20,570 --> 00:18:25,760
and you know there are open source

467
00:18:22,850 --> 00:18:27,770
solutions that allow for that to give an

468
00:18:25,760 --> 00:18:29,629
example of how this can be used I'm

469
00:18:27,770 --> 00:18:33,470
showing some some actual data from our

470
00:18:29,630 --> 00:18:35,270
net flow from you know recent past where

471
00:18:33,470 --> 00:18:38,870
I'm just saying for each peering link

472
00:18:35,270 --> 00:18:41,240
tell me how many source guesses we saw

473
00:18:38,870 --> 00:18:44,290
over that single peering like right so

474
00:18:41,240 --> 00:18:47,270
the top one here is an internet exchange

475
00:18:44,290 --> 00:18:49,220
this exchange has 29 connected networks

476
00:18:47,270 --> 00:18:51,500
some of them may have a customer code

477
00:18:49,220 --> 00:18:52,550
with additional downstream members but I

478
00:18:51,500 --> 00:18:55,970
find it hard to believe that they're

479
00:18:52,550 --> 00:18:57,230
really 44,000 guesses that somehow have

480
00:18:55,970 --> 00:19:00,560
a customer code that comes up through

481
00:18:57,230 --> 00:19:03,080
the single pairing exchange so this is

482
00:19:00,560 --> 00:19:04,879
sort of a very rough way of getting a

483
00:19:03,080 --> 00:19:07,250
sense of where attacks might be coming

484
00:19:04,880 --> 00:19:08,630
from obviously if you have full net flow

485
00:19:07,250 --> 00:19:11,450
data you can do a much more detailed

486
00:19:08,630 --> 00:19:13,340
analysis looking at these specific ports

487
00:19:11,450 --> 00:19:15,590
and filtering on UDP or whatever you

488
00:19:13,340 --> 00:19:17,060
want but I'm not trying to shame people

489
00:19:15,590 --> 00:19:18,560
here obviously some of these may be

490
00:19:17,060 --> 00:19:20,679
legitimate or not I'm just trying to

491
00:19:18,560 --> 00:19:22,610
show that this is actually possible I

492
00:19:20,680 --> 00:19:24,890
don't want people to come away thinking

493
00:19:22,610 --> 00:19:28,760
that I'm pitching something that can't

494
00:19:24,890 --> 00:19:30,380
actually be done and and obviously you

495
00:19:28,760 --> 00:19:33,590
know here this is just a top 20 right

496
00:19:30,380 --> 00:19:35,690
there there are many more are there

497
00:19:33,590 --> 00:19:37,459
projects out there to identify where

498
00:19:35,690 --> 00:19:38,840
these packets are potentially coming

499
00:19:37,460 --> 00:19:42,260
from yes there are

500
00:19:38,840 --> 00:19:45,429
kaida is a big one that everyone sort of

501
00:19:42,260 --> 00:19:47,930
knows about I have often questioned like

502
00:19:45,430 --> 00:19:50,360
about biases in their data is something

503
00:19:47,930 --> 00:19:52,690
I worry a little bit about because users

504
00:19:50,360 --> 00:19:55,129
have to sort of opt into this right so

505
00:19:52,690 --> 00:19:57,140
they're actually under the assumption

506
00:19:55,130 --> 00:19:59,120
that users are acting independently if

507
00:19:57,140 --> 00:20:00,710
their hosting provider so a user will

508
00:19:59,120 --> 00:20:02,570
opt in for most hosting providers and

509
00:20:00,710 --> 00:20:04,400
they get a pretty good sense of data I'm

510
00:20:02,570 --> 00:20:06,500
not sure how accurate that is right

511
00:20:04,400 --> 00:20:07,700
that's an assumption I worry that there

512
00:20:06,500 --> 00:20:09,110
are some hosting providers that are

513
00:20:07,700 --> 00:20:11,780
malicious and the users know that

514
00:20:09,110 --> 00:20:13,580
they're malicious and therefore they the

515
00:20:11,780 --> 00:20:17,480
users maybe aren't subscribing to this

516
00:20:13,580 --> 00:20:21,100
data so and there also isn't really any

517
00:20:17,480 --> 00:20:23,409
enforcement there so I've sort of looked

518
00:20:21,100 --> 00:20:26,709
our own source of data on this as a

519
00:20:23,409 --> 00:20:28,179
cross-check on the akkada data and one

520
00:20:26,710 --> 00:20:31,080
time we had the really fortunate thing

521
00:20:28,179 --> 00:20:34,840
happened which is we got hit by a botnet

522
00:20:31,080 --> 00:20:38,199
botnets are great it turns out that this

523
00:20:34,840 --> 00:20:41,168
botnet was spoofing packets and so now I

524
00:20:38,200 --> 00:20:44,710
have a globally distributed not exactly

525
00:20:41,169 --> 00:20:48,340
opt in source of information on where

526
00:20:44,710 --> 00:20:49,929
spoof packets can originate from and so

527
00:20:48,340 --> 00:20:51,939
you know this came from a pretty large

528
00:20:49,929 --> 00:20:52,990
number of places I've learned out the is

529
00:20:51,940 --> 00:20:54,279
is here because again I'm not really

530
00:20:52,990 --> 00:20:55,779
trying to name in shame

531
00:20:54,279 --> 00:20:58,809
I'm just trying to give you a sense of

532
00:20:55,779 --> 00:20:59,919
how large the problem is and this gives

533
00:20:58,809 --> 00:21:03,009
you a sense that the problem isn't

534
00:20:59,919 --> 00:21:04,509
actually all that large right like yeah

535
00:21:03,009 --> 00:21:08,590
there's a lot of places a lot of caring

536
00:21:04,509 --> 00:21:10,750
exchanges have have issues probably

537
00:21:08,590 --> 00:21:12,490
because the smaller networks are not as

538
00:21:10,750 --> 00:21:17,230
well maintained as as the larger ones

539
00:21:12,490 --> 00:21:18,940
that we paired directly with but it's

540
00:21:17,230 --> 00:21:21,190
also helps you to realize that this

541
00:21:18,940 --> 00:21:25,149
isn't really an issue of 60,000 guesses

542
00:21:21,190 --> 00:21:27,429
this is maybe only an issue of 1% of

543
00:21:25,149 --> 00:21:31,620
those great and so that's a much more

544
00:21:27,429 --> 00:21:33,639
tractable problem tractable problem so

545
00:21:31,620 --> 00:21:36,250
another thing to keep in mind here is

546
00:21:33,639 --> 00:21:38,529
imagine you know previously I'd

547
00:21:36,250 --> 00:21:39,700
mentioned if you cleaned up 99.9% of

548
00:21:38,529 --> 00:21:41,529
reflectors you have accomplished

549
00:21:39,700 --> 00:21:43,840
absolutely nothing but imagine if you

550
00:21:41,529 --> 00:21:45,490
clean up one AAS that an attacker was

551
00:21:43,840 --> 00:21:46,990
using what does that attacker have to do

552
00:21:45,490 --> 00:21:48,700
well now they have to go hunting around

553
00:21:46,990 --> 00:21:51,009
for another a s to send their spoofed

554
00:21:48,700 --> 00:21:53,440
traffic from so you've knocked out like

555
00:21:51,009 --> 00:21:54,639
part of their business and their it and

556
00:21:53,440 --> 00:21:57,570
you might have even taken out multiple

557
00:21:54,639 --> 00:22:00,879
attackers in that in that single change

558
00:21:57,570 --> 00:22:02,168
and then as you take out the attackers

559
00:22:00,879 --> 00:22:03,428
it'll be easier to find the new ones

560
00:22:02,169 --> 00:22:05,590
because you've sort of constrained the

561
00:22:03,429 --> 00:22:07,779
problem and there you're now focusing

562
00:22:05,590 --> 00:22:08,980
you know you're making their job harder

563
00:22:07,779 --> 00:22:11,710
as you make progress and you're making

564
00:22:08,980 --> 00:22:16,840
your job easier so this has a really

565
00:22:11,710 --> 00:22:18,070
nice benefit so obviously you know lots

566
00:22:16,840 --> 00:22:20,110
of a yeses will clean up if they're

567
00:22:18,070 --> 00:22:25,539
aware of the problem but what if they

568
00:22:20,110 --> 00:22:27,158
don't right now what so well there's

569
00:22:25,539 --> 00:22:29,679
been a lot of study into this area as

570
00:22:27,159 --> 00:22:31,889
well one is one thing when ideas you RPF

571
00:22:29,679 --> 00:22:34,570
so the idea here is that you advertise

572
00:22:31,889 --> 00:22:36,729
you see appear advertising the

573
00:22:34,570 --> 00:22:38,350
they own a particular range and then

574
00:22:36,730 --> 00:22:40,390
they ask hey will you accept a packet

575
00:22:38,350 --> 00:22:44,919
from a different range and you say no

576
00:22:40,390 --> 00:22:47,470
right well this has some problems which

577
00:22:44,920 --> 00:22:49,180
most people who are aware but just for

578
00:22:47,470 --> 00:22:50,920
those who are there are issues with

579
00:22:49,180 --> 00:22:52,690
asymmetric routing so maybe somebody

580
00:22:50,920 --> 00:22:54,130
wants to send you traffic over one

581
00:22:52,690 --> 00:22:56,290
length but receive it over a different

582
00:22:54,130 --> 00:22:58,780
link for some reason for their traffic

583
00:22:56,290 --> 00:23:00,370
engineering purposes also this requires

584
00:22:58,780 --> 00:23:02,530
you to do twice as many route lookups

585
00:23:00,370 --> 00:23:04,689
right for every packet you're receiving

586
00:23:02,530 --> 00:23:06,700
you have to also look to see where it

587
00:23:04,690 --> 00:23:08,260
came from and so there are performance

588
00:23:06,700 --> 00:23:13,930
implications on the routers and that

589
00:23:08,260 --> 00:23:16,000
makes this not very feasible another

590
00:23:13,930 --> 00:23:19,210
idea though is what about Eccles right

591
00:23:16,000 --> 00:23:21,220
this is similar to your RPF except you

592
00:23:19,210 --> 00:23:22,960
can define it in advance it's not quite

593
00:23:21,220 --> 00:23:25,480
as automated right you would have to

594
00:23:22,960 --> 00:23:27,160
define somebody ever roll it out but

595
00:23:25,480 --> 00:23:31,810
these things can operate at line rate

596
00:23:27,160 --> 00:23:32,860
and so that's a really great way to do

597
00:23:31,810 --> 00:23:34,570
this because you don't have to worry

598
00:23:32,860 --> 00:23:36,429
about the performance implications or

599
00:23:34,570 --> 00:23:38,260
the asymmetric routing because if you're

600
00:23:36,430 --> 00:23:39,700
aware of asymmetric routing in advance

601
00:23:38,260 --> 00:23:43,900
you can just program that into your AK

602
00:23:39,700 --> 00:23:45,430
hole to allow for it some people wonder

603
00:23:43,900 --> 00:23:46,870
well how many Eccles you know how many

604
00:23:45,430 --> 00:23:49,600
entries does this take and is it really

605
00:23:46,870 --> 00:23:52,590
feasible so I I did some you know very

606
00:23:49,600 --> 00:23:55,540
basic checking our network has

607
00:23:52,590 --> 00:23:58,570
aggregates into 500 ciders Amazon is

608
00:23:55,540 --> 00:24:01,780
about 3,000 Chinese telecom which is

609
00:23:58,570 --> 00:24:02,950
very massive they have 14,000 prefixes

610
00:24:01,780 --> 00:24:04,990
they announced but there's actually

611
00:24:02,950 --> 00:24:10,870
aggregate together very well into only

612
00:24:04,990 --> 00:24:12,760
about 470 prefixes now obviously not

613
00:24:10,870 --> 00:24:14,860
everyone needs to make this change it

614
00:24:12,760 --> 00:24:16,750
turns out that there are better places

615
00:24:14,860 --> 00:24:18,429
for enforcement the attacker in order to

616
00:24:16,750 --> 00:24:20,350
get their traffic from their source

617
00:24:18,430 --> 00:24:22,570
network out into the public Internet

618
00:24:20,350 --> 00:24:24,909
they probably don't peer with every a s

619
00:24:22,570 --> 00:24:26,080
out there right nobody does and so

620
00:24:24,910 --> 00:24:26,890
typically they're going through a

621
00:24:26,080 --> 00:24:28,689
transit provider

622
00:24:26,890 --> 00:24:30,760
this means that transit providers

623
00:24:28,690 --> 00:24:34,870
provide sort of a natural choke point

624
00:24:30,760 --> 00:24:36,190
for filtering out abuse and so you know

625
00:24:34,870 --> 00:24:38,320
we could try to incentivize transit

626
00:24:36,190 --> 00:24:41,620
providers to do this I've listed here

627
00:24:38,320 --> 00:24:43,030
you know various ways of reasons that

628
00:24:41,620 --> 00:24:44,080
they might want to do this obviously

629
00:24:43,030 --> 00:24:44,780
they might just want to be proactive

630
00:24:44,080 --> 00:24:46,879
it's

631
00:24:44,780 --> 00:24:50,690
in their interest for the internet to be

632
00:24:46,880 --> 00:24:52,160
stable but you know there are other

633
00:24:50,690 --> 00:24:55,460
things there that could come into play

634
00:24:52,160 --> 00:24:57,230
right they might be receiving a lot of

635
00:24:55,460 --> 00:24:59,240
abuse complaints from everyone here when

636
00:24:57,230 --> 00:25:01,220
when you see an attack or they might

637
00:24:59,240 --> 00:25:03,710
have law enforcement asking them where

638
00:25:01,220 --> 00:25:06,800
attacks came from which they they can

639
00:25:03,710 --> 00:25:08,450
easily trace with their NetFlow there

640
00:25:06,800 --> 00:25:09,590
could be economic incentives of maybe

641
00:25:08,450 --> 00:25:13,220
you prefer to use a transit provider

642
00:25:09,590 --> 00:25:15,020
that does this right so I think that

643
00:25:13,220 --> 00:25:18,830
this is sort of where things are headed

644
00:25:15,020 --> 00:25:20,690
or where I hope things are headed but I

645
00:25:18,830 --> 00:25:22,760
just want to close with you know where I

646
00:25:20,690 --> 00:25:24,500
what I want people to keep in mind

647
00:25:22,760 --> 00:25:26,360
so obviously software vendors like we

648
00:25:24,500 --> 00:25:27,620
don't want to allow amplification if we

649
00:25:26,360 --> 00:25:28,850
can avoid it when you're designing new

650
00:25:27,620 --> 00:25:32,270
protocols or modifying existing

651
00:25:28,850 --> 00:25:33,530
protocols try to minimize that network

652
00:25:32,270 --> 00:25:36,530
providers you obviously should be

653
00:25:33,530 --> 00:25:39,139
filtering your or your required I will

654
00:25:36,530 --> 00:25:42,500
say to filter your outbound network

655
00:25:39,140 --> 00:25:44,150
traffic and if you're receiving an

656
00:25:42,500 --> 00:25:45,680
attack you know you should feel free to

657
00:25:44,150 --> 00:25:47,240
ask your transit provider where that

658
00:25:45,680 --> 00:25:49,370
attack is coming from and ask them to

659
00:25:47,240 --> 00:25:52,790
filter that out so that it doesn't come

660
00:25:49,370 --> 00:25:54,290
to you great and also and finally I had

661
00:25:52,790 --> 00:25:55,970
the thing that I'd like to add that's

662
00:25:54,290 --> 00:25:58,610
new to this is that transit providers

663
00:25:55,970 --> 00:26:00,980
should be using that flow so you figure

664
00:25:58,610 --> 00:26:02,689
out where spoof traffic is originating

665
00:26:00,980 --> 00:26:03,650
on the Internet they are in a great

666
00:26:02,690 --> 00:26:06,410
position to do this

667
00:26:03,650 --> 00:26:07,730
and they can definitely do that and then

668
00:26:06,410 --> 00:26:09,080
they should notify those customers and

669
00:26:07,730 --> 00:26:11,060
say hey are you aware that you're

670
00:26:09,080 --> 00:26:12,290
sending the spoofed traffic and if the

671
00:26:11,060 --> 00:26:13,970
customers aware they're doing it and

672
00:26:12,290 --> 00:26:15,500
they continue to do it and refuse to do

673
00:26:13,970 --> 00:26:17,660
anything about it then consider applying

674
00:26:15,500 --> 00:26:22,190
an Akal and you can cut off this attack

675
00:26:17,660 --> 00:26:23,480
traffic completely great and you don't

676
00:26:22,190 --> 00:26:25,070
have to apply echoes to everyone you

677
00:26:23,480 --> 00:26:27,860
only have to do that for the problematic

678
00:26:25,070 --> 00:26:36,340
customers so with that I will conclude

679
00:26:27,860 --> 00:26:36,340
and open it up for questions anybody

680
00:26:36,679 --> 00:26:41,030
anyone awake okay

681
00:26:48,960 --> 00:26:55,530
all right I'll I'll do the duty Tony

682
00:26:51,180 --> 00:26:57,450
Taylor compact again the slide you had

683
00:26:55,530 --> 00:27:02,100
where you said the the number of source

684
00:26:57,450 --> 00:27:07,410
a SNS that sorry if I can find it

685
00:27:02,100 --> 00:27:12,240
so the whistling mic several back you

686
00:27:07,410 --> 00:27:14,300
know the blurry ASN slide yeah this what

687
00:27:12,240 --> 00:27:16,650
[Music]

688
00:27:14,300 --> 00:27:19,080
what are you saying they're like what's

689
00:27:16,650 --> 00:27:23,210
your methodology for figuring out what

690
00:27:19,080 --> 00:27:28,290
these asns are doing we're doing to you

691
00:27:23,210 --> 00:27:30,750
in that one right so but at this time

692
00:27:28,290 --> 00:27:32,820
we're receiving a Doss attack which was

693
00:27:30,750 --> 00:27:34,590
spoofing sources and so some of those

694
00:27:32,820 --> 00:27:36,240
sources are supposed to rim ranges that

695
00:27:34,590 --> 00:27:39,240
we know are like obviously not

696
00:27:36,240 --> 00:27:41,250
legitimate so for example our own IP

697
00:27:39,240 --> 00:27:45,180
space coming into our network from the

698
00:27:41,250 --> 00:27:47,100
outside or RFC 1918 or whatever so

699
00:27:45,180 --> 00:27:48,600
basically with our net flow I was able

700
00:27:47,100 --> 00:27:50,939
to look for where these sources are

701
00:27:48,600 --> 00:27:53,219
coming into our network and tie that to

702
00:27:50,940 --> 00:27:55,350
a single peering link and then I can

703
00:27:53,220 --> 00:27:59,000
look up crude who is on the other side

704
00:27:55,350 --> 00:28:03,980
of that wire right where fiber right so

705
00:27:59,000 --> 00:28:10,220
so the traffic so an example of like a

706
00:28:03,980 --> 00:28:15,000
DNS amplification they are using your

707
00:28:10,220 --> 00:28:17,760
your IP address and then the DNS servers

708
00:28:15,000 --> 00:28:20,610
IP address that's the packet you're

709
00:28:17,760 --> 00:28:22,470
getting right so this was not a DNS

710
00:28:20,610 --> 00:28:25,490
amplification attack to generate this

711
00:28:22,470 --> 00:28:27,680
data this was like a spoof syn flood

712
00:28:25,490 --> 00:28:31,170
okay

713
00:28:27,680 --> 00:28:32,880
okay in that case I think I see right

714
00:28:31,170 --> 00:28:35,070
how I could work out so it's different

715
00:28:32,880 --> 00:28:38,400
yeah make sense you know it would be

716
00:28:35,070 --> 00:28:41,929
good to get that kind of data and you

717
00:28:38,400 --> 00:28:45,780
know with maybe for a future project to

718
00:28:41,930 --> 00:28:46,950
mash it with say spoofer and see kind of

719
00:28:45,780 --> 00:28:49,560
where

720
00:28:46,950 --> 00:28:51,150
overlaps are and aren't and maybe

721
00:28:49,560 --> 00:28:53,610
interesting right yeah I think a

722
00:28:51,150 --> 00:28:56,340
challenge here is I can't collect this

723
00:28:53,610 --> 00:28:59,820
data whenever I want I need to convince

724
00:28:56,340 --> 00:29:03,590
a botnet to attack me so I'd only get

725
00:28:59,820 --> 00:29:09,679
occasional Schneider to challenge yeah I

726
00:29:03,590 --> 00:29:09,679
love attacks they're fun anything else

727
00:29:09,980 --> 00:29:19,769
[Applause]

728
00:29:24,909 --> 00:29:26,970
you

