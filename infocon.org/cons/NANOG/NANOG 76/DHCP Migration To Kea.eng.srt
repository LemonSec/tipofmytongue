1
00:00:09,770 --> 00:00:16,139
okay so so I see the little thing up

2
00:00:13,530 --> 00:00:17,549
here says I have 30 minutes so we're

3
00:00:16,139 --> 00:00:19,259
going to be running directly into the

4
00:00:17,550 --> 00:00:21,450
break so I'm sorry that you don't get

5
00:00:19,260 --> 00:00:23,550
your cookies on time but I'll do my best

6
00:00:21,450 --> 00:00:26,610
to to make sure we move along

7
00:00:23,550 --> 00:00:29,970
I did see a post earlier this week about

8
00:00:26,610 --> 00:00:31,529
the fact that in presentations like this

9
00:00:29,970 --> 00:00:34,650
where you have a large number of people

10
00:00:31,529 --> 00:00:36,980
in ace in a small room a lot of times

11
00:00:34,650 --> 00:00:40,560
the carbon dioxide level in the room

12
00:00:36,980 --> 00:00:44,390
Rises and that puts people to sleep so

13
00:00:40,560 --> 00:00:44,390
just take a couple of good deep breaths

14
00:00:44,930 --> 00:00:48,690
because I don't want to see anybody

15
00:00:46,770 --> 00:00:51,990
asleep okay that's that's that's my goal

16
00:00:48,690 --> 00:00:54,330
here is not to have anybody sleeping so

17
00:00:51,990 --> 00:00:57,240
I'm going to be talking about migrating

18
00:00:54,330 --> 00:00:59,970
to Kea and have any of you heard of Kea

19
00:00:57,240 --> 00:01:04,049
do you know what Kea is okay I see a few

20
00:00:59,970 --> 00:01:06,840
hands Kea is a new implementation of a

21
00:01:04,049 --> 00:01:10,560
DHCP server that was originally part of

22
00:01:06,840 --> 00:01:15,900
is C's bind 10 platform and when bind 10

23
00:01:10,560 --> 00:01:19,500
was was split it lived on with in ISC

24
00:01:15,900 --> 00:01:21,240
so if you ever see this logo and it's

25
00:01:19,500 --> 00:01:22,560
there's some socks floating around that

26
00:01:21,240 --> 00:01:25,080
you might might see somebody wearing

27
00:01:22,560 --> 00:01:26,400
socks that have this logo on it and if

28
00:01:25,080 --> 00:01:30,750
you'd like a pair of socks come up and

29
00:01:26,400 --> 00:01:34,830
talk to me afterwards it's a it's a new

30
00:01:30,750 --> 00:01:36,300
iteration of a DHCP server so I'm going

31
00:01:34,830 --> 00:01:38,820
to talk a little bit about doing

32
00:01:36,300 --> 00:01:41,520
migrations first just general migrations

33
00:01:38,820 --> 00:01:44,130
instead of specifically about Kea my

34
00:01:41,520 --> 00:01:47,340
background comes from a long time

35
00:01:44,130 --> 00:01:50,759
working in University and ISP

36
00:01:47,340 --> 00:01:53,270
environments I've worked for NSPS and

37
00:01:50,760 --> 00:01:56,520
I've seen all the new as-a-service

38
00:01:53,270 --> 00:02:01,770
things come they all have come since I

39
00:01:56,520 --> 00:02:04,408
was back at NC State in 1985 so I've

40
00:02:01,770 --> 00:02:06,689
seen it I've worked for is see actually

41
00:02:04,409 --> 00:02:08,280
multiple times I continue coming back

42
00:02:06,689 --> 00:02:10,530
and I actually really love the place

43
00:02:08,280 --> 00:02:14,730
I've actually also worked at a number of

44
00:02:10,530 --> 00:02:16,890
IBM appliance vendors so in my role at

45
00:02:14,730 --> 00:02:20,340
those appliance vendors one of my Jobs

46
00:02:16,890 --> 00:02:22,069
was to assist in migrations so we were

47
00:02:20,340 --> 00:02:24,400
looking at people's existing

48
00:02:22,069 --> 00:02:27,409
for structure and then moving them into

49
00:02:24,400 --> 00:02:29,659
the appliance or into the new software

50
00:02:27,409 --> 00:02:32,719
or whatever was what's happening so I'm

51
00:02:29,659 --> 00:02:34,790
gonna leverage that experience to help a

52
00:02:32,719 --> 00:02:37,370
little bit in thinking about you know

53
00:02:34,790 --> 00:02:40,730
this type of a migration so just as a

54
00:02:37,370 --> 00:02:44,389
question how many of you have ISC DHCP

55
00:02:40,730 --> 00:02:46,939
deployed within your organization and I

56
00:02:44,389 --> 00:02:48,739
would almost guess that even if you

57
00:02:46,939 --> 00:02:50,870
didn't raise your hand it might be in

58
00:02:48,739 --> 00:02:54,290
there somewhere and you don't actually

59
00:02:50,870 --> 00:02:56,299
even know it so yeah I would not be

60
00:02:54,290 --> 00:02:59,168
surprised if almost everybody in here

61
00:02:56,299 --> 00:03:02,689
has either used it currently uses it so

62
00:02:59,169 --> 00:03:05,379
my observations are from experience my

63
00:03:02,689 --> 00:03:08,569
first observation is migrations are hard

64
00:03:05,379 --> 00:03:11,030
have any of you done a migration of

65
00:03:08,569 --> 00:03:15,379
something like at the at the layer of

66
00:03:11,030 --> 00:03:18,169
the DHCP server and did you enjoy it no

67
00:03:15,379 --> 00:03:19,730
of course not it's hard it's painful

68
00:03:18,169 --> 00:03:22,310
it's it's something that you don't

69
00:03:19,730 --> 00:03:25,369
really want to do but there are reasons

70
00:03:22,310 --> 00:03:28,099
that you have to do it so you know that

71
00:03:25,370 --> 00:03:30,769
it's not that gee it's hard we're not

72
00:03:28,099 --> 00:03:33,018
going to do this it may be gee it's hard

73
00:03:30,769 --> 00:03:36,889
but look at the benefits that we're

74
00:03:33,019 --> 00:03:40,519
gonna get from doing this migrations are

75
00:03:36,889 --> 00:03:44,259
not always wanted or needed we ran into

76
00:03:40,519 --> 00:03:48,549
a lot of people who the management layer

77
00:03:44,259 --> 00:03:50,720
said we're going to be replacing our

78
00:03:48,549 --> 00:03:53,209
infrastructure with these new devices

79
00:03:50,720 --> 00:03:56,629
because the salesman over here said we

80
00:03:53,209 --> 00:03:59,359
need that and then everybody at the

81
00:03:56,629 --> 00:04:02,659
operations level says well you know

82
00:03:59,359 --> 00:04:04,400
that's really kind of hard and we really

83
00:04:02,659 --> 00:04:05,929
don't really see a need to do that

84
00:04:04,400 --> 00:04:06,739
because everything's working just fine

85
00:04:05,930 --> 00:04:10,159
as it is

86
00:04:06,739 --> 00:04:10,819
and there were even problems with

87
00:04:10,159 --> 00:04:14,509
fiefdom

88
00:04:10,819 --> 00:04:17,750
because you had people that were the

89
00:04:14,509 --> 00:04:20,719
UNIX DHCP administrators and then you

90
00:04:17,750 --> 00:04:22,460
had the Windows DHCP administrators you

91
00:04:20,719 --> 00:04:24,050
ever tried to get those two guys the two

92
00:04:22,460 --> 00:04:26,719
sets of people to talk to each other and

93
00:04:24,050 --> 00:04:28,820
actually get anything done other than

94
00:04:26,719 --> 00:04:30,680
arguing about well if you click this

95
00:04:28,820 --> 00:04:35,060
it's better but no if you type this it's

96
00:04:30,680 --> 00:04:35,660
better it ends badly there are some

97
00:04:35,060 --> 00:04:38,540
really

98
00:04:35,660 --> 00:04:42,560
interesting unexpected benefits of doing

99
00:04:38,540 --> 00:04:44,420
a migration the first one is and I will

100
00:04:42,560 --> 00:04:47,260
guarantee that this unless you have a

101
00:04:44,420 --> 00:04:51,050
network that is like five machines and

102
00:04:47,260 --> 00:04:53,870
they all have reserved addresses there's

103
00:04:51,050 --> 00:04:56,740
something about your network that you

104
00:04:53,870 --> 00:04:59,360
don't know there is something about the

105
00:04:56,740 --> 00:05:02,450
configuration of your network that is

106
00:04:59,360 --> 00:05:04,480
going to really surprise you when you

107
00:05:02,450 --> 00:05:08,900
start unpinning

108
00:05:04,480 --> 00:05:10,100
things like DHCP there's always

109
00:05:08,900 --> 00:05:12,799
something you don't understand about

110
00:05:10,100 --> 00:05:14,540
your DHCP configuration so how many of

111
00:05:12,800 --> 00:05:16,430
you have a I know you said you were

112
00:05:14,540 --> 00:05:20,060
running it how many of you have actually

113
00:05:16,430 --> 00:05:23,660
been involved in modifying and ISC DHCP

114
00:05:20,060 --> 00:05:25,550
configuration in your job okay a

115
00:05:23,660 --> 00:05:30,770
significantly smaller number of people

116
00:05:25,550 --> 00:05:33,140
so that's a good thing there are so many

117
00:05:30,770 --> 00:05:35,870
options and so many ways of configuring

118
00:05:33,140 --> 00:05:37,490
things and og that little box over there

119
00:05:35,870 --> 00:05:39,620
runs a little bit differently than

120
00:05:37,490 --> 00:05:42,590
everything else so we're gonna have to

121
00:05:39,620 --> 00:05:45,110
make a special case of it and it's in

122
00:05:42,590 --> 00:05:46,609
that DHCP configuration and unless

123
00:05:45,110 --> 00:05:49,220
you're the person who has been keeping

124
00:05:46,610 --> 00:05:52,820
that configuration from day one you

125
00:05:49,220 --> 00:05:55,970
really don't know all of the little bits

126
00:05:52,820 --> 00:06:00,050
that are inside your configuration would

127
00:05:55,970 --> 00:06:01,850
you guys agree yeah surprise that box

128
00:06:00,050 --> 00:06:04,310
doesn't boot any more now that we turned

129
00:06:01,850 --> 00:06:08,630
off option 47 and god knows what it even

130
00:06:04,310 --> 00:06:10,220
did so be aware of that your

131
00:06:08,630 --> 00:06:13,610
configuration may actually become

132
00:06:10,220 --> 00:06:16,180
simpler because all of that old cruft

133
00:06:13,610 --> 00:06:18,590
that was in your previous configuration

134
00:06:16,180 --> 00:06:21,800
well maybe you don't have any bootp

135
00:06:18,590 --> 00:06:24,320
devices anymore maybe all of that stuff

136
00:06:21,800 --> 00:06:26,210
has been phased out and now you can

137
00:06:24,320 --> 00:06:32,180
actually lop off half of your

138
00:06:26,210 --> 00:06:33,830
configuration which is a good thing your

139
00:06:32,180 --> 00:06:37,880
configuration may actually end up

140
00:06:33,830 --> 00:06:40,550
documented and that's a huge thing so

141
00:06:37,880 --> 00:06:42,409
those of you that have the ISC DHCP but

142
00:06:40,550 --> 00:06:45,680
haven't been modifying it haven't been

143
00:06:42,410 --> 00:06:47,660
changing the configuration do you know

144
00:06:45,680 --> 00:06:48,740
who it is that actually modifies the

145
00:06:47,660 --> 00:06:50,360
configuration and do

146
00:06:48,740 --> 00:06:52,250
you know that they're writing out good

147
00:06:50,360 --> 00:06:57,110
documentation as to what it actually

148
00:06:52,250 --> 00:06:59,509
does and how it works how do you

149
00:06:57,110 --> 00:07:02,060
estimate the effort required to do a

150
00:06:59,509 --> 00:07:04,520
migration and the first thing I'll tell

151
00:07:02,060 --> 00:07:08,599
you is that project managers are not

152
00:07:04,520 --> 00:07:10,280
always evil when you're dealing with an

153
00:07:08,599 --> 00:07:12,050
organization where you have those

154
00:07:10,280 --> 00:07:13,909
multiple stovepipes where you have your

155
00:07:12,050 --> 00:07:16,370
windows guys and you have your UNIX guys

156
00:07:13,910 --> 00:07:17,930
and you have your cloud guys because

157
00:07:16,370 --> 00:07:20,720
they're even a little bit special too

158
00:07:17,930 --> 00:07:24,319
and you need to talk to all of them

159
00:07:20,720 --> 00:07:27,110
about getting DHCP working similarly

160
00:07:24,319 --> 00:07:29,300
it's really nice to have a project

161
00:07:27,110 --> 00:07:32,030
manager sitting in there where everybody

162
00:07:29,300 --> 00:07:34,159
can talk to them and then it isn't

163
00:07:32,030 --> 00:07:37,250
anybody's fault except the project

164
00:07:34,159 --> 00:07:39,139
manager it's a good thing so work with

165
00:07:37,250 --> 00:07:40,789
your project manager loved your project

166
00:07:39,139 --> 00:07:41,659
managers because they actually do help

167
00:07:40,789 --> 00:07:46,039
you out a lot

168
00:07:41,659 --> 00:07:47,479
so look at them and realize that having

169
00:07:46,039 --> 00:07:49,699
to deal with all of the different

170
00:07:47,479 --> 00:07:52,039
personalities and people involved is

171
00:07:49,699 --> 00:07:54,259
really a difficult thing and it's nice

172
00:07:52,039 --> 00:07:57,500
to have that project manager person

173
00:07:54,259 --> 00:07:59,270
around the effort required and the time

174
00:07:57,500 --> 00:08:02,440
required are not going to be the same

175
00:07:59,270 --> 00:08:05,630
thing the time required is going to be

176
00:08:02,440 --> 00:08:07,759
amazingly long if you are in a complex

177
00:08:05,630 --> 00:08:10,280
network across multiple continents

178
00:08:07,759 --> 00:08:13,940
across multiple data centers winny

179
00:08:10,280 --> 00:08:19,030
within each continent the time required

180
00:08:13,940 --> 00:08:24,409
is big the effort required is humans

181
00:08:19,030 --> 00:08:26,508
huge it's big how do you define these

182
00:08:24,409 --> 00:08:27,650
things you know well the effort what is

183
00:08:26,509 --> 00:08:29,479
the effort the effort is going to be

184
00:08:27,650 --> 00:08:31,280
well we need to first of all we need to

185
00:08:29,479 --> 00:08:34,909
decide that yes we're actually going to

186
00:08:31,280 --> 00:08:36,588
do this migration followed by well what

187
00:08:34,909 --> 00:08:38,599
does our existing configuration actually

188
00:08:36,589 --> 00:08:40,789
do how does it work then you're gonna

189
00:08:38,599 --> 00:08:42,289
have to peel off the layers and make

190
00:08:40,789 --> 00:08:43,819
each of those you know make the

191
00:08:42,289 --> 00:08:47,089
configuration actually work in the new

192
00:08:43,820 --> 00:08:49,550
product that's going to take a lot of

193
00:08:47,089 --> 00:08:51,170
time the additional piece where the time

194
00:08:49,550 --> 00:08:54,319
comes in is actually getting the work

195
00:08:51,170 --> 00:08:57,020
done if you have a you know a

196
00:08:54,320 --> 00:09:00,380
multinational organization running

197
00:08:57,020 --> 00:09:02,449
across multiple content continents three

198
00:09:00,380 --> 00:09:05,480
o'clock in the morning here on a

199
00:09:02,450 --> 00:09:08,780
saturday may not be the optimal time to

200
00:09:05,480 --> 00:09:11,180
do that upgrade if you're in you know if

201
00:09:08,780 --> 00:09:13,970
you're somewhere else so be aware that

202
00:09:11,180 --> 00:09:15,650
that the effort is going to be huge the

203
00:09:13,970 --> 00:09:18,650
time is going to be a lot longer than

204
00:09:15,650 --> 00:09:21,189
you actually expect it to be and I will

205
00:09:18,650 --> 00:09:24,140
tell you from from personal experience

206
00:09:21,190 --> 00:09:28,070
several small to mid-size migrations

207
00:09:24,140 --> 00:09:31,730
over a planned period are much much

208
00:09:28,070 --> 00:09:33,800
better than one large migration you go

209
00:09:31,730 --> 00:09:36,710
in and you say well when you guys come

210
00:09:33,800 --> 00:09:38,780
in on Monday DHCP is all going to be new

211
00:09:36,710 --> 00:09:40,820
it's all going to be great and so you

212
00:09:38,780 --> 00:09:44,050
decide that make the minke big change

213
00:09:40,820 --> 00:09:46,460
across huge organization overnight

214
00:09:44,050 --> 00:09:49,880
you're setting yourself up for some real

215
00:09:46,460 --> 00:09:53,180
real pain and suffering so think about

216
00:09:49,880 --> 00:09:57,140
the organization's think about how your

217
00:09:53,180 --> 00:09:59,689
network is actually split up and pick

218
00:09:57,140 --> 00:10:02,210
out individual pieces and look at

219
00:09:59,690 --> 00:10:04,610
migrating individual pieces instead of

220
00:10:02,210 --> 00:10:08,060
doing the whole thing at once go in

221
00:10:04,610 --> 00:10:09,920
obviously labs you know your lab network

222
00:10:08,060 --> 00:10:13,250
that's gonna be something that you're

223
00:10:09,920 --> 00:10:15,589
gonna be able to need to test on you're

224
00:10:13,250 --> 00:10:17,530
gonna need to modify your lab network to

225
00:10:15,590 --> 00:10:20,600
start using the new the new software

226
00:10:17,530 --> 00:10:23,060
look at regional offices well if it's

227
00:10:20,600 --> 00:10:25,970
out there at the end of the network wire

228
00:10:23,060 --> 00:10:28,670
and it takes us three hours to drive out

229
00:10:25,970 --> 00:10:32,380
to that facility is that one of the best

230
00:10:28,670 --> 00:10:35,290
places to start a migration probably not

231
00:10:32,380 --> 00:10:37,010
you need to consider all the the

232
00:10:35,290 --> 00:10:39,920
mechanisms that you're gonna have to

233
00:10:37,010 --> 00:10:44,270
deal with network physical access and

234
00:10:39,920 --> 00:10:46,280
everything else when do you actually

235
00:10:44,270 --> 00:10:47,870
want to migrate and why do you want to

236
00:10:46,280 --> 00:10:49,850
migrate well

237
00:10:47,870 --> 00:10:52,610
infrastructure at rest tends to stay at

238
00:10:49,850 --> 00:10:54,920
rest if you have a working DHCP

239
00:10:52,610 --> 00:10:58,550
configuration you're never going to want

240
00:10:54,920 --> 00:10:59,390
to go in and make a change to it then

241
00:10:58,550 --> 00:11:01,280
that's fair enough

242
00:10:59,390 --> 00:11:05,540
you really you really don't have a

243
00:11:01,280 --> 00:11:07,220
reason to but sometimes it comes time

244
00:11:05,540 --> 00:11:09,800
and you just have to bite the bullet and

245
00:11:07,220 --> 00:11:12,800
do what you need to do so when should

246
00:11:09,800 --> 00:11:15,020
you migrate well when you are already

247
00:11:12,800 --> 00:11:15,920
doing another major infrastructure

248
00:11:15,020 --> 00:11:18,680
change

249
00:11:15,920 --> 00:11:22,579
is that a wonderful time to change out

250
00:11:18,680 --> 00:11:24,709
your DHCP underpinning no it's horrible

251
00:11:22,579 --> 00:11:27,109
you know you've you've already got your

252
00:11:24,709 --> 00:11:29,089
networking in pieces in shambles and

253
00:11:27,110 --> 00:11:31,070
this part of its working but that's not

254
00:11:29,089 --> 00:11:34,459
and then everybody says well it's DHCP s

255
00:11:31,070 --> 00:11:36,760
fault and you can't say no it's not

256
00:11:34,459 --> 00:11:38,779
because it's was working yesterday

257
00:11:36,760 --> 00:11:41,029
because now you're saying well I don't

258
00:11:38,779 --> 00:11:43,490
think it is because we're running new

259
00:11:41,029 --> 00:11:44,870
code and the configuration kind of looks

260
00:11:43,490 --> 00:11:47,829
like it did yesterday but I'm not really

261
00:11:44,870 --> 00:11:50,779
sure that's not a good position to be in

262
00:11:47,829 --> 00:11:53,750
how about when a new campus a facility

263
00:11:50,779 --> 00:11:55,550
or remote office comes online to me

264
00:11:53,750 --> 00:11:57,920
that's a perfect time to do this type of

265
00:11:55,550 --> 00:12:00,859
thing that remote office doesn't work

266
00:11:57,920 --> 00:12:02,990
anyway right now that remote campus has

267
00:12:00,860 --> 00:12:05,899
never been up and running let's go ahead

268
00:12:02,990 --> 00:12:08,120
and bring them up on the new stuff see

269
00:12:05,899 --> 00:12:10,430
how it works does it work does it do

270
00:12:08,120 --> 00:12:13,010
what we expect it to do and if it does

271
00:12:10,430 --> 00:12:15,560
we have lessons learned that we can now

272
00:12:13,010 --> 00:12:17,329
bring into our existing infrastructure

273
00:12:15,560 --> 00:12:20,329
we're able to start looking at our

274
00:12:17,329 --> 00:12:22,729
tooling to see if the configuration

275
00:12:20,329 --> 00:12:25,880
tools you know well we just added in a

276
00:12:22,730 --> 00:12:27,860
new server did it actually work when we

277
00:12:25,880 --> 00:12:30,470
entered you know oh and into the tool

278
00:12:27,860 --> 00:12:36,199
train and if it does then you've learned

279
00:12:30,470 --> 00:12:39,199
a massive amount mmm end of life of

280
00:12:36,199 --> 00:12:41,000
existing infrastructure tools how many

281
00:12:39,199 --> 00:12:43,010
of you are dealing with a vendor or

282
00:12:41,000 --> 00:12:46,339
vendors that have said well yeah you

283
00:12:43,010 --> 00:12:48,470
have about you know two years to get off

284
00:12:46,339 --> 00:12:49,850
of this existing platform that you're

285
00:12:48,470 --> 00:12:53,089
using if any of you ever had to deal

286
00:12:49,850 --> 00:12:55,339
with that that's not fun and I'll tell

287
00:12:53,089 --> 00:12:56,990
you if they tell you two years out it's

288
00:12:55,339 --> 00:12:59,000
probably gonna end up being more like

289
00:12:56,990 --> 00:13:00,649
four because everybody's gonna be

290
00:12:59,000 --> 00:13:04,399
screaming when there's three months left

291
00:13:00,649 --> 00:13:05,690
going but you can't turn it off but I'll

292
00:13:04,399 --> 00:13:07,910
tell you when they start giving you two

293
00:13:05,690 --> 00:13:10,510
years it's time to start thinking and

294
00:13:07,910 --> 00:13:13,490
moving forward to the next platform

295
00:13:10,510 --> 00:13:16,459
because even though they may still be

296
00:13:13,490 --> 00:13:18,050
supporting it it's not going to be the

297
00:13:16,459 --> 00:13:21,469
level of support that you're expecting

298
00:13:18,050 --> 00:13:23,420
that you're used to and always if you

299
00:13:21,470 --> 00:13:25,370
have hundreds of available hours and

300
00:13:23,420 --> 00:13:28,010
tens of thousands of leftover budget

301
00:13:25,370 --> 00:13:29,810
dollars that's the time to start doing

302
00:13:28,010 --> 00:13:32,629
your migration

303
00:13:29,810 --> 00:13:38,119
and if you have that problem please let

304
00:13:32,629 --> 00:13:38,889
me know so how do you go about doing a

305
00:13:38,120 --> 00:13:41,749
migration

306
00:13:38,889 --> 00:13:43,910
well you document and review the

307
00:13:41,749 --> 00:13:46,220
existing configuration hopefully it's

308
00:13:43,910 --> 00:13:47,930
already documented hopefully it's easy

309
00:13:46,220 --> 00:13:50,720
to figure out what to convey what the

310
00:13:47,930 --> 00:13:52,099
existing configuration does but I'm

311
00:13:50,720 --> 00:13:56,149
gonna guess that it probably isn't

312
00:13:52,100 --> 00:13:58,220
really that easy something to think

313
00:13:56,149 --> 00:14:00,470
about here is is it possible to

314
00:13:58,220 --> 00:14:03,379
consolidate or would it be beneficial to

315
00:14:00,470 --> 00:14:07,220
distribute the functionality so there's

316
00:14:03,379 --> 00:14:09,439
a lot of change of thought about DHCP

317
00:14:07,220 --> 00:14:12,290
and one of the ones that I've seen more

318
00:14:09,439 --> 00:14:17,959
recently which absolutely boggles my

319
00:14:12,290 --> 00:14:23,480
mind is moving your DHCP servers to the

320
00:14:17,959 --> 00:14:27,349
cloud great idea great idea

321
00:14:23,480 --> 00:14:28,639
I wouldn't think about doing it but at

322
00:14:27,350 --> 00:14:29,990
least I don't you mean you'd have to

323
00:14:28,639 --> 00:14:31,870
convince me you'd have to get do some

324
00:14:29,990 --> 00:14:35,209
some really hardcore convincing that

325
00:14:31,870 --> 00:14:36,980
thing is going to be as close to the

326
00:14:35,209 --> 00:14:39,229
devices that it's serving as it can

327
00:14:36,980 --> 00:14:41,240
possibly get I'm not gonna put it out

328
00:14:39,230 --> 00:14:42,829
somewhere where I can't lay my fingers

329
00:14:41,240 --> 00:14:44,660
on it I'm not gonna put it out there

330
00:14:42,829 --> 00:14:46,969
somewhere where the packet you know

331
00:14:44,660 --> 00:14:48,800
where the packet may vanish in transit

332
00:14:46,970 --> 00:14:52,459
and when I say where did it go

333
00:14:48,800 --> 00:14:56,899
everybody's gonna go over there not my

334
00:14:52,459 --> 00:14:58,609
fault that's hard consolidation of your

335
00:14:56,899 --> 00:15:00,860
DHCP do you actually want it in a

336
00:14:58,610 --> 00:15:04,490
centralized if you're running lots of

337
00:15:00,860 --> 00:15:06,709
small you know facilities out in you

338
00:15:04,490 --> 00:15:09,610
know remote places do you actually want

339
00:15:06,709 --> 00:15:13,040
DHCP servers in each of those locations

340
00:15:09,610 --> 00:15:18,259
possibly you may not you may want to

341
00:15:13,040 --> 00:15:20,329
bring it all inside we're talking now a

342
00:15:18,259 --> 00:15:22,309
little bit about specifically about kia

343
00:15:20,329 --> 00:15:25,128
and we're gonna need to think about our

344
00:15:22,309 --> 00:15:28,069
deployment options and one of the things

345
00:15:25,129 --> 00:15:30,470
that we did not have to deal with on ISC

346
00:15:28,069 --> 00:15:33,349
dhcp was things like what database

347
00:15:30,470 --> 00:15:35,480
back-end should we use because there was

348
00:15:33,350 --> 00:15:38,809
no database back-end you didn't have

349
00:15:35,480 --> 00:15:40,850
that option well we got how long is ISC

350
00:15:38,809 --> 00:15:43,459
DHCP been around it's been around a

351
00:15:40,850 --> 00:15:47,089
couple of years right

352
00:15:43,460 --> 00:15:48,800
I have seen people that have done things

353
00:15:47,089 --> 00:15:52,040
with the leases database they've pushed

354
00:15:48,800 --> 00:15:54,890
it out into other databases to use for

355
00:15:52,040 --> 00:15:57,589
certain things really seem that

356
00:15:54,890 --> 00:15:59,779
everybody needs to do that so one of the

357
00:15:57,589 --> 00:16:02,149
decisions that you need to make is on

358
00:15:59,779 --> 00:16:03,500
this availability of a database back-end

359
00:16:02,149 --> 00:16:06,200
is it something that you actually want

360
00:16:03,500 --> 00:16:10,220
to do is it a need of yours in your

361
00:16:06,200 --> 00:16:14,750
infrastructure to keep the leases or to

362
00:16:10,220 --> 00:16:17,060
keep the reservations in a database high

363
00:16:14,750 --> 00:16:18,680
availability we'll talk about this in

364
00:16:17,060 --> 00:16:21,649
just a minute it's a little bit

365
00:16:18,680 --> 00:16:23,719
different between ISC DHCP and kia and

366
00:16:21,649 --> 00:16:25,970
then of course this is a great time to

367
00:16:23,720 --> 00:16:27,770
go out and say hey let's do ipv6 while

368
00:16:25,970 --> 00:16:29,270
we're at it we're changing all of our

369
00:16:27,770 --> 00:16:31,130
other underpinnings so we may as well at

370
00:16:29,270 --> 00:16:33,589
least give the machines an ipv6 address

371
00:16:31,130 --> 00:16:37,330
even if our you know even if we don't

372
00:16:33,589 --> 00:16:39,970
really use it something to think about

373
00:16:37,330 --> 00:16:43,310
how do you translate a configuration

374
00:16:39,970 --> 00:16:46,580
well I'll tell you in looking at an ISC

375
00:16:43,310 --> 00:16:49,310
DHCP configuration file if you are a

376
00:16:46,580 --> 00:16:52,040
programmer you recognize it as a

377
00:16:49,310 --> 00:16:53,540
programming language it is not what you

378
00:16:52,040 --> 00:16:55,400
would consider as a standard

379
00:16:53,540 --> 00:16:57,620
configuration file it isn't

380
00:16:55,400 --> 00:17:00,410
do these they're to have you know here

381
00:16:57,620 --> 00:17:02,900
are my my settings and it goes and it

382
00:17:00,410 --> 00:17:07,339
happens it is a programming language

383
00:17:02,900 --> 00:17:10,240
that is not what key is is so we have a

384
00:17:07,339 --> 00:17:13,790
major difference in how the

385
00:17:10,240 --> 00:17:18,920
configurations work there is a tool now

386
00:17:13,790 --> 00:17:21,438
available called kheema or qiyamah it

387
00:17:18,920 --> 00:17:23,809
takes your ISC DHCP configuration and

388
00:17:21,439 --> 00:17:27,230
turns it into a kia configuration to an

389
00:17:23,809 --> 00:17:29,570
extent a lot of the people that have

390
00:17:27,230 --> 00:17:31,760
been working with kia looked at the

391
00:17:29,570 --> 00:17:36,020
difference in configuration between ISC

392
00:17:31,760 --> 00:17:38,900
DHCP and kia and said it is impossible

393
00:17:36,020 --> 00:17:42,970
to write a conversion application you

394
00:17:38,900 --> 00:17:45,890
cannot convert an is a DHCP into a kia

395
00:17:42,970 --> 00:17:47,600
configuration file and so one of our

396
00:17:45,890 --> 00:17:48,770
engineers said you're right it's

397
00:17:47,600 --> 00:17:51,740
absolutely impossible

398
00:17:48,770 --> 00:17:55,190
he went off over a weekend and came back

399
00:17:51,740 --> 00:17:56,660
and said here it is so you know you have

400
00:17:55,190 --> 00:17:57,050
those kind of people working in the

401
00:17:56,660 --> 00:17:59,060
organiz

402
00:17:57,050 --> 00:18:00,200
and they are fantastic and he is

403
00:17:59,060 --> 00:18:04,010
absolutely right

404
00:18:00,200 --> 00:18:06,110
he wrote a converter now it's good but

405
00:18:04,010 --> 00:18:08,780
because of the major differences between

406
00:18:06,110 --> 00:18:10,790
the way the kea configuration works and

407
00:18:08,780 --> 00:18:15,200
the way the ISC DHCP configuration works

408
00:18:10,790 --> 00:18:17,750
it is not complete so manual translation

409
00:18:15,200 --> 00:18:20,990
or a rewrite may be possible or

410
00:18:17,750 --> 00:18:25,370
necessary depending on how weird and

411
00:18:20,990 --> 00:18:28,190
complex your configuration is going to

412
00:18:25,370 --> 00:18:31,250
the the previous presentation it was

413
00:18:28,190 --> 00:18:33,350
absolutely fantastic because it really

414
00:18:31,250 --> 00:18:35,180
fit in very closely with this they were

415
00:18:33,350 --> 00:18:38,510
talking about the methodology of testing

416
00:18:35,180 --> 00:18:41,660
the methodology of testing a DHCP

417
00:18:38,510 --> 00:18:44,750
configuration and a major modification

418
00:18:41,660 --> 00:18:49,720
of your DHCP infrastructure how do you

419
00:18:44,750 --> 00:18:53,690
test a hundred-thousand IP phones and

420
00:18:49,720 --> 00:18:56,540
20,000 HP LaserJet sfrom god-knows-what

421
00:18:53,690 --> 00:18:58,550
years and all of those pcs on

422
00:18:56,540 --> 00:19:02,060
everybody's desk and everything else in

423
00:18:58,550 --> 00:19:04,280
between you have to work on this very

424
00:19:02,060 --> 00:19:06,889
hard and the virtualized environment

425
00:19:04,280 --> 00:19:12,770
that they're talking about is really

426
00:19:06,890 --> 00:19:14,960
hard to create for DHCP in addition to

427
00:19:12,770 --> 00:19:18,080
testing functionality yes okay all of

428
00:19:14,960 --> 00:19:21,830
our devices booted up fantastic we're

429
00:19:18,080 --> 00:19:23,270
happy we're ready to go the problem is

430
00:19:21,830 --> 00:19:24,980
you're changing infrastructure

431
00:19:23,270 --> 00:19:27,590
completely you're now dealing with

432
00:19:24,980 --> 00:19:30,260
performance issues well we've thought

433
00:19:27,590 --> 00:19:32,810
and we think that we need our leases in

434
00:19:30,260 --> 00:19:35,450
a database and it's store it's stored

435
00:19:32,810 --> 00:19:37,010
over there in San Jose our DHCP server

436
00:19:35,450 --> 00:19:40,040
is going to be over here in Palo Alto

437
00:19:37,010 --> 00:19:42,470
and we're just going to run those leases

438
00:19:40,040 --> 00:19:44,000
back and forth and and our devices are

439
00:19:42,470 --> 00:19:47,150
actually sitting out at stores in

440
00:19:44,000 --> 00:19:50,840
various locations and I'll tell you that

441
00:19:47,150 --> 00:19:53,090
that's gonna be really painful because

442
00:19:50,840 --> 00:19:56,120
when you start introducing the latency

443
00:19:53,090 --> 00:19:59,510
of writing your leases into a remote

444
00:19:56,120 --> 00:20:01,580
database on top of supplying a device

445
00:19:59,510 --> 00:20:04,160
with an IP address you're gonna have

446
00:20:01,580 --> 00:20:05,840
some really unhappy customers you need

447
00:20:04,160 --> 00:20:08,240
to look at the options that are

448
00:20:05,840 --> 00:20:10,169
available to you figure out what

449
00:20:08,240 --> 00:20:12,960
actually works well you

450
00:20:10,170 --> 00:20:14,790
you have Kia and the database running on

451
00:20:12,960 --> 00:20:18,720
the same machine or in very close

452
00:20:14,790 --> 00:20:21,000
proximity it works great you start doing

453
00:20:18,720 --> 00:20:24,030
these well our database administrator

454
00:20:21,000 --> 00:20:26,040
guy is over there and he runs all the

455
00:20:24,030 --> 00:20:28,889
sir all the databases on that machine

456
00:20:26,040 --> 00:20:32,960
and life is going to be a whole lot more

457
00:20:28,890 --> 00:20:36,900
painful for you migrating leases

458
00:20:32,960 --> 00:20:38,810
existing leases may at this point need

459
00:20:36,900 --> 00:20:42,150
to be rebuilt from scratch because

460
00:20:38,810 --> 00:20:45,929
currently at this moment there is no

461
00:20:42,150 --> 00:20:48,810
tool to take an existing ISE leases is a

462
00:20:45,930 --> 00:20:54,900
DHCP leases file and convert it into a

463
00:20:48,810 --> 00:20:56,399
kia leases database of any sort this you

464
00:20:54,900 --> 00:20:59,460
can actually work around and we have

465
00:20:56,400 --> 00:21:04,320
done it in the past you lower the the

466
00:20:59,460 --> 00:21:06,090
lease times and then you change that and

467
00:21:04,320 --> 00:21:08,310
you let it sit long enough that the

468
00:21:06,090 --> 00:21:11,610
leases are now getting that that shorter

469
00:21:08,310 --> 00:21:14,129
time and then when you pull out the old

470
00:21:11,610 --> 00:21:16,770
network or the old DHCP server and you

471
00:21:14,130 --> 00:21:18,570
put in the new one you may have a couple

472
00:21:16,770 --> 00:21:21,150
of machines that that want to fight each

473
00:21:18,570 --> 00:21:23,970
other over and address but it's going to

474
00:21:21,150 --> 00:21:26,340
be a very limited period of time so be

475
00:21:23,970 --> 00:21:29,040
aware of that there is there there has

476
00:21:26,340 --> 00:21:30,959
been discussion about write a tool to do

477
00:21:29,040 --> 00:21:34,350
this but at this point we do not have

478
00:21:30,960 --> 00:21:36,090
one in performing and cut over as I said

479
00:21:34,350 --> 00:21:38,699
earlier little bits at a time and

480
00:21:36,090 --> 00:21:43,429
whatever the definition of off hours is

481
00:21:38,700 --> 00:21:47,310
what is off hours to here in this city

482
00:21:43,430 --> 00:21:49,500
versus that City over there versus the

483
00:21:47,310 --> 00:21:51,899
one that's you know three three time

484
00:21:49,500 --> 00:21:54,890
zones over three continents over you

485
00:21:51,900 --> 00:21:57,420
know who knows what is the best for them

486
00:21:54,890 --> 00:22:01,320
project management is going to be able

487
00:21:57,420 --> 00:22:03,150
to deal with this works out well so I

488
00:22:01,320 --> 00:22:06,570
talked earlier it's mentioned very

489
00:22:03,150 --> 00:22:09,300
briefly about a high availability well

490
00:22:06,570 --> 00:22:11,850
previously with ISC DHCP we had failover

491
00:22:09,300 --> 00:22:15,810
have any of you ever dealt with is a

492
00:22:11,850 --> 00:22:18,899
DHCP and a failover configuration I see

493
00:22:15,810 --> 00:22:21,570
no hands that does okay I see a couple

494
00:22:18,900 --> 00:22:23,850
of hands it does not surprise me that

495
00:22:21,570 --> 00:22:26,250
there are not a lot of people using this

496
00:22:23,850 --> 00:22:29,100
because I will tell you it was a pain in

497
00:22:26,250 --> 00:22:31,230
the butt it was not an easy thing to

498
00:22:29,100 --> 00:22:33,240
configure once you got it working it

499
00:22:31,230 --> 00:22:35,520
worked really well but in that interim

500
00:22:33,240 --> 00:22:37,230
period it was easier just to say okay

501
00:22:35,520 --> 00:22:38,490
we've got a DCP server it works it's

502
00:22:37,230 --> 00:22:41,490
probably not going to fail we're just

503
00:22:38,490 --> 00:22:45,210
gonna leave it all is good keya actually

504
00:22:41,490 --> 00:22:48,750
implements high availability so you're

505
00:22:45,210 --> 00:22:51,630
able to keep a hot standby of your DHCP

506
00:22:48,750 --> 00:22:54,120
server so you have one up and running

507
00:22:51,630 --> 00:22:57,570
it's sending its lease information over

508
00:22:54,120 --> 00:22:59,879
to the other one the first one fails it

509
00:22:57,570 --> 00:23:03,240
fails over to the second one very good

510
00:22:59,880 --> 00:23:06,780
stuff obviously a major change in your

511
00:23:03,240 --> 00:23:08,190
infrastructure configuration option

512
00:23:06,780 --> 00:23:10,170
inheritance I'm not going to go into

513
00:23:08,190 --> 00:23:13,950
this in any detail at all but it is

514
00:23:10,170 --> 00:23:15,720
different between ISC DHCP and kia so

515
00:23:13,950 --> 00:23:18,120
you're gonna have to read the manual the

516
00:23:15,720 --> 00:23:20,400
conversion tool does not take this into

517
00:23:18,120 --> 00:23:22,590
account you're gonna need to go in and

518
00:23:20,400 --> 00:23:27,260
figure out how options are inherited and

519
00:23:22,590 --> 00:23:27,260
make sure that they work as expected

520
00:23:27,320 --> 00:23:32,100
configuration back-end something new in

521
00:23:29,610 --> 00:23:34,469
the most recent beta version of kia is

522
00:23:32,100 --> 00:23:38,189
the ability to keep your configuration

523
00:23:34,470 --> 00:23:40,980
in a database so now when you have 10

524
00:23:38,190 --> 00:23:43,500
DHCP servers you don't have to have 10

525
00:23:40,980 --> 00:23:46,020
individual configurations you have all

526
00:23:43,500 --> 00:23:47,760
of the configurations in a database when

527
00:23:46,020 --> 00:23:49,080
the server boots up it goes out to that

528
00:23:47,760 --> 00:23:52,140
database and says give me my

529
00:23:49,080 --> 00:23:53,970
configuration it then spools up and is

530
00:23:52,140 --> 00:23:56,670
able to serve leases you're able to make

531
00:23:53,970 --> 00:24:00,810
changes at the database instead of going

532
00:23:56,670 --> 00:24:04,980
out to the remote machines to make make

533
00:24:00,810 --> 00:24:06,149
the changes occur databases I'm not

534
00:24:04,980 --> 00:24:08,040
going to get into it because they only

535
00:24:06,150 --> 00:24:12,570
have six minutes left and I got 38

536
00:24:08,040 --> 00:24:14,909
slides to go database ok so host

537
00:24:12,570 --> 00:24:17,550
reservations you can put in a separate

538
00:24:14,910 --> 00:24:22,320
database from your leases so yes you may

539
00:24:17,550 --> 00:24:23,970
want to have a a reservation database so

540
00:24:22,320 --> 00:24:26,220
you have all these machines that that

541
00:24:23,970 --> 00:24:28,890
get the specific address every time put

542
00:24:26,220 --> 00:24:32,040
that in a separate database your leases

543
00:24:28,890 --> 00:24:34,500
the high-volume traffic does not have to

544
00:24:32,040 --> 00:24:36,720
be in the same database act it's not in

545
00:24:34,500 --> 00:24:37,590
the same database the leased database

546
00:24:36,720 --> 00:24:40,409
back-end

547
00:24:37,590 --> 00:24:44,039
is storing all of your lease information

548
00:24:40,409 --> 00:24:47,130
out there on a remote database server is

549
00:24:44,039 --> 00:24:48,720
there a very high-speed database already

550
00:24:47,130 --> 00:24:50,549
available to you do you have an

551
00:24:48,720 --> 00:24:53,700
administrator that's ready to take over

552
00:24:50,549 --> 00:24:55,370
you know the the the receiving and and

553
00:24:53,700 --> 00:24:58,529
transmitting of all of that data and

554
00:24:55,370 --> 00:25:01,649
actually is there a need to actually put

555
00:24:58,529 --> 00:25:04,110
this in the database maybe you need to

556
00:25:01,650 --> 00:25:05,789
do things for law enforcement compliance

557
00:25:04,110 --> 00:25:07,620
maybe you need to you know be able to go

558
00:25:05,789 --> 00:25:11,460
back and look and see what address was

559
00:25:07,620 --> 00:25:13,260
given that is still available but if you

560
00:25:11,460 --> 00:25:15,720
want to go out and do queries against it

561
00:25:13,260 --> 00:25:19,129
yeah you might want to do a database but

562
00:25:15,720 --> 00:25:21,659
it's not a an absolute hard requirement

563
00:25:19,130 --> 00:25:24,659
so the key of migration assistant or

564
00:25:21,659 --> 00:25:29,070
Chioma it's a branch of the legacy is

565
00:25:24,659 --> 00:25:31,590
see DHCP server it takes as input the

566
00:25:29,070 --> 00:25:36,000
DHCP configuration file it provides as

567
00:25:31,590 --> 00:25:38,100
output the JSON key configuration sounds

568
00:25:36,000 --> 00:25:40,529
fantastic right and it is because it

569
00:25:38,100 --> 00:25:45,299
gives you a really good start on how to

570
00:25:40,529 --> 00:25:47,429
do your migration kia is a little bit

571
00:25:45,299 --> 00:25:49,830
different than the ISC dhcp server

572
00:25:47,429 --> 00:25:53,820
because it actually runs two separate

573
00:25:49,830 --> 00:25:55,678
daemons one for ipv4 and one for ipv6 so

574
00:25:53,820 --> 00:25:57,899
when you run qiyamah you're going to run

575
00:25:55,679 --> 00:25:59,700
it once to create the ipv6 version of

576
00:25:57,899 --> 00:26:05,279
your configuration and wants to create

577
00:25:59,700 --> 00:26:08,370
the ipv4 version it it recognizes when

578
00:26:05,279 --> 00:26:11,220
there is a known issue here is something

579
00:26:08,370 --> 00:26:15,090
in the ISC DHCP configuration that does

580
00:26:11,220 --> 00:26:17,460
not translate to kia and the neat thing

581
00:26:15,090 --> 00:26:20,549
about this is it is actually linked to

582
00:26:17,460 --> 00:26:23,669
the kia gitlab so when you run qiyamah

583
00:26:20,549 --> 00:26:26,789
it produces an output file and in that

584
00:26:23,669 --> 00:26:31,049
file it gives you the issue number that

585
00:26:26,789 --> 00:26:32,789
is associated with the given problem so

586
00:26:31,049 --> 00:26:34,860
convenient again converting these files

587
00:26:32,789 --> 00:26:36,330
not supported and I'll skip over that

588
00:26:34,860 --> 00:26:38,668
okay so the only time this is going to

589
00:26:36,330 --> 00:26:39,870
really matter other than the fact of

590
00:26:38,669 --> 00:26:41,120
every once in a while there'll be a

591
00:26:39,870 --> 00:26:43,489
little bit of a conflict between

592
00:26:41,120 --> 00:26:47,639
machines wanting to get the same address

593
00:26:43,490 --> 00:26:50,460
if you are using au mappy or if you've

594
00:26:47,640 --> 00:26:51,149
modified the leases file and put leases

595
00:26:50,460 --> 00:26:53,609
into

596
00:26:51,149 --> 00:26:56,099
that file manually that's the only

597
00:26:53,609 --> 00:27:00,299
things that are really going to they're

598
00:26:56,099 --> 00:27:04,189
really going to affect the lack of

599
00:27:00,299 --> 00:27:04,190
ability to move the leases fall forward

600
00:27:04,429 --> 00:27:10,529
ISC is looking at additional tools so

601
00:27:08,009 --> 00:27:13,289
the there are a couple of technical

602
00:27:10,529 --> 00:27:16,409
issues that you can't just slurp in the

603
00:27:13,289 --> 00:27:17,839
ISC DHCP can lease his file and spit out

604
00:27:16,409 --> 00:27:20,909
a configuration database

605
00:27:17,839 --> 00:27:23,820
Lakia a database but it's being worked

606
00:27:20,909 --> 00:27:27,359
on being looked at so if you want to

607
00:27:23,820 --> 00:27:29,879
look at Chioma you can go out to this

608
00:27:27,359 --> 00:27:31,619
URL and it's going to be in the slides

609
00:27:29,879 --> 00:27:36,988
I'm sure in the the ones that are

610
00:27:31,619 --> 00:27:39,178
available through through Nanog the wiki

611
00:27:36,989 --> 00:27:43,200
has information on how to run it very

612
00:27:39,179 --> 00:27:46,559
simple install script has man pages you

613
00:27:43,200 --> 00:27:50,330
know command line stuff man pages key

614
00:27:46,559 --> 00:27:52,889
Ahmad - 4i for input file / output file

615
00:27:50,330 --> 00:27:55,349
simple enough but there are a lot of

616
00:27:52,889 --> 00:27:58,559
assumptions so here's a very very simple

617
00:27:55,349 --> 00:28:00,689
is a DHCP configuration file we see one

618
00:27:58,559 --> 00:28:04,168
defined subnet we see one defined host

619
00:28:00,690 --> 00:28:07,200
and a couple of little options if I run

620
00:28:04,169 --> 00:28:10,200
qiyamah - four - I home cough - oh hum

621
00:28:07,200 --> 00:28:12,690
dakea it's going to produce a much more

622
00:28:10,200 --> 00:28:15,479
verbose file the input is sixteen lines

623
00:28:12,690 --> 00:28:17,399
the output is seventy and it's going to

624
00:28:15,479 --> 00:28:20,309
provide us with some samples of issues

625
00:28:17,399 --> 00:28:22,589
that are going to occur so when I look

626
00:28:20,309 --> 00:28:24,539
at the output file what I see is a

627
00:28:22,589 --> 00:28:26,489
comment and I did the colorization it's

628
00:28:24,539 --> 00:28:29,609
not actually colored we don't do that

629
00:28:26,489 --> 00:28:31,469
it's nice and plain text this

630
00:28:29,609 --> 00:28:34,349
configuration declares some subnets but

631
00:28:31,469 --> 00:28:40,049
has no interfaces config reference kia

632
00:28:34,349 --> 00:28:42,149
number 245 well kia doesn't take options

633
00:28:40,049 --> 00:28:45,029
on the command line as to which

634
00:28:42,149 --> 00:28:47,998
interfaces to listen to it's in the

635
00:28:45,029 --> 00:28:52,049
configuration file that's not provided

636
00:28:47,999 --> 00:28:53,429
in the ISE DHCP configuration file so if

637
00:28:52,049 --> 00:28:55,259
there's a note and it's going to be

638
00:28:53,429 --> 00:28:58,440
right at the top of the file that says

639
00:28:55,259 --> 00:29:01,200
you're going to need to add interfaces

640
00:28:58,440 --> 00:29:03,929
configurations so if I go out to get

641
00:29:01,200 --> 00:29:04,260
labs is C org projects Kia issues and

642
00:29:03,929 --> 00:29:06,150
then

643
00:29:04,260 --> 00:29:09,570
forty-five obviously referenced from

644
00:29:06,150 --> 00:29:12,360
that number I see a comment from one of

645
00:29:09,570 --> 00:29:14,250
the developers there's a real risk when

646
00:29:12,360 --> 00:29:16,350
converting an ISC DHCP server

647
00:29:14,250 --> 00:29:20,010
configuration to Kia to end up with a

648
00:29:16,350 --> 00:29:21,629
config currently without interfaces to

649
00:29:20,010 --> 00:29:23,910
add a wild-card interface does not

650
00:29:21,630 --> 00:29:25,650
really help as it is a difference in

651
00:29:23,910 --> 00:29:28,740
models there is nothing which can be

652
00:29:25,650 --> 00:29:30,990
done other than to be aware fair enough

653
00:29:28,740 --> 00:29:32,640
we've documented the fact that this

654
00:29:30,990 --> 00:29:34,550
isn't going to work directly you're

655
00:29:32,640 --> 00:29:38,610
going to need to make some changes

656
00:29:34,550 --> 00:29:39,960
moving on the configuration max and

657
00:29:38,610 --> 00:29:42,840
again if you see something with three

658
00:29:39,960 --> 00:29:46,500
slashes that's a comment introduced by

659
00:29:42,840 --> 00:29:48,570
the key OMA configuration tool max least

660
00:29:46,500 --> 00:29:50,430
time is not supported use default least

661
00:29:48,570 --> 00:29:53,970
time instead reference key and number

662
00:29:50,430 --> 00:29:56,610
221 well I always thought that you know

663
00:29:53,970 --> 00:29:58,260
men least I'm max least time and default

664
00:29:56,610 --> 00:30:01,110
least time that was just things that you

665
00:29:58,260 --> 00:30:03,660
always set in DHCP configuration so it

666
00:30:01,110 --> 00:30:05,399
turns out that when Kia was was being

667
00:30:03,660 --> 00:30:07,710
worked on initially that was not

668
00:30:05,400 --> 00:30:10,740
something that was able to be modified

669
00:30:07,710 --> 00:30:13,470
within the configuration so if we go out

670
00:30:10,740 --> 00:30:16,290
and look at the issue number 221 you see

671
00:30:13,470 --> 00:30:19,080
that is C DHCP uses three values max men

672
00:30:16,290 --> 00:30:22,980
and default whereas kia only uses valid

673
00:30:19,080 --> 00:30:25,860
lifetime the three values are actually

674
00:30:22,980 --> 00:30:31,080
in the kia code but the configuration

675
00:30:25,860 --> 00:30:33,870
file was never written to allow that to

676
00:30:31,080 --> 00:30:35,460
be modified you couldn't configure it so

677
00:30:33,870 --> 00:30:39,090
the configuration for sure didn't know

678
00:30:35,460 --> 00:30:40,560
how to do that the valid lifetime is a

679
00:30:39,090 --> 00:30:42,840
mandatory configuration protein

680
00:30:40,560 --> 00:30:45,030
parameter so it means that kia is rigid

681
00:30:42,840 --> 00:30:46,620
so even if you say I want this address

682
00:30:45,030 --> 00:30:48,450
you're not going to necessarily guard

683
00:30:46,620 --> 00:30:51,929
this timer you're not necessarily going

684
00:30:48,450 --> 00:30:56,820
to get it and I'm at a time how bad am i

685
00:30:51,930 --> 00:30:58,380
over time right on time okay so and this

686
00:30:56,820 --> 00:31:00,870
issue goes on to explain a couple of

687
00:30:58,380 --> 00:31:03,210
other timers because they're all

688
00:31:00,870 --> 00:31:05,340
interrelated so the neat thing about

689
00:31:03,210 --> 00:31:07,560
this is you can look at that and say oh

690
00:31:05,340 --> 00:31:10,620
okay that's fine I'll just use the

691
00:31:07,560 --> 00:31:11,909
default timer all's good if that's if

692
00:31:10,620 --> 00:31:15,570
that's fine with you that's great

693
00:31:11,910 --> 00:31:17,510
however if it isn't and you say you know

694
00:31:15,570 --> 00:31:19,939
that really stinks I

695
00:31:17,510 --> 00:31:22,520
really need to have that configuration

696
00:31:19,940 --> 00:31:25,550
option you're in get lab at this point

697
00:31:22,520 --> 00:31:28,910
so you can go in and see that issue and

698
00:31:25,550 --> 00:31:32,360
say okay I'm a consignment customer or

699
00:31:28,910 --> 00:31:35,000
I'm a user of Kia I think it's important

700
00:31:32,360 --> 00:31:36,949
and you can state your case so I got in

701
00:31:35,000 --> 00:31:38,120
there and said the use of Mac's lease

702
00:31:36,950 --> 00:31:39,800
timer or Amex

703
00:31:38,120 --> 00:31:41,750
yeah max Lee's time and middle-east time

704
00:31:39,800 --> 00:31:43,520
in addition to default least time is

705
00:31:41,750 --> 00:31:45,500
very common in existing configurations

706
00:31:43,520 --> 00:31:47,090
Kia at this point does not support these

707
00:31:45,500 --> 00:31:48,650
on behalf of customers I'd like to

708
00:31:47,090 --> 00:31:50,600
request that these options be supported

709
00:31:48,650 --> 00:31:52,250
or that a document be produced

710
00:31:50,600 --> 00:31:55,310
explaining how to get the same effect

711
00:31:52,250 --> 00:31:57,440
with the available options well nobody

712
00:31:55,310 --> 00:31:59,210
wanted to write a document so it's being

713
00:31:57,440 --> 00:32:02,810
fixed in the code we're now getting

714
00:31:59,210 --> 00:32:03,410
those other timers available moving

715
00:32:02,810 --> 00:32:05,690
along

716
00:32:03,410 --> 00:32:08,480
everything here we see a configuration

717
00:32:05,690 --> 00:32:10,490
that actually is correct we see a subnet

718
00:32:08,480 --> 00:32:12,470
created we see the options that are

719
00:32:10,490 --> 00:32:15,470
given to that subnet we see a

720
00:32:12,470 --> 00:32:17,390
reservation a hardware address and we

721
00:32:15,470 --> 00:32:20,750
see the information provided with it

722
00:32:17,390 --> 00:32:23,300
this configuration ran really smoothly

723
00:32:20,750 --> 00:32:26,410
through the migration tool however it

724
00:32:23,300 --> 00:32:29,149
was really really really simple I

725
00:32:26,410 --> 00:32:31,310
actually removed dynamic DNS

726
00:32:29,150 --> 00:32:34,220
configuration from the example just so

727
00:32:31,310 --> 00:32:37,520
that it would fit within my now

728
00:32:34,220 --> 00:32:39,380
exhausted time other things that are not

729
00:32:37,520 --> 00:32:41,450
going to work Oh map II configuration

730
00:32:39,380 --> 00:32:44,140
because Oh map e is not part of the DHCP

731
00:32:41,450 --> 00:32:47,270
standard it's part of is these add-ons

732
00:32:44,140 --> 00:32:49,610
the so it's going to tell you again in

733
00:32:47,270 --> 00:32:51,639
the comments it's an internal ICD HTTP

734
00:32:49,610 --> 00:32:54,919
feature this isn't gonna work

735
00:32:51,640 --> 00:32:57,770
delayed ACK the delayed action is not

736
00:32:54,920 --> 00:33:01,240
supported again you may need this and if

737
00:32:57,770 --> 00:33:04,040
you do go to you know the The Associated

738
00:33:01,240 --> 00:33:07,190
actually you could open a get ticket for

739
00:33:04,040 --> 00:33:09,920
this okay to open an issue up to update

740
00:33:07,190 --> 00:33:11,840
optimization faults update optimization

741
00:33:09,920 --> 00:33:16,430
is not supported because we follow RFC

742
00:33:11,840 --> 00:33:19,100
4702 earlier versions of ISC DHCP used

743
00:33:16,430 --> 00:33:24,620
kind of an interim mechanism now it's

744
00:33:19,100 --> 00:33:28,310
supporting the RFC and the worst thing

745
00:33:24,620 --> 00:33:30,590
and I'll stop after this here is

746
00:33:28,310 --> 00:33:33,860
something that you will find in

747
00:33:30,590 --> 00:33:36,199
a DHCP is a DHCP configuration if the

748
00:33:33,860 --> 00:33:37,939
substring of the option DHCP client

749
00:33:36,200 --> 00:33:40,220
configuration starting at the first byte

750
00:33:37,940 --> 00:33:43,909
going through the fourth byte is Ras

751
00:33:40,220 --> 00:33:45,200
space then we're gonna ignore booting so

752
00:33:43,909 --> 00:33:47,450
we're not going to allow this guy to

753
00:33:45,200 --> 00:33:50,240
boot if he is rat or not we're not gonna

754
00:33:47,450 --> 00:33:53,990
give him an address if he has the clan

755
00:33:50,240 --> 00:33:57,890
identifier Raz space this is what

756
00:33:53,990 --> 00:34:01,669
qiyamah produces this isn't what you're

757
00:33:57,890 --> 00:34:04,789
gonna want kia does have the constructs

758
00:34:01,669 --> 00:34:07,730
to be able to create those options and

759
00:34:04,789 --> 00:34:09,800
that configuration snippet but qiyamah

760
00:34:07,730 --> 00:34:11,780
doesn't know how to do it so you're

761
00:34:09,800 --> 00:34:15,260
gonna get something like this that shows

762
00:34:11,780 --> 00:34:17,060
that there is a conditional if this is

763
00:34:15,260 --> 00:34:19,490
equal to left a substring of that and

764
00:34:17,060 --> 00:34:21,429
this and then the other but you're gonna

765
00:34:19,489 --> 00:34:26,839
have to do that modification yourself

766
00:34:21,429 --> 00:34:29,000
and with that key ma or may not make

767
00:34:26,839 --> 00:34:31,580
sense for you at this time migrating is

768
00:34:29,000 --> 00:34:34,369
a huge undertaking even in a very small

769
00:34:31,580 --> 00:34:37,460
environment PMI is available and the

770
00:34:34,369 --> 00:34:39,740
how-to is in the wiki and I apologize

771
00:34:37,460 --> 00:34:42,679
for going over and I know that we're at

772
00:34:39,739 --> 00:34:44,029
break we're actually into break so have

773
00:34:42,679 --> 00:34:46,399
a wonderful afternoon thank you for

774
00:34:44,030 --> 00:34:48,260
attending Nanog and if you have any

775
00:34:46,399 --> 00:34:55,589
questions please see me after

776
00:34:48,260 --> 00:34:55,589
[Applause]

777
00:35:00,580 --> 00:35:02,640
you

