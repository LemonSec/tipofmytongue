1
00:00:00,890 --> 00:00:05,670
so<font color="#E5E5E5"> I'm</font><font color="#CCCCCC"> going to</font><font color="#E5E5E5"> talk about some dns</font>

2
00:00:03,600 --> 00:00:18,510
measurements that<font color="#E5E5E5"> I did it the absolute</font>

3
00:00:05,670 --> 00:00:23,039
server in<font color="#E5E5E5"> Palo</font><font color="#CCCCCC"> Alto yes does</font><font color="#E5E5E5"> that work</font>

4
00:00:18,510 --> 00:00:27,599
is that better<font color="#CCCCCC"> okay these measurements</font>

5
00:00:23,039 --> 00:00:29,970
were mostly done in<font color="#E5E5E5"> January of 2001 when</font>

6
00:00:27,599 --> 00:00:33,210
we were trying to collect data<font color="#E5E5E5"> and sneak</font>

7
00:00:29,970 --> 00:00:35,190
a a measurement paper into sigcomm we

8
00:00:33,210 --> 00:00:38,550
failed with that but<font color="#CCCCCC"> we</font><font color="#E5E5E5"> still</font><font color="#CCCCCC"> got some</font>

9
00:00:35,190 --> 00:00:41,218
cool data and so I'm going to tell you<font color="#CCCCCC"> a</font>

10
00:00:38,550 --> 00:00:43,709
<font color="#E5E5E5">little bit about DNS you guys all know</font>

11
00:00:41,219 --> 00:00:47,070
<font color="#CCCCCC">about DNS but I've</font><font color="#E5E5E5"> given this talk other</font>

12
00:00:43,710 --> 00:00:48,960
places where they don't we have 13 root

13
00:00:47,070 --> 00:00:53,250
servers and the roots are now serving

14
00:00:48,960 --> 00:00:56,579
only the true<font color="#E5E5E5"> top-level domains and you</font>

15
00:00:53,250 --> 00:00:59,789
<font color="#CCCCCC">NAT are a little bit of in adarand head</font>

16
00:00:56,579 --> 00:01:02,129
you they used to<font color="#E5E5E5"> serve comm net and org</font>

17
00:00:59,789 --> 00:01:06,299
and we're very<font color="#E5E5E5"> busy then those have been</font>

18
00:01:02,129 --> 00:01:09,509
separated out into separate servers the

19
00:01:06,299 --> 00:01:12,299
query rates at the roots it turns out

20
00:01:09,510 --> 00:01:16,080
that a root is the most<font color="#E5E5E5"> busy thanks to</font>

21
00:01:12,299 --> 00:01:19,290
microsoft their first query for a root

22
00:01:16,080 --> 00:01:22,020
server always goes to a never round

23
00:01:19,290 --> 00:01:25,290
robins never left any of the smarts and

24
00:01:22,020 --> 00:01:28,320
<font color="#CCCCCC">DNS that</font><font color="#E5E5E5"> help with load balancing get a</font>

25
00:01:25,290 --> 00:01:32,520
chance to kick in it's hardwired into

26
00:01:28,320 --> 00:01:34,798
their code at the<font color="#E5E5E5"> other root servers I</font>

27
00:01:32,520 --> 00:01:37,860
think<font color="#CCCCCC"> F is typical F is quite well</font>

28
00:01:34,799 --> 00:01:41,280
connected and and bind tries to go to

29
00:01:37,860 --> 00:01:44,700
the closest server from the point point

30
00:01:41,280 --> 00:01:47,130
of view of round trip time so the rates

31
00:01:44,700 --> 00:01:51,630
we see it<font color="#CCCCCC"> f or about</font><font color="#E5E5E5"> 5000 queries a</font>

32
00:01:47,130 --> 00:01:55,919
second during a<font color="#CCCCCC"> recent and not to recent</font>

33
00:01:51,630 --> 00:02:00,679
now das attack on a the query rate they

34
00:01:55,920 --> 00:02:03,630
saw was 38,000 queries a second that was

35
00:02:00,680 --> 00:02:06,030
sustained for a very short period of

36
00:02:03,630 --> 00:02:06,289
time it totally saturated the income and

37
00:02:06,030 --> 00:02:09,740
we

38
00:02:06,290 --> 00:02:17,180
and it may have been<font color="#E5E5E5"> someone testing an</font>

39
00:02:09,740 --> 00:02:19,010
attack for later use this slide sort of

40
00:02:17,180 --> 00:02:20,960
shows you the location of<font color="#CCCCCC"> the roots</font>

41
00:02:19,010 --> 00:02:23,019
there are a couple of errors in this but

42
00:02:20,960 --> 00:02:27,200
this was<font color="#CCCCCC"> the most readable version i had</font>

43
00:02:23,020 --> 00:02:29,300
<font color="#CCCCCC">London and Amsterdam are interchanged</font>

44
00:02:27,200 --> 00:02:32,660
and<font color="#CCCCCC"> we with respect to whether they have</font>

45
00:02:29,300 --> 00:02:35,000
a roof or<font color="#E5E5E5"> a GP LD server you'll notice</font>

46
00:02:32,660 --> 00:02:38,120
<font color="#CCCCCC">that six root servers are in the</font>

47
00:02:35,000 --> 00:02:40,130
Washington DC area that's not too well

48
00:02:38,120 --> 00:02:42,980
geographically dispersed around the

49
00:02:40,130 --> 00:02:49,400
world<font color="#E5E5E5"> only three groups servers are</font>

50
00:02:42,980 --> 00:02:51,470
outside the US I can they fix this but

51
00:02:49,400 --> 00:02:54,440
it<font color="#E5E5E5"> isn't really broken in the sense that</font>

52
00:02:51,470 --> 00:02:56,600
<font color="#E5E5E5">the root servers are not working well</font>

53
00:02:54,440 --> 00:03:00,200
the operators of<font color="#E5E5E5"> root servers are very</font>

54
00:02:56,600 --> 00:03:03,410
fruitful folks a root server basically

55
00:03:00,200 --> 00:03:05,450
never answers your<font color="#CCCCCC"> questions you can ask</font>

56
00:03:03,410 --> 00:03:07,730
for<font color="#E5E5E5"> the IP address of</font><font color="#CCCCCC"> something-or-other</font>

57
00:03:05,450 --> 00:03:10,910
<font color="#E5E5E5">yahoo.com and it's going to give you a</font>

58
00:03:07,730 --> 00:03:13,220
referral<font color="#E5E5E5"> to a server that knows the</font>

59
00:03:10,910 --> 00:03:18,049
address so root servers<font color="#E5E5E5"> typically answer</font>

60
00:03:13,220 --> 00:03:20,780
<font color="#E5E5E5">with referrals a referral just says</font>

61
00:03:18,050 --> 00:03:24,380
don't ask me I'm too busy go ask this

62
00:03:20,780 --> 00:03:28,010
other guy he<font color="#CCCCCC"> really knows this is the</font>

63
00:03:24,380 --> 00:03:30,590
query process and local configuration

64
00:03:28,010 --> 00:03:33,859
can change that a little bit locally can

65
00:03:30,590 --> 00:03:36,080
configure things to not go ask the<font color="#CCCCCC"> root</font>

66
00:03:33,860 --> 00:03:39,739
but ask a forward or at your local site

67
00:03:36,080 --> 00:03:42,680
first many sites do that because each

68
00:03:39,739 --> 00:03:46,130
time<font color="#CCCCCC"> a DNS query is made the local</font>

69
00:03:42,680 --> 00:03:49,280
server adds an entry to their cash and

70
00:03:46,130 --> 00:03:52,459
knows the answer which is saved for the

71
00:03:49,280 --> 00:03:56,000
amount<font color="#E5E5E5"> of time</font><font color="#CCCCCC"> that the TTL the record</font>

72
00:03:52,459 --> 00:03:59,120
specifies there's been a lot of talk

73
00:03:56,000 --> 00:04:02,840
lately of meddling with bind and making

74
00:03:59,120 --> 00:04:05,810
the TTL is very short and and having

75
00:04:02,840 --> 00:04:07,760
buying to interact with load balancing

76
00:04:05,810 --> 00:04:08,850
things and these all kind<font color="#E5E5E5"> of break</font>

77
00:04:07,760 --> 00:04:14,790
things

78
00:04:08,850 --> 00:04:20,420
don't do<font color="#CCCCCC"> that the measurements that we</font>

79
00:04:14,790 --> 00:04:23,870
did were at F F is a pair of<font color="#E5E5E5"> deck alphas</font>

80
00:04:20,420 --> 00:04:28,110
load-balanced a behind a cisco router

81
00:04:23,870 --> 00:04:30,390
running set for load balancing each is a

82
00:04:28,110 --> 00:04:32,730
dual processor machine but they're

83
00:04:30,390 --> 00:04:35,700
running bind<font color="#CCCCCC"> eight code which is single</font>

84
00:04:32,730 --> 00:04:37,230
threaded so one processor was for me to

85
00:04:35,700 --> 00:04:39,210
use for my measurements and the other

86
00:04:37,230 --> 00:04:43,770
processor continued to answer queries

87
00:04:39,210 --> 00:04:45,989
and do the right stuff we<font color="#CCCCCC"> used next</font><font color="#E5E5E5"> at</font>

88
00:04:43,770 --> 00:04:50,190
for a period of two weeks to get the

89
00:04:45,990 --> 00:04:53,460
query load and we use TCP dump to gather

90
00:04:50,190 --> 00:04:55,469
traces and then used a wonderful perl

91
00:04:53,460 --> 00:04:58,020
script that<font color="#E5E5E5"> paul</font><font color="#CCCCCC"> vixy wrote that</font>

92
00:04:55,470 --> 00:05:02,250
basically sorted all those queries into

93
00:04:58,020 --> 00:05:07,260
piles of bogus folks and labeled the

94
00:05:02,250 --> 00:05:10,770
bogus ones first the TCP dump line that

95
00:05:07,260 --> 00:05:14,010
i use gathered 600 bytes of data so<font color="#CCCCCC"> i</font>

96
00:05:10,770 --> 00:05:19,950
had the whole query typically<font color="#CCCCCC"> a 50 byte</font>

97
00:05:14,010 --> 00:05:22,380
packet this is the query rate and what

98
00:05:19,950 --> 00:05:24,900
<font color="#CCCCCC">I've plotted here is one of the efforts</font>

99
00:05:22,380 --> 00:05:28,680
on the top half and the other<font color="#E5E5E5"> one on the</font>

100
00:05:24,900 --> 00:05:30,870
bottom<font color="#CCCCCC"> in negative values so the load</font>

101
00:05:28,680 --> 00:05:33,660
balancing clearly works those curves are

102
00:05:30,870 --> 00:05:36,840
pretty symmetric you see some big spikes

103
00:05:33,660 --> 00:05:39,660
there and those are<font color="#CCCCCC"> times when I copied</font>

104
00:05:36,840 --> 00:05:42,479
the data file from one root server to

105
00:05:39,660 --> 00:05:45,570
the<font color="#E5E5E5"> other so it became input</font><font color="#CCCCCC"> for 1 and</font>

106
00:05:42,480 --> 00:05:48,060
output for<font color="#CCCCCC"> the other so the lines are</font>

107
00:05:45,570 --> 00:05:50,219
also a little<font color="#E5E5E5"> fuzzy and what I've tried</font>

108
00:05:48,060 --> 00:05:53,130
<font color="#CCCCCC">to</font><font color="#E5E5E5"> plot here and doesn't show very well</font>

109
00:05:50,220 --> 00:05:54,930
is the number of queries coming in and

110
00:05:53,130 --> 00:05:58,440
then the<font color="#CCCCCC"> number of answers</font><font color="#E5E5E5"> going back</font>

111
00:05:54,930 --> 00:06:01,710
out to see<font color="#CCCCCC"> if</font><font color="#E5E5E5"> F was dropping any queries</font>

112
00:05:58,440 --> 00:06:03,870
or to see exactly<font color="#E5E5E5"> what</font><font color="#CCCCCC"> was going on we</font>

113
00:06:01,710 --> 00:06:06,659
do see a difference in those two but

114
00:06:03,870 --> 00:06:09,720
it's not because<font color="#CCCCCC"> of F dropping queries</font>

115
00:06:06,660 --> 00:06:11,760
it's more because of someone asking for

116
00:06:09,720 --> 00:06:14,340
the host name associated with a net

117
00:06:11,760 --> 00:06:23,219
dress for example and something that's

118
00:06:14,340 --> 00:06:27,000
unanswerable we saw about let's see

119
00:06:23,220 --> 00:06:30,630
seven percent of the queries involving

120
00:06:27,000 --> 00:06:32,910
RFC 1918 space this is the private

121
00:06:30,630 --> 00:06:34,920
address space that gets that should

122
00:06:32,910 --> 00:06:37,470
never questions about that should<font color="#E5E5E5"> never</font>

123
00:06:34,920 --> 00:06:39,960
leave your local network<font color="#E5E5E5"> and yet they're</font>

124
00:06:37,470 --> 00:06:42,870
leaking out onto the<font color="#E5E5E5"> internet those</font>

125
00:06:39,960 --> 00:06:46,020
queries are normally filtered at the<font color="#CCCCCC"> f</font>

126
00:06:42,870 --> 00:06:48,840
<font color="#CCCCCC">root and never see the</font><font color="#E5E5E5"> DNS never sees</font>

127
00:06:46,020 --> 00:06:50,909
them but Paul Vitti turned off his

128
00:06:48,840 --> 00:06:53,700
filters for my measurements so we could

129
00:06:50,910 --> 00:06:55,680
see exactly<font color="#CCCCCC"> how bad they were and you</font>

130
00:06:53,700 --> 00:06:58,590
see about four percent of the queries

131
00:06:55,680 --> 00:07:01,530
arriving that just<font color="#CCCCCC"> absolutely can't</font><font color="#E5E5E5"> be</font>

132
00:06:58,590 --> 00:07:03,150
answered because they're from a 1918

133
00:07:01,530 --> 00:07:04,950
address in which case there's no route

134
00:07:03,150 --> 00:07:08,070
back<font color="#CCCCCC"> to them or they're asking a</font>

135
00:07:04,950 --> 00:07:10,979
question about 1918 address for which

136
00:07:08,070 --> 00:07:15,060
there's no answer<font color="#E5E5E5"> we also saw some other</font>

137
00:07:10,980 --> 00:07:19,080
kinds of<font color="#E5E5E5"> errors source port 0 is illegal</font>

138
00:07:15,060 --> 00:07:22,560
and<font color="#CCCCCC"> US West has assisted in who loves</font>

139
00:07:19,080 --> 00:07:25,109
source port 0 so about ninety percent of

140
00:07:22,560 --> 00:07:29,520
the source port 0 things that I see are

141
00:07:25,110 --> 00:07:31,830
from either<font color="#E5E5E5"> Qwest or us west</font><font color="#CCCCCC"> DNS is so</font>

142
00:07:29,520 --> 00:07:33,359
robust that they don't<font color="#CCCCCC"> notice that many</font>

143
00:07:31,830 --> 00:07:35,719
of their name servers are totally

144
00:07:33,360 --> 00:07:35,720
ineffective

145
00:07:39,710 --> 00:07:46,260
windows some implementations of<font color="#CCCCCC"> Windows</font>

146
00:07:42,900 --> 00:07:48,870
have a<font color="#CCCCCC"> bite order problem where</font><font color="#E5E5E5"> the DNS</font>

147
00:07:46,260 --> 00:07:51,510
query header has a integer field a

148
00:07:48,870 --> 00:07:53,940
16-bit field that tells<font color="#CCCCCC"> how many queries</font>

149
00:07:51,510 --> 00:07:56,909
are in the packet and the only<font color="#E5E5E5"> real</font>

150
00:07:53,940 --> 00:07:59,280
possible value there is a one but if<font color="#E5E5E5"> you</font>

151
00:07:56,910 --> 00:08:01,250
have a byte order problem and you didn't

152
00:07:59,280 --> 00:08:04,859
call<font color="#E5E5E5"> that function you're supposed to</font>

153
00:08:01,250 --> 00:08:08,070
one will show up<font color="#E5E5E5"> as 256 and then that</font>

154
00:08:04,860 --> 00:08:11,910
gets dropped because there aren't 256

155
00:08:08,070 --> 00:08:15,180
queries there the other big error thing

156
00:08:11,910 --> 00:08:18,720
that I see is people trying to

157
00:08:15,180 --> 00:08:22,139
dynamically update the root zone now

158
00:08:18,720 --> 00:08:24,590
it's fine to have your<font color="#E5E5E5"> DHCP server try</font>

159
00:08:22,139 --> 00:08:27,540
to dynamically update your name server

160
00:08:24,590 --> 00:08:30,210
but it's not<font color="#CCCCCC"> okay to go out</font><font color="#E5E5E5"> and try to</font>

161
00:08:27,540 --> 00:08:36,690
update calm and dot and things like that

162
00:08:30,210 --> 00:08:39,270
and guess who's guilty there Microsoft

163
00:08:36,690 --> 00:08:41,880
win 2k and we'll see exactly when it was

164
00:08:39,270 --> 00:08:46,439
released and how bad<font color="#CCCCCC"> it is and some</font>

165
00:08:41,880 --> 00:08:50,279
graphs of the syslog data if we<font color="#CCCCCC"> look at</font>

166
00:08:46,440 --> 00:08:52,440
<font color="#E5E5E5">the query types in this data for seeing</font>

167
00:08:50,279 --> 00:08:55,410
that most of the queries are for either

168
00:08:52,440 --> 00:08:57,810
a records or<font color="#E5E5E5"> pointer records there are a</font>

169
00:08:55,410 --> 00:09:00,930
lot of bogus queries for unknown types

170
00:08:57,810 --> 00:09:03,029
and they come from many<font color="#E5E5E5"> different</font>

171
00:09:00,930 --> 00:09:06,120
servers it's not just a<font color="#E5E5E5"> single server</font>

172
00:09:03,029 --> 00:09:09,110
<font color="#E5E5E5">that's broken</font><font color="#CCCCCC"> it's spread across the</font>

173
00:09:06,120 --> 00:09:09,110
<font color="#CCCCCC">realm</font>

174
00:09:10,020 --> 00:09:16,630
<font color="#CCCCCC">an unreadable right here is the</font>

175
00:09:13,710 --> 00:09:20,170
measurement regime I did I<font color="#CCCCCC"> started with</font>

176
00:09:16,630 --> 00:09:24,210
trying<font color="#E5E5E5"> to do an hour-long query I did 12</font>

177
00:09:20,170 --> 00:09:26,650
hour long ones I tried<font color="#E5E5E5"> to do a full day</font>

178
00:09:24,210 --> 00:09:29,620
and didn't<font color="#CCCCCC"> have enough disk space and</font>

179
00:09:26,650 --> 00:09:32,819
probably would have had trouble doing

180
00:09:29,620 --> 00:09:36,340
things like copying 35<font color="#E5E5E5"> gigabyte files</font>

181
00:09:32,820 --> 00:09:38,950
across the local<font color="#CCCCCC"> network it's a</font><font color="#E5E5E5"> little</font>

182
00:09:36,340 --> 00:09:40,660
scary to fill up a root servers disk and

183
00:09:38,950 --> 00:09:43,210
I only<font color="#E5E5E5"> have a login on this machine</font>

184
00:09:40,660 --> 00:09:47,500
because I am very careful and don't make

185
00:09:43,210 --> 00:09:49,210
<font color="#E5E5E5">that kind of mistake I tried to copy the</font>

186
00:09:47,500 --> 00:09:52,680
files off to another machine that had

187
00:09:49,210 --> 00:09:56,410
plenty of this but NFS told me so

188
00:09:52,680 --> 00:09:58,989
basically<font color="#CCCCCC"> i measured</font><font color="#E5E5E5"> short short samples</font>

189
00:09:56,410 --> 00:10:03,370
a million queries or<font color="#CCCCCC"> two million queries</font>

190
00:09:58,990 --> 00:10:05,770
and then the distribution of error types

191
00:10:03,370 --> 00:10:07,990
that<font color="#E5E5E5"> I saw was pretty representative so</font>

192
00:10:05,770 --> 00:10:11,800
I kind of them<font color="#CCCCCC"> hand-waving the claim</font>

193
00:10:07,990 --> 00:10:15,420
that<font color="#E5E5E5"> the short files are representative</font>

194
00:10:11,800 --> 00:10:19,420
and<font color="#E5E5E5"> I can use those to draw conclusions</font>

195
00:10:15,420 --> 00:10:22,630
this is the perl script and the output

196
00:10:19,420 --> 00:10:29,560
from<font color="#E5E5E5"> it that first line says that we</font>

197
00:10:22,630 --> 00:10:39,580
host at 20 to 20<font color="#CCCCCC"> 432 dot-111 asked for</font>

198
00:10:29,560 --> 00:10:44,410
the IP address of FS<font color="#CCCCCC"> Dai net 360 5326</font>

199
00:10:39,580 --> 00:10:48,880
times in two minutes something's<font color="#CCCCCC"> wrong</font>

200
00:10:44,410 --> 00:10:53,020
there for sure the worst offender were

201
00:10:48,880 --> 00:10:58,300
<font color="#E5E5E5">two</font><font color="#CCCCCC"> mill hosts they accounted in one</font>

202
00:10:53,020 --> 00:11:00,610
hour long trace they accounted for nine

203
00:10:58,300 --> 00:11:03,880
percent of the queries arriving at the

204
00:11:00,610 --> 00:11:07,600
effort<font color="#CCCCCC"> and they were asking the same</font>

205
00:11:03,880 --> 00:11:11,410
question over and over again the

206
00:11:07,600 --> 00:11:13,810
question<font color="#E5E5E5"> was about the host name</font>

207
00:11:11,410 --> 00:11:17,260
associated with a particular IP address

208
00:11:13,810 --> 00:11:20,530
and the roots answered very politely and

209
00:11:17,260 --> 00:11:23,740
gave them a referral to<font color="#CCCCCC"> the right server</font>

210
00:11:20,530 --> 00:11:27,370
to ask for<font color="#E5E5E5"> that question that particular</font>

211
00:11:23,740 --> 00:11:30,339
server was not was down and so they got

212
00:11:27,370 --> 00:11:32,440
reserved fail returned and then they

213
00:11:30,339 --> 00:11:35,560
asked<font color="#CCCCCC"> the question again in</font><font color="#E5E5E5"> this</font>

214
00:11:32,440 --> 00:11:38,200
particular instance<font color="#E5E5E5"> I noticed that they</font>

215
00:11:35,560 --> 00:11:41,079
were asking<font color="#CCCCCC"> the question twice or three</font>

216
00:11:38,200 --> 00:11:43,709
times with the same time stamp it turns

217
00:11:41,080 --> 00:11:46,600
out that the deck kernel has a

218
00:11:43,709 --> 00:11:51,339
millisecond time granularity unless you

219
00:11:46,600 --> 00:11:55,450
compile with special micro second option

220
00:11:51,339 --> 00:11:58,150
and so that's what<font color="#E5E5E5"> i was seeing within</font>

221
00:11:55,450 --> 00:12:00,700
the same millisecond these guys were

222
00:11:58,150 --> 00:12:03,280
asking<font color="#CCCCCC"> the</font><font color="#E5E5E5"> same question multiple times</font>

223
00:12:00,700 --> 00:12:05,890
we recompiled the colonel<font color="#E5E5E5"> and that</font>

224
00:12:03,280 --> 00:12:09,160
spread them out a little bit on the in

225
00:12:05,890 --> 00:12:13,810
the log file but not in<font color="#CCCCCC"> time these are</font>

226
00:12:09,160 --> 00:12:18,069
just<font color="#CCCCCC"> totally broken host I took</font><font color="#E5E5E5"> the top</font>

227
00:12:13,810 --> 00:12:20,589
I don't know I guess top 37 repeat

228
00:12:18,070 --> 00:12:22,510
offenders these are name service that

229
00:12:20,589 --> 00:12:24,010
always are asking the same bogus

230
00:12:22,510 --> 00:12:29,170
question over and over and over<font color="#E5E5E5"> again</font>

231
00:12:24,010 --> 00:12:31,630
and I rent n nap on them and about<font color="#E5E5E5"> a</font>

232
00:12:29,170 --> 00:12:35,410
third of them were down a third of them

233
00:12:31,630 --> 00:12:39,310
were went for Microsoft servers and the

234
00:12:35,410 --> 00:12:44,400
others found one solaris<font color="#E5E5E5"> box or five</font>

235
00:12:39,310 --> 00:12:44,400
solaris box isn't on IBM box

236
00:12:44,649 --> 00:12:51,279
who's doing<font color="#CCCCCC"> all these repeat queries if</font>

237
00:12:48,490 --> 00:12:54,430
we look<font color="#CCCCCC"> at the trace files the</font>

238
00:12:51,279 --> 00:12:57,309
<font color="#CCCCCC">four-minute trace within that four</font>

239
00:12:54,430 --> 00:13:00,579
minutes sixty-two percent of the queries

240
00:12:57,309 --> 00:13:03,670
are repeated same server asked in same

241
00:13:00,579 --> 00:13:08,829
question what happened to<font color="#E5E5E5"> caching and</font>

242
00:13:03,670 --> 00:13:10,899
ppl in a two-hour sample it's

243
00:13:08,829 --> 00:13:12,638
eighty-five percent now maybe in two

244
00:13:10,899 --> 00:13:18,779
hours you might need<font color="#CCCCCC"> to ask the same</font>

245
00:13:12,639 --> 00:13:18,779
<font color="#CCCCCC">question again but not in four minutes I</font>

246
00:13:19,470 --> 00:13:24,249
started to take a look<font color="#E5E5E5"> at the kind of</font>

247
00:13:21,910 --> 00:13:27,129
errors kind of packets that we're going

248
00:13:24,249 --> 00:13:30,369
they're going to the root servers and

249
00:13:27,129 --> 00:13:33,279
one thing that<font color="#CCCCCC"> I saw that seemed really</font>

250
00:13:30,369 --> 00:13:35,980
bad was that people were asking for an

251
00:13:33,279 --> 00:13:39,339
IP address and the<font color="#E5E5E5"> host name they were</font>

252
00:13:35,980 --> 00:13:41,139
giving was already an IP address so they

253
00:13:39,339 --> 00:13:44,920
were asking<font color="#E5E5E5"> for an IP address in</font>

254
00:13:41,139 --> 00:13:47,529
top-level domain 53 or 29 or whatever

255
00:13:44,920 --> 00:13:50,949
the last life of the IP address was and

256
00:13:47,529 --> 00:13:54,670
that goes<font color="#CCCCCC"> to the root</font><font color="#E5E5E5"> and the root</font>

257
00:13:50,949 --> 00:13:57,639
server was patiently answering no such

258
00:13:54,670 --> 00:13:59,439
domain and no one was cashing that and

259
00:13:57,639 --> 00:14:03,040
they were<font color="#E5E5E5"> asking</font><font color="#CCCCCC"> the same thing</font><font color="#E5E5E5"> again</font>

260
00:13:59,439 --> 00:14:06,550
and again this turns out to be a bug in

261
00:14:03,040 --> 00:14:09,429
the<font color="#E5E5E5"> Microsoft resolvers and it was fixed</font>

262
00:14:06,550 --> 00:14:12,429
for<font color="#CCCCCC"> win two or four yeah win2k in</font>

263
00:14:09,429 --> 00:14:16,300
service pack 2<font color="#E5E5E5"> I thought</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> I might be</font>

264
00:14:12,429 --> 00:14:19,689
able<font color="#E5E5E5"> to track</font><font color="#CCCCCC"> the adoption rates of</font>

265
00:14:16,300 --> 00:14:22,179
service pack 2 but it doesn't seem to<font color="#E5E5E5"> be</font>

266
00:14:19,689 --> 00:14:24,730
true<font color="#E5E5E5"> I saw it decreasing for a while but</font>

267
00:14:22,179 --> 00:14:26,949
now it's back up again fourteen percent

268
00:14:24,730 --> 00:14:30,819
of the queries arriving at the root for

269
00:14:26,949 --> 00:14:33,329
this bogus thing<font color="#E5E5E5"> Mac OS does it too and</font>

270
00:14:30,819 --> 00:14:36,069
<font color="#E5E5E5">Mac OS if you have mac OS there's a</font>

271
00:14:33,329 --> 00:14:38,949
demon called look up d which<font color="#CCCCCC"> is their</font>

272
00:14:36,069 --> 00:14:42,610
own solution they also run bind and<font color="#CCCCCC"> vine</font>

273
00:14:38,949 --> 00:14:44,258
does it right but if<font color="#E5E5E5"> you kill look up d</font>

274
00:14:42,610 --> 00:14:45,800
you'll have the same functionality and

275
00:14:44,259 --> 00:14:49,470
you want through it wrong

276
00:14:45,800 --> 00:14:53,399
this is a case where whoever wrote this

277
00:14:49,470 --> 00:14:55,829
software in the<font color="#E5E5E5"> wind to</font><font color="#CCCCCC"> Cape case it's a</font>

278
00:14:53,399 --> 00:14:58,290
missing else statement it's<font color="#E5E5E5"> something</font>

279
00:14:55,829 --> 00:15:01,199
like<font color="#CCCCCC"> if</font><font color="#E5E5E5"> I already know the answer tell</font>

280
00:14:58,290 --> 00:15:05,250
the user missing else go ask the network

281
00:15:01,199 --> 00:15:06,870
and they aren't even sending the network

282
00:15:05,250 --> 00:15:12,149
the proper question you're sending the

283
00:15:06,870 --> 00:15:14,010
network the answer it's very hard to get

284
00:15:12,149 --> 00:15:15,810
these things fixed when you find the

285
00:15:14,010 --> 00:15:18,930
<font color="#CCCCCC">right person within a company it gets</font>

286
00:15:15,810 --> 00:15:21,268
<font color="#E5E5E5">fixed right away but finding the right</font>

287
00:15:18,930 --> 00:15:23,430
person is hard and it's hard to<font color="#E5E5E5"> track</font>

288
00:15:21,269 --> 00:15:25,589
them down<font color="#E5E5E5"> because you don't see back to</font>

289
00:15:23,430 --> 00:15:28,260
the wind<font color="#CCCCCC"> suit a box that actually</font><font color="#E5E5E5"> asked</font>

290
00:15:25,589 --> 00:15:30,269
the question you see back<font color="#CCCCCC"> to</font><font color="#E5E5E5"> the campus</font>

291
00:15:28,260 --> 00:15:34,949
name<font color="#E5E5E5"> server the company name server</font>

292
00:15:30,269 --> 00:15:39,320
that's often<font color="#E5E5E5"> a unix box and it's just</font>

293
00:15:34,949 --> 00:15:39,319
passing along the query from the<font color="#E5E5E5"> client</font>

294
00:15:41,010 --> 00:15:47,580
I looked at the queries that<font color="#E5E5E5"> were</font>

295
00:15:44,550 --> 00:15:49,650
arriving that got no such domain now

296
00:15:47,580 --> 00:15:52,410
that happens if you make a typo<font color="#E5E5E5"> if you</font>

297
00:15:49,650 --> 00:15:54,810
<font color="#E5E5E5">spell of</font><font color="#CCCCCC"> the name of a top-level domain</font>

298
00:15:52,410 --> 00:15:57,800
wrong you're going to query the root and

299
00:15:54,810 --> 00:16:02,489
you're going<font color="#E5E5E5"> to get back no such torment</font>

300
00:15:57,800 --> 00:16:08,310
but these names are<font color="#E5E5E5"> not typos localhost</font>

301
00:16:02,490 --> 00:16:11,400
log hosts HP Network printers and then a

302
00:16:08,310 --> 00:16:14,640
whole bunch that are Microsoft Active

303
00:16:11,400 --> 00:16:17,160
Directory names Microsoft Active

304
00:16:14,640 --> 00:16:20,310
Directory stuff is leaking out onto the

305
00:16:17,160 --> 00:16:22,770
<font color="#E5E5E5">internet perhaps not through but not due</font>

306
00:16:20,310 --> 00:16:25,020
to bugs in the software but due to bugs

307
00:16:22,770 --> 00:16:30,000
in the documentation<font color="#E5E5E5"> or the defaults</font>

308
00:16:25,020 --> 00:16:31,890
when it gets installed and this is

309
00:16:30,000 --> 00:16:34,680
twenty percent of the queries at these

310
00:16:31,890 --> 00:16:40,080
root servers<font color="#E5E5E5"> now fourteen percent of</font>

311
00:16:34,680 --> 00:16:42,030
those bogus a queries you can kind of

312
00:16:40,080 --> 00:16:45,930
tell I<font color="#E5E5E5"> don't like Microsoft's dns</font>

313
00:16:42,030 --> 00:16:48,480
information when we<font color="#E5E5E5"> look at private</font>

314
00:16:45,930 --> 00:16:53,280
address space this set of the dresses

315
00:16:48,480 --> 00:16:57,090
net10<font color="#CCCCCC"> some 172 addresses and 192 dot 168</font>

316
00:16:53,280 --> 00:16:59,010
addresses are for internal use and have

317
00:16:57,090 --> 00:17:03,150
no meaning on the global<font color="#E5E5E5"> internet and</font>

318
00:16:59,010 --> 00:17:06,810
they should never sneak out how is this

319
00:17:03,150 --> 00:17:10,819
happening people do you split<font color="#CCCCCC"> DNS and</font>

320
00:17:06,810 --> 00:17:13,490
don't<font color="#E5E5E5"> have it configured quite right I</font>

321
00:17:10,819 --> 00:17:16,040
don't know how<font color="#CCCCCC"> it's</font><font color="#E5E5E5"> happened the other</font>

322
00:17:13,490 --> 00:17:18,280
than just miss configuration at local

323
00:17:16,040 --> 00:17:18,280
sites

324
00:17:20,559 --> 00:17:27,220
we have a wealth of information<font color="#CCCCCC"> in the</font>

325
00:17:23,439 --> 00:17:31,179
syslog data kept at F I have over two

326
00:17:27,220 --> 00:17:33,460
years worth of syslog files and the two

327
00:17:31,179 --> 00:17:40,470
kinds<font color="#E5E5E5"> of errors that I see consistently</font>

328
00:17:33,460 --> 00:17:40,470
our source port 0 packets and updates

329
00:17:40,980 --> 00:17:46,179
it's fine to update your local zone it's

330
00:17:44,080 --> 00:17:52,210
<font color="#E5E5E5">not so cool to try to update the root</font>

331
00:17:46,179 --> 00:17:54,789
zone this graph shows the counts<font color="#E5E5E5"> of</font>

332
00:17:52,210 --> 00:17:57,730
those packets the top graph that's kind

333
00:17:54,789 --> 00:18:00,309
of wiggling around up here and I guess

334
00:17:57,730 --> 00:18:04,840
the mouse goes this is the source port 0

335
00:18:00,309 --> 00:18:09,070
and then this bottom more subtle graph

336
00:18:04,840 --> 00:18:11,649
is<font color="#E5E5E5"> the dynamic updates applied to the</font>

337
00:18:09,070 --> 00:18:14,200
root zone so I would<font color="#E5E5E5"> say it was about</font>

338
00:18:11,649 --> 00:18:18,459
august of two thousand that<font color="#E5E5E5"> went</font><font color="#CCCCCC"> okay</font>

339
00:18:14,200 --> 00:18:21,940
<font color="#E5E5E5">got released and it got or no maybe over</font>

340
00:18:18,460 --> 00:18:25,110
here may probably<font color="#E5E5E5"> by August it got</font>

341
00:18:21,940 --> 00:18:30,450
adopted quite a bit and you can<font color="#E5E5E5"> see</font><font color="#CCCCCC"> the</font>

342
00:18:25,110 --> 00:18:35,139
level of update packets that are sent

343
00:18:30,450 --> 00:18:38,350
these spikes on the on the source port 0

344
00:18:35,139 --> 00:18:41,100
I didn't understand i looked up quite a

345
00:18:38,350 --> 00:18:45,039
few things and saw that it was often

346
00:18:41,100 --> 00:18:46,779
uswest request that was broken<font color="#CCCCCC"> I haven't</font>

347
00:18:45,039 --> 00:18:49,749
<font color="#CCCCCC">been able to find a system in there to</font>

348
00:18:46,779 --> 00:18:53,200
get<font color="#E5E5E5"> it fixed then I looked in detail at</font>

349
00:18:49,749 --> 00:18:55,809
<font color="#E5E5E5">a spike this is April of 2001 and this</font>

350
00:18:53,200 --> 00:18:58,149
is<font color="#E5E5E5"> just a huge number relative to the</font>

351
00:18:55,809 --> 00:19:02,740
<font color="#CCCCCC">background noise of that black line</font>

352
00:18:58,149 --> 00:19:06,340
that's way down there at the bottom this

353
00:19:02,740 --> 00:19:09,519
one turns out not to be an attack I

354
00:19:06,340 --> 00:19:12,399
thought at<font color="#CCCCCC"> first it was an attack but</font>

355
00:19:09,519 --> 00:19:15,940
it's not your<font color="#E5E5E5"> you're probably familiar</font>

356
00:19:12,399 --> 00:19:18,399
with the log files that say some sort of

357
00:19:15,940 --> 00:19:21,159
error message and then they say last

358
00:19:18,399 --> 00:19:22,689
<font color="#CCCCCC">meth is repeated two times or 10 times</font>

359
00:19:21,159 --> 00:19:26,239
or 30 times

360
00:19:22,690 --> 00:19:28,909
in this particular time this is<font color="#CCCCCC"> April</font>

361
00:19:26,239 --> 00:19:34,399
23rd we're seeing the last<font color="#E5E5E5"> message</font>

362
00:19:28,909 --> 00:19:36,820
repeated thousands of times a dig to

363
00:19:34,399 --> 00:19:40,699
trying to<font color="#E5E5E5"> find out who this host is</font>

364
00:19:36,820 --> 00:19:43,519
fails but<font color="#CCCCCC"> it returns no such domain but</font>

365
00:19:40,700 --> 00:19:46,850
<font color="#E5E5E5">it does point to AP Nick who is there</font>

366
00:19:43,519 --> 00:19:52,299
shows a Hong Kong is P and n map doesn't

367
00:19:46,850 --> 00:19:54,830
tell<font color="#CCCCCC"> me what</font><font color="#E5E5E5"> kind of system it was but</font>

368
00:19:52,299 --> 00:19:58,970
this kind<font color="#E5E5E5"> of thing</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> probably</font>

369
00:19:54,830 --> 00:20:02,359
responsible for those<font color="#E5E5E5"> Giants fights and</font>

370
00:19:58,970 --> 00:20:05,629
then the background level of source port

371
00:20:02,359 --> 00:20:08,989
0 is dismissed configuration bind allows

372
00:20:05,629 --> 00:20:12,158
you to specify the source port so that

373
00:20:08,989 --> 00:20:15,379
you can filter<font color="#E5E5E5"> with your firewall and</font>

374
00:20:12,159 --> 00:20:19,249
know that it's your<font color="#E5E5E5"> DNS server is</font><font color="#CCCCCC"> going</font>

375
00:20:15,379 --> 00:20:21,918
to fit most by default buying just uses

376
00:20:19,249 --> 00:20:24,320
a high number for testicles lots of

377
00:20:21,919 --> 00:20:27,590
people configure it to use port 53 is

378
00:20:24,320 --> 00:20:32,840
resourceful and sis admin's should never

379
00:20:27,590 --> 00:20:39,168
use<font color="#CCCCCC"> 0 but some do this table which</font>

380
00:20:32,840 --> 00:20:41,749
probably is unreadable is kind of

381
00:20:39,169 --> 00:20:44,749
summarizing all of the errors that<font color="#CCCCCC"> I saw</font>

382
00:20:41,749 --> 00:20:47,570
a couple<font color="#E5E5E5"> of columns to look at here is</font>

383
00:20:44,749 --> 00:20:50,450
this bogus a queries that I think I've

384
00:20:47,570 --> 00:20:54,769
<font color="#E5E5E5">gotten fixed so I should see</font><font color="#CCCCCC"> that column</font>

385
00:20:50,450 --> 00:20:57,379
<font color="#E5E5E5">root of decreasing this is the bogus</font>

386
00:20:54,769 --> 00:21:00,109
<font color="#CCCCCC">tlds and it's well above twenty percent</font>

387
00:20:57,379 --> 00:21:02,389
so this<font color="#CCCCCC"> is a</font><font color="#E5E5E5"> combination of these bogus</font>

388
00:21:00,109 --> 00:21:06,350
a queries and Microsoft Active Directory

389
00:21:02,389 --> 00:21:08,149
names leaking out onto the internet now

390
00:21:06,350 --> 00:21:10,340
we<font color="#E5E5E5"> talked about making</font><font color="#CCCCCC"> the root servers</font>

391
00:21:08,149 --> 00:21:12,529
faster but when<font color="#CCCCCC"> twenty-five percent of</font>

392
00:21:10,340 --> 00:21:16,340
their load is just bogus things from

393
00:21:12,529 --> 00:21:19,909
broken clients maybe we should fix the

394
00:21:16,340 --> 00:21:23,899
broken clients this last column is

395
00:21:19,909 --> 00:21:27,950
documenting how often or what percentage

396
00:21:23,899 --> 00:21:31,459
of<font color="#CCCCCC"> the queries were the same name server</font>

397
00:21:27,950 --> 00:21:32,460
asking the same<font color="#CCCCCC"> question more than once</font>

398
00:21:31,460 --> 00:21:35,200
a minute

399
00:21:32,460 --> 00:21:37,360
which seems to<font color="#E5E5E5"> me like it shouldn't</font>

400
00:21:35,200 --> 00:21:40,930
really happen if caching is working and

401
00:21:37,360 --> 00:21:43,810
ppl<font color="#CCCCCC"> czar set to sensible values and we</font>

402
00:21:40,930 --> 00:21:46,180
see in longer traces its fifty percent

403
00:21:43,810 --> 00:21:48,730
and in shorter traces<font color="#E5E5E5"> it's more like</font>

404
00:21:46,180 --> 00:21:54,250
twenty five percent down toward the

405
00:21:48,730 --> 00:21:58,350
bottom<font color="#CCCCCC"> I have a couple</font><font color="#E5E5E5"> of more recent</font>

406
00:21:54,250 --> 00:22:01,030
values<font color="#E5E5E5"> March july-september 11 and</font>

407
00:21:58,350 --> 00:22:03,370
november and i did a measurement this

408
00:22:01,030 --> 00:22:06,220
morning I thought<font color="#E5E5E5"> from these numbers</font>

409
00:22:03,370 --> 00:22:10,300
that I was seeing service pack to get

410
00:22:06,220 --> 00:22:14,110
installed and seeing the number of<font color="#E5E5E5"> focus</font>

411
00:22:10,300 --> 00:22:17,290
a queries go down from the high 14 to 13

412
00:22:14,110 --> 00:22:20,260
and<font color="#CCCCCC"> a half to 13 but today's data showed</font>

413
00:22:17,290 --> 00:22:24,780
it back up at 14.8 so<font color="#E5E5E5"> I don't have</font>

414
00:22:20,260 --> 00:22:24,780
enough<font color="#CCCCCC"> data to draw conclusions there</font>

415
00:22:25,710 --> 00:22:30,640
during the<font color="#E5E5E5"> measurement period there were</font>

416
00:22:28,180 --> 00:22:34,180
two kinds of attacks on the<font color="#CCCCCC"> effort</font><font color="#E5E5E5"> that</font>

417
00:22:30,640 --> 00:22:37,710
<font color="#E5E5E5">I saw one was using the root servers as</font>

418
00:22:34,180 --> 00:22:43,150
a reflector and targeting a register.com

419
00:22:37,710 --> 00:22:47,590
client so the source<font color="#E5E5E5"> address was forged</font>

420
00:22:43,150 --> 00:22:51,250
and they were<font color="#E5E5E5"> just asking for</font><font color="#CCCCCC"> the</font>

421
00:22:47,590 --> 00:22:55,480
<font color="#E5E5E5">address of the roof servers individually</font>

422
00:22:51,250 --> 00:22:59,410
and doing it very often the other one

423
00:22:55,480 --> 00:23:02,800
that I saw of is more interesting

424
00:22:59,410 --> 00:23:06,190
perhaps this is someone just trolling

425
00:23:02,800 --> 00:23:07,990
for host names I assume they're asking

426
00:23:06,190 --> 00:23:11,440
<font color="#CCCCCC">for the reverse records so they want a</font>

427
00:23:07,990 --> 00:23:14,680
hostname the 54 is a parameter I saw

428
00:23:11,440 --> 00:23:17,740
other instances where it was another

429
00:23:14,680 --> 00:23:21,040
value the person doing this or writing

430
00:23:17,740 --> 00:23:23,680
the software didn't understand that IP

431
00:23:21,040 --> 00:23:26,530
addresses in pointer queries get

432
00:23:23,680 --> 00:23:29,440
reversed and so they're changing the

433
00:23:26,530 --> 00:23:31,780
last bite of the IP address when

434
00:23:29,440 --> 00:23:33,460
probably<font color="#CCCCCC"> they intended to change the</font>

435
00:23:31,780 --> 00:23:36,460
first bite and be able to<font color="#E5E5E5"> scan a</font>

436
00:23:33,460 --> 00:23:40,540
particular<font color="#CCCCCC"> Network these are randomly</font>

437
00:23:36,460 --> 00:23:45,010
generated this increased the

438
00:23:40,540 --> 00:23:47,950
query load like this there was a day

439
00:23:45,010 --> 00:23:51,970
when<font color="#CCCCCC"> Microsoft broke their dns totally</font>

440
00:23:47,950 --> 00:23:56,470
<font color="#CCCCCC">january 24th i think it was they had</font>

441
00:23:51,970 --> 00:23:59,140
their dns very robustly<font color="#CCCCCC"> devon designed</font>

442
00:23:56,470 --> 00:24:03,730
they put all of their servers behind the

443
00:23:59,140 --> 00:24:07,870
same router on a single subnet which<font color="#E5E5E5"> dns</font>

444
00:24:03,730 --> 00:24:13,090
101 tells you<font color="#E5E5E5"> never to do they had their</font>

445
00:24:07,870 --> 00:24:16,270
TTL set to<font color="#E5E5E5"> two hours and so after two</font>

446
00:24:13,090 --> 00:24:20,439
hours they started but what happened is

447
00:24:16,270 --> 00:24:22,710
the router got misconfigured and so it

448
00:24:20,440 --> 00:24:24,880
<font color="#E5E5E5">was blocking traffic to their servers</font>

449
00:24:22,710 --> 00:24:29,080
traffic could not get through to their

450
00:24:24,880 --> 00:24:31,000
servers as the TTL time doubt in

451
00:24:29,080 --> 00:24:33,820
people's caches they were coming to the

452
00:24:31,000 --> 00:24:36,160
roof servers and the<font color="#CCCCCC"> Microsoft we reload</font>

453
00:24:33,820 --> 00:24:39,600
for just microsoft names not just

454
00:24:36,160 --> 00:24:44,320
microsoft com that msn and and all the

455
00:24:39,600 --> 00:24:47,350
<font color="#E5E5E5">microsoft properties became</font><font color="#CCCCCC"> twenty-five</font>

456
00:24:44,320 --> 00:24:50,530
<font color="#CCCCCC">percent of the load at act during</font><font color="#E5E5E5"> that</font>

457
00:24:47,350 --> 00:24:53,469
<font color="#CCCCCC">time while their dns was broken so a</font>

458
00:24:50,530 --> 00:24:57,639
single highly visible sight can affect

459
00:24:53,470 --> 00:25:02,800
<font color="#CCCCCC">the infrastructure I looked also on</font>

460
00:24:57,640 --> 00:25:05,320
September 11th at CNN to see how they

461
00:25:02,800 --> 00:25:07,870
were affected and how they affected the

462
00:25:05,320 --> 00:25:14,260
roots the query load was higher than

463
00:25:07,870 --> 00:25:17,379
normal for CNN com but nowhere near not

464
00:25:14,260 --> 00:25:19,330
even a percent not negligible e higher

465
00:25:17,380 --> 00:25:22,090
so you could see that people<font color="#E5E5E5"> were going</font>

466
00:25:19,330 --> 00:25:24,010
from telephones which didn't work into

467
00:25:22,090 --> 00:25:26,800
New York City to trying to<font color="#E5E5E5"> find out</font>

468
00:25:24,010 --> 00:25:31,650
information<font color="#E5E5E5"> on the net but they had a</font>

469
00:25:26,800 --> 00:25:35,560
robust<font color="#E5E5E5"> DNS design and sensible</font><font color="#CCCCCC"> ttls and</font>

470
00:25:31,650 --> 00:25:37,300
their servers failed from load they just

471
00:25:35,560 --> 00:25:40,690
melted down the pages were way too

472
00:25:37,300 --> 00:25:42,850
complicated and things and it took them

473
00:25:40,690 --> 00:25:49,050
a couple of<font color="#E5E5E5"> hours to recover well DNS</font>

474
00:25:42,850 --> 00:25:49,050
was never the culprit there or guilty

475
00:25:49,190 --> 00:25:58,710
so in<font color="#CCCCCC"> conclusion we have lots of bogus</font>

476
00:25:54,480 --> 00:26:01,190
queries out there I guess the most

477
00:25:58,710 --> 00:26:05,190
disturbing are these bogus a queries

478
00:26:01,190 --> 00:26:07,799
which is just<font color="#E5E5E5"> a software error it's very</font>

479
00:26:05,190 --> 00:26:10,080
hard to get<font color="#E5E5E5"> everything fixed I can't</font>

480
00:26:07,799 --> 00:26:13,530
find if any of you know who is

481
00:26:10,080 --> 00:26:17,699
responsible for DNS at Microsoft on on

482
00:26:13,530 --> 00:26:20,160
things like<font color="#CCCCCC"> win NT and win 95 and 98 I</font>

483
00:26:17,700 --> 00:26:23,400
need some contacting for their I have

484
00:26:20,160 --> 00:26:25,740
the right person for win2k and hopefully

485
00:26:23,400 --> 00:26:28,049
the same<font color="#CCCCCC"> bug did not appear in Linux be</font>

486
00:26:25,740 --> 00:26:31,049
maybe a kid that's why it's<font color="#E5E5E5"> going back</font>

487
00:26:28,049 --> 00:26:37,320
up<font color="#E5E5E5"> at him and I've gotten</font><font color="#CCCCCC"> to them to the</font>

488
00:26:31,049 --> 00:26:41,190
mac people- caching could really help

489
00:26:37,320 --> 00:26:44,899
and<font color="#CCCCCC"> microsoft i think in winter k is the</font>

490
00:26:41,190 --> 00:26:47,730
first implementation of negative caching

491
00:26:44,900 --> 00:26:52,200
microsoft also totally doesn't follow

492
00:26:47,730 --> 00:26:54,660
the rules they do a query<font color="#E5E5E5"> to the a root</font>

493
00:26:52,200 --> 00:26:58,350
and if it isn't answering within a

494
00:26:54,660 --> 00:27:04,169
second or so they do parallel queries to

495
00:26:58,350 --> 00:27:06,330
all the<font color="#E5E5E5"> others simultaneously so if any</font>

496
00:27:04,169 --> 00:27:10,500
of you<font color="#E5E5E5"> would need a job in</font><font color="#CCCCCC"> DNS go work</font>

497
00:27:06,330 --> 00:27:13,980
for microsoft fix it one of the things

498
00:27:10,500 --> 00:27:17,790
<font color="#E5E5E5">that surprised me it and</font><font color="#CCCCCC"> i understand it</font>

499
00:27:13,980 --> 00:27:20,280
is this the testing you test if your

500
00:27:17,790 --> 00:27:23,309
code works right in the positive sense<font color="#E5E5E5"> i</font>

501
00:27:20,280 --> 00:27:25,860
do a query did<font color="#E5E5E5"> i get the answer back but</font>

502
00:27:23,309 --> 00:27:29,850
you never test to see if you put other

503
00:27:25,860 --> 00:27:31,168
junk on the network and that kind of

504
00:27:29,850 --> 00:27:33,030
testing is not taught in our

505
00:27:31,169 --> 00:27:35,340
universities<font color="#CCCCCC"> i know i never taught it in</font>

506
00:27:33,030 --> 00:27:39,540
my classes and I was pretty anal about

507
00:27:35,340 --> 00:27:41,820
teaching testing so i<font color="#CCCCCC"> think it is it the</font>

508
00:27:39,540 --> 00:27:44,760
idea of<font color="#E5E5E5"> testing your software for</font>

509
00:27:41,820 --> 00:27:46,320
negative behavior as well<font color="#CCCCCC"> as positive</font>

510
00:27:44,760 --> 00:27:48,150
behavior you know what it's supposed to

511
00:27:46,320 --> 00:27:50,189
do make sure<font color="#E5E5E5"> it does what it's supposed</font>

512
00:27:48,150 --> 00:27:53,270
to do but also make sure<font color="#CCCCCC"> it doesn't do</font>

513
00:27:50,190 --> 00:27:53,270
what it isn't supposed to

514
00:27:55,570 --> 00:27:58,570
ok

515
00:28:01,990 --> 00:28:05,370
did i send<font color="#E5E5E5"> some</font><font color="#CCCCCC"> time</font>

516
00:28:05,389 --> 00:28:13,789
<font color="#E5E5E5">I have</font><font color="#CCCCCC"> also much a question as a</font>

517
00:28:07,639 --> 00:28:17,449
clarification so<font color="#CCCCCC"> looks so</font><font color="#E5E5E5"> that everyone</font>

518
00:28:13,789 --> 00:28:19,879
<font color="#E5E5E5">knows Evie is a member of is used board</font>

519
00:28:17,450 --> 00:28:29,899
of directors she can have an account on

520
00:28:19,879 --> 00:28:31,908
<font color="#E5E5E5">f even if she fills the disk I had a</font>

521
00:28:29,899 --> 00:28:33,379
comment<font color="#CCCCCC"> not really a question since</font>

522
00:28:31,909 --> 00:28:37,039
everyone seems to be involved<font color="#E5E5E5"> in this</font>

523
00:28:33,379 --> 00:28:39,139
<font color="#CCCCCC">Microsoft mouth test which is that when</font>

524
00:28:37,039 --> 00:28:40,820
i arrived at<font color="#CCCCCC"> akamai i was told that i</font>

525
00:28:39,139 --> 00:28:43,609
could have the job if i could solve the

526
00:28:40,820 --> 00:28:45,259
<font color="#E5E5E5">gomez syndrome the goodness syndrome was</font>

527
00:28:43,609 --> 00:28:47,749
the Gomes who was at<font color="#CCCCCC"> the time</font><font color="#E5E5E5"> not a</font>

528
00:28:45,259 --> 00:28:50,450
customer that<font color="#CCCCCC"> we are now was coming to</font>

529
00:28:47,749 --> 00:28:51,889
akamai servers people who wanted to<font color="#E5E5E5"> get</font>

530
00:28:50,450 --> 00:28:53,539
bill knows content were coming to off of

531
00:28:51,889 --> 00:28:57,139
my servers and people said you evil

532
00:28:53,539 --> 00:28:59,179
people are stealing the dns and so we

533
00:28:57,139 --> 00:29:01,488
actually<font color="#E5E5E5"> get tens of millions of</font>

534
00:28:59,179 --> 00:29:03,229
requests per day the HTTP level against

535
00:29:01,489 --> 00:29:05,539
their servers that have nothing to do

536
00:29:03,229 --> 00:29:07,279
with<font color="#E5E5E5"> akamai customers and after about a</font>

537
00:29:05,539 --> 00:29:09,049
year we trace this down to a<font color="#CCCCCC"> microsoft</font>

538
00:29:07,279 --> 00:29:11,659
bug where they have cash corruption and

539
00:29:09,049 --> 00:29:13,129
how they store their dns entries but

540
00:29:11,659 --> 00:29:16,459
it's actually quite interesting<font color="#CCCCCC"> and we</font>

541
00:29:13,129 --> 00:29:18,139
have this very innocuous web errors calm

542
00:29:16,459 --> 00:29:19,909
when people get pointed to so they don't

543
00:29:18,139 --> 00:29:22,609
say you evil people are stealing our dms

544
00:29:19,909 --> 00:29:24,499
but we've had<font color="#E5E5E5"> great difficulty getting</font>

545
00:29:22,609 --> 00:29:26,869
anyone to even<font color="#E5E5E5"> acknowledge this as a</font>

546
00:29:24,499 --> 00:29:29,419
problem that needs<font color="#E5E5E5"> to be fixed even</font>

547
00:29:26,869 --> 00:29:33,439
though<font color="#E5E5E5"> Microsoft is a customer so we</font>

548
00:29:29,419 --> 00:29:35,779
found us to be minimal I used my ICS

549
00:29:33,440 --> 00:29:39,039
<font color="#E5E5E5">contacts to get to Microsoft engineers</font>

550
00:29:35,779 --> 00:29:42,950
and got very<font color="#E5E5E5"> good response on fixing the</font>

551
00:29:39,039 --> 00:29:45,408
<font color="#E5E5E5">winds UK resolve our problem so I think</font>

552
00:29:42,950 --> 00:29:48,070
<font color="#E5E5E5">if you can get</font><font color="#CCCCCC"> to the right people it</font>

553
00:29:45,409 --> 00:29:48,070
does work

