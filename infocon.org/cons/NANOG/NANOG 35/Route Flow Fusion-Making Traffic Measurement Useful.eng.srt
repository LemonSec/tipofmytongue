1
00:00:01,429 --> 00:00:08,459
hi I'm van<font color="#CCCCCC"> jacobson from package design</font>

2
00:00:04,890 --> 00:00:10,889
<font color="#E5E5E5">I am giving this talk on behalf of Bruce</font>

3
00:00:08,460 --> 00:00:15,839
<font color="#CCCCCC">MA and hub o you who did the actual work</font>

4
00:00:10,889 --> 00:00:18,689
and although I've talked it several

5
00:00:15,839 --> 00:00:21,390
times before usually have to be drunk to

6
00:00:18,690 --> 00:00:23,550
give a talk this<font color="#E5E5E5"> time I forgot to get</font>

7
00:00:21,390 --> 00:00:30,119
the<font color="#E5E5E5"> key</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> the minibar so I'm sober and</font>

8
00:00:23,550 --> 00:00:33,540
I apologize for that the basis of this

9
00:00:30,119 --> 00:00:36,420
talk started about five years ago when

10
00:00:33,540 --> 00:00:38,550
we first warrant packet design a few

11
00:00:36,420 --> 00:00:40,950
<font color="#E5E5E5">weeks</font><font color="#CCCCCC"> after we started the company Randy</font>

12
00:00:38,550 --> 00:00:42,800
<font color="#E5E5E5">Bush came by to chat we told him all</font>

13
00:00:40,950 --> 00:00:46,530
these<font color="#E5E5E5"> wonderful things were going to do</font>

14
00:00:42,800 --> 00:00:48,780
for traffic management and controlling

15
00:00:46,530 --> 00:00:51,840
IP networks and he basically said<font color="#CCCCCC"> that</font>

16
00:00:48,780 --> 00:00:54,870
we were stupid that he didn't have<font color="#E5E5E5"> any</font>

17
00:00:51,840 --> 00:00:56,940
trouble controlling the traffic in an IP

18
00:00:54,870 --> 00:00:58,589
network once he knew where it was he

19
00:00:56,940 --> 00:01:00,269
could<font color="#CCCCCC"> make</font><font color="#E5E5E5"> it go exactly where he wanted</font>

20
00:00:58,590 --> 00:01:02,160
it to go but he didn't<font color="#CCCCCC"> know where it was</font>

21
00:01:00,270 --> 00:01:04,199
he couldn't<font color="#E5E5E5"> see where the bits were in</font>

22
00:01:02,160 --> 00:01:06,000
<font color="#E5E5E5">his network it was really hard to</font>

23
00:01:04,199 --> 00:01:08,158
control something that you couldn't see

24
00:01:06,000 --> 00:01:10,409
and he suggested<font color="#E5E5E5"> that if we actually</font>

25
00:01:08,159 --> 00:01:13,080
<font color="#E5E5E5">want you to do something useful we</font>

26
00:01:10,409 --> 00:01:14,640
should go out<font color="#E5E5E5"> and make a system that</font>

27
00:01:13,080 --> 00:01:16,679
would let you see the bits inside an

28
00:01:14,640 --> 00:01:20,220
network then people would be able<font color="#E5E5E5"> to</font>

29
00:01:16,680 --> 00:01:22,920
control it so it's now five years later

30
00:01:20,220 --> 00:01:26,039
where it's giving to the point where you

31
00:01:22,920 --> 00:01:27,750
can actually do that<font color="#E5E5E5"> one reason it took</font>

32
00:01:26,040 --> 00:01:30,750
so long as it were slow another reason

33
00:01:27,750 --> 00:01:35,310
is the<font color="#CCCCCC"> technology wasn't really there up</font>

34
00:01:30,750 --> 00:01:37,799
until<font color="#E5E5E5"> just roughly the last year turning</font>

35
00:01:35,310 --> 00:01:39,600
on net<font color="#E5E5E5"> flow</font><font color="#CCCCCC"> and your router was the</font>

36
00:01:37,799 --> 00:01:41,430
equivalent of turning off your router it

37
00:01:39,600 --> 00:01:42,839
would slow down to a crawl and so you

38
00:01:41,430 --> 00:01:44,970
weren't likely to get a lot of traffic

39
00:01:42,840 --> 00:01:47,340
data even if you were getting<font color="#CCCCCC"> the</font>

40
00:01:44,970 --> 00:01:48,539
NetFlow data out of the router there was

41
00:01:47,340 --> 00:01:51,540
nothing<font color="#CCCCCC"> that could sink it you're</font>

42
00:01:48,540 --> 00:01:54,119
getting gigabytes of data new terabytes

43
00:01:51,540 --> 00:01:56,430
from an ISP and you didn't have<font color="#E5E5E5"> enough</font>

44
00:01:54,119 --> 00:01:59,490
to space or enough processor power to

45
00:01:56,430 --> 00:02:02,580
crunch it that's all changed right<font color="#E5E5E5"> disks</font>

46
00:01:59,490 --> 00:02:04,899
are pennies a gigabyte

47
00:02:02,580 --> 00:02:08,949
processors running three gigahertz you

48
00:02:04,900 --> 00:02:11,470
can easily crunch the data and at least

49
00:02:08,949 --> 00:02:16,329
<font color="#E5E5E5">today is peas are starting to routinely</font>

50
00:02:11,470 --> 00:02:17,950
get flow data can the current state of

51
00:02:16,330 --> 00:02:20,100
the<font color="#E5E5E5"> art what you do with</font><font color="#CCCCCC"> that data is</font>

52
00:02:17,950 --> 00:02:23,290
you turn it<font color="#E5E5E5"> into a traffic matrix and</font>

53
00:02:20,100 --> 00:02:25,960
well there used to be say whole<font color="#E5E5E5"> teams at</font>

54
00:02:23,290 --> 00:02:27,400
you unit that would take<font color="#E5E5E5"> the data from</font>

55
00:02:25,960 --> 00:02:29,020
the previous month<font color="#E5E5E5"> and turn it into a</font>

56
00:02:27,400 --> 00:02:31,090
traffic matrix so they could do traffic

57
00:02:29,020 --> 00:02:35,050
planning now you don't do anything you

58
00:02:31,090 --> 00:02:37,120
hook up a box it's<font color="#CCCCCC"> miss your vgp it</font>

59
00:02:35,050 --> 00:02:39,220
grabs a net flow data and based on what

60
00:02:37,120 --> 00:02:40,900
it finds in the<font color="#CCCCCC"> BGP it knows how to</font>

61
00:02:39,220 --> 00:02:44,140
build a traffic matrix out of that net

62
00:02:40,900 --> 00:02:46,180
flow data and things are kind<font color="#E5E5E5"> of mature</font>

63
00:02:44,140 --> 00:02:47,709
enough so that<font color="#E5E5E5"> you don't need to roll</font>

64
00:02:46,180 --> 00:02:49,390
your<font color="#E5E5E5"> own on this anymore you can</font>

65
00:02:47,710 --> 00:02:56,230
actually buy boxes that do this off the

66
00:02:49,390 --> 00:02:58,480
<font color="#E5E5E5">shelf so here's a traffic matrix it was</font>

67
00:02:56,230 --> 00:03:01,200
generated automatically by<font color="#E5E5E5"> side data</font>

68
00:02:58,480 --> 00:03:03,730
from scenic which is the<font color="#E5E5E5"> California</font>

69
00:03:01,200 --> 00:03:07,149
<font color="#E5E5E5">educational</font><font color="#CCCCCC"> network it handles all of</font>

70
00:03:03,730 --> 00:03:08,980
the UC campuses all of the California

71
00:03:07,150 --> 00:03:10,989
<font color="#CCCCCC">State University system and all of the K</font>

72
00:03:08,980 --> 00:03:12,790
through 12 system it's actually<font color="#E5E5E5"> three</font>

73
00:03:10,989 --> 00:03:15,160
overlay networks with about 10 million

74
00:03:12,790 --> 00:03:17,650
users and their kind enough to give us a

75
00:03:15,160 --> 00:03:21,310
large set of data and<font color="#CCCCCC"> debate it tastes a</font>

76
00:03:17,650 --> 00:03:23,380
lot of buggy code for us any rate you

77
00:03:21,310 --> 00:03:25,900
see down the side some of their

78
00:03:23,380 --> 00:03:27,340
customers that was the top<font color="#CCCCCC"> 4 which</font>

79
00:03:25,900 --> 00:03:29,650
<font color="#CCCCCC">account for about forty percent of the</font>

80
00:03:27,340 --> 00:03:31,209
<font color="#CCCCCC">traffic forty percent of the transit</font>

81
00:03:29,650 --> 00:03:34,330
traffic going across the top you see

82
00:03:31,209 --> 00:03:36,310
there for transits<font color="#E5E5E5"> and you know the</font>

83
00:03:34,330 --> 00:03:38,920
boxes is a breakdown<font color="#CCCCCC"> of</font><font color="#E5E5E5"> the traffic from</font>

84
00:03:36,310 --> 00:03:42,489
that customer to that particular transit

85
00:03:38,920 --> 00:03:43,899
pier this is computed off of 24 hours of

86
00:03:42,489 --> 00:03:48,579
there

87
00:03:43,900 --> 00:03:51,159
<font color="#CCCCCC">netflow and bgp data it's a</font><font color="#E5E5E5"> great tool</font>

88
00:03:48,579 --> 00:03:53,620
gives you a picture of things that are

89
00:03:51,159 --> 00:03:58,859
important<font color="#E5E5E5"> to your operations but it's</font>

90
00:03:53,620 --> 00:04:02,859
primarily<font color="#E5E5E5"> an engineering tool it can</font>

91
00:03:58,860 --> 00:04:04,390
tell you where your traffic comes in at

92
00:04:02,859 --> 00:04:06,370
the customer level where it<font color="#E5E5E5"> goes out at</font>

93
00:04:04,390 --> 00:04:07,929
the transit level but if you've got some

94
00:04:06,370 --> 00:04:09,939
link in the center of<font color="#E5E5E5"> the your network</font>

95
00:04:07,930 --> 00:04:11,530
that's filled to overflowing you don't

96
00:04:09,939 --> 00:04:13,959
know why<font color="#E5E5E5"> it's overflowing and a traffic</font>

97
00:04:11,530 --> 00:04:16,600
matrix won't tell you all it tells you

98
00:04:13,959 --> 00:04:17,949
is what's coming in at a particular

99
00:04:16,600 --> 00:04:20,289
customer what's going on a particular

100
00:04:17,949 --> 00:04:24,430
transit<font color="#CCCCCC"> it's view of the world is just</font>

101
00:04:20,289 --> 00:04:25,840
<font color="#E5E5E5">that perimeter and for a lot of</font>

102
00:04:24,430 --> 00:04:27,970
operational questions you need<font color="#E5E5E5"> a</font>

103
00:04:25,840 --> 00:04:30,250
different<font color="#E5E5E5"> view and similarly for</font>

104
00:04:27,970 --> 00:04:31,810
<font color="#E5E5E5">business questions if some</font><font color="#CCCCCC"> VP comes down</font>

105
00:04:30,250 --> 00:04:34,090
and says why are we spending umpteen

106
00:04:31,810 --> 00:04:36,729
mega bucks a month on that transit can

107
00:04:34,090 --> 00:04:38,830
you prove<font color="#CCCCCC"> to me that they're the best if</font>

108
00:04:36,729 --> 00:04:41,020
somebody comes in<font color="#E5E5E5"> with a lower price can</font>

109
00:04:38,830 --> 00:04:42,789
you<font color="#E5E5E5"> tell me why I can't move to the</font>

110
00:04:41,020 --> 00:04:44,198
person that's<font color="#CCCCCC"> got a lower price well</font>

111
00:04:42,789 --> 00:04:46,389
it's not<font color="#E5E5E5"> a question you can answer from</font>

112
00:04:44,199 --> 00:04:48,039
a traffic matrix either it doesn't<font color="#E5E5E5"> have</font>

113
00:04:46,389 --> 00:04:49,270
a view beyond your borders it's only

114
00:04:48,039 --> 00:04:54,219
chose you a little bit about the

115
00:04:49,270 --> 00:04:55,810
perimeter one<font color="#E5E5E5"> reason that you start with</font>

116
00:04:54,220 --> 00:04:57,849
<font color="#E5E5E5">a chocolate matrix which again is a</font>

117
00:04:55,810 --> 00:05:00,370
wonderful thing I'm not saying you don't

118
00:04:57,849 --> 00:05:03,430
<font color="#E5E5E5">need</font><font color="#CCCCCC"> a traffic matrix is just you need a</font>

119
00:05:00,370 --> 00:05:05,169
lot<font color="#CCCCCC"> more</font><font color="#E5E5E5"> stuff in addition but a traffic</font>

120
00:05:03,430 --> 00:05:06,849
matrix is in a sense the simplest

121
00:05:05,169 --> 00:05:09,400
analysis that<font color="#E5E5E5"> you can do of the traffic</font>

122
00:05:06,849 --> 00:05:11,139
data is only<font color="#CCCCCC"> N squared where the</font><font color="#E5E5E5"> N is</font>

123
00:05:09,400 --> 00:05:12,789
just your<font color="#E5E5E5"> parameters the number of</font>

124
00:05:11,139 --> 00:05:15,490
customers plus the number of transits

125
00:05:12,789 --> 00:05:19,449
that's a relatively<font color="#E5E5E5"> small number for an</font>

126
00:05:15,490 --> 00:05:22,690
<font color="#CCCCCC">ISP if you want to do why is this damned</font>

127
00:05:19,449 --> 00:05:24,940
link so full you need to do at<font color="#E5E5E5"> least an</font>

128
00:05:22,690 --> 00:05:28,630
order and cubed analysis what you need

129
00:05:24,940 --> 00:05:31,810
is<font color="#E5E5E5"> for every pair of routers in your</font>

130
00:05:28,630 --> 00:05:34,539
network for the<font color="#E5E5E5"> traffic</font><font color="#CCCCCC"> between that</font>

131
00:05:31,810 --> 00:05:36,490
pair at every other router you need to

132
00:05:34,539 --> 00:05:38,770
know how much the traffic between that

133
00:05:36,490 --> 00:05:41,320
pair goes through that<font color="#E5E5E5"> other router so</font>

134
00:05:38,770 --> 00:05:44,080
that's a router cross router across

135
00:05:41,320 --> 00:05:46,960
router and order n cubed analysis<font color="#CCCCCC"> Nets</font>

136
00:05:44,080 --> 00:05:48,880
you know typical Network<font color="#E5E5E5"> a couple</font>

137
00:05:46,960 --> 00:05:51,400
hundred<font color="#CCCCCC"> Rogers that's</font><font color="#E5E5E5"> a big number</font>

138
00:05:48,880 --> 00:05:52,900
you're up in the millions now and if you

139
00:05:51,400 --> 00:05:54,909
want to answer the business questions

140
00:05:52,900 --> 00:05:58,090
about well what am I<font color="#CCCCCC"> really using that</font>

141
00:05:54,910 --> 00:06:00,370
transit for that's a path analysis all

142
00:05:58,090 --> 00:06:01,989
path analysis are combinatorial because

143
00:06:00,370 --> 00:06:06,460
the data can go lots of different<font color="#CCCCCC"> ways</font>

144
00:06:01,990 --> 00:06:09,790
combinatorial means factorial and the<font color="#E5E5E5"> N</font>

145
00:06:06,460 --> 00:06:11,140
in a path analysis is<font color="#E5E5E5"> the number of a SS</font>

146
00:06:09,790 --> 00:06:13,660
and the internet so you're<font color="#CCCCCC"> talking of</font>

147
00:06:11,140 --> 00:06:15,789
numbers<font color="#CCCCCC"> are like 10,000 factorial and</font>

148
00:06:13,660 --> 00:06:17,740
now we're<font color="#E5E5E5"> talking about numbers that are</font>

149
00:06:15,790 --> 00:06:19,180
like bigger than<font color="#E5E5E5"> the universe so it's</font>

150
00:06:17,740 --> 00:06:22,240
not<font color="#CCCCCC"> the kind</font><font color="#E5E5E5"> of analysis you're likely</font>

151
00:06:19,180 --> 00:06:24,430
to do and because of that conventional

152
00:06:22,240 --> 00:06:25,870
wisdom says hey traffic matrix is<font color="#CCCCCC"> the</font>

153
00:06:24,430 --> 00:06:27,820
best you're going to get because<font color="#E5E5E5"> all of</font>

154
00:06:25,870 --> 00:06:31,630
these other analyses are just way way

155
00:06:27,820 --> 00:06:33,820
too hard but that's<font color="#E5E5E5"> wrong that the</font>

156
00:06:31,630 --> 00:06:36,130
scaling numbers are derived from<font color="#E5E5E5"> all of</font>

157
00:06:33,820 --> 00:06:37,570
the places where the data could go<font color="#E5E5E5"> and</font>

158
00:06:36,130 --> 00:06:40,060
the network's fully connected and it

159
00:06:37,570 --> 00:06:42,340
heals itself it reroutes that means<font color="#E5E5E5"> that</font>

160
00:06:40,060 --> 00:06:44,500
there's lots of different<font color="#CCCCCC"> paths and if</font>

161
00:06:42,340 --> 00:06:46,989
you're answering any particular question

162
00:06:44,500 --> 00:06:48,400
any<font color="#E5E5E5"> fixed question then you have to</font>

163
00:06:46,990 --> 00:06:49,900
account for all of the<font color="#E5E5E5"> different ways</font>

164
00:06:48,400 --> 00:06:52,270
that data could go and<font color="#E5E5E5"> that gives you a</font>

165
00:06:49,900 --> 00:06:54,669
<font color="#E5E5E5">huge scaling number but if you actually</font>

166
00:06:52,270 --> 00:06:56,469
follow the bits for a little bit you

167
00:06:54,670 --> 00:06:58,510
find that they're usually routed over

168
00:06:56,470 --> 00:07:00,520
shortest<font color="#CCCCCC"> paths trees and the places</font>

169
00:06:58,510 --> 00:07:02,770
where they<font color="#CCCCCC"> actually do go is a very</font>

170
00:07:00,520 --> 00:07:04,530
small<font color="#CCCCCC"> number of places and it's very</font>

171
00:07:02,770 --> 00:07:07,479
simple and it has a very simple scaling

172
00:07:04,530 --> 00:07:10,869
so this for example is a<font color="#E5E5E5"> picture</font><font color="#CCCCCC"> of the</font>

173
00:07:07,480 --> 00:07:12,940
outgoing scenic transit traffic and

174
00:07:10,870 --> 00:07:14,680
we're actually following the bits and it

175
00:07:12,940 --> 00:07:18,219
<font color="#E5E5E5">kind of couldn't be simpler right</font>

176
00:07:14,680 --> 00:07:21,160
there's<font color="#E5E5E5"> four isp routers there are six</font>

177
00:07:18,220 --> 00:07:24,040
next tops for the<font color="#E5E5E5"> for downstream</font>

178
00:07:21,160 --> 00:07:26,290
transits and none of them<font color="#E5E5E5"> are used twice</font>

179
00:07:24,040 --> 00:07:28,090
and enough to<font color="#CCCCCC"> trans as it goes off into</font>

180
00:07:26,290 --> 00:07:31,180
the<font color="#CCCCCC"> Internet so this is you know such</font>

181
00:07:28,090 --> 00:07:33,789
simple linear flow it it's really<font color="#E5E5E5"> easy</font>

182
00:07:31,180 --> 00:07:37,690
to analyze this it's really<font color="#E5E5E5"> easy to</font>

183
00:07:33,790 --> 00:07:40,330
construct pictures of it so if we<font color="#CCCCCC"> could</font>

184
00:07:37,690 --> 00:07:42,130
somehow leverage this to get a view of

185
00:07:40,330 --> 00:07:45,590
the traffic world we'd have<font color="#CCCCCC"> a pretty</font>

186
00:07:42,130 --> 00:07:49,440
sharp tractable scaling

187
00:07:45,590 --> 00:07:52,229
so that's not hard first thing to

188
00:07:49,440 --> 00:07:53,610
observe is if you've got some NetFlow

189
00:07:52,229 --> 00:07:57,628
data the stuff that's sitting over there

190
00:07:53,610 --> 00:07:59,639
on<font color="#E5E5E5"> the left it's got source destination</font>

191
00:07:57,629 --> 00:08:03,180
address and it's got some volume of data

192
00:07:59,639 --> 00:08:06,539
it says<font color="#CCCCCC"> at</font><font color="#E5E5E5"> some time ace and 14 60 bytes</font>

193
00:08:03,180 --> 00:08:09,389
to e if you've got the topology that's

194
00:08:06,539 --> 00:08:11,520
over on the right then you know the only

195
00:08:09,389 --> 00:08:14,220
way that a could get to e was to go A to

196
00:08:11,520 --> 00:08:16,080
C and then C to D and then D to<font color="#CCCCCC"> E and</font>

197
00:08:14,220 --> 00:08:18,150
you know that the 14 60 bytes went

198
00:08:16,080 --> 00:08:20,219
across each one of those links so you

199
00:08:18,150 --> 00:08:22,109
can figure out what the link capacities

200
00:08:20,219 --> 00:08:24,180
are due to that net full of traffic by

201
00:08:22,110 --> 00:08:26,370
just adding the 1462 if we link in the

202
00:08:24,180 --> 00:08:29,310
path similarly<font color="#CCCCCC"> for</font><font color="#E5E5E5"> the second net flow</font>

203
00:08:26,370 --> 00:08:30,870
of<font color="#CCCCCC"> records add in the betta f you do</font>

204
00:08:29,310 --> 00:08:32,399
this<font color="#E5E5E5"> for every</font><font color="#CCCCCC"> netflow record that</font>

205
00:08:30,870 --> 00:08:34,049
<font color="#E5E5E5">you've got if you've got the current</font>

206
00:08:32,399 --> 00:08:35,789
paths if you've got the current apology

207
00:08:34,049 --> 00:08:39,269
take your data and distribute it<font color="#E5E5E5"> across</font>

208
00:08:35,789 --> 00:08:42,899
<font color="#E5E5E5">the path what that's saying is if you've</font>

209
00:08:39,269 --> 00:08:45,149
got topology measurement topology data

210
00:08:42,899 --> 00:08:48,120
you can take any point measurement and

211
00:08:45,149 --> 00:08:49,920
turn it into a path measurement there

212
00:08:48,120 --> 00:08:52,770
they're the same<font color="#CCCCCC"> thing and so you can</font>

213
00:08:49,920 --> 00:08:56,250
<font color="#E5E5E5">take</font><font color="#CCCCCC"> your local measured view of the</font>

214
00:08:52,770 --> 00:08:57,899
data and extend it off to as far as you

215
00:08:56,250 --> 00:09:00,270
can extend a path completely across the

216
00:08:57,899 --> 00:09:04,860
<font color="#E5E5E5">internet if you can get a BG path bgp</font>

217
00:09:00,270 --> 00:09:06,959
path to the final<font color="#CCCCCC"> destination so this</font>

218
00:09:04,860 --> 00:09:11,220
isn't a new idea in if you went to

219
00:09:06,959 --> 00:09:13,469
<font color="#CCCCCC">thomas tell campus tutorial it's the</font>

220
00:09:11,220 --> 00:09:15,480
basis of these automatic appliances they

221
00:09:13,470 --> 00:09:21,329
compute flow matrices for you that's why

222
00:09:15,480 --> 00:09:24,060
they need the<font color="#CCCCCC"> bgp data if you're doing</font>

223
00:09:21,329 --> 00:09:25,949
things<font color="#E5E5E5"> this way it's not really critical</font>

224
00:09:24,060 --> 00:09:28,050
where you measure because any

225
00:09:25,950 --> 00:09:31,860
measurement you take applies to every

226
00:09:28,050 --> 00:09:33,689
segment in<font color="#CCCCCC"> the path it may be hard to</font>

227
00:09:31,860 --> 00:09:35,670
get a path to pending<font color="#E5E5E5"> Arbor your measure</font>

228
00:09:33,690 --> 00:09:37,350
because a lot of the routing isn't

229
00:09:35,670 --> 00:09:40,770
invertible for example if you measure

230
00:09:37,350 --> 00:09:42,990
bgp at an ingress you have no<font color="#CCCCCC"> idea where</font>

231
00:09:40,770 --> 00:09:44,850
the data came from you know the<font color="#E5E5E5"> upstream</font>

232
00:09:42,990 --> 00:09:47,430
that gave it to you but<font color="#CCCCCC"> you don't know</font>

233
00:09:44,850 --> 00:09:50,550
the upstream of that upstream is because

234
00:09:47,430 --> 00:09:53,160
bgp data because<font color="#E5E5E5"> it's</font>

235
00:09:50,550 --> 00:09:54,329
basically a distance vector protocol you

236
00:09:53,160 --> 00:09:57,269
don't have a map you don't have a

237
00:09:54,330 --> 00:09:58,769
topology and it's almost never the case

238
00:09:57,269 --> 00:10:00,510
that the data came from the place that

239
00:09:58,769 --> 00:10:02,130
<font color="#CCCCCC">you're sending</font><font color="#E5E5E5"> it to you can't take your</font>

240
00:10:00,510 --> 00:10:05,310
outbound route and use it as<font color="#E5E5E5"> a pgp</font>

241
00:10:02,130 --> 00:10:07,680
inbound route on a GPS are almost always

242
00:10:05,310 --> 00:10:10,260
invertible the exceptional multipath and

243
00:10:07,680 --> 00:10:12,180
what other funniness so if you've<font color="#CCCCCC"> got</font><font color="#E5E5E5"> an</font>

244
00:10:10,260 --> 00:10:16,470
<font color="#E5E5E5">egress measurement from a customer you</font>

245
00:10:12,180 --> 00:10:19,140
know how<font color="#E5E5E5"> that came</font><font color="#CCCCCC"> across your IGP other</font>

246
00:10:16,470 --> 00:10:21,269
if you've constructed traffic matrices

247
00:10:19,140 --> 00:10:23,160
the bane of making them is if you got

248
00:10:21,269 --> 00:10:24,870
multiple measurements you'd like<font color="#E5E5E5"> to be</font>

249
00:10:23,160 --> 00:10:26,490
sort of mindless and setting up your net

250
00:10:24,870 --> 00:10:28,620
flow infrastructure and just turn it on

251
00:10:26,490 --> 00:10:30,240
on<font color="#E5E5E5"> every router that will support it but</font>

252
00:10:28,620 --> 00:10:32,700
it's<font color="#E5E5E5"> really easy to double count your</font>

253
00:10:30,240 --> 00:10:34,920
packets if you're getting<font color="#E5E5E5"> say both an</font>

254
00:10:32,700 --> 00:10:37,769
ingress and egress measurement or<font color="#E5E5E5"> you're</font>

255
00:10:34,920 --> 00:10:39,839
measuring both the input net flow and

256
00:10:37,769 --> 00:10:42,810
output net flow on an interface you get

257
00:10:39,839 --> 00:10:44,459
this extra factor of<font color="#E5E5E5"> two and traffic</font>

258
00:10:42,810 --> 00:10:46,380
<font color="#E5E5E5">measurements accurate to within a factor</font>

259
00:10:44,459 --> 00:10:47,729
of two<font color="#CCCCCC"> or if you're measuring in places</font>

260
00:10:46,380 --> 00:10:49,350
within a factor of n are kind<font color="#E5E5E5"> of</font>

261
00:10:47,730 --> 00:10:52,560
worthless nice thing about having

262
00:10:49,350 --> 00:10:55,170
routing is it puts a total order on your

263
00:10:52,560 --> 00:10:56,520
traffic you know which<font color="#E5E5E5"> is</font><font color="#CCCCCC"> the first</font>

264
00:10:55,170 --> 00:10:58,529
measurement point that would see the

265
00:10:56,520 --> 00:11:00,000
traffic which is the second which is<font color="#E5E5E5"> the</font>

266
00:10:58,529 --> 00:11:02,220
third and you can make<font color="#E5E5E5"> sure that you</font>

267
00:11:00,000 --> 00:11:04,649
only count it on the first and use all

268
00:11:02,220 --> 00:11:06,899
of the down stream's just to validate

269
00:11:04,649 --> 00:11:09,990
that version and check the first input

270
00:11:06,899 --> 00:11:11,700
measurement so there isn't if you're

271
00:11:09,990 --> 00:11:13,079
using topology there isn't an issue with

272
00:11:11,700 --> 00:11:14,550
multiple measurements you can<font color="#E5E5E5"> really be</font>

273
00:11:13,079 --> 00:11:19,229
pretty brainless and<font color="#E5E5E5"> deploying your</font>

274
00:11:14,550 --> 00:11:23,609
infrastructure and unlike the<font color="#CCCCCC"> tomo</font>

275
00:11:19,230 --> 00:11:25,920
gravity and other techniques<font color="#E5E5E5"> that try to</font>

276
00:11:23,610 --> 00:11:27,450
<font color="#E5E5E5">convert edge measurements back into</font>

277
00:11:25,920 --> 00:11:31,110
what's happening<font color="#CCCCCC"> in the center of your</font>

278
00:11:27,450 --> 00:11:32,779
<font color="#E5E5E5">network that require one hundred percent</font>

279
00:11:31,110 --> 00:11:37,110
data before they'll give you an answer

280
00:11:32,779 --> 00:11:38,790
whatever<font color="#E5E5E5"> data you give this technique it</font>

281
00:11:37,110 --> 00:11:40,620
can give you a picture<font color="#E5E5E5"> of</font><font color="#CCCCCC"> all right it's</font>

282
00:11:38,790 --> 00:11:42,660
just taking individual flow records and

283
00:11:40,620 --> 00:11:44,699
distributing them across the topology so

284
00:11:42,660 --> 00:11:46,290
if you've<font color="#CCCCCC"> got one hot spot one provider</font>

285
00:11:44,699 --> 00:11:47,399
one customer and you really want<font color="#CCCCCC"> to</font><font color="#E5E5E5"> see</font>

286
00:11:46,290 --> 00:11:49,829
what's happening with their traffic

287
00:11:47,399 --> 00:11:50,910
great<font color="#E5E5E5"> measure that traffic feed it</font>

288
00:11:49,829 --> 00:11:53,459
through your<font color="#E5E5E5"> topology and you get a</font>

289
00:11:50,910 --> 00:11:55,529
picture<font color="#CCCCCC"> of it so</font><font color="#E5E5E5"> you start getting a</font>

290
00:11:53,459 --> 00:11:56,640
return right away start<font color="#E5E5E5"> getting</font>

291
00:11:55,529 --> 00:11:58,790
information right away

292
00:11:56,640 --> 00:12:00,689
and as you would<font color="#E5E5E5"> deploy more measurement</font>

293
00:11:58,790 --> 00:12:02,910
infrastructure you<font color="#E5E5E5"> just get a more</font>

294
00:12:00,690 --> 00:12:08,550
complete<font color="#E5E5E5"> picture but you always get</font>

295
00:12:02,910 --> 00:12:11,520
useful information out of<font color="#CCCCCC"> it other issue</font>

296
00:12:08,550 --> 00:12:13,530
is how do you deploy a measurement

297
00:12:11,520 --> 00:12:16,380
infrastructure do you have to spend<font color="#CCCCCC"> as</font>

298
00:12:13,530 --> 00:12:18,209
much time babysitting the measurement

299
00:12:16,380 --> 00:12:19,470
infrastructure as you do<font color="#CCCCCC"> babysitting</font>

300
00:12:18,210 --> 00:12:22,650
your customers<font color="#CCCCCC"> and their routes and</font>

301
00:12:19,470 --> 00:12:25,230
their transits and the answer is no at

302
00:12:22,650 --> 00:12:26,670
<font color="#CCCCCC">least if</font><font color="#E5E5E5"> he can leverage routing all of</font>

303
00:12:25,230 --> 00:12:29,700
the information that you need to

304
00:12:26,670 --> 00:12:32,099
configure the measurement infrastructure

305
00:12:29,700 --> 00:12:33,990
is already in<font color="#CCCCCC"> the routing basically you</font>

306
00:12:32,100 --> 00:12:36,300
need to know what's a customer how do<font color="#CCCCCC"> I</font>

307
00:12:33,990 --> 00:12:38,640
map a prefix into a customer appear a

308
00:12:36,300 --> 00:12:44,219
<font color="#CCCCCC">transitive bogen that's already</font><font color="#E5E5E5"> in your</font>

309
00:12:38,640 --> 00:12:46,080
routing you have to<font color="#E5E5E5"> know where your</font>

310
00:12:44,220 --> 00:12:47,250
connection<font color="#CCCCCC"> to the outside world is and</font>

311
00:12:46,080 --> 00:12:48,960
you have to know where<font color="#CCCCCC"> that connects</font>

312
00:12:47,250 --> 00:12:50,790
into your internal infrastructure well

313
00:12:48,960 --> 00:12:53,640
outside<font color="#E5E5E5"> world connections are all in BGP</font>

314
00:12:50,790 --> 00:12:55,740
the next hops are all related to things

315
00:12:53,640 --> 00:12:59,040
that<font color="#E5E5E5"> are in your</font><font color="#CCCCCC"> IGP you can glue them</font>

316
00:12:55,740 --> 00:13:00,240
together and<font color="#E5E5E5"> pretty much make a picture</font>

317
00:12:59,040 --> 00:13:03,150
of the<font color="#CCCCCC"> whole world</font><font color="#E5E5E5"> of interconnections</font>

318
00:13:00,240 --> 00:13:09,360
just by looking<font color="#CCCCCC"> they're mining</font><font color="#E5E5E5"> through</font>

319
00:13:03,150 --> 00:13:11,160
your routing so that's<font color="#E5E5E5"> the two</font>

320
00:13:09,360 --> 00:13:14,280
observations behind this route flow

321
00:13:11,160 --> 00:13:19,010
fusion it says the<font color="#CCCCCC"> right way to do with</font>

322
00:13:14,280 --> 00:13:22,140
flow data is to take the NetFlow data

323
00:13:19,010 --> 00:13:23,880
don't try and analyze it into<font color="#E5E5E5"> something</font>

324
00:13:22,140 --> 00:13:25,830
like a tropic matrix because then you're

325
00:13:23,880 --> 00:13:27,510
presupposing a question that will<font color="#E5E5E5"> reduce</font>

326
00:13:25,830 --> 00:13:29,280
the<font color="#E5E5E5"> volume of data but</font><font color="#CCCCCC"> it also reduces</font>

327
00:13:27,510 --> 00:13:31,170
the number of questions<font color="#CCCCCC"> that you can ask</font>

328
00:13:29,280 --> 00:13:33,680
of that data and it reduces the number

329
00:13:31,170 --> 00:13:35,819
of questions<font color="#E5E5E5"> you can ask astronomically</font>

330
00:13:33,680 --> 00:13:39,839
instead you're a lot<font color="#E5E5E5"> better off if you</font>

331
00:13:35,820 --> 00:13:42,600
<font color="#CCCCCC">keep the raw NetFlow data together you</font>

332
00:13:39,840 --> 00:13:45,210
keep raw routing data at the<font color="#E5E5E5"> same time</font>

333
00:13:42,600 --> 00:13:47,550
and when questions are asked you fuse

334
00:13:45,210 --> 00:13:51,050
those two pieces<font color="#CCCCCC"> of</font><font color="#E5E5E5"> data together go</font>

335
00:13:47,550 --> 00:13:53,040
through the flow data to get the

336
00:13:51,050 --> 00:13:54,630
prefixes feed that through the routing

337
00:13:53,040 --> 00:13:56,699
data to get the path and then accumulate

338
00:13:54,630 --> 00:13:57,990
the traffic along those paths it's cheap

339
00:13:56,700 --> 00:13:59,610
to do that because you can take

340
00:13:57,990 --> 00:14:02,100
<font color="#CCCCCC">advantage of the</font><font color="#E5E5E5"> simplicity</font><font color="#CCCCCC"> that the</font>

341
00:13:59,610 --> 00:14:04,980
routing introduces on the data the fact

342
00:14:02,100 --> 00:14:07,800
that most paths go on simple shortest

343
00:14:04,980 --> 00:14:08,170
<font color="#CCCCCC">path trees you get do some cash and you</font>

344
00:14:07,800 --> 00:14:09,939
can

345
00:14:08,170 --> 00:14:12,279
advantage<font color="#E5E5E5"> of the fact that links are</font>

346
00:14:09,940 --> 00:14:15,339
same links are used for multiple

347
00:14:12,279 --> 00:14:18,750
different flows and basically<font color="#E5E5E5"> you're</font>

348
00:14:15,339 --> 00:14:20,829
doing a lazy computation of the flows

349
00:14:18,750 --> 00:14:22,570
driven<font color="#CCCCCC"> by the questions you're doing</font>

350
00:14:20,829 --> 00:14:25,500
<font color="#CCCCCC">on-demand</font><font color="#E5E5E5"> computation based on what the</font>

351
00:14:22,570 --> 00:14:27,730
questions are and you get this nice

352
00:14:25,500 --> 00:14:31,240
aggregate data rate and traffic volume

353
00:14:27,730 --> 00:14:33,760
across your infrastructure so here's a

354
00:14:31,240 --> 00:14:36,610
picture of<font color="#E5E5E5"> doing that this is exactly</font>

355
00:14:33,760 --> 00:14:39,250
<font color="#CCCCCC">the same data as that scenic traffic</font>

356
00:14:36,610 --> 00:14:41,470
matrix it's basically another picture<font color="#CCCCCC"> of</font>

357
00:14:39,250 --> 00:14:44,980
that<font color="#E5E5E5"> traffic matrix but it's showing you</font>

358
00:14:41,470 --> 00:14:49,690
a little bit<font color="#E5E5E5"> more the way you draw this</font>

359
00:14:44,980 --> 00:14:55,660
picture is you spread all of the flow

360
00:14:49,690 --> 00:14:58,389
data as 24<font color="#CCCCCC"> hours of flow data but 50</font>

361
00:14:55,660 --> 00:15:01,149
gigabytes I think spread it across the

362
00:14:58,389 --> 00:15:03,160
topology<font color="#CCCCCC"> that gives you loadings on a</font>

363
00:15:01,149 --> 00:15:06,910
lot of paths you go through all<font color="#E5E5E5"> those</font>

364
00:15:03,160 --> 00:15:08,589
paths with a threshold and any path is

365
00:15:06,910 --> 00:15:10,569
carrying less than the threshold amount

366
00:15:08,589 --> 00:15:13,000
in this case it was any path is carrying

367
00:15:10,570 --> 00:15:16,390
one percent of the traffic you throw it

368
00:15:13,000 --> 00:15:19,510
away<font color="#E5E5E5"> so look at this as your data is big</font>

369
00:15:16,390 --> 00:15:20,949
bushy tree lots of leaves and blossoms

370
00:15:19,510 --> 00:15:22,209
and all sorts of growth on it and you

371
00:15:20,949 --> 00:15:24,069
can't really<font color="#CCCCCC"> see the structure of</font><font color="#E5E5E5"> the</font>

372
00:15:22,209 --> 00:15:26,079
tree so what you do is from the outside

373
00:15:24,070 --> 00:15:27,730
<font color="#CCCCCC">you start turning it back in until you</font>

374
00:15:26,079 --> 00:15:29,199
can<font color="#CCCCCC"> see the main branches in the trunk</font>

375
00:15:27,730 --> 00:15:31,510
because<font color="#E5E5E5"> that's all you really care about</font>

376
00:15:29,199 --> 00:15:34,410
to get a<font color="#CCCCCC"> large-scale sense of what's</font>

377
00:15:31,510 --> 00:15:36,579
going<font color="#E5E5E5"> on the network all the data goes</font>

378
00:15:34,410 --> 00:15:38,800
in all the pictures<font color="#E5E5E5"> i'm going to show</font>

379
00:15:36,579 --> 00:15:40,779
the data flows left to right so

380
00:15:38,800 --> 00:15:42,399
customers are on the left in this

381
00:15:40,779 --> 00:15:46,740
picture<font color="#CCCCCC"> internet's on the right the</font>

382
00:15:42,399 --> 00:15:50,410
transits are about in the<font color="#E5E5E5"> middle and</font>

383
00:15:46,740 --> 00:15:53,620
computing this picture took no manual

384
00:15:50,410 --> 00:15:56,170
input other than you<font color="#E5E5E5"> need to</font><font color="#CCCCCC"> know the</font>

385
00:15:53,620 --> 00:16:00,220
communities in the<font color="#E5E5E5"> BGP data that</font>

386
00:15:56,170 --> 00:16:01,930
identify customers and transit and it

387
00:16:00,220 --> 00:16:03,819
took exactly the same amount<font color="#CCCCCC"> of time as</font>

388
00:16:01,930 --> 00:16:07,040
generating the traffic matrix each of

389
00:16:03,819 --> 00:16:10,290
them took about<font color="#CCCCCC"> 10 seconds</font>

390
00:16:07,040 --> 00:16:12,000
you can see more on this picture than

391
00:16:10,290 --> 00:16:14,420
you can see in the traffic matrix you

392
00:16:12,000 --> 00:16:17,640
see where the data is going downstream

393
00:16:14,420 --> 00:16:19,410
first thing jumped out and me was a

394
00:16:17,640 --> 00:16:21,480
third of<font color="#E5E5E5"> the traffic here goes to</font>

395
00:16:19,410 --> 00:16:24,449
residential providers that's not

396
00:16:21,480 --> 00:16:26,750
terribly surprising<font color="#CCCCCC"> in the UC system</font>

397
00:16:24,450 --> 00:16:29,970
alone you've got a<font color="#E5E5E5"> little over a million</font>

398
00:16:26,750 --> 00:16:33,029
faculty and students and if they're<font color="#CCCCCC"> not</font>

399
00:16:29,970 --> 00:16:35,310
on campus they're home working back at a

400
00:16:33,029 --> 00:16:36,990
campus machine and their home machines

401
00:16:35,310 --> 00:16:39,989
hooked up to some residential providers

402
00:16:36,990 --> 00:16:42,360
so you see the SBC dsl connections and

403
00:16:39,990 --> 00:16:44,910
the comcast and the roadrunner cable

404
00:16:42,360 --> 00:16:47,910
modem connections to call them back<font color="#E5E5E5"> to</font>

405
00:16:44,910 --> 00:16:49,350
school you can also see some<font color="#E5E5E5"> other</font>

406
00:16:47,910 --> 00:16:51,480
things you can see<font color="#CCCCCC"> that</font><font color="#E5E5E5"> the quest</font>

407
00:16:49,350 --> 00:16:55,260
transits basically used<font color="#E5E5E5"> to get the SBC</font>

408
00:16:51,480 --> 00:16:57,420
you buy a sprint you can see that<font color="#E5E5E5"> the</font>

409
00:16:55,260 --> 00:16:58,709
<font color="#E5E5E5">will tell transit got pruned off because</font>

410
00:16:57,420 --> 00:17:00,779
it's carrying less than the one percent

411
00:16:58,709 --> 00:17:07,589
of the<font color="#CCCCCC"> traffic you</font><font color="#E5E5E5"> can see</font><font color="#CCCCCC"> that cogent</font>

412
00:17:00,779 --> 00:17:09,359
basically takes you to<font color="#E5E5E5"> Canada so that's</font>

413
00:17:07,589 --> 00:17:10,948
a picture<font color="#E5E5E5"> where you're</font><font color="#CCCCCC"> just looking at</font>

414
00:17:09,359 --> 00:17:12,750
traffic<font color="#E5E5E5"> volumes you add up the total</font>

415
00:17:10,949 --> 00:17:15,780
number bytes that are<font color="#E5E5E5"> going down each</font>

416
00:17:12,750 --> 00:17:20,280
path but you're<font color="#E5E5E5"> not restricted</font><font color="#CCCCCC"> to just</font>

417
00:17:15,780 --> 00:17:23,240
looking at traffic<font color="#E5E5E5"> volumes to look at</font>

418
00:17:20,280 --> 00:17:26,339
traffic volumes you distribute a

419
00:17:23,240 --> 00:17:28,169
combines across the path if you want to

420
00:17:26,339 --> 00:17:29,970
look at traffic rates you distribute a

421
00:17:28,169 --> 00:17:32,610
vector across the path where the vector

422
00:17:29,970 --> 00:17:35,730
is the<font color="#E5E5E5"> traffic rate versus time that you</font>

423
00:17:32,610 --> 00:17:40,469
get out<font color="#E5E5E5"> of the net flow record so this</font>

424
00:17:35,730 --> 00:17:42,450
<font color="#CCCCCC">is a picture of doing that this is</font>

425
00:17:40,470 --> 00:17:46,520
looking at 20 minutes<font color="#E5E5E5"> of NetFlow data</font>

426
00:17:42,450 --> 00:17:49,169
the thing that we originally noticed was

427
00:17:46,520 --> 00:17:52,710
going into UCLA the traffic took a

428
00:17:49,169 --> 00:17:55,470
nosedive it went down to about twenty

429
00:17:52,710 --> 00:17:56,760
<font color="#CCCCCC">percent of its nominal value and then it</font>

430
00:17:55,470 --> 00:17:59,190
came back and then it took another nose

431
00:17:56,760 --> 00:18:04,260
dive a little bit later if you look<font color="#E5E5E5"> down</font>

432
00:17:59,190 --> 00:18:06,780
at the bottom that little sort of strip

433
00:18:04,260 --> 00:18:08,610
chart that's the actual vectors that's

434
00:18:06,780 --> 00:18:11,920
being distributed so that's the bit

435
00:18:08,610 --> 00:18:14,290
kilobits per second versus time

436
00:18:11,920 --> 00:18:18,310
full scale on thats<font color="#CCCCCC"> i think</font><font color="#E5E5E5"> about 30</font>

437
00:18:14,290 --> 00:18:20,560
megabits and the full range of time is

438
00:18:18,310 --> 00:18:26,200
20<font color="#CCCCCC"> minutes and you</font><font color="#E5E5E5"> can see</font><font color="#CCCCCC"> the two</font>

439
00:18:20,560 --> 00:18:29,800
traffic dives unlike a traffic matrix or

440
00:18:26,200 --> 00:18:32,200
a list the sort of<font color="#E5E5E5"> stuff that you get</font>

441
00:18:29,800 --> 00:18:33,970
out<font color="#CCCCCC"> of our d the interface stats which</font>

442
00:18:32,200 --> 00:18:36,730
you can fit into a pretty simple 2d

443
00:18:33,970 --> 00:18:39,880
picture there's way way more data here

444
00:18:36,730 --> 00:18:42,160
right you've got<font color="#E5E5E5"> all of</font><font color="#CCCCCC"> the data for all</font>

445
00:18:39,880 --> 00:18:44,940
of time going<font color="#E5E5E5"> to all of space right you</font>

446
00:18:42,160 --> 00:18:46,930
you can see everything is going

447
00:18:44,940 --> 00:18:48,520
internally the data that<font color="#E5E5E5"> you're</font><font color="#CCCCCC"> working</font>

448
00:18:46,930 --> 00:18:50,440
<font color="#E5E5E5">on has got</font><font color="#CCCCCC"> all of the traffic between</font>

449
00:18:48,520 --> 00:18:52,900
all of the<font color="#E5E5E5"> endpoints if you're</font>

450
00:18:50,440 --> 00:18:56,410
distributing rate vectors then you've

451
00:18:52,900 --> 00:18:58,870
got<font color="#E5E5E5"> that picture at any time there's no</font>

452
00:18:56,410 --> 00:19:01,480
way that you can draw a simple

453
00:18:58,870 --> 00:19:06,100
visualization of that there's<font color="#E5E5E5"> just too</font>

454
00:19:01,480 --> 00:19:09,370
much information<font color="#CCCCCC"> to put out and so the</font>

455
00:19:06,100 --> 00:19:12,550
real research and deployment issues are

456
00:19:09,370 --> 00:19:14,679
not<font color="#CCCCCC"> so much getting the data it's trying</font>

457
00:19:12,550 --> 00:19:17,169
to get it into a useful form what can

458
00:19:14,680 --> 00:19:18,640
you do so that you can an operator

459
00:19:17,170 --> 00:19:20,650
somebody who wants<font color="#CCCCCC"> to ask questions of</font>

460
00:19:18,640 --> 00:19:23,740
<font color="#E5E5E5">this can ask the questions and get</font>

461
00:19:20,650 --> 00:19:25,540
useful stuff out this is one sort of

462
00:19:23,740 --> 00:19:29,680
fumbling an attempt to doing it turn the

463
00:19:25,540 --> 00:19:32,530
data<font color="#E5E5E5"> into an SVG animation so you draw</font>

464
00:19:29,680 --> 00:19:34,930
this graph you can click on<font color="#CCCCCC"> any link or</font>

465
00:19:32,530 --> 00:19:36,879
node and what you see is the data versus

466
00:19:34,930 --> 00:19:39,010
time on that link or node will show up

467
00:19:36,880 --> 00:19:40,570
in the graph at the bottom<font color="#E5E5E5"> so that's a</font>

468
00:19:39,010 --> 00:19:43,060
way of getting<font color="#CCCCCC"> from a particular</font><font color="#E5E5E5"> point</font>

469
00:19:40,570 --> 00:19:46,659
<font color="#E5E5E5">in space to the behavior the time</font>

470
00:19:43,060 --> 00:19:48,580
behavior at that point if you<font color="#E5E5E5"> click any</font>

471
00:19:46,660 --> 00:19:50,500
point on the time graph you get a

472
00:19:48,580 --> 00:19:52,929
picture of<font color="#E5E5E5"> what the traffic looked like</font>

473
00:19:50,500 --> 00:19:56,230
in<font color="#CCCCCC"> the global topology at that time so</font>

474
00:19:52,930 --> 00:19:59,320
right now<font color="#E5E5E5"> I clicked at the lowest point</font>

475
00:19:56,230 --> 00:20:00,550
of that curve and what I'm seeing is

476
00:19:59,320 --> 00:20:01,960
what the traffic was doing over

477
00:20:00,550 --> 00:20:03,820
<font color="#E5E5E5">everything</font><font color="#CCCCCC"> that I'm looking at</font><font color="#E5E5E5"> it at the</font>

478
00:20:01,960 --> 00:20:05,680
time we're blue is links that are losing

479
00:20:03,820 --> 00:20:08,020
traffic greenest links that are gaining

480
00:20:05,680 --> 00:20:11,050
traffic and black is links that aren't

481
00:20:08,020 --> 00:20:14,620
changing so you can see at the<font color="#CCCCCC"> time that</font>

482
00:20:11,050 --> 00:20:18,220
UCLA was missing<font color="#E5E5E5"> this traffic everything</font>

483
00:20:14,620 --> 00:20:21,139
was missing<font color="#E5E5E5"> this traffic each of those</font>

484
00:20:18,220 --> 00:20:23,510
the second level in circles each of

485
00:20:21,140 --> 00:20:27,200
those is a separate net flow monitor

486
00:20:23,510 --> 00:20:29,480
<font color="#CCCCCC">we're monitoring all of the ISP links in</font>

487
00:20:27,200 --> 00:20:32,150
scenic and we're seeing the same

488
00:20:29,480 --> 00:20:34,429
behavior on all the monitors and on all

489
00:20:32,150 --> 00:20:36,320
the<font color="#CCCCCC"> piers</font><font color="#E5E5E5"> and there isn't actually I</font>

490
00:20:34,429 --> 00:20:38,330
clicked<font color="#E5E5E5"> on a link that's the rod net</font>

491
00:20:36,320 --> 00:20:40,340
flow monitor so we're<font color="#E5E5E5"> seeing the raw and</font>

492
00:20:38,330 --> 00:20:42,590
NetFlow data this isn't an artifact of

493
00:20:40,340 --> 00:20:44,809
<font color="#E5E5E5">the analysis we're doing at the path</font>

494
00:20:42,590 --> 00:20:52,159
distribution it's really happening in

495
00:20:44,809 --> 00:20:54,320
the raw data said<font color="#CCCCCC"> another</font><font color="#E5E5E5"> way of looking</font>

496
00:20:52,160 --> 00:20:59,030
at this data is not looking at his

497
00:20:54,320 --> 00:21:03,350
temporal behavior but looking at the

498
00:20:59,030 --> 00:21:06,620
correlation the paths an example<font color="#E5E5E5"> of that</font>

499
00:21:03,350 --> 00:21:10,459
is looking<font color="#E5E5E5"> at a prefix anomaly so start</font>

500
00:21:06,620 --> 00:21:12,439
by clicking on the<font color="#CCCCCC"> UC</font><font color="#E5E5E5"> Berkeley data in</font>

501
00:21:10,460 --> 00:21:15,110
that first picture so way that you

502
00:21:12,440 --> 00:21:16,850
explore the topology is<font color="#CCCCCC"> double-click on</font>

503
00:21:15,110 --> 00:21:20,449
some note and you get a picture of just

504
00:21:16,850 --> 00:21:23,389
that node so we can see that UC Berkeley

505
00:21:20,450 --> 00:21:26,299
is traffic is this is inbound traffic

506
00:21:23,390 --> 00:21:29,919
it's nicely split between<font color="#CCCCCC"> cochins in</font>

507
00:21:26,299 --> 00:21:32,030
level<font color="#CCCCCC"> 3 roughly half and half work</font>

508
00:21:29,919 --> 00:21:34,100
bringing all the traffic in from

509
00:21:32,030 --> 00:21:35,660
Northern California pops Berkeley's in

510
00:21:34,100 --> 00:21:40,549
Northern California so we're<font color="#E5E5E5"> not back</font>

511
00:21:35,660 --> 00:21:41,900
hauling stuff across the state it's so

512
00:21:40,549 --> 00:21:45,710
fairly good engineering has been done

513
00:21:41,900 --> 00:21:49,760
their meds or something else<font color="#E5E5E5"> but if you</font>

514
00:21:45,710 --> 00:21:52,580
click<font color="#CCCCCC"> on</font><font color="#E5E5E5"> one of Berkeley's prefixes got</font>

515
00:21:49,760 --> 00:21:54,980
two main prefixes you click<font color="#E5E5E5"> on the</font><font color="#CCCCCC"> 128</font>

516
00:21:52,580 --> 00:21:57,470
32 prefix<font color="#CCCCCC"> to see just the traffic for it</font>

517
00:21:54,980 --> 00:22:01,100
so all of the other stuff<font color="#CCCCCC"> gets great out</font>

518
00:21:57,470 --> 00:22:05,299
turns into a shadow and just the inbound

519
00:22:01,100 --> 00:22:08,629
traffic for 128 32 ends up in black and

520
00:22:05,299 --> 00:22:11,780
lo and behold all of the 128 32 traffic

521
00:22:08,630 --> 00:22:14,510
is coming from level<font color="#CCCCCC"> 3 in 24 hours there</font>

522
00:22:11,780 --> 00:22:16,399
was no 128 32 traffic coming from cochin

523
00:22:14,510 --> 00:22:18,260
either there was no announcement going

524
00:22:16,400 --> 00:22:20,210
out<font color="#E5E5E5"> that</font><font color="#CCCCCC"> way or it went out that</font><font color="#E5E5E5"> way and</font>

525
00:22:18,260 --> 00:22:22,670
<font color="#E5E5E5">got ignored</font>

526
00:22:20,210 --> 00:22:25,640
so there was some interesting asymmetry

527
00:22:22,670 --> 00:22:27,260
and you can you make yourself crazy

528
00:22:25,640 --> 00:22:29,060
going around clicking on different nodes

529
00:22:27,260 --> 00:22:32,080
and seeing how data goes through<font color="#E5E5E5"> your</font>

530
00:22:29,060 --> 00:22:33,950
network<font color="#E5E5E5"> and goes through the internet</font>

531
00:22:32,080 --> 00:22:37,490
because you're doing<font color="#CCCCCC"> this lazy</font>

532
00:22:33,950 --> 00:22:40,040
evaluation model you're not structuring

533
00:22:37,490 --> 00:22:42,560
the data for to answer any particular

534
00:22:40,040 --> 00:22:44,600
question pretty much when a question

535
00:22:42,560 --> 00:22:46,940
comes up you can go in and answer it so

536
00:22:44,600 --> 00:22:50,209
one interesting one recently was do I

537
00:22:46,940 --> 00:22:51,980
have<font color="#CCCCCC"> any</font><font color="#E5E5E5"> customer traffic that goes from</font>

538
00:22:50,210 --> 00:22:53,690
cogent<font color="#CCCCCC"> to level three or from level</font>

539
00:22:51,980 --> 00:22:58,280
three to cochin because if I do it's<font color="#E5E5E5"> not</font>

540
00:22:53,690 --> 00:23:02,000
going to work and so it's easy<font color="#E5E5E5"> to query</font>

541
00:22:58,280 --> 00:23:06,590
the data to say show<font color="#CCCCCC"> me all the traffic</font>

542
00:23:02,000 --> 00:23:09,790
where the AAS path includes 174 and 3356

543
00:23:06,590 --> 00:23:13,340
and this is a<font color="#E5E5E5"> picture of</font><font color="#CCCCCC"> that traffic</font>

544
00:23:09,790 --> 00:23:17,230
turned out one hundred percent of the

545
00:23:13,340 --> 00:23:21,169
traffic which wasn't a lot 27 megabytes

546
00:23:17,230 --> 00:23:23,900
went to Sh London Germany it<font color="#E5E5E5"> was pretty</font>

547
00:23:21,170 --> 00:23:26,810
well distributed over the<font color="#CCCCCC"> scenic sights</font>

548
00:23:23,900 --> 00:23:28,970
you see four<font color="#CCCCCC"> of them there and the usual</font>

549
00:23:26,810 --> 00:23:30,740
<font color="#E5E5E5">suspects of the four biggest but pretty</font>

550
00:23:28,970 --> 00:23:34,580
<font color="#E5E5E5">much all the customers</font><font color="#CCCCCC"> we're sending</font>

551
00:23:30,740 --> 00:23:37,510
down that path so obviously this isn't

552
00:23:34,580 --> 00:23:41,000
going to work if cogent level three DP r

553
00:23:37,510 --> 00:23:45,710
it turned out that this particular

554
00:23:41,000 --> 00:23:47,540
traffic a manual route manual piece of

555
00:23:45,710 --> 00:23:49,910
configuration have been installed to

556
00:23:47,540 --> 00:23:51,260
force the salon traffic to this path

557
00:23:49,910 --> 00:23:54,140
because there was a monitoring gear

558
00:23:51,260 --> 00:23:57,710
there and unfortunately got like any

559
00:23:54,140 --> 00:23:59,150
manual install it got overlooked so it

560
00:23:57,710 --> 00:24:00,950
was still there at the time we took this

561
00:23:59,150 --> 00:24:03,230
data but<font color="#CCCCCC"> we took this data in February</font>

562
00:24:00,950 --> 00:24:05,900
and that router was rebooted and this

563
00:24:03,230 --> 00:24:08,120
config went away long before there was

564
00:24:05,900 --> 00:24:10,370
any deep Aryan event but there's always

565
00:24:08,120 --> 00:24:12,620
<font color="#E5E5E5">stuff like this in any real network</font>

566
00:24:10,370 --> 00:24:14,149
right you<font color="#CCCCCC"> have to</font><font color="#E5E5E5"> reach in in terms of</font>

567
00:24:12,620 --> 00:24:16,959
knobs and do some stuff and it's not

568
00:24:14,150 --> 00:24:19,610
hard<font color="#CCCCCC"> to forget that you've done that so</font>

569
00:24:16,960 --> 00:24:21,049
this<font color="#CCCCCC"> is a</font><font color="#E5E5E5"> technique that with the real</font>

570
00:24:19,610 --> 00:24:24,049
bits that are flowing<font color="#E5E5E5"> through your</font>

571
00:24:21,049 --> 00:24:29,418
work you can pull out and analyze the

572
00:24:24,049 --> 00:24:32,210
implications of changes<font color="#CCCCCC"> okay so so far</font>

573
00:24:29,419 --> 00:24:35,960
<font color="#CCCCCC">we've gone through you can do useful</font>

574
00:24:32,210 --> 00:24:38,720
things with traffic data and the scaling

575
00:24:35,960 --> 00:24:40,999
is in first principles intractable you

576
00:24:38,720 --> 00:24:42,619
don't have these n cubed or n factorial

577
00:24:40,999 --> 00:24:45,919
sort of scaling numbers that say don't

578
00:24:42,619 --> 00:24:49,039
<font color="#E5E5E5">even think about it if you do this lazy</font>

579
00:24:45,919 --> 00:24:51,320
evaluation and just push your flow data

580
00:24:49,039 --> 00:24:56,090
through your current routing data the

581
00:24:51,320 --> 00:24:58,039
analysis is pretty tractable but pretty

582
00:24:56,090 --> 00:25:00,470
tractable if you're talking<font color="#E5E5E5"> about</font>

583
00:24:58,039 --> 00:25:03,679
umpteen gigabytes worth of NetFlow data

584
00:25:00,470 --> 00:25:05,509
net flow is really really wordy and if

585
00:25:03,679 --> 00:25:07,609
you're talking<font color="#CCCCCC"> about I'm team gigabytes</font>

586
00:25:05,509 --> 00:25:09,919
it doesn't mean matter if it's an N log

587
00:25:07,609 --> 00:25:12,559
n analysis the N is so freaking big

588
00:25:09,919 --> 00:25:14,779
right gigabytes is going to be slow and

589
00:25:12,559 --> 00:25:17,239
so for an operator is going to take an

590
00:25:14,779 --> 00:25:20,869
hour to put up the display that's

591
00:25:17,239 --> 00:25:25,159
unworkable so what can<font color="#CCCCCC"> you</font><font color="#E5E5E5"> do about that</font>

592
00:25:20,869 --> 00:25:27,529
well you can do lots of tuning in net

593
00:25:25,159 --> 00:25:29,359
flow but they all cost you you can

594
00:25:27,529 --> 00:25:31,730
aggregate the data by prefix you can

595
00:25:29,359 --> 00:25:34,549
aggregate it by a s but when<font color="#E5E5E5"> you do that</font>

596
00:25:31,730 --> 00:25:36,049
you can no<font color="#CCCCCC"> longer</font><font color="#E5E5E5"> see that parts of the</font>

597
00:25:34,549 --> 00:25:40,820
topology they made up that aggregate

598
00:25:36,049 --> 00:25:43,039
you're losing some detail you can make

599
00:25:40,820 --> 00:25:45,168
every any particular<font color="#CCCCCC"> netflow record</font>

600
00:25:43,039 --> 00:25:47,869
cover more of time so you can increase

601
00:25:45,169 --> 00:25:49,669
<font color="#CCCCCC">the active or inactive timeouts so that</font>

602
00:25:47,869 --> 00:25:51,830
particular records are covering more

603
00:25:49,669 --> 00:25:53,509
than<font color="#CCCCCC"> 5 minutes or</font><font color="#E5E5E5"> 30 minutes but now you</font>

604
00:25:51,830 --> 00:25:55,340
lose a lot of<font color="#E5E5E5"> temporal accuracy you</font>

605
00:25:53,509 --> 00:25:57,399
can't see where<font color="#E5E5E5"> events are in time like</font>

606
00:25:55,340 --> 00:26:01,129
you couldn't see those two minute

607
00:25:57,399 --> 00:26:04,020
outages because or they turn into<font color="#E5E5E5"> little</font>

608
00:26:01,129 --> 00:26:07,860
tiny blips rather than big<font color="#CCCCCC"> dies</font>

609
00:26:04,020 --> 00:26:09,920
or you can sample the data so decimated

610
00:26:07,860 --> 00:26:12,209
only take one out of every a thousand

611
00:26:09,920 --> 00:26:13,830
packets that go through and now you're

612
00:26:12,210 --> 00:26:19,620
losing both topological temporal

613
00:26:13,830 --> 00:26:21,840
accuracy a core problem the reason why

614
00:26:19,620 --> 00:26:24,389
net flow is so wordy is because<font color="#E5E5E5"> it's</font>

615
00:26:21,840 --> 00:26:26,310
model of the data the way that it's

616
00:26:24,390 --> 00:26:28,860
representing the data there's<font color="#E5E5E5"> absolutely</font>

617
00:26:26,310 --> 00:26:30,780
no resemblance to the data and and

618
00:26:28,860 --> 00:26:32,459
whenever there's a big mismatch between

619
00:26:30,780 --> 00:26:35,340
model and data you end up with<font color="#E5E5E5"> a</font>

620
00:26:32,460 --> 00:26:37,890
representation is really worthy so this

621
00:26:35,340 --> 00:26:41,310
silly picture over on the right the

622
00:26:37,890 --> 00:26:43,050
black line<font color="#CCCCCC"> is what typical flow data is</font>

623
00:26:41,310 --> 00:26:45,600
doing it's always<font color="#CCCCCC"> going down or going up</font>

624
00:26:43,050 --> 00:26:47,639
it's never staying the same that<font color="#E5E5E5"> stair</font>

625
00:26:45,600 --> 00:26:49,590
<font color="#E5E5E5">step thing is how net flow would have to</font>

626
00:26:47,640 --> 00:26:51,080
<font color="#CCCCCC">represent the data because that flows</font>

627
00:26:49,590 --> 00:26:53,100
what's called a piecewise constant

628
00:26:51,080 --> 00:26:57,419
approximation it gives you the average

629
00:26:53,100 --> 00:27:01,290
data value in some time interval and<font color="#E5E5E5"> so</font>

630
00:26:57,420 --> 00:27:03,870
what you see is the the flat blue lines

631
00:27:01,290 --> 00:27:06,750
flat horizontal blue lines are the<font color="#CCCCCC"> net</font>

632
00:27:03,870 --> 00:27:09,179
<font color="#E5E5E5">flow representation of that data you can</font>

633
00:27:06,750 --> 00:27:11,040
see<font color="#CCCCCC"> that it's never</font><font color="#E5E5E5"> very close to the</font>

634
00:27:09,180 --> 00:27:12,930
data and if you push the time interval

635
00:27:11,040 --> 00:27:14,340
out if you make the active time longer

636
00:27:12,930 --> 00:27:16,110
so that<font color="#CCCCCC"> you reduce the volume of the</font>

637
00:27:14,340 --> 00:27:18,240
data then the net flow gets further and

638
00:27:16,110 --> 00:27:20,689
further away from the<font color="#E5E5E5"> data which</font><font color="#CCCCCC"> is why</font>

639
00:27:18,240 --> 00:27:23,700
you're always<font color="#E5E5E5"> worried in net flow about</font>

640
00:27:20,690 --> 00:27:25,350
are you representing the average are<font color="#E5E5E5"> you</font>

641
00:27:23,700 --> 00:27:27,660
representing the max because the data

642
00:27:25,350 --> 00:27:29,040
doesn't give you a good picture the net

643
00:27:27,660 --> 00:27:30,720
flow does it give you<font color="#CCCCCC"> a good picture of</font>

644
00:27:29,040 --> 00:27:33,510
the underlying data and the natural

645
00:27:30,720 --> 00:27:34,620
values are very far away from the max

646
00:27:33,510 --> 00:27:39,629
they're only going to give you<font color="#CCCCCC"> the</font>

647
00:27:34,620 --> 00:27:41,669
average at some particular time the red

648
00:27:39,630 --> 00:27:43,910
line there is two least squares line

649
00:27:41,670 --> 00:27:46,320
segments that are fit to the black data

650
00:27:43,910 --> 00:27:48,630
and you can barely see them because

651
00:27:46,320 --> 00:27:51,510
<font color="#E5E5E5">they're pretty close</font><font color="#CCCCCC"> to the data there's</font>

652
00:27:48,630 --> 00:27:53,970
a bunch of theoretical work that says if

653
00:27:51,510 --> 00:27:56,220
you've got data that is not constant

654
00:27:53,970 --> 00:27:58,500
that's got any kind<font color="#E5E5E5"> of trend in it doing</font>

655
00:27:56,220 --> 00:28:01,560
linear segmentations is going to be way

656
00:27:58,500 --> 00:28:03,750
way better in terms of data

657
00:28:01,560 --> 00:28:04,820
representation than a piecewise constant

658
00:28:03,750 --> 00:28:07,600
approximation

659
00:28:04,820 --> 00:28:10,668
now that's not intuitively obvious

660
00:28:07,600 --> 00:28:12,889
because it takes more parameters to

661
00:28:10,669 --> 00:28:15,169
describe a line than it does to describe

662
00:28:12,889 --> 00:28:18,199
a constant net flow data's got a time

663
00:28:15,169 --> 00:28:21,320
and a level an<font color="#E5E5E5"> average</font><font color="#CCCCCC"> that's two</font>

664
00:28:18,200 --> 00:28:23,899
parameters per observation aligns got at

665
00:28:21,320 --> 00:28:25,908
least three it's got a time a level and

666
00:28:23,899 --> 00:28:30,559
a slope so it's going to be thirty

667
00:28:25,909 --> 00:28:32,779
percent more data per line<font color="#E5E5E5"> segment what</font>

668
00:28:30,559 --> 00:28:34,639
you're hoping is the line segments fit

669
00:28:32,779 --> 00:28:36,259
your raw data well enough so there's

670
00:28:34,639 --> 00:28:40,129
many fewer of them so that thirty

671
00:28:36,259 --> 00:28:42,409
percent additional<font color="#E5E5E5"> cost you eventually</font>

672
00:28:40,129 --> 00:28:46,610
amortize it over many many fewer

673
00:28:42,409 --> 00:28:48,559
observations figuring out how<font color="#CCCCCC"> to do</font>

674
00:28:46,610 --> 00:28:50,658
those line segments also seems like a

675
00:28:48,559 --> 00:28:52,490
really hard problem like there's a lot

676
00:28:50,659 --> 00:28:54,620
<font color="#CCCCCC">of different ways to</font><font color="#E5E5E5"> draw pairs of lines</font>

677
00:28:52,490 --> 00:28:56,000
across some set of data and squared

678
00:28:54,620 --> 00:28:58,250
different ways if you've got n data

679
00:28:56,000 --> 00:29:01,129
points it turns out there's this really

680
00:28:58,250 --> 00:29:04,789
cool and log n algorithm done by God is

681
00:29:01,129 --> 00:29:08,689
now at UC Riverside<font color="#E5E5E5"> iam onkyo it'll give</font>

682
00:29:04,789 --> 00:29:13,220
you a nearly optimal segmentation of the

683
00:29:08,690 --> 00:29:14,600
data for almost<font color="#E5E5E5"> zero cost it's all of</font>

684
00:29:13,220 --> 00:29:17,059
the time will be spent reading in the

685
00:29:14,600 --> 00:29:20,240
data and essentially zip in segmenting

686
00:29:17,059 --> 00:29:22,009
it and it works really well on the

687
00:29:20,240 --> 00:29:26,750
traffic data we find that<font color="#E5E5E5"> if you're</font>

688
00:29:22,009 --> 00:29:28,850
doing a segmentation using<font color="#E5E5E5"> something</font>

689
00:29:26,750 --> 00:29:31,899
similar<font color="#E5E5E5"> to Keogh's algorithm you can do</font>

690
00:29:28,850 --> 00:29:34,789
about<font color="#CCCCCC"> 16 bytes per prefix pair per hour</font>

691
00:29:31,899 --> 00:29:37,178
and get a very good representation<font color="#E5E5E5"> in a</font>

692
00:29:34,789 --> 00:29:37,179
<font color="#E5E5E5">flow data</font>

693
00:29:38,419 --> 00:29:45,200
and I'm over so here's a picture of that

694
00:29:42,220 --> 00:29:47,779
<font color="#E5E5E5">this is 10 hours of NetFlow data it was</font>

695
00:29:45,200 --> 00:29:51,739
500 megabytes it had been prefix

696
00:29:47,779 --> 00:29:53,869
aggregated and sampled up it was ooh the

697
00:29:51,739 --> 00:29:55,700
blue line drawn through there is the

698
00:29:53,869 --> 00:29:58,639
linear<font color="#E5E5E5"> least-squares segmentation</font><font color="#CCCCCC"> Q's</font>

699
00:29:55,700 --> 00:30:02,389
algorithm it takes 64 bytes<font color="#E5E5E5"> so that's a</font>

700
00:29:58,639 --> 00:30:04,039
factor of 10<font color="#E5E5E5"> million compression see if</font>

701
00:30:02,389 --> 00:30:05,330
hyssop data pretty well in the places

702
00:30:04,039 --> 00:30:07,158
where it<font color="#E5E5E5"> doesn't fit those little</font>

703
00:30:05,330 --> 00:30:08,928
ripples in the data those are all

704
00:30:07,159 --> 00:30:10,639
<font color="#E5E5E5">artifacts of net flow if you look at</font>

705
00:30:08,929 --> 00:30:12,529
them<font color="#E5E5E5"> they're</font><font color="#CCCCCC"> all at five</font><font color="#E5E5E5"> minutes or 30</font>

706
00:30:10,639 --> 00:30:14,449
minute intervals they have to do with

707
00:30:12,529 --> 00:30:16,190
the net flow cash<font color="#CCCCCC"> time out</font><font color="#E5E5E5"> netflow makes</font>

708
00:30:14,450 --> 00:30:18,259
it<font color="#E5E5E5"> look like you get a lot of data</font>

709
00:30:16,190 --> 00:30:19,580
whenever<font color="#E5E5E5"> the cash times out because</font>

710
00:30:18,259 --> 00:30:21,200
that's when the values are flushed and

711
00:30:19,580 --> 00:30:23,330
then there's a long dead period well new

712
00:30:21,200 --> 00:30:25,580
things are coming in and populating the

713
00:30:23,330 --> 00:30:27,439
cash so<font color="#CCCCCC"> an all NetFlow data you get some</font>

714
00:30:25,580 --> 00:30:31,369
ripples this gets rid of all of that

715
00:30:27,440 --> 00:30:34,519
<font color="#E5E5E5">junk shows you the real data in a fairly</font>

716
00:30:31,369 --> 00:30:36,139
fabulous compression other issue so you

717
00:30:34,519 --> 00:30:39,889
can get<font color="#E5E5E5"> the data volume down but you</font>

718
00:30:36,139 --> 00:30:42,289
<font color="#E5E5E5">still got zillions of prefixes seeing</font>

719
00:30:39,889 --> 00:30:44,658
like half a<font color="#E5E5E5"> million an hour this is</font>

720
00:30:42,289 --> 00:30:46,489
almost entirely one of Microsoft's gifts

721
00:30:44,659 --> 00:30:49,489
to the<font color="#CCCCCC"> Internet all of those prefixes</font>

722
00:30:46,489 --> 00:30:52,519
are various viruses that are probing for

723
00:30:49,489 --> 00:30:54,559
new Windows machines to infect they look

724
00:30:52,519 --> 00:30:56,239
like just a random<font color="#CCCCCC"> cosmic ray background</font>

725
00:30:54,559 --> 00:30:58,340
they're uniformly distributed across the

726
00:30:56,239 --> 00:31:00,559
<font color="#CCCCCC">Internet there's no information in them</font>

727
00:30:58,340 --> 00:31:01,939
if you want to analyze what's going on

728
00:31:00,559 --> 00:31:04,369
you can also like to get rid of them

729
00:31:01,940 --> 00:31:08,269
there<font color="#CCCCCC"> are general statistical techniques</font>

730
00:31:04,369 --> 00:31:11,570
to do that nikto feel that AT&T research

731
00:31:08,269 --> 00:31:14,690
has done a wonderful algorithm called a

732
00:31:11,570 --> 00:31:17,418
priority sampling that lets you trim off

733
00:31:14,690 --> 00:31:19,149
the tail of a large data set and still

734
00:31:17,419 --> 00:31:21,350
get something new that you can analyze

735
00:31:19,149 --> 00:31:24,080
where you can analyze aggregates and

736
00:31:21,350 --> 00:31:25,668
components of it but since we've got

737
00:31:24,080 --> 00:31:28,428
topological data you can actually<font color="#E5E5E5"> do a</font>

738
00:31:25,669 --> 00:31:31,609
lot better than that by using the

739
00:31:28,429 --> 00:31:33,919
topological data to aggregate and the

740
00:31:31,609 --> 00:31:36,019
model<font color="#E5E5E5"> for that is a lot like the inverse</font>

741
00:31:33,919 --> 00:31:38,450
of drawing those graphs you start out at

742
00:31:36,019 --> 00:31:40,399
the edge you say I've got all<font color="#CCCCCC"> of these</font>

743
00:31:38,450 --> 00:31:43,190
addresses which is you know some<font color="#CCCCCC"> host in</font>

744
00:31:40,399 --> 00:31:45,830
China or Romania that's busy probing me

745
00:31:43,190 --> 00:31:48,030
trying<font color="#CCCCCC"> to infect my window machines it's</font>

746
00:31:45,830 --> 00:31:51,480
<font color="#E5E5E5">a very low bit rate because</font>

747
00:31:48,030 --> 00:31:54,760
some residential host is great limited I

748
00:31:51,480 --> 00:31:57,070
can walk up the graph from that host

749
00:31:54,760 --> 00:31:59,530
towards me and I've got<font color="#CCCCCC"> some threshold</font>

750
00:31:57,070 --> 00:32:01,649
where I say<font color="#CCCCCC"> okay if it's below 300</font>

751
00:31:59,530 --> 00:32:05,920
kilobits per second is virus traffic

752
00:32:01,650 --> 00:32:08,890
it's just the background Microsoft

753
00:32:05,920 --> 00:32:10,420
fibers background still a<font color="#CCCCCC"> bond's you</font>

754
00:32:08,890 --> 00:32:12,460
walk out<font color="#CCCCCC"> the graph to you hit a node</font>

755
00:32:10,420 --> 00:32:14,830
where the aggregate traffic is more than

756
00:32:12,460 --> 00:32:17,170
300 kilobits and at<font color="#CCCCCC"> that point you</font>

757
00:32:14,830 --> 00:32:19,570
aggregate the whole tree you know all of

758
00:32:17,170 --> 00:32:21,130
these blue guys into one node and you

759
00:32:19,570 --> 00:32:24,010
say<font color="#E5E5E5"> okay this is</font><font color="#CCCCCC"> the virus background</font>

760
00:32:21,130 --> 00:32:25,540
this<font color="#E5E5E5"> coming in at this node and these</font>

761
00:32:24,010 --> 00:32:27,520
trees<font color="#E5E5E5"> tend to be pretty large it's not</font>

762
00:32:25,540 --> 00:32:29,590
just the eight nodes that are shown here

763
00:32:27,520 --> 00:32:31,389
but the place where you get above

764
00:32:29,590 --> 00:32:33,520
threshold you've usually aggregated a

765
00:32:31,390 --> 00:32:35,710
few hundred notes and you're<font color="#CCCCCC"> doing this</font>

766
00:32:33,520 --> 00:32:38,889
all<font color="#CCCCCC"> over your topology so you're keeping</font>

767
00:32:35,710 --> 00:32:40,600
the places in the global<font color="#E5E5E5"> internet</font>

768
00:32:38,890 --> 00:32:42,400
apology where the virus traffic gets big

769
00:32:40,600 --> 00:32:44,770
you can still find<font color="#E5E5E5"> that hey China is</font>

770
00:32:42,400 --> 00:32:46,900
sending me most of my virus traffic but

771
00:32:44,770 --> 00:32:52,030
you can't figure<font color="#E5E5E5"> out which particular</font>

772
00:32:46,900 --> 00:32:54,880
prefix in China is doing it and result

773
00:32:52,030 --> 00:32:56,440
of that if you go to a linear least

774
00:32:54,880 --> 00:33:00,640
square segmentation you do with these

775
00:32:56,440 --> 00:33:02,920
more efficient line segments then and

776
00:33:00,640 --> 00:33:04,570
you're aggregating all these junk

777
00:33:02,920 --> 00:33:05,440
prefixes so that you don't have half a

778
00:33:04,570 --> 00:33:08,020
million of them<font color="#CCCCCC"> you're doing</font>

779
00:33:05,440 --> 00:33:10,030
segmentation on larger aggregates you

780
00:33:08,020 --> 00:33:11,620
get some really<font color="#E5E5E5"> nice data volumes you</font>

781
00:33:10,030 --> 00:33:13,660
turn those gigabytes worth of net flow

782
00:33:11,620 --> 00:33:15,790
down into kilobytes it's about<font color="#E5E5E5"> 200</font>

783
00:33:13,660 --> 00:33:17,770
<font color="#E5E5E5">kilobytes per hour per gigabit per</font>

784
00:33:15,790 --> 00:33:23,440
second of Nephilim<font color="#E5E5E5"> and with that you're</font>

785
00:33:17,770 --> 00:33:26,590
<font color="#CCCCCC">looking at and that</font><font color="#E5E5E5"> means that you can</font>

786
00:33:23,440 --> 00:33:28,750
fit if you're monitoring a gig ether you

787
00:33:26,590 --> 00:33:30,970
can fit an entire years worth of data on

788
00:33:28,750 --> 00:33:35,730
one<font color="#E5E5E5"> disk</font>

789
00:33:30,970 --> 00:33:35,730
um wishes happy

790
00:33:36,620 --> 00:33:44,439
so

791
00:33:39,309 --> 00:33:47,649
conclusions I so it works you if you do

792
00:33:44,440 --> 00:33:49,480
<font color="#E5E5E5">this lazy demand your computation you</font>

793
00:33:47,649 --> 00:33:51,189
can get a detailed view of all of your

794
00:33:49,480 --> 00:33:53,590
behaviors so if you need<font color="#E5E5E5"> for operations</font>

795
00:33:51,190 --> 00:33:55,059
stuff you need for business you don't

796
00:33:53,590 --> 00:34:00,850
need to<font color="#E5E5E5"> babysit this thing you hook it</font>

797
00:33:55,059 --> 00:34:03,279
up and<font color="#E5E5E5"> it dumps pictures out at you you</font>

798
00:34:00,850 --> 00:34:04,928
can get a usable amount of data for

799
00:34:03,279 --> 00:34:06,460
things like business purposes or

800
00:34:04,929 --> 00:34:08,829
forensic analysis you can get a year's

801
00:34:06,460 --> 00:34:11,889
worth of data for a<font color="#CCCCCC"> medium sized I as</font>

802
00:34:08,829 --> 00:34:13,929
piano<font color="#CCCCCC"> disk and you can do it today the</font>

803
00:34:11,889 --> 00:34:16,899
all the technology is pretty<font color="#E5E5E5"> much</font>

804
00:34:13,929 --> 00:34:19,030
available we're really<font color="#E5E5E5"> grateful for to</font>

805
00:34:16,899 --> 00:34:21,129
Randy<font color="#CCCCCC"> Bush for initially pointing us in</font>

806
00:34:19,030 --> 00:34:22,990
this direction and we're deeply in debt

807
00:34:21,129 --> 00:34:25,000
to<font color="#CCCCCC"> Daryl Newcomb of scenic who has been</font>

808
00:34:22,989 --> 00:34:28,479
beta testing this and giving a state and

809
00:34:25,000 --> 00:34:31,560
finding her bugs and all that stuff all

810
00:34:28,480 --> 00:34:31,560
that<font color="#E5E5E5"> questions</font>

811
00:34:37,609 --> 00:34:43,750
Michael Sinatra

812
00:34:39,969 --> 00:34:46,689
Michael Sinatra UC Berkeley<font color="#E5E5E5"> just two</font>

813
00:34:43,750 --> 00:34:49,179
quick comments on the 128 32 prefix

814
00:34:46,690 --> 00:34:52,030
traffic I'm pretty sure that's

815
00:34:49,179 --> 00:34:54,970
intentional I can't<font color="#E5E5E5"> remember why but we</font>

816
00:34:52,030 --> 00:34:56,379
did do that for a reason<font color="#E5E5E5"> ah and the</font>

817
00:34:54,969 --> 00:34:58,118
other interesting thing that<font color="#CCCCCC"> you may not</font>

818
00:34:56,379 --> 00:35:00,819
have noticed is that none of the traffic

819
00:34:58,119 --> 00:35:02,560
from Berkeley to cogent goes through any

820
00:35:00,820 --> 00:35:04,390
<font color="#E5E5E5">of those for isp routers that you were</font>

821
00:35:02,560 --> 00:35:06,430
looking at<font color="#E5E5E5"> and that's due to a community</font>

822
00:35:04,390 --> 00:35:08,830
string issue between us and scenic that

823
00:35:06,430 --> 00:35:10,118
we<font color="#E5E5E5"> just haven't bothered to resolve so</font>

824
00:35:08,830 --> 00:35:11,230
there<font color="#E5E5E5"> are some lot lots of interesting</font>

825
00:35:10,119 --> 00:35:14,770
<font color="#CCCCCC">things and</font><font color="#E5E5E5"> I</font><font color="#CCCCCC"> just thought</font><font color="#E5E5E5"> you might want</font>

826
00:35:11,230 --> 00:35:16,450
to know<font color="#E5E5E5"> about that cool thank you how do</font>

827
00:35:14,770 --> 00:35:20,320
<font color="#CCCCCC">I feed you</font><font color="#E5E5E5"> to pop I'm sorry Randy bush</font>

828
00:35:16,450 --> 00:35:25,029
Raj how do i feed apology to you how do

829
00:35:20,320 --> 00:35:28,000
you beat to UM it the way I did these

830
00:35:25,030 --> 00:35:30,790
pictures was I I went to hop oh and said

831
00:35:28,000 --> 00:35:34,540
give me the topology and he sucked it

832
00:35:30,790 --> 00:35:37,119
out of a route explorer for for just the

833
00:35:34,540 --> 00:35:39,520
<font color="#E5E5E5">BGP topology you know it's any kind of</font>

834
00:35:37,119 --> 00:35:43,480
passive<font color="#E5E5E5"> here you zebra something like</font>

835
00:35:39,520 --> 00:35:48,930
<font color="#CCCCCC">that there's the work that how about</font>

836
00:35:43,480 --> 00:35:50,980
internal um will you so<font color="#CCCCCC"> l essays yeah so</font>

837
00:35:48,930 --> 00:35:54,790
you want something<font color="#E5E5E5"> that's generating</font>

838
00:35:50,980 --> 00:35:58,510
your<font color="#CCCCCC"> igp yesterday I heard that extreme</font>

839
00:35:54,790 --> 00:36:01,900
Nick teamster is extending his rudder

840
00:35:58,510 --> 00:36:03,460
configs validation stuff to handle<font color="#CCCCCC"> IGP</font>

841
00:36:01,900 --> 00:36:07,240
so it<font color="#E5E5E5"> seems like</font><font color="#CCCCCC"> that would</font><font color="#E5E5E5"> be a great</font>

842
00:36:03,460 --> 00:36:08,740
source<font color="#E5E5E5"> of igp topology and he's already</font>

843
00:36:07,240 --> 00:36:13,109
got bgp and that might be a way of

844
00:36:08,740 --> 00:36:18,040
<font color="#E5E5E5">getting the size topology data</font><font color="#CCCCCC"> okay so</font>

845
00:36:13,109 --> 00:36:20,319
but<font color="#CCCCCC"> i can't just you know you you don't</font>

846
00:36:18,040 --> 00:36:22,270
<font color="#CCCCCC">have a AGP front end that i can just</font>

847
00:36:20,320 --> 00:36:23,830
head to my<font color="#E5E5E5"> GP mess you pick up the l</font>

848
00:36:22,270 --> 00:36:27,960
essays and you've got the apology for

849
00:36:23,830 --> 00:36:27,960
instance um so there's two

850
00:36:28,730 --> 00:36:33,900
so we would<font color="#CCCCCC"> be delighted if you end</font>

851
00:36:31,740 --> 00:36:36,620
bought a rod<font color="#CCCCCC"> explored to suck the</font>

852
00:36:33,900 --> 00:36:38,850
topology out and there<font color="#CCCCCC"> is an xml RPC</font>

853
00:36:36,620 --> 00:36:42,779
interface that will suck the topology

854
00:36:38,850 --> 00:36:47,839
out but you don't need to buy a router

855
00:36:42,780 --> 00:36:47,840
<font color="#CCCCCC">swear it is oh cool thanks</font>

