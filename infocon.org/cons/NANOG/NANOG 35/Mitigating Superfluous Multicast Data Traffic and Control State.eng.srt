1
00:00:00,000 --> 00:00:05,759
I have a<font color="#E5E5E5"> feeling that those graphs are</font>

2
00:00:04,019 --> 00:00:09,660
going to be peaking it for the<font color="#E5E5E5"> next 20</font>

3
00:00:05,759 --> 00:00:11,010
minutes I think<font color="#CCCCCC"> it's requirement that we</font>

4
00:00:09,660 --> 00:00:13,139
have a multicast talked every couple of

5
00:00:11,010 --> 00:00:14,790
minutes<font color="#E5E5E5"> so that's what this talk is</font>

6
00:00:13,139 --> 00:00:17,369
about I only have 20<font color="#CCCCCC"> minutes but</font><font color="#E5E5E5"> I have</font>

7
00:00:14,790 --> 00:00:19,349
about 60 slides if you<font color="#CCCCCC"> can</font><font color="#E5E5E5"> make it out</font>

8
00:00:17,369 --> 00:00:21,270
<font color="#CCCCCC">in</font><font color="#E5E5E5"> the slides there's actually the</font>

9
00:00:19,350 --> 00:00:22,590
titles will<font color="#CCCCCC"> be either blue or red and</font>

10
00:00:21,270 --> 00:00:24,029
the ones that are blue i'm actually

11
00:00:22,590 --> 00:00:25,859
going to stop on the rest i'm just going

12
00:00:24,029 --> 00:00:31,800
<font color="#CCCCCC">to skip and those will be for posterity</font>

13
00:00:25,859 --> 00:00:34,410
and for your reference so to give you

14
00:00:31,800 --> 00:00:36,149
kind of an idea<font color="#E5E5E5"> of about multicast</font>

15
00:00:34,410 --> 00:00:38,578
deployment and not to encourage it or

16
00:00:36,149 --> 00:00:42,149
discourage it at all but to illuminate

17
00:00:38,579 --> 00:00:44,460
what some potential problems might exist

18
00:00:42,149 --> 00:00:46,559
or how widespread they might be for

19
00:00:44,460 --> 00:00:48,450
multicast today looking at<font color="#CCCCCC"> Marshall</font>

20
00:00:46,559 --> 00:00:51,300
eubanks excellent site on status of

21
00:00:48,450 --> 00:00:54,570
multicast we see there's about 450<font color="#CCCCCC"> asns</font>

22
00:00:51,300 --> 00:00:58,940
their advertising approximately 7,500 em

23
00:00:54,570 --> 00:01:01,050
bgp routes that is NRL nlr i equal to<font color="#CCCCCC"> 2</font>

24
00:00:58,940 --> 00:01:03,149
it doesn't sound<font color="#CCCCCC"> like a whole lot but</font>

25
00:01:01,050 --> 00:01:05,009
when you actually extrapolate that out

26
00:01:03,149 --> 00:01:06,990
it actually comes to<font color="#E5E5E5"> almost 250 million</font>

27
00:01:05,010 --> 00:01:10,080
addresses which then actually sounds

28
00:01:06,990 --> 00:01:11,580
<font color="#E5E5E5">like quite a bit but if you really think</font>

29
00:01:10,080 --> 00:01:14,369
about it<font color="#E5E5E5"> really all that tells you is</font>

30
00:01:11,580 --> 00:01:17,009
reach ability to really borders at<font color="#CCCCCC"> the a</font>

31
00:01:14,369 --> 00:01:19,590
s what you really would like to know is

32
00:01:17,009 --> 00:01:21,390
what multicast interfaces are enabled

33
00:01:19,590 --> 00:01:23,220
within<font color="#CCCCCC"> EAS and it's</font><font color="#E5E5E5"> probably much much</font>

34
00:01:21,390 --> 00:01:25,409
lower so we don't<font color="#E5E5E5"> really have a good</font>

35
00:01:23,220 --> 00:01:28,590
<font color="#CCCCCC">idea of really</font><font color="#E5E5E5"> how widespread coverage</font>

36
00:01:25,409 --> 00:01:30,600
is at least on the global Internet I'm

37
00:01:28,590 --> 00:01:32,400
the converse to it might also be that

38
00:01:30,600 --> 00:01:34,439
there's a lot of organizations and I

39
00:01:32,400 --> 00:01:36,479
know at least a handful particularly

40
00:01:34,439 --> 00:01:39,240
cable TV providers who do multicast for

41
00:01:36,479 --> 00:01:41,490
their video<font color="#E5E5E5"> over IP content that tend</font>

42
00:01:39,240 --> 00:01:43,100
not to actually<font color="#E5E5E5"> advertise that sort of</font>

43
00:01:41,490 --> 00:01:45,449
thing out to the public internet either

44
00:01:43,100 --> 00:01:47,640
you can also look at something called

45
00:01:45,450 --> 00:01:50,130
the source announcements<font color="#E5E5E5"> the essays in</font>

46
00:01:47,640 --> 00:01:51,899
the msdp tables found on the internet

47
00:01:50,130 --> 00:01:54,600
and that might give you an idea of how

48
00:01:51,899 --> 00:01:57,210
<font color="#E5E5E5">large or not multicast is being used</font>

49
00:01:54,600 --> 00:01:59,460
today and if you kind<font color="#E5E5E5"> of remove some of</font>

50
00:01:57,210 --> 00:02:01,889
the the junk which would be scans or

51
00:01:59,460 --> 00:02:03,990
just mistakes miss configuration testing

52
00:02:01,890 --> 00:02:05,640
you might<font color="#E5E5E5"> come up with about</font><font color="#CCCCCC"> 1,300</font>

53
00:02:03,990 --> 00:02:06,658
essays being announced which is a pretty

54
00:02:05,640 --> 00:02:08,848
good number

55
00:02:06,659 --> 00:02:10,530
I don't know how many<font color="#CCCCCC"> of those you would</font>

56
00:02:08,848 --> 00:02:12,179
actually any of<font color="#E5E5E5"> us would actually use</font>

57
00:02:10,530 --> 00:02:14,459
maybe just a very small<font color="#E5E5E5"> handful out of</font>

58
00:02:12,180 --> 00:02:16,019
that but<font color="#CCCCCC"> certainly at least legitimate</font>

59
00:02:14,459 --> 00:02:19,530
source announcements<font color="#E5E5E5"> that are that are</font>

60
00:02:16,019 --> 00:02:21,930
out there in the tables I'm actually

61
00:02:19,530 --> 00:02:23,549
kind of curious if those stats match up

62
00:02:21,930 --> 00:02:25,170
at all with the operators here in the

63
00:02:23,549 --> 00:02:27,780
group just<font color="#E5E5E5"> by a show of hands how many</font>

64
00:02:25,170 --> 00:02:29,640
of you do some multicast even if it's

65
00:02:27,780 --> 00:02:33,840
not<font color="#E5E5E5"> inter domain or msdp but maybe do</font>

66
00:02:29,640 --> 00:02:36,809
some video over IP at all anyone just

67
00:02:33,840 --> 00:02:39,690
<font color="#CCCCCC">raised a hand okay so that's close to</font>

68
00:02:36,810 --> 00:02:42,150
five or ten percent so 20 minutes is

69
00:02:39,690 --> 00:02:44,519
more than enough so if you're<font color="#CCCCCC"> thinking</font>

70
00:02:42,150 --> 00:02:46,530
about<font color="#E5E5E5"> it then even for a few providers</font>

71
00:02:44,519 --> 00:02:48,150
<font color="#CCCCCC">or cable TV DSL providers are thinking</font>

72
00:02:46,530 --> 00:02:50,459
about video over IP some of this might

73
00:02:48,150 --> 00:02:53,340
matter because by default unless you do

74
00:02:50,459 --> 00:02:55,440
otherwise just<font color="#E5E5E5"> by enabling multicast you</font>

75
00:02:53,340 --> 00:02:57,209
you get a host<font color="#E5E5E5"> that can send to any</font>

76
00:02:55,440 --> 00:03:00,359
group<font color="#CCCCCC"> at</font><font color="#E5E5E5"> and a host that can receive any</font>

77
00:02:57,209 --> 00:03:01,799
group now there's certainly flooding

78
00:03:00,359 --> 00:03:04,560
issues with that<font color="#CCCCCC"> and eavesdropping</font>

79
00:03:01,799 --> 00:03:07,349
issues not too concerned about those the

80
00:03:04,560 --> 00:03:09,810
issue for this group<font color="#E5E5E5"> here the people</font><font color="#CCCCCC"> in</font>

81
00:03:07,349 --> 00:03:13,950
this<font color="#E5E5E5"> room is that of network control</font>

82
00:03:09,810 --> 00:03:16,889
state for<font color="#E5E5E5"> the most part it's quite a bit</font>

83
00:03:13,950 --> 00:03:18,839
<font color="#E5E5E5">different than unicast and unicast the</font>

84
00:03:16,889 --> 00:03:20,670
only thing that<font color="#CCCCCC"> you have</font><font color="#E5E5E5"> where</font><font color="#CCCCCC"> host</font>

85
00:03:18,840 --> 00:03:22,739
actually induce<font color="#CCCCCC"> a network state in your</font>

86
00:03:20,670 --> 00:03:25,290
network is with bridge address tables

87
00:03:22,739 --> 00:03:26,639
learning where host our imports and arp

88
00:03:25,290 --> 00:03:29,130
tables at least those<font color="#E5E5E5"> the only two I can</font>

89
00:03:26,639 --> 00:03:31,169
think<font color="#E5E5E5"> of but if if you were to imagine</font>

90
00:03:29,130 --> 00:03:33,660
that<font color="#E5E5E5"> host could actually inject BGP</font>

91
00:03:31,169 --> 00:03:34,889
routes into your into your network that

92
00:03:33,660 --> 00:03:36,569
sounds<font color="#E5E5E5"> like a pretty scary thing but</font>

93
00:03:34,889 --> 00:03:38,519
that's essentially what happens with

94
00:03:36,569 --> 00:03:40,888
multicast hosts<font color="#E5E5E5"> to actually instantiate</font>

95
00:03:38,519 --> 00:03:42,299
network state and so it's a kind<font color="#CCCCCC"> of a</font>

96
00:03:40,889 --> 00:03:44,130
dangerous thing and particularly where

97
00:03:42,299 --> 00:03:45,750
most people who do multicast tend to

98
00:03:44,130 --> 00:03:47,220
have their multicast protocols all

99
00:03:45,750 --> 00:03:48,810
running<font color="#E5E5E5"> on the same routers that the</font>

100
00:03:47,220 --> 00:03:50,700
unicast routing protocols are running on

101
00:03:48,810 --> 00:03:52,650
so if you end<font color="#E5E5E5"> up having a problem with</font>

102
00:03:50,700 --> 00:03:53,880
your multicast infrastructure it can

103
00:03:52,650 --> 00:03:55,829
very well take down your unicast

104
00:03:53,880 --> 00:03:59,400
infrastructure and<font color="#E5E5E5"> we certainly have</font>

105
00:03:55,829 --> 00:04:00,840
seen that in<font color="#E5E5E5"> the past so there's two</font>

106
00:03:59,400 --> 00:04:02,579
areas of concern there's the open

107
00:04:00,840 --> 00:04:05,099
receiver model on<font color="#CCCCCC"> the open slender model</font>

108
00:04:02,579 --> 00:04:07,919
and they both have similar related

109
00:04:05,099 --> 00:04:09,268
concerns in the open receiver model a

110
00:04:07,919 --> 00:04:11,489
host signals interest in a group by

111
00:04:09,269 --> 00:04:13,379
saying an igmp message that first top

112
00:04:11,489 --> 00:04:14,510
router will maintain state for any

113
00:04:13,379 --> 00:04:17,269
groups that it knows the

114
00:04:14,510 --> 00:04:19,269
there's interest for that interface so

115
00:04:17,269 --> 00:04:22,010
you have that one table there with igmp

116
00:04:19,269 --> 00:04:24,020
you also typically get at least a star

117
00:04:22,010 --> 00:04:27,770
comma<font color="#CCCCCC"> gee that is any source Citigroup</font>

118
00:04:24,020 --> 00:04:30,260
and a specific source and a group state

119
00:04:27,770 --> 00:04:32,240
on<font color="#E5E5E5"> the interface you probably also get</font>

120
00:04:30,260 --> 00:04:34,760
additional<font color="#E5E5E5"> Penn State upstream towards</font>

121
00:04:32,240 --> 00:04:36,470
your rendezvous point as well as any

122
00:04:34,760 --> 00:04:39,020
state needed<font color="#E5E5E5"> to get</font><font color="#CCCCCC"> to other sources and</font>

123
00:04:36,470 --> 00:04:41,120
receivers so just by this simple joining

124
00:04:39,020 --> 00:04:43,520
of one host to a group you end up

125
00:04:41,120 --> 00:04:45,620
getting multiple instantiations of<font color="#E5E5E5"> state</font>

126
00:04:43,520 --> 00:04:48,198
in your network so potentially not good

127
00:04:45,620 --> 00:04:50,600
if someone was to actually create a

128
00:04:48,199 --> 00:04:51,979
havoc for you then you<font color="#E5E5E5"> have layer</font><font color="#CCCCCC"> 2</font>

129
00:04:50,600 --> 00:04:54,169
devices that have to do a lot<font color="#E5E5E5"> of work</font>

130
00:04:51,979 --> 00:04:56,270
<font color="#E5E5E5">unless</font><font color="#CCCCCC"> you want your multicast to be</font>

131
00:04:54,169 --> 00:04:58,159
flooded to all ports if you just<font color="#CCCCCC"> had a</font>

132
00:04:56,270 --> 00:05:00,198
hub typically<font color="#E5E5E5"> most people are deploying</font>

133
00:04:58,160 --> 00:05:03,740
switches today that have igmp snooping

134
00:05:00,199 --> 00:05:05,660
<font color="#CCCCCC">built-in and to do igmp snooping</font>

135
00:05:03,740 --> 00:05:07,280
actually requires quite a bit of effort

136
00:05:05,660 --> 00:05:09,050
you need to look at all the packets

137
00:05:07,280 --> 00:05:11,000
going by so there's a layering violation

138
00:05:09,050 --> 00:05:12,860
you need to be looking<font color="#E5E5E5"> for I</font><font color="#CCCCCC"> jimping</font>

139
00:05:11,000 --> 00:05:14,270
queries and reports you end up spoofing

140
00:05:12,860 --> 00:05:17,210
those you got to<font color="#CCCCCC"> maintain the</font><font color="#E5E5E5"> port to</font>

141
00:05:14,270 --> 00:05:18,948
group address tables so there's a<font color="#E5E5E5"> lot of</font>

142
00:05:17,210 --> 00:05:20,719
effort there and if your engine switches

143
00:05:18,949 --> 00:05:23,870
aren't up to the task they could fall

144
00:05:20,720 --> 00:05:26,449
over<font color="#E5E5E5"> and then put just in this example</font>

145
00:05:23,870 --> 00:05:28,400
of a flooding issue if<font color="#E5E5E5"> you have an</font>

146
00:05:26,449 --> 00:05:30,490
interested receiver asking for specific

147
00:05:28,400 --> 00:05:34,820
groups maybe one or more<font color="#E5E5E5"> but it's</font>

148
00:05:30,490 --> 00:05:36,620
<font color="#E5E5E5">received path capacity is less than the</font>

149
00:05:34,820 --> 00:05:38,270
capacity that<font color="#E5E5E5"> the group sending rate is</font>

150
00:05:36,620 --> 00:05:39,560
then there's an obvious flooding issue

151
00:05:38,270 --> 00:05:40,880
there so how do you actually<font color="#E5E5E5"> deal with</font>

152
00:05:39,560 --> 00:05:43,729
something like<font color="#E5E5E5"> that how do you control</font>

153
00:05:40,880 --> 00:05:46,880
group membership or the rate group sends

154
00:05:43,729 --> 00:05:49,520
or receives and similar kinds<font color="#E5E5E5"> of things</font>

155
00:05:46,880 --> 00:05:50,810
in the open sender model you have any

156
00:05:49,520 --> 00:05:52,909
time someone sends a packet to a

157
00:05:50,810 --> 00:05:55,699
multicast group the<font color="#E5E5E5"> first time that</font>

158
00:05:52,910 --> 00:05:57,440
happens<font color="#CCCCCC"> you're your</font><font color="#E5E5E5"> pim dr router</font>

159
00:05:55,699 --> 00:05:59,840
designate a router has to take that

160
00:05:57,440 --> 00:06:02,690
packet encapsulate it in a unicast

161
00:05:59,840 --> 00:06:04,669
packet send it up to the RP so that's

162
00:06:02,690 --> 00:06:06,260
processing workload twice you have to do

163
00:06:04,669 --> 00:06:07,870
it at the dr and<font color="#E5E5E5"> then you have to be</font>

164
00:06:06,260 --> 00:06:10,310
encapsulated at the arc

165
00:06:07,870 --> 00:06:12,289
so that's<font color="#E5E5E5"> quite a bit a bit of effort</font>

166
00:06:10,310 --> 00:06:13,580
just to get multicast to heaven then

167
00:06:12,289 --> 00:06:15,560
again<font color="#CCCCCC"> you have penn state that happens</font>

168
00:06:13,580 --> 00:06:17,900
around the network you get a packet

169
00:06:15,560 --> 00:06:19,909
replication to get the packets to be

170
00:06:17,900 --> 00:06:22,429
flooded out to all<font color="#CCCCCC"> the grips where</font>

171
00:06:19,909 --> 00:06:23,779
there's branches most hardware might not

172
00:06:22,430 --> 00:06:25,009
have a problem with that generally<font color="#E5E5E5"> but</font>

173
00:06:23,779 --> 00:06:26,389
there are certain cases and certain

174
00:06:25,009 --> 00:06:28,509
<font color="#E5E5E5">types of hardware where that's a</font><font color="#CCCCCC"> cpu</font>

175
00:06:26,389 --> 00:06:31,370
pump to do that packet replication and

176
00:06:28,509 --> 00:06:33,349
then another issue of control state and

177
00:06:31,370 --> 00:06:34,789
<font color="#CCCCCC">the sender model is you have msdp if</font>

178
00:06:33,349 --> 00:06:36,650
you're doing<font color="#CCCCCC"> inter-domain peering or if</font>

179
00:06:34,789 --> 00:06:38,469
you're doing appearing between<font color="#CCCCCC"> PEM</font>

180
00:06:36,650 --> 00:06:40,580
domains you have to keep track of

181
00:06:38,469 --> 00:06:43,159
sources between these<font color="#CCCCCC"> pim domains and</font>

182
00:06:40,580 --> 00:06:45,289
you do that using msdp and<font color="#CCCCCC"> ms.vp</font><font color="#E5E5E5"> is just</font>

183
00:06:43,159 --> 00:06:48,860
a simple flooding protocol that simply

184
00:06:45,289 --> 00:06:50,539
takes any source group tupple and just

185
00:06:48,860 --> 00:06:52,909
sends that on as a flood to all the

186
00:06:50,539 --> 00:06:54,800
other msdp speakers and so you can

187
00:06:52,909 --> 00:06:56,270
imagine the issues you might have there

188
00:06:54,800 --> 00:06:58,819
because you can have any combination of

189
00:06:56,270 --> 00:07:00,740
<font color="#E5E5E5">a source address in a group address so</font>

190
00:06:58,819 --> 00:07:03,169
<font color="#E5E5E5">your msdp messages could grow</font>

191
00:07:00,740 --> 00:07:05,180
exponentially<font color="#CCCCCC"> then as an example of a</font>

192
00:07:03,169 --> 00:07:07,099
flood style attack if<font color="#E5E5E5"> you are a sender</font>

193
00:07:05,180 --> 00:07:08,719
and you could send to a widely dispersed

194
00:07:07,099 --> 00:07:10,580
well-connected multicast group and

195
00:07:08,719 --> 00:07:12,979
actually solicit a response from all

196
00:07:10,580 --> 00:07:14,659
those group members you<font color="#CCCCCC"> have a potential</font>

197
00:07:12,979 --> 00:07:17,150
there for a nice<font color="#CCCCCC"> smurf style attack</font>

198
00:07:14,659 --> 00:07:20,240
especially so if you can spoof that

199
00:07:17,150 --> 00:07:21,979
source address as well these are issues

200
00:07:20,240 --> 00:07:24,409
<font color="#E5E5E5">in the kind of the default multicast</font>

201
00:07:21,979 --> 00:07:28,699
model that's been going being deployed

202
00:07:24,409 --> 00:07:30,169
for the last few years it's real quick

203
00:07:28,699 --> 00:07:34,159
me to give you an<font color="#CCCCCC"> overview of the 2 to 4</font>

204
00:07:30,169 --> 00:07:36,770
/ 4 address space the first / 24 in this

205
00:07:34,159 --> 00:07:38,300
net block is really for<font color="#E5E5E5"> link local only</font>

206
00:07:36,770 --> 00:07:39,948
you don't have to do anything routers by

207
00:07:38,300 --> 00:07:42,439
default today<font color="#E5E5E5"> won't forward anything</font>

208
00:07:39,949 --> 00:07:44,029
that's to this destination address for

209
00:07:42,439 --> 00:07:45,139
things like router protocols or pimple

210
00:07:44,029 --> 00:07:47,120
<font color="#CCCCCC">Oh messages</font><font color="#E5E5E5"> and that sort of thing</font>

211
00:07:45,139 --> 00:07:49,310
there's a whole bunch<font color="#E5E5E5"> of space that's</font>

212
00:07:47,120 --> 00:07:51,800
reserved bunch of / aids in fact quite a

213
00:07:49,310 --> 00:07:53,659
bit of it<font color="#CCCCCC"> and then there's</font><font color="#E5E5E5"> something</font>

214
00:07:51,800 --> 00:07:56,539
<font color="#CCCCCC">called SSM I won't really talk about</font>

215
00:07:53,659 --> 00:07:58,129
other than<font color="#E5E5E5"> to say it's widely to believe</font>

216
00:07:56,539 --> 00:08:01,128
<font color="#E5E5E5">this is a little bit of a savior for</font>

217
00:07:58,129 --> 00:08:03,379
multicast it's probably not true<font color="#E5E5E5"> there's</font>

218
00:08:01,129 --> 00:08:04,729
oh there's not really much deployment

219
00:08:03,379 --> 00:08:07,520
yet to remains to be seen if there'll be

220
00:08:04,729 --> 00:08:09,240
a lot of<font color="#CCCCCC"> deployments but the the</font><font color="#E5E5E5"> jury's</font>

221
00:08:07,520 --> 00:08:11,659
i think is still out on that one

222
00:08:09,240 --> 00:08:15,150
and then there's<font color="#CCCCCC"> something called the</font>

223
00:08:11,660 --> 00:08:17,520
<font color="#E5E5E5">Galapagos to get the equivalent of the /</font>

224
00:08:15,150 --> 00:08:20,969
24 multicast block to use however they

225
00:08:17,520 --> 00:08:24,930
wish and then finally the administrative

226
00:08:20,970 --> 00:08:27,389
a scope block is somewhat akin to our C

227
00:08:24,930 --> 00:08:29,990
1918 address space for<font color="#E5E5E5"> our purposes here</font>

228
00:08:27,389 --> 00:08:32,729
the thing I<font color="#E5E5E5"> really need to know is that</font>

229
00:08:29,990 --> 00:08:34,770
<font color="#E5E5E5">these it addresses shouldn't exist in</font>

230
00:08:32,729 --> 00:08:39,450
any tables or<font color="#E5E5E5"> B transited through the</font>

231
00:08:34,770 --> 00:08:41,218
public<font color="#CCCCCC"> Internet so if</font><font color="#E5E5E5"> we</font><font color="#CCCCCC"> think about</font>

232
00:08:39,450 --> 00:08:42,930
<font color="#E5E5E5">that for a second week some people like</font>

233
00:08:41,219 --> 00:08:45,029
to do<font color="#CCCCCC"> bug on filtering and unicast can</font>

234
00:08:42,929 --> 00:08:46,529
we do the same thing and multicast<font color="#E5E5E5"> and</font>

235
00:08:45,029 --> 00:08:47,899
<font color="#E5E5E5">it's yeah sure you</font><font color="#CCCCCC"> can do that it's a</font>

236
00:08:46,529 --> 00:08:50,760
<font color="#CCCCCC">little</font><font color="#E5E5E5"> bit of</font><font color="#CCCCCC"> a pain and about to do it</font>

237
00:08:47,899 --> 00:08:52,440
and it's somewhat questionable how much

238
00:08:50,760 --> 00:08:54,779
value it buys you but you can certainly

239
00:08:52,440 --> 00:08:57,020
do it you can reduce the support of

240
00:08:54,779 --> 00:09:01,589
multicast addresses by a pretty<font color="#E5E5E5"> large</font>

241
00:08:57,020 --> 00:09:02,970
fraction of<font color="#E5E5E5"> the overall address base so</font>

242
00:09:01,589 --> 00:09:05,130
in the one reason<font color="#CCCCCC"> that</font><font color="#E5E5E5"> you might want to</font>

243
00:09:02,970 --> 00:09:07,770
do<font color="#E5E5E5"> that is just get rid of noise there's</font>

244
00:09:05,130 --> 00:09:09,870
hasn't been as many lately but there has

245
00:09:07,770 --> 00:09:11,790
been worms that scan all the address

246
00:09:09,870 --> 00:09:13,350
space 0 / 0 right so if it starts

247
00:09:11,790 --> 00:09:15,329
scanning the multicast address range

248
00:09:13,350 --> 00:09:16,890
that doesn't cause some problems in

249
00:09:15,329 --> 00:09:18,599
creating some of<font color="#CCCCCC"> the state so if you can</font>

250
00:09:16,890 --> 00:09:20,430
reduce some of the packets that head

251
00:09:18,600 --> 00:09:22,589
into that address space you can reduce

252
00:09:20,430 --> 00:09:25,290
some of that noise but as you see in

253
00:09:22,589 --> 00:09:26,820
some of the other<font color="#CCCCCC"> slides suits of worthy</font>

254
00:09:25,290 --> 00:09:31,319
<font color="#CCCCCC">do viens to actually do a lot of</font>

255
00:09:26,820 --> 00:09:32,520
maintenance on those filters and here's

256
00:09:31,320 --> 00:09:34,260
just a quick graph to give you an

257
00:09:32,520 --> 00:09:39,029
example of<font color="#E5E5E5"> what the filtering effects</font>

258
00:09:34,260 --> 00:09:40,589
might be I didn't put the legend on here

259
00:09:39,029 --> 00:09:43,529
but<font color="#E5E5E5"> on the left hand side the y-axis is</font>

260
00:09:40,589 --> 00:09:46,950
the number of essays has seen a handful

261
00:09:43,529 --> 00:09:48,000
of routers on the<font color="#CCCCCC"> internet the top line</font>

262
00:09:46,950 --> 00:09:49,500
is probably a little bit hard to make

263
00:09:48,000 --> 00:09:51,839
out the<font color="#E5E5E5"> yellow line is actually one of</font>

264
00:09:49,500 --> 00:09:54,450
the<font color="#E5E5E5"> abilene routers which probably sees</font>

265
00:09:51,839 --> 00:09:55,620
as good of msdp table as anybody and the

266
00:09:54,450 --> 00:09:58,350
other just<font color="#E5E5E5"> some other routers I had a</font>

267
00:09:55,620 --> 00:10:00,360
view into and along the the x-axis is

268
00:09:58,350 --> 00:10:02,670
what sorts of filters are applied to

269
00:10:00,360 --> 00:10:04,470
<font color="#CCCCCC">this msdp table so starting from the</font>

270
00:10:02,670 --> 00:10:08,279
left there's no filters so you might see

271
00:10:04,470 --> 00:10:11,820
about<font color="#E5E5E5"> 2800 msdp essays today and if you</font>

272
00:10:08,279 --> 00:10:13,290
apply just the<font color="#E5E5E5"> 239 / 8 you decrease some</font>

273
00:10:11,820 --> 00:10:16,079
some people are sending to that address

274
00:10:13,290 --> 00:10:17,760
space for whatever reason but the real

275
00:10:16,079 --> 00:10:19,239
<font color="#CCCCCC">Bank of</font><font color="#E5E5E5"> the buck there is just getting</font>

276
00:10:17,760 --> 00:10:20,920
<font color="#E5E5E5">rid of all those / aids or the</font>

277
00:10:19,240 --> 00:10:22,839
quite a significant savings it's like

278
00:10:20,920 --> 00:10:24,069
forty percent then<font color="#E5E5E5"> you can go a little</font>

279
00:10:22,839 --> 00:10:25,630
bit<font color="#E5E5E5"> further get a little bit mourinho</font>

280
00:10:24,070 --> 00:10:28,270
these some more specific filters within

281
00:10:25,630 --> 00:10:29,800
some of those<font color="#E5E5E5"> other /</font><font color="#CCCCCC"> H that you might</font>

282
00:10:28,270 --> 00:10:31,930
pass and<font color="#E5E5E5"> get it down a little bit</font>

283
00:10:29,800 --> 00:10:33,729
further<font color="#CCCCCC"> okay so there's a</font><font color="#E5E5E5"> lot of junk</font>

284
00:10:31,930 --> 00:10:34,959
out there today even without having to

285
00:10:33,730 --> 00:10:40,930
try to<font color="#E5E5E5"> do too much you can</font><font color="#CCCCCC"> actually</font>

286
00:10:34,959 --> 00:10:43,410
reduce those tables quite a bit so what

287
00:10:40,930 --> 00:10:46,930
sorts of protocols are valid to

288
00:10:43,410 --> 00:10:48,250
multicast destinations you've got UDP<font color="#CCCCCC"> is</font>

289
00:10:46,930 --> 00:10:50,680
kind of the vicar just one that's<font color="#E5E5E5"> kind</font>

290
00:10:48,250 --> 00:10:51,850
of where all the content happens UDP<font color="#CCCCCC"> is</font>

291
00:10:50,680 --> 00:10:54,520
the one that's simply forwarded through

292
00:10:51,850 --> 00:10:57,580
routers although you probably wouldn't

293
00:10:54,520 --> 00:10:59,890
be out to see a UDP packet to of

294
00:10:57,580 --> 00:11:01,810
multicast destination with it either

295
00:10:59,890 --> 00:11:04,930
probably a source or destination port

296
00:11:01,810 --> 00:11:06,579
less than 1024 so if you were inclined

297
00:11:04,930 --> 00:11:07,779
to do some filtering you could look<font color="#E5E5E5"> at</font>

298
00:11:06,580 --> 00:11:08,920
some sistex like that and see<font color="#CCCCCC"> if it</font>

299
00:11:07,779 --> 00:11:10,990
would be valid to do some filtering

300
00:11:08,920 --> 00:11:12,880
they're pretty much<font color="#E5E5E5"> everything else that</font>

301
00:11:10,990 --> 00:11:15,250
I know of for<font color="#E5E5E5"> the most part tends to</font>

302
00:11:12,880 --> 00:11:17,830
stay linked local only so it includes

303
00:11:15,250 --> 00:11:19,870
igmp PIM routing protocols and so forth

304
00:11:17,830 --> 00:11:23,709
and<font color="#CCCCCC"> I put a question mark for icmp and</font>

305
00:11:19,870 --> 00:11:25,899
i'll come<font color="#E5E5E5"> back</font><font color="#CCCCCC"> to the second</font><font color="#E5E5E5"> tcp should</font>

306
00:11:23,709 --> 00:11:28,239
be a no-brainer that one there's really

307
00:11:25,899 --> 00:11:31,120
no legitimate reason for<font color="#E5E5E5"> tcp to actually</font>

308
00:11:28,240 --> 00:11:32,970
be set up<font color="#CCCCCC"> between either source unicast</font>

309
00:11:31,120 --> 00:11:34,870
<font color="#E5E5E5">multicast destination or vice versa</font>

310
00:11:32,970 --> 00:11:36,520
whoever in some tested<font color="#E5E5E5"> I've done</font><font color="#CCCCCC"> I have</font>

311
00:11:34,870 --> 00:11:39,160
<font color="#E5E5E5">been able to</font><font color="#CCCCCC"> see that</font><font color="#E5E5E5"> Solaris will</font>

312
00:11:36,520 --> 00:11:40,600
actually respond to a TCP syn packet if

313
00:11:39,160 --> 00:11:43,120
you send it<font color="#CCCCCC"> to a multicast address</font>

314
00:11:40,600 --> 00:11:46,690
<font color="#CCCCCC">that's listening</font><font color="#E5E5E5"> on even more curiously</font>

315
00:11:43,120 --> 00:11:51,040
one of the router vendors cisco iOS will

316
00:11:46,690 --> 00:11:52,570
respond to<font color="#CCCCCC"> a knack with a reset which is</font>

317
00:11:51,040 --> 00:11:54,370
not the curious part the curious part is

318
00:11:52,570 --> 00:11:56,170
that it will actually put in the source

319
00:11:54,370 --> 00:11:57,370
address<font color="#E5E5E5"> field the group address that you</font>

320
00:11:56,170 --> 00:11:58,599
<font color="#E5E5E5">send to and that just seems really</font>

321
00:11:57,370 --> 00:12:00,310
broken to me and I<font color="#CCCCCC"> don't know why they</font>

322
00:11:58,600 --> 00:12:01,660
do that I've been trying<font color="#CCCCCC"> to convince</font>

323
00:12:00,310 --> 00:12:02,920
<font color="#E5E5E5">them that's just broken and they should</font>

324
00:12:01,660 --> 00:12:05,199
<font color="#E5E5E5">change it but it remains to be seen if</font>

325
00:12:02,920 --> 00:12:06,399
they'll do it so TCP should probably

326
00:12:05,200 --> 00:12:10,120
just be filtered at least at the edge

327
00:12:06,399 --> 00:12:12,190
anyways but<font color="#E5E5E5"> if you do see attacks</font>

328
00:12:10,120 --> 00:12:13,660
against you infrastructure with the same

329
00:12:12,190 --> 00:12:15,010
multicast address as<font color="#CCCCCC"> the source address</font>

330
00:12:13,660 --> 00:12:17,520
you know someone's been hearing a bunch

331
00:12:15,010 --> 00:12:17,520
of<font color="#E5E5E5"> Cisco's</font>

332
00:12:18,380 --> 00:12:23,760
so<font color="#E5E5E5"> ICMP is is one that's technically</font>

333
00:12:22,140 --> 00:12:26,280
legitimate to send a multicast address

334
00:12:23,760 --> 00:12:27,780
space so if you send icmp packets to a

335
00:12:26,280 --> 00:12:30,030
multicast destination it's much like

336
00:12:27,780 --> 00:12:31,860
sending it to a broadcast address so

337
00:12:30,030 --> 00:12:34,890
while technically legitimate there is a

338
00:12:31,860 --> 00:12:37,350
very<font color="#E5E5E5"> large amplification attack</font>

339
00:12:34,890 --> 00:12:41,100
potential here many systems<font color="#E5E5E5"> do respond</font>

340
00:12:37,350 --> 00:12:42,630
to multicast hangs and in fact in some

341
00:12:41,100 --> 00:12:44,580
of the tools that we've created<font color="#E5E5E5"> and</font>

342
00:12:42,630 --> 00:12:47,850
tested this from one vantage point you

343
00:12:44,580 --> 00:12:49,050
<font color="#CCCCCC">can send out</font><font color="#E5E5E5"> one I</font><font color="#CCCCCC"> cm-1 ICMP paying and</font>

344
00:12:47,850 --> 00:12:51,630
if you know the right group address to

345
00:12:49,050 --> 00:12:53,459
pick you'll get<font color="#E5E5E5"> over</font><font color="#CCCCCC"> 2500 responses in</font>

346
00:12:51,630 --> 00:12:55,140
today's multicast enabled internet

347
00:12:53,460 --> 00:12:57,300
that's quite a lot and if you<font color="#CCCCCC"> think</font>

348
00:12:55,140 --> 00:12:59,819
about that most of those hosts tend to

349
00:12:57,300 --> 00:13:01,859
be<font color="#CCCCCC"> too well-connected universities or</font>

350
00:12:59,820 --> 00:13:03,030
other sites that's a lot of packet

351
00:13:01,860 --> 00:13:06,590
potential there so<font color="#E5E5E5"> I would argue that</font>

352
00:13:03,030 --> 00:13:06,589
most people should be filtering out

353
00:13:10,760 --> 00:13:15,450
against a little bit restate some of the

354
00:13:12,960 --> 00:13:18,030
things I talked about<font color="#CCCCCC"> the</font><font color="#E5E5E5"> beginning igmp</font>

355
00:13:15,450 --> 00:13:19,830
is kind of where the first network

356
00:13:18,030 --> 00:13:21,720
control state happens<font color="#E5E5E5"> that's when a host</font>

357
00:13:19,830 --> 00:13:23,430
signals to<font color="#CCCCCC"> the router that it's</font>

358
00:13:21,720 --> 00:13:25,700
interested in receiving or participating

359
00:13:23,430 --> 00:13:28,140
in particular group so for each group

360
00:13:25,700 --> 00:13:29,550
four on each interface the router has to

361
00:13:28,140 --> 00:13:31,530
keep track<font color="#E5E5E5"> of and of</font><font color="#CCCCCC"> course there's</font>

362
00:13:29,550 --> 00:13:32,760
timeouts associated with<font color="#E5E5E5"> that but</font>

363
00:13:31,530 --> 00:13:35,430
potentially a router interface<font color="#E5E5E5"> would</font>

364
00:13:32,760 --> 00:13:38,760
have to keep track of 2 to 4 / 4

365
00:13:35,430 --> 00:13:41,189
addresses<font color="#CCCCCC"> okay and in turn whenever you</font>

366
00:13:38,760 --> 00:13:45,090
create an igmp report that would

367
00:13:41,190 --> 00:13:46,950
typically instantiate at least one star

368
00:13:45,090 --> 00:13:49,110
comedy and one as comedy<font color="#CCCCCC"> in that router</font>

369
00:13:46,950 --> 00:13:50,760
on that interface most likely you'd get

370
00:13:49,110 --> 00:13:53,340
additional Penn State on other router

371
00:13:50,760 --> 00:13:54,710
interfaces upstream to other<font color="#E5E5E5"> points in</font>

372
00:13:53,340 --> 00:13:57,000
the unicast<font color="#CCCCCC"> of the unidirectional</font>

373
00:13:54,710 --> 00:13:59,250
multicast tree as well as other routers

374
00:13:57,000 --> 00:14:02,040
up towards the RP and other<font color="#E5E5E5"> sources and</font>

375
00:13:59,250 --> 00:14:06,450
and<font color="#E5E5E5"> senators or other sources and</font>

376
00:14:02,040 --> 00:14:07,589
receivers I think I mentioned<font color="#E5E5E5"> this</font>

377
00:14:06,450 --> 00:14:09,740
pretty much already the igmp snooping

378
00:14:07,590 --> 00:14:12,630
switches have to do quite<font color="#E5E5E5"> a bit of work</font>

379
00:14:09,740 --> 00:14:14,850
both in terms of looking at packets and

380
00:14:12,630 --> 00:14:17,370
building the fort to address tables has

381
00:14:14,850 --> 00:14:19,230
to spoof igmp masters back to the router

382
00:14:17,370 --> 00:14:21,330
it has to actually figure<font color="#E5E5E5"> out who is the</font>

383
00:14:19,230 --> 00:14:22,650
router to be able<font color="#E5E5E5"> to do that so there's</font>

384
00:14:21,330 --> 00:14:24,960
a lot<font color="#E5E5E5"> of effort lot trickery going on</font>

385
00:14:22,650 --> 00:14:26,579
there a lot of<font color="#CCCCCC"> people</font><font color="#E5E5E5"> don't seem to like</font>

386
00:14:24,960 --> 00:14:28,740
igmp snooping switches that much

387
00:14:26,580 --> 00:14:32,120
probably for good reason not<font color="#CCCCCC"> just</font><font color="#E5E5E5"> that</font>

388
00:14:28,740 --> 00:14:32,120
because it's a layering violation

389
00:14:33,150 --> 00:14:36,990
so again more penn state stuff this is

390
00:14:35,610 --> 00:14:38,970
this is the one that's potentially

391
00:14:36,990 --> 00:14:42,300
pretty dangerous at least within your

392
00:14:38,970 --> 00:14:43,800
intruder main within your<font color="#E5E5E5"> PEM domain the</font>

393
00:14:42,300 --> 00:14:46,199
one additional thing to mention is the

394
00:14:43,800 --> 00:14:48,719
register messages that is whenever a

395
00:14:46,200 --> 00:14:50,640
sender sends a multicast packet the

396
00:14:48,720 --> 00:14:51,720
first time that happens and potentially

397
00:14:50,640 --> 00:14:53,880
more times after that<font color="#CCCCCC"> I'll get</font>

398
00:14:51,720 --> 00:14:55,350
<font color="#E5E5E5">encapsulated up to the RP then there's</font>

399
00:14:53,880 --> 00:14:56,460
that<font color="#CCCCCC"> D capsulation effort so there's</font>

400
00:14:55,350 --> 00:15:02,790
quite<font color="#E5E5E5"> a bit of work to actually make</font>

401
00:14:56,460 --> 00:15:04,920
multicast happen in<font color="#CCCCCC"> m stp is kind of the</font>

402
00:15:02,790 --> 00:15:06,270
<font color="#E5E5E5">big one that a lot</font><font color="#CCCCCC"> of people seem to pay</font>

403
00:15:04,920 --> 00:15:08,550
<font color="#CCCCCC">attention to a probably because it's in</font>

404
00:15:06,270 --> 00:15:10,110
our domain and so the effects of someone

405
00:15:08,550 --> 00:15:13,709
else's noise reaching your site is

406
00:15:10,110 --> 00:15:15,330
usually where this ends up each send or

407
00:15:13,710 --> 00:15:18,930
group pair is what creates an essay

408
00:15:15,330 --> 00:15:21,000
message so one host sending packet to

409
00:15:18,930 --> 00:15:22,560
one group that's one<font color="#CCCCCC"> essay message one</font>

410
00:15:21,000 --> 00:15:24,450
host setting to<font color="#CCCCCC"> ten</font><font color="#E5E5E5"> different groups</font>

411
00:15:22,560 --> 00:15:25,920
that's<font color="#E5E5E5"> ten AC messages so you can</font>

412
00:15:24,450 --> 00:15:27,540
extrapolate all that out the potential

413
00:15:25,920 --> 00:15:29,910
number of<font color="#CCCCCC"> si messages</font><font color="#E5E5E5"> can get quite</font>

414
00:15:27,540 --> 00:15:31,680
large<font color="#CCCCCC"> in our careful and again there's</font>

415
00:15:29,910 --> 00:15:33,510
some encapsulation d capsulation effort

416
00:15:31,680 --> 00:15:37,380
that might happen here<font color="#CCCCCC"> with msdp as well</font>

417
00:15:33,510 --> 00:15:40,410
and m stp runs over tcp and so it has

418
00:15:37,380 --> 00:15:42,960
some of the same kind of issues with bgp

419
00:15:40,410 --> 00:15:43,890
in terms of TCP session resets that

420
00:15:42,960 --> 00:15:47,220
we've heard<font color="#E5E5E5"> about in last couple years</font>

421
00:15:43,890 --> 00:15:48,900
an md5 is available for msdp in both the

422
00:15:47,220 --> 00:15:50,870
cisco and juniper routers but I don't

423
00:15:48,900 --> 00:15:53,130
know anyone that actually uses it yet I

424
00:15:50,870 --> 00:15:54,750
would use it but<font color="#CCCCCC"> our if anyone from</font>

425
00:15:53,130 --> 00:15:58,010
<font color="#CCCCCC">forests 10 is here that is interested in</font>

426
00:15:54,750 --> 00:15:58,010
implementing and I'd<font color="#CCCCCC"> appreciate it</font>

427
00:15:58,570 --> 00:16:03,280
so that when<font color="#CCCCCC"> msdp storms originally</font>

428
00:16:01,420 --> 00:16:05,920
started happening a few years ago is

429
00:16:03,280 --> 00:16:07,930
because worms were scanning the 2 to 4 /

430
00:16:05,920 --> 00:16:10,540
4 address space probably by mistake and

431
00:16:07,930 --> 00:16:12,069
so this<font color="#E5E5E5"> creates big floods of messages</font>

432
00:16:10,540 --> 00:16:13,689
that<font color="#E5E5E5"> go out to</font><font color="#CCCCCC"> all the NSD p speakers in</font>

433
00:16:12,070 --> 00:16:15,310
the internet and that's not good because

434
00:16:13,690 --> 00:16:17,350
that affected a lot of<font color="#E5E5E5"> people who had ms</font>

435
00:16:15,310 --> 00:16:19,270
to pee on really there were there cor

436
00:16:17,350 --> 00:16:20,680
border routers and because the resource

437
00:16:19,270 --> 00:16:23,680
consumption they started to melt<font color="#E5E5E5"> and</font>

438
00:16:20,680 --> 00:16:25,270
fall over so<font color="#CCCCCC"> the</font><font color="#E5E5E5"> first solution to that</font>

439
00:16:23,680 --> 00:16:28,060
problem was to create a simple rate

440
00:16:25,270 --> 00:16:30,449
limit for<font color="#CCCCCC"> SAS and you can apply</font><font color="#E5E5E5"> that</font>

441
00:16:28,060 --> 00:16:33,069
based on<font color="#CCCCCC"> msdp PR itself sort of like</font>

442
00:16:30,450 --> 00:16:36,660
applying a prefix limit on your<font color="#CCCCCC"> bgp</font>

443
00:16:33,070 --> 00:16:38,650
<font color="#E5E5E5">routes which works although it's still</font>

444
00:16:36,660 --> 00:16:40,120
potential<font color="#E5E5E5"> your problem because really</font>

445
00:16:38,650 --> 00:16:41,439
any host could fill<font color="#CCCCCC"> that limit pretty</font>

446
00:16:40,120 --> 00:16:43,390
quickly and<font color="#E5E5E5"> then starve out all the</font>

447
00:16:41,440 --> 00:16:44,920
<font color="#E5E5E5">other traffic so you need a little bit</font>

448
00:16:43,390 --> 00:16:47,770
more than<font color="#CCCCCC"> just</font><font color="#E5E5E5"> a single rate limit</font><font color="#CCCCCC"> per</font>

449
00:16:44,920 --> 00:16:50,140
<font color="#CCCCCC">pier one nice thing that juniper has and</font>

450
00:16:47,770 --> 00:16:51,699
I don't think cisco has it yet is a per

451
00:16:50,140 --> 00:16:55,270
source rate limit of course<font color="#E5E5E5"> this</font>

452
00:16:51,700 --> 00:16:58,030
requires resources to manage this but

453
00:16:55,270 --> 00:17:03,030
this prevents some of that host is

454
00:16:58,030 --> 00:17:03,030
infected scanning the TT 4 / 4 problem

455
00:17:07,270 --> 00:17:12,199
so<font color="#E5E5E5"> after hearing all these problems with</font>

456
00:17:10,099 --> 00:17:13,879
<font color="#E5E5E5">state potential issues that you can run</font>

457
00:17:12,199 --> 00:17:17,419
into melting<font color="#E5E5E5"> your network if you get too</font>

458
00:17:13,880 --> 00:17:19,669
<font color="#CCCCCC">much of it you may be</font><font color="#E5E5E5"> afraid to actually</font>

459
00:17:17,419 --> 00:17:21,650
turn on multicast if you don't have a

460
00:17:19,669 --> 00:17:23,329
now or<font color="#CCCCCC"> you may be considering turning it</font>

461
00:17:21,650 --> 00:17:25,010
off if you<font color="#E5E5E5"> have it enabled but one thing</font>

462
00:17:23,329 --> 00:17:26,750
you<font color="#E5E5E5"> can do for people who are interested</font>

463
00:17:25,010 --> 00:17:29,000
<font color="#E5E5E5">in</font><font color="#CCCCCC"> the sort</font><font color="#E5E5E5"> of applications like video</font>

464
00:17:26,750 --> 00:17:31,190
over IP it was a lot of cable providers

465
00:17:29,000 --> 00:17:32,929
would do<font color="#E5E5E5"> this sort of thing as you can</font>

466
00:17:31,190 --> 00:17:35,480
still<font color="#E5E5E5"> run a multicast Network pretty</font>

467
00:17:32,929 --> 00:17:37,130
safely by doing the following on all

468
00:17:35,480 --> 00:17:38,929
your outer edge interfaces that face

469
00:17:37,130 --> 00:17:41,990
your end<font color="#E5E5E5"> host your end customers just</font>

470
00:17:38,929 --> 00:17:44,390
filter everything 22 24 / floor don't

471
00:17:41,990 --> 00:17:45,770
allow anyone to send you I GMP or any

472
00:17:44,390 --> 00:17:48,370
UDP packets or anything<font color="#CCCCCC"> that you read</font>

473
00:17:45,770 --> 00:17:50,900
interfaces ok so then what you do is

474
00:17:48,370 --> 00:17:52,340
let's presume<font color="#E5E5E5"> you're doing video over IP</font>

475
00:17:50,900 --> 00:17:54,200
<font color="#E5E5E5">and you've got different channels</font>

476
00:17:52,340 --> 00:17:55,399
associate with a group of dress so then

477
00:17:54,200 --> 00:17:56,750
you take those group addresses<font color="#E5E5E5"> and then</font>

478
00:17:55,400 --> 00:17:58,760
you just statically join them to that

479
00:17:56,750 --> 00:18:00,919
router interface which you can<font color="#E5E5E5"> easily do</font>

480
00:17:58,760 --> 00:18:02,480
now you have to keep in<font color="#CCCCCC"> mind that all</font>

481
00:18:00,919 --> 00:18:03,890
the number of groups that<font color="#E5E5E5"> you're going</font>

482
00:18:02,480 --> 00:18:05,840
to statically join have to be able<font color="#E5E5E5"> to</font>

483
00:18:03,890 --> 00:18:07,490
fit out that router interface if they're

484
00:18:05,840 --> 00:18:08,870
all sitting at once and you have to

485
00:18:07,490 --> 00:18:10,490
allow of course allow Kate enough

486
00:18:08,870 --> 00:18:12,830
capacity for any unicast traffic that

487
00:18:10,490 --> 00:18:14,179
<font color="#E5E5E5">you want to support but then the magic</font>

488
00:18:12,830 --> 00:18:15,770
still happens on your layer to

489
00:18:14,179 --> 00:18:17,990
infrastructure roads let's say you have

490
00:18:15,770 --> 00:18:19,820
igmp snooping switches they still manage

491
00:18:17,990 --> 00:18:21,679
all the joins and the leaves and all

492
00:18:19,820 --> 00:18:24,980
that other stuff and manage the report

493
00:18:21,679 --> 00:18:26,720
to group address database on<font color="#CCCCCC"> will switch</font>

494
00:18:24,980 --> 00:18:28,630
and presto change-o you've got yourself

495
00:18:26,720 --> 00:18:31,190
a receive-only model kind of like SSM

496
00:18:28,630 --> 00:18:33,380
without any of the<font color="#E5E5E5"> problems of host</font>

497
00:18:31,190 --> 00:18:34,820
creating state in your network so all

498
00:18:33,380 --> 00:18:36,230
the state that you've<font color="#E5E5E5"> created a state</font>

499
00:18:34,820 --> 00:18:38,030
that you've set<font color="#CCCCCC"> up and that's</font><font color="#E5E5E5"> the only</font>

500
00:18:36,230 --> 00:18:39,799
state that's going to be<font color="#E5E5E5"> there of</font><font color="#CCCCCC"> course</font>

501
00:18:38,030 --> 00:18:42,280
if you do msdp you still have to protect

502
00:18:39,799 --> 00:18:42,280
<font color="#E5E5E5">that a little bit</font>

503
00:18:45,550 --> 00:18:51,649
so now the I get to it the one thing I

504
00:18:50,390 --> 00:18:53,090
want<font color="#E5E5E5"> to throw in here hopefully any</font>

505
00:18:51,650 --> 00:18:56,480
router vendors that might pay attention

506
00:18:53,090 --> 00:18:57,649
or the anyone who's maybe shares some of

507
00:18:56,480 --> 00:18:59,870
the concerns about some of the knobs

508
00:18:57,650 --> 00:19:02,060
that are there yet with multicast some

509
00:18:59,870 --> 00:19:03,770
things that might be<font color="#E5E5E5"> nice we have</font>

510
00:19:02,060 --> 00:19:05,210
authentication and bgp and we have a

511
00:19:03,770 --> 00:19:06,950
thon occasional SPF we don't<font color="#CCCCCC"> have a</font>

512
00:19:05,210 --> 00:19:08,300
<font color="#CCCCCC">phone occasionally</font><font color="#E5E5E5"> pen actually</font><font color="#CCCCCC"> i don't</font>

513
00:19:06,950 --> 00:19:10,400
<font color="#E5E5E5">expect that we'll get it now it's</font>

514
00:19:08,300 --> 00:19:11,930
probably too late but it would<font color="#E5E5E5"> have been</font>

515
00:19:10,400 --> 00:19:14,740
nice<font color="#CCCCCC"> if that was built with a nice easy</font>

516
00:19:11,930 --> 00:19:16,730
<font color="#E5E5E5">sheared md5 secret a long time</font><font color="#CCCCCC"> ago</font>

517
00:19:14,740 --> 00:19:18,530
something that might be<font color="#E5E5E5"> kind of nice is</font>

518
00:19:16,730 --> 00:19:21,650
an igmp source rate limit like juniper

519
00:19:18,530 --> 00:19:23,420
has with their<font color="#CCCCCC"> m stp source announcement</font>

520
00:19:21,650 --> 00:19:25,970
rate limit if you want to maintain

521
00:19:23,420 --> 00:19:27,610
somewhat of an open open receiver model

522
00:19:25,970 --> 00:19:30,050
this might be kind<font color="#E5E5E5"> of handy and</font>

523
00:19:27,610 --> 00:19:32,330
something<font color="#CCCCCC"> i mentioned in last year's</font>

524
00:19:30,050 --> 00:19:35,300
<font color="#CCCCCC">botnets</font><font color="#E5E5E5"> talk but</font><font color="#CCCCCC"> i think might be worth</font>

525
00:19:32,330 --> 00:19:38,419
trying out is this idea of<font color="#E5E5E5"> a rate limit</font>

526
00:19:35,300 --> 00:19:40,129
for flows so if you<font color="#E5E5E5"> had a rate limiter</font>

527
00:19:38,420 --> 00:19:42,440
based on the source of<font color="#CCCCCC"> this for flows</font>

528
00:19:40,130 --> 00:19:44,690
that could potentially stop lots of

529
00:19:42,440 --> 00:19:47,780
things that you<font color="#E5E5E5"> might want to stop like</font>

530
00:19:44,690 --> 00:19:49,430
scanning<font color="#E5E5E5"> i know some of you are really</font>

531
00:19:47,780 --> 00:19:51,230
putting up a lot<font color="#E5E5E5"> of headaches for puter</font>

532
00:19:49,430 --> 00:19:53,780
<font color="#CCCCCC">peer it might slow down that stuff a</font>

533
00:19:51,230 --> 00:19:56,360
little<font color="#CCCCCC"> bit or at least be a useful</font>

534
00:19:53,780 --> 00:19:57,910
monitoring tool<font color="#CCCCCC"> i don't know how much</font>

535
00:19:56,360 --> 00:20:00,110
<font color="#E5E5E5">resources that will take probably a lot</font>

536
00:19:57,910 --> 00:20:01,100
but i'd like<font color="#CCCCCC"> to see</font><font color="#E5E5E5"> something like that</font>

537
00:20:00,110 --> 00:20:03,500
<font color="#E5E5E5">i think it might be an interesting</font><font color="#CCCCCC"> knob</font>

538
00:20:01,100 --> 00:20:07,040
to try<font color="#E5E5E5"> i know some packet chief of boxes</font>

539
00:20:03,500 --> 00:20:08,930
do that sort of thing managing multicast

540
00:20:07,040 --> 00:20:10,490
filters is a real pain there's no good

541
00:20:08,930 --> 00:20:12,140
way to do it other than manatee updating

542
00:20:10,490 --> 00:20:13,670
your configs certainly you can script

543
00:20:12,140 --> 00:20:16,550
all that stuff<font color="#CCCCCC"> but they tend tend to</font>

544
00:20:13,670 --> 00:20:20,000
change quite often<font color="#CCCCCC"> as groups are found</font>

545
00:20:16,550 --> 00:20:22,430
out to be a common noise pool or I guess

546
00:20:20,000 --> 00:20:23,990
swamp multicast space being able to have

547
00:20:22,430 --> 00:20:26,210
<font color="#E5E5E5">some kind of like a bug on route server</font>

548
00:20:23,990 --> 00:20:28,160
for multicast it would be<font color="#E5E5E5"> nice if it's</font>

549
00:20:26,210 --> 00:20:30,740
supported all three protocols igmp p.m.

550
00:20:28,160 --> 00:20:33,800
and msdp that would be a handy thing to

551
00:20:30,740 --> 00:20:35,900
have and because<font color="#E5E5E5"> not too many protocols</font>

552
00:20:33,800 --> 00:20:38,480
actually are being forwarded through

553
00:20:35,900 --> 00:20:39,980
routers that are multicast or protocols

554
00:20:38,480 --> 00:20:42,350
that were designed<font color="#E5E5E5"> solely for multicast</font>

555
00:20:39,980 --> 00:20:43,790
like igmp that seems to make sense to

556
00:20:42,350 --> 00:20:44,929
not have<font color="#CCCCCC"> to actually</font><font color="#E5E5E5"> for those to the</font>

557
00:20:43,790 --> 00:20:47,330
router so if you had<font color="#E5E5E5"> like a no IP</font>

558
00:20:44,930 --> 00:20:48,950
forwarding not for igmp you could

559
00:20:47,330 --> 00:20:50,689
basically disable certain protocols or

560
00:20:48,950 --> 00:20:52,760
certain protocols to multicast address

561
00:20:50,690 --> 00:20:55,430
space from being sent past and interface

562
00:20:52,760 --> 00:20:57,140
and speaking specifically at a cisco

563
00:20:55,430 --> 00:20:59,990
hear that<font color="#CCCCCC"> twenty five hundred</font><font color="#E5E5E5"> plus</font>

564
00:20:57,140 --> 00:21:02,660
number i mentioned earlier seems to be

565
00:20:59,990 --> 00:21:04,520
mostly Cisco devices so having turning

566
00:21:02,660 --> 00:21:08,750
off the multicast echo response would be

567
00:21:04,520 --> 00:21:10,370
nice Francisco and then lastly something

568
00:21:08,750 --> 00:21:12,260
other people<font color="#E5E5E5"> have talked about for a</font>

569
00:21:10,370 --> 00:21:15,679
while is having a passive interface mode

570
00:21:12,260 --> 00:21:17,990
for pen when you enable a multicast

571
00:21:15,680 --> 00:21:19,670
interface and routers today by default

572
00:21:17,990 --> 00:21:21,320
<font color="#E5E5E5">your interface is listening for pin</font>

573
00:21:19,670 --> 00:21:23,240
messages and<font color="#E5E5E5"> I'll set</font><font color="#CCCCCC"> up neighbor</font>

574
00:21:21,320 --> 00:21:24,710
relationships and this is not<font color="#CCCCCC"> a good</font>

575
00:21:23,240 --> 00:21:26,030
<font color="#CCCCCC">thing if you have n host essentially</font>

576
00:21:24,710 --> 00:21:27,830
trying to become home routers they might

577
00:21:26,030 --> 00:21:30,230
take over the dr function or start

578
00:21:27,830 --> 00:21:32,179
setting a certain messages so you want

579
00:21:30,230 --> 00:21:33,560
to basically set up multicast<font color="#CCCCCC"> own</font>

580
00:21:32,180 --> 00:21:35,060
interface<font color="#E5E5E5"> but kind of really disabled</font>

581
00:21:33,560 --> 00:21:38,629
processing of any other pin messages on

582
00:21:35,060 --> 00:21:40,220
that interface now the<font color="#E5E5E5"> next three slides</font>

583
00:21:38,630 --> 00:21:42,710
are<font color="#CCCCCC"> I actually had to</font><font color="#E5E5E5"> just kind of</font>

584
00:21:40,220 --> 00:21:46,070
invent I have no experience in a real

585
00:21:42,710 --> 00:21:47,840
actual multicast specific attack that

586
00:21:46,070 --> 00:21:48,919
someone has intended to do other than

587
00:21:47,840 --> 00:21:51,620
the things I've just tried to do with

588
00:21:48,920 --> 00:21:53,030
<font color="#CCCCCC">some custom build tools so I'm kind of</font>

589
00:21:51,620 --> 00:21:54,860
guessing at this so if there is actually

590
00:21:53,030 --> 00:21:56,320
ever an actual multicast attack<font color="#E5E5E5"> I don't</font>

591
00:21:54,860 --> 00:21:58,610
know how well this stuff actually works

592
00:21:56,320 --> 00:22:00,379
but let's presume that you want<font color="#E5E5E5"> to try</font>

593
00:21:58,610 --> 00:22:02,030
<font color="#E5E5E5">to keep your multicast infrastructure up</font>

594
00:22:00,380 --> 00:22:03,320
for some period of time so that would

595
00:22:02,030 --> 00:22:05,090
mean avoiding taking things down like

596
00:22:03,320 --> 00:22:07,250
the end the<font color="#E5E5E5"> RP or some of those core</font>

597
00:22:05,090 --> 00:22:09,919
devices of course in the sender and the

598
00:22:07,250 --> 00:22:12,560
receiver model it would be best if you

599
00:22:09,920 --> 00:22:14,090
<font color="#E5E5E5">had access or close to access that</font>

600
00:22:12,560 --> 00:22:16,220
source host if you could just disable

601
00:22:14,090 --> 00:22:18,050
that or somehow filter that out but<font color="#E5E5E5"> you</font>

602
00:22:16,220 --> 00:22:20,150
can do scoping on multicast sand filter

603
00:22:18,050 --> 00:22:21,889
packets to specific groups you could

604
00:22:20,150 --> 00:22:25,040
certainly turn off him on an interface

605
00:22:21,890 --> 00:22:26,360
level that's facing the host that has a

606
00:22:25,040 --> 00:22:27,680
<font color="#E5E5E5">little bit less chloride will damage</font>

607
00:22:26,360 --> 00:22:28,290
them actually taking down<font color="#E5E5E5"> something like</font>

608
00:22:27,680 --> 00:22:30,120
an RP

609
00:22:28,290 --> 00:22:32,159
and something<font color="#E5E5E5"> I haven't tried but I</font>

610
00:22:30,120 --> 00:22:34,469
think might work is a<font color="#CCCCCC"> fuge if you have a</font>

611
00:22:32,160 --> 00:22:36,390
specific group that's being attacked you

612
00:22:34,470 --> 00:22:37,920
should be able to change that group to

613
00:22:36,390 --> 00:22:39,840
point to a different RP and then

614
00:22:37,920 --> 00:22:42,740
effectively you could point that our RP

615
00:22:39,840 --> 00:22:44,790
into a a sinkhole our black hole and

616
00:22:42,740 --> 00:22:46,740
some other<font color="#CCCCCC"> things here for receiver</font>

617
00:22:44,790 --> 00:22:48,270
based attacks you have to pay maybe a

618
00:22:46,740 --> 00:22:50,570
little bit more<font color="#E5E5E5"> attention igmp if you</font>

619
00:22:48,270 --> 00:22:53,670
want to<font color="#E5E5E5"> solve the problem that way and</font>

620
00:22:50,570 --> 00:22:55,889
the one that most people seem to put

621
00:22:53,670 --> 00:22:58,170
more focus on is is the inner domain it

622
00:22:55,890 --> 00:23:01,050
house you can do a pretty good job of

623
00:22:58,170 --> 00:23:02,850
relieving<font color="#CCCCCC"> beams as well and the big</font>

624
00:23:01,050 --> 00:23:05,940
thing<font color="#CCCCCC"> here is to do the filtering on the</font>

625
00:23:02,850 --> 00:23:07,709
essays typically vice by source who is

626
00:23:05,940 --> 00:23:09,300
generating those essays I don't think

627
00:23:07,710 --> 00:23:11,760
<font color="#CCCCCC">you</font><font color="#E5E5E5"> can do originator today that might</font>

628
00:23:09,300 --> 00:23:14,399
be a<font color="#E5E5E5"> nice option but if you're actually</font>

629
00:23:11,760 --> 00:23:16,440
getting attacked by kind of a net block

630
00:23:14,400 --> 00:23:19,020
as opposed to a single source you could

631
00:23:16,440 --> 00:23:21,240
remove that net blog from your MBP route

632
00:23:19,020 --> 00:23:26,330
and that should effectively disable that

633
00:23:21,240 --> 00:23:29,220
from getting to you as well so<font color="#E5E5E5"> finally</font>

634
00:23:26,330 --> 00:23:31,830
the one thing that makes multicast not

635
00:23:29,220 --> 00:23:33,630
so bad or no worse than it has to be is

636
00:23:31,830 --> 00:23:35,580
<font color="#CCCCCC">that you can actually mitigate a lot of</font>

637
00:23:33,630 --> 00:23:37,350
the<font color="#CCCCCC"> problems in terms of the network</font>

638
00:23:35,580 --> 00:23:38,730
control state and forwarding of

639
00:23:37,350 --> 00:23:41,040
<font color="#E5E5E5">multicast packets yourself you don't</font>

640
00:23:38,730 --> 00:23:43,380
have to rely<font color="#E5E5E5"> on others to run a clean</font>

641
00:23:41,040 --> 00:23:45,180
multicast Network to actually have that

642
00:23:43,380 --> 00:23:47,520
stuff not propagate<font color="#CCCCCC"> to your</font>

643
00:23:45,180 --> 00:23:49,140
infrastructure just by using filtering

644
00:23:47,520 --> 00:23:52,910
<font color="#E5E5E5">of essays and other sorts of things so</font>

645
00:23:49,140 --> 00:23:52,910
<font color="#E5E5E5">that's I guess kind of the good news</font>

646
00:23:53,680 --> 00:23:59,020
and I<font color="#CCCCCC"> think we have filled our multicast</font>

647
00:23:57,280 --> 00:24:01,290
ah quota for the next<font color="#E5E5E5"> couple years there</font>

648
00:23:59,020 --> 00:24:01,290
are any questions

649
00:24:10,659 --> 00:24:16,479
Tom<font color="#CCCCCC"> Pusateri if you said the pin hello</font>

650
00:24:14,200 --> 00:24:18,220
interval 20 it gives you that passive

651
00:24:16,479 --> 00:24:19,929
interface that you're looking<font color="#CCCCCC"> for I'm</font>

652
00:24:18,220 --> 00:24:21,759
sorry you set the pin what hello

653
00:24:19,929 --> 00:24:27,989
interval plentiful<font color="#E5E5E5"> ok let's go to know</font>

654
00:24:21,759 --> 00:24:27,989
thanks<font color="#CCCCCC"> ok anyone else has got my email</font>

