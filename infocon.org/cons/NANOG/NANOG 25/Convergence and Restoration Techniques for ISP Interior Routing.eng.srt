1
00:00:01,280 --> 00:00:06,120
yeah I'm<font color="#E5E5E5"> Curtis Villa miser for those</font>

2
00:00:04,200 --> 00:00:09,349
people who don't<font color="#E5E5E5"> know me and I've been</font>

3
00:00:06,120 --> 00:00:12,469
sort of involved in you know the NSFNET

4
00:00:09,349 --> 00:00:17,009
and something that bill might remember

5
00:00:12,469 --> 00:00:18,779
and at this point I'm with Avicii I had

6
00:00:17,010 --> 00:00:20,580
done coding earlier and then gone into

7
00:00:18,779 --> 00:00:25,170
operations and now I'm<font color="#CCCCCC"> back</font><font color="#E5E5E5"> into writing</font>

8
00:00:20,580 --> 00:00:28,919
code what I'm talking about here<font color="#CCCCCC"> is just</font>

9
00:00:25,170 --> 00:00:32,640
about convergence techniques or about

10
00:00:28,920 --> 00:00:35,340
really the impact of network

11
00:00:32,640 --> 00:00:36,809
architecture and here on<font color="#CCCCCC"> the slide i</font>

12
00:00:35,340 --> 00:00:38,760
just put architecture what I mean

13
00:00:36,809 --> 00:00:41,640
there's network architecture like do<font color="#E5E5E5"> you</font>

14
00:00:38,760 --> 00:00:44,730
use areas or not use areas as opposed to

15
00:00:41,640 --> 00:00:46,770
a router architecture do you have a<font color="#E5E5E5"> bus</font>

16
00:00:44,730 --> 00:00:48,538
versus at<font color="#CCCCCC"> oriole mesh or something</font>

17
00:00:46,770 --> 00:00:52,500
that's not what I'm going<font color="#CCCCCC"> to</font><font color="#E5E5E5"> be talking</font>

18
00:00:48,539 --> 00:00:55,710
<font color="#E5E5E5">about and then I want to talk about</font>

19
00:00:52,500 --> 00:01:06,420
algorithms but not get so technical that

20
00:00:55,710 --> 00:01:08,970
this turns into a sitcom so page up

21
00:01:06,420 --> 00:01:13,320
doesn't work search down like a good

22
00:01:08,970 --> 00:01:15,509
<font color="#CCCCCC">thing I put the extended abstract on</font>

23
00:01:13,320 --> 00:01:19,110
there for the benefit of<font color="#E5E5E5"> the people who</font>

24
00:01:15,509 --> 00:01:21,570
are will be reading<font color="#E5E5E5"> this I thought</font>

25
00:01:19,110 --> 00:01:23,040
before the meeting although they weren't

26
00:01:21,570 --> 00:01:25,258
available before the meeting with slides

27
00:01:23,040 --> 00:01:28,680
or after the meeting for<font color="#E5E5E5"> the people</font><font color="#CCCCCC"> that</font>

28
00:01:25,259 --> 00:01:32,579
either didn't attend or whatever the

29
00:01:28,680 --> 00:01:34,799
convergence has changed over and the the

30
00:01:32,579 --> 00:01:37,439
notion of quality<font color="#CCCCCC"> of service has changed</font>

31
00:01:34,799 --> 00:01:40,619
over time and Dave alluded to that in

32
00:01:37,439 --> 00:01:42,210
his presentation and I'm not gonna go

33
00:01:40,619 --> 00:01:45,149
all the way<font color="#CCCCCC"> back to nineteen ninety but</font>

34
00:01:42,210 --> 00:01:46,649
in 1995 I think we had about 40,000

35
00:01:45,149 --> 00:01:48,390
routes I don't remember<font color="#E5E5E5"> the numbers on</font>

36
00:01:46,649 --> 00:01:50,670
Dave slides to get us more active

37
00:01:48,390 --> 00:01:53,130
numbers and convergence<font color="#E5E5E5"> was occurring in</font>

38
00:01:50,670 --> 00:01:55,439
typically<font color="#E5E5E5"> like one two three</font><font color="#CCCCCC"> minutes</font>

39
00:01:53,130 --> 00:01:57,270
although<font color="#CCCCCC"> there were some networks in</font>

40
00:01:55,439 --> 00:01:59,158
which they had stability problems and

41
00:01:57,270 --> 00:02:04,130
convergence could take like two to three

42
00:01:59,159 --> 00:02:04,130
days on a<font color="#E5E5E5"> really</font><font color="#CCCCCC"> bad time</font>

43
00:02:05,580 --> 00:02:14,270
x 1998 we didn't have the two to

44
00:02:09,240 --> 00:02:17,280
three-day convergence anywhere and the

45
00:02:14,270 --> 00:02:20,190
1995 circa nineteen nineteen<font color="#E5E5E5"> ninety-five</font>

46
00:02:17,280 --> 00:02:22,590
problems were really a sort of a

47
00:02:20,190 --> 00:02:25,790
<font color="#CCCCCC">short-term thing they had to do with</font>

48
00:02:22,590 --> 00:02:28,170
implementation problems in<font color="#E5E5E5"> addition to</font>

49
00:02:25,790 --> 00:02:30,030
what would be considered<font color="#E5E5E5"> to be kind of a</font>

50
00:02:28,170 --> 00:02:32,940
really<font color="#E5E5E5"> dumb network architecture which</font>

51
00:02:30,030 --> 00:02:36,000
was to build a full mesh over ATM which

52
00:02:32,940 --> 00:02:40,740
the provider that did that<font color="#E5E5E5"> kind of learn</font>

53
00:02:36,000 --> 00:02:44,790
that lesson and<font color="#E5E5E5"> has confessed that it</font>

54
00:02:40,740 --> 00:02:46,590
was a bad idea at this point the range

55
00:02:44,790 --> 00:02:49,380
of convergence and here I'm talking

56
00:02:46,590 --> 00:02:52,380
<font color="#CCCCCC">about where a link changes or router</font>

57
00:02:49,380 --> 00:02:54,660
goes down and all of the<font color="#E5E5E5"> BGP routes are</font>

58
00:02:52,380 --> 00:02:57,450
in there not just sort of the<font color="#CCCCCC"> IGP rats</font>

59
00:02:54,660 --> 00:03:02,010
are back but the whole BGP route table

60
00:02:57,450 --> 00:03:04,200
is correct range is from depending on

61
00:03:02,010 --> 00:03:08,040
whose router and everything<font color="#E5E5E5"> 15 seconds</font>

62
00:03:04,200 --> 00:03:12,209
up to<font color="#E5E5E5"> three minutes if everything</font><font color="#CCCCCC"> goes</font>

63
00:03:08,040 --> 00:03:15,120
<font color="#E5E5E5">right and a lot of routers have been</font>

64
00:03:12,209 --> 00:03:18,600
moved to<font color="#CCCCCC"> the edge are still running full</font>

65
00:03:15,120 --> 00:03:22,560
BGP and they<font color="#E5E5E5"> actually do take three</font>

66
00:03:18,600 --> 00:03:25,019
<font color="#CCCCCC">minutes to update the full BGP table so</font>

67
00:03:22,560 --> 00:03:27,450
the state<font color="#CCCCCC"> of the art is not wonderful</font>

68
00:03:25,019 --> 00:03:29,580
although we have quite a few more routes

69
00:03:27,450 --> 00:03:32,640
than we did before and<font color="#E5E5E5"> the number i'm</font>

70
00:03:29,580 --> 00:03:34,500
seeing providers are telling us<font color="#CCCCCC"> that we</font>

71
00:03:32,640 --> 00:03:36,779
that they have on the order of 250

72
00:03:34,500 --> 00:03:37,980
thousand unique routes<font color="#E5E5E5"> because they have</font>

73
00:03:36,780 --> 00:03:39,930
the global routes and they have their

74
00:03:37,980 --> 00:03:46,260
own internal reps that's that sort<font color="#E5E5E5"> of on</font>

75
00:03:39,930 --> 00:03:48,720
the high side<font color="#CCCCCC"> of what we've been told oh</font>

76
00:03:46,260 --> 00:03:53,220
and my comment on quality of service is

77
00:03:48,720 --> 00:03:55,850
that in 1995 that a claim of we have

78
00:03:53,220 --> 00:03:58,920
good<font color="#E5E5E5"> quality of service was we suck less</font>

79
00:03:55,850 --> 00:04:05,070
some people will remember<font color="#E5E5E5"> that from past</font>

80
00:03:58,920 --> 00:04:09,119
nanog just for a hypothetical just for a

81
00:04:05,070 --> 00:04:11,760
scaling discussion<font color="#CCCCCC"> I will talk about 250</font>

82
00:04:09,120 --> 00:04:15,410
k unique BGP routes

83
00:04:11,760 --> 00:04:17,760
we won't go<font color="#CCCCCC"> into</font><font color="#E5E5E5"> how many instances a</font>

84
00:04:15,410 --> 00:04:18,959
thousand and everything is just<font color="#E5E5E5"> powers</font>

85
00:04:17,760 --> 00:04:22,108
of<font color="#CCCCCC"> ten</font><font color="#E5E5E5"> just for the purpose of</font>

86
00:04:18,959 --> 00:04:24,180
discussion a thousand node core either a

87
00:04:22,108 --> 00:04:25,590
full mesh or ten links / router on

88
00:04:24,180 --> 00:04:29,340
average and that's<font color="#E5E5E5"> just so that</font>

89
00:04:25,590 --> 00:04:32,250
everything is power of<font color="#CCCCCC"> ten eat it and if</font>

90
00:04:29,340 --> 00:04:35,010
you're doing areas<font color="#CCCCCC"> ten areas</font><font color="#E5E5E5"> with 100</font>

91
00:04:32,250 --> 00:04:40,410
notes per area again this isn't

92
00:04:35,010 --> 00:04:44,219
anybody's network this<font color="#E5E5E5"> is just on</font><font color="#CCCCCC"> the</font>

93
00:04:40,410 --> 00:04:47,250
scale of some of the tier 1 ISPs you

94
00:04:44,220 --> 00:04:48,930
know whether they have 40 70 or 120

95
00:04:47,250 --> 00:04:54,300
routers doesn't make a whole lot of

96
00:04:48,930 --> 00:04:57,060
difference and we're<font color="#E5E5E5"> going to consider</font>

97
00:04:54,300 --> 00:04:58,710
two cases one is where you run bgp with

98
00:04:57,060 --> 00:05:01,350
IP forwarding in other words you just

99
00:04:58,710 --> 00:05:03,630
<font color="#CCCCCC">have an igp only you don't use any mpls</font>

100
00:05:01,350 --> 00:05:05,400
in other cases<font color="#E5E5E5"> where mpls is used for</font>

101
00:05:03,630 --> 00:05:07,110
traffic engineering<font color="#CCCCCC"> i'm actually not</font>

102
00:05:05,400 --> 00:05:10,799
<font color="#E5E5E5">going to talk at all</font><font color="#CCCCCC"> about the scaling</font>

103
00:05:07,110 --> 00:05:12,960
of<font color="#CCCCCC"> ldp possibly because i don't know</font>

104
00:05:10,800 --> 00:05:16,830
<font color="#CCCCCC">that much about it that's like</font><font color="#E5E5E5"> I haven't</font>

105
00:05:12,960 --> 00:05:18,510
<font color="#E5E5E5">thought that much about</font><font color="#CCCCCC"> ldp and I don't</font>

106
00:05:16,830 --> 00:05:21,389
want to get<font color="#CCCCCC"> in</font><font color="#E5E5E5"> up in the discussion of</font>

107
00:05:18,510 --> 00:05:23,940
which is better ospf or is<font color="#E5E5E5"> is or which</font>

108
00:05:21,389 --> 00:05:28,340
is better running<font color="#E5E5E5"> an igp only or running</font>

109
00:05:23,940 --> 00:05:33,000
mpls only because that's a rat hole okay

110
00:05:28,340 --> 00:05:34,560
now in a prior nanog there was something

111
00:05:33,000 --> 00:05:36,690
this this is actually good that<font color="#E5E5E5"> this</font>

112
00:05:34,560 --> 00:05:39,419
comes up in a slide because<font color="#CCCCCC"> dave kansas</font>

113
00:05:36,690 --> 00:05:41,729
is notorious for showing up for nano

114
00:05:39,419 --> 00:05:43,799
with no slides and sometimes he actually

115
00:05:41,729 --> 00:05:46,289
had slide this thing just<font color="#E5E5E5"> looks here for</font>

116
00:05:43,800 --> 00:05:48,620
days he had he had slides at a past

117
00:05:46,289 --> 00:05:51,930
<font color="#CCCCCC">nanog he just kind of showed up and he</font>

118
00:05:48,620 --> 00:05:54,090
really covered some good material but he

119
00:05:51,930 --> 00:05:56,130
<font color="#E5E5E5">just wrote things on a transparency and</font>

120
00:05:54,090 --> 00:05:58,859
<font color="#E5E5E5">wave his arms a lot but he made a lot of</font>

121
00:05:56,130 --> 00:06:00,539
sense and i'm calling this the<font color="#CCCCCC"> cat's</font>

122
00:05:58,860 --> 00:06:02,780
effect and we've always referred to this

123
00:06:00,539 --> 00:06:05,849
as something<font color="#E5E5E5"> that gave caps pointed out</font>

124
00:06:02,780 --> 00:06:09,388
there was you<font color="#CCCCCC"> know an</font><font color="#E5E5E5"> Internet</font><font color="#CCCCCC"> service</font>

125
00:06:05,849 --> 00:06:13,530
provider that did do a full mesh of on

126
00:06:09,389 --> 00:06:17,220
the order of hundreds of routers in a

127
00:06:13,530 --> 00:06:21,500
full mesh over ATM and they<font color="#E5E5E5"> discovered</font>

128
00:06:17,220 --> 00:06:24,060
<font color="#CCCCCC">that it didn't work and the reason</font>

129
00:06:21,500 --> 00:06:27,100
initially was thought to be

130
00:06:24,060 --> 00:06:30,640
that there was a scaling problem with

131
00:06:27,100 --> 00:06:32,200
the SPF but Dave corrected us and that

132
00:06:30,640 --> 00:06:36,250
because dave was the one that was

133
00:06:32,200 --> 00:06:40,090
working directly on the problem<font color="#E5E5E5"> is at</font>

134
00:06:36,250 --> 00:06:43,690
that time he was<font color="#E5E5E5"> at Cisco and working on</font>

135
00:06:40,090 --> 00:06:46,299
the I<font color="#E5E5E5"> GPS at Cisco and he explained that</font>

136
00:06:43,690 --> 00:06:50,460
<font color="#E5E5E5">it was really a sledding problem if you</font>

137
00:06:46,300 --> 00:06:53,500
have one<font color="#CCCCCC"> link go down two routers</font>

138
00:06:50,460 --> 00:06:56,560
announced one LSA if it were ospf it

139
00:06:53,500 --> 00:07:01,030
would be one LSA if<font color="#E5E5E5"> it's is is is one</font>

140
00:06:56,560 --> 00:07:03,430
LSP fragment so to LSP fragments go out

141
00:07:01,030 --> 00:07:07,859
to each of the neighbors of those two

142
00:07:03,430 --> 00:07:11,590
routers so you have two times<font color="#E5E5E5"> and it's a</font>

143
00:07:07,860 --> 00:07:14,140
propagation and then each of<font color="#E5E5E5"> those</font>

144
00:07:11,590 --> 00:07:18,520
routers that receives that LSA sends

145
00:07:14,140 --> 00:07:21,159
that<font color="#E5E5E5"> same LSA to each of its neighbors</font>

146
00:07:18,520 --> 00:07:26,469
so you have in a network a<font color="#E5E5E5"> total of n</font>

147
00:07:21,160 --> 00:07:29,470
squared<font color="#CCCCCC"> to N</font><font color="#E5E5E5"> squared</font><font color="#CCCCCC"> LSAs and each</font>

148
00:07:26,470 --> 00:07:32,890
router receives 1 times n squared if a

149
00:07:29,470 --> 00:07:35,410
router goes down everybody that's

150
00:07:32,890 --> 00:07:38,200
adjacent to that router all n routers

151
00:07:35,410 --> 00:07:40,930
that are Jason to that router initiate

152
00:07:38,200 --> 00:07:43,120
an LSA send it to everybody to their

153
00:07:40,930 --> 00:07:44,530
adjacent to they all resend it to every

154
00:07:43,120 --> 00:07:47,470
<font color="#E5E5E5">bit of derogation</font><font color="#CCCCCC"> to because they're</font><font color="#E5E5E5"> not</font>

155
00:07:44,530 --> 00:07:50,229
sure that they know it<font color="#CCCCCC"> and you have each</font>

156
00:07:47,470 --> 00:07:51,850
router receives a squared or in this

157
00:07:50,230 --> 00:07:56,920
case if it's the number that<font color="#E5E5E5"> you're</font>

158
00:07:51,850 --> 00:07:59,830
adjacent to a squared<font color="#CCCCCC"> L essays now if</font>

159
00:07:56,920 --> 00:08:03,730
it's an LSP fragment and it's the size

160
00:07:59,830 --> 00:08:06,849
of a full and to you that's<font color="#E5E5E5"> 4k for</font>

161
00:08:03,730 --> 00:08:09,580
typical and to use if you have on the

162
00:08:06,850 --> 00:08:14,520
order of a thousand routers<font color="#CCCCCC"> n squared</font>

163
00:08:09,580 --> 00:08:21,159
times 4k for for each LS pdu fragment is

164
00:08:14,520 --> 00:08:22,780
on the order of forty megabytes of UDP

165
00:08:21,160 --> 00:08:24,760
buffering that you would need<font color="#CCCCCC"> to</font><font color="#E5E5E5"> be able</font>

166
00:08:22,780 --> 00:08:26,500
to absorb that without dropping anything

167
00:08:24,760 --> 00:08:28,539
and most routers at least at that time

168
00:08:26,500 --> 00:08:32,650
<font color="#CCCCCC">no router would would</font><font color="#E5E5E5"> be able</font><font color="#CCCCCC"> to</font>

169
00:08:28,540 --> 00:08:35,590
dedicate forty megabytes to to UDP

170
00:08:32,650 --> 00:08:36,470
buffering<font color="#CCCCCC"> for the igp and even now</font>

171
00:08:35,590 --> 00:08:40,790
that's kind of a

172
00:08:36,470 --> 00:08:48,770
lot so and there's also a fair amount of

173
00:08:40,789 --> 00:08:50,329
processing<font color="#CCCCCC"> okay now scaling the IGP done</font>

174
00:08:48,770 --> 00:08:53,090
<font color="#E5E5E5">i'm just going to use john moores</font>

175
00:08:50,330 --> 00:08:56,720
estimate there are arguments about

176
00:08:53,090 --> 00:09:01,430
whether or<font color="#CCCCCC"> not this is accurate john-boy</font>

177
00:08:56,720 --> 00:09:08,950
estimates that the SPF if you sort the

178
00:09:01,430 --> 00:09:12,020
links is l log 2 of n4l links and nodes

179
00:09:08,950 --> 00:09:15,890
the incremental SPF is much faster than

180
00:09:12,020 --> 00:09:17,720
this and packet designs jenga's in

181
00:09:15,890 --> 00:09:21,189
particular have been advocating using an

182
00:09:17,720 --> 00:09:24,740
incremental SPF it does help quite a lot

183
00:09:21,190 --> 00:09:26,960
<font color="#CCCCCC">I'll go in later well</font><font color="#E5E5E5"> I'm actually not</font>

184
00:09:24,740 --> 00:09:29,060
going to discuss I'm not going to<font color="#E5E5E5"> try to</font>

185
00:09:26,960 --> 00:09:36,590
quantify how much better an incremental

186
00:09:29,060 --> 00:09:39,680
SPS is than a full SPF but in large

187
00:09:36,590 --> 00:09:43,900
topologies you can save at least a

188
00:09:39,680 --> 00:09:46,189
factor of<font color="#E5E5E5"> 10 and sometimes better</font>

189
00:09:43,900 --> 00:09:48,650
however there are cases in which the

190
00:09:46,190 --> 00:09:52,160
link that fails is very close<font color="#CCCCCC"> to you</font><font color="#E5E5E5"> and</font>

191
00:09:48,650 --> 00:09:57,380
it affects it can sometimes affect the

192
00:09:52,160 --> 00:10:00,910
entire topology in that case<font color="#CCCCCC"> the</font>

193
00:09:57,380 --> 00:10:03,920
incremental SPF can actually be slower

194
00:10:00,910 --> 00:10:06,589
the obvious<font color="#E5E5E5"> question then those if</font>

195
00:10:03,920 --> 00:10:10,069
flooding is fast and the full SPF is

196
00:10:06,590 --> 00:10:13,850
very fast we're very fast even even the

197
00:10:10,070 --> 00:10:16,180
slower even if a very slow full SPF

198
00:10:13,850 --> 00:10:19,520
would be a half a second or a second an

199
00:10:16,180 --> 00:10:20,989
extremely slow SPF then why does it<font color="#E5E5E5"> take</font>

200
00:10:19,520 --> 00:10:22,880
three minutes for<font color="#E5E5E5"> some routers to</font>

201
00:10:20,990 --> 00:10:25,180
recover and the obvious<font color="#CCCCCC"> answer which I</font>

202
00:10:22,880 --> 00:10:29,000
<font color="#E5E5E5">think has been covered by others is that</font>

203
00:10:25,180 --> 00:10:31,400
<font color="#E5E5E5">route install dominates packets don't</font>

204
00:10:29,000 --> 00:10:35,210
start stop dropping just because yes SPF

205
00:10:31,400 --> 00:10:37,400
is complete there are a number of

206
00:10:35,210 --> 00:10:41,390
solutions<font color="#E5E5E5"> to the right install problem</font>

207
00:10:37,400 --> 00:10:45,319
Dave mentioned one of them which is you

208
00:10:41,390 --> 00:10:47,600
use a two-stage route look up the

209
00:10:45,320 --> 00:10:49,010
obvious one of course is to just improve

210
00:10:47,600 --> 00:10:51,140
the<font color="#E5E5E5"> time</font>

211
00:10:49,010 --> 00:10:53,930
the transfer time from the route

212
00:10:51,140 --> 00:10:57,260
processor to the forwarding cards and

213
00:10:53,930 --> 00:11:01,910
the time it takes<font color="#CCCCCC"> to actually install in</font>

214
00:10:57,260 --> 00:11:04,910
the<font color="#CCCCCC"> asic</font><font color="#E5E5E5"> routing tables that would get</font>

215
00:11:01,910 --> 00:11:07,250
you you know forgot to factor 5 i've got

216
00:11:04,910 --> 00:11:09,560
you factor 10 still wouldn't be enough

217
00:11:07,250 --> 00:11:11,480
you the convergence would still be way

218
00:11:09,560 --> 00:11:14,329
too slow for something on the order of

219
00:11:11,480 --> 00:11:17,080
250 k routes if you do a<font color="#E5E5E5"> two-stage look</font>

220
00:11:14,330 --> 00:11:22,370
up though<font color="#CCCCCC"> Tuesday's look up if you had</font>

221
00:11:17,080 --> 00:11:26,150
250,000 bgp destinations those would map

222
00:11:22,370 --> 00:11:30,230
into however many destinations you had

223
00:11:26,150 --> 00:11:33,350
in your<font color="#CCCCCC"> IGP so if you had a say thousand</font>

224
00:11:30,230 --> 00:11:35,270
nodes and a total of ten thousand

225
00:11:33,350 --> 00:11:37,160
destinations you've at least reduced

226
00:11:35,270 --> 00:11:41,329
that to 10,000 entries that you have to

227
00:11:37,160 --> 00:11:46,370
change your asics have to be capable<font color="#CCCCCC"> of</font>

228
00:11:41,330 --> 00:11:49,580
doing a two-stage look up and some are

229
00:11:46,370 --> 00:11:53,360
and some aren't if you do have the<font color="#E5E5E5"> spare</font>

230
00:11:49,580 --> 00:11:55,220
cycles do a<font color="#E5E5E5"> two-stage look up in this</font>

231
00:11:53,360 --> 00:11:59,300
case<font color="#E5E5E5"> you would save a factor of 25 right</font>

232
00:11:55,220 --> 00:12:02,450
off the bat the case where<font color="#CCCCCC"> you don't</font>

233
00:11:59,300 --> 00:12:05,150
actually save anything is if the BGP

234
00:12:02,450 --> 00:12:06,890
route would change because the<font color="#CCCCCC"> igp costs</font>

235
00:12:05,150 --> 00:12:09,500
has changed because that's part of the

236
00:12:06,890 --> 00:12:11,360
BGP look up in that case if<font color="#CCCCCC"> you changed</font>

237
00:12:09,500 --> 00:12:13,430
all the<font color="#CCCCCC"> igp routes you then still have</font>

238
00:12:11,360 --> 00:12:15,260
to go<font color="#E5E5E5"> to the BGP table but if only</font>

239
00:12:13,430 --> 00:12:17,390
<font color="#E5E5E5">twenty percent of those routes change</font>

240
00:12:15,260 --> 00:12:22,090
because the<font color="#CCCCCC"> igp cause changed and you</font>

241
00:12:17,390 --> 00:12:26,300
<font color="#E5E5E5">still have a savings if you can either</font>

242
00:12:22,090 --> 00:12:30,410
<font color="#E5E5E5">map to there's a thousand nodes so you</font>

243
00:12:26,300 --> 00:12:34,250
can either map to a node or you can map

244
00:12:30,410 --> 00:12:37,880
all<font color="#CCCCCC"> the destinations some of the asics</font>

245
00:12:34,250 --> 00:12:40,090
have some limited table space so if you

246
00:12:37,880 --> 00:12:43,040
wanted to map all of the destinations

247
00:12:40,090 --> 00:12:48,170
you might run at a table space that

248
00:12:43,040 --> 00:12:50,540
someone were to inject all of<font color="#CCCCCC"> bgp into</font>

249
00:12:48,170 --> 00:12:52,910
their IEP for example and<font color="#CCCCCC"> you wouldn't</font>

250
00:12:50,540 --> 00:12:55,280
<font color="#CCCCCC">want to have some sort</font><font color="#E5E5E5"> of a catastrophic</font>

251
00:12:52,910 --> 00:12:56,910
failure so if you met to the number of

252
00:12:55,280 --> 00:12:58,890
<font color="#E5E5E5">nodes who wouldn't have that kind of</font>

253
00:12:56,910 --> 00:13:00,150
sapphic failure and you could<font color="#CCCCCC"> also have</font>

254
00:12:58,890 --> 00:13:01,949
a three stage to look up although I

255
00:13:00,150 --> 00:13:03,630
don't<font color="#E5E5E5"> know that anybody has enough time</font>

256
00:13:01,950 --> 00:13:06,690
in their age six to even consider<font color="#E5E5E5"> that I</font>

257
00:13:03,630 --> 00:13:11,090
know we don't or i don't think we do

258
00:13:06,690 --> 00:13:11,090
anyway we have fair amount of<font color="#E5E5E5"> time but</font>

259
00:13:12,590 --> 00:13:22,020
yes if<font color="#CCCCCC"> you do if you do</font><font color="#E5E5E5"> to stage look up</font>

260
00:13:16,860 --> 00:13:24,030
and the<font color="#CCCCCC"> igp and you don't have bgp</font>

261
00:13:22,020 --> 00:13:26,220
routes changing because the<font color="#CCCCCC"> igp costs</font>

262
00:13:24,030 --> 00:13:29,189
change<font color="#CCCCCC"> sub-second route install is</font>

263
00:13:26,220 --> 00:13:34,310
achievable and we know that because well

264
00:13:29,190 --> 00:13:38,970
it's achievable we know<font color="#CCCCCC"> that's intestine</font>

265
00:13:34,310 --> 00:13:41,219
SPF required<font color="#E5E5E5"> okay mpls has some</font>

266
00:13:38,970 --> 00:13:44,280
<font color="#E5E5E5">different requirements for scaling and</font>

267
00:13:41,220 --> 00:13:47,430
the main difference with mpls is that

268
00:13:44,280 --> 00:13:52,650
you can potentially have one constrained

269
00:13:47,430 --> 00:13:57,810
SPF / label switch path if you have say

270
00:13:52,650 --> 00:14:01,740
a hundred node core and your ingress for

271
00:13:57,810 --> 00:14:03,479
a hundred LSPs and a link breaks you

272
00:14:01,740 --> 00:14:06,060
could<font color="#CCCCCC"> potentially you know if you had to</font>

273
00:14:03,480 --> 00:14:09,630
rewrap say<font color="#CCCCCC"> forty LSPs you could</font>

274
00:14:06,060 --> 00:14:13,680
<font color="#CCCCCC">potentially have to do 40 csps if your</font>

275
00:14:09,630 --> 00:14:15,480
CFCF was very slow say a<font color="#E5E5E5"> half a second</font>

276
00:14:13,680 --> 00:14:20,430
that would be<font color="#CCCCCC"> very significant amount of</font>

277
00:14:15,480 --> 00:14:23,610
time even<font color="#CCCCCC"> at a even at 100 millisecond</font>

278
00:14:20,430 --> 00:14:26,579
SPS that's that's a significant amount

279
00:14:23,610 --> 00:14:29,640
of time<font color="#E5E5E5"> four seconds is longer than most</font>

280
00:14:26,580 --> 00:14:31,410
people or if you have to do if you'd

281
00:14:29,640 --> 00:14:32,550
need four seconds of computation it's

282
00:14:31,410 --> 00:14:34,829
going to take a little<font color="#E5E5E5"> bit longer you</font>

283
00:14:32,550 --> 00:14:36,439
all arouse installed and people are

284
00:14:34,830 --> 00:14:39,840
typically looking for a faster

285
00:14:36,440 --> 00:14:44,190
convergence than on<font color="#CCCCCC"> the order for</font><font color="#E5E5E5"> five</font>

286
00:14:39,840 --> 00:14:45,840
to<font color="#E5E5E5"> ten seconds there are ways of getting</font>

287
00:14:44,190 --> 00:14:51,540
around doing the sea SPF and<font color="#E5E5E5"> I'm going</font>

288
00:14:45,840 --> 00:14:55,500
to discuss those a<font color="#E5E5E5"> little bit scaling</font>

289
00:14:51,540 --> 00:14:59,040
the route install mpls is in many cases

290
00:14:55,500 --> 00:15:02,160
easier to deal with<font color="#E5E5E5"> because in mpls you</font>

291
00:14:59,040 --> 00:15:04,829
have the<font color="#CCCCCC"> ability to configure a cost on</font>

292
00:15:02,160 --> 00:15:07,319
the LSP regardless of<font color="#E5E5E5"> the route it takes</font>

293
00:15:04,830 --> 00:15:09,699
if you take advantage<font color="#CCCCCC"> of that then you</font>

294
00:15:07,320 --> 00:15:12,189
never<font color="#CCCCCC"> have a BGP route</font>

295
00:15:09,699 --> 00:15:17,309
change because the<font color="#CCCCCC"> igp cloths changed if</font>

296
00:15:12,189 --> 00:15:20,759
you have non mpls routers one of the

297
00:15:17,309 --> 00:15:24,600
designs is to have a flat<font color="#CCCCCC"> igp but have a</font>

298
00:15:20,759 --> 00:15:30,339
limited set of those routers in the core

299
00:15:24,600 --> 00:15:34,199
being mpls capable it you then<font color="#E5E5E5"> have if</font>

300
00:15:30,339 --> 00:15:39,639
you have the<font color="#CCCCCC"> ability to advertise the</font>

301
00:15:34,199 --> 00:15:42,790
<font color="#E5E5E5">LSP s the link the MPLS LSPs into the</font>

302
00:15:39,639 --> 00:15:45,999
<font color="#CCCCCC">igp as if they were links at a fixed</font>

303
00:15:42,790 --> 00:15:49,079
cost then the routers around the edge

304
00:15:45,999 --> 00:15:53,709
don't see any change in<font color="#E5E5E5"> the ITP when a</font>

305
00:15:49,079 --> 00:15:55,089
LSP reroutes if you have routers on the

306
00:15:53,709 --> 00:15:57,488
edge to take three<font color="#CCCCCC"> minutes to switch</font>

307
00:15:55,089 --> 00:16:03,910
over the<font color="#CCCCCC"> BGP routes you avoid having</font>

308
00:15:57,489 --> 00:16:07,029
those routers do any work<font color="#CCCCCC"> ok Tuesday's</font>

309
00:16:03,910 --> 00:16:08,969
<font color="#E5E5E5">lookup is common i'm not sure but i</font>

310
00:16:07,029 --> 00:16:14,259
think everybody does a two-stage look up

311
00:16:08,970 --> 00:16:16,959
if you have<font color="#CCCCCC"> on the order of 100 mpls</font>

312
00:16:14,259 --> 00:16:18,220
tunnels and you have to change 40 of

313
00:16:16,959 --> 00:16:20,108
them you have to change for tea table

314
00:16:18,220 --> 00:16:22,929
entries<font color="#E5E5E5"> and hardware so its route</font>

315
00:16:20,109 --> 00:16:24,369
install is not a big issue for mpls as

316
00:16:22,929 --> 00:16:27,009
long as<font color="#CCCCCC"> you have the two-stage look up</font>

317
00:16:24,369 --> 00:16:32,410
if you had to change the 250,000 routes

318
00:16:27,009 --> 00:16:34,480
in order to accomplish a<font color="#CCCCCC"> rear out then</font>

319
00:16:32,410 --> 00:16:37,089
rat install would be a significant

320
00:16:34,480 --> 00:16:43,359
problem<font color="#E5E5E5"> I don't think</font><font color="#CCCCCC"> that is a</font><font color="#E5E5E5"> problem</font>

321
00:16:37,089 --> 00:16:45,489
for any implementation now<font color="#CCCCCC"> ok mpls of</font>

322
00:16:43,359 --> 00:16:51,149
course offers some fast recovery

323
00:16:45,489 --> 00:16:54,369
techniques fast rear out I think

324
00:16:51,149 --> 00:16:56,109
everybody's implementation is is well

325
00:16:54,369 --> 00:16:58,569
the implementation is very but I think

326
00:16:56,109 --> 00:17:02,199
all the implementations are our way

327
00:16:58,569 --> 00:17:04,359
sub-second and some of the

328
00:17:02,199 --> 00:17:07,480
implementations even with large numbers

329
00:17:04,359 --> 00:17:09,458
<font color="#CCCCCC">of LSPs consistently come in under 50</font>

330
00:17:07,480 --> 00:17:11,250
milliseconds well under 50 milliseconds

331
00:17:09,459 --> 00:17:13,480
for the salt recovery of course the

332
00:17:11,250 --> 00:17:15,939
benefit of<font color="#E5E5E5"> tasker you're at is that you</font>

333
00:17:13,480 --> 00:17:19,059
are recovering from the fault at the

334
00:17:15,939 --> 00:17:20,910
point<font color="#CCCCCC"> of local repair wherever the</font>

335
00:17:19,059 --> 00:17:24,720
sonnet

336
00:17:20,910 --> 00:17:26,640
detect when a synthesis honest

337
00:17:24,720 --> 00:17:30,420
detectives occurred it's a matter it's a

338
00:17:26,640 --> 00:17:33,720
local issue making<font color="#CCCCCC"> the repair those</font>

339
00:17:30,420 --> 00:17:37,200
routers that that do things quickly have

340
00:17:33,720 --> 00:17:40,380
all of the state<font color="#E5E5E5"> pre-installed in all</font>

341
00:17:37,200 --> 00:17:43,620
the forwarding cards such that and at

342
00:17:40,380 --> 00:17:45,420
least well at least some of<font color="#E5E5E5"> the</font>

343
00:17:43,620 --> 00:17:47,489
implementations don't even involve the

344
00:17:45,420 --> 00:17:50,010
route processor the forwarding cards

345
00:17:47,490 --> 00:17:53,700
communicate directly to accomplish the

346
00:17:50,010 --> 00:17:56,910
repair and that's how that's how you can

347
00:17:53,700 --> 00:18:00,030
consistently get well under the 50

348
00:17:56,910 --> 00:18:01,860
millisecond mark another the

349
00:18:00,030 --> 00:18:05,300
disadvantage of fast free route is you

350
00:18:01,860 --> 00:18:11,939
have a lot of detours you have a lot of

351
00:18:05,300 --> 00:18:14,220
LSPs state in the network the if you

352
00:18:11,940 --> 00:18:16,410
another technique<font color="#E5E5E5"> which involves pre</font>

353
00:18:14,220 --> 00:18:19,380
<font color="#E5E5E5">signaling backup panthous Jesus standby</font>

354
00:18:16,410 --> 00:18:21,570
LSP and standby LSP is just a second LSP

355
00:18:19,380 --> 00:18:24,210
from the ingress to the<font color="#E5E5E5"> egress that</font>

356
00:18:21,570 --> 00:18:28,590
doesn't share any resource and that's

357
00:18:24,210 --> 00:18:31,860
where shared srl<font color="#E5E5E5"> geez shared risk link</font>

358
00:18:28,590 --> 00:18:34,020
groups come in handy so that if you have

359
00:18:31,860 --> 00:18:38,790
to link switch from standpoint of

360
00:18:34,020 --> 00:18:41,280
topology are<font color="#E5E5E5"> are unique however they</font>

361
00:18:38,790 --> 00:18:45,120
share some resource whether it's<font color="#CCCCCC"> a</font>

362
00:18:41,280 --> 00:18:48,780
they're both lambdas on the same fiber

363
00:18:45,120 --> 00:18:51,750
or whether they share some other

364
00:18:48,780 --> 00:18:54,290
resource it down to they might be fibers

365
00:18:51,750 --> 00:18:56,070
on the<font color="#E5E5E5"> same conduit if there is some</font>

366
00:18:54,290 --> 00:18:58,740
<font color="#CCCCCC">chance that</font><font color="#E5E5E5"> they're going to fail</font>

367
00:18:56,070 --> 00:19:00,870
together you can put them in an SR LG

368
00:18:58,740 --> 00:19:03,510
and then avoid trying to put the backup

369
00:19:00,870 --> 00:19:05,219
half over a link that is going to fail

370
00:19:03,510 --> 00:19:07,500
at the same time<font color="#CCCCCC"> as primary path is</font>

371
00:19:05,220 --> 00:19:13,140
which makes them the standbys effective

372
00:19:07,500 --> 00:19:16,590
but standby<font color="#E5E5E5"> since our pre signaled don't</font>

373
00:19:13,140 --> 00:19:19,950
require that don't require that you do

374
00:19:16,590 --> 00:19:22,020
any SPF before the recovery<font color="#CCCCCC"> if simply</font>

375
00:19:19,950 --> 00:19:24,810
send a message back to<font color="#E5E5E5"> the ingress and</font>

376
00:19:22,020 --> 00:19:28,710
the ingress can then and<font color="#E5E5E5"> there typically</font>

377
00:19:24,810 --> 00:19:32,129
sub-second recovery the ingress simply

378
00:19:28,710 --> 00:19:35,370
switches over to an already signaled LSP

379
00:19:32,130 --> 00:19:37,680
pre computed<font color="#E5E5E5"> LS PS are another option</font>

380
00:19:35,370 --> 00:19:39,540
where you compute the past but don't

381
00:19:37,680 --> 00:19:42,630
signal it the disadvantage of pre

382
00:19:39,540 --> 00:19:44,879
computed alternate paths is you then

383
00:19:42,630 --> 00:19:47,580
have a<font color="#E5E5E5"> signaling you have a fair amount</font>

384
00:19:44,880 --> 00:19:49,410
of signaling plus you can't do any

385
00:19:47,580 --> 00:19:52,919
traffic engineering on the<font color="#E5E5E5"> backup past</font>

386
00:19:49,410 --> 00:19:55,740
if<font color="#E5E5E5"> you don't signal them so if you do</font>

387
00:19:52,920 --> 00:19:58,020
put if you do dedicate bandwidth to the

388
00:19:55,740 --> 00:19:59,640
backup<font color="#E5E5E5"> Ellis peace and there's to the</font>

389
00:19:58,020 --> 00:20:01,110
standby LSPs and there's a<font color="#E5E5E5"> way of doing</font>

390
00:19:59,640 --> 00:20:03,120
<font color="#E5E5E5">that without actually interfering with</font>

391
00:20:01,110 --> 00:20:04,560
your primary Ellis<font color="#CCCCCC"> case you simply</font><font color="#E5E5E5"> put</font>

392
00:20:03,120 --> 00:20:09,479
it<font color="#E5E5E5"> on a different</font><font color="#CCCCCC"> holding and reserving</font>

393
00:20:04,560 --> 00:20:11,850
priority if your primary LSPs ignore the

394
00:20:09,480 --> 00:20:15,000
the other holding and reserving priority

395
00:20:11,850 --> 00:20:17,100
then<font color="#E5E5E5"> it's existe the standbys weren't</font>

396
00:20:15,000 --> 00:20:19,080
there<font color="#E5E5E5"> and the standbys has to take into</font>

397
00:20:17,100 --> 00:20:20,730
consideration when they're routed the

398
00:20:19,080 --> 00:20:22,409
bandwidth used by the primaries in

399
00:20:20,730 --> 00:20:25,470
addition the bandwidth used by the other

400
00:20:22,410 --> 00:20:28,590
standbys so you get traffic engineering

401
00:20:25,470 --> 00:20:30,510
you'd say you get a reasonable initial

402
00:20:28,590 --> 00:20:35,520
state on the<font color="#E5E5E5"> recovery sub-second</font>

403
00:20:30,510 --> 00:20:37,080
recovery very low congestion after the

404
00:20:35,520 --> 00:20:39,090
recovery and then you can get further

405
00:20:37,080 --> 00:20:41,689
optimization after that when<font color="#E5E5E5"> you rewrite</font>

406
00:20:39,090 --> 00:20:41,689
the primaries

407
00:20:48,029 --> 00:20:54,809
okay when I just be<font color="#CCCCCC"> only that we have</font>

408
00:20:52,169 --> 00:20:57,389
using<font color="#CCCCCC"> igp only the recovery takes a</font>

409
00:20:54,809 --> 00:20:59,369
number<font color="#CCCCCC"> of steps steps the advertisements</font>

410
00:20:57,389 --> 00:21:02,389
are originated by the routers that

411
00:20:59,369 --> 00:21:06,809
detect the fault so their detection

412
00:21:02,389 --> 00:21:10,498
origination of the<font color="#CCCCCC"> lsas the lsas are</font>

413
00:21:06,809 --> 00:21:12,658
flooded there's only one SPF required

414
00:21:10,499 --> 00:21:14,759
per router as opposed to mpls where

415
00:21:12,659 --> 00:21:19,259
there may be many SBS required for each

416
00:21:14,759 --> 00:21:21,330
router so the sbf if the SPF time is 100

417
00:21:19,259 --> 00:21:25,859
milliseconds it's only 11 hundred

418
00:21:21,330 --> 00:21:28,259
milliseconds times 1 the<font color="#CCCCCC"> IGP routes are</font>

419
00:21:25,859 --> 00:21:30,029
installed and at<font color="#CCCCCC"> that point if you have</font>

420
00:21:28,259 --> 00:21:33,029
a<font color="#E5E5E5"> two-stage forwarding look up that's</font>

421
00:21:30,029 --> 00:21:35,309
when your recovery occurs the point

422
00:21:33,029 --> 00:21:40,559
where I<font color="#E5E5E5"> GPRS are installed is typically</font>

423
00:21:35,309 --> 00:21:44,639
sub-second at that<font color="#E5E5E5"> point you met btp</font>

424
00:21:40,559 --> 00:21:47,849
routes<font color="#CCCCCC"> onto the igp routes and then</font><font color="#E5E5E5"> vtp</font>

425
00:21:44,639 --> 00:21:52,439
<font color="#CCCCCC">routes are installed so if you have a</font>

426
00:21:47,849 --> 00:21:55,649
two-stage look up then you may<font color="#CCCCCC"> have some</font>

427
00:21:52,440 --> 00:21:59,969
routes which are which require that the

428
00:21:55,649 --> 00:22:02,309
BJP entry be changed and<font color="#CCCCCC"> you would get</font>

429
00:21:59,969 --> 00:22:03,629
<font color="#E5E5E5">your recovery at that point but if it's</font>

430
00:22:02,309 --> 00:22:05,789
only twenty percent of the routes at

431
00:22:03,629 --> 00:22:07,199
least you'll save a factor of<font color="#E5E5E5"> five if</font>

432
00:22:05,789 --> 00:22:08,820
you have to<font color="#E5E5E5"> install a one hundred</font>

433
00:22:07,200 --> 00:22:10,139
percent of the affected routes<font color="#E5E5E5"> because</font>

434
00:22:08,820 --> 00:22:11,339
you don't<font color="#CCCCCC"> have a two-stage look up</font>

435
00:22:10,139 --> 00:22:16,559
that's where you start to get<font color="#E5E5E5"> your very</font>

436
00:22:11,339 --> 00:22:22,519
long install times<font color="#E5E5E5"> okay with mpls as</font>

437
00:22:16,559 --> 00:22:25,408
soon as<font color="#E5E5E5"> the fault is detected or within</font>

438
00:22:22,519 --> 00:22:27,989
its implementation dependent but within

439
00:22:25,409 --> 00:22:32,429
<font color="#CCCCCC">ten milliseconds on some implementations</font>

440
00:22:27,989 --> 00:22:36,950
of when the fault is detected the<font color="#E5E5E5"> ferry</font>

441
00:22:32,429 --> 00:22:39,929
recovery can occur after that

442
00:22:36,950 --> 00:22:42,269
advertisements are originated the fault

443
00:22:39,929 --> 00:22:44,759
detection and in a good implementation

444
00:22:42,269 --> 00:22:46,969
the fault detection does not require any

445
00:22:44,759 --> 00:22:49,409
attention of the<font color="#E5E5E5"> route processor</font>

446
00:22:46,969 --> 00:22:51,509
advertisements are typically originated

447
00:22:49,409 --> 00:22:54,809
or typically have<font color="#CCCCCC"> to go through the</font>

448
00:22:51,509 --> 00:23:00,080
route processor some routers<font color="#CCCCCC"> have put</font>

449
00:22:54,809 --> 00:23:03,749
the adjacency of the<font color="#CCCCCC"> igp</font><font color="#E5E5E5"> adjacency</font>

450
00:23:00,080 --> 00:23:07,259
processing on the line cards and that

451
00:23:03,749 --> 00:23:10,529
takes decoupling that from the route

452
00:23:07,259 --> 00:23:12,749
processor allows you to decrease your

453
00:23:10,529 --> 00:23:17,190
timers without any without with

454
00:23:12,749 --> 00:23:20,879
minimizing the risk of causing any

455
00:23:17,190 --> 00:23:22,409
instability because typically the the

456
00:23:20,879 --> 00:23:26,459
processors that are on the forwarding

457
00:23:22,409 --> 00:23:32,309
cards don't<font color="#E5E5E5"> have any long threads of</font>

458
00:23:26,460 --> 00:23:35,849
execution like SPS up to<font color="#E5E5E5"> one SPF is</font>

459
00:23:32,309 --> 00:23:37,349
required per impious LSP however there

460
00:23:35,849 --> 00:23:41,549
are ways of avoiding that and then

461
00:23:37,349 --> 00:23:46,759
that's going to be a little later on the

462
00:23:41,549 --> 00:23:49,769
new mpls LSPs are signaled and then once

463
00:23:46,759 --> 00:23:52,499
by<font color="#E5E5E5"> the way I'm</font><font color="#CCCCCC"> missing stuff here after</font>

464
00:23:49,769 --> 00:23:54,690
the flooding the ingress notices that

465
00:23:52,499 --> 00:23:56,909
the LS that the LSP that is currently

466
00:23:54,690 --> 00:24:00,499
sending traffic on is infeasible if it

467
00:23:56,909 --> 00:24:03,239
already<font color="#E5E5E5"> has signaled an LSP it can then</font>

468
00:24:00,499 --> 00:24:05,759
very quickly send information down to

469
00:24:03,239 --> 00:24:08,940
the<font color="#E5E5E5"> the ingress cards to simply switch a</font>

470
00:24:05,759 --> 00:24:11,759
table entry and if there were for

471
00:24:08,940 --> 00:24:13,469
example 50,000 routes which all use the

472
00:24:11,759 --> 00:24:15,179
same table entry you change the one

473
00:24:13,469 --> 00:24:18,269
table entry in all fifty thousand reps

474
00:24:15,179 --> 00:24:19,289
go over to the standby LSP so that's

475
00:24:18,269 --> 00:24:21,479
something<font color="#E5E5E5"> that can be done relatively</font>

476
00:24:19,289 --> 00:24:23,999
quickly and typically that<font color="#E5E5E5"> sub second</font>

477
00:24:21,479 --> 00:24:25,830
here you<font color="#E5E5E5"> have the you have the flooding</font>

478
00:24:23,999 --> 00:24:27,690
time you have<font color="#CCCCCC"> to contact</font><font color="#E5E5E5"> the route</font>

479
00:24:25,830 --> 00:24:29,549
<font color="#E5E5E5">process or the route processor has to</font>

480
00:24:27,690 --> 00:24:31,799
send something<font color="#CCCCCC"> to line cards but</font><font color="#E5E5E5"> it's</font>

481
00:24:29,549 --> 00:24:33,299
still but the amount<font color="#CCCCCC"> of</font><font color="#E5E5E5"> work that's done</font>

482
00:24:31,799 --> 00:24:37,649
is very small so this is typically

483
00:24:33,299 --> 00:24:40,499
sub-second then SPFs are done then maybe

484
00:24:37,649 --> 00:24:42,299
<font color="#E5E5E5">many SPS LSPs are signaled</font><font color="#CCCCCC"> their</font>

485
00:24:40,499 --> 00:24:44,489
signaling the life he's got to send path

486
00:24:42,299 --> 00:24:46,320
messages get the rosies back and then

487
00:24:44,489 --> 00:24:48,659
when signal is complete if you didn't

488
00:24:46,320 --> 00:24:53,009
<font color="#E5E5E5">have any kind of a standby or fast route</font>

489
00:24:48,659 --> 00:24:55,729
that's when recovery would occur in some

490
00:24:53,009 --> 00:24:59,879
implementation here it varies again

491
00:24:55,729 --> 00:25:03,349
tremendously and it varies on based on

492
00:24:59,879 --> 00:25:06,509
the topology and the implementation

493
00:25:03,349 --> 00:25:08,639
small topologies good implementation you

494
00:25:06,509 --> 00:25:11,669
you may be<font color="#E5E5E5"> talking about a couple of</font>

495
00:25:08,639 --> 00:25:13,770
seconds very large topologies and very

496
00:25:11,669 --> 00:25:18,900
poor implementations you could be tough

497
00:25:13,770 --> 00:25:22,320
about a<font color="#E5E5E5"> couple minutes if you did</font>

498
00:25:18,900 --> 00:25:26,100
something<font color="#E5E5E5"> like full mesh on a very large</font>

499
00:25:22,320 --> 00:25:27,720
network you could be talking about an

500
00:25:26,100 --> 00:25:30,780
enormous amount of time I'll<font color="#CCCCCC"> go into</font>

501
00:25:27,720 --> 00:25:34,260
<font color="#CCCCCC">that later however</font><font color="#E5E5E5"> after this initial</font>

502
00:25:30,780 --> 00:25:37,379
signaling then if you had backup LSPs

503
00:25:34,260 --> 00:25:42,060
you then have to<font color="#E5E5E5"> re-establish the backup</font>

504
00:25:37,380 --> 00:25:44,220
LSPs but whatever fast rear out LLS PG

505
00:25:42,060 --> 00:25:45,840
you had if there's new primary path

506
00:25:44,220 --> 00:25:49,020
there are no longer applicable you have

507
00:25:45,840 --> 00:25:51,659
to recycle those if you had a standby

508
00:25:49,020 --> 00:25:54,090
and you rerouted the primary<font color="#CCCCCC"> the primary</font>

509
00:25:51,660 --> 00:25:57,330
in the standby may now be sharing a link

510
00:25:54,090 --> 00:26:01,649
so you have to rewrite the standby and

511
00:25:57,330 --> 00:26:03,330
then there may be some optimization done

512
00:26:01,650 --> 00:26:06,810
because<font color="#E5E5E5"> after you lay</font><font color="#CCCCCC"> out all</font><font color="#E5E5E5"> the</font>

513
00:26:03,330 --> 00:26:10,500
primary paths if five different routers

514
00:26:06,810 --> 00:26:13,649
had to rewrap had to lay out primary

515
00:26:10,500 --> 00:26:16,620
past they may all use the same resources

516
00:26:13,650 --> 00:26:18,270
depending on how fast your feedback is

517
00:26:16,620 --> 00:26:21,750
relative to have faster setting up your

518
00:26:18,270 --> 00:26:24,150
LSPs you may have over utilized some

519
00:26:21,750 --> 00:26:26,880
some resources in the network and you

520
00:26:24,150 --> 00:26:28,770
may decide to further optimize use this

521
00:26:26,880 --> 00:26:31,140
is where the ambulance adaptivity stuff

522
00:26:28,770 --> 00:26:32,970
comes<font color="#E5E5E5"> in and this is done with</font><font color="#CCCCCC"> mate</font>

523
00:26:31,140 --> 00:26:36,420
before<font color="#E5E5E5"> break so there is a jitter</font>

524
00:26:32,970 --> 00:26:39,990
there's a discontinuity and delay but

525
00:26:36,420 --> 00:26:41,790
there should<font color="#CCCCCC"> be no loss and then after</font>

526
00:26:39,990 --> 00:26:48,330
any optimizations unit then have to

527
00:26:41,790 --> 00:26:49,379
again establish new backups<font color="#CCCCCC"> okay the</font>

528
00:26:48,330 --> 00:26:51,990
things that can<font color="#CCCCCC"> be done to improve</font>

529
00:26:49,380 --> 00:26:54,090
scaling fall into two categories things

530
00:26:51,990 --> 00:26:56,160
that the ISPs can do which has changed

531
00:26:54,090 --> 00:26:58,230
in network topology and things which the

532
00:26:56,160 --> 00:27:02,610
router vendors can do which is<font color="#E5E5E5"> writer</font>

533
00:26:58,230 --> 00:27:06,360
implementation things<font color="#CCCCCC"> okay so now we</font>

534
00:27:02,610 --> 00:27:10,379
start to try to roughly quantify the

535
00:27:06,360 --> 00:27:12,750
impact of topology this is you know what

536
00:27:10,380 --> 00:27:15,090
the ISP could do to either make things

537
00:27:12,750 --> 00:27:16,770
really bad or<font color="#E5E5E5"> to improve things if you</font>

538
00:27:15,090 --> 00:27:18,360
want to make things really bad you take

539
00:27:16,770 --> 00:27:22,230
a really big<font color="#CCCCCC"> network and you and you</font>

540
00:27:18,360 --> 00:27:24,149
build a full mesh the<font color="#CCCCCC"> IGP flooding if</font>

541
00:27:22,230 --> 00:27:27,540
there

542
00:27:24,150 --> 00:27:32,070
if you have a link down each router will

543
00:27:27,540 --> 00:27:34,649
get<font color="#CCCCCC"> two thousand</font><font color="#E5E5E5"> lsas or LS pdu</font>

544
00:27:32,070 --> 00:27:37,260
fragments if you have a router down

545
00:27:34,650 --> 00:27:41,130
actually<font color="#E5E5E5"> I invent this correct you</font>

546
00:27:37,260 --> 00:27:43,890
<font color="#CCCCCC">should have about a million fragments LS</font>

547
00:27:41,130 --> 00:27:49,050
pdu fragments which again I<font color="#CCCCCC"> said you</font>

548
00:27:43,890 --> 00:27:50,790
know forty megabytes of UDP buffering if

549
00:27:49,050 --> 00:27:55,260
you really<font color="#E5E5E5"> wanted to make sure that you</font>

550
00:27:50,790 --> 00:27:57,690
didn't drop any<font color="#E5E5E5"> of those and plus a lot</font>

551
00:27:55,260 --> 00:27:59,370
<font color="#E5E5E5">of processing it's not likely that</font>

552
00:27:57,690 --> 00:28:03,920
that's going<font color="#E5E5E5"> to happen very quickly and</font>

553
00:27:59,370 --> 00:28:06,360
this was actually the cause of a problem

554
00:28:03,920 --> 00:28:11,520
you know in the<font color="#E5E5E5"> circa nineteen</font>

555
00:28:06,360 --> 00:28:14,909
ninety-five time for some<font color="#E5E5E5"> ISPs if you do</font>

556
00:28:11,520 --> 00:28:17,280
if you build a area free a single area

557
00:28:14,910 --> 00:28:19,980
network and you use a partial mesh and

558
00:28:17,280 --> 00:28:23,970
here i just<font color="#E5E5E5"> use ten links / router if</font>

559
00:28:19,980 --> 00:28:27,180
you<font color="#E5E5E5"> use a number of that's</font><font color="#CCCCCC"> actually</font><font color="#E5E5E5"> not</font>

560
00:28:23,970 --> 00:28:31,320
unreasonable number<font color="#CCCCCC"> on some of the older</font>

561
00:28:27,180 --> 00:28:33,990
networks were four or five links /

562
00:28:31,320 --> 00:28:36,510
router pins actually not not that far

563
00:28:33,990 --> 00:28:38,430
awesome some are more mesh than that

564
00:28:36,510 --> 00:28:40,850
somewhere less mesh the neck if you get

565
00:28:38,430 --> 00:28:45,990
a link down<font color="#CCCCCC"> I think that</font><font color="#E5E5E5"> should be 20</font>

566
00:28:40,850 --> 00:28:48,120
but<font color="#E5E5E5"> 20 LS pdu fragments is is really not</font>

567
00:28:45,990 --> 00:28:51,240
an issue at all if<font color="#E5E5E5"> you get a router down</font>

568
00:28:48,120 --> 00:28:54,530
you<font color="#E5E5E5"> should see a hundred and that also</font>

569
00:28:51,240 --> 00:29:00,000
<font color="#E5E5E5">is typically not</font><font color="#CCCCCC"> a problem another</font>

570
00:28:54,530 --> 00:29:03,000
design which you saw in the ATM in the

571
00:29:00,000 --> 00:29:09,840
IP over ATM Corday's was a full mesh

572
00:29:03,000 --> 00:29:14,100
<font color="#E5E5E5">within a core area or a core region well</font>

573
00:29:09,840 --> 00:29:18,659
actually the old unit global crossing

574
00:29:14,100 --> 00:29:23,090
design was to have a single one area<font color="#CCCCCC"> igp</font>

575
00:29:18,660 --> 00:29:29,840
but have a set of core routers with a

576
00:29:23,090 --> 00:29:32,490
full mesh of or<font color="#E5E5E5"> the dual plane design</font>

577
00:29:29,840 --> 00:29:35,490
which is an earful mesh

578
00:29:32,490 --> 00:29:36,960
of<font color="#E5E5E5"> VCs between those core routers but</font>

579
00:29:35,490 --> 00:29:40,440
they were a very small<font color="#CCCCCC"> number of core</font>

580
00:29:36,960 --> 00:29:42,300
routers here I use the number 100 but if

581
00:29:40,440 --> 00:29:46,290
you had a link down you would get on the

582
00:29:42,300 --> 00:29:47,970
order of 200 LF speedy you fragments

583
00:29:46,290 --> 00:29:49,559
which is a manageable number if you had

584
00:29:47,970 --> 00:29:55,670
a router down you still get a large

585
00:29:49,559 --> 00:29:58,260
number ten thousand LS pdu fragments

586
00:29:55,670 --> 00:30:00,210
some of those networks had on the order

587
00:29:58,260 --> 00:30:02,010
of 30<font color="#E5E5E5"> or 40 so you don't get quite that</font>

588
00:30:00,210 --> 00:30:05,040
large of a<font color="#E5E5E5"> number but it's enough it</font>

589
00:30:02,010 --> 00:30:08,970
wasn't<font color="#E5E5E5"> enough to still cause some</font>

590
00:30:05,040 --> 00:30:11,070
trouble<font color="#E5E5E5"> so the ITP and this is one</font><font color="#CCCCCC"> of</font>

591
00:30:08,970 --> 00:30:15,000
the<font color="#E5E5E5"> things that have given a GPS a bad</font>

592
00:30:11,070 --> 00:30:19,110
name and my opinion it was really kind

593
00:30:15,000 --> 00:30:21,150
of a bad design if you have a partial

594
00:30:19,110 --> 00:30:26,699
mesh which would be like an igp only

595
00:30:21,150 --> 00:30:30,330
network as opposed to a you know

596
00:30:26,700 --> 00:30:32,429
something<font color="#E5E5E5"> like IP over ATM you would get</font>

597
00:30:30,330 --> 00:30:37,949
on the order of 20 and<font color="#CCCCCC"> a</font><font color="#E5E5E5"> hundred that</font>

598
00:30:32,429 --> 00:30:39,840
should be 20 so why<font color="#E5E5E5"> would anybody do a</font>

599
00:30:37,950 --> 00:30:42,300
full mesh and the only and the answer is

600
00:30:39,840 --> 00:30:44,699
really a people<font color="#E5E5E5"> are interested now in</font>

601
00:30:42,300 --> 00:30:46,860
doing it with optical and TDM and it's

602
00:30:44,700 --> 00:30:49,380
there's no interest in<font color="#CCCCCC"> doing a full mesh</font>

603
00:30:46,860 --> 00:30:55,760
over ATM but those who believe<font color="#CCCCCC"> in</font>

604
00:30:49,380 --> 00:30:58,140
optical switching or an all-optical core

605
00:30:55,760 --> 00:31:00,990
want routers around the edge of<font color="#E5E5E5"> this</font>

606
00:30:58,140 --> 00:31:03,690
core and they would be exhaustively

607
00:31:00,990 --> 00:31:08,340
connected through that optical network

608
00:31:03,690 --> 00:31:11,610
and<font color="#CCCCCC"> there the full mesh in in core area</font>

609
00:31:08,340 --> 00:31:16,620
again becomes of interest or of concern

610
00:31:11,610 --> 00:31:19,439
and then you could eliminate that whole

611
00:31:16,620 --> 00:31:24,270
mesh if you're running GM pls on optical

612
00:31:19,440 --> 00:31:27,840
switches if you what we won't go down

613
00:31:24,270 --> 00:31:30,300
that path too far because getting<font color="#E5E5E5"> an</font>

614
00:31:27,840 --> 00:31:34,678
opening up a discussion of the relative

615
00:31:30,300 --> 00:31:39,330
merits of GM pls is would be<font color="#E5E5E5"> opening a</font>

616
00:31:34,679 --> 00:31:43,020
can of worms in<font color="#E5E5E5"> this case the impact on</font>

617
00:31:39,330 --> 00:31:45,290
the<font color="#CCCCCC"> igp SPFL again going back</font><font color="#E5E5E5"> to what</font>

618
00:31:43,020 --> 00:31:51,020
John to John Moyes estimate that

619
00:31:45,290 --> 00:31:54,680
l log 2 of n if you have a full mesh

620
00:31:51,020 --> 00:31:59,170
than<font color="#E5E5E5"> L the number of links is it's on</font>

621
00:31:54,680 --> 00:32:03,170
<font color="#CCCCCC">the order of N squared so if you have n</font>

622
00:31:59,170 --> 00:32:06,260
links then you have the<font color="#E5E5E5"> sps computations</font>

623
00:32:03,170 --> 00:32:08,870
<font color="#CCCCCC">n squared log 2 of n if you had a</font>

624
00:32:06,260 --> 00:32:12,110
partial mesh and<font color="#E5E5E5"> there 10 links / router</font>

625
00:32:08,870 --> 00:32:16,969
<font color="#CCCCCC">l would be</font><font color="#E5E5E5"> 10 times n so you would have</font>

626
00:32:12,110 --> 00:32:18,830
10 and log 2 of n<font color="#E5E5E5"> and these low-level</font>

627
00:32:16,970 --> 00:32:20,870
operations you would have in<font color="#CCCCCC"> the first</font>

628
00:32:18,830 --> 00:32:22,610
case 10 to the<font color="#E5E5E5"> 7th of those low level</font>

629
00:32:20,870 --> 00:32:24,260
operations and in the other case you

630
00:32:22,610 --> 00:32:27,350
have 10 to the sift so it's<font color="#E5E5E5"> not you know</font>

631
00:32:24,260 --> 00:32:29,330
<font color="#E5E5E5">it's quite clear that that you've gained</font>

632
00:32:27,350 --> 00:32:35,120
a factor of a hundred by not having<font color="#E5E5E5"> so</font>

633
00:32:29,330 --> 00:32:38,060
<font color="#E5E5E5">much and just doing a sanity check if</font>

634
00:32:35,120 --> 00:32:40,129
that low-level operation took one<font color="#E5E5E5"> micro</font>

635
00:32:38,060 --> 00:32:41,409
<font color="#E5E5E5">second you would get for</font><font color="#CCCCCC"> ten to the</font>

636
00:32:40,130 --> 00:32:43,850
<font color="#E5E5E5">fifth you would get a hundred</font>

637
00:32:41,410 --> 00:32:50,210
milliseconds which is on the<font color="#CCCCCC"> order of</font>

638
00:32:43,850 --> 00:32:53,360
what some of the<font color="#CCCCCC"> IGP</font><font color="#E5E5E5"> SPS yield now if</font>

639
00:32:50,210 --> 00:32:55,970
you have a small SPS it turns out that

640
00:32:53,360 --> 00:33:00,469
it's this is this will be less accurate

641
00:32:55,970 --> 00:33:03,770
at predicting how fast your SPF is but

642
00:33:00,470 --> 00:33:05,480
if you have a small area your real

643
00:33:03,770 --> 00:33:10,190
typically not even concerned about how

644
00:33:05,480 --> 00:33:13,580
long the SPF takes and here<font color="#E5E5E5"> I did</font>

645
00:33:10,190 --> 00:33:15,740
mention that an incremental SPF in the

646
00:33:13,580 --> 00:33:18,530
worst case takes as long if not longer

647
00:33:15,740 --> 00:33:21,110
than a full SPS so it is a it<font color="#CCCCCC"> is a</font>

648
00:33:18,530 --> 00:33:23,510
concern that<font color="#E5E5E5"> in some of these cases the</font>

649
00:33:21,110 --> 00:33:26,780
numbers can be fairly large it's not<font color="#CCCCCC"> a</font>

650
00:33:23,510 --> 00:33:28,610
concern for<font color="#E5E5E5"> the</font><font color="#CCCCCC"> igp though it's</font>

651
00:33:26,780 --> 00:33:30,910
concerned when<font color="#E5E5E5"> you have to do many more</font>

652
00:33:28,610 --> 00:33:30,909
<font color="#E5E5E5">of these</font>

653
00:33:33,899 --> 00:33:42,729
well again another<font color="#CCCCCC"> example is if you</font>

654
00:33:37,809 --> 00:33:44,340
have<font color="#CCCCCC"> a partial mesh with ten links /</font>

655
00:33:42,730 --> 00:33:46,750
router and you only have<font color="#CCCCCC"> a hundred</font>

656
00:33:44,340 --> 00:33:51,010
routers in the area you<font color="#CCCCCC"> have a seven</font>

657
00:33:46,750 --> 00:33:55,539
millisecond SPF and that's really of no

658
00:33:51,010 --> 00:33:57,220
consequence okay now with the<font color="#CCCCCC"> csps if</font>

659
00:33:55,539 --> 00:33:58,960
you have a full mesh and you're trying

660
00:33:57,220 --> 00:34:01,000
<font color="#E5E5E5">to connect if you're trying to connect</font>

661
00:33:58,960 --> 00:34:03,789
every router in your network to every

662
00:34:01,000 --> 00:34:05,860
other router all the way out to the

663
00:34:03,789 --> 00:34:08,349
<font color="#E5E5E5">edges and you have a thousand nodes that</font>

664
00:34:05,860 --> 00:34:14,168
means that every router potentially

665
00:34:08,349 --> 00:34:15,730
could have to do a thousand<font color="#CCCCCC"> csps that</font>

666
00:34:14,168 --> 00:34:18,638
would be if every single one of them<font color="#E5E5E5"> the</font>

667
00:34:15,730 --> 00:34:21,940
more affected if you have two links from

668
00:34:18,639 --> 00:34:24,010
a writer that's near<font color="#CCCCCC"> the edge and you</font>

669
00:34:21,940 --> 00:34:25,359
have to rewrite half of your LSPs it's

670
00:34:24,010 --> 00:34:28,149
still a large number you know if you

671
00:34:25,359 --> 00:34:30,219
have to rerun 500 LSPs if you did have

672
00:34:28,149 --> 00:34:32,319
to<font color="#E5E5E5"> do one see SPF for each one of these</font>

673
00:34:30,219 --> 00:34:34,388
then what you end up with a full mesh

674
00:34:32,320 --> 00:34:37,869
with an N cubed log square root of n

675
00:34:34,389 --> 00:34:39,310
problem and it n is a thousand you have

676
00:34:37,869 --> 00:34:42,460
something<font color="#CCCCCC"> that's on the order of 10 to</font>

677
00:34:39,310 --> 00:34:44,109
the 10th so if you figure that out if

678
00:34:42,460 --> 00:34:47,800
<font color="#E5E5E5">you have the same sort of efficiency in</font>

679
00:34:44,109 --> 00:34:51,060
your SPF that would be two<font color="#CCCCCC"> hours and 46</font>

680
00:34:47,800 --> 00:34:53,500
minutes worth of<font color="#CCCCCC"> C SPF computations so</font>

681
00:34:51,060 --> 00:34:55,929
yeah that looks<font color="#CCCCCC"> like we got a bit of a</font>

682
00:34:53,500 --> 00:34:58,150
<font color="#CCCCCC">problem there you know so don't do that</font>

683
00:34:55,929 --> 00:34:59,950
now it's<font color="#E5E5E5"> really interesting that in the</font>

684
00:34:58,150 --> 00:35:01,330
<font color="#CCCCCC">early days of mpls we had Tony Lee</font>

685
00:34:59,950 --> 00:35:04,089
standing up and saying oh yes we need

686
00:35:01,330 --> 00:35:07,119
forty fifty thousand LSPs traffic

687
00:35:04,089 --> 00:35:08,740
engineering LSPs and well there might

688
00:35:07,119 --> 00:35:13,540
have been reason why no one's actually

689
00:35:08,740 --> 00:35:16,598
<font color="#E5E5E5">done that okay if you have a partial</font>

690
00:35:13,540 --> 00:35:20,410
mesh on the order of<font color="#CCCCCC"> 10 to the 8th even</font>

691
00:35:16,599 --> 00:35:23,530
<font color="#E5E5E5">at 100 seconds that's still cut that's</font>

692
00:35:20,410 --> 00:35:26,470
still a very<font color="#CCCCCC"> long time if you have just</font>

693
00:35:23,530 --> 00:35:30,940
a core area if you<font color="#CCCCCC"> if it's a true area</font>

694
00:35:26,470 --> 00:35:32,649
network you<font color="#CCCCCC"> have on the order of seven</font>

695
00:35:30,940 --> 00:35:34,480
times<font color="#E5E5E5"> ten to the six which is not really</font>

696
00:35:32,650 --> 00:35:40,720
that<font color="#CCCCCC"> much</font><font color="#E5E5E5"> better if you had a full mesh</font>

697
00:35:34,480 --> 00:35:42,339
like the optical core idea with mpls in

698
00:35:40,720 --> 00:35:43,600
the optical core if you had to do that

699
00:35:42,339 --> 00:35:46,390
many<font color="#CCCCCC"> CSPs</font>

700
00:35:43,600 --> 00:35:49,120
if you had a partial mesh and that would

701
00:35:46,390 --> 00:35:50,740
be you<font color="#E5E5E5"> could do</font><font color="#CCCCCC"> that if you didn't have</font>

702
00:35:49,120 --> 00:35:53,640
an optical core where you're trying<font color="#E5E5E5"> to</font>

703
00:35:50,740 --> 00:35:55,930
do a full match or if you had GMP us

704
00:35:53,640 --> 00:35:57,279
then you have seven times sent to the

705
00:35:55,930 --> 00:35:58,629
fifth which is actually a manageable

706
00:35:57,280 --> 00:36:01,450
number you'd have seven hundred

707
00:35:58,630 --> 00:36:03,880
milliseconds or not quite a second worth

708
00:36:01,450 --> 00:36:06,660
of<font color="#CCCCCC"> csps and that's actually a manageable</font>

709
00:36:03,880 --> 00:36:09,700
number that would<font color="#E5E5E5"> be if the</font>

710
00:36:06,660 --> 00:36:12,490
implementation just did<font color="#CCCCCC"> CSPs every time</font>

711
00:36:09,700 --> 00:36:16,299
in tented rewrite an LSP there are a

712
00:36:12,490 --> 00:36:18,189
couple more complications after an LSP

713
00:36:16,300 --> 00:36:20,200
is rerouted and you need to think about

714
00:36:18,190 --> 00:36:24,180
whether there's a better way<font color="#E5E5E5"> to route</font>

715
00:36:20,200 --> 00:36:26,890
that LSP a good example<font color="#CCCCCC"> is if you have</font>

716
00:36:24,180 --> 00:36:29,410
<font color="#E5E5E5">two different ways</font><font color="#CCCCCC"> to get from A to B</font>

717
00:36:26,890 --> 00:36:32,710
and one of the ways you have<font color="#E5E5E5"> 90</font>

718
00:36:29,410 --> 00:36:34,330
milliseconds of LSPs routed on there<font color="#E5E5E5"> and</font>

719
00:36:32,710 --> 00:36:36,640
the<font color="#CCCCCC"> other ways you</font><font color="#E5E5E5"> have 80 and you're</font>

720
00:36:34,330 --> 00:36:39,600
considering<font color="#E5E5E5"> rerouting in LSP well if</font>

721
00:36:36,640 --> 00:36:42,190
that LSP is taking 40 you know 90

722
00:36:39,600 --> 00:36:44,080
megabits on one and 80 on the other and

723
00:36:42,190 --> 00:36:47,140
that LSP is taking up 40 mega bits and

724
00:36:44,080 --> 00:36:49,660
you move it from 90 to 1 with 92 one

725
00:36:47,140 --> 00:36:51,580
with 80 you now have fifty and a hundred

726
00:36:49,660 --> 00:36:54,100
and<font color="#E5E5E5"> twenty so you have to take into</font>

727
00:36:51,580 --> 00:36:56,710
consideration the amount<font color="#E5E5E5"> of bandwidth</font>

728
00:36:54,100 --> 00:36:58,750
that that LSP is using so if you have a

729
00:36:56,710 --> 00:37:01,420
map of the<font color="#E5E5E5"> topology you take the</font>

730
00:36:58,750 --> 00:37:03,490
existing path of the LSP and every link

731
00:37:01,420 --> 00:37:06,430
that that LSB currently uses you have to

732
00:37:03,490 --> 00:37:09,129
subtract the bandwidth<font color="#E5E5E5"> of that LSP from</font>

733
00:37:06,430 --> 00:37:11,680
that length before you run the sps so

734
00:37:09,130 --> 00:37:14,470
that means that that SPF is unique no

735
00:37:11,680 --> 00:37:17,799
other LSP is going to use exactly<font color="#E5E5E5"> that</font><font color="#CCCCCC"> L</font>

736
00:37:14,470 --> 00:37:19,810
that SPS although when you're doing this

737
00:37:17,800 --> 00:37:21,460
<font color="#CCCCCC">all of the LSP is that you're</font>

738
00:37:19,810 --> 00:37:23,529
considering<font color="#E5E5E5"> rerouting start from that</font>

739
00:37:21,460 --> 00:37:25,690
<font color="#E5E5E5">base and have a</font><font color="#CCCCCC"> very small amount</font><font color="#E5E5E5"> of</font>

740
00:37:23,530 --> 00:37:27,870
<font color="#E5E5E5">change from that base so this</font><font color="#CCCCCC"> is a very</font>

741
00:37:25,690 --> 00:37:31,450
<font color="#CCCCCC">good candidate for an incremental SPF</font>

742
00:37:27,870 --> 00:37:34,299
everybody starts out with same SPF make

743
00:37:31,450 --> 00:37:38,620
some changes to a very small<font color="#E5E5E5"> portion of</font>

744
00:37:34,300 --> 00:37:42,160
<font color="#E5E5E5">the topology then you have to run an SPF</font>

745
00:37:38,620 --> 00:37:44,650
so an incremental SPF makes sense in for

746
00:37:42,160 --> 00:37:46,480
that situation<font color="#E5E5E5"> another case is when</font>

747
00:37:44,650 --> 00:37:49,720
you're doing faster you're out or you're

748
00:37:46,480 --> 00:37:51,730
doing<font color="#E5E5E5"> a standby the standby we'll just</font>

749
00:37:49,720 --> 00:37:54,069
<font color="#E5E5E5">take</font><font color="#CCCCCC"> stand by as an example</font><font color="#E5E5E5"> can't take</font>

750
00:37:51,730 --> 00:37:56,170
any of the same links that the primary

751
00:37:54,070 --> 00:37:56,980
is taking and if you're using srl<font color="#CCCCCC"> geez</font>

752
00:37:56,170 --> 00:38:00,369
it can't

753
00:37:56,980 --> 00:38:02,440
take any link that shares an SR LG with

754
00:38:00,369 --> 00:38:04,570
any length of<font color="#E5E5E5"> the primary is taking so</font>

755
00:38:02,440 --> 00:38:09,700
you have a similar operation where you

756
00:38:04,570 --> 00:38:13,540
start out with it with the<font color="#CCCCCC"> SPS with the</font>

757
00:38:09,700 --> 00:38:15,669
same base SPF you go through the hops

758
00:38:13,540 --> 00:38:19,060
that<font color="#E5E5E5"> the primary takes you look up all</font>

759
00:38:15,670 --> 00:38:22,210
the<font color="#CCCCCC"> srl gs4 for each link and then you</font>

760
00:38:19,060 --> 00:38:24,910
mark each of the links with<font color="#CCCCCC"> sharon srl</font><font color="#E5E5E5"> g</font>

761
00:38:22,210 --> 00:38:27,030
on in a topology and then this<font color="#E5E5E5"> is</font>

762
00:38:24,910 --> 00:38:29,890
another candidate for an incremental SPF

763
00:38:27,030 --> 00:38:33,300
at that<font color="#E5E5E5"> point you rerun an SPF</font>

764
00:38:29,890 --> 00:38:38,650
<font color="#E5E5E5">incremental be faster and you determine</font>

765
00:38:33,300 --> 00:38:40,560
<font color="#CCCCCC">the best path for your backup so both of</font>

766
00:38:38,650 --> 00:38:44,710
these are candidates for incremental

767
00:38:40,560 --> 00:38:46,450
that<font color="#CCCCCC"> was</font><font color="#E5E5E5"> I was mainly talking there</font>

768
00:38:44,710 --> 00:38:52,510
about things<font color="#E5E5E5"> that you could do in a</font>

769
00:38:46,450 --> 00:38:55,330
network topology I that last slide<font color="#E5E5E5"> here</font>

770
00:38:52,510 --> 00:38:56,890
went into a little<font color="#CCCCCC"> bit about CS p.m. but</font>

771
00:38:55,330 --> 00:38:58,900
prior to that it was really<font color="#E5E5E5"> all things</font>

772
00:38:56,890 --> 00:39:01,330
that<font color="#E5E5E5"> you could do in a network topology</font>

773
00:38:58,900 --> 00:39:04,240
which have an impact on scaling both for

774
00:39:01,330 --> 00:39:06,220
using an igp only and if you're using it

775
00:39:04,240 --> 00:39:08,890
Thank<font color="#E5E5E5"> You les and</font><font color="#CCCCCC"> we also looked at you</font>

776
00:39:06,220 --> 00:39:10,390
<font color="#CCCCCC">know the fact that the number of csps</font>

777
00:39:08,890 --> 00:39:13,029
and the amount<font color="#E5E5E5"> of CPU time that you</font>

778
00:39:10,390 --> 00:39:15,520
could consume with mpls starts to get

779
00:39:13,030 --> 00:39:19,950
into scary numbers even<font color="#E5E5E5"> though Dave just</font>

780
00:39:15,520 --> 00:39:23,200
told<font color="#E5E5E5"> us that the IG</font><font color="#CCCCCC"> BSP is never scary</font>

781
00:39:19,950 --> 00:39:28,149
two hours of computation would be a<font color="#E5E5E5"> very</font>

782
00:39:23,200 --> 00:39:29,560
scary number the<font color="#CCCCCC"> sum of</font><font color="#E5E5E5"> the things</font><font color="#CCCCCC"> that</font>

783
00:39:28,150 --> 00:39:33,880
you can do from the implementation

784
00:39:29,560 --> 00:39:35,940
standpoint in terms of the<font color="#CCCCCC"> igp scaling</font>

785
00:39:33,880 --> 00:39:39,810
the flooding scaling mesh groups help I

786
00:39:35,940 --> 00:39:45,550
think the shoot's of flooding scaling

787
00:39:39,810 --> 00:39:47,500
<font color="#CCCCCC">okay no</font><font color="#E5E5E5"> it's a GP scaling and then it</font>

788
00:39:45,550 --> 00:39:49,330
was pointed<font color="#E5E5E5"> out by packet design it was</font>

789
00:39:47,500 --> 00:39:52,150
also pointed out in the tutorial last

790
00:39:49,330 --> 00:39:56,670
night that giving priority to refloating

791
00:39:52,150 --> 00:40:00,520
over the<font color="#CCCCCC"> igp SPF it makes a very</font>

792
00:39:56,670 --> 00:40:04,660
<font color="#E5E5E5">remarkable difference that was also in</font>

793
00:40:00,520 --> 00:40:06,420
the<font color="#E5E5E5"> spec 24 I think ospf but and maybe I</font>

794
00:40:04,660 --> 00:40:11,259
says but

795
00:40:06,420 --> 00:40:13,390
some some<font color="#E5E5E5"> I guess some implementations</font>

796
00:40:11,259 --> 00:40:14,979
already did this but the observation was

797
00:40:13,390 --> 00:40:19,960
made that doing it the other way is

798
00:40:14,979 --> 00:40:23,049
<font color="#E5E5E5">wrong in the incremental SPF helps and</font>

799
00:40:19,960 --> 00:40:27,729
<font color="#CCCCCC">there in the work that we've done we've</font>

800
00:40:23,049 --> 00:40:30,880
typically seen like a factor of<font color="#CCCCCC"> 10 in an</font>

801
00:40:27,729 --> 00:40:34,479
improvement on average decoupling<font color="#CCCCCC"> the</font>

802
00:40:30,880 --> 00:40:39,749
<font color="#CCCCCC">igp from BJP and from bgp processing</font><font color="#E5E5E5"> can</font>

803
00:40:34,479 --> 00:40:42,729
help their what I mean is putting the

804
00:40:39,749 --> 00:40:45,308
<font color="#CCCCCC">IGP adjacency processing for example</font><font color="#E5E5E5"> on</font>

805
00:40:42,729 --> 00:40:46,720
the line cards that's why I mean by

806
00:40:45,309 --> 00:40:50,619
decoupling it putting it on another

807
00:40:46,720 --> 00:40:53,799
processor helps also saw any software

808
00:40:50,619 --> 00:40:58,089
techniques for decoupling it being<font color="#E5E5E5"> able</font>

809
00:40:53,799 --> 00:41:01,589
to use<font color="#E5E5E5"> and the scheduling capabilities</font>

810
00:40:58,089 --> 00:41:04,710
of an operating system so that you don't

811
00:41:01,589 --> 00:41:10,359
run if you have a<font color="#E5E5E5"> hundred millisecond</font>

812
00:41:04,710 --> 00:41:14,170
SPF and you have very short<font color="#CCCCCC"> IGP timers</font>

813
00:41:10,359 --> 00:41:18,279
for Giggy for example<font color="#CCCCCC"> you don't become</font>

814
00:41:14,170 --> 00:41:20,200
unstable as a result<font color="#CCCCCC"> of your route</font>

815
00:41:18,279 --> 00:41:22,029
processor having some computationally

816
00:41:20,200 --> 00:41:24,999
intensive things to do long execution

817
00:41:22,029 --> 00:41:29,489
threads so the more you can be couple

818
00:41:24,999 --> 00:41:31,598
that hello processing the better

819
00:41:29,489 --> 00:41:33,549
improving route install it's probably

820
00:41:31,599 --> 00:41:37,779
<font color="#CCCCCC">the biggest</font><font color="#E5E5E5"> thing that can be done to</font>

821
00:41:33,549 --> 00:41:40,569
improve<font color="#CCCCCC"> igp scaling and the two or three</font>

822
00:41:37,779 --> 00:41:42,640
stage<font color="#CCCCCC"> lookup is the big benefit there if</font>

823
00:41:40,569 --> 00:41:49,538
you can<font color="#CCCCCC"> do it to Facebook up to the</font><font color="#E5E5E5"> MPLS</font>

824
00:41:42,640 --> 00:41:52,779
scaling the best way well anyway might

825
00:41:49,539 --> 00:41:55,569
there to ace that you can approach the

826
00:41:52,779 --> 00:41:59,829
problem of<font color="#CCCCCC"> CSPs being slow and one way</font>

827
00:41:55,569 --> 00:42:03,369
is to just try to make it as fast<font color="#E5E5E5"> as</font>

828
00:41:59,829 --> 00:42:05,559
<font color="#CCCCCC">possible and we were looking at very</font>

829
00:42:03,369 --> 00:42:07,269
long x in terms of the total amount of

830
00:42:05,559 --> 00:42:11,229
CSP f you had to do so if you get a

831
00:42:07,269 --> 00:42:15,399
factor of<font color="#CCCCCC"> 10 that may</font><font color="#E5E5E5"> not be enough so</font>

832
00:42:11,229 --> 00:42:18,810
try<font color="#CCCCCC"> to make it as fast as possible in</font>

833
00:42:15,400 --> 00:42:21,480
itself may not be the right approach

834
00:42:18,810 --> 00:42:24,090
and the alternate approach is to try<font color="#E5E5E5"> to</font>

835
00:42:21,480 --> 00:42:27,120
avoid doing a CSP<font color="#E5E5E5"> f at all if at all</font>

836
00:42:24,090 --> 00:42:30,030
possible and and one way of doing that

837
00:42:27,120 --> 00:42:32,190
is<font color="#CCCCCC"> to cache the</font><font color="#E5E5E5"> results if you have an</font>

838
00:42:30,030 --> 00:42:34,560
underutilized network and you do at<font color="#E5E5E5"> CSP</font>

839
00:42:32,190 --> 00:42:37,410
<font color="#E5E5E5">f well for one thing is if you you</font>

840
00:42:34,560 --> 00:42:39,930
typically<font color="#CCCCCC"> only have a certain limited</font>

841
00:42:37,410 --> 00:42:42,210
number of color constraints on your<font color="#E5E5E5"> LS</font>

842
00:42:39,930 --> 00:42:45,259
PS you have different<font color="#E5E5E5"> types of services</font>

843
00:42:42,210 --> 00:42:48,840
and in many networks there's only one

844
00:42:45,260 --> 00:42:50,850
they either don't use colors at all or

845
00:42:48,840 --> 00:42:53,790
they have maybe two or three different

846
00:42:50,850 --> 00:42:58,279
<font color="#E5E5E5">sets of color constraints color and</font>

847
00:42:53,790 --> 00:43:03,590
holding us and and a set of priority

848
00:42:58,280 --> 00:43:06,540
constraints beyond<font color="#CCCCCC"> that</font><font color="#E5E5E5"> they have</font>

849
00:43:03,590 --> 00:43:08,790
different bandwidth constraints they may

850
00:43:06,540 --> 00:43:12,779
have different some LSPs which have

851
00:43:08,790 --> 00:43:15,950
identical bandwidth constraints and but

852
00:43:12,780 --> 00:43:17,730
if the network is very underutilized

853
00:43:15,950 --> 00:43:20,220
regard it doesn't matter<font color="#CCCCCC"> what the</font>

854
00:43:17,730 --> 00:43:23,610
bandwidth constraint is whether it's 10

855
00:43:20,220 --> 00:43:27,660
megabits or whether the LSP requires a

856
00:43:23,610 --> 00:43:29,940
gigabit if you have an<font color="#E5E5E5"> eight gigabits</font>

857
00:43:27,660 --> 00:43:36,440
available they're both going to<font color="#E5E5E5"> fit on</font>

858
00:43:29,940 --> 00:43:36,440
the same path so it often in caching

859
00:43:36,530 --> 00:43:44,040
well<font color="#CCCCCC"> okay so caching has a big benefit</font>

860
00:43:40,250 --> 00:43:47,070
and there are two state there are<font color="#E5E5E5"> two</font>

861
00:43:44,040 --> 00:43:51,300
<font color="#CCCCCC">things that you can do one is you can</font>

862
00:43:47,070 --> 00:43:57,300
cash<font color="#CCCCCC"> if you have to apply constraints</font>

863
00:43:51,300 --> 00:43:59,850
10,000 links if you have to LSPs with on

864
00:43:57,300 --> 00:44:02,610
a with identical set of constraints<font color="#E5E5E5"> you</font>

865
00:43:59,850 --> 00:44:05,370
can you don't have to do you essentially

866
00:44:02,610 --> 00:44:07,380
don't have to do anything you<font color="#CCCCCC"> can</font><font color="#E5E5E5"> simply</font>

867
00:44:05,370 --> 00:44:08,850
apply the same links that if you were

868
00:44:07,380 --> 00:44:11,100
apply to constraints again you'd get the

869
00:44:08,850 --> 00:44:14,580
same result<font color="#CCCCCC"> so you cash those links sets</font>

870
00:44:11,100 --> 00:44:17,819
if you have to LSPs which differ only in

871
00:44:14,580 --> 00:44:21,740
bandwidth you can just simply quickly

872
00:44:17,820 --> 00:44:24,450
run through the link set and if it's you

873
00:44:21,740 --> 00:44:28,830
run through<font color="#E5E5E5"> the rejected links if you're</font>

874
00:44:24,450 --> 00:44:29,390
if the old LSP had a higher bandwidth

875
00:44:28,830 --> 00:44:34,220
constrain

876
00:44:29,390 --> 00:44:37,970
and you run through the set of links

877
00:44:34,220 --> 00:44:40,430
that were available if the old LSP had a

878
00:44:37,970 --> 00:44:42,770
lower bandwidth constraint and you

879
00:44:40,430 --> 00:44:46,549
simply<font color="#CCCCCC"> just run the bin with constraint</font>

880
00:44:42,770 --> 00:44:49,940
only which if the very few lengths

881
00:44:46,550 --> 00:44:53,630
change it is it's a very<font color="#CCCCCC"> small amount of</font>

882
00:44:49,940 --> 00:44:55,280
<font color="#E5E5E5">work if no links change its no work you</font>

883
00:44:53,630 --> 00:44:56,690
<font color="#E5E5E5">just simply do a check and then you</font>

884
00:44:55,280 --> 00:45:00,380
decide that you can use the same link

885
00:44:56,690 --> 00:45:06,770
set if you're doing any kind<font color="#E5E5E5"> of dynamic</font>

886
00:45:00,380 --> 00:45:08,270
allocation here not the big savings is

887
00:45:06,770 --> 00:45:11,150
that you don't<font color="#E5E5E5"> have to allocate any data</font>

888
00:45:08,270 --> 00:45:15,890
structures and that the dynamic

889
00:45:11,150 --> 00:45:17,360
<font color="#E5E5E5">allocation is probably the if you give</font>

890
00:45:15,890 --> 00:45:19,129
any where ever you do dynamic allocation

891
00:45:17,360 --> 00:45:20,870
<font color="#E5E5E5">that uses a limiting factor that's</font>

892
00:45:19,130 --> 00:45:23,060
usually what the biggest contributor to

893
00:45:20,870 --> 00:45:25,310
the beeps these small low level

894
00:45:23,060 --> 00:45:28,070
operations the other thing you<font color="#CCCCCC"> can do is</font>

895
00:45:25,310 --> 00:45:30,950
you can cash the SPF results now link

896
00:45:28,070 --> 00:45:34,430
steps are typically very very small data

897
00:45:30,950 --> 00:45:36,500
structures well the<font color="#CCCCCC"> information as to</font>

898
00:45:34,430 --> 00:45:38,660
whether a link is available or not can

899
00:45:36,500 --> 00:45:45,410
be stored in it in an extremely tiny

900
00:45:38,660 --> 00:45:47,600
data structure a complete SPF result is

901
00:45:45,410 --> 00:45:48,950
many data structures and it's a fair

902
00:45:47,600 --> 00:45:52,370
amount of storage so you don't want to

903
00:45:48,950 --> 00:45:53,750
store too many of those but the<font color="#E5E5E5"> limit to</font>

904
00:45:52,370 --> 00:45:56,509
the number that you have the store is

905
00:45:53,750 --> 00:45:59,090
<font color="#CCCCCC">the number of LSPs if you were to store</font>

906
00:45:56,510 --> 00:46:04,070
one SPF<font color="#CCCCCC"> resolved for every LSPs which</font>

907
00:45:59,090 --> 00:46:05,390
would be a pathologic case you'd be

908
00:46:04,070 --> 00:46:13,010
considerably quite a lot<font color="#E5E5E5"> of memory and</font>

909
00:46:05,390 --> 00:46:14,270
and but at least<font color="#E5E5E5"> it's bounded and the</font>

910
00:46:13,010 --> 00:46:19,640
other thing<font color="#CCCCCC"> is of course to</font><font color="#E5E5E5"> use the</font>

911
00:46:14,270 --> 00:46:22,250
incremental SPF were applicable I don't

912
00:46:19,640 --> 00:46:25,040
want to go too much into the algorithms

913
00:46:22,250 --> 00:46:30,830
that are used here that can be used here

914
00:46:25,040 --> 00:46:32,270
but if you have<font color="#CCCCCC"> too similar to</font><font color="#E5E5E5"> LSPs with</font>

915
00:46:30,830 --> 00:46:35,210
similar constraints a different

916
00:46:32,270 --> 00:46:37,910
bandwidth and the difference<font color="#CCCCCC"> between the</font>

917
00:46:35,210 --> 00:46:39,380
two<font color="#E5E5E5"> link sets is only a handful of links</font>

918
00:46:37,910 --> 00:46:40,848
this is<font color="#E5E5E5"> another case where an</font>

919
00:46:39,380 --> 00:46:43,759
incremental SPF

920
00:46:40,849 --> 00:46:46,759
has a tremendous benefit so in looking

921
00:46:43,759 --> 00:46:49,309
if you have this the link set cash you

922
00:46:46,759 --> 00:46:52,579
find something<font color="#CCCCCC"> that you find constraints</font>

923
00:46:49,309 --> 00:46:56,299
that are similar you then determine the

924
00:46:52,579 --> 00:46:58,130
deltas you then<font color="#CCCCCC"> go find the SPF you can</font>

925
00:46:56,299 --> 00:47:02,569
do an incremental SPF and you can save a

926
00:46:58,130 --> 00:47:06,259
lot<font color="#E5E5E5"> of work so the</font><font color="#CCCCCC"> idea is to avoid</font>

927
00:47:02,569 --> 00:47:09,109
doing full<font color="#E5E5E5"> SBS wherever possible and to</font>

928
00:47:06,259 --> 00:47:12,109
do an incremental SPF if you can and if

929
00:47:09,109 --> 00:47:16,460
you can do any SPF at all try to<font color="#E5E5E5"> find an</font>

930
00:47:12,109 --> 00:47:18,589
existing result that exactly matches and

931
00:47:16,460 --> 00:47:21,229
this next slide just be briefly

932
00:47:18,589 --> 00:47:25,130
describes what would typically happen I

933
00:47:21,229 --> 00:47:27,649
have<font color="#CCCCCC"> 10 minutes left oh my god I thought</font>

934
00:47:25,130 --> 00:47:32,119
I'd<font color="#CCCCCC"> never run this through in an hour</font>

935
00:47:27,650 --> 00:47:34,220
<font color="#CCCCCC">okay fine so briefly what you do is you</font>

936
00:47:32,119 --> 00:47:36,289
find the entry in a<font color="#CCCCCC"> link side cash you</font>

937
00:47:34,220 --> 00:47:37,939
look that up based on constraints<font color="#CCCCCC"> you</font>

938
00:47:36,289 --> 00:47:42,259
apply the constraints find the

939
00:47:37,940 --> 00:47:44,180
differences look at the sea SPF result

940
00:47:42,259 --> 00:47:46,999
for<font color="#CCCCCC"> the old set of lengths do an</font>

941
00:47:44,180 --> 00:47:48,859
incremental SPF and then cash that new

942
00:47:46,999 --> 00:47:51,140
result then if you're going<font color="#E5E5E5"> to create a</font>

943
00:47:48,859 --> 00:47:53,029
<font color="#E5E5E5">sea SPF result that's that you know is</font>

944
00:47:51,140 --> 00:47:54,618
unique and it would<font color="#CCCCCC"> be unique if you're</font>

945
00:47:53,029 --> 00:47:56,269
going to imply some disjoint this thing

946
00:47:54,619 --> 00:47:58,039
or it's going to<font color="#E5E5E5"> be unique if you have</font>

947
00:47:56,269 --> 00:47:59,450
to take<font color="#CCCCCC"> if you have to compensate for</font>

948
00:47:58,039 --> 00:48:01,339
the existing path if you're rerouting

949
00:47:59,450 --> 00:48:06,308
then you don't actually try<font color="#E5E5E5"> to cash that</font>

950
00:48:01,339 --> 00:48:09,140
because it's<font color="#E5E5E5"> going to waste memory okay</font>

951
00:48:06,309 --> 00:48:10,700
see I<font color="#E5E5E5"> think I've pointed out some of</font>

952
00:48:09,140 --> 00:48:12,469
these observations if the constraints

953
00:48:10,700 --> 00:48:15,859
are identical you essentially have no

954
00:48:12,469 --> 00:48:18,410
work you look up an existing link set

955
00:48:15,859 --> 00:48:20,598
based on the link set and if you compute

956
00:48:18,410 --> 00:48:24,019
a digest on the link set you can just

957
00:48:20,599 --> 00:48:27,229
look up<font color="#CCCCCC"> the digest and you have very</font>

958
00:48:24,019 --> 00:48:28,879
near zero work you look up the<font color="#CCCCCC"> link set</font>

959
00:48:27,229 --> 00:48:31,098
you look up the<font color="#E5E5E5"> sea SPF but the same</font>

960
00:48:28,880 --> 00:48:32,960
digest you<font color="#E5E5E5"> actually if you want to be</font>

961
00:48:31,099 --> 00:48:37,460
safe you run through and run a check on

962
00:48:32,960 --> 00:48:39,559
the links and then you use that SPF

963
00:48:37,460 --> 00:48:41,960
result it's already done if the

964
00:48:39,559 --> 00:48:43,910
constraints differ only in bandwidth but

965
00:48:41,960 --> 00:48:47,539
there's but the network's underutilized

966
00:48:43,910 --> 00:48:49,670
the deltas are know if feedback hasn't

967
00:48:47,539 --> 00:48:51,319
arrived for<font color="#E5E5E5"> instance if you set up a</font>

968
00:48:49,670 --> 00:48:53,569
whole bunch<font color="#E5E5E5"> of LSPs and a bunch of other</font>

969
00:48:51,319 --> 00:48:54,350
<font color="#E5E5E5">routers side of whole bunch of</font><font color="#CCCCCC"> l's LSPs</font>

970
00:48:53,569 --> 00:48:55,640
but Phoebe

971
00:48:54,350 --> 00:49:00,520
hasn't come because you're<font color="#CCCCCC"> doing this</font>

972
00:48:55,640 --> 00:49:02,779
very fast the set of updates the set of

973
00:49:00,520 --> 00:49:06,710
updates that you've received as a null

974
00:49:02,780 --> 00:49:09,440
set since that link failure if you did

975
00:49:06,710 --> 00:49:10,610
receive any updates in other words some

976
00:49:09,440 --> 00:49:13,250
of the links change their bandwidth

977
00:49:10,610 --> 00:49:16,130
constraints you<font color="#E5E5E5"> can simply create a</font>

978
00:49:13,250 --> 00:49:18,710
queue and you look back from<font color="#E5E5E5"> the most</font>

979
00:49:16,130 --> 00:49:20,870
<font color="#CCCCCC">recent change to the point at which like</font>

980
00:49:18,710 --> 00:49:24,230
if you have an old link set you computed

981
00:49:20,870 --> 00:49:26,089
<font color="#CCCCCC">that like a while ago and it has a time</font>

982
00:49:24,230 --> 00:49:27,110
stamp on it you<font color="#CCCCCC"> could look back through</font>

983
00:49:26,090 --> 00:49:28,970
the queue of things that have changed

984
00:49:27,110 --> 00:49:31,940
back<font color="#CCCCCC"> to that time stamp and you just</font>

985
00:49:28,970 --> 00:49:34,730
<font color="#E5E5E5">have to change those links and no other</font>

986
00:49:31,940 --> 00:49:36,710
links so you can get<font color="#E5E5E5"> a small set of</font>

987
00:49:34,730 --> 00:49:38,240
<font color="#CCCCCC">deltas some of those may not change at</font>

988
00:49:36,710 --> 00:49:39,620
all but there<font color="#E5E5E5"> are</font><font color="#CCCCCC"> very few links that</font>

989
00:49:38,240 --> 00:49:40,729
you then have to apply constraints on

990
00:49:39,620 --> 00:49:44,839
you<font color="#E5E5E5"> don't have to go through the whole</font>

991
00:49:40,730 --> 00:49:46,850
<font color="#E5E5E5">10,000 link set a hundred times if</font><font color="#CCCCCC"> you</font>

992
00:49:44,840 --> 00:49:48,590
have a hundred LSPs a thousand<font color="#E5E5E5"> times if</font>

993
00:49:46,850 --> 00:49:50,210
you<font color="#E5E5E5"> have a thousand dollars</font><font color="#CCCCCC"> be 10,000</font>

994
00:49:48,590 --> 00:49:53,780
links times going through it a thousand

995
00:49:50,210 --> 00:49:56,000
times gets to be a<font color="#E5E5E5"> very large number we</font>

996
00:49:53,780 --> 00:49:58,940
tried to simulate this for well we did

997
00:49:56,000 --> 00:50:02,570
simulate this for customers<font color="#E5E5E5"> and I put</font>

998
00:49:58,940 --> 00:50:07,850
trying there because there's limitations

999
00:50:02,570 --> 00:50:09,500
to what you can do with simulations we

1000
00:50:07,850 --> 00:50:13,009
found that the cache hit rates were

1001
00:50:09,500 --> 00:50:18,260
extremely high in many<font color="#E5E5E5"> cases we did one</font>

1002
00:50:13,010 --> 00:50:23,060
full<font color="#CCCCCC"> csps and and then incrementals</font>

1003
00:50:18,260 --> 00:50:24,980
after that in some<font color="#CCCCCC"> cases we did really</font>

1004
00:50:23,060 --> 00:50:28,100
just<font color="#E5E5E5"> one SPS and we were able to reuse</font>

1005
00:50:24,980 --> 00:50:31,820
it all depended on what you know things

1006
00:50:28,100 --> 00:50:35,839
<font color="#E5E5E5">like utilization and whether we took</font>

1007
00:50:31,820 --> 00:50:37,820
<font color="#E5E5E5">into account the feedback</font><font color="#CCCCCC"> and if you do</font>

1008
00:50:35,840 --> 00:50:39,500
the the caching if you do<font color="#E5E5E5"> really good</font>

1009
00:50:37,820 --> 00:50:41,240
<font color="#E5E5E5">job</font><font color="#CCCCCC"> on the caching then the performance</font>

1010
00:50:39,500 --> 00:50:43,160
actually becomes limited by your link

1011
00:50:41,240 --> 00:50:47,419
set processing because you're doing<font color="#E5E5E5"> so</font>

1012
00:50:43,160 --> 00:50:50,770
few<font color="#CCCCCC"> SPS that it's going</font><font color="#E5E5E5"> through those</font>

1013
00:50:47,420 --> 00:50:52,790
10,000 or not going through those 10,000

1014
00:50:50,770 --> 00:50:56,330
links and applying constraints that

1015
00:50:52,790 --> 00:50:58,100
takes longer than looking up looking

1016
00:50:56,330 --> 00:51:00,080
things up in the<font color="#E5E5E5"> sea SPF cash and</font>

1017
00:50:58,100 --> 00:51:03,140
finding them or looking things up and

1018
00:51:00,080 --> 00:51:05,060
doing an incremental<font color="#E5E5E5"> it's an interesting</font>

1019
00:51:03,140 --> 00:51:06,450
observation that the link set processing

1020
00:51:05,060 --> 00:51:09,820
become

1021
00:51:06,450 --> 00:51:11,290
significant in terms of time the

1022
00:51:09,820 --> 00:51:13,420
alternate approaches of course to try to

1023
00:51:11,290 --> 00:51:15,070
make the SPF faster now one<font color="#CCCCCC"> of the</font>

1024
00:51:13,420 --> 00:51:17,620
<font color="#CCCCCC">things that</font><font color="#E5E5E5"> happens if you if you need</font>

1025
00:51:15,070 --> 00:51:19,510
to save the SPF<font color="#CCCCCC"> results you</font><font color="#E5E5E5"> need to do</font>

1026
00:51:17,620 --> 00:51:22,240
some<font color="#CCCCCC"> sort of dynamic allocation while</font>

1027
00:51:19,510 --> 00:51:24,670
you're doing the<font color="#E5E5E5"> SPS that actually that</font>

1028
00:51:22,240 --> 00:51:27,459
dynamic allocation makes the SPF itself

1029
00:51:24,670 --> 00:51:29,860
slower if you don't have to do any

1030
00:51:27,460 --> 00:51:32,290
dynamic allocation for example if your

1031
00:51:29,860 --> 00:51:35,590
nodes and links are going to be used

1032
00:51:32,290 --> 00:51:38,470
exactly<font color="#E5E5E5"> once you can include</font><font color="#CCCCCC"> some extra</font>

1033
00:51:35,590 --> 00:51:41,020
you know<font color="#E5E5E5"> data structure on the nodes and</font>

1034
00:51:38,470 --> 00:51:43,990
<font color="#E5E5E5">links themselves which are used for the</font>

1035
00:51:41,020 --> 00:51:49,259
SBS and discarded after the SPF is used

1036
00:51:43,990 --> 00:51:49,259
that means<font color="#E5E5E5"> that you cannot reuse the SPF</font>

1037
00:51:49,590 --> 00:51:57,930
later you can only use if you do an

1038
00:51:56,020 --> 00:52:01,240
incremental you can only<font color="#CCCCCC"> use the</font>

1039
00:51:57,930 --> 00:52:03,580
previously computed SPF result you can't

1040
00:52:01,240 --> 00:52:06,339
use one that was you that that was five

1041
00:52:03,580 --> 00:52:08,110
results ago you can get a little<font color="#E5E5E5"> tricky</font>

1042
00:52:06,340 --> 00:52:11,860
<font color="#CCCCCC">with that we</font><font color="#E5E5E5"> considered doing this we</font>

1043
00:52:08,110 --> 00:52:16,120
didn't<font color="#E5E5E5"> actually do this sorting the LSPs</font>

1044
00:52:11,860 --> 00:52:20,200
according to constraints such that your

1045
00:52:16,120 --> 00:52:22,900
incrementals were likely<font color="#CCCCCC"> to be as</font>

1046
00:52:20,200 --> 00:52:25,839
efficient<font color="#E5E5E5"> as possible we discarded this</font>

1047
00:52:22,900 --> 00:52:30,520
idea<font color="#E5E5E5"> I got two more slides isn't some of</font>

1048
00:52:25,840 --> 00:52:32,320
them<font color="#E5E5E5"> okay we discarded we decided not to</font>

1049
00:52:30,520 --> 00:52:33,550
<font color="#CCCCCC">do this but it is a viable thing if you</font>

1050
00:52:32,320 --> 00:52:35,950
<font color="#E5E5E5">were to get rid of all the dynamic</font>

1051
00:52:33,550 --> 00:52:42,910
allocation you can make<font color="#CCCCCC"> that low-level</font>

1052
00:52:35,950 --> 00:52:44,109
operation much faster i have<font color="#E5E5E5"> the point</font>

1053
00:52:42,910 --> 00:52:45,759
down here that if you wanted to do

1054
00:52:44,110 --> 00:52:47,950
dynamic allocation and you wanted

1055
00:52:45,760 --> 00:52:50,920
unlimited multipath if you had limited

1056
00:52:47,950 --> 00:52:54,310
multipath like I said<font color="#CCCCCC"> I only want to be</font>

1057
00:52:50,920 --> 00:52:56,140
<font color="#E5E5E5">able to do for links for paths of</font>

1058
00:52:54,310 --> 00:52:58,240
multipath from the ITP for example or

1059
00:52:56,140 --> 00:53:03,129
four I wanted<font color="#E5E5E5"> to only consider for</font>

1060
00:52:58,240 --> 00:53:07,720
possible paths for mpls if I was<font color="#E5E5E5"> going</font>

1061
00:53:03,130 --> 00:53:10,240
<font color="#E5E5E5">to reuse something for incrementals you</font>

1062
00:53:07,720 --> 00:53:11,290
could use a static allocation and you

1063
00:53:10,240 --> 00:53:13,330
wouldn't<font color="#E5E5E5"> have to do any dynamic</font>

1064
00:53:11,290 --> 00:53:14,980
allocation if you wanted to not limit

1065
00:53:13,330 --> 00:53:17,230
the number of multipath

1066
00:53:14,980 --> 00:53:19,390
perhaps you would have to<font color="#E5E5E5"> have a dynamic</font>

1067
00:53:17,230 --> 00:53:22,390
allocation I think<font color="#E5E5E5"> that's a minor point</font>

1068
00:53:19,390 --> 00:53:25,180
you could you<font color="#CCCCCC"> could you could argue that</font>

1069
00:53:22,390 --> 00:53:26,560
that that's<font color="#E5E5E5"> not necessary so then that</font>

1070
00:53:25,180 --> 00:53:28,629
then there's another<font color="#CCCCCC"> issue which is</font>

1071
00:53:26,560 --> 00:53:32,920
<font color="#E5E5E5">always comes up in terms of scaling mpls</font>

1072
00:53:28,630 --> 00:53:34,750
which is hierarchical LSPs and the

1073
00:53:32,920 --> 00:53:38,350
question<font color="#CCCCCC"> that always comes up with</font>

1074
00:53:34,750 --> 00:53:44,350
higher<font color="#E5E5E5"> pieces is you know what are they</font>

1075
00:53:38,350 --> 00:53:46,750
for why bother and scaling is one of the

1076
00:53:44,350 --> 00:53:48,670
issue<font color="#E5E5E5"> is now areas if you already have</font>

1077
00:53:46,750 --> 00:53:51,490
broken up your network into areas that

1078
00:53:48,670 --> 00:53:53,560
provides very good scaling and you can

1079
00:53:51,490 --> 00:53:57,939
see<font color="#CCCCCC"> that the numbers even if you did</font>

1080
00:53:53,560 --> 00:53:59,680
full<font color="#CCCCCC"> SBS the</font><font color="#E5E5E5"> convergence times that you</font>

1081
00:53:57,940 --> 00:54:01,180
could expect you know the<font color="#E5E5E5"> amount of</font>

1082
00:53:59,680 --> 00:54:03,970
computation that you need to put into

1083
00:54:01,180 --> 00:54:10,779
<font color="#E5E5E5">the SPF is very small even for the</font><font color="#CCCCCC"> MPLS</font>

1084
00:54:03,970 --> 00:54:14,049
case so if your area if your core area

1085
00:54:10,780 --> 00:54:18,490
started to get really big you could use

1086
00:54:14,050 --> 00:54:20,830
hierarchical LSPs to get more scaling to

1087
00:54:18,490 --> 00:54:22,600
get better scaling and you know my

1088
00:54:20,830 --> 00:54:24,400
question<font color="#CCCCCC"> that down here was there's</font>

1089
00:54:22,600 --> 00:54:25,600
anybody that big yet and it's a

1090
00:54:24,400 --> 00:54:28,840
rhetorical question because the answer

1091
00:54:25,600 --> 00:54:32,440
is really no nobody<font color="#CCCCCC"> has a like a</font><font color="#E5E5E5"> four</font>

1092
00:54:28,840 --> 00:54:33,730
<font color="#E5E5E5">hundred node core area in a 40,000 node</font>

1093
00:54:32,440 --> 00:54:37,660
network at this point at least that I'm

1094
00:54:33,730 --> 00:54:40,930
aware of so nobody is<font color="#E5E5E5"> that big that the</font>

1095
00:54:37,660 --> 00:54:46,118
scaling is the reason<font color="#CCCCCC"> for doing</font><font color="#E5E5E5"> for</font>

1096
00:54:40,930 --> 00:54:48,850
deploying hierarchical LSPs then the

1097
00:54:46,119 --> 00:54:51,100
another reason that's often cited is LSP

1098
00:54:48,850 --> 00:54:53,109
hierarchy can give you<font color="#E5E5E5"> into end LSPs</font>

1099
00:54:51,100 --> 00:54:55,750
traffic engineer to LSPs but for the

1100
00:54:53,109 --> 00:54:58,060
most part people are doing using<font color="#CCCCCC"> ldp for</font>

1101
00:54:55,750 --> 00:55:01,720
that if they want end and traffic

1102
00:54:58,060 --> 00:55:04,980
engineer in to end LSPs so so that they

1103
00:55:01,720 --> 00:55:07,540
can run their VPN stuff they use LDP's

1104
00:55:04,980 --> 00:55:11,260
or any of their tunneling things i use

1105
00:55:07,540 --> 00:55:13,330
<font color="#CCCCCC">ldp on top of traffic engineering in the</font>

1106
00:55:11,260 --> 00:55:17,770
region and<font color="#E5E5E5"> or traffic engineering in the</font>

1107
00:55:13,330 --> 00:55:19,779
core and the the<font color="#CCCCCC"> argument that seems to</font>

1108
00:55:17,770 --> 00:55:23,770
hold some water at this point is<font color="#CCCCCC"> that if</font>

1109
00:55:19,780 --> 00:55:26,800
you<font color="#E5E5E5"> want to</font><font color="#CCCCCC"> support optical and optical</font>

1110
00:55:23,770 --> 00:55:30,170
TDM technologies

1111
00:55:26,800 --> 00:55:32,600
the hierarchical<font color="#E5E5E5"> LSPs are necessary and</font>

1112
00:55:30,170 --> 00:55:35,330
this is<font color="#E5E5E5"> sort of this is really the</font>

1113
00:55:32,600 --> 00:55:36,890
motivation behind the GM pls work and<font color="#E5E5E5"> I</font>

1114
00:55:35,330 --> 00:55:41,330
put<font color="#E5E5E5"> down there assuming someone wants</font>

1115
00:55:36,890 --> 00:55:44,270
that but typically well I don't<font color="#E5E5E5"> really</font>

1116
00:55:41,330 --> 00:55:46,490
see anybody doing that in<font color="#E5E5E5"> the core but</font>

1117
00:55:44,270 --> 00:55:48,050
<font color="#E5E5E5">that seems to be done there's much more</font>

1118
00:55:46,490 --> 00:55:50,839
interested in that<font color="#E5E5E5"> right now in the</font>

1119
00:55:48,050 --> 00:55:54,530
optical TDM kind of stuff in the edge

1120
00:55:50,840 --> 00:55:58,000
technologies so the assumption that

1121
00:55:54,530 --> 00:56:01,910
someone wants that I think is valid now

1122
00:55:58,000 --> 00:56:03,350
but it's more on the edge and and is it

1123
00:56:01,910 --> 00:56:04,810
a technology ahead of its time<font color="#CCCCCC"> no I</font>

1124
00:56:03,350 --> 00:56:07,069
don't really<font color="#CCCCCC"> think so i think it's</font>

1125
00:56:04,810 --> 00:56:10,340
something that we have<font color="#CCCCCC"> to pay attention</font>

1126
00:56:07,070 --> 00:56:13,430
<font color="#E5E5E5">to because although it's not a it's not</font>

1127
00:56:10,340 --> 00:56:15,560
a hot deployment item right now it will

1128
00:56:13,430 --> 00:56:18,500
come in handy for the scaling longer

1129
00:56:15,560 --> 00:56:20,799
term and it is needed<font color="#E5E5E5"> to integrate these</font>

1130
00:56:18,500 --> 00:56:23,930
optical and optical TV and technologies

1131
00:56:20,800 --> 00:56:27,020
<font color="#E5E5E5">ok conclusion this is where i put edge</font>

1132
00:56:23,930 --> 00:56:31,009
little quote here which is somewhat not

1133
00:56:27,020 --> 00:56:32,900
applicable which is a you know we need

1134
00:56:31,010 --> 00:56:35,870
something technical to make it an ad you

1135
00:56:32,900 --> 00:56:38,390
know has to be some wild technical thing

1136
00:56:35,870 --> 00:56:40,910
so this<font color="#CCCCCC"> is as close i</font><font color="#E5E5E5"> think as we get to</font>

1137
00:56:38,390 --> 00:56:46,250
this nano<font color="#E5E5E5"> i tried not to get too much</font>

1138
00:56:40,910 --> 00:56:48,350
<font color="#CCCCCC">into algorithms and keep things as</font>

1139
00:56:46,250 --> 00:56:50,060
non-commercial as possible you know no

1140
00:56:48,350 --> 00:56:58,370
charts of this is what our router does

1141
00:56:50,060 --> 00:57:01,660
you know so i may go into<font color="#E5E5E5"> much more</font>

1142
00:56:58,370 --> 00:57:04,100
detail<font color="#CCCCCC"> I've talked</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> jabari about</font>

1143
00:57:01,660 --> 00:57:07,190
presenting at the MPLS conference which

1144
00:57:04,100 --> 00:57:09,890
i guess is badly schedule because at the

1145
00:57:07,190 --> 00:57:13,340
<font color="#CCCCCC">same time it's the Nano next nanog but</font><font color="#E5E5E5"> I</font>

1146
00:57:09,890 --> 00:57:14,750
may be doing if anybody's interested in

1147
00:57:13,340 --> 00:57:18,920
algorithms I may be talking<font color="#CCCCCC"> about that</font>

1148
00:57:14,750 --> 00:57:23,819
in much more detail and providing some

1149
00:57:18,920 --> 00:57:38,079
simulation and test results there so

1150
00:57:23,819 --> 00:57:42,690
I'm done right time for a question<font color="#E5E5E5"> what</font>

1151
00:57:38,079 --> 00:57:45,609
do so<font color="#CCCCCC"> many</font><font color="#E5E5E5"> questions no questions I</font>

1152
00:57:42,690 --> 00:57:47,829
<font color="#E5E5E5">bored everyone to sleep</font><font color="#CCCCCC"> okay I said I</font>

1153
00:57:45,609 --> 00:57:54,700
did have one question can<font color="#E5E5E5"> you back to</font>

1154
00:57:47,829 --> 00:57:56,680
slide 7 I was<font color="#E5E5E5"> curious about the</font>

1155
00:57:54,700 --> 00:58:00,910
assumption that you this on the sly be

1156
00:57:56,680 --> 00:58:03,250
said that you<font color="#CCCCCC"> assume that</font><font color="#E5E5E5"> the MTU was 4k</font>

1157
00:58:00,910 --> 00:58:08,020
well indi calculations it wouldn't be a

1158
00:58:03,250 --> 00:58:11,819
full unto you right well that people

1159
00:58:08,020 --> 00:58:16,780
typically used people<font color="#E5E5E5"> typically use 4k</font>

1160
00:58:11,819 --> 00:58:20,400
80mm to use 90 180 or whatever it is but

1161
00:58:16,780 --> 00:58:26,230
that's been a typical assumption and

1162
00:58:20,400 --> 00:58:29,410
even on the<font color="#E5E5E5"> Giggy and then knowing that</font>

1163
00:58:26,230 --> 00:58:31,720
I'm more of this using the 1500 m to you

1164
00:58:29,410 --> 00:58:33,848
it's typically using a larger em to you

1165
00:58:31,720 --> 00:58:36,730
but you<font color="#CCCCCC"> know if it was larger if it was</font>

1166
00:58:33,849 --> 00:58:39,849
a 9 k and to you then you would need 90

1167
00:58:36,730 --> 00:58:44,290
megabytes of UDP buffering which would

1168
00:58:39,849 --> 00:58:47,980
be even worse what are you arguing that

1169
00:58:44,290 --> 00:58:50,890
it should<font color="#CCCCCC"> be bigger or smaller as a</font>

1170
00:58:47,980 --> 00:58:52,569
multiplier it strikes<font color="#E5E5E5"> me that using the</font>

1171
00:58:50,890 --> 00:58:56,049
assumption that the MTU is completely

1172
00:58:52,569 --> 00:58:58,480
full to multiply times your your model

1173
00:58:56,049 --> 00:59:01,869
here that seemed like<font color="#E5E5E5"> a tooth too large</font>

1174
00:58:58,480 --> 00:59:06,490
of a<font color="#E5E5E5"> number video</font><font color="#CCCCCC"> season filter for unto</font>

1175
00:59:01,869 --> 00:59:09,069
you first if that would definitely be

1176
00:59:06,490 --> 00:59:11,200
<font color="#E5E5E5">the case because for ospf you just send</font>

1177
00:59:09,069 --> 00:59:12,790
the LSA and if there's only<font color="#E5E5E5"> two</font><font color="#CCCCCC"> L essays</font>

1178
00:59:11,200 --> 00:59:17,618
to be updated you just send those<font color="#E5E5E5"> two</font>

1179
00:59:12,790 --> 00:59:20,859
osaze 44 is is if you filled if you've

1180
00:59:17,619 --> 00:59:22,690
nearly filled the fragment the LSP

1181
00:59:20,859 --> 00:59:23,770
defragment and you change something in

1182
00:59:22,690 --> 00:59:28,880
<font color="#CCCCCC">the fragment</font><font color="#E5E5E5"> you have to send the whole</font>

1183
00:59:23,770 --> 00:59:32,869
fragment and that's where I comes from

1184
00:59:28,880 --> 00:59:32,869
the questions great things like

