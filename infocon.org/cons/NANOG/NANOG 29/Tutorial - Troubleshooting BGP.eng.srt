1
00:00:00,800 --> 00:00:08,880
so this this<font color="#CCCCCC"> presentation is about</font>

2
00:00:04,200 --> 00:00:13,139
<font color="#E5E5E5">troubleshooting</font><font color="#CCCCCC"> BGP</font><font color="#E5E5E5"> I've angled it at as</font>

3
00:00:08,880 --> 00:00:15,809
a<font color="#E5E5E5"> inter sorry as a beginner presentation</font>

4
00:00:13,139 --> 00:00:18,660
<font color="#E5E5E5">rather than anything</font><font color="#CCCCCC"> admit intermediate</font>

5
00:00:15,809 --> 00:00:20,900
or advanced what I'm trying to<font color="#E5E5E5"> impart</font>

6
00:00:18,660 --> 00:00:23,490
here is more about how you<font color="#E5E5E5"> go about</font>

7
00:00:20,900 --> 00:00:24,900
setting<font color="#E5E5E5"> out good principles and practice</font>

8
00:00:23,490 --> 00:00:30,778
practices with trying<font color="#CCCCCC"> to do</font>

9
00:00:24,900 --> 00:00:33,570
troubleshooting<font color="#E5E5E5"> within BGP so if you</font>

10
00:00:30,779 --> 00:00:35,790
came<font color="#CCCCCC"> looking</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> Marik's presentation</font>

11
00:00:33,570 --> 00:00:40,500
it's not here it's at the other side and

12
00:00:35,790 --> 00:00:43,320
<font color="#CCCCCC">Salaam F my name</font><font color="#E5E5E5"> is Philip Smith</font><font color="#CCCCCC"> I work</font>

13
00:00:40,500 --> 00:00:45,120
for<font color="#CCCCCC"> Cisco I live in Australia well I</font>

14
00:00:43,320 --> 00:00:47,460
<font color="#CCCCCC">have a house</font><font color="#E5E5E5"> in</font><font color="#CCCCCC"> Australia but I spend</font>

15
00:00:45,120 --> 00:00:50,010
most of my time<font color="#CCCCCC"> it seems pretty much</font>

16
00:00:47,460 --> 00:00:52,710
<font color="#E5E5E5">anywhere else in the world</font><font color="#CCCCCC"> so coming to</font>

17
00:00:50,010 --> 00:00:56,730
<font color="#E5E5E5">visit you all here at Nano is just one</font>

18
00:00:52,710 --> 00:01:00,590
of<font color="#E5E5E5"> the many things I I do mostly work in</font>

19
00:00:56,730 --> 00:01:04,709
the asia-pacific region<font color="#E5E5E5"> mostly with ISPs</font>

20
00:01:00,590 --> 00:01:09,180
mostly doing training tuition<font color="#E5E5E5"> bgp stuff</font>

21
00:01:04,709 --> 00:01:11,460
like this so if you<font color="#E5E5E5"> want to follow the</font>

22
00:01:09,180 --> 00:01:16,259
presentation<font color="#CCCCCC"> the slides are actually</font><font color="#E5E5E5"> up</font>

23
00:01:11,460 --> 00:01:18,839
in two places given I gave Susan my

24
00:01:16,259 --> 00:01:20,580
presentation about two hours ago<font color="#CCCCCC"> I'm not</font>

25
00:01:18,840 --> 00:01:23,070
<font color="#CCCCCC">sure if you've got the absolute latest</font>

26
00:01:20,580 --> 00:01:26,009
slides or not<font color="#E5E5E5"> what may have been on the</font>

27
00:01:23,070 --> 00:01:29,279
<font color="#E5E5E5">merit website were just the draft</font><font color="#CCCCCC"> up</font>

28
00:01:26,009 --> 00:01:32,850
<font color="#CCCCCC">until about</font><font color="#E5E5E5"> two hours ago so but what's</font>

29
00:01:29,280 --> 00:01:34,259
on the<font color="#E5E5E5"> Cisco FTP site is what I'm</font>

30
00:01:32,850 --> 00:01:36,929
actually using here I've made<font color="#E5E5E5"> some</font>

31
00:01:34,259 --> 00:01:39,210
subtle<font color="#CCCCCC"> changes so if you want to follow</font>

32
00:01:36,930 --> 00:01:44,700
the presentation<font color="#E5E5E5"> the slides are there</font>

33
00:01:39,210 --> 00:01:47,039
for you assumptions well I'm going<font color="#E5E5E5"> to</font>

34
00:01:44,700 --> 00:01:49,490
<font color="#E5E5E5">assume</font><font color="#CCCCCC"> that you actually know BGP you've</font>

35
00:01:47,040 --> 00:01:52,470
got a fairly basic working knowledge of

36
00:01:49,490 --> 00:01:54,839
the protocol if you've never heard of

37
00:01:52,470 --> 00:01:58,048
BGP or have<font color="#E5E5E5"> never even really used it</font>

38
00:01:54,840 --> 00:02:00,060
<font color="#E5E5E5">and you're just coming here to try</font><font color="#CCCCCC"> and</font>

39
00:01:58,049 --> 00:02:02,520
learn<font color="#E5E5E5"> a little</font><font color="#CCCCCC"> bit presentation will be</font>

40
00:02:00,060 --> 00:02:04,860
useful for<font color="#E5E5E5"> you as well but say some of</font>

41
00:02:02,520 --> 00:02:06,689
<font color="#E5E5E5">the principles may not make</font><font color="#CCCCCC"> much sense</font>

42
00:02:04,860 --> 00:02:09,270
and<font color="#E5E5E5"> you've actually gained some</font>

43
00:02:06,689 --> 00:02:10,299
<font color="#CCCCCC">experience of the protocol Messer says</font>

44
00:02:09,270 --> 00:02:12,850
<font color="#E5E5E5">there as I said</font>

45
00:02:10,300 --> 00:02:14,950
or please feel free to ask questions<font color="#CCCCCC"> the</font>

46
00:02:12,850 --> 00:02:19,390
microphone is is in the middle there<font color="#CCCCCC"> if</font>

47
00:02:14,950 --> 00:02:21,339
you'd like<font color="#E5E5E5"> to use the mic please okay</font>

48
00:02:19,390 --> 00:02:24,160
<font color="#E5E5E5">but really three parts</font><font color="#CCCCCC"> of the</font>

49
00:02:21,340 --> 00:02:25,570
<font color="#E5E5E5">presentation</font><font color="#CCCCCC"> the first bit quite short</font>

50
00:02:24,160 --> 00:02:27,609
<font color="#CCCCCC">we're going to</font><font color="#E5E5E5"> look at the fundamentals</font>

51
00:02:25,570 --> 00:02:31,000
of troubleshooting<font color="#E5E5E5"> we're going to have a</font>

52
00:02:27,610 --> 00:02:33,250
<font color="#E5E5E5">look at some of issues you can get with</font>

53
00:02:31,000 --> 00:02:36,010
local configuration problems ie within

54
00:02:33,250 --> 00:02:38,320
<font color="#E5E5E5">your own network</font><font color="#CCCCCC"> and then depending</font><font color="#E5E5E5"> on</font>

55
00:02:36,010 --> 00:02:40,540
<font color="#E5E5E5">what time we have at the end have a look</font>

56
00:02:38,320 --> 00:02:42,760
at some<font color="#E5E5E5"> of the internet reachability</font>

57
00:02:40,540 --> 00:02:45,790
problems<font color="#E5E5E5"> so in other words how you go</font>

58
00:02:42,760 --> 00:02:50,170
<font color="#CCCCCC">about trying to do troubleshooting when</font>

59
00:02:45,790 --> 00:02:52,060
it's not inside<font color="#CCCCCC"> your network right</font><font color="#E5E5E5"> first</font>

60
00:02:50,170 --> 00:02:54,369
thing is really<font color="#CCCCCC"> all about</font><font color="#E5E5E5"> trying</font><font color="#CCCCCC"> to</font>

61
00:02:52,060 --> 00:02:56,110
recognize<font color="#E5E5E5"> what the problem is</font><font color="#CCCCCC"> right you</font>

62
00:02:54,370 --> 00:02:58,300
first step you've got to do is try and

63
00:02:56,110 --> 00:03:00,250
recognize<font color="#CCCCCC"> what</font><font color="#E5E5E5"> caused the problem</font><font color="#CCCCCC"> now</font>

64
00:02:58,300 --> 00:03:02,950
this is true for<font color="#CCCCCC"> any</font><font color="#E5E5E5"> troubleshooting</font>

65
00:03:00,250 --> 00:03:07,000
<font color="#E5E5E5">anywhere whatsoever</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> BGP is not</font>

66
00:03:02,950 --> 00:03:09,040
special<font color="#CCCCCC"> in this case but I</font><font color="#E5E5E5"> find in my</font>

67
00:03:07,000 --> 00:03:10,990
what 10 to 15 years<font color="#E5E5E5"> experience in</font>

68
00:03:09,040 --> 00:03:13,929
<font color="#CCCCCC">industry when you mention the magic</font>

69
00:03:10,990 --> 00:03:16,900
words BGP people panic<font color="#E5E5E5"> especially if</font>

70
00:03:13,930 --> 00:03:19,180
<font color="#E5E5E5">you're newcomers</font><font color="#CCCCCC"> to it</font><font color="#E5E5E5"> and I suppose</font><font color="#CCCCCC"> the</font>

71
00:03:16,900 --> 00:03:22,209
<font color="#CCCCCC">new entrant a minor panic with good</font>

72
00:03:19,180 --> 00:03:23,590
<font color="#CCCCCC">reason because the use of BGP in your</font>

73
00:03:22,209 --> 00:03:26,770
network<font color="#CCCCCC"> determines your network</font>

74
00:03:23,590 --> 00:03:29,140
connectivity<font color="#E5E5E5"> you break BGP you break</font>

75
00:03:26,770 --> 00:03:31,660
connectivity somehow for your<font color="#E5E5E5"> network</font>

76
00:03:29,140 --> 00:03:34,029
your customers and so forth<font color="#E5E5E5"> and of</font>

77
00:03:31,660 --> 00:03:35,530
course customers<font color="#CCCCCC"> start complaining and</font>

78
00:03:34,030 --> 00:03:37,959
then everything gets<font color="#E5E5E5"> to know about it</font>

79
00:03:35,530 --> 00:03:41,070
it's best<font color="#E5E5E5"> especially your boss and the</font>

80
00:03:37,959 --> 00:03:44,560
people who make<font color="#CCCCCC"> money from your business</font>

81
00:03:41,070 --> 00:03:46,930
so I find quite<font color="#E5E5E5"> often the result of this</font>

82
00:03:44,560 --> 00:03:48,030
is that<font color="#CCCCCC"> people</font><font color="#E5E5E5"> will work around</font><font color="#CCCCCC"> problems</font>

83
00:03:46,930 --> 00:03:49,390
in the most bizarre ways

84
00:03:48,030 --> 00:03:52,900
<font color="#CCCCCC">sticking-plaster</font>

85
00:03:49,390 --> 00:03:54,910
funny kind of configurations<font color="#E5E5E5"> just to try</font>

86
00:03:52,900 --> 00:03:57,310
and<font color="#E5E5E5"> work around the particular issue</font>

87
00:03:54,910 --> 00:04:01,270
they have rather than<font color="#E5E5E5"> sitting</font><font color="#CCCCCC"> down</font><font color="#E5E5E5"> and</font>

88
00:03:57,310 --> 00:04:03,990
<font color="#E5E5E5">trying to work</font><font color="#CCCCCC"> methodically to fix</font><font color="#E5E5E5"> the</font>

89
00:04:01,270 --> 00:04:03,990
actual problem

90
00:04:05,260 --> 00:04:09,950
also<font color="#E5E5E5"> I mean this is true for for</font>

91
00:04:07,850 --> 00:04:12,980
anything<font color="#CCCCCC"> this</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> not true not</font>

92
00:04:09,950 --> 00:04:14,690
necessarily just for<font color="#E5E5E5"> BGP but best</font>

93
00:04:12,980 --> 00:04:17,719
Troubleshooters one who<font color="#E5E5E5"> learned from</font>

94
00:04:14,690 --> 00:04:20,298
experience<font color="#E5E5E5"> when you fixed your first</font>

95
00:04:17,720 --> 00:04:22,400
problem<font color="#CCCCCC"> you feel great</font><font color="#E5E5E5"> which gives you</font>

96
00:04:20,298 --> 00:04:25,219
incentive to go and fix other problems

97
00:04:22,400 --> 00:04:28,159
after<font color="#CCCCCC"> that</font><font color="#E5E5E5"> and you have more confidence</font>

98
00:04:25,220 --> 00:04:30,680
<font color="#CCCCCC">in</font><font color="#E5E5E5"> doing this so you</font><font color="#CCCCCC"> just have more</font>

99
00:04:28,160 --> 00:04:33,650
<font color="#CCCCCC">practice you get better at doing it and</font>

100
00:04:30,680 --> 00:04:36,800
the second one mistakes<font color="#E5E5E5"> if you learn</font>

101
00:04:33,650 --> 00:04:39,380
from<font color="#CCCCCC"> your mistakes</font><font color="#E5E5E5"> well when you do</font>

102
00:04:36,800 --> 00:04:42,860
<font color="#CCCCCC">troubleshooting you actually make a</font><font color="#E5E5E5"> lot</font>

103
00:04:39,380 --> 00:04:44,659
of<font color="#E5E5E5"> mistakes</font><font color="#CCCCCC"> I mean there's</font><font color="#E5E5E5"> nobody I know</font>

104
00:04:42,860 --> 00:04:46,370
<font color="#CCCCCC">who is actually sat down</font><font color="#E5E5E5"> able to do</font>

105
00:04:44,660 --> 00:04:48,500
<font color="#CCCCCC">troubleshooting and has never ever made</font>

106
00:04:46,370 --> 00:04:51,380
a single<font color="#E5E5E5"> mistake</font><font color="#CCCCCC"> when</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> you tend to</font>

107
00:04:48,500 --> 00:04:55,250
learn a lot<font color="#E5E5E5"> about what you're doing from</font>

108
00:04:51,380 --> 00:04:56,630
mistakes<font color="#E5E5E5"> that you make and yes you'll</font>

109
00:04:55,250 --> 00:04:58,790
<font color="#E5E5E5">get better at</font><font color="#CCCCCC"> it you</font><font color="#E5E5E5"> get</font><font color="#CCCCCC"> better at</font>

110
00:04:56,630 --> 00:05:01,670
learning<font color="#E5E5E5"> and you get better at the</font>

111
00:04:58,790 --> 00:05:03,140
troubleshooting and also you learn from

112
00:05:01,670 --> 00:05:05,870
others as well so learn what other

113
00:05:03,140 --> 00:05:08,659
operators say<font color="#E5E5E5"> there are plenty of</font><font color="#CCCCCC"> BGP</font>

114
00:05:05,870 --> 00:05:12,130
problems discussed on various mailing

115
00:05:08,660 --> 00:05:15,770
lists sometimes it appears<font color="#CCCCCC"> on Nanog</font>

116
00:05:12,130 --> 00:05:18,140
usually lists like ISP BGP<font color="#CCCCCC"> and so forth</font>

117
00:05:15,770 --> 00:05:20,960
<font color="#E5E5E5">all these were discussing BGP issues</font>

118
00:05:18,140 --> 00:05:22,880
<font color="#E5E5E5">problems that people face look at some</font>

119
00:05:20,960 --> 00:05:25,280
of the<font color="#E5E5E5"> issues that people discuss some</font>

120
00:05:22,880 --> 00:05:27,409
of<font color="#E5E5E5"> the problems and</font><font color="#CCCCCC"> how the soft</font><font color="#E5E5E5"> you can</font>

121
00:05:25,280 --> 00:05:30,679
maybe use<font color="#CCCCCC"> some of those for your</font><font color="#E5E5E5"> own</font>

122
00:05:27,410 --> 00:05:32,060
troubleshooting later on and also<font color="#E5E5E5"> the</font>

123
00:05:30,680 --> 00:05:35,810
best troubleshooter<font color="#E5E5E5"> will go about</font>

124
00:05:32,060 --> 00:05:37,400
<font color="#CCCCCC">creating some basic principles and those</font>

125
00:05:35,810 --> 00:05:40,190
principles<font color="#CCCCCC"> are based on</font><font color="#E5E5E5"> what</font><font color="#CCCCCC"> you've</font>

126
00:05:37,400 --> 00:05:42,409
actually<font color="#E5E5E5"> learned in the past</font><font color="#CCCCCC"> so you're</font>

127
00:05:40,190 --> 00:05:44,960
<font color="#E5E5E5">kind of</font><font color="#CCCCCC"> building up a historical record</font>

128
00:05:42,410 --> 00:05:46,970
<font color="#CCCCCC">of what you of what you've done</font><font color="#E5E5E5"> when</font>

129
00:05:44,960 --> 00:05:49,729
every problem is different<font color="#CCCCCC"> every</font><font color="#E5E5E5"> network</font>

130
00:05:46,970 --> 00:05:52,580
is different<font color="#E5E5E5"> so you can't really ask in</font>

131
00:05:49,730 --> 00:05:54,740
<font color="#E5E5E5">public you know how to go about fixing</font>

132
00:05:52,580 --> 00:05:56,090
<font color="#CCCCCC">such-and-such a</font><font color="#E5E5E5"> problem because nobody</font>

133
00:05:54,740 --> 00:05:58,780
will<font color="#CCCCCC"> really have</font><font color="#E5E5E5"> the identical situation</font>

134
00:05:56,090 --> 00:06:01,580
<font color="#CCCCCC">so the best they</font><font color="#E5E5E5"> can do is give advice</font>

135
00:05:58,780 --> 00:06:03,559
if you can use this<font color="#E5E5E5"> advice to figure out</font>

136
00:06:01,580 --> 00:06:06,349
what's wrong in<font color="#CCCCCC"> your network and then</font>

137
00:06:03,560 --> 00:06:10,430
<font color="#E5E5E5">add it</font><font color="#CCCCCC"> to your source so-called database</font>

138
00:06:06,350 --> 00:06:14,060
then it makes solving<font color="#E5E5E5"> problems much</font>

139
00:06:10,430 --> 00:06:14,980
easier later<font color="#E5E5E5"> on now before a</font><font color="#CCCCCC"> transistor</font>

140
00:06:14,060 --> 00:06:17,110
<font color="#CCCCCC">I used to work at you</font>

141
00:06:14,980 --> 00:06:19,870
<font color="#E5E5E5">net and our network operations</font><font color="#CCCCCC"> center</font>

142
00:06:17,110 --> 00:06:22,150
<font color="#CCCCCC">sunny</font><font color="#E5E5E5"> for the for the UK operation we</font>

143
00:06:19,870 --> 00:06:23,770
<font color="#E5E5E5">use</font><font color="#CCCCCC"> this type of thing I didn't</font>

144
00:06:22,150 --> 00:06:25,870
particularly want them coming<font color="#CCCCCC"> running</font><font color="#E5E5E5"> to</font>

145
00:06:23,770 --> 00:06:29,500
me every time<font color="#CCCCCC"> there was a</font><font color="#E5E5E5"> BGP problem</font><font color="#CCCCCC"> in</font>

146
00:06:25,870 --> 00:06:31,270
the network<font color="#E5E5E5"> so we gave them a basic</font>

147
00:06:29,500 --> 00:06:33,360
thing<font color="#CCCCCC"> encouraged them to</font><font color="#E5E5E5"> go and try</font><font color="#CCCCCC"> and</font>

148
00:06:31,270 --> 00:06:36,400
figure out what the problem<font color="#CCCCCC"> was and</font>

149
00:06:33,360 --> 00:06:38,200
learn<font color="#E5E5E5"> from</font><font color="#CCCCCC"> Lauren</font><font color="#E5E5E5"> thing so every network</font>

150
00:06:36,400 --> 00:06:43,120
<font color="#E5E5E5">operations center operator would</font>

151
00:06:38,200 --> 00:06:45,190
actually access<font color="#E5E5E5"> I suppose a little diary</font>

152
00:06:43,120 --> 00:06:47,890
of<font color="#E5E5E5"> the problems that they had and they</font>

153
00:06:45,190 --> 00:06:49,810
would use this diary<font color="#CCCCCC"> to try</font><font color="#E5E5E5"> and figure</font>

154
00:06:47,890 --> 00:06:51,760
out what was<font color="#CCCCCC"> wrong</font><font color="#E5E5E5"> with with the thing</font>

155
00:06:49,810 --> 00:06:54,670
<font color="#E5E5E5">so is it SOCOM building a kind of</font>

156
00:06:51,760 --> 00:06:56,409
knowledge<font color="#E5E5E5"> base and they all became</font>

157
00:06:54,670 --> 00:06:59,560
pretty<font color="#E5E5E5"> good trouble shooters they didn't</font>

158
00:06:56,410 --> 00:07:05,080
<font color="#E5E5E5">have to bother me or</font><font color="#CCCCCC"> ended my network</font>

159
00:06:59,560 --> 00:07:06,850
engineering team<font color="#E5E5E5"> that much now where can</font>

160
00:07:05,080 --> 00:07:09,070
<font color="#E5E5E5">you</font><font color="#CCCCCC"> actually have problems with in BGP</font>

161
00:07:06,850 --> 00:07:12,280
well as with anywhere else

162
00:07:09,070 --> 00:07:13,990
<font color="#E5E5E5">miss configuration now this miss</font>

163
00:07:12,280 --> 00:07:16,419
configuration could be caused<font color="#E5E5E5"> by bad</font>

164
00:07:13,990 --> 00:07:18,700
documentation misunderstanding concepts

165
00:07:16,420 --> 00:07:21,610
<font color="#E5E5E5">through communication between</font><font color="#CCCCCC"> colleagues</font>

166
00:07:18,700 --> 00:07:23,940
or departments<font color="#CCCCCC"> I mean that's all typical</font>

167
00:07:21,610 --> 00:07:27,520
<font color="#E5E5E5">stuff human error</font>

168
00:07:23,940 --> 00:07:29,860
typos<font color="#CCCCCC"> man you could be</font><font color="#E5E5E5"> sleepy you've</font>

169
00:07:27,520 --> 00:07:31,419
<font color="#E5E5E5">just finished working 36 hours of some</font>

170
00:07:29,860 --> 00:07:34,420
kind of big problem<font color="#E5E5E5"> in the network</font>

171
00:07:31,420 --> 00:07:36,670
<font color="#E5E5E5">you're more likely to</font><font color="#CCCCCC"> make type of</font>

172
00:07:34,420 --> 00:07:38,680
typing mistakes then you use the wrong

173
00:07:36,670 --> 00:07:40,420
commands<font color="#E5E5E5"> or the command can be</font>

174
00:07:38,680 --> 00:07:43,560
completion didn't quite work as<font color="#E5E5E5"> you</font>

175
00:07:40,420 --> 00:07:46,030
expect<font color="#CCCCCC"> just plain and simple accidents</font>

176
00:07:43,560 --> 00:07:48,400
poorly planned or executed maintenance

177
00:07:46,030 --> 00:07:50,619
activities that's that's a favorite<font color="#E5E5E5"> one</font>

178
00:07:48,400 --> 00:07:53,109
and<font color="#CCCCCC"> plus all of</font><font color="#E5E5E5"> the above miss</font>

179
00:07:50,620 --> 00:07:55,750
configuration problems<font color="#CCCCCC"> all can</font><font color="#E5E5E5"> be human</font>

180
00:07:53,110 --> 00:07:57,760
error technical problems such as

181
00:07:55,750 --> 00:08:00,220
<font color="#E5E5E5">problems with the hardware you may have</font>

182
00:07:57,760 --> 00:08:01,690
some weird<font color="#E5E5E5"> hardware fault that's causing</font>

183
00:08:00,220 --> 00:08:04,540
<font color="#E5E5E5">something really strange to go wrong</font>

184
00:08:01,690 --> 00:08:06,580
with<font color="#CCCCCC"> bgp but it looks</font><font color="#E5E5E5"> like a routing</font>

185
00:08:04,540 --> 00:08:09,010
protocol problem but it's actually could

186
00:08:06,580 --> 00:08:12,789
be<font color="#E5E5E5"> something physical within the network</font>

187
00:08:09,010 --> 00:08:15,849
or other<font color="#E5E5E5"> equipment software problems we</font>

188
00:08:12,790 --> 00:08:18,310
all know<font color="#CCCCCC"> interrupts are linked loads</font>

189
00:08:15,850 --> 00:08:20,910
affecting protocol stability<font color="#E5E5E5"> in other</font>

190
00:08:18,310 --> 00:08:23,440
words link is congested<font color="#CCCCCC"> BGP falls over</font>

191
00:08:20,910 --> 00:08:26,100
no I mean you can see<font color="#E5E5E5"> well BGP falls</font>

192
00:08:23,440 --> 00:08:29,730
over but why is a link congested

193
00:08:26,100 --> 00:08:32,550
that's the type<font color="#CCCCCC"> of thought process more</font>

194
00:08:29,730 --> 00:08:35,070
problem areas<font color="#E5E5E5"> feature behavior as I'd</font>

195
00:08:32,549 --> 00:08:38,010
like<font color="#E5E5E5"> to call it or used to do this and</font>

196
00:08:35,070 --> 00:08:39,690
in one<font color="#CCCCCC"> release but you upgrade to</font><font color="#E5E5E5"> what</font>

197
00:08:38,010 --> 00:08:42,030
should<font color="#E5E5E5"> be just a minor change</font><font color="#CCCCCC"> to fix</font>

198
00:08:39,690 --> 00:08:44,520
some bugs and some behavior completely

199
00:08:42,030 --> 00:08:48,620
<font color="#CCCCCC">and absolutely</font><font color="#E5E5E5"> changes and messes things</font>

200
00:08:44,520 --> 00:08:50,670
up<font color="#CCCCCC"> that's another</font><font color="#E5E5E5"> potential problem area</font>

201
00:08:48,620 --> 00:08:52,440
<font color="#E5E5E5">interoperability issues certainly if</font>

202
00:08:50,670 --> 00:08:55,709
you're using different<font color="#E5E5E5"> equipment in the</font>

203
00:08:52,440 --> 00:08:58,080
in the<font color="#E5E5E5"> network could be using say Cisco</font>

204
00:08:55,710 --> 00:08:59,850
or juniper zebra mixed up<font color="#CCCCCC"> within</font><font color="#E5E5E5"> your</font>

205
00:08:58,080 --> 00:09:02,610
network<font color="#CCCCCC"> that could be interoperability</font>

206
00:08:59,850 --> 00:09:04,200
issues<font color="#E5E5E5"> you can't just assume that what</font>

207
00:09:02,610 --> 00:09:07,160
<font color="#E5E5E5">one is right and others are wrong you've</font>

208
00:09:04,200 --> 00:09:10,950
got to figure out<font color="#CCCCCC"> the different</font>

209
00:09:07,160 --> 00:09:12,829
<font color="#E5E5E5">interpretations of the BGP standard and</font>

210
00:09:10,950 --> 00:09:15,480
then of course<font color="#E5E5E5"> the problems caused by</font>

211
00:09:12,830 --> 00:09:18,240
<font color="#E5E5E5">things beyond your control your upstream</font>

212
00:09:15,480 --> 00:09:21,810
ISP has<font color="#E5E5E5"> some major policy change within</font>

213
00:09:18,240 --> 00:09:27,420
<font color="#E5E5E5">his network that has a fairly</font><font color="#CCCCCC"> serious</font>

214
00:09:21,810 --> 00:09:32,119
impact on<font color="#E5E5E5"> your own network okay how did</font>

215
00:09:27,420 --> 00:09:37,920
<font color="#E5E5E5">you go about solving these that means</font>

216
00:09:32,120 --> 00:09:40,230
that the next<font color="#E5E5E5"> step is to try</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> go and</font>

217
00:09:37,920 --> 00:09:42,120
fix the problem and that's<font color="#E5E5E5"> simply not</font>

218
00:09:40,230 --> 00:09:44,250
about dividing the<font color="#CCCCCC"> network's are jumping</font>

219
00:09:42,120 --> 00:09:45,920
<font color="#E5E5E5">into your network</font><font color="#CCCCCC"> and trying some random</font>

220
00:09:44,250 --> 00:09:48,840
<font color="#E5E5E5">commands</font><font color="#CCCCCC"> where I've seen</font><font color="#E5E5E5"> a lot of people</font>

221
00:09:45,920 --> 00:09:50,819
<font color="#E5E5E5">especially when you're operating more in</font>

222
00:09:48,840 --> 00:09:52,500
the panic mode<font color="#CCCCCC"> you</font><font color="#E5E5E5"> just simply dive in</font>

223
00:09:50,820 --> 00:09:53,730
the network and do this and<font color="#E5E5E5"> do that</font><font color="#CCCCCC"> or</font>

224
00:09:52,500 --> 00:09:55,770
<font color="#E5E5E5">think it was this and</font><font color="#CCCCCC"> I</font><font color="#E5E5E5"> remember</font>

225
00:09:53,730 --> 00:09:57,720
<font color="#CCCCCC">changing this</font><font color="#E5E5E5"> yesterday</font><font color="#CCCCCC"> so gone undo</font>

226
00:09:55,770 --> 00:09:59,100
<font color="#E5E5E5">that not a very good way of</font>

227
00:09:57,720 --> 00:10:00,210
<font color="#E5E5E5">troubleshooting especially when you</font>

228
00:09:59,100 --> 00:10:01,830
<font color="#E5E5E5">don't really understand what the problem</font>

229
00:10:00,210 --> 00:10:03,870
<font color="#CCCCCC">is</font>

230
00:10:01,830 --> 00:10:06,210
yes I know we're all<font color="#E5E5E5"> trying to work</font>

231
00:10:03,870 --> 00:10:07,770
really hard<font color="#CCCCCC"> to minimize downtime we're</font>

232
00:10:06,210 --> 00:10:10,020
actually sitting<font color="#E5E5E5"> down and spending a bit</font>

233
00:10:07,770 --> 00:10:13,590
of time figuring<font color="#E5E5E5"> out what could be wrong</font>

234
00:10:10,020 --> 00:10:14,970
<font color="#CCCCCC">yesthey even though mase seem to give</font>

235
00:10:13,590 --> 00:10:16,980
<font color="#E5E5E5">you a longer time time in the first</font>

236
00:10:14,970 --> 00:10:19,440
instance that<font color="#E5E5E5"> you tried</font><font color="#CCCCCC"> actually you</font>

237
00:10:16,980 --> 00:10:21,690
come to a faster resolution<font color="#E5E5E5"> but I've</font>

238
00:10:19,440 --> 00:10:24,090
<font color="#E5E5E5">been there done that so many</font><font color="#CCCCCC"> times</font>

239
00:10:21,690 --> 00:10:28,110
panicking doesn't really solve the

240
00:10:24,090 --> 00:10:31,470
<font color="#CCCCCC">problem and before you actually</font><font color="#E5E5E5"> begin by</font>

241
00:10:28,110 --> 00:10:34,080
begin jumping into the network<font color="#E5E5E5"> well as</font>

242
00:10:31,470 --> 00:10:36,720
I've been saying<font color="#E5E5E5"> don't panic create a</font>

243
00:10:34,080 --> 00:10:38,370
checklist<font color="#E5E5E5"> create a list of</font><font color="#CCCCCC"> things you</font>

244
00:10:36,720 --> 00:10:39,810
<font color="#CCCCCC">want</font><font color="#E5E5E5"> to actually try and check and then</font>

245
00:10:38,370 --> 00:10:41,730
then work through that

246
00:10:39,810 --> 00:10:44,489
<font color="#CCCCCC">list</font><font color="#E5E5E5"> try and start at the bottom and</font>

247
00:10:41,730 --> 00:10:48,330
<font color="#E5E5E5">work upwards</font><font color="#CCCCCC"> I say if bgp has fallen</font>

248
00:10:44,490 --> 00:10:50,160
over<font color="#E5E5E5"> well there could be a whole range</font>

249
00:10:48,330 --> 00:10:52,380
of things<font color="#E5E5E5"> that are wrong</font><font color="#CCCCCC"> try and figure</font>

250
00:10:50,160 --> 00:10:54,329
out what could have caused<font color="#CCCCCC"> it to fall</font>

251
00:10:52,380 --> 00:10:56,279
over<font color="#E5E5E5"> and look at all possibilities</font><font color="#CCCCCC"> I</font>

252
00:10:54,330 --> 00:10:58,500
mean it could be<font color="#E5E5E5"> something as stupid as</font>

253
00:10:56,279 --> 00:11:01,890
the circuit that<font color="#CCCCCC"> the routers connecting</font>

254
00:10:58,500 --> 00:11:03,690
to has gone down<font color="#E5E5E5"> okay so you sort of</font>

255
00:11:01,890 --> 00:11:05,520
<font color="#E5E5E5">reminds</font><font color="#CCCCCC"> you of the old</font><font color="#E5E5E5"> joke you know my</font>

256
00:11:03,690 --> 00:11:08,250
computer<font color="#CCCCCC"> doesn't work</font><font color="#E5E5E5"> so well is the</font>

257
00:11:05,520 --> 00:11:10,140
power<font color="#E5E5E5"> switched on it's that kind of that</font>

258
00:11:08,250 --> 00:11:11,550
thing you've got<font color="#E5E5E5"> to think of checking</font>

259
00:11:10,140 --> 00:11:13,680
that the power switched on isn't as

260
00:11:11,550 --> 00:11:17,900
stupid<font color="#CCCCCC"> as it sounds you know it can be</font>

261
00:11:13,680 --> 00:11:19,680
<font color="#CCCCCC">the solution and quite a few problems so</font>

262
00:11:17,900 --> 00:11:21,150
I'm not really going to mention

263
00:11:19,680 --> 00:11:23,010
<font color="#E5E5E5">checklist at the start of the</font>

264
00:11:21,150 --> 00:11:25,350
presentation<font color="#CCCCCC"> but</font><font color="#E5E5E5"> as we thought</font><font color="#CCCCCC"> I'd get</font>

265
00:11:23,010 --> 00:11:26,880
<font color="#CCCCCC">about halfway through</font><font color="#E5E5E5"> and so on and I'm</font>

266
00:11:25,350 --> 00:11:29,820
going to<font color="#E5E5E5"> start making reference to the</font>

267
00:11:26,880 --> 00:11:33,089
<font color="#E5E5E5">checklist how you can actually work</font>

268
00:11:29,820 --> 00:11:35,430
through any of the problems<font color="#E5E5E5"> never seen</font>

269
00:11:33,089 --> 00:11:37,730
<font color="#E5E5E5">before</font><font color="#CCCCCC"> it's what a lot of not staff</font>

270
00:11:35,430 --> 00:11:41,420
<font color="#E5E5E5">actually</font><font color="#CCCCCC"> follow when they're trying to</font>

271
00:11:37,730 --> 00:11:45,030
diagnose and solve that<font color="#E5E5E5"> with problems</font>

272
00:11:41,420 --> 00:11:48,479
<font color="#E5E5E5">okay you've also got to</font><font color="#CCCCCC"> be</font><font color="#E5E5E5"> aware of the</font>

273
00:11:45,030 --> 00:11:50,430
tools and if you've got one vendor<font color="#E5E5E5"> in</font>

274
00:11:48,480 --> 00:11:52,220
your network<font color="#CCCCCC"> you can probably figure</font><font color="#E5E5E5"> out</font>

275
00:11:50,430 --> 00:11:55,199
<font color="#E5E5E5">what all the tools are pretty easily</font>

276
00:11:52,220 --> 00:11:57,360
<font color="#E5E5E5">when you have X different equipment</font>

277
00:11:55,200 --> 00:12:00,120
multi vendor<font color="#E5E5E5"> network you have more tools</font>

278
00:11:57,360 --> 00:12:02,310
<font color="#CCCCCC">that are available</font><font color="#E5E5E5"> to use some equipment</font>

279
00:12:00,120 --> 00:12:03,960
may have tools that others<font color="#E5E5E5"> don't have so</font>

280
00:12:02,310 --> 00:12:06,199
<font color="#E5E5E5">you got to try</font><font color="#CCCCCC"> and understand these and</font>

281
00:12:03,960 --> 00:12:08,820
be aware of what you can<font color="#E5E5E5"> use with them</font>

282
00:12:06,200 --> 00:12:09,740
to<font color="#E5E5E5"> actually help you in what you're</font>

283
00:12:08,820 --> 00:12:12,480
<font color="#E5E5E5">doing</font>

284
00:12:09,740 --> 00:12:15,780
<font color="#E5E5E5">familias familiarize yourself with these</font>

285
00:12:12,480 --> 00:12:18,780
<font color="#E5E5E5">tools for example</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> logging of the</font>

286
00:12:15,780 --> 00:12:20,670
<font color="#CCCCCC">bgp process enabled</font><font color="#E5E5E5"> a lot of defaults</font>

287
00:12:18,780 --> 00:12:22,050
don't have this<font color="#E5E5E5"> I mean it isn't default</font>

288
00:12:20,670 --> 00:12:24,120
<font color="#CCCCCC">down in Cisco IOS</font>

289
00:12:22,050 --> 00:12:26,670
you get log messages pretty much

290
00:12:24,120 --> 00:12:29,040
anything that's happening in the<font color="#CCCCCC"> bgp</font>

291
00:12:26,670 --> 00:12:31,349
process are you<font color="#E5E5E5"> storing these logs</font>

292
00:12:29,040 --> 00:12:33,420
somewhere useful<font color="#E5E5E5"> if you're just storing</font>

293
00:12:31,350 --> 00:12:35,190
the logs in actual on board on the

294
00:12:33,420 --> 00:12:37,620
router<font color="#CCCCCC"> you may have only got a small</font>

295
00:12:35,190 --> 00:12:40,860
<font color="#CCCCCC">buffer and</font><font color="#E5E5E5"> you don't know what happened</font>

296
00:12:37,620 --> 00:12:42,839
<font color="#CCCCCC">a day up to you ago</font><font color="#E5E5E5"> so stick some of</font>

297
00:12:40,860 --> 00:12:44,400
these logs<font color="#E5E5E5"> somewhere useful</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> you can</font>

298
00:12:42,839 --> 00:12:47,670
<font color="#E5E5E5">and have a look at the history of</font><font color="#CCCCCC"> what</font>

299
00:12:44,400 --> 00:12:49,130
might have gone wrong<font color="#E5E5E5"> and you know what</font>

300
00:12:47,670 --> 00:12:50,719
the logs mean

301
00:12:49,130 --> 00:12:52,490
when some of the logs<font color="#E5E5E5"> can have a lot of</font>

302
00:12:50,720 --> 00:12:55,420
<font color="#CCCCCC">gibberish in them to try</font><font color="#E5E5E5"> and understand</font>

303
00:12:52,490 --> 00:12:58,220
what this gibberish<font color="#E5E5E5"> could actually mean</font>

304
00:12:55,420 --> 00:13:01,939
<font color="#E5E5E5">are you familiar with the BGP debug</font>

305
00:12:58,220 --> 00:13:04,670
process<font color="#CCCCCC"> some</font><font color="#E5E5E5"> of this implementations</font>

306
00:13:01,940 --> 00:13:06,020
<font color="#E5E5E5">allow you to debug the BTB process do</font>

307
00:13:04,670 --> 00:13:07,670
you know all the commands<font color="#E5E5E5"> available or</font>

308
00:13:06,020 --> 00:13:10,939
what is available<font color="#E5E5E5"> what</font><font color="#CCCCCC"> you can do with</font>

309
00:13:07,670 --> 00:13:13,459
them<font color="#E5E5E5"> yes the customer support will say</font>

310
00:13:10,940 --> 00:13:15,230
don't<font color="#CCCCCC"> ever dare use them but that's just</font>

311
00:13:13,460 --> 00:13:16,910
<font color="#E5E5E5">so you don't</font><font color="#CCCCCC"> go</font><font color="#E5E5E5"> and switch on crazy</font>

312
00:13:15,230 --> 00:13:19,640
things<font color="#E5E5E5"> and then complain that it doesn't</font>

313
00:13:16,910 --> 00:13:21,469
<font color="#E5E5E5">what the router doesn't work right but</font>

314
00:13:19,640 --> 00:13:24,170
you can actually<font color="#CCCCCC"> use some of these</font><font color="#E5E5E5"> tools</font>

315
00:13:21,470 --> 00:13:26,870
<font color="#E5E5E5">to very very good effect so check the</font>

316
00:13:24,170 --> 00:13:29,959
vendor documentation<font color="#E5E5E5"> check operational</font>

317
00:13:26,870 --> 00:13:33,100
recommendations<font color="#CCCCCC"> okay in other</font><font color="#E5E5E5"> words what</font>

318
00:13:29,960 --> 00:13:35,000
your peers in the industry might say any

319
00:13:33,100 --> 00:13:37,010
documents have<font color="#CCCCCC"> been written by other</font>

320
00:13:35,000 --> 00:13:40,790
service providers or<font color="#CCCCCC"> the operators and</font>

321
00:13:37,010 --> 00:13:42,890
and so forth to get tips<font color="#E5E5E5"> of</font><font color="#CCCCCC"> what you can</font>

322
00:13:40,790 --> 00:13:45,680
do and then you<font color="#E5E5E5"> can go switching on some</font>

323
00:13:42,890 --> 00:13:47,060
of the debug<font color="#E5E5E5"> tools you want to work in</font>

324
00:13:45,680 --> 00:13:49,880
the principle of<font color="#CCCCCC"> having fewer surprises</font>

325
00:13:47,060 --> 00:13:52,609
<font color="#E5E5E5">so don't so you should be surprised if</font>

326
00:13:49,880 --> 00:13:56,120
you switch on full debugging on<font color="#E5E5E5"> 130,000</font>

327
00:13:52,610 --> 00:13:59,620
prefix<font color="#CCCCCC"> writing-table that your router is</font>

328
00:13:56,120 --> 00:13:59,620
<font color="#E5E5E5">going</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> probably fall over</font><font color="#CCCCCC"> okay</font>

329
00:13:59,780 --> 00:14:03,920
lots of fundamentals<font color="#CCCCCC"> say</font><font color="#E5E5E5"> that the</font>

330
00:14:01,700 --> 00:14:07,690
nothing really too<font color="#CCCCCC"> specific to be</font><font color="#E5E5E5"> GP</font>

331
00:14:03,920 --> 00:14:09,349
it's all fairly simple straightforward

332
00:14:07,690 --> 00:14:12,950
troubleshooting that<font color="#E5E5E5"> you would apply in</font>

333
00:14:09,350 --> 00:14:14,090
any part of a network operation so now

334
00:14:12,950 --> 00:14:16,430
we're going<font color="#CCCCCC"> to really look at the main</font>

335
00:14:14,090 --> 00:14:20,720
part<font color="#CCCCCC"> what sort of issues that</font><font color="#E5E5E5"> you can</font>

336
00:14:16,430 --> 00:14:22,280
have within your own network<font color="#CCCCCC"> I'm not</font>

337
00:14:20,720 --> 00:14:24,380
going<font color="#E5E5E5"> to include any configuration</font>

338
00:14:22,280 --> 00:14:27,620
examples unless I'm just going<font color="#E5E5E5"> to have a</font>

339
00:14:24,380 --> 00:14:29,510
look<font color="#CCCCCC"> at some of the principles</font><font color="#E5E5E5"> and some</font>

340
00:14:27,620 --> 00:14:30,920
of the common problems<font color="#E5E5E5"> and the solutions</font>

341
00:14:29,510 --> 00:14:34,730
<font color="#CCCCCC">that</font><font color="#E5E5E5"> you can get</font>

342
00:14:30,920 --> 00:14:36,439
so rather than load this down with iOS

343
00:14:34,730 --> 00:14:38,450
configuration examples we'll just have a

344
00:14:36,440 --> 00:14:42,320
look at some<font color="#E5E5E5"> of the natural concepts</font>

345
00:14:38,450 --> 00:14:43,460
themselves<font color="#E5E5E5"> and I split</font><font color="#CCCCCC"> it into four</font>

346
00:14:42,320 --> 00:14:46,180
pieces

347
00:14:43,460 --> 00:14:48,980
the first one about<font color="#E5E5E5"> peer establishment</font>

348
00:14:46,180 --> 00:14:51,560
many many issues of peer establishment

349
00:14:48,980 --> 00:14:54,860
and people look for the complicated

350
00:14:51,560 --> 00:14:57,199
reason why<font color="#CCCCCC"> they're problems and then</font>

351
00:14:54,860 --> 00:14:59,080
that generally tend not to be like<font color="#CCCCCC"> that</font>

352
00:14:57,200 --> 00:15:01,550
<font color="#E5E5E5">then we've got missing routes</font>

353
00:14:59,080 --> 00:15:03,380
inconsistent right<font color="#E5E5E5"> selection</font>

354
00:15:01,550 --> 00:15:07,189
and of course loops and convergence

355
00:15:03,380 --> 00:15:09,380
which is entertaining<font color="#CCCCCC"> as well</font><font color="#E5E5E5"> peer</font>

356
00:15:07,190 --> 00:15:13,220
establishment<font color="#E5E5E5"> a like this this slide</font>

357
00:15:09,380 --> 00:15:15,380
because in this these<font color="#E5E5E5"> days</font><font color="#CCCCCC"> people are</font>

358
00:15:13,220 --> 00:15:17,390
very security minded and they put the

359
00:15:15,380 --> 00:15:20,330
filters only<font color="#E5E5E5"> on the edge of the network</font>

360
00:15:17,390 --> 00:15:23,600
<font color="#E5E5E5">like the good people they are and they</font>

361
00:15:20,330 --> 00:15:25,670
forget to<font color="#E5E5E5"> allow BGP so I mean I usually</font>

362
00:15:23,600 --> 00:15:28,400
<font color="#E5E5E5">have an email or two per month that says</font>

363
00:15:25,670 --> 00:15:32,750
well I'm trying<font color="#E5E5E5"> to bring BGP up but and</font>

364
00:15:28,400 --> 00:15:35,810
because<font color="#CCCCCC"> people will forget port 179</font><font color="#E5E5E5"> BGP</font>

365
00:15:32,750 --> 00:15:37,550
uses TCP 179 so you need to allow<font color="#CCCCCC"> that</font>

366
00:15:35,810 --> 00:15:39,650
through your packet filters between<font color="#E5E5E5"> you</font>

367
00:15:37,550 --> 00:15:42,890
and your<font color="#E5E5E5"> neighboring router this is for</font>

368
00:15:39,650 --> 00:15:45,560
establishing<font color="#CCCCCC"> bgp peering between</font><font color="#E5E5E5"> you and</font>

369
00:15:42,890 --> 00:15:48,189
your<font color="#E5E5E5"> neighboring</font><font color="#CCCCCC"> yes and let's</font>

370
00:15:45,560 --> 00:15:50,869
definitely<font color="#CCCCCC"> have definitely</font><font color="#E5E5E5"> a frequent</font>

371
00:15:48,190 --> 00:15:55,100
frequently occurring problem<font color="#E5E5E5"> people</font><font color="#CCCCCC"> are</font>

372
00:15:50,870 --> 00:15:57,830
<font color="#E5E5E5">over aggressive with the filter</font><font color="#CCCCCC"> the</font>

373
00:15:55,100 --> 00:15:59,690
second problem<font color="#CCCCCC"> I'd be connectivity can</font>

374
00:15:57,830 --> 00:16:02,150
you<font color="#CCCCCC"> actually get to your neighboring</font>

375
00:15:59,690 --> 00:16:04,520
router if you're trying to<font color="#E5E5E5"> bring up say</font>

376
00:16:02,150 --> 00:16:06,439
internal BGP with a router somewhere

377
00:16:04,520 --> 00:16:07,939
<font color="#E5E5E5">else in</font><font color="#CCCCCC"> your network</font><font color="#E5E5E5"> well you can</font>

378
00:16:06,440 --> 00:16:09,830
specify the IP address of<font color="#E5E5E5"> that</font>

379
00:16:07,940 --> 00:16:10,670
neighboring router<font color="#CCCCCC"> but can you</font><font color="#E5E5E5"> actually</font>

380
00:16:09,830 --> 00:16:12,770
get to it

381
00:16:10,670 --> 00:16:15,229
can you trace to it can<font color="#E5E5E5"> you ping it</font>

382
00:16:12,770 --> 00:16:16,400
because we can't trace a ping to<font color="#CCCCCC"> it</font><font color="#E5E5E5"> with</font>

383
00:16:15,230 --> 00:16:20,050
not much chance so if you're<font color="#E5E5E5"> actually</font>

384
00:16:16,400 --> 00:16:22,579
<font color="#E5E5E5">going</font><font color="#CCCCCC"> to bring</font><font color="#E5E5E5"> up a BGP session either</font>

385
00:16:20,050 --> 00:16:24,589
<font color="#E5E5E5">what's</font><font color="#CCCCCC"> - a very very simple but oh my</font>

386
00:16:22,580 --> 00:16:27,170
gosh I come<font color="#CCCCCC"> across those so often people</font>

387
00:16:24,590 --> 00:16:29,120
don't do that fundamental check so<font color="#CCCCCC"> you</font>

388
00:16:27,170 --> 00:16:31,729
have<font color="#E5E5E5"> a BGP session not coming up first</font>

389
00:16:29,120 --> 00:16:33,770
<font color="#E5E5E5">thing you</font><font color="#CCCCCC"> check filters and can you</font>

390
00:16:31,730 --> 00:16:36,380
<font color="#E5E5E5">actually reach the neighboring writer at</font>

391
00:16:33,770 --> 00:16:38,180
the<font color="#E5E5E5"> address you specified once you've</font>

392
00:16:36,380 --> 00:16:40,580
got that<font color="#E5E5E5"> far of course the open messages</font>

393
00:16:38,180 --> 00:16:43,459
are exchanged<font color="#CCCCCC"> pinning addresses must</font>

394
00:16:40,580 --> 00:16:44,690
match<font color="#E5E5E5"> and the local a s configuration</font>

395
00:16:43,460 --> 00:16:48,290
must match

396
00:16:44,690 --> 00:16:50,750
that's another classic<font color="#E5E5E5"> try to bring up</font>

397
00:16:48,290 --> 00:16:53,480
an eye<font color="#CCCCCC"> BGP session and</font><font color="#E5E5E5"> your</font><font color="#CCCCCC"> typo'd the</font>

398
00:16:50,750 --> 00:16:56,150
actual a s number you may be thrown in

399
00:16:53,480 --> 00:16:57,950
an extra<font color="#CCCCCC"> 0 or a 1</font><font color="#E5E5E5"> or you got nervous on</font>

400
00:16:56,150 --> 00:17:00,560
the keyboard and<font color="#E5E5E5"> may be typed in an</font>

401
00:16:57,950 --> 00:17:02,450
extra digit<font color="#E5E5E5"> for the a s or something or</font>

402
00:17:00,560 --> 00:17:03,949
you've confused an<font color="#E5E5E5"> 8 with a</font><font color="#CCCCCC"> 0 because</font>

403
00:17:02,450 --> 00:17:06,770
<font color="#CCCCCC">it's hard to</font><font color="#E5E5E5"> read what your colleagues</font>

404
00:17:03,950 --> 00:17:08,720
scroll down in a bit of<font color="#E5E5E5"> paper</font><font color="#CCCCCC"> seen</font><font color="#E5E5E5"> all</font>

405
00:17:06,770 --> 00:17:12,550
it<font color="#E5E5E5"> all happens you you need to make sure</font>

406
00:17:08,720 --> 00:17:12,550
<font color="#CCCCCC">that these type of things</font><font color="#E5E5E5"> match</font>

407
00:17:13,540 --> 00:17:18,440
<font color="#E5E5E5">okay so some</font><font color="#CCCCCC"> of the common problems you</font>

408
00:17:17,810 --> 00:17:21,079
<font color="#CCCCCC">know I do</font>

409
00:17:18,440 --> 00:17:23,330
<font color="#E5E5E5">IP reach ability you could incorrect</font>

410
00:17:21,079 --> 00:17:25,310
configuration<font color="#E5E5E5"> flapping peers</font>

411
00:17:23,329 --> 00:17:28,280
another issue<font color="#E5E5E5"> that could</font><font color="#CCCCCC"> be layer two</font>

412
00:17:25,310 --> 00:17:31,190
problems<font color="#CCCCCC"> they're the most</font><font color="#E5E5E5"> common link</font>

413
00:17:28,280 --> 00:17:32,120
saturation problems or<font color="#E5E5E5"> CPU utilization</font>

414
00:17:31,190 --> 00:17:34,700
problems

415
00:17:32,120 --> 00:17:37,820
I'll give you flapping peers let's have

416
00:17:34,700 --> 00:17:42,950
a look at the<font color="#E5E5E5"> peer establishment give</font><font color="#CCCCCC"> a</font>

417
00:17:37,820 --> 00:17:44,600
<font color="#E5E5E5">simple situation</font><font color="#CCCCCC"> like this well trying</font>

418
00:17:42,950 --> 00:17:46,730
to bring up a<font color="#E5E5E5"> session between</font><font color="#CCCCCC"> router 1</font>

419
00:17:44,600 --> 00:17:48,620
and router two are the two routers

420
00:17:46,730 --> 00:17:50,600
actually sitting<font color="#E5E5E5"> in the same a s number</font>

421
00:17:48,620 --> 00:17:54,110
<font color="#E5E5E5">when you can check</font><font color="#CCCCCC"> that by looking at</font>

422
00:17:50,600 --> 00:17:57,050
<font color="#CCCCCC">the configuration quite easily</font><font color="#E5E5E5"> it's the</font>

423
00:17:54,110 --> 00:17:58,699
<font color="#E5E5E5">remote is assigned correctly</font><font color="#CCCCCC"> so for</font>

424
00:17:57,050 --> 00:18:00,860
<font color="#E5E5E5">example peering between writer two and</font>

425
00:17:58,700 --> 00:18:04,340
writer<font color="#E5E5E5"> 3 have you actually type a s to</font>

426
00:18:00,860 --> 00:18:08,810
<font color="#CCCCCC">inter altitude have you typed a s1 into</font>

427
00:18:04,340 --> 00:18:10,459
router<font color="#CCCCCC"> 3 for the neighboring a s and you</font>

428
00:18:08,810 --> 00:18:14,149
just verify with a diagram<font color="#E5E5E5"> or the</font>

429
00:18:10,460 --> 00:18:15,680
documentation<font color="#CCCCCC"> that you have these</font><font color="#E5E5E5"> are</font>

430
00:18:14,150 --> 00:18:19,190
these are<font color="#CCCCCC"> very</font><font color="#E5E5E5"> simple</font><font color="#CCCCCC"> things</font><font color="#E5E5E5"> to actually</font>

431
00:18:15,680 --> 00:18:22,520
<font color="#E5E5E5">overlook certainly with some of the a s</font>

432
00:18:19,190 --> 00:18:24,110
numbers<font color="#CCCCCC"> I suppose I tend to find in the</font>

433
00:18:22,520 --> 00:18:26,690
days when a s numbers like<font color="#CCCCCC"> two</font><font color="#E5E5E5"> or</font><font color="#CCCCCC"> three</font>

434
00:18:24,110 --> 00:18:29,300
<font color="#E5E5E5">digits it was hard to go wrong</font><font color="#CCCCCC"> but now</font>

435
00:18:26,690 --> 00:18:32,120
<font color="#E5E5E5">when the 30,000 or so it's very</font><font color="#CCCCCC"> easy for</font>

436
00:18:29,300 --> 00:18:33,950
<font color="#E5E5E5">people to transpose numbers when when</font>

437
00:18:32,120 --> 00:18:36,199
you're typing<font color="#CCCCCC"> or when you're tired</font><font color="#E5E5E5"> it's</font>

438
00:18:33,950 --> 00:18:38,780
so incredibly easy<font color="#E5E5E5"> to transpose numbers</font>

439
00:18:36,200 --> 00:18:42,440
and the so many<font color="#E5E5E5"> issue is simply caused</font>

440
00:18:38,780 --> 00:18:44,149
by that so if you find<font color="#E5E5E5"> in trouble when</font>

441
00:18:42,440 --> 00:18:47,180
you're deploying<font color="#E5E5E5"> BGP in your network</font>

442
00:18:44,150 --> 00:18:49,340
<font color="#E5E5E5">trying to bring up the BGP session check</font>

443
00:18:47,180 --> 00:18:55,370
<font color="#E5E5E5">things</font><font color="#CCCCCC"> like that</font><font color="#E5E5E5"> is is have you actually</font>

444
00:18:49,340 --> 00:18:56,840
<font color="#CCCCCC">enter the</font><font color="#E5E5E5"> configuration properly so we</font>

445
00:18:55,370 --> 00:18:58,330
<font color="#E5E5E5">assume that</font><font color="#CCCCCC"> I become</font><font color="#E5E5E5"> activities been</font>

446
00:18:56,840 --> 00:19:01,040
checked<font color="#E5E5E5"> that you can reach the neighbor</font>

447
00:18:58,330 --> 00:19:04,250
<font color="#E5E5E5">check TCP to find out what connections</font>

448
00:19:01,040 --> 00:19:06,590
<font color="#E5E5E5">but you're accepting or most routers I</font>

449
00:19:04,250 --> 00:19:08,150
know of you can<font color="#CCCCCC"> actually sure what TCP</font>

450
00:19:06,590 --> 00:19:10,639
connections<font color="#CCCCCC"> have been terminated on the</font>

451
00:19:08,150 --> 00:19:13,220
<font color="#CCCCCC">Box</font><font color="#E5E5E5"> do</font><font color="#CCCCCC"> they</font><font color="#E5E5E5"> make sense</font><font color="#CCCCCC"> do they match</font>

452
00:19:10,640 --> 00:19:15,790
what what you expect<font color="#E5E5E5"> do the source and</font>

453
00:19:13,220 --> 00:19:18,080
<font color="#E5E5E5">destination addresses match</font>

454
00:19:15,790 --> 00:19:22,220
one common<font color="#CCCCCC"> problem that</font><font color="#E5E5E5"> you find</font>

455
00:19:18,080 --> 00:19:24,799
deployed ibgp<font color="#CCCCCC"> when you deploy</font><font color="#E5E5E5"> a BGP</font><font color="#CCCCCC"> you</font>

456
00:19:22,220 --> 00:19:25,490
run ibgp between loopback interfaces on

457
00:19:24,799 --> 00:19:28,070
the<font color="#E5E5E5"> router</font>

458
00:19:25,490 --> 00:19:29,020
you don't run ibgp between the<font color="#CCCCCC"> physical</font>

459
00:19:28,070 --> 00:19:32,030
interfaces

460
00:19:29,020 --> 00:19:33,559
<font color="#E5E5E5">you should know that if you don't run it</font>

461
00:19:32,030 --> 00:19:35,600
between a physical interface that

462
00:19:33,559 --> 00:19:38,450
physical interface goes down your ibgp

463
00:19:35,600 --> 00:19:41,209
goes down<font color="#E5E5E5"> the whole point of deploying</font>

464
00:19:38,450 --> 00:19:44,150
<font color="#E5E5E5">ibgp in the network is to have a stable</font>

465
00:19:41,210 --> 00:19:46,309
system of delivering prefixes around

466
00:19:44,150 --> 00:19:48,770
<font color="#E5E5E5">within</font><font color="#CCCCCC"> the backbone so</font><font color="#E5E5E5"> having an</font>

467
00:19:46,309 --> 00:19:51,168
internal BGP depended on a physical

468
00:19:48,770 --> 00:19:54,830
interface<font color="#E5E5E5"> means that your internal BGP</font>

469
00:19:51,169 --> 00:19:57,169
is<font color="#E5E5E5"> only as stable as the interface or</font>

470
00:19:54,830 --> 00:19:59,418
<font color="#CCCCCC">the</font><font color="#E5E5E5"> network that that interface</font><font color="#CCCCCC"> is</font>

471
00:19:57,169 --> 00:20:02,179
connected to most routers have<font color="#E5E5E5"> at least</font>

472
00:19:59,419 --> 00:20:03,530
one interface connected somewhere<font color="#CCCCCC"> in</font>

473
00:20:02,179 --> 00:20:06,290
<font color="#E5E5E5">fact any router in</font><font color="#CCCCCC"> the core of</font><font color="#E5E5E5"> the</font>

474
00:20:03,530 --> 00:20:09,139
<font color="#E5E5E5">network will have multiple so a physical</font>

475
00:20:06,290 --> 00:20:11,870
<font color="#E5E5E5">circuit failure or interface failure can</font>

476
00:20:09,140 --> 00:20:14,980
be<font color="#E5E5E5"> worked around by running the ibgp</font>

477
00:20:11,870 --> 00:20:17,030
between the loop backs

478
00:20:14,980 --> 00:20:19,910
so a common<font color="#CCCCCC"> problem is you're running</font>

479
00:20:17,030 --> 00:20:21,399
<font color="#E5E5E5">ibgp between</font><font color="#CCCCCC"> a loopback</font><font color="#E5E5E5"> but if if</font>

480
00:20:19,910 --> 00:20:24,290
somehow missed out some of the loopback

481
00:20:21,400 --> 00:20:26,960
configuration<font color="#CCCCCC"> now you may</font><font color="#E5E5E5"> be lucky</font>

482
00:20:24,290 --> 00:20:29,030
the ibgp may come up you may be<font color="#CCCCCC"> very</font>

483
00:20:26,960 --> 00:20:31,910
unlucky<font color="#CCCCCC"> as it's more often the case an</font>

484
00:20:29,030 --> 00:20:34,340
<font color="#E5E5E5">IB GB just sticks that you look at it it</font>

485
00:20:31,910 --> 00:20:36,950
<font color="#CCCCCC">looks fine you forget to tell the router</font>

486
00:20:34,340 --> 00:20:38,928
the basic thing of saying<font color="#E5E5E5"> we're actually</font>

487
00:20:36,950 --> 00:20:41,950
<font color="#E5E5E5">peering between the loopback interfaces</font>

488
00:20:38,929 --> 00:20:44,260
and not between<font color="#CCCCCC"> and it were else</font>

489
00:20:41,950 --> 00:20:47,030
remember the source address for any

490
00:20:44,260 --> 00:20:48,770
<font color="#E5E5E5">outgoing packet is the outbound</font>

491
00:20:47,030 --> 00:20:51,830
interface<font color="#E5E5E5"> so it's the IP address and</font>

492
00:20:48,770 --> 00:20:53,418
iPhone interface open interface is not

493
00:20:51,830 --> 00:20:55,309
the loopback it could be your serial

494
00:20:53,419 --> 00:20:57,890
could be the phone app so it's important

495
00:20:55,309 --> 00:21:02,059
<font color="#CCCCCC">to</font><font color="#E5E5E5"> tell</font><font color="#CCCCCC"> bgp</font><font color="#E5E5E5"> my ID band</font><font color="#CCCCCC"> source is</font>

496
00:20:57,890 --> 00:21:04,520
actually<font color="#E5E5E5"> the loopback now</font>

497
00:21:02,059 --> 00:21:06,649
EB GP is by and large<font color="#E5E5E5"> problem-free when</font>

498
00:21:04,520 --> 00:21:08,480
you try and bring out the peering you

499
00:21:06,650 --> 00:21:12,020
only need bit<font color="#E5E5E5"> a one line configuration</font>

500
00:21:08,480 --> 00:21:14,530
<font color="#CCCCCC">say the</font><font color="#E5E5E5"> neighbor is this address that is</font>

501
00:21:12,020 --> 00:21:14,530
<font color="#E5E5E5">number</font>

502
00:21:15,390 --> 00:21:20,590
but yes the source<font color="#CCCCCC"> addresses</font><font color="#E5E5E5"> that</font>

503
00:21:19,720 --> 00:21:22,960
<font color="#CCCCCC">divided by an interface</font>

504
00:21:20,590 --> 00:21:25,090
sorry destination address is that of the

505
00:21:22,960 --> 00:21:27,640
remote<font color="#CCCCCC"> router that's</font><font color="#E5E5E5"> easy</font><font color="#CCCCCC"> too</font><font color="#E5E5E5"> it's</font>

506
00:21:25,090 --> 00:21:29,290
directly<font color="#CCCCCC"> connected time to live is set</font>

507
00:21:27,640 --> 00:21:31,390
to<font color="#CCCCCC"> 1</font><font color="#E5E5E5"> there's no real problem with</font>

508
00:21:29,290 --> 00:21:34,690
bringing<font color="#CCCCCC"> you up BGP you've got your</font>

509
00:21:31,390 --> 00:21:39,100
filters right so<font color="#E5E5E5"> you allowing tcp 179 in</font>

510
00:21:34,690 --> 00:21:41,200
both directions but<font color="#E5E5E5"> the problems start</font>

511
00:21:39,100 --> 00:21:45,159
arising<font color="#CCCCCC"> and ebgp when you try and</font><font color="#E5E5E5"> do</font>

512
00:21:41,200 --> 00:21:48,160
load balancing<font color="#CCCCCC"> or you try and use ebgp</font>

513
00:21:45,160 --> 00:21:49,809
multi-hop in other words you're setting

514
00:21:48,160 --> 00:21:53,890
the time to live to<font color="#CCCCCC"> be more than one</font>

515
00:21:49,809 --> 00:21:57,970
<font color="#E5E5E5">you're trying</font><font color="#CCCCCC"> to talk external bgp user</font>

516
00:21:53,890 --> 00:22:01,929
<font color="#CCCCCC">devices not directly</font><font color="#E5E5E5"> connected</font><font color="#CCCCCC"> to the</font>

517
00:21:57,970 --> 00:22:04,750
local writer<font color="#CCCCCC"> okay for</font><font color="#E5E5E5"> example you may be</font>

518
00:22:01,929 --> 00:22:06,940
trying to<font color="#E5E5E5"> peer ibgp with a</font><font color="#CCCCCC"> rioter</font>

519
00:22:04,750 --> 00:22:09,040
central router in<font color="#CCCCCC"> your neighboring osp's</font>

520
00:22:06,940 --> 00:22:10,710
network rather<font color="#E5E5E5"> than on the aggregation</font>

521
00:22:09,040 --> 00:22:13,240
<font color="#E5E5E5">writer</font>

522
00:22:10,710 --> 00:22:15,790
some are<font color="#CCCCCC"> espy's do that a lot</font><font color="#E5E5E5"> of</font><font color="#CCCCCC"> ice</font>

523
00:22:13,240 --> 00:22:17,470
<font color="#CCCCCC">piece</font><font color="#E5E5E5"> want some of some Lawton have</font>

524
00:22:15,790 --> 00:22:20,260
policies where<font color="#CCCCCC"> they will not let you do</font>

525
00:22:17,470 --> 00:22:22,809
<font color="#CCCCCC">a</font><font color="#E5E5E5"> BGP multi-hop because the problems you</font>

526
00:22:20,260 --> 00:22:23,830
end up with are so obscure that<font color="#CCCCCC"> they</font>

527
00:22:22,809 --> 00:22:28,360
could look as though there's<font color="#CCCCCC"> something</font>

528
00:22:23,830 --> 00:22:30,159
else<font color="#CCCCCC"> ok 'lord balancing can be</font><font color="#E5E5E5"> another</font>

529
00:22:28,360 --> 00:22:31,990
issue as well<font color="#CCCCCC"> if you aware how you do</font>

530
00:22:30,160 --> 00:22:34,240
load balancing<font color="#CCCCCC"> you point a static right</font>

531
00:22:31,990 --> 00:22:38,200
<font color="#E5E5E5">to the remote loop max of the remote</font>

532
00:22:34,240 --> 00:22:40,450
router<font color="#E5E5E5"> and then you compete at ebgp with</font>

533
00:22:38,200 --> 00:22:43,660
that loop back<font color="#CCCCCC"> and that's great for load</font>

534
00:22:40,450 --> 00:22:45,190
<font color="#E5E5E5">balancing over parallel circuits but you</font>

535
00:22:43,660 --> 00:22:47,919
have to be<font color="#E5E5E5"> kind of careful with that as</font>

536
00:22:45,190 --> 00:22:50,140
well<font color="#E5E5E5"> because the ebgp session might stay</font>

537
00:22:47,919 --> 00:22:52,150
<font color="#CCCCCC">up or the link might be very</font><font color="#E5E5E5"> very bad</font>

538
00:22:50,140 --> 00:22:53,919
and you may not be aware<font color="#E5E5E5"> that it's</font>

539
00:22:52,150 --> 00:22:55,630
actually a physical<font color="#CCCCCC"> connection between</font>

540
00:22:53,919 --> 00:22:57,490
<font color="#E5E5E5">your router that's causing</font><font color="#CCCCCC"> you some</font><font color="#E5E5E5"> of</font>

541
00:22:55,630 --> 00:22:59,410
the<font color="#E5E5E5"> problems so you've got to be kind of</font>

542
00:22:57,490 --> 00:23:02,049
careful<font color="#CCCCCC"> and in</font><font color="#E5E5E5"> fact a lot of my</font>

543
00:22:59,410 --> 00:23:04,809
trainings<font color="#E5E5E5"> when I'm introducing people</font><font color="#CCCCCC"> to</font>

544
00:23:02,049 --> 00:23:07,360
<font color="#E5E5E5">a BGP</font><font color="#CCCCCC"> I just say don't</font><font color="#E5E5E5"> even think of</font>

545
00:23:04,809 --> 00:23:08,980
using the<font color="#CCCCCC"> ebgp multi-hop</font><font color="#E5E5E5"> unless you</font>

546
00:23:07,360 --> 00:23:10,750
<font color="#E5E5E5">really understand what's going</font><font color="#CCCCCC"> on and</font>

547
00:23:08,980 --> 00:23:15,059
your neighbor knows what's going on<font color="#E5E5E5"> and</font>

548
00:23:10,750 --> 00:23:15,059
you're aware of<font color="#E5E5E5"> the potential problems</font>

549
00:23:15,460 --> 00:23:20,660
okay so the<font color="#CCCCCC"> beaching multi-hop problems</font>

550
00:23:18,740 --> 00:23:22,220
that can be<font color="#CCCCCC"> I P connectivity to the</font>

551
00:23:20,660 --> 00:23:24,800
remote address<font color="#E5E5E5"> so as the riot in the</font>

552
00:23:22,220 --> 00:23:26,500
<font color="#E5E5E5">local routing table is the</font><font color="#CCCCCC"> router</font><font color="#E5E5E5"> the</font>

553
00:23:24,800 --> 00:23:28,490
remote writing<font color="#CCCCCC"> table to get</font><font color="#E5E5E5"> back to you</font>

554
00:23:26,500 --> 00:23:30,590
because you may have everything set up

555
00:23:28,490 --> 00:23:32,720
<font color="#E5E5E5">right but does your neighboring</font><font color="#CCCCCC"> is Pete</font>

556
00:23:30,590 --> 00:23:33,679
have everything set right as well to

557
00:23:32,720 --> 00:23:35,870
point back<font color="#CCCCCC"> to</font><font color="#E5E5E5"> you</font>

558
00:23:33,680 --> 00:23:37,880
in fact<font color="#E5E5E5"> that's quite a common</font><font color="#CCCCCC"> problem</font>

559
00:23:35,870 --> 00:23:41,419
<font color="#E5E5E5">they forget</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> put their static right</font>

560
00:23:37,880 --> 00:23:43,700
pointing back to your<font color="#E5E5E5"> loopback you can</font>

561
00:23:41,420 --> 00:23:46,790
check this using ping<font color="#E5E5E5"> okay and check</font>

562
00:23:43,700 --> 00:23:48,860
using ping to the remote<font color="#E5E5E5"> address you're</font>

563
00:23:46,790 --> 00:23:50,690
trying to get<font color="#E5E5E5"> at you can specify your</font>

564
00:23:48,860 --> 00:23:52,459
source address whether it's<font color="#CCCCCC"> right by an</font>

565
00:23:50,690 --> 00:23:56,440
interface<font color="#E5E5E5"> or you</font><font color="#CCCCCC"> loopback</font><font color="#E5E5E5"> or whatever</font>

566
00:23:52,460 --> 00:23:58,940
<font color="#E5E5E5">and that will tell you pretty clearly</font>

567
00:23:56,440 --> 00:24:02,900
<font color="#E5E5E5">what what the problem might be there</font>

568
00:23:58,940 --> 00:24:04,940
other filters in the path we need<font color="#E5E5E5"> bgp</font>

569
00:24:02,900 --> 00:24:07,040
multi-hop between you and your mediate

570
00:24:04,940 --> 00:24:09,560
neighboring<font color="#E5E5E5"> ir SP should be too much</font><font color="#CCCCCC"> of</font>

571
00:24:07,040 --> 00:24:12,320
an issue<font color="#E5E5E5"> but if you're crossing multiple</font>

572
00:24:09,560 --> 00:24:16,190
<font color="#E5E5E5">network boundaries somebody could be</font>

573
00:24:12,320 --> 00:24:18,649
filtering<font color="#E5E5E5"> bgp somewhere in the path and</font>

574
00:24:16,190 --> 00:24:21,890
then you've got to cooperate<font color="#E5E5E5"> and work</font>

575
00:24:18,650 --> 00:24:26,270
with the ISPs in the<font color="#CCCCCC"> path to try and</font>

576
00:24:21,890 --> 00:24:29,990
make this<font color="#CCCCCC"> thing work from with passwords</font>

577
00:24:26,270 --> 00:24:32,570
<font color="#CCCCCC">I mean I know a</font><font color="#E5E5E5"> lot of</font><font color="#CCCCCC"> eyespace don't</font>

578
00:24:29,990 --> 00:24:36,680
use passwords on the<font color="#CCCCCC"> ibgp and ebgp</font>

579
00:24:32,570 --> 00:24:40,120
session it's certainly a<font color="#E5E5E5"> a good current</font>

580
00:24:36,680 --> 00:24:42,530
practice<font color="#E5E5E5"> for a lot of people that I know</font>

581
00:24:40,120 --> 00:24:46,780
<font color="#CCCCCC">they</font><font color="#E5E5E5"> were using passwords on bgp</font>

582
00:24:42,530 --> 00:24:49,879
sessions introduces own set of problems

583
00:24:46,780 --> 00:24:51,889
<font color="#E5E5E5">you bit if you type</font><font color="#CCCCCC"> the password in on</font>

584
00:24:49,880 --> 00:24:53,540
the local<font color="#E5E5E5"> router to</font><font color="#CCCCCC"> the remote</font><font color="#E5E5E5"> right you</font>

585
00:24:51,890 --> 00:24:55,130
<font color="#E5E5E5">find the BGP session won't come up</font>

586
00:24:53,540 --> 00:24:57,970
you've<font color="#E5E5E5"> been through all the previous</font>

587
00:24:55,130 --> 00:25:00,200
troubleshooting and it just won't work

588
00:24:57,970 --> 00:25:02,930
some of<font color="#E5E5E5"> the common problems</font><font color="#CCCCCC"> I've seen</font>

589
00:25:00,200 --> 00:25:05,450
are missing passwords<font color="#CCCCCC"> I mean you have to</font>

590
00:25:02,930 --> 00:25:08,780
<font color="#CCCCCC">just forget to type it in cut and paste</font>

591
00:25:05,450 --> 00:25:10,940
<font color="#CCCCCC">arrows okay so it could be</font><font color="#E5E5E5"> white space</font>

592
00:25:08,780 --> 00:25:12,680
or<font color="#E5E5E5"> a character might have snuck in or a</font>

593
00:25:10,940 --> 00:25:16,040
character might have<font color="#E5E5E5"> may</font><font color="#CCCCCC"> be miss tired</font>

594
00:25:12,680 --> 00:25:18,140
<font color="#CCCCCC">cutting pieces just such a nasty thing</font>

595
00:25:16,040 --> 00:25:19,879
<font color="#E5E5E5">something when it</font><font color="#CCCCCC"> comes to running</font><font color="#E5E5E5"> a</font>

596
00:25:18,140 --> 00:25:20,990
network<font color="#CCCCCC"> trying to troubleshoot what's</font>

597
00:25:19,880 --> 00:25:23,480
going on in<font color="#E5E5E5"> a network</font>

598
00:25:20,990 --> 00:25:26,410
because it introduces so many possible

599
00:25:23,480 --> 00:25:28,190
possible problems typos as well

600
00:25:26,410 --> 00:25:30,710
certainly if you're using quite an

601
00:25:28,190 --> 00:25:32,780
obscure password<font color="#E5E5E5"> trying to distinguish</font>

602
00:25:30,710 --> 00:25:35,800
vertical bars and back<font color="#CCCCCC"> slashes and</font>

603
00:25:32,780 --> 00:25:39,470
<font color="#E5E5E5">comers and full stops and</font><font color="#CCCCCC"> the number</font>

604
00:25:35,800 --> 00:25:45,169
<font color="#CCCCCC">zero with the</font><font color="#E5E5E5"> letter or all those things</font>

605
00:25:39,470 --> 00:25:48,800
and I've<font color="#E5E5E5"> seen cause problems</font><font color="#CCCCCC"> and</font>

606
00:25:45,170 --> 00:25:50,450
<font color="#E5E5E5">capitalization</font><font color="#CCCCCC"> sometimes capitals those</font>

607
00:25:48,800 --> 00:25:52,550
case sensitivities<font color="#CCCCCC"> or non case</font>

608
00:25:50,450 --> 00:25:54,800
sensitivities<font color="#E5E5E5"> extra characters</font><font color="#CCCCCC"> white</font>

609
00:25:52,550 --> 00:25:57,320
<font color="#CCCCCC">space</font><font color="#E5E5E5"> using white</font><font color="#CCCCCC"> space in the password</font>

610
00:25:54,800 --> 00:25:59,570
<font color="#CCCCCC">well how many white spaces are there</font><font color="#E5E5E5"> and</font>

611
00:25:57,320 --> 00:26:01,639
so forth<font color="#CCCCCC"> so when you're dealing with</font>

612
00:25:59,570 --> 00:26:04,939
passwords and bgp sessions you need to

613
00:26:01,640 --> 00:26:07,970
be actually<font color="#E5E5E5"> quite careful common</font>

614
00:26:04,940 --> 00:26:10,070
solutions<font color="#CCCCCC"> actually well</font><font color="#E5E5E5"> quite simple</font><font color="#CCCCCC"> you</font>

615
00:26:07,970 --> 00:26:11,540
start<font color="#CCCCCC"> from start again</font><font color="#E5E5E5"> it's just too</font>

616
00:26:10,070 --> 00:26:13,428
hard<font color="#E5E5E5"> to try</font><font color="#CCCCCC"> and troubleshoot what</font><font color="#E5E5E5"> the</font>

617
00:26:11,540 --> 00:26:14,750
password problems could be some

618
00:26:13,429 --> 00:26:16,700
implementations will encrypt the

619
00:26:14,750 --> 00:26:17,990
password as<font color="#CCCCCC"> it's stored on the writer so</font>

620
00:26:16,700 --> 00:26:20,240
you've got no way<font color="#CCCCCC"> of knowing what you've</font>

621
00:26:17,990 --> 00:26:22,520
typed in in<font color="#E5E5E5"> any case so as much</font><font color="#CCCCCC"> as</font><font color="#E5E5E5"> to</font>

622
00:26:20,240 --> 00:26:24,920
<font color="#E5E5E5">use easier just to say</font><font color="#CCCCCC"> okay start</font><font color="#E5E5E5"> again</font>

623
00:26:22,520 --> 00:26:29,620
<font color="#CCCCCC">type the password in and does that bring</font>

624
00:26:24,920 --> 00:26:29,620
the session up don't cut and paste

625
00:26:30,250 --> 00:26:37,040
flapping peer in<font color="#E5E5E5"> the symptom</font><font color="#CCCCCC"> you have is</font>

626
00:26:34,610 --> 00:26:39,379
that<font color="#CCCCCC"> the ebgp session flaps it comes up</font>

627
00:26:37,040 --> 00:26:41,750
stays up<font color="#CCCCCC"> for a bit that</font><font color="#E5E5E5"> falls over and</font>

628
00:26:39,380 --> 00:26:47,720
<font color="#E5E5E5">that restarts comes</font><font color="#CCCCCC"> up falls over and so</font>

629
00:26:41,750 --> 00:26:49,550
forth round and round and<font color="#E5E5E5"> round well you</font>

630
00:26:47,720 --> 00:26:51,110
need<font color="#E5E5E5"> to</font><font color="#CCCCCC"> ensure that logging is enabled</font>

631
00:26:49,550 --> 00:26:54,169
<font color="#CCCCCC">if you don't have any logs of what's</font>

632
00:26:51,110 --> 00:26:56,959
going on in the router<font color="#CCCCCC"> I either end you</font>

633
00:26:54,170 --> 00:26:58,280
<font color="#E5E5E5">have no clues what's going on and you</font>

634
00:26:56,960 --> 00:27:00,260
should<font color="#CCCCCC"> always be trying to configure</font>

635
00:26:58,280 --> 00:27:01,460
your<font color="#E5E5E5"> router so you get maximum clues to</font>

636
00:27:00,260 --> 00:27:05,629
try and help<font color="#E5E5E5"> you the troubleshooting</font>

637
00:27:01,460 --> 00:27:07,490
<font color="#E5E5E5">what do the logs say well problem like</font>

638
00:27:05,630 --> 00:27:10,550
<font color="#E5E5E5">this is usually caused by the BGP</font>

639
00:27:07,490 --> 00:27:12,410
<font color="#CCCCCC">keepalive</font><font color="#E5E5E5"> getting lost a keepalive is</font>

640
00:27:10,550 --> 00:27:14,659
sent every 60 seconds<font color="#E5E5E5"> or</font><font color="#CCCCCC"> whatever the</font>

641
00:27:12,410 --> 00:27:18,440
two routers negotiate<font color="#E5E5E5"> between each other</font>

642
00:27:14,660 --> 00:27:22,100
and if a keepalive gets lost then<font color="#CCCCCC"> the</font>

643
00:27:18,440 --> 00:27:24,440
<font color="#CCCCCC">bgp session is is pulled over</font><font color="#E5E5E5"> okay</font>

644
00:27:22,100 --> 00:27:27,139
no keep<font color="#E5E5E5"> alive it means the local</font><font color="#CCCCCC"> route</font>

645
00:27:24,440 --> 00:27:28,940
assumes the remote<font color="#E5E5E5"> has vanished</font><font color="#CCCCCC"> so it</font>

646
00:27:27,140 --> 00:27:30,860
tears the<font color="#CCCCCC"> bgp session down because you</font>

647
00:27:28,940 --> 00:27:33,410
know<font color="#CCCCCC"> bgp is trying to do its good thing</font>

648
00:27:30,860 --> 00:27:34,240
of peering gone down i want to fail over

649
00:27:33,410 --> 00:27:37,270
<font color="#CCCCCC">to my</font>

650
00:27:34,240 --> 00:27:40,080
of<font color="#CCCCCC"> path</font><font color="#E5E5E5"> and so it will try and tear the</font>

651
00:27:37,270 --> 00:27:42,160
session down as expeditiously<font color="#CCCCCC"> as it can</font>

652
00:27:40,080 --> 00:27:45,129
because<font color="#E5E5E5"> it then tries to</font><font color="#CCCCCC"> reestablish</font>

653
00:27:42,160 --> 00:27:49,300
<font color="#CCCCCC">your session</font><font color="#E5E5E5"> as it as</font><font color="#CCCCCC"> it as it tries to</font>

654
00:27:45,130 --> 00:27:51,309
do iron<font color="#CCCCCC"> you get my stick you'll bring</font><font color="#E5E5E5"> up</font>

655
00:27:49,300 --> 00:27:53,350
the session<font color="#CCCCCC"> everything happy then it</font>

656
00:27:51,309 --> 00:27:56,850
starts exchanging updates and everything

657
00:27:53,350 --> 00:27:56,850
<font color="#CCCCCC">freezes up again</font>

658
00:27:57,179 --> 00:28:02,770
well the<font color="#CCCCCC"> keep our lives get</font><font color="#E5E5E5"> can get lost</font>

659
00:28:00,580 --> 00:28:04,120
because<font color="#E5E5E5"> they get stuck in the writers</font>

660
00:28:02,770 --> 00:28:06,520
<font color="#CCCCCC">queue</font><font color="#E5E5E5"> behind</font><font color="#CCCCCC"> the beach the update</font>

661
00:28:04,120 --> 00:28:09,129
packets<font color="#CCCCCC"> now the beach you update packets</font>

662
00:28:06,520 --> 00:28:11,740
tend to be packed<font color="#E5E5E5"> into the full size of</font>

663
00:28:09,130 --> 00:28:13,660
the empty units available<font color="#E5E5E5"> to</font><font color="#CCCCCC"> 1500 bytes</font>

664
00:28:11,740 --> 00:28:15,220
for example it's all the updates are

665
00:28:13,660 --> 00:28:17,320
packed in there so<font color="#E5E5E5"> you're efficient with</font>

666
00:28:15,220 --> 00:28:18,490
<font color="#E5E5E5">a number of packets you're sending where</font>

667
00:28:17,320 --> 00:28:20,639
is thy keeper lives are probably

668
00:28:18,490 --> 00:28:22,840
occupying nice little packets like that

669
00:28:20,640 --> 00:28:25,720
<font color="#E5E5E5">so you can send the keeper lives because</font>

670
00:28:22,840 --> 00:28:27,459
<font color="#E5E5E5">little packets but updates are big 1500</font>

671
00:28:25,720 --> 00:28:29,380
byte packets and they get<font color="#E5E5E5"> stuck</font>

672
00:28:27,460 --> 00:28:30,790
somewhere there's something the network

673
00:28:29,380 --> 00:28:33,730
that's not<font color="#CCCCCC"> and not allowing these</font>

674
00:28:30,790 --> 00:28:36,010
through<font color="#E5E5E5"> so if</font><font color="#CCCCCC"> you if you see something</font>

675
00:28:33,730 --> 00:28:37,690
like<font color="#E5E5E5"> this it's worth using ping with</font>

676
00:28:36,010 --> 00:28:40,510
different sizes<font color="#CCCCCC"> to try and find out</font>

677
00:28:37,690 --> 00:28:42,970
where the<font color="#E5E5E5"> jam is now it could well be</font>

678
00:28:40,510 --> 00:28:44,920
<font color="#CCCCCC">that ICMP gets through is it</font><font color="#E5E5E5"> hasn't have</font>

679
00:28:42,970 --> 00:28:48,340
a problem in TCP<font color="#E5E5E5"> does so you got to try</font>

680
00:28:44,920 --> 00:28:51,010
<font color="#CCCCCC">and use different</font><font color="#E5E5E5"> tcp-based ping but</font>

681
00:28:48,340 --> 00:28:54,280
generally an ICMP<font color="#E5E5E5"> ping will let you see</font>

682
00:28:51,010 --> 00:28:58,300
if there are any any MTU problems<font color="#E5E5E5"> within</font>

683
00:28:54,280 --> 00:29:00,370
<font color="#CCCCCC">the network</font><font color="#E5E5E5"> and of course then if you</font>

684
00:28:58,300 --> 00:29:01,990
find that<font color="#E5E5E5"> that's a</font><font color="#CCCCCC"> problem you need</font><font color="#E5E5E5"> to</font>

685
00:29:00,370 --> 00:29:04,928
<font color="#E5E5E5">pass this to the people who look after</font>

686
00:29:01,990 --> 00:29:07,120
<font color="#E5E5E5">the the layer</font><font color="#CCCCCC"> 2 part of</font><font color="#E5E5E5"> your network but</font>

687
00:29:04,929 --> 00:29:09,790
<font color="#E5E5E5">try and be helpful</font><font color="#CCCCCC"> we not just say thank</font>

688
00:29:07,120 --> 00:29:12,070
<font color="#E5E5E5">you</font><font color="#CCCCCC"> bgp going after</font><font color="#E5E5E5"> you problem dump</font><font color="#CCCCCC"> I</font>

689
00:29:09,790 --> 00:29:14,440
mean try and figure out where you where

690
00:29:12,070 --> 00:29:15,850
the<font color="#E5E5E5"> problem might be in the network if</font>

691
00:29:14,440 --> 00:29:17,710
it's if it's<font color="#E5E5E5"> not a meet between</font>

692
00:29:15,850 --> 00:29:19,360
<font color="#E5E5E5">immediate neighbors or you've got some</font>

693
00:29:17,710 --> 00:29:21,820
<font color="#CCCCCC">other physical bits in the network you</font>

694
00:29:19,360 --> 00:29:24,969
can<font color="#E5E5E5"> try and use paint to</font><font color="#CCCCCC"> find out where</font>

695
00:29:21,820 --> 00:29:27,220
the problem<font color="#CCCCCC"> might</font><font color="#E5E5E5"> be you can't have to</font>

696
00:29:24,970 --> 00:29:29,170
work together<font color="#CCCCCC"> i'm each troubleshooting</font>

697
00:29:27,220 --> 00:29:31,030
team is not<font color="#CCCCCC"> a particular island it can't</font>

698
00:29:29,170 --> 00:29:35,100
<font color="#E5E5E5">all sit in the same</font><font color="#CCCCCC"> place in</font><font color="#E5E5E5"> any case so</font>

699
00:29:31,030 --> 00:29:38,350
working<font color="#E5E5E5"> together makes a lot more sense</font>

700
00:29:35,100 --> 00:29:41,500
<font color="#E5E5E5">other common problems well if you see a</font>

701
00:29:38,350 --> 00:29:43,510
<font color="#CCCCCC">bgp peering cycling</font><font color="#E5E5E5"> within about</font><font color="#CCCCCC"> three</font>

702
00:29:41,500 --> 00:29:44,960
to<font color="#CCCCCC"> five</font><font color="#E5E5E5"> minutes</font><font color="#CCCCCC"> it could be the remote</font>

703
00:29:43,510 --> 00:29:48,170
router rebooting

704
00:29:44,960 --> 00:29:50,300
<font color="#CCCCCC">and it's come up it's working and then</font>

705
00:29:48,170 --> 00:29:51,740
<font color="#E5E5E5">it suddenly crashes it comes up again</font>

706
00:29:50,300 --> 00:29:53,899
<font color="#CCCCCC">and so forth</font><font color="#E5E5E5"> that kick tends to be a</font>

707
00:29:51,740 --> 00:29:57,220
three<font color="#CCCCCC"> to five minute cycle it might even</font>

708
00:29:53,900 --> 00:29:59,690
be longer<font color="#E5E5E5"> depending on on the on the</font>

709
00:29:57,220 --> 00:30:01,790
well I suppose<font color="#E5E5E5"> the loading of the</font>

710
00:29:59,690 --> 00:30:06,260
<font color="#E5E5E5">neighboring router but</font><font color="#CCCCCC"> that's a</font><font color="#E5E5E5"> sort</font><font color="#CCCCCC"> of</font>

711
00:30:01,790 --> 00:30:08,300
<font color="#E5E5E5">slower</font><font color="#CCCCCC"> bgp cycle time</font><font color="#E5E5E5"> or</font><font color="#CCCCCC"> could be the</font>

712
00:30:06,260 --> 00:30:10,910
remote router<font color="#E5E5E5"> bgp process is unstable</font>

713
00:30:08,300 --> 00:30:13,909
<font color="#CCCCCC">and that's just restarting like that</font>

714
00:30:10,910 --> 00:30:18,760
it's possible to another favorite

715
00:30:13,910 --> 00:30:21,140
<font color="#E5E5E5">traffic shaping and</font><font color="#CCCCCC"> rate-limiting</font><font color="#E5E5E5"> ahem</font>

716
00:30:18,760 --> 00:30:22,760
people will rate limit different<font color="#CCCCCC"> sizes</font>

717
00:30:21,140 --> 00:30:24,560
of<font color="#E5E5E5"> packets</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> may let little packets</font>

718
00:30:22,760 --> 00:30:26,660
through<font color="#E5E5E5"> and me</font><font color="#CCCCCC"> dookey horrendous rate</font>

719
00:30:24,560 --> 00:30:28,610
limiting on big packets and<font color="#E5E5E5"> that's going</font>

720
00:30:26,660 --> 00:30:29,900
to affect<font color="#E5E5E5"> beach be updates you might be</font>

721
00:30:28,610 --> 00:30:31,310
<font color="#E5E5E5">able to bring the session up but it</font>

722
00:30:29,900 --> 00:30:33,680
could be taking hours and hours and

723
00:30:31,310 --> 00:30:36,010
<font color="#E5E5E5">hours to</font><font color="#CCCCCC"> establish your hundred thirty</font>

724
00:30:33,680 --> 00:30:38,210
thousand prefix feed from<font color="#E5E5E5"> your neighbor</font>

725
00:30:36,010 --> 00:30:41,600
<font color="#E5E5E5">what rate limiting on the dream what</font>

726
00:30:38,210 --> 00:30:45,320
traffic shaping are they do I'm empty

727
00:30:41,600 --> 00:30:47,780
use incorrectly<font color="#E5E5E5"> settle links so make</font>

728
00:30:45,320 --> 00:30:51,740
sure<font color="#CCCCCC"> that</font><font color="#E5E5E5"> path MTU discovery is actually</font>

729
00:30:47,780 --> 00:30:53,960
switched on<font color="#E5E5E5"> I'm not sure what all the</font>

730
00:30:51,740 --> 00:30:55,580
routers do but means<font color="#E5E5E5"> in Cisco IOS is</font>

731
00:30:53,960 --> 00:31:00,710
disabled by default so you<font color="#E5E5E5"> need to</font>

732
00:30:55,580 --> 00:31:02,360
<font color="#CCCCCC">enable that</font><font color="#E5E5E5"> let's see what else</font><font color="#CCCCCC"> for</font><font color="#E5E5E5"> what</font>

733
00:31:00,710 --> 00:31:05,150
if you're<font color="#E5E5E5"> not using HDMI frame relay</font>

734
00:31:02,360 --> 00:31:07,070
links<font color="#E5E5E5"> I don't know if a great deal of</font>

735
00:31:05,150 --> 00:31:08,750
<font color="#E5E5E5">ATM a frame really links still</font><font color="#CCCCCC"> in use</font>

736
00:31:07,070 --> 00:31:11,120
certainly here in<font color="#E5E5E5"> North</font><font color="#CCCCCC"> America</font><font color="#E5E5E5"> but</font>

737
00:31:08,750 --> 00:31:13,750
parts of<font color="#E5E5E5"> the world I visit</font><font color="#CCCCCC"> there used</font>

738
00:31:11,120 --> 00:31:17,149
<font color="#E5E5E5">quite a lot and the still can be issues</font>

739
00:31:13,750 --> 00:31:19,490
<font color="#E5E5E5">there as we know with</font><font color="#CCCCCC"> em to you but if</font>

740
00:31:17,150 --> 00:31:22,820
you're not<font color="#CCCCCC"> using those links</font><font color="#E5E5E5"> well there</font>

741
00:31:19,490 --> 00:31:25,820
<font color="#E5E5E5">could be issues such as faulty</font><font color="#CCCCCC"> muxes bad</font>

742
00:31:22,820 --> 00:31:29,149
connectors<font color="#E5E5E5"> interoperability problems PPP</font>

743
00:31:25,820 --> 00:31:33,620
problems satellite radio<font color="#E5E5E5"> weather</font><font color="#CCCCCC"> and so</font>

744
00:31:29,150 --> 00:31:35,230
on<font color="#CCCCCC"> and sunday on them poor links you can</font>

745
00:31:33,620 --> 00:31:37,669
<font color="#E5E5E5">get small packets</font><font color="#CCCCCC"> through very easily</font>

746
00:31:35,230 --> 00:31:41,840
<font color="#E5E5E5">but the large ones that are needed by</font><font color="#CCCCCC"> be</font>

747
00:31:37,670 --> 00:31:43,540
<font color="#E5E5E5">to be updated</font><font color="#CCCCCC"> probably</font><font color="#E5E5E5"> won't survive</font><font color="#CCCCCC"> so</font>

748
00:31:41,840 --> 00:31:46,310
there could be issues<font color="#E5E5E5"> like</font><font color="#CCCCCC"> that to</font>

749
00:31:43,540 --> 00:31:48,860
trying to send<font color="#CCCCCC"> packets through fog or</font>

750
00:31:46,310 --> 00:31:52,340
snow storms or heavy<font color="#E5E5E5"> rain and that type</font>

751
00:31:48,860 --> 00:31:54,889
of thing but<font color="#CCCCCC"> ping is the type of tool</font>

752
00:31:52,340 --> 00:31:56,350
that's best suited<font color="#CCCCCC"> to troubleshooting</font>

753
00:31:54,890 --> 00:31:58,760
this

754
00:31:56,350 --> 00:32:00,830
okay so<font color="#E5E5E5"> that's pure establishment that</font>

755
00:31:58,760 --> 00:32:02,600
what<font color="#CCCCCC"> what I've described covers most of</font>

756
00:32:00,830 --> 00:32:05,120
<font color="#CCCCCC">the peer establishment problems that</font>

757
00:32:02,600 --> 00:32:07,219
I've come across<font color="#E5E5E5"> most of them all are</font>

758
00:32:05,120 --> 00:32:11,780
some are some of those

759
00:32:07,220 --> 00:32:13,910
what about missing routes<font color="#E5E5E5"> well once this</font>

760
00:32:11,780 --> 00:32:16,160
session has<font color="#CCCCCC"> been established</font><font color="#E5E5E5"> updates or</font>

761
00:32:13,910 --> 00:32:17,840
<font color="#E5E5E5">exchange updates contain all the writing</font>

762
00:32:16,160 --> 00:32:21,650
information<font color="#E5E5E5"> that's passed from BGP</font>

763
00:32:17,840 --> 00:32:24,340
speaker to speaker the router will pass

764
00:32:21,650 --> 00:32:27,320
all the locally known routes and

765
00:32:24,340 --> 00:32:31,490
<font color="#E5E5E5">basically</font><font color="#CCCCCC"> along the advertise</font><font color="#E5E5E5"> its best</font>

766
00:32:27,320 --> 00:32:32,990
path to<font color="#CCCCCC"> advertise the best path</font><font color="#E5E5E5"> once we</font>

767
00:32:31,490 --> 00:32:36,980
once<font color="#CCCCCC"> we've</font><font color="#E5E5E5"> sent everything</font><font color="#CCCCCC"> we know about</font>

768
00:32:32,990 --> 00:32:39,050
we<font color="#E5E5E5"> don't only</font><font color="#CCCCCC"> pass</font><font color="#E5E5E5"> on the updates okay</font>

769
00:32:36,980 --> 00:32:41,450
so after<font color="#E5E5E5"> the</font><font color="#CCCCCC"> initial flood</font><font color="#E5E5E5"> or 130,000</font>

770
00:32:39,050 --> 00:32:45,678
prefixes<font color="#E5E5E5"> or whatever you then only send</font>

771
00:32:41,450 --> 00:32:48,410
updates<font color="#CCCCCC"> onwards</font><font color="#E5E5E5"> to your neighbors best</font>

772
00:32:45,679 --> 00:32:50,830
<font color="#E5E5E5">Panthers receive from ebgp</font><font color="#CCCCCC"> peer and you</font>

773
00:32:48,410 --> 00:32:54,530
advertise that to all peers whether

774
00:32:50,830 --> 00:32:56,960
external or<font color="#CCCCCC"> Intel</font><font color="#E5E5E5"> the best path through</font>

775
00:32:54,530 --> 00:32:59,600
is received from an internal BGP speaker

776
00:32:56,960 --> 00:33:03,080
that's only<font color="#CCCCCC"> either</font><font color="#E5E5E5"> ties to externals</font>

777
00:32:59,600 --> 00:33:05,449
<font color="#E5E5E5">because remember you need a fool ibgp</font>

778
00:33:03,080 --> 00:33:08,030
<font color="#E5E5E5">mesh</font><font color="#CCCCCC"> you don't get an AI BGP speaker</font>

779
00:33:05,450 --> 00:33:10,220
passing a prefix<font color="#E5E5E5"> to another ibgp speaker</font>

780
00:33:08,030 --> 00:33:12,920
<font color="#CCCCCC">okay</font><font color="#E5E5E5"> unless of course you get</font><font color="#CCCCCC"> using</font>

781
00:33:10,220 --> 00:33:14,179
route reflectors<font color="#E5E5E5"> but I'm going</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> assume</font>

782
00:33:12,920 --> 00:33:16,540
for<font color="#E5E5E5"> this that we're not using</font><font color="#CCCCCC"> a route</font>

783
00:33:14,179 --> 00:33:21,679
reflector<font color="#E5E5E5"> and we're not talking about</font>

784
00:33:16,540 --> 00:33:25,850
<font color="#CCCCCC">BGP Confederations either</font><font color="#E5E5E5"> okay so let's</font>

785
00:33:21,679 --> 00:33:28,880
look at these<font color="#E5E5E5"> four first one originating</font>

786
00:33:25,850 --> 00:33:31,969
a route common problem occurs from

787
00:33:28,880 --> 00:33:33,650
putting prefixes into the BGP<font color="#E5E5E5"> table now</font>

788
00:33:31,970 --> 00:33:36,350
routers will run different routing

789
00:33:33,650 --> 00:33:39,550
processes on them<font color="#CCCCCC"> BGP is just one of</font>

790
00:33:36,350 --> 00:33:42,620
them<font color="#E5E5E5"> right you've got</font><font color="#CCCCCC"> OSPF</font><font color="#E5E5E5"> for eius eius</font>

791
00:33:39,550 --> 00:33:44,750
static<font color="#E5E5E5"> writes and all the rest</font><font color="#CCCCCC"> all</font><font color="#E5E5E5"> these</font>

792
00:33:42,620 --> 00:33:48,379
are used<font color="#E5E5E5"> to feed the routing table or</font>

793
00:33:44,750 --> 00:33:50,540
<font color="#E5E5E5">river</font><font color="#CCCCCC"> and then the routing tables used</font>

794
00:33:48,380 --> 00:33:55,910
to build the forwarding<font color="#E5E5E5"> table or the fit</font>

795
00:33:50,540 --> 00:33:57,889
okay so<font color="#E5E5E5"> BGP table is</font><font color="#CCCCCC"> just one of the</font>

796
00:33:55,910 --> 00:33:59,900
tables<font color="#CCCCCC"> and it's the best of all those is</font>

797
00:33:57,890 --> 00:34:02,900
with<font color="#E5E5E5"> what</font><font color="#CCCCCC"> you used</font><font color="#E5E5E5"> to go into the</font>

798
00:33:59,900 --> 00:34:05,210
<font color="#E5E5E5">routing table to put a prefix</font><font color="#CCCCCC"> into BGP</font>

799
00:34:02,900 --> 00:34:07,429
<font color="#E5E5E5">you generally have to make sure the</font>

800
00:34:05,210 --> 00:34:08,639
prefix exists in another<font color="#CCCCCC"> writing process</font>

801
00:34:07,429 --> 00:34:11,450
as well well

802
00:34:08,639 --> 00:34:14,549
static riot<font color="#CCCCCC"> or</font><font color="#E5E5E5"> OSPF or so forth</font>

803
00:34:11,449 --> 00:34:18,268
<font color="#E5E5E5">typically most</font><font color="#CCCCCC"> people do it by having</font><font color="#E5E5E5"> a</font>

804
00:34:14,549 --> 00:34:19,918
static<font color="#E5E5E5"> right pointing to customer that</font>

805
00:34:18,268 --> 00:34:23,158
way you put customer rights into your

806
00:34:19,918 --> 00:34:26,069
ibgp<font color="#E5E5E5"> for prefixes you want to announce</font>

807
00:34:23,159 --> 00:34:27,869
<font color="#E5E5E5">to the</font><font color="#CCCCCC"> Internet at large</font><font color="#E5E5E5"> it's a static</font>

808
00:34:26,069 --> 00:34:30,899
<font color="#CCCCCC">route pointing to a null interface or</font>

809
00:34:27,869 --> 00:34:33,419
any other type interfacing that<font color="#E5E5E5"> will act</font>

810
00:34:30,899 --> 00:34:35,848
as<font color="#CCCCCC"> a</font><font color="#E5E5E5"> pull up to let you generate your</font>

811
00:34:33,418 --> 00:34:40,710
<font color="#CCCCCC">aggregate and announce it to</font><font color="#E5E5E5"> the</font>

812
00:34:35,849 --> 00:34:43,799
<font color="#E5E5E5">internet generally the</font><font color="#CCCCCC"> bgp process will</font>

813
00:34:40,710 --> 00:34:45,869
require<font color="#E5E5E5"> that the prefix</font><font color="#CCCCCC"> sits in</font><font color="#E5E5E5"> another</font>

814
00:34:43,799 --> 00:34:49,668
in the<font color="#CCCCCC"> writing-table</font><font color="#E5E5E5"> before to be</font>

815
00:34:45,869 --> 00:34:53,730
announced<font color="#E5E5E5"> or put into the BGP table</font>

816
00:34:49,668 --> 00:34:56,129
that's quite a<font color="#E5E5E5"> common one</font><font color="#CCCCCC"> to forget and</font>

817
00:34:53,730 --> 00:34:58,230
again<font color="#E5E5E5"> a most my</font><font color="#CCCCCC"> experience is with</font><font color="#E5E5E5"> Cisco</font>

818
00:34:56,129 --> 00:35:00,569
boxes and people will put the<font color="#E5E5E5"> network</font>

819
00:34:58,230 --> 00:35:02,250
statement in for<font color="#E5E5E5"> BGP completely</font>

820
00:35:00,569 --> 00:35:04,529
forgetting that<font color="#E5E5E5"> they need the equivalent</font>

821
00:35:02,250 --> 00:35:06,299
<font color="#E5E5E5">entry in the</font><font color="#CCCCCC"> writing</font><font color="#E5E5E5"> table</font><font color="#CCCCCC"> whether</font><font color="#E5E5E5"> it's</font>

822
00:35:04,529 --> 00:35:08,700
a static<font color="#E5E5E5"> right pumped into the customer</font>

823
00:35:06,299 --> 00:35:11,788
or static right<font color="#E5E5E5"> pointing to the</font><font color="#CCCCCC"> null to</font>

824
00:35:08,700 --> 00:35:15,029
<font color="#E5E5E5">generate the aggregate both what</font><font color="#CCCCCC"> 1 / 2</font>

825
00:35:11,789 --> 00:35:19,109
is essential what<font color="#E5E5E5"> about the update</font>

826
00:35:15,029 --> 00:35:20,970
exchange<font color="#E5E5E5"> missing</font><font color="#CCCCCC"> routes</font><font color="#E5E5E5"> well I never</font>

827
00:35:19,109 --> 00:35:23,519
<font color="#CCCCCC">really saw too many</font><font color="#E5E5E5"> problems on to write</font>

828
00:35:20,970 --> 00:35:27,209
<font color="#CCCCCC">for factors came on the scene it's such</font>

829
00:35:23,519 --> 00:35:28,979
a nice<font color="#E5E5E5"> solution to help scale</font><font color="#CCCCCC"> BGP</font><font color="#E5E5E5"> but</font>

830
00:35:27,210 --> 00:35:30,869
people seem<font color="#CCCCCC"> to enjoy breaking</font><font color="#E5E5E5"> all the</font>

831
00:35:28,980 --> 00:35:32,880
rules<font color="#E5E5E5"> all the</font><font color="#CCCCCC"> time I mean</font><font color="#E5E5E5"> whether it's</font>

832
00:35:30,869 --> 00:35:35,750
through bad documentation or just I

833
00:35:32,880 --> 00:35:37,829
don't know trying to take shortcuts or

834
00:35:35,750 --> 00:35:39,299
believing that route reflectors meant

835
00:35:37,829 --> 00:35:41,819
that there are no more rules at all with

836
00:35:39,299 --> 00:35:44,038
an<font color="#E5E5E5"> eye</font><font color="#CCCCCC"> bgp but there seem to be so many</font>

837
00:35:41,819 --> 00:35:47,339
issues with<font color="#E5E5E5"> route reflectors that people</font>

838
00:35:44,039 --> 00:35:49,829
run<font color="#E5E5E5"> into common issues</font><font color="#CCCCCC"> are</font><font color="#E5E5E5"> koala</font><font color="#CCCCCC"> two of</font>

839
00:35:47,339 --> 00:35:53,900
them as the clashing writer ID and the

840
00:35:49,829 --> 00:35:56,569
clashing cluster ID<font color="#CCCCCC"> here's one example</font>

841
00:35:53,900 --> 00:35:58,920
<font color="#CCCCCC">we've got to route reflector clusters</font>

842
00:35:56,569 --> 00:36:01,109
router<font color="#E5E5E5"> one and three and</font><font color="#CCCCCC"> the first one</font>

843
00:35:58,920 --> 00:36:03,450
router<font color="#E5E5E5"> two and four in</font><font color="#CCCCCC"> the second one</font>

844
00:36:01,109 --> 00:36:04,950
router one is the right reflector and

845
00:36:03,450 --> 00:36:08,430
right to choose the right reflector

846
00:36:04,950 --> 00:36:10,410
<font color="#E5E5E5">respective way for the two clusters</font><font color="#CCCCCC"> not</font>

847
00:36:08,430 --> 00:36:13,529
<font color="#CCCCCC">to</font><font color="#E5E5E5"> force advertising a prefix I've said</font>

848
00:36:10,410 --> 00:36:16,950
<font color="#E5E5E5">Network 7/8 here router</font><font color="#CCCCCC"> 2 has</font><font color="#E5E5E5"> the right</font>

849
00:36:13,529 --> 00:36:18,809
but one and<font color="#E5E5E5"> three do not you know that</font>

850
00:36:16,950 --> 00:36:20,460
<font color="#E5E5E5">causes lots of head-scratching because</font>

851
00:36:18,809 --> 00:36:21,849
people don't understand why<font color="#E5E5E5"> I mean we've</font>

852
00:36:20,460 --> 00:36:25,779
set it all up according<font color="#E5E5E5"> to the man</font>

853
00:36:21,849 --> 00:36:27,400
it's all just<font color="#E5E5E5"> wonderful our one is not</font>

854
00:36:25,779 --> 00:36:29,680
accepting the right to burn our two

855
00:36:27,400 --> 00:36:32,789
<font color="#E5E5E5">senses</font><font color="#CCCCCC"> onwards</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> the reason is usually</font>

856
00:36:29,680 --> 00:36:35,469
something<font color="#E5E5E5"> like the clashing router idea</font>

857
00:36:32,789 --> 00:36:37,150
our one sees<font color="#CCCCCC"> its own right or</font><font color="#E5E5E5"> idea in</font>

858
00:36:35,469 --> 00:36:40,089
the originator attribute and any<font color="#CCCCCC"> receive</font>

859
00:36:37,150 --> 00:36:42,640
prefix<font color="#E5E5E5"> it will reject that prefix if my</font>

860
00:36:40,089 --> 00:36:44,319
<font color="#CCCCCC">router</font><font color="#E5E5E5"> idea is there that means I've</font>

861
00:36:42,640 --> 00:36:46,180
sent the prefix<font color="#CCCCCC"> I'd someone is coming</font>

862
00:36:44,319 --> 00:36:46,479
<font color="#E5E5E5">back to</font><font color="#CCCCCC"> me</font><font color="#E5E5E5"> so I don't</font><font color="#CCCCCC"> want to</font><font color="#E5E5E5"> hear</font><font color="#CCCCCC"> it</font>

863
00:36:46,180 --> 00:36:50,499
again

864
00:36:46,479 --> 00:36:52,078
<font color="#E5E5E5">because I know it's mine okay that's one</font>

865
00:36:50,499 --> 00:36:55,598
<font color="#E5E5E5">of the way it's a riot reflector</font>

866
00:36:52,079 --> 00:36:57,759
attempts<font color="#E5E5E5"> to avoid a writing loop and of</font>

867
00:36:55,599 --> 00:36:59,440
course all you've done is you've set up

868
00:36:57,759 --> 00:37:01,779
<font color="#E5E5E5">a router already</font><font color="#CCCCCC"> in the router factor</font>

869
00:36:59,440 --> 00:37:04,630
<font color="#E5E5E5">and then another write reflector cluster</font>

870
00:37:01,779 --> 00:37:07,839
<font color="#E5E5E5">you set the same writer ID by type or</font>

871
00:37:04,630 --> 00:37:11,199
deliberate<font color="#E5E5E5"> or otherwise more it's most</font>

872
00:37:07,839 --> 00:37:13,119
usually by type or some<font color="#E5E5E5"> people come</font><font color="#CCCCCC"> up</font>

873
00:37:11,199 --> 00:37:15,940
<font color="#E5E5E5">with wonderful strategies to set up</font>

874
00:37:13,119 --> 00:37:19,049
you'll have unique router or ID type

875
00:37:15,940 --> 00:37:22,029
things<font color="#E5E5E5"> across</font><font color="#CCCCCC"> the whole network</font><font color="#E5E5E5"> and I</font>

876
00:37:19,049 --> 00:37:24,519
never<font color="#CCCCCC"> honestly see the point in doing</font>

877
00:37:22,029 --> 00:37:28,690
<font color="#E5E5E5">that all</font><font color="#CCCCCC"> routers will generate the</font>

878
00:37:24,519 --> 00:37:31,238
router ID<font color="#E5E5E5"> automatically it'll get</font><font color="#CCCCCC"> it</font>

879
00:37:28,690 --> 00:37:33,729
from somewhere<font color="#E5E5E5"> it's a unique IP address</font>

880
00:37:31,239 --> 00:37:35,349
IP<font color="#CCCCCC"> addresses are unique so</font><font color="#E5E5E5"> it could be</font>

881
00:37:33,729 --> 00:37:38,319
<font color="#E5E5E5">from a loopback if you're using a</font>

882
00:37:35,349 --> 00:37:40,289
loopback address<font color="#CCCCCC"> parameter</font><font color="#E5E5E5"> or it could</font>

883
00:37:38,319 --> 00:37:43,058
be from<font color="#CCCCCC"> one of the physical interfaces</font>

884
00:37:40,289 --> 00:37:46,390
that's all that's an IP address<font color="#E5E5E5"> the IP</font>

885
00:37:43,059 --> 00:37:49,119
address will be unique so<font color="#CCCCCC"> trying</font><font color="#E5E5E5"> to set</font>

886
00:37:46,390 --> 00:37:52,690
a router ID by hand<font color="#E5E5E5"> I don't really see a</font>

887
00:37:49,119 --> 00:37:54,609
great deal<font color="#E5E5E5"> of sense in</font><font color="#CCCCCC"> that and most of</font>

888
00:37:52,690 --> 00:37:56,529
<font color="#E5E5E5">the problems I've seen in this case come</font>

889
00:37:54,609 --> 00:37:59,529
from where<font color="#E5E5E5"> people will set the router ID</font>

890
00:37:56,529 --> 00:38:01,239
by hand and<font color="#E5E5E5"> people who don't set it by</font>

891
00:37:59,529 --> 00:38:03,009
hand<font color="#CCCCCC"> they</font><font color="#E5E5E5"> just leave the box to do its</font>

892
00:38:01,239 --> 00:38:04,440
own thing<font color="#E5E5E5"> generally don't have</font><font color="#CCCCCC"> this</font>

893
00:38:03,009 --> 00:38:06,880
problem

894
00:38:04,440 --> 00:38:08,789
what about this one router<font color="#CCCCCC"> effector</font>

895
00:38:06,880 --> 00:38:11,349
cluster<font color="#E5E5E5"> you've got to write reflectors</font>

896
00:38:08,789 --> 00:38:13,799
r1 and r2<font color="#E5E5E5"> of the router effector for the</font>

897
00:38:11,349 --> 00:38:17,469
cluster<font color="#CCCCCC"> three</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> four</font><font color="#E5E5E5"> are the clients</font>

898
00:38:13,799 --> 00:38:21,759
<font color="#E5E5E5">our force doing advertising our one and</font>

899
00:38:17,469 --> 00:38:23,529
<font color="#CCCCCC">three do not see the prefix for the same</font>

900
00:38:21,759 --> 00:38:26,019
thing<font color="#E5E5E5"> our one is not accepting the right</font>

901
00:38:23,529 --> 00:38:28,539
<font color="#E5E5E5">when our two sends it on but this time</font>

902
00:38:26,019 --> 00:38:30,149
<font color="#E5E5E5">our one will see its own writer ID in</font>

903
00:38:28,539 --> 00:38:32,880
the cluster ID<font color="#E5E5E5"> so</font>

904
00:38:30,150 --> 00:38:34,650
<font color="#CCCCCC">got</font><font color="#E5E5E5"> clashing cluster ID if you set the</font>

905
00:38:32,880 --> 00:38:37,619
cluster ID the same on to route

906
00:38:34,650 --> 00:38:39,359
reflectors in<font color="#CCCCCC"> the same cluster</font><font color="#E5E5E5"> then each</font>

907
00:38:37,619 --> 00:38:41,579
route reflectors<font color="#E5E5E5"> zooms that you're</font>

908
00:38:39,359 --> 00:38:42,930
<font color="#CCCCCC">running a full mesh from the clients so</font>

909
00:38:41,579 --> 00:38:45,450
each client will appear with<font color="#E5E5E5"> the</font>

910
00:38:42,930 --> 00:38:47,990
attractor factor<font color="#E5E5E5"> but of course I just</font>

911
00:38:45,450 --> 00:38:51,779
<font color="#CCCCCC">move back</font><font color="#E5E5E5"> what people tend to do is</font><font color="#CCCCCC"> just</font>

912
00:38:47,990 --> 00:38:54,029
say<font color="#CCCCCC"> set</font><font color="#E5E5E5"> up client</font><font color="#CCCCCC"> earrings with the</font><font color="#E5E5E5"> red</font>

913
00:38:51,779 --> 00:38:55,859
reflector<font color="#CCCCCC"> that's closest and they end up</font>

914
00:38:54,029 --> 00:39:09,420
<font color="#E5E5E5">with black holes in the network the</font>

915
00:38:55,859 --> 00:39:13,589
<font color="#E5E5E5">situation where you the prefix coming</font>

916
00:39:09,420 --> 00:39:15,510
from are<font color="#E5E5E5"> - okay that's a very common</font>

917
00:39:13,589 --> 00:39:18,119
problem<font color="#CCCCCC"> people trying to set up write</font>

918
00:39:15,510 --> 00:39:20,069
reflectors<font color="#E5E5E5"> this way</font><font color="#CCCCCC"> because some of</font><font color="#E5E5E5"> the</font>

919
00:39:18,119 --> 00:39:22,589
<font color="#E5E5E5">original documentation the way way back</font>

920
00:39:20,069 --> 00:39:25,049
<font color="#E5E5E5">said that the way you get rod reflected</font>

921
00:39:22,589 --> 00:39:28,319
under<font color="#E5E5E5"> redundancy is to put to write</font>

922
00:39:25,049 --> 00:39:29,700
reflectors in<font color="#E5E5E5"> the same cluster and I</font>

923
00:39:28,319 --> 00:39:31,470
mean a lot<font color="#CCCCCC"> of</font><font color="#E5E5E5"> people have done that</font>

924
00:39:29,700 --> 00:39:33,689
<font color="#E5E5E5">quite successfully but then</font><font color="#CCCCCC"> they've been</font>

925
00:39:31,470 --> 00:39:37,078
meticulous about making sure<font color="#CCCCCC"> that each</font>

926
00:39:33,690 --> 00:39:40,230
client<font color="#E5E5E5"> appears with each reflector in</font>

927
00:39:37,079 --> 00:39:42,000
the cluster<font color="#CCCCCC"> and well I've never</font><font color="#E5E5E5"> done</font>

928
00:39:40,230 --> 00:39:43,920
<font color="#CCCCCC">that even from</font><font color="#E5E5E5"> the day that write</font>

929
00:39:42,000 --> 00:39:46,880
reflectors first appeared the way I did

930
00:39:43,920 --> 00:39:49,950
it was overlaid<font color="#E5E5E5"> my</font><font color="#CCCCCC"> ride reflectors to</font>

931
00:39:46,880 --> 00:39:53,190
<font color="#CCCCCC">clusters overlaid one</font><font color="#E5E5E5"> red reflector per</font>

932
00:39:49,950 --> 00:39:56,098
cluster to<font color="#CCCCCC"> foster's</font><font color="#E5E5E5"> pair part of network</font>

933
00:39:53,190 --> 00:39:58,470
<font color="#E5E5E5">and we never we</font><font color="#CCCCCC"> never ever had any</font>

934
00:39:56,099 --> 00:40:00,660
problem like this<font color="#E5E5E5"> at all and this</font>

935
00:39:58,470 --> 00:40:03,959
problem<font color="#CCCCCC"> only really happens when people</font>

936
00:40:00,660 --> 00:40:05,460
forget<font color="#E5E5E5"> to</font><font color="#CCCCCC"> do the full mesh and have dual</font>

937
00:40:03,960 --> 00:40:08,789
redundant bright reflectors in<font color="#CCCCCC"> the</font>

938
00:40:05,460 --> 00:40:10,890
<font color="#E5E5E5">cluster so just don't don't do the</font>

939
00:40:08,789 --> 00:40:12,510
<font color="#CCCCCC">jeweled</font><font color="#E5E5E5"> redundancy like this do it by</font>

940
00:40:10,890 --> 00:40:18,000
the overlay<font color="#E5E5E5"> and</font><font color="#CCCCCC"> you just won't have this</font>

941
00:40:12,510 --> 00:40:19,710
problem<font color="#CCCCCC"> okay filtering you get all</font><font color="#E5E5E5"> sorts</font>

942
00:40:18,000 --> 00:40:23,160
of types of<font color="#E5E5E5"> filters on Rogers especially</font>

943
00:40:19,710 --> 00:40:25,829
for<font color="#CCCCCC"> BGP</font><font color="#E5E5E5"> you can filter by prefix</font><font color="#CCCCCC"> you can</font>

944
00:40:23,160 --> 00:40:29,750
filter<font color="#E5E5E5"> by s path you can filter based on</font>

945
00:40:25,829 --> 00:40:32,309
<font color="#E5E5E5">community also</font><font color="#CCCCCC"> you can also</font><font color="#E5E5E5"> manipulate</font>

946
00:40:29,750 --> 00:40:35,970
attributes and apply policies and so

947
00:40:32,309 --> 00:40:39,839
forth<font color="#CCCCCC"> you can apply this in inbound</font>

948
00:40:35,970 --> 00:40:42,930
<font color="#CCCCCC">outbound and these give all</font><font color="#E5E5E5"> your own</font>

949
00:40:39,839 --> 00:40:45,580
class of problems also

950
00:40:42,930 --> 00:40:47,799
if you<font color="#E5E5E5"> suspect a filtering problem</font><font color="#CCCCCC"> is</font>

951
00:40:45,580 --> 00:40:49,869
good to become<font color="#E5E5E5"> familiar with the router</font>

952
00:40:47,800 --> 00:40:53,830
tools to find out what filters been

953
00:40:49,869 --> 00:40:54,550
applied and how hot tip<font color="#E5E5E5"> don't use cut</font>

954
00:40:53,830 --> 00:40:56,859
and<font color="#CCCCCC"> paste</font>

955
00:40:54,550 --> 00:40:59,650
<font color="#E5E5E5">I know cut and paste is nice and easy in</font>

956
00:40:56,859 --> 00:41:01,060
all the rest<font color="#E5E5E5"> but really it causes so</font>

957
00:40:59,650 --> 00:41:02,920
many problems<font color="#CCCCCC"> in</font><font color="#E5E5E5"> fact I've</font><font color="#CCCCCC"> seen more</font>

958
00:41:01,060 --> 00:41:04,900
problems caused cutting and pasting

959
00:41:02,920 --> 00:41:09,970
trying to diagnose filters than anywhere

960
00:41:04,900 --> 00:41:12,220
else okay<font color="#E5E5E5"> you can have weird effects</font>

961
00:41:09,970 --> 00:41:13,899
from cut and paste buffers what is in

962
00:41:12,220 --> 00:41:17,169
the cut and<font color="#CCCCCC"> paste buffer may not be what</font>

963
00:41:13,900 --> 00:41:18,910
you<font color="#CCCCCC"> put in there you could have problems</font>

964
00:41:17,170 --> 00:41:20,590
<font color="#E5E5E5">on the client on the router in when the</font>

965
00:41:18,910 --> 00:41:22,930
connection<font color="#CCCCCC"> packers get lost to be trying</font>

966
00:41:20,590 --> 00:41:25,480
<font color="#E5E5E5">to cut a whole big configuration</font><font color="#CCCCCC"> and</font>

967
00:41:22,930 --> 00:41:26,649
<font color="#CCCCCC">paste it over</font><font color="#E5E5E5"> a a lossy link where you</font>

968
00:41:25,480 --> 00:41:29,800
<font color="#E5E5E5">might lose bits of it</font>

969
00:41:26,650 --> 00:41:31,560
who knows<font color="#CCCCCC"> meaning that has happened and</font>

970
00:41:29,800 --> 00:41:33,670
<font color="#E5E5E5">that could do weird things to the router</font>

971
00:41:31,560 --> 00:41:35,830
it's generally much better to prepare

972
00:41:33,670 --> 00:41:37,900
<font color="#E5E5E5">your configuration and load it into the</font>

973
00:41:35,830 --> 00:41:43,090
router by some other method<font color="#CCCCCC"> T</font><font color="#E5E5E5"> fdp fdp</font>

974
00:41:37,900 --> 00:41:45,100
<font color="#E5E5E5">whatever typos and regular</font><font color="#CCCCCC"> expressions</font>

975
00:41:43,090 --> 00:41:48,119
as one<font color="#CCCCCC"> of the common problems</font><font color="#E5E5E5"> extra</font>

976
00:41:45,100 --> 00:41:51,339
characters missing characters<font color="#E5E5E5"> whitespace</font>

977
00:41:48,119 --> 00:41:53,619
<font color="#E5E5E5">extra characters is quite common or</font>

978
00:41:51,340 --> 00:41:56,160
getting a<font color="#CCCCCC"> minus in place of a plus or</font>

979
00:41:53,619 --> 00:41:59,650
<font color="#E5E5E5">square bracket in places or of</font><font color="#CCCCCC"> our</font>

980
00:41:56,160 --> 00:42:01,509
curved bracket or whatever<font color="#E5E5E5"> regular</font>

981
00:41:59,650 --> 00:42:04,030
<font color="#CCCCCC">expressions need to be</font><font color="#E5E5E5"> fairly precise</font>

982
00:42:01,510 --> 00:42:05,980
for doing poetry<font color="#E5E5E5"> so if you get them</font>

983
00:42:04,030 --> 00:42:08,859
wrong<font color="#CCCCCC"> it can do really</font><font color="#E5E5E5"> worried the weird</font>

984
00:42:05,980 --> 00:42:10,660
<font color="#CCCCCC">stuff and</font><font color="#E5E5E5"> if you see we strange things</font>

985
00:42:08,859 --> 00:42:12,130
happening<font color="#E5E5E5"> with your bgp filtering with</font>

986
00:42:10,660 --> 00:42:13,540
your<font color="#E5E5E5"> neighbor</font><font color="#CCCCCC"> you're not getting any</font>

987
00:42:12,130 --> 00:42:17,080
prefixes you're getting too many

988
00:42:13,540 --> 00:42:19,150
prefixes it's worth checking your

989
00:42:17,080 --> 00:42:22,590
inbound filters your<font color="#CCCCCC"> i-pad filters</font>

990
00:42:19,150 --> 00:42:22,590
really really carefully

991
00:42:22,740 --> 00:42:29,500
you also get typos and<font color="#E5E5E5"> prefix filters</font>

992
00:42:26,640 --> 00:42:32,259
watch the<font color="#CCCCCC"> Kamat</font><font color="#E5E5E5"> command-line interface</font>

993
00:42:29,500 --> 00:42:34,930
on the router<font color="#E5E5E5"> watch the filter logic if</font>

994
00:42:32,260 --> 00:42:36,790
you need to watch the filter logic<font color="#CCCCCC"> main</font>

995
00:42:34,930 --> 00:42:39,399
<font color="#CCCCCC">obvious obvious as you think</font><font color="#E5E5E5"> and may not</font>

996
00:42:36,790 --> 00:42:41,109
<font color="#E5E5E5">be as</font><font color="#CCCCCC"> simple as the</font><font color="#E5E5E5"> manual says and this</font>

997
00:42:39,400 --> 00:42:45,550
<font color="#E5E5E5">is my favorite watch the net mass</font>

998
00:42:41,109 --> 00:42:49,119
confusion and the 255 right<font color="#E5E5E5"> okay these</font>

999
00:42:45,550 --> 00:42:51,760
days most people<font color="#CCCCCC"> are using mask notation</font>

1000
00:42:49,119 --> 00:42:55,030
for doing prefixes you're doing<font color="#CCCCCC"> Blandy</font>

1001
00:42:51,760 --> 00:42:55,830
<font color="#E5E5E5">biodiverse</font><font color="#CCCCCC"> slash 24 but if you're still</font>

1002
00:42:55,030 --> 00:42:59,580
using<font color="#E5E5E5"> some</font>

1003
00:42:55,830 --> 00:43:01,470
<font color="#CCCCCC">rotation it could be 250 400 200 0 and</font>

1004
00:42:59,580 --> 00:43:04,950
when you're<font color="#E5E5E5"> typing that it can be easy</font>

1005
00:43:01,470 --> 00:43:06,450
<font color="#E5E5E5">to mix up to 55 and</font><font color="#CCCCCC"> 0</font><font color="#E5E5E5"> yes I know</font><font color="#CCCCCC"> they</font>

1006
00:43:04,950 --> 00:43:08,129
sound very<font color="#CCCCCC"> different but</font><font color="#E5E5E5"> you'll be</font>

1007
00:43:06,450 --> 00:43:10,970
amazed how<font color="#CCCCCC"> many problems are caused by</font>

1008
00:43:08,130 --> 00:43:13,770
<font color="#CCCCCC">people mixing up 0 and 255</font>

1009
00:43:10,970 --> 00:43:17,700
<font color="#CCCCCC">alright 2/24 netmask</font><font color="#E5E5E5"> I've seen it quite</font>

1010
00:43:13,770 --> 00:43:21,840
<font color="#CCCCCC">often as 255.255.0.0</font><font color="#E5E5E5"> or even better</font>

1011
00:43:17,700 --> 00:43:26,330
still<font color="#CCCCCC"> 2</font><font color="#E5E5E5"> ver 5.2</font><font color="#CCCCCC"> 2 5 2 0</font><font color="#E5E5E5"> at 0 I don't</font>

1012
00:43:21,840 --> 00:43:26,330
know why but those just simply so common

1013
00:43:26,870 --> 00:43:32,819
people mix those up<font color="#E5E5E5"> all the time and it</font>

1014
00:43:30,420 --> 00:43:34,920
caused so many problems<font color="#E5E5E5"> avoid them by</font>

1015
00:43:32,820 --> 00:43:37,350
<font color="#E5E5E5">using the slash notation</font><font color="#CCCCCC"> the mask</font>

1016
00:43:34,920 --> 00:43:39,090
notation you generally can make less

1017
00:43:37,350 --> 00:43:44,509
errors<font color="#E5E5E5"> doing that make is to make</font>

1018
00:43:39,090 --> 00:43:48,690
<font color="#CCCCCC">mistakes but</font><font color="#E5E5E5"> a lot less communities a</font>

1019
00:43:44,510 --> 00:43:50,640
lot of<font color="#CCCCCC"> is PC using communities</font><font color="#E5E5E5"> but seems</font>

1020
00:43:48,690 --> 00:43:52,640
<font color="#E5E5E5">to be each</font><font color="#CCCCCC"> implementation is different</font>

1021
00:43:50,640 --> 00:43:55,020
defaults for when<font color="#E5E5E5"> communities are sent</font>

1022
00:43:52,640 --> 00:43:58,560
some dots to get sent communities

1023
00:43:55,020 --> 00:44:02,790
between<font color="#E5E5E5"> peers at all</font><font color="#CCCCCC"> Cisco others do for</font>

1024
00:43:58,560 --> 00:44:04,920
ibgp and not for ebgp sensible others do

1025
00:44:02,790 --> 00:44:08,340
for<font color="#CCCCCC"> all BGP peers by default</font>

1026
00:44:04,920 --> 00:44:10,560
hmm you need to understand and watch how

1027
00:44:08,340 --> 00:44:12,930
your implementation actually<font color="#E5E5E5"> handles</font>

1028
00:44:10,560 --> 00:44:14,759
communities especially<font color="#CCCCCC"> if you're mixing</font>

1029
00:44:12,930 --> 00:44:16,649
<font color="#CCCCCC">different brands of router in your</font>

1030
00:44:14,760 --> 00:44:19,080
<font color="#E5E5E5">network you need to make sure they all</font>

1031
00:44:16,650 --> 00:44:21,120
do the<font color="#CCCCCC"> same thing decide what your</font>

1032
00:44:19,080 --> 00:44:23,370
default<font color="#E5E5E5"> should be and then go from there</font>

1033
00:44:21,120 --> 00:44:26,190
don't just say switch ON switch on you

1034
00:44:23,370 --> 00:44:28,589
basic configuration off we go right

1035
00:44:26,190 --> 00:44:30,510
it just makes troubleshooting harder<font color="#CCCCCC"> so</font>

1036
00:44:28,590 --> 00:44:32,400
you<font color="#E5E5E5"> need to try and understand what the</font>

1037
00:44:30,510 --> 00:44:34,560
implicit filtering rules are before you

1038
00:44:32,400 --> 00:44:38,760
try<font color="#E5E5E5"> and work out with them how to solve</font>

1039
00:44:34,560 --> 00:44:41,460
the problems<font color="#E5E5E5"> more on communities each is</font>

1040
00:44:38,760 --> 00:44:43,110
<font color="#CCCCCC">been as different policies never</font><font color="#E5E5E5"> assume</font>

1041
00:44:41,460 --> 00:44:46,290
that<font color="#E5E5E5"> the</font><font color="#CCCCCC"> community</font><font color="#E5E5E5"> exists that your</font>

1042
00:44:43,110 --> 00:44:47,880
peers<font color="#E5E5E5"> will actually use them</font><font color="#CCCCCC"> ok often</font>

1043
00:44:46,290 --> 00:44:51,509
peers were<font color="#E5E5E5"> advertised that we support</font>

1044
00:44:47,880 --> 00:44:54,990
the RFC 1998 style<font color="#E5E5E5"> communities if you've</font>

1045
00:44:51,510 --> 00:44:57,660
seen any of my<font color="#E5E5E5"> other</font><font color="#CCCCCC"> bgp tutorials I</font>

1046
00:44:54,990 --> 00:44:59,220
<font color="#CCCCCC">talked a great length but how</font><font color="#E5E5E5"> I as</font><font color="#CCCCCC"> peers</font>

1047
00:44:57,660 --> 00:45:02,370
around<font color="#E5E5E5"> the world who use communities</font>

1048
00:44:59,220 --> 00:45:05,129
just<font color="#E5E5E5"> because they say they do it's worth</font>

1049
00:45:02,370 --> 00:45:07,620
checking if<font color="#E5E5E5"> you sit down try and figure</font>

1050
00:45:05,130 --> 00:45:08,150
<font color="#CCCCCC">out why you're standing them 5</font><font color="#E5E5E5"> or</font><font color="#CCCCCC"> 6</font>

1051
00:45:07,620 --> 00:45:11,480
different

1052
00:45:08,150 --> 00:45:13,220
<font color="#E5E5E5">is to get them to</font><font color="#CCCCCC"> send you a certain</font>

1053
00:45:11,480 --> 00:45:15,109
group of prefixes and<font color="#E5E5E5"> you're not getting</font>

1054
00:45:13,220 --> 00:45:17,240
them<font color="#E5E5E5"> well there could be a reason</font><font color="#CCCCCC"> for</font>

1055
00:45:15,109 --> 00:45:20,210
<font color="#E5E5E5">that it's worth asking them first</font>

1056
00:45:17,240 --> 00:45:21,879
<font color="#E5E5E5">differentially obeying them and checking</font>

1057
00:45:20,210 --> 00:45:24,200
that they actually are<font color="#E5E5E5"> obeying them</font>

1058
00:45:21,880 --> 00:45:27,770
<font color="#E5E5E5">don't just assume it'll save you a lot</font>

1059
00:45:24,200 --> 00:45:29,960
of time in your<font color="#CCCCCC"> troubleshooting also</font>

1060
00:45:27,770 --> 00:45:31,549
never<font color="#E5E5E5"> assume that your peers will pay</font>

1061
00:45:29,960 --> 00:45:36,160
attention<font color="#CCCCCC"> to the communities you</font><font color="#E5E5E5"> send</font>

1062
00:45:31,549 --> 00:45:36,160
I've called it the no<font color="#E5E5E5"> export problem</font>

1063
00:45:38,500 --> 00:45:43,279
<font color="#CCCCCC">does</font><font color="#E5E5E5"> not mean that your neighbor will</font>

1064
00:45:40,700 --> 00:45:45,649
obey it<font color="#E5E5E5"> when he may have</font><font color="#CCCCCC"> set</font><font color="#E5E5E5"> something</font>

1065
00:45:43,279 --> 00:45:47,750
<font color="#E5E5E5">that says ignore</font><font color="#CCCCCC"> em all communities and</font>

1066
00:45:45,650 --> 00:45:50,569
so if you<font color="#E5E5E5"> send something with a new</font>

1067
00:45:47,750 --> 00:45:51,230
export to your neighbor<font color="#E5E5E5"> and he's saying</font>

1068
00:45:50,569 --> 00:45:53,920
<font color="#CCCCCC">ignore</font><font color="#E5E5E5"> it</font>

1069
00:45:51,230 --> 00:45:58,240
he's gonna<font color="#CCCCCC"> send that prefix everywhere</font>

1070
00:45:53,920 --> 00:46:00,410
<font color="#E5E5E5">okay so it's cooperation not assumption</font>

1071
00:45:58,240 --> 00:46:02,240
<font color="#E5E5E5">how do these all fit into a</font>

1072
00:46:00,410 --> 00:46:04,910
<font color="#E5E5E5">troubleshooting well this is about</font>

1073
00:46:02,240 --> 00:46:06,709
trying<font color="#E5E5E5"> to send prefixes to your</font>

1074
00:46:04,910 --> 00:46:08,299
neighbors<font color="#E5E5E5"> now it could be neighbor</font>

1075
00:46:06,710 --> 00:46:10,490
within your own network if<font color="#E5E5E5"> you use</font>

1076
00:46:08,299 --> 00:46:13,190
communities for filtering within your

1077
00:46:10,490 --> 00:46:15,259
own backbone some ISPs do this they may

1078
00:46:13,190 --> 00:46:17,869
carry<font color="#E5E5E5"> full prefixes</font><font color="#CCCCCC"> in the core</font><font color="#E5E5E5"> and</font>

1079
00:46:15,260 --> 00:46:20,240
<font color="#CCCCCC">maybe just their own prefixes on the</font>

1080
00:46:17,869 --> 00:46:22,250
edge and the use communities to do that

1081
00:46:20,240 --> 00:46:29,328
<font color="#CCCCCC">filtrate I mean we certainly</font><font color="#E5E5E5"> did</font>

1082
00:46:22,250 --> 00:46:31,160
when<font color="#CCCCCC"> would you your net</font><font color="#E5E5E5"> okay so when</font>

1083
00:46:29,329 --> 00:46:33,289
you're trying to<font color="#CCCCCC"> troubleshoot my</font>

1084
00:46:31,160 --> 00:46:34,430
prefixes aren't going places<font color="#E5E5E5"> or arguing</font>

1085
00:46:33,289 --> 00:46:36,890
<font color="#E5E5E5">places when they shouldn't be</font>

1086
00:46:34,430 --> 00:46:38,750
check your communities make sure that

1087
00:46:36,890 --> 00:46:41,180
the<font color="#CCCCCC"> defaults</font><font color="#E5E5E5"> that you've set on your</font>

1088
00:46:38,750 --> 00:46:44,059
router<font color="#E5E5E5"> are actually there or are still</font>

1089
00:46:41,180 --> 00:46:46,009
there when I've seen what<font color="#CCCCCC"> something</font><font color="#E5E5E5"> from</font>

1090
00:46:44,059 --> 00:46:48,289
Cisco point of view<font color="#E5E5E5"> the sand community</font>

1091
00:46:46,010 --> 00:46:50,630
directive disappear from configurations

1092
00:46:48,289 --> 00:46:52,460
magically<font color="#E5E5E5"> and muninn oh I didn't touch</font>

1093
00:46:50,630 --> 00:46:54,529
the writer but<font color="#E5E5E5"> you know</font><font color="#CCCCCC"> somebody's</font>

1094
00:46:52,460 --> 00:46:57,650
<font color="#E5E5E5">logged in and done something by mistake</font>

1095
00:46:54,529 --> 00:46:59,779
<font color="#E5E5E5">and have forgotten all the commands as</font>

1096
00:46:57,650 --> 00:47:02,089
they backed out<font color="#E5E5E5"> of it the</font><font color="#CCCCCC"> magic</font><font color="#E5E5E5"> send</font>

1097
00:46:59,779 --> 00:47:03,650
community that<font color="#E5E5E5"> forgotten</font><font color="#CCCCCC"> geo communities</font>

1098
00:47:02,089 --> 00:47:04,038
not sent<font color="#E5E5E5"> to your neighbor so your</font>

1099
00:47:03,650 --> 00:47:08,180
neighbor

1100
00:47:04,039 --> 00:47:13,170
I<font color="#CCCCCC"> cannot</font><font color="#E5E5E5"> apply any policy at all what</font>

1101
00:47:08,180 --> 00:47:15,460
you were<font color="#E5E5E5"> hoping to do okay</font>

1102
00:47:13,170 --> 00:47:17,380
so what you want to<font color="#E5E5E5"> do is try and</font><font color="#CCCCCC"> make</font>

1103
00:47:15,460 --> 00:47:20,020
and then stay with<font color="#E5E5E5"> some simple policy</font>

1104
00:47:17,380 --> 00:47:22,240
rules<font color="#CCCCCC"> most implementation of</font><font color="#E5E5E5"> particular</font>

1105
00:47:20,020 --> 00:47:25,500
rules for filtering prefixes<font color="#CCCCCC"> airs paths</font>

1106
00:47:22,240 --> 00:47:29,919
and manipulating<font color="#CCCCCC"> bgp attributes</font><font color="#E5E5E5"> and yes</font>

1107
00:47:25,500 --> 00:47:32,560
they can<font color="#E5E5E5"> get really complex situations</font>

1108
00:47:29,920 --> 00:47:34,540
in an iOS<font color="#E5E5E5"> right maps can be very very</font>

1109
00:47:32,560 --> 00:47:37,000
complex<font color="#CCCCCC"> certainly with some of the</font><font color="#E5E5E5"> newer</font>

1110
00:47:34,540 --> 00:47:38,619
<font color="#E5E5E5">features have been added in there you</font>

1111
00:47:37,000 --> 00:47:39,160
can tie yourself in knots very very

1112
00:47:38,619 --> 00:47:41,200
easily

1113
00:47:39,160 --> 00:47:42,910
I've seen<font color="#E5E5E5"> people do that another</font>

1114
00:47:41,200 --> 00:47:45,520
<font color="#E5E5E5">implementation</font><font color="#CCCCCC"> stall it's very</font><font color="#E5E5E5"> very</font>

1115
00:47:42,910 --> 00:47:47,560
powerful<font color="#CCCCCC"> policy language</font><font color="#E5E5E5"> and if you're</font>

1116
00:47:45,520 --> 00:47:49,750
using a policy language<font color="#E5E5E5"> to apply policy</font>

1117
00:47:47,560 --> 00:47:52,150
as well<font color="#E5E5E5"> as doing filtering you can get</font>

1118
00:47:49,750 --> 00:47:53,710
some really amazing things<font color="#E5E5E5"> happen so</font>

1119
00:47:52,150 --> 00:47:56,290
when you're designing your policy at

1120
00:47:53,710 --> 00:48:03,270
your<font color="#E5E5E5"> setup try and set</font><font color="#CCCCCC"> up simple rules</font>

1121
00:47:56,290 --> 00:48:07,599
and stick to those<font color="#CCCCCC"> ok ibgp mesh problems</font>

1122
00:48:03,270 --> 00:48:10,150
well here's here's one example<font color="#E5E5E5"> customer</font>

1123
00:48:07,599 --> 00:48:11,770
<font color="#CCCCCC">complaints but patch</font><font color="#E5E5E5"> internet access you</font>

1124
00:48:10,150 --> 00:48:15,339
can<font color="#E5E5E5"> reach some parts of the internet but</font>

1125
00:48:11,770 --> 00:48:17,980
<font color="#E5E5E5">not others</font><font color="#CCCCCC"> ok you can get</font><font color="#E5E5E5"> to some of</font>

1126
00:48:15,339 --> 00:48:19,839
<font color="#E5E5E5">your</font><font color="#CCCCCC"> backbone but all of your backbone</font>

1127
00:48:17,980 --> 00:48:22,210
<font color="#CCCCCC">you can get to some of them</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> met but</font>

1128
00:48:19,839 --> 00:48:22,990
not all<font color="#CCCCCC"> of them to net</font><font color="#E5E5E5"> when you see</font>

1129
00:48:22,210 --> 00:48:25,180
things<font color="#E5E5E5"> like that</font>

1130
00:48:22,990 --> 00:48:27,549
<font color="#CCCCCC">movies completely but poor performance</font>

1131
00:48:25,180 --> 00:48:30,250
that's nothing to do with<font color="#CCCCCC"> EGP usually</font>

1132
00:48:27,550 --> 00:48:32,470
but just<font color="#E5E5E5"> complaining about or we can get</font>

1133
00:48:30,250 --> 00:48:34,900
to half of Europe and<font color="#E5E5E5"> you can only see</font>

1134
00:48:32,470 --> 00:48:35,470
your West Coast<font color="#E5E5E5"> operation</font><font color="#CCCCCC"> or nothing in</font>

1135
00:48:34,900 --> 00:48:37,900
the<font color="#CCCCCC"> east</font>

1136
00:48:35,470 --> 00:48:40,118
you should try and<font color="#E5E5E5"> start suspecting ibgp</font>

1137
00:48:37,900 --> 00:48:42,369
problems<font color="#CCCCCC"> I mean</font><font color="#E5E5E5"> if you see nothing wrong</font>

1138
00:48:40,119 --> 00:48:44,800
with<font color="#CCCCCC"> your network otherwise try and</font>

1139
00:48:42,369 --> 00:48:47,619
suspect<font color="#E5E5E5"> an ibgp problem it's more than</font>

1140
00:48:44,800 --> 00:48:57,609
likely to be that<font color="#E5E5E5"> in this case here the</font>

1141
00:48:47,619 --> 00:49:02,170
customers<font color="#E5E5E5"> connected to</font><font color="#CCCCCC"> r1 cs3 but you</font>

1142
00:48:57,609 --> 00:49:03,940
can't see<font color="#CCCCCC"> s2 it also complains about</font><font color="#E5E5E5"> not</font>

1143
00:49:02,170 --> 00:49:06,520
being able to see sites<font color="#E5E5E5"> connected to our</font>

1144
00:49:03,940 --> 00:49:10,780
<font color="#CCCCCC">five so you can see bits in your</font><font color="#E5E5E5"> back</font>

1145
00:49:06,520 --> 00:49:11,259
book most of your backbone<font color="#E5E5E5"> but not all</font>

1146
00:49:10,780 --> 00:49:13,210
of<font color="#E5E5E5"> it</font>

1147
00:49:11,260 --> 00:49:15,490
and of course<font color="#E5E5E5"> typically you get no</font>

1148
00:49:13,210 --> 00:49:17,109
complaints<font color="#E5E5E5"> from other customers because</font>

1149
00:49:15,490 --> 00:49:18,669
this<font color="#CCCCCC"> is your really fussy customer who</font>

1150
00:49:17,109 --> 00:49:21,640
measures connectivity to your<font color="#CCCCCC"> entire</font>

1151
00:49:18,670 --> 00:49:23,260
backbone every 30 seconds and sends you

1152
00:49:21,640 --> 00:49:25,420
emails when it breaks

1153
00:49:23,260 --> 00:49:26,920
and<font color="#CCCCCC"> if</font><font color="#E5E5E5"> everybody else's like now your</font>

1154
00:49:25,420 --> 00:49:30,820
Internet's broken again<font color="#CCCCCC"> in the good way</font>

1155
00:49:26,920 --> 00:49:32,200
<font color="#E5E5E5">and make a coffee but so</font><font color="#CCCCCC"> ok</font><font color="#E5E5E5"> no</font>

1156
00:49:30,820 --> 00:49:36,340
complaints from other<font color="#CCCCCC"> customers just</font>

1157
00:49:32,200 --> 00:49:39,189
this one<font color="#E5E5E5"> this is like</font><font color="#CCCCCC"> 90%</font><font color="#E5E5E5"> the time this</font>

1158
00:49:36,340 --> 00:49:43,030
<font color="#CCCCCC">is an</font><font color="#E5E5E5"> ibgp problem</font><font color="#CCCCCC"> sat</font><font color="#E5E5E5"> certainly in my</font>

1159
00:49:39,190 --> 00:49:46,450
own<font color="#E5E5E5"> experience the</font><font color="#CCCCCC"> full mesh isn't</font>

1160
00:49:43,030 --> 00:49:49,030
complete that's<font color="#E5E5E5"> the problem if you look</font>

1161
00:49:46,450 --> 00:49:52,480
at it<font color="#E5E5E5"> customers connected to</font><font color="#CCCCCC"> r1</font><font color="#E5E5E5"> if you</font>

1162
00:49:49,030 --> 00:49:55,720
can't see a s2 or s2<font color="#CCCCCC"> is connected to</font>

1163
00:49:52,480 --> 00:49:57,820
router<font color="#E5E5E5"> 3 well that means router 3</font>

1164
00:49:55,720 --> 00:50:00,879
somehow not passing writing<font color="#CCCCCC"> information</font>

1165
00:49:57,820 --> 00:50:03,460
about a s2 to router 1<font color="#E5E5E5"> let's think about</font>

1166
00:50:00,880 --> 00:50:06,040
the customer connected to<font color="#E5E5E5"> Roger 1 you</font>

1167
00:50:03,460 --> 00:50:08,290
can't see<font color="#CCCCCC"> tuesday's got no right</font>

1168
00:50:06,040 --> 00:50:10,690
<font color="#CCCCCC">information that gets them through to</font><font color="#E5E5E5"> a</font>

1169
00:50:08,290 --> 00:50:15,790
s2<font color="#CCCCCC"> you just no</font><font color="#E5E5E5"> idea how to get to</font>

1170
00:50:10,690 --> 00:50:17,920
<font color="#E5E5E5">network 10.10</font><font color="#CCCCCC"> / 24 ok so there's a</font>

1171
00:50:15,790 --> 00:50:19,380
problem<font color="#E5E5E5"> running between router 3 and</font>

1172
00:50:17,920 --> 00:50:22,480
writer<font color="#E5E5E5"> 1</font>

1173
00:50:19,380 --> 00:50:25,330
you also can't see<font color="#CCCCCC"> r5</font><font color="#E5E5E5"> our customers</font>

1174
00:50:22,480 --> 00:50:26,980
<font color="#E5E5E5">connected to</font><font color="#CCCCCC"> R 5 so R 5 is</font><font color="#E5E5E5"> somewhere not</font>

1175
00:50:25,330 --> 00:50:29,560
passing writing<font color="#CCCCCC"> information</font><font color="#E5E5E5"> about sites</font>

1176
00:50:26,980 --> 00:50:32,859
<font color="#E5E5E5">connected to our to</font><font color="#CCCCCC"> our file but</font><font color="#E5E5E5"> you can</font>

1177
00:50:29,560 --> 00:50:35,710
see the rest of<font color="#E5E5E5"> the internet so the ibgp</font>

1178
00:50:32,859 --> 00:50:38,170
<font color="#E5E5E5">is working everywhere else so</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> not</font>

1179
00:50:35,710 --> 00:50:41,080
<font color="#CCCCCC">that this prefix isn't being injected</font>

1180
00:50:38,170 --> 00:50:42,970
into the ibgp properly<font color="#E5E5E5"> that's not the</font>

1181
00:50:41,080 --> 00:50:46,690
problem is not<font color="#CCCCCC"> but where he is connected</font>

1182
00:50:42,970 --> 00:50:49,419
<font color="#CCCCCC">to is how his router is connecting to or</font>

1183
00:50:46,690 --> 00:50:52,619
there is that router he connects to<font color="#CCCCCC"> it</font>

1184
00:50:49,420 --> 00:50:55,119
is connecting with<font color="#CCCCCC"> in your own</font><font color="#E5E5E5"> backbone</font>

1185
00:50:52,619 --> 00:50:58,060
<font color="#E5E5E5">so when you're</font><font color="#CCCCCC"> using a full mesh ibgp</font>

1186
00:50:55,119 --> 00:51:00,760
<font color="#E5E5E5">check on every</font><font color="#CCCCCC"> ibgp</font><font color="#E5E5E5"> speaker that it has</font>

1187
00:50:58,060 --> 00:51:02,770
a neighbor relationship<font color="#E5E5E5"> if you've got</font><font color="#CCCCCC"> 10</font>

1188
00:51:00,760 --> 00:51:06,190
<font color="#E5E5E5">writers in your network you'll have 9</font>

1189
00:51:02,770 --> 00:51:09,040
ibgp neighbors hundred routers will have

1190
00:51:06,190 --> 00:51:11,740
99<font color="#CCCCCC"> ok when you get start</font><font color="#E5E5E5"> get to the</font>

1191
00:51:09,040 --> 00:51:13,690
extent of 100 ryos 99 ibgp neighbors

1192
00:51:11,740 --> 00:51:17,140
<font color="#E5E5E5">that's a lot of counting that you have</font>

1193
00:51:13,690 --> 00:51:18,670
to get to try and do but the<font color="#E5E5E5"> point is</font>

1194
00:51:17,140 --> 00:51:22,509
when you have a large<font color="#CCCCCC"> number</font>

1195
00:51:18,670 --> 00:51:24,310
it's easy to miss one especially if you

1196
00:51:22,510 --> 00:51:25,990
<font color="#CCCCCC">just have got a random</font><font color="#E5E5E5"> numbering scheme</font>

1197
00:51:24,310 --> 00:51:28,840
for<font color="#E5E5E5"> all your</font><font color="#CCCCCC"> neighbors if you're using</font>

1198
00:51:25,990 --> 00:51:30,729
loopback<font color="#CCCCCC"> I</font><font color="#E5E5E5"> Beach ppm clean nuke bags you</font>

1199
00:51:28,840 --> 00:51:32,530
number them<font color="#E5E5E5"> all sequentially you can</font>

1200
00:51:30,730 --> 00:51:34,570
usually spot<font color="#E5E5E5"> when</font><font color="#CCCCCC"> ones missing</font>

1201
00:51:32,530 --> 00:51:38,860
it's very easy<font color="#CCCCCC"> just</font><font color="#E5E5E5"> count</font><font color="#CCCCCC"> from</font><font color="#E5E5E5"> 1 through</font>

1202
00:51:34,570 --> 00:51:40,390
<font color="#CCCCCC">200</font><font color="#E5E5E5"> and if anything apart from you your</font>

1203
00:51:38,860 --> 00:51:43,570
<font color="#E5E5E5">local router is missing then you know</font>

1204
00:51:40,390 --> 00:51:45,100
you've<font color="#E5E5E5"> got a problem</font><font color="#CCCCCC"> okay so in an</font>

1205
00:51:43,570 --> 00:51:47,050
example<font color="#CCCCCC"> here what was wrong was the</font>

1206
00:51:45,100 --> 00:51:49,870
peering with<font color="#E5E5E5"> our three speeding with our</font>

1207
00:51:47,050 --> 00:51:54,850
<font color="#E5E5E5">one was actually down it was listed as</font>

1208
00:51:49,870 --> 00:51:56,890
as<font color="#E5E5E5"> down through sewers through some kind</font>

1209
00:51:54,850 --> 00:51:58,390
<font color="#E5E5E5">of</font><font color="#CCCCCC"> miss configuration</font><font color="#E5E5E5"> and you can go</font>

1210
00:51:56,890 --> 00:52:00,640
<font color="#E5E5E5">back</font><font color="#CCCCCC"> to the early troubleshooting the</font>

1211
00:51:58,390 --> 00:52:04,330
dish<font color="#CCCCCC"> I did at the</font><font color="#E5E5E5"> start to</font><font color="#CCCCCC"> show you what</font>

1212
00:52:00,640 --> 00:52:06,640
<font color="#CCCCCC">that miss configuration</font><font color="#E5E5E5"> could be and of</font>

1213
00:52:04,330 --> 00:52:08,470
course router vendors<font color="#CCCCCC"> have quite kindly</font>

1214
00:52:06,640 --> 00:52:11,140
given you configuration<font color="#E5E5E5"> shorthand to</font>

1215
00:52:08,470 --> 00:52:14,410
make it easy<font color="#E5E5E5"> for example in iOS</font>

1216
00:52:11,140 --> 00:52:17,109
you've got<font color="#CCCCCC"> peer groups or peer templates</font>

1217
00:52:14,410 --> 00:52:18,850
<font color="#E5E5E5">and that makes it it gives</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> shorthand</font>

1218
00:52:17,110 --> 00:52:21,010
<font color="#E5E5E5">and there's like yeah</font><font color="#CCCCCC"> that makes things</font>

1219
00:52:18,850 --> 00:52:23,980
<font color="#E5E5E5">work a lot</font><font color="#CCCCCC"> faster but you</font><font color="#E5E5E5"> can also get</font>

1220
00:52:21,010 --> 00:52:25,590
mistakes with those as well<font color="#E5E5E5"> and when</font>

1221
00:52:23,980 --> 00:52:28,450
you're<font color="#CCCCCC"> talking about setting up ibgp</font>

1222
00:52:25,590 --> 00:52:31,720
<font color="#E5E5E5">some people do a core ibgp and then an</font>

1223
00:52:28,450 --> 00:52:35,140
aggregation edge ibgp<font color="#E5E5E5"> so you've got</font>

1224
00:52:31,720 --> 00:52:36,339
maybe two different<font color="#CCCCCC"> peer groups</font><font color="#E5E5E5"> and of</font>

1225
00:52:35,140 --> 00:52:38,529
course you could apply the wrong peer

1226
00:52:36,340 --> 00:52:39,730
group to the wrong neighbor<font color="#CCCCCC"> and you may</font>

1227
00:52:38,530 --> 00:52:43,870
<font color="#CCCCCC">even use peer groups through</font><font color="#E5E5E5"> your</font>

1228
00:52:39,730 --> 00:52:46,300
external<font color="#CCCCCC"> bgp</font><font color="#E5E5E5"> and you may call</font><font color="#CCCCCC"> 1tb GPP</font>

1229
00:52:43,870 --> 00:52:48,490
another one<font color="#E5E5E5"> i bgp peer and you made</font>

1230
00:52:46,300 --> 00:52:50,230
<font color="#CCCCCC">typos the names you actually end up</font>

1231
00:52:48,490 --> 00:52:51,910
using<font color="#E5E5E5"> the wrong peer group and</font><font color="#CCCCCC"> get</font>

1232
00:52:50,230 --> 00:52:54,700
completely<font color="#E5E5E5"> different result from what</font>

1233
00:52:51,910 --> 00:52:57,069
you're expecting so see the more

1234
00:52:54,700 --> 00:52:58,540
shorthand that<font color="#E5E5E5"> is there again you've</font><font color="#CCCCCC"> got</font>

1235
00:52:57,070 --> 00:53:00,910
the potential for<font color="#E5E5E5"> different mistakes</font>

1236
00:52:58,540 --> 00:53:03,100
happening so when you're setting<font color="#CCCCCC"> up</font><font color="#E5E5E5"> your</font>

1237
00:53:00,910 --> 00:53:05,410
ibgp<font color="#CCCCCC"> mesh it's worth checking very very</font>

1238
00:53:03,100 --> 00:53:07,480
carefully<font color="#E5E5E5"> that all the pairings are up</font>

1239
00:53:05,410 --> 00:53:11,009
that you're using the<font color="#E5E5E5"> correct names the</font>

1240
00:53:07,480 --> 00:53:11,010
peer groups and so<font color="#CCCCCC"> forth</font>

1241
00:53:11,770 --> 00:53:17,230
so<font color="#CCCCCC"> say use configuration shorthand for</font>

1242
00:53:14,710 --> 00:53:19,170
efficiency and it helps you avoid<font color="#E5E5E5"> making</font>

1243
00:53:17,230 --> 00:53:21,580
policy errors<font color="#E5E5E5"> with an</font><font color="#CCCCCC"> eye bgp mesh</font>

1244
00:53:19,170 --> 00:53:23,770
suddenly for a large<font color="#E5E5E5"> number of peers is</font>

1245
00:53:21,580 --> 00:53:27,190
a tidier configuration if you can use

1246
00:53:23,770 --> 00:53:28,810
any shorthand<font color="#E5E5E5"> but of course be</font><font color="#CCCCCC"> careful</font>

1247
00:53:27,190 --> 00:53:33,250
that you<font color="#E5E5E5"> don't introduce typos</font><font color="#CCCCCC"> and these</font>

1248
00:53:28,810 --> 00:53:34,750
subroutines<font color="#E5E5E5"> themselves this is why</font>

1249
00:53:33,250 --> 00:53:37,270
<font color="#CCCCCC">people tend</font><font color="#E5E5E5"> to use route reflectors</font>

1250
00:53:34,750 --> 00:53:40,360
these days<font color="#E5E5E5"> rather than driving a huge</font>

1251
00:53:37,270 --> 00:53:42,220
ibgp mesh<font color="#E5E5E5"> we start splitting our network</font>

1252
00:53:40,360 --> 00:53:44,740
up into<font color="#E5E5E5"> lots of red reflector clusters</font>

1253
00:53:42,220 --> 00:53:48,129
<font color="#E5E5E5">and that helps with trying to keep</font><font color="#CCCCCC"> the</font>

1254
00:53:44,740 --> 00:53:51,399
number of ibgp peers on each router down

1255
00:53:48,130 --> 00:53:54,310
to<font color="#E5E5E5"> minimum then of course stick to the</font>

1256
00:53:51,400 --> 00:53:57,010
right reflector rules<font color="#E5E5E5"> keep them all nice</font>

1257
00:53:54,310 --> 00:53:59,890
and simple don't go for complex setups

1258
00:53:57,010 --> 00:54:02,050
and situations they'll say here changing

1259
00:53:59,890 --> 00:54:04,210
defaults and ignorant<font color="#E5E5E5"> ignoring the best</font>

1260
00:54:02,050 --> 00:54:07,720
<font color="#CCCCCC">pattern practice techniques just</font>

1261
00:54:04,210 --> 00:54:09,610
introduces complexity<font color="#E5E5E5"> the thing has been</font>

1262
00:54:07,720 --> 00:54:11,919
said<font color="#CCCCCC"> here for years and</font><font color="#E5E5E5"> years keep it</font>

1263
00:54:09,610 --> 00:54:13,450
<font color="#E5E5E5">simple right if you try and keep</font>

1264
00:54:11,920 --> 00:54:15,250
everything<font color="#E5E5E5"> as simple as</font><font color="#CCCCCC"> possible</font>

1265
00:54:13,450 --> 00:54:18,450
it makes your<font color="#CCCCCC"> troubleshooting</font><font color="#E5E5E5"> much much</font>

1266
00:54:15,250 --> 00:54:22,900
easier<font color="#E5E5E5"> so these are some of</font><font color="#CCCCCC"> the common</font>

1267
00:54:18,450 --> 00:54:26,500
situations<font color="#CCCCCC"> that you can get with missing</font>

1268
00:54:22,900 --> 00:54:30,700
routes<font color="#CCCCCC"> ok</font><font color="#E5E5E5"> inconsistent route</font><font color="#CCCCCC"> selection</font>

1269
00:54:26,500 --> 00:54:33,630
<font color="#E5E5E5">or the routers got it wrong honest well</font>

1270
00:54:30,700 --> 00:54:35,410
for two common problems right selections

1271
00:54:33,630 --> 00:54:37,630
inconsistency in other words the router

1272
00:54:35,410 --> 00:54:41,140
<font color="#E5E5E5">makes it to suit different gives a</font>

1273
00:54:37,630 --> 00:54:43,330
different best path every time or it

1274
00:54:41,140 --> 00:54:45,390
<font color="#CCCCCC">just makes a mistake then you're you're</font>

1275
00:54:43,330 --> 00:54:49,420
<font color="#CCCCCC">determined the routers got it wrong</font>

1276
00:54:45,390 --> 00:54:54,190
well<font color="#E5E5E5"> RFC 1771</font><font color="#CCCCCC"> is still the standard the</font>

1277
00:54:49,420 --> 00:54:55,990
<font color="#E5E5E5">BGP standard when the the new RFC</font><font color="#CCCCCC"> is</font>

1278
00:54:54,190 --> 00:55:00,250
like<font color="#E5E5E5"> also close</font><font color="#CCCCCC"> to actually appearing</font>

1279
00:54:55,990 --> 00:55:01,899
was in draft 21 or somewhere now<font color="#CCCCCC"> but the</font>

1280
00:55:00,250 --> 00:55:06,150
thing is decision<font color="#E5E5E5"> algorithm kind of</font>

1281
00:55:01,900 --> 00:55:08,440
appeared before<font color="#CCCCCC"> BGP was really used</font>

1282
00:55:06,150 --> 00:55:08,980
<font color="#E5E5E5">Tillich's</font><font color="#CCCCCC"> BOM to</font><font color="#E5E5E5"> the extent</font><font color="#CCCCCC"> that's</font><font color="#E5E5E5"> being</font>

1283
00:55:08,440 --> 00:55:10,869
<font color="#E5E5E5">used today</font>

1284
00:55:08,980 --> 00:55:13,000
that's a<font color="#E5E5E5"> stupid comment but obviously</font>

1285
00:55:10,869 --> 00:55:14,350
<font color="#E5E5E5">the standard has to start somewhere</font><font color="#CCCCCC"> but</font>

1286
00:55:13,000 --> 00:55:16,180
we've gained a lot<font color="#E5E5E5"> of operational</font>

1287
00:55:14,350 --> 00:55:18,759
<font color="#CCCCCC">experience and</font><font color="#E5E5E5"> since it first</font><font color="#CCCCCC"> appeared</font>

1288
00:55:16,180 --> 00:55:20,049
<font color="#E5E5E5">and of course every vendor has taken all</font>

1289
00:55:18,760 --> 00:55:22,819
this experience that got from the

1290
00:55:20,050 --> 00:55:25,279
customers<font color="#CCCCCC"> and tweaked the algorithm</font>

1291
00:55:22,819 --> 00:55:27,349
and all these tweaks<font color="#CCCCCC"> can lead to</font>

1292
00:55:25,279 --> 00:55:28,969
interesting interoperability<font color="#E5E5E5"> ISM and so</font>

1293
00:55:27,349 --> 00:55:34,400
forth<font color="#CCCCCC"> because each</font><font color="#E5E5E5"> tweak is</font><font color="#CCCCCC"> slightly</font>

1294
00:55:28,969 --> 00:55:37,249
<font color="#CCCCCC">different for example</font><font color="#E5E5E5"> the RFC says that</font>

1295
00:55:34,400 --> 00:55:39,229
the meed is not always compared and<font color="#E5E5E5"> as a</font>

1296
00:55:37,249 --> 00:55:41,149
result the ordering of<font color="#E5E5E5"> the paths can</font>

1297
00:55:39,229 --> 00:55:43,939
affect the decision process<font color="#E5E5E5"> for example</font>

1298
00:55:41,150 --> 00:55:46,549
<font color="#CCCCCC">the default in iOS is to compare the</font>

1299
00:55:43,939 --> 00:55:47,928
prefixes in<font color="#E5E5E5"> order of</font><font color="#CCCCCC"> arrival well the</font>

1300
00:55:46,549 --> 00:55:50,809
RFC didn't see anything<font color="#E5E5E5"> else</font>

1301
00:55:47,929 --> 00:55:53,719
so<font color="#CCCCCC"> what do</font><font color="#E5E5E5"> we do so we just compare them</font>

1302
00:55:50,809 --> 00:55:56,779
<font color="#E5E5E5">in the</font><font color="#CCCCCC"> order of arrival the most recent</font>

1303
00:55:53,719 --> 00:55:59,029
to the oldest<font color="#E5E5E5"> and of course this will</font>

1304
00:55:56,779 --> 00:56:01,729
result an inconsistent path selection<font color="#E5E5E5"> if</font>

1305
00:55:59,029 --> 00:56:03,799
you reset<font color="#CCCCCC"> Abby to be</font><font color="#E5E5E5"> peering then the</font>

1306
00:56:01,729 --> 00:56:05,718
prefixes<font color="#CCCCCC"> arrived from the</font><font color="#E5E5E5"> reset period</font>

1307
00:56:03,799 --> 00:56:08,449
become the newest and then<font color="#E5E5E5"> your best</font>

1308
00:56:05,719 --> 00:56:11,299
<font color="#E5E5E5">path may change pretty much will</font><font color="#CCCCCC"> change</font>

1309
00:56:08,449 --> 00:56:12,859
<font color="#CCCCCC">and</font><font color="#E5E5E5"> so something is</font><font color="#CCCCCC"> bees</font><font color="#E5E5E5"> have got large</font>

1310
00:56:11,299 --> 00:56:15,049
numbers of connections<font color="#CCCCCC"> between them</font>

1311
00:56:12,859 --> 00:56:15,439
<font color="#E5E5E5">they'll see the best exit possible</font>

1312
00:56:15,049 --> 00:56:17,779
<font color="#CCCCCC">whoops</font>

1313
00:56:15,439 --> 00:56:20,149
the<font color="#E5E5E5"> best exit go from here to there to</font>

1314
00:56:17,779 --> 00:56:22,549
<font color="#E5E5E5">there back to here depending on where</font>

1315
00:56:20,150 --> 00:56:26,150
they did the maintenance which is highly

1316
00:56:22,549 --> 00:56:29,179
annoying<font color="#E5E5E5"> because</font><font color="#CCCCCC"> the symptom is that the</font>

1317
00:56:26,150 --> 00:56:31,519
best<font color="#E5E5E5"> path changes every time and no it's</font>

1318
00:56:29,179 --> 00:56:37,009
<font color="#E5E5E5">not a bug it's just well that's what the</font>

1319
00:56:31,519 --> 00:56:39,229
implementation<font color="#E5E5E5"> does and yes it can cause</font>

1320
00:56:37,009 --> 00:56:41,449
problems<font color="#E5E5E5"> routing loops convergence loops</font>

1321
00:56:39,229 --> 00:56:43,609
changes and traffic<font color="#CCCCCC"> patterns</font><font color="#E5E5E5"> the latter</font>

1322
00:56:41,449 --> 00:56:45,650
is probably the most annoying one<font color="#E5E5E5"> for</font>

1323
00:56:43,609 --> 00:56:46,159
<font color="#E5E5E5">people and if you've never seen this</font>

1324
00:56:45,650 --> 00:56:48,109
before

1325
00:56:46,159 --> 00:56:50,179
I mean you just have sleepless<font color="#E5E5E5"> nights</font>

1326
00:56:48,109 --> 00:56:53,359
and<font color="#E5E5E5"> days and nights and even more days</font>

1327
00:56:50,179 --> 00:56:55,699
trying to<font color="#E5E5E5"> figure</font><font color="#CCCCCC"> out</font><font color="#E5E5E5"> what it is but in</font>

1328
00:56:53,359 --> 00:56:57,558
this case the vendors provided a simple

1329
00:56:55,699 --> 00:56:59,359
workaround because enough<font color="#CCCCCC"> people</font>

1330
00:56:57,559 --> 00:57:02,239
complained about it that the

1331
00:56:59,359 --> 00:57:04,369
<font color="#E5E5E5">deterministic meed configuration was</font>

1332
00:57:02,239 --> 00:57:07,099
added in there<font color="#E5E5E5"> and so what happens now</font>

1333
00:57:04,369 --> 00:57:09,469
<font color="#E5E5E5">is the router will give you the same</font>

1334
00:57:07,099 --> 00:57:12,829
answer every time<font color="#CCCCCC"> it doesn't do the edge</font>

1335
00:57:09,469 --> 00:57:16,789
comparison it does the comparison<font color="#E5E5E5"> based</font>

1336
00:57:12,829 --> 00:57:18,229
on<font color="#CCCCCC"> es</font><font color="#E5E5E5"> number so smallest s number all</font>

1337
00:57:16,789 --> 00:57:21,949
<font color="#E5E5E5">the way up to the largest</font><font color="#CCCCCC"> is how the</font>

1338
00:57:18,229 --> 00:57:25,759
comparison<font color="#CCCCCC"> is no</font><font color="#E5E5E5"> done so for example in</font>

1339
00:57:21,949 --> 00:57:29,599
this<font color="#CCCCCC"> picture</font><font color="#E5E5E5"> router</font><font color="#CCCCCC"> I've got three paths</font>

1340
00:57:25,759 --> 00:57:31,339
to get<font color="#E5E5E5"> to</font><font color="#CCCCCC"> a s10 ok the</font><font color="#E5E5E5"> meds from</font><font color="#CCCCCC"> es 3</font>

1341
00:57:29,599 --> 00:57:33,469
are<font color="#E5E5E5"> not compared with the meds from a s1</font>

1342
00:57:31,339 --> 00:57:34,220
<font color="#E5E5E5">you only compare a media fits from the</font>

1343
00:57:33,469 --> 00:57:36,380
same

1344
00:57:34,220 --> 00:57:39,979
of course there's a hack<font color="#E5E5E5"> to work around</font>

1345
00:57:36,380 --> 00:57:41,839
that<font color="#E5E5E5"> we don't like that either</font><font color="#CCCCCC"> Roger</font><font color="#E5E5E5"> a</font>

1346
00:57:39,979 --> 00:57:44,029
will sometimes select the path from

1347
00:57:41,839 --> 00:57:45,710
<font color="#CCCCCC">router one is the best</font><font color="#E5E5E5"> but may also</font>

1348
00:57:44,029 --> 00:57:48,559
select<font color="#E5E5E5"> the path</font><font color="#CCCCCC"> in</font><font color="#E5E5E5"> router</font><font color="#CCCCCC"> 3 is the best</font>

1349
00:57:45,710 --> 00:57:50,539
<font color="#E5E5E5">depending when you reset the session so</font>

1350
00:57:48,559 --> 00:57:53,029
<font color="#E5E5E5">you have got the best path oscillating</font>

1351
00:57:50,539 --> 00:57:56,690
back and forth between router<font color="#E5E5E5"> 3 and</font>

1352
00:57:53,029 --> 00:57:59,119
<font color="#CCCCCC">Roger</font><font color="#E5E5E5"> 1 which is not good in if you've</font>

1353
00:57:56,690 --> 00:58:01,910
got expensive links connecting your s<font color="#E5E5E5"> 2</font>

1354
00:57:59,119 --> 00:58:03,650
to s<font color="#CCCCCC"> 3</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> 1 you've</font><font color="#E5E5E5"> got this traffic</font>

1355
00:58:01,910 --> 00:58:06,848
slowing back and forward depending<font color="#E5E5E5"> when</font>

1356
00:58:03,650 --> 00:58:10,579
you do your maintenance<font color="#E5E5E5"> very unpleasant</font>

1357
00:58:06,849 --> 00:58:13,460
so if you enable<font color="#CCCCCC"> the the knob that</font><font color="#E5E5E5"> was</font>

1358
00:58:10,579 --> 00:58:15,079
provided with<font color="#E5E5E5"> deterministic med 1 then</font>

1359
00:58:13,460 --> 00:58:17,569
the paths are ordered by neighboring<font color="#E5E5E5"> a s</font>

1360
00:58:15,079 --> 00:58:20,299
and then the best path is the<font color="#E5E5E5"> same every</font>

1361
00:58:17,569 --> 00:58:22,670
time<font color="#E5E5E5"> it's worked on</font><font color="#CCCCCC"> per net neighbor</font><font color="#E5E5E5"> a s</font>

1362
00:58:20,299 --> 00:58:24,680
group and no matter<font color="#E5E5E5"> when you do your</font>

1363
00:58:22,670 --> 00:58:27,049
reset or - do<font color="#CCCCCC"> your resets or your</font>

1364
00:58:24,680 --> 00:58:29,269
maintenance on<font color="#CCCCCC"> your edge routers you'll</font>

1365
00:58:27,049 --> 00:58:34,339
always get<font color="#CCCCCC"> the same best path selection</font>

1366
00:58:29,269 --> 00:58:36,109
result<font color="#CCCCCC"> I mentioned this one quite a bit</font>

1367
00:58:34,339 --> 00:58:37,700
because it<font color="#CCCCCC"> has been quite a common</font>

1368
00:58:36,109 --> 00:58:40,009
<font color="#CCCCCC">problem</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> well</font><font color="#E5E5E5"> something that</font><font color="#CCCCCC"> I've</font>

1369
00:58:37,700 --> 00:58:43,460
come<font color="#CCCCCC"> across</font><font color="#E5E5E5"> and it's all one of the</font>

1370
00:58:40,009 --> 00:58:45,079
<font color="#E5E5E5">reasons why you know the fix is provided</font>

1371
00:58:43,460 --> 00:58:46,819
to<font color="#E5E5E5"> the best path selection or maybe</font>

1372
00:58:45,079 --> 00:58:48,799
knobs provide to the best path selection

1373
00:58:46,819 --> 00:58:50,660
<font color="#E5E5E5">that may make a lot of sense</font><font color="#CCCCCC"> for your</font>

1374
00:58:48,799 --> 00:58:52,430
<font color="#E5E5E5">network</font><font color="#CCCCCC"> Geron part of the</font>

1375
00:58:50,660 --> 00:58:53,749
<font color="#E5E5E5">troubleshooting here is well if you do</font>

1376
00:58:52,430 --> 00:58:55,879
this then you<font color="#CCCCCC"> don't have to troubleshoot</font>

1377
00:58:53,749 --> 00:59:00,078
<font color="#E5E5E5">this problem but if you see this</font><font color="#CCCCCC"> problem</font>

1378
00:58:55,880 --> 00:59:02,150
this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> particular</font><font color="#CCCCCC"> solution to</font><font color="#E5E5E5"> it</font><font color="#CCCCCC"> ok</font>

1379
00:59:00,079 --> 00:59:05,900
<font color="#E5E5E5">and then yes just</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> diagram what the</font>

1380
00:59:02,150 --> 00:59:10,069
solution is this time with with that

1381
00:59:05,900 --> 00:59:13,460
<font color="#E5E5E5">knob applied a</font><font color="#CCCCCC"> s1 path is always</font><font color="#E5E5E5"> the one</font>

1382
00:59:10,069 --> 00:59:15,499
<font color="#E5E5E5">that</font><font color="#CCCCCC"> is chosen</font><font color="#E5E5E5"> because of the</font><font color="#CCCCCC"> ordered</font>

1383
00:59:13,460 --> 00:59:21,289
<font color="#CCCCCC">according to</font><font color="#E5E5E5"> s numbers s1 will beat the</font>

1384
00:59:15,499 --> 00:59:24,140
<font color="#CCCCCC">2's es3 best paths</font><font color="#E5E5E5"> ok second example</font>

1385
00:59:21,289 --> 00:59:27,019
best path changes every time the peering

1386
00:59:24,140 --> 00:59:29,900
is reset well again there's<font color="#E5E5E5"> something</font>

1387
00:59:27,019 --> 00:59:31,868
else not specified in RFC<font color="#E5E5E5"> by default</font>

1388
00:59:29,900 --> 00:59:35,390
that<font color="#E5E5E5"> all this external is the best path</font>

1389
00:59:31,869 --> 00:59:37,549
okay that's just once there in iOS I

1390
00:59:35,390 --> 00:59:40,339
mean if the all this all this path is

1391
00:59:37,549 --> 00:59:41,779
<font color="#E5E5E5">the best one</font><font color="#CCCCCC"> well as stability I mean</font>

1392
00:59:40,339 --> 00:59:43,910
<font color="#CCCCCC">though</font><font color="#E5E5E5"> this one has</font><font color="#CCCCCC"> been there for ages</font>

1393
00:59:41,779 --> 00:59:45,289
and<font color="#E5E5E5"> ages and ages</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> as a new ones</font>

1394
00:59:43,910 --> 00:59:46,140
flapping up and down<font color="#E5E5E5"> while you don't</font>

1395
00:59:45,289 --> 00:59:48,240
<font color="#E5E5E5">particularly</font>

1396
00:59:46,140 --> 00:59:50,310
type<font color="#E5E5E5"> your traffic slewing to</font><font color="#CCCCCC"> the new one</font>

1397
00:59:48,240 --> 00:59:57,589
<font color="#E5E5E5">and then back to the old and and so</font>

1398
00:59:50,310 --> 01:00:02,160
forth<font color="#CCCCCC"> but again this</font><font color="#E5E5E5"> can be annoying too</font>

1399
00:59:57,590 --> 01:00:04,380
so you can<font color="#E5E5E5"> disable this by enforcing it</font>

1400
01:00:02,160 --> 01:00:05,850
<font color="#E5E5E5">to conform to what the RFC actually</font>

1401
01:00:04,380 --> 01:00:09,420
stipulates and others comparing the

1402
01:00:05,850 --> 01:00:10,620
writer ID but it's<font color="#CCCCCC"> just difficult when</font>

1403
01:00:09,420 --> 01:00:12,630
people<font color="#CCCCCC"> have asked for particular</font>

1404
01:00:10,620 --> 01:00:14,310
enhancements that dual counter<font color="#E5E5E5"> to what's</font>

1405
01:00:12,630 --> 01:00:16,670
being written<font color="#E5E5E5"> down but then other people</font>

1406
01:00:14,310 --> 01:00:19,080
<font color="#E5E5E5">want to do work according to the RFC</font>

1407
01:00:16,670 --> 01:00:21,600
<font color="#E5E5E5">depending</font><font color="#CCCCCC"> on particular situation it</font>

1408
01:00:19,080 --> 01:00:24,750
<font color="#CCCCCC">just depends on how networks configured</font>

1409
01:00:21,600 --> 01:00:26,759
how the external<font color="#E5E5E5"> relationships are so</font>

1410
01:00:24,750 --> 01:00:28,830
this could be<font color="#CCCCCC"> another potential problem</font>

1411
01:00:26,760 --> 01:00:31,290
<font color="#CCCCCC">we</font><font color="#E5E5E5"> see the best path changing every time</font>

1412
01:00:28,830 --> 01:00:33,990
that peering is reset<font color="#E5E5E5"> that's an issue</font>

1413
01:00:31,290 --> 01:00:37,220
<font color="#E5E5E5">for you then it might be this</font><font color="#CCCCCC"> particular</font>

1414
01:00:33,990 --> 01:00:40,859
thing that<font color="#E5E5E5"> that's causing the problem</font>

1415
01:00:37,220 --> 01:00:43,500
<font color="#CCCCCC">and the third one</font><font color="#E5E5E5"> is only peculiar to my</font>

1416
01:00:40,860 --> 01:00:45,090
dear employer path one is<font color="#CCCCCC"> hire local</font>

1417
01:00:43,500 --> 01:00:48,870
preference but path<font color="#CCCCCC"> two is better</font>

1418
01:00:45,090 --> 01:00:51,150
<font color="#E5E5E5">always because IRS has synchronization</font>

1419
01:00:48,870 --> 01:00:53,310
on by default<font color="#CCCCCC"> in synchronization</font><font color="#E5E5E5"> is an</font>

1420
01:00:51,150 --> 01:00:56,430
ancient<font color="#E5E5E5"> historical thing that's still</font>

1421
01:00:53,310 --> 01:00:58,110
<font color="#E5E5E5">there by default unfortunately basically</font>

1422
01:00:56,430 --> 01:01:01,230
<font color="#E5E5E5">if a prefix is not synchronized</font><font color="#CCCCCC"> in other</font>

1423
01:00:58,110 --> 01:01:02,010
words it<font color="#E5E5E5"> doesn't appear in I GP as well</font>

1424
01:01:01,230 --> 01:01:04,110
as in<font color="#E5E5E5"> BGP</font>

1425
01:01:02,010 --> 01:01:07,290
it's not going to be considered for<font color="#E5E5E5"> the</font>

1426
01:01:04,110 --> 01:01:09,120
best path process this is like the 101

1427
01:01:07,290 --> 01:01:12,540
that<font color="#CCCCCC"> catches out everybody who tries to</font>

1428
01:01:09,120 --> 01:01:15,240
deploy BGP on<font color="#E5E5E5"> I on</font><font color="#CCCCCC"> a Cisco</font><font color="#E5E5E5"> router but</font>

1429
01:01:12,540 --> 01:01:17,220
doesn't read<font color="#CCCCCC"> the documentation okay they</font>

1430
01:01:15,240 --> 01:01:20,129
forget the no synchronization command is

1431
01:01:17,220 --> 01:01:21,299
necessary for<font color="#E5E5E5"> Cisco</font><font color="#CCCCCC"> tech have you done</font>

1432
01:01:20,130 --> 01:01:23,250
the<font color="#CCCCCC"> new synchronization</font>

1433
01:01:21,300 --> 01:01:24,510
oh I didn't know how<font color="#CCCCCC"> to do that I mean</font>

1434
01:01:23,250 --> 01:01:27,810
<font color="#E5E5E5">it doesn't say anywhere that you've got</font>

1435
01:01:24,510 --> 01:01:29,820
to do that<font color="#CCCCCC"> okay historical default is</font>

1436
01:01:27,810 --> 01:01:32,360
still on that's there to catch everybody

1437
01:01:29,820 --> 01:01:34,320
<font color="#E5E5E5">out</font><font color="#CCCCCC"> and what's happened is</font>

1438
01:01:32,360 --> 01:01:37,080
synchronization is part of<font color="#E5E5E5"> the best path</font>

1439
01:01:34,320 --> 01:01:39,180
process if you<font color="#E5E5E5"> don't disable it then it</font>

1440
01:01:37,080 --> 01:01:42,170
will<font color="#E5E5E5"> be included</font><font color="#CCCCCC"> the preface</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> doctor</font>

1441
01:01:39,180 --> 01:01:44,730
<font color="#CCCCCC">peer in your eye</font><font color="#E5E5E5"> GP as well as a BGP</font><font color="#CCCCCC"> and</font>

1442
01:01:42,170 --> 01:01:46,560
the<font color="#CCCCCC"> Roger appears those making</font><font color="#E5E5E5"> the wrong</font>

1443
01:01:44,730 --> 01:01:49,620
decision because<font color="#E5E5E5"> sync because the</font>

1444
01:01:46,560 --> 01:01:52,130
synchronization test is done<font color="#CCCCCC"> before</font><font color="#E5E5E5"> the</font>

1445
01:01:49,620 --> 01:01:58,040
local preference check

1446
01:01:52,130 --> 01:01:59,390
<font color="#E5E5E5">okay so summary of that RFC isn't</font>

1447
01:01:58,040 --> 01:02:01,250
perfect when it comes to path selection

1448
01:01:59,390 --> 01:02:04,509
<font color="#E5E5E5">you probably know that just from</font>

1449
01:02:01,250 --> 01:02:07,160
<font color="#E5E5E5">operational experience but that's fine</font>

1450
01:02:04,510 --> 01:02:09,260
<font color="#CCCCCC">we</font><font color="#E5E5E5"> shouldn't</font><font color="#CCCCCC"> be surprised Ben does a</font>

1451
01:02:07,160 --> 01:02:11,299
nice piece of work to put<font color="#CCCCCC"> instability</font>

1452
01:02:09,260 --> 01:02:15,230
enhancements<font color="#E5E5E5"> you</font><font color="#CCCCCC"> know</font><font color="#E5E5E5"> vendors are</font>

1453
01:02:11,300 --> 01:02:17,210
generally asked to or pushed into doing

1454
01:02:15,230 --> 01:02:19,040
<font color="#CCCCCC">these enhancements</font><font color="#E5E5E5"> or knobs whatever you</font>

1455
01:02:17,210 --> 01:02:20,330
want to call them but<font color="#E5E5E5"> these can lead</font><font color="#CCCCCC"> to</font>

1456
01:02:19,040 --> 01:02:23,240
interesting problems<font color="#E5E5E5"> too</font>

1457
01:02:20,330 --> 01:02:25,549
<font color="#E5E5E5">and of course some defaults linger on</font>

1458
01:02:23,240 --> 01:02:28,399
<font color="#E5E5E5">much much longer</font><font color="#CCCCCC"> than than</font><font color="#E5E5E5"> they have any</font>

1459
01:02:25,550 --> 01:02:29,960
right<font color="#CCCCCC"> to do so so again watch the</font>

1460
01:02:28,400 --> 01:02:32,180
default that your box<font color="#CCCCCC"> actually comes</font>

1461
01:02:29,960 --> 01:02:35,780
configured with because they can cause

1462
01:02:32,180 --> 01:02:39,410
issues<font color="#E5E5E5"> also finally loops and</font>

1463
01:02:35,780 --> 01:02:42,230
convergence issues<font color="#CCCCCC"> one</font><font color="#E5E5E5"> of the most</font>

1464
01:02:39,410 --> 01:02:43,549
common<font color="#E5E5E5"> problems every minute routes flap</font>

1465
01:02:42,230 --> 01:02:46,370
in the<font color="#E5E5E5"> routing table from one hop to</font>

1466
01:02:43,550 --> 01:02:49,850
<font color="#E5E5E5">next one with full routes most obvious</font>

1467
01:02:46,370 --> 01:02:54,080
<font color="#E5E5E5">symptom</font><font color="#CCCCCC"> is just</font><font color="#E5E5E5"> a high CPU on the the</font>

1468
01:02:49,850 --> 01:02:56,690
<font color="#CCCCCC">bgp process and typically</font><font color="#E5E5E5"> it's something</font>

1469
01:02:54,080 --> 01:02:58,400
<font color="#E5E5E5">like this router fee will prefer yes</font><font color="#CCCCCC"> for</font>

1470
01:02:56,690 --> 01:03:01,520
one<font color="#E5E5E5"> minute</font><font color="#CCCCCC"> and then</font><font color="#E5E5E5"> a minute later</font>

1471
01:02:58,400 --> 01:03:03,710
<font color="#CCCCCC">router 3 prefers</font><font color="#E5E5E5"> by it's pretty</font><font color="#CCCCCC"> s12 and</font>

1472
01:03:01,520 --> 01:03:07,370
<font color="#E5E5E5">then back to</font><font color="#CCCCCC"> a s4</font><font color="#E5E5E5"> and it oscillates</font>

1473
01:03:03,710 --> 01:03:11,210
<font color="#E5E5E5">between the two different and exit parts</font>

1474
01:03:07,370 --> 01:03:12,759
<font color="#E5E5E5">on a pretty much one minute basis what's</font>

1475
01:03:11,210 --> 01:03:15,980
going on

1476
01:03:12,760 --> 01:03:19,400
well this symptom<font color="#E5E5E5"> is almost always</font>

1477
01:03:15,980 --> 01:03:23,150
caused by the<font color="#E5E5E5"> BGP next stop being known</font>

1478
01:03:19,400 --> 01:03:25,250
only by<font color="#E5E5E5"> BGP one of the rules is</font><font color="#CCCCCC"> that the</font>

1479
01:03:23,150 --> 01:03:29,780
BGP next hop must be known by another

1480
01:03:25,250 --> 01:03:31,760
<font color="#CCCCCC">way it cannot be known by BGP</font><font color="#E5E5E5"> okay it's</font>

1481
01:03:29,780 --> 01:03:33,710
a common problem<font color="#CCCCCC"> we when this first hit</font>

1482
01:03:31,760 --> 01:03:36,980
me about<font color="#CCCCCC"> I</font><font color="#E5E5E5"> think was seven years</font><font color="#CCCCCC"> ago I</font>

1483
01:03:33,710 --> 01:03:38,990
<font color="#E5E5E5">first came</font><font color="#CCCCCC"> across this one me it took</font><font color="#E5E5E5"> me</font>

1484
01:03:36,980 --> 01:03:42,320
two days<font color="#E5E5E5"> to figure out what was actually</font>

1485
01:03:38,990 --> 01:03:45,049
going on<font color="#CCCCCC"> and it wasn't actually aware</font>

1486
01:03:42,320 --> 01:03:47,000
that that that<font color="#E5E5E5"> was what it was it was</font>

1487
01:03:45,050 --> 01:03:49,820
<font color="#CCCCCC">just a bizarre</font><font color="#E5E5E5"> problem of traffic</font>

1488
01:03:47,000 --> 01:03:51,950
<font color="#E5E5E5">oscillating between our two exit points</font>

1489
01:03:49,820 --> 01:03:55,470
in London it didn't bother<font color="#E5E5E5"> me too much</font>

1490
01:03:51,950 --> 01:03:57,540
<font color="#E5E5E5">but</font><font color="#CCCCCC"> it's the</font><font color="#E5E5E5"> 80% CPU and the right of it</font>

1491
01:03:55,470 --> 01:03:59,310
causing<font color="#E5E5E5"> bit of problems and customers</font>

1492
01:03:57,540 --> 01:04:02,550
<font color="#E5E5E5">are complaining about big round trip</font>

1493
01:03:59,310 --> 01:04:04,109
times<font color="#CCCCCC"> so we had to try and</font><font color="#E5E5E5"> figure out</font>

1494
01:04:02,550 --> 01:04:07,460
what it<font color="#E5E5E5"> was</font><font color="#CCCCCC"> and it was simply because</font>

1495
01:04:04,109 --> 01:04:10,170
<font color="#E5E5E5">the next hop was only known by BGP</font>

1496
01:04:07,460 --> 01:04:13,410
because somebody removed a static<font color="#E5E5E5"> route</font>

1497
01:04:10,170 --> 01:04:15,450
and it was<font color="#E5E5E5"> some</font><font color="#CCCCCC"> dish</font><font color="#E5E5E5"> some</font><font color="#CCCCCC"> meat removed a</font>

1498
01:04:13,410 --> 01:04:19,859
static route<font color="#E5E5E5"> and it was it was</font><font color="#CCCCCC"> as</font><font color="#E5E5E5"> simple</font>

1499
01:04:15,450 --> 01:04:21,540
as<font color="#CCCCCC"> that</font><font color="#E5E5E5"> okay</font><font color="#CCCCCC"> so the BGP next hop was</font>

1500
01:04:19,859 --> 01:04:24,330
<font color="#E5E5E5">known via BGP which is an illegal</font>

1501
01:04:21,540 --> 01:04:27,330
recursive lookup<font color="#E5E5E5"> and what's happening</font>

1502
01:04:24,330 --> 01:04:31,560
was the scanner<font color="#E5E5E5"> will notice that the BGP</font>

1503
01:04:27,330 --> 01:04:34,259
next<font color="#E5E5E5"> hop is known only by BGP so it'll</font>

1504
01:04:31,560 --> 01:04:36,119
drop that path<font color="#E5E5E5"> so your toilet of path is</font>

1505
01:04:34,260 --> 01:04:38,850
known via the<font color="#CCCCCC"> IGP so it will install</font>

1506
01:04:36,119 --> 01:04:41,940
<font color="#CCCCCC">that but then of course</font><font color="#E5E5E5"> your next</font><font color="#CCCCCC"> hop</font>

1507
01:04:38,850 --> 01:04:43,950
which<font color="#E5E5E5"> was known as BGP is then valid so</font>

1508
01:04:41,940 --> 01:04:45,900
then<font color="#E5E5E5"> it will</font><font color="#CCCCCC"> be reinstalled as the</font><font color="#E5E5E5"> best</font>

1509
01:04:43,950 --> 01:04:47,399
next<font color="#E5E5E5"> bar exit point</font>

1510
01:04:45,900 --> 01:04:52,170
so you<font color="#E5E5E5"> just oscillate back and forth</font>

1511
01:04:47,400 --> 01:04:54,810
with between<font color="#E5E5E5"> these two</font><font color="#CCCCCC"> okay</font><font color="#E5E5E5"> and it just</font>

1512
01:04:52,170 --> 01:04:56,369
goes<font color="#E5E5E5"> on</font><font color="#CCCCCC"> and on forever</font><font color="#E5E5E5"> and the reason</font>

1513
01:04:54,810 --> 01:04:58,470
it's<font color="#E5E5E5"> one minute because in Cisco IOS</font>

1514
01:04:56,369 --> 01:04:59,850
this kind of<font color="#E5E5E5"> runs every one minute</font><font color="#CCCCCC"> so</font>

1515
01:04:58,470 --> 01:05:01,980
that's why you have this one<font color="#E5E5E5"> minute</font>

1516
01:04:59,850 --> 01:05:03,690
cycle<font color="#E5E5E5"> time so if you see this one minute</font>

1517
01:05:01,980 --> 01:05:06,090
cycle<font color="#E5E5E5"> time you're using Cisco boxes in</font>

1518
01:05:03,690 --> 01:05:09,840
your<font color="#E5E5E5"> network it's going to be this more</font>

1519
01:05:06,090 --> 01:05:11,880
than likely so make sure all the<font color="#E5E5E5"> BGP</font>

1520
01:05:09,840 --> 01:05:14,550
next tops are known by the IGP whether

1521
01:05:11,880 --> 01:05:18,210
<font color="#E5E5E5">it's OSPF or eius eius</font><font color="#CCCCCC"> or static or</font>

1522
01:05:14,550 --> 01:05:20,550
connected<font color="#CCCCCC"> drives the next stop is also</font>

1523
01:05:18,210 --> 01:05:23,250
an IP GP ensure the ibgp distance is

1524
01:05:20,550 --> 01:05:25,800
<font color="#E5E5E5">longer than</font><font color="#CCCCCC"> IGP distance</font><font color="#E5E5E5"> that catches a</font>

1525
01:05:23,250 --> 01:05:29,609
lot<font color="#E5E5E5"> of people hunt I mean with when</font><font color="#CCCCCC"> I</font>

1526
01:05:25,800 --> 01:05:34,080
<font color="#CCCCCC">bgp distance is set</font><font color="#E5E5E5"> much much smaller</font>

1527
01:05:29,609 --> 01:05:35,040
than<font color="#E5E5E5"> cos pi/4 is ours you can end up</font>

1528
01:05:34,080 --> 01:05:37,200
with<font color="#E5E5E5"> this problem</font>

1529
01:05:35,040 --> 01:05:39,930
because<font color="#CCCCCC"> i bgp becomes more important</font>

1530
01:05:37,200 --> 01:05:44,100
<font color="#E5E5E5">than the IGP which quite</font><font color="#CCCCCC"> frankly should</font>

1531
01:05:39,930 --> 01:05:46,230
it<font color="#E5E5E5"> should never be or don't and carry</font>

1532
01:05:44,100 --> 01:05:48,839
don't carry external<font color="#E5E5E5"> next hops in your</font>

1533
01:05:46,230 --> 01:05:50,790
network<font color="#CCCCCC"> use next hop self-concept in</font>

1534
01:05:48,840 --> 01:05:52,740
other words you change<font color="#E5E5E5"> the next</font><font color="#CCCCCC"> hop for</font>

1535
01:05:50,790 --> 01:05:55,500
externally<font color="#CCCCCC"> learned prefixes to the</font>

1536
01:05:52,740 --> 01:05:58,680
router itself<font color="#CCCCCC"> right so you</font><font color="#E5E5E5"> don't have to</font>

1537
01:05:55,500 --> 01:06:00,330
carry your<font color="#E5E5E5"> neighbors IP address in</font><font color="#CCCCCC"> your</font>

1538
01:05:58,680 --> 01:06:02,850
backbone<font color="#CCCCCC"> because he may be sending</font><font color="#E5E5E5"> you</font>

1539
01:06:00,330 --> 01:06:05,259
the<font color="#CCCCCC"> point-to-point link by bgp as well</font>

1540
01:06:02,850 --> 01:06:07,420
<font color="#E5E5E5">or an aggregate of the punch</font>

1541
01:06:05,260 --> 01:06:10,030
that can cause<font color="#E5E5E5"> weird stuff</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> happen</font>

1542
01:06:07,420 --> 01:06:13,920
<font color="#CCCCCC">Nuth what actually bit us because our</font>

1543
01:06:10,030 --> 01:06:18,849
peer was sending us the network that was

1544
01:06:13,920 --> 01:06:22,000
the<font color="#CCCCCC"> ebgp</font><font color="#E5E5E5"> next hop by</font><font color="#CCCCCC"> BGP</font><font color="#E5E5E5"> of course when</font>

1545
01:06:18,849 --> 01:06:24,520
the person the<font color="#E5E5E5"> person who was doing the</font>

1546
01:06:22,000 --> 01:06:26,950
tidy up of the network configuration<font color="#CCCCCC"> saw</font>

1547
01:06:24,520 --> 01:06:29,230
that we<font color="#CCCCCC"> already heard this prefix by BGP</font>

1548
01:06:26,950 --> 01:06:32,560
Wow<font color="#E5E5E5"> why</font><font color="#CCCCCC"> did Phillip put</font><font color="#E5E5E5"> the static right</font>

1549
01:06:29,230 --> 01:06:34,480
in there so you took<font color="#E5E5E5"> it out</font><font color="#CCCCCC"> and well of</font>

1550
01:06:32,560 --> 01:06:37,210
course the configuration was<font color="#E5E5E5"> like yeah</font>

1551
01:06:34,480 --> 01:06:40,000
huge<font color="#E5E5E5"> and did I spot that all that that</font>

1552
01:06:37,210 --> 01:06:41,440
static<font color="#CCCCCC"> one static out</font><font color="#E5E5E5"> of like 60 or 70</font>

1553
01:06:40,000 --> 01:06:45,369
other statics and<font color="#E5E5E5"> the box were missing</font>

1554
01:06:41,440 --> 01:06:46,660
<font color="#CCCCCC">no so I didn't even didn't do that of</font>

1555
01:06:45,369 --> 01:06:49,839
course<font color="#CCCCCC"> what I should have</font><font color="#E5E5E5"> done which I</font>

1556
01:06:46,660 --> 01:06:51,730
finally did about 36 hours<font color="#E5E5E5"> later was</font>

1557
01:06:49,839 --> 01:06:53,369
<font color="#E5E5E5">looked back</font><font color="#CCCCCC"> through</font><font color="#E5E5E5"> the RCS log that we</font>

1558
01:06:51,730 --> 01:06:55,630
kept to the<font color="#E5E5E5"> configuration</font>

1559
01:06:53,369 --> 01:06:57,819
static<font color="#CCCCCC"> great was missing yeah that's</font>

1560
01:06:55,630 --> 01:07:02,190
what it<font color="#E5E5E5"> was put it back</font><font color="#CCCCCC"> in and this</font>

1561
01:06:57,819 --> 01:07:04,869
oscillation disappeared but this is done

1562
01:07:02,190 --> 01:07:09,760
external<font color="#E5E5E5"> next ops within your own</font>

1563
01:07:04,869 --> 01:07:13,180
network<font color="#CCCCCC"> ok so</font><font color="#E5E5E5"> that's the general summary</font>

1564
01:07:09,760 --> 01:07:16,060
<font color="#E5E5E5">of high CPU utilization</font><font color="#CCCCCC"> bgp process</font><font color="#E5E5E5"> use</font>

1565
01:07:13,180 --> 01:07:17,828
the convergence problem<font color="#E5E5E5"> find a prefix</font>

1566
01:07:16,060 --> 01:07:21,790
<font color="#CCCCCC">that</font><font color="#E5E5E5"> is changing a lot if you can do a</font>

1567
01:07:17,829 --> 01:07:23,890
show on<font color="#E5E5E5"> that particular prefix and if</font>

1568
01:07:21,790 --> 01:07:26,170
it's<font color="#E5E5E5"> changing a lot like last update was</font>

1569
01:07:23,890 --> 01:07:28,210
within<font color="#E5E5E5"> a minute or two trying to</font>

1570
01:07:26,170 --> 01:07:29,740
troubleshoot or do debugging<font color="#CCCCCC"> on that</font>

1571
01:07:28,210 --> 01:07:34,210
particular preface find out what is

1572
01:07:29,740 --> 01:07:36,669
doing what's happening -<font color="#CCCCCC"> okay</font><font color="#E5E5E5"> we've got</font>

1573
01:07:34,210 --> 01:07:38,140
a BGP<font color="#E5E5E5"> routing loop first check for</font><font color="#CCCCCC"> IGP</font>

1574
01:07:36,670 --> 01:07:39,550
routing loops to the<font color="#E5E5E5"> beach would be next</font>

1575
01:07:38,140 --> 01:07:42,970
hops

1576
01:07:39,550 --> 01:07:44,859
BGP<font color="#E5E5E5"> loops tend to be caused by while not</font>

1577
01:07:42,970 --> 01:07:47,200
<font color="#E5E5E5">visit falling the physical</font><font color="#CCCCCC"> topology and</font>

1578
01:07:44,859 --> 01:07:49,089
<font color="#E5E5E5">write reflectors environments</font><font color="#CCCCCC"> some</font>

1579
01:07:47,200 --> 01:07:51,069
people love to<font color="#E5E5E5"> have route reflectors</font>

1580
01:07:49,089 --> 01:07:54,250
just like one router effect and their

1581
01:07:51,069 --> 01:07:56,980
whole network<font color="#E5E5E5"> of 500 routers that's well</font>

1582
01:07:54,250 --> 01:07:58,869
<font color="#E5E5E5">yeah okay that maybe works some of the</font>

1583
01:07:56,980 --> 01:08:01,329
time but<font color="#CCCCCC"> then you end up with a red</font>

1584
01:07:58,869 --> 01:08:04,150
reflector definitely not connected to

1585
01:08:01,329 --> 01:08:06,520
any of its clients<font color="#E5E5E5"> by a physical point</font>

1586
01:08:04,150 --> 01:08:09,250
<font color="#E5E5E5">of park link and</font><font color="#CCCCCC"> that can</font><font color="#E5E5E5"> end up with</font>

1587
01:08:06,520 --> 01:08:11,740
<font color="#CCCCCC">lots of trouble and</font><font color="#E5E5E5"> it can be caused</font><font color="#CCCCCC"> by</font>

1588
01:08:09,250 --> 01:08:14,550
using<font color="#E5E5E5"> bgp multipath within</font>

1589
01:08:11,740 --> 01:08:17,549
<font color="#CCCCCC">confederations</font><font color="#E5E5E5"> I mean</font>

1590
01:08:14,550 --> 01:08:21,350
not so much<font color="#E5E5E5"> lack of</font><font color="#CCCCCC"> a fool ibgp mesh is</font>

1591
01:08:17,549 --> 01:08:24,089
a classic for causing writing<font color="#CCCCCC"> rhythms</font>

1592
01:08:21,350 --> 01:08:25,799
and then to try<font color="#E5E5E5"> and figure try and</font>

1593
01:08:24,089 --> 01:08:27,839
troubleshoot some of<font color="#E5E5E5"> this have a look at</font>

1594
01:08:25,799 --> 01:08:29,580
the<font color="#E5E5E5"> writing</font><font color="#CCCCCC"> table entry remember the</font>

1595
01:08:27,839 --> 01:08:32,850
routing<font color="#E5E5E5"> table is not the same as the BGP</font>

1596
01:08:29,580 --> 01:08:35,040
<font color="#E5E5E5">table look at the BGP table entry check</font>

1597
01:08:32,850 --> 01:08:39,859
<font color="#E5E5E5">the right to the next hop is it know</font>

1598
01:08:35,040 --> 01:08:39,859
<font color="#E5E5E5">about BGP is</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> know</font><font color="#CCCCCC"> IGP doesn't exist</font>

1599
01:08:40,910 --> 01:08:46,410
<font color="#E5E5E5">then finally in this section convergence</font>

1600
01:08:44,010 --> 01:08:48,630
problems<font color="#CCCCCC"> here's the first example you've</font>

1601
01:08:46,410 --> 01:08:51,000
<font color="#CCCCCC">got a right to</font><font color="#E5E5E5"> factor with 215 clients</font>

1602
01:08:48,630 --> 01:08:53,730
it's not unreasonable<font color="#CCCCCC"> hundred</font><font color="#E5E5E5"> thousand</font>

1603
01:08:51,000 --> 01:08:56,700
prefixes and just BGP will not converge

1604
01:08:53,729 --> 01:08:58,669
at all<font color="#E5E5E5"> log showed the neighbor</font><font color="#CCCCCC"> hold</font>

1605
01:08:56,700 --> 01:09:01,229
<font color="#E5E5E5">times have expired</font>

1606
01:08:58,670 --> 01:09:03,830
okay the bgp router suddenly will show

1607
01:09:01,229 --> 01:09:06,870
that peers will establish drop

1608
01:09:03,830 --> 01:09:09,299
<font color="#CCCCCC">re-establish a timeout</font><font color="#E5E5E5"> and so forth</font><font color="#CCCCCC"> and</font>

1609
01:09:06,870 --> 01:09:12,120
it's not the MTU problem we saw earlier

1610
01:09:09,299 --> 01:09:14,490
okay this is another manifestation of

1611
01:09:12,120 --> 01:09:16,140
this problem and here were either

1612
01:09:14,490 --> 01:09:18,029
<font color="#CCCCCC">missing hellos or the peers are not</font>

1613
01:09:16,140 --> 01:09:20,010
sending<font color="#E5E5E5"> them we're missing the keep</font>

1614
01:09:18,029 --> 01:09:23,429
<font color="#E5E5E5">alive or missing some information</font><font color="#CCCCCC"> like</font>

1615
01:09:20,010 --> 01:09:27,000
<font color="#CCCCCC">that and here you don't blame BGP</font><font color="#E5E5E5"> you</font>

1616
01:09:23,430 --> 01:09:31,410
look further down<font color="#E5E5E5"> check the in check for</font>

1617
01:09:27,000 --> 01:09:33,839
interface input<font color="#E5E5E5"> drops for example the</font>

1618
01:09:31,410 --> 01:09:36,000
number is a large number got huge number

1619
01:09:33,839 --> 01:09:39,059
<font color="#E5E5E5">of drops</font><font color="#CCCCCC"> in</font><font color="#E5E5E5"> interface and interface</font>

1620
01:09:36,000 --> 01:09:40,710
counters are showing recent history then

1621
01:09:39,060 --> 01:09:42,510
this could<font color="#E5E5E5"> be</font><font color="#CCCCCC"> the cause of the PIO swim</font>

1622
01:09:40,710 --> 01:09:43,920
<font color="#CCCCCC">tank a large number of drops large</font>

1623
01:09:42,510 --> 01:09:46,980
number of<font color="#E5E5E5"> packets are being dropped on</font>

1624
01:09:43,920 --> 01:09:49,440
<font color="#E5E5E5">the router and this could be due</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> the</font>

1625
01:09:46,979 --> 01:09:50,939
input<font color="#CCCCCC"> queue</font><font color="#E5E5E5"> being too small and each</font>

1626
01:09:49,439 --> 01:09:53,189
interface will have some buffer

1627
01:09:50,939 --> 01:09:55,889
associated with it if the<font color="#CCCCCC"> buffers not</font>

1628
01:09:53,189 --> 01:09:58,710
big enough<font color="#E5E5E5"> example you've got 250 peers</font>

1629
01:09:55,890 --> 01:10:00,630
there 250<font color="#CCCCCC"> peers</font><font color="#E5E5E5"> Center who lose all at</font>

1630
01:09:58,710 --> 01:10:03,090
the same<font color="#CCCCCC"> time</font><font color="#E5E5E5"> you've got 250</font>

1631
01:10:00,630 --> 01:10:05,700
conversations with the local<font color="#CCCCCC"> ratchet</font>

1632
01:10:03,090 --> 01:10:08,150
you've got to try<font color="#CCCCCC"> and handle if your</font>

1633
01:10:05,700 --> 01:10:10,440
buffer can only take say 75

1634
01:10:08,150 --> 01:10:14,129
<font color="#E5E5E5">conversations then what happens to the</font>

1635
01:10:10,440 --> 01:10:15,119
other<font color="#E5E5E5"> a hundred and well whatever 140 or</font>

1636
01:10:14,130 --> 01:10:23,189
<font color="#CCCCCC">so</font>

1637
01:10:15,119 --> 01:10:24,449
<font color="#E5E5E5">okay they get lost oops so yeah sorry I</font>

1638
01:10:23,189 --> 01:10:26,550
missed<font color="#E5E5E5"> the solution the solution</font><font color="#CCCCCC"> is</font>

1639
01:10:24,449 --> 01:10:28,759
basically to<font color="#CCCCCC"> increase the size</font><font color="#E5E5E5"> of the</font>

1640
01:10:26,550 --> 01:10:31,409
input<font color="#E5E5E5"> queue so you can handle all the</font>

1641
01:10:28,760 --> 01:10:34,409
communications that you<font color="#E5E5E5"> have with your</font>

1642
01:10:31,409 --> 01:10:35,938
actual peers okay<font color="#E5E5E5"> just make it a big</font>

1643
01:10:34,409 --> 01:10:37,768
number much much bigger than<font color="#E5E5E5"> a number of</font>

1644
01:10:35,939 --> 01:10:39,510
peers<font color="#CCCCCC"> that you have</font><font color="#E5E5E5"> especially</font><font color="#CCCCCC"> you're</font>

1645
01:10:37,769 --> 01:10:43,199
trying to deploy right reflector typed

1646
01:10:39,510 --> 01:10:46,949
networks like this the defaults are too

1647
01:10:43,199 --> 01:10:50,539
small<font color="#E5E5E5"> second</font><font color="#CCCCCC"> example</font><font color="#E5E5E5"> BGP converges in 25</font>

1648
01:10:46,949 --> 01:10:52,978
<font color="#E5E5E5">minutes for 250 peers and 100,000</font><font color="#CCCCCC"> brats</font>

1649
01:10:50,539 --> 01:10:55,169
<font color="#E5E5E5">we know it's not using a</font><font color="#CCCCCC"> motorola</font>

1650
01:10:52,979 --> 01:10:57,149
processor anymore it's something that

1651
01:10:55,169 --> 01:11:00,959
should<font color="#CCCCCC"> be nice</font><font color="#E5E5E5"> and fast</font><font color="#CCCCCC"> on them from</font><font color="#E5E5E5"> the</font>

1652
01:10:57,149 --> 01:11:02,939
<font color="#E5E5E5">modern day</font><font color="#CCCCCC"> so rather</font><font color="#E5E5E5"> than just</font><font color="#CCCCCC"> say a</font>

1653
01:11:00,959 --> 01:11:04,530
<font color="#E5E5E5">wall it's</font><font color="#CCCCCC"> slow Hardware</font><font color="#E5E5E5"> try and actually</font>

1654
01:11:02,939 --> 01:11:08,369
<font color="#CCCCCC">figure out</font><font color="#E5E5E5"> what was going</font><font color="#CCCCCC"> on within</font><font color="#E5E5E5"> the</font>

1655
01:11:04,530 --> 01:11:11,009
<font color="#E5E5E5">TCP process and check the MSS size and</font>

1656
01:11:08,369 --> 01:11:13,648
able path MTU discovery on<font color="#CCCCCC"> the router if</font>

1657
01:11:11,010 --> 01:11:16,199
it's not on by default<font color="#E5E5E5"> okay that's quite</font>

1658
01:11:13,649 --> 01:11:20,489
important before<font color="#CCCCCC"> empty you something</font>

1659
01:11:16,199 --> 01:11:22,018
<font color="#E5E5E5">Cisco's is Wow MSS is 536 which means</font>

1660
01:11:20,489 --> 01:11:23,489
that the router needs to<font color="#E5E5E5"> send almost</font>

1661
01:11:22,019 --> 01:11:26,550
three times the<font color="#CCCCCC"> amount of packets</font>

1662
01:11:23,489 --> 01:11:28,079
<font color="#E5E5E5">compared with an MSS of 14 60 which is</font>

1663
01:11:26,550 --> 01:11:31,860
<font color="#CCCCCC">what could</font><font color="#E5E5E5"> be possible over an Ethernet</font>

1664
01:11:28,079 --> 01:11:34,438
<font color="#E5E5E5">connection and if you do that you're</font>

1665
01:11:31,860 --> 01:11:36,839
missing<font color="#CCCCCC"> we find that you see BGP</font>

1666
01:11:34,439 --> 01:11:40,199
converging about half the time<font color="#CCCCCC"> 10</font>

1667
01:11:36,840 --> 01:11:42,269
minutes or so<font color="#E5E5E5"> is pretty good</font><font color="#CCCCCC"> for 250</font>

1668
01:11:40,199 --> 01:11:45,898
peers<font color="#E5E5E5"> and a full</font><font color="#CCCCCC"> routing table for each</font>

1669
01:11:42,269 --> 01:11:47,369
peer<font color="#E5E5E5"> so that's some</font><font color="#CCCCCC"> of the possible</font>

1670
01:11:45,899 --> 01:11:48,119
<font color="#CCCCCC">problems you could</font><font color="#E5E5E5"> find as some of the</font>

1671
01:11:47,369 --> 01:11:50,579
workarounds

1672
01:11:48,119 --> 01:11:51,929
I suppose it's less troubleshooting than

1673
01:11:50,579 --> 01:11:53,909
saying well here's a possible problem

1674
01:11:51,929 --> 01:11:57,989
<font color="#E5E5E5">that you can get and here's the</font><font color="#CCCCCC"> actual</font>

1675
01:11:53,909 --> 01:12:00,659
solution<font color="#E5E5E5"> to do to deal</font><font color="#CCCCCC"> with</font><font color="#E5E5E5"> it</font><font color="#CCCCCC"> right in</font>

1676
01:11:57,989 --> 01:12:01,860
the final 15<font color="#E5E5E5"> minutes I'm just</font><font color="#CCCCCC"> going to</font>

1677
01:12:00,659 --> 01:12:05,759
have a quick look<font color="#CCCCCC"> at some</font><font color="#E5E5E5"> of the</font>

1678
01:12:01,860 --> 01:12:08,219
internet reachability problems<font color="#CCCCCC"> this is</font>

1679
01:12:05,760 --> 01:12:10,050
less of<font color="#E5E5E5"> the local network and more how</font>

1680
01:12:08,219 --> 01:12:13,229
you go about<font color="#E5E5E5"> troubleshooting problems</font>

1681
01:12:10,050 --> 01:12:14,999
with between<font color="#E5E5E5"> your</font><font color="#CCCCCC"> network and other</font>

1682
01:12:13,229 --> 01:12:16,489
networks on the<font color="#E5E5E5"> internet</font><font color="#CCCCCC"> and that's</font>

1683
01:12:14,999 --> 01:12:20,300
quite an important part of

1684
01:12:16,489 --> 01:12:23,549
troubleshooting<font color="#E5E5E5"> also</font>

1685
01:12:20,300 --> 01:12:28,499
<font color="#E5E5E5">um well the first one</font><font color="#CCCCCC"> is a BGP attribute</font>

1686
01:12:23,550 --> 01:12:30,300
confusion<font color="#E5E5E5"> um in people come to these</font><font color="#CCCCCC"> BGP</font>

1687
01:12:28,499 --> 01:12:32,550
tutorials at nano oak and we tell them

1688
01:12:30,300 --> 01:12:36,809
all about<font color="#CCCCCC"> local preference and any DS</font>

1689
01:12:32,550 --> 01:12:37,349
<font color="#E5E5E5">and es</font><font color="#CCCCCC"> path prepend and then they go</font>

1690
01:12:36,809 --> 01:12:39,809
<font color="#CCCCCC">away</font>

1691
01:12:37,349 --> 01:12:43,050
I drew<font color="#CCCCCC"> a lots of workshops</font><font color="#E5E5E5"> I do lots of</font>

1692
01:12:39,809 --> 01:12:46,320
<font color="#CCCCCC">other trainings and the amazing thing is</font>

1693
01:12:43,050 --> 01:12:48,199
people<font color="#E5E5E5"> completely confuse what the</font>

1694
01:12:46,320 --> 01:12:50,249
different attributes<font color="#E5E5E5"> are actually useful</font>

1695
01:12:48,199 --> 01:12:53,280
<font color="#E5E5E5">if you were to control have traffic</font>

1696
01:12:50,249 --> 01:12:56,219
<font color="#E5E5E5">flows in to your network you need to</font>

1697
01:12:53,280 --> 01:12:58,860
send any<font color="#E5E5E5"> DS and s path pre parents or</font>

1698
01:12:56,219 --> 01:13:00,869
whatever<font color="#CCCCCC"> to your neighbor</font><font color="#E5E5E5"> quite often I</font>

1699
01:12:58,860 --> 01:13:03,539
see people try<font color="#CCCCCC"> and use em EDS</font><font color="#E5E5E5"> in the</font><font color="#CCCCCC"> S</font>

1700
01:13:00,869 --> 01:13:05,639
<font color="#CCCCCC">Pen</font><font color="#E5E5E5"> path</font><font color="#CCCCCC"> prepend</font><font color="#E5E5E5"> just how to control</font>

1701
01:13:03,539 --> 01:13:07,440
traffic<font color="#E5E5E5"> going</font><font color="#CCCCCC"> onto the network and I'm</font>

1702
01:13:05,639 --> 01:13:11,249
not<font color="#E5E5E5"> completely clear</font><font color="#CCCCCC"> how that's meant to</font>

1703
01:13:07,440 --> 01:13:14,489
work<font color="#E5E5E5"> routing information flows not as a</font>

1704
01:13:11,249 --> 01:13:19,380
<font color="#E5E5E5">direction of traffic very very important</font>

1705
01:13:14,489 --> 01:13:22,530
<font color="#CCCCCC">fundamental concept</font><font color="#E5E5E5"> now I tell</font><font color="#CCCCCC"> people no</font>

1706
01:13:19,380 --> 01:13:24,389
<font color="#E5E5E5">of all walks of life about this and some</font>

1707
01:13:22,530 --> 01:13:26,369
<font color="#E5E5E5">yeah sometimes feels them insulting</font>

1708
01:13:24,389 --> 01:13:28,229
people by telling<font color="#E5E5E5"> them this is the sort</font>

1709
01:13:26,369 --> 01:13:30,690
of thing but<font color="#E5E5E5"> I've seen seasoned</font>

1710
01:13:28,229 --> 01:13:33,289
engineer's completely forget that basic

1711
01:13:30,690 --> 01:13:35,190
rule routing information goes that away

1712
01:13:33,289 --> 01:13:37,469
<font color="#E5E5E5">traffic will flow in the opposite</font>

1713
01:13:35,190 --> 01:13:39,239
direction<font color="#E5E5E5"> very very important to</font>

1714
01:13:37,469 --> 01:13:41,039
<font color="#E5E5E5">remember that remember that for trying</font>

1715
01:13:39,239 --> 01:13:42,268
<font color="#E5E5E5">to do</font><font color="#CCCCCC"> troubleshooting then actually</font>

1716
01:13:41,039 --> 01:13:45,590
makes troubleshooting and multihoming

1717
01:13:42,269 --> 01:13:49,159
<font color="#E5E5E5">and transit and</font><font color="#CCCCCC"> so forth</font><font color="#E5E5E5"> so much easier</font>

1718
01:13:45,590 --> 01:13:52,139
<font color="#CCCCCC">right as</font><font color="#E5E5E5"> as I've said in many words here</font>

1719
01:13:49,159 --> 01:13:53,879
<font color="#CCCCCC">multihoming</font><font color="#E5E5E5"> and transit travel shootings</font>

1720
01:13:52,139 --> 01:13:55,289
often<font color="#E5E5E5"> happen because the relationship</font>

1721
01:13:53,880 --> 01:13:57,269
between<font color="#E5E5E5"> writing information flow and</font>

1722
01:13:55,289 --> 01:13:59,159
traffic<font color="#E5E5E5"> flow is forgotten</font>

1723
01:13:57,269 --> 01:14:03,389
<font color="#E5E5E5">all right I'm laboring the point because</font>

1724
01:13:59,159 --> 01:14:05,280
<font color="#CCCCCC">people forget this</font><font color="#E5E5E5"> far too often path</font>

1725
01:14:03,389 --> 01:14:07,800
selection<font color="#E5E5E5"> process and kind of talked</font>

1726
01:14:05,280 --> 01:14:10,110
about<font color="#E5E5E5"> before each band has tweaked the</font>

1727
01:14:07,800 --> 01:14:12,360
path<font color="#E5E5E5"> selection process</font><font color="#CCCCCC"> you really got to</font>

1728
01:14:10,110 --> 01:14:14,190
<font color="#E5E5E5">learn what it is for your equipment</font><font color="#CCCCCC"> if</font>

1729
01:14:12,360 --> 01:14:16,768
you're using<font color="#E5E5E5"> multi vendor try and make</font>

1730
01:14:14,190 --> 01:14:20,299
it usually consistent amongst all the

1731
01:14:16,769 --> 01:14:22,679
routers<font color="#E5E5E5"> you use any</font><font color="#CCCCCC"> de confusión</font>

1732
01:14:20,300 --> 01:14:24,239
<font color="#E5E5E5">default a medium Cisco IOS</font>

1733
01:14:22,679 --> 01:14:27,440
is<font color="#E5E5E5"> zero in other words if you don't</font>

1734
01:14:24,239 --> 01:14:30,379
specify any any immediate all it is<font color="#E5E5E5"> zero</font>

1735
01:14:27,440 --> 01:14:32,879
<font color="#E5E5E5">it may not be this on your own writer</font>

1736
01:14:30,380 --> 01:14:36,389
<font color="#CCCCCC">okay or your peer you</font>

1737
01:14:32,880 --> 01:14:39,690
<font color="#CCCCCC">pmas you and meed of 2032 - one as the</font>

1738
01:14:36,389 --> 01:14:42,570
default<font color="#E5E5E5"> another was huge very</font>

1739
01:14:39,690 --> 01:14:45,388
unimportant<font color="#CCCCCC"> where's mi d of</font><font color="#E5E5E5"> zero is very</font>

1740
01:14:42,570 --> 01:14:46,799
important so<font color="#CCCCCC"> you can end up with pretty</font>

1741
01:14:45,389 --> 01:14:48,630
interesting writing loops<font color="#E5E5E5"> if you just</font>

1742
01:14:46,800 --> 01:14:52,670
leave<font color="#E5E5E5"> the for immediate or one default</font>

1743
01:14:48,630 --> 01:14:55,290
to zero<font color="#CCCCCC"> in other</font><font color="#E5E5E5"> ones</font><font color="#CCCCCC"> -</font><font color="#E5E5E5"> 332 minus one</font>

1744
01:14:52,670 --> 01:14:58,230
communicant community confusion if you

1745
01:14:55,290 --> 01:14:59,670
<font color="#CCCCCC">set community</font><font color="#E5E5E5"> it does just that it</font><font color="#CCCCCC"> will</font>

1746
01:14:58,230 --> 01:15:01,980
set the community to something it

1747
01:14:59,670 --> 01:15:04,889
<font color="#CCCCCC">overwrites</font><font color="#E5E5E5"> anything else that's set on</font>

1748
01:15:01,980 --> 01:15:06,839
<font color="#E5E5E5">the prefix so</font><font color="#CCCCCC"> something iOS you can</font><font color="#E5E5E5"> use</font>

1749
01:15:04,889 --> 01:15:08,850
an additive<font color="#E5E5E5"> keyword to add communities</font>

1750
01:15:06,840 --> 01:15:10,590
to those that you've learned figure<font color="#E5E5E5"> out</font>

1751
01:15:08,850 --> 01:15:13,679
what you want to<font color="#E5E5E5"> do for you on equipment</font>

1752
01:15:10,590 --> 01:15:15,989
<font color="#E5E5E5">also use the internet format for</font>

1753
01:15:13,679 --> 01:15:19,380
community in other words<font color="#CCCCCC"> a s number call</font>

1754
01:15:15,989 --> 01:15:22,860
on community number rather than than the

1755
01:15:19,380 --> 01:15:26,370
32-bit<font color="#CCCCCC"> ITR format</font><font color="#E5E5E5"> the internet format is</font>

1756
01:15:22,860 --> 01:15:28,349
kind of easier to read understand humans

1757
01:15:26,370 --> 01:15:30,989
are not too hot<font color="#CCCCCC"> when it comes to looking</font>

1758
01:15:28,350 --> 01:15:34,280
at 32-bit numbers whereas two<font color="#E5E5E5"> 16-bit</font>

1759
01:15:30,989 --> 01:15:36,690
numbers are kind<font color="#CCCCCC"> of easier to handle</font>

1760
01:15:34,280 --> 01:15:41,190
<font color="#E5E5E5">Cisco IOS never sent community by</font>

1761
01:15:36,690 --> 01:15:43,379
default<font color="#E5E5E5"> all those do</font><font color="#CCCCCC"> ok figure</font><font color="#E5E5E5"> out what</font>

1762
01:15:41,190 --> 01:15:45,900
it is never assume<font color="#CCCCCC"> that your neighbor is</font>

1763
01:15:43,380 --> 01:15:48,780
going<font color="#E5E5E5"> to bear your no export you</font><font color="#CCCCCC"> may</font>

1764
01:15:45,900 --> 01:15:50,309
<font color="#E5E5E5">overwrite any community</font><font color="#CCCCCC"> u s-- and</font><font color="#E5E5E5"> so if</font>

1765
01:15:48,780 --> 01:15:51,480
you're going to use new export make sure

1766
01:15:50,310 --> 01:15:56,400
your neighbor knows that you're<font color="#CCCCCC"> gonna</font>

1767
01:15:51,480 --> 01:15:58,080
<font color="#CCCCCC">use no export</font><font color="#E5E5E5"> yes path prepends</font><font color="#CCCCCC"> twenty</font>

1768
01:15:56,400 --> 01:16:00,239
pre parents won't<font color="#CCCCCC"> less than approach of</font>

1769
01:15:58,080 --> 01:16:02,309
your path<font color="#CCCCCC"> any more than ten pre parents</font>

1770
01:16:00,239 --> 01:16:03,718
well but lots of people<font color="#CCCCCC"> out there</font><font color="#E5E5E5"> you</font>

1771
01:16:02,310 --> 01:16:06,480
seem to<font color="#CCCCCC"> think doing</font><font color="#E5E5E5"> a</font><font color="#CCCCCC"> twenty thirty</font>

1772
01:16:03,719 --> 01:16:09,570
<font color="#E5E5E5">forty fifty time prepend means that it</font>

1773
01:16:06,480 --> 01:16:11,309
definitely<font color="#CCCCCC"> won't be used</font><font color="#E5E5E5"> well I have</font>

1774
01:16:09,570 --> 01:16:12,989
news if it's the<font color="#E5E5E5"> only path from the</font>

1775
01:16:11,310 --> 01:16:15,679
<font color="#E5E5E5">writing table</font><font color="#CCCCCC"> it's going</font><font color="#E5E5E5"> to be used no</font>

1776
01:16:12,989 --> 01:16:18,120
<font color="#E5E5E5">matter how long the</font><font color="#CCCCCC"> pick the s path is</font>

1777
01:16:15,679 --> 01:16:21,060
<font color="#E5E5E5">okay let's say the</font><font color="#CCCCCC"> Internet's on average</font>

1778
01:16:18,120 --> 01:16:23,219
is only five<font color="#E5E5E5"> es is deep maximum a s path</font>

1779
01:16:21,060 --> 01:16:27,360
prepend most<font color="#E5E5E5"> ISPs need to do is about</font>

1780
01:16:23,219 --> 01:16:30,420
five or six<font color="#E5E5E5"> also and in fact</font><font color="#CCCCCC"> semis use</font>

1781
01:16:27,360 --> 01:16:32,070
these days<font color="#E5E5E5"> lashley truncate the a s well</font>

1782
01:16:30,420 --> 01:16:34,650
they want truncate they'll throw away

1783
01:16:32,070 --> 01:16:38,880
prefixes that<font color="#E5E5E5"> are more than fifteen or</font>

1784
01:16:34,650 --> 01:16:41,099
twenty<font color="#E5E5E5"> guesses long okay so i've thrown</font>

1785
01:16:38,880 --> 01:16:44,699
in the<font color="#E5E5E5"> cisco version of the commander to</font>

1786
01:16:41,100 --> 01:16:45,610
chop out those prefixes<font color="#CCCCCC"> just be</font><font color="#E5E5E5"> aware</font>

1787
01:16:44,699 --> 01:16:47,559
<font color="#CCCCCC">that some ISP</font>

1788
01:16:45,610 --> 01:16:50,880
actually do this<font color="#CCCCCC"> so doing a 50</font><font color="#E5E5E5"> times</font>

1789
01:16:47,560 --> 01:16:53,170
pre-paint<font color="#CCCCCC"> is a waste of</font><font color="#E5E5E5"> time</font>

1790
01:16:50,880 --> 01:16:55,090
private<font color="#CCCCCC"> ESS should not ever appear in</font>

1791
01:16:53,170 --> 01:16:57,940
<font color="#CCCCCC">internet like private address space</font>

1792
01:16:55,090 --> 01:17:00,909
<font color="#CCCCCC">this should</font><font color="#E5E5E5"> get oust so again the</font>

1793
01:16:57,940 --> 01:17:03,669
vendors<font color="#E5E5E5"> have come to the aid of people</font>

1794
01:17:00,909 --> 01:17:06,580
using private ESS for local reasons in

1795
01:17:03,670 --> 01:17:10,389
the network example<font color="#E5E5E5"> is to remove private</font>

1796
01:17:06,580 --> 01:17:12,280
<font color="#CCCCCC">es command but</font><font color="#E5E5E5"> it only did</font><font color="#CCCCCC"> that would</font>

1797
01:17:10,389 --> 01:17:14,020
want<font color="#E5E5E5"> to move every instance of a private</font>

1798
01:17:12,280 --> 01:17:16,420
<font color="#E5E5E5">es so if you get a private</font><font color="#CCCCCC"> ear</font>

1799
01:17:14,020 --> 01:17:17,800
sandwiched between two public<font color="#CCCCCC"> es numbers</font>

1800
01:17:16,420 --> 01:17:19,770
that's not going to be<font color="#E5E5E5"> strip</font><font color="#CCCCCC"> type</font>

1801
01:17:17,800 --> 01:17:24,389
because that's a configuration error

1802
01:17:19,770 --> 01:17:27,280
<font color="#CCCCCC">okay so</font><font color="#E5E5E5"> you've got to watch that also</font>

1803
01:17:24,389 --> 01:17:30,520
<font color="#E5E5E5">right let's look at some connectivity</font>

1804
01:17:27,280 --> 01:17:34,929
problems<font color="#E5E5E5"> symptoms this</font><font color="#CCCCCC"> s ones</font><font color="#E5E5E5"> announcing</font>

1805
01:17:30,520 --> 01:17:37,869
a network<font color="#CCCCCC"> 181</font><font color="#E5E5E5"> succeed 1/24 to</font><font color="#CCCCCC"> s 2 but</font><font color="#E5E5E5"> a</font>

1806
01:17:34,929 --> 01:17:39,460
<font color="#E5E5E5">s 3 can't see it</font><font color="#CCCCCC"> okay good you got your</font>

1807
01:17:37,869 --> 01:17:41,559
friend or somebody<font color="#E5E5E5"> like</font><font color="#CCCCCC"> that or some of</font>

1808
01:17:39,460 --> 01:17:45,369
your customers<font color="#E5E5E5"> trying to reach in a s 3</font>

1809
01:17:41,560 --> 01:17:48,940
and well your<font color="#E5E5E5"> nights in the network but</font>

1810
01:17:45,369 --> 01:17:49,900
a s 3 can't see it this will introduce

1811
01:17:48,940 --> 01:17:52,449
the<font color="#E5E5E5"> checklists</font>

1812
01:17:49,900 --> 01:17:53,769
go to try and set up<font color="#E5E5E5"> a checklist to see</font>

1813
01:17:52,449 --> 01:17:56,199
<font color="#E5E5E5">how we're going</font><font color="#CCCCCC"> to work through this</font>

1814
01:17:53,770 --> 01:18:01,060
so yes 1:9 says but does he<font color="#CCCCCC"> has to see</font>

1815
01:17:56,199 --> 01:18:03,610
<font color="#E5E5E5">it well here we're checking the ebgp</font>

1816
01:18:01,060 --> 01:18:06,750
filters on<font color="#CCCCCC"> roger</font><font color="#E5E5E5"> 1 and writer to writer</font>

1817
01:18:03,610 --> 01:18:09,099
ones and<font color="#CCCCCC"> es one writer</font><font color="#E5E5E5"> 2 is an es to</font>

1818
01:18:06,750 --> 01:18:11,949
remember<font color="#E5E5E5"> that you need writer to access</font>

1819
01:18:09,100 --> 01:18:13,900
to do this that doesn't mean you send an

1820
01:18:11,949 --> 01:18:16,119
email<font color="#E5E5E5"> to your neighboring</font><font color="#CCCCCC"> highest PNC or</font>

1821
01:18:13,900 --> 01:18:17,440
you give me access to<font color="#E5E5E5"> your router you'll</font>

1822
01:18:16,119 --> 01:18:18,309
ask him<font color="#CCCCCC"> I'm trying</font><font color="#E5E5E5"> to troubleshoot</font>

1823
01:18:17,440 --> 01:18:20,169
blah-dee-blah

1824
01:18:18,310 --> 01:18:23,050
do you see this network on your

1825
01:18:20,170 --> 01:18:26,739
neighboring router<font color="#E5E5E5"> and if they do well</font>

1826
01:18:23,050 --> 01:18:30,219
then ask them to give you<font color="#CCCCCC"> a show output</font>

1827
01:18:26,739 --> 01:18:32,769
<font color="#E5E5E5">for that prefix does es to see it over</font>

1828
01:18:30,219 --> 01:18:36,610
the<font color="#CCCCCC"> entire network while he would check</font>

1829
01:18:32,770 --> 01:18:38,500
in ibgp across<font color="#CCCCCC"> s two's</font><font color="#E5E5E5"> network mainly in</font>

1830
01:18:36,610 --> 01:18:40,269
this particular<font color="#CCCCCC"> example</font><font color="#E5E5E5"> is not needed</font>

1831
01:18:38,500 --> 01:18:43,030
because<font color="#CCCCCC"> we've only</font><font color="#E5E5E5"> got</font><font color="#CCCCCC"> one writer but</font>

1832
01:18:40,270 --> 01:18:45,489
<font color="#E5E5E5">most are ESPYs have a large ibgp</font>

1833
01:18:43,030 --> 01:18:47,320
mesh<font color="#E5E5E5"> quite often</font><font color="#CCCCCC"> IBG peaceful</font>

1834
01:18:45,489 --> 01:18:49,750
<font color="#E5E5E5">misconfigured it could be a bright</font>

1835
01:18:47,320 --> 01:18:52,480
reflective problem it could be a lot<font color="#CCCCCC"> i</font>

1836
01:18:49,750 --> 01:18:54,060
<font color="#CCCCCC">BG</font><font color="#E5E5E5"> be mashed problem things that I've</font>

1837
01:18:52,480 --> 01:18:56,769
covered earlier in<font color="#E5E5E5"> the presentation</font>

1838
01:18:54,060 --> 01:18:57,610
<font color="#CCCCCC">ok</font><font color="#E5E5E5"> you want to check through some of the</font>

1839
01:18:56,770 --> 01:18:59,680
things<font color="#E5E5E5"> that</font><font color="#CCCCCC"> I</font>

1840
01:18:57,610 --> 01:19:04,330
<font color="#E5E5E5">I've</font><font color="#CCCCCC"> mentioned before but about the ibgp</font>

1841
01:18:59,680 --> 01:19:06,930
mesh does<font color="#CCCCCC"> as2 send it</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> as3</font><font color="#E5E5E5"> he were</font>

1842
01:19:04,330 --> 01:19:10,600
checking<font color="#E5E5E5"> ebgp configuration</font><font color="#CCCCCC"> Roger to</font>

1843
01:19:06,930 --> 01:19:12,340
towards<font color="#E5E5E5"> writer</font><font color="#CCCCCC"> three as it filters or s</font>

1844
01:19:10,600 --> 01:19:13,480
path filters of prefix list<font color="#E5E5E5"> of</font>

1845
01:19:12,340 --> 01:19:17,410
communities or something like that

1846
01:19:13,480 --> 01:19:20,080
causing a problem does<font color="#CCCCCC"> as3</font><font color="#E5E5E5"> see all of</font><font color="#CCCCCC"> a</font>

1847
01:19:17,410 --> 01:19:22,650
s<font color="#CCCCCC"> - s originated prefixes he were</font>

1848
01:19:20,080 --> 01:19:25,360
checking<font color="#CCCCCC"> ebgp configuration</font><font color="#E5E5E5"> in router</font><font color="#CCCCCC"> 3</font>

1849
01:19:22,650 --> 01:19:28,509
maybe s<font color="#E5E5E5"> 3 doesn't know to expect</font>

1850
01:19:25,360 --> 01:19:31,120
prefixes from<font color="#E5E5E5"> a s 1 but you can't go</font>

1851
01:19:28,510 --> 01:19:33,100
send you an email<font color="#E5E5E5"> to a s 3 saying</font><font color="#CCCCCC"> am I'm</font>

1852
01:19:31,120 --> 01:19:35,680
<font color="#CCCCCC">trying to</font><font color="#E5E5E5"> remove them because they're</font>

1853
01:19:33,100 --> 01:19:36,580
<font color="#E5E5E5">gonna say who you you're just somebody</font>

1854
01:19:35,680 --> 01:19:40,030
else<font color="#CCCCCC"> in</font><font color="#E5E5E5"> the Internet</font>

1855
01:19:36,580 --> 01:19:42,610
another of the 16,000<font color="#CCCCCC"> es is out there G</font>

1856
01:19:40,030 --> 01:19:45,639
<font color="#CCCCCC">you can need to</font><font color="#E5E5E5"> rely</font><font color="#CCCCCC"> on your near</font><font color="#E5E5E5"> boat</font>

1857
01:19:42,610 --> 01:19:50,830
yes - - they work with a<font color="#E5E5E5"> s 3 to figure</font>

1858
01:19:45,640 --> 01:19:52,420
out what's<font color="#E5E5E5"> going on cooperation okay so</font>

1859
01:19:50,830 --> 01:19:54,760
troubleshooting<font color="#E5E5E5"> connectivity beyond</font>

1860
01:19:52,420 --> 01:19:56,290
immediate peers<font color="#E5E5E5"> is much harder</font><font color="#CCCCCC"> relies on</font>

1861
01:19:54,760 --> 01:19:58,480
<font color="#CCCCCC">you appear to assist you</font>

1862
01:19:56,290 --> 01:20:01,780
they have relationship<font color="#CCCCCC"> with the peers</font>

1863
01:19:58,480 --> 01:20:05,589
not you<font color="#CCCCCC"> ok so sending the email saying</font><font color="#E5E5E5"> I</font>

1864
01:20:01,780 --> 01:20:07,360
is not gonna work<font color="#E5E5E5"> might mean people are</font>

1865
01:20:05,590 --> 01:20:09,610
generally friendly and cooperative and

1866
01:20:07,360 --> 01:20:11,740
<font color="#E5E5E5">helpful in Internet so they may be</font>

1867
01:20:09,610 --> 01:20:16,179
sympathetic<font color="#CCCCCC"> whether</font><font color="#E5E5E5"> they may choose</font><font color="#CCCCCC"> to</font>

1868
01:20:11,740 --> 01:20:19,090
ignore you as well okay what about<font color="#E5E5E5"> this</font>

1869
01:20:16,180 --> 01:20:22,540
<font color="#CCCCCC">s1 announces picked a real network this</font>

1870
01:20:19,090 --> 01:20:24,970
was my DSL<font color="#CCCCCC"> network at home that law</font><font color="#E5E5E5"> is</font>

1871
01:20:22,540 --> 01:20:26,200
no more but anyway was my DSL<font color="#E5E5E5"> network at</font>

1872
01:20:24,970 --> 01:20:31,620
<font color="#CCCCCC">home so it's a bit more</font><font color="#E5E5E5"> of a real</font>

1873
01:20:26,200 --> 01:20:31,620
example<font color="#E5E5E5"> the ass is still on feel better</font>

1874
01:20:31,650 --> 01:20:38,559
so I'm announcing this<font color="#E5E5E5"> to the upstreams</font>

1875
01:20:35,110 --> 01:20:42,040
in<font color="#CCCCCC"> Internet</font><font color="#E5E5E5"> but the air street can't see</font>

1876
01:20:38,560 --> 01:20:43,000
the<font color="#E5E5E5"> network at all s1 announces do the</font>

1877
01:20:42,040 --> 01:20:46,300
upstream see it

1878
01:20:43,000 --> 01:20:48,250
checking ebgp blah blah blah<font color="#E5E5E5"> blah</font><font color="#CCCCCC"> ok we</font>

1879
01:20:46,300 --> 01:20:50,560
need supporter here up streams to

1880
01:20:48,250 --> 01:20:53,920
actually try and<font color="#E5E5E5"> do this is the prefix</font>

1881
01:20:50,560 --> 01:20:56,140
visible anywhere on the<font color="#E5E5E5"> Internet well</font>

1882
01:20:53,920 --> 01:20:57,880
that's a harder<font color="#CCCCCC"> ask now this doesn't</font>

1883
01:20:56,140 --> 01:20:59,260
mean<font color="#E5E5E5"> you go sending lots of emails to</font>

1884
01:20:57,880 --> 01:21:02,070
everybody<font color="#CCCCCC"> on the internet saying do you</font>

1885
01:20:59,260 --> 01:21:02,070
see my prefix

1886
01:21:02,480 --> 01:21:09,329
next slide is actually<font color="#E5E5E5"> going to show how</font>

1887
01:21:05,010 --> 01:21:10,829
<font color="#E5E5E5">you do that the looking blast the</font>

1888
01:21:09,329 --> 01:21:13,409
<font color="#CCCCCC">looking-glass is probably the most</font>

1889
01:21:10,829 --> 01:21:15,900
<font color="#E5E5E5">valuable important tool</font><font color="#CCCCCC"> for</font>

1890
01:21:13,409 --> 01:21:20,039
troubleshooting<font color="#CCCCCC"> BGP outside of your</font>

1891
01:21:15,900 --> 01:21:22,619
<font color="#CCCCCC">network there</font><font color="#E5E5E5"> are many networks around</font>

1892
01:21:20,039 --> 01:21:26,309
<font color="#E5E5E5">the globe which will run a looking-glass</font>

1893
01:21:22,619 --> 01:21:28,409
they basically<font color="#CCCCCC"> at UC BGP table</font><font color="#E5E5E5"> and often</font>

1894
01:21:26,309 --> 01:21:32,719
like to run simple ping or trace<font color="#E5E5E5"> writes</font>

1895
01:21:28,409 --> 01:21:35,759
from them as<font color="#E5E5E5"> well www.redcross.org</font><font color="#CCCCCC"> boss</font>

1896
01:21:32,719 --> 01:21:39,269
what's all the sites that well the

1897
01:21:35,760 --> 01:21:41,699
collector actually knows of for<font color="#CCCCCC"> Frankie</font>

1898
01:21:39,269 --> 01:21:43,860
<font color="#CCCCCC">before and there's an equivalent site</font>

1899
01:21:41,699 --> 01:21:47,070
for all the ipv6<font color="#E5E5E5"> looking-glasses as well</font>

1900
01:21:43,860 --> 01:21:50,039
they mostly trace right<font color="#E5E5E5"> but some of them</font>

1901
01:21:47,070 --> 01:21:53,190
will<font color="#E5E5E5"> also</font><font color="#CCCCCC"> actually let you see the BGP</font>

1902
01:21:50,039 --> 01:21:55,230
<font color="#E5E5E5">output from them many people still use</font>

1903
01:21:53,190 --> 01:21:57,299
the original nitrous to dodge<font color="#CCCCCC"> X net</font>

1904
01:21:55,230 --> 01:22:00,209
which is<font color="#CCCCCC"> the first lookingglass that I</font>

1905
01:21:57,300 --> 01:22:01,619
was certainly aware of<font color="#E5E5E5"> ok so I've got</font>

1906
01:22:00,210 --> 01:22:03,539
<font color="#E5E5E5">some examples if you've never seen a</font>

1907
01:22:01,619 --> 01:22:06,210
<font color="#E5E5E5">lookingglass before while I just picked</font>

1908
01:22:03,539 --> 01:22:10,500
the right<font color="#CCCCCC"> Ben</font><font color="#E5E5E5"> CeCe's wrist service just</font>

1909
01:22:06,210 --> 01:22:12,119
<font color="#CCCCCC">because it was there so you got</font>

1910
01:22:10,500 --> 01:22:13,860
<font color="#E5E5E5">something</font><font color="#CCCCCC"> like</font><font color="#E5E5E5"> that you've got various</font>

1911
01:22:12,119 --> 01:22:16,230
<font color="#CCCCCC">sites you can go to as you see in this</font>

1912
01:22:13,860 --> 01:22:18,150
screenshot<font color="#CCCCCC"> that's just</font><font color="#E5E5E5"> a lot</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> things</font>

1913
01:22:16,230 --> 01:22:20,308
well about<font color="#E5E5E5"> a year or so old now but</font>

1914
01:22:18,150 --> 01:22:21,869
<font color="#E5E5E5">those were the sites that they they had</font>

1915
01:22:20,309 --> 01:22:23,519
a present size you could<font color="#E5E5E5"> go to any</font><font color="#CCCCCC"> of</font>

1916
01:22:21,869 --> 01:22:27,960
those routers and have a look at the

1917
01:22:23,519 --> 01:22:30,329
writing-table<font color="#CCCCCC"> and then I went to</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> RC</font>

1918
01:22:27,960 --> 01:22:33,510
<font color="#CCCCCC">0-1 box</font><font color="#E5E5E5"> at the links which is</font><font color="#CCCCCC"> in London</font>

1919
01:22:30,329 --> 01:22:37,079
<font color="#CCCCCC">and did</font><font color="#E5E5E5"> a</font><font color="#CCCCCC"> show IP</font><font color="#E5E5E5"> BGP for my two or</font>

1920
01:22:33,510 --> 01:22:41,579
<font color="#E5E5E5">three</font><font color="#CCCCCC"> 51 206 Network</font><font color="#E5E5E5"> and there we have I</font>

1921
01:22:37,079 --> 01:22:43,619
put<font color="#CCCCCC"> 4 - 3 42 0</font><font color="#E5E5E5"> / 14 and</font><font color="#CCCCCC"> it's heard from</font>

1922
01:22:41,579 --> 01:22:46,500
three different neighbors so the<font color="#E5E5E5"> three</font>

1923
01:22:43,619 --> 01:22:49,739
possible paths to it<font color="#CCCCCC"> that</font><font color="#E5E5E5"> means that</font>

1924
01:22:46,500 --> 01:22:51,840
this<font color="#CCCCCC"> Looking Glass I can see that my</font>

1925
01:22:49,739 --> 01:22:54,989
network<font color="#E5E5E5"> with being a nice as part of a /</font>

1926
01:22:51,840 --> 01:22:57,110
14 aggregate so this<font color="#CCCCCC"> is that was</font>

1927
01:22:54,989 --> 01:23:00,178
complaining that it couldn't see my

1928
01:22:57,110 --> 01:23:01,768
network<font color="#E5E5E5"> the problem is more likely</font><font color="#CCCCCC"> to be</font>

1929
01:23:00,179 --> 01:23:04,650
closer<font color="#E5E5E5"> to them it's something nowhere</font>

1930
01:23:01,769 --> 01:23:07,320
near<font color="#E5E5E5"> here because here they can look</font><font color="#CCCCCC"> for</font>

1931
01:23:04,650 --> 01:23:09,599
<font color="#E5E5E5">three possible paths or</font><font color="#CCCCCC"> we're back to -</font>

1932
01:23:07,320 --> 01:23:11,739
Australia

1933
01:23:09,600 --> 01:23:14,350
okay so the<font color="#CCCCCC"> looking glass' can see the</font>

1934
01:23:11,739 --> 01:23:16,389
14 so the problem<font color="#CCCCCC"> must be closer to a s3</font>

1935
01:23:14,350 --> 01:23:17,980
<font color="#E5E5E5">and a trace right confirms the</font>

1936
01:23:16,390 --> 01:23:21,270
connectivity so here I've done a<font color="#CCCCCC"> traced</font>

1937
01:23:17,980 --> 01:23:31,719
<font color="#CCCCCC">right from</font><font color="#E5E5E5"> the from</font><font color="#CCCCCC"> lookingglass</font><font color="#E5E5E5"> and</font>

1938
01:23:21,270 --> 01:23:33,310
<font color="#CCCCCC">starts at London</font><font color="#E5E5E5"> and then goes to the</font>

1939
01:23:31,720 --> 01:23:36,580
<font color="#E5E5E5">task for</font><font color="#CCCCCC"> network all</font><font color="#E5E5E5"> the way up to</font>

1940
01:23:33,310 --> 01:23:37,810
Brisbane<font color="#CCCCCC"> ok so that's the</font><font color="#E5E5E5"> sort of thing</font>

1941
01:23:36,580 --> 01:23:40,140
that you<font color="#E5E5E5"> can do and you can see</font><font color="#CCCCCC"> from a</font>

1942
01:23:37,810 --> 01:23:42,010
list<font color="#CCCCCC"> fingers</font><font color="#E5E5E5"> show BGP BGP summary</font>

1943
01:23:40,140 --> 01:23:45,000
neighbors you<font color="#E5E5E5"> can put regular</font>

1944
01:23:42,010 --> 01:23:47,710
expressions<font color="#CCCCCC"> in you can</font><font color="#E5E5E5"> tell the paths</font>

1945
01:23:45,000 --> 01:23:50,890
<font color="#CCCCCC">I'm not sure how the</font><font color="#E5E5E5"> version useful but</font>

1946
01:23:47,710 --> 01:23:53,710
<font color="#CCCCCC">you can do trace route and</font><font color="#E5E5E5"> pink that's</font>

1947
01:23:50,890 --> 01:23:57,060
<font color="#E5E5E5">that's typical of most of the looking</font>

1948
01:23:53,710 --> 01:23:59,530
<font color="#E5E5E5">glasses</font><font color="#CCCCCC"> you get around the internet</font>

1949
01:23:57,060 --> 01:24:03,010
another place you can<font color="#E5E5E5"> go</font><font color="#CCCCCC"> to is right</font>

1950
01:23:59,530 --> 01:24:05,679
views<font color="#E5E5E5"> I've I use right views and the</font>

1951
01:24:03,010 --> 01:24:06,880
nitrous<font color="#CCCCCC"> Looking Glass</font><font color="#E5E5E5"> site from my early</font>

1952
01:24:05,680 --> 01:24:09,190
days<font color="#E5E5E5"> because they've been around for a</font>

1953
01:24:06,880 --> 01:24:10,810
long long<font color="#E5E5E5"> long time</font><font color="#CCCCCC"> and right for use -</font>

1954
01:24:09,190 --> 01:24:13,480
<font color="#CCCCCC">the real router that</font><font color="#E5E5E5"> you can log into</font>

1955
01:24:10,810 --> 01:24:15,460
and well when I put the slide together

1956
01:24:13,480 --> 01:24:17,650
<font color="#E5E5E5">it had around 60 peers it could well be</font>

1957
01:24:15,460 --> 01:24:20,350
more than<font color="#E5E5E5"> that we'll find out in the</font>

1958
01:24:17,650 --> 01:24:24,000
<font color="#CCCCCC">next</font><font color="#E5E5E5"> couple of days but</font><font color="#CCCCCC"> another</font><font color="#E5E5E5"> report</font>

1959
01:24:20,350 --> 01:24:26,650
on<font color="#E5E5E5"> the right views system okay again</font>

1960
01:24:24,000 --> 01:24:29,110
<font color="#CCCCCC">WWWF used to org explains what the</font>

1961
01:24:26,650 --> 01:24:30,849
<font color="#CCCCCC">projects about you get access to</font><font color="#E5E5E5"> real</font>

1962
01:24:29,110 --> 01:24:33,070
writers are saying so you can do a show

1963
01:24:30,850 --> 01:24:36,280
IP<font color="#E5E5E5"> BGP or</font><font color="#CCCCCC"> it can do a trace or whatever</font>

1964
01:24:33,070 --> 01:24:38,650
else you want<font color="#E5E5E5"> to do okay so that's the</font>

1965
01:24:36,280 --> 01:24:40,030
two places you<font color="#E5E5E5"> can</font><font color="#CCCCCC"> go but looking glass</font>

1966
01:24:38,650 --> 01:24:42,610
and<font color="#CCCCCC"> alright views</font>

1967
01:24:40,030 --> 01:24:46,420
extremely viable and letting you find

1968
01:24:42,610 --> 01:24:50,019
out problems and on the<font color="#E5E5E5"> global scale</font><font color="#CCCCCC"> for</font>

1969
01:24:46,420 --> 01:24:52,840
the network reach<font color="#CCCCCC"> ability right</font><font color="#E5E5E5"> getting</font>

1970
01:24:50,020 --> 01:24:56,680
back to the here right does<font color="#CCCCCC"> s3s upstream</font>

1971
01:24:52,840 --> 01:24:59,920
<font color="#E5E5E5">sender to</font><font color="#CCCCCC"> es3 well what you do</font><font color="#E5E5E5"> is you</font>

1972
01:24:56,680 --> 01:25:02,200
try and find out from the a s path<font color="#E5E5E5"> hue</font>

1973
01:24:59,920 --> 01:25:04,510
<font color="#CCCCCC">s3 is upstream</font><font color="#E5E5E5"> is because e s3 is</font>

1974
01:25:02,200 --> 01:25:06,970
<font color="#E5E5E5">announcing networks so you can find out</font>

1975
01:25:04,510 --> 01:25:08,980
<font color="#E5E5E5">from them what the s path is and then</font>

1976
01:25:06,970 --> 01:25:11,140
you can<font color="#CCCCCC"> try and figure out from there</font>

1977
01:25:08,980 --> 01:25:14,049
<font color="#E5E5E5">upstream if they can see the prefix if</font>

1978
01:25:11,140 --> 01:25:16,349
if s3 is upstream<font color="#E5E5E5"> is running a looking</font>

1979
01:25:14,050 --> 01:25:17,760
last<font color="#CCCCCC"> big book looking-glass there</font>

1980
01:25:16,349 --> 01:25:19,889
and you can see if you can see it if

1981
01:25:17,760 --> 01:25:21,739
they're not<font color="#E5E5E5"> that tryingo as close as you</font>

1982
01:25:19,889 --> 01:25:24,449
can

1983
01:25:21,739 --> 01:25:26,759
does the s3 see any of<font color="#CCCCCC"> ayres</font><font color="#E5E5E5"> ones</font>

1984
01:25:24,449 --> 01:25:29,280
originated prefixes<font color="#CCCCCC"> I mean if they can't</font>

1985
01:25:26,760 --> 01:25:32,489
see you a<font color="#E5E5E5"> particular slash 24 can</font><font color="#CCCCCC"> they</font>

1986
01:25:29,280 --> 01:25:34,409
see anything<font color="#E5E5E5"> from</font><font color="#CCCCCC"> you at all</font><font color="#E5E5E5"> okay and</font>

1987
01:25:32,489 --> 01:25:35,940
that way you meet there may be some type

1988
01:25:34,409 --> 01:25:38,040
<font color="#CCCCCC">of filtering</font><font color="#E5E5E5"> that's going on in s3</font>

1989
01:25:35,940 --> 01:25:42,169
somewhere they may be specifically

1990
01:25:38,040 --> 01:25:45,119
brought blocking your network who knows

1991
01:25:42,170 --> 01:25:47,880
<font color="#E5E5E5">okay troubleshooting across the</font><font color="#CCCCCC"> Internet</font>

1992
01:25:45,119 --> 01:25:50,780
is generally harder<font color="#E5E5E5"> but the tools that</font>

1993
01:25:47,880 --> 01:25:54,900
you've got of all<font color="#E5E5E5"> the</font><font color="#CCCCCC"> looking-glasses</font>

1994
01:25:50,780 --> 01:25:56,579
<font color="#E5E5E5">traceroute ping</font><font color="#CCCCCC"> BGP status and so forth</font>

1995
01:25:54,900 --> 01:25:58,170
available all over<font color="#CCCCCC"> the</font><font color="#E5E5E5"> globe</font><font color="#CCCCCC"> I have no</font>

1996
01:25:56,579 --> 01:25:59,909
<font color="#CCCCCC">idea how many</font><font color="#E5E5E5"> looking</font><font color="#CCCCCC"> glasses there are</font>

1997
01:25:58,170 --> 01:26:02,369
I mean<font color="#CCCCCC"> to be honest I haven't</font><font color="#E5E5E5"> looked at</font>

1998
01:25:59,909 --> 01:26:04,409
the trace<font color="#CCCCCC"> driver</font><font color="#E5E5E5"> org website in quite a</font>

1999
01:26:02,369 --> 01:26:06,360
<font color="#E5E5E5">while because I mean I've got</font><font color="#CCCCCC"> my</font>

2000
01:26:04,409 --> 01:26:08,129
<font color="#CCCCCC">favourites</font><font color="#E5E5E5"> that Hughie's</font><font color="#CCCCCC"> that they're in</font>

2001
01:26:06,360 --> 01:26:12,210
my browser and<font color="#E5E5E5"> that's it that's all</font><font color="#CCCCCC"> I</font>

2002
01:26:08,130 --> 01:26:13,500
<font color="#E5E5E5">really need</font><font color="#CCCCCC"> to deal with</font><font color="#E5E5E5"> but those I'm</font>

2003
01:26:12,210 --> 01:26:15,599
sure there's at least one in every

2004
01:26:13,500 --> 01:26:17,909
country<font color="#CCCCCC"> of the world</font><font color="#E5E5E5"> if</font><font color="#CCCCCC"> not close closer</font>

2005
01:26:15,599 --> 01:26:21,440
to that so it should allow the vast

2006
01:26:17,909 --> 01:26:24,809
majority<font color="#CCCCCC"> of situations to</font><font color="#E5E5E5"> be dealt with</font>

2007
01:26:21,440 --> 01:26:26,369
<font color="#E5E5E5">okay what about this third example the</font>

2008
01:26:24,810 --> 01:26:27,719
<font color="#E5E5E5">s-1 is trying to load share between</font><font color="#CCCCCC"> his</font>

2009
01:26:26,369 --> 01:26:31,170
up streams but it's trouble getting

2010
01:26:27,719 --> 01:26:32,460
<font color="#E5E5E5">traffic through the s2 link</font><font color="#CCCCCC"> while you're</font>

2011
01:26:31,170 --> 01:26:34,170
trying<font color="#E5E5E5"> to find what trouble means</font>

2012
01:26:32,460 --> 01:26:37,020
getting<font color="#CCCCCC"> a</font><font color="#E5E5E5"> report from a customer saying</font>

2013
01:26:34,170 --> 01:26:39,810
trouble<font color="#E5E5E5"> there's like oh yeah information</font>

2014
01:26:37,020 --> 01:26:42,270
please<font color="#CCCCCC"> it sideband traffic load sharing</font>

2015
01:26:39,810 --> 01:26:44,190
<font color="#E5E5E5">okay so you can usually fix this by</font>

2016
01:26:42,270 --> 01:26:47,159
selectively rejecting prefixes

2017
01:26:44,190 --> 01:26:48,329
that's all<font color="#CCCCCC"> multihoming okay that's it's</font>

2018
01:26:47,159 --> 01:26:50,009
not<font color="#CCCCCC"> really</font><font color="#E5E5E5"> a troubleshooting thing</font>

2019
01:26:48,329 --> 01:26:51,570
that's trying to configure a<font color="#CCCCCC"> multihoming</font>

2020
01:26:50,010 --> 01:26:54,060
<font color="#E5E5E5">that's easy to fix</font>

2021
01:26:51,570 --> 01:26:55,889
inbound traffic load sharing<font color="#E5E5E5"> is harder</font>

2022
01:26:54,060 --> 01:26:59,820
to<font color="#E5E5E5"> do okay</font>

2023
01:26:55,889 --> 01:27:03,060
and yes I<font color="#E5E5E5"> mean you can do s</font><font color="#CCCCCC"> path</font><font color="#E5E5E5"> pre</font>

2024
01:26:59,820 --> 01:27:05,309
<font color="#CCCCCC">pans</font><font color="#E5E5E5"> and you can fiddle around with</font>

2025
01:27:03,060 --> 01:27:07,320
communities and<font color="#CCCCCC"> ME DS and leaking sub</font>

2026
01:27:05,310 --> 01:27:09,659
prefixes<font color="#E5E5E5"> and all the rest standard</font>

2027
01:27:07,320 --> 01:27:11,519
<font color="#E5E5E5">multihoming practice and click</font>

2028
01:27:09,659 --> 01:27:13,699
configuration practice did they do

2029
01:27:11,520 --> 01:27:16,849
<font color="#E5E5E5">nothing then you've got to look deeper</font>

2030
01:27:13,699 --> 01:27:18,928
yes<font color="#E5E5E5"> one</font><font color="#CCCCCC"> analysis but does s2 see it</font>

2031
01:27:16,849 --> 01:27:21,780
checking the filters were working

2032
01:27:18,929 --> 01:27:24,210
<font color="#E5E5E5">through the checklist again okay same</font>

2033
01:27:21,780 --> 01:27:25,710
checklists<font color="#E5E5E5"> does he has to</font><font color="#CCCCCC"> send</font><font color="#E5E5E5"> it</font>

2034
01:27:24,210 --> 01:27:27,869
<font color="#E5E5E5">upstream checking configuration</font>

2035
01:27:25,710 --> 01:27:29,450
checklist<font color="#E5E5E5"> when I'm going</font><font color="#CCCCCC"> through the</font>

2036
01:27:27,869 --> 01:27:31,910
process of checking these

2037
01:27:29,450 --> 01:27:34,160
<font color="#E5E5E5">checklist in any how does the internet</font>

2038
01:27:31,910 --> 01:27:37,070
<font color="#E5E5E5">see all</font><font color="#CCCCCC"> of us to s originated prefixes</font>

2039
01:27:34,160 --> 01:27:40,010
for checking<font color="#CCCCCC"> EB cheaper configuration</font><font color="#E5E5E5"> by</font>

2040
01:27:37,070 --> 01:27:41,960
looking on other Internet routers which

2041
01:27:40,010 --> 01:27:45,020
usually means looking<font color="#CCCCCC"> at the looking</font>

2042
01:27:41,960 --> 01:27:48,230
<font color="#E5E5E5">glasses</font><font color="#CCCCCC"> they're the best ways of trying</font>

2043
01:27:45,020 --> 01:27:50,210
<font color="#E5E5E5">to find out what's going on okay</font>

2044
01:27:48,230 --> 01:27:53,809
checklist<font color="#CCCCCC"> repeat all of those above for</font>

2045
01:27:50,210 --> 01:27:55,160
a<font color="#CCCCCC"> s3 okay of course what happens</font><font color="#E5E5E5"> then</font>

2046
01:27:53,810 --> 01:27:57,650
people<font color="#E5E5E5"> will do that and then they say</font>

2047
01:27:55,160 --> 01:27:59,570
<font color="#E5E5E5">hmm no dear okay let's do a huge</font><font color="#CCCCCC"> prepare</font>

2048
01:27:57,650 --> 01:28:02,000
and that will solve the<font color="#CCCCCC"> problem it's not</font>

2049
01:27:59,570 --> 01:28:04,130
<font color="#E5E5E5">going to as I said before</font><font color="#CCCCCC"> huge prepend</font>

2050
01:28:02,000 --> 01:28:07,910
if<font color="#CCCCCC"> you</font><font color="#E5E5E5"> the only path it's not gonna make</font>

2051
01:28:04,130 --> 01:28:09,740
any difference whatsoever so here you

2052
01:28:07,910 --> 01:28:12,559
try and break it down<font color="#E5E5E5"> to</font><font color="#CCCCCC"> smaller pieces</font>

2053
01:28:09,740 --> 01:28:15,219
the s2 is not seeing<font color="#E5E5E5"> s once prefix or</font>

2054
01:28:12,560 --> 01:28:18,140
<font color="#E5E5E5">it's blocking</font><font color="#CCCCCC"> it and inbound</font><font color="#E5E5E5"> filters</font>

2055
01:28:15,220 --> 01:28:19,640
<font color="#E5E5E5">okay so that's fairly obvious</font><font color="#CCCCCC"> what</font>

2056
01:28:18,140 --> 01:28:21,530
<font color="#CCCCCC">you've got to try</font><font color="#E5E5E5"> and do there so</font><font color="#CCCCCC"> you</font>

2057
01:28:19,640 --> 01:28:24,320
just<font color="#CCCCCC"> go to your</font><font color="#E5E5E5"> neighbor and see yeah</font>

2058
01:28:21,530 --> 01:28:26,540
boy<font color="#E5E5E5"> fix this if there's a trickle of</font>

2059
01:28:24,320 --> 01:28:28,490
inbound traffic<font color="#E5E5E5"> well if you're around to</font>

2060
01:28:26,540 --> 01:28:30,500
support something like net flow<font color="#E5E5E5"> where</font>

2061
01:28:28,490 --> 01:28:33,050
you can see the actual<font color="#E5E5E5"> traffic flow the</font>

2062
01:28:30,500 --> 01:28:34,700
source destination<font color="#E5E5E5"> address of all the</font>

2063
01:28:33,050 --> 01:28:37,430
packets<font color="#E5E5E5"> coming into your into your</font>

2064
01:28:34,700 --> 01:28:40,340
<font color="#E5E5E5">network switch it on have a look</font><font color="#CCCCCC"> where</font>

2065
01:28:37,430 --> 01:28:41,990
<font color="#E5E5E5">where the packets coming from is it just</font>

2066
01:28:40,340 --> 01:28:43,970
from your upstream ISP<font color="#E5E5E5"> and nowhere else</font>

2067
01:28:41,990 --> 01:28:48,320
<font color="#CCCCCC">then he's</font><font color="#E5E5E5"> probably not announcing your</font>

2068
01:28:43,970 --> 01:28:50,300
prefix out to his peers okay<font color="#E5E5E5"> look for</font>

2069
01:28:48,320 --> 01:28:52,849
<font color="#E5E5E5">the clues and some of the other tools</font>

2070
01:28:50,300 --> 01:28:54,680
<font color="#E5E5E5">that are available if they claim that</font>

2071
01:28:52,850 --> 01:28:57,590
<font color="#CCCCCC">they are announcing it ask their</font>

2072
01:28:54,680 --> 01:28:58,910
upstream if they'll answer<font color="#E5E5E5"> you or just</font>

2073
01:28:57,590 --> 01:29:02,480
use a<font color="#E5E5E5"> lookingglass because it's bound to</font>

2074
01:28:58,910 --> 01:29:04,940
<font color="#CCCCCC">be one close bar if there's a light flow</font>

2075
01:29:02,480 --> 01:29:07,370
of traffic<font color="#CCCCCC"> commuters to but say 50% less</font>

2076
01:29:04,940 --> 01:29:08,799
than<font color="#CCCCCC"> from es3</font><font color="#E5E5E5"> use the</font><font color="#CCCCCC"> looking-glasses to</font>

2077
01:29:07,370 --> 01:29:11,210
try and figure out what's going<font color="#CCCCCC"> on</font><font color="#E5E5E5"> there</font>

2078
01:29:08,800 --> 01:29:13,210
<font color="#E5E5E5">meaning maybe communities that are</font>

2079
01:29:11,210 --> 01:29:15,920
setting weights<font color="#CCCCCC"> onto the</font><font color="#E5E5E5"> different</font>

2080
01:29:13,210 --> 01:29:18,920
prefixes<font color="#CCCCCC"> that could be filters going</font><font color="#E5E5E5"> on</font>

2081
01:29:15,920 --> 01:29:21,140
<font color="#E5E5E5">anything like that</font><font color="#CCCCCC"> I'll try</font><font color="#E5E5E5"> and use net</font>

2082
01:29:18,920 --> 01:29:22,940
<font color="#E5E5E5">flow to figure out the source address of</font>

2083
01:29:21,140 --> 01:29:24,680
the packets<font color="#CCCCCC"> that are coming in</font><font color="#E5E5E5"> to the</font>

2084
01:29:22,940 --> 01:29:26,969
<font color="#CCCCCC">network and you can see what what's</font>

2085
01:29:24,680 --> 01:29:30,059
going<font color="#E5E5E5"> on</font>

2086
01:29:26,969 --> 01:29:33,570
<font color="#E5E5E5">okay example</font><font color="#CCCCCC"> four</font><font color="#E5E5E5"> don't quite have time</font>

2087
01:29:30,059 --> 01:29:37,110
<font color="#CCCCCC">to go through this but again</font>

2088
01:29:33,570 --> 01:29:39,030
<font color="#CCCCCC">looking-glasses</font><font color="#E5E5E5"> try and figure out layer</font>

2089
01:29:37,110 --> 01:29:41,759
two problems right flap damping can

2090
01:29:39,030 --> 01:29:43,920
cause an issue as well<font color="#E5E5E5"> okay</font><font color="#CCCCCC"> but flap</font>

2091
01:29:41,760 --> 01:29:45,949
damping can cause interesting and

2092
01:29:43,920 --> 01:29:50,610
unknown things<font color="#E5E5E5"> to happen on the network</font>

2093
01:29:45,949 --> 01:29:51,928
it can<font color="#E5E5E5"> cause situations that may be a</font>

2094
01:29:50,610 --> 01:29:53,280
transient<font color="#CCCCCC"> it could be causing</font><font color="#E5E5E5"> problems</font>

2095
01:29:51,929 --> 01:29:55,260
<font color="#CCCCCC">for an hour or</font><font color="#E5E5E5"> so and then they</font>

2096
01:29:53,280 --> 01:29:59,728
disappear altogether<font color="#CCCCCC"> and you're not</font>

2097
01:29:55,260 --> 01:30:02,010
quite<font color="#CCCCCC"> sure what's going on okay as I say</font>

2098
01:29:59,729 --> 01:30:04,769
many ISPs will<font color="#E5E5E5"> actually implement right</font>

2099
01:30:02,010 --> 01:30:09,239
flap damping<font color="#E5E5E5"> many ISPs use the vendor</font>

2100
01:30:04,769 --> 01:30:12,420
defaults<font color="#CCCCCC"> I'm of the opinion that vendor</font>

2101
01:30:09,239 --> 01:30:14,759
defaults<font color="#CCCCCC"> are far too severe we've got</font>

2102
01:30:12,420 --> 01:30:18,090
the<font color="#E5E5E5"> right 59 virus which a working group</font>

2103
01:30:14,760 --> 01:30:20,039
<font color="#CCCCCC">of us put together well it's been</font><font color="#E5E5E5"> going</font>

2104
01:30:18,090 --> 01:30:21,989
for<font color="#E5E5E5"> a</font><font color="#CCCCCC"> few years now but</font><font color="#E5E5E5"> right digitizing</font>

2105
01:30:20,039 --> 01:30:24,960
it it's document and there's opinion

2106
01:30:21,989 --> 01:30:29,940
that those even are<font color="#CCCCCC"> too severe</font><font color="#E5E5E5"> as enough</font>

2107
01:30:24,960 --> 01:30:32,039
<font color="#E5E5E5">in that</font><font color="#CCCCCC"> paper there</font><font color="#E5E5E5"> again try and look</font>

2108
01:30:29,940 --> 01:30:33,690
at<font color="#E5E5E5"> looking glasses looking</font><font color="#CCCCCC"> glasses you</font>

2109
01:30:32,039 --> 01:30:36,239
can display the flap damping this is

2110
01:30:33,690 --> 01:30:42,138
from the<font color="#CCCCCC"> nitrous dye</font><font color="#E5E5E5"> Jake's net looking</font>

2111
01:30:36,239 --> 01:30:45,449
glass these prefixes happy on the router

2112
01:30:42,139 --> 01:30:48,780
<font color="#E5E5E5">have no gone but we're hanging on for</font>

2113
01:30:45,449 --> 01:30:51,348
<font color="#E5E5E5">historical reasons okay</font><font color="#CCCCCC"> damping can</font>

2114
01:30:48,780 --> 01:30:51,349
cause issues

2115
01:30:53,040 --> 01:30:57,790
but then we can<font color="#E5E5E5"> cause connectivity to</font>

2116
01:30:55,930 --> 01:30:58,990
persist<font color="#E5E5E5"> the alternative paths even</font>

2117
01:30:57,790 --> 01:31:01,990
<font color="#CCCCCC">though the primary paths have been</font>

2118
01:30:58,990 --> 01:31:03,760
<font color="#E5E5E5">restored</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> got to kind of watch it the</font>

2119
01:31:01,990 --> 01:31:06,219
common symptom is bizarre routing<font color="#E5E5E5"> that</font>

2120
01:31:03,760 --> 01:31:09,220
will just clear up automatically<font color="#CCCCCC"> in an</font>

2121
01:31:06,220 --> 01:31:12,100
hour<font color="#E5E5E5"> or so and you think well well what</font>

2122
01:31:09,220 --> 01:31:13,570
nuts<font color="#E5E5E5"> going on here okay so try and</font><font color="#CCCCCC"> be</font>

2123
01:31:12,100 --> 01:31:15,610
aware of that<font color="#E5E5E5"> and there's not a lot</font><font color="#CCCCCC"> you</font>

2124
01:31:13,570 --> 01:31:17,469
can<font color="#CCCCCC"> do about it you might be able</font><font color="#E5E5E5"> to try</font>

2125
01:31:15,610 --> 01:31:19,630
<font color="#CCCCCC">and persuade your upstream to clear the</font>

2126
01:31:17,470 --> 01:31:21,940
damping settings<font color="#E5E5E5"> that he has but it</font>

2127
01:31:19,630 --> 01:31:24,370
could be more<font color="#E5E5E5"> often a problem somewhere</font>

2128
01:31:21,940 --> 01:31:26,410
<font color="#E5E5E5">else in the wider net</font><font color="#CCCCCC"> I'm just nothing</font>

2129
01:31:24,370 --> 01:31:30,849
you<font color="#E5E5E5"> can do about it apart from just let</font>

2130
01:31:26,410 --> 01:31:33,340
it slip<font color="#CCCCCC"> by so just a quick summary</font><font color="#E5E5E5"> of</font>

2131
01:31:30,850 --> 01:31:37,660
all<font color="#E5E5E5"> this most troubleshooting is about</font>

2132
01:31:33,340 --> 01:31:39,370
<font color="#E5E5E5">well experience</font><font color="#CCCCCC"> unfortunately this</font><font color="#E5E5E5"> is</font>

2133
01:31:37,660 --> 01:31:41,110
why I've<font color="#CCCCCC"> never really but have been</font>

2134
01:31:39,370 --> 01:31:43,720
asked to<font color="#CCCCCC"> give a an advanced</font>

2135
01:31:41,110 --> 01:31:46,000
troubleshooting tutorial but as I<font color="#CCCCCC"> said</font>

2136
01:31:43,720 --> 01:31:48,520
previously<font color="#E5E5E5"> advanced troubleshooting it's</font>

2137
01:31:46,000 --> 01:31:50,650
like that become<font color="#E5E5E5"> so specific</font><font color="#CCCCCC"> to each</font>

2138
01:31:48,520 --> 01:31:52,480
individual<font color="#CCCCCC"> network</font><font color="#E5E5E5"> it's probably not</font>

2139
01:31:50,650 --> 01:31:55,780
interesting<font color="#E5E5E5"> to other people or if it is</font>

2140
01:31:52,480 --> 01:31:57,849
interesting it's hard to<font color="#E5E5E5"> apply to other</font>

2141
01:31:55,780 --> 01:31:59,740
networks and then some of the advanced

2142
01:31:57,850 --> 01:32:01,930
<font color="#E5E5E5">problems may be the operators who have</font>

2143
01:31:59,740 --> 01:32:04,389
<font color="#E5E5E5">them are not too willing to share</font><font color="#CCCCCC"> on the</font>

2144
01:32:01,930 --> 01:32:07,030
particular issues that<font color="#CCCCCC"> they had but</font>

2145
01:32:04,390 --> 01:32:08,770
anyway<font color="#E5E5E5"> so what I'm really trying</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> do</font>

2146
01:32:07,030 --> 01:32:10,780
<font color="#CCCCCC">is give you the basics so try and build</font>

2147
01:32:08,770 --> 01:32:13,090
up experience use some of<font color="#CCCCCC"> those simple</font>

2148
01:32:10,780 --> 01:32:15,490
tricks and<font color="#CCCCCC"> concepts that</font><font color="#E5E5E5"> I've</font><font color="#CCCCCC"> mentioned</font>

2149
01:32:13,090 --> 01:32:18,190
here not panicking<font color="#E5E5E5"> is really important</font>

2150
01:32:15,490 --> 01:32:22,050
<font color="#E5E5E5">and panicking you tend to end up making</font>

2151
01:32:18,190 --> 01:32:23,950
more mistakes<font color="#CCCCCC"> so just try and stay cool</font>

2152
01:32:22,050 --> 01:32:26,380
<font color="#CCCCCC">you'll get an ice cream or something</font>

2153
01:32:23,950 --> 01:32:28,150
<font color="#CCCCCC">like that and then come back and think</font>

2154
01:32:26,380 --> 01:32:29,800
<font color="#E5E5E5">through it logically check the</font>

2155
01:32:28,150 --> 01:32:32,320
<font color="#CCCCCC">configuration first the big</font>

2156
01:32:29,800 --> 01:32:35,080
<font color="#CCCCCC">configuration problem check locally at</font>

2157
01:32:32,320 --> 01:32:36,880
first before blaming your peer<font color="#CCCCCC"> I mean</font>

2158
01:32:35,080 --> 01:32:38,680
<font color="#E5E5E5">yes your customers will blame you of the</font>

2159
01:32:36,880 --> 01:32:40,780
internet<font color="#CCCCCC"> breaks but</font><font color="#E5E5E5"> they don't know how</font>

2160
01:32:38,680 --> 01:32:42,400
<font color="#E5E5E5">it works</font><font color="#CCCCCC"> I mean you should just go and</font>

2161
01:32:40,780 --> 01:32:43,960
blame somebody<font color="#CCCCCC"> else</font><font color="#E5E5E5"> try and make sure</font>

2162
01:32:42,400 --> 01:32:46,030
<font color="#CCCCCC">that what you've brought is fine</font>

2163
01:32:43,960 --> 01:32:47,980
first and then troubleshoot to start at

2164
01:32:46,030 --> 01:32:50,080
the bottom layer<font color="#E5E5E5"> one two three you may</font>

2165
01:32:47,980 --> 01:32:51,969
have to do layer<font color="#CCCCCC"> 89 troubleshooting</font>

2166
01:32:50,080 --> 01:32:54,100
before<font color="#E5E5E5"> you look at your own stuff</font><font color="#CCCCCC"> but</font>

2167
01:32:51,970 --> 01:32:55,420
try and<font color="#E5E5E5"> work through</font><font color="#CCCCCC"> it and logical</font>

2168
01:32:54,100 --> 01:32:58,240
steps

2169
01:32:55,420 --> 01:33:00,280
use the tools available so the debugging

2170
01:32:58,240 --> 01:33:01,150
<font color="#CCCCCC">tools</font><font color="#E5E5E5"> in the router hardware internet</font>

2171
01:33:00,280 --> 01:33:03,880
<font color="#E5E5E5">looking</font><font color="#CCCCCC"> lastest</font>

2172
01:33:01,150 --> 01:33:06,960
ask colleagues<font color="#E5E5E5"> ask friends on the net</font>

2173
01:33:03,880 --> 01:33:14,110
<font color="#E5E5E5">ask public mailing list</font><font color="#CCCCCC"> for appropriate</font>

2174
01:33:06,960 --> 01:33:16,480
<font color="#CCCCCC">ok so that's what we covered closing</font>

2175
01:33:14,110 --> 01:33:18,040
comments well<font color="#CCCCCC"> blah blah blah</font><font color="#E5E5E5"> miss that</font>

2176
01:33:16,480 --> 01:33:20,559
for sake of<font color="#CCCCCC"> town</font><font color="#E5E5E5"> that's where the</font>

2177
01:33:18,040 --> 01:33:22,240
presentations are again if you<font color="#E5E5E5"> missed it</font>

2178
01:33:20,560 --> 01:33:26,230
<font color="#E5E5E5">at the start and</font><font color="#CCCCCC"> there on the Nano</font>

2179
01:33:22,240 --> 01:33:29,679
website<font color="#CCCCCC"> there also on that</font><font color="#E5E5E5"> FTP site as</font>

2180
01:33:26,230 --> 01:33:31,870
well<font color="#E5E5E5"> and that is it thank you for we're</font>

2181
01:33:29,680 --> 01:33:34,600
staying<font color="#E5E5E5"> 5 minutes</font><font color="#CCCCCC"> I hope that was</font><font color="#E5E5E5"> useful</font>

2182
01:33:31,870 --> 01:33:36,490
<font color="#E5E5E5">go to any questions feel free to send me</font>

2183
01:33:34,600 --> 01:33:38,020
<font color="#CCCCCC">email or catch me I'll be here for</font><font color="#E5E5E5"> the</font>

2184
01:33:36,490 --> 01:33:40,059
rest<font color="#E5E5E5"> of the week including</font><font color="#CCCCCC"> their own</font>

2185
01:33:38,020 --> 01:33:42,540
meeting so if you want<font color="#E5E5E5"> to ask questions</font>

2186
01:33:40,060 --> 01:33:46,050
<font color="#E5E5E5">let me know</font>

2187
01:33:42,540 --> 01:33:46,050
previous slide back up

