1
00:00:08,350 --> 00:00:14,450
either<font color="#CCCCCC"> I never</font><font color="#E5E5E5"> can hear Facebook and I</font>

2
00:00:12,410 --> 00:00:16,759
am today to talk<font color="#CCCCCC"> about how we built our</font>

3
00:00:14,450 --> 00:00:18,710
edge networks<font color="#CCCCCC"> of Facebook</font><font color="#E5E5E5"> and I'd like</font>

4
00:00:16,760 --> 00:00:21,619
<font color="#E5E5E5">to go on a journey</font><font color="#CCCCCC"> and give you an idea</font>

5
00:00:18,710 --> 00:00:23,690
<font color="#E5E5E5">not just</font><font color="#CCCCCC"> of the not</font><font color="#E5E5E5"> just of the</font>

6
00:00:21,619 --> 00:00:25,430
technology we've built but<font color="#E5E5E5"> also of the</font>

7
00:00:23,690 --> 00:00:35,720
culture and<font color="#E5E5E5"> our approach to</font>

8
00:00:25,430 --> 00:00:38,300
<font color="#CCCCCC">problem-solving</font><font color="#E5E5E5"> Facebook is huge</font>

9
00:00:35,720 --> 00:00:39,860
everybody knows<font color="#E5E5E5"> that when you have more</font>

10
00:00:38,300 --> 00:00:42,830
<font color="#E5E5E5">than a billion users</font><font color="#CCCCCC"> you know that the</font>

11
00:00:39,860 --> 00:00:44,269
scale<font color="#CCCCCC"> of the network</font><font color="#E5E5E5"> is enormous but</font>

12
00:00:42,830 --> 00:00:45,980
what I'd like<font color="#CCCCCC"> you to see in this graph</font>

13
00:00:44,270 --> 00:00:47,710
are these<font color="#E5E5E5"> little strands of light</font>

14
00:00:45,980 --> 00:00:50,629
representing connections between people

15
00:00:47,710 --> 00:00:53,030
<font color="#CCCCCC">and particularly how bright this graph</font>

16
00:00:50,630 --> 00:00:55,730
is all around the world not just in<font color="#E5E5E5"> the</font>

17
00:00:53,030 --> 00:00:58,220
United States<font color="#E5E5E5"> and that's because our</font>

18
00:00:55,730 --> 00:01:00,050
products<font color="#CCCCCC"> are</font><font color="#E5E5E5"> global services more</font><font color="#CCCCCC"> than</font>

19
00:00:58,220 --> 00:01:05,390
<font color="#CCCCCC">80</font><font color="#E5E5E5"> percent of our</font><font color="#CCCCCC"> users are outside the</font>

20
00:01:00,050 --> 00:01:09,080
<font color="#E5E5E5">United States and ultimately all of</font><font color="#CCCCCC"> them</font>

21
00:01:05,390 --> 00:01:10,790
connect through our edge networks now

22
00:01:09,080 --> 00:01:12,939
I'm sure as the people<font color="#CCCCCC"> in this room can</font>

23
00:01:10,790 --> 00:01:15,200
<font color="#E5E5E5">appreciate only too well</font>

24
00:01:12,939 --> 00:01:19,669
networks<font color="#E5E5E5"> are very</font><font color="#CCCCCC"> easily taken for</font>

25
00:01:15,200 --> 00:01:22,990
granted there<font color="#E5E5E5"> are a lot like oxygen when</font>

26
00:01:19,670 --> 00:01:25,640
it's there you don't<font color="#CCCCCC"> even think about it</font>

27
00:01:22,990 --> 00:01:29,298
but<font color="#E5E5E5"> when it's not you feel it</font>

28
00:01:25,640 --> 00:01:32,780
immediately<font color="#E5E5E5"> now that's true for networks</font>

29
00:01:29,299 --> 00:01:37,670
in general<font color="#CCCCCC"> it is certainly true for our</font>

30
00:01:32,780 --> 00:01:39,170
edge networks<font color="#E5E5E5"> when they're not where we</font>

31
00:01:37,670 --> 00:01:39,560
need<font color="#CCCCCC"> them when there's not</font><font color="#E5E5E5"> enough of</font>

32
00:01:39,170 --> 00:01:45,829
<font color="#CCCCCC">them</font>

33
00:01:39,560 --> 00:01:47,090
we're strangling<font color="#E5E5E5"> our services so</font><font color="#CCCCCC"> what is</font>

34
00:01:45,829 --> 00:01:50,089
this<font color="#E5E5E5"> service that</font><font color="#CCCCCC"> we're providing</font>

35
00:01:47,090 --> 00:01:52,219
<font color="#E5E5E5">through our edge networks part of our</font>

36
00:01:50,090 --> 00:01:54,740
service is<font color="#CCCCCC"> very similar</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> other</font><font color="#E5E5E5"> CDNs</font>

37
00:01:52,219 --> 00:01:57,109
static content<font color="#E5E5E5"> saved photos and videos</font>

38
00:01:54,740 --> 00:01:59,658
which are very<font color="#CCCCCC"> cacheable but there's a</font>

39
00:01:57,109 --> 00:02:01,399
<font color="#E5E5E5">component of our service</font><font color="#CCCCCC"> that is unique</font>

40
00:01:59,659 --> 00:02:04,369
a bit different it's<font color="#E5E5E5"> the dynamic</font>

41
00:02:01,399 --> 00:02:06,560
component<font color="#E5E5E5"> the status updates the</font>

42
00:02:04,369 --> 00:02:09,649
comments whether you click the like

43
00:02:06,560 --> 00:02:11,300
<font color="#CCCCCC">button</font><font color="#E5E5E5"> there might be a star that</font><font color="#CCCCCC"> you</font>

44
00:02:09,649 --> 00:02:12,440
really like and<font color="#CCCCCC"> that you want people</font><font color="#E5E5E5"> to</font>

45
00:02:11,300 --> 00:02:16,280
know about

46
00:02:12,440 --> 00:02:22,070
or maybe not<font color="#E5E5E5"> but let's</font><font color="#CCCCCC"> assume that you</font>

47
00:02:16,280 --> 00:02:24,560
do whether you're clicking<font color="#E5E5E5"> like on your</font>

48
00:02:22,070 --> 00:02:26,870
friends post<font color="#E5E5E5"> about their new job whether</font>

49
00:02:24,560 --> 00:02:29,930
<font color="#E5E5E5">you're clicking love about the picture</font>

50
00:02:26,870 --> 00:02:31,960
of<font color="#E5E5E5"> the new child or expressing sadness</font>

51
00:02:29,930 --> 00:02:33,500
<font color="#E5E5E5">about</font><font color="#CCCCCC"> the loss of</font><font color="#E5E5E5"> a good friend</font>

52
00:02:31,960 --> 00:02:36,170
<font color="#E5E5E5">fundamentally we're providing a</font>

53
00:02:33,500 --> 00:02:38,840
communication medium<font color="#CCCCCC"> and this dynamic</font>

54
00:02:36,170 --> 00:02:40,730
data needs to<font color="#E5E5E5"> be true it needs to be</font>

55
00:02:38,840 --> 00:02:42,860
right<font color="#E5E5E5"> not</font><font color="#CCCCCC"> just for your friends in the</font>

56
00:02:40,730 --> 00:02:47,060
<font color="#E5E5E5">US but for everybody you know around the</font>

57
00:02:42,860 --> 00:02:49,520
<font color="#CCCCCC">world so I'd like</font><font color="#E5E5E5"> to take you on</font><font color="#CCCCCC"> a</font>

58
00:02:47,060 --> 00:02:51,380
journey<font color="#E5E5E5"> down memory</font><font color="#CCCCCC"> lane</font><font color="#E5E5E5"> five years ago</font>

59
00:02:49,520 --> 00:02:53,870
<font color="#E5E5E5">our service and our network were very</font>

60
00:02:51,380 --> 00:02:56,240
different<font color="#CCCCCC"> if you</font><font color="#E5E5E5"> connected</font><font color="#CCCCCC"> to one</font><font color="#E5E5E5"> of our</font>

61
00:02:53,870 --> 00:02:58,820
services your TCP connection would

62
00:02:56,240 --> 00:03:00,170
actually terminate<font color="#E5E5E5"> on a server in a data</font>

63
00:02:58,820 --> 00:03:04,549
center<font color="#CCCCCC"> all the way back in the</font><font color="#E5E5E5"> United</font>

64
00:03:00,170 --> 00:03:05,839
States now if you were in the<font color="#CCCCCC"> US the</font>

65
00:03:04,550 --> 00:03:08,420
performance of the service was kind of

66
00:03:05,840 --> 00:03:10,870
<font color="#CCCCCC">ok but in much</font><font color="#E5E5E5"> of</font><font color="#CCCCCC"> the rest</font><font color="#E5E5E5"> of the world</font>

67
00:03:08,420 --> 00:03:13,510
it was<font color="#E5E5E5"> terrible</font>

68
00:03:10,870 --> 00:03:15,950
now let me give you an<font color="#CCCCCC"> example of this</font>

69
00:03:13,510 --> 00:03:19,700
if you<font color="#E5E5E5"> connected from say somewhere in</font>

70
00:03:15,950 --> 00:03:21,530
<font color="#E5E5E5">Asia to a data center in Oregon your TCP</font>

71
00:03:19,700 --> 00:03:24,880
round-trip time<font color="#E5E5E5"> might only be a 150</font>

72
00:03:21,530 --> 00:03:29,000
milliseconds but if you expand that<font color="#CCCCCC"> out</font>

73
00:03:24,880 --> 00:03:32,600
to a full connection pulling down real

74
00:03:29,000 --> 00:03:34,400
content it's actually more<font color="#CCCCCC"> than half a</font>

75
00:03:32,600 --> 00:03:36,980
second<font color="#E5E5E5"> just</font><font color="#CCCCCC"> to get your</font><font color="#E5E5E5"> first bit of</font>

76
00:03:34,400 --> 00:03:39,020
real<font color="#E5E5E5"> data for your web page and if you</font>

77
00:03:36,980 --> 00:03:41,510
<font color="#E5E5E5">take that across the rendering of a full</font>

78
00:03:39,020 --> 00:03:43,250
page with rich content<font color="#E5E5E5"> it's a terrible</font>

79
00:03:41,510 --> 00:03:49,010
experience<font color="#E5E5E5"> it's extremely slow it's</font>

80
00:03:43,250 --> 00:03:52,130
unacceptable<font color="#E5E5E5"> so we needed to build not</font>

81
00:03:49,010 --> 00:03:54,829
<font color="#CCCCCC">just edge pops</font><font color="#E5E5E5"> edge routers for network</font>

82
00:03:52,130 --> 00:03:57,019
<font color="#CCCCCC">connectivity we needed to build edge</font>

83
00:03:54,830 --> 00:03:58,910
servers to terminate those TCP

84
00:03:57,020 --> 00:04:03,890
connections<font color="#E5E5E5"> closer to the people who use</font>

85
00:03:58,910 --> 00:04:05,420
<font color="#E5E5E5">our</font><font color="#CCCCCC"> services by doing</font><font color="#E5E5E5"> that we</font>

86
00:04:03,890 --> 00:04:08,149
dramatically improve the<font color="#E5E5E5"> performance of</font>

87
00:04:05,420 --> 00:04:09,738
<font color="#CCCCCC">our service</font><font color="#E5E5E5"> around the world yes those</font>

88
00:04:08,150 --> 00:04:11,209
dynamic pieces still need to be

89
00:04:09,739 --> 00:04:14,030
synchronized back to data<font color="#E5E5E5"> centers</font><font color="#CCCCCC"> that</font>

90
00:04:11,209 --> 00:04:15,800
<font color="#CCCCCC">content still needs to</font><font color="#E5E5E5"> be</font><font color="#CCCCCC"> pulled but</font><font color="#E5E5E5"> now</font>

91
00:04:14,030 --> 00:04:17,690
<font color="#CCCCCC">it's proxy through always-on connections</font>

92
00:04:15,800 --> 00:04:20,270
from<font color="#E5E5E5"> our edge servers and those TCP</font>

93
00:04:17,690 --> 00:04:22,510
connections at<font color="#E5E5E5"> slow part is now very</font>

94
00:04:20,269 --> 00:04:22,510
<font color="#E5E5E5">fast</font>

95
00:04:23,120 --> 00:04:30,450
but was poor performance<font color="#E5E5E5"> is now pretty</font>

96
00:04:25,980 --> 00:04:31,650
<font color="#E5E5E5">good</font><font color="#CCCCCC"> performance because of this so what</font>

97
00:04:30,450 --> 00:04:34,830
<font color="#E5E5E5">does this look like from a</font><font color="#CCCCCC"> net network</font>

98
00:04:31,650 --> 00:04:36,120
<font color="#CCCCCC">perspective</font><font color="#E5E5E5"> we began with simple edge</font>

99
00:04:34,830 --> 00:04:39,150
routers and<font color="#E5E5E5"> pops for network</font>

100
00:04:36,120 --> 00:04:40,770
connectivity<font color="#CCCCCC"> this grew</font><font color="#E5E5E5"> to edge servers</font>

101
00:04:39,150 --> 00:04:42,900
hanging off<font color="#CCCCCC"> of these</font><font color="#E5E5E5"> routers to</font>

102
00:04:40,770 --> 00:04:44,760
terminate those TCP connections and that

103
00:04:42,900 --> 00:04:46,859
solved the problem of<font color="#E5E5E5"> the basic Facebook</font>

104
00:04:44,760 --> 00:04:49,200
landing<font color="#CCCCCC"> page improving performance for</font>

105
00:04:46,860 --> 00:04:51,210
rendering<font color="#E5E5E5"> that basic framework but as</font>

106
00:04:49,200 --> 00:04:54,120
our product changed<font color="#E5E5E5"> it became more rich</font>

107
00:04:51,210 --> 00:04:57,060
more<font color="#E5E5E5"> photos</font><font color="#CCCCCC"> more videos the demands on</font>

108
00:04:54,120 --> 00:04:59,490
the<font color="#E5E5E5"> network changed</font><font color="#CCCCCC"> and fortunately</font><font color="#E5E5E5"> we</font>

109
00:04:57,060 --> 00:05:01,830
were ready for<font color="#E5E5E5"> them as we built out more</font>

110
00:04:59,490 --> 00:05:04,170
servers we grew<font color="#E5E5E5"> to full</font><font color="#CCCCCC"> edge clusters</font>

111
00:05:01,830 --> 00:05:05,640
and<font color="#CCCCCC"> cloths fabrics to</font><font color="#E5E5E5"> aggregate these</font>

112
00:05:04,170 --> 00:05:07,830
servers<font color="#E5E5E5"> and support east-west and</font>

113
00:05:05,640 --> 00:05:12,800
north-south traffic<font color="#CCCCCC"> in every edge pop in</font>

114
00:05:07,830 --> 00:05:14,550
the world and today our service is

115
00:05:12,800 --> 00:05:17,430
different<font color="#CCCCCC"> than it ever has been before</font>

116
00:05:14,550 --> 00:05:19,770
videos growing you may have seen the

117
00:05:17,430 --> 00:05:22,710
growth<font color="#E5E5E5"> of our live broadcasts over the</font>

118
00:05:19,770 --> 00:05:24,810
last year whether it was<font color="#CCCCCC"> marks broadcast</font>

119
00:05:22,710 --> 00:05:27,450
<font color="#E5E5E5">with a space</font><font color="#CCCCCC"> station</font><font color="#E5E5E5"> or the recent</font>

120
00:05:24,810 --> 00:05:29,340
<font color="#E5E5E5">presidential debates this is a</font>

121
00:05:27,450 --> 00:05:33,180
fundamentally<font color="#CCCCCC"> different type of</font><font color="#E5E5E5"> service</font>

122
00:05:29,340 --> 00:05:34,859
<font color="#E5E5E5">in</font><font color="#CCCCCC"> that it's</font><font color="#E5E5E5"> very spiky</font><font color="#CCCCCC"> at a moment in</font>

123
00:05:33,180 --> 00:05:36,690
time<font color="#E5E5E5"> from out of nowhere</font><font color="#CCCCCC"> hundreds</font><font color="#E5E5E5"> of</font>

124
00:05:34,860 --> 00:05:38,730
thousands of people<font color="#E5E5E5"> potentially millions</font>

125
00:05:36,690 --> 00:05:41,580
of people watching<font color="#E5E5E5"> the same content at</font>

126
00:05:38,730 --> 00:05:42,720
the same<font color="#CCCCCC"> time we need to build a</font>

127
00:05:41,580 --> 00:05:45,109
different<font color="#CCCCCC"> type of</font><font color="#E5E5E5"> network to support</font>

128
00:05:42,720 --> 00:05:48,890
<font color="#CCCCCC">this</font><font color="#E5E5E5"> and so what we build</font><font color="#CCCCCC"> today are</font>

129
00:05:45,110 --> 00:05:52,860
actually<font color="#E5E5E5"> multi-layer edge topologies of</font>

130
00:05:48,890 --> 00:05:54,419
<font color="#E5E5E5">course 100 Gig everywhere because</font><font color="#CCCCCC"> of our</font>

131
00:05:52,860 --> 00:05:56,130
space<font color="#E5E5E5"> and power demands we grow across</font>

132
00:05:54,420 --> 00:05:58,440
multiple facilities peering facilities

133
00:05:56,130 --> 00:06:01,980
large facilities for aggregating our

134
00:05:58,440 --> 00:06:03,540
servers connected to our backbone<font color="#E5E5E5"> and to</font>

135
00:06:01,980 --> 00:06:04,740
grow independently<font color="#E5E5E5"> in these different</font>

136
00:06:03,540 --> 00:06:07,170
layers<font color="#E5E5E5"> we needed to disaggregate our</font>

137
00:06:04,740 --> 00:06:08,730
functions<font color="#E5E5E5"> the old apologies simple</font>

138
00:06:07,170 --> 00:06:11,430
router<font color="#CCCCCC"> guide boxes</font><font color="#E5E5E5"> connected to the</font>

139
00:06:08,730 --> 00:06:12,540
backbone peering and to our servers<font color="#E5E5E5"> now</font>

140
00:06:11,430 --> 00:06:14,640
we have different functions for

141
00:06:12,540 --> 00:06:16,340
<font color="#E5E5E5">connecting</font><font color="#CCCCCC"> to each of these layers</font><font color="#E5E5E5"> allow</font>

142
00:06:14,640 --> 00:06:19,380
<font color="#E5E5E5">us to grow independently</font><font color="#CCCCCC"> and more simply</font>

143
00:06:16,340 --> 00:06:20,609
but at the same time we need<font color="#E5E5E5"> to</font>

144
00:06:19,380 --> 00:06:23,460
<font color="#E5E5E5">reconsider how we build</font><font color="#CCCCCC"> our networks</font>

145
00:06:20,610 --> 00:06:25,650
<font color="#E5E5E5">from a protocol perspective so I'll talk</font>

146
00:06:23,460 --> 00:06:28,349
<font color="#E5E5E5">in the next</font><font color="#CCCCCC"> few slides about how</font><font color="#E5E5E5"> our</font>

147
00:06:25,650 --> 00:06:30,510
software stack has changed and<font color="#E5E5E5"> how</font><font color="#CCCCCC"> it is</font>

148
00:06:28,350 --> 00:06:34,800
allowed us in many<font color="#CCCCCC"> ways to evolve beyond</font>

149
00:06:30,510 --> 00:06:37,289
limitations<font color="#E5E5E5"> of</font><font color="#CCCCCC"> BGP</font><font color="#E5E5E5"> now the word</font>

150
00:06:34,800 --> 00:06:39,060
runs on<font color="#E5E5E5"> BGP most networks distribute</font>

151
00:06:37,289 --> 00:06:41,550
their traffic they load<font color="#E5E5E5"> balance using</font>

152
00:06:39,060 --> 00:06:44,460
BGP routing<font color="#E5E5E5"> and we did the same that's</font>

153
00:06:41,550 --> 00:06:47,490
<font color="#E5E5E5">how we</font><font color="#CCCCCC"> connected to the entire world but</font>

154
00:06:44,460 --> 00:06:49,318
<font color="#E5E5E5">we needed a different</font><font color="#CCCCCC"> mechanism</font><font color="#E5E5E5"> let's</font>

155
00:06:47,490 --> 00:06:51,900
say you're a user somewhere in Africa

156
00:06:49,319 --> 00:06:54,240
<font color="#CCCCCC">and your BGP a s path says your shortest</font>

157
00:06:51,900 --> 00:06:56,520
path to Facebook is<font color="#E5E5E5"> in a pop in Japan</font>

158
00:06:54,240 --> 00:06:58,259
<font color="#E5E5E5">you know that's not right</font><font color="#CCCCCC"> you know at a</font>

159
00:06:56,520 --> 00:07:00,780
<font color="#E5E5E5">service level that's not going to</font><font color="#CCCCCC"> give</font>

160
00:06:58,259 --> 00:07:02,699
you the<font color="#CCCCCC"> performance that</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> want so we</font>

161
00:07:00,780 --> 00:07:06,150
need to<font color="#E5E5E5"> build a system</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> commits</font>

162
00:07:02,699 --> 00:07:09,210
measure actual<font color="#CCCCCC"> network service closeness</font>

163
00:07:06,150 --> 00:07:11,489
<font color="#E5E5E5">the latency to our users from every pop</font>

164
00:07:09,210 --> 00:07:13,530
in the world<font color="#CCCCCC"> so we built a</font><font color="#E5E5E5"> system called</font>

165
00:07:11,490 --> 00:07:16,490
Sinagra you'll probably never notice

166
00:07:13,530 --> 00:07:19,739
sonar but<font color="#E5E5E5"> a very infinitesimal number of</font>

167
00:07:16,490 --> 00:07:21,810
profile pictures at any given time<font color="#E5E5E5"> our</font>

168
00:07:19,740 --> 00:07:24,780
surf and pops that we expect<font color="#E5E5E5"> to perform</font>

169
00:07:21,810 --> 00:07:27,389
poorly<font color="#E5E5E5"> we do this because networks</font>

170
00:07:24,780 --> 00:07:29,940
<font color="#E5E5E5">change services change and we're</font>

171
00:07:27,389 --> 00:07:31,919
continually gathering<font color="#E5E5E5"> data that allows</font>

172
00:07:29,940 --> 00:07:33,270
<font color="#CCCCCC">us to see the</font><font color="#E5E5E5"> latency from nearly every</font>

173
00:07:31,919 --> 00:07:35,818
network<font color="#E5E5E5"> in the world</font><font color="#CCCCCC"> to every edge</font>

174
00:07:33,270 --> 00:07:38,219
cluster we have in the world<font color="#CCCCCC"> and this</font>

175
00:07:35,819 --> 00:07:40,860
<font color="#CCCCCC">dataset is one of the inputs for our</font>

176
00:07:38,219 --> 00:07:42,419
<font color="#E5E5E5">global controller system in this</font><font color="#CCCCCC"> global</font>

177
00:07:40,860 --> 00:07:44,729
controller system is what we use to

178
00:07:42,419 --> 00:07:47,340
<font color="#CCCCCC">manage</font><font color="#E5E5E5"> the ingress traffic load for</font><font color="#CCCCCC"> our</font>

179
00:07:44,729 --> 00:07:49,949
networks<font color="#E5E5E5"> and the system has</font><font color="#CCCCCC"> visibility</font>

180
00:07:47,340 --> 00:07:51,448
to many metrics<font color="#CCCCCC"> it sees the interface</font>

181
00:07:49,949 --> 00:07:51,960
utilization of<font color="#E5E5E5"> every peering router in</font>

182
00:07:51,449 --> 00:07:54,259
the<font color="#E5E5E5"> world</font>

183
00:07:51,960 --> 00:07:57,060
it sees the<font color="#E5E5E5"> BGP tables of every router</font>

184
00:07:54,259 --> 00:07:58,560
<font color="#E5E5E5">it takes this sonar data it takes the</font>

185
00:07:57,060 --> 00:08:02,219
health of our servers of our networks

186
00:07:58,560 --> 00:08:04,590
<font color="#E5E5E5">and from this it builds a</font><font color="#CCCCCC"> DNS map that</font>

187
00:08:02,219 --> 00:08:07,830
allows<font color="#CCCCCC"> us</font><font color="#E5E5E5"> to give different resolutions</font>

188
00:08:04,590 --> 00:08:10,289
to send users resolvers two different

189
00:08:07,830 --> 00:08:13,198
pops<font color="#CCCCCC"> either by via</font><font color="#E5E5E5"> simple dynamic</font><font color="#CCCCCC"> dns</font>

190
00:08:10,289 --> 00:08:16,080
resolution<font color="#E5E5E5"> or via generation of unique</font>

191
00:08:13,199 --> 00:08:18,000
URLs per user<font color="#E5E5E5"> to send their static</font>

192
00:08:16,080 --> 00:08:22,050
content from the<font color="#CCCCCC"> hops that are closest</font>

193
00:08:18,000 --> 00:08:25,759
to them and all engineers love graphs

194
00:08:22,050 --> 00:08:28,349
I<font color="#E5E5E5"> love graphs</font><font color="#CCCCCC"> - what does this mean in</font>

195
00:08:25,759 --> 00:08:31,289
the old<font color="#E5E5E5"> BGP model you have this red line</font>

196
00:08:28,349 --> 00:08:33,899
where<font color="#CCCCCC"> anycast simply sends in traffic to</font>

197
00:08:31,289 --> 00:08:35,218
the pop as users wake up they see the

198
00:08:33,899 --> 00:08:36,000
<font color="#CCCCCC">capacity of</font><font color="#E5E5E5"> our pop and there's nothing</font>

199
00:08:35,219 --> 00:08:37,680
we can do about<font color="#CCCCCC"> it</font>

200
00:08:36,000 --> 00:08:39,690
all users hitting<font color="#CCCCCC"> that pop get a poor</font>

201
00:08:37,679 --> 00:08:41,789
experience<font color="#E5E5E5"> because of</font><font color="#CCCCCC"> this none up for</font>

202
00:08:39,690 --> 00:08:43,140
none of<font color="#E5E5E5"> them is a good but by having</font>

203
00:08:41,789 --> 00:08:45,540
<font color="#CCCCCC">this global controller that</font><font color="#E5E5E5"> can shift</font>

204
00:08:43,140 --> 00:08:47,579
our DNS<font color="#CCCCCC"> maps</font><font color="#E5E5E5"> and pull users from this</font>

205
00:08:45,540 --> 00:08:48,810
region<font color="#CCCCCC"> and serve them somewhere</font><font color="#E5E5E5"> else we</font>

206
00:08:47,579 --> 00:08:50,790
get this nice green line

207
00:08:48,810 --> 00:08:52,979
where we shed traffic from this pop only

208
00:08:50,790 --> 00:08:55,890
<font color="#CCCCCC">serve enough that we can serve well and</font>

209
00:08:52,980 --> 00:08:59,760
give a good experience<font color="#E5E5E5"> for everyone now</font>

210
00:08:55,890 --> 00:09:02,340
at a regional<font color="#E5E5E5"> level</font><font color="#CCCCCC"> you can see at a</font>

211
00:08:59,760 --> 00:09:04,500
regional<font color="#E5E5E5"> level you can see how pops come</font>

212
00:09:02,340 --> 00:09:06,390
online<font color="#E5E5E5"> users come online and we begin to</font>

213
00:09:04,500 --> 00:09:08,040
<font color="#E5E5E5">shed traffic away</font><font color="#CCCCCC"> from all the pops</font><font color="#E5E5E5"> in</font>

214
00:09:06,390 --> 00:09:10,529
that<font color="#E5E5E5"> region as we exceed their capacity</font>

215
00:09:08,040 --> 00:09:12,360
<font color="#E5E5E5">at a global level you end up with</font>

216
00:09:10,529 --> 00:09:14,010
multiple<font color="#E5E5E5"> overlapping diurnal lines as</font>

217
00:09:12,360 --> 00:09:16,110
different regions come online and go<font color="#E5E5E5"> to</font>

218
00:09:14,010 --> 00:09:17,610
sleep<font color="#CCCCCC"> and we shed traffic between them</font>

219
00:09:16,110 --> 00:09:19,170
<font color="#E5E5E5">sometimes they need to serve traffic</font>

220
00:09:17,610 --> 00:09:22,080
from another region<font color="#E5E5E5"> if</font><font color="#CCCCCC"> we don't have the</font>

221
00:09:19,170 --> 00:09:23,479
capacity<font color="#CCCCCC"> in</font><font color="#E5E5E5"> region now what does this</font>

222
00:09:22,080 --> 00:09:27,800
<font color="#E5E5E5">mean for all of</font><font color="#CCCCCC"> you</font>

223
00:09:23,480 --> 00:09:27,800
it means we serve your cat videos faster

224
00:09:27,830 --> 00:09:33,770
that's my new kitten she's super cute so

225
00:09:31,620 --> 00:09:36,990
how does this global targeting system

226
00:09:33,770 --> 00:09:40,560
interoperate<font color="#CCCCCC"> with</font><font color="#E5E5E5"> the old paradigm of a</font>

227
00:09:36,990 --> 00:09:42,180
global BGP routing table<font color="#E5E5E5"> originally we</font>

228
00:09:40,560 --> 00:09:43,410
just<font color="#E5E5E5"> treated this</font><font color="#CCCCCC"> as it was they were</font>

229
00:09:42,180 --> 00:09:46,529
ships in the<font color="#E5E5E5"> night they were unaware of</font>

230
00:09:43,410 --> 00:09:48,930
<font color="#E5E5E5">each other we could send</font><font color="#CCCCCC"> traffic into</font>

231
00:09:46,529 --> 00:09:50,430
our network<font color="#E5E5E5"> in Europe and egress it on</font>

232
00:09:48,930 --> 00:09:54,569
the other<font color="#E5E5E5"> side of the world and that</font>

233
00:09:50,430 --> 00:09:57,300
worked well enough<font color="#CCCCCC"> bgp</font><font color="#E5E5E5"> allowed us</font><font color="#CCCCCC"> to</font>

234
00:09:54,570 --> 00:09:59,730
enforce these simple rules that<font color="#E5E5E5"> we had</font>

235
00:09:57,300 --> 00:10:04,349
<font color="#E5E5E5">prefer this peer for this set of</font>

236
00:09:59,730 --> 00:10:06,690
prefixes it worked well but<font color="#E5E5E5"> as our</font><font color="#CCCCCC"> Sun</font>

237
00:10:04,350 --> 00:10:09,300
our dataset grew as our confidence<font color="#E5E5E5"> in</font>

238
00:10:06,690 --> 00:10:11,910
our global controller grew we had an

239
00:10:09,300 --> 00:10:13,349
<font color="#E5E5E5">opportunity to solve other problems we</font>

240
00:10:11,910 --> 00:10:15,719
had an opportunity<font color="#E5E5E5"> to improve</font>

241
00:10:13,350 --> 00:10:17,970
<font color="#CCCCCC">performance not just</font><font color="#E5E5E5"> ingressing to our</font>

242
00:10:15,720 --> 00:10:20,220
network<font color="#CCCCCC"> but also how</font><font color="#E5E5E5"> we address traffic</font>

243
00:10:17,970 --> 00:10:22,320
from our<font color="#E5E5E5"> network and this problem became</font>

244
00:10:20,220 --> 00:10:24,570
<font color="#E5E5E5">particularly acute for</font><font color="#CCCCCC"> us in a</font><font color="#E5E5E5"> very</font>

245
00:10:22,320 --> 00:10:27,870
serious<font color="#E5E5E5"> outage the sort of outage that</font>

246
00:10:24,570 --> 00:10:31,020
<font color="#CCCCCC">you don't plan for multiple diverse</font>

247
00:10:27,870 --> 00:10:33,720
backbone<font color="#CCCCCC"> fibre paths</font><font color="#E5E5E5"> all failing</font><font color="#CCCCCC"> on the</font>

248
00:10:31,020 --> 00:10:36,870
same day dramatic outage for<font color="#E5E5E5"> a</font>

249
00:10:33,720 --> 00:10:38,430
significant region for us our<font color="#E5E5E5"> global</font>

250
00:10:36,870 --> 00:10:40,560
controller had the opportunity to<font color="#CCCCCC"> shift</font>

251
00:10:38,430 --> 00:10:42,510
this<font color="#CCCCCC"> traffic away</font><font color="#E5E5E5"> from</font><font color="#CCCCCC"> this region serve</font>

252
00:10:40,560 --> 00:10:44,760
it well somewhere else but<font color="#E5E5E5"> our</font>

253
00:10:42,510 --> 00:10:46,560
simplistic BGP rules would simply pull

254
00:10:44,760 --> 00:10:48,569
this traffic<font color="#E5E5E5"> around the world across our</font>

255
00:10:46,560 --> 00:10:51,800
broken backbone only degrading the

256
00:10:48,570 --> 00:10:55,020
service further so we<font color="#CCCCCC"> needed a</font><font color="#E5E5E5"> new model</font>

257
00:10:51,800 --> 00:10:58,020
we needed to confine the<font color="#CCCCCC"> domain of</font><font color="#E5E5E5"> BGP</font>

258
00:10:55,020 --> 00:11:00,990
break it apart into city level peering

259
00:10:58,020 --> 00:11:03,839
domains<font color="#E5E5E5"> and in this way</font>

260
00:11:00,990 --> 00:11:05,459
empowered<font color="#E5E5E5"> our global controllers not</font>

261
00:11:03,839 --> 00:11:07,170
just to influence how we ingress traffic

262
00:11:05,459 --> 00:11:10,140
to our<font color="#E5E5E5"> network but also to</font><font color="#CCCCCC"> influence how</font>

263
00:11:07,170 --> 00:11:12,180
we<font color="#E5E5E5"> aggress traffic from our network now</font>

264
00:11:10,140 --> 00:11:14,180
this was<font color="#E5E5E5"> not easy it did not happen in</font>

265
00:11:12,180 --> 00:11:17,910
<font color="#E5E5E5">one step</font>

266
00:11:14,180 --> 00:11:18,859
<font color="#CCCCCC">BGP</font><font color="#E5E5E5"> solves the basic problem affording</font>

267
00:11:17,910 --> 00:11:22,199
very well

268
00:11:18,860 --> 00:11:23,850
software is<font color="#E5E5E5"> extremely flexible but it's</font>

269
00:11:22,200 --> 00:11:26,670
also dangerous<font color="#CCCCCC"> it can</font><font color="#E5E5E5"> do the wrong thing</font>

270
00:11:23,850 --> 00:11:28,770
very easily<font color="#CCCCCC"> and we definitely</font><font color="#E5E5E5"> had</font>

271
00:11:26,670 --> 00:11:33,120
experiences with<font color="#CCCCCC"> that it was a</font><font color="#E5E5E5"> very</font>

272
00:11:28,770 --> 00:11:34,500
iterative<font color="#CCCCCC"> process of</font><font color="#E5E5E5"> learning</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> finding</font>

273
00:11:33,120 --> 00:11:38,130
mistakes finding problems<font color="#E5E5E5"> with our</font>

274
00:11:34,500 --> 00:11:40,070
software<font color="#E5E5E5"> gaining confidence in it slowly</font>

275
00:11:38,130 --> 00:11:43,350
confining the domain of<font color="#CCCCCC"> BGP and</font>

276
00:11:40,070 --> 00:11:44,670
expanding<font color="#E5E5E5"> the control the power of our</font>

277
00:11:43,350 --> 00:11:46,260
controllers<font color="#E5E5E5"> the ability of it to</font>

278
00:11:44,670 --> 00:11:48,630
influence<font color="#E5E5E5"> and improve the performance</font><font color="#CCCCCC"> of</font>

279
00:11:46,260 --> 00:11:50,850
our service but we have today out<font color="#E5E5E5"> of</font>

280
00:11:48,630 --> 00:11:52,680
that<font color="#E5E5E5"> iterative process is far more</font>

281
00:11:50,850 --> 00:11:54,930
control<font color="#CCCCCC"> to react to exactly</font><font color="#E5E5E5"> these types</font>

282
00:11:52,680 --> 00:11:57,359
of<font color="#E5E5E5"> outages simple network degradation</font><font color="#CCCCCC"> x'</font>

283
00:11:54,930 --> 00:12:03,660
things that<font color="#E5E5E5"> before we had little</font><font color="#CCCCCC"> control</font>

284
00:11:57,360 --> 00:12:07,980
over but<font color="#CCCCCC"> even on these</font><font color="#E5E5E5"> BGP peirong</font>

285
00:12:03,660 --> 00:12:10,410
<font color="#CCCCCC">Islands</font><font color="#E5E5E5"> BGP</font><font color="#CCCCCC"> is still limited what do we</font>

286
00:12:07,980 --> 00:12:12,180
<font color="#E5E5E5">care about we care about latency packet</font>

287
00:12:10,410 --> 00:12:13,469
loss<font color="#E5E5E5"> we fundamentally care about things</font>

288
00:12:12,180 --> 00:12:14,209
<font color="#CCCCCC">that impact the performance of our</font>

289
00:12:13,470 --> 00:12:16,529
service

290
00:12:14,209 --> 00:12:18,089
what does BGP care about it cares<font color="#CCCCCC"> about</font>

291
00:12:16,529 --> 00:12:18,390
all the attributes<font color="#E5E5E5"> that we</font><font color="#CCCCCC"> all know</font>

292
00:12:18,089 --> 00:12:20,490
about

293
00:12:18,390 --> 00:12:23,220
now you can statically encode those

294
00:12:20,490 --> 00:12:26,610
things as BGP attributes but that

295
00:12:23,220 --> 00:12:28,410
represents just one<font color="#CCCCCC"> point in time and as</font>

296
00:12:26,610 --> 00:12:30,630
we all<font color="#CCCCCC"> know networks change services</font>

297
00:12:28,410 --> 00:12:32,490
change and that static encoding will

298
00:12:30,630 --> 00:12:36,390
quickly<font color="#CCCCCC"> grow out-of-date it'll be wrong</font>

299
00:12:32,490 --> 00:12:39,270
days weeks months in the<font color="#E5E5E5"> future so we</font>

300
00:12:36,390 --> 00:12:43,170
<font color="#CCCCCC">needed in a more</font><font color="#E5E5E5"> dynamic mechanism we</font>

301
00:12:39,270 --> 00:12:44,670
needed local network controllers<font color="#CCCCCC"> over</font>

302
00:12:43,170 --> 00:12:47,370
the next few<font color="#E5E5E5"> slides</font><font color="#CCCCCC"> I'll take you</font>

303
00:12:44,670 --> 00:12:48,719
through<font color="#E5E5E5"> how we iterated through</font>

304
00:12:47,370 --> 00:12:49,980
different steps<font color="#E5E5E5"> we tried different</font>

305
00:12:48,720 --> 00:12:54,029
things<font color="#E5E5E5"> and how</font><font color="#CCCCCC"> we got to where</font><font color="#E5E5E5"> we are</font>

306
00:12:49,980 --> 00:12:59,070
<font color="#E5E5E5">today like many we started with host</font>

307
00:12:54,029 --> 00:13:00,720
<font color="#E5E5E5">rapidly it looks</font><font color="#CCCCCC"> fantastic on slides</font><font color="#E5E5E5"> use</font>

308
00:12:59,070 --> 00:13:02,010
that<font color="#E5E5E5"> software down in your server stack</font>

309
00:13:00,720 --> 00:13:05,370
you have<font color="#E5E5E5"> complete control</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> every</font>

310
00:13:02,010 --> 00:13:07,890
packet you<font color="#CCCCCC"> can do anything this was not</font>

311
00:13:05,370 --> 00:13:09,540
so simple<font color="#CCCCCC"> for us in practice</font><font color="#E5E5E5"> it was not</font>

312
00:13:07,890 --> 00:13:12,510
so effective<font color="#CCCCCC"> for us and solving real</font>

313
00:13:09,540 --> 00:13:13,800
problems for<font color="#E5E5E5"> one you've created a new</font>

314
00:13:12,510 --> 00:13:15,870
problem<font color="#CCCCCC"> for yourself</font>

315
00:13:13,800 --> 00:13:20,060
you have to synchronize across a bunch

316
00:13:15,870 --> 00:13:22,920
<font color="#E5E5E5">of servers in our case a lot of servers</font>

317
00:13:20,060 --> 00:13:24,060
what if your service<font color="#E5E5E5"> changes what if you</font>

318
00:13:22,920 --> 00:13:27,870
have traffic<font color="#E5E5E5"> coming</font><font color="#CCCCCC"> from somewhere</font><font color="#E5E5E5"> you</font>

319
00:13:24,060 --> 00:13:30,209
<font color="#E5E5E5">completely did not expect and even if</font>

320
00:13:27,870 --> 00:13:32,640
you solve all<font color="#E5E5E5"> of these problems</font><font color="#CCCCCC"> and to</font>

321
00:13:30,209 --> 00:13:34,800
<font color="#CCCCCC">be honest we never</font><font color="#E5E5E5"> fully did you still</font>

322
00:13:32,640 --> 00:13:36,060
<font color="#E5E5E5">have the</font><font color="#CCCCCC"> most</font><font color="#E5E5E5"> basic problem how do you</font>

323
00:13:34,800 --> 00:13:38,160
signal<font color="#E5E5E5"> from your</font><font color="#CCCCCC"> servers how do you</font>

324
00:13:36,060 --> 00:13:43,739
encapsulate<font color="#CCCCCC"> this traffic</font><font color="#E5E5E5"> have an egress</font>

325
00:13:38,160 --> 00:13:44,640
where you want<font color="#E5E5E5"> from your network we</font>

326
00:13:43,740 --> 00:13:47,690
tried a<font color="#CCCCCC"> few different</font><font color="#E5E5E5"> things</font>

327
00:13:44,640 --> 00:13:50,610
we started with MPLS<font color="#CCCCCC"> two basic problems</font>

328
00:13:47,690 --> 00:13:53,730
<font color="#CCCCCC">kernel support</font><font color="#E5E5E5"> it wasn't there at the</font>

329
00:13:50,610 --> 00:13:55,950
<font color="#E5E5E5">time and we needed router MPLS features</font>

330
00:13:53,730 --> 00:13:57,959
in every layer<font color="#E5E5E5"> of our</font><font color="#CCCCCC"> topology</font><font color="#E5E5E5"> from</font><font color="#CCCCCC"> the</font>

331
00:13:55,950 --> 00:13:59,880
top of<font color="#CCCCCC"> rack switch to</font><font color="#E5E5E5"> our class fabric</font>

332
00:13:57,959 --> 00:14:03,089
switches and the devices<font color="#E5E5E5"> we had at the</font>

333
00:13:59,880 --> 00:14:05,550
time just couldn't support<font color="#E5E5E5"> it so next we</font>

334
00:14:03,089 --> 00:14:07,500
tried PBR or filter based<font color="#E5E5E5"> forwarding</font>

335
00:14:05,550 --> 00:14:09,120
<font color="#E5E5E5">depending on your vendor of choice the</font>

336
00:14:07,500 --> 00:14:10,529
most fundamental problem here<font color="#E5E5E5"> you're</font>

337
00:14:09,120 --> 00:14:12,089
limiting<font color="#E5E5E5"> your platform diversity you're</font>

338
00:14:10,529 --> 00:14:14,579
depending on a vendor specific<font color="#E5E5E5"> feature</font>

339
00:14:12,089 --> 00:14:16,440
set<font color="#E5E5E5"> and you also haven't limited your</font>

340
00:14:14,579 --> 00:14:18,719
dependency on<font color="#E5E5E5"> your routers you have to</font>

341
00:14:16,440 --> 00:14:20,459
manage<font color="#E5E5E5"> router</font><font color="#CCCCCC"> configurations</font><font color="#E5E5E5"> state</font>

342
00:14:18,720 --> 00:14:22,410
representing<font color="#CCCCCC"> these source base routing</font>

343
00:14:20,459 --> 00:14:24,420
decisions<font color="#E5E5E5"> these mappings and keep it in</font>

344
00:14:22,410 --> 00:14:26,029
<font color="#E5E5E5">sync with your server software</font><font color="#CCCCCC"> and we</font>

345
00:14:24,420 --> 00:14:29,640
definitely<font color="#CCCCCC"> have problems</font><font color="#E5E5E5"> with that and</font>

346
00:14:26,029 --> 00:14:31,640
if you use PBR what<font color="#CCCCCC"> bits do you use in</font>

347
00:14:29,640 --> 00:14:33,810
your<font color="#E5E5E5"> header to represent these decisions</font>

348
00:14:31,640 --> 00:14:35,579
<font color="#E5E5E5">DHCP is the simplest and we</font><font color="#CCCCCC"> actually</font>

349
00:14:33,810 --> 00:14:36,750
<font color="#E5E5E5">spent the most time with that but</font><font color="#CCCCCC"> you</font>

350
00:14:35,579 --> 00:14:39,349
only have so many bits to represent

351
00:14:36,750 --> 00:14:42,390
<font color="#CCCCCC">Egrets interfaces it's not very flexible</font>

352
00:14:39,350 --> 00:14:44,310
we work toward GRE key it's a very large

353
00:14:42,390 --> 00:14:47,939
address space<font color="#CCCCCC"> and the key value</font><font color="#E5E5E5"> in the</font>

354
00:14:44,310 --> 00:14:49,819
GRE header but our<font color="#E5E5E5"> service has changed</font>

355
00:14:47,940 --> 00:14:52,950
by the<font color="#E5E5E5"> time we developed</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> software</font>

356
00:14:49,820 --> 00:14:54,959
we had small packet size as a service

357
00:14:52,950 --> 00:14:58,079
<font color="#E5E5E5">that generated very high rates of small</font>

358
00:14:54,959 --> 00:14:59,969
packet sizes<font color="#CCCCCC"> as we hit peak level and in</font>

359
00:14:58,079 --> 00:15:02,849
the first weeks we deployed this new

360
00:14:59,970 --> 00:15:05,970
model we crashed our two largest<font color="#CCCCCC"> pops in</font>

361
00:15:02,850 --> 00:15:09,060
the world because<font color="#CCCCCC"> of problems</font><font color="#E5E5E5"> with</font><font color="#CCCCCC"> our</font>

362
00:15:05,970 --> 00:15:10,640
routers<font color="#E5E5E5"> now</font><font color="#CCCCCC"> I'm sure every network</font>

363
00:15:09,060 --> 00:15:14,060
engineer in this<font color="#E5E5E5"> room has</font><font color="#CCCCCC"> had this</font>

364
00:15:10,640 --> 00:15:16,470
<font color="#CCCCCC">experience before you have a</font><font color="#E5E5E5"> problem you</font>

365
00:15:14,060 --> 00:15:17,579
<font color="#CCCCCC">have this feature</font><font color="#E5E5E5"> or this new</font>

366
00:15:16,470 --> 00:15:20,010
architecture<font color="#CCCCCC"> that will</font><font color="#E5E5E5"> solve this</font>

367
00:15:17,579 --> 00:15:22,410
<font color="#CCCCCC">problem and you</font><font color="#E5E5E5"> do all the hard work</font><font color="#CCCCCC"> to</font>

368
00:15:20,010 --> 00:15:25,350
<font color="#E5E5E5">bring it into your network and when you</font>

369
00:15:22,410 --> 00:15:27,150
<font color="#CCCCCC">actually</font><font color="#E5E5E5"> get there it's like</font><font color="#CCCCCC"> Oh</font>

370
00:15:25,350 --> 00:15:30,120
<font color="#E5E5E5">it didn't work it didn't do what you</font>

371
00:15:27,150 --> 00:15:33,030
<font color="#E5E5E5">wanted</font><font color="#CCCCCC"> and we are no different we have</font>

372
00:15:30,120 --> 00:15:36,000
had this experience<font color="#E5E5E5"> many times a lot of</font>

373
00:15:33,030 --> 00:15:37,079
what we<font color="#E5E5E5"> try does not work if there's</font>

374
00:15:36,000 --> 00:15:38,910
anything that's<font color="#CCCCCC"> different about</font><font color="#E5E5E5"> our</font>

375
00:15:37,080 --> 00:15:42,960
<font color="#E5E5E5">approach though it's that we expect to</font>

376
00:15:38,910 --> 00:15:45,270
make<font color="#CCCCCC"> mistakes</font><font color="#E5E5E5"> we try to fail fast and to</font>

377
00:15:42,960 --> 00:15:48,150
learn<font color="#E5E5E5"> from it and iterate and change</font>

378
00:15:45,270 --> 00:15:53,100
<font color="#E5E5E5">directions</font><font color="#CCCCCC"> when we need to now what do</font>

379
00:15:48,150 --> 00:15:57,150
we learn here we learn to keep it simple

380
00:15:53,100 --> 00:16:01,140
<font color="#CCCCCC">and what is the most simple irreducible</font>

381
00:15:57,150 --> 00:16:05,750
component of an edge<font color="#E5E5E5"> network of course</font>

382
00:16:01,140 --> 00:16:11,310
<font color="#CCCCCC">it's</font><font color="#E5E5E5"> BGP itself so we evolved beyond BGP</font>

383
00:16:05,750 --> 00:16:13,650
with BGP now what does this mean<font color="#E5E5E5"> the</font>

384
00:16:11,310 --> 00:16:16,530
most<font color="#E5E5E5"> basic problem to solve a peering</font>

385
00:16:13,650 --> 00:16:17,880
router<font color="#CCCCCC"> appear your BGP attributes say</font>

386
00:16:16,530 --> 00:16:19,350
this is the best<font color="#E5E5E5"> local preference this</font>

387
00:16:17,880 --> 00:16:21,150
<font color="#E5E5E5">is the shortest</font><font color="#CCCCCC"> Leia's</font><font color="#E5E5E5"> path I'm sending</font>

388
00:16:19,350 --> 00:16:22,800
all this<font color="#CCCCCC"> traffic here but it's too</font><font color="#E5E5E5"> much</font>

389
00:16:21,150 --> 00:16:27,540
traffic<font color="#E5E5E5"> and you're dropping bits on</font><font color="#CCCCCC"> the</font>

390
00:16:22,800 --> 00:16:29,939
floor fortunately we<font color="#CCCCCC"> have data</font><font color="#E5E5E5"> we have</font>

391
00:16:27,540 --> 00:16:31,079
<font color="#CCCCCC">BMP exports of our routing</font><font color="#E5E5E5"> tables we</font>

392
00:16:29,940 --> 00:16:33,780
<font color="#E5E5E5">have net flow data showing our</font>

393
00:16:31,080 --> 00:16:35,610
<font color="#CCCCCC">utilization for every</font><font color="#E5E5E5"> single prefix we</font>

394
00:16:33,780 --> 00:16:38,069
have<font color="#CCCCCC"> linked counters showing packet</font>

395
00:16:35,610 --> 00:16:41,070
<font color="#E5E5E5">interface utilization and packet drops</font>

396
00:16:38,070 --> 00:16:43,710
and all<font color="#E5E5E5"> of this can be pulled into our</font>

397
00:16:41,070 --> 00:16:45,180
controller<font color="#CCCCCC"> software and our controller</font>

398
00:16:43,710 --> 00:16:49,890
can think where should<font color="#E5E5E5"> this traffic</font>

399
00:16:45,180 --> 00:16:52,349
<font color="#CCCCCC">actually go not limited by BGP and then</font>

400
00:16:49,890 --> 00:16:55,350
it can inject this decision<font color="#E5E5E5"> as a literal</font>

401
00:16:52,350 --> 00:17:00,240
BGP route simply into our<font color="#E5E5E5"> routing tables</font>

402
00:16:55,350 --> 00:17:01,770
<font color="#E5E5E5">and this is what we do today now you'll</font>

403
00:17:00,240 --> 00:17:03,620
note in<font color="#E5E5E5"> this picture there's only one</font>

404
00:17:01,770 --> 00:17:06,000
peering router<font color="#E5E5E5"> and that's deliberate in</font>

405
00:17:03,620 --> 00:17:08,910
the original iteration<font color="#E5E5E5"> of this</font>

406
00:17:06,000 --> 00:17:11,609
<font color="#E5E5E5">controller model it was very very simple</font>

407
00:17:08,910 --> 00:17:13,950
we managed<font color="#E5E5E5"> each individual peering</font>

408
00:17:11,609 --> 00:17:15,030
router as<font color="#E5E5E5"> an atomic object and we could</font>

409
00:17:13,950 --> 00:17:18,240
do<font color="#CCCCCC"> that</font><font color="#E5E5E5"> because our network was much</font>

410
00:17:15,030 --> 00:17:20,399
simpler<font color="#E5E5E5"> at that time we had that router</font>

411
00:17:18,240 --> 00:17:23,190
<font color="#CCCCCC">guide box</font><font color="#E5E5E5"> with</font><font color="#CCCCCC"> backbone and peering and</font>

412
00:17:20,400 --> 00:17:25,770
compute<font color="#E5E5E5"> connectivity and we could expect</font>

413
00:17:23,190 --> 00:17:27,480
a diverse range of peers<font color="#E5E5E5"> private peers</font>

414
00:17:25,770 --> 00:17:29,910
public exchanges transit all on one

415
00:17:27,480 --> 00:17:32,160
router<font color="#E5E5E5"> so there would be some</font><font color="#CCCCCC"> other</font>

416
00:17:29,910 --> 00:17:34,110
<font color="#E5E5E5">place</font><font color="#CCCCCC"> to send this traffic but if you</font>

417
00:17:32,160 --> 00:17:35,430
think<font color="#E5E5E5"> back</font><font color="#CCCCCC"> to the multi-layer edge</font>

418
00:17:34,110 --> 00:17:38,570
<font color="#E5E5E5">topology I showed you earlier</font>

419
00:17:35,430 --> 00:17:41,000
we now have disaggregated layers

420
00:17:38,570 --> 00:17:44,300
we have many<font color="#E5E5E5"> peering routers to allow us</font>

421
00:17:41,000 --> 00:17:47,210
to<font color="#E5E5E5"> grow faster we can no longer expect</font>

422
00:17:44,300 --> 00:17:49,909
that we'll have all<font color="#CCCCCC"> of our</font><font color="#E5E5E5"> peers on one</font>

423
00:17:47,210 --> 00:17:52,820
router<font color="#CCCCCC"> our peers could be anywhere</font><font color="#E5E5E5"> in</font>

424
00:17:49,910 --> 00:17:54,530
<font color="#CCCCCC">that city</font><font color="#E5E5E5"> on any peering router so we</font>

425
00:17:52,820 --> 00:17:59,210
<font color="#E5E5E5">needed to move from a router level model</font>

426
00:17:54,530 --> 00:18:02,120
to treating our city our<font color="#CCCCCC"> Metro</font><font color="#E5E5E5"> as one</font>

427
00:17:59,210 --> 00:18:04,370
unit moving<font color="#E5E5E5"> traffic between peering</font>

428
00:18:02,120 --> 00:18:07,580
links<font color="#E5E5E5"> where there's capacity across any</font>

429
00:18:04,370 --> 00:18:10,760
peering routers all the mechanisms are

430
00:18:07,580 --> 00:18:12,409
<font color="#E5E5E5">very</font><font color="#CCCCCC"> similar we inject BGP routes</font><font color="#E5E5E5"> but</font>

431
00:18:10,760 --> 00:18:14,810
now we leak them within<font color="#E5E5E5"> that city and</font>

432
00:18:12,410 --> 00:18:16,910
attract traffic<font color="#CCCCCC"> away from overheated</font>

433
00:18:14,810 --> 00:18:20,770
links<font color="#E5E5E5"> to links where we have the</font>

434
00:18:16,910 --> 00:18:22,940
<font color="#CCCCCC">capacity to</font><font color="#E5E5E5"> serve the traffic well I'm</font>

435
00:18:20,770 --> 00:18:25,430
<font color="#CCCCCC">sure you're thinking</font><font color="#E5E5E5"> awesome it's all</font>

436
00:18:22,940 --> 00:18:27,890
solved<font color="#E5E5E5"> we made our mistakes we're done</font>

437
00:18:25,430 --> 00:18:29,750
<font color="#CCCCCC">now of course that's never</font><font color="#E5E5E5"> true nothing</font>

438
00:18:27,890 --> 00:18:31,670
<font color="#CCCCCC">is</font><font color="#E5E5E5"> ever perfect</font><font color="#CCCCCC"> we're never done we</font>

439
00:18:29,750 --> 00:18:33,020
<font color="#E5E5E5">always have much more to learn and I'll</font>

440
00:18:31,670 --> 00:18:35,930
walk<font color="#E5E5E5"> you through</font><font color="#CCCCCC"> a few examples of</font>

441
00:18:33,020 --> 00:18:37,790
things<font color="#E5E5E5"> that we needed</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> fix we need to</font>

442
00:18:35,930 --> 00:18:42,980
make better<font color="#CCCCCC"> even after we moved to</font><font color="#E5E5E5"> these</font>

443
00:18:37,790 --> 00:18:45,290
<font color="#E5E5E5">models for</font><font color="#CCCCCC"> one what happens if you're an</font>

444
00:18:42,980 --> 00:18:48,320
ipv6 rich network connecting to another

445
00:18:45,290 --> 00:18:50,330
<font color="#E5E5E5">ipv6</font><font color="#CCCCCC"> network ipv6</font><font color="#E5E5E5"> allows tremendous</font>

446
00:18:48,320 --> 00:18:51,860
<font color="#CCCCCC">summarized ability you can actually</font>

447
00:18:50,330 --> 00:18:54,530
encapsulate your<font color="#E5E5E5"> entire network into a</font>

448
00:18:51,860 --> 00:18:56,840
single v6 prefix<font color="#E5E5E5"> now if your controller</font>

449
00:18:54,530 --> 00:18:59,420
model depends on moving bgp prefixes

450
00:18:56,840 --> 00:19:02,090
between peering links if that link

451
00:18:59,420 --> 00:19:04,730
becomes overloaded<font color="#E5E5E5"> and you move that</font>

452
00:19:02,090 --> 00:19:06,889
<font color="#E5E5E5">prefix you haven't alleviated an</font>

453
00:19:04,730 --> 00:19:08,600
overload condition<font color="#E5E5E5"> you've drained your</font>

454
00:19:06,890 --> 00:19:11,360
peer<font color="#E5E5E5"> and that's not at all what we</font>

455
00:19:08,600 --> 00:19:16,610
wanted<font color="#E5E5E5"> to do so we needed to develop a</font>

456
00:19:11,360 --> 00:19:18,770
system<font color="#CCCCCC"> that would allow us to create sub</font>

457
00:19:16,610 --> 00:19:23,120
prefixes just in our<font color="#CCCCCC"> own local</font><font color="#E5E5E5"> routing</font>

458
00:19:18,770 --> 00:19:25,280
tables but by creating<font color="#E5E5E5"> automatic sub</font>

459
00:19:23,120 --> 00:19:27,080
prefixes we had smaller chunks of

460
00:19:25,280 --> 00:19:30,200
traffic that<font color="#E5E5E5"> our controller could manage</font>

461
00:19:27,080 --> 00:19:36,230
simply as in the old model<font color="#E5E5E5"> if the link</font>

462
00:19:30,200 --> 00:19:38,960
became overloaded we could simply inject

463
00:19:36,230 --> 00:19:40,760
<font color="#E5E5E5">one of those sub prefixes or several of</font>

464
00:19:38,960 --> 00:19:45,200
<font color="#CCCCCC">the sub prefixes</font><font color="#E5E5E5"> to alleviate the</font>

465
00:19:40,760 --> 00:19:46,700
overload condition now if you think<font color="#CCCCCC"> back</font>

466
00:19:45,200 --> 00:19:49,130
<font color="#CCCCCC">to earlier when I was describing the</font>

467
00:19:46,700 --> 00:19:50,720
global controller and more recently the

468
00:19:49,130 --> 00:19:52,070
local controller you might have noticed

469
00:19:50,720 --> 00:19:54,260
that<font color="#E5E5E5"> both systems</font>

470
00:19:52,070 --> 00:19:56,629
are aware of<font color="#E5E5E5"> link counters they're aware</font>

471
00:19:54,260 --> 00:19:58,940
<font color="#E5E5E5">of BGP tables the local controller even</font>

472
00:19:56,630 --> 00:20:00,410
influences that BGP table<font color="#CCCCCC"> and you might</font>

473
00:19:58,940 --> 00:20:03,590
have asked how do these<font color="#E5E5E5"> systems</font><font color="#CCCCCC"> work</font>

474
00:20:00,410 --> 00:20:05,270
together<font color="#E5E5E5"> initially</font><font color="#CCCCCC"> they didn't they were</font>

475
00:20:03,590 --> 00:20:08,120
ships in the night<font color="#E5E5E5"> they were unaware of</font>

476
00:20:05,270 --> 00:20:11,240
each other<font color="#E5E5E5"> and eventually</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> caused us</font>

477
00:20:08,120 --> 00:20:13,370
real problems<font color="#CCCCCC"> a link</font><font color="#E5E5E5"> can become</font>

478
00:20:11,240 --> 00:20:15,770
overloaded<font color="#E5E5E5"> the local controller is very</font>

479
00:20:13,370 --> 00:20:17,659
<font color="#E5E5E5">fast it injects the BGP route the begins</font>

480
00:20:15,770 --> 00:20:20,240
moving<font color="#CCCCCC"> traffic away</font><font color="#E5E5E5"> the global</font>

481
00:20:17,660 --> 00:20:21,710
controller<font color="#CCCCCC"> slow dns is slow it begins</font>

482
00:20:20,240 --> 00:20:23,000
moving the DNS map at the very same

483
00:20:21,710 --> 00:20:25,160
<font color="#CCCCCC">moment it just</font><font color="#E5E5E5"> takes longer to take</font>

484
00:20:23,000 --> 00:20:27,680
effect<font color="#E5E5E5"> and before you know</font><font color="#CCCCCC"> it we've</font>

485
00:20:25,160 --> 00:20:29,210
under loaded the link the local

486
00:20:27,680 --> 00:20:31,490
controller it's very fast again it sees

487
00:20:29,210 --> 00:20:33,830
this it's moving<font color="#CCCCCC"> BGP routes back into</font>

488
00:20:31,490 --> 00:20:35,870
the<font color="#CCCCCC"> goods</font><font color="#E5E5E5"> own the global controller</font><font color="#CCCCCC"> saw</font>

489
00:20:33,830 --> 00:20:38,060
<font color="#CCCCCC">the</font><font color="#E5E5E5"> same thing it's moving slower and</font>

490
00:20:35,870 --> 00:20:40,929
before you know it<font color="#E5E5E5"> DNS is back we're</font>

491
00:20:38,060 --> 00:20:45,409
overloading the link<font color="#E5E5E5"> and unfortunately</font>

492
00:20:40,930 --> 00:20:48,800
this could happen<font color="#E5E5E5"> all</font><font color="#CCCCCC"> day</font><font color="#E5E5E5"> long so what</font>

493
00:20:45,410 --> 00:20:51,140
<font color="#CCCCCC">do</font><font color="#E5E5E5"> we</font><font color="#CCCCCC"> learn we learn</font><font color="#E5E5E5"> to make clear roles</font>

494
00:20:48,800 --> 00:20:53,440
for<font color="#E5E5E5"> our controllers clear handoffs</font>

495
00:20:51,140 --> 00:20:56,560
<font color="#E5E5E5">between them the local controller</font>

496
00:20:53,440 --> 00:20:58,970
manages<font color="#E5E5E5"> our capacity within</font><font color="#CCCCCC"> a city</font><font color="#E5E5E5"> and</font>

497
00:20:56,560 --> 00:21:00,770
only when that<font color="#E5E5E5"> city is full and there's</font>

498
00:20:58,970 --> 00:21:02,360
no other place<font color="#CCCCCC"> to send</font><font color="#E5E5E5"> this traffic</font><font color="#CCCCCC"> is</font>

499
00:21:00,770 --> 00:21:07,760
our global controller engaged to move

500
00:21:02,360 --> 00:21:10,070
traffic<font color="#CCCCCC"> between cities</font><font color="#E5E5E5"> ok but</font>

501
00:21:07,760 --> 00:21:11,990
oscillations<font color="#E5E5E5"> can even</font><font color="#CCCCCC"> happen within one</font>

502
00:21:10,070 --> 00:21:14,030
controller<font color="#E5E5E5"> even if you don't have an</font>

503
00:21:11,990 --> 00:21:16,250
interaction<font color="#E5E5E5"> between two of them in this</font>

504
00:21:14,030 --> 00:21:18,680
example<font color="#E5E5E5"> our local controller is managing</font>

505
00:21:16,250 --> 00:21:20,030
traffic<font color="#E5E5E5"> between two peering links and if</font>

506
00:21:18,680 --> 00:21:21,800
you see the zoomed in graphic<font color="#E5E5E5"> there it's</font>

507
00:21:20,030 --> 00:21:24,590
quickly<font color="#E5E5E5"> moving prefixes in traffic</font>

508
00:21:21,800 --> 00:21:27,200
between<font color="#E5E5E5"> those links now when we dug into</font>

509
00:21:24,590 --> 00:21:28,220
this what we found is that<font color="#E5E5E5"> controller</font>

510
00:21:27,200 --> 00:21:31,760
thought it was doing<font color="#CCCCCC"> the</font><font color="#E5E5E5"> right things</font>

511
00:21:28,220 --> 00:21:33,560
but<font color="#E5E5E5"> its data was wrong those data</font>

512
00:21:31,760 --> 00:21:36,400
pipelines I mentioned earlier the BMP

513
00:21:33,560 --> 00:21:40,520
data the<font color="#CCCCCC"> NetFlow data the link counters</font>

514
00:21:36,400 --> 00:21:41,090
all of that was built<font color="#E5E5E5"> for more human</font>

515
00:21:40,520 --> 00:21:43,129
consumption

516
00:21:41,090 --> 00:21:44,750
<font color="#CCCCCC">it was aggregated back at global data</font>

517
00:21:43,130 --> 00:21:46,880
centers it showed up<font color="#E5E5E5"> on graphs that</font>

518
00:21:44,750 --> 00:21:48,950
human beings could<font color="#E5E5E5"> look at it was never</font>

519
00:21:46,880 --> 00:21:51,710
built with the<font color="#E5E5E5"> intention that a</font>

520
00:21:48,950 --> 00:21:53,870
real-time<font color="#CCCCCC"> automation system would be</font>

521
00:21:51,710 --> 00:21:56,810
using it to ship traffic<font color="#E5E5E5"> in a live</font>

522
00:21:53,870 --> 00:21:59,540
network so<font color="#CCCCCC"> we needed to shorten those</font>

523
00:21:56,810 --> 00:22:02,240
pipelines collect this data they<font color="#E5E5E5"> are</font>

524
00:21:59,540 --> 00:22:04,399
much closer in the edge pop next<font color="#E5E5E5"> to the</font>

525
00:22:02,240 --> 00:22:05,060
controller<font color="#CCCCCC"> increases granularity its</font>

526
00:22:04,400 --> 00:22:08,320
precision

527
00:22:05,060 --> 00:22:11,000
and feed it fast to the controller<font color="#CCCCCC"> and</font>

528
00:22:08,320 --> 00:22:13,370
by doing<font color="#E5E5E5"> that we ended</font><font color="#CCCCCC"> up</font><font color="#E5E5E5"> with a pretty</font>

529
00:22:11,000 --> 00:22:15,440
graph you<font color="#CCCCCC"> see here on the right no</font>

530
00:22:13,370 --> 00:22:17,149
<font color="#E5E5E5">network graph will be</font><font color="#CCCCCC"> a flat line but</font>

531
00:22:15,440 --> 00:22:18,920
there's no longer any oscillations<font color="#CCCCCC"> it's</font>

532
00:22:17,150 --> 00:22:23,210
managing the traffic<font color="#E5E5E5"> that the interface</font>

533
00:22:18,920 --> 00:22:25,580
<font color="#E5E5E5">can take well so bringing it all</font>

534
00:22:23,210 --> 00:22:27,920
together<font color="#E5E5E5"> we have</font><font color="#CCCCCC"> a global controller</font>

535
00:22:25,580 --> 00:22:31,429
<font color="#E5E5E5">that manages ingress and egress as well</font>

536
00:22:27,920 --> 00:22:33,650
distributing it<font color="#CCCCCC"> to our edge pops within</font>

537
00:22:31,430 --> 00:22:36,170
those edge pops we build multi-layer

538
00:22:33,650 --> 00:22:38,150
topologies and we manage our egress

539
00:22:36,170 --> 00:22:41,690
traffic<font color="#E5E5E5"> with a local network controller</font>

540
00:22:38,150 --> 00:22:42,260
and we're by no means done<font color="#E5E5E5"> we have more</font>

541
00:22:41,690 --> 00:22:44,270
work<font color="#CCCCCC"> to</font><font color="#E5E5E5"> do</font>

542
00:22:42,260 --> 00:22:46,790
increasing<font color="#CCCCCC"> the modularity of our network</font>

543
00:22:44,270 --> 00:22:48,050
<font color="#CCCCCC">the resilience in</font><font color="#E5E5E5"> our layers building</font>

544
00:22:46,790 --> 00:22:50,200
more diversity<font color="#CCCCCC"> on</font><font color="#E5E5E5"> our networks and</font>

545
00:22:48,050 --> 00:22:52,399
<font color="#E5E5E5">systems</font><font color="#CCCCCC"> to work around failures faster</font>

546
00:22:50,200 --> 00:22:53,900
<font color="#E5E5E5">we want to increase the parameter of our</font>

547
00:22:52,400 --> 00:22:56,570
network<font color="#E5E5E5"> you might have heard about</font>

548
00:22:53,900 --> 00:22:59,210
efforts like<font color="#E5E5E5"> open R which is has</font>

549
00:22:56,570 --> 00:23:01,220
applications<font color="#E5E5E5"> in wireless mesh networks</font>

550
00:22:59,210 --> 00:23:03,010
<font color="#CCCCCC">are our backbone but we believe also has</font>

551
00:23:01,220 --> 00:23:05,300
an important place<font color="#CCCCCC"> in</font><font color="#E5E5E5"> our edge networks</font>

552
00:23:03,010 --> 00:23:06,890
<font color="#E5E5E5">moving beyond</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> old paradigm of</font>

553
00:23:05,300 --> 00:23:08,360
fixed routing protocols and standards

554
00:23:06,890 --> 00:23:10,640
committees and asking vendors for

555
00:23:08,360 --> 00:23:13,990
features but<font color="#E5E5E5"> allowing us to quickly</font>

556
00:23:10,640 --> 00:23:16,190
iterate and try new things<font color="#CCCCCC"> to marry</font>

557
00:23:13,990 --> 00:23:18,830
programmable<font color="#E5E5E5"> network with our software</font>

558
00:23:16,190 --> 00:23:21,020
systems<font color="#CCCCCC"> and last</font><font color="#E5E5E5"> but not least</font>

559
00:23:18,830 --> 00:23:23,090
performance<font color="#E5E5E5"> I talked earlier about sonar</font>

560
00:23:21,020 --> 00:23:24,500
and how we use performance data to

561
00:23:23,090 --> 00:23:27,050
<font color="#CCCCCC">improve our service and</font><font color="#E5E5E5"> improve how we</font>

562
00:23:24,500 --> 00:23:29,230
forward traffic<font color="#E5E5E5"> we actually have much</font>

563
00:23:27,050 --> 00:23:31,460
more<font color="#E5E5E5"> data than we use today</font>

564
00:23:29,230 --> 00:23:33,710
now edge<font color="#E5E5E5"> networks are not like data</font>

565
00:23:31,460 --> 00:23:35,990
centers<font color="#CCCCCC"> they're not simple</font><font color="#E5E5E5"> there's a lot</font>

566
00:23:33,710 --> 00:23:38,420
of noise out<font color="#E5E5E5"> there</font><font color="#CCCCCC"> on the internet but</font>

567
00:23:35,990 --> 00:23:42,500
we believe there is<font color="#CCCCCC"> still signal that we</font>

568
00:23:38,420 --> 00:23:44,570
<font color="#E5E5E5">can pull from this noise using this more</font>

569
00:23:42,500 --> 00:23:47,210
programmable<font color="#CCCCCC"> Network with</font><font color="#E5E5E5"> our software</font>

570
00:23:44,570 --> 00:23:49,580
<font color="#E5E5E5">to</font><font color="#CCCCCC"> make</font><font color="#E5E5E5"> better forwarding decisions and</font>

571
00:23:47,210 --> 00:23:53,170
to improve the performance<font color="#E5E5E5"> of our</font>

572
00:23:49,580 --> 00:23:53,169
service but<font color="#E5E5E5"> the people use our products</font>

573
00:23:53,470 --> 00:23:58,580
now if you take<font color="#E5E5E5"> away anything here today</font>

574
00:23:55,760 --> 00:24:01,430
<font color="#E5E5E5">I would like it</font><font color="#CCCCCC"> to be that</font><font color="#E5E5E5"> we did not</font>

575
00:23:58,580 --> 00:24:03,980
have<font color="#E5E5E5"> all the answers</font><font color="#CCCCCC"> we did not know</font>

576
00:24:01,430 --> 00:24:06,320
where<font color="#CCCCCC"> we</font><font color="#E5E5E5"> would end up when we began we</font>

577
00:24:03,980 --> 00:24:11,060
started<font color="#E5E5E5"> small</font><font color="#CCCCCC"> we tried things</font><font color="#E5E5E5"> we tested</font>

578
00:24:06,320 --> 00:24:12,950
them we had a lot to<font color="#E5E5E5"> learn but the thing</font>

579
00:24:11,060 --> 00:24:16,899
<font color="#E5E5E5">that I hope does not</font><font color="#CCCCCC"> change is our</font>

580
00:24:12,950 --> 00:24:19,600
values<font color="#E5E5E5"> we value operations</font>

581
00:24:16,900 --> 00:24:23,680
<font color="#E5E5E5">optical</font><font color="#CCCCCC"> experience over</font><font color="#E5E5E5"> abstract</font>

582
00:24:19,600 --> 00:24:25,959
features<font color="#E5E5E5"> and failsafe architectures we</font>

583
00:24:23,680 --> 00:24:27,550
try things<font color="#CCCCCC"> we iterate we test them we're</font>

584
00:24:25,960 --> 00:24:29,920
willing to<font color="#E5E5E5"> make mistakes and learn</font><font color="#CCCCCC"> from</font>

585
00:24:27,550 --> 00:24:31,450
<font color="#E5E5E5">them</font><font color="#CCCCCC"> so we can make a</font><font color="#E5E5E5"> final solution</font>

586
00:24:29,920 --> 00:24:33,520
<font color="#CCCCCC">that's better but there is no final</font>

587
00:24:31,450 --> 00:24:37,180
solution where we<font color="#CCCCCC"> are</font><font color="#E5E5E5"> today is not</font><font color="#CCCCCC"> the</font>

588
00:24:33,520 --> 00:24:40,210
<font color="#E5E5E5">end we have much more work to do it can</font>

589
00:24:37,180 --> 00:24:42,130
be<font color="#CCCCCC"> done</font><font color="#E5E5E5"> better</font><font color="#CCCCCC"> and we know</font><font color="#E5E5E5"> that now I'm</font>

590
00:24:40,210 --> 00:24:43,480
sure many<font color="#CCCCCC"> people in this room have</font>

591
00:24:42,130 --> 00:24:46,030
<font color="#E5E5E5">problems that</font><font color="#CCCCCC"> are very</font><font color="#E5E5E5"> similar</font><font color="#CCCCCC"> to the</font>

592
00:24:43,480 --> 00:24:47,860
problems that<font color="#E5E5E5"> we have and you may have</font>

593
00:24:46,030 --> 00:24:51,129
different solutions<font color="#E5E5E5"> different approaches</font>

594
00:24:47,860 --> 00:24:52,990
in fact I hope that you do and if<font color="#E5E5E5"> you do</font>

595
00:24:51,130 --> 00:24:55,000
we would<font color="#CCCCCC"> love</font><font color="#E5E5E5"> to talk to</font><font color="#CCCCCC"> you</font>

596
00:24:52,990 --> 00:24:58,350
please seek us<font color="#E5E5E5"> out we would love</font><font color="#CCCCCC"> the</font>

597
00:24:55,000 --> 00:24:58,350
chat<font color="#E5E5E5"> thank you</font><font color="#CCCCCC"> very much</font>

598
00:25:03,659 --> 00:25:10,570
any questions<font color="#E5E5E5"> either um my name's Linda</font>

599
00:25:08,770 --> 00:25:12,580
Dunbar from Huawei<font color="#CCCCCC"> and that's a very</font>

600
00:25:10,570 --> 00:25:14,980
<font color="#E5E5E5">interesting</font><font color="#CCCCCC"> presentation</font>

601
00:25:12,580 --> 00:25:18,370
I do have<font color="#CCCCCC"> questions about</font><font color="#E5E5E5"> this local</font>

602
00:25:14,980 --> 00:25:22,080
control from in IETF there's a working

603
00:25:18,370 --> 00:25:25,959
group called<font color="#CCCCCC"> I 2</font><font color="#E5E5E5"> RS interface to router</font>

604
00:25:22,080 --> 00:25:27,990
<font color="#E5E5E5">that helps router to change the policy</font>

605
00:25:25,960 --> 00:25:31,600
on<font color="#E5E5E5"> the route there's also</font>

606
00:25:27,990 --> 00:25:34,840
<font color="#CCCCCC">idrs on the</font><font color="#E5E5E5"> BGP flowspec do you use any</font>

607
00:25:31,600 --> 00:25:38,889
of those standardized approach we do not

608
00:25:34,840 --> 00:25:41,830
we use simple BGP yes<font color="#CCCCCC"> our injections are</font>

609
00:25:38,890 --> 00:25:44,350
vanilla<font color="#E5E5E5"> v4 and v6 prefixes and nothing</font>

610
00:25:41,830 --> 00:25:46,990
<font color="#CCCCCC">more okay and you</font><font color="#E5E5E5"> don't use flows back</font>

611
00:25:44,350 --> 00:25:49,330
bgp flows back<font color="#CCCCCC"> we do not round it's very</font>

612
00:25:46,990 --> 00:25:50,770
simple<font color="#CCCCCC"> very</font><font color="#E5E5E5"> simple</font><font color="#CCCCCC"> literally just ipv4</font>

613
00:25:49,330 --> 00:25:52,658
routes ipv6 routes are nothing more

614
00:25:50,770 --> 00:25:57,220
thank you you're welcome

615
00:25:52,659 --> 00:25:59,830
ah<font color="#E5E5E5"> hi other</font><font color="#CCCCCC"> Naveed here</font><font color="#E5E5E5"> in the last</font>

616
00:25:57,220 --> 00:26:03,549
slide<font color="#CCCCCC"> you mentioned that you're not</font>

617
00:25:59,830 --> 00:26:06,370
relying<font color="#E5E5E5"> on</font><font color="#CCCCCC"> the interface counters or the</font>

618
00:26:03,549 --> 00:26:09,639
data<font color="#E5E5E5"> provided by the net flow</font><font color="#CCCCCC"> as a</font>

619
00:26:06,370 --> 00:26:13,689
measure input<font color="#E5E5E5"> to your controller for</font>

620
00:26:09,640 --> 00:26:14,740
<font color="#E5E5E5">real time so we are using net flow and</font>

621
00:26:13,690 --> 00:26:17,590
<font color="#E5E5E5">link counters as an input to</font><font color="#CCCCCC"> our</font>

622
00:26:14,740 --> 00:26:19,600
controller<font color="#CCCCCC"> okay but they were resulting</font>

623
00:26:17,590 --> 00:26:21,279
in the<font color="#CCCCCC"> overflow right as I understand</font>

624
00:26:19,600 --> 00:26:23,559
<font color="#E5E5E5">because they were not real in a</font>

625
00:26:21,279 --> 00:26:25,659
<font color="#E5E5E5">real-time fashion yes so we improved</font>

626
00:26:23,559 --> 00:26:27,760
that<font color="#E5E5E5"> collection we actually moved the</font>

627
00:26:25,659 --> 00:26:29,649
collectors from our central<font color="#E5E5E5"> data centers</font>

628
00:26:27,760 --> 00:26:32,049
instead<font color="#CCCCCC"> of collecting them globally</font><font color="#E5E5E5"> we</font>

629
00:26:29,649 --> 00:26:33,459
<font color="#CCCCCC">actually spawned collectors in every</font>

630
00:26:32,049 --> 00:26:35,500
<font color="#E5E5E5">single one of our edge pops in the world</font>

631
00:26:33,460 --> 00:26:37,390
and we increase the granularity of those

632
00:26:35,500 --> 00:26:40,299
collectors so that we could<font color="#E5E5E5"> provide very</font>

633
00:26:37,390 --> 00:26:42,340
precise data in the same city<font color="#E5E5E5"> actually</font>

634
00:26:40,299 --> 00:26:43,779
in servers adjacent directly to our

635
00:26:42,340 --> 00:26:46,629
controllers so that they have<font color="#CCCCCC"> real-time</font>

636
00:26:43,779 --> 00:26:48,010
data to act on is it make sense<font color="#E5E5E5"> yeah</font>

637
00:26:46,630 --> 00:26:55,380
yeah<font color="#E5E5E5"> sounds good</font>

638
00:26:48,010 --> 00:26:55,379
<font color="#CCCCCC">Thanks you're</font><font color="#E5E5E5"> welcome any more questions</font>

639
00:27:02,210 --> 00:27:04,270
you

