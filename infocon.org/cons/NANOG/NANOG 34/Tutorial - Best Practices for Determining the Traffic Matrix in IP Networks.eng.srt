1
00:00:00,000 --> 00:00:05,310
my name is<font color="#E5E5E5"> Thomas</font><font color="#CCCCCC"> telkom I work</font><font color="#E5E5E5"> for</font>

2
00:00:02,580 --> 00:00:09,150
<font color="#CCCCCC">Carolyn before that I've worked very</font>

3
00:00:05,310 --> 00:00:11,849
<font color="#E5E5E5">long time for</font><font color="#CCCCCC"> global crossing so i'll be</font>

4
00:00:09,150 --> 00:00:14,929
presenting about traffic matrices and IP

5
00:00:11,849 --> 00:00:17,730
networks today<font color="#E5E5E5"> and trying to focus on</font>

6
00:00:14,929 --> 00:00:19,529
practical deployments on how you can

7
00:00:17,730 --> 00:00:25,890
actually<font color="#CCCCCC"> use these things</font><font color="#E5E5E5"> in your own</font>

8
00:00:19,529 --> 00:00:27,480
network before i get started i like to

9
00:00:25,890 --> 00:00:29,720
<font color="#E5E5E5">make a few acknowledgments to people who</font>

10
00:00:27,480 --> 00:00:32,730
have contributed<font color="#E5E5E5"> to</font><font color="#CCCCCC"> today's</font><font color="#E5E5E5"> presentation</font>

11
00:00:29,720 --> 00:00:35,100
especially<font color="#CCCCCC"> stefan senator from deutsche</font>

12
00:00:32,729 --> 00:00:37,680
<font color="#CCCCCC">telekom t-systems we've</font><font color="#E5E5E5"> done this</font>

13
00:00:35,100 --> 00:00:39,120
tutorial before and<font color="#E5E5E5"> I've actually done</font>

14
00:00:37,680 --> 00:00:44,100
it together<font color="#E5E5E5"> with him where he has been</font>

15
00:00:39,120 --> 00:00:45,660
<font color="#E5E5E5">presenting the slides about mpls also a</font>

16
00:00:44,100 --> 00:00:47,700
cisco and juniper have contributed some

17
00:00:45,660 --> 00:00:49,949
information and some earlier work I did

18
00:00:47,700 --> 00:00:57,270
on traffic matrices together with my<font color="#E5E5E5"> gal</font>

19
00:00:49,950 --> 00:01:00,180
yo and sun from kth so the agenda<font color="#CCCCCC"> for</font>

20
00:00:57,270 --> 00:01:01,770
this afternoon first a brief

21
00:01:00,180 --> 00:01:03,480
<font color="#E5E5E5">introduction about traffic matrixes</font>

22
00:01:01,770 --> 00:01:05,159
themselves just to make sure we're all

23
00:01:03,480 --> 00:01:06,990
talking about the same thing have a good

24
00:01:05,159 --> 00:01:09,299
understanding of the properties of the

25
00:01:06,990 --> 00:01:10,820
traffic matrix itself before<font color="#E5E5E5"> we actually</font>

26
00:01:09,299 --> 00:01:15,180
talk<font color="#E5E5E5"> about how we want to measure</font>

27
00:01:10,820 --> 00:01:17,369
measure these matrixes then the direct

28
00:01:15,180 --> 00:01:19,170
measurement methods the most obvious

29
00:01:17,369 --> 00:01:22,070
<font color="#E5E5E5">ones which probably most of you are</font>

30
00:01:19,170 --> 00:01:25,920
<font color="#CCCCCC">familiar with being</font><font color="#E5E5E5"> net flow and</font>

31
00:01:22,070 --> 00:01:29,189
somewhat related<font color="#CCCCCC"> dcu and bgp policy</font>

32
00:01:25,920 --> 00:01:30,960
accounting we also have<font color="#CCCCCC"> a case study we</font>

33
00:01:29,189 --> 00:01:33,740
<font color="#E5E5E5">actually have an actual network operator</font>

34
00:01:30,960 --> 00:01:36,210
<font color="#CCCCCC">i can't disclose the name because it's</font>

35
00:01:33,740 --> 00:01:38,669
confidential deployment at least the

36
00:01:36,210 --> 00:01:39,960
name is confidential but it's it shows

37
00:01:38,670 --> 00:01:42,570
you actually how<font color="#CCCCCC"> it is deployed in a</font>

38
00:01:39,960 --> 00:01:45,960
real<font color="#E5E5E5"> network then we move on to mpls</font>

39
00:01:42,570 --> 00:01:50,369
networks either te based so rsvp-te

40
00:01:45,960 --> 00:01:53,490
based or LDP networks where there are

41
00:01:50,369 --> 00:01:57,719
very nice new methods to collect traffic

42
00:01:53,490 --> 00:01:59,130
matrix information then the<font color="#E5E5E5"> last big</font>

43
00:01:57,719 --> 00:02:01,020
topic of the talk is actually the

44
00:01:59,130 --> 00:02:02,880
traffic metric estimation which is one

45
00:02:01,020 --> 00:02:05,820
of<font color="#E5E5E5"> my personal favorites because it's</font>

46
00:02:02,880 --> 00:02:09,030
really such a nice methods with<font color="#E5E5E5"> without</font>

47
00:02:05,820 --> 00:02:11,038
very much equipment deployed to actually

48
00:02:09,030 --> 00:02:13,170
find out what your traffic matrixes and

49
00:02:11,038 --> 00:02:13,920
then at the<font color="#CCCCCC"> end I try to compare a few</font>

50
00:02:13,170 --> 00:02:15,780
<font color="#E5E5E5">things</font>

51
00:02:13,920 --> 00:02:20,369
and talk<font color="#E5E5E5"> about the trade-offs between</font>

52
00:02:15,780 --> 00:02:22,560
the different<font color="#CCCCCC"> methods so as</font><font color="#E5E5E5"> I said just</font>

53
00:02:20,370 --> 00:02:24,930
to get started<font color="#CCCCCC"> and some general</font>

54
00:02:22,560 --> 00:02:26,730
statements about<font color="#E5E5E5"> the traffic matrix so</font>

55
00:02:24,930 --> 00:02:28,860
first a definition of what we're really

56
00:02:26,730 --> 00:02:30,750
talking about<font color="#E5E5E5"> in the traffic matrix</font>

57
00:02:28,860 --> 00:02:33,270
we're really looking at the amount<font color="#E5E5E5"> of</font>

58
00:02:30,750 --> 00:02:36,450
data transmitted between any pair of

59
00:02:33,270 --> 00:02:38,730
routers in the network I will often call

60
00:02:36,450 --> 00:02:41,670
<font color="#CCCCCC">these demands or entries in traffic</font>

61
00:02:38,730 --> 00:02:43,349
matrix or something<font color="#CCCCCC"> like that</font><font color="#E5E5E5"> so we're</font>

62
00:02:41,670 --> 00:02:46,350
really talking to<font color="#E5E5E5"> end-to-end traffic</font>

63
00:02:43,349 --> 00:02:49,260
inside the network or inside the<font color="#E5E5E5"> core</font>

64
00:02:46,350 --> 00:02:50,819
network so entering the traffic is

65
00:02:49,260 --> 00:02:52,980
entering your network at some point and

66
00:02:50,819 --> 00:02:54,540
exiting and the traffic between those

67
00:02:52,980 --> 00:03:00,480
points are the entries were looking at

68
00:02:54,540 --> 00:03:02,489
for the<font color="#CCCCCC"> traffic matrix then we can make</font>

69
00:03:00,480 --> 00:03:04,170
a decision on what time we want<font color="#E5E5E5"> to look</font>

70
00:03:02,489 --> 00:03:06,480
at the traffic we can have a snapshot at

71
00:03:04,170 --> 00:03:08,548
a certain time of the day or we can

72
00:03:06,480 --> 00:03:10,109
actually<font color="#CCCCCC"> look at the</font><font color="#E5E5E5"> peak not only the</font>

73
00:03:08,549 --> 00:03:12,540
peak of the total traffic with the peak

74
00:03:10,110 --> 00:03:14,790
of all the individual entries in the

75
00:03:12,540 --> 00:03:16,319
<font color="#E5E5E5">matrices so there are different ways of</font>

76
00:03:14,790 --> 00:03:20,090
looking<font color="#E5E5E5"> at this and I'll come back to</font>

77
00:03:16,319 --> 00:03:22,768
where they are applicable one

78
00:03:20,090 --> 00:03:24,750
distinction we also need to make is what

79
00:03:22,769 --> 00:03:26,940
we're talking about router level or pop

80
00:03:24,750 --> 00:03:28,560
level matrices on<font color="#E5E5E5"> route the level</font>

81
00:03:26,940 --> 00:03:31,290
matrices we're talking about traffic

82
00:03:28,560 --> 00:03:33,060
from route of the<font color="#E5E5E5"> router on pop level</font>

83
00:03:31,290 --> 00:03:35,970
matrices we just look<font color="#E5E5E5"> at how many</font>

84
00:03:33,060 --> 00:03:39,209
<font color="#E5E5E5">traffic endless aside and where it exits</font>

85
00:03:35,970 --> 00:03:41,820
at the north side sometimes it might be

86
00:03:39,209 --> 00:03:43,530
easier<font color="#CCCCCC"> to build a pop to pop matrix</font>

87
00:03:41,820 --> 00:03:45,328
matrix but obviously there's less

88
00:03:43,530 --> 00:03:48,600
information in it and as less you can<font color="#E5E5E5"> do</font>

89
00:03:45,329 --> 00:03:51,299
with these kind of things so as a quick

90
00:03:48,600 --> 00:03:52,769
visualization one entry in the traffic

91
00:03:51,299 --> 00:03:54,690
matrix would be the traffic from the

92
00:03:52,769 --> 00:04:00,209
<font color="#CCCCCC">router on the left to the right on the</font>

93
00:03:54,690 --> 00:04:02,010
right but maybe the more important

94
00:04:00,209 --> 00:04:04,410
question had<font color="#E5E5E5"> to start with is why do we</font>

95
00:04:02,010 --> 00:04:05,880
actually need a traffic matrix if you

96
00:04:04,410 --> 00:04:08,400
look<font color="#E5E5E5"> at</font><font color="#CCCCCC"> the link loads in your network</font>

97
00:04:05,880 --> 00:04:10,560
<font color="#E5E5E5">you already know if you have enough</font>

98
00:04:08,400 --> 00:04:12,150
capacity if there is enough free

99
00:04:10,560 --> 00:04:13,620
capacity to carry the traffic in your

100
00:04:12,150 --> 00:04:17,370
<font color="#E5E5E5">network so why would</font><font color="#CCCCCC"> you need more</font>

101
00:04:13,620 --> 00:04:20,399
specific information the first reason is

102
00:04:17,370 --> 00:04:22,560
for what if scenarios suppose there<font color="#E5E5E5"> is a</font>

103
00:04:20,399 --> 00:04:24,210
link or certain amount of links which

104
00:04:22,560 --> 00:04:26,370
are full or nearly full in your network

105
00:04:24,210 --> 00:04:27,810
if you make<font color="#CCCCCC"> changes to</font><font color="#E5E5E5"> the network for</font>

106
00:04:26,370 --> 00:04:29,910
example by adding<font color="#E5E5E5"> capaz</font>

107
00:04:27,810 --> 00:04:31,560
the not just parallel to what you

108
00:04:29,910 --> 00:04:33,990
already have but in a different apology

109
00:04:31,560 --> 00:04:35,669
you<font color="#CCCCCC"> add a link between two routers where</font>

110
00:04:33,990 --> 00:04:38,250
there was no link before you want to

111
00:04:35,669 --> 00:04:40,590
know how in<font color="#E5E5E5"> the new situation that the</font>

112
00:04:38,250 --> 00:04:42,210
link loads would look like in that case

113
00:04:40,590 --> 00:04:44,159
you<font color="#E5E5E5"> need to know the real source</font>

114
00:04:42,210 --> 00:04:45,810
destinations injured in<font color="#CCCCCC"> your network you</font>

115
00:04:44,160 --> 00:04:48,030
cannot use the link<font color="#CCCCCC"> loads you've already</font>

116
00:04:45,810 --> 00:04:49,680
seen on the existing<font color="#E5E5E5"> network you can</font>

117
00:04:48,030 --> 00:04:52,739
also include the closet surface if

118
00:04:49,680 --> 00:04:54,660
you're carrying something like voice for

119
00:04:52,740 --> 00:04:56,280
<font color="#E5E5E5">Java IP traffic in large amount on</font><font color="#CCCCCC"> your</font>

120
00:04:54,660 --> 00:04:58,950
network you<font color="#E5E5E5"> might want to look at this</font>

121
00:04:56,280 --> 00:05:01,429
problem<font color="#E5E5E5"> on an per class basis because</font>

122
00:04:58,950 --> 00:05:04,050
you might have different provisioning

123
00:05:01,430 --> 00:05:06,540
guidelines for these classes of service

124
00:05:04,050 --> 00:05:08,700
the second reason you need a traffic

125
00:05:06,540 --> 00:05:11,460
matrix for is that the resilience

126
00:05:08,700 --> 00:05:12,659
analysis if you're doing measurements on

127
00:05:11,460 --> 00:05:14,638
your network and you look at the links

128
00:05:12,660 --> 00:05:16,530
themselves what you see is the current

129
00:05:14,639 --> 00:05:18,990
<font color="#E5E5E5">state of the network what you really</font>

130
00:05:16,530 --> 00:05:22,409
want<font color="#E5E5E5"> to know is can my network survive</font>

131
00:05:18,990 --> 00:05:25,020
router outages or single link failures

132
00:05:22,410 --> 00:05:26,639
or as well see failures for example

133
00:05:25,020 --> 00:05:28,799
where you have multiple links in a

134
00:05:26,639 --> 00:05:30,270
single fiber if the<font color="#CCCCCC"> fiber goes down will</font>

135
00:05:28,800 --> 00:05:32,550
I still have enough capacity in the

136
00:05:30,270 --> 00:05:34,620
network again to run these kinds of

137
00:05:32,550 --> 00:05:36,330
simulations you need to know what<font color="#CCCCCC"> is it</font>

138
00:05:34,620 --> 00:05:39,120
where the traffic enters and leaves your

139
00:05:36,330 --> 00:05:42,390
network then<font color="#CCCCCC"> the last one is more the</font>

140
00:05:39,120 --> 00:05:45,180
architecture work optimization so given

141
00:05:42,390 --> 00:05:46,950
<font color="#E5E5E5">the traffic matrix where's its why did</font>

142
00:05:45,180 --> 00:05:49,710
the real bottlenecks exist in your

143
00:05:46,950 --> 00:05:52,020
network and the more advanced methods

144
00:05:49,710 --> 00:05:54,419
and have been different talks<font color="#E5E5E5"> about it</font>

145
00:05:52,020 --> 00:05:56,969
<font color="#E5E5E5">at nanak about those as well is can you</font>

146
00:05:54,419 --> 00:05:58,650
optimize for example your metrics to

147
00:05:56,970 --> 00:06:00,810
have more efficient routing or actually

148
00:05:58,650 --> 00:06:02,250
get more traffic on the same network and

149
00:06:00,810 --> 00:06:05,400
again<font color="#E5E5E5"> you need to know your traffic</font>

150
00:06:02,250 --> 00:06:11,130
matrix so various good reasons to find

151
00:06:05,400 --> 00:06:14,130
out where your<font color="#E5E5E5"> traffic is going again we</font>

152
00:06:11,130 --> 00:06:16,260
<font color="#E5E5E5">need to look at from where to where we</font>

153
00:06:14,130 --> 00:06:18,030
want<font color="#E5E5E5"> to</font><font color="#CCCCCC"> define the traffic matrix if you</font>

154
00:06:16,260 --> 00:06:20,639
have an<font color="#E5E5E5"> extremely large network doing it</font>

155
00:06:18,030 --> 00:06:23,388
from edge to edge might give you a lot

156
00:06:20,639 --> 00:06:27,000
of data and<font color="#E5E5E5"> a very large set of</font>

157
00:06:23,389 --> 00:06:28,500
relatives to the process so you can

158
00:06:27,000 --> 00:06:30,000
either<font color="#E5E5E5"> choose to have a traffic matrix</font>

159
00:06:28,500 --> 00:06:35,120
between the core routers in your network

160
00:06:30,000 --> 00:06:37,380
or between<font color="#E5E5E5"> all the edge routers then a</font>

161
00:06:35,120 --> 00:06:39,390
distinction is whether we only look at

162
00:06:37,380 --> 00:06:40,120
<font color="#CCCCCC">the internal traffic matrix or also at</font>

163
00:06:39,390 --> 00:06:41,919
the external

164
00:06:40,120 --> 00:06:43,530
matrix the internal traffic matrix is

165
00:06:41,919 --> 00:06:46,419
what I have<font color="#E5E5E5"> already talked about so far</font>

166
00:06:43,530 --> 00:06:49,750
traffic<font color="#E5E5E5"> from a router in your network to</font>

167
00:06:46,419 --> 00:06:51,430
another router in there might be cases

168
00:06:49,750 --> 00:06:53,440
right it's very<font color="#E5E5E5"> interesting not only to</font>

169
00:06:51,430 --> 00:06:55,690
know where the traffic is coming into

170
00:06:53,440 --> 00:06:57,850
<font color="#CCCCCC">your network but also to which neighbor</font>

171
00:06:55,690 --> 00:06:59,860
<font color="#E5E5E5">it's exiting for example if you have bgp</font>

172
00:06:57,850 --> 00:07:02,050
bearings with multiple other providers

173
00:06:59,860 --> 00:07:04,120
or even peering multiple<font color="#CCCCCC"> periods</font><font color="#E5E5E5"> with</font>

174
00:07:02,050 --> 00:07:06,070
<font color="#CCCCCC">the same provider you might want</font><font color="#E5E5E5"> to know</font>

175
00:07:04,120 --> 00:07:08,260
that<font color="#CCCCCC"> your traffic is going</font><font color="#E5E5E5"> from your</font>

176
00:07:06,070 --> 00:07:11,830
excess router in<font color="#CCCCCC"> new york to a certain</font>

177
00:07:08,260 --> 00:07:15,430
beer in chicago the reason is if you're

178
00:07:11,830 --> 00:07:17,948
using this traffic matrix for failure

179
00:07:15,430 --> 00:07:20,229
simulations or rerouting in case of one

180
00:07:17,949 --> 00:07:21,550
of the appearance<font color="#E5E5E5"> goes down you do not</font>

181
00:07:20,229 --> 00:07:24,070
only need to know<font color="#E5E5E5"> where it exits the</font>

182
00:07:21,550 --> 00:07:25,630
network in a normal<font color="#E5E5E5"> case but if that</font>

183
00:07:24,070 --> 00:07:27,400
peering goes down you also want to<font color="#E5E5E5"> know</font>

184
00:07:25,630 --> 00:07:31,889
what<font color="#CCCCCC"> the auto peering is where it will</font>

185
00:07:27,400 --> 00:07:36,010
exit at that point<font color="#CCCCCC"> so visualizing that</font>

186
00:07:31,889 --> 00:07:39,220
you have your internal traffic matrix be

187
00:07:36,010 --> 00:07:40,810
in court recorder outer or if depending

188
00:07:39,220 --> 00:07:42,580
<font color="#CCCCCC">on the size of</font><font color="#E5E5E5"> your network and the type</font>

189
00:07:40,810 --> 00:07:46,690
of application for the<font color="#CCCCCC"> traffic matrix</font>

190
00:07:42,580 --> 00:07:49,810
and access to<font color="#E5E5E5"> exit router versus the</font>

191
00:07:46,690 --> 00:07:52,120
external matrix which tells you from

192
00:07:49,810 --> 00:07:57,000
which<font color="#E5E5E5"> access</font><font color="#CCCCCC"> route or which carotid</font>

193
00:07:52,120 --> 00:07:57,000
traffic exits to which neighboring<font color="#CCCCCC"> a s</font>

194
00:07:57,840 --> 00:08:03,070
then before we really know how we what

195
00:08:01,960 --> 00:08:04,810
we want to measure and what we want<font color="#CCCCCC"> to</font>

196
00:08:03,070 --> 00:08:06,820
<font color="#E5E5E5">do with</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> it's good to take a look at</font>

197
00:08:04,810 --> 00:08:12,370
an example of a traffic matrix from a

198
00:08:06,820 --> 00:08:14,650
large<font color="#E5E5E5"> Tier one provider this traffic</font>

199
00:08:12,370 --> 00:08:16,510
matrix which is<font color="#E5E5E5"> used here is from a big</font>

200
00:08:14,650 --> 00:08:19,349
t1 provider which is both network in the

201
00:08:16,510 --> 00:08:22,270
<font color="#E5E5E5">US and</font><font color="#CCCCCC"> Europe with an MPLS deployment</font>

202
00:08:19,349 --> 00:08:24,250
which can actually be used to measure

203
00:08:22,270 --> 00:08:25,780
the traffic matrix very easily<font color="#E5E5E5"> and that</font>

204
00:08:24,250 --> 00:08:28,720
<font color="#E5E5E5">one of the methods I'll come back to</font>

205
00:08:25,780 --> 00:08:30,159
later in<font color="#E5E5E5"> reference</font><font color="#CCCCCC"> 1 which is</font><font color="#E5E5E5"> on</font><font color="#CCCCCC"> the end</font>

206
00:08:28,720 --> 00:08:31,810
<font color="#E5E5E5">of the slides there's actually paper</font>

207
00:08:30,160 --> 00:08:34,270
with all the details about these

208
00:08:31,810 --> 00:08:35,589
measurements are not exactly show the

209
00:08:34,270 --> 00:08:39,250
reason I want<font color="#E5E5E5"> to use them here is</font>

210
00:08:35,589 --> 00:08:41,500
actually<font color="#E5E5E5"> to show you how the traffic</font>

211
00:08:39,250 --> 00:08:43,089
behaves in in the network the three

212
00:08:41,500 --> 00:08:46,600
things<font color="#E5E5E5"> we're going to look at the three</font>

213
00:08:43,089 --> 00:08:48,940
properties<font color="#CCCCCC"> of the traffic matrix are the</font>

214
00:08:46,600 --> 00:08:51,400
temporal distribution so if i look at my

215
00:08:48,940 --> 00:08:53,150
network over a day how<font color="#CCCCCC"> does the traffic</font>

216
00:08:51,400 --> 00:08:56,030
change in the network

217
00:08:53,150 --> 00:08:58,970
hour by hour during the day the other

218
00:08:56,030 --> 00:09:00,500
<font color="#E5E5E5">one</font><font color="#CCCCCC"> is the spatial distribution where we</font>

219
00:08:58,970 --> 00:09:02,210
are going to look<font color="#E5E5E5"> at where is the</font>

220
00:09:00,500 --> 00:09:04,010
traffic located in the network is it

221
00:09:02,210 --> 00:09:05,870
evenly distributed between all the sides

222
00:09:04,010 --> 00:09:08,630
is it concentrated between just a few

223
00:09:05,870 --> 00:09:10,460
sides the last one is the<font color="#E5E5E5"> relative</font>

224
00:09:08,630 --> 00:09:14,180
traffic distribution we all know that

225
00:09:10,460 --> 00:09:16,070
traffic is<font color="#E5E5E5"> not equal odds that you have</font>

226
00:09:14,180 --> 00:09:18,050
not the same amount<font color="#E5E5E5"> of traffic in your</font>

227
00:09:16,070 --> 00:09:19,610
network all over the day you have piqued

228
00:09:18,050 --> 00:09:24,319
our probably somewhere in the afternoon

229
00:09:19,610 --> 00:09:26,090
or so but this also the relative

230
00:09:24,320 --> 00:09:28,220
distribution<font color="#CCCCCC"> changed during</font><font color="#E5E5E5"> the day so</font>

231
00:09:26,090 --> 00:09:30,200
if the two biggest sites at nine o'clock

232
00:09:28,220 --> 00:09:33,290
are they<font color="#E5E5E5"> also the two biggest traffic</font>

233
00:09:30,200 --> 00:09:35,900
sites at three o'clock so these three

234
00:09:33,290 --> 00:09:40,880
<font color="#E5E5E5">things are</font><font color="#CCCCCC"> going to</font><font color="#E5E5E5"> look at here the</font>

235
00:09:35,900 --> 00:09:42,770
first one is the traffic over a day what

236
00:09:40,880 --> 00:09:44,990
we see<font color="#E5E5E5"> here is</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> aggregate traffic for</font>

237
00:09:42,770 --> 00:09:47,030
the whole network normal life so you

238
00:09:44,990 --> 00:09:50,810
don't see the actual<font color="#E5E5E5"> amount of traffic</font>

239
00:09:47,030 --> 00:09:53,300
you just see<font color="#E5E5E5"> a one where there is the</font>

240
00:09:50,810 --> 00:09:54,890
<font color="#E5E5E5">peak of the day and both for the</font>

241
00:09:53,300 --> 00:09:56,569
European<font color="#E5E5E5"> network and the American</font>

242
00:09:54,890 --> 00:09:59,240
network you see that the aggregate

243
00:09:56,570 --> 00:10:01,790
traffic actually it has a very<font color="#E5E5E5"> clear</font>

244
00:09:59,240 --> 00:10:03,710
peak but also that the peak extends over

245
00:10:01,790 --> 00:10:05,900
a few hours<font color="#E5E5E5"> so if we want</font><font color="#CCCCCC"> to</font>

246
00:10:03,710 --> 00:10:07,700
characterize this network and do our

247
00:10:05,900 --> 00:10:09,110
work with the traffic matrix like the

248
00:10:07,700 --> 00:10:11,300
capacity planning or the failure

249
00:10:09,110 --> 00:10:13,220
analysis we really want<font color="#CCCCCC"> to</font><font color="#E5E5E5"> make sure we</font>

250
00:10:11,300 --> 00:10:17,510
pick a traffic matrix which is<font color="#CCCCCC"> measured</font>

251
00:10:13,220 --> 00:10:19,520
inside this window obviously this is

252
00:10:17,510 --> 00:10:21,680
just<font color="#CCCCCC"> an example from one network and it</font>

253
00:10:19,520 --> 00:10:24,020
doesn't prove anything about networks in

254
00:10:21,680 --> 00:10:26,120
general but other networks we've known

255
00:10:24,020 --> 00:10:28,579
similar analysis on<font color="#CCCCCC"> earth have shown</font>

256
00:10:26,120 --> 00:10:30,440
that they also have an unstable period

257
00:10:28,580 --> 00:10:32,480
during<font color="#E5E5E5"> the day of course there might be</font>

258
00:10:30,440 --> 00:10:34,880
cases where it is not applicable but for

259
00:10:32,480 --> 00:10:37,070
large IP provide us with a lot<font color="#E5E5E5"> of</font>

260
00:10:34,880 --> 00:10:39,439
aggregated traffic this proves to be<font color="#E5E5E5"> a</font>

261
00:10:37,070 --> 00:10:41,120
<font color="#CCCCCC">very general property and it's very good</font>

262
00:10:39,440 --> 00:10:42,830
<font color="#E5E5E5">for us to know that actually but one</font>

263
00:10:41,120 --> 00:10:46,220
traffic matrix taken somewhere in this

264
00:10:42,830 --> 00:10:49,580
<font color="#E5E5E5">time frame we can do work which is very</font>

265
00:10:46,220 --> 00:10:51,380
<font color="#E5E5E5">representative for the</font><font color="#CCCCCC"> network then the</font>

266
00:10:49,580 --> 00:10:53,900
second one<font color="#E5E5E5"> was the spatial distribution</font>

267
00:10:51,380 --> 00:10:56,090
the distribution of traffic inside the

268
00:10:53,900 --> 00:10:58,340
network and again this is one typical

269
00:10:56,090 --> 00:11:01,610
<font color="#E5E5E5">network but it proves to be quite</font>

270
00:10:58,340 --> 00:11:03,230
general for larger p networks what it's

271
00:11:01,610 --> 00:11:08,330
trying to show<font color="#CCCCCC"> here</font><font color="#E5E5E5"> on these colored</font>

272
00:11:03,230 --> 00:11:10,070
pictures is by changing the color how

273
00:11:08,330 --> 00:11:13,100
much traffic there is between two sites

274
00:11:10,070 --> 00:11:14,810
in the network on the<font color="#E5E5E5"> left the European</font>

275
00:11:13,100 --> 00:11:19,070
<font color="#E5E5E5">Network you see the sides numbered from</font>

276
00:11:14,810 --> 00:11:21,229
1 to 12 on both sides and the color

277
00:11:19,070 --> 00:11:23,120
indicates the amount of traffic from

278
00:11:21,230 --> 00:11:24,800
going from blue which is<font color="#CCCCCC"> almost nothing</font>

279
00:11:23,120 --> 00:11:27,020
to yellow and red which<font color="#CCCCCC"> is a lot of</font>

280
00:11:24,800 --> 00:11:28,849
traffic what you actually see is that

281
00:11:27,020 --> 00:11:32,360
most traffic in the network is

282
00:11:28,850 --> 00:11:33,890
concentrated between a few<font color="#CCCCCC"> sites most of</font>

283
00:11:32,360 --> 00:11:34,940
the sites are just dark blue which means

284
00:11:33,890 --> 00:11:36,650
<font color="#CCCCCC">that there is very little traffic</font>

285
00:11:34,940 --> 00:11:39,200
between those sides if you look at the

286
00:11:36,650 --> 00:11:41,390
<font color="#E5E5E5">American</font><font color="#CCCCCC"> network with 25 sites you</font>

287
00:11:39,200 --> 00:11:44,390
actually<font color="#CCCCCC"> see the same thing most of the</font>

288
00:11:41,390 --> 00:11:46,870
traffic is just on or between a few

289
00:11:44,390 --> 00:11:51,560
sides I think there's also a very

290
00:11:46,870 --> 00:11:53,420
general principle again if you<font color="#E5E5E5"> have</font>

291
00:11:51,560 --> 00:11:54,770
smaller sites in your network where you

292
00:11:53,420 --> 00:11:56,329
just aggregate some customers that

293
00:11:54,770 --> 00:11:57,949
probably isn't a whole lot of<font color="#E5E5E5"> traffic</font>

294
00:11:56,330 --> 00:11:59,600
between<font color="#E5E5E5"> those small</font><font color="#CCCCCC"> signs there probably</font>

295
00:11:57,950 --> 00:12:01,430
is much more traffic from those small

296
00:11:59,600 --> 00:12:03,290
sites to the big sites where you<font color="#E5E5E5"> have</font>

297
00:12:01,430 --> 00:12:05,920
<font color="#CCCCCC">Bering and very</font><font color="#E5E5E5"> large customer</font>

298
00:12:03,290 --> 00:12:05,920
aggregation

299
00:12:09,810 --> 00:12:18,719
of total traffic entering in the<font color="#E5E5E5"> network</font>

300
00:12:13,080 --> 00:12:22,230
and this is what kind of authors refer

301
00:12:18,720 --> 00:12:24,000
to the 8020 prints 8020 principle and

302
00:12:22,230 --> 00:12:27,390
twenty percent of<font color="#E5E5E5"> your sites actually</font>

303
00:12:24,000 --> 00:12:30,029
carry eighty percent of<font color="#E5E5E5"> the traffic then</font>

304
00:12:27,390 --> 00:12:32,279
the last one is actually the most

305
00:12:30,029 --> 00:12:35,460
<font color="#E5E5E5">complex one is the spatial distribution</font>

306
00:12:32,279 --> 00:12:38,580
in<font color="#CCCCCC"> the network so how does the fan-out</font>

307
00:12:35,460 --> 00:12:40,800
change if I do not only<font color="#E5E5E5"> look at the</font>

308
00:12:38,580 --> 00:12:42,930
amount of traffic<font color="#E5E5E5"> a side sense to all</font>

309
00:12:40,800 --> 00:12:44,969
<font color="#E5E5E5">kinds of other sites but I look at the</font>

310
00:12:42,930 --> 00:12:47,219
percentage so for<font color="#E5E5E5"> example I look at one</font>

311
00:12:44,970 --> 00:12:49,529
side being New York and it sends five

312
00:12:47,220 --> 00:12:52,020
percent of its traffic to DC ten percent

313
00:12:49,529 --> 00:12:54,570
to Atlanta etc and I track these

314
00:12:52,020 --> 00:12:56,970
percentages during the day on the left

315
00:12:54,570 --> 00:12:59,250
<font color="#E5E5E5">you see the demands themselves the</font>

316
00:12:56,970 --> 00:13:03,270
traffic itself but we already had seen

317
00:12:59,250 --> 00:13:06,540
has a fairy has a clear peek over the

318
00:13:03,270 --> 00:13:09,600
day at certain time on the right you see

319
00:13:06,540 --> 00:13:12,209
the percentages so how much traffic is

320
00:13:09,600 --> 00:13:14,610
sending to another side and what clear

321
00:13:12,210 --> 00:13:16,740
over there is<font color="#CCCCCC"> that also the total amount</font>

322
00:13:14,610 --> 00:13:18,570
of traffic changes during the day the

323
00:13:16,740 --> 00:13:20,610
<font color="#CCCCCC">percentage of traffic is certain it's</font>

324
00:13:18,570 --> 00:13:23,430
sending to a certain side kind of stays

325
00:13:20,610 --> 00:13:24,750
the same and again I keep<font color="#CCCCCC"> repeating this</font>

326
00:13:23,430 --> 00:13:28,410
this is just the measurements from one

327
00:13:24,750 --> 00:13:31,110
network but<font color="#E5E5E5"> from the ones I've worked on</font>

328
00:13:28,410 --> 00:13:35,370
in my current job I've seen very similar

329
00:13:31,110 --> 00:13:38,610
things then the collection itself at

330
00:13:35,370 --> 00:13:41,370
some way we<font color="#E5E5E5"> need</font><font color="#CCCCCC"> to get</font><font color="#E5E5E5"> information from</font>

331
00:13:38,610 --> 00:13:44,070
the network<font color="#E5E5E5"> you often would do this</font>

332
00:13:41,370 --> 00:13:46,800
using SNMP at fixed intervals like 5 or

333
00:13:44,070 --> 00:13:48,750
15 minutes that seems<font color="#E5E5E5"> to</font><font color="#CCCCCC"> be a number</font>

334
00:13:46,800 --> 00:13:50,579
<font color="#E5E5E5">which is very reasonable in large</font>

335
00:13:48,750 --> 00:13:52,980
networks because it gives you a

336
00:13:50,580 --> 00:13:55,230
manageable amount of data and there is

337
00:13:52,980 --> 00:13:57,600
not<font color="#E5E5E5"> a whole lot of reason</font><font color="#CCCCCC"> to be more</font>

338
00:13:55,230 --> 00:13:59,670
granular than five minutes I mean events

339
00:13:57,600 --> 00:14:04,440
which happen inside the 5 or 15 minute

340
00:13:59,670 --> 00:14:06,719
window are so small and bursty that they

341
00:14:04,440 --> 00:14:09,330
do not really affect the planning of the

342
00:14:06,720 --> 00:14:11,580
network as a whole one issue that needs

343
00:14:09,330 --> 00:14:13,709
to be dealt<font color="#E5E5E5"> with is that the information</font>

344
00:14:11,580 --> 00:14:16,110
<font color="#E5E5E5">you get from the routers in most cases</font>

345
00:14:13,709 --> 00:14:18,599
actually bite<font color="#E5E5E5"> counters so they tell you</font>

346
00:14:16,110 --> 00:14:21,450
how<font color="#CCCCCC"> much traffic has been switched to a</font>

347
00:14:18,600 --> 00:14:22,700
certain interface or to a certain in net

348
00:14:21,450 --> 00:14:24,590
flow

349
00:14:22,700 --> 00:14:27,740
a<font color="#E5E5E5"> certain destination or something like</font>

350
00:14:24,590 --> 00:14:30,380
that so when<font color="#E5E5E5"> getting the data you will</font>

351
00:14:27,740 --> 00:14:31,910
have to convert those rates those white

352
00:14:30,380 --> 00:14:34,130
counters back to rates because what

353
00:14:31,910 --> 00:14:36,110
you're<font color="#E5E5E5"> interested in is the amount of</font>

354
00:14:34,130 --> 00:14:38,870
megabits the amount of bits per second

355
00:14:36,110 --> 00:14:41,780
between two points in the network or on

356
00:14:38,870 --> 00:14:43,160
an interface or something like that so

357
00:14:41,780 --> 00:14:45,949
the issues you need to deal with which

358
00:14:43,160 --> 00:14:47,719
our rollover of counters I mean the

359
00:14:45,950 --> 00:14:50,990
<font color="#CCCCCC">amount of bytes it can count is a</font><font color="#E5E5E5"> fixed</font>

360
00:14:47,720 --> 00:14:52,490
number being 30 bit or 64<font color="#E5E5E5"> bits if it</font>

361
00:14:50,990 --> 00:14:55,190
rolls over you need to make sure<font color="#E5E5E5"> that</font>

362
00:14:52,490 --> 00:14:57,560
you account for these effects then the

363
00:14:55,190 --> 00:15:01,400
<font color="#CCCCCC">question again what kind of traffic</font>

364
00:14:57,560 --> 00:15:04,219
matrix do we want to<font color="#E5E5E5"> look at the peak</font>

365
00:15:01,400 --> 00:15:06,110
our matrix which especially<font color="#CCCCCC"> in large</font>

366
00:15:04,220 --> 00:15:09,380
networks with a lot of<font color="#CCCCCC"> aggregate</font><font color="#E5E5E5"> traffic</font>

367
00:15:06,110 --> 00:15:14,510
makes a lot of sense for representing

368
00:15:09,380 --> 00:15:17,570
the typical network can be a five or a

369
00:15:14,510 --> 00:15:19,819
<font color="#CCCCCC">15-minute sample somewhere in that hour</font>

370
00:15:17,570 --> 00:15:23,780
which represents the peak of the network

371
00:15:19,820 --> 00:15:25,700
the other option is for to<font color="#E5E5E5"> look over the</font>

372
00:15:23,780 --> 00:15:28,339
whole day and actually<font color="#E5E5E5"> calculate the</font>

373
00:15:25,700 --> 00:15:30,470
peak<font color="#E5E5E5"> purdy months or per entry in the</font>

374
00:15:28,340 --> 00:15:35,570
traffic matrix or so use something like

375
00:15:30,470 --> 00:15:37,040
a 95 percentile so now we get to the

376
00:15:35,570 --> 00:15:39,980
actual collection methods which is the

377
00:15:37,040 --> 00:15:43,130
main topic of the talk the most<font color="#E5E5E5"> obvious</font>

378
00:15:39,980 --> 00:15:44,780
one is net flow I mean that's<font color="#E5E5E5"> something</font>

379
00:15:43,130 --> 00:15:46,610
<font color="#E5E5E5">which i think is quite widely deployed</font>

380
00:15:44,780 --> 00:15:49,730
or at least widely understood by people

381
00:15:46,610 --> 00:15:52,160
on how to use<font color="#E5E5E5"> it but it's actually not</font>

382
00:15:49,730 --> 00:15:56,030
so trivial how you convert the NetFlow

383
00:15:52,160 --> 00:15:59,260
data to<font color="#E5E5E5"> the traffic matrix</font><font color="#CCCCCC"> dcu and bgp</font>

384
00:15:56,030 --> 00:16:01,550
policy accounting are related methods

385
00:15:59,260 --> 00:16:03,650
but have their limitations which<font color="#CCCCCC"> I will</font>

386
00:16:01,550 --> 00:16:07,880
talk about then we get mpls and

387
00:16:03,650 --> 00:16:11,750
estimation as I told<font color="#CCCCCC"> you before starting</font>

388
00:16:07,880 --> 00:16:13,610
with net flow very brief overview of<font color="#E5E5E5"> how</font>

389
00:16:11,750 --> 00:16:15,410
net flow works this is definitely<font color="#CCCCCC"> not an</font>

390
00:16:13,610 --> 00:16:18,110
<font color="#CCCCCC">escrow tutorial so</font><font color="#E5E5E5"> I'm not going</font><font color="#CCCCCC"> to go</font>

391
00:16:15,410 --> 00:16:20,120
into<font color="#E5E5E5"> all the specifics that really would</font>

392
00:16:18,110 --> 00:16:21,820
be a one on half hour talking itself and

393
00:16:20,120 --> 00:16:25,760
I don't want to<font color="#E5E5E5"> get</font><font color="#CCCCCC"> started with that</font><font color="#E5E5E5"> a</font>

394
00:16:21,820 --> 00:16:28,700
flow in<font color="#CCCCCC"> net flow terminology is defined</font>

395
00:16:25,760 --> 00:16:31,310
by<font color="#E5E5E5"> a source address destination address</font>

396
00:16:28,700 --> 00:16:34,430
and several attributes of the flow of

397
00:16:31,310 --> 00:16:36,030
the<font color="#E5E5E5"> dye pee stream being the port which</font>

398
00:16:34,430 --> 00:16:37,620
is the protocol being used

399
00:16:36,030 --> 00:16:41,970
the<font color="#E5E5E5"> destination source and destination</font>

400
00:16:37,620 --> 00:16:45,930
port the protocol type type of service

401
00:16:41,970 --> 00:16:47,810
and also<font color="#E5E5E5"> the index of the interface</font>

402
00:16:45,930 --> 00:16:51,510
where the traffic actually came in<font color="#E5E5E5"> from</font>

403
00:16:47,810 --> 00:16:53,579
the routers keep track of these flows in

404
00:16:51,510 --> 00:16:56,310
a very large tables<font color="#CCCCCC"> for every packet</font>

405
00:16:53,580 --> 00:16:58,770
they switch they look at the destination

406
00:16:56,310 --> 00:17:01,469
and all these other attributes<font color="#E5E5E5"> edit to</font>

407
00:16:58,770 --> 00:17:03,900
the right entry and you get<font color="#E5E5E5"> per flow</font>

408
00:17:01,470 --> 00:17:08,310
information stored somewhere in your

409
00:17:03,900 --> 00:17:10,379
router net flow seems to have gone

410
00:17:08,310 --> 00:17:13,619
through all kinds of iterations of new

411
00:17:10,380 --> 00:17:16,530
versions and what currently here is a

412
00:17:13,619 --> 00:17:19,709
whole mix of different<font color="#E5E5E5"> versions with</font>

413
00:17:16,530 --> 00:17:21,450
different feature supported first<font color="#CCCCCC"> and</font>

414
00:17:19,710 --> 00:17:24,600
five the<font color="#CCCCCC"> most complete first is actually</font>

415
00:17:21,450 --> 00:17:26,250
what<font color="#E5E5E5"> I think in most cases</font><font color="#CCCCCC"> is what being</font>

416
00:17:24,599 --> 00:17:30,570
referred to<font color="#CCCCCC"> when people talk about net</font>

417
00:17:26,250 --> 00:17:31,860
flow version 7 is something which sits

418
00:17:30,570 --> 00:17:34,080
on the switches which is something I'm

419
00:17:31,860 --> 00:17:36,540
not going to talk<font color="#E5E5E5"> about today version 8</font>

420
00:17:34,080 --> 00:17:38,730
and version 9 are newer and actually do

421
00:17:36,540 --> 00:17:42,409
some aggregation and have more flexible

422
00:17:38,730 --> 00:17:45,210
data formats net flow is supported by

423
00:17:42,410 --> 00:17:47,490
several vendors obviously cisco and

424
00:17:45,210 --> 00:17:50,220
juniper and<font color="#CCCCCC"> i think every serious</font>

425
00:17:47,490 --> 00:17:53,580
relative vendor support some form of of

426
00:17:50,220 --> 00:17:56,010
net flow information so the router

427
00:17:53,580 --> 00:17:58,320
collecting all these<font color="#E5E5E5"> others flow</font>

428
00:17:56,010 --> 00:18:01,200
information and at some point it has to

429
00:17:58,320 --> 00:18:05,610
send this to a central system to

430
00:18:01,200 --> 00:18:07,740
actually process so either the flow

431
00:18:05,610 --> 00:18:10,830
expires maybe because it's a TCP session

432
00:18:07,740 --> 00:18:12,600
which which is<font color="#E5E5E5"> ended or the cache itself</font>

433
00:18:10,830 --> 00:18:14,310
is full there is an unlimited amount<font color="#E5E5E5"> of</font>

434
00:18:12,600 --> 00:18:17,100
data which<font color="#E5E5E5"> can be stored in the counter</font>

435
00:18:14,310 --> 00:18:18,960
in in the router or simply because it

436
00:18:17,100 --> 00:18:21,120
had not not seen package for a long time

437
00:18:18,960 --> 00:18:23,640
<font color="#CCCCCC">and it will simply timeout at that</font>

438
00:18:21,120 --> 00:18:26,459
moment the<font color="#E5E5E5"> router will take that / flow</font>

439
00:18:23,640 --> 00:18:29,130
information in an aggregated form send

440
00:18:26,460 --> 00:18:31,380
it using UDP to a central collector

441
00:18:29,130 --> 00:18:34,730
somewhere in the network it<font color="#CCCCCC"> will include</font>

442
00:18:31,380 --> 00:18:37,920
<font color="#E5E5E5">a</font><font color="#CCCCCC"> time stamp on minute has been exported</font>

443
00:18:34,730 --> 00:18:39,510
UDP is used for simplicity but also to

444
00:18:37,920 --> 00:18:41,250
make<font color="#E5E5E5"> sure that if</font><font color="#CCCCCC"> there are issues in</font>

445
00:18:39,510 --> 00:18:43,770
the network and<font color="#CCCCCC"> you're actually not</font>

446
00:18:41,250 --> 00:18:45,450
going<font color="#E5E5E5"> to back up data so if something</font>

447
00:18:43,770 --> 00:18:47,160
goes wrong<font color="#E5E5E5"> and a packet is lost and it's</font>

448
00:18:45,450 --> 00:18:50,150
just gone it's not going to try to

449
00:18:47,160 --> 00:18:53,360
retransmit and create all kinds of

450
00:18:50,150 --> 00:18:56,460
also you can export extra information

451
00:18:53,360 --> 00:19:05,179
with the flow to the collector like a s

452
00:18:56,460 --> 00:19:08,250
based source destination is a picture<font color="#E5E5E5"> on</font>

453
00:19:05,180 --> 00:19:10,890
<font color="#CCCCCC">how</font><font color="#E5E5E5"> this looks like in</font><font color="#CCCCCC"> a router you have</font>

454
00:19:08,250 --> 00:19:13,230
to net flow cash keeping track of all

455
00:19:10,890 --> 00:19:16,050
the flow switch on a large link in a

456
00:19:13,230 --> 00:19:19,860
backbone network is really a huge amount

457
00:19:16,050 --> 00:19:23,070
of<font color="#CCCCCC"> Laos then at certain time being in</font>

458
00:19:19,860 --> 00:19:27,510
timer expiry or the flow expires<font color="#CCCCCC"> its</font>

459
00:19:23,070 --> 00:19:30,360
exported using UDP to the collector so

460
00:19:27,510 --> 00:19:32,160
now the the<font color="#E5E5E5"> key question how do we build</font>

461
00:19:30,360 --> 00:19:35,280
the traffic matrix<font color="#E5E5E5"> from this net flow of</font>

462
00:19:32,160 --> 00:19:37,860
information the first thing<font color="#CCCCCC"> is we need</font>

463
00:19:35,280 --> 00:19:40,560
<font color="#E5E5E5">to have net flow from all the routers</font>

464
00:19:37,860 --> 00:19:42,270
which are relevant I mean every packet

465
00:19:40,560 --> 00:19:44,370
which comes<font color="#E5E5E5"> into the network every flow</font>

466
00:19:42,270 --> 00:19:45,750
should be captured somewhere so<font color="#CCCCCC"> we</font>

467
00:19:44,370 --> 00:19:48,149
<font color="#E5E5E5">should make sure that the whole edge of</font>

468
00:19:45,750 --> 00:19:50,250
our<font color="#CCCCCC"> network or the edge of the core</font>

469
00:19:48,150 --> 00:19:52,620
being all the interfaces on the core

470
00:19:50,250 --> 00:19:55,260
<font color="#CCCCCC">routers which which interface to the</font>

471
00:19:52,620 --> 00:19:57,570
<font color="#CCCCCC">edge routers have net flow enabled and</font>

472
00:19:55,260 --> 00:20:01,800
<font color="#CCCCCC">exported to a</font><font color="#E5E5E5"> collector somewhere in the</font>

473
00:19:57,570 --> 00:20:05,879
network then<font color="#E5E5E5"> the question is how do we</font>

474
00:20:01,800 --> 00:20:07,919
find that the traffic matrix and three

475
00:20:05,880 --> 00:20:10,560
from<font color="#CCCCCC"> this flow information remember the</font>

476
00:20:07,920 --> 00:20:12,660
net flow record itself as a source

477
00:20:10,560 --> 00:20:15,899
address and add a destination address

478
00:20:12,660 --> 00:20:18,090
<font color="#CCCCCC">and which really is the source and</font><font color="#E5E5E5"> the</font>

479
00:20:15,900 --> 00:20:22,080
<font color="#E5E5E5">destination of the IP packet so it's a</font>

480
00:20:18,090 --> 00:20:25,560
PC<font color="#E5E5E5"> somewhere doing</font><font color="#CCCCCC"> a rep request going</font>

481
00:20:22,080 --> 00:20:27,179
to a web<font color="#CCCCCC"> server so very likely both of</font>

482
00:20:25,560 --> 00:20:29,700
these addresses are outside of<font color="#E5E5E5"> your own</font>

483
00:20:27,180 --> 00:20:32,580
network or at least one of<font color="#E5E5E5"> them is so</font>

484
00:20:29,700 --> 00:20:36,150
how do we find where this traffic enters

485
00:20:32,580 --> 00:20:38,790
the network and exits the network very

486
00:20:36,150 --> 00:20:41,700
simple methods but also probably very

487
00:20:38,790 --> 00:20:43,170
not applicable to<font color="#E5E5E5"> a large networks is</font>

488
00:20:41,700 --> 00:20:45,900
doing it statically make a list of

489
00:20:43,170 --> 00:20:48,600
addresses associate them with routers

490
00:20:45,900 --> 00:20:50,880
where they originate or terminate and if

491
00:20:48,600 --> 00:20:52,740
you see a flow use a static table to map

492
00:20:50,880 --> 00:20:54,930
it to<font color="#CCCCCC"> the ingress and egress router in</font>

493
00:20:52,740 --> 00:20:57,140
your network again this probably doesn't

494
00:20:54,930 --> 00:21:00,750
make much sense for for large networks

495
00:20:57,140 --> 00:21:03,059
so most commonly used is<font color="#E5E5E5"> BGP information</font>

496
00:21:00,750 --> 00:21:05,249
especially for traffic

497
00:21:03,059 --> 00:21:08,580
which goes to your<font color="#CCCCCC"> pairings or</font><font color="#E5E5E5"> goes to</font>

498
00:21:05,249 --> 00:21:10,440
<font color="#CCCCCC">bgp customers it's very</font><font color="#E5E5E5"> easy to export</font>

499
00:21:08,580 --> 00:21:12,449
the<font color="#CCCCCC"> aes number in the net flow of</font>

500
00:21:10,440 --> 00:21:14,730
information use the<font color="#E5E5E5"> aes number to</font>

501
00:21:12,450 --> 00:21:18,240
actually find the router which peers

502
00:21:14,730 --> 00:21:20,100
with<font color="#E5E5E5"> the network where the packet is</font>

503
00:21:18,240 --> 00:21:24,480
going to and that tells you where the

504
00:21:20,100 --> 00:21:25,860
exit is in your network one of the

505
00:21:24,480 --> 00:21:28,789
<font color="#E5E5E5">things you could do and that's actually</font>

506
00:21:25,860 --> 00:21:31,590
go in detail but<font color="#E5E5E5"> on other slides is</font>

507
00:21:28,789 --> 00:21:33,210
using a live<font color="#E5E5E5"> BGP feet instead of having</font>

508
00:21:31,590 --> 00:21:35,879
the router figure out to be p

509
00:21:33,210 --> 00:21:38,039
information<font color="#CCCCCC"> let the routers just export</font>

510
00:21:35,879 --> 00:21:40,830
the net flow information have to collect

511
00:21:38,039 --> 00:21:43,590
or also collect PHP information<font color="#E5E5E5"> actually</font>

512
00:21:40,830 --> 00:21:46,289
make the calculations there it still is

513
00:21:43,590 --> 00:21:49,110
an issue remaining about the non bgp

514
00:21:46,289 --> 00:21:51,840
traffic if you have a large deployment

515
00:21:49,110 --> 00:21:54,059
of dsl customers or just any customer

516
00:21:51,840 --> 00:21:57,899
internal in your own address space the

517
00:21:54,059 --> 00:22:00,210
most likely don't use<font color="#CCCCCC"> bgp but are</font>

518
00:21:57,899 --> 00:22:02,549
somewhere sitting in the HP writing

519
00:22:00,210 --> 00:22:06,629
table then in<font color="#E5E5E5"> that case you don't get</font>

520
00:22:02,549 --> 00:22:08,789
any<font color="#CCCCCC"> of the AS information from BGP one</font>

521
00:22:06,629 --> 00:22:11,248
commonly used method and that will be

522
00:22:08,789 --> 00:22:13,499
also in<font color="#E5E5E5"> the case study and is to</font>

523
00:22:11,249 --> 00:22:15,720
actually inject these<font color="#CCCCCC"> IGP routes into</font>

524
00:22:13,499 --> 00:22:18,389
your<font color="#E5E5E5"> BGP you might not actually use them</font>

525
00:22:15,720 --> 00:22:20,399
in PHP so you might give them a<font color="#E5E5E5"> very low</font>

526
00:22:18,389 --> 00:22:21,748
local preference or<font color="#CCCCCC"> wait or anything</font>

527
00:22:20,399 --> 00:22:23,820
just to make sure that bitch p doesn't

528
00:22:21,749 --> 00:22:25,169
use them but you could put extra

529
00:22:23,820 --> 00:22:27,119
information in that you could put a

530
00:22:25,169 --> 00:22:30,119
community label on them telling you

531
00:22:27,119 --> 00:22:31,678
where this route came from what was the

532
00:22:30,119 --> 00:22:36,959
ingress of this route or what was the

533
00:22:31,679 --> 00:22:38,970
egress of this<font color="#E5E5E5"> rat so</font><font color="#CCCCCC"> what I just</font>

534
00:22:36,960 --> 00:22:40,529
<font color="#E5E5E5">mentioned</font><font color="#CCCCCC"> the passive beer on the</font>

535
00:22:38,970 --> 00:22:42,330
collector so instead of<font color="#CCCCCC"> having a router</font>

536
00:22:40,529 --> 00:22:44,249
doing the<font color="#E5E5E5"> BGP lookups which might</font><font color="#CCCCCC"> be</font>

537
00:22:42,330 --> 00:22:48,418
very intensive for the<font color="#E5E5E5"> CPU actually have</font>

538
00:22:44,249 --> 00:22:50,279
to collect her to the<font color="#E5E5E5"> BGP lookups in</font>

539
00:22:48,419 --> 00:22:53,220
that case<font color="#CCCCCC"> the net flow is just exported</font>

540
00:22:50,279 --> 00:22:58,860
as default version 5 without<font color="#E5E5E5"> any</font><font color="#CCCCCC"> AS</font>

541
00:22:53,220 --> 00:23:01,470
information on the bgp collector when a

542
00:22:58,860 --> 00:23:03,449
packet comes in from our flow record

543
00:23:01,470 --> 00:23:05,129
comes in from from that flow you will

544
00:23:03,450 --> 00:23:07,019
<font color="#CCCCCC">actually look in the</font><font color="#E5E5E5"> BGP table to both</font>

545
00:23:05,129 --> 00:23:09,840
the source and the<font color="#CCCCCC"> destination address</font>

546
00:23:07,019 --> 00:23:12,210
see how it matches with<font color="#CCCCCC"> BGP that way you</font>

547
00:23:09,840 --> 00:23:14,789
will get either the<font color="#CCCCCC"> a s numbers from</font>

548
00:23:12,210 --> 00:23:16,770
ingress and egress router but appearing

549
00:23:14,789 --> 00:23:18,720
czar or you

550
00:23:16,770 --> 00:23:21,900
add extra information like a<font color="#E5E5E5"> community</font>

551
00:23:18,720 --> 00:23:23,550
you've put on<font color="#E5E5E5"> it yourself the advantages</font>

552
00:23:21,900 --> 00:23:25,260
of this is that<font color="#CCCCCC"> it probably has a better</font>

553
00:23:23,550 --> 00:23:27,210
performance or there's less risk of

554
00:23:25,260 --> 00:23:30,290
<font color="#E5E5E5">deploying this on your</font><font color="#CCCCCC"> routers and</font>

555
00:23:27,210 --> 00:23:32,250
getting them<font color="#E5E5E5"> swamp we do BGP lookups and</font>

556
00:23:30,290 --> 00:23:34,320
also it gives you a<font color="#CCCCCC"> little bit more</font>

557
00:23:32,250 --> 00:23:36,780
flexibility because you can put more

558
00:23:34,320 --> 00:23:40,169
<font color="#E5E5E5">things in the BGP or you can actually</font>

559
00:23:36,780 --> 00:23:45,210
<font color="#CCCCCC">get more attributes as part of your</font>

560
00:23:40,170 --> 00:23:48,080
traffic matrix however correlating your

561
00:23:45,210 --> 00:23:50,850
net flow records with BGP has won a very

562
00:23:48,080 --> 00:23:54,899
tricky<font color="#E5E5E5"> problem which you need to take</font>

563
00:23:50,850 --> 00:23:57,840
<font color="#E5E5E5">care of looking at the BGP table for a</font>

564
00:23:54,900 --> 00:23:59,340
certain address source address and

565
00:23:57,840 --> 00:24:02,399
destination address in<font color="#CCCCCC"> your net flow</font>

566
00:23:59,340 --> 00:24:06,389
record will give you the source is or

567
00:24:02,400 --> 00:24:07,980
the destination is that's not really the

568
00:24:06,390 --> 00:24:09,540
information you want the one to have

569
00:24:07,980 --> 00:24:11,670
what you<font color="#E5E5E5"> want to know is what your</font>

570
00:24:09,540 --> 00:24:13,649
neighbor a esas you don't really care

571
00:24:11,670 --> 00:24:15,750
where it's going multiple hops in the

572
00:24:13,650 --> 00:24:17,760
internet you care where as exiting<font color="#CCCCCC"> your</font>

573
00:24:15,750 --> 00:24:20,130
networks or where your neighbor is now

574
00:24:17,760 --> 00:24:24,060
if we look<font color="#E5E5E5"> at this</font><font color="#CCCCCC"> example here we have</font>

575
00:24:20,130 --> 00:24:26,040
<font color="#E5E5E5">traffic going from a as 12 a is for so</font>

576
00:24:24,060 --> 00:24:29,280
the source address<font color="#E5E5E5"> it's in a is</font><font color="#CCCCCC"> 1</font><font color="#E5E5E5"> the</font>

577
00:24:26,040 --> 00:24:32,280
destination address<font color="#CCCCCC"> sits in a s for the</font>

578
00:24:29,280 --> 00:24:33,990
a the S which is doing the net flow of

579
00:24:32,280 --> 00:24:37,590
export or building the traffic matrix is

580
00:24:33,990 --> 00:24:40,140
<font color="#E5E5E5">a s3 but there might be a symmetrical</font>

581
00:24:37,590 --> 00:24:42,110
routing suppose that routing actually

582
00:24:40,140 --> 00:24:45,150
takes<font color="#CCCCCC"> place as the red arrows are</font>

583
00:24:42,110 --> 00:24:49,020
indicating so a is one is sending its

584
00:24:45,150 --> 00:24:51,600
traffic towards a s4 via as2 as3 but the

585
00:24:49,020 --> 00:24:55,470
reverse path is actually a as for going

586
00:24:51,600 --> 00:24:57,959
to as3 but then over<font color="#CCCCCC"> a s5 back to a is</font>

587
00:24:55,470 --> 00:24:59,340
one why this is the case it might be

588
00:24:57,960 --> 00:25:02,220
have all kinds<font color="#CCCCCC"> of reasons just how the</font>

589
00:24:59,340 --> 00:25:05,970
policy in BGP is configured the problem

590
00:25:02,220 --> 00:25:07,980
here<font color="#E5E5E5"> is a s3 thinks that all the traffic</font>

591
00:25:05,970 --> 00:25:09,930
or actually it<font color="#E5E5E5"> knows that all the</font>

592
00:25:07,980 --> 00:25:12,270
traffic towards a is one goes to a is

593
00:25:09,930 --> 00:25:14,970
<font color="#CCCCCC">five which is correct it also</font><font color="#E5E5E5"> assumes</font>

594
00:25:12,270 --> 00:25:17,129
now that traffic coming coming from a as

595
00:25:14,970 --> 00:25:19,710
well<font color="#E5E5E5"> also came from a is 5 which is</font>

596
00:25:17,130 --> 00:25:22,500
incorrect so from its own BGP table it

597
00:25:19,710 --> 00:25:25,110
can<font color="#E5E5E5"> only know where it's sending traffic</font>

598
00:25:22,500 --> 00:25:27,630
it will<font color="#E5E5E5"> not know where traffic came from</font>

599
00:25:25,110 --> 00:25:30,269
so as soon<font color="#E5E5E5"> as there is any s traumatic</font>

600
00:25:27,630 --> 00:25:32,879
routing which<font color="#E5E5E5"> I think happens a lot in</font>

601
00:25:30,269 --> 00:25:36,239
in these kind of policy routing

602
00:25:32,879 --> 00:25:38,158
scenarios<font color="#CCCCCC"> your</font><font color="#E5E5E5"> btp information is not</font>

603
00:25:36,239 --> 00:25:41,279
accurate anymore and you might actually

604
00:25:38,159 --> 00:25:43,799
associate your source<font color="#E5E5E5"> addresses with the</font>

605
00:25:41,279 --> 00:25:45,690
wrong<font color="#E5E5E5"> a s in this case what would have</font>

606
00:25:43,799 --> 00:25:47,429
happened is the destination would have

607
00:25:45,690 --> 00:25:49,830
been a is for which is<font color="#E5E5E5"> correct the</font>

608
00:25:47,429 --> 00:25:51,359
source or did so the destination

609
00:25:49,830 --> 00:25:54,658
neighborhood have been a is for which is

610
00:25:51,359 --> 00:25:57,208
<font color="#E5E5E5">correct the source neighbor would have</font>

611
00:25:54,659 --> 00:26:00,739
been a<font color="#E5E5E5"> as five and that one is incorrect</font>

612
00:25:57,209 --> 00:26:00,739
because it came actually from a<font color="#E5E5E5"> history</font>

613
00:26:00,979 --> 00:26:13,769
going<font color="#E5E5E5"> to some to some of the newer</font>

614
00:26:03,509 --> 00:26:15,539
versions first in eight at router based

615
00:26:13,769 --> 00:26:18,419
aggregation which is a really<font color="#CCCCCC"> good ID</font>

616
00:26:15,539 --> 00:26:22,169
because in the end were only interested

617
00:26:18,419 --> 00:26:23,609
in a very small amount<font color="#E5E5E5"> of data we just</font>

618
00:26:22,169 --> 00:26:25,909
want to<font color="#E5E5E5"> know where traffic enters and</font>

619
00:26:23,609 --> 00:26:28,678
exits our network as an aggregate

620
00:26:25,909 --> 00:26:31,109
exporting this huge amount of net flow

621
00:26:28,679 --> 00:26:32,940
information / flow to<font color="#E5E5E5"> a collector to</font>

622
00:26:31,109 --> 00:26:36,239
then just aggregate seems like a<font color="#E5E5E5"> waste</font>

623
00:26:32,940 --> 00:26:39,509
of resources so in version<font color="#CCCCCC"> 8 you</font><font color="#E5E5E5"> can</font>

624
00:26:36,239 --> 00:26:42,389
actually do the aggregation on the

625
00:26:39,509 --> 00:26:44,639
router itself so instead<font color="#CCCCCC"> of adding the</font>

626
00:26:42,389 --> 00:26:47,279
bytes counter so the bites it switches

627
00:26:44,639 --> 00:26:51,029
to the entries per flow you just create

628
00:26:47,279 --> 00:26:54,719
and traffic matrix inside the router

629
00:26:51,029 --> 00:26:57,690
which makes it much<font color="#CCCCCC"> easier to deploy and</font>

630
00:26:54,719 --> 00:26:59,789
also has less bandwidth and processing

631
00:26:57,690 --> 00:27:02,159
constraints it still requires the

632
00:26:59,789 --> 00:27:04,769
version 5 cash so it's kind of an add-on

633
00:27:02,159 --> 00:27:11,009
<font color="#CCCCCC">to the existing system but the export is</font>

634
00:27:04,769 --> 00:27:12,959
much simpler so in a graphical way you

635
00:27:11,009 --> 00:27:15,809
still have the normal<font color="#CCCCCC"> netflow cash where</font>

636
00:27:12,959 --> 00:27:18,450
it keeps track<font color="#E5E5E5"> of all the flows but then</font>

637
00:27:15,809 --> 00:27:20,759
if a flow expires it doesn't send it to

638
00:27:18,450 --> 00:27:22,139
a collector system it keeps it in the

639
00:27:20,759 --> 00:27:25,169
<font color="#E5E5E5">router and actually just a collection</font>

640
00:27:22,139 --> 00:27:28,019
over there based on the aggregation

641
00:27:25,169 --> 00:27:31,469
criteria you<font color="#CCCCCC"> have specified being /</font>

642
00:27:28,019 --> 00:27:34,919
prefix / a s or whatever else you want

643
00:27:31,469 --> 00:27:37,169
<font color="#E5E5E5">to base your matrix on it just collects</font>

644
00:27:34,919 --> 00:27:40,769
the information internally then at some

645
00:27:37,169 --> 00:27:41,999
point sends it to a collector on 5 15

646
00:27:40,769 --> 00:27:44,269
minute basis whatever you want to

647
00:27:41,999 --> 00:27:44,269
configure

648
00:27:45,450 --> 00:27:51,970
another addition to this is I<font color="#E5E5E5"> think it's</font>

649
00:27:50,020 --> 00:27:54,360
cisco specific with them not hundred

650
00:27:51,970 --> 00:27:57,960
percent sure about<font color="#E5E5E5"> that is bgp next top</font>

651
00:27:54,360 --> 00:28:00,909
aggregation where it's<font color="#E5E5E5"> actually going to</font>

652
00:27:57,960 --> 00:28:02,950
as one of these criteria so if i go<font color="#CCCCCC"> one</font>

653
00:28:00,910 --> 00:28:04,780
slide back at the bottom there you see

654
00:28:02,950 --> 00:28:07,690
that the aggregation cash being<font color="#CCCCCC"> aah</font>

655
00:28:04,780 --> 00:28:10,600
<font color="#CCCCCC">matrix or or prefix matrix that also</font>

656
00:28:07,690 --> 00:28:11,980
will be<font color="#E5E5E5"> in next</font><font color="#CCCCCC"> top matrix that one is</font>

657
00:28:10,600 --> 00:28:13,719
quite useful because what you're really

658
00:28:11,980 --> 00:28:16,330
interested in is where and the packet

659
00:28:13,720 --> 00:28:18,340
comes into the network where the<font color="#CCCCCC"> next</font>

660
00:28:16,330 --> 00:28:23,379
<font color="#E5E5E5">hop of the packet will be at the</font><font color="#CCCCCC"> BGP</font>

661
00:28:18,340 --> 00:28:26,620
next up being the exit router if I<font color="#E5E5E5"> show</font>

662
00:28:23,380 --> 00:28:29,830
<font color="#E5E5E5">that in a graphical picture the traffic</font>

663
00:28:26,620 --> 00:28:31,389
your net flow will be enabled on the

664
00:28:29,830 --> 00:28:33,250
interfaces on the outside<font color="#CCCCCC"> of your</font>

665
00:28:31,390 --> 00:28:36,130
network on your<font color="#CCCCCC"> customer or</font><font color="#E5E5E5"> bearing</font>

666
00:28:33,250 --> 00:28:39,040
interfaces and when the traffic comes in

667
00:28:36,130 --> 00:28:41,020
the<font color="#E5E5E5"> BGP next hop is used as an</font>

668
00:28:39,040 --> 00:28:43,330
aggregator for the<font color="#E5E5E5"> net flow cash which</font>

669
00:28:41,020 --> 00:28:45,190
will tell you on which access router or

670
00:28:43,330 --> 00:28:50,320
peering route of<font color="#CCCCCC"> the traffic</font><font color="#E5E5E5"> is exiting</font>

671
00:28:45,190 --> 00:28:52,900
the network so there still is the issue

672
00:28:50,320 --> 00:28:55,480
about IP routing which I come<font color="#E5E5E5"> back</font><font color="#CCCCCC"> to in</font>

673
00:28:52,900 --> 00:28:57,700
the in the summary because for your

674
00:28:55,480 --> 00:29:00,300
numba to beat traffic the next stop

675
00:28:57,700 --> 00:29:04,600
actually doesn't give you information

676
00:29:00,300 --> 00:29:07,840
another edition is mpls aware net flow

677
00:29:04,600 --> 00:29:11,169
if you have an MPLS Network you already

678
00:29:07,840 --> 00:29:14,290
<font color="#E5E5E5">have parts set up being explicit rsvp-te</font>

679
00:29:11,170 --> 00:29:16,690
parts or just<font color="#CCCCCC"> ldp forwarding from equal</font>

680
00:29:14,290 --> 00:29:19,570
ingress routers to egress rattles so if

681
00:29:16,690 --> 00:29:21,640
net flow is aware of those parts it

682
00:29:19,570 --> 00:29:24,370
actually will already know where traffic

683
00:29:21,640 --> 00:29:29,650
at a certain ingress point is egressing

684
00:29:24,370 --> 00:29:31,830
the network this should have been a

685
00:29:29,650 --> 00:29:36,010
<font color="#E5E5E5">picture here as well on how that works</font>

686
00:29:31,830 --> 00:29:38,379
so I mean I cannot cover all the details

687
00:29:36,010 --> 00:29:39,879
of net flow and this this I mean<font color="#E5E5E5"> there's</font>

688
00:29:38,380 --> 00:29:42,250
much more to tell about it<font color="#CCCCCC"> I just want</font>

689
00:29:39,880 --> 00:29:43,990
<font color="#E5E5E5">to indicate what the key issues are with</font>

690
00:29:42,250 --> 00:29:45,820
net flow for building your your traffic

691
00:29:43,990 --> 00:29:47,320
matrix so it's not<font color="#CCCCCC"> a trivial thing</font>

692
00:29:45,820 --> 00:29:49,389
because<font color="#CCCCCC"> netflow gives you sure its</font>

693
00:29:47,320 --> 00:29:51,189
destination of the end-to-end flow while

694
00:29:49,390 --> 00:29:53,800
you're only interested in<font color="#E5E5E5"> the flows</font>

695
00:29:51,190 --> 00:29:55,929
inside your network using<font color="#E5E5E5"> beach be you</font>

696
00:29:53,800 --> 00:29:59,279
have<font color="#E5E5E5"> to issue with astrometric routing</font>

697
00:29:55,929 --> 00:30:01,240
which is<font color="#E5E5E5"> hard to get</font><font color="#CCCCCC"> around the new</font>

698
00:29:59,279 --> 00:30:03,970
aggregation schemes like to be to be

699
00:30:01,240 --> 00:30:05,950
<font color="#CCCCCC">next up aggregation</font><font color="#E5E5E5"> are really good</font>

700
00:30:03,970 --> 00:30:08,379
steps forward because it comes<font color="#E5E5E5"> very</font>

701
00:30:05,950 --> 00:30:09,700
close to just directly measuring traffic

702
00:30:08,379 --> 00:30:10,869
matrix and that's what you want you

703
00:30:09,700 --> 00:30:12,549
don't want<font color="#E5E5E5"> to</font><font color="#CCCCCC"> process things you just</font>

704
00:30:10,869 --> 00:30:16,389
want to measure it<font color="#E5E5E5"> and get it from from</font>

705
00:30:12,549 --> 00:30:19,570
the<font color="#E5E5E5"> Rutles another related topic to net</font>

706
00:30:16,389 --> 00:30:21,279
flow is sampling again the topic in

707
00:30:19,570 --> 00:30:23,860
itself which would take much more time

708
00:30:21,279 --> 00:30:26,470
but<font color="#E5E5E5"> you really want don't want</font><font color="#CCCCCC"> to have</font>

709
00:30:23,860 --> 00:30:28,779
your CPU in the router doing a net flow

710
00:30:26,470 --> 00:30:31,539
processing on every single packet you

711
00:30:28,779 --> 00:30:33,639
really want<font color="#E5E5E5"> to aggregate it and do it on</font>

712
00:30:31,539 --> 00:30:35,169
one out of<font color="#CCCCCC"> four not one out of thousand</font>

713
00:30:33,639 --> 00:30:39,699
one hundred million whatever is

714
00:30:35,169 --> 00:30:41,740
statistically significant so there are

715
00:30:39,700 --> 00:30:43,419
<font color="#E5E5E5">so many different</font><font color="#CCCCCC"> ways to</font><font color="#E5E5E5"> deploy this</font>

716
00:30:41,740 --> 00:30:46,119
and dependencies on hardware and

717
00:30:43,419 --> 00:30:49,139
software etc that's really<font color="#E5E5E5"> an issue for</font>

718
00:30:46,119 --> 00:30:52,119
the vendors to talk about<font color="#E5E5E5"> and not me</font>

719
00:30:49,139 --> 00:30:54,639
also there are commercial systems

720
00:30:52,119 --> 00:30:56,549
available to collect this kind of

721
00:30:54,639 --> 00:31:00,219
information do all the processing

722
00:30:56,549 --> 00:31:02,080
examples<font color="#E5E5E5"> on Arbor or at legs and it to</font>

723
00:31:00,220 --> 00:31:04,059
me it seems valuable to actually combine

724
00:31:02,080 --> 00:31:05,590
this with<font color="#CCCCCC"> a system which already does</font>

725
00:31:04,059 --> 00:31:07,389
something else within that flow I mean

726
00:31:05,590 --> 00:31:09,340
it might be a lot of infrastructure just

727
00:31:07,389 --> 00:31:11,408
to deploy to get the traffic matrix but

728
00:31:09,340 --> 00:31:14,559
if you already have a system for example

729
00:31:11,409 --> 00:31:17,049
like arbors doing details detection or

730
00:31:14,559 --> 00:31:18,908
other things in your network if it also

731
00:31:17,049 --> 00:31:20,590
can give you the net<font color="#CCCCCC"> the traffic matrix</font>

732
00:31:18,909 --> 00:31:22,210
because it already has<font color="#E5E5E5"> collected all the</font>

733
00:31:20,590 --> 00:31:25,840
information that's a very valuable

734
00:31:22,210 --> 00:31:28,049
<font color="#E5E5E5">add-on at very little extra cost for</font>

735
00:31:25,840 --> 00:31:31,779
<font color="#E5E5E5">cisco there's a very nice web page from</font>

736
00:31:28,049 --> 00:31:34,110
<font color="#CCCCCC">benoit with all kinds of presentations</font>

737
00:31:31,779 --> 00:31:34,110
from him

738
00:31:36,269 --> 00:31:40,979
so this<font color="#CCCCCC"> is a case study of an actual</font>

739
00:31:38,729 --> 00:31:44,729
deployment of building the net flow

740
00:31:40,979 --> 00:31:47,309
matrix from net flow the traffic matrix

741
00:31:44,729 --> 00:31:51,809
<font color="#E5E5E5">from natural information on a network</font>

742
00:31:47,309 --> 00:31:54,869
where<font color="#CCCCCC"> I've</font><font color="#E5E5E5"> been working</font><font color="#CCCCCC"> with the goal</font>

743
00:31:51,809 --> 00:31:58,979
here<font color="#CCCCCC"> is to get the</font><font color="#E5E5E5"> traffic matrix for</font>

744
00:31:54,869 --> 00:32:00,918
traffic engineering analysis they want

745
00:31:58,979 --> 00:32:03,989
to<font color="#E5E5E5"> build a router to router matrix and</font>

746
00:32:00,919 --> 00:32:06,779
they have two types of traffic<font color="#E5E5E5"> on the</font>

747
00:32:03,989 --> 00:32:09,059
network one is generated internally

748
00:32:06,779 --> 00:32:11,489
which are their dsl customers all kind

749
00:32:09,059 --> 00:32:13,379
of leased line customers business

750
00:32:11,489 --> 00:32:17,309
customers etc which it's inside<font color="#CCCCCC"> the</font>

751
00:32:13,379 --> 00:32:19,320
network part of their<font color="#CCCCCC"> a s and the</font>

752
00:32:17,309 --> 00:32:28,168
external traffic being there<font color="#E5E5E5"> BGP</font>

753
00:32:19,320 --> 00:32:30,149
bearings the<font color="#CCCCCC"> first step was to take</font><font color="#E5E5E5"> a GP</font>

754
00:32:28,169 --> 00:32:32,519
writing so<font color="#CCCCCC"> that the net blocks which are</font>

755
00:32:30,149 --> 00:32:36,208
used for dsl and<font color="#CCCCCC"> the other</font><font color="#E5E5E5"> services and</font>

756
00:32:32,519 --> 00:32:38,999
actually inject them into ibgp to

757
00:32:36,209 --> 00:32:41,759
indicate where they came from so there

758
00:32:38,999 --> 00:32:44,579
are specific communities / router or<font color="#CCCCCC"> /</font>

759
00:32:41,759 --> 00:32:46,950
location<font color="#E5E5E5"> which tells you this route came</font>

760
00:32:44,579 --> 00:32:49,979
from New York this rod came from Atlanta

761
00:32:46,950 --> 00:32:51,359
this rod came from Chicago etc the

762
00:32:49,979 --> 00:32:54,209
<font color="#E5E5E5">ethylic system which was actually</font><font color="#CCCCCC"> the</font>

763
00:32:51,359 --> 00:32:56,339
collector in this case would have

764
00:32:54,209 --> 00:32:58,320
appearing with the routers in the

765
00:32:56,339 --> 00:33:00,269
network pick up this information

766
00:32:58,320 --> 00:33:03,958
combined it for building the traffic

767
00:33:00,269 --> 00:33:06,419
matrix this was all<font color="#CCCCCC"> done using version 5</font>

768
00:33:03,959 --> 00:33:07,769
of net flow simply<font color="#E5E5E5"> because of hardware</font>

769
00:33:06,419 --> 00:33:09,659
and software dependencies which

770
00:33:07,769 --> 00:33:11,190
prevented them from using the more

771
00:33:09,659 --> 00:33:13,200
advanced version 8 where you<font color="#E5E5E5"> actually</font>

772
00:33:11,190 --> 00:33:18,089
get<font color="#CCCCCC"> your traffic matrix more directly</font>

773
00:33:13,200 --> 00:33:19,349
from at the router itself so instead of

774
00:33:18,089 --> 00:33:21,629
going slight will just show you the

775
00:33:19,349 --> 00:33:23,908
picture which is easier the first phase

776
00:33:21,629 --> 00:33:26,189
and these<font color="#E5E5E5"> two phases were simply</font>

777
00:33:23,909 --> 00:33:28,320
deployment issue have nothing if no real

778
00:33:26,190 --> 00:33:31,559
technical background was to find out

779
00:33:28,320 --> 00:33:33,689
what the traffic was from their internal

780
00:33:31,559 --> 00:33:35,219
customers to the<font color="#E5E5E5"> internet to the</font>

781
00:33:33,690 --> 00:33:38,669
internet trends is provided to the

782
00:33:35,219 --> 00:33:40,909
<font color="#CCCCCC">internet peers in that case</font><font color="#E5E5E5"> you only</font>

783
00:33:38,669 --> 00:33:43,799
need to<font color="#CCCCCC"> look at natural information from</font>

784
00:33:40,909 --> 00:33:45,269
appearing routers themselves because you

785
00:33:43,799 --> 00:33:47,369
know that every packet coming from a

786
00:33:45,269 --> 00:33:48,669
customer<font color="#E5E5E5"> to appear will go to one of</font>

787
00:33:47,369 --> 00:33:51,369
these peering rattles

788
00:33:48,669 --> 00:33:54,039
so there's no<font color="#CCCCCC"> need to export net flow</font>

789
00:33:51,369 --> 00:33:58,299
from all the customer aggregation

790
00:33:54,039 --> 00:34:00,279
routers as well so you see<font color="#E5E5E5"> you have a</font>

791
00:33:58,299 --> 00:34:02,529
pointer here the two peering routers

792
00:34:00,279 --> 00:34:05,019
export information to the<font color="#CCCCCC"> add likes flow</font>

793
00:34:02,529 --> 00:34:07,419
collector also from the peering rather

794
00:34:05,019 --> 00:34:09,849
speech be information is exported which

795
00:34:07,419 --> 00:34:15,339
tells you the<font color="#E5E5E5"> neighboring as4 those</font>

796
00:34:09,849 --> 00:34:17,049
routes then the ethylic server combines

797
00:34:15,339 --> 00:34:19,869
it into the traffic matrix and sends it

798
00:34:17,049 --> 00:34:22,929
to<font color="#E5E5E5"> all</font><font color="#CCCCCC"> the systems for doing failure</font>

799
00:34:19,869 --> 00:34:27,429
analysis or something like<font color="#E5E5E5"> this this was</font>

800
00:34:22,929 --> 00:34:30,240
the easy part especially<font color="#E5E5E5"> because the</font>

801
00:34:27,429 --> 00:34:33,609
local address blocks were also

802
00:34:30,239 --> 00:34:36,969
advertised into the<font color="#CCCCCC"> BGP so using the BGP</font>

803
00:34:33,609 --> 00:34:38,918
flow collector order the BGP collector

804
00:34:36,969 --> 00:34:41,500
together with the<font color="#E5E5E5"> flow collector you</font>

805
00:34:38,918 --> 00:34:46,598
could get both your customer location

806
00:34:41,500 --> 00:34:48,190
and your neighboring<font color="#E5E5E5"> beer in phase</font><font color="#CCCCCC"> 2 it</font>

807
00:34:46,599 --> 00:34:49,869
became a little<font color="#E5E5E5"> more complex</font><font color="#CCCCCC"> because</font>

808
00:34:48,190 --> 00:34:52,839
they also wanted<font color="#E5E5E5"> to look at the traffic</font>

809
00:34:49,869 --> 00:34:54,429
between their customers and<font color="#E5E5E5"> now there is</font>

810
00:34:52,839 --> 00:34:56,558
no bgp information at all anymore

811
00:34:54,429 --> 00:35:01,589
because there's no traffic which is

812
00:34:56,559 --> 00:35:04,990
external to this network so in this case

813
00:35:01,589 --> 00:35:06,308
one of<font color="#CCCCCC"> the problems with using bgp for</font>

814
00:35:04,990 --> 00:35:09,640
transmitting this information is<font color="#E5E5E5"> that</font>

815
00:35:06,309 --> 00:35:11,440
<font color="#CCCCCC">BGP always picks the best route so the</font>

816
00:35:09,640 --> 00:35:14,558
flow collector if it only has been

817
00:35:11,440 --> 00:35:16,569
peering with one BG<font color="#E5E5E5"> piece</font><font color="#CCCCCC"> Baker like a</font>

818
00:35:14,559 --> 00:35:18,819
route reflector in your network it will

819
00:35:16,569 --> 00:35:20,859
only get the right thing from<font color="#E5E5E5"> that route</font>

820
00:35:18,819 --> 00:35:25,089
reflectors perspective only get the<font color="#E5E5E5"> best</font>

821
00:35:20,859 --> 00:35:26,859
route if for example address space from

822
00:35:25,089 --> 00:35:29,470
a customer has advertised from two core

823
00:35:26,859 --> 00:35:31,000
routers you will only see one of them as

824
00:35:29,470 --> 00:35:34,480
the advertising rather what you really

825
00:35:31,000 --> 00:35:37,599
want to know<font color="#E5E5E5"> is both of them because</font>

826
00:35:34,480 --> 00:35:41,410
<font color="#E5E5E5">some traffic might come in over one</font>

827
00:35:37,599 --> 00:35:43,000
corridor some of the other so in that

828
00:35:41,410 --> 00:35:45,040
case the picture becomes a little<font color="#CCCCCC"> bit</font>

829
00:35:43,000 --> 00:35:46,690
<font color="#E5E5E5">more complex there are more</font><font color="#CCCCCC"> flow</font>

830
00:35:45,040 --> 00:35:48,490
collectors also because because there

831
00:35:46,690 --> 00:35:52,630
are more routers exporting<font color="#E5E5E5"> this flow</font>

832
00:35:48,490 --> 00:35:54,609
information and now every core router

833
00:35:52,630 --> 00:35:57,190
which is exporting flow information is

834
00:35:54,609 --> 00:35:59,200
also exporting in speech<font color="#E5E5E5"> be table so</font>

835
00:35:57,190 --> 00:36:01,990
every flow which comes from a certain

836
00:35:59,200 --> 00:36:02,470
router is associated<font color="#CCCCCC"> with the BGP table</font>

837
00:36:01,990 --> 00:36:04,660
from death

838
00:36:02,470 --> 00:36:06,069
rather to know where the traffic is

839
00:36:04,660 --> 00:36:08,890
going<font color="#E5E5E5"> to and where the traffic is coming</font>

840
00:36:06,070 --> 00:36:11,650
from if you look<font color="#E5E5E5"> at here at those four</font>

841
00:36:08,890 --> 00:36:13,480
core routers you really want to<font color="#E5E5E5"> know if</font>

842
00:36:11,650 --> 00:36:16,000
traffic is going to the first or the

843
00:36:13,480 --> 00:36:18,010
second core rat and a pub if you would

844
00:36:16,000 --> 00:36:19,960
<font color="#CCCCCC">only use one bgp table it would simply</font>

845
00:36:18,010 --> 00:36:21,640
select one and pretend that<font color="#E5E5E5"> all the</font>

846
00:36:19,960 --> 00:36:26,140
traffic was coming from<font color="#E5E5E5"> a government to</font>

847
00:36:21,640 --> 00:36:28,779
that single rather in the<font color="#CCCCCC"> end after all</font>

848
00:36:26,140 --> 00:36:31,540
the processing the system would give an

849
00:36:28,780 --> 00:36:32,950
output something like this and while the

850
00:36:31,540 --> 00:36:35,560
details are<font color="#E5E5E5"> not very important</font><font color="#CCCCCC"> but it</font>

851
00:36:32,950 --> 00:36:40,450
does your firm router to router and the

852
00:36:35,560 --> 00:36:42,609
amount<font color="#E5E5E5"> of traffic a quick</font><font color="#CCCCCC"> note about</font>

853
00:36:40,450 --> 00:36:44,740
some other methods available in cisco

854
00:36:42,609 --> 00:36:50,049
and juniper routers destination class

855
00:36:44,740 --> 00:36:54,669
use<font color="#E5E5E5"> it's a Juniper feature it's a policy</font>

856
00:36:50,050 --> 00:36:57,070
based accounting mechanism so based on a

857
00:36:54,670 --> 00:36:59,290
filter or something in your router you

858
00:36:57,070 --> 00:37:03,340
can actually<font color="#E5E5E5"> assign traffic to a certain</font>

859
00:36:59,290 --> 00:37:06,640
counter very nice ID one of the<font color="#CCCCCC"> benefits</font>

860
00:37:03,340 --> 00:37:12,550
of<font color="#E5E5E5"> one of the limitations I mean is that</font>

861
00:37:06,640 --> 00:37:14,770
it only supports 16 counters so you

862
00:37:12,550 --> 00:37:16,780
cannot count more than 16 destinations

863
00:37:14,770 --> 00:37:20,020
which in a normal network is probably

864
00:37:16,780 --> 00:37:22,089
very limited so you could<font color="#E5E5E5"> only Jo choose</font>

865
00:37:20,020 --> 00:37:24,759
a few routers and say<font color="#CCCCCC"> ok I want</font><font color="#E5E5E5"> to have</font>

866
00:37:22,089 --> 00:37:26,349
one destination class being my corridor

867
00:37:24,760 --> 00:37:29,109
one in a certain city in another

868
00:37:26,349 --> 00:37:31,240
corridor to or I aggregate at<font color="#E5E5E5"> a higher</font>

869
00:37:29,109 --> 00:37:33,940
level<font color="#E5E5E5"> and i would use all the traffic</font>

870
00:37:31,240 --> 00:37:37,000
and one count 02<font color="#CCCCCC"> Chicago all</font><font color="#E5E5E5"> the traffic</font>

871
00:37:33,940 --> 00:37:38,710
to New York etc at the end of<font color="#E5E5E5"> the</font>

872
00:37:37,000 --> 00:37:40,930
presentation I will come<font color="#E5E5E5"> back for a very</font>

873
00:37:38,710 --> 00:37:42,640
useful deployment actually of this to

874
00:37:40,930 --> 00:37:44,950
combine it with<font color="#E5E5E5"> the estimation</font><font color="#CCCCCC"> method</font><font color="#E5E5E5"> in</font>

875
00:37:42,640 --> 00:37:46,509
itself it seems a little<font color="#E5E5E5"> bit too limited</font>

876
00:37:44,950 --> 00:37:53,200
to actually build build a full traffic

877
00:37:46,510 --> 00:37:54,430
matrix skipping that one then<font color="#CCCCCC"> btp policy</font>

878
00:37:53,200 --> 00:37:59,230
accounting on the cisco<font color="#CCCCCC"> side is</font>

879
00:37:54,430 --> 00:38:01,839
something very similar based on a<font color="#E5E5E5"> BGP</font>

880
00:37:59,230 --> 00:38:05,770
community list or a s number or any

881
00:38:01,839 --> 00:38:08,770
other filter you assign traffic to a

882
00:38:05,770 --> 00:38:10,390
certain counter and here in this<font color="#E5E5E5"> case</font>

883
00:38:08,770 --> 00:38:13,869
<font color="#E5E5E5">you</font><font color="#CCCCCC"> have 64 counters which gives you</font>

884
00:38:10,390 --> 00:38:18,029
more flexibility and more granularity to

885
00:38:13,869 --> 00:38:18,030
build a matrix from

886
00:38:18,150 --> 00:38:25,000
so these were the net flow and related

887
00:38:22,750 --> 00:38:26,890
methods and again this is really a blue

888
00:38:25,000 --> 00:38:29,200
brief overview I know that are much more

889
00:38:26,890 --> 00:38:31,480
details which are relevant with a cover

890
00:38:29,200 --> 00:38:33,720
here but<font color="#E5E5E5"> I also really want to talk</font>

891
00:38:31,480 --> 00:38:36,279
about<font color="#E5E5E5"> some of the other methods which if</font>

892
00:38:33,720 --> 00:38:38,140
you already have mpls in your network or

893
00:38:36,279 --> 00:38:42,400
other things this might be very

894
00:38:38,140 --> 00:38:48,220
<font color="#E5E5E5">beneficial so talking about mpls there</font>

895
00:38:42,400 --> 00:38:51,490
really<font color="#E5E5E5"> are two main deployments of mpls</font>

896
00:38:48,220 --> 00:38:55,569
protocol wise which is RSVP traffic

897
00:38:51,490 --> 00:38:57,609
engineering or an ldp network in<font color="#CCCCCC"> ldp</font>

898
00:38:55,569 --> 00:39:00,220
your traffic is just following your

899
00:38:57,609 --> 00:39:02,769
normal<font color="#CCCCCC"> IGP routing and but</font><font color="#E5E5E5"> it's using</font>

900
00:39:00,220 --> 00:39:04,930
labels for the forwarding itself in RSVP

901
00:39:02,769 --> 00:39:06,609
you're actually going to traffic

902
00:39:04,930 --> 00:39:08,950
engineer the traffic<font color="#E5E5E5"> and have explicit</font>

903
00:39:06,609 --> 00:39:12,700
parts either dynamically or statically

904
00:39:08,950 --> 00:39:14,439
provision to<font color="#E5E5E5"> the network the</font><font color="#CCCCCC"> LDP</font><font color="#E5E5E5"> method</font>

905
00:39:12,700 --> 00:39:17,680
to actually build traffic matrix is

906
00:39:14,440 --> 00:39:19,660
quite new<font color="#CCCCCC"> Deutsche Telekom has</font>

907
00:39:17,680 --> 00:39:21,640
implemented it<font color="#E5E5E5"> and also written very</font>

908
00:39:19,660 --> 00:39:23,200
nice paper about it again<font color="#E5E5E5"> there's a</font>

909
00:39:21,640 --> 00:39:25,390
reference at<font color="#CCCCCC"> the end</font><font color="#E5E5E5"> of the slides on</font>

910
00:39:23,200 --> 00:39:30,189
how the method works in detail I will

911
00:39:25,390 --> 00:39:35,650
cover it here in a few slides starting

912
00:39:30,190 --> 00:39:39,339
with rsvp-te which is setting up tunnels

913
00:39:35,650 --> 00:39:41,470
explicit tunnels from<font color="#CCCCCC"> Raavan router in</font>

914
00:39:39,339 --> 00:39:44,140
the network to another the configuration

915
00:39:41,470 --> 00:39:47,169
<font color="#CCCCCC">on a cisco for example look something</font>

916
00:39:44,140 --> 00:39:50,529
like this you create a tunnel interface

917
00:39:47,170 --> 00:39:52,660
you give the tunnel destination you

918
00:39:50,529 --> 00:39:54,579
might actually have an explicit parts

919
00:39:52,660 --> 00:39:57,399
which also defines the intermediate

920
00:39:54,579 --> 00:39:59,920
hopes and you assign bandwidth and

921
00:39:57,400 --> 00:40:02,680
priorities etc with it<font color="#CCCCCC"> it unless then</font>

922
00:39:59,920 --> 00:40:04,269
being<font color="#E5E5E5"> set up and traffic to their</font>

923
00:40:02,680 --> 00:40:06,460
destination router is being forwarded

924
00:40:04,269 --> 00:40:08,799
into the<font color="#E5E5E5"> tunnel</font><font color="#CCCCCC"> now the nice thing is</font>

925
00:40:06,460 --> 00:40:10,930
the tunnel<font color="#CCCCCC"> actually has a counter</font>

926
00:40:08,799 --> 00:40:13,869
associated with it so any traffic going

927
00:40:10,930 --> 00:40:15,700
into the tunnel will be counted and as

928
00:40:13,869 --> 00:40:17,440
if it's a normal interface on your

929
00:40:15,700 --> 00:40:19,899
network so you get a whole set<font color="#CCCCCC"> of</font>

930
00:40:17,440 --> 00:40:22,180
virtual interfaces which are all these

931
00:40:19,900 --> 00:40:24,279
tunnels in your network did they at the

932
00:40:22,180 --> 00:40:25,690
same<font color="#E5E5E5"> time that the counter traffic they</font>

933
00:40:24,279 --> 00:40:26,980
also tell you exactly where the traffic

934
00:40:25,690 --> 00:40:28,250
is going because<font color="#E5E5E5"> you know the</font>

935
00:40:26,980 --> 00:40:33,210
destination of

936
00:40:28,250 --> 00:40:37,350
so if you have a network with<font color="#CCCCCC"> a full</font>

937
00:40:33,210 --> 00:40:39,780
mesh so if you're setting up tunnels

938
00:40:37,350 --> 00:40:42,150
from every router to every other<font color="#E5E5E5"> route</font>

939
00:40:39,780 --> 00:40:44,040
in the network or from every edge router

940
00:40:42,150 --> 00:40:46,680
to every other edge<font color="#E5E5E5"> rat or every core</font>

941
00:40:44,040 --> 00:40:49,920
two other core rather you get<font color="#E5E5E5"> something</font>

942
00:40:46,680 --> 00:40:53,040
<font color="#CCCCCC">like this</font><font color="#E5E5E5"> a tunnel</font><font color="#CCCCCC"> from one writer to</font>

943
00:40:49,920 --> 00:40:55,380
every other<font color="#E5E5E5"> one and for the next router</font>

944
00:40:53,040 --> 00:40:57,990
you do the same so<font color="#E5E5E5"> you get a full mesh</font>

945
00:40:55,380 --> 00:41:00,270
of tunnels covering the part of your

946
00:40:57,990 --> 00:41:04,290
network<font color="#CCCCCC"> you want to</font><font color="#E5E5E5"> travel you measure</font>

947
00:41:00,270 --> 00:41:09,540
your traffic matrix the only thing let

948
00:41:04,290 --> 00:41:11,220
me<font color="#E5E5E5"> check luckily I didn't fully animated</font>

949
00:41:09,540 --> 00:41:18,750
otherwise it would have<font color="#E5E5E5"> taken it even</font>

950
00:41:11,220 --> 00:41:20,759
longer the benefit here is that apart

951
00:41:18,750 --> 00:41:24,390
from doing the MPLS deployment there

952
00:41:20,760 --> 00:41:26,250
really<font color="#E5E5E5"> isn't any other systems you need</font>

953
00:41:24,390 --> 00:41:28,410
<font color="#E5E5E5">to deploy you already have a system in</font>

954
00:41:26,250 --> 00:41:30,630
place to<font color="#E5E5E5"> measure your link utilizations</font>

955
00:41:28,410 --> 00:41:33,839
in the network<font color="#E5E5E5"> even something as simple</font>

956
00:41:30,630 --> 00:41:35,250
as mr TG it will simply see all the

957
00:41:33,840 --> 00:41:38,220
virtual interfaces which are the tools

958
00:41:35,250 --> 00:41:40,890
in your network and simply by name of

959
00:41:38,220 --> 00:41:42,600
<font color="#CCCCCC">the tunnel or the destination the amount</font>

960
00:41:40,890 --> 00:41:44,480
<font color="#E5E5E5">of traffic you measure on it you have</font>

961
00:41:42,600 --> 00:41:47,100
your traffic matrix<font color="#E5E5E5"> this is the most</font>

962
00:41:44,480 --> 00:41:52,170
direct<font color="#E5E5E5"> method to measure a traffic</font>

963
00:41:47,100 --> 00:41:54,990
matrix disadvantages having a full mesh

964
00:41:52,170 --> 00:41:57,030
of mpls traffic engineering is a big

965
00:41:54,990 --> 00:41:59,700
operational constraint the good reasons

966
00:41:57,030 --> 00:42:01,770
to do it in<font color="#E5E5E5"> certain</font><font color="#CCCCCC"> cases and they're</font>

967
00:41:59,700 --> 00:42:03,480
also reasons not to do it this talk

968
00:42:01,770 --> 00:42:06,540
<font color="#E5E5E5">about is not about whether you should or</font>

969
00:42:03,480 --> 00:42:08,100
should not use mpls if you<font color="#E5E5E5"> use mpls this</font>

970
00:42:06,540 --> 00:42:11,490
is a perfect method to get your traffic

971
00:42:08,100 --> 00:42:13,410
matrix<font color="#CCCCCC"> I don't think</font><font color="#E5E5E5"> it justifies in any</font>

972
00:42:11,490 --> 00:42:15,118
way deploying mpls just for getting<font color="#E5E5E5"> a</font>

973
00:42:13,410 --> 00:42:19,859
traffic matrix that that would<font color="#CCCCCC"> not be an</font>

974
00:42:15,119 --> 00:42:21,390
equal comparison also if you<font color="#E5E5E5"> deploy</font><font color="#CCCCCC"> mpls</font>

975
00:42:19,859 --> 00:42:23,490
you<font color="#E5E5E5"> lose a few other things in a network</font>

976
00:42:21,390 --> 00:42:26,420
especially load balancing because now

977
00:42:23,490 --> 00:42:29,029
traffic goes into tunnels load balancing

978
00:42:26,420 --> 00:42:32,250
<font color="#E5E5E5">equal cost multi-part load balancing</font>

979
00:42:29,030 --> 00:42:33,990
disappears and you if you really<font color="#E5E5E5"> want</font>

980
00:42:32,250 --> 00:42:35,910
<font color="#E5E5E5">the load</font><font color="#CCCCCC"> balance you might do something</font>

981
00:42:33,990 --> 00:42:39,069
like having multiple tunnels or split

982
00:42:35,910 --> 00:42:43,700
like the<font color="#E5E5E5"> notes into smaller ones</font>

983
00:42:39,070 --> 00:42:47,480
then the new<font color="#E5E5E5"> methods the more</font>

984
00:42:43,700 --> 00:42:51,049
interesting one<font color="#CCCCCC"> is for ldp networks so</font>

985
00:42:47,480 --> 00:42:54,320
in<font color="#CCCCCC"> ldp networks mpls works a little bit</font>

986
00:42:51,050 --> 00:42:56,750
different the routing is still following

987
00:42:54,320 --> 00:42:58,640
<font color="#E5E5E5">the ITP so I was taking the shortest</font>

988
00:42:56,750 --> 00:43:01,700
paths based on your link metrics but

989
00:42:58,640 --> 00:43:03,740
labels are<font color="#CCCCCC"> set up</font><font color="#E5E5E5"> to forward the traffic</font>

990
00:43:01,700 --> 00:43:06,799
in the network the protocol to

991
00:43:03,740 --> 00:43:08,450
distribute these labels is<font color="#CCCCCC"> ldp and the</font>

992
00:43:06,800 --> 00:43:12,020
reason<font color="#CCCCCC"> for sexy deployment is for</font>

993
00:43:08,450 --> 00:43:14,149
example<font color="#CCCCCC"> that you have VPNs so you have</font>

994
00:43:12,020 --> 00:43:15,410
overlapping address space and the core

995
00:43:14,150 --> 00:43:18,100
of the<font color="#CCCCCC"> network should just see the</font>

996
00:43:15,410 --> 00:43:21,049
labels and not the addresses themselves

997
00:43:18,100 --> 00:43:29,870
the<font color="#E5E5E5"> way this works if we have an example</font>

998
00:43:21,050 --> 00:43:33,470
<font color="#E5E5E5">router there on the left traffic coming</font>

999
00:43:29,870 --> 00:43:36,080
in has a certain label like 1234 it

1000
00:43:33,470 --> 00:43:39,859
comes to the router the router does a

1001
00:43:36,080 --> 00:43:45,200
<font color="#E5E5E5">lookup in its a table with forwarding</font>

1002
00:43:39,860 --> 00:43:46,910
and in its alpha or whatever you want to

1003
00:43:45,200 --> 00:43:49,850
<font color="#E5E5E5">call it the forwarding table for four</font>

1004
00:43:46,910 --> 00:43:52,490
labels<font color="#E5E5E5"> see that the outgoing label is</font><font color="#CCCCCC"> 12</font>

1005
00:43:49,850 --> 00:43:55,940
<font color="#CCCCCC">35 on another interface at the same time</font>

1006
00:43:52,490 --> 00:43:59,180
it will update the bite counter so

1007
00:43:55,940 --> 00:44:07,190
<font color="#CCCCCC">information is correct on persuades</font>

1008
00:43:59,180 --> 00:44:09,440
packet in the<font color="#CCCCCC"> LDP network in ldp</font>

1009
00:44:07,190 --> 00:44:10,940
networks you still have the ability to

1010
00:44:09,440 --> 00:44:14,660
<font color="#E5E5E5">do loud cheering so if we have this as</font>

1011
00:44:10,940 --> 00:44:17,930
an example<font color="#E5E5E5"> network traffic comes in on</font>

1012
00:44:14,660 --> 00:44:20,149
router one it's going to<font color="#CCCCCC"> write a two and</font>

1013
00:44:17,930 --> 00:44:22,669
<font color="#E5E5E5">now because of the equal cost path it</font>

1014
00:44:20,150 --> 00:44:25,850
actually<font color="#CCCCCC"> can have two outgoing labels</font>

1015
00:44:22,670 --> 00:44:28,820
<font color="#CCCCCC">and traffic will be split / router 3 and</font>

1016
00:44:25,850 --> 00:44:32,480
router for and in the next hope it will

1017
00:44:28,820 --> 00:44:34,670
come<font color="#E5E5E5"> together again in right of 5 and</font>

1018
00:44:32,480 --> 00:44:36,740
there it will<font color="#CCCCCC"> be merged into one label</font>

1019
00:44:34,670 --> 00:44:38,540
again so<font color="#E5E5E5"> your normal load sharing which</font>

1020
00:44:36,740 --> 00:44:40,580
in some cases might be essential to get

1021
00:44:38,540 --> 00:44:46,900
traffic load<font color="#CCCCCC"> chat and network is still</font>

1022
00:44:40,580 --> 00:44:50,540
<font color="#E5E5E5">available then the key of the method of</font>

1023
00:44:46,900 --> 00:44:52,910
building traffic measures from<font color="#CCCCCC"> ldp as</font>

1024
00:44:50,540 --> 00:44:56,160
you've seen every bite switch

1025
00:44:52,910 --> 00:44:58,770
based on<font color="#E5E5E5"> MPLS label as this counter</font>

1026
00:44:56,160 --> 00:45:01,020
associated so in the network we know it

1027
00:44:58,770 --> 00:45:04,050
every hope how much traffic is switched

1028
00:45:01,020 --> 00:45:05,759
for a certain label also because we know

1029
00:45:04,050 --> 00:45:08,190
<font color="#CCCCCC">that</font><font color="#E5E5E5"> the apology of the network we know</font>

1030
00:45:05,760 --> 00:45:11,130
how traffic is routed so once we know

1031
00:45:08,190 --> 00:45:12,690
how traffic from one router turn<font color="#E5E5E5"> english</font>

1032
00:45:11,130 --> 00:45:15,270
writer to an egress router is<font color="#E5E5E5"> rather</font>

1033
00:45:12,690 --> 00:45:17,430
based on<font color="#CCCCCC"> ldp we know the path we can</font>

1034
00:45:15,270 --> 00:45:20,610
<font color="#E5E5E5">follow the path and look at</font><font color="#CCCCCC"> all these</font>

1035
00:45:17,430 --> 00:45:22,169
<font color="#CCCCCC">white counters the only thing is because</font>

1036
00:45:20,610 --> 00:45:24,960
we're looking at multiple hops we're

1037
00:45:22,170 --> 00:45:27,480
looking at<font color="#E5E5E5"> aggregator traffic so if we</font>

1038
00:45:24,960 --> 00:45:32,010
look at this Jane here<font color="#E5E5E5"> of routers from a</font>

1039
00:45:27,480 --> 00:45:37,320
<font color="#E5E5E5">B to Z all the traffic coming in at a</font>

1040
00:45:32,010 --> 00:45:39,480
will show up at be<font color="#E5E5E5"> and be counted that</font>

1041
00:45:37,320 --> 00:45:42,030
be at<font color="#CCCCCC"> see you will see the traffic from</font>

1042
00:45:39,480 --> 00:45:44,820
a B and C<font color="#CCCCCC"> D you will see the traffic</font>

1043
00:45:42,030 --> 00:45:47,790
from ABCD etc so it's an aggregate

1044
00:45:44,820 --> 00:45:49,710
counter the traffic keeps increasing so

1045
00:45:47,790 --> 00:45:53,340
the<font color="#E5E5E5"> idea is once you know the path</font>

1046
00:45:49,710 --> 00:45:55,500
through the network you follow the path

1047
00:45:53,340 --> 00:45:57,630
you look at the routers you look at the

1048
00:45:55,500 --> 00:46:00,780
amount<font color="#E5E5E5"> of traffic you see switched to an</font>

1049
00:45:57,630 --> 00:46:03,210
egress to a destination you count it

1050
00:46:00,780 --> 00:46:06,540
which you subtract it from the next stop

1051
00:46:03,210 --> 00:46:08,610
because I know at sea I should not count

1052
00:46:06,540 --> 00:46:10,170
the traffic from be<font color="#E5E5E5"> anymore because that</font>

1053
00:46:08,610 --> 00:46:15,980
was transit traffic I really<font color="#E5E5E5"> want to</font>

1054
00:46:10,170 --> 00:46:18,600
<font color="#E5E5E5">know how much traffic source at sea so</font>

1055
00:46:15,980 --> 00:46:20,340
but if it was a reference here at the

1056
00:46:18,600 --> 00:46:22,170
bottom<font color="#CCCCCC"> you see reference for which</font>

1057
00:46:20,340 --> 00:46:27,810
defines the whole algorithm in more

1058
00:46:22,170 --> 00:46:30,090
detail if we take the same network again

1059
00:46:27,810 --> 00:46:33,900
as an example<font color="#E5E5E5"> we</font><font color="#CCCCCC"> have the traffic flow</font>

1060
00:46:30,090 --> 00:46:38,700
here from router one two out of five and

1061
00:46:33,900 --> 00:46:41,340
it's carrying 20 units of traffic we

1062
00:46:38,700 --> 00:46:42,839
start<font color="#E5E5E5"> at the because on 400 oh no the</font>

1063
00:46:41,340 --> 00:46:45,780
<font color="#E5E5E5">path yet so we start at a random router</font>

1064
00:46:42,840 --> 00:46:49,890
looking at the bite counters for traffic

1065
00:46:45,780 --> 00:46:51,660
from 11 to 15 at about three we see 10

1066
00:46:49,890 --> 00:46:54,210
units like let's say 10 megabits of

1067
00:46:51,660 --> 00:46:58,100
traffic we add these 10 megabits to the

1068
00:46:54,210 --> 00:47:02,490
entry in traffic matrix going from<font color="#CCCCCC"> 3</font><font color="#E5E5E5"> to</font>

1069
00:46:58,100 --> 00:47:04,080
<font color="#CCCCCC">5 next router we look at is rather for</font>

1070
00:47:02,490 --> 00:47:06,359
and we see the same thing we see 10

1071
00:47:04,080 --> 00:47:10,560
units<font color="#E5E5E5"> of traffic from rather for</font>

1072
00:47:06,360 --> 00:47:13,170
throughout the five<font color="#CCCCCC"> route 25 itself does</font>

1073
00:47:10,560 --> 00:47:14,759
not show any traffic from five to five

1074
00:47:13,170 --> 00:47:17,310
because it's the destination itself or

1075
00:47:14,760 --> 00:47:19,320
there's<font color="#E5E5E5"> no information there then we</font>

1076
00:47:17,310 --> 00:47:21,810
<font color="#CCCCCC">figure out the one and what we now see</font>

1077
00:47:19,320 --> 00:47:23,220
is 20 units<font color="#E5E5E5"> of traffic but we'll also</font>

1078
00:47:21,810 --> 00:47:26,400
see that we have a next stop which is

1079
00:47:23,220 --> 00:47:28,319
routed to and we know that<font color="#E5E5E5"> this 20 units</font>

1080
00:47:26,400 --> 00:47:29,760
<font color="#E5E5E5">of traffic we see at the first hop we</font>

1081
00:47:28,320 --> 00:47:31,890
should subtract from the second top

1082
00:47:29,760 --> 00:47:33,690
because we don't<font color="#CCCCCC"> double count we only</font>

1083
00:47:31,890 --> 00:47:35,609
want to<font color="#E5E5E5"> know the traffic at router to</font>

1084
00:47:33,690 --> 00:47:38,670
which actually came from<font color="#E5E5E5"> right to do so</font>

1085
00:47:35,610 --> 00:47:42,270
in traffic matrix we add 24 router 1 and

1086
00:47:38,670 --> 00:47:45,720
minus 24 at 02 now the last rather we

1087
00:47:42,270 --> 00:47:49,350
need to process is rather too in that

1088
00:47:45,720 --> 00:47:52,259
case we again see 20 units of<font color="#E5E5E5"> traffic</font>

1089
00:47:49,350 --> 00:47:55,500
<font color="#CCCCCC">going out so we add 20 to the entry of</font>

1090
00:47:52,260 --> 00:47:58,170
router to the entry was already minus 20

1091
00:47:55,500 --> 00:48:00,840
so we add these 20 in its 0 and also

1092
00:47:58,170 --> 00:48:02,970
<font color="#E5E5E5">router 3 and router for we subtract</font>

1093
00:48:00,840 --> 00:48:04,650
again then because we don't want to

1094
00:48:02,970 --> 00:48:08,480
counter traffic we have already seen and

1095
00:48:04,650 --> 00:48:11,130
what we end up with the last one is

1096
00:48:08,480 --> 00:48:13,340
having 20 units<font color="#E5E5E5"> of traffic from rather</font>

1097
00:48:11,130 --> 00:48:15,720
one to write a five on the right place

1098
00:48:13,340 --> 00:48:17,370
this might be<font color="#CCCCCC"> a bit quick to go over the</font>

1099
00:48:15,720 --> 00:48:19,529
algorithm like this it's been described

1100
00:48:17,370 --> 00:48:21,779
in more detail in the paper it's<font color="#E5E5E5"> not</font>

1101
00:48:19,530 --> 00:48:24,150
<font color="#CCCCCC">very hard to implement and if you have</font>

1102
00:48:21,780 --> 00:48:27,440
an ldp<font color="#E5E5E5"> network doing mpls VPN or</font>

1103
00:48:24,150 --> 00:48:29,940
<font color="#E5E5E5">something like it it gives you a perfect</font>

1104
00:48:27,440 --> 00:48:34,020
traffic matrix there are a few issues

1105
00:48:29,940 --> 00:48:36,840
with<font color="#E5E5E5"> it though first one is based on</font>

1106
00:48:34,020 --> 00:48:39,120
cisco routers unfortunately the cisco

1107
00:48:36,840 --> 00:48:40,890
routers only<font color="#E5E5E5"> show transit traffic so it</font>

1108
00:48:39,120 --> 00:48:43,529
does not<font color="#CCCCCC"> show how</font><font color="#E5E5E5"> much traffic enters</font>

1109
00:48:40,890 --> 00:48:45,150
the network at a note<font color="#E5E5E5"> going to a certain</font>

1110
00:48:43,530 --> 00:48:46,650
label to a certain destination it only

1111
00:48:45,150 --> 00:48:49,500
tells you how much is coming in and

1112
00:48:46,650 --> 00:48:51,030
going out so the problem is traffic

1113
00:48:49,500 --> 00:48:52,860
coming into the network does<font color="#CCCCCC"> not show up</font>

1114
00:48:51,030 --> 00:48:55,530
at the hop right game in it shows up at

1115
00:48:52,860 --> 00:48:59,100
the next stop depending on<font color="#CCCCCC"> your</font><font color="#E5E5E5"> topology</font>

1116
00:48:55,530 --> 00:49:00,840
you can work around this if you have a

1117
00:48:59,100 --> 00:49:02,670
core router where you want to know<font color="#E5E5E5"> your</font>

1118
00:49:00,840 --> 00:49:05,550
traffic matrix for and edge router

1119
00:49:02,670 --> 00:49:07,140
sending traffic into the<font color="#E5E5E5"> network the</font>

1120
00:49:05,550 --> 00:49:08,580
problem<font color="#E5E5E5"> that traffic only shows</font><font color="#CCCCCC"> up at</font>

1121
00:49:07,140 --> 00:49:11,310
the<font color="#E5E5E5"> core is not so much</font><font color="#CCCCCC"> a problem</font>

1122
00:49:08,580 --> 00:49:12,960
because<font color="#E5E5E5"> looking at the link loads you</font>

1123
00:49:11,310 --> 00:49:15,650
can actually<font color="#E5E5E5"> find out where</font><font color="#CCCCCC"> it came from</font>

1124
00:49:12,960 --> 00:49:18,940
if you have routers which have a mix of

1125
00:49:15,650 --> 00:49:21,230
label switching and

1126
00:49:18,940 --> 00:49:23,630
applying labels are entering traffic

1127
00:49:21,230 --> 00:49:27,770
into mpls it becomes very<font color="#E5E5E5"> hard to</font>

1128
00:49:23,630 --> 00:49:29,510
distinguish then on juniper this problem

1129
00:49:27,770 --> 00:49:32,390
does not exist there was a minor issue

1130
00:49:29,510 --> 00:49:35,090
on juniper routers is that it does not

1131
00:49:32,390 --> 00:49:37,279
<font color="#CCCCCC">show the ratio if there</font><font color="#E5E5E5"> is load</font>

1132
00:49:35,090 --> 00:49:38,870
balancing on how much traffic was going

1133
00:49:37,280 --> 00:49:41,930
on one label and how much on the other

1134
00:49:38,870 --> 00:49:43,190
in big IP networks that's not<font color="#E5E5E5"> a really</font>

1135
00:49:41,930 --> 00:49:45,410
<font color="#E5E5E5">big</font><font color="#CCCCCC"> issue because</font><font color="#E5E5E5"> if you have enough</font>

1136
00:49:43,190 --> 00:49:47,510
traffic aggregated<font color="#CCCCCC"> load balancing will</font>

1137
00:49:45,410 --> 00:49:54,049
be<font color="#E5E5E5"> roughly 5050 and it will only be</font>

1138
00:49:47,510 --> 00:49:55,430
minor differences so<font color="#CCCCCC"> Deutsche Telekom</font>

1139
00:49:54,050 --> 00:49:57,740
was implemented this on the backbone

1140
00:49:55,430 --> 00:50:00,589
again it's a very<font color="#E5E5E5"> simple algorithm and</font>

1141
00:49:57,740 --> 00:50:02,479
also it<font color="#CCCCCC"> doesn't take any hardly and take</font>

1142
00:50:00,590 --> 00:50:06,200
any resources you only go to<font color="#E5E5E5"> the routers</font>

1143
00:50:02,480 --> 00:50:08,330
you pull the<font color="#CCCCCC"> LDP forwarding counters you</font>

1144
00:50:06,200 --> 00:50:14,120
can run it on<font color="#CCCCCC"> a single pc and you have a</font>

1145
00:50:08,330 --> 00:50:18,020
perfect traffic matrix as an overview on

1146
00:50:14,120 --> 00:50:19,370
how<font color="#E5E5E5"> this process works you start with</font>

1147
00:50:18,020 --> 00:50:21,110
<font color="#E5E5E5">the router conflicts because you need to</font>

1148
00:50:19,370 --> 00:50:22,400
<font color="#E5E5E5">know the topology of the network you</font>

1149
00:50:21,110 --> 00:50:23,870
need<font color="#E5E5E5"> to know the routing because</font>

1150
00:50:22,400 --> 00:50:26,240
otherwise you cannot find out how the

1151
00:50:23,870 --> 00:50:30,170
parts are actually calculated to network

1152
00:50:26,240 --> 00:50:32,839
you<font color="#CCCCCC"> get the LDP data simply by pulling</font>

1153
00:50:30,170 --> 00:50:34,880
<font color="#CCCCCC">the routers using has no p you look at</font>

1154
00:50:32,840 --> 00:50:37,670
the link utilizations this is<font color="#E5E5E5"> especially</font>

1155
00:50:34,880 --> 00:50:39,260
needed in the case where you have cisco

1156
00:50:37,670 --> 00:50:41,630
routers who do not account for the

1157
00:50:39,260 --> 00:50:43,010
<font color="#CCCCCC">traffic coming into the router so you</font>

1158
00:50:41,630 --> 00:50:47,420
need<font color="#E5E5E5"> to match it back to where it came</font>

1159
00:50:43,010 --> 00:50:49,580
from then you get the traffic matrix and

1160
00:50:47,420 --> 00:50:55,250
you can start using it for what all the

1161
00:50:49,580 --> 00:50:57,080
purposes we talked about<font color="#E5E5E5"> earlier so it's</font>

1162
00:50:55,250 --> 00:50:59,150
a<font color="#CCCCCC"> very nice method</font><font color="#E5E5E5"> it's fun independent</font>

1163
00:50:57,080 --> 00:51:01,850
it's simple<font color="#E5E5E5"> and it works on normal</font>

1164
00:50:59,150 --> 00:51:04,310
hardware and<font color="#E5E5E5"> I would highly recommend if</font>

1165
00:51:01,850 --> 00:51:08,180
you have an ldp network to start<font color="#CCCCCC"> taking</font>

1166
00:51:04,310 --> 00:51:10,430
a look<font color="#E5E5E5"> at this looking at the time</font>

1167
00:51:08,180 --> 00:51:13,549
seeing that it's<font color="#E5E5E5"> almost two-thirty if</font>

1168
00:51:10,430 --> 00:51:17,299
<font color="#E5E5E5">I'm correct</font><font color="#CCCCCC"> I'm going</font><font color="#E5E5E5"> to skip this part</font>

1169
00:51:13,550 --> 00:51:20,110
about partial topologies because I do

1170
00:51:17,300 --> 00:51:22,400
want<font color="#CCCCCC"> to</font><font color="#E5E5E5"> say something about estimation</font>

1171
00:51:20,110 --> 00:51:28,790
all the methods we've talked about so

1172
00:51:22,400 --> 00:51:30,350
far are about directly measuring some

1173
00:51:28,790 --> 00:51:34,460
form of traffic

1174
00:51:30,350 --> 00:51:35,810
matrix information from the network the

1175
00:51:34,460 --> 00:51:37,190
thing which is<font color="#E5E5E5"> normally available in</font>

1176
00:51:35,810 --> 00:51:38,630
service providers is just the link

1177
00:51:37,190 --> 00:51:40,340
utilizations<font color="#E5E5E5"> I mean you have a system</font>

1178
00:51:38,630 --> 00:51:43,550
like<font color="#E5E5E5"> mr TG or something more complex</font>

1179
00:51:40,340 --> 00:51:45,770
with a nice database back-end and you

1180
00:51:43,550 --> 00:51:47,210
already have this information it would

1181
00:51:45,770 --> 00:51:49,240
be so nice if you<font color="#CCCCCC"> could actually find</font>

1182
00:51:47,210 --> 00:51:51,680
the traffic matrix from this information

1183
00:51:49,240 --> 00:51:54,430
there are methods to do something<font color="#E5E5E5"> like</font>

1184
00:51:51,680 --> 00:51:57,230
that<font color="#E5E5E5"> which are actually not new at all</font>

1185
00:51:54,430 --> 00:51:59,149
if<font color="#E5E5E5"> you look at seismology where you send</font>

1186
00:51:57,230 --> 00:52:06,560
waves into the<font color="#E5E5E5"> earth and to find out</font>

1187
00:51:59,150 --> 00:52:08,390
what's actually below there or I things

1188
00:52:06,560 --> 00:52:10,759
like an MRI<font color="#CCCCCC"> scan to look inside your</font>

1189
00:52:08,390 --> 00:52:13,190
body mathematically they look at<font color="#E5E5E5"> exactly</font>

1190
00:52:10,760 --> 00:52:16,580
the same<font color="#E5E5E5"> problem the problem</font><font color="#CCCCCC"> being you</font>

1191
00:52:13,190 --> 00:52:19,190
have a set of measurements but you want

1192
00:52:16,580 --> 00:52:21,590
<font color="#E5E5E5">to estimate a set of unknowns which is</font>

1193
00:52:19,190 --> 00:52:25,190
much larger in a normal<font color="#E5E5E5"> network you have</font>

1194
00:52:21,590 --> 00:52:26,840
<font color="#E5E5E5">and notes you</font><font color="#CCCCCC"> will have order and links</font>

1195
00:52:25,190 --> 00:52:28,190
in the network like if you have<font color="#E5E5E5"> handled</font>

1196
00:52:26,840 --> 00:52:30,110
notes you might have triggered links or

1197
00:52:28,190 --> 00:52:31,340
something like that but you have hundred

1198
00:52:30,110 --> 00:52:34,820
times hundred entries in your traffic

1199
00:52:31,340 --> 00:52:38,750
matrix so what we need<font color="#E5E5E5"> to do is do those</font>

1200
00:52:34,820 --> 00:52:43,250
measurements add more<font color="#CCCCCC"> information based</font>

1201
00:52:38,750 --> 00:52:45,730
on assumptions in a real<font color="#CCCCCC"> network this is</font>

1202
00:52:43,250 --> 00:52:47,660
a very hard process to describe because

1203
00:52:45,730 --> 00:52:49,700
well if you're looking at<font color="#E5E5E5"> the traffic</font>

1204
00:52:47,660 --> 00:52:51,379
<font color="#E5E5E5">matrix with with hundreds or thousands</font>

1205
00:52:49,700 --> 00:52:54,250
of entries it's<font color="#E5E5E5"> very hard to visualize</font>

1206
00:52:51,380 --> 00:52:57,470
so just as an example<font color="#CCCCCC"> how this works I</font>

1207
00:52:54,250 --> 00:53:00,290
using simple network with new<font color="#E5E5E5"> york</font>

1208
00:52:57,470 --> 00:53:02,990
boston and DC and i'm only looking at

1209
00:53:00,290 --> 00:53:05,630
one link which is<font color="#CCCCCC"> two demands going over</font>

1210
00:53:02,990 --> 00:53:07,250
it so from my measurements<font color="#E5E5E5"> i know there</font>

1211
00:53:05,630 --> 00:53:09,560
<font color="#CCCCCC">was six megabits on the link to in the</font>

1212
00:53:07,250 --> 00:53:12,230
middle<font color="#E5E5E5"> and I also know based on the</font>

1213
00:53:09,560 --> 00:53:14,360
routing that there are only two<font color="#E5E5E5"> flows</font>

1214
00:53:12,230 --> 00:53:16,280
over that link so i know<font color="#E5E5E5"> that the flow</font>

1215
00:53:14,360 --> 00:53:18,560
from New York to<font color="#E5E5E5"> Boston blister flow</font>

1216
00:53:16,280 --> 00:53:20,090
from new york to DC must be<font color="#CCCCCC"> six megabits</font>

1217
00:53:18,560 --> 00:53:23,690
that's the only thing I get from my

1218
00:53:20,090 --> 00:53:26,030
measurements for the<font color="#E5E5E5"> traffic matrix I</font>

1219
00:53:23,690 --> 00:53:28,220
want to<font color="#E5E5E5"> know how big each of these flows</font>

1220
00:53:26,030 --> 00:53:31,250
are so I need to do something<font color="#CCCCCC"> to figure</font>

1221
00:53:28,220 --> 00:53:34,220
out and get<font color="#CCCCCC"> out of this</font><font color="#E5E5E5"> problem by</font>

1222
00:53:31,250 --> 00:53:37,220
adding information so visualizing it in

1223
00:53:34,220 --> 00:53:39,080
a graph what you get<font color="#CCCCCC"> is this on one axis</font>

1224
00:53:37,220 --> 00:53:41,959
we have new york to boston on the other

1225
00:53:39,080 --> 00:53:43,920
axis we have new york to DC I know that

1226
00:53:41,960 --> 00:53:48,870
together they must be 6 megabits so

1227
00:53:43,920 --> 00:53:51,630
if<font color="#E5E5E5"> I draw a line from</font><font color="#CCCCCC"> six megabits so 0</font>

1228
00:53:48,870 --> 00:53:54,240
new york to DC and six<font color="#E5E5E5"> New York to</font>

1229
00:53:51,630 --> 00:53:56,310
<font color="#E5E5E5">Boston to the</font><font color="#CCCCCC"> other point</font><font color="#E5E5E5"> six megabits</font>

1230
00:53:54,240 --> 00:53:58,259
on the other one then I know my solution

1231
00:53:56,310 --> 00:54:00,570
must<font color="#E5E5E5"> be somewhere on</font><font color="#CCCCCC"> that line that line</font>

1232
00:53:58,260 --> 00:54:02,010
represents all the possible<font color="#CCCCCC"> solutions</font>

1233
00:54:00,570 --> 00:54:05,160
for those two<font color="#E5E5E5"> demands which are together</font>

1234
00:54:02,010 --> 00:54:08,850
<font color="#CCCCCC">6 megabits the problem is how do</font><font color="#E5E5E5"> I</font>

1235
00:54:05,160 --> 00:54:11,399
choose one as I said<font color="#E5E5E5"> we need to add some</font>

1236
00:54:08,850 --> 00:54:13,200
<font color="#E5E5E5">extra information and in this case we're</font>

1237
00:54:11,400 --> 00:54:16,710
going to use<font color="#E5E5E5"> something called a gravity</font>

1238
00:54:13,200 --> 00:54:19,319
model there's more we can know about<font color="#E5E5E5"> the</font>

1239
00:54:16,710 --> 00:54:21,660
network because these sites like new

1240
00:54:19,320 --> 00:54:24,510
york boston and DC have a total amount

1241
00:54:21,660 --> 00:54:27,299
<font color="#E5E5E5">of traffic being based on customers or</font>

1242
00:54:24,510 --> 00:54:29,940
peers<font color="#E5E5E5"> or</font><font color="#CCCCCC"> etc the</font><font color="#E5E5E5"> simpson we're going to</font>

1243
00:54:27,300 --> 00:54:31,500
<font color="#E5E5E5">make is</font><font color="#CCCCCC"> that most traffic will be</font>

1244
00:54:29,940 --> 00:54:35,190
between<font color="#E5E5E5"> the largest sites on the network</font>

1245
00:54:31,500 --> 00:54:37,350
so the largest flows will be between<font color="#E5E5E5"> the</font>

1246
00:54:35,190 --> 00:54:39,570
<font color="#CCCCCC">largest flow will be between</font><font color="#E5E5E5"> the two</font>

1247
00:54:37,350 --> 00:54:42,350
largest sites on your network so<font color="#CCCCCC"> i just</font>

1248
00:54:39,570 --> 00:54:45,210
make it made up some numbers<font color="#E5E5E5"> here and</font>

1249
00:54:42,350 --> 00:54:48,750
let's say in<font color="#CCCCCC"> new york we have a</font><font color="#E5E5E5"> total of</font>

1250
00:54:45,210 --> 00:54:51,900
50 megabits of truth of traffic and in

1251
00:54:48,750 --> 00:54:54,270
total<font color="#E5E5E5"> boston represents two percent of</font>

1252
00:54:51,900 --> 00:54:57,570
the traffic in the network and DC eight

1253
00:54:54,270 --> 00:55:00,030
percent my assumption<font color="#CCCCCC"> is now that more</font>

1254
00:54:57,570 --> 00:55:02,100
traffic will go to these two DC then

1255
00:55:00,030 --> 00:55:05,040
we'll go<font color="#E5E5E5"> to Boston simply because of the</font>

1256
00:55:02,100 --> 00:55:07,470
size of<font color="#CCCCCC"> these sites so my estimate</font>

1257
00:55:05,040 --> 00:55:10,410
simply based on that assumption will be

1258
00:55:07,470 --> 00:55:11,790
the red point their problem now is the

1259
00:55:10,410 --> 00:55:14,310
red point does not match with my

1260
00:55:11,790 --> 00:55:16,200
measurements because I know these two

1261
00:55:14,310 --> 00:55:18,570
flowers together must be<font color="#E5E5E5"> six megabits my</font>

1262
00:55:16,200 --> 00:55:21,589
estimate is not on the line so the only

1263
00:55:18,570 --> 00:55:24,570
thing we do now is find the shortest

1264
00:55:21,590 --> 00:55:27,000
distance from my estimate to the point

1265
00:55:24,570 --> 00:55:29,190
<font color="#E5E5E5">on the line which is</font><font color="#CCCCCC"> a solution</font><font color="#E5E5E5"> and use</font>

1266
00:55:27,000 --> 00:55:30,870
that as my final estimate so in this

1267
00:55:29,190 --> 00:55:32,790
case New York and Boston will<font color="#CCCCCC"> be one of</font>

1268
00:55:30,870 --> 00:55:35,490
the health megabits new york to DC with

1269
00:55:32,790 --> 00:55:37,110
before<font color="#CCCCCC"> now this sounds hard to believe</font>

1270
00:55:35,490 --> 00:55:40,049
<font color="#E5E5E5">that this actually will work in a real</font>

1271
00:55:37,110 --> 00:55:42,930
network at<font color="#E5E5E5"> least that's what we thought</font>

1272
00:55:40,050 --> 00:55:44,490
as well and this is not<font color="#E5E5E5"> the first time</font>

1273
00:55:42,930 --> 00:55:46,500
this<font color="#E5E5E5"> is being presented at night like 18</font>

1274
00:55:44,490 --> 00:55:48,750
things been talking about it before and

1275
00:55:46,500 --> 00:55:51,150
they have shown some some results as

1276
00:55:48,750 --> 00:55:53,010
well this example was<font color="#E5E5E5"> just too d months</font>

1277
00:55:51,150 --> 00:55:55,290
you<font color="#E5E5E5"> can expand</font><font color="#CCCCCC"> this do this</font><font color="#E5E5E5"> with 1</font>

1278
00:55:53,010 --> 00:55:57,690
million<font color="#E5E5E5"> demands and it still works I</font>

1279
00:55:55,290 --> 00:56:00,029
will actually<font color="#E5E5E5"> show you the results again</font>

1280
00:55:57,690 --> 00:56:01,980
from a real<font color="#E5E5E5"> network so here we have a</font>

1281
00:56:00,030 --> 00:56:03,990
<font color="#E5E5E5">tier 1 backbone where we again can</font>

1282
00:56:01,980 --> 00:56:06,990
measure the traffic on the network<font color="#E5E5E5"> and</font>

1283
00:56:03,990 --> 00:56:09,029
we also go into estimated so we first

1284
00:56:06,990 --> 00:56:11,339
measure<font color="#CCCCCC"> it we look at the link loads we</font>

1285
00:56:09,030 --> 00:56:13,080
know what the traffic matrix is then we

1286
00:56:11,340 --> 00:56:15,180
<font color="#E5E5E5">kind of high traffic matrix and we try</font>

1287
00:56:13,080 --> 00:56:17,880
to estimate it then we compare the two

1288
00:56:15,180 --> 00:56:20,730
and see if to give the same results what

1289
00:56:17,880 --> 00:56:23,820
you get is<font color="#CCCCCC"> this graph if there</font><font color="#E5E5E5"> was a</font>

1290
00:56:20,730 --> 00:56:27,410
<font color="#E5E5E5">perfect match everything would be on the</font>

1291
00:56:23,820 --> 00:56:31,980
black line being the estimate equal to

1292
00:56:27,410 --> 00:56:33,870
the measured value however<font color="#CCCCCC"> there's a lot</font>

1293
00:56:31,980 --> 00:56:35,670
of deviation from that so it looks like

1294
00:56:33,870 --> 00:56:38,009
<font color="#E5E5E5">it's fair not very accurate and and</font>

1295
00:56:35,670 --> 00:56:39,630
that's<font color="#CCCCCC"> actually true I mean these errors</font>

1296
00:56:38,010 --> 00:56:44,520
can be up to twenty thirty percent or

1297
00:56:39,630 --> 00:56:47,160
something like that the question is what

1298
00:56:44,520 --> 00:56:49,620
<font color="#E5E5E5">do we want to do with the traffic matrix</font>

1299
00:56:47,160 --> 00:56:51,899
we want to use<font color="#CCCCCC"> it for capacity planning</font>

1300
00:56:49,620 --> 00:56:53,580
failure simulations etc so what would

1301
00:56:51,900 --> 00:56:56,430
<font color="#E5E5E5">happen</font><font color="#CCCCCC"> if we take the inaccurate</font>

1302
00:56:53,580 --> 00:56:58,350
estimated matrix do our work with it

1303
00:56:56,430 --> 00:57:00,029
like for<font color="#E5E5E5"> example look at all the</font>

1304
00:56:58,350 --> 00:57:01,950
failures in the<font color="#E5E5E5"> network and look at the</font>

1305
00:57:00,030 --> 00:57:03,840
link large resulting from death and we

1306
00:57:01,950 --> 00:57:06,960
do it with the<font color="#E5E5E5"> real traffic matrix would</font>

1307
00:57:03,840 --> 00:57:11,820
we get the same<font color="#E5E5E5"> results</font><font color="#CCCCCC"> or not and this</font>

1308
00:57:06,960 --> 00:57:13,950
is the amazing<font color="#CCCCCC"> thing here we go through</font>

1309
00:57:11,820 --> 00:57:16,170
the network we fill every link one by

1310
00:57:13,950 --> 00:57:18,210
<font color="#CCCCCC">one</font><font color="#E5E5E5"> we look at the rerouting and we keep</font>

1311
00:57:16,170 --> 00:57:20,070
track<font color="#E5E5E5"> of the highest utilization we see</font>

1312
00:57:18,210 --> 00:57:22,650
on any link so it kind of gives you<font color="#E5E5E5"> a</font>

1313
00:57:20,070 --> 00:57:24,960
capacity planning for failures a worst

1314
00:57:22,650 --> 00:57:27,030
case which can happen to a link we do it

1315
00:57:24,960 --> 00:57:28,820
based on<font color="#E5E5E5"> the estimate we do it based on</font>

1316
00:57:27,030 --> 00:57:31,500
<font color="#E5E5E5">the measured traffic</font><font color="#CCCCCC"> matrix and</font>

1317
00:57:28,820 --> 00:57:33,930
amazingly enough<font color="#CCCCCC"> it gets roughly the</font>

1318
00:57:31,500 --> 00:57:37,460
same results so the conclusion to take

1319
00:57:33,930 --> 00:57:39,660
away from the estimation process is that

1320
00:57:37,460 --> 00:57:42,710
<font color="#E5E5E5">individually it's very hard to get these</font>

1321
00:57:39,660 --> 00:57:45,509
demands accurate but if you use them

1322
00:57:42,710 --> 00:57:47,760
they<font color="#CCCCCC"> proved to give the same results the</font>

1323
00:57:45,510 --> 00:57:50,070
<font color="#CCCCCC">explanation behind this is that</font><font color="#E5E5E5"> on</font><font color="#CCCCCC"> the</font>

1324
00:57:47,760 --> 00:57:52,010
link you never have one demand you have

1325
00:57:50,070 --> 00:57:55,170
hundreds or even thousands of<font color="#CCCCCC"> D months</font>

1326
00:57:52,010 --> 00:57:57,000
meaning that<font color="#E5E5E5"> in itself there might be</font>

1327
00:57:55,170 --> 00:58:00,210
inaccurate but the more you add together

1328
00:57:57,000 --> 00:58:02,220
the less the error becomes and if

1329
00:58:00,210 --> 00:58:03,630
traffic fails from one link to an offer

1330
00:58:02,220 --> 00:58:05,939
if there is a link failure in the

1331
00:58:03,630 --> 00:58:07,470
network it's<font color="#E5E5E5"> very likely that a lot of</font>

1332
00:58:05,940 --> 00:58:09,740
traffic which was first<font color="#E5E5E5"> on one</font><font color="#CCCCCC"> linked</font>

1333
00:58:07,470 --> 00:58:11,299
<font color="#CCCCCC">together switches to another backup link</font>

1334
00:58:09,740 --> 00:58:14,149
therefore

1335
00:58:11,300 --> 00:58:17,180
the<font color="#E5E5E5"> Arab states very small this was an</font>

1336
00:58:14,150 --> 00:58:18,530
example<font color="#E5E5E5"> from one tier one provider we've</font>

1337
00:58:17,180 --> 00:58:20,930
done<font color="#E5E5E5"> it on others have seen the same</font>

1338
00:58:18,530 --> 00:58:22,340
<font color="#E5E5E5">thing AT&T</font><font color="#CCCCCC"> has done it and presented</font>

1339
00:58:20,930 --> 00:58:24,319
about it and they came at exactly the

1340
00:58:22,340 --> 00:58:26,560
same conclusion so I think it's quite

1341
00:58:24,320 --> 00:58:31,490
fella to say that this is applicable for

1342
00:58:26,560 --> 00:58:33,320
networks in general then one more note I

1343
00:58:31,490 --> 00:58:35,540
mean if you cannot measure your own

1344
00:58:33,320 --> 00:58:37,190
matrix these estimation methods might

1345
00:58:35,540 --> 00:58:39,890
sound very scary and actually they are

1346
00:58:37,190 --> 00:58:41,930
very scary because you<font color="#E5E5E5"> can never know if</font>

1347
00:58:39,890 --> 00:58:43,819
it's working or not I mean there might

1348
00:58:41,930 --> 00:58:45,290
be especially in your case something

1349
00:58:43,820 --> 00:58:48,920
which makes<font color="#E5E5E5"> it not work and you will</font>

1350
00:58:45,290 --> 00:58:50,660
<font color="#E5E5E5">never find out so I think the real value</font>

1351
00:58:48,920 --> 00:58:52,280
of these estimation methods is actually

1352
00:58:50,660 --> 00:58:55,009
to combine them with measurements if you

1353
00:58:52,280 --> 00:58:57,740
have a large network you might not want

1354
00:58:55,010 --> 00:58:59,090
<font color="#CCCCCC">to deploy net flow</font><font color="#E5E5E5"> Network white because</font>

1355
00:58:57,740 --> 00:59:01,609
it's a lot of resources a lot of

1356
00:58:59,090 --> 00:59:02,960
collecting etc but once you know which

1357
00:59:01,610 --> 00:59:10,130
are the big sites on your network<font color="#CCCCCC"> you</font>

1358
00:59:02,960 --> 00:59:12,440
actually already<font color="#E5E5E5"> know that</font><font color="#CCCCCC"> you could</font>

1359
00:59:10,130 --> 00:59:14,720
measure the big flowers on your network

1360
00:59:12,440 --> 00:59:17,230
and estimate the<font color="#E5E5E5"> rest and what we've</font>

1361
00:59:14,720 --> 00:59:19,910
done here is taken in network again

1362
00:59:17,230 --> 00:59:22,340
average error in the estimation was

1363
00:59:19,910 --> 00:59:24,529
around ten to twelve percent but if we

1364
00:59:22,340 --> 00:59:26,810
<font color="#CCCCCC">only measure one demand the error goes</font>

1365
00:59:24,530 --> 00:59:29,240
down to eight percent if we measure

1366
00:59:26,810 --> 00:59:31,009
another<font color="#E5E5E5"> one the total error goes down to</font>

1367
00:59:29,240 --> 00:59:34,279
five percent excuse you said average

1368
00:59:31,010 --> 00:59:36,460
error we measure another<font color="#E5E5E5"> one etc so with</font>

1369
00:59:34,280 --> 00:59:38,870
only measuring a small set of demands

1370
00:59:36,460 --> 00:59:40,880
the error in the rest of the estimate

1371
00:59:38,870 --> 00:59:42,440
becomes very small and this also comes a

1372
00:59:40,880 --> 00:59:44,120
little<font color="#E5E5E5"> bit back to my earlier comments</font>

1373
00:59:42,440 --> 00:59:46,310
about the 8020 distribution in the

1374
00:59:44,120 --> 00:59:49,730
network so much traffic is between a few

1375
00:59:46,310 --> 00:59:52,400
sides once you know that that traffic

1376
00:59:49,730 --> 00:59:56,720
the rest is kind of fixed and easy to

1377
00:59:52,400 --> 01:00:00,170
estimate so as a summary for the

1378
00:59:56,720 --> 01:00:02,060
estimation these algorithms have<font color="#CCCCCC"> have</font>

1379
01:00:00,170 --> 01:00:04,550
been<font color="#E5E5E5"> published their papers about them</font>

1380
01:00:02,060 --> 01:00:06,830
especially<font color="#E5E5E5"> ATT together with some others</font>

1381
01:00:04,550 --> 01:00:08,630
have published very<font color="#E5E5E5"> nice</font><font color="#CCCCCC"> information on</font>

1382
01:00:06,830 --> 01:00:10,279
this there<font color="#CCCCCC"> are commercial tools and</font>

1383
01:00:08,630 --> 01:00:13,010
really it's<font color="#E5E5E5"> not too hard to implement</font>

1384
01:00:10,280 --> 01:00:16,150
yourself you can do with<font color="#CCCCCC"> MATLAB or</font>

1385
01:00:13,010 --> 01:00:18,710
public domain versions like octave etc

1386
01:00:16,150 --> 01:00:20,330
if you want to play<font color="#E5E5E5"> with it feel free</font><font color="#CCCCCC"> to</font>

1387
01:00:18,710 --> 01:00:23,120
also<font color="#E5E5E5"> drop me an</font><font color="#CCCCCC"> e-mail always be happy</font>

1388
01:00:20,330 --> 01:00:23,920
<font color="#E5E5E5">to help and there are so many deployment</font>

1389
01:00:23,120 --> 01:00:25,779
scenarios

1390
01:00:23,920 --> 01:00:27,460
not just fully estimating a traffic

1391
01:00:25,780 --> 01:00:30,520
metric but especially combining it with

1392
01:00:27,460 --> 01:00:33,250
measurements also<font color="#E5E5E5"> coming back to for</font>

1393
01:00:30,520 --> 01:00:36,060
example juniper<font color="#CCCCCC"> dcu which only had 16</font>

1394
01:00:33,250 --> 01:00:38,950
classes it's a perfect match with a

1395
01:00:36,060 --> 01:00:41,620
destination method you use these<font color="#CCCCCC"> 16</font>

1396
01:00:38,950 --> 01:00:44,379
classes to measure your biggest flows

1397
01:00:41,620 --> 01:00:48,069
you estimate the rest and you keep track

1398
01:00:44,380 --> 01:00:50,200
of the error in the estimate and again

1399
01:00:48,070 --> 01:00:52,950
and our<font color="#E5E5E5"> reference is to the AT&T work if</font>

1400
01:00:50,200 --> 01:00:55,089
you want<font color="#CCCCCC"> to see more of this</font>

1401
01:00:52,950 --> 01:00:56,890
unfortunately<font color="#E5E5E5"> i already</font><font color="#CCCCCC"> am two minutes</font>

1402
01:00:55,090 --> 01:00:59,680
<font color="#CCCCCC">over</font><font color="#E5E5E5"> time so i'm going to skip the case</font>

1403
01:00:56,890 --> 01:01:06,129
that<font color="#E5E5E5"> it's in the slides but i just want</font>

1404
01:00:59,680 --> 01:01:08,620
to<font color="#CCCCCC"> give the summary so the case</font><font color="#E5E5E5"> that he</font>

1405
01:01:06,130 --> 01:01:12,490
actually gives the same validation as i

1406
01:01:08,620 --> 01:01:15,810
showed on the the failure analysis so a

1407
01:01:12,490 --> 01:01:18,970
quick summary<font color="#E5E5E5"> of the whole tutorial</font>

1408
01:01:15,810 --> 01:01:21,520
starting with net flow the traditional

1409
01:01:18,970 --> 01:01:24,129
<font color="#E5E5E5">version 5 which</font><font color="#CCCCCC"> is widely available on</font>

1410
01:01:21,520 --> 01:01:26,140
platforms is not trivial to build a

1411
01:01:24,130 --> 01:01:28,510
traffic matrix form<font color="#E5E5E5"> also it takes a lot</font>

1412
01:01:26,140 --> 01:01:30,940
of resources to process it the next<font color="#CCCCCC"> stop</font>

1413
01:01:28,510 --> 01:01:32,920
<font color="#E5E5E5">aggregation the newer version is really</font>

1414
01:01:30,940 --> 01:01:35,800
nice there still<font color="#CCCCCC"> is a problem with non</font>

1415
01:01:32,920 --> 01:01:37,300
bgp traffic and there are always

1416
01:01:35,800 --> 01:01:38,710
dependencies on having the right

1417
01:01:37,300 --> 01:01:41,910
software and having the right hardware

1418
01:01:38,710 --> 01:01:45,820
but it's a very<font color="#CCCCCC"> good step forward then</font>

1419
01:01:41,910 --> 01:01:48,549
<font color="#CCCCCC">Juniper's dcu and six call btp policy</font>

1420
01:01:45,820 --> 01:01:50,260
accounting are too limited just in

1421
01:01:48,550 --> 01:01:51,760
itself to build<font color="#CCCCCC"> a traffic matrix but</font>

1422
01:01:50,260 --> 01:01:54,160
again<font color="#E5E5E5"> together with the estimation i</font>

1423
01:01:51,760 --> 01:01:56,860
think it's a perfect match because it's

1424
01:01:54,160 --> 01:02:00,670
very simple deployment limited resources

1425
01:01:56,860 --> 01:02:02,320
and gives you very good<font color="#E5E5E5"> visuals then MP</font>

1426
01:02:00,670 --> 01:02:04,420
less traffic matrix well if you have

1427
01:02:02,320 --> 01:02:05,950
rsvp-te your network it's almost a

1428
01:02:04,420 --> 01:02:07,330
trivial thing you can just measure the

1429
01:02:05,950 --> 01:02:11,500
traffic matrix it's the best you can

1430
01:02:07,330 --> 01:02:12,970
ever do if you have<font color="#CCCCCC"> ldp a little bit</font>

1431
01:02:11,500 --> 01:02:15,010
harder you need to<font color="#E5E5E5"> look at the algorithm</font>

1432
01:02:12,970 --> 01:02:16,390
get some more information but also you

1433
01:02:15,010 --> 01:02:17,710
can build your<font color="#E5E5E5"> traffic matrix and</font><font color="#CCCCCC"> i</font>

1434
01:02:16,390 --> 01:02:19,210
would really<font color="#E5E5E5"> suggest that you take a</font>

1435
01:02:17,710 --> 01:02:22,200
look<font color="#E5E5E5"> at the deutsche telekom paper on</font>

1436
01:02:19,210 --> 01:02:25,390
this topic and the estimation techniques

1437
01:02:22,200 --> 01:02:29,290
how they might sound very weird<font color="#E5E5E5"> and</font>

1438
01:02:25,390 --> 01:02:30,970
scary but I think at nano and previous

1439
01:02:29,290 --> 01:02:32,470
presentations have has already been some

1440
01:02:30,970 --> 01:02:34,450
evidence actually enough evidence to

1441
01:02:32,470 --> 01:02:38,640
show that this actually works<font color="#E5E5E5"> and is</font>

1442
01:02:34,450 --> 01:02:42,640
applicable to to various networks

1443
01:02:38,640 --> 01:02:44,049
any questions or if you want help with

1444
01:02:42,640 --> 01:02:47,140
something feel free to drop me<font color="#E5E5E5"> a note</font>

1445
01:02:44,049 --> 01:02:50,288
stay from senator from t-systems you can

1446
01:02:47,140 --> 01:02:54,460
always contact<font color="#E5E5E5"> about the</font><font color="#CCCCCC"> LDP paper and</font>

1447
01:02:50,289 --> 01:02:56,559
I'll to be<font color="#E5E5E5"> method and here are the</font>

1448
01:02:54,460 --> 01:03:01,259
references to some of the things i have

1449
01:02:56,559 --> 01:03:03,609
talked about that concludes the tutorial

1450
01:03:01,259 --> 01:03:08,410
I'm a<font color="#E5E5E5"> little bit over time sorry for</font>

1451
01:03:03,609 --> 01:03:12,400
this if there<font color="#E5E5E5"> are any question I be I'm</font>

1452
01:03:08,410 --> 01:03:21,368
sorry I have 20 minutes left this clock

1453
01:03:12,400 --> 01:03:23,079
is broken ah my god the clock was right

1454
01:03:21,369 --> 01:03:25,569
when I started but<font color="#E5E5E5"> apparently the speed</font>

1455
01:03:23,079 --> 01:03:27,460
<font color="#E5E5E5">back to the case yeah I'm definitely do</font>

1456
01:03:25,569 --> 01:03:28,808
the case study for estimation<font color="#CCCCCC"> okay this</font>

1457
01:03:27,460 --> 01:03:30,069
<font color="#E5E5E5">is very good news I'm sorry for</font><font color="#CCCCCC"> the</font>

1458
01:03:28,809 --> 01:03:32,700
speed up at the end because I got

1459
01:03:30,069 --> 01:03:32,700
worried about

1460
01:03:41,870 --> 01:03:47,060
so the estimation case study by<font color="#E5E5E5"> the way</font>

1461
01:03:44,900 --> 01:03:48,650
this<font color="#CCCCCC"> is a different network than the</font>

1462
01:03:47,060 --> 01:03:52,310
other example I showed so it's another

1463
01:03:48,650 --> 01:03:55,130
independent validation again this<font color="#CCCCCC"> is a</font>

1464
01:03:52,310 --> 01:03:57,200
<font color="#E5E5E5">network where we have we know what the</font>

1465
01:03:55,130 --> 01:03:59,330
traffic matrix is in this case it's<font color="#E5E5E5"> not</font>

1466
01:03:57,200 --> 01:04:08,149
an<font color="#CCCCCC"> rsvp-te</font><font color="#E5E5E5"> network with it's an ldp</font>

1467
01:03:59,330 --> 01:04:09,290
<font color="#E5E5E5">network which uses the method similar to</font>

1468
01:04:08,150 --> 01:04:11,360
<font color="#CCCCCC">deutsche telekom's to measure the</font>

1469
01:04:09,290 --> 01:04:15,259
traffic matrix so we have a nice<font color="#E5E5E5"> network</font>

1470
01:04:11,360 --> 01:04:18,320
77 routers 166 circuits we know what the

1471
01:04:15,260 --> 01:04:22,430
traffic matrix is so what we're<font color="#E5E5E5"> going to</font>

1472
01:04:18,320 --> 01:04:24,140
do here<font color="#CCCCCC"> is not just look at how well the</font>

1473
01:04:22,430 --> 01:04:26,810
estimation itself works we're going to

1474
01:04:24,140 --> 01:04:29,779
look on what we want to do which<font color="#CCCCCC"> is</font>

1475
01:04:26,810 --> 01:04:32,180
actually optimizing the network how well

1476
01:04:29,780 --> 01:04:34,570
that works if we had not known the

1477
01:04:32,180 --> 01:04:37,819
traffic matrix based on the measurements

1478
01:04:34,570 --> 01:04:39,470
so in this case<font color="#CCCCCC"> putted estimation we</font>

1479
01:04:37,820 --> 01:04:44,840
actually use the<font color="#CCCCCC"> demand eviction tool</font>

1480
01:04:39,470 --> 01:04:47,569
which<font color="#CCCCCC"> is from the company I</font><font color="#E5E5E5"> work for so</font>

1481
01:04:44,840 --> 01:04:49,400
the procedure is as follows<font color="#E5E5E5"> we start</font>

1482
01:04:47,570 --> 01:04:52,430
<font color="#E5E5E5">with the network and with the current</font>

1483
01:04:49,400 --> 01:04:54,500
traffic matrix so we call this<font color="#E5E5E5"> plan a</font>

1484
01:04:52,430 --> 01:04:57,410
and it gives you the topology of the

1485
01:04:54,500 --> 01:05:01,100
network the routing and the traffic

1486
01:04:57,410 --> 01:05:03,379
matrix from<font color="#CCCCCC"> ldp we</font><font color="#E5E5E5"> rent to an igp</font>

1487
01:05:01,100 --> 01:05:06,080
simulation so we're<font color="#E5E5E5"> going to look at the</font>

1488
01:05:03,380 --> 01:05:08,000
routing and put the traffic based on the

1489
01:05:06,080 --> 01:05:11,600
traffic matrix on<font color="#CCCCCC"> the links and we know</font>

1490
01:05:08,000 --> 01:05:13,250
what the link utilizations are so from

1491
01:05:11,600 --> 01:05:14,750
knowing the traffic matrix we know what

1492
01:05:13,250 --> 01:05:16,280
the links are and we know<font color="#CCCCCC"> how much</font>

1493
01:05:14,750 --> 01:05:19,840
traffic comes into the network<font color="#E5E5E5"> and</font>

1494
01:05:16,280 --> 01:05:21,320
leaves the network so now we have

1495
01:05:19,840 --> 01:05:24,170
disciplined fun with the known

1496
01:05:21,320 --> 01:05:26,450
information we ignore<font color="#CCCCCC"> the traffic matrix</font>

1497
01:05:24,170 --> 01:05:28,160
and just from<font color="#E5E5E5"> the link loads and from</font>

1498
01:05:26,450 --> 01:05:29,359
the traffic<font color="#E5E5E5"> coming in and out</font><font color="#CCCCCC"> of the</font>

1499
01:05:28,160 --> 01:05:32,149
network we're going to try this

1500
01:05:29,360 --> 01:05:34,550
estimation we run the estimation tool

1501
01:05:32,150 --> 01:05:37,040
and we get another traffic matrix which

1502
01:05:34,550 --> 01:05:39,890
is<font color="#CCCCCC"> the estimated traffic matrix this</font>

1503
01:05:37,040 --> 01:05:41,509
<font color="#CCCCCC">blend we call Plan B so</font><font color="#E5E5E5"> plan B has the</font>

1504
01:05:39,890 --> 01:05:44,960
same route thing but an estimated

1505
01:05:41,510 --> 01:05:47,030
traffic matrix plan a has the measure of

1506
01:05:44,960 --> 01:05:50,090
traffic matrix what we're now going to

1507
01:05:47,030 --> 01:05:54,370
<font color="#E5E5E5">do is an igp metric optimization also on</font>

1508
01:05:50,090 --> 01:05:58,000
this<font color="#E5E5E5"> topic having presentations before</font>

1509
01:05:54,370 --> 01:06:01,480
I think again from<font color="#E5E5E5"> AT&T on how you can</font>

1510
01:05:58,000 --> 01:06:04,240
<font color="#E5E5E5">calculate is a sr ospf metrics in your</font>

1511
01:06:01,480 --> 01:06:06,160
network to get more efficient use<font color="#E5E5E5"> of the</font>

1512
01:06:04,240 --> 01:06:10,740
network so given the same topology and

1513
01:06:06,160 --> 01:06:10,740
the traffic matrix how can you calculate

1514
01:06:12,330 --> 01:06:18,819
ITP metrics which allow you<font color="#E5E5E5"> to grow the</font>

1515
01:06:16,090 --> 01:06:22,120
traffic more than with the current

1516
01:06:18,820 --> 01:06:25,810
metrics so this<font color="#E5E5E5"> is really what this</font>

1517
01:06:22,120 --> 01:06:31,600
provider was planning to do and we're

1518
01:06:25,810 --> 01:06:33,970
now going to use both the estimated and

1519
01:06:31,600 --> 01:06:36,100
measured traffic matrix to do this

1520
01:06:33,970 --> 01:06:38,830
optimization process but in the<font color="#E5E5E5"> end</font>

1521
01:06:36,100 --> 01:06:40,540
we're going to try it with<font color="#E5E5E5"> the actual</font>

1522
01:06:38,830 --> 01:06:42,190
traffic I mean it's easy to do an

1523
01:06:40,540 --> 01:06:44,020
optimization on the estimate and then

1524
01:06:42,190 --> 01:06:45,910
say well it works well but you really

1525
01:06:44,020 --> 01:06:47,500
want to<font color="#E5E5E5"> know how the optimized network</font>

1526
01:06:45,910 --> 01:06:49,299
based on the estimate works with a real

1527
01:06:47,500 --> 01:06:50,980
traffic so we're going<font color="#E5E5E5"> to put</font><font color="#CCCCCC"> a real</font>

1528
01:06:49,300 --> 01:06:54,700
traffic back on the network and<font color="#E5E5E5"> then</font>

1529
01:06:50,980 --> 01:06:56,470
compare the results so starting<font color="#CCCCCC"> with the</font>

1530
01:06:54,700 --> 01:06:58,810
same graph as we've already seen before

1531
01:06:56,470 --> 01:07:00,730
we have measured<font color="#CCCCCC"> demands measure traffic</font>

1532
01:06:58,810 --> 01:07:04,420
matrix and an estimated traffic matrix

1533
01:07:00,730 --> 01:07:07,930
here again exactly the same picture not

1534
01:07:04,420 --> 01:07:09,670
extremely accurate but the system is

1535
01:07:07,930 --> 01:07:11,109
able to actually find which I want are

1536
01:07:09,670 --> 01:07:12,880
the<font color="#CCCCCC"> large d months so when large the</font>

1537
01:07:11,110 --> 01:07:18,520
month is never estimated as very small

1538
01:07:12,880 --> 01:07:20,590
and an inferior version then we do again

1539
01:07:18,520 --> 01:07:22,360
<font color="#E5E5E5">the same thing</font><font color="#CCCCCC"> as I've already</font><font color="#E5E5E5"> shown we</font>

1540
01:07:20,590 --> 01:07:24,400
fill all the links in<font color="#E5E5E5"> the network one by</font>

1541
01:07:22,360 --> 01:07:25,960
one we look at the routing at the

1542
01:07:24,400 --> 01:07:27,850
rewriting look at the resulting link

1543
01:07:25,960 --> 01:07:31,210
utilizations see what the worst case is

1544
01:07:27,850 --> 01:07:33,130
for every link which is very important

1545
01:07:31,210 --> 01:07:37,710
for capacity planning and we compare the

1546
01:07:33,130 --> 01:07:40,120
results and again very<font color="#CCCCCC"> similar results</font>

1547
01:07:37,710 --> 01:07:42,430
both the estimated traffic matrix and

1548
01:07:40,120 --> 01:07:44,380
the measured<font color="#E5E5E5"> traffic matrix show the</font>

1549
01:07:42,430 --> 01:07:47,430
same worst case so for capacity planning

1550
01:07:44,380 --> 01:07:50,650
<font color="#E5E5E5">this already would have been sufficient</font>

1551
01:07:47,430 --> 01:07:52,930
now we<font color="#E5E5E5"> start with</font><font color="#CCCCCC"> the new metric</font>

1552
01:07:50,650 --> 01:07:56,350
optimizations again on the known and

1553
01:07:52,930 --> 01:07:59,339
estimated traffic matrix we run this

1554
01:07:56,350 --> 01:07:59,339
metric optimization

1555
01:08:02,880 --> 01:08:09,099
and we change the network with the new

1556
01:08:05,559 --> 01:08:10,450
metrics get the real traffic again route

1557
01:08:09,099 --> 01:08:14,200
it and see<font color="#E5E5E5"> what the link utilization</font>

1558
01:08:10,450 --> 01:08:15,339
<font color="#E5E5E5">turn now</font><font color="#CCCCCC"> and we're not looking at</font>

1559
01:08:14,200 --> 01:08:16,960
failures we're just looking at the

1560
01:08:15,339 --> 01:08:19,238
normal link utilization so we've changed

1561
01:08:16,960 --> 01:08:21,580
things in the network different things

1562
01:08:19,238 --> 01:08:23,729
<font color="#E5E5E5">because we have worked on different</font>

1563
01:08:21,580 --> 01:08:26,979
traffic matrix and if you compare them

1564
01:08:23,729 --> 01:08:28,988
you see that they're<font color="#E5E5E5"> actually quite big</font>

1565
01:08:26,979 --> 01:08:30,689
changes between the<font color="#E5E5E5"> networks some links</font>

1566
01:08:28,988 --> 01:08:33,009
which have a lot of traffic in one

1567
01:08:30,689 --> 01:08:35,379
optimization for<font color="#E5E5E5"> example based on the</font>

1568
01:08:33,009 --> 01:08:38,710
measurements<font color="#E5E5E5"> have no traffic in the</font>

1569
01:08:35,380 --> 01:08:42,190
optimization or the results in the

1570
01:08:38,710 --> 01:08:43,899
optimization based on the estimate this

1571
01:08:42,189 --> 01:08:45,698
is not necessarily<font color="#CCCCCC"> a problem I mean</font>

1572
01:08:43,899 --> 01:08:46,899
we're just<font color="#E5E5E5"> looking</font><font color="#CCCCCC"> for good routing it</font>

1573
01:08:45,698 --> 01:08:48,939
doesn't need to be exactly the same

1574
01:08:46,899 --> 01:08:52,210
solution we want to know if<font color="#E5E5E5"> it's a good</font>

1575
01:08:48,939 --> 01:08:53,858
<font color="#E5E5E5">solution or not so instead of looking</font>

1576
01:08:52,210 --> 01:08:56,560
just at the links themselves and

1577
01:08:53,859 --> 01:08:58,359
comparing them before and after<font color="#CCCCCC"> the</font>

1578
01:08:56,560 --> 01:09:02,259
optimization or actually between<font color="#E5E5E5"> the two</font>

1579
01:08:58,359 --> 01:09:04,540
optimizations we will<font color="#E5E5E5"> order them so</font>

1580
01:09:02,259 --> 01:09:06,370
instead<font color="#CCCCCC"> of looking / link we take the</font>

1581
01:09:04,540 --> 01:09:07,269
highest link from one network and

1582
01:09:06,370 --> 01:09:09,278
highest link from<font color="#CCCCCC"> the other</font>

1583
01:09:07,270 --> 01:09:12,790
<font color="#E5E5E5">second-highest second highest third</font>

1584
01:09:09,279 --> 01:09:14,170
third etc just to see if the maximum

1585
01:09:12,790 --> 01:09:17,649
link utilization we see in the

1586
01:09:14,170 --> 01:09:19,989
<font color="#E5E5E5">distribution is the same and now you see</font>

1587
01:09:17,649 --> 01:09:22,028
that<font color="#E5E5E5"> they</font><font color="#CCCCCC"> actually match very well so</font>

1588
01:09:19,988 --> 01:09:23,410
we've optimized metrics on the estimate

1589
01:09:22,029 --> 01:09:25,569
we've optimized metrics on the real

1590
01:09:23,410 --> 01:09:27,818
measurement and we<font color="#E5E5E5"> compared the link</font>

1591
01:09:25,569 --> 01:09:29,969
utilizations in the result and<font color="#CCCCCC"> we see</font>

1592
01:09:27,819 --> 01:09:33,009
<font color="#CCCCCC">that the highest link utilization for</font>

1593
01:09:29,969 --> 01:09:34,839
the optimization based on the estimate

1594
01:09:33,009 --> 01:09:37,299
<font color="#E5E5E5">is red and actually is a little bit</font>

1595
01:09:34,839 --> 01:09:38,710
higher than<font color="#E5E5E5"> the one on blue probably</font>

1596
01:09:37,299 --> 01:09:41,560
because of the errors in the estimated

1597
01:09:38,710 --> 01:09:44,649
cetera so not exactly<font color="#CCCCCC"> the</font><font color="#E5E5E5"> same</font><font color="#CCCCCC"> but it's</font>

1598
01:09:41,560 --> 01:09:47,259
not very much of there's no access here

1599
01:09:44,649 --> 01:09:49,660
because i had to anonymize the data but

1600
01:09:47,259 --> 01:09:51,969
if i remember well this was in<font color="#E5E5E5"> the order</font>

1601
01:09:49,660 --> 01:09:57,489
of<font color="#E5E5E5"> four or five percent or something</font>

1602
01:09:51,969 --> 01:09:59,670
like that this was for<font color="#E5E5E5"> the normal link</font>

1603
01:09:57,489 --> 01:10:02,169
utilization<font color="#CCCCCC"> show without any failures</font>

1604
01:09:59,670 --> 01:10:04,060
again we have these two networks with

1605
01:10:02,170 --> 01:10:06,219
different metrics now we're<font color="#E5E5E5"> going to run</font>

1606
01:10:04,060 --> 01:10:08,440
<font color="#CCCCCC">through all</font><font color="#E5E5E5"> the failures and look at the</font>

1607
01:10:06,219 --> 01:10:10,330
<font color="#CCCCCC">worst-case utilization we see based on</font>

1608
01:10:08,440 --> 01:10:14,320
optimized metrics on measurement

1609
01:10:10,330 --> 01:10:15,160
optimized metrics on estimate still same

1610
01:10:14,320 --> 01:10:17,980
picture

1611
01:10:15,160 --> 01:10:19,360
the networks are not exactly the<font color="#CCCCCC"> same so</font>

1612
01:10:17,980 --> 01:10:20,500
<font color="#CCCCCC">the solution of</font><font color="#E5E5E5"> the optimization is</font>

1613
01:10:19,360 --> 01:10:22,509
clearly not the<font color="#E5E5E5"> same for the two</font>

1614
01:10:20,500 --> 01:10:25,120
networks there's a little<font color="#E5E5E5"> bit less</font>

1615
01:10:22,510 --> 01:10:27,280
variation now which<font color="#CCCCCC"> is simply</font><font color="#E5E5E5"> because if</font>

1616
01:10:25,120 --> 01:10:29,860
you look at all the failures if you take

1617
01:10:27,280 --> 01:10:32,110
<font color="#CCCCCC">a link down there are less options to</font>

1618
01:10:29,860 --> 01:10:34,630
route so that's just less options for

1619
01:10:32,110 --> 01:10:37,660
four different 44 difference between the

1620
01:10:34,630 --> 01:10:39,100
two but here again we need<font color="#E5E5E5"> to look at</font>

1621
01:10:37,660 --> 01:10:40,809
<font color="#E5E5E5">the same thing we need to compare them</font>

1622
01:10:39,100 --> 01:10:42,490
that the<font color="#CCCCCC"> networks look at the highest</font>

1623
01:10:40,810 --> 01:10:45,220
links in both networks and the second

1624
01:10:42,490 --> 01:10:47,500
highest and this one is even more

1625
01:10:45,220 --> 01:10:50,020
important<font color="#CCCCCC"> because you really want</font><font color="#E5E5E5"> to</font>

1626
01:10:47,500 --> 01:10:51,640
optimize your network for possible

1627
01:10:50,020 --> 01:10:53,200
failures I mean it's<font color="#CCCCCC"> very easy to find</font>

1628
01:10:51,640 --> 01:10:54,820
good metrics when everything is up and

1629
01:10:53,200 --> 01:10:56,500
running you want to have good metrics

1630
01:10:54,820 --> 01:10:59,650
which also work when a link goes down

1631
01:10:56,500 --> 01:11:01,300
somewhere or rather<font color="#E5E5E5"> cause that and now</font>

1632
01:10:59,650 --> 01:11:03,460
the results are even closer to each

1633
01:11:01,300 --> 01:11:07,210
other so again red is based on the

1634
01:11:03,460 --> 01:11:11,410
estimate<font color="#E5E5E5"> blue is based on the</font>

1635
01:11:07,210 --> 01:11:12,580
measurements and here you see that the

1636
01:11:11,410 --> 01:11:15,280
difference is smaller than in the

1637
01:11:12,580 --> 01:11:19,330
previous one also just that the two

1638
01:11:15,280 --> 01:11:20,950
lines are coinciding very nicely so for

1639
01:11:19,330 --> 01:11:24,130
a<font color="#E5E5E5"> worst case which can happen in the</font>

1640
01:11:20,950 --> 01:11:26,320
network having the traffic matrix

1641
01:11:24,130 --> 01:11:27,910
measured or having it estimated does not

1642
01:11:26,320 --> 01:11:30,370
matter it doesn't give you<font color="#CCCCCC"> the same</font>

1643
01:11:27,910 --> 01:11:31,690
results it might be another link which

1644
01:11:30,370 --> 01:11:34,840
<font color="#CCCCCC">is the highest utilize link in the</font>

1645
01:11:31,690 --> 01:11:38,349
network but the overall utilization is

1646
01:11:34,840 --> 01:11:41,350
not different so I think<font color="#E5E5E5"> this is</font><font color="#CCCCCC"> a very</font>

1647
01:11:38,350 --> 01:11:42,910
important conclusion that it does work

1648
01:11:41,350 --> 01:11:44,440
and that's<font color="#E5E5E5"> what ever you want to do with</font>

1649
01:11:42,910 --> 01:11:46,150
it<font color="#E5E5E5"> like your capacity planning your</font>

1650
01:11:44,440 --> 01:11:48,280
optimization gives you the same results

1651
01:11:46,150 --> 01:11:49,719
and again I cannot stress this often

1652
01:11:48,280 --> 01:11:51,219
enough this is not just coming from us

1653
01:11:49,720 --> 01:11:53,020
this is coming from AT&T<font color="#E5E5E5"> and all those</font>

1654
01:11:51,220 --> 01:11:54,850
who<font color="#E5E5E5"> have shown this as well so I think</font>

1655
01:11:53,020 --> 01:11:57,040
<font color="#E5E5E5">it's a fairly independent validation of</font>

1656
01:11:54,850 --> 01:11:59,020
this technique and it<font color="#CCCCCC"> becomes more</font>

1657
01:11:57,040 --> 01:12:01,720
accurate if you simply combine it with

1658
01:11:59,020 --> 01:12:06,490
wet measurements which don't take a

1659
01:12:01,720 --> 01:12:07,900
whole lot<font color="#E5E5E5"> of resources and that will</font>

1660
01:12:06,490 --> 01:12:13,330
bring<font color="#CCCCCC"> me to</font><font color="#E5E5E5"> the same conclusions I</font>

1661
01:12:07,900 --> 01:12:15,759
already<font color="#E5E5E5"> have talked about and I think</font><font color="#CCCCCC"> I</font>

1662
01:12:13,330 --> 01:12:17,860
covered<font color="#E5E5E5"> though so I don't know the time</font>

1663
01:12:15,760 --> 01:12:20,140
at all now but this brings me at the end

1664
01:12:17,860 --> 01:12:21,610
of the tutorial after any questions I'd

1665
01:12:20,140 --> 01:12:23,470
be happy to talk<font color="#CCCCCC"> about them now and</font>

1666
01:12:21,610 --> 01:12:24,969
again feel free to<font color="#E5E5E5"> get in touch with me</font>

1667
01:12:23,470 --> 01:12:25,280
about any of these topics i'm always

1668
01:12:24,970 --> 01:12:28,429
happy

1669
01:12:25,280 --> 01:12:36,230
to work with you any questions at this

1670
01:12:28,429 --> 01:12:39,520
point<font color="#E5E5E5"> okay well thanks everybody for the</font>

1671
01:12:36,230 --> 01:12:39,519
<font color="#CCCCCC">attention and I'm not</font>

