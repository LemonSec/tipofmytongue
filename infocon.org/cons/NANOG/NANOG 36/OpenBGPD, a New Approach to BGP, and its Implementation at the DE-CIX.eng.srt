1
00:00:00,000 --> 00:00:06,089
yeah hello my<font color="#CCCCCC"> name is Bennett</font><font color="#E5E5E5"> colonel</font>

2
00:00:03,270 --> 00:00:11,250
I'm from<font color="#CCCCCC"> the</font><font color="#E5E5E5"> German internet exchange</font><font color="#CCCCCC"> d6</font>

3
00:00:06,089 --> 00:00:16,039
and<font color="#CCCCCC"> henning bra who's</font><font color="#E5E5E5"> a member of the</font>

4
00:00:11,250 --> 00:00:20,029
<font color="#CCCCCC">team of the open BTW</font><font color="#E5E5E5"> pd programmers and</font>

5
00:00:16,039 --> 00:00:22,619
also involved and open beach openbsd

6
00:00:20,029 --> 00:00:27,230
developments so what we try to do is

7
00:00:22,619 --> 00:00:31,969
<font color="#E5E5E5">just show you what Oh bgp is all about</font>

8
00:00:27,230 --> 00:00:35,899
how it works<font color="#E5E5E5"> basically and one of the</font>

9
00:00:31,969 --> 00:00:40,500
implementations of open BTW<font color="#E5E5E5"> pd is</font>

10
00:00:35,899 --> 00:00:43,530
functional route server at the d6 so

11
00:00:40,500 --> 00:00:45,600
first heading this place will talk about

12
00:00:43,530 --> 00:00:48,180
the technical things and<font color="#CCCCCC"> i will</font><font color="#E5E5E5"> try to</font>

13
00:00:45,600 --> 00:00:55,410
show a little bit what it means in in

14
00:00:48,180 --> 00:00:59,510
practice hello um<font color="#E5E5E5"> I</font><font color="#CCCCCC"> hunting</font><font color="#E5E5E5"> I am started</font>

15
00:00:55,410 --> 00:00:59,510
up me to PT two years<font color="#CCCCCC"> ago after</font>

16
00:00:59,989 --> 00:01:05,069
explanation why actually another

17
00:01:02,070 --> 00:01:07,290
implementation after getting completely

18
00:01:05,069 --> 00:01:11,429
fed up the zipper which we were running

19
00:01:07,290 --> 00:01:13,560
before which got us lots<font color="#E5E5E5"> of bugs that</font>

20
00:01:11,430 --> 00:01:17,220
configuration language be<font color="#E5E5E5"> fat</font>

21
00:01:13,560 --> 00:01:18,420
performance problems and since I<font color="#CCCCCC"> don't</font>

22
00:01:17,220 --> 00:01:22,259
speak Japanese I<font color="#CCCCCC"> have problems</font>

23
00:01:18,420 --> 00:01:24,180
<font color="#CCCCCC">understanding</font><font color="#E5E5E5"> the documentation zebra</font>

24
00:01:22,259 --> 00:01:28,560
makes heavy use of cooperative threats

25
00:01:24,180 --> 00:01:29,759
which leads to its main problem combined

26
00:01:28,560 --> 00:01:32,909
<font color="#E5E5E5">with the central event queue they lose</font>

27
00:01:29,759 --> 00:01:36,119
they can do sessions while busy as a

28
00:01:32,909 --> 00:01:38,549
<font color="#E5E5E5">result of the keeper life events being</font>

29
00:01:36,119 --> 00:01:41,180
weighed down in the<font color="#E5E5E5"> queue and something</font>

30
00:01:38,549 --> 00:01:43,680
else requiring all the<font color="#CCCCCC"> CPU power and</font>

31
00:01:41,180 --> 00:01:45,420
well it just doesn't process the keeper

32
00:01:43,680 --> 00:01:49,920
lives under the<font color="#CCCCCC"> pier resets of the</font>

33
00:01:45,420 --> 00:01:52,590
session the process successors<font color="#CCCCCC"> Kawara</font>

34
00:01:49,920 --> 00:01:54,299
which apparently fix many bugs but still

35
00:01:52,590 --> 00:01:59,490
using the<font color="#E5E5E5"> super design which i think is</font>

36
00:01:54,299 --> 00:02:01,770
wrong so yeah kinda fixable and turning

37
00:01:59,490 --> 00:02:04,169
a diner<font color="#CCCCCC"> UNIX host into a</font><font color="#E5E5E5"> BGP speaker a</font>

38
00:02:01,770 --> 00:02:08,180
<font color="#CCCCCC">BGP router requires very more than just</font>

39
00:02:04,170 --> 00:02:08,180
adding a user land<font color="#E5E5E5"> PGP speaking process</font>

40
00:02:08,660 --> 00:02:13,609
designing our PGP demon<font color="#E5E5E5"> we want three</font>

41
00:02:12,360 --> 00:02:17,010
processes

42
00:02:13,610 --> 00:02:20,459
one session engine that just manages bgp

43
00:02:17,010 --> 00:02:21,959
sessions one process that we call our

44
00:02:20,459 --> 00:02:23,969
out decision engine that actually holds

45
00:02:21,959 --> 00:02:26,450
all the<font color="#E5E5E5"> BGP tables and takes the routing</font>

46
00:02:23,969 --> 00:02:29,159
decisions or best path of selection and

47
00:02:26,450 --> 00:02:30,720
we have a parent process that talks<font color="#E5E5E5"> to</font>

48
00:02:29,159 --> 00:02:35,670
the<font color="#E5E5E5"> colonel and forks</font><font color="#CCCCCC"> the other</font>

49
00:02:30,720 --> 00:02:37,290
processes that's a nice image displaying

50
00:02:35,670 --> 00:02:40,379
how they work<font color="#E5E5E5"> together for stone with</font>

51
00:02:37,290 --> 00:02:44,700
you some time ago you see the master

52
00:02:40,379 --> 00:02:47,399
talking to the colonel<font color="#E5E5E5"> the red lines</font>

53
00:02:44,700 --> 00:02:53,310
indicate the functions that<font color="#E5E5E5"> require root</font>

54
00:02:47,400 --> 00:02:55,769
privileges the session engine maintains

55
00:02:53,310 --> 00:02:57,989
<font color="#E5E5E5">TCP sessions to EGP neighbors and</font>

56
00:02:55,769 --> 00:03:00,870
controls and uncontrolled sessions to

57
00:02:57,989 --> 00:03:04,290
the<font color="#CCCCCC"> bgb control utility once the session</font>

58
00:03:00,870 --> 00:03:06,329
<font color="#E5E5E5">is established it is responsible for</font>

59
00:03:04,290 --> 00:03:07,679
setting sending the keeper lives out and

60
00:03:06,329 --> 00:03:12,000
processing the<font color="#CCCCCC"> keeper dies from the</font>

61
00:03:07,680 --> 00:03:15,480
neighbor and it doesn't<font color="#E5E5E5"> deal with routes</font>

62
00:03:12,000 --> 00:03:17,669
at all update processes update messages

63
00:03:15,480 --> 00:03:19,858
and receives it just passes on to the

64
00:03:17,669 --> 00:03:21,510
right decision<font color="#CCCCCC"> engine and it's typically</font>

65
00:03:19,859 --> 00:03:24,690
very light<font color="#CCCCCC"> latest I'm the</font><font color="#E5E5E5"> one megabyte</font>

66
00:03:21,510 --> 00:03:26,698
of feminine i386 sometimes you see it

67
00:03:24,690 --> 00:03:28,290
getting bigger it's only doing that when

68
00:03:26,699 --> 00:03:32,519
it has<font color="#CCCCCC"> to buffer a lot of events for</font><font color="#E5E5E5"> a</font>

69
00:03:28,290 --> 00:03:34,440
<font color="#CCCCCC">small neighbor it runs on privileged</font>

70
00:03:32,519 --> 00:03:36,030
user which doesn't have any special

71
00:03:34,440 --> 00:03:37,889
provision in the system and change

72
00:03:36,030 --> 00:03:40,650
routes to<font color="#CCCCCC"> a directory</font><font color="#E5E5E5"> of our empty</font>

73
00:03:37,889 --> 00:03:43,979
village as<font color="#CCCCCC"> the name indicates is empty</font>

74
00:03:40,650 --> 00:03:46,019
except<font color="#CCCCCC"> for logging circuits the rough</font>

75
00:03:43,979 --> 00:03:47,909
signal engine maintains the routing

76
00:03:46,019 --> 00:03:51,419
information base means prefix table<font color="#CCCCCC"> as</font>

77
00:03:47,909 --> 00:03:55,590
<font color="#E5E5E5">path table and assorted information the</font>

78
00:03:51,419 --> 00:03:58,290
<font color="#E5E5E5">bgp filters run there it calculates the</font>

79
00:03:55,590 --> 00:04:01,409
best path prefix does the best<font color="#E5E5E5"> option</font>

80
00:03:58,290 --> 00:04:05,870
selection and it generates the update

81
00:04:01,409 --> 00:04:08,790
messages as needed the group itself is

82
00:04:05,870 --> 00:04:12,840
split into many many tables they're

83
00:04:08,790 --> 00:04:15,209
heavily cross-linked the goal<font color="#E5E5E5"> was to</font>

84
00:04:12,840 --> 00:04:17,250
avoid table walks and in fact<font color="#E5E5E5"> we almost</font>

85
00:04:15,209 --> 00:04:18,870
never need cable box when you travel

86
00:04:17,250 --> 00:04:21,779
works when we have<font color="#E5E5E5"> an upir coming up of</font>

87
00:04:18,870 --> 00:04:24,870
course sending in the entire table and

88
00:04:21,779 --> 00:04:27,450
we have cable box when the<font color="#E5E5E5"> BGP control</font>

89
00:04:24,870 --> 00:04:28,740
utility requests the entire table 2

90
00:04:27,450 --> 00:04:33,139
shows well there's no<font color="#CCCCCC"> way around that</font>

91
00:04:28,740 --> 00:04:36,389
obviously otherwise um there's no<font color="#E5E5E5"> TV box</font>

92
00:04:33,139 --> 00:04:38,250
it's very memory efficient these<font color="#E5E5E5"> numbers</font>

93
00:04:36,389 --> 00:04:41,460
are from before we had software conflict

94
00:04:38,250 --> 00:04:43,620
but didn't<font color="#E5E5E5"> get that much worse and you</font>

95
00:04:41,460 --> 00:04:46,320
<font color="#CCCCCC">can</font><font color="#E5E5E5"> still turn so freaking take off so</font>

96
00:04:43,620 --> 00:04:48,830
with that one full view needs to around

97
00:04:46,320 --> 00:04:51,450
20 megabytes of RAM<font color="#CCCCCC"> on i386 again and</font>

98
00:04:48,830 --> 00:04:54,479
<font color="#E5E5E5">two full use just be 25 thing about a</font>

99
00:04:51,450 --> 00:04:55,890
friend this is not even<font color="#E5E5E5"> half of what you</font>

100
00:04:54,480 --> 00:05:01,640
need<font color="#E5E5E5"> with other implementations another</font>

101
00:04:55,890 --> 00:05:04,200
or other<font color="#CCCCCC"> hardware routers it's very fast</font>

102
00:05:01,640 --> 00:05:07,650
it takes<font color="#E5E5E5"> about 10 seconds to load a full</font>

103
00:05:04,200 --> 00:05:09,120
view on a 1 gigahertz<font color="#CCCCCC"> p3 and less than</font>

104
00:05:07,650 --> 00:05:13,560
five seconds to dump the full view to

105
00:05:09,120 --> 00:05:16,200
your peer and just<font color="#E5E5E5"> as the session engine</font>

106
00:05:13,560 --> 00:05:20,300
it runs improved user and changes to<font color="#E5E5E5"> VAR</font>

107
00:05:16,200 --> 00:05:22,530
empty as well the decision<font color="#CCCCCC"> process um</font>

108
00:05:20,300 --> 00:05:25,560
most<font color="#E5E5E5"> of you probably know that we have</font>

109
00:05:22,530 --> 00:05:28,349
two extensions first check<font color="#E5E5E5"> up the prayer</font>

110
00:05:25,560 --> 00:05:29,790
prefixes reachable at all second check

111
00:05:28,350 --> 00:05:32,190
the local preference<font color="#E5E5E5"> bigger is better</font>

112
00:05:29,790 --> 00:05:36,780
third check is path length shorter is

113
00:05:32,190 --> 00:05:39,930
better for check Oregon<font color="#CCCCCC"> 5 move the exit</font>

114
00:05:36,780 --> 00:05:42,510
discriminator which is only<font color="#E5E5E5"> comparable</font>

115
00:05:39,930 --> 00:05:44,760
between the same<font color="#E5E5E5"> neighboring is but we</font>

116
00:05:42,510 --> 00:05:47,729
have enough to always compare it if you

117
00:05:44,760 --> 00:05:51,599
need<font color="#CCCCCC"> that six ebgp is cooler and then</font>

118
00:05:47,729 --> 00:05:57,229
it's one of our extensions<font color="#E5E5E5"> Bates which</font>

119
00:05:51,600 --> 00:06:00,300
is used to force traffic to your

120
00:05:57,229 --> 00:06:05,010
preferred uplink made cheaper<font color="#CCCCCC"> of us or</font>

121
00:06:00,300 --> 00:06:08,400
whatever<font color="#E5E5E5"> it's well I go on to that on</font>

122
00:06:05,010 --> 00:06:10,469
the next slide 8 is a route<font color="#E5E5E5"> H which you</font>

123
00:06:08,400 --> 00:06:12,479
can evaluate and this is disabled by

124
00:06:10,470 --> 00:06:14,390
default this means that all<font color="#CCCCCC"> the routes</font>

125
00:06:12,479 --> 00:06:17,880
get preference and older odds are

126
00:06:14,390 --> 00:06:20,010
necessarily the more stable ones and the

127
00:06:17,880 --> 00:06:22,669
last two ones are only there to make

128
00:06:20,010 --> 00:06:27,390
<font color="#CCCCCC">sure that there's always a winner and</font>

129
00:06:22,669 --> 00:06:31,630
that the slowest bgp ID and last those

130
00:06:27,390 --> 00:06:34,930
pure address the waves

131
00:06:31,630 --> 00:06:36,640
you can have a lot more more often you

132
00:06:34,930 --> 00:06:37,870
see equally long is practice from the

133
00:06:36,640 --> 00:06:40,479
uplinks because they're all the same

134
00:06:37,870 --> 00:06:41,710
exchange points and for traffic

135
00:06:40,480 --> 00:06:43,980
engineering you of course want the

136
00:06:41,710 --> 00:06:46,150
possibility to express a preference and

137
00:06:43,980 --> 00:06:47,890
yeah<font color="#E5E5E5"> that's not local proof because</font>

138
00:06:46,150 --> 00:06:52,150
local<font color="#E5E5E5"> prep comes before the yes path</font>

139
00:06:47,890 --> 00:06:54,190
length check and so we added weight we

140
00:06:52,150 --> 00:06:58,359
know that it somewhat clashes would be

141
00:06:54,190 --> 00:06:59,680
weighed that other implementers use he

142
00:06:58,360 --> 00:07:01,210
unfortunately couldn't get up the better

143
00:06:59,680 --> 00:07:03,220
keyboard and we were asking people to

144
00:07:01,210 --> 00:07:06,010
tell us the better keyword and nobody

145
00:07:03,220 --> 00:07:10,470
came<font color="#CCCCCC"> up with anything so that's what it</font>

146
00:07:06,010 --> 00:07:13,030
<font color="#CCCCCC">is now looking at the pairing process</font>

147
00:07:10,470 --> 00:07:15,580
the parent process is responsible for

148
00:07:13,030 --> 00:07:19,119
getting the routes into<font color="#E5E5E5"> the kernel it</font>

149
00:07:15,580 --> 00:07:22,409
does the next<font color="#E5E5E5"> validation it maintains</font>

150
00:07:19,120 --> 00:07:25,270
<font color="#CCCCCC">its own copy of the corner routing table</font>

151
00:07:22,410 --> 00:07:27,520
for that it has to fetch the<font color="#E5E5E5"> turnaround</font>

152
00:07:25,270 --> 00:07:30,729
table and the interface list at startup

153
00:07:27,520 --> 00:07:32,680
and<font color="#E5E5E5"> this is at the routing socket</font>

154
00:07:30,730 --> 00:07:37,180
they're all changes to the colonel

155
00:07:32,680 --> 00:07:42,130
<font color="#E5E5E5">routing table show up as messages to</font>

156
00:07:37,180 --> 00:07:46,840
keep the internal view in sync and that

157
00:07:42,130 --> 00:07:48,460
means or the way we<font color="#E5E5E5"> coded it this means</font>

158
00:07:46,840 --> 00:07:51,729
that if you<font color="#E5E5E5"> filled with the routing</font>

159
00:07:48,460 --> 00:07:53,680
table manually we do notice that and

160
00:07:51,730 --> 00:07:57,430
cope that instead of overwriting your

161
00:07:53,680 --> 00:07:59,440
manual changes and we also have an

162
00:07:57,430 --> 00:08:01,270
internal list of interfaces and their

163
00:07:59,440 --> 00:08:04,840
status and let us keep kept in sync with

164
00:08:01,270 --> 00:08:07,630
the colonel<font color="#E5E5E5"> isabel we do know about the</font>

165
00:08:04,840 --> 00:08:09,609
interface links tails it's often<font color="#E5E5E5"> said to</font>

166
00:08:07,630 --> 00:08:11,050
be almost impossible in<font color="#CCCCCC"> UNIX to get</font><font color="#E5E5E5"> a</font>

167
00:08:09,610 --> 00:08:14,380
link state actually it's not<font color="#CCCCCC"> that hard</font>

168
00:08:11,050 --> 00:08:16,240
and we<font color="#E5E5E5"> used that for next verification</font>

169
00:08:14,380 --> 00:08:18,850
an interface which doesn't have a cable

170
00:08:16,240 --> 00:08:22,870
plugged in apparently doesn't lead to

171
00:08:18,850 --> 00:08:24,760
usable next up and actually yes that

172
00:08:22,870 --> 00:08:28,960
means we notice when you pull<font color="#CCCCCC"> the cable</font>

173
00:08:24,760 --> 00:08:31,060
and quickly invalidate the next time we

174
00:08:28,960 --> 00:08:34,510
do<font color="#CCCCCC"> not need periodic next top table</font>

175
00:08:31,060 --> 00:08:38,559
works at all like<font color="#CCCCCC"> a big vendor and</font>

176
00:08:34,510 --> 00:08:41,500
<font color="#E5E5E5">zebras do which means</font><font color="#CCCCCC"> that we're a much</font>

177
00:08:38,559 --> 00:08:42,880
faster to interface state changes there

178
00:08:41,500 --> 00:08:46,650
is an app to 30<font color="#CCCCCC"> seconds</font>

179
00:08:42,880 --> 00:08:53,140
lay in cisco routers and<font color="#E5E5E5"> super</font>

180
00:08:46,650 --> 00:08:55,780
installations the internal<font color="#E5E5E5"> view of the</font>

181
00:08:53,140 --> 00:08:58,900
colonel routing table can be coupled and

182
00:08:55,780 --> 00:09:00,550
decoupled from the<font color="#E5E5E5"> colonel this</font>

183
00:08:58,900 --> 00:09:02,260
originally was a debugging feature

184
00:09:00,550 --> 00:09:04,089
because we had a problem<font color="#E5E5E5"> with</font><font color="#CCCCCC"> one of I</font>

185
00:09:02,260 --> 00:09:05,950
one of<font color="#CCCCCC"> my test machines very didn't have</font>

186
00:09:04,090 --> 00:09:11,230
enough memory but it turned out<font color="#CCCCCC"> to be</font>

187
00:09:05,950 --> 00:09:13,570
very useful it's really damn fast with

188
00:09:11,230 --> 00:09:18,190
<font color="#E5E5E5">the full table takes less than three</font>

189
00:09:13,570 --> 00:09:20,530
seconds on<font color="#E5E5E5"> a p3 750 and the parent</font>

190
00:09:18,190 --> 00:09:24,780
process totally needs about<font color="#CCCCCC"> 6627</font>

191
00:09:20,530 --> 00:09:24,780
megabytes in full view configurations

192
00:09:25,980 --> 00:09:31,780
<font color="#CCCCCC">TCP md5 signatures these positions are</font>

193
00:09:30,370 --> 00:09:36,970
not really authenticated as we all know

194
00:09:31,780 --> 00:09:39,640
so we<font color="#CCCCCC"> implemented TCP md5 signatures as</font>

195
00:09:36,970 --> 00:09:43,180
security association in the ipsec

196
00:09:39,640 --> 00:09:45,189
framework because they they<font color="#CCCCCC"> are really</font>

197
00:09:43,180 --> 00:09:49,089
<font color="#E5E5E5">just</font><font color="#CCCCCC"> the special form of ipsec</font>

198
00:09:45,190 --> 00:09:52,150
authenticated header that<font color="#CCCCCC"> means</font><font color="#E5E5E5"> that i</font>

199
00:09:49,090 --> 00:09:54,940
had to code a pfg interface in BGP d

200
00:09:52,150 --> 00:09:59,770
which was really<font color="#E5E5E5"> not fun to interact</font>

201
00:09:54,940 --> 00:10:02,260
with<font color="#E5E5E5"> the ipsec framework</font><font color="#CCCCCC"> TCP md5</font>

202
00:09:59,770 --> 00:10:04,720
signatures are not<font color="#CCCCCC"> a new attack vector</font>

203
00:10:02,260 --> 00:10:07,660
there's people spreading that it's

204
00:10:04,720 --> 00:10:10,390
pretty<font color="#E5E5E5"> much flat the course by the time</font>

205
00:10:07,660 --> 00:10:13,569
you hit the<font color="#CCCCCC"> TCP md5 code you already</font>

206
00:10:10,390 --> 00:10:16,240
have to hit the sequence number the port

207
00:10:13,570 --> 00:10:18,790
numbers the right addresses the chances

208
00:10:16,240 --> 00:10:22,660
<font color="#CCCCCC">to hit that I really low and even then</font>

209
00:10:18,790 --> 00:10:26,079
md5 is really really really cheap so the

210
00:10:22,660 --> 00:10:28,420
conclusion from that is its kind<font color="#E5E5E5"> of weak</font>

211
00:10:26,080 --> 00:10:30,820
but<font color="#E5E5E5"> it's extremely easy to configure it</font>

212
00:10:28,420 --> 00:10:37,150
works with almost anything out there so

213
00:10:30,820 --> 00:10:40,960
go ahead<font color="#E5E5E5"> and use it IP slick since we</font>

214
00:10:37,150 --> 00:10:45,640
<font color="#E5E5E5">have the</font><font color="#CCCCCC"> pfp interface already it was</font>

215
00:10:40,960 --> 00:10:48,730
not too hard to do real IP SEC and that

216
00:10:45,640 --> 00:10:50,360
Beach PD loads the security associations

217
00:10:48,730 --> 00:10:53,480
in<font color="#E5E5E5"> the kernel</font><font color="#CCCCCC"> which is</font><font color="#E5E5E5"> kinda</font>

218
00:10:50,360 --> 00:11:01,310
keys and it sets up the flows which

219
00:10:53,480 --> 00:11:04,730
kinda is the routes for ipsec juniper

220
00:11:01,310 --> 00:11:08,089
can do static<font color="#E5E5E5"> keyed ipsec as well and</font><font color="#CCCCCC"> we</font>

221
00:11:04,730 --> 00:11:09,740
<font color="#CCCCCC">are compatible with</font><font color="#E5E5E5"> that as far as</font><font color="#CCCCCC"> I</font>

222
00:11:08,089 --> 00:11:11,630
know Cisco Kenneth there might be some

223
00:11:09,740 --> 00:11:16,850
extra feature set that<font color="#E5E5E5"> you can pay extra</font>

224
00:11:11,630 --> 00:11:21,079
for edges still no and instead of<font color="#E5E5E5"> doing</font>

225
00:11:16,850 --> 00:11:22,940
static keying we also can use Isaac IMPD

226
00:11:21,079 --> 00:11:25,160
to do the<font color="#CCCCCC"> King for us which also means</font>

227
00:11:22,940 --> 00:11:31,070
<font color="#E5E5E5">that the keys are changed on a regular</font>

228
00:11:25,160 --> 00:11:33,170
basis with<font color="#CCCCCC"> that bgp d asks the</font><font color="#E5E5E5"> kernel</font>

229
00:11:31,070 --> 00:11:37,480
for an unused pair of SP<font color="#E5E5E5"> is which are</font>

230
00:11:33,170 --> 00:11:40,339
some kind of identifiers and use them at

231
00:11:37,480 --> 00:11:42,680
BG<font color="#CCCCCC"> PD loads the flows into the kernel</font>

232
00:11:40,339 --> 00:11:45,110
its usual drama<font color="#CCCCCC"> Isaac MPD but in this</font>

233
00:11:42,680 --> 00:11:49,790
case<font color="#CCCCCC"> which apt</font><font color="#E5E5E5"> dude because it already</font>

234
00:11:45,110 --> 00:11:51,890
knows the endpoints naturally that means

235
00:11:49,790 --> 00:11:54,980
that<font color="#CCCCCC"> Isaac ampd only needs to handle</font><font color="#E5E5E5"> the</font>

236
00:11:51,890 --> 00:11:57,170
keying and that means<font color="#E5E5E5"> that Isaac ampd</font>

237
00:11:54,980 --> 00:11:59,540
needs<font color="#E5E5E5"> almost no configuration and all of</font>

238
00:11:57,170 --> 00:12:04,310
those who ever had<font color="#CCCCCC"> to write an essay in</font>

239
00:11:59,540 --> 00:12:06,589
theory config file value that here's the

240
00:12:04,310 --> 00:12:07,910
<font color="#E5E5E5">complete how to copy the key files which</font>

241
00:12:06,589 --> 00:12:11,240
are generated on the first boot on

242
00:12:07,910 --> 00:12:17,569
openbsd works over to your peer run I

243
00:12:11,240 --> 00:12:20,690
second pd minus ka and you're done the

244
00:12:17,570 --> 00:12:23,209
integration of our packet filter the<font color="#CCCCCC"> BGP</font>

245
00:12:20,690 --> 00:12:25,579
protocol is an efficient<font color="#CCCCCC"> way to</font>

246
00:12:23,209 --> 00:12:28,489
distribute lists of network prefixes

247
00:12:25,579 --> 00:12:30,380
it's not necessarily routes so the

248
00:12:28,490 --> 00:12:35,209
integrated bgp do<font color="#E5E5E5"> to our packet filter</font>

249
00:12:30,380 --> 00:12:39,079
and the<font color="#CCCCCC"> bgp demon can add prefixes learn</font>

250
00:12:35,209 --> 00:12:40,969
from its neighbors into PF table the

251
00:12:39,079 --> 00:12:43,670
prefixes to add your table or select it

252
00:12:40,970 --> 00:12:45,980
using the filter language and the tables

253
00:12:43,670 --> 00:12:48,229
<font color="#CCCCCC">in pf use the radix tree which is</font><font color="#E5E5E5"> the</font>

254
00:12:45,980 --> 00:12:51,110
same code used by the corner on tables

255
00:12:48,230 --> 00:12:55,699
and that is very<font color="#E5E5E5"> fast</font><font color="#CCCCCC"> with a lot of</font>

256
00:12:51,110 --> 00:12:59,120
entries in turn<font color="#CCCCCC"> TF tables can be used</font>

257
00:12:55,699 --> 00:13:01,599
pretty much for everything you can do

258
00:12:59,120 --> 00:13:05,120
packet filtering based on that

259
00:13:01,600 --> 00:13:08,030
you can redirect packets for example to

260
00:13:05,120 --> 00:13:11,180
our user<font color="#E5E5E5"> line spam demon or spam</font>

261
00:13:08,030 --> 00:13:13,490
fighting<font color="#E5E5E5"> people which in turn means that</font>

262
00:13:11,180 --> 00:13:15,410
you're using<font color="#CCCCCC"> BGP distributed spam</font>

263
00:13:13,490 --> 00:13:19,250
blacklist instead of using the<font color="#E5E5E5"> stupid</font>

264
00:13:15,410 --> 00:13:22,750
<font color="#E5E5E5">DNS based approach or that's really neat</font>

265
00:13:19,250 --> 00:13:27,170
you can<font color="#E5E5E5"> do what your service processing</font>

266
00:13:22,750 --> 00:13:30,170
there's also read labels Beach PD can

267
00:13:27,170 --> 00:13:32,810
attach labels to routes<font color="#CCCCCC"> using</font><font color="#E5E5E5"> the filter</font>

268
00:13:30,170 --> 00:13:36,140
label filter language labels are

269
00:13:32,810 --> 00:13:37,849
basically just 32 bytes of free text

270
00:13:36,140 --> 00:13:39,140
information that can<font color="#CCCCCC"> be attached to</font><font color="#E5E5E5"> the</font>

271
00:13:37,850 --> 00:13:42,770
router a stored with the road in the

272
00:13:39,140 --> 00:13:44,300
chrono routing table and well they're

273
00:13:42,770 --> 00:13:47,329
not store directly but we<font color="#CCCCCC"> care for the</font>

274
00:13:44,300 --> 00:13:50,089
implementation detail there's<font color="#E5E5E5"> a sample</font>

275
00:13:47,330 --> 00:13:56,930
output we see a route that has a label

276
00:13:50,090 --> 00:13:59,960
set the label foo of course then PF

277
00:13:56,930 --> 00:14:02,479
computer based on those labels which

278
00:13:59,960 --> 00:14:04,370
means you can write rules like pass in

279
00:14:02,480 --> 00:14:08,240
on some interface from route with the

280
00:14:04,370 --> 00:14:11,270
label foo give state but um it's<font color="#E5E5E5"> not</font>

281
00:14:08,240 --> 00:14:12,410
very interesting<font color="#E5E5E5"> to use PF to classify</font>

282
00:14:11,270 --> 00:14:14,840
traffic for quality of service

283
00:14:12,410 --> 00:14:18,290
processing<font color="#CCCCCC"> on it or stuff like that so</font>

284
00:14:14,840 --> 00:14:20,120
this example you pick<font color="#E5E5E5"> all routes being</font>

285
00:14:18,290 --> 00:14:24,140
tagged with the label<font color="#E5E5E5"> mci and put them</font>

286
00:14:20,120 --> 00:14:25,580
to<font color="#CCCCCC"> q coil really slow your help does can</font>

287
00:14:24,140 --> 00:14:27,140
finally tell your customers that you

288
00:14:25,580 --> 00:14:28,970
always<font color="#E5E5E5"> told</font><font color="#CCCCCC"> the nmci is slow and you</font>

289
00:14:27,140 --> 00:14:32,960
don't need to<font color="#E5E5E5"> mention that you</font><font color="#CCCCCC"> played</font>

290
00:14:28,970 --> 00:14:34,640
part of that combining you to the

291
00:14:32,960 --> 00:14:37,520
information<font color="#CCCCCC"> the PF capabilities is</font>

292
00:14:34,640 --> 00:14:40,040
really very powerful you<font color="#CCCCCC"> can limit</font><font color="#E5E5E5"> state</font>

293
00:14:37,520 --> 00:14:42,290
resources depending on the source is so

294
00:14:40,040 --> 00:14:43,849
you have your broadband is pleased for

295
00:14:42,290 --> 00:14:47,719
you know the rules the text of sitting

296
00:14:43,850 --> 00:14:51,230
and limit the connections to 10 / IP

297
00:14:47,720 --> 00:14:53,660
address or something<font color="#CCCCCC"> like that and you</font>

298
00:14:51,230 --> 00:14:59,420
can also<font color="#E5E5E5"> use the maximum source</font>

299
00:14:53,660 --> 00:15:01,459
connection rate features in pf that have

300
00:14:59,420 --> 00:15:06,130
fighting<font color="#CCCCCC"> d doses and finally you can do</font>

301
00:15:01,460 --> 00:15:11,270
that based on the origin AS members

302
00:15:06,130 --> 00:15:13,070
integration of carp carp is the common

303
00:15:11,270 --> 00:15:14,870
address redundancy protocol which allows

304
00:15:13,070 --> 00:15:17,780
to share an IP address<font color="#E5E5E5"> in the master</font>

305
00:15:14,870 --> 00:15:21,800
backup scenario it's much like<font color="#CCCCCC"> VRP but</font>

306
00:15:17,780 --> 00:15:23,329
unencumbered from patent stuff and it's

307
00:15:21,800 --> 00:15:26,959
<font color="#CCCCCC">actually better because properly</font>

308
00:15:23,330 --> 00:15:29,570
authenticated it's faster a typical case

309
00:15:26,960 --> 00:15:31,940
is exchange point where you have<font color="#E5E5E5"> one epi</font>

310
00:15:29,570 --> 00:15:33,920
in the exchange /<font color="#E5E5E5"> network and yeah what</font>

311
00:15:31,940 --> 00:15:36,830
about<font color="#E5E5E5"> using two boxes they're having the</font>

312
00:15:33,920 --> 00:15:39,170
Epirus shared using carp that works

313
00:15:36,830 --> 00:15:42,890
without special support from<font color="#CCCCCC"> bgp d but</font>

314
00:15:39,170 --> 00:15:44,750
yeah we can do<font color="#E5E5E5"> better if we make me</font><font color="#CCCCCC"> gpd</font>

315
00:15:42,890 --> 00:15:47,870
aware of the power<font color="#CCCCCC"> of master and back</font>

316
00:15:44,750 --> 00:15:51,530
upstate we can force sessions that

317
00:15:47,870 --> 00:15:53,090
depend on<font color="#E5E5E5"> this carp interface we force</font>

318
00:15:51,530 --> 00:15:55,370
them in state idol so they don't even

319
00:15:53,090 --> 00:15:58,460
<font color="#E5E5E5">try to connect as long as as we are not</font>

320
00:15:55,370 --> 00:16:02,660
<font color="#E5E5E5">master the very same moment we become</font>

321
00:15:58,460 --> 00:16:04,250
master the carp interface yeah<font color="#CCCCCC"> we get it</font>

322
00:16:02,660 --> 00:16:05,870
we<font color="#CCCCCC"> get</font><font color="#E5E5E5"> notified about that and all</font>

323
00:16:04,250 --> 00:16:07,190
sessions depending on the corp interface

324
00:16:05,870 --> 00:16:10,160
immediately try<font color="#E5E5E5"> to connect to the</font>

325
00:16:07,190 --> 00:16:15,590
neighbor which in turn leads<font color="#E5E5E5"> to way</font>

326
00:16:10,160 --> 00:16:20,150
faster if a hit over music support yes

327
00:16:15,590 --> 00:16:22,040
there now I physics transferred actually

328
00:16:20,150 --> 00:16:23,689
has<font color="#CCCCCC"> been there for quite some time a</font>

329
00:16:22,040 --> 00:16:27,439
hectare at a conference<font color="#CCCCCC"> in</font><font color="#E5E5E5"> Canada when I</font>

330
00:16:23,690 --> 00:16:30,020
was got bored in the talk the author

331
00:16:27,440 --> 00:16:33,740
physics group is there since mid last

332
00:16:30,020 --> 00:16:35,090
year and well there's not much to say

333
00:16:33,740 --> 00:16:37,970
about<font color="#E5E5E5"> that because almost everything</font>

334
00:16:35,090 --> 00:16:40,190
just works like it does for before lots

335
00:16:37,970 --> 00:16:43,700
of testing needed<font color="#E5E5E5"> but so far it</font><font color="#CCCCCC"> doesn't</font>

336
00:16:40,190 --> 00:16:46,460
look bad<font color="#E5E5E5"> on let's get over the</font>

337
00:16:43,700 --> 00:16:48,740
configuration the config file is split

338
00:16:46,460 --> 00:16:50,480
into five sections we have macro

339
00:16:48,740 --> 00:16:53,840
definitions just like in pf not

340
00:16:50,480 --> 00:16:56,750
surprised same code we have global

341
00:16:53,840 --> 00:17:01,580
settings networks to announce neighbor

342
00:16:56,750 --> 00:17:03,230
definitions and features this is an

343
00:17:01,580 --> 00:17:05,209
<font color="#E5E5E5">example they receive some macros defined</font>

344
00:17:03,230 --> 00:17:07,640
on<font color="#E5E5E5"> the top then you have the global</font>

345
00:17:05,209 --> 00:17:10,240
configuration the only mandatory global

346
00:17:07,640 --> 00:17:13,070
configuration is your own a s number and

347
00:17:10,240 --> 00:17:15,200
router idea figures out on its own the

348
00:17:13,069 --> 00:17:17,260
listen errors figures on its own hold

349
00:17:15,200 --> 00:17:20,439
times they're sensible defaults and

350
00:17:17,260 --> 00:17:22,119
<font color="#CCCCCC">fifth update yes or no means</font>

351
00:17:20,439 --> 00:17:25,049
whether it starts with the corner

352
00:17:22,119 --> 00:17:27,518
rocking to have a couplet or not and

353
00:17:25,049 --> 00:17:32,230
finally there's the network's you want

354
00:17:27,519 --> 00:17:35,259
to announce neighbor definition neighbor

355
00:17:32,230 --> 00:17:37,059
ip-address and in curly braces you have

356
00:17:35,259 --> 00:17:41,049
the remote is description and stuff like

357
00:17:37,059 --> 00:17:44,769
that you already see TCP md5 configured

358
00:17:41,049 --> 00:17:46,418
here it's really very easy<font color="#E5E5E5"> and the last</font>

359
00:17:44,769 --> 00:17:49,149
setting you see the announced<font color="#CCCCCC"> keyword</font>

360
00:17:46,419 --> 00:17:50,799
which can save a<font color="#E5E5E5"> lot of work has four</font>

361
00:17:49,149 --> 00:17:53,889
options it's none don't announce

362
00:17:50,799 --> 00:17:56,049
anything self<font color="#E5E5E5"> announced all your own</font>

363
00:17:53,889 --> 00:17:58,120
networks all you notes<font color="#E5E5E5"> everything or</font>

364
00:17:56,049 --> 00:18:00,850
default route just<font color="#CCCCCC"> Atlanta default route</font>

365
00:17:58,120 --> 00:18:02,229
and nothing else many other

366
00:18:00,850 --> 00:18:04,830
implementations which features<font color="#CCCCCC"> with that</font>

367
00:18:02,230 --> 00:18:07,899
he is just<font color="#E5E5E5"> one configuration setting</font>

368
00:18:04,830 --> 00:18:09,519
neighbors can be grouped members of the

369
00:18:07,899 --> 00:18:15,039
group just inherit the settings from<font color="#E5E5E5"> the</font>

370
00:18:09,519 --> 00:18:19,120
group their temp templates with the

371
00:18:15,039 --> 00:18:22,600
neighbor address is it contains<font color="#E5E5E5"> an ad</font>

372
00:18:19,120 --> 00:18:25,029
mask you just accept every connection

373
00:18:22,600 --> 00:18:30,100
<font color="#E5E5E5">from every host that matches that prefix</font>

374
00:18:25,029 --> 00:18:32,110
<font color="#E5E5E5">that mask specification and the inherit</font>

375
00:18:30,100 --> 00:18:34,719
the remote is number from the open

376
00:18:32,110 --> 00:18:38,678
message then and cloned this neighbor

377
00:18:34,720 --> 00:18:40,480
definition when the session drops we

378
00:18:38,679 --> 00:18:42,580
keep it<font color="#CCCCCC"> closed for a while and remove</font><font color="#E5E5E5"> it</font>

379
00:18:40,480 --> 00:18:44,730
later so we can still<font color="#E5E5E5"> do flap</font>

380
00:18:42,580 --> 00:18:48,370
suppression this is nice for

381
00:18:44,730 --> 00:18:50,340
redistributed<font color="#E5E5E5"> bo drones or black lists</font>

382
00:18:48,370 --> 00:18:53,080
<font color="#E5E5E5">or something like that so</font><font color="#CCCCCC"> we just define</font>

383
00:18:50,340 --> 00:18:54,039
your whole router network and don't need

384
00:18:53,080 --> 00:18:59,678
<font color="#E5E5E5">to configure all the routers</font>

385
00:18:54,039 --> 00:19:03,908
individually here's an example for ipsec

386
00:18:59,679 --> 00:19:06,159
with a static keying long<font color="#E5E5E5"> Keith Urban</font>

387
00:19:03,909 --> 00:19:08,799
unhandy of course which directly leads

388
00:19:06,159 --> 00:19:12,940
to the next slide showing the same using

389
00:19:08,799 --> 00:19:14,799
Ike getting us dynamic<font color="#CCCCCC"> key and showing</font>

390
00:19:12,940 --> 00:19:17,259
how simple a<font color="#CCCCCC"> piece of configuration</font>

391
00:19:14,799 --> 00:19:20,460
really years with<font color="#CCCCCC"> the open bgp it just</font>

392
00:19:17,259 --> 00:19:22,659
put IPSec ESP<font color="#CCCCCC"> Ike or a visa kha</font>

393
00:19:20,460 --> 00:19:26,909
authenticated header Ike and you're done

394
00:19:22,659 --> 00:19:26,909
just have<font color="#E5E5E5"> to start a second pd with it</font>

395
00:19:27,800 --> 00:19:32,810
filter language that's where most

396
00:19:30,710 --> 00:19:37,040
development work goes to currently<font color="#E5E5E5"> to</font>

397
00:19:32,810 --> 00:19:40,790
further improve it it's a bit model

398
00:19:37,040 --> 00:19:46,610
after PF should be reasonably easy to

399
00:19:40,790 --> 00:19:48,230
follow shown here<font color="#E5E5E5"> is the big features we</font>

400
00:19:46,610 --> 00:19:51,469
have<font color="#CCCCCC"> in</font><font color="#E5E5E5"> our default configuration of the</font>

401
00:19:48,230 --> 00:19:53,870
uShip with<font color="#E5E5E5"> openpgp d the food language</font>

402
00:19:51,470 --> 00:19:56,060
is last match the last few<font color="#E5E5E5"> matches rule</font>

403
00:19:53,870 --> 00:19:58,729
has three parts action which is allowing

404
00:19:56,060 --> 00:20:01,790
<font color="#CCCCCC">I or match match doesn't change the law</font>

405
00:19:58,730 --> 00:20:03,440
or the United State the match part that

406
00:20:01,790 --> 00:20:05,930
you can match based on prefix prefix

407
00:20:03,440 --> 00:20:08,960
length or parts or<font color="#CCCCCC"> the entire a s path</font>

408
00:20:05,930 --> 00:20:10,910
and set where you can add prevents

409
00:20:08,960 --> 00:20:16,370
modify the local preference the metric

410
00:20:10,910 --> 00:20:20,960
sign of PF table label et cetera there's

411
00:20:16,370 --> 00:20:22,909
the<font color="#CCCCCC"> BGP control client program which</font>

412
00:20:20,960 --> 00:20:25,220
connects to Beach PD using the using a

413
00:20:22,910 --> 00:20:26,870
<font color="#E5E5E5">UNIX domain socket which get very</font>

414
00:20:25,220 --> 00:20:29,090
runtime information cause the

415
00:20:26,870 --> 00:20:30,770
configuration reload couple and<font color="#E5E5E5"> D cup of</font>

416
00:20:29,090 --> 00:20:34,879
the corner routing table take specific

417
00:20:30,770 --> 00:20:37,060
sessions up down here's an example from

418
00:20:34,880 --> 00:20:42,530
<font color="#E5E5E5">one of my production routers showing</font>

419
00:20:37,060 --> 00:20:47,510
overview many of you for many<font color="#E5E5E5"> of you</font>

420
00:20:42,530 --> 00:20:50,420
this should look familiar here's a years

421
00:20:47,510 --> 00:20:54,470
of you at the<font color="#E5E5E5"> crown</font><font color="#CCCCCC"> rocking table for</font>

422
00:20:50,420 --> 00:20:57,410
<font color="#E5E5E5">only connected static routes here's a</font>

423
00:20:54,470 --> 00:21:00,890
view to a specific neighbor should look

424
00:20:57,410 --> 00:21:05,800
familiar to you can actually<font color="#CCCCCC"> look at</font><font color="#E5E5E5"> the</font>

425
00:21:00,890 --> 00:21:09,590
<font color="#E5E5E5">timers as well my tub in debugging</font>

426
00:21:05,800 --> 00:21:13,610
here's a view to the<font color="#E5E5E5"> next stops we</font>

427
00:21:09,590 --> 00:21:15,230
<font color="#E5E5E5">actually list the interface we see the</font>

428
00:21:13,610 --> 00:21:18,740
<font color="#E5E5E5">next stop depending on if there is any</font>

429
00:21:15,230 --> 00:21:22,150
<font color="#CCCCCC">and it's state and a link state and</font>

430
00:21:18,740 --> 00:21:22,150
speed as far as we get that information

431
00:21:23,350 --> 00:21:26,899
causing a configuration v load or

432
00:21:25,400 --> 00:21:29,330
coupling decocking the flips are easy

433
00:21:26,900 --> 00:21:31,660
shown here and well you can take

434
00:21:29,330 --> 00:21:37,210
neighbors up by their name or their

435
00:21:31,660 --> 00:21:39,190
<font color="#E5E5E5">ers and the last one</font><font color="#CCCCCC"> is special the</font>

436
00:21:37,210 --> 00:21:41,500
feedback<font color="#CCCCCC"> that there's no such neighbor</font>

437
00:21:39,190 --> 00:21:45,520
by name is already new<font color="#E5E5E5"> feature that</font><font color="#CCCCCC"> used</font>

438
00:21:41,500 --> 00:21:47,200
to not bring any feedback so looking

439
00:21:45,520 --> 00:21:49,000
past Beach PD has a second restricted

440
00:21:47,200 --> 00:21:50,860
console socket now I code the two weeks

441
00:21:49,000 --> 00:21:52,780
ago which only<font color="#E5E5E5"> allows for certain</font>

442
00:21:50,860 --> 00:21:56,679
messages namely those behind the<font color="#E5E5E5"> BGP</font>

443
00:21:52,780 --> 00:21:58,600
control show operations running an HTTP

444
00:21:56,680 --> 00:22:01,390
d in a changing environment which is

445
00:21:58,600 --> 00:22:03,429
default on openbsd a<font color="#E5E5E5"> CGI can just call a</font>

446
00:22:01,390 --> 00:22:06,010
bgp control binary placed inside the

447
00:22:03,430 --> 00:22:09,580
change route giving<font color="#E5E5E5"> the path to this</font>

448
00:22:06,010 --> 00:22:11,890
restricted socket and then<font color="#CCCCCC"> you just need</font>

449
00:22:09,580 --> 00:22:15,490
a<font color="#CCCCCC"> cgi calling that and you're looking</font>

450
00:22:11,890 --> 00:22:16,750
<font color="#E5E5E5">glasses down the</font><font color="#CCCCCC"> cgi yes somebody needs</font>

451
00:22:15,490 --> 00:22:22,020
to sit down and heck that<font color="#E5E5E5"> but it should</font>

452
00:22:16,750 --> 00:22:25,570
<font color="#CCCCCC">be easy and it should be</font><font color="#E5E5E5"> ready</font><font color="#CCCCCC"> soon so</font>

453
00:22:22,020 --> 00:22:27,910
status quo um PG<font color="#E5E5E5"> PDF is very stable it</font>

454
00:22:25,570 --> 00:22:32,679
has to because otherwise my company's

455
00:22:27,910 --> 00:22:35,110
offline it is in use at quite some sites

456
00:22:32,680 --> 00:22:38,290
already including setups with many many

457
00:22:35,110 --> 00:22:40,000
many<font color="#E5E5E5"> many peers I don't have hard</font>

458
00:22:38,290 --> 00:22:41,800
numbers about<font color="#E5E5E5"> the numbers of site using</font>

459
00:22:40,000 --> 00:22:44,470
a<font color="#E5E5E5"> BB</font><font color="#CCCCCC"> GPD after all this is free software</font>

460
00:22:41,800 --> 00:22:46,899
so nobody has<font color="#CCCCCC"> to tell</font><font color="#E5E5E5"> me that he's using</font>

461
00:22:44,470 --> 00:22:50,020
<font color="#CCCCCC">it on the other hand quite some</font>

462
00:22:46,900 --> 00:22:51,580
operators do mail me and they usually

463
00:22:50,020 --> 00:22:54,190
expressed that they are<font color="#E5E5E5"> very happy</font><font color="#CCCCCC"> with</font>

464
00:22:51,580 --> 00:22:55,990
the performance reliability and ease of

465
00:22:54,190 --> 00:22:57,880
<font color="#E5E5E5">use and yeah I like getting those emails</font>

466
00:22:55,990 --> 00:23:02,560
so if you're using a<font color="#CCCCCC"> BB</font><font color="#E5E5E5"> gpd please mail</font>

467
00:22:57,880 --> 00:23:04,720
me some pouring statistics Beach PD is

468
00:23:02,560 --> 00:23:07,570
20,000 and<font color="#E5E5E5"> something lines of code right</font>

469
00:23:04,720 --> 00:23:11,320
now<font color="#E5E5E5"> HTTP control is 2000 and the</font><font color="#CCCCCC"> men</font>

470
00:23:07,570 --> 00:23:16,000
<font color="#E5E5E5">pages are 2340 and yeah they're in</font>

471
00:23:11,320 --> 00:23:18,610
<font color="#E5E5E5">English availability welcome BTW PD has</font>

472
00:23:16,000 --> 00:23:22,350
been part of openbsd since the<font color="#CCCCCC"> 325</font>

473
00:23:18,610 --> 00:23:24,729
release which was released in May 2004

474
00:23:22,350 --> 00:23:28,179
there's a new release every six month

475
00:23:24,730 --> 00:23:29,530
and there's<font color="#E5E5E5"> really thorough testing</font>

476
00:23:28,180 --> 00:23:32,830
quality is more important<font color="#CCCCCC"> to us than</font>

477
00:23:29,530 --> 00:23:35,950
anything else<font color="#E5E5E5"> so there's no security</font>

478
00:23:32,830 --> 00:23:37,600
without quality and for us quality<font color="#E5E5E5"> also</font>

479
00:23:35,950 --> 00:23:43,309
means correct up to date<font color="#E5E5E5"> and English</font>

480
00:23:37,600 --> 00:23:46,418
documentation and now I pass on<font color="#E5E5E5"> to Ben</font>

481
00:23:43,309 --> 00:23:50,480
to talk about obj periods the diesels

482
00:23:46,419 --> 00:23:52,690
<font color="#E5E5E5">okay</font><font color="#CCCCCC"> um some short words about the d6</font>

483
00:23:50,480 --> 00:23:55,700
and v6 is one of the biggest european

484
00:23:52,690 --> 00:23:59,929
exchanges actually it's the biggest in

485
00:23:55,700 --> 00:24:03,679
central europe and we have about 160 SMG

486
00:23:59,929 --> 00:24:06,259
connected eyes<font color="#E5E5E5"> piece we have 264 ports</font>

487
00:24:03,679 --> 00:24:08,179
connected so there has a lot of bgp

488
00:24:06,259 --> 00:24:10,999
sessions you have<font color="#E5E5E5"> to handle if you want</font>

489
00:24:08,179 --> 00:24:14,210
to be with all current traffic is

490
00:24:10,999 --> 00:24:16,960
roughly 55 gigabits on the public land

491
00:24:14,210 --> 00:24:19,279
we expect<font color="#CCCCCC"> about 30 40 additional</font>

492
00:24:16,960 --> 00:24:22,730
gigabits on private interconnects were

493
00:24:19,279 --> 00:24:25,580
you have no<font color="#E5E5E5"> control over of these</font>

494
00:24:22,730 --> 00:24:29,809
connected eyes peas about 130 using the

495
00:24:25,580 --> 00:24:34,460
route server with 155 sessions so it's

496
00:24:29,809 --> 00:24:37,340
not<font color="#CCCCCC"> only one to one it's all also ice</font>

497
00:24:34,460 --> 00:24:40,669
piece connected that have more than one

498
00:24:37,340 --> 00:24:43,220
connection to the router<font color="#CCCCCC"> allah at the</font>

499
00:24:40,669 --> 00:24:48,850
moment<font color="#E5E5E5"> the rap server itself handle 60</font>

500
00:24:43,220 --> 00:24:52,580
16 k routes we have our current<font color="#CCCCCC"> setup</font><font color="#E5E5E5"> to</font>

501
00:24:48,850 --> 00:24:55,480
<font color="#CCCCCC">quagga based route servers and an</font>

502
00:24:52,580 --> 00:24:59,470
additional four external Ronnie<font color="#CCCCCC"> am</font>

503
00:24:55,480 --> 00:25:03,200
currently currently the route server

504
00:24:59,470 --> 00:25:06,259
gives the newly connected isp your

505
00:25:03,200 --> 00:25:08,389
member some advantages for setting up

506
00:25:06,259 --> 00:25:11,509
very fast the connection<font color="#CCCCCC"> to the internet</font>

507
00:25:08,389 --> 00:25:14,629
exchange it's just one connection and

508
00:25:11,509 --> 00:25:16,789
you get approximately 130 PS so that's

509
00:25:14,629 --> 00:25:20,629
approximately seventy-five percent of

510
00:25:16,789 --> 00:25:24,769
all connected<font color="#E5E5E5"> is peace we have a</font>

511
00:25:20,629 --> 00:25:28,219
<font color="#E5E5E5">transparent is set up also a normal non</font>

512
00:25:24,769 --> 00:25:30,649
<font color="#E5E5E5">transparent set up with VA s number 66</font>

513
00:25:28,220 --> 00:25:34,220
95 so you can choose if you want to have

514
00:25:30,649 --> 00:25:38,119
one<font color="#E5E5E5"> s path longer or you don't want to</font>

515
00:25:34,220 --> 00:25:40,039
see the d6 as far a path when you

516
00:25:38,119 --> 00:25:43,749
connect to<font color="#E5E5E5"> the router server it's an</font>

517
00:25:40,039 --> 00:25:46,429
easy setup we kind of label routes

518
00:25:43,749 --> 00:25:48,559
depending<font color="#CCCCCC"> on which switch location the</font>

519
00:25:46,429 --> 00:25:53,130
ice P is connected so that you can also

520
00:25:48,559 --> 00:25:55,620
choose how you build your redundancy how

521
00:25:53,130 --> 00:26:00,540
you configure your setup if you have one

522
00:25:55,620 --> 00:26:04,830
<font color="#E5E5E5">or</font><font color="#CCCCCC"> more</font><font color="#E5E5E5"> pod connected to the d6 and</font><font color="#CCCCCC"> we</font>

523
00:26:00,540 --> 00:26:06,960
can<font color="#E5E5E5"> control</font><font color="#CCCCCC"> the pH and control an</font>

524
00:26:04,830 --> 00:26:10,470
announcement or non announcement to to

525
00:26:06,960 --> 00:26:14,040
some peers very easy with communities as

526
00:26:10,470 --> 00:26:16,980
usual<font color="#E5E5E5"> um the problem as usual with route</font>

527
00:26:14,040 --> 00:26:20,639
service it's that you might not see the

528
00:26:16,980 --> 00:26:23,010
complete route table because some AAS

529
00:26:20,640 --> 00:26:27,480
paths are not visible because of the

530
00:26:23,010 --> 00:26:29,940
best selection algorithms you have to

531
00:26:27,480 --> 00:26:32,460
set up your own PS if<font color="#CCCCCC"> you'd like to</font>

532
00:26:29,940 --> 00:26:34,890
<font color="#E5E5E5">avoid this otherwise we have to do it</font>

533
00:26:32,460 --> 00:26:37,980
with the software so that's one project

534
00:26:34,890 --> 00:26:41,340
goal to have some<font color="#E5E5E5"> kind of</font><font color="#CCCCCC"> / pier view of</font>

535
00:26:37,980 --> 00:26:43,310
the routing table depending on the PS

536
00:26:41,340 --> 00:26:48,149
you want to see you you want to<font color="#CCCCCC"> pay with</font>

537
00:26:43,310 --> 00:26:50,399
ya yop BG BTW we had some experience

538
00:26:48,150 --> 00:26:53,580
<font color="#E5E5E5">with guaca guaca</font><font color="#CCCCCC"> is quite ok but not</font>

539
00:26:50,400 --> 00:26:55,890
<font color="#E5E5E5">that stable and we want to implement</font>

540
00:26:53,580 --> 00:26:59,070
also md5 which is not probably

541
00:26:55,890 --> 00:27:01,140
integrated in kroger as<font color="#CCCCCC"> i know yet there</font>

542
00:26:59,070 --> 00:27:04,830
are some some patches around but not

543
00:27:01,140 --> 00:27:08,700
stable ones also<font color="#E5E5E5"> we want maybe half the</font>

544
00:27:04,830 --> 00:27:12,780
<font color="#E5E5E5">chance to use IPSec if you have an hard</font>

545
00:27:08,700 --> 00:27:15,840
way that supports that what we do with

546
00:27:12,780 --> 00:27:20,160
the cooperation to the developers is to

547
00:27:15,840 --> 00:27:23,300
have some close contact to improve the

548
00:27:20,160 --> 00:27:26,340
filtering capabilities to have some

549
00:27:23,300 --> 00:27:30,300
chances to improve what we use at the

550
00:27:26,340 --> 00:27:33,510
route server and as I told the best<font color="#E5E5E5"> path</font>

551
00:27:30,300 --> 00:27:39,480
selection process the other thing is<font color="#E5E5E5"> if</font>

552
00:27:33,510 --> 00:27:42,120
<font color="#E5E5E5">one process dies or 11 machine dies that</font>

553
00:27:39,480 --> 00:27:44,850
we have a redundant<font color="#E5E5E5"> setup maybe in</font><font color="#CCCCCC"> the</font>

554
00:27:42,120 --> 00:27:49,709
<font color="#E5E5E5">future also hitless failover so that the</font>

555
00:27:44,850 --> 00:27:52,620
<font color="#E5E5E5">TCP states are synchronized at the</font>

556
00:27:49,710 --> 00:27:55,890
<font color="#E5E5E5">moment we have a test server running we</font>

557
00:27:52,620 --> 00:28:00,510
add some PS there to test everything and

558
00:27:55,890 --> 00:28:03,180
if<font color="#E5E5E5"> this works up for people ok then we</font>

559
00:28:00,510 --> 00:28:05,158
may be exchanged the quagga soon at the

560
00:28:03,180 --> 00:28:07,679
d6 um

561
00:28:05,159 --> 00:28:10,769
concrete configuration is very easy<font color="#CCCCCC"> and</font>

562
00:28:07,679 --> 00:28:12,799
<font color="#CCCCCC">you have as I</font><font color="#E5E5E5"> told you communities you</font>

563
00:28:10,769 --> 00:28:15,649
can say<font color="#E5E5E5"> okay we don't want have any</font>

564
00:28:12,799 --> 00:28:17,849
announcements to any PS we want to have

565
00:28:15,649 --> 00:28:19,918
announcement to selected PS we don't

566
00:28:17,849 --> 00:28:23,129
don't want to have an announcement to

567
00:28:19,919 --> 00:28:27,659
the selected peers and also so the knots

568
00:28:23,129 --> 00:28:32,428
anything um things like adding PSAs is

569
00:28:27,659 --> 00:28:36,090
based on communities it's very easy<font color="#CCCCCC"> okay</font>

570
00:28:32,429 --> 00:28:37,859
just to the end some some things yeah

571
00:28:36,090 --> 00:28:39,449
I'll let's give over that because we are

572
00:28:37,859 --> 00:28:41,549
all time I just<font color="#E5E5E5"> have to staying</font>

573
00:28:39,450 --> 00:28:43,259
Claudio's<font color="#CCCCCC"> writing open Beach PD with me</font>

574
00:28:41,549 --> 00:28:45,899
there's<font color="#E5E5E5"> more people involved but we are</font>

575
00:28:43,259 --> 00:28:47,909
the main ones there's an repaying most

576
00:28:45,899 --> 00:28:51,299
all this work fields who finally kicked

577
00:28:47,909 --> 00:28:53,549
my ass doing<font color="#E5E5E5"> that um then for continued</font>

578
00:28:51,299 --> 00:28:56,359
support and of course d 6 for<font color="#E5E5E5"> funding</font>

579
00:28:53,549 --> 00:28:59,700
the strip and the<font color="#E5E5E5"> correct cooperation</font>

580
00:28:56,359 --> 00:29:01,439
one unavoidable last page this is all

581
00:28:59,700 --> 00:29:03,179
free software but of<font color="#CCCCCC"> course there's</font>

582
00:29:01,440 --> 00:29:05,220
funding needed so if you can and use it

583
00:29:03,179 --> 00:29:08,340
please donate or at least buy our CDs

584
00:29:05,220 --> 00:29:10,710
and yeah if you want to hear more<font color="#E5E5E5"> I'll</font>

585
00:29:08,340 --> 00:29:14,908
speak<font color="#E5E5E5"> again at the tooth both later</font>

586
00:29:10,710 --> 00:29:17,519
today at 4pm in the courage room that's

587
00:29:14,909 --> 00:29:21,019
what<font color="#CCCCCC"> Thanks okay</font><font color="#E5E5E5"> thanks</font><font color="#CCCCCC"> to you have</font>

588
00:29:17,519 --> 00:29:21,019
appearing buff of the truth spell

589
00:29:25,230 --> 00:29:34,480
thanks guys looks like we have some mics

590
00:29:31,380 --> 00:29:39,190
Randy<font color="#CCCCCC"> Bush</font><font color="#E5E5E5"> i J um your route server you</font>

591
00:29:34,480 --> 00:29:43,000
said do you allow label tagging to allow

592
00:29:39,190 --> 00:29:47,040
people<font color="#CCCCCC"> to handle redundancy</font><font color="#E5E5E5"> etc etc that</font>

593
00:29:43,000 --> 00:29:50,800
has an implication that your labels are

594
00:29:47,040 --> 00:29:55,120
transmitted through bgp I'm a<font color="#E5E5E5"> little</font>

595
00:29:50,800 --> 00:29:57,129
confused no no no in PT PT you can label

596
00:29:55,120 --> 00:29:58,419
route so they the label<font color="#CCCCCC"> is thought with</font>

597
00:29:57,130 --> 00:30:02,070
the route in the quadratic<font color="#CCCCCC"> failure but</font>

598
00:29:58,420 --> 00:30:02,070
it's not redistributed into bgp again

599
00:30:02,880 --> 00:30:08,200
then if<font color="#CCCCCC"> i talk to</font><font color="#E5E5E5"> your route server and</font>

600
00:30:05,410 --> 00:30:09,910
routes are labeled and you say<font color="#E5E5E5"> can make</font>

601
00:30:08,200 --> 00:30:12,430
<font color="#CCCCCC">decisions based on and how do</font><font color="#E5E5E5"> i get them</font>

602
00:30:09,910 --> 00:30:15,190
no it's just just community thing so

603
00:30:12,430 --> 00:30:17,080
like we label a community if it's from

604
00:30:15,190 --> 00:30:18,760
switch number one and another community

605
00:30:17,080 --> 00:30:20,860
of students from<font color="#E5E5E5"> such number two and</font>

606
00:30:18,760 --> 00:30:23,020
<font color="#E5E5E5">three etc that's the only thing we do</font>

607
00:30:20,860 --> 00:30:27,429
yeah<font color="#E5E5E5"> labor communities yeah that's</font>

608
00:30:23,020 --> 00:30:30,490
different things i render with<font color="#E5E5E5"> river</font>

609
00:30:27,430 --> 00:30:34,000
domain but unrelated question<font color="#CCCCCC"> G Dean of</font>

610
00:30:30,490 --> 00:30:37,600
carp can be our is put can be ported to

611
00:30:34,000 --> 00:30:39,280
other distribution or carp yes can<font color="#E5E5E5"> be</font>

612
00:30:37,600 --> 00:30:41,500
distributed accorded to other

613
00:30:39,280 --> 00:30:43,510
distribution there is a user on

614
00:30:41,500 --> 00:30:45,310
delimitation the works on almost every

615
00:30:43,510 --> 00:30:49,170
unix systems but of course season and is

616
00:30:45,310 --> 00:30:52,360
the wrong the<font color="#E5E5E5"> wrong place to solve it</font>

617
00:30:49,170 --> 00:30:54,990
<font color="#CCCCCC">i'm not certain about the state of it in</font>

618
00:30:52,360 --> 00:30:57,760
freebsd might be there<font color="#CCCCCC"> i'm not certain</font>

619
00:30:54,990 --> 00:30:59,770
same for an obviously there definitely

620
00:30:57,760 --> 00:31:02,080
is caught but<font color="#CCCCCC"> i'm not</font><font color="#E5E5E5"> sure whether they</font>

621
00:30:59,770 --> 00:31:04,379
finally important that because correct

622
00:31:02,080 --> 00:31:07,540
me if<font color="#E5E5E5"> i'm wrong it's nish elite started</font>

623
00:31:04,380 --> 00:31:12,280
it<font color="#E5E5E5"> was designed for her openbsd</font><font color="#CCCCCC"> too</font>

624
00:31:07,540 --> 00:31:16,509
<font color="#CCCCCC">right yeah ok don't run uh no no no what</font>

625
00:31:12,280 --> 00:31:19,629
oh no does not<font color="#E5E5E5"> run on the notes</font>

626
00:31:16,509 --> 00:31:24,219
not not fully<font color="#E5E5E5"> okay it does not run a</font>

627
00:31:19,629 --> 00:31:27,099
<font color="#CCCCCC">little yeah back microphone sandy Murphy</font>

628
00:31:24,219 --> 00:31:30,459
at<font color="#E5E5E5"> Sparta I was curious about your</font>

629
00:31:27,099 --> 00:31:33,668
description of using an ipsec<font color="#CCCCCC"> sa to do</font>

630
00:31:30,459 --> 00:31:36,639
the TCP md5 stuff you mentioned that

631
00:31:33,669 --> 00:31:38,440
<font color="#E5E5E5">this isn't an attack because the TCP</font>

632
00:31:36,639 --> 00:31:43,149
processing a sequence number and stuff

633
00:31:38,440 --> 00:31:45,879
occurs before you do the checking but

634
00:31:43,149 --> 00:31:47,978
I'm wondering<font color="#E5E5E5"> how you prevent the ipsec</font>

635
00:31:45,879 --> 00:31:51,399
<font color="#CCCCCC">Colonel stuff from occurring before the</font>

636
00:31:47,979 --> 00:31:53,559
<font color="#E5E5E5">TCP gets ahold of the packet so well if</font>

637
00:31:51,399 --> 00:31:55,629
you're using an ipsec insane<font color="#CCCCCC"> okay if</font>

638
00:31:53,559 --> 00:31:58,839
you're using if you're using encrypt

639
00:31:55,629 --> 00:32:01,418
encryption ipsec ESP of course you

640
00:31:58,839 --> 00:32:03,249
cannot if you're using TCP md5 the

641
00:32:01,419 --> 00:32:05,049
packet itself are not encrypted there's

642
00:32:03,249 --> 00:32:10,569
twisting authentication checks on right

643
00:32:05,049 --> 00:32:13,359
there's there's the md5 signature but

644
00:32:10,569 --> 00:32:15,039
you<font color="#CCCCCC"> still have all the TCP information</font>

645
00:32:13,359 --> 00:32:16,749
in clear text so it's easy to check them

646
00:32:15,039 --> 00:32:20,649
before you<font color="#E5E5E5"> actually bother checking the</font>

647
00:32:16,749 --> 00:32:24,039
signature<font color="#CCCCCC"> okay so you're if you're using</font>

648
00:32:20,649 --> 00:32:27,488
an ipsec aah is that what you mean um

649
00:32:24,039 --> 00:32:29,109
well this is<font color="#E5E5E5"> for GC p.m. at five okay</font>

650
00:32:27,489 --> 00:32:32,469
<font color="#CCCCCC">but</font><font color="#E5E5E5"> you said you were using an ipsec</font>

651
00:32:29,109 --> 00:32:34,029
essay for the tcp on be 50 okay so maybe

652
00:32:32,469 --> 00:32:36,879
I need to<font color="#E5E5E5"> talk to you later well we just</font>

653
00:32:34,029 --> 00:32:38,649
implemented in the ipsec framework<font color="#E5E5E5"> you</font>

654
00:32:36,879 --> 00:32:42,339
have the same interface is to user land

655
00:32:38,649 --> 00:32:44,978
because well if your thing about it's

656
00:32:42,339 --> 00:32:48,219
<font color="#E5E5E5">just special case if I piece like aah ok</font>

657
00:32:44,979 --> 00:32:51,429
and even<font color="#E5E5E5"> for our</font><font color="#CCCCCC"> Piecyk the TCP packets</font>

658
00:32:48,219 --> 00:32:54,899
are check with all<font color="#E5E5E5"> its or TCP then but</font>

659
00:32:51,429 --> 00:32:54,899
there's check what you can before

660
00:32:54,959 --> 00:33:02,829
secondly you said something<font color="#E5E5E5"> about</font>

661
00:32:56,949 --> 00:33:04,239
picking to SP eyes and I you<font color="#E5E5E5"> know ipsec</font>

662
00:33:02,829 --> 00:33:06,249
SP eyes are usually picked by the

663
00:33:04,239 --> 00:33:08,559
destination so do you mean that one side

664
00:33:06,249 --> 00:33:10,389
of the peering session picks the spi for

665
00:33:08,559 --> 00:33:13,329
both sides<font color="#E5E5E5"> the conversation they don't</font>

666
00:33:10,389 --> 00:33:14,649
<font color="#E5E5E5">need to match you could just be true you</font>

667
00:33:13,329 --> 00:33:19,918
<font color="#E5E5E5">need one per direction but they don't</font>

668
00:33:14,649 --> 00:33:24,060
need<font color="#E5E5E5"> to match on both both</font><font color="#CCCCCC"> hosts</font><font color="#E5E5E5"> ok and</font>

669
00:33:19,919 --> 00:33:26,130
your discussion about cloning sessions

670
00:33:24,060 --> 00:33:30,330
accepting connections from anything<font color="#CCCCCC"> on a</font>

671
00:33:26,130 --> 00:33:32,580
on a network how does<font color="#CCCCCC"> that work with TCP</font>

672
00:33:30,330 --> 00:33:37,139
md5 do they have<font color="#CCCCCC"> to have the same shared</font>

673
00:33:32,580 --> 00:33:40,110
secret on all of those<font color="#CCCCCC"> now listen yeah</font>

674
00:33:37,140 --> 00:33:41,670
if you want to use TCP md5 and different

675
00:33:40,110 --> 00:33:45,449
<font color="#CCCCCC">passwords sorry have to configure that</font>

676
00:33:41,670 --> 00:33:47,910
for each fear no way around that<font color="#E5E5E5"> ok do</font>

677
00:33:45,450 --> 00:33:51,090
do you have any mechanism that would

678
00:33:47,910 --> 00:33:55,850
prevent people from allowing that

679
00:33:51,090 --> 00:33:58,740
cloning stuff without doing TCP md5

680
00:33:55,850 --> 00:34:01,409
there's really no reason to prevent that

681
00:33:58,740 --> 00:34:03,030
it depends<font color="#E5E5E5"> on what you use it for if you</font>

682
00:34:01,410 --> 00:34:04,770
set up a server that<font color="#E5E5E5"> we distribute</font>

683
00:34:03,030 --> 00:34:06,629
support on this there's<font color="#CCCCCC"> nothing wrong</font>

684
00:34:04,770 --> 00:34:09,870
with everybody connecting to it so you

685
00:34:06,630 --> 00:34:13,680
could place a neighbor 0 2 0 0 / 0

686
00:34:09,870 --> 00:34:17,159
that's fine so there I<font color="#E5E5E5"> don't see a point</font>

687
00:34:13,679 --> 00:34:19,889
in preventing anything like that didn't

688
00:34:17,159 --> 00:34:22,230
prevent<font color="#CCCCCC"> an bgp connections from anybody</font>

689
00:34:19,889 --> 00:34:24,000
in the world why not if you're just

690
00:34:22,230 --> 00:34:25,230
reduced routing and not accepted if

691
00:34:24,000 --> 00:34:27,389
you're not accepting anything less

692
00:34:25,230 --> 00:34:30,240
freedom see routing a bolo list why not

693
00:34:27,389 --> 00:34:31,799
<font color="#E5E5E5">okay all right you think it's just an</font>

694
00:34:30,239 --> 00:34:35,969
object so you have to know what<font color="#CCCCCC"> you're</font>

695
00:34:31,800 --> 00:34:37,950
doing<font color="#E5E5E5"> so it's not enabled by default of</font>

696
00:34:35,969 --> 00:34:40,370
course not not<font color="#E5E5E5"> okay I think we need</font><font color="#CCCCCC"> to</font>

697
00:34:37,949 --> 00:34:40,370
<font color="#E5E5E5">move on</font>

