1
00:00:08,870 --> 00:00:17,420
<font color="#E5E5E5">thank you hello</font>

2
00:00:14,320 --> 00:00:18,680
my name is<font color="#CCCCCC"> taylor harris and i</font><font color="#E5E5E5"> am a</font>

3
00:00:17,420 --> 00:00:22,220
security<font color="#E5E5E5"> engineer with charter</font>

4
00:00:18,680 --> 00:00:24,800
communications since 2010 I've been

5
00:00:22,220 --> 00:00:26,180
working in very large networks and I've

6
00:00:24,800 --> 00:00:28,010
been attempting<font color="#CCCCCC"> to solve</font><font color="#E5E5E5"> various</font>

7
00:00:26,180 --> 00:00:31,400
security challenges<font color="#E5E5E5"> in those large</font>

8
00:00:28,010 --> 00:00:33,110
networks since 2013<font color="#E5E5E5"> DDoS mitigation has</font>

9
00:00:31,400 --> 00:00:34,519
<font color="#E5E5E5">been a huge part of my time in the</font>

10
00:00:33,110 --> 00:00:37,629
<font color="#CCCCCC">industry so today I'm going</font><font color="#E5E5E5"> to talk a</font>

11
00:00:34,520 --> 00:00:44,239
little bit<font color="#CCCCCC"> about how we can hopefully</font>

12
00:00:37,630 --> 00:00:45,320
enhance<font color="#E5E5E5"> DDoS protection</font><font color="#CCCCCC"> collectively so</font>

13
00:00:44,239 --> 00:00:48,680
first I think<font color="#E5E5E5"> it's important that we</font>

14
00:00:45,320 --> 00:00:50,570
briefly understand the evolution of DDoS

15
00:00:48,680 --> 00:00:53,750
and how DDoS mitigation is performed at

16
00:00:50,570 --> 00:00:55,430
the MSO level after<font color="#CCCCCC"> a quick review we'll</font>

17
00:00:53,750 --> 00:00:57,530
look at the most common reactive and

18
00:00:55,430 --> 00:01:00,080
proactive mitigation techniques<font color="#E5E5E5"> followed</font>

19
00:00:57,530 --> 00:01:02,660
up<font color="#CCCCCC"> by some of</font><font color="#E5E5E5"> the challenges that we</font>

20
00:01:00,080 --> 00:01:04,519
face using these strategies<font color="#E5E5E5"> next we'll</font>

21
00:01:02,660 --> 00:01:06,369
dive into<font color="#E5E5E5"> BGP flowspec</font>

22
00:01:04,519 --> 00:01:08,450
and how the protocol<font color="#E5E5E5"> can</font><font color="#CCCCCC"> be used to</font>

23
00:01:06,369 --> 00:01:11,540
address some of those challenges<font color="#CCCCCC"> and</font>

24
00:01:08,450 --> 00:01:13,700
then finally we have a recorded demo of

25
00:01:11,540 --> 00:01:23,439
our<font color="#CCCCCC"> homebrew Auto</font><font color="#E5E5E5"> flowspec mitigation</font>

26
00:01:13,700 --> 00:01:27,289
script so sometimes evolution sucks<font color="#CCCCCC"> as</font>

27
00:01:23,439 --> 00:01:29,658
you may<font color="#CCCCCC"> be</font><font color="#E5E5E5"> aware years ago launching a</font>

28
00:01:27,289 --> 00:01:31,340
DDoS attack<font color="#CCCCCC"> wasn't</font><font color="#E5E5E5"> exactly an easy thing</font>

29
00:01:29,659 --> 00:01:35,079
to do now if you know how<font color="#E5E5E5"> to use a</font>

30
00:01:31,340 --> 00:01:39,079
search engine<font color="#CCCCCC"> you can launch an attack</font>

31
00:01:35,079 --> 00:01:41,329
in general we see an increase<font color="#E5E5E5"> in the</font>

32
00:01:39,079 --> 00:01:44,419
average<font color="#E5E5E5"> size the number and complexity</font>

33
00:01:41,329 --> 00:01:46,130
<font color="#CCCCCC">of DDoS attacks year</font><font color="#E5E5E5"> over year and now</font>

34
00:01:44,420 --> 00:01:49,090
the<font color="#E5E5E5"> vast majority</font><font color="#CCCCCC"> of DDoS attacks that</font>

35
00:01:46,130 --> 00:01:51,109
we see are directed<font color="#E5E5E5"> at</font><font color="#CCCCCC"> the home user</font><font color="#E5E5E5"> a</font>

36
00:01:49,090 --> 00:01:55,009
lot of that seems to<font color="#CCCCCC"> be</font><font color="#E5E5E5"> related to</font>

37
00:01:51,109 --> 00:01:58,809
<font color="#CCCCCC">online gaming</font><font color="#E5E5E5"> next most common targets</font>

38
00:01:55,009 --> 00:02:02,179
are schools<font color="#E5E5E5"> typically during the</font>

39
00:01:58,810 --> 00:02:04,999
standardized testing<font color="#E5E5E5"> and followed up</font><font color="#CCCCCC"> by</font>

40
00:02:02,179 --> 00:02:06,950
government financial institutions so

41
00:02:04,999 --> 00:02:08,690
most of the<font color="#E5E5E5"> DDoS traffic that we see</font>

42
00:02:06,950 --> 00:02:11,840
originates from outside of<font color="#CCCCCC"> the United</font>

43
00:02:08,690 --> 00:02:16,310
<font color="#CCCCCC">States China Russia Ukraine</font><font color="#E5E5E5"> just to name</font>

44
00:02:11,840 --> 00:02:18,020
a<font color="#E5E5E5"> few</font><font color="#CCCCCC"> of the most</font><font color="#E5E5E5"> common sources again</font>

45
00:02:16,310 --> 00:02:20,630
the<font color="#CCCCCC"> tens the attacks</font><font color="#E5E5E5"> tend to keep</font>

46
00:02:18,020 --> 00:02:23,420
<font color="#E5E5E5">growing each</font><font color="#CCCCCC"> year and I</font><font color="#E5E5E5"> think for</font><font color="#CCCCCC"> that</font>

47
00:02:20,630 --> 00:02:27,379
we can thank<font color="#E5E5E5"> the commercialization of</font>

48
00:02:23,420 --> 00:02:28,040
DDoS as a service so there's so many

49
00:02:27,379 --> 00:02:30,469
<font color="#E5E5E5">booter and</font>

50
00:02:28,040 --> 00:02:32,480
<font color="#CCCCCC">services out there that for</font><font color="#E5E5E5"> a small fee</font>

51
00:02:30,469 --> 00:02:34,608
<font color="#CCCCCC">will launch an attack to anywhere</font><font color="#E5E5E5"> on</font><font color="#CCCCCC"> the</font>

52
00:02:32,480 --> 00:02:37,369
<font color="#CCCCCC">planet</font><font color="#E5E5E5"> but recently we've been seeing</font>

53
00:02:34,609 --> 00:02:40,010
free<font color="#E5E5E5"> DDoS services emerging in the</font>

54
00:02:37,370 --> 00:02:42,439
market some<font color="#E5E5E5"> of those will guarantee</font>

55
00:02:40,010 --> 00:02:49,310
hundreds of gigabits per second<font color="#E5E5E5"> of DDoS</font>

56
00:02:42,439 --> 00:02:52,099
traffic so there<font color="#E5E5E5"> are two common methods</font>

57
00:02:49,310 --> 00:02:54,200
<font color="#CCCCCC">for</font><font color="#E5E5E5"> DDoS detection and mitigation</font><font color="#CCCCCC"> the</font>

58
00:02:52,099 --> 00:02:55,939
<font color="#CCCCCC">inline</font><font color="#E5E5E5"> solution places an intelligent</font>

59
00:02:54,200 --> 00:02:58,250
device<font color="#E5E5E5"> in line with the edge of a</font>

60
00:02:55,939 --> 00:03:00,049
network<font color="#E5E5E5"> and this architecture is</font>

61
00:02:58,250 --> 00:03:02,090
<font color="#E5E5E5">typically the most effective at</font><font color="#CCCCCC"> dealing</font>

62
00:03:00,049 --> 00:03:05,840
with<font color="#E5E5E5"> and mitigating all different types</font>

63
00:03:02,090 --> 00:03:07,579
of attack<font color="#CCCCCC"> traffic but there's a catch</font><font color="#E5E5E5"> so</font>

64
00:03:05,840 --> 00:03:10,010
for<font color="#CCCCCC"> MSOs this can be an incredibly</font>

65
00:03:07,579 --> 00:03:11,599
<font color="#E5E5E5">expensive endeavor</font><font color="#CCCCCC"> and as the inline</font>

66
00:03:10,010 --> 00:03:13,578
device needs to scale not<font color="#CCCCCC"> only to the</font>

67
00:03:11,599 --> 00:03:15,560
network capacity<font color="#E5E5E5"> but has to be placed at</font>

68
00:03:13,579 --> 00:03:17,959
each and<font color="#E5E5E5"> every single peering location</font>

69
00:03:15,560 --> 00:03:21,439
in the network<font color="#CCCCCC"> so when a network adds</font>

70
00:03:17,959 --> 00:03:23,299
<font color="#E5E5E5">terabits of capacity each year and has</font>

71
00:03:21,439 --> 00:03:25,489
dozens of peering points<font color="#E5E5E5"> it starts to</font>

72
00:03:23,299 --> 00:03:28,519
become quite<font color="#E5E5E5"> clear why this solutions</font>

73
00:03:25,489 --> 00:03:32,440
not always selected as the<font color="#CCCCCC"> first from a</font>

74
00:03:28,519 --> 00:03:35,299
capex and OPEX perspective specifically

75
00:03:32,440 --> 00:03:37,609
so the most commonly used architecture

76
00:03:35,299 --> 00:03:40,099
is<font color="#CCCCCC"> the traffic diversion method also</font>

77
00:03:37,609 --> 00:03:42,409
<font color="#E5E5E5">called the off-ramp method this solution</font>

78
00:03:40,099 --> 00:03:44,448
<font color="#E5E5E5">uses sampled traffic like net flow for</font>

79
00:03:42,409 --> 00:03:46,760
the detection of an attack<font color="#E5E5E5"> and</font><font color="#CCCCCC"> then it</font>

80
00:03:44,449 --> 00:03:48,979
<font color="#CCCCCC">uses a route injection to divert traffic</font>

81
00:03:46,760 --> 00:03:51,198
to a single host<font color="#E5E5E5"> or for a single</font><font color="#CCCCCC"> host</font>

82
00:03:48,979 --> 00:03:52,790
rather<font color="#E5E5E5"> into a scrubbing appliance that</font>

83
00:03:51,199 --> 00:03:54,979
<font color="#CCCCCC">appliance</font><font color="#E5E5E5"> will then have the</font>

84
00:03:52,790 --> 00:03:56,900
<font color="#E5E5E5">intelligence to drop all of</font><font color="#CCCCCC"> the bad</font>

85
00:03:54,979 --> 00:03:58,129
<font color="#CCCCCC">traffic and hopefully forward along</font><font color="#E5E5E5"> the</font>

86
00:03:56,900 --> 00:03:59,169
clean traffic to its intended

87
00:03:58,129 --> 00:04:02,810
destination

88
00:03:59,169 --> 00:04:05,299
there's many nuances<font color="#E5E5E5"> and how reinjection</font>

89
00:04:02,810 --> 00:04:07,400
and redirection are accomplished<font color="#CCCCCC"> I'm</font>

90
00:04:05,299 --> 00:04:10,069
gonna keep<font color="#CCCCCC"> it</font><font color="#E5E5E5"> kind</font><font color="#CCCCCC"> of high-level</font><font color="#E5E5E5"> so we</font>

91
00:04:07,400 --> 00:04:10,819
don't<font color="#E5E5E5"> worry about that so here's the</font>

92
00:04:10,069 --> 00:04:13,339
<font color="#CCCCCC">high level</font>

93
00:04:10,819 --> 00:04:15,228
<font color="#E5E5E5">network diagram in this example you can</font>

94
00:04:13,340 --> 00:04:17,449
<font color="#E5E5E5">see we have a few core routers</font><font color="#CCCCCC"> we've</font><font color="#E5E5E5"> two</font>

95
00:04:15,229 --> 00:04:18,949
<font color="#E5E5E5">internet peering</font><font color="#CCCCCC"> points we have a</font>

96
00:04:17,449 --> 00:04:21,500
scrubbing<font color="#E5E5E5"> Center and we have</font><font color="#CCCCCC"> our victim</font>

97
00:04:18,949 --> 00:04:25,310
<font color="#E5E5E5">host the collectors are constantly</font>

98
00:04:21,500 --> 00:04:29,330
gathering<font color="#CCCCCC"> net</font><font color="#E5E5E5"> flow information from</font>

99
00:04:25,310 --> 00:04:31,909
those from<font color="#E5E5E5"> those peering routers so our</font>

100
00:04:29,330 --> 00:04:34,159
host<font color="#E5E5E5"> is browsing the</font><font color="#CCCCCC"> internet playing</font><font color="#E5E5E5"> an</font>

101
00:04:31,909 --> 00:04:35,870
online game<font color="#E5E5E5"> something</font><font color="#CCCCCC"> of that nature</font><font color="#E5E5E5"> and</font>

102
00:04:34,159 --> 00:04:39,539
the legitimate traffic<font color="#E5E5E5"> you</font><font color="#CCCCCC"> see here in</font>

103
00:04:35,870 --> 00:04:43,890
green<font color="#E5E5E5"> suddenly</font>

104
00:04:39,540 --> 00:04:47,310
<font color="#E5E5E5">a flood of</font><font color="#CCCCCC"> DDoS traffic hits that</font>

105
00:04:43,890 --> 00:04:49,080
customer now this is reactive so we're

106
00:04:47,310 --> 00:04:53,520
waiting<font color="#CCCCCC"> for the</font><font color="#E5E5E5"> net flows to come in</font>

107
00:04:49,080 --> 00:04:55,950
before<font color="#E5E5E5"> we can engage on this once that</font>

108
00:04:53,520 --> 00:04:57,780
sample traffic is<font color="#E5E5E5"> analyzed and this is</font>

109
00:04:55,950 --> 00:04:59,789
determined<font color="#CCCCCC"> to be a DDoS attack</font><font color="#E5E5E5"> the</font>

110
00:04:57,780 --> 00:05:01,559
mitigation is triggered and<font color="#E5E5E5"> all of the</font>

111
00:04:59,790 --> 00:05:03,660
traffic destined to that one host is

112
00:05:01,560 --> 00:05:06,180
diverted into<font color="#E5E5E5"> a scrubbing</font><font color="#CCCCCC"> Center</font><font color="#E5E5E5"> or</font>

113
00:05:03,660 --> 00:05:07,740
<font color="#E5E5E5">hopefully we clean that traffic and pump</font>

114
00:05:06,180 --> 00:05:16,170
the rest of the traffic<font color="#CCCCCC"> that's cleaned</font>

115
00:05:07,740 --> 00:05:18,600
<font color="#E5E5E5">down to the down to the</font><font color="#CCCCCC"> host so what</font>

116
00:05:16,170 --> 00:05:21,330
about being proactive<font color="#CCCCCC"> one of the</font><font color="#E5E5E5"> things</font>

117
00:05:18,600 --> 00:05:23,250
we can<font color="#E5E5E5"> do proactively is block and rate</font>

118
00:05:21,330 --> 00:05:26,960
limits certain ports and protocols that

119
00:05:23,250 --> 00:05:29,490
<font color="#E5E5E5">are used</font><font color="#CCCCCC"> in amplification style attacks</font>

120
00:05:26,960 --> 00:05:30,900
<font color="#E5E5E5">blocking traffic</font><font color="#CCCCCC"> in grass-like charge an</font>

121
00:05:29,490 --> 00:05:32,100
quoted<font color="#E5E5E5"> the</font><font color="#CCCCCC"> de</font><font color="#E5E5E5"> SSDP</font>

122
00:05:30,900 --> 00:05:34,169
rip<font color="#CCCCCC"> version one this</font><font color="#E5E5E5"> is something</font><font color="#CCCCCC"> we</font>

123
00:05:32,100 --> 00:05:35,370
should<font color="#E5E5E5"> all</font><font color="#CCCCCC"> be doing if you have a</font>

124
00:05:34,170 --> 00:05:38,420
<font color="#E5E5E5">network and you</font><font color="#CCCCCC"> are not blocking these</font>

125
00:05:35,370 --> 00:05:38,420
protocols<font color="#CCCCCC"> please do</font>

126
00:05:38,460 --> 00:05:41,640
we also<font color="#E5E5E5"> heard an earlier presentation</font>

127
00:05:39,870 --> 00:05:45,390
<font color="#CCCCCC">this week about a new attack vector with</font>

128
00:05:41,640 --> 00:05:48,659
port 1 1 2 1<font color="#CCCCCC"> 1 the</font><font color="#E5E5E5"> memcache D that was</font>

129
00:05:45,390 --> 00:05:51,060
recently added<font color="#CCCCCC"> to this list</font><font color="#E5E5E5"> as well</font><font color="#CCCCCC"> and</font>

130
00:05:48,660 --> 00:05:52,230
I I<font color="#E5E5E5"> believe it may also be</font><font color="#CCCCCC"> time to</font><font color="#E5E5E5"> start</font>

131
00:05:51,060 --> 00:05:55,380
having<font color="#E5E5E5"> the discussion about blocking</font>

132
00:05:52,230 --> 00:05:59,480
<font color="#E5E5E5">ingress UDP source port 53 since this is</font>

133
00:05:55,380 --> 00:05:59,480
heavily<font color="#CCCCCC"> used in amplification attacks</font>

134
00:05:59,960 --> 00:06:06,000
for for things that<font color="#E5E5E5"> we can't drop out</font>

135
00:06:04,050 --> 00:06:11,040
right we can rate limit them<font color="#CCCCCC"> UDP</font>

136
00:06:06,000 --> 00:06:12,270
fragments<font color="#CCCCCC"> Sun RPC</font><font color="#E5E5E5"> SNMP LDAP these can be</font>

137
00:06:11,040 --> 00:06:14,790
rate limited they saw a good<font color="#CCCCCC"> example</font>

138
00:06:12,270 --> 00:06:16,229
earlier this week<font color="#E5E5E5"> of a configuration for</font>

139
00:06:14,790 --> 00:06:20,820
rate limiting down to<font color="#CCCCCC"> 1 percent</font><font color="#E5E5E5"> of the</font>

140
00:06:16,230 --> 00:06:22,320
interface<font color="#E5E5E5"> total in general you're only</font>

141
00:06:20,820 --> 00:06:24,840
going to<font color="#CCCCCC"> see impact on these services</font>

142
00:06:22,320 --> 00:06:26,670
during<font color="#E5E5E5"> a very large DDoS attack if</font>

143
00:06:24,840 --> 00:06:30,719
you're leveraging rate limiting on those

144
00:06:26,670 --> 00:06:32,520
interfaces<font color="#E5E5E5"> but it could also help</font>

145
00:06:30,720 --> 00:06:35,850
<font color="#E5E5E5">prevent some</font><font color="#CCCCCC"> of that traffic</font><font color="#E5E5E5"> at least</font>

146
00:06:32,520 --> 00:06:39,270
from<font color="#E5E5E5"> transiting</font><font color="#CCCCCC"> the network we don't</font>

147
00:06:35,850 --> 00:06:43,460
also<font color="#CCCCCC"> heard this</font><font color="#E5E5E5"> week about</font><font color="#CCCCCC"> BC p38 BP 38</font>

148
00:06:39,270 --> 00:06:46,219
and B speed 84<font color="#CCCCCC"> define methods for</font>

149
00:06:43,460 --> 00:06:50,448
blocking spoofed traffic or rather

150
00:06:46,220 --> 00:06:52,380
denying spoof traffic

151
00:06:50,449 --> 00:06:54,240
these should be<font color="#CCCCCC"> deployed ingress on</font>

152
00:06:52,380 --> 00:06:55,590
every<font color="#E5E5E5"> internet link</font><font color="#CCCCCC"> I think in North</font>

153
00:06:54,240 --> 00:06:57,750
America were pretty good<font color="#CCCCCC"> about doing</font>

154
00:06:55,590 --> 00:06:58,979
<font color="#E5E5E5">this but remember most of the DDoS</font>

155
00:06:57,750 --> 00:07:01,169
traffic is actually<font color="#E5E5E5"> originating from</font>

156
00:06:58,979 --> 00:07:02,940
outside of<font color="#E5E5E5"> the US</font><font color="#CCCCCC"> so it's really</font>

157
00:07:01,169 --> 00:07:05,639
important<font color="#E5E5E5"> that everyone uses these best</font>

158
00:07:02,940 --> 00:07:08,789
current practices the other proactive

159
00:07:05,639 --> 00:07:11,210
solution is an<font color="#E5E5E5"> always-on mitigation and</font>

160
00:07:08,789 --> 00:07:13,530
essentially the solution would have<font color="#E5E5E5"> a</font>

161
00:07:11,210 --> 00:07:14,669
single<font color="#E5E5E5"> slash</font><font color="#CCCCCC"> thirty-two IP being</font>

162
00:07:13,530 --> 00:07:16,409
diverted to<font color="#CCCCCC"> a scrubbing center</font>

163
00:07:14,669 --> 00:07:18,180
constantly<font color="#E5E5E5"> always having the</font>

164
00:07:16,410 --> 00:07:20,729
<font color="#E5E5E5">countermeasures applied to it whether</font>

165
00:07:18,180 --> 00:07:22,560
<font color="#E5E5E5">there's an active DDoS or not this</font>

166
00:07:20,729 --> 00:07:24,539
method will still typically require some

167
00:07:22,560 --> 00:07:26,639
form of human intervention if a new

168
00:07:24,539 --> 00:07:32,009
attack vector or non-standard<font color="#CCCCCC"> ports</font>

169
00:07:26,639 --> 00:07:36,270
being used in an attack speaking of new

170
00:07:32,009 --> 00:07:39,000
attack vectors<font color="#CCCCCC"> these</font><font color="#E5E5E5"> are</font><font color="#CCCCCC"> always a</font>

171
00:07:36,270 --> 00:07:40,770
<font color="#E5E5E5">challenge in security one of the recent</font>

172
00:07:39,000 --> 00:07:43,500
challenges we've<font color="#CCCCCC"> had is an attack vector</font>

173
00:07:40,770 --> 00:07:46,229
called the carpet bomb<font color="#E5E5E5"> it's not really a</font>

174
00:07:43,500 --> 00:07:48,090
new<font color="#E5E5E5"> attack it's something that was seen</font>

175
00:07:46,229 --> 00:07:49,830
<font color="#E5E5E5">some number of</font><font color="#CCCCCC"> years ago</font><font color="#E5E5E5"> but a recent</font>

176
00:07:48,090 --> 00:07:52,919
uptick in frequency does suggest<font color="#E5E5E5"> that it</font>

177
00:07:49,830 --> 00:07:54,659
may be becoming more<font color="#E5E5E5"> popular so what's</font>

178
00:07:52,919 --> 00:07:57,060
different<font color="#CCCCCC"> about the carpet bomb is well</font>

179
00:07:54,659 --> 00:07:59,460
it leverages a normal UDP reflection or

180
00:07:57,060 --> 00:08:01,320
amplification style attack but instead

181
00:07:59,460 --> 00:08:04,440
<font color="#E5E5E5">of</font><font color="#CCCCCC"> having just a single slash thirty-two</font>

182
00:08:01,320 --> 00:08:07,409
IP for the<font color="#E5E5E5"> destination it's many many</font>

183
00:08:04,440 --> 00:08:12,750
many hosts greater<font color="#CCCCCC"> than slash 23 like a</font>

184
00:08:07,409 --> 00:08:16,289
slash 16<font color="#E5E5E5"> maybe</font><font color="#CCCCCC"> 65,000 Plus addresses so</font>

185
00:08:12,750 --> 00:08:18,870
the victim is likely<font color="#E5E5E5"> one</font><font color="#CCCCCC"> of those 65,000</font>

186
00:08:16,289 --> 00:08:20,610
hosts in the<font color="#E5E5E5"> attack</font><font color="#CCCCCC"> and supposedly the</font>

187
00:08:18,870 --> 00:08:22,050
intention behind this<font color="#CCCCCC"> attack is to</font>

188
00:08:20,610 --> 00:08:25,650
destabilize the infrastructure<font color="#CCCCCC"> that</font>

189
00:08:22,050 --> 00:08:28,080
<font color="#CCCCCC">actually supports the victim itself so</font>

190
00:08:25,650 --> 00:08:30,539
<font color="#CCCCCC">to to a normal host you see this</font><font color="#E5E5E5"> doesn't</font>

191
00:08:28,080 --> 00:08:33,029
<font color="#CCCCCC">look</font><font color="#E5E5E5"> like</font><font color="#CCCCCC"> a DDoS attacks this is one mag</font>

192
00:08:30,539 --> 00:08:34,919
two Meg's of traffic but to a router

193
00:08:33,029 --> 00:08:36,539
where<font color="#E5E5E5"> this subnet lives</font><font color="#CCCCCC"> it's no</font>

194
00:08:34,919 --> 00:08:40,770
<font color="#E5E5E5">different than a</font><font color="#CCCCCC"> standard volumetric</font>

195
00:08:36,539 --> 00:08:44,310
attack it<font color="#E5E5E5"> can be 300</font><font color="#CCCCCC"> 400 gig the</font>

196
00:08:40,770 --> 00:08:49,770
difference is<font color="#CCCCCC"> our typical detection and</font>

197
00:08:44,310 --> 00:08:52,250
mitigation strategies don't<font color="#E5E5E5"> work here so</font>

198
00:08:49,770 --> 00:08:55,250
this brings up a few important<font color="#E5E5E5"> questions</font>

199
00:08:52,250 --> 00:08:55,250
first

200
00:08:57,300 --> 00:09:04,199
can we can<font color="#E5E5E5"> we advertise that many</font>

201
00:09:01,509 --> 00:09:09,009
individual host routes for<font color="#E5E5E5"> a redirection</font>

202
00:09:04,199 --> 00:09:10,959
<font color="#E5E5E5">that's not a good</font><font color="#CCCCCC"> idea let's say we</font>

203
00:09:09,009 --> 00:09:14,559
advertise<font color="#E5E5E5"> the whole block that's under</font>

204
00:09:10,959 --> 00:09:15,638
attack<font color="#CCCCCC"> we redirect 2/16</font><font color="#E5E5E5"> first of all is</font>

205
00:09:14,559 --> 00:09:19,809
that<font color="#E5E5E5"> going to be the most preferred</font>

206
00:09:15,639 --> 00:09:21,699
route<font color="#CCCCCC"> probably not are we</font><font color="#E5E5E5"> going to be</font>

207
00:09:19,809 --> 00:09:23,709
able<font color="#CCCCCC"> to</font><font color="#E5E5E5"> take that much</font><font color="#CCCCCC"> capacity at our</font>

208
00:09:21,699 --> 00:09:27,370
<font color="#E5E5E5">scrubbing</font><font color="#CCCCCC"> Center that's another big</font>

209
00:09:23,709 --> 00:09:28,989
question<font color="#E5E5E5"> so the carpet bomb attack just</font>

210
00:09:27,370 --> 00:09:30,730
goes to show that<font color="#CCCCCC"> it's not necessarily</font>

211
00:09:28,990 --> 00:09:35,290
<font color="#E5E5E5">the size of the</font><font color="#CCCCCC"> ddos that matters it's</font>

212
00:09:30,730 --> 00:09:36,990
how<font color="#CCCCCC"> you use it so how can we block</font>

213
00:09:35,290 --> 00:09:40,959
traffic closer to the source

214
00:09:36,990 --> 00:09:43,209
well<font color="#CCCCCC"> BGP flowspec might have some</font><font color="#E5E5E5"> of</font>

215
00:09:40,959 --> 00:09:46,149
those<font color="#E5E5E5"> answers right we've seen a lot of</font>

216
00:09:43,209 --> 00:09:47,469
<font color="#E5E5E5">talks this week about</font><font color="#CCCCCC"> BGP flowspec and I</font>

217
00:09:46,149 --> 00:09:50,470
know a lot<font color="#CCCCCC"> of you are</font><font color="#E5E5E5"> familiar with the</font>

218
00:09:47,470 --> 00:09:52,660
BGP protocol so flowspec leverages the

219
00:09:50,470 --> 00:09:55,629
BGP protocol<font color="#E5E5E5"> and it allows us</font><font color="#CCCCCC"> to</font>

220
00:09:52,660 --> 00:09:58,660
programmatically and and rapidly install

221
00:09:55,629 --> 00:10:00,069
<font color="#E5E5E5">access control lists on a router it</font>

222
00:09:58,660 --> 00:10:02,920
provides the flexibility<font color="#E5E5E5"> to match very</font>

223
00:10:00,069 --> 00:10:04,479
specific traffic<font color="#E5E5E5"> types and to perform</font><font color="#CCCCCC"> an</font>

224
00:10:02,920 --> 00:10:08,128
action on that traffic such as to pass

225
00:10:04,480 --> 00:10:10,480
drop rate limit or set the<font color="#E5E5E5"> next hop and</font>

226
00:10:08,129 --> 00:10:15,519
we can do this<font color="#CCCCCC"> at the</font><font color="#E5E5E5"> very edge of</font><font color="#CCCCCC"> our</font>

227
00:10:10,480 --> 00:10:18,759
network at line rate so<font color="#E5E5E5"> flow spec is not</font>

228
00:10:15,519 --> 00:10:22,449
without<font color="#E5E5E5"> its</font><font color="#CCCCCC"> own risks</font><font color="#E5E5E5"> the the major one</font>

229
00:10:18,759 --> 00:10:24,970
<font color="#E5E5E5">being the risk to router stability since</font>

230
00:10:22,449 --> 00:10:27,250
each flow spec rule requires a bit<font color="#E5E5E5"> of</font>

231
00:10:24,970 --> 00:10:29,139
memory<font color="#E5E5E5"> in the router every rule you send</font>

232
00:10:27,250 --> 00:10:32,920
brings it closer and<font color="#E5E5E5"> closer to the</font>

233
00:10:29,139 --> 00:10:34,899
maximum<font color="#E5E5E5"> for this reason very strong</font>

234
00:10:32,920 --> 00:10:38,290
policy<font color="#CCCCCC"> and process</font><font color="#E5E5E5"> controls need to be</font>

235
00:10:34,899 --> 00:10:40,569
in<font color="#E5E5E5"> place</font><font color="#CCCCCC"> that will prevent</font><font color="#E5E5E5"> over V</font>

236
00:10:38,290 --> 00:10:41,800
utilize a<font color="#CCCCCC"> ssin reporting</font><font color="#E5E5E5"> functionality</font>

237
00:10:40,569 --> 00:10:44,679
is<font color="#CCCCCC"> also something</font><font color="#E5E5E5"> that's not built into</font>

238
00:10:41,800 --> 00:10:46,540
flow spec<font color="#E5E5E5"> so it does become a</font><font color="#CCCCCC"> bit of a</font>

239
00:10:44,679 --> 00:10:50,649
pain<font color="#CCCCCC"> to gather metrics and we know</font>

240
00:10:46,540 --> 00:10:51,759
executives<font color="#CCCCCC"> load</font><font color="#E5E5E5"> metrics so this isn't</font>

241
00:10:50,649 --> 00:10:53,439
<font color="#E5E5E5">something that's really a con of the</font>

242
00:10:51,759 --> 00:10:55,209
protocol it's more of an<font color="#CCCCCC"> observation and</font>

243
00:10:53,439 --> 00:10:57,129
<font color="#E5E5E5">I think it's something that the</font>

244
00:10:55,209 --> 00:11:01,029
<font color="#CCCCCC">community at large can hopefully address</font>

245
00:10:57,129 --> 00:11:03,879
<font color="#E5E5E5">in the</font><font color="#CCCCCC"> future now let's look</font><font color="#E5E5E5"> back</font><font color="#CCCCCC"> at</font>

246
00:11:01,029 --> 00:11:05,379
this high level of network overview we

247
00:11:03,879 --> 00:11:06,020
can see our<font color="#E5E5E5"> hosts again is browsing the</font>

248
00:11:05,379 --> 00:11:10,510
<font color="#E5E5E5">Internet</font>

249
00:11:06,020 --> 00:11:13,939
online games<font color="#CCCCCC"> this</font><font color="#E5E5E5"> time an attack occurs</font>

250
00:11:10,510 --> 00:11:16,100
<font color="#E5E5E5">but we have flowspec mitigation</font><font color="#CCCCCC"> the</font>

251
00:11:13,940 --> 00:11:18,140
countermeasures are applied at the very

252
00:11:16,100 --> 00:11:21,800
edge of<font color="#E5E5E5"> the network and the bad traffic</font>

253
00:11:18,140 --> 00:11:24,709
<font color="#E5E5E5">is stopped hopefully if the attack was</font>

254
00:11:21,800 --> 00:11:26,959
<font color="#CCCCCC">more complex we could use the set next</font>

255
00:11:24,709 --> 00:11:30,529
hop feature to redirect<font color="#CCCCCC"> maybe some of</font>

256
00:11:26,959 --> 00:11:33,109
the traffic<font color="#CCCCCC"> maybe all UDP traffic</font><font color="#E5E5E5"> and if</font>

257
00:11:30,529 --> 00:11:35,810
it gets<font color="#E5E5E5"> really</font><font color="#CCCCCC"> bad and all else fails we</font>

258
00:11:33,110 --> 00:11:38,089
<font color="#CCCCCC">can use that</font><font color="#E5E5E5"> same set</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> next hop feature</font>

259
00:11:35,810 --> 00:11:40,819
to redirect<font color="#E5E5E5"> all of the traffic</font><font color="#CCCCCC"> to this</font>

260
00:11:38,089 --> 00:11:42,440
<font color="#E5E5E5">to a scrubbing</font><font color="#CCCCCC"> center now at least at</font>

261
00:11:40,820 --> 00:11:43,760
this point<font color="#E5E5E5"> we have less bad</font><font color="#CCCCCC"> traffic</font>

262
00:11:42,440 --> 00:11:49,670
going in through our network<font color="#CCCCCC"> in</font>

263
00:11:43,760 --> 00:11:52,069
transiting another way that<font color="#E5E5E5"> flowspec is</font>

264
00:11:49,670 --> 00:11:55,189
being leveraged<font color="#E5E5E5"> in in the industries</font>

265
00:11:52,070 --> 00:11:57,620
with regards to<font color="#E5E5E5"> DDoS peering now I</font>

266
00:11:55,190 --> 00:11:59,300
genuinely believe that<font color="#E5E5E5"> the</font><font color="#CCCCCC"> only way we</font>

267
00:11:57,620 --> 00:12:00,560
can eliminate DDoS on the<font color="#E5E5E5"> Internet</font>

268
00:11:59,300 --> 00:12:04,069
is a collaborative<font color="#CCCCCC"> approach with</font>

269
00:12:00,560 --> 00:12:07,040
<font color="#E5E5E5">everybody and and to me DDoS peering is</font>

270
00:12:04,070 --> 00:12:09,110
the future<font color="#CCCCCC"> of DDoS prevention but it</font>

271
00:12:07,040 --> 00:12:12,260
requires participation<font color="#CCCCCC"> from as</font><font color="#E5E5E5"> many as</font>

272
00:12:09,110 --> 00:12:14,630
possible<font color="#CCCCCC"> to be effective so there's a</font>

273
00:12:12,260 --> 00:12:15,290
previous talk at<font color="#CCCCCC"> nano at 71 Century</font><font color="#E5E5E5"> Link</font>

274
00:12:14,630 --> 00:12:17,839
<font color="#E5E5E5">and AT&T</font>

275
00:12:15,290 --> 00:12:20,000
today a talk on<font color="#E5E5E5"> DDoS peering is very</font>

276
00:12:17,839 --> 00:12:22,730
good we should check that<font color="#E5E5E5"> out but in</font>

277
00:12:20,000 --> 00:12:25,100
<font color="#E5E5E5">short</font><font color="#CCCCCC"> DDoS peering allows for flowspec</font>

278
00:12:22,730 --> 00:12:26,660
rules to be sent from peers in an effort

279
00:12:25,100 --> 00:12:31,070
to<font color="#CCCCCC"> block traffic as close to the origin</font>

280
00:12:26,660 --> 00:12:33,290
<font color="#E5E5E5">as possible so there's some really big</font>

281
00:12:31,070 --> 00:12:35,570
risks<font color="#CCCCCC"> of course it</font><font color="#E5E5E5"> requires incredibly</font>

282
00:12:33,290 --> 00:12:38,089
tight controls again but in addition<font color="#CCCCCC"> to</font>

283
00:12:35,570 --> 00:12:39,920
<font color="#CCCCCC">just</font><font color="#E5E5E5"> drop stopping traffic inbound</font><font color="#CCCCCC"> these</font>

284
00:12:38,089 --> 00:12:41,750
rules<font color="#E5E5E5"> can be used to prevent customers</font>

285
00:12:39,920 --> 00:12:46,010
from sending<font color="#E5E5E5"> DDoS traffic outbound as</font>

286
00:12:41,750 --> 00:12:48,529
well so in the graphic below we see<font color="#CCCCCC"> a</font>

287
00:12:46,010 --> 00:12:51,260
DDoS<font color="#E5E5E5"> attack that's marked in red coming</font>

288
00:12:48,529 --> 00:12:56,990
through<font color="#E5E5E5"> is PA in through is PB and it's</font>

289
00:12:51,260 --> 00:12:59,630
<font color="#E5E5E5">hitting that host the mitigation rule or</font>

290
00:12:56,990 --> 00:13:02,000
the<font color="#CCCCCC"> flowspec rule would be</font><font color="#E5E5E5"> sent from is</font>

291
00:12:59,630 --> 00:13:03,950
PB into<font color="#E5E5E5"> is PA and saying hey</font><font color="#CCCCCC"> blocked</font>

292
00:13:02,000 --> 00:13:07,160
this traffic for us and that rule would

293
00:13:03,950 --> 00:13:13,040
<font color="#E5E5E5">be installed at the very edge of</font><font color="#CCCCCC"> ice</font><font color="#E5E5E5"> pas</font>

294
00:13:07,160 --> 00:13:14,480
<font color="#CCCCCC">network in another</font><font color="#E5E5E5"> scenario we</font><font color="#CCCCCC"> have this</font>

295
00:13:13,040 --> 00:13:17,870
customer sending some outbound<font color="#CCCCCC"> DDoS</font>

296
00:13:14,480 --> 00:13:19,520
traffic from<font color="#E5E5E5"> ISP B and ice PA says hey</font>

297
00:13:17,870 --> 00:13:22,250
install<font color="#E5E5E5"> that full</font><font color="#CCCCCC"> spectral</font>

298
00:13:19,520 --> 00:13:23,630
and block this traffic<font color="#E5E5E5"> and once again we</font>

299
00:13:22,250 --> 00:13:31,910
<font color="#CCCCCC">stopped the</font><font color="#E5E5E5"> traffic at the very edge of</font>

300
00:13:23,630 --> 00:13:35,170
the network<font color="#CCCCCC"> all right</font><font color="#E5E5E5"> so a small</font><font color="#CCCCCC"> group</font>

301
00:13:31,910 --> 00:13:37,839
of<font color="#E5E5E5"> individuals at Charter Communications</font>

302
00:13:35,170 --> 00:13:41,089
<font color="#CCCCCC">worked together to develop</font><font color="#E5E5E5"> an auto</font>

303
00:13:37,840 --> 00:13:45,110
mitigation<font color="#E5E5E5"> solution using flowspec</font>

304
00:13:41,090 --> 00:13:48,010
this solution<font color="#E5E5E5"> starts with a controller</font>

305
00:13:45,110 --> 00:13:51,010
<font color="#E5E5E5">the controller's written in Python and</font>

306
00:13:48,010 --> 00:13:54,920
here's how it works

307
00:13:51,010 --> 00:13:57,770
so first the controller listens for<font color="#CCCCCC"> a</font>

308
00:13:54,920 --> 00:14:01,819
syslog message<font color="#E5E5E5"> coming in from the DDoS</font>

309
00:13:57,770 --> 00:14:04,340
detection platform once that message is

310
00:14:01,820 --> 00:14:05,840
received<font color="#CCCCCC"> it looks for key words in the</font>

311
00:14:04,340 --> 00:14:08,540
message<font color="#E5E5E5"> identifies</font><font color="#CCCCCC"> if this is a</font>

312
00:14:05,840 --> 00:14:10,430
legitimate<font color="#E5E5E5"> attack</font><font color="#CCCCCC"> and if it's one that</font>

313
00:14:08,540 --> 00:14:13,069
we want<font color="#E5E5E5"> to engage on and send these</font>

314
00:14:10,430 --> 00:14:15,680
<font color="#CCCCCC">close</font><font color="#E5E5E5"> spec rules for and if it is a</font>

315
00:14:13,070 --> 00:14:17,810
valid start message we input that<font color="#CCCCCC"> data</font>

316
00:14:15,680 --> 00:14:19,130
into a sequel database and it<font color="#E5E5E5"> stores</font>

317
00:14:17,810 --> 00:14:22,810
relevant information about<font color="#CCCCCC"> the attack</font>

318
00:14:19,130 --> 00:14:25,580
such as<font color="#E5E5E5"> being an active attack next</font>

319
00:14:22,810 --> 00:14:28,790
<font color="#E5E5E5">the flow spec rules are sent to the exit</font>

320
00:14:25,580 --> 00:14:30,800
BGP<font color="#E5E5E5"> API and X sub EGP sends the flow</font>

321
00:14:28,790 --> 00:14:32,660
spec routes<font color="#E5E5E5"> to a route reflector and</font>

322
00:14:30,800 --> 00:14:33,709
that route reflector then forwards all

323
00:14:32,660 --> 00:14:38,780
of those rules<font color="#E5E5E5"> out to the appropriate</font>

324
00:14:33,710 --> 00:14:42,890
routers for each of these mitigations

325
00:14:38,780 --> 00:14:46,579
<font color="#CCCCCC">here are the rules</font><font color="#E5E5E5"> that we push</font><font color="#CCCCCC"> so right</font>

326
00:14:42,890 --> 00:14:49,069
off<font color="#E5E5E5"> the</font><font color="#CCCCCC"> bat rate limit UDP source port</font>

327
00:14:46,580 --> 00:14:51,800
53 to 30 kilobits per second

328
00:14:49,070 --> 00:14:52,460
same with TCP syn same with UDP

329
00:14:51,800 --> 00:14:54,530
fragments

330
00:14:52,460 --> 00:14:57,740
well I'm sorry drop all UDP fragments

331
00:14:54,530 --> 00:15:00,410
<font color="#E5E5E5">and drop UDP source 53 in destination</font>

332
00:14:57,740 --> 00:15:03,770
<font color="#CCCCCC">444 as well as other common volumetric</font>

333
00:15:00,410 --> 00:15:07,790
<font color="#E5E5E5">UDP source ports SNMP version 1</font><font color="#CCCCCC"> TFTP</font>

334
00:15:03,770 --> 00:15:09,230
<font color="#E5E5E5">memcache D and then finally we rate</font>

335
00:15:07,790 --> 00:15:12,550
limit all the rest of<font color="#CCCCCC"> the traffic down</font>

336
00:15:09,230 --> 00:15:12,550
to a 100 Meg's per second

337
00:15:13,570 --> 00:15:17,730
so once the<font color="#CCCCCC"> attack is</font><font color="#E5E5E5"> over</font>

338
00:15:18,370 --> 00:15:22,389
we again<font color="#E5E5E5"> we're listening for</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> syslog</font>

339
00:15:20,440 --> 00:15:24,880
message to identify that the attack has

340
00:15:22,389 --> 00:15:27,100
been ended once that message is received

341
00:15:24,880 --> 00:15:29,079
<font color="#CCCCCC">we set the attack as inactive in the</font>

342
00:15:27,100 --> 00:15:32,220
database<font color="#CCCCCC"> and this</font><font color="#E5E5E5"> triggers the message</font>

343
00:15:29,079 --> 00:15:36,149
to<font color="#CCCCCC"> xob GP to</font><font color="#E5E5E5"> withdraw the flowspec rules</font>

344
00:15:32,220 --> 00:15:38,829
<font color="#E5E5E5">in case we miss a syslog stop message</font>

345
00:15:36,149 --> 00:15:40,660
<font color="#CCCCCC">there's a cron job that runs every hour</font>

346
00:15:38,829 --> 00:15:42,670
and<font color="#E5E5E5"> it checks for</font><font color="#CCCCCC"> any active entry</font>

347
00:15:40,660 --> 00:15:46,589
that's older than<font color="#CCCCCC"> six hours</font><font color="#E5E5E5"> and if so it</font>

348
00:15:42,670 --> 00:15:46,589
withdraws those rules as well<font color="#E5E5E5"> as well</font>

349
00:15:47,220 --> 00:15:53,050
<font color="#E5E5E5">all right</font><font color="#CCCCCC"> we're going to look</font><font color="#E5E5E5"> at the</font>

350
00:15:51,190 --> 00:15:54,399
recorded demo next<font color="#E5E5E5"> before</font><font color="#CCCCCC"> we begin I</font>

351
00:15:53,050 --> 00:15:56,620
would<font color="#E5E5E5"> like to give a shout out to</font><font color="#CCCCCC"> the</font>

352
00:15:54,399 --> 00:16:01,319
authors of this solution

353
00:15:56,620 --> 00:16:04,509
<font color="#CCCCCC">pratik lotia Tom</font><font color="#E5E5E5"> Bowlby and rich Compton</font>

354
00:16:01,319 --> 00:16:09,660
so I'm not<font color="#E5E5E5"> exactly sure how</font><font color="#CCCCCC"> to start the</font>

355
00:16:04,509 --> 00:16:09,660
video<font color="#E5E5E5"> maybe they can start it for me</font>

356
00:16:15,230 --> 00:16:22,590
perfect<font color="#CCCCCC"> alright so as the video starts</font>

357
00:16:18,600 --> 00:16:25,440
we're<font color="#E5E5E5"> tailing a log on</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> controller we</font>

358
00:16:22,590 --> 00:16:28,110
hop<font color="#E5E5E5"> over to the victim in this case a</font>

359
00:16:25,440 --> 00:16:29,700
virtual<font color="#E5E5E5"> machine and we look at the end</font>

360
00:16:28,110 --> 00:16:31,320
load command to show the incoming<font color="#E5E5E5"> and</font>

361
00:16:29,700 --> 00:16:34,110
outgoing traffic<font color="#E5E5E5"> utilization so you can</font>

362
00:16:31,320 --> 00:16:37,080
see the device IP ending in dot<font color="#E5E5E5"> two to</font>

363
00:16:34,110 --> 00:16:38,940
<font color="#E5E5E5">six there at the top next</font><font color="#CCCCCC"> we move over</font>

364
00:16:37,080 --> 00:16:42,300
to<font color="#E5E5E5"> the attacker</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> to simulate the</font>

365
00:16:38,940 --> 00:16:45,030
attack we use H ping<font color="#CCCCCC"> UDP flood with the</font>

366
00:16:42,300 --> 00:16:47,219
source port 1 1 2 1<font color="#CCCCCC"> 1 and we randomized</font>

367
00:16:45,030 --> 00:16:49,500
<font color="#E5E5E5">the source IP so that it looks like</font><font color="#CCCCCC"> a</font>

368
00:16:47,220 --> 00:16:51,060
legitimate<font color="#E5E5E5"> attack</font><font color="#CCCCCC"> now back over</font><font color="#E5E5E5"> on the</font>

369
00:16:49,500 --> 00:16:53,430
<font color="#E5E5E5">victim we can see our</font><font color="#CCCCCC"> utilization</font><font color="#E5E5E5"> has</font>

370
00:16:51,060 --> 00:16:55,920
<font color="#E5E5E5">climbed up to over 500 Meg's per second</font>

371
00:16:53,430 --> 00:16:57,180
this<font color="#CCCCCC"> is not a very large DDoS attack but</font>

372
00:16:55,920 --> 00:17:00,839
it's big<font color="#E5E5E5"> enough for the simulation to</font>

373
00:16:57,180 --> 00:17:02,939
work back on<font color="#CCCCCC"> the controller now we wait</font>

374
00:17:00,840 --> 00:17:08,190
<font color="#CCCCCC">a</font><font color="#E5E5E5"> few seconds for</font><font color="#CCCCCC"> this syslog message to</font>

375
00:17:02,940 --> 00:17:10,560
<font color="#CCCCCC">appear there it</font><font color="#E5E5E5"> is so we see that our</font>

376
00:17:08,190 --> 00:17:12,630
host<font color="#E5E5E5"> IP</font><font color="#CCCCCC"> 2 2 6</font><font color="#E5E5E5"> is in there we see the UDP</font>

377
00:17:10,560 --> 00:17:14,760
signature and we see that this<font color="#E5E5E5"> is a</font>

378
00:17:12,630 --> 00:17:16,860
<font color="#E5E5E5">valid DDoS attack and we've started</font>

379
00:17:14,760 --> 00:17:18,750
<font color="#CCCCCC">announcing flowspec rules</font><font color="#E5E5E5"> back over on</font>

380
00:17:16,859 --> 00:17:20,639
<font color="#E5E5E5">the victim you can see the traffic is</font>

381
00:17:18,750 --> 00:17:22,890
ceased<font color="#E5E5E5"> and now we look at the route</font>

382
00:17:20,640 --> 00:17:28,320
reflector<font color="#CCCCCC"> these are the rules that we've</font>

383
00:17:22,890 --> 00:17:30,210
pushed<font color="#E5E5E5"> for that host IP and then finally</font>

384
00:17:28,319 --> 00:17:33,000
we pop over<font color="#CCCCCC"> to the peering router and we</font>

385
00:17:30,210 --> 00:17:37,050
see those same rules populated in the

386
00:17:33,000 --> 00:17:38,730
<font color="#E5E5E5">router itself we</font><font color="#CCCCCC"> also see the counters</font>

387
00:17:37,050 --> 00:17:39,960
as they appear<font color="#E5E5E5"> in there the formatting</font>

388
00:17:38,730 --> 00:17:41,700
<font color="#E5E5E5">is a little bit off</font><font color="#CCCCCC"> because it's a very</font>

389
00:17:39,960 --> 00:17:43,440
long<font color="#CCCCCC"> flowspec</font><font color="#E5E5E5"> rule but</font><font color="#CCCCCC"> you can kind of</font>

390
00:17:41,700 --> 00:17:48,990
see that those counters are rapidly

391
00:17:43,440 --> 00:17:50,310
<font color="#CCCCCC">increasing at this</font><font color="#E5E5E5"> point back again at a</font>

392
00:17:48,990 --> 00:17:52,470
flow<font color="#E5E5E5"> spec controller we've received</font>

393
00:17:50,310 --> 00:17:55,590
another syslog message<font color="#E5E5E5"> this script was</font>

394
00:17:52,470 --> 00:17:59,460
smart enough to<font color="#E5E5E5"> ignore this</font><font color="#CCCCCC"> message as</font>

395
00:17:55,590 --> 00:18:01,500
it's<font color="#E5E5E5"> not a valid start message</font><font color="#CCCCCC"> so one</font>

396
00:17:59,460 --> 00:18:02,820
thing that<font color="#E5E5E5"> is not included in the end of</font>

397
00:18:01,500 --> 00:18:04,440
the video here we can still see<font color="#E5E5E5"> the host</font>

398
00:18:02,820 --> 00:18:07,530
is running clean with very low traffic

399
00:18:04,440 --> 00:18:09,750
utilization<font color="#E5E5E5"> the demo doesn't include a</font>

400
00:18:07,530 --> 00:18:11,970
message<font color="#CCCCCC"> of the stop message in the</font>

401
00:18:09,750 --> 00:18:14,840
withdraw<font color="#E5E5E5"> but a few minutes after the</font>

402
00:18:11,970 --> 00:18:21,660
<font color="#CCCCCC">attack the flow spec rules are removed</font>

403
00:18:14,840 --> 00:18:23,669
<font color="#CCCCCC">so one last</font><font color="#E5E5E5"> thing before we</font><font color="#CCCCCC"> end I did</font>

404
00:18:21,660 --> 00:18:26,460
want to announce<font color="#E5E5E5"> that we</font><font color="#CCCCCC"> have open</font>

405
00:18:23,670 --> 00:18:28,230
<font color="#CCCCCC">source</font><font color="#E5E5E5"> this code it is on</font><font color="#CCCCCC"> github you can</font>

406
00:18:26,460 --> 00:18:32,490
<font color="#E5E5E5">find it by searching</font>

407
00:18:28,230 --> 00:18:35,100
-<font color="#E5E5E5"> Otto - flowspec</font><font color="#CCCCCC"> and we would love to</font>

408
00:18:32,490 --> 00:18:37,290
see others input and contribute and<font color="#E5E5E5"> make</font>

409
00:18:35,100 --> 00:18:39,750
<font color="#E5E5E5">this better</font><font color="#CCCCCC"> one of the things that we</font>

410
00:18:37,290 --> 00:18:42,389
didn't<font color="#CCCCCC"> really enable on this is ipv6</font><font color="#E5E5E5"> and</font>

411
00:18:39,750 --> 00:18:44,540
now<font color="#E5E5E5"> there's not a whole lot of ipv6 DDoS</font>

412
00:18:42,390 --> 00:18:47,370
attack traffic<font color="#CCCCCC"> going on out there but</font>

413
00:18:44,540 --> 00:18:50,220
the future will absolutely have ipv6

414
00:18:47,370 --> 00:18:52,168
DDoS<font color="#E5E5E5"> so maybe that's something</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> you</font>

415
00:18:50,220 --> 00:18:58,190
know we can all work on and enable that

416
00:18:52,169 --> 00:18:58,190
<font color="#CCCCCC">and can make this solution even</font><font color="#E5E5E5"> better</font>

417
00:19:01,700 --> 00:19:04,700
questions

418
00:19:05,380 --> 00:19:10,030
hello<font color="#E5E5E5"> John O'Brien University of</font>

419
00:19:07,870 --> 00:19:11,830
<font color="#E5E5E5">Pennsylvania</font><font color="#CCCCCC"> hello nice talk thanks very</font>

420
00:19:10,030 --> 00:19:14,080
much for<font color="#E5E5E5"> doing this work thank you I was</font>

421
00:19:11,830 --> 00:19:17,260
just wondering are you<font color="#E5E5E5"> aware of the</font>

422
00:19:14,080 --> 00:19:18,730
utter service from<font color="#CCCCCC"> Team</font><font color="#E5E5E5"> Camry yes</font>

423
00:19:17,260 --> 00:19:20,470
<font color="#CCCCCC">okay</font><font color="#E5E5E5"> because it seems to me</font><font color="#CCCCCC"> like</font><font color="#E5E5E5"> this</font>

424
00:19:18,730 --> 00:19:22,140
would<font color="#E5E5E5"> be there's some great sort</font><font color="#CCCCCC"> of</font>

425
00:19:20,470 --> 00:19:25,539
opportunity to collaborate<font color="#E5E5E5"> and maybe</font>

426
00:19:22,140 --> 00:19:27,970
work with<font color="#E5E5E5"> those guys to add flowspec</font>

427
00:19:25,539 --> 00:19:31,210
capability to their service and then and

428
00:19:27,970 --> 00:19:34,179
then maybe offer your tooling to the

429
00:19:31,210 --> 00:19:36,309
participants<font color="#CCCCCC"> absolutely</font><font color="#E5E5E5"> yeah not just</font>

430
00:19:34,179 --> 00:19:38,350
the others but the the<font color="#CCCCCC"> DDoS</font><font color="#E5E5E5"> open threat</font>

431
00:19:36,309 --> 00:19:41,889
<font color="#E5E5E5">signaling as well as another project in</font>

432
00:19:38,350 --> 00:19:46,928
the ITF that's underway<font color="#E5E5E5"> thank you thank</font>

433
00:19:41,890 --> 00:19:50,470
you hey<font color="#CCCCCC"> Steve</font><font color="#E5E5E5"> users from kensic um</font>

434
00:19:46,929 --> 00:19:52,870
<font color="#E5E5E5">question if</font><font color="#CCCCCC"> your</font><font color="#E5E5E5"> DDoS</font><font color="#CCCCCC"> platforms</font>

435
00:19:50,470 --> 00:19:57,820
supported<font color="#E5E5E5"> flows back directly would you</font>

436
00:19:52,870 --> 00:19:59,979
rather just<font color="#E5E5E5"> use that okay yeah I think I</font>

437
00:19:57,820 --> 00:20:01,870
<font color="#E5E5E5">think in</font><font color="#CCCCCC"> general a scripted solution</font>

438
00:19:59,980 --> 00:20:03,159
like<font color="#CCCCCC"> this is is is great especially for</font>

439
00:20:01,870 --> 00:20:05,820
demonstration especially for getting

440
00:20:03,159 --> 00:20:08,380
that type of<font color="#CCCCCC"> awareness into the industry</font>

441
00:20:05,820 --> 00:20:12,520
<font color="#CCCCCC">but</font><font color="#E5E5E5"> in general we like to have nice</font>

442
00:20:08,380 --> 00:20:15,039
<font color="#CCCCCC">vendors supported software defensively</font>

443
00:20:12,520 --> 00:20:17,408
<font color="#CCCCCC">sir</font><font color="#E5E5E5"> I have what is probably a dumb</font>

444
00:20:15,039 --> 00:20:19,870
amateur question but I'm sort of amused

445
00:20:17,409 --> 00:20:22,120
by the<font color="#CCCCCC"> carpet-bombing and wondering</font><font color="#E5E5E5"> if</font>

446
00:20:19,870 --> 00:20:23,590
you think<font color="#CCCCCC"> that when a carpet bomb</font>

447
00:20:22,120 --> 00:20:25,418
happens they're targeting you and your

448
00:20:23,590 --> 00:20:27,820
routers we're just trying<font color="#E5E5E5"> to hide and</font>

449
00:20:25,419 --> 00:20:29,289
make<font color="#E5E5E5"> it harder</font><font color="#CCCCCC"> or free to mitigate the</font>

450
00:20:27,820 --> 00:20:30,700
actual target<font color="#CCCCCC"> that's a great question I</font>

451
00:20:29,289 --> 00:20:32,940
<font color="#CCCCCC">think there's several reasons why they</font>

452
00:20:30,700 --> 00:20:36,880
happen I think<font color="#E5E5E5"> one</font><font color="#CCCCCC"> reason may be that</font>

453
00:20:32,940 --> 00:20:39,330
the attacker accidentally put a larger

454
00:20:36,880 --> 00:20:41,860
subnet in their attack destination right

455
00:20:39,330 --> 00:20:43,840
<font color="#CCCCCC">but to your</font><font color="#E5E5E5"> point yeah I also believe</font>

456
00:20:41,860 --> 00:20:46,928
that<font color="#E5E5E5"> a lot of those carpet bomb attacks</font>

457
00:20:43,840 --> 00:20:52,449
are directly meant to<font color="#CCCCCC"> disable eyes the</font>

458
00:20:46,929 --> 00:20:55,390
ISP infrastructure<font color="#CCCCCC"> thanks Don Smith</font>

459
00:20:52,450 --> 00:20:58,059
centrally hey Don<font color="#CCCCCC"> um unwanted traffic</font>

460
00:20:55,390 --> 00:20:59,630
removal service<font color="#CCCCCC"> utters</font><font color="#E5E5E5"> yes I hate</font>

461
00:20:58,059 --> 00:21:02,930
hearing

462
00:20:59,630 --> 00:21:04,310
anyways<font color="#CCCCCC"> it hasn't</font><font color="#E5E5E5"> worked that is it</font>

463
00:21:02,930 --> 00:21:05,420
<font color="#E5E5E5">hasn't failed</font><font color="#CCCCCC"> but it's not working</font>

464
00:21:04,310 --> 00:21:08,389
<font color="#CCCCCC">either</font><font color="#E5E5E5"> right</font>

465
00:21:05,420 --> 00:21:10,580
I did reports<font color="#E5E5E5"> for months on the</font>

466
00:21:08,390 --> 00:21:13,430
advertisements to us as we are<font color="#E5E5E5"> part of</font>

467
00:21:10,580 --> 00:21:15,199
the<font color="#CCCCCC"> Gherkin group</font><font color="#E5E5E5"> and I found a</font><font color="#CCCCCC"> couple</font>

468
00:21:13,430 --> 00:21:16,970
<font color="#E5E5E5">of large</font><font color="#CCCCCC"> attacks</font><font color="#E5E5E5"> most the time there</font>

469
00:21:15,200 --> 00:21:18,890
were small attacks<font color="#CCCCCC"> or in the hundreds of</font>

470
00:21:16,970 --> 00:21:20,990
<font color="#CCCCCC">mags right</font><font color="#E5E5E5"> so people were</font><font color="#CCCCCC"> asking us to</font>

471
00:21:18,890 --> 00:21:23,330
<font color="#E5E5E5">black hole destination black hole filter</font>

472
00:21:20,990 --> 00:21:25,040
based<font color="#E5E5E5"> on a few hundred Meg's of traffic</font>

473
00:21:23,330 --> 00:21:27,439
<font color="#E5E5E5">never seen</font><font color="#CCCCCC"> the network</font><font color="#E5E5E5"> great I'm gonna</font>

474
00:21:25,040 --> 00:21:29,050
give him<font color="#CCCCCC"> that</font><font color="#E5E5E5"> free service how do I sell</font>

475
00:21:27,440 --> 00:21:31,790
that to management<font color="#E5E5E5"> I couldn't find a</font><font color="#CCCCCC"> way</font>

476
00:21:29,050 --> 00:21:35,389
nothing to<font color="#E5E5E5"> fail I just I can't I can't</font>

477
00:21:31,790 --> 00:21:37,700
sell<font color="#CCCCCC"> absolutely so I'm not declaring</font>

478
00:21:35,390 --> 00:21:38,930
others dead I'm just saying it was an

479
00:21:37,700 --> 00:21:41,870
attempt<font color="#CCCCCC"> to do something</font><font color="#E5E5E5"> that was great</font>

480
00:21:38,930 --> 00:21:42,380
<font color="#E5E5E5">in thought and didn't really quite work</font>

481
00:21:41,870 --> 00:21:49,850
<font color="#CCCCCC">for us</font>

482
00:21:42,380 --> 00:21:50,660
yeah thanks Don<font color="#CCCCCC"> I bred taro Rackspace</font>

483
00:21:49,850 --> 00:21:54,230
<font color="#CCCCCC">hey Brian</font>

484
00:21:50,660 --> 00:21:56,450
in your in<font color="#CCCCCC"> your demo you have seven</font>

485
00:21:54,230 --> 00:21:58,000
<font color="#CCCCCC">policies seven rules for each IP under</font>

486
00:21:56,450 --> 00:22:00,410
attack what happens in a<font color="#E5E5E5"> carpet bomb</font>

487
00:21:58,000 --> 00:22:02,450
that's a great question thousand three

488
00:22:00,410 --> 00:22:04,880
thousand so that's a<font color="#E5E5E5"> great</font><font color="#CCCCCC"> question so</font>

489
00:22:02,450 --> 00:22:07,760
<font color="#E5E5E5">with flowspec we could since it's just</font>

490
00:22:04,880 --> 00:22:09,980
<font color="#CCCCCC">like an ACL we could put instead</font><font color="#E5E5E5"> of that</font>

491
00:22:07,760 --> 00:22:12,800
/ 32 host<font color="#E5E5E5"> we could put these rules on</font>

492
00:22:09,980 --> 00:22:14,480
<font color="#E5E5E5">there first / 16</font><font color="#CCCCCC"> that would be that</font>

493
00:22:12,800 --> 00:22:18,350
would be one<font color="#E5E5E5"> way to handle that that</font>

494
00:22:14,480 --> 00:22:19,460
issue<font color="#CCCCCC"> now that actually</font><font color="#E5E5E5"> brings up an</font>

495
00:22:18,350 --> 00:22:21,350
interesting<font color="#E5E5E5"> question about how much</font>

496
00:22:19,460 --> 00:22:23,120
<font color="#CCCCCC">flowspec</font><font color="#E5E5E5"> rules can a route or even take</font>

497
00:22:21,350 --> 00:22:25,490
so I personally tipped over several

498
00:22:23,120 --> 00:22:29,629
routers just<font color="#CCCCCC"> throwing</font><font color="#E5E5E5"> as</font><font color="#CCCCCC"> many flowspec</font>

499
00:22:25,490 --> 00:22:31,700
rules as I possibly could<font color="#CCCCCC"> so again we</font>

500
00:22:29,630 --> 00:22:35,180
run into that that question<font color="#CCCCCC"> all the time</font>

501
00:22:31,700 --> 00:22:37,940
is can we can we really<font color="#CCCCCC"> off-ramp</font><font color="#E5E5E5"> or</font><font color="#CCCCCC"> can</font>

502
00:22:35,180 --> 00:22:39,500
we send 65,000 flowspec rules to a

503
00:22:37,940 --> 00:22:42,680
router and<font color="#E5E5E5"> the answer is no we can't do</font>

504
00:22:39,500 --> 00:22:43,760
<font color="#E5E5E5">that today yeah how many</font><font color="#CCCCCC"> rules did it</font>

505
00:22:42,680 --> 00:22:45,830
take to tip them<font color="#CCCCCC"> over</font>

506
00:22:43,760 --> 00:22:48,050
oh well that depends on the vendor<font color="#E5E5E5"> and</font>

507
00:22:45,830 --> 00:22:51,110
that's a good<font color="#E5E5E5"> question so different</font>

508
00:22:48,050 --> 00:22:51,980
vendors use different methods for memory

509
00:22:51,110 --> 00:22:54,260
<font color="#CCCCCC">alright fair enough</font>

510
00:22:51,980 --> 00:22:56,330
what's the least<font color="#CCCCCC"> common denominator</font><font color="#E5E5E5"> the</font>

511
00:22:54,260 --> 00:22:58,490
least<font color="#CCCCCC"> common denominator</font><font color="#E5E5E5"> okay so for</font><font color="#CCCCCC"> for</font>

512
00:22:56,330 --> 00:23:01,360
large core routers we find<font color="#E5E5E5"> that 10,000</font>

513
00:22:58,490 --> 00:23:01,360
rules is a good number

514
00:23:01,420 --> 00:23:09,760
thank you any other<font color="#E5E5E5"> questions oh</font><font color="#CCCCCC"> yeah</font>

515
00:23:05,590 --> 00:23:11,500
<font color="#CCCCCC">KCDC o</font><font color="#E5E5E5"> BYU quick questions so let's</font>

516
00:23:09,760 --> 00:23:13,570
assume<font color="#CCCCCC"> that you have a recursive</font><font color="#E5E5E5"> DNS</font>

517
00:23:11,500 --> 00:23:15,850
resolver that is in the address<font color="#E5E5E5"> space</font><font color="#CCCCCC"> so</font>

518
00:23:13,570 --> 00:23:19,929
what happens if your rules<font color="#E5E5E5"> are dropping</font>

519
00:23:15,850 --> 00:23:24,490
<font color="#E5E5E5">packets from source port 53</font><font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> glad you</font>

520
00:23:19,930 --> 00:23:26,920
asked so<font color="#E5E5E5"> and again this is kind</font><font color="#CCCCCC"> of why I</font>

521
00:23:24,490 --> 00:23:30,270
put<font color="#CCCCCC"> that in</font><font color="#E5E5E5"> there in bold because</font><font color="#CCCCCC"> I want</font>

522
00:23:26,920 --> 00:23:33,400
<font color="#E5E5E5">people</font><font color="#CCCCCC"> to get triggered by this</font><font color="#E5E5E5"> right</font>

523
00:23:30,270 --> 00:23:36,400
<font color="#E5E5E5">essentially if you are blocking UDP</font>

524
00:23:33,400 --> 00:23:39,370
source port 53<font color="#E5E5E5"> you will not be</font><font color="#CCCCCC"> able to</font>

525
00:23:36,400 --> 00:23:43,630
run a DNS<font color="#CCCCCC"> server on at</font><font color="#E5E5E5"> your home</font>

526
00:23:39,370 --> 00:23:46,989
essentially right<font color="#E5E5E5"> another another thing</font>

527
00:23:43,630 --> 00:23:49,780
<font color="#CCCCCC">to</font><font color="#E5E5E5"> consider too</font><font color="#CCCCCC"> is how much</font><font color="#E5E5E5"> DNS source</font>

528
00:23:46,990 --> 00:23:52,270
port 53 traffic is<font color="#CCCCCC"> actually legitimate</font>

529
00:23:49,780 --> 00:23:56,020
and how much would<font color="#CCCCCC"> you</font><font color="#E5E5E5"> like</font><font color="#CCCCCC"> coming to</font>

530
00:23:52,270 --> 00:23:58,930
your network<font color="#E5E5E5"> you know so in general I</font>

531
00:23:56,020 --> 00:24:00,430
<font color="#CCCCCC">think that</font><font color="#E5E5E5"> the that you're gonna have</font>

532
00:23:58,930 --> 00:24:03,130
<font color="#CCCCCC">people on both sides that say well</font>

533
00:24:00,430 --> 00:24:04,510
please don't<font color="#E5E5E5"> block my UDP 53 and you'll</font>

534
00:24:03,130 --> 00:24:06,220
have people<font color="#E5E5E5"> that say please take all the</font>

535
00:24:04,510 --> 00:24:09,010
<font color="#CCCCCC">bad traffic off of my network</font><font color="#E5E5E5"> and you</font>

536
00:24:06,220 --> 00:24:10,420
can't please everyone<font color="#E5E5E5"> yeah I mean it all</font>

537
00:24:09,010 --> 00:24:11,920
depends on<font color="#E5E5E5"> the nature of the network and</font>

538
00:24:10,420 --> 00:24:14,130
how you have it architected and so forth

539
00:24:11,920 --> 00:24:14,130
<font color="#CCCCCC">right</font>

540
00:24:18,190 --> 00:24:25,160
all right I think that's<font color="#E5E5E5"> all thank</font><font color="#CCCCCC"> you</font>

541
00:24:21,990 --> 00:24:25,160
[Applause]

