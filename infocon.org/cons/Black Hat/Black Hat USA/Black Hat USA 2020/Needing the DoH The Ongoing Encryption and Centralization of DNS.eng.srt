1
00:00:04,540 --> 00:00:14,340
[Music]

2
00:00:15,200 --> 00:00:16,320
hello

3
00:00:16,320 --> 00:00:18,320
my name is eldridge alexander i'm going

4
00:00:18,320 --> 00:00:19,600
to be speaking to you today about the

5
00:00:19,600 --> 00:00:20,800
ongoing encryption

6
00:00:20,800 --> 00:00:24,080
and centralization of dns i currently

7
00:00:24,080 --> 00:00:26,080
work for duo security

8
00:00:26,080 --> 00:00:29,519
in a section called duo labs

9
00:00:29,519 --> 00:00:32,800
so before i dive in to the ongoing

10
00:00:32,800 --> 00:00:34,800
encryption and centralization of dns

11
00:00:34,800 --> 00:00:37,120
i want to talk about how we got from

12
00:00:37,120 --> 00:00:37,840
there to here

13
00:00:37,840 --> 00:00:40,960
why this is a relevant topic today

14
00:00:40,960 --> 00:00:44,000
so paul macapetras and john

15
00:00:44,000 --> 00:00:47,840
postal created dns in 1983.

16
00:00:47,840 --> 00:00:50,719
this was made in an effort to replace

17
00:00:50,719 --> 00:00:51,199
the

18
00:00:51,199 --> 00:00:54,239
previous way of communicating host names

19
00:00:54,239 --> 00:00:55,440
across the internet which was

20
00:00:55,440 --> 00:00:57,840
distributing a

21
00:00:57,840 --> 00:01:00,879
file to every host on the internet as

22
00:01:00,879 --> 00:01:01,840
the internet grew

23
00:01:01,840 --> 00:01:04,799
this became unwieldy and cumbersome so

24
00:01:04,799 --> 00:01:06,240
these two engineers wanted a way

25
00:01:06,240 --> 00:01:09,119
for people to be able to access hosts by

26
00:01:09,119 --> 00:01:10,640
name instead of ip address

27
00:01:10,640 --> 00:01:13,280
without having to distribute a hosts

28
00:01:13,280 --> 00:01:15,600
text file across the entire internet

29
00:01:15,600 --> 00:01:19,360
so they created dns

30
00:01:19,520 --> 00:01:21,759
and in the beginning and up until very

31
00:01:21,759 --> 00:01:22,960
recently it was

32
00:01:22,960 --> 00:01:25,119
unencrypted and even today the vast

33
00:01:25,119 --> 00:01:26,400
majority of it is

34
00:01:26,400 --> 00:01:29,920
unencrypted so why any new protocols or

35
00:01:29,920 --> 00:01:31,280
systems that we

36
00:01:31,280 --> 00:01:34,159
start working on today uh it's generally

37
00:01:34,159 --> 00:01:35,680
something that is considered very early

38
00:01:35,680 --> 00:01:37,280
on is how are we going to secure this

39
00:01:37,280 --> 00:01:40,720
or how are we going to encrypt this

40
00:01:40,720 --> 00:01:44,159
and the reason was multi-fold

41
00:01:44,159 --> 00:01:46,079
in the early days of the internet

42
00:01:46,079 --> 00:01:47,920
security was not as much of a major

43
00:01:47,920 --> 00:01:49,119
concern there were less

44
00:01:49,119 --> 00:01:51,360
hosts there were less complex threats

45
00:01:51,360 --> 00:01:52,799
there were less actors

46
00:01:52,799 --> 00:01:55,680
on the internet not only that but as you

47
00:01:55,680 --> 00:01:56,640
can see from

48
00:01:56,640 --> 00:01:59,360
dr maka petrus's quote here a

49
00:01:59,360 --> 00:02:01,119
distributed system was already an

50
00:02:01,119 --> 00:02:03,680
uphill battle convincing people to adopt

51
00:02:03,680 --> 00:02:05,759
it across the entire internet

52
00:02:05,759 --> 00:02:08,720
so making it more easily adoptable was a

53
00:02:08,720 --> 00:02:12,879
crucial point of the creation of dns

54
00:02:13,120 --> 00:02:15,680
so why is this relevant now dns was

55
00:02:15,680 --> 00:02:17,440
created in 1983

56
00:02:17,440 --> 00:02:21,280
now 37 years later why is dns encryption

57
00:02:21,280 --> 00:02:22,560
a relevant topic

58
00:02:22,560 --> 00:02:25,360
http was invented in 89 started rolling

59
00:02:25,360 --> 00:02:26,480
out in the early 90s

60
00:02:26,480 --> 00:02:28,560
and we started encrypting http into

61
00:02:28,560 --> 00:02:29,760
https

62
00:02:29,760 --> 00:02:31,920
much much earlier so why has it taken us

63
00:02:31,920 --> 00:02:33,360
37 years

64
00:02:33,360 --> 00:02:34,959
to go from an unencrypted to an

65
00:02:34,959 --> 00:02:36,640
encrypted protocol if it's something

66
00:02:36,640 --> 00:02:38,959
that we need to do so this is where i'm

67
00:02:38,959 --> 00:02:40,080
going to start diving into some of the

68
00:02:40,080 --> 00:02:40,879
history of

69
00:02:40,879 --> 00:02:43,840
why this became a relevant point of

70
00:02:43,840 --> 00:02:45,360
conversation

71
00:02:45,360 --> 00:02:48,400
so first i want to break down a simple

72
00:02:48,400 --> 00:02:49,599
web request

73
00:02:49,599 --> 00:02:52,879
from an average consumer so this is a

74
00:02:52,879 --> 00:02:54,560
picture that you might see

75
00:02:54,560 --> 00:02:56,480
in the web in the early 90s there's it's

76
00:02:56,480 --> 00:02:58,239
a diagram of what might happen

77
00:02:58,239 --> 00:03:01,840
on the web in the early 90s so

78
00:03:01,840 --> 00:03:03,840
first the endpoint sends the dns query

79
00:03:03,840 --> 00:03:05,840
to a dns server the dns server responds

80
00:03:05,840 --> 00:03:07,040
with the ip address

81
00:03:07,040 --> 00:03:09,519
the endpoint then sends its http get

82
00:03:09,519 --> 00:03:11,840
request to the web server by ip address

83
00:03:11,840 --> 00:03:14,879
which then gets the response

84
00:03:14,879 --> 00:03:16,959
so everything in the green box is sent

85
00:03:16,959 --> 00:03:19,440
in the clear in the early 90s dns

86
00:03:19,440 --> 00:03:21,760
was as it is today by and large

87
00:03:21,760 --> 00:03:22,640
unencrypted

88
00:03:22,640 --> 00:03:25,680
and http was just http

89
00:03:25,680 --> 00:03:29,280
https wasn't really on the scene yet

90
00:03:29,280 --> 00:03:31,840
so everything was in the clear a

91
00:03:31,840 --> 00:03:32,560
middleware

92
00:03:32,560 --> 00:03:34,560
whether human or robot malicious or

93
00:03:34,560 --> 00:03:36,959
benign sitting in between the endpoint

94
00:03:36,959 --> 00:03:38,319
in either of those servers

95
00:03:38,319 --> 00:03:40,720
would be able to read everything that

96
00:03:40,720 --> 00:03:42,319
crossed

97
00:03:42,319 --> 00:03:45,360
the connection so this was one of the

98
00:03:45,360 --> 00:03:47,200
things that uh started out

99
00:03:47,200 --> 00:03:49,440
being widely adoptable this being the

100
00:03:49,440 --> 00:03:50,799
web in http

101
00:03:50,799 --> 00:03:52,799
started out being widely adoptable and

102
00:03:52,799 --> 00:03:55,439
adopted by people across the entire

103
00:03:55,439 --> 00:03:56,319
internet

104
00:03:56,319 --> 00:03:58,560
not only that but the web started

105
00:03:58,560 --> 00:03:59,599
absorbing

106
00:03:59,599 --> 00:04:02,720
other protocols into itself so while

107
00:04:02,720 --> 00:04:03,840
other protocols

108
00:04:03,840 --> 00:04:07,599
still might exist generally most people

109
00:04:07,599 --> 00:04:10,000
will access those protocols through a

110
00:04:10,000 --> 00:04:10,959
web

111
00:04:10,959 --> 00:04:13,120
interface so a couple of examples are

112
00:04:13,120 --> 00:04:14,239
our email

113
00:04:14,239 --> 00:04:15,920
even though a lot of the email protocols

114
00:04:15,920 --> 00:04:17,279
still exist and a lot of email

115
00:04:17,279 --> 00:04:18,399
communication

116
00:04:18,399 --> 00:04:20,639
still happens through protocols like

117
00:04:20,639 --> 00:04:21,600
smtp

118
00:04:21,600 --> 00:04:24,639
pop things like that most end users

119
00:04:24,639 --> 00:04:25,360
today

120
00:04:25,360 --> 00:04:27,360
are going to be receiving and writing

121
00:04:27,360 --> 00:04:29,680
emails through a web client even if the

122
00:04:29,680 --> 00:04:31,360
back end of that web client

123
00:04:31,360 --> 00:04:33,759
is communicating using something other

124
00:04:33,759 --> 00:04:35,919
than http

125
00:04:35,919 --> 00:04:39,040
chat communication protocols xmpp which

126
00:04:39,040 --> 00:04:40,320
is great

127
00:04:40,320 --> 00:04:42,240
started being accessible through web

128
00:04:42,240 --> 00:04:43,600
interfaces whether through

129
00:04:43,600 --> 00:04:45,919
an aggregator like amiibo or through a

130
00:04:45,919 --> 00:04:47,680
particular provider's implementation

131
00:04:47,680 --> 00:04:49,360
such as google chat

132
00:04:49,360 --> 00:04:51,199
transferring files that's something that

133
00:04:51,199 --> 00:04:52,560
the protocol isn't even

134
00:04:52,560 --> 00:04:55,120
quite as relevant anymore ftp is still

135
00:04:55,120 --> 00:04:55,680
around

136
00:04:55,680 --> 00:04:58,160
and it's still used but many people for

137
00:04:58,160 --> 00:04:59,040
transferring

138
00:04:59,040 --> 00:05:00,720
files to friends and family and

139
00:05:00,720 --> 00:05:02,240
colleagues are using

140
00:05:02,240 --> 00:05:05,039
online data sharing tools such as google

141
00:05:05,039 --> 00:05:05,919
drive or

142
00:05:05,919 --> 00:05:08,320
dropbox even today more and more

143
00:05:08,320 --> 00:05:10,240
protocols are being moved to the web

144
00:05:10,240 --> 00:05:13,039
video conferencing tends to happen if

145
00:05:13,039 --> 00:05:13,360
not

146
00:05:13,360 --> 00:05:15,520
always in webrtc tends to be broadly

147
00:05:15,520 --> 00:05:17,039
supported across the major

148
00:05:17,039 --> 00:05:19,360
video chat platforms and even other

149
00:05:19,360 --> 00:05:21,039
protocols that are do not have a web

150
00:05:21,039 --> 00:05:21,759
equivalent

151
00:05:21,759 --> 00:05:23,680
are quite often wrapped in websockets

152
00:05:23,680 --> 00:05:25,600
depending on implementation

153
00:05:25,600 --> 00:05:28,400
so in the beginning we have this new

154
00:05:28,400 --> 00:05:29,919
protocol of http

155
00:05:29,919 --> 00:05:32,000
it's sent in the clear the same as the

156
00:05:32,000 --> 00:05:33,360
dns query

157
00:05:33,360 --> 00:05:36,240
and it's so successful in the internet

158
00:05:36,240 --> 00:05:37,520
world that it starts absorbing other

159
00:05:37,520 --> 00:05:39,840
protocols into itself

160
00:05:39,840 --> 00:05:43,520
so let's forward fast forward to 2015 to

161
00:05:43,520 --> 00:05:46,000
2020 this is google's transparency

162
00:05:46,000 --> 00:05:46,720
report

163
00:05:46,720 --> 00:05:49,440
so you can see in the last five years

164
00:05:49,440 --> 00:05:51,280
depending on platform

165
00:05:51,280 --> 00:05:53,360
people have gone from accessing sites

166
00:05:53,360 --> 00:05:55,199
from a little under 50 percent

167
00:05:55,199 --> 00:05:58,240
to over 90 percent on average

168
00:05:58,240 --> 00:06:01,440
accessing sites in https so

169
00:06:01,440 --> 00:06:03,360
most things have been absorbed most

170
00:06:03,360 --> 00:06:04,960
communications across the internet

171
00:06:04,960 --> 00:06:07,919
have been absorbed into http and http

172
00:06:07,919 --> 00:06:09,600
has mostly shifted

173
00:06:09,600 --> 00:06:13,440
to https so again these are broad trends

174
00:06:13,440 --> 00:06:14,800
they're not indicative of everything

175
00:06:14,800 --> 00:06:17,199
happening on the internet but broadly

176
00:06:17,199 --> 00:06:19,600
this is a good picture of what an

177
00:06:19,600 --> 00:06:21,440
average endpoint or an average user

178
00:06:21,440 --> 00:06:23,759
is going to be doing so let's jump

179
00:06:23,759 --> 00:06:25,360
forward a little bit we've got this

180
00:06:25,360 --> 00:06:27,840
early 90s picture of a dns request and

181
00:06:27,840 --> 00:06:29,600
then an http request

182
00:06:29,600 --> 00:06:33,039
as http starts shifting to https

183
00:06:33,039 --> 00:06:35,440
this is no longer all sent in the clear

184
00:06:35,440 --> 00:06:38,400
dns stays in the clear but http

185
00:06:38,400 --> 00:06:41,759
shifts to an encrypted model so

186
00:06:41,759 --> 00:06:44,000
anyone sitting in the middle a human or

187
00:06:44,000 --> 00:06:45,919
robot is not able to

188
00:06:45,919 --> 00:06:48,800
intercept data aggregate or manipulate

189
00:06:48,800 --> 00:06:51,360
the data passing in the http connection

190
00:06:51,360 --> 00:06:54,160
to the web server so this was one of the

191
00:06:54,160 --> 00:06:55,360
first things to

192
00:06:55,360 --> 00:06:59,199
to go dark so to speak

193
00:06:59,199 --> 00:07:01,759
and then some other things happened one

194
00:07:01,759 --> 00:07:02,479
of the first

195
00:07:02,479 --> 00:07:05,199
was reverse proxies and cloud computing

196
00:07:05,199 --> 00:07:05,840
became

197
00:07:05,840 --> 00:07:09,039
more popular for delivering services so

198
00:07:09,039 --> 00:07:12,000
in this example the destination ip

199
00:07:12,000 --> 00:07:13,759
address was actually a pretty useful

200
00:07:13,759 --> 00:07:15,120
piece of information

201
00:07:15,120 --> 00:07:17,520
if a person was sending a packet to an

202
00:07:17,520 --> 00:07:19,599
ip address even if the contents

203
00:07:19,599 --> 00:07:22,479
of the packet were encrypted the ip

204
00:07:22,479 --> 00:07:23,759
address itself was a

205
00:07:23,759 --> 00:07:25,759
pretty useful bit of information if the

206
00:07:25,759 --> 00:07:28,000
ip block was owned by for example

207
00:07:28,000 --> 00:07:30,240
stanford university you could probably

208
00:07:30,240 --> 00:07:31,919
make a decent assumption

209
00:07:31,919 --> 00:07:33,599
that the person was going to a site

210
00:07:33,599 --> 00:07:35,360
owned or operated by

211
00:07:35,360 --> 00:07:38,880
stanford university as more and more

212
00:07:38,880 --> 00:07:41,599
sites and services moved to either cloud

213
00:07:41,599 --> 00:07:42,400
computing

214
00:07:42,400 --> 00:07:44,879
for example digitalocean rackspace

215
00:07:44,879 --> 00:07:47,120
google cloud microsoft azure amazon web

216
00:07:47,120 --> 00:07:48,000
services

217
00:07:48,000 --> 00:07:51,039
or they used those services or not but

218
00:07:51,039 --> 00:07:51,919
protected them

219
00:07:51,919 --> 00:07:54,560
by cdn networks such as cloudflare or

220
00:07:54,560 --> 00:07:55,520
fastly

221
00:07:55,520 --> 00:07:57,599
the amount of ip block owners that

222
00:07:57,599 --> 00:07:59,440
people were actually accessing

223
00:07:59,440 --> 00:08:02,080
became very narrow almost no matter what

224
00:08:02,080 --> 00:08:02,800
site

225
00:08:02,800 --> 00:08:05,039
folks are going to on the internet they

226
00:08:05,039 --> 00:08:06,400
are going to be going to an ip

227
00:08:06,400 --> 00:08:09,919
block owned by one of these small number

228
00:08:09,919 --> 00:08:11,440
of providers

229
00:08:11,440 --> 00:08:13,360
even if the end server is not actually

230
00:08:13,360 --> 00:08:14,479
hosted

231
00:08:14,479 --> 00:08:16,400
on those providers for example my

232
00:08:16,400 --> 00:08:17,680
personal website

233
00:08:17,680 --> 00:08:20,319
hosted on a raspberry pi is out of my

234
00:08:20,319 --> 00:08:20,960
home

235
00:08:20,960 --> 00:08:23,360
but the ip address you'll be hitting is

236
00:08:23,360 --> 00:08:25,360
cloudflare that's the reverse proxy

237
00:08:25,360 --> 00:08:27,759
in this diagram the web server is

238
00:08:27,759 --> 00:08:29,759
running on my home ip but the only ip

239
00:08:29,759 --> 00:08:31,840
address you'll see is the one owned by

240
00:08:31,840 --> 00:08:33,839
cloudflare so not a particularly useful

241
00:08:33,839 --> 00:08:35,039
piece of information

242
00:08:35,039 --> 00:08:36,320
because while i could be going to my

243
00:08:36,320 --> 00:08:38,159
site you can't see the contents i could

244
00:08:38,159 --> 00:08:39,440
very well be going to one of the many

245
00:08:39,440 --> 00:08:41,760
other properties

246
00:08:41,760 --> 00:08:45,040
behind those reverse proxies so

247
00:08:45,040 --> 00:08:47,120
the ip address became less of a useful

248
00:08:47,120 --> 00:08:48,800
piece of information the contents of

249
00:08:48,800 --> 00:08:51,360
http was opaque to any middleware

250
00:08:51,360 --> 00:08:54,240
the connection to the end web server was

251
00:08:54,240 --> 00:08:55,920
is probably encrypted it is in the case

252
00:08:55,920 --> 00:08:56,640
of my site

253
00:08:56,640 --> 00:08:58,160
but it doesn't really matter because the

254
00:08:58,160 --> 00:08:59,440
middleware is sitting between the

255
00:08:59,440 --> 00:09:01,120
endpoint and the reverse proxy

256
00:09:01,120 --> 00:09:03,040
not the reverse proxy and the web server

257
00:09:03,040 --> 00:09:04,640
at least for the purposes

258
00:09:04,640 --> 00:09:08,080
of this example so the reverse proxy

259
00:09:08,080 --> 00:09:09,600
is not just going to one side it's going

260
00:09:09,600 --> 00:09:11,120
to many many sites now

261
00:09:11,120 --> 00:09:13,600
so the ip address is no longer useful

262
00:09:13,600 --> 00:09:14,480
data to gather

263
00:09:14,480 --> 00:09:16,560
at least not extremely so in most

264
00:09:16,560 --> 00:09:18,160
situations

265
00:09:18,160 --> 00:09:20,480
now i want to go back a bit and correct

266
00:09:20,480 --> 00:09:22,959
a minor thing that i said earlier and

267
00:09:22,959 --> 00:09:24,240
explain it a little bit more

268
00:09:24,240 --> 00:09:26,880
because the ip address was actually

269
00:09:26,880 --> 00:09:28,160
useful information

270
00:09:28,160 --> 00:09:29,519
in the early days of the internet in the

271
00:09:29,519 --> 00:09:31,519
early days of the web the fact that

272
00:09:31,519 --> 00:09:32,800
someone knew the host name

273
00:09:32,800 --> 00:09:35,040
was not that you were trying to go to

274
00:09:35,040 --> 00:09:37,440
was not a particularly egregious over

275
00:09:37,440 --> 00:09:39,920
sharing of information because there was

276
00:09:39,920 --> 00:09:42,080
a close to one-to-one mapping between

277
00:09:42,080 --> 00:09:43,839
iep addresses and hosts

278
00:09:43,839 --> 00:09:46,720
in the early days of the web so the tls

279
00:09:46,720 --> 00:09:47,440
handshake

280
00:09:47,440 --> 00:09:49,839
that is used to establish the https

281
00:09:49,839 --> 00:09:50,800
connection

282
00:09:50,800 --> 00:09:53,440
sends the host name for example

283
00:09:53,440 --> 00:09:54,640
google.com

284
00:09:54,640 --> 00:09:57,600
in the clear using a sni a server name

285
00:09:57,600 --> 00:09:58,560
indication

286
00:09:58,560 --> 00:10:00,399
so this is sent in the clear before the

287
00:10:00,399 --> 00:10:02,079
https

288
00:10:02,079 --> 00:10:06,000
tunnel is established so

289
00:10:06,000 --> 00:10:09,839
while the ip address was useful

290
00:10:09,839 --> 00:10:11,279
this was not really a huge problem

291
00:10:11,279 --> 00:10:13,200
because you could derive that data

292
00:10:13,200 --> 00:10:15,680
fairly accurately anyway by gathering

293
00:10:15,680 --> 00:10:17,120
data around the ip address

294
00:10:17,120 --> 00:10:19,519
today with the reverse proxies making

295
00:10:19,519 --> 00:10:20,240
that data

296
00:10:20,240 --> 00:10:22,800
particularly useless the fact that it is

297
00:10:22,800 --> 00:10:23,839
sent in the clear

298
00:10:23,839 --> 00:10:26,480
in the tls handshake in sni is actually

299
00:10:26,480 --> 00:10:28,079
a problem because it's sharing data that

300
00:10:28,079 --> 00:10:29,680
is not easily inferable

301
00:10:29,680 --> 00:10:31,760
from any other place in the http

302
00:10:31,760 --> 00:10:33,760
connection

303
00:10:33,760 --> 00:10:37,519
so tls 1.2 and predecessors

304
00:10:37,519 --> 00:10:40,320
do send this in the clear tls 1.3 which

305
00:10:40,320 --> 00:10:41,279
is starting to see

306
00:10:41,279 --> 00:10:44,880
wider and wider adoption is replacing

307
00:10:44,880 --> 00:10:46,320
this with an encrypted

308
00:10:46,320 --> 00:10:50,160
version so the entire https connection

309
00:10:50,160 --> 00:10:52,399
including the host name sent in the

310
00:10:52,399 --> 00:10:54,000
handshake for tls

311
00:10:54,000 --> 00:10:55,519
is now something that is completely

312
00:10:55,519 --> 00:11:00,560
opaque to middleware

313
00:11:00,560 --> 00:11:02,399
so looking at middleware through the

314
00:11:02,399 --> 00:11:04,560
years these are the things that it

315
00:11:04,560 --> 00:11:05,839
particularly found

316
00:11:05,839 --> 00:11:07,839
useful and again middleware meaning

317
00:11:07,839 --> 00:11:10,079
human or robot malicious or benign

318
00:11:10,079 --> 00:11:12,480
could infer data about you or manipulate

319
00:11:12,480 --> 00:11:13,120
data

320
00:11:13,120 --> 00:11:15,839
going to your endpoint by intercepting

321
00:11:15,839 --> 00:11:18,560
the dns query the destination ip address

322
00:11:18,560 --> 00:11:20,880
the contents of the http connection

323
00:11:20,880 --> 00:11:21,680
itself

324
00:11:21,680 --> 00:11:25,360
or the sni in the tls handshake header

325
00:11:25,360 --> 00:11:27,200
that was at the beginning of the web

326
00:11:27,200 --> 00:11:29,040
today most of this

327
00:11:29,040 --> 00:11:31,839
is going away or has gone so the dns

328
00:11:31,839 --> 00:11:32,480
query

329
00:11:32,480 --> 00:11:34,800
is the last relevant piece of

330
00:11:34,800 --> 00:11:36,640
information in establishing a web

331
00:11:36,640 --> 00:11:37,440
connection

332
00:11:37,440 --> 00:11:39,920
that actually tells where the user is

333
00:11:39,920 --> 00:11:41,279
going

334
00:11:41,279 --> 00:11:44,079
so why is dns relevant now why is dns

335
00:11:44,079 --> 00:11:45,120
encryption relevant now

336
00:11:45,120 --> 00:11:47,440
37 years later it's basically the only

337
00:11:47,440 --> 00:11:48,959
thing left in establishing a web

338
00:11:48,959 --> 00:11:49,680
connection

339
00:11:49,680 --> 00:11:51,760
that is unencrypted and still shares

340
00:11:51,760 --> 00:11:53,040
relevance information

341
00:11:53,040 --> 00:11:56,240
namely the destination host now i want

342
00:11:56,240 --> 00:11:56,959
to

343
00:11:56,959 --> 00:11:59,839
take a small side tangent and talk about

344
00:11:59,839 --> 00:12:01,440
middleware i've been saying

345
00:12:01,440 --> 00:12:04,160
middleware human or robot benign or

346
00:12:04,160 --> 00:12:05,360
malicious this has been

347
00:12:05,360 --> 00:12:08,720
a continuous discussion point with

348
00:12:08,720 --> 00:12:11,600
my colleagues and my team and my friends

349
00:12:11,600 --> 00:12:12,720
uh

350
00:12:12,720 --> 00:12:15,600
what is the concept of a benign

351
00:12:15,600 --> 00:12:16,480
middleware

352
00:12:16,480 --> 00:12:18,079
this was something that i personally

353
00:12:18,079 --> 00:12:20,399
struggled to really wrap my head around

354
00:12:20,399 --> 00:12:23,120
as a privacy and security enthusiast i

355
00:12:23,120 --> 00:12:24,560
thought that okay hey if you're going

356
00:12:24,560 --> 00:12:25,200
from

357
00:12:25,200 --> 00:12:26,880
a to b then you should go from a to b

358
00:12:26,880 --> 00:12:28,320
and nobody in the middle

359
00:12:28,320 --> 00:12:31,040
should be able to intercept it and i was

360
00:12:31,040 --> 00:12:32,880
trying to figure out what reconciliation

361
00:12:32,880 --> 00:12:34,560
or what reason there might be

362
00:12:34,560 --> 00:12:38,160
to have a proxy that was actually

363
00:12:38,160 --> 00:12:40,560
a good reason to have it so i spoke with

364
00:12:40,560 --> 00:12:41,200
my friend

365
00:12:41,200 --> 00:12:44,079
jordan wright who's my colleague and he

366
00:12:44,079 --> 00:12:46,000
gave me some really good examples to

367
00:12:46,000 --> 00:12:48,079
contrast with the malicious examples

368
00:12:48,079 --> 00:12:50,240
that i had seen in my career

369
00:12:50,240 --> 00:12:52,720
so these are pretty well one-to-one maps

370
00:12:52,720 --> 00:12:54,560
that's the same technologies being used

371
00:12:54,560 --> 00:12:55,760
for benign

372
00:12:55,760 --> 00:12:58,160
and malicious purposes so the first one

373
00:12:58,160 --> 00:12:59,279
is visibility

374
00:12:59,279 --> 00:13:01,760
if you have a large corporate network or

375
00:13:01,760 --> 00:13:03,120
organizational network

376
00:13:03,120 --> 00:13:05,120
you need to do effective defense be able

377
00:13:05,120 --> 00:13:07,600
to see what your endpoints are doing

378
00:13:07,600 --> 00:13:10,320
what your users are doing not just

379
00:13:10,320 --> 00:13:12,240
visibility but if you're able to

380
00:13:12,240 --> 00:13:14,959
manipulate the traffic itself dns or

381
00:13:14,959 --> 00:13:15,839
otherwise

382
00:13:15,839 --> 00:13:19,440
malware blocking is a huge opportunity

383
00:13:19,440 --> 00:13:21,360
for middleware to be useful to

384
00:13:21,360 --> 00:13:22,720
organizations

385
00:13:22,720 --> 00:13:25,120
not only that but data loss prevention

386
00:13:25,120 --> 00:13:26,320
if you're able to

387
00:13:26,320 --> 00:13:29,120
monitor establish and even prevent in

388
00:13:29,120 --> 00:13:30,160
some cases

389
00:13:30,160 --> 00:13:32,720
dns queries from being responded to or

390
00:13:32,720 --> 00:13:34,639
being responded to accurately

391
00:13:34,639 --> 00:13:37,120
then you were able to prevent data loss

392
00:13:37,120 --> 00:13:38,480
in a lot of scenarios

393
00:13:38,480 --> 00:13:41,360
that you might not otherwise be able to

394
00:13:41,360 --> 00:13:42,959
so now the equivalent technologies on

395
00:13:42,959 --> 00:13:44,079
the malicious side

396
00:13:44,079 --> 00:13:47,040
are non-stakeholder data aggregation so

397
00:13:47,040 --> 00:13:48,079
what's visibility

398
00:13:48,079 --> 00:13:50,320
in an organization monitoring the dns of

399
00:13:50,320 --> 00:13:52,160
their enterprise devices

400
00:13:52,160 --> 00:13:53,839
accessing enterprise networks with

401
00:13:53,839 --> 00:13:55,199
enterprise data

402
00:13:55,199 --> 00:13:57,600
for an end consumer using their laptop

403
00:13:57,600 --> 00:13:58,639
to access

404
00:13:58,639 --> 00:14:00,959
consumer sites on the internet that data

405
00:14:00,959 --> 00:14:03,199
aggregation is providing visibility

406
00:14:03,199 --> 00:14:05,199
but it is not providing any benefit to

407
00:14:05,199 --> 00:14:07,120
the stakeholder of either the

408
00:14:07,120 --> 00:14:10,399
content provider or the end user

409
00:14:10,399 --> 00:14:12,959
malware blocking is effectively just

410
00:14:12,959 --> 00:14:13,760
lying about

411
00:14:13,760 --> 00:14:17,040
dns responses use the dns request for a

412
00:14:17,040 --> 00:14:19,360
host name that is known to present

413
00:14:19,360 --> 00:14:21,120
malware to its users

414
00:14:21,120 --> 00:14:23,839
your enterprise middleware will lie and

415
00:14:23,839 --> 00:14:24,480
say

416
00:14:24,480 --> 00:14:27,959
the actual address of this site is

417
00:14:27,959 --> 00:14:30,959
0.0.0.0 or redirect you in some other

418
00:14:30,959 --> 00:14:34,079
in some other mechanism to a non-malware

419
00:14:34,079 --> 00:14:34,720
site

420
00:14:34,720 --> 00:14:36,720
that can communicate with you response

421
00:14:36,720 --> 00:14:38,639
alteration in

422
00:14:38,639 --> 00:14:40,560
malicious ways can mean a few different

423
00:14:40,560 --> 00:14:42,320
things the most common example

424
00:14:42,320 --> 00:14:43,680
is if you were on some internet

425
00:14:43,680 --> 00:14:45,519
providers and you go to a page that does

426
00:14:45,519 --> 00:14:47,199
not have a dns record or you attempt to

427
00:14:47,199 --> 00:14:48,079
go to one

428
00:14:48,079 --> 00:14:50,000
what should happen according to the

429
00:14:50,000 --> 00:14:51,680
standards and specifications

430
00:14:51,680 --> 00:14:54,480
is you should receive no response from

431
00:14:54,480 --> 00:14:55,839
your dns server

432
00:14:55,839 --> 00:14:59,120
or a non-resolvable response that your

433
00:14:59,120 --> 00:15:00,800
browser can then use to show

434
00:15:00,800 --> 00:15:02,800
this page is unavailable what often

435
00:15:02,800 --> 00:15:04,720
happens is your return to response

436
00:15:04,720 --> 00:15:07,120
that redirects you to a page full of ads

437
00:15:07,120 --> 00:15:09,279
that uh financially support the internet

438
00:15:09,279 --> 00:15:10,240
provider

439
00:15:10,240 --> 00:15:12,160
that you're already paying so that is

440
00:15:12,160 --> 00:15:13,279
something that i

441
00:15:13,279 --> 00:15:15,680
i personally would consider malicious

442
00:15:15,680 --> 00:15:17,440
and not only that but reconnaissance if

443
00:15:17,440 --> 00:15:18,000
you're just

444
00:15:18,000 --> 00:15:20,079
sitting in the middle gathering data in

445
00:15:20,079 --> 00:15:22,480
middleware you can use that to launch a

446
00:15:22,480 --> 00:15:23,839
more targeted attack

447
00:15:23,839 --> 00:15:26,880
as you learn more about your targets

448
00:15:26,880 --> 00:15:29,519
so the the differences between benign

449
00:15:29,519 --> 00:15:31,199
and malicious are certainly

450
00:15:31,199 --> 00:15:32,639
somewhat opinionated there are some

451
00:15:32,639 --> 00:15:33,920
people that will hold the opinion that

452
00:15:33,920 --> 00:15:35,519
any interception between

453
00:15:35,519 --> 00:15:38,160
points a and b is inherently malicious

454
00:15:38,160 --> 00:15:40,399
because it's breaking the

455
00:15:40,399 --> 00:15:42,560
guarantees of encryption from one place

456
00:15:42,560 --> 00:15:43,519
to another

457
00:15:43,519 --> 00:15:45,120
uh there are some people that say all of

458
00:15:45,120 --> 00:15:46,880
it is benign because it's

459
00:15:46,880 --> 00:15:49,279
on behest of the network operator most

460
00:15:49,279 --> 00:15:50,480
people

461
00:15:50,480 --> 00:15:52,399
i think come to some understanding

462
00:15:52,399 --> 00:15:54,399
approximately what i'm showing here

463
00:15:54,399 --> 00:15:56,000
which is that some of these have benign

464
00:15:56,000 --> 00:15:59,759
purposes some have malicious

465
00:16:00,079 --> 00:16:02,560
so now i want to jump back to dns so we

466
00:16:02,560 --> 00:16:03,600
know that

467
00:16:03,600 --> 00:16:05,759
in the last 37 years dns has been

468
00:16:05,759 --> 00:16:06,959
broadly unencrypted

469
00:16:06,959 --> 00:16:08,800
but it is now becoming a more relevant

470
00:16:08,800 --> 00:16:10,800
talking point because it is one of the

471
00:16:10,800 --> 00:16:12,480
most relevant points to gather and

472
00:16:12,480 --> 00:16:13,759
manipulate data

473
00:16:13,759 --> 00:16:16,399
uh benignly or maliciously with

474
00:16:16,399 --> 00:16:17,440
endpoints

475
00:16:17,440 --> 00:16:18,639
so i want to talk about the new

476
00:16:18,639 --> 00:16:20,560
standards that are being

477
00:16:20,560 --> 00:16:22,560
proposed and adopted across the industry

478
00:16:22,560 --> 00:16:23,600
today

479
00:16:23,600 --> 00:16:25,920
i put dns crypt on here this is one

480
00:16:25,920 --> 00:16:27,759
that's it's a pretty good standard

481
00:16:27,759 --> 00:16:29,519
the team has done really great work in

482
00:16:29,519 --> 00:16:31,680
making it but it's not one that i

483
00:16:31,680 --> 00:16:33,360
personally am seeing broad adoption

484
00:16:33,360 --> 00:16:36,000
across multiple vendors in the industry

485
00:16:36,000 --> 00:16:39,040
endpoint or dns server wise so i wanted

486
00:16:39,040 --> 00:16:40,399
to highlight it here because it's pretty

487
00:16:40,399 --> 00:16:40,880
cool

488
00:16:40,880 --> 00:16:42,000
but it's not one i'm going to be

489
00:16:42,000 --> 00:16:44,160
spending a lot of time on today

490
00:16:44,160 --> 00:16:47,120
so i want to talk about dns over tls dot

491
00:16:47,120 --> 00:16:49,199
and dns over https

492
00:16:49,199 --> 00:16:51,120
doh these are the ones that i'm seeing

493
00:16:51,120 --> 00:16:52,560
have broad adoption

494
00:16:52,560 --> 00:16:56,399
in the industry so the

495
00:16:56,399 --> 00:16:58,560
old concerns of dns are kind of what

496
00:16:58,560 --> 00:16:59,680
i've highlighted about

497
00:16:59,680 --> 00:17:01,680
middleware now that we are encrypting it

498
00:17:01,680 --> 00:17:02,880
we are presenting

499
00:17:02,880 --> 00:17:05,439
new concerns because we have both this

500
00:17:05,439 --> 00:17:07,599
malicious and this benign middleware and

501
00:17:07,599 --> 00:17:09,119
this benign middleware

502
00:17:09,119 --> 00:17:12,959
is affected so what are these dns

503
00:17:12,959 --> 00:17:14,880
concerns well the first one is

504
00:17:14,880 --> 00:17:16,799
centralization the second reduced

505
00:17:16,799 --> 00:17:17,679
visibility

506
00:17:17,679 --> 00:17:20,720
and the third dns in layer 7. uh that's

507
00:17:20,720 --> 00:17:21,199
the

508
00:17:21,199 --> 00:17:23,039
most unprecedented one that i want to

509
00:17:23,039 --> 00:17:25,199
spend a little time on

510
00:17:25,199 --> 00:17:27,839
but first let's dive into centralization

511
00:17:27,839 --> 00:17:28,480
now this

512
00:17:28,480 --> 00:17:32,000
is in my view a pragmatic reality of

513
00:17:32,000 --> 00:17:34,080
changing such a fundamental protocol

514
00:17:34,080 --> 00:17:35,679
on the internet it's not something

515
00:17:35,679 --> 00:17:37,600
that's necessarily inherent

516
00:17:37,600 --> 00:17:41,039
to doh or dot so as

517
00:17:41,039 --> 00:17:44,559
providers start enabling and supporting

518
00:17:44,559 --> 00:17:46,000
doh and dot

519
00:17:46,000 --> 00:17:48,080
because there's such a focus on privacy

520
00:17:48,080 --> 00:17:49,200
and security

521
00:17:49,200 --> 00:17:51,360
in and outside the industry right now

522
00:17:51,360 --> 00:17:53,520
providers supporting these new encrypted

523
00:17:53,520 --> 00:17:54,640
protocols

524
00:17:54,640 --> 00:17:57,440
are able to get a lot of sway and get a

525
00:17:57,440 --> 00:17:58,559
lot of support

526
00:17:58,559 --> 00:18:02,320
from end users so while there are

527
00:18:02,320 --> 00:18:04,400
lots and lots of dns systems and servers

528
00:18:04,400 --> 00:18:05,440
out there that's the point of a

529
00:18:05,440 --> 00:18:06,559
distributed system

530
00:18:06,559 --> 00:18:08,480
only a few providers in the early days

531
00:18:08,480 --> 00:18:09,760
of doh and dot

532
00:18:09,760 --> 00:18:12,720
were providing encrypted dns notably

533
00:18:12,720 --> 00:18:15,120
google cloudflare and quad9 were the one

534
00:18:15,120 --> 00:18:16,480
were some of the earliest

535
00:18:16,480 --> 00:18:20,640
to support these uh encrypted protocols

536
00:18:20,640 --> 00:18:22,720
so out of the thousands of dns servers

537
00:18:22,720 --> 00:18:24,080
on the internet if you wanted

538
00:18:24,080 --> 00:18:26,559
to use encrypted dns you were mostly

539
00:18:26,559 --> 00:18:28,799
relegated to a handful of providers

540
00:18:28,799 --> 00:18:30,720
now in my opinion they did fairly good

541
00:18:30,720 --> 00:18:32,559
things around privacy

542
00:18:32,559 --> 00:18:35,600
and security but it was a centralization

543
00:18:35,600 --> 00:18:37,520
of what had previously been

544
00:18:37,520 --> 00:18:39,760
a distributed system or at least a

545
00:18:39,760 --> 00:18:41,679
centralization for those that wanted to

546
00:18:41,679 --> 00:18:42,320
use

547
00:18:42,320 --> 00:18:45,760
encryption so this was

548
00:18:45,760 --> 00:18:47,280
more pragmatic reality not something

549
00:18:47,280 --> 00:18:49,600
inherently a problem with doh and dot

550
00:18:49,600 --> 00:18:51,840
but the centralization of a distributed

551
00:18:51,840 --> 00:18:52,640
system

552
00:18:52,640 --> 00:18:54,720
is certainly seen as a problem by many

553
00:18:54,720 --> 00:18:55,919
myself certainly

554
00:18:55,919 --> 00:18:59,679
included so another concern is reduced

555
00:18:59,679 --> 00:19:01,280
visibility and this is something that

556
00:19:01,280 --> 00:19:03,280
applies mostly to the benign middleware

557
00:19:03,280 --> 00:19:05,760
i was speaking about a few minutes ago

558
00:19:05,760 --> 00:19:07,520
the

559
00:19:07,520 --> 00:19:10,000
ability of end users to send their dns

560
00:19:10,000 --> 00:19:11,840
requests over dot

561
00:19:11,840 --> 00:19:14,640
or doh prevented the ability for

562
00:19:14,640 --> 00:19:16,400
enterprises to monitor their dns

563
00:19:16,400 --> 00:19:17,840
requests

564
00:19:17,840 --> 00:19:20,720
it prevented dns redirection which is a

565
00:19:20,720 --> 00:19:22,880
really useful feature for

566
00:19:22,880 --> 00:19:24,480
places that are deploying for instance

567
00:19:24,480 --> 00:19:25,919
iot devices

568
00:19:25,919 --> 00:19:29,280
a common feature in network firewalls

569
00:19:29,280 --> 00:19:31,280
and other network security devices

570
00:19:31,280 --> 00:19:33,760
is the ability to take an outgoing dns

571
00:19:33,760 --> 00:19:35,280
request that for example is using a

572
00:19:35,280 --> 00:19:36,160
hard-coded

573
00:19:36,160 --> 00:19:39,440
dns destination and redirect it to your

574
00:19:39,440 --> 00:19:40,559
corporately owned

575
00:19:40,559 --> 00:19:42,799
dns server and send that response back

576
00:19:42,799 --> 00:19:43,600
to the device

577
00:19:43,600 --> 00:19:45,919
transparently to the device so if you

578
00:19:45,919 --> 00:19:47,760
have

579
00:19:47,760 --> 00:19:49,919
a handful of iot devices that are using

580
00:19:49,919 --> 00:19:51,520
their manufacturer's dns server for

581
00:19:51,520 --> 00:19:52,559
whatever reason

582
00:19:52,559 --> 00:19:54,320
and you want to block certain requests

583
00:19:54,320 --> 00:19:55,840
they're sending if the dns is

584
00:19:55,840 --> 00:19:56,480
unencrypted

585
00:19:56,480 --> 00:19:58,160
you can of course still do that even if

586
00:19:58,160 --> 00:19:59,679
they're sending their requests

587
00:19:59,679 --> 00:20:02,880
to a dns server that is not owned by you

588
00:20:02,880 --> 00:20:04,720
also dns is a control plane if you're

589
00:20:04,720 --> 00:20:06,559
attempting to block malware

590
00:20:06,559 --> 00:20:08,960
or restrict dns queries that respond

591
00:20:08,960 --> 00:20:10,320
with domains that you know

592
00:20:10,320 --> 00:20:13,440
to be bad then you can no longer do that

593
00:20:13,440 --> 00:20:14,880
if the dns is

594
00:20:14,880 --> 00:20:16,480
leaving your network in an encrypted

595
00:20:16,480 --> 00:20:18,320
fashion now there are a couple of other

596
00:20:18,320 --> 00:20:20,480
mechanisms you could do

597
00:20:20,480 --> 00:20:22,159
in a lot of times if there's a protocol

598
00:20:22,159 --> 00:20:23,600
that's providing problems with you

599
00:20:23,600 --> 00:20:25,039
you can just block the ports of that

600
00:20:25,039 --> 00:20:26,880
protocol that will of course not stop

601
00:20:26,880 --> 00:20:28,080
someone from

602
00:20:28,080 --> 00:20:30,080
changing ports but it will stop the vast

603
00:20:30,080 --> 00:20:31,360
majority of

604
00:20:31,360 --> 00:20:35,200
end users doh makes this particularly

605
00:20:35,200 --> 00:20:36,159
problematic

606
00:20:36,159 --> 00:20:38,640
because you can't really block an https

607
00:20:38,640 --> 00:20:39,760
connection

608
00:20:39,760 --> 00:20:41,919
wholesale nor could you probably

609
00:20:41,919 --> 00:20:44,320
effectively block an https connection

610
00:20:44,320 --> 00:20:47,039
to some of the most major providers like

611
00:20:47,039 --> 00:20:49,360
excuse me like cloudflare and google as

612
00:20:49,360 --> 00:20:51,280
blocking https connections to those

613
00:20:51,280 --> 00:20:52,240
destinations

614
00:20:52,240 --> 00:20:54,799
would provide a lot of pain for many

615
00:20:54,799 --> 00:20:55,280
things

616
00:20:55,280 --> 00:20:58,400
other than doh

617
00:20:58,400 --> 00:20:59,919
and then the third major concern i want

618
00:20:59,919 --> 00:21:01,520
to talk about and this is the one that i

619
00:21:01,520 --> 00:21:02,960
personally am most concerned about of

620
00:21:02,960 --> 00:21:03,840
the three

621
00:21:03,840 --> 00:21:06,640
is moving to the application layer so as

622
00:21:06,640 --> 00:21:08,640
doh and dot has become

623
00:21:08,640 --> 00:21:11,600
more broadly adopted across the industry

624
00:21:11,600 --> 00:21:13,679
in privacy and security circles it has

625
00:21:13,679 --> 00:21:14,159
not been

626
00:21:14,159 --> 00:21:16,960
as broadly adopted by the plethora of

627
00:21:16,960 --> 00:21:17,600
dns

628
00:21:17,600 --> 00:21:20,400
servers that are out there so slow

629
00:21:20,400 --> 00:21:22,559
inroads at operating system levels

630
00:21:22,559 --> 00:21:24,000
excuse me it's also not been broadly

631
00:21:24,000 --> 00:21:25,760
adopted by operating systems

632
00:21:25,760 --> 00:21:30,320
such as mac os windows so

633
00:21:30,320 --> 00:21:31,919
vendors that are very concerned about

634
00:21:31,919 --> 00:21:33,760
their end users privacy and have a

635
00:21:33,760 --> 00:21:35,039
consumer-centric

636
00:21:35,039 --> 00:21:37,440
worldview and the the most potent

637
00:21:37,440 --> 00:21:39,440
example here is firefox

638
00:21:39,440 --> 00:21:41,360
caused these application developers to

639
00:21:41,360 --> 00:21:43,440
bring in their dns resolution

640
00:21:43,440 --> 00:21:45,200
from the operating system into the

641
00:21:45,200 --> 00:21:46,960
application itself

642
00:21:46,960 --> 00:21:48,559
now that's that's a tough trade-off to

643
00:21:48,559 --> 00:21:50,720
make in my opinion for something that is

644
00:21:50,720 --> 00:21:51,919
consumer focused

645
00:21:51,919 --> 00:21:54,480
uh in the current landscape it did make

646
00:21:54,480 --> 00:21:56,480
a decent amount of sense and was an okay

647
00:21:56,480 --> 00:21:57,679
trade-off

648
00:21:57,679 --> 00:22:01,440
there were new laws in various countries

649
00:22:01,440 --> 00:22:02,799
passed that meant that

650
00:22:02,799 --> 00:22:05,440
providers intercepting dns queries were

651
00:22:05,440 --> 00:22:06,880
able to aggregate and sell

652
00:22:06,880 --> 00:22:09,600
personalized data so for an organization

653
00:22:09,600 --> 00:22:11,440
that is mostly concerned with

654
00:22:11,440 --> 00:22:14,240
end consumers and mostly concerned with

655
00:22:14,240 --> 00:22:15,520
protecting the privacy of those

656
00:22:15,520 --> 00:22:16,799
consumers

657
00:22:16,799 --> 00:22:18,400
if the operating system was not going to

658
00:22:18,400 --> 00:22:20,000
enable this new privacy protecting

659
00:22:20,000 --> 00:22:20,720
measure

660
00:22:20,720 --> 00:22:22,240
then bringing it into the application

661
00:22:22,240 --> 00:22:24,640
layer was a compromise that that made

662
00:22:24,640 --> 00:22:25,440
sense

663
00:22:25,440 --> 00:22:27,760
however this does mean that the dns

664
00:22:27,760 --> 00:22:30,159
server issued by the dhcp server

665
00:22:30,159 --> 00:22:32,400
is not going to be respected by the

666
00:22:32,400 --> 00:22:33,520
application

667
00:22:33,520 --> 00:22:35,919
so this is a problem for all of the

668
00:22:35,919 --> 00:22:38,000
aforementioned reasons as well as

669
00:22:38,000 --> 00:22:41,120
making a new point where data can leave

670
00:22:41,120 --> 00:22:43,440
the network or doh can leave the network

671
00:22:43,440 --> 00:22:46,640
partic possibly transparently to network

672
00:22:46,640 --> 00:22:47,600
operators so

673
00:22:47,600 --> 00:22:49,520
while this was a major privacy win for

674
00:22:49,520 --> 00:22:50,640
consumers

675
00:22:50,640 --> 00:22:53,039
in my opinion this was a security loss

676
00:22:53,039 --> 00:22:54,480
for network operators

677
00:22:54,480 --> 00:22:56,320
that were trying to operate benign

678
00:22:56,320 --> 00:22:58,640
middleware

679
00:22:58,640 --> 00:23:00,400
so what are the next steps what are the

680
00:23:00,400 --> 00:23:01,840
next steps that we can take as an

681
00:23:01,840 --> 00:23:02,559
industry

682
00:23:02,559 --> 00:23:04,480
to address these concerns get the

683
00:23:04,480 --> 00:23:07,120
benefits of adding encryption to

684
00:23:07,120 --> 00:23:08,480
a very important protocol on the

685
00:23:08,480 --> 00:23:11,200
internet while minimizing

686
00:23:11,200 --> 00:23:13,200
the the problems and the concerns with

687
00:23:13,200 --> 00:23:15,440
that as much as possible

688
00:23:15,440 --> 00:23:18,320
one of the first is just integrating

689
00:23:18,320 --> 00:23:20,080
more operating system support and more

690
00:23:20,080 --> 00:23:21,919
provider support across the entire

691
00:23:21,919 --> 00:23:22,880
industry

692
00:23:22,880 --> 00:23:24,640
this will mitigate centralization

693
00:23:24,640 --> 00:23:26,720
directly again centralization is a

694
00:23:26,720 --> 00:23:28,320
pragmatic reality

695
00:23:28,320 --> 00:23:31,200
so if more and more systems and services

696
00:23:31,200 --> 00:23:32,159
are supporting it

697
00:23:32,159 --> 00:23:33,840
centralization will no longer be a

698
00:23:33,840 --> 00:23:35,440
concern

699
00:23:35,440 --> 00:23:37,440
reduced visibility will be another one

700
00:23:37,440 --> 00:23:39,679
if your end points support

701
00:23:39,679 --> 00:23:42,720
dot and doh natively and your middleware

702
00:23:42,720 --> 00:23:44,880
and services support dot and doh

703
00:23:44,880 --> 00:23:45,679
natively

704
00:23:45,679 --> 00:23:47,279
then reduced visibility won't be a

705
00:23:47,279 --> 00:23:49,039
problem because you'll have visibility

706
00:23:49,039 --> 00:23:51,919
in the same places that you used to what

707
00:23:51,919 --> 00:23:54,080
these two will not directly mitigate

708
00:23:54,080 --> 00:23:56,320
is the pulling of dns into the

709
00:23:56,320 --> 00:23:57,760
application layer

710
00:23:57,760 --> 00:24:00,960
um however it will disincentivize

711
00:24:00,960 --> 00:24:02,559
browser vendors and other software

712
00:24:02,559 --> 00:24:04,080
vendors from pulling it into the

713
00:24:04,080 --> 00:24:05,679
application layer at least

714
00:24:05,679 --> 00:24:08,000
with such opinionated defaults as they

715
00:24:08,000 --> 00:24:10,000
can rely on other pieces in the stack

716
00:24:10,000 --> 00:24:12,799
to do what they consider to be the right

717
00:24:12,799 --> 00:24:14,720
decision

718
00:24:14,720 --> 00:24:17,039
so to that end i'm going to be demoing

719
00:24:17,039 --> 00:24:18,080
my

720
00:24:18,080 --> 00:24:21,120
software that i'm calling vimes and so

721
00:24:21,120 --> 00:24:23,039
i'm going to drop into a demo here

722
00:24:23,039 --> 00:24:25,360
first to just give a an explanation what

723
00:24:25,360 --> 00:24:26,960
this is meant to do

724
00:24:26,960 --> 00:24:29,440
is unlike some of the dns encryption

725
00:24:29,440 --> 00:24:30,720
proxies that exist

726
00:24:30,720 --> 00:24:32,320
on the market today that sends those

727
00:24:32,320 --> 00:24:34,000
centralized providers

728
00:24:34,000 --> 00:24:37,279
this tool will look at the dns server

729
00:24:37,279 --> 00:24:39,120
that your system is using by default

730
00:24:39,120 --> 00:24:41,919
almost always on an on an endpoint

731
00:24:41,919 --> 00:24:44,480
because you have received that

732
00:24:44,480 --> 00:24:47,840
from a dhcp lease it will test it to see

733
00:24:47,840 --> 00:24:49,919
if it supports dns encryption

734
00:24:49,919 --> 00:24:52,799
and then opportunistically upgrade your

735
00:24:52,799 --> 00:24:54,000
dns connection

736
00:24:54,000 --> 00:24:55,919
but still use the dns server that your

737
00:24:55,919 --> 00:24:58,320
system is wanting to use

738
00:24:58,320 --> 00:25:03,039
so i'm going to jump into the video here

739
00:25:03,200 --> 00:25:05,679
so first off i'll draw your attention to

740
00:25:05,679 --> 00:25:06,799
this is a pretty

741
00:25:06,799 --> 00:25:09,600
simple and not super flashy demo uh

742
00:25:09,600 --> 00:25:10,559
which is

743
00:25:10,559 --> 00:25:11,919
i think good if you're having flashy

744
00:25:11,919 --> 00:25:13,440
demos around dns some things probably

745
00:25:13,440 --> 00:25:15,360
horribly wrong

746
00:25:15,360 --> 00:25:16,880
so this little green bubble here is

747
00:25:16,880 --> 00:25:18,159
where we're going to focus on it's going

748
00:25:18,159 --> 00:25:19,840
to change colors

749
00:25:19,840 --> 00:25:22,480
let's have a look

750
00:25:23,520 --> 00:25:27,919
so you can see here that i am connected

751
00:25:27,919 --> 00:25:28,320
to

752
00:25:28,320 --> 00:25:30,799
the xfinity wi-fi hotspot and so i'm

753
00:25:30,799 --> 00:25:32,080
using comcast's

754
00:25:32,080 --> 00:25:35,840
dns server 75-75-75.75

755
00:25:35,840 --> 00:25:39,760
uh now i'm going to go to oh

756
00:25:41,520 --> 00:25:44,240
sorry about that um so i'll go ahead and

757
00:25:44,240 --> 00:25:45,679
explain what the the next part is going

758
00:25:45,679 --> 00:25:47,760
to be so i'm on xfinity wi-fi

759
00:25:47,760 --> 00:25:51,120
and i'm going to go to 1.1.1.1 help

760
00:25:51,120 --> 00:25:54,400
which is cloudflare's dns status page

761
00:25:54,400 --> 00:25:56,000
for how you're connected to

762
00:25:56,000 --> 00:25:59,360
their dns and so i'm going to show that

763
00:25:59,360 --> 00:26:00,400
here

764
00:26:00,400 --> 00:26:02,480
so i'll pause the video here you can see

765
00:26:02,480 --> 00:26:03,679
that it's showing that i am not

766
00:26:03,679 --> 00:26:06,720
connected to cloudflare's 1.1.1.1 dns

767
00:26:06,720 --> 00:26:07,600
service

768
00:26:07,600 --> 00:26:09,360
and i'm also not using encryption to

769
00:26:09,360 --> 00:26:10,720
their service because i'm not connected

770
00:26:10,720 --> 00:26:12,080
to it at all

771
00:26:12,080 --> 00:26:14,720
so you can see that the the vimes icon

772
00:26:14,720 --> 00:26:16,640
in the system tray there is red

773
00:26:16,640 --> 00:26:17,840
indicating that i

774
00:26:17,840 --> 00:26:21,120
am not using a dns server that supports

775
00:26:21,120 --> 00:26:24,720
dns encryption

776
00:26:24,720 --> 00:26:26,080
i should also make a side note and say

777
00:26:26,080 --> 00:26:27,360
that at the time this video was recorded

778
00:26:27,360 --> 00:26:28,400
that was the case

779
00:26:28,400 --> 00:26:30,240
by the time you're watching this video i

780
00:26:30,240 --> 00:26:31,919
believe comcast will actually support

781
00:26:31,919 --> 00:26:33,279
dns encryption

782
00:26:33,279 --> 00:26:35,840
uh due to a recent announcement but

783
00:26:35,840 --> 00:26:37,440
let's jump back in here

784
00:26:37,440 --> 00:26:39,840
i'm going to switch to my eldridge guest

785
00:26:39,840 --> 00:26:40,559
network

786
00:26:40,559 --> 00:26:43,760
which issues 1.1.1.1 as the dns server

787
00:26:43,760 --> 00:26:47,200
via dhcp lease so uh

788
00:26:47,200 --> 00:26:48,559
what's going to happen is vimes is going

789
00:26:48,559 --> 00:26:50,240
to let the wi-fi connection happen

790
00:26:50,240 --> 00:26:51,919
and then run a test and you'll see that

791
00:26:51,919 --> 00:26:53,679
vines has shifted to a yellow

792
00:26:53,679 --> 00:26:55,840
indicator what this means is that you

793
00:26:55,840 --> 00:26:58,240
are using a dns server that supports

794
00:26:58,240 --> 00:27:01,120
dot or doh but your operating system is

795
00:27:01,120 --> 00:27:02,799
not taking advantage of that

796
00:27:02,799 --> 00:27:04,400
which is the case as i mentioned earlier

797
00:27:04,400 --> 00:27:06,000
pretty much every operating system

798
00:27:06,000 --> 00:27:11,120
on the market today desktop ones

799
00:27:11,120 --> 00:27:13,360
so what we'll do is we'll refresh this

800
00:27:13,360 --> 00:27:14,240
status page

801
00:27:14,240 --> 00:27:16,919
and you can see that we are connected to

802
00:27:16,919 --> 00:27:18,080
1.1.1.1

803
00:27:18,080 --> 00:27:20,000
but still not using any of the encrypted

804
00:27:20,000 --> 00:27:21,679
protocols

805
00:27:21,679 --> 00:27:23,279
so now what you can do is just click the

806
00:27:23,279 --> 00:27:26,000
vimes icon

807
00:27:27,919 --> 00:27:30,480
that is going to do a couple of things

808
00:27:30,480 --> 00:27:31,919
to enable

809
00:27:31,919 --> 00:27:33,520
encrypted dns which i'll dive into in a

810
00:27:33,520 --> 00:27:35,600
second here but we'll refresh this page

811
00:27:35,600 --> 00:27:37,520
again

812
00:27:37,520 --> 00:27:40,799
and you can see that the vimes icon is

813
00:27:40,799 --> 00:27:42,320
turned green to show that we are using

814
00:27:42,320 --> 00:27:43,520
encrypted dns

815
00:27:43,520 --> 00:27:46,320
we are connected still to 1.1.1.1 so we

816
00:27:46,320 --> 00:27:47,120
are using

817
00:27:47,120 --> 00:27:49,840
the dns server issued by the dhcp lease

818
00:27:49,840 --> 00:27:51,120
but we are using

819
00:27:51,120 --> 00:27:54,880
dns over tls so what vimes is doing in

820
00:27:54,880 --> 00:27:55,919
the background there

821
00:27:55,919 --> 00:27:59,039
is it's spinning up a core dns server

822
00:27:59,039 --> 00:28:00,480
locally on the machine

823
00:28:00,480 --> 00:28:03,679
core dns is a pretty efficient dns

824
00:28:03,679 --> 00:28:05,120
system written in chord excuse me

825
00:28:05,120 --> 00:28:07,679
written in golang used in kubernetes

826
00:28:07,679 --> 00:28:10,080
uh so it's spinning that up and

827
00:28:10,080 --> 00:28:12,080
redirecting all dns queries to it which

828
00:28:12,080 --> 00:28:13,039
is then wrapping

829
00:28:13,039 --> 00:28:15,360
in dns over tls and sending to the

830
00:28:15,360 --> 00:28:17,200
original destination

831
00:28:17,200 --> 00:28:20,880
tls dns server

832
00:28:21,440 --> 00:28:24,399
cool and that will be open sourced later

833
00:28:24,399 --> 00:28:25,039
today

834
00:28:25,039 --> 00:28:26,320
if not already by the time you're

835
00:28:26,320 --> 00:28:28,159
watching this video so

836
00:28:28,159 --> 00:28:30,240
i want to list a few updates that have

837
00:28:30,240 --> 00:28:32,399
happened since i submitted and prepared

838
00:28:32,399 --> 00:28:33,279
this talk

839
00:28:33,279 --> 00:28:36,720
uh so when i submitted this talk about

840
00:28:36,720 --> 00:28:38,240
two months ago if i'm remembering

841
00:28:38,240 --> 00:28:40,080
correctly the only platforms

842
00:28:40,080 --> 00:28:44,000
that natively supported dot or doh

843
00:28:44,000 --> 00:28:46,480
was android 9 and above which was a

844
00:28:46,480 --> 00:28:48,159
minority of the install base

845
00:28:48,159 --> 00:28:51,200
of android in the last i believe four

846
00:28:51,200 --> 00:28:52,000
weeks

847
00:28:52,000 --> 00:28:54,799
support or announced support has

848
00:28:54,799 --> 00:28:55,520
happened

849
00:28:55,520 --> 00:28:58,159
for all of these things so android 9

850
00:28:58,159 --> 00:29:00,720
windows 10 mac os ios firefox and

851
00:29:00,720 --> 00:29:05,200
chrome so while vimes will be useful

852
00:29:05,200 --> 00:29:07,279
until these move their native

853
00:29:07,279 --> 00:29:09,039
implementations too stable

854
00:29:09,039 --> 00:29:12,240
and it will be useful for places that

855
00:29:12,240 --> 00:29:14,159
can't necessarily upgrade to the latest

856
00:29:14,159 --> 00:29:17,360
versions uh hopefully in the

857
00:29:17,360 --> 00:29:19,279
coming months you'll be able to do this

858
00:29:19,279 --> 00:29:20,799
natively in your operating system

859
00:29:20,799 --> 00:29:24,879
rather than relying on an add-on

860
00:29:25,039 --> 00:29:26,720
also i did want to highlight uh this is

861
00:29:26,720 --> 00:29:28,960
not a comprehensive list but other tools

862
00:29:28,960 --> 00:29:30,799
services and systems in the industry

863
00:29:30,799 --> 00:29:32,000
that are supporting

864
00:29:32,000 --> 00:29:35,200
dns over tls and dns of https curl has

865
00:29:35,200 --> 00:29:37,440
been supporting doh for a while now

866
00:29:37,440 --> 00:29:39,440
comcast and cox have now announced that

867
00:29:39,440 --> 00:29:40,640
they are going to support

868
00:29:40,640 --> 00:29:43,600
uh either doh dot or both hurricane

869
00:29:43,600 --> 00:29:46,000
electric cisco umbrella core dns

870
00:29:46,000 --> 00:29:47,840
which is what i'm using in vines and

871
00:29:47,840 --> 00:29:51,679
quad 9 are supporting doh and dot

872
00:29:51,679 --> 00:29:54,240
so let's wrap up and kind of hit my my

873
00:29:54,240 --> 00:29:55,919
conclusions here

874
00:29:55,919 --> 00:29:59,039
so dot and doh remove some of the

875
00:29:59,039 --> 00:30:01,120
concerns around malicious middleware

876
00:30:01,120 --> 00:30:02,799
added some concerns around benign

877
00:30:02,799 --> 00:30:05,520
middleware these new concerns are not

878
00:30:05,520 --> 00:30:07,600
necessarily entirely new

879
00:30:07,600 --> 00:30:09,120
but they're a move of where this

880
00:30:09,120 --> 00:30:11,200
functionality where this benign

881
00:30:11,200 --> 00:30:13,279
monitoring and manipulation has to

882
00:30:13,279 --> 00:30:15,039
happen since it can't happen

883
00:30:15,039 --> 00:30:16,640
transparently in the middle

884
00:30:16,640 --> 00:30:19,760
anymore and the benefits in my opinion

885
00:30:19,760 --> 00:30:22,240
of dot and doh can be realized

886
00:30:22,240 --> 00:30:24,559
without sacrificing the control that

887
00:30:24,559 --> 00:30:26,480
benign middleware operators have

888
00:30:26,480 --> 00:30:28,640
as long as the legacy approaches are

889
00:30:28,640 --> 00:30:31,120
modified and adapted

890
00:30:31,120 --> 00:30:35,120
so that was the ongoing encryption and

891
00:30:35,120 --> 00:30:37,279
centralization of dns again i'm eldridge

892
00:30:37,279 --> 00:30:38,080
alexander

893
00:30:38,080 --> 00:30:40,960
with duo security and so i am now going

894
00:30:40,960 --> 00:30:42,080
to take questions

895
00:30:42,080 --> 00:30:43,919
uh this is video me and live me will be

896
00:30:43,919 --> 00:30:45,679
taking the questions so video me

897
00:30:45,679 --> 00:30:50,720
uh handing off to live me take it away

898
00:30:50,720 --> 00:30:54,399
thanks me uh so i'm gonna go through the

899
00:30:54,399 --> 00:30:56,720
chat here feel free to post some more

900
00:30:56,720 --> 00:30:58,000
questions uh as

901
00:30:58,000 --> 00:31:00,240
they occur to you uh what i'm gonna go

902
00:31:00,240 --> 00:31:02,399
through several have already been posted

903
00:31:02,399 --> 00:31:05,039
uh so first from jim reed what

904
00:31:05,039 --> 00:31:07,600
challenges does doh mean for isps and

905
00:31:07,600 --> 00:31:09,840
enterprises that currently provide dns

906
00:31:09,840 --> 00:31:11,440
services what could or

907
00:31:11,440 --> 00:31:14,880
should be done about that uh so i saw

908
00:31:14,880 --> 00:31:16,480
you post that earlier in the talk so i

909
00:31:16,480 --> 00:31:19,039
hope i touched on it a bit

910
00:31:19,039 --> 00:31:22,159
but the the challenges i see primarily

911
00:31:22,159 --> 00:31:24,799
for isps and enterprises are those using

912
00:31:24,799 --> 00:31:26,720
dns as a control plane

913
00:31:26,720 --> 00:31:29,279
uh being unable to gain visibility or

914
00:31:29,279 --> 00:31:29,919
apply

915
00:31:29,919 --> 00:31:32,960
security policies using dns as a control

916
00:31:32,960 --> 00:31:33,919
plane

917
00:31:33,919 --> 00:31:36,960
um unless they get all of their

918
00:31:36,960 --> 00:31:39,360
endpoints to use supported encrypted

919
00:31:39,360 --> 00:31:42,559
to use encrypted dns protocols as well

920
00:31:42,559 --> 00:31:44,720
as upgrade all of their servers

921
00:31:44,720 --> 00:31:46,960
if both the endpoints and the servers uh

922
00:31:46,960 --> 00:31:49,039
are using new encrypted dns

923
00:31:49,039 --> 00:31:52,159
uh then the challenges are pretty much

924
00:31:52,159 --> 00:31:55,919
non-existent for the enterprises um

925
00:31:55,919 --> 00:31:57,039
i should probably shouldn't say

926
00:31:57,039 --> 00:31:59,279
non-existent but become very minimal for

927
00:31:59,279 --> 00:32:00,399
the enterprises

928
00:32:00,399 --> 00:32:04,799
isps um kind of the same deal if the

929
00:32:04,799 --> 00:32:06,880
isps are supporting encrypted dns

930
00:32:06,880 --> 00:32:09,279
and the user endpoints are then same

931
00:32:09,279 --> 00:32:10,320
deal

932
00:32:10,320 --> 00:32:11,760
uh the problem you're going to run into

933
00:32:11,760 --> 00:32:14,320
here is if uh isps are running for

934
00:32:14,320 --> 00:32:15,760
instance interception

935
00:32:15,760 --> 00:32:18,799
or security policies on uh plaintext dns

936
00:32:18,799 --> 00:32:19,600
that's going to an

937
00:32:19,600 --> 00:32:21,760
uh dns server that's not provided by the

938
00:32:21,760 --> 00:32:23,679
isp but the isp can

939
00:32:23,679 --> 00:32:25,840
sit in the middle and change that i

940
00:32:25,840 --> 00:32:27,120
haven't really seen that in a while the

941
00:32:27,120 --> 00:32:28,960
closest i've seen is if you're on at t

942
00:32:28,960 --> 00:32:32,000
u-verse um and you go to a website that

943
00:32:32,000 --> 00:32:33,519
doesn't exist instead of them returning

944
00:32:33,519 --> 00:32:34,799
back a dns

945
00:32:34,799 --> 00:32:36,640
uh no record exists there they'll

946
00:32:36,640 --> 00:32:37,840
redirect you to an att

947
00:32:37,840 --> 00:32:41,279
ad site um so as long as both the

948
00:32:41,279 --> 00:32:42,960
endpoint and server support it i'm not

949
00:32:42,960 --> 00:32:44,720
seeing a whole lot of challenges

950
00:32:44,720 --> 00:32:47,120
for enterprises uh that want to support

951
00:32:47,120 --> 00:32:48,640
it the challenge is of course

952
00:32:48,640 --> 00:32:50,159
um as i think you touched on a later

953
00:32:50,159 --> 00:32:52,799
question as applications like firefox

954
00:32:52,799 --> 00:32:54,159
and even chrome start to support it

955
00:32:54,159 --> 00:32:55,039
natively

956
00:32:55,039 --> 00:32:56,480
that dns might be happening that they're

957
00:32:56,480 --> 00:32:57,919
not even aware of because it's going

958
00:32:57,919 --> 00:32:59,600
over over doh

959
00:32:59,600 --> 00:33:00,960
um so i'll go through the other

960
00:33:00,960 --> 00:33:02,799
questions but i'll touch on that too in

961
00:33:02,799 --> 00:33:04,159
a second here

962
00:33:04,159 --> 00:33:06,880
uh next question also from jim uh what's

963
00:33:06,880 --> 00:33:09,039
the privacy win for users if all their

964
00:33:09,039 --> 00:33:11,039
dns queries

965
00:33:11,039 --> 00:33:14,399
go to your doh provider

966
00:33:14,399 --> 00:33:18,399
uh none um that's probably a bit

967
00:33:18,399 --> 00:33:20,880
too reductive my hope and one of the

968
00:33:20,880 --> 00:33:22,159
reasons i wanted to talk about

969
00:33:22,159 --> 00:33:24,519
uh some of this stuff here is the the

970
00:33:24,519 --> 00:33:25,679
centralization

971
00:33:25,679 --> 00:33:27,919
is not an inherent property of doh or

972
00:33:27,919 --> 00:33:28,960
dot it's

973
00:33:28,960 --> 00:33:31,039
dot it's not even really a practical

974
00:33:31,039 --> 00:33:32,240
reality it's just

975
00:33:32,240 --> 00:33:34,640
a bunch of big providers google quad 9

976
00:33:34,640 --> 00:33:35,360
cloudflare

977
00:33:35,360 --> 00:33:37,279
supported early on and so anyone wanting

978
00:33:37,279 --> 00:33:39,120
to use encrypted dns was centralized on

979
00:33:39,120 --> 00:33:40,240
those providers

980
00:33:40,240 --> 00:33:42,000
as the protocols become more supported

981
00:33:42,000 --> 00:33:44,559
and as i mentioned in my update slide

982
00:33:44,559 --> 00:33:46,000
it's being supported by windows in the

983
00:33:46,000 --> 00:33:47,600
insider right now and apple announced it

984
00:33:47,600 --> 00:33:50,000
for the next versions of mac os and ios

985
00:33:50,000 --> 00:33:52,960
comcast and cox are announcing it uh

986
00:33:52,960 --> 00:33:54,480
curl and other open source tools are

987
00:33:54,480 --> 00:33:55,600
starting to support it

988
00:33:55,600 --> 00:33:57,919
we're hopefully going to see greater

989
00:33:57,919 --> 00:33:59,360
dispersion so that we'll end up with

990
00:33:59,360 --> 00:34:01,120
something very similar to the original

991
00:34:01,120 --> 00:34:04,080
distributed system um just with

992
00:34:04,080 --> 00:34:06,480
point-to-point encryption uh

993
00:34:06,480 --> 00:34:08,159
so but yeah you're absolutely correct if

994
00:34:08,159 --> 00:34:09,359
that doesn't play out like i'm

995
00:34:09,359 --> 00:34:10,239
anticipating

996
00:34:10,239 --> 00:34:12,000
if it really does state that only a few

997
00:34:12,000 --> 00:34:13,918
servers and only a few service providers

998
00:34:13,918 --> 00:34:15,119
are supporting this

999
00:34:15,119 --> 00:34:17,359
um then yeah we absolutely will not have

1000
00:34:17,359 --> 00:34:18,320
a a

1001
00:34:18,320 --> 00:34:22,239
in an inherent privacy web um

1002
00:34:22,239 --> 00:34:24,159
obviously there's the potential for a

1003
00:34:24,159 --> 00:34:25,918
privacy when if we have a bunch of these

1004
00:34:25,918 --> 00:34:27,760
distributed systems that are

1005
00:34:27,760 --> 00:34:29,199
behaving maliciously and we move to a

1006
00:34:29,199 --> 00:34:31,280
few central providers uh that are

1007
00:34:31,280 --> 00:34:32,719
behaving benignly

1008
00:34:32,719 --> 00:34:36,399
but uh that is more optimistic than i'm

1009
00:34:36,399 --> 00:34:38,239
willing to commit to

1010
00:34:38,239 --> 00:34:41,599
uh so from james uh

1011
00:34:41,599 --> 00:34:43,839
kennedy i hope i'm saying that right um

1012
00:34:43,839 --> 00:34:45,760
what about aggregation and manipulation

1013
00:34:45,760 --> 00:34:47,760
by the dot doh providers

1014
00:34:47,760 --> 00:34:50,719
effective monopolies i think that's a

1015
00:34:50,719 --> 00:34:52,159
similar question

1016
00:34:52,159 --> 00:34:55,520
um there are lots of advantages in

1017
00:34:55,520 --> 00:34:58,720
having distributed

1018
00:34:58,720 --> 00:35:01,920
servers and so i think if we end up with

1019
00:35:01,920 --> 00:35:03,119
the reality of

1020
00:35:03,119 --> 00:35:05,280
just a few providers that have

1021
00:35:05,280 --> 00:35:06,880
manipulated the environment by

1022
00:35:06,880 --> 00:35:08,320
supporting doh 2

1023
00:35:08,320 --> 00:35:11,760
dot early that's going to be problematic

1024
00:35:11,760 --> 00:35:13,359
um like i said i think google and

1025
00:35:13,359 --> 00:35:15,119
cloudflare and quad 9 have been doing a

1026
00:35:15,119 --> 00:35:16,560
good job so far

1027
00:35:16,560 --> 00:35:19,119
but i think you don't want to

1028
00:35:19,119 --> 00:35:20,800
concentrate power to the handful of a

1029
00:35:20,800 --> 00:35:22,079
few service providers

1030
00:35:22,079 --> 00:35:24,160
uh in what's an inherently distributed

1031
00:35:24,160 --> 00:35:25,280
system

1032
00:35:25,280 --> 00:35:28,000
so yeah absolutely if if they start to

1033
00:35:28,000 --> 00:35:28,480
consult

1034
00:35:28,480 --> 00:35:29,760
if we start to consolidate more and more

1035
00:35:29,760 --> 00:35:31,839
on those service providers that's a

1036
00:35:31,839 --> 00:35:32,320
problem

1037
00:35:32,320 --> 00:35:35,040
i don't think that having a plurality of

1038
00:35:35,040 --> 00:35:37,280
uh dns requests on the network

1039
00:35:37,280 --> 00:35:39,200
is a problem as long as there are enough

1040
00:35:39,200 --> 00:35:40,640
alternatives out there and those

1041
00:35:40,640 --> 00:35:42,079
alternatives support

1042
00:35:42,079 --> 00:35:44,000
encryption the the thing that i think

1043
00:35:44,000 --> 00:35:45,119
would be

1044
00:35:45,119 --> 00:35:47,599
very bad is if your options are either

1045
00:35:47,599 --> 00:35:49,200
use an unencrypted service that

1046
00:35:49,200 --> 00:35:50,960
allegedly protects your privacy

1047
00:35:50,960 --> 00:35:53,119
or use an encrypted service that

1048
00:35:53,119 --> 00:35:54,560
probably doesn't

1049
00:35:54,560 --> 00:35:56,320
um because then you're going to get into

1050
00:35:56,320 --> 00:35:59,359
all of the privacy concerns around

1051
00:35:59,359 --> 00:36:01,119
okay maybe the dns provider you're using

1052
00:36:01,119 --> 00:36:02,560
is fine but it's unencrypted and you're

1053
00:36:02,560 --> 00:36:03,920
sending your connection through comcast

1054
00:36:03,920 --> 00:36:05,040
or tnt

1055
00:36:05,040 --> 00:36:08,320
or another provider that so now you're

1056
00:36:08,320 --> 00:36:09,839
expanding your attack service your

1057
00:36:09,839 --> 00:36:12,800
privacy attack surface

1058
00:36:12,800 --> 00:36:16,400
yeah let's see uh gregory has standard

1059
00:36:16,400 --> 00:36:18,480
internet protocols been updated to allow

1060
00:36:18,480 --> 00:36:19,440
for encrypted

1061
00:36:19,440 --> 00:36:23,359
dns um i don't know that i quite

1062
00:36:23,359 --> 00:36:26,320
understand your question there uh sorry

1063
00:36:26,320 --> 00:36:27,839
if you want to provide clarity a little

1064
00:36:27,839 --> 00:36:30,000
bit i'll try and speak to it um

1065
00:36:30,000 --> 00:36:34,800
by standard internet protocols um

1066
00:36:34,800 --> 00:36:36,400
yeah i'm sorry i'm not sure if you're

1067
00:36:36,400 --> 00:36:41,119
speaking to like tcp or udp they both

1068
00:36:41,119 --> 00:36:42,160
of course one thing i didn't really

1069
00:36:42,160 --> 00:36:44,320
touch on the talk is

1070
00:36:44,320 --> 00:36:46,560
dns was primarily over udp unless the

1071
00:36:46,560 --> 00:36:48,560
response was too big

1072
00:36:48,560 --> 00:36:51,440
dot and doh are inherently mostly tcp

1073
00:36:51,440 --> 00:36:54,720
based protocols um

1074
00:36:54,720 --> 00:36:56,800
of course it's conceivable the doh would

1075
00:36:56,800 --> 00:36:58,560
eventually move to quick which is a udp

1076
00:36:58,560 --> 00:37:00,320
based protocol since http3 is going to

1077
00:37:00,320 --> 00:37:01,280
be over quick

1078
00:37:01,280 --> 00:37:04,560
uh but that's

1079
00:37:04,640 --> 00:37:05,760
sorry i'm going off on a chance right

1080
00:37:05,760 --> 00:37:08,560
here um so yeah uh

1081
00:37:08,560 --> 00:37:11,200
but it's all it's all the actual query

1082
00:37:11,200 --> 00:37:13,040
itself is going to go over either tcp or

1083
00:37:13,040 --> 00:37:13,839
udp

1084
00:37:13,839 --> 00:37:15,760
and the the upper level protocol is

1085
00:37:15,760 --> 00:37:17,040
going to be either

1086
00:37:17,040 --> 00:37:20,079
tls or https um so yeah

1087
00:37:20,079 --> 00:37:21,760
and then of course any other application

1088
00:37:21,760 --> 00:37:22,880
the stack is just going to get the

1089
00:37:22,880 --> 00:37:24,079
response

1090
00:37:24,079 --> 00:37:27,520
um as it would normally so i yes as i

1091
00:37:27,520 --> 00:37:28,480
think the answer to your question but

1092
00:37:28,480 --> 00:37:29,680
you want to provide clarity i'll i'll

1093
00:37:29,680 --> 00:37:32,079
pick that up as i go down the list here

1094
00:37:32,079 --> 00:37:35,520
uh from narendra

1095
00:37:35,520 --> 00:37:38,000
how is the pki working with https tls

1096
00:37:38,000 --> 00:37:39,520
with doing the initial connection to dns

1097
00:37:39,520 --> 00:37:41,119
server without the host name for the

1098
00:37:41,119 --> 00:37:42,240
certificate

1099
00:37:42,240 --> 00:37:44,560
um

1100
00:37:45,760 --> 00:37:48,800
so you do need to provide a

1101
00:37:48,800 --> 00:37:49,920
host name when you're connect

1102
00:37:49,920 --> 00:37:53,440
configuring those for the first time

1103
00:37:53,440 --> 00:37:56,720
there are some options of course for

1104
00:37:56,720 --> 00:37:58,560
major providers you'll be able to

1105
00:37:58,560 --> 00:38:00,720
reconcile the ip address uh back to the

1106
00:38:00,720 --> 00:38:01,200
host

1107
00:38:01,200 --> 00:38:04,879
relatively easily one that wants

1108
00:38:08,160 --> 00:38:11,119
cetera if you are configuring one that

1109
00:38:11,119 --> 00:38:11,359
is

1110
00:38:11,359 --> 00:38:15,200
not in the list of providers

1111
00:38:15,200 --> 00:38:17,440
then yeah you absolutely will have to uh

1112
00:38:17,440 --> 00:38:18,800
configure the hostname manually which

1113
00:38:18,800 --> 00:38:20,480
you'll see if you

1114
00:38:20,480 --> 00:38:24,000
configure either um dot and android nine

1115
00:38:24,000 --> 00:38:25,599
plus or if you configure doh

1116
00:38:25,599 --> 00:38:27,119
in firefox you'll see that you have to

1117
00:38:27,119 --> 00:38:27,680
put in hosts now

1118
00:38:27,680 --> 00:38:28,800
[Music]

1119
00:38:28,800 --> 00:38:30,400
uh dwa just looks likely to bring around

1120
00:38:30,400 --> 00:38:32,320
the consolidation sorry from jim again

1121
00:38:32,320 --> 00:38:33,920
doh looks likely to bring about the

1122
00:38:33,920 --> 00:38:35,680
consolidation and aggregation of dns

1123
00:38:35,680 --> 00:38:37,040
servers into a few

1124
00:38:37,040 --> 00:38:39,599
number of players um chosen by browser

1125
00:38:39,599 --> 00:38:41,040
vendors and killer apps why do you seem

1126
00:38:41,040 --> 00:38:42,320
to disagree with that opinion

1127
00:38:42,320 --> 00:38:43,839
is the centralization healthy for both

1128
00:38:43,839 --> 00:38:44,960
user privacy choice and market

1129
00:38:44,960 --> 00:38:47,040
competition uh it's absolutely not

1130
00:38:47,040 --> 00:38:47,760
healthy

1131
00:38:47,760 --> 00:38:50,079
um but i do disagree with that opinion i

1132
00:38:50,079 --> 00:38:51,119
think that it

1133
00:38:51,119 --> 00:38:53,040
had an early consolidation effect

1134
00:38:53,040 --> 00:38:54,400
because there are so few people on the

1135
00:38:54,400 --> 00:38:55,599
market that supported it and there were

1136
00:38:55,599 --> 00:38:56,640
so few people on the market that

1137
00:38:56,640 --> 00:38:57,440
supported it

1138
00:38:57,440 --> 00:39:00,240
because it didn't work on windows mac

1139
00:39:00,240 --> 00:39:01,839
android unless you were on version nine

1140
00:39:01,839 --> 00:39:04,799
plus which was a small

1141
00:39:05,359 --> 00:39:08,160
or ios so i think as operating systems

1142
00:39:08,160 --> 00:39:09,520
start supporting you'll start to see

1143
00:39:09,520 --> 00:39:12,880
vendors and providers and less major uh

1144
00:39:12,880 --> 00:39:16,880
dns providers provided i've got

1145
00:39:16,880 --> 00:39:18,640
i'm scrolling through about 45 seconds

1146
00:39:18,640 --> 00:39:21,200
left um

1147
00:39:21,200 --> 00:39:24,319
gonna see let's see

1148
00:39:26,800 --> 00:39:28,880
all right i am coming up on time and i

1149
00:39:28,880 --> 00:39:29,839
don't think i can speak to these

1150
00:39:29,839 --> 00:39:31,520
questions effectively in 20 seconds i

1151
00:39:31,520 --> 00:39:32,960
will stick around the chat for a few

1152
00:39:32,960 --> 00:39:34,000
minutes afterwards

1153
00:39:34,000 --> 00:39:35,359
um and try and speak to him as best i

1154
00:39:35,359 --> 00:39:37,200
can feel free to follow up with me there

1155
00:39:37,200 --> 00:39:39,359
i also have open dms on twitter or feel

1156
00:39:39,359 --> 00:39:41,680
free to reach out to me at eldridge.com

1157
00:39:41,680 --> 00:39:42,000
or

1158
00:39:42,000 --> 00:39:45,520
gif cisco.com yeah so thanks so much for

1159
00:39:45,520 --> 00:39:47,599
coming by and everyone enjoy the rest of

1160
00:39:47,599 --> 00:39:51,599
black hat

