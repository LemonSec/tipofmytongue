1
00:00:00,000 --> 00:00:05,330
ok so thank you for coming anything
before we get started

2
00:00:05,330 --> 00:00:11,769
couple things please I'm gonna ask you
to give a warm round of applause to all

3
00:00:11,769 --> 00:00:16,129
the volunteers like ngo dou letting the
staff and the black hat organization

4
00:00:16,129 --> 00:00:29,050
ever used Windows I don't believe you
did get the question how many have you

5
00:00:29,050 --> 00:00:34,719
ever used Windows ok that's everybody
how many of you have an adult signature

6
00:00:34,719 --> 00:00:42,460
should test how many of you have done
their penetration tests on the Windows

7
00:00:42,460 --> 00:00:49,160
network all of the previous ones you
should have seen what we gonna show you

8
00:00:49,160 --> 00:00:59,239
because it's all trivial and also
interesting so what we saw my name is

9
00:00:59,239 --> 00:01:08,289
Jonathan Ross Ave be presenting here are
a few times if you like the level

10
00:01:08,290 --> 00:01:12,630
reverse engineering and things like this
we run a couple conference easy various

11
00:01:12,630 --> 00:01:18,149
in a way you submit its

12
00:01:18,150 --> 00:01:27,400
check on and reverse engineering but
once it's dried up for free just signed

13
00:01:27,400 --> 00:01:37,110
up its invite only but I'm Hamas
security engineer at Salesforce as well

14
00:01:37,110 --> 00:01:47,119
as my postdoc at black hat so it goes ok
to point out that we're breaking windows

15
00:01:47,119 --> 00:01:52,270
and kind of sort of breaking into
standing Microsoft edge of at least five

16
00:01:52,270 --> 00:01:54,320
days ago so good luck with that

17
00:01:54,320 --> 00:02:03,649
yeah that's a lot of right agenda what
we're gonna go through today basically

18
00:02:03,649 --> 00:02:08,160
we gonna do like an introduction to what
SMB is what kind of previous work is

19
00:02:08,160 --> 00:02:08,568
done

20
00:02:08,568 --> 00:02:11,679
are dealing SMB houses

21
00:02:11,680 --> 00:02:18,260
as Amelia rebooted this is basically a
US attack you have a couple of

22
00:02:18,260 --> 00:02:23,679
interesting to see Jonathan Sanchez
attack the syphilis which includes Matt

23
00:02:23,680 --> 00:02:35,639
obviously how do we meet again against
ok so let's imagine for a second be back

24
00:02:35,639 --> 00:02:41,109
in like nineteen eighty-four and we all
worked for IBM so we're working on this

25
00:02:41,109 --> 00:02:45,709
awesome operating system called OS-two
with a small start-up

26
00:02:45,709 --> 00:02:53,239
Microsoft has a bit of them so basically
we we train chew on these operating

27
00:02:53,239 --> 00:03:00,000
system which he's not even so it's
really more than sixteen 16 bit that we

28
00:03:00,000 --> 00:03:04,239
have one megabyte a river yet max we
don't have much of this key and will be

29
00:03:04,239 --> 00:03:08,709
trained to Deweys sherrie dean for
sharing without multitasking is a

30
00:03:08,709 --> 00:03:15,120
challenge in itself but essentially
that's where we are and the big question

31
00:03:15,120 --> 00:03:29,319
mark is all about security 1984 a system
where should you consider that i-ninety

32
00:03:29,319 --> 00:03:36,470
five when Microsoft shipped windows
ninety-five the shares which the

33
00:03:36,470 --> 00:03:42,169
original behind it with that if you buy
a computer network and you want to be

34
00:03:42,169 --> 00:03:47,569
able to share all of your colleagues
without entering passwords so we can go

35
00:03:47,569 --> 00:03:53,798
back to 1984 like obviously there will
be even less security right and that's

36
00:03:53,799 --> 00:03:59,220
where all the problems we going to
discuss today right

37
00:03:59,220 --> 00:04:05,450
solar quick demo what exactly has been
done previously

38
00:04:05,450 --> 00:04:12,629
forgive the video because it requires a
land to do this right so what we have

39
00:04:12,629 --> 00:04:19,039
here is basically cool software from
core security which does a sampling

40
00:04:19,040 --> 00:04:25,650
explain more about that later on we have
AV unsuspecting victim was going to some

41
00:04:25,650 --> 00:04:30,719
internet website this is basically in
the land and this website has got an

42
00:04:30,720 --> 00:04:34,740
image tag on it which basically is gonna
do like some magic and tobacco will

43
00:04:34,740 --> 00:04:42,810
explain more later on and what is
happening over here is this browser send

44
00:04:42,810 --> 00:04:49,880
NTLM crabs off the victim automatically
to a unknown sorts bridge is

45
00:04:49,880 --> 00:04:54,760
mind-boggling itself I mean why would
you do that but fine it's all of the

46
00:04:54,760 --> 00:04:59,599
internet so you would find well as an
airline is kind of sort of safe as you

47
00:04:59,600 --> 00:05:06,150
can see it's basically have been sent
over here you have likely uploading some

48
00:05:06,150 --> 00:05:14,888
kind of my love the payload so fantastic
so we're going to a show whatever right

49
00:05:14,889 --> 00:05:20,720
so that is what has he done previously
so quick walkthrough what exactly is SMB

50
00:05:20,720 --> 00:05:27,020
it's basically file sharing on your
Windows network it's so a message block

51
00:05:27,020 --> 00:05:33,169
protocol whatever you can call it it
requires authentication back in the day

52
00:05:33,169 --> 00:05:36,659
they used to be basic authentication to
basically sending your credit and plain

53
00:05:36,660 --> 00:05:44,470
text then it improve my doing last night
before a few are potentials which could

54
00:05:44,470 --> 00:05:50,000
be broken easily they didn't rule again
doing and LM p1 which was basically

55
00:05:50,000 --> 00:05:54,919
before and each time I can be five
people and basically break the bottle

56
00:05:54,919 --> 00:05:59,419
into two parts which you can make it
really easy thing is they came up with

57
00:05:59,419 --> 00:06:04,719
and do what they gonna be attacking as
well today and was designed for local

58
00:06:04,720 --> 00:06:09,070
networks and telling me to like I
mentioned it's a server client challenge

59
00:06:09,070 --> 00:06:15,280
response protocol basically it I can be
five and before the apostle is used to

60
00:06:15,280 --> 00:06:16,080
sign all the mess

61
00:06:16,080 --> 00:06:22,270
the good thing about this is that cannot
be deeply about actually be really which

62
00:06:22,270 --> 00:06:25,840
I actually showed the demo today
basically it's a really really old

63
00:06:25,840 --> 00:06:33,299
experts found really like what fourteen
years ago in 2001 by statistical CDC the

64
00:06:33,300 --> 00:06:35,949
two that I showed you right now is
basically from core security

65
00:06:35,949 --> 00:06:40,360
accessibility links you can download
from online audio so kids can use this

66
00:06:40,360 --> 00:06:45,639
what it does is basically it replays a
half from one machine to another machine

67
00:06:45,639 --> 00:06:47,580
that's about it

68
00:06:47,580 --> 00:06:54,870
it authenticates using that the original
audio is very limited it's basically on

69
00:06:54,870 --> 00:06:55,870
the on the internet

70
00:06:55,870 --> 00:06:59,409
those of you have done penetration
testing for Windows networks will

71
00:06:59,409 --> 00:07:01,259
definitely have done this before

72
00:07:01,259 --> 00:07:09,590
basically set up a website Angeles
toppling houses all across the stress

73
00:07:09,590 --> 00:07:13,359
this a lot not possible over the
Internet

74
00:07:13,360 --> 00:07:20,960
this is the mitigating factor apparently
for this exploit behind it with that the

75
00:07:20,960 --> 00:07:27,029
Additional Protocol was never meant to
be exposed to anything from the very

76
00:07:27,029 --> 00:07:51,379
start to read like operate networks and
the first explodes being so you can do

77
00:07:51,379 --> 00:07:57,110
whatever you want with it so interesting
thing the slide came up because I was

78
00:07:57,110 --> 00:07:59,789
telling Johnson like when you're doing
this research like it basically

79
00:07:59,789 --> 00:08:03,650
repeating what everyone else is doing
only remotely over the Internet and just

80
00:08:03,650 --> 00:08:08,479
as a slick looking at me and said you
doing it over the internet about anyways

81
00:08:08,479 --> 00:08:16,390
so SMU lady Boonton

82
00:08:16,390 --> 00:08:30,200
what's going on

83
00:08:30,200 --> 00:08:36,770
machine we sitting up a relay

84
00:08:36,770 --> 00:08:49,620
shark just you see what's going on in
the background and we gonna load page

85
00:08:49,620 --> 00:08:55,190
using and we can see that there is
actually something going on and this is

86
00:08:55,190 --> 00:09:03,260
happening over the internet so there's
just not supposed to happen it'll you

87
00:09:03,260 --> 00:09:07,140
can also see over here but we have a
receive challenge and I received

88
00:09:07,140 --> 00:09:10,280
indication that we really over just to
prove that you actually doing that

89
00:09:10,280 --> 00:09:18,060
anyways right

90
00:09:18,060 --> 00:09:24,780
all Windows versions are affected back
from my guest 95 maybe altimeter Windows

91
00:09:24,780 --> 00:09:29,800
standing edge this is all default out of
the box what I'm trying to stay out here

92
00:09:29,800 --> 00:09:35,349
is that Yard Machine ascending NTLM
crabs over the internet without doing

93
00:09:35,350 --> 00:09:41,330
any user interaction ever so basically
you visit a website that's it not your

94
00:09:41,330 --> 00:09:52,480
own it's fantastic right this is another
fantastic slide basically Microsoft has

95
00:09:52,480 --> 00:09:57,220
a great mitigation log on FM being
feeling this was published be back in

96
00:09:57,220 --> 00:10:01,290
late 2009 or something but they are
saying over here that the issues lots of

97
00:10:01,290 --> 00:10:06,370
your mainly because it's limited only to
the local internet I don't think so they

98
00:10:06,370 --> 00:10:18,460
have a better fight that ok so if we
look at it was actually sitting like

99
00:10:18,460 --> 00:10:24,730
we're supposed to return to gate using
it so you can you anonymous logon the

100
00:10:24,730 --> 00:10:28,820
default is to log on on the Internet
zone so what I just described this

101
00:10:28,820 --> 00:10:33,520
report basically it's leveraging single
sign-on so when you are using Active

102
00:10:33,520 --> 00:10:36,980
Directory and you can exchange their
shares of somebody else inside you

103
00:10:36,980 --> 00:10:42,430
company you don't have to enter your
credentials again so this is the default

104
00:10:42,430 --> 00:10:47,550
and there is also automatically go on
with your password and username and

105
00:10:47,550 --> 00:10:49,089
password

106
00:10:49,089 --> 00:10:55,070
what is interesting is that none of this
actually works if we look at the trigger

107
00:10:55,070 --> 00:11:00,950
so the trigger is we need to refuel it's
basically like you redirect through an

108
00:11:00,950 --> 00:11:06,709
image tag or something like that if you
are taking bio HTML you read this you

109
00:11:06,709 --> 00:11:15,349
mention to remote chair on the internet
and that's it he the trio so we saw we

110
00:11:15,350 --> 00:11:19,850
saw that a semi truck is actually going
on which is not supposed to happen

111
00:11:19,850 --> 00:11:25,950
rights because it defaults were
connecting only over the internet and up

112
00:11:25,950 --> 00:11:35,350
like sending you credentials over to the
Internet to anybody yet ok and if we

113
00:11:35,350 --> 00:11:40,110
look at the back it's like we can see
the user name in plain texts we can see

114
00:11:40,110 --> 00:11:53,850
the DNS will bunch of stuff and there is
actually a better but which is like it

115
00:11:53,850 --> 00:12:01,360
derived from original best we can get
that from the internet

116
00:12:01,360 --> 00:12:08,440
let's look a little bit like why is this
happening so we've been looking at ok

117
00:12:08,440 --> 00:12:16,930
this is just sitting box off windows if
you look like you know inside a burger

118
00:12:16,930 --> 00:12:22,959
like which is actually running like we
find that one and then looking a bit

119
00:12:22,959 --> 00:12:29,189
like poking around we actually find the
vulnerable lol so you can see on the

120
00:12:29,190 --> 00:12:34,279
right hand side the corresponding to the
previous one

121
00:12:34,279 --> 00:12:39,430
what is interesting out there that these
DLLs actually not exploit you know it's

122
00:12:39,430 --> 00:12:44,689
a deal in which is in the system
directory by many more applications and

123
00:12:44,690 --> 00:12:55,470
not just tight so then we

124
00:12:55,470 --> 00:13:00,550
we took a snapshot of the registry we
change the setting to another one for

125
00:13:00,550 --> 00:13:04,880
instance like you know prompts for
username and passwords every time we

126
00:13:04,880 --> 00:13:10,310
took another snapshots of the registry
and this is a diff so basically he's

127
00:13:10,310 --> 00:13:18,619
actually stored in the registry and this
is working but if we look at a trace of

128
00:13:18,620 --> 00:13:26,240
you know running and connecting to a
remote exploits we can see in the next

129
00:13:26,240 --> 00:13:34,680
slide so we can see that it's actually
carrying all those registry keys so when

130
00:13:34,680 --> 00:13:39,900
you correct from the Internet to a
remote share over this overseas up a

131
00:13:39,900 --> 00:13:49,910
probe and none of them works so we
learned a few things out of this we look

132
00:13:49,910 --> 00:13:57,469
like which reaches ricky is actually we
learned that the the applications which

133
00:13:57,470 --> 00:14:04,540
match your else I mean unless you're
writing your own TCP IP stack basically

134
00:14:04,540 --> 00:14:10,310
you leveraging the one of windows and
you should only rage the URL mechanism

135
00:14:10,310 --> 00:14:25,209
of Windows you are able to get another
tomorrow so this time we gonna leave

136
00:14:25,210 --> 00:14:36,290
range from the internet so it's just a
couple things that you operation you

137
00:14:36,290 --> 00:14:42,860
attacking the machine is enjoying and
that there is an SMB server exposed to

138
00:14:42,860 --> 00:14:49,550
the Internet to relate to that company
that's a pretty big assumption for the

139
00:14:49,550 --> 00:14:52,670
time being

140
00:14:52,670 --> 00:15:09,630
so you can see you like the green asking
the WebBrowser control with age and

141
00:15:09,630 --> 00:15:21,920
that's essentially yet calm and in
control we got you shall be no major

142
00:15:21,920 --> 00:15:28,360
producer so we gonna be able to like
another process idea memory then we just

143
00:15:28,360 --> 00:15:36,210
gonna push matter where do the same
machine migrated successfully inside

144
00:15:36,210 --> 00:15:46,840
another process for the memorial the
target victim

145
00:15:46,840 --> 00:15:52,540
and now we can actually have a show like
we can you know these directories roles

146
00:15:52,540 --> 00:16:05,930
directories Internet

147
00:16:05,930 --> 00:16:12,959
right so why exactly because this was
made up about one hour ago when we

148
00:16:12,960 --> 00:16:15,700
decide they ok vs sending my love their
over the Internet

149
00:16:15,700 --> 00:16:23,370
basically be set up just a any website
people know how difficult it is to set

150
00:16:23,370 --> 00:16:27,959
up a website now has apparently you can
set it up on our / that say you use

151
00:16:27,959 --> 00:16:33,510
isn't saying check out these brand new
exploits Davis I guess if you get sick

152
00:16:33,510 --> 00:16:39,410
you don't use IE but you can get your
creds the document control of you upload

153
00:16:39,410 --> 00:16:44,069
all of this was running mate tools
apparently this is not supposed to

154
00:16:44,070 --> 00:16:50,779
happen still I'd like to keep
emphasizing the point but just upload is

155
00:16:50,779 --> 00:16:59,670
not enough apparently what about using
it to be authentication first I'd like

156
00:16:59,670 --> 00:17:05,349
to see some limitations to this first
SMB signing has to be disabled this was

157
00:17:05,349 --> 00:17:09,359
one of the medications for the proposed
by microsoft which doesn't allow you to

158
00:17:09,359 --> 00:17:16,119
upload any files to anything using a
somebody without SMB signing it is

159
00:17:16,119 --> 00:17:21,309
disabled by default unless going to
demand controller people recommend to

160
00:17:21,309 --> 00:17:24,149
disable it because it's a huge
performance impact is like a pretty

161
00:17:24,150 --> 00:17:28,960
percent performance tuning percent
performance impact and you need somebody

162
00:17:28,960 --> 00:17:35,970
out on all of your machines from the 50
this is interesting slide re-signing

163
00:17:35,970 --> 00:17:40,240
must be disabled for southern corporate
firewalls to be to work properly

164
00:17:40,240 --> 00:17:47,400
like to see ya but yes so fantastic but
one mitigation that's there is disabled

165
00:17:47,400 --> 00:17:48,620
by default

166
00:17:48,620 --> 00:17:55,879
not a big problem ok another bomb that
is basically so people say they save

167
00:17:55,880 --> 00:18:01,000
like why okay so it's not a big deal you
have to have a zombie ports open it

168
00:18:01,000 --> 00:18:06,570
doesn't matter I have complete firewall
security at all impressed by security is

169
00:18:06,570 --> 00:18:13,740
all set up properly but not many people
know that he can do RDP apparently it's

170
00:18:13,740 --> 00:18:16,620
a new feature in Windows Server so

171
00:18:16,620 --> 00:18:39,979
here's a little quick demo of how it
actually works so you don't have the

172
00:18:39,980 --> 00:18:48,410
credit and everything so this is a
Windows RDP gateway basically you can

173
00:18:48,410 --> 00:18:54,490
set up absecon set up RDP connections
you can see the show must go on Skype

174
00:18:54,490 --> 00:19:08,750
and in this case we choose to like just
executives yep so just one interesting

175
00:19:08,750 --> 00:19:12,900
County review authentication that you
saw here on this web page and BLM also

176
00:19:12,900 --> 00:19:18,160
wish to be so great so this sort of
problem of going back to the network

177
00:19:18,160 --> 00:19:26,760
once used when you want to really you
know it's a harsh on the internet I want

178
00:19:26,760 --> 00:19:31,940
to connect you you know I still have to
pierce your firewall so instead of just

179
00:19:31,940 --> 00:19:37,160
over SMB you know I'd like to not going
to happen because people don't allow

180
00:19:37,160 --> 00:19:43,100
incoming traffic using US and UN the
reason I bought the problem because we

181
00:19:43,100 --> 00:19:49,540
can just relates to FTP over HTTP like
he should savor this enables like that

182
00:19:49,540 --> 00:19:56,710
so we worked

183
00:19:56,710 --> 00:20:04,360
so for this to work we need your first
sniff harsh then we need to crack / to

184
00:20:04,360 --> 00:20:10,939
get like you proper financial decision
means that we sent in plain text of the

185
00:20:10,940 --> 00:20:11,890
crash

186
00:20:11,890 --> 00:20:17,870
needs to be correct that we need to we
need for GPUs we have one machine like

187
00:20:17,870 --> 00:20:24,959
five GPUs it's using a very extended to
all guests and we cracking a two to four

188
00:20:24,960 --> 00:20:35,820
billion second so that's what records
like and so this key space were used for

189
00:20:35,820 --> 00:20:41,389
mowing was like a key space of 60
characters makes a fabricated lowercase

190
00:20:41,390 --> 00:20:49,899
alphanumeric characters as you mean you
have a best 18 or less we can break that

191
00:20:49,899 --> 00:20:54,779
in less than three days and of course
like you should have a median hashes

192
00:20:54,779 --> 00:21:02,690
breaking this medium has the median of
hashes is not gonna take longer to all

193
00:21:02,690 --> 00:21:10,480
of its so if we look at you know I was
like you was actually using this

194
00:21:10,480 --> 00:21:16,679
delegation office in be over HTTP
probably nobody so I gave it to a show

195
00:21:16,679 --> 00:21:22,840
then search of people the first one
being Sony in Asia let you draw your own

196
00:21:22,840 --> 00:21:31,899
conclusions

197
00:21:31,900 --> 00:21:39,970
so the impact of this so what exactly do
over here right now we can retrieve user

198
00:21:39,970 --> 00:21:47,440
credentials great we need to do that
that's no problem you have remote code

199
00:21:47,440 --> 00:21:52,430
execution if you have SMB signing to say
about it that's all they have done

200
00:21:52,430 --> 00:21:59,090
because of performance are forever
details anyway the ban users ie a

201
00:21:59,090 --> 00:22:06,520
corporate environments banks are Bank
all these uses ie so great for us I

202
00:22:06,520 --> 00:22:14,870
guess he's gone however this is not the
only trigger that we found the triggers

203
00:22:14,870 --> 00:22:20,219
against that create a zombie connections
like you only mentioned one dll it's not

204
00:22:20,220 --> 00:22:24,240
just used by its use by literally
everything in videos are doing and not

205
00:22:24,240 --> 00:22:38,760
so it's ups lol right so your trigger so
let's try to instead of just using a

206
00:22:38,760 --> 00:22:45,450
year ago we're going to try to you you
know use different clients so for

207
00:22:45,450 --> 00:22:57,610
instance we can leverage to redirect its
just cuz its funny I actually took a

208
00:22:57,610 --> 00:23:02,479
malware was doing it and I just happened
to change the URL this is supported

209
00:23:02,480 --> 00:23:13,110
feature of Windows automatically when
you play the video and if you do that

210
00:23:13,110 --> 00:23:21,550
like it you can redirect page and you
said so the rest of the day we got him

211
00:23:21,550 --> 00:23:25,730
in temperature shell

212
00:23:25,730 --> 00:23:38,480
migrating to bid process adding memory
and this is it more so when the user did

213
00:23:38,480 --> 00:23:58,370
was basically opening video

214
00:23:58,370 --> 00:24:11,949
instead of breaking the harsh like with
the LDP we actually gonna relay over the

215
00:24:11,950 --> 00:24:18,550
Internet to a server which is this the
same kind of connectors accepting a

216
00:24:18,550 --> 00:24:25,690
simpleton station over HTTP so instead
of using RDP we actually attack and

217
00:24:25,690 --> 00:24:30,770
Exchange Server I mean many many people
you know

218
00:24:30,770 --> 00:24:37,260
Exchange servers using Microsoft
Alliance

219
00:24:37,260 --> 00:24:49,170
like a reasonable said he's gonna start
in the background response service which

220
00:24:49,170 --> 00:24:57,020
we listen for incoming Mb

221
00:24:57,020 --> 00:25:05,830
and the trigger is actually just look so
just the fact of you in this you may you

222
00:25:05,830 --> 00:25:12,560
didn't click on any picture anything
sexually sending your credentials may

223
00:25:12,560 --> 00:25:18,139
soon be server listening and disassembly
server is relating it to exchange to the

224
00:25:18,140 --> 00:25:22,280
point that will do little to you and
tell you made box is not one you made

225
00:25:22,280 --> 00:25:33,200
this was going to be made box

226
00:25:33,200 --> 00:25:37,250
we don't look like the entire mailbox in
XML and from a user perspective like

227
00:25:37,250 --> 00:25:46,320
this interaction music you receive the
email opened email and that's it by

228
00:25:46,320 --> 00:25:55,240
default like when you open so direction
can be like absolutely zero I think we

229
00:25:55,240 --> 00:26:06,679
just like to point out over here you can
see the name of the sender you can see

230
00:26:06,679 --> 00:26:12,470
the email ids you can see basically the
subject of lighting so this is your

231
00:26:12,470 --> 00:26:20,580
entire mailbox over here that's it so
you emails and books how many people use

232
00:26:20,580 --> 00:26:28,090
exchange service will be here so this is
very cool right

233
00:26:28,090 --> 00:26:36,399
once once you do more like XML file from
the user to cooperate user access to

234
00:26:36,399 --> 00:26:40,928
most of the password to access to all
your contacts and things like this we

235
00:26:40,929 --> 00:26:48,970
could do that to you know and we made

236
00:26:48,970 --> 00:26:58,419
ok so we have like these dolls we've
been doing it over as you're a WS we

237
00:26:58,419 --> 00:27:06,400
show either clients or servers on any of
those you are busy available featuring

238
00:27:06,400 --> 00:27:14,780
so like we saw with the showdown carrie
is actually thousands of servers SMB

239
00:27:14,780 --> 00:27:20,110
connection over HTTP and the defaults
are unsafe like extending protection is

240
00:27:20,110 --> 00:27:23,789
not enabled by default which is the only
thing which would actually prevent

241
00:27:23,789 --> 00:27:30,520
discusses attack even if you like it
signing enable since we really over HTTP

242
00:27:30,520 --> 00:27:44,100
you extended protection would but it's
not your fault it would prevent you from

243
00:27:44,100 --> 00:27:54,139
sniffing packets to about really so to
protect yourself he said the first

244
00:27:54,140 --> 00:27:58,580
mitigation is at some point you need
exists you need to have an SMB back yet

245
00:27:58,580 --> 00:28:06,210
which is existing judo internet is
absolutely true dropped SMB valuable

246
00:28:06,210 --> 00:28:11,409
corporate environment is actually the
preferred remediation offered by

247
00:28:11,409 --> 00:28:16,840
Microsoft and also it sucks why because
if your Domain Join on her laptop and

248
00:28:16,840 --> 00:28:18,280
you bring your laptop home

249
00:28:18,280 --> 00:28:24,190
well then you're doing remain vulnerable
so instead of you know doing their work

250
00:28:24,190 --> 00:28:30,360
like in the nineties like hot outside
consultants I'd much prefer a solution

251
00:28:30,360 --> 00:28:35,719
which is based out inning so instead of
relying on your cooperate firewall I

252
00:28:35,720 --> 00:28:40,750
would strongly recommend you actually
use your windows personal firewall to do

253
00:28:40,750 --> 00:28:44,890
the same thing which is essentially
dropping SMB traffic to public aP's you

254
00:28:44,890 --> 00:28:47,830
can like you want to keep the
functionality within you know where this

255
00:28:47,830 --> 00:28:52,260
will be fine but I don't see any
legitimate reason to send SNMP packets

256
00:28:52,260 --> 00:28:56,240
over the Internet are you doing
something insane like exposing SMB

257
00:28:56,240 --> 00:29:01,860
servers anyway so you might want to
enable I get signing

258
00:29:01,860 --> 00:29:09,059
which prevents doesn't it won't prevent
the packets from the king and you how

259
00:29:09,059 --> 00:29:13,340
she has to be linked to the internet but
if a hacker gets your house she is it

260
00:29:13,340 --> 00:29:18,500
will prevent them from coming back to
your network and pushed me away like we

261
00:29:18,500 --> 00:29:28,400
did if using reading an SMB server these
will ever forget signing is not going to

262
00:29:28,400 --> 00:29:35,380
prevent leak of your credentials
basically does kill the connection but

263
00:29:35,380 --> 00:29:39,950
once the greatest 11 cents in Jim's
office you know preventing

264
00:29:39,950 --> 00:29:51,590
engaged in the work and of course enable
extended protection

265
00:29:51,590 --> 00:29:59,500
right so what's the takeaway over here
over the internet that's one super

266
00:29:59,500 --> 00:30:06,210
simple to do you have a ready-made tools
to do it for you literally beaten do

267
00:30:06,210 --> 00:30:10,510
like crazy amount of coding for this
oppose all of its lot of ready made

268
00:30:10,510 --> 00:30:17,440
stuff out there it is not supposed to
work according to Microsoft reported

269
00:30:17,440 --> 00:30:21,630
about nine months ago they don't want to
fix it because its defense in depth you

270
00:30:21,630 --> 00:30:28,970
need you like you said you need to ask
voters on your file we managed to do

271
00:30:28,970 --> 00:30:33,549
differential through a variety of ways
through a website through an email

272
00:30:33,549 --> 00:30:39,389
spamming users download a mailbox 20
video my mom and dad were definitely

273
00:30:39,390 --> 00:30:42,809
open up a video easily convince them to
do that

274
00:30:42,809 --> 00:30:51,629
rentals that way you could upload
malware you up you relayed from SMB to

275
00:30:51,630 --> 00:30:57,730
exchange this is just a small tip of the
iceberg kind of thing that uses and the

276
00:30:57,730 --> 00:31:03,169
MSSP I mean literally every video
service uses and BLM in the background

277
00:31:03,169 --> 00:31:09,990
too often to get everything people use
Kerberos nowadays but gerber is limited

278
00:31:09,990 --> 00:31:13,880
because you have to be in the domain to
do that so NTLM is still being used

279
00:31:13,880 --> 00:31:21,700
widely we show that we did it on the
stand great news for that post and it

280
00:31:21,700 --> 00:31:28,500
was completely patch nothing is going to
block it and it was all done remotely

281
00:31:28,500 --> 00:31:36,190
fantastic enjoy soft triggers so we

282
00:31:36,190 --> 00:31:45,799
interesting this when we were actually
working with seven ensure we're

283
00:31:45,799 --> 00:31:51,610
presenting tomorrow on another classic
attack which is like a division of pics

284
00:31:51,610 --> 00:31:57,879
sexy like this year many attacks on
Dixie and then you trusting one drama I

285
00:31:57,879 --> 00:32:02,500
mean both from silence was absolutely
related to what we doing they were

286
00:32:02,500 --> 00:32:06,340
working on a sexy and they realized that
when you can

287
00:32:06,340 --> 00:32:13,029
man in the middle of dates locally many
many software actually can be can be

288
00:32:13,029 --> 00:32:19,259
forced to do an SMB connection instead
of just i mean sixties or from an XML

289
00:32:19,259 --> 00:32:25,299
file is available software include like
huge value to your software which are

290
00:32:25,299 --> 00:32:31,700
linked against my crew discovered you
like things like iTunes major antivirus

291
00:32:31,700 --> 00:32:40,990
clients for you know to be cool web
protocols so yeah three we've shown like

292
00:32:40,990 --> 00:32:46,759
they belong to Microsoft but it auto
body so affected by this weekend but an

293
00:32:46,759 --> 00:32:55,750
URL anywhere and the survey results to
SMB you are not be like to say thank you

294
00:32:55,750 --> 00:33:02,300
to the source E

295
00:33:02,300 --> 00:33:08,600
I don't like to point out fourteen years
justice has been found and nobody has

296
00:33:08,600 --> 00:33:14,100
done packets nothing on the lmo to where
it should be pretty sure somebody's

297
00:33:14,100 --> 00:33:20,030
using it out there just alright
questions so I started by asking like

298
00:33:20,030 --> 00:33:25,800
was done like you know network
assessments against windows networks did

299
00:33:25,800 --> 00:33:39,919
you miss any questions we gotta make
exploit that you were remotely getting

300
00:33:39,920 --> 00:33:45,340
the username and password for the user
name and domain over HCP in this niche

301
00:33:45,340 --> 00:33:49,290
that you show up they're coming through
the clear that's a pretty big free

302
00:33:49,290 --> 00:33:53,379
agents operate with his where the user's
credentials not there

303
00:33:53,380 --> 00:33:57,850
ask her but I mean you've got something
to Crestwood Lane text you get has she

304
00:33:57,850 --> 00:34:03,520
is the credentials that you need too hot
to break all really so that's a pretty

305
00:34:03,520 --> 00:34:10,850
big like we identify that user or petrol
and just something about the internal

306
00:34:10,850 --> 00:34:13,750
structure of the name of the company
there from the coming off like an

307
00:34:13,750 --> 00:34:20,350
anonymizer something I'm using Chrome
that affect chrome does actually

308
00:34:20,350 --> 00:34:27,159
litigated because it asks you before
sending any credentials he play your we

309
00:34:27,159 --> 00:34:30,609
haven't checked like you know plugins
media players and stuff like that within

310
00:34:30,610 --> 00:34:37,290
Chrome which could very well be the very
same API as away brother tell you right

311
00:34:37,290 --> 00:34:46,690
chrome is not gonna believe the way i
coming to your question in regards to

312
00:34:46,690 --> 00:34:52,870
you what's happening inside the network
when you try to play inside a user I

313
00:34:52,870 --> 00:34:56,359
don't think we care so much about me
permission just closer we got shells

314
00:34:56,360 --> 00:35:01,320
like you know the exact works to get a
shot inside the network will like making

315
00:35:01,320 --> 00:35:05,040
the network like you don't there is
nothing gets basically you are inside

316
00:35:05,040 --> 00:35:10,290
the network

317
00:35:10,290 --> 00:35:19,290
in that case but you know maybe I don't
out exposed her breasts and beer are you

318
00:35:19,290 --> 00:35:22,720
still leaking my name but I don't want
to change it

319
00:35:22,720 --> 00:35:31,330
that's alright that's awesome just to be
clear if using a file on your computer

320
00:35:31,330 --> 00:35:37,819
on your router you're not possible right
by default you of a level using a file

321
00:35:37,820 --> 00:35:47,830
absolutely to block certain ports like
you install the Windows machine like

322
00:35:47,830 --> 00:35:54,360
you're not safe basically you need to go
to your firewall to block traffic to

323
00:35:54,360 --> 00:36:00,160
public aP's always gonna break like
sharing which may be you know what you

324
00:36:00,160 --> 00:36:06,859
want just because we have like you know
each other better and that you will use

325
00:36:06,860 --> 00:36:14,480
a bid to YouTube lucky you are
vulnerable when asked if you guys had

326
00:36:14,480 --> 00:36:19,150
explored you mention one of the major
mitigating factors on SMB and you

327
00:36:19,150 --> 00:36:23,890
explored WebDAV or the new features with
Windows to have work specifications on

328
00:36:23,890 --> 00:36:29,589
the outbound connections we tried with
another operation I won't mention true

329
00:36:29,590 --> 00:36:39,560
come back to work by creating holes and
I tried my best but we didn't try to

330
00:36:39,560 --> 00:36:44,930
wind up in a letter I would say you know
every technique we know the rules apply

331
00:36:44,930 --> 00:36:49,470
if this is really the way you want to go
back to say the network you could do

332
00:36:49,470 --> 00:36:56,700
that to make a deal

333
00:36:56,700 --> 00:37:05,500
attacked words that you use to log on as
the Ministry of her all just any account

334
00:37:05,500 --> 00:37:14,840
the needs treat her group as far as I
know

335
00:37:14,840 --> 00:37:23,820
any relief to all you mean when you read
what are you talking about like licking

336
00:37:23,820 --> 00:37:31,520
her shes to the internet or where can we
execute and really still program so

337
00:37:31,520 --> 00:37:35,150
unique stuff on the internet yet and you
can't has been able like you login with

338
00:37:35,150 --> 00:37:40,880
your machine if we if you basically you
can browse the web you are vulnerable

339
00:37:40,880 --> 00:37:46,210
area when he comes to reading back so he
can it depends the exchange stuff we've

340
00:37:46,210 --> 00:37:52,820
seen him a box and Exchange you all know
the reason I see what you goin USD meet

341
00:37:52,820 --> 00:37:59,380
every user about able to operate two
other key and no its not the case but

342
00:37:59,380 --> 00:38:05,620
agreed what more can you put that
mitigation slime echo request and then

343
00:38:05,620 --> 00:38:11,540
what was then DLL again you were
speaking I don't think it's on that side

344
00:38:11,540 --> 00:38:19,500
ok its new white paper anyway which you
you should have access to that the Glu

345
00:38:19,500 --> 00:38:47,430
school I need see you'll see the dealer
and it's under see Windows directory

346
00:38:47,430 --> 00:39:15,129
automatically sends an SMS connection
that's a yes

347
00:39:15,130 --> 00:39:27,520
any other questions yet so is it your
understanding from communications

348
00:39:27,520 --> 00:39:32,940
Microsoft that if he almost was
implemented correctly it would be paying

349
00:39:32,940 --> 00:39:36,579
attention to the registry flights and
offering us and be off or is that

350
00:39:36,579 --> 00:39:40,349
something that microsoft says its
intended function now I don't work for

351
00:39:40,349 --> 00:39:44,720
Microsoft I don't know you you might
need you would you have them like they

352
00:39:44,720 --> 00:39:50,790
want to watch this is a deal they
acknowledged that is flawed in that deal

353
00:39:50,790 --> 00:40:19,410
well the alleged there is a problem and
she's cheating and therefore my question

354
00:40:19,410 --> 00:40:22,640
so you're talking about the very first
demo where we actually pushing matter

355
00:40:22,640 --> 00:40:27,640
where you need to be able to coming back
to us and be the problem we we we

356
00:40:27,640 --> 00:40:32,868
discussed right so either he takes balls
straight away on the internet and does a

357
00:40:32,869 --> 00:40:42,809
public IP and no firewall and other ways
like you you cannot be that way and i

358
00:40:42,809 --> 00:40:48,950
cant sign you cannot but anyway we have
this announcement which is basically

359
00:40:48,950 --> 00:40:56,180
relaying over should you be and then
there is also would like to point out

360
00:40:56,180 --> 00:41:08,578
that SMB allows you to upload files and
execute them as services so have you

361
00:41:08,579 --> 00:41:16,460
shared anything on the Windows phones
tablets we actually SMB is not a

362
00:41:16,460 --> 00:41:27,770
protocol support Windows balance as far
as I know the question my question he

363
00:41:27,770 --> 00:41:40,420
said today one more I don't really I
haven't tested but I mean in terms of

364
00:41:40,420 --> 00:41:44,940
doing the issue to be connection should
know like the corruption that means by

365
00:41:44,940 --> 00:41:52,740
other proxy than what happens within the
proxy stranger to resolve the SMB share

366
00:41:52,740 --> 00:41:57,129
that he's ready they're up there are
questions I don't know I don't I would

367
00:41:57,130 --> 00:42:02,270
assume that it should you P process it
seems apply to other particles but it's

368
00:42:02,270 --> 00:42:10,920
worth checking out model that basically
a process going to replace most proxies

369
00:42:10,920 --> 00:42:14,630
do that kind of how I don't set
contention that he feels the same

370
00:42:14,630 --> 00:42:19,599
credentials over because NTLM works on
the basically it also has the DCP stream

371
00:42:19,599 --> 00:42:23,049
it as an authorized like that one
particular question so it had it cannot

372
00:42:23,049 --> 00:42:27,410
get it so until the end of the proxy
proxy creates another and Jhelum

373
00:42:27,410 --> 00:42:29,529
authentication to whatever it's going to
get

374
00:42:29,530 --> 00:42:34,800
questions

375
00:42:34,800 --> 00:42:54,430
SMB signing so we just got to be saying
tremendously right I am nothing it's

376
00:42:54,430 --> 00:43:01,270
okay I asked if it works with SMB
signing because I didn't see it before

377
00:43:01,270 --> 00:43:14,870
yeah it does be sending but you can
still download Exchange mailboxes ok I

378
00:43:14,870 --> 00:43:16,480
guess we could put your day thank you
very much

