1
00:00:00,179 --> 00:00:06,420
our name is<font color="#E5E5E5"> Dan we work at</font><font color="#CCCCCC"> the Atlas</font>

2
00:00:03,210 --> 00:00:07,379
<font color="#CCCCCC">insecurity team over in</font><font color="#E5E5E5"> Sydney we're</font>

3
00:00:06,420 --> 00:00:10,440
<font color="#CCCCCC">gonna</font><font color="#E5E5E5"> be talking to you today about</font>

4
00:00:07,379 --> 00:00:12,719
<font color="#E5E5E5">breach detection at scale with AWS honey</font>

5
00:00:10,440 --> 00:00:14,879
tokens<font color="#CCCCCC"> I would like to say I really</font>

6
00:00:12,719 --> 00:00:16,710
<font color="#CCCCCC">appreciate you all</font><font color="#E5E5E5"> actually being here</font>

7
00:00:14,880 --> 00:00:18,779
and<font color="#E5E5E5"> not in the reception drinking free</font>

8
00:00:16,710 --> 00:00:22,170
beer<font color="#E5E5E5"> right</font><font color="#CCCCCC"> now we will understand if you</font>

9
00:00:18,779 --> 00:00:24,750
have to<font color="#CCCCCC"> leave</font><font color="#E5E5E5"> so we're just gonna start</font>

10
00:00:22,170 --> 00:00:26,689
<font color="#CCCCCC">with what we</font><font color="#E5E5E5"> hope are the two stupidest</font>

11
00:00:24,750 --> 00:00:29,279
things you see at this<font color="#E5E5E5"> conference today</font>

12
00:00:26,689 --> 00:00:31,019
<font color="#E5E5E5">at least on stage if you anything you</font>

13
00:00:29,279 --> 00:00:41,930
see<font color="#E5E5E5"> at an after-party</font><font color="#CCCCCC"> is your own</font>

14
00:00:31,019 --> 00:00:49,019
<font color="#E5E5E5">business okay</font><font color="#CCCCCC"> so what I'm</font><font color="#E5E5E5"> about to</font><font color="#CCCCCC"> do is</font>

15
00:00:41,930 --> 00:00:51,300
generate<font color="#E5E5E5"> an annotated AWS credential so</font>

16
00:00:49,020 --> 00:00:54,590
the location that<font color="#E5E5E5"> I'll store these</font>

17
00:00:51,300 --> 00:01:00,000
<font color="#CCCCCC">credentials will be on screen at</font>

18
00:00:54,590 --> 00:01:03,300
security conference<font color="#CCCCCC"> and the order</font><font color="#E5E5E5"> of</font>

19
00:01:00,000 --> 00:01:12,539
these<font color="#CCCCCC"> credentials will be anyone in</font><font color="#E5E5E5"> the</font>

20
00:01:03,300 --> 00:01:16,679
room I guess<font color="#E5E5E5"> okay</font>

21
00:01:12,540 --> 00:01:20,670
ideally we<font color="#CCCCCC"> are there we go</font><font color="#E5E5E5"> okay so these</font>

22
00:01:16,680 --> 00:01:22,380
<font color="#E5E5E5">are some live AWS credentials</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> can</font>

23
00:01:20,670 --> 00:01:26,720
use them if you like I'll just

24
00:01:22,380 --> 00:01:26,720
demonstrate that<font color="#CCCCCC"> there they're live</font>

25
00:01:31,770 --> 00:01:37,170
it's<font color="#E5E5E5"> surely</font><font color="#CCCCCC"> the cameras got</font><font color="#E5E5E5"> it</font>

26
00:01:34,400 --> 00:01:38,990
and what are you doing now down<font color="#E5E5E5"> I'm just</font>

27
00:01:37,170 --> 00:01:43,620
checking that they're<font color="#CCCCCC"> actually alive</font>

28
00:01:38,990 --> 00:01:47,039
<font color="#CCCCCC">once I can remember how to spell let's</font>

29
00:01:43,620 --> 00:01:50,010
see<font color="#CCCCCC"> alright</font><font color="#E5E5E5"> cool</font><font color="#CCCCCC"> so you can see these</font>

30
00:01:47,040 --> 00:01:52,380
are<font color="#CCCCCC"> some live creds there for a user in</font>

31
00:01:50,010 --> 00:01:55,800
the<font color="#CCCCCC"> spacecraft group the user is called</font>

32
00:01:52,380 --> 00:01:57,810
<font color="#E5E5E5">eight eight three</font><font color="#CCCCCC"> nine something</font><font color="#E5E5E5"> cool</font>

33
00:01:55,800 --> 00:01:59,399
but<font color="#CCCCCC"> yeah don't worry</font><font color="#E5E5E5"> about writing those</font>

34
00:01:57,810 --> 00:02:02,100
down<font color="#CCCCCC"> because we're now gonna do</font><font color="#E5E5E5"> the</font>

35
00:01:59,400 --> 00:02:14,370
second and<font color="#CCCCCC"> dumber thing</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> just like</font>

36
00:02:02,100 --> 00:02:16,410
put them on paste bin let's go<font color="#CCCCCC"> alright</font>

37
00:02:14,370 --> 00:02:17,880
so that'll be on paste<font color="#E5E5E5"> bins recent paste</font>

38
00:02:16,410 --> 00:02:21,959
feed for the next like<font color="#CCCCCC"> fifteen minutes</font>

39
00:02:17,880 --> 00:02:23,250
<font color="#CCCCCC">if you want</font><font color="#E5E5E5"> them the yours</font><font color="#CCCCCC"> okay</font><font color="#E5E5E5"> we're</font>

40
00:02:21,959 --> 00:02:27,900
doing<font color="#CCCCCC"> a talk we should</font><font color="#E5E5E5"> probably do the</font>

41
00:02:23,250 --> 00:02:29,100
talk over to Dan who's gonna explain

42
00:02:27,900 --> 00:02:32,700
what we're actually doing<font color="#CCCCCC"> with our</font><font color="#E5E5E5"> lives</font>

43
00:02:29,100 --> 00:02:34,230
<font color="#CCCCCC">I might come over here so how many</font>

44
00:02:32,700 --> 00:02:38,579
<font color="#E5E5E5">people in the room are</font><font color="#CCCCCC"> familiar with</font>

45
00:02:34,230 --> 00:02:42,119
honey tokens<font color="#E5E5E5"> okay okay</font><font color="#CCCCCC"> tough crowd</font>

46
00:02:38,580 --> 00:02:45,630
<font color="#CCCCCC">alright</font><font color="#E5E5E5"> this is not a honey token it's a</font>

47
00:02:42,120 --> 00:02:49,049
honey coin<font color="#CCCCCC"> it could be a</font><font color="#E5E5E5"> good</font><font color="#CCCCCC"> investment</font>

48
00:02:45,630 --> 00:02:51,480
<font color="#E5E5E5">but I probably suggest you don't buy it</font>

49
00:02:49,049 --> 00:02:54,350
<font color="#CCCCCC">but</font><font color="#E5E5E5"> if you want to send me money anyway</font>

50
00:02:51,480 --> 00:02:58,798
that's fine you<font color="#CCCCCC"> can go</font><font color="#E5E5E5"> ahead and do that</font>

51
00:02:54,350 --> 00:03:02,880
<font color="#CCCCCC">so what is a honey token so honey token</font>

52
00:02:58,799 --> 00:03:07,140
is just any form of credential or thing

53
00:03:02,880 --> 00:03:10,500
<font color="#CCCCCC">or resource that</font><font color="#E5E5E5"> you use that</font><font color="#CCCCCC"> you</font><font color="#E5E5E5"> do</font>

54
00:03:07,140 --> 00:03:13,200
monitoring and logging on<font color="#CCCCCC"> but doesn't</font>

55
00:03:10,500 --> 00:03:15,600
exist anywhere<font color="#CCCCCC"> else like in in practical</font>

56
00:03:13,200 --> 00:03:18,149
terms<font color="#CCCCCC"> so in</font><font color="#E5E5E5"> general use</font>

57
00:03:15,600 --> 00:03:21,019
they<font color="#E5E5E5"> won't exist so honey token can</font><font color="#CCCCCC"> be</font>

58
00:03:18,150 --> 00:03:23,459
anything from<font color="#E5E5E5"> an email address that</font>

59
00:03:21,019 --> 00:03:27,750
<font color="#E5E5E5">doesn't belong to anyone</font><font color="#CCCCCC"> and it's just</font><font color="#E5E5E5"> a</font>

60
00:03:23,459 --> 00:03:30,900
generally available<font color="#CCCCCC"> it can be a DNS name</font>

61
00:03:27,750 --> 00:03:33,150
<font color="#E5E5E5">that no one should ever resolve it can</font>

62
00:03:30,900 --> 00:03:34,890
be a URL<font color="#CCCCCC"> that no one ever visits</font><font color="#E5E5E5"> but</font>

63
00:03:33,150 --> 00:03:37,530
generally anything<font color="#E5E5E5"> that in practice in</font>

64
00:03:34,890 --> 00:03:39,418
the<font color="#E5E5E5"> real or doesn't get touched only</font>

65
00:03:37,530 --> 00:03:41,060
<font color="#E5E5E5">gets touched where and say an attacker</font>

66
00:03:39,419 --> 00:03:44,930
finds it

67
00:03:41,060 --> 00:03:46,040
and thinks it's a little<font color="#CCCCCC"> bit weird sorry</font>

68
00:03:44,930 --> 00:03:49,569
<font color="#E5E5E5">we're just having some trouble</font><font color="#CCCCCC"> with this</font>

69
00:03:46,040 --> 00:03:57,109
<font color="#CCCCCC">lady</font><font color="#E5E5E5"> speaker notes</font><font color="#CCCCCC"> Oh</font><font color="#E5E5E5"> mr. B down there</font>

70
00:03:49,569 --> 00:03:59,660
so<font color="#E5E5E5"> AWS</font><font color="#CCCCCC"> keys</font><font color="#E5E5E5"> so AWS keys are really</font>

71
00:03:57,110 --> 00:04:04,209
<font color="#E5E5E5">interesting for</font><font color="#CCCCCC"> a few reasons first of</font>

72
00:03:59,660 --> 00:04:06,940
<font color="#CCCCCC">all they're they you access the AWS API</font>

73
00:04:04,209 --> 00:04:10,069
<font color="#CCCCCC">when you want</font><font color="#E5E5E5"> to do any action in AWS</font>

74
00:04:06,940 --> 00:04:11,840
<font color="#CCCCCC">and</font><font color="#E5E5E5"> that's really nice because the</font><font color="#CCCCCC"> API</font>

75
00:04:10,069 --> 00:04:13,700
<font color="#CCCCCC">is globally accessible internet</font>

76
00:04:11,840 --> 00:04:16,488
accessible<font color="#E5E5E5"> it's always on it's never off</font>

77
00:04:13,700 --> 00:04:21,858
and really to do any<font color="#E5E5E5"> any action at all</font>

78
00:04:16,488 --> 00:04:23,599
you<font color="#E5E5E5"> have to use this API</font><font color="#CCCCCC"> it's the keys</font>

79
00:04:21,858 --> 00:04:25,638
AWS<font color="#E5E5E5"> keys are generally</font><font color="#CCCCCC"> extremely</font>

80
00:04:23,600 --> 00:04:27,080
valuable<font color="#E5E5E5"> so an attacker</font><font color="#CCCCCC"> might find them</font>

81
00:04:25,639 --> 00:04:27,710
and they might realize they're the keys

82
00:04:27,080 --> 00:04:29,419
to<font color="#E5E5E5"> your kingdom</font>

83
00:04:27,710 --> 00:04:32,810
they might control your entire<font color="#CCCCCC"> internet</font>

84
00:04:29,419 --> 00:04:34,909
<font color="#E5E5E5">infrastructure for example</font><font color="#CCCCCC"> and they get</font>

85
00:04:32,810 --> 00:04:39,200
generated<font color="#E5E5E5"> a lot just in everyday use</font>

86
00:04:34,910 --> 00:04:43,490
<font color="#E5E5E5">right so as an SRE you lead them to</font>

87
00:04:39,200 --> 00:04:46,159
<font color="#E5E5E5">manage</font><font color="#CCCCCC"> your AWS infrastructure</font><font color="#E5E5E5"> as a user</font>

88
00:04:43,490 --> 00:04:47,360
you<font color="#E5E5E5"> need them to log in if you're doing</font>

89
00:04:46,160 --> 00:04:49,910
<font color="#E5E5E5">an integration with</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> third-party</font>

90
00:04:47,360 --> 00:04:53,570
<font color="#E5E5E5">service but the AWS keys are</font><font color="#CCCCCC"> required so</font>

91
00:04:49,910 --> 00:04:56,150
they just exist everywhere<font color="#CCCCCC"> and then they</font>

92
00:04:53,570 --> 00:04:57,710
can do<font color="#E5E5E5"> pretty much anything anything</font>

93
00:04:56,150 --> 00:04:59,810
<font color="#CCCCCC">that you can do through the</font><font color="#E5E5E5"> API which is</font>

94
00:04:57,710 --> 00:05:02,390
<font color="#CCCCCC">everything in AWS although the credits</font>

95
00:04:59,810 --> 00:05:05,419
<font color="#E5E5E5">can do and then finally the last thing</font>

96
00:05:02,390 --> 00:05:09,560
<font color="#E5E5E5">is attackers look for these</font><font color="#CCCCCC"> things</font><font color="#E5E5E5"> right</font>

97
00:05:05,419 --> 00:05:12,620
so whenever some some account gets

98
00:05:09,560 --> 00:05:15,500
compromised for example like when we see

99
00:05:12,620 --> 00:05:16,910
a<font color="#CCCCCC"> HipChat</font><font color="#E5E5E5"> or straight account getting</font>

100
00:05:15,500 --> 00:05:21,560
compromised one of the first things that

101
00:05:16,910 --> 00:05:24,770
attackers do is look for a<font color="#E5E5E5"> ki a which is</font>

102
00:05:21,560 --> 00:05:26,210
the<font color="#E5E5E5"> the prefix</font><font color="#CCCCCC"> for most AWS access</font><font color="#E5E5E5"> case</font>

103
00:05:24,770 --> 00:05:28,640
<font color="#E5E5E5">so what they're</font><font color="#CCCCCC"> really looking for is</font>

104
00:05:26,210 --> 00:05:30,650
how can I<font color="#CCCCCC"> get another credential that</font>

105
00:05:28,640 --> 00:05:34,909
gets me to<font color="#CCCCCC"> pivot</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> something</font><font color="#E5E5E5"> else</font>

106
00:05:30,650 --> 00:05:38,299
something<font color="#CCCCCC"> different something more how</font>

107
00:05:34,910 --> 00:05:41,030
many of you guys know<font color="#CCCCCC"> what this is right</font>

108
00:05:38,300 --> 00:05:43,160
<font color="#E5E5E5">it's we call them strategies in</font>

109
00:05:41,030 --> 00:05:43,489
Australia<font color="#E5E5E5"> some other places they're</font>

110
00:05:43,160 --> 00:05:46,220
called

111
00:05:43,490 --> 00:05:48,620
instant lottery tickets<font color="#E5E5E5"> but they have</font>

112
00:05:46,220 --> 00:05:53,750
some<font color="#E5E5E5"> really nice unique properties which</font>

113
00:05:48,620 --> 00:05:54,529
<font color="#CCCCCC">are very similar</font><font color="#E5E5E5"> to AWS access keys</font><font color="#CCCCCC"> that</font>

114
00:05:53,750 --> 00:05:56,389
being

115
00:05:54,529 --> 00:05:58,189
that in order<font color="#CCCCCC"> to find out if you've won</font>

116
00:05:56,389 --> 00:06:00,199
anything<font color="#CCCCCC"> like if you've won the prize</font>

117
00:05:58,189 --> 00:06:03,049
<font color="#E5E5E5">you</font><font color="#CCCCCC"> have to scratch the lottery ticket</font>

118
00:06:00,199 --> 00:06:06,109
<font color="#CCCCCC">and</font><font color="#E5E5E5"> so for an attacker or anyone else</font>

119
00:06:03,049 --> 00:06:07,969
who finds an access key what they have

120
00:06:06,109 --> 00:06:10,039
to do is that there's no other<font color="#E5E5E5"> way to</font>

121
00:06:07,969 --> 00:06:11,449
<font color="#E5E5E5">find out if it's useful</font><font color="#CCCCCC"> if it's in fact</font>

122
00:06:10,039 --> 00:06:14,419
<font color="#CCCCCC">the keys to the</font><font color="#E5E5E5"> kingdom</font><font color="#CCCCCC"> as an example</font>

123
00:06:11,449 --> 00:06:16,129
<font color="#E5E5E5">other than to use the access case and</font>

124
00:06:14,419 --> 00:06:17,989
that's<font color="#E5E5E5"> the only way you find</font><font color="#CCCCCC"> out</font><font color="#E5E5E5"> so you</font>

125
00:06:16,129 --> 00:06:21,639
<font color="#CCCCCC">effectively have</font><font color="#E5E5E5"> to scratch the lottery</font>

126
00:06:17,989 --> 00:06:25,339
<font color="#E5E5E5">ticket which is your AWS access key</font>

127
00:06:21,639 --> 00:06:27,529
<font color="#CCCCCC">there's there's generally no</font><font color="#E5E5E5"> downside</font><font color="#CCCCCC"> to</font>

128
00:06:25,339 --> 00:06:29,359
scratching them<font color="#E5E5E5"> and/or using</font><font color="#CCCCCC"> the access</font>

129
00:06:27,529 --> 00:06:33,558
key and the prize<font color="#CCCCCC"> for an attacker</font>

130
00:06:29,359 --> 00:06:35,378
generally is you can spin up<font color="#CCCCCC"> as many ec2</font>

131
00:06:33,559 --> 00:06:40,759
instances as you want to<font color="#CCCCCC"> mined Bitcoin</font>

132
00:06:35,379 --> 00:06:42,979
<font color="#E5E5E5">whenever you want another great property</font>

133
00:06:40,759 --> 00:06:44,479
of these things is<font color="#CCCCCC"> that they're</font>

134
00:06:42,979 --> 00:06:47,179
everywhere<font color="#CCCCCC"> I don't know if you can see</font>

135
00:06:44,479 --> 00:06:50,329
that but they're in<font color="#E5E5E5"> places like a text</font>

136
00:06:47,179 --> 00:06:53,539
file on<font color="#E5E5E5"> your CEOs CIOs desktop that says</font>

137
00:06:50,329 --> 00:06:56,539
AWS<font color="#E5E5E5"> root access</font><font color="#CCCCCC"> keys</font><font color="#E5E5E5"> CSV do not delete</font>

138
00:06:53,539 --> 00:06:59,599
super important or wherever else<font color="#E5E5E5"> you</font>

139
00:06:56,539 --> 00:07:02,539
<font color="#E5E5E5">might put them you might put them in</font>

140
00:06:59,599 --> 00:07:05,748
your in<font color="#E5E5E5"> your startup variables on a</font>

141
00:07:02,539 --> 00:07:07,729
server for<font color="#E5E5E5"> example some</font><font color="#CCCCCC"> people put them</font>

142
00:07:05,749 --> 00:07:09,919
in<font color="#E5E5E5"> there in their github</font><font color="#CCCCCC"> their public</font>

143
00:07:07,729 --> 00:07:11,329
did<font color="#CCCCCC"> hub repositories and then find lots</font>

144
00:07:09,919 --> 00:07:12,709
of Bitcoin mining going on in their

145
00:07:11,329 --> 00:07:18,979
accounts but they're generally

146
00:07:12,709 --> 00:07:21,229
<font color="#CCCCCC">everywhere yep so I guess the final</font>

147
00:07:18,979 --> 00:07:24,919
property<font color="#CCCCCC"> that we really care about is</font>

148
00:07:21,229 --> 00:07:28,159
that<font color="#E5E5E5"> while they while these access keys</font>

149
00:07:24,919 --> 00:07:32,349
might be the keys to the<font color="#E5E5E5"> kingdom</font><font color="#CCCCCC"> they</font>

150
00:07:28,159 --> 00:07:36,409
don't have to be AWS provides a really

151
00:07:32,349 --> 00:07:38,058
complex<font color="#CCCCCC"> and full-featured policy</font>

152
00:07:36,409 --> 00:07:39,619
infrastructure like access management

153
00:07:38,059 --> 00:07:43,249
<font color="#E5E5E5">infrastructure which means that you can</font>

154
00:07:39,619 --> 00:07:46,009
<font color="#E5E5E5">basically say hey this access key can't</font>

155
00:07:43,249 --> 00:07:48,939
be used<font color="#E5E5E5"> for anything</font><font color="#CCCCCC"> the policy</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> you</font>

156
00:07:46,009 --> 00:07:52,309
<font color="#CCCCCC">seen</font><font color="#E5E5E5"> on see on screen effectively says</font>

157
00:07:48,939 --> 00:07:56,149
for<font color="#CCCCCC"> all</font><font color="#E5E5E5"> actions on all resources we're</font>

158
00:07:52,309 --> 00:07:57,439
going to deny<font color="#CCCCCC"> access so this this so any</font>

159
00:07:56,149 --> 00:07:59,539
access key that has this policy

160
00:07:57,439 --> 00:08:02,689
<font color="#E5E5E5">basically can't do anything except for</font>

161
00:07:59,539 --> 00:08:04,509
<font color="#E5E5E5">one thing and</font><font color="#CCCCCC"> that's the</font><font color="#E5E5E5"> call that Dan</font>

162
00:08:02,689 --> 00:08:07,429
made<font color="#E5E5E5"> at the start of this talk which</font><font color="#CCCCCC"> is</font>

163
00:08:04,509 --> 00:08:08,330
get<font color="#CCCCCC"> caller identity which is</font><font color="#E5E5E5"> effectively</font>

164
00:08:07,429 --> 00:08:12,799
<font color="#E5E5E5">the</font><font color="#CCCCCC"> hue</font>

165
00:08:08,330 --> 00:08:14,659
of AWS<font color="#CCCCCC"> the AWS</font><font color="#E5E5E5"> API so you can set this</font>

166
00:08:12,800 --> 00:08:17,539
policy<font color="#E5E5E5"> and the other nice thing that</font>

167
00:08:14,659 --> 00:08:20,270
will<font color="#E5E5E5"> happen is AWS has a full-featured</font>

168
00:08:17,539 --> 00:08:23,840
<font color="#E5E5E5">logging capability and so all of</font><font color="#CCCCCC"> these</font>

169
00:08:20,270 --> 00:08:26,948
deny or allow actions<font color="#E5E5E5"> will get logged</font>

170
00:08:23,840 --> 00:08:31,359
and then you can do something<font color="#CCCCCC"> with</font><font color="#E5E5E5"> them</font>

171
00:08:26,949 --> 00:08:34,370
so going<font color="#E5E5E5"> back</font><font color="#CCCCCC"> to our scratchy metaphor</font>

172
00:08:31,360 --> 00:08:36,589
<font color="#CCCCCC">we have we have a the properties that</font><font color="#E5E5E5"> we</font>

173
00:08:34,370 --> 00:08:39,529
<font color="#CCCCCC">care</font><font color="#E5E5E5"> about the access keys are really</font>

174
00:08:36,589 --> 00:08:41,659
<font color="#CCCCCC">valuable they're ubiquitous</font><font color="#E5E5E5"> they're</font>

175
00:08:39,529 --> 00:08:43,789
everywhere<font color="#E5E5E5"> attackers will find them so</font>

176
00:08:41,659 --> 00:08:45,680
they won't think<font color="#E5E5E5"> they're weird</font><font color="#CCCCCC"> and</font>

177
00:08:43,789 --> 00:08:49,750
they're<font color="#CCCCCC"> really easy to</font><font color="#E5E5E5"> secure and have a</font>

178
00:08:45,680 --> 00:08:49,750
really<font color="#E5E5E5"> detailed logging infrastructure</font>

179
00:08:50,290 --> 00:08:57,319
<font color="#E5E5E5">so the</font><font color="#CCCCCC"> only difference</font><font color="#E5E5E5"> now if we make</font>

180
00:08:54,230 --> 00:08:59,779
<font color="#E5E5E5">them honey tokens is effectively that</font>

181
00:08:57,320 --> 00:09:01,790
instead<font color="#E5E5E5"> of the prize being you get to</font>

182
00:08:59,779 --> 00:09:05,570
mine<font color="#E5E5E5"> Bitcoin everywhere if you scratch</font>

183
00:09:01,790 --> 00:09:10,339
the key<font color="#CCCCCC"> the prize is for being a honey</font>

184
00:09:05,570 --> 00:09:11,779
token is that you get caught so that's

185
00:09:10,339 --> 00:09:17,300
nice<font color="#CCCCCC"> for us but not so nice</font><font color="#E5E5E5"> for the</font>

186
00:09:11,779 --> 00:09:19,579
attackers<font color="#E5E5E5"> okay so this is really nice</font><font color="#CCCCCC"> if</font>

187
00:09:17,300 --> 00:09:21,439
you want to generate<font color="#E5E5E5"> a single access</font>

188
00:09:19,579 --> 00:09:23,540
token<font color="#E5E5E5"> and put it on your size of desktop</font>

189
00:09:21,440 --> 00:09:26,209
<font color="#E5E5E5">there's a really easy way</font><font color="#CCCCCC"> to do</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> a</font>

190
00:09:23,540 --> 00:09:28,790
company called think'st has provided a

191
00:09:26,209 --> 00:09:32,119
free to use website called canary tokens

192
00:09:28,790 --> 00:09:34,310
<font color="#E5E5E5">and you can just go there</font><font color="#CCCCCC"> type set AWS</font>

193
00:09:32,120 --> 00:09:37,130
access key type in some metadata<font color="#E5E5E5"> about</font>

194
00:09:34,310 --> 00:09:38,540
it<font color="#E5E5E5"> hit the generate button it'll give</font>

195
00:09:37,130 --> 00:09:39,920
you an access<font color="#E5E5E5"> key and you can put it on</font>

196
00:09:38,540 --> 00:09:42,230
<font color="#CCCCCC">your size those desktop</font><font color="#E5E5E5"> that's really</font>

197
00:09:39,920 --> 00:09:44,510
<font color="#E5E5E5">nice</font><font color="#CCCCCC"> you can do the same thing for other</font>

198
00:09:42,230 --> 00:09:46,029
<font color="#E5E5E5">types of honey tokens like the ones we</font>

199
00:09:44,510 --> 00:09:48,920
mentioned<font color="#E5E5E5"> before</font><font color="#CCCCCC"> like a word document</font>

200
00:09:46,029 --> 00:09:52,820
<font color="#E5E5E5">DNS host name URL and that kind of thing</font>

201
00:09:48,920 --> 00:09:55,250
<font color="#E5E5E5">this is really</font><font color="#CCCCCC"> great for</font><font color="#E5E5E5"> when you want</font>

202
00:09:52,820 --> 00:09:59,899
to do individual instances<font color="#E5E5E5"> of honey</font>

203
00:09:55,250 --> 00:10:03,320
tokens but you might have noticed<font color="#CCCCCC"> that</font>

204
00:09:59,899 --> 00:10:05,899
<font color="#E5E5E5">how the talk</font><font color="#CCCCCC"> of our title was breach</font>

205
00:10:03,320 --> 00:10:08,810
detection at scale<font color="#CCCCCC"> so obviously</font><font color="#E5E5E5"> one-off</font>

206
00:10:05,899 --> 00:10:12,170
instances is kind<font color="#E5E5E5"> of not what we want so</font>

207
00:10:08,810 --> 00:10:15,260
what if you want to<font color="#E5E5E5"> do this on thousands</font>

208
00:10:12,170 --> 00:10:18,079
of machines<font color="#E5E5E5"> or you have thousands of</font>

209
00:10:15,260 --> 00:10:19,760
managers in<font color="#CCCCCC"> your company and</font><font color="#E5E5E5"> you want to</font>

210
00:10:18,079 --> 00:10:21,859
place a honey token on each of their

211
00:10:19,760 --> 00:10:25,189
desktops<font color="#E5E5E5"> so</font>

212
00:10:21,860 --> 00:10:26,720
<font color="#CCCCCC">there there before we looked into</font><font color="#E5E5E5"> this</font>

213
00:10:25,190 --> 00:10:30,980
there<font color="#E5E5E5"> was no</font><font color="#CCCCCC"> real way to do this at</font>

214
00:10:26,720 --> 00:10:32,360
scale<font color="#CCCCCC"> so in order to address</font><font color="#E5E5E5"> these</font>

215
00:10:30,980 --> 00:10:35,600
scaling<font color="#E5E5E5"> problems that we</font><font color="#CCCCCC"> were running</font>

216
00:10:32,360 --> 00:10:38,060
into<font color="#CCCCCC"> we we made project space crab and</font>

217
00:10:35,600 --> 00:10:39,649
for the<font color="#E5E5E5"> avoidance of any doubt dan has a</font>

218
00:10:38,060 --> 00:10:42,619
very important thing<font color="#CCCCCC"> to say about space</font>

219
00:10:39,649 --> 00:10:44,839
crab<font color="#E5E5E5"> you will notice that the crab is</font>

220
00:10:42,620 --> 00:10:47,690
<font color="#CCCCCC">not in space</font><font color="#E5E5E5"> the space</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> inside the</font>

221
00:10:44,839 --> 00:10:49,190
crab<font color="#E5E5E5"> and</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> very important</font><font color="#CCCCCC"> I don't</font>

222
00:10:47,690 --> 00:10:51,740
<font color="#CCCCCC">know I just</font><font color="#E5E5E5"> work here</font>

223
00:10:49,190 --> 00:10:53,899
<font color="#CCCCCC">ok so project space</font><font color="#E5E5E5"> crab is an AWS</font>

224
00:10:51,740 --> 00:10:55,970
CloudFormation stack<font color="#E5E5E5"> CloudFormation</font>

225
00:10:53,899 --> 00:10:59,480
stack is just a set of<font color="#E5E5E5"> instructions that</font>

226
00:10:55,970 --> 00:11:01,760
<font color="#E5E5E5">tells AWS what to do it deploys a couple</font>

227
00:10:59,480 --> 00:11:05,899
of things<font color="#CCCCCC"> that we care about the first</font>

228
00:11:01,760 --> 00:11:08,269
one is a<font color="#E5E5E5"> data store which we</font><font color="#CCCCCC"> use to</font>

229
00:11:05,899 --> 00:11:10,910
<font color="#CCCCCC">store the annotations that</font><font color="#E5E5E5"> you saw us</font>

230
00:11:08,269 --> 00:11:14,390
adding to credentials earlier<font color="#E5E5E5"> some</font>

231
00:11:10,910 --> 00:11:16,660
policies including the denial token

232
00:11:14,390 --> 00:11:19,399
policy that<font color="#E5E5E5"> you saw on</font><font color="#CCCCCC"> screen before</font>

233
00:11:16,660 --> 00:11:22,430
<font color="#E5E5E5">some lambdas</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> when lambdas</font><font color="#CCCCCC"> are just</font>

234
00:11:19,399 --> 00:11:25,790
<font color="#E5E5E5">Python scripts that AWS runs for you an</font>

235
00:11:22,430 --> 00:11:28,250
<font color="#E5E5E5">alerting pipeline and an API gateway the</font>

236
00:11:25,790 --> 00:11:33,199
API gateway is just a HTTP wrapper in

237
00:11:28,250 --> 00:11:37,360
front of some of<font color="#CCCCCC"> those lambdas</font><font color="#E5E5E5"> so</font><font color="#CCCCCC"> edible</font>

238
00:11:33,199 --> 00:11:40,250
<font color="#E5E5E5">us excuse me space crab lets you make</font>

239
00:11:37,360 --> 00:11:43,670
annotated AWS keys that<font color="#E5E5E5"> have no access</font>

240
00:11:40,250 --> 00:11:45,949
to<font color="#E5E5E5"> do anything at scale so</font><font color="#CCCCCC"> the pieces</font><font color="#E5E5E5"> of</font>

241
00:11:43,670 --> 00:11:49,069
metadata that<font color="#E5E5E5"> we collect</font><font color="#CCCCCC"> like the</font>

242
00:11:45,949 --> 00:11:51,140
<font color="#E5E5E5">location so where it's being stored the</font>

243
00:11:49,070 --> 00:11:53,750
onus or whose problem is<font color="#CCCCCC"> it if somebody</font>

244
00:11:51,140 --> 00:11:55,760
<font color="#CCCCCC">uses</font><font color="#E5E5E5"> this token and any miscellaneous</font>

245
00:11:53,750 --> 00:11:59,690
<font color="#E5E5E5">notes have you saw that earlier</font><font color="#CCCCCC"> in my</font>

246
00:11:55,760 --> 00:12:01,970
demo<font color="#CCCCCC"> all the keys get the denial policy</font>

247
00:11:59,690 --> 00:12:05,269
as we mentioned if anyone<font color="#E5E5E5"> ever tries to</font>

248
00:12:01,970 --> 00:12:07,310
<font color="#E5E5E5">use one of those credentials</font><font color="#CCCCCC"> all of</font>

249
00:12:05,269 --> 00:12:10,100
those actions get logged<font color="#E5E5E5"> into an s3</font>

250
00:12:07,310 --> 00:12:12,439
bucket<font color="#CCCCCC"> and then one of the many many</font>

251
00:12:10,100 --> 00:12:14,990
lambdas that we've<font color="#E5E5E5"> written processes</font>

252
00:12:12,440 --> 00:12:17,810
through that log looks for keys that it

253
00:12:14,990 --> 00:12:19,880
knows<font color="#E5E5E5"> about and if it finds one grabs</font>

254
00:12:17,810 --> 00:12:22,040
the extended<font color="#E5E5E5"> metadata attributes from</font>

255
00:12:19,880 --> 00:12:25,370
<font color="#CCCCCC">the data store and pushes them into</font><font color="#E5E5E5"> an</font>

256
00:12:22,040 --> 00:12:28,160
alerting<font color="#E5E5E5"> pipeline that alerting pipeline</font>

257
00:12:25,370 --> 00:12:31,579
<font color="#E5E5E5">is basically on the edge there another</font>

258
00:12:28,160 --> 00:12:35,219
couple of<font color="#E5E5E5"> lambdas</font><font color="#CCCCCC"> you can use those to</font>

259
00:12:31,579 --> 00:12:36,239
send yourself an email or log the

260
00:12:35,220 --> 00:12:38,879
send an<font color="#CCCCCC"> email that</font><font color="#E5E5E5"> goes into your</font>

261
00:12:36,240 --> 00:12:41,430
ticketing system or<font color="#E5E5E5"> paid you on page of</font>

262
00:12:38,879 --> 00:12:44,639
duty<font color="#E5E5E5"> or really anything else that you</font>

263
00:12:41,430 --> 00:12:46,290
<font color="#E5E5E5">can write a lambda</font><font color="#CCCCCC"> function to do we</font>

264
00:12:44,639 --> 00:12:47,519
haven't<font color="#CCCCCC"> written any more</font><font color="#E5E5E5"> alerting</font>

265
00:12:46,290 --> 00:12:50,759
options because those are the<font color="#E5E5E5"> ones that</font>

266
00:12:47,519 --> 00:12:52,589
<font color="#E5E5E5">we want but if you would like to have</font><font color="#CCCCCC"> a</font>

267
00:12:50,759 --> 00:12:54,149
<font color="#CCCCCC">different alerting thing this is an</font><font color="#E5E5E5"> open</font>

268
00:12:52,589 --> 00:12:59,029
<font color="#E5E5E5">source project</font><font color="#CCCCCC"> you can contribute to it</font>

269
00:12:54,149 --> 00:13:03,449
today<font color="#CCCCCC"> once you've generated the stack</font>

270
00:12:59,029 --> 00:13:05,759
<font color="#CCCCCC">you can generate up to</font><font color="#E5E5E5"> 10,000 tokens the</font>

271
00:13:03,449 --> 00:13:08,790
reason<font color="#E5E5E5"> for that limit is that AWS has a</font>

272
00:13:05,759 --> 00:13:12,839
per account user limit of<font color="#CCCCCC"> 5,000 users</font>

273
00:13:08,790 --> 00:13:15,180
<font color="#E5E5E5">and each user can have two tokens</font><font color="#CCCCCC"> we</font>

274
00:13:12,839 --> 00:13:17,069
<font color="#CCCCCC">asked them can</font><font color="#E5E5E5"> we get more users can we</font>

275
00:13:15,180 --> 00:13:19,979
<font color="#E5E5E5">get more tokens per user and they</font>

276
00:13:17,069 --> 00:13:22,259
laughed at us<font color="#CCCCCC"> and</font><font color="#E5E5E5"> told</font><font color="#CCCCCC"> us to</font><font color="#E5E5E5"> go away so</font>

277
00:13:19,980 --> 00:13:24,689
if you need to<font color="#CCCCCC"> generate</font><font color="#E5E5E5"> more</font><font color="#CCCCCC"> than 10,000</font>

278
00:13:22,259 --> 00:13:28,860
tokens<font color="#CCCCCC"> you'll need to spin up a second</font>

279
00:13:24,689 --> 00:13:31,969
<font color="#E5E5E5">AWS account but 10,000 tokens is enough</font>

280
00:13:28,860 --> 00:13:34,470
to cover your fleet of workstations<font color="#CCCCCC"> or</font>

281
00:13:31,970 --> 00:13:36,899
you know<font color="#E5E5E5"> micro services for your cloud</font>

282
00:13:34,470 --> 00:13:39,329
service<font color="#CCCCCC"> that you run or to put an</font>

283
00:13:36,899 --> 00:13:42,569
individual record<font color="#E5E5E5"> in everybody's like</font>

284
00:13:39,329 --> 00:13:44,699
<font color="#CCCCCC">online password saving service that they</font>

285
00:13:42,569 --> 00:13:48,479
use or your<font color="#CCCCCC"> third-party</font><font color="#E5E5E5"> logging</font>

286
00:13:44,699 --> 00:13:50,609
analytics<font color="#E5E5E5"> okay so you might have some</font>

287
00:13:48,480 --> 00:13:53,910
<font color="#CCCCCC">questions about this and we're going to</font>

288
00:13:50,610 --> 00:13:55,350
<font color="#E5E5E5">just do a little Q&A here it would try</font>

289
00:13:53,910 --> 00:13:58,699
it head off any of the<font color="#CCCCCC"> questions that</font>

290
00:13:55,350 --> 00:14:01,800
<font color="#E5E5E5">you might have sir this one's mine down</font>

291
00:13:58,699 --> 00:14:03,139
deep artificial intelligence<font color="#CCCCCC"> powered</font><font color="#E5E5E5"> by</font>

292
00:14:01,800 --> 00:14:29,550
<font color="#E5E5E5">mache on</font>

293
00:14:03,139 --> 00:14:32,220
<font color="#E5E5E5">I'm currently being paged okay let's</font>

294
00:14:29,550 --> 00:14:36,719
<font color="#E5E5E5">thank you veggie for informing me that</font><font color="#CCCCCC"> I</font>

295
00:14:32,220 --> 00:14:39,720
used<font color="#E5E5E5"> my token earlier today so I'm just</font>

296
00:14:36,720 --> 00:14:44,850
trying<font color="#CCCCCC"> to get</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> this second tab but I</font>

297
00:14:39,720 --> 00:14:46,890
cannot find the<font color="#E5E5E5"> mouse where is it okay</font>

298
00:14:44,850 --> 00:14:52,050
just<font color="#CCCCCC"> so for an</font><font color="#E5E5E5"> example</font>

299
00:14:46,890 --> 00:14:54,830
if I<font color="#E5E5E5"> reload this there will be a page of</font>

300
00:14:52,050 --> 00:14:54,829
<font color="#E5E5E5">duty incident</font>

301
00:15:01,450 --> 00:15:06,820
right so that's resolved so you can see

302
00:15:03,520 --> 00:15:08,980
here the notes that<font color="#E5E5E5"> I put in hi</font><font color="#CCCCCC"> mum the</font>

303
00:15:06,820 --> 00:15:14,010
action<font color="#E5E5E5"> that I</font><font color="#CCCCCC"> took with</font><font color="#E5E5E5"> this with this</font>

304
00:15:08,980 --> 00:15:17,590
<font color="#CCCCCC">token and the user identity</font><font color="#E5E5E5"> principle ID</font>

305
00:15:14,010 --> 00:15:19,630
<font color="#E5E5E5">the metadata</font><font color="#CCCCCC"> that we added</font><font color="#E5E5E5"> to that thing</font>

306
00:15:17,590 --> 00:15:21,670
<font color="#E5E5E5">and the source IP</font><font color="#CCCCCC"> address which is</font><font color="#E5E5E5"> an</font>

307
00:15:19,630 --> 00:15:24,570
<font color="#E5E5E5">extremely</font><font color="#CCCCCC"> useful thing</font><font color="#E5E5E5"> to know if</font>

308
00:15:21,670 --> 00:15:26,589
somebody is<font color="#E5E5E5"> touching your infrastructure</font>

309
00:15:24,570 --> 00:15:29,860
<font color="#CCCCCC">okay</font><font color="#E5E5E5"> all right back</font><font color="#CCCCCC"> to the thought</font>

310
00:15:26,590 --> 00:15:32,320
leadership<font color="#E5E5E5"> I wasn't finished down let's</font>

311
00:15:29,860 --> 00:15:35,710
let's just<font color="#E5E5E5"> skip to the next one all</font>

312
00:15:32,320 --> 00:15:38,140
right<font color="#E5E5E5"> all right so how do I set up space</font>

313
00:15:35,710 --> 00:15:42,270
<font color="#E5E5E5">crap okay setting up space crab is is</font>

314
00:15:38,140 --> 00:15:46,449
fun and relatively<font color="#E5E5E5"> easy</font><font color="#CCCCCC"> go to this URL</font>

315
00:15:42,270 --> 00:15:48,040
<font color="#CCCCCC">clone the repository and basically</font>

316
00:15:46,450 --> 00:15:49,660
<font color="#E5E5E5">follow the instructions in the readme</font>

317
00:15:48,040 --> 00:15:51,069
and the slides will be up later so you

318
00:15:49,660 --> 00:15:54,579
don't worry<font color="#CCCCCC"> about</font><font color="#E5E5E5"> writing stuff down</font>

319
00:15:51,070 --> 00:15:55,870
<font color="#E5E5E5">unless you want to so inside the</font>

320
00:15:54,580 --> 00:15:58,210
repository there's a script called

321
00:15:55,870 --> 00:16:01,180
manager dot<font color="#CCCCCC"> PI it asks you</font><font color="#E5E5E5"> a bunch of</font>

322
00:15:58,210 --> 00:16:04,330
questions<font color="#E5E5E5"> like who what's the AWS user</font>

323
00:16:01,180 --> 00:16:07,630
who owns this<font color="#CCCCCC"> what's your page of duty</font>

324
00:16:04,330 --> 00:16:09,460
events<font color="#E5E5E5"> key</font><font color="#CCCCCC"> fill out</font><font color="#E5E5E5"> those things and</font>

325
00:16:07,630 --> 00:16:11,500
wait about<font color="#E5E5E5"> 45 minutes and the stack will</font>

326
00:16:09,460 --> 00:16:15,610
get spun up<font color="#CCCCCC"> and then you will have a</font>

327
00:16:11,500 --> 00:16:19,120
functional deployed stack<font color="#E5E5E5"> all right so</font>

328
00:16:15,610 --> 00:16:20,530
if I've deployed<font color="#CCCCCC"> the stack</font><font color="#E5E5E5"> how do i</font>

329
00:16:19,120 --> 00:16:22,570
<font color="#CCCCCC">generate tokens to put them somewhere</font>

330
00:16:20,530 --> 00:16:26,110
<font color="#E5E5E5">that's a really great question</font><font color="#CCCCCC"> Dan</font><font color="#E5E5E5"> and</font>

331
00:16:22,570 --> 00:16:28,780
I'm glad you asked<font color="#CCCCCC"> it depends entirely</font>

332
00:16:26,110 --> 00:16:31,600
on your infrastructure<font color="#CCCCCC"> so if you have a</font>

333
00:16:28,780 --> 00:16:34,569
fleet management interface for your<font color="#E5E5E5"> work</font>

334
00:16:31,600 --> 00:16:36,640
<font color="#E5E5E5">stations like Casper if you use</font><font color="#CCCCCC"> max</font><font color="#E5E5E5"> or a</font>

335
00:16:34,570 --> 00:16:39,670
bunch of PowerShell<font color="#E5E5E5"> scripts and some</font>

336
00:16:36,640 --> 00:16:42,760
<font color="#CCCCCC">GPIO stuff if you've run</font><font color="#E5E5E5"> Windows you can</font>

337
00:16:39,670 --> 00:16:44,410
get those to run a<font color="#E5E5E5"> script</font><font color="#CCCCCC"> that pulls</font>

338
00:16:42,760 --> 00:16:47,650
<font color="#E5E5E5">down credentials from space crab and</font>

339
00:16:44,410 --> 00:16:50,650
stores them somewhere<font color="#CCCCCC"> on disk</font><font color="#E5E5E5"> so here</font>

340
00:16:47,650 --> 00:16:51,400
which is entirely unreadable<font color="#CCCCCC"> sorry about</font>

341
00:16:50,650 --> 00:16:53,800
that

342
00:16:51,400 --> 00:16:57,100
is a bash<font color="#CCCCCC"> script that I wrote for Casper</font>

343
00:16:53,800 --> 00:16:58,870
to do exactly<font color="#E5E5E5"> that thing</font><font color="#CCCCCC"> it hits an API</font>

344
00:16:57,100 --> 00:17:02,890
gateway that<font color="#E5E5E5"> you get from the spacecraft</font>

345
00:16:58,870 --> 00:17:07,000
<font color="#E5E5E5">stack generates tokens stores them on</font>

346
00:17:02,890 --> 00:17:08,349
disk<font color="#CCCCCC"> but</font><font color="#E5E5E5"> maybe you don't want to put</font>

347
00:17:07,000 --> 00:17:10,569
them<font color="#CCCCCC"> on</font><font color="#E5E5E5"> your</font><font color="#CCCCCC"> workstations you maybe want</font>

348
00:17:08,349 --> 00:17:12,639
<font color="#CCCCCC">to put them on your</font><font color="#E5E5E5"> cloud like your</font>

349
00:17:10,569 --> 00:17:14,020
<font color="#E5E5E5">micro services</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> you just put a similar</font>

350
00:17:12,640 --> 00:17:14,550
<font color="#CCCCCC">thing to</font><font color="#E5E5E5"> this somewhere in your</font>

351
00:17:14,020 --> 00:17:17,280
deployment

352
00:17:14,550 --> 00:17:18,930
pipeline for<font color="#E5E5E5"> your</font><font color="#CCCCCC"> microservices</font><font color="#E5E5E5"> or you</font>

353
00:17:17,280 --> 00:17:21,119
can write a script<font color="#CCCCCC"> to like generate</font>

354
00:17:18,930 --> 00:17:23,850
<font color="#E5E5E5">these and email them</font><font color="#CCCCCC"> to your CEO</font><font color="#E5E5E5"> for</font>

355
00:17:21,119 --> 00:17:25,290
some reason or run them through<font color="#E5E5E5"> your</font>

356
00:17:23,849 --> 00:17:27,569
<font color="#E5E5E5">third-party logging Analytics JavaScript</font>

357
00:17:25,290 --> 00:17:29,040
that<font color="#CCCCCC"> you have on all of</font><font color="#E5E5E5"> your corporate</font>

358
00:17:27,569 --> 00:17:32,250
<font color="#E5E5E5">websites for some reason and see who's</font>

359
00:17:29,040 --> 00:17:35,250
reading those logs<font color="#CCCCCC"> it's entirely up to</font>

360
00:17:32,250 --> 00:17:36,930
you<font color="#E5E5E5"> Patrick gray has a suggestion print</font>

361
00:17:35,250 --> 00:17:38,850
them out put<font color="#E5E5E5"> them on a post-it note</font><font color="#CCCCCC"> and</font>

362
00:17:36,930 --> 00:17:40,200
<font color="#E5E5E5">stick them on a monitor for the next</font>

363
00:17:38,850 --> 00:17:45,929
<font color="#E5E5E5">time you have a video interview in your</font>

364
00:17:40,200 --> 00:17:48,810
room<font color="#CCCCCC"> that's maybe not very scalable</font><font color="#E5E5E5"> so</font>

365
00:17:45,930 --> 00:17:51,150
but<font color="#CCCCCC"> if we tell people</font><font color="#E5E5E5"> that we're using</font>

366
00:17:48,810 --> 00:17:55,740
honey tokens<font color="#E5E5E5"> doesn't that make them</font>

367
00:17:51,150 --> 00:17:58,230
useless<font color="#CCCCCC"> dan I mean</font><font color="#E5E5E5"> probably not</font><font color="#CCCCCC"> if a red</font>

368
00:17:55,740 --> 00:18:01,380
teamer<font color="#E5E5E5"> or god forbid an actual hacker</font>

369
00:17:58,230 --> 00:18:04,140
<font color="#E5E5E5">finds some credentials lying around on</font>

370
00:18:01,380 --> 00:18:05,700
<font color="#E5E5E5">your</font><font color="#CCCCCC"> cisors desktop and doesn't use them</font>

371
00:18:04,140 --> 00:18:08,550
because<font color="#E5E5E5"> they're afraid they're a honey</font>

372
00:18:05,700 --> 00:18:10,620
token then you you win basically it's

373
00:18:08,550 --> 00:18:12,720
<font color="#E5E5E5">not what you wanted those honey tokens</font>

374
00:18:10,620 --> 00:18:14,729
to do which<font color="#E5E5E5"> is tell you that that person</font>

375
00:18:12,720 --> 00:18:16,650
is there but<font color="#E5E5E5"> you still you know you</font>

376
00:18:14,730 --> 00:18:17,690
still<font color="#E5E5E5"> win if they walk away from valid</font>

377
00:18:16,650 --> 00:18:21,570
credentials

378
00:18:17,690 --> 00:18:24,150
so here's<font color="#CCCCCC"> chubs</font><font color="#E5E5E5"> one of our Australian</font>

379
00:18:21,570 --> 00:18:28,679
bug bounty<font color="#E5E5E5"> Kings who is terrified</font><font color="#CCCCCC"> of</font>

380
00:18:24,150 --> 00:18:31,110
<font color="#E5E5E5">honey tokens which is fantastic</font><font color="#CCCCCC"> all</font>

381
00:18:28,680 --> 00:18:33,360
right then<font color="#CCCCCC"> I'm a</font><font color="#E5E5E5"> manager</font><font color="#CCCCCC"> I want to know</font>

382
00:18:31,110 --> 00:18:36,270
how much this<font color="#E5E5E5"> thing costs</font><font color="#CCCCCC"> it's a very</font>

383
00:18:33,360 --> 00:18:38,610
important<font color="#CCCCCC"> question and so our enterprise</font>

384
00:18:36,270 --> 00:18:41,970
scale<font color="#CCCCCC"> spacecraft deployments cost</font>

385
00:18:38,610 --> 00:18:43,740
between<font color="#E5E5E5"> 200 and 300</font><font color="#CCCCCC"> dollars a week which</font>

386
00:18:41,970 --> 00:18:48,990
<font color="#CCCCCC">i think</font><font color="#E5E5E5"> is under even your purchasing</font>

387
00:18:43,740 --> 00:18:50,390
limit yeah<font color="#CCCCCC"> yeah</font><font color="#E5E5E5"> okay so once you've</font>

388
00:18:48,990 --> 00:18:52,560
<font color="#E5E5E5">deployed space crab and you've</font>

389
00:18:50,390 --> 00:18:55,170
effectively secured your perimeter

390
00:18:52,560 --> 00:18:57,270
you've secured your<font color="#E5E5E5"> squishy inside bits</font>

391
00:18:55,170 --> 00:18:58,560
as<font color="#CCCCCC"> well</font><font color="#E5E5E5"> you might you'll have a lot of</font>

392
00:18:57,270 --> 00:19:01,139
<font color="#E5E5E5">free time on your hands and you'll</font>

393
00:18:58,560 --> 00:19:03,780
<font color="#E5E5E5">probably get bored and you might want to</font>

394
00:19:01,140 --> 00:19:05,730
know what do<font color="#E5E5E5"> people actually do with</font>

395
00:19:03,780 --> 00:19:06,360
<font color="#E5E5E5">lete credentials if they find them on</font>

396
00:19:05,730 --> 00:19:09,060
<font color="#E5E5E5">the Internet</font>

397
00:19:06,360 --> 00:19:11,729
so we set up some infrastructure<font color="#E5E5E5"> to test</font>

398
00:19:09,060 --> 00:19:16,050
this because<font color="#E5E5E5"> again we had a lot of spare</font>

399
00:19:11,730 --> 00:19:17,370
time<font color="#E5E5E5"> we spun up a separate AWS account</font>

400
00:19:16,050 --> 00:19:19,530
that didn't<font color="#E5E5E5"> have any of our production</font>

401
00:19:17,370 --> 00:19:21,899
data in it it's<font color="#E5E5E5"> probably a good</font><font color="#CCCCCC"> idea</font>

402
00:19:19,530 --> 00:19:24,510
just<font color="#CCCCCC"> generally</font><font color="#E5E5E5"> and we ran a little</font>

403
00:19:21,900 --> 00:19:26,400
<font color="#E5E5E5">script in</font><font color="#CCCCCC"> that every half an hour</font><font color="#E5E5E5"> and</font>

404
00:19:24,510 --> 00:19:28,140
the script would go to space crab

405
00:19:26,400 --> 00:19:33,390
<font color="#CCCCCC">generator token</font>

406
00:19:28,140 --> 00:19:36,540
and then put a<font color="#E5E5E5"> token in github</font><font color="#CCCCCC"> gist's or</font>

407
00:19:33,390 --> 00:19:39,840
in a github repository<font color="#CCCCCC"> or</font><font color="#E5E5E5"> finally on</font>

408
00:19:36,540 --> 00:19:41,610
<font color="#CCCCCC">pastebin so the first thing that we</font>

409
00:19:39,840 --> 00:19:45,449
learned when<font color="#CCCCCC"> we started</font><font color="#E5E5E5"> doing this is</font>

410
00:19:41,610 --> 00:19:48,990
that<font color="#E5E5E5"> AWS monitors github public repos</font>

411
00:19:45,450 --> 00:19:51,750
very closely<font color="#CCCCCC"> if you put a lot of keys</font><font color="#E5E5E5"> in</font>

412
00:19:48,990 --> 00:19:53,820
<font color="#E5E5E5">your public github repos AWS will open a</font>

413
00:19:51,750 --> 00:19:56,670
lot<font color="#E5E5E5"> of support cases about the keys</font><font color="#CCCCCC"> that</font>

414
00:19:53,820 --> 00:19:58,470
<font color="#E5E5E5">you put in your public github repo</font><font color="#CCCCCC"> they</font>

415
00:19:56,670 --> 00:20:00,240
do that<font color="#E5E5E5"> about 30 times per account</font>

416
00:19:58,470 --> 00:20:04,169
before<font color="#E5E5E5"> they basically write you off as</font>

417
00:20:00,240 --> 00:20:05,760
<font color="#E5E5E5">an idiot and stop doing</font><font color="#CCCCCC"> that the second</font>

418
00:20:04,169 --> 00:20:07,919
thing that we learned is that if you

419
00:20:05,760 --> 00:20:08,669
<font color="#CCCCCC">ignore those support cases</font><font color="#E5E5E5"> for long</font>

420
00:20:07,919 --> 00:20:10,710
enough

421
00:20:08,669 --> 00:20:12,809
someone from Seattle will call you the

422
00:20:10,710 --> 00:20:15,179
day<font color="#CCCCCC"> after</font><font color="#E5E5E5"> Christmas</font><font color="#CCCCCC"> is their time</font><font color="#E5E5E5"> to say</font>

423
00:20:12,809 --> 00:20:18,330
hey Dan what are you doing with all

424
00:20:15,179 --> 00:20:20,820
<font color="#E5E5E5">these compromised keys</font><font color="#CCCCCC"> and when you say</font>

425
00:20:18,330 --> 00:20:23,668
<font color="#E5E5E5">oh no it's fine</font><font color="#CCCCCC"> I did it on purpose</font>

426
00:20:20,820 --> 00:20:26,610
I want those<font color="#E5E5E5"> to be there they say</font><font color="#CCCCCC"> ok</font>

427
00:20:23,669 --> 00:20:28,230
thanks I'll have to get<font color="#CCCCCC"> back to you and</font>

428
00:20:26,610 --> 00:20:30,120
then the third<font color="#CCCCCC"> thing</font><font color="#E5E5E5"> that we learned is</font>

429
00:20:28,230 --> 00:20:32,250
<font color="#CCCCCC">that posting hundreds of keys to the</font>

430
00:20:30,120 --> 00:20:36,510
<font color="#E5E5E5">Internet is against the AWS Terms of Use</font>

431
00:20:32,250 --> 00:20:38,010
<font color="#CCCCCC">and</font><font color="#E5E5E5"> we have to stop so we</font><font color="#CCCCCC"> unfortunately</font>

432
00:20:36,510 --> 00:20:40,470
could only run<font color="#E5E5E5"> this experiment</font><font color="#CCCCCC"> for like</font>

433
00:20:38,010 --> 00:20:44,120
a week and a half before<font color="#E5E5E5"> we were told to</font>

434
00:20:40,470 --> 00:20:46,679
you know<font color="#E5E5E5"> delete</font><font color="#CCCCCC"> your account</font><font color="#E5E5E5"> basically</font>

435
00:20:44,120 --> 00:20:48,809
so yeah we didn't run this<font color="#E5E5E5"> for as long</font>

436
00:20:46,679 --> 00:20:50,460
<font color="#E5E5E5">as</font><font color="#CCCCCC"> we wanted to I also like</font><font color="#E5E5E5"> to say that</font>

437
00:20:48,809 --> 00:20:53,370
all the people I talked to at AWS were

438
00:20:50,460 --> 00:20:55,380
like<font color="#E5E5E5"> super useful and super helpful</font><font color="#CCCCCC"> and</font>

439
00:20:53,370 --> 00:20:58,729
thought this research was cool<font color="#CCCCCC"> and also</font>

440
00:20:55,380 --> 00:20:58,730
that I should stop and<font color="#E5E5E5"> delete my account</font>

441
00:20:59,150 --> 00:21:06,510
so in our sadly<font color="#E5E5E5"> truncated research we</font>

442
00:21:04,470 --> 00:21:08,730
found<font color="#E5E5E5"> that there are exactly two kinds</font>

443
00:21:06,510 --> 00:21:12,600
of<font color="#E5E5E5"> people</font><font color="#CCCCCC"> who</font><font color="#E5E5E5"> use compromised AWS</font>

444
00:21:08,730 --> 00:21:15,840
accounts<font color="#CCCCCC"> the first one will find some</font>

445
00:21:12,600 --> 00:21:20,639
<font color="#E5E5E5">credentials lying around in github and</font>

446
00:21:15,840 --> 00:21:23,639
put them in like a<font color="#E5E5E5"> GUI s3 bucket</font>

447
00:21:20,640 --> 00:21:25,950
browsing program<font color="#E5E5E5"> and they'll try and</font>

448
00:21:23,640 --> 00:21:27,510
<font color="#E5E5E5">list bucket since when they see that</font>

449
00:21:25,950 --> 00:21:31,590
they can't list any buckets they just

450
00:21:27,510 --> 00:21:33,540
give up<font color="#E5E5E5"> they lack discipline</font><font color="#CCCCCC"> the second</font>

451
00:21:31,590 --> 00:21:36,418
kind<font color="#E5E5E5"> will collect all of the credentials</font>

452
00:21:33,540 --> 00:21:38,280
<font color="#E5E5E5">that</font><font color="#CCCCCC"> he finds and then</font><font color="#E5E5E5"> puts it put them</font>

453
00:21:36,419 --> 00:21:41,669
<font color="#E5E5E5">in a Python script that they wrote and</font>

454
00:21:38,280 --> 00:21:44,129
try every API that AWS offers

455
00:21:41,669 --> 00:21:46,259
so they're<font color="#E5E5E5"> not necessarily interested in</font>

456
00:21:44,129 --> 00:21:48,389
listing buckets or just spinning up ec2

457
00:21:46,259 --> 00:21:49,799
instances<font color="#E5E5E5"> they'll also try and find all</font>

458
00:21:48,389 --> 00:21:51,389
of<font color="#E5E5E5"> the weird little information</font>

459
00:21:49,799 --> 00:21:53,668
disclosure vectors that<font color="#E5E5E5"> you might be</font>

460
00:21:51,389 --> 00:21:55,559
able<font color="#E5E5E5"> to get with an AWS key that they</font>

461
00:21:53,669 --> 00:21:59,489
can then use<font color="#CCCCCC"> to</font><font color="#E5E5E5"> spin up ec2 instances</font>

462
00:21:55,559 --> 00:22:00,959
and<font color="#E5E5E5"> like mine Bitcoin</font><font color="#CCCCCC"> there</font><font color="#E5E5E5"> might be</font>

463
00:21:59,489 --> 00:22:02,429
other types of people<font color="#CCCCCC"> if you run this</font>

464
00:22:00,959 --> 00:22:07,529
<font color="#CCCCCC">experiment for more than a week but</font>

465
00:22:02,429 --> 00:22:11,700
those<font color="#E5E5E5"> are the two that we saw so here's</font>

466
00:22:07,529 --> 00:22:15,269
some exciting statistics<font color="#E5E5E5"> on github if</font>

467
00:22:11,700 --> 00:22:18,109
you post your credentials<font color="#E5E5E5"> to a public</font>

468
00:22:15,269 --> 00:22:21,299
github repo or to a public github gist

469
00:22:18,109 --> 00:22:23,009
<font color="#CCCCCC">there's a pretty</font><font color="#E5E5E5"> much an</font><font color="#CCCCCC"> 83% chance that</font>

470
00:22:21,299 --> 00:22:25,859
someone is going to<font color="#E5E5E5"> use</font><font color="#CCCCCC"> those and they</font>

471
00:22:23,009 --> 00:22:28,499
will<font color="#CCCCCC"> use them 30</font><font color="#E5E5E5"> minutes exactly</font><font color="#CCCCCC"> after</font>

472
00:22:25,859 --> 00:22:30,299
you post<font color="#E5E5E5"> them I have no idea why it's 30</font>

473
00:22:28,499 --> 00:22:32,039
<font color="#E5E5E5">minutes exactly</font><font color="#CCCCCC"> but it's 30 minutes plus</font>

474
00:22:30,299 --> 00:22:35,129
or<font color="#E5E5E5"> minus</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> couple of seconds every time</font>

475
00:22:32,039 --> 00:22:37,408
we do this<font color="#E5E5E5"> it's maybe something</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> do</font>

476
00:22:35,129 --> 00:22:39,570
with how github search works but I I

477
00:22:37,409 --> 00:22:43,499
<font color="#CCCCCC">don't</font><font color="#E5E5E5"> know if you have any ideas</font><font color="#CCCCCC"> please</font>

478
00:22:39,570 --> 00:22:45,958
tell me<font color="#E5E5E5"> because it confuses</font><font color="#CCCCCC"> me a lot</font><font color="#E5E5E5"> on</font>

479
00:22:43,499 --> 00:22:49,759
the<font color="#E5E5E5"> other hand pastebin has a completely</font>

480
00:22:45,959 --> 00:22:52,649
<font color="#CCCCCC">different exploitation profile</font><font color="#E5E5E5"> so only</font>

481
00:22:49,759 --> 00:22:55,589
<font color="#CCCCCC">9%</font><font color="#E5E5E5"> of the tokens that we stored on</font>

482
00:22:52,649 --> 00:22:58,379
<font color="#CCCCCC">pastebin</font><font color="#E5E5E5"> actually were attempted to be</font>

483
00:22:55,589 --> 00:23:00,029
<font color="#E5E5E5">exploited and that's a better hit rate</font>

484
00:22:58,379 --> 00:23:01,228
than I've had in<font color="#E5E5E5"> some commercial secret</font>

485
00:23:00,029 --> 00:23:03,329
storage<font color="#E5E5E5"> services that I've used</font>

486
00:23:01,229 --> 00:23:09,059
personally so they spin is a great place

487
00:23:03,329 --> 00:23:11,219
to<font color="#E5E5E5"> store your secrets</font><font color="#CCCCCC"> so paste</font><font color="#E5E5E5"> bin</font>

488
00:23:09,059 --> 00:23:14,099
pastes also just have a different

489
00:23:11,219 --> 00:23:17,129
exploitation profile generally<font color="#E5E5E5"> when you</font>

490
00:23:14,099 --> 00:23:18,539
post something<font color="#E5E5E5"> to</font><font color="#CCCCCC"> pay spin 50 or 60 IP</font>

491
00:23:17,129 --> 00:23:19,978
addresses around<font color="#E5E5E5"> the world immediately</font>

492
00:23:18,539 --> 00:23:23,190
scrape that because they're constantly

493
00:23:19,979 --> 00:23:26,219
<font color="#E5E5E5">scraping the front page of paste bin</font><font color="#CCCCCC"> but</font>

494
00:23:23,190 --> 00:23:28,859
if it falls off the front page<font color="#CCCCCC"> you</font>

495
00:23:26,219 --> 00:23:30,570
<font color="#CCCCCC">basically can't find it for generally</font>

496
00:23:28,859 --> 00:23:32,789
about<font color="#E5E5E5"> 15 days because</font><font color="#CCCCCC"> paste bin only</font>

497
00:23:30,570 --> 00:23:36,029
updates its paste to Google search like

498
00:23:32,789 --> 00:23:37,559
once a<font color="#CCCCCC"> month or so and</font><font color="#E5E5E5"> people are</font>

499
00:23:36,029 --> 00:23:40,139
<font color="#E5E5E5">grabbing these immediately but they're</font>

500
00:23:37,559 --> 00:23:41,940
not acting on them as quickly so<font color="#E5E5E5"> with</font>

501
00:23:40,139 --> 00:23:43,529
<font color="#E5E5E5">github you post it someone uses it</font>

502
00:23:41,940 --> 00:23:46,940
<font color="#CCCCCC">immediately</font><font color="#E5E5E5"> they're done</font>

503
00:23:43,529 --> 00:23:49,859
but with paste bin we saw times between

504
00:23:46,940 --> 00:23:52,259
<font color="#E5E5E5">a little bit more than 12 hours up to</font>

505
00:23:49,859 --> 00:23:55,949
<font color="#E5E5E5">nearly two days later before somebody</font>

506
00:23:52,259 --> 00:23:58,049
actually<font color="#E5E5E5"> tried to</font><font color="#CCCCCC"> use them which means</font>

507
00:23:55,950 --> 00:24:00,389
if you're in a<font color="#CCCCCC"> competitive intelligence</font>

508
00:23:58,049 --> 00:24:01,950
<font color="#CCCCCC">thing there's probably a market gap for</font>

509
00:24:00,389 --> 00:24:03,360
scraping stuff on<font color="#CCCCCC"> pastebin</font><font color="#E5E5E5"> and telling</font>

510
00:24:01,950 --> 00:24:07,230
<font color="#CCCCCC">people about</font><font color="#E5E5E5"> it</font>

511
00:24:03,360 --> 00:24:10,168
free product idea<font color="#E5E5E5"> go for</font><font color="#CCCCCC"> your</font><font color="#E5E5E5"> life okay</font>

512
00:24:07,230 --> 00:24:11,940
<font color="#E5E5E5">the most secure place that I found to</font>

513
00:24:10,169 --> 00:24:13,830
post credentials on the<font color="#CCCCCC"> Internet</font>

514
00:24:11,940 --> 00:24:16,710
is<font color="#E5E5E5"> just put them in</font><font color="#CCCCCC"> a picture on Twitter</font>

515
00:24:13,830 --> 00:24:19,620
<font color="#CCCCCC">I put the words</font><font color="#E5E5E5"> unhackable</font>

516
00:24:16,710 --> 00:24:21,750
infrastructure<font color="#E5E5E5"> in a tweet and nobody</font>

517
00:24:19,620 --> 00:24:23,399
cared enough to<font color="#E5E5E5"> like look at</font><font color="#CCCCCC"> it and go</font>

518
00:24:21,750 --> 00:24:25,169
<font color="#CCCCCC">down your see code is awful</font><font color="#E5E5E5"> they're like</font>

519
00:24:23,399 --> 00:24:28,199
six<font color="#E5E5E5"> different</font><font color="#CCCCCC"> uh C's right there and</font>

520
00:24:25,169 --> 00:24:30,019
also there's there's like an API key

521
00:24:28,200 --> 00:24:32,970
right at the bottom of<font color="#CCCCCC"> that</font><font color="#E5E5E5"> picture</font>

522
00:24:30,019 --> 00:24:35,220
<font color="#E5E5E5">which I personally found extremely</font>

523
00:24:32,970 --> 00:24:37,470
disappointing<font color="#E5E5E5"> but if you need to store</font>

524
00:24:35,220 --> 00:24:41,669
<font color="#CCCCCC">something secret</font><font color="#E5E5E5"> put it on a low traffic</font>

525
00:24:37,470 --> 00:24:43,740
<font color="#CCCCCC">Twitter account okay</font>

526
00:24:41,669 --> 00:24:45,720
we do not have a<font color="#CCCCCC"> strong finish</font>

527
00:24:43,740 --> 00:24:48,630
unfortunately<font color="#E5E5E5"> but we do have some calls</font>

528
00:24:45,720 --> 00:24:50,820
<font color="#E5E5E5">to action the first is use honey tokens</font>

529
00:24:48,630 --> 00:24:53,370
<font color="#E5E5E5">put them around your network you'll</font>

530
00:24:50,820 --> 00:24:56,610
learn<font color="#E5E5E5"> horrible things and it'll be fun</font>

531
00:24:53,370 --> 00:24:58,320
<font color="#E5E5E5">and it's mostly pretty easy and also</font>

532
00:24:56,610 --> 00:25:00,658
<font color="#E5E5E5">please contribute to space</font><font color="#CCCCCC"> crap</font><font color="#E5E5E5"> it's an</font>

533
00:24:58,320 --> 00:25:03,510
<font color="#CCCCCC">open-source project it's on</font><font color="#E5E5E5"> bit bucket</font>

534
00:25:00,659 --> 00:25:07,169
<font color="#CCCCCC">you</font><font color="#E5E5E5"> can fork it and</font><font color="#CCCCCC"> give</font><font color="#E5E5E5"> us suggestions</font>

535
00:25:03,510 --> 00:25:08,820
for<font color="#CCCCCC"> making our JSON</font><font color="#E5E5E5"> less horrible or add</font>

536
00:25:07,169 --> 00:25:10,399
new alerting mechanisms if that's

537
00:25:08,820 --> 00:25:20,120
<font color="#CCCCCC">something that</font><font color="#E5E5E5"> you're interested in</font>

538
00:25:10,399 --> 00:25:22,168
<font color="#CCCCCC">Thanks does anyone have</font><font color="#E5E5E5"> any</font><font color="#CCCCCC"> questions or</font>

539
00:25:20,120 --> 00:25:23,760
everyone wants to go to<font color="#E5E5E5"> the</font><font color="#CCCCCC"> reception</font>

540
00:25:22,169 --> 00:25:28,970
and drink the free beer<font color="#E5E5E5"> okay I'm with</font>

541
00:25:23,760 --> 00:25:28,970
you<font color="#E5E5E5"> thanks everyone</font>

