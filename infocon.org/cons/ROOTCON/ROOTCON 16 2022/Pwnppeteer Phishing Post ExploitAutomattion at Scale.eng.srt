1
00:00:01,460 --> 00:00:04,860
oh sorry how do you how do you pronounce

2
00:00:04,860 --> 00:00:06,960
that is that the joke

3
00:00:06,960 --> 00:00:09,540
the joke so my first name is a French

4
00:00:09,540 --> 00:00:10,620
name

5
00:00:10,620 --> 00:00:13,559
and my last name is a Polish name so it

6
00:00:13,559 --> 00:00:16,680
should be Jefe so that's why people say

7
00:00:16,680 --> 00:00:18,359
snoke because no one is able to

8
00:00:18,359 --> 00:00:20,220
pronounce both of them

9
00:00:20,220 --> 00:00:22,020
okay got it

10
00:00:22,020 --> 00:00:22,680
um

11
00:00:22,680 --> 00:00:25,519
snorky is our next speaker

12
00:00:25,519 --> 00:00:29,400
he is a red team leader at Medallia uh

13
00:00:29,400 --> 00:00:31,619
security by day and a security

14
00:00:31,619 --> 00:00:35,160
researcher and VOIP hacker at night

15
00:00:35,160 --> 00:00:38,880
uh he's the ambassador of happiness

16
00:00:38,880 --> 00:00:41,219
and Healthy Living what do you mean by

17
00:00:41,219 --> 00:00:43,200
that

18
00:00:43,200 --> 00:00:45,719
I like to be away from keyboard so I run

19
00:00:45,719 --> 00:00:47,820
a long distance so that was it keep me

20
00:00:47,820 --> 00:00:50,160
illc and happy

21
00:00:50,160 --> 00:00:52,500
good for you man

22
00:00:52,500 --> 00:00:56,820
so since 2001 he had uh he has been a

23
00:00:56,820 --> 00:00:58,680
penetration tester and red teamer who

24
00:00:58,680 --> 00:01:01,500
has released advisories and tools

25
00:01:01,500 --> 00:01:04,739
on VoIP Cisco products active directory

26
00:01:04,739 --> 00:01:05,820
and sap

27
00:01:05,820 --> 00:01:08,400
and he has spoken at various security

28
00:01:08,400 --> 00:01:12,420
Focus conferences including hack that do

29
00:01:12,420 --> 00:01:16,140
Troopers I.T underground activity hack

30
00:01:16,140 --> 00:01:19,979
in the Box ssdic Recon and black hat

31
00:01:19,979 --> 00:01:22,619
Arsenal ladies and Gentlemen let's give

32
00:01:22,619 --> 00:01:26,479
a warm Applause for snorky

33
00:01:33,180 --> 00:01:37,140
hey guys so I will try to be short I

34
00:01:37,140 --> 00:01:40,200
know all of us waiting for the party I

35
00:01:40,200 --> 00:01:42,180
tried doing something fun so let's see

36
00:01:42,180 --> 00:01:44,640
if you get fun during this presentation

37
00:01:44,640 --> 00:01:46,740
I will share my slides so there is a lot

38
00:01:46,740 --> 00:01:48,540
of content there you can take pictures

39
00:01:48,540 --> 00:01:51,360
of course but at the end I will show the

40
00:01:51,360 --> 00:01:54,659
slide so you should have also content

41
00:01:54,659 --> 00:01:56,939
so quickly about me I already says that

42
00:01:56,939 --> 00:01:59,280
it's hard to pronounce my first name or

43
00:01:59,280 --> 00:02:02,820
my name so usually people say snarky and

44
00:02:02,820 --> 00:02:05,820
unfortunately for me Google no or meta

45
00:02:05,820 --> 00:02:07,740
LinkedIn everyone know everything about

46
00:02:07,740 --> 00:02:10,020
me so feel free to scan that and you get

47
00:02:10,020 --> 00:02:12,959
more details about my me my life and so

48
00:02:12,959 --> 00:02:15,959
on for the joke if you use the active

49
00:02:15,959 --> 00:02:18,060
directory check for Tony Mitchell

50
00:02:18,060 --> 00:02:21,800
account maybe you can find more about me

51
00:02:21,900 --> 00:02:24,360
so today today is the goal of this

52
00:02:24,360 --> 00:02:25,800
presentation is to

53
00:02:25,800 --> 00:02:28,500
share my uh feedback and my experience

54
00:02:28,500 --> 00:02:30,540
about fishing attack and how it could be

55
00:02:30,540 --> 00:02:31,800
really efficient for the red team

56
00:02:31,800 --> 00:02:33,060
activities

57
00:02:33,060 --> 00:02:33,900
um

58
00:02:33,900 --> 00:02:36,900
we'll try to introduce some techniques

59
00:02:36,900 --> 00:02:40,680
um and tooling that I did to

60
00:02:40,680 --> 00:02:43,040
kale a fishing campaign during

61
00:02:43,040 --> 00:02:46,800
forwarding perspective and the strategy

62
00:02:46,800 --> 00:02:49,260
here is not to get the phishing to get

63
00:02:49,260 --> 00:02:51,480
access to on-premise system but really

64
00:02:51,480 --> 00:02:54,480
to Target is or SAS infrastructures and

65
00:02:54,480 --> 00:02:57,180
environments so nowadays there is a lot

66
00:02:57,180 --> 00:03:00,000
of companies that not rely on on pure on

67
00:03:00,000 --> 00:03:03,780
premise where you have to get in uh make

68
00:03:03,780 --> 00:03:05,640
lateral movement and compromise or

69
00:03:05,640 --> 00:03:08,340
active directory a lot of them now use

70
00:03:08,340 --> 00:03:11,159
with zero trust model or with with what

71
00:03:11,159 --> 00:03:12,599
happening with the kovid we have a lot

72
00:03:12,599 --> 00:03:15,959
of remote position so all people start

73
00:03:15,959 --> 00:03:19,680
to move to the pure SAS services and

74
00:03:19,680 --> 00:03:23,580
that where we can make efficiency

75
00:03:23,580 --> 00:03:25,860
or at least as an offensive perspective

76
00:03:25,860 --> 00:03:28,080
we can be efficient when we make fishing

77
00:03:28,080 --> 00:03:31,879
against such infrastructures

78
00:03:32,580 --> 00:03:34,560
um short disclaimer I'm not the original

79
00:03:34,560 --> 00:03:38,459
author of the Mirena and necro buzzer it

80
00:03:38,459 --> 00:03:40,620
has been done by two malfators which is

81
00:03:40,620 --> 00:03:43,340
a Michele uru and Giuseppe Trotta

82
00:03:43,340 --> 00:03:46,560
they're already present the proxy that

83
00:03:46,560 --> 00:03:48,720
we that are using that we use for this

84
00:03:48,720 --> 00:03:52,319
kind of things and today I will really

85
00:03:52,319 --> 00:03:54,019
focus on the the

86
00:03:54,019 --> 00:03:56,819
necroposure but the automation behind

87
00:03:56,819 --> 00:03:58,920
the proxy if you want to get more

88
00:03:58,920 --> 00:04:02,819
details on the uh on the proxy there is

89
00:04:02,819 --> 00:04:04,980
a YouTube link there where they present

90
00:04:04,980 --> 00:04:08,159
all the proxy works or we can bypass MFA

91
00:04:08,159 --> 00:04:10,860
and so on so strongly advise you to to

92
00:04:10,860 --> 00:04:13,739
watch this video and on my side yes I

93
00:04:13,739 --> 00:04:15,599
get involved in this project for since

94
00:04:15,599 --> 00:04:17,220
2019

95
00:04:17,220 --> 00:04:19,380
I wrote a couple of documentation and I

96
00:04:19,380 --> 00:04:21,839
did the implementation of necro buzzer

97
00:04:21,839 --> 00:04:23,639
for Adobe brace Lambda function that I

98
00:04:23,639 --> 00:04:26,060
will present

99
00:04:26,280 --> 00:04:29,580
so what the value adds for an attacker

100
00:04:29,580 --> 00:04:31,500
when we speak or when we talk about

101
00:04:31,500 --> 00:04:33,479
phishing so fishing is still relevant in

102
00:04:33,479 --> 00:04:35,940
2022 of course

103
00:04:35,940 --> 00:04:37,979
um it's an easy way to to steal

104
00:04:37,979 --> 00:04:40,680
credential of course we we just need to

105
00:04:40,680 --> 00:04:42,419
get this credential and replace this

106
00:04:42,419 --> 00:04:45,300
credentialing sometimes or if you have

107
00:04:45,300 --> 00:04:48,840
the MFA you have to get more deeper but

108
00:04:48,840 --> 00:04:51,300
the problem you can bypass also MFA it

109
00:04:51,300 --> 00:04:53,040
has been introduced several times with a

110
00:04:53,040 --> 00:04:56,639
evil ngx or Mirena we can do that so

111
00:04:56,639 --> 00:04:58,680
depending all MFA has been implemented

112
00:04:58,680 --> 00:05:00,960
you can get a you can get a wetwood to

113
00:05:00,960 --> 00:05:05,638
bypass this MFA restriction

114
00:05:05,940 --> 00:05:08,820
um also we all we can use phishing for

115
00:05:08,820 --> 00:05:12,000
uh persistence so the easy way is to add

116
00:05:12,000 --> 00:05:13,440
an attachment when you send your email

117
00:05:13,440 --> 00:05:15,660
and you have this wrapper and they

118
00:05:15,660 --> 00:05:19,259
installed malicious uh binary and you

119
00:05:19,259 --> 00:05:21,120
get a persistent or remote access on

120
00:05:21,120 --> 00:05:23,580
this laptop but with the SAS server you

121
00:05:23,580 --> 00:05:25,380
can also do that you can I will

122
00:05:25,380 --> 00:05:28,020
introduce you a way to backdoor GitHub

123
00:05:28,020 --> 00:05:29,940
account and how we can optimize that and

124
00:05:29,940 --> 00:05:31,500
how we can get persistent with this

125
00:05:31,500 --> 00:05:33,380
GitHub access

126
00:05:33,380 --> 00:05:37,680
you can also do a data exploration as I

127
00:05:37,680 --> 00:05:39,840
said with the SAS people does not

128
00:05:39,840 --> 00:05:42,300
necessarily use on-premise file server

129
00:05:42,300 --> 00:05:47,160
they use a file sharing on on G Drive

130
00:05:47,160 --> 00:05:50,520
Dropbox box whatever so if you fish this

131
00:05:50,520 --> 00:05:53,820
kind of platform you can optimize your

132
00:05:53,820 --> 00:05:55,740
data acceleration you can optimize all

133
00:05:55,740 --> 00:05:58,440
you can export all this data in in

134
00:05:58,440 --> 00:06:00,720
really few minutes

135
00:06:00,720 --> 00:06:02,039
you can do the same with the code

136
00:06:02,039 --> 00:06:04,199
repository if you target GitHub gitlab

137
00:06:04,199 --> 00:06:07,380
all this uh code repository you can

138
00:06:07,380 --> 00:06:09,720
automize to clone all the repo and and

139
00:06:09,720 --> 00:06:12,860
do much more

140
00:06:13,020 --> 00:06:15,120
of course we have the issue for the

141
00:06:15,120 --> 00:06:17,280
phishing uh when you you have the

142
00:06:17,280 --> 00:06:19,199
mindset for an attacker

143
00:06:19,199 --> 00:06:20,039
um

144
00:06:20,039 --> 00:06:22,259
nowadays there is plenty of detection

145
00:06:22,259 --> 00:06:25,259
related to uh about phishing

146
00:06:25,259 --> 00:06:26,100
um

147
00:06:26,100 --> 00:06:28,979
users are at least for some of them

148
00:06:28,979 --> 00:06:32,400
enough aware and Report easily fishing

149
00:06:32,400 --> 00:06:35,580
and if you do a Mass fishing you can get

150
00:06:35,580 --> 00:06:37,860
really detected quickly and they can try

151
00:06:37,860 --> 00:06:40,800
to lock your domain and so on

152
00:06:40,800 --> 00:06:42,319
a password password

153
00:06:42,319 --> 00:06:44,940
it should be like underwear I hope so we

154
00:06:44,940 --> 00:06:46,740
have this comment at the beginning of

155
00:06:46,740 --> 00:06:48,479
the conference where we have to watch

156
00:06:48,479 --> 00:06:51,900
everyday brush or two sensor on so we

157
00:06:51,900 --> 00:06:54,300
also need to to change the underwear

158
00:06:54,300 --> 00:06:56,580
frequently as a password but in the fact

159
00:06:56,580 --> 00:06:59,039
I'm not sure if all people do that

160
00:06:59,039 --> 00:07:00,720
unfortunately

161
00:07:00,720 --> 00:07:03,660
and we have also this issue with the

162
00:07:03,660 --> 00:07:05,880
multi-factor so depending of which kind

163
00:07:05,880 --> 00:07:07,979
of multi-factor you you use

164
00:07:07,979 --> 00:07:11,400
um yeah uh it's it does not allow you to

165
00:07:11,400 --> 00:07:14,759
to make a password spring with an MFS or

166
00:07:14,759 --> 00:07:17,780
you can get limited over that parts

167
00:07:17,780 --> 00:07:21,240
and there is a really an effective MFA

168
00:07:21,240 --> 00:07:24,300
today it's a u2f or web odd so with a

169
00:07:24,300 --> 00:07:27,060
physical token and with this kind of

170
00:07:27,060 --> 00:07:28,680
access this kind of protection

171
00:07:28,680 --> 00:07:31,080
implemented yeah it it can block you for

172
00:07:31,080 --> 00:07:33,360
your phishing abdent

173
00:07:33,360 --> 00:07:35,460
as a last of not least it's when you

174
00:07:35,460 --> 00:07:37,919
make some automation after your phishing

175
00:07:37,919 --> 00:07:41,400
campaign you never know how much success

176
00:07:41,400 --> 00:07:43,020
you will get with this phishing campaign

177
00:07:43,020 --> 00:07:44,940
so the primary if you don't configure

178
00:07:44,940 --> 00:07:47,160
properly your infrastructure your right

179
00:07:47,160 --> 00:07:48,900
team infrastructure you can screw

180
00:07:48,900 --> 00:07:50,819
yourself that's happening on my side and

181
00:07:50,819 --> 00:07:52,740
that's why I start to thinking to make

182
00:07:52,740 --> 00:07:55,020
something different

183
00:07:55,020 --> 00:07:57,599
so all these points introduce the work

184
00:07:57,599 --> 00:08:00,479
Factor so the work factor is an estimate

185
00:08:00,479 --> 00:08:02,819
of effort or time need by a potential

186
00:08:02,819 --> 00:08:05,460
adversary with a specific expertise and

187
00:08:05,460 --> 00:08:07,500
resource to overcome protective measure

188
00:08:07,500 --> 00:08:09,539
so it means that

189
00:08:09,539 --> 00:08:12,060
all these protection that is in place

190
00:08:12,060 --> 00:08:15,120
make the hard life for attacker but all

191
00:08:15,120 --> 00:08:17,460
we can maximize that as an attacker

192
00:08:17,460 --> 00:08:21,120
perspective to overcome this measure

193
00:08:21,120 --> 00:08:24,840
so if I think back to the slide we say

194
00:08:24,840 --> 00:08:28,440
that we can get easily detected but okay

195
00:08:28,440 --> 00:08:30,720
we can get detected but how long it took

196
00:08:30,720 --> 00:08:33,899
for a Security operation to block our

197
00:08:33,899 --> 00:08:36,559
domain how long it's took to to really

198
00:08:36,559 --> 00:08:39,479
stop the string of this phishing

199
00:08:39,479 --> 00:08:40,740
campaign

200
00:08:40,740 --> 00:08:43,320
if you optimize everything in less than

201
00:08:43,320 --> 00:08:45,480
one minute 42 seconds we get everything

202
00:08:45,480 --> 00:08:47,339
that we want it's

203
00:08:47,339 --> 00:08:49,200
too late for them we already get the

204
00:08:49,200 --> 00:08:51,660
data that we're looking for

205
00:08:51,660 --> 00:08:54,839
about the password and password in 2022

206
00:08:54,839 --> 00:08:57,180
is it something we really need to rely

207
00:08:57,180 --> 00:08:59,700
only on password I have not because we

208
00:08:59,700 --> 00:09:03,000
use MFA but if I just get one session

209
00:09:03,000 --> 00:09:05,279
one cookie maybe it's enough for me to

210
00:09:05,279 --> 00:09:09,320
replace that and and do much more

211
00:09:09,320 --> 00:09:14,820
Factor okay we can we can just bypass

212
00:09:14,820 --> 00:09:17,459
MFA time two times and if we target an

213
00:09:17,459 --> 00:09:20,339
SSO portal so MFA is just require wines

214
00:09:20,339 --> 00:09:23,580
so when you get log in size or SSO But

215
00:09:23,580 --> 00:09:25,140
after when you click on all other

216
00:09:25,140 --> 00:09:27,600
application so this is the MFA is not

217
00:09:27,600 --> 00:09:30,260
required anymore

218
00:09:30,420 --> 00:09:33,120
and the last part that where I start to

219
00:09:33,120 --> 00:09:35,459
work on this project it's um serverless

220
00:09:35,459 --> 00:09:39,240
so I do some phishing campaign it was uh

221
00:09:39,240 --> 00:09:42,240
too much success fully for for me and I

222
00:09:42,240 --> 00:09:43,860
brought my entire infrastructure because

223
00:09:43,860 --> 00:09:47,519
I spin up so much instances and I don't

224
00:09:47,519 --> 00:09:49,740
have enough resources to under that so

225
00:09:49,740 --> 00:09:52,019
that's why I start to look about

226
00:09:52,019 --> 00:09:55,080
serverless compute compute node and how

227
00:09:55,080 --> 00:09:57,120
I can scale easily with the serverless

228
00:09:57,120 --> 00:09:59,399
things

229
00:09:59,399 --> 00:10:02,760
so the main ID based on the phishing and

230
00:10:02,760 --> 00:10:06,480
automation it's look like this design so

231
00:10:06,480 --> 00:10:09,420
let's say you target your your victim

232
00:10:09,420 --> 00:10:11,100
it's target.com

233
00:10:11,100 --> 00:10:13,380
so you ask to your victim to go to

234
00:10:13,380 --> 00:10:16,500
target.com and in the middle you have

235
00:10:16,500 --> 00:10:21,180
your proxy which is Mirena and you

236
00:10:21,180 --> 00:10:23,600
mimics the the domain and you use

237
00:10:23,600 --> 00:10:26,480
target.io for example that's up to you

238
00:10:26,480 --> 00:10:29,040
open your imagination to to make

239
00:10:29,040 --> 00:10:30,959
something close to the to the domain

240
00:10:30,959 --> 00:10:33,360
that you want to Target and all the

241
00:10:33,360 --> 00:10:35,640
traffics between the browser and the

242
00:10:35,640 --> 00:10:38,640
real target.com go to this proxy so you

243
00:10:38,640 --> 00:10:42,180
can grab the login you can forward all

244
00:10:42,180 --> 00:10:44,040
the two-factor authentication so let's

245
00:10:44,040 --> 00:10:47,040
say they use a tootp or push

246
00:10:47,040 --> 00:10:49,380
notification you can realize that there

247
00:10:49,380 --> 00:10:51,480
is no issue and when the session is

248
00:10:51,480 --> 00:10:54,899
opt-in Mirena just forward all these

249
00:10:54,899 --> 00:10:57,600
information login so credential login

250
00:10:57,600 --> 00:10:59,880
and password in clear text the the

251
00:10:59,880 --> 00:11:02,760
cookie to network browser and then necro

252
00:11:02,760 --> 00:11:05,399
browser can spin up some other instances

253
00:11:05,399 --> 00:11:08,100
other browser and optimize what you have

254
00:11:08,100 --> 00:11:10,200
to do

255
00:11:10,200 --> 00:11:12,839
so necro buzzer initially when we start

256
00:11:12,839 --> 00:11:16,500
to work with in 2018 on this topic it

257
00:11:16,500 --> 00:11:19,260
was uh based on uh ongoing written in go

258
00:11:19,260 --> 00:11:22,380
and we use a CDP library to interface

259
00:11:22,380 --> 00:11:24,240
with the Chrome

260
00:11:24,240 --> 00:11:28,260
we moved to CDP to perpeteer which is a

261
00:11:28,260 --> 00:11:31,339
node.js implementation so we instrument

262
00:11:31,339 --> 00:11:35,459
Chrome or Firefox in idles or in GUI

263
00:11:35,459 --> 00:11:38,220
mode up to you to do that there is some

264
00:11:38,220 --> 00:11:40,620
limitations of for example for Chrome if

265
00:11:40,620 --> 00:11:42,180
you want to add some plugin inside

266
00:11:42,180 --> 00:11:45,180
Chrome you have to use the QE mode so

267
00:11:45,180 --> 00:11:47,279
the not the endless one

268
00:11:47,279 --> 00:11:50,519
and um based on that we we are able to

269
00:11:50,519 --> 00:11:53,339
get more um efficient with a with

270
00:11:53,339 --> 00:11:54,959
Puppeteer because it's really useful you

271
00:11:54,959 --> 00:11:57,120
can really interact with a browser so

272
00:11:57,120 --> 00:11:59,339
it's really nice to instrument a browser

273
00:11:59,339 --> 00:12:02,640
it's fully used for uh people that make

274
00:12:02,640 --> 00:12:05,240
qualif qualify uh where the the

275
00:12:05,240 --> 00:12:07,740
qualifies as a product and and make

276
00:12:07,740 --> 00:12:10,800
tests or regression tests they use

277
00:12:10,800 --> 00:12:12,959
Puppeteer once they do that

278
00:12:12,959 --> 00:12:16,500
on my side um I just um so necro buzzer

279
00:12:16,500 --> 00:12:19,200
can initially be configured on

280
00:12:19,200 --> 00:12:22,019
on-premise or in an ec2 instance or in

281
00:12:22,019 --> 00:12:24,779
Cloud providers what I did on my side I

282
00:12:24,779 --> 00:12:27,360
just move away from compute node I want

283
00:12:27,360 --> 00:12:30,240
to really go away to infrastructures and

284
00:12:30,240 --> 00:12:34,920
I go to serverless so I use AWS function

285
00:12:34,920 --> 00:12:36,899
to do that I'm still relying on

286
00:12:36,899 --> 00:12:39,899
Puppeteer and

287
00:12:39,899 --> 00:12:42,060
in order to change some attacks in some

288
00:12:42,060 --> 00:12:45,420
step I can use step function or not it's

289
00:12:45,420 --> 00:12:48,000
up to you and to store all the proof of

290
00:12:48,000 --> 00:12:50,339
my campaign when I screenshot some

291
00:12:50,339 --> 00:12:53,160
access when I extract some data I store

292
00:12:53,160 --> 00:12:55,980
all of them in the S3 bucket

293
00:12:55,980 --> 00:12:58,500
the advantage for me to to use adobe's

294
00:12:58,500 --> 00:13:00,959
Lambda function was it's easy to scale

295
00:13:00,959 --> 00:13:03,120
as I said I just get a one endpoint and

296
00:13:03,120 --> 00:13:05,700
everything is in terms of infrastructure

297
00:13:05,700 --> 00:13:08,519
it's managed by AWS it's cost effective

298
00:13:08,519 --> 00:13:12,839
so at the end I don't pay much on on

299
00:13:12,839 --> 00:13:15,060
this adobe's Lambda function so this

300
00:13:15,060 --> 00:13:17,220
lambdaq can stay there and I only pay

301
00:13:17,220 --> 00:13:19,860
when I get to a real session and real

302
00:13:19,860 --> 00:13:21,920
things that has been really

303
00:13:21,920 --> 00:13:25,440
get pawn and yeah as they call my Lambda

304
00:13:25,440 --> 00:13:26,579
function

305
00:13:26,579 --> 00:13:29,760
and something was also interesting um

306
00:13:29,760 --> 00:13:32,100
when you you do fishing time to times

307
00:13:32,100 --> 00:13:36,060
you have to avoid geolocation so with

308
00:13:36,060 --> 00:13:37,980
the Lambda function you can also specify

309
00:13:37,980 --> 00:13:40,800
which country you want to deploy your

310
00:13:40,800 --> 00:13:43,139
Lambda function so if you target a U.S

311
00:13:43,139 --> 00:13:44,880
company you would like to deploy your

312
00:13:44,880 --> 00:13:46,920
Lambda function in us if you target some

313
00:13:46,920 --> 00:13:49,320
Azure you won't like to use something

314
00:13:49,320 --> 00:13:51,839
based in Azure so that's why also it's

315
00:13:51,839 --> 00:13:55,399
quite interesting to use Lambda function

316
00:13:56,220 --> 00:13:59,760
so now between the Mirena which is a

317
00:13:59,760 --> 00:14:02,779
proxy and a puppeteer which is the the

318
00:14:02,779 --> 00:14:06,420
instrumentation we have to specify some

319
00:14:06,420 --> 00:14:08,700
we have to to make some config file to

320
00:14:08,700 --> 00:14:11,459
allow them to talk between them so what

321
00:14:11,459 --> 00:14:14,540
we just need to do is to specify the

322
00:14:14,540 --> 00:14:18,240
AWS Lambda function endpoint so the URL

323
00:14:18,240 --> 00:14:20,639
of this endpoint and we also specify

324
00:14:20,639 --> 00:14:23,100
which profile we want to use so we can

325
00:14:23,100 --> 00:14:26,639
really customize our data we want to

326
00:14:26,639 --> 00:14:28,800
share to network browser so I just share

327
00:14:28,800 --> 00:14:30,839
one of them for GitHub there we'll do

328
00:14:30,839 --> 00:14:33,300
the demo letter and you say okay I would

329
00:14:33,300 --> 00:14:36,180
like to instrument GitHub that passes

330
00:14:36,180 --> 00:14:37,680
the keyword that I would like to look

331
00:14:37,680 --> 00:14:40,320
inside the repo so I look for

332
00:14:40,320 --> 00:14:42,779
certificate VPN credentials something

333
00:14:42,779 --> 00:14:44,639
like that inside some repo it should be

334
00:14:44,639 --> 00:14:46,800
whatever you can use token API you can

335
00:14:46,800 --> 00:14:50,100
use a lot of things I add an SSH key

336
00:14:50,100 --> 00:14:52,380
because the purpose of My Demo will be

337
00:14:52,380 --> 00:14:55,019
to show you how I can add myself an SSH

338
00:14:55,019 --> 00:14:57,959
key to backdoor this account and then if

339
00:14:57,959 --> 00:14:59,760
they rotate the password I'm still have

340
00:14:59,760 --> 00:15:01,920
this SSH key which allow me to continue

341
00:15:01,920 --> 00:15:04,139
to pull the Repository

342
00:15:04,139 --> 00:15:06,120
then you share the cookie of course

343
00:15:06,120 --> 00:15:07,800
because you have to rely on this cookie

344
00:15:07,800 --> 00:15:10,880
to get authenticated on GitHub

345
00:15:10,880 --> 00:15:15,000
one advice if you play with Mirena be

346
00:15:15,000 --> 00:15:17,459
sure that your Jason the syntax that you

347
00:15:17,459 --> 00:15:19,680
use for your digital is properly set

348
00:15:19,680 --> 00:15:23,579
with uh because if if you miss that you

349
00:15:23,579 --> 00:15:25,560
can get some weird error and a little

350
00:15:25,560 --> 00:15:28,320
bit out to debug so just be sure you you

351
00:15:28,320 --> 00:15:32,060
get a popular Syntax for your season

352
00:15:32,480 --> 00:15:35,459
what it looks like when you instrument a

353
00:15:35,459 --> 00:15:38,519
puppeteer so is that just a good snippet

354
00:15:38,519 --> 00:15:42,180
that from from GitHub instrumentation so

355
00:15:42,180 --> 00:15:44,279
first of all you have to add some

356
00:15:44,279 --> 00:15:46,500
modules so I provide a module to to make

357
00:15:46,500 --> 00:15:48,540
some simple screenshots so each time I

358
00:15:48,540 --> 00:15:51,180
get an access I screenshot my access so

359
00:15:51,180 --> 00:15:53,279
I call this module

360
00:15:53,279 --> 00:15:56,399
the second point it's a common AWS so

361
00:15:56,399 --> 00:15:59,100
it's only available so it's it's a

362
00:15:59,100 --> 00:16:01,500
package that you can download and you

363
00:16:01,500 --> 00:16:05,160
can deploy on other breaths

364
00:16:05,160 --> 00:16:07,440
when you you got that configured you

365
00:16:07,440 --> 00:16:11,160
specify which how you you want to open a

366
00:16:11,160 --> 00:16:13,199
browser how you set your cookies that

367
00:16:13,199 --> 00:16:15,180
you stole previously with Mirena so you

368
00:16:15,180 --> 00:16:16,980
load this cookie to this property

369
00:16:16,980 --> 00:16:18,920
instance

370
00:16:18,920 --> 00:16:21,600
I'm sorry I'm smarting we have to pass

371
00:16:21,600 --> 00:16:24,620
your presentation for our traditional

372
00:16:24,620 --> 00:16:27,740
hardcore drink

373
00:16:27,740 --> 00:16:31,100
okay everyone

374
00:16:31,139 --> 00:16:35,160
all right all the way down

375
00:16:35,160 --> 00:16:39,360
I really love your uh

376
00:16:39,360 --> 00:16:41,339
uh not the presentation yes

377
00:16:41,339 --> 00:16:44,519
your what do you call that

378
00:16:44,519 --> 00:16:46,199
no

379
00:16:46,199 --> 00:16:49,758
how he talks what's the term

380
00:16:50,180 --> 00:16:55,139
yeah yeah so so uh can you read this for

381
00:16:55,139 --> 00:16:55,980
us

382
00:16:55,980 --> 00:16:58,680
it's an announcement for our uh activity

383
00:16:58,680 --> 00:17:00,839
in one of our active Villages of course

384
00:17:00,839 --> 00:17:03,779
okay so what this is what we have uh

385
00:17:03,779 --> 00:17:06,540
going on there and by these speakers

386
00:17:06,540 --> 00:17:08,579
so right now you have the malware

387
00:17:08,579 --> 00:17:11,520
analyze 101 awesome one

388
00:17:11,520 --> 00:17:13,319
this one performed with the awesome

389
00:17:13,319 --> 00:17:16,639
people like Louisiana

390
00:17:17,640 --> 00:17:21,900
and then is Lego so two sure uh awesome

391
00:17:21,900 --> 00:17:23,760
ladies that will teach you how you

392
00:17:23,760 --> 00:17:26,040
analyze malware so feel free to go there

393
00:17:26,040 --> 00:17:28,679
and get fun there thank you very much

394
00:17:28,679 --> 00:17:30,200
very good

395
00:17:30,200 --> 00:17:32,340
snorky everyone thank you thank you so

396
00:17:32,340 --> 00:17:34,520
much

397
00:17:34,740 --> 00:17:36,120
so

398
00:17:36,120 --> 00:17:40,559
um back to the presentation uh with some

399
00:17:40,559 --> 00:17:42,900
more difficulties with this kind of

400
00:17:42,900 --> 00:17:45,360
whiskey but should be good

401
00:17:45,360 --> 00:17:45,900
um

402
00:17:45,900 --> 00:17:48,539
so yeah what I said you have to set up

403
00:17:48,539 --> 00:17:50,820
the cookie that you stole with a Mirena

404
00:17:50,820 --> 00:17:53,160
to this paper instance Puppeteer

405
00:17:53,160 --> 00:17:55,020
instance you specify that you want to go

406
00:17:55,020 --> 00:17:58,559
to redirect to github.com login then

407
00:17:58,559 --> 00:18:01,980
when you go there you go to SSH settings

408
00:18:01,980 --> 00:18:05,400
and you can add your tricks a click so

409
00:18:05,400 --> 00:18:07,980
you click on a add key and then you

410
00:18:07,980 --> 00:18:10,380
click on where you can add your SSH key

411
00:18:10,380 --> 00:18:13,380
and you put this SSH key and yeah your

412
00:18:13,380 --> 00:18:16,200
back door easily GitHub account like

413
00:18:16,200 --> 00:18:17,760
that

414
00:18:17,760 --> 00:18:22,020
so that's what it looked like

415
00:18:22,020 --> 00:18:25,980
you send a phishing email to someone you

416
00:18:25,980 --> 00:18:28,080
say okay you have to go to GitHub it

417
00:18:28,080 --> 00:18:30,080
will be a redirected to github.fec

418
00:18:30,080 --> 00:18:32,280
github.fake redirect into the real

419
00:18:32,280 --> 00:18:35,340
github.com is specifies credential

420
00:18:35,340 --> 00:18:37,200
you'll get the screenshot in clear text

421
00:18:37,200 --> 00:18:39,179
and the cookie you forward all the stuff

422
00:18:39,179 --> 00:18:40,860
to Neco Brothers in the Lambda function

423
00:18:40,860 --> 00:18:44,039
this network function say oh got it I

424
00:18:44,039 --> 00:18:46,440
get that it's for GitHub I spin up a

425
00:18:46,440 --> 00:18:49,140
puppeteer instance in Lambda I open

426
00:18:49,140 --> 00:18:51,539
GitHub with this um

427
00:18:51,539 --> 00:18:55,799
credential go to the to the SSH key add

428
00:18:55,799 --> 00:18:57,840
this SSH key make a screenshot store

429
00:18:57,840 --> 00:18:59,520
this screenshot in this bucket and

430
00:18:59,520 --> 00:19:01,200
that's all

431
00:19:01,200 --> 00:19:02,460
so

432
00:19:02,460 --> 00:19:05,160
too much of said let's try to make a

433
00:19:05,160 --> 00:19:06,419
demo

434
00:19:06,419 --> 00:19:08,940
by the way the tool it's already open

435
00:19:08,940 --> 00:19:11,039
source so feel free to go there and play

436
00:19:11,039 --> 00:19:12,200
with that

437
00:19:12,200 --> 00:19:15,720
I provide some templates so there is

438
00:19:15,720 --> 00:19:18,120
already a lot of templates to to play

439
00:19:18,120 --> 00:19:19,980
with GitHub and so on there is also some

440
00:19:19,980 --> 00:19:22,440
skeleton where you can automize what you

441
00:19:22,440 --> 00:19:24,240
want to do

442
00:19:24,240 --> 00:19:27,360
um so SSO one uh it's sleeve has a pure

443
00:19:27,360 --> 00:19:28,260
pose

444
00:19:28,260 --> 00:19:30,660
um and also I just need to to share that

445
00:19:30,660 --> 00:19:31,860
part

446
00:19:31,860 --> 00:19:34,200
you can see that there is a lot of uh is

447
00:19:34,200 --> 00:19:36,000
the last Bridge people complain because

448
00:19:36,000 --> 00:19:38,400
they get fish and we have e-crime

449
00:19:38,400 --> 00:19:41,520
Services where people can rent a fishing

450
00:19:41,520 --> 00:19:44,400
campaign from this a crime so we don't

451
00:19:44,400 --> 00:19:46,260
want necessarily to help this ecrime

452
00:19:46,260 --> 00:19:48,840
organization to make bad stuff and make

453
00:19:48,840 --> 00:19:50,760
money all about that so everything is

454
00:19:50,760 --> 00:19:52,919
there I will show you in details how you

455
00:19:52,919 --> 00:19:54,780
can do that feel free to reach out to me

456
00:19:54,780 --> 00:19:56,820
but for sure will not necessarily share

457
00:19:56,820 --> 00:20:00,120
all the payload uh privately

458
00:20:00,120 --> 00:20:03,199
so back to

459
00:20:10,980 --> 00:20:13,580
okay

460
00:20:19,440 --> 00:20:23,480
let me open the search connection

461
00:20:30,120 --> 00:20:32,700
okay I'm good

462
00:20:32,700 --> 00:20:35,400
so first of all as I say all the the

463
00:20:35,400 --> 00:20:37,380
code it's already public so you can go

464
00:20:37,380 --> 00:20:39,419
there and you can play it I I will add

465
00:20:39,419 --> 00:20:41,520
some content that I share today but most

466
00:20:41,520 --> 00:20:44,340
of them it's already there

467
00:20:44,340 --> 00:20:46,919
now let me show you so

468
00:20:46,919 --> 00:20:49,080
let's say I Target these guys

469
00:20:49,080 --> 00:20:53,780
um it's a SNK Dash test

470
00:20:54,240 --> 00:20:57,020
put his password

471
00:21:09,299 --> 00:21:11,760
so get connected on GitHub it already is

472
00:21:11,760 --> 00:21:13,620
everything there

473
00:21:13,620 --> 00:21:15,539
if you go to is the setting of these

474
00:21:15,539 --> 00:21:17,660
guys

475
00:21:18,960 --> 00:21:22,380
and go to the SSH key for example

476
00:21:22,380 --> 00:21:24,120
you see there is no SSH keys there is

477
00:21:24,120 --> 00:21:26,940
nothing all fine good

478
00:21:26,940 --> 00:21:28,500
now

479
00:21:28,500 --> 00:21:31,400
um I will run

480
00:21:32,760 --> 00:21:37,140
the the marina so the proxy

481
00:21:37,140 --> 00:21:40,260
so the proxy says that I use a pun with

482
00:21:40,260 --> 00:21:43,020
me domain and all these kind of things

483
00:21:43,020 --> 00:21:46,320
will be redirected to github.com

484
00:21:46,320 --> 00:21:48,360
I skipped the fact that I send an email

485
00:21:48,360 --> 00:21:50,760
to him whatever you do what or with the

486
00:21:50,760 --> 00:21:53,100
Discord or whatever you can do a lot of

487
00:21:53,100 --> 00:21:55,559
things to to mimic that and at the end

488
00:21:55,559 --> 00:21:59,780
these guys go to your domain

489
00:22:01,620 --> 00:22:04,620
and when you go to your domain

490
00:22:04,620 --> 00:22:07,860
it should be able to reach github.com so

491
00:22:07,860 --> 00:22:10,260
you can see there is no uh alert

492
00:22:10,260 --> 00:22:13,320
everything was uh look like GitHub

493
00:22:13,320 --> 00:22:14,940
because it's real GitHub we just

494
00:22:14,940 --> 00:22:17,700
proxifies the traffic to GitHub

495
00:22:17,700 --> 00:22:21,240
and these guys start to uh singing so

496
00:22:21,240 --> 00:22:25,080
now if I back to the the Mirena you see

497
00:22:25,080 --> 00:22:27,360
that here I assign an ID to these guys

498
00:22:27,360 --> 00:22:29,340
because it's a one session

499
00:22:29,340 --> 00:22:33,000
so I can twice each session

500
00:22:33,000 --> 00:22:37,500
and from the the fishing website I put

501
00:22:37,500 --> 00:22:40,340
the same credential

502
00:22:45,720 --> 00:22:49,340
and I'm logging

503
00:22:50,880 --> 00:22:54,840
so I am logged to GitHub everything it's

504
00:22:54,840 --> 00:22:56,340
exactly the same because as I say we

505
00:22:56,340 --> 00:22:58,140
just proxify things it's totally

506
00:22:58,140 --> 00:23:00,600
transparent for the for the victim but

507
00:23:00,600 --> 00:23:04,080
if I'm back there on my own necro buzzer

508
00:23:04,080 --> 00:23:05,580
instances

509
00:23:05,580 --> 00:23:08,520
you can see that I get in clear text the

510
00:23:08,520 --> 00:23:11,280
credential of these guys because yeah

511
00:23:11,280 --> 00:23:14,280
I processify the traffic so I realize is

512
00:23:14,280 --> 00:23:17,340
data to the real github.com

513
00:23:17,340 --> 00:23:20,280
and what you can see also

514
00:23:20,280 --> 00:23:23,360
somewhere else

515
00:23:26,120 --> 00:23:28,140
yeah there

516
00:23:28,140 --> 00:23:31,080
you see that the Mirena gets a full

517
00:23:31,080 --> 00:23:32,960
session so I get a cookie get everything

518
00:23:32,960 --> 00:23:36,320
so we we send

519
00:23:36,320 --> 00:23:39,120
this information to the to the necro

520
00:23:39,120 --> 00:23:42,780
browser to instruments uh behind this

521
00:23:42,780 --> 00:23:44,520
session

522
00:23:44,520 --> 00:23:47,820
so now I will go to my Lambda function

523
00:23:47,820 --> 00:23:51,080
on AWS

524
00:23:51,179 --> 00:23:54,320
I will check the log

525
00:23:55,799 --> 00:23:58,799
so I get a new log session there

526
00:23:58,799 --> 00:24:01,500
and they say oh you get a session and it

527
00:24:01,500 --> 00:24:03,840
seems that you get a result so I have a

528
00:24:03,840 --> 00:24:07,699
screenshot that written there

529
00:24:17,760 --> 00:24:20,960
so I don't know the result

530
00:24:22,440 --> 00:24:24,540
and if I look the result

531
00:24:24,540 --> 00:24:27,639
[Music]

532
00:24:29,100 --> 00:24:32,418
it should be not like that

533
00:24:32,820 --> 00:24:36,720
okay interesting let me so the result

534
00:24:36,720 --> 00:24:38,880
should be a real screenshot with a SSH

535
00:24:38,880 --> 00:24:41,280
key uh something going wrong let me

536
00:24:41,280 --> 00:24:44,059
check that quickly

537
00:24:50,760 --> 00:24:52,799
so here you see I just followed the page

538
00:24:52,799 --> 00:24:55,799
and the ssk has been added the 10420 I

539
00:24:55,799 --> 00:24:57,179
don't know why the screenshot does not

540
00:24:57,179 --> 00:25:00,600
working but at least we get the SSH keys

541
00:25:00,600 --> 00:25:02,580
that has been added automatically behind

542
00:25:02,580 --> 00:25:05,700
what I uh what I got so yeah it's where

543
00:25:05,700 --> 00:25:07,020
I don't know why I don't get the

544
00:25:07,020 --> 00:25:08,760
screenshot but usually I have the proper

545
00:25:08,760 --> 00:25:12,059
screenshot maybe it was a too fast so

546
00:25:12,059 --> 00:25:14,520
that an example of how you can use

547
00:25:14,520 --> 00:25:17,760
phishing to optimize a lot of things and

548
00:25:17,760 --> 00:25:21,480
extract data backdoor do whatever you

549
00:25:21,480 --> 00:25:25,020
want with the fishing just not uh think

550
00:25:25,020 --> 00:25:27,360
about stalling credential but just

551
00:25:27,360 --> 00:25:29,159
thinking what you can do after this

552
00:25:29,159 --> 00:25:32,100
credential has been stolen

553
00:25:32,100 --> 00:25:36,080
so back to the presentation now

554
00:25:39,600 --> 00:25:41,820
consider that you now instead to have

555
00:25:41,820 --> 00:25:43,380
this you see the pictures with the

556
00:25:43,380 --> 00:25:45,120
guitar but consider how it can be

557
00:25:45,120 --> 00:25:46,700
powerful if you

558
00:25:46,700 --> 00:25:49,559
exploit an SSO portal from the SSO

559
00:25:49,559 --> 00:25:52,020
portal you can get a

560
00:25:52,020 --> 00:25:54,360
plugin one OCTA all these kind of

561
00:25:54,360 --> 00:25:56,820
providers and they give you access to

562
00:25:56,820 --> 00:26:00,000
plenty of interesting targets so behind

563
00:26:00,000 --> 00:26:02,059
the SSO you can get

564
00:26:02,059 --> 00:26:06,659
jira Confluence GitHub some email plenty

565
00:26:06,659 --> 00:26:08,240
of good stuff so

566
00:26:08,240 --> 00:26:11,220
you can just share all this kind of

567
00:26:11,220 --> 00:26:14,000
activity and be able to really

568
00:26:14,000 --> 00:26:17,940
exploit one entry Pond and then get for

569
00:26:17,940 --> 00:26:20,700
each of them and compromise each of uh

570
00:26:20,700 --> 00:26:22,799
things that you can reach over the SSO

571
00:26:22,799 --> 00:26:25,140
portal so for example on OCTA you have a

572
00:26:25,140 --> 00:26:27,200
list of all these

573
00:26:27,200 --> 00:26:29,000
applications

574
00:26:29,000 --> 00:26:35,460
you can easily extract this list with a

575
00:26:35,460 --> 00:26:38,159
a national query or a document get

576
00:26:38,159 --> 00:26:41,100
element query and you can get this list

577
00:26:41,100 --> 00:26:44,279
of of application and based on that you

578
00:26:44,279 --> 00:26:47,700
can start to optimize things so let me

579
00:26:47,700 --> 00:26:49,440
go back

580
00:26:49,440 --> 00:26:52,220
to the Shell

581
00:27:01,020 --> 00:27:02,159
so

582
00:27:02,159 --> 00:27:04,940
just increase a little bit so as I said

583
00:27:04,940 --> 00:27:08,580
you call for the screenshot you you get

584
00:27:08,580 --> 00:27:10,799
the Lambda function

585
00:27:10,799 --> 00:27:13,340
uh you set up your

586
00:27:13,340 --> 00:27:16,020
environment so you you put the cookie

587
00:27:16,020 --> 00:27:18,539
username and so on you say okay let's

588
00:27:18,539 --> 00:27:20,340
open a nocta

589
00:27:20,340 --> 00:27:22,860
and then you say okay let's go and and

590
00:27:22,860 --> 00:27:26,100
grab all the information that I need to

591
00:27:26,100 --> 00:27:26,760
um

592
00:27:26,760 --> 00:27:28,980
all the applications that I can reach

593
00:27:28,980 --> 00:27:31,860
from this user for the OCTA session

594
00:27:31,860 --> 00:27:33,720
then from here you fetch all the

595
00:27:33,720 --> 00:27:35,700
applications that have been reachable so

596
00:27:35,700 --> 00:27:37,200
that's the screenshots that I showed to

597
00:27:37,200 --> 00:27:39,299
you previously

598
00:27:39,299 --> 00:27:41,940
and then for each of them what you can

599
00:27:41,940 --> 00:27:43,200
say I say Okay

600
00:27:43,200 --> 00:27:46,020
um in this list of applications do we

601
00:27:46,020 --> 00:27:47,820
have calendar okay if we have Canada

602
00:27:47,820 --> 00:27:51,240
open the browser click on this link open

603
00:27:51,240 --> 00:27:53,820
calendar make a screenshot let's say oh

604
00:27:53,820 --> 00:27:56,400
you have a GitHub Okay click on GitHub

605
00:27:56,400 --> 00:27:59,700
open it extract all the repo make your

606
00:27:59,700 --> 00:28:02,700
SSH backdoor do something else a token

607
00:28:02,700 --> 00:28:04,679
whatever so you can optimize all the

608
00:28:04,679 --> 00:28:06,539
steps that you want based on the list of

609
00:28:06,539 --> 00:28:09,240
all the things that you have here so

610
00:28:09,240 --> 00:28:11,400
is that the skeletons that I will share

611
00:28:11,400 --> 00:28:13,919
I will don't make necessary something

612
00:28:13,919 --> 00:28:16,200
click and ready because as I said I

613
00:28:16,200 --> 00:28:19,380
don't want to help a crime but if you

614
00:28:19,380 --> 00:28:21,179
are a red team and you want help to

615
00:28:21,179 --> 00:28:23,340
create this skeleton feel free to reach

616
00:28:23,340 --> 00:28:24,779
out to me

617
00:28:24,779 --> 00:28:27,539
um and yeah and basically at the end you

618
00:28:27,539 --> 00:28:30,559
make screenshot and so on

619
00:28:37,080 --> 00:28:39,240
so

620
00:28:39,240 --> 00:28:41,220
um what you can also do it's with the

621
00:28:41,220 --> 00:28:43,620
lumbar Lambda function I really quickly

622
00:28:43,620 --> 00:28:45,179
introduced that before but you can also

623
00:28:45,179 --> 00:28:46,940
use a step function to change that so

624
00:28:46,940 --> 00:28:50,600
instead to use uh each time

625
00:28:50,600 --> 00:28:53,700
node.js things to to instrument you can

626
00:28:53,700 --> 00:28:56,279
use step function to call your your

627
00:28:56,279 --> 00:28:58,140
Lambda between the Lambda so it's also

628
00:28:58,140 --> 00:29:00,360
some things that you can explore but

629
00:29:00,360 --> 00:29:03,120
yeah straightforward

630
00:29:03,120 --> 00:29:06,620
now I have to provide some advice to get

631
00:29:06,620 --> 00:29:08,880
effective when you make your fishing but

632
00:29:08,880 --> 00:29:10,500
also how you can limit this kind of

633
00:29:10,500 --> 00:29:11,820
attack

634
00:29:11,820 --> 00:29:14,940
so all you can get effective so

635
00:29:14,940 --> 00:29:16,440
um you have to make a proper Recon

636
00:29:16,440 --> 00:29:18,899
phases when you try to make fishing I

637
00:29:18,899 --> 00:29:20,640
mean that um

638
00:29:20,640 --> 00:29:24,000
to know if a company use a SSO portal or

639
00:29:24,000 --> 00:29:25,140
if a company

640
00:29:25,140 --> 00:29:25,740
um

641
00:29:25,740 --> 00:29:27,299
have a central point to get

642
00:29:27,299 --> 00:29:30,000
authentication what you can do is to go

643
00:29:30,000 --> 00:29:31,740
to a lot of

644
00:29:31,740 --> 00:29:35,640
uh let's say Gmail Office 360 and try to

645
00:29:35,640 --> 00:29:37,140
use a really

646
00:29:37,140 --> 00:29:40,020
um whatever rundown at the domains that

647
00:29:40,020 --> 00:29:43,200
you Target and usually if you do that it

648
00:29:43,200 --> 00:29:45,059
will be redirect you directly to the SSO

649
00:29:45,059 --> 00:29:47,039
portal that this company use so that's a

650
00:29:47,039 --> 00:29:50,159
good way to detect uh which kind of SSO

651
00:29:50,159 --> 00:29:51,860
portal you want to Target

652
00:29:51,860 --> 00:29:55,080
then feel free to you have to build a

653
00:29:55,080 --> 00:29:59,640
proper pretext to give this user say

654
00:29:59,640 --> 00:30:01,559
okay you have to be redirect to the SSO

655
00:30:01,559 --> 00:30:04,679
portal so you can link on the media

656
00:30:04,679 --> 00:30:07,039
coverage marketing Twitter press release

657
00:30:07,039 --> 00:30:10,440
to say okay the the work on this topic

658
00:30:10,440 --> 00:30:11,700
in this company

659
00:30:11,700 --> 00:30:14,520
so now I will do something that close to

660
00:30:14,520 --> 00:30:15,320
this

661
00:30:15,320 --> 00:30:18,059
topic and I will build my project to say

662
00:30:18,059 --> 00:30:19,980
based on this topic you have to get

663
00:30:19,980 --> 00:30:22,620
connected internally to do something

664
00:30:22,620 --> 00:30:25,980
else and there they know the project

665
00:30:25,980 --> 00:30:28,860
they know that they use this SSO portal

666
00:30:28,860 --> 00:30:31,260
so it seems legit for them and they can

667
00:30:31,260 --> 00:30:33,000
share a

668
00:30:33,000 --> 00:30:34,520
with more

669
00:30:34,520 --> 00:30:37,740
facility or more easily the credential

670
00:30:37,740 --> 00:30:40,039
if you do this kind of things

671
00:30:40,039 --> 00:30:43,320
so preparation phases it's really really

672
00:30:43,320 --> 00:30:46,200
important so um

673
00:30:46,200 --> 00:30:49,919
um don't make a domain that you you you

674
00:30:49,919 --> 00:30:52,200
you acquire a domain and then you you

675
00:30:52,200 --> 00:30:54,299
just make the phishing campaign no take

676
00:30:54,299 --> 00:30:56,100
your times you have to get some history

677
00:30:56,100 --> 00:30:58,260
behind this domain because uh as a

678
00:30:58,260 --> 00:31:00,059
reputation it's it can be checked so you

679
00:31:00,059 --> 00:31:01,980
can be screwed with that

680
00:31:01,980 --> 00:31:03,779
um the certification authorities that

681
00:31:03,779 --> 00:31:05,880
you use so if you decide to use Latin

682
00:31:05,880 --> 00:31:07,799
script because it's a straightforward to

683
00:31:07,799 --> 00:31:10,500
use lesson script in some company that

684
00:31:10,500 --> 00:31:12,000
not necessarily trust let's unscript

685
00:31:12,000 --> 00:31:14,460
because it's too much easy to get a

686
00:31:14,460 --> 00:31:16,380
certificate so maybe you have to buy

687
00:31:16,380 --> 00:31:18,679
another kind of certificate with another

688
00:31:18,679 --> 00:31:22,380
certificate authority to get more trust

689
00:31:22,380 --> 00:31:23,220
um

690
00:31:23,220 --> 00:31:27,960
for the content delivery use a CTN or is

691
00:31:27,960 --> 00:31:30,320
that also why I use AWS because usually

692
00:31:30,320 --> 00:31:34,440
people does not block a WS IP ranges so

693
00:31:34,440 --> 00:31:37,740
if you're behind a WS IP or if you use a

694
00:31:37,740 --> 00:31:39,720
cgn to to cover your your

695
00:31:39,720 --> 00:31:42,120
infrastructures they get more trust and

696
00:31:42,120 --> 00:31:44,720
they'll not block you for that part

697
00:31:44,720 --> 00:31:47,779
I already share that but Lambda function

698
00:31:47,779 --> 00:31:50,159
deploy your London function in somewhere

699
00:31:50,159 --> 00:31:54,480
where close to your targets and the cost

700
00:31:54,480 --> 00:31:56,460
exploitation phase

701
00:31:56,460 --> 00:32:00,360
the main advice log everything so yeah

702
00:32:00,360 --> 00:32:02,460
you see I try to make the the

703
00:32:02,460 --> 00:32:05,640
screenshots the screenshot failed so it

704
00:32:05,640 --> 00:32:07,500
should work but in this case it's fell I

705
00:32:07,500 --> 00:32:09,059
don't know so in your company it can be

706
00:32:09,059 --> 00:32:10,860
also failed but at least you have the

707
00:32:10,860 --> 00:32:12,539
log and you know when it has been done

708
00:32:12,539 --> 00:32:14,880
and everything like that so that really

709
00:32:14,880 --> 00:32:19,559
uh really good to do on the opposite for

710
00:32:19,559 --> 00:32:22,740
the blue team and the Security operation

711
00:32:22,740 --> 00:32:25,260
um some advice for them we have to use

712
00:32:25,260 --> 00:32:28,500
MFA password it's really really

713
00:32:28,500 --> 00:32:29,220
um

714
00:32:29,220 --> 00:32:32,700
not enough today so we have to make a

715
00:32:32,700 --> 00:32:35,360
full Mutual client Authentication

716
00:32:35,360 --> 00:32:39,059
especially token so I love to use UB key

717
00:32:39,059 --> 00:32:42,120
for me it's really a good alternative

718
00:32:42,120 --> 00:32:44,820
it's quite cheap for a company to to

719
00:32:44,820 --> 00:32:47,640
deploy ubiki so that's my main

720
00:32:47,640 --> 00:32:48,899
um

721
00:32:48,899 --> 00:32:50,820
recommendation for for them to to block

722
00:32:50,820 --> 00:32:52,220
fishing

723
00:32:52,220 --> 00:32:55,140
we have to review and rotate IPI and

724
00:32:55,140 --> 00:32:58,159
token so as I saw as I showed to you

725
00:32:58,159 --> 00:33:00,720
previously you can backdoor with the SSH

726
00:33:00,720 --> 00:33:03,419
key so we can but so also we can also

727
00:33:03,419 --> 00:33:05,700
add a token so all these kind of things

728
00:33:05,700 --> 00:33:07,500
should be reviewed rotted to be sure

729
00:33:07,500 --> 00:33:09,899
that each time there is someone then

730
00:33:09,899 --> 00:33:11,820
choose a token it should be rotated and

731
00:33:11,820 --> 00:33:15,360
be really well defined

732
00:33:15,360 --> 00:33:17,360
um

733
00:33:17,580 --> 00:33:20,279
yeah you can with the SSO providers

734
00:33:20,279 --> 00:33:21,779
there is plenty of things that you can

735
00:33:21,779 --> 00:33:24,960
do for example what we uh we you can

736
00:33:24,960 --> 00:33:26,880
Implement it's for some sensitive

737
00:33:26,880 --> 00:33:29,399
resources you can ask to reapply a

738
00:33:29,399 --> 00:33:32,039
multi-factor authentication so in with

739
00:33:32,039 --> 00:33:33,419
the OCTA for example you have the push

740
00:33:33,419 --> 00:33:36,840
notification so depending of um if

741
00:33:36,840 --> 00:33:39,299
you're already open a nocta session you

742
00:33:39,299 --> 00:33:41,279
just get just a push notification so

743
00:33:41,279 --> 00:33:45,059
people have to validate that they make a

744
00:33:45,059 --> 00:33:48,000
connection to that so if you do this

745
00:33:48,000 --> 00:33:50,159
kind of tricks it's block all my

746
00:33:50,159 --> 00:33:51,779
automation because I could not rely on

747
00:33:51,779 --> 00:33:53,700
that and people get a lot of push

748
00:33:53,700 --> 00:33:56,100
notifications so they can be fatigue and

749
00:33:56,100 --> 00:33:57,899
they can open one session but at least

750
00:33:57,899 --> 00:34:01,219
it's block some automation

751
00:34:01,559 --> 00:34:02,580
um

752
00:34:02,580 --> 00:34:06,000
so last part please don't blame the user

753
00:34:06,000 --> 00:34:08,879
the user have to work there is plenty of

754
00:34:08,879 --> 00:34:11,699
email they receive a lot of stuff so

755
00:34:11,699 --> 00:34:15,780
um and we we we cannot blame them we are

756
00:34:15,780 --> 00:34:17,820
security Engineers so we have to provide

757
00:34:17,820 --> 00:34:19,980
them a proper solution to get secured

758
00:34:19,980 --> 00:34:22,500
and to get their job done in the in the

759
00:34:22,500 --> 00:34:24,899
good way so

760
00:34:24,899 --> 00:34:28,440
um of course much if we introduce

761
00:34:28,440 --> 00:34:31,320
security we we decrease their um

762
00:34:31,320 --> 00:34:32,580
the

763
00:34:32,580 --> 00:34:35,699
the convocality or the the friendly

764
00:34:35,699 --> 00:34:37,859
things that we have with the I.T stuff

765
00:34:37,859 --> 00:34:40,739
but yeah it's something that we we have

766
00:34:40,739 --> 00:34:42,899
to to help them and um

767
00:34:42,899 --> 00:34:45,480
uh and not blunt them

768
00:34:45,480 --> 00:34:47,820
is that for the presentation I think I'm

769
00:34:47,820 --> 00:34:49,560
on time

770
00:34:49,560 --> 00:34:50,639
um

771
00:34:50,639 --> 00:34:53,520
if you have any question uh feel free to

772
00:34:53,520 --> 00:34:58,500
ask you can use Twitter this email to

773
00:34:58,500 --> 00:35:01,080
reach out to me you can scan against

774
00:35:01,080 --> 00:35:04,260
that and and get my contact so any

775
00:35:04,260 --> 00:35:06,800
question guys

776
00:35:15,720 --> 00:35:17,220
no question

777
00:35:17,220 --> 00:35:21,140
guys any questions from the crowd

778
00:35:22,859 --> 00:35:26,040
I'm still up 10 minutes so yeah let's

779
00:35:26,040 --> 00:35:28,260
say um because we were just so

780
00:35:28,260 --> 00:35:30,180
mesmerized by your accent

781
00:35:30,180 --> 00:35:32,880
exactly

782
00:35:32,880 --> 00:35:35,700
let me just try again 10 minutes guys if

783
00:35:35,700 --> 00:35:37,680
you have questions about the interesting

784
00:35:37,680 --> 00:35:42,720
uh topic I will try to just

785
00:35:42,720 --> 00:35:45,780
replay and show you that I'm not

786
00:35:45,780 --> 00:35:47,640
cheating and you should get a screenshot

787
00:35:47,640 --> 00:35:52,578
because it's something that she walks

788
00:35:53,460 --> 00:35:55,980
oh you're playing the demo oh yeah my

789
00:35:55,980 --> 00:35:57,480
demo does not working so I have to

790
00:35:57,480 --> 00:36:01,820
replace that I have 10 minutes so yeah

791
00:36:06,900 --> 00:36:09,000
so I just flush all the the previous

792
00:36:09,000 --> 00:36:10,680
things

793
00:36:10,680 --> 00:36:14,399
restart Mirena

794
00:36:18,180 --> 00:36:20,940
back there

795
00:36:20,940 --> 00:36:23,900
reload

796
00:36:30,359 --> 00:36:33,078
be good

797
00:36:50,040 --> 00:36:54,200
I got a position

798
00:36:55,380 --> 00:36:57,839
so I got the session

799
00:36:57,839 --> 00:37:01,520
orchestration was done there

800
00:37:15,420 --> 00:37:18,020
okay

801
00:37:21,000 --> 00:37:23,720
good evening

802
00:37:44,160 --> 00:37:47,820
yeah we are so as I say

803
00:37:47,820 --> 00:37:50,220
um you can screenshot and that's the

804
00:37:50,220 --> 00:37:51,540
screenshot that I took during the

805
00:37:51,540 --> 00:37:54,480
automation so if you see the the key

806
00:37:54,480 --> 00:37:56,180
that has been get air

807
00:37:56,180 --> 00:38:00,560
if now I'm back to uh

808
00:38:00,660 --> 00:38:04,020
I'm lost between my screens there

809
00:38:04,020 --> 00:38:07,460
if I'm rolling these pages

810
00:38:08,099 --> 00:38:10,440
I get the key there which is a key that

811
00:38:10,440 --> 00:38:12,420
I add recovery key so for example you

812
00:38:12,420 --> 00:38:15,060
know I use recovery key to don't make

813
00:38:15,060 --> 00:38:17,640
any malicious activity to say yeah it's

814
00:38:17,640 --> 00:38:21,119
a recovery key and it's look like legit

815
00:38:21,119 --> 00:38:25,560
and if I go to there yeah that's the the

816
00:38:25,560 --> 00:38:27,300
names that I use recovery key there when

817
00:38:27,300 --> 00:38:29,339
I do the automation

818
00:38:29,339 --> 00:38:32,119
so yeah I'm still there for a couple of

819
00:38:32,119 --> 00:38:36,060
hour and for the party as I said so feel

820
00:38:36,060 --> 00:38:37,980
free to reach out to me and just ask

821
00:38:37,980 --> 00:38:39,960
some questions if you want more details

822
00:38:39,960 --> 00:38:42,250
Sun guys

823
00:38:42,250 --> 00:38:48,690
[Applause]

