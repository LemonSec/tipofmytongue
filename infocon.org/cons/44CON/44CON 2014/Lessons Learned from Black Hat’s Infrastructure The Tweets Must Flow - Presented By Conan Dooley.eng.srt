1
00:00:00,030 --> 00:00:02,760
thank you for thank you for coming so

2
00:00:02,760 --> 00:00:05,009
we're going to talk about lessons

3
00:00:05,009 --> 00:00:06,629
learned from black hats infrastructure

4
00:00:06,629 --> 00:00:10,530
and I think it's it's important to start

5
00:00:10,530 --> 00:00:12,179
with some context about how big black

6
00:00:12,179 --> 00:00:14,910
hat is so their network 25,000 DNS

7
00:00:14,910 --> 00:00:17,640
packets in four seconds by one classroom

8
00:00:17,640 --> 00:00:22,470
there are 50 classrooms there are 30 200

9
00:00:22,470 --> 00:00:24,769
ish students there are 10,000 attendees

10
00:00:24,769 --> 00:00:27,269
there are a lot of people a lot of

11
00:00:27,269 --> 00:00:29,070
people doing what most people expect it

12
00:00:29,070 --> 00:00:30,359
to be some pretty some pretty heinous

13
00:00:30,359 --> 00:00:33,450
stuff on there and I'd like to show it

14
00:00:33,450 --> 00:00:35,850
share the experiences that I had working

15
00:00:35,850 --> 00:00:37,170
there as the technical engineer and

16
00:00:37,170 --> 00:00:40,559
volunteer director my job covered

17
00:00:40,559 --> 00:00:42,030
basically everything technical at

18
00:00:42,030 --> 00:00:43,379
blackhat so I was responsible for

19
00:00:43,379 --> 00:00:45,239
everything from the call for paper

20
00:00:45,239 --> 00:00:47,100
system that you would submit talks to on

21
00:00:47,100 --> 00:00:49,950
down to the the websites that you know

22
00:00:49,950 --> 00:00:53,969
the the web servers that the black hat

23
00:00:53,969 --> 00:00:56,489
site is served on and then also all of

24
00:00:56,489 --> 00:00:59,010
the wired network infrastructure that

25
00:00:59,010 --> 00:01:01,350
was used on site so anything that a

26
00:01:01,350 --> 00:01:03,930
training room or presenter would use

27
00:01:03,930 --> 00:01:05,519
during the course of their trainings or

28
00:01:05,519 --> 00:01:07,049
their presentations I was also

29
00:01:07,049 --> 00:01:10,590
responsible for the directors or - I was

30
00:01:10,590 --> 00:01:12,030
also responsible for directing the

31
00:01:12,030 --> 00:01:15,689
volunteer crew and that was immensely

32
00:01:15,689 --> 00:01:19,110
rewarding and a lot of fun and gave me a

33
00:01:19,110 --> 00:01:21,150
lot of insight into sort of how how an

34
00:01:21,150 --> 00:01:24,240
event goes off and well I'm talking

35
00:01:24,240 --> 00:01:25,560
about volunteers I would like to also

36
00:01:25,560 --> 00:01:27,330
say thank you to all of the 44 con

37
00:01:27,330 --> 00:01:28,680
volunteers for all of the work you guys

38
00:01:28,680 --> 00:01:32,850
are doing it's been fantastic now post

39
00:01:32,850 --> 00:01:34,740
post black hat I'm doing security

40
00:01:34,740 --> 00:01:37,439
consulting I focus on defense and I work

41
00:01:37,439 --> 00:01:39,090
for a company called Bishop Fox in the

42
00:01:39,090 --> 00:01:41,430
States and you couldn't follow me on

43
00:01:41,430 --> 00:01:42,720
Twitter if you feel so inclined

44
00:01:42,720 --> 00:01:46,890
so black hat good to talk at all so good

45
00:01:46,890 --> 00:01:49,710
to talk about you know I've sort of laid

46
00:01:49,710 --> 00:01:51,869
down a little bit of about black hat

47
00:01:51,869 --> 00:01:53,640
itself and I'll talk more about that as

48
00:01:53,640 --> 00:01:56,070
we go on you know I'd like to entertain

49
00:01:56,070 --> 00:01:57,799
you guys I have some good stories

50
00:01:57,799 --> 00:01:59,790
interesting stuff happens at blackhat

51
00:01:59,790 --> 00:02:00,990
and it's always good to share that kind

52
00:02:00,990 --> 00:02:03,329
of thing there was some also really

53
00:02:03,329 --> 00:02:04,770
great lessons learned there you know I

54
00:02:04,770 --> 00:02:06,420
walked into blackhat really expecting

55
00:02:06,420 --> 00:02:07,560
that I was going to end up in an

56
00:02:07,560 --> 00:02:10,709
environment where security was the like

57
00:02:10,709 --> 00:02:12,800
the whole reason for existing

58
00:02:12,800 --> 00:02:15,950
and I was I was mistaken in some ways

59
00:02:15,950 --> 00:02:18,710
and not mistaken in others and there was

60
00:02:18,710 --> 00:02:20,150
some really interesting lessons there

61
00:02:20,150 --> 00:02:22,580
and then I'd also like to talk about you

62
00:02:22,580 --> 00:02:25,100
know sort of the the meta concerns above

63
00:02:25,100 --> 00:02:27,290
above black hat basically black hat as

64
00:02:27,290 --> 00:02:29,630
it as it sort of educated me and brought

65
00:02:29,630 --> 00:02:31,640
me into the the larger security

66
00:02:31,640 --> 00:02:35,740
consulting scene so to start with

67
00:02:35,740 --> 00:02:38,360
supporting infrastructure black hat is

68
00:02:38,360 --> 00:02:41,120
owned by a parent company called u BM u

69
00:02:41,120 --> 00:02:43,040
BM is actually based in Europe they are

70
00:02:43,040 --> 00:02:45,740
a media company and they owned a lot of

71
00:02:45,740 --> 00:02:48,890
different events a lot of print media a

72
00:02:48,890 --> 00:02:51,260
lot of digital sort of you know digital

73
00:02:51,260 --> 00:02:52,850
spaces dark reading is one of their

74
00:02:52,850 --> 00:02:56,900
properties as well and a lot of people

75
00:02:56,900 --> 00:02:58,760
don't necessarily understand that so the

76
00:02:58,760 --> 00:03:00,020
thing that's interesting about that is

77
00:03:00,020 --> 00:03:01,880
that black hat is in that environment

78
00:03:01,880 --> 00:03:05,660
just a single a single event of mini

79
00:03:05,660 --> 00:03:07,130
events and so there's only there was

80
00:03:07,130 --> 00:03:08,480
only one technical staff which was

81
00:03:08,480 --> 00:03:10,820
generally me over the year and a half I

82
00:03:10,820 --> 00:03:13,900
was there and responsible for everything

83
00:03:13,900 --> 00:03:16,460
sometimes there were two right when I

84
00:03:16,460 --> 00:03:17,989
started there were two of us and then

85
00:03:17,989 --> 00:03:19,550
right before I left there were also two

86
00:03:19,550 --> 00:03:21,650
of us but usually there was only one

87
00:03:21,650 --> 00:03:22,880
technical staff at any given time

88
00:03:22,880 --> 00:03:25,280
they're responsible for everything so

89
00:03:25,280 --> 00:03:27,830
you know there was a lot of basics and

90
00:03:27,830 --> 00:03:31,280
sort of sort of you know ways that you

91
00:03:31,280 --> 00:03:32,750
had that we had to run the

92
00:03:32,750 --> 00:03:34,130
infrastructure that I had to run the

93
00:03:34,130 --> 00:03:35,420
infrastructure in order to make sure

94
00:03:35,420 --> 00:03:37,430
that you know it wouldn't be insecure

95
00:03:37,430 --> 00:03:39,770
simply because there wasn't that much

96
00:03:39,770 --> 00:03:43,580
manpower to spend on the infrastructure

97
00:03:43,580 --> 00:03:45,800
on top of my other responsibilities a

98
00:03:45,800 --> 00:03:47,600
large part of that was segmenting

99
00:03:47,600 --> 00:03:49,280
everything you know black hat had a

100
00:03:49,280 --> 00:03:50,989
really clearly defined like these are

101
00:03:50,989 --> 00:03:52,520
the services that are specific to black

102
00:03:52,520 --> 00:03:54,290
hat I didn't have to deal with a lot of

103
00:03:54,290 --> 00:03:57,440
users so it was easier to segment things

104
00:03:57,440 --> 00:03:59,270
than it would be normally a lot of

105
00:03:59,270 --> 00:04:00,709
redundancy a lot of making sure that if

106
00:04:00,709 --> 00:04:03,230
there was one if one component failed I

107
00:04:03,230 --> 00:04:05,480
never wanted to be immediately dragged

108
00:04:05,480 --> 00:04:07,520
out of whatever I was doing in order to

109
00:04:07,520 --> 00:04:09,560
fix it especially if I was on site and

110
00:04:09,560 --> 00:04:11,870
an event and the website went down so a

111
00:04:11,870 --> 00:04:13,370
lot of redundancy and a lot of just

112
00:04:13,370 --> 00:04:15,440
keeping it really really simple to avoid

113
00:04:15,440 --> 00:04:17,600
any sort of complexity that could they

114
00:04:17,600 --> 00:04:20,600
could screw things up so the supporting

115
00:04:20,600 --> 00:04:22,280
infrastructure looked just roughly like

116
00:04:22,280 --> 00:04:24,440
this there's a dark cloud filled with

117
00:04:24,440 --> 00:04:26,630
black hats out in front of black hat

118
00:04:26,630 --> 00:04:30,740
and we had you know two firewalls in in

119
00:04:30,740 --> 00:04:32,210
high availability mode just to make sure

120
00:04:32,210 --> 00:04:34,610
that that nothing you know if one failed

121
00:04:34,610 --> 00:04:37,010
again we had some backup switches with

122
00:04:37,010 --> 00:04:39,050
lots of VLANs to make sure you know each

123
00:04:39,050 --> 00:04:41,150
VLAN was was set up according to the

124
00:04:41,150 --> 00:04:43,220
type of data that it transported so we

125
00:04:43,220 --> 00:04:44,960
tried to make sure that compromise of a

126
00:04:44,960 --> 00:04:47,060
service wouldn't inherently grant an

127
00:04:47,060 --> 00:04:49,070
attacker access to anything beyond that

128
00:04:49,070 --> 00:04:51,230
single service they had compromised and

129
00:04:51,230 --> 00:04:55,940
then we had BSD and more BSD BSD is

130
00:04:55,940 --> 00:04:59,270
really simple it's it's very very

131
00:04:59,270 --> 00:05:01,310
reliable and again that was very

132
00:05:01,310 --> 00:05:02,420
important for me

133
00:05:02,420 --> 00:05:07,370
so BSD virtualizing more BSD was worked

134
00:05:07,370 --> 00:05:12,080
out quite nicely for us so events

135
00:05:12,080 --> 00:05:14,300
I'll primarily talk about USA because

136
00:05:14,300 --> 00:05:16,640
USA is the largest blackhat again you

137
00:05:16,640 --> 00:05:18,860
know ten thousand attendees fifty

138
00:05:18,860 --> 00:05:21,340
classrooms roughly three thousand

139
00:05:21,340 --> 00:05:24,470
students and everything all of the

140
00:05:24,470 --> 00:05:26,060
infrastructure that I set up there also

141
00:05:26,060 --> 00:05:27,770
applies to the rest of the events all

142
00:05:27,770 --> 00:05:33,680
over the world primarily covering wired

143
00:05:33,680 --> 00:05:35,390
here there's some wireless stuff as well

144
00:05:35,390 --> 00:05:37,130
though Wireless was usually handled by a

145
00:05:37,130 --> 00:05:42,320
third-party vendor for us so again

146
00:05:42,320 --> 00:05:44,120
volunteers would not have been possible

147
00:05:44,120 --> 00:05:46,640
without them we had about 75 volunteers

148
00:05:46,640 --> 00:05:49,430
to run 50 classrooms and they worked

149
00:05:49,430 --> 00:05:51,590
incredible hours and were you know

150
00:05:51,590 --> 00:05:53,150
incredibly devoted to making sure that

151
00:05:53,150 --> 00:05:57,050
this show went off well ten thousand

152
00:05:57,050 --> 00:05:59,690
attendees trying to focus on elevating

153
00:05:59,690 --> 00:06:01,760
their tweets not their privileges on my

154
00:06:01,760 --> 00:06:04,490
network and then their trainings the

155
00:06:04,490 --> 00:06:06,740
wired students here at you know fifteen

156
00:06:06,740 --> 00:06:09,350
hundred wired students chewing gum and

157
00:06:09,350 --> 00:06:10,940
popping shells there was also another

158
00:06:10,940 --> 00:06:13,460
roughly 1,700 students who were on the

159
00:06:13,460 --> 00:06:16,400
wireless and again those were generally

160
00:06:16,400 --> 00:06:18,080
managed by the the third party we didn't

161
00:06:18,080 --> 00:06:20,300
have too many issues with that all that

162
00:06:20,300 --> 00:06:22,520
often and then presenters who for some

163
00:06:22,520 --> 00:06:23,540
reason thought it would be a great idea

164
00:06:23,540 --> 00:06:25,790
to show up to blackhat and then be like

165
00:06:25,790 --> 00:06:27,440
yeah I have this live demo and also I

166
00:06:27,440 --> 00:06:29,720
need access to a public DNS server or

167
00:06:29,720 --> 00:06:31,910
also I need access to this so a big part

168
00:06:31,910 --> 00:06:33,080
of it was making sure that those guys

169
00:06:33,080 --> 00:06:34,910
had all of the tools they need and they

170
00:06:34,910 --> 00:06:35,990
didn't have to worry about the

171
00:06:35,990 --> 00:06:38,180
infrastructure in the course of doing

172
00:06:38,180 --> 00:06:38,580
there

173
00:06:38,580 --> 00:06:43,229
patience so let's talk about the actual

174
00:06:43,229 --> 00:06:45,000
network itself I mean people make a lot

175
00:06:45,000 --> 00:06:47,219
of assumptions about blackhat as a thing

176
00:06:47,219 --> 00:06:48,599
I mean it's it's this big this big

177
00:06:48,599 --> 00:06:50,240
information security conference

178
00:06:50,240 --> 00:06:52,770
everybody assumes that everybody's gonna

179
00:06:52,770 --> 00:06:54,539
be out there just like wrecking stuff

180
00:06:54,539 --> 00:06:56,490
you know stacked super deep with O'Day's

181
00:06:56,490 --> 00:06:57,930
like just like O'Day's everywhere

182
00:06:57,930 --> 00:07:01,199
O'Day's falling out of the network the

183
00:07:01,199 --> 00:07:02,699
second most hostile network in the world

184
00:07:02,699 --> 00:07:07,590
I you know that's that's what people

185
00:07:07,590 --> 00:07:11,729
think so security must be the you know

186
00:07:11,729 --> 00:07:13,500
top priority at blackhat right I mean

187
00:07:13,500 --> 00:07:15,270
that's that's the reasonable expectation

188
00:07:15,270 --> 00:07:17,639
we would have here hacker conference you

189
00:07:17,639 --> 00:07:22,259
know it's ya know it's it's not bad at

190
00:07:22,259 --> 00:07:25,169
all I mean this is it's it's owned by

191
00:07:25,169 --> 00:07:26,849
it's owned by a media company they don't

192
00:07:26,849 --> 00:07:28,250
they don't really understand security

193
00:07:28,250 --> 00:07:30,930
there it's not part of their business

194
00:07:30,930 --> 00:07:32,639
it's not part of their they're there to

195
00:07:32,639 --> 00:07:34,440
sell tickets there they're there to get

196
00:07:34,440 --> 00:07:37,229
people in trainings and to make sure

197
00:07:37,229 --> 00:07:39,150
that you know they make money at the end

198
00:07:39,150 --> 00:07:40,409
of the day that's really what they care

199
00:07:40,409 --> 00:07:42,090
about and none of their other events

200
00:07:42,090 --> 00:07:44,039
need security I mean the fact that you

201
00:07:44,039 --> 00:07:45,150
know hey there's there's there's a

202
00:07:45,150 --> 00:07:46,680
security guy there specifically for

203
00:07:46,680 --> 00:07:48,629
blackhat like what more do you need you

204
00:07:48,629 --> 00:07:51,419
know they did care about some stuff

205
00:07:51,419 --> 00:07:53,069
though I mean they they did know that

206
00:07:53,069 --> 00:07:55,229
the registration database getting owned

207
00:07:55,229 --> 00:07:57,349
for black out would be a really bad idea

208
00:07:57,349 --> 00:07:59,849
they they knew that like you know they

209
00:07:59,849 --> 00:08:02,639
had to protect CFP there's lots of you

210
00:08:02,639 --> 00:08:04,289
know sensitive talks that are submitted

211
00:08:04,289 --> 00:08:06,150
there's lots of you know proof of

212
00:08:06,150 --> 00:08:07,740
concepts that people have for exploits

213
00:08:07,740 --> 00:08:09,389
they were going to present there so a

214
00:08:09,389 --> 00:08:11,039
lot of that information is stored in the

215
00:08:11,039 --> 00:08:13,259
CFP database it was essential to make

216
00:08:13,259 --> 00:08:15,060
sure that stayed protected primarily

217
00:08:15,060 --> 00:08:17,099
because brand damage is a really big

218
00:08:17,099 --> 00:08:19,440
concern at that sort of event I mean

219
00:08:19,440 --> 00:08:22,860
it's it's they are built on the trust of

220
00:08:22,860 --> 00:08:24,779
the people that present at the

221
00:08:24,779 --> 00:08:26,879
conference so it's very important that

222
00:08:26,879 --> 00:08:29,250
those people feel safe and trust the

223
00:08:29,250 --> 00:08:31,080
infrastructure that they're using and

224
00:08:31,080 --> 00:08:33,899
and that's it I mean like those those

225
00:08:33,899 --> 00:08:35,640
are that's really what the business

226
00:08:35,640 --> 00:08:37,320
cared about and that was what they

227
00:08:37,320 --> 00:08:41,039
thought was really important and it's I

228
00:08:41,039 --> 00:08:42,809
was really glad when I was there that

229
00:08:42,809 --> 00:08:44,099
these things were taken seriously

230
00:08:44,099 --> 00:08:45,779
because it made my life a lot easier it

231
00:08:45,779 --> 00:08:48,329
helped me sleep at night but before I

232
00:08:48,329 --> 00:08:50,490
got there their infrastructure on-site

233
00:08:50,490 --> 00:08:51,810
their wired infrastructure

234
00:08:51,810 --> 00:08:54,390
at the event looked like this and it was

235
00:08:54,390 --> 00:08:57,770
it was Linksys routers in each classroom

236
00:08:57,770 --> 00:09:02,540
it was 10 100 switches it was you know

237
00:09:02,540 --> 00:09:06,270
handmade volunteer made cables and I'm

238
00:09:06,270 --> 00:09:07,860
sure that everybody here has had an

239
00:09:07,860 --> 00:09:11,700
opportunity to find at some level you

240
00:09:11,700 --> 00:09:13,260
know that all of your network problems

241
00:09:13,260 --> 00:09:14,640
were because somebody didn't actually

242
00:09:14,640 --> 00:09:16,680
install the cable make the cable

243
00:09:16,680 --> 00:09:18,270
correctly didn't crimp it correctly

244
00:09:18,270 --> 00:09:19,740
something happened

245
00:09:19,740 --> 00:09:22,650
and essentially the year before I got

246
00:09:22,650 --> 00:09:24,600
there this is what the network looked

247
00:09:24,600 --> 00:09:28,170
like it was basically a self-replicating

248
00:09:28,170 --> 00:09:32,040
world of fire people demanded refunds

249
00:09:32,040 --> 00:09:33,480
for their trainings because they weren't

250
00:09:33,480 --> 00:09:35,760
able to carry them out and that's

251
00:09:35,760 --> 00:09:37,560
another sort of really important thing

252
00:09:37,560 --> 00:09:40,610
that I'd like to loop back to later but

253
00:09:40,610 --> 00:09:43,110
let's talk about how it was all fixed I

254
00:09:43,110 --> 00:09:45,840
mean I wasn't around then I arrived

255
00:09:45,840 --> 00:09:48,210
basically three months before the USA

256
00:09:48,210 --> 00:09:50,460
event the following year after all of

257
00:09:50,460 --> 00:09:53,970
this had happened so this is how we

258
00:09:53,970 --> 00:09:56,280
fixed it step one was segmenting our

259
00:09:56,280 --> 00:09:57,839
network it was it was making sure that

260
00:09:57,839 --> 00:09:59,280
we really clearly defined that stuff and

261
00:09:59,280 --> 00:10:01,440
replacing all of the tiny Linksys boxes

262
00:10:01,440 --> 00:10:04,440
with proper networking hardware and in

263
00:10:04,440 --> 00:10:07,020
this case it was so Chris 6500 ones

264
00:10:07,020 --> 00:10:10,080
which are small they're about you know

265
00:10:10,080 --> 00:10:14,790
uh well foot there they're small boxes

266
00:10:14,790 --> 00:10:17,010
that have four Gigabit Ethernet ports on

267
00:10:17,010 --> 00:10:19,230
them they have a 1 gigahertz Intel Atom

268
00:10:19,230 --> 00:10:20,730
processor and they have anywhere from

269
00:10:20,730 --> 00:10:23,910
500 12 to 2 gigs of RAM and they're just

270
00:10:23,910 --> 00:10:26,040
really really tiny computers basically

271
00:10:26,040 --> 00:10:28,530
you throw open BSD on them because it's

272
00:10:28,530 --> 00:10:30,510
reliable it's simple it's super

273
00:10:30,510 --> 00:10:32,430
lightweight and it does nothing except

274
00:10:32,430 --> 00:10:34,110
what you tell it to which is again you

275
00:10:34,110 --> 00:10:36,030
know from from a security standpoint a

276
00:10:36,030 --> 00:10:38,010
huge selling point to have something

277
00:10:38,010 --> 00:10:40,080
that I knew that if I just set it up to

278
00:10:40,080 --> 00:10:43,140
do nothing but serve DHCP and route

279
00:10:43,140 --> 00:10:45,570
traffic it would do nothing but serve

280
00:10:45,570 --> 00:10:49,380
DHCP and route traffic for me quality of

281
00:10:49,380 --> 00:10:51,270
service is also built in and handled by

282
00:10:51,270 --> 00:10:54,660
by pfn and lq they have migrated away

283
00:10:54,660 --> 00:10:57,330
from that recently but it's it's still

284
00:10:57,330 --> 00:10:59,910
available and the design again you know

285
00:10:59,910 --> 00:11:00,690
simple

286
00:11:00,690 --> 00:11:03,060
here's your classrooms there's one so

287
00:11:03,060 --> 00:11:04,560
crisper classroom

288
00:11:04,560 --> 00:11:08,310
there's hotel switches with VLANs to

289
00:11:08,310 --> 00:11:10,709
keep the network segmented appropriately

290
00:11:10,709 --> 00:11:13,769
it's really fun I have to say like when

291
00:11:13,769 --> 00:11:15,329
you when you get into this environment

292
00:11:15,329 --> 00:11:17,610
and and dealing with Hotel AV when you

293
00:11:17,610 --> 00:11:19,379
reach the point where everything was

294
00:11:19,379 --> 00:11:21,240
working and then at some point in the

295
00:11:21,240 --> 00:11:23,519
middle of the night the one of their

296
00:11:23,519 --> 00:11:25,319
network people decides to change VLANs

297
00:11:25,319 --> 00:11:26,759
and a presenter plugs in and they just

298
00:11:26,759 --> 00:11:29,040
get like a d-link like they get an IP

299
00:11:29,040 --> 00:11:32,730
address on a 192 subnet and I plug into

300
00:11:32,730 --> 00:11:34,860
it and I go to the Gateway and it's just

301
00:11:34,860 --> 00:11:36,480
like you know it's like a 12 year old

302
00:11:36,480 --> 00:11:39,600
router just like random web page default

303
00:11:39,600 --> 00:11:42,899
creds like you know this is the sort of

304
00:11:42,899 --> 00:11:44,370
stuff that you deal with that's kind of

305
00:11:44,370 --> 00:11:47,249
like just normal event overhead you know

306
00:11:47,249 --> 00:11:48,660
just IT overhead as people miss

307
00:11:48,660 --> 00:11:51,209
configuring things and then we had our

308
00:11:51,209 --> 00:11:53,579
gateway laptop at the very top of all of

309
00:11:53,579 --> 00:11:58,499
this there was a laptop and I mean my

310
00:11:58,499 --> 00:12:00,600
first nook right I mean I'd come out of

311
00:12:00,600 --> 00:12:02,160
being a systems administrator this was

312
00:12:02,160 --> 00:12:04,319
all new to me and and we had a gateway a

313
00:12:04,319 --> 00:12:06,930
laptop as our gateway because it was

314
00:12:06,930 --> 00:12:09,029
what we had because we've never really

315
00:12:09,029 --> 00:12:11,459
been able to properly validate to the

316
00:12:11,459 --> 00:12:13,079
business why we needed better hardware

317
00:12:13,079 --> 00:12:14,579
than this and I mean we made it work

318
00:12:14,579 --> 00:12:16,259
it's the same it's the same thing you

319
00:12:16,259 --> 00:12:17,100
know OpenBSD

320
00:12:17,100 --> 00:12:20,100
quad core battery backup and most

321
00:12:20,100 --> 00:12:22,860
laptops only have one Ethernet port so

322
00:12:22,860 --> 00:12:25,970
all of our outbound Ethernet traffic in

323
00:12:25,970 --> 00:12:31,139
2012 went through a 10100 USB adapter

324
00:12:31,139 --> 00:12:33,689
which is just you know like the kind of

325
00:12:33,689 --> 00:12:35,670
almost the stuff of nightmares although

326
00:12:35,670 --> 00:12:37,680
it worked out it worked out quite well

327
00:12:37,680 --> 00:12:40,290
and I mean our NOC was also Greeks it

328
00:12:40,290 --> 00:12:43,079
had cardboard walls it's like the the

329
00:12:43,079 --> 00:12:45,360
entire room would would vibrate when

330
00:12:45,360 --> 00:12:47,189
somebody walked in because it was just

331
00:12:47,189 --> 00:12:49,620
like partitions with cardboard and then

332
00:12:49,620 --> 00:12:53,639
a power strip a table and sometimes the

333
00:12:53,639 --> 00:12:57,000
lock on the door would Jam so it was

334
00:12:57,000 --> 00:12:59,670
pretty secure but I also had a lot of

335
00:12:59,670 --> 00:13:01,319
difficulty getting into my NOC sometimes

336
00:13:01,319 --> 00:13:02,759
and that's that's sort of another

337
00:13:02,759 --> 00:13:04,499
another thing that all I'll come back to

338
00:13:04,499 --> 00:13:06,259
you later

339
00:13:06,259 --> 00:13:09,809
and from from here that's like there's

340
00:13:09,809 --> 00:13:12,269
there's sort of a design component that

341
00:13:12,269 --> 00:13:13,800
I think we should talk about about you

342
00:13:13,800 --> 00:13:15,959
know threat modeling in that in that

343
00:13:15,959 --> 00:13:16,900
environment

344
00:13:16,900 --> 00:13:20,080
and and really you know threat modeling

345
00:13:20,080 --> 00:13:21,520
at that point wasn't something that I I

346
00:13:21,520 --> 00:13:23,890
had a really formal way of doing it was

347
00:13:23,890 --> 00:13:25,420
just something that I kind of thought

348
00:13:25,420 --> 00:13:27,670
about as like oh I have to defend this I

349
00:13:27,670 --> 00:13:29,380
need to think about who's on my network

350
00:13:29,380 --> 00:13:32,500
and so roughly it broke down like this

351
00:13:32,500 --> 00:13:35,700
we had external attackers your typical

352
00:13:35,700 --> 00:13:39,660
scheme asked hacker as we all know and

353
00:13:39,660 --> 00:13:42,310
blackhat had this wonderful thing where

354
00:13:42,310 --> 00:13:43,839
we didn't have to serve anything

355
00:13:43,839 --> 00:13:45,730
publicly so I could just block them I

356
00:13:45,730 --> 00:13:47,830
mean that like super easy dudes dudes

357
00:13:47,830 --> 00:13:50,170
useless because there's there's no way

358
00:13:50,170 --> 00:13:51,790
in we're not serving any services we're

359
00:13:51,790 --> 00:13:53,440
not exposing anything publicly on the

360
00:13:53,440 --> 00:13:57,540
event side so it made life really easy

361
00:13:57,540 --> 00:14:00,310
we also had internal attackers and I

362
00:14:00,310 --> 00:14:02,200
really love this picture because it is a

363
00:14:02,200 --> 00:14:03,700
picture of somebody wearing a mask of

364
00:14:03,700 --> 00:14:06,820
their own face which is probably on a

365
00:14:06,820 --> 00:14:08,890
really meta level a wonderful commentary

366
00:14:08,890 --> 00:14:11,170
about actual inside attackers but really

367
00:14:11,170 --> 00:14:12,820
it's like you know inside threats but it

368
00:14:12,820 --> 00:14:14,080
really it's just it's just a great

369
00:14:14,080 --> 00:14:14,440
picture

370
00:14:14,440 --> 00:14:17,560
and so this no mask policy is still good

371
00:14:17,560 --> 00:14:20,170
and more importantly everybody on an

372
00:14:20,170 --> 00:14:21,790
internal attacker side has to live

373
00:14:21,790 --> 00:14:24,339
somewhere and when I control the network

374
00:14:24,339 --> 00:14:26,470
and I control every endpoint and I know

375
00:14:26,470 --> 00:14:29,950
where people are I know where you live

376
00:14:29,950 --> 00:14:32,980
we defended basically against every kind

377
00:14:32,980 --> 00:14:34,660
of bad behavior on our network by just

378
00:14:34,660 --> 00:14:37,360
intimidating or yelling at people one of

379
00:14:37,360 --> 00:14:41,680
our volunteers was a is a 665 about you

380
00:14:41,680 --> 00:14:45,310
know 280 pounds very intimidating a lot

381
00:14:45,310 --> 00:14:47,980
of lot of bark not a lot of bite but we

382
00:14:47,980 --> 00:14:50,110
had an experience where we somebody was

383
00:14:50,110 --> 00:14:52,420
torrenting traffic on the on the

384
00:14:52,420 --> 00:14:53,860
blackhat Network which is like just like

385
00:14:53,860 --> 00:14:56,770
great like why are you seeding off of

386
00:14:56,770 --> 00:14:59,950
this network it's like 605 and at the

387
00:14:59,950 --> 00:15:01,420
end of trainings and we're all like okay

388
00:15:01,420 --> 00:15:02,770
everything's good we're good and

389
00:15:02,770 --> 00:15:04,420
somebody is basically sucking down all

390
00:15:04,420 --> 00:15:06,580
of the limited bandwidth we have to

391
00:15:06,580 --> 00:15:09,910
torrent some stuff and the way we fix

392
00:15:09,910 --> 00:15:11,260
that is we figured out which room it was

393
00:15:11,260 --> 00:15:12,880
in through you know the monitoring on

394
00:15:12,880 --> 00:15:17,020
the circus boxes and then you know Bart

395
00:15:17,020 --> 00:15:19,690
our volunteer walks down there and he

396
00:15:19,690 --> 00:15:21,610
just walks into the room and he talks

397
00:15:21,610 --> 00:15:24,820
into his mic and he just says hey so I'm

398
00:15:24,820 --> 00:15:26,980
in the room do we still have traffic

399
00:15:26,980 --> 00:15:29,260
going on like can you still see that

400
00:15:29,260 --> 00:15:30,279
traffic

401
00:15:30,279 --> 00:15:32,170
and there's four people in the room

402
00:15:32,170 --> 00:15:33,730
three people sort of sitting together

403
00:15:33,730 --> 00:15:35,680
and one dude standing just off to the

404
00:15:35,680 --> 00:15:37,509
side talk sitting by himself with his

405
00:15:37,509 --> 00:15:39,730
laptop and the guy just looks at Bart

406
00:15:39,730 --> 00:15:42,999
and just closes his laptop barça's we

407
00:15:42,999 --> 00:15:45,490
still seeing that traffic nope we're

408
00:15:45,490 --> 00:15:47,920
good and leaves I'm like that was it I

409
00:15:47,920 --> 00:15:49,360
mean it could have been a really awkward

410
00:15:49,360 --> 00:15:50,949
conversation because you know at that

411
00:15:50,949 --> 00:15:52,839
point there was no real like there was

412
00:15:52,839 --> 00:15:54,009
nothing around like saying that you

413
00:15:54,009 --> 00:15:56,139
couldn't torrent on black hats Network

414
00:15:56,139 --> 00:15:57,819
like you know we we all thought common

415
00:15:57,819 --> 00:16:00,399
sense would cover that but you know it

416
00:16:00,399 --> 00:16:02,559
was just really easy to just like just

417
00:16:02,559 --> 00:16:04,209
stand there and be like hey don't be it

418
00:16:04,209 --> 00:16:05,980
don't be a dick on my network like let's

419
00:16:05,980 --> 00:16:09,879
just start with that so let's break this

420
00:16:09,879 --> 00:16:11,050
down in like kind of a more formal

421
00:16:11,050 --> 00:16:14,019
fashion right I mean like I think that

422
00:16:14,019 --> 00:16:15,220
threat modeling is one of those things

423
00:16:15,220 --> 00:16:17,199
that's you know not super well defined

424
00:16:17,199 --> 00:16:18,790
so it's helpful to sort of go through

425
00:16:18,790 --> 00:16:20,439
this and just like lay out each one

426
00:16:20,439 --> 00:16:22,540
knowing now you know having the

427
00:16:22,540 --> 00:16:24,040
experience of talking to more people

428
00:16:24,040 --> 00:16:25,569
about this and learning more about this

429
00:16:25,569 --> 00:16:28,120
process so you know here's a really

430
00:16:28,120 --> 00:16:29,079
basic threat model

431
00:16:29,079 --> 00:16:31,089
it's you've got external attackers and

432
00:16:31,089 --> 00:16:33,519
they're blocked you've got bad students

433
00:16:33,519 --> 00:16:34,809
who are going to be limited to their

434
00:16:34,809 --> 00:16:36,610
classrooms or the internet and I mean

435
00:16:36,610 --> 00:16:39,069
functionally it's great if if you break

436
00:16:39,069 --> 00:16:40,959
everything in your classroom your

437
00:16:40,959 --> 00:16:42,819
instructor and the other students are

438
00:16:42,819 --> 00:16:44,829
going to yell at you so that solves my

439
00:16:44,829 --> 00:16:47,949
problems for me and frankly like if

440
00:16:47,949 --> 00:16:49,300
you're gonna show up to blackhat you're

441
00:16:49,300 --> 00:16:50,470
gonna spend a whole pile of money and

442
00:16:50,470 --> 00:16:51,879
doing a training and then you're going

443
00:16:51,879 --> 00:16:54,370
to use your time there to attack random

444
00:16:54,370 --> 00:16:56,769
websites on the Internet like I don't

445
00:16:56,769 --> 00:16:58,209
really care honestly like it's just

446
00:16:58,209 --> 00:17:00,459
really inefficient use of time it's like

447
00:17:00,459 --> 00:17:01,899
you're not gonna get anything out of it

448
00:17:01,899 --> 00:17:03,339
it's gonna be really awkward you'd be

449
00:17:03,339 --> 00:17:05,349
better off just spending that money you

450
00:17:05,349 --> 00:17:07,240
know on some kind of anonymizing

451
00:17:07,240 --> 00:17:09,599
something somewhere else

452
00:17:09,599 --> 00:17:12,909
bad attendees they could be jerks on the

453
00:17:12,909 --> 00:17:14,260
wireless network that's that's actually

454
00:17:14,260 --> 00:17:17,020
fine you know we kind of thought about

455
00:17:17,020 --> 00:17:18,220
it we thought about what it would be

456
00:17:18,220 --> 00:17:19,000
necessary

457
00:17:19,000 --> 00:17:21,250
how much overhead it would take to try

458
00:17:21,250 --> 00:17:22,809
and protect the wireless in a really

459
00:17:22,809 --> 00:17:25,059
meaningful way and it would be very very

460
00:17:25,059 --> 00:17:27,069
difficult I mean there's no easy way to

461
00:17:27,069 --> 00:17:29,500
do that Wireless is just a pain to

462
00:17:29,500 --> 00:17:31,809
secure in general and what we instead

463
00:17:31,809 --> 00:17:33,100
focused on is making sure that people

464
00:17:33,100 --> 00:17:35,080
couldn't physically get on to any of the

465
00:17:35,080 --> 00:17:36,280
networks without breaking something

466
00:17:36,280 --> 00:17:38,289
either by disconnecting a wireless

467
00:17:38,289 --> 00:17:40,960
access point or by disconnecting some

468
00:17:40,960 --> 00:17:42,549
server that we would be able to monitor

469
00:17:42,549 --> 00:17:43,470
some endpoint that would

470
00:17:43,470 --> 00:17:45,299
be monitored and would alert us so we

471
00:17:45,299 --> 00:17:47,039
could immediately go find that person

472
00:17:47,039 --> 00:17:50,100
and yell at them there were also some

473
00:17:50,100 --> 00:17:52,470
other networks that are run at blackhat

474
00:17:52,470 --> 00:17:54,720
including you know press staff and

475
00:17:54,720 --> 00:17:56,100
registration and basically we just

476
00:17:56,100 --> 00:17:58,380
access-controlled all of this so any

477
00:17:58,380 --> 00:17:59,789
other network attacker would have to

478
00:17:59,789 --> 00:18:03,150
again go through this process of logging

479
00:18:03,150 --> 00:18:06,360
of disconnecting something and trying to

480
00:18:06,360 --> 00:18:10,289
get in that way and I mean functionally

481
00:18:10,289 --> 00:18:11,700
the reason that this threat model is so

482
00:18:11,700 --> 00:18:13,530
so simple because it just kind of lumps

483
00:18:13,530 --> 00:18:15,809
all attackers into one giant you know

484
00:18:15,809 --> 00:18:18,299
giant mess basically and and we tried to

485
00:18:18,299 --> 00:18:21,090
defend against them accepting that if

486
00:18:21,090 --> 00:18:23,370
somebody had an open BSD O'Day like we

487
00:18:23,370 --> 00:18:24,330
would basically just give them a

488
00:18:24,330 --> 00:18:25,950
speaking slot like oh great you own our

489
00:18:25,950 --> 00:18:27,510
network like get up on stage and talk

490
00:18:27,510 --> 00:18:29,750
about it now because that's what you get

491
00:18:29,750 --> 00:18:33,870
so really like all of this is is all

492
00:18:33,870 --> 00:18:35,760
that was necessary to have a really

493
00:18:35,760 --> 00:18:37,470
really functional defense against

494
00:18:37,470 --> 00:18:40,020
everybody that showed up to the blackhat

495
00:18:40,020 --> 00:18:43,260
networks so the basics of making sure

496
00:18:43,260 --> 00:18:44,909
that we were able to do this was really

497
00:18:44,909 --> 00:18:46,710
around you know controlling controlling

498
00:18:46,710 --> 00:18:49,950
hostility right monitoring it so we know

499
00:18:49,950 --> 00:18:51,840
where we're down we know who to yell at

500
00:18:51,840 --> 00:18:54,510
when people are being jerks the wireless

501
00:18:54,510 --> 00:18:57,539
could auto Smosh rogue ap is that was

502
00:18:57,539 --> 00:19:01,110
just easy enough you know there the

503
00:19:01,110 --> 00:19:02,940
third-party Wireless vendors would would

504
00:19:02,940 --> 00:19:05,130
often have something built in that would

505
00:19:05,130 --> 00:19:08,039
just you know overwhelm any any rogue ap

506
00:19:08,039 --> 00:19:09,750
so it was really handy for people who

507
00:19:09,750 --> 00:19:11,539
did try and do stuff like you know

508
00:19:11,539 --> 00:19:16,200
pineapple the entire network we actually

509
00:19:16,200 --> 00:19:20,429
had a great a great moment where in 2013

510
00:19:20,429 --> 00:19:24,240
our wireless provider spoofed every

511
00:19:24,240 --> 00:19:26,280
network that anybody had ever connected

512
00:19:26,280 --> 00:19:28,590
to on their own network and actually

513
00:19:28,590 --> 00:19:29,940
have a really legitimate reason for

514
00:19:29,940 --> 00:19:31,260
doing this that I didn't understand

515
00:19:31,260 --> 00:19:32,970
until I talked to these guys and the

516
00:19:32,970 --> 00:19:34,559
reason they do it is because everybody's

517
00:19:34,559 --> 00:19:36,570
device broadcasts where it's been you

518
00:19:36,570 --> 00:19:39,299
know it sends out a ping to be like hey

519
00:19:39,299 --> 00:19:40,980
am I in range of this network I would

520
00:19:40,980 --> 00:19:42,690
like to connect to it if I am and in

521
00:19:42,690 --> 00:19:44,220
order to have a good user experience a

522
00:19:44,220 --> 00:19:46,169
lot of them will flood those packets

523
00:19:46,169 --> 00:19:48,570
sending them like every five seconds or

524
00:19:48,570 --> 00:19:50,280
every 10 seconds when you have seven

525
00:19:50,280 --> 00:19:52,409
thousand people each person carrying a

526
00:19:52,409 --> 00:19:53,389
phone that's doing

527
00:19:53,389 --> 00:19:55,070
this you start to saturate spectrums

528
00:19:55,070 --> 00:19:57,379
really quickly so what the wireless

529
00:19:57,379 --> 00:19:59,299
provider would do is they would just

530
00:19:59,299 --> 00:20:01,789
accept any like they would claim to be

531
00:20:01,789 --> 00:20:03,529
any network that somebody was looking

532
00:20:03,529 --> 00:20:05,179
for and just automatically connect them

533
00:20:05,179 --> 00:20:11,179
and the thing about this is that only

534
00:20:11,179 --> 00:20:13,279
three people actually picked up on the

535
00:20:13,279 --> 00:20:15,529
fact that there was a say conference

536
00:20:15,529 --> 00:20:19,249
wide Wireless spoofing going on it was

537
00:20:19,249 --> 00:20:20,929
one review board member it was one

538
00:20:20,929 --> 00:20:24,049
attendee and it was one volunteer and I

539
00:20:24,049 --> 00:20:26,690
think it's really interesting to note

540
00:20:26,690 --> 00:20:28,579
that because it kind of indicates how

541
00:20:28,579 --> 00:20:30,259
people interact with the black hat

542
00:20:30,259 --> 00:20:32,029
environments like most people very much

543
00:20:32,029 --> 00:20:34,099
keep their head down and they don't pay

544
00:20:34,099 --> 00:20:35,389
too much like they try and avoid

545
00:20:35,389 --> 00:20:37,249
exposing anything at all

546
00:20:37,249 --> 00:20:38,809
and as a result like stuff like this

547
00:20:38,809 --> 00:20:41,629
goes on and people just you know don't

548
00:20:41,629 --> 00:20:45,469
don't notice you know and it was great

549
00:20:45,469 --> 00:20:47,869
because our volunteer discovered this

550
00:20:47,869 --> 00:20:49,849
and before bringing it to me wanted to

551
00:20:49,849 --> 00:20:51,889
you know validate like okay like where

552
00:20:51,889 --> 00:20:54,679
is this person can I triangulate the

553
00:20:54,679 --> 00:20:57,289
location of this this person who's doing

554
00:20:57,289 --> 00:20:59,839
something and he was convinced that like

555
00:20:59,839 --> 00:21:02,269
we just had the most badass hacker who

556
00:21:02,269 --> 00:21:04,219
had just scattered pineapples like

557
00:21:04,219 --> 00:21:06,079
everywhere just had like had like a

558
00:21:06,079 --> 00:21:08,839
hundred rogue ap's scattered throughout

559
00:21:08,839 --> 00:21:11,629
the entire conference and he ran around

560
00:21:11,629 --> 00:21:13,789
for like two hours before we finally

561
00:21:13,789 --> 00:21:15,829
took pity on him and we're like okay so

562
00:21:15,829 --> 00:21:17,809
we know you've been you've been looking

563
00:21:17,809 --> 00:21:19,399
for this but really you should come look

564
00:21:19,399 --> 00:21:21,529
at the management console and you can

565
00:21:21,529 --> 00:21:23,419
see like your trail of attempted

566
00:21:23,419 --> 00:21:25,429
connections walking around the show

567
00:21:25,429 --> 00:21:29,929
floor looking for where this is and the

568
00:21:29,929 --> 00:21:31,159
other thing that's that's really

569
00:21:31,159 --> 00:21:33,499
interesting about this is like nobody

570
00:21:33,499 --> 00:21:35,389
cares as long as the internet works like

571
00:21:35,389 --> 00:21:38,149
it's kind of this this this reality that

572
00:21:38,149 --> 00:21:40,009
we have to live with not just a black

573
00:21:40,009 --> 00:21:41,749
hat but in a broader sense is that like

574
00:21:41,749 --> 00:21:43,459
people just don't care it's like they're

575
00:21:43,459 --> 00:21:44,809
connected to their home network at a

576
00:21:44,809 --> 00:21:47,809
conference yeah I guess computers you

577
00:21:47,809 --> 00:21:52,849
know who cares so the funny outcome of

578
00:21:52,849 --> 00:21:54,289
all this is is black hat is actually a

579
00:21:54,289 --> 00:21:56,329
pretty nice network I mean it's not it's

580
00:21:56,329 --> 00:21:59,179
not what I would consider like super

581
00:21:59,179 --> 00:22:01,519
safe I wouldn't be broadcasting stuff in

582
00:22:01,519 --> 00:22:03,200
plaintext somebody's far more likely to

583
00:22:03,200 --> 00:22:05,959
you know to pick up on that for sure but

584
00:22:05,959 --> 00:22:07,280
really if you're if you're like

585
00:22:07,280 --> 00:22:09,110
following if your VP ending anywhere

586
00:22:09,110 --> 00:22:11,360
you're fine like it's it's nothing too

587
00:22:11,360 --> 00:22:15,020
crazy is really going on there so with

588
00:22:15,020 --> 00:22:16,640
all that in mind I think it's you know

589
00:22:16,640 --> 00:22:18,710
it's it's we should address the design

590
00:22:18,710 --> 00:22:22,070
here which is you know what is good

591
00:22:22,070 --> 00:22:23,990
design with with regards to this really

592
00:22:23,990 --> 00:22:26,960
and and here's the design goals that I

593
00:22:26,960 --> 00:22:29,360
kind of that I kind of I took to heart

594
00:22:29,360 --> 00:22:31,580
when I was setting all of this up and in

595
00:22:31,580 --> 00:22:33,170
a big part you know was just keeping it

596
00:22:33,170 --> 00:22:35,150
simple like yeah always you know as

597
00:22:35,150 --> 00:22:37,480
simple as possible is is the best

598
00:22:37,480 --> 00:22:39,650
knowing my networks you know drop

599
00:22:39,650 --> 00:22:42,770
everything that doesn't belong know what

600
00:22:42,770 --> 00:22:45,020
is going where why it's going there and

601
00:22:45,020 --> 00:22:49,190
and detects or drop accordingly put like

602
00:22:49,190 --> 00:22:50,930
with like I mean again black hat is this

603
00:22:50,930 --> 00:22:51,950
environment where everything is really

604
00:22:51,950 --> 00:22:54,020
strongly constrained where I'm deploying

605
00:22:54,020 --> 00:22:55,700
the network every year so I don't have a

606
00:22:55,700 --> 00:22:57,860
lot of historical overhead to live with

607
00:22:57,860 --> 00:23:00,140
so it made it made this sort of thing a

608
00:23:00,140 --> 00:23:01,790
lot easier you know I could just I could

609
00:23:01,790 --> 00:23:03,800
just put all of the classrooms together

610
00:23:03,800 --> 00:23:06,620
and and you know or put one classroom

611
00:23:06,620 --> 00:23:08,990
divide each classroom out because that

612
00:23:08,990 --> 00:23:13,120
just made sense and super easy to defend

613
00:23:13,120 --> 00:23:16,580
no physical access so like you know like

614
00:23:16,580 --> 00:23:18,380
controlling physical access was actually

615
00:23:18,380 --> 00:23:20,870
super critical because there was a point

616
00:23:20,870 --> 00:23:25,100
where again it's hotel switches the

617
00:23:25,100 --> 00:23:27,860
hotel is managing the switch is they are

618
00:23:27,860 --> 00:23:30,050
the ones who are setting up the VLANs

619
00:23:30,050 --> 00:23:33,500
and even at blackhat we had an instance

620
00:23:33,500 --> 00:23:36,560
where a trainer saw a random drop coming

621
00:23:36,560 --> 00:23:38,060
out of the wall and I'm not gonna say

622
00:23:38,060 --> 00:23:39,620
what trainer it is but a trainer had a

623
00:23:39,620 --> 00:23:41,030
random drop coming out of the wall and

624
00:23:41,030 --> 00:23:43,370
just like plugged in directly to it and

625
00:23:43,370 --> 00:23:46,070
started issuing DHCP addresses across

626
00:23:46,070 --> 00:23:49,310
that entire VLAN and ultimately you know

627
00:23:49,310 --> 00:23:50,660
I look at that and I go like well like

628
00:23:50,660 --> 00:23:54,740
who just grabs a random ethernet cord at

629
00:23:54,740 --> 00:23:56,300
blackhat and just like shoves it into

630
00:23:56,300 --> 00:23:59,180
their computer like it's generally not

631
00:23:59,180 --> 00:24:01,940
something I would recommend but on the

632
00:24:01,940 --> 00:24:03,440
other side like I should have had that

633
00:24:03,440 --> 00:24:05,240
access controlled like I said shouldn't

634
00:24:05,240 --> 00:24:06,680
have been something I should have been

635
00:24:06,680 --> 00:24:08,990
validating with them that this is what

636
00:24:08,990 --> 00:24:10,040
you know what was going to happen

637
00:24:10,040 --> 00:24:11,810
because what ended up happening is they

638
00:24:11,810 --> 00:24:15,770
started issuing DHCP addresses to every

639
00:24:15,770 --> 00:24:18,160
gateway and every classroom

640
00:24:18,160 --> 00:24:20,620
and it just became a race I mean like

641
00:24:20,620 --> 00:24:22,540
whoever basically got to it first and

642
00:24:22,540 --> 00:24:24,490
they were physically closer than my

643
00:24:24,490 --> 00:24:26,500
gateway to a lot of the machines that I

644
00:24:26,500 --> 00:24:29,050
was that I was trying to send addresses

645
00:24:29,050 --> 00:24:31,210
to and so it took us a while to hunt

646
00:24:31,210 --> 00:24:32,770
that down because we didn't expect that

647
00:24:32,770 --> 00:24:35,620
there wouldn't be a you know a random

648
00:24:35,620 --> 00:24:38,350
person plugging in our router somewhere

649
00:24:38,350 --> 00:24:39,700
at blackhat I mean it just it just

650
00:24:39,700 --> 00:24:41,950
didn't really even enter into the into

651
00:24:41,950 --> 00:24:45,760
the conversation and you know make

652
00:24:45,760 --> 00:24:47,440
things repeatable like automating

653
00:24:47,440 --> 00:24:51,370
everything we could I had I had a moment

654
00:24:51,370 --> 00:24:53,560
where I was standing in front of the

655
00:24:53,560 --> 00:24:56,320
review board at blackhat and the GM was

656
00:24:56,320 --> 00:24:57,820
there talking to them about something

657
00:24:57,820 --> 00:25:00,160
and I was trying to set up you know a

658
00:25:00,160 --> 00:25:03,340
gateway for presenters and I was

659
00:25:03,340 --> 00:25:05,050
exhausted I mean it been like a week

660
00:25:05,050 --> 00:25:07,090
straight of just working making sure

661
00:25:07,090 --> 00:25:08,410
trainings were going briefings were

662
00:25:08,410 --> 00:25:10,180
kicking off everything was just kind of

663
00:25:10,180 --> 00:25:12,790
you know everything was kind of a blur

664
00:25:12,790 --> 00:25:15,370
at that point and I was trying to

665
00:25:15,370 --> 00:25:17,380
configure this thing and I just couldn't

666
00:25:17,380 --> 00:25:18,790
get it to work and like I'm looking down

667
00:25:18,790 --> 00:25:21,310
at like you know 15 people who are like

668
00:25:21,310 --> 00:25:22,600
you know some of the best in the world

669
00:25:22,600 --> 00:25:24,700
just like you know talking and I stand

670
00:25:24,700 --> 00:25:26,050
up and I brushed the microphone and

671
00:25:26,050 --> 00:25:28,000
everybody stares at me and I'm just like

672
00:25:28,000 --> 00:25:29,950
oh my god I can't get this working like

673
00:25:29,950 --> 00:25:32,800
I it's just like just let me let me I

674
00:25:32,800 --> 00:25:34,660
wish I was anywhere but here right now

675
00:25:34,660 --> 00:25:37,180
because like this is basic I'm what I

676
00:25:37,180 --> 00:25:38,980
learned what I figured out later that

677
00:25:38,980 --> 00:25:40,330
I've been forgetting to do was set the

678
00:25:40,330 --> 00:25:41,770
default gateway and you know this is why

679
00:25:41,770 --> 00:25:43,480
BSD right it doesn't do anything unless

680
00:25:43,480 --> 00:25:45,790
you tell it to it's a blessing and a

681
00:25:45,790 --> 00:25:48,610
curse but so what I took away from that

682
00:25:48,610 --> 00:25:49,780
though was that I need it's like

683
00:25:49,780 --> 00:25:51,670
automate stuff like there was no there

684
00:25:51,670 --> 00:25:53,260
was no place where I could just be like

685
00:25:53,260 --> 00:25:54,790
oh I'm just gonna deal with that

686
00:25:54,790 --> 00:25:56,860
on the fly when it happens in the moment

687
00:25:56,860 --> 00:25:58,330
because there's no guarantee that I

688
00:25:58,330 --> 00:26:00,040
would be available there's no guarantee

689
00:26:00,040 --> 00:26:02,320
that you know any of this any of the

690
00:26:02,320 --> 00:26:03,280
things that I had taken for granted

691
00:26:03,280 --> 00:26:04,840
would would be there like I better

692
00:26:04,840 --> 00:26:06,310
automate this and I better make sure it

693
00:26:06,310 --> 00:26:06,730
happens

694
00:26:06,730 --> 00:26:09,340
so to implement all this stuff we did

695
00:26:09,340 --> 00:26:11,890
you know no services right like it was

696
00:26:11,890 --> 00:26:14,080
acceptable and we still achieve the

697
00:26:14,080 --> 00:26:15,610
goals we needed to achieve but doing

698
00:26:15,610 --> 00:26:18,970
that it's great dropped it like it was

699
00:26:18,970 --> 00:26:21,640
hot 94% of our traffic was dropped at

700
00:26:21,640 --> 00:26:22,960
the gateway so people were doing all

701
00:26:22,960 --> 00:26:24,910
kinds of weird stuff that would make it

702
00:26:24,910 --> 00:26:26,830
out of their classroom into the gateway

703
00:26:26,830 --> 00:26:28,120
and then get dropped and that's also

704
00:26:28,120 --> 00:26:30,310
something that's super critical in

705
00:26:30,310 --> 00:26:32,410
terms of making sure that when you're

706
00:26:32,410 --> 00:26:33,670
feeding all of your network traffic

707
00:26:33,670 --> 00:26:35,950
through a 10100 USB adapter that you

708
00:26:35,950 --> 00:26:38,080
aren't sending anything unnecessary out

709
00:26:38,080 --> 00:26:40,360
through that gateway because you have a

710
00:26:40,360 --> 00:26:42,010
very limited amount of bandwidth and we

711
00:26:42,010 --> 00:26:44,080
had we had sixty megabits of available

712
00:26:44,080 --> 00:26:46,060
traffic the the first year that I was

713
00:26:46,060 --> 00:26:48,340
there and in 2012 so it's like there

714
00:26:48,340 --> 00:26:49,900
wasn't a lot of traffic available and we

715
00:26:49,900 --> 00:26:51,160
had to make sure that only legitimate

716
00:26:51,160 --> 00:26:53,370
traffic made it out

717
00:26:53,370 --> 00:26:56,530
smart segments again like I set it up

718
00:26:56,530 --> 00:26:58,060
like that because I wanted to make sure

719
00:26:58,060 --> 00:27:00,010
that if somebody managed to break the

720
00:27:00,010 --> 00:27:02,620
network in a classroom the classroom

721
00:27:02,620 --> 00:27:04,570
would yell at them for me or the trainer

722
00:27:04,570 --> 00:27:06,430
would get upset at them for me and I

723
00:27:06,430 --> 00:27:08,920
didn't have to go in and regulate every

724
00:27:08,920 --> 00:27:11,110
time somebody tried to do something you

725
00:27:11,110 --> 00:27:14,680
know weird basically and then obviously

726
00:27:14,680 --> 00:27:16,810
you know the lessons learned from the

727
00:27:16,810 --> 00:27:18,520
controlling physical access protect

728
00:27:18,520 --> 00:27:20,920
reports know where they are know who can

729
00:27:20,920 --> 00:27:22,990
configure them and make sure that you

730
00:27:22,990 --> 00:27:24,460
don't end up in that situation and then

731
00:27:24,460 --> 00:27:27,820
in automation we had Europe and Europe

732
00:27:27,820 --> 00:27:31,690
is a tool that I've sort of revised over

733
00:27:31,690 --> 00:27:34,720
the years and it's designed to help you

734
00:27:34,720 --> 00:27:37,810
run networks like like like black hats

735
00:27:37,810 --> 00:27:39,250
Network basically it's a really simple

736
00:27:39,250 --> 00:27:42,040
tool talking to other people who have

737
00:27:42,040 --> 00:27:44,650
run conferences basically everybody has

738
00:27:44,650 --> 00:27:46,030
reinvented this tool at some point

739
00:27:46,030 --> 00:27:47,950
anybody who runs a conference anybody

740
00:27:47,950 --> 00:27:49,120
who has to deploy a bunch of machines

741
00:27:49,120 --> 00:27:50,710
eventually write something really simple

742
00:27:50,710 --> 00:27:52,810
that serves their needs and the idea

743
00:27:52,810 --> 00:27:54,280
here was to be like hey like here's

744
00:27:54,280 --> 00:27:55,930
something that we can all use that has

745
00:27:55,930 --> 00:27:58,390
sort of a broad applicability it's

746
00:27:58,390 --> 00:28:00,640
really simple it just pushes preset

747
00:28:00,640 --> 00:28:02,530
configurations over SSH so you can run

748
00:28:02,530 --> 00:28:04,510
us you know you have a config file it

749
00:28:04,510 --> 00:28:09,070
contains templates for like DHCP PF any

750
00:28:09,070 --> 00:28:11,050
other config you might need it allows

751
00:28:11,050 --> 00:28:13,810
you to do a simple substitution in that

752
00:28:13,810 --> 00:28:15,520
configs you can define like an what your

753
00:28:15,520 --> 00:28:18,430
internal what your internal interface is

754
00:28:18,430 --> 00:28:20,200
and what your external interface is and

755
00:28:20,200 --> 00:28:21,700
then push out a config accordingly and

756
00:28:21,700 --> 00:28:23,350
then you can run whatever commands you

757
00:28:23,350 --> 00:28:25,120
might need to start services restart the

758
00:28:25,120 --> 00:28:27,850
box whatever after the fact and it's

759
00:28:27,850 --> 00:28:29,710
like brain-dead operation it's super

760
00:28:29,710 --> 00:28:31,990
simple because again no sleep is

761
00:28:31,990 --> 00:28:33,100
standard and you don't want to screw it

762
00:28:33,100 --> 00:28:34,070
up in front of every

763
00:28:34,070 --> 00:28:36,850
learn from learn from my mistakes and

764
00:28:36,850 --> 00:28:39,380
this is how you use it like you clone

765
00:28:39,380 --> 00:28:42,800
the repo and then you just run that with

766
00:28:42,800 --> 00:28:44,480
your config file location set and it

767
00:28:44,480 --> 00:28:46,370
just just kind of works it's really nice

768
00:28:46,370 --> 00:28:48,350
it's really really reliable and that's

769
00:28:48,350 --> 00:28:50,660
it's like hilariously small I mean it

770
00:28:50,660 --> 00:28:53,120
the idea here was that in the long run

771
00:28:53,120 --> 00:28:55,250
my goal was to be able to have something

772
00:28:55,250 --> 00:28:57,680
where I could take a USB stick with just

773
00:28:57,680 --> 00:29:00,590
the information the relevant configs and

774
00:29:00,590 --> 00:29:02,450
the tool on it and I could deploy in an

775
00:29:02,450 --> 00:29:04,370
automated fashion the entire network

776
00:29:04,370 --> 00:29:06,530
from one box from like any box that I

777
00:29:06,530 --> 00:29:08,660
could basically plug a USB into and

778
00:29:08,660 --> 00:29:10,970
could you know run Python on and it's

779
00:29:10,970 --> 00:29:13,310
not there yet but someday hopefully I'll

780
00:29:13,310 --> 00:29:15,020
have the need to extend it to there and

781
00:29:15,020 --> 00:29:17,330
and you know we can automate and build

782
00:29:17,330 --> 00:29:21,740
on that so the end results because

783
00:29:21,740 --> 00:29:23,090
outcomes are important is that you know

784
00:29:23,090 --> 00:29:24,920
generally people are actually pretty

785
00:29:24,920 --> 00:29:26,720
good you know what went through all this

786
00:29:26,720 --> 00:29:28,790
expected a lot of really bad behavior on

787
00:29:28,790 --> 00:29:31,550
the network and just didn't see it the

788
00:29:31,550 --> 00:29:32,960
networks were designed to be secure and

789
00:29:32,960 --> 00:29:33,710
unfunctional

790
00:29:33,710 --> 00:29:36,230
very handy like the the idea of failing

791
00:29:36,230 --> 00:29:38,060
closed is really important and I think

792
00:29:38,060 --> 00:29:40,100
that you know one of those things that

793
00:29:40,100 --> 00:29:41,540
you can do where when you start to

794
00:29:41,540 --> 00:29:43,850
receive weird traffic or when things

795
00:29:43,850 --> 00:29:45,650
start to break if they fail closed

796
00:29:45,650 --> 00:29:46,970
you're never going to have to worry

797
00:29:46,970 --> 00:29:49,520
about the repercussions of that except

798
00:29:49,520 --> 00:29:51,200
in terms of that loss of functionality

799
00:29:51,200 --> 00:29:52,370
you won't have to worry about somebody

800
00:29:52,370 --> 00:29:53,690
using that as an entry points your

801
00:29:53,690 --> 00:29:55,460
network and the only big thing is that

802
00:29:55,460 --> 00:29:56,960
technical failures had a far more

803
00:29:56,960 --> 00:29:59,120
significant impact than any of the

804
00:29:59,120 --> 00:30:00,980
security failures I was concerned about

805
00:30:00,980 --> 00:30:03,170
I mean the biggest technical problem we

806
00:30:03,170 --> 00:30:05,210
had was state table exhaustion there's a

807
00:30:05,210 --> 00:30:08,510
limited number of states that OpenBSD

808
00:30:08,510 --> 00:30:10,940
supports by default it's it's ten

809
00:30:10,940 --> 00:30:12,680
thousand now you can change that through

810
00:30:12,680 --> 00:30:15,620
a config setting in the firewall but I

811
00:30:15,620 --> 00:30:16,580
didn't know that

812
00:30:16,580 --> 00:30:19,310
and we actually I'm relatively certain

813
00:30:19,310 --> 00:30:20,750
we hit this problem multiple years

814
00:30:20,750 --> 00:30:22,010
running because what would what would

815
00:30:22,010 --> 00:30:23,660
happen is the first year everything was

816
00:30:23,660 --> 00:30:25,910
very reliable but we had a fewer number

817
00:30:25,910 --> 00:30:28,250
of wired connections than what we did in

818
00:30:28,250 --> 00:30:31,970
in 2013 and in 2013 our network would

819
00:30:31,970 --> 00:30:34,400
just randomly die and there was no there

820
00:30:34,400 --> 00:30:36,290
was no sort of rhyme or reason to it it

821
00:30:36,290 --> 00:30:37,760
would just like all of the sudden like

822
00:30:37,760 --> 00:30:39,080
usually in the afternoon around 2:00

823
00:30:39,080 --> 00:30:42,230
p.m. network would just completely stop

824
00:30:42,230 --> 00:30:44,890
working and that was that

825
00:30:44,890 --> 00:30:47,110
is a problem it was really hard to

826
00:30:47,110 --> 00:30:48,970
diagnose though because every time at

827
00:30:48,970 --> 00:30:50,890
6:00 p.m. when I had the chance like sit

828
00:30:50,890 --> 00:30:52,870
down and actually test things it was

829
00:30:52,870 --> 00:30:55,150
fine and it all kinds of strange

830
00:30:55,150 --> 00:30:57,370
behavior would pop up like you could do

831
00:30:57,370 --> 00:30:59,380
an outbound ping to something I mean you

832
00:30:59,380 --> 00:31:01,120
could do a thousand things a second and

833
00:31:01,120 --> 00:31:03,220
it would work perfectly and then you

834
00:31:03,220 --> 00:31:04,930
could take another box sitting right

835
00:31:04,930 --> 00:31:06,370
next to it and do the same thing and

836
00:31:06,370 --> 00:31:07,930
while one was working perfectly the

837
00:31:07,930 --> 00:31:10,390
other one would fail completely it just

838
00:31:10,390 --> 00:31:13,830
would just say like no router host and

839
00:31:13,830 --> 00:31:16,000
you could also get really weird behavior

840
00:31:16,000 --> 00:31:17,650
out of traceroute like you could get it

841
00:31:17,650 --> 00:31:19,120
would it would hit the gateway twice for

842
00:31:19,120 --> 00:31:20,260
some reason you'd be like why am I

843
00:31:20,260 --> 00:31:23,380
seeing the same packet from you know it

844
00:31:23,380 --> 00:31:24,820
would tell you it had hit the gateway

845
00:31:24,820 --> 00:31:26,380
and then the next hop would be the

846
00:31:26,380 --> 00:31:28,870
gateway again just making no sense at

847
00:31:28,870 --> 00:31:32,170
all and it actually wasn't until one of

848
00:31:32,170 --> 00:31:34,540
our volunteers who ran a large-scale

849
00:31:34,540 --> 00:31:36,400
corporate network realized that he had

850
00:31:36,400 --> 00:31:38,230
seen similar behavior in the past and

851
00:31:38,230 --> 00:31:41,290
when he had seen that behavior it had

852
00:31:41,290 --> 00:31:43,060
been because his security teams were

853
00:31:43,060 --> 00:31:45,520
doing scans of the larger network like

854
00:31:45,520 --> 00:31:47,110
they were doing outbound security

855
00:31:47,110 --> 00:31:49,270
scanning and it was filling up the state

856
00:31:49,270 --> 00:31:52,060
tables on his firewalls and and he

857
00:31:52,060 --> 00:31:53,980
basically like you know he nearly got

858
00:31:53,980 --> 00:31:55,420
fired over that cuz it took him two

859
00:31:55,420 --> 00:31:57,610
months to figure it out and so it was

860
00:31:57,610 --> 00:31:59,260
his experience his pre-existing

861
00:31:59,260 --> 00:32:00,460
experience with that that actually

862
00:32:00,460 --> 00:32:02,350
allowed us to solve that problem because

863
00:32:02,350 --> 00:32:04,330
again it's not something that you

864
00:32:04,330 --> 00:32:07,150
entirely expect it makes sense after the

865
00:32:07,150 --> 00:32:08,740
fact you know it makes sense looking at

866
00:32:08,740 --> 00:32:10,450
it you're moving a lot of traffic you're

867
00:32:10,450 --> 00:32:11,440
moving a lot of really lightweight

868
00:32:11,440 --> 00:32:14,200
traffic and well your bandwidth isn't an

869
00:32:14,200 --> 00:32:15,940
issue your state your supporting

870
00:32:15,940 --> 00:32:20,050
infrastructure might be and so again

871
00:32:20,050 --> 00:32:21,700
like that it's really it was really it's

872
00:32:21,700 --> 00:32:23,350
really a technical problem it's really

873
00:32:23,350 --> 00:32:25,090
the biggest concerns we had at blackhat

874
00:32:25,090 --> 00:32:27,010
because we were able to sort of use

875
00:32:27,010 --> 00:32:29,050
these simple designs was was really

876
00:32:29,050 --> 00:32:34,540
technical problems and so but you know

877
00:32:34,540 --> 00:32:36,670
that's black hat black hat is cool I

878
00:32:36,670 --> 00:32:37,960
think there's a lot of really valuable

879
00:32:37,960 --> 00:32:39,550
lessons to take away from all of that

880
00:32:39,550 --> 00:32:42,190
though and I would say that you know

881
00:32:42,190 --> 00:32:43,750
let's talk about sort of the meta

882
00:32:43,750 --> 00:32:44,890
concerns let's talk about the things

883
00:32:44,890 --> 00:32:46,180
that I've taken away from there and I've

884
00:32:46,180 --> 00:32:48,040
carried into my into my consulting

885
00:32:48,040 --> 00:32:51,190
career after the fact and so the first

886
00:32:51,190 --> 00:32:52,360
thing is that security is never a

887
00:32:52,360 --> 00:32:55,240
priority like it's it's never going to

888
00:32:55,240 --> 00:32:57,040
be a priority for people we need to

889
00:32:57,040 --> 00:32:57,670
learn how to look

890
00:32:57,670 --> 00:32:59,620
with that we need to learn how to sort

891
00:32:59,620 --> 00:33:01,330
of make that more relevant it's like I

892
00:33:01,330 --> 00:33:03,190
completely failed at this I completely

893
00:33:03,190 --> 00:33:04,690
failed at communicating these things

894
00:33:04,690 --> 00:33:06,670
before the trainings failed it's like

895
00:33:06,670 --> 00:33:09,670
the trainings failed and then people

896
00:33:09,670 --> 00:33:12,460
demanded refunds and then there was

897
00:33:12,460 --> 00:33:13,810
communication about getting the

898
00:33:13,810 --> 00:33:15,720
network's fixed and you know ultimately

899
00:33:15,720 --> 00:33:18,790
why why work why weren't we able to

900
00:33:18,790 --> 00:33:20,740
communicate about that before it

901
00:33:20,740 --> 00:33:22,300
happened like before it got there and

902
00:33:22,300 --> 00:33:23,830
it's because we didn't really understand

903
00:33:23,830 --> 00:33:27,850
how to justify it to them there was the

904
00:33:27,850 --> 00:33:31,270
jammed lock the jammed lock is a good

905
00:33:31,270 --> 00:33:33,640
one I think because it illustrates that

906
00:33:33,640 --> 00:33:34,690
there's this piece of common knowledge

907
00:33:34,690 --> 00:33:36,310
that we have of like hey you're not

908
00:33:36,310 --> 00:33:38,170
should be physically controlled and we

909
00:33:38,170 --> 00:33:39,640
just kind of accept that as like a

910
00:33:39,640 --> 00:33:41,440
default like you know I'm sure at some

911
00:33:41,440 --> 00:33:43,750
point in the conversation around this we

912
00:33:43,750 --> 00:33:45,310
talked about how like oh yeah like you

913
00:33:45,310 --> 00:33:47,350
know we need a knockin needs to lock but

914
00:33:47,350 --> 00:33:49,600
really that jammed lock wouldn't have

915
00:33:49,600 --> 00:33:51,700
stopped any reasonable attacker I mean

916
00:33:51,700 --> 00:33:52,990
especially considering that you could

917
00:33:52,990 --> 00:33:55,570
just like you know push reasonably hard

918
00:33:55,570 --> 00:33:57,300
on the wall and it would just collapse

919
00:33:57,300 --> 00:34:00,280
so it would have stopped a nobody it

920
00:34:00,280 --> 00:34:02,710
stopped me from gaining access to my own

921
00:34:02,710 --> 00:34:05,350
devices sometimes like what was the

922
00:34:05,350 --> 00:34:06,940
value of it I'm not saying that maybe

923
00:34:06,940 --> 00:34:08,260
the room should have been locked but I

924
00:34:08,260 --> 00:34:10,540
just accepted that unthinkingly I didn't

925
00:34:10,540 --> 00:34:12,280
I didn't look at the risks of it I

926
00:34:12,280 --> 00:34:13,810
didn't look at like hey are there other

927
00:34:13,810 --> 00:34:15,790
people around is there other physical

928
00:34:15,790 --> 00:34:18,010
control that might make a lock on that

929
00:34:18,010 --> 00:34:20,260
door irrelevant or just you know

930
00:34:20,260 --> 00:34:24,790
pointless security overhead another good

931
00:34:24,790 --> 00:34:27,130
lesson from blackhat was that there's a

932
00:34:27,130 --> 00:34:29,739
lot of advantages like I there are

933
00:34:29,739 --> 00:34:31,540
advantages in everybody's network their

934
00:34:31,540 --> 00:34:33,340
advantages and everybody's configuration

935
00:34:33,340 --> 00:34:36,340
and like where are those advantages out

936
00:34:36,340 --> 00:34:38,080
like I got to take advantage of

937
00:34:38,080 --> 00:34:39,909
segmentation in a way that most people

938
00:34:39,909 --> 00:34:41,918
aren't able to within their networks and

939
00:34:41,918 --> 00:34:43,719
I know that there are advantages in in

940
00:34:43,719 --> 00:34:45,760
networks that can be found or in people

941
00:34:45,760 --> 00:34:48,389
that are responsible for security and

942
00:34:48,389 --> 00:34:50,710
finding those and taking advantage of

943
00:34:50,710 --> 00:34:52,659
them is like super critical to making

944
00:34:52,659 --> 00:34:55,120
sure that we actually can can implement

945
00:34:55,120 --> 00:34:59,260
functional security and I mean a large

946
00:34:59,260 --> 00:35:00,700
part of my success as well was due to

947
00:35:00,700 --> 00:35:02,770
the fact that I I knew what lived on my

948
00:35:02,770 --> 00:35:04,720
network and again blackhat clearly

949
00:35:04,720 --> 00:35:07,360
defined it's a good case study for this

950
00:35:07,360 --> 00:35:08,620
sort of thing where you can say like

951
00:35:08,620 --> 00:35:09,940
okay we have this strongly defined

952
00:35:09,940 --> 00:35:10,870
business case

953
00:35:10,870 --> 00:35:13,210
this is how it was done and and how can

954
00:35:13,210 --> 00:35:14,950
we how can we extrapolate from this to

955
00:35:14,950 --> 00:35:17,650
be more effective and the other thing

956
00:35:17,650 --> 00:35:19,660
here too is is like really again the

957
00:35:19,660 --> 00:35:21,970
company UBM only cares about selling

958
00:35:21,970 --> 00:35:23,920
tickets so anything you know in

959
00:35:23,920 --> 00:35:25,630
retrospect anything that I should have

960
00:35:25,630 --> 00:35:27,940
done with them should have been strongly

961
00:35:27,940 --> 00:35:30,130
linked to an outcome of how is this

962
00:35:30,130 --> 00:35:32,260
going to stop them from selling tickets

963
00:35:32,260 --> 00:35:34,090
how is this going to stop them from

964
00:35:34,090 --> 00:35:36,640
being effective in their trainings or in

965
00:35:36,640 --> 00:35:38,320
achieving their business goals I think

966
00:35:38,320 --> 00:35:39,400
if I had done that I would have had a

967
00:35:39,400 --> 00:35:41,590
much easier time getting more support

968
00:35:41,590 --> 00:35:44,260
for more Hardware getting more support

969
00:35:44,260 --> 00:35:46,330
for more networking equipment and money

970
00:35:46,330 --> 00:35:47,800
spent upfront and actually you know

971
00:35:47,800 --> 00:35:49,030
since I've since I've gone they've

972
00:35:49,030 --> 00:35:51,040
actually been able to communicate that

973
00:35:51,040 --> 00:35:53,110
much more effectively now and and the

974
00:35:53,110 --> 00:35:54,580
infrastructure there is much more

975
00:35:54,580 --> 00:35:56,710
evolved than then I was able to do

976
00:35:56,710 --> 00:35:58,600
myself because I just didn't understand

977
00:35:58,600 --> 00:35:59,950
how to ask for these things in the right

978
00:35:59,950 --> 00:36:03,730
way so let's talk about building

979
00:36:03,730 --> 00:36:05,530
security into operations because I mean

980
00:36:05,530 --> 00:36:07,000
I think you know it's it's been pretty

981
00:36:07,000 --> 00:36:08,860
clearly established that even at

982
00:36:08,860 --> 00:36:10,570
blackhat security was never a priority

983
00:36:10,570 --> 00:36:12,340
number one so part of it is really

984
00:36:12,340 --> 00:36:14,500
coming into you know like how do we how

985
00:36:14,500 --> 00:36:15,910
do we make this the default how do we

986
00:36:15,910 --> 00:36:17,770
make it so that people just are secure

987
00:36:17,770 --> 00:36:20,920
and I've discovered especially in in the

988
00:36:20,920 --> 00:36:22,210
consulting space and especially in

989
00:36:22,210 --> 00:36:23,530
trying to help companies have more

990
00:36:23,530 --> 00:36:25,900
effective defense a large part of it is

991
00:36:25,900 --> 00:36:27,490
is just about listening to people you

992
00:36:27,490 --> 00:36:29,410
know a lot of those people that I talked

993
00:36:29,410 --> 00:36:30,790
to her that I interact with on a regular

994
00:36:30,790 --> 00:36:33,220
basis know a lot about their networks

995
00:36:33,220 --> 00:36:35,080
and far more than I can ever learn in

996
00:36:35,080 --> 00:36:36,580
the limited time that I have with them

997
00:36:36,580 --> 00:36:38,530
so listening to them is is super

998
00:36:38,530 --> 00:36:40,270
critical and then understanding what

999
00:36:40,270 --> 00:36:42,460
they need from listening to them because

1000
00:36:42,460 --> 00:36:44,170
sometimes they'll tell you what they

1001
00:36:44,170 --> 00:36:45,730
think they need but it's not actually

1002
00:36:45,730 --> 00:36:47,320
what they need and if you understand

1003
00:36:47,320 --> 00:36:49,210
what they need then you can define a way

1004
00:36:49,210 --> 00:36:51,280
to do that securely and that can subvert

1005
00:36:51,280 --> 00:36:53,260
a lot of the security problems that we

1006
00:36:53,260 --> 00:36:54,780
run into in terms of getting

1007
00:36:54,780 --> 00:36:57,700
implementation creating security falls

1008
00:36:57,700 --> 00:37:02,350
like making making security the making

1009
00:37:02,350 --> 00:37:03,970
the security choices for them where you

1010
00:37:03,970 --> 00:37:06,070
can is also really critical like frankly

1011
00:37:06,070 --> 00:37:08,050
I don't I don't want to determine what

1012
00:37:08,050 --> 00:37:10,990
what cipher my HTTP connection is using

1013
00:37:10,990 --> 00:37:13,360
I trust somebody else to take advantage

1014
00:37:13,360 --> 00:37:15,160
of that and we should look at the places

1015
00:37:15,160 --> 00:37:16,900
where we are experts in the space and we

1016
00:37:16,900 --> 00:37:19,180
should make those defaults for people we

1017
00:37:19,180 --> 00:37:20,860
make those decisions because it's not

1018
00:37:20,860 --> 00:37:22,240
going to affect them in a meaningful way

1019
00:37:22,240 --> 00:37:23,430
but it could really

1020
00:37:23,430 --> 00:37:26,010
grade their security and then education

1021
00:37:26,010 --> 00:37:27,750
I mean you know when you have to when

1022
00:37:27,750 --> 00:37:28,800
you have to make somebody's life more

1023
00:37:28,800 --> 00:37:30,900
difficult at least have you know take

1024
00:37:30,900 --> 00:37:32,760
the time and explain to them why you're

1025
00:37:32,760 --> 00:37:34,380
doing it because you may discover that

1026
00:37:34,380 --> 00:37:36,119
again this goes back to listening to

1027
00:37:36,119 --> 00:37:37,290
users like you may discover there's a

1028
00:37:37,290 --> 00:37:39,720
reason that they're doing things a

1029
00:37:39,720 --> 00:37:40,829
certain way and maybe you can take

1030
00:37:40,829 --> 00:37:42,480
advantage of that and and in that

1031
00:37:42,480 --> 00:37:44,040
education process to at least start

1032
00:37:44,040 --> 00:37:45,809
becoming an ally to you when they

1033
00:37:45,809 --> 00:37:46,980
understand that you're not just gonna

1034
00:37:46,980 --> 00:37:48,720
like judge them for using a simple

1035
00:37:48,720 --> 00:37:50,339
password or something like that like

1036
00:37:50,339 --> 00:37:52,260
they'll actually help you and in a lot

1037
00:37:52,260 --> 00:37:54,619
of cases we've ended up with users

1038
00:37:54,619 --> 00:37:56,880
reporting phishing attacks in a way that

1039
00:37:56,880 --> 00:37:58,950
allowed us to discover other compromises

1040
00:37:58,950 --> 00:38:00,390
within their network and that wouldn't

1041
00:38:00,390 --> 00:38:01,829
never happen if they didn't trust the

1042
00:38:01,829 --> 00:38:03,540
security team if they didn't say like oh

1043
00:38:03,540 --> 00:38:05,099
my god I screwed this up but I'm still

1044
00:38:05,099 --> 00:38:07,200
gonna tell the security team because I

1045
00:38:07,200 --> 00:38:09,170
trust that they're there to help me and

1046
00:38:09,170 --> 00:38:12,059
then linking security to outcomes I mean

1047
00:38:12,059 --> 00:38:13,950
again this is sort of what I was unable

1048
00:38:13,950 --> 00:38:16,230
to do effectively at blackhat was like

1049
00:38:16,230 --> 00:38:19,200
show these consequences overall and be

1050
00:38:19,200 --> 00:38:21,690
like this is what's gonna happen if the

1051
00:38:21,690 --> 00:38:23,309
network goes down you know it's like I

1052
00:38:23,309 --> 00:38:24,540
don't need to spend a lot of money but

1053
00:38:24,540 --> 00:38:26,099
if the network does go down your

1054
00:38:26,099 --> 00:38:27,119
trainers are gonna be really unhappy

1055
00:38:27,119 --> 00:38:28,589
your students are gonna be really

1056
00:38:28,589 --> 00:38:30,180
unhappy your presenters are gonna be

1057
00:38:30,180 --> 00:38:31,950
really unhappy and that's going to cause

1058
00:38:31,950 --> 00:38:35,400
like some kind of profit loss to you and

1059
00:38:35,400 --> 00:38:36,869
that's something that's that's you know

1060
00:38:36,869 --> 00:38:38,880
good to be able to strongly link and

1061
00:38:38,880 --> 00:38:41,990
justify and then you know priority

1062
00:38:41,990 --> 00:38:44,250
what's like figure out what actually

1063
00:38:44,250 --> 00:38:45,540
makes a difference I mean there's

1064
00:38:45,540 --> 00:38:47,400
there's a lot of situations where it

1065
00:38:47,400 --> 00:38:49,440
seems like we end up working on

1066
00:38:49,440 --> 00:38:52,950
something because it seems like it seems

1067
00:38:52,950 --> 00:38:54,750
like the biggest concern like I spent a

1068
00:38:54,750 --> 00:38:56,880
lot of time really concerned about the

1069
00:38:56,880 --> 00:38:59,790
security problems at blackhat only to

1070
00:38:59,790 --> 00:39:00,930
realize after the fact that I should

1071
00:39:00,930 --> 00:39:02,220
have worried a lot more about the

1072
00:39:02,220 --> 00:39:04,349
technical problems because the technical

1073
00:39:04,349 --> 00:39:05,880
problems actually made a difference in

1074
00:39:05,880 --> 00:39:07,260
that environment whereas the security

1075
00:39:07,260 --> 00:39:12,270
ones really didn't and so just another

1076
00:39:12,270 --> 00:39:14,670
level sort of above this as well as like

1077
00:39:14,670 --> 00:39:16,349
you know this is a lot of the stuff that

1078
00:39:16,349 --> 00:39:18,240
we've already seen people talking about

1079
00:39:18,240 --> 00:39:19,559
here you know I'm glad to be able to

1080
00:39:19,559 --> 00:39:21,550
kind of piggyback on top of that

1081
00:39:21,550 --> 00:39:23,950
you know but woods talking about I am

1082
00:39:23,950 --> 00:39:26,800
the cavalry and Adrienne talking about

1083
00:39:26,800 --> 00:39:28,810
you know the the breeches and all these

1084
00:39:28,810 --> 00:39:31,210
other things like we kind of need to get

1085
00:39:31,210 --> 00:39:33,010
out of our comfort zone and we need to

1086
00:39:33,010 --> 00:39:36,430
we need to try and and and make more of

1087
00:39:36,430 --> 00:39:38,620
an impact in ways that aren't you know

1088
00:39:38,620 --> 00:39:40,780
aren't what we've been doing in the past

1089
00:39:40,780 --> 00:39:42,640
because it hasn't really been working

1090
00:39:42,640 --> 00:39:44,080
out all that well it's like we're still

1091
00:39:44,080 --> 00:39:45,430
struggling with a lot of those same

1092
00:39:45,430 --> 00:39:47,860
problems that we've had historically and

1093
00:39:47,860 --> 00:39:49,300
I think a big part of that is is you

1094
00:39:49,300 --> 00:39:50,680
know learning to market ourselves it's

1095
00:39:50,680 --> 00:39:51,820
like learning to be like hey you know

1096
00:39:51,820 --> 00:39:54,520
where we are here to help you guys out

1097
00:39:54,520 --> 00:39:56,230
we are here to help educate you we're

1098
00:39:56,230 --> 00:39:59,110
here to help make your interactions more

1099
00:39:59,110 --> 00:40:00,610
secure it's like you know Adrienne's

1100
00:40:00,610 --> 00:40:03,760
talk about or you know conversation with

1101
00:40:03,760 --> 00:40:05,230
the London cab driver is a perfect

1102
00:40:05,230 --> 00:40:06,520
example of that like when people are

1103
00:40:06,520 --> 00:40:07,660
asking you for that sort of thing

1104
00:40:07,660 --> 00:40:09,220
they're asking you because like they're

1105
00:40:09,220 --> 00:40:11,230
concerned and that's an opportunity for

1106
00:40:11,230 --> 00:40:13,930
us to start of reach a now we're

1107
00:40:13,930 --> 00:40:15,340
perceived in the eyes of the general

1108
00:40:15,340 --> 00:40:16,810
public in a way that allows us to be

1109
00:40:16,810 --> 00:40:18,700
more effective in a way that allows us

1110
00:40:18,700 --> 00:40:21,220
to get them on our side and allows us to

1111
00:40:21,220 --> 00:40:24,130
use them as resources to help change the

1112
00:40:24,130 --> 00:40:25,840
government process the political process

1113
00:40:25,840 --> 00:40:29,830
and things of that nature um this one's

1114
00:40:29,830 --> 00:40:31,420
this one's one that I find particularly

1115
00:40:31,420 --> 00:40:33,190
interesting some kind of a language nerd

1116
00:40:33,190 --> 00:40:36,940
and if you look at the Apple PR release

1117
00:40:36,940 --> 00:40:40,480
the PR release they say they their

1118
00:40:40,480 --> 00:40:42,400
services weren't breached their user

1119
00:40:42,400 --> 00:40:46,000
accounts were and I'm not gonna say that

1120
00:40:46,000 --> 00:40:48,070
that's like an unacceptable use of the

1121
00:40:48,070 --> 00:40:50,260
word breach but I think it shouldn't be

1122
00:40:50,260 --> 00:40:52,120
a thing that companies can say where

1123
00:40:52,120 --> 00:40:53,650
they're like yeah we had major security

1124
00:40:53,650 --> 00:40:55,240
flaws and our information that was on

1125
00:40:55,240 --> 00:40:57,580
the inside ended up on the outside but

1126
00:40:57,580 --> 00:40:59,260
it wasn't our fault and we were never

1127
00:40:59,260 --> 00:41:01,690
actually breached what was breached is

1128
00:41:01,690 --> 00:41:03,880
the user accounts like to me that sort

1129
00:41:03,880 --> 00:41:09,370
of it's it's a dishonest analogy to say

1130
00:41:09,370 --> 00:41:11,470
that your users are the ones who are

1131
00:41:11,470 --> 00:41:13,840
responsible for your defaults that put

1132
00:41:13,840 --> 00:41:16,060
their data into your services with

1133
00:41:16,060 --> 00:41:18,100
minimal user interaction like if that's

1134
00:41:18,100 --> 00:41:20,020
not clear if we can't have a clear

1135
00:41:20,020 --> 00:41:22,270
conversation around what a breach

1136
00:41:22,270 --> 00:41:24,820
actually means and if non-technical

1137
00:41:24,820 --> 00:41:26,770
people can't understand that difference

1138
00:41:26,770 --> 00:41:28,810
then we have a like a massive uphill

1139
00:41:28,810 --> 00:41:31,300
battle to fight because a large part of

1140
00:41:31,300 --> 00:41:32,480
getting functional change

1141
00:41:32,480 --> 00:41:33,980
made is going to rely on being able to

1142
00:41:33,980 --> 00:41:38,180
agree on the words that we use and this

1143
00:41:38,180 --> 00:41:40,040
loops back to the to the lock thing it's

1144
00:41:40,040 --> 00:41:41,600
like the common knowledge that I had of

1145
00:41:41,600 --> 00:41:43,040
like hey you know like I'm gonna lock

1146
00:41:43,040 --> 00:41:44,510
the I'm gonna lock the knock because

1147
00:41:44,510 --> 00:41:48,320
that's what is done it's it's not always

1148
00:41:48,320 --> 00:41:49,850
right in fact a lot of the times it's

1149
00:41:49,850 --> 00:41:52,310
just flat-out wrong it's just guarantee

1150
00:41:52,310 --> 00:41:53,780
that there is a place there is

1151
00:41:53,780 --> 00:41:56,030
absolutely a place where you need to

1152
00:41:56,030 --> 00:41:58,070
have that kind of physical security over

1153
00:41:58,070 --> 00:42:00,320
your devices but we shouldn't just take

1154
00:42:00,320 --> 00:42:01,640
that as the default we shouldn't just

1155
00:42:01,640 --> 00:42:03,020
take that for granted we should look at

1156
00:42:03,020 --> 00:42:05,000
the situation we say what risks is is

1157
00:42:05,000 --> 00:42:07,250
actually mitigating and how effective is

1158
00:42:07,250 --> 00:42:08,930
this control actually going to be I mean

1159
00:42:08,930 --> 00:42:11,330
I put a lock on a cardboard box like

1160
00:42:11,330 --> 00:42:13,730
it's not really it's like it's like

1161
00:42:13,730 --> 00:42:17,540
borderline it's borderline just like you

1162
00:42:17,540 --> 00:42:20,270
know parody of itself like that that's

1163
00:42:20,270 --> 00:42:22,550
the level that I hit there so again I

1164
00:42:22,550 --> 00:42:23,660
think that's something that's important

1165
00:42:23,660 --> 00:42:24,619
to learn from and it's something that

1166
00:42:24,619 --> 00:42:26,510
I've seen a lot of games in when I've

1167
00:42:26,510 --> 00:42:28,490
been able to roll back security policies

1168
00:42:28,490 --> 00:42:30,830
in businesses that were really not

1169
00:42:30,830 --> 00:42:33,530
useful and that people just kind of took

1170
00:42:33,530 --> 00:42:36,980
as a necessity and that bought me in you

1171
00:42:36,980 --> 00:42:38,810
know that bought me capital to burn with

1172
00:42:38,810 --> 00:42:40,190
those people when I did have to make a

1173
00:42:40,190 --> 00:42:42,640
decision that did impact them negatively

1174
00:42:42,640 --> 00:42:44,930
and let's make friends everywhere this

1175
00:42:44,930 --> 00:42:46,070
goes back to the whole you know the

1176
00:42:46,070 --> 00:42:47,720
whole cabbie thing it's like the more

1177
00:42:47,720 --> 00:42:49,310
people who understand about these things

1178
00:42:49,310 --> 00:42:50,780
the more people who care about these

1179
00:42:50,780 --> 00:42:52,609
problems the better off we're all gonna

1180
00:42:52,609 --> 00:42:53,900
be in the more power we're going to have

1181
00:42:53,900 --> 00:42:56,510
to be to actually you know fix a lot of

1182
00:42:56,510 --> 00:42:59,660
the major problems that we see and then

1183
00:42:59,660 --> 00:43:01,790
impact and outcomes I mean I think

1184
00:43:01,790 --> 00:43:03,830
really an you know an honest

1185
00:43:03,830 --> 00:43:06,020
conversation needs to happen about about

1186
00:43:06,020 --> 00:43:07,790
impact and the outcomes of the things

1187
00:43:07,790 --> 00:43:08,960
that we do and I don't think that's

1188
00:43:08,960 --> 00:43:10,400
necessarily something that the general

1189
00:43:10,400 --> 00:43:11,660
public is going to care about but we

1190
00:43:11,660 --> 00:43:13,100
should make sure that we are

1191
00:43:13,100 --> 00:43:14,960
understanding what we're doing why we're

1192
00:43:14,960 --> 00:43:16,520
doing it and who it's going to affect

1193
00:43:16,520 --> 00:43:18,470
and if that's if that's ultimately a

1194
00:43:18,470 --> 00:43:20,180
gain in the long run or not and I mean

1195
00:43:20,180 --> 00:43:21,740
there's a lot of places around

1196
00:43:21,740 --> 00:43:24,200
vulnerability disclosure around research

1197
00:43:24,200 --> 00:43:25,970
that you know are really important that

1198
00:43:25,970 --> 00:43:27,710
I think we have these conversations we

1199
00:43:27,710 --> 00:43:29,180
understand what's going to be best for

1200
00:43:29,180 --> 00:43:31,520
our community and what we can do to make

1201
00:43:31,520 --> 00:43:33,320
sure that that's what actually happens

1202
00:43:33,320 --> 00:43:35,300
that's it thank you guys very much it's

1203
00:43:35,300 --> 00:43:35,830
been a pleasure

1204
00:43:35,830 --> 00:43:42,479
[Applause]

