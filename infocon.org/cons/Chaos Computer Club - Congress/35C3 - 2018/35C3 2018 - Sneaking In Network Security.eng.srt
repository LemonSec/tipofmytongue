1
00:00:02,830 --> 00:00:22,109
[Music]

2
00:00:18,590 --> 00:00:27,660
<font color="#E5E5E5">okay our next talk is sneaking in</font>

3
00:00:22,109 --> 00:00:30,140
network<font color="#CCCCCC"> security our speaker</font><font color="#E5E5E5"> max has is</font>

4
00:00:27,660 --> 00:00:33,450
going to tell us<font color="#E5E5E5"> how</font><font color="#CCCCCC"> to scale up the</font>

5
00:00:30,140 --> 00:00:37,460
defense for computer networks<font color="#E5E5E5"> and in</font>

6
00:00:33,450 --> 00:00:42,360
<font color="#CCCCCC">particular how to integrate</font><font color="#E5E5E5"> that in</font>

7
00:00:37,460 --> 00:00:45,030
existing networks<font color="#CCCCCC"> okay</font>

8
00:00:42,360 --> 00:00:46,789
max here is a<font color="#CCCCCC"> former champ pancetta and</font>

9
00:00:45,030 --> 00:00:49,620
now a blue team member

10
00:00:46,789 --> 00:00:51,980
please<font color="#E5E5E5"> welcome them with the utroms</font>

11
00:00:49,620 --> 00:00:51,980
applause

12
00:00:52,100 --> 00:00:55,329
[Music]

13
00:00:55,980 --> 00:01:02,370
thank you<font color="#E5E5E5"> hi everyone my name is</font><font color="#CCCCCC"> Max</font>

14
00:01:00,420 --> 00:01:05,339
<font color="#CCCCCC">Burkhart</font><font color="#E5E5E5"> I'm here to tell you today</font>

15
00:01:02,370 --> 00:01:07,500
about sneaking in network<font color="#CCCCCC"> security how I</font>

16
00:01:05,339 --> 00:01:10,380
and a small team of other security

17
00:01:07,500 --> 00:01:12,120
engineers managed to<font color="#E5E5E5"> implement a strong</font>

18
00:01:10,380 --> 00:01:14,789
<font color="#E5E5E5">network segmentation model and an</font>

19
00:01:12,120 --> 00:01:17,190
already running high<font color="#E5E5E5"> scale a large</font>

20
00:01:14,790 --> 00:01:21,450
<font color="#E5E5E5">network I'm a security engineer at</font>

21
00:01:17,190 --> 00:01:24,479
Airbnb<font color="#CCCCCC"> and so the sort</font><font color="#E5E5E5"> of practical</font>

22
00:01:21,450 --> 00:01:27,030
<font color="#CCCCCC">experience of</font><font color="#E5E5E5"> this project occurred in</font>

23
00:01:24,479 --> 00:01:29,759
that<font color="#CCCCCC"> network</font><font color="#E5E5E5"> however I think that the</font>

24
00:01:27,030 --> 00:01:31,560
techniques<font color="#E5E5E5"> will go over here today will</font>

25
00:01:29,759 --> 00:01:33,570
apply to many other networks<font color="#E5E5E5"> and so I'll</font>

26
00:01:31,560 --> 00:01:35,729
<font color="#E5E5E5">spend</font><font color="#CCCCCC"> some time</font><font color="#E5E5E5"> talking about the</font>

27
00:01:33,570 --> 00:01:38,250
technical<font color="#CCCCCC"> theory behind this approach</font><font color="#E5E5E5"> as</font>

28
00:01:35,729 --> 00:01:41,610
well as what happened when we<font color="#E5E5E5"> rolled it</font>

29
00:01:38,250 --> 00:01:45,119
out<font color="#CCCCCC"> in an attempt to</font><font color="#E5E5E5"> give you some good</font>

30
00:01:41,610 --> 00:01:48,930
evidence<font color="#CCCCCC"> and experience</font><font color="#E5E5E5"> to run this in</font>

31
00:01:45,119 --> 00:01:52,710
your own environment so let's talk about

32
00:01:48,930 --> 00:01:54,479
<font color="#E5E5E5">network</font><font color="#CCCCCC"> security in 2018 segmentation</font>

33
00:01:52,710 --> 00:01:57,869
<font color="#E5E5E5">continues to be a really good</font><font color="#CCCCCC"> idea</font>

34
00:01:54,479 --> 00:01:59,910
<font color="#E5E5E5">because</font><font color="#CCCCCC"> we all know</font><font color="#E5E5E5"> that compromises are</font>

35
00:01:57,869 --> 00:02:02,429
going to happen<font color="#CCCCCC"> there's box is going to</font>

36
00:01:59,910 --> 00:02:05,190
be<font color="#CCCCCC"> popped whether it's a</font><font color="#E5E5E5"> zero day or</font>

37
00:02:02,429 --> 00:02:07,560
something less fancy<font color="#E5E5E5"> like you know</font>

38
00:02:05,190 --> 00:02:10,258
somebody forgot<font color="#CCCCCC"> to patch a server and</font>

39
00:02:07,560 --> 00:02:11,580
<font color="#E5E5E5">network segmentation</font><font color="#CCCCCC"> gives you the</font>

40
00:02:10,258 --> 00:02:14,010
controls to be able<font color="#E5E5E5"> to keep those</font>

41
00:02:11,580 --> 00:02:16,290
compromises<font color="#E5E5E5"> contained to make sure</font><font color="#CCCCCC"> that</font>

42
00:02:14,010 --> 00:02:20,010
low<font color="#E5E5E5"> security systems can't</font><font color="#CCCCCC"> pivot into</font>

43
00:02:16,290 --> 00:02:22,350
higher<font color="#E5E5E5"> security zones and help your</font>

44
00:02:20,010 --> 00:02:25,980
instant response teams keep incidents

45
00:02:22,350 --> 00:02:27,390
localized however<font color="#E5E5E5"> if you've ever been</font>

46
00:02:25,980 --> 00:02:29,489
involved<font color="#E5E5E5"> in network pentesting you'll</font>

47
00:02:27,390 --> 00:02:31,829
know that<font color="#CCCCCC"> a well segmented</font><font color="#E5E5E5"> network</font><font color="#CCCCCC"> is a</font>

48
00:02:29,490 --> 00:02:35,220
rare thing<font color="#CCCCCC"> to</font><font color="#E5E5E5"> see</font><font color="#CCCCCC"> and I think we know</font>

49
00:02:31,830 --> 00:02:38,490
why this happens as networks grow

50
00:02:35,220 --> 00:02:40,470
quickly<font color="#CCCCCC"> small security</font><font color="#E5E5E5"> teams</font><font color="#CCCCCC"> especially</font>

51
00:02:38,490 --> 00:02:42,810
ones<font color="#E5E5E5"> that something like a</font><font color="#CCCCCC"> start up</font><font color="#E5E5E5"> like</font>

52
00:02:40,470 --> 00:02:44,849
everybody<font color="#CCCCCC"> was find themselves</font><font color="#E5E5E5"> having to</font>

53
00:02:42,810 --> 00:02:46,709
prioritize their work<font color="#E5E5E5"> where it is the</font>

54
00:02:44,849 --> 00:02:48,540
<font color="#E5E5E5">most impactful and that usually ends up</font>

55
00:02:46,709 --> 00:02:51,630
being the perimeter<font color="#E5E5E5"> the internet facing</font>

56
00:02:48,540 --> 00:02:53,700
hosts and so as a network grows<font color="#E5E5E5"> quickly</font>

57
00:02:51,630 --> 00:02:56,040
you end up with a large<font color="#E5E5E5"> network that has</font>

58
00:02:53,700 --> 00:02:58,950
this sort of<font color="#E5E5E5"> hard shell soft center</font>

59
00:02:56,040 --> 00:03:01,440
architecture<font color="#E5E5E5"> where the external</font>

60
00:02:58,950 --> 00:03:03,269
perimeter<font color="#E5E5E5"> may be hardened but once an</font>

61
00:03:01,440 --> 00:03:05,640
<font color="#CCCCCC">attacker is able</font><font color="#E5E5E5"> to compromise</font><font color="#CCCCCC"> that they</font>

62
00:03:03,270 --> 00:03:06,239
may have<font color="#E5E5E5"> relatively free</font><font color="#CCCCCC"> rein inside the</font>

63
00:03:05,640 --> 00:03:09,359
rest of it

64
00:03:06,239 --> 00:03:09,849
and this<font color="#E5E5E5"> obviously isn't something that</font>

65
00:03:09,360 --> 00:03:12,189
<font color="#E5E5E5">we</font>

66
00:03:09,849 --> 00:03:14,200
<font color="#E5E5E5">and ask any blue team member and they'll</font>

67
00:03:12,189 --> 00:03:20,170
know<font color="#E5E5E5"> that this is a bad place</font><font color="#CCCCCC"> to be</font>

68
00:03:14,200 --> 00:03:22,358
but change is hard<font color="#E5E5E5"> and especially that</font>

69
00:03:20,170 --> 00:03:24,219
with a pretty large<font color="#E5E5E5"> network</font><font color="#CCCCCC"> so to give</font>

70
00:03:22,359 --> 00:03:26,409
you<font color="#E5E5E5"> an idea of the scale</font><font color="#CCCCCC"> that this</font>

71
00:03:24,219 --> 00:03:29,108
project dealt with earlier this year

72
00:03:26,409 --> 00:03:31,540
<font color="#CCCCCC">we're implementing this every bees</font>

73
00:03:29,109 --> 00:03:35,319
production<font color="#E5E5E5"> network had about 2,500</font>

74
00:03:31,540 --> 00:03:36,790
services about<font color="#E5E5E5"> 20,000 nodes and I define</font>

75
00:03:35,319 --> 00:03:39,099
a node to<font color="#CCCCCC"> be something that's</font><font color="#E5E5E5"> sort of</font>

76
00:03:36,790 --> 00:03:42,510
like a host<font color="#E5E5E5"> whether it's a instance</font>

77
00:03:39,099 --> 00:03:44,768
<font color="#E5E5E5">running in ec2 or kubernetes pod and</font>

78
00:03:42,510 --> 00:03:46,599
over a thousand<font color="#CCCCCC"> engineers were doing</font>

79
00:03:44,769 --> 00:03:49,859
hundreds of production deploys per day

80
00:03:46,599 --> 00:03:52,869
so things are moving<font color="#CCCCCC"> really fast and</font>

81
00:03:49,859 --> 00:03:54,639
it's hard<font color="#E5E5E5"> to go in and you know build in</font>

82
00:03:52,870 --> 00:03:57,639
these large<font color="#E5E5E5"> architectural changes like</font>

83
00:03:54,639 --> 00:03:59,709
adding<font color="#E5E5E5"> segmentation furthermore</font><font color="#CCCCCC"> because</font>

84
00:03:57,639 --> 00:04:01,870
of<font color="#CCCCCC"> this sort of highly service' fied</font>

85
00:03:59,709 --> 00:04:03,519
architecture<font color="#E5E5E5"> there was a lot of complex</font>

86
00:04:01,870 --> 00:04:06,400
interconnectivity between these things

87
00:04:03,519 --> 00:04:10,859
<font color="#E5E5E5">so determining where</font><font color="#CCCCCC"> the zones should</font><font color="#E5E5E5"> be</font>

88
00:04:06,400 --> 00:04:13,000
<font color="#E5E5E5">I was difficult in itself finally</font>

89
00:04:10,859 --> 00:04:15,729
developer productivity is a really big

90
00:04:13,000 --> 00:04:17,380
<font color="#CCCCCC">concern for</font><font color="#E5E5E5"> us and especially to my</font>

91
00:04:15,729 --> 00:04:18,489
managers and their managers<font color="#E5E5E5"> you know if</font>

92
00:04:17,380 --> 00:04:20,738
you have<font color="#E5E5E5"> over a thousand engineers</font>

93
00:04:18,488 --> 00:04:23,469
writing code every day if you<font color="#CCCCCC"> slow them</font>

94
00:04:20,738 --> 00:04:25,448
all down by<font color="#E5E5E5"> 5% or</font><font color="#CCCCCC"> 10% that's actually a</font>

95
00:04:23,470 --> 00:04:29,020
<font color="#E5E5E5">really expensive thing</font><font color="#CCCCCC"> to do and it's</font>

96
00:04:25,449 --> 00:04:32,349
not<font color="#CCCCCC"> something</font><font color="#E5E5E5"> that's gonna fly so the</font>

97
00:04:29,020 --> 00:04:34,060
question became how do we go from a soft

98
00:04:32,349 --> 00:04:36,070
<font color="#CCCCCC">center network to something that has</font>

99
00:04:34,060 --> 00:04:38,440
good segmentation and has the security

100
00:04:36,070 --> 00:04:40,120
<font color="#E5E5E5">properties you want and we're not</font>

101
00:04:38,440 --> 00:04:42,070
<font color="#E5E5E5">allowed</font><font color="#CCCCCC"> to stop development we can't</font>

102
00:04:40,120 --> 00:04:44,190
start<font color="#E5E5E5"> over</font><font color="#CCCCCC"> we've got to be able to</font><font color="#E5E5E5"> build</font>

103
00:04:42,070 --> 00:04:48,280
<font color="#E5E5E5">a security in as the network is</font><font color="#CCCCCC"> running</font>

104
00:04:44,190 --> 00:04:49,810
so<font color="#E5E5E5"> we hear a lot especially in the</font>

105
00:04:48,280 --> 00:04:52,239
<font color="#E5E5E5">pentesting</font><font color="#CCCCCC"> offensive community about</font>

106
00:04:49,810 --> 00:04:54,250
like trying<font color="#CCCCCC"> to be like a ninja</font><font color="#E5E5E5"> right get</font>

107
00:04:52,240 --> 00:04:57,610
into the<font color="#E5E5E5"> network do stuff</font><font color="#CCCCCC"> without anyone</font>

108
00:04:54,250 --> 00:04:59,469
noticing<font color="#CCCCCC"> I'll argue</font><font color="#E5E5E5"> that it's also ism</font>

109
00:04:57,610 --> 00:05:01,449
just as important in<font color="#E5E5E5"> defensive security</font>

110
00:04:59,469 --> 00:05:03,340
we need<font color="#CCCCCC"> to be defensive</font><font color="#E5E5E5"> security ninjas</font>

111
00:05:01,449 --> 00:05:04,930
and be able<font color="#CCCCCC"> to</font><font color="#E5E5E5"> sneak in put in the</font>

112
00:05:03,340 --> 00:05:08,469
defenses<font color="#E5E5E5"> and have nobody know we were</font>

113
00:05:04,930 --> 00:05:11,370
there<font color="#E5E5E5"> so what's the theory that we're</font>

114
00:05:08,469 --> 00:05:13,960
going<font color="#E5E5E5"> to be applying in in this approach</font>

115
00:05:11,370 --> 00:05:17,560
<font color="#CCCCCC">we</font><font color="#E5E5E5"> need to stop thinking</font><font color="#CCCCCC"> about security</font>

116
00:05:13,960 --> 00:05:20,109
<font color="#E5E5E5">as this like layer around development as</font>

117
00:05:17,560 --> 00:05:22,840
<font color="#E5E5E5">another step in the waterfall model you</font>

118
00:05:20,110 --> 00:05:23,660
know this is maybe what we were<font color="#E5E5E5"> thinking</font>

119
00:05:22,840 --> 00:05:24,859
about third

120
00:05:23,660 --> 00:05:26,360
years ago<font color="#E5E5E5"> that you'd build an</font>

121
00:05:24,860 --> 00:05:27,440
application<font color="#CCCCCC"> and then you'd do security</font>

122
00:05:26,360 --> 00:05:29,030
<font color="#E5E5E5">testing and then you chip it to</font>

123
00:05:27,440 --> 00:05:32,000
production<font color="#CCCCCC"> but it just hasn't</font><font color="#E5E5E5"> really</font>

124
00:05:29,030 --> 00:05:33,919
held up<font color="#E5E5E5"> anymore so there's been a lot</font><font color="#CCCCCC"> of</font>

125
00:05:32,000 --> 00:05:35,030
smart<font color="#E5E5E5"> people talking about sort</font><font color="#CCCCCC"> of the</font>

126
00:05:33,920 --> 00:05:37,850
new way<font color="#CCCCCC"> to do things</font>

127
00:05:35,030 --> 00:05:40,099
agile security you know dev<font color="#CCCCCC"> Sackhoff SEC</font>

128
00:05:37,850 --> 00:05:42,530
DevOps<font color="#CCCCCC"> field can't</font><font color="#E5E5E5"> decide the this whole</font>

129
00:05:40,100 --> 00:05:45,200
concept<font color="#E5E5E5"> of really unifying security</font>

130
00:05:42,530 --> 00:05:46,700
operations<font color="#E5E5E5"> and software engineering so</font>

131
00:05:45,200 --> 00:05:48,050
that<font color="#CCCCCC"> you're</font><font color="#E5E5E5"> building a secure thing</font><font color="#CCCCCC"> all</font>

132
00:05:46,700 --> 00:05:50,150
the way<font color="#E5E5E5"> through and this certainly isn't</font>

133
00:05:48,050 --> 00:05:52,640
something<font color="#CCCCCC"> that we invented many people</font>

134
00:05:50,150 --> 00:05:54,229
have<font color="#E5E5E5"> been working</font><font color="#CCCCCC"> on it but I've</font><font color="#E5E5E5"> found</font>

135
00:05:52,640 --> 00:05:56,719
that<font color="#E5E5E5"> most of the time people think</font><font color="#CCCCCC"> about</font>

136
00:05:54,230 --> 00:05:59,480
<font color="#E5E5E5">this concept</font><font color="#CCCCCC"> when in the terms of</font>

137
00:05:56,720 --> 00:06:01,640
application development<font color="#CCCCCC"> and I</font><font color="#E5E5E5"> think it's</font>

138
00:05:59,480 --> 00:06:06,920
time that we integrate<font color="#E5E5E5"> this with network</font>

139
00:06:01,640 --> 00:06:09,169
security<font color="#E5E5E5"> as well</font><font color="#CCCCCC"> there's I think the</font>

140
00:06:06,920 --> 00:06:11,240
important thing<font color="#CCCCCC"> here is</font><font color="#E5E5E5"> scale right the</font>

141
00:06:09,170 --> 00:06:14,990
we need<font color="#CCCCCC"> to build a</font><font color="#E5E5E5"> security solution</font>

142
00:06:11,240 --> 00:06:17,120
<font color="#E5E5E5">that scales</font><font color="#CCCCCC"> with development there's</font>

143
00:06:14,990 --> 00:06:19,220
this saying<font color="#E5E5E5"> that it's good to hire lazy</font>

144
00:06:17,120 --> 00:06:21,020
engineers and developers<font color="#CCCCCC"> because they're</font>

145
00:06:19,220 --> 00:06:22,280
going<font color="#E5E5E5"> to build things that sort</font><font color="#CCCCCC"> of scale</font>

146
00:06:21,020 --> 00:06:24,260
up and don't require<font color="#CCCCCC"> a lot of manual</font>

147
00:06:22,280 --> 00:06:25,880
<font color="#CCCCCC">work</font><font color="#E5E5E5"> that's even more important for</font>

148
00:06:24,260 --> 00:06:28,580
security<font color="#E5E5E5"> engineers you're never going to</font>

149
00:06:25,880 --> 00:06:29,540
outwork the attackers and so you need<font color="#E5E5E5"> to</font>

150
00:06:28,580 --> 00:06:33,219
build<font color="#CCCCCC"> something that's going to scale</font>

151
00:06:29,540 --> 00:06:35,330
<font color="#E5E5E5">along</font><font color="#CCCCCC"> with your engineering</font><font color="#E5E5E5"> group so</font>

152
00:06:33,220 --> 00:06:36,890
we're good project managers so we're

153
00:06:35,330 --> 00:06:39,080
going<font color="#E5E5E5"> to lay out the requirements for</font>

154
00:06:36,890 --> 00:06:40,599
this<font color="#E5E5E5"> solution</font><font color="#CCCCCC"> Before we jump</font><font color="#E5E5E5"> into</font><font color="#CCCCCC"> how it</font>

155
00:06:39,080 --> 00:06:42,919
actually works

156
00:06:40,600 --> 00:06:45,350
<font color="#CCCCCC">whatever we build needs to stay out of</font>

157
00:06:42,919 --> 00:06:48,409
the way of<font color="#CCCCCC"> engineers</font><font color="#E5E5E5"> it may be something</font>

158
00:06:45,350 --> 00:06:50,270
<font color="#E5E5E5">they're aware of</font><font color="#CCCCCC"> but the</font><font color="#E5E5E5"> farther we can</font>

159
00:06:48,410 --> 00:06:51,950
keep<font color="#E5E5E5"> it out</font><font color="#CCCCCC"> of their scope the better</font><font color="#E5E5E5"> so</font>

160
00:06:50,270 --> 00:06:53,210
they<font color="#E5E5E5"> can just keep writing</font><font color="#CCCCCC"> applications</font>

161
00:06:51,950 --> 00:06:55,300
that make the company money or

162
00:06:53,210 --> 00:06:59,560
accomplish your organization's goals and

163
00:06:55,300 --> 00:07:01,940
their stuff<font color="#E5E5E5"> ends up being secure</font>

164
00:06:59,560 --> 00:07:03,710
security by default<font color="#E5E5E5"> is of course</font>

165
00:07:01,940 --> 00:07:06,380
something<font color="#CCCCCC"> that</font><font color="#E5E5E5"> we have been</font><font color="#CCCCCC"> chasing for</font>

166
00:07:03,710 --> 00:07:08,900
<font color="#E5E5E5">a long time but I think that we can also</font>

167
00:07:06,380 --> 00:07:10,340
go further<font color="#E5E5E5"> than that say beyond being</font>

168
00:07:08,900 --> 00:07:12,320
<font color="#CCCCCC">secure by default it</font><font color="#E5E5E5"> should actually be</font>

169
00:07:10,340 --> 00:07:14,690
<font color="#E5E5E5">hard to have an insecure configuration</font>

170
00:07:12,320 --> 00:07:19,040
with this system<font color="#E5E5E5"> so we'll try</font><font color="#CCCCCC"> and design</font>

171
00:07:14,690 --> 00:07:21,290
things in<font color="#E5E5E5"> that manner</font><font color="#CCCCCC"> and finally we</font>

172
00:07:19,040 --> 00:07:23,120
want<font color="#E5E5E5"> to build something that as much</font><font color="#CCCCCC"> as</font>

173
00:07:21,290 --> 00:07:26,840
<font color="#CCCCCC">possible is flexible to whatever sort of</font>

174
00:07:23,120 --> 00:07:28,580
<font color="#E5E5E5">network or protocols you</font><font color="#CCCCCC"> were using</font><font color="#E5E5E5"> you</font>

175
00:07:26,840 --> 00:07:31,070
don't really ever know what's going to

176
00:07:28,580 --> 00:07:33,979
be<font color="#E5E5E5"> coming six months down the road</font><font color="#CCCCCC"> when</font>

177
00:07:31,070 --> 00:07:36,950
<font color="#E5E5E5">this was being worked on everybody's</font>

178
00:07:33,979 --> 00:07:37,580
mostly Linux on Amazon shop<font color="#E5E5E5"> but I don't</font>

179
00:07:36,950 --> 00:07:39,860
know what's going<font color="#CCCCCC"> to have</font>

180
00:07:37,580 --> 00:07:43,400
the next<font color="#E5E5E5"> six</font><font color="#CCCCCC"> months</font><font color="#E5E5E5"> we might acquire a</font>

181
00:07:39,860 --> 00:07:45,320
you know<font color="#E5E5E5"> haskó on</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> jerk company and try</font>

182
00:07:43,400 --> 00:07:46,909
and integrate<font color="#E5E5E5"> that or</font><font color="#CCCCCC"> we'll you know</font>

183
00:07:45,320 --> 00:07:48,500
start you know going<font color="#CCCCCC"> to</font><font color="#E5E5E5"> on-prem</font>

184
00:07:46,910 --> 00:07:50,180
datacenters<font color="#CCCCCC"> I have no idea what's</font><font color="#E5E5E5"> going</font>

185
00:07:48,500 --> 00:07:51,800
to<font color="#E5E5E5"> be in the</font><font color="#CCCCCC"> future so we</font><font color="#E5E5E5"> want to build</font>

186
00:07:50,180 --> 00:07:53,990
<font color="#E5E5E5">a</font><font color="#CCCCCC"> solution</font><font color="#E5E5E5"> that's going to be as</font>

187
00:07:51,800 --> 00:07:58,700
<font color="#E5E5E5">agnostic as possible to those sorts of</font>

188
00:07:53,990 --> 00:08:00,380
<font color="#E5E5E5">decisions so my next slide is basically</font>

189
00:07:58,700 --> 00:08:03,110
<font color="#E5E5E5">the whole solution</font><font color="#CCCCCC"> tried</font><font color="#E5E5E5"> to condense</font>

190
00:08:00,380 --> 00:08:05,330
<font color="#E5E5E5">into two sentences we're going to use</font>

191
00:08:03,110 --> 00:08:08,120
mutual TLS built into the service

192
00:08:05,330 --> 00:08:09,830
discovery<font color="#E5E5E5"> system for authentication and</font>

193
00:08:08,120 --> 00:08:11,270
<font color="#E5E5E5">confidentiality across all service</font>

194
00:08:09,830 --> 00:08:13,099
communications<font color="#E5E5E5"> and we're going to</font>

195
00:08:11,270 --> 00:08:16,280
discover those access lists totally

196
00:08:13,100 --> 00:08:19,340
automatically for security with<font color="#CCCCCC"> zero to</font>

197
00:08:16,280 --> 00:08:21,530
almost zero configuration<font color="#CCCCCC"> this is a lot</font>

198
00:08:19,340 --> 00:08:23,780
of jargon on a single<font color="#E5E5E5"> slide</font><font color="#CCCCCC"> so I don't</font>

199
00:08:21,530 --> 00:08:25,729
expect<font color="#CCCCCC"> you to</font><font color="#E5E5E5"> like kind of visualize it</font>

200
00:08:23,780 --> 00:08:27,830
yet<font color="#E5E5E5"> we'll dive into</font><font color="#CCCCCC"> each of these parts</font>

201
00:08:25,730 --> 00:08:30,410
<font color="#E5E5E5">and I'll show you how they fuse together</font>

202
00:08:27,830 --> 00:08:36,710
to<font color="#CCCCCC"> build</font><font color="#E5E5E5"> a system that is invisible and</font>

203
00:08:30,410 --> 00:08:39,020
secure so to start<font color="#E5E5E5"> off on I've sort</font><font color="#CCCCCC"> of</font>

204
00:08:36,710 --> 00:08:43,520
isolated<font color="#E5E5E5"> three pillars of</font><font color="#CCCCCC"> this approach</font>

205
00:08:39,020 --> 00:08:46,939
the<font color="#E5E5E5"> first is TLS in service discovery so</font>

206
00:08:43,520 --> 00:08:48,920
we love TLS it's one of the really

207
00:08:46,940 --> 00:08:51,890
powerful<font color="#E5E5E5"> protocols that</font><font color="#CCCCCC"> the security</font>

208
00:08:48,920 --> 00:08:54,079
<font color="#CCCCCC">industry has managed to build</font><font color="#E5E5E5"> and it</font>

209
00:08:51,890 --> 00:08:55,910
gives us<font color="#E5E5E5"> great</font><font color="#CCCCCC"> security properties if we</font>

210
00:08:54,080 --> 00:08:57,920
can use it everywhere<font color="#CCCCCC"> so the first</font>

211
00:08:55,910 --> 00:09:00,110
pillar<font color="#CCCCCC"> is get</font><font color="#E5E5E5"> everything to be using TLS</font>

212
00:08:57,920 --> 00:09:01,880
<font color="#E5E5E5">and by building</font><font color="#CCCCCC"> into service discovery</font>

213
00:09:00,110 --> 00:09:05,560
<font color="#E5E5E5">make sure that it runs everywhere</font>

214
00:09:01,880 --> 00:09:05,560
<font color="#CCCCCC">without a lot of</font><font color="#E5E5E5"> per app configuration</font>

215
00:09:05,740 --> 00:09:12,440
pillar<font color="#E5E5E5"> two is binding identity to nodes</font>

216
00:09:09,290 --> 00:09:14,030
so in<font color="#CCCCCC"> a s'more traditional network</font>

217
00:09:12,440 --> 00:09:16,600
segmentation model you might define

218
00:09:14,030 --> 00:09:18,589
subnets or restrict things by IP address

219
00:09:16,600 --> 00:09:20,330
we're going to be able<font color="#CCCCCC"> to be a little</font>

220
00:09:18,590 --> 00:09:22,490
<font color="#CCCCCC">more</font><font color="#E5E5E5"> flexible</font><font color="#CCCCCC"> with how</font><font color="#E5E5E5"> we refer</font><font color="#CCCCCC"> to</font>

221
00:09:20,330 --> 00:09:24,620
individual nodes in this network<font color="#E5E5E5"> because</font>

222
00:09:22,490 --> 00:09:26,690
we're using TLS as an Authenticator<font color="#CCCCCC"> and</font>

223
00:09:24,620 --> 00:09:28,490
therefore can sort<font color="#E5E5E5"> of define our own</font>

224
00:09:26,690 --> 00:09:30,670
concepts of identity<font color="#CCCCCC"> and</font><font color="#E5E5E5"> I'll get into</font>

225
00:09:28,490 --> 00:09:30,670
<font color="#E5E5E5">that</font>

226
00:09:31,500 --> 00:09:37,440
finally we're<font color="#E5E5E5"> going to generate an</font>

227
00:09:34,140 --> 00:09:39,449
authorization map<font color="#E5E5E5"> so by automatically</font>

228
00:09:37,440 --> 00:09:41,880
determining<font color="#E5E5E5"> what services need to talk</font>

229
00:09:39,450 --> 00:09:44,580
to what<font color="#E5E5E5"> and figuring out how data flows</font>

230
00:09:41,880 --> 00:09:47,460
<font color="#E5E5E5">through this network we</font><font color="#CCCCCC"> can attempt to</font>

231
00:09:44,580 --> 00:09:49,650
<font color="#E5E5E5">update apples automatically to stay out</font>

232
00:09:47,460 --> 00:09:52,440
of<font color="#E5E5E5"> engineer's way while still ensuring</font>

233
00:09:49,650 --> 00:09:57,569
that the connections between services

234
00:09:52,440 --> 00:09:59,070
are trusted and can be verified<font color="#E5E5E5"> so this</font>

235
00:09:57,570 --> 00:10:01,770
is a<font color="#E5E5E5"> diagram that we'll be diving into</font>

236
00:09:59,070 --> 00:10:03,330
individual pieces<font color="#E5E5E5"> of but basically this</font>

237
00:10:01,770 --> 00:10:06,120
<font color="#E5E5E5">is a very simplified view of a network</font>

238
00:10:03,330 --> 00:10:07,800
we've got<font color="#E5E5E5"> three nodes those nodes each</font>

239
00:10:06,120 --> 00:10:09,360
have a certificate sort of defining who

240
00:10:07,800 --> 00:10:10,709
<font color="#E5E5E5">they are and they can use those</font>

241
00:10:09,360 --> 00:10:13,080
certificates<font color="#E5E5E5"> to communicate with each</font>

242
00:10:10,710 --> 00:10:14,940
other through TLS tunnels they have

243
00:10:13,080 --> 00:10:16,890
authorization<font color="#E5E5E5"> logic that runs on them</font>

244
00:10:14,940 --> 00:10:19,680
<font color="#E5E5E5">that is fed by</font><font color="#CCCCCC"> this sort of centralized</font>

245
00:10:16,890 --> 00:10:22,250
map of what nodes the network should

246
00:10:19,680 --> 00:10:22,250
talk to<font color="#E5E5E5"> each other</font>

247
00:10:22,670 --> 00:10:31,229
let's jump into<font color="#E5E5E5"> the</font><font color="#CCCCCC"> first pillar here</font>

248
00:10:25,140 --> 00:10:33,110
which is the implementation<font color="#E5E5E5"> of TLS so</font>

249
00:10:31,230 --> 00:10:37,020
specifically here we're looking at<font color="#E5E5E5"> these</font>

250
00:10:33,110 --> 00:10:40,230
tunnels<font color="#E5E5E5"> before I start though it's</font>

251
00:10:37,020 --> 00:10:42,150
important<font color="#CCCCCC"> to cover some basic</font><font color="#E5E5E5"> concepts</font>

252
00:10:40,230 --> 00:10:47,550
here just to get all in the<font color="#E5E5E5"> same page</font>

253
00:10:42,150 --> 00:10:48,449
<font color="#E5E5E5">we're using mutual TLS here</font><font color="#CCCCCC"> which is you</font>

254
00:10:47,550 --> 00:10:50,280
<font color="#E5E5E5">know you've certainly heard of</font>

255
00:10:48,450 --> 00:10:52,440
traditional TLS that's what your web

256
00:10:50,280 --> 00:10:55,140
browser uses all the<font color="#E5E5E5"> time where you have</font>

257
00:10:52,440 --> 00:10:58,380
a client<font color="#CCCCCC"> that is verifying the identity</font>

258
00:10:55,140 --> 00:11:00,210
of<font color="#E5E5E5"> a server normally it will get the</font>

259
00:10:58,380 --> 00:11:02,730
cert<font color="#E5E5E5"> make sure that the subject</font>

260
00:11:00,210 --> 00:11:05,610
alternative name or the<font color="#CCCCCC"> CN matches the</font>

261
00:11:02,730 --> 00:11:07,800
domain name<font color="#CCCCCC"> and if so tell you it's</font>

262
00:11:05,610 --> 00:11:10,470
verified but TLS is really<font color="#CCCCCC"> awesome</font><font color="#E5E5E5"> and</font>

263
00:11:07,800 --> 00:11:13,229
it actually<font color="#E5E5E5"> out-of-the-box supports</font>

264
00:11:10,470 --> 00:11:15,120
verification in both directions<font color="#CCCCCC"> so you</font>

265
00:11:13,230 --> 00:11:16,890
<font color="#CCCCCC">can have the client also</font><font color="#E5E5E5"> present a</font>

266
00:11:15,120 --> 00:11:19,230
certificate<font color="#CCCCCC"> in that initial handshake</font>

267
00:11:16,890 --> 00:11:20,880
<font color="#E5E5E5">and the server can check who is talking</font>

268
00:11:19,230 --> 00:11:22,860
<font color="#E5E5E5">to it using</font><font color="#CCCCCC"> an equally</font><font color="#E5E5E5"> strong</font>

269
00:11:20,880 --> 00:11:25,410
Authenticator this is pretty<font color="#E5E5E5"> hard to</font>

270
00:11:22,860 --> 00:11:27,510
deploy on the public web because users

271
00:11:25,410 --> 00:11:29,670
can't really manage certificates<font color="#E5E5E5"> but in</font>

272
00:11:27,510 --> 00:11:30,990
your<font color="#E5E5E5"> own production network this works</font>

273
00:11:29,670 --> 00:11:34,410
really well because you can distribute

274
00:11:30,990 --> 00:11:35,760
certs to everyone so this is really

275
00:11:34,410 --> 00:11:39,510
<font color="#E5E5E5">great</font><font color="#CCCCCC"> because</font><font color="#E5E5E5"> this means we can</font><font color="#CCCCCC"> have</font>

276
00:11:35,760 --> 00:11:41,580
two-way<font color="#E5E5E5"> strong authentication</font><font color="#CCCCCC"> in with</font>

277
00:11:39,510 --> 00:11:42,930
key material that security engineers

278
00:11:41,580 --> 00:11:44,350
understand<font color="#E5E5E5"> right we know how to deal</font>

279
00:11:42,930 --> 00:11:46,829
with<font color="#E5E5E5"> these sort of systems</font>

280
00:11:44,350 --> 00:11:49,209
and so<font color="#E5E5E5"> not</font><font color="#CCCCCC"> only can we make sure that</font>

281
00:11:46,829 --> 00:11:51,040
clients of services know they're talking

282
00:11:49,209 --> 00:11:52,630
to<font color="#E5E5E5"> legitimate service but that service</font>

283
00:11:51,040 --> 00:11:54,459
can look at who's talking to them and

284
00:11:52,630 --> 00:11:56,459
<font color="#E5E5E5">make</font><font color="#CCCCCC"> sure</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> that's a caller</font><font color="#E5E5E5"> that um</font>

285
00:11:54,459 --> 00:11:59,589
seems appropriate

286
00:11:56,459 --> 00:12:03,339
that's mutual<font color="#E5E5E5"> to us service discovery</font><font color="#CCCCCC"> um</font>

287
00:11:59,589 --> 00:12:04,959
this was a term<font color="#CCCCCC"> that I hadn't heard out</font>

288
00:12:03,339 --> 00:12:07,060
about<font color="#E5E5E5"> a lot before I started working</font><font color="#CCCCCC"> in</font>

289
00:12:04,959 --> 00:12:10,779
companies that<font color="#CCCCCC"> used a lot of cloud</font>

290
00:12:07,060 --> 00:12:12,518
environments<font color="#E5E5E5"> in SOA but um at its core</font>

291
00:12:10,779 --> 00:12:14,560
service<font color="#CCCCCC"> discovery is this concept</font><font color="#E5E5E5"> that</font>

292
00:12:12,519 --> 00:12:16,240
<font color="#E5E5E5">you</font><font color="#CCCCCC"> have some node in a network and it</font>

293
00:12:14,560 --> 00:12:19,089
needs to<font color="#E5E5E5"> find other nodes to provide</font>

294
00:12:16,240 --> 00:12:22,000
services to<font color="#E5E5E5"> it</font><font color="#CCCCCC"> so if you</font><font color="#E5E5E5"> think about it</font>

295
00:12:19,089 --> 00:12:24,639
DNS<font color="#E5E5E5"> is like a very</font><font color="#CCCCCC"> old sort</font><font color="#E5E5E5"> of basic</font>

296
00:12:22,000 --> 00:12:27,690
service discovery<font color="#E5E5E5"> system you want</font><font color="#CCCCCC"> to</font>

297
00:12:24,639 --> 00:12:32,230
<font color="#E5E5E5">perform</font><font color="#CCCCCC"> a Google search so you do go to</font>

298
00:12:27,690 --> 00:12:35,079
WOL comm and DNS finds<font color="#E5E5E5"> you a server that</font>

299
00:12:32,230 --> 00:12:37,449
<font color="#CCCCCC">can provide Google</font><font color="#E5E5E5"> services to you so</font>

300
00:12:35,079 --> 00:12:39,099
these have gotten a lot<font color="#CCCCCC"> more complex and</font>

301
00:12:37,449 --> 00:12:40,750
varied as people move to<font color="#CCCCCC"> these</font>

302
00:12:39,100 --> 00:12:42,970
environments where hosts are very

303
00:12:40,750 --> 00:12:47,550
flexible<font color="#CCCCCC"> and stuff moves around a lot</font>

304
00:12:42,970 --> 00:12:49,800
<font color="#CCCCCC">and they're pretty ubiquitous</font><font color="#E5E5E5"> in modern</font>

305
00:12:47,550 --> 00:12:51,849
service-oriented architectures and

306
00:12:49,800 --> 00:12:54,699
service discovery<font color="#E5E5E5"> can actually be kind</font>

307
00:12:51,850 --> 00:12:56,680
<font color="#E5E5E5">of problematic for security if you do it</font>

308
00:12:54,699 --> 00:12:58,240
wrong because<font color="#E5E5E5"> fundamentally it's trying</font>

309
00:12:56,680 --> 00:12:59,769
to be a map of the<font color="#CCCCCC"> network</font><font color="#E5E5E5"> and be really</font>

310
00:12:58,240 --> 00:13:02,470
helpful<font color="#E5E5E5"> about like oh hey find the</font>

311
00:12:59,769 --> 00:13:04,510
service here find this<font color="#E5E5E5"> service here but</font>

312
00:13:02,470 --> 00:13:06,880
<font color="#CCCCCC">I'll argue</font><font color="#E5E5E5"> that we can</font><font color="#CCCCCC"> actually</font><font color="#E5E5E5"> use this</font>

313
00:13:04,510 --> 00:13:09,790
<font color="#E5E5E5">to great effect on in achieving security</font>

314
00:13:06,880 --> 00:13:12,910
so<font color="#E5E5E5"> everybody uses a framework called</font>

315
00:13:09,790 --> 00:13:14,380
smart stack<font color="#E5E5E5"> and so that was what was</font>

316
00:13:12,910 --> 00:13:17,709
<font color="#E5E5E5">there when we</font><font color="#CCCCCC"> started this project</font><font color="#E5E5E5"> and</font>

317
00:13:14,380 --> 00:13:20,410
we built this security extension<font color="#E5E5E5"> on top</font>

318
00:13:17,709 --> 00:13:23,050
of the smart stack framework on so

319
00:13:20,410 --> 00:13:24,819
that's<font color="#E5E5E5"> all sort of be talking</font><font color="#CCCCCC"> about but</font>

320
00:13:23,050 --> 00:13:26,199
I believe<font color="#CCCCCC"> that these concepts can</font><font color="#E5E5E5"> be</font>

321
00:13:24,819 --> 00:13:30,010
<font color="#CCCCCC">applied to</font><font color="#E5E5E5"> most service discovery</font>

322
00:13:26,199 --> 00:13:31,540
systems as a brief aside and<font color="#E5E5E5"> how smart</font>

323
00:13:30,010 --> 00:13:33,850
stack works<font color="#E5E5E5"> this is an open source</font>

324
00:13:31,540 --> 00:13:36,790
system<font color="#E5E5E5"> that everyone be created and open</font>

325
00:13:33,850 --> 00:13:40,149
sourced<font color="#CCCCCC"> a few years ago but</font><font color="#E5E5E5"> the basic</font>

326
00:13:36,790 --> 00:13:42,279
<font color="#E5E5E5">idea is</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> it uses two other publicly</font>

327
00:13:40,149 --> 00:13:44,019
available<font color="#E5E5E5"> projects a zookeeper and H a</font>

328
00:13:42,279 --> 00:13:46,269
proxy in order to make it easy for

329
00:13:44,019 --> 00:13:49,959
services<font color="#CCCCCC"> to talk to each other</font><font color="#E5E5E5"> if you</font>

330
00:13:46,269 --> 00:13:52,949
look at<font color="#CCCCCC"> this example above node two is</font>

331
00:13:49,959 --> 00:13:55,329
hosting a service service B and so

332
00:13:52,949 --> 00:13:58,029
service B is<font color="#E5E5E5"> going to report</font><font color="#CCCCCC"> into a</font>

333
00:13:55,329 --> 00:13:58,300
zookeeper cluster hello<font color="#CCCCCC"> I'm a service B</font>

334
00:13:58,029 --> 00:14:01,600
and

335
00:13:58,300 --> 00:14:04,030
and you can find me at node<font color="#CCCCCC"> to node one</font>

336
00:14:01,600 --> 00:14:07,030
wants to<font color="#CCCCCC"> talk to service B</font><font color="#E5E5E5"> and so it</font>

337
00:14:04,030 --> 00:14:09,370
will load<font color="#E5E5E5"> the relevant addresses for</font>

338
00:14:07,030 --> 00:14:11,050
service<font color="#CCCCCC"> B from zoo keeper</font><font color="#E5E5E5"> and it will</font>

339
00:14:09,370 --> 00:14:13,180
put<font color="#E5E5E5"> them</font><font color="#CCCCCC"> into</font><font color="#E5E5E5"> its local</font><font color="#CCCCCC"> h a proxy</font>

340
00:14:11,050 --> 00:14:15,420
instance<font color="#CCCCCC"> H a proxy is a reverse</font><font color="#E5E5E5"> proxy</font>

341
00:14:13,180 --> 00:14:18,609
that just<font color="#CCCCCC"> um had a forwards traffic</font><font color="#E5E5E5"> long</font>

342
00:14:15,420 --> 00:14:20,589
<font color="#E5E5E5">service a if it wants to make a call to</font>

343
00:14:18,610 --> 00:14:22,540
service B simply then just sends a

344
00:14:20,590 --> 00:14:24,310
request<font color="#E5E5E5"> to localhost</font><font color="#CCCCCC"> and leaves it to</font>

345
00:14:22,540 --> 00:14:27,610
<font color="#E5E5E5">Asia proxy to find a suitable</font><font color="#CCCCCC"> host to</font>

346
00:14:24,310 --> 00:14:28,959
fulfill that<font color="#E5E5E5"> request so an important</font>

347
00:14:27,610 --> 00:14:31,600
thing<font color="#E5E5E5"> to note here is</font><font color="#CCCCCC"> that this system</font>

348
00:14:28,960 --> 00:14:34,480
was<font color="#CCCCCC"> not designed</font><font color="#E5E5E5"> for security anything</font>

349
00:14:31,600 --> 00:14:36,550
can write<font color="#E5E5E5"> into zookeeper it is like the</font>

350
00:14:34,480 --> 00:14:39,430
most prone to impersonation thing

351
00:14:36,550 --> 00:14:41,020
possible<font color="#CCCCCC"> because</font><font color="#E5E5E5"> you just ask for a list</font>

352
00:14:39,430 --> 00:14:44,199
<font color="#CCCCCC">of nodes and you get them and</font><font color="#E5E5E5"> it's not</font>

353
00:14:41,020 --> 00:14:46,510
really authenticated but I'll show<font color="#E5E5E5"> you</font>

354
00:14:44,200 --> 00:14:51,790
how in the<font color="#CCCCCC"> next few slides we can build</font>

355
00:14:46,510 --> 00:14:54,160
security into this<font color="#E5E5E5"> system so the old way</font>

356
00:14:51,790 --> 00:14:56,439
<font color="#CCCCCC">that we connected</font><font color="#E5E5E5"> to services</font><font color="#CCCCCC"> before any</font>

357
00:14:54,160 --> 00:14:58,750
security upgrades<font color="#E5E5E5"> is that service a</font>

358
00:14:56,440 --> 00:15:00,880
wants<font color="#E5E5E5"> to talk to service B it sends a</font>

359
00:14:58,750 --> 00:15:02,830
request<font color="#E5E5E5"> to its local outbound proxy and</font>

360
00:15:00,880 --> 00:15:05,050
that sends it<font color="#CCCCCC"> along so it's gonna</font><font color="#E5E5E5"> make</font>

361
00:15:02,830 --> 00:15:06,700
an HTTP<font color="#CCCCCC"> request to localhost</font><font color="#E5E5E5"> that gets</font>

362
00:15:05,050 --> 00:15:10,060
sent<font color="#CCCCCC"> through the</font><font color="#E5E5E5"> reverse proxy goes</font>

363
00:15:06,700 --> 00:15:12,790
<font color="#E5E5E5">across the</font><font color="#CCCCCC"> internet</font><font color="#E5E5E5"> to service B not a</font>

364
00:15:10,060 --> 00:15:17,050
lot of<font color="#E5E5E5"> security going on here what we</font>

365
00:15:12,790 --> 00:15:20,620
<font color="#CCCCCC">added is a secure shim so we added</font><font color="#E5E5E5"> a</font><font color="#CCCCCC"> new</font>

366
00:15:17,050 --> 00:15:23,530
reverse proxy<font color="#E5E5E5"> that runs on the receiving</font>

367
00:15:20,620 --> 00:15:25,510
node<font color="#E5E5E5"> in front of service B and we</font>

368
00:15:23,530 --> 00:15:28,510
reconfigured the proxies to<font color="#E5E5E5"> communicate</font>

369
00:15:25,510 --> 00:15:30,400
to each<font color="#E5E5E5"> other with mutual TLS so now all</font>

370
00:15:28,510 --> 00:15:34,030
the traffic that's<font color="#CCCCCC"> going over the</font>

371
00:15:30,400 --> 00:15:36,730
Internet is in a TLS tunnel<font color="#CCCCCC"> but</font>

372
00:15:34,030 --> 00:15:38,709
<font color="#E5E5E5">crucially service a and service B do not</font>

373
00:15:36,730 --> 00:15:40,480
change at all<font color="#E5E5E5"> service a is still sending</font>

374
00:15:38,710 --> 00:15:42,790
HTTP traffic<font color="#E5E5E5"> service B is still</font>

375
00:15:40,480 --> 00:15:45,220
receiving HTTP traffic so<font color="#E5E5E5"> we were able</font>

376
00:15:42,790 --> 00:15:47,680
<font color="#CCCCCC">to pretty radically change the security</font>

377
00:15:45,220 --> 00:15:49,810
<font color="#CCCCCC">model of this</font><font color="#E5E5E5"> cross host communication</font>

378
00:15:47,680 --> 00:15:54,609
<font color="#E5E5E5">without touching a</font><font color="#CCCCCC"> single line of an</font>

379
00:15:49,810 --> 00:15:57,400
engineer's code so this<font color="#E5E5E5"> is where we're</font>

380
00:15:54,610 --> 00:15:59,010
<font color="#CCCCCC">getting</font><font color="#E5E5E5"> our invisibility from there's</font>

381
00:15:57,400 --> 00:16:01,270
some other really<font color="#E5E5E5"> big benefits to this</font>

382
00:15:59,010 --> 00:16:03,340
because there are<font color="#E5E5E5"> these two service</font>

383
00:16:01,270 --> 00:16:05,020
discovery proxies that<font color="#CCCCCC"> are doing</font><font color="#E5E5E5"> the TLS</font>

384
00:16:03,340 --> 00:16:07,390
<font color="#CCCCCC">set up and they're the things that can</font>

385
00:16:05,020 --> 00:16:10,960
<font color="#E5E5E5">do authentication and verification of</font>

386
00:16:07,390 --> 00:16:12,210
this TLS tunnel<font color="#E5E5E5"> on security was able to</font>

387
00:16:10,960 --> 00:16:14,880
<font color="#E5E5E5">build</font><font color="#CCCCCC"> these controls once</font>

388
00:16:12,210 --> 00:16:17,670
and distribute them basically<font color="#E5E5E5"> across the</font>

389
00:16:14,880 --> 00:16:19,470
entire fleet<font color="#CCCCCC"> the same proxies can</font><font color="#E5E5E5"> run no</font>

390
00:16:17,670 --> 00:16:21,510
matter what the what language the

391
00:16:19,470 --> 00:16:24,410
service is written in what sort<font color="#E5E5E5"> of</font>

392
00:16:21,510 --> 00:16:26,600
protocol<font color="#CCCCCC"> that service uses and so</font>

393
00:16:24,410 --> 00:16:28,709
instead of<font color="#E5E5E5"> having to verify</font>

394
00:16:26,600 --> 00:16:31,170
<font color="#E5E5E5">authentication authorization code</font><font color="#CCCCCC"> in</font>

395
00:16:28,710 --> 00:16:32,820
dozens of<font color="#E5E5E5"> different frameworks and</font>

396
00:16:31,170 --> 00:16:37,290
languages we're able to do it<font color="#CCCCCC"> just about</font>

397
00:16:32,820 --> 00:16:38,730
once the other thing<font color="#E5E5E5"> that</font><font color="#CCCCCC"> ended</font><font color="#E5E5E5"> up being</font>

398
00:16:37,290 --> 00:16:41,430
really helpful<font color="#E5E5E5"> is</font><font color="#CCCCCC"> that having these</font>

399
00:16:38,730 --> 00:16:42,900
proxies on either side of your service

400
00:16:41,430 --> 00:16:46,050
communications<font color="#CCCCCC"> is actually really</font>

401
00:16:42,900 --> 00:16:49,020
<font color="#E5E5E5">helpful</font><font color="#CCCCCC"> for non security reasons so</font>

402
00:16:46,050 --> 00:16:52,050
<font color="#E5E5E5">things like consistent metrics better</font>

403
00:16:49,020 --> 00:16:54,329
tracing better<font color="#E5E5E5"> ability</font><font color="#CCCCCC"> to do load</font>

404
00:16:52,050 --> 00:16:56,939
<font color="#CCCCCC">testing we got all of those for free</font><font color="#E5E5E5"> by</font>

405
00:16:54,330 --> 00:16:58,980
adding in more proxies and thus we got

406
00:16:56,940 --> 00:17:00,630
to really<font color="#E5E5E5"> get the</font><font color="#CCCCCC"> bet on support of</font>

407
00:16:58,980 --> 00:17:02,940
other<font color="#E5E5E5"> infrastructure teams at the</font>

408
00:17:00,630 --> 00:17:04,980
company who maybe didn't have<font color="#E5E5E5"> direct</font>

409
00:17:02,940 --> 00:17:08,310
<font color="#E5E5E5">security goals but they wanted to</font><font color="#CCCCCC"> help</font>

410
00:17:04,980 --> 00:17:09,780
us do<font color="#E5E5E5"> this so basically what we've done</font>

411
00:17:08,310 --> 00:17:11,790
<font color="#CCCCCC">with</font><font color="#E5E5E5"> this whole proxy thing is sort</font><font color="#CCCCCC"> of</font>

412
00:17:09,780 --> 00:17:14,369
the opposite of what<font color="#CCCCCC"> the NSA wants you</font>

413
00:17:11,790 --> 00:17:17,010
may remember this slide<font color="#E5E5E5"> from a leaked</font>

414
00:17:14,369 --> 00:17:18,750
NSA presentation<font color="#CCCCCC"> where they were</font>

415
00:17:17,010 --> 00:17:21,599
discovering with<font color="#CCCCCC"> Glee that</font><font color="#E5E5E5"> inside</font>

416
00:17:18,750 --> 00:17:23,339
Google's cloud network at the time there

417
00:17:21,599 --> 00:17:26,040
was a lot of plain text<font color="#E5E5E5"> HTTP going on</font>

418
00:17:23,339 --> 00:17:28,530
and<font color="#CCCCCC"> SL was added and removed we are</font><font color="#E5E5E5"> just</font>

419
00:17:26,040 --> 00:17:30,810
adding<font color="#E5E5E5"> SSL</font><font color="#CCCCCC"> and keeping it</font><font color="#E5E5E5"> there all of</font>

420
00:17:28,530 --> 00:17:36,300
the arrows<font color="#CCCCCC"> on the right need to be TLS</font>

421
00:17:30,810 --> 00:17:38,610
in the modern<font color="#E5E5E5"> age one important caveat</font>

422
00:17:36,300 --> 00:17:41,669
about<font color="#E5E5E5"> this particular approach is this</font>

423
00:17:38,610 --> 00:17:43,709
concept of proxy exclusivity<font color="#E5E5E5"> which is</font>

424
00:17:41,670 --> 00:17:45,450
that<font color="#E5E5E5"> basically we are relying on this</font>

425
00:17:43,710 --> 00:17:47,910
inbound proxy to provide the security

426
00:17:45,450 --> 00:17:50,660
<font color="#CCCCCC">benefits of TLS</font><font color="#E5E5E5"> confidentiality and</font>

427
00:17:47,910 --> 00:17:52,830
<font color="#E5E5E5">authenticity</font><font color="#CCCCCC"> and thus it is crucial that</font>

428
00:17:50,660 --> 00:17:55,740
going through<font color="#CCCCCC"> the inbound</font><font color="#E5E5E5"> proxy is the</font>

429
00:17:52,830 --> 00:17:57,629
only<font color="#E5E5E5"> way to talk</font><font color="#CCCCCC"> to a given service</font><font color="#E5E5E5"> if</font>

430
00:17:55,740 --> 00:17:59,580
that service is<font color="#E5E5E5"> reachable by going</font>

431
00:17:57,630 --> 00:18:01,560
around<font color="#E5E5E5"> the inbound proxy you would still</font>

432
00:17:59,580 --> 00:18:03,750
<font color="#E5E5E5">be able</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> talk plaintext HTTP to it and</font>

433
00:18:01,560 --> 00:18:05,550
possibly<font color="#E5E5E5"> evade authentication mechanisms</font>

434
00:18:03,750 --> 00:18:06,440
<font color="#CCCCCC">and so it's important that this</font><font color="#E5E5E5"> is</font>

435
00:18:05,550 --> 00:18:08,520
impossible

436
00:18:06,440 --> 00:18:10,290
<font color="#CCCCCC">I'll talk a</font><font color="#E5E5E5"> little about how we solve</font>

437
00:18:08,520 --> 00:18:11,220
<font color="#E5E5E5">this particular issue</font><font color="#CCCCCC"> I'm it's</font><font color="#E5E5E5"> just</font>

438
00:18:10,290 --> 00:18:12,840
something that's important<font color="#CCCCCC"> to be</font>

439
00:18:11,220 --> 00:18:17,100
<font color="#CCCCCC">thinking about</font><font color="#E5E5E5"> if you're going to</font>

440
00:18:12,840 --> 00:18:18,929
implement<font color="#E5E5E5"> this</font><font color="#CCCCCC"> approach so</font><font color="#E5E5E5"> that's TLS by</font>

441
00:18:17,100 --> 00:18:20,639
implementing<font color="#CCCCCC"> a new proxy</font><font color="#E5E5E5"> into an</font>

442
00:18:18,930 --> 00:18:22,200
existing<font color="#CCCCCC"> service discovery framework we</font>

443
00:18:20,640 --> 00:18:25,980
<font color="#E5E5E5">can switch all the traffic be going over</font>

444
00:18:22,200 --> 00:18:29,010
TLS without radically changing on

445
00:18:25,980 --> 00:18:31,260
the code<font color="#CCCCCC"> of services running next up</font>

446
00:18:29,010 --> 00:18:33,120
though<font color="#CCCCCC"> is that really what we wanted out</font>

447
00:18:31,260 --> 00:18:35,279
of<font color="#E5E5E5"> all this is segmentation right</font><font color="#CCCCCC"> we</font>

448
00:18:33,120 --> 00:18:37,500
want to make<font color="#CCCCCC"> sure that only</font><font color="#E5E5E5"> legitimate</font>

449
00:18:35,279 --> 00:18:39,990
<font color="#E5E5E5">things can connect to a given</font><font color="#CCCCCC"> service</font>

450
00:18:37,500 --> 00:18:42,620
and so we need<font color="#E5E5E5"> to build a sense of</font>

451
00:18:39,990 --> 00:18:47,669
identity<font color="#CCCCCC"> that</font><font color="#E5E5E5"> can</font><font color="#CCCCCC"> be used</font><font color="#E5E5E5"> to do this</font>

452
00:18:42,620 --> 00:18:49,379
<font color="#E5E5E5">verification so in this next</font><font color="#CCCCCC"> pilling and</font>

453
00:18:47,669 --> 00:18:50,909
<font color="#CCCCCC">we're</font><font color="#E5E5E5"> talking</font><font color="#CCCCCC"> about how we put</font><font color="#E5E5E5"> these</font>

454
00:18:49,380 --> 00:18:52,320
certificates there and more<font color="#E5E5E5"> importantly</font>

455
00:18:50,909 --> 00:18:58,740
how we<font color="#E5E5E5"> decide what that</font><font color="#CCCCCC"> certificate</font><font color="#E5E5E5"> is</font>

456
00:18:52,320 --> 00:19:00,689
going to say so<font color="#E5E5E5"> segmentation you know</font>

457
00:18:58,740 --> 00:19:02,250
we're<font color="#E5E5E5"> trying to make sure that</font><font color="#CCCCCC"> a node in</font>

458
00:19:00,690 --> 00:19:05,340
<font color="#E5E5E5">the network can only talk to the things</font>

459
00:19:02,250 --> 00:19:08,490
<font color="#E5E5E5">that it</font><font color="#CCCCCC"> should be</font><font color="#E5E5E5"> allowed</font><font color="#CCCCCC"> to talk to you</font>

460
00:19:05,340 --> 00:19:10,019
know if a node needs<font color="#E5E5E5"> to talk to</font><font color="#CCCCCC"> the</font>

461
00:19:08,490 --> 00:19:11,850
payments<font color="#CCCCCC"> back-end service it's going to</font>

462
00:19:10,019 --> 00:19:14,159
do that for<font color="#CCCCCC"> business reasons</font><font color="#E5E5E5"> but we can</font>

463
00:19:11,850 --> 00:19:17,549
maybe make<font color="#CCCCCC"> sure that only nodes that</font>

464
00:19:14,159 --> 00:19:18,840
have<font color="#CCCCCC"> to talk to a</font><font color="#E5E5E5"> given service can but</font>

465
00:19:17,549 --> 00:19:20,340
a lot of<font color="#CCCCCC"> previous thought about</font>

466
00:19:18,840 --> 00:19:23,370
segmentation tends to happen<font color="#E5E5E5"> on this</font>

467
00:19:20,340 --> 00:19:26,070
subnet level<font color="#CCCCCC"> um</font><font color="#E5E5E5"> you make a zone of hosts</font>

468
00:19:23,370 --> 00:19:27,629
and things in<font color="#E5E5E5"> that zone can talk to each</font>

469
00:19:26,070 --> 00:19:29,610
other and then maybe they can<font color="#CCCCCC"> get out to</font>

470
00:19:27,630 --> 00:19:33,330
other<font color="#E5E5E5"> zones via certain predefined</font>

471
00:19:29,610 --> 00:19:35,428
channels but in a micro service network

472
00:19:33,330 --> 00:19:37,799
or something that has a lot of like

473
00:19:35,429 --> 00:19:39,179
<font color="#CCCCCC">dynamic communication going</font><font color="#E5E5E5"> on it may</font>

474
00:19:37,799 --> 00:19:41,779
make<font color="#CCCCCC"> more sense to think about this on a</font>

475
00:19:39,179 --> 00:19:45,990
service<font color="#CCCCCC"> level as opposed to a host level</font>

476
00:19:41,779 --> 00:19:48,539
so um<font color="#CCCCCC"> we'll say</font><font color="#E5E5E5"> things like we want the</font>

477
00:19:45,990 --> 00:19:50,639
payment config page service to be able

478
00:19:48,539 --> 00:19:52,110
<font color="#E5E5E5">to talk</font><font color="#CCCCCC"> to the payment</font><font color="#E5E5E5"> back-end service</font>

479
00:19:50,639 --> 00:19:54,840
that seems like a<font color="#E5E5E5"> reasonable thing to do</font>

480
00:19:52,110 --> 00:19:56,580
<font color="#E5E5E5">but in our network we've also got a</font>

481
00:19:54,840 --> 00:19:57,870
slack bot running that makes memes for

482
00:19:56,580 --> 00:19:59,730
engineers<font color="#E5E5E5"> and that thing should</font>

483
00:19:57,870 --> 00:20:02,850
definitely not be<font color="#E5E5E5"> able to talk to the</font>

484
00:19:59,730 --> 00:20:04,970
payment back-end service so we can<font color="#E5E5E5"> start</font>

485
00:20:02,850 --> 00:20:08,010
<font color="#E5E5E5">representing these sorts of decisions as</font>

486
00:20:04,970 --> 00:20:12,000
instead of you<font color="#E5E5E5"> know these sort of static</font>

487
00:20:08,010 --> 00:20:13,710
tiers of hosts<font color="#E5E5E5"> we have a bunch of these</font>

488
00:20:12,000 --> 00:20:15,330
services and<font color="#CCCCCC"> each service sort of keeps</font>

489
00:20:13,710 --> 00:20:19,200
a list of<font color="#CCCCCC"> identities that's going to</font>

490
00:20:15,330 --> 00:20:22,379
allow to connect to it<font color="#CCCCCC"> and we just did</font>

491
00:20:19,200 --> 00:20:24,389
all<font color="#E5E5E5"> this work to build up these proxies</font>

492
00:20:22,380 --> 00:20:26,909
on either side<font color="#E5E5E5"> of a service</font>

493
00:20:24,389 --> 00:20:29,428
communication that understand TLS<font color="#E5E5E5"> and</font>

494
00:20:26,909 --> 00:20:32,490
<font color="#E5E5E5">are using TLS and TLS is fantastic at</font>

495
00:20:29,429 --> 00:20:35,309
verifying identities so we can now start

496
00:20:32,490 --> 00:20:37,289
<font color="#CCCCCC">to build the segmentation</font><font color="#E5E5E5"> by saying for</font>

497
00:20:35,309 --> 00:20:38,460
a given service listener<font color="#E5E5E5"> here are the</font>

498
00:20:37,289 --> 00:20:39,330
<font color="#E5E5E5">following identities which are allowed</font>

499
00:20:38,460 --> 00:20:41,430
to connect to it

500
00:20:39,330 --> 00:20:44,550
and thus you can end up<font color="#E5E5E5"> in a</font><font color="#CCCCCC"> state where</font>

501
00:20:41,430 --> 00:20:48,990
only the right things can talk to a

502
00:20:44,550 --> 00:20:50,760
given<font color="#CCCCCC"> service based on</font><font color="#E5E5E5"> business need we</font>

503
00:20:48,990 --> 00:20:53,040
do have to identify<font color="#E5E5E5"> all the nodes</font><font color="#CCCCCC"> our</font>

504
00:20:50,760 --> 00:20:55,170
network though and this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> something</font>

505
00:20:53,040 --> 00:21:01,110
that's<font color="#E5E5E5"> going</font><font color="#CCCCCC"> to vary a bit depending on</font>

506
00:20:55,170 --> 00:21:04,410
how your network<font color="#E5E5E5"> is set up so you need</font>

507
00:21:01,110 --> 00:21:10,850
to sort<font color="#E5E5E5"> of find a concept</font><font color="#CCCCCC"> of an identity</font>

508
00:21:04,410 --> 00:21:13,530
<font color="#E5E5E5">that fills a few key key attributes so</font>

509
00:21:10,850 --> 00:21:15,449
this identity that<font color="#CCCCCC"> you decide for a node</font>

510
00:21:13,530 --> 00:21:17,070
needs<font color="#E5E5E5"> to be pretty varied you know if</font>

511
00:21:15,450 --> 00:21:18,900
you have one identity<font color="#E5E5E5"> for everything</font>

512
00:21:17,070 --> 00:21:21,149
<font color="#E5E5E5">you're back at soft center network again</font>

513
00:21:18,900 --> 00:21:24,420
because you won't be<font color="#CCCCCC"> able</font><font color="#E5E5E5"> to do any</font>

514
00:21:21,150 --> 00:21:26,400
distinguishing you need an identity<font color="#E5E5E5"> that</font>

515
00:21:24,420 --> 00:21:28,350
a<font color="#E5E5E5"> node can't change about itself</font>

516
00:21:26,400 --> 00:21:30,990
<font color="#E5E5E5">otherwise an attacker would be</font><font color="#CCCCCC"> able</font><font color="#E5E5E5"> to</font>

517
00:21:28,350 --> 00:21:33,209
compromise<font color="#CCCCCC"> a particular host</font><font color="#E5E5E5"> change its</font>

518
00:21:30,990 --> 00:21:36,180
<font color="#CCCCCC">identity and then move into zones the</font>

519
00:21:33,210 --> 00:21:37,410
network it shouldn't be allowed to it

520
00:21:36,180 --> 00:21:39,300
should really<font color="#E5E5E5"> be</font><font color="#CCCCCC"> able to</font><font color="#E5E5E5"> be something</font>

521
00:21:37,410 --> 00:21:40,740
<font color="#CCCCCC">that you can detect automatically so</font>

522
00:21:39,300 --> 00:21:43,320
<font color="#E5E5E5">that you can sort</font><font color="#CCCCCC"> of automate the</font>

523
00:21:40,740 --> 00:21:45,060
distribution<font color="#E5E5E5"> of these</font><font color="#CCCCCC"> certificates</font><font color="#E5E5E5"> if</font>

524
00:21:43,320 --> 00:21:46,649
you end up<font color="#E5E5E5"> having to go through to an</font>

525
00:21:45,060 --> 00:21:48,540
Excel spreadsheet<font color="#E5E5E5"> and figure</font><font color="#CCCCCC"> out what</font>

526
00:21:46,650 --> 00:21:49,890
each host is and then like mend those

527
00:21:48,540 --> 00:21:53,190
sorts yourself<font color="#E5E5E5"> it's not really gonna</font>

528
00:21:49,890 --> 00:21:56,490
work and finally we do need<font color="#E5E5E5"> to</font><font color="#CCCCCC"> represent</font>

529
00:21:53,190 --> 00:21:59,940
this concept of<font color="#E5E5E5"> an identity in a TLS</font>

530
00:21:56,490 --> 00:22:01,170
certificate<font color="#CCCCCC"> so in</font><font color="#E5E5E5"> our case we wanted</font>

531
00:21:59,940 --> 00:22:04,830
something<font color="#E5E5E5"> that could fit into a subject</font>

532
00:22:01,170 --> 00:22:06,690
alternative name so most modern networks

533
00:22:04,830 --> 00:22:09,300
have some concept<font color="#E5E5E5"> of a role that works</font>

534
00:22:06,690 --> 00:22:11,400
pretty well for<font color="#CCCCCC"> this</font><font color="#E5E5E5"> when you have a</font>

535
00:22:09,300 --> 00:22:13,260
config management system or<font color="#E5E5E5"> a cloud</font>

536
00:22:11,400 --> 00:22:15,060
permission system<font color="#CCCCCC"> you</font><font color="#E5E5E5"> almost always are</font>

537
00:22:13,260 --> 00:22:16,560
giving things<font color="#E5E5E5"> identities based on their</font>

538
00:22:15,060 --> 00:22:19,310
<font color="#CCCCCC">function and this tends</font><font color="#E5E5E5"> to work</font><font color="#CCCCCC"> pretty</font>

539
00:22:16,560 --> 00:22:22,230
well<font color="#E5E5E5"> for</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> so in our network we used</font>

540
00:22:19,310 --> 00:22:25,080
Amazon<font color="#E5E5E5"> iam roles which is a sort of</font>

541
00:22:22,230 --> 00:22:27,030
designation given<font color="#CCCCCC"> to an instance that</font><font color="#E5E5E5"> it</font>

542
00:22:25,080 --> 00:22:30,139
gives it some level of permissions<font color="#E5E5E5"> in</font>

543
00:22:27,030 --> 00:22:34,500
AWS<font color="#E5E5E5"> and this worked really well because</font>

544
00:22:30,140 --> 00:22:35,940
<font color="#E5E5E5">most different services had them they</font>

545
00:22:34,500 --> 00:22:37,590
can't be changed<font color="#E5E5E5"> unless you have very</font>

546
00:22:35,940 --> 00:22:40,770
<font color="#CCCCCC">high</font><font color="#E5E5E5"> level administrative permissions</font>

547
00:22:37,590 --> 00:22:41,879
<font color="#E5E5E5">native</font><font color="#CCCCCC"> us and it is can represented as a</font>

548
00:22:40,770 --> 00:22:45,900
string so<font color="#E5E5E5"> it fits well on the</font>

549
00:22:41,880 --> 00:22:49,350
certificate<font color="#E5E5E5"> so to kind of look at what</font>

550
00:22:45,900 --> 00:22:51,870
<font color="#CCCCCC">we're going</font><font color="#E5E5E5"> to do here</font><font color="#CCCCCC"> now</font><font color="#E5E5E5"> we need</font><font color="#CCCCCC"> to</font>

551
00:22:49,350 --> 00:22:53,280
give everything identity and we need to

552
00:22:51,870 --> 00:22:56,939
make certificates that

553
00:22:53,280 --> 00:23:00,420
allow<font color="#CCCCCC"> nodes to prove their identity in</font>

554
00:22:56,940 --> 00:23:04,200
these TLS communications we can then

555
00:23:00,420 --> 00:23:05,910
build this map of what identities should

556
00:23:04,200 --> 00:23:06,990
be allowed to<font color="#E5E5E5"> access what services</font><font color="#CCCCCC"> this</font>

557
00:23:05,910 --> 00:23:09,060
<font color="#E5E5E5">is what is going to give us</font><font color="#CCCCCC"> our</font>

558
00:23:06,990 --> 00:23:11,340
segmentation<font color="#E5E5E5"> because we're going to be</font>

559
00:23:09,060 --> 00:23:13,379
able to<font color="#CCCCCC"> distribute that map</font><font color="#E5E5E5"> saying for</font>

560
00:23:11,340 --> 00:23:15,270
the payments<font color="#E5E5E5"> back-end service you allow</font>

561
00:23:13,380 --> 00:23:19,220
the<font color="#E5E5E5"> following identities and no others</font>

562
00:23:15,270 --> 00:23:22,110
and thus you can get to this place<font color="#E5E5E5"> where</font>

563
00:23:19,220 --> 00:23:24,830
<font color="#CCCCCC">only a very select set of nodes in your</font>

564
00:23:22,110 --> 00:23:27,899
network can<font color="#CCCCCC"> access the sensitive</font><font color="#E5E5E5"> stuff</font>

565
00:23:24,830 --> 00:23:32,070
but how do we make<font color="#E5E5E5"> that map that's</font>

566
00:23:27,900 --> 00:23:35,580
pillar<font color="#E5E5E5"> 3 which is the final segment of</font>

567
00:23:32,070 --> 00:23:36,750
<font color="#CCCCCC">this</font><font color="#E5E5E5"> diagram so how do we figure out</font>

568
00:23:35,580 --> 00:23:41,189
what<font color="#CCCCCC"> needs</font><font color="#E5E5E5"> to talk to what and</font>

569
00:23:36,750 --> 00:23:43,670
distribute that so a<font color="#E5E5E5"> big question here</font>

570
00:23:41,190 --> 00:23:48,000
is really<font color="#E5E5E5"> all about trust</font>

571
00:23:43,670 --> 00:23:50,520
how do you figure out<font color="#E5E5E5"> what needs to talk</font>

572
00:23:48,000 --> 00:23:54,720
<font color="#CCCCCC">to what and do it with a minimum of</font>

573
00:23:50,520 --> 00:23:56,190
human involved<font color="#E5E5E5"> computation</font><font color="#CCCCCC"> a lot of what</font>

574
00:23:54,720 --> 00:23:58,200
I<font color="#E5E5E5"> was talking</font><font color="#CCCCCC"> about earlier in the very</font>

575
00:23:56,190 --> 00:24:01,010
beginning<font color="#E5E5E5"> of this presentation was about</font>

576
00:23:58,200 --> 00:24:03,660
the sort<font color="#E5E5E5"> of human cost of segmentation</font>

577
00:24:01,010 --> 00:24:05,040
<font color="#E5E5E5">if you have people who</font><font color="#CCCCCC"> are spending all</font>

578
00:24:03,660 --> 00:24:07,110
<font color="#CCCCCC">day trying</font><font color="#E5E5E5"> to make firewall</font>

579
00:24:05,040 --> 00:24:10,350
configurations<font color="#E5E5E5"> that's going to be rather</font>

580
00:24:07,110 --> 00:24:12,899
<font color="#CCCCCC">expensive difficult to</font><font color="#E5E5E5"> keep safe etc we</font>

581
00:24:10,350 --> 00:24:16,350
want to try and get<font color="#CCCCCC"> away</font><font color="#E5E5E5"> from the</font>

582
00:24:12,900 --> 00:24:17,880
configurable list<font color="#E5E5E5"> style of security</font>

583
00:24:16,350 --> 00:24:19,649
engineering where you hire a ton of

584
00:24:17,880 --> 00:24:22,920
security engineers to try and figure out

585
00:24:19,650 --> 00:24:25,440
what is supposed to<font color="#E5E5E5"> talk</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> one so we</font>

586
00:24:22,920 --> 00:24:28,080
<font color="#CCCCCC">want to we just</font><font color="#E5E5E5"> infer this from existing</font>

587
00:24:25,440 --> 00:24:30,120
code<font color="#E5E5E5"> can we look at how the network</font>

588
00:24:28,080 --> 00:24:32,879
currently works at how<font color="#E5E5E5"> our</font>

589
00:24:30,120 --> 00:24:36,000
configurations are defined<font color="#E5E5E5"> and use that</font>

590
00:24:32,880 --> 00:24:39,720
<font color="#E5E5E5">to build the sense of how communication</font>

591
00:24:36,000 --> 00:24:42,270
should happen so this is getting to an

592
00:24:39,720 --> 00:24:44,250
interesting point<font color="#CCCCCC"> because the decisions</font>

593
00:24:42,270 --> 00:24:47,430
you make<font color="#E5E5E5"> here really depend on how you</font>

594
00:24:44,250 --> 00:24:51,960
think<font color="#CCCCCC"> about threats</font><font color="#E5E5E5"> at your organization</font>

595
00:24:47,430 --> 00:24:54,900
<font color="#CCCCCC">so we decided</font><font color="#E5E5E5"> that if you are somebody</font>

596
00:24:51,960 --> 00:24:56,700
<font color="#CCCCCC">who can merge</font><font color="#E5E5E5"> peer reviewed</font><font color="#CCCCCC"> CI past code</font>

597
00:24:54,900 --> 00:24:58,710
into our config management system<font color="#CCCCCC"> that</font>

598
00:24:56,700 --> 00:25:02,430
<font color="#CCCCCC">means</font><font color="#E5E5E5"> you're reasonably authorized to</font>

599
00:24:58,710 --> 00:25:04,950
<font color="#CCCCCC">make changes and this is something that</font>

600
00:25:02,430 --> 00:25:06,559
<font color="#E5E5E5">may vary based on your organization's</font>

601
00:25:04,950 --> 00:25:08,360
<font color="#E5E5E5">setup and</font>

602
00:25:06,559 --> 00:25:12,080
dig more into those<font color="#E5E5E5"> questions in a bit</font>

603
00:25:08,360 --> 00:25:15,320
<font color="#E5E5E5">but for our case we realized we have</font>

604
00:25:12,080 --> 00:25:17,289
this<font color="#E5E5E5"> chef repo the chef repo is a you</font>

605
00:25:15,320 --> 00:25:20,629
know chef<font color="#CCCCCC"> is a config management system</font>

606
00:25:17,289 --> 00:25:22,389
that<font color="#E5E5E5"> can distribute information</font><font color="#CCCCCC"> to all</font>

607
00:25:20,629 --> 00:25:25,340
of the nodes<font color="#E5E5E5"> running in our network and</font>

608
00:25:22,389 --> 00:25:27,199
it already<font color="#E5E5E5"> in a nice machine possible</font>

609
00:25:25,340 --> 00:25:28,999
way was saying what the<font color="#CCCCCC"> dependencies of</font>

610
00:25:27,200 --> 00:25:30,889
every<font color="#E5E5E5"> service were</font><font color="#CCCCCC"> so in</font><font color="#E5E5E5"> this</font>

611
00:25:28,999 --> 00:25:34,159
hypothetical example we have a<font color="#E5E5E5"> service</font>

612
00:25:30,889 --> 00:25:36,439
one service one has dependencies on the

613
00:25:34,159 --> 00:25:38,480
production<font color="#E5E5E5"> database a cache and a</font>

614
00:25:36,440 --> 00:25:41,149
monitoring<font color="#E5E5E5"> service and this</font><font color="#CCCCCC"> is already</font>

615
00:25:38,480 --> 00:25:43,369
setup<font color="#CCCCCC"> in a repository that</font><font color="#E5E5E5"> is rather</font>

616
00:25:41,149 --> 00:25:44,959
heavily controlled<font color="#E5E5E5"> you have to be you</font>

617
00:25:43,369 --> 00:25:48,949
<font color="#E5E5E5">know an engineer</font><font color="#CCCCCC"> that gets peer review</font>

618
00:25:44,960 --> 00:25:51,559
etc<font color="#E5E5E5"> to commit to this so what we can do</font>

619
00:25:48,950 --> 00:25:53,570
is we can<font color="#CCCCCC"> take this determine that</font>

620
00:25:51,559 --> 00:25:56,240
service<font color="#E5E5E5"> one is an authorized caller of</font>

621
00:25:53,570 --> 00:25:58,490
these services and then sort of build

622
00:25:56,240 --> 00:26:02,419
<font color="#E5E5E5">that into</font><font color="#CCCCCC"> this map say for production DB</font>

623
00:25:58,490 --> 00:26:04,960
service one is authorized<font color="#CCCCCC"> to do</font><font color="#E5E5E5"> this we</font>

624
00:26:02,419 --> 00:26:08,480
built<font color="#E5E5E5"> this service called Arachne</font>

625
00:26:04,960 --> 00:26:11,240
<font color="#E5E5E5">Arachne named after Greek spider goddess</font>

626
00:26:08,480 --> 00:26:16,279
is kind of computing the web of services

627
00:26:11,240 --> 00:26:18,259
<font color="#CCCCCC">and nodes at the</font><font color="#E5E5E5"> Airbnb</font><font color="#CCCCCC"> network</font><font color="#E5E5E5"> and so</font>

628
00:26:16,279 --> 00:26:20,419
basically it's continuously<font color="#E5E5E5"> pulling our</font>

629
00:26:18,259 --> 00:26:23,119
<font color="#CCCCCC">chef repository and</font><font color="#E5E5E5"> deployed kubernetes</font>

630
00:26:20,419 --> 00:26:25,240
artifacts<font color="#E5E5E5"> to figure out what connections</font>

631
00:26:23,119 --> 00:26:30,678
have been<font color="#E5E5E5"> defined by trusted people and</font>

632
00:26:25,240 --> 00:26:32,119
building a sort of reverse<font color="#E5E5E5"> map of for</font>

633
00:26:30,679 --> 00:26:34,549
<font color="#E5E5E5">given service what identity should be</font>

634
00:26:32,119 --> 00:26:36,830
allowed to<font color="#E5E5E5"> connect it can then push</font>

635
00:26:34,549 --> 00:26:39,649
these into s3<font color="#CCCCCC"> I'll talk about why we did</font>

636
00:26:36,830 --> 00:26:41,990
that<font color="#E5E5E5"> in a</font><font color="#CCCCCC"> little</font><font color="#E5E5E5"> bit and then those can</font>

637
00:26:39,649 --> 00:26:43,879
<font color="#CCCCCC">be sent</font><font color="#E5E5E5"> to all of the nodes that are</font>

638
00:26:41,990 --> 00:26:48,919
actually<font color="#CCCCCC"> doing this computation</font><font color="#E5E5E5"> this</font>

639
00:26:43,879 --> 00:26:51,619
<font color="#E5E5E5">allowance so the barriers</font><font color="#CCCCCC"> that you're</font>

640
00:26:48,919 --> 00:26:53,389
going<font color="#E5E5E5"> to be putting into place about how</font>

641
00:26:51,619 --> 00:26:55,668
this<font color="#CCCCCC"> mappers</font><font color="#E5E5E5"> generated really depends on</font>

642
00:26:53,389 --> 00:26:59,600
how<font color="#E5E5E5"> you think</font><font color="#CCCCCC"> about insider threats at</font>

643
00:26:55,669 --> 00:27:00,889
your company so in<font color="#E5E5E5"> our case we've made</font>

644
00:26:59,600 --> 00:27:03,320
the conscious decision to<font color="#CCCCCC"> trust our</font>

645
00:27:00,889 --> 00:27:05,479
engineers and rely on things like CI

646
00:27:03,320 --> 00:27:07,639
checks and peer review in order<font color="#E5E5E5"> to make</font>

647
00:27:05,480 --> 00:27:10,669
sure<font color="#CCCCCC"> that</font><font color="#E5E5E5"> legitimate things are</font>

648
00:27:07,639 --> 00:27:12,799
committed but depending on<font color="#E5E5E5"> how you</font>

649
00:27:10,669 --> 00:27:15,169
approach this<font color="#E5E5E5"> you may want to have more</font>

650
00:27:12,799 --> 00:27:17,179
controls in place<font color="#E5E5E5"> and this system is</font>

651
00:27:15,169 --> 00:27:18,860
rather<font color="#E5E5E5"> flexible to do that all you</font><font color="#CCCCCC"> need</font>

652
00:27:17,179 --> 00:27:20,570
<font color="#CCCCCC">is</font><font color="#E5E5E5"> something that</font><font color="#CCCCCC"> can automatically</font>

653
00:27:18,860 --> 00:27:23,479
configure discover as much as

654
00:27:20,570 --> 00:27:26,389
and then under some conditions publish a

655
00:27:23,480 --> 00:27:28,760
new authorization map to some location

656
00:27:26,390 --> 00:27:31,160
<font color="#CCCCCC">so you could certainly imagine if you</font>

657
00:27:28,760 --> 00:27:32,629
wanted<font color="#CCCCCC"> more controls than this making it</font>

658
00:27:31,160 --> 00:27:34,610
<font color="#E5E5E5">so that when a new connection is</font>

659
00:27:32,630 --> 00:27:36,920
discovered it prompts the<font color="#E5E5E5"> security team</font>

660
00:27:34,610 --> 00:27:38,149
<font color="#CCCCCC">for a quick manual review and an</font>

661
00:27:36,920 --> 00:27:40,040
<font color="#E5E5E5">acknowledgement before that actually</font>

662
00:27:38,150 --> 00:27:42,230
<font color="#E5E5E5">gets distributed</font><font color="#CCCCCC"> so this does give</font>

663
00:27:40,040 --> 00:27:43,730
<font color="#CCCCCC">security a single point of control where</font>

664
00:27:42,230 --> 00:27:45,920
they can do any<font color="#E5E5E5"> sort of monitoring or</font>

665
00:27:43,730 --> 00:27:47,180
additional approvals if they wish while

666
00:27:45,920 --> 00:27:48,710
still<font color="#E5E5E5"> taking away a</font><font color="#CCCCCC"> lot of that</font>

667
00:27:47,180 --> 00:27:52,730
boilerplate work of<font color="#E5E5E5"> trying to</font><font color="#CCCCCC"> figure out</font>

668
00:27:48,710 --> 00:27:54,260
what<font color="#CCCCCC"> actually connects to what we can</font>

669
00:27:52,730 --> 00:27:57,700
actually<font color="#E5E5E5"> go further with authorization</font>

670
00:27:54,260 --> 00:28:00,200
instead of just telling all of<font color="#CCCCCC"> these</font>

671
00:27:57,700 --> 00:28:03,680
sort of discovery proxies<font color="#CCCCCC"> to allow these</font>

672
00:28:00,200 --> 00:28:06,980
identities<font color="#E5E5E5"> and ban these others</font><font color="#CCCCCC"> because</font>

673
00:28:03,680 --> 00:28:09,740
we're just<font color="#E5E5E5"> using vanilla TLS we can rely</font>

674
00:28:06,980 --> 00:28:13,820
on the heavy support for<font color="#E5E5E5"> these sorts of</font>

675
00:28:09,740 --> 00:28:15,470
protocols and many things so the reverse

676
00:28:13,820 --> 00:28:18,500
proxy that<font color="#E5E5E5"> we use is</font><font color="#CCCCCC"> the inbound proxy</font>

677
00:28:15,470 --> 00:28:20,870
has the feature<font color="#E5E5E5"> to inject information</font>

678
00:28:18,500 --> 00:28:23,930
about the client<font color="#E5E5E5"> certificate used into</font>

679
00:28:20,870 --> 00:28:26,030
<font color="#CCCCCC">HTP streams</font><font color="#E5E5E5"> that went through it most of</font>

680
00:28:23,930 --> 00:28:28,310
our<font color="#E5E5E5"> API is HTTP based ones</font><font color="#CCCCCC"> so this</font>

681
00:28:26,030 --> 00:28:30,770
applies<font color="#CCCCCC"> to most things</font><font color="#E5E5E5"> and it means that</font>

682
00:28:28,310 --> 00:28:32,899
<font color="#E5E5E5">whenever a service gets a call over TLS</font>

683
00:28:30,770 --> 00:28:34,670
<font color="#E5E5E5">it can just parse this very simple</font>

684
00:28:32,900 --> 00:28:36,950
header and know<font color="#CCCCCC"> exactly what sort</font><font color="#E5E5E5"> of</font>

685
00:28:34,670 --> 00:28:39,500
identity<font color="#E5E5E5"> is calling it making it trivial</font>

686
00:28:36,950 --> 00:28:41,710
to implement<font color="#CCCCCC"> various like permission</font>

687
00:28:39,500 --> 00:28:44,600
<font color="#E5E5E5">levels</font><font color="#CCCCCC"> depending</font><font color="#E5E5E5"> on your service</font><font color="#CCCCCC"> caller</font>

688
00:28:41,710 --> 00:28:46,040
<font color="#E5E5E5">so this is something that</font><font color="#CCCCCC"> sort</font><font color="#E5E5E5"> of</font>

689
00:28:44,600 --> 00:28:47,600
authorization control would have been

690
00:28:46,040 --> 00:28:48,950
really tough to implement before the

691
00:28:47,600 --> 00:28:51,379
system<font color="#E5E5E5"> because you'd have to set</font><font color="#CCCCCC"> up</font>

692
00:28:48,950 --> 00:28:54,100
maybe your own TLS system or maybe a

693
00:28:51,380 --> 00:28:59,180
system of tokens or keys or passwords

694
00:28:54,100 --> 00:29:00,709
<font color="#CCCCCC">but this lets us I'd you</font><font color="#E5E5E5"> know leave all</font>

695
00:28:59,180 --> 00:29:02,330
of<font color="#E5E5E5"> the tricky crypto stuff to the</font>

696
00:29:00,710 --> 00:29:04,490
security<font color="#E5E5E5"> on components and let app</font>

697
00:29:02,330 --> 00:29:07,899
developers<font color="#E5E5E5"> just parse a very simple</font>

698
00:29:04,490 --> 00:29:10,520
header and make decisions<font color="#CCCCCC"> based on that</font>

699
00:29:07,900 --> 00:29:12,290
so those are the three pillars<font color="#E5E5E5"> of</font><font color="#CCCCCC"> this</font>

700
00:29:10,520 --> 00:29:14,000
solution<font color="#CCCCCC"> we set up TLS in between</font>

701
00:29:12,290 --> 00:29:15,440
<font color="#E5E5E5">everything to give us the security</font>

702
00:29:14,000 --> 00:29:19,610
<font color="#CCCCCC">properties in communication that</font><font color="#E5E5E5"> we need</font>

703
00:29:15,440 --> 00:29:20,990
we give everything<font color="#CCCCCC"> an identity in order</font>

704
00:29:19,610 --> 00:29:23,600
<font color="#E5E5E5">to make</font><font color="#CCCCCC"> sure that</font><font color="#E5E5E5"> they can authenticate</font>

705
00:29:20,990 --> 00:29:27,410
<font color="#CCCCCC">to each other and enforce segmentation</font>

706
00:29:23,600 --> 00:29:29,179
by having specific<font color="#E5E5E5"> allow lists for every</font>

707
00:29:27,410 --> 00:29:31,280
service and then we automatically

708
00:29:29,180 --> 00:29:32,960
discover this map by parsing

709
00:29:31,280 --> 00:29:36,649
<font color="#CCCCCC">configurations</font><font color="#E5E5E5"> already there</font>

710
00:29:32,960 --> 00:29:39,350
but I'm not here just<font color="#E5E5E5"> to sell you on</font>

711
00:29:36,649 --> 00:29:42,260
<font color="#CCCCCC">this solution</font><font color="#E5E5E5"> because I like it on there</font>

712
00:29:39,350 --> 00:29:43,820
are some downsides<font color="#CCCCCC"> and to be perfectly</font>

713
00:29:42,260 --> 00:29:45,679
honest I want you<font color="#E5E5E5"> to</font><font color="#CCCCCC"> know about</font><font color="#E5E5E5"> them</font>

714
00:29:43,820 --> 00:29:47,990
<font color="#E5E5E5">before you consider</font><font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> blending some</font>

715
00:29:45,679 --> 00:29:49,190
<font color="#E5E5E5">something like this and so these are</font>

716
00:29:47,990 --> 00:29:54,080
<font color="#CCCCCC">just some of the</font><font color="#E5E5E5"> things that</font><font color="#CCCCCC"> we thought</font>

717
00:29:49,190 --> 00:29:55,880
about<font color="#E5E5E5"> and decided to accept first you</font>

718
00:29:54,080 --> 00:29:59,449
<font color="#CCCCCC">are</font><font color="#E5E5E5"> going to need to constantly</font>

719
00:29:55,880 --> 00:30:02,809
synchronize out this map of allow lists

720
00:29:59,450 --> 00:30:06,409
<font color="#E5E5E5">so or some subset of those allow lists</font>

721
00:30:02,809 --> 00:30:08,418
instead of having centralized<font color="#E5E5E5"> allowance</font>

722
00:30:06,409 --> 00:30:09,620
of various<font color="#CCCCCC"> Network communications like</font>

723
00:30:08,419 --> 00:30:11,570
you might have<font color="#CCCCCC"> if you have a</font><font color="#E5E5E5"> central</font>

724
00:30:09,620 --> 00:30:13,279
firewall<font color="#CCCCCC"> I'm you're sort of doing in a</font>

725
00:30:11,570 --> 00:30:14,750
distributed<font color="#CCCCCC"> way every node is</font>

726
00:30:13,279 --> 00:30:16,279
determining whether<font color="#E5E5E5"> or</font><font color="#CCCCCC"> not a</font><font color="#E5E5E5"> connection</font>

727
00:30:14,750 --> 00:30:19,640
is<font color="#E5E5E5"> allowed and so</font><font color="#CCCCCC"> that means</font><font color="#E5E5E5"> that</font><font color="#CCCCCC"> you</font>

728
00:30:16,279 --> 00:30:24,350
have<font color="#CCCCCC"> a reasonably strong need for a lot</font>

729
00:30:19,640 --> 00:30:25,789
of<font color="#E5E5E5"> bandwidth to synchronize this out</font><font color="#CCCCCC"> you</font>

730
00:30:24,350 --> 00:30:27,049
can<font color="#E5E5E5"> use caching which will make some</font>

731
00:30:25,789 --> 00:30:29,029
things a lot easier<font color="#CCCCCC"> and</font><font color="#E5E5E5"> I'll talk about</font>

732
00:30:27,049 --> 00:30:31,610
why we did<font color="#CCCCCC"> that but that is</font><font color="#E5E5E5"> going to</font>

733
00:30:29,029 --> 00:30:34,159
cost<font color="#E5E5E5"> you some in terms of</font><font color="#CCCCCC"> update latency</font>

734
00:30:31,610 --> 00:30:35,990
<font color="#E5E5E5">if the web the changes and you need to</font>

735
00:30:34,159 --> 00:30:39,940
<font color="#E5E5E5">allow a new</font><font color="#CCCCCC"> identity for</font><font color="#E5E5E5"> service that</font>

736
00:30:35,990 --> 00:30:43,809
<font color="#CCCCCC">may be slower</font><font color="#E5E5E5"> if you're using a cache</font>

737
00:30:39,940 --> 00:30:46,130
second if TLS has a problem<font color="#E5E5E5"> heartbleed</font>

738
00:30:43,809 --> 00:30:48,049
<font color="#CCCCCC">you have way more problems</font><font color="#E5E5E5"> than you used</font>

739
00:30:46,130 --> 00:30:50,210
to<font color="#E5E5E5"> because you're now relying as one</font><font color="#CCCCCC"> of</font>

740
00:30:48,049 --> 00:30:53,740
the core<font color="#E5E5E5"> security elements of your</font>

741
00:30:50,210 --> 00:30:56,870
system so<font color="#CCCCCC"> this</font><font color="#E5E5E5"> is something that we know</font>

742
00:30:53,740 --> 00:30:59,510
<font color="#E5E5E5">but the reasoning</font><font color="#CCCCCC"> here is</font><font color="#E5E5E5"> basically if</font>

743
00:30:56,870 --> 00:31:03,080
heartbleed happens again if we find some

744
00:30:59,510 --> 00:31:04,640
sort of major core issue<font color="#E5E5E5"> in TLS already</font>

745
00:31:03,080 --> 00:31:06,889
security is going<font color="#E5E5E5"> to</font><font color="#CCCCCC"> be</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> know</font><font color="#E5E5E5"> working</font>

746
00:31:04,640 --> 00:31:08,659
nights<font color="#E5E5E5"> until we can get that patched on</font>

747
00:31:06,890 --> 00:31:10,220
<font color="#E5E5E5">our front end web servers and so if</font>

748
00:31:08,659 --> 00:31:11,899
we're gonna<font color="#E5E5E5"> be massively deploying</font><font color="#CCCCCC"> new</font>

749
00:31:10,220 --> 00:31:14,179
<font color="#CCCCCC">opensl versions as quickly as we</font>

750
00:31:11,899 --> 00:31:15,918
<font color="#CCCCCC">possibly can that's</font><font color="#E5E5E5"> going to end up</font>

751
00:31:14,179 --> 00:31:17,870
patching up all these as<font color="#E5E5E5"> well so</font>

752
00:31:15,919 --> 00:31:20,149
basically<font color="#E5E5E5"> we</font><font color="#CCCCCC"> are relying on</font><font color="#E5E5E5"> the fact</font>

753
00:31:17,870 --> 00:31:21,590
<font color="#E5E5E5">that major SSL issues are going to get a</font>

754
00:31:20,149 --> 00:31:24,760
quick community response and be

755
00:31:21,590 --> 00:31:24,760
<font color="#E5E5E5">something that we can move quickly on</font>

756
00:31:26,260 --> 00:31:31,700
adding<font color="#CCCCCC"> more reverse proxies in your</font>

757
00:31:28,669 --> 00:31:33,919
<font color="#CCCCCC">traffic flow is turns out to be kind of</font>

758
00:31:31,700 --> 00:31:36,740
complicated<font color="#CCCCCC"> on this introduced a lot of</font>

759
00:31:33,919 --> 00:31:38,510
<font color="#E5E5E5">interesting behavior in some</font><font color="#CCCCCC"> services</font>

760
00:31:36,740 --> 00:31:40,700
<font color="#CCCCCC">and I'll talk a</font><font color="#E5E5E5"> little bit more about</font>

761
00:31:38,510 --> 00:31:43,639
the specific things<font color="#CCCCCC"> we ran into but it's</font>

762
00:31:40,700 --> 00:31:46,419
just something<font color="#CCCCCC"> to know</font><font color="#E5E5E5"> that the actual</font>

763
00:31:43,639 --> 00:31:48,428
<font color="#CCCCCC">edition of TLS two things</font><font color="#E5E5E5"> broke</font>

764
00:31:46,419 --> 00:31:54,190
little but the additional hop in the

765
00:31:48,429 --> 00:31:55,840
network<font color="#E5E5E5"> had surprising effects you do</font>

766
00:31:54,190 --> 00:31:57,279
need<font color="#E5E5E5"> to be able to run software wherever</font>

767
00:31:55,840 --> 00:31:58,869
you're<font color="#CCCCCC"> receiving traffic</font><font color="#E5E5E5"> through the</font>

768
00:31:57,279 --> 00:32:01,210
system because<font color="#CCCCCC"> you need to install that</font>

769
00:31:58,869 --> 00:32:03,668
secure listener and something<font color="#E5E5E5"> that can</font>

770
00:32:01,210 --> 00:32:04,929
download the allow lists if you manage

771
00:32:03,669 --> 00:32:06,759
all of your<font color="#E5E5E5"> own infrastructure this</font><font color="#CCCCCC"> is</font>

772
00:32:04,929 --> 00:32:08,950
relatively<font color="#CCCCCC"> easy but if you</font><font color="#E5E5E5"> have things</font>

773
00:32:06,759 --> 00:32:10,629
like vendor devices or hosted<font color="#E5E5E5"> services</font>

774
00:32:08,950 --> 00:32:13,299
where<font color="#E5E5E5"> you cannot install arbitrary</font>

775
00:32:10,629 --> 00:32:15,189
<font color="#CCCCCC">software that gets a little</font><font color="#E5E5E5"> harder</font><font color="#CCCCCC"> when</font>

776
00:32:13,299 --> 00:32:17,918
we have some services<font color="#E5E5E5"> that</font><font color="#CCCCCC"> are in this</font>

777
00:32:15,190 --> 00:32:19,960
state<font color="#CCCCCC"> we basically</font><font color="#E5E5E5"> put proxy boxes in</font>

778
00:32:17,919 --> 00:32:23,889
<font color="#CCCCCC">front of them and I</font><font color="#E5E5E5"> use those two</font>

779
00:32:19,960 --> 00:32:25,149
<font color="#E5E5E5">handles the authentication finally you</font>

780
00:32:23,889 --> 00:32:27,969
<font color="#CCCCCC">are going to want some sort</font><font color="#E5E5E5"> of</font>

781
00:32:25,149 --> 00:32:29,709
<font color="#CCCCCC">certificate revocation</font><font color="#E5E5E5"> because if a node</font>

782
00:32:27,970 --> 00:32:33,460
does get compromised you'll need to you

783
00:32:29,710 --> 00:32:35,950
know kick out its permissions<font color="#CCCCCC"> and this</font><font color="#E5E5E5"> I</font>

784
00:32:33,460 --> 00:32:38,289
<font color="#E5E5E5">say is usually tricky</font><font color="#CCCCCC"> there are</font>

785
00:32:35,950 --> 00:32:39,489
certainly ways<font color="#E5E5E5"> to do</font><font color="#CCCCCC"> it</font><font color="#E5E5E5"> but this is</font>

786
00:32:38,289 --> 00:32:42,489
<font color="#E5E5E5">something to</font><font color="#CCCCCC"> be thinking about and</font>

787
00:32:39,489 --> 00:32:46,799
scoping as you're<font color="#E5E5E5"> considering doing</font><font color="#CCCCCC"> a</font>

788
00:32:42,489 --> 00:32:49,539
<font color="#E5E5E5">deployment like this so rolling it out</font>

789
00:32:46,799 --> 00:32:50,980
<font color="#CCCCCC">my hope is that you know</font><font color="#E5E5E5"> I've described</font>

790
00:32:49,539 --> 00:32:53,850
<font color="#E5E5E5">the solution but it's not just</font>

791
00:32:50,980 --> 00:32:56,499
<font color="#E5E5E5">theoretical this is something we did and</font>

792
00:32:53,850 --> 00:32:58,090
<font color="#E5E5E5">so I hope</font><font color="#CCCCCC"> that I can</font><font color="#E5E5E5"> share as much as I</font>

793
00:32:56,499 --> 00:33:04,720
can<font color="#CCCCCC"> about what we learned throughout</font>

794
00:32:58,090 --> 00:33:06,970
this whole process so to start<font color="#E5E5E5"> with sort</font>

795
00:33:04,720 --> 00:33:08,769
<font color="#E5E5E5">of the technical details we built this</font>

796
00:33:06,970 --> 00:33:13,899
mostly out of<font color="#E5E5E5"> components</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> are</font>

797
00:33:08,769 --> 00:33:16,299
available<font color="#E5E5E5"> and</font><font color="#CCCCCC"> open-source</font><font color="#E5E5E5"> so for the</font>

798
00:33:13,899 --> 00:33:18,820
inbound proxy we used<font color="#E5E5E5"> envoy which is a</font>

799
00:33:16,299 --> 00:33:20,499
<font color="#E5E5E5">project open sourced out of</font><font color="#CCCCCC"> lyft</font><font color="#E5E5E5"> that is</font>

800
00:33:18,820 --> 00:33:22,210
really growing<font color="#E5E5E5"> in popularity in</font><font color="#CCCCCC"> the</font>

801
00:33:20,499 --> 00:33:23,830
service mesh world<font color="#E5E5E5"> and for good reason</font>

802
00:33:22,210 --> 00:33:28,059
it's really<font color="#CCCCCC"> designed for this</font><font color="#E5E5E5"> sort of</font>

803
00:33:23,830 --> 00:33:30,279
<font color="#E5E5E5">thing it's modern it's fast</font><font color="#CCCCCC"> it has great</font>

804
00:33:28,059 --> 00:33:33,639
support<font color="#CCCCCC"> for TLS has a ton of metrics</font>

805
00:33:30,279 --> 00:33:36,279
which are<font color="#CCCCCC"> really useful</font><font color="#E5E5E5"> and generally</font>

806
00:33:33,639 --> 00:33:37,779
served us very well the one thing we<font color="#E5E5E5"> ran</font>

807
00:33:36,279 --> 00:33:40,950
into<font color="#E5E5E5"> with</font><font color="#CCCCCC"> envoy that is quite the</font>

808
00:33:37,779 --> 00:33:44,409
<font color="#E5E5E5">stickler about the HTTP 1.1 standard and</font>

809
00:33:40,950 --> 00:33:45,940
that<font color="#CCCCCC"> led to some funny behavior and</font>

810
00:33:44,409 --> 00:33:50,289
<font color="#E5E5E5">certain other</font><font color="#CCCCCC"> applications that</font><font color="#E5E5E5"> were not</font>

811
00:33:45,940 --> 00:33:52,299
so strict<font color="#CCCCCC"> about</font><font color="#E5E5E5"> it</font><font color="#CCCCCC"> but overall</font><font color="#E5E5E5"> envoy was</font>

812
00:33:50,289 --> 00:33:54,009
<font color="#E5E5E5">a great choice</font><font color="#CCCCCC"> and we're</font><font color="#E5E5E5"> actually</font>

813
00:33:52,299 --> 00:33:56,629
migrating to use that on our outbound

814
00:33:54,009 --> 00:33:59,120
<font color="#E5E5E5">side as well</font>

815
00:33:56,630 --> 00:34:01,070
as I sort of<font color="#E5E5E5"> alluded to earlier we gave</font>

816
00:33:59,120 --> 00:34:05,300
every note<font color="#E5E5E5"> and</font><font color="#CCCCCC"> an entity</font><font color="#E5E5E5"> based on its</font>

817
00:34:01,070 --> 00:34:06,649
AWS<font color="#E5E5E5"> I am</font><font color="#CCCCCC"> rule</font><font color="#E5E5E5"> and this was just over a</font>

818
00:34:05,300 --> 00:34:07,820
natural<font color="#CCCCCC"> choice</font><font color="#E5E5E5"> for us because this</font><font color="#CCCCCC"> is</font>

819
00:34:06,650 --> 00:34:10,850
already<font color="#E5E5E5"> how we were thinking about</font>

820
00:34:07,820 --> 00:34:12,199
permissions<font color="#E5E5E5"> for nodes</font><font color="#CCCCCC"> and now nodes got</font>

821
00:34:10,850 --> 00:34:14,989
their permissions by<font color="#E5E5E5"> their I am</font><font color="#CCCCCC"> role and</font>

822
00:34:12,199 --> 00:34:17,710
<font color="#E5E5E5">that also</font><font color="#CCCCCC"> I kind of controlled what</font>

823
00:34:14,989 --> 00:34:20,029
services they were allowed<font color="#CCCCCC"> to</font><font color="#E5E5E5"> talk to</font>

824
00:34:17,710 --> 00:34:21,679
the<font color="#E5E5E5"> Arachne service I mentioned is</font>

825
00:34:20,030 --> 00:34:25,340
basically just a continually running

826
00:34:21,679 --> 00:34:27,290
<font color="#E5E5E5">Ruby script that loads a chef repo and</font>

827
00:34:25,340 --> 00:34:31,610
some kubernetes artifacts<font color="#E5E5E5"> and parses</font>

828
00:34:27,290 --> 00:34:34,100
them these<font color="#E5E5E5"> authorization</font><font color="#CCCCCC"> Maps the</font>

829
00:34:31,610 --> 00:34:36,830
<font color="#CCCCCC">quote-unquote web files are uploaded to</font>

830
00:34:34,100 --> 00:34:38,629
<font color="#E5E5E5">and download</font><font color="#CCCCCC"> from s3</font><font color="#E5E5E5"> so we're using s3</font>

831
00:34:36,830 --> 00:34:42,440
as the source<font color="#E5E5E5"> where the salt gets</font>

832
00:34:38,629 --> 00:34:45,529
<font color="#E5E5E5">actually pulled from all in all on it</font>

833
00:34:42,440 --> 00:34:48,379
was it's<font color="#E5E5E5"> about four minutes to fully</font>

834
00:34:45,530 --> 00:34:50,000
compute the web of services<font color="#CCCCCC"> and generate</font>

835
00:34:48,379 --> 00:34:51,770
one of<font color="#CCCCCC"> these web files</font><font color="#E5E5E5"> meaning that's</font>

836
00:34:50,000 --> 00:34:53,540
about a four minute delay in between<font color="#CCCCCC"> a</font>

837
00:34:51,770 --> 00:34:56,060
change in topology<font color="#CCCCCC"> that is a service</font>

838
00:34:53,540 --> 00:34:57,830
<font color="#E5E5E5">adding or removing a dependency and when</font>

839
00:34:56,060 --> 00:34:59,960
that<font color="#E5E5E5"> gets reflected in allow lists in</font>

840
00:34:57,830 --> 00:35:01,400
our experience this is far shorter than

841
00:34:59,960 --> 00:35:04,280
the time<font color="#CCCCCC"> it takes</font><font color="#E5E5E5"> to actually</font><font color="#CCCCCC"> deploy</font>

842
00:35:01,400 --> 00:35:06,590
such a change to production<font color="#CCCCCC"> so</font><font color="#E5E5E5"> we</font>

843
00:35:04,280 --> 00:35:09,050
haven't<font color="#CCCCCC"> really run into race conditions</font>

844
00:35:06,590 --> 00:35:13,850
where a new dependency gets<font color="#E5E5E5"> added before</font>

845
00:35:09,050 --> 00:35:16,820
it's<font color="#E5E5E5"> allowed we had some pretty specific</font>

846
00:35:13,850 --> 00:35:19,759
availability considerations<font color="#CCCCCC"> mainly on</font>

847
00:35:16,820 --> 00:35:23,780
caching the<font color="#CCCCCC"> output</font><font color="#E5E5E5"> of these of Arachne</font>

848
00:35:19,760 --> 00:35:26,480
<font color="#CCCCCC">these web files</font><font color="#E5E5E5"> so we wanted to make</font>

849
00:35:23,780 --> 00:35:28,360
sure<font color="#E5E5E5"> that if Arachne went down and we</font>

850
00:35:26,480 --> 00:35:30,830
stopped being able to<font color="#E5E5E5"> generate these</font>

851
00:35:28,360 --> 00:35:33,170
authorization<font color="#E5E5E5"> maps that all the traffic</font>

852
00:35:30,830 --> 00:35:35,690
kept working<font color="#E5E5E5"> we didn't want to be owners</font>

853
00:35:33,170 --> 00:35:38,150
<font color="#CCCCCC">of a service</font><font color="#E5E5E5"> that if it went down would</font>

854
00:35:35,690 --> 00:35:40,310
would ban<font color="#CCCCCC"> all traffic</font><font color="#E5E5E5"> and really if you</font>

855
00:35:38,150 --> 00:35:42,740
think<font color="#E5E5E5"> about it by decentralizing all of</font>

856
00:35:40,310 --> 00:35:43,660
the<font color="#E5E5E5"> authentication of service calls you</font>

857
00:35:42,740 --> 00:35:47,419
want<font color="#CCCCCC"> to be able</font><font color="#E5E5E5"> to rely on</font>

858
00:35:43,660 --> 00:35:49,759
decentralization benefits<font color="#E5E5E5"> so by putting</font>

859
00:35:47,420 --> 00:35:51,440
everything<font color="#E5E5E5"> in</font><font color="#CCCCCC"> s3 and letting nodes</font>

860
00:35:49,760 --> 00:35:52,970
download it from there<font color="#E5E5E5"> we can make sure</font>

861
00:35:51,440 --> 00:35:55,370
<font color="#E5E5E5">that if Arachne has some sort of</font>

862
00:35:52,970 --> 00:35:56,779
<font color="#CCCCCC">critical problem if it stops running the</font>

863
00:35:55,370 --> 00:36:02,290
worst thing<font color="#CCCCCC"> that happens is that new</font>

864
00:35:56,780 --> 00:36:02,290
topology<font color="#CCCCCC"> stops being reflected so</font>

865
00:36:03,599 --> 00:36:08,759
this means<font color="#CCCCCC"> that traffic</font><font color="#E5E5E5"> keeps flowing</font>

866
00:36:06,059 --> 00:36:12,049
even if<font color="#CCCCCC"> s3 goes down as it</font><font color="#E5E5E5"> famously did</font>

867
00:36:08,759 --> 00:36:15,390
last year<font color="#CCCCCC"> I think</font><font color="#E5E5E5"> that was a fun day</font>

868
00:36:12,049 --> 00:36:17,519
<font color="#CCCCCC">things basically still work</font><font color="#E5E5E5"> nodes won't</font>

869
00:36:15,390 --> 00:36:19,979
be able<font color="#E5E5E5"> to download new</font><font color="#CCCCCC"> topology changes</font>

870
00:36:17,519 --> 00:36:21,959
but they'll<font color="#E5E5E5"> still have local cache ones</font>

871
00:36:19,979 --> 00:36:25,049
on disk<font color="#E5E5E5"> and all the traffic will keep</font>

872
00:36:21,960 --> 00:36:27,029
flying as normal<font color="#CCCCCC"> so this was a choice</font>

873
00:36:25,049 --> 00:36:30,359
<font color="#CCCCCC">you made early</font><font color="#E5E5E5"> on and has served us very</font>

874
00:36:27,029 --> 00:36:31,440
well because I when there are new and

875
00:36:30,359 --> 00:36:33,808
interesting<font color="#E5E5E5"> things that happen with</font>

876
00:36:31,440 --> 00:36:35,069
<font color="#E5E5E5">Arachne no one really notices generally</font>

877
00:36:33,809 --> 00:36:38,999
security<font color="#E5E5E5"> is able to fix it before</font>

878
00:36:35,069 --> 00:36:41,910
someone changes the<font color="#CCCCCC"> topology so the plan</font>

879
00:36:38,999 --> 00:36:44,999
<font color="#CCCCCC">for</font><font color="#E5E5E5"> a rollout was basically these six</font>

880
00:36:41,910 --> 00:36:47,009
steps we started by computing<font color="#E5E5E5"> this</font>

881
00:36:44,999 --> 00:36:49,319
authorization map since this<font color="#E5E5E5"> all kind of</font>

882
00:36:47,009 --> 00:36:51,239
works on offline data<font color="#E5E5E5"> we were</font><font color="#CCCCCC"> able to</font>

883
00:36:49,319 --> 00:36:53,099
<font color="#E5E5E5">spend</font><font color="#CCCCCC"> some time</font><font color="#E5E5E5"> writing the</font><font color="#CCCCCC"> software to</font>

884
00:36:51,239 --> 00:36:55,259
do<font color="#E5E5E5"> this and getting it</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> work nicely</font>

885
00:36:53,099 --> 00:36:58,019
<font color="#E5E5E5">before we had to</font><font color="#CCCCCC"> actually touch any</font>

886
00:36:55,259 --> 00:37:00,960
production<font color="#E5E5E5"> services so we could build</font>

887
00:36:58,019 --> 00:37:02,519
<font color="#E5E5E5">that map and verify its correctness next</font>

888
00:37:00,960 --> 00:37:05,549
we wanted<font color="#E5E5E5"> to give everything on</font>

889
00:37:02,519 --> 00:37:07,019
identifying certificate so the idea of

890
00:37:05,549 --> 00:37:09,329
<font color="#CCCCCC">doing this first is that this</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> a</font>

891
00:37:07,019 --> 00:37:10,950
pretty small<font color="#E5E5E5"> change and something</font><font color="#CCCCCC"> that</font>

892
00:37:09,329 --> 00:37:13,079
we could<font color="#E5E5E5"> pretty safely roll out we're</font>

893
00:37:10,950 --> 00:37:15,509
simply dropping<font color="#E5E5E5"> a certificate on a bunch</font>

894
00:37:13,079 --> 00:37:17,519
of<font color="#E5E5E5"> nodes</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> it's also relatively easy</font>

895
00:37:15,509 --> 00:37:19,380
<font color="#CCCCCC">to verify that</font><font color="#E5E5E5"> this worked before moving</font>

896
00:37:17,519 --> 00:37:20,899
on<font color="#CCCCCC"> to</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> next step we can check</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> the</font>

897
00:37:19,380 --> 00:37:23,130
existence<font color="#CCCCCC"> of these files</font><font color="#E5E5E5"> in a</font>

898
00:37:20,900 --> 00:37:27,299
large-scale<font color="#E5E5E5"> way and make sure they look</font>

899
00:37:23,130 --> 00:37:29,099
<font color="#E5E5E5">good third we installed this receiving</font>

900
00:37:27,299 --> 00:37:31,559
proxy everywhere and started listening

901
00:37:29,099 --> 00:37:32,880
and setting up this<font color="#E5E5E5"> traffic routing at</font>

902
00:37:31,559 --> 00:37:34,950
this point no<font color="#CCCCCC"> traffic is actually</font>

903
00:37:32,880 --> 00:37:38,609
<font color="#CCCCCC">flowing through</font><font color="#E5E5E5"> these TLS tunnels we're</font>

904
00:37:34,950 --> 00:37:42,328
simply giving it the path to this also

905
00:37:38,609 --> 00:37:47,609
<font color="#E5E5E5">lets us configure or verify the step</font>

906
00:37:42,329 --> 00:37:50,099
before<font color="#E5E5E5"> moving on next we can start</font>

907
00:37:47,609 --> 00:37:52,828
<font color="#CCCCCC">actually doing the testing and</font><font color="#E5E5E5"> building</font>

908
00:37:50,099 --> 00:37:54,599
the confidence<font color="#E5E5E5"> in this system</font><font color="#CCCCCC"> so we can</font>

909
00:37:52,829 --> 00:37:56,160
start<font color="#CCCCCC"> routing some traffic through these</font>

910
00:37:54,599 --> 00:37:59,190
new secure listeners and<font color="#CCCCCC"> we've</font>

911
00:37:56,160 --> 00:38:00,629
configured<font color="#E5E5E5"> our sort of</font><font color="#CCCCCC"> configuration in</font>

912
00:37:59,190 --> 00:38:04,019
a way that we could turn<font color="#E5E5E5"> it on or turn</font>

913
00:38:00,630 --> 00:38:05,789
<font color="#CCCCCC">it off</font><font color="#E5E5E5"> per service so we picked a bunch</font>

914
00:38:04,019 --> 00:38:08,848
<font color="#E5E5E5">of services</font><font color="#CCCCCC"> that seemed representative</font>

915
00:38:05,789 --> 00:38:12,930
<font color="#CCCCCC">hike</font><font color="#E5E5E5"> ups ones</font><font color="#CCCCCC"> loke ups ones</font><font color="#E5E5E5"> ones that</font>

916
00:38:08,849 --> 00:38:14,849
use HTTP ones that were playing<font color="#E5E5E5"> TCP</font><font color="#CCCCCC"> just</font>

917
00:38:12,930 --> 00:38:16,649
a great variety<font color="#E5E5E5"> of</font><font color="#CCCCCC"> things that that</font>

918
00:38:14,849 --> 00:38:17,369
<font color="#E5E5E5">seemed like</font><font color="#CCCCCC"> they would sort</font><font color="#E5E5E5"> of stress</font>

919
00:38:16,650 --> 00:38:19,259
test the system

920
00:38:17,369 --> 00:38:20,700
and we turn these<font color="#CCCCCC"> on one</font><font color="#E5E5E5"> by one and</font>

921
00:38:19,259 --> 00:38:25,049
built confidence<font color="#E5E5E5"> that this is going to</font>

922
00:38:20,700 --> 00:38:27,210
<font color="#CCCCCC">work Step five</font><font color="#E5E5E5"> is sort of the radical</font>

923
00:38:25,049 --> 00:38:31,769
one and that is<font color="#E5E5E5"> the</font><font color="#CCCCCC"> switching</font><font color="#E5E5E5"> everything</font>

924
00:38:27,210 --> 00:38:34,109
<font color="#E5E5E5">over at once</font><font color="#CCCCCC"> this is not always</font><font color="#E5E5E5"> how you</font>

925
00:38:31,769 --> 00:38:35,999
want to<font color="#E5E5E5"> run</font><font color="#CCCCCC"> operations but</font><font color="#E5E5E5"> we chose this</font>

926
00:38:34,109 --> 00:38:37,619
for a very good reason<font color="#E5E5E5"> which is that</font>

927
00:38:35,999 --> 00:38:40,640
<font color="#E5E5E5">there were two</font><font color="#CCCCCC"> people working</font><font color="#E5E5E5"> on this</font>

928
00:38:37,619 --> 00:38:43,259
<font color="#E5E5E5">project and there were you</font><font color="#CCCCCC"> know</font>

929
00:38:40,640 --> 00:38:44,578
<font color="#E5E5E5">1098 other engineers building services</font>

930
00:38:43,259 --> 00:38:46,019
as fast as they could<font color="#E5E5E5"> and we were</font>

931
00:38:44,579 --> 00:38:48,719
reasonably confident<font color="#E5E5E5"> that if we tried to</font>

932
00:38:46,019 --> 00:38:51,269
<font color="#CCCCCC">go</font><font color="#E5E5E5"> one by</font><font color="#CCCCCC"> one</font><font color="#E5E5E5"> we</font><font color="#CCCCCC"> would</font><font color="#E5E5E5"> we would never</font>

933
00:38:48,719 --> 00:38:53,130
catch up<font color="#E5E5E5"> we had to be able</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> build a</font>

934
00:38:51,269 --> 00:38:56,339
system<font color="#CCCCCC"> that we could switch on all at</font>

935
00:38:53,130 --> 00:39:01,880
once<font color="#CCCCCC"> and confidently move into a post</font>

936
00:38:56,339 --> 00:39:04,288
<font color="#CCCCCC">plaintext future our final step is</font>

937
00:39:01,880 --> 00:39:06,960
<font color="#E5E5E5">rebinding services to localhost</font><font color="#CCCCCC"> so that</font>

938
00:39:04,289 --> 00:39:09,630
these security guarantees were<font color="#E5E5E5"> enforced</font>

939
00:39:06,960 --> 00:39:10,920
<font color="#E5E5E5">so we did this last on and this was sort</font>

940
00:39:09,630 --> 00:39:12,930
of<font color="#E5E5E5"> painful from a security perspective</font>

941
00:39:10,920 --> 00:39:14,729
<font color="#E5E5E5">because you</font><font color="#CCCCCC"> really have to wait till</font>

942
00:39:12,930 --> 00:39:17,009
step<font color="#CCCCCC"> six is complete</font><font color="#E5E5E5"> before you really</font>

943
00:39:14,729 --> 00:39:18,509
<font color="#E5E5E5">get the security benefits</font><font color="#CCCCCC"> here</font><font color="#E5E5E5"> but we</font>

944
00:39:17,009 --> 00:39:20,549
had to give ourselves the<font color="#E5E5E5"> ability</font><font color="#CCCCCC"> to</font>

945
00:39:18,509 --> 00:39:22,890
<font color="#CCCCCC">rollback if things turned</font><font color="#E5E5E5"> out to have</font>

946
00:39:20,549 --> 00:39:25,109
problems we wanted to make<font color="#CCCCCC"> sure</font><font color="#E5E5E5"> that if</font>

947
00:39:22,890 --> 00:39:27,390
switching to TLS<font color="#CCCCCC"> first service</font><font color="#E5E5E5"> caused</font>

948
00:39:25,109 --> 00:39:29,848
<font color="#E5E5E5">some unintended effect we could</font><font color="#CCCCCC"> rollback</font>

949
00:39:27,390 --> 00:39:33,629
<font color="#E5E5E5">fix that</font><font color="#CCCCCC"> and then roll forward again</font>

950
00:39:29,849 --> 00:39:36,089
<font color="#E5E5E5">once that was dealt</font><font color="#CCCCCC"> with so to</font><font color="#E5E5E5"> sort of</font>

951
00:39:33,630 --> 00:39:40,559
visualize<font color="#E5E5E5"> this we</font><font color="#CCCCCC"> start with the nodes</font>

952
00:39:36,089 --> 00:39:42,328
we've always had those we built<font color="#E5E5E5"> the</font>

953
00:39:40,559 --> 00:39:45,479
<font color="#E5E5E5">authorization map and made sure that</font><font color="#CCCCCC"> was</font>

954
00:39:42,329 --> 00:39:49,460
<font color="#CCCCCC">available first</font><font color="#E5E5E5"> moved on to adding the</font>

955
00:39:45,479 --> 00:39:51,718
<font color="#E5E5E5">certificates to everything we installed</font>

956
00:39:49,460 --> 00:39:56,519
<font color="#E5E5E5">the reverse proxies with their</font>

957
00:39:51,719 --> 00:39:58,710
authorization logic we turned on<font color="#E5E5E5"> TLS for</font>

958
00:39:56,519 --> 00:40:01,218
<font color="#E5E5E5">some things to make</font><font color="#CCCCCC"> sure</font><font color="#E5E5E5"> that it worked</font>

959
00:39:58,710 --> 00:40:06,269
and<font color="#E5E5E5"> then on plaintext deprecation day</font>

960
00:40:01,219 --> 00:40:09,119
everything went to TLS so we did this in

961
00:40:06,269 --> 00:40:11,910
April<font color="#CCCCCC"> of</font><font color="#E5E5E5"> this year and there's a lot of</font>

962
00:40:09,119 --> 00:40:14,910
things that<font color="#E5E5E5"> went well we went for about</font>

963
00:40:11,910 --> 00:40:17,129
<font color="#CCCCCC">15 percent</font><font color="#E5E5E5"> internal TLS usage to 70</font>

964
00:40:14,910 --> 00:40:19,140
percent<font color="#CCCCCC"> in one evening</font><font color="#E5E5E5"> which was</font><font color="#CCCCCC"> really</font>

965
00:40:17,130 --> 00:40:20,460
<font color="#CCCCCC">awesome and something</font><font color="#E5E5E5"> that I</font><font color="#CCCCCC"> don't</font><font color="#E5E5E5"> think</font>

966
00:40:19,140 --> 00:40:25,229
<font color="#E5E5E5">would have been possible with any other</font>

967
00:40:20,460 --> 00:40:27,450
scheme we made sure<font color="#CCCCCC"> that there were a</font>

968
00:40:25,229 --> 00:40:29,910
lot of security<font color="#E5E5E5"> or non security benefits</font>

969
00:40:27,450 --> 00:40:31,269
to<font color="#E5E5E5"> this system and this let</font><font color="#CCCCCC"> us get wider</font>

970
00:40:29,910 --> 00:40:33,459
organizational support for

971
00:40:31,269 --> 00:40:36,749
such a change<font color="#E5E5E5"> you know these sorts of</font>

972
00:40:33,459 --> 00:40:39,189
massive sweeping infrastructure changes

973
00:40:36,749 --> 00:40:42,069
<font color="#E5E5E5">because they affect everything can make</font>

974
00:40:39,189 --> 00:40:43,390
other engineers nervous<font color="#CCCCCC"> especially if</font>

975
00:40:42,069 --> 00:40:46,989
<font color="#CCCCCC">people who were</font><font color="#E5E5E5"> primarily concerned</font>

976
00:40:43,390 --> 00:40:48,429
<font color="#CCCCCC">about uptime</font><font color="#E5E5E5"> and so we wanted to make</font>

977
00:40:46,989 --> 00:40:50,919
sure<font color="#E5E5E5"> there was plenty of stuff in there</font>

978
00:40:48,429 --> 00:40:53,019
<font color="#CCCCCC">for them to</font><font color="#E5E5E5"> some of the chief benefits</font>

979
00:40:50,919 --> 00:40:54,729
we provided included much<font color="#E5E5E5"> easier</font>

980
00:40:53,019 --> 00:40:57,098
configuration<font color="#E5E5E5"> because we were</font>

981
00:40:54,729 --> 00:40:58,419
automatically<font color="#CCCCCC"> assigning identities to</font>

982
00:40:57,099 --> 00:41:00,189
everything and pre configuring

983
00:40:58,419 --> 00:41:02,859
certificates<font color="#CCCCCC"> and she was no longer had</font>

984
00:41:00,189 --> 00:41:04,649
<font color="#CCCCCC">to think</font><font color="#E5E5E5"> about setting up a custom MPLS</font>

985
00:41:02,859 --> 00:41:08,890
connection if they needed<font color="#E5E5E5"> security</font>

986
00:41:04,649 --> 00:41:10,749
benefits performance<font color="#CCCCCC"> I'll talk about</font>

987
00:41:08,890 --> 00:41:13,419
<font color="#CCCCCC">that in a sec but it the numbers are</font>

988
00:41:10,749 --> 00:41:15,698
good<font color="#E5E5E5"> and then there were</font><font color="#CCCCCC"> ton more</font>

989
00:41:13,419 --> 00:41:17,199
metrics<font color="#CCCCCC"> available so</font><font color="#E5E5E5"> people could have</font>

990
00:41:15,699 --> 00:41:18,609
greater observability<font color="#E5E5E5"> in their services</font>

991
00:41:17,199 --> 00:41:23,169
and<font color="#CCCCCC"> realize</font><font color="#E5E5E5"> what was going</font><font color="#CCCCCC"> on and</font><font color="#E5E5E5"> that</font>

992
00:41:18,609 --> 00:41:26,649
<font color="#E5E5E5">was operationally very helpful the other</font>

993
00:41:23,169 --> 00:41:28,029
thing that we did<font color="#CCCCCC"> that was a</font><font color="#E5E5E5"> really good</font>

994
00:41:26,649 --> 00:41:31,058
<font color="#E5E5E5">choice was making sure that we had</font><font color="#CCCCCC"> the</font>

995
00:41:28,029 --> 00:41:33,189
right<font color="#E5E5E5"> configuration we could disable TLS</font>

996
00:41:31,059 --> 00:41:36,489
routing for individual<font color="#E5E5E5"> services on a</font>

997
00:41:33,189 --> 00:41:37,839
one-off basis so<font color="#E5E5E5"> that if we determined</font>

998
00:41:36,489 --> 00:41:40,569
<font color="#E5E5E5">that a certain service was having a</font>

999
00:41:37,839 --> 00:41:42,369
problem<font color="#E5E5E5"> it we didn't have to roll the</font>

1000
00:41:40,569 --> 00:41:44,859
whole<font color="#CCCCCC"> thing back</font><font color="#E5E5E5"> we could keep the wins</font>

1001
00:41:42,369 --> 00:41:46,779
we'd gotten and<font color="#CCCCCC"> roll certain services</font>

1002
00:41:44,859 --> 00:41:51,788
back in<font color="#E5E5E5"> order to fix them</font><font color="#CCCCCC"> before moving</font>

1003
00:41:46,779 --> 00:41:53,169
<font color="#E5E5E5">forward of course</font><font color="#CCCCCC"> you know I'm here to</font>

1004
00:41:51,789 --> 00:41:55,299
<font color="#E5E5E5">be honest with you there are some things</font>

1005
00:41:53,169 --> 00:42:00,009
<font color="#E5E5E5">that were hiccups during the whole</font>

1006
00:41:55,299 --> 00:42:01,929
process as I mentioned earlier running

1007
00:42:00,009 --> 00:42:03,849
everything<font color="#CCCCCC"> for an inbound proxy</font><font color="#E5E5E5"> sounds</font>

1008
00:42:01,929 --> 00:42:07,389
<font color="#E5E5E5">good on paper but leads to some weird</font>

1009
00:42:03,849 --> 00:42:09,749
stuff in practice so of the<font color="#E5E5E5"> 2500</font>

1010
00:42:07,389 --> 00:42:12,189
services most of them took<font color="#E5E5E5"> this fine</font>

1011
00:42:09,749 --> 00:42:15,069
<font color="#CCCCCC">there's just a small percentage that did</font>

1012
00:42:12,189 --> 00:42:16,719
weird<font color="#CCCCCC"> things there are some</font><font color="#E5E5E5"> things that</font>

1013
00:42:15,069 --> 00:42:18,369
<font color="#E5E5E5">change if you're using a reverse proxy</font>

1014
00:42:16,719 --> 00:42:21,130
like all<font color="#E5E5E5"> your traffic is suddenly coming</font>

1015
00:42:18,369 --> 00:42:23,289
from localhost even small<font color="#CCCCCC"> things</font><font color="#E5E5E5"> like</font>

1016
00:42:21,130 --> 00:42:25,809
changing the<font color="#E5E5E5"> case of HTTP headers which</font>

1017
00:42:23,289 --> 00:42:27,989
is fully allowed by the spec can lead to

1018
00:42:25,809 --> 00:42:31,389
weird<font color="#E5E5E5"> out behavior in some applications</font>

1019
00:42:27,989 --> 00:42:32,949
reverse proxies also can mess with

1020
00:42:31,389 --> 00:42:35,199
particularly<font color="#E5E5E5"> stateful things like</font>

1021
00:42:32,949 --> 00:42:37,630
WebSockets<font color="#CCCCCC"> we didn't think</font><font color="#E5E5E5"> about the</font>

1022
00:42:35,199 --> 00:42:39,849
WebSockets case and<font color="#CCCCCC"> did not</font><font color="#E5E5E5"> have support</font>

1023
00:42:37,630 --> 00:42:42,249
<font color="#E5E5E5">for that on day zero that was a quick</font>

1024
00:42:39,849 --> 00:42:43,929
day one patch to teach our reverse proxy

1025
00:42:42,249 --> 00:42:45,160
that WebSocket connections are special

1026
00:42:43,929 --> 00:42:46,690
needs<font color="#CCCCCC"> to be handled special</font>

1027
00:42:45,160 --> 00:42:49,390
so all<font color="#E5E5E5"> of these things are generally</font>

1028
00:42:46,690 --> 00:42:51,220
<font color="#E5E5E5">surmountable but you are gonna run into</font>

1029
00:42:49,390 --> 00:42:52,569
<font color="#CCCCCC">some weird</font><font color="#E5E5E5"> behavior the thing that I</font>

1030
00:42:51,220 --> 00:42:55,839
thought<font color="#CCCCCC"> was</font><font color="#E5E5E5"> funny</font><font color="#CCCCCC"> about all this is that</font>

1031
00:42:52,569 --> 00:42:56,740
<font color="#CCCCCC">really the</font><font color="#E5E5E5"> biggest problems we had had</font>

1032
00:42:55,839 --> 00:42:59,440
nothing<font color="#E5E5E5"> to do with the security</font>

1033
00:42:56,740 --> 00:43:01,149
<font color="#CCCCCC">properties</font><font color="#E5E5E5"> even</font><font color="#CCCCCC"> if we'd had a plain HTTP</font>

1034
00:42:59,440 --> 00:43:05,980
reverse proxy<font color="#CCCCCC"> we would</font><font color="#E5E5E5"> have had the same</font>

1035
00:43:01,150 --> 00:43:07,780
problems our testing process<font color="#E5E5E5"> because of</font>

1036
00:43:05,980 --> 00:43:09,609
how we turn this<font color="#E5E5E5"> on was very good at</font>

1037
00:43:07,780 --> 00:43:11,530
testing the case<font color="#E5E5E5"> where suddenly all</font><font color="#CCCCCC"> your</font>

1038
00:43:09,609 --> 00:43:14,740
traffic starts coming in over this TLS

1039
00:43:11,530 --> 00:43:16,450
channel so you enable TLS for<font color="#E5E5E5"> service B</font>

1040
00:43:14,740 --> 00:43:18,160
and suddenly<font color="#E5E5E5"> all the</font><font color="#CCCCCC"> service B nodes get</font>

1041
00:43:16,450 --> 00:43:20,500
<font color="#E5E5E5">all the shaft over TLS we tested that</font>

1042
00:43:18,160 --> 00:43:23,109
well what we didn't have<font color="#E5E5E5"> great testing</font>

1043
00:43:20,500 --> 00:43:25,030
coverage<font color="#CCCCCC"> on was what happens if</font><font color="#E5E5E5"> all the</font>

1044
00:43:23,109 --> 00:43:28,058
services that<font color="#E5E5E5"> your box depends on</font>

1045
00:43:25,030 --> 00:43:29,799
suddenly start<font color="#E5E5E5"> requiring TLS and so we</font>

1046
00:43:28,059 --> 00:43:34,599
ran into some<font color="#CCCCCC"> interesting issues</font><font color="#E5E5E5"> with</font>

1047
00:43:29,799 --> 00:43:37,030
this most<font color="#E5E5E5"> particularly a tree proxy what</font>

1048
00:43:34,599 --> 00:43:39,609
we were using<font color="#CCCCCC"> for the outbound proxy</font><font color="#E5E5E5"> was</font>

1049
00:43:37,030 --> 00:43:42,369
a bit of an older version<font color="#CCCCCC"> it handled TLS</font>

1050
00:43:39,609 --> 00:43:45,190
certificate certificates very poorly<font color="#CCCCCC"> and</font>

1051
00:43:42,369 --> 00:43:47,650
so for certain<font color="#E5E5E5"> roles that had thousands</font>

1052
00:43:45,190 --> 00:43:49,630
of dependencies it would load the<font color="#CCCCCC"> same</font>

1053
00:43:47,650 --> 00:43:51,460
<font color="#CCCCCC">certificate into memory over and over</font>

1054
00:43:49,630 --> 00:43:54,730
again for every connection<font color="#E5E5E5"> it was making</font>

1055
00:43:51,460 --> 00:43:57,250
<font color="#E5E5E5">and that does some pretty crazy</font><font color="#CCCCCC"> memory</font>

1056
00:43:54,730 --> 00:44:00,579
<font color="#E5E5E5">issues so that was something</font><font color="#CCCCCC"> that we</font>

1057
00:43:57,250 --> 00:44:03,369
could have tested a little better the

1058
00:44:00,579 --> 00:44:04,990
final thing to mention<font color="#E5E5E5"> is that binding</font>

1059
00:44:03,369 --> 00:44:07,089
these services to localhost again this

1060
00:44:04,990 --> 00:44:08,618
took longer<font color="#E5E5E5"> than expected</font><font color="#CCCCCC"> we expected to</font>

1061
00:44:07,089 --> 00:44:10,078
be<font color="#CCCCCC"> able</font><font color="#E5E5E5"> to use easy service config</font>

1062
00:44:08,619 --> 00:44:12,369
templates<font color="#E5E5E5"> that were built into</font><font color="#CCCCCC"> our</font>

1063
00:44:10,079 --> 00:44:13,710
<font color="#E5E5E5">configuration management to say</font><font color="#CCCCCC"> okay</font>

1064
00:44:12,369 --> 00:44:16,510
everything<font color="#CCCCCC"> that used to</font><font color="#E5E5E5"> be my name does</font>

1065
00:44:13,710 --> 00:44:19,630
<font color="#CCCCCC">0.000</font><font color="#E5E5E5"> you're now binding to look closed</font>

1066
00:44:16,510 --> 00:44:22,329
<font color="#E5E5E5">this ended up taking a few weeks longer</font>

1067
00:44:19,630 --> 00:44:23,920
<font color="#CCCCCC">than we expected because</font><font color="#E5E5E5"> there was more</font>

1068
00:44:22,329 --> 00:44:26,079
drift in how we did configuration than

1069
00:44:23,920 --> 00:44:27,760
we expected<font color="#E5E5E5"> this is just one of those</font>

1070
00:44:26,079 --> 00:44:29,109
<font color="#E5E5E5">things that I wish we could have</font>

1071
00:44:27,760 --> 00:44:32,980
allocated<font color="#CCCCCC"> a little more time</font><font color="#E5E5E5"> to in the</font>

1072
00:44:29,109 --> 00:44:34,839
<font color="#CCCCCC">beginning I mentioned I'd</font><font color="#E5E5E5"> talk about</font>

1073
00:44:32,980 --> 00:44:36,789
<font color="#E5E5E5">performance</font><font color="#CCCCCC"> because this</font><font color="#E5E5E5"> always</font><font color="#CCCCCC"> comes up</font>

1074
00:44:34,839 --> 00:44:38,259
<font color="#CCCCCC">whenever</font><font color="#E5E5E5"> you introduce a TLS project</font>

1075
00:44:36,789 --> 00:44:41,680
someone is like but what if it's really

1076
00:44:38,260 --> 00:44:43,450
<font color="#E5E5E5">slow and fortunately I</font><font color="#CCCCCC"> can sort of</font>

1077
00:44:41,680 --> 00:44:45,250
confirm the security<font color="#E5E5E5"> industry's</font>

1078
00:44:43,450 --> 00:44:47,288
assertion about<font color="#E5E5E5"> it which</font><font color="#CCCCCC"> is that things</font>

1079
00:44:45,250 --> 00:44:49,390
often<font color="#CCCCCC"> actually got faster</font><font color="#E5E5E5"> which was</font>

1080
00:44:47,289 --> 00:44:52,270
<font color="#E5E5E5">really actually I didn't expect it</font><font color="#CCCCCC"> on</font>

1081
00:44:49,390 --> 00:44:53,980
whenever<font color="#E5E5E5"> somebody says</font><font color="#CCCCCC"> this you at</font><font color="#E5E5E5"> least</font>

1082
00:44:52,270 --> 00:44:55,839
I had this sort<font color="#E5E5E5"> of like kind of</font>

1083
00:44:53,980 --> 00:44:57,200
disbelief<font color="#CCCCCC"> like</font><font color="#E5E5E5"> and did it really and</font>

1084
00:44:55,839 --> 00:45:00,509
yeah

1085
00:44:57,200 --> 00:45:02,850
so for a<font color="#E5E5E5"> number</font><font color="#CCCCCC"> of our services</font><font color="#E5E5E5"> we</font>

1086
00:45:00,510 --> 00:45:05,940
improved<font color="#CCCCCC"> 95th percentile latency by as</font>

1087
00:45:02,850 --> 00:45:09,060
much as<font color="#CCCCCC"> 80 percent so what</font><font color="#E5E5E5"> was happening</font>

1088
00:45:05,940 --> 00:45:10,470
here is that<font color="#E5E5E5"> we had a bunch of these</font>

1089
00:45:09,060 --> 00:45:12,600
services<font color="#E5E5E5"> that had sort of hand</font>

1090
00:45:10,470 --> 00:45:14,520
implemented<font color="#E5E5E5"> mutual TLS</font><font color="#CCCCCC"> for security</font>

1091
00:45:12,600 --> 00:45:16,920
reasons particularly<font color="#E5E5E5"> high sensitivity</font>

1092
00:45:14,520 --> 00:45:19,200
things like<font color="#E5E5E5"> password services or things</font>

1093
00:45:16,920 --> 00:45:21,330
like<font color="#E5E5E5"> that did implement</font><font color="#CCCCCC"> MTS because they</font>

1094
00:45:19,200 --> 00:45:23,270
wanted<font color="#CCCCCC"> to be secure but they were</font>

1095
00:45:21,330 --> 00:45:26,029
implanting entirely at an<font color="#CCCCCC"> app layer and</font>

1096
00:45:23,270 --> 00:45:28,770
so application to application<font color="#E5E5E5"> was</font>

1097
00:45:26,030 --> 00:45:31,020
<font color="#E5E5E5">communicating with mutual TLS and these</font>

1098
00:45:28,770 --> 00:45:32,910
<font color="#CCCCCC">applications tend</font><font color="#E5E5E5"> to restart reasonably</font>

1099
00:45:31,020 --> 00:45:36,210
frequently<font color="#E5E5E5"> whenever</font><font color="#CCCCCC"> their deploys new</font>

1100
00:45:32,910 --> 00:45:37,770
boxes spun up<font color="#CCCCCC"> etc</font><font color="#E5E5E5"> and so they were</font>

1101
00:45:36,210 --> 00:45:40,560
unable<font color="#CCCCCC"> to take particularly good</font>

1102
00:45:37,770 --> 00:45:42,600
advantage of TLS session caching and

1103
00:45:40,560 --> 00:45:44,970
session resumption meaning they had to

1104
00:45:42,600 --> 00:45:47,970
use<font color="#E5E5E5"> the TLS handshake</font><font color="#CCCCCC"> all the time</font>

1105
00:45:44,970 --> 00:45:50,540
<font color="#E5E5E5">making them quite slow service discovery</font>

1106
00:45:47,970 --> 00:45:53,279
proxies<font color="#E5E5E5"> restart very very infrequently</font>

1107
00:45:50,540 --> 00:45:55,860
<font color="#CCCCCC">they kind of</font><font color="#E5E5E5"> come</font><font color="#CCCCCC"> up when a box comes up</font>

1108
00:45:53,280 --> 00:45:58,560
<font color="#E5E5E5">and often can last for</font><font color="#CCCCCC"> weeks or months</font>

1109
00:45:55,860 --> 00:46:02,070
<font color="#E5E5E5">and thus there's TLS session caches are</font>

1110
00:45:58,560 --> 00:46:03,660
very well warmed and thus we're able<font color="#E5E5E5"> to</font>

1111
00:46:02,070 --> 00:46:05,610
keep a session resumption rate of near a

1112
00:46:03,660 --> 00:46:06,990
<font color="#E5E5E5">hundred percent meaning that we were</font>

1113
00:46:05,610 --> 00:46:09,180
<font color="#E5E5E5">basically</font><font color="#CCCCCC"> just paying the</font><font color="#E5E5E5"> AES encryption</font>

1114
00:46:06,990 --> 00:46:12,779
cost<font color="#E5E5E5"> which was just happening in</font>

1115
00:46:09,180 --> 00:46:15,000
<font color="#E5E5E5">hardware and added very little so that</font>

1116
00:46:12,780 --> 00:46:16,950
was a really<font color="#E5E5E5"> great benefit and we were</font>

1117
00:46:15,000 --> 00:46:18,690
able<font color="#CCCCCC"> to pretty much squash the concern</font>

1118
00:46:16,950 --> 00:46:25,819
<font color="#CCCCCC">of this will be too slow for our network</font>

1119
00:46:18,690 --> 00:46:28,170
<font color="#CCCCCC">so doing this in your infrastructure I</font>

1120
00:46:25,820 --> 00:46:30,300
imagine some of<font color="#E5E5E5"> you may be involved with</font>

1121
00:46:28,170 --> 00:46:32,970
networks that<font color="#E5E5E5"> are not as</font><font color="#CCCCCC"> segments as you</font>

1122
00:46:30,300 --> 00:46:35,940
like and I<font color="#E5E5E5"> think this provides a good</font>

1123
00:46:32,970 --> 00:46:37,500
approach to<font color="#E5E5E5"> implementing segmentation on</font>

1124
00:46:35,940 --> 00:46:40,110
a large scale in a way that is actually

1125
00:46:37,500 --> 00:46:42,510
shippable<font color="#E5E5E5"> there are some questions</font><font color="#CCCCCC"> you</font>

1126
00:46:40,110 --> 00:46:44,130
<font color="#CCCCCC">should ask yourself when thinking about</font>

1127
00:46:42,510 --> 00:46:46,250
<font color="#E5E5E5">this that might help you assess whether</font>

1128
00:46:44,130 --> 00:46:50,730
<font color="#E5E5E5">or not this is a good solution for</font><font color="#CCCCCC"> you</font>

1129
00:46:46,250 --> 00:46:52,920
<font color="#E5E5E5">first how effective is it for you to be</font>

1130
00:46:50,730 --> 00:46:55,530
able<font color="#E5E5E5"> to distribute these proxies in your</font>

1131
00:46:52,920 --> 00:46:57,420
service communications<font color="#E5E5E5"> so we had a lot</font>

1132
00:46:55,530 --> 00:46:59,040
of benefits in<font color="#CCCCCC"> that</font><font color="#E5E5E5"> we had a</font>

1133
00:46:57,420 --> 00:47:01,110
configuration<font color="#E5E5E5"> management</font><font color="#CCCCCC"> system that</font>

1134
00:46:59,040 --> 00:47:02,670
<font color="#E5E5E5">could deploy software and configuration</font>

1135
00:47:01,110 --> 00:47:04,710
and<font color="#CCCCCC"> we already had these outbound</font>

1136
00:47:02,670 --> 00:47:07,010
proxies<font color="#E5E5E5"> that were in place because</font><font color="#CCCCCC"> of</font>

1137
00:47:04,710 --> 00:47:08,820
<font color="#E5E5E5">the service discovery system we used so</font>

1138
00:47:07,010 --> 00:47:10,350
this<font color="#E5E5E5"> is something</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> came pretty</font>

1139
00:47:08,820 --> 00:47:11,310
naturally for us but

1140
00:47:10,350 --> 00:47:14,460
something to think about<font color="#E5E5E5"> in</font><font color="#CCCCCC"> your own</font>

1141
00:47:11,310 --> 00:47:17,190
environment how would you assign

1142
00:47:14,460 --> 00:47:19,380
identities<font color="#E5E5E5"> this is really important</font>

1143
00:47:17,190 --> 00:47:21,510
because<font color="#E5E5E5"> an identity is a zone it's a</font>

1144
00:47:19,380 --> 00:47:24,570
segment in<font color="#E5E5E5"> our network and so if you</font>

1145
00:47:21,510 --> 00:47:25,890
have a highly<font color="#E5E5E5"> specific way to refer to</font>

1146
00:47:24,570 --> 00:47:27,570
<font color="#CCCCCC">things</font><font color="#E5E5E5"> that you can turn into TL</font>

1147
00:47:25,890 --> 00:47:29,460
certificates this may work really well

1148
00:47:27,570 --> 00:47:31,590
for<font color="#CCCCCC"> you</font><font color="#E5E5E5"> if you don't have this you may</font>

1149
00:47:29,460 --> 00:47:33,840
need to do<font color="#CCCCCC"> some work to get there in our</font>

1150
00:47:31,590 --> 00:47:35,550
case<font color="#E5E5E5"> you know I am role so we went with</font>

1151
00:47:33,840 --> 00:47:37,680
but at the beginning<font color="#CCCCCC"> of the project</font><font color="#E5E5E5"> not</font>

1152
00:47:35,550 --> 00:47:39,030
every instance had an<font color="#E5E5E5"> iamb role we had</font>

1153
00:47:37,680 --> 00:47:40,890
to do a little<font color="#E5E5E5"> legwork in the beginning</font>

1154
00:47:39,030 --> 00:47:48,150
to get<font color="#E5E5E5"> that to be</font><font color="#CCCCCC"> an enforcement for our</font>

1155
00:47:40,890 --> 00:47:50,970
entire infrastructure<font color="#CCCCCC"> will you</font><font color="#E5E5E5"> need to</font>

1156
00:47:48,150 --> 00:47:52,770
sort<font color="#CCCCCC"> of manually configure</font><font color="#E5E5E5"> these access</font>

1157
00:47:50,970 --> 00:47:54,600
control lists or will you<font color="#CCCCCC"> be able</font><font color="#E5E5E5"> to</font>

1158
00:47:52,770 --> 00:47:55,830
automatically generate them if you can

1159
00:47:54,600 --> 00:47:57,200
automatically generate that's where

1160
00:47:55,830 --> 00:48:00,240
you're going to get these huge

1161
00:47:57,200 --> 00:48:03,529
efficiency wins so that's something<font color="#CCCCCC"> that</font>

1162
00:48:00,240 --> 00:48:06,689
<font color="#E5E5E5">you really want to push for if you can</font>

1163
00:48:03,530 --> 00:48:08,580
the<font color="#CCCCCC"> other good</font><font color="#E5E5E5"> news is</font><font color="#CCCCCC"> that there's some</font>

1164
00:48:06,690 --> 00:48:11,400
available options on the<font color="#E5E5E5"> market right</font>

1165
00:48:08,580 --> 00:48:13,160
now<font color="#CCCCCC"> that can help</font><font color="#E5E5E5"> do this for you</font><font color="#CCCCCC"> we</font>

1166
00:48:11,400 --> 00:48:17,480
sort<font color="#E5E5E5"> of hand implemented the whole thing</font>

1167
00:48:13,160 --> 00:48:20,250
but<font color="#E5E5E5"> sto</font><font color="#CCCCCC"> and console which are both</font>

1168
00:48:17,480 --> 00:48:22,050
solutions being pushed<font color="#E5E5E5"> as sort of the</font>

1169
00:48:20,250 --> 00:48:24,570
<font color="#CCCCCC">new way to do service mesh especially in</font>

1170
00:48:22,050 --> 00:48:27,750
kubernetes implement<font color="#E5E5E5"> this sort of</font>

1171
00:48:24,570 --> 00:48:29,670
security system already<font color="#E5E5E5"> so to be clear</font>

1172
00:48:27,750 --> 00:48:32,190
this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> not something that</font><font color="#E5E5E5"> we we totally</font>

1173
00:48:29,670 --> 00:48:34,230
invented there's an idea that's<font color="#E5E5E5"> been</font>

1174
00:48:32,190 --> 00:48:37,740
going around for<font color="#E5E5E5"> a while and</font><font color="#CCCCCC"> is</font><font color="#E5E5E5"> T own</font>

1175
00:48:34,230 --> 00:48:39,720
<font color="#E5E5E5">console implement it</font><font color="#CCCCCC"> for you in a easily</font>

1176
00:48:37,740 --> 00:48:42,029
<font color="#CCCCCC">packaged able way they do less on the</font>

1177
00:48:39,720 --> 00:48:43,770
<font color="#E5E5E5">automatic generation side but you could</font>

1178
00:48:42,030 --> 00:48:46,350
easily kind<font color="#E5E5E5"> of build this sort</font><font color="#CCCCCC"> of system</font>

1179
00:48:43,770 --> 00:48:48,840
using these<font color="#E5E5E5"> tools but if you don't want</font>

1180
00:48:46,350 --> 00:48:50,670
to make such a huge<font color="#E5E5E5"> leap and switch to a</font>

1181
00:48:48,840 --> 00:48:52,170
whole new service mesh system<font color="#E5E5E5"> you can</font>

1182
00:48:50,670 --> 00:48:54,540
certainly<font color="#E5E5E5"> implement the security</font>

1183
00:48:52,170 --> 00:49:01,200
<font color="#E5E5E5">benefits here with your existing service</font>

1184
00:48:54,540 --> 00:49:04,050
discovery<font color="#E5E5E5"> stack</font><font color="#CCCCCC"> as we did so to kind of</font>

1185
00:49:01,200 --> 00:49:06,600
sum up<font color="#E5E5E5"> here I'm here to tell you</font><font color="#CCCCCC"> that</font>

1186
00:49:04,050 --> 00:49:08,610
you can switch to a deeply<font color="#CCCCCC"> authenticated</font>

1187
00:49:06,600 --> 00:49:10,950
<font color="#CCCCCC">network and the reason you can do</font><font color="#E5E5E5"> that</font>

1188
00:49:08,610 --> 00:49:12,810
is<font color="#CCCCCC"> because you</font><font color="#E5E5E5"> can make the changes here</font>

1189
00:49:10,950 --> 00:49:16,109
and visible<font color="#E5E5E5"> and you can make the system</font>

1190
00:49:12,810 --> 00:49:18,029
<font color="#E5E5E5">fast because of these generated</font>

1191
00:49:16,110 --> 00:49:22,140
authorization<font color="#CCCCCC"> Maps and the automatic TLS</font>

1192
00:49:18,030 --> 00:49:24,030
<font color="#E5E5E5">and engineer who is working on a micro</font>

1193
00:49:22,140 --> 00:49:25,650
service before<font color="#CCCCCC"> this</font>

1194
00:49:24,030 --> 00:49:28,170
and after the system<font color="#CCCCCC"> has basically</font><font color="#E5E5E5"> the</font>

1195
00:49:25,650 --> 00:49:29,670
<font color="#E5E5E5">exact same</font><font color="#CCCCCC"> experience they still</font><font color="#E5E5E5"> use the</font>

1196
00:49:28,170 --> 00:49:32,850
same<font color="#E5E5E5"> a should be calls they always did</font>

1197
00:49:29,670 --> 00:49:34,860
they still add a new dependency<font color="#CCCCCC"> get that</font>

1198
00:49:32,850 --> 00:49:36,210
changed<font color="#CCCCCC"> approved and merged a master and</font>

1199
00:49:34,860 --> 00:49:36,720
then their service talks to it no

1200
00:49:36,210 --> 00:49:39,150
problem

1201
00:49:36,720 --> 00:49:39,899
<font color="#CCCCCC">their flow remains the same as it always</font>

1202
00:49:39,150 --> 00:49:41,820
has been

1203
00:49:39,900 --> 00:49:44,040
but now<font color="#E5E5E5"> when an attacker compromises</font>

1204
00:49:41,820 --> 00:49:45,660
<font color="#E5E5E5">that slack</font><font color="#CCCCCC"> meme BOTS with</font><font color="#E5E5E5"> some sort of</font>

1205
00:49:44,040 --> 00:49:48,090
you know meme injection<font color="#E5E5E5"> or whatever it</font>

1206
00:49:45,660 --> 00:49:49,470
is on<font color="#CCCCCC"> they find themselves in a network</font>

1207
00:49:48,090 --> 00:49:51,630
zone where they can talk to<font color="#E5E5E5"> basically</font>

1208
00:49:49,470 --> 00:49:53,549
nothing<font color="#E5E5E5"> and all of the services</font><font color="#CCCCCC"> that</font>

1209
00:49:51,630 --> 00:49:55,860
were wide open<font color="#CCCCCC"> to them</font><font color="#E5E5E5"> beforehand on</font>

1210
00:49:53,550 --> 00:49:58,560
simply<font color="#CCCCCC"> rejects their connections out of</font>

1211
00:49:55,860 --> 00:50:02,160
hand when<font color="#E5E5E5"> they ever try and go past a</font>

1212
00:49:58,560 --> 00:50:04,380
<font color="#CCCCCC">layer</font><font color="#E5E5E5"> for connection so this is</font>

1213
00:50:02,160 --> 00:50:06,149
something<font color="#CCCCCC"> that I believe is possible</font>

1214
00:50:04,380 --> 00:50:08,700
<font color="#CCCCCC">we've done</font><font color="#E5E5E5"> it now</font>

1215
00:50:06,150 --> 00:50:11,430
and I<font color="#E5E5E5"> think it's a great strategy as you</font>

1216
00:50:08,700 --> 00:50:12,720
try<font color="#CCCCCC"> and build</font><font color="#E5E5E5"> into the security what you</font>

1217
00:50:11,430 --> 00:50:16,620
<font color="#E5E5E5">weren't able to do when your network</font>

1218
00:50:12,720 --> 00:50:19,049
first started so<font color="#E5E5E5"> thank you very much for</font>

1219
00:50:16,620 --> 00:50:20,549
<font color="#E5E5E5">listening</font><font color="#CCCCCC"> if you want to stay can</font>

1220
00:50:19,050 --> 00:50:22,230
actually are asking more<font color="#CCCCCC"> questions about</font>

1221
00:50:20,550 --> 00:50:24,930
the<font color="#CCCCCC"> details of</font><font color="#E5E5E5"> this something that's not</font>

1222
00:50:22,230 --> 00:50:27,750
as<font color="#E5E5E5"> easy to do in the Q&A section you can</font>

1223
00:50:24,930 --> 00:50:30,960
<font color="#E5E5E5">hit</font><font color="#CCCCCC"> me up</font><font color="#E5E5E5"> at max V on Twitter Max Weber</font>

1224
00:50:27,750 --> 00:50:32,070
<font color="#CCCCCC">Carbon be calm</font><font color="#E5E5E5"> or if you just want to</font>

1225
00:50:30,960 --> 00:50:34,110
see what we're up to

1226
00:50:32,070 --> 00:50:38,480
everything the engineering<font color="#E5E5E5"> on every</font>

1227
00:50:34,110 --> 00:50:38,480
<font color="#CCCCCC">video</font><font color="#E5E5E5"> thank you</font><font color="#CCCCCC"> very much</font>

1228
00:50:38,880 --> 00:50:42,090
[Music]

1229
00:50:46,550 --> 00:50:53,100
<font color="#CCCCCC">Thank You max</font><font color="#E5E5E5"> thank you max</font><font color="#CCCCCC"> if you do</font>

1230
00:50:51,840 --> 00:50:54,840
have a question please<font color="#E5E5E5"> line up on the</font>

1231
00:50:53,100 --> 00:50:57,029
microphones try to limit<font color="#E5E5E5"> your question</font>

1232
00:50:54,840 --> 00:50:58,860
to a single sentence<font color="#CCCCCC"> if you'd like</font><font color="#E5E5E5"> to</font>

1233
00:50:57,030 --> 00:51:03,510
leave at this point<font color="#E5E5E5"> please do that as</font>

1234
00:50:58,860 --> 00:51:07,010
quietly as possible<font color="#CCCCCC"> our</font><font color="#E5E5E5"> signal angel the</font>

1235
00:51:03,510 --> 00:51:07,010
first question from<font color="#E5E5E5"> the internet please</font>

1236
00:51:17,010 --> 00:51:22,710
[Music]

1237
00:51:19,340 --> 00:51:25,110
<font color="#CCCCCC">so I I guess I said open SSL</font><font color="#E5E5E5"> just sort</font>

1238
00:51:22,710 --> 00:51:28,530
of a random<font color="#CCCCCC"> example on</font><font color="#E5E5E5"> you can use</font>

1239
00:51:25,110 --> 00:51:32,100
whatever SSL stack works best for you<font color="#CCCCCC"> I</font>

1240
00:51:28,530 --> 00:51:34,830
believe<font color="#CCCCCC"> that the way</font><font color="#E5E5E5"> our packages were</font>

1241
00:51:32,100 --> 00:51:36,960
being<font color="#E5E5E5"> built used</font><font color="#CCCCCC"> opensl but switching</font><font color="#E5E5E5"> to</font>

1242
00:51:34,830 --> 00:51:38,610
something<font color="#E5E5E5"> like boring or Libre a cell</font>

1243
00:51:36,960 --> 00:51:41,790
would probably be a good<font color="#E5E5E5"> idea for</font>

1244
00:51:38,610 --> 00:51:44,760
<font color="#E5E5E5">further hardening thank you</font><font color="#CCCCCC"> wait</font><font color="#E5E5E5"> for</font>

1245
00:51:41,790 --> 00:51:47,130
number two your question hi<font color="#CCCCCC"> great talk</font>

1246
00:51:44,760 --> 00:51:49,140
what are you currently<font color="#E5E5E5"> doing to mitigate</font>

1247
00:51:47,130 --> 00:51:55,050
the increased risk of<font color="#CCCCCC"> local</font><font color="#E5E5E5"> host bound</font>

1248
00:51:49,140 --> 00:51:58,440
<font color="#E5E5E5">SS RF so look yeah s RF is something</font>

1249
00:51:55,050 --> 00:52:00,420
that is deeply<font color="#E5E5E5"> troubling</font><font color="#CCCCCC"> to me as</font>

1250
00:51:58,440 --> 00:52:04,320
somebody working on<font color="#E5E5E5"> app</font><font color="#CCCCCC"> sack in</font><font color="#E5E5E5"> a</font>

1251
00:52:00,420 --> 00:52:06,120
company<font color="#E5E5E5"> that works</font><font color="#CCCCCC"> almost</font><font color="#E5E5E5"> exclusively</font>

1252
00:52:04,320 --> 00:52:09,000
<font color="#CCCCCC">with HTTP API calls</font>

1253
00:52:06,120 --> 00:52:13,470
our approach honestly is very dedicated

1254
00:52:09,000 --> 00:52:14,820
static analysis<font color="#CCCCCC"> we are</font><font color="#E5E5E5"> watching</font><font color="#CCCCCC"> engineer</font>

1255
00:52:13,470 --> 00:52:16,649
<font color="#E5E5E5">written code very vigilantly for</font>

1256
00:52:14,820 --> 00:52:19,890
anything<font color="#E5E5E5"> that might</font><font color="#CCCCCC"> make HTTP calls that</font>

1257
00:52:16,650 --> 00:52:22,620
bound and trying to<font color="#E5E5E5"> ensure that it</font>

1258
00:52:19,890 --> 00:52:25,200
<font color="#E5E5E5">doesn't hit internal stuff that's an</font>

1259
00:52:22,620 --> 00:52:26,670
area that<font color="#E5E5E5"> my team is trying to</font><font color="#CCCCCC"> do a lot</font>

1260
00:52:25,200 --> 00:52:29,399
of<font color="#E5E5E5"> work to improve and perhaps that</font>

1261
00:52:26,670 --> 00:52:31,950
<font color="#E5E5E5">could be a future talk cool thanks but</font>

1262
00:52:29,400 --> 00:52:34,080
<font color="#E5E5E5">from number one please a very</font>

1263
00:52:31,950 --> 00:52:38,240
interesting<font color="#CCCCCC"> idea</font><font color="#E5E5E5"> are you going to</font>

1264
00:52:34,080 --> 00:52:40,650
include<font color="#E5E5E5"> workstations to our workstations</font>

1265
00:52:38,240 --> 00:52:42,359
<font color="#CCCCCC">it's an interesting thought at the</font>

1266
00:52:40,650 --> 00:52:44,720
moment<font color="#CCCCCC"> we don't</font><font color="#E5E5E5"> have our workstations</font>

1267
00:52:42,360 --> 00:52:49,410
<font color="#E5E5E5">plugged into the same service discovery</font>

1268
00:52:44,720 --> 00:52:51,480
<font color="#E5E5E5">and so they don't have the sort</font><font color="#CCCCCC"> of core</font>

1269
00:52:49,410 --> 00:52:53,609
proxies that<font color="#E5E5E5"> could work for this but I</font>

1270
00:52:51,480 --> 00:52:54,990
think<font color="#E5E5E5"> that if that's an architect's you</font>

1271
00:52:53,610 --> 00:52:58,500
wanted to go<font color="#E5E5E5"> to this would actually lend</font>

1272
00:52:54,990 --> 00:53:00,009
itself pretty<font color="#E5E5E5"> well because you if you're</font>

1273
00:52:58,500 --> 00:53:02,380
managing<font color="#E5E5E5"> your workstations you get</font>

1274
00:53:00,010 --> 00:53:03,910
them identities<font color="#E5E5E5"> just as well you need to</font>

1275
00:53:02,380 --> 00:53:06,040
think<font color="#CCCCCC"> of probably a slightly</font><font color="#E5E5E5"> different</font>

1276
00:53:03,910 --> 00:53:08,920
<font color="#E5E5E5">approach to identities because you can't</font>

1277
00:53:06,040 --> 00:53:11,320
give a<font color="#E5E5E5"> physical machine</font><font color="#CCCCCC"> an AWS I am</font><font color="#E5E5E5"> role</font>

1278
00:53:08,920 --> 00:53:15,550
at<font color="#CCCCCC"> least for us</font><font color="#E5E5E5"> but if that's something</font>

1279
00:53:11,320 --> 00:53:19,090
<font color="#CCCCCC">that your network</font><font color="#E5E5E5"> has then I</font><font color="#CCCCCC"> think it's</font>

1280
00:53:15,550 --> 00:53:30,490
a very reasonable<font color="#CCCCCC"> way to go you</font><font color="#E5E5E5"> signal</font>

1281
00:53:19,090 --> 00:53:34,860
<font color="#E5E5E5">your next question yes we took a close</font>

1282
00:53:30,490 --> 00:53:37,660
<font color="#CCCCCC">look at</font><font color="#E5E5E5"> it all right</font><font color="#CCCCCC"> like for number</font><font color="#E5E5E5"> two</font>

1283
00:53:34,860 --> 00:53:39,970
what<font color="#CCCCCC"> are</font><font color="#E5E5E5"> the cost implications</font><font color="#CCCCCC"> for</font>

1284
00:53:37,660 --> 00:53:44,200
implementation<font color="#E5E5E5"> and and on your</font>

1285
00:53:39,970 --> 00:53:48,100
operations in general<font color="#CCCCCC"> costs are</font><font color="#E5E5E5"> pretty</font>

1286
00:53:44,200 --> 00:53:50,020
low because the reverse proxy is pretty

1287
00:53:48,100 --> 00:53:51,759
efficient<font color="#E5E5E5"> it doesn't use a ton of extra</font>

1288
00:53:50,020 --> 00:53:53,890
<font color="#E5E5E5">compute so we didn't have</font><font color="#CCCCCC"> to scale up</font>

1289
00:53:51,760 --> 00:53:56,740
anything in order to<font color="#E5E5E5"> support this</font>

1290
00:53:53,890 --> 00:54:00,609
verification<font color="#CCCCCC"> again</font><font color="#E5E5E5"> being able to just do</font>

1291
00:53:56,740 --> 00:54:02,799
a<font color="#CCCCCC"> EES is pretty cheap the generation</font><font color="#E5E5E5"> of</font>

1292
00:54:00,610 --> 00:54:05,350
the map<font color="#E5E5E5"> is very cheap it's running on a</font>

1293
00:54:02,800 --> 00:54:06,910
single kubernetes pod<font color="#CCCCCC"> just running a</font>

1294
00:54:05,350 --> 00:54:09,250
<font color="#CCCCCC">Ruby script</font><font color="#E5E5E5"> said that's fine</font>

1295
00:54:06,910 --> 00:54:13,600
probably the greatest<font color="#E5E5E5"> cost is simply an</font>

1296
00:54:09,250 --> 00:54:15,460
s3 transfer of that authorization map

1297
00:54:13,600 --> 00:54:16,839
and<font color="#CCCCCC"> that's something that we think</font><font color="#E5E5E5"> we're</font>

1298
00:54:15,460 --> 00:54:20,140
<font color="#E5E5E5">going to be</font><font color="#CCCCCC"> able to continue to reduce</font>

1299
00:54:16,840 --> 00:54:22,600
by sort<font color="#E5E5E5"> of being a</font><font color="#CCCCCC"> little smarter about</font>

1300
00:54:20,140 --> 00:54:24,250
how<font color="#CCCCCC"> often we check in certain areas the</font>

1301
00:54:22,600 --> 00:54:26,230
network that<font color="#E5E5E5"> evolved very infrequently</font>

1302
00:54:24,250 --> 00:54:28,090
<font color="#E5E5E5">and don't have a lot</font><font color="#CCCCCC"> of topology changes</font>

1303
00:54:26,230 --> 00:54:29,710
we'd be able to<font color="#CCCCCC"> sync that a lot less</font>

1304
00:54:28,090 --> 00:54:31,660
frequently<font color="#E5E5E5"> so that's something I</font><font color="#CCCCCC"> think</font>

1305
00:54:29,710 --> 00:54:34,810
<font color="#CCCCCC">we can improve in</font><font color="#E5E5E5"> but overall the cost</font>

1306
00:54:31,660 --> 00:54:37,330
is pretty<font color="#E5E5E5"> low but signal introduced more</font>

1307
00:54:34,810 --> 00:54:40,590
<font color="#E5E5E5">Christmas from the net okay then</font>

1308
00:54:37,330 --> 00:54:43,299
microphone<font color="#E5E5E5"> number</font><font color="#CCCCCC"> two please in terms of</font>

1309
00:54:40,590 --> 00:54:44,800
certification<font color="#CCCCCC"> authority other</font><font color="#E5E5E5"> arm</font><font color="#CCCCCC"> how</font>

1310
00:54:43,300 --> 00:54:46,390
are you managing the lifetime of the

1311
00:54:44,800 --> 00:54:48,400
certificate<font color="#E5E5E5"> and which kind of</font>

1312
00:54:46,390 --> 00:54:51,970
consideration did you do on that<font color="#E5E5E5"> side</font><font color="#CCCCCC"> so</font>

1313
00:54:48,400 --> 00:54:53,890
like certificate expiration renewal also

1314
00:54:51,970 --> 00:54:57,189
CSP<font color="#CCCCCC"> if it's already implemented or not</font>

1315
00:54:53,890 --> 00:54:59,520
yeah<font color="#CCCCCC"> so we want</font><font color="#E5E5E5"> to get to a point where</font>

1316
00:54:57,190 --> 00:55:01,540
our certificates expire a lot faster<font color="#E5E5E5"> on</font>

1317
00:54:59,520 --> 00:55:03,220
there are some<font color="#E5E5E5"> companies they've done a</font>

1318
00:55:01,540 --> 00:55:05,500
really<font color="#CCCCCC"> great job with</font><font color="#E5E5E5"> certs that only on</font>

1319
00:55:03,220 --> 00:55:06,879
you know<font color="#CCCCCC"> refresh</font><font color="#E5E5E5"> that only lasts about a</font>

1320
00:55:05,500 --> 00:55:10,360
month or<font color="#E5E5E5"> even two weeks something like</font>

1321
00:55:06,880 --> 00:55:11,590
<font color="#E5E5E5">that and unfortunately I think our</font>

1322
00:55:10,360 --> 00:55:13,600
infrastructure<font color="#CCCCCC"> isn't</font><font color="#E5E5E5"> at a point where we</font>

1323
00:55:11,590 --> 00:55:16,090
<font color="#E5E5E5">can reliably reduce it</font><font color="#CCCCCC"> that much</font>

1324
00:55:13,600 --> 00:55:19,180
our current approach is<font color="#CCCCCC"> that</font><font color="#E5E5E5"> we can</font>

1325
00:55:16,090 --> 00:55:22,170
currently ban things<font color="#E5E5E5"> by basically</font>

1326
00:55:19,180 --> 00:55:24,940
introducing<font color="#E5E5E5"> them into a denialist</font><font color="#CCCCCC"> in the</font>

1327
00:55:22,170 --> 00:55:26,290
<font color="#E5E5E5">allowed list generation stage and then</font>

1328
00:55:24,940 --> 00:55:28,810
that will<font color="#E5E5E5"> result in something being</font>

1329
00:55:26,290 --> 00:55:30,910
banned within<font color="#CCCCCC"> about</font><font color="#E5E5E5"> four minutes so</font>

1330
00:55:28,810 --> 00:55:33,430
that's how we can deal with active

1331
00:55:30,910 --> 00:55:36,430
compromises<font color="#CCCCCC"> but there's just sort</font><font color="#E5E5E5"> of an</font>

1332
00:55:33,430 --> 00:55:39,669
over a<font color="#E5E5E5"> longer running effort to be</font><font color="#CCCCCC"> able</font>

1333
00:55:36,430 --> 00:55:40,690
<font color="#E5E5E5">to increase our infrastructure refresh</font>

1334
00:55:39,670 --> 00:55:42,100
rate so<font color="#CCCCCC"> that we can have really</font>

1335
00:55:40,690 --> 00:55:44,800
<font color="#CCCCCC">short-lived certificates to deal with</font>

1336
00:55:42,100 --> 00:55:50,290
those<font color="#E5E5E5"> sorts of fun like stolen cert</font>

1337
00:55:44,800 --> 00:55:53,500
attacks<font color="#CCCCCC"> Thanks your question since you</font>

1338
00:55:50,290 --> 00:55:55,960
<font color="#E5E5E5">do all of this on a flat layer 3</font><font color="#CCCCCC"> network</font>

1339
00:55:53,500 --> 00:55:58,090
<font color="#E5E5E5">and you already</font><font color="#CCCCCC"> mentioned</font><font color="#E5E5E5"> payment</font>

1340
00:55:55,960 --> 00:56:00,450
information what does this mean for<font color="#E5E5E5"> your</font>

1341
00:55:58,090 --> 00:56:03,130
PCI DSS<font color="#CCCCCC"> cope and how does it</font><font color="#E5E5E5"> affect</font>

1342
00:56:00,450 --> 00:56:04,810
certification if you handle<font color="#E5E5E5"> payment data</font>

1343
00:56:03,130 --> 00:56:07,120
and the systems are<font color="#CCCCCC"> connected to other</font>

1344
00:56:04,810 --> 00:56:10,450
systems in<font color="#E5E5E5"> your network and not separate</font>

1345
00:56:07,120 --> 00:56:14,650
life by like firewalls<font color="#E5E5E5"> or something it's</font>

1346
00:56:10,450 --> 00:56:16,600
so<font color="#CCCCCC"> our PCI</font><font color="#E5E5E5"> network is a little</font>

1347
00:56:14,650 --> 00:56:18,220
<font color="#E5E5E5">interesting it actually is a totally</font>

1348
00:56:16,600 --> 00:56:19,990
separate<font color="#E5E5E5"> thing</font><font color="#CCCCCC"> from</font><font color="#E5E5E5"> the most of the</font>

1349
00:56:18,220 --> 00:56:22,500
urban<font color="#E5E5E5"> view production network and so</font>

1350
00:56:19,990 --> 00:56:24,939
that<font color="#E5E5E5"> specific certification didn't</font>

1351
00:56:22,500 --> 00:56:27,450
affect us but<font color="#E5E5E5"> I think</font><font color="#CCCCCC"> we've</font><font color="#E5E5E5"> also had a</font>

1352
00:56:24,940 --> 00:56:29,590
pretty effective time of convincing

1353
00:56:27,450 --> 00:56:31,480
auditors<font color="#CCCCCC"> that this is an effective way</font>

1354
00:56:29,590 --> 00:56:33,220
<font color="#CCCCCC">to do access control even though it's</font>

1355
00:56:31,480 --> 00:56:37,920
traditionally happening at a layer that

1356
00:56:33,220 --> 00:56:41,230
<font color="#CCCCCC">is on not as standard so for PCI DSS</font>

1357
00:56:37,920 --> 00:56:43,630
specifically on our<font color="#CCCCCC"> cardholder</font>

1358
00:56:41,230 --> 00:56:47,620
environment actually<font color="#E5E5E5"> is</font><font color="#CCCCCC"> just a webpage</font>

1359
00:56:43,630 --> 00:56:50,050
<font color="#CCCCCC">that</font><font color="#E5E5E5"> syncs to Braintree</font><font color="#CCCCCC"> so we</font><font color="#E5E5E5"> don't have</font>

1360
00:56:47,620 --> 00:56:52,089
<font color="#E5E5E5">to do</font><font color="#CCCCCC"> it that one specifically but I</font>

1361
00:56:50,050 --> 00:56:54,540
it's<font color="#CCCCCC"> something that has</font><font color="#E5E5E5"> been received</font>

1362
00:56:52,090 --> 00:56:58,500
<font color="#E5E5E5">pretty favorably by our compliance folks</font>

1363
00:56:54,540 --> 00:56:58,500
thank you<font color="#E5E5E5"> signal angel</font>

1364
00:57:00,510 --> 00:57:05,320
how you got<font color="#E5E5E5"> the management and the</font>

1365
00:57:03,130 --> 00:57:08,550
<font color="#CCCCCC">Pikachu</font><font color="#E5E5E5"> engineers is</font><font color="#CCCCCC"> buy-in for the</font>

1366
00:57:05,320 --> 00:57:12,250
<font color="#CCCCCC">changes</font><font color="#E5E5E5"> described in your dog what</font><font color="#CCCCCC"> the</font>

1367
00:57:08,550 --> 00:57:15,730
objection<font color="#CCCCCC"> each day race and how did you</font>

1368
00:57:12,250 --> 00:57:18,099
address them um that thank<font color="#E5E5E5"> you for</font>

1369
00:57:15,730 --> 00:57:20,500
action is<font color="#E5E5E5"> something that I like talking</font>

1370
00:57:18,099 --> 00:57:22,690
<font color="#E5E5E5">about I think that a lot of security is</font>

1371
00:57:20,500 --> 00:57:26,170
<font color="#CCCCCC">actually being a good salesman for your</font>

1372
00:57:22,690 --> 00:57:27,520
solutions<font color="#CCCCCC"> whenever you</font><font color="#E5E5E5"> are presenting</font>

1373
00:57:26,170 --> 00:57:29,950
something<font color="#E5E5E5"> like this it has such a wide</font>

1374
00:57:27,520 --> 00:57:31,509
scope it's crucial to<font color="#CCCCCC"> make</font><font color="#E5E5E5"> sure that</font>

1375
00:57:29,950 --> 00:57:33,399
there's something<font color="#E5E5E5"> in it</font><font color="#CCCCCC"> for the</font>

1376
00:57:31,510 --> 00:57:35,800
stakeholders<font color="#E5E5E5"> beyond just</font><font color="#CCCCCC"> Security's</font>

1377
00:57:33,400 --> 00:57:38,200
goals<font color="#E5E5E5"> and so a lot of those things for</font>

1378
00:57:35,800 --> 00:57:41,340
<font color="#E5E5E5">us were around developer ease and</font>

1379
00:57:38,200 --> 00:57:43,689
<font color="#E5E5E5">productivity reducing the pain that</font>

1380
00:57:41,340 --> 00:57:45,520
engineers were feeling in trying to set

1381
00:57:43,690 --> 00:57:49,800
up their<font color="#E5E5E5"> own TLS implementations or</font>

1382
00:57:45,520 --> 00:57:52,630
their own<font color="#E5E5E5"> authentication stacks</font><font color="#CCCCCC"> better</font>

1383
00:57:49,800 --> 00:57:54,460
<font color="#E5E5E5">performance benefits like I discussed</font>

1384
00:57:52,630 --> 00:57:56,680
these were all things<font color="#CCCCCC"> that other</font>

1385
00:57:54,460 --> 00:58:00,670
infrastructure and product teams<font color="#CCCCCC"> heard</font>

1386
00:57:56,680 --> 00:58:03,098
about and wanted and so they were<font color="#E5E5E5"> very</font>

1387
00:58:00,670 --> 00:58:05,080
open<font color="#E5E5E5"> to our original request and then</font>

1388
00:58:03,099 --> 00:58:07,540
from there on it was all<font color="#CCCCCC"> about being</font><font color="#E5E5E5"> a</font>

1389
00:58:05,080 --> 00:58:08,980
<font color="#E5E5E5">good steward of an operation</font><font color="#CCCCCC"> you know</font>

1390
00:58:07,540 --> 00:58:10,839
having really good operational plans

1391
00:58:08,980 --> 00:58:13,660
<font color="#E5E5E5">showing that we've done our homework in</font>

1392
00:58:10,839 --> 00:58:16,599
terms<font color="#CCCCCC"> of</font><font color="#E5E5E5"> testing and really thinking</font>

1393
00:58:13,660 --> 00:58:18,670
<font color="#E5E5E5">like a infrastructure engineer or an SRE</font>

1394
00:58:16,599 --> 00:58:22,180
<font color="#E5E5E5">instead of just a security</font><font color="#CCCCCC"> engineer</font><font color="#E5E5E5"> you</font>

1395
00:58:18,670 --> 00:58:25,060
know security<font color="#E5E5E5"> is</font><font color="#CCCCCC"> our ultimate goal</font><font color="#E5E5E5"> but</font>

1396
00:58:22,180 --> 00:58:27,279
<font color="#E5E5E5">we need to make sure that</font><font color="#CCCCCC"> we are</font><font color="#E5E5E5"> not you</font>

1397
00:58:25,060 --> 00:58:29,020
<font color="#E5E5E5">know burning our credibility with the</font>

1398
00:58:27,280 --> 00:58:31,570
rest of the organization when<font color="#E5E5E5"> going for</font>

1399
00:58:29,020 --> 00:58:33,910
that<font color="#E5E5E5"> so there was a lot</font><font color="#CCCCCC"> of time spent</font>

1400
00:58:31,570 --> 00:58:35,589
<font color="#E5E5E5">thinking</font><font color="#CCCCCC"> like you know forgetting</font><font color="#E5E5E5"> about</font>

1401
00:58:33,910 --> 00:58:36,700
all<font color="#E5E5E5"> the security</font><font color="#CCCCCC"> benefits right</font><font color="#E5E5E5"> now how</font>

1402
00:58:35,589 --> 00:58:41,830
am I going<font color="#E5E5E5"> to make sure this isn't going</font>

1403
00:58:36,700 --> 00:58:45,609
to<font color="#E5E5E5"> take everything down thank you much</font>

1404
00:58:41,830 --> 00:58:47,950
from one your question do<font color="#CCCCCC"> all notes</font><font color="#E5E5E5"> have</font>

1405
00:58:45,609 --> 00:58:51,880
the whole web files and what technology

1406
00:58:47,950 --> 00:58:56,290
sector you<font color="#E5E5E5"> use to apply them to NY so</font>

1407
00:58:51,880 --> 00:58:59,650
yeah everything<font color="#E5E5E5"> gets a web file on its</font>

1408
00:58:56,290 --> 00:59:02,160
<font color="#E5E5E5">yeah technology stack is JSON so</font>

1409
00:58:59,650 --> 00:59:05,140
basically there's a very small shim<font color="#E5E5E5"> that</font>

1410
00:59:02,160 --> 00:59:08,470
downloads<font color="#E5E5E5"> this file from</font><font color="#CCCCCC"> s3 and then</font>

1411
00:59:05,140 --> 00:59:12,830
puts the relevant list of allowed

1412
00:59:08,470 --> 00:59:16,049
identities into<font color="#E5E5E5"> the</font><font color="#CCCCCC"> envoy into an envoy</font>

1413
00:59:12,830 --> 00:59:18,480
configuration file and then<font color="#CCCCCC"> envoys using</font>

1414
00:59:16,050 --> 00:59:21,060
<font color="#E5E5E5">it sort of automatic updating SDS</font>

1415
00:59:18,480 --> 00:59:22,530
configuration to load that every few

1416
00:59:21,060 --> 00:59:25,259
seconds<font color="#CCCCCC"> so that's how that</font>

1417
00:59:22,530 --> 00:59:27,660
<font color="#CCCCCC">synchronization works</font><font color="#E5E5E5"> okay thanks</font>

1418
00:59:25,260 --> 00:59:31,200
<font color="#CCCCCC">welcome</font><font color="#E5E5E5"> to last question</font><font color="#CCCCCC"> have you</font>

1419
00:59:27,660 --> 00:59:33,720
<font color="#E5E5E5">considered using</font><font color="#CCCCCC"> pub/sub of just the</font>

1420
00:59:31,200 --> 00:59:35,879
relevant metadata<font color="#E5E5E5"> based on the</font><font color="#CCCCCC"> x.509</font>

1421
00:59:33,720 --> 00:59:38,040
identity of the the clients that<font color="#CCCCCC"> you're</font>

1422
00:59:35,880 --> 00:59:40,080
not<font color="#E5E5E5"> also giving them all the information</font>

1423
00:59:38,040 --> 00:59:41,730
about the entire map for the entire

1424
00:59:40,080 --> 00:59:45,150
network yeah

1425
00:59:41,730 --> 00:59:47,520
so you can rather<font color="#E5E5E5"> easily segment what</font>

1426
00:59:45,150 --> 00:59:49,140
information you're providing<font color="#E5E5E5"> and it's</font>

1427
00:59:47,520 --> 00:59:52,310
really<font color="#E5E5E5"> just</font><font color="#CCCCCC"> a matter of sort of</font>

1428
00:59:49,140 --> 00:59:54,660
engineering time at the<font color="#E5E5E5"> moment we have a</font>

1429
00:59:52,310 --> 00:59:56,279
pretty wide availability of that<font color="#E5E5E5"> through</font>

1430
00:59:54,660 --> 00:59:59,670
other service discovery mechanisms so it

1431
00:59:56,280 --> 01:00:02,400
wasn't a<font color="#CCCCCC"> priority for</font><font color="#E5E5E5"> us but it would be</font>

1432
00:59:59,670 --> 01:00:04,830
relatively<font color="#E5E5E5"> easy to</font><font color="#CCCCCC"> have customized</font><font color="#E5E5E5"> on</font>

1433
01:00:02,400 --> 01:00:07,100
I'll bet that<font color="#E5E5E5"> availability in particular</font>

1434
01:00:04,830 --> 01:00:09,120
since everything<font color="#E5E5E5"> is not a</font><font color="#CCCCCC"> emeral and</font>

1435
01:00:07,100 --> 01:00:11,940
everything has<font color="#CCCCCC"> its own time roll you can</font>

1436
01:00:09,120 --> 01:00:13,680
<font color="#E5E5E5">simply make I am</font><font color="#CCCCCC"> role</font><font color="#E5E5E5"> specific web files</font>

1437
01:00:11,940 --> 01:00:16,170
and s3<font color="#E5E5E5"> and set up the permissions to</font>

1438
01:00:13,680 --> 01:00:17,040
allow just<font color="#CCCCCC"> those to access it so on that</font>

1439
01:00:16,170 --> 01:00:20,970
actually<font color="#E5E5E5"> wouldn't be that</font><font color="#CCCCCC"> hard to</font>

1440
01:00:17,040 --> 01:00:22,529
<font color="#CCCCCC">implement alright thank you thank you</font>

1441
01:00:20,970 --> 01:00:26,370
<font color="#E5E5E5">for</font><font color="#CCCCCC"> answering</font><font color="#E5E5E5"> all the questions thank</font>

1442
01:00:22,530 --> 01:00:29,570
<font color="#E5E5E5">you yeah please give us some</font><font color="#CCCCCC"> applause</font>

1443
01:00:26,370 --> 01:00:29,569
<font color="#CCCCCC">for his</font><font color="#E5E5E5"> patience</font>

1444
01:00:32,750 --> 01:00:39,929
[Music]

1445
01:00:42,000 --> 01:00:54,659
[Music]

