1
00:00:00,709 --> 00:00:04,010
<font color="#E5E5E5">hi guys</font>

2
00:00:04,290 --> 00:00:10,710
I suppose you can hear me yeah even I

3
00:00:07,290 --> 00:00:13,200
can hear myself<font color="#CCCCCC"> good</font><font color="#E5E5E5"> so my name is</font>

4
00:00:10,710 --> 00:00:15,240
Stefan<font color="#E5E5E5"> and today</font><font color="#CCCCCC"> I want to tell</font><font color="#E5E5E5"> you</font>

5
00:00:13,200 --> 00:00:17,820
about the hardware<font color="#E5E5E5"> what is for lightning</font>

6
00:00:15,240 --> 00:00:20,640
Network<font color="#CCCCCC"> so I want to start with the</font>

7
00:00:17,820 --> 00:00:23,340
question who is<font color="#E5E5E5"> running a</font><font color="#CCCCCC"> maynot</font>

8
00:00:20,640 --> 00:00:25,380
<font color="#E5E5E5">lightning note please Reza hands Wow</font>

9
00:00:23,340 --> 00:00:28,890
there's a lot<font color="#E5E5E5"> of fretless people in the</font>

10
00:00:25,380 --> 00:00:33,329
audience<font color="#CCCCCC"> I have to admit I don't have</font>

11
00:00:28,890 --> 00:00:35,670
one<font color="#CCCCCC"> I mean I have a minute app on my</font>

12
00:00:33,329 --> 00:00:38,610
phone<font color="#E5E5E5"> where I can send a few</font><font color="#CCCCCC"> sitters is</font>

13
00:00:35,670 --> 00:00:41,219
to draw a cat on the<font color="#E5E5E5"> special place and</font>

14
00:00:38,610 --> 00:00:44,309
<font color="#CCCCCC">they have a test</font><font color="#E5E5E5"> net note but I'm really</font>

15
00:00:41,219 --> 00:00:47,789
really<font color="#CCCCCC"> scared to run a minute</font><font color="#E5E5E5"> lightning</font>

16
00:00:44,309 --> 00:00:50,070
not<font color="#E5E5E5"> because over the</font><font color="#CCCCCC"> years</font><font color="#E5E5E5"> in Bitcoin we</font>

17
00:00:47,789 --> 00:00:53,789
kind of became more and<font color="#CCCCCC"> more paranoid</font>

18
00:00:50,070 --> 00:00:56,910
<font color="#E5E5E5">and normally what we do how we protect</font>

19
00:00:53,789 --> 00:01:00,480
<font color="#E5E5E5">our fans we use crazy multi signature</font>

20
00:00:56,910 --> 00:01:02,760
schemes like<font color="#CCCCCC"> 7</font><font color="#E5E5E5"> of 11 and using the cold</font>

21
00:01:00,480 --> 00:01:05,220
storage<font color="#CCCCCC"> share yep computers out there</font>

22
00:01:02,760 --> 00:01:08,520
madam cables we don't trust USB

23
00:01:05,220 --> 00:01:12,380
connections because maybe there<font color="#E5E5E5"> will be</font>

24
00:01:08,520 --> 00:01:15,630
a malware<font color="#E5E5E5"> or something so</font><font color="#CCCCCC"> MCOs we try to</font>

25
00:01:12,380 --> 00:01:19,350
<font color="#E5E5E5">protect our private keys and never put</font>

26
00:01:15,630 --> 00:01:21,689
them on the online<font color="#CCCCCC"> machine and lightning</font>

27
00:01:19,350 --> 00:01:24,600
well it is awesome<font color="#CCCCCC"> it is</font><font color="#E5E5E5"> great I</font><font color="#CCCCCC"> think</font>

28
00:01:21,689 --> 00:01:27,750
<font color="#E5E5E5">that it is a revolution in the ecosystem</font>

29
00:01:24,600 --> 00:01:30,329
and<font color="#E5E5E5"> that will boost everything but how</font>

30
00:01:27,750 --> 00:01:34,009
we operate the<font color="#E5E5E5"> Lightning</font><font color="#CCCCCC"> node we need to</font>

31
00:01:30,329 --> 00:01:36,720
put our<font color="#CCCCCC"> fans on the online</font><font color="#E5E5E5"> machine and</font>

32
00:01:34,009 --> 00:01:39,509
also we want<font color="#E5E5E5"> to announce to the</font><font color="#CCCCCC"> whole</font>

33
00:01:36,720 --> 00:01:42,420
world that hey guys<font color="#E5E5E5"> I have my font here</font>

34
00:01:39,509 --> 00:01:45,240
<font color="#CCCCCC">I want to route and collect fees so and</font>

35
00:01:42,420 --> 00:01:50,490
here is my IP address<font color="#E5E5E5"> so please come and</font>

36
00:01:45,240 --> 00:01:53,189
you know get it<font color="#E5E5E5"> so that</font><font color="#CCCCCC"> is basically</font><font color="#E5E5E5"> the</font>

37
00:01:50,490 --> 00:01:55,649
reason<font color="#E5E5E5"> why I</font><font color="#CCCCCC"> don't run</font><font color="#E5E5E5"> a mine that</font><font color="#CCCCCC"> not</font>

38
00:01:53,189 --> 00:01:58,079
<font color="#E5E5E5">because I just don't feel</font><font color="#CCCCCC"> that I will be</font>

39
00:01:55,649 --> 00:02:01,619
<font color="#CCCCCC">capable</font><font color="#E5E5E5"> of protecting my own</font><font color="#CCCCCC"> server from</font>

40
00:01:58,079 --> 00:02:04,079
that and I was<font color="#CCCCCC"> thinking</font><font color="#E5E5E5"> about that</font><font color="#CCCCCC"> for a</font>

41
00:02:01,619 --> 00:02:06,000
<font color="#E5E5E5">few months and so that it would be</font>

42
00:02:04,079 --> 00:02:08,758
really<font color="#CCCCCC"> nice to have a hardware wallet</font>

43
00:02:06,000 --> 00:02:10,410
for the<font color="#E5E5E5"> Lightning like that would</font>

44
00:02:08,758 --> 00:02:12,670
operate<font color="#CCCCCC"> in</font><font color="#E5E5E5"> such a way that yeah you</font>

45
00:02:10,410 --> 00:02:14,770
still need to keep it connect

46
00:02:12,670 --> 00:02:17,160
to your computer<font color="#E5E5E5"> but at least you can</font>

47
00:02:14,770 --> 00:02:21,069
take all<font color="#CCCCCC"> your secrets from</font><font color="#E5E5E5"> your server</font>

48
00:02:17,160 --> 00:02:23,319
<font color="#CCCCCC">move</font><font color="#E5E5E5"> that separate device that will do</font>

49
00:02:21,069 --> 00:02:27,369
only one thing managing the secrets<font color="#E5E5E5"> and</font>

50
00:02:23,319 --> 00:02:30,780
nothing<font color="#E5E5E5"> else</font><font color="#CCCCCC"> and run the lightning</font><font color="#E5E5E5"> notes</font>

51
00:02:27,370 --> 00:02:33,819
<font color="#CCCCCC">in such a way that</font><font color="#E5E5E5"> basically we can</font>

52
00:02:30,780 --> 00:02:36,280
decrease<font color="#E5E5E5"> the attack surface by a lot and</font>

53
00:02:33,819 --> 00:02:40,600
<font color="#CCCCCC">just by</font><font color="#E5E5E5"> using</font><font color="#CCCCCC"> a dedicated</font><font color="#E5E5E5"> device for</font>

54
00:02:36,280 --> 00:02:43,870
<font color="#CCCCCC">that and that</font><font color="#E5E5E5"> is what I gonna talk</font><font color="#CCCCCC"> about</font>

55
00:02:40,600 --> 00:02:46,000
<font color="#E5E5E5">oh it's not there yet so we don't</font><font color="#CCCCCC"> have a</font>

56
00:02:43,870 --> 00:02:48,850
hardware wallet for lighting yet but I

57
00:02:46,000 --> 00:02:52,060
know<font color="#CCCCCC"> that</font><font color="#E5E5E5"> all the companies working on</font>

58
00:02:48,850 --> 00:02:54,220
that<font color="#E5E5E5"> and I think that we can make it</font>

59
00:02:52,060 --> 00:02:56,140
happen<font color="#E5E5E5"> but today I want to talk</font><font color="#CCCCCC"> mostly</font>

60
00:02:54,220 --> 00:02:58,120
about the architecture because for

61
00:02:56,140 --> 00:03:01,958
lightning<font color="#E5E5E5"> everything becomes a little</font>

62
00:02:58,120 --> 00:03:05,319
<font color="#CCCCCC">bit more complicated actually so first</font>

63
00:03:01,959 --> 00:03:09,010
to remind what we need for<font color="#E5E5E5"> the hardware</font>

64
00:03:05,319 --> 00:03:10,750
bullet for the Bitcoin<font color="#CCCCCC"> well there</font>

65
00:03:09,010 --> 00:03:12,880
everything is<font color="#E5E5E5"> pretty simple we just need</font>

66
00:03:10,750 --> 00:03:14,950
to prepare<font color="#CCCCCC"> a transaction and unsigned</font>

67
00:03:12,880 --> 00:03:16,989
transaction no matter how complicated it

68
00:03:14,950 --> 00:03:20,140
<font color="#E5E5E5">is it can have multiple</font><font color="#CCCCCC"> inputs outputs</font>

69
00:03:16,989 --> 00:03:21,940
<font color="#E5E5E5">Multi signature whatever so we just put</font>

70
00:03:20,140 --> 00:03:24,488
<font color="#CCCCCC">together all the</font><font color="#E5E5E5"> data that</font><font color="#CCCCCC"> we need</font><font color="#E5E5E5"> we</font>

71
00:03:21,940 --> 00:03:27,070
pass it to the hardware device the

72
00:03:24,489 --> 00:03:29,109
hardware<font color="#E5E5E5"> wallet should be</font><font color="#CCCCCC"> able</font><font color="#E5E5E5"> to parse</font>

73
00:03:27,070 --> 00:03:32,170
it to display<font color="#E5E5E5"> all</font><font color="#CCCCCC"> the information that</font>

74
00:03:29,109 --> 00:03:35,260
<font color="#E5E5E5">we</font><font color="#CCCCCC"> are actually signing what we supposed</font>

75
00:03:32,170 --> 00:03:38,950
<font color="#CCCCCC">to sign and then just sign and send back</font>

76
00:03:35,260 --> 00:03:42,040
to<font color="#E5E5E5"> our online node and broadcasts so</font>

77
00:03:38,950 --> 00:03:45,369
<font color="#E5E5E5">basically a very simple</font><font color="#CCCCCC"> iterative</font>

78
00:03:42,040 --> 00:03:47,858
process all the data<font color="#E5E5E5"> sign can prepare</font>

79
00:03:45,370 --> 00:03:49,690
<font color="#E5E5E5">sign broadcast nothing else with</font>

80
00:03:47,859 --> 00:03:52,420
receiving bitcoins everything is<font color="#E5E5E5"> also</font>

81
00:03:49,690 --> 00:03:54,760
pretty simple<font color="#E5E5E5"> so</font><font color="#CCCCCC"> here you don't you just</font>

82
00:03:52,420 --> 00:03:57,940
need to make<font color="#CCCCCC"> sure</font><font color="#E5E5E5"> that the hardware</font>

83
00:03:54,760 --> 00:03:59,620
wallet will be able<font color="#E5E5E5"> to control the</font>

84
00:03:57,940 --> 00:04:02,170
private key of the corresponding<font color="#CCCCCC"> address</font>

85
00:03:59,620 --> 00:04:04,959
so you generated address on the online

86
00:04:02,170 --> 00:04:08,018
host<font color="#E5E5E5"> and then on the hardware wallet you</font>

87
00:04:04,959 --> 00:04:10,230
just<font color="#E5E5E5"> check that this address corresponds</font>

88
00:04:08,019 --> 00:04:14,790
<font color="#E5E5E5">to the to your private key</font><font color="#CCCCCC"> so it was not</font>

89
00:04:10,230 --> 00:04:17,918
<font color="#E5E5E5">replaced by someone with the lightning</font>

90
00:04:14,790 --> 00:04:20,649
<font color="#E5E5E5">instead of this</font><font color="#CCCCCC"> architecture and instead</font>

91
00:04:17,918 --> 00:04:24,460
<font color="#E5E5E5">of transaction as a core thing we</font>

92
00:04:20,649 --> 00:04:27,190
actually<font color="#CCCCCC"> have channels so basically in</font>

93
00:04:24,460 --> 00:04:29,739
the widen I need to unfortunately I need

94
00:04:27,190 --> 00:04:34,330
to spend some<font color="#E5E5E5"> time reminding reminding</font>

95
00:04:29,740 --> 00:04:35,890
you how<font color="#E5E5E5"> liking works because this</font>

96
00:04:34,330 --> 00:04:38,349
<font color="#E5E5E5">defines what</font><font color="#CCCCCC"> we</font><font color="#E5E5E5"> need to pass</font><font color="#CCCCCC"> to the</font>

97
00:04:35,890 --> 00:04:40,419
<font color="#E5E5E5">hardware wallet so in the</font><font color="#CCCCCC"> Lightning we</font>

98
00:04:38,349 --> 00:04:42,300
have instead<font color="#E5E5E5"> of the transaction we have</font>

99
00:04:40,419 --> 00:04:46,870
a<font color="#E5E5E5"> channel as a main instance and</font>

100
00:04:42,300 --> 00:04:49,930
basically how the<font color="#CCCCCC"> Lightning</font><font color="#E5E5E5"> node</font>

101
00:04:46,870 --> 00:04:52,500
operates<font color="#E5E5E5"> we just open</font><font color="#CCCCCC"> a channel that</font><font color="#E5E5E5"> is</font>

102
00:04:49,930 --> 00:04:55,630
one transaction<font color="#E5E5E5"> that appears on</font><font color="#CCCCCC"> chain</font>

103
00:04:52,500 --> 00:04:58,060
<font color="#E5E5E5">then we can update the channel balance</font>

104
00:04:55,630 --> 00:04:59,530
<font color="#E5E5E5">many many times</font><font color="#CCCCCC"> hundred thousand</font>

105
00:04:58,060 --> 00:05:02,020
whatever<font color="#E5E5E5"> and then eventually at some</font>

106
00:04:59,530 --> 00:05:04,780
point<font color="#E5E5E5"> we</font><font color="#CCCCCC"> need to close the channel</font><font color="#E5E5E5"> and</font>

107
00:05:02,020 --> 00:05:06,609
then<font color="#E5E5E5"> we need again to broadcast another</font>

108
00:05:04,780 --> 00:05:10,859
transaction<font color="#CCCCCC"> unchanged so basically</font>

109
00:05:06,610 --> 00:05:13,630
instead of one<font color="#E5E5E5"> on chain transaction per</font>

110
00:05:10,860 --> 00:05:16,000
actual transaction<font color="#CCCCCC"> we can have on the</font>

111
00:05:13,630 --> 00:05:21,159
two transaction per channel<font color="#E5E5E5"> and any</font>

112
00:05:16,000 --> 00:05:24,490
amount of channel updates there<font color="#CCCCCC"> so how</font>

113
00:05:21,159 --> 00:05:26,800
exactly<font color="#E5E5E5"> it</font><font color="#CCCCCC"> works is the</font><font color="#E5E5E5"> phone let's say</font>

114
00:05:24,490 --> 00:05:31,300
we want<font color="#CCCCCC"> to open</font><font color="#E5E5E5"> the channel to some</font>

115
00:05:26,800 --> 00:05:34,030
other<font color="#CCCCCC"> nodes</font><font color="#E5E5E5"> so we</font><font color="#CCCCCC"> want to put let's say</font>

116
00:05:31,300 --> 00:05:36,580
one Bitcoin<font color="#E5E5E5"> into the channel and then</font>

117
00:05:34,030 --> 00:05:39,309
start<font color="#CCCCCC"> actually sending money back</font><font color="#E5E5E5"> and</font>

118
00:05:36,580 --> 00:05:41,260
forth to the whole<font color="#E5E5E5"> network so what we do</font>

119
00:05:39,310 --> 00:05:43,270
we<font color="#E5E5E5"> talk to this other node and say hey</font>

120
00:05:41,260 --> 00:05:46,630
guys so we want<font color="#CCCCCC"> to</font><font color="#E5E5E5"> open a channel with</font>

121
00:05:43,270 --> 00:05:49,240
you<font color="#E5E5E5"> if you agree</font><font color="#CCCCCC"> please</font><font color="#E5E5E5"> give me some</font>

122
00:05:46,630 --> 00:05:52,870
kind of public key that<font color="#E5E5E5"> we should walk</font>

123
00:05:49,240 --> 00:05:55,210
<font color="#E5E5E5">the funster</font><font color="#CCCCCC"> so he is fine with that</font>

124
00:05:52,870 --> 00:06:00,789
<font color="#CCCCCC">because well it doesn't</font><font color="#E5E5E5"> cost anything</font><font color="#CCCCCC"> to</font>

125
00:05:55,210 --> 00:06:02,799
the for the other<font color="#E5E5E5"> node and we prepare we</font>

126
00:06:00,789 --> 00:06:05,440
get<font color="#E5E5E5"> this public</font><font color="#CCCCCC"> key</font><font color="#E5E5E5"> and prepare the</font>

127
00:06:02,800 --> 00:06:07,930
transaction<font color="#CCCCCC"> that is -</font><font color="#E5E5E5"> automata signature</font>

128
00:06:05,440 --> 00:06:11,860
so basically we<font color="#CCCCCC"> lock one</font><font color="#E5E5E5"> Bitcoin that we</font>

129
00:06:07,930 --> 00:06:13,870
want to<font color="#E5E5E5"> put into the channel and we</font><font color="#CCCCCC"> will</font>

130
00:06:11,860 --> 00:06:16,900
be able<font color="#E5E5E5"> to release it</font><font color="#CCCCCC"> only if both of</font>

131
00:06:13,870 --> 00:06:19,659
<font color="#E5E5E5">the parties agree on that the important</font>

132
00:06:16,900 --> 00:06:21,729
thing<font color="#CCCCCC"> here is that if</font><font color="#E5E5E5"> we just prepare</font>

133
00:06:19,659 --> 00:06:23,320
this<font color="#CCCCCC"> to of to multi signature</font>

134
00:06:21,729 --> 00:06:26,020
<font color="#E5E5E5">transaction and broadcast it right away</font>

135
00:06:23,320 --> 00:06:28,120
<font color="#CCCCCC">and the remote node will disappear what</font>

136
00:06:26,020 --> 00:06:31,839
will<font color="#E5E5E5"> happen our fans will</font><font color="#CCCCCC"> be forever</font>

137
00:06:28,120 --> 00:06:34,690
walked<font color="#E5E5E5"> right so before signing and</font>

138
00:06:31,839 --> 00:06:36,849
broadcasting<font color="#E5E5E5"> this funding transaction we</font>

139
00:06:34,690 --> 00:06:38,800
actually first need<font color="#CCCCCC"> to ask the remote</font>

140
00:06:36,849 --> 00:06:40,810
nodes<font color="#CCCCCC"> to get</font>

141
00:06:38,800 --> 00:06:42,639
the commitment transaction<font color="#CCCCCC"> Freud's</font><font color="#E5E5E5"> so</font>

142
00:06:40,810 --> 00:06:46,120
like<font color="#E5E5E5"> okay I'm opening the channel with</font>

143
00:06:42,639 --> 00:06:49,030
you<font color="#CCCCCC"> I'm putting one</font><font color="#E5E5E5"> Bitcoin there</font><font color="#CCCCCC"> I will</font>

144
00:06:46,120 --> 00:06:51,639
have I want<font color="#E5E5E5"> to get it back</font><font color="#CCCCCC"> so let's</font>

145
00:06:49,030 --> 00:06:54,760
please sign this transaction<font color="#E5E5E5"> where we</font>

146
00:06:51,639 --> 00:06:56,950
put one Bitcoin<font color="#E5E5E5"> to me and zero bitcoins</font>

147
00:06:54,760 --> 00:06:58,750
to you like I've heard you you didn't do

148
00:06:56,950 --> 00:07:02,260
anything so<font color="#CCCCCC"> you don't</font><font color="#E5E5E5"> even get any money</font>

149
00:06:58,750 --> 00:07:04,360
yet<font color="#CCCCCC"> so then when the other</font><font color="#E5E5E5"> party</font>

150
00:07:02,260 --> 00:07:08,530
<font color="#E5E5E5">actually</font><font color="#CCCCCC"> sign this transaction then we</font>

151
00:07:04,360 --> 00:07:10,840
already<font color="#E5E5E5"> can get our money</font><font color="#CCCCCC"> but</font><font color="#E5E5E5"> if the</font>

152
00:07:08,530 --> 00:07:12,849
other party<font color="#CCCCCC"> will disappear</font><font color="#E5E5E5"> so this is</font>

153
00:07:10,840 --> 00:07:15,400
the commitment transaction and we in

154
00:07:12,850 --> 00:07:17,290
<font color="#E5E5E5">return also</font><font color="#CCCCCC"> give the commitment</font>

155
00:07:15,400 --> 00:07:20,650
transaction to<font color="#CCCCCC"> the other party where we</font>

156
00:07:17,290 --> 00:07:23,500
get again<font color="#E5E5E5"> one</font><font color="#CCCCCC"> Bitcoin and</font><font color="#E5E5E5"> zero to the</font>

157
00:07:20,650 --> 00:07:25,510
other<font color="#E5E5E5"> party and now when we broadcast</font>

158
00:07:23,500 --> 00:07:28,450
this transaction and<font color="#E5E5E5"> it actually set us</font>

159
00:07:25,510 --> 00:07:30,520
<font color="#E5E5E5">on the blockchain we know that our</font>

160
00:07:28,450 --> 00:07:37,389
channel is open and we can<font color="#E5E5E5"> start</font>

161
00:07:30,520 --> 00:07:40,570
updating this channel values so how the

162
00:07:37,389 --> 00:07:42,880
channel updates work<font color="#CCCCCC"> we have</font><font color="#E5E5E5"> this</font>

163
00:07:40,570 --> 00:07:44,800
commitment transactions so initially<font color="#E5E5E5"> one</font>

164
00:07:42,880 --> 00:07:47,260
<font color="#CCCCCC">Bitcoin to me zero Bitcoin to the other</font>

165
00:07:44,800 --> 00:07:50,710
party<font color="#E5E5E5"> and then we</font><font color="#CCCCCC"> can</font><font color="#E5E5E5"> update this</font>

166
00:07:47,260 --> 00:07:53,440
channel balances and gets more<font color="#E5E5E5"> and more</font>

167
00:07:50,710 --> 00:07:56,590
commitment transactions and every next

168
00:07:53,440 --> 00:07:58,930
<font color="#E5E5E5">pair of commitment transactions has to</font>

169
00:07:56,590 --> 00:08:03,369
<font color="#E5E5E5">cancel the previous ones</font><font color="#CCCCCC"> such that only</font>

170
00:07:58,930 --> 00:08:09,960
the<font color="#E5E5E5"> last stage of the of the channel can</font>

171
00:08:03,370 --> 00:08:13,800
go on chain so this is done by<font color="#E5E5E5"> using</font>

172
00:08:09,960 --> 00:08:16,659
<font color="#CCCCCC">so-called</font><font color="#E5E5E5"> revocation keys</font><font color="#CCCCCC"> so basically</font>

173
00:08:13,800 --> 00:08:19,660
if you<font color="#CCCCCC"> look at the structure of the</font>

174
00:08:16,660 --> 00:08:22,840
<font color="#CCCCCC">transaction that</font><font color="#E5E5E5"> we use here then the</font>

175
00:08:19,660 --> 00:08:25,270
funding transaction is a normal<font color="#CCCCCC"> to of to</font>

176
00:08:22,840 --> 00:08:27,820
<font color="#E5E5E5">multisig that is working or everything</font>

177
00:08:25,270 --> 00:08:30,010
<font color="#E5E5E5">for to public is mine and the other node</font>

178
00:08:27,820 --> 00:08:32,080
and then the<font color="#E5E5E5"> commitment transaction is</font>

179
00:08:30,010 --> 00:08:36,250
actually<font color="#CCCCCC"> different for two other parties</font>

180
00:08:32,080 --> 00:08:38,740
for for two parties so for me the

181
00:08:36,250 --> 00:08:42,339
commitment transaction looks like there

182
00:08:38,740 --> 00:08:45,010
are two<font color="#E5E5E5"> outputs one outputs to another</font>

183
00:08:42,339 --> 00:08:50,140
node<font color="#E5E5E5"> that is a normal</font>

184
00:08:45,010 --> 00:08:53,800
<font color="#CCCCCC">ptoo popke</font><font color="#E5E5E5"> fish and my</font><font color="#CCCCCC"> output is a</font>

185
00:08:50,140 --> 00:08:56,470
little bit tricky<font color="#CCCCCC"> so if</font><font color="#E5E5E5"> i broadcast this</font>

186
00:08:53,800 --> 00:08:58,240
commitment transaction so if<font color="#CCCCCC"> I I already</font>

187
00:08:56,470 --> 00:09:00,640
get<font color="#CCCCCC"> it signed from</font><font color="#E5E5E5"> the other party so I</font>

188
00:08:58,240 --> 00:09:04,270
can<font color="#E5E5E5"> just sign it and broadcast what will</font>

189
00:09:00,640 --> 00:09:06,189
happen before<font color="#CCCCCC"> I can use my output I need</font>

190
00:09:04,270 --> 00:09:08,890
to wait for<font color="#CCCCCC"> a certain</font><font color="#E5E5E5"> time</font><font color="#CCCCCC"> and</font><font color="#E5E5E5"> enlighten</font>

191
00:09:06,190 --> 00:09:11,050
right now it is I think<font color="#CCCCCC"> seven days that</font>

192
00:09:08,890 --> 00:09:12,840
will be reduced to one<font color="#E5E5E5"> day so normally</font>

193
00:09:11,050 --> 00:09:18,069
in the normal<font color="#CCCCCC"> operation it is one day</font>

194
00:09:12,840 --> 00:09:21,130
and this<font color="#E5E5E5"> the other option how someone</font>

195
00:09:18,070 --> 00:09:24,610
can spend this output<font color="#E5E5E5"> is if he knows a</font>

196
00:09:21,130 --> 00:09:28,180
certain secret<font color="#E5E5E5"> and well basically the</font>

197
00:09:24,610 --> 00:09:30,340
other party if it<font color="#CCCCCC"> knows the secret then</font>

198
00:09:28,180 --> 00:09:33,130
it can grab all<font color="#E5E5E5"> these funds and</font>

199
00:09:30,340 --> 00:09:36,250
basically punish me so the idea here is

200
00:09:33,130 --> 00:09:37,810
<font color="#CCCCCC">that</font><font color="#E5E5E5"> if this commitment transaction</font>

201
00:09:36,250 --> 00:09:40,390
<font color="#E5E5E5">corresponds to the latest state of the</font>

202
00:09:37,810 --> 00:09:42,310
<font color="#CCCCCC">channel then if</font><font color="#E5E5E5"> I broadcast it I just</font>

203
00:09:40,390 --> 00:09:46,590
<font color="#E5E5E5">need to wait</font><font color="#CCCCCC"> for one day and get</font><font color="#E5E5E5"> my</font>

204
00:09:42,310 --> 00:09:50,349
funds<font color="#CCCCCC"> but if it is a</font><font color="#E5E5E5"> previous</font><font color="#CCCCCC"> state</font><font color="#E5E5E5"> then</font>

205
00:09:46,590 --> 00:09:53,590
on every channel<font color="#E5E5E5"> update on every new</font>

206
00:09:50,350 --> 00:09:55,810
pair of commitment transaction<font color="#CCCCCC"> I give</font>

207
00:09:53,590 --> 00:09:57,760
the revocation key to the other party

208
00:09:55,810 --> 00:10:00,099
such that if<font color="#CCCCCC"> I broadcast the previous</font>

209
00:09:57,760 --> 00:10:01,630
commitment transaction then I will be

210
00:10:00,100 --> 00:10:05,290
punished and they will lose all the

211
00:10:01,630 --> 00:10:12,910
money<font color="#E5E5E5"> here so</font><font color="#CCCCCC"> this is this puzzle</font><font color="#E5E5E5"> that</font>

212
00:10:05,290 --> 00:10:16,390
<font color="#CCCCCC">is shown here and finally there are</font><font color="#E5E5E5"> two</font>

213
00:10:12,910 --> 00:10:19,150
ways to<font color="#E5E5E5"> close the channel so one is a</font>

214
00:10:16,390 --> 00:10:21,490
mutual<font color="#E5E5E5"> cause when I just talked to</font>

215
00:10:19,150 --> 00:10:24,069
<font color="#E5E5E5">another guy that's okay let's close</font><font color="#CCCCCC"> I</font>

216
00:10:21,490 --> 00:10:25,600
don't<font color="#CCCCCC"> want to wait for one day</font><font color="#E5E5E5"> let's</font>

217
00:10:24,070 --> 00:10:28,060
<font color="#E5E5E5">just do a normal two of the most</font>

218
00:10:25,600 --> 00:10:30,880
signature transaction<font color="#E5E5E5"> that</font><font color="#CCCCCC"> you spend our</font>

219
00:10:28,060 --> 00:10:33,339
latest<font color="#CCCCCC"> hour bitcoins according to the</font>

220
00:10:30,880 --> 00:10:35,020
way to state of<font color="#E5E5E5"> the channel and we</font>

221
00:10:33,340 --> 00:10:37,900
broadcast it<font color="#CCCCCC"> to</font><font color="#E5E5E5"> the blockchain and we</font>

222
00:10:35,020 --> 00:10:40,720
instantly<font color="#E5E5E5"> get our fans back and we can</font>

223
00:10:37,900 --> 00:10:42,400
use them<font color="#E5E5E5"> and another option is if one</font><font color="#CCCCCC"> of</font>

224
00:10:40,720 --> 00:10:44,680
the parties disappears then we can just

225
00:10:42,400 --> 00:10:46,990
take<font color="#CCCCCC"> the last commitment transaction</font>

226
00:10:44,680 --> 00:10:51,849
<font color="#E5E5E5">that we have sign it and broadcast but</font>

227
00:10:46,990 --> 00:10:56,470
then we need to wait for<font color="#E5E5E5"> one day so this</font>

228
00:10:51,850 --> 00:10:57,930
<font color="#E5E5E5">is roughly</font><font color="#CCCCCC"> how it works one extra thing</font>

229
00:10:56,470 --> 00:10:59,880
is how we

230
00:10:57,930 --> 00:11:02,250
<font color="#CCCCCC">I actually paid to</font><font color="#E5E5E5"> the remote</font><font color="#CCCCCC"> note that</font>

231
00:10:59,880 --> 00:11:05,430
we are<font color="#CCCCCC"> not directly</font><font color="#E5E5E5"> connected</font><font color="#CCCCCC"> to so like</font>

232
00:11:02,250 --> 00:11:07,020
if I<font color="#CCCCCC"> I'm connected to</font><font color="#E5E5E5"> what's safe that</font>

233
00:11:05,430 --> 00:11:10,910
<font color="#E5E5E5">was a place but</font><font color="#CCCCCC"> I want to pay two-bit</font>

234
00:11:07,020 --> 00:11:14,060
<font color="#E5E5E5">review then I can use multi-hop</font>

235
00:11:10,910 --> 00:11:17,550
transactions<font color="#CCCCCC"> multi-hop payment to</font>

236
00:11:14,060 --> 00:11:19,500
actually reach the<font color="#E5E5E5"> final note so here</font>

237
00:11:17,550 --> 00:11:21,930
everything<font color="#E5E5E5"> is also pretty simple</font><font color="#CCCCCC"> we just</font>

238
00:11:19,500 --> 00:11:24,740
<font color="#CCCCCC">ask the latest the last note that we</font><font color="#E5E5E5"> are</font>

239
00:11:21,930 --> 00:11:29,149
paying to to<font color="#E5E5E5"> generate a certain secret</font>

240
00:11:24,740 --> 00:11:29,149
<font color="#CCCCCC">then the hash</font><font color="#E5E5E5"> of the</font><font color="#CCCCCC"> secret</font>

241
00:11:30,050 --> 00:11:40,920
basically represents the kind<font color="#E5E5E5"> of puzzle</font>

242
00:11:35,520 --> 00:11:43,589
so basically we<font color="#E5E5E5"> offer to the note along</font>

243
00:11:40,920 --> 00:11:45,979
the<font color="#E5E5E5"> route that we don't pay you a</font>

244
00:11:43,589 --> 00:11:50,459
certain<font color="#E5E5E5"> amount or say we want to pay</font>

245
00:11:45,980 --> 00:11:53,370
$100 to<font color="#E5E5E5"> this node and we are here and</font>

246
00:11:50,459 --> 00:11:56,430
this<font color="#E5E5E5"> is</font><font color="#CCCCCC"> the kinda guy in the middle so</font>

247
00:11:53,370 --> 00:11:59,580
we<font color="#E5E5E5"> can say okay I will pay 101 to you if</font>

248
00:11:56,430 --> 00:12:03,150
you give<font color="#E5E5E5"> me the hash</font><font color="#CCCCCC"> if you give me the</font>

249
00:11:59,580 --> 00:12:07,820
secret<font color="#E5E5E5"> that hashes to this value then</font>

250
00:12:03,150 --> 00:12:10,920
this guy talks already directly<font color="#E5E5E5"> to the</font>

251
00:12:07,820 --> 00:12:14,820
to the final note that I will pay you

252
00:12:10,920 --> 00:12:17,520
<font color="#E5E5E5">101 he gets the hash</font><font color="#CCCCCC"> he tells the hash</font>

253
00:12:14,820 --> 00:12:19,650
<font color="#CCCCCC">oh</font><font color="#E5E5E5"> sorry not the hash he get the</font>

254
00:12:17,520 --> 00:12:22,500
<font color="#CCCCCC">preimage</font><font color="#E5E5E5"> he sends the</font><font color="#CCCCCC"> preimage</font><font color="#E5E5E5"> to me so</font>

255
00:12:19,650 --> 00:12:25,620
we know<font color="#CCCCCC"> now</font><font color="#E5E5E5"> that if something happens we</font>

256
00:12:22,500 --> 00:12:27,870
can all put that in the blockchain but

257
00:12:25,620 --> 00:12:30,470
we don't want to<font color="#E5E5E5"> do that instead</font><font color="#CCCCCC"> we just</font>

258
00:12:27,870 --> 00:12:36,620
<font color="#E5E5E5">update the channels to the new values</font>

259
00:12:30,470 --> 00:12:36,620
<font color="#CCCCCC">yeah I think</font><font color="#E5E5E5"> that's not</font><font color="#CCCCCC"> very clear but</font>

260
00:12:37,880 --> 00:12:45,870
yeah so<font color="#E5E5E5"> going</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> little bit more into the</font>

261
00:12:42,990 --> 00:12:48,450
hardware bullets and what the<font color="#E5E5E5"> Lightning</font>

262
00:12:45,870 --> 00:12:50,579
nodes what secrets does it contain so

263
00:12:48,450 --> 00:12:53,940
the idea is again<font color="#E5E5E5"> that we take all the</font>

264
00:12:50,579 --> 00:12:56,550
secrets<font color="#CCCCCC"> and move it from the whitening</font>

265
00:12:53,940 --> 00:12:58,890
nodes to the<font color="#E5E5E5"> hardware device</font><font color="#CCCCCC"> the thing</font>

266
00:12:56,550 --> 00:13:00,930
is<font color="#E5E5E5"> that maybe we don't want to do it</font>

267
00:12:58,890 --> 00:13:03,899
with all the secrets because there are

268
00:13:00,930 --> 00:13:06,479
plenty of them I mean<font color="#CCCCCC"> basically in every</font>

269
00:13:03,899 --> 00:13:09,190
<font color="#E5E5E5">writing implementation right now we</font><font color="#CCCCCC"> use</font>

270
00:13:06,480 --> 00:13:11,500
the<font color="#CCCCCC"> route secret that then</font>

271
00:13:09,190 --> 00:13:13,810
is used to derive<font color="#E5E5E5"> multiple secrets that</font>

272
00:13:11,500 --> 00:13:16,030
are<font color="#E5E5E5"> used for</font><font color="#CCCCCC"> different purposes for</font>

273
00:13:13,810 --> 00:13:19,750
instance one can<font color="#E5E5E5"> the branch of</font><font color="#CCCCCC"> Secrets</font>

274
00:13:16,030 --> 00:13:21,819
is<font color="#CCCCCC"> the unseen keys so basically the</font>

275
00:13:19,750 --> 00:13:24,250
private<font color="#E5E5E5"> keys for</font><font color="#CCCCCC"> our</font><font color="#E5E5E5"> Bitcoin</font>

276
00:13:21,820 --> 00:13:27,300
transactions<font color="#E5E5E5"> for funding and closing</font>

277
00:13:24,250 --> 00:13:31,510
transaction and everything like<font color="#E5E5E5"> that</font><font color="#CCCCCC"> and</font>

278
00:13:27,300 --> 00:13:34,569
<font color="#CCCCCC">this is basically</font><font color="#E5E5E5"> just a HD hierarchical</font>

279
00:13:31,510 --> 00:13:38,439
deterministic<font color="#E5E5E5"> wallet that</font><font color="#CCCCCC"> is used for</font>

280
00:13:34,570 --> 00:13:41,290
for everything<font color="#E5E5E5"> then there is another in</font>

281
00:13:38,440 --> 00:13:42,430
<font color="#E5E5E5">the past that derives all the secrets</font>

282
00:13:41,290 --> 00:13:48,040
for<font color="#CCCCCC"> the</font><font color="#E5E5E5"> channel updates</font>

283
00:13:42,430 --> 00:13:51,400
<font color="#CCCCCC">so all this revocation</font><font color="#E5E5E5"> keys and maybe it</font>

284
00:13:48,040 --> 00:13:55,599
is also used<font color="#E5E5E5"> for something else but</font>

285
00:13:51,400 --> 00:13:58,810
basically as we use a certain<font color="#E5E5E5"> secret for</font>

286
00:13:55,600 --> 00:14:00,940
a particular<font color="#E5E5E5"> channel and then there is a</font>

287
00:13:58,810 --> 00:14:03,189
third secret<font color="#E5E5E5"> that is an</font><font color="#CCCCCC"> Alt key</font><font color="#E5E5E5"> this</font><font color="#CCCCCC"> is</font>

288
00:14:00,940 --> 00:14:06,120
the kind of our identity to<font color="#E5E5E5"> the</font><font color="#CCCCCC"> world so</font>

289
00:14:03,190 --> 00:14:08,890
it is our representation<font color="#CCCCCC"> in the network</font>

290
00:14:06,120 --> 00:14:10,480
<font color="#CCCCCC">that corresponds</font><font color="#E5E5E5"> to the node ID so</font>

291
00:14:08,890 --> 00:14:12,460
basically when you<font color="#CCCCCC"> are connecting to</font><font color="#E5E5E5"> the</font>

292
00:14:10,480 --> 00:14:14,950
<font color="#CCCCCC">lightning node you are</font><font color="#E5E5E5"> normally saying</font>

293
00:14:12,460 --> 00:14:16,840
that<font color="#E5E5E5"> again this is</font><font color="#CCCCCC"> the public</font><font color="#E5E5E5"> key and</font>

294
00:14:14,950 --> 00:14:18,790
then<font color="#E5E5E5"> this is the IP address</font><font color="#CCCCCC"> so the</font>

295
00:14:16,840 --> 00:14:22,240
public key corresponds to this guy to

296
00:14:18,790 --> 00:14:26,349
the node<font color="#E5E5E5"> so obviously if you will want</font>

297
00:14:22,240 --> 00:14:30,070
<font color="#CCCCCC">to keep our</font><font color="#E5E5E5"> fan safe</font><font color="#CCCCCC"> we want to protect</font>

298
00:14:26,350 --> 00:14:32,040
<font color="#E5E5E5">these guys and these guys yeah and the</font>

299
00:14:30,070 --> 00:14:35,080
nice<font color="#CCCCCC"> thing about all this derivation is</font>

300
00:14:32,040 --> 00:14:37,390
that they're not<font color="#E5E5E5"> connected to each other</font>

301
00:14:35,080 --> 00:14:41,590
directly<font color="#E5E5E5"> right so you can't start from</font>

302
00:14:37,390 --> 00:14:43,890
<font color="#E5E5E5">here and</font><font color="#CCCCCC"> then</font><font color="#E5E5E5"> derive the secret on</font><font color="#CCCCCC"> the</font>

303
00:14:41,590 --> 00:14:48,690
other branch so basically there we use

304
00:14:43,890 --> 00:14:52,060
hashes<font color="#CCCCCC"> and hash key generation functions</font>

305
00:14:48,690 --> 00:14:54,070
so this means that we<font color="#E5E5E5"> maybe wants to</font>

306
00:14:52,060 --> 00:14:57,130
<font color="#CCCCCC">keep this guy and this guy</font><font color="#E5E5E5"> on the</font>

307
00:14:54,070 --> 00:15:00,220
<font color="#E5E5E5">hardware wallet</font><font color="#CCCCCC"> but about this</font><font color="#E5E5E5"> one</font>

308
00:14:57,130 --> 00:15:04,089
there could be<font color="#E5E5E5"> use cases when we</font><font color="#CCCCCC"> don't</font>

309
00:15:00,220 --> 00:15:06,990
<font color="#E5E5E5">really care</font><font color="#CCCCCC"> about it so the node key for</font>

310
00:15:04,089 --> 00:15:10,060
instance is used for<font color="#E5E5E5"> communication for</font>

311
00:15:06,990 --> 00:15:13,120
gossiping and<font color="#E5E5E5"> for broadcasting the</font>

312
00:15:10,060 --> 00:15:16,989
information about<font color="#CCCCCC"> channel settings and</font>

313
00:15:13,120 --> 00:15:20,110
<font color="#E5E5E5">channel balances so this kind of stuff</font>

314
00:15:16,990 --> 00:15:22,390
doesn't<font color="#CCCCCC"> really touch our</font><font color="#E5E5E5"> fonts</font><font color="#CCCCCC"> and so</font>

315
00:15:20,110 --> 00:15:26,050
maybe<font color="#E5E5E5"> we can just</font><font color="#CCCCCC"> keep it on</font><font color="#E5E5E5"> the</font>

316
00:15:22,390 --> 00:15:27,939
itself<font color="#E5E5E5"> and then if we use these secrets</font>

317
00:15:26,050 --> 00:15:30,250
to the hardware device<font color="#E5E5E5"> even with the</font>

318
00:15:27,940 --> 00:15:32,710
<font color="#E5E5E5">hardware wallet completely disconnected</font>

319
00:15:30,250 --> 00:15:35,230
<font color="#CCCCCC">from</font><font color="#E5E5E5"> the node we will have a kind of</font>

320
00:15:32,710 --> 00:15:37,210
<font color="#CCCCCC">lightning</font><font color="#E5E5E5"> node in a watch</font><font color="#CCCCCC"> only mode that</font>

321
00:15:35,230 --> 00:15:41,620
<font color="#CCCCCC">will still</font><font color="#E5E5E5"> be able to connect</font><font color="#CCCCCC"> to other</font>

322
00:15:37,210 --> 00:15:43,840
nodes<font color="#E5E5E5"> not like pay anything or</font><font color="#CCCCCC"> router</font>

323
00:15:41,620 --> 00:15:46,990
<font color="#E5E5E5">payments but at least talk</font><font color="#CCCCCC"> to them and</font>

324
00:15:43,840 --> 00:15:55,720
<font color="#E5E5E5">discard</font><font color="#CCCCCC"> that I'm kind of a wife</font><font color="#E5E5E5"> but not</font>

325
00:15:46,990 --> 00:15:57,340
quite yeah so<font color="#E5E5E5"> about</font><font color="#CCCCCC"> this secret</font><font color="#E5E5E5"> and the</font>

326
00:15:55,720 --> 00:15:59,650
problem right<font color="#CCCCCC"> now</font><font color="#E5E5E5"> is</font><font color="#CCCCCC"> that the hardware</font>

327
00:15:57,340 --> 00:16:02,770
<font color="#E5E5E5">wallet that currently exists they can do</font>

328
00:15:59,650 --> 00:16:04,959
only<font color="#CCCCCC"> very simple things</font><font color="#E5E5E5"> right this is</font>

329
00:16:02,770 --> 00:16:07,150
the<font color="#E5E5E5"> transaction</font><font color="#CCCCCC"> I can sign it I can</font>

330
00:16:04,960 --> 00:16:09,550
display the information<font color="#E5E5E5"> about that and</font>

331
00:16:07,150 --> 00:16:13,030
<font color="#E5E5E5">that's it for lightning we need a little</font>

332
00:16:09,550 --> 00:16:15,040
<font color="#E5E5E5">bit more of that and even if you look at</font>

333
00:16:13,030 --> 00:16:19,260
the very first<font color="#CCCCCC"> part where we open</font><font color="#E5E5E5"> the</font>

334
00:16:15,040 --> 00:16:22,750
channel<font color="#CCCCCC"> we can't just make the</font>

335
00:16:19,260 --> 00:16:25,210
transaction<font color="#CCCCCC"> - to multi signature output</font>

336
00:16:22,750 --> 00:16:27,070
<font color="#E5E5E5">we also need to wait for</font><font color="#CCCCCC"> the commitment</font>

337
00:16:25,210 --> 00:16:31,890
transaction<font color="#E5E5E5"> sign from the other node</font>

338
00:16:27,070 --> 00:16:34,600
<font color="#E5E5E5">right so before giving the signs</font>

339
00:16:31,890 --> 00:16:37,630
transaction funding transaction to<font color="#CCCCCC"> the</font>

340
00:16:34,600 --> 00:16:40,420
to the host we actually need<font color="#CCCCCC"> to make</font>

341
00:16:37,630 --> 00:16:44,890
sure<font color="#CCCCCC"> that we will be able</font><font color="#E5E5E5"> to redeem</font>

342
00:16:40,420 --> 00:16:46,780
<font color="#E5E5E5">these funds afterwards and this is</font>

343
00:16:44,890 --> 00:16:48,910
basically<font color="#E5E5E5"> what</font><font color="#CCCCCC"> we</font><font color="#E5E5E5"> need to do but this</font>

344
00:16:46,780 --> 00:16:51,939
doesn't<font color="#CCCCCC"> require any additional</font><font color="#E5E5E5"> hardware</font>

345
00:16:48,910 --> 00:16:53,350
or anything so it's just instead<font color="#E5E5E5"> of one</font>

346
00:16:51,940 --> 00:16:58,180
transaction we need to parse two

347
00:16:53,350 --> 00:16:59,830
transactions with closing<font color="#CCCCCC"> the channel</font>

348
00:16:58,180 --> 00:17:02,140
<font color="#E5E5E5">everything is simple it is basically</font>

349
00:16:59,830 --> 00:17:06,640
very<font color="#E5E5E5"> similar to what we do right</font><font color="#CCCCCC"> now</font>

350
00:17:02,140 --> 00:17:10,959
with Bitcoin with unilateral<font color="#CCCCCC"> Clause even</font>

351
00:17:06,640 --> 00:17:14,160
<font color="#E5E5E5">here but the important thing everywhere</font>

352
00:17:10,959 --> 00:17:19,570
here is that the commitment transaction

353
00:17:14,160 --> 00:17:22,930
<font color="#E5E5E5">should be stored somewhere and maybe</font>

354
00:17:19,569 --> 00:17:25,899
<font color="#CCCCCC">even in unsigned state so basically the</font>

355
00:17:22,930 --> 00:17:27,910
problem<font color="#E5E5E5"> is that we use the hardware</font>

356
00:17:25,900 --> 00:17:29,620
wallet in the assumption that<font color="#E5E5E5"> our host</font>

357
00:17:27,910 --> 00:17:32,140
<font color="#E5E5E5">is compromised</font><font color="#CCCCCC"> like that the hacker</font>

358
00:17:29,620 --> 00:17:33,969
already locked in until<font color="#E5E5E5"> our</font><font color="#CCCCCC"> OID node and</font>

359
00:17:32,140 --> 00:17:36,070
can do<font color="#E5E5E5"> anything he wants</font>

360
00:17:33,970 --> 00:17:40,570
so the problem here

361
00:17:36,070 --> 00:17:42,970
if he has access<font color="#E5E5E5"> to all</font><font color="#CCCCCC"> our commitment</font>

362
00:17:40,570 --> 00:17:44,860
transactions from from the channel<font color="#E5E5E5"> what</font>

363
00:17:42,970 --> 00:17:49,990
he can do he<font color="#CCCCCC"> can just broadcast the old</font>

364
00:17:44,860 --> 00:17:51,939
<font color="#E5E5E5">state</font><font color="#CCCCCC"> and then he will get all the funds</font>

365
00:17:49,990 --> 00:17:55,450
well not he will<font color="#E5E5E5"> get more the funds but</font>

366
00:17:51,940 --> 00:17:56,620
<font color="#E5E5E5">we</font><font color="#CCCCCC"> will be punished</font><font color="#E5E5E5"> right so storing the</font>

367
00:17:55,450 --> 00:17:59,290
commitment transaction

368
00:17:56,620 --> 00:18:01,530
on<font color="#E5E5E5"> the host</font><font color="#CCCCCC"> when it is</font><font color="#E5E5E5"> already signed by</font>

369
00:17:59,290 --> 00:18:03,670
the both parties<font color="#CCCCCC"> is a terrible idea</font>

370
00:18:01,530 --> 00:18:06,430
<font color="#CCCCCC">instead</font><font color="#E5E5E5"> what you want</font><font color="#CCCCCC"> to do you can</font>

371
00:18:03,670 --> 00:18:09,760
<font color="#E5E5E5">still store the commitment transactions</font>

372
00:18:06,430 --> 00:18:12,730
on<font color="#CCCCCC"> the host</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> when you want to</font>

373
00:18:09,760 --> 00:18:14,650
<font color="#CCCCCC">actually close the channel</font><font color="#E5E5E5"> then</font><font color="#CCCCCC"> you sign</font>

374
00:18:12,730 --> 00:18:17,590
it with<font color="#E5E5E5"> the</font><font color="#CCCCCC"> hardware wallet and</font>

375
00:18:14,650 --> 00:18:20,050
broadcast<font color="#CCCCCC"> but the problem</font><font color="#E5E5E5"> here it can</font><font color="#CCCCCC"> be</font>

376
00:18:17,590 --> 00:18:23,110
that if someone deletes this commitment

377
00:18:20,050 --> 00:18:25,840
transaction<font color="#E5E5E5"> then we are stuck</font><font color="#CCCCCC"> with the</font>

378
00:18:23,110 --> 00:18:27,879
<font color="#E5E5E5">for</font><font color="#CCCCCC"> our opens channel and the only way</font>

379
00:18:25,840 --> 00:18:32,350
<font color="#E5E5E5">to close it is actually to ask the other</font>

380
00:18:27,880 --> 00:18:34,150
node to close it<font color="#CCCCCC"> so I</font><font color="#E5E5E5"> believe</font><font color="#CCCCCC"> that for</font>

381
00:18:32,350 --> 00:18:36,459
<font color="#CCCCCC">Hardware waters for lightning we need</font>

382
00:18:34,150 --> 00:18:39,520
not only<font color="#E5E5E5"> current functionality but we</font>

383
00:18:36,460 --> 00:18:42,370
also need<font color="#E5E5E5"> additional storage</font><font color="#CCCCCC"> because</font><font color="#E5E5E5"> we</font>

384
00:18:39,520 --> 00:18:45,639
need<font color="#E5E5E5"> to store</font><font color="#CCCCCC"> the latest commitment</font>

385
00:18:42,370 --> 00:18:50,979
transaction per channel<font color="#E5E5E5"> at least and</font>

386
00:18:45,640 --> 00:18:53,050
also we need to<font color="#E5E5E5"> well it can be pretty</font>

387
00:18:50,980 --> 00:18:55,300
large because number of channels<font color="#CCCCCC"> that we</font>

388
00:18:53,050 --> 00:18:57,520
will be opening probably pretty<font color="#E5E5E5"> large so</font>

389
00:18:55,300 --> 00:19:00,190
it<font color="#E5E5E5"> can be not in the secure storage but</font>

390
00:18:57,520 --> 00:19:03,190
at least<font color="#E5E5E5"> is</font><font color="#CCCCCC"> the carpet</font><font color="#E5E5E5"> luckily both</font>

391
00:19:00,190 --> 00:19:05,290
present<font color="#E5E5E5"> laser I think now has the</font>

392
00:19:03,190 --> 00:19:10,240
sticker<font color="#CCCCCC"> spots at</font><font color="#E5E5E5"> least some of</font><font color="#CCCCCC"> them have</font>

393
00:19:05,290 --> 00:19:17,500
and it's<font color="#E5E5E5"> not like super hard to to add</font>

394
00:19:10,240 --> 00:19:23,160
these features<font color="#E5E5E5"> one thing that I want to</font>

395
00:19:17,500 --> 00:19:27,520
talk about<font color="#E5E5E5"> about the node key is</font>

396
00:19:23,160 --> 00:19:31,450
<font color="#E5E5E5">actually the invoice</font><font color="#CCCCCC"> I think this one</font>

397
00:19:27,520 --> 00:19:34,720
yes<font color="#CCCCCC"> so as I said maybe</font><font color="#E5E5E5"> we want to keep</font>

398
00:19:31,450 --> 00:19:37,150
the node key that represents our node in

399
00:19:34,720 --> 00:19:39,430
the network<font color="#CCCCCC"> away from the hardware</font>

400
00:19:37,150 --> 00:19:42,430
wallets just on the node the problem

401
00:19:39,430 --> 00:19:45,430
here is that this node is a node key is

402
00:19:42,430 --> 00:19:47,740
used to<font color="#E5E5E5"> generate invoices</font><font color="#CCCCCC"> so basically</font>

403
00:19:45,430 --> 00:19:49,760
if you<font color="#CCCCCC"> want</font><font color="#E5E5E5"> if you are a merchant and</font>

404
00:19:47,740 --> 00:19:53,180
you want to

405
00:19:49,760 --> 00:19:54,560
provide the<font color="#E5E5E5"> service and accept payments</font>

406
00:19:53,180 --> 00:19:57,350
and lightning<font color="#E5E5E5"> you need to generate</font>

407
00:19:54,560 --> 00:20:00,590
invoices<font color="#CCCCCC"> and if you are generating</font>

408
00:19:57,350 --> 00:20:03,169
<font color="#E5E5E5">invoices on the on the server</font><font color="#CCCCCC"> not</font><font color="#E5E5E5"> on the</font>

409
00:20:00,590 --> 00:20:05,959
hardware wallet then if<font color="#E5E5E5"> this note give</font>

410
00:20:03,170 --> 00:20:08,780
you leak<font color="#E5E5E5"> then basically an attacker can</font>

411
00:20:05,960 --> 00:20:12,520
generate invoices<font color="#CCCCCC"> so the question is do</font>

412
00:20:08,780 --> 00:20:16,730
you<font color="#CCCCCC"> want</font><font color="#E5E5E5"> to do that or</font><font color="#CCCCCC"> not and another</font>

413
00:20:12,520 --> 00:20:20,150
important<font color="#CCCCCC"> thing that</font><font color="#E5E5E5"> can happen if you</font>

414
00:20:16,730 --> 00:20:23,930
so for the<font color="#E5E5E5"> payments every every invoice</font>

415
00:20:20,150 --> 00:20:25,790
<font color="#CCCCCC">every whitening payment has cash of</font><font color="#E5E5E5"> the</font>

416
00:20:23,930 --> 00:20:28,940
<font color="#CCCCCC">pre image and the pre image is</font><font color="#E5E5E5"> basically</font>

417
00:20:25,790 --> 00:20:31,610
a proof<font color="#E5E5E5"> of the payment so this pre</font>

418
00:20:28,940 --> 00:20:33,920
images<font color="#E5E5E5"> also should</font><font color="#CCCCCC"> be generated probably</font>

419
00:20:31,610 --> 00:20:35,659
on the hardware device because if they

420
00:20:33,920 --> 00:20:37,730
<font color="#E5E5E5">are generated on</font><font color="#CCCCCC"> your node</font><font color="#E5E5E5"> and you</font><font color="#CCCCCC"> know</font>

421
00:20:35,660 --> 00:20:42,740
that Hecht<font color="#CCCCCC"> or you</font><font color="#E5E5E5"> don't have a very good</font>

422
00:20:37,730 --> 00:20:45,860
<font color="#E5E5E5">random number generator then you can get</font>

423
00:20:42,740 --> 00:20:50,360
the attacker<font color="#E5E5E5"> in the middle that will</font>

424
00:20:45,860 --> 00:20:52,699
just stop<font color="#E5E5E5"> following</font><font color="#CCCCCC"> the HTC because he</font>

425
00:20:50,360 --> 00:20:57,729
already can generate the pre<font color="#CCCCCC"> image for</font>

426
00:20:52,700 --> 00:21:01,670
that<font color="#E5E5E5"> and get all the money here</font><font color="#CCCCCC"> so I</font>

427
00:20:57,730 --> 00:21:05,360
would say<font color="#E5E5E5"> that</font><font color="#CCCCCC"> storing</font><font color="#E5E5E5"> the node ID on</font>

428
00:21:01,670 --> 00:21:08,960
the host may work if you want to run

429
00:21:05,360 --> 00:21:10,729
your writing node as a router now so

430
00:21:08,960 --> 00:21:13,610
<font color="#E5E5E5">basically only collect the fees for the</font>

431
00:21:10,730 --> 00:21:15,440
multi holes<font color="#CCCCCC"> but if you are actually</font><font color="#E5E5E5"> a</font>

432
00:21:13,610 --> 00:21:18,379
<font color="#E5E5E5">merchant then you probably want to store</font>

433
00:21:15,440 --> 00:21:24,290
it on the<font color="#E5E5E5"> hardware wallet also and now</font>

434
00:21:18,380 --> 00:21:27,830
the pretty hard part that<font color="#E5E5E5"> makes</font><font color="#CCCCCC"> hardware</font>

435
00:21:24,290 --> 00:21:32,990
<font color="#CCCCCC">wallets for lighting</font><font color="#E5E5E5"> very complicated</font><font color="#CCCCCC"> is</font>

436
00:21:27,830 --> 00:21:35,780
the extra routing so if we<font color="#E5E5E5"> are here we</font>

437
00:21:32,990 --> 00:21:39,110
want<font color="#E5E5E5"> to put say a few bitcoins in the</font>

438
00:21:35,780 --> 00:21:41,030
network such that we can route the

439
00:21:39,110 --> 00:21:44,030
payments and collect the fees<font color="#E5E5E5"> but we</font>

440
00:21:41,030 --> 00:21:46,040
don't want to<font color="#CCCCCC"> lose them and</font><font color="#E5E5E5"> obviously it</font>

441
00:21:44,030 --> 00:21:48,680
is a very<font color="#CCCCCC"> sweet honey pot so everyone</font>

442
00:21:46,040 --> 00:21:51,170
<font color="#E5E5E5">wants to get this money</font><font color="#CCCCCC"> and I</font><font color="#E5E5E5"> am</font>

443
00:21:48,680 --> 00:21:53,930
assuming that maybe we will get our

444
00:21:51,170 --> 00:21:57,350
server<font color="#CCCCCC"> already broken and</font><font color="#E5E5E5"> completely</font>

445
00:21:53,930 --> 00:22:02,140
under control from the attacker<font color="#CCCCCC"> so if</font>

446
00:21:57,350 --> 00:22:04,959
everything<font color="#E5E5E5"> is still fine how the routing</font>

447
00:22:02,140 --> 00:22:08,950
<font color="#CCCCCC">sexually so this guy wants to transfer</font>

448
00:22:04,960 --> 00:22:11,200
some money<font color="#E5E5E5"> from his from this channel</font>

449
00:22:08,950 --> 00:22:14,920
<font color="#E5E5E5">basically transfer some money from</font><font color="#CCCCCC"> here</font>

450
00:22:11,200 --> 00:22:21,580
to here<font color="#CCCCCC"> so what we get</font>

451
00:22:14,920 --> 00:22:26,800
he asks our<font color="#CCCCCC"> note</font><font color="#E5E5E5"> basically for this</font>

452
00:22:21,580 --> 00:22:30,639
<font color="#E5E5E5">hdl-c offer so I didn't say about that</font>

453
00:22:26,800 --> 00:22:33,129
yet<font color="#CCCCCC"> right the offer</font><font color="#E5E5E5"> basically said that</font>

454
00:22:30,640 --> 00:22:35,680
<font color="#E5E5E5">if you</font><font color="#CCCCCC"> know the preimage</font><font color="#E5E5E5"> if you know the</font>

455
00:22:33,130 --> 00:22:37,690
secrets and when it is<font color="#CCCCCC"> hashed it will</font>

456
00:22:35,680 --> 00:22:41,230
get this value<font color="#CCCCCC"> then I will pay you</font>

457
00:22:37,690 --> 00:22:42,720
<font color="#CCCCCC">certain amount and I know that</font><font color="#E5E5E5"> that</font>

458
00:22:41,230 --> 00:22:45,370
<font color="#CCCCCC">guy's afterwards</font>

459
00:22:42,720 --> 00:22:47,560
definitely know the secret<font color="#E5E5E5"> so you can</font>

460
00:22:45,370 --> 00:22:50,830
ask them and<font color="#E5E5E5"> maybe they will tell you</font>

461
00:22:47,560 --> 00:22:53,889
and so you can collect<font color="#E5E5E5"> on this so we get</font>

462
00:22:50,830 --> 00:22:56,050
<font color="#E5E5E5">this offer this offer happens actually</font>

463
00:22:53,890 --> 00:22:58,240
<font color="#E5E5E5">inside</font><font color="#CCCCCC"> the commitment</font><font color="#E5E5E5"> Lands action</font><font color="#CCCCCC"> is</font>

464
00:22:56,050 --> 00:23:01,210
another output<font color="#E5E5E5"> well the technical</font>

465
00:22:58,240 --> 00:23:03,760
<font color="#E5E5E5">details</font><font color="#CCCCCC"> may be</font><font color="#E5E5E5"> not that important and</font>

466
00:23:01,210 --> 00:23:06,370
then<font color="#E5E5E5"> we just</font><font color="#CCCCCC"> talk</font><font color="#E5E5E5"> to another guy and</font>

467
00:23:03,760 --> 00:23:08,950
offer him the value<font color="#E5E5E5"> that is slightly</font>

468
00:23:06,370 --> 00:23:11,739
<font color="#CCCCCC">small</font><font color="#E5E5E5"> so we collect some fees and</font>

469
00:23:08,950 --> 00:23:13,960
ideally all<font color="#CCCCCC"> this happens without any</font>

470
00:23:11,740 --> 00:23:15,970
user interaction at<font color="#E5E5E5"> all so it will be</font>

471
00:23:13,960 --> 00:23:17,800
<font color="#E5E5E5">pretty stupid if you need to stay close</font>

472
00:23:15,970 --> 00:23:21,130
<font color="#CCCCCC">to your</font><font color="#E5E5E5"> hardware wallet and on every</font>

473
00:23:17,800 --> 00:23:25,000
<font color="#CCCCCC">multi hope problem can the click confirm</font>

474
00:23:21,130 --> 00:23:26,710
confirm confirm<font color="#E5E5E5"> so instead there should</font>

475
00:23:25,000 --> 00:23:29,590
<font color="#E5E5E5">be rules and the hardware wallet that</font>

476
00:23:26,710 --> 00:23:31,360
allowed to do it automatically<font color="#CCCCCC"> so here</font>

477
00:23:29,590 --> 00:23:35,679
what we can do we<font color="#CCCCCC"> can from</font><font color="#E5E5E5"> what you know</font>

478
00:23:31,360 --> 00:23:38,560
<font color="#CCCCCC">just get two transactions</font><font color="#E5E5E5"> to this</font><font color="#CCCCCC"> HDFC</font>

479
00:23:35,680 --> 00:23:40,990
offers the<font color="#CCCCCC"> incoming one and outgoing</font><font color="#E5E5E5"> one</font>

480
00:23:38,560 --> 00:23:43,270
check that the fees<font color="#CCCCCC"> are actually</font>

481
00:23:40,990 --> 00:23:45,190
<font color="#CCCCCC">positive so we will</font><font color="#E5E5E5"> get some money and</font>

482
00:23:43,270 --> 00:23:47,950
<font color="#E5E5E5">then</font><font color="#CCCCCC"> just go with it</font>

483
00:23:45,190 --> 00:23:52,210
and then ideally<font color="#E5E5E5"> when we get the</font>

484
00:23:47,950 --> 00:23:55,330
<font color="#CCCCCC">preimage</font><font color="#E5E5E5"> bed then we send it further and</font>

485
00:23:52,210 --> 00:23:57,610
eventually<font color="#CCCCCC"> all this</font><font color="#E5E5E5"> HTC magic</font><font color="#CCCCCC"> staff</font>

486
00:23:55,330 --> 00:24:01,149
<font color="#E5E5E5">doesn't even appear on the blockchain</font><font color="#CCCCCC"> we</font>

487
00:23:57,610 --> 00:24:04,860
just end up<font color="#E5E5E5"> with updated</font><font color="#CCCCCC"> channel values</font>

488
00:24:01,150 --> 00:24:08,080
that are slightly<font color="#E5E5E5"> larger in our end so</font>

489
00:24:04,860 --> 00:24:11,770
<font color="#E5E5E5">looks like pretty robust technique</font>

490
00:24:08,080 --> 00:24:13,929
nothing can go wrong<font color="#CCCCCC"> now remember that</font>

491
00:24:11,770 --> 00:24:14,310
our<font color="#E5E5E5"> Hardware wallet is connected to the</font>

492
00:24:13,930 --> 00:24:17,730
light

493
00:24:14,310 --> 00:24:19,590
<font color="#CCCCCC">not and this means that it doesn't</font>

494
00:24:17,730 --> 00:24:22,350
<font color="#E5E5E5">really know</font><font color="#CCCCCC"> anything</font><font color="#E5E5E5"> about the</font>

495
00:24:19,590 --> 00:24:25,770
blockchain at all<font color="#CCCCCC"> so it is completely</font>

496
00:24:22,350 --> 00:24:27,360
<font color="#CCCCCC">relying on the on</font><font color="#E5E5E5"> our online host that</font>

497
00:24:25,770 --> 00:24:31,620
can be compromised about the blockchain

498
00:24:27,360 --> 00:24:34,260
<font color="#CCCCCC">and what does it mean okay so for</font>

499
00:24:31,620 --> 00:24:37,379
opening<font color="#E5E5E5"> channel when we broadcast our</font>

500
00:24:34,260 --> 00:24:39,570
funding transaction<font color="#CCCCCC"> we can make sure</font>

501
00:24:37,380 --> 00:24:42,180
that<font color="#CCCCCC"> it is on the</font><font color="#E5E5E5"> blockchain we can just</font>

502
00:24:39,570 --> 00:24:45,389
ask for<font color="#CCCCCC"> the miracle proof for the</font>

503
00:24:42,180 --> 00:24:48,540
transaction<font color="#CCCCCC"> that it actually</font><font color="#E5E5E5"> exists</font><font color="#CCCCCC"> in</font>

504
00:24:45,390 --> 00:24:51,290
<font color="#CCCCCC">the in the block in a certain block</font><font color="#E5E5E5"> and</font>

505
00:24:48,540 --> 00:24:55,560
so we know that the<font color="#E5E5E5"> channel was open</font>

506
00:24:51,290 --> 00:24:57,300
<font color="#CCCCCC">then if the channel</font><font color="#E5E5E5"> is closed or</font><font color="#CCCCCC"> not is</font>

507
00:24:55,560 --> 00:24:59,790
a little bit more tricky question

508
00:24:57,300 --> 00:25:02,490
<font color="#E5E5E5">because</font><font color="#CCCCCC"> if the channel is closed</font>

509
00:24:59,790 --> 00:25:04,290
mutually then obviously<font color="#CCCCCC"> another party</font>

510
00:25:02,490 --> 00:25:05,850
was talking to us<font color="#E5E5E5"> and we were signing</font>

511
00:25:04,290 --> 00:25:08,340
<font color="#CCCCCC">this to of to multi signature</font>

512
00:25:05,850 --> 00:25:11,550
transaction and eventually we know that

513
00:25:08,340 --> 00:25:13,740
<font color="#E5E5E5">okay it was probably closed</font><font color="#CCCCCC"> but there is</font>

514
00:25:11,550 --> 00:25:16,860
also<font color="#E5E5E5"> another way right the other party</font>

515
00:25:13,740 --> 00:25:21,380
can just broadcast the latest commitment

516
00:25:16,860 --> 00:25:23,760
transaction yeah<font color="#E5E5E5"> this is the evil guy so</font>

517
00:25:21,380 --> 00:25:26,250
he just broadcast the commitment

518
00:25:23,760 --> 00:25:29,490
transaction and he's already<font color="#CCCCCC"> got into</font>

519
00:25:26,250 --> 00:25:31,410
<font color="#CCCCCC">our lightning node so what happens he</font>

520
00:25:29,490 --> 00:25:33,570
just blocks all<font color="#CCCCCC"> the information about</font>

521
00:25:31,410 --> 00:25:36,420
<font color="#E5E5E5">the</font><font color="#CCCCCC"> blockchain and doesn't tell us</font>

522
00:25:33,570 --> 00:25:38,429
anything<font color="#E5E5E5"> about that</font><font color="#CCCCCC"> this means</font><font color="#E5E5E5"> that if</font>

523
00:25:36,420 --> 00:25:41,130
<font color="#E5E5E5">he broadcast this thing then his funds</font>

524
00:25:38,430 --> 00:25:44,400
will be locked for<font color="#E5E5E5"> a certain time</font><font color="#CCCCCC"> or</font>

525
00:25:41,130 --> 00:25:48,320
basically<font color="#E5E5E5"> he waits</font><font color="#CCCCCC"> for one day</font><font color="#E5E5E5"> until</font><font color="#CCCCCC"> he</font>

526
00:25:44,400 --> 00:25:54,860
<font color="#CCCCCC">actually</font><font color="#E5E5E5"> gets his funds unlocked and</font>

527
00:25:48,320 --> 00:26:00,510
then he<font color="#E5E5E5"> starts his tricky dirty action</font>

528
00:25:54,860 --> 00:26:04,649
<font color="#CCCCCC">so what he does</font><font color="#E5E5E5"> he tries to route the</font>

529
00:26:00,510 --> 00:26:08,100
<font color="#E5E5E5">payment with this</font><font color="#CCCCCC"> HDAC stuff to</font><font color="#E5E5E5"> another</font>

530
00:26:04,650 --> 00:26:10,470
node<font color="#E5E5E5"> but we don't know that</font><font color="#CCCCCC"> this channel</font>

531
00:26:08,100 --> 00:26:13,080
is<font color="#E5E5E5"> already closed</font><font color="#CCCCCC"> so we already have the</font>

532
00:26:10,470 --> 00:26:15,630
closed<font color="#E5E5E5"> channel and we</font><font color="#CCCCCC"> definitely will</font>

533
00:26:13,080 --> 00:26:17,610
not be able<font color="#E5E5E5"> to broadcast any of this new</font>

534
00:26:15,630 --> 00:26:22,850
commitment transactions<font color="#E5E5E5"> and we already</font>

535
00:26:17,610 --> 00:26:25,169
<font color="#E5E5E5">can't punish this remote node for this</font>

536
00:26:22,850 --> 00:26:27,570
kind of<font color="#CCCCCC"> broadcast in</font><font color="#E5E5E5"> the old</font><font color="#CCCCCC"> states</font>

537
00:26:25,170 --> 00:26:31,950
because<font color="#E5E5E5"> it was already broadcast</font>

538
00:26:27,570 --> 00:26:34,679
<font color="#CCCCCC">day ago so he</font><font color="#E5E5E5"> already got</font><font color="#CCCCCC"> his</font><font color="#E5E5E5"> money</font><font color="#CCCCCC"> and</font>

539
00:26:31,950 --> 00:26:36,870
what happens in this case<font color="#E5E5E5"> we don't know</font>

540
00:26:34,680 --> 00:26:40,500
<font color="#CCCCCC">that</font><font color="#E5E5E5"> the channels already closed it was</font>

541
00:26:36,870 --> 00:26:44,189
<font color="#E5E5E5">close to you</font><font color="#CCCCCC"> knew it early the payment</font>

542
00:26:40,500 --> 00:26:47,370
kinda goes on we got the new commitment

543
00:26:44,190 --> 00:26:49,980
transactions<font color="#E5E5E5"> but instead of gaining some</font>

544
00:26:47,370 --> 00:26:51,870
fees<font color="#E5E5E5"> we actually sent all our money to</font>

545
00:26:49,980 --> 00:26:57,540
the remote node and get<font color="#E5E5E5"> nothing from</font>

546
00:26:51,870 --> 00:27:01,290
here<font color="#E5E5E5"> that's kind of bad</font><font color="#CCCCCC"> and the simple</font>

547
00:26:57,540 --> 00:27:04,260
way<font color="#CCCCCC"> to solve this is actually</font><font color="#E5E5E5"> to for the</font>

548
00:27:01,290 --> 00:27:08,100
hardware<font color="#CCCCCC"> wallet to ask continuously</font><font color="#E5E5E5"> ask</font>

549
00:27:04,260 --> 00:27:10,920
for the new<font color="#CCCCCC"> box</font><font color="#E5E5E5"> so unfortunately it adds</font>

550
00:27:08,100 --> 00:27:14,850
a little<font color="#E5E5E5"> bit complexity to the hardware</font>

551
00:27:10,920 --> 00:27:17,820
device in general<font color="#E5E5E5"> because well how can</font>

552
00:27:14,850 --> 00:27:20,129
<font color="#E5E5E5">you</font><font color="#CCCCCC"> be sure that you are getting the the</font>

553
00:27:17,820 --> 00:27:23,159
blocks all<font color="#CCCCCC"> the time and that</font><font color="#E5E5E5"> they are</font>

554
00:27:20,130 --> 00:27:25,770
<font color="#E5E5E5">not</font><font color="#CCCCCC"> due wait the</font><font color="#E5E5E5"> only way is is to</font>

555
00:27:23,160 --> 00:27:27,780
compare to the<font color="#CCCCCC"> timestamp in</font><font color="#E5E5E5"> the block so</font>

556
00:27:25,770 --> 00:27:30,930
the blocks in<font color="#CCCCCC"> the blockchain have a</font>

557
00:27:27,780 --> 00:27:34,590
<font color="#E5E5E5">timestamp this timestamp is not 100%</font>

558
00:27:30,930 --> 00:27:37,770
<font color="#E5E5E5">precise so it has an error bars of two</font>

559
00:27:34,590 --> 00:27:41,840
<font color="#E5E5E5">hours I</font><font color="#CCCCCC"> think so</font><font color="#E5E5E5"> but still</font><font color="#CCCCCC"> comparing</font><font color="#E5E5E5"> to</font>

560
00:27:37,770 --> 00:27:44,730
this one<font color="#E5E5E5"> date</font><font color="#CCCCCC"> away it is pretty</font><font color="#E5E5E5"> small so</font>

561
00:27:41,840 --> 00:27:48,030
this<font color="#E5E5E5"> means that you</font><font color="#CCCCCC"> need to get the</font>

562
00:27:44,730 --> 00:27:49,830
block headers<font color="#CCCCCC"> compare the time that</font>

563
00:27:48,030 --> 00:27:51,990
you're actually<font color="#E5E5E5"> getting all the blocks</font>

564
00:27:49,830 --> 00:27:53,730
in there you don't<font color="#E5E5E5"> need to parse the</font>

565
00:27:51,990 --> 00:27:57,600
whole block<font color="#E5E5E5"> that would be terrible</font>

566
00:27:53,730 --> 00:28:01,140
like we try to make this hardware device

567
00:27:57,600 --> 00:28:03,870
as simple as possible<font color="#CCCCCC"> but still we need</font>

568
00:28:01,140 --> 00:28:06,300
<font color="#CCCCCC">to parse at least the headers we need to</font>

569
00:28:03,870 --> 00:28:09,389
check<font color="#CCCCCC"> that the difficulty is right the</font>

570
00:28:06,300 --> 00:28:14,129
<font color="#E5E5E5">time</font><font color="#CCCCCC"> timestamps are right and also</font><font color="#E5E5E5"> we</font>

571
00:28:09,390 --> 00:28:16,530
need<font color="#CCCCCC"> to</font><font color="#E5E5E5"> look for the commitment</font>

572
00:28:14,130 --> 00:28:18,840
transactions for our channels<font color="#E5E5E5"> if the</font>

573
00:28:16,530 --> 00:28:25,139
channels are still<font color="#E5E5E5"> open or not</font><font color="#CCCCCC"> and as</font>

574
00:28:18,840 --> 00:28:27,480
soon as<font color="#E5E5E5"> we see that</font><font color="#CCCCCC"> oh yeah as soon as</font>

575
00:28:25,140 --> 00:28:31,500
we see<font color="#E5E5E5"> that either the blocks are</font>

576
00:28:27,480 --> 00:28:33,630
delayed<font color="#CCCCCC"> by more than a few</font><font color="#E5E5E5"> hours or if</font>

577
00:28:31,500 --> 00:28:37,200
the channel<font color="#CCCCCC"> actually was unilaterally</font>

578
00:28:33,630 --> 00:28:39,929
closed there then we<font color="#CCCCCC"> can detect</font><font color="#E5E5E5"> this</font>

579
00:28:37,200 --> 00:28:43,530
<font color="#CCCCCC">kind of attack and actually stop that</font>

580
00:28:39,929 --> 00:28:47,419
I think that I messed up with<font color="#E5E5E5"> the</font>

581
00:28:43,530 --> 00:28:49,799
sequence of the<font color="#CCCCCC"> sides</font><font color="#E5E5E5"> a bit so in total</font>

582
00:28:47,419 --> 00:28:53,100
<font color="#CCCCCC">comparing to the normal</font><font color="#E5E5E5"> hardware bullets</font>

583
00:28:49,799 --> 00:28:55,620
<font color="#E5E5E5">that we have right now we need some</font>

584
00:28:53,100 --> 00:28:58,139
changes<font color="#CCCCCC"> and</font><font color="#E5E5E5"> in particular we need to</font>

585
00:28:55,620 --> 00:29:00,780
parse more than just one<font color="#E5E5E5"> one simple</font>

586
00:28:58,140 --> 00:29:05,610
transaction<font color="#E5E5E5"> we actually need to first</font>

587
00:29:00,780 --> 00:29:07,500
parse<font color="#E5E5E5"> custom scripts like this HTC</font>

588
00:29:05,610 --> 00:29:09,030
commitment transactions<font color="#E5E5E5"> multi signature</font>

589
00:29:07,500 --> 00:29:10,410
obviously but<font color="#CCCCCC"> not to Cigna show the</font>

590
00:29:09,030 --> 00:29:14,639
hardware<font color="#CCCCCC"> wallets can</font><font color="#E5E5E5"> do right</font><font color="#CCCCCC"> now</font>

591
00:29:10,410 --> 00:29:17,340
already<font color="#E5E5E5"> and also we need to</font><font color="#CCCCCC"> be able to</font>

592
00:29:14,640 --> 00:29:20,210
parse pairs of transactions and<font color="#E5E5E5"> make</font>

593
00:29:17,340 --> 00:29:24,510
sure that actually<font color="#E5E5E5"> it is safe now to</font>

594
00:29:20,210 --> 00:29:27,480
broadcast stuff obviously person waiting

595
00:29:24,510 --> 00:29:29,640
<font color="#CCCCCC">invoice</font><font color="#E5E5E5"> and so I</font><font color="#CCCCCC"> think</font><font color="#E5E5E5"> that it may take</font>

596
00:29:27,480 --> 00:29:32,100
<font color="#CCCCCC">a while</font><font color="#E5E5E5"> to realize everything but it's</font>

597
00:29:29,640 --> 00:29:37,020
not<font color="#CCCCCC"> like super hard it's not</font><font color="#E5E5E5"> like rocket</font>

598
00:29:32,100 --> 00:29:39,719
science<font color="#CCCCCC"> the hard a</font><font color="#E5E5E5"> bit hard day is the</font>

599
00:29:37,020 --> 00:29:42,120
second part<font color="#E5E5E5"> where you need actually some</font>

600
00:29:39,720 --> 00:29:45,870
extra<font color="#CCCCCC"> functionality of Sombra Hardware</font>

601
00:29:42,120 --> 00:29:48,360
<font color="#CCCCCC">word and</font><font color="#E5E5E5"> particle you</font><font color="#CCCCCC"> need you need a</font>

602
00:29:45,870 --> 00:29:51,418
<font color="#E5E5E5">certain storage to store all this</font>

603
00:29:48,360 --> 00:29:56,939
<font color="#CCCCCC">database of the weight estate of the</font>

604
00:29:51,419 --> 00:30:00,720
channels<font color="#CCCCCC"> and this may</font><font color="#E5E5E5"> be tricky</font><font color="#CCCCCC"> well you</font>

605
00:29:56,940 --> 00:30:03,659
still can<font color="#E5E5E5"> use the node and encrypt all</font>

606
00:30:00,720 --> 00:30:07,409
<font color="#E5E5E5">this stuff with your with your secret</font>

607
00:30:03,659 --> 00:30:08,970
key and<font color="#CCCCCC"> using</font><font color="#E5E5E5"> this way but it would</font><font color="#CCCCCC"> be</font>

608
00:30:07,409 --> 00:30:12,929
nice to<font color="#E5E5E5"> have some kind of storage and</font>

609
00:30:08,970 --> 00:30:15,630
you<font color="#CCCCCC"> need to generate</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> primitives</font><font color="#E5E5E5"> and</font>

610
00:30:12,929 --> 00:30:17,700
this revocation<font color="#E5E5E5"> keys and the important</font>

611
00:30:15,630 --> 00:30:21,630
<font color="#CCCCCC">thing is that you still need to</font><font color="#E5E5E5"> be able</font>

612
00:30:17,700 --> 00:30:23,370
<font color="#E5E5E5">to parse blocks at least not</font><font color="#CCCCCC"> like verify</font>

613
00:30:21,630 --> 00:30:25,650
all the transaction there but at least

614
00:30:23,370 --> 00:30:28,918
<font color="#E5E5E5">verify that the block headers are</font>

615
00:30:25,650 --> 00:30:31,909
correct<font color="#CCCCCC"> and check that there is no</font>

616
00:30:28,919 --> 00:30:35,580
transaction<font color="#E5E5E5"> that is causing the channel</font>

617
00:30:31,909 --> 00:30:38,340
so these are the important<font color="#CCCCCC"> parts</font><font color="#E5E5E5"> but</font>

618
00:30:35,580 --> 00:30:42,539
nothing<font color="#E5E5E5"> looks like super super scary</font>

619
00:30:38,340 --> 00:30:47,939
actually<font color="#CCCCCC"> so</font><font color="#E5E5E5"> I think that's if treasure</font>

620
00:30:42,539 --> 00:30:51,000
<font color="#CCCCCC">letter</font><font color="#E5E5E5"> who else do we have we put some</font>

621
00:30:47,940 --> 00:30:52,580
time and<font color="#E5E5E5"> effort into bacon the hardware</font>

622
00:30:51,000 --> 00:30:54,140
wallet for<font color="#CCCCCC"> writing it</font>

623
00:30:52,580 --> 00:30:56,539
you actually<font color="#CCCCCC"> work</font><font color="#E5E5E5"> and ideally it should</font>

624
00:30:54,140 --> 00:30:59,480
be<font color="#E5E5E5"> something like a simple USB dongle</font>

625
00:30:56,539 --> 00:31:02,679
<font color="#CCCCCC">that you plug in into your server or</font>

626
00:30:59,480 --> 00:31:05,090
<font color="#CCCCCC">computer and it's security</font><font color="#E5E5E5"> key and</font>

627
00:31:02,679 --> 00:31:09,019
doesn't expose them into the network and

628
00:31:05,090 --> 00:31:14,389
<font color="#E5E5E5">kinda collect the fees for you</font><font color="#CCCCCC"> do have</font>

629
00:31:09,019 --> 00:31:18,529
<font color="#CCCCCC">something else basically I</font><font color="#E5E5E5"> think that's</font>

630
00:31:14,390 --> 00:31:22,549
it<font color="#E5E5E5"> so it took a</font><font color="#CCCCCC"> little bit less time</font>

631
00:31:18,529 --> 00:31:25,159
than I expected sorry about<font color="#CCCCCC"> that but</font>

632
00:31:22,549 --> 00:31:28,700
maybe<font color="#E5E5E5"> you guys</font><font color="#CCCCCC"> have some</font><font color="#E5E5E5"> questions</font><font color="#CCCCCC"> about</font>

633
00:31:25,159 --> 00:31:30,620
this yeah

634
00:31:28,700 --> 00:31:32,269
please wait a minute I will<font color="#E5E5E5"> give you a</font>

635
00:31:30,620 --> 00:31:34,939
microphone<font color="#CCCCCC"> because</font><font color="#E5E5E5"> as you know we are</font>

636
00:31:32,269 --> 00:31:36,679
<font color="#E5E5E5">streaming and also recording so it will</font>

637
00:31:34,940 --> 00:31:38,779
be maybe a<font color="#E5E5E5"> problem don't have your</font>

638
00:31:36,679 --> 00:31:39,620
question recorded so thank you<font color="#E5E5E5"> once</font>

639
00:31:38,779 --> 00:31:44,590
again<font color="#CCCCCC"> Stepan</font>

640
00:31:39,620 --> 00:31:44,590
now we have plenty<font color="#CCCCCC"> of</font><font color="#E5E5E5"> time</font><font color="#CCCCCC"> thank you I</font>

641
00:31:47,679 --> 00:31:53,389
know we have plenty<font color="#CCCCCC"> cause</font><font color="#E5E5E5"> this topic</font><font color="#CCCCCC"> a</font>

642
00:31:50,779 --> 00:31:54,830
<font color="#CCCCCC">little bit more so when</font><font color="#E5E5E5"> anybody if you</font>

643
00:31:53,389 --> 00:31:57,019
<font color="#CCCCCC">would like</font><font color="#E5E5E5"> to ask I will give you</font>

644
00:31:54,830 --> 00:32:04,490
<font color="#CCCCCC">microphone and you can say our</font><font color="#E5E5E5"> questions</font>

645
00:31:57,019 --> 00:32:06,230
so<font color="#CCCCCC"> you're first hello thank</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> for that</font>

646
00:32:04,490 --> 00:32:07,700
that<font color="#E5E5E5"> was very interesting</font><font color="#CCCCCC"> perhaps I</font>

647
00:32:06,230 --> 00:32:10,010
missed it are you writing your<font color="#E5E5E5"> own</font>

648
00:32:07,700 --> 00:32:11,799
software for a lightning implementation

649
00:32:10,010 --> 00:32:15,049
or<font color="#CCCCCC"> would this requires sort</font><font color="#E5E5E5"> of a</font>

650
00:32:11,799 --> 00:32:17,059
software change to existing<font color="#CCCCCC"> I think so</font>

651
00:32:15,049 --> 00:32:18,860
<font color="#CCCCCC">it requires a</font><font color="#E5E5E5"> certain changes in the</font>

652
00:32:17,059 --> 00:32:21,168
existing implementations currently we

653
00:32:18,860 --> 00:32:23,209
are<font color="#CCCCCC"> working with the</font><font color="#E5E5E5"> C lightning because</font>

654
00:32:21,169 --> 00:32:25,789
<font color="#CCCCCC">basically it is written in C it is</font>

655
00:32:23,210 --> 00:32:28,760
perfect to migrate or steal some parts

656
00:32:25,789 --> 00:32:33,080
of the codes<font color="#E5E5E5"> and move them to</font><font color="#CCCCCC"> the to the</font>

657
00:32:28,760 --> 00:32:34,970
<font color="#E5E5E5">microcontroller and yeah we just are</font>

658
00:32:33,080 --> 00:32:36,710
pretty much in touch with<font color="#CCCCCC"> Christian</font>

659
00:32:34,970 --> 00:32:39,559
<font color="#E5E5E5">Decker who helps us</font><font color="#CCCCCC"> with that</font>

660
00:32:36,710 --> 00:32:41,659
so<font color="#E5E5E5"> unfortunately right now the existing</font>

661
00:32:39,559 --> 00:32:45,049
implementation don't have a complete

662
00:32:41,659 --> 00:32:47,389
<font color="#E5E5E5">separation between the kind of secret</font>

663
00:32:45,049 --> 00:32:49,760
handling let's<font color="#E5E5E5"> say process so part of</font>

664
00:32:47,389 --> 00:32:54,110
the program and the rest of the things

665
00:32:49,760 --> 00:32:58,190
so it is<font color="#E5E5E5"> pretty simple to separate the</font>

666
00:32:54,110 --> 00:33:01,610
<font color="#CCCCCC">unseen keys from the from the whitening</font>

667
00:32:58,190 --> 00:33:03,649
<font color="#CCCCCC">nodes into the separate device but all</font>

668
00:33:01,610 --> 00:33:04,550
the per channel secrets for instance

669
00:33:03,649 --> 00:33:08,840
<font color="#E5E5E5">there you</font>

670
00:33:04,550 --> 00:33:11,060
all over<font color="#CCCCCC"> the places and</font><font color="#E5E5E5"> not so easy and</font>

671
00:33:08,840 --> 00:33:16,760
also<font color="#CCCCCC"> in the database and</font><font color="#E5E5E5"> also pre images</font>

672
00:33:11,060 --> 00:33:19,340
in the database<font color="#CCCCCC"> so basically we need to</font>

673
00:33:16,760 --> 00:33:22,100
work together in<font color="#CCCCCC"> that sense</font><font color="#E5E5E5"> to separate</font>

674
00:33:19,340 --> 00:33:24,320
everything<font color="#E5E5E5"> a</font><font color="#CCCCCC"> little bit nicer</font><font color="#E5E5E5"> another</font>

675
00:33:22,100 --> 00:33:26,050
thing is that<font color="#E5E5E5"> even though for</font><font color="#CCCCCC"> instance</font>

676
00:33:24,320 --> 00:33:29,810
see<font color="#CCCCCC"> lightning has a diamond that</font>

677
00:33:26,050 --> 00:33:31,430
supposed to<font color="#CCCCCC"> work as</font><font color="#E5E5E5"> a well or be</font>

678
00:33:29,810 --> 00:33:36,350
<font color="#E5E5E5">replaced afterwards with the hardware</font>

679
00:33:31,430 --> 00:33:38,780
wallet this<font color="#CCCCCC"> HSM D</font><font color="#E5E5E5"> it doesn't have all</font>

680
00:33:36,350 --> 00:33:40,159
<font color="#E5E5E5">the information</font><font color="#CCCCCC"> that it needs so</font><font color="#E5E5E5"> for</font>

681
00:33:38,780 --> 00:33:42,800
instance when we are<font color="#E5E5E5"> saying in the</font>

682
00:33:40,160 --> 00:33:44,930
funding transaction as I said we need<font color="#CCCCCC"> to</font>

683
00:33:42,800 --> 00:33:46,520
<font color="#E5E5E5">make sure that</font><font color="#CCCCCC"> we get the commitment</font>

684
00:33:44,930 --> 00:33:49,360
transaction plus we need<font color="#E5E5E5"> to make sure</font>

685
00:33:46,520 --> 00:33:53,139
<font color="#CCCCCC">that we are saying the second public key</font>

686
00:33:49,360 --> 00:33:55,760
is owned by<font color="#CCCCCC"> the other nodes</font><font color="#E5E5E5"> so</font>

687
00:33:53,140 --> 00:33:58,460
everything like that<font color="#E5E5E5"> is not really</font><font color="#CCCCCC"> being</font>

688
00:33:55,760 --> 00:34:01,970
passed to the<font color="#CCCCCC"> it is MD</font><font color="#E5E5E5"> only the</font>

689
00:33:58,460 --> 00:34:03,590
necessary and only the necessary for

690
00:34:01,970 --> 00:34:07,940
signing information has been sent<font color="#CCCCCC"> so</font>

691
00:34:03,590 --> 00:34:10,219
there will<font color="#E5E5E5"> be a certain refactor of this</font>

692
00:34:07,940 --> 00:34:12,620
and maybe a<font color="#E5E5E5"> patch so we don't want to</font>

693
00:34:10,219 --> 00:34:16,069
use to write our own implementation

694
00:34:12,620 --> 00:34:18,230
because<font color="#CCCCCC"> it will take forever but we also</font>

695
00:34:16,070 --> 00:34:20,660
<font color="#CCCCCC">don't want</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> put a</font><font color="#E5E5E5"> full</font><font color="#CCCCCC"> lightning node</font>

696
00:34:18,230 --> 00:34:24,560
on<font color="#E5E5E5"> the hardware device because well that</font>

697
00:34:20,659 --> 00:34:26,389
<font color="#E5E5E5">will</font><font color="#CCCCCC"> be crazy so we need to hack</font>

698
00:34:24,560 --> 00:34:28,969
everything together somehow<font color="#CCCCCC"> and as soon</font>

699
00:34:26,389 --> 00:34:30,980
<font color="#E5E5E5">as it works maybe we will put a bunch of</font>

700
00:34:28,969 --> 00:34:32,540
<font color="#CCCCCC">poor requests for every implement every</font>

701
00:34:30,980 --> 00:34:35,600
implementation but currently we are

702
00:34:32,540 --> 00:34:45,860
focusing on<font color="#CCCCCC"> two I</font><font color="#E5E5E5"> mean any other</font>

703
00:34:35,600 --> 00:34:48,409
questions<font color="#CCCCCC"> okay</font><font color="#E5E5E5"> if no really okay then we</font>

704
00:34:45,860 --> 00:34:50,720
<font color="#CCCCCC">have I suppose a</font><font color="#E5E5E5"> 15-minute break yes</font>

705
00:34:48,409 --> 00:34:51,529
<font color="#E5E5E5">thank you</font><font color="#CCCCCC"> very</font><font color="#E5E5E5"> much</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> fun</font><font color="#CCCCCC"> once</font><font color="#E5E5E5"> again</font>

706
00:34:50,719 --> 00:34:55,239
<font color="#E5E5E5">police</font>

707
00:34:51,530 --> 00:34:55,240
thanks<font color="#E5E5E5"> Japan for his speech</font>

708
00:34:57,890 --> 00:35:03,379
and you can

