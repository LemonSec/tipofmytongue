1
00:00:00,000 --> 00:00:05,279
<font color="#CCCCCC">grunts defense network security so the</font>

2
00:00:04,410 --> 00:00:06,839
things that we're going to talk about

3
00:00:05,279 --> 00:00:09,719
today are the things that we see most

4
00:00:06,839 --> 00:00:12,599
prevalently<font color="#E5E5E5"> when we gain access to</font>

5
00:00:09,719 --> 00:00:14,940
<font color="#E5E5E5">environment</font><font color="#CCCCCC"> privilege escalate and</font>

6
00:00:12,599 --> 00:00:17,100
ultimately end up with domain admin

7
00:00:14,940 --> 00:00:18,869
admin and end up with sensitive

8
00:00:17,100 --> 00:00:20,550
information on our hands

9
00:00:18,869 --> 00:00:22,230
so some of this is going to be beating a

10
00:00:20,550 --> 00:00:23,789
dead horse<font color="#E5E5E5"> or it's going to appear like</font>

11
00:00:22,230 --> 00:00:26,609
it because<font color="#CCCCCC"> your heart</font><font color="#E5E5E5"> it a thousand</font>

12
00:00:23,789 --> 00:00:30,029
times<font color="#E5E5E5"> before but it's stuff that works</font>

13
00:00:26,609 --> 00:00:31,529
<font color="#E5E5E5">still today</font><font color="#CCCCCC"> we're also going to talk a</font>

14
00:00:30,029 --> 00:00:33,870
little bit about the tools that you can

15
00:00:31,529 --> 00:00:36,390
use on the blue team to protect your

16
00:00:33,870 --> 00:00:39,328
network and to prepare for a pen test

17
00:00:36,390 --> 00:00:42,719
and ultimately prevent attackers from

18
00:00:39,329 --> 00:00:45,809
getting<font color="#E5E5E5"> it</font>

19
00:00:42,719 --> 00:00:47,640
so this is<font color="#CCCCCC"> dave Fletcher I'm Sally van</font>

20
00:00:45,809 --> 00:00:52,260
<font color="#CCCCCC">de ven were both pen testers at Black</font>

21
00:00:47,640 --> 00:00:54,870
<font color="#CCCCCC">Hills information security and we both</font>

22
00:00:52,260 --> 00:00:57,360
have<font color="#E5E5E5"> prior to working at</font><font color="#CCCCCC"> black hills</font><font color="#E5E5E5"> we</font>

23
00:00:54,870 --> 00:01:01,230
were both on the blue team so we we know

24
00:00:57,360 --> 00:01:03,059
both sides and throughout the

25
00:01:01,230 --> 00:01:05,069
interaction today<font color="#CCCCCC"> so it's a</font><font color="#E5E5E5"> little bit</font>

26
00:01:03,059 --> 00:01:08,039
of a stick so hopefully you have some

27
00:01:05,069 --> 00:01:10,860
tolerance for it but<font color="#E5E5E5"> Sally's</font><font color="#CCCCCC"> going to</font><font color="#E5E5E5"> be</font>

28
00:01:08,040 --> 00:01:12,420
playing<font color="#E5E5E5"> the lane blue team</font><font color="#CCCCCC"> ER</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> I'm</font>

29
00:01:10,860 --> 00:01:16,740
gonna be playing the awesome<font color="#CCCCCC"> ready Murr</font>

30
00:01:12,420 --> 00:01:21,840
<font color="#E5E5E5">so everybody</font><font color="#CCCCCC"> cheer for</font><font color="#E5E5E5"> me by the end</font>

31
00:01:16,740 --> 00:01:25,020
<font color="#E5E5E5">you'll know better</font>

32
00:01:21,840 --> 00:01:27,509
so<font color="#E5E5E5"> let's start out just by acknowledging</font>

33
00:01:25,020 --> 00:01:29,579
that attitude that<font color="#E5E5E5"> red team attitude</font>

34
00:01:27,509 --> 00:01:31,680
well<font color="#CCCCCC"> I have a little</font><font color="#E5E5E5"> attitude of my own</font>

35
00:01:29,579 --> 00:01:34,079
<font color="#E5E5E5">because our network Dave's</font><font color="#CCCCCC"> going to pen</font>

36
00:01:31,680 --> 00:01:34,829
<font color="#E5E5E5">test our network but look at this nessa</font>

37
00:01:34,079 --> 00:01:36,570
scan

38
00:01:34,829 --> 00:01:39,630
I mean our network is so tight there's

39
00:01:36,570 --> 00:01:42,570
no misconfigurations<font color="#CCCCCC"> no missing patches</font>

40
00:01:39,630 --> 00:01:45,449
<font color="#CCCCCC">it's true you're laughing it's true it's</font>

41
00:01:42,570 --> 00:01:48,089
so true<font color="#E5E5E5"> i mean this is our scan what's</font>

42
00:01:45,450 --> 00:01:51,390
he<font color="#CCCCCC"> going to find its all info</font><font color="#E5E5E5"> blue right</font>

43
00:01:48,090 --> 00:01:53,399
<font color="#CCCCCC">that's</font><font color="#E5E5E5"> absolutely amazing</font><font color="#CCCCCC"> it's so</font><font color="#E5E5E5"> to</font>

44
00:01:51,390 --> 00:01:54,600
thousands of<font color="#E5E5E5"> you you secured all your</font>

45
00:01:53,399 --> 00:01:57,600
network services

46
00:01:54,600 --> 00:02:00,059
<font color="#E5E5E5">I amazing but</font><font color="#CCCCCC"> I bet you still have a</font>

47
00:01:57,600 --> 00:02:02,490
crappy password policy and a bunch of

48
00:02:00,060 --> 00:02:04,439
users<font color="#CCCCCC"> who've never</font><font color="#E5E5E5"> been fished before so</font>

49
00:02:02,490 --> 00:02:07,589
<font color="#CCCCCC">they're click happy and i can send them</font>

50
00:02:04,439 --> 00:02:09,288
whatever<font color="#CCCCCC"> I want you do have webmail and</font>

51
00:02:07,590 --> 00:02:13,609
some sort of VPN<font color="#E5E5E5"> portal right</font>

52
00:02:09,288 --> 00:02:14,958
<font color="#CCCCCC">yes yes we have webmail and VPN portal</font>

53
00:02:13,609 --> 00:02:17,959
because our users are supposed to be

54
00:02:14,959 --> 00:02:20,269
working all the time from everywhere<font color="#CCCCCC"> so</font>

55
00:02:17,959 --> 00:02:21,469
the<font color="#E5E5E5"> first thing that I'm going to do is</font>

56
00:02:20,269 --> 00:02:23,780
<font color="#E5E5E5">I'm going to pass word spread those</font>

57
00:02:21,469 --> 00:02:26,540
interfaces and instead of<font color="#E5E5E5"> trying to</font>

58
00:02:23,780 --> 00:02:28,400
<font color="#CCCCCC">brute-force I'll go to</font><font color="#E5E5E5"> Twitter or some</font>

59
00:02:26,540 --> 00:02:31,310
other venue and gather list of your

60
00:02:28,400 --> 00:02:33,230
usernames<font color="#CCCCCC"> generated email addresses and</font>

61
00:02:31,310 --> 00:02:36,049
then just spray<font color="#CCCCCC"> 1password</font><font color="#E5E5E5"> across all of</font>

62
00:02:33,230 --> 00:02:38,840
them and then<font color="#CCCCCC"> i'll shine sure to end up</font>

63
00:02:36,049 --> 00:02:41,150
with credentials<font color="#CCCCCC"> so good</font><font color="#E5E5E5"> luck winning</font>

64
00:02:38,840 --> 00:02:47,090
<font color="#CCCCCC">i'm going to</font><font color="#E5E5E5"> use passwords like fall</font>

65
00:02:41,150 --> 00:02:49,370
2016 or summer 2016 or maybe<font color="#CCCCCC"> August</font><font color="#E5E5E5"> 2016</font>

66
00:02:47,090 --> 00:02:51,230
and they're sure to win

67
00:02:49,370 --> 00:02:54,019
well<font color="#E5E5E5"> I</font><font color="#CCCCCC"> got</font><font color="#E5E5E5"> news for you Dave our</font>

68
00:02:51,230 --> 00:02:56,629
password policies<font color="#E5E5E5"> 15 characters or more</font>

69
00:02:54,019 --> 00:02:59,780
15 characters minimum we have a custom

70
00:02:56,629 --> 00:03:02,239
<font color="#E5E5E5">complexity filter so not that lame</font>

71
00:02:59,780 --> 00:03:08,180
<font color="#CCCCCC">microsoft</font><font color="#E5E5E5"> use complexity requirements</font>

72
00:03:02,239 --> 00:03:08,510
<font color="#CCCCCC">you're here</font><font color="#E5E5E5"> to fall 2016</font><font color="#CCCCCC"> it's not going</font>

73
00:03:08,180 --> 00:03:10,730
to work

74
00:03:08,510 --> 00:03:13,548
oh wait one more thing<font color="#E5E5E5"> all the external</font>

75
00:03:10,730 --> 00:03:17,810
portals are<font color="#CCCCCC"> two</font><font color="#E5E5E5"> factor</font>

76
00:03:13,549 --> 00:03:20,720
<font color="#CCCCCC">yeah</font><font color="#E5E5E5"> yay</font><font color="#CCCCCC"> two-factor authentication you</font>

77
00:03:17,810 --> 00:03:23,090
still got users right<font color="#CCCCCC"> yeah</font><font color="#E5E5E5"> bunch of damn</font>

78
00:03:20,720 --> 00:03:26,720
news<font color="#CCCCCC"> i'm going to send emails to all of</font>

79
00:03:23,090 --> 00:03:28,549
them include a malicious attachment

80
00:03:26,720 --> 00:03:30,680
that's my old standby<font color="#E5E5E5"> i'll just</font><font color="#CCCCCC"> fish</font>

81
00:03:28,549 --> 00:03:33,019
<font color="#E5E5E5">somebody and then as soon as they get</font>

82
00:03:30,680 --> 00:03:36,169
that email they'll click and<font color="#CCCCCC"> i'll have</font><font color="#E5E5E5"> a</font>

83
00:03:33,019 --> 00:03:38,870
session immediately you think so<font color="#E5E5E5"> really</font>

84
00:03:36,169 --> 00:03:42,560
we do regular fishing exercises our

85
00:03:38,870 --> 00:03:44,150
users are so savvy about fishing<font color="#E5E5E5"> but on</font>

86
00:03:42,560 --> 00:03:45,680
the end<font color="#CCCCCC"> hosts we still have all kinds of</font>

87
00:03:44,150 --> 00:03:47,989
protection so I'll humor you

88
00:03:45,680 --> 00:03:49,310
let's say you catch a fish<font color="#E5E5E5"> and you get</font>

89
00:03:47,989 --> 00:03:51,319
into one of our<font color="#CCCCCC"> house</font>

90
00:03:49,310 --> 00:03:55,069
what are you<font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> do we use application</font>

91
00:03:51,319 --> 00:03:58,159
whitelisting application whitelisting

92
00:03:55,069 --> 00:04:00,708
<font color="#CCCCCC">I'm shaking in</font><font color="#E5E5E5"> my boots</font>

93
00:03:58,159 --> 00:04:02,750
<font color="#CCCCCC">I'll just bypass your</font><font color="#E5E5E5"> host protections</font>

94
00:04:00,709 --> 00:04:05,239
<font color="#CCCCCC">I'll get access to a command shell or</font>

95
00:04:02,750 --> 00:04:08,150
<font color="#CCCCCC">powershell</font><font color="#E5E5E5"> and then that's really all</font><font color="#CCCCCC"> I</font>

96
00:04:05,239 --> 00:04:10,280
need<font color="#E5E5E5"> and then</font><font color="#CCCCCC"> i'll test out that</font>

97
00:04:08,150 --> 00:04:11,750
wonderful password policy

98
00:04:10,280 --> 00:04:13,819
you've got on the inside of the network

99
00:04:11,750 --> 00:04:16,130
<font color="#CCCCCC">i'm sure that there's some service</font>

100
00:04:13,819 --> 00:04:18,019
account hanging out for some admin and

101
00:04:16,130 --> 00:04:21,289
set an easy password for somebody just

102
00:04:18,019 --> 00:04:21,670
to be nice thanks<font color="#CCCCCC"> i don't believe you</font>

103
00:04:21,289 --> 00:04:23,740
<font color="#CCCCCC">Apple</font>

104
00:04:21,670 --> 00:04:26,590
<font color="#CCCCCC">nation</font><font color="#E5E5E5"> whitelisting bypass</font><font color="#CCCCCC"> how</font><font color="#E5E5E5"> do you do</font>

105
00:04:23,740 --> 00:04:30,880
it<font color="#CCCCCC"> well you probably use something like</font>

106
00:04:26,590 --> 00:04:33,010
<font color="#CCCCCC">AppLocker</font><font color="#E5E5E5"> so</font><font color="#CCCCCC"> I just won't use the</font>

107
00:04:30,880 --> 00:04:35,590
typical methods<font color="#CCCCCC"> i</font><font color="#E5E5E5"> want</font><font color="#CCCCCC"> double click on</font>

108
00:04:33,010 --> 00:04:38,830
executables<font color="#CCCCCC"> i won't use the</font><font color="#E5E5E5"> run bar or</font>

109
00:04:35,590 --> 00:04:41,739
command prompt to launch applications<font color="#CCCCCC"> i</font>

110
00:04:38,830 --> 00:04:46,419
use much sneakier methods that<font color="#CCCCCC"> app</font>

111
00:04:41,740 --> 00:04:48,760
<font color="#CCCCCC">Locker doesn't even recognize tell me</font>

112
00:04:46,420 --> 00:04:53,650
what<font color="#CCCCCC"> can't</font><font color="#E5E5E5"> stand it</font>

113
00:04:48,760 --> 00:04:56,289
secondary execution<font color="#CCCCCC"> so red server and</font>

114
00:04:53,650 --> 00:05:00,370
run<font color="#E5E5E5"> dll</font><font color="#CCCCCC"> I'll just generate malicious</font>

115
00:04:56,290 --> 00:05:02,260
<font color="#CCCCCC">DLLs</font><font color="#E5E5E5"> and load those using those built-in</font>

116
00:05:00,370 --> 00:05:05,920
tools that you<font color="#E5E5E5"> can't restrict access to</font>

117
00:05:02,260 --> 00:05:08,770
and then<font color="#CCCCCC"> I'll have access to your</font>

118
00:05:05,920 --> 00:05:11,710
machine so<font color="#CCCCCC"> i'll</font><font color="#E5E5E5"> use</font><font color="#CCCCCC"> msn amor i'll</font><font color="#E5E5E5"> use</font><font color="#CCCCCC"> it</font>

119
00:05:08,770 --> 00:05:14,680
<font color="#CCCCCC">I</font><font color="#E5E5E5"> statically compiled command purpose</font>

120
00:05:11,710 --> 00:05:19,239
<font color="#E5E5E5">shot shell and</font><font color="#CCCCCC"> i'll</font><font color="#E5E5E5"> launch that using</font>

121
00:05:14,680 --> 00:05:22,390
one of<font color="#E5E5E5"> those schools</font>

122
00:05:19,240 --> 00:05:24,040
<font color="#CCCCCC">I don't it's hard to believe that you</font>

123
00:05:22,390 --> 00:05:25,840
actually got me on that one

124
00:05:24,040 --> 00:05:27,970
<font color="#E5E5E5">I think</font><font color="#CCCCCC"> I don't</font><font color="#E5E5E5"> have a solution for that</font>

125
00:05:25,840 --> 00:05:30,640
one<font color="#E5E5E5"> but it's good because our network</font>

126
00:05:27,970 --> 00:05:31,630
like<font color="#E5E5E5"> i said is so solid</font><font color="#CCCCCC"> i will have</font>

127
00:05:30,640 --> 00:05:33,070
something to do when<font color="#CCCCCC"> I go to work</font>

128
00:05:31,630 --> 00:05:36,820
tomorrow<font color="#CCCCCC"> I'll</font><font color="#E5E5E5"> think on that one</font>

129
00:05:33,070 --> 00:05:37,750
<font color="#CCCCCC">secondary how</font><font color="#E5E5E5"> about</font><font color="#CCCCCC"> I run a</font><font color="#E5E5E5"> little salt</font>

130
00:05:36,820 --> 00:05:41,140
in the wound

131
00:05:37,750 --> 00:05:44,530
one of my<font color="#CCCCCC"> coworkers Brian</font><font color="#E5E5E5"> Fierman did a</font>

132
00:05:41,140 --> 00:05:48,310
blog post and showed us all how to use

133
00:05:44,530 --> 00:05:50,770
install<font color="#CCCCCC"> util</font><font color="#E5E5E5"> to execute arbitrary</font><font color="#CCCCCC"> para</font>

134
00:05:48,310 --> 00:05:53,320
<font color="#E5E5E5">shell commands so now I don't even need</font>

135
00:05:50,770 --> 00:05:56,049
<font color="#CCCCCC">powershell dot exe</font><font color="#E5E5E5"> or</font><font color="#CCCCCC"> powershell that</font><font color="#E5E5E5"> i</font>

136
00:05:53,320 --> 00:05:58,420
underscore is easy to do anything<font color="#E5E5E5"> I can</font>

137
00:05:56,050 --> 00:06:01,780
<font color="#E5E5E5">just tell it what command</font><font color="#CCCCCC"> i want to run</font>

138
00:05:58,420 --> 00:06:05,440
<font color="#E5E5E5">execute and</font><font color="#CCCCCC"> I dropped</font><font color="#E5E5E5"> the mic and walk</font>

139
00:06:01,780 --> 00:06:07,900
out now done attitude<font color="#CCCCCC"> but you</font><font color="#E5E5E5"> should</font>

140
00:06:05,440 --> 00:06:12,670
<font color="#E5E5E5">check out the blog post</font><font color="#CCCCCC"> i think</font><font color="#E5E5E5"> i will</font>

141
00:06:07,900 --> 00:06:15,549
<font color="#E5E5E5">then once</font><font color="#CCCCCC"> i get on one of your internal</font>

142
00:06:12,670 --> 00:06:20,050
boxes and I got shell access<font color="#CCCCCC"> i'll use</font>

143
00:06:15,550 --> 00:06:23,020
tools like<font color="#CCCCCC"> powerup and</font><font color="#E5E5E5"> powershell</font><font color="#CCCCCC"> Empire</font>

144
00:06:20,050 --> 00:06:26,230
<font color="#CCCCCC">metasploit</font><font color="#E5E5E5"> the light hound</font><font color="#CCCCCC"> i'll search</font>

145
00:06:23,020 --> 00:06:29,740
<font color="#CCCCCC">Active Directory</font><font color="#E5E5E5"> looking</font><font color="#CCCCCC"> insist fall</font><font color="#E5E5E5"> for</font>

146
00:06:26,230 --> 00:06:32,380
<font color="#E5E5E5">GP passwords yes i know it's passé</font><font color="#CCCCCC"> but</font>

147
00:06:29,740 --> 00:06:34,060
<font color="#CCCCCC">people disable those policies and they</font>

148
00:06:32,380 --> 00:06:35,110
don't ever delete those passwords and

149
00:06:34,060 --> 00:06:39,640
guess what<font color="#CCCCCC"> there</font>

150
00:06:35,110 --> 00:06:41,620
usually still good so once<font color="#CCCCCC"> I've gotten</font>

151
00:06:39,640 --> 00:06:43,360
into that environment I'll find things

152
00:06:41,620 --> 00:06:49,270
like this and get myself

153
00:06:43,360 --> 00:06:51,550
admin access and then<font color="#E5E5E5"> I'm</font><font color="#CCCCCC"> sure inside</font>

154
00:06:49,270 --> 00:06:56,650
your network somewhere<font color="#E5E5E5"> somebody's</font>

155
00:06:51,550 --> 00:07:00,130
granted<font color="#E5E5E5"> domain users access to local</font>

156
00:06:56,650 --> 00:07:02,560
admins and some box somewhere<font color="#CCCCCC"> you</font>

157
00:07:00,130 --> 00:07:04,900
<font color="#E5E5E5">probably have some box that some</font>

158
00:07:02,560 --> 00:07:07,270
developer has and he's desperate so he

159
00:07:04,900 --> 00:07:11,260
just keeps on<font color="#E5E5E5"> whining and you know you</font>

160
00:07:07,270 --> 00:07:12,640
push<font color="#CCCCCC"> over blue team</font><font color="#E5E5E5"> give him access and</font>

161
00:07:11,260 --> 00:07:20,260
that's it

162
00:07:12,640 --> 00:07:23,349
once<font color="#CCCCCC"> i'm a local admin it's all</font><font color="#E5E5E5"> over Oh</font>

163
00:07:20,260 --> 00:07:26,530
Dave Dave Dave Dave<font color="#CCCCCC"> I</font><font color="#E5E5E5"> run your tools to</font>

164
00:07:23,350 --> 00:07:29,710
<font color="#E5E5E5">write</font><font color="#CCCCCC"> powerup</font><font color="#E5E5E5"> right find those</font>

165
00:07:26,530 --> 00:07:32,200
misconfigurations<font color="#CCCCCC"> spine</font><font color="#E5E5E5"> configurable</font>

166
00:07:29,710 --> 00:07:35,440
scripts in autoruns<font color="#E5E5E5"> fine week service</font>

167
00:07:32,200 --> 00:07:37,360
permissions unquoted<font color="#E5E5E5"> service</font><font color="#CCCCCC"> past hi</font>

168
00:07:35,440 --> 00:07:40,480
<font color="#E5E5E5">jackal</font><font color="#CCCCCC"> DLLs I know all those things</font>

169
00:07:37,360 --> 00:07:42,670
<font color="#CCCCCC">however up tells you those</font><font color="#E5E5E5"> things and we</font>

170
00:07:40,480 --> 00:07:44,530
audit our group membership<font color="#E5E5E5"> our ad group</font>

171
00:07:42,670 --> 00:07:47,530
membership<font color="#E5E5E5"> so you're not going to find</font>

172
00:07:44,530 --> 00:07:49,330
that domain users in the local

173
00:07:47,530 --> 00:07:51,400
administrators group<font color="#CCCCCC"> you're not going to</font>

174
00:07:49,330 --> 00:07:54,010
find it on our network and our users are

175
00:07:51,400 --> 00:07:56,500
never admin by default<font color="#CCCCCC"> right everybody</font>

176
00:07:54,010 --> 00:07:57,550
tells you don't run as<font color="#E5E5E5"> administrator</font><font color="#CCCCCC"> we</font>

177
00:07:56,500 --> 00:08:00,190
<font color="#E5E5E5">actually do it</font>

178
00:07:57,550 --> 00:08:04,900
yeah and we use application whitelisting

179
00:08:00,190 --> 00:08:07,690
<font color="#CCCCCC">oh I'm</font><font color="#E5E5E5"> sure</font><font color="#CCCCCC"> I'm going</font><font color="#E5E5E5"> to end up with</font>

180
00:08:04,900 --> 00:08:10,479
local admin somewhere<font color="#E5E5E5"> there's just no</font>

181
00:08:07,690 --> 00:08:12,969
getting around it<font color="#E5E5E5"> and once I've got</font>

182
00:08:10,480 --> 00:08:14,650
local admin<font color="#CCCCCC"> that's</font><font color="#E5E5E5"> just as good as</font>

183
00:08:12,970 --> 00:08:16,960
domain admin because I'll just spread

184
00:08:14,650 --> 00:08:20,560
<font color="#E5E5E5">for machine-to-machine gathering</font>

185
00:08:16,960 --> 00:08:22,930
credentials<font color="#CCCCCC"> i'll use tools like many</font>

186
00:08:20,560 --> 00:08:25,330
cats to dump<font color="#CCCCCC"> plaintext credentials from</font>

187
00:08:22,930 --> 00:08:27,850
memory and then<font color="#E5E5E5"> i'll just</font><font color="#CCCCCC"> keep spidering</font>

188
00:08:25,330 --> 00:08:31,750
out like cancer on your network and then

189
00:08:27,850 --> 00:08:34,630
<font color="#CCCCCC">i'll find an admin session and jump to</font>

190
00:08:31,750 --> 00:08:37,870
your<font color="#E5E5E5"> DC</font><font color="#CCCCCC"> dump ashes from there in your</font>

191
00:08:34,630 --> 00:08:38,649
entire network is completely<font color="#E5E5E5"> owned</font><font color="#CCCCCC"> good</font>

192
00:08:37,870 --> 00:08:46,779
luck

193
00:08:38,649 --> 00:08:48,670
well again we run your tools right we

194
00:08:46,779 --> 00:08:50,889
use local administrator password

195
00:08:48,670 --> 00:08:52,479
solution that's a freebie from<font color="#CCCCCC"> Microsoft</font>

196
00:08:50,889 --> 00:08:54,850
make sure that you have a unique

197
00:08:52,480 --> 00:08:57,309
password on every system for the

198
00:08:54,850 --> 00:08:59,470
administrator account<font color="#CCCCCC"> so when you if you</font>

199
00:08:57,309 --> 00:09:01,209
were<font color="#E5E5E5"> to</font><font color="#CCCCCC"> it's</font><font color="#E5E5E5"> not going</font><font color="#CCCCCC"> to happen</font><font color="#E5E5E5"> but if</font>

200
00:08:59,470 --> 00:09:02,740
you were to get a local admin account

201
00:09:01,209 --> 00:09:05,679
you<font color="#CCCCCC"> can't use</font><font color="#E5E5E5"> it anywhere you</font><font color="#CCCCCC"> can pivot</font>

202
00:09:02,740 --> 00:09:07,749
to any other machine<font color="#E5E5E5"> and then we also we</font>

203
00:09:05,679 --> 00:09:11,350
do some cool things<font color="#CCCCCC"> one of</font><font color="#E5E5E5"> the things we</font>

204
00:09:07,749 --> 00:09:14,110
do is write<font color="#CCCCCC"> x or execute what does</font><font color="#E5E5E5"> that</font>

205
00:09:11,350 --> 00:09:16,720
mean that means where users can download

206
00:09:14,110 --> 00:09:19,660
where they can write<font color="#E5E5E5"> to their they can't</font>

207
00:09:16,720 --> 00:09:20,350
execute<font color="#CCCCCC"> so if you're going to download</font>

208
00:09:19,660 --> 00:09:21,939
something

209
00:09:20,350 --> 00:09:23,379
<font color="#E5E5E5">wherever you're allowed to put it you're</font>

210
00:09:21,939 --> 00:09:25,868
not allowed to execute it

211
00:09:23,379 --> 00:09:27,550
so you just can't execute stuff<font color="#E5E5E5"> and</font>

212
00:09:25,869 --> 00:09:31,269
wherever you execute something those

213
00:09:27,550 --> 00:09:33,429
locations are writable<font color="#E5E5E5"> that's a good one</font>

214
00:09:31,269 --> 00:09:35,290
<font color="#CCCCCC">that's a good one and also we don't</font>

215
00:09:33,429 --> 00:09:37,779
allow client to client communication

216
00:09:35,290 --> 00:09:39,759
because clients don't need to talk to

217
00:09:37,779 --> 00:09:41,499
other clients so we just put firewall

218
00:09:39,759 --> 00:09:43,809
rules in place because anytime there is

219
00:09:41,499 --> 00:09:46,569
client<font color="#E5E5E5"> to client communication</font><font color="#CCCCCC"> it's</font>

220
00:09:43,809 --> 00:09:52,480
these<font color="#CCCCCC"> hacker boys so we shut</font><font color="#E5E5E5"> them down</font>

221
00:09:46,569 --> 00:09:54,699
<font color="#CCCCCC">are</font><font color="#E5E5E5"> we</font><font color="#CCCCCC"> we never run domain admit</font><font color="#E5E5E5"> domain</font>

222
00:09:52,480 --> 00:09:57,519
admin accounts on workstations domain

223
00:09:54,699 --> 00:10:00,248
admins only<font color="#CCCCCC"> login to domain controllers</font>

224
00:09:57,519 --> 00:10:02,620
that's it that's all they do and<font color="#CCCCCC"> they're</font>

225
00:10:00,249 --> 00:10:04,990
<font color="#CCCCCC">too factored so you're not going to be</font>

226
00:10:02,620 --> 00:10:06,639
able to find the<font color="#E5E5E5"> machine somewhere with</font>

227
00:10:04,990 --> 00:10:08,620
your fancy<font color="#CCCCCC"> bloodhound tool where a</font>

228
00:10:06,639 --> 00:10:10,749
domain admins logged in so you can<font color="#E5E5E5"> dump</font>

229
00:10:08,620 --> 00:10:13,089
correct credentials from memory

230
00:10:10,749 --> 00:10:15,699
it won't work it<font color="#E5E5E5"> just won't</font><font color="#CCCCCC"> work</font><font color="#E5E5E5"> and</font>

231
00:10:13,089 --> 00:10:18,550
then we do something really fun<font color="#CCCCCC"> as we</font>

232
00:10:15,699 --> 00:10:20,829
plant some honey accounts around<font color="#CCCCCC"> so</font><font color="#E5E5E5"> Dave</font>

233
00:10:18,550 --> 00:10:22,299
<font color="#E5E5E5">for Dave he's</font><font color="#CCCCCC"> going to be searching on</font>

234
00:10:20,829 --> 00:10:23,979
our network<font color="#E5E5E5"> for something</font><font color="#CCCCCC"> because he's</font>

235
00:10:22,299 --> 00:10:25,689
doing this pen test and he's not getting

236
00:10:23,980 --> 00:10:28,120
anywhere and he's feeling like a failure

237
00:10:25,689 --> 00:10:30,790
<font color="#E5E5E5">so he'll find these credentials</font>

238
00:10:28,120 --> 00:10:33,189
somewhere and<font color="#E5E5E5"> he'll think</font><font color="#CCCCCC"> Oh</font><font color="#E5E5E5"> finally I</font>

239
00:10:30,790 --> 00:10:36,639
got something this is it and he'll<font color="#E5E5E5"> login</font>

240
00:10:33,189 --> 00:10:38,349
with those<font color="#CCCCCC"> and when he does it's so cool</font>

241
00:10:36,639 --> 00:10:40,240
first of all the security team gets an

242
00:10:38,350 --> 00:10:42,129
email<font color="#E5E5E5"> so that we know there's a hack</font>

243
00:10:40,240 --> 00:10:44,799
around the network and then instantly

244
00:10:42,129 --> 00:10:47,620
within a second<font color="#E5E5E5"> he's logged off and we</font>

245
00:10:44,799 --> 00:10:49,179
black<font color="#CCCCCC"> holes</font><font color="#E5E5E5"> IP so he's done his pen test</font>

246
00:10:47,620 --> 00:10:51,459
is over at that point

247
00:10:49,179 --> 00:10:55,029
sure he can try another IP but<font color="#CCCCCC"> in</font>

248
00:10:51,459 --> 00:10:57,758
rinse and repeat he's done<font color="#CCCCCC"> you get a</font>

249
00:10:55,029 --> 00:11:02,019
<font color="#CCCCCC">little worried now</font><font color="#E5E5E5"> Dave</font><font color="#CCCCCC"> I'm now worried</font>

250
00:10:57,759 --> 00:11:03,910
<font color="#E5E5E5">black hole this lady</font><font color="#CCCCCC"> I'll just scour the</font>

251
00:11:02,019 --> 00:11:06,339
environment for sensitive information

252
00:11:03,910 --> 00:11:09,490
I'm sure your users are very diligent in

253
00:11:06,339 --> 00:11:12,189
protecting all of that<font color="#CCCCCC"> pii</font><font color="#E5E5E5"> and</font>

254
00:11:09,490 --> 00:11:13,990
configuration files and<font color="#CCCCCC"> but I'm</font><font color="#E5E5E5"> all</font><font color="#CCCCCC"> I</font>

255
00:11:12,189 --> 00:11:16,719
know that there's clear tax credentials

256
00:11:13,990 --> 00:11:21,429
<font color="#E5E5E5">out on the network somewhere</font><font color="#CCCCCC"> so no</font>

257
00:11:16,720 --> 00:11:23,410
matter what you do you just can't win

258
00:11:21,429 --> 00:11:25,300
there<font color="#E5E5E5"> may be clear text credentials out</font>

259
00:11:23,410 --> 00:11:26,920
there but<font color="#CCCCCC"> their plants</font>

260
00:11:25,300 --> 00:11:28,689
there's no real ones out there<font color="#E5E5E5"> is no</font>

261
00:11:26,920 --> 00:11:33,040
valid<font color="#E5E5E5"> ones out there</font>

262
00:11:28,689 --> 00:11:35,110
nope nope<font color="#E5E5E5"> we do regular audits again</font>

263
00:11:33,040 --> 00:11:37,959
<font color="#E5E5E5">probably using the same tools the</font>

264
00:11:35,110 --> 00:11:41,290
<font color="#CCCCCC">powershell</font><font color="#E5E5E5"> share finder and file finder</font>

265
00:11:37,959 --> 00:11:43,388
we use those tool<font color="#E5E5E5"> to</font><font color="#CCCCCC"> we find those files</font>

266
00:11:41,290 --> 00:11:44,949
<font color="#E5E5E5">we get them off the network before you</font>

267
00:11:43,389 --> 00:11:46,899
can get at them

268
00:11:44,949 --> 00:11:49,449
we also have honey tokens planted on the

269
00:11:46,899 --> 00:11:51,610
<font color="#E5E5E5">file system so like</font><font color="#CCCCCC"> get that contain</font><font color="#E5E5E5"> web</font>

270
00:11:49,449 --> 00:11:53,439
bugs<font color="#E5E5E5"> so he may think he's found a</font>

271
00:11:51,610 --> 00:11:55,720
sensitive file but really it's calling

272
00:11:53,439 --> 00:11:57,879
back to our server logging<font color="#E5E5E5"> where and</font>

273
00:11:55,720 --> 00:11:59,889
when he's coming<font color="#E5E5E5"> when and where he is</font>

274
00:11:57,879 --> 00:12:03,160
and we can cut him off

275
00:11:59,889 --> 00:12:04,779
<font color="#E5E5E5">it's just so simple it's so simple</font><font color="#CCCCCC"> we</font>

276
00:12:03,160 --> 00:12:06,579
have all kinds of traps all around

277
00:12:04,779 --> 00:12:08,470
because we use some active defense

278
00:12:06,579 --> 00:12:10,239
<font color="#E5E5E5">techniques so many traps that he will</font>

279
00:12:08,470 --> 00:12:13,360
just get nowhere

280
00:12:10,240 --> 00:12:17,679
ok you got me interested<font color="#E5E5E5"> what are these</font>

281
00:12:13,360 --> 00:12:21,399
traps you're talking about

282
00:12:17,679 --> 00:12:26,230
<font color="#E5E5E5">well</font><font color="#CCCCCC"> alright little</font><font color="#E5E5E5"> too quick</font>

283
00:12:21,399 --> 00:12:28,209
<font color="#E5E5E5">our traps we use so the ADHD framework</font>

284
00:12:26,230 --> 00:12:30,549
some of you may have heard about it

285
00:12:28,209 --> 00:12:32,469
<font color="#CCCCCC">Black Hills has put together this</font>

286
00:12:30,549 --> 00:12:34,420
framework of active defense techniques

287
00:12:32,470 --> 00:12:36,850
it's free you can download it there's a

288
00:12:34,420 --> 00:12:39,248
lot of<font color="#CCCCCC"> webcasts about it</font><font color="#E5E5E5"> but it includes</font>

289
00:12:36,850 --> 00:12:41,259
all these cool tools and some of them

290
00:12:39,249 --> 00:12:43,720
that that we use on our network one in

291
00:12:41,259 --> 00:12:47,110
particular my favorite is<font color="#E5E5E5"> artillery</font><font color="#CCCCCC"> that</font>

292
00:12:43,720 --> 00:12:48,670
sets up fake services and so it looks

293
00:12:47,110 --> 00:12:50,889
like there's these services running on

294
00:12:48,670 --> 00:12:52,389
the<font color="#E5E5E5"> box that the the hackers just can't</font>

295
00:12:50,889 --> 00:12:54,490
resist right they connect to these

296
00:12:52,389 --> 00:12:55,720
services and they get black<font color="#E5E5E5"> holes</font>

297
00:12:54,490 --> 00:12:58,350
because there's not really a service

298
00:12:55,720 --> 00:13:01,740
there<font color="#CCCCCC"> it's just fake</font><font color="#E5E5E5"> web labyrinth</font>

299
00:12:58,350 --> 00:13:04,230
this is a<font color="#CCCCCC"> amazed a website that has</font>

300
00:13:01,740 --> 00:13:06,360
links that just create this awful mess

301
00:13:04,230 --> 00:13:08,520
<font color="#CCCCCC">and when</font><font color="#E5E5E5"> the hackers run their scanners</font>

302
00:13:06,360 --> 00:13:09,900
against it<font color="#E5E5E5"> it</font><font color="#CCCCCC"> create</font><font color="#E5E5E5"> it comes up with</font>

303
00:13:08,520 --> 00:13:13,199
scanning results that are absolutely

304
00:13:09,900 --> 00:13:16,079
useless<font color="#E5E5E5"> and it slows them down it</font>

305
00:13:13,200 --> 00:13:17,700
frustrates them and hopefully they just

306
00:13:16,080 --> 00:13:18,960
give up and go home because they never

307
00:13:17,700 --> 00:13:20,790
get anywhere

308
00:13:18,960 --> 00:13:22,830
and then there's<font color="#E5E5E5"> honey badger</font><font color="#CCCCCC"> but</font>

309
00:13:20,790 --> 00:13:25,500
another<font color="#E5E5E5"> one</font><font color="#CCCCCC"> i like</font><font color="#E5E5E5"> very much is keepo</font>

310
00:13:22,830 --> 00:13:28,230
<font color="#CCCCCC">you may have heard about that's an fake</font>

311
00:13:25,500 --> 00:13:29,820
<font color="#CCCCCC">ssh service and so you can connect to</font>

312
00:13:28,230 --> 00:13:31,470
that you you run this and when the

313
00:13:29,820 --> 00:13:34,200
attacker connects to it he thinks he's

314
00:13:31,470 --> 00:13:37,170
found<font color="#E5E5E5"> ssh server that's where the good</font>

315
00:13:34,200 --> 00:13:39,510
stuff is right<font color="#E5E5E5"> and it works like an ssh</font>

316
00:13:37,170 --> 00:13:42,030
server and you he thinks he's connected

317
00:13:39,510 --> 00:13:44,189
to the ssh server<font color="#E5E5E5"> but he's not every</font>

318
00:13:42,030 --> 00:13:46,140
it's like a keylogger really<font color="#E5E5E5"> it's just</font>

319
00:13:44,190 --> 00:13:48,480
collecting his<font color="#E5E5E5"> what he thinks is</font><font color="#CCCCCC"> his</font>

320
00:13:46,140 --> 00:13:50,610
username and password and it it just

321
00:13:48,480 --> 00:13:52,140
confuses him and<font color="#E5E5E5"> confound him but</font>

322
00:13:50,610 --> 00:13:54,360
collects all this information in the

323
00:13:52,140 --> 00:13:58,680
meantime<font color="#E5E5E5"> it's awesome</font>

324
00:13:54,360 --> 00:14:00,330
these are all tools<font color="#E5E5E5"> and ADHD you're</font>

325
00:13:58,680 --> 00:14:03,150
<font color="#E5E5E5">going to get nowhere on my network Dave</font>

326
00:14:00,330 --> 00:14:09,270
you<font color="#E5E5E5"> you're just going to cry</font>

327
00:14:03,150 --> 00:14:15,240
whatever<font color="#E5E5E5"> Sally</font><font color="#CCCCCC"> I hate you</font>

328
00:14:09,270 --> 00:14:20,670
so what's that<font color="#E5E5E5"> was the point of that</font>

329
00:14:15,240 --> 00:14:23,550
whole stick<font color="#E5E5E5"> you know there are all kinds</font>

330
00:14:20,670 --> 00:14:26,670
of tools that are deemed as red versus

331
00:14:23,550 --> 00:14:30,569
blue<font color="#E5E5E5"> you shouldn't confine yourself by</font>

332
00:14:26,670 --> 00:14:31,079
that<font color="#E5E5E5"> and we see all of this stuff</font><font color="#CCCCCC"> every</font>

333
00:14:30,570 --> 00:14:33,180
<font color="#CCCCCC">day</font>

334
00:14:31,080 --> 00:14:35,850
the only reason<font color="#CCCCCC"> we highlighted here is</font>

335
00:14:33,180 --> 00:14:37,380
because we actually see it in some of

336
00:14:35,850 --> 00:14:40,500
the toughest<font color="#E5E5E5"> in environments that we</font>

337
00:14:37,380 --> 00:14:42,780
test<font color="#CCCCCC"> do all of this and</font><font color="#E5E5E5"> it's absolutely</font>

338
00:14:40,500 --> 00:14:44,910
phenomenal when we come up against that

339
00:14:42,780 --> 00:14:45,660
and it really makes us have to think we

340
00:14:44,910 --> 00:14:48,329
cry

341
00:14:45,660 --> 00:14:51,089
yes we certainly cry and we usually

342
00:14:48,330 --> 00:14:54,360
bring in the entire<font color="#CCCCCC"> bhis team and say</font>

343
00:14:51,090 --> 00:14:55,920
hey what do you guys think about this

344
00:14:54,360 --> 00:14:58,410
environment and it takes all of us

345
00:14:55,920 --> 00:15:01,620
brainstorming<font color="#E5E5E5"> to come up with solutions</font>

346
00:14:58,410 --> 00:15:03,750
to get by<font color="#E5E5E5"> all of these protections in</font>

347
00:15:01,620 --> 00:15:05,460
place<font color="#E5E5E5"> so be creative when you're</font>

348
00:15:03,750 --> 00:15:09,750
applying those protections

349
00:15:05,460 --> 00:15:11,910
yeah and and the number one on this list

350
00:15:09,750 --> 00:15:14,760
is restricted<font color="#CCCCCC"> Ministry of Acts</font>

351
00:15:11,910 --> 00:15:18,120
<font color="#E5E5E5">yes you've heard it how many times a</font>

352
00:15:14,760 --> 00:15:20,670
million<font color="#E5E5E5"> two million but it's still very</font>

353
00:15:18,120 --> 00:15:23,040
common that users are given<font color="#CCCCCC"> it admin</font>

354
00:15:20,670 --> 00:15:25,349
access<font color="#E5E5E5"> or that groups are given admin</font>

355
00:15:23,040 --> 00:15:29,219
access that are really easy to get at<font color="#CCCCCC"> so</font>

356
00:15:25,350 --> 00:15:32,100
most of our customers don't have this

357
00:15:29,220 --> 00:15:34,710
<font color="#E5E5E5">top-level security that makes us cry</font>

358
00:15:32,100 --> 00:15:37,080
most of them don't limit<font color="#E5E5E5"> admin access</font>

359
00:15:34,710 --> 00:15:39,330
<font color="#E5E5E5">but you have to start doing it because</font>

360
00:15:37,080 --> 00:15:41,790
it just makes it so easy

361
00:15:39,330 --> 00:15:44,130
in addition<font color="#E5E5E5"> all of those external</font>

362
00:15:41,790 --> 00:15:45,780
interfaces<font color="#CCCCCC"> if they're</font><font color="#E5E5E5"> not to factor</font><font color="#CCCCCC"> in</font>

363
00:15:44,130 --> 00:15:49,740
<font color="#CCCCCC">there exposed to the internet good luck</font>

364
00:15:45,780 --> 00:15:51,959
surviving<font color="#CCCCCC"> check out</font><font color="#E5E5E5"> our blog we have a</font>

365
00:15:49,740 --> 00:15:54,510
bunch of blog posts on<font color="#E5E5E5"> password spraying</font>

366
00:15:51,960 --> 00:15:56,850
external interfaces and we always get

367
00:15:54,510 --> 00:16:00,660
credentials<font color="#CCCCCC"> when you have a crappy</font>

368
00:15:56,850 --> 00:16:04,110
<font color="#E5E5E5">password policy</font><font color="#CCCCCC"> there's also a blog post</font>

369
00:16:00,660 --> 00:16:09,120
about<font color="#CCCCCC"> password spraying a to factored</font>

370
00:16:04,110 --> 00:16:11,970
<font color="#CCCCCC">outlook web app a portal and</font><font color="#E5E5E5"> it's</font><font color="#CCCCCC"> too</font>

371
00:16:09,120 --> 00:16:13,920
factored so you don't actually you can

372
00:16:11,970 --> 00:16:16,170
actually get in<font color="#E5E5E5"> but because of</font><font color="#CCCCCC"> its a</font>

373
00:16:13,920 --> 00:16:17,849
timing thing<font color="#E5E5E5"> because of the timing you</font>

374
00:16:16,170 --> 00:16:20,520
can tell when your password<font color="#E5E5E5"> when the</font>

375
00:16:17,850 --> 00:16:22,410
password you guessed was right or not

376
00:16:20,520 --> 00:16:24,510
so then you take those credentials to

377
00:16:22,410 --> 00:16:29,520
another portal that isn't<font color="#E5E5E5"> too factored</font>

378
00:16:24,510 --> 00:16:30,870
<font color="#E5E5E5">bingo right so password policies we</font>

379
00:16:29,520 --> 00:16:33,390
talked about briefly so make sure

380
00:16:30,870 --> 00:16:35,940
passwords are at least 15 characters<font color="#E5E5E5"> or</font>

381
00:16:33,390 --> 00:16:38,760
more and we like to recommend complex

382
00:16:35,940 --> 00:16:41,520
<font color="#CCCCCC">past raises</font><font color="#E5E5E5"> right you've heard that too</font>

383
00:16:38,760 --> 00:16:47,189
<font color="#E5E5E5">but surprisingly few companies are doing</font>

384
00:16:41,520 --> 00:16:49,890
that<font color="#E5E5E5"> then worry about privilege</font>

385
00:16:47,190 --> 00:16:52,710
escalation<font color="#CCCCCC"> if you if you looked at the</font>

386
00:16:49,890 --> 00:16:55,890
<font color="#E5E5E5">sands</font><font color="#CCCCCC"> 20</font><font color="#E5E5E5"> crew could controls or the</font>

387
00:16:52,710 --> 00:16:59,010
<font color="#E5E5E5">consensus</font><font color="#CCCCCC"> other</font><font color="#E5E5E5"> guidelines control</font>

388
00:16:55,890 --> 00:17:01,470
number<font color="#E5E5E5"> three is</font><font color="#CCCCCC"> build baselines</font><font color="#E5E5E5"> that's</font>

389
00:16:59,010 --> 00:17:03,900
critically important<font color="#E5E5E5"> if you don't know</font>

390
00:17:01,470 --> 00:17:06,540
whether your machines are vulnerable to

391
00:17:03,900 --> 00:17:08,550
privilege escalation attacks<font color="#CCCCCC"> you should</font>

392
00:17:06,540 --> 00:17:11,609
<font color="#E5E5E5">probably check it out and don't restrict</font>

393
00:17:08,550 --> 00:17:15,210
yourself to using tools that are blue

394
00:17:11,609 --> 00:17:17,819
team tools use tools like<font color="#CCCCCC"> power up</font><font color="#E5E5E5"> that</font>

395
00:17:15,210 --> 00:17:20,520
red teamers use and you know they're

396
00:17:17,819 --> 00:17:22,200
going to use on your machines to try and

397
00:17:20,520 --> 00:17:25,379
escalate if you don't use them you're

398
00:17:22,200 --> 00:17:25,740
just losing out<font color="#CCCCCC"> so check out all the</font>

399
00:17:25,380 --> 00:17:28,740
power

400
00:17:25,740 --> 00:17:31,140
review tools power<font color="#E5E5E5"> supply and definitely</font>

401
00:17:28,740 --> 00:17:38,670
<font color="#E5E5E5">power up in assessing your baseline</font>

402
00:17:31,140 --> 00:17:41,760
configurations<font color="#CCCCCC"> in advance</font><font color="#E5E5E5"> so and then</font>

403
00:17:38,670 --> 00:17:45,900
limit<font color="#E5E5E5"> client to client communication</font>

404
00:17:41,760 --> 00:17:47,760
<font color="#CCCCCC">very</font><font color="#E5E5E5"> few people do this but it's amazing</font>

405
00:17:45,900 --> 00:17:49,890
you don't need<font color="#E5E5E5"> client</font><font color="#CCCCCC"> to client</font>

406
00:17:47,760 --> 00:17:52,440
communications clients<font color="#E5E5E5"> talk</font><font color="#CCCCCC"> two servers</font>

407
00:17:49,890 --> 00:17:54,390
<font color="#E5E5E5">servers talk to other servers</font>

408
00:17:52,440 --> 00:17:56,580
typically when<font color="#E5E5E5"> clients talk to other</font>

409
00:17:54,390 --> 00:17:58,590
clients like maybe through some chat

410
00:17:56,580 --> 00:18:00,449
thing<font color="#CCCCCC"> it's</font><font color="#E5E5E5"> still be a server right</font>

411
00:17:58,590 --> 00:18:03,030
<font color="#CCCCCC">they're not talking</font><font color="#E5E5E5"> directly together</font>

412
00:18:00,450 --> 00:18:05,370
it's the hackers that do that<font color="#E5E5E5"> right so</font>

413
00:18:03,030 --> 00:18:09,420
just just don't don't allow it

414
00:18:05,370 --> 00:18:11,969
it's it's it's a really easy win<font color="#E5E5E5"> and</font><font color="#CCCCCC"> I</font>

415
00:18:09,420 --> 00:18:15,000
think<font color="#E5E5E5"> on all the tests</font><font color="#CCCCCC"> I've been</font><font color="#E5E5E5"> on I've</font>

416
00:18:11,970 --> 00:18:17,970
seen<font color="#CCCCCC"> that once and it was incredibly</font>

417
00:18:15,000 --> 00:18:20,130
hard to get anywhere on that<font color="#CCCCCC"> Network it</font>

418
00:18:17,970 --> 00:18:22,140
was really<font color="#E5E5E5"> really hard</font>

419
00:18:20,130 --> 00:18:24,570
next<font color="#CCCCCC"> you want to make sure that you are</font>

420
00:18:22,140 --> 00:18:27,870
doing<font color="#E5E5E5"> application whitelisting there are</font>

421
00:18:24,570 --> 00:18:30,450
<font color="#E5E5E5">bypasses</font><font color="#CCCCCC"> but if you if I have to go</font><font color="#E5E5E5"> to</font>

422
00:18:27,870 --> 00:18:34,559
the to the point of developing custom

423
00:18:30,450 --> 00:18:37,470
<font color="#E5E5E5">stubs and actually executing something</font>

424
00:18:34,559 --> 00:18:40,470
in a secondary fashion to be able to get

425
00:18:37,470 --> 00:18:42,360
a shell on your box<font color="#E5E5E5"> then that makes like</font>

426
00:18:40,470 --> 00:18:43,920
tough for me<font color="#CCCCCC"> and in some of the</font>

427
00:18:42,360 --> 00:18:46,860
environments that we test that they do

428
00:18:43,920 --> 00:18:48,510
this<font color="#E5E5E5"> they couple this with no client</font>

429
00:18:46,860 --> 00:18:51,000
client communication and then it's

430
00:18:48,510 --> 00:18:53,010
almost impossible<font color="#CCCCCC"> you're running a lot</font>

431
00:18:51,000 --> 00:18:55,800
of stuff mainly<font color="#E5E5E5"> it's consuming a lot of</font>

432
00:18:53,010 --> 00:18:57,300
time from the<font color="#E5E5E5"> red team side your</font>

433
00:18:55,800 --> 00:19:00,090
attackers<font color="#CCCCCC"> who are going to treat</font><font color="#E5E5E5"> the</font>

434
00:18:57,300 --> 00:19:01,649
exact same way<font color="#E5E5E5"> and then just don't rely</font>

435
00:19:00,090 --> 00:19:03,689
specifically on that application

436
00:19:01,650 --> 00:19:08,010
whitelisting<font color="#E5E5E5"> layer your protection</font>

437
00:19:03,690 --> 00:19:10,260
antivirus<font color="#CCCCCC"> hips nips but good firewall</font>

438
00:19:08,010 --> 00:19:15,510
policy<font color="#CCCCCC"> make</font><font color="#E5E5E5"> sure that it's all in place</font>

439
00:19:10,260 --> 00:19:17,160
you should<font color="#E5E5E5"> also disable harmful content</font>

440
00:19:15,510 --> 00:19:19,740
that kind of goes without saying but

441
00:19:17,160 --> 00:19:22,140
people still<font color="#E5E5E5"> again they don't do it so</font>

442
00:19:19,740 --> 00:19:23,670
if your users don't if you don't want

443
00:19:22,140 --> 00:19:26,040
them to run executables that they

444
00:19:23,670 --> 00:19:28,080
download<font color="#CCCCCC"> don't let</font><font color="#E5E5E5"> them to download</font>

445
00:19:26,040 --> 00:19:30,870
those in the first place<font color="#E5E5E5"> and filter</font>

446
00:19:28,080 --> 00:19:33,090
those based on file signature not file

447
00:19:30,870 --> 00:19:36,600
extension<font color="#E5E5E5"> right because that's an easy</font>

448
00:19:33,090 --> 00:19:39,389
<font color="#CCCCCC">easy workaround</font><font color="#E5E5E5"> to and then don't forget</font>

449
00:19:36,600 --> 00:19:42,149
about embedded technologies like

450
00:19:39,389 --> 00:19:45,059
office macros<font color="#CCCCCC"> how</font><font color="#E5E5E5"> often do we use office</font>

451
00:19:42,149 --> 00:19:48,389
macros in fishing<font color="#E5E5E5"> to get our initial</font>

452
00:19:45,059 --> 00:19:50,219
foothold<font color="#CCCCCC"> all the time if your users</font><font color="#E5E5E5"> how</font>

453
00:19:48,389 --> 00:19:52,889
<font color="#E5E5E5">many how many people out there actually</font>

454
00:19:50,219 --> 00:19:56,879
use macros in their environment<font color="#E5E5E5"> not pen</font>

455
00:19:52,889 --> 00:19:58,769
testers<font color="#CCCCCC"> let's see</font><font color="#E5E5E5"> one</font>

456
00:19:56,879 --> 00:20:02,579
why<font color="#CCCCCC"> use</font><font color="#E5E5E5"> them in my environment he's</font>

457
00:19:58,769 --> 00:20:04,169
<font color="#CCCCCC">another pic so I</font><font color="#E5E5E5"> mean seriously if you</font>

458
00:20:02,579 --> 00:20:05,908
don't need them just make sure<font color="#CCCCCC"> that is</font>

459
00:20:04,169 --> 00:20:09,929
disabled because<font color="#E5E5E5"> that's another easy win</font>

460
00:20:05,909 --> 00:20:12,719
for us<font color="#E5E5E5"> then going back to</font><font color="#CCCCCC"> our</font><font color="#E5E5E5"> those</font>

461
00:20:09,929 --> 00:20:16,979
protective tools<font color="#E5E5E5"> do not let users have</font>

462
00:20:12,719 --> 00:20:20,039
command shell access or<font color="#CCCCCC"> powershell</font><font color="#E5E5E5"> and</font>

463
00:20:16,979 --> 00:20:22,169
if a regular user can run command prompt

464
00:20:20,039 --> 00:20:24,269
in<font color="#CCCCCC"> powershell than an attacker who</font>

465
00:20:22,169 --> 00:20:27,059
plants malware on that device can run

466
00:20:24,269 --> 00:20:29,099
command prompt in<font color="#CCCCCC"> powershell and do all</font>

467
00:20:27,059 --> 00:20:31,349
kinds of wonderful things just using

468
00:20:29,099 --> 00:20:34,079
those tools and the integrated

469
00:20:31,349 --> 00:20:35,700
capabilities<font color="#E5E5E5"> in</font><font color="#CCCCCC"> Windows it's complete</font>

470
00:20:34,079 --> 00:20:38,428
fail<font color="#E5E5E5"> they don't need it</font>

471
00:20:35,700 --> 00:20:40,049
<font color="#E5E5E5">don't give it to him you also want to</font>

472
00:20:38,429 --> 00:20:42,690
make sure that your administrators are

473
00:20:40,049 --> 00:20:44,879
<font color="#E5E5E5">you performing administration with</font>

474
00:20:42,690 --> 00:20:47,879
dedicated admin<font color="#E5E5E5"> accounts and on</font>

475
00:20:44,879 --> 00:20:50,968
dedicated<font color="#E5E5E5"> admin computers if they're</font>

476
00:20:47,879 --> 00:20:53,759
doing their administration on the<font color="#E5E5E5"> their</font>

477
00:20:50,969 --> 00:20:55,289
normal daily use machines<font color="#CCCCCC"> the chances</font>

478
00:20:53,759 --> 00:20:57,359
that malware is going to end up on that

479
00:20:55,289 --> 00:21:01,109
box because of web browsing and email

480
00:20:57,359 --> 00:21:04,019
are greatly increased<font color="#E5E5E5"> if you restrict</font>

481
00:21:01,109 --> 00:21:08,699
that to where they can only admin on a

482
00:21:04,019 --> 00:21:10,739
box that's dedicated<font color="#E5E5E5"> then it's it's</font>

483
00:21:08,700 --> 00:21:14,190
really tough to get to those admin

484
00:21:10,739 --> 00:21:15,959
credentials credentials and<font color="#E5E5E5"> then lastly</font>

485
00:21:14,190 --> 00:21:18,089
if you've taken care of some of this

486
00:21:15,959 --> 00:21:20,249
other stuff and you find yourself maybe

487
00:21:18,089 --> 00:21:22,559
with some time<font color="#CCCCCC"> play with some active</font>

488
00:21:20,249 --> 00:21:23,789
defense techniques<font color="#E5E5E5"> it is really really</font>

489
00:21:22,559 --> 00:21:25,829
really fun

490
00:21:23,789 --> 00:21:29,519
it slows the attackers down it's like an

491
00:21:25,829 --> 00:21:32,908
early detection mechanism<font color="#E5E5E5"> and it is just</font>

492
00:21:29,519 --> 00:21:33,959
it is so much fun<font color="#E5E5E5"> and blue team really</font>

493
00:21:32,909 --> 00:21:45,140
can be fun

494
00:21:33,959 --> 00:21:50,730
it<font color="#E5E5E5"> really can anybody have any questions</font>

495
00:21:45,140 --> 00:21:51,720
is there<font color="#E5E5E5"> any</font>

496
00:21:50,730 --> 00:21:54,960
segmentation in the environment

497
00:21:51,720 --> 00:21:58,080
whatsoever<font color="#E5E5E5"> like start with</font><font color="#CCCCCC"> an o</font><font color="#E5E5E5"> you and</font>

498
00:21:54,960 --> 00:22:01,140
then apply it there and then as you as

499
00:21:58,080 --> 00:22:02,549
you get that organizational<font color="#E5E5E5"> units</font>

500
00:22:01,140 --> 00:22:05,040
squared away especially if<font color="#E5E5E5"> it's like</font>

501
00:22:02,549 --> 00:22:07,260
business unit<font color="#E5E5E5"> if if you're dealing with</font>

502
00:22:05,040 --> 00:22:10,049
individual business units<font color="#E5E5E5"> they usually</font>

503
00:22:07,260 --> 00:22:12,929
only need a common set of tools /

504
00:22:10,049 --> 00:22:14,668
business unit<font color="#CCCCCC"> so you apply it there make</font>

505
00:22:12,929 --> 00:22:17,370
sure<font color="#E5E5E5"> everything's working well and then</font>

506
00:22:14,669 --> 00:22:19,440
just<font color="#E5E5E5"> spider out from from that location</font>

507
00:22:17,370 --> 00:22:20,969
in the network<font color="#E5E5E5"> if you're not segmented</font>

508
00:22:19,440 --> 00:22:22,080
like that then it's<font color="#E5E5E5"> going to be really</font>

509
00:22:20,970 --> 00:22:23,850
really tough

510
00:22:22,080 --> 00:22:25,799
so the first<font color="#CCCCCC"> thing that I would do is</font>

511
00:22:23,850 --> 00:22:28,620
work on creating<font color="#CCCCCC"> an IOU structure that</font>

512
00:22:25,799 --> 00:22:32,460
supports you<font color="#CCCCCC"> building different policies</font>

513
00:22:28,620 --> 00:22:34,320
for different departments<font color="#CCCCCC"> I i can add to</font>

514
00:22:32,460 --> 00:22:37,710
that that<font color="#CCCCCC"> i would also just allow</font>

515
00:22:34,320 --> 00:22:39,480
everything and log it and watch and see

516
00:22:37,710 --> 00:22:41,549
<font color="#E5E5E5">and you can develop a list that way</font>

517
00:22:39,480 --> 00:22:43,350
without hurting anybody<font color="#CCCCCC"> I mean you've</font>

518
00:22:41,549 --> 00:22:45,840
been running without<font color="#CCCCCC"> at all this time</font>

519
00:22:43,350 --> 00:22:47,850
right so do that for a month or so<font color="#E5E5E5"> and</font>

520
00:22:45,840 --> 00:22:50,520
you'll have a really good idea of what

521
00:22:47,850 --> 00:22:51,928
you need to start<font color="#E5E5E5"> whitelisting and and</font>

522
00:22:50,520 --> 00:23:07,918
do that for<font color="#CCCCCC"> a while and then you can</font>

523
00:22:51,929 --> 00:23:20,040
slowly<font color="#CCCCCC"> parrot</font><font color="#E5E5E5"> down here say that a</font>

524
00:23:07,919 --> 00:23:23,490
little louder<font color="#CCCCCC"> so how do you restrict</font>

525
00:23:20,040 --> 00:23:24,600
access<font color="#CCCCCC"> the</font><font color="#E5E5E5"> so there are a couple of</font>

526
00:23:23,490 --> 00:23:27,690
resources

527
00:23:24,600 --> 00:23:29,159
<font color="#CCCCCC">The Sands is he has black lists</font><font color="#E5E5E5"> and you</font>

528
00:23:27,690 --> 00:23:33,780
should

529
00:23:29,160 --> 00:23:36,419
<font color="#CCCCCC">ok yet</font><font color="#E5E5E5"> absolutely how do you scrub</font>

530
00:23:33,780 --> 00:23:39,389
<font color="#CCCCCC">webrequest going out to the internet if</font>

531
00:23:36,419 --> 00:23:42,690
you let your users<font color="#CCCCCC"> browse out how</font><font color="#E5E5E5"> do you</font>

532
00:23:39,390 --> 00:23:45,960
identify those bad<font color="#E5E5E5"> sites a great place</font>

533
00:23:42,690 --> 00:23:49,860
to start is the black list that<font color="#E5E5E5"> the</font>

534
00:23:45,960 --> 00:23:52,350
<font color="#CCCCCC">internet storm center publishes</font><font color="#E5E5E5"> and and</font>

535
00:23:49,860 --> 00:23:55,530
definitely if you're letting your users

536
00:23:52,350 --> 00:24:01,230
browse out to the<font color="#CCCCCC"> internet by IP address</font>

537
00:23:55,530 --> 00:24:02,629
<font color="#E5E5E5">you're doing bad only allow browsing out</font>

538
00:24:01,230 --> 00:24:05,000
<font color="#E5E5E5">to actual</font>

539
00:24:02,630 --> 00:24:07,580
register domain names and then maybe

540
00:24:05,000 --> 00:24:10,160
look at the time frame between when that

541
00:24:07,580 --> 00:24:12,290
domain name was registered<font color="#E5E5E5"> so kind of a</font>

542
00:24:10,160 --> 00:24:13,790
little bit reputation-based<font color="#CCCCCC"> when it was</font>

543
00:24:12,290 --> 00:24:17,060
registered and when<font color="#E5E5E5"> it's being accessed</font>

544
00:24:13,790 --> 00:24:19,490
<font color="#CCCCCC">because in many cases</font><font color="#E5E5E5"> will do things</font>

545
00:24:17,060 --> 00:24:22,100
like<font color="#CCCCCC"> typo squat will register domain</font>

546
00:24:19,490 --> 00:24:24,680
that's really close to your domain<font color="#E5E5E5"> send</font>

547
00:24:22,100 --> 00:24:27,320
<font color="#E5E5E5">in phishing emails and then all the bad</font>

548
00:24:24,680 --> 00:24:30,470
stuff comes out to us<font color="#E5E5E5"> and usually you</font>

549
00:24:27,320 --> 00:24:33,950
can tell because we don't have weeks

550
00:24:30,470 --> 00:24:35,150
before we actually start<font color="#CCCCCC"> an engagement</font>

551
00:24:33,950 --> 00:24:38,000
the other thing is that you could use

552
00:24:35,150 --> 00:24:38,870
opendns<font color="#CCCCCC"> they kind of do all that for you</font>

553
00:24:38,000 --> 00:24:40,310
right

554
00:24:38,870 --> 00:24:41,959
they do a pretty good job of it and

555
00:24:40,310 --> 00:24:47,090
we've seen a lot of companies that use

556
00:24:41,960 --> 00:24:54,440
that<font color="#CCCCCC"> organizations</font><font color="#E5E5E5"> cloud proxy</font>

557
00:24:47,090 --> 00:25:00,580
yep<font color="#CCCCCC"> we</font><font color="#E5E5E5"> can question</font><font color="#CCCCCC"> if you guys have</font>

558
00:24:54,440 --> 00:25:00,580
questions thanks everybody

