1
00:00:04,690 --> 00:00:26,560
so our net our last talk for today is
called 99 problems by virus enjoy

2
00:00:31,390 --> 00:00:43,960
ok so this talk is a so I for my job i'm
a i'm a red team operator / penetration

3
00:00:43,960 --> 00:00:48,460
testers so I do a lot of breaking into
things but the way that I get paid to

4
00:00:48,460 --> 00:00:51,519
break into things is usually a little
different than your standard pentest

5
00:00:51,519 --> 00:00:56,769
your standard engagement is going to be
you know looking for vulnerabilities or

6
00:00:56,769 --> 00:01:00,159
analyzing software and looking for flaws
and things like that and a lot of the

7
00:01:00,159 --> 00:01:05,920
stuff that I get paid to do is basically
simulated espionage so it's it's a lot

8
00:01:05,920 --> 00:01:11,620
less running Nessus and a lot more
fishing my way into a power company and

9
00:01:11,620 --> 00:01:16,450
staying in-network for two months and
trying to figure out how to turn

10
00:01:16,450 --> 00:01:24,340
something off or how to make financial
decisions as the CEO because I can

11
00:01:24,340 --> 00:01:28,600
figure out weaknesses within his family
like I know where his daughter goes to

12
00:01:28,600 --> 00:01:31,630
school I know that his wife is cheating
with these kind of things that elected

13
00:01:31,630 --> 00:01:35,679
to get to that ability so it's very
similar to the things that actual spy

14
00:01:35,680 --> 00:01:39,940
actors do and as such the software has
to be the same and gotta roll my own and

15
00:01:39,940 --> 00:01:44,740
since i'm not the NSA with a room full
of people that i can pay to do my

16
00:01:44,740 --> 00:01:45,550
bidding

17
00:01:45,550 --> 00:01:49,870
I have to write my own so this talk is
basically about just the technical flaws

18
00:01:49,870 --> 00:01:52,900
involved in writing that software and
how a lot of it especially when you try

19
00:01:52,900 --> 00:01:57,910
to make it multi-platform or more right
spread or actually use it to perform

20
00:01:57,910 --> 00:02:01,630
intelligence-gathering tasks as opposed
to look I got a shell is actually two

21
00:02:01,630 --> 00:02:06,190
monster be more difficult and more
involved than just leveraging and

22
00:02:06,190 --> 00:02:06,570
explore

23
00:02:06,570 --> 00:02:10,679
so disclaimer we're talking about
technical techniques here we're not

24
00:02:10,679 --> 00:02:13,860
talking about the moral implication of
using them you are responsible for what

25
00:02:13,860 --> 00:02:18,120
you do not me i'm just talking about
tech right you choose to use it to do

26
00:02:18,120 --> 00:02:24,600
something shady that is not my fault i'm
going to point at you and laugh so rule

27
00:02:24,600 --> 00:02:31,859
number one the job of spyware is to spy
there's it seems to be this disconnect

28
00:02:31,860 --> 00:02:35,700
and in like the informal hacking
community that gets really excited about

29
00:02:35,700 --> 00:02:38,190
what got a shell

30
00:02:38,190 --> 00:02:44,760
alright great shells shells are fun but
shells are ways to do things their their

31
00:02:44,760 --> 00:02:49,170
methods of influence methods of
gathering information that good did I

32
00:02:49,170 --> 00:02:52,829
used to work at a guy Chris gates you
have a favorite saying route is only the

33
00:02:52,830 --> 00:03:01,050
beginning right so the goal is simple in
terms of any of this activity and it is

34
00:03:01,050 --> 00:03:05,190
kind of espionage e type of stuff get as
much data as you possibly can without

35
00:03:05,190 --> 00:03:09,150
being caught because pretty much as soon
as your target knows that you're

36
00:03:09,150 --> 00:03:13,230
listening your office basically blown
and there are lots of pitfalls to that

37
00:03:13,230 --> 00:03:21,780
so first of all memory corruption really
really makes things inconsistent so all

38
00:03:21,780 --> 00:03:24,989
these fancy bugs that we hear about
coming out of like spy agencies and

39
00:03:24,989 --> 00:03:29,430
stage fright heartbleed all these crazy
stuff yeah that's that's great and fun

40
00:03:29,430 --> 00:03:33,299
to use at home and mess around and you
know ty a bunch of exotic things

41
00:03:33,299 --> 00:03:37,530
together and if you actually have an
army of people who can tailor your

42
00:03:37,530 --> 00:03:41,579
implant exactly the target that you want
an awesome but most of us don't have

43
00:03:41,579 --> 00:03:45,600
that where maybe like one two three
people depending on how big your hacker

44
00:03:45,600 --> 00:03:49,320
crew is and things like memory
corruption or frankly dangerous because

45
00:03:49,320 --> 00:03:53,970
usually they break in the wild pervert
of its it's always safer to just log in

46
00:03:53,970 --> 00:03:59,760
and use a password disc rights are to be
avoided at all costs because that's how

47
00:03:59,760 --> 00:04:04,078
AV and everything else that catches you
works haha they all look for write to

48
00:04:04,079 --> 00:04:07,019
disk so avoid them as possible

49
00:04:07,019 --> 00:04:10,230
anything that triggers an event so if
you're going after a large organization

50
00:04:10,230 --> 00:04:15,190
things like loggers or syscall dumps if

51
00:04:15,190 --> 00:04:20,019
have external event systems if they have
backups and sometimes the back backups

52
00:04:20,019 --> 00:04:25,750
are hashed and rehashed changes that
alternative anything that is going to

53
00:04:25,750 --> 00:04:30,160
anything that alerts a monitoring party
that a change has happened something to

54
00:04:30,160 --> 00:04:35,230
be avoided this also includes things
like network volume and cpu load if your

55
00:04:35,230 --> 00:04:41,890
phone suddenly starts eating all the
battery you notice right if suddenly I

56
00:04:41,890 --> 00:04:45,820
mean how many people have everybody in
this remembered something is used a

57
00:04:45,820 --> 00:04:50,260
torrent before right all of you know
when you stop downloading and starts

58
00:04:50,260 --> 00:04:53,110
eating right because you're on netflix
and you're like fuck it doesn't work

59
00:04:53,110 --> 00:04:55,840
then you go yeah i'm downloading that
thing

60
00:04:55,840 --> 00:04:58,840
yeah

61
00:04:59,530 --> 00:05:04,090
visible changes to the UI obviously
don't have malware on the desktop for

62
00:05:04,090 --> 00:05:06,250
the most part i have done it and watch
it work

63
00:05:06,250 --> 00:05:10,660
people are silly home reverse
engineering is an ever-present threat

64
00:05:10,660 --> 00:05:15,460
anything you do online somebody
somewhere at some point in time is going

65
00:05:15,460 --> 00:05:16,150
to find it

66
00:05:16,150 --> 00:05:19,179
they're going to reverse it if it's any
good if they don't reverse it it's

67
00:05:19,180 --> 00:05:23,110
probably because it was born right and
this isn't just digital systems this is

68
00:05:23,110 --> 00:05:26,200
in general like everything we know about
spying we know because on a long enough

69
00:05:26,200 --> 00:05:29,919
timeline the survival rate of anything
goes to 0 and that includes intelligence

70
00:05:29,919 --> 00:05:33,400
tactics i mean if you really want to
know about what your spy agency next

71
00:05:33,400 --> 00:05:36,580
door is doing to you right now but read
history book guarantee you they're using

72
00:05:36,580 --> 00:05:41,200
the same tactics is only slightly
different technology so deal they are

73
00:05:41,200 --> 00:05:45,550
once your target suspect your existence
you lose your office blown at that point

74
00:05:45,550 --> 00:05:47,860
they're looking for you and you're
playing a very different game of cat and

75
00:05:47,860 --> 00:05:51,090
mouse

76
00:05:51,090 --> 00:05:57,750
so like said rule number one steal as
many things as you can more data is

77
00:05:57,750 --> 00:05:59,520
always better

78
00:05:59,520 --> 00:06:03,990
whatever your goal is from your
simulated espionage for you no answer

79
00:06:03,990 --> 00:06:07,110
plausible deniability message here home

80
00:06:07,110 --> 00:06:10,620
let's fail you're doing science right i
mean you're doing data categorization

81
00:06:10,620 --> 00:06:15,180
you're doing Association you're you're
doing analysis these are all forms of

82
00:06:15,180 --> 00:06:18,150
science science needs data the more data
you have the more science you can do

83
00:06:18,150 --> 00:06:21,150
very simple

84
00:06:22,020 --> 00:06:30,419
that being said data science is hard
it's it's hard to figure out if turns

85
00:06:30,419 --> 00:06:36,090
into a plausible example if you wanna
let's say get physical access to

86
00:06:36,090 --> 00:06:38,099
accompany any company

87
00:06:38,100 --> 00:06:41,940
well the first thing that it's probably
easier to do is to figure out before you

88
00:06:41,940 --> 00:06:46,080
figure out how to blend in or badging
access or any of that you want to know

89
00:06:46,080 --> 00:06:50,010
for example what entrance do they use
well that's probably marked an employee

90
00:06:50,010 --> 00:06:54,479
manual somewhere that means you have to
get it so you may be stuck going through

91
00:06:54,479 --> 00:06:58,169
a company wiki depending on the size of
the company that is $OPERAND terabytes

92
00:06:58,169 --> 00:07:02,130
of data and some of its old some of its
been overwritten some of its incomplete

93
00:07:02,130 --> 00:07:07,380
and their human so they all know yeah we
don't use that one we use this other one

94
00:07:07,380 --> 00:07:11,430
or that's old we use this other data or
this is the documented version that you

95
00:07:11,430 --> 00:07:15,539
need to go look up and this is the way
that we trade it doing that type of

96
00:07:15,539 --> 00:07:21,840
analysis is is hard and and you as a
person without a team of people to do

97
00:07:21,840 --> 00:07:26,638
that analysis it's very important that
when building your tooling that you tool

98
00:07:26,639 --> 00:07:32,310
towards that because it's going to be
very difficult automation is king and

99
00:07:32,310 --> 00:07:36,900
hacker tools do not automate like good

100
00:07:37,409 --> 00:07:40,589
the thing that led me down the path to
writing some of the stuff that led to

101
00:07:40,589 --> 00:07:44,819
this talk is entirely because of the
failure of other tools under scale how

102
00:07:44,819 --> 00:07:47,580
many and you have having here have ever
used metasploit before

103
00:07:47,580 --> 00:07:51,989
all right what's the maximum number of
shells you've ever sent the metasploit

104
00:07:51,989 --> 00:08:01,919
at one time but more than five anybody
more than 10 more than a hundred yeah

105
00:08:01,919 --> 00:08:10,498
depending on the most i've ever gotten
through a single instance is somewhere

106
00:08:10,499 --> 00:08:17,789
around 300 and that was on a machine
with almost a terabyte of ram and I got

107
00:08:17,789 --> 00:08:22,199
to maybe like the bottom 10 percentage
of that for about 20 minutes and the

108
00:08:22,199 --> 00:08:29,309
whole thing shat the bed tooling start
taking that to a tropical conclusion

109
00:08:29,309 --> 00:08:35,879
scale is hard running two hundred shells
through a single meterpreter instance is

110
00:08:35,879 --> 00:08:40,050
one thing having a database that can
hold all the data is another having a

111
00:08:40,049 --> 00:08:43,380
load balancer that doesn't crap out or
doesn't advertise your presence being

112
00:08:43,380 --> 00:08:47,639
able to move through vulnerable IP
addresses about sacrificing volume these

113
00:08:47,639 --> 00:08:52,740
are all things you have to think about
in terms of scale and unlike a classical

114
00:08:52,740 --> 00:08:58,980
you know dr. wielding webadmin when your
IP gets caught you have to pick up and

115
00:08:58,980 --> 00:09:02,880
move it you can't just stick stuff in
front of it you can't just go pay more

116
00:09:02,880 --> 00:09:08,550
money and buy more space the you you
basically have to do all the work of a

117
00:09:08,550 --> 00:09:13,439
typical devops engineer and all the
mobility of a technical spy crafter as

118
00:09:13,439 --> 00:09:22,170
one person multi-platform is required so
required because i guarantee you in the

119
00:09:22,170 --> 00:09:28,889
wild you know right like that's like I'm
very politically incorrect in case that

120
00:09:28,889 --> 00:09:31,030
wasn't clear

121
00:09:31,030 --> 00:09:36,850
huh fuck you're safe space where i teach
you don't like it leave

122
00:09:38,500 --> 00:09:48,070
uh-huh yeah multi-platform is a thing
because medical it's a great example of

123
00:09:48,070 --> 00:09:51,910
how it works great until you get a shell
on a security camera and it runs in MIPS

124
00:09:51,910 --> 00:09:59,350
know fucking well yeah definitely
something to keep in mind you are a

125
00:09:59,350 --> 00:10:03,010
human you have to use your own tools if
your tools are hard to use you want to

126
00:10:03,010 --> 00:10:04,060
use them

127
00:10:04,060 --> 00:10:08,439
this is important if you get some crazy
all day and it takes you 20 minutes of

128
00:10:08,440 --> 00:10:11,440
command line trying to fire it up and
guarantee you'll never use it because

129
00:10:11,440 --> 00:10:15,310
the opportunity to launch it is going to
be faster you're going to get an alert

130
00:10:15,310 --> 00:10:19,119
on something you're going to get a
successful fish and it'll die once in

131
00:10:19,120 --> 00:10:21,850
the middle of you trying to deploy and
guarantee you your human you'll never

132
00:10:21,850 --> 00:10:26,440
use it again and you shouldn't because
at that point it's not effective tools

133
00:10:26,440 --> 00:10:29,560
are hybrid of capability and usability
it is important to remember the

134
00:10:29,560 --> 00:10:36,400
usability piece and we're all nerds we
have a tendency to forget that what I

135
00:10:36,400 --> 00:10:39,400
put the image in there let me read my
notes

136
00:10:41,970 --> 00:10:43,310
if my brother

137
00:10:43,310 --> 00:10:49,670
in order i remember i put this in there
as part of your UI centralization is

138
00:10:49,670 --> 00:10:54,319
going to be important if you have 20
shells on 20 different ip's and you

139
00:10:54,320 --> 00:10:58,610
decide that you want to use all of them
to go after a target that lets say is

140
00:10:58,610 --> 00:11:03,920
moving i did a job once where the goal
was for lack of more information for

141
00:11:03,920 --> 00:11:10,910
obvious reasons to compromise a system
that was hooked to a network on a truck

142
00:11:10,910 --> 00:11:16,670
and the truck was constantly moving on
the country so i had a bunch of shells

143
00:11:16,670 --> 00:11:21,229
on the grid systems that communicated
his truck as it went from place to place

144
00:11:21,230 --> 00:11:24,680
but I didn't know where the truck was
and for life of more explanation

145
00:11:24,680 --> 00:11:28,670
predicting where the truck was going to
be was more or less impossible at one

146
00:11:28,670 --> 00:11:35,300
point I gotta show on the truck now how
do i not lose the shell I did it but the

147
00:11:35,300 --> 00:11:38,449
way that I did it is i ended up having
to tool a very centralized control

148
00:11:38,450 --> 00:11:40,940
mechanism for something that should have
been very simple and it took three days

149
00:11:40,940 --> 00:11:45,589
huh

150
00:11:45,589 --> 00:11:49,400
so now I the rest is talking mostly just
going to talk about tactics for

151
00:11:49,400 --> 00:11:56,569
achieving all those things at the end i
have a sample kind of spyware piece that

152
00:11:56,570 --> 00:12:01,790
i have been using on soon on some recent
engagements and i have one engagement

153
00:12:01,790 --> 00:12:06,199
that's using it currently in still under
development so I'm not going to ask that

154
00:12:06,200 --> 00:12:09,440
the recording not record that portion
but they will show it to everyone in the

155
00:12:09,440 --> 00:12:13,940
room at least in pieces but the code
will not be public for a while I might

156
00:12:13,940 --> 00:12:18,080
drop it in a few months but there's
nothing really secret in it doesn't use

157
00:12:18,080 --> 00:12:20,870
any vulnerabilities or exploits or
anything and actually most of the code

158
00:12:20,870 --> 00:12:25,670
is frankly borrowed from stackoverflow
it's just all cobbled together in a

159
00:12:25,670 --> 00:12:31,670
pretty little package and its cross
compatible so the first the first method

160
00:12:31,670 --> 00:12:35,780
like I said now you you want to stay in
as long as possible you want to be as

161
00:12:35,780 --> 00:12:38,540
invisible as possible we don't describe
so that means staying in memory

162
00:12:38,540 --> 00:12:44,449
persistence is key and persistence
without describes means in memory

163
00:12:44,450 --> 00:12:50,029
persistence so the best probably the
best documented way to do that for sands

164
00:12:50,029 --> 00:12:52,160
a lot of other explanation is probably a

165
00:12:52,160 --> 00:12:55,699
shared object injection so there are a
lot of ways to do shared objects

166
00:12:55,699 --> 00:12:59,779
injection on linux probably the most one
of the more stable ways although it is

167
00:12:59,779 --> 00:13:03,379
kinda loud if you've got things like
sysinternals and Angie are you installed

168
00:13:03,379 --> 00:13:08,930
is that the Patriots method so basically
you take a process and you you pause

169
00:13:08,930 --> 00:13:13,339
that process usually set debug but you
pause that process and you use a

170
00:13:13,339 --> 00:13:22,250
function called ptrace which is designed
to manipulate callbacks to certain

171
00:13:22,250 --> 00:13:25,279
standard functions and linux usually for
the purposes of debug but you can use it

172
00:13:25,279 --> 00:13:27,230
for whatever you want

173
00:13:27,230 --> 00:13:32,360
so one of the things you can do is you
take the pointer you find the exception

174
00:13:32,360 --> 00:13:36,589
function the thing that is supposed to
my god something broke cause an

175
00:13:36,589 --> 00:13:40,550
exception in ptrace there it has its own
exception handler what you can do is you

176
00:13:40,550 --> 00:13:44,779
can change that exception handler to
your own function and then you set the

177
00:13:44,779 --> 00:13:48,470
IP is 0 basically set the stack pointer
to zero which means as soon as you hit

178
00:13:48,470 --> 00:13:55,100
resume you're going to force a a no
execution which is going to cause a

179
00:13:55,100 --> 00:13:58,699
break and then peter is going to execute
going to call your function and then you

180
00:13:58,699 --> 00:14:03,019
pause it at the end of that you you know
set it back to you set your process back

181
00:14:03,019 --> 00:14:06,259
to the way that was and you continue and
so that function is where you hide your

182
00:14:06,259 --> 00:14:13,430
your special sauce very similar-looking
syscalls this works on every operating

183
00:14:13,430 --> 00:14:16,758
system and I've got some other slides
that have some some details on how to do

184
00:14:16,759 --> 00:14:24,319
it basically on linux the colonel is a
giant blob of functionality and

185
00:14:24,319 --> 00:14:28,040
everything else that works eventually
boils down to that functionality and

186
00:14:28,040 --> 00:14:32,060
that functionality is defined as a
series of syscalls write execute its era

187
00:14:32,060 --> 00:14:36,109
those calls are stored in a standard
table and basically you can pause the

188
00:14:36,110 --> 00:14:39,019
process and then you can go on that
process and find the system table and go

189
00:14:39,019 --> 00:14:42,559
every time you call this is called don't
call my function instead you like men

190
00:14:42,559 --> 00:14:45,589
middle

191
00:14:45,590 --> 00:14:50,870
and beyond that I mean there's a bunch
of other injection tactics that you can

192
00:14:50,870 --> 00:14:55,220
do inside else because else are
relatively poorly designed but they're

193
00:14:55,220 --> 00:15:01,190
much better documented than PE zor OSX
we'll get to that later but frankly to

194
00:15:01,190 --> 00:15:03,890
do anything useful on linux you probably
have to be rude anyway and if you're

195
00:15:03,890 --> 00:15:04,310
rude

196
00:15:04,310 --> 00:15:08,329
hide your stuff on the colonel no one
will look yeah I love you claiming like

197
00:15:08,330 --> 00:15:14,540
a thread security and I'm Alice mod and
I can see it and nobody does that shit

198
00:15:14,540 --> 00:15:18,110
nobody you pop a web server you had a
kernel module there you can do none of

199
00:15:18,110 --> 00:15:23,930
the fancy making sure that things don't
you know list an LS modern modifying the

200
00:15:23,930 --> 00:15:26,959
ls binary to inform or your process and
you don't have to do any of that stuff I

201
00:15:26,960 --> 00:15:34,100
guarantee you nobody looks so on Windows
shared object injection is DLL injection

202
00:15:34,100 --> 00:15:35,990
so the easiest ways to do this

203
00:15:35,990 --> 00:15:39,950
these are great right so there's this is
the first one this is a registry key

204
00:15:39,950 --> 00:15:47,030
called a PLL happened dll is a registry
key that is by default blank and if you

205
00:15:47,030 --> 00:15:50,660
set it to a place on the file system
every single time any program in the

206
00:15:50,660 --> 00:15:55,939
entire computer loads user32.dll which
is the windows api it will also load

207
00:15:55,940 --> 00:16:03,200
your dll done persistence over this is
another member registry call that will

208
00:16:03,200 --> 00:16:05,900
do exactly the same thing every time
user logs in

209
00:16:05,900 --> 00:16:08,870
so then you get context sensitive data
which is good because remember steal

210
00:16:08,870 --> 00:16:15,920
everything so context ski it enables us
to index this is kind of the more

211
00:16:15,920 --> 00:16:19,219
traditional way that's the way like
metasploit and all the other kind of

212
00:16:19,220 --> 00:16:20,900
available tools that are out there do it

213
00:16:20,900 --> 00:16:28,340
I you basically pause a process you
create a remote thread and you well you

214
00:16:28,340 --> 00:16:32,960
create a thread you put your shared
object in your thread and you point to

215
00:16:32,960 --> 00:16:35,990
it and your reason the process and
there's like a horse tack thing but it's

216
00:16:35,990 --> 00:16:38,990
super well-documented I'm not gonna get
into it you can totally google it

217
00:16:40,010 --> 00:16:43,819
this I didn't even know until i started
researching this talk

218
00:16:44,660 --> 00:16:49,579
apparently you can just do set like
Cisco like the linux stuff that i just

219
00:16:49,580 --> 00:16:50,339
talked about with

220
00:16:50,339 --> 00:16:53,519
we'll be running so apparently you can
do that on windows to you can just go I

221
00:16:53,519 --> 00:16:57,360
want to hook this and it goes ok had no
idea

222
00:16:58,079 --> 00:17:02,069
Seth red context is a little more exotic
with its kind of fun

223
00:17:02,069 --> 00:17:05,789
it's a little older it was more popular
like the 98 days because you didn't have

224
00:17:05,789 --> 00:17:12,029
some of the long let's just say the
stack changed so separate context is

225
00:17:12,029 --> 00:17:17,459
where you walk into a process and you
suspend all the threads so everything is

226
00:17:17,459 --> 00:17:23,250
paused and then you add a thread and
then you change the context of the

227
00:17:23,250 --> 00:17:28,349
program to include all the functions
except yours and what happens is then

228
00:17:28,349 --> 00:17:31,889
you resume the all those threads when
you resume the threads anything that

229
00:17:31,890 --> 00:17:36,299
doesn't have a fancy flag in memory that
says this is part of the actual

230
00:17:36,299 --> 00:17:39,809
programming not shared object windows
basically assumes a shared object and

231
00:17:39,809 --> 00:17:46,200
now you're in shared object space deal
every direction it can be done in memory

232
00:17:46,200 --> 00:17:50,700
you can find a pointer to a shared
object and just move it and say . online

233
00:17:50,700 --> 00:17:54,390
instead on modern implementations
they're getting very very good about

234
00:17:54,390 --> 00:17:59,520
cracking down on that because it's easy
to see and because it was used a lot and

235
00:17:59,520 --> 00:18:07,740
yeah it still works but it's dangerous
but it can also be done on disk where

236
00:18:07,740 --> 00:18:11,190
you can this got really popular after a
while you can

237
00:18:11,190 --> 00:18:14,520
there was a standard I think there's a
patch for it now in Windows but there

238
00:18:14,520 --> 00:18:17,730
was a there was a standard
implementation flaw where you could take

239
00:18:17,730 --> 00:18:22,649
a dll and stick it in a and the same
folder for the program and it was the

240
00:18:22,649 --> 00:18:25,469
same name is something that I thought it
was supposed to load unless that program

241
00:18:25,470 --> 00:18:28,860
is patched against it we just loaded in
memory so it's kind of cool

242
00:18:30,630 --> 00:18:33,530
LD preload is a

243
00:18:33,530 --> 00:18:41,000
a a trick on linux where you can say
before you load this library load my

244
00:18:41,000 --> 00:18:44,300
library instead before you load this
function call this function so you can

245
00:18:44,300 --> 00:18:47,540
man the middle functions it's really
good for debug actually but it obviously

246
00:18:47,540 --> 00:18:48,920
can be used for surveillance

247
00:18:48,920 --> 00:18:55,550
it's also really good for cheating on
games and then dl the answer libraries

248
00:18:55,550 --> 00:19:00,440
is the same thing as it's just on OSX
that's how a sex does it there are some

249
00:19:00,440 --> 00:19:05,300
slightly different rules about things
you can do on dld but Apple has

250
00:19:05,300 --> 00:19:08,840
different rules about everything because
cocoa and cocoa is a horrible invention

251
00:19:08,840 --> 00:19:14,840
process migration is probably the most
aggressive form of in-memory persistence

252
00:19:14,840 --> 00:19:19,760
you basically just pause the process you
dip into the Assembly of the program and

253
00:19:19,760 --> 00:19:23,000
you put your own shit in there you just
move everything around hopefully you do

254
00:19:23,000 --> 00:19:25,940
that without braking program there's a
bunch of ways to do that and probably

255
00:19:25,940 --> 00:19:30,980
the most elegant solutions do that but
you have to get everything right because

256
00:19:30,980 --> 00:19:34,430
otherwise obviously you're probably
going to get a super-hard system crash

257
00:19:34,430 --> 00:19:38,210
and the user is going to notice and be
like what the fuck

258
00:19:39,950 --> 00:19:47,330
or there's really dirty ways to do stuff
you can just modify a library or modify

259
00:19:47,330 --> 00:19:52,730
an application and / kill then started
again this works really well on web

260
00:19:52,730 --> 00:19:58,190
servers because sometimes web servers go
down and the DevOps standard philosophy

261
00:19:58,190 --> 00:20:01,370
of oh my god my web server keeps
crashing is put a load balancer in front

262
00:20:01,370 --> 00:20:05,360
of it which is great is that means that
there's 20 web servers and I had one of

263
00:20:05,360 --> 00:20:08,659
them and one of them goes down for 10
seconds and then comes back up they

264
00:20:08,660 --> 00:20:16,550
usually go don't care you can do the
same thing with libraries and their

265
00:20:16,550 --> 00:20:21,620
shared objects so on memory persistence
which usually for true persistent you're

266
00:20:21,620 --> 00:20:24,080
going to have to do at some point
obviously there's a trade-off here

267
00:20:24,080 --> 00:20:27,560
between you know staying stealthy and
maintaining access

268
00:20:30,600 --> 00:20:35,879
so all of the ways that don't require
getting into the system internals of

269
00:20:35,880 --> 00:20:40,380
whatever your target is where you're
just gonna modify a binary or modify a

270
00:20:40,380 --> 00:20:45,960
library i highly recommend just going
and reading this source code

271
00:20:45,960 --> 00:20:48,840
Josh pits is an amazingly smart
individual we've worked together on a

272
00:20:48,840 --> 00:20:52,379
couple of other projects and this is
kind of his life pet projects get you

273
00:20:52,380 --> 00:20:54,390
know the key is the you know

274
00:20:54,390 --> 00:21:02,309
HD Moore is to medicine boy as he is to
this and it supports I'd like some like

275
00:21:02,309 --> 00:21:07,678
25 odd binary types and it's very
straightforward you like shellcode and

276
00:21:07,679 --> 00:21:12,659
you go back to factory some shellcode
this yellow and it goes ok and coasted

277
00:21:12,659 --> 00:21:17,010
through the dll level or the exe or
whatever and it looks for things that

278
00:21:17,010 --> 00:21:20,460
are called caves cold caves are anywhere
in the program where there is a jump to

279
00:21:20,460 --> 00:21:23,250
somewhere and at some point it will jump
back

280
00:21:23,250 --> 00:21:26,909
hypothetically what it does is it says
oh that jump to somewhere as a co cave

281
00:21:26,909 --> 00:21:30,059
so it modifies the program where takes
your code sticks at the bottom and goes

282
00:21:30,059 --> 00:21:36,330
jump to me now jump back done and it
works it works on everything

283
00:21:36,330 --> 00:21:39,928
it's it's super fast and now it has like
proxy mode so you can run it is like a

284
00:21:39,929 --> 00:21:43,320
web server and you can just farm
executables through it and it will

285
00:21:43,320 --> 00:21:46,289
backdoor them as they come down you can
read it as a service which is really fun

286
00:21:46,289 --> 00:21:52,470
she gonna do things like a run a better
kapoor run a SL man-in-the-middle

287
00:21:52,470 --> 00:21:55,650
proxies and anytime anybody gets an
update that's not signed it will inject

288
00:21:55,650 --> 00:21:56,520
on there

289
00:21:56,520 --> 00:22:00,990
it also has a bunch of stuff on the
windows side for auto reading depth

290
00:22:00,990 --> 00:22:02,730
protected system so you can tell it

291
00:22:02,730 --> 00:22:06,690
here's a folder full of DLLs find me one
that's not depth and inject into there

292
00:22:06,690 --> 00:22:13,980
and then i'll go alright let me take
care of that there's also a lot more

293
00:22:13,980 --> 00:22:18,870
visible ways that you can do so if you
can solve windows service which I don't

294
00:22:18,870 --> 00:22:23,820
know why every AV and the world doesn't
catch installed services i mean most of

295
00:22:23,820 --> 00:22:26,730
them do if you're really stupid about it
and you're using like a garden-variety

296
00:22:26,730 --> 00:22:30,960
either black hat payload you picked up
off the onion or using metasploit but

297
00:22:30,960 --> 00:22:34,650
honestly like you tweak about you tweak
a binary just a little bit you install a

298
00:22:34,650 --> 00:22:36,179
windows service from a command

299
00:22:36,179 --> 00:22:39,059
oh and just it doesn't even believe I
don't I don't know why it still works

300
00:22:39,059 --> 00:22:40,019
but it totally does

301
00:22:40,019 --> 00:22:45,059
Kron obviously I you know hope most of
you know what Ron is it's the clock and

302
00:22:45,059 --> 00:22:53,759
Linux you can add a cronjob launch HD is
basically Chronicles X school and then I

303
00:22:53,759 --> 00:22:58,169
already talked about the LLB direction
how can be done on a disk can also be

304
00:22:58,169 --> 00:23:02,639
that memory can also be done by patching
registry values 2.2 different DLLs

305
00:23:02,639 --> 00:23:10,289
there's all kinds of capabilities you
can also be really lame and these this

306
00:23:10,289 --> 00:23:13,559
is pretty much the way every pentester
gets into every system right now and

307
00:23:13,559 --> 00:23:17,039
like the white hat grey hat context this
should not work

308
00:23:17,549 --> 00:23:24,539
this is like go look in this folder OG
leak that exe is there why is it there

309
00:23:25,080 --> 00:23:28,740
turns out nobody wants this stuff
totally works you can just go into all

310
00:23:28,740 --> 00:23:32,340
users startup you can add things you can
go so that the reason there's this two

311
00:23:32,340 --> 00:23:40,350
different options there on the slide is
because the top one will work anytime I

312
00:23:40,350 --> 00:23:44,549
remember that one works anytime that the
computer boots up and another one and

313
00:23:44,549 --> 00:23:48,389
always runs the system and the other one
runs anytime the personal logs into the

314
00:23:48,389 --> 00:23:52,469
computer i forget which is which but
same job you can add a line to the batch

315
00:23:52,470 --> 00:23:58,499
RC or the best profile or the seashell
RC or you can modify bash itself and

316
00:23:58,499 --> 00:24:02,999
stuff like that in it d is a fun one
because it's you know if you get rude

317
00:24:02,999 --> 00:24:06,990
it's easy enough to mess with most stuff
isn't requiring it but it's also static

318
00:24:06,990 --> 00:24:10,379
enough that most people are not manually
going in and changing there any scripts

319
00:24:10,379 --> 00:24:12,629
unless they're messing with the server
and if they are they're messing with

320
00:24:12,629 --> 00:24:18,600
that one because usually they're afraid
to break everything else doing a USB

321
00:24:18,600 --> 00:24:24,059
autorun and USB or in and back in a day
a cd-rom autorun scripts is actually

322
00:24:24,059 --> 00:24:30,600
really effective for context if you want
to write payloads that will Stuxnet

323
00:24:30,600 --> 00:24:35,730
style breach air gaps you can just say
anytime there's a USB run this payload

324
00:24:35,730 --> 00:24:36,630
and this payload will

325
00:24:36,630 --> 00:24:43,590
right thing to sunblock done also
network connections a half this is this

326
00:24:43,590 --> 00:24:49,050
is kind of fun so the the enterprise one
that most people will be familiar with

327
00:24:49,050 --> 00:24:52,320
is on windows there's this thing you
know going to you there's the domain and

328
00:24:52,320 --> 00:24:55,530
the domain has to feel file and you can
basically modify the domain to be that

329
00:24:55,530 --> 00:24:58,620
any time that anybody walks in and they
get the don't they get the domain file

330
00:24:58,620 --> 00:25:03,600
say run my payload but you can also do
all kinds of other context switching on

331
00:25:03,600 --> 00:25:07,649
other operating systems little snitch
for example is a pretty well-known

332
00:25:07,650 --> 00:25:14,340
network monitor and its really awesome
tool i'm gonna use it it a looks at all

333
00:25:14,340 --> 00:25:17,399
the traffic going in and out of your
computer and it lets you build

334
00:25:17,400 --> 00:25:22,740
completely customizable profiles as well
as some you know basic user interactions

335
00:25:22,740 --> 00:25:27,690
for any time that detect certain types
of traffic anytime you can get down to

336
00:25:27,690 --> 00:25:31,650
like the packet layer where anytime you
see a traffic looks like this or any

337
00:25:31,650 --> 00:25:35,520
time that you see this process and more
than this many packets within this

338
00:25:35,520 --> 00:25:39,510
amount of time and you can get really
detailed and lock down your machine with

339
00:25:39,510 --> 00:25:40,710
it which is awesome

340
00:25:40,710 --> 00:25:44,700
it also means you can add a rule that
says anytime you see this traffic run

341
00:25:44,700 --> 00:25:52,620
this oday beyond that there's a bunch of
super exotic ways that you can stay

342
00:25:52,620 --> 00:25:56,969
persistent memory and they're mostly
used by feds um a because they're really

343
00:25:56,970 --> 00:26:01,200
really labor-intensive to find without
talking about them on the internet and

344
00:26:01,200 --> 00:26:04,080
blowing them are even more
labor-intensive to develop because they

345
00:26:04,080 --> 00:26:08,820
usually involve some level of hardware
testing and hard work hard and then

346
00:26:08,820 --> 00:26:14,189
beyond that they're usually just
incredibly specific right i mean if you

347
00:26:14,190 --> 00:26:17,400
get a bug on a bios that lets you write
code on it's only going to work on that

348
00:26:17,400 --> 00:26:19,980
version of bios even if there are
several thousand of them in the world

349
00:26:19,980 --> 00:26:23,160
how do you know that your target is
going to have that by us before you pop

350
00:26:23,160 --> 00:26:28,170
your target there's a some
vulnerabilities out there for hiding in

351
00:26:28,170 --> 00:26:29,100
GPU memory

352
00:26:29,100 --> 00:26:32,459
this is kind of nice for persistence
because it's not typically checked and

353
00:26:32,460 --> 00:26:35,820
it doesn't involve technically a
disgrace it also typically has dma

354
00:26:35,820 --> 00:26:38,280
access so that's kind of cool if you
know that your target is going to use

355
00:26:38,280 --> 00:26:42,330
things that engage the pci bus a lot you
can have a GPU process that just writes

356
00:26:42,330 --> 00:26:46,290
back to itself typically quiet but again
incredibly targeted because there's lots

357
00:26:46,290 --> 00:26:47,549
of different CPUs out there

358
00:26:47,549 --> 00:26:52,049
there's been a lot of stories recently
in the news not recently but in general

359
00:26:52,049 --> 00:26:56,399
in the past few years in the news about
some major nation level actors hiding

360
00:26:56,399 --> 00:27:00,418
stuff in the microcontrollers on the
hard drives because the way that hard

361
00:27:00,419 --> 00:27:04,110
drives have to work there basically
blank slates and microcontrollers the

362
00:27:04,110 --> 00:27:07,110
only thing that actually knows where the
bits and bytes are on the platter or the

363
00:27:07,110 --> 00:27:12,209
chip or whatever so you can hide logic
in there there have been some

364
00:27:12,210 --> 00:27:16,799
vulnerabilities released four cpus
directly a particularly cool one that

365
00:27:16,799 --> 00:27:22,289
came out probably within the past ten
years is a Joan when of your last name

366
00:27:23,070 --> 00:27:31,408
yeah but what he said i don't know i'm
not russian I can't ship she had a bug

367
00:27:31,409 --> 00:27:36,960
that she dropped and i think was
canceled quest first where the l2 the

368
00:27:36,960 --> 00:27:42,600
layer 2 cache of the particular type of
xeon processor had a flaw and she

369
00:27:42,600 --> 00:27:47,369
figured out how to exploit the firmware
on the x86 chip and then write permanent

370
00:27:47,369 --> 00:27:52,080
code to the l2 cache so the malware was
in the cpu you could rip out the hard

371
00:27:52,080 --> 00:27:55,949
drive without the video card take all
the peripherals off and you know even

372
00:27:55,950 --> 00:27:58,830
swap the motherboard out and take that
chip and put it back in another thing

373
00:27:58,830 --> 00:28:04,470
and you're now we're still there so it's
pretty rad funny story there's actually

374
00:28:04,470 --> 00:28:08,580
a company based on that explains how
they wrote a hypervisor verifier and

375
00:28:08,580 --> 00:28:11,580
install it to the chip using the exploit
its kind of fun

376
00:28:12,269 --> 00:28:17,639
the Master Boot Record uh it's very
visible everybody tends to check it but

377
00:28:17,639 --> 00:28:21,840
if you can get rude enough to the system
that you're doing exploits like these

378
00:28:21,840 --> 00:28:25,649
that's probably the most accessible
thing to like us regular humans on the

379
00:28:25,649 --> 00:28:29,428
slide because it's pretty easy to just
turn AV off and then write to the NBR a

380
00:28:29,429 --> 00:28:35,340
lot of times there's hashing involved in
that but now with some of the UEFI bugs

381
00:28:35,340 --> 00:28:37,859
that are coming out in the way that the
UEFI interacts with the Master Boot

382
00:28:37,859 --> 00:28:40,439
Record it's actually getting easier to
do that because it's getting harder to

383
00:28:40,440 --> 00:28:46,889
hash them i have some I've used some MBR
stuff in the past and it's it tends to

384
00:28:46,889 --> 00:28:50,549
be relatively easy to massage

385
00:28:51,210 --> 00:28:58,590
in order to get access so you know what
you're in and you have all these

386
00:28:58,590 --> 00:29:07,168
listeners in place do you need to get
data right so remaining the best way to

387
00:29:07,169 --> 00:29:13,830
data-mine a client first is the browser
because humans pretty much live in their

388
00:29:13,830 --> 00:29:18,360
browsers with your browser its i'm
basically I basically have a seismograph

389
00:29:18,360 --> 00:29:19,678
for your life

390
00:29:19,679 --> 00:29:23,700
I know when you eat I probably know what
you eat because you look it up on the

391
00:29:23,700 --> 00:29:26,580
places you know where you're going and
going to help with the facebook and

392
00:29:26,580 --> 00:29:30,510
talking about the friends I know who you
eat with I know when you sleep because

393
00:29:30,510 --> 00:29:33,779
the activity is low i know what porn you
like I know when you watch your point I

394
00:29:33,779 --> 00:29:38,250
know how long you watch each video I
know what news you read I can change the

395
00:29:38,250 --> 00:29:41,789
news you read so if i want to start
doing psychological things I want you to

396
00:29:41,789 --> 00:29:44,730
be very depressed for a short amount of
time because it makes you unable to do a

397
00:29:44,730 --> 00:29:47,370
certain task if I want to keep you up
all night

398
00:29:47,370 --> 00:29:51,570
alright i can steal your facebook
password and pretend to be your friend

399
00:29:51,570 --> 00:29:54,299
and tell you I'm really thinking about
committing suicide and I have a two-hour

400
00:29:54,299 --> 00:29:57,389
conversation with you which makes you
tired at work which is a real good time

401
00:29:57,390 --> 00:30:01,649
for me to launch whatever but I want if
you're an admin all the really horrible

402
00:30:01,649 --> 00:30:06,928
dastardly movie level insanity level
human intelligence shit but you see

403
00:30:06,929 --> 00:30:11,520
people do in or that we hear about
people doing in meatspace is all the

404
00:30:11,520 --> 00:30:14,070
browser is the way to do it to people
over the Internet

405
00:30:14,070 --> 00:30:20,668
anything I can see I can replace I can
influence what you consume obviously the

406
00:30:20,669 --> 00:30:25,679
logical experts concluded you know
logical escalation from the browser is

407
00:30:25,679 --> 00:30:28,950
social media right social media is the
key to everything I can honey pot you i

408
00:30:28,950 --> 00:30:33,419
can change your travel day to make you
miss flights add flights that aren't

409
00:30:33,419 --> 00:30:33,870
there

410
00:30:33,870 --> 00:30:40,620
I can take baking information and make
purchases or donations to organizations

411
00:30:40,620 --> 00:30:44,250
known by third-party government
supporting terror and then I can

412
00:30:44,250 --> 00:30:49,380
leverage that as extortion and say do
what I want our report you to the FBI or

413
00:30:49,380 --> 00:30:54,720
Mossad I can you know Anonymous has been
known for

414
00:30:55,220 --> 00:31:00,200
using it to put a child porn on
recordable accounts and then you know

415
00:31:00,200 --> 00:31:05,450
Brandon Inge people it's Jane it's the
logical its logical conclusion and

416
00:31:05,450 --> 00:31:12,770
escalation of everything we talked about
with a browser stuff video and cameras

417
00:31:12,770 --> 00:31:17,179
so video on cameras are nice one notable
thing you can use them for is making

418
00:31:17,179 --> 00:31:19,190
false IDs as other people

419
00:31:19,190 --> 00:31:23,750
this works really well for me on clients
when I need to make a badge because I

420
00:31:23,750 --> 00:31:27,980
can pop a laptop and then take a cumshot
when they're not looking and even if

421
00:31:27,980 --> 00:31:30,919
they kind of think it's weird because I
turned on the only get once and now I've

422
00:31:30,919 --> 00:31:34,700
got a badge as that person with their
picture on it and I can tweak it works

423
00:31:34,700 --> 00:31:39,440
pretty well but usually I find the audio
is way more important video being able

424
00:31:39,440 --> 00:31:44,179
to listen to conversations for long
periods of time and mining those

425
00:31:44,179 --> 00:31:47,990
conversations for information and being
able to make links hearing people talk

426
00:31:47,990 --> 00:31:51,650
about the data that you're downloading
will answer all kinds of questions all I

427
00:31:51,650 --> 00:31:55,280
pop this wiki and its internal to this
organization and they're a bunch of

428
00:31:55,280 --> 00:32:03,379
activists so they keep it on tour and
they have these a policies and

429
00:32:03,380 --> 00:32:06,049
procedures on how they talk to each
other but i don't know if they really

430
00:32:06,049 --> 00:32:09,379
follow these procedures or if they're
just kinda lazy about it is the way they

431
00:32:09,380 --> 00:32:10,340
documented it

432
00:32:10,340 --> 00:32:13,250
well I hot like somebody's phone and
hear them talking about that wiki now I

433
00:32:13,250 --> 00:32:16,250
know yeah they actually do this part
they don't really do that part

434
00:32:19,710 --> 00:32:24,870
this when I didn't actually finish this
slide is supposed to be applied about

435
00:32:24,870 --> 00:32:28,830
metadata I don't really think I need to
go into it i mean there's enough stuff

436
00:32:28,830 --> 00:32:33,299
in the media I think we all know how GPS
locations and you know when you say

437
00:32:33,299 --> 00:32:40,350
whatever you say can be correlated into
scary and obviously you know more more

438
00:32:40,350 --> 00:32:42,209
more more more access right

439
00:32:42,210 --> 00:32:49,649
sshds VPN Jesus selkies I can key log
stuff I my favorite my favorite a key

440
00:32:49,649 --> 00:32:52,979
log is i love it everybody loves
password managers now because it's like

441
00:32:52,980 --> 00:32:57,149
the internet just figured out that likes
having shitty passwords is shitty and

442
00:32:57,149 --> 00:33:00,809
all of them have password managers now
like password managers that are

443
00:33:00,809 --> 00:33:02,760
encrypted are great

444
00:33:02,760 --> 00:33:06,990
yeah you know password managers are the
programs know what I just spent like 30

445
00:33:06,990 --> 00:33:14,190
slides explaining that backdoor program
helps but my favorite is yeah so i put

446
00:33:14,190 --> 00:33:18,090
this program and it's a keylogger and it
only runs for 10 seconds

447
00:33:18,090 --> 00:33:20,939
I stuck it in your LastPass and then I
waited for you to log into oh I don't

448
00:33:20,940 --> 00:33:24,960
know anything you type in the password
to your LastPass and I download the last

449
00:33:24,960 --> 00:33:32,789
past debates sweet now I have everything
is all in place so getting the data

450
00:33:32,789 --> 00:33:37,830
great now we have a whole bunch of data
volumes and volumes of data processing

451
00:33:37,830 --> 00:33:43,139
it is no easy task because we're not
armies of PhDs and if we had them that

452
00:33:43,140 --> 00:33:45,990
is a difficult problem that's a problem
so difficult that that's what most of

453
00:33:45,990 --> 00:33:49,950
our governments are spending all their
money right now there's a famous

454
00:33:49,950 --> 00:33:55,890
quarters a quote from robin williams
from one of his stand ups where he's at

455
00:33:55,890 --> 00:33:59,130
pretending to be different nationalities
and telling all these jokes and so one

456
00:33:59,130 --> 00:34:01,830
point is telling jokes about Russians
and you know being in the Russian

457
00:34:01,830 --> 00:34:04,678
government and he's like talking about
nuclear bombs because Russia we have

458
00:34:04,679 --> 00:34:09,060
many bombs we don't know where they all
are but we have many of right how

459
00:34:09,060 --> 00:34:12,149
replace bombs with data and you
basically have every modern Intelligence

460
00:34:12,149 --> 00:34:12,839
Agency

461
00:34:12,839 --> 00:34:15,839
oh my god they're building these giant
hard drives knew those are giant

462
00:34:15,839 --> 00:34:20,219
processors have hard drives for years
they have all this data sifting it in

463
00:34:20,219 --> 00:34:28,980
heart so I've actually had to kind of in
delve into the space because I've been

464
00:34:28,980 --> 00:34:30,469
on some engagements recently where

465
00:34:30,469 --> 00:34:34,250
I've had this problem was like oh man I
have all this data and i know that you

466
00:34:34,250 --> 00:34:37,790
know their stuff that I want in there
and I don't really know where is like

467
00:34:37,790 --> 00:34:41,719
there's terabytes of its all different
file formats some of its word document

468
00:34:41,719 --> 00:34:44,899
some of the old word document so i can't
just unzip them and browse them as xml

469
00:34:44,899 --> 00:34:50,270
accept the new word documents are videos
pictures password data random text files

470
00:34:50,270 --> 00:34:55,369
written by humans to make no sense like
it's just very difficult automate one of

471
00:34:55,369 --> 00:34:59,450
the ways I've had some luck is there's a
search program by Apache called solar

472
00:34:59,450 --> 00:35:04,549
and it's a very very very
well-documented to massive project it

473
00:35:04,550 --> 00:35:11,540
was denied it did it became the de facto
open source solution to building your

474
00:35:11,540 --> 00:35:16,609
own search engine but you can run it on
local data sets it can be kind of a pain

475
00:35:16,609 --> 00:35:21,109
in the ass to set up but once you set it
up there are some some great partners

476
00:35:21,109 --> 00:35:22,130
for it

477
00:35:22,130 --> 00:35:26,630
one of them is I think loosen air or the
scene think that's how you pronounce it

478
00:35:26,630 --> 00:35:30,859
and yeah there's some tiny little
friends one of them i can't remember the

479
00:35:30,859 --> 00:35:36,109
name of it but it's entirely in html5
and you can just set up an ass and or a

480
00:35:36,109 --> 00:35:40,040
drobo and throw a whole bunch of data in
there and then index it with solar and

481
00:35:40,040 --> 00:35:43,970
then you've gotta search window you can
just type passwords or you know if you

482
00:35:43,970 --> 00:35:48,618
get a name out of there you can type
going to Jeremy today comes up kinda

483
00:35:48,619 --> 00:35:55,400
useful if you are not doing things
you're worried about large organizations

484
00:35:55,400 --> 00:35:58,849
hearing you know you're not worried
about Crimea an engagement or something

485
00:35:58,849 --> 00:35:59,660
like that

486
00:35:59,660 --> 00:36:03,348
select is actually really awesome for
her

487
00:36:03,349 --> 00:36:07,640
hey logging tool so i recently did an
engagement where I was sitting with

488
00:36:07,640 --> 00:36:13,460
three people and we're popping a
relatively large organization and we're

489
00:36:13,460 --> 00:36:16,940
gonna work this is this is our chat and
it was awesome because anytime would get

490
00:36:16,940 --> 00:36:20,930
anything I can just drag-and-drop my
file and slack and I would have a time

491
00:36:20,930 --> 00:36:25,098
index of when i had it i have a comment
field to talk about how i got it

492
00:36:25,099 --> 00:36:30,609
I'd have a reference to conversation in
and around the object and a

493
00:36:30,609 --> 00:36:34,660
I'd get metadata around the object in
terms of size and type and then later on

494
00:36:34,660 --> 00:36:37,660
when the engagement was over and i
wanted to put these things in the report

495
00:36:37,660 --> 00:36:40,450
I've got searched throughout the entire
slap channel so i can go search for

496
00:36:40,450 --> 00:36:44,230
stuff and get the conversation around
the object and the actual file all in

497
00:36:44,230 --> 00:36:48,130
time delineating over it and then when
I'm done I just knew the channel it's

498
00:36:48,130 --> 00:36:52,569
actually pretty useful also there's an
API for slack so I'll one of the things

499
00:36:52,569 --> 00:36:52,960
out

500
00:36:52,960 --> 00:36:56,529
well i'm going to show that part yet
because because there's a thing in it

501
00:36:56,529 --> 00:36:59,950
i'm going to show that part yet but the
implants i'm gonna show you after we

502
00:36:59,950 --> 00:37:05,379
turn the cameras off when i show you the
catcher which is just a HTTP server just

503
00:37:05,380 --> 00:37:10,150
keep this in mind for later i also made
it talk back to slack super useful home

504
00:37:10,150 --> 00:37:13,269
talking talking talking and then a bunch
of shelves call back

505
00:37:13,269 --> 00:37:20,859
hey let's play with the show holds an
alternative to solar is orange orange is

506
00:37:20,859 --> 00:37:24,489
basically just a local open source on
actually know they're open source did

507
00:37:24,489 --> 00:37:28,299
not observe any way they are freely
available product basically the same

508
00:37:28,299 --> 00:37:33,519
thing a bunch of file parsers goes
through them as an indexable format if

509
00:37:33,519 --> 00:37:35,859
you have all the money in the world

510
00:37:35,859 --> 00:37:41,799
tableau is pretty much like Silicon
Valley solution to data indexing these

511
00:37:41,799 --> 00:37:45,940
days that obviously requires much more
tooling because you're everything is

512
00:37:45,940 --> 00:37:50,650
going down 2-1 browsable data format
which is csv but that's kind of the

513
00:37:50,650 --> 00:37:53,829
point right is you want to have
universal indexing then you have

514
00:37:53,829 --> 00:37:56,650
universal searching and access in
context and you can apply all the data

515
00:37:56,650 --> 00:38:00,249
science you want and if you really just
don't care about anybody else reading

516
00:38:00,249 --> 00:38:03,038
your data or if you figure out how to
anonymize it without getting caught

517
00:38:03,039 --> 00:38:08,589
yeah you can see all the academics
giggling in the room

518
00:38:10,030 --> 00:38:15,340
or of course you know good old-fashioned
regular linux tools

519
00:38:16,690 --> 00:38:20,410
it's really sad how many how many calls
I get in the middle of day from pretty

520
00:38:20,410 --> 00:38:24,520
accomplished testers who are like I got
this password dump it in this format i

521
00:38:24,520 --> 00:38:35,740
can't get into John like learn to grip
through for me art are in your basics so

522
00:38:35,740 --> 00:38:39,910
we'll get to the demo and I'm certainly
gonna take questions before we do that

523
00:38:39,910 --> 00:38:43,210
so that way there's get recorded and so
that the streamers have access to it but

524
00:38:43,210 --> 00:38:46,960
basically in conclusion you're targeting
humans don't study machines entirely

525
00:38:46,960 --> 00:38:47,710
study humans

526
00:38:47,710 --> 00:38:51,520
those are your targets don't reinvent
the wheel because tools exist out there

527
00:38:51,520 --> 00:38:54,160
figure out how to leverage limits you
will save time

528
00:38:54,160 --> 00:38:59,950
practice practice practice dev dev is
not easy for a reason and when you're

529
00:38:59,950 --> 00:39:03,460
diving for black hat tools you're
basically doing two jobs so you should

530
00:39:03,460 --> 00:39:08,260
prepare for it and if possible and
whatever your endeavor is if you can

531
00:39:08,260 --> 00:39:11,950
involve either multiple endpoints or
more specifically multiple people more

532
00:39:11,950 --> 00:39:13,029
brains are better than one

533
00:39:13,030 --> 00:39:21,359
so multiplayer when you can questions
invented that

534
00:39:21,359 --> 00:39:25,710
yeah

535
00:39:26,400 --> 00:39:33,029
the questions oh you want to see the
shell that's what it is our turn the

536
00:39:33,029 --> 00:39:34,020
cameras off the shelves

