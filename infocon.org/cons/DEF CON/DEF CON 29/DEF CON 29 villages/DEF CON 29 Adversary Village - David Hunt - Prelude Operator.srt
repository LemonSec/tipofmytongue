1
00:00:00,240 --> 00:00:03,679
hi everybody i'm david hunt today i'm

2
00:00:02,480 --> 00:00:06,720
going to be giving a tool

3
00:00:03,679 --> 00:00:08,559
demonstration about prelude operator the

4
00:00:06,720 --> 00:00:10,800
command and control center

5
00:00:08,559 --> 00:00:12,160
that allows you to quickly run security

6
00:00:10,800 --> 00:00:14,799
assessments on your network

7
00:00:12,160 --> 00:00:16,320
on your servers or even on user behavior

8
00:00:14,799 --> 00:00:19,199
of people within your network

9
00:00:16,320 --> 00:00:20,880
by way of introduction i'm the cto here

10
00:00:19,199 --> 00:00:23,279
at prelude research where i lead the

11
00:00:20,880 --> 00:00:25,439
team building the operator platform

12
00:00:23,279 --> 00:00:27,359
before prelude i spent a couple of years

13
00:00:25,439 --> 00:00:28,240
at mitre corporation here in washington

14
00:00:27,359 --> 00:00:29,599
dc

15
00:00:28,240 --> 00:00:31,279
maybe familiar with some of the work

16
00:00:29,599 --> 00:00:33,600
that i did where i built

17
00:00:31,279 --> 00:00:35,840
and designed the calvera framework which

18
00:00:33,600 --> 00:00:36,640
is an autonomous adversary emulation

19
00:00:35,840 --> 00:00:38,480
platform

20
00:00:36,640 --> 00:00:40,320
to fully open source and available on

21
00:00:38,480 --> 00:00:42,239
github

22
00:00:40,320 --> 00:00:43,680
before mitre i spent a couple of years

23
00:00:42,239 --> 00:00:46,239
at places like fireeye

24
00:00:43,680 --> 00:00:48,160
john deere rockwell collins variety of

25
00:00:46,239 --> 00:00:49,039
other defense contractors places within

26
00:00:48,160 --> 00:00:50,800
the ic

27
00:00:49,039 --> 00:00:52,559
as well as the consulting and the

28
00:00:50,800 --> 00:00:54,559
research spaces

29
00:00:52,559 --> 00:00:56,239
most of my career has been been spent on

30
00:00:54,559 --> 00:00:58,559
the offensive security side

31
00:00:56,239 --> 00:00:59,840
although i've kind of interwoven some

32
00:00:58,559 --> 00:01:02,000
system administration

33
00:00:59,840 --> 00:01:03,760
some software engineering and a little

34
00:01:02,000 --> 00:01:04,479
bit of defensive security depending on

35
00:01:03,760 --> 00:01:06,560
the role

36
00:01:04,479 --> 00:01:08,240
and the scenario that i was in all right

37
00:01:06,560 --> 00:01:09,040
let's dive right into the prelude

38
00:01:08,240 --> 00:01:11,040
operator

39
00:01:09,040 --> 00:01:13,159
and uh get to know this tool all right

40
00:01:11,040 --> 00:01:14,960
to get started we're going to go to the

41
00:01:13,159 --> 00:01:18,159
prelude.org website

42
00:01:14,960 --> 00:01:22,240
and head directly to the download page

43
00:01:18,159 --> 00:01:24,560
from here we can go ahead and download

44
00:01:22,240 --> 00:01:26,880
the operator platform for whichever

45
00:01:24,560 --> 00:01:29,280
operating system that i want to use

46
00:01:26,880 --> 00:01:30,000
at this point you're able to install

47
00:01:29,280 --> 00:01:32,320
operator

48
00:01:30,000 --> 00:01:33,040
the same way you would any other desktop

49
00:01:32,320 --> 00:01:34,799
application

50
00:01:33,040 --> 00:01:37,439
when you open operator up for the first

51
00:01:34,799 --> 00:01:40,159
time you'll be greeted with a login page

52
00:01:37,439 --> 00:01:43,200
that asks for your email

53
00:01:40,159 --> 00:01:43,200
go ahead and enter that in

54
00:01:43,840 --> 00:01:48,640
that will fire off an access token to

55
00:01:46,799 --> 00:01:50,560
your email so you can prove that you are

56
00:01:48,640 --> 00:01:52,640
in fact the owner of that address i'll

57
00:01:50,560 --> 00:01:54,880
go ahead and grab that now

58
00:01:52,640 --> 00:01:56,320
your authentication token will only be

59
00:01:54,880 --> 00:01:59,840
valid for 10 minutes

60
00:01:56,320 --> 00:01:59,840
so make sure you use that pretty quickly

61
00:02:00,399 --> 00:02:03,759
once you log in you'll be greeted with

62
00:02:02,479 --> 00:02:06,000
the dashboard

63
00:02:03,759 --> 00:02:07,759
from here you can get familiar with the

64
00:02:06,000 --> 00:02:09,440
different components that make up your

65
00:02:07,759 --> 00:02:11,440
command and control center

66
00:02:09,440 --> 00:02:13,280
so before we dive into those components

67
00:02:11,440 --> 00:02:15,520
let's take a quick second and describe

68
00:02:13,280 --> 00:02:16,800
exactly what this platform is intended

69
00:02:15,520 --> 00:02:19,840
to do

70
00:02:16,800 --> 00:02:21,840
so operator is a c2 which is

71
00:02:19,840 --> 00:02:23,440
a command and control center which

72
00:02:21,840 --> 00:02:25,920
allows you to run

73
00:02:23,440 --> 00:02:26,560
anywhere from fully autonomous to fully

74
00:02:25,920 --> 00:02:30,480
manual

75
00:02:26,560 --> 00:02:32,560
red team operations or penetration tests

76
00:02:30,480 --> 00:02:34,720
what this allows you to do beyond just

77
00:02:32,560 --> 00:02:36,959
the offensive security testing

78
00:02:34,720 --> 00:02:38,080
buzzword it allows you to test whether

79
00:02:36,959 --> 00:02:40,560
your defenses

80
00:02:38,080 --> 00:02:41,920
are appropriately configured it allows

81
00:02:40,560 --> 00:02:44,640
you to test your

82
00:02:41,920 --> 00:02:46,400
users behavior the employees within your

83
00:02:44,640 --> 00:02:47,760
network are they behaving correctly on

84
00:02:46,400 --> 00:02:49,920
their computers

85
00:02:47,760 --> 00:02:51,360
as their users are traditionally one of

86
00:02:49,920 --> 00:02:52,319
the biggest vulnerabilities within an

87
00:02:51,360 --> 00:02:54,319
organization

88
00:02:52,319 --> 00:02:55,519
it also allows you to test the networks

89
00:02:54,319 --> 00:02:58,720
the servers

90
00:02:55,519 --> 00:03:01,120
the privileges the configuration

91
00:02:58,720 --> 00:03:03,200
the implementation of the different

92
00:03:01,120 --> 00:03:05,440
defenses is your antivirus working is

93
00:03:03,200 --> 00:03:05,760
your edr configured appropriately and so

94
00:03:05,440 --> 00:03:09,280
on

95
00:03:05,760 --> 00:03:11,360
and so forth operator is not

96
00:03:09,280 --> 00:03:12,400
a vulnerability scanner this is not an

97
00:03:11,360 --> 00:03:15,280
anti-virus

98
00:03:12,400 --> 00:03:16,400
it is a tool for offensive security

99
00:03:15,280 --> 00:03:19,519
minded people

100
00:03:16,400 --> 00:03:21,200
to run security assessments

101
00:03:19,519 --> 00:03:23,360
okay to get started let's go ahead and

102
00:03:21,200 --> 00:03:25,280
minimize this top pane

103
00:03:23,360 --> 00:03:26,640
so give me a little bit more screen real

104
00:03:25,280 --> 00:03:28,159
estate the

105
00:03:26,640 --> 00:03:30,400
first thing that you'll notice is a

106
00:03:28,159 --> 00:03:32,319
blinking green dot down here this is

107
00:03:30,400 --> 00:03:34,799
meant to dry your eye in

108
00:03:32,319 --> 00:03:37,200
and when i click it it will show me a

109
00:03:34,799 --> 00:03:38,799
training flag that i should capture

110
00:03:37,200 --> 00:03:40,400
in order to get to know the system

111
00:03:38,799 --> 00:03:41,920
better so you'll notice

112
00:03:40,400 --> 00:03:43,760
as you kind of navigate through the

113
00:03:41,920 --> 00:03:45,519
different sections of operator

114
00:03:43,760 --> 00:03:46,959
that there are training flags in the

115
00:03:45,519 --> 00:03:49,200
bottom right that

116
00:03:46,959 --> 00:03:50,400
are not yet captured these are

117
00:03:49,200 --> 00:03:52,159
introduction

118
00:03:50,400 --> 00:03:54,000
flags that will teach you how to get the

119
00:03:52,159 --> 00:03:55,760
most out of operator

120
00:03:54,000 --> 00:03:57,920
so the green one is the one you should

121
00:03:55,760 --> 00:03:59,680
start with this will

122
00:03:57,920 --> 00:04:01,920
kind of encourage me and teach me how to

123
00:03:59,680 --> 00:04:03,519
run my first operation

124
00:04:01,920 --> 00:04:05,920
so it'll start by introducing the

125
00:04:03,519 --> 00:04:08,959
terminology understanding things like

126
00:04:05,920 --> 00:04:08,959
what is attp

127
00:04:09,519 --> 00:04:14,159
what is an adversary which is a

128
00:04:11,280 --> 00:04:17,440
collection of ttps

129
00:04:14,159 --> 00:04:18,560
what is an agent or a remote access

130
00:04:17,440 --> 00:04:20,799
trojan

131
00:04:18,560 --> 00:04:22,479
and then finally what is an operation

132
00:04:20,799 --> 00:04:23,520
essentially the process of taking an

133
00:04:22,479 --> 00:04:25,919
adversary

134
00:04:23,520 --> 00:04:27,280
and sending it to a collection of your

135
00:04:25,919 --> 00:04:30,800
agents to execute

136
00:04:27,280 --> 00:04:32,560
test your security so this will teach

137
00:04:30,800 --> 00:04:34,160
you that it will give you a variety of

138
00:04:32,560 --> 00:04:36,320
resource links that you can use for

139
00:04:34,160 --> 00:04:37,919
supplemental information

140
00:04:36,320 --> 00:04:39,680
i'll close this for now capture that

141
00:04:37,919 --> 00:04:41,600
later and you can see that there's a

142
00:04:39,680 --> 00:04:44,320
variety of other 25s down here that i

143
00:04:41,600 --> 00:04:46,320
have yet to capture

144
00:04:44,320 --> 00:04:48,240
i'm going to start by looking up here at

145
00:04:46,320 --> 00:04:50,320
the select an adversary

146
00:04:48,240 --> 00:04:51,520
i can do one of two things i can take

147
00:04:50,320 --> 00:04:53,680
one of our existing

148
00:04:51,520 --> 00:04:56,320
off-the-shelf adversaries that will have

149
00:04:53,680 --> 00:04:58,160
a chain of ttps that work together

150
00:04:56,320 --> 00:05:00,560
that i can just build and deploy

151
00:04:58,160 --> 00:05:02,400
immediately so i'll click this

152
00:05:00,560 --> 00:05:03,600
and this will build a two ability

153
00:05:02,400 --> 00:05:05,360
adversary

154
00:05:03,600 --> 00:05:08,479
that according to the name will capture

155
00:05:05,360 --> 00:05:10,240
screenshots on the target

156
00:05:08,479 --> 00:05:11,520
alternatively i can click this plus

157
00:05:10,240 --> 00:05:15,039
button up here in the

158
00:05:11,520 --> 00:05:18,720
dock which will create a blank canvas

159
00:05:15,039 --> 00:05:18,720
a new adversary that i can fill in

160
00:05:19,440 --> 00:05:26,000
i will call this one hacker one

161
00:05:24,000 --> 00:05:27,840
this has no procedure so this one is

162
00:05:26,000 --> 00:05:30,560
prompting me to add procedures

163
00:05:27,840 --> 00:05:32,240
i'll come back to that off to the left

164
00:05:30,560 --> 00:05:34,160
hand side i can see that i

165
00:05:32,240 --> 00:05:35,600
have currently selected my home

166
00:05:34,160 --> 00:05:37,759
computers this is

167
00:05:35,600 --> 00:05:39,759
my range this will show all of the

168
00:05:37,759 --> 00:05:41,919
computers that i have

169
00:05:39,759 --> 00:05:42,960
access to that i have compromised on

170
00:05:41,919 --> 00:05:45,919
target

171
00:05:42,960 --> 00:05:46,560
so operator ships with a single agent

172
00:05:45,919 --> 00:05:49,600
inside of

173
00:05:46,560 --> 00:05:49,919
your home range which is named after

174
00:05:49,600 --> 00:05:51,680
your

175
00:05:49,919 --> 00:05:53,199
your host name of your computer so i can

176
00:05:51,680 --> 00:05:54,479
see that here that there are zero

177
00:05:53,199 --> 00:05:56,560
executing ttps

178
00:05:54,479 --> 00:05:58,080
with nothing queued up and i can see the

179
00:05:56,560 --> 00:06:01,440
last time it checked in

180
00:05:58,080 --> 00:06:04,720
was that 1620 just a few minutes ago

181
00:06:01,440 --> 00:06:07,280
and it is using a pretty default

182
00:06:04,720 --> 00:06:09,360
encryption key in order to communicate

183
00:06:07,280 --> 00:06:12,160
between operator and itself

184
00:06:09,360 --> 00:06:13,280
so if i click into the agent i can see

185
00:06:12,160 --> 00:06:15,120
essentially the log

186
00:06:13,280 --> 00:06:17,120
of what occurred during this agent with

187
00:06:15,120 --> 00:06:18,479
a variety of options up here in the top

188
00:06:17,120 --> 00:06:20,319
right

189
00:06:18,479 --> 00:06:22,800
on the dock which i'm able to do against

190
00:06:20,319 --> 00:06:25,039
that agent

191
00:06:22,800 --> 00:06:27,199
whenever i deploy an agent sorry

192
00:06:25,039 --> 00:06:29,759
whenever i deploy an adversary

193
00:06:27,199 --> 00:06:31,759
the adversary will be sent to any of the

194
00:06:29,759 --> 00:06:33,199
agents that i currently have selected in

195
00:06:31,759 --> 00:06:35,440
my left hand column here

196
00:06:33,199 --> 00:06:36,960
which is currently home all right i

197
00:06:35,440 --> 00:06:38,400
think we have enough information for us

198
00:06:36,960 --> 00:06:38,880
to get started and see what kind of

199
00:06:38,400 --> 00:06:41,520
power

200
00:06:38,880 --> 00:06:43,039
operator has behind it so let's go back

201
00:06:41,520 --> 00:06:46,319
to our hacker one adversary

202
00:06:43,039 --> 00:06:48,960
and ttps to it

203
00:06:46,319 --> 00:06:49,599
see that we have zero ttps currently

204
00:06:48,960 --> 00:06:52,000
attached

205
00:06:49,599 --> 00:06:52,800
to this adversary but what view that

206
00:06:52,000 --> 00:06:55,199
we're in now

207
00:06:52,800 --> 00:06:57,280
is essentially a library for procedures

208
00:06:55,199 --> 00:06:59,440
that we can use in order to

209
00:06:57,280 --> 00:07:01,120
add or remove any attacks that are built

210
00:06:59,440 --> 00:07:02,479
into the system to this specific

211
00:07:01,120 --> 00:07:05,120
adversary profile

212
00:07:02,479 --> 00:07:05,599
i can search for them up here i can

213
00:07:05,120 --> 00:07:07,759
select

214
00:07:05,599 --> 00:07:10,560
based off of procedure tags which are

215
00:07:07,759 --> 00:07:12,560
essentially categories of attacks

216
00:07:10,560 --> 00:07:14,639
or i can show a change log of the new

217
00:07:12,560 --> 00:07:17,280
ones that have been pushed into operator

218
00:07:14,639 --> 00:07:18,319
over various time periods there's about

219
00:07:17,280 --> 00:07:20,080
400

220
00:07:18,319 --> 00:07:21,520
procedures that are currently built and

221
00:07:20,080 --> 00:07:23,039
baked into operator

222
00:07:21,520 --> 00:07:25,039
so you can use these across the whole

223
00:07:23,039 --> 00:07:27,599
spectrum of miter attack

224
00:07:25,039 --> 00:07:28,639
tactics and techniques and so forth

225
00:07:27,599 --> 00:07:31,280
we're going to go ahead and select the

226
00:07:28,639 --> 00:07:31,919
tag to limit the 400 or so procedures

227
00:07:31,280 --> 00:07:34,240
currently

228
00:07:31,919 --> 00:07:36,000
in my view we're going to look at the

229
00:07:34,240 --> 00:07:38,560
crown jewel procedures

230
00:07:36,000 --> 00:07:39,680
so crown jewels are going to be the

231
00:07:38,560 --> 00:07:41,840
important things

232
00:07:39,680 --> 00:07:43,680
on a computer network or server

233
00:07:41,840 --> 00:07:46,080
essentially the important things that an

234
00:07:43,680 --> 00:07:48,319
organization has or has access to that

235
00:07:46,080 --> 00:07:50,319
they do not want attackers to find

236
00:07:48,319 --> 00:07:52,080
so by selecting this tag we're able to

237
00:07:50,319 --> 00:07:54,319
see a variety of procedures

238
00:07:52,080 --> 00:07:55,759
that are connected or allow us to locate

239
00:07:54,319 --> 00:07:58,479
find steel

240
00:07:55,759 --> 00:07:59,280
exfiltrate the crown jewels off of a

241
00:07:58,479 --> 00:08:02,400
computer

242
00:07:59,280 --> 00:08:05,840
or network so as i scroll down

243
00:08:02,400 --> 00:08:07,199
note that every ttp is stored inside of

244
00:08:05,840 --> 00:08:10,000
one of these boxes

245
00:08:07,199 --> 00:08:11,919
so this here represents a procedure

246
00:08:10,000 --> 00:08:13,039
every procedure is classified according

247
00:08:11,919 --> 00:08:17,199
to the miter attack

248
00:08:13,039 --> 00:08:18,639
matrix has optionally tags

249
00:08:17,199 --> 00:08:20,000
and then is going to show you aside from

250
00:08:18,639 --> 00:08:22,000
a name and description it's going to

251
00:08:20,000 --> 00:08:23,280
show you every operating system we call

252
00:08:22,000 --> 00:08:25,680
these platforms

253
00:08:23,280 --> 00:08:28,479
that the procedure will work on and then

254
00:08:25,680 --> 00:08:30,479
every executor essentially the program

255
00:08:28,479 --> 00:08:31,759
on the target computer that the agent is

256
00:08:30,479 --> 00:08:35,279
running that will

257
00:08:31,759 --> 00:08:38,080
execute the command so for example

258
00:08:35,279 --> 00:08:38,959
this darwin which is a synonym for mac

259
00:08:38,080 --> 00:08:41,919
os

260
00:08:38,959 --> 00:08:42,320
is going to run a shell command which is

261
00:08:41,919 --> 00:08:46,160
this

262
00:08:42,320 --> 00:08:48,160
tar similarly this works on windows and

263
00:08:46,160 --> 00:08:49,600
powershell and linux and shell

264
00:08:48,160 --> 00:08:51,200
so you can mix and match these different

265
00:08:49,600 --> 00:08:53,760
platforms and executors

266
00:08:51,200 --> 00:08:55,760
let's go ahead and add this procedure to

267
00:08:53,760 --> 00:08:59,200
hacker one

268
00:08:55,760 --> 00:09:00,959
scrolling down let's go ahead and add a

269
00:08:59,200 --> 00:09:03,920
few more we'll add finding files on

270
00:09:00,959 --> 00:09:03,920
removable media

271
00:09:04,000 --> 00:09:07,519
we'll add staging collected files which

272
00:09:06,640 --> 00:09:09,839
is the process

273
00:09:07,519 --> 00:09:12,560
of copying a file from one location on a

274
00:09:09,839 --> 00:09:14,800
computer to another location

275
00:09:12,560 --> 00:09:17,600
let's go ahead and add admin shares

276
00:09:14,800 --> 00:09:17,600
locating those

277
00:09:18,399 --> 00:09:22,080
all right let's go ahead and add this

278
00:09:19,920 --> 00:09:23,200
multiple windows as multiple executors

279
00:09:22,080 --> 00:09:25,200
on this windows

280
00:09:23,200 --> 00:09:27,360
command let's go ahead and add creating

281
00:09:25,200 --> 00:09:29,839
a new directory

282
00:09:27,360 --> 00:09:31,279
now let's say that i am unsure about

283
00:09:29,839 --> 00:09:33,279
what one of these does

284
00:09:31,279 --> 00:09:34,800
as far as a procedure what do i expect

285
00:09:33,279 --> 00:09:36,000
why would i want to do this

286
00:09:34,800 --> 00:09:38,160
and go ahead and select the training

287
00:09:36,000 --> 00:09:39,440
manual

288
00:09:38,160 --> 00:09:41,279
and what this is going to do is it's

289
00:09:39,440 --> 00:09:44,080
going to pop open a

290
00:09:41,279 --> 00:09:44,560
verification a flag for me to capture

291
00:09:44,080 --> 00:09:46,560
that

292
00:09:44,560 --> 00:09:48,480
may be easy maybe hard but it's going to

293
00:09:46,560 --> 00:09:51,839
show me all the different variations

294
00:09:48,480 --> 00:09:54,080
of this given procedure it's going to

295
00:09:51,839 --> 00:09:55,680
show me a hacker's perspective

296
00:09:54,080 --> 00:09:57,440
which is why they care about doing this

297
00:09:55,680 --> 00:09:59,200
in the first place

298
00:09:57,440 --> 00:10:01,600
basic variations that a hacker may

299
00:09:59,200 --> 00:10:03,279
attempt to do

300
00:10:01,600 --> 00:10:06,160
what they expect to get out of this with

301
00:10:03,279 --> 00:10:08,959
the links to additional procedures

302
00:10:06,160 --> 00:10:10,959
how you could change this powerful how

303
00:10:08,959 --> 00:10:13,760
you could chain this given procedure to

304
00:10:10,959 --> 00:10:16,240
others within the system and then how a

305
00:10:13,760 --> 00:10:18,000
defender may prevent and detect this

306
00:10:16,240 --> 00:10:20,959
so i'll go ahead and say i understand

307
00:10:18,000 --> 00:10:25,279
this procedure capturing that right now

308
00:10:20,959 --> 00:10:26,160
now this is content that is developed

309
00:10:25,279 --> 00:10:29,200
in-house

310
00:10:26,160 --> 00:10:31,200
we spend a significant amount of time

311
00:10:29,200 --> 00:10:33,120
between us here at prelude and people

312
00:10:31,200 --> 00:10:35,839
within the open source community

313
00:10:33,120 --> 00:10:36,800
that are constantly adding in new

314
00:10:35,839 --> 00:10:39,360
training flags

315
00:10:36,800 --> 00:10:40,160
and new material from our point of view

316
00:10:39,360 --> 00:10:42,320
on what

317
00:10:40,160 --> 00:10:44,839
uh what procedures do and why we

318
00:10:42,320 --> 00:10:46,800
actually execute them from the offensive

319
00:10:44,839 --> 00:10:48,959
side

320
00:10:46,800 --> 00:10:50,480
let's go ahead and additionally add

321
00:10:48,959 --> 00:10:52,320
finding of recent files

322
00:10:50,480 --> 00:10:53,760
this is a handy procedure that will

323
00:10:52,320 --> 00:10:55,440
locate every

324
00:10:53,760 --> 00:10:59,440
file that has been modified in the last

325
00:10:55,440 --> 00:11:01,200
24 hours and just collect it

326
00:10:59,440 --> 00:11:02,959
and finally let's go ahead and add a

327
00:11:01,200 --> 00:11:05,200
procedure for exfil trading

328
00:11:02,959 --> 00:11:06,320
anything we find off of the target

329
00:11:05,200 --> 00:11:07,760
systems

330
00:11:06,320 --> 00:11:11,040
now one thing i'll highlight in this

331
00:11:07,760 --> 00:11:13,760
procedure is the concept of variables

332
00:11:11,040 --> 00:11:16,000
so you'll see this syntax here it's a

333
00:11:13,760 --> 00:11:19,440
hashtag and curly braces

334
00:11:16,000 --> 00:11:21,760
with a variable name inside

335
00:11:19,440 --> 00:11:22,560
of each one so this command uses

336
00:11:21,760 --> 00:11:25,360
multiple

337
00:11:22,560 --> 00:11:26,720
variables now generally you don't have

338
00:11:25,360 --> 00:11:28,640
to worry about these unless you're doing

339
00:11:26,720 --> 00:11:29,440
some advanced work with an operator to

340
00:11:28,640 --> 00:11:31,920
form your own

341
00:11:29,440 --> 00:11:33,279
chained attacks but what's actually

342
00:11:31,920 --> 00:11:36,160
occurring here is as

343
00:11:33,279 --> 00:11:37,200
operator executes commands essentially

344
00:11:36,160 --> 00:11:40,240
adversaries

345
00:11:37,200 --> 00:11:41,440
it is learning information and changing

346
00:11:40,240 --> 00:11:45,040
the output of

347
00:11:41,440 --> 00:11:47,519
some ttps to the input of other ttps

348
00:11:45,040 --> 00:11:49,360
so it creates an autonomous chain that

349
00:11:47,519 --> 00:11:50,320
allows you to essentially take a whole

350
00:11:49,360 --> 00:11:52,480
bunch of procedures

351
00:11:50,320 --> 00:11:54,240
toss them into a bucket and then

352
00:11:52,480 --> 00:11:55,120
operator will take care of how does it

353
00:11:54,240 --> 00:11:57,200
order them

354
00:11:55,120 --> 00:11:59,680
how does it chain them how does it

355
00:11:57,200 --> 00:12:00,320
figure out intelligently what to do and

356
00:11:59,680 --> 00:12:02,959
when

357
00:12:00,320 --> 00:12:03,760
and so operator will take that process

358
00:12:02,959 --> 00:12:05,920
on itself

359
00:12:03,760 --> 00:12:06,800
you can jump in manually and add your

360
00:12:05,920 --> 00:12:08,639
own variables

361
00:12:06,800 --> 00:12:11,200
and add your own essentially manual

362
00:12:08,639 --> 00:12:14,800
control but that is an optional thing

363
00:12:11,200 --> 00:12:14,800
if you feel comfortable doing so

364
00:12:15,760 --> 00:12:19,600
all right let's go ahead and take hacker

365
00:12:17,519 --> 00:12:21,760
one for a test drive

366
00:12:19,600 --> 00:12:23,760
so we can see we have seven abilities

367
00:12:21,760 --> 00:12:25,040
and we have currently selected our home

368
00:12:23,760 --> 00:12:28,079
computers

369
00:12:25,040 --> 00:12:30,560
so let's go ahead and deploy hacker one

370
00:12:28,079 --> 00:12:31,120
all right we can see that this agent is

371
00:12:30,560 --> 00:12:33,680
currently

372
00:12:31,120 --> 00:12:35,040
most of the way through the operation

373
00:12:33,680 --> 00:12:37,200
has nothing queued up and it is

374
00:12:35,040 --> 00:12:39,519
currently executing a single ttp

375
00:12:37,200 --> 00:12:41,279
there went it finished it skipped a

376
00:12:39,519 --> 00:12:43,200
handful of the procedures

377
00:12:41,279 --> 00:12:45,120
over here so i can see those here

378
00:12:43,200 --> 00:12:47,120
otherwise everything that executed is

379
00:12:45,120 --> 00:12:49,680
going to show up here in my dashboard

380
00:12:47,120 --> 00:12:52,639
there are 33 procedures we gave it seven

381
00:12:49,680 --> 00:12:56,560
ttps but it did execute 33 things there

382
00:12:52,639 --> 00:12:59,360
over the course of yeah 30 seconds or so

383
00:12:56,560 --> 00:13:00,639
up here we can search for anything that

384
00:12:59,360 --> 00:13:03,040
we want to

385
00:13:00,639 --> 00:13:04,480
look for inside of the results maybe

386
00:13:03,040 --> 00:13:05,360
we're looking for certain usernames

387
00:13:04,480 --> 00:13:08,959
email addresses

388
00:13:05,360 --> 00:13:10,079
ioc's whatever as i scroll down i'm

389
00:13:08,959 --> 00:13:11,120
gonna start at the bottom actually so

390
00:13:10,079 --> 00:13:14,000
i'll use the scroll bar

391
00:13:11,120 --> 00:13:15,680
to the bottom this is time based so the

392
00:13:14,000 --> 00:13:16,720
first thing that executed will be at the

393
00:13:15,680 --> 00:13:18,399
bottom

394
00:13:16,720 --> 00:13:21,760
i'm going to get started by creating a

395
00:13:18,399 --> 00:13:23,680
new directory we'll click here

396
00:13:21,760 --> 00:13:26,560
so starting at the top you can see the

397
00:13:23,680 --> 00:13:29,120
ttp command that ran

398
00:13:26,560 --> 00:13:30,480
you can see the output as if you had

399
00:13:29,120 --> 00:13:33,760
just opened up the terminal

400
00:13:30,480 --> 00:13:34,480
on this given macbook and you know using

401
00:13:33,760 --> 00:13:35,920
shell

402
00:13:34,480 --> 00:13:38,000
executed this command you would have

403
00:13:35,920 --> 00:13:39,199
gotten this output now we use our

404
00:13:38,000 --> 00:13:42,000
autonomous

405
00:13:39,199 --> 00:13:43,440
parsing and chaining commands together

406
00:13:42,000 --> 00:13:45,760
in order to pull out these

407
00:13:43,440 --> 00:13:46,880
indicators of compromise i can see here

408
00:13:45,760 --> 00:13:49,360
it tried to identify

409
00:13:46,880 --> 00:13:50,399
this given output as a directory and a

410
00:13:49,360 --> 00:13:52,079
file

411
00:13:50,399 --> 00:13:54,000
i know this is a directory using my

412
00:13:52,079 --> 00:13:56,240
human eyes so i'm going to

413
00:13:54,000 --> 00:13:58,399
x out the file removing that learned

414
00:13:56,240 --> 00:14:01,920
information i'm overriding it

415
00:13:58,399 --> 00:14:03,680
and i can still see the fact that i

416
00:14:01,920 --> 00:14:06,639
learned this one piece of information

417
00:14:03,680 --> 00:14:08,480
actually unlocked my ability to run a

418
00:14:06,639 --> 00:14:10,480
number of other procedures that are

419
00:14:08,480 --> 00:14:14,000
loaded into my instance of operator

420
00:14:10,480 --> 00:14:16,560
that i could run anytime i want

421
00:14:14,000 --> 00:14:17,440
closing this i'll look at the second

422
00:14:16,560 --> 00:14:20,240
thing that ran

423
00:14:17,440 --> 00:14:21,120
which is finding recent files all right

424
00:14:20,240 --> 00:14:24,399
here we go i can

425
00:14:21,120 --> 00:14:25,519
find a variety of files including video

426
00:14:24,399 --> 00:14:27,279
cuts that i've been taking this

427
00:14:25,519 --> 00:14:30,240
afternoon

428
00:14:27,279 --> 00:14:32,160
that it has located and deemed that

429
00:14:30,240 --> 00:14:35,120
these are important enough to

430
00:14:32,160 --> 00:14:35,680
show me scrolling down i can see that it

431
00:14:35,120 --> 00:14:37,519
parsed

432
00:14:35,680 --> 00:14:40,000
out all of the files as learned

433
00:14:37,519 --> 00:14:43,360
indicators of compromise

434
00:14:40,000 --> 00:14:48,480
storing them as files that were found

435
00:14:43,360 --> 00:14:48,480
by running a t-1005 procedure

436
00:14:49,440 --> 00:14:52,480
now i can see that all of these files

437
00:14:51,360 --> 00:14:54,959
could be used

438
00:14:52,480 --> 00:14:56,320
to link me to staging collected files or

439
00:14:54,959 --> 00:14:59,839
even encrypting the files if i was

440
00:14:56,320 --> 00:14:59,839
running maybe a ransomware test

441
00:14:59,920 --> 00:15:04,959
moving up i can see that there are a

442
00:15:01,920 --> 00:15:08,240
number of stage collected files commands

443
00:15:04,959 --> 00:15:10,560
that executed likely one for every found

444
00:15:08,240 --> 00:15:12,959
file i can see that the last two steps

445
00:15:10,560 --> 00:15:14,800
were successful one was compressing the

446
00:15:12,959 --> 00:15:16,880
stage directory

447
00:15:14,800 --> 00:15:18,079
and then the last one was collecting or

448
00:15:16,880 --> 00:15:20,480
stealing

449
00:15:18,079 --> 00:15:22,399
the compressed stage directory from the

450
00:15:20,480 --> 00:15:23,680
target and sending it back to me on my

451
00:15:22,399 --> 00:15:24,399
command and control center here at

452
00:15:23,680 --> 00:15:26,000
operator

453
00:15:24,399 --> 00:15:27,680
so i can open this up and i can see the

454
00:15:26,000 --> 00:15:28,720
curl statement that because i'm running

455
00:15:27,680 --> 00:15:31,040
everything localhost

456
00:15:28,720 --> 00:15:33,519
the ip address is localhost but i sent

457
00:15:31,040 --> 00:15:34,320
it over my http server that's built into

458
00:15:33,519 --> 00:15:38,480
operator

459
00:15:34,320 --> 00:15:38,480
and it forwarded over uploading the file

460
00:15:38,639 --> 00:15:42,800
so this is now in my control all right

461
00:15:41,839 --> 00:15:45,759
let's say it's time

462
00:15:42,800 --> 00:15:48,079
to run a network test off of my computer

463
00:15:45,759 --> 00:15:49,839
i want to run it on an external computer

464
00:15:48,079 --> 00:15:51,519
something else within my network but not

465
00:15:49,839 --> 00:15:52,720
on my local host an actual security

466
00:15:51,519 --> 00:15:54,639
assessment

467
00:15:52,720 --> 00:15:57,920
to do that i'm going to head over into

468
00:15:54,639 --> 00:16:00,079
operator's plugin section

469
00:15:57,920 --> 00:16:02,240
and this is where we allow you to write

470
00:16:00,079 --> 00:16:03,920
your own extensions to operator we ship

471
00:16:02,240 --> 00:16:05,920
with about a dozen plug-ins

472
00:16:03,920 --> 00:16:08,639
that do things from like importing

473
00:16:05,920 --> 00:16:10,639
atomic red team attack files to

474
00:16:08,639 --> 00:16:12,880
popping the attack navigator the miter

475
00:16:10,639 --> 00:16:16,560
attack navigator right here on screen

476
00:16:12,880 --> 00:16:17,519
to things like um a toolbox that tracks

477
00:16:16,560 --> 00:16:18,959
all of your

478
00:16:17,519 --> 00:16:20,079
github projects there's a bunch of

479
00:16:18,959 --> 00:16:22,320
different plugins here that add a

480
00:16:20,079 --> 00:16:23,040
significant amount of value but we are

481
00:16:22,320 --> 00:16:25,360
going to

482
00:16:23,040 --> 00:16:27,040
kind of skip right over into the agent

483
00:16:25,360 --> 00:16:29,360
library

484
00:16:27,040 --> 00:16:31,279
and see what we have accessible so the

485
00:16:29,360 --> 00:16:34,079
agent library is going to show me

486
00:16:31,279 --> 00:16:35,600
all of the agents that i can use

487
00:16:34,079 --> 00:16:37,519
associated to operator

488
00:16:35,600 --> 00:16:39,360
you can write your own agents this is an

489
00:16:37,519 --> 00:16:40,880
open framework you can write an agent in

490
00:16:39,360 --> 00:16:43,279
any computer language you want

491
00:16:40,880 --> 00:16:45,279
and attach it over the interface over a

492
00:16:43,279 --> 00:16:49,839
number of different protocols http

493
00:16:45,279 --> 00:16:50,560
tcp udp ftp grpc and variety of

494
00:16:49,839 --> 00:16:53,120
additional

495
00:16:50,560 --> 00:16:54,880
protocols that we're working on third

496
00:16:53,120 --> 00:16:56,320
eye is the default agent this is the

497
00:16:54,880 --> 00:16:59,519
name of the default agent

498
00:16:56,320 --> 00:17:00,720
for the built-in agent that's in

499
00:16:59,519 --> 00:17:02,480
everybody's operator

500
00:17:00,720 --> 00:17:04,480
this is the one that we ran our just

501
00:17:02,480 --> 00:17:06,959
last test on

502
00:17:04,480 --> 00:17:08,480
numa is our default open source agent

503
00:17:06,959 --> 00:17:09,919
you can go to github search for pneuma

504
00:17:08,480 --> 00:17:11,120
on our repositories you'll find the

505
00:17:09,919 --> 00:17:12,880
gohan code up there

506
00:17:11,120 --> 00:17:14,640
you can compile it yourself read the

507
00:17:12,880 --> 00:17:17,520
code change the code you see this one

508
00:17:14,640 --> 00:17:19,679
will work over four different protocols

509
00:17:17,520 --> 00:17:21,679
and we give you pre-compiled binaries

510
00:17:19,679 --> 00:17:23,120
right here that you can download

511
00:17:21,679 --> 00:17:24,799
or you can download the source code if

512
00:17:23,120 --> 00:17:28,480
you don't want to head to github

513
00:17:24,799 --> 00:17:28,480
i'll go ahead and download darwin

514
00:17:28,559 --> 00:17:33,360
all right have that downloaded these

515
00:17:31,360 --> 00:17:36,080
file hashes for the downloads by the way

516
00:17:33,360 --> 00:17:37,679
are pre-compiled but they re-compile

517
00:17:36,080 --> 00:17:39,120
every 30 minutes

518
00:17:37,679 --> 00:17:42,160
in order for them to get a different

519
00:17:39,120 --> 00:17:44,160
file hash so your signature detection

520
00:17:42,160 --> 00:17:45,679
on the defensive side may struggle to

521
00:17:44,160 --> 00:17:46,880
catch them because they're constantly

522
00:17:45,679 --> 00:17:49,440
changing themselves

523
00:17:46,880 --> 00:17:50,799
to avoid detection alright since i

524
00:17:49,440 --> 00:17:54,000
downloaded numa

525
00:17:50,799 --> 00:17:56,480
i'm going to open a shell head to my

526
00:17:54,000 --> 00:18:00,640
download directory

527
00:17:56,480 --> 00:18:03,679
and i will mark numa as executable first

528
00:18:00,640 --> 00:18:04,559
and then i will start it now when i

529
00:18:03,679 --> 00:18:07,200
start numa

530
00:18:04,559 --> 00:18:08,960
i can give it an optional parameter in

531
00:18:07,200 --> 00:18:11,840
this case i'll just call it

532
00:18:08,960 --> 00:18:12,799
david and i can give it an optional

533
00:18:11,840 --> 00:18:17,200
range

534
00:18:12,799 --> 00:18:20,400
which i will call mine

535
00:18:17,200 --> 00:18:22,480
all right i received a new agent beacon

536
00:18:20,400 --> 00:18:25,840
right up here you can see that came in

537
00:18:22,480 --> 00:18:25,840
going back to operator

538
00:18:26,240 --> 00:18:32,640
i can see that i have a new mine range

539
00:18:30,480 --> 00:18:33,919
now inside of the mine range i can see

540
00:18:32,640 --> 00:18:36,799
david is checking in

541
00:18:33,919 --> 00:18:38,480
currently green connected over tcp which

542
00:18:36,799 --> 00:18:40,480
is the default protocol

543
00:18:38,480 --> 00:18:42,720
that numa uses if you use nothing else

544
00:18:40,480 --> 00:18:45,440
it will choose tcp

545
00:18:42,720 --> 00:18:47,440
now i can go ahead and execute and

546
00:18:45,440 --> 00:18:49,280
deploy an adversary against this

547
00:18:47,440 --> 00:18:50,240
agent and i can deploy this anywhere in

548
00:18:49,280 --> 00:18:51,679
my network as long as i have

549
00:18:50,240 --> 00:18:54,240
connectivity back to operator

550
00:18:51,679 --> 00:18:56,799
i can put it wherever i want now i can

551
00:18:54,240 --> 00:18:58,799
also open a reverse shell to my tcp

552
00:18:56,799 --> 00:19:02,039
based agents

553
00:18:58,799 --> 00:19:04,640
just that quickly this gives me a

554
00:19:02,039 --> 00:19:06,480
full-fledged reverse shell that allows

555
00:19:04,640 --> 00:19:07,039
me to drop to root allows me to open up

556
00:19:06,480 --> 00:19:09,520
them

557
00:19:07,039 --> 00:19:12,640
i can do all sorts of cool things from

558
00:19:09,520 --> 00:19:12,640
this perspective

559
00:19:14,480 --> 00:19:18,720
i can also open up the settings cool

560
00:19:17,280 --> 00:19:20,720
thing here though is i can change the

561
00:19:18,720 --> 00:19:22,880
contact point for the agent

562
00:19:20,720 --> 00:19:24,000
so tcp is the default that i connected

563
00:19:22,880 --> 00:19:27,600
to i can

564
00:19:24,000 --> 00:19:29,360
switch that over to say udp and update

565
00:19:27,600 --> 00:19:30,960
and this will actually hot swap the

566
00:19:29,360 --> 00:19:33,120
protocol being used

567
00:19:30,960 --> 00:19:35,840
that by the agent so now i can see over

568
00:19:33,120 --> 00:19:37,039
here i'm using a udp connection protocol

569
00:19:35,840 --> 00:19:39,520
so the next thing i'm going to do is i'm

570
00:19:37,039 --> 00:19:42,559
going to go into the editor section

571
00:19:39,520 --> 00:19:44,000
which is our database of procedures

572
00:19:42,559 --> 00:19:45,919
so you saw some of these procedures

573
00:19:44,000 --> 00:19:47,360
before within the operate section when i

574
00:19:45,919 --> 00:19:49,280
was deploying hacker one

575
00:19:47,360 --> 00:19:51,520
if i want to get my hands dirty and

576
00:19:49,280 --> 00:19:52,400
start modifying procedures creating my

577
00:19:51,520 --> 00:19:54,080
own

578
00:19:52,400 --> 00:19:55,760
learning about how to write payloads and

579
00:19:54,080 --> 00:19:56,880
attach them to procedures

580
00:19:55,760 --> 00:19:59,679
you're going to head here into the

581
00:19:56,880 --> 00:20:01,840
editor section from here i can search

582
00:19:59,679 --> 00:20:04,159
for anything that i want

583
00:20:01,840 --> 00:20:05,200
so we'll say maybe find maybe i can

584
00:20:04,159 --> 00:20:09,039
locate those

585
00:20:05,200 --> 00:20:10,400
find recent files that i ran before

586
00:20:09,039 --> 00:20:13,840
and i can view all the different

587
00:20:10,400 --> 00:20:16,159
variations of this given procedure

588
00:20:13,840 --> 00:20:17,679
from here i can edit anything that i

589
00:20:16,159 --> 00:20:18,799
want i can see all the different

590
00:20:17,679 --> 00:20:20,000
dependencies

591
00:20:18,799 --> 00:20:21,760
and things that i could learn from

592
00:20:20,000 --> 00:20:24,559
running this given procedure add

593
00:20:21,760 --> 00:20:27,440
executors

594
00:20:24,559 --> 00:20:28,640
regardless at any point i can take any

595
00:20:27,440 --> 00:20:30,480
of these procedures

596
00:20:28,640 --> 00:20:32,000
that would work on my operating system

597
00:20:30,480 --> 00:20:34,799
and i can deploy it

598
00:20:32,000 --> 00:20:37,520
it's a quick way to test so i can select

599
00:20:34,799 --> 00:20:37,520
my range

600
00:20:37,679 --> 00:20:41,440
in this case i'll choose my numa agent

601
00:20:39,760 --> 00:20:44,320
on my mine range

602
00:20:41,440 --> 00:20:45,520
and i'll deploy it there we go i can see

603
00:20:44,320 --> 00:20:48,559
a pretty similar result

604
00:20:45,520 --> 00:20:50,720
is when i ran the hacker one average

605
00:20:48,559 --> 00:20:52,559
is some of these procedures have

606
00:20:50,720 --> 00:20:55,600
payloads these are optional

607
00:20:52,559 --> 00:20:59,200
in this case a payload is a python file

608
00:20:55,600 --> 00:21:00,000
if i click on it it'll show me a generic

609
00:20:59,200 --> 00:21:01,520
path

610
00:21:00,000 --> 00:21:02,799
if you remember from before this is a

611
00:21:01,520 --> 00:21:03,919
variable it'll get filled in

612
00:21:02,799 --> 00:21:07,200
automatically

613
00:21:03,919 --> 00:21:09,280
now a payload is any arbitrary file of

614
00:21:07,200 --> 00:21:11,039
any extension of any size that you want

615
00:21:09,280 --> 00:21:12,080
to write any kind of malware that you

616
00:21:11,039 --> 00:21:14,159
may want to test

617
00:21:12,080 --> 00:21:16,320
in a security environment and you can

618
00:21:14,159 --> 00:21:17,440
attach it to the procedure now when the

619
00:21:16,320 --> 00:21:19,520
procedure runs

620
00:21:17,440 --> 00:21:21,840
before it executes whatever command it

621
00:21:19,520 --> 00:21:24,640
has it will download the payload

622
00:21:21,840 --> 00:21:25,919
associated to the ttp and expect it to

623
00:21:24,640 --> 00:21:28,559
be on disk

624
00:21:25,919 --> 00:21:30,240
before it runs the ttp all right this is

625
00:21:28,559 --> 00:21:33,360
quite the report

626
00:21:30,240 --> 00:21:37,120
so this is going to show me the

627
00:21:33,360 --> 00:21:37,120
range of agents that i want to look at

628
00:21:37,440 --> 00:21:40,720
it's going to show me start and end

629
00:21:39,039 --> 00:21:41,520
times to filter my report

630
00:21:40,720 --> 00:21:44,799
and that's going to give me a

631
00:21:41,520 --> 00:21:45,919
visualization of every adversary that i

632
00:21:44,799 --> 00:21:47,840
ran

633
00:21:45,919 --> 00:21:49,200
and all of the procedures and kind of

634
00:21:47,840 --> 00:21:51,440
how they fit together

635
00:21:49,200 --> 00:21:52,480
in almost kind of a linear way as far as

636
00:21:51,440 --> 00:21:54,559
how the procedures

637
00:21:52,480 --> 00:21:57,840
were run so i can see here all this is

638
00:21:54,559 --> 00:21:59,760
clickable you can open up all sorts of

639
00:21:57,840 --> 00:22:02,000
i can see all of the operations which

640
00:21:59,760 --> 00:22:03,840
are essentially adversary deployments

641
00:22:02,000 --> 00:22:05,520
that ran in this case i have brand one

642
00:22:03,840 --> 00:22:09,200
hacker one

643
00:22:05,520 --> 00:22:10,720
clicking this it will show me all of the

644
00:22:09,200 --> 00:22:13,360
procedures that ran

645
00:22:10,720 --> 00:22:15,200
in order within the operation their

646
00:22:13,360 --> 00:22:16,880
status and so forth

647
00:22:15,200 --> 00:22:18,960
i can see the ability to export the

648
00:22:16,880 --> 00:22:21,600
report into a word

649
00:22:18,960 --> 00:22:22,960
document into json or csv if i want to

650
00:22:21,600 --> 00:22:25,840
do something programmatic with

651
00:22:22,960 --> 00:22:26,720
my data this is a fun area this is a

652
00:22:25,840 --> 00:22:28,960
continuous

653
00:22:26,720 --> 00:22:30,880
training lab if you want to think of it

654
00:22:28,960 --> 00:22:32,640
that way there's a number of free and

655
00:22:30,880 --> 00:22:34,000
open source training programs that are

656
00:22:32,640 --> 00:22:35,600
available here

657
00:22:34,000 --> 00:22:37,039
and you can kind of pick and choose what

658
00:22:35,600 --> 00:22:37,520
you want to learn and how you want to

659
00:22:37,039 --> 00:22:40,080
approach

660
00:22:37,520 --> 00:22:41,120
the process the very first thing that i

661
00:22:40,080 --> 00:22:43,360
point people to

662
00:22:41,120 --> 00:22:45,360
is the introduction training program

663
00:22:43,360 --> 00:22:47,760
this program will teach you how to use

664
00:22:45,360 --> 00:22:49,120
operator so this will take you through

665
00:22:47,760 --> 00:22:52,720
about two dozen

666
00:22:49,120 --> 00:22:54,240
capture the flag style learning modules

667
00:22:52,720 --> 00:22:56,400
that will look kind of like this you'll

668
00:22:54,240 --> 00:22:58,159
get a challenge in this case deploy any

669
00:22:56,400 --> 00:23:00,080
adversary against any range

670
00:22:58,159 --> 00:23:02,720
you'll get context as to why this may be

671
00:23:00,080 --> 00:23:05,520
important a gauge as far as how people

672
00:23:02,720 --> 00:23:08,240
view the difficulty of this

673
00:23:05,520 --> 00:23:10,559
supplemental resource information and

674
00:23:08,240 --> 00:23:12,320
then a place to enter your challenge

675
00:23:10,559 --> 00:23:14,159
answer and see if you are getting it

676
00:23:12,320 --> 00:23:16,720
right and if you capture the flag

677
00:23:14,159 --> 00:23:17,919
another popular program is the pink

678
00:23:16,720 --> 00:23:20,320
badge program

679
00:23:17,919 --> 00:23:21,679
i'll click into this one i can view the

680
00:23:20,320 --> 00:23:24,480
history

681
00:23:21,679 --> 00:23:26,400
of my flags by clicking the green now

682
00:23:24,480 --> 00:23:28,559
the pink badge program

683
00:23:26,400 --> 00:23:30,080
is geared toward infosec geared toward

684
00:23:28,559 --> 00:23:32,960
people with little to

685
00:23:30,080 --> 00:23:34,000
no security knowledge or experience but

686
00:23:32,960 --> 00:23:37,039
may be interested

687
00:23:34,000 --> 00:23:37,440
and in parallel technical areas such as

688
00:23:37,039 --> 00:23:40,720
i.t

689
00:23:37,440 --> 00:23:42,080
or infosec now pink badge will take you

690
00:23:40,720 --> 00:23:43,120
through a three-week course for the

691
00:23:42,080 --> 00:23:46,480
final project

692
00:23:43,120 --> 00:23:47,840
and it will aim to append red team or

693
00:23:46,480 --> 00:23:50,400
offensive skills

694
00:23:47,840 --> 00:23:51,120
to somebody that works in the technical

695
00:23:50,400 --> 00:23:52,480
field

696
00:23:51,120 --> 00:23:55,600
so we go through all the different

697
00:23:52,480 --> 00:23:57,520
things what is an antivirus what's edr

698
00:23:55,600 --> 00:23:58,720
these come with a lot of video or sorry

699
00:23:57,520 --> 00:24:00,880
audio recordings

700
00:23:58,720 --> 00:24:02,240
you can listen to they come with again

701
00:24:00,880 --> 00:24:04,480
challenges that you need to do every

702
00:24:02,240 --> 00:24:06,400
week sometimes multiple times a week

703
00:24:04,480 --> 00:24:08,000
these usually run a couple hours a week

704
00:24:06,400 --> 00:24:09,919
to accomplish everything that you need

705
00:24:08,000 --> 00:24:12,480
to to stay on track with pink badge

706
00:24:09,919 --> 00:24:14,320
but this is a self-paced program that

707
00:24:12,480 --> 00:24:15,760
allows you to essentially beef up your

708
00:24:14,320 --> 00:24:18,480
skills if you don't have them

709
00:24:15,760 --> 00:24:19,760
go into the cloud plugin which i haven't

710
00:24:18,480 --> 00:24:21,120
installed yet so let me go ahead and do

711
00:24:19,760 --> 00:24:23,360
that

712
00:24:21,120 --> 00:24:25,919
done all right and this is going to

713
00:24:23,360 --> 00:24:29,440
prompt me to enter in either my aws

714
00:24:25,919 --> 00:24:33,840
or tcp credentials all right we're ready

715
00:24:29,440 --> 00:24:33,840
i'll go ahead and save those

716
00:24:34,720 --> 00:24:38,080
now back to the main cloud plugin

717
00:24:37,120 --> 00:24:40,720
dashboard

718
00:24:38,080 --> 00:24:42,559
i have a variety of options here with

719
00:24:40,720 --> 00:24:45,200
the gateway selected first

720
00:24:42,559 --> 00:24:47,760
so a redirector is actually a really

721
00:24:45,200 --> 00:24:49,760
powerful micro linux server deployed in

722
00:24:47,760 --> 00:24:50,720
aws inside your aws using your

723
00:24:49,760 --> 00:24:52,720
credentials

724
00:24:50,720 --> 00:24:54,240
and what it will do is it will create a

725
00:24:52,720 --> 00:24:54,880
connection between your operator

726
00:24:54,240 --> 00:24:57,120
instance

727
00:24:54,880 --> 00:24:58,640
on your desktop and that linux server

728
00:24:57,120 --> 00:25:01,919
that it will provision for you

729
00:24:58,640 --> 00:25:03,279
via in a reverse ssh tunnel and it will

730
00:25:01,919 --> 00:25:05,360
tunnel the connection

731
00:25:03,279 --> 00:25:06,960
as agents hit the redirector it'll

732
00:25:05,360 --> 00:25:08,720
tunnel that connection back into your

733
00:25:06,960 --> 00:25:11,039
operator instance for you

734
00:25:08,720 --> 00:25:12,400
kind of like socad if you use to that or

735
00:25:11,039 --> 00:25:12,880
netcat which you could use for this

736
00:25:12,400 --> 00:25:14,400
purpose

737
00:25:12,880 --> 00:25:16,480
but it will take care of all of that for

738
00:25:14,400 --> 00:25:17,440
you and it will create a very simple way

739
00:25:16,480 --> 00:25:20,480
for you to accept

740
00:25:17,440 --> 00:25:22,880
internet beacons let's go ahead and

741
00:25:20,480 --> 00:25:26,080
start with gateway

742
00:25:22,880 --> 00:25:29,360
and let's go ahead and deploy

743
00:25:26,080 --> 00:25:31,600
all right success my redirector is ready

744
00:25:29,360 --> 00:25:34,720
now in order to actually use it i need

745
00:25:31,600 --> 00:25:39,840
to head back to the operate section

746
00:25:34,720 --> 00:25:42,159
and i need to go to the tunnel icon

747
00:25:39,840 --> 00:25:43,360
now i can see here that i have in orange

748
00:25:42,159 --> 00:25:44,320
meaning it's in the process of

749
00:25:43,360 --> 00:25:46,400
connecting

750
00:25:44,320 --> 00:25:47,360
i can see that i have a host that has an

751
00:25:46,400 --> 00:25:49,279
ec2 address

752
00:25:47,360 --> 00:25:50,640
makes sense that's where i deployed my

753
00:25:49,279 --> 00:25:53,360
redirector

754
00:25:50,640 --> 00:25:55,120
and i am just waiting for it to go green

755
00:25:53,360 --> 00:25:57,520
in order for me to connect to

756
00:25:55,120 --> 00:25:58,880
all right there we go i was able to

757
00:25:57,520 --> 00:26:01,440
click on it connect it

758
00:25:58,880 --> 00:26:03,679
now i have a tunnel open that is my

759
00:26:01,440 --> 00:26:06,640
reverse ssh channel between operator

760
00:26:03,679 --> 00:26:07,600
and this address and head back to my

761
00:26:06,640 --> 00:26:11,840
local computer

762
00:26:07,600 --> 00:26:14,640
where i have pneumo running

763
00:26:11,840 --> 00:26:17,039
and redeploy numa and this time i'm

764
00:26:14,640 --> 00:26:18,159
going to do it with i'll say the name of

765
00:26:17,039 --> 00:26:25,840
ec2

766
00:26:18,159 --> 00:26:25,840
server and the address will be

767
00:26:26,559 --> 00:26:33,279
what i copied and port 2323 which is the

768
00:26:30,159 --> 00:26:36,240
default tcp port

769
00:26:33,279 --> 00:26:36,799
all right receive my new agent so let's

770
00:26:36,240 --> 00:26:39,600
say

771
00:26:36,799 --> 00:26:41,440
we want to connect another external

772
00:26:39,600 --> 00:26:44,080
computer with an agent on it back to my

773
00:26:41,440 --> 00:26:46,960
operator so not a local to local test

774
00:26:44,080 --> 00:26:46,960
i'll stop my agent

775
00:26:47,520 --> 00:26:54,880
i will head back to cloud plugin

776
00:26:52,400 --> 00:26:56,640
where i will select a linux server to

777
00:26:54,880 --> 00:26:58,799
spin up

778
00:26:56,640 --> 00:27:00,400
i will choose to drop a new agent on it

779
00:26:58,799 --> 00:27:02,240
pre-compromise it

780
00:27:00,400 --> 00:27:03,600
and then i will select the default

781
00:27:02,240 --> 00:27:04,960
redirector which is the one that i

782
00:27:03,600 --> 00:27:06,400
currently have active let's go ahead and

783
00:27:04,960 --> 00:27:08,720
do that all right

784
00:27:06,400 --> 00:27:11,840
i have a new server being provisioned

785
00:27:08,720 --> 00:27:15,520
inside of ec2 right now

786
00:27:11,840 --> 00:27:18,880
i can head over to the operate section

787
00:27:15,520 --> 00:27:20,240
i can select my red computers

788
00:27:18,880 --> 00:27:23,039
this is my old one let me go ahead and

789
00:27:20,240 --> 00:27:24,559
clean this one up for now

790
00:27:23,039 --> 00:27:26,080
i gotta archive it i'm gonna go ahead

791
00:27:24,559 --> 00:27:28,320
and delete it i don't plan on using it

792
00:27:26,080 --> 00:27:28,320
again

793
00:27:29,120 --> 00:27:33,679
and so what i'm doing now is i'm waiting

794
00:27:31,600 --> 00:27:35,120
for a beacon to come in for my newly

795
00:27:33,679 --> 00:27:37,440
provisioned linux server

796
00:27:35,120 --> 00:27:39,360
so let's give that just a minute all

797
00:27:37,440 --> 00:27:40,799
right there we go we just got our beacon

798
00:27:39,360 --> 00:27:43,120
coming from an ip address

799
00:27:40,799 --> 00:27:44,880
in our ec2 space so let's go ahead and

800
00:27:43,120 --> 00:27:46,240
check our ranges

801
00:27:44,880 --> 00:27:48,159
i can see we have a new range called

802
00:27:46,240 --> 00:27:50,240
cloud computers

803
00:27:48,159 --> 00:27:52,000
and it looks like we have a green agent

804
00:27:50,240 --> 00:27:56,000
clicking on the agent

805
00:27:52,000 --> 00:27:56,000
i can go ahead and open a reverse shell

806
00:27:57,760 --> 00:28:04,399
i can look around see where i am

807
00:28:01,520 --> 00:28:04,960
and treat it as if it were a compromise

808
00:28:04,399 --> 00:28:06,559
machine

809
00:28:04,960 --> 00:28:09,840
i can go ahead and i can deploy an

810
00:28:06,559 --> 00:28:09,840
adversary against it

811
00:28:13,120 --> 00:28:16,399
i can view all of my results kind of

812
00:28:15,120 --> 00:28:18,559
curious what did it find for recent

813
00:28:16,399 --> 00:28:22,559
files on a newly provisioned ect

814
00:28:18,559 --> 00:28:24,799
machine authorized keys that makes sense

815
00:28:22,559 --> 00:28:25,840
finally i'm going to highlight the

816
00:28:24,799 --> 00:28:28,720
operator support

817
00:28:25,840 --> 00:28:30,720
repository on github which is our active

818
00:28:28,720 --> 00:28:31,600
spot for support as an open source

819
00:28:30,720 --> 00:28:34,080
project

820
00:28:31,600 --> 00:28:36,559
and it is our active spot for feature

821
00:28:34,080 --> 00:28:38,880
requests bug reports or issues

822
00:28:36,559 --> 00:28:40,720
um a variety of tools that are open

823
00:28:38,880 --> 00:28:42,159
source that we make available

824
00:28:40,720 --> 00:28:44,080
plugins that are open source you can

825
00:28:42,159 --> 00:28:45,679
import into your operator instance

826
00:28:44,080 --> 00:28:47,520
even something called translators which

827
00:28:45,679 --> 00:28:49,279
we made open source which is the ability

828
00:28:47,520 --> 00:28:51,840
to extend the protocols

829
00:28:49,279 --> 00:28:53,919
that your operator instance will accept

830
00:28:51,840 --> 00:28:56,640
so if you wanted to add dns c2 or you

831
00:28:53,919 --> 00:29:00,000
wanted to add dns over https

832
00:28:56,640 --> 00:29:01,039
anything you want to add here maybe ssh

833
00:29:00,000 --> 00:29:03,279
you can go ahead and create your own

834
00:29:01,039 --> 00:29:04,880
translator use ours as examples

835
00:29:03,279 --> 00:29:06,480
we even have example agents that go

836
00:29:04,880 --> 00:29:08,640
along with these

837
00:29:06,480 --> 00:29:10,799
and we have readmes and guides and so

838
00:29:08,640 --> 00:29:12,640
forth that will kind of walk you through

839
00:29:10,799 --> 00:29:14,159
things that i showed today but also some

840
00:29:12,640 --> 00:29:15,679
things i didn't show you today

841
00:29:14,159 --> 00:29:17,440
i hope you enjoyed today's tool

842
00:29:15,679 --> 00:29:18,880
demonstration of prelude operator

843
00:29:17,440 --> 00:29:20,720
i encourage you to reach out to me

844
00:29:18,880 --> 00:29:21,919
anytime you want via twitter

845
00:29:20,720 --> 00:29:24,880
it's an easy way to get me at

846
00:29:21,919 --> 00:29:26,640
privateducky or also via the operator

847
00:29:24,880 --> 00:29:28,559
support github repository

848
00:29:26,640 --> 00:29:29,840
we're very active in communicating with

849
00:29:28,559 --> 00:29:31,440
everybody in the open source

850
00:29:29,840 --> 00:29:33,440
as we try to make a lot of what we do

851
00:29:31,440 --> 00:29:34,480
here available to you via open source

852
00:29:33,440 --> 00:29:37,600
and free tooling

853
00:29:34,480 --> 00:29:37,600
reach out anytime

