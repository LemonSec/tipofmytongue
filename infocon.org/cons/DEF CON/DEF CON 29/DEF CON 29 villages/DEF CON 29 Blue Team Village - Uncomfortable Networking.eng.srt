1
00:00:09,120 --> 00:00:10,320
nearly a decade of

2
00:00:10,320 --> 00:00:12,320
working as a network engineer there have

3
00:00:12,320 --> 00:00:13,679
been a number of different things that

4
00:00:13,679 --> 00:00:13,920
have

5
00:00:13,920 --> 00:00:15,360
really gotten to me when it comes to the

6
00:00:15,360 --> 00:00:17,840
intersection of networking and security

7
00:00:17,840 --> 00:00:19,359
typically when i push back on these

8
00:00:19,359 --> 00:00:21,760
things it tends to get people just

9
00:00:21,760 --> 00:00:24,160
get tens it tends to make people squirm

10
00:00:24,160 --> 00:00:25,840
and sometimes even grab their pitchforks

11
00:00:25,840 --> 00:00:27,039
and torches

12
00:00:27,039 --> 00:00:29,039
these are three of those things things

13
00:00:29,039 --> 00:00:30,720
which really need to be thought more

14
00:00:30,720 --> 00:00:31,599
about

15
00:00:31,599 --> 00:00:34,079
things that with which that don't always

16
00:00:34,079 --> 00:00:35,600
improve your security posture within

17
00:00:35,600 --> 00:00:36,800
your network

18
00:00:36,800 --> 00:00:38,800
and these are uncomfortable networking

19
00:00:38,800 --> 00:00:40,480
topics

20
00:00:40,480 --> 00:00:42,559
hi i'm charles rumford and i'm here to

21
00:00:42,559 --> 00:00:43,840
tell you about some uncomfortable

22
00:00:43,840 --> 00:00:45,440
networking topics but first

23
00:00:45,440 --> 00:00:47,840
a little bit about myself for the last

24
00:00:47,840 --> 00:00:48,640
10 years

25
00:00:48,640 --> 00:00:50,960
i have worked as a network engineer in

26
00:00:50,960 --> 00:00:52,320
both higher education and in the

27
00:00:52,320 --> 00:00:53,280
corporate world

28
00:00:53,280 --> 00:00:54,719
and before that i was assistance

29
00:00:54,719 --> 00:00:57,360
administrator probably my most formative

30
00:00:57,360 --> 00:00:58,079
years

31
00:00:58,079 --> 00:01:01,199
in aiming in these topics is was working

32
00:01:01,199 --> 00:01:01,920
as

33
00:01:01,920 --> 00:01:03,520
a wireless network engineer in higher

34
00:01:03,520 --> 00:01:05,680
education where the

35
00:01:05,680 --> 00:01:08,000
um where there's a strong convergence of

36
00:01:08,000 --> 00:01:09,119
usability

37
00:01:09,119 --> 00:01:12,640
security and networking and flexibility

38
00:01:12,640 --> 00:01:15,439
along with manageability to make sure

39
00:01:15,439 --> 00:01:16,320
that the

40
00:01:16,320 --> 00:01:19,119
system is working i've also had i've

41
00:01:19,119 --> 00:01:20,240
also held

42
00:01:20,240 --> 00:01:21,439
i've also done work as a network

43
00:01:21,439 --> 00:01:24,080
architect automation engineer

44
00:01:24,080 --> 00:01:26,080
linux system men i've also been an

45
00:01:26,080 --> 00:01:29,200
adjunct professor and then outside of

46
00:01:29,200 --> 00:01:31,360
the workspace i've i do a lot of

47
00:01:31,360 --> 00:01:33,600
photography knitting

48
00:01:33,600 --> 00:01:35,360
and if you really want to go look it up

49
00:01:35,360 --> 00:01:38,159
i am a campanologist

50
00:01:38,159 --> 00:01:39,920
we'll be curious to see if anyone asks

51
00:01:39,920 --> 00:01:43,119
me any questions about that

52
00:01:43,360 --> 00:01:46,479
before we get deep into the topics i

53
00:01:46,479 --> 00:01:48,560
really want to put some constraints

54
00:01:48,560 --> 00:01:50,799
around

55
00:01:50,799 --> 00:01:53,600
the area in which i'm talking about i'm

56
00:01:53,600 --> 00:01:54,000
in this

57
00:01:54,000 --> 00:01:57,200
talk i'm not talking about client

58
00:01:57,200 --> 00:02:00,240
networks i am talking about

59
00:02:00,240 --> 00:02:03,920
networks that are providing services

60
00:02:03,920 --> 00:02:06,399
to clients typically this would be a

61
00:02:06,399 --> 00:02:08,399
data center of some sort

62
00:02:08,399 --> 00:02:10,318
spaces where you might have web servers

63
00:02:10,318 --> 00:02:13,200
you might have

64
00:02:13,360 --> 00:02:15,440
database servers dns things of that

65
00:02:15,440 --> 00:02:16,720
nature

66
00:02:16,720 --> 00:02:19,200
that is the primary focus of this talk

67
00:02:19,200 --> 00:02:20,959
in the primary areas in which i am

68
00:02:20,959 --> 00:02:22,879
talking about

69
00:02:22,879 --> 00:02:25,760
a lot of these a couple of these don't

70
00:02:25,760 --> 00:02:27,680
really apply to

71
00:02:27,680 --> 00:02:31,519
client networks but can be used in those

72
00:02:31,519 --> 00:02:33,680
spaces

73
00:02:33,680 --> 00:02:36,560
so i think everyone's familiar with the

74
00:02:36,560 --> 00:02:38,400
project management triangle

75
00:02:38,400 --> 00:02:41,599
choose to you can either have a project

76
00:02:41,599 --> 00:02:44,640
be qual good quality and low cost but

77
00:02:44,640 --> 00:02:46,319
it's going to take a lot of time

78
00:02:46,319 --> 00:02:47,680
or it's going to take a little bit of

79
00:02:47,680 --> 00:02:49,280
time and be good quality but it's going

80
00:02:49,280 --> 00:02:50,720
to cost you a lot of money

81
00:02:50,720 --> 00:02:53,040
or it's going to be low cost and low

82
00:02:53,040 --> 00:02:54,319
time

83
00:02:54,319 --> 00:02:56,400
but it's not going to be great quality

84
00:02:56,400 --> 00:02:57,440
and this is something that we think

85
00:02:57,440 --> 00:02:59,519
about a lot when it comes to

86
00:02:59,519 --> 00:03:02,560
projects right but we don't think about

87
00:03:02,560 --> 00:03:03,440
it we don't

88
00:03:03,440 --> 00:03:04,800
what do we think about when we think

89
00:03:04,800 --> 00:03:07,200
about design so i've kind of

90
00:03:07,200 --> 00:03:10,400
changed the triangle and typically when

91
00:03:10,400 --> 00:03:11,840
we deploy something in the networking

92
00:03:11,840 --> 00:03:13,760
perspective

93
00:03:13,760 --> 00:03:16,840
we choose to either it's manageable and

94
00:03:16,840 --> 00:03:18,000
secure

95
00:03:18,000 --> 00:03:20,959
but it's not really usable or it's

96
00:03:20,959 --> 00:03:21,680
usable

97
00:03:21,680 --> 00:03:23,840
and secure but it becomes a management

98
00:03:23,840 --> 00:03:24,720
nightmare

99
00:03:24,720 --> 00:03:27,280
or it's usable in management manageable

100
00:03:27,280 --> 00:03:29,040
but it's not always the most secure

101
00:03:29,040 --> 00:03:29,599
option

102
00:03:29,599 --> 00:03:32,879
right and we think i've run into this

103
00:03:32,879 --> 00:03:34,400
numerous times while working in the

104
00:03:34,400 --> 00:03:36,239
networking space especially around

105
00:03:36,239 --> 00:03:38,080
security

106
00:03:38,080 --> 00:03:42,159
when deploying security um architectures

107
00:03:42,159 --> 00:03:43,599
right but what if i were to say there

108
00:03:43,599 --> 00:03:45,040
are a couple of things that we can think

109
00:03:45,040 --> 00:03:46,000
about that we can do

110
00:03:46,000 --> 00:03:48,480
inside of our networks that increase our

111
00:03:48,480 --> 00:03:49,760
manageability

112
00:03:49,760 --> 00:03:52,879
right and then also increases our

113
00:03:52,879 --> 00:03:54,080
usability

114
00:03:54,080 --> 00:03:57,120
while either holding security at a

115
00:03:57,120 --> 00:03:57,680
current

116
00:03:57,680 --> 00:03:59,840
current stance or possibly even

117
00:03:59,840 --> 00:04:00,959
improving it

118
00:04:00,959 --> 00:04:04,000
right you're probably saying that crazy

119
00:04:04,000 --> 00:04:07,680
but just hear me out okay

120
00:04:07,680 --> 00:04:11,040
right so for a number of you so let's

121
00:04:11,040 --> 00:04:11,680
dive in

122
00:04:11,680 --> 00:04:14,720
right and for the number of years um

123
00:04:14,720 --> 00:04:16,720
there's one thing that has always gotten

124
00:04:16,720 --> 00:04:17,759
to me

125
00:04:17,759 --> 00:04:21,040
and that is when i can't ping something

126
00:04:21,040 --> 00:04:24,880
right icmp is your friend

127
00:04:24,880 --> 00:04:27,280
now before you go get your pitchforks

128
00:04:27,280 --> 00:04:29,040
and torches and come after me

129
00:04:29,040 --> 00:04:32,320
hear me out icmp is an

130
00:04:32,320 --> 00:04:34,000
important functional part of the

131
00:04:34,000 --> 00:04:36,240
internet it is the how the internet

132
00:04:36,240 --> 00:04:39,520
passes messages from one from one space

133
00:04:39,520 --> 00:04:40,800
to another right

134
00:04:40,800 --> 00:04:43,199
and they're not just messages of hey are

135
00:04:43,199 --> 00:04:44,960
you there yes yes i am

136
00:04:44,960 --> 00:04:46,800
but they're also messages of hey that's

137
00:04:46,800 --> 00:04:48,160
prohibited hey

138
00:04:48,160 --> 00:04:50,240
you can't do that hey that thing don't

139
00:04:50,240 --> 00:04:51,680
exist right

140
00:04:51,680 --> 00:04:54,720
and we even we've even used icmp

141
00:04:54,720 --> 00:04:58,000
for routes in the past right all all of

142
00:04:58,000 --> 00:04:58,479
these are

143
00:04:58,479 --> 00:05:01,120
ic our icmp messages and they're all

144
00:05:01,120 --> 00:05:02,080
good things

145
00:05:02,080 --> 00:05:06,400
right but over the years we've come to

146
00:05:06,400 --> 00:05:10,400
we've come to um block icmp because

147
00:05:10,400 --> 00:05:11,919
everyone thinks that

148
00:05:11,919 --> 00:05:15,840
icmp is bad right that icmp is going to

149
00:05:15,840 --> 00:05:16,880
make their system

150
00:05:16,880 --> 00:05:18,800
more vulnerable people are going to be

151
00:05:18,800 --> 00:05:21,360
able to find it

152
00:05:21,360 --> 00:05:24,400
that really isn't true right

153
00:05:24,400 --> 00:05:26,240
so i have some for some questions for

154
00:05:26,240 --> 00:05:27,919
you right

155
00:05:27,919 --> 00:05:30,000
what is the first thing you do when you

156
00:05:30,000 --> 00:05:31,120
when you think that you

157
00:05:31,120 --> 00:05:32,240
have are having some network

158
00:05:32,240 --> 00:05:33,759
connectivity issues i'll give you a

159
00:05:33,759 --> 00:05:36,080
moment

160
00:05:36,479 --> 00:05:39,199
now if you thought to yourself you ping

161
00:05:39,199 --> 00:05:40,000
something

162
00:05:40,000 --> 00:05:41,360
that's probably what everyone comes up

163
00:05:41,360 --> 00:05:43,520
with right i do it all the time

164
00:05:43,520 --> 00:05:45,440
the first thing i do is ping the gateway

165
00:05:45,440 --> 00:05:47,199
ping google ping

166
00:05:47,199 --> 00:05:50,400
cloudflare ping something right can i

167
00:05:50,400 --> 00:05:51,520
get a ping through

168
00:05:51,520 --> 00:05:54,800
right we also use the uh pings

169
00:05:54,800 --> 00:05:58,080
or icmp messages for reachability

170
00:05:58,080 --> 00:06:01,120
latency and jitter right which are

171
00:06:01,120 --> 00:06:03,600
all things that are easy to figure out

172
00:06:03,600 --> 00:06:05,199
using a simple ping

173
00:06:05,199 --> 00:06:07,199
right and in my mind as a network

174
00:06:07,199 --> 00:06:09,440
engineer if something is not pingable

175
00:06:09,440 --> 00:06:11,440
then it's down and it's not connected to

176
00:06:11,440 --> 00:06:13,680
the network as far as i'm concerned as a

177
00:06:13,680 --> 00:06:14,800
network engineer

178
00:06:14,800 --> 00:06:17,360
is if i can't ping it then it's low

179
00:06:17,360 --> 00:06:19,440
level networking isn't working

180
00:06:19,440 --> 00:06:22,800
right so let me ask you another question

181
00:06:22,800 --> 00:06:26,160
right oh there we go let me ask you

182
00:06:26,160 --> 00:06:27,360
another question

183
00:06:27,360 --> 00:06:31,840
what if google cloudflare and quad9

184
00:06:31,840 --> 00:06:34,479
one day decided to block all icmp

185
00:06:34,479 --> 00:06:36,800
inbound traffic to their services

186
00:06:36,800 --> 00:06:39,840
right or better yet as a network

187
00:06:39,840 --> 00:06:42,560
operator i decide to block all icmp

188
00:06:42,560 --> 00:06:45,039
to your network gateway i basically i

189
00:06:45,039 --> 00:06:46,000
say

190
00:06:46,000 --> 00:06:48,000
no more pinging the gateway that is not

191
00:06:48,000 --> 00:06:49,759
allowed in this network

192
00:06:49,759 --> 00:06:52,560
right take a moment to ponder this that

193
00:06:52,560 --> 00:06:54,560
default test that we all use

194
00:06:54,560 --> 00:06:55,680
for determining whether there's

195
00:06:55,680 --> 00:06:57,680
networking issues or not

196
00:06:57,680 --> 00:07:01,199
goes away we no longer have that

197
00:07:01,199 --> 00:07:04,560
very standard test that we use

198
00:07:04,560 --> 00:07:06,080
right it's become a test that we take

199
00:07:06,080 --> 00:07:08,960
for granted and yet at the same time

200
00:07:08,960 --> 00:07:11,680
we [ __ ] it on a regular basis so why

201
00:07:11,680 --> 00:07:13,599
do we

202
00:07:13,599 --> 00:07:16,720
stop icmp traffic to servers to services

203
00:07:16,720 --> 00:07:19,599
right typically it's because if it ain't

204
00:07:19,599 --> 00:07:21,360
pingable that it ain't fast

205
00:07:21,360 --> 00:07:23,759
it can't be found well i'm here to tell

206
00:07:23,759 --> 00:07:25,120
you that that is

207
00:07:25,120 --> 00:07:30,240
false that is quite false right there

208
00:07:30,240 --> 00:07:30,720
are

209
00:07:30,720 --> 00:07:34,000
many many ways to find a service on the

210
00:07:34,000 --> 00:07:35,280
internet

211
00:07:35,280 --> 00:07:38,720
without using icmp right security

212
00:07:38,720 --> 00:07:40,400
through obscurity has never been the

213
00:07:40,400 --> 00:07:41,120
answer

214
00:07:41,120 --> 00:07:43,680
it never has been and it never will be

215
00:07:43,680 --> 00:07:44,960
and all you're doing is adding

216
00:07:44,960 --> 00:07:46,960
complexity to your situation

217
00:07:46,960 --> 00:07:49,280
right and so as a friend i'm going to

218
00:07:49,280 --> 00:07:50,879
tell you something

219
00:07:50,879 --> 00:07:53,599
right an open port to the internet is an

220
00:07:53,599 --> 00:07:55,120
open port to the internet

221
00:07:55,120 --> 00:07:58,400
right if you have a resource on the

222
00:07:58,400 --> 00:07:59,440
network

223
00:07:59,440 --> 00:08:02,000
and you have an open ssh port or an open

224
00:08:02,000 --> 00:08:03,280
http port

225
00:08:03,280 --> 00:08:06,479
or anything someone knows about it i can

226
00:08:06,479 --> 00:08:07,120
tell you that

227
00:08:07,120 --> 00:08:09,280
right now at one of the universities

228
00:08:09,280 --> 00:08:10,879
that i worked at

229
00:08:10,879 --> 00:08:12,560
one of the researchers on a regular

230
00:08:12,560 --> 00:08:15,440
basis scanned the entire internet

231
00:08:15,440 --> 00:08:18,879
with in under 40 or under 24 hours

232
00:08:18,879 --> 00:08:21,199
on a regular basis every port on the

233
00:08:21,199 --> 00:08:22,720
open internet

234
00:08:22,720 --> 00:08:24,960
and able to map out what's going on and

235
00:08:24,960 --> 00:08:26,000
she wasn't using

236
00:08:26,000 --> 00:08:29,039
icmp right

237
00:08:29,039 --> 00:08:31,280
if a port is open on the internet then

238
00:08:31,280 --> 00:08:33,919
it is open

239
00:08:35,360 --> 00:08:37,919
so i say allow all the icmp and let's

240
00:08:37,919 --> 00:08:39,760
just make our lives so much easier

241
00:08:39,760 --> 00:08:42,000
it's easier to call it's easier to

242
00:08:42,000 --> 00:08:43,679
figure out

243
00:08:43,679 --> 00:08:45,920
what's up what's down it makes

244
00:08:45,920 --> 00:08:47,440
troubleshooting the first lines of

245
00:08:47,440 --> 00:08:48,320
troubleshooting

246
00:08:48,320 --> 00:08:51,360
so much easier right and plus how many

247
00:08:51,360 --> 00:08:53,279
times have you run an nmap command

248
00:08:53,279 --> 00:08:56,160
with the dash pn flag to just bypass

249
00:08:56,160 --> 00:08:57,519
icmp

250
00:08:57,519 --> 00:08:59,680
we know the port's open why are we

251
00:08:59,680 --> 00:09:01,279
hiding something that's already

252
00:09:01,279 --> 00:09:09,839
available right

253
00:09:10,080 --> 00:09:11,680
so some things to consider when turning

254
00:09:11,680 --> 00:09:13,200
on icmp right

255
00:09:13,200 --> 00:09:14,320
the first thing from a network

256
00:09:14,320 --> 00:09:16,560
engineering perspective is can you at

257
00:09:16,560 --> 00:09:18,640
least turn it on for the local network

258
00:09:18,640 --> 00:09:20,560
right if you lease allow it in the local

259
00:09:20,560 --> 00:09:22,720
network then

260
00:09:22,720 --> 00:09:24,160
troubleshooting inside the network

261
00:09:24,160 --> 00:09:26,240
becomes easier

262
00:09:26,240 --> 00:09:28,399
yes i would prefer to icmp be open

263
00:09:28,399 --> 00:09:29,279
everywhere

264
00:09:29,279 --> 00:09:30,640
but if you just start in the local

265
00:09:30,640 --> 00:09:32,399
network awesome

266
00:09:32,399 --> 00:09:34,560
right but some other things to consider

267
00:09:34,560 --> 00:09:36,399
you can rate limit icmp

268
00:09:36,399 --> 00:09:38,080
especially at your firewall or at the

269
00:09:38,080 --> 00:09:39,839
host level remember

270
00:09:39,839 --> 00:09:42,160
host level firewalling is super awesome

271
00:09:42,160 --> 00:09:44,720
and super handy

272
00:09:44,720 --> 00:09:47,440
here's an example command from a linux

273
00:09:47,440 --> 00:09:48,480
iptables

274
00:09:48,480 --> 00:09:51,600
to rate limit icmp down to five uh five

275
00:09:51,600 --> 00:09:55,839
frames a second all right

276
00:09:56,240 --> 00:09:59,120
we can also limit the types of icmp

277
00:09:59,120 --> 00:10:00,560
messages there are a bunch of different

278
00:10:00,560 --> 00:10:02,560
types of icmp messages

279
00:10:02,560 --> 00:10:04,160
we can limit which ones are allowed so

280
00:10:04,160 --> 00:10:05,360
one of the things that we do at the

281
00:10:05,360 --> 00:10:07,040
networking gear level

282
00:10:07,040 --> 00:10:09,760
is we limit which icmp messages we

283
00:10:09,760 --> 00:10:10,480
accept

284
00:10:10,480 --> 00:10:12,320
and handle right this is something you

285
00:10:12,320 --> 00:10:13,839
can also do at the firewall

286
00:10:13,839 --> 00:10:16,560
and at the host level right but the

287
00:10:16,560 --> 00:10:18,640
other thing to consider

288
00:10:18,640 --> 00:10:21,440
is that i that icmp messages tend to

289
00:10:21,440 --> 00:10:23,120
help improve the usability of the

290
00:10:23,120 --> 00:10:23,600
network

291
00:10:23,600 --> 00:10:25,279
right and the user experience of the

292
00:10:25,279 --> 00:10:26,959
network did you know that a lot of

293
00:10:26,959 --> 00:10:28,800
browsers when you try to navigate to a

294
00:10:28,800 --> 00:10:29,839
website

295
00:10:29,839 --> 00:10:33,360
which isn't allowed that when the icmp

296
00:10:33,360 --> 00:10:35,600
reject message comes that it will

297
00:10:35,600 --> 00:10:37,440
present the user with a message that

298
00:10:37,440 --> 00:10:38,959
says hey

299
00:10:38,959 --> 00:10:40,880
you're not allowed to do that right

300
00:10:40,880 --> 00:10:42,399
that's independent of the web

301
00:10:42,399 --> 00:10:45,440
the web application itself right

302
00:10:45,440 --> 00:10:47,920
also like i said there are a number of

303
00:10:47,920 --> 00:10:49,120
times where i've

304
00:10:49,120 --> 00:10:51,760
pinged something thought it was down and

305
00:10:51,760 --> 00:10:52,480
went running

306
00:10:52,480 --> 00:10:54,240
one time i thought the whole set of dns

307
00:10:54,240 --> 00:10:55,760
servers were down went running down the

308
00:10:55,760 --> 00:10:56,800
hallways

309
00:10:56,800 --> 00:10:59,600
to see yelling the dns servers down the

310
00:10:59,600 --> 00:11:00,880
dns server's down

311
00:11:00,880 --> 00:11:02,480
to only have the windows administrator

312
00:11:02,480 --> 00:11:04,079
pop his head out and be like i'm logged

313
00:11:04,079 --> 00:11:06,079
into them they're just fine

314
00:11:06,079 --> 00:11:08,000
turned out to be another issue but i

315
00:11:08,000 --> 00:11:09,519
couldn't ping them so as far as i'm

316
00:11:09,519 --> 00:11:12,560
concerned they were down

317
00:11:13,040 --> 00:11:15,600
right so just a reminder that i the

318
00:11:15,600 --> 00:11:16,959
security through obscurity

319
00:11:16,959 --> 00:11:20,480
is yuck it is not worth it um

320
00:11:20,480 --> 00:11:22,480
an open port to the internet is an open

321
00:11:22,480 --> 00:11:23,600
port to the internet

322
00:11:23,600 --> 00:11:27,680
so changing port numbers not that great

323
00:11:27,680 --> 00:11:30,160
right once somebody finds it it will be

324
00:11:30,160 --> 00:11:32,240
found and it will be pounded

325
00:11:32,240 --> 00:11:35,519
right um the other thing i've also heard

326
00:11:35,519 --> 00:11:36,640
people doing is

327
00:11:36,640 --> 00:11:40,160
not putting things in dns this is

328
00:11:40,160 --> 00:11:42,480
not helpful right when you're unable to

329
00:11:42,480 --> 00:11:44,320
find something in dns unable to type

330
00:11:44,320 --> 00:11:46,240
something on a command line it becomes

331
00:11:46,240 --> 00:11:47,040
harder to

332
00:11:47,040 --> 00:11:48,800
troubleshoot and understand what's going

333
00:11:48,800 --> 00:11:51,760
on right so i say put everything in i

334
00:11:51,760 --> 00:11:54,639
allow all the icmp put everything in dns

335
00:11:54,639 --> 00:11:56,000
and keep ssh on port

336
00:11:56,000 --> 00:11:59,360
22 forever and ever

337
00:12:08,480 --> 00:12:11,680
the next topic is one uh that i

338
00:12:11,680 --> 00:12:14,720
i have a lot of feelings about it's one

339
00:12:14,720 --> 00:12:17,120
where a lot of people deploy it in the

340
00:12:17,120 --> 00:12:18,639
hopes of

341
00:12:18,639 --> 00:12:20,800
um building a little security blanket

342
00:12:20,800 --> 00:12:24,320
around them but in reality they're just

343
00:12:24,320 --> 00:12:26,160
decreasing the usability of the network

344
00:12:26,160 --> 00:12:28,079
and dramatically

345
00:12:28,079 --> 00:12:30,880
making it harder to manage their network

346
00:12:30,880 --> 00:12:33,120
and what i'm speaking of is nat

347
00:12:33,120 --> 00:12:36,000
that is used all over the place and i'm

348
00:12:36,000 --> 00:12:37,440
here to tell you that nat

349
00:12:37,440 --> 00:12:39,760
is not a security barrier really it's

350
00:12:39,760 --> 00:12:41,360
not

351
00:12:41,360 --> 00:12:44,399
there's a lot of not happening

352
00:12:44,399 --> 00:12:46,079
on firewalls and things of that nature

353
00:12:46,079 --> 00:12:50,000
but i'm talking about natting itself

354
00:12:50,240 --> 00:12:52,320
for those who don't know nat stands for

355
00:12:52,320 --> 00:12:53,839
network address translation

356
00:12:53,839 --> 00:12:54,880
and there are a couple of different

357
00:12:54,880 --> 00:12:57,839
flavors of it um but it generally allows

358
00:12:57,839 --> 00:13:00,160
us to translate one ip address

359
00:13:00,160 --> 00:13:02,720
and port set into another the most

360
00:13:02,720 --> 00:13:03,519
common use

361
00:13:03,519 --> 00:13:05,920
is in your house you're probably using

362
00:13:05,920 --> 00:13:06,639
that as you

363
00:13:06,639 --> 00:13:09,360
as we speak um to watch this video

364
00:13:09,360 --> 00:13:10,399
because it allows

365
00:13:10,399 --> 00:13:13,519
multiple like multiple devices inside of

366
00:13:13,519 --> 00:13:15,600
your home network to talk to the

367
00:13:15,600 --> 00:13:16,639
internet via your

368
00:13:16,639 --> 00:13:20,160
your isp right but let's focus

369
00:13:20,160 --> 00:13:22,720
on the the enterprise space right and

370
00:13:22,720 --> 00:13:24,480
that's typically used

371
00:13:24,480 --> 00:13:28,560
to to handle two problems one being

372
00:13:28,560 --> 00:13:31,200
not having enough ip addresses um and

373
00:13:31,200 --> 00:13:31,600
two

374
00:13:31,600 --> 00:13:34,639
security the first one not having enough

375
00:13:34,639 --> 00:13:35,839
ip addresses

376
00:13:35,839 --> 00:13:39,680
um is solved by technologies like ipv6

377
00:13:39,680 --> 00:13:42,480
if we could get ipv6 deployed in more

378
00:13:42,480 --> 00:13:44,000
places and get rid of nat that'd be

379
00:13:44,000 --> 00:13:44,639
great

380
00:13:44,639 --> 00:13:47,360
but that's a whole different talk i want

381
00:13:47,360 --> 00:13:50,560
to focus on the security aspects for now

382
00:13:50,560 --> 00:13:53,839
one of the big things that i find

383
00:13:53,839 --> 00:13:56,800
in the conversations i have is a lot of

384
00:13:56,800 --> 00:13:58,079
people

385
00:13:58,079 --> 00:14:00,720
love private ip addressing they think

386
00:14:00,720 --> 00:14:01,199
that

387
00:14:01,199 --> 00:14:04,000
it will prevent people from contacting

388
00:14:04,000 --> 00:14:05,839
or being able to get to a device or a

389
00:14:05,839 --> 00:14:07,040
resource

390
00:14:07,040 --> 00:14:09,839
but in reality private ip addressing

391
00:14:09,839 --> 00:14:11,600
isn't a magic security blanket

392
00:14:11,600 --> 00:14:15,360
right a lot of people put stuff behind

393
00:14:15,360 --> 00:14:18,800
gnats and magically think that

394
00:14:18,800 --> 00:14:19,600
everything

395
00:14:19,600 --> 00:14:22,160
is hunky-dory right just because it has

396
00:14:22,160 --> 00:14:23,680
a private ip address it's all of a

397
00:14:23,680 --> 00:14:25,440
sudden magically protected

398
00:14:25,440 --> 00:14:27,680
and typically i start to see people

399
00:14:27,680 --> 00:14:29,360
getting lacks about their security

400
00:14:29,360 --> 00:14:30,480
posture

401
00:14:30,480 --> 00:14:32,399
i've seen a couple of times where things

402
00:14:32,399 --> 00:14:34,399
have been compromised

403
00:14:34,399 --> 00:14:37,120
after being moved into a nat and having

404
00:14:37,120 --> 00:14:38,240
private ip addresses

405
00:14:38,240 --> 00:14:40,720
than when they had public ip addresses

406
00:14:40,720 --> 00:14:41,279
right

407
00:14:41,279 --> 00:14:43,279
but like i said i've seen a number of

408
00:14:43,279 --> 00:14:44,800
administrators start to get lacks about

409
00:14:44,800 --> 00:14:46,240
their security posture because

410
00:14:46,240 --> 00:14:48,720
everything has a private ip address

411
00:14:48,720 --> 00:14:51,760
right so let's take a look

412
00:14:51,760 --> 00:14:55,440
at um some some network diagrams real

413
00:14:55,440 --> 00:14:56,880
quick right

414
00:14:56,880 --> 00:14:59,839
so here i have a fairly standardish

415
00:14:59,839 --> 00:15:00,880
corporate network

416
00:15:00,880 --> 00:15:02,720
right we have the internet we have some

417
00:15:02,720 --> 00:15:04,800
clients um and then we this this

418
00:15:04,800 --> 00:15:07,519
nat box um i'm gonna say is the edge of

419
00:15:07,519 --> 00:15:09,839
our data like a data center type thing

420
00:15:09,839 --> 00:15:11,360
right we have some web services we have

421
00:15:11,360 --> 00:15:12,639
some network services and we have some

422
00:15:12,639 --> 00:15:14,480
database services

423
00:15:14,480 --> 00:15:18,560
right but the first thing that nat does

424
00:15:18,560 --> 00:15:20,560
is it creates this inside outside

425
00:15:20,560 --> 00:15:22,160
barrier right now you're probably

426
00:15:22,160 --> 00:15:23,040
thinking to yourself

427
00:15:23,040 --> 00:15:26,959
oh well firewalls do the same thing yes

428
00:15:26,959 --> 00:15:30,320
but firewalls do not separate out ip

429
00:15:30,320 --> 00:15:31,120
addressing

430
00:15:31,120 --> 00:15:33,519
we have one ip addressing scheme inside

431
00:15:33,519 --> 00:15:35,680
the firewall or inside the nat box and

432
00:15:35,680 --> 00:15:38,720
one ip addressing scheme outside the the

433
00:15:38,720 --> 00:15:41,040
the nat box and this leads to all sorts

434
00:15:41,040 --> 00:15:41,759
of problems because

435
00:15:41,759 --> 00:15:44,399
everything now has two ip addresses

436
00:15:44,399 --> 00:15:45,759
right you've got the internal

437
00:15:45,759 --> 00:15:46,959
private ip address and you have the

438
00:15:46,959 --> 00:15:48,800
external public ip address

439
00:15:48,800 --> 00:15:52,000
so that www.tallwireless.com if you're

440
00:15:52,000 --> 00:15:53,839
outside the inter if you're outside the

441
00:15:53,839 --> 00:15:55,360
core outside of the nat

442
00:15:55,360 --> 00:15:57,040
then it might have a one ip address but

443
00:15:57,040 --> 00:15:58,160
when you're inside you have to hit it on

444
00:15:58,160 --> 00:15:59,440
a different ip address where it might

445
00:15:59,440 --> 00:16:00,880
not work

446
00:16:00,880 --> 00:16:04,320
right along with that we have to open up

447
00:16:04,320 --> 00:16:07,120
um ports via destination nat to allow

448
00:16:07,120 --> 00:16:08,000
outside cert

449
00:16:08,000 --> 00:16:10,800
outside clients and devices to talk to

450
00:16:10,800 --> 00:16:12,160
things inside

451
00:16:12,160 --> 00:16:15,199
right that open again an open ip an open

452
00:16:15,199 --> 00:16:16,720
port on the internet is an open port on

453
00:16:16,720 --> 00:16:18,399
the internet

454
00:16:18,399 --> 00:16:20,480
right we now have a we have now have a

455
00:16:20,480 --> 00:16:22,480
lot of nat to track we have to track all

456
00:16:22,480 --> 00:16:23,759
those translations

457
00:16:23,759 --> 00:16:25,360
we now have to have ways of querying it

458
00:16:25,360 --> 00:16:27,120
we have to have ways of

459
00:16:27,120 --> 00:16:28,480
monitoring it to make sure we don't run

460
00:16:28,480 --> 00:16:30,240
out of resources

461
00:16:30,240 --> 00:16:31,920
and if there's a security incident it's

462
00:16:31,920 --> 00:16:33,839
just one more thing that has to be

463
00:16:33,839 --> 00:16:34,880
investigated

464
00:16:34,880 --> 00:16:39,279
to understand what's going on right

465
00:16:39,360 --> 00:16:42,560
now you can get along with doing

466
00:16:42,560 --> 00:16:45,199
what's called hairpin adding or hairpin

467
00:16:45,199 --> 00:16:45,920
routing

468
00:16:45,920 --> 00:16:48,959
which allows a service to

469
00:16:48,959 --> 00:16:52,000
access an internal service to access

470
00:16:52,000 --> 00:16:55,040
an external services ip address

471
00:16:55,040 --> 00:16:57,120
and then have it matted back inside so

472
00:16:57,120 --> 00:16:58,320
for instance

473
00:16:58,320 --> 00:17:00,240
the database server could talk to the

474
00:17:00,240 --> 00:17:02,880
web server on its public ip address

475
00:17:02,880 --> 00:17:04,559
but this is just more configuration that

476
00:17:04,559 --> 00:17:06,400
has to be tracked managed

477
00:17:06,400 --> 00:17:09,439
taken care of and well we

478
00:17:09,439 --> 00:17:12,480
i don't like that simplification

479
00:17:12,480 --> 00:17:15,839
all about simplification right now a lot

480
00:17:15,839 --> 00:17:18,160
of people do their natting

481
00:17:18,160 --> 00:17:20,959
on a firewall right so if you have a

482
00:17:20,959 --> 00:17:22,480
firewall and you're doing that

483
00:17:22,480 --> 00:17:25,039
you now have to open up the ports to

484
00:17:25,039 --> 00:17:25,520
allow

485
00:17:25,520 --> 00:17:27,039
the fire you have to set the firewall

486
00:17:27,039 --> 00:17:29,120
rules to allow that traffic in

487
00:17:29,120 --> 00:17:31,200
right so we've created this complex

488
00:17:31,200 --> 00:17:33,600
space that we now have to manage and

489
00:17:33,600 --> 00:17:34,080
track

490
00:17:34,080 --> 00:17:37,200
and reason about which isn't great fun

491
00:17:37,200 --> 00:17:40,480
all while having two separate names

492
00:17:40,480 --> 00:17:44,080
ip addresses for everything now

493
00:17:44,080 --> 00:17:46,320
i don't like this and i really don't

494
00:17:46,320 --> 00:17:47,360
like the idea

495
00:17:47,360 --> 00:17:50,559
of having um a device

496
00:17:50,559 --> 00:17:52,559
have to contact something based on where

497
00:17:52,559 --> 00:17:54,160
it is in the network i should be able to

498
00:17:54,160 --> 00:17:54,480
just

499
00:17:54,480 --> 00:17:56,400
access the web service and be done with

500
00:17:56,400 --> 00:17:57,520
it

501
00:17:57,520 --> 00:17:59,760
so let's let's let's review real quick

502
00:17:59,760 --> 00:18:00,799
not bad

503
00:18:00,799 --> 00:18:02,960
right there's more to keep track of this

504
00:18:02,960 --> 00:18:04,640
could be all of the destination ads you

505
00:18:04,640 --> 00:18:06,480
need to keep track of the firewall rules

506
00:18:06,480 --> 00:18:07,760
translation records

507
00:18:07,760 --> 00:18:09,600
and there could be even more there's now

508
00:18:09,600 --> 00:18:11,039
more to clean up during commit

509
00:18:11,039 --> 00:18:12,559
decommissioning there's more to clean

510
00:18:12,559 --> 00:18:13,600
there's more to set up during

511
00:18:13,600 --> 00:18:15,360
commissioning right and there's

512
00:18:15,360 --> 00:18:17,200
something could totally be left behind

513
00:18:17,200 --> 00:18:20,320
it also increases our our auditing space

514
00:18:20,320 --> 00:18:22,320
right there's so much more that needs to

515
00:18:22,320 --> 00:18:23,760
be verified

516
00:18:23,760 --> 00:18:26,240
checked to ensure that everything is uh

517
00:18:26,240 --> 00:18:27,760
way it should be

518
00:18:27,760 --> 00:18:30,080
and my personal thing that i hate about

519
00:18:30,080 --> 00:18:31,440
nat is that there's a

520
00:18:31,440 --> 00:18:33,760
two of everything right a classic

521
00:18:33,760 --> 00:18:35,760
example that i've used in the past

522
00:18:35,760 --> 00:18:38,000
is at a previous organization i worked

523
00:18:38,000 --> 00:18:39,520
at you have

524
00:18:39,520 --> 00:18:42,160
a dns server right you have one set of

525
00:18:42,160 --> 00:18:43,919
ip addresses to access the dns server

526
00:18:43,919 --> 00:18:44,480
when you're

527
00:18:44,480 --> 00:18:47,520
inside the network and you have another

528
00:18:47,520 --> 00:18:47,919
set

529
00:18:47,919 --> 00:18:49,919
when you're outside but they all go to

530
00:18:49,919 --> 00:18:51,600
the same server but it means they now

531
00:18:51,600 --> 00:18:52,799
have to track

532
00:18:52,799 --> 00:18:54,960
in the configuration for all of my

533
00:18:54,960 --> 00:18:56,720
switches routers

534
00:18:56,720 --> 00:18:58,960
servers where i am in the network to

535
00:18:58,960 --> 00:19:00,400
decide which

536
00:19:00,400 --> 00:19:02,640
uh to decide which ip address um that

537
00:19:02,640 --> 00:19:04,480
we're going to

538
00:19:04,480 --> 00:19:06,799
right and like i said network position

539
00:19:06,799 --> 00:19:07,760
means something am i

540
00:19:07,760 --> 00:19:09,679
inside the inside the net am i outside

541
00:19:09,679 --> 00:19:10,799
the nat

542
00:19:10,799 --> 00:19:12,559
am i having to go through multiple gnats

543
00:19:12,559 --> 00:19:14,880
because that that that happens a lot

544
00:19:14,880 --> 00:19:17,919
right and the other big thing

545
00:19:17,919 --> 00:19:20,559
is every time i've had to solve some

546
00:19:20,559 --> 00:19:23,039
major problem regarding nat

547
00:19:23,039 --> 00:19:26,160
i've had to deploy more than that more

548
00:19:26,160 --> 00:19:27,600
things to track

549
00:19:27,600 --> 00:19:30,720
more things to keep aware of right so

550
00:19:30,720 --> 00:19:31,760
overall

551
00:19:31,760 --> 00:19:34,240
we have a huge decrease in manageability

552
00:19:34,240 --> 00:19:36,559
and a huge decrease in usability

553
00:19:36,559 --> 00:19:38,080
without actually increasing anything in

554
00:19:38,080 --> 00:19:39,919
our security space right

555
00:19:39,919 --> 00:19:42,799
and then like the icmp we're just

556
00:19:42,799 --> 00:19:44,400
complicating everything without

557
00:19:44,400 --> 00:19:46,240
actually having any security gains

558
00:19:46,240 --> 00:19:49,600
because it's all just security theater

559
00:19:49,600 --> 00:19:51,600
and we don't like security at least i

560
00:19:51,600 --> 00:19:54,000
don't like security theater

561
00:19:54,000 --> 00:19:55,919
so let's take a look at another way of

562
00:19:55,919 --> 00:19:57,679
looking at this right

563
00:19:57,679 --> 00:20:02,080
so in this diagram

564
00:20:02,799 --> 00:20:05,200
in this diagram we have the similar

565
00:20:05,200 --> 00:20:06,559
network but let's make the assumption

566
00:20:06,559 --> 00:20:06,880
that

567
00:20:06,880 --> 00:20:09,840
everything here is public ip addressing

568
00:20:09,840 --> 00:20:10,559
right

569
00:20:10,559 --> 00:20:12,799
so the first thing is is all the web

570
00:20:12,799 --> 00:20:14,480
services all the network services all

571
00:20:14,480 --> 00:20:15,840
the database services

572
00:20:15,840 --> 00:20:18,320
all have public ip addresses right and

573
00:20:18,320 --> 00:20:19,120
i'll touch about

574
00:20:19,120 --> 00:20:20,640
the amount of ip addressing in just a

575
00:20:20,640 --> 00:20:22,400
second but roll with me here for a

576
00:20:22,400 --> 00:20:23,520
second

577
00:20:23,520 --> 00:20:26,400
right now like the nat you still have to

578
00:20:26,400 --> 00:20:27,039
open up

579
00:20:27,039 --> 00:20:30,480
ports for the firewall rules easy peasy

580
00:20:30,480 --> 00:20:34,320
that simple right on top of that to get

581
00:20:34,320 --> 00:20:35,280
that

582
00:20:35,280 --> 00:20:37,360
actual feeling of not being able to get

583
00:20:37,360 --> 00:20:38,320
in

584
00:20:38,320 --> 00:20:40,000
we can set up a default deny on the

585
00:20:40,000 --> 00:20:42,000
inbound everything coming in will be

586
00:20:42,000 --> 00:20:44,559
dropped unless you explicitly allow it

587
00:20:44,559 --> 00:20:46,559
right this gives you the same comfort

588
00:20:46,559 --> 00:20:47,679
feeling

589
00:20:47,679 --> 00:20:51,679
right with actual security posture

590
00:20:51,679 --> 00:20:53,919
of having a private ip address having a

591
00:20:53,919 --> 00:20:55,679
public ip address with a firewall in

592
00:20:55,679 --> 00:20:58,000
front of you that says default deny

593
00:20:58,000 --> 00:21:00,640
is better than having a nat in front of

594
00:21:00,640 --> 00:21:01,440
you

595
00:21:01,440 --> 00:21:04,960
with no firewall and no default deny

596
00:21:04,960 --> 00:21:07,039
right but in this whole thing we've

597
00:21:07,039 --> 00:21:08,480
simplified the architecture

598
00:21:08,480 --> 00:21:11,520
we're doing native routing between our

599
00:21:11,520 --> 00:21:13,679
data center services and our corporate

600
00:21:13,679 --> 00:21:15,919
network so now everything is this

601
00:21:15,919 --> 00:21:18,159
everything there's no insight outside

602
00:21:18,159 --> 00:21:19,760
and so we can just access everything

603
00:21:19,760 --> 00:21:21,760
directly by the same ip address the same

604
00:21:21,760 --> 00:21:23,280
name and it's much easier to manage

605
00:21:23,280 --> 00:21:24,640
across the board

606
00:21:24,640 --> 00:21:28,640
right but it also simplifies our

607
00:21:28,640 --> 00:21:30,720
auditing space it's easier to reason

608
00:21:30,720 --> 00:21:32,000
about inside

609
00:21:32,000 --> 00:21:33,679
of our heads when we're trying to figure

610
00:21:33,679 --> 00:21:35,840
out problems and do troubleshooting

611
00:21:35,840 --> 00:21:38,000
and when it comes to maintenance it's so

612
00:21:38,000 --> 00:21:39,600
much easier to figure out what needs to

613
00:21:39,600 --> 00:21:40,640
be done

614
00:21:40,640 --> 00:21:43,200
and be able to build an infrastructure

615
00:21:43,200 --> 00:21:44,000
that is more

616
00:21:44,000 --> 00:21:46,000
tolerant and resilient to handling

617
00:21:46,000 --> 00:21:47,200
maintenances

618
00:21:47,200 --> 00:21:49,360
right plus we get an increase in

619
00:21:49,360 --> 00:21:50,799
usability and an increase in

620
00:21:50,799 --> 00:21:51,919
manageability

621
00:21:51,919 --> 00:21:53,280
right now you might be thinking in your

622
00:21:53,280 --> 00:21:55,200
head

623
00:21:55,200 --> 00:21:58,480
wow that could be a lot of ip addresses

624
00:21:58,480 --> 00:22:02,000
a lot of public ipv4 addresses and well

625
00:22:02,000 --> 00:22:04,720
i will agree that it could be a lot

626
00:22:04,720 --> 00:22:05,600
right

627
00:22:05,600 --> 00:22:07,520
i also know that there are a number of

628
00:22:07,520 --> 00:22:08,720
organizations that

629
00:22:08,720 --> 00:22:11,200
just can't afford that and don't have

630
00:22:11,200 --> 00:22:12,320
the staffing

631
00:22:12,320 --> 00:22:14,080
to manage it or the network connectivity

632
00:22:14,080 --> 00:22:15,919
to manage it right

633
00:22:15,919 --> 00:22:17,440
i will admit that i've come from a

634
00:22:17,440 --> 00:22:19,120
number of organizations

635
00:22:19,120 --> 00:22:22,880
that have a large number of public ipv4

636
00:22:22,880 --> 00:22:23,360
addresses

637
00:22:23,360 --> 00:22:25,440
available to them and this has not been

638
00:22:25,440 --> 00:22:26,960
a problem

639
00:22:26,960 --> 00:22:28,960
although they keep using they've kept

640
00:22:28,960 --> 00:22:31,440
using natting to solve the problems

641
00:22:31,440 --> 00:22:33,280
instead of the giant pool of public ip

642
00:22:33,280 --> 00:22:34,240
addresses

643
00:22:34,240 --> 00:22:37,120
right but i'm i'm very aware that public

644
00:22:37,120 --> 00:22:37,919
i.p addressing

645
00:22:37,919 --> 00:22:41,120
is a rarity in today's world

646
00:22:41,120 --> 00:22:43,200
right i think we've almost run out in

647
00:22:43,200 --> 00:22:46,480
terms of non-allocated ip space

648
00:22:46,480 --> 00:22:48,320
but because of this there are ways to

649
00:22:48,320 --> 00:22:50,559
approach this in a hybrid manner that

650
00:22:50,559 --> 00:22:51,600
allow

651
00:22:51,600 --> 00:22:56,080
for reachability and security

652
00:22:56,080 --> 00:22:58,559
and getting the best of both worlds

653
00:22:58,559 --> 00:22:59,200
while

654
00:22:59,200 --> 00:23:00,880
still keeping the manageability and the

655
00:23:00,880 --> 00:23:02,400
complexity down

656
00:23:02,400 --> 00:23:05,039
now i will say you can go native full

657
00:23:05,039 --> 00:23:06,559
ipv6

658
00:23:06,559 --> 00:23:09,200
there are so many addresses in there but

659
00:23:09,200 --> 00:23:10,000
again

660
00:23:10,000 --> 00:23:12,400
another talk so let's look at that

661
00:23:12,400 --> 00:23:13,200
diagram

662
00:23:13,200 --> 00:23:16,480
one more time so in this in this model

663
00:23:16,480 --> 00:23:17,440
again

664
00:23:17,440 --> 00:23:19,520
right let's just say for instance our

665
00:23:19,520 --> 00:23:21,760
database services we give them all

666
00:23:21,760 --> 00:23:23,440
private i p addressing

667
00:23:23,440 --> 00:23:26,159
right so now the web services can talk

668
00:23:26,159 --> 00:23:27,919
to the database services

669
00:23:27,919 --> 00:23:31,200
great clients in the corporate network

670
00:23:31,200 --> 00:23:33,120
don't need to talk to the database

671
00:23:33,120 --> 00:23:34,720
services they only need to talk to web

672
00:23:34,720 --> 00:23:36,400
and network services so we'll give those

673
00:23:36,400 --> 00:23:38,240
public ip addresses

674
00:23:38,240 --> 00:23:40,960
and we're going to natively route all of

675
00:23:40,960 --> 00:23:42,159
that stuff

676
00:23:42,159 --> 00:23:44,720
internal to the data center out into the

677
00:23:44,720 --> 00:23:45,919
the corporate network

678
00:23:45,919 --> 00:23:47,840
right so if there is a reason to contact

679
00:23:47,840 --> 00:23:50,400
the database services they can plus we

680
00:23:50,400 --> 00:23:51,520
can put an

681
00:23:51,520 --> 00:23:54,799
a source nat on the firewall that will

682
00:23:54,799 --> 00:23:56,559
allow the database services to access

683
00:23:56,559 --> 00:23:57,279
the internet

684
00:23:57,279 --> 00:23:59,520
to do things like updates and things of

685
00:23:59,520 --> 00:24:00,640
that nature

686
00:24:00,640 --> 00:24:02,480
right this is a model that i've seen

687
00:24:02,480 --> 00:24:04,960
deployed and i actually deploy myself

688
00:24:04,960 --> 00:24:05,600
because

689
00:24:05,600 --> 00:24:09,279
i am also not a rich person and can't

690
00:24:09,279 --> 00:24:11,440
afford the amount of public ip addresses

691
00:24:11,440 --> 00:24:12,559
that i need

692
00:24:12,559 --> 00:24:16,080
for my own personal infrastructure right

693
00:24:16,080 --> 00:24:20,080
so this is a great model right so really

694
00:24:20,080 --> 00:24:23,360
public ipa addressing it's awesome right

695
00:24:23,360 --> 00:24:27,440
um you should i'm not saying go

696
00:24:27,440 --> 00:24:31,520
run and rip out all of your

697
00:24:31,520 --> 00:24:34,240
private ip addressing and go buy you

698
00:24:34,240 --> 00:24:34,799
know

699
00:24:34,799 --> 00:24:36,720
hundreds of public ip addresses at

700
00:24:36,720 --> 00:24:38,960
really expensive prices

701
00:24:38,960 --> 00:24:41,679
but i'm i'm i'm challenging you to think

702
00:24:41,679 --> 00:24:43,039
about

703
00:24:43,039 --> 00:24:44,720
how you think about private ip

704
00:24:44,720 --> 00:24:46,400
addressing and public ip addressing in

705
00:24:46,400 --> 00:24:47,760
relation to

706
00:24:47,760 --> 00:24:49,279
the usability of your network and the

707
00:24:49,279 --> 00:24:51,039
manageability of your network and what

708
00:24:51,039 --> 00:24:53,360
does that

709
00:24:53,360 --> 00:24:55,440
add to your network overhead in running

710
00:24:55,440 --> 00:24:57,600
it

711
00:24:58,720 --> 00:25:00,480
one of the final areas that i want to

712
00:25:00,480 --> 00:25:02,480
talk about is

713
00:25:02,480 --> 00:25:04,080
network layer encryption and how it

714
00:25:04,080 --> 00:25:06,080
should not be relied upon

715
00:25:06,080 --> 00:25:08,640
a lot of systems people and application

716
00:25:08,640 --> 00:25:09,760
developers

717
00:25:09,760 --> 00:25:13,520
rely on vpn and site-to-site

718
00:25:13,520 --> 00:25:17,039
vpns for their encryption encryption

719
00:25:17,039 --> 00:25:18,240
properties

720
00:25:18,240 --> 00:25:21,120
but it ends up binding the network

721
00:25:21,120 --> 00:25:24,400
architecture into a very specific path

722
00:25:24,400 --> 00:25:26,720
now i'm not talking about client vpns at

723
00:25:26,720 --> 00:25:28,080
this point at this point i'm talking

724
00:25:28,080 --> 00:25:30,480
more about site-to-site vpns

725
00:25:30,480 --> 00:25:33,760
um that are used as shortcut paths

726
00:25:33,760 --> 00:25:37,039
um to uh you know connect say a data

727
00:25:37,039 --> 00:25:37,520
center

728
00:25:37,520 --> 00:25:40,320
two data centers together or to connect

729
00:25:40,320 --> 00:25:42,559
uh the data center to the cloud

730
00:25:42,559 --> 00:25:45,120
right but one of the things that happens

731
00:25:45,120 --> 00:25:46,080
with these is that

732
00:25:46,080 --> 00:25:49,200
people start becoming very dependent on

733
00:25:49,200 --> 00:25:52,400
those shortcut paths and especially the

734
00:25:52,400 --> 00:25:52,880
network

735
00:25:52,880 --> 00:25:56,640
the encryption aspects of that vpn

736
00:25:56,640 --> 00:25:57,760
connection

737
00:25:57,760 --> 00:26:00,559
and it should be noted that vpns don't

738
00:26:00,559 --> 00:26:02,880
necessarily have to be encrypted

739
00:26:02,880 --> 00:26:04,880
there are a number of different vpn

740
00:26:04,880 --> 00:26:06,240
technologies out there that don't

741
00:26:06,240 --> 00:26:07,760
encrypt traffic at all

742
00:26:07,760 --> 00:26:10,559
right one of the more common situations

743
00:26:10,559 --> 00:26:11,039
that i

744
00:26:11,039 --> 00:26:14,000
i've seen is when people start getting

745
00:26:14,000 --> 00:26:16,320
into the cloud they want to build vpn

746
00:26:16,320 --> 00:26:18,400
tunnels between their data center

747
00:26:18,400 --> 00:26:21,440
and the cloud and these are ipsec

748
00:26:21,440 --> 00:26:23,279
encrypted vpn tunnels and

749
00:26:23,279 --> 00:26:25,679
there's nothing wrong with that but one

750
00:26:25,679 --> 00:26:27,039
of the problems that happens is that

751
00:26:27,039 --> 00:26:29,120
people start to treat that

752
00:26:29,120 --> 00:26:31,520
as part of their data center and then

753
00:26:31,520 --> 00:26:33,520
they start to rely on the fact that that

754
00:26:33,520 --> 00:26:36,720
pathway is in fact encrypted

755
00:26:36,720 --> 00:26:38,480
and what this does is it binds the

756
00:26:38,480 --> 00:26:40,400
architecture to that pathway

757
00:26:40,400 --> 00:26:43,520
so that uh once you need more

758
00:26:43,520 --> 00:26:46,080
throughput or you have a lower latency

759
00:26:46,080 --> 00:26:48,000
physical connection

760
00:26:48,000 --> 00:26:50,559
you're now so bound to that encrypted

761
00:26:50,559 --> 00:26:52,240
nature that you can't move

762
00:26:52,240 --> 00:26:55,600
off of it and people get scared about

763
00:26:55,600 --> 00:26:58,559
passing that traffic over other links

764
00:26:58,559 --> 00:27:00,159
through other networks

765
00:27:00,159 --> 00:27:02,000
without it being encrypted but at the

766
00:27:02,000 --> 00:27:04,720
same time they don't want to

767
00:27:04,720 --> 00:27:06,880
actually encrypt that traffic at the

768
00:27:06,880 --> 00:27:08,799
application layer

769
00:27:08,799 --> 00:27:12,159
so i'm here to say stop relying on

770
00:27:12,159 --> 00:27:15,279
network layer encryption um and start

771
00:27:15,279 --> 00:27:17,279
moving that up into the application

772
00:27:17,279 --> 00:27:18,480
itself

773
00:27:18,480 --> 00:27:19,840
there are a number of different

774
00:27:19,840 --> 00:27:22,080
technologies um tls

775
00:27:22,080 --> 00:27:24,080
even in the point in point to endpoint

776
00:27:24,080 --> 00:27:25,120
ipsec

777
00:27:25,120 --> 00:27:27,360
um are great technologies to use to

778
00:27:27,360 --> 00:27:28,480
bring that encryption

779
00:27:28,480 --> 00:27:32,000
up into the application or up into

780
00:27:32,000 --> 00:27:34,559
higher levels of the network stack so

781
00:27:34,559 --> 00:27:35,120
that we

782
00:27:35,120 --> 00:27:37,360
as network engineers are able to just

783
00:27:37,360 --> 00:27:38,559
move packets

784
00:27:38,559 --> 00:27:41,600
and worry just about moving packets and

785
00:27:41,600 --> 00:27:43,360
not have to worry about

786
00:27:43,360 --> 00:27:45,679
traffic taking a very specific path

787
00:27:45,679 --> 00:27:47,200
because that path happens to be

788
00:27:47,200 --> 00:27:48,480
encrypted

789
00:27:48,480 --> 00:27:51,679
that should all be handled inside of the

790
00:27:51,679 --> 00:27:53,279
application lower traffic

791
00:27:53,279 --> 00:27:55,520
right

792
00:27:57,039 --> 00:27:59,279
so we've come to the end um there are a

793
00:27:59,279 --> 00:28:00,559
couple of takeaways that i hope that

794
00:28:00,559 --> 00:28:02,080
everyone gets away from gets from this

795
00:28:02,080 --> 00:28:02,880
talk

796
00:28:02,880 --> 00:28:06,399
um one icmp is good two security through

797
00:28:06,399 --> 00:28:08,080
obscurity is bad

798
00:28:08,080 --> 00:28:11,440
three not bad public ip good

799
00:28:11,440 --> 00:28:13,840
and four bring that encryption up out of

800
00:28:13,840 --> 00:28:15,440
the network and into the application

801
00:28:15,440 --> 00:28:16,960
layer

802
00:28:16,960 --> 00:28:18,320
there's another thing that i hope that

803
00:28:18,320 --> 00:28:21,120
everyone walks away from

804
00:28:21,120 --> 00:28:23,520
this talk with which is i hope that

805
00:28:23,520 --> 00:28:24,480
everyone

806
00:28:24,480 --> 00:28:26,480
starts to take a little more time to

807
00:28:26,480 --> 00:28:27,919
think about

808
00:28:27,919 --> 00:28:30,159
not just the security aspects but also

809
00:28:30,159 --> 00:28:32,240
the manageability and usability of the

810
00:28:32,240 --> 00:28:35,039
systems that they develop

811
00:28:35,039 --> 00:28:37,919
it's really easy to get caught up in we

812
00:28:37,919 --> 00:28:39,279
need to make this secure we need to make

813
00:28:39,279 --> 00:28:40,000
this secure

814
00:28:40,000 --> 00:28:43,279
and not think about the

815
00:28:43,279 --> 00:28:45,440
use how are users going to use this what

816
00:28:45,440 --> 00:28:46,880
are the workflows look like

817
00:28:46,880 --> 00:28:48,320
how are we going to do maintenance on

818
00:28:48,320 --> 00:28:50,240
this how are we going to

819
00:28:50,240 --> 00:28:52,720
troubleshoot this how are we going to do

820
00:28:52,720 --> 00:28:53,919
all of those things

821
00:28:53,919 --> 00:28:56,559
right complexity can be managed but it

822
00:28:56,559 --> 00:28:58,000
can also be shifted

823
00:28:58,000 --> 00:29:00,000
and it can sometimes even be eliminated

824
00:29:00,000 --> 00:29:02,320
if you just sit down and think about it

825
00:29:02,320 --> 00:29:05,760
a little right um remember to take a

826
00:29:05,760 --> 00:29:07,520
look at the whole system

827
00:29:07,520 --> 00:29:11,279
um take a look at what uh your actions

828
00:29:11,279 --> 00:29:14,320
today will have on future plans

829
00:29:14,320 --> 00:29:16,000
and longer term strategies within the

830
00:29:16,000 --> 00:29:17,440
organization

831
00:29:17,440 --> 00:29:19,120
i'm aware you should also have some

832
00:29:19,120 --> 00:29:21,679
longer term strategies

833
00:29:21,679 --> 00:29:23,520
and bring in some networking subject

834
00:29:23,520 --> 00:29:25,039
experts right to help with the network

835
00:29:25,039 --> 00:29:26,080
design and the network

836
00:29:26,080 --> 00:29:28,000
aspects of the the thing you're

837
00:29:28,000 --> 00:29:29,360
designing right

838
00:29:29,360 --> 00:29:32,559
um we might

839
00:29:32,559 --> 00:29:34,640
have suggestions on how to achieve what

840
00:29:34,640 --> 00:29:36,480
you're trying to accomplish

841
00:29:36,480 --> 00:29:39,279
while not crippling the network or not

842
00:29:39,279 --> 00:29:40,320
binding

843
00:29:40,320 --> 00:29:43,919
the system into a specific design or

844
00:29:43,919 --> 00:29:47,760
um setup that locks us into something

845
00:29:47,760 --> 00:29:48,720
forever and ever

846
00:29:48,720 --> 00:29:51,360
right and those network there's a lot of

847
00:29:51,360 --> 00:29:53,039
network people who really love building

848
00:29:53,039 --> 00:29:55,520
secure networks and systems

849
00:29:55,520 --> 00:29:57,279
who also think about usability and

850
00:29:57,279 --> 00:29:58,799
maintainability so

851
00:29:58,799 --> 00:30:01,520
you know reach out to them right i want

852
00:30:01,520 --> 00:30:03,120
to thank you all for your time and thank

853
00:30:03,120 --> 00:30:04,159
you for listening

854
00:30:04,159 --> 00:30:07,120
i'm on the blue team discord server

855
00:30:07,120 --> 00:30:08,000
answering questions

856
00:30:08,000 --> 00:30:11,520
if you want to reach out i am always

857
00:30:11,520 --> 00:30:12,799
happy to talk about the intersection of

858
00:30:12,799 --> 00:30:14,559
networking security management

859
00:30:14,559 --> 00:30:17,039
and usability so please reach out i'm

860
00:30:17,039 --> 00:30:18,320
not that intimidating

861
00:30:18,320 --> 00:30:20,960
even though i am very tall and you can

862
00:30:20,960 --> 00:30:22,720
find me on twitter under

863
00:30:22,720 --> 00:30:24,960
uh tall wireless but i'm going to warn

864
00:30:24,960 --> 00:30:26,320
you that i don't just post about

865
00:30:26,320 --> 00:30:27,840
networking and security

866
00:30:27,840 --> 00:30:29,760
um you're going to get a whole lot of

867
00:30:29,760 --> 00:30:32,000
random so i hope everyone has a great

868
00:30:32,000 --> 00:30:36,559
defcon and i will talk to you guys later

