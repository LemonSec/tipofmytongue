1
00:00:15,120 --> 00:00:16,320
hello everybody

2
00:00:16,320 --> 00:00:19,359
i'm uh don i'm doing a presentation on

3
00:00:19,359 --> 00:00:23,039
gateways uh so uh there's a

4
00:00:23,039 --> 00:00:25,359
a lot of different challenges that we

5
00:00:25,359 --> 00:00:26,160
have

6
00:00:26,160 --> 00:00:29,359
in uh in cyber security uh

7
00:00:29,359 --> 00:00:31,439
a lot of times in fact the very first

8
00:00:31,439 --> 00:00:34,079
time that i worked with car for car

9
00:00:34,079 --> 00:00:36,880
i'll pronounce it that way um the very

10
00:00:36,880 --> 00:00:38,399
first time he showed me

11
00:00:38,399 --> 00:00:41,760
how to fool the vehicle so that

12
00:00:41,760 --> 00:00:44,559
the radio thought it was in park and i

13
00:00:44,559 --> 00:00:45,039
could

14
00:00:45,039 --> 00:00:48,160
watch a video while i'm driving okay so

15
00:00:48,160 --> 00:00:50,719
that was literally my first uh my first

16
00:00:50,719 --> 00:00:52,160
exposure to

17
00:00:52,160 --> 00:00:55,360
uh to faking the car out but

18
00:00:55,360 --> 00:00:56,800
you know a lot of times we have to

19
00:00:56,800 --> 00:00:58,879
change a signal uh

20
00:00:58,879 --> 00:01:01,760
or a pdu a collection of signals uh we

21
00:01:01,760 --> 00:01:02,559
want to block

22
00:01:02,559 --> 00:01:04,640
something we want to override something

23
00:01:04,640 --> 00:01:06,240
we want to change something

24
00:01:06,240 --> 00:01:09,760
in a frame uh maybe you want you want to

25
00:01:09,760 --> 00:01:10,799
add something

26
00:01:10,799 --> 00:01:13,840
but it only it can only go to the target

27
00:01:13,840 --> 00:01:16,080
ecu i don't want it to be sent to any

28
00:01:16,080 --> 00:01:17,280
other ecu

29
00:01:17,280 --> 00:01:20,320
um we need to convert something

30
00:01:20,320 --> 00:01:22,880
to some form to some format some

31
00:01:22,880 --> 00:01:26,159
protocol for instance maybe i have knft

32
00:01:26,159 --> 00:01:28,479
or i have lin but i really have a device

33
00:01:28,479 --> 00:01:29,439
that can only do

34
00:01:29,439 --> 00:01:33,119
can 2.0 or classical can uh or

35
00:01:33,119 --> 00:01:35,759
maybe i'm doing ccp or xcp and i need to

36
00:01:35,759 --> 00:01:37,200
actually convert that out to

37
00:01:37,200 --> 00:01:40,560
some periodic uh can signal because some

38
00:01:40,560 --> 00:01:41,920
device that i have

39
00:01:41,920 --> 00:01:45,759
can't deal with the ccp or xcp data um

40
00:01:45,759 --> 00:01:48,880
sometimes we need to limit the number of

41
00:01:48,880 --> 00:01:51,759
frames that are going to some device

42
00:01:51,759 --> 00:01:55,200
okay so for instance a good example is

43
00:01:55,200 --> 00:01:58,640
you might have 16 ecu's in a battery

44
00:01:58,640 --> 00:02:00,159
pack for instance

45
00:02:00,159 --> 00:02:03,200
um and all those 16 ecu's might be doing

46
00:02:03,200 --> 00:02:03,759
some work

47
00:02:03,759 --> 00:02:06,079
you might want to talk to those but

48
00:02:06,079 --> 00:02:08,318
there's so much traffic already

49
00:02:08,318 --> 00:02:11,440
that if you send that traffic out and

50
00:02:11,440 --> 00:02:13,040
you're also sending it to all the other

51
00:02:13,040 --> 00:02:15,840
ecs connected to it and monitoring those

52
00:02:15,840 --> 00:02:17,760
then you might actually cause the bus to

53
00:02:17,760 --> 00:02:19,200
crash so

54
00:02:19,200 --> 00:02:22,480
being able to either limit the traffic

55
00:02:22,480 --> 00:02:24,640
down to a manageable amount or to

56
00:02:24,640 --> 00:02:25,680
consolidate

57
00:02:25,680 --> 00:02:29,120
specific frames or even

58
00:02:29,120 --> 00:02:31,040
take different signals which i'll

59
00:02:31,040 --> 00:02:32,720
demonstrate at the end

60
00:02:32,720 --> 00:02:34,959
take different signals and consolidate

61
00:02:34,959 --> 00:02:36,480
them into a single frame of

62
00:02:36,480 --> 00:02:39,440
traffic um is something that you want to

63
00:02:39,440 --> 00:02:40,080
do

64
00:02:40,080 --> 00:02:43,200
okay and one thing that uh is

65
00:02:43,200 --> 00:02:45,120
just starting to hit the scene right now

66
00:02:45,120 --> 00:02:46,959
is protected pdus

67
00:02:46,959 --> 00:02:48,879
uh protected pdus are basically when

68
00:02:48,879 --> 00:02:50,640
we're sending a pdu

69
00:02:50,640 --> 00:02:53,040
or a collection of signals and it's sent

70
00:02:53,040 --> 00:02:54,800
with essentially a protection value a

71
00:02:54,800 --> 00:02:55,440
mac

72
00:02:55,440 --> 00:02:58,560
as well as a freshness value

73
00:02:58,560 --> 00:03:01,680
and so changing that data if we were to

74
00:03:01,680 --> 00:03:04,640
say try to tweak it means that the

75
00:03:04,640 --> 00:03:06,319
target ecu is essentially going to

76
00:03:06,319 --> 00:03:07,360
ignore the frame

77
00:03:07,360 --> 00:03:10,319
because the mac is created with the pdu

78
00:03:10,319 --> 00:03:10,560
or

79
00:03:10,560 --> 00:03:13,040
collection of signals as well as the

80
00:03:13,040 --> 00:03:14,080
freshness value

81
00:03:14,080 --> 00:03:15,920
so changing the signal changes what the

82
00:03:15,920 --> 00:03:17,200
match should be

83
00:03:17,200 --> 00:03:19,840
and so uh if we wanted to make a change

84
00:03:19,840 --> 00:03:21,760
in that it's gonna be a lot tougher

85
00:03:21,760 --> 00:03:24,319
but we'll get to that okay uh so the

86
00:03:24,319 --> 00:03:25,440
solution

87
00:03:25,440 --> 00:03:28,480
um i've heard it called many names okay

88
00:03:28,480 --> 00:03:30,799
uh i've heard it called a gateway a

89
00:03:30,799 --> 00:03:33,920
translator a converter a bypass

90
00:03:33,920 --> 00:03:36,319
but essentially all these devices will

91
00:03:36,319 --> 00:03:37,599
ingest

92
00:03:37,599 --> 00:03:41,200
some traffic from some network and then

93
00:03:41,200 --> 00:03:43,440
it will put the traffic out on the other

94
00:03:43,440 --> 00:03:45,519
side in some certain format

95
00:03:45,519 --> 00:03:48,480
sometimes it simply bypasses uh it's a

96
00:03:48,480 --> 00:03:49,840
total uh

97
00:03:49,840 --> 00:03:51,599
pass through both directions it does not

98
00:03:51,599 --> 00:03:53,200
affect the data but you can see what's

99
00:03:53,200 --> 00:03:53,680
coming

100
00:03:53,680 --> 00:03:56,720
in and going out uh just to examine it

101
00:03:56,720 --> 00:03:59,200
and further not do further analysis

102
00:03:59,200 --> 00:04:02,480
um but i will call it a gateway

103
00:04:02,480 --> 00:04:04,319
so essentially gateway is really that

104
00:04:04,319 --> 00:04:06,720
conduit of information going from one

105
00:04:06,720 --> 00:04:08,400
vehicle network to another

106
00:04:08,400 --> 00:04:11,760
um so we've done or i've done uh several

107
00:04:11,760 --> 00:04:13,840
of these i used to do them all manually

108
00:04:13,840 --> 00:04:14,799
programming them

109
00:04:14,799 --> 00:04:17,279
uh in our in the devices that my company

110
00:04:17,279 --> 00:04:18,478
happens to sell

111
00:04:18,478 --> 00:04:21,600
um but you know doing can can or candle

112
00:04:21,600 --> 00:04:22,160
in

113
00:04:22,160 --> 00:04:24,160
uh you know when lan candling you

114
00:04:24,160 --> 00:04:25,280
essentially see that

115
00:04:25,280 --> 00:04:27,440
see that all the time because there's

116
00:04:27,440 --> 00:04:28,960
always a can

117
00:04:28,960 --> 00:04:32,320
ecu that operates as the webmaster

118
00:04:32,320 --> 00:04:34,400
uh can to ethernet or ethernet to

119
00:04:34,400 --> 00:04:36,160
ethernet like switches that you see

120
00:04:36,160 --> 00:04:39,680
inside your vehicles um some uh

121
00:04:39,680 --> 00:04:41,919
many vehicles now have a central gateway

122
00:04:41,919 --> 00:04:43,520
or a common gateway

123
00:04:43,520 --> 00:04:45,120
uh several different names for it but

124
00:04:45,120 --> 00:04:47,199
essentially all the traffic goes to it

125
00:04:47,199 --> 00:04:50,880
and gets routed out uh to minimize

126
00:04:50,880 --> 00:04:54,000
repeating traffic on multiple buses and

127
00:04:54,000 --> 00:04:57,040
to segment the the vehicle out um

128
00:04:57,040 --> 00:04:59,040
that's not really the the the central

129
00:04:59,040 --> 00:05:01,199
gateways or common gateways are not this

130
00:05:01,199 --> 00:05:03,360
the subject of what i'm talking about

131
00:05:03,360 --> 00:05:04,720
today um

132
00:05:04,720 --> 00:05:07,440
that's really kind of for another day to

133
00:05:07,440 --> 00:05:09,199
talk about defeating those that kind of

134
00:05:09,199 --> 00:05:10,160
thing

135
00:05:10,160 --> 00:05:13,199
so how how do you make the gateway

136
00:05:13,199 --> 00:05:17,039
um well when back when i was a little

137
00:05:17,039 --> 00:05:17,680
younger

138
00:05:17,680 --> 00:05:20,880
i used to code it myself so uh

139
00:05:20,880 --> 00:05:23,039
when you do that one of the biggest

140
00:05:23,039 --> 00:05:24,560
problems with it is

141
00:05:24,560 --> 00:05:26,880
uh it's easy for somebody like me to get

142
00:05:26,880 --> 00:05:27,600
confused

143
00:05:27,600 --> 00:05:28,800
you know what's going what's being

144
00:05:28,800 --> 00:05:31,199
received versus what's being transmitted

145
00:05:31,199 --> 00:05:33,840
um you have to keep in mind if i'm going

146
00:05:33,840 --> 00:05:35,520
from one bus to another

147
00:05:35,520 --> 00:05:36,880
one thing that's being received on one

148
00:05:36,880 --> 00:05:38,560
side to be transmitted on the other i

149
00:05:38,560 --> 00:05:39,520
have to be able to

150
00:05:39,520 --> 00:05:40,960
make sure i don't accidentally

151
00:05:40,960 --> 00:05:42,960
retransmit the thing i transmitted on

152
00:05:42,960 --> 00:05:44,000
the other side

153
00:05:44,000 --> 00:05:47,039
back again causing essentially a big

154
00:05:47,039 --> 00:05:48,000
loop right

155
00:05:48,000 --> 00:05:51,440
um so coding it yourself can be can be a

156
00:05:51,440 --> 00:05:52,400
problem because

157
00:05:52,400 --> 00:05:54,720
of the amount of time it takes it can

158
00:05:54,720 --> 00:05:56,400
also be a problem because of the

159
00:05:56,400 --> 00:05:59,280
performance of the device okay uh not

160
00:05:59,280 --> 00:06:01,199
everybody can afford a hill

161
00:06:01,199 --> 00:06:03,680
and uh and be able to send out traffic

162
00:06:03,680 --> 00:06:04,720
really fast and

163
00:06:04,720 --> 00:06:06,880
have super high performance as though

164
00:06:06,880 --> 00:06:07,840
you are

165
00:06:07,840 --> 00:06:11,680
you are in a vehicle network um so

166
00:06:11,680 --> 00:06:13,360
another way to do this is a rapid

167
00:06:13,360 --> 00:06:14,800
development tool uh

168
00:06:14,800 --> 00:06:17,039
and that's what i'm going to show today

169
00:06:17,039 --> 00:06:18,240
uh so that's

170
00:06:18,240 --> 00:06:19,840
but the tools themselves are really a

171
00:06:19,840 --> 00:06:21,440
sidelight okay

172
00:06:21,440 --> 00:06:24,639
uh the idea is to show certain examples

173
00:06:24,639 --> 00:06:26,319
of the things that you might need to

174
00:06:26,319 --> 00:06:28,240
gateway or things that aren't possible

175
00:06:28,240 --> 00:06:29,440
maybe a couple things you haven't

176
00:06:29,440 --> 00:06:31,360
thought of yet uh but uh

177
00:06:31,360 --> 00:06:33,280
i i plan on doing a demonstration of

178
00:06:33,280 --> 00:06:35,919
those all today

179
00:06:35,919 --> 00:06:38,639
so uh and i already talked about this

180
00:06:38,639 --> 00:06:40,160
part but essentially

181
00:06:40,160 --> 00:06:41,520
these are the function blocks that are

182
00:06:41,520 --> 00:06:43,600
inside of intrepid's vehicle spy

183
00:06:43,600 --> 00:06:44,560
software

184
00:06:44,560 --> 00:06:46,880
um and i used to write these you know

185
00:06:46,880 --> 00:06:48,080
step by step

186
00:06:48,080 --> 00:06:50,400
and write all the code that goes around

187
00:06:50,400 --> 00:06:52,160
it to do a gateway

188
00:06:52,160 --> 00:06:55,199
uh generally it would take me hours and

189
00:06:55,199 --> 00:06:57,199
then some time to troubleshoot to get

190
00:06:57,199 --> 00:07:00,560
any gateway right um so uh

191
00:07:00,560 --> 00:07:04,080
so one thing that our customers

192
00:07:04,080 --> 00:07:06,400
often demanded was they did not want to

193
00:07:06,400 --> 00:07:07,520
write anything

194
00:07:07,520 --> 00:07:10,000
which is kind of a tall order uh how do

195
00:07:10,000 --> 00:07:11,360
you make

196
00:07:11,360 --> 00:07:14,479
some type of uh of interface where you

197
00:07:14,479 --> 00:07:15,199
can create

198
00:07:15,199 --> 00:07:18,080
gateways and automatically generate the

199
00:07:18,080 --> 00:07:18,880
code

200
00:07:18,880 --> 00:07:22,080
well after several years of dreaming

201
00:07:22,080 --> 00:07:24,639
um that actually is done inside a

202
00:07:24,639 --> 00:07:25,680
vehicle spine

203
00:07:25,680 --> 00:07:27,199
uh there are other tools out there of

204
00:07:27,199 --> 00:07:29,199
course some that are actually uh

205
00:07:29,199 --> 00:07:31,039
you can actually run embedded c code in

206
00:07:31,039 --> 00:07:32,560
some of these tools actually you can run

207
00:07:32,560 --> 00:07:34,080
embedded c code as well

208
00:07:34,080 --> 00:07:36,319
uh but most of the tools that intrepid

209
00:07:36,319 --> 00:07:37,759
makes can actually

210
00:07:37,759 --> 00:07:41,759
run gateways or uh simulate ecu's for

211
00:07:41,759 --> 00:07:42,880
that matter

212
00:07:42,880 --> 00:07:45,120
and many of them can actually run z-code

213
00:07:45,120 --> 00:07:46,000
as well

214
00:07:46,000 --> 00:07:48,960
as uh as running the function blocks

215
00:07:48,960 --> 00:07:50,960
that i just showed

216
00:07:50,960 --> 00:07:54,479
so um the idea is essentially

217
00:07:54,479 --> 00:07:56,720
uh we have a new view a new relatively

218
00:07:56,720 --> 00:07:58,800
new view inside a vehicle spy called the

219
00:07:58,800 --> 00:08:00,160
gateway builder

220
00:08:00,160 --> 00:08:02,319
and the gateway builder essentially

221
00:08:02,319 --> 00:08:04,160
creates those functional blocks for you

222
00:08:04,160 --> 00:08:06,160
and on occasion will also create

223
00:08:06,160 --> 00:08:07,759
embedded c code

224
00:08:07,759 --> 00:08:10,479
depending on the task that you're doing

225
00:08:10,479 --> 00:08:10,879
so

226
00:08:10,879 --> 00:08:13,680
it's really pretty straightforward uh

227
00:08:13,680 --> 00:08:15,280
i'm not gonna tell you that i love the

228
00:08:15,280 --> 00:08:17,360
interface but it's not bad

229
00:08:17,360 --> 00:08:19,199
um it takes a little bit of getting

230
00:08:19,199 --> 00:08:20,879
getting used to um

231
00:08:20,879 --> 00:08:22,960
but it's really our first attempt uh at

232
00:08:22,960 --> 00:08:24,400
the gui

233
00:08:24,400 --> 00:08:25,680
but it does definitely do a lot of

234
00:08:25,680 --> 00:08:27,599
things so essentially you start out by

235
00:08:27,599 --> 00:08:29,520
loading the databases that you create

236
00:08:29,520 --> 00:08:33,039
or maybe some that you already have um

237
00:08:33,039 --> 00:08:34,640
and you essentially drag and drop the

238
00:08:34,640 --> 00:08:37,440
networks or the messages or the signals

239
00:08:37,440 --> 00:08:39,679
from the input side to the output side

240
00:08:39,679 --> 00:08:40,559
and you can create

241
00:08:40,559 --> 00:08:42,799
multiple layers of these so that you can

242
00:08:42,799 --> 00:08:43,919
do things like

243
00:08:43,919 --> 00:08:47,279
i'm going to pass this one this one

244
00:08:47,279 --> 00:08:48,240
entire frame

245
00:08:48,240 --> 00:08:51,680
as it is every time or

246
00:08:51,680 --> 00:08:53,920
i might also want to pass a single

247
00:08:53,920 --> 00:08:54,959
signal and then

248
00:08:54,959 --> 00:08:58,880
lock down what the other values are

249
00:08:58,880 --> 00:09:01,200
but in any case once you create it then

250
00:09:01,200 --> 00:09:02,640
you can click on a button

251
00:09:02,640 --> 00:09:05,360
that downloads that programming into the

252
00:09:05,360 --> 00:09:07,120
standalone hardware

253
00:09:07,120 --> 00:09:09,120
so to give you an example of what you

254
00:09:09,120 --> 00:09:10,880
can potentially do with this

255
00:09:10,880 --> 00:09:14,240
i'm going to pull up

256
00:09:16,320 --> 00:09:20,560
this little guy here because it actually

257
00:09:20,560 --> 00:09:23,440
is connected up to this right here so

258
00:09:23,440 --> 00:09:24,959
what's happening here is that

259
00:09:24,959 --> 00:09:29,519
on my pc i've got this neoli fire 2

260
00:09:29,519 --> 00:09:32,560
it's connected up to this neo ecu uh the

261
00:09:32,560 --> 00:09:34,399
neo ecu 12 here

262
00:09:34,399 --> 00:09:36,480
which is essentially like a little easy

263
00:09:36,480 --> 00:09:37,839
oecu simulator

264
00:09:37,839 --> 00:09:39,600
it it basically is it's pretty

265
00:09:39,600 --> 00:09:41,839
straightforward it's really very cheap

266
00:09:41,839 --> 00:09:43,680
uh what we're doing here is that we're

267
00:09:43,680 --> 00:09:44,959
sending can out

268
00:09:44,959 --> 00:09:48,080
uh the dual wire can out it goes into

269
00:09:48,080 --> 00:09:51,040
the neo ecu 12. from the neo ecu 12 it's

270
00:09:51,040 --> 00:09:52,640
actually coming out as lin

271
00:09:52,640 --> 00:09:55,760
and that comes out over here

272
00:09:55,760 --> 00:09:58,800
and that connects up to

273
00:09:59,279 --> 00:10:02,720
this guy cluster so

274
00:10:02,720 --> 00:10:05,120
um and i can of course adjust that

275
00:10:05,120 --> 00:10:06,800
cluster because there's actually gateway

276
00:10:06,800 --> 00:10:07,519
going on

277
00:10:07,519 --> 00:10:08,880
see that it gets a little bit dimmer a

278
00:10:08,880 --> 00:10:11,440
little bit dimmer fuel level go up and

279
00:10:11,440 --> 00:10:13,839
down

280
00:10:14,640 --> 00:10:17,440
right there you see it rpms up to like

281
00:10:17,440 --> 00:10:18,320
six grand

282
00:10:18,320 --> 00:10:21,279
vehicle speed let's go to like 260. got

283
00:10:21,279 --> 00:10:22,720
it pegged but if you look up there

284
00:10:22,720 --> 00:10:24,640
you'll see the speeds up there like 248

285
00:10:24,640 --> 00:10:26,000
that's kind of cool

286
00:10:26,000 --> 00:10:28,240
so this is actually gateway that was

287
00:10:28,240 --> 00:10:29,519
programmed

288
00:10:29,519 --> 00:10:33,279
inside of that new ecu 12.

289
00:10:33,279 --> 00:10:35,120
and the fire 2 that i showed is really

290
00:10:35,120 --> 00:10:36,640
just a way of showing it

291
00:10:36,640 --> 00:10:39,279
okay but that's just a quick example of

292
00:10:39,279 --> 00:10:40,480
something you could do you can use it

293
00:10:40,480 --> 00:10:42,079
for like a prototype

294
00:10:42,079 --> 00:10:44,560
uh use it for testing you see it a lot

295
00:10:44,560 --> 00:10:45,519
in

296
00:10:45,519 --> 00:10:48,320
industry uh or in automotive design in

297
00:10:48,320 --> 00:10:49,279
validation

298
00:10:49,279 --> 00:10:52,320
as part of a test bench

299
00:10:52,320 --> 00:10:55,120
but it can be pretty useful on the

300
00:10:55,120 --> 00:10:56,560
hacker realm

301
00:10:56,560 --> 00:10:58,480
because now i can take something and say

302
00:10:58,480 --> 00:11:00,480
well i don't like that it's sending out

303
00:11:00,480 --> 00:11:02,399
the signal here i can change it to

304
00:11:02,399 --> 00:11:03,760
something on the other side

305
00:11:03,760 --> 00:11:05,839
right change it to what i want change it

306
00:11:05,839 --> 00:11:07,360
to something that

307
00:11:07,360 --> 00:11:09,200
might give me a result and give me more

308
00:11:09,200 --> 00:11:11,040
clues as what to do

309
00:11:11,040 --> 00:11:13,360
so um so what i'm going to do here is

310
00:11:13,360 --> 00:11:14,320
essentially uh

311
00:11:14,320 --> 00:11:18,000
give you a quick um view or a rundown of

312
00:11:18,000 --> 00:11:19,440
the gateway builder view

313
00:11:19,440 --> 00:11:21,440
but i'm also going to pull up several

314
00:11:21,440 --> 00:11:22,560
different demos

315
00:11:22,560 --> 00:11:25,920
to show how this can work for you

316
00:11:25,920 --> 00:11:28,480
so essentially on the left side here

317
00:11:28,480 --> 00:11:29,440
you'll see it says

318
00:11:29,440 --> 00:11:31,600
inputs what this means is we've loaded

319
00:11:31,600 --> 00:11:32,720
in databases

320
00:11:32,720 --> 00:11:34,720
and in this case it's loaded up to hs

321
00:11:34,720 --> 00:11:36,240
can this might be

322
00:11:36,240 --> 00:11:38,160
in our future products it's called can

323
00:11:38,160 --> 00:11:39,440
one so the first can

324
00:11:39,440 --> 00:11:42,000
channel and so the database is loaded up

325
00:11:42,000 --> 00:11:44,480
over here

326
00:11:44,480 --> 00:11:46,720
and that would be the input side where

327
00:11:46,720 --> 00:11:48,720
it says input network

328
00:11:48,720 --> 00:11:51,360
on the output network i've got ms can in

329
00:11:51,360 --> 00:11:52,240
this case

330
00:11:52,240 --> 00:11:55,200
and another set of databases here so

331
00:11:55,200 --> 00:11:57,360
essentially you have to have a database

332
00:11:57,360 --> 00:12:01,040
on the input side and on the output side

333
00:12:01,040 --> 00:12:03,839
so that the gateway builder knows the

334
00:12:03,839 --> 00:12:04,959
structure

335
00:12:04,959 --> 00:12:08,320
of the messages the signals pdus

336
00:12:08,320 --> 00:12:11,120
on both sides and then you can you can

337
00:12:11,120 --> 00:12:12,240
then tell it

338
00:12:12,240 --> 00:12:14,399
pull the signal in change its value put

339
00:12:14,399 --> 00:12:16,240
it into this other signal on the other

340
00:12:16,240 --> 00:12:16,959
side

341
00:12:16,959 --> 00:12:19,760
okay so in that case with the exception

342
00:12:19,760 --> 00:12:20,240
of

343
00:12:20,240 --> 00:12:23,839
gatewaying the entire network we have to

344
00:12:23,839 --> 00:12:24,320
have

345
00:12:24,320 --> 00:12:26,720
a full database of some sort even if

346
00:12:26,720 --> 00:12:28,639
that's something you created

347
00:12:28,639 --> 00:12:30,880
and these databases are actually totally

348
00:12:30,880 --> 00:12:32,000
fictitious

349
00:12:32,000 --> 00:12:34,240
uh some i created uh she's over 10 years

350
00:12:34,240 --> 00:12:36,839
ago now i use them for training all the

351
00:12:36,839 --> 00:12:39,519
time

352
00:12:39,519 --> 00:12:41,200
so now i'm going to go through a number

353
00:12:41,200 --> 00:12:43,760
of demos and explain what's going on

354
00:12:43,760 --> 00:12:47,360
uh basically here on my desk

355
00:12:47,360 --> 00:12:51,200
i've got same setup you see there on the

356
00:12:51,200 --> 00:12:53,279
slides

357
00:12:53,279 --> 00:12:55,680
and basically i've got two fires that

358
00:12:55,680 --> 00:12:58,480
are tied together with a test board

359
00:12:58,480 --> 00:13:01,040
so um essentially there's a termination

360
00:13:01,040 --> 00:13:02,000
between

361
00:13:02,000 --> 00:13:05,680
somewhere that powers up the whole setup

362
00:13:05,680 --> 00:13:07,120
i'm going to plug that guy in like you

363
00:13:07,120 --> 00:13:10,160
see on the slide

364
00:13:10,160 --> 00:13:13,519
now let's do

365
00:13:13,519 --> 00:13:16,160
some demos

366
00:13:19,120 --> 00:13:22,000
so the first demo i'm going to show you

367
00:13:22,000 --> 00:13:24,800
is essentially a bi-directional gateway

368
00:13:24,800 --> 00:13:27,040
really really simple doesn't get simpler

369
00:13:27,040 --> 00:13:28,800
than this

370
00:13:28,800 --> 00:13:31,760
so um what i can do is actually just rip

371
00:13:31,760 --> 00:13:33,040
this thing apart and put it back

372
00:13:33,040 --> 00:13:34,800
together again real quick

373
00:13:34,800 --> 00:13:36,240
just to show you what it what it's

374
00:13:36,240 --> 00:13:38,959
actually doing and in fact well yeah

375
00:13:38,959 --> 00:13:41,519
this should be fine

376
00:13:41,519 --> 00:13:44,959
let's do this so one thing you can do is

377
00:13:44,959 --> 00:13:48,240
you start out with an input network

378
00:13:48,240 --> 00:13:51,360
and this one i'll choose as hs can

379
00:13:51,360 --> 00:13:52,800
this is one of the few that does not

380
00:13:52,800 --> 00:13:55,120
need the database at all

381
00:13:55,120 --> 00:13:58,240
but i have the databases loaded so

382
00:13:58,240 --> 00:14:00,959
input side where i'm going to start out

383
00:14:00,959 --> 00:14:02,560
hs can

384
00:14:02,560 --> 00:14:07,439
on the output side i change it to mscan

385
00:14:07,519 --> 00:14:09,600
and if i simply just just push the

386
00:14:09,600 --> 00:14:10,720
button that says

387
00:14:10,720 --> 00:14:13,360
gateway entire network click that and

388
00:14:13,360 --> 00:14:15,199
now all the messages that are on that

389
00:14:15,199 --> 00:14:16,399
one network

390
00:14:16,399 --> 00:14:19,360
will be sent across to the other network

391
00:14:19,360 --> 00:14:21,680
okay

392
00:14:21,680 --> 00:14:24,480
now if i want the messages that are on

393
00:14:24,480 --> 00:14:25,600
the other side on

394
00:14:25,600 --> 00:14:28,720
ms can to come across and come back to

395
00:14:28,720 --> 00:14:30,560
the hsk network

396
00:14:30,560 --> 00:14:33,760
i can do that too so i need to select

397
00:14:33,760 --> 00:14:36,480
the ms can

398
00:14:36,480 --> 00:14:39,519
on the input side

399
00:14:39,760 --> 00:14:43,760
and hscan on the output side

400
00:14:43,760 --> 00:14:45,760
and again click on gateway entire

401
00:14:45,760 --> 00:14:47,680
network and that basically

402
00:14:47,680 --> 00:14:52,079
is both sides of the network

403
00:14:52,079 --> 00:14:53,839
so what i'm going to do is actually plug

404
00:14:53,839 --> 00:14:56,079
in a new vi that actually you'll see it

405
00:14:56,079 --> 00:14:56,560
says

406
00:14:56,560 --> 00:14:59,360
hs plus mskn on it that's because it's

407
00:14:59,360 --> 00:15:01,120
actually sending traffic out on both

408
00:15:01,120 --> 00:15:02,320
those networks

409
00:15:02,320 --> 00:15:05,120
and i'll show you that once i fire this

410
00:15:05,120 --> 00:15:05,440
guy

411
00:15:05,440 --> 00:15:07,600
up

412
00:15:09,760 --> 00:15:11,839
and i'll actually show you all the

413
00:15:11,839 --> 00:15:13,199
traffic

414
00:15:13,199 --> 00:15:14,959
so you'll see here it says fc and

415
00:15:14,959 --> 00:15:16,399
there's another one fc

416
00:15:16,399 --> 00:15:18,800
this wheel speeds is actually being

417
00:15:18,800 --> 00:15:19,839
pulled in

418
00:15:19,839 --> 00:15:23,040
on hs can and transmitted back out of ms

419
00:15:23,040 --> 00:15:24,320
can

420
00:15:24,320 --> 00:15:25,760
and if you go through here a little bit

421
00:15:25,760 --> 00:15:27,519
farther you'll find there are some that

422
00:15:27,519 --> 00:15:28,480
are

423
00:15:28,480 --> 00:15:32,320
on ms can like the stat one right here

424
00:15:32,320 --> 00:15:37,759
and it's being retransmitted on hs cam

425
00:15:37,759 --> 00:15:41,360
so that's pretty quick i basically

426
00:15:41,360 --> 00:15:42,560
ripped apart the gateway

427
00:15:42,560 --> 00:15:45,360
rebuilt it again inside the vehicle spy

428
00:15:45,360 --> 00:15:46,240
like that

429
00:15:46,240 --> 00:15:49,920
not bad so what's the use of this

430
00:15:49,920 --> 00:15:52,880
uh besides just showing off well the

431
00:15:52,880 --> 00:15:53,680
thing is

432
00:15:53,680 --> 00:15:58,079
i can tell by this traffic here

433
00:15:58,079 --> 00:16:00,480
oh of course my mouse decided to die

434
00:16:00,480 --> 00:16:02,320
awesome

435
00:16:02,320 --> 00:16:06,399
not awesome wake up hello

436
00:16:06,399 --> 00:16:09,199
there we go sorry about that so i'll

437
00:16:09,199 --> 00:16:12,639
just type in a filter here

438
00:16:13,519 --> 00:16:17,120
so i can tell that this message

439
00:16:17,120 --> 00:16:20,480
is coming out of

440
00:16:20,480 --> 00:16:23,120
the subject or the target ecu the one

441
00:16:23,120 --> 00:16:24,880
that has the simulation inside it's not

442
00:16:24,880 --> 00:16:26,720
plugged into my computer

443
00:16:26,720 --> 00:16:29,519
because i'm receiving it on my test tool

444
00:16:29,519 --> 00:16:31,279
and i'm retransmitting it on the other

445
00:16:31,279 --> 00:16:32,639
side

446
00:16:32,639 --> 00:16:36,240
so if i were to have something like this

447
00:16:36,240 --> 00:16:39,199
that we're actually connected uh between

448
00:16:39,199 --> 00:16:39,440
an

449
00:16:39,440 --> 00:16:42,000
ecu and the rest of the vehicle i could

450
00:16:42,000 --> 00:16:43,920
potentially figure out all the things it

451
00:16:43,920 --> 00:16:45,040
transmits

452
00:16:45,040 --> 00:16:47,360
uh probably a lot quicker though just to

453
00:16:47,360 --> 00:16:49,600
disconnect the ecu see what disappears

454
00:16:49,600 --> 00:16:50,959
you may get some other things that do

455
00:16:50,959 --> 00:16:52,880
appear um but

456
00:16:52,880 --> 00:16:54,320
uh this is something where you can

457
00:16:54,320 --> 00:16:56,480
actually connect up

458
00:16:56,480 --> 00:16:58,560
still keep everything running the timing

459
00:16:58,560 --> 00:17:00,560
is actually very very good

460
00:17:00,560 --> 00:17:03,519
very very good and uh you could then

461
00:17:03,519 --> 00:17:05,119
start to play with it and build a

462
00:17:05,119 --> 00:17:06,160
gateway

463
00:17:06,160 --> 00:17:07,839
take messages away keep all the other

464
00:17:07,839 --> 00:17:09,199
messages coming along now

465
00:17:09,199 --> 00:17:12,720
i'll show you all that here in a moment

466
00:17:17,280 --> 00:17:20,640
so now here's another one these will all

467
00:17:20,640 --> 00:17:22,959
get a little more useful as we go along

468
00:17:22,959 --> 00:17:26,319
promise so

469
00:17:26,319 --> 00:17:28,879
basically

470
00:17:30,960 --> 00:17:32,480
what might be a little bit more useful

471
00:17:32,480 --> 00:17:35,440
is i grab onto a single

472
00:17:35,440 --> 00:17:38,720
frame a single pdu a set of signals

473
00:17:38,720 --> 00:17:41,280
and i want to say transmit that on

474
00:17:41,280 --> 00:17:42,400
another bus

475
00:17:42,400 --> 00:17:44,400
and i might do something else with it

476
00:17:44,400 --> 00:17:45,520
okay

477
00:17:45,520 --> 00:17:47,440
so i'll go online with this one just to

478
00:17:47,440 --> 00:17:50,960
show what's going on here

479
00:17:51,120 --> 00:17:53,039
and you'll see there's only one being

480
00:17:53,039 --> 00:17:55,200
transmitted it's just that ms can

481
00:17:55,200 --> 00:17:58,080
and that actually

482
00:17:59,120 --> 00:18:01,280
is being retransmitted from this data

483
00:18:01,280 --> 00:18:02,320
seven

484
00:18:02,320 --> 00:18:04,080
it's not being changed it's just being

485
00:18:04,080 --> 00:18:06,799
transmitted at the same rate

486
00:18:06,799 --> 00:18:09,280
so in the gateway builder to build this

487
00:18:09,280 --> 00:18:10,000
um

488
00:18:10,000 --> 00:18:13,200
let me go offline for a second

489
00:18:13,200 --> 00:18:15,200
it's really pretty easy i can hit this

490
00:18:15,200 --> 00:18:16,720
delete all button that gets rid of all

491
00:18:16,720 --> 00:18:17,679
the stuff

492
00:18:17,679 --> 00:18:20,080
um and all i've got to really do is go

493
00:18:20,080 --> 00:18:21,039
over here

494
00:18:21,039 --> 00:18:23,360
and say well i want to grab this one

495
00:18:23,360 --> 00:18:24,400
frame

496
00:18:24,400 --> 00:18:27,120
so this uh right here at the top of the

497
00:18:27,120 --> 00:18:28,640
tree

498
00:18:28,640 --> 00:18:32,320
i can just drag it over drop it in

499
00:18:32,320 --> 00:18:34,640
and then off i go it's already going to

500
00:18:34,640 --> 00:18:37,840
forward that message

501
00:18:37,840 --> 00:18:39,520
so you see here on the input for the

502
00:18:39,520 --> 00:18:41,280
message and

503
00:18:41,280 --> 00:18:42,720
it's gonna automatically show up on the

504
00:18:42,720 --> 00:18:45,120
other side i don't have to tell it what

505
00:18:45,120 --> 00:18:46,799
message to put it into

506
00:18:46,799 --> 00:18:49,760
at this point when i say forward it will

507
00:18:49,760 --> 00:18:51,360
take the message as it is and just

508
00:18:51,360 --> 00:18:52,400
forward it across

509
00:18:52,400 --> 00:18:55,120
it's not going to play with it yet it

510
00:18:55,120 --> 00:18:55,679
will

511
00:18:55,679 --> 00:18:58,960
be like that soon so um

512
00:18:58,960 --> 00:19:01,200
if i go online i'll just uh start firing

513
00:19:01,200 --> 00:19:04,400
up again just like you did before

514
00:19:04,640 --> 00:19:07,600
anytime there we go

515
00:19:08,799 --> 00:19:10,559
so now we'll do something a little more

516
00:19:10,559 --> 00:19:12,400
fun

517
00:19:12,400 --> 00:19:14,559
oh

518
00:19:18,160 --> 00:19:20,400
so say that i wanted to do something a

519
00:19:20,400 --> 00:19:21,600
little more exotic

520
00:19:21,600 --> 00:19:25,120
i wanted to choose when and if

521
00:19:25,120 --> 00:19:28,400
i re-transmit based on some

522
00:19:28,400 --> 00:19:31,919
data now this data could be data that's

523
00:19:31,919 --> 00:19:32,880
in another

524
00:19:32,880 --> 00:19:36,240
frame so

525
00:19:36,240 --> 00:19:37,760
i'm going to go online and i'll show you

526
00:19:37,760 --> 00:19:39,600
what's really going on here

527
00:19:39,600 --> 00:19:41,440
may not be clear right away but it will

528
00:19:41,440 --> 00:19:44,320
be once i tell you what to watch for

529
00:19:44,320 --> 00:19:46,400
so just like before we're retransmitting

530
00:19:46,400 --> 00:19:48,160
data seven

531
00:19:48,160 --> 00:19:50,799
but basically we're going to wait until

532
00:19:50,799 --> 00:19:52,720
that target speed goes below

533
00:19:52,720 --> 00:19:55,120
10. once it goes below 10 it will stop

534
00:19:55,120 --> 00:19:56,880
retransmitting

535
00:19:56,880 --> 00:20:00,799
okay so uh to show you how that works

536
00:20:00,799 --> 00:20:02,240
we'll come back to it you can actually

537
00:20:02,240 --> 00:20:04,799
see that happen

538
00:20:04,799 --> 00:20:09,520
essentially instead of just

539
00:20:11,280 --> 00:20:13,360
instead of just forwarding the message

540
00:20:13,360 --> 00:20:15,760
which is what we did in the last example

541
00:20:15,760 --> 00:20:18,080
we put a condition on it over here and

542
00:20:18,080 --> 00:20:19,360
so that condition is

543
00:20:19,360 --> 00:20:21,520
actually built into this uh expression

544
00:20:21,520 --> 00:20:22,480
editor

545
00:20:22,480 --> 00:20:27,440
so target speed is greater than 10.

546
00:20:31,039 --> 00:20:35,520
then a little bit of time time passes

547
00:20:35,520 --> 00:20:38,880
and oh it uh yeah it went way up again i

548
00:20:38,880 --> 00:20:40,080
should have let it run

549
00:20:40,080 --> 00:20:43,440
but basically that's another alternative

550
00:20:43,440 --> 00:20:44,640
that you could do that

551
00:20:44,640 --> 00:20:46,960
uh you can do things where you're not

552
00:20:46,960 --> 00:20:48,080
using the data

553
00:20:48,080 --> 00:20:49,280
from the thing that you're

554
00:20:49,280 --> 00:20:52,320
retransmitting so this could be based on

555
00:20:52,320 --> 00:20:55,120
another message something from another

556
00:20:55,120 --> 00:20:55,760
network

557
00:20:55,760 --> 00:20:57,760
you really could do whatever you want

558
00:20:57,760 --> 00:20:59,200
okay

559
00:20:59,200 --> 00:21:01,039
eventually you'll see that guy go down

560
00:21:01,039 --> 00:21:02,640
i'll let that guy run for a while while

561
00:21:02,640 --> 00:21:05,520
you go up the next one

562
00:21:06,240 --> 00:21:08,080
and eventually you'll see this guy's

563
00:21:08,080 --> 00:21:09,440
gonna stop transmitting

564
00:21:09,440 --> 00:21:11,760
because that guy right there will

565
00:21:11,760 --> 00:21:12,720
actually start to

566
00:21:12,720 --> 00:21:15,039
uh fade away you'll see that that

567
00:21:15,039 --> 00:21:17,919
highlighting will fade away

568
00:21:17,919 --> 00:21:19,120
in the meantime i'm going to pull up

569
00:21:19,120 --> 00:21:21,280
another one

570
00:21:21,280 --> 00:21:23,039
because this is probably something that

571
00:21:23,039 --> 00:21:25,039
i see requested a lot

572
00:21:25,039 --> 00:21:28,640
okay this guy's just about over here is

573
00:21:28,640 --> 00:21:30,720
just about to go away

574
00:21:30,720 --> 00:21:33,840
but uh basically i might want to grab

575
00:21:33,840 --> 00:21:34,640
something

576
00:21:34,640 --> 00:21:37,200
and then just change the arbitration id

577
00:21:37,200 --> 00:21:37,679
okay

578
00:21:37,679 --> 00:21:39,679
change the id and by the way this one

579
00:21:39,679 --> 00:21:40,960
just finally went away

580
00:21:40,960 --> 00:21:43,360
that's why it stopped at 292. it's no

581
00:21:43,360 --> 00:21:44,640
longer transmitting so

582
00:21:44,640 --> 00:21:46,799
it just jumped up up again and now it's

583
00:21:46,799 --> 00:21:49,600
transmitting again

584
00:21:54,240 --> 00:21:58,000
so in this one set up in a similar

585
00:21:58,000 --> 00:22:01,600
way however if we're going to remap it

586
00:22:01,600 --> 00:22:03,840
then what we need to do is to choose

587
00:22:03,840 --> 00:22:05,200
something a bit different down here for

588
00:22:05,200 --> 00:22:07,520
the action we cannot just forward it

589
00:22:07,520 --> 00:22:10,559
we're actually going to what we call map

590
00:22:10,559 --> 00:22:14,159
it to another uh another uh

591
00:22:14,159 --> 00:22:18,640
message so over here i've got

592
00:22:18,640 --> 00:22:20,720
in this case it's data seven it was

593
00:22:20,720 --> 00:22:22,400
pulled over here

594
00:22:22,400 --> 00:22:24,400
i will end up deleting the second one

595
00:22:24,400 --> 00:22:25,520
here in a second i'm just going to

596
00:22:25,520 --> 00:22:26,080
rebuild

597
00:22:26,080 --> 00:22:28,559
that first one get rid of the second one

598
00:22:28,559 --> 00:22:30,000
and then run this

599
00:22:30,000 --> 00:22:32,720
demonstration but essentially if i want

600
00:22:32,720 --> 00:22:34,240
to map it

601
00:22:34,240 --> 00:22:35,919
now it starts looking for a message

602
00:22:35,919 --> 00:22:37,919
saying select a message

603
00:22:37,919 --> 00:22:40,799
so over here i have to find a message

604
00:22:40,799 --> 00:22:42,799
that i'm going to map it to

605
00:22:42,799 --> 00:22:44,799
and in this case we've actually made a

606
00:22:44,799 --> 00:22:45,919
transmit message

607
00:22:45,919 --> 00:22:49,520
that i can grab and since i'm grabbing

608
00:22:49,520 --> 00:22:50,960
the entire frame

609
00:22:50,960 --> 00:22:53,679
data 7 here so it's got all the signals

610
00:22:53,679 --> 00:22:55,360
in it right

611
00:22:55,360 --> 00:22:57,600
i'm going to grab this entire frame and

612
00:22:57,600 --> 00:23:00,000
drag it down and drop it right in

613
00:23:00,000 --> 00:23:03,840
here okay

614
00:23:03,840 --> 00:23:09,840
and that's how i created that first one

615
00:23:10,080 --> 00:23:11,280
so i'm going to go online and then

616
00:23:11,280 --> 00:23:13,679
you'll see that uh this is actually

617
00:23:13,679 --> 00:23:15,520
duplicated

618
00:23:15,520 --> 00:23:18,400
so i've got uh let's see i believe it's

619
00:23:18,400 --> 00:23:18,880
oh

620
00:23:18,880 --> 00:23:22,640
yeah there we go it's 123

621
00:23:22,640 --> 00:23:25,600
7 11 i believe let's see if i got them

622
00:23:25,600 --> 00:23:26,080
right

623
00:23:26,080 --> 00:23:28,240
yeah looks like they're uh yep they're

624
00:23:28,240 --> 00:23:31,039
right next to each other there

625
00:23:31,039 --> 00:23:33,039
so that's another tweak i can do so now

626
00:23:33,039 --> 00:23:35,039
i'm getting a little more sophisticated

627
00:23:35,039 --> 00:23:37,039
a little more realistic to things that

628
00:23:37,039 --> 00:23:38,400
you might want to do

629
00:23:38,400 --> 00:23:40,559
okay this is something that i've had

630
00:23:40,559 --> 00:23:41,600
people ask me

631
00:23:41,600 --> 00:23:44,080
many times to do just in testing

632
00:23:44,080 --> 00:23:45,440
validation

633
00:23:45,440 --> 00:23:48,240
also on you know for cyber security uh

634
00:23:48,240 --> 00:23:49,840
they want to change something hook it up

635
00:23:49,840 --> 00:23:50,960
to some other device

636
00:23:50,960 --> 00:23:54,240
record it etc

637
00:23:57,919 --> 00:24:01,120
all right next one is

638
00:24:01,120 --> 00:24:02,880
i have it in canon and it needs to go to

639
00:24:02,880 --> 00:24:04,240
can fd

640
00:24:04,240 --> 00:24:07,520
so again the same idea you're dragging

641
00:24:07,520 --> 00:24:08,159
over

642
00:24:08,159 --> 00:24:11,840
from your message uh your input

643
00:24:11,840 --> 00:24:13,919
and then on the output you're picking

644
00:24:13,919 --> 00:24:15,679
another frame for it to go to

645
00:24:15,679 --> 00:24:19,360
in this case it's simply a classical can

646
00:24:19,360 --> 00:24:21,440
frame this data seven

647
00:24:21,440 --> 00:24:23,840
and we created a can fd frame on the

648
00:24:23,840 --> 00:24:26,399
other side

649
00:24:30,480 --> 00:24:33,120
just a second here i'm trying to see

650
00:24:33,120 --> 00:24:34,080
because my

651
00:24:34,080 --> 00:24:37,120
eyes are terrible so essentially you'll

652
00:24:37,120 --> 00:24:38,080
see that it's got

653
00:24:38,080 --> 00:24:39,919
three separate signals in here you can

654
00:24:39,919 --> 00:24:41,360
ignore those other things those are

655
00:24:41,360 --> 00:24:41,919
actually just

656
00:24:41,919 --> 00:24:45,600
properties of that can data seven

657
00:24:45,600 --> 00:24:47,120
and you'll also see that they have the

658
00:24:47,120 --> 00:24:49,279
same exact names over here as well

659
00:24:49,279 --> 00:24:50,960
so those will automatically get mapped

660
00:24:50,960 --> 00:24:52,320
over uh

661
00:24:52,320 --> 00:24:55,360
but the size of this frame is different

662
00:24:55,360 --> 00:24:57,440
you'll see that here in just a moment

663
00:24:57,440 --> 00:24:59,760
uh the warning it's talking about is the

664
00:24:59,760 --> 00:25:02,960
length of bytes is 20.

665
00:25:02,960 --> 00:25:04,640
the warning on this little warning

666
00:25:04,640 --> 00:25:06,159
flashing light

667
00:25:06,159 --> 00:25:08,400
but this one's eight so this is actually

668
00:25:08,400 --> 00:25:10,559
20 bytes just to show its cam d

669
00:25:10,559 --> 00:25:15,840
it'll still go online though

670
00:25:15,840 --> 00:25:17,279
so i know i'm throwing these up really

671
00:25:17,279 --> 00:25:21,360
quick but the fact is

672
00:25:22,000 --> 00:25:24,640
i haven't used this uh probably in a

673
00:25:24,640 --> 00:25:25,440
year and a half

674
00:25:25,440 --> 00:25:27,679
and i actually went through all these

675
00:25:27,679 --> 00:25:29,520
and did this all within the last two

676
00:25:29,520 --> 00:25:30,720
hours and troubleshot

677
00:25:30,720 --> 00:25:33,200
everything and got it running so uh even

678
00:25:33,200 --> 00:25:34,880
if if you were

679
00:25:34,880 --> 00:25:36,559
totally new to vehicle spy in the

680
00:25:36,559 --> 00:25:38,640
gateway builder then you could

681
00:25:38,640 --> 00:25:40,640
get this done like start at 10 o'clock

682
00:25:40,640 --> 00:25:42,159
in the morning and be done by lunch

683
00:25:42,159 --> 00:25:44,080
probably have everything trouble shot

684
00:25:44,080 --> 00:25:46,080
and ready to go easily

685
00:25:46,080 --> 00:25:47,600
most likely you'll have it done in a few

686
00:25:47,600 --> 00:25:49,840
minutes if it's a simpler one

687
00:25:49,840 --> 00:25:51,360
so you can see this one right here is

688
00:25:51,360 --> 00:25:53,120
actually standard can

689
00:25:53,120 --> 00:25:56,880
you can tell that

690
00:25:56,880 --> 00:25:59,279
because in this view you'll see there's

691
00:25:59,279 --> 00:26:00,640
fdf and the

692
00:26:00,640 --> 00:26:04,640
vrs esi those are different switches for

693
00:26:04,640 --> 00:26:07,279
can fd they are not present in all the

694
00:26:07,279 --> 00:26:08,799
other data because that's all standard

695
00:26:08,799 --> 00:26:09,279
can

696
00:26:09,279 --> 00:26:11,679
or classical can but you do see that

697
00:26:11,679 --> 00:26:13,279
those values are in

698
00:26:13,279 --> 00:26:15,200
this frame and of course it's 20 bytes

699
00:26:15,200 --> 00:26:17,360
so that's kind of a dead giveaway

700
00:26:17,360 --> 00:26:19,678
all right

701
00:26:23,039 --> 00:26:26,080
all right now we're getting

702
00:26:26,080 --> 00:26:29,600
to more and more fun so in this next

703
00:26:29,600 --> 00:26:30,880
demonstration

704
00:26:30,880 --> 00:26:34,320
i'm basically grabbing uh a certain

705
00:26:34,320 --> 00:26:36,320
signal and tweaking that signal

706
00:26:36,320 --> 00:26:38,799
okay so let me show you what this is

707
00:26:38,799 --> 00:26:40,080
doing this time

708
00:26:40,080 --> 00:26:42,080
in this case what we've done is not

709
00:26:42,080 --> 00:26:44,960
grabbed the whole message or frame

710
00:26:44,960 --> 00:26:48,080
i've actually grabbed one signal so in

711
00:26:48,080 --> 00:26:50,559
this case it says lf wheel speed

712
00:26:50,559 --> 00:26:52,400
so left front wheel speed we just drag

713
00:26:52,400 --> 00:26:55,200
that in and now we've got a signal

714
00:26:55,200 --> 00:26:58,559
so if we do a single signal then it will

715
00:26:58,559 --> 00:27:00,000
be interesting to see what really

716
00:27:00,000 --> 00:27:00,960
happens

717
00:27:00,960 --> 00:27:03,360
when we do this as a gateway because of

718
00:27:03,360 --> 00:27:04,240
course

719
00:27:04,240 --> 00:27:06,720
it's not like you can get one signal and

720
00:27:06,720 --> 00:27:08,159
just forget all the rest of the data

721
00:27:08,159 --> 00:27:10,000
bytes in your cam frame right

722
00:27:10,000 --> 00:27:12,640
so uh in this case what we're doing is

723
00:27:12,640 --> 00:27:14,240
we're actually

724
00:27:14,240 --> 00:27:17,600
still forwarding it just like we had

725
00:27:17,600 --> 00:27:21,840
been forwarding entire can frames

726
00:27:21,840 --> 00:27:25,679
but we are taking this one signal

727
00:27:25,679 --> 00:27:27,840
and we are changing it by using this

728
00:27:27,840 --> 00:27:29,440
expression checkbox

729
00:27:29,440 --> 00:27:31,200
and in that expression we're making it

730
00:27:31,200 --> 00:27:34,240
255. so we're gonna make it ff

731
00:27:34,240 --> 00:27:35,440
essentially because this is going to be

732
00:27:35,440 --> 00:27:38,000
one bite so

733
00:27:38,000 --> 00:27:41,760
let's fire this up and see what happens

734
00:27:44,880 --> 00:27:47,200
and time gas there we go here i'll just

735
00:27:47,200 --> 00:27:48,799
go ahead and get rid of that filter

736
00:27:48,799 --> 00:27:50,080
you can see that everything else is

737
00:27:50,080 --> 00:27:51,840
still working but you only have this one

738
00:27:51,840 --> 00:27:54,000
ms scan coming across here

739
00:27:54,000 --> 00:27:56,720
and this data five is what we actually

740
00:27:56,720 --> 00:27:58,880
we're grabbing one signal from

741
00:27:58,880 --> 00:28:01,120
so let's filter this out and see exactly

742
00:28:01,120 --> 00:28:04,158
what's really going on

743
00:28:05,840 --> 00:28:10,640
and so in this case this lf wheel speed

744
00:28:10,640 --> 00:28:12,080
you can see unfortunately these are all

745
00:28:12,080 --> 00:28:14,080
the same value and they stay that way

746
00:28:14,080 --> 00:28:16,480
but this lf wheel speed is actually

747
00:28:16,480 --> 00:28:17,600
byte4

748
00:28:17,600 --> 00:28:21,120
and that's why it says ff here but

749
00:28:21,120 --> 00:28:22,640
it doesn't show any values for the other

750
00:28:22,640 --> 00:28:24,320
ones so

751
00:28:24,320 --> 00:28:27,679
one question why would it not

752
00:28:27,679 --> 00:28:29,440
transfer the other ones well you did not

753
00:28:29,440 --> 00:28:30,720
tell it to do it

754
00:28:30,720 --> 00:28:33,919
you only transferred that one signal so

755
00:28:33,919 --> 00:28:35,679
if you want to you can transfer the

756
00:28:35,679 --> 00:28:36,399
other ones

757
00:28:36,399 --> 00:28:38,640
and you can change those if you want or

758
00:28:38,640 --> 00:28:41,279
just transfer the existing value

759
00:28:41,279 --> 00:28:43,200
so that way you can tweak right down to

760
00:28:43,200 --> 00:28:45,520
the bite you know whatever signal you

761
00:28:45,520 --> 00:28:47,440
make even if it's a single

762
00:28:47,440 --> 00:28:49,520
just a single bit you can actually tweak

763
00:28:49,520 --> 00:28:52,399
it in this manner

764
00:28:56,840 --> 00:28:58,000
okay

765
00:28:58,000 --> 00:28:59,679
all right i've got two more demos and

766
00:28:59,679 --> 00:29:01,200
then a few more slides and then we're

767
00:29:01,200 --> 00:29:02,159
ready to roll

768
00:29:02,159 --> 00:29:04,720
okay so now we're going to get to

769
00:29:04,720 --> 00:29:06,320
something a little

770
00:29:06,320 --> 00:29:10,320
more elaborate so essentially what we're

771
00:29:10,320 --> 00:29:12,159
going to do is take a couple a couple

772
00:29:12,159 --> 00:29:13,039
data bytes

773
00:29:13,039 --> 00:29:16,080
and we're going to uh

774
00:29:16,080 --> 00:29:18,480
send those across let me go online with

775
00:29:18,480 --> 00:29:20,320
this one

776
00:29:20,320 --> 00:29:21,679
you might have actually found a bug in

777
00:29:21,679 --> 00:29:23,200
our existing software in this one

778
00:29:23,200 --> 00:29:24,640
something tells me that this one was not

779
00:29:24,640 --> 00:29:25,440
working

780
00:29:25,440 --> 00:29:28,640
quite the way i wanted it to

781
00:29:32,880 --> 00:29:36,640
so basically in this one

782
00:29:36,640 --> 00:29:38,559
i think this is one that actually is not

783
00:29:38,559 --> 00:29:41,840
working quite the way it should

784
00:29:42,320 --> 00:29:45,760
because it's not actually wrong

785
00:29:45,760 --> 00:29:47,120
this one is actually supposed to have a

786
00:29:47,120 --> 00:29:48,399
different calibration in this

787
00:29:48,399 --> 00:29:50,000
engineering rpm

788
00:29:50,000 --> 00:29:55,840
uh let me try something different

789
00:29:56,399 --> 00:29:58,640
i'm going to try to reload this in

790
00:29:58,640 --> 00:30:00,559
essentially what i would do is grab this

791
00:30:00,559 --> 00:30:02,960
engineering rpm pull it up and then

792
00:30:02,960 --> 00:30:04,559
choose map

793
00:30:04,559 --> 00:30:07,919
down here and then the mapping would

794
00:30:07,919 --> 00:30:08,880
actually be to

795
00:30:08,880 --> 00:30:11,200
when i map it to the other signal so

796
00:30:11,200 --> 00:30:12,399
that i can pull this guy

797
00:30:12,399 --> 00:30:14,880
in drop them in here yeah there it's

798
00:30:14,880 --> 00:30:17,679
it's not now it's saying it's a warning

799
00:30:17,679 --> 00:30:20,000
but it looks like we've got some error

800
00:30:20,000 --> 00:30:22,240
somewhere i found some bug in this tip

801
00:30:22,240 --> 00:30:25,200
just a couple hours ago but you can see

802
00:30:25,200 --> 00:30:26,720
that the scalene

803
00:30:26,720 --> 00:30:29,279
originally there is no scaling but in

804
00:30:29,279 --> 00:30:30,399
this case

805
00:30:30,399 --> 00:30:32,399
i'm actually sending it to a signal that

806
00:30:32,399 --> 00:30:33,840
has a different scaling

807
00:30:33,840 --> 00:30:36,000
and in this case i could actually change

808
00:30:36,000 --> 00:30:37,760
the scaling on the fly

809
00:30:37,760 --> 00:30:40,480
as part of the gateway so let me go

810
00:30:40,480 --> 00:30:41,760
online with this and we'll see if it

811
00:30:41,760 --> 00:30:43,440
works i have a feeling it's not going to

812
00:30:43,440 --> 00:30:45,279
work

813
00:30:45,279 --> 00:30:48,720
so uh oh yeah yeah we got a problem with

814
00:30:48,720 --> 00:30:50,000
that one there's definitely a bug in

815
00:30:50,000 --> 00:30:52,080
there sorry guys

816
00:30:52,080 --> 00:30:54,639
it happens

817
00:30:58,159 --> 00:31:01,200
oh now we got real problems give me a

818
00:31:01,200 --> 00:31:05,279
second here i'll try to find that one

819
00:31:05,279 --> 00:31:06,960
see if i can actually make this other

820
00:31:06,960 --> 00:31:10,399
one run because we are almost done

821
00:31:10,399 --> 00:31:12,960
actually you know what i'm good that is

822
00:31:12,960 --> 00:31:13,679
actually the last

823
00:31:13,679 --> 00:31:16,960
one let me oh no no

824
00:31:16,960 --> 00:31:19,200
this one i want to do definitely this

825
00:31:19,200 --> 00:31:21,519
last one is actually combining

826
00:31:21,519 --> 00:31:23,919
the signals from different uh different

827
00:31:23,919 --> 00:31:25,919
uh

828
00:31:25,919 --> 00:31:27,919
from different frames so essentially

829
00:31:27,919 --> 00:31:30,240
i've taken one signal

830
00:31:30,240 --> 00:31:32,799
from this data 6 frame a couple from

831
00:31:32,799 --> 00:31:35,600
data 7 and 1 from steering wheel angle

832
00:31:35,600 --> 00:31:37,760
and i put them all together in a

833
00:31:37,760 --> 00:31:40,640
separate database over here

834
00:31:40,640 --> 00:31:43,039
so essentially those are now all

835
00:31:43,039 --> 00:31:44,880
combined and all four of these run at

836
00:31:44,880 --> 00:31:46,720
the same time let's see if we can get

837
00:31:46,720 --> 00:31:48,240
away with running this i don't know if

838
00:31:48,240 --> 00:31:49,919
i'm going to with the other

839
00:31:49,919 --> 00:31:52,080
other instance crashed on me so i might

840
00:31:52,080 --> 00:31:55,439
get away with it i might not

841
00:31:58,000 --> 00:32:01,519
ah worked so basically what you see here

842
00:32:01,519 --> 00:32:03,919
is that we are actually taking the

843
00:32:03,919 --> 00:32:04,960
values

844
00:32:04,960 --> 00:32:07,440
from each of these that i've mapped like

845
00:32:07,440 --> 00:32:09,039
in this case i think it's fuel alcohol

846
00:32:09,039 --> 00:32:10,559
percent

847
00:32:10,559 --> 00:32:12,559
so you can see that guy's the same

848
00:32:12,559 --> 00:32:15,200
target speed is mapped

849
00:32:15,200 --> 00:32:16,720
i think the only thing is i should have

850
00:32:16,720 --> 00:32:18,880
forced this to a certain uh

851
00:32:18,880 --> 00:32:20,480
data rate that's why it's jumping around

852
00:32:20,480 --> 00:32:21,919
so much it's pulling in

853
00:32:21,919 --> 00:32:24,240
it's it's transmitting every single time

854
00:32:24,240 --> 00:32:25,679
any one of them changes and they're all

855
00:32:25,679 --> 00:32:27,279
on the scene

856
00:32:27,279 --> 00:32:30,640
so let me jump out of this

857
00:32:30,640 --> 00:32:32,080
we can kill all these instances we've

858
00:32:32,080 --> 00:32:34,080
got enough i've done enough vehicle spy

859
00:32:34,080 --> 00:32:36,480
for today

860
00:32:38,960 --> 00:32:44,159
get rid of all those holy shmoley

861
00:32:45,120 --> 00:32:48,720
how many copies i have running about 15

862
00:32:48,720 --> 00:32:52,080
so um so essentially last couple

863
00:32:52,080 --> 00:32:54,000
slides here this won't take long like

864
00:32:54,000 --> 00:32:55,679
eight more slides were done

865
00:32:55,679 --> 00:32:58,480
so message injection uh so or signal

866
00:32:58,480 --> 00:33:00,480
injection

867
00:33:00,480 --> 00:33:03,919
um sometimes you want to just

868
00:33:03,919 --> 00:33:06,159
change the data in a certain cam frame

869
00:33:06,159 --> 00:33:07,279
and in

870
00:33:07,279 --> 00:33:09,840
the old school way is to simply just

871
00:33:09,840 --> 00:33:11,200
transmit

872
00:33:11,200 --> 00:33:14,799
twice as fast as the existing

873
00:33:14,799 --> 00:33:18,159
frame on the bus and when you do that

874
00:33:18,159 --> 00:33:20,960
essentially what happens is the ecu's

875
00:33:20,960 --> 00:33:22,240
that are monitoring that

876
00:33:22,240 --> 00:33:25,840
will essentially always see your value

877
00:33:25,840 --> 00:33:28,080
let's see your frame because yours is

878
00:33:28,080 --> 00:33:30,159
coming out twice as fast

879
00:33:30,159 --> 00:33:32,799
unless it's exactly on the money then

880
00:33:32,799 --> 00:33:33,919
you're going to

881
00:33:33,919 --> 00:33:36,640
uh that ecu will always see your values

882
00:33:36,640 --> 00:33:37,279
not

883
00:33:37,279 --> 00:33:40,799
the actual ecu's values so that's really

884
00:33:40,799 --> 00:33:41,519
pretty easy

885
00:33:41,519 --> 00:33:42,799
and that's the way we've done it for

886
00:33:42,799 --> 00:33:44,640
many years ever since canon's been out

887
00:33:44,640 --> 00:33:45,120
there

888
00:33:45,120 --> 00:33:46,559
anytime somebody wants to play with

889
00:33:46,559 --> 00:33:48,720
something for something in a certain ecu

890
00:33:48,720 --> 00:33:49,760
that's great

891
00:33:49,760 --> 00:33:52,880
however the problem is

892
00:33:52,880 --> 00:33:55,679
uh we have protected pdus so the

893
00:33:55,679 --> 00:33:57,840
protected pdus are essentially

894
00:33:57,840 --> 00:34:00,159
uh you know they're part of autozar's

895
00:34:00,159 --> 00:34:02,080
secure onboard communication

896
00:34:02,080 --> 00:34:05,679
uh it it makes the uh the vehicle

897
00:34:05,679 --> 00:34:09,520
or the ecu immune to replay attacks

898
00:34:09,520 --> 00:34:11,599
and you cannot override a can frame

899
00:34:11,599 --> 00:34:13,040
because

900
00:34:13,040 --> 00:34:15,679
the mac value that's being transmitted

901
00:34:15,679 --> 00:34:17,918
and the freshness value along with it

902
00:34:17,918 --> 00:34:20,639
is part uh well it's part the signals in

903
00:34:20,639 --> 00:34:22,879
the freshness value are part of the mac

904
00:34:22,879 --> 00:34:25,040
so therefore if you change the freshness

905
00:34:25,040 --> 00:34:26,719
value if you change

906
00:34:26,719 --> 00:34:29,839
the uh the pdu or the signals

907
00:34:29,839 --> 00:34:32,079
then you have to have a new mac and if

908
00:34:32,079 --> 00:34:32,960
that mac doesn't

909
00:34:32,960 --> 00:34:36,879
uh jive on the other side then no go

910
00:34:36,879 --> 00:34:39,839
the ecu that receives it will ignore it

911
00:34:39,839 --> 00:34:40,239
so

912
00:34:40,239 --> 00:34:41,679
you essentially have to have a man in

913
00:34:41,679 --> 00:34:43,520
the middle okay

914
00:34:43,520 --> 00:34:46,839
and that's just the beginning okay

915
00:34:46,839 --> 00:34:50,399
so if you

916
00:34:50,399 --> 00:34:52,800
uh if if you are going to do this that

917
00:34:52,800 --> 00:34:54,159
means you'd actually have to put

918
00:34:54,159 --> 00:34:54,800
security

919
00:34:54,800 --> 00:34:58,640
into the neo5 okay or into your box

920
00:34:58,640 --> 00:35:01,280
and the fact is we actually have already

921
00:35:01,280 --> 00:35:04,000
already implemented this for some oems

922
00:35:04,000 --> 00:35:05,920
uh because they have to use it to test

923
00:35:05,920 --> 00:35:07,440
there is no way to do this

924
00:35:07,440 --> 00:35:10,079
injection testing to force a certain

925
00:35:10,079 --> 00:35:10,720
signal

926
00:35:10,720 --> 00:35:13,760
unless you can change the signal

927
00:35:13,760 --> 00:35:16,560
recompute the mac up keep the freshness

928
00:35:16,560 --> 00:35:17,359
value

929
00:35:17,359 --> 00:35:19,839
and send that on and do it quick enough

930
00:35:19,839 --> 00:35:21,040
like a hill

931
00:35:21,040 --> 00:35:24,000
in order to be accepted by the ecu and

932
00:35:24,000 --> 00:35:24,720
i'd love to

933
00:35:24,720 --> 00:35:27,839
demonstrate it but i can't

934
00:35:27,839 --> 00:35:30,320
not that i can't do it just that i'm not

935
00:35:30,320 --> 00:35:31,680
allowed to show you

936
00:35:31,680 --> 00:35:34,880
uh but it can be done so uh

937
00:35:34,880 --> 00:35:37,680
any questions feel free to contact me uh

938
00:35:37,680 --> 00:35:39,119
i'll be in the village

939
00:35:39,119 --> 00:35:41,520
and i'll be in the q a here i'm sure

940
00:35:41,520 --> 00:35:43,359
when the video stops playing

941
00:35:43,359 --> 00:35:45,839
thanks a lot

942
00:36:01,200 --> 00:36:03,279
you

