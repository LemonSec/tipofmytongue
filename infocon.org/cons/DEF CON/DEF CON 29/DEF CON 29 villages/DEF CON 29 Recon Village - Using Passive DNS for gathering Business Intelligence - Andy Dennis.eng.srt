1
00:00:02,000 --> 00:00:04,080
hello everyone i'd like to welcome you

2
00:00:04,080 --> 00:00:06,640
to my talk today using passive dns for

3
00:00:06,640 --> 00:00:09,040
gathering business intelligence or how

4
00:00:09,040 --> 00:00:11,040
to snoop on what your competitors are up

5
00:00:11,040 --> 00:00:13,200
to

6
00:00:14,000 --> 00:00:15,120
so i'm going to start with a quick

7
00:00:15,120 --> 00:00:17,039
introduction to the talk

8
00:00:17,039 --> 00:00:19,439
in this talk we will look at passive dns

9
00:00:19,439 --> 00:00:21,840
what it is and a little history

10
00:00:21,840 --> 00:00:23,680
some of the services available to query

11
00:00:23,680 --> 00:00:25,680
passive dns databases

12
00:00:25,680 --> 00:00:26,880
how it can be used for gathering

13
00:00:26,880 --> 00:00:28,480
business intelligence

14
00:00:28,480 --> 00:00:30,560
and finally how you can mitigate

15
00:00:30,560 --> 00:00:34,399
business intelligence leakage

16
00:00:34,399 --> 00:00:36,079
so a little bit about me

17
00:00:36,079 --> 00:00:37,840
my name's andy dennis i'm director of

18
00:00:37,840 --> 00:00:40,079
security at modus create a dc area

19
00:00:40,079 --> 00:00:42,640
consultancy we work across multiple

20
00:00:42,640 --> 00:00:44,800
fields software engineering cloud

21
00:00:44,800 --> 00:00:47,200
architecture cyber security over the

22
00:00:47,200 --> 00:00:49,360
past 10 years we've probably worked on

23
00:00:49,360 --> 00:00:51,520
it if it's an area of technology you can

24
00:00:51,520 --> 00:00:52,559
learn more about us at

25
00:00:52,559 --> 00:00:55,559
www.moduscreate.com

26
00:00:56,800 --> 00:00:58,559
20 years working across software

27
00:00:58,559 --> 00:01:00,879
development architecture management

28
00:01:00,879 --> 00:01:03,359
devops cloud and cyber security

29
00:01:03,359 --> 00:01:05,438
and in my spare time outside of work i'm

30
00:01:05,438 --> 00:01:07,520
an organizer with b-sides connecticut

31
00:01:07,520 --> 00:01:10,240
you can visit our website at bsidect.org

32
00:01:10,240 --> 00:01:11,840
we're hoping to hold the conference this

33
00:01:11,840 --> 00:01:13,520
november

34
00:01:13,520 --> 00:01:15,759
hopefully a hybrid event um but

35
00:01:15,759 --> 00:01:17,280
depending on the covert situation where

36
00:01:17,280 --> 00:01:18,799
you have to revert to a virtual event

37
00:01:18,799 --> 00:01:20,640
only this year but if you're interested

38
00:01:20,640 --> 00:01:22,000
in doing something in november then

39
00:01:22,000 --> 00:01:25,200
please check our website out

40
00:01:25,200 --> 00:01:27,200
i'm also the author of several books on

41
00:01:27,200 --> 00:01:29,280
iot and a raspberry pi and i recently

42
00:01:29,280 --> 00:01:31,200
co-authored a book uh on docker called

43
00:01:31,200 --> 00:01:32,560
docker for developers with two my

44
00:01:32,560 --> 00:01:34,720
co-workers uh richard billington mcguire

45
00:01:34,720 --> 00:01:36,640
and mike schwartz so please check that

46
00:01:36,640 --> 00:01:37,680
out if you're interested in the

47
00:01:37,680 --> 00:01:41,240
subjective containers

48
00:01:42,159 --> 00:01:44,159
so the genesis of this talk how did this

49
00:01:44,159 --> 00:01:45,920
come about

50
00:01:45,920 --> 00:01:47,520
really the question is how do our

51
00:01:47,520 --> 00:01:49,280
customers prevent snoopers gathering

52
00:01:49,280 --> 00:01:51,600
business intelligence

53
00:01:51,600 --> 00:01:53,360
this question was a byproduct of

54
00:01:53,360 --> 00:01:55,439
conversations we had back in january

55
00:01:55,439 --> 00:01:57,520
2020 while poking around in risk iq

56
00:01:57,520 --> 00:01:59,119
while we're drinking some coffee and

57
00:01:59,119 --> 00:02:00,880
then a brainstorming session over beers

58
00:02:00,880 --> 00:02:02,719
later in the evening we wanted to

59
00:02:02,719 --> 00:02:04,799
understand based upon the data we saw on

60
00:02:04,799 --> 00:02:07,200
risk iq how do we avoid leaking

61
00:02:07,200 --> 00:02:09,520
sensitive information about our company

62
00:02:09,520 --> 00:02:11,920
and secondly how do we plug these gaps

63
00:02:11,920 --> 00:02:14,319
is it policy process technology a

64
00:02:14,319 --> 00:02:16,879
combination of them

65
00:02:16,879 --> 00:02:18,640
we're also interested in what's the best

66
00:02:18,640 --> 00:02:20,879
approach for helping customers keep new

67
00:02:20,879 --> 00:02:23,040
products under wraps before launch how

68
00:02:23,040 --> 00:02:25,200
do they prevent competitors

69
00:02:25,200 --> 00:02:27,520
from poking around in tools like risk iq

70
00:02:27,520 --> 00:02:29,040
and finding out sensitive information

71
00:02:29,040 --> 00:02:30,720
about new products they're developing or

72
00:02:30,720 --> 00:02:33,760
perhaps customers they're working with

73
00:02:33,760 --> 00:02:35,120
and finally

74
00:02:35,120 --> 00:02:37,040
we're curious

75
00:02:37,040 --> 00:02:39,040
what are our competitors doing and if we

76
00:02:39,040 --> 00:02:40,640
can see what they're doing

77
00:02:40,640 --> 00:02:41,920
can they come and see what we're doing

78
00:02:41,920 --> 00:02:43,360
of course the answer that is yes if

79
00:02:43,360 --> 00:02:45,440
we've left information available which

80
00:02:45,440 --> 00:02:47,599
is picked up by passive dns tools then

81
00:02:47,599 --> 00:02:51,480
they can see what we're doing

82
00:02:51,680 --> 00:02:53,519
so let's just do a quick introduction to

83
00:02:53,519 --> 00:02:55,599
passive dns

84
00:02:55,599 --> 00:02:57,840
dns which stands for domain name systems

85
00:02:57,840 --> 00:02:59,920
maps domain names to ip addresses and it

86
00:02:59,920 --> 00:03:02,319
acts like a phone book for the internet

87
00:03:02,319 --> 00:03:05,120
passive dns is a mechanism to store the

88
00:03:05,120 --> 00:03:07,360
dns resolution data and that is

89
00:03:07,360 --> 00:03:09,200
essentially historical data in a

90
00:03:09,200 --> 00:03:11,360
mechanism that can then be queried

91
00:03:11,360 --> 00:03:14,239
so you can go and reference past dns

92
00:03:14,239 --> 00:03:16,159
entries within these databases and

93
00:03:16,159 --> 00:03:17,680
gather information that you need and

94
00:03:17,680 --> 00:03:19,599
there's a variety of services out there

95
00:03:19,599 --> 00:03:21,920
that offer passive dns

96
00:03:21,920 --> 00:03:24,000
services including risk iq and a few

97
00:03:24,000 --> 00:03:25,680
others that we will briefly touch on

98
00:03:25,680 --> 00:03:28,000
later in the talk

99
00:03:28,000 --> 00:03:29,760
passive dns is useful for tracking down

100
00:03:29,760 --> 00:03:32,480
security incidents rogue infrastructure

101
00:03:32,480 --> 00:03:34,400
so for example if individuals in the

102
00:03:34,400 --> 00:03:36,799
team have spun up servers and then

103
00:03:36,799 --> 00:03:39,840
registered subdomains in route 53 and

104
00:03:39,840 --> 00:03:42,000
perhaps appointing them to this

105
00:03:42,000 --> 00:03:44,080
infrastructure and then it sits there

106
00:03:44,080 --> 00:03:46,720
for a few weeks and gets spun down and

107
00:03:46,720 --> 00:03:48,159
you know you can gather information

108
00:03:48,159 --> 00:03:50,239
around oh okay well when did this happen

109
00:03:50,239 --> 00:03:52,319
why was this done and really that going

110
00:03:52,319 --> 00:03:54,400
into a tool like risk iq and having a

111
00:03:54,400 --> 00:03:56,080
look at these sub domains that you will

112
00:03:56,080 --> 00:03:58,000
see shortly can provide information

113
00:03:58,000 --> 00:03:59,519
around that that can be quite useful for

114
00:03:59,519 --> 00:04:01,439
tracking down when rogue infrastructure

115
00:04:01,439 --> 00:04:02,560
was spun up and then asking the

116
00:04:02,560 --> 00:04:05,280
important question of why um it's also

117
00:04:05,280 --> 00:04:06,239
great for tracking down missed

118
00:04:06,239 --> 00:04:08,159
configurations and legacy forgotten

119
00:04:08,159 --> 00:04:09,840
infrastructure i mean this is especially

120
00:04:09,840 --> 00:04:11,040
true when you have mergers and

121
00:04:11,040 --> 00:04:13,439
acquisitions you sometimes end up with

122
00:04:13,439 --> 00:04:15,280
multiple different cloud systems

123
00:04:15,280 --> 00:04:17,440
different services running in it and

124
00:04:17,440 --> 00:04:18,880
being able to go through and have a look

125
00:04:18,880 --> 00:04:21,440
at the sub domains associated with uh

126
00:04:21,440 --> 00:04:22,400
you know

127
00:04:22,400 --> 00:04:24,160
the set of domains that perhaps this

128
00:04:24,160 --> 00:04:26,320
company that you've merged with owned is

129
00:04:26,320 --> 00:04:27,919
a you know a great way of being able to

130
00:04:27,919 --> 00:04:28,960
track down some of this forgotten

131
00:04:28,960 --> 00:04:30,479
infrastructure that perhaps is uh

132
00:04:30,479 --> 00:04:32,160
sitting out there collecting dust and

133
00:04:32,160 --> 00:04:34,560
costing you money

134
00:04:34,560 --> 00:04:37,440
and we can use passive de uh uh dns to

135
00:04:37,440 --> 00:04:39,520
see when domain records have changed for

136
00:04:39,520 --> 00:04:41,280
example when the a record changed to a

137
00:04:41,280 --> 00:04:43,360
different ip address

138
00:04:43,360 --> 00:04:46,240
and it basically works by capturing dns

139
00:04:46,240 --> 00:04:47,759
records and storing them in a database

140
00:04:47,759 --> 00:04:49,199
for reference

141
00:04:49,199 --> 00:04:51,120
so it's

142
00:04:51,120 --> 00:04:53,199
at its heart it's a historical source of

143
00:04:53,199 --> 00:04:56,199
information

144
00:04:56,320 --> 00:04:58,400
it's talking of history

145
00:04:58,400 --> 00:05:02,880
how did passive dns become a thing

146
00:05:03,039 --> 00:05:05,919
so prior to 2005 dns history wasn't

147
00:05:05,919 --> 00:05:08,000
stored and thus was lost whether the

148
00:05:08,000 --> 00:05:09,680
intelligence services had some mechanism

149
00:05:09,680 --> 00:05:11,520
they collected it i i guess is open to

150
00:05:11,520 --> 00:05:14,080
speculation but

151
00:05:14,080 --> 00:05:15,600
that the status quo at the time was that

152
00:05:15,600 --> 00:05:17,360
was essentially lost and this led

153
00:05:17,360 --> 00:05:20,240
florian weimer to invent passive dns i

154
00:05:20,240 --> 00:05:21,759
believe florian wyman is actually an

155
00:05:21,759 --> 00:05:25,280
engineer at red hat now and development

156
00:05:25,280 --> 00:05:28,400
started in 2004 and pdns was first

157
00:05:28,400 --> 00:05:30,479
introduced to the community at the first

158
00:05:30,479 --> 00:05:32,160
conference and you can actually go and

159
00:05:32,160 --> 00:05:33,840
read the original presentation at the

160
00:05:33,840 --> 00:05:35,039
link i've provided here if you're

161
00:05:35,039 --> 00:05:36,560
interested and there's some of the more

162
00:05:36,560 --> 00:05:39,039
technical details in there um so if

163
00:05:39,039 --> 00:05:41,199
that's your thing please

164
00:05:41,199 --> 00:05:42,400
take a look at these slides after the

165
00:05:42,400 --> 00:05:44,320
talk and go ahead and have a poke around

166
00:05:44,320 --> 00:05:45,840
and read because you'll probably find it

167
00:05:45,840 --> 00:05:48,160
interesting

168
00:05:48,160 --> 00:05:50,720
this idea of the dns logger in the paper

169
00:05:50,720 --> 00:05:52,560
we'll just quickly touch on that and the

170
00:05:52,560 --> 00:05:54,080
technical details we don't really have

171
00:05:54,080 --> 00:05:56,000
time to go into a lot of detail but i

172
00:05:56,000 --> 00:05:58,000
think a quick high level overview is

173
00:05:58,000 --> 00:06:00,160
interesting

174
00:06:00,160 --> 00:06:02,319
so passive dns is based on the dns

175
00:06:02,319 --> 00:06:04,639
logger architecture which was proposed

176
00:06:04,639 --> 00:06:06,560
by florian weimer

177
00:06:06,560 --> 00:06:08,560
this architecture consists of sensors

178
00:06:08,560 --> 00:06:11,120
which send data to the dns logger host

179
00:06:11,120 --> 00:06:12,960
and these original sensor

180
00:06:12,960 --> 00:06:14,560
concepts were written in perl and seen

181
00:06:14,560 --> 00:06:15,680
i'm sure the source code is probably

182
00:06:15,680 --> 00:06:16,800
still out there on the internet if you

183
00:06:16,800 --> 00:06:19,120
want to go check it out

184
00:06:19,120 --> 00:06:20,880
um there's an analyzer module which

185
00:06:20,880 --> 00:06:22,560
inspects the data

186
00:06:22,560 --> 00:06:24,880
and then this collector module um which

187
00:06:24,880 --> 00:06:26,800
collects it and then it's stored within

188
00:06:26,800 --> 00:06:28,800
a database and i believe the original

189
00:06:28,800 --> 00:06:30,720
one uh was written in sleepy cat which

190
00:06:30,720 --> 00:06:32,479
is a berkeley db um and i'm sure there's

191
00:06:32,479 --> 00:06:33,680
probably examples of that still out

192
00:06:33,680 --> 00:06:35,440
there if you're interested to

193
00:06:35,440 --> 00:06:37,759
check them out

194
00:06:37,759 --> 00:06:39,600
then there's a who is server connected

195
00:06:39,600 --> 00:06:41,680
to the database and who has clients who

196
00:06:41,680 --> 00:06:43,600
can query the server to gather that

197
00:06:43,600 --> 00:06:45,039
information that they're interested in

198
00:06:45,039 --> 00:06:47,039
by querying the database via the whois

199
00:06:47,039 --> 00:06:49,840
server so it's quite a simple

200
00:06:49,840 --> 00:06:52,080
mechanism on on the surface for doing

201
00:06:52,080 --> 00:06:54,240
this

202
00:06:55,680 --> 00:06:56,560
so

203
00:06:56,560 --> 00:06:59,599
since uh that original concept

204
00:06:59,599 --> 00:07:02,000
there's now many custom many companies

205
00:07:02,000 --> 00:07:03,680
are out there that are offering

206
00:07:03,680 --> 00:07:05,280
passive dns

207
00:07:05,280 --> 00:07:08,400
um that includes cisco umbrella risk iq

208
00:07:08,400 --> 00:07:10,479
which we'll look at shortly security

209
00:07:10,479 --> 00:07:11,520
trails

210
00:07:11,520 --> 00:07:13,840
circle passive dns

211
00:07:13,840 --> 00:07:16,479
i believe that's an api and you have to

212
00:07:16,479 --> 00:07:18,160
get permission to query it but

213
00:07:18,160 --> 00:07:20,319
effectively you can query the circle

214
00:07:20,319 --> 00:07:22,479
passive dns api and gather those

215
00:07:22,479 --> 00:07:23,919
historical data

216
00:07:23,919 --> 00:07:25,759
that you're interested in if you have

217
00:07:25,759 --> 00:07:28,160
access to it spam house

218
00:07:28,160 --> 00:07:30,000
also offers a passive dnf service as

219
00:07:30,000 --> 00:07:31,599
well

220
00:07:31,599 --> 00:07:33,199
so some of these

221
00:07:33,199 --> 00:07:35,680
offer community editions or they also

222
00:07:35,680 --> 00:07:38,400
offer uh free trials so let's take a

223
00:07:38,400 --> 00:07:40,720
look at those should we

224
00:07:40,720 --> 00:07:42,800
free accounts

225
00:07:42,800 --> 00:07:44,960
so there are a variety of free trial

226
00:07:44,960 --> 00:07:47,039
account services out there

227
00:07:47,039 --> 00:07:49,120
this is by no means an exhaustive list

228
00:07:49,120 --> 00:07:50,400
i'm sure there's probably tools that

229
00:07:50,400 --> 00:07:51,440
some of you used out there that you

230
00:07:51,440 --> 00:07:53,039
prefer or other products that i've

231
00:07:53,039 --> 00:07:54,240
missed off here which you wish i had

232
00:07:54,240 --> 00:07:55,840
included in the list

233
00:07:55,840 --> 00:07:58,319
but if you do a google search after this

234
00:07:58,319 --> 00:08:00,000
talk or during it i'm sure you'll find

235
00:08:00,000 --> 00:08:02,160
something uh that that i've missed which

236
00:08:02,160 --> 00:08:03,280
is perhaps even better than what's

237
00:08:03,280 --> 00:08:05,520
listed here

238
00:08:05,520 --> 00:08:07,280
risk iq community edition i haven't

239
00:08:07,280 --> 00:08:10,799
think is great uh it's free

240
00:08:11,120 --> 00:08:13,440
um then we have security trials and spam

241
00:08:13,440 --> 00:08:15,199
house and most you've probably had a

242
00:08:15,199 --> 00:08:16,639
spam house for being the spam photo

243
00:08:16,639 --> 00:08:18,319
company uh they have a passive dns

244
00:08:18,319 --> 00:08:21,440
service um i believe security trails and

245
00:08:21,440 --> 00:08:23,120
spam houses are

246
00:08:23,120 --> 00:08:25,280
trial accounts i've not really explored

247
00:08:25,280 --> 00:08:26,400
them but

248
00:08:26,400 --> 00:08:28,639
um i'm sure if you go sign up and kick

249
00:08:28,639 --> 00:08:29,759
the tires on and you can see what you

250
00:08:29,759 --> 00:08:32,958
think the risk iq community edition is

251
00:08:32,958 --> 00:08:35,440
effectively free it just has restricted

252
00:08:35,440 --> 00:08:37,760
services uh and you have to pay extra to

253
00:08:37,760 --> 00:08:39,200
use the other features that you might be

254
00:08:39,200 --> 00:08:41,839
interested in

255
00:08:42,000 --> 00:08:44,640
you can of course also use archive.org

256
00:08:44,640 --> 00:08:46,640
wayback machine to browse historical

257
00:08:46,640 --> 00:08:48,399
snapshots of websites

258
00:08:48,399 --> 00:08:50,080
so you could go back and look at a

259
00:08:50,080 --> 00:08:51,680
particular website at a particular point

260
00:08:51,680 --> 00:08:53,360
in time if a snapshot was taken to see

261
00:08:53,360 --> 00:08:54,800
what it looked like back then so it's a

262
00:08:54,800 --> 00:08:58,240
nice complement to passive dns

263
00:08:58,240 --> 00:09:00,399
in the upcoming demo we'll use the

264
00:09:00,399 --> 00:09:02,399
community edition of risk iq if you want

265
00:09:02,399 --> 00:09:04,640
to sign up for an account to follow

266
00:09:04,640 --> 00:09:06,399
along with um use the link in the first

267
00:09:06,399 --> 00:09:08,800
bullet point up here it's community.risk

268
00:09:08,800 --> 00:09:11,600
iq.com and then you can

269
00:09:11,600 --> 00:09:13,040
start to kick the tires and have a look

270
00:09:13,040 --> 00:09:17,040
while we we talk about some examples

271
00:09:17,360 --> 00:09:19,279
so gathering information on competitors

272
00:09:19,279 --> 00:09:20,480
let's look at some of the privacy

273
00:09:20,480 --> 00:09:21,839
concerns that you should be worried

274
00:09:21,839 --> 00:09:24,080
about

275
00:09:25,040 --> 00:09:27,360
what does sub domains tell us

276
00:09:27,360 --> 00:09:29,040
subdomains can actually tell us a lot of

277
00:09:29,040 --> 00:09:30,880
information about what a competitor is

278
00:09:30,880 --> 00:09:31,839
up to

279
00:09:31,839 --> 00:09:33,279
and

280
00:09:33,279 --> 00:09:36,080
what we're running as infrastructure or

281
00:09:36,080 --> 00:09:37,440
as products

282
00:09:37,440 --> 00:09:38,240
so

283
00:09:38,240 --> 00:09:40,160
accuracy look at dns records and

284
00:09:40,160 --> 00:09:42,000
something like risk iq

285
00:09:42,000 --> 00:09:43,600
can reveal information such as what

286
00:09:43,600 --> 00:09:45,040
monitoring tools is in place if

287
00:09:45,040 --> 00:09:47,760
somebody's using grafana or or

288
00:09:47,760 --> 00:09:50,320
prometheus

289
00:09:50,320 --> 00:09:53,200
products such as drupal or wordpress

290
00:09:53,200 --> 00:09:56,640
on-prem hosted solutions for example

291
00:09:56,640 --> 00:09:58,240
source control someone might be using

292
00:09:58,240 --> 00:10:00,480
gitlab on-prem and you can gather that

293
00:10:00,480 --> 00:10:02,160
information from looking at

294
00:10:02,160 --> 00:10:05,440
passive dns records

295
00:10:05,440 --> 00:10:07,839
client demo sites hosted on sub domains

296
00:10:07,839 --> 00:10:10,320
so for example they may have built a

297
00:10:10,320 --> 00:10:12,480
demo for a particular customer that

298
00:10:12,480 --> 00:10:14,480
they're trying to sell a new feature to

299
00:10:14,480 --> 00:10:16,160
and that information is effectively

300
00:10:16,160 --> 00:10:19,120
available from the sub domains listed in

301
00:10:19,120 --> 00:10:20,880
in risk iq

302
00:10:20,880 --> 00:10:23,120
new products being tested on sub domains

303
00:10:23,120 --> 00:10:24,320
so this could be

304
00:10:24,320 --> 00:10:26,399
new products that they are selling

305
00:10:26,399 --> 00:10:28,480
themselves or perhaps new products that

306
00:10:28,480 --> 00:10:29,920
they have purchased from someone else

307
00:10:29,920 --> 00:10:32,320
and are running so that that kind of

308
00:10:32,320 --> 00:10:34,640
information can be quite useful from a

309
00:10:34,640 --> 00:10:36,959
business perspective it might be you can

310
00:10:36,959 --> 00:10:38,320
tell if they're planning on launching

311
00:10:38,320 --> 00:10:39,839
something new

312
00:10:39,839 --> 00:10:41,600
if you're a malicious actor seeing that

313
00:10:41,600 --> 00:10:43,200
someone's running a particular service

314
00:10:43,200 --> 00:10:44,560
or product

315
00:10:44,560 --> 00:10:46,480
on a subdomain such as those monitoring

316
00:10:46,480 --> 00:10:48,320
tools i mentioned before cms's can

317
00:10:48,320 --> 00:10:50,320
obviously uh be useful if you're

318
00:10:50,320 --> 00:10:52,399
planning on doing something malicious

319
00:10:52,399 --> 00:10:53,760
and

320
00:10:53,760 --> 00:10:55,760
email services mail servers often these

321
00:10:55,760 --> 00:10:58,959
are listed in there so from a from a

322
00:10:58,959 --> 00:11:00,480
information security perspective these

323
00:11:00,480 --> 00:11:02,000
are types of areas you want to consider

324
00:11:02,000 --> 00:11:04,160
protecting right because if a malicious

325
00:11:04,160 --> 00:11:06,240
act can go in and see these then they

326
00:11:06,240 --> 00:11:08,800
can target them um so apart from all the

327
00:11:08,800 --> 00:11:10,399
usual things of patching and so on and

328
00:11:10,399 --> 00:11:13,040
so forth uh making sure that you've got

329
00:11:13,040 --> 00:11:15,120
suitable security tooling in place you

330
00:11:15,120 --> 00:11:16,480
might want to use some of the techniques

331
00:11:16,480 --> 00:11:17,839
mentioned later in here to just

332
00:11:17,839 --> 00:11:19,680
obfuscate the fact that that you're

333
00:11:19,680 --> 00:11:22,880
running that particular tool

334
00:11:24,240 --> 00:11:27,120
so when it comes to competitors um you

335
00:11:27,120 --> 00:11:28,560
know we're kind of interested in what

336
00:11:28,560 --> 00:11:30,480
customers they have

337
00:11:30,480 --> 00:11:32,480
how can you find out which sale sales

338
00:11:32,480 --> 00:11:35,360
deals for example a competitive one

339
00:11:35,360 --> 00:11:36,959
so we can actually use the information

340
00:11:36,959 --> 00:11:38,560
from the sub domains

341
00:11:38,560 --> 00:11:40,399
to discover what c sales deals

342
00:11:40,399 --> 00:11:42,320
competitor in one

343
00:11:42,320 --> 00:11:43,760
and which companies you know they might

344
00:11:43,760 --> 00:11:46,320
be working with or might be pitching too

345
00:11:46,320 --> 00:11:47,600
so for example we're going to take this

346
00:11:47,600 --> 00:11:50,000
first url here

347
00:11:50,000 --> 00:11:50,880
we can see

348
00:11:50,880 --> 00:11:53,600
customerone.clients.example.com

349
00:11:53,600 --> 00:11:55,920
this actually tells us that this

350
00:11:55,920 --> 00:11:58,880
particular target example.com

351
00:11:58,880 --> 00:12:02,560
likes to list the people that they have

352
00:12:02,560 --> 00:12:05,120
sold products to under this dot

353
00:12:05,120 --> 00:12:06,959
clients.example.com

354
00:12:06,959 --> 00:12:08,079
subdomain

355
00:12:08,079 --> 00:12:10,000
so for example they might have customer

356
00:12:10,000 --> 00:12:11,839
one customer two customer three customer

357
00:12:11,839 --> 00:12:13,519
four customer five and so on so you can

358
00:12:13,519 --> 00:12:15,360
gather fairly quickly their client list

359
00:12:15,360 --> 00:12:17,200
by looking at the sub domains if they

360
00:12:17,200 --> 00:12:20,079
use this format so that's a an immediate

361
00:12:20,079 --> 00:12:21,360
piece of business information that's

362
00:12:21,360 --> 00:12:25,839
being leaked out to the public internet

363
00:12:26,320 --> 00:12:28,800
we can also see perhaps what the sales

364
00:12:28,800 --> 00:12:30,560
team are planning on doing or who

365
00:12:30,560 --> 00:12:33,120
they've been running demos for

366
00:12:33,120 --> 00:12:34,720
so in this example we have

367
00:12:34,720 --> 00:12:37,519
potentialcustomer.sales.example.com

368
00:12:37,519 --> 00:12:40,639
once again if example.com lists all of

369
00:12:40,639 --> 00:12:42,760
their demos under the

370
00:12:42,760 --> 00:12:44,959
dotsales.example.com subdomain then we

371
00:12:44,959 --> 00:12:47,040
can very quickly enumerate a list of the

372
00:12:47,040 --> 00:12:48,800
people that they're targeting

373
00:12:48,800 --> 00:12:50,560
and we can use that information perhaps

374
00:12:50,560 --> 00:12:53,279
uh you know try and get ourselves in the

375
00:12:53,279 --> 00:12:56,160
door there or beat them on our on an rfp

376
00:12:56,160 --> 00:12:58,560
or similar so these are the types of of

377
00:12:58,560 --> 00:13:00,320
just simple business information that

378
00:13:00,320 --> 00:13:02,160
suddenly becomes readily available which

379
00:13:02,160 --> 00:13:03,920
you start to poke around in these

380
00:13:03,920 --> 00:13:05,920
passive dns records on a tool like risk

381
00:13:05,920 --> 00:13:08,160
iq

382
00:13:08,160 --> 00:13:10,000
so these are things to keep in mind and

383
00:13:10,000 --> 00:13:11,120
we're going to probably look at some

384
00:13:11,120 --> 00:13:12,480
examples well not probably we're

385
00:13:12,480 --> 00:13:13,279
definitely going to look at some

386
00:13:13,279 --> 00:13:16,600
examples in a moment of uh where

387
00:13:16,600 --> 00:13:19,120
customer1.client.example.com existed

388
00:13:19,120 --> 00:13:20,480
and then we'll talk about some the

389
00:13:20,480 --> 00:13:23,519
mitigation techniques

390
00:13:23,760 --> 00:13:26,079
compared to secret products so apart

391
00:13:26,079 --> 00:13:26,959
from

392
00:13:26,959 --> 00:13:28,480
who they're working with and who they're

393
00:13:28,480 --> 00:13:31,360
targeting to sell products to

394
00:13:31,360 --> 00:13:33,360
perhaps we can gather information about

395
00:13:33,360 --> 00:13:35,360
what products that they are planning to

396
00:13:35,360 --> 00:13:37,360
release in the near future and perhaps

397
00:13:37,360 --> 00:13:39,360
have leaked that information by accident

398
00:13:39,360 --> 00:13:42,560
onto the internet

399
00:13:42,560 --> 00:13:45,040
so for example let's say we're looking

400
00:13:45,040 --> 00:13:47,839
at risk iq at

401
00:13:47,839 --> 00:13:51,199
and we find that this particular target

402
00:13:51,199 --> 00:13:52,959
has decided that their staging and

403
00:13:52,959 --> 00:13:54,399
development servers are going to be

404
00:13:54,399 --> 00:13:56,800
listed along with in front of it the

405
00:13:56,800 --> 00:13:59,760
particular product that is running

406
00:13:59,760 --> 00:14:01,839
on those that's

407
00:14:01,839 --> 00:14:03,839
server or set of infrastructure so in

408
00:14:03,839 --> 00:14:05,360
this particular example we've got new

409
00:14:05,360 --> 00:14:09,040
iot device.development.example.com

410
00:14:09,040 --> 00:14:10,959
we could imagine you might have new i o

411
00:14:10,959 --> 00:14:12,199
t

412
00:14:12,199 --> 00:14:14,839
device.staging.example.com or new iot

413
00:14:14,839 --> 00:14:16,480
device.uat.example.

414
00:14:16,480 --> 00:14:18,079
but basically what i'm getting at here

415
00:14:18,079 --> 00:14:20,720
is the fact that we can then go in and

416
00:14:20,720 --> 00:14:23,040
query and see that this new iot device

417
00:14:23,040 --> 00:14:25,120
which could be a product name um it

418
00:14:25,120 --> 00:14:26,480
could be you know for example if you're

419
00:14:26,480 --> 00:14:28,800
building a new car or developing a new

420
00:14:28,800 --> 00:14:31,199
fan or developing a new monitor or a

421
00:14:31,199 --> 00:14:32,560
laptop or something like that that

422
00:14:32,560 --> 00:14:35,720
product name dot staging.example.com or

423
00:14:35,720 --> 00:14:37,120
development.example.com is really

424
00:14:37,120 --> 00:14:39,440
advertising that this thing exists now

425
00:14:39,440 --> 00:14:41,920
if you know your competitors see this

426
00:14:41,920 --> 00:14:43,360
and have been gathering other open

427
00:14:43,360 --> 00:14:44,959
source information or perhaps not so

428
00:14:44,959 --> 00:14:46,720
open source information and they can put

429
00:14:46,720 --> 00:14:48,079
together a picture of the upcoming

430
00:14:48,079 --> 00:14:49,360
product that can maybe even get the

431
00:14:49,360 --> 00:14:52,240
brand name uh in advance um so that's

432
00:14:52,240 --> 00:14:53,760
just the kind of thing you might want to

433
00:14:53,760 --> 00:14:54,880
think about

434
00:14:54,880 --> 00:14:56,639
and keep under wraps because you don't

435
00:14:56,639 --> 00:14:58,160
want to accidentally leak that

436
00:14:58,160 --> 00:14:59,360
information before you're ready to

437
00:14:59,360 --> 00:15:00,880
actually pull the plug on going live and

438
00:15:00,880 --> 00:15:02,959
then share the product name and branding

439
00:15:02,959 --> 00:15:06,880
with um with the rest of the world

440
00:15:06,880 --> 00:15:08,399
if you consistently use the practice of

441
00:15:08,399 --> 00:15:11,120
using subdomains for new products

442
00:15:11,120 --> 00:15:13,600
then customers gathering bri can simply

443
00:15:13,600 --> 00:15:16,720
monitor pd and s records and over time

444
00:15:16,720 --> 00:15:18,480
we'll just start to get a picture of

445
00:15:18,480 --> 00:15:19,760
every time you're releasing a new

446
00:15:19,760 --> 00:15:22,000
product you know it appears under this

447
00:15:22,000 --> 00:15:24,800
particular subdomain perhaps my new

448
00:15:24,800 --> 00:15:27,760
product staging

449
00:15:27,760 --> 00:15:30,160
it could use it to their advantage

450
00:15:30,160 --> 00:15:32,079
it's also very easy for those gathering

451
00:15:32,079 --> 00:15:33,440
business intelligence to open a free

452
00:15:33,440 --> 00:15:35,600
account on risk iq or similar and gather

453
00:15:35,600 --> 00:15:36,959
this information without your knowledge

454
00:15:36,959 --> 00:15:38,800
so as some of you may have done well

455
00:15:38,800 --> 00:15:41,199
we've been talking about this you can go

456
00:15:41,199 --> 00:15:43,360
create a gmail account you can then

457
00:15:43,360 --> 00:15:45,839
create a risk iq account or a security

458
00:15:45,839 --> 00:15:47,199
trials account or one of the other

459
00:15:47,199 --> 00:15:48,240
services

460
00:15:48,240 --> 00:15:50,240
and then use that account to go poking

461
00:15:50,240 --> 00:15:52,160
around essentially anonymously a bunch

462
00:15:52,160 --> 00:15:53,839
of domains and seeing what's running

463
00:15:53,839 --> 00:15:55,839
under them uh subdomain list and what

464
00:15:55,839 --> 00:15:58,880
was there historically

465
00:15:59,040 --> 00:16:01,519
so that in mind

466
00:16:01,519 --> 00:16:02,720
you know you should probably think about

467
00:16:02,720 --> 00:16:04,800
some mitigation techniques but before we

468
00:16:04,800 --> 00:16:06,000
get to those

469
00:16:06,000 --> 00:16:06,959
i mentioned we're going to look at a

470
00:16:06,959 --> 00:16:08,399
real world example so we're actually

471
00:16:08,399 --> 00:16:09,519
going to look at a real world example

472
00:16:09,519 --> 00:16:10,800
that was a bit of a scandal because i

473
00:16:10,800 --> 00:16:12,000
think that just makes it a bit more

474
00:16:12,000 --> 00:16:14,639
interesting um

475
00:16:14,639 --> 00:16:16,320
it's a risk iq let's look at this

476
00:16:16,320 --> 00:16:17,839
example which is to

477
00:16:17,839 --> 00:16:19,519
explore the tool and the one we're going

478
00:16:19,519 --> 00:16:21,360
to use is cambridge analytica so some of

479
00:16:21,360 --> 00:16:22,800
you will be familiar from a few years

480
00:16:22,800 --> 00:16:25,199
back the cambridge analytica scandal and

481
00:16:25,199 --> 00:16:27,120
we're going to go poke around a risk iq

482
00:16:27,120 --> 00:16:29,360
and look at cambridge analytica.org and

483
00:16:29,360 --> 00:16:30,880
see what we can find so i'm just going

484
00:16:30,880 --> 00:16:33,759
to switch over to

485
00:16:33,759 --> 00:16:34,839
the web

486
00:16:34,839 --> 00:16:36,720
browser

487
00:16:36,720 --> 00:16:38,720
and here we go so i'm actually logged

488
00:16:38,720 --> 00:16:40,959
into risk iq

489
00:16:40,959 --> 00:16:42,560
and for those of you who are following

490
00:16:42,560 --> 00:16:44,320
along and create an account you can go

491
00:16:44,320 --> 00:16:46,800
in and then you can run a query against

492
00:16:46,800 --> 00:16:50,199
cambridge analytica.org

493
00:16:50,320 --> 00:16:51,279
and once you're logged in you're going

494
00:16:51,279 --> 00:16:53,279
to see a bunch of tabs under here

495
00:16:53,279 --> 00:16:54,880
and you've run run the query um

496
00:16:54,880 --> 00:16:56,959
resolutions who is certificates sub

497
00:16:56,959 --> 00:16:58,800
domains trackers components and so on

498
00:16:58,800 --> 00:17:00,320
and so forth i won't read through them

499
00:17:00,320 --> 00:17:01,759
all but you can have an explore

500
00:17:01,759 --> 00:17:03,360
depending on whether you have a free

501
00:17:03,360 --> 00:17:05,439
account or a paid account then you're

502
00:17:05,439 --> 00:17:06,799
going to get access to different

503
00:17:06,799 --> 00:17:09,119
services i believe sometimes some of the

504
00:17:09,119 --> 00:17:10,959
services they have available for a

505
00:17:10,959 --> 00:17:12,480
certain amount of time for free just to

506
00:17:12,480 --> 00:17:13,679
give you a chance to take a look at them

507
00:17:13,679 --> 00:17:15,359
and see if you're interested before they

508
00:17:15,359 --> 00:17:18,000
uh encourage you to pay for the uh

509
00:17:18,000 --> 00:17:20,160
the full version

510
00:17:20,160 --> 00:17:21,760
what we're interested in is the sub

511
00:17:21,760 --> 00:17:23,039
domains

512
00:17:23,039 --> 00:17:24,799
so if we take a look through these we

513
00:17:24,799 --> 00:17:26,160
can see some pretty interesting

514
00:17:26,160 --> 00:17:29,280
information right off the bat

515
00:17:29,440 --> 00:17:32,480
we can see that as i mentioned some

516
00:17:32,480 --> 00:17:34,000
companies like to use this client

517
00:17:34,000 --> 00:17:35,960
subdomain so we see

518
00:17:35,960 --> 00:17:37,200
clients.cambridgeanalytica.org

519
00:17:37,200 --> 00:17:39,440
immediately that says to me perhaps

520
00:17:39,440 --> 00:17:40,960
we're going to find something underneath

521
00:17:40,960 --> 00:17:43,720
here such as

522
00:17:43,720 --> 00:17:44,960
client1.clients.comgeneralistic.org we

523
00:17:44,960 --> 00:17:46,640
could start to enumerate who they were

524
00:17:46,640 --> 00:17:48,799
working with or perhaps who they were

525
00:17:48,799 --> 00:17:52,320
attempting to sell services to

526
00:17:52,320 --> 00:17:54,240
other technical information about their

527
00:17:54,240 --> 00:17:56,160
infrastructure is also available

528
00:17:56,160 --> 00:17:58,400
it appears that they had cpanel

529
00:17:58,400 --> 00:18:00,080
i think when we look down here we can

530
00:18:00,080 --> 00:18:03,039
see uh perhaps kubernetes was running um

531
00:18:03,039 --> 00:18:04,960
i mentioned before about mail servers we

532
00:18:04,960 --> 00:18:08,160
can see an nginx ingress point uh to uh

533
00:18:08,160 --> 00:18:10,799
kubernetes

534
00:18:10,799 --> 00:18:14,080
and here's a really interesting one here

535
00:18:14,080 --> 00:18:15,200
we've got clients.cambridge

536
00:18:15,200 --> 00:18:18,080
analytica.org and we've got nyu langon

537
00:18:18,080 --> 00:18:20,080
so this looks like it was potentially a

538
00:18:20,080 --> 00:18:21,760
client or somebody that cambridge

539
00:18:21,760 --> 00:18:23,760
analytica was attempting to sell

540
00:18:23,760 --> 00:18:24,960
services to

541
00:18:24,960 --> 00:18:26,400
and at the moment we're going to go back

542
00:18:26,400 --> 00:18:27,840
and look at some

543
00:18:27,840 --> 00:18:29,679
research

544
00:18:29,679 --> 00:18:31,840
just to you know tie these two things

545
00:18:31,840 --> 00:18:34,000
together and see if hey was this right

546
00:18:34,000 --> 00:18:35,520
is this actually a client of cambridge

547
00:18:35,520 --> 00:18:36,960
analytics or someone they attempted to

548
00:18:36,960 --> 00:18:38,640
sell something to or was this just a

549
00:18:38,640 --> 00:18:41,640
coincidence

550
00:18:42,640 --> 00:18:45,280
so let's just take a look and see

551
00:18:45,280 --> 00:18:46,880
if perhaps anything's still running at

552
00:18:46,880 --> 00:18:49,120
nyu langone clients.cambridge analog to

553
00:18:49,120 --> 00:18:50,320
get up

554
00:18:50,320 --> 00:18:52,799
oh okay

555
00:18:53,039 --> 00:18:55,280
and no there's nothing there but

556
00:18:55,280 --> 00:18:57,120
cambridge analytica.org is still up

557
00:18:57,120 --> 00:18:59,200
which i was very surprised about

558
00:18:59,200 --> 00:19:00,799
um

559
00:19:00,799 --> 00:19:03,039
looking at this though i'm not entirely

560
00:19:03,039 --> 00:19:05,760
sure who's managing the site it does

561
00:19:05,760 --> 00:19:08,240
look a little suspect um

562
00:19:08,240 --> 00:19:10,080
i don't think this graphic here was

563
00:19:10,080 --> 00:19:11,679
necessarily something that the cambridge

564
00:19:11,679 --> 00:19:13,200
analytica team would have used as an

565
00:19:13,200 --> 00:19:14,240
advert

566
00:19:14,240 --> 00:19:16,799
uh and then the more we look down you

567
00:19:16,799 --> 00:19:18,880
can see that those broken image links um

568
00:19:18,880 --> 00:19:20,559
i don't think some of these hyperlinks

569
00:19:20,559 --> 00:19:22,400
work and i'd be cautious before clicking

570
00:19:22,400 --> 00:19:24,480
on too much on here so i'm not sure if

571
00:19:24,480 --> 00:19:25,919
someone's come along and purchased the

572
00:19:25,919 --> 00:19:27,760
domain name after they abandoned it and

573
00:19:27,760 --> 00:19:28,880
is now

574
00:19:28,880 --> 00:19:30,880
running something else behind it but

575
00:19:30,880 --> 00:19:32,320
it's quite interesting to see that this

576
00:19:32,320 --> 00:19:34,880
is still up

577
00:19:34,880 --> 00:19:36,840
so let's take a look

578
00:19:36,840 --> 00:19:40,720
at the slides again

579
00:19:48,960 --> 00:19:50,960
so i mentioned cambridge analytica and

580
00:19:50,960 --> 00:19:53,200
we saw that sub-domain now

581
00:19:53,200 --> 00:19:55,840
security researchers were able to probe

582
00:19:55,840 --> 00:19:58,000
active and passive dns records back when

583
00:19:58,000 --> 00:20:00,400
cambridge analytica was in business and

584
00:20:00,400 --> 00:20:02,320
i don't think they are anymore and

585
00:20:02,320 --> 00:20:03,919
gather quite a bit of information around

586
00:20:03,919 --> 00:20:06,640
them um including these customers and

587
00:20:06,640 --> 00:20:08,640
sales targets

588
00:20:08,640 --> 00:20:11,360
so we thought nyu langone.clients.com

589
00:20:11,360 --> 00:20:12,799
analytica.org

590
00:20:12,799 --> 00:20:14,880
so in fact we do a

591
00:20:14,880 --> 00:20:16,240
a little bit of research we can see an

592
00:20:16,240 --> 00:20:18,960
nbc news article from back in 2018 and

593
00:20:18,960 --> 00:20:20,240
within this article they actually

594
00:20:20,240 --> 00:20:21,760
discuss

595
00:20:21,760 --> 00:20:25,120
how there was some consternation between

596
00:20:25,120 --> 00:20:27,440
nyu langone and

597
00:20:27,440 --> 00:20:29,200
cambridge analytica

598
00:20:29,200 --> 00:20:31,360
whether they were clients technically or

599
00:20:31,360 --> 00:20:33,520
whether they were being pitched services

600
00:20:33,520 --> 00:20:36,080
to there was certainly some um

601
00:20:36,080 --> 00:20:38,480
i guess

602
00:20:40,480 --> 00:20:42,960
problems there and uh it blew up in the

603
00:20:42,960 --> 00:20:44,880
press um so

604
00:20:44,880 --> 00:20:46,080
i think

605
00:20:46,080 --> 00:20:49,440
evidently this is an example where your

606
00:20:49,440 --> 00:20:52,080
your product name or your company name

607
00:20:52,080 --> 00:20:54,080
being associated with another company's

608
00:20:54,080 --> 00:20:55,360
uh perhaps something you wanted to keep

609
00:20:55,360 --> 00:20:57,520
under wraps is it has ended up actually

610
00:20:57,520 --> 00:20:59,200
having some negative press

611
00:20:59,200 --> 00:21:01,840
so that's a a separate point which i'm

612
00:21:01,840 --> 00:21:03,200
going to touch on is kind of closely

613
00:21:03,200 --> 00:21:05,760
related to this whole um don't use your

614
00:21:05,760 --> 00:21:08,320
client name as a subdomain but there's

615
00:21:08,320 --> 00:21:10,559
also that you know the other problem is

616
00:21:10,559 --> 00:21:11,840
do you have control over what other

617
00:21:11,840 --> 00:21:12,880
companies are doing when you're

618
00:21:12,880 --> 00:21:15,039
purchasing services off them and if

619
00:21:15,039 --> 00:21:16,640
there's a scandal associated with them

620
00:21:16,640 --> 00:21:18,799
how do you avoid uh not getting caught

621
00:21:18,799 --> 00:21:20,400
up in it and ending up with nbc

622
00:21:20,400 --> 00:21:22,960
reporters knocking on your door

623
00:21:22,960 --> 00:21:24,480
so that was just a quick real world

624
00:21:24,480 --> 00:21:26,000
example uh and you can do some more

625
00:21:26,000 --> 00:21:28,159
digging um unfortunately we don't have

626
00:21:28,159 --> 00:21:29,600
enough time to do that but i think it's

627
00:21:29,600 --> 00:21:33,120
it's quite a fun exercise

628
00:21:34,320 --> 00:21:36,400
submit irrigation techniques you know

629
00:21:36,400 --> 00:21:38,080
what can we do to plug the leak how can

630
00:21:38,080 --> 00:21:40,320
we avoid being a victim

631
00:21:40,320 --> 00:21:42,400
of someone stealing information about

632
00:21:42,400 --> 00:21:44,240
our upcoming products how can we protect

633
00:21:44,240 --> 00:21:45,840
our customers by not accidentally

634
00:21:45,840 --> 00:21:47,919
leaking information about their upcoming

635
00:21:47,919 --> 00:21:49,520
products when we're working with them

636
00:21:49,520 --> 00:21:50,640
how can we

637
00:21:50,640 --> 00:21:52,559
not leak our sales list and so on and so

638
00:21:52,559 --> 00:21:54,879
forth

639
00:21:55,280 --> 00:21:58,400
so of the skating sub domains so i like

640
00:21:58,400 --> 00:22:00,159
this little quote here at top my

641
00:22:00,159 --> 00:22:02,960
co-worker richard had had used this um

642
00:22:02,960 --> 00:22:04,799
somewhere and i borrowed it and had

643
00:22:04,799 --> 00:22:06,880
rewritten it slightly but he said

644
00:22:06,880 --> 00:22:08,720
remember resolutions from requests end

645
00:22:08,720 --> 00:22:10,799
up in public dns even if the hosts are

646
00:22:10,799 --> 00:22:13,919
referred to a private or firewall

647
00:22:13,919 --> 00:22:15,600
so a number of techniques we can use to

648
00:22:15,600 --> 00:22:18,559
ensure we don't leak information

649
00:22:18,559 --> 00:22:19,440
first

650
00:22:19,440 --> 00:22:21,200
so obvious one is don't use

651
00:22:21,200 --> 00:22:23,679
client.salesexample.com

652
00:22:23,679 --> 00:22:26,679
or clients uh

653
00:22:26,679 --> 00:22:28,799
customer.clientexample.com naming format

654
00:22:28,799 --> 00:22:30,080
so if you saw with the cambridge

655
00:22:30,080 --> 00:22:32,960
analytical website you know

656
00:22:32,960 --> 00:22:35,440
if you put your customers out there uh

657
00:22:35,440 --> 00:22:36,320
as a

658
00:22:36,320 --> 00:22:37,280
you know

659
00:22:37,280 --> 00:22:40,400
nyu langone.clients.com

660
00:22:40,400 --> 00:22:42,000
you're kind of exposing them to the

661
00:22:42,000 --> 00:22:44,240
press if something goes wrong i i'm not

662
00:22:44,240 --> 00:22:46,480
sure cambridge analytica realized that

663
00:22:46,480 --> 00:22:48,559
at the time um

664
00:22:48,559 --> 00:22:50,720
we'll let the

665
00:22:50,720 --> 00:22:52,720
journalists do their jobs there but i

666
00:22:52,720 --> 00:22:54,000
think you know obviously there was quite

667
00:22:54,000 --> 00:22:56,080
a bit of embarrassment there

668
00:22:56,080 --> 00:22:58,840
um don't use

669
00:22:58,840 --> 00:23:00,480
clients.sales.example.com because really

670
00:23:00,480 --> 00:23:02,000
you're giving away who you're planning

671
00:23:02,000 --> 00:23:04,159
on trying to sell services to so these

672
00:23:04,159 --> 00:23:06,640
these two methods should be avoided they

673
00:23:06,640 --> 00:23:07,919
seem so obvious when you're setting

674
00:23:07,919 --> 00:23:09,760
things up oh we'll just group all of our

675
00:23:09,760 --> 00:23:12,159
customers under client.example.com but

676
00:23:12,159 --> 00:23:13,840
of course you've accidentally then just

677
00:23:13,840 --> 00:23:15,679
given away a load of really useful

678
00:23:15,679 --> 00:23:17,840
information to competitors

679
00:23:17,840 --> 00:23:19,520
and obviously you can sit sensitive

680
00:23:19,520 --> 00:23:20,720
information such as your proof of

681
00:23:20,720 --> 00:23:22,080
concept websites and products and

682
00:23:22,080 --> 00:23:24,000
services behind a vpn

683
00:23:24,000 --> 00:23:26,400
and use internal meaningless domain

684
00:23:26,400 --> 00:23:27,760
names for example

685
00:23:27,760 --> 00:23:30,640
cabbage.example.internal

686
00:23:30,640 --> 00:23:32,159
you know use private zones and avoid

687
00:23:32,159 --> 00:23:33,760
public dns if you keep everything locked

688
00:23:33,760 --> 00:23:35,600
down internally

689
00:23:35,600 --> 00:23:37,919
and give it obscure names that only

690
00:23:37,919 --> 00:23:39,280
people within the company know about

691
00:23:39,280 --> 00:23:41,760
then that can help immensely

692
00:23:41,760 --> 00:23:43,200
if you do need it to be publicly

693
00:23:43,200 --> 00:23:47,039
accessible you can obfuscate subdomains

694
00:23:47,039 --> 00:23:48,720
so in this particular example we've got

695
00:23:48,720 --> 00:23:51,600
chicken chicken.example.com

696
00:23:51,600 --> 00:23:53,919
so we could use a a mapping scheme on

697
00:23:53,919 --> 00:23:55,679
the back end that only people in the

698
00:23:55,679 --> 00:23:57,279
company know and of course the the

699
00:23:57,279 --> 00:23:58,960
customer itself if they have to go visit

700
00:23:58,960 --> 00:24:00,799
say a uat site

701
00:24:00,799 --> 00:24:03,679
where egg is the equivalent of client

702
00:24:03,679 --> 00:24:05,760
and checking is the equivalent of the

703
00:24:05,760 --> 00:24:08,240
client's name and you know you could use

704
00:24:08,240 --> 00:24:10,240
any number of file to represent

705
00:24:10,240 --> 00:24:12,960
whichever customer uh you need to but in

706
00:24:12,960 --> 00:24:13,960
this case

707
00:24:13,960 --> 00:24:16,480
client.example.com could be you know

708
00:24:16,480 --> 00:24:19,360
customer customer.clients.mywebsite.com

709
00:24:19,360 --> 00:24:21,360
um and really only your team knows about

710
00:24:21,360 --> 00:24:22,960
that

711
00:24:22,960 --> 00:24:25,039
another thing you can use is an anagram

712
00:24:25,039 --> 00:24:27,360
generator to create subdomains so thanks

713
00:24:27,360 --> 00:24:28,960
to my colleague richard bullington

714
00:24:28,960 --> 00:24:31,600
maguire for this one uh who's quote i

715
00:24:31,600 --> 00:24:33,679
stole at the top there

716
00:24:33,679 --> 00:24:34,440
um

717
00:24:34,440 --> 00:24:37,200
wordsmith.org anagram it's a great tool

718
00:24:37,200 --> 00:24:39,360
you can basically put in a word and use

719
00:24:39,360 --> 00:24:41,679
that as a seed so come up with a initial

720
00:24:41,679 --> 00:24:42,960
phrase

721
00:24:42,960 --> 00:24:45,440
use that as the seed and then from there

722
00:24:45,440 --> 00:24:48,240
create a set of just random dem uh

723
00:24:48,240 --> 00:24:50,880
subdomains and then sub sub domains

724
00:24:50,880 --> 00:24:53,120
which are then used to host

725
00:24:53,120 --> 00:24:55,520
infrastructure on that is not production

726
00:24:55,520 --> 00:24:58,080
infrastructure uh but perhaps has to be

727
00:24:58,080 --> 00:25:00,640
available um you know publicly for some

728
00:25:00,640 --> 00:25:02,080
reason or other even if it's locked down

729
00:25:02,080 --> 00:25:03,679
behind passwords and

730
00:25:03,679 --> 00:25:05,360
and login mechanisms

731
00:25:05,360 --> 00:25:07,760
so we've done this in the past ourselves

732
00:25:07,760 --> 00:25:09,440
uh with working with customers when

733
00:25:09,440 --> 00:25:10,960
they've had a product and there has to

734
00:25:10,960 --> 00:25:13,840
be a staging or a ut uat website we'll

735
00:25:13,840 --> 00:25:15,279
use a tool like this to come up with a

736
00:25:15,279 --> 00:25:16,159
set of

737
00:25:16,159 --> 00:25:19,120
random names that are really meaningless

738
00:25:19,120 --> 00:25:21,120
to anyone that's poking around

739
00:25:21,120 --> 00:25:22,720
but on the back end there's a mapping

740
00:25:22,720 --> 00:25:25,240
like i mentioned before the

741
00:25:25,240 --> 00:25:26,799
chicken.example.com

742
00:25:26,799 --> 00:25:29,840
and that mapping uh is very obviously

743
00:25:29,840 --> 00:25:31,600
very useful to the engineering team and

744
00:25:31,600 --> 00:25:32,640
to the

745
00:25:32,640 --> 00:25:34,960
you know the business unit that's uh

746
00:25:34,960 --> 00:25:36,480
working with this particular product

747
00:25:36,480 --> 00:25:38,720
before it becomes live but to anyone

748
00:25:38,720 --> 00:25:40,880
else poking around as uh yeah you're

749
00:25:40,880 --> 00:25:42,559
just not gonna know what it is and you

750
00:25:42,559 --> 00:25:44,159
can also use that for infrastructure as

751
00:25:44,159 --> 00:25:46,559
well so we saw cpanel and we saw

752
00:25:46,559 --> 00:25:48,799
kubernetes and we saw mail and some

753
00:25:48,799 --> 00:25:50,799
other tools it may make sense in order

754
00:25:50,799 --> 00:25:53,120
just to obfuscate and just make general

755
00:25:53,120 --> 00:25:55,200
like reconnaissance of your site more

756
00:25:55,200 --> 00:25:57,039
difficult

757
00:25:57,039 --> 00:26:00,080
using some random names and subdomains

758
00:26:00,080 --> 00:26:01,840
and and then really what that means is

759
00:26:01,840 --> 00:26:03,919
anyone poking around in it they may take

760
00:26:03,919 --> 00:26:06,480
that link and go explore it but if then

761
00:26:06,480 --> 00:26:07,440
they're

762
00:26:07,440 --> 00:26:09,679
blocked by whatever mechanism you're

763
00:26:09,679 --> 00:26:11,120
using for authentication and

764
00:26:11,120 --> 00:26:13,200
authorization it's going to reduce the

765
00:26:13,200 --> 00:26:14,320
amount of information they're getting

766
00:26:14,320 --> 00:26:15,440
especially the login screens

767
00:26:15,440 --> 00:26:16,799
particularly non-descript and doesn't

768
00:26:16,799 --> 00:26:18,799
give away what the actual uh services

769
00:26:18,799 --> 00:26:20,000
that's running

770
00:26:20,000 --> 00:26:21,919
might be overkill for some of you but

771
00:26:21,919 --> 00:26:23,760
it's something worth it considering

772
00:26:23,760 --> 00:26:26,080
anyway

773
00:26:26,080 --> 00:26:28,240
then finally you need to train your team

774
00:26:28,240 --> 00:26:29,840
to think about security first when it

775
00:26:29,840 --> 00:26:31,679
comes to business intelligence this

776
00:26:31,679 --> 00:26:33,360
isn't just a job for

777
00:26:33,360 --> 00:26:35,360
the engineers it's for the whole of your

778
00:26:35,360 --> 00:26:37,200
development team the architects the

779
00:26:37,200 --> 00:26:39,279
engineers and the

780
00:26:39,279 --> 00:26:41,279
product owners so really getting

781
00:26:41,279 --> 00:26:42,799
together coming up with a mapping scheme

782
00:26:42,799 --> 00:26:44,400
thinking about the security first

783
00:26:44,400 --> 00:26:47,840
approach of baking in the obfuscation

784
00:26:47,840 --> 00:26:50,000
of you know the product name or the

785
00:26:50,000 --> 00:26:51,679
client list so that when you're

786
00:26:51,679 --> 00:26:53,279
basically building sites out you're not

787
00:26:53,279 --> 00:26:55,039
leaking that information

788
00:26:55,039 --> 00:26:56,240
so whilst

789
00:26:56,240 --> 00:26:59,600
security by obscurity is not the best

790
00:26:59,600 --> 00:27:01,760
approach to the vast majority of things

791
00:27:01,760 --> 00:27:04,159
as a link in the chain it can be quite

792
00:27:04,159 --> 00:27:06,080
useful when it's used in the right

793
00:27:06,080 --> 00:27:08,559
fashion

794
00:27:08,640 --> 00:27:10,799
so in conclusion

795
00:27:10,799 --> 00:27:13,200
what do we learn passive dns is useful

796
00:27:13,200 --> 00:27:15,679
for security researchers it can be great

797
00:27:15,679 --> 00:27:16,480
tool

798
00:27:16,480 --> 00:27:18,480
um you know if you're using it in the

799
00:27:18,480 --> 00:27:21,039
right fashion for understanding what's

800
00:27:21,039 --> 00:27:22,480
going on with your own infrastructure

801
00:27:22,480 --> 00:27:23,919
and i'd recommend if you're interested

802
00:27:23,919 --> 00:27:25,360
in reading a bit more about you know the

803
00:27:25,360 --> 00:27:28,240
use of passive dns for security um

804
00:27:28,240 --> 00:27:29,679
it's also unfortunately useful for

805
00:27:29,679 --> 00:27:31,279
competitors gathering business

806
00:27:31,279 --> 00:27:33,440
intelligence on you so keep that in mind

807
00:27:33,440 --> 00:27:34,799
as we've talked about you know

808
00:27:34,799 --> 00:27:36,640
throughout the last few slides and we

809
00:27:36,640 --> 00:27:39,600
saw with the example from risk iq um

810
00:27:39,600 --> 00:27:40,960
that information is all available to

811
00:27:40,960 --> 00:27:43,120
anyone who set up an account so

812
00:27:43,120 --> 00:27:44,880
best to avoid putting it in there in the

813
00:27:44,880 --> 00:27:47,039
first place

814
00:27:47,039 --> 00:27:48,240
think about what you're leaking through

815
00:27:48,240 --> 00:27:50,159
your dns entries so as i mentioned the

816
00:27:50,159 --> 00:27:54,080
customer list sales demos and of course

817
00:27:54,080 --> 00:27:56,320
also think about if you're purchasing

818
00:27:56,320 --> 00:27:58,799
services offer a third party and they're

819
00:27:58,799 --> 00:28:01,440
including your name within this

820
00:28:01,440 --> 00:28:03,240
structure of

821
00:28:03,240 --> 00:28:04,880
yourname.client.example.com that could

822
00:28:04,880 --> 00:28:06,960
be a problem also consider the fact that

823
00:28:06,960 --> 00:28:08,880
some of your customers you may have you

824
00:28:08,880 --> 00:28:10,080
know legal reasons why you're not

825
00:28:10,080 --> 00:28:12,480
allowed to list them um so avoid doing

826
00:28:12,480 --> 00:28:14,320
that and you know avoid getting into hot

827
00:28:14,320 --> 00:28:16,480
water on your part and if

828
00:28:16,480 --> 00:28:17,919
third parties are putting your name in

829
00:28:17,919 --> 00:28:19,760
and there is some sort of scandal um you

830
00:28:19,760 --> 00:28:21,120
know you want to try and avoid that if

831
00:28:21,120 --> 00:28:23,120
you can

832
00:28:23,120 --> 00:28:24,799
come up with the policy and process to

833
00:28:24,799 --> 00:28:26,159
avoid what we've mentioned before so

834
00:28:26,159 --> 00:28:27,360
that was really the last point i

835
00:28:27,360 --> 00:28:29,039
mentioned on the previous slide it takes

836
00:28:29,039 --> 00:28:30,960
a whole team to build a product and take

837
00:28:30,960 --> 00:28:32,399
the whole team to defend it really

838
00:28:32,399 --> 00:28:34,799
security shouldn't just be

839
00:28:34,799 --> 00:28:36,399
you know one team's responsibility it's

840
00:28:36,399 --> 00:28:37,679
the whole of the

841
00:28:37,679 --> 00:28:39,679
whole of the group that's responsible

842
00:28:39,679 --> 00:28:42,080
for a particular product or service

843
00:28:42,080 --> 00:28:44,240
you know an educated team so watching

844
00:28:44,240 --> 00:28:46,640
this talk would obviously be helpful

845
00:28:46,640 --> 00:28:48,000
there's lots of great resources out

846
00:28:48,000 --> 00:28:49,520
there probably a lot of them much better

847
00:28:49,520 --> 00:28:52,080
than my talk uh on why you know you

848
00:28:52,080 --> 00:28:54,399
should use obfuscated subdomain names

849
00:28:54,399 --> 00:28:56,240
for products and other techniques you

850
00:28:56,240 --> 00:28:58,399
can use to help protect you from

851
00:28:58,399 --> 00:28:59,120
from

852
00:28:59,120 --> 00:29:01,279
leaking information but educating your

853
00:29:01,279 --> 00:29:03,679
team is a great first step

854
00:29:03,679 --> 00:29:05,360
so with that said

855
00:29:05,360 --> 00:29:06,960
the q a session will be starting

856
00:29:06,960 --> 00:29:09,600
momentarily over on discord

857
00:29:09,600 --> 00:29:11,279
i'd like to thank all of the folks from

858
00:29:11,279 --> 00:29:13,840
the recon team uh once again for

859
00:29:13,840 --> 00:29:15,120
putting this on this year because i

860
00:29:15,120 --> 00:29:16,880
understand it's been a great challenge

861
00:29:16,880 --> 00:29:19,360
with covid and uh you know having to run

862
00:29:19,360 --> 00:29:20,799
things online and not being able to do

863
00:29:20,799 --> 00:29:22,640
things in person so so thanks you're

864
00:29:22,640 --> 00:29:25,039
doing a stellar job and for anyone

865
00:29:25,039 --> 00:29:27,279
looking for a job please check out

866
00:29:27,279 --> 00:29:29,600
moduscreate.com that's my final plug

867
00:29:29,600 --> 00:29:32,080
today we've got loads of open positions

868
00:29:32,080 --> 00:29:33,520
and we're always recruiting engineers

869
00:29:33,520 --> 00:29:35,679
and security folks and devops so please

870
00:29:35,679 --> 00:29:37,520
go check it out

871
00:29:37,520 --> 00:29:39,440
and with that said thanks once again and

872
00:29:39,440 --> 00:29:40,559
i look forward to speaking to you on

873
00:29:40,559 --> 00:29:44,440
discord bye

