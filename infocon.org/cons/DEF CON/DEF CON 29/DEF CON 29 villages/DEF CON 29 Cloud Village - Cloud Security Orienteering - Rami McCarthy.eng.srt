1
00:00:00,240 --> 00:00:02,320
this is cloud security orienteering uh

2
00:00:02,320 --> 00:00:03,919
thanks everyone for sticking with us i

3
00:00:03,919 --> 00:00:05,359
know we're right towards the tail end of

4
00:00:05,359 --> 00:00:07,520
what's been a really exciting conference

5
00:00:07,520 --> 00:00:09,200
i'm actually going to end up referencing

6
00:00:09,200 --> 00:00:11,519
things from just the last day or two

7
00:00:11,519 --> 00:00:14,000
as we go through these slides i'm ramy

8
00:00:14,000 --> 00:00:16,960
mccarthy i'm a staff security engineer

9
00:00:16,960 --> 00:00:19,600
at cder which is a health tech startup

10
00:00:19,600 --> 00:00:21,600
i'm what i like to call a reformed

11
00:00:21,600 --> 00:00:25,279
security consultant with ncc group

12
00:00:25,279 --> 00:00:28,000
i have a couple certifications in cloud

13
00:00:28,000 --> 00:00:30,320
security and i was a core contributor to

14
00:00:30,320 --> 00:00:32,159
scout suite which is a multi-cloud

15
00:00:32,159 --> 00:00:34,399
auditing tool and released an open

16
00:00:34,399 --> 00:00:36,960
source vulnerable terraform

17
00:00:36,960 --> 00:00:41,040
configuration tool called sad cloud

18
00:00:41,760 --> 00:00:42,559
so

19
00:00:42,559 --> 00:00:44,079
we're going to dive right in here to the

20
00:00:44,079 --> 00:00:47,280
background um

21
00:00:47,280 --> 00:00:48,879
what is orienteering i don't know if

22
00:00:48,879 --> 00:00:50,559
anyone googled it after it was in the

23
00:00:50,559 --> 00:00:52,719
talk title but in the general sense it's

24
00:00:52,719 --> 00:00:54,879
an outdoor sport really where you use a

25
00:00:54,879 --> 00:00:57,360
map and a compass to navigate from point

26
00:00:57,360 --> 00:00:59,120
to point in diverse

27
00:00:59,120 --> 00:01:01,920
and normally unfamiliar terrain um at

28
00:01:01,920 --> 00:01:04,159
speed and so in my background as a

29
00:01:04,159 --> 00:01:06,640
consultant i did a lot of aws security

30
00:01:06,640 --> 00:01:08,880
assessments and a lot of gcp assessments

31
00:01:08,880 --> 00:01:13,360
and azure these were sprawling multi-uh

32
00:01:13,360 --> 00:01:15,119
account environments

33
00:01:15,119 --> 00:01:17,360
um in some cases and in other cases it

34
00:01:17,360 --> 00:01:20,400
was one account or one project or

35
00:01:20,400 --> 00:01:22,560
subscription that had a ton of resources

36
00:01:22,560 --> 00:01:25,119
intermingled and so i well i was being

37
00:01:25,119 --> 00:01:27,119
paid to do a security assessment i

38
00:01:27,119 --> 00:01:29,200
really need to establish this

39
00:01:29,200 --> 00:01:31,680
methodology for orienteering for finding

40
00:01:31,680 --> 00:01:33,600
my bearings and

41
00:01:33,600 --> 00:01:35,439
finding my way from point to point at

42
00:01:35,439 --> 00:01:38,960
speed in an unfamiliar terrain

43
00:01:38,960 --> 00:01:39,759
now

44
00:01:39,759 --> 00:01:41,360
understandably most of you are likely

45
00:01:41,360 --> 00:01:44,000
not security consultants um i am not a

46
00:01:44,000 --> 00:01:45,840
security consultant anymore how is this

47
00:01:45,840 --> 00:01:47,439
relevant to you

48
00:01:47,439 --> 00:01:49,520
well when you start a new job or a new

49
00:01:49,520 --> 00:01:51,759
team as a cloud security engineer this

50
00:01:51,759 --> 00:01:53,520
is going to be exactly the sort of work

51
00:01:53,520 --> 00:01:56,240
you have to do to get your bearings

52
00:01:56,240 --> 00:01:58,320
if you are a consultant or decide to do

53
00:01:58,320 --> 00:02:00,560
some consulting engagements similarly

54
00:02:00,560 --> 00:02:02,799
this will come into play

55
00:02:02,799 --> 00:02:04,960
a merger acquisition is going to be an

56
00:02:04,960 --> 00:02:07,520
opportunity for you to very quickly

57
00:02:07,520 --> 00:02:09,440
understand the current state of an

58
00:02:09,440 --> 00:02:12,079
environment

59
00:02:12,480 --> 00:02:13,920
and then you're going to want to see

60
00:02:13,920 --> 00:02:16,080
your own environment with fresh eyes

61
00:02:16,080 --> 00:02:17,280
hopefully following this there's

62
00:02:17,280 --> 00:02:18,879
something that's applicable even if you

63
00:02:18,879 --> 00:02:20,720
feel you have a fairly good handle on

64
00:02:20,720 --> 00:02:21,440
your

65
00:02:21,440 --> 00:02:25,680
own company or organization or account

66
00:02:26,000 --> 00:02:28,480
before we can talk about security at all

67
00:02:28,480 --> 00:02:30,800
or orienteering we need to look at how

68
00:02:30,800 --> 00:02:33,040
so many environments get into the state

69
00:02:33,040 --> 00:02:34,319
they're in

70
00:02:34,319 --> 00:02:36,080
and really that comes down to cloud

71
00:02:36,080 --> 00:02:38,879
adoption patterns and securosis which is

72
00:02:38,879 --> 00:02:40,959
a really incredible information security

73
00:02:40,959 --> 00:02:43,760
advisory firm has broken out these four

74
00:02:43,760 --> 00:02:46,239
common patterns of cloud adoption and i

75
00:02:46,239 --> 00:02:47,840
recommend their whole blog post it's

76
00:02:47,840 --> 00:02:49,360
really enlightening

77
00:02:49,360 --> 00:02:51,519
but this is a short synthesis here there

78
00:02:51,519 --> 00:02:53,840
are the four patterns developer led data

79
00:02:53,840 --> 00:02:56,400
center transformation snap migration and

80
00:02:56,400 --> 00:02:58,720
native new builds

81
00:02:58,720 --> 00:03:00,319
and there's a pattern a trend you can

82
00:03:00,319 --> 00:03:02,000
see here which is that

83
00:03:02,000 --> 00:03:04,480
in three of the four cases security is

84
00:03:04,480 --> 00:03:07,840
either late or trailing implementation

85
00:03:07,840 --> 00:03:08,640
uh

86
00:03:08,640 --> 00:03:11,840
and that results in higher variable risk

87
00:03:11,840 --> 00:03:13,200
and so really

88
00:03:13,200 --> 00:03:15,360
because of the nature of how the cloud

89
00:03:15,360 --> 00:03:17,840
is adopted in businesses we're

90
00:03:17,840 --> 00:03:20,400
inherently going to have these

91
00:03:20,400 --> 00:03:22,959
heterogeneous risky environments and

92
00:03:22,959 --> 00:03:25,360
that's why it's important to be able to

93
00:03:25,360 --> 00:03:27,120
discover what the risks are and also

94
00:03:27,120 --> 00:03:28,319
know how to prioritize them

95
00:03:28,319 --> 00:03:30,239
appropriately

96
00:03:30,239 --> 00:03:32,480
so you walk into a cloud environment and

97
00:03:32,480 --> 00:03:34,720
unless you're like very very lucky this

98
00:03:34,720 --> 00:03:36,400
is a pretty fair representation of what

99
00:03:36,400 --> 00:03:37,760
it's going to be like

100
00:03:37,760 --> 00:03:39,120
there are a lot of reasons for this

101
00:03:39,120 --> 00:03:41,200
we'll go into but basically the cloud's

102
00:03:41,200 --> 00:03:43,280
a new concept in the grand scheme of

103
00:03:43,280 --> 00:03:45,519
things there are standards and best

104
00:03:45,519 --> 00:03:48,239
practices that are elastic and evolving

105
00:03:48,239 --> 00:03:51,040
uh and security trails behind cloud

106
00:03:51,040 --> 00:03:52,640
adoption and so you end up with these

107
00:03:52,640 --> 00:03:55,360
environments that uh there's a lot wrong

108
00:03:55,360 --> 00:03:57,360
and us as security practitioners we need

109
00:03:57,360 --> 00:04:01,200
to know how to handle that appropriately

110
00:04:01,200 --> 00:04:03,519
so if we're going to talk about the

111
00:04:03,519 --> 00:04:05,120
current state of the environment we're

112
00:04:05,120 --> 00:04:06,799
going to criticize it we need a clear

113
00:04:06,799 --> 00:04:08,400
and well-founded definition of our

114
00:04:08,400 --> 00:04:10,720
target state what does good look like in

115
00:04:10,720 --> 00:04:12,560
these cloud environments

116
00:04:12,560 --> 00:04:13,840
and this can be hard in cloud

117
00:04:13,840 --> 00:04:16,798
architecture for a few reasons uh like

118
00:04:16,798 --> 00:04:18,639
we've said the standards are emergent

119
00:04:18,639 --> 00:04:20,798
there's a high complexity ceiling and

120
00:04:20,798 --> 00:04:24,240
there's a ton of configuration uh and

121
00:04:24,240 --> 00:04:28,080
services you know in aws it's 200 plus

122
00:04:28,080 --> 00:04:30,639
150 of which have security documentation

123
00:04:30,639 --> 00:04:31,680
at all

124
00:04:31,680 --> 00:04:34,000
and this is true across all the cloud

125
00:04:34,000 --> 00:04:36,880
service providers

126
00:04:37,440 --> 00:04:40,080
so quick programming note from here on

127
00:04:40,080 --> 00:04:41,840
out i'm going to use aws for all the

128
00:04:41,840 --> 00:04:44,160
examples we're going to do our best to

129
00:04:44,160 --> 00:04:46,560
talk about principles here not any

130
00:04:46,560 --> 00:04:49,120
specific clouds

131
00:04:49,120 --> 00:04:50,880
defaults for example

132
00:04:50,880 --> 00:04:52,320
and nothing that shouldn't be applicable

133
00:04:52,320 --> 00:04:54,000
to other cloud providers no matter if

134
00:04:54,000 --> 00:04:56,800
you use gcp or azure or even for the

135
00:04:56,800 --> 00:04:58,560
like one person in the audience who has

136
00:04:58,560 --> 00:05:01,840
a workload in oracle

137
00:05:01,840 --> 00:05:02,720
so

138
00:05:02,720 --> 00:05:05,680
what does good look like in aws

139
00:05:05,680 --> 00:05:07,840
what comes to mind when i say aws

140
00:05:07,840 --> 00:05:11,199
architecture security best practices

141
00:05:11,199 --> 00:05:13,360
maybe for some of you it's the aws well

142
00:05:13,360 --> 00:05:15,280
architected framework which has a

143
00:05:15,280 --> 00:05:18,160
distinct security pillar

144
00:05:18,160 --> 00:05:20,720
for others maybe it's the aws security

145
00:05:20,720 --> 00:05:23,039
reference architecture which is this

146
00:05:23,039 --> 00:05:25,039
uh prescriptive guidance they've

147
00:05:25,039 --> 00:05:26,639
released as part of their solution

148
00:05:26,639 --> 00:05:28,000
architecture

149
00:05:28,000 --> 00:05:29,919
um that you know

150
00:05:29,919 --> 00:05:31,840
climbs with cloud formation to set up a

151
00:05:31,840 --> 00:05:34,320
perfect environment for you

152
00:05:34,320 --> 00:05:36,240
for newer folks and newer teams maybe

153
00:05:36,240 --> 00:05:38,400
it's control tower i haven't used it a

154
00:05:38,400 --> 00:05:40,160
lot but it's a prescriptive offering

155
00:05:40,160 --> 00:05:42,320
from aws that will set up

156
00:05:42,320 --> 00:05:44,800
you know as it says on the slide secure

157
00:05:44,800 --> 00:05:49,199
compliant multi-account aws environments

158
00:05:49,680 --> 00:05:50,880
what i'm getting at here is the

159
00:05:50,880 --> 00:05:52,639
complexity of the fact that in the last

160
00:05:52,639 --> 00:05:53,840
10 years

161
00:05:53,840 --> 00:05:55,360
all of the cloud providers have been

162
00:05:55,360 --> 00:05:57,600
rapidly improving and iterating on their

163
00:05:57,600 --> 00:05:59,199
recommendations they've been building

164
00:05:59,199 --> 00:06:01,840
new features new services for security

165
00:06:01,840 --> 00:06:04,160
for governance for compliance for

166
00:06:04,160 --> 00:06:05,600
orchestration

167
00:06:05,600 --> 00:06:07,199
and you're going to see permanent

168
00:06:07,199 --> 00:06:09,759
architectural evidence as you go through

169
00:06:09,759 --> 00:06:11,520
a cloud environment on where an

170
00:06:11,520 --> 00:06:13,600
organization started its cloud security

171
00:06:13,600 --> 00:06:14,800
journey

172
00:06:14,800 --> 00:06:17,680
if you take for example aws

173
00:06:17,680 --> 00:06:20,400
account management aws organizations

174
00:06:20,400 --> 00:06:22,240
which is now a standard recommendation

175
00:06:22,240 --> 00:06:25,039
and expectation for most organizations

176
00:06:25,039 --> 00:06:27,600
weren't even around until 2017 and so

177
00:06:27,600 --> 00:06:29,520
it's super common if you walk into an

178
00:06:29,520 --> 00:06:31,600
organization that's been around any

179
00:06:31,600 --> 00:06:34,639
longer than that and most have

180
00:06:34,639 --> 00:06:36,400
they're going to be accounts that either

181
00:06:36,400 --> 00:06:38,960
had to be shifted into aws organizations

182
00:06:38,960 --> 00:06:41,759
they're going to be orphaned accounts

183
00:06:41,759 --> 00:06:43,759
and it's very common they just predate

184
00:06:43,759 --> 00:06:46,639
this construct

185
00:06:46,880 --> 00:06:48,800
as another example we can break down the

186
00:06:48,800 --> 00:06:51,840
aws security pillar white paper this is

187
00:06:51,840 --> 00:06:53,919
directly inspired by scott piper who

188
00:06:53,919 --> 00:06:56,240
back in 2018 did a diff of the update to

189
00:06:56,240 --> 00:06:58,160
the white paper

190
00:06:58,160 --> 00:07:00,080
and at the time it was super interesting

191
00:07:00,080 --> 00:07:02,319
because aws recommended guard duty for

192
00:07:02,319 --> 00:07:04,479
the first time really comprehensively as

193
00:07:04,479 --> 00:07:07,520
well as shield waff and firewall manager

194
00:07:07,520 --> 00:07:08,400
um

195
00:07:08,400 --> 00:07:11,120
they used to recommend elasticsearch emr

196
00:07:11,120 --> 00:07:13,199
and athena and move to just athena for

197
00:07:13,199 --> 00:07:15,919
searching analyzing logs cloud formation

198
00:07:15,919 --> 00:07:17,919
and therefore infrastructure as a co as

199
00:07:17,919 --> 00:07:20,240
code took a key place

200
00:07:20,240 --> 00:07:22,240
and macy this was at the time that macy

201
00:07:22,240 --> 00:07:23,919
was being criticized for the pricing

202
00:07:23,919 --> 00:07:25,680
model and its utility and was fully

203
00:07:25,680 --> 00:07:28,800
removed from their best practices

204
00:07:28,800 --> 00:07:30,479
i've gone and done the same thing for

205
00:07:30,479 --> 00:07:32,800
2018 to 2020 which is the last year the

206
00:07:32,800 --> 00:07:34,960
white paper was released uh following

207
00:07:34,960 --> 00:07:38,400
that they moved to html documentation

208
00:07:38,400 --> 00:07:41,120
and as you can see a lot changed just in

209
00:07:41,120 --> 00:07:42,960
those couple years um database

210
00:07:42,960 --> 00:07:45,680
organizations as we talked about uh had

211
00:07:45,680 --> 00:07:48,080
really matured in that time federated

212
00:07:48,080 --> 00:07:50,000
identity was now called out as a best

213
00:07:50,000 --> 00:07:52,720
practice aws security hub and config

214
00:07:52,720 --> 00:07:54,720
were a core part of the guidance as well

215
00:07:54,720 --> 00:07:56,840
as movements towards automatic

216
00:07:56,840 --> 00:07:58,479
remediation

217
00:07:58,479 --> 00:08:00,960
scps were coming in as part of aws

218
00:08:00,960 --> 00:08:03,360
organizations and they significantly

219
00:08:03,360 --> 00:08:06,000
expanded instant response guidance

220
00:08:06,000 --> 00:08:08,560
so when we talk about best practices you

221
00:08:08,560 --> 00:08:10,400
have to remember that at the time that

222
00:08:10,400 --> 00:08:11,919
organizations may have configured

223
00:08:11,919 --> 00:08:13,919
workloads in the cloud the best

224
00:08:13,919 --> 00:08:16,400
practices and even available tools may

225
00:08:16,400 --> 00:08:17,919
have looked very different than they do

226
00:08:17,919 --> 00:08:20,160
now

227
00:08:20,160 --> 00:08:21,120
so

228
00:08:21,120 --> 00:08:23,360
what does good look like in aws i said

229
00:08:23,360 --> 00:08:25,039
there's not one answer i said it's been

230
00:08:25,039 --> 00:08:28,080
changing but for this talk for reference

231
00:08:28,080 --> 00:08:29,759
i'm going to be mapping roughly to three

232
00:08:29,759 --> 00:08:32,080
standards when we talk about best

233
00:08:32,080 --> 00:08:34,080
practice security configuration we're

234
00:08:34,080 --> 00:08:36,000
going to be return referring roughly to

235
00:08:36,000 --> 00:08:38,479
aws cis benchmark

236
00:08:38,479 --> 00:08:40,479
for architecture i'm going to generally

237
00:08:40,479 --> 00:08:42,799
be aligning to

238
00:08:42,799 --> 00:08:45,440
uh scott piper's sorry for architecture

239
00:08:45,440 --> 00:08:47,040
well architected framework for cloud

240
00:08:47,040 --> 00:08:49,279
security maturity scott piper's aws

241
00:08:49,279 --> 00:08:51,360
security maturity roadmap which is

242
00:08:51,360 --> 00:08:54,360
phenomenal

243
00:08:54,480 --> 00:08:56,160
so

244
00:08:56,160 --> 00:08:58,160
you have the rough guideline here

245
00:08:58,160 --> 00:09:00,560
let's talk about orienteering right we

246
00:09:00,560 --> 00:09:02,240
have a few standards we can look at for

247
00:09:02,240 --> 00:09:04,080
best practices

248
00:09:04,080 --> 00:09:07,920
uh we understand that cloud adoption is

249
00:09:07,920 --> 00:09:10,480
elastic and that over time these

250
00:09:10,480 --> 00:09:12,080
expectations have changed and this is

251
00:09:12,080 --> 00:09:14,560
why we have these heterogeneous accounts

252
00:09:14,560 --> 00:09:16,720
how do you actually find resources and

253
00:09:16,720 --> 00:09:19,040
know what's going on

254
00:09:19,040 --> 00:09:21,360
first some assumptions this guidance is

255
00:09:21,360 --> 00:09:22,800
going to work assuming you have

256
00:09:22,800 --> 00:09:24,399
cooperative help

257
00:09:24,399 --> 00:09:26,880
uh you need to be partnering with devops

258
00:09:26,880 --> 00:09:29,440
with developers with operations team

259
00:09:29,440 --> 00:09:31,519
sysadmins and leadership to gather

260
00:09:31,519 --> 00:09:32,959
information

261
00:09:32,959 --> 00:09:34,800
i'm assuming companies had good

262
00:09:34,800 --> 00:09:36,399
intentions and are doing

263
00:09:36,399 --> 00:09:38,640
some of the basic things right but that

264
00:09:38,640 --> 00:09:40,480
this is the first concerted effort at

265
00:09:40,480 --> 00:09:42,480
security architecture

266
00:09:42,480 --> 00:09:44,160
i'm not talking about multi-cloud this

267
00:09:44,160 --> 00:09:45,680
is not an indictment there are plenty of

268
00:09:45,680 --> 00:09:47,279
those floating around but you're on your

269
00:09:47,279 --> 00:09:48,839
own if you want to figure this out for

270
00:09:48,839 --> 00:09:51,360
multi-cloud um certainly apply it to

271
00:09:51,360 --> 00:09:53,040
each cloud but then you have to worry

272
00:09:53,040 --> 00:09:55,360
about the matrices

273
00:09:55,360 --> 00:09:56,640
and we're going to assume that you have

274
00:09:56,640 --> 00:09:58,160
access i'm not going to talk about how

275
00:09:58,160 --> 00:10:00,320
to break into an account that you know

276
00:10:00,320 --> 00:10:02,000
exists in your company owns there's a

277
00:10:02,000 --> 00:10:03,839
lot of good blog posts out there that

278
00:10:03,839 --> 00:10:05,600
give you guidelines on how to regain

279
00:10:05,600 --> 00:10:07,680
access to an aws account

280
00:10:07,680 --> 00:10:09,920
and finally it's important to be aware

281
00:10:09,920 --> 00:10:11,440
that when you're doing this sort of

282
00:10:11,440 --> 00:10:14,320
discovery work you often will stumble

283
00:10:14,320 --> 00:10:16,480
upon some really scary things and it can

284
00:10:16,480 --> 00:10:19,120
turn into instant response um we're not

285
00:10:19,120 --> 00:10:20,880
going to cover that situation here

286
00:10:20,880 --> 00:10:22,560
there's no expectation of active or

287
00:10:22,560 --> 00:10:24,399
historic compromise and cloud instant

288
00:10:24,399 --> 00:10:28,000
responses it's whole genre

289
00:10:28,399 --> 00:10:30,160
so

290
00:10:30,160 --> 00:10:33,800
principles of orienteering

291
00:10:35,279 --> 00:10:37,839
breadth and depth um this is actually

292
00:10:37,839 --> 00:10:39,680
something i see junior analysts and

293
00:10:39,680 --> 00:10:41,440
security practitioners falling into

294
00:10:41,440 --> 00:10:43,200
really commonly is that they'll see

295
00:10:43,200 --> 00:10:45,120
something interesting and

296
00:10:45,120 --> 00:10:48,000
part of the curiosity and discovery of

297
00:10:48,000 --> 00:10:49,920
security is folks who really know how to

298
00:10:49,920 --> 00:10:51,839
dig in and that'll get you in trouble

299
00:10:51,839 --> 00:10:53,839
when your goal here is to

300
00:10:53,839 --> 00:10:55,920
orient yourself before you can dig in

301
00:10:55,920 --> 00:10:57,360
anywhere you have to figure out where

302
00:10:57,360 --> 00:11:00,160
the most important places to do that and

303
00:11:00,160 --> 00:11:02,079
therefore you need to strive for breath

304
00:11:02,079 --> 00:11:05,120
which means avoiding rabbit holes

305
00:11:05,120 --> 00:11:07,440
take a note come back to it but when you

306
00:11:07,440 --> 00:11:08,720
start you're always going to want to

307
00:11:08,720 --> 00:11:10,480
have a good idea of the overarching

308
00:11:10,480 --> 00:11:13,120
situation

309
00:11:13,200 --> 00:11:15,120
anomaly detection is the name of the

310
00:11:15,120 --> 00:11:17,360
game here uh and i just mean pattern

311
00:11:17,360 --> 00:11:19,440
recognition this isn't ml this isn't

312
00:11:19,440 --> 00:11:21,839
automated some of this is gut and

313
00:11:21,839 --> 00:11:24,240
experience some of this is get used to

314
00:11:24,240 --> 00:11:26,720
the norms of a specific environment

315
00:11:26,720 --> 00:11:28,640
make sure you look at every region every

316
00:11:28,640 --> 00:11:30,880
project every account and you should

317
00:11:30,880 --> 00:11:34,240
start to get a feel for what is uh maybe

318
00:11:34,240 --> 00:11:36,320
further drifted from the norms of even

319
00:11:36,320 --> 00:11:38,880
that environment for example if they

320
00:11:38,880 --> 00:11:41,279
have everything running in usc 1 and you

321
00:11:41,279 --> 00:11:43,920
see a resource running off in bahrain

322
00:11:43,920 --> 00:11:46,959
take a note follow up on it

323
00:11:46,959 --> 00:11:48,160
also

324
00:11:48,160 --> 00:11:50,720
another gap i see is take advantage of

325
00:11:50,720 --> 00:11:53,120
your inside out access meaning leverage

326
00:11:53,120 --> 00:11:55,519
the access you have to query and

327
00:11:55,519 --> 00:11:57,760
enumerate efficiently don't try and

328
00:11:57,760 --> 00:12:00,000
emulate an adversary if you have

329
00:12:00,000 --> 00:12:02,240
authenticated access to apis whether you

330
00:12:02,240 --> 00:12:04,720
have security audit or read-only access

331
00:12:04,720 --> 00:12:06,000
use that

332
00:12:06,000 --> 00:12:09,040
but also remember to go outside in

333
00:12:09,040 --> 00:12:10,639
this is the only way to catch these

334
00:12:10,639 --> 00:12:13,519
unknown unknowns in this quadrant uh

335
00:12:13,519 --> 00:12:15,279
credentialed access only works for

336
00:12:15,279 --> 00:12:17,519
things that you know about outside in

337
00:12:17,519 --> 00:12:19,600
and there are a lot of talks for example

338
00:12:19,600 --> 00:12:21,920
felipe and kavisha's talks earlier in

339
00:12:21,920 --> 00:12:23,680
this conference about how to find

340
00:12:23,680 --> 00:12:25,920
unknown resources this is going to look

341
00:12:25,920 --> 00:12:29,200
like dns brute forcing or

342
00:12:29,200 --> 00:12:32,079
certificate transparency logs using

343
00:12:32,079 --> 00:12:34,480
tools like census and showdown

344
00:12:34,480 --> 00:12:36,959
but take advantage of both

345
00:12:36,959 --> 00:12:38,959
get easy coverage of the things that you

346
00:12:38,959 --> 00:12:40,800
already have access to but don't forget

347
00:12:40,800 --> 00:12:42,160
to look for things that aren't

348
00:12:42,160 --> 00:12:44,110
documented or known

349
00:12:44,110 --> 00:12:46,560
[Music]

350
00:12:46,560 --> 00:12:48,160
and then i like to call what we're going

351
00:12:48,160 --> 00:12:50,959
to do corporate archaeology

352
00:12:50,959 --> 00:12:52,639
really what you're doing is you're

353
00:12:52,639 --> 00:12:55,360
digging into the history and artifacts

354
00:12:55,360 --> 00:12:57,040
and organization itself

355
00:12:57,040 --> 00:12:59,120
builds and creates in the process of

356
00:12:59,120 --> 00:13:01,600
deploying these environments and using

357
00:13:01,600 --> 00:13:05,360
that to understand where risk may lie

358
00:13:05,360 --> 00:13:07,519
so corporate archaeology there are a lot

359
00:13:07,519 --> 00:13:10,160
of data sources if you're really lucky

360
00:13:10,160 --> 00:13:11,920
there's a detailed asset inventory

361
00:13:11,920 --> 00:13:13,839
although often it's incomplete or

362
00:13:13,839 --> 00:13:15,360
doesn't exist

363
00:13:15,360 --> 00:13:17,200
if you're a little lucky

364
00:13:17,200 --> 00:13:18,720
they've adopted infrastructure

365
00:13:18,720 --> 00:13:20,720
configuration as code with tools like

366
00:13:20,720 --> 00:13:23,760
terraform or chef ansible puppet

367
00:13:23,760 --> 00:13:26,160
and this gives a definitive source for

368
00:13:26,160 --> 00:13:28,320
cloud configuration

369
00:13:28,320 --> 00:13:30,560
most organizations especially those of

370
00:13:30,560 --> 00:13:32,240
the mature compliance or governance

371
00:13:32,240 --> 00:13:34,720
function should have data classification

372
00:13:34,720 --> 00:13:36,720
and designation of scope

373
00:13:36,720 --> 00:13:38,399
for example even if they don't have a

374
00:13:38,399 --> 00:13:40,079
good handle on their whole estate they

375
00:13:40,079 --> 00:13:42,079
should know really well where their pci

376
00:13:42,079 --> 00:13:44,399
environment is

377
00:13:44,399 --> 00:13:46,639
and then all organizations should have

378
00:13:46,639 --> 00:13:48,480
subject matter experts available as we

379
00:13:48,480 --> 00:13:50,000
talked about earlier hoping for

380
00:13:50,000 --> 00:13:52,160
cooperation here who can pass tribal

381
00:13:52,160 --> 00:13:54,320
knowledge and much of the knowledge in

382
00:13:54,320 --> 00:13:57,600
organizations i've audited is tribal

383
00:13:57,600 --> 00:13:59,279
if you're lucky there's standardized

384
00:13:59,279 --> 00:14:01,279
tagging if you haven't rolled out

385
00:14:01,279 --> 00:14:02,800
tagging in your environment check out

386
00:14:02,800 --> 00:14:05,680
your which automates it um but tagging

387
00:14:05,680 --> 00:14:07,760
can let you do things like query for all

388
00:14:07,760 --> 00:14:09,199
the resources with a certain data

389
00:14:09,199 --> 00:14:11,600
classification level or group resources

390
00:14:11,600 --> 00:14:14,079
by workload or find business owners and

391
00:14:14,079 --> 00:14:17,040
that's really valuable data to use as we

392
00:14:17,040 --> 00:14:18,720
go through this process

393
00:14:18,720 --> 00:14:20,639
and finally i'm going to return to this

394
00:14:20,639 --> 00:14:22,560
idea of cloud security tools but just

395
00:14:22,560 --> 00:14:24,399
remember when you're orienting yourself

396
00:14:24,399 --> 00:14:26,160
in a new environment take advantage of

397
00:14:26,160 --> 00:14:27,920
what they already have if they're

398
00:14:27,920 --> 00:14:30,639
already paying for vendor tools a cspm

399
00:14:30,639 --> 00:14:31,680
maybe

400
00:14:31,680 --> 00:14:33,839
a cloud security posture management tool

401
00:14:33,839 --> 00:14:36,160
use that don't ignore it

402
00:14:36,160 --> 00:14:39,360
and we'll talk about how later

403
00:14:39,360 --> 00:14:41,600
eventually you're going to need to find

404
00:14:41,600 --> 00:14:43,839
develop or have someone build for you

405
00:14:43,839 --> 00:14:45,839
architecture diagrams and documentations

406
00:14:45,839 --> 00:14:47,839
of workloads there's only so much

407
00:14:47,839 --> 00:14:49,680
reverse engineering you can do in this

408
00:14:49,680 --> 00:14:50,800
process

409
00:14:50,800 --> 00:14:53,920
and so start the ask early you know flag

410
00:14:53,920 --> 00:14:55,360
that down the line you're gonna have

411
00:14:55,360 --> 00:14:56,720
detailed questions and they should

412
00:14:56,720 --> 00:14:58,240
figure out what their priorities are

413
00:14:58,240 --> 00:14:59,040
there

414
00:14:59,040 --> 00:15:00,399
you're also going to need no crown

415
00:15:00,399 --> 00:15:02,399
jewels and this is very organizationally

416
00:15:02,399 --> 00:15:05,680
dependent and people overlook this but

417
00:15:05,680 --> 00:15:07,760
in organizations like mine where we're

418
00:15:07,760 --> 00:15:10,480
very regulated and compliant we know

419
00:15:10,480 --> 00:15:12,480
what our major risks are and those are

420
00:15:12,480 --> 00:15:15,279
around protected health information phi

421
00:15:15,279 --> 00:15:18,240
because we're a health uh tech startup

422
00:15:18,240 --> 00:15:21,279
um pci data card holder data in

423
00:15:21,279 --> 00:15:23,360
organizations that maybe aren't

424
00:15:23,360 --> 00:15:26,240
regulated or don't have those compliance

425
00:15:26,240 --> 00:15:28,959
requirements this can be a lot fuzzier

426
00:15:28,959 --> 00:15:31,680
and go and ask ask the business what is

427
00:15:31,680 --> 00:15:32,560
the

428
00:15:32,560 --> 00:15:34,480
riskiest data what would be worst if it

429
00:15:34,480 --> 00:15:36,800
were compromise if it's a ad tech

430
00:15:36,800 --> 00:15:39,360
startup advertising technology is it

431
00:15:39,360 --> 00:15:43,040
their ml models is it the user data

432
00:15:43,040 --> 00:15:45,839
is it their um you know data they've

433
00:15:45,839 --> 00:15:47,040
bought from vendors where there are

434
00:15:47,040 --> 00:15:49,360
strong contractual requirements you

435
00:15:49,360 --> 00:15:51,040
can't know and so you have to ask and

436
00:15:51,040 --> 00:15:53,360
discover that and use that to guide your

437
00:15:53,360 --> 00:15:55,519
prioritization later

438
00:15:55,519 --> 00:15:56,720
also

439
00:15:56,720 --> 00:15:58,639
you need to find what the intended

440
00:15:58,639 --> 00:16:00,959
authentication and identity approach is

441
00:16:00,959 --> 00:16:02,959
there may not be a standard one but

442
00:16:02,959 --> 00:16:04,240
knowing if

443
00:16:04,240 --> 00:16:06,399
uh it's normal for folks to have their

444
00:16:06,399 --> 00:16:08,480
own im users in each account

445
00:16:08,480 --> 00:16:10,480
whether they are using roles and cross

446
00:16:10,480 --> 00:16:12,160
account assumption with an identity

447
00:16:12,160 --> 00:16:13,839
account etc is going to be really

448
00:16:13,839 --> 00:16:15,759
important down the line as we start to

449
00:16:15,759 --> 00:16:19,040
draw everything together

450
00:16:19,600 --> 00:16:21,680
and there's this hierarchy in cloud

451
00:16:21,680 --> 00:16:23,920
environments and you should use it to

452
00:16:23,920 --> 00:16:26,560
your benefit in discovery

453
00:16:26,560 --> 00:16:28,240
we start at the bottom level with the

454
00:16:28,240 --> 00:16:30,399
broadest selection which is collections

455
00:16:30,399 --> 00:16:33,199
of accounts or environments

456
00:16:33,199 --> 00:16:36,320
in aws this would be aws organizations

457
00:16:36,320 --> 00:16:38,399
then at the environment level you have

458
00:16:38,399 --> 00:16:40,480
the point at which there's a default

459
00:16:40,480 --> 00:16:42,320
enforced boundary based on the cloud

460
00:16:42,320 --> 00:16:44,560
service provider so this would be an aws

461
00:16:44,560 --> 00:16:47,040
account which by default is completely

462
00:16:47,040 --> 00:16:48,880
encapsulated

463
00:16:48,880 --> 00:16:51,120
next up you have workloads and then

464
00:16:51,120 --> 00:16:53,360
regions so workloads can span multiple

465
00:16:53,360 --> 00:16:55,120
regions these can actually be flipped

466
00:16:55,120 --> 00:16:56,320
though of course because you can have

467
00:16:56,320 --> 00:16:58,560
multiple workloads in a region

468
00:16:58,560 --> 00:17:01,519
services and then resources used to

469
00:17:01,519 --> 00:17:02,839
implement those

470
00:17:02,839 --> 00:17:06,079
services and this is not ordered it's

471
00:17:06,079 --> 00:17:07,919
hierarchical but it's not a guideline

472
00:17:07,919 --> 00:17:09,199
right we're not going to start with

473
00:17:09,199 --> 00:17:10,880
collections of environments and then

474
00:17:10,880 --> 00:17:12,319
work our way up

475
00:17:12,319 --> 00:17:14,400
instead once you find for example a

476
00:17:14,400 --> 00:17:16,000
workload you're going to want traced in

477
00:17:16,000 --> 00:17:17,280
both directions you're going to want to

478
00:17:17,280 --> 00:17:19,280
find out what the environment it lives

479
00:17:19,280 --> 00:17:20,480
in is

480
00:17:20,480 --> 00:17:22,720
and maybe is that affiliated with an aws

481
00:17:22,720 --> 00:17:26,160
organization or a gcp account and which

482
00:17:26,160 --> 00:17:27,359
and you're also going to want to trace

483
00:17:27,359 --> 00:17:29,200
it down to the individual resources so

484
00:17:29,200 --> 00:17:31,840
this model is important to think about

485
00:17:31,840 --> 00:17:33,919
just in terms of traversing it and

486
00:17:33,919 --> 00:17:36,080
building up a knowledge base

487
00:17:36,080 --> 00:17:38,480
but not necessarily directly followed

488
00:17:38,480 --> 00:17:42,000
for orienteering

489
00:17:42,960 --> 00:17:45,039
so getting into some of the you know

490
00:17:45,039 --> 00:17:47,360
maybe more technical details here how do

491
00:17:47,360 --> 00:17:50,960
we actually do this right

492
00:17:50,960 --> 00:17:52,400
discovering your environments

493
00:17:52,400 --> 00:17:54,320
discovering your accounts is generally

494
00:17:54,320 --> 00:17:56,400
the first step as their

495
00:17:56,400 --> 00:17:57,440
um

496
00:17:57,440 --> 00:17:59,600
the largest unit you can easily discover

497
00:17:59,600 --> 00:18:01,919
finding aws organizations is not

498
00:18:01,919 --> 00:18:04,720
necessarily trivial um finding aws

499
00:18:04,720 --> 00:18:06,160
accounts there are a lot of ways to do

500
00:18:06,160 --> 00:18:08,080
it scott piper over at summit route has

501
00:18:08,080 --> 00:18:10,160
written a whole blog post

502
00:18:10,160 --> 00:18:11,760
uh that i'm just going to reference

503
00:18:11,760 --> 00:18:13,679
directly you know you can work with your

504
00:18:13,679 --> 00:18:15,919
technical account manager your finance

505
00:18:15,919 --> 00:18:16,799
team

506
00:18:16,799 --> 00:18:19,440
search company emails dns logs network

507
00:18:19,440 --> 00:18:20,880
logs

508
00:18:20,880 --> 00:18:22,720
and also put out a request to public

509
00:18:22,720 --> 00:18:24,640
employees and i actually want to dig in

510
00:18:24,640 --> 00:18:27,679
more to this last note here

511
00:18:27,679 --> 00:18:28,799
so

512
00:18:28,799 --> 00:18:31,200
when we're talking about security and

513
00:18:31,200 --> 00:18:32,880
cloud security there's a technical

514
00:18:32,880 --> 00:18:34,799
aspect but there's also a human aspect

515
00:18:34,799 --> 00:18:38,160
and security is all about evangelism to

516
00:18:38,160 --> 00:18:40,799
your organization so how do you reach

517
00:18:40,799 --> 00:18:42,480
out to employees right find them where

518
00:18:42,480 --> 00:18:44,240
they are if your company uses slack just

519
00:18:44,240 --> 00:18:46,320
put out a message and say can everyone

520
00:18:46,320 --> 00:18:48,080
please let me know what cloud accounts

521
00:18:48,080 --> 00:18:49,200
they're using

522
00:18:49,200 --> 00:18:51,679
but you also have to incentivize things

523
00:18:51,679 --> 00:18:53,200
um there are a lot of ways you can

524
00:18:53,200 --> 00:18:55,280
incentivize people to bring accounts

525
00:18:55,280 --> 00:18:57,440
that are shadow i.t under centralized

526
00:18:57,440 --> 00:18:58,799
management

527
00:18:58,799 --> 00:19:01,200
that can be

528
00:19:01,200 --> 00:19:03,120
opening up a new policy where you allow

529
00:19:03,120 --> 00:19:04,799
folks to expense development

530
00:19:04,799 --> 00:19:07,200
environments which will come with some

531
00:19:07,200 --> 00:19:09,760
cost but then guarantees or almost

532
00:19:09,760 --> 00:19:11,760
guarantees folks will bother telling you

533
00:19:11,760 --> 00:19:14,160
once they set one up

534
00:19:14,160 --> 00:19:17,280
you can also offer default profiles for

535
00:19:17,280 --> 00:19:18,960
these accounts offered to stand them up

536
00:19:18,960 --> 00:19:21,039
and manage them offer to be responsible

537
00:19:21,039 --> 00:19:23,679
for maintenance and stability and i say

538
00:19:23,679 --> 00:19:26,880
you offer and i mean as a security team

539
00:19:26,880 --> 00:19:29,360
or as a security team partnering with an

540
00:19:29,360 --> 00:19:30,799
it org

541
00:19:30,799 --> 00:19:33,918
or devops org

542
00:19:34,240 --> 00:19:36,160
and so once you go through that process

543
00:19:36,160 --> 00:19:38,799
and have a starter set of accounts

544
00:19:38,799 --> 00:19:40,240
you're going to want to take a pass at

545
00:19:40,240 --> 00:19:42,320
discovering workloads

546
00:19:42,320 --> 00:19:43,760
and

547
00:19:43,760 --> 00:19:45,200
you can do this from a technical

548
00:19:45,200 --> 00:19:47,679
perspective but i find that the best

549
00:19:47,679 --> 00:19:50,880
place to start is actually documentation

550
00:19:50,880 --> 00:19:53,360
work backwards find where the company

551
00:19:53,360 --> 00:19:55,679
likes to keep records is it github or

552
00:19:55,679 --> 00:19:58,799
git lab is there a confluence or wiki

553
00:19:58,799 --> 00:20:01,120
you can look at and start reading about

554
00:20:01,120 --> 00:20:02,559
what their products are what their

555
00:20:02,559 --> 00:20:04,799
services are what tools they use and how

556
00:20:04,799 --> 00:20:07,280
they're designed and where they live

557
00:20:07,280 --> 00:20:09,840
you can also inside the accounts look at

558
00:20:09,840 --> 00:20:11,919
the monthly billing report any spikes

559
00:20:11,919 --> 00:20:14,400
are important to dig into but also the

560
00:20:14,400 --> 00:20:16,320
monthly billing report in a cloud

561
00:20:16,320 --> 00:20:17,440
account

562
00:20:17,440 --> 00:20:19,360
can be reverse engineered to say a lot

563
00:20:19,360 --> 00:20:21,120
about the architecture

564
00:20:21,120 --> 00:20:23,840
for example lift and shift migration

565
00:20:23,840 --> 00:20:25,120
models

566
00:20:25,120 --> 00:20:27,679
generally result in a huge usage of ec2

567
00:20:27,679 --> 00:20:30,480
instances to replicate on-prem servers

568
00:20:30,480 --> 00:20:32,240
and so that's a really valuable piece of

569
00:20:32,240 --> 00:20:34,000
data on how the company works and has

570
00:20:34,000 --> 00:20:35,520
designed things

571
00:20:35,520 --> 00:20:36,960
that you can learn just from looking at

572
00:20:36,960 --> 00:20:39,200
billing similarly you know how much

573
00:20:39,200 --> 00:20:40,880
adoption there is of various managed

574
00:20:40,880 --> 00:20:43,360
services like container services

575
00:20:43,360 --> 00:20:46,080
and corey quinn who has a uh you know a

576
00:20:46,080 --> 00:20:48,080
well-known startup doing cloud billing

577
00:20:48,080 --> 00:20:50,400
optimization has a whole blog post

578
00:20:50,400 --> 00:20:53,120
discussing how you can tie bills to

579
00:20:53,120 --> 00:20:55,280
architecture that

580
00:20:55,280 --> 00:20:57,520
goes into this in much more depth

581
00:20:57,520 --> 00:20:59,919
and then also infrastructure as code is

582
00:20:59,919 --> 00:21:01,919
specifically useful for workloads

583
00:21:01,919 --> 00:21:03,520
because often

584
00:21:03,520 --> 00:21:05,600
best practices for writing

585
00:21:05,600 --> 00:21:07,520
terraform or similar infrastructure as

586
00:21:07,520 --> 00:21:10,960
code has you group the actual code

587
00:21:10,960 --> 00:21:12,640
in a workload

588
00:21:12,640 --> 00:21:15,280
so that can be mapped you know how

589
00:21:15,280 --> 00:21:16,880
if you look at a cloud account and you

590
00:21:16,880 --> 00:21:19,360
have an ec2 instance and an rds a

591
00:21:19,360 --> 00:21:21,520
database backing it um you know and

592
00:21:21,520 --> 00:21:24,880
maybe a firewall uh maybe a cbn those

593
00:21:24,880 --> 00:21:27,600
resources have to be traced whereas in

594
00:21:27,600 --> 00:21:29,440
infrastructures code they'd probably all

595
00:21:29,440 --> 00:21:32,320
be sat alongside each other

596
00:21:32,320 --> 00:21:33,120
and

597
00:21:33,120 --> 00:21:34,880
i want to flag here besides looking at

598
00:21:34,880 --> 00:21:36,720
discovered accounts here when you're

599
00:21:36,720 --> 00:21:38,400
looking at the documentation you get a

600
00:21:38,400 --> 00:21:40,559
second chance to find accounts based on

601
00:21:40,559 --> 00:21:42,799
novel workloads so

602
00:21:42,799 --> 00:21:44,320
there may be somewhere deep in the

603
00:21:44,320 --> 00:21:46,799
documentation from 2017 where someone

604
00:21:46,799 --> 00:21:48,240
says you know

605
00:21:48,240 --> 00:21:50,559
oh we stood up this service for a single

606
00:21:50,559 --> 00:21:52,960
client or we have a beta running and you

607
00:21:52,960 --> 00:21:54,480
don't recognize the cloud id and that

608
00:21:54,480 --> 00:21:56,400
gives you another chance to find these

609
00:21:56,400 --> 00:21:59,400
things

610
00:21:59,679 --> 00:22:02,080
and then so you have an idea of accounts

611
00:22:02,080 --> 00:22:03,840
you can work backwards to organizations

612
00:22:03,840 --> 00:22:05,760
you have an idea of workloads roughly

613
00:22:05,760 --> 00:22:07,280
what are the sort of things we're using

614
00:22:07,280 --> 00:22:09,280
the cloud for

615
00:22:09,280 --> 00:22:12,080
you should discover resources and i

616
00:22:12,080 --> 00:22:14,720
can't overemphasize you cannot manually

617
00:22:14,720 --> 00:22:17,200
discover all the resources in an

618
00:22:17,200 --> 00:22:19,039
organization's cloud estate of any

619
00:22:19,039 --> 00:22:21,520
reasonable size i've done it i've

620
00:22:21,520 --> 00:22:23,360
literally gone through zoom calls over

621
00:22:23,360 --> 00:22:25,440
the shoulder with clients trying to

622
00:22:25,440 --> 00:22:27,120
navigate their

623
00:22:27,120 --> 00:22:29,840
aws console to find resources and do a

624
00:22:29,840 --> 00:22:31,600
security audit

625
00:22:31,600 --> 00:22:33,760
it's slow it's painful and you will miss

626
00:22:33,760 --> 00:22:35,760
things it doesn't scale it scales

627
00:22:35,760 --> 00:22:37,760
linearly

628
00:22:37,760 --> 00:22:41,039
automation is key there are two paths

629
00:22:41,039 --> 00:22:43,280
for automation like i said earlier we'll

630
00:22:43,280 --> 00:22:45,520
talk about vendors here's where we do it

631
00:22:45,520 --> 00:22:48,320
the company may already have a cloud

632
00:22:48,320 --> 00:22:50,559
security vendor or two in place

633
00:22:50,559 --> 00:22:52,080
cloud security posture management is

634
00:22:52,080 --> 00:22:53,760
gaining wide adoption there are a lot of

635
00:22:53,760 --> 00:22:56,000
really cool tools in this space

636
00:22:56,000 --> 00:22:58,320
maybe also they've just adopted native

637
00:22:58,320 --> 00:23:01,200
cloud security cloud service provider

638
00:23:01,200 --> 00:23:03,760
services like aws security hub and aws

639
00:23:03,760 --> 00:23:05,120
config

640
00:23:05,120 --> 00:23:07,280
you can use these tools if you're

641
00:23:07,280 --> 00:23:09,200
orienting yourself there is no reason

642
00:23:09,200 --> 00:23:11,600
you shouldn't look at this existing data

643
00:23:11,600 --> 00:23:14,000
but there are a few caveats

644
00:23:14,000 --> 00:23:15,600
watch out for exceptions and actually

645
00:23:15,600 --> 00:23:18,080
dig in why are certain things excluded

646
00:23:18,080 --> 00:23:19,440
from scans

647
00:23:19,440 --> 00:23:21,440
uh oftentimes that's because they were

648
00:23:21,440 --> 00:23:23,600
firing too many alerts which can be

649
00:23:23,600 --> 00:23:26,240
false negatives or sorry can be false

650
00:23:26,240 --> 00:23:27,679
positives

651
00:23:27,679 --> 00:23:29,039
but also now you could have false

652
00:23:29,039 --> 00:23:30,159
negatives

653
00:23:30,159 --> 00:23:32,240
also check the configuration if you've

654
00:23:32,240 --> 00:23:34,559
gone through the process to this point

655
00:23:34,559 --> 00:23:36,559
you've probably found some accounts that

656
00:23:36,559 --> 00:23:38,400
the organization didn't know about some

657
00:23:38,400 --> 00:23:41,039
unknown unknowns and it's unlikely those

658
00:23:41,039 --> 00:23:44,799
are onboarded to their uh tooling

659
00:23:44,799 --> 00:23:45,600
so

660
00:23:45,600 --> 00:23:47,679
your other option here is to run a tool

661
00:23:47,679 --> 00:23:50,000
yourself and it's almost always going to

662
00:23:50,000 --> 00:23:52,799
be open source uh if the

663
00:23:52,799 --> 00:23:54,640
company doesn't already have something

664
00:23:54,640 --> 00:23:57,520
that they're paying for

665
00:23:57,520 --> 00:23:58,880
um

666
00:23:58,880 --> 00:24:00,960
so

667
00:24:00,960 --> 00:24:04,880
why is this well procurement is hard

668
00:24:04,880 --> 00:24:06,240
anyone who's worked in a big company

669
00:24:06,240 --> 00:24:08,320
knows it can take months to get sign off

670
00:24:08,320 --> 00:24:10,080
to put in a new tool

671
00:24:10,080 --> 00:24:11,360
and when you're trying to orient

672
00:24:11,360 --> 00:24:12,640
yourself you don't want to wait for

673
00:24:12,640 --> 00:24:15,440
those maturity processes to roll through

674
00:24:15,440 --> 00:24:16,960
so

675
00:24:16,960 --> 00:24:18,799
we turn to open source and there's so

676
00:24:18,799 --> 00:24:20,640
many people writing so many great open

677
00:24:20,640 --> 00:24:23,360
source tools this is just a subset my

678
00:24:23,360 --> 00:24:26,159
former employer ncc group disclosure has

679
00:24:26,159 --> 00:24:28,400
a tool called aws inventory that tries

680
00:24:28,400 --> 00:24:30,799
to identify every resource in a specific

681
00:24:30,799 --> 00:24:34,000
account i also personally really like to

682
00:24:34,000 --> 00:24:36,640
use the auditing tools just for resource

683
00:24:36,640 --> 00:24:38,240
discovery because

684
00:24:38,240 --> 00:24:40,080
as a predicate to actually running

685
00:24:40,080 --> 00:24:41,600
configuration checks they have to

686
00:24:41,600 --> 00:24:43,360
discover the resources and often will

687
00:24:43,360 --> 00:24:45,520
have good reporting on vulnerabilities

688
00:24:45,520 --> 00:24:48,159
and workloads and how services

689
00:24:48,159 --> 00:24:49,760
communicate

690
00:24:49,760 --> 00:24:51,919
steam pipe prowler scout suite are all

691
00:24:51,919 --> 00:24:54,640
targeted at misconfigurations but are

692
00:24:54,640 --> 00:24:56,880
really strong examples of tools you can

693
00:24:56,880 --> 00:24:57,919
use

694
00:24:57,919 --> 00:24:59,679
and native services are really good i

695
00:24:59,679 --> 00:25:02,960
want to specifically um call out gcp has

696
00:25:02,960 --> 00:25:04,880
some great asset inventory tools that

697
00:25:04,880 --> 00:25:06,320
work out of the box that you should

698
00:25:06,320 --> 00:25:07,440
leverage

699
00:25:07,440 --> 00:25:10,159
and for the most part uh asset inventory

700
00:25:10,159 --> 00:25:11,520
tools are

701
00:25:11,520 --> 00:25:13,520
relatively inexpensive but check before

702
00:25:13,520 --> 00:25:17,200
you turn them on so you don't get fired

703
00:25:18,080 --> 00:25:18,880
so

704
00:25:18,880 --> 00:25:20,880
that's the really quick way we walk

705
00:25:20,880 --> 00:25:24,640
through and find resources services

706
00:25:24,640 --> 00:25:27,279
workloads right

707
00:25:27,279 --> 00:25:29,919
but then we have to actually dig in and

708
00:25:29,919 --> 00:25:33,279
talk about prioritization

709
00:25:33,520 --> 00:25:34,559
so

710
00:25:34,559 --> 00:25:35,919
you have more data than you know to do

711
00:25:35,919 --> 00:25:37,520
with you have a decent mental model of

712
00:25:37,520 --> 00:25:40,080
the organization's cloud estate the real

713
00:25:40,080 --> 00:25:42,240
thrust here is how do we go from that to

714
00:25:42,240 --> 00:25:44,240
actual guidance how do we decide what's

715
00:25:44,240 --> 00:25:46,799
important if you try and fix everything

716
00:25:46,799 --> 00:25:48,799
you're not going to get anything done

717
00:25:48,799 --> 00:25:51,120
and you're not prioritizing your time

718
00:25:51,120 --> 00:25:52,799
appropriately

719
00:25:52,799 --> 00:25:54,559
someone in engineering leadership once

720
00:25:54,559 --> 00:25:57,440
described this to me as you know in most

721
00:25:57,440 --> 00:25:59,279
companies everything's on fire all the

722
00:25:59,279 --> 00:26:00,559
time

723
00:26:00,559 --> 00:26:02,000
and the important thing is figuring out

724
00:26:02,000 --> 00:26:04,400
what can be let burn

725
00:26:04,400 --> 00:26:06,320
if you're not carrying any risk your

726
00:26:06,320 --> 00:26:07,840
company's probably being too

727
00:26:07,840 --> 00:26:10,080
conservative and that can impede a speed

728
00:26:10,080 --> 00:26:12,559
of growth

729
00:26:12,799 --> 00:26:14,880
so what's important in the cloud we need

730
00:26:14,880 --> 00:26:17,120
to know it's important to prioritize

731
00:26:17,120 --> 00:26:19,200
identity is the new perimeter but the

732
00:26:19,200 --> 00:26:20,880
network perimeter actually hasn't gone

733
00:26:20,880 --> 00:26:23,200
away in many cases especially in these

734
00:26:23,200 --> 00:26:26,000
uh lift and shift adoption patterns or

735
00:26:26,000 --> 00:26:28,799
other non-native patterns

736
00:26:28,799 --> 00:26:31,039
so we need to look at the realistic

737
00:26:31,039 --> 00:26:33,760
threats here

738
00:26:33,840 --> 00:26:35,200
i like the

739
00:26:35,200 --> 00:26:37,760
uh disrupt ops breakdown of cloud kill

740
00:26:37,760 --> 00:26:38,880
chains

741
00:26:38,880 --> 00:26:40,400
and i'm just going to speed through this

742
00:26:40,400 --> 00:26:42,640
part but we can look

743
00:26:42,640 --> 00:26:46,159
at these threats based on three features

744
00:26:46,159 --> 00:26:47,520
whether they're actually the root of

745
00:26:47,520 --> 00:26:49,039
initial access

746
00:26:49,039 --> 00:26:50,799
whether they're cloud specific and what

747
00:26:50,799 --> 00:26:52,240
the impact is and we're going to

748
00:26:52,240 --> 00:26:53,919
immediately drop anything that's not

749
00:26:53,919 --> 00:26:55,760
high impact

750
00:26:55,760 --> 00:26:57,760
anything that's not cloud specific

751
00:26:57,760 --> 00:27:00,320
probably isn't

752
00:27:00,320 --> 00:27:02,400
solely your job to cover as part of this

753
00:27:02,400 --> 00:27:03,360
process

754
00:27:03,360 --> 00:27:04,880
and if it's not the source of initial

755
00:27:04,880 --> 00:27:06,080
access if it requires another

756
00:27:06,080 --> 00:27:09,039
vulnerability exploit or compromise

757
00:27:09,039 --> 00:27:12,640
it's just not a day one priority

758
00:27:12,640 --> 00:27:14,320
and here's the second set here network

759
00:27:14,320 --> 00:27:16,240
attacks novel cloud day exposure and

760
00:27:16,240 --> 00:27:18,559
exfiltration if we flip back we'll see

761
00:27:18,559 --> 00:27:20,559
almost all of these are either resource

762
00:27:20,559 --> 00:27:23,520
exposure or the account perimeter

763
00:27:23,520 --> 00:27:24,320
um

764
00:27:24,320 --> 00:27:26,159
you know network perimeter or resource

765
00:27:26,159 --> 00:27:28,320
exposure which is an identity thing in

766
00:27:28,320 --> 00:27:30,799
the cloud like s3 buckets allowing any

767
00:27:30,799 --> 00:27:32,840
identity to read

768
00:27:32,840 --> 00:27:35,520
them we can also look at this based on

769
00:27:35,520 --> 00:27:37,520
publicly disposed breaches and i did a

770
00:27:37,520 --> 00:27:39,520
whole talk on this so i'm self-citing

771
00:27:39,520 --> 00:27:42,480
here um but you can see that these risks

772
00:27:42,480 --> 00:27:44,399
align to the kill chains we flagged and

773
00:27:44,399 --> 00:27:46,320
aligned to this idea of identity and

774
00:27:46,320 --> 00:27:49,360
network perimeter credential abuse

775
00:27:49,360 --> 00:27:51,279
exposed resources and application

776
00:27:51,279 --> 00:27:54,000
vulnerabilities all show up here as well

777
00:27:54,000 --> 00:27:55,520
which gives us an indication we're on

778
00:27:55,520 --> 00:27:58,158
the right path

779
00:27:59,279 --> 00:28:00,480
so

780
00:28:00,480 --> 00:28:02,159
environments and collection of

781
00:28:02,159 --> 00:28:03,520
environments

782
00:28:03,520 --> 00:28:05,919
you need to figure out where your target

783
00:28:05,919 --> 00:28:07,520
state's going to be on that front as you

784
00:28:07,520 --> 00:28:09,600
go through this process so you can make

785
00:28:09,600 --> 00:28:12,000
fixes that support a target state are

786
00:28:12,000 --> 00:28:13,360
there accounts that you shouldn't be

787
00:28:13,360 --> 00:28:15,600
digging into fixing because they're not

788
00:28:15,600 --> 00:28:18,240
used and can be deprecated

789
00:28:18,240 --> 00:28:20,080
who is the business owner that you need

790
00:28:20,080 --> 00:28:21,840
to talk to before making potentially

791
00:28:21,840 --> 00:28:23,760
breaking changes

792
00:28:23,760 --> 00:28:26,480
and uh is there even a need for multiple

793
00:28:26,480 --> 00:28:28,000
organizations are you gonna start

794
00:28:28,000 --> 00:28:30,880
onboarding things

795
00:28:30,880 --> 00:28:32,960
look at your workloads check the oldest

796
00:28:32,960 --> 00:28:34,960
ones first they're the most likely to

797
00:28:34,960 --> 00:28:36,960
have problems because no one's touched

798
00:28:36,960 --> 00:28:38,480
them in a while

799
00:28:38,480 --> 00:28:41,120
often they predate certain controls and

800
00:28:41,120 --> 00:28:43,600
configurations and most cloud service

801
00:28:43,600 --> 00:28:45,840
providers don't apply those backwards by

802
00:28:45,840 --> 00:28:48,320
default

803
00:28:48,640 --> 00:28:49,840
and then we get to the identity

804
00:28:49,840 --> 00:28:51,440
perimeter and a lot of people have

805
00:28:51,440 --> 00:28:53,600
talked about kind of i am hardening so i

806
00:28:53,600 --> 00:28:56,159
don't want to spend too much time on it

807
00:28:56,159 --> 00:28:57,600
we're going to restate a lot of these

808
00:28:57,600 --> 00:28:59,520
things though specifically what's

809
00:28:59,520 --> 00:29:01,360
interesting for orienteering is the

810
00:29:01,360 --> 00:29:03,600
management plain access model how are

811
00:29:03,600 --> 00:29:06,240
users getting access to roles in this

812
00:29:06,240 --> 00:29:10,640
cloud is it sso are they using im users

813
00:29:10,640 --> 00:29:13,760
um is it tied to

814
00:29:13,760 --> 00:29:16,159
directory users are they federated is

815
00:29:16,159 --> 00:29:17,600
there an identity account in cross

816
00:29:17,600 --> 00:29:20,159
account roles are they uh accessing each

817
00:29:20,159 --> 00:29:22,399
account directly do they have access to

818
00:29:22,399 --> 00:29:24,720
all roles with the same permissions you

819
00:29:24,720 --> 00:29:26,720
need to start understanding this because

820
00:29:26,720 --> 00:29:28,640
that will give you a good idea of what's

821
00:29:28,640 --> 00:29:31,200
deviant and also the level of maturity

822
00:29:31,200 --> 00:29:33,360
if they're using raw i am users at this

823
00:29:33,360 --> 00:29:34,320
point

824
00:29:34,320 --> 00:29:36,159
you can suspect that there may be a need

825
00:29:36,159 --> 00:29:38,080
for a maturity push on the identity

826
00:29:38,080 --> 00:29:39,279
front

827
00:29:39,279 --> 00:29:41,679
and similarly ssh and server access

828
00:29:41,679 --> 00:29:43,919
model uh ideally there will be one

829
00:29:43,919 --> 00:29:46,159
standard here but often there are a few

830
00:29:46,159 --> 00:29:48,480
are they used in bastion hosts are they

831
00:29:48,480 --> 00:29:51,440
directly sshing into cloud servers which

832
00:29:51,440 --> 00:29:53,760
means they have to be internet exposed

833
00:29:53,760 --> 00:29:56,000
what sort of credentials are they using

834
00:29:56,000 --> 00:29:58,399
are they doing ssm or cloud native

835
00:29:58,399 --> 00:30:00,640
services to access these

836
00:30:00,640 --> 00:30:02,799
uh are they buying some sort of zero

837
00:30:02,799 --> 00:30:05,679
trust cloud native tooling

838
00:30:05,679 --> 00:30:07,520
this will tell you what is a

839
00:30:07,520 --> 00:30:09,360
misconfiguration and what is an

840
00:30:09,360 --> 00:30:11,840
architectural decision so if they

841
00:30:11,840 --> 00:30:14,480
actually if an organization says we

842
00:30:14,480 --> 00:30:18,000
directly ssh into servers

843
00:30:18,000 --> 00:30:19,440
they therefore need to expose those

844
00:30:19,440 --> 00:30:21,279
servers maybe there's a vpn maybe

845
00:30:21,279 --> 00:30:23,760
there's a bastion host but then you know

846
00:30:23,760 --> 00:30:25,919
that maybe those port 22 open to the

847
00:30:25,919 --> 00:30:27,120
world

848
00:30:27,120 --> 00:30:29,200
isn't quite as concerning as it would be

849
00:30:29,200 --> 00:30:31,600
otherwise still something to mature but

850
00:30:31,600 --> 00:30:34,240
not something that's necessarily a major

851
00:30:34,240 --> 00:30:37,520
exposure out of the gate

852
00:30:37,520 --> 00:30:39,200
and we get to i am

853
00:30:39,200 --> 00:30:41,039
there are a few things that are actually

854
00:30:41,039 --> 00:30:42,159
urgent

855
00:30:42,159 --> 00:30:42,960
um

856
00:30:42,960 --> 00:30:45,120
cleaning up the root user is essential

857
00:30:45,120 --> 00:30:46,960
understanding cross count trusts with a

858
00:30:46,960 --> 00:30:48,720
tool like cloud mapper will let you know

859
00:30:48,720 --> 00:30:50,480
if there's anything potentially

860
00:30:50,480 --> 00:30:52,799
nefarious or presenting a lot of risk

861
00:30:52,799 --> 00:30:55,120
with what sort of vendors or partners

862
00:30:55,120 --> 00:30:57,279
have access to your account

863
00:30:57,279 --> 00:30:59,200
and the im credential report is a great

864
00:30:59,200 --> 00:31:02,559
use of a great tool to find unused users

865
00:31:02,559 --> 00:31:06,080
or to find unused roles

866
00:31:08,000 --> 00:31:09,519
and then we talk about the identity

867
00:31:09,519 --> 00:31:12,080
perimeter

868
00:31:12,640 --> 00:31:14,320
and how we actually find this stuff so

869
00:31:14,320 --> 00:31:15,840
like i said the credential report is

870
00:31:15,840 --> 00:31:18,320
great trusted advisor security hub or

871
00:31:18,320 --> 00:31:21,120
aws config all have im findings trusted

872
00:31:21,120 --> 00:31:23,200
advisor there are some included in kind

873
00:31:23,200 --> 00:31:24,799
of the free tier

874
00:31:24,799 --> 00:31:27,200
and then open source tools a couple i

875
00:31:27,200 --> 00:31:29,440
want to call out that will uh help you

876
00:31:29,440 --> 00:31:32,480
prioritize by flagging the highest risks

877
00:31:32,480 --> 00:31:35,279
cloudsplaining from salesforce is really

878
00:31:35,279 --> 00:31:36,880
wonderful because it'll give you a good

879
00:31:36,880 --> 00:31:38,640
idea of the general hygiene with the

880
00:31:38,640 --> 00:31:40,240
number of findings

881
00:31:40,240 --> 00:31:42,240
but specifically it calls out privilege

882
00:31:42,240 --> 00:31:44,720
escalation and it calls out what users

883
00:31:44,720 --> 00:31:47,360
and roles have the ability to expose

884
00:31:47,360 --> 00:31:52,158
data leak data modify infrastructure

885
00:31:52,559 --> 00:31:54,480
eric's actually speaking at

886
00:31:54,480 --> 00:31:56,640
blackhat or defcon about pmapper he just

887
00:31:56,640 --> 00:31:58,480
released a new version it's awesome it

888
00:31:58,480 --> 00:32:01,360
will do transitive access and talk about

889
00:32:01,360 --> 00:32:03,679
highly privileged users so no longer

890
00:32:03,679 --> 00:32:06,159
it's just look at who has admin it's

891
00:32:06,159 --> 00:32:08,399
look at what possible roles can be

892
00:32:08,399 --> 00:32:10,480
assumed for someone to get from their

893
00:32:10,480 --> 00:32:13,200
default permission set to admin as well

894
00:32:13,200 --> 00:32:15,760
as privilege escalation vectors and so

895
00:32:15,760 --> 00:32:17,760
look at these tools but you're not going

896
00:32:17,760 --> 00:32:19,919
to fix the universe of im permissions

897
00:32:19,919 --> 00:32:21,600
nor should you well you're just finding

898
00:32:21,600 --> 00:32:23,440
your way and killing the most important

899
00:32:23,440 --> 00:32:25,200
things instead

900
00:32:25,200 --> 00:32:27,440
you should focus on

901
00:32:27,440 --> 00:32:28,880
high risk that are immediately

902
00:32:28,880 --> 00:32:30,559
exploitable so

903
00:32:30,559 --> 00:32:32,880
too many admins is a bad problem if you

904
00:32:32,880 --> 00:32:35,200
can kill a few of them great privilege

905
00:32:35,200 --> 00:32:37,440
escalation vectors on a standard

906
00:32:37,440 --> 00:32:39,279
employee role are worth finishing

907
00:32:39,279 --> 00:32:41,039
immediately

908
00:32:41,039 --> 00:32:43,279
over privileging of your existing admin

909
00:32:43,279 --> 00:32:45,600
users is probably not a day one job

910
00:32:45,600 --> 00:32:47,279
those are already trusted users and

911
00:32:47,279 --> 00:32:50,799
there are more important things to fix

912
00:32:52,240 --> 00:32:53,039
so

913
00:32:53,039 --> 00:32:54,720
that's the speed round of the identity

914
00:32:54,720 --> 00:32:57,039
parameter then you go into the network

915
00:32:57,039 --> 00:32:58,960
perimeter you need to find public

916
00:32:58,960 --> 00:33:02,559
resources uh github has a collection aws

917
00:33:02,559 --> 00:33:05,440
exposable resources i didn't link to

918
00:33:05,440 --> 00:33:06,480
here

919
00:33:06,480 --> 00:33:09,519
but that is an excellent

920
00:33:09,519 --> 00:33:11,039
way for you to

921
00:33:11,039 --> 00:33:13,840
um tell what the like 42 possible

922
00:33:13,840 --> 00:33:16,240
resources that can be exposed

923
00:33:16,240 --> 00:33:18,559
here's where you dig into your audit

924
00:33:18,559 --> 00:33:20,240
findings right we talked about using

925
00:33:20,240 --> 00:33:22,799
audit reports to find resources

926
00:33:22,799 --> 00:33:25,279
there are a few key findings to look out

927
00:33:25,279 --> 00:33:27,039
for um

928
00:33:27,039 --> 00:33:29,360
anything that's open to the universe is

929
00:33:29,360 --> 00:33:31,200
worth a second glance to make sure it's

930
00:33:31,200 --> 00:33:32,960
intentional

931
00:33:32,960 --> 00:33:36,480
anything that is

932
00:33:36,480 --> 00:33:38,880
yeah publicly exposed

933
00:33:38,880 --> 00:33:41,200
um you need to make sure the workload is

934
00:33:41,200 --> 00:33:43,120
intended to be publicly exposed scan

935
00:33:43,120 --> 00:33:44,799
findings will tell you trust advisor

936
00:33:44,799 --> 00:33:46,960
would tell you this can look like wild

937
00:33:46,960 --> 00:33:48,799
card security groups

938
00:33:48,799 --> 00:33:51,919
um also check all the launch wizard

939
00:33:51,919 --> 00:33:53,600
security groups because those generally

940
00:33:53,600 --> 00:33:55,039
indicate something was made through the

941
00:33:55,039 --> 00:33:57,279
aws console

942
00:33:57,279 --> 00:33:58,960
which is

943
00:33:58,960 --> 00:34:00,960
a sign that things may not be quite as

944
00:34:00,960 --> 00:34:04,600
governed or managed

945
00:34:06,080 --> 00:34:08,560
i said you want to dig into the exposed

946
00:34:08,560 --> 00:34:10,079
resources

947
00:34:10,079 --> 00:34:11,679
um

948
00:34:11,679 --> 00:34:13,440
and this includes hosted applications

949
00:34:13,440 --> 00:34:14,879
and services

950
00:34:14,879 --> 00:34:16,639
uh so

951
00:34:16,639 --> 00:34:18,879
this is somewhere you can really easily

952
00:34:18,879 --> 00:34:21,119
rabbit hole and i want to be clear this

953
00:34:21,119 --> 00:34:23,440
is no deeper than a vulnerability scan

954
00:34:23,440 --> 00:34:25,280
but can't be neglected

955
00:34:25,280 --> 00:34:27,760
find all the exposed ports all the

956
00:34:27,760 --> 00:34:30,159
exposed services and do a quick check

957
00:34:30,159 --> 00:34:31,918
for out-of-date services known

958
00:34:31,918 --> 00:34:33,359
vulnerabilities that might be

959
00:34:33,359 --> 00:34:34,719
exploitable

960
00:34:34,719 --> 00:34:36,719
as we saw application vulnerabilities

961
00:34:36,719 --> 00:34:38,719
are a source of compromise

962
00:34:38,719 --> 00:34:40,800
look at any unauthenticated service and

963
00:34:40,800 --> 00:34:43,199
make sure it's intended to be public and

964
00:34:43,199 --> 00:34:44,719
unauthenticated

965
00:34:44,719 --> 00:34:46,000
and check to make sure you're not

966
00:34:46,000 --> 00:34:47,599
putting things like configuration

967
00:34:47,599 --> 00:34:49,359
management or jenkins out on the

968
00:34:49,359 --> 00:34:51,040
internet these are the ways the

969
00:34:51,040 --> 00:34:53,119
companies get hacked in the real world

970
00:34:53,119 --> 00:34:54,719
and that's why you need to prioritize

971
00:34:54,719 --> 00:34:57,359
fixing them

972
00:34:57,359 --> 00:34:59,440
there are other concerns less actionable

973
00:34:59,440 --> 00:35:01,760
or less impactful but

974
00:35:01,760 --> 00:35:04,079
i want to be clear they're considered

975
00:35:04,079 --> 00:35:05,520
but put aside

976
00:35:05,520 --> 00:35:07,440
exposed secrets there are a million ways

977
00:35:07,440 --> 00:35:09,119
to expose secrets but if you look at

978
00:35:09,119 --> 00:35:10,560
this list

979
00:35:10,560 --> 00:35:12,960
almost all of them are either exposed

980
00:35:12,960 --> 00:35:14,720
outside the cloud environment where you

981
00:35:14,720 --> 00:35:16,640
probably don't have visibility

982
00:35:16,640 --> 00:35:19,040
or they require someone to already have

983
00:35:19,040 --> 00:35:21,280
authenticated access to exploit and

984
00:35:21,280 --> 00:35:23,119
privilege escalation

985
00:35:23,119 --> 00:35:24,960
from authenticated access is an

986
00:35:24,960 --> 00:35:27,440
important day three responsibility but

987
00:35:27,440 --> 00:35:30,480
not day one

988
00:35:30,480 --> 00:35:32,400
find the secrets management pattern and

989
00:35:32,400 --> 00:35:35,359
look at the supply chain um

990
00:35:35,359 --> 00:35:37,680
but fixing vendor relationships isn't

991
00:35:37,680 --> 00:35:39,839
something you can do as part of your

992
00:35:39,839 --> 00:35:41,520
getting your feet wet

993
00:35:41,520 --> 00:35:44,960
and so just make a note and put it aside

994
00:35:44,960 --> 00:35:46,880
and this is my moment for a very short

995
00:35:46,880 --> 00:35:49,440
compliance interlude um

996
00:35:49,440 --> 00:35:51,280
i'm not talking about compliance here

997
00:35:51,280 --> 00:35:53,599
there are compliance professionals i

998
00:35:53,599 --> 00:35:55,040
just want to say if you're working in

999
00:35:55,040 --> 00:35:58,320
regulated industry i'm very sorry you're

1000
00:35:58,320 --> 00:35:59,680
not going to be able to follow a lot of

1001
00:35:59,680 --> 00:36:01,040
this prioritization because you're going

1002
00:36:01,040 --> 00:36:03,200
to have to focus on compliance impacting

1003
00:36:03,200 --> 00:36:07,200
controls documented exceptions for drift

1004
00:36:07,200 --> 00:36:09,200
compensating controls where you can't

1005
00:36:09,200 --> 00:36:11,280
get things enabled

1006
00:36:11,280 --> 00:36:12,720
and you're not going to be able to avoid

1007
00:36:12,720 --> 00:36:15,839
fiddling with encryption

1008
00:36:16,400 --> 00:36:17,760
and a lot of what we're talking about

1009
00:36:17,760 --> 00:36:19,760
here is misconfiguration

1010
00:36:19,760 --> 00:36:21,760
um this uh

1011
00:36:21,760 --> 00:36:23,440
is a gartner report that says

1012
00:36:23,440 --> 00:36:25,839
misconfiguration is the root of all evil

1013
00:36:25,839 --> 00:36:27,280
um

1014
00:36:27,280 --> 00:36:29,040
when you're orienting yourself a new

1015
00:36:29,040 --> 00:36:30,560
environment how do you know what's a

1016
00:36:30,560 --> 00:36:32,240
misconfiguration

1017
00:36:32,240 --> 00:36:33,200
how are you supposed to know the

1018
00:36:33,200 --> 00:36:35,359
difference between an s3 bucket called

1019
00:36:35,359 --> 00:36:37,440
application files and an s3 bucket

1020
00:36:37,440 --> 00:36:40,880
called project meteor right and so this

1021
00:36:40,880 --> 00:36:42,640
is where it becomes really difficult to

1022
00:36:42,640 --> 00:36:44,160
dig through the data and you should look

1023
00:36:44,160 --> 00:36:46,560
at documentation

1024
00:36:46,560 --> 00:36:48,240
there's a common

1025
00:36:48,240 --> 00:36:51,760
flag when you're looking at securing aws

1026
00:36:51,760 --> 00:36:53,839
environments that says s3 buckets being

1027
00:36:53,839 --> 00:36:55,440
public is the root of a lot of

1028
00:36:55,440 --> 00:36:57,599
compromise and that's not false

1029
00:36:57,599 --> 00:36:59,280
but in most environments they're going

1030
00:36:59,280 --> 00:37:01,520
to be intentionally public s3 buckets

1031
00:37:01,520 --> 00:37:03,839
for static assets and you need to be

1032
00:37:03,839 --> 00:37:05,680
really thoughtful about efficiently

1033
00:37:05,680 --> 00:37:08,160
figuring out which are intended to be

1034
00:37:08,160 --> 00:37:10,160
public and which are risky so that's

1035
00:37:10,160 --> 00:37:11,599
where you look at tags that's where you

1036
00:37:11,599 --> 00:37:13,200
look at documentation that's where you

1037
00:37:13,200 --> 00:37:15,119
look at the classes of data and need to

1038
00:37:15,119 --> 00:37:18,480
know what the crown jewels are

1039
00:37:20,839 --> 00:37:22,800
um so

1040
00:37:22,800 --> 00:37:24,560
miss configurations

1041
00:37:24,560 --> 00:37:25,599
hey

1042
00:37:25,599 --> 00:37:27,440
hello a few minutes left

1043
00:37:27,440 --> 00:37:30,160
awesome perfect i think we're right on

1044
00:37:30,160 --> 00:37:32,640
time misconfigurations are really an

1045
00:37:32,640 --> 00:37:34,720
argument about defense in depth and i am

1046
00:37:34,720 --> 00:37:37,200
by no means against it defense in depth

1047
00:37:37,200 --> 00:37:39,040
is a core security principle that you

1048
00:37:39,040 --> 00:37:40,960
should be applying to your environment

1049
00:37:40,960 --> 00:37:43,440
however in the short term

1050
00:37:43,440 --> 00:37:45,839
a fixation on defense in depth is

1051
00:37:45,839 --> 00:37:48,079
leaving gaps in your controls it's

1052
00:37:48,079 --> 00:37:50,160
better to have your first line of

1053
00:37:50,160 --> 00:37:52,160
defense configured before you invest in

1054
00:37:52,160 --> 00:37:55,200
defense in depth

1055
00:37:56,079 --> 00:37:58,079
and encryption is the canonical example

1056
00:37:58,079 --> 00:38:00,480
here i'm by no means recommending that

1057
00:38:00,480 --> 00:38:02,560
encryption is useless entirely or that

1058
00:38:02,560 --> 00:38:04,000
you shouldn't leverage encryptions

1059
00:38:04,000 --> 00:38:05,359
available

1060
00:38:05,359 --> 00:38:08,400
but i am saying that if you can avoid

1061
00:38:08,400 --> 00:38:10,800
encryption if you're not regulated it's

1062
00:38:10,800 --> 00:38:12,800
probably not your top priority to fight

1063
00:38:12,800 --> 00:38:15,680
getting old resources onto

1064
00:38:15,680 --> 00:38:19,040
ebs encryption for example uh it's still

1065
00:38:19,040 --> 00:38:21,040
useful and you definitely should turn on

1066
00:38:21,040 --> 00:38:23,760
the default encryption going forward but

1067
00:38:23,760 --> 00:38:27,359
it's probably not your top priority

1068
00:38:28,480 --> 00:38:30,800
how do you prioritize misconfigurations

1069
00:38:30,800 --> 00:38:32,560
there are a lot

1070
00:38:32,560 --> 00:38:34,320
of controls and a lot of

1071
00:38:34,320 --> 00:38:36,960
misconfigurations aws foundational

1072
00:38:36,960 --> 00:38:40,000
security best practices has grown in

1073
00:38:40,000 --> 00:38:43,200
size from 31 to 141

1074
00:38:43,200 --> 00:38:45,119
the ones that matter we go back to our

1075
00:38:45,119 --> 00:38:47,440
identity and network perimeter exposed

1076
00:38:47,440 --> 00:38:50,480
management ports exposed resources

1077
00:38:50,480 --> 00:38:52,320
lack of authentication are the things

1078
00:38:52,320 --> 00:38:54,960
that'll bite you immediately

1079
00:38:54,960 --> 00:38:56,400
and i'm going to use my last couple

1080
00:38:56,400 --> 00:38:58,320
minutes to talk about where you go from

1081
00:38:58,320 --> 00:38:59,520
here

1082
00:38:59,520 --> 00:39:01,680
blanket aws hardening always turn on

1083
00:39:01,680 --> 00:39:04,160
guard duty always turn on cloudtrail

1084
00:39:04,160 --> 00:39:06,560
backup and centralize cloudtrail im

1085
00:39:06,560 --> 00:39:08,960
access analyzer security visibility to

1086
00:39:08,960 --> 00:39:11,520
all accounts s3 block public access

1087
00:39:11,520 --> 00:39:12,960
other people have mentioned these and

1088
00:39:12,960 --> 00:39:14,880
it's because they're a really good idea

1089
00:39:14,880 --> 00:39:16,400
and there are very few environments

1090
00:39:16,400 --> 00:39:18,960
where they're not applicable

1091
00:39:18,960 --> 00:39:20,720
what does fixing things look like it's

1092
00:39:20,720 --> 00:39:23,440
an exercise in relationships this is a

1093
00:39:23,440 --> 00:39:25,839
really kind of canonical book on how you

1094
00:39:25,839 --> 00:39:27,760
build a security program

1095
00:39:27,760 --> 00:39:29,680
it says seven steps and this is true

1096
00:39:29,680 --> 00:39:31,359
when you're orienteering once you have

1097
00:39:31,359 --> 00:39:33,040
all this data and you know it needs to

1098
00:39:33,040 --> 00:39:34,560
be fixed and maybe where the

1099
00:39:34,560 --> 00:39:36,480
architecture needs to go

1100
00:39:36,480 --> 00:39:39,520
cultivate relationships get alignment

1101
00:39:39,520 --> 00:39:42,800
focus on key security domains get buy-in

1102
00:39:42,800 --> 00:39:44,560
from other teams through evangelism and

1103
00:39:44,560 --> 00:39:46,800
invest in convincing and working with

1104
00:39:46,800 --> 00:39:48,160
other teams

1105
00:39:48,160 --> 00:39:51,359
make business owners own security in

1106
00:39:51,359 --> 00:39:52,800
their areas

1107
00:39:52,800 --> 00:39:54,240
build out a team and measure what

1108
00:39:54,240 --> 00:39:55,520
matters

1109
00:39:55,520 --> 00:39:57,760
as you can see this is a whole book but

1110
00:39:57,760 --> 00:39:59,200
i want to say that you're not going to

1111
00:39:59,200 --> 00:40:00,800
fix all these things alone so you need

1112
00:40:00,800 --> 00:40:03,200
to figure out what your priorities are

1113
00:40:03,200 --> 00:40:04,640
and how you're going to convince folks

1114
00:40:04,640 --> 00:40:07,440
to buy in on those fixes

1115
00:40:07,440 --> 00:40:09,280
fixing things otherwise is just going to

1116
00:40:09,280 --> 00:40:11,359
look like whack-a-mole um it's a

1117
00:40:11,359 --> 00:40:13,119
marathon it's not a sprint you're not

1118
00:40:13,119 --> 00:40:14,800
going to get everything up to code

1119
00:40:14,800 --> 00:40:17,040
immediately or in the near future

1120
00:40:17,040 --> 00:40:19,119
i recommend approach of governance with

1121
00:40:19,119 --> 00:40:21,440
exceptions in the long term so set a

1122
00:40:21,440 --> 00:40:23,839
best practice standard and just track

1123
00:40:23,839 --> 00:40:26,000
drift against it and report on it

1124
00:40:26,000 --> 00:40:28,240
measure what matters and slowly buy down

1125
00:40:28,240 --> 00:40:30,160
that security debt

1126
00:40:30,160 --> 00:40:32,160
make sure you're explicitly tracking

1127
00:40:32,160 --> 00:40:35,920
these legacy resources and drifts

1128
00:40:35,920 --> 00:40:37,839
there are a lot of maturity models cloud

1129
00:40:37,839 --> 00:40:40,560
security maturity model is one option

1130
00:40:40,560 --> 00:40:43,599
marco lancini has the road map at cloud

1131
00:40:43,599 --> 00:40:46,079
sec docks that i recommend look at these

1132
00:40:46,079 --> 00:40:49,520
pick the one that fits your environment

1133
00:40:49,520 --> 00:40:51,280
if you want to learn more

1134
00:40:51,280 --> 00:40:53,119
the slides will be up after this talk

1135
00:40:53,119 --> 00:40:55,200
and you can dig in here cloud security

1136
00:40:55,200 --> 00:40:57,760
roadmap is great matt fuller's so you

1137
00:40:57,760 --> 00:41:00,319
inherit an aws count is a different take

1138
00:41:00,319 --> 00:41:02,560
on a lot of the same content

1139
00:41:02,560 --> 00:41:06,240
and other resources are here as well

1140
00:41:06,240 --> 00:41:08,319
so i don't think we actually have time

1141
00:41:08,319 --> 00:41:10,800
for questions necessarily but thank you

1142
00:41:10,800 --> 00:41:12,880
thanks the organizers slides will be up

1143
00:41:12,880 --> 00:41:17,040
at that link come work with me

