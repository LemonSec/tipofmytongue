1
00:00:00,000 --> 00:00:06,000
So, you'll hear people refer to
me as Anch, Unch, Inch. I
pronounce it Anch. Technically

2
00:00:10,250 --> 00:00:16,250
it's a form of Unc but I'm Anch,
and you guys are here to listen
to me ramble on about man in the

3
00:00:20,458 --> 00:00:26,208
middle attacks or monkey in the
middle attacks. And we'll, we'll
play some traffic it will be a

4
00:00:26,208 --> 00:00:32,208
lot of fun. Uh, so, just a
little bit about me. This is the
slide that I normally introduce

5
00:00:34,875 --> 00:00:40,875
my wife because she's here but
she's not here. That's her on my
way. I'm sure you're going to be

6
00:00:43,625 --> 00:00:51,167
four minutes late. I'll
introduce you guys when she gets
here. I have a lot of experience

7
00:00:51,167 --> 00:00:57,167
in penetration testing and
hacking and funny story -- funny
story time since I have time. A

8
00:01:00,458 --> 00:01:07,250
penetration tester, the job
title penetration tester is the
best, best title to have at a

9
00:01:07,250 --> 00:01:13,792
party. [Laughter] People walk up
to you, what do you do? I'm a
penetration tester. And they

10
00:01:13,792 --> 00:01:19,792
look at you funny like, Huh?
[Laughter] And they're like, so,
what do you do exactly? They're

11
00:01:24,417 --> 00:01:28,750
expecting something like, well,
I test the lighting in porn. But
then I explain to them what I

12
00:01:28,750 --> 00:01:34,167
do, and they're like, oh, that's
actually really fucking boring.
[Laughter] So, uh yeah. I have

13
00:01:34,167 --> 00:01:40,167
got over ten years experience
doing this. I like to do this,
and I like to teach people how

14
00:01:45,792 --> 00:01:49,792
to do it. I'll take a little bit
of a survey, how many of you
guys are first year DEF CON,

15
00:01:49,792 --> 00:01:55,333
first time. Wow, I got a room
full of noobs, that's awesome.
By the way when I say noob it's

16
00:01:55,333 --> 00:02:01,792
not an insult, honest to God not
an insult it is a compliment.
I'm a noob at things, I can't

17
00:02:01,792 --> 00:02:07,417
reverse engineer for shit I'm
teaching myself to do it. I'm
total noob at reverse

18
00:02:07,417 --> 00:02:12,208
engineering but I'm really,
really good at the other stuff.
So, being a noob is not a

19
00:02:12,208 --> 00:02:16,042
problem it's actually really
awesome. How many people in here
are penetration testers right

20
00:02:16,042 --> 00:02:22,042
now? Ok, how many people in here
want to be penetration testers?
Good. That's awesome. That's an

21
00:02:25,625 --> 00:02:31,625
admirable goal. How many people
-- How many people actively
exploit boxes? As a penetration

22
00:02:38,250 --> 00:02:44,250
tester? I got one. I got two.
Charge, I didn't save those
seats for you. [Laughter]

23
00:02:46,333 --> 00:02:52,333
Actually really I didn't. My
wife is coming down so just save
her a seat she's got one more

24
00:02:55,292 --> 00:03:01,292
with her she'll probably sit on
the floor it will be ok. Well,
You know it's important that I

25
00:03:04,292 --> 00:03:10,292
take care of my wife. So, yeah,
so uh, that's a little bit about
me. Boneheadsanom is my Twitter,

26
00:03:12,333 --> 00:03:18,333
tweet me if you want me, it's
all good. Did that not actually
cycle? There we go. So, why do

27
00:03:23,125 --> 00:03:31,000
we play in traffic? Traffic is
really, really interesting. By
the way I put funny stuff on my

28
00:03:31,000 --> 00:03:37,000
slide so feel free to laugh.
Don't be like -- It's quiet and
stuff. You guys are the quietest

29
00:03:39,708 --> 00:03:43,167
audience I've ever had, When I
walked down here and I asked you
guys if you were in line for the

30
00:03:43,167 --> 00:03:49,167
talk you were like -- anyway.
Traffic is interesting stuff.
Yeah, thank you. It gives us

31
00:03:53,750 --> 00:03:57,958
insight on to how things work.
When you're looking for
something on the network that's

32
00:03:57,958 --> 00:04:04,667
misbehaving the first place I go
is the traffic. Oftentimes it's
something simple like a miss

33
00:04:04,667 --> 00:04:11,500
configured switchport or I'm in
the wrong VLAN or I'm pushing
things to the wrong address but

34
00:04:11,500 --> 00:04:16,000
the traffic will tell me that.
And if you know how to read
traffic and you know how to look

35
00:04:16,000 --> 00:04:19,500
at it and you know how to
capture it you can actually do
some pretty cool stuff with it.

36
00:04:19,500 --> 00:04:25,500
It allows us to gather
information on a target, really
valuable information on a target

37
00:04:29,542 --> 00:04:36,250
actually. Tells us the source
and destination, Mac addresses,
tells us what ports the traffic

38
00:04:36,250 --> 00:04:42,250
is -- the target is talking on,
so what ports are open.
Sometimes you can't get a port

39
00:04:44,667 --> 00:04:48,833
scan because you got a fire wall
and it's just sitting there and
it's like empty. You know you

40
00:04:48,833 --> 00:04:53,583
run M Map and you're like, it
comes back, nothing. I know that
host is alive so if I can get

41
00:04:53,583 --> 00:04:58,458
the traffic I can tell what
ports are open on it and maybe I
can spoof the traffic in order

42
00:04:58,458 --> 00:05:02,917
to get in to that host. There's
a lot of fun stuff you can do
with traffic. And it allows us

43
00:05:02,917 --> 00:05:07,833
to change things as they go by,
I know I get in to some fun
stuff you can do. You can really

44
00:05:07,833 --> 00:05:15,542
prank your friends with some of
this especially when you're at
home your friends get on the

45
00:05:15,542 --> 00:05:21,542
Internet they're like, why --
why are, why is all the images
upside down? We get -- Hi!

46
00:05:25,833 --> 00:05:31,833
Everybody, this is my wife.
[Applause] Yeah. I saved you
seats. And uh, yeah. Have a

47
00:05:39,417 --> 00:05:46,750
seat. She supports me in
everything that I do and I love
her very, very much. And so she

48
00:05:46,750 --> 00:05:52,750
deserves a great big hand.
[Applause] So, being able to
play in traffic allows us to

49
00:05:59,625 --> 00:06:04,000
change things as they go by and
make modifications to stuff that
may or may not allow us to get

50
00:06:04,000 --> 00:06:09,542
in to things that we're not
supposed to. And that kind of --
that kind of power is great

51
00:06:09,542 --> 00:06:15,542
because people aren't looking
for it. IDS looks for it a
little bit but if you're smart

52
00:06:17,667 --> 00:06:23,667
about it you can actually bypass
IDS altogether. And by like, oh,
yeah, that's the traffic that is

53
00:06:26,292 --> 00:06:33,000
supposed to be there. Good I'm
actually getting you --
chuckles. That's good. Most

54
00:06:33,000 --> 00:06:40,625
importantly it allows us to
prank our friends. And honestly
allowing us to prank our

55
00:06:40,625 --> 00:06:48,458
friends, we have to have fun
with this job. We can't just --
we can't just -- just do the

56
00:06:48,458 --> 00:06:53,292
work to do the work. If it's not
interesting to you, you are in
the wrong line of work. You

57
00:06:53,292 --> 00:06:59,792
really are. What was that? We
have to laugh. It is all about
the roles, you'r right. We have

58
00:06:59,792 --> 00:07:07,333
to laugh, we have to have fun.
And you have to be interested in
doing this stuff so you'll

59
00:07:07,333 --> 00:07:13,333
actually learn it. Otherwise you
go to work for 10 or 15 hours
out of the day and you come home

60
00:07:16,333 --> 00:07:22,292
and you get stagnant because
you're not learning new stuff.
You're going to -- you're

61
00:07:22,292 --> 00:07:29,667
applying what you already know
but not actually picking it up.
And if you love it, you'll go

62
00:07:29,667 --> 00:07:37,417
home and you'll read about it or
you'll play with it or you, you
know, you'll mess with your

63
00:07:37,417 --> 00:07:42,542
friends, your neighbors.
[Laughter] Interesting story
about my neighbors. I actually

64
00:07:42,542 --> 00:07:49,500
-- I did something for Aruba and
they were kind enough to give me
an access point to play with. It

65
00:07:49,500 --> 00:07:56,167
was one of their new 80211AC
access points and I set it up at
home and I'd been having

66
00:07:56,167 --> 00:08:00,333
problems with interference on
stuff and the Aruba access point
comes up and it goes, oh I'm

67
00:08:00,333 --> 00:08:06,333
seeing interference. Let me take
care of that for you. All of a
sudden all of my neighbors

68
00:08:10,500 --> 00:08:14,458
access points go, oh I'm going
to get quieter and turn down and
now I'm the king of the

69
00:08:14,458 --> 00:08:20,458
mountain, pretty awesome. All
right. How do we get in to the
traffic that we want to play

70
00:08:24,417 --> 00:08:31,667
with. There's a lot of different
ways to do it. And I don't have
my presenter notes up here, so

71
00:08:31,667 --> 00:08:39,292
just remember to always wear a
helmet. You want to -- you don't
want to really mess anything up

72
00:08:39,292 --> 00:08:44,167
so you got to be real careful.
Playing with traffic, playing
with network traffic in general

73
00:08:44,167 --> 00:08:47,875
you're not going to permanently
screw something up but it can
definitely have unintended

74
00:08:47,875 --> 00:08:55,792
consequences, I'll get in to
those here in a little bit. When
you mess with things, the

75
00:08:55,792 --> 00:08:59,458
systems have checksums and ways
to figure out that you're
actually messing with them and

76
00:08:59,458 --> 00:09:05,458
they'll toss it out. You can be
like, oh, I got the transparent
proxy in place I'm trying to

77
00:09:08,083 --> 00:09:14,083
create the all important
Internet. And it's replacing
these images but it's not -- the

78
00:09:17,125 --> 00:09:19,125
images aren't coming up and it's
probably because you're not
injecting them right. We'll talk

79
00:09:19,125 --> 00:09:26,333
about that a little bit later.
It can be dangerous. You can get
caught. It's a noisy thing. If

80
00:09:26,333 --> 00:09:31,292
you get caught and you're not --
well if you get caught and you
don't have permission to play in

81
00:09:31,292 --> 00:09:36,958
traffic, by the way, get
permission first. No means no.
If you don't have permission and

82
00:09:36,958 --> 00:09:44,125
get caught, the consequences can
be dire, you can get arrested
and go to jail. That's never

83
00:09:44,125 --> 00:09:50,125
fun. But, it can be dangerous,
it can mess stuff up. It can
mess your traffic up on your

84
00:09:52,250 --> 00:09:56,292
network, I've done that a couple
of times. My wife calls me, the
Internet is not working. I'm in

85
00:09:56,292 --> 00:10:02,292
Oklahoma I'm like, sorry, I left
that on and I didn't mean to. It
does really mess with the

86
00:10:05,542 --> 00:10:11,542
network especially some of the
tools that we'll talk about here
in a little bit. It can take

87
00:10:14,542 --> 00:10:20,542
entire networks down and like
big networks. Or entire segments
of a network down. When you're

88
00:10:22,750 --> 00:10:28,167
impersonating a gateway or
directing traffic to your box
and that gateway is normally

89
00:10:28,167 --> 00:10:33,083
handling 10 gigs of traffic and
your box has a 100 gig card in
it, it tends to hurt a little

90
00:10:33,083 --> 00:10:39,625
bit. It can really, really mess
with the networks. And you can
really be -- you can really be

91
00:10:39,625 --> 00:10:45,542
-- put yourself in a position
where you are taking something
critical off line. And as a

92
00:10:45,542 --> 00:10:51,583
tester we never really want to
do that. We tend to get smacked
for it and it makes our jobs

93
00:10:51,583 --> 00:10:57,583
even more difficult. And like I
just alluded to your host might
not be fast enough. You might

94
00:10:59,667 --> 00:11:06,000
not be able to process all the
traffic that you're getting.
You're going to drink from a

95
00:11:06,000 --> 00:11:12,000
fire hose and when you do that
it tends to fill your mouth
pretty fast. And switches will

96
00:11:14,625 --> 00:11:20,625
alert on things, if you have a
client that is particularly
intelligent and has their

97
00:11:23,583 --> 00:11:29,000
monitoring and alerting set up
it will throw an alert and they
will catch you and they'll be

98
00:11:29,000 --> 00:11:37,000
like, ha. And you'll be like,
okay, you caught me. And IDS
usually does catch it. There are

99
00:11:37,000 --> 00:11:42,583
ways to get around that and
we'll talk about that in a
little bit, but it usually does

100
00:11:42,583 --> 00:11:48,583
flag on things when they start
to change. Your IDS is set up to
look for normal and you're

101
00:11:52,792 --> 00:12:00,292
creating something abnormal or,
you know, yeah -- looking for
somebody abnormal and you're

102
00:12:00,292 --> 00:12:06,292
creating something that is not
kosher on the network. And so it
will usually catch it. For those

103
00:12:11,958 --> 00:12:17,958
of you that can't read this, it
says a giant tool and he's
carrying a wrench. So we're

104
00:12:20,708 --> 00:12:26,208
going to have a little
discussion about tools. And how
to use them and what they're for

105
00:12:26,208 --> 00:12:32,875
and the best ones to use. I'm
going to go through the stuff
that I normally use and normally

106
00:12:32,875 --> 00:12:38,833
put on a network in order to get
in to traffic. And tell you
there are pitfalls and the goods

107
00:12:38,833 --> 00:12:44,750
and the bads. So we're going to
talk a little bit about arp
spoofing and when to use it

108
00:12:44,750 --> 00:12:50,750
which is almost never. And we're
going to talk a little bit about
DNS poisoning and spoofing and

109
00:12:52,875 --> 00:12:58,583
when to use it, which is a lot
because it's a whole lot of fun.
We're going to talk about DHCP

110
00:12:58,583 --> 00:13:04,583
snooping or spoofing as well,
basically telling -- answering
faster than the DHCP server for

111
00:13:06,917 --> 00:13:13,167
an address and making yourself a
gateway. We're going to talk
about transparent proxies which

112
00:13:13,167 --> 00:13:19,917
is where all the pranks come.
Those are the most fun. And
those transparent proxies are

113
00:13:19,917 --> 00:13:25,917
what you use after you get the
traffic to your machine.
[Laughter] I'm glad that got a

114
00:13:29,750 --> 00:13:35,667
laugh. Because I have run in to
so many people that are like,
yeah, I use Kali Linux I'm a

115
00:13:35,667 --> 00:13:41,375
hacker. No. That doesn't make
you a hacker, I'm sorry. Let's
talk about the most dangerous

116
00:13:41,375 --> 00:13:47,375
option, arp spoofing and arp
poisoning. The tool is Arp spoof
and it's provided as part of the

117
00:13:50,458 --> 00:13:55,542
Dsniff suite of tools. If you
haven't got Dsniff installed,
install it. There's a lot of

118
00:13:55,542 --> 00:14:01,542
really fun stuff you can do with
the Dsniff suite. You can Arp
spoof, you can DNS spoof, you

119
00:14:03,833 --> 00:14:09,833
can do traffic discovery you can
do a lot of stuff with it. It's
really, really, really cool. It

120
00:14:16,125 --> 00:14:21,250
is easily, easily, easily
detected on the network. So
basically what you're doing with

121
00:14:21,250 --> 00:14:28,917
an Arp spoof is you're answering
-- everybody know what Arp is?
Hold your hand up. All right.

122
00:14:28,917 --> 00:14:34,917
For those of you that don't talk
to your neighbor afterwards they
will explain it to you, just

123
00:14:37,000 --> 00:14:42,292
kidding. Basically an Arp is a
way to tie a Mac address to an
IP address and a switch holds

124
00:14:42,292 --> 00:14:47,542
the table of these ties that's
best way that it can route the
traffic, the layer 2 traffic, in

125
00:14:47,542 --> 00:14:52,542
the switch. From port to port.
So what you're doing when you
ARP spoof, is you're saying, no,

126
00:14:52,542 --> 00:14:59,500
I'm really the gateway address
it's me, you're flooding the
switch with answers to Arp

127
00:14:59,500 --> 00:15:03,417
requests for whose got the
gateway, whose got the gateway,
whose got the gateway. And

128
00:15:03,417 --> 00:15:08,875
you're like, me. Me. You know,
it's me. And basically you're
injecting yourself in the middle

129
00:15:08,875 --> 00:15:13,875
and becoming a gateway. Now, if
you don't have your machine
configured right what is going

130
00:15:13,875 --> 00:15:16,833
to happen is you're going to get
all the traffic that's going to
have nowhere to go and whole

131
00:15:16,833 --> 00:15:22,875
network is going to come
crashing down and you're going
to be like, um, Oops. When your

132
00:15:22,875 --> 00:15:30,833
machine finally crashes because
you're drinking from that fire
hose the network will go back to

133
00:15:30,833 --> 00:15:38,292
normal. But, until then you just
brought your client down and
that's never a good thing. But

134
00:15:38,292 --> 00:15:45,375
for the most part IDS will catch
this as you're doing a
gratuitous Arp, IDS will go, no,

135
00:15:45,375 --> 00:15:51,375
he's not really the gateway. He
can like to think he is but he's
not. And it will catch it. It's

136
00:15:54,500 --> 00:16:01,458
one of these things that lights
IDS up like a Christmas tree. I
just alluded to, if done

137
00:16:01,458 --> 00:16:09,042
incorrectly it will take down
the network, and it will, I've
done it. I'll admit that. I've

138
00:16:09,042 --> 00:16:15,042
done it at home. I've done it at
work. I've done it at work, at
home. Starbucks. [Laughter ] You

139
00:16:23,083 --> 00:16:30,458
need a fairly powerful host to
keep up with the traffic. These
days we're looking at gigabit or

140
00:16:30,458 --> 00:16:37,000
multi-gigabit connections. Your
host needs to be able to process
that. So your little Wi-Fi

141
00:16:37,000 --> 00:16:44,125
pineapple or your little Linksys
box that you can do this with is
not going to cut it. It just

142
00:16:44,125 --> 00:16:50,375
can't process the traffic fast
enough. Laptops, Mac minis,
small commuters, they're going

143
00:16:50,375 --> 00:16:56,375
to be able to keep up with the
traffic as long as you're at a
gigabit or better, I carry a

144
00:16:58,625 --> 00:17:03,667
secondary network card,
lightning network adapter in my
bag just for this purpose. So

145
00:17:03,667 --> 00:17:10,083
that I don't have to route
traffic in and out the same
address I can pull it in one and

146
00:17:10,083 --> 00:17:16,208
route it out the other. Setting
it up basically your setting
your box up as a gateway and you

147
00:17:16,208 --> 00:17:21,042
got to be able to route the
traffic through the machine
without actually slowing it

148
00:17:21,042 --> 00:17:26,708
down. You're going to slow it
down a little bit, just one of
those things, but you want to

149
00:17:26,708 --> 00:17:32,708
slow it down as little as
possible. [Laughter] I told you
they were funny. Yeah. So DNS

150
00:17:36,000 --> 00:17:42,000
poisoning and spoofing a
slightly less dangerous way. It
is slightly less dangerous, Cane

151
00:17:45,250 --> 00:17:51,250
is one of tools that is able to
perform this function amongst
others. It's actually pretty

152
00:17:54,875 --> 00:18:00,875
damn good at doing what it's
supposed to do. And it's the one
that I prefer, yeah it's a

153
00:18:03,125 --> 00:18:09,125
Windows tool and I know Windows
is bad. What's that? InnoVM,
Absolutely. People look funny at

154
00:18:11,458 --> 00:18:18,583
me because I have a Mac, and
actually I see a lot of Macs
now, used to be one of those

155
00:18:18,583 --> 00:18:24,083
first people to actually hack on
a Mac. They're like, you run a
Mac, I'm like, yeah, it's a

156
00:18:24,083 --> 00:18:30,458
great platform. I can run
Windows on it still. It may
still require you to Arp spoof

157
00:18:30,458 --> 00:18:36,458
first. You're going to send
replies to DNS requests, to
point traffic at yourself. So

158
00:18:40,750 --> 00:18:48,333
you have to become that DNS
server. You may have to Arp for
that one specific address and

159
00:18:48,333 --> 00:18:54,333
say, I'm a DNS server, I'm the
DNS server instead of I'm the
gateway. And it is always used

160
00:18:57,750 --> 00:19:03,792
in conjunction with other tools.
It doesn't -- it can't actually
handle the traffic itself. And

161
00:19:03,792 --> 00:19:10,708
so what you're going to do is
you're going to reply with an
address pointing that particular

162
00:19:10,708 --> 00:19:15,917
-- that DNS answer back at
yourself or someplace else in
order to capture the traffic

163
00:19:15,917 --> 00:19:21,042
going -- in order to get the
traffic to be redirected. And
the great thing is, is with DNS

164
00:19:21,042 --> 00:19:28,292
caching, is you may only have to
answer once every five minutes.
Or once every two weeks.

165
00:19:28,292 --> 00:19:33,167
Depending on how the cache is
set up in DNS. If you have to
answer once every two weeks,

166
00:19:33,167 --> 00:19:40,125
that's pretty awesome. Because I
can stand up a box, answer once,
poison the cache and take the

167
00:19:40,125 --> 00:19:45,708
box down and go home and I'm
still getting that traffic. It's
really pretty cool. Unless they

168
00:19:45,708 --> 00:19:51,708
figure it out and they flush the
cache. Like I said it provides
your IP address the answer to

169
00:19:54,000 --> 00:20:00,292
the DNS queries. You're saying
I'm really this -- I'm really
Google, it's me. I'm Google. I'm

170
00:20:00,292 --> 00:20:06,292
going to -- I'm going to send
you my search results which may
not necessarily be kosher. I'll

171
00:20:10,292 --> 00:20:16,292
let you read this. Cause it's --
I thought that was pretty funny,
too. Still a little bit less

172
00:20:26,500 --> 00:20:34,000
dangerous, we're going from most
dangerous to least dangerous in
this particular category. DHCP

173
00:20:34,000 --> 00:20:41,542
spoofing, you're going to
provide answers to DHCP
requests. The ever famous

174
00:20:41,542 --> 00:20:48,000
Ettercap who in here has heard
of Ettercap it's a tool, it's a
long old, old tool. It works

175
00:20:48,000 --> 00:20:54,000
really, really well it has for a
long time. And it's really well
maintained, it's awesome. But

176
00:20:56,333 --> 00:21:02,333
Ettercap does this function
perfectly. You still be able --
you still need to be able to

177
00:21:10,083 --> 00:21:14,958
sniff the traffic, you still
need to get the traffic coming
to your box somehow so you're

178
00:21:14,958 --> 00:21:20,958
still going to have to do
something. Either have a span
port or, or one of these. Last

179
00:21:28,500 --> 00:21:34,500
year I did a talk on my bag of
dirty tricks. Zase's mom came up
and said I really like the Ninja

180
00:21:39,292 --> 00:21:45,708
throwing star. This is what
she's talking about. This is a
Ninja throwing star LAN tap. You

181
00:21:45,708 --> 00:21:52,708
guys have probably seen these I
think they're available in the
vendor area. As kits. They're

182
00:21:52,708 --> 00:21:58,708
really, really cool. It allows
you to get in the middle of
traffic and, you know, scan it,

183
00:22:00,792 --> 00:22:07,750
play with it and inject in to it
and, hey look, all my friends
finally showed up. I'm going to

184
00:22:07,750 --> 00:22:15,208
embarrass you like I embarrassed
my wife. Bill, wave hi to
everybody. Everybody turn around

185
00:22:15,208 --> 00:22:21,208
and wave hi to Bill. You and I
need to go talk to Priest later.
No. But I want my T-shirt.

186
00:22:29,208 --> 00:22:34,500
[Laughter] Now he's laughing.
[Laughter] Yeah, you can
actually get in the middle of

187
00:22:34,500 --> 00:22:40,500
traffic with one of these, you
have to be physically there, you
have to be able to plug in to a

188
00:22:43,083 --> 00:22:50,792
wall jack between a machine but
it will let you scan traffic and
provides both transmit and

189
00:22:50,792 --> 00:22:58,542
receive and it's pretty cool.
It's a passive device, you don't
need power, it's really, really,

190
00:22:58,542 --> 00:23:06,083
really awesome. Wow, are they
loud or what? We're going to
take a real quick break we're

191
00:23:06,083 --> 00:23:12,542
going to do something here to
annoy the other guys. Okay? I
want everybody -- I'm not going

192
00:23:12,542 --> 00:23:17,792
to make you stand up again. I
want everybody to scream and
clap for ten seconds as loud as

193
00:23:17,792 --> 00:23:23,792
you possibly can. Ready, one,
two, three -- do it. [Cheering
and Screaming] Perfect!

194
00:23:37,667 --> 00:23:41,417
[Laughter] They put us in these
small rooms with these thin
walls and you know that's Sky

195
00:23:41,417 --> 00:23:46,833
Talks over there and there's no
recording we just probably
really annoyed the speaker

196
00:23:46,833 --> 00:23:54,208
because he's right behind that
wall. [Laughter] That's a lot of
fun to do. I'll have to look and

197
00:23:54,208 --> 00:24:00,208
see who was speaking and go,
Hey! [Laughter] Switches can be
alerted to check for and deny

198
00:24:02,833 --> 00:24:08,833
this type of attack. Especially
in situations where you're
relaying traffic to one DHCP

199
00:24:11,833 --> 00:24:17,750
server. It can be -- the switch
can be configured to actually
send these packets directly to

200
00:24:17,750 --> 00:24:22,875
the DHCP server and send the
responses back, if that's the
case this isn't going to work

201
00:24:22,875 --> 00:24:28,875
for you. If they're really,
really well configured and tight
on this, this attack is going to

202
00:24:31,167 --> 00:24:37,167
be tough to pull off. But it is
less dangerous than an Arp spoof
because you're not -- you're not

203
00:24:40,708 --> 00:24:47,875
going to interrupt all the
traffic, just some of it. And it
is also used in conjunction with

204
00:24:47,875 --> 00:24:53,375
other tools, we'll talk about
those other tools here in a
little bit. So, we're going to

205
00:24:53,375 --> 00:25:01,042
talk about proxies but this
image might be a little bit hard
to see, hard to read. It's the

206
00:25:01,042 --> 00:25:05,875
whole, what my friends think I
do, what my mom thinks I do.
Yeah. My mom knows I'm a hacker

207
00:25:05,875 --> 00:25:11,875
but she does think I work for
the Geek squad sometimes. And
I'm not a chick even though

208
00:25:16,625 --> 00:25:22,625
that's a chick in what I think I
do. And we all know what we
actually do. The government one

209
00:25:25,292 --> 00:25:32,792
I thought was the funniest,
cause I'm sinking the Titanic.
You need to actually be able to

210
00:25:32,792 --> 00:25:39,208
do something with the traffic
once you get it. You need to be
able to have a way to change

211
00:25:39,208 --> 00:25:44,042
things, the easiest way to
change it is to set up a
transparent proxy. In this case

212
00:25:44,042 --> 00:25:49,292
we're talking about HTTP or
HTTPS type traffic or web
traffic. There are some other

213
00:25:49,292 --> 00:25:55,292
tools that you can do that do
other traffic like SSH. You can
do actually do SHH man in the

214
00:25:59,333 --> 00:26:05,333
middle and it is evil and it is
fun and [Loud Noise] [Laughter]
Why? >> It's so heavy. I love

215
00:26:14,667 --> 00:26:20,667
you softly. >> Guys, this is
Crypt. He's pranking everybody.
All of his friends. [Laughter]

216
00:26:23,292 --> 00:26:29,292
>> Hey Crypt? >> Yes. >> Why
don't you -- Oh. [Laughter] >>
You have any Def Coin on ya?

217
00:26:39,583 --> 00:26:45,583
Uh-huh. Oh, that's nice. >> I
only have -- I have four left.
>> You have four left? Can I

218
00:26:57,125 --> 00:27:03,125
have them? Of course I did. All
right. [Laughter] >> I am
amazing. And I'm a good sport am

219
00:27:16,708 --> 00:27:24,208
I not? >> You're one of the
smartest guys I know. >> Yeah,
awesome. I've got 400 Def coin

220
00:27:24,208 --> 00:27:28,750
here and I'm going to do some
questions and answers. And the
best questions that I come up --

221
00:27:28,750 --> 00:27:36,000
that uh, that you guys ask me
I'm going to give a Def coin to.
Who here has DEF coin? I know

222
00:27:36,000 --> 00:27:43,500
you guys do. Of course you do.
Who here wants DEF coin. Good.
At least I've got something

223
00:27:43,500 --> 00:27:49,500
that's valuable. The paper it's
printed on is worth more than
the actual coin. So, multiple

224
00:27:51,833 --> 00:27:56,333
tools provide this service.
We'll talk about SSH man in the
middle here in a little while.

225
00:27:56,333 --> 00:28:02,333
We'll talk about HTTP and HTTPS
first. Who in here have heard of
Burp, the Burp suite? Who have

226
00:28:06,458 --> 00:28:14,333
actually installed the Burp
suite? What was that? Pro? I
don't pay for it. The features

227
00:28:14,333 --> 00:28:22,042
that ask, it provides, they're
not valuable enough for me to
pay for it. And the free version

228
00:28:22,042 --> 00:28:29,125
is awesome. Who here has
actually used the Burp suite for
something? Good. Good. You know

229
00:28:29,125 --> 00:28:34,250
what I'm talking about. It's
fun. You can actually examine,
and look and change traffic, web

230
00:28:34,250 --> 00:28:39,125
traffic as it goes by. You would
not believe the number of people
that look at me funny, when I

231
00:28:39,125 --> 00:28:46,708
say, you know what, I've got
your password. How did you do
that? You sent it in clear text.

232
00:28:46,708 --> 00:28:52,708
What do you mean, clear text?
Yeah. Another tool I'll talk
about is Malory. This is one

233
00:28:56,792 --> 00:29:03,542
that fewer people have heard of.
Raise your hand if you've heard
of Malory. Raise your hand if

234
00:29:03,542 --> 00:29:09,542
you've got Malory to
successfully run. It's a
difficult tool to actually use.

235
00:29:13,042 --> 00:29:19,042
But, it's infinitely more
powerful than Burp. You can do
so much more with Malory and

236
00:29:21,042 --> 00:29:27,042
it's fast. And it's not Java
based. That got you. But it's
really, really hard to set up

237
00:29:30,250 --> 00:29:37,667
and use. The documentation isn't
very good, not very well
maintained. I don't think -- I

238
00:29:37,667 --> 00:29:45,542
didn't see anything since like
2011. It hasn't been maintained
very much at all. So most people

239
00:29:45,542 --> 00:29:50,917
that use it and use it
effectively maintain it
themselves. I actually have a

240
00:29:50,917 --> 00:29:57,708
private GetHub repository with
my version of Malory in it and
it's because I've had to make so

241
00:29:57,708 --> 00:30:03,625
many changes to it to keep it
functioning over time that I a
want version control. I can't

242
00:30:03,625 --> 00:30:09,625
just -- I'll lose the tar ball
if I lose the machines. And then
there's Squid. People look at

243
00:30:11,875 --> 00:30:18,708
Squid as like a good regular old
proxy but it can actually do
scriptable changes. It's fast,

244
00:30:18,708 --> 00:30:25,958
it's efficient, it runs as a
service and it's really, really
good at what it does. We'll talk

245
00:30:25,958 --> 00:30:31,958
about Squid here in a little
bit. So let's uh -- Yeah. It is.
Passwords any more are

246
00:30:41,542 --> 00:30:47,125
ineffective unless they have
spaces. Remember that, put
spaces in your passwords. People

247
00:30:47,125 --> 00:30:53,250
don't think about spaces. Spaces
at the end of passwords when you
crack them they show up as a

248
00:30:53,250 --> 00:30:57,125
blank space, right? So you're
like, I don't understand why
this password isn't working.

249
00:30:57,125 --> 00:31:02,792
Well, it's because it's got a
space at the end of it. Let's
talk a little bit about Burp

250
00:31:02,792 --> 00:31:10,083
suite. You guys know, it's Java,
it runs on almost anything. Runs
really well on almost anything

251
00:31:10,083 --> 00:31:18,042
and runs really slow on almost
anything. Java is one of those
things that we wish we didn't

252
00:31:18,042 --> 00:31:23,583
have to put up with but we do
have to put up with it. But it's
good, readily available, the

253
00:31:23,583 --> 00:31:30,500
free version is more than
effective for what most people
need. Unless you're doing some

254
00:31:30,500 --> 00:31:37,208
really serious heavy, heavy,
heavy application testing and
want to know some automated

255
00:31:37,208 --> 00:31:43,667
stuff and some automated
certificate stuff. My arrow keys
just aren't working well. It

256
00:31:43,667 --> 00:31:49,667
just works most of the time.
It's like an Apple computer, you
know. Or iPhone. Just works.

257
00:31:52,708 --> 00:31:59,458
Your 5 year old can probably
figure it out, it's pretty cool,
it's got a real good GUI. It

258
00:31:59,458 --> 00:32:06,375
sets up requests and posts in
such a way that you can actually
change them and see what's going

259
00:32:06,375 --> 00:32:13,250
on. I'll be honest if I'm
looking for something quick Burp
is the first thick I grab. If I

260
00:32:13,250 --> 00:32:18,292
don't have time to play with
Malory and get it fiddled and
setup, If I'm just looking for a

261
00:32:18,292 --> 00:32:23,792
quick, you know, two-day
engagement I'm doing a pentest
on application I'll pull up Burp

262
00:32:23,792 --> 00:32:29,000
suite and go through it that
way. It's really, really good at
what it does. It grabs cookies.

263
00:32:31,542 --> 00:32:39,042
It will hold gets and posts for
you, it will sit there and fake
the server out like, yeah, trick

264
00:32:39,042 --> 00:32:45,208
on the data to you, just on a
really slow connection and let
you change things and it's

265
00:32:45,208 --> 00:32:49,375
really great to escalate
privileges because lot of people
don't think about -- developers

266
00:32:49,375 --> 00:32:52,250
don't think about the cookies
that they're setting, you know,
they set this cookie and their

267
00:32:52,250 --> 00:32:58,958
like, yeah, you've got user
level. It's like user level
zero. Like, okay. What happens

268
00:32:58,958 --> 00:33:04,417
when I change that user level
one? And all of a sudden I've
got admin access it's hilarious,

269
00:33:04,417 --> 00:33:10,417
are like, how did you get that?
Well, I just changed it on the
way. That's Pyro. Is that Pyro?

270
00:33:16,917 --> 00:33:21,750
No. If that was Pyro we'd really
mess with him. And it's not Pyro
so I'll leave him alone. It can

271
00:33:21,750 --> 00:33:27,750
change cookies, variables and
HTML responses on the way back
to the server. This is a

272
00:33:32,125 --> 00:33:34,417
client-based tool. You're not
going to actually change the
traffic going from anything but

273
00:33:34,417 --> 00:33:40,833
your client to -- or your group
of clients that you've
configured to use this proxy to

274
00:33:40,833 --> 00:33:42,833
the server. And so this is a
really good way to get in to
things, Tomcat and stuff like

275
00:33:42,833 --> 00:33:47,792
that on the server side. Speaker
goodness, interrupting me, I'm
just giving you a hard time. It

276
00:33:47,792 --> 00:33:53,792
has some very powerful SSL
options. SSL is only as good as
your user training. I can

277
00:34:12,292 --> 00:34:17,875
present you a fake certificate
as long as you are trained to
click on, yeah, give me that

278
00:34:17,875 --> 00:34:23,292
fake certificate, I've got all
your traffic. Our social
engineering efforts are vastly,

279
00:34:23,292 --> 00:34:29,292
vastly, vastly successful
because people have gotten used
to, oh, that looks odd. But,

280
00:34:31,458 --> 00:34:36,458
hey, I've got an okay button I
don't want to call IT I'm just
going to click okay. You know.

281
00:34:36,458 --> 00:34:42,542
Google chrome has gotten better
that it's presenting a yellow
screen, full on yellow screen

282
00:34:42,542 --> 00:34:49,458
now but it still gives you the
option to be like, yeah, I
understand what you're saying,

283
00:34:49,458 --> 00:34:54,125
I'm going to go through. Used to
be red, the red screen really
freaked people out I think they

284
00:34:54,125 --> 00:35:00,125
changed it to yellow because
they were getting too many
calls. Yeah. This is really

285
00:35:04,875 --> 00:35:08,917
kinda what Malory is all about.
I'm the best Hacker ever I
downloaded this thing on the

286
00:35:08,917 --> 00:35:14,917
Internet to do it and Malory
it's tough to use, we'll talk a
little bit about it. It's

287
00:35:17,542 --> 00:35:23,167
really, really, really powerful,
though. More powerful than Burp
and much more -- much faster.

288
00:35:23,167 --> 00:35:30,083
It's got very, very good SSL
options, it will just like Burp
it will auto generate

289
00:35:30,083 --> 00:35:36,083
certificates but if you have the
right type of root certificate,
like a fake root certificate it

290
00:35:38,667 --> 00:35:44,292
will generate these valid
certificates with the valid
information based on the

291
00:35:44,292 --> 00:35:49,292
certificate it downloads from
the actual site that you're
attacking. So it will actually

292
00:35:49,292 --> 00:35:55,083
fill everything in like it's a
real certificate from Google.
Like Google, HTTPS, and you'll

293
00:35:55,083 --> 00:36:01,167
look at it and it's Google
incorporated. This is the date.
Just been self signed. You

294
00:36:01,167 --> 00:36:08,000
actually examine it if you have
a user that is actually going to
examine the certificate and look

295
00:36:08,000 --> 00:36:14,833
at it, it looks legit. And
you're like, oh, okay, Google
just made a mistake and put a

296
00:36:14,833 --> 00:36:22,042
self signed certificate up there
I think I can do that. And I'll
let it through. And then you've

297
00:36:22,042 --> 00:36:27,375
got all their traffic and it's
very, very good. Very
configurable and almost too

298
00:36:27,375 --> 00:36:33,917
configurable. Linux and macro OS
are easiest way to get Malory
working. I actually have a

299
00:36:33,917 --> 00:36:40,958
virtual machine that I keep just
for Malory. And it's because it
takes so many different

300
00:36:40,958 --> 00:36:46,958
libraries, it has to be massaged
just in the right spot, it takes
a certain configuration of IP

301
00:36:49,958 --> 00:36:57,042
tables in order to actually
work. So I just keep it all set
up on a VM that's ready to go, I

302
00:36:57,042 --> 00:37:01,583
boot up the snapshot I start
Malory I'm ready to rock and
roll. I know that I can make

303
00:37:01,583 --> 00:37:07,583
changes to the configurations I
need to go. It has a chrome plug
in that will allow to you look

304
00:37:10,167 --> 00:37:16,208
at cookies and do injection of
-- change of injection of
cookies and things like that

305
00:37:16,208 --> 00:37:23,667
it's not very effective it
actually kind of sucks. And it's
really difficult to understand.

306
00:37:23,667 --> 00:37:29,667
It's a great tool, try it out,
go download it. I've got the
link somewhere on here and it's

307
00:37:34,917 --> 00:37:42,250
actually in the presenter's
notes which are on the
conference CD. It can be very,

308
00:37:42,250 --> 00:37:48,250
very, very picky. It really
doesn't like -- what the heck is
going on back there? That is

309
00:37:52,625 --> 00:37:58,625
really, really annoying. He's
going to go take care of it for
me, I love you, man, thank you.

310
00:38:01,083 --> 00:38:04,875
It can be really, really picky
about the environment it's set
up in and it can be really,

311
00:38:04,875 --> 00:38:10,875
really, really tough again to
get working. And there's not a
lot of prebuilt tools for it

312
00:38:13,083 --> 00:38:17,875
you're going to be building a
lot yourself if you can code in
python or C you're going to be

313
00:38:17,875 --> 00:38:22,250
set up and ready to rock and
roll. But you're going to be
writing a lot of your own

314
00:38:22,250 --> 00:38:27,042
plugins and a lot of your own
tools to get it working, there's
some real advantages to that. In

315
00:38:27,042 --> 00:38:32,000
the fact that you can write your
own plugins and your own tools
and so as you do that, you'll

316
00:38:32,000 --> 00:38:39,458
get your only personal suite of
tools and plug ins that you've
got around Malory that will do

317
00:38:39,458 --> 00:38:44,958
some really, really cool stuff.
I don't share mine that's
probably really, really bad

318
00:38:44,958 --> 00:38:51,750
thing. I should probably start
doing that but I am possessive
of my Malory stuff because I

319
00:38:51,750 --> 00:38:58,708
don't want people to find out
about it, and be like oh, yeah,
got you. And it's not

320
00:38:58,708 --> 00:39:04,750
maintained. Hasn't been
maintained since 2011. It hasn't
been a new release since then

321
00:39:04,750 --> 00:39:08,958
and I think it's just due to
lack of popularity. So if more
people start using it we can

322
00:39:08,958 --> 00:39:14,958
start to maintain it we can
actually make it a solid stable
and scalable tool. Disgusted cat

323
00:39:19,542 --> 00:39:26,583
is questioning what he just saw.
Squid. The squid proxy is a
staple of Linux proxies, UNIX

324
00:39:26,583 --> 00:39:32,583
proxies, really. It's used in
everyday use for a normal
caching proxy. In fact I used it

325
00:39:38,542 --> 00:39:42,917
for a caching proxy for years at
home when my Internet connection
was slow, cause it sped things

326
00:39:42,917 --> 00:39:47,625
up so drastically and it's
really, really, really good at
that. It's very good at doing

327
00:39:47,625 --> 00:39:53,625
the caching stuff. But it can
also be turned in to a very
nefarious tool with IP tables

328
00:39:56,083 --> 00:40:02,917
and PF. It can actually be
completely transparent to the
user, I can redirect the traffic

329
00:40:02,917 --> 00:40:10,208
in to squid without having set
up proxies on the -- proxy
configuration on the browser so

330
00:40:10,208 --> 00:40:16,208
I can sit there in the middle of
this traffic and be modifying it
all day long and you would never

331
00:40:19,208 --> 00:40:25,208
know it. Man, who did this
PowerPoint anyway? It's good for
fast and static replacement, if

332
00:40:38,542 --> 00:40:43,458
you want to replace images or
you want to put a header at the
top of a certain set of

333
00:40:43,458 --> 00:40:49,250
webpages, captive portal type
stuff it's really good for that.
And lots of modules and lots of

334
00:40:49,250 --> 00:40:52,833
support and it's very, very well
maintained. It's more or less a
commercial product and people

335
00:40:52,833 --> 00:40:57,125
use it all over the place. And
so picking those products and
then being able to twist them to

336
00:40:57,125 --> 00:41:01,750
your own uses is something that
is incredibly valuable. And it
is the best thing to prank your

337
00:41:01,750 --> 00:41:08,292
friends with, it's readily
available at home, there's lots
of resources on the web to do

338
00:41:08,292 --> 00:41:15,708
what you want to do with it and
it's a whole lot of fun. So I
was going to do an SSH monkey in

339
00:41:15,708 --> 00:41:21,708
the middle here, I booted my VM
this morning and I got set up to
do it and as always, the demo

340
00:41:25,458 --> 00:41:31,917
Gods are not in my favor today.
So -- >> I would just like to
say that those guys -- >> Oh,

341
00:41:31,917 --> 00:41:39,167
wow. It's a flying Dick. We'll
set that there for the next
speaker and he'll wonder what

342
00:41:39,167 --> 00:41:43,333
the hell happened in here. It
will be a lot of fun. But
instead I'm going to do some

343
00:41:43,333 --> 00:41:48,917
time for questions and answers
here at the end because they
didn't give us any Q and A time

344
00:41:48,917 --> 00:41:54,667
after our talks this year I
wanted to be able to answer you
guys' questions. So, I'm going

345
00:41:54,667 --> 00:42:02,083
to take the ten minutes I set
aside for that and do that
instead. The other thing I want

346
00:42:02,083 --> 00:42:08,083
to talk about is the all port
Internet. Redo. I like that
image it was so much fun. I

347
00:42:11,250 --> 00:42:17,375
actually have something in my
bag that is -- batteries are
dead, and it's a redo of

348
00:42:17,375 --> 00:42:22,958
something that was done back in
DEF CON 17. And these guys got
up and talked about what they

349
00:42:22,958 --> 00:42:28,875
called the all port Internet.
And it was an access point you
could attach to, and it would

350
00:42:28,875 --> 00:42:36,500
replace all of the images with
random porn. It's a great prank,
a great example of what you can

351
00:42:36,500 --> 00:42:42,208
do with a proxy. Battery is dead
in my box, in my bag right now.
But it will be up -- I'll go

352
00:42:42,208 --> 00:42:47,917
upstairs and charge it and it
will be up and I'll be walking
around Con, and you'll see an

353
00:42:47,917 --> 00:42:55,542
access point that says, all P
Internet. It will throw you in a
captive portal and it will

354
00:42:55,542 --> 00:43:01,542
actually ask you about your
preferences. [Laughter] And so,
I'm non-discriminatory I want to

355
00:43:06,250 --> 00:43:13,250
make sure everybody gets -- not
my brand of porn but what they
want, and so it will ask you

356
00:43:13,250 --> 00:43:19,917
about your preferences and it
will present you your
preferences of pornography and

357
00:43:19,917 --> 00:43:25,042
every image will be pornography,
I'm sorry. But it also gives you
the option to join it or not and

358
00:43:25,042 --> 00:43:32,750
I'm not going to force it on you
because I understand that that's
not for everybody too. No demo,

359
00:43:32,750 --> 00:43:38,750
but it will be available. I
won't force it on you. You have
to ask for it. It's gender and

360
00:43:43,875 --> 00:43:51,042
preference neutral. With that,
let's open the floor up for some
questions. Let's see what kind

361
00:43:51,042 --> 00:43:57,042
of time I've got. I've got 20
minutes left or 25 minutes left.
So, yeah. I haven't played with

362
00:44:03,417 --> 00:44:10,250
it in a long time to be honest.
It's one that I will put on my
list certainly to check out. You

363
00:44:10,250 --> 00:44:14,042
got something that you've done
with it that you want to talk to
me about, come grab me a beer

364
00:44:14,042 --> 00:44:20,042
afterwards we'll do that. Yeah.
There's actually a tool, if you
Google SSH man in the middle,

365
00:44:24,625 --> 00:44:30,625
it's part of the DSniff suite it
will actually present a fake
public key to your client.

366
00:44:33,667 --> 00:44:39,042
You'll get a message, a key
warning, the public key has
changed, I have mine configured

367
00:44:39,042 --> 00:44:44,417
to where it won't connect to a
changed public key but most
default and limitations will ask

368
00:44:44,417 --> 00:44:50,167
you if you want to replace it,
yes or no. Then it will sit in
the middle and decrypt the

369
00:44:50,167 --> 00:44:54,167
traffic and record the traffic
for you as it's passing the
traffic to the next host.

370
00:44:54,167 --> 00:44:59,958
Because you just changed the
public key to the one I
presented you to, it's

371
00:44:59,958 --> 00:45:04,583
decrypting that traffic. It's a
whole lot of fun. It's not a
whole lot you can change with it

372
00:45:04,583 --> 00:45:10,583
but you definitely get passwords
from it. Yeah. You'd be
surprised. Presenting somebody

373
00:45:23,250 --> 00:45:30,958
with, are you sure you want to
do this type message, will
almost always get a yes answer.

374
00:45:30,958 --> 00:45:36,625
I do it. You do it. Come on,
admit it. Do you answer yes to
that kind of stuff just because

375
00:45:36,625 --> 00:45:42,000
it's convenient, yeah, I'll be
the first one to admit that I do
it, too. I've gotten caught by

376
00:45:42,000 --> 00:45:49,583
my friends they are like, got
you! I'm like, oh, man. But,
yeah, everybody does it, it's

377
00:45:49,583 --> 00:45:55,750
kind of human nature you get,
are you sure you want to do this
yes or no, and the answer is

378
00:45:55,750 --> 00:46:01,750
almost always, yeah, I'm sure I
want to do this. Yeah. The best
proxy to use for SSL stripping?

379
00:46:17,000 --> 00:46:24,500
What I would actually do is just
something that you're trying to
do quick. Use a tool called SSL

380
00:46:24,500 --> 00:46:31,250
strip and Burp. And that's the
fastest way to do it if you're
just looking to strip the SSL,

381
00:46:31,250 --> 00:46:37,042
and get the credentials. If you
want a little bit more
complicated version, Burp

382
00:46:37,042 --> 00:46:42,333
actually does do some
certificate generation. You can
set it up to generate fake

383
00:46:42,333 --> 00:46:47,750
certificates and send them back
to the client and get the
message. The other way is to use

384
00:46:47,750 --> 00:46:53,000
Malory and actually generate
some really, really good
certificates. If you can get a

385
00:46:53,000 --> 00:47:00,792
fake root certificate on to the
client that you're attacking,
then you won't have the issue of

386
00:47:00,792 --> 00:47:07,542
the certificate as bad type
stuff. It's really, really
powerful and cool. But, yeah,

387
00:47:07,542 --> 00:47:13,542
SSL strip and Burp are the first
go-to. Out in the cloud? It's
gonna be hard to do out in the

388
00:47:22,542 --> 00:47:28,542
cloud if you want to prank your
friends get a little -- Yeah,
okay. My wife is telling me to

389
00:47:30,583 --> 00:47:36,500
repeat the question for
everybody because they can't
hear you. [Laughter] She's

390
00:47:36,500 --> 00:47:42,083
right. She's a teacher. She
knows this kind of stuff. He
wants to know what the best

391
00:47:42,083 --> 00:47:46,958
service, cloud service to set
this stuff up in to prank the
cloud. Or the best way. I

392
00:47:46,958 --> 00:47:52,958
actually do it at my gateway my
home gateway. I run PFsense
which gives me access to VSD and

393
00:47:55,458 --> 00:48:01,750
PF you can do a lot of fun stuff
with that. There's a lot of plug
ins for it. If you're pranking

394
00:48:01,750 --> 00:48:06,250
your cloud -- your friends out
here just carry a Wi-Fi
pineapple or something in your

395
00:48:06,250 --> 00:48:12,292
backpack with a battery on it
and connect it to the DEF CON
network and away you go. That's

396
00:48:12,292 --> 00:48:19,125
how the thing in my bag works.
It is, just a Wi-Fi pineapple
configured to connect to the DEF

397
00:48:19,125 --> 00:48:27,000
CON network and funnels traffic
through there but it changes
everything coming back and forth

398
00:48:27,000 --> 00:48:33,000
to it. No, I'm not. Yeah. VPNs.
See I'm not going to keep the
Def Coins to myself, that was a

399
00:48:40,958 --> 00:48:46,958
really good question. The range
about VPNs, VPNs are actually
pretty well protected. Although

400
00:48:50,375 --> 00:48:56,750
most people are switching to
like a SSL or TLS version of VPN
you can still use all your SSL

401
00:48:56,750 --> 00:49:02,250
based tools for that and
actually get access to the
traffic. The problem being is

402
00:49:02,250 --> 00:49:06,542
that when you've got a VPN going
you often times tunneling
traffic inside tunnels, at least

403
00:49:06,542 --> 00:49:12,083
I do. You are going to have to
not only man in the middle my
SSL VPN but your also going to

404
00:49:12,083 --> 00:49:19,167
have to man in the middle my SSH
and if I see one warning for VPN
and then another warning for SSH

405
00:49:19,167 --> 00:49:24,083
at that point I'm going to be
like, okay, something's up.
Somebody didn't misconfigure

406
00:49:24,083 --> 00:49:30,083
something or I'm not an a
network that is in the middle
already. I'm actually being

407
00:49:30,083 --> 00:49:36,083
messed with. You definitely get
a Def Coin that was a good
question. Yeah. Yeah. So that's

408
00:50:02,958 --> 00:50:10,458
actually a very, very good
question. What he's asking is,
when you get that yellow screen

409
00:50:10,458 --> 00:50:16,125
from chrome and it's a site that
you've been to you know but
you're still getting that yellow

410
00:50:16,125 --> 00:50:23,250
screen how do you verify that
it's okay. There's actually a
small link on that screen,

411
00:50:23,250 --> 00:50:29,250
there's like, get me out of
here. Or then there's advanced
or everything is okay I know

412
00:50:31,458 --> 00:50:35,917
what I'm doing. Are really the
kind of three options there.
Under the advanced tab you click

413
00:50:35,917 --> 00:50:41,333
it, it will give you all the
certificate information. So what
I look for when I look at that

414
00:50:41,333 --> 00:50:46,458
certificate is, is it really the
site that I'm going to. What's
the issue. Is it the company

415
00:50:46,458 --> 00:50:52,750
that I'm expecting to work with.
Am I sending my data to some
place that I actually want to

416
00:50:52,750 --> 00:50:59,250
send it to. Is the URL correct
-- what's that? Yeah, you'll see
the CA. The certificate

417
00:50:59,250 --> 00:51:06,625
authority. And the certificate
authority I can put anything I
want in that field, it could be

418
00:51:06,625 --> 00:51:13,875
kind of fun, I'm generating my
own root so I can be like, oh,
yeah. What's that? You really

419
00:51:13,875 --> 00:51:19,875
shouldn't trust it. Just click,
get me out of here. That's the
best option. Then if it's Google

420
00:51:23,208 --> 00:51:29,958
or something especially if it's
like a big name company or your
bank it's like, oh, it's been

421
00:51:29,958 --> 00:51:37,167
self signed. Don't trust it. If
it says it's expired, don't
trust it. Chances are if it's a

422
00:51:37,167 --> 00:51:40,417
big company and their SSL
certificate expires they're just
getting ready to put in a new

423
00:51:40,417 --> 00:51:47,000
one anyway so wait 20 minutes
and go check again. Just on an
independent network, that's a

424
00:51:47,000 --> 00:51:53,000
good one, too. This is for you.
Yeah. His question is have I
ever tied one of these tools

425
00:52:12,750 --> 00:52:19,708
into like a beast attack or a
crime type attack or a
renegotiation type to decrypt

426
00:52:19,708 --> 00:52:25,708
the SSL. Yes. It works very,
very, very well. The crime
attack, until they patched it

427
00:52:29,167 --> 00:52:35,167
has been amazing. Yeah. Time to
wrap it up. One more question.
Yeah. Right, Right. It would

428
00:52:43,167 --> 00:52:49,167
have. They have since fixed
that. But yes it would have. It
actually worked very, very well.

429
00:53:00,417 --> 00:53:06,417
That's all I got for you guys.
[Applause]

