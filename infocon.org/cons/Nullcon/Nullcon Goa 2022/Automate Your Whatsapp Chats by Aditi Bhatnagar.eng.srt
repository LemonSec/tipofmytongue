1
00:00:04,220 --> 00:00:06,600
hello everyone

2
00:00:06,600 --> 00:00:09,059
thank you for dropping by it's a really

3
00:00:09,059 --> 00:00:10,679
amazing crowd I am so happy to be here

4
00:00:10,679 --> 00:00:12,540
right now

5
00:00:12,540 --> 00:00:14,940
um so this is a session on automating

6
00:00:14,940 --> 00:00:16,500
your WhatsApp chats

7
00:00:16,500 --> 00:00:18,180
and just like any other session before

8
00:00:18,180 --> 00:00:19,560
beginning

9
00:00:19,560 --> 00:00:21,960
disclaimer the contents of the talk are

10
00:00:21,960 --> 00:00:23,939
meant for educational purposes use them

11
00:00:23,939 --> 00:00:26,400
for ethical reasons only and they do not

12
00:00:26,400 --> 00:00:29,340
represent any views by my employer

13
00:00:29,340 --> 00:00:33,019
so having done that

14
00:00:33,140 --> 00:00:36,000
I am a researcher interested in security

15
00:00:36,000 --> 00:00:38,399
privacy and everything in between when I

16
00:00:38,399 --> 00:00:39,600
say everything in between it is

17
00:00:39,600 --> 00:00:41,040
essentially I'm referring to techno

18
00:00:41,040 --> 00:00:42,840
sociology so my one of my interests is

19
00:00:42,840 --> 00:00:44,760
understanding how Tech impacts human

20
00:00:44,760 --> 00:00:46,800
life and what all has changed whether

21
00:00:46,800 --> 00:00:48,420
it's in privacy aspect or the way we

22
00:00:48,420 --> 00:00:50,160
organize identify ourselves and things

23
00:00:50,160 --> 00:00:52,620
like that I geek out an infinite hacks

24
00:00:52,620 --> 00:00:54,239
which is my website where I put up most

25
00:00:54,239 --> 00:00:56,160
of the things including this hack uh

26
00:00:56,160 --> 00:00:58,140
when as and when I do and get the time

27
00:00:58,140 --> 00:00:59,820
to I'm currently associated with

28
00:00:59,820 --> 00:01:01,260
atlassian I'm working as a platform

29
00:01:01,260 --> 00:01:03,660
security engineer there and previously I

30
00:01:03,660 --> 00:01:05,760
was working on Microsoft defender in

31
00:01:05,760 --> 00:01:08,040
Microsoft

32
00:01:08,040 --> 00:01:10,560
um okay so let's get started automating

33
00:01:10,560 --> 00:01:12,960
your WhatsApp chats and somehow whenever

34
00:01:12,960 --> 00:01:15,180
I tell my friends that hey I am doing

35
00:01:15,180 --> 00:01:16,619
this hack and they're like what are you

36
00:01:16,619 --> 00:01:17,820
doing I'm like I'm automating my

37
00:01:17,820 --> 00:01:19,380
WhatsApp chats they'll give me this

38
00:01:19,380 --> 00:01:21,360
opinion this expression they're like why

39
00:01:21,360 --> 00:01:22,740
would you do that like what is wrong

40
00:01:22,740 --> 00:01:24,540
with you you know we trust that when we

41
00:01:24,540 --> 00:01:25,860
are interacting with you it's like a

42
00:01:25,860 --> 00:01:27,659
human responding and not bought so why

43
00:01:27,659 --> 00:01:30,060
would you like to do that and I do have

44
00:01:30,060 --> 00:01:32,640
my own story and reasons on why I wanted

45
00:01:32,640 --> 00:01:34,979
to do this but before that since all of

46
00:01:34,979 --> 00:01:36,840
you are here I'm assuming there is some

47
00:01:36,840 --> 00:01:39,479
interest in automating the chats so if

48
00:01:39,479 --> 00:01:40,860
there is anyone in the audience who can

49
00:01:40,860 --> 00:01:42,299
tell me why would you want to learn this

50
00:01:42,299 --> 00:01:43,500
thing

51
00:01:43,500 --> 00:01:45,659
yeah

52
00:01:45,659 --> 00:01:49,920
sorry saves time saves time yeah and it

53
00:01:49,920 --> 00:01:51,479
depends on how much you chat but yeah

54
00:01:51,479 --> 00:01:52,740
sure

55
00:01:52,740 --> 00:01:54,840
and I don't reply to my dad on time I

56
00:01:54,840 --> 00:01:56,880
get scolded so yeah

57
00:01:56,880 --> 00:01:58,100
yeah yeah yeah

58
00:01:58,100 --> 00:02:00,240
that is you're like fulfilling your

59
00:02:00,240 --> 00:02:02,159
responsibilities well we are not letting

60
00:02:02,159 --> 00:02:04,320
anyone being not hanging on on anyone

61
00:02:04,320 --> 00:02:06,240
just responding back in time make sense

62
00:02:06,240 --> 00:02:08,899
anything else

63
00:02:11,280 --> 00:02:14,340
maybe it will reduce the breakups

64
00:02:14,340 --> 00:02:17,940
hahaha oh maybe I think I think it will

65
00:02:17,940 --> 00:02:19,739
cause the breakups like once they know

66
00:02:19,739 --> 00:02:21,060
that you have been automating the charge

67
00:02:21,060 --> 00:02:23,160
it might cost but yeah it might also

68
00:02:23,160 --> 00:02:25,560
reduce if you know you are busy and

69
00:02:25,560 --> 00:02:26,640
you're not able to get back to the

70
00:02:26,640 --> 00:02:28,200
person on time and you want to do that

71
00:02:28,200 --> 00:02:29,760
not to hurt their feelings and respect

72
00:02:29,760 --> 00:02:32,160
their time so yeah why not

73
00:02:32,160 --> 00:02:32,940
um

74
00:02:32,940 --> 00:02:36,060
I had my own story and it's like all of

75
00:02:36,060 --> 00:02:37,980
us are friends passed out of college and

76
00:02:37,980 --> 00:02:39,840
we were connected on WhatsApp and all

77
00:02:39,840 --> 00:02:41,280
friend circles have their own quirks

78
00:02:41,280 --> 00:02:43,140
right cultures and stuff like that and

79
00:02:43,140 --> 00:02:45,360
mine had the thing that when you want to

80
00:02:45,360 --> 00:02:46,980
get immediate attention of a person so

81
00:02:46,980 --> 00:02:48,360
something really happening has happened

82
00:02:48,360 --> 00:02:50,760
in my life and I want my friends to

83
00:02:50,760 --> 00:02:52,260
immediately like get back to me I'll

84
00:02:52,260 --> 00:02:53,879
just keep on sending things and this was

85
00:02:53,879 --> 00:02:55,500
the thing we just do like hi hi hi hey

86
00:02:55,500 --> 00:02:57,000
listen listen listen listen it's just

87
00:02:57,000 --> 00:02:59,040
like a stream of text so that they just

88
00:02:59,040 --> 00:03:01,260
get a lot of notifications

89
00:03:01,260 --> 00:03:02,700
um and so they just get back to me yeah

90
00:03:02,700 --> 00:03:04,260
it's very irritating but it worked for

91
00:03:04,260 --> 00:03:07,739
my friends so yeah and as expected it so

92
00:03:07,739 --> 00:03:09,360
happened then one day I got in a

93
00:03:09,360 --> 00:03:10,739
competition with my friend

94
00:03:10,739 --> 00:03:13,200
so she was texting I was texting and we

95
00:03:13,200 --> 00:03:14,400
were like who can disturb the other

96
00:03:14,400 --> 00:03:16,140
person more right and while doing that

97
00:03:16,140 --> 00:03:17,640
while typing the text I was like why not

98
00:03:17,640 --> 00:03:18,959
I just automate it like there should be

99
00:03:18,959 --> 00:03:21,120
a way to automate it right so my only

100
00:03:21,120 --> 00:03:23,760
desire to do this was like automating

101
00:03:23,760 --> 00:03:25,440
that and win the competition and solve

102
00:03:25,440 --> 00:03:26,879
the purpose forever like having

103
00:03:26,879 --> 00:03:29,099
attention grabber script so anytime I

104
00:03:29,099 --> 00:03:31,680
want the attention I like this set of

105
00:03:31,680 --> 00:03:33,480
text and they immediately get back to me

106
00:03:33,480 --> 00:03:35,400
so that was just that innocent you know

107
00:03:35,400 --> 00:03:37,620
winning the competition thing and that

108
00:03:37,620 --> 00:03:39,180
that got me started into how can I

109
00:03:39,180 --> 00:03:41,220
possibly do that

110
00:03:41,220 --> 00:03:44,220
so there's a problem at hand now I want

111
00:03:44,220 --> 00:03:45,959
to automate my chats how can I do that

112
00:03:45,959 --> 00:03:47,580
and there are different ways if you

113
00:03:47,580 --> 00:03:49,260
understand WhatsApp WhatsApp has like a

114
00:03:49,260 --> 00:03:51,360
web.whatsapp.com which is a website

115
00:03:51,360 --> 00:03:53,459
version so my first hunch was like let

116
00:03:53,459 --> 00:03:55,560
me go to the website see the JavaScript

117
00:03:55,560 --> 00:03:57,599
content okay have some script and you

118
00:03:57,599 --> 00:03:59,040
know click the button send message and

119
00:03:59,040 --> 00:04:00,959
do things like that I did something

120
00:04:00,959 --> 00:04:03,060
similar with my Facebook Messenger back

121
00:04:03,060 --> 00:04:06,060
in college it was I think 2014 around uh

122
00:04:06,060 --> 00:04:07,500
I I think I do have a thing for

123
00:04:07,500 --> 00:04:08,879
automating chat somehow so every

124
00:04:08,879 --> 00:04:10,739
platform that I get I tried automate it

125
00:04:10,739 --> 00:04:13,260
so on Facebook I did it using JavaScript

126
00:04:13,260 --> 00:04:15,120
and that time it was very easy because

127
00:04:15,120 --> 00:04:17,220
they had a fixed ID for button and text

128
00:04:17,220 --> 00:04:19,380
box so you just like enter text box and

129
00:04:19,380 --> 00:04:21,180
you click button and then it just sends

130
00:04:21,180 --> 00:04:22,620
a message so I tried doing something

131
00:04:22,620 --> 00:04:24,360
similar with web.whatsapp but somehow I

132
00:04:24,360 --> 00:04:25,919
was not happy there was there were some

133
00:04:25,919 --> 00:04:28,380
issues I do not recall now but the issue

134
00:04:28,380 --> 00:04:30,720
is that I use WhatsApp on Android right

135
00:04:30,720 --> 00:04:32,880
so I want it to be handy on my Android I

136
00:04:32,880 --> 00:04:34,259
want something that works on my mobile

137
00:04:34,259 --> 00:04:36,120
and I can just send it I do not want to

138
00:04:36,120 --> 00:04:37,800
open a website and then run a JavaScript

139
00:04:37,800 --> 00:04:39,780
and it just like kills the whole Spirit

140
00:04:39,780 --> 00:04:42,000
of doing it so I started are looking at

141
00:04:42,000 --> 00:04:45,780
how can I do this thing on Android

142
00:04:45,780 --> 00:04:48,360
so if you think about doing a thing like

143
00:04:48,360 --> 00:04:50,220
automating your Chats on Android the

144
00:04:50,220 --> 00:04:52,259
thing is what all kind of powers would

145
00:04:52,259 --> 00:04:54,000
you need right because you want to make

146
00:04:54,000 --> 00:04:55,259
sure that the platform provides you

147
00:04:55,259 --> 00:04:57,780
those Powers so if I want to send an

148
00:04:57,780 --> 00:05:00,180
automated chat I would like my bot or

149
00:05:00,180 --> 00:05:01,740
service to do these three things at

150
00:05:01,740 --> 00:05:04,560
least right read the screen because you

151
00:05:04,560 --> 00:05:06,300
know it's a huge if they don't have eyes

152
00:05:06,300 --> 00:05:07,740
you're not seeing what you're seeing so

153
00:05:07,740 --> 00:05:09,780
I want the service of the bot to read

154
00:05:09,780 --> 00:05:11,880
the screen to type a message in the in

155
00:05:11,880 --> 00:05:14,160
the chat box wherever I can find and to

156
00:05:14,160 --> 00:05:15,960
press the button right so these are the

157
00:05:15,960 --> 00:05:18,060
three things that I'm looking for the

158
00:05:18,060 --> 00:05:19,740
platform to provide me in order to do

159
00:05:19,740 --> 00:05:21,660
this hack

160
00:05:21,660 --> 00:05:24,000
um and while thinking about it I came

161
00:05:24,000 --> 00:05:26,220
across TalkBack

162
00:05:26,220 --> 00:05:28,800
how many of you know about TalkBack

163
00:05:28,800 --> 00:05:31,139
yeah so uh talk back for those who do

164
00:05:31,139 --> 00:05:34,080
not know is an accessibility uh based

165
00:05:34,080 --> 00:05:36,000
app so usually whenever you create

166
00:05:36,000 --> 00:05:37,320
technology you want to make sure that

167
00:05:37,320 --> 00:05:38,880
it's accessible to as many people as

168
00:05:38,880 --> 00:05:40,620
possible right so even people with

169
00:05:40,620 --> 00:05:42,180
special needs people who have problems

170
00:05:42,180 --> 00:05:44,580
you know reading from the screen uh you

171
00:05:44,580 --> 00:05:46,560
want to create services to help them use

172
00:05:46,560 --> 00:05:48,539
mobile phones so TalkBack is one of the

173
00:05:48,539 --> 00:05:50,520
services by one of the apps by Google

174
00:05:50,520 --> 00:05:53,340
what it does is that it reads content on

175
00:05:53,340 --> 00:05:55,560
the screen to people who are blind or

176
00:05:55,560 --> 00:05:57,419
who have difficulty reading from the

177
00:05:57,419 --> 00:05:59,400
screen right and when I came across it

178
00:05:59,400 --> 00:06:00,900
and it can read anything from the screen

179
00:06:00,900 --> 00:06:02,820
so it's not like it's just reading some

180
00:06:02,820 --> 00:06:04,919
notepad or some Google doc it can read

181
00:06:04,919 --> 00:06:06,360
literally everything that is coming on

182
00:06:06,360 --> 00:06:07,740
your screen and I thought that it's

183
00:06:07,740 --> 00:06:09,360
super powerful because this app is

184
00:06:09,360 --> 00:06:10,860
essentially having the capability to

185
00:06:10,860 --> 00:06:12,419
read which I also need in order to

186
00:06:12,419 --> 00:06:14,880
automate my WhatsApp chats so I started

187
00:06:14,880 --> 00:06:16,919
looking at how this is built

188
00:06:16,919 --> 00:06:18,960
and

189
00:06:18,960 --> 00:06:20,880
yes it provides spoken feedback we

190
00:06:20,880 --> 00:06:24,240
talked about it and I uh when I learned

191
00:06:24,240 --> 00:06:25,800
about how TalkBack is built I came

192
00:06:25,800 --> 00:06:27,360
across a concept of accessibility

193
00:06:27,360 --> 00:06:29,880
services in an Android right so

194
00:06:29,880 --> 00:06:32,039
accessibility service and Android it

195
00:06:32,039 --> 00:06:34,020
assists users with disabilities in using

196
00:06:34,020 --> 00:06:36,000
Android devices and apps it is a

197
00:06:36,000 --> 00:06:37,620
long-running privileged service that

198
00:06:37,620 --> 00:06:39,840
helps user process information on the

199
00:06:39,840 --> 00:06:41,220
screen and lets them to interact

200
00:06:41,220 --> 00:06:43,259
meaningfully with the device and there's

201
00:06:43,259 --> 00:06:45,539
an industrial angle to it as well so if

202
00:06:45,539 --> 00:06:46,740
you're working for companies like you

203
00:06:46,740 --> 00:06:48,060
know Microsoft Google or big companies

204
00:06:48,060 --> 00:06:50,220
or startups who are like uh scaling

205
00:06:50,220 --> 00:06:52,080
across billions of people to make sure

206
00:06:52,080 --> 00:06:53,759
that their apps are accessible so

207
00:06:53,759 --> 00:06:56,160
everyone is able to use them right so it

208
00:06:56,160 --> 00:06:58,380
comes with a like every app most of the

209
00:06:58,380 --> 00:07:00,240
app you can say on Google Play Store are

210
00:07:00,240 --> 00:07:02,220
compatible with accessibility service

211
00:07:02,220 --> 00:07:03,960
and what does that mean we'll just touch

212
00:07:03,960 --> 00:07:06,479
upon it uh in a while

213
00:07:06,479 --> 00:07:08,880
so this look like some possible solution

214
00:07:08,880 --> 00:07:10,860
accessibility service lets me read

215
00:07:10,860 --> 00:07:13,139
things from a screen so I need two other

216
00:07:13,139 --> 00:07:15,060
things right I need to type message and

217
00:07:15,060 --> 00:07:17,100
I need to press a button so then I got

218
00:07:17,100 --> 00:07:19,080
curious and like started looking at if

219
00:07:19,080 --> 00:07:21,300
accessibility service can let me perform

220
00:07:21,300 --> 00:07:24,780
actions from user behalf as well

221
00:07:24,780 --> 00:07:26,759
and

222
00:07:26,759 --> 00:07:28,560
Android has like a fabulous doc

223
00:07:28,560 --> 00:07:30,180
developer document they just write

224
00:07:30,180 --> 00:07:32,460
everything very nicely so I took use of

225
00:07:32,460 --> 00:07:33,960
that and I came across this exact

226
00:07:33,960 --> 00:07:35,880
paragraph which is take action for users

227
00:07:35,880 --> 00:07:37,919
like awesome this definitely sounds like

228
00:07:37,919 --> 00:07:40,440
a solution now I can read things and I

229
00:07:40,440 --> 00:07:43,500
can take actions on behalf of user

230
00:07:43,500 --> 00:07:46,080
um so I started reading the

231
00:07:46,080 --> 00:07:48,479
documentation I'll explain what it takes

232
00:07:48,479 --> 00:07:50,340
to create an accessibility service and

233
00:07:50,340 --> 00:07:52,199
how you can do that but before that just

234
00:07:52,199 --> 00:07:54,479
a minute pause and any questions or any

235
00:07:54,479 --> 00:07:56,639
concerns that I need to address or

236
00:07:56,639 --> 00:07:58,620
everything is clear

237
00:07:58,620 --> 00:08:00,840
yeah

238
00:08:00,840 --> 00:08:02,840
yeah

239
00:08:03,680 --> 00:08:07,220
this one right

240
00:08:08,220 --> 00:08:09,720
uh it would be different I didn't have

241
00:08:09,720 --> 00:08:11,460
IOS so I didn't have that need so I did

242
00:08:11,460 --> 00:08:13,740
not figure it out uh there is one hack

243
00:08:13,740 --> 00:08:15,780
in my mind which I can share on IELTS

244
00:08:15,780 --> 00:08:17,099
later on but I'm not sure how well it

245
00:08:17,099 --> 00:08:19,979
will work so this is for Android right

246
00:08:19,979 --> 00:08:21,539
um okay so creating your own

247
00:08:21,539 --> 00:08:23,460
accessibility service

248
00:08:23,460 --> 00:08:25,020
um how many of you have experience in

249
00:08:25,020 --> 00:08:27,660
building any Android app

250
00:08:27,660 --> 00:08:31,979
okay okay we have some people so I will

251
00:08:31,979 --> 00:08:33,419
explain what it takes to build an

252
00:08:33,419 --> 00:08:34,860
Android app and that might help you in

253
00:08:34,860 --> 00:08:36,479
building one very soon because it's very

254
00:08:36,479 --> 00:08:38,640
easy it's very handy it's not not a

255
00:08:38,640 --> 00:08:41,479
rocket science at all

256
00:08:41,700 --> 00:08:43,260
um so what you do

257
00:08:43,260 --> 00:08:46,380
like any Java class there is this thing

258
00:08:46,380 --> 00:08:48,240
accessibility service so you define a

259
00:08:48,240 --> 00:08:49,440
class you define a service because

260
00:08:49,440 --> 00:08:50,880
accessibility service is a background

261
00:08:50,880 --> 00:08:53,040
service right so whatever your Bot or

262
00:08:53,040 --> 00:08:54,839
service is it will be running in the

263
00:08:54,839 --> 00:08:56,459
background it is not something which

264
00:08:56,459 --> 00:08:58,260
will be actively on the screen it is

265
00:08:58,260 --> 00:08:59,580
something which is sitting back in the

266
00:08:59,580 --> 00:09:00,899
background and listening to whatever is

267
00:09:00,899 --> 00:09:02,880
happening on the UI right read that

268
00:09:02,880 --> 00:09:05,279
stuff and then take actions see so you

269
00:09:05,279 --> 00:09:07,320
extend this accessibility Service uh

270
00:09:07,320 --> 00:09:09,600
interface and start implementing the

271
00:09:09,600 --> 00:09:11,519
classes so the first step is create an

272
00:09:11,519 --> 00:09:13,800
accessibility service class

273
00:09:13,800 --> 00:09:14,399
um

274
00:09:14,399 --> 00:09:17,459
another thing that you do is defining it

275
00:09:17,459 --> 00:09:19,640
in Android manifest so Android

276
00:09:19,640 --> 00:09:22,019
manifest.xml is the really magical you

277
00:09:22,019 --> 00:09:23,760
know One Stop file that you should

278
00:09:23,760 --> 00:09:25,380
definitely look at if you want to learn

279
00:09:25,380 --> 00:09:27,240
about Android or reverse engineer it or

280
00:09:27,240 --> 00:09:28,920
whatever because it is like a file which

281
00:09:28,920 --> 00:09:30,839
defines all activities and all services

282
00:09:30,839 --> 00:09:33,779
which are there in the app and it also

283
00:09:33,779 --> 00:09:35,100
defines all the permissions that the app

284
00:09:35,100 --> 00:09:37,019
has so whenever you create an activity

285
00:09:37,019 --> 00:09:38,880
or you create a service you declare it

286
00:09:38,880 --> 00:09:40,980
in Android manifest in in order to for

287
00:09:40,980 --> 00:09:42,300
it to be recognized and you know

288
00:09:42,300 --> 00:09:44,820
implemented so you define it in the

289
00:09:44,820 --> 00:09:47,100
Android manifest and the third and the

290
00:09:47,100 --> 00:09:49,260
last step is that you add a

291
00:09:49,260 --> 00:09:50,760
configuration to it so whenever you

292
00:09:50,760 --> 00:09:52,860
define an accessibility service

293
00:09:52,860 --> 00:09:55,440
you define an XML and Link it to the

294
00:09:55,440 --> 00:09:58,380
service and why is that XML needed that

295
00:09:58,380 --> 00:10:00,540
XML will have information like what all

296
00:10:00,540 --> 00:10:02,700
kind of apps it should look at so just

297
00:10:02,700 --> 00:10:03,959
imagine you're applyingly sitting your

298
00:10:03,959 --> 00:10:05,459
your service or the bot and you're

299
00:10:05,459 --> 00:10:07,200
blindly sitting you're not you do not

300
00:10:07,200 --> 00:10:08,820
see the UI so you need to tell operating

301
00:10:08,820 --> 00:10:11,220
system which apps should I be looking at

302
00:10:11,220 --> 00:10:12,720
like which app should I be getting the

303
00:10:12,720 --> 00:10:15,120
traffic from or the UI from so you can

304
00:10:15,120 --> 00:10:17,640
Define like which uh packages you'll be

305
00:10:17,640 --> 00:10:19,140
listening to so for example Android

306
00:10:19,140 --> 00:10:20,760
package name you define the exact

307
00:10:20,760 --> 00:10:23,580
package event types Flags feedback type

308
00:10:23,580 --> 00:10:25,140
what kind of feedback will it be like

309
00:10:25,140 --> 00:10:26,880
after reading do I give a vocal audible

310
00:10:26,880 --> 00:10:28,920
feedback or what kind of feedback is it

311
00:10:28,920 --> 00:10:31,440
exactly notification timeout how

312
00:10:31,440 --> 00:10:33,839
frequently do I get events from UI what

313
00:10:33,839 --> 00:10:35,880
kind of events do I subscribe to right

314
00:10:35,880 --> 00:10:38,100
so when you're subscribing to events

315
00:10:38,100 --> 00:10:40,560
from UI a lot of things can happen a new

316
00:10:40,560 --> 00:10:42,300
window appeared or the content is the

317
00:10:42,300 --> 00:10:44,040
same window change right so you get

318
00:10:44,040 --> 00:10:45,300
events for all of that and you get a

319
00:10:45,300 --> 00:10:48,480
choice to mention in the XML file that

320
00:10:48,480 --> 00:10:49,680
these are the kind of events that I

321
00:10:49,680 --> 00:10:51,540
would like to subscribe to

322
00:10:51,540 --> 00:10:54,120
uh and that's it pretty much so these

323
00:10:54,120 --> 00:10:55,680
are the only three steps you need in

324
00:10:55,680 --> 00:10:57,180
order to create an accessibility service

325
00:10:57,180 --> 00:11:00,300
and having read that I thought it'll be

326
00:11:00,300 --> 00:11:03,480
a good idea to start implementing it

327
00:11:03,480 --> 00:11:05,880
and this is like a fine Sunday afternoon

328
00:11:05,880 --> 00:11:08,880
it did not take more than that and I'm

329
00:11:08,880 --> 00:11:10,920
sure if you play around with it you will

330
00:11:10,920 --> 00:11:12,600
kind of have the same feeling that they

331
00:11:12,600 --> 00:11:14,399
have made it really very well documented

332
00:11:14,399 --> 00:11:15,480
and you can actually you know play

333
00:11:15,480 --> 00:11:17,160
around and do your own thing because

334
00:11:17,160 --> 00:11:19,620
it's very well documented

335
00:11:19,620 --> 00:11:22,800
so let's look at the code

336
00:11:22,800 --> 00:11:24,540
okay

337
00:11:24,540 --> 00:11:26,279
I need to refresh this these are not

338
00:11:26,279 --> 00:11:28,140
errors I swear

339
00:11:28,140 --> 00:11:29,339
um

340
00:11:29,339 --> 00:11:31,200
but the first step was defining a

341
00:11:31,200 --> 00:11:33,899
background service so I defined this

342
00:11:33,899 --> 00:11:36,600
chat accessibility service the phone is

343
00:11:36,600 --> 00:11:38,279
really bad looking so I'm not sure if

344
00:11:38,279 --> 00:11:39,480
people at the back are able to see it

345
00:11:39,480 --> 00:11:42,839
but I'll narrate it as well as I can

346
00:11:42,839 --> 00:11:44,459
so there are two main things one is the

347
00:11:44,459 --> 00:11:45,660
Activity one is the background service

348
00:11:45,660 --> 00:11:48,540
activity does nothing but inflator UI so

349
00:11:48,540 --> 00:11:50,700
every app has a UI and the main activity

350
00:11:50,700 --> 00:11:52,440
is a starting point for an Android app

351
00:11:52,440 --> 00:11:54,420
so you define things like inflate a UI

352
00:11:54,420 --> 00:11:56,760
you know create a button and the add

353
00:11:56,760 --> 00:11:58,380
this edit text just like you define any

354
00:11:58,380 --> 00:12:00,420
other UI so the main activity is just

355
00:12:00,420 --> 00:12:04,560
creating that UI and chat chat

356
00:12:04,560 --> 00:12:06,660
accessibility service this one is

357
00:12:06,660 --> 00:12:07,860
extending the accessibility service

358
00:12:07,860 --> 00:12:12,500
essentially right so it has

359
00:12:12,839 --> 00:12:15,360
implemented methods of accessibility

360
00:12:15,360 --> 00:12:18,380
service like

361
00:12:18,680 --> 00:12:21,540
on accessibility event

362
00:12:21,540 --> 00:12:22,620
so whenever there is a background

363
00:12:22,620 --> 00:12:24,060
service usually you define things like

364
00:12:24,060 --> 00:12:26,100
on interrupt on stop what happens if my

365
00:12:26,100 --> 00:12:27,480
service crashes in between how do you

366
00:12:27,480 --> 00:12:29,220
handle those exceptions I have not

367
00:12:29,220 --> 00:12:30,720
written this as a production level code

368
00:12:30,720 --> 00:12:32,700
so I have not covered all the exceptions

369
00:12:32,700 --> 00:12:35,940
but I've just made it work so it defines

370
00:12:35,940 --> 00:12:37,860
on accessibility events it defines that

371
00:12:37,860 --> 00:12:39,660
what happens if there's an event that I

372
00:12:39,660 --> 00:12:41,720
received from the UI how do I process it

373
00:12:41,720 --> 00:12:44,160
and basically how do I get information

374
00:12:44,160 --> 00:12:46,500
like how do I get the name or how do I

375
00:12:46,500 --> 00:12:49,920
get the text box ID and things like that

376
00:12:49,920 --> 00:12:51,360
um and the other one that we talked

377
00:12:51,360 --> 00:12:53,160
about was accessibility service config

378
00:12:53,160 --> 00:12:55,260
so if you have a look at it it's

379
00:12:55,260 --> 00:12:57,240
listening to package namescom.whatsapp

380
00:12:57,240 --> 00:12:58,860
so my service just listens to Whatsapp

381
00:12:58,860 --> 00:13:00,899
because it's I only have things to do

382
00:13:00,899 --> 00:13:02,700
with WhatsApp but if you want to listen

383
00:13:02,700 --> 00:13:04,380
to some other app you can easily add

384
00:13:04,380 --> 00:13:05,760
another package name so if you want to

385
00:13:05,760 --> 00:13:07,760
read information from chrome you can add

386
00:13:07,760 --> 00:13:09,420
com.android.com and you can read

387
00:13:09,420 --> 00:13:11,220
information from that so you just extend

388
00:13:11,220 --> 00:13:13,139
the package names accessibility event

389
00:13:13,139 --> 00:13:15,240
types I have written as Windows State

390
00:13:15,240 --> 00:13:17,880
changed and window content changed which

391
00:13:17,880 --> 00:13:19,139
essentially means that if there's a new

392
00:13:19,139 --> 00:13:20,940
window popping up I'll get an event

393
00:13:20,940 --> 00:13:22,800
right so I get to read which package

394
00:13:22,800 --> 00:13:24,839
it's coming from what are the contents

395
00:13:24,839 --> 00:13:28,440
of the uh window basically

396
00:13:28,440 --> 00:13:30,720
um yeah I can try to but I'm not sure if

397
00:13:30,720 --> 00:13:33,120
how well it works oh it does

398
00:13:33,120 --> 00:13:34,740
it look good

399
00:13:34,740 --> 00:13:37,800
okay yeah so it's package names and its

400
00:13:37,800 --> 00:13:39,240
accessibility events here and then

401
00:13:39,240 --> 00:13:41,639
accessibility Flags which kind of

402
00:13:41,639 --> 00:13:43,980
um is a way to mention like mention what

403
00:13:43,980 --> 00:13:45,480
kind of information you should get from

404
00:13:45,480 --> 00:13:46,920
the node

405
00:13:46,920 --> 00:13:49,019
um you're familiar with HTML Doms right

406
00:13:49,019 --> 00:13:51,540
most of us are familiar with like HTML

407
00:13:51,540 --> 00:13:53,220
Dom kind of structure you can meet make

408
00:13:53,220 --> 00:13:55,200
an analogy with that so usually what

409
00:13:55,200 --> 00:13:57,300
happens is the whole UI there's a kind

410
00:13:57,300 --> 00:13:59,339
of tree and kind of reference IDs and

411
00:13:59,339 --> 00:14:01,560
the whole node is passed to the backend

412
00:14:01,560 --> 00:14:04,320
service so basically your problem

413
00:14:04,320 --> 00:14:06,480
statement now becomes just passing that

414
00:14:06,480 --> 00:14:08,160
node and figuring out the portions of

415
00:14:08,160 --> 00:14:10,260
Interest right so similar to the things

416
00:14:10,260 --> 00:14:12,899
that uh you can do with Facebook chats

417
00:14:12,899 --> 00:14:14,880
in JavaScript right you figure out the

418
00:14:14,880 --> 00:14:16,620
IDS where you enter the text and you

419
00:14:16,620 --> 00:14:18,360
click the same kind of things I'm trying

420
00:14:18,360 --> 00:14:19,980
to make happen here so accessibility

421
00:14:19,980 --> 00:14:22,019
service essentially gives you a full

422
00:14:22,019 --> 00:14:25,560
note like tree to the package service

423
00:14:25,560 --> 00:14:27,000
um and

424
00:14:27,000 --> 00:14:29,279
this is the XML and the third part was

425
00:14:29,279 --> 00:14:30,779
like mentioning it a manifest so this is

426
00:14:30,779 --> 00:14:33,980
the Manifest file that you have

427
00:14:34,560 --> 00:14:36,660
and it just has like two things one is

428
00:14:36,660 --> 00:14:39,420
the main service the launcher service it

429
00:14:39,420 --> 00:14:41,699
does nothing but inflate the UI and the

430
00:14:41,699 --> 00:14:43,199
other one is the chats accessibility

431
00:14:43,199 --> 00:14:45,300
service which is the main accessibility

432
00:14:45,300 --> 00:14:47,940
service having all the processing logic

433
00:14:47,940 --> 00:14:51,360
so that is how the structure looks like

434
00:14:51,360 --> 00:14:53,820
uh three things

435
00:14:53,820 --> 00:14:55,620
moving on what is the logic so what what

436
00:14:55,620 --> 00:14:58,639
is it that I'm trying to do here

437
00:14:58,639 --> 00:15:01,980
this is uh how your WhatsApp chat screen

438
00:15:01,980 --> 00:15:04,500
looks like on Android right I'm sure

439
00:15:04,500 --> 00:15:07,260
it's on iOS 2 similar

440
00:15:07,260 --> 00:15:08,579
um there are three things of my interest

441
00:15:08,579 --> 00:15:10,680
here right so what the app does is you

442
00:15:10,680 --> 00:15:12,480
mention the name of a person so any

443
00:15:12,480 --> 00:15:14,579
person you just mentioned that you know

444
00:15:14,579 --> 00:15:16,139
this is the person I want to automate my

445
00:15:16,139 --> 00:15:18,420
chat on so the app has the UI for you to

446
00:15:18,420 --> 00:15:20,279
set the name of the person

447
00:15:20,279 --> 00:15:21,899
so name of the person is a portion of

448
00:15:21,899 --> 00:15:24,899
Interest the first one then I have this

449
00:15:24,899 --> 00:15:27,720
edit text this is the one where I need

450
00:15:27,720 --> 00:15:30,000
to enter the text and the third thing of

451
00:15:30,000 --> 00:15:32,220
interest is the send button right so

452
00:15:32,220 --> 00:15:34,380
what the app is trying to do is whenever

453
00:15:34,380 --> 00:15:36,300
the WhatsApp screen opens it tries to

454
00:15:36,300 --> 00:15:37,860
match the name of the person is it the

455
00:15:37,860 --> 00:15:39,240
same as the one that you have entered in

456
00:15:39,240 --> 00:15:43,260
your app and if it is then it gets this

457
00:15:43,260 --> 00:15:46,380
edit text from the node tree it gets

458
00:15:46,380 --> 00:15:48,720
this edit text it enters text in there

459
00:15:48,720 --> 00:15:51,240
it gets this button and then it clicks

460
00:15:51,240 --> 00:15:53,760
it does that make sense

461
00:15:53,760 --> 00:15:55,740
yeah so it's as simple as that it's just

462
00:15:55,740 --> 00:15:56,820
doing these these three things

463
00:15:56,820 --> 00:15:57,899
essentially

464
00:15:57,899 --> 00:16:01,139
and that is what I coded in the app as

465
00:16:01,139 --> 00:16:03,420
well so if you look at the chats

466
00:16:03,420 --> 00:16:05,579
accessibility service

467
00:16:05,579 --> 00:16:08,519
on accessibility event so whenever this

468
00:16:08,519 --> 00:16:10,380
screen will open up the WhatsApp screen

469
00:16:10,380 --> 00:16:12,120
will open up I'll get an event my

470
00:16:12,120 --> 00:16:13,920
background service will get an event

471
00:16:13,920 --> 00:16:16,620
and I try to see there are some basic

472
00:16:16,620 --> 00:16:19,380
null checks I try to get the name right

473
00:16:19,380 --> 00:16:21,720
so Aditi pataga was a name and Aditi

474
00:16:21,720 --> 00:16:22,980
Patna is the name of the person I want

475
00:16:22,980 --> 00:16:25,380
to send my automated chats to so I get

476
00:16:25,380 --> 00:16:27,420
the name and what this is how this is

477
00:16:27,420 --> 00:16:29,699
getting the name is that

478
00:16:29,699 --> 00:16:33,600
these are the IDS essentially so all the

479
00:16:33,600 --> 00:16:35,519
UI elements everything which is on your

480
00:16:35,519 --> 00:16:39,000
UI has an ID and you can get that ID by

481
00:16:39,000 --> 00:16:41,940
using a tool called UI automator tool

482
00:16:41,940 --> 00:16:44,759
which comes along with a Android SDK

483
00:16:44,759 --> 00:16:47,220
package so this is a UI automator tool

484
00:16:47,220 --> 00:16:49,740
and in case of HTML you just pretty much

485
00:16:49,740 --> 00:16:52,139
inspect element and see things in case

486
00:16:52,139 --> 00:16:54,779
of Android you connect your you know

487
00:16:54,779 --> 00:16:57,440
make it debuggable uh have your device

488
00:16:57,440 --> 00:17:00,600
and launch this application from the SDK

489
00:17:00,600 --> 00:17:02,040
tool so this is the path you can find it

490
00:17:02,040 --> 00:17:04,319
in tools bin you launch it and you

491
00:17:04,319 --> 00:17:06,119
capture so when you click on capture it

492
00:17:06,119 --> 00:17:07,500
captures the current state of the device

493
00:17:07,500 --> 00:17:10,559
the current is green and then for every

494
00:17:10,559 --> 00:17:12,780
element basically there would be an ID

495
00:17:12,780 --> 00:17:15,720
so it has like this resource ID thing if

496
00:17:15,720 --> 00:17:17,099
you click on this it'll have a different

497
00:17:17,099 --> 00:17:19,439
resource ID the buttons everything apart

498
00:17:19,439 --> 00:17:21,299
from the keyboard every other thing on

499
00:17:21,299 --> 00:17:23,280
the apps the screen has an ID so what

500
00:17:23,280 --> 00:17:24,839
I'm trying to do is figure out what are

501
00:17:24,839 --> 00:17:27,179
these IDs for WhatsApp and get those

502
00:17:27,179 --> 00:17:28,799
elements and then perform actions on

503
00:17:28,799 --> 00:17:29,760
them

504
00:17:29,760 --> 00:17:32,340
right so um

505
00:17:32,340 --> 00:17:34,799
here these are the IDS I got these using

506
00:17:34,799 --> 00:17:37,080
the UI automator tool

507
00:17:37,080 --> 00:17:38,700
and then

508
00:17:38,700 --> 00:17:41,760
I'm just trying to get name and find the

509
00:17:41,760 --> 00:17:43,919
text box and type stuff so basically I

510
00:17:43,919 --> 00:17:45,600
created this area of strings that is

511
00:17:45,600 --> 00:17:47,760
hard coded you can add ml make it more

512
00:17:47,760 --> 00:17:49,559
intelligent add the capability of

513
00:17:49,559 --> 00:17:50,880
reading a text and then applying it

514
00:17:50,880 --> 00:17:52,679
accordingly but for this purpose it's

515
00:17:52,679 --> 00:17:54,120
like fixed set of chats that hey what's

516
00:17:54,120 --> 00:17:55,740
up I'm at nulcon right now hope you're

517
00:17:55,740 --> 00:17:57,900
doing well blah blah right so that is a

518
00:17:57,900 --> 00:18:00,840
fixed set of messages that I have so

519
00:18:00,840 --> 00:18:03,120
what I do is I pick one of the message I

520
00:18:03,120 --> 00:18:06,120
enter it in the text view uh sorry edit

521
00:18:06,120 --> 00:18:06,960
text

522
00:18:06,960 --> 00:18:09,059
so you find the text box and type stuff

523
00:18:09,059 --> 00:18:11,880
right so I create the message here and

524
00:18:11,880 --> 00:18:14,100
it's as simple as that it's text box

525
00:18:14,100 --> 00:18:16,020
perform action

526
00:18:16,020 --> 00:18:18,720
so accessibility provides you all these

527
00:18:18,720 --> 00:18:21,059
sort of actions so you can you have

528
00:18:21,059 --> 00:18:24,179
action set text which I use in order to

529
00:18:24,179 --> 00:18:26,400
populate text in the edit text you have

530
00:18:26,400 --> 00:18:28,380
action click which I use to click the

531
00:18:28,380 --> 00:18:31,380
send button in order to send the message

532
00:18:31,380 --> 00:18:33,660
um so I performed this action like

533
00:18:33,660 --> 00:18:35,640
entering the text and then I perform the

534
00:18:35,640 --> 00:18:38,520
third action which is basically click so

535
00:18:38,520 --> 00:18:40,260
find the send button again I have the ID

536
00:18:40,260 --> 00:18:41,520
so I found the send button and I

537
00:18:41,520 --> 00:18:43,860
performed a click action

538
00:18:43,860 --> 00:18:44,760
um

539
00:18:44,760 --> 00:18:46,200
and yeah and that's pretty much it

540
00:18:46,200 --> 00:18:49,500
that's the whole code it's not a big

541
00:18:49,500 --> 00:18:51,539
code it's like if you optimize it it'll

542
00:18:51,539 --> 00:18:53,160
be I think six year round lines of code

543
00:18:53,160 --> 00:18:56,539
but that's pretty much it

544
00:18:57,299 --> 00:19:01,080
um so let's build it and see if it works

545
00:19:01,080 --> 00:19:04,320
okay so I have my

546
00:19:04,320 --> 00:19:07,799
Android phone connected here

547
00:19:07,799 --> 00:19:12,240
uh I'm using wiser which will show you

548
00:19:12,240 --> 00:19:15,539
on a screen what it is yeah so this is

549
00:19:15,539 --> 00:19:17,640
my Android phone

550
00:19:17,640 --> 00:19:22,340
let me build this app and run this app

551
00:19:24,960 --> 00:19:29,179
okay so the app is up here

552
00:19:29,820 --> 00:19:33,120
a very basic UI automated WhatsApp chats

553
00:19:33,120 --> 00:19:35,460
and WhatsApp name now what you need to

554
00:19:35,460 --> 00:19:38,280
know is this this requires accessibility

555
00:19:38,280 --> 00:19:41,160
service right oops

556
00:19:41,160 --> 00:19:43,320
okay so this requires accessibility

557
00:19:43,320 --> 00:19:45,960
service so what I do first is go to my

558
00:19:45,960 --> 00:19:47,039
settings

559
00:19:47,039 --> 00:19:50,580
right and I'll go

560
00:19:50,580 --> 00:19:55,140
and give accessibility permission to

561
00:19:55,140 --> 00:19:57,380
this

562
00:19:57,660 --> 00:19:59,580
so you go to system accessibility when

563
00:19:59,580 --> 00:20:01,559
you go to the screen you can see all the

564
00:20:01,559 --> 00:20:02,940
apps which are acquiring accessibility

565
00:20:02,940 --> 00:20:05,280
after this talk do this on your mobile

566
00:20:05,280 --> 00:20:06,960
phone if you're using Android see what

567
00:20:06,960 --> 00:20:08,460
all apps are using accessibility service

568
00:20:08,460 --> 00:20:10,320
and do check if you actually use those

569
00:20:10,320 --> 00:20:12,419
apps or not because it is very powerful

570
00:20:12,419 --> 00:20:14,520
as we'll see so there's automate chats

571
00:20:14,520 --> 00:20:16,559
WhatsApp so I click on that

572
00:20:16,559 --> 00:20:19,860
and I give permission I turn this on

573
00:20:19,860 --> 00:20:22,200
so it gives a dialogue on saying that

574
00:20:22,200 --> 00:20:23,700
you know this app will have full access

575
00:20:23,700 --> 00:20:26,880
to your uh View and it can perform

576
00:20:26,880 --> 00:20:29,100
actions on your behalf and you agree

577
00:20:29,100 --> 00:20:30,660
with all of that so

578
00:20:30,660 --> 00:20:34,200
uh you give the permission now here

579
00:20:34,200 --> 00:20:36,059
I'll say

580
00:20:36,059 --> 00:20:38,039
Aditi bhatnagar

581
00:20:38,039 --> 00:20:40,440
which is myself

582
00:20:40,440 --> 00:20:43,020
do these hacks on yourself

583
00:20:43,020 --> 00:20:45,600
and then you set it

584
00:20:45,600 --> 00:20:47,520
so it says name is said go to WhatsApp

585
00:20:47,520 --> 00:20:50,340
so I'll go to WhatsApp

586
00:20:50,340 --> 00:20:52,919
and now nothing is happening right now

587
00:20:52,919 --> 00:20:56,299
but as soon as I click here

588
00:20:57,380 --> 00:21:00,179
okay so the demo gots kick in and it

589
00:21:00,179 --> 00:21:02,660
does not work

590
00:21:03,840 --> 00:21:06,678
give me a minute

591
00:21:06,780 --> 00:21:10,220
ow hey

592
00:21:12,720 --> 00:21:17,039
so we make sure that the

593
00:21:17,039 --> 00:21:21,000
chart is there and then you have set

594
00:21:21,000 --> 00:21:23,780
this thing up

595
00:21:25,559 --> 00:21:28,039
sorry

596
00:21:28,260 --> 00:21:29,820
yeah

597
00:21:29,820 --> 00:21:32,760
yeah I'm hoping yeah I think that's a

598
00:21:32,760 --> 00:21:34,679
valid point actually yeah

599
00:21:34,679 --> 00:21:37,140
let me stop that

600
00:21:37,140 --> 00:21:40,500
and see so I set it up

601
00:21:40,500 --> 00:21:42,659
and let's see if this works

602
00:21:42,659 --> 00:21:46,159
oh yeah it does not

603
00:21:54,720 --> 00:21:56,820
okay so I'll try it out one last time

604
00:21:56,820 --> 00:21:58,740
otherwise I'll just show a video as we

605
00:21:58,740 --> 00:22:00,980
do

606
00:22:02,340 --> 00:22:04,440
foreign

607
00:22:04,440 --> 00:22:06,539
if you have any questions meanwhile let

608
00:22:06,539 --> 00:22:09,379
me know and I can answer

609
00:22:10,200 --> 00:22:13,200
uninstall

610
00:22:18,020 --> 00:22:19,760
uh

611
00:22:19,760 --> 00:22:22,320
could we have also done this using

612
00:22:22,320 --> 00:22:24,240
Whatsapp web and capturing the requests

613
00:22:24,240 --> 00:22:28,020
that go uh over the web

614
00:22:28,020 --> 00:22:29,700
could we have also done this using

615
00:22:29,700 --> 00:22:31,740
Whatsapp web and uh maybe captioning the

616
00:22:31,740 --> 00:22:33,780
request that goes out of a browser and

617
00:22:33,780 --> 00:22:35,760
then repeating it using a logic that you

618
00:22:35,760 --> 00:22:37,620
don't probably that way is I would also

619
00:22:37,620 --> 00:22:40,140
be able to uh integrate an AI engine

620
00:22:40,140 --> 00:22:42,240
which talks on my behalf and I don't

621
00:22:42,240 --> 00:22:43,980
have to do anything would that be also

622
00:22:43,980 --> 00:22:45,900
washable scenario yes you are thinking

623
00:22:45,900 --> 00:22:47,220
of like capturing and replaying the

624
00:22:47,220 --> 00:22:48,659
request absolutely I think that is an

625
00:22:48,659 --> 00:22:51,299
amazing idea we can do that I am just a

626
00:22:51,299 --> 00:22:52,860
bit skeptical about the encryption thing

627
00:22:52,860 --> 00:22:54,299
how you'll handle how you'll actually

628
00:22:54,299 --> 00:22:56,880
enter the message I think I think uh on

629
00:22:56,880 --> 00:22:59,220
the on the web uh and that's why I

630
00:22:59,220 --> 00:23:01,140
categorically said whether WhatsApp

631
00:23:01,140 --> 00:23:03,539
because uh there you can you can take

632
00:23:03,539 --> 00:23:04,740
care of those things because it's

633
00:23:04,740 --> 00:23:06,000
ultimately your browser which is sending

634
00:23:06,000 --> 00:23:07,860
this requests yeah yeah so when you

635
00:23:07,860 --> 00:23:09,360
inject your SSL certificate you'd be

636
00:23:09,360 --> 00:23:11,840
able to get the requesting

637
00:23:11,840 --> 00:23:14,880
yes I'm just not sure if web.whatsapp

638
00:23:14,880 --> 00:23:16,200
has any protection in order to avoid

639
00:23:16,200 --> 00:23:17,880
that avoid that to happen or not but

640
00:23:17,880 --> 00:23:19,500
that is definitely something we can try

641
00:23:19,500 --> 00:23:21,659
I mean you cannot avoid that uh it's

642
00:23:21,659 --> 00:23:23,400
it's just unavoidable I mean that's how

643
00:23:23,400 --> 00:23:25,559
the world try it try it and then share

644
00:23:25,559 --> 00:23:27,960
it with me but yeah I think that like I

645
00:23:27,960 --> 00:23:29,460
do have confidence that that approach

646
00:23:29,460 --> 00:23:30,780
can work but I've not tested it so I

647
00:23:30,780 --> 00:23:33,620
won't say that it works

648
00:23:34,320 --> 00:23:38,280
um okay so let's see if this works now

649
00:23:38,280 --> 00:23:40,320
um

650
00:23:40,320 --> 00:23:43,320
accessibility service right we turn it

651
00:23:43,320 --> 00:23:45,600
on I give it the permission

652
00:23:45,600 --> 00:23:49,200
and then you come here and then you

653
00:23:49,200 --> 00:23:52,799
basically type this

654
00:23:52,799 --> 00:23:56,400
okay done set

655
00:23:56,400 --> 00:23:59,159
and then I go to WhatsApp

656
00:23:59,159 --> 00:24:02,220
and it works yay so I'm not typing all

657
00:24:02,220 --> 00:24:04,919
of this stuff it's getting automated it

658
00:24:04,919 --> 00:24:07,500
is basically the array of charts that we

659
00:24:07,500 --> 00:24:09,360
had so I'm at nalcon hope you're doing

660
00:24:09,360 --> 00:24:11,039
well and blah blah keep sending keep

661
00:24:11,039 --> 00:24:13,200
sending keep sending and if you take the

662
00:24:13,200 --> 00:24:15,659
screen off like if you go back it will

663
00:24:15,659 --> 00:24:17,640
stop sending the messages and then you

664
00:24:17,640 --> 00:24:19,020
can go ahead and you know set someone

665
00:24:19,020 --> 00:24:21,179
else's name you can also automate this

666
00:24:21,179 --> 00:24:22,380
stuff so in Android you can open

667
00:24:22,380 --> 00:24:24,659
activities and do things I have not gone

668
00:24:24,659 --> 00:24:26,460
ahead and do all of that because my

669
00:24:26,460 --> 00:24:28,080
purpose was pretty much accomplished by

670
00:24:28,080 --> 00:24:30,240
doing this but yeah so that is how it

671
00:24:30,240 --> 00:24:31,380
works

672
00:24:31,380 --> 00:24:34,039
foreign

673
00:24:35,220 --> 00:24:38,460
and then here I've just made it like I

674
00:24:38,460 --> 00:24:40,679
have had pauses here but you can also

675
00:24:40,679 --> 00:24:42,059
like have a script which just keeps on

676
00:24:42,059 --> 00:24:43,440
sending message WhatsApp doesn't block

677
00:24:43,440 --> 00:24:47,780
you so you can just send messages yeah

678
00:24:53,280 --> 00:24:55,200
uh that's a great question actually so

679
00:24:55,200 --> 00:24:57,240
it works the one that is on my mobile is

680
00:24:57,240 --> 00:24:58,559
Android 12 and it works for that

681
00:24:58,559 --> 00:25:00,900
accessibility service is supported by

682
00:25:00,900 --> 00:25:03,539
Android OS itself right so it is a

683
00:25:03,539 --> 00:25:05,820
feature it's not a bug so I'm just using

684
00:25:05,820 --> 00:25:07,620
the feature for the purpose it's not

685
00:25:07,620 --> 00:25:08,940
meant for essentially but I'm doing it

686
00:25:08,940 --> 00:25:11,580
for myself that's fine so it's yeah

687
00:25:11,580 --> 00:25:13,740
but Android 13 is definitely making some

688
00:25:13,740 --> 00:25:15,780
because it's a as we'll see in a while

689
00:25:15,780 --> 00:25:17,720
it is actually very potentially you know

690
00:25:17,720 --> 00:25:20,940
very big very big and uh

691
00:25:20,940 --> 00:25:23,159
scale like every Bank Trojan everything

692
00:25:23,159 --> 00:25:25,020
is using it so it is something that

693
00:25:25,020 --> 00:25:26,460
Android is fighting against and building

694
00:25:26,460 --> 00:25:28,200
protection against but they are trying

695
00:25:28,200 --> 00:25:29,580
to balance it off with the utility that

696
00:25:29,580 --> 00:25:31,500
it provides so Android 30 will have some

697
00:25:31,500 --> 00:25:33,480
changes uh but till Android whether it's

698
00:25:33,480 --> 00:25:36,500
working like a charm

699
00:25:38,400 --> 00:25:40,200
yeah it will it will so reference ID

700
00:25:40,200 --> 00:25:42,000
does not change usually but if it does

701
00:25:42,000 --> 00:25:43,740
then you open the UI automator tool

702
00:25:43,740 --> 00:25:45,419
again get the new IDs and you just

703
00:25:45,419 --> 00:25:48,320
replace the IDS and it'll work yeah

704
00:25:48,320 --> 00:25:52,320
okay so it worked and you can use to

705
00:25:52,320 --> 00:25:53,580
automate this literally anything on

706
00:25:53,580 --> 00:25:55,380
Android it's not just WhatsApp as we saw

707
00:25:55,380 --> 00:25:57,000
we just need like reference IDs and

708
00:25:57,000 --> 00:25:59,039
capture the UI and take actions so

709
00:25:59,039 --> 00:26:00,360
pretty much you can do anything you know

710
00:26:00,360 --> 00:26:02,460
automated Instagram or automate Gmail

711
00:26:02,460 --> 00:26:04,260
automate whatever you want because you

712
00:26:04,260 --> 00:26:05,760
are acting like a user there's no

713
00:26:05,760 --> 00:26:09,799
sandboxing nothing at place here

714
00:26:20,179 --> 00:26:23,460
uh have you tried using uh some NLP

715
00:26:23,460 --> 00:26:24,840
engines over here to make it more

716
00:26:24,840 --> 00:26:26,940
contextual in nature I mean rather than

717
00:26:26,940 --> 00:26:29,340
just sending blank messages the messages

718
00:26:29,340 --> 00:26:31,679
could be contextualized to the fact that

719
00:26:31,679 --> 00:26:34,020
I mean let's say if I send you hi you

720
00:26:34,020 --> 00:26:35,820
send me a high back yeah right so have

721
00:26:35,820 --> 00:26:37,260
you tried doing that as well I did not

722
00:26:37,260 --> 00:26:39,480
try this because usually what works so

723
00:26:39,480 --> 00:26:40,980
you can add context but I know my

724
00:26:40,980 --> 00:26:42,659
friends I know I know how I speak so

725
00:26:42,659 --> 00:26:45,960
like hmm okay yeah see that hey did you

726
00:26:45,960 --> 00:26:47,940
see this music video hey did you you I

727
00:26:47,940 --> 00:26:49,860
was here in blah blah so my purpose was

728
00:26:49,860 --> 00:26:51,480
sold here but you can actually try and

729
00:26:51,480 --> 00:26:53,580
plug in you know nlps there are ml

730
00:26:53,580 --> 00:26:55,140
models there are free libraries as well

731
00:26:55,140 --> 00:26:56,580
which which you can use and integrate

732
00:26:56,580 --> 00:26:59,220
and make it more you know useful for you

733
00:26:59,220 --> 00:27:02,159
but yeah I'm not doing that so thank you

734
00:27:02,159 --> 00:27:04,260
yeah so this is how I felt I was super

735
00:27:04,260 --> 00:27:06,240
happy and I was like really disturbing

736
00:27:06,240 --> 00:27:08,460
all of my close friends who won't disown

737
00:27:08,460 --> 00:27:10,559
me I know but they did something like

738
00:27:10,559 --> 00:27:12,659
this they blocked me I'm like oh my God

739
00:27:12,659 --> 00:27:15,059
okay so I am having all the fun in the

740
00:27:15,059 --> 00:27:17,100
world but they probably are not enjoying

741
00:27:17,100 --> 00:27:19,980
it so much and that is what we know

742
00:27:19,980 --> 00:27:21,179
right like technical Success is Not

743
00:27:21,179 --> 00:27:22,799
equals to human success humans need like

744
00:27:22,799 --> 00:27:25,260
their own set of things and so it

745
00:27:25,260 --> 00:27:26,640
includes repercussions like you know

746
00:27:26,640 --> 00:27:28,799
your friends would block you or they

747
00:27:28,799 --> 00:27:29,940
will start sending you voice messages

748
00:27:29,940 --> 00:27:32,100
because I did not have like voice

749
00:27:32,100 --> 00:27:33,960
parsing engines so I could not like do

750
00:27:33,960 --> 00:27:35,460
anything of that so I'm like okay sure

751
00:27:35,460 --> 00:27:37,200
why not but I do not use it that

752
00:27:37,200 --> 00:27:38,580
frequently now

753
00:27:38,580 --> 00:27:40,799
so coming back to nelcon and it being a

754
00:27:40,799 --> 00:27:42,179
security conference how is it relevant

755
00:27:42,179 --> 00:27:44,340
and I touched upon it a little bit

756
00:27:44,340 --> 00:27:46,980
um that most malicious malwareers use

757
00:27:46,980 --> 00:27:48,900
accessibility Services you know all the

758
00:27:48,900 --> 00:27:51,720
banking projects uh they just read

759
00:27:51,720 --> 00:27:53,460
whatever pin you are having they capture

760
00:27:53,460 --> 00:27:55,200
the pin they open apps they do actions

761
00:27:55,200 --> 00:27:56,580
from your behalf they enter the pin

762
00:27:56,580 --> 00:27:58,620
right spy wears are becoming a big thing

763
00:27:58,620 --> 00:28:00,000
in Android and accessibility Services

764
00:28:00,000 --> 00:28:01,980
give gives you everything that the user

765
00:28:01,980 --> 00:28:03,539
is doing what is the chat that the

766
00:28:03,539 --> 00:28:04,679
person is reading whom is the person

767
00:28:04,679 --> 00:28:05,940
calling so you can literally see

768
00:28:05,940 --> 00:28:07,500
anything that the person is doing on the

769
00:28:07,500 --> 00:28:09,179
screen and that is why it becomes a

770
00:28:09,179 --> 00:28:11,400
really powerful tool for spy wears as

771
00:28:11,400 --> 00:28:12,900
well and these are all the names of the

772
00:28:12,900 --> 00:28:15,120
Bots that that have used it in the past

773
00:28:15,120 --> 00:28:16,620
and it's still being used out there in

774
00:28:16,620 --> 00:28:17,700
the wild

775
00:28:17,700 --> 00:28:19,559
and uh the thing that concerns me the

776
00:28:19,559 --> 00:28:22,020
most is that the only indicator for a

777
00:28:22,020 --> 00:28:23,760
user is you go to the settings and you

778
00:28:23,760 --> 00:28:26,279
see whether it's on or not but they I'm

779
00:28:26,279 --> 00:28:27,900
sure there can be a tweak around you

780
00:28:27,900 --> 00:28:29,400
know just removing it from the settings

781
00:28:29,400 --> 00:28:31,620
as well you do not just register it at

782
00:28:31,620 --> 00:28:33,419
all and there would be cases with people

783
00:28:33,419 --> 00:28:35,159
who would have researched it I'm sure

784
00:28:35,159 --> 00:28:36,840
there can be cases where you just hide

785
00:28:36,840 --> 00:28:38,460
it from the settings itself then how

786
00:28:38,460 --> 00:28:39,419
would you know that some Services

787
00:28:39,419 --> 00:28:41,640
listening to you and for example this as

788
00:28:41,640 --> 00:28:43,620
well uh like automate the WhatsApp chat

789
00:28:43,620 --> 00:28:45,539
I gave it the permission now it just has

790
00:28:45,539 --> 00:28:47,279
the permission I do not have any

791
00:28:47,279 --> 00:28:48,840
indicator on the screen saying that

792
00:28:48,840 --> 00:28:50,220
there is an app you know looking at

793
00:28:50,220 --> 00:28:51,600
everything that you're doing and that is

794
00:28:51,600 --> 00:28:53,700
kind of concerning to me because it is a

795
00:28:53,700 --> 00:28:56,580
lot of power across all the apps

796
00:28:56,580 --> 00:28:59,159
so it it's an excellent way to break

797
00:28:59,159 --> 00:29:01,080
sandboxing sandboxing the concept does

798
00:29:01,080 --> 00:29:02,460
not hold because you are essentially

799
00:29:02,460 --> 00:29:04,200
operating as a user so all the apps you

800
00:29:04,200 --> 00:29:06,960
can access as a user so it's not related

801
00:29:06,960 --> 00:29:08,880
to just WhatsApp you can just access any

802
00:29:08,880 --> 00:29:11,400
app you go undetected because it is a

803
00:29:11,400 --> 00:29:13,320
system provided feature so you there's

804
00:29:13,320 --> 00:29:15,960
no it's not malicious per se you can

805
00:29:15,960 --> 00:29:17,220
build a spyware you can commit financial

806
00:29:17,220 --> 00:29:19,140
fraud and it's just left to your

807
00:29:19,140 --> 00:29:21,899
imagination what all you can do

808
00:29:21,899 --> 00:29:23,460
um playing is the best way to learn so

809
00:29:23,460 --> 00:29:24,960
that is why I share this chat and this

810
00:29:24,960 --> 00:29:26,220
is the theme I usually go along with

811
00:29:26,220 --> 00:29:27,480
although it was a very stupid and

812
00:29:27,480 --> 00:29:29,399
hilarious concept on why I started off

813
00:29:29,399 --> 00:29:31,440
with but once you create these Services

814
00:29:31,440 --> 00:29:33,000
I think you're always in a very better

815
00:29:33,000 --> 00:29:34,380
position to understand the amount of

816
00:29:34,380 --> 00:29:36,720
power they hold and what how can you

817
00:29:36,720 --> 00:29:38,100
possibly build defense or at least

818
00:29:38,100 --> 00:29:39,360
protect yourself

819
00:29:39,360 --> 00:29:43,320
so yeah keep playing stay safe and turn

820
00:29:43,320 --> 00:29:45,899
accessibility service off for the apps

821
00:29:45,899 --> 00:29:48,059
that you do not use

822
00:29:48,059 --> 00:29:49,980
uh back to automation this is a bonus

823
00:29:49,980 --> 00:29:50,940
slide

824
00:29:50,940 --> 00:29:53,279
um so I think last month or something I

825
00:29:53,279 --> 00:29:54,480
was playing with I was trying to

826
00:29:54,480 --> 00:29:56,039
understand how UB Keys work and I was

827
00:29:56,039 --> 00:29:57,659
playing with the programmable

828
00:29:57,659 --> 00:29:59,340
microcontrollers like how can you

829
00:29:59,340 --> 00:30:01,260
program and make them work like keyboard

830
00:30:01,260 --> 00:30:03,360
and mouse much like the bad USBS just

831
00:30:03,360 --> 00:30:05,640
that I wanted to create my own so I

832
00:30:05,640 --> 00:30:07,679
flashed 13c microcontroller I made it

833
00:30:07,679 --> 00:30:10,140
work like a keyboard and it worked

834
00:30:10,140 --> 00:30:12,419
amazingly on Mac OS but to my surprise

835
00:30:12,419 --> 00:30:14,100
it also worked on Android so it also

836
00:30:14,100 --> 00:30:15,960
supports USBC so you just need to open

837
00:30:15,960 --> 00:30:17,520
WhatsApp and you know plug in Teensy and

838
00:30:17,520 --> 00:30:18,720
then Teensy will just keep sending the

839
00:30:18,720 --> 00:30:20,760
automated chats so this is another way

840
00:30:20,760 --> 00:30:22,679
you can possibly automate if you're like

841
00:30:22,679 --> 00:30:25,020
really want to automate stuff that is

842
00:30:25,020 --> 00:30:27,179
also an interesting thing the processing

843
00:30:27,179 --> 00:30:28,860
might be an issue if you want to add ml

844
00:30:28,860 --> 00:30:31,279
to it though okay

845
00:30:31,279 --> 00:30:34,500
and if you want to play around you can

846
00:30:34,500 --> 00:30:36,179
scan this and you can download your app

847
00:30:36,179 --> 00:30:37,500
it'll be a small question you need to

848
00:30:37,500 --> 00:30:40,200
give me your email and I'll send you the

849
00:30:40,200 --> 00:30:42,059
apps version the app is not compatible

850
00:30:42,059 --> 00:30:44,700
on all architectures right now but I can

851
00:30:44,700 --> 00:30:46,140
just build it and send it to you if you

852
00:30:46,140 --> 00:30:48,299
really want to try it out try reversing

853
00:30:48,299 --> 00:30:50,640
it see the code it's all free do not use

854
00:30:50,640 --> 00:30:52,559
it for malicious purposes I trust this

855
00:30:52,559 --> 00:30:55,200
nullcon we won't be doing that so yeah

856
00:30:55,200 --> 00:30:59,220
get your free test app

857
00:30:59,220 --> 00:31:01,380
that's pretty much it uh there was my

858
00:31:01,380 --> 00:31:02,700
talk thank you so much for listening

859
00:31:02,700 --> 00:31:03,960
patiently and having like amazing

860
00:31:03,960 --> 00:31:07,980
questions I loved speaking Yeah

861
00:31:07,980 --> 00:31:11,880
uh yeah sure this one

862
00:31:11,880 --> 00:31:14,960
so any other questions

863
00:31:18,419 --> 00:31:20,899
yep

864
00:31:22,020 --> 00:31:24,539
like this will help only if we are not

865
00:31:24,539 --> 00:31:28,559
uh like we are away we are not using our

866
00:31:28,559 --> 00:31:30,360
phone

867
00:31:30,360 --> 00:31:34,199
what will help like

868
00:31:34,430 --> 00:31:35,760
[Music]

869
00:31:35,760 --> 00:31:39,179
the wind the window

870
00:31:39,179 --> 00:31:41,760
oh okay yeah yeah yeah sure so actually

871
00:31:41,760 --> 00:31:43,799
uh how it works is reading the UI right

872
00:31:43,799 --> 00:31:45,779
so if you're using and this is like I

873
00:31:45,779 --> 00:31:47,100
want it to automate it so I will open

874
00:31:47,100 --> 00:31:49,740
WhatsApp and then it's getting but if

875
00:31:49,740 --> 00:31:51,720
your service is in background

876
00:31:51,720 --> 00:31:52,380
um

877
00:31:52,380 --> 00:31:53,700
there is some permission in Droid

878
00:31:53,700 --> 00:31:55,320
through which you can launch I think

879
00:31:55,320 --> 00:31:56,640
they build some controls on it but you

880
00:31:56,640 --> 00:31:58,860
can actually launch activities so if you

881
00:31:58,860 --> 00:32:00,480
open WhatsApp like you know which intend

882
00:32:00,480 --> 00:32:02,100
to launch you can launch it and then

883
00:32:02,100 --> 00:32:03,779
accessibility Services Reading and then

884
00:32:03,779 --> 00:32:05,700
you know they can read your messages so

885
00:32:05,700 --> 00:32:09,799
you can try that okay yeah

886
00:32:10,320 --> 00:32:13,100
foreign

887
00:32:18,600 --> 00:32:20,220
we divided description to three parts

888
00:32:20,220 --> 00:32:22,559
right read uh then type and then send

889
00:32:22,559 --> 00:32:26,159
yeah so where exactly I mean this read

890
00:32:26,159 --> 00:32:29,159
thing I couldn't find in the in the uh

891
00:32:29,159 --> 00:32:31,200
code that like what exactly are we

892
00:32:31,200 --> 00:32:32,159
reading

893
00:32:32,159 --> 00:32:33,720
because we are just sending the messages

894
00:32:33,720 --> 00:32:36,720
right we are typing yes yes yes yes so

895
00:32:36,720 --> 00:32:38,640
um like if we compare it with the HTML

896
00:32:38,640 --> 00:32:41,399
Dom structure everything is a node right

897
00:32:41,399 --> 00:32:43,980
and the node has a text value the same

898
00:32:43,980 --> 00:32:45,600
goes with Android so accessibility

899
00:32:45,600 --> 00:32:47,100
service the whole accessibility node

900
00:32:47,100 --> 00:32:49,380
info an object which is like loaded with

901
00:32:49,380 --> 00:32:51,000
all the nodes and all the text types and

902
00:32:51,000 --> 00:32:52,860
all the information within the text like

903
00:32:52,860 --> 00:32:55,020
the text actual text it goes to the

904
00:32:55,020 --> 00:32:56,760
background so what we do is that we go

905
00:32:56,760 --> 00:32:58,559
to the node and then we read the text of

906
00:32:58,559 --> 00:33:00,899
the node and the text is Aditya the name

907
00:33:00,899 --> 00:33:03,000
of the person essentially yeah so it

908
00:33:03,000 --> 00:33:05,640
just sends everything

909
00:33:05,640 --> 00:33:07,679
great

910
00:33:07,679 --> 00:33:08,940
cool then if there are no other

911
00:33:08,940 --> 00:33:10,500
questions uh thank you so much for

912
00:33:10,500 --> 00:33:12,600
coming and have an amazing lunch after

913
00:33:12,600 --> 00:33:13,980
that

914
00:33:13,980 --> 00:33:16,740
who thanks nalcon I'll just cut it off

915
00:33:16,740 --> 00:33:19,820
thank you so much Mom

