1
00:00:00,740 --> 00:00:08,540
my friend said Omar said my name is

2
00:00:05,160 --> 00:00:14,009
Aaron and that's my Twitter reference I

3
00:00:08,540 --> 00:00:18,198
work for Deloitte remember of cheap we

4
00:00:14,009 --> 00:00:21,180
work on CTF and we are delighted to

5
00:00:18,199 --> 00:00:23,730
tackle what security issues some of our

6
00:00:21,180 --> 00:00:26,820
friends have conducted some sessions

7
00:00:23,730 --> 00:00:29,449
here and given some presentations what

8
00:00:26,820 --> 00:00:32,940
I'd like to talk here is how to

9
00:00:29,449 --> 00:00:35,820
manipulate the process on the fly in the

10
00:00:32,940 --> 00:00:38,790
case of upperworld I'm not going to talk

11
00:00:35,820 --> 00:00:41,910
about things I don't know you have to

12
00:00:38,790 --> 00:00:44,399
have a cell ground to stand down so

13
00:00:41,910 --> 00:00:47,779
please read what we said last year on

14
00:00:44,399 --> 00:00:50,489
auditing and iPhone applications and

15
00:00:47,780 --> 00:00:54,710
what I would like to explain is another

16
00:00:50,489 --> 00:00:59,180
method alternative method for auditing

17
00:00:54,710 --> 00:01:03,449
or to modify applications real-time

18
00:00:59,180 --> 00:01:06,330
execution time and the new thing here is

19
00:01:03,449 --> 00:01:10,140
how to manipulate this on the fly or go

20
00:01:06,330 --> 00:01:12,780
to talk about Apple what wearables and I

21
00:01:10,140 --> 00:01:14,700
haven't seen a single person no papers

22
00:01:12,780 --> 00:01:19,350
no nothing about what I'm going to say

23
00:01:14,700 --> 00:01:23,490
so it's de novo and so we'll see this

24
00:01:19,350 --> 00:01:26,509
and without Jamie so the first thing I'd

25
00:01:23,490 --> 00:01:29,490
like to mention is and allow me to say

26
00:01:26,509 --> 00:01:33,570
that I have to give some theoretical

27
00:01:29,490 --> 00:01:35,009
background to understand this and to

28
00:01:33,570 --> 00:01:36,990
have the cell girl to stand down

29
00:01:35,009 --> 00:01:45,149
afterwards you'll be able to solve

30
00:01:36,990 --> 00:01:51,679
problems if any so first thing I PA file

31
00:01:45,149 --> 00:01:54,810
formats in the iPhone we have zip files

32
00:01:51,680 --> 00:01:58,460
containing the application mobile

33
00:01:54,810 --> 00:02:04,729
application for iOS Apple is using now

34
00:01:58,460 --> 00:02:09,149
the l ZF s which is a library

35
00:02:04,729 --> 00:02:10,310
modification and this file is just a zip

36
00:02:09,149 --> 00:02:13,250
file

37
00:02:10,310 --> 00:02:16,489
the application and if it's compatible

38
00:02:13,250 --> 00:02:18,680
with what you have the iPhone as the

39
00:02:16,489 --> 00:02:20,950
word supplication at the same time you

40
00:02:18,680 --> 00:02:24,410
can install this using the USB or

41
00:02:20,950 --> 00:02:27,890
over-the-air the web side you can

42
00:02:24,410 --> 00:02:32,599
connect to it or using the Apple Store

43
00:02:27,890 --> 00:02:35,869
and the Apple Store are suffered with

44
00:02:32,599 --> 00:02:39,819
the DDM its proprietary is a fair play

45
00:02:35,870 --> 00:02:44,269
and they are suffered and to be able to

46
00:02:39,819 --> 00:02:45,980
use all the IPA inside the device we

47
00:02:44,269 --> 00:02:48,560
have to have the signature unless you

48
00:02:45,980 --> 00:02:55,510
have your J brain you have to say that

49
00:02:48,560 --> 00:02:55,510
this is executed in sand box sandbox

50
00:02:57,580 --> 00:03:03,680
talk about the internal structure of the

51
00:03:00,110 --> 00:03:06,140
file we see here in general terms the

52
00:03:03,680 --> 00:03:08,450
general structure and I'm going to

53
00:03:06,140 --> 00:03:12,619
elaborate on each component we consider

54
00:03:08,450 --> 00:03:15,500
as important here so first thing we see

55
00:03:12,620 --> 00:03:19,220
when we open and we unzip one of the

56
00:03:15,500 --> 00:03:24,470
files if it comes from Apple Store we

57
00:03:19,220 --> 00:03:28,329
have those two the iTunes and the one

58
00:03:24,470 --> 00:03:31,430
the iTunes metadata those two files

59
00:03:28,329 --> 00:03:33,470
firstly contain the image you get and

60
00:03:31,430 --> 00:03:37,670
the Apple Store and the second one

61
00:03:33,470 --> 00:03:42,109
contains no metadata they are not

62
00:03:37,670 --> 00:03:45,768
required to be able to install this on

63
00:03:42,109 --> 00:03:48,380
the iPhone on your device if they're not

64
00:03:45,769 --> 00:03:50,319
it's going to be installed anyway anyway

65
00:03:48,380 --> 00:03:54,109
even with other files

66
00:03:50,319 --> 00:03:57,700
anatomy you have a payload the payload

67
00:03:54,109 --> 00:04:03,470
which is inside the application as such

68
00:03:57,700 --> 00:04:06,619
inside the payload we have the a PP dot

69
00:04:03,470 --> 00:04:09,799
a PP extension in the Macintosh you'll

70
00:04:06,620 --> 00:04:12,620
have to click on the right-hand button

71
00:04:09,799 --> 00:04:18,350
and you have to show this then we go

72
00:04:12,620 --> 00:04:23,160
inside and the main thing is the

73
00:04:18,350 --> 00:04:25,169
info as you see here plist and that

74
00:04:23,160 --> 00:04:27,509
contains the configuration of the

75
00:04:25,169 --> 00:04:30,448
application we see the name of the

76
00:04:27,509 --> 00:04:33,479
binary to be executed when we open this

77
00:04:30,449 --> 00:04:35,699
a PP and we have the Google ID which is

78
00:04:33,479 --> 00:04:40,139
an identifier of the applications icon

79
00:04:35,699 --> 00:04:43,919
were going to show here and the history

80
00:04:40,139 --> 00:04:48,090
board and we have here information on

81
00:04:43,919 --> 00:04:50,820
the configuration security configuration

82
00:04:48,090 --> 00:04:53,969
and more options all the very many

83
00:04:50,820 --> 00:04:57,150
possible options are the year our URL

84
00:04:53,970 --> 00:05:01,889
that we find down here once you get the

85
00:04:57,150 --> 00:05:04,080
binary name using the info.plist we can

86
00:05:01,889 --> 00:05:06,660
retrieve it who can localize it and you

87
00:05:04,080 --> 00:05:08,849
have the application if it is a native

88
00:05:06,660 --> 00:05:11,340
application that code will be there with

89
00:05:08,849 --> 00:05:13,440
exceptional pro libraries and so on and

90
00:05:11,340 --> 00:05:15,210
the multi platform framework this will

91
00:05:13,440 --> 00:05:16,770
be installed differently but if it is

92
00:05:15,210 --> 00:05:19,530
native the code should be there that's

93
00:05:16,770 --> 00:05:27,930
important don't forget about what we

94
00:05:19,530 --> 00:05:30,840
have to say is that is that much up and

95
00:05:27,930 --> 00:05:34,740
it's the way it's used in Macintosh the

96
00:05:30,840 --> 00:05:38,070
architecture is fast binary that means

97
00:05:34,740 --> 00:05:40,260
that good contain several architectures

98
00:05:38,070 --> 00:05:44,520
in the same on the same file who have

99
00:05:40,260 --> 00:05:47,669
iPhone 5 32 bytes we have architecture

100
00:05:44,520 --> 00:05:50,520
and then the iPhone 6 64 you are the

101
00:05:47,669 --> 00:05:52,830
different architecture twice as many and

102
00:05:50,520 --> 00:05:54,659
you have the two possibilities it

103
00:05:52,830 --> 00:05:59,609
depends on the type of I found you will

104
00:05:54,659 --> 00:06:02,490
upload one or another we have to say

105
00:05:59,610 --> 00:06:04,380
that if it comes from Apple store the

106
00:06:02,490 --> 00:06:07,320
file will be ciphered you have the

107
00:06:04,380 --> 00:06:09,810
headers that are readable and very been

108
00:06:07,320 --> 00:06:12,810
a day there but the most important part

109
00:06:09,810 --> 00:06:15,270
is ciphered everyone to look at all the

110
00:06:12,810 --> 00:06:20,400
properties we could obtain please use a

111
00:06:15,270 --> 00:06:22,310
tool Oh to kendama the forensic ortho

112
00:06:20,400 --> 00:06:24,469
cathode then we have different resources

113
00:06:22,310 --> 00:06:27,800
that

114
00:06:24,469 --> 00:06:30,050
in use the developer uses this depends

115
00:06:27,800 --> 00:06:32,330
on the developer the way they had

116
00:06:30,050 --> 00:06:35,809
focused redevelopment on the one hand

117
00:06:32,330 --> 00:06:37,969
side you see files that are less

118
00:06:35,809 --> 00:06:40,519
important so to speak for the execution

119
00:06:37,969 --> 00:06:44,269
of the application like images strings

120
00:06:40,519 --> 00:06:48,459
the assets dot car it is sort of a

121
00:06:44,269 --> 00:06:53,529
packet of many files of the sort and

122
00:06:48,459 --> 00:06:57,199
then etc on the other hand we find

123
00:06:53,529 --> 00:07:00,919
libraries libraries frameworks are the

124
00:06:57,199 --> 00:07:04,189
mean it's a dynamic library of the

125
00:07:00,919 --> 00:07:07,128
binary we've seen before or the

126
00:07:04,189 --> 00:07:12,349
frameworks frameworks have inside a

127
00:07:07,129 --> 00:07:14,809
binary that said D while Lib there are

128
00:07:12,349 --> 00:07:18,469
very many resources that are required

129
00:07:14,809 --> 00:07:25,309
for the library then we might have the

130
00:07:18,469 --> 00:07:28,459
dynamic library the dy li b extension we

131
00:07:25,309 --> 00:07:32,360
might have files for the graphical

132
00:07:28,459 --> 00:07:38,539
interface into face like storyboard or

133
00:07:32,360 --> 00:07:41,479
the ni b and configuration files dot P

134
00:07:38,539 --> 00:07:45,318
list files configuration files I'm

135
00:07:41,479 --> 00:07:47,229
boring and this is boring information we

136
00:07:45,319 --> 00:07:52,419
know about it

137
00:07:47,229 --> 00:07:55,969
why not a conformal a party after the

138
00:07:52,419 --> 00:07:59,269
after siring there's an executing the

139
00:07:55,969 --> 00:08:00,949
application in the Apple environment the

140
00:07:59,269 --> 00:08:03,829
most important thing is the code

141
00:08:00,949 --> 00:08:07,249
signature this file will have another

142
00:08:03,829 --> 00:08:11,110
file inside XML type of file inside

143
00:08:07,249 --> 00:08:15,889
would find all the list with all the

144
00:08:11,110 --> 00:08:20,059
files having the IPA and the value which

145
00:08:15,889 --> 00:08:24,349
is a hash of the of the file plus they

146
00:08:20,059 --> 00:08:28,219
release everything is signature with a

147
00:08:24,349 --> 00:08:30,860
signature so we can then avoid all the

148
00:08:28,219 --> 00:08:33,909
signatures all the resources of the IPA

149
00:08:30,860 --> 00:08:35,560
if we take one from the previous release

150
00:08:33,909 --> 00:08:38,260
it won't

151
00:08:35,559 --> 00:08:42,069
we try to get one of an older version

152
00:08:38,260 --> 00:08:45,700
and then we have the embedded mova

153
00:08:42,070 --> 00:08:48,970
mobile provision this is embedded so

154
00:08:45,700 --> 00:08:52,330
this is optional you won't find this

155
00:08:48,970 --> 00:08:55,930
when you download the IPA from the Apple

156
00:08:52,330 --> 00:08:59,080
Store this is a provisioning profile the

157
00:08:55,930 --> 00:09:00,760
developer is identified devices where

158
00:08:59,080 --> 00:09:03,540
you could execute the application while

159
00:09:00,760 --> 00:09:06,610
the idea of application and the

160
00:09:03,540 --> 00:09:10,390
entitlements entitlements which are

161
00:09:06,610 --> 00:09:16,290
capacities capacities for instance you

162
00:09:10,390 --> 00:09:19,840
could use the part of the for instance

163
00:09:16,290 --> 00:09:21,490
access to certain things that I will

164
00:09:19,840 --> 00:09:25,300
explain later it's never the moment now

165
00:09:21,490 --> 00:09:33,430
to explain this I think it's okay I

166
00:09:25,300 --> 00:09:35,829
think I'm done with this in the pointer

167
00:09:33,430 --> 00:09:39,010
mahapatra was male and now the world

168
00:09:35,830 --> 00:09:40,900
should application if we see compatible

169
00:09:39,010 --> 00:09:44,260
application with the Apple watch we see

170
00:09:40,900 --> 00:09:46,990
a file watch file it will get inside the

171
00:09:44,260 --> 00:09:49,300
file we'll see another application like

172
00:09:46,990 --> 00:09:52,810
the one I have explained before but this

173
00:09:49,300 --> 00:09:57,130
is a short application reduced version

174
00:09:52,810 --> 00:10:03,069
for the Apple watch and then it is the

175
00:09:57,130 --> 00:10:06,540
watchkit dot a PP this part is exactly

176
00:10:03,070 --> 00:10:09,250
the same I explained before only that

177
00:10:06,540 --> 00:10:11,339
here we have the binary that's lacking

178
00:10:09,250 --> 00:10:13,660
and this is compiled for the

179
00:10:11,340 --> 00:10:15,310
architecture of the CPU of the watch

180
00:10:13,660 --> 00:10:16,930
that's different from the iPhone

181
00:10:15,310 --> 00:10:19,270
architecture if you know about upper

182
00:10:16,930 --> 00:10:21,430
world you know that when we try to dump

183
00:10:19,270 --> 00:10:24,850
a binary from an iPhone we can a dump

184
00:10:21,430 --> 00:10:27,670
the upper watch spot because basically

185
00:10:24,850 --> 00:10:30,220
it's because of the CPU that's different

186
00:10:27,670 --> 00:10:33,780
you cannot execute it and you cannot

187
00:10:30,220 --> 00:10:38,110
upload this onto the memory this binary

188
00:10:33,780 --> 00:10:40,140
does is to the graphical interface and

189
00:10:38,110 --> 00:10:43,960
the extension where we have all the

190
00:10:40,140 --> 00:10:46,569
logic of the application the graphical

191
00:10:43,960 --> 00:10:48,580
interface can be seen here most of the

192
00:10:46,570 --> 00:10:52,480
time it's just to file what we have

193
00:10:48,580 --> 00:10:54,630
inside as the interface does storyboard

194
00:10:52,480 --> 00:10:58,660
it's compiling the graphical interface

195
00:10:54,630 --> 00:11:01,600
developed by the developer in Xcode we

196
00:10:58,660 --> 00:11:04,209
can dump this with several tools we see

197
00:11:01,600 --> 00:11:06,600
all the properties all the elements and

198
00:11:04,210 --> 00:11:09,160
all actions actions can be seen here

199
00:11:06,600 --> 00:11:12,580
actions could be see at the interface

200
00:11:09,160 --> 00:11:14,890
dot P list a configuration file where

201
00:11:12,580 --> 00:11:17,800
you will see all the elements at I'm

202
00:11:14,890 --> 00:11:20,380
sorry the interface storyboard this is

203
00:11:17,800 --> 00:11:22,060
extremely useful as a file because we

204
00:11:20,380 --> 00:11:26,170
want to know the action when you press a

205
00:11:22,060 --> 00:11:28,689
button then we can open the class and

206
00:11:26,170 --> 00:11:31,780
look for the function to be executed

207
00:11:28,690 --> 00:11:36,660
directly so while looking for codes and

208
00:11:31,780 --> 00:11:36,660
so on it's very easy using this method

209
00:11:36,900 --> 00:11:42,400
notification dot the list is the same

210
00:11:39,820 --> 00:11:46,420
but for the notification window same

211
00:11:42,400 --> 00:11:49,240
thing let's go back to the watch file

212
00:11:46,420 --> 00:11:54,040
then last but not least with the plug-in

213
00:11:49,240 --> 00:11:56,470
coq plug-in file and the logical part of

214
00:11:54,040 --> 00:11:59,170
the application is not executed at the

215
00:11:56,470 --> 00:12:01,210
previous binary but it is an extension

216
00:11:59,170 --> 00:12:03,969
that's created to the extension is

217
00:12:01,210 --> 00:12:06,910
similar to the previous one it's a mini

218
00:12:03,970 --> 00:12:10,270
application here it is just an extension

219
00:12:06,910 --> 00:12:13,480
of replication everything animation we

220
00:12:10,270 --> 00:12:16,660
have here is exactly the same and this

221
00:12:13,480 --> 00:12:21,040
is when we have the logic of the

222
00:12:16,660 --> 00:12:28,810
application and of course here this

223
00:12:21,040 --> 00:12:32,170
binary be based for the reversing or if

224
00:12:28,810 --> 00:12:34,869
you want to hack or whatever the other

225
00:12:32,170 --> 00:12:37,180
binary is practically empty

226
00:12:34,870 --> 00:12:43,330
this is the one which you have to focus

227
00:12:37,180 --> 00:12:47,709
and am I too fast I see a no reaction

228
00:12:43,330 --> 00:12:49,540
from you questions on this part of my

229
00:12:47,710 --> 00:12:53,800
presentation questions about it

230
00:12:49,540 --> 00:12:55,689
comments no comment I think that back

231
00:12:53,800 --> 00:12:57,490
there if you want you get

232
00:12:55,690 --> 00:12:59,790
you could disappear to go to sleep take

233
00:12:57,490 --> 00:13:03,510
a nap which is a good idea

234
00:12:59,790 --> 00:13:03,510
no no it's joke

235
00:13:04,600 --> 00:13:10,870
this means a bit messy it could be a bit

236
00:13:08,050 --> 00:13:12,550
messy I have explained to this in five

237
00:13:10,870 --> 00:13:16,150
minutes so many elements so many things

238
00:13:12,550 --> 00:13:18,420
but here what we see is what you have to

239
00:13:16,150 --> 00:13:21,939
bear in mind is that this is like the

240
00:13:18,420 --> 00:13:23,469
Russian matryoshka one application set

241
00:13:21,940 --> 00:13:25,660
another obligation another another

242
00:13:23,470 --> 00:13:28,330
application I have decided to skip many

243
00:13:25,660 --> 00:13:30,550
things but this is the idea and we have

244
00:13:28,330 --> 00:13:32,610
to bear in mind that the watch is

245
00:13:30,550 --> 00:13:35,290
executed with a different architecture

246
00:13:32,610 --> 00:13:37,000
and we use a different library and it

247
00:13:35,290 --> 00:13:39,010
works differently even though it is

248
00:13:37,000 --> 00:13:45,040
inside the same IPA

249
00:13:39,010 --> 00:13:48,250
it goes inside as I said before IPA are

250
00:13:45,040 --> 00:13:50,530
executed in sandbox it's a controlled

251
00:13:48,250 --> 00:13:53,560
environment where the upper age

252
00:13:50,530 --> 00:13:56,800
operating system prevents certain

253
00:13:53,560 --> 00:14:00,510
actions and it's limiting the access to

254
00:13:56,800 --> 00:14:03,849
certain resources sandbox is controlled

255
00:14:00,510 --> 00:14:07,630
environment main elements we can find in

256
00:14:03,850 --> 00:14:10,180
the sandbox which is a virtual element

257
00:14:07,630 --> 00:14:13,720
environment we have application the IP a

258
00:14:10,180 --> 00:14:16,449
compute is copied here and the payload

259
00:14:13,720 --> 00:14:20,350
the convent of the payload is reproduced

260
00:14:16,450 --> 00:14:22,990
here and then we have another another

261
00:14:20,350 --> 00:14:25,630
folder considering data there are

262
00:14:22,990 --> 00:14:28,540
different types of files like database

263
00:14:25,630 --> 00:14:31,180
cache memories cookies it depends on the

264
00:14:28,540 --> 00:14:33,550
developer what's going to be stored

265
00:14:31,180 --> 00:14:36,130
that's necessary for the functioning of

266
00:14:33,550 --> 00:14:39,219
the application last but not least and I

267
00:14:36,130 --> 00:14:42,280
include this inside the sandbox because

268
00:14:39,220 --> 00:14:44,200
I think it is important and I I don't

269
00:14:42,280 --> 00:14:49,720
know some other people interpreted in a

270
00:14:44,200 --> 00:14:52,270
different node where within the

271
00:14:49,720 --> 00:14:54,880
operating system if you don't have the

272
00:14:52,270 --> 00:14:58,569
same obligation of your inside you will

273
00:14:54,880 --> 00:14:59,320
not have inside this cage chain K chain

274
00:14:58,570 --> 00:15:04,300
is

275
00:14:59,320 --> 00:15:06,130
or keychain is the place where you have

276
00:15:04,300 --> 00:15:11,910
the most sensitive elements for the

277
00:15:06,130 --> 00:15:11,910
application the keychain and then

278
00:15:14,370 --> 00:15:22,089
considering the watch what's part of it

279
00:15:19,060 --> 00:15:24,609
how many of you have you got the Apple

280
00:15:22,089 --> 00:15:27,759
watch the wearable are you wearing an

281
00:15:24,610 --> 00:15:32,500
apple what's the application of the

282
00:15:27,759 --> 00:15:35,949
Apple watch is communicating with iPhone

283
00:15:32,500 --> 00:15:39,880
applications such a mode that the logic

284
00:15:35,949 --> 00:15:44,290
is inside the key extension what you

285
00:15:39,880 --> 00:15:46,329
have here the watch get what get

286
00:15:44,290 --> 00:15:49,029
extension will communicate with

287
00:15:46,329 --> 00:15:52,388
operating system of the blood using

288
00:15:49,029 --> 00:15:55,120
bluetooth Wi-Fi those are the two ways

289
00:15:52,389 --> 00:15:57,100
of communication with either and then

290
00:15:55,120 --> 00:15:59,470
they use one of those channels will

291
00:15:57,100 --> 00:16:04,240
communicate with the operating system of

292
00:15:59,470 --> 00:16:07,209
the is system this will give access to

293
00:16:04,240 --> 00:16:10,019
the container of application and this

294
00:16:07,209 --> 00:16:15,160
will be executed will be communication

295
00:16:10,019 --> 00:16:17,019
towards the application in such this is

296
00:16:15,160 --> 00:16:20,829
more complicated there are very many

297
00:16:17,019 --> 00:16:23,199
more elements but here as you see and

298
00:16:20,829 --> 00:16:26,109
what I am presenting here it is rather

299
00:16:23,199 --> 00:16:28,479
well explained but in general the

300
00:16:26,110 --> 00:16:30,579
important thing is what I'm saying there

301
00:16:28,480 --> 00:16:33,130
is a communication channel directly

302
00:16:30,579 --> 00:16:36,339
stablished the among the two

303
00:16:33,130 --> 00:16:39,250
applications same thing in the opposite

304
00:16:36,339 --> 00:16:41,769
mode the iPhone application through the

305
00:16:39,250 --> 00:16:45,819
same channel will communicate well they

306
00:16:41,769 --> 00:16:48,850
watch application and the Apple watch

307
00:16:45,819 --> 00:16:52,469
world what we have as the Isles

308
00:16:48,850 --> 00:16:55,380
reduced version it is the iOS the

309
00:16:52,470 --> 00:16:58,600
structure is the same but it's a reduced

310
00:16:55,380 --> 00:17:02,889
limited version and the difference is

311
00:16:58,600 --> 00:17:05,740
that there is a system libraries reduced

312
00:17:02,889 --> 00:17:06,720
adapted especially for the little screen

313
00:17:05,740 --> 00:17:09,899
we have

314
00:17:06,720 --> 00:17:13,259
the reduced size of elements and the

315
00:17:09,898 --> 00:17:19,049
architecture is different after v7k and

316
00:17:13,259 --> 00:17:21,509
they arm 64 32 v8 and what happens if we

317
00:17:19,049 --> 00:17:24,869
try to execute even if we compile were

318
00:17:21,509 --> 00:17:26,849
the v7k the iPhone obligation and the

319
00:17:24,869 --> 00:17:29,129
watch directly even though we compile

320
00:17:26,849 --> 00:17:31,820
this it's not going to work because of

321
00:17:29,129 --> 00:17:35,070
the library and if we had the iPhone

322
00:17:31,820 --> 00:17:38,240
application we uploaded the watch

323
00:17:35,070 --> 00:17:40,799
libraries if it were not compiled in the

324
00:17:38,240 --> 00:17:44,639
v7k it would work either

325
00:17:40,799 --> 00:17:48,450
so let's see how to get into the safety

326
00:17:44,639 --> 00:17:51,449
environment well first of all the thing

327
00:17:48,450 --> 00:17:55,320
is that last year we explained jailbreak

328
00:17:51,450 --> 00:17:58,259
jailbreak is not the only way to get

329
00:17:55,320 --> 00:18:00,149
into this application environment of the

330
00:17:58,259 --> 00:18:03,960
context of the application of course

331
00:18:00,149 --> 00:18:04,949
this communication channel the sandbox

332
00:18:03,960 --> 00:18:06,929
and so on

333
00:18:04,950 --> 00:18:08,700
but there is the other action to modify

334
00:18:06,929 --> 00:18:10,019
the application and the same obligation

335
00:18:08,700 --> 00:18:12,870
will open a communication channel

336
00:18:10,019 --> 00:18:18,000
against this memory towards the memory

337
00:18:12,870 --> 00:18:20,939
and then why why is it so we have this

338
00:18:18,000 --> 00:18:26,610
alternative method because Jake brake

339
00:18:20,940 --> 00:18:29,820
will have the counts no it is quite

340
00:18:26,610 --> 00:18:32,699
there's a lot of versatility flexibility

341
00:18:29,820 --> 00:18:35,730
easy user friendly there are very many

342
00:18:32,700 --> 00:18:38,759
tools there is a hitch community almost

343
00:18:35,730 --> 00:18:41,850
everyone uses jailbreak the problem with

344
00:18:38,759 --> 00:18:44,429
the jailbreak is that in the last iOS

345
00:18:41,850 --> 00:18:48,539
version there's no jailbreak available

346
00:18:44,429 --> 00:18:51,299
now whether 12 1 to release there is a

347
00:18:48,539 --> 00:18:54,330
jailbreak but in general we need a new

348
00:18:51,299 --> 00:18:57,860
exploit and to create a jailbreak that

349
00:18:54,330 --> 00:19:00,960
is not only one exploit but chain of

350
00:18:57,860 --> 00:19:05,008
vulnerability things and then this

351
00:19:00,960 --> 00:19:07,980
complicates the difficulties and the

352
00:19:05,009 --> 00:19:10,769
fact of publishing this and it will cost

353
00:19:07,980 --> 00:19:12,960
a lot of money and don't forget that's

354
00:19:10,769 --> 00:19:15,510
big money what happens with the jail

355
00:19:12,960 --> 00:19:19,740
brain jailbreak

356
00:19:15,510 --> 00:19:25,500
case of watch today version release 5.2

357
00:19:19,740 --> 00:19:28,860
was published and jailbreak is using 4.2

358
00:19:25,500 --> 00:19:30,930
one release we have a new or release

359
00:19:28,860 --> 00:19:35,669
there is a possibility of using the tool

360
00:19:30,930 --> 00:19:39,870
I boost I was told I was tool this is

361
00:19:35,670 --> 00:19:43,530
the adapter the I boss I don't know if

362
00:19:39,870 --> 00:19:48,929
you realize that and they watch if you

363
00:19:43,530 --> 00:19:52,110
take their out if you take out you see

364
00:19:48,930 --> 00:19:55,410
the leather thing you have a little hole

365
00:19:52,110 --> 00:19:59,159
where you can connect the cable and then

366
00:19:55,410 --> 00:20:01,890
it is connected through USB and with

367
00:19:59,160 --> 00:20:03,660
software you can change the version this

368
00:20:01,890 --> 00:20:06,540
is different from the iPhone when you're

369
00:20:03,660 --> 00:20:08,670
trying to have a downgrading impossible

370
00:20:06,540 --> 00:20:11,070
because it is already there is the

371
00:20:08,670 --> 00:20:13,770
installation and but in the watch is

372
00:20:11,070 --> 00:20:20,070
different I haven't given this a try but

373
00:20:13,770 --> 00:20:22,800
if you want you can till the f3 s3 I

374
00:20:20,070 --> 00:20:26,879
have an s4 version of the Apple watch

375
00:20:22,800 --> 00:20:31,409
this is for s1 version there are release

376
00:20:26,880 --> 00:20:34,830
there is s 1 s 2 s 3 there is s 4 so

377
00:20:31,410 --> 00:20:37,440
there is no yet possibility of having a

378
00:20:34,830 --> 00:20:41,429
schedule for me as for even though we

379
00:20:37,440 --> 00:20:45,230
have jailbreak and they up what we have

380
00:20:41,430 --> 00:20:50,040
only what we are only deleting the

381
00:20:45,230 --> 00:20:52,950
sandbox restriction but there is no no

382
00:20:50,040 --> 00:20:57,840
freedom no Cydia the freed is not

383
00:20:52,950 --> 00:21:01,350
compatible sigh crypt and those idea no

384
00:20:57,840 --> 00:21:03,840
freedom no sigh crypt nothing it's a

385
00:21:01,350 --> 00:21:07,290
very restricted community it's very

386
00:21:03,840 --> 00:21:09,990
strict and then you have to do it

387
00:21:07,290 --> 00:21:12,570
yourself there is no community behind

388
00:21:09,990 --> 00:21:15,930
the Apple watch and that's a very

389
00:21:12,570 --> 00:21:18,629
limited possibility then what for what

390
00:21:15,930 --> 00:21:22,620
do we have this jailbreak and they up

391
00:21:18,630 --> 00:21:25,740
what the only usefulness is to dump

392
00:21:22,620 --> 00:21:28,330
applications when they come from the

393
00:21:25,740 --> 00:21:30,820
Apple Store to develop new things for

394
00:21:28,330 --> 00:21:35,199
upwards and to keep with the research

395
00:21:30,820 --> 00:21:38,950
keep on doing new things and as we saw

396
00:21:35,200 --> 00:21:41,740
FC seen the of things and the negative

397
00:21:38,950 --> 00:21:43,600
things of using jailbreak and now I'm

398
00:21:41,740 --> 00:21:45,610
going to give alternative measures

399
00:21:43,600 --> 00:21:47,770
alternative possibilities while getting

400
00:21:45,610 --> 00:21:50,280
into the context of the application

401
00:21:47,770 --> 00:21:54,129
which is injecting and signing the

402
00:21:50,280 --> 00:21:58,710
executable and the normal thing is to

403
00:21:54,130 --> 00:22:02,260
use libraries that are already well

404
00:21:58,710 --> 00:22:06,510
fine-tuned that opens a simple pathway

405
00:22:02,260 --> 00:22:08,080
it's smooth possibilities we use freedom

406
00:22:06,510 --> 00:22:12,090
look at all

407
00:22:08,080 --> 00:22:15,040
freedom was created by Andres and it's

408
00:22:12,090 --> 00:22:20,610
Andre and this is a Twitter all they

409
00:22:15,040 --> 00:22:24,520
have only a VR this is a Java Script

410
00:22:20,610 --> 00:22:26,770
Java JavaScript motor engine that

411
00:22:24,520 --> 00:22:30,730
JavaScript will allow us to interact

412
00:22:26,770 --> 00:22:32,770
with the memory to hook to trace to

413
00:22:30,730 --> 00:22:36,400
interact with memory among other things

414
00:22:32,770 --> 00:22:43,660
and freedom freedom it's a set of tools

415
00:22:36,400 --> 00:22:45,880
but that's the baseline thing freedom as

416
00:22:43,660 --> 00:22:49,900
I said before we have a direct access

417
00:22:45,880 --> 00:22:52,360
which allows us to do the same thing as

418
00:22:49,900 --> 00:22:54,850
we did with the jailbreak within the

419
00:22:52,360 --> 00:22:57,100
context of the application not other

420
00:22:54,850 --> 00:22:59,620
applications but in the case of anything

421
00:22:57,100 --> 00:23:03,100
that's what we need just it to know how

422
00:22:59,620 --> 00:23:07,739
this application works and to know

423
00:23:03,100 --> 00:23:10,929
what's well done and what's fully gone

424
00:23:07,740 --> 00:23:13,570
this is for whatever iOS release iOS

425
00:23:10,930 --> 00:23:16,810
version and then if we have an

426
00:23:13,570 --> 00:23:19,090
application that is new and we need the

427
00:23:16,810 --> 00:23:21,340
latest iOS version this is the only

428
00:23:19,090 --> 00:23:23,980
method with good use on the other side

429
00:23:21,340 --> 00:23:26,439
this is a very complex process with a

430
00:23:23,980 --> 00:23:29,110
lot of steps there isn't that simple as

431
00:23:26,440 --> 00:23:32,380
installing one obligation that dots does

432
00:23:29,110 --> 00:23:34,050
everything one size fits all know here

433
00:23:32,380 --> 00:23:37,500
the greatest advantage

434
00:23:34,050 --> 00:23:41,280
that we need the Installer a not to be

435
00:23:37,500 --> 00:23:44,520
suffered it requires I without ciphering

436
00:23:41,280 --> 00:23:47,490
and if not the clients should give us

437
00:23:44,520 --> 00:23:51,080
the Installer without suffering because

438
00:23:47,490 --> 00:23:59,100
to dump it ourselves require using

439
00:23:51,080 --> 00:24:03,689
jailbreak now what happens with Freda on

440
00:23:59,100 --> 00:24:07,320
in watch like I said before you can do

441
00:24:03,690 --> 00:24:09,150
many things but for the time being you

442
00:24:07,320 --> 00:24:15,149
can you can't do Freda

443
00:24:09,150 --> 00:24:19,490
it depends on a custom library with

444
00:24:15,150 --> 00:24:23,760
channel memory for compilation and for

445
00:24:19,490 --> 00:24:25,950
the other activities so the architecture

446
00:24:23,760 --> 00:24:31,620
the new architecture is not provided for

447
00:24:25,950 --> 00:24:34,950
them the v8 thing they be the v8 for

448
00:24:31,620 --> 00:24:38,399
example so the 643 to v8 is not

449
00:24:34,950 --> 00:24:42,450
installed so we need to hook like in the

450
00:24:38,400 --> 00:24:49,140
old times by injecting our own custom dy

451
00:24:42,450 --> 00:24:54,210
lib we have we are working on that or we

452
00:24:49,140 --> 00:24:57,750
need to import other tools okay how do

453
00:24:54,210 --> 00:24:59,370
you do that so let's finish the

454
00:24:57,750 --> 00:25:03,150
theoretical part of the presentation

455
00:24:59,370 --> 00:25:05,909
let's see what how this is done so how

456
00:25:03,150 --> 00:25:09,630
the process of injecting and signing is

457
00:25:05,910 --> 00:25:13,140
done so well here you are a requirement

458
00:25:09,630 --> 00:25:17,600
it's a list of requirements so IPA not

459
00:25:13,140 --> 00:25:20,460
ciphered we need to use MCOs Macintosh

460
00:25:17,600 --> 00:25:24,919
MacBook for example you can have a

461
00:25:20,460 --> 00:25:27,570
virtual market my machine or hackintosh

462
00:25:24,920 --> 00:25:31,010
provided that they work well and you can

463
00:25:27,570 --> 00:25:34,379
use it use them and then we need to

464
00:25:31,010 --> 00:25:37,740
install Xcode then we need to have a

465
00:25:34,380 --> 00:25:41,429
free of charge Apple account

466
00:25:37,740 --> 00:25:43,409
I tried with the pain accounts of the

467
00:25:41,429 --> 00:25:46,039
process failed I don't know exactly why

468
00:25:43,409 --> 00:25:49,020
I tested it and the application is now

469
00:25:46,039 --> 00:25:50,908
possible so the dynamic a library that

470
00:25:49,020 --> 00:25:53,418
we are going to inject in the process in

471
00:25:50,909 --> 00:25:58,649
the case of iPhone tomorrow's used

472
00:25:53,419 --> 00:26:03,059
libraries Friday Frieda and then the

473
00:25:58,649 --> 00:26:06,350
answer D Y Lib will be injected in the

474
00:26:03,059 --> 00:26:08,970
executable the executable will be

475
00:26:06,350 --> 00:26:12,689
modified to understand it and store it

476
00:26:08,970 --> 00:26:15,240
in the memory fast Lang Syne which is a

477
00:26:12,690 --> 00:26:18,000
tool used by developers to for the

478
00:26:15,240 --> 00:26:21,870
automation of processes it's the only

479
00:26:18,000 --> 00:26:25,649
one I ever found let me tell you that in

480
00:26:21,870 --> 00:26:28,500
the world of security in Apple signing

481
00:26:25,649 --> 00:26:32,309
an application with Apple watch has not

482
00:26:28,500 --> 00:26:35,520
been done yet so once I started finding

483
00:26:32,309 --> 00:26:37,320
this out I only found this tool the

484
00:26:35,520 --> 00:26:43,500
problem is that if we have a library

485
00:26:37,320 --> 00:26:51,418
that is outside the framework folder it

486
00:26:43,500 --> 00:26:53,460
fails and they are going to adapt the

487
00:26:51,419 --> 00:26:56,850
adaptability for Apple watch I mean

488
00:26:53,460 --> 00:26:59,720
discussing with the providers in this

489
00:26:56,850 --> 00:27:02,610
regard then we need I of deploy to

490
00:26:59,720 --> 00:27:04,850
install the IPA in the and the iPhone

491
00:27:02,610 --> 00:27:10,678
and then we also need to be patient

492
00:27:04,850 --> 00:27:12,059
because tune find the process and the

493
00:27:10,679 --> 00:27:14,010
environment of the beginning can be a

494
00:27:12,059 --> 00:27:15,960
little complicated because it requires

495
00:27:14,010 --> 00:27:18,450
many steps to be taken

496
00:27:15,960 --> 00:27:20,460
I'll try to explain this as simple as

497
00:27:18,450 --> 00:27:21,990
possible in the end at the end of the

498
00:27:20,460 --> 00:27:25,110
day is a long process or it may be a

499
00:27:21,990 --> 00:27:29,159
complicated process but it's the only

500
00:27:25,110 --> 00:27:31,799
way we have there's no way no other way

501
00:27:29,159 --> 00:27:36,029
to do that but at least we have paved

502
00:27:31,799 --> 00:27:39,330
the way for up watch so the step to

503
00:27:36,029 --> 00:27:41,460
follow first of all you need to create a

504
00:27:39,330 --> 00:27:44,189
developer certificate this is done

505
00:27:41,460 --> 00:27:48,299
automatically with a key then we need to

506
00:27:44,190 --> 00:27:49,530
create a testing probe test project in

507
00:27:48,299 --> 00:27:53,190
order to include

508
00:27:49,530 --> 00:27:55,560
provisioning profiles that will be used

509
00:27:53,190 --> 00:27:58,740
for the application we wanna sign and

510
00:27:55,560 --> 00:28:01,770
pass them pass it through them I mean

511
00:27:58,740 --> 00:28:03,840
take the test so chain we have the we

512
00:28:01,770 --> 00:28:06,980
have the a application we want to sign

513
00:28:03,840 --> 00:28:09,300
this and we are going to move it to

514
00:28:06,980 --> 00:28:12,180
through the application called

515
00:28:09,300 --> 00:28:16,430
application B where we have the profile

516
00:28:12,180 --> 00:28:19,200
signatures and everything we also need

517
00:28:16,430 --> 00:28:23,690
libraries as I said before and then we

518
00:28:19,200 --> 00:28:23,690
need to inject sign install and enjoy

519
00:28:25,670 --> 00:28:31,710
steps to create the certificate we can

520
00:28:28,800 --> 00:28:35,669
we have a dickhole and I'm going to

521
00:28:31,710 --> 00:28:39,810
explain you step by step right this is

522
00:28:35,670 --> 00:28:42,800
going to be useful for you when you will

523
00:28:39,810 --> 00:28:46,110
be able to use the internet to do that

524
00:28:42,800 --> 00:28:47,340
and this has been explained also on the

525
00:28:46,110 --> 00:28:51,629
internet so you can find the information

526
00:28:47,340 --> 00:28:55,110
so kick off preference account we click

527
00:28:51,630 --> 00:28:59,670
on plus we will be asked for the Apple

528
00:28:55,110 --> 00:29:03,659
ID we insert our free of charge account

529
00:28:59,670 --> 00:29:09,900
so step four says step one we select the

530
00:29:03,660 --> 00:29:13,530
account kik deploy and certificate will

531
00:29:09,900 --> 00:29:17,490
be generated and download and installed

532
00:29:13,530 --> 00:29:19,530
in the file and then we go to new

533
00:29:17,490 --> 00:29:22,110
project we create a new project if you

534
00:29:19,530 --> 00:29:24,870
want to apply watch application we

535
00:29:22,110 --> 00:29:25,709
should use an Apple watch Newport with

536
00:29:24,870 --> 00:29:28,530
Apple watch

537
00:29:25,710 --> 00:29:30,480
because is the basic as we said before

538
00:29:28,530 --> 00:29:35,850
on the basis I will tell you as I said

539
00:29:30,480 --> 00:29:37,290
before so will fill in all the fields so

540
00:29:35,850 --> 00:29:39,629
the problem is that you might have used

541
00:29:37,290 --> 00:29:44,129
the same name so we probably have to

542
00:29:39,630 --> 00:29:46,950
change the name but this project will be

543
00:29:44,130 --> 00:29:49,590
shown later with a demo to assign

544
00:29:46,950 --> 00:29:51,060
another application so it's good for you

545
00:29:49,590 --> 00:29:52,740
it's going to be useful for you to see

546
00:29:51,060 --> 00:29:56,149
this now because we're gonna see that in

547
00:29:52,740 --> 00:29:56,150
the demo once the project is created

548
00:29:56,630 --> 00:30:02,549
we don't need to insert any line of code

549
00:30:00,779 --> 00:30:05,510
but the most important thing to now is

550
00:30:02,549 --> 00:30:09,450
this part the Apple watch application

551
00:30:05,510 --> 00:30:12,360
should be there so that it can read and

552
00:30:09,450 --> 00:30:15,240
communicate with the Apple watch file so

553
00:30:12,360 --> 00:30:18,120
we need to have information and if we

554
00:30:15,240 --> 00:30:20,309
use the code sign tool that will be

555
00:30:18,120 --> 00:30:22,529
useful so and this profile we need to

556
00:30:20,309 --> 00:30:26,279
configure exactly the time the problem

557
00:30:22,529 --> 00:30:28,100
is that up group here this is unique for

558
00:30:26,279 --> 00:30:30,559
I mean unique for each application

559
00:30:28,100 --> 00:30:34,889
there's only one for each application so

560
00:30:30,559 --> 00:30:36,840
we will not be able to do that again so

561
00:30:34,889 --> 00:30:40,408
what is the problem in the code of the

562
00:30:36,840 --> 00:30:43,110
application we will also use this value

563
00:30:40,409 --> 00:30:47,820
if we want to think about them you will

564
00:30:43,110 --> 00:30:51,209
have to hook this this application trace

565
00:30:47,820 --> 00:30:55,889
it and change whatever might be changed

566
00:30:51,210 --> 00:30:59,010
so and then help in the health part it

567
00:30:55,889 --> 00:31:04,370
has we need to activate this option as

568
00:30:59,010 --> 00:31:15,059
well in order to avoid failure so it is

569
00:31:04,370 --> 00:31:17,699
this is the most then the same thing for

570
00:31:15,059 --> 00:31:21,470
the other project because we will be

571
00:31:17,700 --> 00:31:21,470
using several application this is the

572
00:31:22,010 --> 00:31:30,000
watch then the health kit and then the

573
00:31:25,860 --> 00:31:32,428
extension so forth and we have and will

574
00:31:30,000 --> 00:31:39,539
get this man and we need to click on the

575
00:31:32,429 --> 00:31:43,909
same options that we need to synchronize

576
00:31:39,539 --> 00:31:48,120
our mobile with a watch so product

577
00:31:43,909 --> 00:31:53,340
destination we select the third one our

578
00:31:48,120 --> 00:31:55,139
defines and then run and the mobile and

579
00:31:53,340 --> 00:31:57,470
empty application will be installed with

580
00:31:55,139 --> 00:31:59,459
nothing but one we will execute it the

581
00:31:57,470 --> 00:31:59,760
question will be what do you want to do

582
00:31:59,460 --> 00:32:04,909
with that

583
00:31:59,760 --> 00:32:07,770
so we include the options we can execute

584
00:32:04,909 --> 00:32:08,290
we don't eliminate it we don't delete it

585
00:32:07,770 --> 00:32:12,430
we live

586
00:32:08,290 --> 00:32:18,700
we live it like that and then we go back

587
00:32:12,430 --> 00:32:20,500
to Xcode this is a very important trick

588
00:32:18,700 --> 00:32:22,990
someone told me we don't have to use a

589
00:32:20,500 --> 00:32:27,700
navigator or anything so we go to cake

590
00:32:22,990 --> 00:32:31,000
code show in finder so we will get our

591
00:32:27,700 --> 00:32:34,240
application compiled for according to

592
00:32:31,000 --> 00:32:40,210
the iPhone architecture we access we

593
00:32:34,240 --> 00:32:43,810
enter and this is our questioning or we

594
00:32:40,210 --> 00:32:46,210
need to copy them for each one of

595
00:32:43,810 --> 00:32:48,940
applications or three of them so we name

596
00:32:46,210 --> 00:32:53,380
them differently so that we can identify

597
00:32:48,940 --> 00:32:55,750
that provision that we have for each

598
00:32:53,380 --> 00:32:57,870
application libraries the libraries will

599
00:32:55,750 --> 00:33:04,030
will be injecting for each application

600
00:32:57,870 --> 00:33:06,159
for iPhone and for watch for iPhone like

601
00:33:04,030 --> 00:33:10,570
I said before we talked about Friday

602
00:33:06,160 --> 00:33:13,720
Frieda and then once we inject it we

603
00:33:10,570 --> 00:33:17,230
have injected find out Frieda we can use

604
00:33:13,720 --> 00:33:20,670
some frameworks the one I like the most

605
00:33:17,230 --> 00:33:26,050
is passionfruit then we also used

606
00:33:20,670 --> 00:33:30,670
objection or brighter be our idea we can

607
00:33:26,050 --> 00:33:33,340
use also flex that is well spread in the

608
00:33:30,670 --> 00:33:38,680
developing world and also HTTP server

609
00:33:33,340 --> 00:33:45,459
debug very very useful I find this all

610
00:33:38,680 --> 00:33:47,470
so very useful like I said before let's

611
00:33:45,460 --> 00:33:50,380
go to a passion fruit passion fruit will

612
00:33:47,470 --> 00:33:53,950
give us a website connected to fry down

613
00:33:50,380 --> 00:33:56,680
Frieda and the mobile phone and it will

614
00:33:53,950 --> 00:34:00,370
provide us a lot of information about

615
00:33:56,680 --> 00:34:04,090
the application so we can see here where

616
00:34:00,370 --> 00:34:10,409
the executive all is where is the folder

617
00:34:04,090 --> 00:34:15,009
what data the URL it has a file manager

618
00:34:10,409 --> 00:34:17,520
to have access to the data folder to see

619
00:34:15,010 --> 00:34:20,550
all the parts created by the application

620
00:34:17,520 --> 00:34:25,040
the margins that are downloaded classes

621
00:34:20,550 --> 00:34:28,110
functions we can dump our graphic

622
00:34:25,040 --> 00:34:33,449
integration on the keychain can also be

623
00:34:28,110 --> 00:34:36,419
dumped the problem of passionfruit is

624
00:34:33,449 --> 00:34:38,399
that still the early stages that you're

625
00:34:36,418 --> 00:34:43,139
still developing it so it can take a

626
00:34:38,399 --> 00:34:47,399
while so we need to use either Friday

627
00:34:43,139 --> 00:34:51,359
console or do things manually flex like

628
00:34:47,399 --> 00:34:54,239
I said before is also useful this is not

629
00:34:51,360 --> 00:34:57,210
executed in the computer bar but in your

630
00:34:54,239 --> 00:35:03,419
mobile or cell phone application so we

631
00:34:57,210 --> 00:35:06,480
have a menu here with flex it allows us

632
00:35:03,420 --> 00:35:08,910
to do many things for example we can

633
00:35:06,480 --> 00:35:14,010
edit the interface of the application we

634
00:35:08,910 --> 00:35:16,160
can see the values we can see also the

635
00:35:14,010 --> 00:35:21,060
hidden objects we can change properties

636
00:35:16,160 --> 00:35:22,799
it has a viewer of all the requests of

637
00:35:21,060 --> 00:35:25,820
the application that goals that have

638
00:35:22,800 --> 00:35:30,090
been downloaded in the memory and also a

639
00:35:25,820 --> 00:35:31,940
file manager to see how many files and

640
00:35:30,090 --> 00:35:39,060
all the files that you've been using

641
00:35:31,940 --> 00:35:41,460
like I said before as you can see on the

642
00:35:39,060 --> 00:35:45,170
screen you have a file editor which is

643
00:35:41,460 --> 00:35:48,300
very useful because this library

644
00:35:45,170 --> 00:35:52,260
executes a web server in the same cell

645
00:35:48,300 --> 00:35:56,490
phone so we we access the mobile IP a

646
00:35:52,260 --> 00:35:59,160
and we will have a menu in Chinese and

647
00:35:56,490 --> 00:36:01,290
the one in the middle is the viewer the

648
00:35:59,160 --> 00:36:05,640
file VOE and another and the other

649
00:36:01,290 --> 00:36:07,380
option is the element viewer and here on

650
00:36:05,640 --> 00:36:09,210
the right you can see that it's good

651
00:36:07,380 --> 00:36:14,100
because there's a commercial software

652
00:36:09,210 --> 00:36:16,730
that is easy to use and for free so you

653
00:36:14,100 --> 00:36:21,540
continue in the interface all the

654
00:36:16,730 --> 00:36:23,430
elements that have been downloaded so

655
00:36:21,540 --> 00:36:27,470
these are the two options and then

656
00:36:23,430 --> 00:36:30,089
that's it what happens with the watch

657
00:36:27,470 --> 00:36:33,540
for iPhone everything has been developed

658
00:36:30,090 --> 00:36:38,220
but for I want things are not like that

659
00:36:33,540 --> 00:36:40,470
so I tried to create my watch framework

660
00:36:38,220 --> 00:36:46,439
project which is a dynamic library in

661
00:36:40,470 --> 00:36:49,020
the end I used the the auto hook basis

662
00:36:46,440 --> 00:36:52,290
which is the Chen codes you have the URL

663
00:36:49,020 --> 00:36:55,920
so you can copy paste project and then

664
00:36:52,290 --> 00:36:58,110
you copy paste then you edit following

665
00:36:55,920 --> 00:37:00,030
what what you want to do on the on your

666
00:36:58,110 --> 00:37:04,710
Apple watch and then you configure for

667
00:37:00,030 --> 00:37:09,750
Apple watch and compile it for watch for

668
00:37:04,710 --> 00:37:12,780
your watch this is the code that will be

669
00:37:09,750 --> 00:37:15,330
used that I used for the demo that I'm

670
00:37:12,780 --> 00:37:18,930
going to show you now the only thing

671
00:37:15,330 --> 00:37:22,230
that I modified here but you can find

672
00:37:18,930 --> 00:37:26,279
this on the internet so I put the output

673
00:37:22,230 --> 00:37:29,280
here at import and the name we need to

674
00:37:26,280 --> 00:37:31,260
also bear in mind target class which is

675
00:37:29,280 --> 00:37:36,470
the class actually we're going to copy

676
00:37:31,260 --> 00:37:40,650
to dump I'm sorry and then for for each

677
00:37:36,470 --> 00:37:42,660
function one hook we need to create two

678
00:37:40,650 --> 00:37:46,890
with the same name of the function and

679
00:37:42,660 --> 00:37:49,379
then and then one for hook one from for

680
00:37:46,890 --> 00:37:51,930
original the hook is the one that we'll

681
00:37:49,380 --> 00:37:58,080
be using if we want to execute the

682
00:37:51,930 --> 00:38:04,200
original you write original before and

683
00:37:58,080 --> 00:38:06,630
this code will show you a DC router as a

684
00:38:04,200 --> 00:38:11,100
test and there's a confirmation that you

685
00:38:06,630 --> 00:38:13,710
can run this application on your Apple

686
00:38:11,100 --> 00:38:16,830
watch and this is to show you that this

687
00:38:13,710 --> 00:38:21,110
is really possible so things are

688
00:38:16,830 --> 00:38:24,150
compiled and there you are our library

689
00:38:21,110 --> 00:38:27,270
we need to bear in mind that if the

690
00:38:24,150 --> 00:38:30,600
dynamic library is not signed as it is

691
00:38:27,270 --> 00:38:34,410
the case with freedom we need to sign it

692
00:38:30,600 --> 00:38:38,100
ourselves because we raise cycle it if

693
00:38:34,410 --> 00:38:39,930
it doesn't have a signature a prior

694
00:38:38,100 --> 00:38:42,960
signature nothing is going to happen

695
00:38:39,930 --> 00:38:45,960
so we need to do that so the first is

696
00:38:42,960 --> 00:38:48,710
going to return as a hash and the Lister

697
00:38:45,960 --> 00:38:52,109
profile configured in the computer and

698
00:38:48,710 --> 00:38:53,930
we take Freda gadget and we'll put it

699
00:38:52,109 --> 00:38:57,029
here

700
00:38:53,930 --> 00:39:00,149
and what do we have to do to inject

701
00:38:57,029 --> 00:39:04,579
first of all we need to decompress the

702
00:39:00,150 --> 00:39:08,849
IPA do we create the framework a folder

703
00:39:04,579 --> 00:39:13,799
it will fail if the library's not on

704
00:39:08,849 --> 00:39:16,109
this folder see maybe if you have a

705
00:39:13,799 --> 00:39:18,770
library outside the framework folder

706
00:39:16,109 --> 00:39:22,470
things are not gonna happen so we copy

707
00:39:18,770 --> 00:39:26,700
the library into the framework folder we

708
00:39:22,470 --> 00:39:28,799
inject her insert dy Lib we signed with

709
00:39:26,700 --> 00:39:33,210
fast line and then we install I used

710
00:39:28,799 --> 00:39:39,500
apply so what are the specificities of

711
00:39:33,210 --> 00:39:47,640
Friday on gadget mode and like jailbreak

712
00:39:39,500 --> 00:39:51,299
this is the command the IPA payload then

713
00:39:47,640 --> 00:39:54,690
the tools and the text these doesn't

714
00:39:51,299 --> 00:39:59,130
change unless the library changes and

715
00:39:54,690 --> 00:40:01,890
this is where the executable in place is

716
00:39:59,130 --> 00:40:04,589
for replacement so the important thing

717
00:40:01,890 --> 00:40:09,410
is that one yaar and gadget mode we need

718
00:40:04,589 --> 00:40:09,410
to exit the application in debug mode

719
00:40:10,309 --> 00:40:21,950
this is the last part ml and then when

720
00:40:15,450 --> 00:40:32,129
we open the Freda console we write - you

721
00:40:21,950 --> 00:40:34,250
got it because you because you bore with

722
00:40:32,130 --> 00:40:36,539
me I'm gonna show you finally the demo

723
00:40:34,250 --> 00:40:38,099
for you to see that everything is

724
00:40:36,539 --> 00:40:43,020
possible because this has never been

725
00:40:38,099 --> 00:40:44,940
published any in any place okay the

726
00:40:43,020 --> 00:40:48,359
first thing I'm gonna show you show you

727
00:40:44,940 --> 00:40:49,700
is the library I referred to before auto

728
00:40:48,359 --> 00:40:52,808
hook

729
00:40:49,700 --> 00:40:55,848
and then I'm going to show you that

730
00:40:52,809 --> 00:40:57,890
application that I'm going to sign at

731
00:40:55,849 --> 00:41:02,299
the bottom we have that three profiles

732
00:40:57,890 --> 00:41:04,220
I'm going to use to sign so I decided to

733
00:41:02,299 --> 00:41:07,790
delete this because you have the idea of

734
00:41:04,220 --> 00:41:12,259
my Mobile's there so the team is Erin

735
00:41:07,790 --> 00:41:15,710
Laura for a 4 and an X P which is the

736
00:41:12,260 --> 00:41:17,930
profile I'm going to use to sign then

737
00:41:15,710 --> 00:41:21,589
you click on the application I'm going

738
00:41:17,930 --> 00:41:26,808
to sign and if you see the permits

739
00:41:21,589 --> 00:41:32,630
profile the provision profile it has its

740
00:41:26,809 --> 00:41:37,130
also laura t for another developers so

741
00:41:32,630 --> 00:41:40,160
we might vibe very things but it's also

742
00:41:37,130 --> 00:41:44,450
a developer but another developer it's

743
00:41:40,160 --> 00:41:45,980
like someone else developed debt instead

744
00:41:44,450 --> 00:41:47,598
of me doing this we wanted to try the

745
00:41:45,980 --> 00:41:51,950
concept that's why we created another

746
00:41:47,599 --> 00:41:55,880
developer supposed developers he'll - at

747
00:41:51,950 --> 00:42:04,009
the bottom and I watch on top so I'm

748
00:41:55,880 --> 00:42:11,390
going to inject the original application

749
00:42:04,010 --> 00:42:13,819
with payload as you can see this is what

750
00:42:11,390 --> 00:42:19,279
I'm installing on the iPhone so I open

751
00:42:13,819 --> 00:42:23,540
it there's nothing so if I go to the

752
00:42:19,280 --> 00:42:28,490
watch application to the bottom of the

753
00:42:23,540 --> 00:42:31,250
list you can see embedded work kid is

754
00:42:28,490 --> 00:42:33,470
the example I was talking about before

755
00:42:31,250 --> 00:42:36,170
the project we have to create and you

756
00:42:33,470 --> 00:42:39,859
have to live it install and then route

757
00:42:36,170 --> 00:42:43,490
come it's routed Conn is another

758
00:42:39,859 --> 00:42:45,950
application and I caught that from

759
00:42:43,490 --> 00:42:48,680
someone else I created it because we're

760
00:42:45,950 --> 00:42:51,319
testing the concept so you see the two

761
00:42:48,680 --> 00:42:54,109
things embedded and what it can't the

762
00:42:51,319 --> 00:42:56,440
two things at the bottom of the list

763
00:42:54,109 --> 00:42:56,440
right

764
00:43:00,310 --> 00:43:09,560
I'm poco love Remo we open it going to

765
00:43:07,400 --> 00:43:14,900
open first the route SATCOM application

766
00:43:09,560 --> 00:43:16,490
it's just a button and I'm going to show

767
00:43:14,900 --> 00:43:18,560
you something which is not rotated oh

768
00:43:16,490 --> 00:43:21,640
yes as you can see it's very simple this

769
00:43:18,560 --> 00:43:24,080
is a concept trial so I'm going to open

770
00:43:21,640 --> 00:43:27,890
the other one which is the example and

771
00:43:24,080 --> 00:43:39,860
it's empty so I'm gonna get the take the

772
00:43:27,890 --> 00:43:40,609
profile so I closed receive them think

773
00:43:39,860 --> 00:43:45,320
oh my oh my god

774
00:43:40,610 --> 00:43:48,830
I only have 5 minutes more okay says the

775
00:43:45,320 --> 00:43:52,430
speaker rocky okay so what do I do here

776
00:43:48,830 --> 00:43:55,750
I'm as you can see they are executed so

777
00:43:52,430 --> 00:44:01,160
I'm going to create the framework folder

778
00:43:55,750 --> 00:44:03,950
in word kid extension this is where the

779
00:44:01,160 --> 00:44:06,950
logic of the application was kept in

780
00:44:03,950 --> 00:44:12,919
word kick extension which is the plug-in

781
00:44:06,950 --> 00:44:17,029
so I create that framework father I copy

782
00:44:12,920 --> 00:44:19,300
the hook the dynamic library in this

783
00:44:17,030 --> 00:44:19,300
folder

784
00:44:32,440 --> 00:44:39,440
now I have to insert it in the

785
00:44:35,900 --> 00:44:42,230
executable with clicking insert delete

786
00:44:39,440 --> 00:44:44,210
first parameter is a parameter

787
00:44:42,230 --> 00:44:47,360
understood by the application meaning

788
00:44:44,210 --> 00:44:49,730
the library hi there are three types of

789
00:44:47,360 --> 00:44:55,390
parameters you can search i'm in google

790
00:44:49,730 --> 00:44:58,100
it to see to know what each one of them

791
00:44:55,390 --> 00:45:00,379
mean and then the second parameter is

792
00:44:58,100 --> 00:45:02,900
the executable and then they were

793
00:45:00,380 --> 00:45:04,580
placing one instead of creating a new

794
00:45:02,900 --> 00:45:07,670
one with the inserted library we will

795
00:45:04,580 --> 00:45:09,470
use another one so we are asked if we

796
00:45:07,670 --> 00:45:12,590
want to delete the signature of the

797
00:45:09,470 --> 00:45:16,160
acceptable we say no we click on nope no

798
00:45:12,590 --> 00:45:18,110
need to do that we need it because we

799
00:45:16,160 --> 00:45:18,500
are going to replace then replace it

800
00:45:18,110 --> 00:45:23,570
later

801
00:45:18,500 --> 00:45:26,750
so we compress it to create a bar and we

802
00:45:23,570 --> 00:45:31,190
use fire slang to sign Fastlane is the

803
00:45:26,750 --> 00:45:34,370
only one I found so if it is already

804
00:45:31,190 --> 00:45:40,340
done Wow why are we condemned by the

805
00:45:34,370 --> 00:45:43,310
script it has some cons I talked to the

806
00:45:40,340 --> 00:45:45,380
developers and I commented on what I

807
00:45:43,310 --> 00:45:48,380
found and they said oh well we are going

808
00:45:45,380 --> 00:45:52,640
to develop something for that then we

809
00:45:48,380 --> 00:45:55,760
have fast line here this might be a

810
00:45:52,640 --> 00:45:57,640
little confusing or messy but each part

811
00:45:55,760 --> 00:46:03,580
of the application has its own

812
00:45:57,640 --> 00:46:06,680
identification so maybe the one of the

813
00:46:03,580 --> 00:46:09,799
application the ID of the application

814
00:46:06,680 --> 00:46:15,230
for iPhone is usually the same for watch

815
00:46:09,800 --> 00:46:19,340
is watchkit and then for the extension

816
00:46:15,230 --> 00:46:25,430
is workaday extension this is how it is

817
00:46:19,340 --> 00:46:30,050
called so we see here where'd it come as

818
00:46:25,430 --> 00:46:31,779
you can see second parameter watchkit

819
00:46:30,050 --> 00:46:34,490
extension right so the second parameter

820
00:46:31,780 --> 00:46:38,000
there of the coming from the wall we

821
00:46:34,490 --> 00:46:40,649
watch Kate extension I'm sorry so we

822
00:46:38,000 --> 00:46:46,079
include the watch profile and then

823
00:46:40,650 --> 00:46:54,480
for - we include the - profile syrtis is

824
00:46:46,079 --> 00:46:57,059
the identification of the screw I have

825
00:46:54,480 --> 00:47:00,150
in mind in my machine so if he if

826
00:46:57,059 --> 00:47:02,339
there's a failure the fast line is going

827
00:47:00,150 --> 00:47:04,890
to tell you that something is happening

828
00:47:02,339 --> 00:47:09,058
so you will have to see all the profiles

829
00:47:04,890 --> 00:47:13,500
installed on your Mac you select one two

830
00:47:09,059 --> 00:47:15,510
and three and that's it I include all

831
00:47:13,500 --> 00:47:19,140
this in a command for the demo same

832
00:47:15,510 --> 00:47:22,380
thing as I said before if you made a

833
00:47:19,140 --> 00:47:23,819
mistake before the application is gonna

834
00:47:22,380 --> 00:47:26,250
send this there's something missing

835
00:47:23,819 --> 00:47:32,180
where is it are you at it and that's it

836
00:47:26,250 --> 00:47:35,720
and then IP a word dodge IPA the one we

837
00:47:32,180 --> 00:47:35,720
zipped before

838
00:47:47,980 --> 00:47:58,490
okay so we have that signature and we

839
00:47:52,520 --> 00:48:01,220
can install it with that deploy in case

840
00:47:58,490 --> 00:48:09,319
of using freedivers is not the same

841
00:48:01,220 --> 00:48:11,569
command but if it is not word deploy or

842
00:48:09,320 --> 00:48:19,610
freed out something else well it's gonna

843
00:48:11,570 --> 00:48:22,760
be easier okay it is installed as you

844
00:48:19,610 --> 00:48:23,840
can see there the one that was before

845
00:48:22,760 --> 00:48:26,240
disappeared

846
00:48:23,840 --> 00:48:30,770
the one we used to copy it because they

847
00:48:26,240 --> 00:48:34,220
they have the same identification for

848
00:48:30,770 --> 00:48:38,540
the application so it was replaced and

849
00:48:34,220 --> 00:48:42,410
then watching and watch that has the

850
00:48:38,540 --> 00:48:45,200
application install we have added the

851
00:48:42,410 --> 00:48:47,899
possibilities click on that same thing

852
00:48:45,200 --> 00:48:51,020
however when we click on the bottom the

853
00:48:47,900 --> 00:48:58,520
message has changed that simple hook I

854
00:48:51,020 --> 00:48:59,480
created before and that's it yes I got

855
00:48:58,520 --> 00:49:03,770
one out out

856
00:48:59,480 --> 00:49:06,050
I know it's it's it's a bad moment of

857
00:49:03,770 --> 00:49:08,210
the day it's a very special topic so

858
00:49:06,050 --> 00:49:10,970
thank you for your attention

859
00:49:08,210 --> 00:49:16,400
now I would like to thank amnesia to

860
00:49:10,970 --> 00:49:18,830
Lodi and will it come for invited me AG

861
00:49:16,400 --> 00:49:21,980
pocket is has also helped me so now if

862
00:49:18,830 --> 00:49:32,450
you have questions go ahead if you still

863
00:49:21,980 --> 00:49:36,360
have stamina enough but I'm talking mid

864
00:49:32,450 --> 00:49:39,779
hombre no question go ahead

865
00:49:36,360 --> 00:49:42,330
okay thank you anyway you have my

866
00:49:39,780 --> 00:49:44,010
Twitter account there so if you want to

867
00:49:42,330 --> 00:49:46,340
ask anything please use it thank you

868
00:49:44,010 --> 00:49:46,340
very much

