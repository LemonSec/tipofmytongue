1
00:00:00,000 --> 00:00:12,900
Robert over from to get food and water
to him

2
00:00:17,520 --> 00:00:30,269
okay okay well thanks everyone so today
we're going to talk about threat

3
00:00:30,269 --> 00:00:35,339
modeling which is actually one of my
passions in particular what I do is as

4
00:00:35,340 --> 00:00:38,610
was mentioned there i'm an independent
software security consultant

5
00:00:39,120 --> 00:00:44,129
I'm an architect of a trainer I've been
doing development of some sort for now

6
00:00:44,129 --> 00:00:49,559
almost 30 years which is crazy because
thinking back right out of high school

7
00:00:49,559 --> 00:00:55,828
and so forth to do a lot of this stuff
development architecture project

8
00:00:55,829 --> 00:01:00,120
management leading developers mentoring
developers all that kind of stuff about

9
00:01:00,120 --> 00:01:03,390
12 years ago I started looking more and
more security

10
00:01:03,390 --> 00:01:10,049
now that was a time when it wasn't as
popular it wasn't seen as much you don't

11
00:01:10,049 --> 00:01:15,210
talk about it as much but what I found
was that we need to think about it we

12
00:01:15,210 --> 00:01:20,158
need to talk about it and so as I've
done along one of the things i also

13
00:01:20,159 --> 00:01:23,580
learned way back when was how to do
threat modeling and then again that was

14
00:01:23,580 --> 00:01:26,759
a thing that just Microsoft and others
we are talking about

15
00:01:27,509 --> 00:01:32,729
and the last few years it seems like
it's coming back into play again because

16
00:01:32,729 --> 00:01:35,250
it didn't hear about it for a while but
now it's starting to come back into play

17
00:01:35,250 --> 00:01:38,250
and just had a curiosity

18
00:01:49,760 --> 00:01:51,450
whatever

19
00:01:51,450 --> 00:01:52,320
the car

20
00:01:52,320 --> 00:01:56,100
client directly into your database right
that's how you fix it but it's still a

21
00:01:56,100 --> 00:01:59,789
design issue it's still something built
in an incident is still in there today

22
00:02:00,300 --> 00:02:04,890
you have to be aware of it and
understand your tools and understand how

23
00:02:04,890 --> 00:02:07,409
do I build around that in a secure way

24
00:02:07,409 --> 00:02:10,920
another issue that's come up in the the
news

25
00:02:10,919 --> 00:02:14,579
we've seen is the jeep cherokee hack
everybody heard about that one right

26
00:02:15,480 --> 00:02:20,310
you know they say that what is it three
and three out of four Americans have now

27
00:02:20,310 --> 00:02:25,650
forgotten about this but four out of
four carmaker certainly have not right

28
00:02:25,650 --> 00:02:29,520
this is still a big deal and we still
hear about it sometimes in the news -

29
00:02:29,520 --> 00:02:34,830
about different issues with cars and and
now you know being the fact that they're

30
00:02:34,830 --> 00:02:36,209
all software

31
00:02:36,209 --> 00:02:41,220
what happened here was it last year if
you remember of crystal second and

32
00:02:41,220 --> 00:02:46,950
Charlie Miller presented at blackhat
where they were able to find a flaw in

33
00:02:46,950 --> 00:02:52,079
the design where it's jeep cherokee in
the entertainment system that you could

34
00:02:52,080 --> 00:02:57,420
subscribe to that allows you to to be
able to say watch movies in the system

35
00:02:57,959 --> 00:03:02,310
it turned out that you also not only had
access to the internet and maybe cool

36
00:03:02,310 --> 00:03:07,709
things down but you also have an IP
address and so what was your able to do

37
00:03:07,709 --> 00:03:11,010
is somebody could come in and find you
through that IP address

38
00:03:11,760 --> 00:03:16,950
make your way through the entertainment
system into the rest of the car and take

39
00:03:16,950 --> 00:03:18,570
over certain operations

40
00:03:18,570 --> 00:03:22,920
now you say well you like the window
window wife Susan's wipers weather and

41
00:03:22,920 --> 00:03:27,059
so forth but you could also take control
the brakes you can take control of the

42
00:03:27,060 --> 00:03:30,030
car in terms of moving it and that's
what they did in that and their demo

43
00:03:30,030 --> 00:03:34,709
which was you know amazing things so
again a design flaw

44
00:03:34,709 --> 00:03:39,510
who had the idea that it was okay to
make this available so that somebody can

45
00:03:39,510 --> 00:03:43,590
take over a bus that perhaps we could do
harm to people

46
00:03:44,310 --> 00:03:50,280
another one not software specifically
it's more of a system design but the

47
00:03:50,280 --> 00:03:53,610
target breach was something also in the
news in the last few years

48
00:03:54,480 --> 00:04:03,060
again a design flaw design issue where
we had network access given to a third

49
00:04:03,060 --> 00:04:07,470
party company in this particular case it
was an HVAC company being able to come

50
00:04:07,470 --> 00:04:12,419
in directly go to the system to the
network

51
00:04:13,109 --> 00:04:18,540
no segmentation involved and so by
attackers going through the HVAC and

52
00:04:18,540 --> 00:04:21,150
basically having full access to
everything

53
00:04:21,149 --> 00:04:26,190
of course they also had full access to
the point of sale systems and you know

54
00:04:26,190 --> 00:04:29,040
there's some issue there and so on and
so on i mean we can talk all day about

55
00:04:29,040 --> 00:04:33,660
this but again at a design issue in this
case a system design issue

56
00:04:34,169 --> 00:04:39,299
so this is where it matters thinking
through these things matters and where

57
00:04:39,300 --> 00:04:44,880
you make those decisions where you make
choices about how you build out system

58
00:04:44,880 --> 00:04:52,139
really matters and so I talking about
that well how do we solve that and

59
00:04:52,139 --> 00:04:55,590
that's what we're going to talk about
the day is essentially taking a look at

60
00:04:55,590 --> 00:04:58,739
threat modeling and how it can help you
with secure software design in

61
00:04:58,740 --> 00:04:59,639
particular

62
00:04:59,639 --> 00:05:03,750
so we're threat modeling will to me it's
something we already do it our personal

63
00:05:03,750 --> 00:05:10,169
lives you know when we lock the doors to
our house when we know lock the windows

64
00:05:10,169 --> 00:05:13,109
and when we lock the doors to our car

65
00:05:13,110 --> 00:05:18,570
we're already thinking ahead about what
could go wrong where essentially you

66
00:05:18,570 --> 00:05:21,300
know we don't leave those things open
because why

67
00:05:21,300 --> 00:05:25,530
well you know more than likely or
possibly somebody's going to come in to

68
00:05:25,530 --> 00:05:26,489
my home

69
00:05:26,490 --> 00:05:30,690
take something if I leave things in my
car just out in the open somebody will

70
00:05:30,690 --> 00:05:35,100
come by and see it or if i leave the
door to door unlocked or window open

71
00:05:35,100 --> 00:05:39,449
somebody might take it so we're already
thinking about these things in our

72
00:05:39,449 --> 00:05:43,050
personal lives we may not realize that
we may not necessarily put a name to it

73
00:05:43,050 --> 00:05:47,250
but it is a kind of threat modeling in
the sense that we're thinking about what

74
00:05:47,250 --> 00:05:50,550
can go wrong we weigh the risks and act
accordingly

75
00:05:50,550 --> 00:05:55,290
well actually what we want to do is try
to apply some of those same thoughts to

76
00:05:55,290 --> 00:05:59,610
how we design software how we design
systems we want to think about and think

77
00:05:59,610 --> 00:06:00,570
ahead

78
00:06:00,570 --> 00:06:05,040
what could happen here i think the
number one question I here and and one

79
00:06:05,040 --> 00:06:09,810
of the things that I do in my own work
in consulting is I help customers think

80
00:06:09,810 --> 00:06:14,249
about these things and in particular one
of the questions that I here often

81
00:06:14,249 --> 00:06:19,139
is when we talk about user interactions
so forth is well why would a user do

82
00:06:19,139 --> 00:06:24,749
that you've heard that before but why
would anyone do that but that's the

83
00:06:24,749 --> 00:06:30,389
point they would and they may and so
then you have to think about it so just

84
00:06:30,389 --> 00:06:34,439
talk really quickly about what are the
things that that money can help you do

85
00:06:34,439 --> 00:06:41,039
to me it are it helps you breathe some
gas for example between the builders the

86
00:06:41,039 --> 00:06:44,849
breakers the defenders it helps the
builders focus on the security features

87
00:06:44,849 --> 00:06:48,269
you know the developers the people who
are putting together secure systems

88
00:06:48,779 --> 00:06:53,369
it helps the breakers know where the
critical attack surfaces are so the

89
00:06:53,369 --> 00:06:57,299
people that are doing the the pen
testing the penetration testing it can

90
00:06:57,299 --> 00:07:01,109
help them understand you know they don't
have unlimited time but if they spend

91
00:07:01,110 --> 00:07:05,369
some time to think about the design to
think about the actual threats to the

92
00:07:05,369 --> 00:07:12,209
system that can help them in locating or
localizing their attacks for breaking

93
00:07:12,209 --> 00:07:17,219
into the system and the defenders it
also helps them understand the patterns

94
00:07:17,219 --> 00:07:22,289
you know what is it that you know
attackers may be looking at our system

95
00:07:22,289 --> 00:07:26,789
understanding the threat model of the
system can help you do that as well and

96
00:07:26,789 --> 00:07:27,509
I think it

97
00:07:27,509 --> 00:07:32,879
it's in many ways it helps security and
business understand each other because

98
00:07:32,879 --> 00:07:37,499
threat modeling is actually ultimately a
business decision as well

99
00:07:38,039 --> 00:07:41,489
what are the threats and how does that
impact my business and how I build my

100
00:07:41,489 --> 00:07:42,388
system

101
00:07:42,389 --> 00:07:47,610
so where does it fit it's one of the
security tools we already know about

102
00:07:47,610 --> 00:07:53,129
these penetration testing buzzing all
those a lot of automated tools threat

103
00:07:53,129 --> 00:07:55,559
welding on the other hand is really a
process

104
00:07:55,559 --> 00:08:01,289
it's a way of thinking and if you've
been in security for a while

105
00:08:01,289 --> 00:08:05,159
again we talked about you know some
things you already think about you don't

106
00:08:05,159 --> 00:08:06,269
go anywhere

107
00:08:06,269 --> 00:08:11,069
probably anymore and and see things the
same way right once you start thinking

108
00:08:11,069 --> 00:08:12,209
about security

109
00:08:12,209 --> 00:08:15,449
you see an open door you say well you
know what if somebody came in that way

110
00:08:15,449 --> 00:08:21,629
or I see an open port on a device and
you think you know what if somebody

111
00:08:21,629 --> 00:08:24,869
decided to plug into that you can see
what's happening with the protocol

112
00:08:24,869 --> 00:08:26,070
that's coming across

113
00:08:26,070 --> 00:08:32,159
so it's a way of thinking and ultimately
as will take a look at it's a tool

114
00:08:32,159 --> 00:08:35,100
that's useful for secure design

115
00:08:35,100 --> 00:08:39,419
so here's the official an official
definition it's a process of

116
00:08:39,419 --> 00:08:45,390
understanding your system and the
potential threats against her system and

117
00:08:45,390 --> 00:08:49,230
I like to think of you know when I'm
creating a threat model I want to have

118
00:08:49,230 --> 00:08:55,080
these particular elements as a part of
it so and understanding or a diagram of

119
00:08:55,080 --> 00:08:57,330
my system what is it on building

120
00:08:57,330 --> 00:09:02,220
what is it that we're trying to to build
here in our system whether it be a

121
00:09:02,220 --> 00:09:06,540
software or an infrastructure anything
identify threats

122
00:09:06,540 --> 00:09:10,680
you know what are people wanting to do
or could do in the system and any

123
00:09:10,680 --> 00:09:16,199
mitigation so as we go through what
we'll find is requirements will say okay

124
00:09:16,200 --> 00:09:17,610
we have a threat here

125
00:09:17,610 --> 00:09:20,670
has anybody done anything about this how
do we counter it

126
00:09:20,670 --> 00:09:24,870
so those are your mitigations and then
priorities by risk and I think this is

127
00:09:24,870 --> 00:09:28,770
really important because sometimes if
you find all kinds of problems in your

128
00:09:28,770 --> 00:09:34,319
system for example people will chase
vulnerabilities like crazy i've got 520

129
00:09:34,320 --> 00:09:35,370
boner abilities

130
00:09:35,370 --> 00:09:40,920
okay what are you gonna do with that you
can't fix them all at 11 time and so

131
00:09:40,920 --> 00:09:44,219
threat modeling another aspect of threat
modeling is risk management where you're

132
00:09:44,220 --> 00:09:47,400
trying to understand okay now I know
this about my system

133
00:09:47,400 --> 00:09:51,990
let's prioritize it figure out what's
the most critical thing and fix it

134
00:09:51,990 --> 00:09:54,540
accordingly by priority

135
00:09:54,540 --> 00:09:58,770
so those are things that I think
essentially come together with the

136
00:09:58,770 --> 00:10:03,750
threat model a couple of coats I have
this is from Michael Howard it at

137
00:10:03,750 --> 00:10:08,130
Microsoft the road secure code to dev
team with awesome complete accurate

138
00:10:08,130 --> 00:10:12,420
threat model gets my operation and not
much of my time because essentially they

139
00:10:12,420 --> 00:10:17,550
don't need it and i found that as well
as myself in my own experience that

140
00:10:17,550 --> 00:10:21,660
companies who are starting out with
threat modeling thinking about that in

141
00:10:21,660 --> 00:10:25,920
their design thinking about that in the
requirements are already ahead of the

142
00:10:25,920 --> 00:10:26,979
game

143
00:10:26,980 --> 00:10:30,699
another quote by brookstone field he
wrote a great book that came out last

144
00:10:30,699 --> 00:10:36,040
summer on threat modeling and on secure
architecture as I practice it threat

145
00:10:36,040 --> 00:10:41,649
modeling cannot be the province of a
tech lead but instead its best own way

146
00:10:41,649 --> 00:10:45,880
all the development team and and what I
take from that and and I like that idea

147
00:10:45,880 --> 00:10:50,019
as well is it's not just the security
people that you want to be threat

148
00:10:50,019 --> 00:10:50,740
modeling

149
00:10:50,740 --> 00:10:54,040
you don't want to just say okay you go
to the threat modeling and come back

150
00:10:54,040 --> 00:10:55,389
with what you find

151
00:10:55,389 --> 00:11:01,089
but instead my approach and and Brooke
as well is that we want to try to get

152
00:11:01,089 --> 00:11:02,500
everybody involved

153
00:11:02,500 --> 00:11:07,449
everybody thinking about threat modeling
and everybody can contribute to the

154
00:11:07,449 --> 00:11:09,189
design of systems

155
00:11:09,190 --> 00:11:16,000
so talk about some definitions of a
threat agent is essentially someone or a

156
00:11:16,000 --> 00:11:20,589
process that wants to do harm to your
system so that can be an attacker

157
00:11:21,339 --> 00:11:24,639
it could be again a process that is
running on your system

158
00:11:26,019 --> 00:11:32,529
the threat is the goal it's what the
adversary wants to do

159
00:11:32,529 --> 00:11:38,079
for example I a threat maybe that an
adversary wants to take your credit card

160
00:11:38,079 --> 00:11:38,979
information

161
00:11:38,980 --> 00:11:42,459
that's the fret how would they do it
well it turns out the way they do it is

162
00:11:42,459 --> 00:11:46,599
typically for vulnerability and there's
a distinction between these two a

163
00:11:46,600 --> 00:11:51,040
vulnerability is the flaw in the system
that helps the thread agent realize the

164
00:11:51,040 --> 00:11:51,730
threat

165
00:11:51,730 --> 00:11:56,769
so for example if i have a website and I
perhaps have a sequel injection

166
00:11:56,769 --> 00:11:58,600
vulnerability

167
00:11:58,600 --> 00:12:03,850
well because of the presence of the
vulnerability the sequel injection an

168
00:12:03,850 --> 00:12:08,079
attacker could then realize the threat
of obtaining off my credit card

169
00:12:08,079 --> 00:12:11,949
information or change in my database or
dropping my database or tables and so on

170
00:12:11,949 --> 00:12:15,670
so on and so on but with out the
vulnerability

171
00:12:16,529 --> 00:12:21,660
without the sequel injection being there
then really i don't have that threat

172
00:12:22,259 --> 00:12:26,310
so there is a distinction some people
try to use them interchangeably but

173
00:12:26,310 --> 00:12:27,420
they're not the same

174
00:12:27,420 --> 00:12:30,990
at least I don't see the same and many
others do not as well there is a

175
00:12:30,990 --> 00:12:37,949
distinction so the vulnerability helps
make the threat realized but understand

176
00:12:37,949 --> 00:12:43,079
that the threat itself is something that
you could happen as a result of the

177
00:12:43,079 --> 00:12:44,819
vulnerability being there

178
00:12:44,819 --> 00:12:48,599
the attack is essentially the thread
agent taking advantage of that

179
00:12:48,600 --> 00:12:51,959
vulnerability and there are a couple of
things here that i like to point out

180
00:12:52,620 --> 00:12:58,259
usually it is related to a motivated and
sufficiently skilled threat agent so

181
00:12:58,259 --> 00:13:03,870
motivations can change or or vary
depending on who's doing this so for

182
00:13:03,870 --> 00:13:07,769
example years ago there used to be where
we are called get the script kiddies

183
00:13:07,769 --> 00:13:11,819
so usually like teenagers and say hey I
got us I got some kind of script i'm

184
00:13:11,819 --> 00:13:12,660
going to throw it

185
00:13:12,660 --> 00:13:15,719
this website see what happens do I know
what it does

186
00:13:15,720 --> 00:13:20,910
absolutely not I don't care it's just
fun i want to face it or something and

187
00:13:20,910 --> 00:13:26,879
all the way up to a motivation of a of a
criminal of a state-sponsored attack

188
00:13:26,879 --> 00:13:31,410
where you know they want to ultimately
typically is money

189
00:13:32,220 --> 00:13:37,350
personal information other kinds of
things that order to ultimately obtain

190
00:13:37,350 --> 00:13:42,420
money that's typically what the state of
Texas doing or subvert nation-states

191
00:13:42,420 --> 00:13:47,490
sufficiently skilled i already talked
about the script kitty who may not know

192
00:13:47,490 --> 00:13:53,399
what he's doing all the way up to the
nation-state attacker who is absolutely

193
00:13:53,399 --> 00:13:55,709
skilled and they don't know if you've
seen it but there are criminal

194
00:13:55,709 --> 00:14:00,899
organizations that basically have a
DevOps and they have check-ins and they

195
00:14:00,899 --> 00:14:03,720
have project managers and they have all
that kind of stuff

196
00:14:03,720 --> 00:14:10,139
just like in your own organizations
mainly because it is if it's something

197
00:14:10,139 --> 00:14:14,519
that they are serious about and they
need to spend time on and and focus on

198
00:14:14,519 --> 00:14:20,370
so you have all kinds of these people
but ultimately various motivations

199
00:14:20,370 --> 00:14:21,600
various skills

200
00:14:21,600 --> 00:14:25,259
the thread agent taking advantage of
that vulnerability produce the attack

201
00:14:25,259 --> 00:14:29,490
assets something of value could be your
credit card information can be other

202
00:14:29,490 --> 00:14:34,350
kinds of things that it varies but but
the key is and I know in some for

203
00:14:34,350 --> 00:14:38,790
example the fair approach will say an
asset is anything that you don't you'll

204
00:14:38,790 --> 00:14:43,529
lose money on you know basically I I
it's a loss of some sort

205
00:14:43,529 --> 00:14:47,579
this is a threat modeling vocabulary

206
00:14:47,579 --> 00:14:53,699
this is this is a nice graphic by john
stevens digital and these slides will be

207
00:14:53,699 --> 00:14:57,959
available afterwards if you want to you
know follow my Twitter my foot

208
00:14:57,959 --> 00:15:02,609
sorry follow my twitter all i'll post a
link to it but this is where he is

209
00:15:02,610 --> 00:15:06,839
relating all the threats the attacks the
risk and everything and how they they

210
00:15:06,839 --> 00:15:09,839
work together all those terms

211
00:15:10,470 --> 00:15:17,399
so that's a that's a really nice slide a
document are sorry of a visual talking

212
00:15:17,399 --> 00:15:20,250
about poses a threat on there are many
different ways to do this

213
00:15:20,250 --> 00:15:23,459
my particular approach is typically
software centric and that's what we're

214
00:15:23,459 --> 00:15:25,258
talking about the day

215
00:15:25,259 --> 00:15:30,240
that's where I focus on secure design
look at the data flow diagrams

216
00:15:30,240 --> 00:15:37,379
another one is more asset centric where
you may use attack trees essentially

217
00:15:37,379 --> 00:15:39,779
work flows through your system

218
00:15:39,779 --> 00:15:47,069
so for example if I've got a website and
i want to be able to exploit an xss

219
00:15:47,069 --> 00:15:48,689
vulnerability

220
00:15:48,689 --> 00:15:53,730
how were the one of the ways that i may
be able to use excess in order to do

221
00:15:53,730 --> 00:15:59,160
something for example the threat maybe I
want to grab your session cookie

222
00:15:59,160 --> 00:16:03,389
and how do i do that so that may be an
attack flow that you might go through

223
00:16:03,389 --> 00:16:07,439
and then you would at each point
determined that you have the right

224
00:16:07,439 --> 00:16:10,319
mitigation in place to prevent that

225
00:16:10,319 --> 00:16:15,389
so that's one way to do that another is
attacker centric and that was what i was

226
00:16:15,389 --> 00:16:18,629
talking about a moment ago where you're
focusing on the profile

227
00:16:18,629 --> 00:16:23,040
you're focusing on the various patterns
so for example as i mentioned the script

228
00:16:23,040 --> 00:16:26,759
kiddie will do one thing very different
than a nation-state hacker

229
00:16:27,420 --> 00:16:29,740
perhaps in attacking your system

230
00:16:29,740 --> 00:16:34,270
the the bottom two there a lot of times
we'll apply more to network or

231
00:16:34,270 --> 00:16:38,439
infrastructure but the way I see it is
you know when you're doing threat

232
00:16:38,440 --> 00:16:41,380
modeling a lot of these things you can
think about

233
00:16:41,380 --> 00:16:44,590
depending on your system and and what
makes sense

234
00:16:44,590 --> 00:16:50,230
so when you do threat modeling well
ideally its first

235
00:16:50,230 --> 00:16:54,790
you do it first so i typically we should
come in the requirements and design

236
00:16:54,790 --> 00:17:00,520
phase so I have their in this diagram
threat modeling as part of your design

237
00:17:00,520 --> 00:17:03,280
and could also become part of your
requirements and actually threat

238
00:17:03,280 --> 00:17:06,970
modeling will also uncover new
requirements as you go through the

239
00:17:06,970 --> 00:17:09,730
process you will typically find

240
00:17:09,730 --> 00:17:14,380
oh there's something else for missing we
need to put that in place if you are you

241
00:17:14,380 --> 00:17:18,190
following the more of an agile
methodology

242
00:17:18,190 --> 00:17:22,540
you can make it a part of your sprint so
there you can see we're in the story

243
00:17:22,540 --> 00:17:26,440
you're building out your story you
define what's our threat model or as

244
00:17:26,440 --> 00:17:28,270
you're iterating through

245
00:17:28,270 --> 00:17:33,550
yo various Sprint's you might you put in
there and say okay here's a new feature

246
00:17:33,550 --> 00:17:35,830
what's our threat model its associated
with it

247
00:17:35,830 --> 00:17:41,080
so along with that you can come up with
user stories and attacker stories as

248
00:17:41,080 --> 00:17:45,820
well so if you never did threat modeling
and I remember earlier I asked you if

249
00:17:45,820 --> 00:17:49,419
you've done threat modeling are you
currently doing crap modeling but the

250
00:17:49,420 --> 00:17:55,030
reality is it's not too late to start
for the most part just realize that it

251
00:17:55,030 --> 00:18:00,490
will be more difficult to change major
design decisions later I mean if you

252
00:18:00,490 --> 00:18:01,570
already

253
00:18:01,570 --> 00:18:04,870
you know picked let's say haha

254
00:18:04,870 --> 00:18:09,699
you know if you if you pick some
framework that is inherently not secure

255
00:18:09,700 --> 00:18:14,350
and then decide okay now we need to be
secure than you know revamping the

256
00:18:14,350 --> 00:18:17,800
entire thing is going to be a lot of
effort so you want to do these things

257
00:18:18,400 --> 00:18:22,420
ideally of front early but i'd say do it
anyway

258
00:18:22,420 --> 00:18:27,910
go through the process go through the
the stages of trying to figure out where

259
00:18:27,910 --> 00:18:29,200
are you in your system

260
00:18:29,200 --> 00:18:31,210
how secure are you still do it

261
00:18:31,210 --> 00:18:36,760
so let's talk about a typical threat
modeling session and what i described

262
00:18:36,760 --> 00:18:40,960
this what I'm talking about is let's say
that you've never done threat modeling

263
00:18:40,960 --> 00:18:44,380
before you're looking at your system you
want to go through and try to figure out

264
00:18:44,380 --> 00:18:46,870
how you know where are we

265
00:18:46,870 --> 00:18:50,439
here are some things that I found to be
very useful to get started so first

266
00:18:50,440 --> 00:18:52,570
thing is you want to gather
documentation

267
00:18:52,570 --> 00:18:55,960
you know who built the system when was
it built

268
00:18:55,960 --> 00:18:59,860
what was the purpose why do we do what
we did and you know that can also apply

269
00:18:59,860 --> 00:19:03,789
to some new things but especially for
for things that are existing gather your

270
00:19:03,789 --> 00:19:09,730
team again don't make this one person's
job have lots of people involved if you

271
00:19:09,730 --> 00:19:15,940
can developers QA architects project
managers stakeholders people who have an

272
00:19:15,940 --> 00:19:21,909
investment into this system in making a
secure making it a productive making it

273
00:19:21,909 --> 00:19:27,909
will generate revenue I mean those
people count because all of this stuff

274
00:19:27,909 --> 00:19:30,909
ultimately can affect your bottom line

275
00:19:31,659 --> 00:19:35,320
understand the business goals and the
technical goals and sometimes you know

276
00:19:35,320 --> 00:19:40,178
they may not necessarily match what your
security goals are for example i worked

277
00:19:40,179 --> 00:19:43,809
with a client where we talked about
putting two factor authentication in

278
00:19:43,809 --> 00:19:48,730
place and their goal was yes we want to
do that but not for everybody we have

279
00:19:48,730 --> 00:19:52,600
some users we don't and some
administrators we do for now

280
00:19:52,600 --> 00:19:56,139
and you know my recommendations we need
to across the board

281
00:19:56,140 --> 00:20:00,190
I said no that's not our goal right now
so you have to be aware of what your

282
00:20:00,190 --> 00:20:02,260
goals are and why you do what you do

283
00:20:02,260 --> 00:20:06,158
the other thing about this is also
understand your technical goals know for

284
00:20:06,159 --> 00:20:08,830
example why did you choose job as your
framework

285
00:20:08,830 --> 00:20:11,980
why did you choose . net why did you
choose that open source library why did

286
00:20:11,980 --> 00:20:16,360
you know those are important things
because all of those things can impact

287
00:20:16,360 --> 00:20:21,729
the security design of your system based
on on those things that you

288
00:20:21,730 --> 00:20:22,440
you chose

289
00:20:22,440 --> 00:20:29,580
meeting dates and times agree on those
and then I like to say I only said one

290
00:20:29,580 --> 00:20:30,720
to two hours

291
00:20:30,720 --> 00:20:34,679
focus session don't make this a whole
day thing and the reason is because

292
00:20:34,679 --> 00:20:39,090
ultimately it becomes almost a code
review and it's not a code review we're

293
00:20:39,090 --> 00:20:43,080
not talking about looking at your code
and getting that far down we're talking

294
00:20:43,080 --> 00:20:47,100
more of a high level view about the
architecture and the various data flows

295
00:20:47,100 --> 00:20:51,629
and things like that so make it very
focused on understanding where the

296
00:20:51,629 --> 00:20:57,120
security issues in the system and then
most important and this I've learned

297
00:20:57,120 --> 00:21:02,070
through trial and error working with
teams is be honest ligo the door and no

298
00:21:02,070 --> 00:21:07,289
blaming it's so easy to when you're
looking at security and especially in a

299
00:21:07,289 --> 00:21:11,879
system that's already been built and
you're missing things is to say oh what

300
00:21:11,879 --> 00:21:14,100
did we did that you know who didn't do
this

301
00:21:14,100 --> 00:21:18,809
oh and then to find out you know as an
architect well i know we set up our

302
00:21:18,809 --> 00:21:23,039
authentication process this way and the
developer comes back and says well

303
00:21:23,039 --> 00:21:26,340
actually no we didn't we

304
00:21:26,340 --> 00:21:30,600
you know look in depth different half
that day because it wasn't too difficult

305
00:21:30,600 --> 00:21:33,959
or whatever and you find out those
things

306
00:21:33,960 --> 00:21:38,549
the key is you know this is discovery
its understanding so try to leave those

307
00:21:38,549 --> 00:21:45,480
things aside you again be honestly we go
the door no blaming some simple tools

308
00:21:45,480 --> 00:21:52,019
that you can use a whiteboard just to
draw your your application your system

309
00:21:52,019 --> 00:21:58,799
you can use visio for the diagramming
you know word or excel to document one

310
00:21:58,799 --> 00:22:02,970
thing i like is Dennis Cruz simple
threat model one page template and

311
00:22:02,970 --> 00:22:05,700
concepts you've been working on this a
little while

312
00:22:05,700 --> 00:22:09,210
that's a link to it but essentially it
looks like this

313
00:22:09,210 --> 00:22:14,429
these the latest i think in about a
month ago or so I pull this off his

314
00:22:14,429 --> 00:22:18,899
sight but essentially it's a page where
he's trying to keep track of your

315
00:22:18,899 --> 00:22:24,809
diagram various entry points assets and
threats in this case based on strike

316
00:22:24,809 --> 00:22:30,330
just to keep track of you know what is
it your system on the back he has these

317
00:22:30,330 --> 00:22:32,080
concepts so

318
00:22:32,080 --> 00:22:36,309
what is stride with you know the
vocabulary and so on so that's something

319
00:22:36,309 --> 00:22:38,470
that he puts together I think it's
pretty cool

320
00:22:38,470 --> 00:22:43,390
what i like to use this worksheet which
is just keeping track of the risk level

321
00:22:43,390 --> 00:22:47,710
with Brett's description countermeasures
and so on and then of course the

322
00:22:47,710 --> 00:22:52,690
follow-up which we'll talk about later
as well so simple tools keep it simple

323
00:22:53,470 --> 00:22:58,330
there are some other tools out there but
don't look at these until you understand

324
00:22:58,330 --> 00:23:02,408
the process because if you jump into
these as I said there's no automated

325
00:23:02,409 --> 00:23:08,080
tool out there at all you can't just say
you know . to my system and build one

326
00:23:08,080 --> 00:23:11,408
it doesn't work that way you have to
think through

327
00:23:11,409 --> 00:23:15,580
ok how's this built one of the things
that are moving between the various

328
00:23:15,580 --> 00:23:20,740
pieces and then the potential security
issues that might be represented

329
00:23:20,740 --> 00:23:23,740
once you understand the process and some
of these tools may come in handy

330
00:23:24,399 --> 00:23:28,120
lately I've been evaluating friend
mother it's a very interesting web-based

331
00:23:28,120 --> 00:23:33,939
collaborative tool from my app security
at you know take a look at that one

332
00:23:33,940 --> 00:23:37,330
the free one from Microsoft is pretty
good but it has some limitations

333
00:23:38,380 --> 00:23:42,309
it's a free tool but you know in terms
of upgrades and so forth not sure

334
00:23:42,909 --> 00:23:46,480
and then there are a few other options
there as well but and I'm sure there's

335
00:23:46,480 --> 00:23:50,889
some others out there but the key is be
familiar with the process for start

336
00:23:50,889 --> 00:23:54,549
simple because it is a thinking tool

337
00:23:54,549 --> 00:24:00,220
first and foremost so as you start to to
get into doing the threat modeling

338
00:24:00,220 --> 00:24:01,539
session itself

339
00:24:01,539 --> 00:24:05,019
one of things I like to do is review
security principles the basic security

340
00:24:05,019 --> 00:24:10,330
principles for example securing the
weakest link the pen in depth of feeling

341
00:24:10,330 --> 00:24:14,289
security economize mechanisms simply
simply keep it simple

342
00:24:15,730 --> 00:24:21,789
these privileged not sharing mechanisms
for example don't make authentication be

343
00:24:21,789 --> 00:24:25,000
your authorization to don't make
authorization work like your

344
00:24:25,000 --> 00:24:30,789
authentication that's very key be
reluctant to trust promote privacy

345
00:24:30,789 --> 00:24:34,000
security usable we talked about that
earlier

346
00:24:34,510 --> 00:24:38,200
so there's a lot of things that we go
over it would go over what great

347
00:24:38,200 --> 00:24:41,679
document to take a look at if you
haven't already is this one from the

348
00:24:41,679 --> 00:24:44,870
Tripoli computer side society center

349
00:24:44,870 --> 00:24:49,189
/ secure design they wrote this for a
couple years ago a bunch of companies

350
00:24:49,190 --> 00:24:54,080
got together and wrote these top 10
software security design flaws and

351
00:24:54,080 --> 00:24:57,350
essentially what they were trying to
talk about is you know what is the

352
00:24:57,350 --> 00:25:02,419
difference between a bug and flawed and
a bug is essentially an implementation

353
00:25:02,420 --> 00:25:04,760
level software problem

354
00:25:04,760 --> 00:25:09,140
someone forgot something someone missed
something or they miss type something

355
00:25:09,140 --> 00:25:14,660
and now you have a bug in the system
very different than a flaw a flawed on

356
00:25:14,660 --> 00:25:21,559
the other hand is where we made a
mistake in the way we made a decision so

357
00:25:21,559 --> 00:25:27,230
for example a bug is that I I didn't
quite I didn't put the right

358
00:25:28,160 --> 00:25:32,360
I didn't put the right number of
characters and password let's say the

359
00:25:32,360 --> 00:25:37,699
flaw is I've made the wrong decision
about how i'm storing that password for

360
00:25:37,700 --> 00:25:42,650
example shot one don't you shot one
that's it that's a design decision that

361
00:25:42,650 --> 00:25:48,530
you've made that now is the flaw that
perhaps could be exploited

362
00:25:48,530 --> 00:25:54,139
so that's very key out of that document
you'll find there's there's ten

363
00:25:54,140 --> 00:25:57,470
different things that they they have
described as flaws

364
00:25:58,040 --> 00:26:02,000
cryptography comes up all the time you
know they always say don't roll your own

365
00:26:02,000 --> 00:26:07,100
that's obviously a big flaw but for
example one of the things is yet

366
00:26:07,100 --> 00:26:09,649
neglecting to authorize after
authentication

367
00:26:09,650 --> 00:26:12,860
some people say well you know I'm
pathetic ated and then we move forward

368
00:26:12,860 --> 00:26:17,689
without doing the access control so some
very key things and then of course the

369
00:26:17,690 --> 00:26:20,059
recommendations are just the opposite of
that

370
00:26:20,059 --> 00:26:25,399
you know earn or give never assume trust
always use cryptography correctly and so

371
00:26:25,400 --> 00:26:28,580
on and so on so these are things that
you want to you want to review with your

372
00:26:28,580 --> 00:26:32,000
team and make sure everybody understands
the difference between what's a bug and

373
00:26:32,000 --> 00:26:33,140
what's the flaw

374
00:26:33,140 --> 00:26:36,500
now that everybody has you know that
basic foundation then let's talk about

375
00:26:36,500 --> 00:26:39,290
the actual threat modeling process
itself

376
00:26:39,290 --> 00:26:44,240
so this is what I've come up with and
others have come up with maybe five six

377
00:26:44,240 --> 00:26:50,210
of these seven of these I've tried to
pull it down into 24 and even in this

378
00:26:50,210 --> 00:26:50,970
there's

379
00:26:50,970 --> 00:26:54,600
you know some some stuff that that comes
out of this but I'm trying to make it as

380
00:26:54,600 --> 00:26:55,918
simple as possible

381
00:26:55,919 --> 00:26:59,669
first thing is draw your picture
understand your system and the data

382
00:26:59,669 --> 00:27:05,460
flows that that go between your parts of
your system identified the threats

383
00:27:05,460 --> 00:27:09,990
determine the mitigations and risks and
finally which i think is one of the most

384
00:27:09,990 --> 00:27:11,580
important things that the follow-through

385
00:27:11,580 --> 00:27:15,178
don't just make that and exercise that
you know hey we did it

386
00:27:15,179 --> 00:27:20,909
great let's move on but something that
that you continue to revisit so drawing

387
00:27:20,909 --> 00:27:21,929
your picture

388
00:27:21,929 --> 00:27:25,409
let me just ask you anybody have an idea
what that is

389
00:27:28,650 --> 00:27:31,710
make a guess

390
00:27:32,760 --> 00:27:41,520
anybody so whatever it is we'll head
back and you've probably seen this

391
00:27:41,520 --> 00:27:42,330
before right

392
00:27:42,330 --> 00:27:46,080
free to your web app we got a browser we
got a web server we got a database

393
00:27:46,080 --> 00:27:49,530
server but when you look at this just
drawing this out

394
00:27:49,530 --> 00:27:52,918
you don't really know a whole lot about
it right you don't know exactly what's

395
00:27:52,919 --> 00:27:56,789
going on you especially don't know
what's going on inside the web server so

396
00:27:56,789 --> 00:28:00,150
this is this is a start but it's not
enough

397
00:28:01,020 --> 00:28:04,950
what you want to do is you want to get a
little further into the processes that

398
00:28:04,950 --> 00:28:11,280
are happening inside that web server and
so a good way to do that is to use and

399
00:28:11,280 --> 00:28:16,110
this is an example of using data flow
diagrams now you can draw a pretty much

400
00:28:16,110 --> 00:28:20,639
anything and no make sure you want this
is just a recommendation or you know a

401
00:28:20,640 --> 00:28:24,780
lot of people do this and threat
modeling but to represent these various

402
00:28:24,780 --> 00:28:29,520
parts of your system to enter these the
processes the data stores and Trust

403
00:28:29,520 --> 00:28:34,350
boundaries boundaries is kind of an
interesting thing because that's where

404
00:28:34,350 --> 00:28:37,980
you're going from ok I'm not
authenticated and now i am or I'm not

405
00:28:37,980 --> 00:28:43,919
authorized and now i am and that can be
really key about well what do those mean

406
00:28:43,919 --> 00:28:50,220
in my system essentially so what we're
going to do is understand the logical

407
00:28:50,220 --> 00:28:54,929
and the component architecture of our
system and the communication flow and

408
00:28:54,929 --> 00:28:58,710
valuable data moved and stored and the
reason why we do that is it turns out

409
00:28:58,710 --> 00:29:02,820
that when data is moving back and forth
let's say I

410
00:29:02,820 --> 00:29:07,289
- two things that never talk to each
other not so interesting

411
00:29:07,289 --> 00:29:12,389
if the database is over here by itself
and nothing ever touches it ever

412
00:29:13,200 --> 00:29:17,370
it's it's it's not very interesting but
when the data starts flowing whether

413
00:29:17,370 --> 00:29:19,590
it's a network connection of some sort

414
00:29:19,590 --> 00:29:24,149
holding back the data storing the data
it turns out that that app that

415
00:29:24,149 --> 00:29:25,199
connection

416
00:29:25,200 --> 00:29:28,889
how the data is moving back and forth or
between components and then getting the

417
00:29:28,889 --> 00:29:33,330
database and so on is much more
interesting to an attacker because

418
00:29:33,330 --> 00:29:38,189
that's where you particularly in could
be most vulnerable and so that's what we

419
00:29:38,190 --> 00:29:42,000
want to know how the data moving where
is it moving - and and how's it being

420
00:29:42,000 --> 00:29:44,159
authenticated and authorized and so on

421
00:29:44,159 --> 00:29:49,799
so for example just to start off with we
might look here at building out

422
00:29:49,799 --> 00:29:56,519
ok users and admin hitting a server to
into these are two users and the kinds

423
00:29:56,519 --> 00:30:00,059
of of data that are sending back and
forth which quest responses

424
00:30:00,059 --> 00:30:04,830
you know perhaps the admin is is setting
up some things on the server and the

425
00:30:04,830 --> 00:30:09,539
admin is reading in logging data and
there's a boundary between those users

426
00:30:09,539 --> 00:30:13,440
and the server we're outside i don't
have the right

427
00:30:13,440 --> 00:30:18,570
authentication authorization and inside
my request is now authorized it can do

428
00:30:18,570 --> 00:30:20,519
you know what it needs to do

429
00:30:20,519 --> 00:30:24,509
going a little further into the system
that would be what I would call a

430
00:30:24,509 --> 00:30:30,240
level-one a diagram this is more like a
level one after level 0 this level one

431
00:30:30,240 --> 00:30:34,830
where I'm a you know the finding a few
more things in my system

432
00:30:34,830 --> 00:30:38,490
so here I am I'm again documenting the
data flows

433
00:30:39,029 --> 00:30:43,679
I have the users in the am unix admin
again I have the web app and I have some

434
00:30:43,679 --> 00:30:47,340
services authentication service audit
service

435
00:30:47,340 --> 00:30:50,340
I have some files data files credentials

436
00:30:50,340 --> 00:30:54,330
i also have this management tool and
then I want to define some kind of trust

437
00:30:54,330 --> 00:31:01,139
boundary where the users are able to go
from let's say from outside inside and

438
00:31:01,139 --> 00:31:07,860
or maybe around that user and everything
around that user is is either not

439
00:31:07,860 --> 00:31:09,719
trusted and now trusted

440
00:31:09,720 --> 00:31:13,149
so you can find some of those things and
as you do that

441
00:31:13,149 --> 00:31:16,658
you're you're one to document what you
find

442
00:31:17,200 --> 00:31:22,239
and so you know where my users why it my
you know the entities that I i

443
00:31:22,239 --> 00:31:25,450
determined my processes very services

444
00:31:25,450 --> 00:31:31,239
the data stores the data flows how does
data flow and so what I would typically

445
00:31:31,239 --> 00:31:36,489
do is try to have a diagram that matches
you know what my system looks like at a

446
00:31:36,489 --> 00:31:41,169
high level view and then try to
understand okay you know what comes here

447
00:31:41,169 --> 00:31:44,799
what we're going to be using here and
ask some questions

448
00:31:44,799 --> 00:31:48,070
so for example in the request to the web
app

449
00:31:48,940 --> 00:31:54,969
what are we using are we using HTTPS are
we using HTTPS inside the system

450
00:31:54,969 --> 00:31:56,019
anywhere

451
00:31:56,019 --> 00:31:59,109
you know I see a lot of companies that
don't do that you know they they do a

452
00:31:59,109 --> 00:32:03,399
very good job of guarding the outside
but on the inside you notice that candy

453
00:32:03,399 --> 00:32:06,518
bar the the crunchy outside and the
Chilean tonight

454
00:32:06,519 --> 00:32:10,989
never seen that before now so those are
good questions to ask you know what are

455
00:32:10,989 --> 00:32:13,210
we doing we're sending those requests

456
00:32:13,210 --> 00:32:18,339
how are we are dedicating you know what
kind of what kind of mechanism what kind

457
00:32:18,339 --> 00:32:21,339
of protocol were using so those are
questions that you would ask about your

458
00:32:21,339 --> 00:32:24,700
system from a security perspective of
how this is working

459
00:32:25,389 --> 00:32:30,309
so once you've done that go through that
through that exercise you now have a

460
00:32:30,309 --> 00:32:34,119
diagram and understanding of your system
so let's talk about identifying the

461
00:32:34,119 --> 00:32:37,059
threats which of course as you can
imagine and threat modeling that's the

462
00:32:37,059 --> 00:32:38,408
most important part

463
00:32:38,409 --> 00:32:42,580
what we're doing there you know there's
a few ways you can use the attack trees

464
00:32:42,580 --> 00:32:47,379
we already talked about that you can use
some some libraries that kind of help

465
00:32:47,379 --> 00:32:53,109
you think about the kinds of it attacks
that are well-known a peck a loss top 10

466
00:32:53,109 --> 00:32:57,908
you can use checklist a loss has a
couple of really good ones

467
00:32:57,909 --> 00:33:02,919
a SBS and the proactive controls where
basically they say okay here are the

468
00:33:02,919 --> 00:33:06,909
things that we know or or questions that
you can ask your system

469
00:33:07,419 --> 00:33:12,009
have we done this have we done that you
know and so on you can use use cases or

470
00:33:12,009 --> 00:33:16,960
misuse cases those are great because so
many times we build systems we think

471
00:33:16,960 --> 00:33:21,070
about well how does this work from use
case you know the workflow

472
00:33:21,579 --> 00:33:24,369
we don't always think about the misuse
case and again remember I asked that

473
00:33:24,369 --> 00:33:26,559
question why would he use ever

474
00:33:26,559 --> 00:33:32,139
do that well that's a misuse case and so
it's good to think about those there is

475
00:33:32,139 --> 00:33:36,039
a there's a couple games out there that
kind of help you through those things

476
00:33:36,669 --> 00:33:42,460
this is from 0 wasp this cornucopia game
where they have various areas

477
00:33:42,460 --> 00:33:45,190
optimization session management and so
on

478
00:33:45,190 --> 00:33:51,669
where you basically play a hand around
rather and let's say I've got two of

479
00:33:51,669 --> 00:33:55,029
cryptography and you have something to
read

480
00:33:55,029 --> 00:33:58,029
say well does this apply to my system
yes or no

481
00:33:58,539 --> 00:34:03,369
and at the bottom of a card it will tell
you well this is found in a lost top 10

482
00:34:03,369 --> 00:34:07,570
this is found in the mcat back to the
founding whatever and so it's a way of

483
00:34:07,570 --> 00:34:10,839
helping your team understand about
threats as a way of understanding about

484
00:34:10,839 --> 00:34:14,319
some of the the top types of things that
are out there in a system

485
00:34:14,829 --> 00:34:19,750
another way to think about threats or or
to find threats and this is probably the

486
00:34:19,750 --> 00:34:24,790
most well-known or threat modeling is to
use stride stride is a and it's

487
00:34:24,790 --> 00:34:28,119
essentially it's not categories it's a
mnemonic

488
00:34:29,079 --> 00:34:33,609
so they're not a bunch of spoofing type
it is basically helping you understand

489
00:34:33,609 --> 00:34:37,960
well here's a kind of of a way of a
threat in your system

490
00:34:38,469 --> 00:34:42,969
spoofing is you know pretend to be whom
you're not tampering is changing the

491
00:34:42,969 --> 00:34:46,928
data repudiation is saying hey I did
something or you can't prove that I did

492
00:34:46,929 --> 00:34:49,929
something information disclosure

493
00:34:49,929 --> 00:34:54,399
you know making you know some sensitive
data available in all of service of

494
00:34:54,399 --> 00:34:59,920
course means I can't you know user your
application your service and elevation

495
00:34:59,920 --> 00:35:00,670
of privilege

496
00:35:00,670 --> 00:35:04,839
the most dangerous we're basically if
I'm a user and I have the ability to get

497
00:35:04,839 --> 00:35:10,569
into your system and subvert it without
you know authorizing properly or access

498
00:35:10,569 --> 00:35:11,619
control

499
00:35:11,619 --> 00:35:14,500
you know I can be an admin without
having to go through the process of

500
00:35:14,500 --> 00:35:18,700
being an admin you know elevation of
privilege the way to counter those in

501
00:35:18,700 --> 00:35:23,049
authentication integrity non-repudiation
which usually is through logging you

502
00:35:23,050 --> 00:35:26,230
know some kind of monitoring logging to
verify that you know users are doing

503
00:35:26,230 --> 00:35:27,790
what you think they're doing

504
00:35:27,790 --> 00:35:32,770
confidentiality availability and
authorization or access control

505
00:35:33,580 --> 00:35:38,710
so this is a way it again a way of
finding threats and it's a it's a very

506
00:35:38,710 --> 00:35:42,400
easy and simple way and a lot of people
start there

507
00:35:43,030 --> 00:35:47,470
I think it applies really best to data
flows but that's not all that you have

508
00:35:47,470 --> 00:35:50,890
maybe in your system so there are some
other things to think about will talk

509
00:35:50,890 --> 00:35:55,120
about the moment there's also this game
elevation of privilege game which

510
00:35:55,120 --> 00:35:58,480
basically another game that kind of
helps you think about threat modeling

511
00:35:58,480 --> 00:36:00,610
using stride

512
00:36:00,610 --> 00:36:06,310
pasta is another method which uses
stride attacks and also uses risk

513
00:36:06,310 --> 00:36:11,470
analysis part of pasta is that they may
include the actual simulated attack as

514
00:36:11,470 --> 00:36:14,020
part of the threat model

515
00:36:14,020 --> 00:36:18,190
what I like to do is also look at the
functional areas and ask questions

516
00:36:18,190 --> 00:36:23,020
accordingly so I asked questions about
configuration management sensitive data

517
00:36:23,020 --> 00:36:30,610
cryptography and and so on and so on
those kinds of questions I might ask is

518
00:36:30,610 --> 00:36:33,520
you know who would be interested in this
application its data who are the threat

519
00:36:33,520 --> 00:36:38,440
agents where the goals the assets where
the methods that they're using

520
00:36:39,490 --> 00:36:42,490
are there any attack services exposed
you know what are we missing

521
00:36:43,150 --> 00:36:48,490
how the authentication handled you know
and and when we say okay we've got a

522
00:36:48,490 --> 00:36:52,359
vindication a specifically what kind of
authentication

523
00:36:52,360 --> 00:36:56,470
what are you using for authentication
what are you using for access control

524
00:36:57,100 --> 00:37:01,210
so it's not enough to just say you know
you know where we got a password

525
00:37:01,210 --> 00:37:06,010
yeah well okay how's the password store
how does it retrieve how that you know

526
00:37:06,010 --> 00:37:09,940
those are kinds of questions you need to
ask about the system we sending data to

527
00:37:09,940 --> 00:37:11,290
the open and so on

528
00:37:11,290 --> 00:37:17,080
I'll one of the best questions i found
very effective anything giving you up at

529
00:37:17,080 --> 00:37:17,740
night

530
00:37:17,740 --> 00:37:21,700
is there anything in this system that
you built that you would rather nobody

531
00:37:21,700 --> 00:37:26,589
ever know or you forgot about it still
out there and you know I better go and

532
00:37:26,590 --> 00:37:27,550
fix it

533
00:37:27,550 --> 00:37:33,700
so that's a great one task as well so
flipping through here i want to take a

534
00:37:33,700 --> 00:37:39,490
look at a scenario configuration
management back into our web diagram

535
00:37:39,490 --> 00:37:44,620
here if I narrowed it down to where
would I find configuration management

536
00:37:44,620 --> 00:37:45,609
problems

537
00:37:45,610 --> 00:37:46,820
i'm looking here

538
00:37:46,820 --> 00:37:49,850
our data file such a configuration files
for web

539
00:37:49,850 --> 00:37:56,240
well what's a problem with that well it
turns out that the reality is in that

540
00:37:56,240 --> 00:38:02,450
system we have files its input into our
system has anybody ever thought about

541
00:38:02,450 --> 00:38:06,680
you know what if somebody change the URL
in that configuration file what would

542
00:38:06,680 --> 00:38:07,580
happen

543
00:38:07,580 --> 00:38:12,410
what if somebody was able to get it my
configuration file with the connection

544
00:38:12,410 --> 00:38:16,399
string to a database and change that to
another database what would happen

545
00:38:16,400 --> 00:38:22,700
so some of the security principles to be
aware of be reluctant to trust and

546
00:38:22,700 --> 00:38:27,799
assume that secrets are not safe knowing
that we can then ask the questions you

547
00:38:27,800 --> 00:38:30,530
know how does this app users
configuration files

548
00:38:30,530 --> 00:38:35,120
is there any kind of validation on the
data in those configuration files or

549
00:38:35,120 --> 00:38:39,770
it's just an implied trust and we are
jumping ahead of it but some of the

550
00:38:39,770 --> 00:38:44,390
possible controls and mitigation are you
know set permissions on those files

551
00:38:44,390 --> 00:38:49,339
don't just let anybody read those are
right to them but make sure that the

552
00:38:49,340 --> 00:38:52,820
process that's reading and writing those
configuration files has you know the

553
00:38:52,820 --> 00:38:55,760
right tackles imply applied

554
00:38:55,760 --> 00:39:00,560
another thing is you know validate the
data that's coming from those files use

555
00:39:00,560 --> 00:39:04,250
testing but testing to ensure input
validation so those are some things that

556
00:39:04,250 --> 00:39:08,990
you might find as a result of doing a
threat model against your configuration

557
00:39:08,990 --> 00:39:09,950
management

558
00:39:09,950 --> 00:39:13,580
so here we have some threats that have
been identified

559
00:39:14,450 --> 00:39:18,919
let's talk about the mitigations and the
wrist so there are a few options that

560
00:39:18,920 --> 00:39:24,140
you have once you identify some threats
one is it just simply leave it as is

561
00:39:24,140 --> 00:39:29,960
if you find that you have you know let's
say a sequel injection problem now

562
00:39:29,960 --> 00:39:32,960
hopefully you don't leave it but you
could you could say you know I want to

563
00:39:32,960 --> 00:39:37,010
fix it later or have other things that
I've found I want to leave it as is

564
00:39:37,010 --> 00:39:40,490
we already know it's there it's low risk
perhaps

565
00:39:40,490 --> 00:39:43,319
let's leave it you can remove it from
the product

566
00:39:43,320 --> 00:39:48,300
ideally you can remedy it with a
technology countermeasure the other is

567
00:39:48,300 --> 00:39:53,760
that you can also warn the user now this
is where you see the CSL a CL C essays

568
00:39:53,760 --> 00:39:59,700
and support where or agreements that we
all you know come up and say you agree

569
00:39:59,700 --> 00:40:04,290
to this and you scroll through and read
it like everybody does and click OK that

570
00:40:04,290 --> 00:40:09,720
may say you know there are certain risks
if you run this application so that

571
00:40:09,720 --> 00:40:13,859
so the question is you know what's the
risk associated with things that we find

572
00:40:13,860 --> 00:40:19,110
and that's where risk management comes
in you can apply the fair approach which

573
00:40:19,110 --> 00:40:27,300
is a very drawn-out process you can use
what i like is just that a high medium

574
00:40:27,300 --> 00:40:34,770
low which is essentially applying two
factors ease of expectation and business

575
00:40:34,770 --> 00:40:41,310
impact so he's of expectation is you
know how how easy is it for someone to

576
00:40:41,310 --> 00:40:45,420
be able to exploit our system so if an
office users can exploit it

577
00:40:45,420 --> 00:40:51,630
more than likely this is a high-risk if
someone has to know it very well and are

578
00:40:51,630 --> 00:40:58,650
strong programming skills then maybe
your risk rating is low if you're at the

579
00:40:58,650 --> 00:41:04,890
other good business impact if all users
impacted that's high at a low number

580
00:41:05,550 --> 00:41:10,380
low and then you combine those together
and now you have let's say for example a

581
00:41:10,380 --> 00:41:15,630
medium risk threat this is on related to
csrf back to our configuration

582
00:41:15,630 --> 00:41:17,550
management

583
00:41:17,550 --> 00:41:23,250
you know if we own the box perhaps
medium if we're on the cloud

584
00:41:23,880 --> 00:41:27,780
hi and the reason for that is maybe
because we don't own it and so on

585
00:41:27,780 --> 00:41:32,730
so following up a document what you
found

586
00:41:33,300 --> 00:41:36,390
file bugs verify bugs

587
00:41:36,390 --> 00:41:42,150
if we missed anything review it again if
there's anything new review it again

588
00:41:42,960 --> 00:41:49,020
and so then what you have ultimately is
a living threat model a living threat

589
00:41:49,020 --> 00:41:49,830
model

590
00:41:49,830 --> 00:41:54,840
so what a finishing up here secure
design before new features

591
00:41:56,150 --> 00:42:00,440
drive your testing and other review
activities and understand the bigger

592
00:42:00,440 --> 00:42:01,400
picture

593
00:42:01,400 --> 00:42:06,559
I have some resources here a lot of
great books again I'll make these slides

594
00:42:06,559 --> 00:42:09,319
available so you'll get these links and
so on

595
00:42:09,319 --> 00:42:12,890
and now we come to questions and I just
want to zip through because i'm i'm

596
00:42:12,890 --> 00:42:17,538
running out of time but I want to leave
some time for questions so many

597
00:42:17,539 --> 00:42:22,819
questions on that whole process we've
got about 5 10 minutes there

598
00:42:27,650 --> 00:42:37,789
good question so as I mentioned and a
brook points out that the developers

599
00:42:37,789 --> 00:42:42,619
should do that and I've had questions
about that myself and you know I think

600
00:42:42,619 --> 00:42:44,390
it depends on the organization

601
00:42:44,390 --> 00:42:48,348
if you've never done this before the
more than likely the security group is

602
00:42:48,349 --> 00:42:52,640
going to be the ones who started in and
start driving it and bringing into the

603
00:42:52,640 --> 00:42:57,710
organization but ultimately I think what
you want to try to do is get each of the

604
00:42:57,710 --> 00:43:00,289
groups start to own some of this

605
00:43:00,289 --> 00:43:04,700
so you know one way that I've seen and
what I'm actually working with a client

606
00:43:04,700 --> 00:43:08,480
right now where they're starting from
the security group and they're trying to

607
00:43:08,480 --> 00:43:14,630
help different teams get the skills and
the training they need to do threat

608
00:43:14,630 --> 00:43:21,770
modeling so that more or less a a way of
duplicating the effort so that not just

609
00:43:21,770 --> 00:43:26,000
one person does this but several do that
and so that you know the small things

610
00:43:26,000 --> 00:43:28,970
like for example there's just some
things that you should have in your

611
00:43:28,970 --> 00:43:30,980
application regardless right

612
00:43:30,980 --> 00:43:35,599
I should have proper authentication I
have I should have proper authorization

613
00:43:35,599 --> 00:43:40,309
those are things that should already be
done before it ever gets to a group to

614
00:43:40,309 --> 00:43:42,829
say let's ask those questions

615
00:43:42,829 --> 00:43:47,809
so try to move that down into the basic
questions can we get those answered and

616
00:43:47,809 --> 00:43:54,200
then the bigger design questions
continue to move forward up so I i think

617
00:43:54,200 --> 00:43:57,589
the answer your question I think
ultimately you want

618
00:43:57,590 --> 00:44:02,450
a lot of different groups own their own
threat model but it may start at the

619
00:44:02,450 --> 00:44:08,180
security group and the security team to
start you know showing hey this is what

620
00:44:08,180 --> 00:44:12,230
we're doing and why and what it helps
you do and ultimately it's helping you

621
00:44:12,230 --> 00:44:15,440
design better and secure code in and
secure systems

622
00:44:16,190 --> 00:44:24,260
good question anybody else those of you
mentioned that you've done some trap

623
00:44:24,260 --> 00:44:27,260
money what are you using any of the
tools out of curiosity

624
00:44:29,150 --> 00:44:34,310
microsoft too late buddy

625
00:44:34,310 --> 00:44:40,790
okay so yeah anyway

626
00:44:40,790 --> 00:44:43,970
other questions yes

627
00:44:46,040 --> 00:44:55,190
sure sure

628
00:44:55,760 --> 00:44:59,360
so the question is how do we go where do
you define and how do you define trust

629
00:44:59,360 --> 00:45:03,410
boundaries and that's a good question
because that can depend on the a lot of

630
00:45:03,410 --> 00:45:08,750
things about your company and about your
application and what you're what i see

631
00:45:08,750 --> 00:45:09,830
it is again

632
00:45:09,830 --> 00:45:14,120
typically the first place i started
where do we move from not being a

633
00:45:14,120 --> 00:45:18,170
dedicated to being authenticated where
do we go from not being authorized now

634
00:45:18,170 --> 00:45:23,300
being authorized but that can also vary
depending on the process it can depend

635
00:45:23,300 --> 00:45:24,560
on the user

636
00:45:24,560 --> 00:45:29,299
so you know that's where you have to and
also in my internal and external am I

637
00:45:29,300 --> 00:45:34,370
you know all those kinds of things may
vary but that's my cum my rule of thumb

638
00:45:34,370 --> 00:45:35,390
where I start

639
00:45:35,390 --> 00:45:40,609
where am i changing the state's it's
more like a state issue where my

640
00:45:40,610 --> 00:45:44,480
changing my state of security being
authorizer authenticated

641
00:45:45,020 --> 00:45:50,810
I'm sorry I can get authorized and then
moving from there

642
00:45:50,810 --> 00:45:53,960
specifically how I start trying to
understand trust boundaries

643
00:45:55,340 --> 00:46:01,820
you think you can be used for him . or
it can be processes and the reason I say

644
00:46:01,820 --> 00:46:06,050
that is because you want to be very
careful I don't know if you interview

645
00:46:06,050 --> 00:46:09,380
guys are doing microservices these days
which is the rage

646
00:46:10,550 --> 00:46:14,810
be careful about them because there's
have you heard of the confused deputy

647
00:46:14,810 --> 00:46:19,970
problem is that familiar everybody heard
of that essentially i have let's say i

648
00:46:19,970 --> 00:46:25,220
have two or three microservices and I i
have a workflow so one calls this one

649
00:46:25,220 --> 00:46:30,740
which calls the third one but what
happens if I am somebody else who calls

650
00:46:30,740 --> 00:46:32,810
the second one but i don't have the
right

651
00:46:32,810 --> 00:46:38,270
authorization do it but I'm not checking
it because simply i know that if i call

652
00:46:38,270 --> 00:46:43,190
this one and bypass this first one I'll
get it to do the things i want and that

653
00:46:43,190 --> 00:46:48,980
second one microservice may not know and
not realize who's calling it all it

654
00:46:48,980 --> 00:46:49,820
knows is

655
00:46:49,820 --> 00:46:55,640
I call this third thing which isn't in
it which is a privilege operation but

656
00:46:55,640 --> 00:46:58,460
because i'm not doing the correct
checking

657
00:46:58,460 --> 00:47:03,110
I don't know if it's this one calling me
or this one calling me but I want to do

658
00:47:03,110 --> 00:47:07,370
the right thing which is called the
privilege microservice so the confused

659
00:47:07,370 --> 00:47:11,600
deputy problem is that second one is
going to do what it thinks is right

660
00:47:11,600 --> 00:47:16,819
thing but if I don't have the correct
trust boundaries to find the correct

661
00:47:16,820 --> 00:47:23,300
authorization in place to do the right
thing the next thing that calls then you

662
00:47:23,300 --> 00:47:28,100
know I potentially have just introduced
a security issue in my system not

663
00:47:28,100 --> 00:47:33,529
understanding the importance of you know
all the way through not just users but

664
00:47:33,530 --> 00:47:37,670
all the way through microservices
calling other microservices it really

665
00:47:37,670 --> 00:47:40,340
matters how the secure design is in
place

666
00:47:40,340 --> 00:47:46,970
does that make sense yeah well and I see
that I mean that's a pic the common

667
00:47:46,970 --> 00:47:50,899
thing I keep saying with microservices
with when I get called in somebody

668
00:47:50,900 --> 00:47:52,580
talked about API design

669
00:47:52,580 --> 00:47:58,040
nobody's thinking about that enough yet
I think ok any other questions

670
00:47:59,660 --> 00:48:02,000
ok right thank you

