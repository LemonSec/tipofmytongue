1
00:00:00,000 --> 00:00:13,049
all right thank you has all right hi
everyone this is my name is chris

2
00:00:13,049 --> 00:00:13,950
Maddalena

3
00:00:13,950 --> 00:00:19,140
I'm a fantastic free sentire and just I
don't really like doing the lengthy

4
00:00:19,140 --> 00:00:24,060
introduction for talks so just a few key
facts for you to know for this talk if

5
00:00:24,060 --> 00:00:27,479
you're interested in some of the stuff i
talked about today can find my github I

6
00:00:27,480 --> 00:00:29,279
just / Chris Maddalena

7
00:00:29,279 --> 00:00:33,030
and I'm pretty active on Twitter so we
want to get a hold of me I tweeting me

8
00:00:33,030 --> 00:00:36,420
and you know on twitter is a pretty good
way to go about doing that so just at

9
00:00:36,420 --> 00:00:37,500
sea Maddalena

10
00:00:37,500 --> 00:00:41,070
and just a quick plug for my sec you're
probably for me might be familiar with

11
00:00:41,070 --> 00:00:43,710
my sex since you're here at convergent
besides Detroit

12
00:00:43,710 --> 00:00:46,920
if not know that we have meetups in
southfield

13
00:00:46,920 --> 00:00:50,070
we also meet us in jackson so if you're
from the area

14
00:00:50,070 --> 00:00:53,370
it's totally worth coming out hang out
with the community here in here in

15
00:00:53,370 --> 00:01:00,180
Michigan and we do have a really great
talks once a month at both locations are

16
00:01:00,180 --> 00:01:01,320
often different

17
00:01:01,320 --> 00:01:06,299
so we often putting out to different
talks every month and we do post those

18
00:01:06,299 --> 00:01:10,830
actually live stream them and we'll post
them on the my set group youtube channel

19
00:01:10,830 --> 00:01:14,670
so a lot of times the talks that might
be at other conferences are not recorded

20
00:01:14,670 --> 00:01:18,750
or we're just they actually never end up
at a conference we do a lot of lightning

21
00:01:18,750 --> 00:01:22,530
talks a lot of new presenters students
that give talks kind of work on their

22
00:01:22,530 --> 00:01:25,259
presenting skills so there's a lot of
really cool stuff there that doesn't

23
00:01:25,259 --> 00:01:31,439
actually make it after these conferences
so check it out so quick agenda items

24
00:01:31,439 --> 00:01:36,240
for this talk I i want to talk about how
you can create your own tools and try to

25
00:01:36,240 --> 00:01:40,589
encourage you to kind of go get your
hands dirty little bit of do-it-yourself

26
00:01:40,590 --> 00:01:45,240
business and we're going to talk about
you making sure you understand code

27
00:01:45,240 --> 00:01:49,710
before you run it and we'll talk about
why if that's an unfamiliar concept and

28
00:01:49,710 --> 00:01:52,740
also just making sure you're not
reinventing the wheel actually improving

29
00:01:52,740 --> 00:01:57,210
and enhancing stuff that already exists
and working with other developers on

30
00:01:57,210 --> 00:02:01,500
their tools that already exists that you
can work on as well then also working on

31
00:02:01,500 --> 00:02:04,500
making your own tool kit and actually
someone your own to look at that you use

32
00:02:04,500 --> 00:02:07,500
for automation or things that your job

33
00:02:08,490 --> 00:02:12,540
so the first thing the first step when
you're going to make a tool or when

34
00:02:12,540 --> 00:02:15,750
you're trying to work with a new tool is
understanding how that cool works

35
00:02:15,750 --> 00:02:19,890
this applies to everything it applies to
meterpreter and and map things you might

36
00:02:19,890 --> 00:02:23,489
use every day and I know there's a lot
of lutein people here a lot of my

37
00:02:23,490 --> 00:02:26,640
example will be red team focused because
that's what I use every day but this

38
00:02:26,640 --> 00:02:31,920
applies to blue team tools - I so one
thing you want to be familiar with it

39
00:02:31,920 --> 00:02:35,489
just looking through the code you don't
have to be really familiar with out

40
00:02:35,490 --> 00:02:40,200
every function does just not be able to
start digging in and begin to understand

41
00:02:40,200 --> 00:02:43,500
what it's trying to do because sometimes
you'll find a tool that says it does one

42
00:02:43,500 --> 00:02:44,040
thing

43
00:02:44,040 --> 00:02:47,400
it appears to do it but it just doesn't
do it right so it might end up being

44
00:02:47,400 --> 00:02:48,630
unreliable

45
00:02:48,630 --> 00:02:52,019
I if you can understand the tool you can
understand how am I break and how it

46
00:02:52,020 --> 00:02:53,070
actually works

47
00:02:53,070 --> 00:02:57,480
I and so for example in this example we
have some proof of concept exploit code

48
00:02:57,480 --> 00:03:02,160
is actually from 2012 and a friend of
mine actually several people have shown

49
00:03:02,160 --> 00:03:06,359
in the slide - who are familiar with
this rule of always make sure i

50
00:03:06,360 --> 00:03:09,690
understand the code immediately started
pointing out hey that's not shellcode

51
00:03:09,690 --> 00:03:13,770
there's a bunch of spaces in there this
is just a ski tax father they're right

52
00:03:13,770 --> 00:03:18,360
if you actually worth it I put that out
and asking it's just it's an nasty

53
00:03:18,360 --> 00:03:23,370
command to try to delete whatever your
route drive is on your computer so if

54
00:03:23,370 --> 00:03:25,830
you're if you're on the red team and
you're working with proof of concept

55
00:03:25,830 --> 00:03:30,720
code know that sometimes this gets stuck
in there and it's it's not friendly but

56
00:03:30,720 --> 00:03:34,080
also there might be tools they don't
intend to be unfriendly i can just do

57
00:03:34,080 --> 00:03:37,950
bad stuff so we want to make sure that
we understand the code from a security

58
00:03:37,950 --> 00:03:41,730
standpoint and also so that we know what
it's actually doing our system

59
00:03:41,730 --> 00:03:46,649
the second guideline is actually
improving and fixing we don't want to

60
00:03:46,650 --> 00:03:47,940
reinvent the wheel

61
00:03:47,940 --> 00:03:52,620
so this is a really great way to avoid
reproducing effort has already been done

62
00:03:52,620 --> 00:03:55,980
it may be done better than you can i but
also it's great for learning

63
00:03:56,550 --> 00:04:00,960
so take a tool that you already use dig
through the code understand it and it's

64
00:04:00,960 --> 00:04:04,709
not doing something that you like or
it's not doing a new white the right way

65
00:04:04,709 --> 00:04:06,390
for what you need

66
00:04:06,390 --> 00:04:10,260
you can probably make modifications to
it you can add an option and you don't

67
00:04:10,260 --> 00:04:13,590
need to immediately jump into built you
know if you take sort of a house

68
00:04:13,590 --> 00:04:17,160
renovation as an example you need to
jump into building a whole wing under

69
00:04:17,160 --> 00:04:19,290
the house or garage in the back yard

70
00:04:19,290 --> 00:04:20,430
you can hang a poster

71
00:04:20,430 --> 00:04:24,660
you can do little things to it to
improve it and make it so you like it is

72
00:04:24,660 --> 00:04:27,660
that you use it and it works the way you
like

73
00:04:28,199 --> 00:04:31,590
and one of the really great ways about
doing a great thing about doing this we

74
00:04:31,590 --> 00:04:35,159
can then submit our changes back to the
projects especially in the infosec

75
00:04:35,160 --> 00:04:38,160
community we have a again embarrassment
of riches and open source software

76
00:04:38,850 --> 00:04:42,660
there's so much out there and get up the
stuff you use every day like the social

77
00:04:42,660 --> 00:04:46,380
engineering tool kit or nmap through
this is coded that is out there that you

78
00:04:46,380 --> 00:04:50,039
can look at it might be beyond you right
now but eventually it might not be or

79
00:04:50,039 --> 00:04:52,680
there might be a code that your friends
co-workers other people in the community

80
00:04:52,680 --> 00:04:55,110
work on i'm going to show you some code
today

81
00:04:55,110 --> 00:04:58,020
it's not perfect but it's tools i'm
gonna put out there for you to take a

82
00:04:58,020 --> 00:05:01,440
look at and you might have ideas on how
to improve it you might know how to do

83
00:05:01,440 --> 00:05:04,860
something better than I do and you can
contribute back to my project just like

84
00:05:04,860 --> 00:05:08,070
you can contribute back to any other
project you find out and get harbor you

85
00:05:08,070 --> 00:05:11,070
hear about on twitter or an account at a
conference

86
00:05:12,060 --> 00:05:15,840
the number three active making your own
tool kit eventually get to the point

87
00:05:15,840 --> 00:05:18,090
where you're comfortable automating
things you're comfortable actually

88
00:05:18,090 --> 00:05:21,479
building out a tool and this is a really
great skill to possess

89
00:05:21,479 --> 00:05:26,639
because if you think about it you might
periodically see at half you don't want

90
00:05:26,639 --> 00:05:27,270
to do

91
00:05:27,270 --> 00:05:30,810
maybe every Friday you have to do
something takes like 45 minutes or once

92
00:05:30,810 --> 00:05:31,500
a month

93
00:05:31,500 --> 00:05:34,680
you have to log into every system and
install this update or it make some

94
00:05:34,680 --> 00:05:39,300
change and you look at it and you think
well I could automate that but for me to

95
00:05:39,300 --> 00:05:42,240
figure out how to automate it and
actually implemented and tested its

96
00:05:42,240 --> 00:05:45,690
gonna be like two hours maybe we'll take
me an entire day depending on your skill

97
00:05:45,690 --> 00:05:49,229
level of understanding that sounds like
a terrible way to spend the day when

98
00:05:49,229 --> 00:05:51,900
it's just going to take you 45 minutes
to do it manually

99
00:05:51,900 --> 00:05:55,380
but if you think about the way to do it
correctly is actually spend the time

100
00:05:55,380 --> 00:05:59,159
learn how to do it and then once you've
actually implemented maybe takes your

101
00:05:59,159 --> 00:06:01,169
entire day for that 45 minutes

102
00:06:01,169 --> 00:06:04,469
time-saving but it's now time you save
every week or every month

103
00:06:05,130 --> 00:06:07,680
it's going to pay dividends in the end
and you're going to learn a lot while

104
00:06:07,680 --> 00:06:08,639
you do it

105
00:06:08,639 --> 00:06:12,360
and of course so your reward is you end
up

106
00:06:12,360 --> 00:06:15,630
you have better sending the tools you
use you have a better understanding of

107
00:06:15,630 --> 00:06:19,139
how those tools break how they can break
why they're breaking you you might

108
00:06:19,139 --> 00:06:22,199
actually start to understand the stack
traces that you see you get spit out if

109
00:06:22,199 --> 00:06:25,139
it is you know no error handling and
you'll end up learning more about

110
00:06:25,139 --> 00:06:27,630
important programming languages that

111
00:06:27,630 --> 00:06:31,770
and what's important to you will change
depending on what you do that might be

112
00:06:31,770 --> 00:06:35,130
python you're in impose a community
probably is Python there's a lot out

113
00:06:35,130 --> 00:06:38,880
there written in that language but
there's Ruby there see there's go

114
00:06:39,570 --> 00:06:42,360
you can kind of pick your language what
you're interested in and you can find a

115
00:06:42,360 --> 00:06:45,420
project in that language I guarantee it

116
00:06:45,420 --> 00:06:48,840
so to get started you can start off
really small

117
00:06:48,840 --> 00:06:52,440
you don't have to jump right into the
deep end with a big project at the dive

118
00:06:52,440 --> 00:06:55,830
into something like an interpreter and
try to understand that that's not

119
00:06:55,830 --> 00:06:59,880
necessary you can actually just take a
simple tool that you like that requires

120
00:06:59,880 --> 00:07:04,080
maybe a little bit of error handling or
better user feedback and actually give

121
00:07:04,080 --> 00:07:08,520
an example of this in a minute of how I
did it but you can start adding little

122
00:07:08,520 --> 00:07:11,609
things that actually really help out
that tool even though it's a small

123
00:07:11,610 --> 00:07:17,040
addition in the grand scheme of things
it really helps out that project and you

124
00:07:17,040 --> 00:07:21,720
get to learn along the way and as part
of that you start to learn about get and

125
00:07:21,720 --> 00:07:23,670
get hub and how that works

126
00:07:23,670 --> 00:07:27,720
it's not as confusing as it looks up
front there's a lot of weird get command

127
00:07:27,720 --> 00:07:32,760
that look crazy at the start but really
there's only a few commands that you

128
00:07:32,760 --> 00:07:36,539
need to know to get started and you can
start you know cloning repositories and

129
00:07:36,540 --> 00:07:40,170
editing code and you know pushing it
back up to github without that much

130
00:07:40,170 --> 00:07:45,390
difficulty and one of things i want to
point out and actually talking to the

131
00:07:45,390 --> 00:07:49,620
event and about this last night and he
mentioned that you know it's a really

132
00:07:49,620 --> 00:07:52,620
important idea to stress you don't have
to be afraid of even things like the

133
00:07:52,620 --> 00:07:56,370
kids like before kids books like no
searches Python for kids is actually a

134
00:07:56,370 --> 00:07:58,050
really great book it's pretty short

135
00:07:58,050 --> 00:08:01,560
it's pretty easy to reference if you buy
the PDF from the website and you can do

136
00:08:01,560 --> 00:08:04,590
a lot of cool stuff that might get you
started that's especially if you have

137
00:08:04,590 --> 00:08:07,650
kids that maybe you're interested in
learning python along with them

138
00:08:07,650 --> 00:08:11,099
there's projects in there like I after
the right here i have a picture of the

139
00:08:11,100 --> 00:08:16,320
the turtle which python has a kernel
module that just you can draw stuff on

140
00:08:16,320 --> 00:08:19,980
your screen and you can tell it to go
forward turn 90 degrees to the right go

141
00:08:19,980 --> 00:08:22,980
for you draw a square and the book will
walk you through that and I'll

142
00:08:22,980 --> 00:08:26,220
challenges i hate draw the shape like
you can start going crazy you can add

143
00:08:26,220 --> 00:08:29,280
color you can do all kinds of stuff that
your kid will probably love and you

144
00:08:29,280 --> 00:08:31,960
learn a lot along the way of of how do
you

145
00:08:31,960 --> 00:08:34,960
write some pretty basic python

146
00:08:35,950 --> 00:08:39,070
once you start getting involved with
github and I do encourage you to do so

147
00:08:39,070 --> 00:08:44,080
is to get out there set up get help
account and you can create you can

148
00:08:44,080 --> 00:08:48,040
create your first repo and a repo just
it's a repository is a repository for

149
00:08:48,040 --> 00:08:51,430
anything that's why it's called that
doesn't have to be a repository for this

150
00:08:51,430 --> 00:08:55,660
one specific grandiose tool you want to
make it can be just where you stuff all

151
00:08:55,660 --> 00:08:58,930
your scripts you could just call it
Christmas scripts and that's just where

152
00:08:58,930 --> 00:08:59,949
you put stuff

153
00:08:59,950 --> 00:09:02,920
it's even a great kind of backup
solution if you're on another computer

154
00:09:02,920 --> 00:09:06,010
go all I have this really great script
that does this for me on my other

155
00:09:06,010 --> 00:09:08,560
computer just going to get up and pull
it down

156
00:09:08,560 --> 00:09:11,589
of course make sure that when you're
throwing stuff up on github it's not a

157
00:09:11,589 --> 00:09:13,540
bunch of automation script of havoc here

158
00:09:13,540 --> 00:09:17,260
hardcoded admin passwords in it or
something like that but you can put

159
00:09:17,260 --> 00:09:20,110
whatever you want up there you can even
just make notes there's plenty of stuff

160
00:09:20,110 --> 00:09:23,560
you'll find on github some of my
favorite repositories i have started are

161
00:09:23,560 --> 00:09:27,640
nothing but just like links that someone
has put together a really great blogs or

162
00:09:27,640 --> 00:09:30,670
post referencing a certain topic

163
00:09:30,670 --> 00:09:35,229
so you can put anything there and you
can pull it down and update it and push

164
00:09:35,230 --> 00:09:37,690
it back up to get up just like code

165
00:09:37,690 --> 00:09:41,350
so even even creating notes to yourself
for things you want to remember on

166
00:09:41,350 --> 00:09:45,220
github and maybe share with other people
is a great way to get started

167
00:09:45,970 --> 00:09:49,870
you can also get started looking for
creepos so find what you like

168
00:09:49,870 --> 00:09:53,140
fork it it's literally a button click
you now have your own copy of that tool

169
00:09:53,140 --> 00:09:56,350
at your own github repo for it and you
can do whatever you want with it

170
00:09:56,350 --> 00:10:00,220
it has no effect on the other project
that's unclear you can do anything you

171
00:10:00,220 --> 00:10:00,760
want

172
00:10:00,760 --> 00:10:05,230
it will have no effect on the original
creators project so have at it

173
00:10:05,230 --> 00:10:09,010
if you break something you can just hard
reset the whole thing and start over

174
00:10:09,520 --> 00:10:14,260
and so this is I just took this from
github if you go to help github com

175
00:10:14,260 --> 00:10:16,899
actually have a really great
walkthroughs and that the accused help

176
00:10:16,899 --> 00:10:24,640
you get started it up if any of its kind
of confusing and take a drink real quick

177
00:10:25,580 --> 00:10:31,010
up so I at this point I kind of want to
share a story with you when I got

178
00:10:31,010 --> 00:10:32,150
started with github

179
00:10:32,150 --> 00:10:37,880
these are some of my is my first six
pull request a friend of mine creates a

180
00:10:37,880 --> 00:10:42,950
really cool tool called the Oscar
framework and last year i decided i want

181
00:10:42,950 --> 00:10:44,300
to get better with python

182
00:10:44,300 --> 00:10:49,640
so he was kind enough to offer to to
someone else thing okay if you have any

183
00:10:49,640 --> 00:10:51,319
comments on my cool

184
00:10:51,320 --> 00:10:55,340
feel free to you know let me know i'll
give you credit will implement them and

185
00:10:55,340 --> 00:10:59,120
I thought that was neat that he was open
to doing that so I took a look at it and

186
00:10:59,120 --> 00:11:03,170
just wanted to learn how we did stuff
and i was i was playing with it and saw

187
00:11:03,170 --> 00:11:07,939
it kept breaking I kept crashing it and
I realized it was because we're at

188
00:11:07,940 --> 00:11:09,440
wanted a full URL

189
00:11:09,440 --> 00:11:13,220
I wasn't giving it the HTTP colon
backslash backslash which is what python

190
00:11:13,220 --> 00:11:17,900
wants it wants the full URL but the tool
didn't convey that to me

191
00:11:17,900 --> 00:11:22,640
I didn't know it and I was as a result i
was just crashing and getting a stack

192
00:11:22,640 --> 00:11:27,140
trace back and I once i figured it out I
wasn't here the tools should really

193
00:11:27,140 --> 00:11:30,439
probably just tell me that it wants that
it should have some error handling so it

194
00:11:30,440 --> 00:11:33,380
doesn't crash all the way back and i
have to go through all these menus again

195
00:11:33,380 --> 00:11:37,460
so i went in there and I didn't know
much about Python the time but I've

196
00:11:37,460 --> 00:11:42,560
taken you know many classes on see in
school so I had some idea of how to set

197
00:11:42,560 --> 00:11:43,130
up

198
00:11:43,130 --> 00:11:46,760
you know like a try-catch look at how
that was done in Python and implemented

199
00:11:46,760 --> 00:11:51,500
it and it was a very very small thing
that I did to his tool but it made it so

200
00:11:51,500 --> 00:11:55,430
that now when you run it if you give it
the wrong input it can't hit the

201
00:11:55,430 --> 00:11:57,620
internet so it can't load that page

202
00:11:57,620 --> 00:12:01,310
it doesn't just crash it now it has
proper error handling it

203
00:12:01,310 --> 00:12:05,660
so again it wasn't a unique idea i did
really nothing to his overall concept he

204
00:12:05,660 --> 00:12:08,930
still gets full credit for having a
really cool tool that he created but i

205
00:12:08,930 --> 00:12:13,219
was able to contribute a small thing
that overall made it a nicer tool to use

206
00:12:14,000 --> 00:12:18,530
now what I want to bring this up is
because i had no idea how to use github

207
00:12:18,530 --> 00:12:22,939
so i tried to understand the command
line and basically gave in

208
00:12:22,940 --> 00:12:26,420
submitted to failure and said I don't
understand how to use this

209
00:12:26,960 --> 00:12:30,230
I'm just going to go to get hub and
actually try to edit hit the code on

210
00:12:30,230 --> 00:12:32,930
github and do a pull request that way

211
00:12:32,930 --> 00:12:36,689
of course you do that the code works on
my computer it should work when I added

212
00:12:36,690 --> 00:12:39,750
the github that is if I edit it
correctly and I don't forget things like

213
00:12:39,750 --> 00:12:43,110
quotation marks and of course he
accepted it

214
00:12:43,110 --> 00:12:46,050
he goes hey 20 minutes later you know
your your code just crashes the tool

215
00:12:46,050 --> 00:12:49,319
haha oh my god ok so let's try this
again

216
00:12:49,920 --> 00:12:53,250
I find the quotation mark i fix it of
course I don't have the code now it

217
00:12:53,250 --> 00:12:54,420
sounds flustered

218
00:12:54,420 --> 00:12:57,870
so I don't I don't test it I another
pull request

219
00:12:57,870 --> 00:13:02,100
you fixed it but there isn't here is a
new stack trace you broke it again

220
00:13:02,100 --> 00:13:07,740
like oh my so now I run it as the oh no
I fix the next syntax error and then run

221
00:13:07,740 --> 00:13:12,210
it again oh there's a third syntax error
I finally get it all fixed commit back

222
00:13:12,210 --> 00:13:15,780
to my repo and do the pull request and
it took about five pull request

223
00:13:15,780 --> 00:13:19,319
I would you two being committed back his
project report we actually finally had

224
00:13:19,320 --> 00:13:24,870
working error handling in his tool but
what I learned from that was now I

225
00:13:24,870 --> 00:13:28,410
actually understood how to use get that
give me a reason - actually I'm just you

226
00:13:28,410 --> 00:13:32,670
know figure out why should do with the
correct way and he was really cool about

227
00:13:32,670 --> 00:13:33,930
the whole thing

228
00:13:33,930 --> 00:13:36,689
and at the time he was just an
acquaintance and we got talking we

229
00:13:36,690 --> 00:13:41,400
actually became pretty good friends so
it was a great way able to get involved

230
00:13:41,400 --> 00:13:42,540
in that project

231
00:13:42,540 --> 00:13:45,900
learn more about Python we're more about
get and actually talk to someone that

232
00:13:45,900 --> 00:13:50,730
was making cool cool that I like to use
and what I learned is that it's okay to

233
00:13:50,730 --> 00:13:55,410
make mistakes you may run into someone i
get hub that you you try that first pull

234
00:13:55,410 --> 00:13:59,910
request may be and they just deny it and
there's no comments or they say this is

235
00:13:59,910 --> 00:14:04,170
garbage go away what you know they're
just the Rue there jerk whatever they

236
00:14:04,170 --> 00:14:07,709
just don't say anything you never hear
back from it just sits there untouched

237
00:14:08,370 --> 00:14:13,650
whatever it may be they may be busy they
might just not want you committing you

238
00:14:13,650 --> 00:14:16,860
know stuff to their other tool they
might be kinda might be an ego thing

239
00:14:16,860 --> 00:14:22,440
whatever it is it's okay because you can
still for that project and it can be

240
00:14:22,440 --> 00:14:26,190
yours and you can do whatever you want
to it has no effect on their project

241
00:14:26,190 --> 00:14:30,330
they could have no effect on yours you
can just roll with it and if you want to

242
00:14:30,330 --> 00:14:32,010
be part of a project

243
00:14:32,010 --> 00:14:35,250
you don't have to be part of their as
you but you will find another one

244
00:14:35,250 --> 00:14:39,240
and so it's okay to make those mistakes
it's ok if someone gets snippy with you

245
00:14:39,240 --> 00:14:40,680
on github or something

246
00:14:40,680 --> 00:14:43,359
I because you can just do your own thing

247
00:14:43,360 --> 00:14:49,540
so at this point i want to show you a
tool that actually made last year here

248
00:14:49,540 --> 00:14:53,319
at convergys what I want to come back
here and talk about it because while I

249
00:14:53,320 --> 00:14:58,329
was recording video last year I decided
to fill my time

250
00:14:58,329 --> 00:15:02,140
Kyle actually had me in the tracks last
year many you might have seen me

251
00:15:02,140 --> 00:15:06,069
I was here for like eight hours a day
and track one down stairs that chair all

252
00:15:06,070 --> 00:15:10,750
day recording talks so I was working on
fishing campaigns and I got tired of

253
00:15:10,750 --> 00:15:13,360
going and manually collecting this

254
00:15:13,360 --> 00:15:16,690
aight you know HTML from a website i
want to clone and fixing it up and and

255
00:15:16,690 --> 00:15:20,680
adding some stuff that would make it
work with a nice n tires custom fishing

256
00:15:20,680 --> 00:15:21,489
tool

257
00:15:21,490 --> 00:15:24,550
I realized there was a lot of stuff I
could do to make this automated

258
00:15:24,550 --> 00:15:28,029
I don't have to do this by hand and I
can probably do it right here

259
00:15:28,029 --> 00:15:31,029
i think i was actually going to talk
about some new Python tool I was like

260
00:15:31,029 --> 00:15:33,010
okay let's give this a shot

261
00:15:33,010 --> 00:15:37,269
and when I came up with was Cooper I
call it Cooper because it's kind of it's

262
00:15:37,269 --> 00:15:38,709
a dumb fish in a barrel joke

263
00:15:38,709 --> 00:15:43,959
I like puns and I you know I i guess
that i created here in about a couple of

264
00:15:43,959 --> 00:15:46,899
days i had it working it took about six
months for me to get it where it was

265
00:15:46,899 --> 00:15:50,769
actually something I wanted to use every
day but it once i got rolling it was

266
00:15:50,769 --> 00:15:54,250
really fun to make and I started adding
all kinds of features to it so I had it

267
00:15:54,250 --> 00:15:55,600
working with websites

268
00:15:55,600 --> 00:15:58,420
well now i know i had emailed I just
want to be able to take something I was

269
00:15:58,420 --> 00:16:01,990
sent my you know some spam I had my
gmail account or got sent my outlook

270
00:16:01,990 --> 00:16:06,699
that I could just grab that and give it
the file and have it processed the email

271
00:16:07,209 --> 00:16:11,170
so while once you start doing that you
learn that hey there's emails that are

272
00:16:11,170 --> 00:16:16,000
quoted printable format base64 encoded
by did add you know some support for

273
00:16:16,000 --> 00:16:17,230
that as well

274
00:16:17,230 --> 00:16:21,820
there's lots of different you know CSS
and scripting and relative links and

275
00:16:21,820 --> 00:16:23,949
stuff on web pages that you need to take
care of

276
00:16:23,949 --> 00:16:28,959
so Cooper I made it so it does all that
for me and then eventually added other

277
00:16:28,959 --> 00:16:32,500
things I realized that if I didn't want
to host an image i could have it

278
00:16:32,500 --> 00:16:35,440
embedded into the web page you can
actually embed images with that our base

279
00:16:35,440 --> 00:16:39,820
64 encoded so I looked into python real
estate i can actually just replace all

280
00:16:39,820 --> 00:16:45,430
images with base64 encoded version but i
wanted to so or you know give it any URL

281
00:16:46,410 --> 00:16:50,219
and have it change all the urls in the
web page with the URL and give it

282
00:16:50,879 --> 00:16:55,769
and the reason I did this was because I
wanted to better understand how some of

283
00:16:55,769 --> 00:16:59,940
the tools that did this like the social
engineering tool kit or I you know

284
00:16:59,940 --> 00:17:02,850
goldfish or the others a lot of times
they just do in the background you give

285
00:17:02,850 --> 00:17:05,400
it a length you say i want to close this
web page it goes and does it

286
00:17:05,400 --> 00:17:09,720
I won't understand how they did it and I
wanted to automate a lot of that work

287
00:17:09,720 --> 00:17:14,069
that I wasn't having fun doing and this
is a really great way to start off a

288
00:17:14,069 --> 00:17:19,319
project because once you have an idea of
what you want you can work backwards so

289
00:17:19,319 --> 00:17:22,949
look at what matters are what remains
the same no matter what

290
00:17:22,949 --> 00:17:26,610
what you're doing every time that
probably means that can be scripted

291
00:17:26,609 --> 00:17:29,760
because it probably doesn't mean if
you're taking the same action is really

292
00:17:29,760 --> 00:17:33,000
take human interaction to figure out
what you're doing then you can script

293
00:17:33,000 --> 00:17:37,110
that are you script some logic and do it
so it makes the right choice for you and

294
00:17:37,110 --> 00:17:40,379
then look out there see if there's
someone is already doing it if it's

295
00:17:40,380 --> 00:17:44,970
specific to your job or new to you are
you know kind of very very unique to you

296
00:17:44,970 --> 00:17:48,330
I mean I it's probably not gonna be a
tool already out there but something

297
00:17:48,330 --> 00:17:52,020
might do something like it and then now
that you know what you want you can work

298
00:17:52,020 --> 00:17:56,190
backwards to figure out what one of the
steps that need do you need to get there

299
00:17:56,190 --> 00:18:01,409
and so for me that meant i looked at the
social engineering tool kit at Dave

300
00:18:01,409 --> 00:18:04,919
Kennedy's tool because it did what I
wanted and I played around with that

301
00:18:04,919 --> 00:18:09,270
before and I knew a clone web pages so I
looked at that and I had some people

302
00:18:09,270 --> 00:18:12,450
that I talk to the conference let's just
say well why don't you just use set

303
00:18:12,450 --> 00:18:16,289
well there was a couple of problems with
that it didn't have a compatibility with

304
00:18:16,289 --> 00:18:19,408
our custom fishing tool so I was still
going to have to go in and manually edit

305
00:18:19,409 --> 00:18:24,870
things and that manual editing is what I
want to avoid so I figured I should just

306
00:18:24,870 --> 00:18:30,090
probably make my own tool that copies
the web pages and make the changes for

307
00:18:30,090 --> 00:18:30,658
me

308
00:18:30,659 --> 00:18:31,860
so for that

309
00:18:31,860 --> 00:18:36,030
I had to go and actually understand how
that work and at the time I had no idea

310
00:18:36,030 --> 00:18:39,809
what this did I took me you know five or
ten minutes

311
00:18:39,809 --> 00:18:44,190
poking around and I you know that SRC
directory for per set

312
00:18:44,190 --> 00:18:47,490
and I finally found a way to web attack
web comb cluttered up high I work a

313
00:18:47,490 --> 00:18:49,770
pretty obvious pointed out by that
sounds right

314
00:18:49,770 --> 00:18:55,530
and i was able to hone in on on this one
chunk of code that made absolutely no

315
00:18:55,530 --> 00:18:56,309
sense to me

316
00:18:56,309 --> 00:18:59,280
I didn't know about string formatting at
the time that's what it was like %

317
00:18:59,280 --> 00:19:00,270
guesses are

318
00:19:00,270 --> 00:19:03,480
I don't know what that did so just a
bunch of percent as some commands that I

319
00:19:03,480 --> 00:19:06,540
kinda recognize that had no idea how
they work with a percent as well that

320
00:19:06,540 --> 00:19:10,980
was doing where all these parentheses
were I don't know what subprocess was

321
00:19:10,980 --> 00:19:15,480
but I understood w get a new w get I
understood some of those can buy some of

322
00:19:15,480 --> 00:19:19,830
those options for w get so I figured
okay David Kennedy uses w get i'll use w

323
00:19:19,830 --> 00:19:21,178
get started

324
00:19:21,179 --> 00:19:25,470
and this was basically what I got when I
got started with was you know code they

325
00:19:25,470 --> 00:19:30,000
just look for w get out of it with if it
wasn't there i would use your element

326
00:19:30,000 --> 00:19:34,590
so what's that did so that's why i
started with but one thing I didn't like

327
00:19:34,590 --> 00:19:39,480
was i I at the time I used a windows
laptop and I wanted to build around

328
00:19:39,480 --> 00:19:45,240
windows and I had w get but sets code
specifically looked for like four or

329
00:19:45,240 --> 00:19:50,400
five locations that you would find IW
get on a linux operating system so it

330
00:19:50,400 --> 00:19:54,630
would always fail that first check and
go to you are a little so I want to see

331
00:19:54,630 --> 00:19:59,250
if I can make it so that it could find W
get it was on my window system so I came

332
00:19:59,250 --> 00:20:04,679
up i had to do some research and I came
up with those couple lines of pop and I

333
00:20:04,679 --> 00:20:06,270
took a bunch of checks

334
00:20:06,270 --> 00:20:09,000
he's like four or five checks that set
was doing and condense them into one

335
00:20:09,000 --> 00:20:14,549
command and I was pretty happy that it
worked and that became be the core of

336
00:20:14,549 --> 00:20:19,168
what Cooper started out as a master
adding things like you know I've already

337
00:20:19,169 --> 00:20:24,150
talked about decoding emails and this is
one thing I want to call out because i

338
00:20:24,150 --> 00:20:25,260
was talking to someone

339
00:20:25,260 --> 00:20:29,669
I show them this code and it's really
basic if you understand it and if you've

340
00:20:29,669 --> 00:20:33,059
ever had to decode basics before
anything like that it's just it's just a

341
00:20:33,059 --> 00:20:34,168
python library

342
00:20:34,169 --> 00:20:37,590
I'm just saying decode this string
that's it so it doesn't really require

343
00:20:37,590 --> 00:20:39,540
this but I added this to Cooper

344
00:20:39,540 --> 00:20:44,280
so that I didn't have to do it before I
gave the website or the email to Cooper

345
00:20:44,280 --> 00:20:47,460
but someone pointed out to me and they
said you know Chris this doesn't look

346
00:20:47,460 --> 00:20:54,150
like it's going to work if you have a
multi-part my email because you have

347
00:20:54,150 --> 00:20:58,530
multiple chunks the basics before and
asked me to text in which you feed that

348
00:20:58,530 --> 00:21:04,950
to the just base64 decode it will bomb
out because it's not all base64 and

349
00:21:04,950 --> 00:21:06,360
that's true

350
00:21:06,360 --> 00:21:09,300
so you have to clean up your coat like
actually say warning your output might

351
00:21:09,300 --> 00:21:13,290
be messy so double check and make sure
you just have a 64 in there and they

352
00:21:13,290 --> 00:21:16,649
pointed out that there's a python
library or my module that will actually

353
00:21:16,650 --> 00:21:22,980
parse through a multi-part message and
decode each chunk individually for me so

354
00:21:22,980 --> 00:21:26,130
I don't you don't have to clean up at
all and that sounds awesome

355
00:21:26,130 --> 00:21:29,790
I don't really have the time right now
to look into that I plan to it's on my

356
00:21:29,790 --> 00:21:34,139
list but it's thrown out there is
something you could look into that might

357
00:21:34,140 --> 00:21:36,930
be pretty basic that you could go in and
edit this

358
00:21:36,930 --> 00:21:41,040
this function here and submit it back to
Cooper I would be more than happy to

359
00:21:41,040 --> 00:21:44,610
have to work on that with you or or talk
about it

360
00:21:44,610 --> 00:21:48,570
so there's always stuff that we can that
we can add you modify and change

361
00:21:49,350 --> 00:21:52,709
so just have a quick demo

362
00:21:52,710 --> 00:21:57,300
mostly it's a got a couple of
screenshots but I don't want to rely on

363
00:21:57,300 --> 00:22:01,590
on the internet connection here but i'll
show you some some sample output this is

364
00:22:01,590 --> 00:22:04,290
basically what little look like if you
run Cooper

365
00:22:04,290 --> 00:22:08,100
I know it's really hot it's really easy
give it a peek and say it's a fish gate

366
00:22:08,100 --> 00:22:09,270
for website

367
00:22:09,270 --> 00:22:13,530
you know I showed souq.com you know the
restaurant with their ideas their

368
00:22:13,530 --> 00:22:14,460
website

369
00:22:14,460 --> 00:22:18,270
- you says I want you to replace links
you want to complete links with soup ,

370
00:22:18,270 --> 00:22:19,950
and output of the zoo

371
00:22:19,950 --> 00:22:22,980
it will go through spit it out and this
is what we get

372
00:22:23,640 --> 00:22:29,280
it looks pretty similar it's almost like
a perfect copy so the only thing you

373
00:22:29,280 --> 00:22:33,540
might notice is that I don't have the
font that soup uses so

374
00:22:34,230 --> 00:22:39,600
the the locations and daily menu buttons
don't have the right font that's all

375
00:22:39,600 --> 00:22:42,809
stuff that's pretty easy to fix
afterwards it might even be possible to

376
00:22:42,809 --> 00:22:45,510
fix that in you know before its output

377
00:22:45,510 --> 00:22:50,129
I just don't know how to do it yet but
for now they grabbed everything grab the

378
00:22:50,130 --> 00:22:53,610
styling everything that you would want
and spits it out perfectly

379
00:22:53,610 --> 00:22:58,620
I'll show you a couple of other examples
that I made earlier as well

380
00:22:59,250 --> 00:23:09,540
how to bring it up to that screen where
is it

381
00:23:09,540 --> 00:23:12,230
this so

382
00:23:12,230 --> 00:23:15,710
for example if we want twitter i just
gave it Twitter and this is what it puts

383
00:23:15,710 --> 00:23:20,000
out everything is it looks perfect

384
00:23:20,780 --> 00:23:24,950
and what Cooper has already done is even
gone through and it made the form action

385
00:23:25,669 --> 00:23:29,299
I i just replaced it with you know link
that fish gate as a sample

386
00:23:29,870 --> 00:23:34,280
that's right there it would send it to
you go back to my server if I was trying

387
00:23:34,280 --> 00:23:38,120
to do steal Twitter credentials it
everything works it looks just like

388
00:23:38,120 --> 00:23:43,159
Twitter to the thing to facebook so it's
very easy

389
00:23:43,940 --> 00:23:47,360
I you know especially that's what we're
often working with is

390
00:23:48,590 --> 00:23:56,850
oh my gosh I'm us back so over

391
00:23:56,850 --> 00:24:00,149
working with our login pages things like
that you might use for fishing so Cooper

392
00:24:00,150 --> 00:24:01,380
is really good

393
00:24:01,380 --> 00:24:06,540
it turns out at driving those really
simple pet really simple pages and made

394
00:24:06,540 --> 00:24:07,920
my life a lot easier

395
00:24:07,920 --> 00:24:13,290
and at the end i learns a lot more about
Python I just try a lot of different

396
00:24:13,290 --> 00:24:15,450
things I tried URL request

397
00:24:15,450 --> 00:24:20,040
I tried web scraping with mechanize I
learned a lot with beautiful soup by the

398
00:24:20,040 --> 00:24:22,740
work through a lot of different ideas
with a lot of code that will add the

399
00:24:22,740 --> 00:24:26,340
cooper and then remove and replace and
sometimes added back differently

400
00:24:26,340 --> 00:24:29,189
so you learn a lot when you're trying to
the projects you try a lot of different

401
00:24:29,190 --> 00:24:33,600
things but also this was my first
project where i actually created a

402
00:24:33,600 --> 00:24:38,429
github repo and started committing
things to get hub and I said I made that

403
00:24:38,430 --> 00:24:42,390
was how i backed up my coat i committed
things back to get hub and I had team

404
00:24:42,390 --> 00:24:46,440
members start using it and you know
testing it give me feedback and it

405
00:24:46,440 --> 00:24:49,380
learned I learned a lot just from the
troubleshooting when something would

406
00:24:49,380 --> 00:24:53,460
break at one point in a few months ago I
decided why not

407
00:24:53,460 --> 00:24:56,940
I'm going to upgrade i'm going to switch
over to python 3 just see what happens

408
00:24:56,940 --> 00:25:00,930
that cost so many headaches it was
actually super easy but then i'm going

409
00:25:00,930 --> 00:25:04,980
to my cat this works i did it in a
weekend I this is a Python 3 now and

410
00:25:04,980 --> 00:25:09,270
then actually just last night I fixed i
think the last bug from Python 3 where

411
00:25:09,270 --> 00:25:14,790
there is there it something wasn't
working and I noticed that it was it was

412
00:25:14,790 --> 00:25:20,280
that I needed to convert something from
bites and so it's it was very

413
00:25:20,280 --> 00:25:23,460
interesting i learned a lot about the
difference between Python 3 and 2.7 when

414
00:25:23,460 --> 00:25:24,420
I did that

415
00:25:24,420 --> 00:25:28,680
so it would i'm still I'm still you know
working on Cooper it's still something

416
00:25:28,680 --> 00:25:33,960
that teaches me every time I make
changes to it and that that be social

417
00:25:33,960 --> 00:25:35,580
but I talked about earlier

418
00:25:35,580 --> 00:25:39,780
so you know way back when I didn't even
understand what was in the social

419
00:25:39,780 --> 00:25:44,340
engineering cool kit and what it was
doing the kona webpage those changes I

420
00:25:44,340 --> 00:25:47,070
made to modify it work on my window
system

421
00:25:47,070 --> 00:25:51,510
I was talking I talked to some
developers from BTS at code match 2016

422
00:25:51,510 --> 00:25:56,970
back in January this year and and I
spoke to a penalty there and I mentioned

423
00:25:56,970 --> 00:26:00,990
that I had done this and I just kinda
like well I don't know if you would be

424
00:26:00,990 --> 00:26:04,890
you'd be interested in my input on
settings no totally should put in the

425
00:26:04,890 --> 00:26:09,750
pull request i'll take a look at it and
you know now there is i went from I

426
00:26:09,750 --> 00:26:10,320
point this out

427
00:26:10,320 --> 00:26:13,678
because it was really exciting for
something more exciting for me because

428
00:26:13,679 --> 00:26:17,820
there was a tool that inspired me to do
something that I was able to that

429
00:26:17,820 --> 00:26:21,269
contribute back to you in a very small
way to be able to contribute back to and

430
00:26:21,269 --> 00:26:24,539
now you know he gave me was nice enough
to give me a little special thanks to me

431
00:26:24,539 --> 00:26:27,059
for first meeting that coat back to the
project

432
00:26:27,059 --> 00:26:32,340
yes that's been set now that was really
cool for me to go because my knowledge

433
00:26:32,340 --> 00:26:36,120
and my progression through learning
python was very small I wasn't noticing

434
00:26:36,120 --> 00:26:40,500
a lot just kind of like if you go
through training courses or things like

435
00:26:40,500 --> 00:26:43,769
that you don't notice big jumps in your
knowledge and it's only a ninja

436
00:26:44,700 --> 00:26:47,549
you know after a few weeks you learn
very gradual and it feels like i'm not

437
00:26:47,549 --> 00:26:52,799
really doing anything Mike cool still
sucks but you realize it was something

438
00:26:52,799 --> 00:26:55,408
like this I looked back and when Todd
you know six months ago I don't even

439
00:26:55,409 --> 00:26:58,799
know what this code did and then i
modified it and sent it back to the

440
00:26:58,799 --> 00:27:02,549
original creator that presumably totally
didn't know what did you want yeah you

441
00:27:02,549 --> 00:27:06,509
made it better cool and was appreciate
not only appreciate it but you know

442
00:27:06,509 --> 00:27:11,070
actually was happy enough to put it into
the code and let other people know that

443
00:27:11,070 --> 00:27:12,418
had been improved upon

444
00:27:12,419 --> 00:27:15,659
so that was a really cool experience for
me and that's what i want you guys to go

445
00:27:15,659 --> 00:27:19,139
out there and and look at these tools
find a tool that you like

446
00:27:19,139 --> 00:27:22,799
play with it and you might be able to
find some small way that you can you can

447
00:27:22,799 --> 00:27:24,389
make a change to it eventually

448
00:27:24,389 --> 00:27:29,789
much much bigger ways so that I have a
second tool to talk to you about this is

449
00:27:29,789 --> 00:27:32,309
much more recent it's very much in
development

450
00:27:32,309 --> 00:27:36,269
it's actually it's actually really a
clue to mass so if you go and look at it

451
00:27:36,269 --> 00:27:39,750
i was showing some stuff to people last
night they want oh oh no this is

452
00:27:39,750 --> 00:27:40,710
terrible

453
00:27:40,710 --> 00:27:43,590
I guess I know you're a developer you
hate this you need everything i'm doing

454
00:27:43,590 --> 00:27:47,279
right now is probably really offensive
if you know how to code python properly

455
00:27:47,279 --> 00:27:52,649
but this is what I'm using to try a lot
of things and I call it Viper because

456
00:27:52,649 --> 00:27:57,989
it's a like like like my my fish in vail
joke this is a a GI Joe reference and

457
00:27:57,990 --> 00:28:00,899
i'll probably change the name of Ben
shipping everything of a good one

458
00:28:00,899 --> 00:28:04,678
but what I want to do with there's a lot
of olson things that I did for pen test

459
00:28:04,679 --> 00:28:08,730
you're looking at domains collecting
information looking at who is info all

460
00:28:08,730 --> 00:28:12,149
the stuff that I just ran through the
kind of on a script in my head okay i

461
00:28:12,149 --> 00:28:14,969
need to look at <time> six </time> i'll
run this tool check this out

462
00:28:14,970 --> 00:28:18,029
oper passive intelligence gathering

463
00:28:18,029 --> 00:28:23,099
so we know what if there's tools like
discover script by Lee bears and another

464
00:28:23,099 --> 00:28:24,779
tool that i'm using for this

465
00:28:24,779 --> 00:28:28,619
I wonder what if i could combine some of
them are what if i could script house

466
00:28:28,619 --> 00:28:31,320
and you know what some of these commands
that I'm running every time

467
00:28:31,320 --> 00:28:35,999
what you know what if i look into the
show an API and I automate some of the

468
00:28:35,999 --> 00:28:42,059
look up some i'm doing a show Dan and it
turns out that i could so I said hey all

469
00:28:42,059 --> 00:28:54,629
right i'm using Larry's hi folks I'm get
here unfortunately have a media freeze

470
00:28:54,629 --> 00:28:56,580
up so I put inconvenience

471
00:28:56,580 --> 00:28:58,769
there's no actual audio for the rest of
this particular video

