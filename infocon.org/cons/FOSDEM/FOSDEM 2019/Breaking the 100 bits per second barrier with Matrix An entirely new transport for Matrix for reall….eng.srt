1
00:00:04,610 --> 00:00:09,710
<font color="#E5E5E5">oh okay mm-hmm first of</font><font color="#CCCCCC"> all hello</font>

2
00:00:08,420 --> 00:00:12,950
everybody<font color="#CCCCCC"> can you hear me</font>

3
00:00:09,710 --> 00:00:14,719
I apologize<font color="#CCCCCC"> a I'm listening my voice</font>

4
00:00:12,950 --> 00:00:17,480
<font color="#CCCCCC">from the slightly</font><font color="#E5E5E5"> better than yesterday</font>

5
00:00:14,719 --> 00:00:18,740
and also<font color="#CCCCCC"> that I have no microphone other</font>

6
00:00:17,480 --> 00:00:20,270
than this one<font color="#E5E5E5"> which</font><font color="#CCCCCC"> is recording</font>

7
00:00:18,740 --> 00:00:22,520
<font color="#E5E5E5">apparently there are no monitors in the</font>

8
00:00:20,270 --> 00:00:24,529
<font color="#E5E5E5">room so I will have said</font><font color="#CCCCCC"> projects from</font>

9
00:00:22,520 --> 00:00:27,109
<font color="#E5E5E5">the</font><font color="#CCCCCC"> diaphragm and hopefully not</font><font color="#E5E5E5"> lose my</font>

10
00:00:24,529 --> 00:00:29,630
voice was doing so so we've got 20

11
00:00:27,109 --> 00:00:32,360
<font color="#CCCCCC">minutes to play with</font><font color="#E5E5E5"> and I want to talk</font>

12
00:00:29,630 --> 00:00:34,820
<font color="#E5E5E5">very slowly about breaking the hundred</font>

13
00:00:32,360 --> 00:00:38,930
pesos<font color="#CCCCCC"> second barrier with matrix</font><font color="#E5E5E5"> does</font>

14
00:00:34,820 --> 00:00:41,570
anybody not know<font color="#E5E5E5"> what</font><font color="#CCCCCC"> matrix is one</font>

15
00:00:38,930 --> 00:00:43,129
person two people<font color="#CCCCCC"> three people</font><font color="#E5E5E5"> okay</font><font color="#CCCCCC"> very</font>

16
00:00:41,570 --> 00:00:45,799
very<font color="#CCCCCC"> quickly I'm going to skip through</font>

17
00:00:43,129 --> 00:00:47,599
<font color="#E5E5E5">like eight slides so try to explain the</font>

18
00:00:45,799 --> 00:00:49,309
matrix<font color="#E5E5E5"> it's an open protocol open</font>

19
00:00:47,600 --> 00:00:51,830
<font color="#CCCCCC">Network for secure decentralized</font>

20
00:00:49,309 --> 00:00:55,040
<font color="#E5E5E5">real-time comms</font><font color="#CCCCCC"> use it to track boy vr</font>

21
00:00:51,830 --> 00:00:57,320
IOT<font color="#CCCCCC"> a whole</font><font color="#E5E5E5"> idea is</font><font color="#CCCCCC"> to create a global</font>

22
00:00:55,040 --> 00:00:58,760
open<font color="#E5E5E5"> decentralized network that provides</font>

23
00:00:57,320 --> 00:01:01,250
<font color="#CCCCCC">an open platform</font><font color="#E5E5E5"> for real-time</font>

24
00:00:58,760 --> 00:01:03,549
communications and so in<font color="#E5E5E5"> practice</font><font color="#CCCCCC"> you</font>

25
00:01:01,250 --> 00:01:06,680
<font color="#E5E5E5">have a whole</font><font color="#CCCCCC"> bunch of silos or not silos</font>

26
00:01:03,549 --> 00:01:08,900
<font color="#E5E5E5">different sort of networks out there</font><font color="#CCCCCC"> it</font>

27
00:01:06,680 --> 00:01:10,610
could be<font color="#CCCCCC"> a proprietary</font><font color="#E5E5E5"> closed system</font>

28
00:01:08,900 --> 00:01:13,430
like<font color="#CCCCCC"> slack</font><font color="#E5E5E5"> all discord or</font><font color="#CCCCCC"> the telegram</font>

29
00:01:10,610 --> 00:01:15,680
it could be an open<font color="#E5E5E5"> network my XMPP</font><font color="#CCCCCC"> with</font>

30
00:01:13,430 --> 00:01:18,860
Federation<font color="#E5E5E5"> could be a closed federated</font>

31
00:01:15,680 --> 00:01:21,470
but open<font color="#E5E5E5"> standard my IRC and matrix can</font>

32
00:01:18,860 --> 00:01:23,390
sit in the<font color="#E5E5E5"> middle</font><font color="#CCCCCC"> as a big decentralized</font>

33
00:01:21,470 --> 00:01:25,310
network of servers you have native

34
00:01:23,390 --> 00:01:27,080
matrix clients hanging off it<font color="#CCCCCC"> you have</font>

35
00:01:25,310 --> 00:01:29,660
<font color="#E5E5E5">bridges through</font><font color="#CCCCCC"> two other protocols like</font>

36
00:01:27,080 --> 00:01:32,720
XMPP and slack and it provides a kind of

37
00:01:29,660 --> 00:01:34,940
<font color="#CCCCCC">lowest common denominator</font><font color="#E5E5E5"> pub</font><font color="#CCCCCC"> sub layer</font>

38
00:01:32,720 --> 00:01:37,670
for the<font color="#E5E5E5"> internet it can</font><font color="#CCCCCC"> be a</font><font color="#E5E5E5"> sickly</font>

39
00:01:34,940 --> 00:01:40,940
these things together<font color="#E5E5E5"> relative to say</font>

40
00:01:37,670 --> 00:01:43,190
XMPP<font color="#E5E5E5"> we are ideologically</font><font color="#CCCCCC"> in technically</font>

41
00:01:40,940 --> 00:01:44,740
very different matrix<font color="#E5E5E5"> is all about</font>

42
00:01:43,190 --> 00:01:47,210
syncing conversation history

43
00:01:44,740 --> 00:01:49,610
<font color="#E5E5E5">replicating it between servers rather</font>

44
00:01:47,210 --> 00:01:52,039
<font color="#E5E5E5">than passing messages</font><font color="#CCCCCC"> so in matrix if</font>

45
00:01:49,610 --> 00:01:54,020
I'm<font color="#CCCCCC"> talking to you guys on your</font><font color="#E5E5E5"> own</font>

46
00:01:52,040 --> 00:01:56,090
matrix servers everybody gets a

47
00:01:54,020 --> 00:01:58,190
<font color="#CCCCCC">replicate of the room</font><font color="#E5E5E5"> it's just</font><font color="#CCCCCC"> like get</font>

48
00:01:56,090 --> 00:01:59,930
in fact it's<font color="#E5E5E5"> the same data structures as</font>

49
00:01:58,190 --> 00:02:02,060
get so it's<font color="#CCCCCC"> the difference between a</font>

50
00:01:59,930 --> 00:02:03,590
slightly centralized<font color="#CCCCCC"> model</font><font color="#E5E5E5"> where the</font>

51
00:02:02,060 --> 00:02:05,659
conversation happens<font color="#E5E5E5"> on a single server</font>

52
00:02:03,590 --> 00:02:08,479
<font color="#E5E5E5">in a</font><font color="#CCCCCC"> matrix where it gets replicated</font>

53
00:02:05,659 --> 00:02:10,369
over<font color="#E5E5E5"> all the participating service so</font>

54
00:02:08,479 --> 00:02:12,319
you<font color="#E5E5E5"> end up with</font><font color="#CCCCCC"> no single</font><font color="#E5E5E5"> party</font><font color="#CCCCCC"> owned in</font>

55
00:02:10,369 --> 00:02:15,140
<font color="#E5E5E5">the conversations conversations are</font>

56
00:02:12,319 --> 00:02:17,359
shared over<font color="#E5E5E5"> all participants how</font>

57
00:02:15,140 --> 00:02:18,349
<font color="#CCCCCC">potentially you get clients</font><font color="#E5E5E5"> you get a</font>

58
00:02:17,360 --> 00:02:21,019
<font color="#E5E5E5">mesh server</font>

59
00:02:18,349 --> 00:02:22,249
<font color="#E5E5E5">you get application services being</font>

60
00:02:21,019 --> 00:02:24,620
clients on steroids

61
00:02:22,249 --> 00:02:26,209
you also have identity<font color="#CCCCCC"> servers which map</font>

62
00:02:24,620 --> 00:02:30,379
email addresses and<font color="#CCCCCC"> phone numbers</font>

63
00:02:26,209 --> 00:02:32,959
through cert matrix IDs in<font color="#E5E5E5"> phone for the</font>

64
00:02:30,379 --> 00:02:35,328
ecosystem<font color="#CCCCCC"> today we've got stacks on the</font>

65
00:02:32,959 --> 00:02:37,400
web and<font color="#E5E5E5"> the iOS we have two stacks on</font>

66
00:02:35,329 --> 00:02:39,409
Android<font color="#CCCCCC"> a</font><font color="#E5E5E5"> Java one and a brand new one</font>

67
00:02:37,400 --> 00:02:40,400
with<font color="#E5E5E5"> just written in Kotlin which was</font>

68
00:02:39,409 --> 00:02:42,290
<font color="#E5E5E5">looking really really good</font>

69
00:02:40,400 --> 00:02:45,319
<font color="#E5E5E5">it</font><font color="#CCCCCC"> forms about</font><font color="#E5E5E5"> 10 times better than the</font>

70
00:02:42,290 --> 00:02:46,790
<font color="#E5E5E5">Java thing</font><font color="#CCCCCC"> and it uses rx to glue the</font>

71
00:02:45,319 --> 00:02:51,260
application there on top

72
00:02:46,790 --> 00:02:54,019
we provide SDKs at the sort<font color="#E5E5E5"> of wrapping</font>

73
00:02:51,260 --> 00:02:56,358
<font color="#CCCCCC">the absolute API level and then</font><font color="#E5E5E5"> higher</font>

74
00:02:54,019 --> 00:02:58,400
<font color="#E5E5E5">level for UI components and then apps on</font>

75
00:02:56,359 --> 00:03:01,280
top such as riot<font color="#E5E5E5"> which is</font><font color="#CCCCCC"> the flagship</font>

76
00:02:58,400 --> 00:03:02,989
line that we have on<font color="#E5E5E5"> top of matrix we</font>

77
00:03:01,280 --> 00:03:06,980
also have lots of compliance from<font color="#E5E5E5"> the</font>

78
00:03:02,989 --> 00:03:12,079
community<font color="#E5E5E5"> desktop clients in QT and C++</font>

79
00:03:06,980 --> 00:03:14,988
and rust<font color="#CCCCCC"> Mac OS that Necco is key C and</font>

80
00:03:12,079 --> 00:03:17,689
C++ as well and also<font color="#E5E5E5"> on the server</font><font color="#CCCCCC"> side</font>

81
00:03:14,989 --> 00:03:20,659
<font color="#E5E5E5">we provide</font><font color="#CCCCCC"> app iPhone and in development</font>

82
00:03:17,689 --> 00:03:22,728
<font color="#E5E5E5">go server lots of</font><font color="#CCCCCC"> bridges and there also</font>

83
00:03:20,659 --> 00:03:24,709
lots and lots of<font color="#CCCCCC"> bridges and BOTS and a</font>

84
00:03:22,729 --> 00:03:26,479
couple of servers<font color="#E5E5E5"> from the community the</font>

85
00:03:24,709 --> 00:03:28,220
main deliverable though is an API<font color="#E5E5E5"> it</font>

86
00:03:26,479 --> 00:03:30,909
<font color="#CCCCCC">matrix spec which is a</font><font color="#E5E5E5"> big</font><font color="#CCCCCC"> big</font>

87
00:03:28,220 --> 00:03:34,310
<font color="#CCCCCC">monolithic document with loads of HTTP</font>

88
00:03:30,909 --> 00:03:38,209
endpoints in it and by default<font color="#E5E5E5"> by</font>

89
00:03:34,310 --> 00:03:40,459
default we use HTTP and<font color="#E5E5E5"> JSON so that's</font>

90
00:03:38,209 --> 00:03:42,459
my<font color="#CCCCCC"> Whistlestop four</font><font color="#E5E5E5"> five minute tour of</font>

91
00:03:40,459 --> 00:03:45,379
matrix<font color="#E5E5E5"> let's talk about the good stuff</font>

92
00:03:42,459 --> 00:03:47,979
<font color="#E5E5E5">low bandwidth matrix we wanted to see</font>

93
00:03:45,379 --> 00:03:50,720
how low we<font color="#E5E5E5"> can go because today</font>

94
00:03:47,979 --> 00:03:53,930
<font color="#CCCCCC">historically matrix has been pretty crap</font>

95
00:03:50,720 --> 00:03:55,879
<font color="#CCCCCC">at low bandwidth</font><font color="#E5E5E5"> we chose HTTP</font><font color="#CCCCCC"> for being</font>

96
00:03:53,930 --> 00:03:58,159
the most<font color="#E5E5E5"> pragmatic and ubiquitous thing</font>

97
00:03:55,879 --> 00:04:01,489
<font color="#E5E5E5">there anybody with</font><font color="#CCCCCC"> curl or a web browser</font>

98
00:03:58,159 --> 00:04:03,978
<font color="#CCCCCC">it was ever used</font><font color="#E5E5E5"> to web api can do HTTP</font>

99
00:04:01,489 --> 00:04:05,599
put<font color="#E5E5E5"> to send a message HTTP</font><font color="#CCCCCC"> get to</font>

100
00:04:03,979 --> 00:04:07,579
receive a<font color="#CCCCCC"> message and that's</font><font color="#E5E5E5"> it that's</font>

101
00:04:05,599 --> 00:04:09,738
all<font color="#CCCCCC"> you</font><font color="#E5E5E5"> have to do in matrix however</font>

102
00:04:07,579 --> 00:04:12,379
it's awful in terms of<font color="#E5E5E5"> bandwidth and</font>

103
00:04:09,739 --> 00:04:14,780
engineering<font color="#E5E5E5"> so we wanted to see whether</font>

104
00:04:12,379 --> 00:04:16,668
we could<font color="#E5E5E5"> get</font><font color="#CCCCCC"> out 100 bits a second now</font>

105
00:04:14,780 --> 00:04:19,849
the way<font color="#CCCCCC"> to</font><font color="#E5E5E5"> think of a hundred bits a</font>

106
00:04:16,668 --> 00:04:22,250
second<font color="#E5E5E5"> is that it takes</font><font color="#CCCCCC"> two minutes 120</font>

107
00:04:19,849 --> 00:04:25,280
<font color="#E5E5E5">of your earth seconds to send an</font>

108
00:04:22,250 --> 00:04:28,039
<font color="#CCCCCC">Ethernet packet a typical 1,500 MTU</font>

109
00:04:25,280 --> 00:04:29,989
<font color="#E5E5E5">that's a long time to send a packet of</font>

110
00:04:28,039 --> 00:04:31,719
data so you might be<font color="#CCCCCC"> thinking why the</font>

111
00:04:29,990 --> 00:04:33,340
hell<font color="#CCCCCC"> you bothering trying to do</font><font color="#E5E5E5"> this</font>

112
00:04:31,720 --> 00:04:35,770
my waste your time going to<font color="#E5E5E5"> this</font>

113
00:04:33,340 --> 00:04:39,250
ridiculous level<font color="#E5E5E5"> and honestly there are</font>

114
00:04:35,770 --> 00:04:40,990
situations<font color="#CCCCCC"> where connectivity can be</font>

115
00:04:39,250 --> 00:04:42,760
really<font color="#E5E5E5"> really bad</font><font color="#CCCCCC"> particularly</font>

116
00:04:40,990 --> 00:04:43,960
<font color="#E5E5E5">ironically when it really counts in life</font>

117
00:04:42,760 --> 00:04:45,730
<font color="#CCCCCC">from those situations</font>

118
00:04:43,960 --> 00:04:47,739
now if you've gone and fallen<font color="#E5E5E5"> down a</font>

119
00:04:45,730 --> 00:04:50,290
mountain<font color="#E5E5E5"> and</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> bottom of a crevasse</font>

120
00:04:47,740 --> 00:04:53,650
<font color="#E5E5E5">and your phone is literally bouncing of</font>

121
00:04:50,290 --> 00:04:55,330
the<font color="#E5E5E5"> the valley in order to try to hit a</font>

122
00:04:53,650 --> 00:04:58,270
random base station somewhere else

123
00:04:55,330 --> 00:05:00,300
<font color="#E5E5E5">or wherever you are you really want</font>

124
00:04:58,270 --> 00:05:02,140
every bet<font color="#E5E5E5"> to</font><font color="#CCCCCC"> get you</font><font color="#E5E5E5"> don't want to keep</font>

125
00:05:00,300 --> 00:05:04,720
renegotiating from scratch every time

126
00:05:02,140 --> 00:05:07,539
<font color="#E5E5E5">and now that has applications in</font>

127
00:05:04,720 --> 00:05:09,760
emergency services<font color="#E5E5E5"> has applications in</font>

128
00:05:07,540 --> 00:05:11,730
kind of personal area networks<font color="#E5E5E5"> if you're</font>

129
00:05:09,760 --> 00:05:14,860
on a mesh network<font color="#CCCCCC"> without any internet</font>

130
00:05:11,730 --> 00:05:19,030
<font color="#E5E5E5">obviously uses in government and for the</font>

131
00:05:14,860 --> 00:05:21,280
<font color="#E5E5E5">defense military context as well so we</font>

132
00:05:19,030 --> 00:05:24,280
look<font color="#E5E5E5"> for HTTP 1.1 in TLS which is what</font>

133
00:05:21,280 --> 00:05:25,659
we do by default today so anybody<font color="#E5E5E5"> as I</font>

134
00:05:24,280 --> 00:05:27,099
said can just<font color="#CCCCCC"> throw a curl that</font><font color="#E5E5E5"> is</font>

135
00:05:25,660 --> 00:05:30,280
literally<font color="#E5E5E5"> the curl to send a message to</font>

136
00:05:27,100 --> 00:05:33,130
<font color="#E5E5E5">a room in matrix today</font><font color="#CCCCCC"> and I did that</font>

137
00:05:30,280 --> 00:05:35,530
<font color="#CCCCCC">code</font><font color="#E5E5E5"> last night and it took seven</font>

138
00:05:33,130 --> 00:05:37,690
thousand bytes<font color="#E5E5E5"> including these</font><font color="#CCCCCC"> Fannett</font>

139
00:05:35,530 --> 00:05:39,909
headers and a tram<font color="#E5E5E5"> tropes in order to</font>

140
00:05:37,690 --> 00:05:42,700
send the message<font color="#CCCCCC"> test so four bytes</font>

141
00:05:39,910 --> 00:05:45,340
<font color="#CCCCCC">payload spending up in terms of doing</font>

142
00:05:42,700 --> 00:05:48,550
<font color="#E5E5E5">the TLS handshake doing this</font><font color="#CCCCCC"> traffic</font><font color="#E5E5E5"> so</font>

143
00:05:45,340 --> 00:05:50,530
true up<font color="#E5E5E5"> to</font><font color="#CCCCCC"> seven K and no I'm sure it's</font>

144
00:05:48,550 --> 00:05:52,750
the second that<font color="#E5E5E5"> is ten minutes to do a</font>

145
00:05:50,530 --> 00:05:53,169
single HTTP request so<font color="#CCCCCC"> it's not gonna</font>

146
00:05:52,750 --> 00:05:54,580
<font color="#E5E5E5">work</font>

147
00:05:53,169 --> 00:05:56,919
obviously it could<font color="#E5E5E5"> be so much</font><font color="#CCCCCC"> better</font>

148
00:05:54,580 --> 00:06:00,400
<font color="#E5E5E5">obvious</font><font color="#CCCCCC"> next thing to do</font><font color="#E5E5E5"> be going Chuck</font>

149
00:05:56,919 --> 00:06:03,010
- HTTP - and go and see how speedy works

150
00:06:00,400 --> 00:06:05,320
and we save<font color="#E5E5E5"> a whole three hundred bytes</font>

151
00:06:03,010 --> 00:06:09,610
<font color="#E5E5E5">because so much for this is the TLS</font>

152
00:06:05,320 --> 00:06:11,860
handshake so next up we thought wow HTTP

153
00:06:09,610 --> 00:06:14,530
<font color="#CCCCCC">free is the next big</font><font color="#E5E5E5"> thing and it's</font><font color="#CCCCCC"> just</font>

154
00:06:11,860 --> 00:06:17,500
come out the HTTP over quick would<font color="#E5E5E5"> be</font>

155
00:06:14,530 --> 00:06:19,780
referred to<font color="#E5E5E5"> as HTTP free so now we've</font>

156
00:06:17,500 --> 00:06:23,410
killed<font color="#E5E5E5"> the</font><font color="#CCCCCC"> TLA at the TCP handshakes</font>

157
00:06:19,780 --> 00:06:24,609
we're on UDP<font color="#CCCCCC"> I'm using TLS 1.3 we can do</font>

158
00:06:23,410 --> 00:06:27,430
sexy<font color="#E5E5E5"> for things like it's very</font>

159
00:06:24,610 --> 00:06:30,130
<font color="#E5E5E5">round-trip time set up we still have if</font>

160
00:06:27,430 --> 00:06:31,870
I have to do a TLS handshake<font color="#E5E5E5"> and really</font>

161
00:06:30,130 --> 00:06:34,540
surprisingly it turns<font color="#E5E5E5"> out that quick</font>

162
00:06:31,870 --> 00:06:36,550
<font color="#E5E5E5">requires bit stuffing currently and the</font>

163
00:06:34,540 --> 00:06:38,740
beginning of your<font color="#E5E5E5"> handshake in order to</font>

164
00:06:36,550 --> 00:06:40,599
mitigate amplification attacks<font color="#E5E5E5"> so they</font>

165
00:06:38,740 --> 00:06:43,530
<font color="#E5E5E5">actually</font><font color="#CCCCCC"> insist on you stuffing</font><font color="#E5E5E5"> the</font>

166
00:06:40,599 --> 00:06:45,190
first couple of packets up to<font color="#CCCCCC"> 1200</font><font color="#E5E5E5"> bytes</font>

167
00:06:43,530 --> 00:06:48,460
<font color="#CCCCCC">just in order</font>

168
00:06:45,190 --> 00:06:51,160
to prevent whatever<font color="#E5E5E5"> UDP abuse</font><font color="#CCCCCC"> Rex's or</font>

169
00:06:48,460 --> 00:06:53,409
<font color="#E5E5E5">rather so the good news</font><font color="#CCCCCC"> is that</font><font color="#E5E5E5"> once you</font>

170
00:06:51,160 --> 00:06:54,880
<font color="#E5E5E5">have the channel set up it's only like</font>

171
00:06:53,410 --> 00:06:57,900
nine hundred<font color="#CCCCCC"> eighty three bytes the</font>

172
00:06:54,880 --> 00:07:00,909
sound again<font color="#CCCCCC"> although that's still</font><font color="#E5E5E5"> like</font>

173
00:06:57,900 --> 00:07:02,590
minutes<font color="#E5E5E5"> to sends a message but for that</font>

174
00:07:00,910 --> 00:07:03,400
<font color="#E5E5E5">set up we're still up at the six seven</font>

175
00:07:02,590 --> 00:07:06,340
thousand<font color="#E5E5E5"> bytes</font>

176
00:07:03,400 --> 00:07:09,280
I mean honestly<font color="#E5E5E5"> HTTP free is designed to</font>

177
00:07:06,340 --> 00:07:11,560
be<font color="#E5E5E5"> a complete parity with HTTP normal as</font>

178
00:07:09,280 --> 00:07:13,750
you'd expect<font color="#E5E5E5"> and they are not optimizing</font>

179
00:07:11,560 --> 00:07:15,400
for<font color="#E5E5E5"> a bit rate over everything else</font><font color="#CCCCCC"> as</font>

180
00:07:13,750 --> 00:07:18,550
we would<font color="#E5E5E5"> have to do</font><font color="#CCCCCC"> for</font><font color="#E5E5E5"> this sort of</font>

181
00:07:15,400 --> 00:07:22,359
<font color="#E5E5E5">scenario so then we started looking at</font>

182
00:07:18,550 --> 00:07:24,640
<font color="#CCCCCC">Co app you know it's what</font><font color="#E5E5E5"> carp is yeah</font>

183
00:07:22,360 --> 00:07:26,800
by a third of the<font color="#CCCCCC"> people here carp</font><font color="#E5E5E5"> isn't</font>

184
00:07:24,640 --> 00:07:30,310
that<font color="#CCCCCC"> well-known outside</font><font color="#E5E5E5"> of the IOT space</font>

185
00:07:26,800 --> 00:07:33,490
<font color="#E5E5E5">it was written around 2014 it's an RFC</font>

186
00:07:30,310 --> 00:07:36,790
<font color="#E5E5E5">75</font><font color="#CCCCCC"> - and</font><font color="#E5E5E5"> it is designed for very very</font>

187
00:07:33,490 --> 00:07:39,520
<font color="#E5E5E5">bit</font><font color="#CCCCCC"> efficient transport</font><font color="#E5E5E5"> of restful api</font>

188
00:07:36,790 --> 00:07:41,410
over UDP<font color="#E5E5E5"> and it looks and smells a lot</font>

189
00:07:39,520 --> 00:07:44,590
like HTTP except it<font color="#E5E5E5"> doesn't actually</font>

190
00:07:41,410 --> 00:07:46,620
have parity totally with HTTP<font color="#E5E5E5"> for</font>

191
00:07:44,590 --> 00:07:49,359
<font color="#CCCCCC">instance</font><font color="#E5E5E5"> the clients and the</font><font color="#CCCCCC"> server's</font>

192
00:07:46,620 --> 00:07:51,730
<font color="#CCCCCC">can talk bi-directionally so your server</font>

193
00:07:49,360 --> 00:07:53,710
can do<font color="#CCCCCC"> a UDP hit</font><font color="#E5E5E5"> to you as a client</font><font color="#CCCCCC"> just</font>

194
00:07:51,730 --> 00:07:56,050
<font color="#E5E5E5">as much as here as the client can do the</font>

195
00:07:53,710 --> 00:07:58,390
same RPC hit to the server so<font color="#E5E5E5"> you don't</font>

196
00:07:56,050 --> 00:08:00,760
need WebSockets or anything because<font color="#E5E5E5"> you</font>

197
00:07:58,390 --> 00:08:03,340
have this bidirectionality<font color="#CCCCCC"> in terms of</font>

198
00:08:00,760 --> 00:08:06,460
the<font color="#E5E5E5"> bit packing we're talking a kind of</font>

199
00:08:03,340 --> 00:08:08,530
<font color="#E5E5E5">base header of about</font><font color="#CCCCCC"> 4 bytes</font><font color="#E5E5E5"> plus some</font>

200
00:08:06,460 --> 00:08:11,109
sequence<font color="#E5E5E5"> number plus some message IDs</font>

201
00:08:08,530 --> 00:08:13,030
which can be as small<font color="#CCCCCC"> as you like</font><font color="#E5E5E5"> and</font>

202
00:08:11,110 --> 00:08:15,780
it's designed for<font color="#E5E5E5"> these very very</font><font color="#CCCCCC"> small</font>

203
00:08:13,030 --> 00:08:18,520
<font color="#CCCCCC">constrained networks and devices</font>

204
00:08:15,780 --> 00:08:21,010
interestingly<font color="#CCCCCC"> their design assumption is</font>

205
00:08:18,520 --> 00:08:23,289
they each request and each response fits

206
00:08:21,010 --> 00:08:24,610
in a single packet so from their

207
00:08:23,290 --> 00:08:26,800
perspective you're doing something wrong

208
00:08:24,610 --> 00:08:29,140
<font color="#E5E5E5">if your packets are bigger than 1500</font>

209
00:08:26,800 --> 00:08:31,000
bytes<font color="#CCCCCC"> on</font><font color="#E5E5E5"> a Ethernet because you have to</font>

210
00:08:29,140 --> 00:08:33,098
start<font color="#CCCCCC"> jumping through hoops</font><font color="#E5E5E5"> using what</font>

211
00:08:31,000 --> 00:08:34,960
they call<font color="#E5E5E5"> block wise mode in order to</font><font color="#CCCCCC"> so</font>

212
00:08:33,099 --> 00:08:37,120
grudgingly split<font color="#E5E5E5"> your payload across</font>

213
00:08:34,960 --> 00:08:39,039
multiple Ethernet packets<font color="#E5E5E5"> so that's the</font>

214
00:08:37,120 --> 00:08:41,320
kind of<font color="#E5E5E5"> mentality they're going into and</font>

215
00:08:39,039 --> 00:08:43,900
<font color="#E5E5E5">it good news is let</font><font color="#CCCCCC"> me insert for a</font>

216
00:08:41,320 --> 00:08:45,610
single<font color="#E5E5E5"> request response that's typically</font>

217
00:08:43,900 --> 00:08:47,650
one<font color="#E5E5E5"> round-trip one packet for the</font>

218
00:08:45,610 --> 00:08:50,890
<font color="#CCCCCC">request one packet for the response and</font>

219
00:08:47,650 --> 00:08:52,959
that's typically about 300 bytes<font color="#E5E5E5"> to do</font>

220
00:08:50,890 --> 00:08:55,780
the sends<font color="#E5E5E5"> about 300 bytes to do the</font>

221
00:08:52,960 --> 00:08:58,120
response<font color="#E5E5E5"> roughly more like 500 so now</font>

222
00:08:55,780 --> 00:08:58,420
we're down<font color="#E5E5E5"> for only 40 seconds to send</font>

223
00:08:58,120 --> 00:09:01,090
them

224
00:08:58,420 --> 00:09:02,949
and in a life-and-death situation I

225
00:09:01,090 --> 00:09:04,810
think that's<font color="#CCCCCC"> starting to sound quite</font>

226
00:09:02,950 --> 00:09:06,610
plausible as a way<font color="#E5E5E5"> that you might be</font>

227
00:09:04,810 --> 00:09:09,400
<font color="#E5E5E5">able</font><font color="#CCCCCC"> to have a conversation through</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> a</font>

228
00:09:06,610 --> 00:09:10,540
emergency<font color="#E5E5E5"> responder so before they're</font>

229
00:09:09,400 --> 00:09:12,939
getting on to something here

230
00:09:10,540 --> 00:09:15,069
ironically<font color="#E5E5E5"> by ditching the cool new</font>

231
00:09:12,940 --> 00:09:19,390
stuff of<font color="#E5E5E5"> quit and going back five years</font>

232
00:09:15,070 --> 00:09:20,620
<font color="#E5E5E5">to</font><font color="#CCCCCC"> go app so encryption</font><font color="#E5E5E5"> obviously we</font>

233
00:09:19,390 --> 00:09:22,449
want<font color="#CCCCCC"> to</font><font color="#E5E5E5"> have transport layer encryption</font>

234
00:09:20,620 --> 00:09:24,430
on this we<font color="#E5E5E5"> don't want to cheat and say</font>

235
00:09:22,450 --> 00:09:26,590
oh<font color="#E5E5E5"> look how small this</font><font color="#CCCCCC"> is if we</font><font color="#E5E5E5"> don't</font>

236
00:09:24,430 --> 00:09:28,750
have any encryption<font color="#E5E5E5"> at all so car app</font>

237
00:09:26,590 --> 00:09:31,510
itself recommends using DTLS<font color="#E5E5E5"> very</font>

238
00:09:28,750 --> 00:09:36,250
similar for WebRTC<font color="#CCCCCC"> and in fact back in</font>

239
00:09:31,510 --> 00:09:38,650
<font color="#E5E5E5">2014 they mandated TTLs 1.0 with private</font>

240
00:09:36,250 --> 00:09:40,660
shared key encryption<font color="#E5E5E5"> so you can avoid</font>

241
00:09:38,650 --> 00:09:42,520
having<font color="#E5E5E5"> to</font><font color="#CCCCCC"> do the certificate chat</font><font color="#E5E5E5"> as</font>

242
00:09:40,660 --> 00:09:45,790
long<font color="#E5E5E5"> as everybody has already entered</font>

243
00:09:42,520 --> 00:09:50,620
<font color="#E5E5E5">some random key</font><font color="#CCCCCC"> onto both sides of the</font>

244
00:09:45,790 --> 00:09:52,329
conversation<font color="#CCCCCC"> so interestingly there's a</font>

245
00:09:50,620 --> 00:09:54,610
<font color="#CCCCCC">comparison that</font><font color="#E5E5E5"> some nice chap did</font>

246
00:09:52,330 --> 00:09:56,590
<font color="#E5E5E5">across all the different dialects of TLS</font>

247
00:09:54,610 --> 00:09:58,690
which you can use with<font color="#E5E5E5"> Co app and they</font>

248
00:09:56,590 --> 00:10:01,990
reckon<font color="#CCCCCC"> that the overhead</font><font color="#E5E5E5"> pair request</font>

249
00:09:58,690 --> 00:10:05,200
can be<font color="#E5E5E5"> as low as 15 or 16 bytes which is</font>

250
00:10:01,990 --> 00:10:07,330
pretty<font color="#E5E5E5"> good however much as we were just</font>

251
00:10:05,200 --> 00:10:09,160
hearing<font color="#E5E5E5"> about with WebRTC</font><font color="#CCCCCC"> there are</font>

252
00:10:07,330 --> 00:10:12,640
relatively<font color="#CCCCCC"> few secs out there that</font>

253
00:10:09,160 --> 00:10:15,480
support DTLS especially written<font color="#E5E5E5"> ago and</font>

254
00:10:12,640 --> 00:10:18,160
we were using<font color="#CCCCCC"> a go to prototype</font><font color="#E5E5E5"> this new</font>

255
00:10:15,480 --> 00:10:19,570
low bandwidth stuff and in<font color="#CCCCCC"> fact I think</font>

256
00:10:18,160 --> 00:10:21,790
<font color="#CCCCCC">there are</font><font color="#E5E5E5"> about three options out there</font>

257
00:10:19,570 --> 00:10:24,220
one of<font color="#E5E5E5"> them came from</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> PI ons or</font>

258
00:10:21,790 --> 00:10:25,860
pylons project which was<font color="#CCCCCC"> mentioned in</font>

259
00:10:24,220 --> 00:10:28,930
<font color="#E5E5E5">the last slides of the last talk as</font>

260
00:10:25,860 --> 00:10:30,640
<font color="#E5E5E5">WebRTC stack</font><font color="#CCCCCC"> exert it targets precisely</font>

261
00:10:28,930 --> 00:10:32,859
the dialects of DTLS you want for<font color="#CCCCCC"> a</font>

262
00:10:30,640 --> 00:10:36,040
<font color="#CCCCCC">WebRTC</font><font color="#E5E5E5"> which i think is</font><font color="#CCCCCC"> d TLS 1.2</font>

263
00:10:32,860 --> 00:10:37,120
<font color="#E5E5E5">without</font><font color="#CCCCCC"> PS</font><font color="#E5E5E5"> there</font><font color="#CCCCCC"> PSK meanwhile there's</font>

264
00:10:36,040 --> 00:10:39,339
somebody else<font color="#E5E5E5"> who's done one</font>

265
00:10:37,120 --> 00:10:41,500
specifically for<font color="#CCCCCC"> PSK but it hasn't</font><font color="#E5E5E5"> been</font>

266
00:10:39,340 --> 00:10:43,750
integrated at all with<font color="#CCCCCC"> kerb stack and</font>

267
00:10:41,500 --> 00:10:44,890
<font color="#E5E5E5">also PS</font><font color="#CCCCCC"> k's are</font><font color="#E5E5E5"> all very well but</font>

268
00:10:43,750 --> 00:10:46,870
<font color="#CCCCCC">they're a bit of a pain in the ass</font>

269
00:10:44,890 --> 00:10:48,699
because everybody has to go around<font color="#E5E5E5"> ahead</font>

270
00:10:46,870 --> 00:10:50,410
of time to<font color="#E5E5E5"> make sure</font><font color="#CCCCCC"> they've synchronize</font>

271
00:10:48,700 --> 00:10:54,550
their watches<font color="#E5E5E5"> in a room using the same</font>

272
00:10:50,410 --> 00:10:55,420
secret<font color="#CCCCCC"> PSK</font><font color="#E5E5E5"> code so we decided to look at</font>

273
00:10:54,550 --> 00:10:59,140
<font color="#E5E5E5">noise instead</font>

274
00:10:55,420 --> 00:11:02,050
<font color="#CCCCCC">who knows what noises</font><font color="#E5E5E5"> okay about six</font>

275
00:10:59,140 --> 00:11:03,880
<font color="#E5E5E5">people so noise protocol is a really</font>

276
00:11:02,050 --> 00:11:05,920
<font color="#CCCCCC">really</font><font color="#E5E5E5"> interesting thing it's written by</font>

277
00:11:03,880 --> 00:11:07,630
Trevor Perrin and the guy<font color="#CCCCCC"> or one</font><font color="#E5E5E5"> of the</font>

278
00:11:05,920 --> 00:11:10,660
guys<font color="#E5E5E5"> behind the double ratchet that</font>

279
00:11:07,630 --> 00:11:11,800
<font color="#E5E5E5">signal uses for</font><font color="#CCCCCC"> encryption and</font><font color="#E5E5E5"> noise is</font>

280
00:11:10,660 --> 00:11:14,050
<font color="#E5E5E5">almost a met approach</font>

281
00:11:11,800 --> 00:11:16,269
it's building blocks for creating

282
00:11:14,050 --> 00:11:18,040
protocols<font color="#E5E5E5"> and they give you about</font><font color="#CCCCCC"> 11 or</font>

283
00:11:16,269 --> 00:11:20,439
12 different handshakes<font color="#E5E5E5"> that you can use</font>

284
00:11:18,040 --> 00:11:22,509
if you're trying to<font color="#E5E5E5"> build the lightest</font>

285
00:11:20,439 --> 00:11:26,469
weight most targeted encryption

286
00:11:22,509 --> 00:11:29,949
imaginable<font color="#E5E5E5"> so the</font><font color="#CCCCCC"> -</font><font color="#E5E5E5"> handshake</font><font color="#CCCCCC"> so most</font>

287
00:11:26,470 --> 00:11:33,549
<font color="#E5E5E5">people end up using</font><font color="#CCCCCC"> accord xx and I K X</font>

288
00:11:29,949 --> 00:11:35,769
<font color="#CCCCCC">X is this</font><font color="#E5E5E5"> guy here it's a</font><font color="#CCCCCC"> free</font><font color="#E5E5E5"> step</font>

289
00:11:33,549 --> 00:11:37,149
handshake<font color="#CCCCCC"> where you send an ephemeral</font>

290
00:11:35,769 --> 00:11:38,920
key you get back

291
00:11:37,149 --> 00:11:40,929
another ephemeral key<font color="#E5E5E5"> from</font><font color="#CCCCCC"> the other</font>

292
00:11:38,920 --> 00:11:44,199
side and various combinations<font color="#CCCCCC"> of</font>

293
00:11:40,929 --> 00:11:46,179
<font color="#E5E5E5">elliptic curve diffie-hellman results so</font>

294
00:11:44,199 --> 00:11:48,849
each of these tokens is 32 bytes<font color="#E5E5E5"> long</font>

295
00:11:46,179 --> 00:11:52,269
and it allows you<font color="#E5E5E5"> to establish</font><font color="#CCCCCC"> a shared</font>

296
00:11:48,850 --> 00:11:54,910
and a public<font color="#E5E5E5"> key which is mutually</font>

297
00:11:52,269 --> 00:11:56,980
authenticated from the party<font color="#E5E5E5"> that</font><font color="#CCCCCC"> you're</font>

298
00:11:54,910 --> 00:11:59,469
talking<font color="#CCCCCC"> to you once you have that you</font>

299
00:11:56,980 --> 00:12:01,179
can encrypt<font color="#E5E5E5"> so that public key and so</font>

300
00:11:59,470 --> 00:12:03,549
you can<font color="#E5E5E5"> a payload in so you have</font><font color="#CCCCCC"> a</font>

301
00:12:01,179 --> 00:12:04,869
<font color="#E5E5E5">one minute round-trip time set up but</font>

302
00:12:03,549 --> 00:12:07,059
the really nice thing is that<font color="#E5E5E5"> you can</font>

303
00:12:04,869 --> 00:12:08,350
catch the secret and next<font color="#E5E5E5"> time you want</font>

304
00:12:07,059 --> 00:12:10,059
to set up<font color="#CCCCCC"> a</font><font color="#E5E5E5"> connection to the same</font>

305
00:12:08,350 --> 00:12:12,279
<font color="#E5E5E5">person as long as you still have their</font>

306
00:12:10,059 --> 00:12:15,670
public key you can do a<font color="#E5E5E5"> zero</font><font color="#CCCCCC"> around time</font>

307
00:12:12,279 --> 00:12:18,369
and<font color="#E5E5E5"> set up again which is called I K so</font>

308
00:12:15,670 --> 00:12:21,040
theoretically this<font color="#CCCCCC"> is basically the most</font>

309
00:12:18,369 --> 00:12:23,679
lightweight<font color="#E5E5E5"> encryption handshake and</font>

310
00:12:21,040 --> 00:12:27,969
subsequent overhead which is<font color="#CCCCCC"> 16</font><font color="#E5E5E5"> bytes of</font>

311
00:12:23,679 --> 00:12:30,279
<font color="#CCCCCC">North</font><font color="#E5E5E5"> ter given a EAD</font><font color="#CCCCCC"> in order</font><font color="#E5E5E5"> to do</font>

312
00:12:27,970 --> 00:12:32,259
encryption<font color="#E5E5E5"> the bad news though is that</font>

313
00:12:30,279 --> 00:12:34,240
you are effectively<font color="#E5E5E5"> wrapping your own</font>

314
00:12:32,259 --> 00:12:37,809
transport<font color="#CCCCCC"> layer encryption at this point</font>

315
00:12:34,240 --> 00:12:39,279
now the combination<font color="#E5E5E5"> of</font><font color="#CCCCCC"> xx</font><font color="#E5E5E5"> on</font><font color="#CCCCCC"> ok is kind</font>

316
00:12:37,809 --> 00:12:41,410
of standardized by noise and they call

317
00:12:39,279 --> 00:12:43,420
it a noise pipe<font color="#E5E5E5"> but what it doesn't give</font>

318
00:12:41,410 --> 00:12:45,579
you is any framing it doesn't give you

319
00:12:43,420 --> 00:12:49,059
any sequence numbers<font color="#CCCCCC"> it isn't resilient</font>

320
00:12:45,579 --> 00:12:50,859
to packet loss or reordering<font color="#E5E5E5"> so as a</font>

321
00:12:49,059 --> 00:12:53,259
<font color="#E5E5E5">developer you have to handle all</font><font color="#CCCCCC"> of that</font>

322
00:12:50,860 --> 00:12:55,059
yourself<font color="#E5E5E5"> so</font><font color="#CCCCCC"> the good news</font><font color="#E5E5E5"> is that</font><font color="#CCCCCC"> is so</font>

323
00:12:53,259 --> 00:12:56,679
light it's amazing the bad news is<font color="#CCCCCC"> you</font>

324
00:12:55,059 --> 00:12:58,749
<font color="#E5E5E5">feel slightly like you're implementing</font>

325
00:12:56,679 --> 00:13:00,999
TLS which<font color="#E5E5E5"> is probably a</font><font color="#CCCCCC"> bad</font><font color="#E5E5E5"> thing</font><font color="#CCCCCC"> at</font>

326
00:12:58,749 --> 00:13:03,129
some level but<font color="#CCCCCC"> in</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> interest</font><font color="#E5E5E5"> of saying</font>

327
00:13:00,999 --> 00:13:05,499
how low we could go we<font color="#E5E5E5"> went ahead with</font>

328
00:13:03,129 --> 00:13:09,279
<font color="#CCCCCC">it anyway</font><font color="#E5E5E5"> and in fact one of the things</font>

329
00:13:05,499 --> 00:13:12,040
<font color="#CCCCCC">we've done</font><font color="#E5E5E5"> here is to you need to do</font>

330
00:13:09,279 --> 00:13:14,970
these handshake packets<font color="#CCCCCC"> and the payload</font>

331
00:13:12,040 --> 00:13:17,439
is obviously<font color="#CCCCCC"> co-op but here these guys</font>

332
00:13:14,970 --> 00:13:20,199
<font color="#CCCCCC">you need</font><font color="#E5E5E5"> to somehow frame the handshake</font>

333
00:13:17,439 --> 00:13:22,629
<font color="#E5E5E5">so what we did was to host the co-op</font>

334
00:13:20,199 --> 00:13:24,849
headers<font color="#CCCCCC"> out of the cart payload</font><font color="#E5E5E5"> and</font>

335
00:13:22,629 --> 00:13:25,779
they're not particularly sensitive<font color="#E5E5E5"> it's</font>

336
00:13:24,850 --> 00:13:28,959
like a sequence

337
00:13:25,779 --> 00:13:31,120
number and unique ID<font color="#E5E5E5"> and weather and the</font>

338
00:13:28,959 --> 00:13:32,709
type<font color="#CCCCCC"> of</font><font color="#E5E5E5"> request</font><font color="#CCCCCC"> and that's it so</font><font color="#E5E5E5"> you</font>

339
00:13:31,120 --> 00:13:34,120
<font color="#CCCCCC">don't get</font><font color="#E5E5E5"> that much metadata on it so</font>

340
00:13:32,709 --> 00:13:36,579
it's<font color="#CCCCCC"> probably not a disaster if you</font>

341
00:13:34,120 --> 00:13:39,069
don't encrypt it<font color="#E5E5E5"> so we took those bytes</font>

342
00:13:36,579 --> 00:13:41,979
<font color="#E5E5E5">hoisted them up outside</font><font color="#CCCCCC"> of the noise</font>

343
00:13:39,069 --> 00:13:43,899
payload and so you have unencrypted<font color="#E5E5E5"> cart</font>

344
00:13:41,980 --> 00:13:46,809
headers and then a noise<font color="#E5E5E5"> encrypted</font>

345
00:13:43,899 --> 00:13:48,790
payload beneath it<font color="#E5E5E5"> and then we use the</font>

346
00:13:46,809 --> 00:13:51,430
same<font color="#E5E5E5"> thing to cheat with these</font>

347
00:13:48,790 --> 00:13:53,529
handshakes and<font color="#E5E5E5"> make them look like</font><font color="#CCCCCC"> coop</font>

348
00:13:51,430 --> 00:13:56,739
headers<font color="#E5E5E5"> so we</font><font color="#CCCCCC"> actually gave them Co app</font>

349
00:13:53,529 --> 00:13:59,170
IDs from unallocated<font color="#CCCCCC"> curb</font><font color="#E5E5E5"> space so</font><font color="#CCCCCC"> that</font>

350
00:13:56,740 --> 00:14:02,259
<font color="#E5E5E5">you kind of multiplexing</font><font color="#CCCCCC"> the encryption</font>

351
00:13:59,170 --> 00:14:03,040
in the current levels and I'm going<font color="#E5E5E5"> to</font>

352
00:14:02,259 --> 00:14:06,100
speed up<font color="#E5E5E5"> a</font><font color="#CCCCCC"> bit</font>

353
00:14:03,040 --> 00:14:08,290
payload<font color="#CCCCCC"> Jason is about</font><font color="#E5E5E5"> 35 bytes for that</font>

354
00:14:06,100 --> 00:14:10,480
switch<font color="#CCCCCC"> to see</font><font color="#E5E5E5"> ball binary you get about</font>

355
00:14:08,290 --> 00:14:12,610
<font color="#E5E5E5">same</font><font color="#CCCCCC"> 5</font><font color="#E5E5E5"> percent smaller and actually it</font>

356
00:14:10,480 --> 00:14:14,499
scales all the way through<font color="#E5E5E5"> not amazing</font>

357
00:14:12,610 --> 00:14:16,870
<font color="#E5E5E5">so we also want to improve</font><font color="#CCCCCC"> the payload</font>

358
00:14:14,499 --> 00:14:18,220
<font color="#CCCCCC">we want to map eto write and numeric</font>

359
00:14:16,870 --> 00:14:20,499
<font color="#CCCCCC">routes we want to reduce</font><font color="#E5E5E5"> the slice of</font>

360
00:14:18,220 --> 00:14:21,910
<font color="#E5E5E5">IDs</font><font color="#CCCCCC"> mani mapping</font><font color="#E5E5E5"> these those crap so</font>

361
00:14:20,499 --> 00:14:24,129
what we<font color="#E5E5E5"> did is to run everything through</font>

362
00:14:21,910 --> 00:14:26,559
a deflate library using a shared

363
00:14:24,129 --> 00:14:28,839
dictionary this<font color="#E5E5E5"> is great for saving</font>

364
00:14:26,559 --> 00:14:30,670
bandwidth<font color="#E5E5E5"> it's a disaster</font><font color="#CCCCCC"> for</font><font color="#E5E5E5"> a protocol</font>

365
00:14:28,839 --> 00:14:32,470
<font color="#CCCCCC">it's you're</font><font color="#E5E5E5"> basically saying hey to talk</font>

366
00:14:30,670 --> 00:14:34,959
low bandwidth matrix everybody has<font color="#CCCCCC"> to</font>

367
00:14:32,470 --> 00:14:36,579
implement<font color="#E5E5E5"> the same deflate library using</font>

368
00:14:34,959 --> 00:14:38,979
the same deflate dictionary<font color="#E5E5E5"> you can</font>

369
00:14:36,579 --> 00:14:41,800
imagine how fragile that is but it means

370
00:14:38,980 --> 00:14:43,509
<font color="#E5E5E5">we can get down</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> 90 bytes but a 16</font>

371
00:14:41,800 --> 00:14:45,819
bytes<font color="#E5E5E5"> of crypto overhead so</font><font color="#CCCCCC"> eight</font>

372
00:14:43,509 --> 00:14:51,569
<font color="#E5E5E5">seconds to send a message a hundred bits</font>

373
00:14:45,819 --> 00:14:51,569
<font color="#CCCCCC">a second so thank you</font>

374
00:14:52,389 --> 00:14:57,199
architecturally<font color="#CCCCCC"> you have a</font><font color="#E5E5E5"> client</font><font color="#CCCCCC"> that</font>

375
00:14:54,619 --> 00:14:58,819
<font color="#CCCCCC">talked a little go-kart proxy so the</font>

376
00:14:57,199 --> 00:15:01,008
matrix clients and servers are talking

377
00:14:58,819 --> 00:15:02,930
normal HTTP no changes<font color="#E5E5E5"> really at all</font>

378
00:15:01,009 --> 00:15:04,790
other than<font color="#E5E5E5"> to squidge down the size of</font>

379
00:15:02,930 --> 00:15:07,910
some of<font color="#E5E5E5"> the IDs and</font><font color="#CCCCCC"> we go from seven</font>

380
00:15:04,790 --> 00:15:09,529
<font color="#CCCCCC">kilobytes of Jason HTTP etc to about 90</font>

381
00:15:07,910 --> 00:15:12,949
<font color="#CCCCCC">100 bytes akhirat</font>

382
00:15:09,529 --> 00:15:15,499
Seaborg<font color="#CCCCCC"> carrot plate noisy DPI DP IP</font><font color="#E5E5E5"> an</font>

383
00:15:12,949 --> 00:15:17,059
Ethernet so quick the fire and time

384
00:15:15,499 --> 00:15:21,610
let's actually see the scenes happening

385
00:15:17,059 --> 00:15:24,350
<font color="#CCCCCC">so what I have here is a simulator</font>

386
00:15:21,610 --> 00:15:30,999
<font color="#E5E5E5">hopefully somewhere</font><font color="#CCCCCC"> where's it gone yeah</font>

387
00:15:24,350 --> 00:15:33,619
<font color="#CCCCCC">notice cord</font><font color="#E5E5E5"> mesh sim and let me run it</font>

388
00:15:30,999 --> 00:15:37,540
<font color="#E5E5E5">there we go so what this does</font><font color="#CCCCCC"> is Safari</font>

389
00:15:33,619 --> 00:15:42,769
<font color="#E5E5E5">padalka containing that entire stack and</font>

390
00:15:37,540 --> 00:15:44,899
if<font color="#E5E5E5"> i go to little web interface here you</font>

391
00:15:42,769 --> 00:15:46,850
can physically draw a network so every

392
00:15:44,899 --> 00:15:50,720
time I click here in the background<font color="#CCCCCC"> it's</font>

393
00:15:46,850 --> 00:15:53,119
firing up a docker instance and linking

394
00:15:50,720 --> 00:15:57,459
<font color="#E5E5E5">these matrix servers into</font><font color="#CCCCCC"> a genuine mesh</font>

395
00:15:53,119 --> 00:15:57,459
<font color="#E5E5E5">if I go</font><font color="#CCCCCC"> and shell into</font><font color="#E5E5E5"> one of these</font>

396
00:15:57,490 --> 00:16:08,959
something like synapse<font color="#CCCCCC"> 0</font><font color="#E5E5E5"> and boom - no</font>

397
00:16:03,259 --> 00:16:11,360
no<font color="#E5E5E5"> - you stop it there we go and I start</font>

398
00:16:08,959 --> 00:16:14,119
<font color="#E5E5E5">pinning</font><font color="#CCCCCC"> pinging</font><font color="#E5E5E5"> one of these guys</font><font color="#CCCCCC"> you</font>

399
00:16:11,360 --> 00:16:16,220
<font color="#E5E5E5">can see it's 270 mils of latency</font><font color="#CCCCCC"> I can</font>

400
00:16:14,120 --> 00:16:18,350
drag this around and it<font color="#CCCCCC"> goes someplace</font>

401
00:16:16,220 --> 00:16:22,100
with SM<font color="#CCCCCC"> in order</font><font color="#E5E5E5"> to increase it up</font><font color="#CCCCCC"> to</font>

402
00:16:18,350 --> 00:16:25,249
360 now and you can see this is between

403
00:16:22,100 --> 00:16:27,649
0<font color="#CCCCCC"> & 1</font><font color="#E5E5E5"> so</font><font color="#CCCCCC"> it's around trip time if you</font>

404
00:16:25,249 --> 00:16:30,709
about 400<font color="#E5E5E5"> or whatever it's adding a</font>

405
00:16:27,649 --> 00:16:31,910
bunch more<font color="#E5E5E5"> to make</font><font color="#CCCCCC"> it a bit more</font><font color="#E5E5E5"> firm so</font>

406
00:16:30,709 --> 00:16:34,219
we're building up<font color="#CCCCCC"> the Smasher connects</font>

407
00:16:31,910 --> 00:16:38,120
to maximum of four servers<font color="#E5E5E5"> at a given</font>

408
00:16:34,220 --> 00:16:40,490
point if we do<font color="#E5E5E5"> doc it starts here you</font>

409
00:16:38,120 --> 00:16:42,410
can see it's<font color="#CCCCCC"> putting them all</font><font color="#E5E5E5"> up each</font>

410
00:16:40,490 --> 00:16:46,519
one is using<font color="#CCCCCC"> about hundred Meg's</font>

411
00:16:42,410 --> 00:16:47,749
which a lot<font color="#CCCCCC"> of which</font><font color="#E5E5E5"> is infrastructure</font>

412
00:16:46,519 --> 00:16:50,179
around<font color="#E5E5E5"> the outside the synapses are</font>

413
00:16:47,749 --> 00:16:52,819
about 70 Meg's so there we go

414
00:16:50,179 --> 00:16:55,579
interesting<font color="#E5E5E5"> network and let's do a quick</font>

415
00:16:52,819 --> 00:16:59,349
trace route and just<font color="#E5E5E5"> show you what's</font>

416
00:16:55,579 --> 00:17:03,219
going<font color="#E5E5E5"> on where we go let's go from</font><font color="#CCCCCC"> 0 to</font>

417
00:16:59,350 --> 00:17:03,220
<font color="#CCCCCC">10</font><font color="#E5E5E5"> looks like a good one</font>

418
00:17:03,850 --> 00:17:10,690
inside<font color="#E5E5E5"> the room it's a traceroute</font>

419
00:17:07,390 --> 00:17:12,310
<font color="#CCCCCC">synapse</font><font color="#E5E5E5"> yeah my keyboard is broken by</font>

420
00:17:10,690 --> 00:17:13,780
the<font color="#E5E5E5"> way the magic of the map</font><font color="#CCCCCC"> now that's</font>

421
00:17:12,310 --> 00:17:16,419
not very<font color="#E5E5E5"> exciting</font><font color="#CCCCCC"> it went straight to 9</font>

422
00:17:13,780 --> 00:17:18,310
to<font color="#CCCCCC"> 10 so it's going</font><font color="#E5E5E5"> 0 9 10 which kind of</font>

423
00:17:16,420 --> 00:17:19,900
makes<font color="#E5E5E5"> sense</font><font color="#CCCCCC"> and in terms of the roofing</font>

424
00:17:18,310 --> 00:17:21,790
<font color="#E5E5E5">algorithm we're cheating</font><font color="#CCCCCC"> a little bit</font><font color="#E5E5E5"> by</font>

425
00:17:19,900 --> 00:17:23,920
inserting the<font color="#CCCCCC"> roots</font><font color="#E5E5E5"> based on the</font>

426
00:17:21,790 --> 00:17:24,220
topology of the network here rather<font color="#E5E5E5"> than</font>

427
00:17:23,920 --> 00:17:27,580
running

428
00:17:24,220 --> 00:17:29,830
<font color="#E5E5E5">OSPF or whatever you might use so let's</font>

429
00:17:27,579 --> 00:17:34,629
log into one of these quickly<font color="#E5E5E5"> and I got</font>

430
00:17:29,830 --> 00:17:37,090
a riot<font color="#E5E5E5"> running locally and one going</font><font color="#CCCCCC"> to</font>

431
00:17:34,630 --> 00:17:38,380
I could talk<font color="#CCCCCC"> to it directly over HTTP</font><font color="#E5E5E5"> so</font>

432
00:17:37,090 --> 00:17:40,270
I'm<font color="#E5E5E5"> going to talk</font><font color="#CCCCCC"> to the local proxy</font>

433
00:17:38,380 --> 00:17:42,070
<font color="#E5E5E5">which is going to convert it down into</font>

434
00:17:40,270 --> 00:17:46,780
<font color="#CCCCCC">Keller I should probably</font><font color="#E5E5E5"> run the local</font>

435
00:17:42,070 --> 00:17:48,429
<font color="#CCCCCC">proxy which is there</font><font color="#E5E5E5"> there we go so</font><font color="#CCCCCC"> now</font>

436
00:17:46,780 --> 00:17:52,990
I can<font color="#E5E5E5"> log in and it's</font><font color="#CCCCCC"> made for</font><font color="#E5E5E5"> you</font>

437
00:17:48,430 --> 00:17:55,600
and Here I am now<font color="#CCCCCC"> talking over that</font>

438
00:17:52,990 --> 00:17:58,330
<font color="#E5E5E5">Network and</font><font color="#CCCCCC"> that is what's</font><font color="#E5E5E5"> going on over</font>

439
00:17:55,600 --> 00:18:01,000
the line so you<font color="#E5E5E5"> can</font><font color="#CCCCCC"> see these like 50 55</font>

440
00:17:58,330 --> 00:18:02,199
<font color="#E5E5E5">PI packets is the log in sequence if you</font>

441
00:18:01,000 --> 00:18:05,020
have it<font color="#E5E5E5"> looks at the matrix</font><font color="#CCCCCC"> login</font>

442
00:18:02,200 --> 00:18:07,540
sequence<font color="#CCCCCC"> HTTP it's like</font><font color="#E5E5E5"> kilobytes</font>

443
00:18:05,020 --> 00:18:11,560
sub-basin going around the place so it

444
00:18:07,540 --> 00:18:18,940
<font color="#E5E5E5">lets go and quickly</font><font color="#CCCCCC"> I'm going to start</font>

445
00:18:11,560 --> 00:18:20,530
logging again<font color="#CCCCCC"> onto a new right</font><font color="#E5E5E5"> and this</font>

446
00:18:18,940 --> 00:18:22,390
<font color="#E5E5E5">time</font><font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> going to talk HTTP to it</font>

447
00:18:20,530 --> 00:18:24,940
because I'm only running one proxy<font color="#E5E5E5"> no</font>

448
00:18:22,390 --> 00:18:33,040
exposing<font color="#CCCCCC"> HTTP they're ready</font><font color="#E5E5E5"> to be in</font>

449
00:18:24,940 --> 00:18:37,090
<font color="#E5E5E5">fact so</font><font color="#CCCCCC"> we go in here let me</font><font color="#E5E5E5"> start a</font>

450
00:18:33,040 --> 00:18:40,270
chat with<font color="#CCCCCC"> Mathieu on synapse zero cause</font>

451
00:18:37,090 --> 00:18:41,889
I'm not into synapse one there and there

452
00:18:40,270 --> 00:18:44,500
we go we've<font color="#E5E5E5"> got the conversation coming</font>

453
00:18:41,890 --> 00:18:46,360
in here and I can say hello<font color="#E5E5E5"> world</font>

454
00:18:44,500 --> 00:18:49,000
so before I hit Send<font color="#E5E5E5"> on that I'm going</font>

455
00:18:46,360 --> 00:18:51,040
<font color="#E5E5E5">to clear</font><font color="#CCCCCC"> my trace route</font><font color="#E5E5E5"> and you can see</font>

456
00:18:49,000 --> 00:18:53,410
<font color="#E5E5E5">for first of all we're not suppressing</font>

457
00:18:51,040 --> 00:18:54,970
echo locally so I get a bit of crap here

458
00:18:53,410 --> 00:18:57,070
from<font color="#E5E5E5"> receiving</font><font color="#CCCCCC"> the same message</font><font color="#E5E5E5"> coming</font>

459
00:18:54,970 --> 00:19:00,280
back<font color="#E5E5E5"> but actually sending</font><font color="#CCCCCC"> the message is</font>

460
00:18:57,070 --> 00:19:03,480
<font color="#E5E5E5">104 bytes including Ethernet and headers</font>

461
00:19:00,280 --> 00:19:07,149
and then<font color="#E5E5E5"> 48 bytes to acknowledge it and</font>

462
00:19:03,480 --> 00:19:09,690
the really fun thing we have it is if we

463
00:19:07,150 --> 00:19:09,690
thank you

464
00:19:10,180 --> 00:19:19,640
if I scratch<font color="#E5E5E5"> this down to size a bit and</font>

465
00:19:14,170 --> 00:19:21,800
I send that message<font color="#E5E5E5"> again we</font><font color="#CCCCCC"> actually</font>

466
00:19:19,640 --> 00:19:24,080
have<font color="#E5E5E5"> visualization here going through to</font>

467
00:19:21,800 --> 00:19:26,659
<font color="#E5E5E5">the</font><font color="#CCCCCC"> mesh simulator</font><font color="#E5E5E5"> to show the flow the</font>

468
00:19:24,080 --> 00:19:28,850
packets<font color="#E5E5E5"> in real time based on the</font>

469
00:19:26,660 --> 00:19:30,470
<font color="#E5E5E5">server's going and</font><font color="#CCCCCC"> talking back and</font><font color="#E5E5E5"> to</font>

470
00:19:28,850 --> 00:19:32,899
the<font color="#CCCCCC"> simulator not to see what's</font>

471
00:19:30,470 --> 00:19:35,300
happening so final quick thing we'll do

472
00:19:32,900 --> 00:19:36,830
<font color="#E5E5E5">is to create a room here and then make</font>

473
00:19:35,300 --> 00:19:39,590
<font color="#E5E5E5">all of these servers join it and we had</font>

474
00:19:36,830 --> 00:19:42,800
support<font color="#CCCCCC"> 10</font><font color="#E5E5E5"> servers I think this goes</font><font color="#CCCCCC"> up</font>

475
00:19:39,590 --> 00:19:44,810
<font color="#CCCCCC">to</font><font color="#E5E5E5"> about 200 servers on my Mac but got</font>

476
00:19:42,800 --> 00:19:47,090
time to play<font color="#E5E5E5"> with</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> and what we're</font>

477
00:19:44,810 --> 00:19:48,830
doing is<font color="#E5E5E5"> having all of the</font><font color="#CCCCCC"> server's join</font>

478
00:19:47,090 --> 00:19:52,459
the<font color="#E5E5E5"> same room in fact if we</font><font color="#CCCCCC"> look at</font>

479
00:19:48,830 --> 00:19:55,250
right<font color="#CCCCCC"> here the room is now sitting</font><font color="#E5E5E5"> right</font>

480
00:19:52,460 --> 00:19:57,230
there interesting<font color="#CCCCCC"> UI</font><font color="#E5E5E5"> bugging right there</font>

481
00:19:55,250 --> 00:19:59,330
and you<font color="#E5E5E5"> can see lots of people</font><font color="#CCCCCC"> joining</font>

482
00:19:57,230 --> 00:19:59,840
Matthew on synapse not<font color="#CCCCCC"> 1 2 3 4 5 6 & 9</font>

483
00:19:59,330 --> 00:20:01,790
<font color="#CCCCCC">10</font>

484
00:19:59,840 --> 00:20:06,679
that's great<font color="#E5E5E5"> now if I send a message</font>

485
00:20:01,790 --> 00:20:08,810
<font color="#CCCCCC">within this room like</font><font color="#E5E5E5"> that you can see</font>

486
00:20:06,680 --> 00:20:10,460
it<font color="#E5E5E5"> propagates them from</font><font color="#CCCCCC"> 7</font><font color="#E5E5E5"> or out through</font>

487
00:20:08,810 --> 00:20:13,610
the mesh<font color="#E5E5E5"> now what you might not have</font>

488
00:20:10,460 --> 00:20:14,810
<font color="#CCCCCC">noticed is if I send a message in</font><font color="#E5E5E5"> fact</font>

489
00:20:13,610 --> 00:20:16,429
what I'm going to do is to quickly<font color="#E5E5E5"> slow</font>

490
00:20:14,810 --> 00:20:19,790
down time I'm going to scale the latent

491
00:20:16,430 --> 00:20:22,490
<font color="#E5E5E5">I'm going to scale scaled latency up to</font>

492
00:20:19,790 --> 00:20:25,220
500<font color="#CCCCCC"> times</font><font color="#E5E5E5"> normal sorry</font>

493
00:20:22,490 --> 00:20:28,040
<font color="#CCCCCC">5 times 5 times</font><font color="#E5E5E5"> slower than</font><font color="#CCCCCC"> normal need</font>

494
00:20:25,220 --> 00:20:30,320
to<font color="#CCCCCC"> also increase</font><font color="#E5E5E5"> the maximum latency so</font>

495
00:20:28,040 --> 00:20:31,970
that in the mesh doesn't<font color="#E5E5E5"> collapse so now</font>

496
00:20:30,320 --> 00:20:34,310
we've got like seven hundred mils<font color="#E5E5E5"> and</font>

497
00:20:31,970 --> 00:20:37,070
second latency<font color="#E5E5E5"> so if I do the same thing</font>

498
00:20:34,310 --> 00:20:39,290
<font color="#CCCCCC">again I send a mesh message this</font><font color="#E5E5E5"> is how</font>

499
00:20:37,070 --> 00:20:42,260
matrix works<font color="#E5E5E5"> today you've got I met full</font>

500
00:20:39,290 --> 00:20:44,540
mesh<font color="#E5E5E5"> span out</font><font color="#CCCCCC"> and a</font><font color="#E5E5E5"> sorry full mesh</font>

501
00:20:42,260 --> 00:20:47,450
propagation<font color="#CCCCCC"> of the messages</font><font color="#E5E5E5"> but what we</font>

502
00:20:44,540 --> 00:20:49,700
also did<font color="#E5E5E5"> is to implement by a binary</font>

503
00:20:47,450 --> 00:20:52,910
spanning tree of this set of<font color="#E5E5E5"> servers</font><font color="#CCCCCC"> so</font>

504
00:20:49,700 --> 00:20:54,920
if I send another<font color="#E5E5E5"> message</font><font color="#CCCCCC"> you can see at</font>

505
00:20:52,910 --> 00:20:56,690
any given point<font color="#E5E5E5"> it's propagating fruit</font>

506
00:20:54,920 --> 00:20:59,180
<font color="#E5E5E5">slowly fanning out across the network</font>

507
00:20:56,690 --> 00:21:01,760
<font color="#E5E5E5">and it</font><font color="#CCCCCC"> tends out</font><font color="#E5E5E5"> to only be about</font><font color="#CCCCCC"> 50</font>

508
00:20:59,180 --> 00:21:03,740
<font color="#CCCCCC">percent slower than doing full mesh</font><font color="#E5E5E5"> so I</font>

509
00:21:01,760 --> 00:21:05,750
<font color="#E5E5E5">run out of time</font><font color="#CCCCCC"> there you go low</font>

510
00:21:03,740 --> 00:21:07,900
bandwidth matrix coming to you<font color="#E5E5E5"> will see</font>

511
00:21:05,750 --> 00:21:07,900
now

512
00:21:26,490 --> 00:21:29,599
[Music]

513
00:21:33,480 --> 00:21:46,020
<font color="#CCCCCC">first four okay</font><font color="#E5E5E5"> James I mean beginning</font>

514
00:21:41,700 --> 00:21:49,169
emergency services<font color="#CCCCCC"> any kind of personal</font>

515
00:21:46,020 --> 00:21:52,500
area networks<font color="#E5E5E5"> mesh networks people using</font>

516
00:21:49,169 --> 00:21:53,190
radio and<font color="#E5E5E5"> no sort of half duplex radio</font>

517
00:21:52,500 --> 00:21:57,000
systems

518
00:21:53,190 --> 00:21:58,620
I guess military use cases

519
00:21:57,000 --> 00:22:02,190
imagine submarines underneath polar

520
00:21:58,620 --> 00:22:03,820
icecaps<font color="#E5E5E5"> you okay cool</font>

521
00:22:02,190 --> 00:22:11,750
thank you everybody

522
00:22:03,820 --> 00:22:11,750
[Applause]

