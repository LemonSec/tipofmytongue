1
00:00:04,660 --> 00:00:10,360
my talk<font color="#E5E5E5"> is G RPG prototypes and go oh my</font>

2
00:00:07,950 --> 00:00:13,180
<font color="#CCCCCC">so how many</font><font color="#E5E5E5"> of</font><font color="#CCCCCC"> you have already</font><font color="#E5E5E5"> used gr</font>

3
00:00:10,360 --> 00:00:14,649
<font color="#E5E5E5">PC and protobufs</font><font color="#CCCCCC"> okay so a</font><font color="#E5E5E5"> bunch of you</font>

4
00:00:13,180 --> 00:00:16,810
this might be a review for<font color="#CCCCCC"> you this is</font>

5
00:00:14,650 --> 00:00:19,869
kind<font color="#E5E5E5"> of like an intro</font><font color="#CCCCCC"> a sort of</font><font color="#E5E5E5"> getting</font>

6
00:00:16,810 --> 00:00:21,669
<font color="#E5E5E5">started and so we're gonna go through</font>

7
00:00:19,869 --> 00:00:23,140
I'm<font color="#CCCCCC"> John Griffith</font>

8
00:00:21,670 --> 00:00:24,820
there's my Twitter there's my github

9
00:00:23,140 --> 00:00:25,990
<font color="#CCCCCC">reach out</font><font color="#E5E5E5"> to me</font><font color="#CCCCCC"> after this</font><font color="#E5E5E5"> if you guys</font>

10
00:00:24,820 --> 00:00:27,820
want to chat if anybody has any

11
00:00:25,990 --> 00:00:29,380
<font color="#E5E5E5">questions or wants to tell</font><font color="#CCCCCC"> me I did</font>

12
00:00:27,820 --> 00:00:31,600
<font color="#CCCCCC">something wrong or whatever</font><font color="#E5E5E5"> or</font><font color="#CCCCCC"> just</font>

13
00:00:29,380 --> 00:00:33,969
wants to meet me and talk<font color="#CCCCCC"> I work at Red</font>

14
00:00:31,600 --> 00:00:39,460
Hat<font color="#E5E5E5"> and I'm mostly around the kubernetes</font>

15
00:00:33,969 --> 00:00:40,899
space these<font color="#CCCCCC"> days so RPC basically we're</font>

16
00:00:39,460 --> 00:00:44,589
<font color="#CCCCCC">just talking about machines</font><font color="#E5E5E5"> talking to</font>

17
00:00:40,899 --> 00:00:46,019
machines<font color="#CCCCCC"> this the whole</font><font color="#E5E5E5"> G RPC thing and</font>

18
00:00:44,589 --> 00:00:49,120
everything<font color="#E5E5E5"> it's not</font><font color="#CCCCCC"> necessarily a</font>

19
00:00:46,019 --> 00:00:52,030
groundbreaking new<font color="#E5E5E5"> idea this technique</font>

20
00:00:49,120 --> 00:00:54,399
and this<font color="#E5E5E5"> these kind of ideas</font><font color="#CCCCCC"> have</font><font color="#E5E5E5"> been</font>

21
00:00:52,030 --> 00:00:55,749
<font color="#E5E5E5">around for a long time</font><font color="#CCCCCC"> I'm old enough to</font>

22
00:00:54,399 --> 00:01:00,940
<font color="#E5E5E5">have</font><font color="#CCCCCC"> worked with most</font><font color="#E5E5E5"> of these</font>

23
00:00:55,749 --> 00:01:04,930
unfortunately so<font color="#E5E5E5"> G RPC is kind of the</font>

24
00:01:00,940 --> 00:01:06,250
newest take on this this idea<font color="#E5E5E5"> simple</font>

25
00:01:04,930 --> 00:01:08,770
<font color="#CCCCCC">ideas basically</font><font color="#E5E5E5"> you have some clients</font>

26
00:01:06,250 --> 00:01:10,590
<font color="#E5E5E5">that</font><font color="#CCCCCC"> you want to be able</font><font color="#E5E5E5"> to</font><font color="#CCCCCC"> actually</font>

27
00:01:08,770 --> 00:01:12,759
<font color="#CCCCCC">affect actions on a remote</font><font color="#E5E5E5"> server</font>

28
00:01:10,590 --> 00:01:15,369
usually<font color="#E5E5E5"> that transport that you're going</font>

29
00:01:12,759 --> 00:01:18,039
to use is TCP<font color="#E5E5E5"> one of the nice things</font>

30
00:01:15,369 --> 00:01:20,259
about G RPC is that it's going<font color="#E5E5E5"> to use</font>

31
00:01:18,039 --> 00:01:22,810
HTTP<font color="#CCCCCC"> 2 specifically which gives us a lot</font>

32
00:01:20,259 --> 00:01:25,090
<font color="#CCCCCC">of flexibility</font><font color="#E5E5E5"> and a lot</font><font color="#CCCCCC"> of capabilities</font>

33
00:01:22,810 --> 00:01:30,130
<font color="#E5E5E5">and much better performance</font><font color="#CCCCCC"> in</font>

34
00:01:25,090 --> 00:01:31,630
<font color="#E5E5E5">efficiency</font><font color="#CCCCCC"> so my talk</font><font color="#E5E5E5"> really is actually</font>

35
00:01:30,130 --> 00:01:33,429
<font color="#E5E5E5">just to tell you that G RPC is really</font>

36
00:01:31,630 --> 00:01:34,539
the only option<font color="#CCCCCC"> out</font><font color="#E5E5E5"> of all the different</font>

37
00:01:33,429 --> 00:01:37,090
things<font color="#E5E5E5"> that are out</font><font color="#CCCCCC"> there</font><font color="#E5E5E5"> and it's the</font>

38
00:01:34,539 --> 00:01:40,469
only<font color="#CCCCCC"> thing that you</font><font color="#E5E5E5"> should use</font><font color="#CCCCCC"> so that's</font>

39
00:01:37,090 --> 00:01:44,020
<font color="#E5E5E5">really why I'm here</font><font color="#CCCCCC"> ok not really</font>

40
00:01:40,469 --> 00:01:46,149
<font color="#CCCCCC">actually on the opposite</font><font color="#E5E5E5"> there's a lot</font>

41
00:01:44,020 --> 00:01:48,249
of<font color="#E5E5E5"> really good</font><font color="#CCCCCC"> options out there there's</font>

42
00:01:46,149 --> 00:01:51,670
a lot of really really<font color="#E5E5E5"> good technologies</font>

43
00:01:48,249 --> 00:01:54,880
a lot<font color="#CCCCCC"> of different</font><font color="#E5E5E5"> things you can do but</font>

44
00:01:51,670 --> 00:01:57,880
G RPC is actually really<font color="#E5E5E5"> cool it's got a</font>

45
00:01:54,880 --> 00:02:00,130
ton of super super good features things

46
00:01:57,880 --> 00:02:02,350
<font color="#E5E5E5">like that and so what I always tell</font>

47
00:02:00,130 --> 00:02:04,329
<font color="#E5E5E5">people is</font><font color="#CCCCCC"> just please</font><font color="#E5E5E5"> always investigate</font>

48
00:02:02,350 --> 00:02:05,109
<font color="#E5E5E5">new things and look at other</font><font color="#CCCCCC"> options out</font>

49
00:02:04,329 --> 00:02:07,298
there when<font color="#CCCCCC"> you're doing your research</font>

50
00:02:05,109 --> 00:02:10,660
<font color="#CCCCCC">don't just listen</font><font color="#E5E5E5"> to what somebody said</font>

51
00:02:07,299 --> 00:02:12,220
at FOSDEM<font color="#E5E5E5"> or anywhere</font><font color="#CCCCCC"> else</font><font color="#E5E5E5"> right or what</font>

52
00:02:10,660 --> 00:02:13,510
they<font color="#CCCCCC"> wrote on</font><font color="#E5E5E5"> their blog check it out</font>

53
00:02:12,220 --> 00:02:16,989
<font color="#E5E5E5">for yourself and in</font>

54
00:02:13,510 --> 00:02:19,298
<font color="#E5E5E5">what you think</font><font color="#CCCCCC"> so some of</font><font color="#E5E5E5"> the things</font>

55
00:02:16,989 --> 00:02:23,530
<font color="#E5E5E5">that I</font><font color="#CCCCCC"> think</font><font color="#E5E5E5"> are really nice about</font><font color="#CCCCCC"> G RPC</font>

56
00:02:19,299 --> 00:02:27,040
is you get pretty much<font color="#CCCCCC"> a complete</font>

57
00:02:23,530 --> 00:02:29,650
solution<font color="#E5E5E5"> out of</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> box with G RPC</font><font color="#CCCCCC"> so i</font>

58
00:02:27,040 --> 00:02:31,150
lump protobufs<font color="#E5E5E5"> into</font><font color="#CCCCCC"> g RPC because</font>

59
00:02:29,650 --> 00:02:32,200
they're hidden when you're actually

60
00:02:31,150 --> 00:02:36,400
<font color="#CCCCCC">trying to do an information</font>

61
00:02:32,200 --> 00:02:38,798
implementation or built this<font color="#CCCCCC"> so we use</font>

62
00:02:36,400 --> 00:02:41,319
protobufs<font color="#CCCCCC"> it's got some</font><font color="#E5E5E5"> really cool</font>

63
00:02:38,799 --> 00:02:44,409
advanced features<font color="#CCCCCC"> that we might get into</font>

64
00:02:41,319 --> 00:02:46,358
<font color="#E5E5E5">today</font><font color="#CCCCCC"> hopefully like streaming</font><font color="#E5E5E5"> so you</font>

65
00:02:44,409 --> 00:02:47,290
can<font color="#CCCCCC"> even do bi-directional streaming</font><font color="#E5E5E5"> so</font>

66
00:02:46,359 --> 00:02:49,599
you can have a client and server

67
00:02:47,290 --> 00:02:51,638
streaming back and forth open a channel

68
00:02:49,599 --> 00:02:53,200
blocking and<font color="#CCCCCC"> unblocking options flow</font>

69
00:02:51,639 --> 00:02:55,209
control all the sorts of things<font color="#CCCCCC"> you</font>

70
00:02:53,200 --> 00:02:57,879
would expect<font color="#E5E5E5"> and one of the really cool</font>

71
00:02:55,209 --> 00:03:00,819
things<font color="#CCCCCC"> is the ability</font><font color="#E5E5E5"> to build in with</font>

72
00:02:57,879 --> 00:03:02,500
<font color="#CCCCCC">perta see a reverse proxy</font><font color="#E5E5E5"> for rest so if</font>

73
00:03:00,819 --> 00:03:04,298
you're hung up on rest and you need a

74
00:03:02,500 --> 00:03:06,040
rest compliant<font color="#E5E5E5"> API you can actually</font>

75
00:03:04,299 --> 00:03:07,840
<font color="#E5E5E5">still do that you can actually use</font>

76
00:03:06,040 --> 00:03:10,120
things like prota<font color="#E5E5E5"> C to build that so</font>

77
00:03:07,840 --> 00:03:12,700
that's really<font color="#CCCCCC"> cool in my opinion</font>

78
00:03:10,120 --> 00:03:14,950
but the main thing<font color="#CCCCCC"> the reason I love</font><font color="#E5E5E5"> g</font>

79
00:03:12,700 --> 00:03:18,040
RPC<font color="#E5E5E5"> and i started using it a while back</font>

80
00:03:14,950 --> 00:03:23,290
<font color="#CCCCCC">is</font><font color="#E5E5E5"> because it's</font><font color="#CCCCCC"> super easy and I'm lazy</font>

81
00:03:18,040 --> 00:03:26,470
<font color="#CCCCCC">so alright</font><font color="#E5E5E5"> so basically building a</font>

82
00:03:23,290 --> 00:03:28,448
service with G RPC it distills<font color="#CCCCCC"> down to</font>

83
00:03:26,470 --> 00:03:29,349
just three steps<font color="#CCCCCC"> right so the first</font>

84
00:03:28,449 --> 00:03:32,620
<font color="#E5E5E5">thing we're going to do is we're going</font>

85
00:03:29,349 --> 00:03:34,000
<font color="#CCCCCC">to create a interface definition</font><font color="#E5E5E5"> so</font>

86
00:03:32,620 --> 00:03:35,500
that's our profile and<font color="#CCCCCC"> that's</font><font color="#E5E5E5"> going to</font>

87
00:03:34,000 --> 00:03:36,849
just be<font color="#E5E5E5"> saying what it is</font><font color="#CCCCCC"> that we're</font>

88
00:03:35,500 --> 00:03:39,489
going<font color="#CCCCCC"> to serialize back and forth across</font>

89
00:03:36,849 --> 00:03:42,129
the<font color="#CCCCCC"> wire the second step is to actually</font>

90
00:03:39,489 --> 00:03:45,099
<font color="#E5E5E5">implement the server and then</font><font color="#CCCCCC"> the third</font>

91
00:03:42,129 --> 00:03:47,168
step<font color="#CCCCCC"> is to</font><font color="#E5E5E5"> implement the client now</font><font color="#CCCCCC"> I</font>

92
00:03:45,099 --> 00:03:48,910
did leave one<font color="#E5E5E5"> important thing out even</font>

93
00:03:47,169 --> 00:03:50,290
here right<font color="#CCCCCC"> you have to have an</font><font color="#E5E5E5"> API of</font>

94
00:03:48,910 --> 00:03:52,989
something that you're building they

95
00:03:50,290 --> 00:03:54,489
<font color="#E5E5E5">write to</font><font color="#CCCCCC"> do</font><font color="#E5E5E5"> something useful so but</font>

96
00:03:52,989 --> 00:03:58,629
that's<font color="#E5E5E5"> the that's something you've</font>

97
00:03:54,489 --> 00:04:01,389
<font color="#CCCCCC">probably already done so so my argument</font>

98
00:03:58,629 --> 00:04:03,069
<font color="#E5E5E5">is that it's so easy that</font><font color="#CCCCCC"> we could</font>

99
00:04:01,389 --> 00:04:04,959
actually just<font color="#E5E5E5"> build the G RPC service</font>

100
00:04:03,069 --> 00:04:07,899
right<font color="#CCCCCC"> here and now</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> not just the</font>

101
00:04:04,959 --> 00:04:10,620
usual<font color="#CCCCCC"> ping</font><font color="#E5E5E5"> pong</font><font color="#CCCCCC"> you know</font><font color="#E5E5E5"> anything like</font>

102
00:04:07,900 --> 00:04:12,970
<font color="#CCCCCC">that so what we're gonna do today is</font>

103
00:04:10,620 --> 00:04:15,120
we're going to take<font color="#E5E5E5"> this simple</font><font color="#CCCCCC"> LVM</font>

104
00:04:12,970 --> 00:04:17,680
package that<font color="#CCCCCC"> I have the simple LVM</font><font color="#E5E5E5"> API</font>

105
00:04:15,120 --> 00:04:20,470
<font color="#E5E5E5">and we're gonna build a G RPC service</font>

106
00:04:17,680 --> 00:04:22,930
for it right here on<font color="#CCCCCC"> the fly in this</font>

107
00:04:20,470 --> 00:04:24,219
session<font color="#CCCCCC"> so it's gonna be really</font>

108
00:04:22,930 --> 00:04:26,169
interesting<font color="#CCCCCC"> because</font><font color="#E5E5E5"> this</font><font color="#CCCCCC"> is not my</font>

109
00:04:24,219 --> 00:04:30,659
<font color="#E5E5E5">laptop</font>

110
00:04:26,169 --> 00:04:33,219
and<font color="#CCCCCC"> it's had and it has a UK keyboard</font><font color="#E5E5E5"> so</font>

111
00:04:30,659 --> 00:04:36,460
you<font color="#E5E5E5"> guys should be entertained if</font>

112
00:04:33,219 --> 00:04:38,439
<font color="#E5E5E5">nothing else all</font><font color="#CCCCCC"> right</font><font color="#E5E5E5"> so what we're</font>

113
00:04:36,460 --> 00:04:39,520
doing is you<font color="#E5E5E5"> know you should always kind</font>

114
00:04:38,439 --> 00:04:42,430
of<font color="#E5E5E5"> have an idea</font><font color="#CCCCCC"> of what you're trying</font><font color="#E5E5E5"> to</font>

115
00:04:39,520 --> 00:04:45,008
<font color="#E5E5E5">do</font><font color="#CCCCCC"> we're gonna basically</font><font color="#E5E5E5"> build our own</font>

116
00:04:42,430 --> 00:04:47,259
sand device<font color="#CCCCCC"> so I'm doing a</font><font color="#E5E5E5"> lot of stuff</font>

117
00:04:45,009 --> 00:04:49,300
with kubernetes and<font color="#E5E5E5"> containers and all</font>

118
00:04:47,259 --> 00:04:51,310
these<font color="#E5E5E5"> different</font><font color="#CCCCCC"> things in the storage</font>

119
00:04:49,300 --> 00:04:53,439
space<font color="#E5E5E5"> and I don't want to</font><font color="#CCCCCC"> go out</font><font color="#E5E5E5"> and</font>

120
00:04:51,310 --> 00:04:54,219
like buy a<font color="#CCCCCC"> storage box from somebody or</font>

121
00:04:53,439 --> 00:04:56,469
something like<font color="#E5E5E5"> that</font>

122
00:04:54,219 --> 00:04:58,960
<font color="#E5E5E5">because I left those startups</font><font color="#CCCCCC"> and I</font>

123
00:04:56,469 --> 00:05:02,250
don't<font color="#E5E5E5"> do that anymore</font><font color="#CCCCCC"> so what I want to</font>

124
00:04:58,960 --> 00:05:04,750
<font color="#E5E5E5">do is I want to take</font><font color="#CCCCCC"> LVM and</font><font color="#E5E5E5"> I want to</font>

125
00:05:02,250 --> 00:05:07,150
put<font color="#CCCCCC"> LVM on a server that I have with a</font>

126
00:05:04,750 --> 00:05:09,159
bunch of<font color="#CCCCCC"> disks and then use I scuzzy and</font>

127
00:05:07,150 --> 00:05:12,159
just do exports and<font color="#E5E5E5"> just build my own</font>

128
00:05:09,159 --> 00:05:14,650
sand basically<font color="#E5E5E5"> I actually started to do</font>

129
00:05:12,159 --> 00:05:16,688
this as a<font color="#CCCCCC"> project</font><font color="#E5E5E5"> for kubernetes for</font><font color="#CCCCCC"> ice</font>

130
00:05:14,650 --> 00:05:18,099
<font color="#CCCCCC">kzd driver that's</font><font color="#E5E5E5"> in there and found</font>

131
00:05:16,689 --> 00:05:19,930
<font color="#E5E5E5">that</font><font color="#CCCCCC"> all of</font><font color="#E5E5E5"> the code</font><font color="#CCCCCC"> that's there is</font>

132
00:05:18,099 --> 00:05:21,460
actually deprecated and<font color="#CCCCCC"> obsolete so I'm</font>

133
00:05:19,930 --> 00:05:25,659
<font color="#E5E5E5">rewriting it and</font><font color="#CCCCCC"> this is what I'm</font><font color="#E5E5E5"> doing</font>

134
00:05:21,460 --> 00:05:27,789
<font color="#E5E5E5">so okay</font><font color="#CCCCCC"> so</font><font color="#E5E5E5"> I've got</font><font color="#CCCCCC"> this package it's</font>

135
00:05:25,659 --> 00:05:29,620
called<font color="#E5E5E5"> go</font><font color="#CCCCCC"> LVM and we're gonna start off</font>

136
00:05:27,789 --> 00:05:31,900
really<font color="#E5E5E5"> simple it just</font><font color="#CCCCCC"> creates logical</font>

137
00:05:29,620 --> 00:05:33,219
volumes<font color="#CCCCCC"> lists logical volumes and</font>

138
00:05:31,900 --> 00:05:38,198
<font color="#CCCCCC">deletes them right so everybody knows</font>

139
00:05:33,219 --> 00:05:39,969
what<font color="#CCCCCC"> LVM is I'm assuming</font><font color="#E5E5E5"> so</font><font color="#CCCCCC"> all right so</font>

140
00:05:38,199 --> 00:05:41,379
step one<font color="#CCCCCC"> I'm</font><font color="#E5E5E5"> gonna walk through the</font>

141
00:05:39,969 --> 00:05:43,419
steps<font color="#E5E5E5"> again real quick and just give you</font>

142
00:05:41,379 --> 00:05:45,669
a<font color="#E5E5E5"> preview of what we're gonna do so</font>

143
00:05:43,419 --> 00:05:48,669
we're<font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> define our interface right</font>

144
00:05:45,669 --> 00:05:50,318
so<font color="#E5E5E5"> that's going to be our</font><font color="#CCCCCC"> proto file and</font>

145
00:05:48,669 --> 00:05:54,909
then we're gonna implement<font color="#E5E5E5"> a server real</font>

146
00:05:50,319 --> 00:05:57,039
quick and then we're<font color="#E5E5E5"> going to implement</font>

147
00:05:54,909 --> 00:05:58,710
an actual client<font color="#E5E5E5"> and then we're going</font><font color="#CCCCCC"> to</font>

148
00:05:57,039 --> 00:06:02,529
deploy<font color="#CCCCCC"> this</font><font color="#E5E5E5"> and run it and check it</font><font color="#CCCCCC"> out</font>

149
00:05:58,710 --> 00:06:04,000
<font color="#E5E5E5">so we'll start off and we'll just make</font>

150
00:06:02,529 --> 00:06:08,589
<font color="#E5E5E5">this really simple we'll just do like</font>

151
00:06:04,000 --> 00:06:11,259
create volumes can yeah so I'll try<font color="#CCCCCC"> not</font>

152
00:06:08,589 --> 00:06:13,930
<font color="#CCCCCC">to talk too much well well that's not</font>

153
00:06:11,259 --> 00:06:18,400
gonna work<font color="#CCCCCC"> who am I</font><font color="#E5E5E5"> kidding yeah okay</font><font color="#CCCCCC"> I</font>

154
00:06:13,930 --> 00:06:22,599
can talk really loud so if I can<font color="#E5E5E5"> find my</font>

155
00:06:18,400 --> 00:06:25,020
mouse<font color="#CCCCCC"> or my cursor alright so this</font><font color="#E5E5E5"> is</font>

156
00:06:22,599 --> 00:06:25,020
gonna<font color="#E5E5E5"> be good</font>

157
00:06:27,750 --> 00:06:42,430
let's minimize this and get this over

158
00:06:35,860 --> 00:06:45,490
<font color="#CCCCCC">here</font><font color="#E5E5E5"> all right so I've got a couple of</font>

159
00:06:42,430 --> 00:06:47,260
<font color="#E5E5E5">fedora boxes running on VMs that I'm</font>

160
00:06:45,490 --> 00:06:49,950
<font color="#E5E5E5">running on this machine</font><font color="#CCCCCC"> so what I'm</font>

161
00:06:47,260 --> 00:06:52,980
gonna do is I'm<font color="#CCCCCC"> gonna go on to those and</font>

162
00:06:49,950 --> 00:06:56,590
let me actually mirror those sneakers

163
00:06:52,980 --> 00:06:58,480
<font color="#E5E5E5">well yeah we'll just try it</font>

164
00:06:56,590 --> 00:07:00,299
<font color="#E5E5E5">okay so the first thing I need</font><font color="#CCCCCC"> to do is</font>

165
00:06:58,480 --> 00:07:03,520
I am in<font color="#E5E5E5"> my go path</font><font color="#CCCCCC"> I'm in my github</font>

166
00:07:00,300 --> 00:07:05,050
<font color="#E5E5E5">directory so if you look PWD</font><font color="#CCCCCC"> you can see</font>

167
00:07:03,520 --> 00:07:13,359
there's<font color="#CCCCCC"> geographus can you guys see that</font>

168
00:07:05,050 --> 00:07:15,160
should I make<font color="#CCCCCC"> it bigger okay so do</font><font color="#E5E5E5"> that</font>

169
00:07:13,360 --> 00:07:16,900
<font color="#CCCCCC">so I'm gonna</font><font color="#E5E5E5"> set up</font><font color="#CCCCCC"> my directory</font>

170
00:07:15,160 --> 00:07:18,310
structure real quick<font color="#CCCCCC"> and</font><font color="#E5E5E5"> the way I'm</font>

171
00:07:16,900 --> 00:07:20,560
going<font color="#E5E5E5"> to do that is I'm just</font><font color="#CCCCCC"> gonna say</font>

172
00:07:18,310 --> 00:07:23,020
I'm<font color="#CCCCCC"> gonna</font><font color="#E5E5E5"> create a directory for my</font>

173
00:07:20,560 --> 00:07:27,419
proto files<font color="#CCCCCC"> a directory</font><font color="#E5E5E5"> for my server</font>

174
00:07:23,020 --> 00:07:31,450
and<font color="#E5E5E5"> a directory for my client</font><font color="#CCCCCC"> okay</font>

175
00:07:27,419 --> 00:07:36,070
required<font color="#CCCCCC"> oh see and there's the there's</font>

176
00:07:31,450 --> 00:07:36,960
<font color="#E5E5E5">the UK keyboard right there</font><font color="#CCCCCC"> oh no all</font>

177
00:07:36,070 --> 00:07:41,590
right<font color="#E5E5E5"> relax</font>

178
00:07:36,960 --> 00:07:42,640
<font color="#E5E5E5">don't don't panic there we go</font><font color="#CCCCCC"> we can</font>

179
00:07:41,590 --> 00:07:46,419
<font color="#E5E5E5">recover</font><font color="#CCCCCC"> okay</font>

180
00:07:42,640 --> 00:07:48,370
so let's go into<font color="#E5E5E5"> the profile the profile</font>

181
00:07:46,419 --> 00:07:49,900
is<font color="#CCCCCC"> actually this is really kind of</font><font color="#E5E5E5"> the</font>

182
00:07:48,370 --> 00:07:51,520
nuts and<font color="#E5E5E5"> bolts right this is the main</font>

183
00:07:49,900 --> 00:07:53,500
thing<font color="#E5E5E5"> and what we're going to do inside</font>

184
00:07:51,520 --> 00:07:54,969
<font color="#CCCCCC">of here is we're</font><font color="#E5E5E5"> gonna create this file</font>

185
00:07:53,500 --> 00:07:59,020
and we're<font color="#CCCCCC"> going to call it lv m dot</font>

186
00:07:54,970 --> 00:08:02,280
proto<font color="#CCCCCC"> and</font><font color="#E5E5E5"> what this is going to do is</font>

187
00:07:59,020 --> 00:08:04,659
this is<font color="#CCCCCC"> going</font><font color="#E5E5E5"> to define what</font><font color="#CCCCCC"> we</font><font color="#E5E5E5"> want</font><font color="#CCCCCC"> are</font>

188
00:08:02,280 --> 00:08:11,679
our service to be right

189
00:08:04,660 --> 00:08:14,130
so you see here so we start off<font color="#E5E5E5"> and we</font>

190
00:08:11,680 --> 00:08:14,130
<font color="#CCCCCC">just say</font>

191
00:08:19,050 --> 00:08:26,140
okay so syntax<font color="#E5E5E5"> we're gonna use</font><font color="#CCCCCC"> proto</font>

192
00:08:23,620 --> 00:08:29,410
<font color="#CCCCCC">three</font><font color="#E5E5E5"> is our syntax</font><font color="#CCCCCC"> so this just</font><font color="#E5E5E5"> tells</font>

193
00:08:26,140 --> 00:08:31,210
<font color="#CCCCCC">the protocol buff the proto compiler</font>

194
00:08:29,410 --> 00:08:32,650
<font color="#E5E5E5">what protocol we're using in this</font>

195
00:08:31,210 --> 00:08:33,848
definition<font color="#CCCCCC"> right so</font><font color="#E5E5E5"> this</font><font color="#CCCCCC"> is what we're</font>

196
00:08:32,650 --> 00:08:36,010
looking<font color="#CCCCCC"> for</font>

197
00:08:33,849 --> 00:08:38,140
the next thing we<font color="#CCCCCC"> need to do is we need</font>

198
00:08:36,010 --> 00:08:41,970
<font color="#E5E5E5">to give this a name right so we use kind</font>

199
00:08:38,140 --> 00:08:45,520
<font color="#E5E5E5">of go ish syntax here and we say package</font>

200
00:08:41,970 --> 00:08:47,020
<font color="#CCCCCC">and we're going to</font><font color="#E5E5E5"> call it</font><font color="#CCCCCC"> LVM and if</font>

201
00:08:45,520 --> 00:08:50,170
<font color="#CCCCCC">I'm typing</font><font color="#E5E5E5"> things</font><font color="#CCCCCC"> or</font><font color="#E5E5E5"> spelling them wrong</font>

202
00:08:47,020 --> 00:08:52,270
holler at me because<font color="#E5E5E5"> I can't see</font><font color="#CCCCCC"> so the</font>

203
00:08:50,170 --> 00:08:54,579
first thing we want<font color="#E5E5E5"> to define is this</font>

204
00:08:52,270 --> 00:08:56,230
thing called a message<font color="#E5E5E5"> right so a</font>

205
00:08:54,580 --> 00:08:57,790
<font color="#E5E5E5">message is the actual thing</font><font color="#CCCCCC"> that we're</font>

206
00:08:56,230 --> 00:08:59,500
going to serialize<font color="#E5E5E5"> and send over</font><font color="#CCCCCC"> the</font>

207
00:08:57,790 --> 00:09:00,730
wire<font color="#E5E5E5"> right so anything that you want</font><font color="#CCCCCC"> to</font>

208
00:08:59,500 --> 00:09:03,550
serialize<font color="#E5E5E5"> and send over</font><font color="#CCCCCC"> the wire it's</font>

209
00:09:00,730 --> 00:09:05,530
basically<font color="#E5E5E5"> called</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> message so we're</font>

210
00:09:03,550 --> 00:09:14,010
<font color="#CCCCCC">gonna</font><font color="#E5E5E5"> create a message we're gonna call</font>

211
00:09:05,530 --> 00:09:16,449
it a volume and capslock instead of okay

212
00:09:14,010 --> 00:09:18,850
<font color="#CCCCCC">so we're going</font><font color="#E5E5E5"> to call it volume and</font>

213
00:09:16,450 --> 00:09:20,680
we're gonna give it a string called name

214
00:09:18,850 --> 00:09:23,500
the next<font color="#E5E5E5"> thing you'll see is this one</font>

215
00:09:20,680 --> 00:09:24,790
<font color="#E5E5E5">one is the parameter</font><font color="#CCCCCC"> so what you do is</font>

216
00:09:23,500 --> 00:09:27,580
you order<font color="#E5E5E5"> the parameters that you have</font>

217
00:09:24,790 --> 00:09:29,079
so it<font color="#CCCCCC"> identifies that parameter</font><font color="#E5E5E5"> inside</font>

218
00:09:27,580 --> 00:09:34,210
of the message and<font color="#E5E5E5"> that's what we have</font>

219
00:09:29,080 --> 00:09:37,950
there<font color="#E5E5E5"> the</font><font color="#CCCCCC"> next thing we want is our</font>

220
00:09:34,210 --> 00:09:37,950
actual create volume

221
00:09:38,840 --> 00:09:51,470
that's not even<font color="#CCCCCC"> close</font><font color="#E5E5E5"> yeah I could get</font>

222
00:09:46,430 --> 00:09:54,170
<font color="#E5E5E5">used</font><font color="#CCCCCC"> to this keyboard okay create volume</font>

223
00:09:51,470 --> 00:09:59,470
<font color="#E5E5E5">request so string we're gonna give</font><font color="#CCCCCC"> it to</font>

224
00:09:54,170 --> 00:09:59,469
do a create we're gonna need<font color="#E5E5E5"> a name</font><font color="#CCCCCC"> and</font>

225
00:10:02,260 --> 00:10:08,630
<font color="#CCCCCC">we're gonna need</font><font color="#E5E5E5"> if you know anything</font>

226
00:10:05,779 --> 00:10:13,640
about<font color="#CCCCCC"> LVM you're gonna want a volume</font>

227
00:10:08,630 --> 00:10:15,380
group and in our<font color="#E5E5E5"> case we're gonna use</font>

228
00:10:13,640 --> 00:10:18,520
<font color="#CCCCCC">thin provisioning so we're gonna want to</font>

229
00:10:15,380 --> 00:10:23,680
pool<font color="#CCCCCC"> we're gonna want to specify a pool</font>

230
00:10:18,520 --> 00:10:23,680
<font color="#CCCCCC">and then we're gonna specify a size</font>

231
00:10:30,760 --> 00:10:33,760
nom-nom-nom-nom

232
00:10:37,970 --> 00:10:44,839
<font color="#E5E5E5">all right okay</font><font color="#CCCCCC"> so we've got that piece</font>

233
00:10:42,609 --> 00:10:49,189
<font color="#E5E5E5">the next thing we</font><font color="#CCCCCC"> need to do is we need</font>

234
00:10:44,839 --> 00:11:01,419
<font color="#E5E5E5">to</font><font color="#CCCCCC"> have a light so we do a message</font>

235
00:10:49,189 --> 00:11:01,419
create volume<font color="#E5E5E5"> request I'm sorry yeah</font>

236
00:11:05,070 --> 00:11:13,290
holy cow<font color="#CCCCCC"> off the rails alright</font><font color="#E5E5E5"> so we're</font>

237
00:11:11,010 --> 00:11:15,000
gonna<font color="#E5E5E5"> we're gonna give this</font><font color="#CCCCCC"> another</font>

238
00:11:13,290 --> 00:11:19,800
<font color="#CCCCCC">minute and</font><font color="#E5E5E5"> then if things don't get</font>

239
00:11:15,000 --> 00:11:21,890
better and<font color="#E5E5E5"> people keep leaving not cool</font>

240
00:11:19,800 --> 00:11:23,660
by the<font color="#E5E5E5"> way</font>

241
00:11:21,890 --> 00:11:27,319
then what I'll do is<font color="#CCCCCC"> I'll just</font><font color="#E5E5E5"> go ahead</font>

242
00:11:23,660 --> 00:11:33,980
<font color="#E5E5E5">and bring up my code</font><font color="#CCCCCC"> and we</font><font color="#E5E5E5"> can just</font>

243
00:11:27,320 --> 00:11:36,920
<font color="#E5E5E5">kind of walk</font><font color="#CCCCCC"> through it</font><font color="#E5E5E5"> instead okay so</font>

244
00:11:33,980 --> 00:11:38,029
there we<font color="#CCCCCC"> have response we're just going</font>

245
00:11:36,920 --> 00:11:40,430
to<font color="#E5E5E5"> we're</font><font color="#CCCCCC"> going</font><font color="#E5E5E5"> to call it it's just</font>

246
00:11:38,029 --> 00:11:45,890
message right<font color="#E5E5E5"> so the last thing we</font><font color="#CCCCCC"> need</font>

247
00:11:40,430 --> 00:11:49,300
to do is define the<font color="#CCCCCC"> actual service right</font>

248
00:11:45,890 --> 00:11:49,300
so we'll do

249
00:12:07,620 --> 00:12:16,080
like that<font color="#E5E5E5"> and then we want</font><font color="#CCCCCC"> to do the</font>

250
00:12:10,770 --> 00:12:19,280
same thing<font color="#CCCCCC"> I I almost got it that's</font>

251
00:12:16,080 --> 00:12:19,280
<font color="#E5E5E5">that's not terrible</font>

252
00:12:20,630 --> 00:12:24,420
all right so here's what<font color="#E5E5E5"> we're gonna do</font>

253
00:12:22,860 --> 00:12:25,800
because<font color="#E5E5E5"> we're gonna run out of time what</font>

254
00:12:24,420 --> 00:12:29,280
I'm gonna do instead is I'm<font color="#E5E5E5"> gonna pull</font>

255
00:12:25,800 --> 00:12:33,900
the code<font color="#CCCCCC"> cuz I</font><font color="#E5E5E5"> already wrote it then</font>

256
00:12:29,280 --> 00:12:36,689
we're gonna look at it it's<font color="#E5E5E5"> so easy</font><font color="#CCCCCC"> to</font>

257
00:12:33,900 --> 00:12:42,750
do if<font color="#CCCCCC"> you have a non-uk keyboard when</font>

258
00:12:36,690 --> 00:12:48,260
you're stupid American who doesn't<font color="#CCCCCC"> have</font>

259
00:12:42,750 --> 00:12:48,260
<font color="#E5E5E5">his laptop their laptop okay so</font>

260
00:12:55,750 --> 00:12:57,780
Oh

261
00:13:04,400 --> 00:13:09,640
actually in sistemas<font color="#CCCCCC"> I'll just use magic</font>

262
00:13:18,860 --> 00:13:26,180
<font color="#E5E5E5">voila right</font><font color="#CCCCCC"> okay</font><font color="#E5E5E5"> so if you look</font><font color="#CCCCCC"> back</font>

263
00:13:24,350 --> 00:13:31,660
remember<font color="#CCCCCC"> our proto file that we were</font>

264
00:13:26,180 --> 00:13:31,660
<font color="#E5E5E5">building oh stop</font>

265
00:13:35,110 --> 00:13:37,110
Oh

266
00:13:38,750 --> 00:13:41,809
[Music]

267
00:13:50,540 --> 00:13:53,740
and he fell apart

268
00:13:59,860 --> 00:14:02,680
so that's the proto file that we were

269
00:14:01,600 --> 00:14:05,170
<font color="#E5E5E5">trying to build those are the last two</font>

270
00:14:02,680 --> 00:14:07,209
<font color="#E5E5E5">lines I was trying to enter there so the</font>

271
00:14:05,170 --> 00:14:11,560
next step that<font color="#E5E5E5"> we needed was we needed a</font>

272
00:14:07,210 --> 00:14:13,150
server<font color="#E5E5E5"> right so if you look</font><font color="#CCCCCC"> here I</font><font color="#E5E5E5"> have</font>

273
00:14:11,560 --> 00:14:16,719
a pretty<font color="#CCCCCC"> simple server that</font><font color="#E5E5E5"> I put</font>

274
00:14:13,150 --> 00:14:20,260
together<font color="#CCCCCC"> it's just standard go</font><font color="#E5E5E5"> we have a</font>

275
00:14:16,720 --> 00:14:21,700
main<font color="#E5E5E5"> dot go here what we did is we went</font>

276
00:14:20,260 --> 00:14:23,590
<font color="#E5E5E5">ahead and we defined our function for</font>

277
00:14:21,700 --> 00:14:26,020
create volume so you<font color="#CCCCCC"> can see there we</font>

278
00:14:23,590 --> 00:14:27,460
take<font color="#E5E5E5"> a context all of our G RPC stuff is</font>

279
00:14:26,020 --> 00:14:29,590
going<font color="#E5E5E5"> to pass a context back and forth</font>

280
00:14:27,460 --> 00:14:33,310
<font color="#E5E5E5">and then there's that create volume</font>

281
00:14:29,590 --> 00:14:35,020
request that we had<font color="#E5E5E5"> so what what we did</font>

282
00:14:33,310 --> 00:14:36,880
with that proto file is we actually<font color="#E5E5E5"> ran</font>

283
00:14:35,020 --> 00:14:39,939
the proto compiler the proto C compiler

284
00:14:36,880 --> 00:14:41,470
and we compiled a<font color="#CCCCCC"> PBO</font><font color="#E5E5E5"> file and that's</font>

285
00:14:39,940 --> 00:14:43,540
what I'm referencing<font color="#E5E5E5"> there that</font><font color="#CCCCCC"> PB</font>

286
00:14:41,470 --> 00:14:45,430
create volume request right<font color="#E5E5E5"> so that's</font>

287
00:14:43,540 --> 00:14:46,839
where that's<font color="#E5E5E5"> coming from so you can</font><font color="#CCCCCC"> see</font>

288
00:14:45,430 --> 00:14:49,359
we have the create volume request we

289
00:14:46,840 --> 00:14:51,400
<font color="#CCCCCC">have to</font><font color="#E5E5E5"> create volume response</font><font color="#CCCCCC"> and then</font>

290
00:14:49,360 --> 00:14:54,400
I just go<font color="#CCCCCC"> ahead and the server is</font>

291
00:14:51,400 --> 00:14:56,560
<font color="#CCCCCC">actually where LVM is installed and</font>

292
00:14:54,400 --> 00:14:58,540
<font color="#CCCCCC">everything</font><font color="#E5E5E5"> so I'm just executing the</font><font color="#CCCCCC"> lvl</font>

293
00:14:56,560 --> 00:14:59,859
<font color="#CCCCCC">vm commands on that server when that</font>

294
00:14:58,540 --> 00:15:05,890
<font color="#E5E5E5">gets this command</font><font color="#CCCCCC"> that's</font><font color="#E5E5E5"> how it's</font>

295
00:14:59,860 --> 00:15:08,950
working one<font color="#E5E5E5"> of the things that I say</font>

296
00:15:05,890 --> 00:15:10,750
it's<font color="#E5E5E5"> super nice about G RPC</font><font color="#CCCCCC"> and one of</font>

297
00:15:08,950 --> 00:15:12,550
the reasons why I like<font color="#E5E5E5"> it so</font><font color="#CCCCCC"> much is in</font>

298
00:15:10,750 --> 00:15:14,500
terms<font color="#E5E5E5"> of setting</font><font color="#CCCCCC"> up the server</font><font color="#E5E5E5"> and get</font>

299
00:15:12,550 --> 00:15:17,380
everything<font color="#E5E5E5"> wired together this is</font>

300
00:15:14,500 --> 00:15:18,730
basically it<font color="#CCCCCC"> unless you wanted to do</font>

301
00:15:17,380 --> 00:15:20,290
some more advanced<font color="#E5E5E5"> things which you can</font>

302
00:15:18,730 --> 00:15:22,600
but this will get<font color="#E5E5E5"> you a basic running</font>

303
00:15:20,290 --> 00:15:24,969
<font color="#E5E5E5">server and everything</font><font color="#CCCCCC"> will work</font><font color="#E5E5E5"> right</font><font color="#CCCCCC"> so</font>

304
00:15:22,600 --> 00:15:29,490
it's pretty<font color="#E5E5E5"> simple</font><font color="#CCCCCC"> all</font><font color="#E5E5E5"> right so we've</font>

305
00:15:24,970 --> 00:15:33,190
got<font color="#E5E5E5"> that and</font><font color="#CCCCCC"> then we would need</font><font color="#E5E5E5"> a client</font>

306
00:15:29,490 --> 00:15:40,180
and the client<font color="#CCCCCC"> is even</font><font color="#E5E5E5"> easier</font><font color="#CCCCCC"> we just</font>

307
00:15:33,190 --> 00:15:41,230
put basically the calls<font color="#E5E5E5"> into our client</font>

308
00:15:40,180 --> 00:15:43,209
we're going to just do this directly

309
00:15:41,230 --> 00:15:45,370
<font color="#E5E5E5">right now we're going</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> go</font><font color="#CCCCCC"> ahead and</font>

310
00:15:43,210 --> 00:15:47,380
wire in<font color="#E5E5E5"> our IP address for the</font><font color="#CCCCCC"> server</font>

311
00:15:45,370 --> 00:15:49,180
and we're<font color="#E5E5E5"> going to go ahead and just</font><font color="#CCCCCC"> use</font>

312
00:15:47,380 --> 00:15:55,450
this<font color="#E5E5E5"> hard-coded create volume request</font>

313
00:15:49,180 --> 00:15:59,370
<font color="#E5E5E5">okay so if you look</font><font color="#CCCCCC"> here so if we</font><font color="#E5E5E5"> do a</font>

314
00:15:55,450 --> 00:15:59,370
sudo<font color="#E5E5E5"> of yes look</font>

315
00:15:59,790 --> 00:16:04,949
so right now you can<font color="#E5E5E5"> see we've</font><font color="#CCCCCC"> got the</font>

316
00:16:02,780 --> 00:16:07,650
system partitions and we've got that

317
00:16:04,950 --> 00:16:10,380
thin pool<font color="#E5E5E5"> for for</font><font color="#CCCCCC"> LVM thin provisioning</font>

318
00:16:07,650 --> 00:16:14,180
and that's it<font color="#CCCCCC"> so what I'm gonna do right</font>

319
00:16:10,380 --> 00:16:14,180
<font color="#CCCCCC">now is I'm going to kick off this server</font>

320
00:16:16,520 --> 00:16:21,540
<font color="#CCCCCC">okay so now the server</font><font color="#E5E5E5"> these G RPC</font>

321
00:16:19,920 --> 00:16:24,479
<font color="#E5E5E5">services up and</font><font color="#CCCCCC"> running and listening on</font>

322
00:16:21,540 --> 00:16:29,010
this server<font color="#CCCCCC"> right so we can go over here</font>

323
00:16:24,480 --> 00:16:30,360
<font color="#CCCCCC">I have this other box called Fetty - and</font>

324
00:16:29,010 --> 00:16:33,300
what we're<font color="#E5E5E5"> gonna do over there is we're</font>

325
00:16:30,360 --> 00:16:42,840
<font color="#E5E5E5">gonna run the client yes and I'm already</font>

326
00:16:33,300 --> 00:16:44,729
<font color="#E5E5E5">there I think okay so this is the same</font>

327
00:16:42,840 --> 00:16:45,960
client<font color="#CCCCCC"> it's all the</font><font color="#E5E5E5"> same code and</font>

328
00:16:44,730 --> 00:16:47,910
everything<font color="#E5E5E5"> else I just copied the whole</font>

329
00:16:45,960 --> 00:16:52,100
thing over<font color="#CCCCCC"> here</font><font color="#E5E5E5"> so what we do is we do a</font>

330
00:16:47,910 --> 00:16:52,100
client<font color="#E5E5E5"> you run that</font>

331
00:16:59,100 --> 00:17:13,419
<font color="#E5E5E5">did I not see though that</font><font color="#CCCCCC"> when I</font><font color="#E5E5E5"> started</font>

332
00:17:01,480 --> 00:17:15,789
it<font color="#E5E5E5"> so very important okay so we get our</font>

333
00:17:13,419 --> 00:17:26,679
message<font color="#CCCCCC"> says it was created</font><font color="#E5E5E5"> successfully</font>

334
00:17:15,789 --> 00:17:29,760
so we'll go over<font color="#E5E5E5"> here and</font><font color="#CCCCCC"> we'll</font><font color="#E5E5E5"> do and</font>

335
00:17:26,679 --> 00:17:32,679
you can see we have a new<font color="#E5E5E5"> LV called test</font>

336
00:17:29,760 --> 00:17:36,100
<font color="#E5E5E5">and that's that's the demo that</font><font color="#CCCCCC"> I was</font>

337
00:17:32,679 --> 00:17:40,470
trying<font color="#E5E5E5"> to code on the fly</font><font color="#CCCCCC"> I have a much</font>

338
00:17:36,100 --> 00:17:40,469
greater experience<font color="#CCCCCC"> for just for funk now</font>

339
00:17:41,850 --> 00:17:53,320
I'm sorry<font color="#E5E5E5"> what oh yes how's that</font>

340
00:17:49,270 --> 00:17:54,940
it's that better so um about<font color="#E5E5E5"> that time</font>

341
00:17:53,320 --> 00:18:03,809
but real quick<font color="#E5E5E5"> anybody have any</font>

342
00:17:54,940 --> 00:18:03,809
<font color="#E5E5E5">questions all right thank you</font>

343
00:18:08,460 --> 00:18:10,520
<font color="#E5E5E5">you</font>

