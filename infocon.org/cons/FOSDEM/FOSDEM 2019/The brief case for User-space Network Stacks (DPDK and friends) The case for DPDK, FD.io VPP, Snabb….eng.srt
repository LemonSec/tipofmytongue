1
00:00:04,620 --> 00:00:11,910
<font color="#E5E5E5">okay so and my</font><font color="#CCCCCC"> name is</font><font color="#E5E5E5"> Ray Kinsler and</font>

2
00:00:08,270 --> 00:00:19,290
I've been<font color="#E5E5E5"> working on open source since</font>

3
00:00:11,910 --> 00:00:22,619
around 1997<font color="#CCCCCC"> in one form or another this</font>

4
00:00:19,290 --> 00:00:26,340
past<font color="#CCCCCC"> 10 years I've</font><font color="#E5E5E5"> been working</font><font color="#CCCCCC"> on user</font>

5
00:00:22,619 --> 00:00:28,590
space networking<font color="#E5E5E5"> so</font><font color="#CCCCCC"> an user space</font>

6
00:00:26,340 --> 00:00:33,120
networking has gone<font color="#E5E5E5"> from something</font>

7
00:00:28,590 --> 00:00:35,100
<font color="#E5E5E5">that's been hackery in the extreme</font><font color="#CCCCCC"> at</font>

8
00:00:33,120 --> 00:00:37,019
the very in the very early days to

9
00:00:35,100 --> 00:00:39,690
something that's reaching some level of

10
00:00:37,020 --> 00:00:42,000
maturity now so I<font color="#E5E5E5"> thought I thought it</font>

11
00:00:39,690 --> 00:00:44,670
would be cool to kind of talk having

12
00:00:42,000 --> 00:00:47,250
kind<font color="#CCCCCC"> of a brief presentation on the you</font>

13
00:00:44,670 --> 00:00:51,450
know what user space networking is why

14
00:00:47,250 --> 00:00:55,190
it's a thing and you know what maturity

15
00:00:51,450 --> 00:00:58,610
for user space networking really<font color="#E5E5E5"> means</font>

16
00:00:55,190 --> 00:00:58,610
so oh

17
00:01:25,640 --> 00:01:29,050
let's try it out<font color="#CCCCCC"> again</font>

18
00:01:35,430 --> 00:01:41,600
no thanks<font color="#CCCCCC"> for not</font><font color="#E5E5E5"> just now</font><font color="#CCCCCC"> I'd prefer if</font>

19
00:01:38,550 --> 00:01:41,600
<font color="#CCCCCC">you show the slides</font>

20
00:01:51,900 --> 00:01:58,980
<font color="#E5E5E5">okay so everybody's familiar</font><font color="#CCCCCC"> with</font><font color="#E5E5E5"> the</font>

21
00:01:56,730 --> 00:02:00,810
colonel taking care or the colonel<font color="#CCCCCC"> on</font>

22
00:01:58,980 --> 00:02:03,510
<font color="#E5E5E5">whether it's the</font><font color="#CCCCCC"> bsd kernel or the</font>

23
00:02:00,810 --> 00:02:05,250
Windows kernel or<font color="#CCCCCC"> the Linux kernel</font><font color="#E5E5E5"> the</font>

24
00:02:03,510 --> 00:02:08,009
<font color="#E5E5E5">kernel taking care</font><font color="#CCCCCC"> of your networking</font>

25
00:02:05,250 --> 00:02:11,580
<font color="#E5E5E5">needs well in your kernel there's a</font>

26
00:02:08,009 --> 00:02:15,090
<font color="#E5E5E5">network stack what user space networking</font>

27
00:02:11,580 --> 00:02:18,030
is is essentially unplugging the network

28
00:02:15,090 --> 00:02:19,950
cards from your<font color="#E5E5E5"> kernel</font><font color="#CCCCCC"> weather whatever</font>

29
00:02:18,030 --> 00:02:23,370
<font color="#E5E5E5">flavor of operating system you're using</font>

30
00:02:19,950 --> 00:02:25,320
<font color="#E5E5E5">and then giving it to a user space</font>

31
00:02:23,370 --> 00:02:27,780
application so pulling it out<font color="#CCCCCC"> of</font><font color="#E5E5E5"> the</font>

32
00:02:25,320 --> 00:02:30,329
kernel<font color="#CCCCCC"> so do those network cards are no</font>

33
00:02:27,780 --> 00:02:34,920
longer<font color="#E5E5E5"> visible to the kernel and giving</font>

34
00:02:30,330 --> 00:02:37,610
it to a user space<font color="#CCCCCC"> application</font><font color="#E5E5E5"> now why</font>

35
00:02:34,920 --> 00:02:39,829
the hell would you do that

36
00:02:37,610 --> 00:02:43,680
the kernel has been around for years

37
00:02:39,830 --> 00:02:46,650
<font color="#E5E5E5">it's really</font><font color="#CCCCCC"> well</font><font color="#E5E5E5"> tested</font><font color="#CCCCCC"> its millions of</font>

38
00:02:43,680 --> 00:02:48,540
lines of code you<font color="#CCCCCC"> know it supports every</font>

39
00:02:46,650 --> 00:02:51,600
<font color="#E5E5E5">network protocol that you could think of</font>

40
00:02:48,540 --> 00:02:53,989
<font color="#E5E5E5">and it's a real Swiss Army knife of</font>

41
00:02:51,600 --> 00:02:56,970
networking<font color="#E5E5E5"> what why why would you pull</font>

42
00:02:53,990 --> 00:02:59,100
the net servicing of the network cards

43
00:02:56,970 --> 00:03:01,770
<font color="#CCCCCC">out from</font><font color="#E5E5E5"> something that's you know so</font>

44
00:02:59,100 --> 00:03:04,260
robust and with such longevity<font color="#CCCCCC"> I'm</font>

45
00:03:01,770 --> 00:03:11,010
giving to an<font color="#E5E5E5"> application of an user</font>

46
00:03:04,260 --> 00:03:12,720
space well if I dialed<font color="#E5E5E5"> the clock back</font><font color="#CCCCCC"> to</font>

47
00:03:11,010 --> 00:03:14,459
nearly like<font color="#E5E5E5"> ten or eleven years ago</font>

48
00:03:12,720 --> 00:03:17,160
<font color="#E5E5E5">that's kind of what we were struggling</font>

49
00:03:14,459 --> 00:03:19,380
with<font color="#E5E5E5"> we were trying to understand what</font>

50
00:03:17,160 --> 00:03:20,910
software networking<font color="#E5E5E5"> performance</font><font color="#CCCCCC"> are</font><font color="#E5E5E5"> how</font>

51
00:03:19,380 --> 00:03:24,329
fast<font color="#E5E5E5"> we could get software networking</font>

52
00:03:20,910 --> 00:03:27,780
<font color="#E5E5E5">performance really to go and we spent a</font>

53
00:03:24,330 --> 00:03:31,739
<font color="#E5E5E5">lot of time trying to trying to optimize</font>

54
00:03:27,780 --> 00:03:33,360
the kernel<font color="#E5E5E5"> the kernel is from the well</font>

55
00:03:31,739 --> 00:03:34,709
you're<font color="#E5E5E5"> talking about the</font><font color="#CCCCCC"> bsd kernel or</font>

56
00:03:33,360 --> 00:03:37,200
you talking<font color="#E5E5E5"> about the Windows kernel</font>

57
00:03:34,709 --> 00:03:39,810
Linux kernel it's a fantastic<font color="#CCCCCC"> invention</font>

58
00:03:37,200 --> 00:03:42,060
it's<font color="#E5E5E5"> got it's a huge amount of code but</font>

59
00:03:39,810 --> 00:03:43,980
<font color="#CCCCCC">that was really the</font><font color="#E5E5E5"> challenge is because</font>

60
00:03:42,060 --> 00:03:46,890
trying to optimize the kernel you were

61
00:03:43,980 --> 00:03:48,630
kind of<font color="#CCCCCC"> pulling on one</font><font color="#E5E5E5"> string in</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> giant</font>

62
00:03:46,890 --> 00:03:50,250
<font color="#CCCCCC">nozzle strings and really not</font>

63
00:03:48,630 --> 00:03:52,620
understanding<font color="#E5E5E5"> where your performance</font><font color="#CCCCCC"> was</font>

64
00:03:50,250 --> 00:03:55,200
going and if anybody has<font color="#CCCCCC"> spent time</font>

65
00:03:52,620 --> 00:03:58,530
trying<font color="#E5E5E5"> to perform as optimized a really</font>

66
00:03:55,200 --> 00:04:00,630
huge<font color="#CCCCCC"> codebase you'll have some wondrous</font>

67
00:03:58,530 --> 00:04:01,120
<font color="#E5E5E5">understanding of the kind of challenges</font>

68
00:04:00,630 --> 00:04:03,629
that

69
00:04:01,120 --> 00:04:06,879
we had at that<font color="#E5E5E5"> time we</font><font color="#CCCCCC"> spent a</font><font color="#E5E5E5"> long time</font>

70
00:04:03,629 --> 00:04:09,489
<font color="#E5E5E5">tuning here tuning there tweaking here</font>

71
00:04:06,879 --> 00:04:11,340
<font color="#E5E5E5">tweaking there but we never really</font><font color="#CCCCCC"> got a</font>

72
00:04:09,489 --> 00:04:15,220
substantive performance improvement

73
00:04:11,340 --> 00:04:17,019
which is<font color="#E5E5E5"> really a great user space</font>

74
00:04:15,220 --> 00:04:19,238
networking allowed us to<font color="#E5E5E5"> do it was a</font>

75
00:04:17,019 --> 00:04:21,820
<font color="#CCCCCC">Greenfield</font><font color="#E5E5E5"> I really</font><font color="#CCCCCC"> like allowed us to</font>

76
00:04:19,238 --> 00:04:23,979
<font color="#E5E5E5">go back to real basics and</font><font color="#CCCCCC"> just start</font>

77
00:04:21,820 --> 00:04:26,110
out<font color="#CCCCCC"> with the vise drivers how quick</font>

78
00:04:23,979 --> 00:04:29,199
<font color="#CCCCCC">could we get</font><font color="#E5E5E5"> the vise drivers with no</font>

79
00:04:26,110 --> 00:04:32,160
<font color="#E5E5E5">network stack to go turns out we could</font>

80
00:04:29,199 --> 00:04:35,800
<font color="#E5E5E5">get them to</font><font color="#CCCCCC"> go really really</font><font color="#E5E5E5"> really fast</font>

81
00:04:32,160 --> 00:04:37,660
<font color="#E5E5E5">and that was it was containing the</font>

82
00:04:35,800 --> 00:04:39,669
problem<font color="#E5E5E5"> statement and</font><font color="#CCCCCC"> you've</font><font color="#E5E5E5"> ever done a</font>

83
00:04:37,660 --> 00:04:42,340
substantial amount of software

84
00:04:39,669 --> 00:04:44,650
benchmarking or<font color="#E5E5E5"> debugging you'll always</font>

85
00:04:42,340 --> 00:04:46,450
find it's<font color="#CCCCCC"> very helpful</font><font color="#E5E5E5"> to reduce the</font>

86
00:04:44,650 --> 00:04:49,030
problem statement just to<font color="#E5E5E5"> that problem</font>

87
00:04:46,450 --> 00:04:51,219
<font color="#E5E5E5">and problematic algorithm and that's</font>

88
00:04:49,030 --> 00:04:54,130
essentially what<font color="#E5E5E5"> we were doing with DP</font>

89
00:04:51,220 --> 00:04:55,690
<font color="#E5E5E5">DK back in the early days was</font><font color="#CCCCCC"> that we</font>

90
00:04:54,130 --> 00:04:58,210
were<font color="#E5E5E5"> really reducing the</font><font color="#CCCCCC"> problem</font>

91
00:04:55,690 --> 00:05:00,100
<font color="#CCCCCC">statement</font><font color="#E5E5E5"> down to something that more</font>

92
00:04:58,210 --> 00:05:02,080
manageable<font color="#E5E5E5"> because the kernel at</font>

93
00:05:00,100 --> 00:05:03,789
millions of times lines of code wasn't

94
00:05:02,080 --> 00:05:07,570
manageable it was too much for<font color="#E5E5E5"> us to</font>

95
00:05:03,789 --> 00:05:09,969
<font color="#E5E5E5">understand all at the same time it also</font>

96
00:05:07,570 --> 00:05:13,030
had to<font color="#CCCCCC"> use</font><font color="#E5E5E5"> we also had a user space tool</font>

97
00:05:09,970 --> 00:05:15,430
<font color="#E5E5E5">chain in user space networking suddenly</font>

98
00:05:13,030 --> 00:05:18,190
<font color="#E5E5E5">we no</font><font color="#CCCCCC"> longer had to use more so esoteric</font>

99
00:05:15,430 --> 00:05:20,320
tools like<font color="#CCCCCC"> K DB we could use</font><font color="#E5E5E5"> something</font>

100
00:05:18,190 --> 00:05:22,900
as more simple like a gdb

101
00:05:20,320 --> 00:05:25,510
if you've<font color="#E5E5E5"> ever I presume everybody room</font>

102
00:05:22,900 --> 00:05:27,760
has played<font color="#E5E5E5"> with gdb over over over the</font>

103
00:05:25,510 --> 00:05:29,979
years<font color="#E5E5E5"> well it's a user space tool chain</font>

104
00:05:27,760 --> 00:05:32,229
it's very very friendly to use and user

105
00:05:29,979 --> 00:05:34,270
space tool chains<font color="#E5E5E5"> are typically</font><font color="#CCCCCC"> very</font>

106
00:05:32,229 --> 00:05:36,460
friendly to use<font color="#E5E5E5"> where as you're</font>

107
00:05:34,270 --> 00:05:38,440
debugging<font color="#CCCCCC"> things in</font><font color="#E5E5E5"> kernel space has a</font>

108
00:05:36,460 --> 00:05:39,849
very high barrier<font color="#CCCCCC"> to entry</font>

109
00:05:38,440 --> 00:05:41,560
typically it's quite hard<font color="#E5E5E5"> as</font>

110
00:05:39,849 --> 00:05:43,570
particularly<font color="#CCCCCC"> ten years ago</font><font color="#E5E5E5"> was quite</font>

111
00:05:41,560 --> 00:05:46,060
hard<font color="#E5E5E5"> to do</font><font color="#CCCCCC"> now things have significantly</font>

112
00:05:43,570 --> 00:05:49,570
<font color="#CCCCCC">improved that way in that</font><font color="#E5E5E5"> respect over</font>

113
00:05:46,060 --> 00:05:52,330
<font color="#E5E5E5">the years most important was a</font>

114
00:05:49,570 --> 00:05:55,650
performance<font color="#E5E5E5"> in that we were able to use</font>

115
00:05:52,330 --> 00:05:58,359
all kinds<font color="#E5E5E5"> of</font><font color="#CCCCCC"> microprocessor</font>

116
00:05:55,650 --> 00:06:01,090
optimizations in user space<font color="#E5E5E5"> that weren't</font>

117
00:05:58,360 --> 00:06:04,330
<font color="#CCCCCC">permitted in the kernel</font><font color="#E5E5E5"> so at that time</font>

118
00:06:01,090 --> 00:06:06,520
<font color="#E5E5E5">and again things have</font><font color="#CCCCCC"> improved</font><font color="#E5E5E5"> since at</font>

119
00:06:04,330 --> 00:06:10,359
<font color="#E5E5E5">that time but at that</font><font color="#CCCCCC"> time</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> were only</font>

120
00:06:06,520 --> 00:06:14,440
<font color="#E5E5E5">really able to use GCC optimization</font>

121
00:06:10,360 --> 00:06:15,249
level<font color="#CCCCCC"> 2 but in user space</font><font color="#E5E5E5"> we could do</font>

122
00:06:14,440 --> 00:06:17,559
all<font color="#E5E5E5"> kinds</font>

123
00:06:15,249 --> 00:06:19,539
stuff<font color="#CCCCCC"> we could use vector instructions</font>

124
00:06:17,559 --> 00:06:22,059
which allowed parallelism<font color="#CCCCCC"> it allowed us</font>

125
00:06:19,539 --> 00:06:23,919
to process<font color="#E5E5E5"> multiple packets at a time we</font>

126
00:06:22,059 --> 00:06:25,509
could do<font color="#E5E5E5"> something called</font><font color="#CCCCCC"> pole mode so</font>

127
00:06:23,919 --> 00:06:27,159
instead of having interrupts turned on

128
00:06:25,509 --> 00:06:29,169
which were quite expensive<font color="#E5E5E5"> we could pull</font>

129
00:06:27,159 --> 00:06:31,269
the pole the<font color="#CCCCCC"> Nick for now</font><font color="#E5E5E5"> or for</font>

130
00:06:29,169 --> 00:06:33,639
<font color="#CCCCCC">networker</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> therefore packets as</font><font color="#E5E5E5"> they</font>

131
00:06:31,269 --> 00:06:35,289
arrived and we could do other things

132
00:06:33,639 --> 00:06:37,059
like<font color="#E5E5E5"> stock context switching because</font>

133
00:06:35,289 --> 00:06:40,089
context switching is<font color="#E5E5E5"> relatively</font>

134
00:06:37,059 --> 00:06:42,219
<font color="#CCCCCC">expensive we could do memory tricks like</font>

135
00:06:40,089 --> 00:06:45,009
<font color="#E5E5E5">improve</font><font color="#CCCCCC"> cache kalokhe ality so that we</font>

136
00:06:42,219 --> 00:06:46,719
made more efficient use of the cache<font color="#E5E5E5"> so</font>

137
00:06:45,009 --> 00:06:49,569
there was all these kind of tricks that

138
00:06:46,719 --> 00:06:51,308
<font color="#E5E5E5">we could build in in user</font><font color="#CCCCCC"> space which</font>

139
00:06:49,569 --> 00:06:54,639
was really<font color="#E5E5E5"> at that time much harder to</font>

140
00:06:51,309 --> 00:06:58,119
do in kernel space<font color="#E5E5E5"> it also gave</font><font color="#CCCCCC"> us a</font>

141
00:06:54,639 --> 00:06:59,829
tool to separate<font color="#E5E5E5"> the control</font><font color="#CCCCCC"> plane the</font>

142
00:06:58,119 --> 00:07:01,299
management plane<font color="#CCCCCC"> and the data plane so</font>

143
00:06:59,829 --> 00:07:03,819
typically if<font color="#E5E5E5"> you're building a network</font>

144
00:07:01,299 --> 00:07:05,799
deploy device<font color="#E5E5E5"> you'll have</font><font color="#CCCCCC"> a control</font>

145
00:07:03,819 --> 00:07:08,110
plane a management plane that you'll

146
00:07:05,799 --> 00:07:09,878
manage the network<font color="#E5E5E5"> device on and then</font>

147
00:07:08,110 --> 00:07:13,419
quite separately<font color="#CCCCCC"> you'll have your</font><font color="#E5E5E5"> data</font>

148
00:07:09,879 --> 00:07:15,789
plane<font color="#E5E5E5"> now if somebody you know and some</font>

149
00:07:13,419 --> 00:07:18,008
nefarious source decides to do<font color="#CCCCCC"> something</font>

150
00:07:15,789 --> 00:07:21,188
like a denial<font color="#E5E5E5"> of</font><font color="#CCCCCC"> service attack on your</font>

151
00:07:18,009 --> 00:07:23,529
data plane and we hear<font color="#CCCCCC"> about those more</font>

152
00:07:21,189 --> 00:07:25,809
frequently unfortunately you don't want

153
00:07:23,529 --> 00:07:27,489
that<font color="#E5E5E5"> to take your whole machine out or</font>

154
00:07:25,809 --> 00:07:30,579
your whole<font color="#E5E5E5"> network your whole network</font>

155
00:07:27,489 --> 00:07:32,828
<font color="#E5E5E5">appliance</font><font color="#CCCCCC"> out so by giving the control</font>

156
00:07:30,579 --> 00:07:35,559
<font color="#E5E5E5">and</font><font color="#CCCCCC"> management plane to the kernel but</font>

157
00:07:32,829 --> 00:07:38,469
then taking the data plane I'm putting

158
00:07:35,559 --> 00:07:41,499
it<font color="#E5E5E5"> in user space protected by an iommu</font>

159
00:07:38,469 --> 00:07:43,449
<font color="#CCCCCC">and an iommu</font><font color="#E5E5E5"> is a piece of hardware</font>

160
00:07:41,499 --> 00:07:45,639
<font color="#CCCCCC">that's typically</font><font color="#E5E5E5"> built into silicon that</font>

161
00:07:43,449 --> 00:07:48,579
gives you very strong and robust

162
00:07:45,639 --> 00:07:50,709
isolation so suddenly<font color="#E5E5E5"> that data plane</font>

163
00:07:48,579 --> 00:07:53,469
can fail and you can spin<font color="#E5E5E5"> it up pack</font><font color="#CCCCCC"> it</font>

164
00:07:50,709 --> 00:07:55,599
back<font color="#E5E5E5"> up again</font><font color="#CCCCCC"> and very very quickly and</font>

165
00:07:53,469 --> 00:07:57,969
it allows you<font color="#E5E5E5"> to implement features like</font>

166
00:07:55,599 --> 00:08:00,849
high availability that gives you a very

167
00:07:57,969 --> 00:08:03,429
<font color="#E5E5E5">very robust system now if you had</font>

168
00:08:00,849 --> 00:08:05,019
something like everything co-located in

169
00:08:03,429 --> 00:08:06,188
your kernel like suppose you had your

170
00:08:05,019 --> 00:08:07,779
control and management<font color="#E5E5E5"> and your data</font>

171
00:08:06,189 --> 00:08:09,729
plane<font color="#E5E5E5"> all correlated</font><font color="#CCCCCC"> care to</font><font color="#E5E5E5"> the kernel</font>

172
00:08:07,779 --> 00:08:11,979
<font color="#CCCCCC">somebody achieves the denial of service</font>

173
00:08:09,729 --> 00:08:14,110
attack<font color="#CCCCCC"> on the kernel</font><font color="#E5E5E5"> and then suddenly</font>

174
00:08:11,979 --> 00:08:15,818
you've lost all three whereas by

175
00:08:14,110 --> 00:08:17,379
achieving separation by putting<font color="#CCCCCC"> your</font>

176
00:08:15,819 --> 00:08:20,169
data<font color="#E5E5E5"> plane in user space you have more</font>

177
00:08:17,379 --> 00:08:22,269
robust system<font color="#CCCCCC"> and then finally on</font>

178
00:08:20,169 --> 00:08:26,198
licensing<font color="#CCCCCC"> oh this isn't</font><font color="#E5E5E5"> true for</font><font color="#CCCCCC"> BSD</font>

179
00:08:22,269 --> 00:08:27,639
<font color="#E5E5E5">obviously but</font><font color="#CCCCCC"> for on for</font><font color="#E5E5E5"> Linux to the</font>

180
00:08:26,199 --> 00:08:30,669
GPL

181
00:08:27,639 --> 00:08:33,729
<font color="#CCCCCC">are the gplv2 nosov linux was definitely</font>

182
00:08:30,669 --> 00:08:35,260
an issue<font color="#E5E5E5"> there was a large group out</font>

183
00:08:33,729 --> 00:08:38,529
<font color="#CCCCCC">there who were really</font><font color="#E5E5E5"> interested</font><font color="#CCCCCC"> in</font>

184
00:08:35,260 --> 00:08:40,990
<font color="#E5E5E5">doing network innovations but did you</font>

185
00:08:38,529 --> 00:08:43,599
know the kind<font color="#E5E5E5"> of increment of the GPL</font>

186
00:08:40,990 --> 00:08:45,430
are having to give and there<font color="#E5E5E5"> you</font><font color="#CCCCCC"> get</font>

187
00:08:43,599 --> 00:08:48,010
their software<font color="#CCCCCC"> back under a GPL was a</font>

188
00:08:45,430 --> 00:08:49,300
challenge<font color="#E5E5E5"> whereas having something of an</font>

189
00:08:48,010 --> 00:08:51,760
user space with more permissive

190
00:08:49,300 --> 00:08:55,149
licensing something like a BSD license

191
00:08:51,760 --> 00:08:57,430
enabled a<font color="#CCCCCC"> lot more innovation and then</font>

192
00:08:55,149 --> 00:09:00,070
finally a human community<font color="#E5E5E5"> of velocity</font>

193
00:08:57,430 --> 00:09:02,649
<font color="#E5E5E5">and this isn't a criticism of anything</font>

194
00:09:00,070 --> 00:09:05,589
it's just<font color="#E5E5E5"> a it's</font><font color="#CCCCCC"> just you know it's just</font>

195
00:09:02,649 --> 00:09:08,019
a<font color="#E5E5E5"> really</font><font color="#CCCCCC"> a reflection of how really</font>

196
00:09:05,589 --> 00:09:10,839
successful communities like FreeBSD<font color="#CCCCCC"> and</font>

197
00:09:08,019 --> 00:09:13,420
Linux have become<font color="#E5E5E5"> FreeBSD and Linux are</font>

198
00:09:10,839 --> 00:09:15,610
everywhere<font color="#CCCCCC"> they're they've</font><font color="#E5E5E5"> got huge huge</font>

199
00:09:13,420 --> 00:09:18,849
penetration and<font color="#E5E5E5"> as far as a consequence</font>

200
00:09:15,610 --> 00:09:21,279
<font color="#CCCCCC">their huge community's really really</font>

201
00:09:18,850 --> 00:09:23,769
huge communities and as a consequence

202
00:09:21,279 --> 00:09:26,189
they move slower they have to be moved

203
00:09:23,769 --> 00:09:29,019
<font color="#E5E5E5">slower they have to be more risk-averse</font>

204
00:09:26,190 --> 00:09:30,880
<font color="#E5E5E5">naturally so typically what you find</font>

205
00:09:29,019 --> 00:09:33,790
<font color="#CCCCCC">were</font><font color="#E5E5E5"> user space neighboring communities</font>

206
00:09:30,880 --> 00:09:36,220
is there are much smaller communities by

207
00:09:33,790 --> 00:09:39,459
nature and they<font color="#E5E5E5"> typically move faster</font>

208
00:09:36,220 --> 00:09:42,610
it's much it's<font color="#CCCCCC"> much</font><font color="#E5E5E5"> easier to</font><font color="#CCCCCC"> go from an</font>

209
00:09:39,459 --> 00:09:46,300
<font color="#CCCCCC">idea to an implementation good</font><font color="#E5E5E5"> lord how</font>

210
00:09:42,610 --> 00:09:48,130
<font color="#E5E5E5">long have I been talking okay so here's</font>

211
00:09:46,300 --> 00:09:51,040
the selection of user space network

212
00:09:48,130 --> 00:09:52,209
stacks<font color="#E5E5E5"> and there's DP DK which is the</font>

213
00:09:51,040 --> 00:09:55,180
granddaddy<font color="#E5E5E5"> of them all</font>

214
00:09:52,209 --> 00:09:57,399
and five<font color="#E5E5E5"> minutes okay we also have</font><font color="#CCCCCC"> V</font>

215
00:09:55,180 --> 00:10:01,089
switches in user<font color="#E5E5E5"> space like an open flow</font>

216
00:09:57,399 --> 00:10:03,100
<font color="#E5E5E5">B switch OBS the obvious</font><font color="#CCCCCC"> DB</font><font color="#E5E5E5"> DK tungsten</font>

217
00:10:01,089 --> 00:10:04,329
fabric and snaps knob is actually

218
00:10:03,100 --> 00:10:07,300
<font color="#E5E5E5">interesting enough developed in the</font>

219
00:10:04,329 --> 00:10:10,140
lower we have<font color="#E5E5E5"> traffic generators for</font>

220
00:10:07,300 --> 00:10:13,089
<font color="#E5E5E5">high-performance traffic generators and</font>

221
00:10:10,140 --> 00:10:14,829
and we also have user space<font color="#E5E5E5"> network exec</font>

222
00:10:13,089 --> 00:10:17,500
<font color="#E5E5E5">and these tend to be completely complete</font>

223
00:10:14,829 --> 00:10:19,660
layer 2 layer 3<font color="#CCCCCC"> layer 4 implementations</font>

224
00:10:17,500 --> 00:10:21,940
we have a grounds<font color="#CCCCCC"> up design</font><font color="#E5E5E5"> call</font><font color="#CCCCCC"> Fido</font>

225
00:10:19,660 --> 00:10:24,550
<font color="#E5E5E5">VPP and then we have</font><font color="#CCCCCC"> another design</font>

226
00:10:21,940 --> 00:10:26,500
<font color="#E5E5E5">called F stack that reuses</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> bsd</font>

227
00:10:24,550 --> 00:10:28,000
kernel<font color="#E5E5E5"> and puts it on top of the DPD</font><font color="#CCCCCC"> k</font>

228
00:10:26,500 --> 00:10:30,250
and then<font color="#CCCCCC"> we have a number of</font>

229
00:10:28,000 --> 00:10:35,680
<font color="#CCCCCC">high-performance</font><font color="#E5E5E5"> tcp implementations</font><font color="#CCCCCC"> sea</font>

230
00:10:30,250 --> 00:10:37,779
<font color="#E5E5E5">star and he's an</font><font color="#CCCCCC"> EM TCP so we've gone</font>

231
00:10:35,680 --> 00:10:39,640
from<font color="#E5E5E5"> the days that we we</font><font color="#CCCCCC"> just offered</font>

232
00:10:37,779 --> 00:10:40,950
back<font color="#E5E5E5"> in the early days a toolkit hey</font>

233
00:10:39,640 --> 00:10:43,319
build your own<font color="#E5E5E5"> network stack</font>

234
00:10:40,950 --> 00:10:45,000
and here's the toolkit to<font color="#CCCCCC"> do it</font><font color="#E5E5E5"> so now</font>

235
00:10:43,320 --> 00:10:46,740
there's a whole community<font color="#E5E5E5"> a whole</font>

236
00:10:45,000 --> 00:10:49,610
diverse community<font color="#CCCCCC"> of different network</font>

237
00:10:46,740 --> 00:10:51,420
stacks that<font color="#CCCCCC"> do layer 2 layer 3 layer 4</font>

238
00:10:49,610 --> 00:10:53,190
implementations in the book that<font color="#E5E5E5"> you can</font>

239
00:10:51,420 --> 00:10:58,979
go pick<font color="#CCCCCC"> up and start</font><font color="#E5E5E5"> innovating on top</font>

240
00:10:53,190 --> 00:11:01,889
of well I<font color="#E5E5E5"> talked</font><font color="#CCCCCC"> about performance what</font>

241
00:10:58,980 --> 00:11:04,949
performance<font color="#E5E5E5"> can you typically get well</font>

242
00:11:01,889 --> 00:11:06,839
<font color="#E5E5E5">you know</font><font color="#CCCCCC"> Indy PDK performance is</font>

243
00:11:04,949 --> 00:11:09,649
typically<font color="#E5E5E5"> measured</font><font color="#CCCCCC"> in the tens of</font>

244
00:11:06,839 --> 00:11:13,290
<font color="#E5E5E5">millions</font><font color="#CCCCCC"> of packets per second per core</font>

245
00:11:09,649 --> 00:11:15,449
so if you throw a single microprocessor

246
00:11:13,290 --> 00:11:17,279
core that none might be an<font color="#CCCCCC"> Intel Core or</font>

247
00:11:15,449 --> 00:11:20,040
it might be<font color="#CCCCCC"> an iron core</font><font color="#E5E5E5"> you can</font>

248
00:11:17,279 --> 00:11:22,439
<font color="#CCCCCC">typically</font><font color="#E5E5E5"> achieve data rates measured in</font>

249
00:11:20,040 --> 00:11:26,219
the tens of<font color="#CCCCCC"> millions of packets a second</font>

250
00:11:22,440 --> 00:11:27,810
which<font color="#CCCCCC"> is very fast we using all of</font><font color="#E5E5E5"> the</font>

251
00:11:26,220 --> 00:11:30,660
optimizations<font color="#E5E5E5"> to talk about earlier and</font>

252
00:11:27,810 --> 00:11:33,599
<font color="#CCCCCC">just as a you know</font><font color="#E5E5E5"> as a proof point</font><font color="#CCCCCC"> I</font>

253
00:11:30,660 --> 00:11:37,920
<font color="#CCCCCC">talked about the performance of ipv4</font>

254
00:11:33,600 --> 00:11:40,500
<font color="#E5E5E5">routing</font><font color="#CCCCCC"> in</font><font color="#E5E5E5"> Fido VPP you can see we get</font>

255
00:11:37,920 --> 00:11:43,620
nearly 18 million packets<font color="#E5E5E5"> a second for</font>

256
00:11:40,500 --> 00:11:45,899
<font color="#E5E5E5">ipv4 routing on VPP on an Intel skylake</font>

257
00:11:43,620 --> 00:11:47,699
server<font color="#E5E5E5"> so performance is typically</font>

258
00:11:45,899 --> 00:11:49,320
measured<font color="#CCCCCC"> in the tens of</font><font color="#E5E5E5"> millions</font><font color="#CCCCCC"> of</font>

259
00:11:47,699 --> 00:11:56,069
packets a second this is really<font color="#E5E5E5"> high</font>

260
00:11:49,320 --> 00:11:59,550
<font color="#E5E5E5">performance stuff</font><font color="#CCCCCC"> ok</font><font color="#E5E5E5"> so finally</font><font color="#CCCCCC"> onto</font>

261
00:11:56,070 --> 00:12:02,760
<font color="#E5E5E5">challenges well user space networking is</font>

262
00:11:59,550 --> 00:12:05,040
<font color="#E5E5E5">somewhat of an island it's you know it</font>

263
00:12:02,760 --> 00:12:06,660
doesn't<font color="#E5E5E5"> intro it doesn't interact well</font>

264
00:12:05,040 --> 00:12:08,760
with kernel space networking and<font color="#E5E5E5"> that's</font>

265
00:12:06,660 --> 00:12:12,000
an<font color="#CCCCCC"> unfortunate thing</font><font color="#E5E5E5"> you know so when</font>

266
00:12:08,760 --> 00:12:13,829
you you IP<font color="#E5E5E5"> do your own IP link you don't</font>

267
00:12:12,000 --> 00:12:16,800
see the user space networking<font color="#E5E5E5"> interface</font>

268
00:12:13,829 --> 00:12:19,019
<font color="#E5E5E5">when you're wrong</font><font color="#CCCCCC"> IP router IP address</font>

269
00:12:16,800 --> 00:12:21,449
you can't manipulate the current the

270
00:12:19,019 --> 00:12:23,250
user space<font color="#E5E5E5"> network stack so the kind of</font>

271
00:12:21,449 --> 00:12:25,199
tool chain that<font color="#CCCCCC"> you</font><font color="#E5E5E5"> use to manage kernel</font>

272
00:12:23,250 --> 00:12:27,149
space networking is not<font color="#E5E5E5"> compatible to</font>

273
00:12:25,199 --> 00:12:29,040
<font color="#CCCCCC">the tool chain that you</font><font color="#E5E5E5"> use to use user</font>

274
00:12:27,149 --> 00:12:31,290
space<font color="#CCCCCC"> there to run user space networking</font>

275
00:12:29,040 --> 00:12:34,349
<font color="#CCCCCC">and that causes</font><font color="#E5E5E5"> you user experience</font>

276
00:12:31,290 --> 00:12:36,660
difficulties<font color="#E5E5E5"> there's a high barrier</font><font color="#CCCCCC"> to</font>

277
00:12:34,350 --> 00:12:38,220
entry so<font color="#CCCCCC"> the achieving these millions of</font>

278
00:12:36,660 --> 00:12:39,089
packets I second I<font color="#E5E5E5"> was talking about</font>

279
00:12:38,220 --> 00:12:40,529
that<font color="#CCCCCC"> earlier</font>

280
00:12:39,089 --> 00:12:42,990
you really have<font color="#E5E5E5"> to understand</font>

281
00:12:40,529 --> 00:12:45,449
microprocessor designed very<font color="#E5E5E5"> well it's</font>

282
00:12:42,990 --> 00:12:47,940
not you<font color="#E5E5E5"> know the barrier to entry is</font>

283
00:12:45,449 --> 00:12:49,920
<font color="#E5E5E5">quite high to understand how you get</font>

284
00:12:47,940 --> 00:12:51,230
really really really<font color="#E5E5E5"> good performance</font><font color="#CCCCCC"> it</font>

285
00:12:49,920 --> 00:12:53,420
just don't get<font color="#E5E5E5"> it out</font>

286
00:12:51,230 --> 00:12:56,180
it takes a bit takes a bit<font color="#CCCCCC"> of</font><font color="#E5E5E5"> work and</font>

287
00:12:53,420 --> 00:12:57,949
<font color="#CCCCCC">then the finally last the last</font><font color="#E5E5E5"> our last</font>

288
00:12:56,180 --> 00:12:59,270
<font color="#CCCCCC">challenge is really portability of API</font>

289
00:12:57,950 --> 00:13:01,700
the affordability in the lack<font color="#CCCCCC"> of</font>

290
00:12:59,270 --> 00:13:04,160
standardization<font color="#CCCCCC"> of API is in</font><font color="#E5E5E5"> that we</font>

291
00:13:01,700 --> 00:13:06,260
have a huge community<font color="#E5E5E5"> but we have</font><font color="#CCCCCC"> very</font>

292
00:13:04,160 --> 00:13:08,660
few standards within<font color="#E5E5E5"> that community</font>

293
00:13:06,260 --> 00:13:10,220
<font color="#CCCCCC">there's a lot of diversity in projects</font>

294
00:13:08,660 --> 00:13:11,810
but the kind<font color="#E5E5E5"> of standards and the</font>

295
00:13:10,220 --> 00:13:14,240
reliable interface is<font color="#CCCCCC"> that the kernel</font>

296
00:13:11,810 --> 00:13:16,270
gives you things like<font color="#E5E5E5"> BSD sockets API</font>

297
00:13:14,240 --> 00:13:19,520
which has been<font color="#E5E5E5"> around since the 70s</font>

298
00:13:16,270 --> 00:13:22,010
<font color="#CCCCCC">early 80s which is you know a</font><font color="#E5E5E5"> very</font><font color="#CCCCCC"> well</font>

299
00:13:19,520 --> 00:13:24,050
<font color="#CCCCCC">known</font><font color="#E5E5E5"> standard or the net link interface</font>

300
00:13:22,010 --> 00:13:25,939
again<font color="#E5E5E5"> like a very</font><font color="#CCCCCC"> non standard</font><font color="#E5E5E5"> we don't</font>

301
00:13:24,050 --> 00:13:28,400
have those kind of standards yet in user

302
00:13:25,940 --> 00:13:30,380
space<font color="#E5E5E5"> networking which is again it's a</font>

303
00:13:28,400 --> 00:13:32,090
kind<font color="#CCCCCC"> of a problem</font><font color="#E5E5E5"> so if I have if I</font>

304
00:13:30,380 --> 00:13:34,430
<font color="#E5E5E5">develop something against</font><font color="#CCCCCC"> F stack which</font>

305
00:13:32,090 --> 00:13:36,680
is<font color="#E5E5E5"> one user space networks like it's not</font>

306
00:13:34,430 --> 00:13:38,599
<font color="#E5E5E5">portable to fight o V P P and that's it</font>

307
00:13:36,680 --> 00:13:45,949
and<font color="#E5E5E5"> that can be a challenge</font><font color="#CCCCCC"> in this of</font>

308
00:13:38,600 --> 00:13:48,290
<font color="#E5E5E5">itself so there's a huge diverse</font>

309
00:13:45,950 --> 00:13:51,080
community<font color="#E5E5E5"> and from these switches to</font>

310
00:13:48,290 --> 00:13:53,480
traffic generators to complete network

311
00:13:51,080 --> 00:13:56,510
stacks from layer<font color="#CCCCCC"> 2 to layer 3 to</font>

312
00:13:53,480 --> 00:13:58,460
develop and<font color="#E5E5E5"> toolkits</font><font color="#CCCCCC"> that</font><font color="#E5E5E5"> are there and</font>

313
00:13:56,510 --> 00:13:59,870
<font color="#CCCCCC">to give you absolutely fantastic</font>

314
00:13:58,460 --> 00:14:02,210
performance<font color="#CCCCCC"> upon user</font><font color="#E5E5E5"> space there are</font>

315
00:13:59,870 --> 00:14:04,340
<font color="#E5E5E5">challenges but</font><font color="#CCCCCC"> we've gone from</font><font color="#E5E5E5"> something</font>

316
00:14:02,210 --> 00:14:06,520
that was hackery in the extreme in the

317
00:14:04,340 --> 00:14:08,960
early days<font color="#E5E5E5"> to</font><font color="#CCCCCC"> something that you know</font>

318
00:14:06,520 --> 00:14:11,180
there's a large<font color="#E5E5E5"> really large community</font>

319
00:14:08,960 --> 00:14:13,040
of users<font color="#E5E5E5"> have built up</font><font color="#CCCCCC"> around and</font><font color="#E5E5E5"> are</font>

320
00:14:11,180 --> 00:14:17,000
consuming and<font color="#E5E5E5"> building and</font><font color="#CCCCCC"> innovating</font>

321
00:14:13,040 --> 00:14:21,520
you're innovating on these things<font color="#E5E5E5"> so any</font>

322
00:14:17,000 --> 00:14:21,520
questions go<font color="#E5E5E5"> ahead sir</font>

323
00:14:32,430 --> 00:14:37,089
so that should I repeat those are two

324
00:14:35,050 --> 00:14:38,829
very<font color="#CCCCCC"> good questions so the</font><font color="#E5E5E5"> first</font>

325
00:14:37,090 --> 00:14:43,030
question<font color="#E5E5E5"> was how do I consider the</font>

326
00:14:38,830 --> 00:14:45,100
<font color="#E5E5E5">future of</font><font color="#CCCCCC"> SR iov</font><font color="#E5E5E5"> and the second question</font>

327
00:14:43,030 --> 00:14:48,730
<font color="#E5E5E5">is what</font><font color="#CCCCCC"> do</font><font color="#E5E5E5"> I</font><font color="#CCCCCC"> do what</font><font color="#E5E5E5"> the hell does</font><font color="#CCCCCC"> this</font>

328
00:14:45,100 --> 00:14:52,870
interact with<font color="#E5E5E5"> a FX DP or X de BPF those</font>

329
00:14:48,730 --> 00:14:56,370
kind of technologies so a FX DP is is a

330
00:14:52,870 --> 00:15:00,820
great innovation<font color="#E5E5E5"> really really it's it's</font>

331
00:14:56,370 --> 00:15:02,680
in some<font color="#CCCCCC"> ways it's it starts to start to</font>

332
00:15:00,820 --> 00:15:06,520
resolve<font color="#E5E5E5"> the challenges I talked about in</font>

333
00:15:02,680 --> 00:15:09,130
the previous previous slide so it<font color="#E5E5E5"> offers</font>

334
00:15:06,520 --> 00:15:12,040
for<font color="#E5E5E5"> the first time an interface lets you</font>

335
00:15:09,130 --> 00:15:13,870
you know<font color="#E5E5E5"> use the kernel stack in a</font>

336
00:15:12,040 --> 00:15:15,939
modular<font color="#CCCCCC"> way but then also deliver</font>

337
00:15:13,870 --> 00:15:19,120
packets to user space in a<font color="#CCCCCC"> very high</font>

338
00:15:15,940 --> 00:15:21,130
perform<font color="#E5E5E5"> of high performance way so that</font>

339
00:15:19,120 --> 00:15:23,260
wasn't achievable before you used<font color="#E5E5E5"> to</font>

340
00:15:21,130 --> 00:15:25,810
have<font color="#E5E5E5"> to run user space</font><font color="#CCCCCC"> to drivers but it</font>

341
00:15:23,260 --> 00:15:27,790
potentially<font color="#CCCCCC"> has the potential to give</font>

342
00:15:25,810 --> 00:15:30,099
you the best of<font color="#E5E5E5"> both</font><font color="#CCCCCC"> worlds</font><font color="#E5E5E5"> and people</font>

343
00:15:27,790 --> 00:15:32,199
are finding that people finding a<font color="#E5E5E5"> very</font>

344
00:15:30,100 --> 00:15:34,420
<font color="#E5E5E5">interesting it might also be able</font><font color="#CCCCCC"> to</font>

345
00:15:32,200 --> 00:15:36,910
<font color="#E5E5E5">give us</font><font color="#CCCCCC"> some kind of compatibility and</font>

346
00:15:34,420 --> 00:15:39,790
interoperability<font color="#E5E5E5"> so a FX DP is very</font>

347
00:15:36,910 --> 00:15:41,890
exciting<font color="#E5E5E5"> and we had the SDN room next</font>

348
00:15:39,790 --> 00:15:43,540
door earlier today and when the AF x DP

349
00:15:41,890 --> 00:15:45,910
press o which was the<font color="#E5E5E5"> first one was on</font>

350
00:15:43,540 --> 00:15:48,400
<font color="#E5E5E5">it was standing room</font><font color="#CCCCCC"> o you know it was</font>

351
00:15:45,910 --> 00:15:50,319
it<font color="#CCCCCC"> was it was it there was a huge</font><font color="#E5E5E5"> amount</font>

352
00:15:48,400 --> 00:15:55,420
of interest<font color="#E5E5E5"> in it in terms of the future</font>

353
00:15:50,320 --> 00:15:57,700
<font color="#CCCCCC">4s or future 4s are iov and I think</font>

354
00:15:55,420 --> 00:16:00,790
we're definitely moving toward moving

355
00:15:57,700 --> 00:16:04,090
<font color="#E5E5E5">towards more granular interfaces so with</font>

356
00:16:00,790 --> 00:16:06,670
VMs<font color="#CCCCCC"> they're kind of</font><font color="#E5E5E5"> 64 bit the 64</font>

357
00:16:04,090 --> 00:16:08,110
virtual functions<font color="#E5E5E5"> are the 128 virtual</font>

358
00:16:06,670 --> 00:16:10,810
functions<font color="#E5E5E5"> that these things typically</font>

359
00:16:08,110 --> 00:16:12,700
give you you know<font color="#CCCCCC"> now we're moving to</font>

360
00:16:10,810 --> 00:16:14,920
containers you're talking about

361
00:16:12,700 --> 00:16:17,830
containers or in the thousands compared

362
00:16:14,920 --> 00:16:19,839
to VMs that<font color="#CCCCCC"> were numbered in the tens so</font>

363
00:16:17,830 --> 00:16:21,910
we're definitely going to<font color="#E5E5E5"> need</font><font color="#CCCCCC"> to see</font>

364
00:16:19,840 --> 00:16:23,620
more grade neural interface a more

365
00:16:21,910 --> 00:16:25,480
lightweight interface in order<font color="#CCCCCC"> to</font>

366
00:16:23,620 --> 00:16:27,940
support those kind of<font color="#E5E5E5"> containerized used</font>

367
00:16:25,480 --> 00:16:29,980
cases<font color="#E5E5E5"> something that gives us our IV</font>

368
00:16:27,940 --> 00:16:31,720
performance but maybe not as heavy a way

369
00:16:29,980 --> 00:16:32,480
as<font color="#CCCCCC"> Esser IV and there's a lot</font><font color="#E5E5E5"> of</font>

370
00:16:31,720 --> 00:16:36,290
innovation<font color="#CCCCCC"> going</font>

371
00:16:32,480 --> 00:16:39,410
another area at the moment<font color="#CCCCCC"> okay I'm at</font>

372
00:16:36,290 --> 00:16:45,679
one minute<font color="#CCCCCC"> over</font><font color="#E5E5E5"> thank you so much</font>

373
00:16:39,410 --> 00:16:45,679
[Applause]

