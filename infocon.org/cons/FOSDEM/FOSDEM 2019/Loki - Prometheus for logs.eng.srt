1
00:00:04,610 --> 00:00:09,290
good right then today we're going<font color="#E5E5E5"> to</font>

2
00:00:06,649 --> 00:00:11,420
talk<font color="#CCCCCC"> about</font><font color="#E5E5E5"> go fauna</font><font color="#CCCCCC"> Loki</font><font color="#E5E5E5"> or just Loki</font>

3
00:00:09,290 --> 00:00:13,610
right so Loki is like<font color="#E5E5E5"> Prometheus but for</font>

4
00:00:11,420 --> 00:00:16,759
logs<font color="#CCCCCC"> I wish I'd never said that</font><font color="#E5E5E5"> because</font>

5
00:00:13,610 --> 00:00:18,290
it's haunting my dreams now so we're

6
00:00:16,759 --> 00:00:19,220
going<font color="#E5E5E5"> to start with</font><font color="#CCCCCC"> we start with some</font>

7
00:00:18,290 --> 00:00:23,570
questions<font color="#E5E5E5"> of an audience participation</font>

8
00:00:19,220 --> 00:00:25,580
<font color="#CCCCCC">who here uses</font><font color="#E5E5E5"> Prometheus excellent we</font>

9
00:00:23,570 --> 00:00:28,369
get a photo<font color="#CCCCCC"> of that</font><font color="#E5E5E5"> please keep your</font>

10
00:00:25,580 --> 00:00:29,720
<font color="#E5E5E5">hands up like like Richie I'm one of the</font>

11
00:00:28,369 --> 00:00:32,058
<font color="#CCCCCC">policías developers as well we've got</font>

12
00:00:29,720 --> 00:00:34,519
<font color="#E5E5E5">Frederick and Gotham and loads of</font>

13
00:00:32,058 --> 00:00:37,809
Prometheus team in the house so thank

14
00:00:34,519 --> 00:00:40,190
you<font color="#CCCCCC"> very much so a bit of</font><font color="#E5E5E5"> a bit of a</font>

15
00:00:37,809 --> 00:00:42,080
overview<font color="#E5E5E5"> of what Loki is so Loki is a</font>

16
00:00:40,190 --> 00:00:44,150
horizontally scalable highly available

17
00:00:42,080 --> 00:00:46,220
<font color="#CCCCCC">multi tenant</font><font color="#E5E5E5"> log aggregation system you</font>

18
00:00:44,150 --> 00:00:49,729
can all<font color="#E5E5E5"> read the slide yeah exactly</font>

19
00:00:46,220 --> 00:00:51,739
I've got them all<font color="#CCCCCC"> we started the project</font>

20
00:00:49,729 --> 00:00:53,449
just after FOSDEM last year actually<font color="#CCCCCC"> I</font>

21
00:00:51,739 --> 00:00:55,489
worked for a company called causal<font color="#CCCCCC"> where</font>

22
00:00:53,449 --> 00:00:57,260
I started a company<font color="#CCCCCC"> called causal</font><font color="#E5E5E5"> and we</font>

23
00:00:55,489 --> 00:00:59,780
joined graph on the labs and and<font color="#E5E5E5"> really</font>

24
00:00:57,260 --> 00:01:04,369
this was the whole idea we had a causal

25
00:00:59,780 --> 00:01:06,409
<font color="#E5E5E5">we launched it</font><font color="#CCCCCC"> a</font><font color="#E5E5E5"> cube</font><font color="#CCCCCC"> con in December</font><font color="#E5E5E5"> it</font>

26
00:01:04,369 --> 00:01:08,960
was crazy like<font color="#E5E5E5"> it's not ready it's super</font>

27
00:01:06,409 --> 00:01:10,760
alpha it's super<font color="#CCCCCC"> early days we launched</font>

28
00:01:08,960 --> 00:01:12,589
it and we spent 12 hours<font color="#E5E5E5"> at the top of</font>

29
00:01:10,760 --> 00:01:14,840
hacking<font color="#E5E5E5"> news we've now got</font><font color="#CCCCCC"> 5,000 github</font>

30
00:01:12,590 --> 00:01:18,770
stars and so<font color="#E5E5E5"> I officially consider that</font>

31
00:01:14,840 --> 00:01:20,450
I have<font color="#CCCCCC"> one the internet now there's I</font>

32
00:01:18,770 --> 00:01:22,789
know<font color="#E5E5E5"> I mean I say that tongue-in-cheek</font>

33
00:01:20,450 --> 00:01:24,650
right<font color="#E5E5E5"> now I'm not</font><font color="#CCCCCC"> that terrible</font><font color="#E5E5E5"> there is</font>

34
00:01:22,790 --> 00:01:26,090
a design doc<font color="#E5E5E5"> we start I like to start</font>

35
00:01:24,650 --> 00:01:28,040
almost every project with<font color="#E5E5E5"> a design doc</font>

36
00:01:26,090 --> 00:01:30,440
<font color="#E5E5E5">and so there's like an</font><font color="#CCCCCC"> eight page design</font>

37
00:01:28,040 --> 00:01:32,120
doc<font color="#CCCCCC"> there</font><font color="#E5E5E5"> really goes into why why we've</font>

38
00:01:30,440 --> 00:01:33,830
<font color="#E5E5E5">done it and and and how it's different</font>

39
00:01:32,120 --> 00:01:35,840
<font color="#E5E5E5">from</font><font color="#CCCCCC"> existing wrong aggregation systems</font>

40
00:01:33,830 --> 00:01:37,039
and so go<font color="#E5E5E5"> and read the design</font><font color="#CCCCCC"> doc semi</font>

41
00:01:35,840 --> 00:01:39,409
comments it's all open source<font color="#E5E5E5"> is all</font>

42
00:01:37,040 --> 00:01:41,600
Apache 2 license<font color="#E5E5E5"> and today I'm just</font>

43
00:01:39,409 --> 00:01:44,860
going<font color="#CCCCCC"> to pick on three three topics</font>

44
00:01:41,600 --> 00:01:44,860
<font color="#E5E5E5">three things that I think makes</font>

45
00:01:50,610 --> 00:01:52,670
you

46
00:01:54,509 --> 00:01:59,520
<font color="#E5E5E5">I said I</font><font color="#CCCCCC"> promised but</font><font color="#E5E5E5"> no key</font><font color="#CCCCCC"> keys</font><font color="#E5E5E5"> you</font>

47
00:01:58,110 --> 00:02:01,619
know seriously keep me honest it's like

48
00:01:59,520 --> 00:02:03,060
I do not mean<font color="#E5E5E5"> to trash-talk elastic</font>

49
00:02:01,619 --> 00:02:05,610
<font color="#E5E5E5">we've tried to take</font><font color="#CCCCCC"> a different</font>

50
00:02:03,060 --> 00:02:07,350
<font color="#CCCCCC">trade-off to elastic and</font><font color="#E5E5E5"> I want to</font>

51
00:02:05,610 --> 00:02:08,970
emphasize the<font color="#E5E5E5"> differences with with by</font>

52
00:02:07,350 --> 00:02:10,590
being<font color="#CCCCCC"> respectful though</font><font color="#E5E5E5"> but you know if</font>

53
00:02:08,970 --> 00:02:12,810
I can't do that then then pull me up on

54
00:02:10,590 --> 00:02:16,190
it<font color="#E5E5E5"> so first first we're going to talk</font>

55
00:02:12,810 --> 00:02:16,190
<font color="#CCCCCC">about</font><font color="#E5E5E5"> how low key is simple to scale</font>

56
00:02:17,060 --> 00:02:22,530
elastic<font color="#CCCCCC"> I I'm not an expert</font><font color="#E5E5E5"> on elastic</font>

57
00:02:20,280 --> 00:02:24,299
by the way and other you<font color="#E5E5E5"> know</font><font color="#CCCCCC"> and Splunk</font>

58
00:02:22,530 --> 00:02:25,709
and other log aggregation systems<font color="#E5E5E5"> but my</font>

59
00:02:24,299 --> 00:02:28,530
understanding<font color="#CCCCCC"> of how</font><font color="#E5E5E5"> they work is they</font>

60
00:02:25,709 --> 00:02:30,090
<font color="#E5E5E5">take your log event and they they split</font>

61
00:02:28,530 --> 00:02:31,530
it up into a bunch of entries<font color="#CCCCCC"> into their</font>

62
00:02:30,090 --> 00:02:33,810
index this is called an inverted<font color="#E5E5E5"> index</font>

63
00:02:31,530 --> 00:02:37,079
<font color="#E5E5E5">and so what you can</font><font color="#CCCCCC"> see in this very</font>

64
00:02:33,810 --> 00:02:38,819
crude diagram<font color="#E5E5E5"> is they've gone into the</font>

65
00:02:37,079 --> 00:02:40,530
log line and they broken<font color="#E5E5E5"> this out into</font>

66
00:02:38,819 --> 00:02:42,060
<font color="#E5E5E5">this set of tuples these</font><font color="#CCCCCC"> for for these</font>

67
00:02:40,530 --> 00:02:44,940
<font color="#E5E5E5">tuples at the bottom and they will point</font>

68
00:02:42,060 --> 00:02:47,370
back to<font color="#E5E5E5"> the log to</font><font color="#CCCCCC"> the log</font><font color="#E5E5E5"> entry what</font>

69
00:02:44,940 --> 00:02:49,380
happens when you do this is you end up

70
00:02:47,370 --> 00:02:52,340
like your index becomes<font color="#E5E5E5"> your data store</font>

71
00:02:49,380 --> 00:02:52,340
so your<font color="#E5E5E5"> indexes</font>

72
00:02:58,220 --> 00:03:00,280
you

73
00:03:03,489 --> 00:03:06,969
the majority of your<font color="#E5E5E5"> nodes and you very</font>

74
00:03:05,319 --> 00:03:09,040
quickly get<font color="#CCCCCC"> to this</font><font color="#E5E5E5"> kind of it's hard to</font>

75
00:03:06,969 --> 00:03:11,500
scale your index becomes<font color="#E5E5E5"> the size of</font>

76
00:03:09,040 --> 00:03:14,379
your logs<font color="#E5E5E5"> and these inverted indexes are</font>

77
00:03:11,500 --> 00:03:16,090
are pretty<font color="#E5E5E5"> tricky</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> scale like all of</font>

78
00:03:14,379 --> 00:03:18,099
<font color="#CCCCCC">the in</font><font color="#E5E5E5"> my</font><font color="#CCCCCC"> opinion at least</font><font color="#E5E5E5"> of course all</font>

79
00:03:16,090 --> 00:03:20,829
<font color="#CCCCCC">of the operational trouble</font><font color="#E5E5E5"> people have</font>

80
00:03:18,099 --> 00:03:22,828
with elastic is because it's<font color="#E5E5E5"> trying to</font>

81
00:03:20,829 --> 00:03:26,349
fundamentally do a very difficult<font color="#E5E5E5"> thing</font>

82
00:03:22,829 --> 00:03:30,030
<font color="#CCCCCC">and so I wanted to not do</font><font color="#E5E5E5"> this I wanted</font>

83
00:03:26,349 --> 00:03:30,030
<font color="#CCCCCC">to avoid a lot of these problems I</font>

84
00:03:36,180 --> 00:03:38,239
you

85
00:03:41,610 --> 00:03:45,360
other things you'll also notice is these

86
00:03:44,250 --> 00:03:47,130
the second

87
00:03:45,360 --> 00:03:49,260
<font color="#E5E5E5">of the tuple the the key in the inverted</font>

88
00:03:47,130 --> 00:03:50,880
<font color="#CCCCCC">index is tends to be very high</font>

89
00:03:49,260 --> 00:03:53,190
cardinality<font color="#CCCCCC"> when it's free text it can</font>

90
00:03:50,880 --> 00:03:55,859
<font color="#E5E5E5">be anything</font><font color="#CCCCCC"> right</font><font color="#E5E5E5"> and</font><font color="#CCCCCC"> high cardinality</font>

91
00:03:53,190 --> 00:03:57,780
indexes are difficult to implement<font color="#E5E5E5"> like</font>

92
00:03:55,860 --> 00:03:59,100
<font color="#E5E5E5">they tend to get very big when you query</font>

93
00:03:57,780 --> 00:04:01,290
them you have to use<font color="#CCCCCC"> special techniques</font>

94
00:03:59,100 --> 00:04:02,340
<font color="#CCCCCC">you know if you come from the Prometheus</font>

95
00:04:01,290 --> 00:04:03,570
world a<font color="#E5E5E5"> lot of you seem to know about</font>

96
00:04:02,340 --> 00:04:05,550
Prometheus so you'll know about<font color="#CCCCCC"> as</font>

97
00:04:03,570 --> 00:04:09,150
always banging on<font color="#E5E5E5"> about don't use high</font>

98
00:04:05,550 --> 00:04:10,650
cardinality label values so so they're

99
00:04:09,150 --> 00:04:12,450
kind<font color="#E5E5E5"> of some of</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> problems what we've</font>

100
00:04:10,650 --> 00:04:15,090
done is try<font color="#E5E5E5"> and build previous</font><font color="#CCCCCC"> four logs</font>

101
00:04:12,450 --> 00:04:17,399
<font color="#CCCCCC">so instead of indexing the log entries</font>

102
00:04:15,090 --> 00:04:19,709
<font color="#E5E5E5">we index a little bit of metadata about</font>

103
00:04:17,399 --> 00:04:22,890
<font color="#E5E5E5">each log stream and you can think about</font>

104
00:04:19,709 --> 00:04:27,060
<font color="#E5E5E5">a log stream as the same as a time</font>

105
00:04:22,890 --> 00:04:29,969
series<font color="#E5E5E5"> so we take time indexed what just</font>

106
00:04:27,060 --> 00:04:31,530
<font color="#E5E5E5">binary data we build these into these</font>

107
00:04:29,970 --> 00:04:33,510
chunks and then we have a small<font color="#CCCCCC"> amount</font>

108
00:04:31,530 --> 00:04:35,880
of metadata pointing to these chunks<font color="#E5E5E5"> and</font>

109
00:04:33,510 --> 00:04:37,650
that small amount of metadata<font color="#E5E5E5"> is in fact</font>

110
00:04:35,880 --> 00:04:40,140
exactly<font color="#E5E5E5"> the same as your Prometheus</font>

111
00:04:37,650 --> 00:04:42,150
labels so the nice<font color="#CCCCCC"> thing about this is</font>

112
00:04:40,140 --> 00:04:44,070
<font color="#CCCCCC">that metadata small its low cardinality</font>

113
00:04:42,150 --> 00:04:45,840
generally is you know many orders of

114
00:04:44,070 --> 00:04:48,120
<font color="#E5E5E5">magnitude</font><font color="#CCCCCC"> smaller</font><font color="#E5E5E5"> than your raw log data</font>

115
00:04:45,840 --> 00:04:49,500
<font color="#E5E5E5">and for scaling that's easy</font><font color="#CCCCCC"> I mean you</font>

116
00:04:48,120 --> 00:04:51,300
can<font color="#E5E5E5"> fit it all on one</font><font color="#CCCCCC"> machine you</font><font color="#E5E5E5"> know</font>

117
00:04:49,500 --> 00:04:53,730
even<font color="#E5E5E5"> a very large scale you can fit on a</font>

118
00:04:51,300 --> 00:04:55,620
single<font color="#E5E5E5"> machine and then your log data is</font>

119
00:04:53,730 --> 00:04:59,010
huge<font color="#E5E5E5"> but we're not indexing the</font>

120
00:04:55,620 --> 00:05:00,690
internals<font color="#E5E5E5"> of it so this kind of the idea</font>

121
00:04:59,010 --> 00:05:02,610
here<font color="#CCCCCC"> is that this</font><font color="#E5E5E5"> makes it super</font><font color="#CCCCCC"> easy</font><font color="#E5E5E5"> to</font>

122
00:05:00,690 --> 00:05:05,490
scale<font color="#E5E5E5"> the streams themselves are just</font>

123
00:05:02,610 --> 00:05:08,100
<font color="#CCCCCC">sharded out across across the nodes</font><font color="#E5E5E5"> in</font>

124
00:05:05,490 --> 00:05:11,130
<font color="#E5E5E5">the cluster</font><font color="#CCCCCC"> this</font><font color="#E5E5E5"> is this is done we've</font>

125
00:05:08,100 --> 00:05:12,510
got<font color="#E5E5E5"> an internal DHT and and dynamo style</font>

126
00:05:11,130 --> 00:05:13,500
replication<font color="#E5E5E5"> logical all the usual stuff</font>

127
00:05:12,510 --> 00:05:16,140
but I'm not really<font color="#E5E5E5"> going to focus on</font>

128
00:05:13,500 --> 00:05:17,580
<font color="#E5E5E5">that too much so</font><font color="#CCCCCC"> that's that's me trying</font>

129
00:05:16,140 --> 00:05:20,370
<font color="#CCCCCC">to give you a bit of</font><font color="#E5E5E5"> an</font><font color="#CCCCCC"> idea of</font><font color="#E5E5E5"> how</font>

130
00:05:17,580 --> 00:05:21,750
we've tried to make<font color="#CCCCCC"> Loki easy to scale</font>

131
00:05:20,370 --> 00:05:24,120
and come on<font color="#CCCCCC"> joining</font><font color="#E5E5E5"> you</font><font color="#CCCCCC"> guys want to</font>

132
00:05:21,750 --> 00:05:25,830
come in<font color="#E5E5E5"> this is</font><font color="#CCCCCC"> a good</font><font color="#E5E5E5"> point to come in</font>

133
00:05:24,120 --> 00:05:30,470
<font color="#E5E5E5">cool you get</font><font color="#CCCCCC"> their space up here so</font>

134
00:05:25,830 --> 00:05:30,469
what's the fun noise

135
00:05:32,889 --> 00:05:36,979
<font color="#E5E5E5">okay so the second</font><font color="#CCCCCC"> point I want</font><font color="#E5E5E5"> to focus</font>

136
00:05:35,360 --> 00:05:40,520
on<font color="#E5E5E5"> is about integrating with existing</font>

137
00:05:36,979 --> 00:05:43,270
<font color="#E5E5E5">tools</font><font color="#CCCCCC"> I am uncle I'm actually on call</font>

138
00:05:40,520 --> 00:05:46,280
right<font color="#CCCCCC"> now I just got paged</font>

139
00:05:43,270 --> 00:05:48,139
but luckily<font color="#CCCCCC"> gotham's here gowtham's here</font>

140
00:05:46,280 --> 00:05:51,770
so he's dealing<font color="#CCCCCC"> with</font><font color="#E5E5E5"> the page but my</font>

141
00:05:48,139 --> 00:05:53,930
usual<font color="#E5E5E5"> uncle</font><font color="#CCCCCC"> routine is I get a page you</font>

142
00:05:51,770 --> 00:05:55,549
know I use slack unfortunately<font color="#E5E5E5"> I get a</font>

143
00:05:53,930 --> 00:05:56,990
page in slack<font color="#E5E5E5"> I go to a dashboard</font><font color="#CCCCCC"> the</font>

144
00:05:55,550 --> 00:05:59,060
dashboard<font color="#CCCCCC"> ring graph</font><font color="#E5E5E5"> honor</font><font color="#CCCCCC"> I work for</font>

145
00:05:56,990 --> 00:06:00,889
<font color="#CCCCCC">co-founder labs I go</font><font color="#E5E5E5"> and fiddle with</font>

146
00:05:59,060 --> 00:06:02,509
<font color="#CCCCCC">those dashboards</font><font color="#E5E5E5"> and normally I find</font><font color="#CCCCCC"> I</font>

147
00:06:00,889 --> 00:06:04,400
end up<font color="#CCCCCC"> copying the query</font><font color="#E5E5E5"> out of the</font>

148
00:06:02,509 --> 00:06:06,319
<font color="#CCCCCC">dashboard and putting it into the</font>

149
00:06:04,400 --> 00:06:08,270
<font color="#CCCCCC">Prometheus UI and fiddling with it</font>

150
00:06:06,319 --> 00:06:10,340
<font color="#E5E5E5">because I like to fiddle and then once</font>

151
00:06:08,270 --> 00:06:11,659
I've kind of found the query<font color="#CCCCCC"> that really</font>

152
00:06:10,340 --> 00:06:13,729
highlights the problem maybe it's high

153
00:06:11,659 --> 00:06:14,840
latency maybe it's a higher array<font color="#CCCCCC"> maybe</font>

154
00:06:13,729 --> 00:06:17,659
I nailed it<font color="#E5E5E5"> down to the particular</font>

155
00:06:14,840 --> 00:06:20,330
service<font color="#CCCCCC"> or</font><font color="#E5E5E5"> the</font><font color="#CCCCCC"> hosts or whatever I then</font>

156
00:06:17,659 --> 00:06:22,280
<font color="#E5E5E5">want to go look at the</font><font color="#CCCCCC"> logs</font><font color="#E5E5E5"> for that</font>

157
00:06:20,330 --> 00:06:24,318
service that<font color="#E5E5E5"> hosts that time range and</font>

158
00:06:22,280 --> 00:06:27,229
and normally I'm using a separate log

159
00:06:24,319 --> 00:06:28,310
aggregation system this one<font color="#CCCCCC"> I can't feel</font>

160
00:06:27,229 --> 00:06:29,779
like me I can't<font color="#CCCCCC"> remember which one that</font>

161
00:06:28,310 --> 00:06:31,430
was<font color="#E5E5E5"> but you have</font><font color="#CCCCCC"> to</font><font color="#E5E5E5"> translate the query</font>

162
00:06:29,779 --> 00:06:34,610
into that log aggregations query

163
00:06:31,430 --> 00:06:36,440
language<font color="#CCCCCC"> and so I've now had</font><font color="#E5E5E5"> to copy the</font>

164
00:06:34,610 --> 00:06:37,370
query once<font color="#E5E5E5"> translate it again and maybe</font>

165
00:06:36,440 --> 00:06:39,620
you know maybe<font color="#E5E5E5"> I'm going to do</font>

166
00:06:37,370 --> 00:06:41,150
distributed tracing and I'm going to

167
00:06:39,620 --> 00:06:42,529
<font color="#E5E5E5">translate the query and translate the</font>

168
00:06:41,150 --> 00:06:44,359
selectors again finally I'm going<font color="#E5E5E5"> to do</font>

169
00:06:42,529 --> 00:06:46,340
a fix<font color="#E5E5E5"> and it's all of this context</font>

170
00:06:44,360 --> 00:06:48,110
switching that's expensive<font color="#E5E5E5"> or in my</font>

171
00:06:46,340 --> 00:06:50,779
opinion<font color="#CCCCCC"> you know it's what slows me down</font>

172
00:06:48,110 --> 00:06:53,270
when I'm responding to<font color="#E5E5E5"> alerts so I</font>

173
00:06:50,779 --> 00:06:54,710
wanted<font color="#E5E5E5"> to fix that so a quick</font><font color="#CCCCCC"> overview</font>

174
00:06:53,270 --> 00:06:57,349
all very familiar with<font color="#CCCCCC"> prometheus a</font>

175
00:06:54,710 --> 00:07:00,520
quick overview Prometheus has identifies

176
00:06:57,349 --> 00:07:03,710
and has time indexed values<font color="#CCCCCC"> they're the</font>

177
00:07:00,520 --> 00:07:06,229
<font color="#E5E5E5">timestamps of milliseconds in 64 values</font>

178
00:07:03,710 --> 00:07:08,210
<font color="#E5E5E5">of float64 Prometheus emphasizes</font>

179
00:07:06,229 --> 00:07:10,520
simplicity like<font color="#CCCCCC"> a really</font><font color="#E5E5E5"> easy to</font>

180
00:07:08,210 --> 00:07:12,198
understand data model<font color="#E5E5E5"> the</font><font color="#CCCCCC"> identifier is</font>

181
00:07:10,520 --> 00:07:14,299
this kind of bag of label value pairs

182
00:07:12,199 --> 00:07:16,129
you<font color="#CCCCCC"> can think of</font><font color="#E5E5E5"> it as a map or think of</font>

183
00:07:14,300 --> 00:07:18,020
<font color="#E5E5E5">it as a bag of label value pairs</font><font color="#CCCCCC"> and</font>

184
00:07:16,129 --> 00:07:20,120
when you want to<font color="#E5E5E5"> come and do a query</font><font color="#CCCCCC"> you</font>

185
00:07:18,020 --> 00:07:21,770
get to use selectors<font color="#E5E5E5"> on those labels to</font>

186
00:07:20,120 --> 00:07:23,270
pick the time series<font color="#CCCCCC"> you want</font><font color="#E5E5E5"> to use in</font>

187
00:07:21,770 --> 00:07:26,000
your<font color="#E5E5E5"> query</font><font color="#CCCCCC"> so you might say oh I want</font>

188
00:07:23,270 --> 00:07:28,698
<font color="#E5E5E5">all</font><font color="#CCCCCC"> of the time C's</font><font color="#E5E5E5"> for this job for</font>

189
00:07:26,000 --> 00:07:31,039
this metric coming from this host<font color="#E5E5E5"> or all</font>

190
00:07:28,699 --> 00:07:33,229
<font color="#CCCCCC">of the time series</font><font color="#E5E5E5"> for this job for this</font>

191
00:07:31,039 --> 00:07:36,740
metric that<font color="#E5E5E5"> have status code you know</font><font color="#CCCCCC"> v</font>

192
00:07:33,229 --> 00:07:38,779
dot so all of the 500s<font color="#E5E5E5"> so in the way</font>

193
00:07:36,740 --> 00:07:41,539
Prometheus gathers these labels<font color="#E5E5E5"> is it</font>

194
00:07:38,779 --> 00:07:42,919
when this<font color="#E5E5E5"> is a kubernetes example if</font>

195
00:07:41,539 --> 00:07:44,210
you're<font color="#E5E5E5"> not using cube</font><font color="#CCCCCC"> Letty's this works</font>

196
00:07:42,919 --> 00:07:46,460
<font color="#E5E5E5">similarly with like</font><font color="#CCCCCC"> com</font>

197
00:07:44,210 --> 00:07:49,340
so DNS you name it there's loads of

198
00:07:46,460 --> 00:07:51,258
<font color="#CCCCCC">service discovery integrations</font><font color="#E5E5E5"> so from</font>

199
00:07:49,340 --> 00:07:53,630
<font color="#E5E5E5">EVs will talk to kubernetes it will</font>

200
00:07:51,259 --> 00:07:55,550
gather<font color="#E5E5E5"> a big list of all of the pods or</font>

201
00:07:53,630 --> 00:07:57,199
services or the you<font color="#E5E5E5"> know actually not</font>

202
00:07:55,550 --> 00:07:59,960
deployments with pods or services or

203
00:07:57,199 --> 00:08:01,729
nodes or<font color="#E5E5E5"> you name it like most of the</font>

204
00:07:59,960 --> 00:08:03,440
objects in the kubernetes object model

205
00:08:01,729 --> 00:08:06,530
<font color="#E5E5E5">they'll gather that big list</font><font color="#CCCCCC"> you then</font>

206
00:08:03,440 --> 00:08:08,000
get<font color="#E5E5E5"> to do some munging</font><font color="#CCCCCC"> I've been told</font><font color="#E5E5E5"> I</font>

207
00:08:06,530 --> 00:08:10,789
use too<font color="#E5E5E5"> many like colloquial English</font>

208
00:08:08,000 --> 00:08:15,530
<font color="#E5E5E5">terms so munging is just like fiddling</font>

209
00:08:10,789 --> 00:08:16,940
but<font color="#CCCCCC"> button code</font><font color="#E5E5E5"> so in</font><font color="#CCCCCC"> Prometheus</font><font color="#E5E5E5"> this is</font>

210
00:08:15,530 --> 00:08:19,309
called relabeling<font color="#E5E5E5"> there's a series of</font>

211
00:08:16,940 --> 00:08:20,930
<font color="#E5E5E5">rules you execute against the</font><font color="#CCCCCC"> data you</font>

212
00:08:19,310 --> 00:08:22,460
get back from<font color="#E5E5E5"> service discovery where</font>

213
00:08:20,930 --> 00:08:24,860
you can manage it<font color="#CCCCCC"> into the thing you</font>

214
00:08:22,460 --> 00:08:26,810
like and so a<font color="#CCCCCC"> good example in all of the</font>

215
00:08:24,860 --> 00:08:28,310
Prometheus installs<font color="#CCCCCC"> that</font><font color="#E5E5E5"> I've used or</font>

216
00:08:26,810 --> 00:08:32,000
that<font color="#E5E5E5"> I've worked on or installed myself</font>

217
00:08:28,310 --> 00:08:35,029
<font color="#CCCCCC">I tend to</font><font color="#E5E5E5"> include the</font><font color="#CCCCCC"> namespace of the</font>

218
00:08:32,000 --> 00:08:36,649
job in the<font color="#CCCCCC"> job name and this</font><font color="#E5E5E5"> is because</font>

219
00:08:35,029 --> 00:08:40,130
when I first<font color="#E5E5E5"> started using from easiest</font>

220
00:08:36,649 --> 00:08:42,409
<font color="#E5E5E5">in kubernetes</font><font color="#CCCCCC"> I would</font><font color="#E5E5E5"> quite often want</font>

221
00:08:40,130 --> 00:08:44,029
to<font color="#E5E5E5"> see the you</font><font color="#CCCCCC"> know</font><font color="#E5E5E5"> the error rate of</font><font color="#CCCCCC"> a</font>

222
00:08:42,409 --> 00:08:45,319
particular<font color="#E5E5E5"> service so I do job equals</font>

223
00:08:44,029 --> 00:08:47,209
service you know blah blah blah blah

224
00:08:45,320 --> 00:08:49,190
blah<font color="#CCCCCC"> and</font><font color="#E5E5E5"> I'd accidentally aggregate</font>

225
00:08:47,209 --> 00:08:51,410
together<font color="#E5E5E5"> the error rate from my dev</font>

226
00:08:49,190 --> 00:08:53,690
namespace in my prod namespace into a

227
00:08:51,410 --> 00:08:55,250
single thing<font color="#CCCCCC"> I didn't want to do that</font><font color="#E5E5E5"> so</font>

228
00:08:53,690 --> 00:08:57,080
I<font color="#E5E5E5"> started to include the namespace name</font>

229
00:08:55,250 --> 00:08:59,120
dev<font color="#E5E5E5"> or pod</font><font color="#CCCCCC"> in the job name</font><font color="#E5E5E5"> and it</font>

230
00:08:57,080 --> 00:09:01,580
stopped making these mistakes<font color="#CCCCCC"> now I'm</font>

231
00:08:59,120 --> 00:09:03,860
not advising<font color="#CCCCCC"> everyone</font><font color="#E5E5E5"> to do that this is</font>

232
00:09:01,580 --> 00:09:05,209
<font color="#CCCCCC">what I call an opinion and</font><font color="#E5E5E5"> I really like</font>

233
00:09:03,860 --> 00:09:07,070
about relabeling as it allows me<font color="#E5E5E5"> to</font>

234
00:09:05,209 --> 00:09:10,189
express my opinions and<font color="#E5E5E5"> consistently</font>

235
00:09:07,070 --> 00:09:11,870
apply them within my<font color="#CCCCCC"> organization so</font>

236
00:09:10,190 --> 00:09:13,940
then you end up<font color="#CCCCCC"> with a set of targets</font>

237
00:09:11,870 --> 00:09:15,920
<font color="#CCCCCC">and a set of</font><font color="#E5E5E5"> labels after the relabeling</font>

238
00:09:13,940 --> 00:09:18,260
<font color="#E5E5E5">metrics get pulled from those targets</font>

239
00:09:15,920 --> 00:09:19,520
<font color="#E5E5E5">and those labels get added to the labels</font>

240
00:09:18,260 --> 00:09:21,620
for the metrics<font color="#CCCCCC"> that you've pulled</font><font color="#E5E5E5"> from</font>

241
00:09:19,520 --> 00:09:23,329
<font color="#E5E5E5">that target so this is</font><font color="#CCCCCC"> sometimes you'll</font>

242
00:09:21,620 --> 00:09:24,680
hear<font color="#E5E5E5"> us say target</font><font color="#CCCCCC"> labels and metric</font>

243
00:09:23,330 --> 00:09:27,770
labels and that's kind of what we mean

244
00:09:24,680 --> 00:09:29,989
so let's have a look at<font color="#E5E5E5"> low key well</font>

245
00:09:27,770 --> 00:09:31,550
this looks<font color="#E5E5E5"> familiar</font><font color="#CCCCCC"> I kind of just</font>

246
00:09:29,990 --> 00:09:34,310
<font color="#E5E5E5">copied the previous slide low key is</font>

247
00:09:31,550 --> 00:09:37,189
time-stamped<font color="#CCCCCC"> log streams</font><font color="#E5E5E5"> the difference</font>

248
00:09:34,310 --> 00:09:39,589
is the<font color="#CCCCCC"> timestamps are a bit more a</font><font color="#E5E5E5"> bit</font>

249
00:09:37,190 --> 00:09:40,640
more precise<font color="#CCCCCC"> I should have to check</font><font color="#E5E5E5"> that</font>

250
00:09:39,589 --> 00:09:42,680
<font color="#E5E5E5">I can't remember what we actually did</font>

251
00:09:40,640 --> 00:09:44,360
and the values a<font color="#CCCCCC"> by trace</font><font color="#E5E5E5"> but the</font>

252
00:09:42,680 --> 00:09:46,550
identifies are the same<font color="#CCCCCC"> they're bags of</font>

253
00:09:44,360 --> 00:09:49,520
label value pairs<font color="#E5E5E5"> and how</font><font color="#CCCCCC"> does how do we</font>

254
00:09:46,550 --> 00:09:52,219
build<font color="#E5E5E5"> these these labels</font><font color="#CCCCCC"> well we have</font>

255
00:09:49,520 --> 00:09:54,439
this job called prom<font color="#CCCCCC"> tail and this is a</font>

256
00:09:52,220 --> 00:09:56,110
really descriptive name because it's the

257
00:09:54,440 --> 00:09:57,940
Prometheus log<font color="#CCCCCC"> tailor</font>

258
00:09:56,110 --> 00:10:00,640
it uses<font color="#CCCCCC"> the prometheus service discovery</font>

259
00:09:57,940 --> 00:10:02,620
code<font color="#E5E5E5"> to talk to kubernetes it uses the</font>

260
00:10:00,640 --> 00:10:04,720
same relabeling<font color="#CCCCCC"> codebase and u</font><font color="#E5E5E5"> s-- uses</font>

261
00:10:02,620 --> 00:10:07,510
<font color="#CCCCCC">prometheus as a library to build a set</font>

262
00:10:04,720 --> 00:10:10,000
of<font color="#E5E5E5"> labels</font><font color="#CCCCCC"> for your</font><font color="#E5E5E5"> locks</font><font color="#CCCCCC"> and then the</font>

263
00:10:07,510 --> 00:10:12,610
quick<font color="#E5E5E5"> little hack we do is inside that</font>

264
00:10:10,000 --> 00:10:14,170
label set you put a file glob that

265
00:10:12,610 --> 00:10:15,870
specifies<font color="#E5E5E5"> the files in</font><font color="#CCCCCC"> your local</font><font color="#E5E5E5"> file</font>

266
00:10:14,170 --> 00:10:17,800
<font color="#CCCCCC">system that</font><font color="#E5E5E5"> you want</font><font color="#CCCCCC"> prawn tail to tail</font>

267
00:10:15,870 --> 00:10:20,020
<font color="#CCCCCC">prompt air</font><font color="#E5E5E5"> will then go and tell those</font>

268
00:10:17,800 --> 00:10:22,209
files<font color="#CCCCCC"> you know that</font><font color="#E5E5E5"> apps should read</font>

269
00:10:20,020 --> 00:10:23,980
files<font color="#CCCCCC"> they're tell those files</font><font color="#E5E5E5"> add those</font>

270
00:10:22,210 --> 00:10:26,620
labels to those streams<font color="#E5E5E5"> and send them to</font>

271
00:10:23,980 --> 00:10:29,920
<font color="#CCCCCC">Loki now the nice thing about this is</font>

272
00:10:26,620 --> 00:10:32,410
you end up<font color="#E5E5E5"> with</font><font color="#CCCCCC"> exactly the same label</font>

273
00:10:29,920 --> 00:10:34,510
set like systematically exactly the same

274
00:10:32,410 --> 00:10:36,550
<font color="#E5E5E5">label set for metrics coming from the</font>

275
00:10:34,510 --> 00:10:39,040
target<font color="#E5E5E5"> and logs coming from that</font><font color="#CCCCCC"> target</font>

276
00:10:36,550 --> 00:10:40,120
like this is not arranged by<font color="#E5E5E5"> I can see</font>

277
00:10:39,040 --> 00:10:40,449
someone's<font color="#CCCCCC"> already really happy about</font>

278
00:10:40,120 --> 00:10:44,050
<font color="#E5E5E5">that</font>

279
00:10:40,450 --> 00:10:45,970
this is not arranged<font color="#E5E5E5"> you know in some</font>

280
00:10:44,050 --> 00:10:47,349
fluently<font color="#E5E5E5"> confid to look similar or look</font>

281
00:10:45,970 --> 00:10:48,940
the<font color="#E5E5E5"> same these are identical</font><font color="#CCCCCC"> they're</font>

282
00:10:47,350 --> 00:10:50,770
using the same service discovery code

283
00:10:48,940 --> 00:10:53,080
<font color="#E5E5E5">they're</font><font color="#CCCCCC"> using the</font><font color="#E5E5E5"> same relabeling code</font>

284
00:10:50,770 --> 00:10:56,650
and this enables really cool workflows

285
00:10:53,080 --> 00:10:58,390
<font color="#CCCCCC">or I have terrible well resolution</font><font color="#E5E5E5"> I'll</font>

286
00:10:56,650 --> 00:11:00,189
show<font color="#CCCCCC"> it in</font><font color="#E5E5E5"> a minute</font><font color="#CCCCCC"> but basically on the</font>

287
00:10:58,390 --> 00:11:02,439
<font color="#E5E5E5">left you've got some Prometheus beta and</font>

288
00:11:00,190 --> 00:11:04,540
the labels are job equals blah blah blah

289
00:11:02,440 --> 00:11:06,040
<font color="#E5E5E5">and name equals that</font><font color="#CCCCCC"> and on the right</font>

290
00:11:04,540 --> 00:11:08,199
we've got the<font color="#E5E5E5"> same label job equals blah</font>

291
00:11:06,040 --> 00:11:09,550
blah blah tempo dev Loki was called

292
00:11:08,200 --> 00:11:12,490
tempo for<font color="#E5E5E5"> a while</font>

293
00:11:09,550 --> 00:11:14,050
tempo dev<font color="#CCCCCC"> prom tale and you can see the</font>

294
00:11:12,490 --> 00:11:15,940
labels the same and now you can see

295
00:11:14,050 --> 00:11:19,270
<font color="#CCCCCC">side-by-side logs of metrics from the</font>

296
00:11:15,940 --> 00:11:20,740
same target for the same time range and

297
00:11:19,270 --> 00:11:22,810
so coming<font color="#E5E5E5"> back to the slide I started</font>

298
00:11:20,740 --> 00:11:25,180
with<font color="#CCCCCC"> you can now see how</font><font color="#E5E5E5"> kind of graph</font>

299
00:11:22,810 --> 00:11:27,640
honor is encroaching<font color="#E5E5E5"> into the rest of</font>

300
00:11:25,180 --> 00:11:29,290
this<font color="#E5E5E5"> workflow we can you know handle our</font>

301
00:11:27,640 --> 00:11:31,360
alerts<font color="#E5E5E5"> and slack go to a</font><font color="#CCCCCC"> dashboard</font>

302
00:11:29,290 --> 00:11:32,709
<font color="#E5E5E5">within</font><font color="#CCCCCC"> the dashboard</font><font color="#E5E5E5"> now in the final</font><font color="#CCCCCC"> we</font>

303
00:11:31,360 --> 00:11:33,850
<font color="#E5E5E5">gonna launch and refine</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> six I</font><font color="#CCCCCC"> think</font>

304
00:11:32,710 --> 00:11:36,240
the beta came out last week

305
00:11:33,850 --> 00:11:39,520
<font color="#E5E5E5">full launch would be in a month or so</font>

306
00:11:36,240 --> 00:11:41,290
<font color="#CCCCCC">you can</font><font color="#E5E5E5"> now click on it on a on a panel</font>

307
00:11:39,520 --> 00:11:43,210
and go<font color="#E5E5E5"> to what</font><font color="#CCCCCC"> we call the explore mode</font>

308
00:11:41,290 --> 00:11:46,959
which basically<font color="#E5E5E5"> extracts out the query</font>

309
00:11:43,210 --> 00:11:48,400
<font color="#E5E5E5">into a more Prometheus like UI with tab</font>

310
00:11:46,960 --> 00:11:51,400
completion and<font color="#E5E5E5"> all those fancy</font><font color="#CCCCCC"> things</font>

311
00:11:48,400 --> 00:11:52,510
you to fiddle<font color="#E5E5E5"> with</font><font color="#CCCCCC"> your queries</font><font color="#E5E5E5"> and then</font>

312
00:11:51,400 --> 00:11:53,920
once you've fiddled with that query<font color="#E5E5E5"> a</font>

313
00:11:52,510 --> 00:11:55,750
click of<font color="#E5E5E5"> a button</font><font color="#CCCCCC"> because we've</font><font color="#E5E5E5"> got the</font>

314
00:11:53,920 --> 00:11:59,079
consistent labels<font color="#CCCCCC"> a click of a button</font>

315
00:11:55,750 --> 00:12:00,850
you<font color="#CCCCCC"> can</font><font color="#E5E5E5"> see the logs for those jobs and</font>

316
00:11:59,080 --> 00:12:03,470
this<font color="#E5E5E5"> also kind</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> gives you an idea of</font>

317
00:12:00,850 --> 00:12:07,190
what I want<font color="#E5E5E5"> to do next as well</font>

318
00:12:03,470 --> 00:12:08,750
so we've covered how I try to<font color="#E5E5E5"> make</font><font color="#CCCCCC"> Loki</font>

319
00:12:07,190 --> 00:12:10,040
easy to scale<font color="#E5E5E5"> we've covered how I've</font>

320
00:12:08,750 --> 00:12:13,070
tried to integrate<font color="#E5E5E5"> it with</font><font color="#CCCCCC"> existing</font>

321
00:12:10,040 --> 00:12:15,589
tools or<font color="#CCCCCC"> Prometheus and go</font><font color="#E5E5E5"> fauna</font><font color="#CCCCCC"> and now</font>

322
00:12:13,070 --> 00:12:17,530
I've kind<font color="#CCCCCC"> of got you know a</font><font color="#E5E5E5"> grab bag of</font>

323
00:12:15,590 --> 00:12:20,720
<font color="#E5E5E5">other stuff which I call cloud native</font>

324
00:12:17,530 --> 00:12:22,040
<font color="#E5E5E5">lots of logos it</font><font color="#CCCCCC"> ships as a container</font>

325
00:12:20,720 --> 00:12:23,780
<font color="#CCCCCC">although</font><font color="#E5E5E5"> actually I do most of my</font>

326
00:12:22,040 --> 00:12:27,140
<font color="#E5E5E5">development on my Mac like I tried to</font>

327
00:12:23,780 --> 00:12:30,020
focus<font color="#E5E5E5"> with Loki on making it easy to run</font>

328
00:12:27,140 --> 00:12:31,130
locally<font color="#E5E5E5"> so making it not depend on cloud</font>

329
00:12:30,020 --> 00:12:32,540
storage<font color="#CCCCCC"> even though it says here it</font>

330
00:12:31,130 --> 00:12:34,670
depends<font color="#E5E5E5"> on cloud</font><font color="#CCCCCC"> storage you also</font><font color="#E5E5E5"> have a</font>

331
00:12:32,540 --> 00:12:36,020
local mode<font color="#E5E5E5"> using bolt DB and just</font>

332
00:12:34,670 --> 00:12:37,880
storing the logs<font color="#E5E5E5"> and files in the file</font>

333
00:12:36,020 --> 00:12:39,230
system<font color="#CCCCCC"> so you can run</font><font color="#E5E5E5"> it on</font><font color="#CCCCCC"> your on your</font>

334
00:12:37,880 --> 00:12:41,150
laptop<font color="#CCCCCC"> you can run it on Linux on your</font>

335
00:12:39,230 --> 00:12:44,630
Mac there's even a PR to make it compile

336
00:12:41,150 --> 00:12:46,850
on<font color="#E5E5E5"> Windows</font><font color="#CCCCCC"> system</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> linux kubernetes</font>

337
00:12:44,630 --> 00:12:48,850
native we ship you know our target<font color="#CCCCCC"> is</font>

338
00:12:46,850 --> 00:12:52,300
kubernetes so a lot of<font color="#E5E5E5"> this</font><font color="#CCCCCC"> has been</font>

339
00:12:48,850 --> 00:12:54,560
<font color="#E5E5E5">focused on gathering logs from pods</font>

340
00:12:52,300 --> 00:12:56,510
<font color="#CCCCCC">we've done all the integrations with</font>

341
00:12:54,560 --> 00:12:58,099
what we've used<font color="#E5E5E5"> all of Prometheus's</font>

342
00:12:56,510 --> 00:13:00,140
integrations with service<font color="#E5E5E5"> discovery</font>

343
00:12:58,100 --> 00:13:01,580
we've built a<font color="#CCCCCC"> helm track</font><font color="#E5E5E5"> we use</font>

344
00:13:00,140 --> 00:13:03,199
something called case on it which is<font color="#CCCCCC"> a</font>

345
00:13:01,580 --> 00:13:05,480
<font color="#E5E5E5">really</font><font color="#CCCCCC"> cool config management system for</font>

346
00:13:03,200 --> 00:13:06,800
kubernetes<font color="#E5E5E5"> and we basically made</font><font color="#CCCCCC"> it</font>

347
00:13:05,480 --> 00:13:10,670
really<font color="#E5E5E5"> easy to get started</font><font color="#CCCCCC"> with</font>

348
00:13:06,800 --> 00:13:11,780
kubernetes one of the things<font color="#CCCCCC"> i want</font><font color="#E5E5E5"> to</font>

349
00:13:10,670 --> 00:13:13,849
<font color="#E5E5E5">talk about in a</font><font color="#CCCCCC"> bit</font><font color="#E5E5E5"> more depth is this</font>

350
00:13:11,780 --> 00:13:15,319
optional option<font color="#CCCCCC"> allottee around micro</font>

351
00:13:13,850 --> 00:13:17,270
services so<font color="#E5E5E5"> I'll come back to that and</font>

352
00:13:15,320 --> 00:13:20,480
then finally<font color="#CCCCCC"> cloud</font><font color="#E5E5E5"> storage we've built</font>

353
00:13:17,270 --> 00:13:22,010
<font color="#E5E5E5">low key to use things like s3 GCS so you</font>

354
00:13:20,480 --> 00:13:24,740
<font color="#E5E5E5">run it and it</font><font color="#CCCCCC"> will store</font><font color="#E5E5E5"> the chunks the</font>

355
00:13:22,010 --> 00:13:27,890
chunked up compressed time<font color="#E5E5E5"> index logs in</font>

356
00:13:24,740 --> 00:13:29,720
those storage right now we need an index

357
00:13:27,890 --> 00:13:31,910
a place to put the<font color="#CCCCCC"> index as well</font><font color="#E5E5E5"> so we</font>

358
00:13:29,720 --> 00:13:34,610
use big table or<font color="#CCCCCC"> dynamodb</font><font color="#E5E5E5"> if you run it</font>

359
00:13:31,910 --> 00:13:36,199
<font color="#CCCCCC">locally we can use</font><font color="#E5E5E5"> bolt DB and my plan</font>

360
00:13:34,610 --> 00:13:38,780
in the<font color="#E5E5E5"> next few</font><font color="#CCCCCC"> weeks</font><font color="#E5E5E5"> is to have a</font>

361
00:13:36,200 --> 00:13:41,390
version<font color="#E5E5E5"> which writes the data to bolt DB</font>

362
00:13:38,780 --> 00:13:43,970
and then flushes that bolt DB file

363
00:13:41,390 --> 00:13:46,540
effectively to<font color="#CCCCCC"> s3 to completely cut</font><font color="#E5E5E5"> out</font>

364
00:13:43,970 --> 00:13:48,800
the dependency on<font color="#E5E5E5"> dynamo DB in BigTable</font>

365
00:13:46,540 --> 00:13:50,810
so let's come back to this optionality

366
00:13:48,800 --> 00:13:54,439
around micro services<font color="#E5E5E5"> this</font><font color="#CCCCCC"> is a big</font>

367
00:13:50,810 --> 00:13:55,729
slide<font color="#CCCCCC"> low key</font><font color="#E5E5E5"> under the covers is</font>

368
00:13:54,440 --> 00:13:57,410
actually based on<font color="#E5E5E5"> a</font><font color="#CCCCCC"> previous project</font>

369
00:13:55,730 --> 00:13:59,720
that I've been<font color="#CCCCCC"> working on</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> about</font>

370
00:13:57,410 --> 00:14:02,410
<font color="#CCCCCC">three years called cortex</font><font color="#E5E5E5"> cortex who's</font>

371
00:13:59,720 --> 00:14:04,940
familiar with cortex<font color="#E5E5E5"> I'd hope I am but</font>

372
00:14:02,410 --> 00:14:07,280
<font color="#CCCCCC">not too many people</font><font color="#E5E5E5"> okay well cortex is</font>

373
00:14:04,940 --> 00:14:09,830
a horizontally scalable<font color="#CCCCCC"> Micro services</font>

374
00:14:07,280 --> 00:14:12,110
oriented<font color="#E5E5E5"> Prometheus</font><font color="#CCCCCC"> implementation I</font>

375
00:14:09,830 --> 00:14:13,280
guess<font color="#E5E5E5"> so we took we took Prometheus we</font>

376
00:14:12,110 --> 00:14:14,630
broke it up<font color="#E5E5E5"> into a bunch of micro</font>

377
00:14:13,280 --> 00:14:15,740
services<font color="#E5E5E5"> and we use different</font><font color="#CCCCCC"> techniques</font>

378
00:14:14,630 --> 00:14:17,230
to make each<font color="#E5E5E5"> of those services</font>

379
00:14:15,740 --> 00:14:18,880
<font color="#CCCCCC">horizontally scalable</font>

380
00:14:17,230 --> 00:14:20,530
highly available and<font color="#E5E5E5"> so on and that's</font>

381
00:14:18,880 --> 00:14:22,840
the cortex architecture on<font color="#E5E5E5"> the right and</font>

382
00:14:20,530 --> 00:14:23,860
then when we came to<font color="#E5E5E5"> build Loki we took</font>

383
00:14:22,840 --> 00:14:25,270
exactly<font color="#CCCCCC"> the</font><font color="#E5E5E5"> same code base we just</font>

384
00:14:23,860 --> 00:14:27,790
vendored cortex in did a few

385
00:14:25,270 --> 00:14:29,350
refactorings<font color="#E5E5E5"> and effectively</font><font color="#CCCCCC"> just like</font>

386
00:14:27,790 --> 00:14:33,180
said and replaced every mention<font color="#E5E5E5"> of time</font>

387
00:14:29,350 --> 00:14:36,430
series with log stream and it worked<font color="#CCCCCC"> and</font>

388
00:14:33,180 --> 00:14:37,900
so<font color="#CCCCCC"> you still because Loki is based on</font>

389
00:14:36,430 --> 00:14:40,270
cortex<font color="#CCCCCC"> you've still got</font><font color="#E5E5E5"> this underlying</font>

390
00:14:37,900 --> 00:14:41,860
<font color="#CCCCCC">micro-services</font><font color="#E5E5E5"> architecture that you can</font>

391
00:14:40,270 --> 00:14:43,900
deploy<font color="#E5E5E5"> it and this is mean a graph on</font>

392
00:14:41,860 --> 00:14:46,240
<font color="#E5E5E5">the</font><font color="#CCCCCC"> labs we run</font><font color="#E5E5E5"> right now</font><font color="#CCCCCC"> I think two</font>

393
00:14:43,900 --> 00:14:48,040
<font color="#E5E5E5">big</font><font color="#CCCCCC"> low key clusters one that's free for</font>

394
00:14:46,240 --> 00:14:49,480
<font color="#E5E5E5">you to sign</font><font color="#CCCCCC"> up for</font><font color="#E5E5E5"> and give it a go</font><font color="#CCCCCC"> and</font>

395
00:14:48,040 --> 00:14:51,939
<font color="#E5E5E5">one that we use internally for</font><font color="#CCCCCC"> Devon</font>

396
00:14:49,480 --> 00:14:53,260
test and that's running in this format

397
00:14:51,940 --> 00:14:54,640
<font color="#E5E5E5">that's running</font><font color="#CCCCCC"> Lots</font><font color="#E5E5E5"> you know lots of</font>

398
00:14:53,260 --> 00:14:56,380
<font color="#CCCCCC">different services the nice thing about</font>

399
00:14:54,640 --> 00:14:57,430
running<font color="#E5E5E5"> in a micro services way you know</font>

400
00:14:56,380 --> 00:14:59,350
I mean from sure you've all heard many

401
00:14:57,430 --> 00:15:01,630
talks about micro services is we can

402
00:14:59,350 --> 00:15:03,610
independently scale up like the<font color="#E5E5E5"> read</font>

403
00:15:01,630 --> 00:15:06,370
path or the right path<font color="#E5E5E5"> you</font><font color="#CCCCCC"> know and we</font>

404
00:15:03,610 --> 00:15:07,630
can ship you know<font color="#E5E5E5"> new exciting</font><font color="#CCCCCC"> features</font>

405
00:15:06,370 --> 00:15:09,550
to the read path because it's all

406
00:15:07,630 --> 00:15:11,410
<font color="#CCCCCC">stateless and</font><font color="#E5E5E5"> if they panic which which</font>

407
00:15:09,550 --> 00:15:12,790
they do quite often<font color="#E5E5E5"> then we just revert</font>

408
00:15:11,410 --> 00:15:13,930
them<font color="#CCCCCC"> but on the right path you know we</font>

409
00:15:12,790 --> 00:15:16,689
would<font color="#E5E5E5"> never dream</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> doing that</font><font color="#CCCCCC"> because</font>

410
00:15:13,930 --> 00:15:18,520
that<font color="#E5E5E5"> could lose data so I quite like the</font>

411
00:15:16,690 --> 00:15:20,380
<font color="#E5E5E5">Microsoft</font><font color="#CCCCCC"> sees way of working but one of</font>

412
00:15:18,520 --> 00:15:22,120
<font color="#E5E5E5">the things we</font><font color="#CCCCCC"> learnt in cortex is this</font>

413
00:15:20,380 --> 00:15:24,430
makes it really hard to<font color="#E5E5E5"> get started</font><font color="#CCCCCC"> with</font>

414
00:15:22,120 --> 00:15:26,230
you<font color="#E5E5E5"> know if you've got a lawn</font><font color="#CCCCCC"> 7 or 8</font>

415
00:15:24,430 --> 00:15:27,219
services and why them all up and<font color="#E5E5E5"> tell</font>

416
00:15:26,230 --> 00:15:28,600
them<font color="#E5E5E5"> where they</font><font color="#CCCCCC"> were learn to</font><font color="#E5E5E5"> make them</font>

417
00:15:27,220 --> 00:15:31,060
all talk together<font color="#CCCCCC"> you're never gonna get</font>

418
00:15:28,600 --> 00:15:33,130
<font color="#E5E5E5">it running on your laptop so one</font><font color="#CCCCCC"> of the</font>

419
00:15:31,060 --> 00:15:34,569
things we we put<font color="#E5E5E5"> a lot of effort in when</font>

420
00:15:33,130 --> 00:15:36,010
we built<font color="#CCCCCC"> low key was making a version</font>

421
00:15:34,570 --> 00:15:38,050
which basically takes<font color="#E5E5E5"> all these services</font>

422
00:15:36,010 --> 00:15:39,550
<font color="#CCCCCC">put some in a</font><font color="#E5E5E5"> single binary runs them in</font>

423
00:15:38,050 --> 00:15:41,260
a<font color="#E5E5E5"> single process</font><font color="#CCCCCC"> there's all the</font>

424
00:15:39,550 --> 00:15:43,420
internal service<font color="#E5E5E5"> discovery I mean it's</font>

425
00:15:41,260 --> 00:15:45,460
basically<font color="#CCCCCC"> just</font><font color="#E5E5E5"> hard-coded and makes it</font>

426
00:15:43,420 --> 00:15:46,839
so<font color="#E5E5E5"> you can run a single</font><font color="#CCCCCC"> binary but still</font>

427
00:15:45,460 --> 00:15:48,910
horizontally scalable and highly

428
00:15:46,840 --> 00:15:50,470
available<font color="#E5E5E5"> version of low key so it's</font>

429
00:15:48,910 --> 00:15:52,930
still a bit<font color="#E5E5E5"> of a work in progress</font><font color="#CCCCCC"> I know</font>

430
00:15:50,470 --> 00:15:54,790
the single<font color="#E5E5E5"> node the single node version</font>

431
00:15:52,930 --> 00:15:56,020
works very well<font color="#E5E5E5"> because</font><font color="#CCCCCC"> that's how I run</font>

432
00:15:54,790 --> 00:15:58,540
it on my<font color="#E5E5E5"> laptop and that's how a lot of</font>

433
00:15:56,020 --> 00:16:00,460
<font color="#E5E5E5">the community run run low key and</font><font color="#CCCCCC"> I</font>

434
00:15:58,540 --> 00:16:02,079
really want to work on making<font color="#E5E5E5"> their</font>

435
00:16:00,460 --> 00:16:03,580
single binary single process version

436
00:16:02,080 --> 00:16:05,050
more easy to<font color="#E5E5E5"> horizontally scale</font>

437
00:16:03,580 --> 00:16:06,670
<font color="#E5E5E5">currently you kind of need a console</font>

438
00:16:05,050 --> 00:16:10,709
service and I want to replace<font color="#CCCCCC"> that with</font>

439
00:16:06,670 --> 00:16:14,170
gossip<font color="#E5E5E5"> and things like that but yeah</font>

440
00:16:10,710 --> 00:16:16,330
that's low key simple<font color="#CCCCCC"> cost-effective to</font>

441
00:16:14,170 --> 00:16:18,069
operate integrating with<font color="#E5E5E5"> existing server</font>

442
00:16:16,330 --> 00:16:20,890
<font color="#E5E5E5">elisa tools and cloud native through and</font>

443
00:16:18,070 --> 00:16:21,970
<font color="#E5E5E5">through</font><font color="#CCCCCC"> I thought what better than</font><font color="#E5E5E5"> to</font>

444
00:16:20,890 --> 00:16:24,540
<font color="#E5E5E5">give you a bit of a demo who</font><font color="#CCCCCC"> wants a</font>

445
00:16:21,970 --> 00:16:28,960
demo good

446
00:16:24,540 --> 00:16:34,469
like demos always go well I'm just gonna

447
00:16:28,960 --> 00:16:34,470
mirror my screen if I can figure out how

448
00:16:42,480 --> 00:16:52,980
Noah<font color="#CCCCCC"> they go right then can everyone</font><font color="#E5E5E5"> see</font>

449
00:16:48,880 --> 00:16:52,980
<font color="#E5E5E5">I don't know what's going on up there</font>

450
00:16:53,400 --> 00:16:58,959
<font color="#E5E5E5">right then so I'm just gonna cheat and</font>

451
00:16:56,800 --> 00:17:02,050
use that internal dev cluster that<font color="#E5E5E5"> I I</font>

452
00:16:58,960 --> 00:17:03,970
talked<font color="#CCCCCC"> about</font><font color="#E5E5E5"> at the</font><font color="#CCCCCC"> front</font><font color="#E5E5E5"> this is</font><font color="#CCCCCC"> I'll</font>

453
00:17:02,050 --> 00:17:08,430
go find a now what<font color="#E5E5E5"> was the page we had</font>

454
00:17:03,970 --> 00:17:12,310
earlier I'm<font color="#E5E5E5"> not going to use that one</font>

455
00:17:08,430 --> 00:17:14,920
<font color="#E5E5E5">what</font><font color="#CCCCCC"> caused that I'm gonna use that</font><font color="#E5E5E5"> this</font>

456
00:17:12,310 --> 00:17:17,679
<font color="#E5E5E5">is a page we've got</font><font color="#CCCCCC"> a few days</font><font color="#E5E5E5"> ago</font><font color="#CCCCCC"> pom</font>

457
00:17:14,920 --> 00:17:18,970
<font color="#E5E5E5">tail is the agent</font><font color="#CCCCCC"> that runs</font><font color="#E5E5E5"> that</font>

458
00:17:17,680 --> 00:17:20,440
collects<font color="#CCCCCC"> all</font><font color="#E5E5E5"> your logs</font><font color="#CCCCCC"> it does the</font>

459
00:17:18,970 --> 00:17:22,260
service<font color="#CCCCCC"> discovery</font><font color="#E5E5E5"> and so on and this</font><font color="#CCCCCC"> is</font>

460
00:17:20,440 --> 00:17:25,060
<font color="#E5E5E5">the dashboard this is actually</font>

461
00:17:22,260 --> 00:17:26,680
completely unrelated this is a mixin a

462
00:17:25,060 --> 00:17:28,569
Prometheus monitoring<font color="#E5E5E5"> mixin which is</font>

463
00:17:26,680 --> 00:17:29,860
this format for<font color="#E5E5E5"> reusable groups of</font>

464
00:17:28,569 --> 00:17:31,450
dashboards and alerts written in this

465
00:17:29,860 --> 00:17:34,179
language<font color="#E5E5E5"> called JSON it which is really</font>

466
00:17:31,450 --> 00:17:36,610
<font color="#CCCCCC">cool a project the Matthias and Fredrik</font>

467
00:17:34,180 --> 00:17:38,470
<font color="#E5E5E5">and myself work on and there's also like</font>

468
00:17:36,610 --> 00:17:40,330
kubernetes mix-ins and console mix-ins

469
00:17:38,470 --> 00:17:41,320
<font color="#CCCCCC">at CD mix-ins</font><font color="#E5E5E5"> and we're trying to make</font><font color="#CCCCCC"> a</font>

470
00:17:40,330 --> 00:17:43,629
bit<font color="#E5E5E5"> of community</font><font color="#CCCCCC"> up anyway</font>

471
00:17:41,320 --> 00:17:46,780
that's<font color="#CCCCCC"> no</font><font color="#E5E5E5"> computer side so this is</font>

472
00:17:43,630 --> 00:17:48,280
<font color="#E5E5E5">showing let's pick the right cluster so</font>

473
00:17:46,780 --> 00:17:49,570
this is showing the<font color="#CCCCCC"> the</font><font color="#E5E5E5"> pond tail</font>

474
00:17:48,280 --> 00:17:52,510
running<font color="#CCCCCC"> in our</font><font color="#E5E5E5"> default namespace and</font>

475
00:17:49,570 --> 00:17:53,800
look<font color="#E5E5E5"> there's some</font><font color="#CCCCCC"> arrows</font><font color="#E5E5E5"> conveniently so</font>

476
00:17:52,510 --> 00:17:56,350
I<font color="#E5E5E5"> don't</font><font color="#CCCCCC"> really know what's</font><font color="#E5E5E5"> going on here</font>

477
00:17:53,800 --> 00:17:58,149
I'm going<font color="#CCCCCC"> to explore this panel and now</font>

478
00:17:56,350 --> 00:18:00,250
I've got the query<font color="#CCCCCC"> I can fiddle with it</font>

479
00:17:58,150 --> 00:18:02,340
and I<font color="#E5E5E5"> can kind of pick it apart of it so</font>

480
00:18:00,250 --> 00:18:10,210
I don't<font color="#E5E5E5"> want all these label replaces</font>

481
00:18:02,340 --> 00:18:14,260
that seems tedious and then yeah and

482
00:18:10,210 --> 00:18:15,970
then that's wrong now yeah so this looks

483
00:18:14,260 --> 00:18:20,420
a bit more interesting<font color="#CCCCCC"> we can see status</font>

484
00:18:15,970 --> 00:18:23,000
status status I think that's a bug

485
00:18:20,420 --> 00:18:25,670
that work this morning<font color="#E5E5E5"> we continuously</font>

486
00:18:23,000 --> 00:18:27,770
deploy<font color="#CCCCCC"> grandmaster to disc refiner so we</font>

487
00:18:25,670 --> 00:18:30,980
find these<font color="#CCCCCC"> things</font><font color="#E5E5E5"> and the only graph on</font>

488
00:18:27,770 --> 00:18:33,780
our developers in the audience<font color="#E5E5E5"> yes</font><font color="#CCCCCC"> Carl</font>

489
00:18:30,980 --> 00:18:35,920
<font color="#CCCCCC">I think that's</font><font color="#E5E5E5"> about</font>

490
00:18:33,780 --> 00:18:38,800
so we're gonna I wanna I want to know

491
00:18:35,920 --> 00:18:40,179
what this spike of errors was here<font color="#E5E5E5"> I'm</font>

492
00:18:38,800 --> 00:18:41,470
particularly interested in<font color="#E5E5E5"> the fiber</font><font color="#CCCCCC"> too</font>

493
00:18:40,179 --> 00:18:44,110
so we can see you know<font color="#E5E5E5"> there was a there</font>

494
00:18:41,470 --> 00:18:45,100
was<font color="#E5E5E5"> a</font><font color="#CCCCCC"> bleep brief blip and if we go and</font>

495
00:18:44,110 --> 00:18:46,600
<font color="#E5E5E5">look at</font><font color="#CCCCCC"> Loki</font>

496
00:18:45,100 --> 00:18:48,159
<font color="#CCCCCC">I know the screens</font><font color="#E5E5E5"> not really big enough</font>

497
00:18:46,600 --> 00:18:51,219
<font color="#CCCCCC">I'll show you the split but the screens</font>

498
00:18:48,160 --> 00:18:52,630
<font color="#CCCCCC">screens a bit small</font><font color="#E5E5E5"> so we go there and</font>

499
00:18:51,220 --> 00:18:54,550
<font color="#E5E5E5">now we've selected the same selector we</font>

500
00:18:52,630 --> 00:18:57,030
had before<font color="#CCCCCC"> the same time range we had</font>

501
00:18:54,550 --> 00:18:59,500
before<font color="#E5E5E5"> and</font><font color="#CCCCCC"> we</font><font color="#E5E5E5"> can see that</font><font color="#CCCCCC"> the logs are</font>

502
00:18:57,030 --> 00:19:02,530
yeah well<font color="#CCCCCC"> something going on</font><font color="#E5E5E5"> here</font><font color="#CCCCCC"> isn't</font>

503
00:18:59,500 --> 00:19:05,470
<font color="#E5E5E5">there and if I if I click this this is</font>

504
00:19:02,530 --> 00:19:07,928
some cool magic that<font color="#E5E5E5"> they've added</font><font color="#CCCCCC"> to</font>

505
00:19:05,470 --> 00:19:10,179
the graph on<font color="#E5E5E5"> earth side we can now see</font>

506
00:19:07,929 --> 00:19:12,580
that<font color="#E5E5E5"> of the</font><font color="#CCCCCC"> 19 errors we've got in this</font>

507
00:19:10,179 --> 00:19:16,179
<font color="#E5E5E5">time window</font><font color="#CCCCCC"> 79</font><font color="#E5E5E5"> percent were bad gateway</font>

508
00:19:12,580 --> 00:19:17,830
and 21 simple internal<font color="#E5E5E5"> server error and</font>

509
00:19:16,179 --> 00:19:19,240
that's kind of it that's<font color="#E5E5E5"> low key super</font>

510
00:19:17,830 --> 00:19:21,639
<font color="#E5E5E5">simple</font><font color="#CCCCCC"> like we're</font><font color="#E5E5E5"> trying to make it</font>

511
00:19:19,240 --> 00:19:23,950
<font color="#E5E5E5">really easy it's obviously not it's not</font>

512
00:19:21,640 --> 00:19:26,110
<font color="#CCCCCC">a solution</font><font color="#E5E5E5"> for</font><font color="#CCCCCC"> like analytics</font><font color="#E5E5E5"> on log</font>

513
00:19:23,950 --> 00:19:27,910
streams this<font color="#E5E5E5"> is more of a DevOps let's</font>

514
00:19:26,110 --> 00:19:30,159
gather your<font color="#CCCCCC"> logs</font><font color="#E5E5E5"> let's give you a basic</font>

515
00:19:27,910 --> 00:19:32,309
index<font color="#E5E5E5"> over them and hopefully make it</font>

516
00:19:30,160 --> 00:19:34,240
<font color="#E5E5E5">easy and cheap to operate and run I</font>

517
00:19:32,309 --> 00:19:37,350
think<font color="#CCCCCC"> that's all I've got</font>

518
00:19:34,240 --> 00:19:37,350
<font color="#E5E5E5">thanks very much</font>

519
00:19:40,520 --> 00:19:47,940
[Music]

520
00:19:44,659 --> 00:19:48,960
now no leaving<font color="#E5E5E5"> we're gonna all sit</font>

521
00:19:47,940 --> 00:19:51,059
through the questions cuz it<font color="#CCCCCC"> really</font>

522
00:19:48,960 --> 00:19:52,019
annoys me when everyone<font color="#E5E5E5"> was leaving so</font>

523
00:19:51,059 --> 00:19:56,668
who's got a question

524
00:19:52,019 --> 00:20:01,049
hands up<font color="#E5E5E5"> well yeah we'll start with one</font>

525
00:19:56,669 --> 00:20:06,600
in<font color="#E5E5E5"> front then we'll come to</font><font color="#CCCCCC"> you yes on</font>

526
00:20:01,049 --> 00:20:08,039
<font color="#E5E5E5">how do you want to deploy the from the</font>

527
00:20:06,600 --> 00:20:11,399
<font color="#E5E5E5">cluster was</font><font color="#CCCCCC"> Adam on set</font>

528
00:20:08,039 --> 00:20:12,869
how do<font color="#CCCCCC"> I deploy long tail</font><font color="#E5E5E5"> how did you</font>

529
00:20:11,399 --> 00:20:14,820
put<font color="#E5E5E5"> oh yeah so prom tails deployed as a</font>

530
00:20:12,869 --> 00:20:16,408
diamond set in kubernetes<font color="#E5E5E5"> the question</font>

531
00:20:14,820 --> 00:20:18,809
was how do<font color="#CCCCCC"> I deploy cocktail</font><font color="#E5E5E5"> it's a</font>

532
00:20:16,409 --> 00:20:20,730
diamond<font color="#CCCCCC"> set in kubernetes</font><font color="#E5E5E5"> that's what we</font>

533
00:20:18,809 --> 00:20:23,340
focused on<font color="#E5E5E5"> but because Prometheus has</font>

534
00:20:20,730 --> 00:20:25,619
like static targets has DNS<font color="#E5E5E5"> you can</font>

535
00:20:23,340 --> 00:20:27,330
actually<font color="#E5E5E5"> deploy it</font><font color="#CCCCCC"> you know using</font><font color="#E5E5E5"> chef</font>

536
00:20:25,619 --> 00:20:29,158
<font color="#E5E5E5">or using puppet and configure it</font><font color="#CCCCCC"> with</font>

537
00:20:27,330 --> 00:20:30,509
<font color="#E5E5E5">static targets if you wanted to like</font>

538
00:20:29,159 --> 00:20:30,840
it's already extensible enough to do

539
00:20:30,509 --> 00:20:33,690
that

540
00:20:30,840 --> 00:20:36,629
we've there is a<font color="#E5E5E5"> PR to do journal</font><font color="#CCCCCC"> d</font>

541
00:20:33,690 --> 00:20:38,429
<font color="#E5E5E5">journal</font><font color="#CCCCCC"> cuttle and oh yeah and there's a</font>

542
00:20:36,629 --> 00:20:40,110
fluently integration as<font color="#CCCCCC"> well if</font><font color="#E5E5E5"> you're a</font>

543
00:20:38,429 --> 00:20:41,100
lot<font color="#E5E5E5"> of people already use fluent</font><font color="#CCCCCC"> diso's</font>

544
00:20:40,110 --> 00:20:42,719
we've already got a fluent the

545
00:20:41,100 --> 00:20:44,668
integration if you want to you want<font color="#E5E5E5"> to</font>

546
00:20:42,720 --> 00:20:46,139
send lobster<font color="#CCCCCC"> loci be with</font><font color="#E5E5E5"> fluent do you</font>

547
00:20:44,669 --> 00:20:47,490
have to manage<font color="#E5E5E5"> the labels yourself</font><font color="#CCCCCC"> just</font>

548
00:20:46,139 --> 00:20:50,789
fluently doesn't have the<font color="#E5E5E5"> Prometheus</font>

549
00:20:47,490 --> 00:20:53,730
service discovery<font color="#E5E5E5"> cool there was a chap</font>

550
00:20:50,789 --> 00:20:59,009
<font color="#E5E5E5">and</font><font color="#CCCCCC"> oak Don them can you tell the live</font>

551
00:20:53,730 --> 00:21:02,789
logs coming in just scroll past<font color="#E5E5E5"> can I</font>

552
00:20:59,009 --> 00:21:06,269
tell the live logs<font color="#CCCCCC"> um</font><font color="#E5E5E5"> two answers one is</font>

553
00:21:02,789 --> 00:21:08,970
yes and<font color="#E5E5E5"> one is no I there is a CLI that</font>

554
00:21:06,269 --> 00:21:11,909
ships<font color="#E5E5E5"> that has a fake tail that will</font>

555
00:21:08,970 --> 00:21:13,139
basically<font color="#E5E5E5"> ask for logs and then you know</font>

556
00:21:11,909 --> 00:21:15,029
stream them and then ask<font color="#E5E5E5"> for</font><font color="#CCCCCC"> the</font><font color="#E5E5E5"> next</font>

557
00:21:13,139 --> 00:21:18,539
<font color="#CCCCCC">set of logs and simulate it like like a</font>

558
00:21:15,029 --> 00:21:20,190
<font color="#E5E5E5">comic style the challenge mean</font>

559
00:21:18,539 --> 00:21:21,720
internally Loki is actually<font color="#CCCCCC"> all built</font>

560
00:21:20,190 --> 00:21:23,129
<font color="#CCCCCC">with</font><font color="#E5E5E5"> gr PC streaming so it</font><font color="#CCCCCC"> actually be</font>

561
00:21:21,720 --> 00:21:24,990
relatively<font color="#CCCCCC"> straightforward to</font><font color="#E5E5E5"> do that</font>

562
00:21:23,129 --> 00:21:25,889
the problem<font color="#CCCCCC"> is like it's</font><font color="#E5E5E5"> really hard to</font>

563
00:21:24,990 --> 00:21:27,809
<font color="#E5E5E5">get the logs delivered in the right</font>

564
00:21:25,889 --> 00:21:29,340
<font color="#CCCCCC">order and so I've actually much</font>

565
00:21:27,809 --> 00:21:31,019
preferred they're just like tail and all

566
00:21:29,340 --> 00:21:33,449
<font color="#E5E5E5">by the</font><font color="#CCCCCC"> way I'm only giving you like them</font>

567
00:21:31,019 --> 00:21:34,919
a minute<font color="#CCCCCC"> out-of-date logs</font><font color="#E5E5E5"> and allowing</font>

568
00:21:33,450 --> 00:21:38,669
that<font color="#E5E5E5"> minute window to kind of reorder</font>

569
00:21:34,919 --> 00:21:40,799
<font color="#E5E5E5">instead</font><font color="#CCCCCC"> I don't I mean</font><font color="#E5E5E5"> I want to do this</font>

570
00:21:38,669 --> 00:21:43,259
<font color="#E5E5E5">it's actually like something everyone</font>

571
00:21:40,799 --> 00:21:44,940
asks for<font color="#E5E5E5"> we want to definitely</font><font color="#CCCCCC"> put it</font>

572
00:21:43,259 --> 00:21:46,950
<font color="#E5E5E5">into a final as well but finding the</font>

573
00:21:44,940 --> 00:21:47,970
right solutions been a bit tricky<font color="#E5E5E5"> but</font>

574
00:21:46,950 --> 00:21:49,159
you know if you've got<font color="#CCCCCC"> any ideas</font><font color="#E5E5E5"> I'd</font>

575
00:21:47,970 --> 00:21:51,030
love that

576
00:21:49,159 --> 00:21:55,050
cool

577
00:21:51,030 --> 00:21:58,020
some questions first is it possible<font color="#E5E5E5"> to</font>

578
00:21:55,050 --> 00:22:00,270
search for content in the logs<font color="#CCCCCC"> oh</font><font color="#E5E5E5"> I</font>

579
00:21:58,020 --> 00:22:03,030
completely<font color="#E5E5E5"> omitted the fact</font><font color="#CCCCCC"> that we have</font>

580
00:22:00,270 --> 00:22:05,070
<font color="#E5E5E5">distributed grep as well</font><font color="#CCCCCC"> so yes you can</font>

581
00:22:03,030 --> 00:22:06,330
<font color="#E5E5E5">push down a regular</font><font color="#CCCCCC"> expression</font><font color="#E5E5E5"> and it</font>

582
00:22:05,070 --> 00:22:08,070
will get pushed<font color="#E5E5E5"> out to all of</font><font color="#CCCCCC"> the</font>

583
00:22:06,330 --> 00:22:09,659
replicas and executed locally as close

584
00:22:08,070 --> 00:22:11,790
to the data as possible<font color="#CCCCCC"> and then</font><font color="#E5E5E5"> the</font>

585
00:22:09,660 --> 00:22:12,840
results will<font color="#CCCCCC"> be streamed back</font><font color="#E5E5E5"> and so you</font>

586
00:22:11,790 --> 00:22:16,110
can do it<font color="#E5E5E5"> was</font><font color="#CCCCCC"> grabbed you can do it with</font>

587
00:22:12,840 --> 00:22:17,610
regular<font color="#CCCCCC"> expressions re</font><font color="#E5E5E5"> twos where we've</font>

588
00:22:16,110 --> 00:22:18,929
got a design doc at the moment which I

589
00:22:17,610 --> 00:22:20,370
think I<font color="#E5E5E5"> don't think the public yet</font><font color="#CCCCCC"> but</font>

590
00:22:18,930 --> 00:22:22,320
would<font color="#E5E5E5"> be public you know as soon</font><font color="#CCCCCC"> as I</font>

591
00:22:20,370 --> 00:22:24,209
get around<font color="#CCCCCC"> to clicking</font><font color="#E5E5E5"> that button about</font>

592
00:22:22,320 --> 00:22:26,280
like a more interesting query language

593
00:22:24,210 --> 00:22:27,570
against these<font color="#E5E5E5"> things but the end of</font><font color="#CCCCCC"> the</font>

594
00:22:26,280 --> 00:22:29,160
<font color="#E5E5E5">day it's always going to be brute force</font>

595
00:22:27,570 --> 00:22:32,490
<font color="#E5E5E5">you know we're not going to index the</font>

596
00:22:29,160 --> 00:22:34,140
content<font color="#CCCCCC"> of the logs</font><font color="#E5E5E5"> and so any query</font><font color="#CCCCCC"> you</font>

597
00:22:32,490 --> 00:22:36,210
can<font color="#E5E5E5"> do is going to be limited</font><font color="#CCCCCC"> by you</font>

598
00:22:34,140 --> 00:22:38,070
know distributing over<font color="#E5E5E5"> you know</font>

599
00:22:36,210 --> 00:22:41,510
gigabytes<font color="#E5E5E5"> or petabytes of data and and</font>

600
00:22:38,070 --> 00:22:44,700
<font color="#E5E5E5">really you know pummeling through it and</font>

601
00:22:41,510 --> 00:22:47,820
second question<font color="#E5E5E5"> is related to bits</font>

602
00:22:44,700 --> 00:22:49,530
you're kind of mentioned now so how to

603
00:22:47,820 --> 00:22:52,080
distribute<font color="#E5E5E5"> it especially if you have a</font>

604
00:22:49,530 --> 00:22:54,660
set up consisting of multiple<font color="#CCCCCC"> data</font>

605
00:22:52,080 --> 00:22:55,949
centers<font color="#CCCCCC"> yeah I mean we I don't</font><font color="#E5E5E5"> have a</font>

606
00:22:54,660 --> 00:22:59,070
great<font color="#E5E5E5"> answer to that I don't believe</font>

607
00:22:55,950 --> 00:23:01,530
many<font color="#E5E5E5"> great answers exist</font><font color="#CCCCCC"> I I'm a big fan</font>

608
00:22:59,070 --> 00:23:03,240
of<font color="#CCCCCC"> like centralizing everything</font><font color="#E5E5E5"> so have</font>

609
00:23:01,530 --> 00:23:05,070
one<font color="#E5E5E5"> of the data centers</font><font color="#CCCCCC"> and put all your</font>

610
00:23:03,240 --> 00:23:07,770
<font color="#E5E5E5">logs to that and that's not a great</font>

611
00:23:05,070 --> 00:23:08,610
<font color="#CCCCCC">answer I understand one of this</font><font color="#E5E5E5"> is one</font>

612
00:23:07,770 --> 00:23:10,560
of<font color="#E5E5E5"> the things that span off</font><font color="#CCCCCC"> the</font>

613
00:23:08,610 --> 00:23:13,800
<font color="#E5E5E5">Prometheus query</font><font color="#CCCCCC"> system does really</font>

614
00:23:10,560 --> 00:23:16,590
nicely<font color="#CCCCCC"> I</font><font color="#E5E5E5"> you know we could probably do</font>

615
00:23:13,800 --> 00:23:18,090
<font color="#CCCCCC">something</font><font color="#E5E5E5"> similar</font><font color="#CCCCCC"> with Loki</font><font color="#E5E5E5"> but you know</font>

616
00:23:16,590 --> 00:23:19,379
it's so early days right now<font color="#E5E5E5"> that</font><font color="#CCCCCC"> that's</font>

617
00:23:18,090 --> 00:23:21,750
<font color="#CCCCCC">not</font><font color="#E5E5E5"> something I've really given a huge</font>

618
00:23:19,380 --> 00:23:23,370
amount of<font color="#E5E5E5"> thought to we just</font><font color="#CCCCCC"> push all of</font>

619
00:23:21,750 --> 00:23:25,080
<font color="#CCCCCC">our logs from</font><font color="#E5E5E5"> all of our I think we've</font>

620
00:23:23,370 --> 00:23:28,229
got<font color="#E5E5E5"> about 15 clusters we just push them</font>

621
00:23:25,080 --> 00:23:29,429
all to one cluster<font color="#E5E5E5"> cool any more</font>

622
00:23:28,230 --> 00:23:33,020
questions there<font color="#E5E5E5"> was one at the front</font>

623
00:23:29,430 --> 00:23:33,020
<font color="#CCCCCC">well we'll</font><font color="#E5E5E5"> come back to you</font>

624
00:23:35,950 --> 00:23:42,290
is there any kind of<font color="#E5E5E5"> access control</font>

625
00:23:39,550 --> 00:23:48,440
<font color="#E5E5E5">integrated already</font><font color="#CCCCCC"> no</font><font color="#E5E5E5"> is there any kind</font>

626
00:23:42,290 --> 00:23:49,580
<font color="#CCCCCC">of access control no we when we so it's</font>

627
00:23:48,440 --> 00:23:50,960
not so one of<font color="#E5E5E5"> the things I don't</font><font color="#CCCCCC"> really</font>

628
00:23:49,580 --> 00:23:53,000
touch<font color="#E5E5E5"> on is</font><font color="#CCCCCC"> its multi-tenant it like</font>

629
00:23:50,960 --> 00:23:54,680
internally within all the services a

630
00:23:53,000 --> 00:23:59,570
user<font color="#CCCCCC"> idea is propagated with</font><font color="#E5E5E5"> all of</font>

631
00:23:54,680 --> 00:24:01,640
<font color="#CCCCCC">their requests so it's different</font><font color="#E5E5E5"> clients</font>

632
00:23:59,570 --> 00:24:03,200
for you but you're supposed<font color="#E5E5E5"> to do the</font>

633
00:24:01,640 --> 00:24:05,060
authentication<font color="#E5E5E5"> in some kind of reverse</font>

634
00:24:03,200 --> 00:24:06,860
proxy in front of it and so the way we

635
00:24:05,060 --> 00:24:09,560
ship it at the<font color="#E5E5E5"> moment we</font><font color="#CCCCCC"> just ship it in</font>

636
00:24:06,860 --> 00:24:11,840
a way that injects like a fake<font color="#E5E5E5"> create a</font>

637
00:24:09,560 --> 00:24:13,429
fake user<font color="#E5E5E5"> ID and then obviously when we</font>

638
00:24:11,840 --> 00:24:16,370
run the hosted version<font color="#E5E5E5"> we've already got</font>

639
00:24:13,430 --> 00:24:18,290
a multi-tenant kind of authentication

640
00:24:16,370 --> 00:24:19,669
layer that will<font color="#E5E5E5"> authenticate you against</font>

641
00:24:18,290 --> 00:24:21,530
the right instance and ship and instance

642
00:24:19,670 --> 00:24:22,640
ID<font color="#E5E5E5"> when these there's like there's</font><font color="#CCCCCC"> ten</font>

643
00:24:21,530 --> 00:24:24,590
<font color="#CCCCCC">of</font><font color="#E5E5E5"> penny of these kind</font><font color="#CCCCCC"> of reverse</font>

644
00:24:22,640 --> 00:24:26,120
proxies<font color="#CCCCCC"> or do authentication</font><font color="#E5E5E5"> so we kind</font>

645
00:24:24,590 --> 00:24:28,159
of<font color="#E5E5E5"> leave</font><font color="#CCCCCC"> that if you want to</font><font color="#E5E5E5"> run it in a</font>

646
00:24:26,120 --> 00:24:29,899
multi-tenant way and have you know

647
00:24:28,160 --> 00:24:32,270
access<font color="#CCCCCC"> controls over who can</font><font color="#E5E5E5"> access what</font>

648
00:24:29,900 --> 00:24:33,500
what log data we kind of leave<font color="#CCCCCC"> that</font><font color="#E5E5E5"> to</font>

649
00:24:32,270 --> 00:24:38,389
you<font color="#E5E5E5"> but I</font><font color="#CCCCCC"> think we've given you</font><font color="#E5E5E5"> the</font>

650
00:24:33,500 --> 00:24:40,310
basic the<font color="#CCCCCC"> basic tools to do that I mean</font>

651
00:24:38,390 --> 00:24:41,690
<font color="#E5E5E5">the problem is</font><font color="#CCCCCC"> trying</font><font color="#E5E5E5"> to find a standard</font>

652
00:24:40,310 --> 00:24:42,950
for doing<font color="#CCCCCC"> off and that kind of thing is</font>

653
00:24:41,690 --> 00:24:45,620
like just<font color="#E5E5E5"> not something I want to</font><font color="#CCCCCC"> get</font>

654
00:24:42,950 --> 00:24:46,820
<font color="#E5E5E5">involved in it yeah I mean just for the</font>

655
00:24:45,620 --> 00:24:49,550
graph on<font color="#E5E5E5"> our side it would be</font>

656
00:24:46,820 --> 00:24:51,800
<font color="#CCCCCC">interesting to</font><font color="#E5E5E5"> give developers the</font><font color="#CCCCCC"> locks</font>

657
00:24:49,550 --> 00:24:54,500
of their applications<font color="#E5E5E5"> and all not</font><font color="#CCCCCC"> all</font>

658
00:24:51,800 --> 00:24:56,800
yes<font color="#E5E5E5"> actually</font><font color="#CCCCCC"> Frederick open to PR about</font>

659
00:24:54,500 --> 00:24:59,480
that<font color="#E5E5E5"> recently figuring out a way</font><font color="#CCCCCC"> to</font>

660
00:24:56,800 --> 00:25:03,350
effectively<font color="#E5E5E5"> promote the namespace label</font>

661
00:24:59,480 --> 00:25:05,600
to this<font color="#CCCCCC"> orphan this this tenant ID</font><font color="#E5E5E5"> so</font>

662
00:25:03,350 --> 00:25:06,980
there's an issue<font color="#CCCCCC"> go and like go</font><font color="#E5E5E5"> and put</font>

663
00:25:05,600 --> 00:25:08,719
<font color="#CCCCCC">your put your comments on that and we'll</font>

664
00:25:06,980 --> 00:25:11,240
probably do<font color="#CCCCCC"> something</font><font color="#E5E5E5"> about making</font><font color="#CCCCCC"> that</font>

665
00:25:08,720 --> 00:25:13,730
<font color="#CCCCCC">happen well let's keep</font><font color="#E5E5E5"> going back and</font>

666
00:25:11,240 --> 00:25:15,950
<font color="#CCCCCC">we'll come back</font><font color="#E5E5E5"> to you thanks</font><font color="#CCCCCC"> Tom have</font>

667
00:25:13,730 --> 00:25:18,260
<font color="#E5E5E5">your everyone any benchmark trying to</font>

668
00:25:15,950 --> 00:25:20,240
compare the<font color="#CCCCCC"> performances of lucky</font>

669
00:25:18,260 --> 00:25:22,520
compared to other<font color="#CCCCCC"> solutions</font><font color="#E5E5E5"> like elastic</font>

670
00:25:20,240 --> 00:25:25,010
<font color="#E5E5E5">yeah too</font><font color="#CCCCCC"> early</font><font color="#E5E5E5"> to run</font><font color="#CCCCCC"> benchmarks at the</font>

671
00:25:22,520 --> 00:25:26,360
moment<font color="#E5E5E5"> we've got</font><font color="#CCCCCC"> we know we've</font><font color="#E5E5E5"> got some</font>

672
00:25:25,010 --> 00:25:28,879
compression benchmarks when we were

673
00:25:26,360 --> 00:25:32,889
<font color="#E5E5E5">designing the chunk format so we know we</font>

674
00:25:28,880 --> 00:25:36,440
get<font color="#E5E5E5"> about 10x compression</font><font color="#CCCCCC"> 8x compression</font>

675
00:25:32,890 --> 00:25:38,510
that rounds<font color="#E5E5E5"> lots 10</font>

676
00:25:36,440 --> 00:25:39,800
so we know we get<font color="#CCCCCC"> how what kind</font><font color="#E5E5E5"> of</font>

677
00:25:38,510 --> 00:25:41,930
compression we've got and we you<font color="#E5E5E5"> know</font>

678
00:25:39,800 --> 00:25:44,810
the thought<font color="#CCCCCC"> behind like</font><font color="#E5E5E5"> the TCO argument</font>

679
00:25:41,930 --> 00:25:46,340
is pretty pretty<font color="#E5E5E5"> thorough we've you know</font>

680
00:25:44,810 --> 00:25:48,230
<font color="#CCCCCC">we've modeled how much it should cost</font><font color="#E5E5E5"> to</font>

681
00:25:46,340 --> 00:25:50,899
operate<font color="#E5E5E5"> in terms of like</font><font color="#CCCCCC"> GCSE operations</font>

682
00:25:48,230 --> 00:25:52,310
s3 operations and things<font color="#E5E5E5"> like that and</font>

683
00:25:50,900 --> 00:25:53,930
so we're<font color="#E5E5E5"> pretty sure we like we're well</font>

684
00:25:52,310 --> 00:25:56,840
below the kind<font color="#E5E5E5"> of dollar a gigabyte in</font>

685
00:25:53,930 --> 00:25:58,490
TCO costs but we've not<font color="#CCCCCC"> done any kind of</font>

686
00:25:56,840 --> 00:26:01,550
benchmarking in terms of like read/write

687
00:25:58,490 --> 00:26:08,420
speeds yet<font color="#E5E5E5"> it's the projects</font><font color="#CCCCCC"> to early</font>

688
00:26:01,550 --> 00:26:10,610
<font color="#E5E5E5">really</font><font color="#CCCCCC"> I think you</font><font color="#E5E5E5"> mention in your talk</font>

689
00:26:08,420 --> 00:26:13,190
but how do<font color="#E5E5E5"> you deal with high</font>

690
00:26:10,610 --> 00:26:16,280
cardinality from a<font color="#E5E5E5"> lock line for example</font>

691
00:26:13,190 --> 00:26:18,530
<font color="#CCCCCC">URL</font><font color="#E5E5E5"> path or something yeah</font><font color="#CCCCCC"> so how do we</font>

692
00:26:16,280 --> 00:26:19,760
<font color="#E5E5E5">do with my</font><font color="#CCCCCC"> comment we don't like the</font>

693
00:26:18,530 --> 00:26:21,560
whole<font color="#CCCCCC"> the whole</font><font color="#E5E5E5"> point of</font><font color="#CCCCCC"> low</font><font color="#E5E5E5"> key is that</font>

694
00:26:19,760 --> 00:26:23,000
<font color="#CCCCCC">we don't have that problem we've we've</font>

695
00:26:21,560 --> 00:26:24,260
built it so your labels have to be the

696
00:26:23,000 --> 00:26:25,640
same<font color="#E5E5E5"> as your</font><font color="#CCCCCC"> Prometheus labels and</font>

697
00:26:24,260 --> 00:26:28,070
<font color="#E5E5E5">Prometheus world we say don't do high</font>

698
00:26:25,640 --> 00:26:32,210
cardinality labels<font color="#E5E5E5"> so you wouldn't put a</font>

699
00:26:28,070 --> 00:26:33,530
URL<font color="#E5E5E5"> or</font><font color="#CCCCCC"> a user ID or an IP address</font><font color="#E5E5E5"> into a</font>

700
00:26:32,210 --> 00:26:36,200
label<font color="#E5E5E5"> because that would</font><font color="#CCCCCC"> just explode</font>

701
00:26:33,530 --> 00:26:37,760
the index<font color="#E5E5E5"> and in fact in low key because</font>

702
00:26:36,200 --> 00:26:39,200
it inherits and cortex which<font color="#CCCCCC"> is this big</font>

703
00:26:37,760 --> 00:26:41,300
<font color="#CCCCCC">multi-tenant by horizontally scalable</font>

704
00:26:39,200 --> 00:26:42,800
<font color="#CCCCCC">Prometheus thing we've got limits like</font>

705
00:26:41,300 --> 00:26:44,419
you're only allowed<font color="#E5E5E5"> a certain a number</font>

706
00:26:42,800 --> 00:26:45,680
of values<font color="#E5E5E5"> for a given label I think it's</font>

707
00:26:44,420 --> 00:26:47,690
like a<font color="#E5E5E5"> hundred thousand or something</font>

708
00:26:45,680 --> 00:26:49,010
<font color="#E5E5E5">like an if you try and write more</font><font color="#CCCCCC"> than</font>

709
00:26:47,690 --> 00:26:51,920
that<font color="#E5E5E5"> many values in a certain time</font>

710
00:26:49,010 --> 00:26:53,750
window<font color="#E5E5E5"> will just</font><font color="#CCCCCC"> reject the writes</font><font color="#E5E5E5"> so</font>

711
00:26:51,920 --> 00:26:55,880
the high cardinality data should go into

712
00:26:53,750 --> 00:26:57,290
<font color="#E5E5E5">the log stream itself and then you can</font>

713
00:26:55,880 --> 00:27:00,710
kind of<font color="#E5E5E5"> pick at it with red</font><font color="#CCCCCC"> X's and</font>

714
00:26:57,290 --> 00:27:02,030
<font color="#E5E5E5">things like that actually</font><font color="#CCCCCC"> cache we come</font>

715
00:27:00,710 --> 00:27:05,540
<font color="#E5E5E5">back home after this one we've</font><font color="#CCCCCC"> got to</font>

716
00:27:02,030 --> 00:27:09,379
come back<font color="#CCCCCC"> to</font><font color="#E5E5E5"> the front is there a way to</font>

717
00:27:05,540 --> 00:27:13,159
<font color="#CCCCCC">mace</font><font color="#E5E5E5"> mask beta like passwords or</font>

718
00:27:09,380 --> 00:27:15,380
customer names<font color="#CCCCCC"> so you kind of not not</font>

719
00:27:13,160 --> 00:27:16,820
with<font color="#CCCCCC"> pom</font><font color="#E5E5E5"> tail and</font><font color="#CCCCCC"> Loki right now but</font>

720
00:27:15,380 --> 00:27:19,120
it's a commonly<font color="#E5E5E5"> requested feature I know</font>

721
00:27:16,820 --> 00:27:21,530
there's ability to do it with fluently

722
00:27:19,120 --> 00:27:22,969
<font color="#CCCCCC">so you can you can put filters</font><font color="#E5E5E5"> in</font>

723
00:27:21,530 --> 00:27:24,530
fluently to do that kind of thing I

724
00:27:22,970 --> 00:27:26,360
think<font color="#CCCCCC"> we'll</font><font color="#E5E5E5"> probably</font><font color="#CCCCCC"> end up having to</font><font color="#E5E5E5"> do</font>

725
00:27:24,530 --> 00:27:30,290
<font color="#E5E5E5">something like that in pronto</font><font color="#CCCCCC"> because</font>

726
00:27:26,360 --> 00:27:33,889
<font color="#CCCCCC">it's so</font><font color="#E5E5E5"> commonly requested but not yet</font>

727
00:27:30,290 --> 00:27:35,060
<font color="#CCCCCC">no</font><font color="#E5E5E5"> but a good question I don't I think</font>

728
00:27:33,890 --> 00:27:37,930
<font color="#E5E5E5">we've answered this question already so</font>

729
00:27:35,060 --> 00:27:37,929
to do this<font color="#E5E5E5"> chap</font>

730
00:27:39,480 --> 00:27:44,350
so like<font color="#E5E5E5"> having metrics and logs in the</font>

731
00:27:42,100 --> 00:27:45,580
same place<font color="#CCCCCC"> sounds</font><font color="#E5E5E5"> like a great</font><font color="#CCCCCC"> idea it's</font>

732
00:27:44,350 --> 00:27:49,270
clearly saved you a lot<font color="#CCCCCC"> of time and</font>

733
00:27:45,580 --> 00:27:50,320
<font color="#E5E5E5">effort energy and there any drawbacks to</font>

734
00:27:49,270 --> 00:27:52,030
having these<font color="#E5E5E5"> two things in the same</font>

735
00:27:50,320 --> 00:27:55,389
<font color="#E5E5E5">place</font><font color="#CCCCCC"> or is that you think where this</font>

736
00:27:52,030 --> 00:27:57,700
piece<font color="#CCCCCC"> of</font><font color="#E5E5E5"> technology is heading so in the</font>

737
00:27:55,390 --> 00:28:01,030
same<font color="#E5E5E5"> let's let's define in the same</font>

738
00:27:57,700 --> 00:28:03,250
place<font color="#CCCCCC"> like these</font><font color="#E5E5E5"> are not stored</font><font color="#CCCCCC"> in the</font>

739
00:28:01,030 --> 00:28:05,129
<font color="#E5E5E5">same processes they're not even</font>

740
00:28:03,250 --> 00:28:07,840
necessarily stored in the same machines

741
00:28:05,130 --> 00:28:10,630
<font color="#CCCCCC">the thing</font><font color="#E5E5E5"> that the unification is more</font>

742
00:28:07,840 --> 00:28:12,280
at<font color="#E5E5E5"> the index level so when when I've</font>

743
00:28:10,630 --> 00:28:14,350
talked about<font color="#E5E5E5"> we use the same code as</font>

744
00:28:12,280 --> 00:28:15,970
Prometheus's we use the same index as

745
00:28:14,350 --> 00:28:17,500
<font color="#E5E5E5">Prometheus it's not literally the same</font>

746
00:28:15,970 --> 00:28:20,500
index it's another instance<font color="#E5E5E5"> of the</font>

747
00:28:17,500 --> 00:28:21,640
<font color="#CCCCCC">Prometheus index and the way by doing</font>

748
00:28:20,500 --> 00:28:23,800
<font color="#E5E5E5">that like you can still have them</font>

749
00:28:21,640 --> 00:28:25,180
completely isolated from<font color="#E5E5E5"> each</font><font color="#CCCCCC"> other you</font>

750
00:28:23,800 --> 00:28:26,620
can just switch between them<font color="#E5E5E5"> really</font>

751
00:28:25,180 --> 00:28:30,550
easily<font color="#E5E5E5"> because because they've got the</font>

752
00:28:26,620 --> 00:28:32,889
<font color="#E5E5E5">same metadata we you know obviously as a</font>

753
00:28:30,550 --> 00:28:34,930
company<font color="#CCCCCC"> we offer hosted versions of all</font>

754
00:28:32,890 --> 00:28:36,370
of<font color="#CCCCCC"> this and you know if you centralize</font>

755
00:28:34,930 --> 00:28:37,390
your<font color="#E5E5E5"> patron and a meteorite hits that</font>

756
00:28:36,370 --> 00:28:40,270
data<font color="#E5E5E5"> center</font><font color="#CCCCCC"> of</font><font color="#E5E5E5"> course you're gonna lose</font>

757
00:28:37,390 --> 00:28:41,830
<font color="#CCCCCC">all your data</font><font color="#E5E5E5"> so there are some</font>

758
00:28:40,270 --> 00:28:50,680
<font color="#CCCCCC">arguments against centralizing all</font><font color="#E5E5E5"> in</font>

759
00:28:41,830 --> 00:28:55,000
one place<font color="#E5E5E5"> for sure any more questions no</font>

760
00:28:50,680 --> 00:28:57,480
<font color="#E5E5E5">okay oh right the way back last one go</font>

761
00:28:55,000 --> 00:28:57,480
on run car

762
00:29:00,299 --> 00:29:04,289
thank you<font color="#E5E5E5"> for your talk</font><font color="#CCCCCC"> what about our</font>

763
00:29:03,690 --> 00:29:08,129
<font color="#E5E5E5">editing</font>

764
00:29:04,289 --> 00:29:10,769
what about our editing alerting

765
00:29:08,129 --> 00:29:12,718
<font color="#CCCCCC">yes so one of the whole reasons for what</font>

766
00:29:10,769 --> 00:29:14,099
<font color="#E5E5E5">about letting</font><font color="#CCCCCC"> we we actually</font><font color="#E5E5E5"> really were</font>

767
00:29:12,719 --> 00:29:15,659
<font color="#E5E5E5">quite</font><font color="#CCCCCC"> excited about</font><font color="#E5E5E5"> doing alerting on</font>

768
00:29:14,099 --> 00:29:18,059
log data to be honest<font color="#E5E5E5"> are you</font><font color="#CCCCCC"> familiar</font>

769
00:29:15,659 --> 00:29:20,369
with a<font color="#CCCCCC"> project</font><font color="#E5E5E5"> called M</font><font color="#CCCCCC"> tail</font><font color="#E5E5E5"> it's by</font>

770
00:29:18,059 --> 00:29:21,899
<font color="#CCCCCC">Google it effectively</font><font color="#E5E5E5"> allows you to</font>

771
00:29:20,369 --> 00:29:24,599
write<font color="#E5E5E5"> in regular expressions</font><font color="#CCCCCC"> that then</font>

772
00:29:21,899 --> 00:29:28,978
match on log lines and then get<font color="#E5E5E5"> exported</font>

773
00:29:24,599 --> 00:29:31,109
as<font color="#E5E5E5"> metrics and so a lot of our ideas</font>

774
00:29:28,979 --> 00:29:33,719
<font color="#CCCCCC">around alerting and loci is basically to</font>

775
00:29:31,109 --> 00:29:35,339
do that<font color="#E5E5E5"> like allowing you to</font><font color="#CCCCCC"> give</font>

776
00:29:33,719 --> 00:29:36,690
patterns<font color="#E5E5E5"> that will match log lines that</font>

777
00:29:35,339 --> 00:29:38,279
<font color="#E5E5E5">will turn</font><font color="#CCCCCC"> into counters and</font><font color="#E5E5E5"> then you</font>

778
00:29:36,690 --> 00:29:39,690
just use Prometheus alerts<font color="#E5E5E5"> and the other</font>

779
00:29:38,279 --> 00:29:42,509
nice<font color="#CCCCCC"> thing about</font><font color="#E5E5E5"> all</font><font color="#CCCCCC"> of this is you can</font>

780
00:29:39,690 --> 00:29:43,829
<font color="#CCCCCC">do this</font><font color="#E5E5E5"> in Prometheus in the same query</font>

781
00:29:42,509 --> 00:29:46,919
language and you<font color="#E5E5E5"> can</font><font color="#CCCCCC"> combine it with</font>

782
00:29:43,829 --> 00:29:48,299
existing<font color="#E5E5E5"> with existing time-series</font>

783
00:29:46,919 --> 00:29:51,119
metrics<font color="#CCCCCC"> so for</font><font color="#E5E5E5"> instance you can do</font>

784
00:29:48,299 --> 00:29:53,999
things like<font color="#E5E5E5"> I'll alert if the number</font><font color="#CCCCCC"> of</font>

785
00:29:51,119 --> 00:29:55,769
error log lines per request the request

786
00:29:53,999 --> 00:29:57,659
<font color="#E5E5E5">being a metric the error log line coming</font>

787
00:29:55,769 --> 00:29:59,489
from<font color="#E5E5E5"> the locks you know alert if that</font>

788
00:29:57,659 --> 00:30:01,440
goes over a certain<font color="#CCCCCC"> number or a certain</font>

789
00:29:59,489 --> 00:30:02,879
ratio<font color="#E5E5E5"> or something so I think</font><font color="#CCCCCC"> absolutely</font>

790
00:30:01,440 --> 00:30:04,379
I'm really excited about<font color="#E5E5E5"> like I hope to</font>

791
00:30:02,879 --> 00:30:05,668
come<font color="#CCCCCC"> back</font><font color="#E5E5E5"> next year and</font><font color="#CCCCCC"> talk about</font><font color="#E5E5E5"> how</font>

792
00:30:04,379 --> 00:30:08,959
we're combining<font color="#E5E5E5"> them in single queries</font>

793
00:30:05,669 --> 00:30:15,350
maybe thank you<font color="#E5E5E5"> very much</font>

794
00:30:08,960 --> 00:30:17,980
[Applause]

795
00:30:15,350 --> 00:30:17,980
but you don't

