1
00:00:00,000 --> 00:00:02,539
okay

2
00:00:05,200 --> 00:00:09,710
so hi everybody I'm William Molinari and

3
00:00:09,710 --> 00:00:11,270
I'll talk about the open source behind a

4
00:00:11,270 --> 00:00:14,959
web request first thing is I'm Brazilian

5
00:00:14,959 --> 00:00:18,200
I'm not an English speaker thing you

6
00:00:18,200 --> 00:00:19,970
know we tend to destroy at Warren's

7
00:00:19,970 --> 00:00:22,910
games on the internet so that's it we

8
00:00:22,910 --> 00:00:24,200
have a lot of Brazilian here by the way

9
00:00:24,200 --> 00:00:26,800
so we would conquer the world sometime

10
00:00:26,800 --> 00:00:29,780
and I have 100 plus slides and I have

11
00:00:29,780 --> 00:00:31,670
just 30 minutes to say everything so

12
00:00:31,670 --> 00:00:32,960
that would be fast

13
00:00:32,960 --> 00:00:36,079
yeah I tend to speak fresh so sit tight

14
00:00:36,079 --> 00:00:38,780
and let's go we have some water here and

15
00:00:38,780 --> 00:00:41,270
I'll need it so I'm with a millionaire

16
00:00:41,270 --> 00:00:42,950
I'm also know by this weird nickname

17
00:00:42,950 --> 00:00:45,710
called politics yeah that something from

18
00:00:45,710 --> 00:00:49,700
Diablo 2 and some 10 years ago I worked

19
00:00:49,700 --> 00:00:51,470
for loco absol thanks for quite for

20
00:00:51,470 --> 00:00:52,640
having me here they're paying expenses

21
00:00:52,640 --> 00:00:55,880
to from Brazil to Brussels

22
00:00:55,880 --> 00:00:57,890
I'm also the may organizer for a simple

23
00:00:57,890 --> 00:01:00,110
rube users group in Brazil is the

24
00:01:00,110 --> 00:01:01,670
biggest rube user group in Brazil away

25
00:01:01,670 --> 00:01:04,369
from meetings it's a kind of cool thing

26
00:01:04,369 --> 00:01:07,909
and I think you do to do html5 game

27
00:01:07,909 --> 00:01:09,830
development in my spare time just for

28
00:01:09,830 --> 00:01:11,690
fun so you can check it out if you want

29
00:01:11,690 --> 00:01:15,620
you that's it about me let's go to the

30
00:01:15,620 --> 00:01:17,570
motivation about this presentation and

31
00:01:17,570 --> 00:01:19,880
the main motivation is that I wrote a

32
00:01:19,880 --> 00:01:21,520
book about that in Brazilian Portuguese

33
00:01:21,520 --> 00:01:24,530
so ya know it not be so useful for you

34
00:01:24,530 --> 00:01:27,380
but I tend to translate I want to

35
00:01:27,380 --> 00:01:28,880
translate that to English in the future

36
00:01:28,880 --> 00:01:31,130
so yes tell me if you wanted ads if you

37
00:01:31,130 --> 00:01:34,130
think that is a good idea but the books

38
00:01:34,130 --> 00:01:36,920
was about what happens in a web request

39
00:01:36,920 --> 00:01:38,659
a lot of things that is happening from

40
00:01:38,659 --> 00:01:40,549
the operating system and networking and

41
00:01:40,549 --> 00:01:44,090
I know server frameworks and and some

42
00:01:44,090 --> 00:01:47,119
kind this kind of things and I so focus

43
00:01:47,119 --> 00:01:49,790
on a desktop part and not going to so

44
00:01:49,790 --> 00:01:53,420
deep an on server side but that's it so

45
00:01:53,420 --> 00:01:56,659
let's start if our user I'm a big fan of

46
00:01:56,659 --> 00:01:58,430
Jay are talking yeah I'm using some

47
00:01:58,430 --> 00:02:00,950
t-shirt of gone Durban and I'm using a

48
00:02:00,950 --> 00:02:02,960
lot of his character for that so let's

49
00:02:02,960 --> 00:02:05,150
imagine Gandalf as a user and he's

50
00:02:05,150 --> 00:02:06,799
trying to access my personal blog I

51
00:02:06,799 --> 00:02:08,689
don't know why but he's trying to do

52
00:02:08,689 --> 00:02:10,669
that so the first thing that will happen

53
00:02:10,669 --> 00:02:14,180
we will use a browser of course and we

54
00:02:14,180 --> 00:02:16,099
use chromium in this case so it's a

55
00:02:16,099 --> 00:02:18,170
personal piece of software here

56
00:02:18,170 --> 00:02:19,880
and the first thing is to type on URL

57
00:02:19,880 --> 00:02:22,790
there and the first question that Chrome

58
00:02:22,790 --> 00:02:26,240
you ask is is it really on URL and it

59
00:02:26,240 --> 00:02:29,420
may look silly right but why we will not

60
00:02:29,420 --> 00:02:32,180
gonna type in URL in the address bar and

61
00:02:32,180 --> 00:02:34,070
I you know that you can type whatever

62
00:02:34,070 --> 00:02:35,840
you want in the address bar if you just

63
00:02:35,840 --> 00:02:37,790
search on a search engine for you in

64
00:02:37,790 --> 00:02:41,180
this case use T to use Google to search

65
00:02:41,180 --> 00:02:44,690
for this whoever it BRB are you know so

66
00:02:44,690 --> 00:02:46,850
but we'll assume that that's an URL and

67
00:02:46,850 --> 00:02:48,500
we can continue to the next question

68
00:02:48,500 --> 00:02:51,770
that is is it in the a s HSTs list and

69
00:02:51,770 --> 00:02:54,440
by HSTs I mean strict Transport Security

70
00:02:54,440 --> 00:02:57,470
that chromium has a hard coded version

71
00:02:57,470 --> 00:03:00,800
of a list of the list of website that

72
00:03:00,800 --> 00:03:07,310
can be accessed via HTTPS firstly so did

73
00:03:07,310 --> 00:03:10,610
we ask that if the your you are present

74
00:03:10,610 --> 00:03:13,310
in this list and every bra every server

75
00:03:13,310 --> 00:03:14,930
can send a strict Transport Security

76
00:03:14,930 --> 00:03:17,300
header so it will be included there it's

77
00:03:17,300 --> 00:03:20,420
dynamic so there's a lot of links here

78
00:03:20,420 --> 00:03:22,100
so it's a link for for Chrome if you

79
00:03:22,100 --> 00:03:24,080
want to look to it in this case you'll

80
00:03:24,080 --> 00:03:26,170
continue with HTTP for a while

81
00:03:26,170 --> 00:03:28,970
the next question is does they have

82
00:03:28,970 --> 00:03:31,580
cache about that and we were suing this

83
00:03:31,580 --> 00:03:33,170
presentation that there's no cash

84
00:03:33,170 --> 00:03:34,850
anywhere because it would be so easy

85
00:03:34,850 --> 00:03:37,430
right just return the cash in thank you

86
00:03:37,430 --> 00:03:39,320
but so we will continue in love caching

87
00:03:39,320 --> 00:03:41,690
so in this case there's no caching so

88
00:03:41,690 --> 00:03:44,930
brother just continued cache can be done

89
00:03:44,930 --> 00:03:47,989
via expires or cache control or attacks

90
00:03:47,989 --> 00:03:53,030
a lot of HTTP heathered here so that

91
00:03:53,030 --> 00:03:54,590
there's no cash we can continue and

92
00:03:54,590 --> 00:03:56,690
browser split the URL into three

93
00:03:56,690 --> 00:03:59,090
different parts protocol domain and path

94
00:03:59,090 --> 00:04:00,950
we have to continue through domain

95
00:04:00,950 --> 00:04:03,050
because the internet does doesn't know

96
00:04:03,050 --> 00:04:05,450
what is politics.com is really mean

97
00:04:05,450 --> 00:04:07,340
right that we have to use IP addresses

98
00:04:07,340 --> 00:04:08,930
and this kind of thing so we have to get

99
00:04:08,930 --> 00:04:12,140
the IP address for a particular con so

100
00:04:12,140 --> 00:04:14,390
it will check if we have a DNS caching

101
00:04:14,390 --> 00:04:17,560
for that so Krong has its own version of

102
00:04:17,560 --> 00:04:21,519
implementation of DNS you can check into

103
00:04:21,519 --> 00:04:23,479
architecture of open source application

104
00:04:23,479 --> 00:04:24,979
book there's a chapter about that so

105
00:04:24,979 --> 00:04:26,660
chrome has its own implementation of DNS

106
00:04:26,660 --> 00:04:29,930
so it can go faster but we are not

107
00:04:29,930 --> 00:04:31,440
continue with that we will use

108
00:04:31,440 --> 00:04:33,720
get a ddr info that there are two main

109
00:04:33,720 --> 00:04:35,670
implementations with internal

110
00:04:35,670 --> 00:04:37,560
implementation and get a DDR info using

111
00:04:37,560 --> 00:04:40,170
the operating system so we will use get

112
00:04:40,170 --> 00:04:41,880
a DDR info so we can get into the

113
00:04:41,880 --> 00:04:44,030
operating system right now

114
00:04:44,030 --> 00:04:46,980
so by operating system I mean POSIX and

115
00:04:46,980 --> 00:04:50,990
G Lib C right that's you know Lipsy so

116
00:04:50,990 --> 00:04:53,610
JDBC will look to the your ATP your

117
00:04:53,610 --> 00:04:56,400
hosts so maybe you may have defined they

118
00:04:56,400 --> 00:05:00,480
are just like a DNSSEC also you have

119
00:05:00,480 --> 00:05:02,100
live domain points to a different IP

120
00:05:02,100 --> 00:05:05,760
address so it will not go to the real

121
00:05:05,760 --> 00:05:07,950
dns so it will just use your EDC host

122
00:05:07,950 --> 00:05:09,840
data I think for the implementation if

123
00:05:09,840 --> 00:05:12,840
you want to look to it so let's get an

124
00:05:12,840 --> 00:05:15,600
eighty dren phone that's it I'm not

125
00:05:15,600 --> 00:05:17,880
going to deep dive in the code because

126
00:05:17,880 --> 00:05:18,930
you know it's boring

127
00:05:18,930 --> 00:05:20,310
should you have that on your

128
00:05:20,310 --> 00:05:25,320
presentation so what get the area for

129
00:05:25,320 --> 00:05:28,020
will do it sure firstly it's search on

130
00:05:28,020 --> 00:05:31,950
our name service caching demon so in

131
00:05:31,950 --> 00:05:34,260
case you have if this is another layer

132
00:05:34,260 --> 00:05:36,330
of caching so you may have a cache for

133
00:05:36,330 --> 00:05:38,700
your domain resolution so it will ask

134
00:05:38,700 --> 00:05:40,650
name server cache in demo obviously we

135
00:05:40,650 --> 00:05:42,270
are not using cash in this case as well

136
00:05:42,270 --> 00:05:46,230
so the big picture is we have a user we

137
00:05:46,230 --> 00:05:47,790
are getting to the operating system to

138
00:05:47,790 --> 00:05:49,560
live to the internet right but you live

139
00:05:49,560 --> 00:05:52,260
to the internet we will have to go a

140
00:05:52,260 --> 00:05:54,180
little further to the a little bit of

141
00:05:54,180 --> 00:05:56,190
theory to all the model and I don't know

142
00:05:56,190 --> 00:05:57,570
about you but every time I talk about

143
00:05:57,570 --> 00:05:59,550
the Alta model get one of those caps in

144
00:05:59,550 --> 00:06:01,500
my head because it's Chaka Democrat so

145
00:06:01,500 --> 00:06:04,380
worried you to talk about that so let's

146
00:06:04,380 --> 00:06:06,720
start try to simplify this a little bit

147
00:06:06,720 --> 00:06:09,480
so to not be so boring let's remove

148
00:06:09,480 --> 00:06:13,140
those two layers there and we use just

149
00:06:13,140 --> 00:06:17,010
five layer here so we can I split that

150
00:06:17,010 --> 00:06:20,280
into the operating system and the user

151
00:06:20,280 --> 00:06:23,730
and the user part so we have application

152
00:06:23,730 --> 00:06:25,920
for the user and those other tools for

153
00:06:25,920 --> 00:06:28,950
they is for the operating system so we

154
00:06:28,950 --> 00:06:32,010
can now can see that as protocols and we

155
00:06:32,010 --> 00:06:34,290
look to each of those protocols one by

156
00:06:34,290 --> 00:06:38,060
one so let's get started with DNS

157
00:06:38,060 --> 00:06:39,990
disappearances here come at its own

158
00:06:39,990 --> 00:06:41,430
implementation of DNS you can check it

159
00:06:41,430 --> 00:06:43,140
out if you want this is a link for the

160
00:06:43,140 --> 00:06:45,090
criminal source code

161
00:06:45,090 --> 00:06:48,660
and getting back to the get addr info we

162
00:06:48,660 --> 00:06:51,120
have Jules it's called years ago for

163
00:06:51,120 --> 00:06:52,980
socket and a call for connect there's a

164
00:06:52,980 --> 00:06:57,180
search code so we're using UDP IP socket

165
00:06:57,180 --> 00:06:59,190
diagram from UDP and IP brought the foam

166
00:06:59,190 --> 00:07:01,920
IP where the UDP IP and just attributing

167
00:07:01,920 --> 00:07:04,320
our IP address via connect so the

168
00:07:04,320 --> 00:07:05,970
connector will just get this IP address

169
00:07:05,970 --> 00:07:10,230
and attribute to the socket so that we

170
00:07:10,230 --> 00:07:11,880
can check that with straights if you

171
00:07:11,880 --> 00:07:14,040
want don't worry about the this whole

172
00:07:14,040 --> 00:07:16,500
code kernel has a lot of processes

173
00:07:16,500 --> 00:07:18,690
process for rendering for tabs for

174
00:07:18,690 --> 00:07:21,750
extensions for for a lot of things so

175
00:07:21,750 --> 00:07:24,060
I'm just getting the appear all the PID

176
00:07:24,060 --> 00:07:26,610
is there let's focus on this trace there

177
00:07:26,610 --> 00:07:29,490
so we have minus f2 get all the threads

178
00:07:29,490 --> 00:07:32,490
and we're just using some Cisco's there

179
00:07:32,490 --> 00:07:35,100
that socket connect so what we have here

180
00:07:35,100 --> 00:07:39,810
we have a soft for ipv6 with UDP IP so

181
00:07:39,810 --> 00:07:42,300
we are trying a UDP IP version not

182
00:07:42,300 --> 00:07:45,480
trying to get UDP IP trying to get the

183
00:07:45,480 --> 00:07:48,780
IP by ipv6 or so we're trying to do a

184
00:07:48,780 --> 00:07:51,060
connect and I don't have ipv6 configured

185
00:07:51,060 --> 00:07:53,880
in the laptop so network is unreachable

186
00:07:53,880 --> 00:07:57,390
so it tries I pee before PFI Pinet with

187
00:07:57,390 --> 00:08:00,210
UDP IP to get the DNS just this we can

188
00:08:00,210 --> 00:08:03,570
see that we have here ipv6 for Google

189
00:08:03,570 --> 00:08:07,229
DNS and ipv6 for Google domain

190
00:08:07,229 --> 00:08:11,160
resolution from ipv4 and ipv6 so we get

191
00:08:11,160 --> 00:08:13,740
your dpip and we get the IP from my

192
00:08:13,740 --> 00:08:18,030
personal blog and so the it will get the

193
00:08:18,030 --> 00:08:21,060
data that we want so but while he is

194
00:08:21,060 --> 00:08:23,340
trying I pee before and ipv6 I didn't

195
00:08:23,340 --> 00:08:25,530
ask for that and the reason is that we

196
00:08:25,530 --> 00:08:27,150
have this algorithm called happy

197
00:08:27,150 --> 00:08:30,210
eyeballs working behind the scenes and

198
00:08:30,210 --> 00:08:33,450
we have a the RFC for for you who wants

199
00:08:33,450 --> 00:08:36,299
to read an RFC on the Sunday right it's

200
00:08:36,299 --> 00:08:39,059
so so cool so that day if you want to

201
00:08:39,059 --> 00:08:41,490
read it but what happy I bought those is

202
00:08:41,490 --> 00:08:45,960
just request both entries in the DNS so

203
00:08:45,960 --> 00:08:49,080
you have a in for ace ipv4 and ipv6 and

204
00:08:49,080 --> 00:08:51,720
so you can request do a request for both

205
00:08:51,720 --> 00:08:55,100
applications ipv4 and ipv6 and you just

206
00:08:55,100 --> 00:08:58,470
use ipv4 in case ipv6 is not working

207
00:08:58,470 --> 00:09:01,770
or just use that pv6 if it's working and

208
00:09:01,770 --> 00:09:04,380
why we need that we are still using that

209
00:09:04,380 --> 00:09:06,750
but we don't know it's because we are

210
00:09:06,750 --> 00:09:08,910
trying to transition from ipv4 to ipv6

211
00:09:08,910 --> 00:09:12,120
right and it's not all ipv6 connections

212
00:09:12,120 --> 00:09:14,940
are fully working so we are doing that

213
00:09:14,940 --> 00:09:17,580
to use it when it's available so we are

214
00:09:17,580 --> 00:09:19,260
not penalizing our user because of that

215
00:09:19,260 --> 00:09:22,020
so that's it if I was is helping us girl

216
00:09:22,020 --> 00:09:24,840
implements that Firefox Chrome you a lot

217
00:09:24,840 --> 00:09:27,210
of the new Macs implement that iOS so

218
00:09:27,210 --> 00:09:30,180
that's it it's working so let's get to

219
00:09:30,180 --> 00:09:32,160
the UDP IP in this case we are in the

220
00:09:32,160 --> 00:09:36,900
DNS yet we are not too early HTTPS so

221
00:09:36,900 --> 00:09:38,520
UDP is implement inside the littles

222
00:09:38,520 --> 00:09:40,080
colonel so it this is the operating

223
00:09:40,080 --> 00:09:40,710
system right

224
00:09:40,710 --> 00:09:42,870
UDP implement inside the Linux kernel

225
00:09:42,870 --> 00:09:45,960
I'm not a kind of hacker so I'm not sure

226
00:09:45,960 --> 00:09:48,270
if that what was happening there but

227
00:09:48,270 --> 00:09:51,420
this is the first a file that you can

228
00:09:51,420 --> 00:09:53,460
look if you want you to understand some

229
00:09:53,460 --> 00:09:56,970
things and what is happening with UDP is

230
00:09:56,970 --> 00:10:01,110
that we just attribute an IP address and

231
00:10:01,110 --> 00:10:02,990
send it to the Internet and you're not

232
00:10:02,990 --> 00:10:05,100
you don't know if you will receive a

233
00:10:05,100 --> 00:10:06,900
response and a confirmation about that

234
00:10:06,900 --> 00:10:10,770
so that UDP will get you TCP soon so

235
00:10:10,770 --> 00:10:12,870
that's it we can finally go to the link

236
00:10:12,870 --> 00:10:15,420
and the physical layer but let's let's

237
00:10:15,420 --> 00:10:18,360
let it for some some time from strong

238
00:10:18,360 --> 00:10:23,610
from here soon so the DNS we did this

239
00:10:23,610 --> 00:10:25,920
with DNS tracer so what's happening with

240
00:10:25,920 --> 00:10:28,200
DNS here with domain resolution we are

241
00:10:28,200 --> 00:10:30,570
this user we ask a recursive name server

242
00:10:30,570 --> 00:10:32,640
in this case is in my case is my

243
00:10:32,640 --> 00:10:35,490
personal router at home so that location

244
00:10:35,490 --> 00:10:37,440
that remember that that no cache it will

245
00:10:37,440 --> 00:10:40,200
ask one of those two those turkey root

246
00:10:40,200 --> 00:10:44,220
servers that will send us the IP for one

247
00:10:44,220 --> 00:10:46,710
of the for one of those two top level

248
00:10:46,710 --> 00:10:48,000
domain servers in my case

249
00:10:48,000 --> 00:10:49,950
politics.com if the top-level domain for

250
00:10:49,950 --> 00:10:53,460
comm that I will get my authoritative

251
00:10:53,460 --> 00:10:56,040
server and I finally get my IP address

252
00:10:56,040 --> 00:10:58,350
that's those 192

253
00:10:58,350 --> 00:11:00,720
up there so that's it we finally got

254
00:11:00,720 --> 00:11:03,720
what we were we were looking for that is

255
00:11:03,720 --> 00:11:05,910
my IP address and we final can get you

256
00:11:05,910 --> 00:11:08,130
the HTTP that is what we were looking

257
00:11:08,130 --> 00:11:10,410
for so let's get started from scratch so

258
00:11:10,410 --> 00:11:12,180
we have TCP IP

259
00:11:12,180 --> 00:11:15,990
attp now and let's get started with TCP

260
00:11:15,990 --> 00:11:18,420
first because it will be better to

261
00:11:18,420 --> 00:11:21,570
explain so yeah TCP is implemented

262
00:11:21,570 --> 00:11:24,630
inside a little kernel so if you can can

263
00:11:24,630 --> 00:11:27,330
look to the TCP see if you want to and

264
00:11:27,330 --> 00:11:29,279
it be really different than UDP right

265
00:11:29,279 --> 00:11:32,370
you have a lot of control and statuses

266
00:11:32,370 --> 00:11:34,380
and then we have a connection here not

267
00:11:34,380 --> 00:11:36,209
just us sending effects but we're not

268
00:11:36,209 --> 00:11:38,610
going to the into detail of that because

269
00:11:38,610 --> 00:11:40,740
it's it's boring right

270
00:11:40,740 --> 00:11:43,410
so let's look to the tiiime a handshake

271
00:11:43,410 --> 00:11:45,779
and how we establish a connection so we

272
00:11:45,779 --> 00:11:48,690
use gather again for this case what's

273
00:11:48,690 --> 00:11:50,520
happening here is that we have a server

274
00:11:50,520 --> 00:11:53,040
listening on the other side on port 80

275
00:11:53,040 --> 00:11:55,709
for example let's my my blog is running

276
00:11:55,709 --> 00:11:59,220
party 80 so Oh get up in this case the

277
00:11:59,220 --> 00:12:00,779
operating system we will send a sing a

278
00:12:00,779 --> 00:12:03,920
sing package to that to do to the server

279
00:12:03,920 --> 00:12:06,660
it is the first step so it tries to

280
00:12:06,660 --> 00:12:08,610
connect to the server and it Cersei's

281
00:12:08,610 --> 00:12:10,920
nice I what aspect in a connection I

282
00:12:10,920 --> 00:12:12,720
want to connect it to you as well so it

283
00:12:12,720 --> 00:12:15,240
sends a actual confirmation as a

284
00:12:15,240 --> 00:12:17,220
confirmation and send to the other side

285
00:12:17,220 --> 00:12:19,440
so it is the second step and as a third

286
00:12:19,440 --> 00:12:21,180
step it just confirms so we have a

287
00:12:21,180 --> 00:12:23,730
connection from Gandalf to a server from

288
00:12:23,730 --> 00:12:26,250
server together so it's a full establish

289
00:12:26,250 --> 00:12:27,690
connection and we have kind of happy

290
00:12:27,690 --> 00:12:32,700
right so now that we have a connection

291
00:12:32,700 --> 00:12:35,700
we can go to HTTP and HTTPS we start

292
00:12:35,700 --> 00:12:37,400
with HTTPS because we have to have

293
00:12:37,400 --> 00:12:41,300
encryption encrypted connection here so

294
00:12:41,300 --> 00:12:44,910
HTTP is just a TTP over TLS so have an

295
00:12:44,910 --> 00:12:48,120
encryption tunnel between quotes here so

296
00:12:48,120 --> 00:12:50,580
it's just like that just like between

297
00:12:50,580 --> 00:12:55,709
HTTP and tcp/ip so it's based on this

298
00:12:55,709 --> 00:12:57,270
article is a dense articles once you

299
00:12:57,270 --> 00:12:57,860
read it

300
00:12:57,860 --> 00:13:00,180
okay let's imagine that we already have

301
00:13:00,180 --> 00:13:01,890
a connection here you you can remember

302
00:13:01,890 --> 00:13:05,220
that in the end of happy so the first

303
00:13:05,220 --> 00:13:07,079
thing to do is to send a list of ciphers

304
00:13:07,079 --> 00:13:09,270
in a URL from clients to the server and

305
00:13:09,270 --> 00:13:12,720
buy a list of ciphers I mean the thing

306
00:13:12,720 --> 00:13:15,180
you can check your your cipher if you

307
00:13:15,180 --> 00:13:17,910
can you go to this website but there's a

308
00:13:17,910 --> 00:13:19,680
lot of encryption algorithms and key

309
00:13:19,680 --> 00:13:21,930
exchange algorithms and yeah that's it a

310
00:13:21,930 --> 00:13:23,640
lot of things we are not going in detail

311
00:13:23,640 --> 00:13:25,940
here

312
00:13:25,940 --> 00:13:29,520
so the story will pick one of those

313
00:13:29,520 --> 00:13:32,400
ciphers and and send back with the

314
00:13:32,400 --> 00:13:33,870
certificate so in this case we are using

315
00:13:33,870 --> 00:13:37,500
TLS RCA with our before and yeah that's

316
00:13:37,500 --> 00:13:42,440
it and what we can remove from that that

317
00:13:42,440 --> 00:13:45,630
we use RSA for asymmetric cryptography

318
00:13:45,630 --> 00:13:48,810
rc4 for symmetric cryptography and md5

319
00:13:48,810 --> 00:13:50,670
for hashing so we're using public key

320
00:13:50,670 --> 00:13:53,660
and private key here to exchange on the

321
00:13:53,660 --> 00:13:56,280
the key symmetric cryptography we'll use

322
00:13:56,280 --> 00:13:58,620
this key to change information to

323
00:13:58,620 --> 00:14:00,240
exchange information any with hashing

324
00:14:00,240 --> 00:14:03,360
just to to compare package and see if

325
00:14:03,360 --> 00:14:06,900
everything is okay so that's it just a

326
00:14:06,900 --> 00:14:18,210
sec that's awkward moment okay so we'll

327
00:14:18,210 --> 00:14:20,400
check the certificate because

328
00:14:20,400 --> 00:14:21,720
certificate is solving a trust problem

329
00:14:21,720 --> 00:14:25,290
right we we don't know if this guy is

330
00:14:25,290 --> 00:14:27,660
protocol opcom for sure so we are asking

331
00:14:27,660 --> 00:14:30,839
a Tory party ah guys if he is really

332
00:14:30,839 --> 00:14:32,640
portico in the certificated

333
00:14:32,640 --> 00:14:35,100
solve this problem we will just check

334
00:14:35,100 --> 00:14:37,020
the sign of the certification with one

335
00:14:37,020 --> 00:14:39,860
of those public keys that we have on our

336
00:14:39,860 --> 00:14:42,900
map table for example and if we sign in

337
00:14:42,900 --> 00:14:45,089
the sign is the same as the third party

338
00:14:45,089 --> 00:14:46,770
that side with the private key we have

339
00:14:46,770 --> 00:14:49,020
we can be sure that this guy is really

340
00:14:49,020 --> 00:14:51,089
protocol at common case which was on a

341
00:14:51,089 --> 00:14:53,280
third party there that maybe I don't

342
00:14:53,280 --> 00:14:55,770
know Versailles or let's encrypt and I

343
00:14:55,770 --> 00:14:59,960
don't so we have a trust worth see see a

344
00:14:59,960 --> 00:15:03,360
certificate authority will look for a

345
00:15:03,360 --> 00:15:04,860
validate in case the certificate is not

346
00:15:04,860 --> 00:15:08,730
expired expected URL and we will have to

347
00:15:08,730 --> 00:15:10,320
check if the certificate is is to read

348
00:15:10,320 --> 00:15:14,100
so we will have the loss checks and so

349
00:15:14,100 --> 00:15:16,470
we can do a master key exchange and

350
00:15:16,470 --> 00:15:18,780
there's a complicated process going on

351
00:15:18,780 --> 00:15:20,520
here I'm not going into detail you but

352
00:15:20,520 --> 00:15:22,260
there's our rental numbers going from

353
00:15:22,260 --> 00:15:25,020
one side to another and a lot of I don't

354
00:15:25,020 --> 00:15:26,880
know cryptography those algorithms you

355
00:15:26,880 --> 00:15:29,280
go in action here so we are not going so

356
00:15:29,280 --> 00:15:32,100
so deep here so but there's a big key on

357
00:15:32,100 --> 00:15:34,709
both sides there are generated on a

358
00:15:34,709 --> 00:15:39,600
secure way so finally they have

359
00:15:39,600 --> 00:15:42,790
trust worth connection here and we use

360
00:15:42,790 --> 00:15:45,759
rc4 as symmetric cryptography just like

361
00:15:45,759 --> 00:15:48,129
I don't know this is a good explanation

362
00:15:48,129 --> 00:15:49,989
but just like your Wi-Fi you have a big

363
00:15:49,989 --> 00:15:51,730
key and they use a symmetric curve

364
00:15:51,730 --> 00:15:54,519
cryptography for that and md5 for

365
00:15:54,519 --> 00:15:56,350
content verifying so every packet will

366
00:15:56,350 --> 00:15:58,749
be verified with md5 in this case right

367
00:15:58,749 --> 00:16:01,540
in this cipher that we chose so that's

368
00:16:01,540 --> 00:16:04,569
it now we finally have TCP as a

369
00:16:04,569 --> 00:16:07,899
connection and TLS as a encryption

370
00:16:07,899 --> 00:16:11,970
connection as well so we can use HTTP or

371
00:16:11,970 --> 00:16:14,679
HTTPS et Picchu is the best one I think

372
00:16:14,679 --> 00:16:17,410
I would recommend you to use HTTP 2 is

373
00:16:17,410 --> 00:16:19,629
really really cool and in the future but

374
00:16:19,629 --> 00:16:21,549
we use HTTP just to yesterday as an

375
00:16:21,549 --> 00:16:23,589
example because it's plain text and is

376
00:16:23,589 --> 00:16:27,399
easy to ah to show there there's a link

377
00:16:27,399 --> 00:16:30,489
for the chrome implementation for HTTP

378
00:16:30,489 --> 00:16:32,439
and HTTPS it's called speedy on common

379
00:16:32,439 --> 00:16:37,420
coding if you want you look at it ok so

380
00:16:37,420 --> 00:16:39,999
this is HTTP that there's no rocket

381
00:16:39,999 --> 00:16:43,179
science here right it's just a get here

382
00:16:43,179 --> 00:16:45,009
and with the file that we want and the

383
00:16:45,009 --> 00:16:47,379
protocol number name and number and we

384
00:16:47,379 --> 00:16:50,110
are using host here just to because I'm

385
00:16:50,110 --> 00:16:51,790
using github page for this case they

386
00:16:51,790 --> 00:16:53,949
have may have been may have a load

387
00:16:53,949 --> 00:16:57,100
balancer and you have to to use that but

388
00:16:57,100 --> 00:16:58,389
that's it there's no rocket science

389
00:16:58,389 --> 00:17:02,709
that's that's HTTP so we finally have

390
00:17:02,709 --> 00:17:04,689
that and we go out to the Internet so

391
00:17:04,689 --> 00:17:07,089
you use internet or Wi-Fi and they have

392
00:17:07,089 --> 00:17:09,220
the physical there I'm just on that

393
00:17:09,220 --> 00:17:11,349
there's not exactly like that but we'll

394
00:17:11,349 --> 00:17:15,069
have those two layers down there so it's

395
00:17:15,069 --> 00:17:17,199
based on a paper so that it let's go

396
00:17:17,199 --> 00:17:19,419
inside the inside the Linux kernel

397
00:17:19,419 --> 00:17:21,579
between coats so we have a socket

398
00:17:21,579 --> 00:17:22,359
library

399
00:17:22,359 --> 00:17:23,949
just like jilebi see for example that

400
00:17:23,949 --> 00:17:26,589
will talk to you the tcp/ip stack inside

401
00:17:26,589 --> 00:17:28,470
Linux kernel that will talk to the

402
00:17:28,470 --> 00:17:31,120
framework then drivers developed there

403
00:17:31,120 --> 00:17:32,889
so we can finally go to the harder to

404
00:17:32,889 --> 00:17:36,610
leave the the operating system the

405
00:17:36,610 --> 00:17:39,309
machine by the way so that this is the

406
00:17:39,309 --> 00:17:41,470
paper I talked about the last time so if

407
00:17:41,470 --> 00:17:44,679
you want you can read it if you want so

408
00:17:44,679 --> 00:17:49,330
we are going to kernel on ipv4 HTTP see

409
00:17:49,330 --> 00:17:51,530
there's some

410
00:17:51,530 --> 00:17:53,770
frameworks to develop device drivers for

411
00:17:53,770 --> 00:17:57,230
Wireless Annette and we have a ideal

412
00:17:57,230 --> 00:18:00,050
Wi-Fi that is the driver for this that

413
00:18:00,050 --> 00:18:02,900
this laptop and the only part that is

414
00:18:02,900 --> 00:18:06,520
not open search here is the firmer on my

415
00:18:06,520 --> 00:18:10,100
Intel firmer so that it is a blob so

416
00:18:10,100 --> 00:18:12,760
everything else is it's open source so

417
00:18:12,760 --> 00:18:15,470
finally leaving the operating system and

418
00:18:15,470 --> 00:18:18,130
we'll go to our router to the Internet

419
00:18:18,130 --> 00:18:21,500
I'm not talking about the router because

420
00:18:21,500 --> 00:18:24,470
I'll not have enough time for that but

421
00:18:24,470 --> 00:18:26,810
let's go to the Internet and by internet

422
00:18:26,810 --> 00:18:29,180
I mean just a ha trade routes because

423
00:18:29,180 --> 00:18:30,920
you know there's a lot of devices out

424
00:18:30,920 --> 00:18:33,650
there and you can't study that so let's

425
00:18:33,650 --> 00:18:35,720
imagine a traceroute with TCP because I

426
00:18:35,720 --> 00:18:38,300
lost a lot of a lot of packages if you

427
00:18:38,300 --> 00:18:41,660
use UDP here so that's it we I'm going

428
00:18:41,660 --> 00:18:43,790
to my router that is volunteer yeah you

429
00:18:43,790 --> 00:18:45,470
know there's another thing from Lord of

430
00:18:45,470 --> 00:18:47,540
the Rings yeah so you're going to

431
00:18:47,540 --> 00:18:50,300
virtual that is Brazilian ISP we're

432
00:18:50,300 --> 00:18:52,610
going to the backbone let's go to New

433
00:18:52,610 --> 00:18:56,060
York City probably in Waikiki it's going

434
00:18:56,060 --> 00:18:58,970
to us a backbone and get home base in

435
00:18:58,970 --> 00:19:01,010
this case that's my personal blog so

436
00:19:01,010 --> 00:19:02,570
that's it let's imagine that's the

437
00:19:02,570 --> 00:19:04,700
internet right just like IT Crowd just

438
00:19:04,700 --> 00:19:07,960
that little box yeah that's the Internet

439
00:19:07,960 --> 00:19:12,710
so I'm not focusing on this part that

440
00:19:12,710 --> 00:19:16,340
the server part because there is a

441
00:19:16,340 --> 00:19:18,170
desktop that room so I removed a lot of

442
00:19:18,170 --> 00:19:20,210
slides here I was studying a framework

443
00:19:20,210 --> 00:19:22,670
studying a lot of things here so I just

444
00:19:22,670 --> 00:19:25,480
removed that so let's imagine nginx

445
00:19:25,480 --> 00:19:31,210
nginx may have configuration for for

446
00:19:31,210 --> 00:19:34,250
UNIX sockets and for TCP so in this case

447
00:19:34,250 --> 00:19:36,290
is for TCP in this case is for UNIX

448
00:19:36,290 --> 00:19:38,200
sockets I can check the documentation

449
00:19:38,200 --> 00:19:41,300
and we imagine that nginx is talking to

450
00:19:41,300 --> 00:19:45,380
our web why the application web is

451
00:19:45,380 --> 00:19:47,960
application server so we are talking via

452
00:19:47,960 --> 00:19:49,460
fire TV peach with this application

453
00:19:49,460 --> 00:19:52,010
server we can do is disappear UNIX

454
00:19:52,010 --> 00:19:53,510
socket in this case we just chose TCP

455
00:19:53,510 --> 00:19:56,510
because of because of reason right so

456
00:19:56,510 --> 00:19:59,150
we'll just use that so unicorn will talk

457
00:19:59,150 --> 00:20:01,160
to rack that will talk to Rios in this

458
00:20:01,160 --> 00:20:03,470
case just our radio setup right we don't

459
00:20:03,470 --> 00:20:05,000
have to be familiar with rails but

460
00:20:05,000 --> 00:20:06,860
what rector's is just to make the

461
00:20:06,860 --> 00:20:09,919
protocol between unicorn and the rails

462
00:20:09,919 --> 00:20:11,600
app so you can change your framework to

463
00:20:11,600 --> 00:20:14,720
see natural you know and your unicorn -

464
00:20:14,720 --> 00:20:16,460
I don't know pull mine and they keep the

465
00:20:16,460 --> 00:20:18,530
same protocol there so this is why rack

466
00:20:18,530 --> 00:20:21,200
existence in this case another good

467
00:20:21,200 --> 00:20:23,299
question here is that why I have to put

468
00:20:23,299 --> 00:20:26,419
a web server or instead of just using

469
00:20:26,419 --> 00:20:28,610
unicorn a web application server to the

470
00:20:28,610 --> 00:20:30,470
Internet and the reason is that Unicorn

471
00:20:30,470 --> 00:20:33,830
is well prepared for that the engine

472
00:20:33,830 --> 00:20:35,539
actors were prepared for that Unicorn is

473
00:20:35,539 --> 00:20:37,700
just implementing HTTP but it's not so I

474
00:20:37,700 --> 00:20:40,460
don't know it's not a good guy to be on

475
00:20:40,460 --> 00:20:42,020
the internet because I know internet is

476
00:20:42,020 --> 00:20:43,490
difficult we have a lot of Brazilians

477
00:20:43,490 --> 00:20:47,570
there so what we receive here is just a

478
00:20:47,570 --> 00:20:50,390
ruby hash with a lot of things here I

479
00:20:50,390 --> 00:20:53,330
would have CGI 1.1 there we have our I

480
00:20:53,330 --> 00:20:54,830
don't know if this is what that's a

481
00:20:54,830 --> 00:20:57,169
localhost so I was just here

482
00:20:57,169 --> 00:21:00,010
HTTP 1.1 web break that's the web server

483
00:21:00,010 --> 00:21:02,750
application server that's it

484
00:21:02,750 --> 00:21:03,950
so we have a lot of things here and

485
00:21:03,950 --> 00:21:06,440
ready to receive that and we try to

486
00:21:06,440 --> 00:21:08,780
understand what we want with this URL so

487
00:21:08,780 --> 00:21:10,549
we try to understand what is that

488
00:21:10,549 --> 00:21:12,440
controller and what is a mod

489
00:21:12,440 --> 00:21:13,580
what's the controller and what does that

490
00:21:13,580 --> 00:21:17,240
view so that's it let me mention the MVC

491
00:21:17,240 --> 00:21:19,340
here I would change a little bit just to

492
00:21:19,340 --> 00:21:22,580
get the routes controller so we get some

493
00:21:22,580 --> 00:21:25,100
data from mod Oh beautiful and we have

494
00:21:25,100 --> 00:21:27,980
an HTML here so this is my personal blog

495
00:21:27,980 --> 00:21:30,740
finally so you can finally get all the

496
00:21:30,740 --> 00:21:35,210
way back all the way back thank you

497
00:21:35,210 --> 00:21:38,270
combo break until we get to the user so

498
00:21:38,270 --> 00:21:39,650
we will not get to the user right now

499
00:21:39,650 --> 00:21:41,809
because it's just plain text right we

500
00:21:41,809 --> 00:21:43,669
don't want to show plain text your user

501
00:21:43,669 --> 00:21:45,530
I don't want you I don't understand HTML

502
00:21:45,530 --> 00:21:48,230
for that so that's it that's that's that

503
00:21:48,230 --> 00:21:51,830
time when you have a spinner there in

504
00:21:51,830 --> 00:21:53,809
your browser is just receiving a lot of

505
00:21:53,809 --> 00:21:57,350
information that is HTML and it will try

506
00:21:57,350 --> 00:21:59,690
to have to parse that and build the web

507
00:21:59,690 --> 00:22:03,740
page so here is where the CS algorithms

508
00:22:03,740 --> 00:22:06,770
that we are learn the university comes

509
00:22:06,770 --> 00:22:09,409
to to learn to life right because we

510
00:22:09,409 --> 00:22:12,020
have to build the don't tree that's

511
00:22:12,020 --> 00:22:14,240
document object model tree so based on a

512
00:22:14,240 --> 00:22:17,600
lot of text there and so that there's a

513
00:22:17,600 --> 00:22:18,680
link for

514
00:22:18,680 --> 00:22:20,870
mutation for inside chromeo and inside

515
00:22:20,870 --> 00:22:22,460
blink that is the rendering engine for

516
00:22:22,460 --> 00:22:26,420
chrome so that's it we were cigarette

517
00:22:26,420 --> 00:22:29,420
EML and fix a lot of errors for you so I

518
00:22:29,420 --> 00:22:31,550
don't know about you but I never saw 80

519
00:22:31,550 --> 00:22:33,770
ml syntax error you can't see your

520
00:22:33,770 --> 00:22:35,150
Facebook comments because there is a

521
00:22:35,150 --> 00:22:37,400
HTML Center that does not exist right

522
00:22:37,400 --> 00:22:40,550
and that does not exist because browser

523
00:22:40,550 --> 00:22:42,260
is doing a lot of magic for you so

524
00:22:42,260 --> 00:22:45,140
that's it thanks browser we have more

525
00:22:45,140 --> 00:22:47,540
black magic more more black magic in the

526
00:22:47,540 --> 00:22:51,080
past when we have ie6 you know it's more

527
00:22:51,080 --> 00:22:52,940
and more magic than we wanted just like

528
00:22:52,940 --> 00:22:54,710
Gandalf in The Hobbit and a lot of it

529
00:22:54,710 --> 00:22:57,830
yeah okay so we have a lot of stacked

530
00:22:57,830 --> 00:22:59,780
here so we are receiving images and

531
00:22:59,780 --> 00:23:02,660
scripts and CSS and this kind of thing

532
00:23:02,660 --> 00:23:04,880
so brother will start downloading that

533
00:23:04,880 --> 00:23:07,160
every images and every link will be

534
00:23:07,160 --> 00:23:10,190
downloaded in different thread like

535
00:23:10,190 --> 00:23:12,320
white thread I mean a synchronously so

536
00:23:12,320 --> 00:23:13,370
that's me and although there are

537
00:23:13,370 --> 00:23:16,100
synchronously and every time it finds a

538
00:23:16,100 --> 00:23:17,720
J's file it will be downloaded

539
00:23:17,720 --> 00:23:19,910
synchronously so if you block your whole

540
00:23:19,910 --> 00:23:22,400
hindering and download the file execute

541
00:23:22,400 --> 00:23:25,100
it and so if you continue so that that's

542
00:23:25,100 --> 00:23:27,380
that's why you have to put your J's file

543
00:23:27,380 --> 00:23:29,420
at the end of the basil that's the

544
00:23:29,420 --> 00:23:31,640
reason and just remember that every one

545
00:23:31,640 --> 00:23:34,160
of those guys is AG and of everything

546
00:23:34,160 --> 00:23:37,370
yeah so you have a lot of I don't know

547
00:23:37,370 --> 00:23:40,040
three-way handshake and TLS saying I

548
00:23:40,040 --> 00:23:42,680
know that let's keep alive to to just

549
00:23:42,680 --> 00:23:45,650
save this to save the day but in theory

550
00:23:45,650 --> 00:23:48,400
you have a lot of things going on here

551
00:23:48,400 --> 00:23:52,070
so that it and by using HTTP to you

552
00:23:52,070 --> 00:23:54,050
always I will just use one connection

553
00:23:54,050 --> 00:23:55,430
and multiplexing through this connection

554
00:23:55,430 --> 00:23:59,570
so use ATP to is the future so we will

555
00:23:59,570 --> 00:24:02,270
have to do the same thing with CSS so we

556
00:24:02,270 --> 00:24:04,640
have the don't three and the CSS on

557
00:24:04,640 --> 00:24:07,280
three so we have we have to do the same

558
00:24:07,280 --> 00:24:08,810
thing there's not just text you have to

559
00:24:08,810 --> 00:24:11,810
create this mystery and so we have just

560
00:24:11,810 --> 00:24:14,420
both those three those two trees and we

561
00:24:14,420 --> 00:24:16,760
have to merge them so when we merge this

562
00:24:16,760 --> 00:24:18,740
those two trees will have the render

563
00:24:18,740 --> 00:24:21,080
tree and based on a render tree we can

564
00:24:21,080 --> 00:24:24,890
finally build the whole application

565
00:24:24,890 --> 00:24:27,110
website in this case so that's a good

566
00:24:27,110 --> 00:24:29,930
article about that that master thesis I

567
00:24:29,930 --> 00:24:32,300
think so there's read it if you want

568
00:24:32,300 --> 00:24:34,040
and that's really interesting so you

569
00:24:34,040 --> 00:24:36,290
will find out a ranger tree in this

570
00:24:36,290 --> 00:24:38,570
renergie we'll have x and y so you have

571
00:24:38,570 --> 00:24:42,290
to drown this box with X 100 and y 100

572
00:24:42,290 --> 00:24:45,440
so brother who keep printing that on

573
00:24:45,440 --> 00:24:50,060
your display so finally we finally have

574
00:24:50,060 --> 00:24:51,680
Gandalf in this case we finally have my

575
00:24:51,680 --> 00:24:53,480
personal blog so I can read so about go

576
00:24:53,480 --> 00:24:57,250
and Ruby I don't know so that's it and

577
00:24:57,250 --> 00:25:01,430
as a summary so that both my search bars

578
00:25:01,430 --> 00:25:02,990
the web we have a lot of open source

579
00:25:02,990 --> 00:25:05,570
source a lot of open source software out

580
00:25:05,570 --> 00:25:08,030
there and that's why we have another

581
00:25:08,030 --> 00:25:09,980
that's why but it's boring though and

582
00:25:09,980 --> 00:25:12,620
it's way quo and yeah that's it sweetie

583
00:25:12,620 --> 00:25:17,030
easy right okay so I hope you enjoyed

584
00:25:17,030 --> 00:25:18,530
this presentation and it helped you to

585
00:25:18,530 --> 00:25:20,330
understand what's happening on our web

586
00:25:20,330 --> 00:25:22,070
request through open source software and

587
00:25:22,070 --> 00:25:23,930
I'll be waiting for a question if we

588
00:25:23,930 --> 00:25:27,520
have time for that and thank you

589
00:25:33,650 --> 00:25:37,070
that was best

