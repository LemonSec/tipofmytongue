1
00:00:00,030 --> 00:00:02,538
okay

2
00:00:05,200 --> 00:00:07,760
sorry the screen resolution on this is

3
00:00:07,760 --> 00:00:10,190
not great you really can't see this I

4
00:00:10,190 --> 00:00:12,260
knew better than to use a dark image was

5
00:00:12,260 --> 00:00:14,780
my first slide but yeah I did this is

6
00:00:14,780 --> 00:00:17,090
the ruins of a Space Station

7
00:00:17,090 --> 00:00:18,529
you can kind of see little bits of it

8
00:00:18,529 --> 00:00:21,310
there crabs nation space up behind it

9
00:00:21,310 --> 00:00:23,960
and the reason for that is we're gonna

10
00:00:23,960 --> 00:00:25,810
talk about building a universe in Pearl

11
00:00:25,810 --> 00:00:28,310
and I was actually gonna give a talk

12
00:00:28,310 --> 00:00:29,930
about testing but the organizer said

13
00:00:29,930 --> 00:00:31,730
would you talk about tau station you've

14
00:00:31,730 --> 00:00:32,899
been tweeting about it a lot people are

15
00:00:32,899 --> 00:00:34,190
very interested in it they want to know

16
00:00:34,190 --> 00:00:37,039
more about it and then I found myself in

17
00:00:37,039 --> 00:00:38,870
the very awkward position of I'm at a

18
00:00:38,870 --> 00:00:40,399
free and open-source conference how can

19
00:00:40,399 --> 00:00:41,989
I do a 40-minute talk about a commercial

20
00:00:41,989 --> 00:00:43,160
product without it sounding like an

21
00:00:43,160 --> 00:00:46,879
infomercial that one's a little awkward

22
00:00:46,879 --> 00:00:48,530
so I think I can actually pull it off

23
00:00:48,530 --> 00:00:50,059
and by the time I'm done with this talk

24
00:00:50,059 --> 00:00:51,410
you're actually gonna see some things

25
00:00:51,410 --> 00:00:52,460
that you might want to bring back to

26
00:00:52,460 --> 00:00:57,260
your own code so regarding questions we

27
00:00:57,260 --> 00:00:59,089
only have 40 minutes quite often and

28
00:00:59,089 --> 00:01:01,190
positively run very short on time unlike

29
00:01:01,190 --> 00:01:03,079
what you had just seen so please hold

30
00:01:03,079 --> 00:01:04,730
your questions to the end and I

31
00:01:04,730 --> 00:01:06,350
apologize for that I know sometimes you

32
00:01:06,350 --> 00:01:07,670
want to interrupt because there's

33
00:01:07,670 --> 00:01:08,810
something you don't understand but this

34
00:01:08,810 --> 00:01:10,250
time let us hold our questions till the

35
00:01:10,250 --> 00:01:11,720
end to make sure that we don't

36
00:01:11,720 --> 00:01:17,090
accidentally run over time here so when

37
00:01:17,090 --> 00:01:18,440
I say the universe what do I mean by

38
00:01:18,440 --> 00:01:22,790
this so tau station is we it's you could

39
00:01:22,790 --> 00:01:25,880
say it's a text-based MMORPG this is a

40
00:01:25,880 --> 00:01:28,010
little bit of a problem we found when we

41
00:01:28,010 --> 00:01:31,240
say MMORPG people tend to think game

42
00:01:31,240 --> 00:01:34,100
which it is but they also tend to think

43
00:01:34,100 --> 00:01:35,600
graphics we've actually had one person

44
00:01:35,600 --> 00:01:36,830
ask you know how can you be an RPG

45
00:01:36,830 --> 00:01:38,600
without graphics and it's like you never

46
00:01:38,600 --> 00:01:42,080
played D&D as a kid did you or tech

47
00:01:42,080 --> 00:01:44,510
space people simply junior programmers

48
00:01:44,510 --> 00:01:47,540
come with that out in a month new so

49
00:01:47,540 --> 00:01:49,430
that's why we say a universe because

50
00:01:49,430 --> 00:01:51,020
we're trying to do something we're

51
00:01:51,020 --> 00:01:52,700
trying to reframe the idea so that

52
00:01:52,700 --> 00:01:55,460
people understand it is bigger than you

53
00:01:55,460 --> 00:01:57,260
know something simple like a multiplayer

54
00:01:57,260 --> 00:02:00,950
Zork you know or money so oops so it

55
00:02:00,950 --> 00:02:02,360
runs a book browser and mobile we

56
00:02:02,360 --> 00:02:04,490
actually we do a lot of mobile first

57
00:02:04,490 --> 00:02:07,100
design we don't just make it for the web

58
00:02:07,100 --> 00:02:08,780
browser and resize it down for the

59
00:02:08,780 --> 00:02:10,758
browser or for the mobile we try and

60
00:02:10,758 --> 00:02:12,080
make the mobile actually work properly

61
00:02:12,080 --> 00:02:15,130
and we also use progressed

62
00:02:15,130 --> 00:02:16,600
of enhancement rather than graceful

63
00:02:16,600 --> 00:02:17,800
degradation because graceful degradation

64
00:02:17,800 --> 00:02:20,770
is rope crap because people forget about

65
00:02:20,770 --> 00:02:22,570
the degradation part progressive

66
00:02:22,570 --> 00:02:24,550
enhancement means that we can build an

67
00:02:24,550 --> 00:02:27,670
accessible application so I don't know

68
00:02:27,670 --> 00:02:28,690
if any of you are familiar with this

69
00:02:28,690 --> 00:02:31,720
problem with some facial recognition

70
00:02:31,720 --> 00:02:33,790
software it often doesn't recognize

71
00:02:33,790 --> 00:02:36,880
people of color why because a lot of

72
00:02:36,880 --> 00:02:38,290
people who are not of color have been

73
00:02:38,290 --> 00:02:40,060
building these applications and they

74
00:02:40,060 --> 00:02:41,740
don't think about skin tones or how they

75
00:02:41,740 --> 00:02:43,330
might look in the background and so you

76
00:02:43,330 --> 00:02:45,340
see some things on YouTube and other

77
00:02:45,340 --> 00:02:46,900
places look at this facial recognition

78
00:02:46,900 --> 00:02:49,960
app which doesn't recognize my face now

79
00:02:49,960 --> 00:02:51,520
if you wrote to the developer and

80
00:02:51,520 --> 00:02:53,170
reported this as a bug and they said

81
00:02:53,170 --> 00:02:54,400
well actually black people are really

82
00:02:54,400 --> 00:02:55,720
small demographic we don't care about

83
00:02:55,720 --> 00:02:59,950
them there would be an uproar if you

84
00:02:59,950 --> 00:03:01,810
write to them and say blind people can't

85
00:03:01,810 --> 00:03:03,730
use your application and they said well

86
00:03:03,730 --> 00:03:05,020
black blind people are a small

87
00:03:05,020 --> 00:03:06,730
demographic there would not be an uproar

88
00:03:06,730 --> 00:03:09,580
because nobody cares we're writing a

89
00:03:09,580 --> 00:03:11,200
text based game we actually think this

90
00:03:11,200 --> 00:03:12,820
is important we do understand

91
00:03:12,820 --> 00:03:14,410
accessibility can be sometimes

92
00:03:14,410 --> 00:03:16,570
challenging for some companies to do for

93
00:03:16,570 --> 00:03:18,400
their applications but we are trying to

94
00:03:18,400 --> 00:03:19,450
make this as accessible as possible

95
00:03:19,450 --> 00:03:22,030
you'll see some examples so that blind

96
00:03:22,030 --> 00:03:24,820
people can use it or if you use a sip

97
00:03:24,820 --> 00:03:27,100
and puff device for navigating a browser

98
00:03:27,100 --> 00:03:29,740
or just have a clicker all sorts of

99
00:03:29,740 --> 00:03:30,850
things like that we're trying to make

100
00:03:30,850 --> 00:03:32,830
sure that anybody can play this game

101
00:03:32,830 --> 00:03:35,560
regardless of who they are it's also

102
00:03:35,560 --> 00:03:36,850
free to play I don't know if you're

103
00:03:36,850 --> 00:03:38,260
familiar with a free player genre of

104
00:03:38,260 --> 00:03:40,750
games but for the politics of some of

105
00:03:40,750 --> 00:03:42,340
that we don't have level caps we don't

106
00:03:42,340 --> 00:03:44,560
have pay to win it's premium accounts

107
00:03:44,560 --> 00:03:46,390
microtransactions but anyone can

108
00:03:46,390 --> 00:03:48,190
participate we want it to be as open as

109
00:03:48,190 --> 00:03:51,030
possible for everyone

110
00:03:51,030 --> 00:03:53,880
and the story I'm just gonna kind of be

111
00:03:53,880 --> 00:03:55,680
brief about this basically as far future

112
00:03:55,680 --> 00:03:58,200
around the Year 2600 about 600 years in

113
00:03:58,200 --> 00:04:00,570
the future humanity had a post-scarcity

114
00:04:00,570 --> 00:04:03,330
society had spread throughout the galaxy

115
00:04:03,330 --> 00:04:07,050
and then the attack happened planetary

116
00:04:07,050 --> 00:04:08,490
defense systems turned on the planet

117
00:04:08,490 --> 00:04:10,380
airlocks were being vented ships

118
00:04:10,380 --> 00:04:12,300
reactors went critical data banks were

119
00:04:12,300 --> 00:04:15,060
being purged most of humanity trillions

120
00:04:15,060 --> 00:04:16,798
were dead in a matter of hours

121
00:04:16,798 --> 00:04:20,040
and then it stopped and no one knows why

122
00:04:20,040 --> 00:04:21,720
it's an event called the catastrophe two

123
00:04:21,720 --> 00:04:23,610
generations later humanity is restricted

124
00:04:23,610 --> 00:04:25,560
to a sphere about 40 light-years across

125
00:04:25,560 --> 00:04:28,410
they don't know how to build new

126
00:04:28,410 --> 00:04:30,240
technology anymore they've lost a lot of

127
00:04:30,240 --> 00:04:31,710
that knowledge but the old technology

128
00:04:31,710 --> 00:04:33,210
was robust enough so they can repair a

129
00:04:33,210 --> 00:04:34,950
lot of it so if you if you want to try

130
00:04:34,950 --> 00:04:36,419
and force it into a genre you can kind

131
00:04:36,419 --> 00:04:41,460
of think Mad Max meets Firefly the

132
00:04:41,460 --> 00:04:42,960
universe itself it turns out within 20

133
00:04:42,960 --> 00:04:45,150
light years of Earth there are 117 stars

134
00:04:45,150 --> 00:04:47,490
that we know of that's an interesting

135
00:04:47,490 --> 00:04:48,720
caveat because it turns out it's

136
00:04:48,720 --> 00:04:49,740
trickier than one might think

137
00:04:49,740 --> 00:04:51,660
we have over 500 space stations over

138
00:04:51,660 --> 00:04:53,840
8,000 stations so there's a lot of stuff

139
00:04:53,840 --> 00:04:55,950
it's we're trying to build a universe

140
00:04:55,950 --> 00:04:58,740
here not just a simple game where you

141
00:04:58,740 --> 00:05:02,760
just click and grow and whatever the

142
00:05:02,760 --> 00:05:05,370
Alpha we're hoping to have it around the

143
00:05:05,370 --> 00:05:07,560
summer time it's obviously to be much

144
00:05:07,560 --> 00:05:09,750
much smaller than the outlet it's gonna

145
00:05:09,750 --> 00:05:12,390
be invite for people who sign up on our

146
00:05:12,390 --> 00:05:14,850
website it's only gonna have 14 stations

147
00:05:14,850 --> 00:05:17,550
in Seoul and Alpha Centauri it should

148
00:05:17,550 --> 00:05:19,500
have about 200 areas maybe a hundred

149
00:05:19,500 --> 00:05:20,930
missions available for the thing

150
00:05:20,930 --> 00:05:22,919
obviously some of the features are not

151
00:05:22,919 --> 00:05:24,180
going to be available at that time

152
00:05:24,180 --> 00:05:25,650
that's just getting us an idea of the

153
00:05:25,650 --> 00:05:27,120
initial feedback or what people think

154
00:05:27,120 --> 00:05:30,780
about it but we also have art which once

155
00:05:30,780 --> 00:05:32,010
again you can't see very well

156
00:05:32,010 --> 00:05:33,930
unfortunately I should not take stark

157
00:05:33,930 --> 00:05:36,690
pictures to this but because we believe

158
00:05:36,690 --> 00:05:38,610
even though it is a text-based game we

159
00:05:38,610 --> 00:05:39,930
also want it to be a very pretty

160
00:05:39,930 --> 00:05:42,390
professional game so here's a character

161
00:05:42,390 --> 00:05:44,460
screen this is not a mock-up this is

162
00:05:44,460 --> 00:05:46,590
real from the game you can see it looks

163
00:05:46,590 --> 00:05:48,960
fairly nice fairly professional it is a

164
00:05:48,960 --> 00:05:51,930
dark theme after launch we are going to

165
00:05:51,930 --> 00:05:53,400
have a light theme in there for people

166
00:05:53,400 --> 00:05:55,500
who prefer those we actually tracked a

167
00:05:55,500 --> 00:05:57,180
lot of information so here's a full

168
00:05:57,180 --> 00:05:58,590
character screen I had to shrink it down

169
00:05:58,590 --> 00:06:00,830
so you can see more of it

170
00:06:00,830 --> 00:06:03,170
I gives you an idea of the amount of

171
00:06:03,170 --> 00:06:04,610
information we might be capturing for

172
00:06:04,610 --> 00:06:08,720
your individual character you might want

173
00:06:08,720 --> 00:06:10,190
to take a job there's all sorts of

174
00:06:10,190 --> 00:06:12,500
careers available in the game in the far

175
00:06:12,500 --> 00:06:13,880
future obviously jobs are gonna be a

176
00:06:13,880 --> 00:06:14,600
little bit different

177
00:06:14,600 --> 00:06:17,030
we have missions our mission system is

178
00:06:17,030 --> 00:06:17,900
nonlinear

179
00:06:17,900 --> 00:06:20,060
except for dialogue dialogue nodes is

180
00:06:20,060 --> 00:06:21,290
what we call a director they stick the

181
00:06:21,290 --> 00:06:23,360
graph for those of you or a cop side

182
00:06:23,360 --> 00:06:24,980
Bend this is not like World of Warcraft

183
00:06:24,980 --> 00:06:26,870
missions go out pick 10 flowers come

184
00:06:26,870 --> 00:06:30,470
back we have complicated missions

185
00:06:30,470 --> 00:06:32,210
sometimes where this all sorts of things

186
00:06:32,210 --> 00:06:33,350
and we don't always tell you what those

187
00:06:33,350 --> 00:06:34,940
other things are if you get a mysterious

188
00:06:34,940 --> 00:06:36,620
package to deliver it to a vein

189
00:06:36,620 --> 00:06:39,230
developers we don't necessarily tell you

190
00:06:39,230 --> 00:06:40,580
that there might be something else you

191
00:06:40,580 --> 00:06:42,860
can do with the package but there might

192
00:06:42,860 --> 00:06:44,810
not be you you won't always know and

193
00:06:44,810 --> 00:06:46,280
this is actually a fairly simple mission

194
00:06:46,280 --> 00:06:47,720
some of them are just mind-bendingly

195
00:06:47,720 --> 00:06:49,460
complicated and you won't always know

196
00:06:49,460 --> 00:06:50,840
because you'll just take a straight path

197
00:06:50,840 --> 00:06:52,790
to the mission but we want to have that

198
00:06:52,790 --> 00:06:54,500
complexity available so people can enjoy

199
00:06:54,500 --> 00:06:56,480
exploring different facets of their

200
00:06:56,480 --> 00:06:58,130
character making different moral choices

201
00:06:58,130 --> 00:07:01,250
and some of them are pretty mind-bending

202
00:07:01,250 --> 00:07:03,230
at times but as you do missions you

203
00:07:03,230 --> 00:07:04,310
might get money so you wanna put your

204
00:07:04,310 --> 00:07:06,590
money in a bank because you might get

205
00:07:06,590 --> 00:07:08,930
mugged you might take the money and if

206
00:07:08,930 --> 00:07:10,130
you get mugged you might wind up in a

207
00:07:10,130 --> 00:07:12,020
sickbay or if there's no sick bay in the

208
00:07:12,020 --> 00:07:13,400
station you're gonna fall back to your

209
00:07:13,400 --> 00:07:15,440
latest clone if you elected to get a

210
00:07:15,440 --> 00:07:16,970
cloning license this helps you avoid

211
00:07:16,970 --> 00:07:18,320
permit death but does have other

212
00:07:18,320 --> 00:07:19,940
consequences which I won't go into right

213
00:07:19,940 --> 00:07:23,590
now you can relax in a bar after work

214
00:07:23,590 --> 00:07:26,570
but it's space opera it's sci-fi you

215
00:07:26,570 --> 00:07:27,830
want to go to the stars that's what you

216
00:07:27,830 --> 00:07:29,450
want to do you want to travel around you

217
00:07:29,450 --> 00:07:31,340
want to see what's out there so you go

218
00:07:31,340 --> 00:07:34,220
down to the port and you hop on a

219
00:07:34,220 --> 00:07:37,280
spaceship obviously multiple different

220
00:07:37,280 --> 00:07:39,350
types of spaceships this by the way it's

221
00:07:39,350 --> 00:07:42,230
a star map I wrote this in JavaScript

222
00:07:42,230 --> 00:07:43,490
that's pretty proud of it and then our

223
00:07:43,490 --> 00:07:45,080
front-end developer said your JavaScript

224
00:07:45,080 --> 00:07:47,270
sucks and they rewrote it you're right

225
00:07:47,270 --> 00:07:50,030
you can't tell from this unfortunately

226
00:07:50,030 --> 00:07:52,160
but the colors of the stars are

227
00:07:52,160 --> 00:07:54,560
astronomically correct I keep wanting to

228
00:07:54,560 --> 00:07:56,920
take anatomically correct that's awkward

229
00:07:56,920 --> 00:07:58,880
the colors of the star are

230
00:07:58,880 --> 00:08:01,280
astronomically correct we might actually

231
00:08:01,280 --> 00:08:03,080
punch up those colors a little bit

232
00:08:03,080 --> 00:08:05,330
because it's hard to see but we think

233
00:08:05,330 --> 00:08:07,610
that's important because we do like to

234
00:08:07,610 --> 00:08:08,810
pay attention to a lot of little details

235
00:08:08,810 --> 00:08:10,970
we won't say it's hard science fiction

236
00:08:10,970 --> 00:08:15,220
but we're not offensive design

237
00:08:16,860 --> 00:08:19,990
this is what the star map looks like if

238
00:08:19,990 --> 00:08:22,300
you don't have JavaScript enabled or if

239
00:08:22,300 --> 00:08:24,160
you have a screen reader or a text-based

240
00:08:24,160 --> 00:08:26,140
browser because it's accessible that

241
00:08:26,140 --> 00:08:27,820
star map is a useful thing that you can

242
00:08:27,820 --> 00:08:29,590
click on if you just have a little

243
00:08:29,590 --> 00:08:31,690
clicker with your mouth clicking around

244
00:08:31,690 --> 00:08:33,309
you're not going to be able to click one

245
00:08:33,309 --> 00:08:34,929
of those stars so we have this available

246
00:08:34,929 --> 00:08:37,630
in text form it's much harder to use but

247
00:08:37,630 --> 00:08:38,710
unfortunately that's one of the

248
00:08:38,710 --> 00:08:40,539
trade-offs you have when you switch to a

249
00:08:40,539 --> 00:08:42,340
different medium it is available for

250
00:08:42,340 --> 00:08:47,170
people who have various disabilities the

251
00:08:47,170 --> 00:08:48,910
games work in progress this is a game

252
00:08:48,910 --> 00:08:50,800
flow diagram of the port anything in red

253
00:08:50,800 --> 00:08:53,020
either is in progress or has not been

254
00:08:53,020 --> 00:08:55,240
started yet so we're still working on

255
00:08:55,240 --> 00:08:57,430
the thing and we might have to pull back

256
00:08:57,430 --> 00:09:00,100
some features because this shows like

257
00:09:00,100 --> 00:09:02,080
around April the done date you can see

258
00:09:02,080 --> 00:09:03,640
our burned down line is getting beyond

259
00:09:03,640 --> 00:09:05,230
that so we're working on trying to fix

260
00:09:05,230 --> 00:09:10,840
that I needed to explain that so you can

261
00:09:10,840 --> 00:09:12,790
understand the complexity the scale of

262
00:09:12,790 --> 00:09:15,520
what we're doing this is big this is

263
00:09:15,520 --> 00:09:18,400
complex and it is not like your standard

264
00:09:18,400 --> 00:09:21,090
apps for one thing is very right heavy

265
00:09:21,090 --> 00:09:23,230
trying to build a right heavy database

266
00:09:23,230 --> 00:09:25,560
applications a little bit more difficult

267
00:09:25,560 --> 00:09:28,870
but our guidelines is first of all we

268
00:09:28,870 --> 00:09:31,300
use proven technologies we don't want to

269
00:09:31,300 --> 00:09:32,590
experiment we don't want to take chances

270
00:09:32,590 --> 00:09:34,830
there's some really really cool

271
00:09:34,830 --> 00:09:36,580
applications out there that we've been

272
00:09:36,580 --> 00:09:38,260
looking at we thought that might make

273
00:09:38,260 --> 00:09:42,010
things really fascinating no we want to

274
00:09:42,010 --> 00:09:43,450
make a product that's actually stable

275
00:09:43,450 --> 00:09:45,640
that's robust that people can use we

276
00:09:45,640 --> 00:09:47,350
don't want to hide so we stick with

277
00:09:47,350 --> 00:09:49,900
proven technologies very careful about

278
00:09:49,900 --> 00:09:51,400
our hiring for our clients we promise

279
00:09:51,400 --> 00:09:52,690
all of them they go through our software

280
00:09:52,690 --> 00:09:54,670
test and they also go through what we

281
00:09:54,670 --> 00:09:56,170
call a structured interview to make sure

282
00:09:56,170 --> 00:09:57,850
that they have the skills that the soft

283
00:09:57,850 --> 00:09:59,740
skills that the client needs and we do

284
00:09:59,740 --> 00:10:01,330
the same thing internally hiring for tau

285
00:10:01,330 --> 00:10:03,400
station has just given us fantastic

286
00:10:03,400 --> 00:10:05,020
developers for the project very happy

287
00:10:05,020 --> 00:10:09,490
about that and very strong testing as

288
00:10:09,490 --> 00:10:11,230
most of you know I have been testing a

289
00:10:11,230 --> 00:10:13,120
time or two I care about it I'm a

290
00:10:13,120 --> 00:10:15,370
manifesto I call the Zen of test Suites

291
00:10:15,370 --> 00:10:17,320
which is out there this is not yet on

292
00:10:17,320 --> 00:10:18,640
SlideShare I'll get it up there so you

293
00:10:18,640 --> 00:10:20,920
can get the links later so testing I'll

294
00:10:20,920 --> 00:10:22,360
talk about that first just a little bit

295
00:10:22,360 --> 00:10:23,560
I won't show you into the code but

296
00:10:23,560 --> 00:10:25,090
you'll get an idea of how we have

297
00:10:25,090 --> 00:10:28,540
testing so does anyone here use test

298
00:10:28,540 --> 00:10:32,110
class moves okay I see a couple of hands

299
00:10:32,110 --> 00:10:33,220
up there well of course you do Jeff

300
00:10:33,220 --> 00:10:34,210
you're working on it

301
00:10:34,210 --> 00:10:39,070
so test class moose test class most was

302
00:10:39,070 --> 00:10:41,020
a project that was released directly out

303
00:10:41,020 --> 00:10:43,600
of this project veer who was the code

304
00:10:43,600 --> 00:10:45,850
name for it so test class most came out

305
00:10:45,850 --> 00:10:47,110
of that and later on people kept asking

306
00:10:47,110 --> 00:10:48,280
me how do I make a moose and test class

307
00:10:48,280 --> 00:10:49,630
well you can't because they're both

308
00:10:49,630 --> 00:10:51,310
fighting over the constructor so I just

309
00:10:51,310 --> 00:10:53,380
wrote a test class moose based upon my

310
00:10:53,380 --> 00:10:55,810
experience a test class most so those of

311
00:10:55,810 --> 00:10:57,880
you who are using test class moose and I

312
00:10:57,880 --> 00:10:59,140
know a lot of larger companies are

313
00:10:59,140 --> 00:11:00,910
because a fantastic testing framework

314
00:11:00,910 --> 00:11:02,800
that comes out of this so we're trying

315
00:11:02,800 --> 00:11:04,090
to give back to the community when we

316
00:11:04,090 --> 00:11:06,430
plan even the code itself has to be

317
00:11:06,430 --> 00:11:07,960
close source because we have to protect

318
00:11:07,960 --> 00:11:09,280
the secrets or else it ruins the

319
00:11:09,280 --> 00:11:11,530
gameplay so that's a frustration we'd

320
00:11:11,530 --> 00:11:13,780
like more to be open-toe be careful

321
00:11:13,780 --> 00:11:17,380
selenium is there a load testing I wrote

322
00:11:17,380 --> 00:11:20,560
the load testing bots in Perl and it

323
00:11:20,560 --> 00:11:22,750
wound up crashing my box before the dev

324
00:11:22,750 --> 00:11:25,870
server so I won't of rewriting those and

325
00:11:25,870 --> 00:11:28,720
going and now they will crush our stack

326
00:11:28,720 --> 00:11:30,700
point nicely going is really sweet I

327
00:11:30,700 --> 00:11:33,790
might add we have almost 11,000 tests at

328
00:11:33,790 --> 00:11:37,290
this point and we track our test history

329
00:11:37,290 --> 00:11:39,600
more people need to do this

330
00:11:39,600 --> 00:11:42,040
let me give you oh yeah I'll go to the

331
00:11:42,040 --> 00:11:43,690
test history just a moment so our test

332
00:11:43,690 --> 00:11:45,970
guidelines I won't go over this if you

333
00:11:45,970 --> 00:11:48,400
go out and you google for Ovid Zen of

334
00:11:48,400 --> 00:11:50,830
test Suites you'll find it but the test

335
00:11:50,830 --> 00:11:52,720
guidelines are very clear we want our

336
00:11:52,720 --> 00:11:54,400
tests to be easy to write easy to run

337
00:11:54,400 --> 00:11:57,250
and they're they're really nice and our

338
00:11:57,250 --> 00:11:59,500
test suite looks kind of like this oh my

339
00:11:59,500 --> 00:12:03,120
goodness I won't do this again I promise

340
00:12:03,120 --> 00:12:05,020
well you will see it again in the

341
00:12:05,020 --> 00:12:06,280
presentation after this I've learned my

342
00:12:06,280 --> 00:12:06,610
lesson

343
00:12:06,610 --> 00:12:10,260
so that says 1776 test that's not true

344
00:12:10,260 --> 00:12:12,880
test glass mousse is an X unit framework

345
00:12:12,880 --> 00:12:14,440
and a next unit framework you have test

346
00:12:14,440 --> 00:12:16,330
methods with a bunch of assertions

347
00:12:16,330 --> 00:12:18,250
inside of them and the test method is

348
00:12:18,250 --> 00:12:20,080
considered a single test in the Perl

349
00:12:20,080 --> 00:12:21,610
world we have a test method with a bunch

350
00:12:21,610 --> 00:12:23,590
of tests inside of it so we have a test

351
00:12:23,590 --> 00:12:25,780
report which comes out which shows we

352
00:12:25,780 --> 00:12:27,400
have about nine thousand thirty seven

353
00:12:27,400 --> 00:12:29,200
tests if you add it up that's around

354
00:12:29,200 --> 00:12:32,710
eleven thousand tests basically and the

355
00:12:32,710 --> 00:12:34,600
report also shows us our slowest test

356
00:12:34,600 --> 00:12:36,830
classes and our slowest test met

357
00:12:36,830 --> 00:12:39,020
so we can keep an eye on where our

358
00:12:39,020 --> 00:12:40,880
performance bottlenecks are in our test

359
00:12:40,880 --> 00:12:43,340
suite and the entire test suite on a

360
00:12:43,340 --> 00:12:45,590
fast Linux box you can finish it in

361
00:12:45,590 --> 00:12:47,900
about 5 minutes most people it's around

362
00:12:47,900 --> 00:12:50,180
8 to 10 minutes but five minutes I think

363
00:12:50,180 --> 00:12:52,700
is rather interesting for 11,000 tests

364
00:12:52,700 --> 00:12:53,930
because I remember when I first started

365
00:12:53,930 --> 00:12:55,970
for the BBC we had a test suite of

366
00:12:55,970 --> 00:12:58,250
comparable size and it took an hour and

367
00:12:58,250 --> 00:13:00,620
20 minutes to run most of the time when

368
00:13:00,620 --> 00:13:02,360
I go into clients they say we allow our

369
00:13:02,360 --> 00:13:03,800
tests we're not putting them very often

370
00:13:03,800 --> 00:13:05,720
or it's how Suites broken if they've got

371
00:13:05,720 --> 00:13:07,130
a test suite anywhere close to the sides

372
00:13:07,130 --> 00:13:08,750
just taking them around an hour that's

373
00:13:08,750 --> 00:13:09,520
awful

374
00:13:09,520 --> 00:13:12,650
so we're not doing that at all we've we

375
00:13:12,650 --> 00:13:14,360
from day one I said that's ain't gonna

376
00:13:14,360 --> 00:13:18,380
happen and it's not but you might wonder

377
00:13:18,380 --> 00:13:20,420
what's failing in your test suite so I

378
00:13:20,420 --> 00:13:23,270
can we track our tests to our test suite

379
00:13:23,270 --> 00:13:26,930
State and we run a little program called

380
00:13:26,930 --> 00:13:29,870
test failures not PL and it shows us all

381
00:13:29,870 --> 00:13:31,340
these test failures so we can see the

382
00:13:31,340 --> 00:13:33,620
class I've truncated some information so

383
00:13:33,620 --> 00:13:35,630
it bids it'll show us the classes failed

384
00:13:35,630 --> 00:13:37,130
the name of the test method that failed

385
00:13:37,130 --> 00:13:39,200
the date that our first failed the date

386
00:13:39,200 --> 00:13:41,150
that had last failed and the number of

387
00:13:41,150 --> 00:13:44,840
errors and wow that's a lot of errors we

388
00:13:44,840 --> 00:13:46,100
have there that's actually kind of

389
00:13:46,100 --> 00:13:49,550
disconcerting oh well let me just make

390
00:13:49,550 --> 00:13:50,810
it just look at the test failures on

391
00:13:50,810 --> 00:13:53,270
master so I restrict this to our master

392
00:13:53,270 --> 00:13:55,970
branch we're using it and you can see

393
00:13:55,970 --> 00:13:57,890
the number of test errors that we the

394
00:13:57,890 --> 00:13:59,270
errors in our test suite per master

395
00:13:59,270 --> 00:14:02,000
branch have brought dramatically and

396
00:14:02,000 --> 00:14:03,650
actually so you can look over here two

397
00:14:03,650 --> 00:14:04,940
of those failures you can't read it

398
00:14:04,940 --> 00:14:06,880
there I apologize to the failures record

399
00:14:06,880 --> 00:14:09,770
reference the leaderboard so this

400
00:14:09,770 --> 00:14:11,000
allowed us to understand that our

401
00:14:11,000 --> 00:14:13,010
leaderboard is problematic we've got a

402
00:14:13,010 --> 00:14:14,930
number of Pettit of test failures there

403
00:14:14,930 --> 00:14:16,550
we've looked our leaderboard we

404
00:14:16,550 --> 00:14:17,480
understand the problems of the codes

405
00:14:17,480 --> 00:14:19,160
that's being rewritten in order to get

406
00:14:19,160 --> 00:14:20,300
around this problem this is what

407
00:14:20,300 --> 00:14:22,670
cracking tests state allows us to do we

408
00:14:22,670 --> 00:14:25,720
don't forget about those test failures

409
00:14:25,720 --> 00:14:28,730
but a lot of these last failures the

410
00:14:28,730 --> 00:14:30,890
dates in 2016 so let me just look at

411
00:14:30,890 --> 00:14:34,220
last two weeks I have four errors in the

412
00:14:34,220 --> 00:14:36,020
last two weeks on the master branch and

413
00:14:36,020 --> 00:14:39,059
it's testing a respawning and

414
00:14:39,059 --> 00:14:43,019
see after they died so and actually we

415
00:14:43,019 --> 00:14:44,669
understand what that is this is what

416
00:14:44,669 --> 00:14:46,529
this is why we pay so much attention to

417
00:14:46,529 --> 00:14:47,879
our test suite because we want stuff to

418
00:14:47,879 --> 00:14:49,799
be robust and we can check a lot of

419
00:14:49,799 --> 00:14:51,479
information over time we also run this

420
00:14:51,479 --> 00:14:53,999
on our jenkins box so our jenkins box

421
00:14:53,999 --> 00:14:55,919
also has an SQL like database tracking

422
00:14:55,919 --> 00:15:00,479
all of the test failures over time to

423
00:15:00,479 --> 00:15:03,419
make your tools that we use just about

424
00:15:03,419 --> 00:15:07,019
all of these are open source the only

425
00:15:07,019 --> 00:15:08,489
one that's not is javascript javascript

426
00:15:08,489 --> 00:15:10,169
ins open standard it's not open source

427
00:15:10,169 --> 00:15:12,779
but it's close enough so we're using

428
00:15:12,779 --> 00:15:15,599
Perl 5 version 24 it's very important

429
00:15:15,599 --> 00:15:16,649
that we have a lot of the modern tools

430
00:15:16,649 --> 00:15:20,219
available for us going that's just for

431
00:15:20,219 --> 00:15:21,749
our load testing about PostgreSQL

432
00:15:21,749 --> 00:15:26,099
because we need a real database ship for

433
00:15:26,099 --> 00:15:29,459
a database management Redis is used just

434
00:15:29,459 --> 00:15:31,379
for caching if part Redis server goes

435
00:15:31,379 --> 00:15:34,259
down it would hurt gameplay but not kill

436
00:15:34,259 --> 00:15:36,839
it it would slow things down you'd lose

437
00:15:36,839 --> 00:15:38,069
a little bit of information but it's not

438
00:15:38,069 --> 00:15:40,769
critical to fluid the elasticsearch

439
00:15:40,769 --> 00:15:44,449
Dinkins you know usual suspects nothing

440
00:15:44,449 --> 00:15:46,529
exciting about this list and I think

441
00:15:46,529 --> 00:15:47,129
that's great

442
00:15:47,129 --> 00:15:48,419
because there's not a lot of risk

443
00:15:48,419 --> 00:15:53,579
involved in it MVC catalyst template

444
00:15:53,579 --> 00:15:56,189
toolkit and EBX class again there's

445
00:15:56,189 --> 00:15:58,079
nothing exciting about this I'm very

446
00:15:58,079 --> 00:15:59,759
conservative in our approach to how

447
00:15:59,759 --> 00:16:01,559
we're writing code to make sure that we

448
00:16:01,559 --> 00:16:02,669
can actually focus on delivering a

449
00:16:02,669 --> 00:16:04,709
product and not debugging the latest

450
00:16:04,709 --> 00:16:06,029
thing and the greatest hype that just

451
00:16:06,029 --> 00:16:09,389
came out but what does MVC looked like

452
00:16:09,389 --> 00:16:11,729
for us this is one of my greatest

453
00:16:11,729 --> 00:16:14,129
frustrations I have with tutorials for

454
00:16:14,129 --> 00:16:16,229
MVC first of all I'd like to see MVC

455
00:16:16,229 --> 00:16:19,889
renamed wet MVC renamed to AVC

456
00:16:19,889 --> 00:16:22,769
application view controller because the

457
00:16:22,769 --> 00:16:24,269
model I like to think that more is an

458
00:16:24,269 --> 00:16:26,519
application and then you have a

459
00:16:26,519 --> 00:16:28,049
controller and a view on top of that let

460
00:16:28,049 --> 00:16:29,969
me tell you what I mean there so here's

461
00:16:29,969 --> 00:16:32,009
one of our controller methods for the

462
00:16:32,009 --> 00:16:33,959
cloned app so you go to a clone bat you

463
00:16:33,959 --> 00:16:35,759
can purchase a new clone and they will

464
00:16:35,759 --> 00:16:37,259
just state the new clone for you if you

465
00:16:37,259 --> 00:16:38,459
have enough money and if you're actually

466
00:16:38,459 --> 00:16:42,299
in the clone bat very simple method this

467
00:16:42,299 --> 00:16:43,859
is what we strive for in our controller

468
00:16:43,859 --> 00:16:47,129
methods no logic we do not want object

469
00:16:47,129 --> 00:16:48,640
on our controller methods

470
00:16:48,640 --> 00:16:51,070
more to the point thin controllers damn

471
00:16:51,070 --> 00:16:53,620
it the reason we don't want logic in our

472
00:16:53,620 --> 00:16:55,720
controller methods is first of all when

473
00:16:55,720 --> 00:16:58,269
you write tests for that and your error

474
00:16:58,269 --> 00:17:01,450
is 500 what was that

475
00:17:01,450 --> 00:17:04,420
can I get a stack trace well sometimes

476
00:17:04,420 --> 00:17:05,709
that's very difficult when you're going

477
00:17:05,709 --> 00:17:07,000
through you know using dub dub dub

478
00:17:07,000 --> 00:17:08,799
mechanize or something like that to dig

479
00:17:08,799 --> 00:17:09,790
in there to find out what the actual

480
00:17:09,790 --> 00:17:11,439
error is you have a whole layer of stuff

481
00:17:11,439 --> 00:17:13,240
which is irrelevant to the error in

482
00:17:13,240 --> 00:17:14,559
question that you have to dig through to

483
00:17:14,559 --> 00:17:15,880
get down to the actual error so that

484
00:17:15,880 --> 00:17:17,290
makes it frustrating when you're testing

485
00:17:17,290 --> 00:17:20,559
and also it's hard to reuse the logic

486
00:17:20,559 --> 00:17:22,869
quite often that you have embedded in

487
00:17:22,869 --> 00:17:24,520
controller methods controller methods

488
00:17:24,520 --> 00:17:25,689
just think them is your API

489
00:17:25,689 --> 00:17:28,000
you don't put logic in an API it just

490
00:17:28,000 --> 00:17:30,010
dispatches between the view and the

491
00:17:30,010 --> 00:17:33,400
application and in this particular case

492
00:17:33,400 --> 00:17:34,960
if you purchase a clone we don't have an

493
00:17:34,960 --> 00:17:36,309
independent page we just give some

494
00:17:36,309 --> 00:17:37,600
messages back to the character and we

495
00:17:37,600 --> 00:17:38,950
need to go back to the main clone that

496
00:17:38,950 --> 00:17:40,330
page so we just forward back to the

497
00:17:40,330 --> 00:17:42,549
index our controller methods we strive

498
00:17:42,549 --> 00:17:47,350
to get them as simple as possible this

499
00:17:47,350 --> 00:17:49,780
is what a clone method can look like now

500
00:17:49,780 --> 00:17:51,910
bear with me I don't like to put a lot

501
00:17:51,910 --> 00:17:53,710
of code in a slide I apologize for that

502
00:17:53,710 --> 00:17:55,030
let me walk you through this so you

503
00:17:55,030 --> 00:17:56,740
understand what's going on here

504
00:17:56,740 --> 00:17:59,020
these are clone method first thing we do

505
00:17:59,020 --> 00:18:01,630
is we croak if they're not gonna clone

506
00:18:01,630 --> 00:18:04,059
back actually we don't really have log

507
00:18:04,059 --> 00:18:06,280
the error but basically we have to make

508
00:18:06,280 --> 00:18:08,020
sure they're in the right area in order

509
00:18:08,020 --> 00:18:10,360
to clone we check to see if they have

510
00:18:10,360 --> 00:18:13,360
enough money and then we start and end

511
00:18:13,360 --> 00:18:15,429
trade that's in there we remove the

512
00:18:15,429 --> 00:18:16,990
money from their wallet and then we do

513
00:18:16,990 --> 00:18:20,559
the actual gestation of clone and then

514
00:18:20,559 --> 00:18:22,210
we send a message back to the character

515
00:18:22,210 --> 00:18:23,650
letting them know what happened there's

516
00:18:23,650 --> 00:18:25,000
actually a number of problems with this

517
00:18:25,000 --> 00:18:28,000
which I won't go into right now but the

518
00:18:28,000 --> 00:18:29,919
biggest problem we have is so this is

519
00:18:29,919 --> 00:18:32,650
the result you get back you'll purchased

520
00:18:32,650 --> 00:18:34,660
a new clone how much it cost you and

521
00:18:34,660 --> 00:18:37,090
then you know some narrative text about

522
00:18:37,090 --> 00:18:38,679
a clone swelling up in the clone bat or

523
00:18:38,679 --> 00:18:42,510
whatever that is ugly code though

524
00:18:42,510 --> 00:18:45,520
because look at all of that so this was

525
00:18:45,520 --> 00:18:47,830
actually get our clone in our clone

526
00:18:47,830 --> 00:18:49,179
class and our clone actually shouldn't

527
00:18:49,179 --> 00:18:50,770
be rummaging around in the character's

528
00:18:50,770 --> 00:18:53,380
wallet the clone class shouldn't be

529
00:18:53,380 --> 00:18:55,059
caring about the areas of space station

530
00:18:55,059 --> 00:18:57,100
that you're in clone class would be just

531
00:18:57,100 --> 00:18:59,470
just stating a new clone there's a real

532
00:18:59,470 --> 00:19:01,419
confusing mix of responsibilities there

533
00:19:01,419 --> 00:19:01,940
so

534
00:19:01,940 --> 00:19:05,750
and plus all of this stuff if I'm doing

535
00:19:05,750 --> 00:19:07,610
another accent if I want to scavenge in

536
00:19:07,610 --> 00:19:09,260
the ruins I need to check to see if I

537
00:19:09,260 --> 00:19:10,400
have enough stats if I'm in the right

538
00:19:10,400 --> 00:19:12,800
area all sorts of actions I need to do

539
00:19:12,800 --> 00:19:15,230
where this sort of behavior needs to be

540
00:19:15,230 --> 00:19:16,400
shared and they don't want to write this

541
00:19:16,400 --> 00:19:19,430
code over and over again so now we have

542
00:19:19,430 --> 00:19:23,270
what we call economic exchanges so this

543
00:19:23,270 --> 00:19:24,800
is what our clone method looks like now

544
00:19:24,800 --> 00:19:26,510
you know getting an employee accept our

545
00:19:26,510 --> 00:19:29,030
steps we assert the location is an area

546
00:19:29,030 --> 00:19:32,660
phone that wallet pay the price of the

547
00:19:32,660 --> 00:19:34,970
phone and I'm cloned gestate in that

548
00:19:34,970 --> 00:19:38,090
area this middle thing is an area page

549
00:19:38,090 --> 00:19:40,370
that's actually a method called on an

550
00:19:40,370 --> 00:19:42,140
economic asset I won't go into details

551
00:19:42,140 --> 00:19:44,540
but basically we have a declarative way

552
00:19:44,540 --> 00:19:47,240
of asserting all of these things must

553
00:19:47,240 --> 00:19:50,570
happen in this order more or less in

554
00:19:50,570 --> 00:19:52,580
order for this thing to happen if any of

555
00:19:52,580 --> 00:19:54,110
those steps fail it all rolls back we

556
00:19:54,110 --> 00:19:55,280
typically don't even hit the database

557
00:19:55,280 --> 00:19:57,260
until we get to the end there's a lot

558
00:19:57,260 --> 00:19:58,760
more stuff in there such as you know if

559
00:19:58,760 --> 00:20:01,370
it fails do this if it succeeds but it's

560
00:20:01,370 --> 00:20:04,370
a much much simpler way of writing this

561
00:20:04,370 --> 00:20:07,310
and now I can share this self is an area

562
00:20:07,310 --> 00:20:09,680
clone bat self is an area ruin self is

563
00:20:09,680 --> 00:20:11,990
an area bar I can share all of these

564
00:20:11,990 --> 00:20:14,090
behaviors very easily and it makes

565
00:20:14,090 --> 00:20:15,470
writing new behaviors for the game

566
00:20:15,470 --> 00:20:20,180
trivial so this was the old method this

567
00:20:20,180 --> 00:20:22,670
is the new method you know we probably

568
00:20:22,670 --> 00:20:23,930
want to fire the guy who wrote the old

569
00:20:23,930 --> 00:20:28,460
method but that was me so so one of our

570
00:20:28,460 --> 00:20:29,780
devs looked in and said hey that sucks

571
00:20:29,780 --> 00:20:32,840
dude and he came up with this and it's a

572
00:20:32,840 --> 00:20:35,150
much much nicer much easier way of

573
00:20:35,150 --> 00:20:36,740
controlling the system and this is also

574
00:20:36,740 --> 00:20:39,740
a lot easier to read on the right-hand

575
00:20:39,740 --> 00:20:44,680
side brings the store next thing though

576
00:20:44,680 --> 00:20:47,620
you might be more concept of dot objects

577
00:20:47,620 --> 00:20:51,380
if you're not for newer developers in

578
00:20:51,380 --> 00:20:52,880
object-oriented programming they often

579
00:20:52,880 --> 00:20:54,830
tend to fall into the trap of creating a

580
00:20:54,830 --> 00:20:56,240
god object which is where you're putting

581
00:20:56,240 --> 00:20:58,790
in way too much behavior into particular

582
00:20:58,790 --> 00:21:01,190
class that makes a class much harder to

583
00:21:01,190 --> 00:21:04,040
maintain it's a frustration and classes

584
00:21:04,040 --> 00:21:05,690
should follow something we call the

585
00:21:05,690 --> 00:21:07,790
single responsibility principle if you

586
00:21:07,790 --> 00:21:10,220
have an invoice class that just

587
00:21:10,220 --> 00:21:12,170
represents your invoice and your date

588
00:21:12,170 --> 00:21:13,950
and that represents an or

589
00:21:13,950 --> 00:21:15,809
which might reference a customer which

590
00:21:15,809 --> 00:21:17,490
might reference the border items these

591
00:21:17,490 --> 00:21:19,230
are all separate classes and stuff like

592
00:21:19,230 --> 00:21:21,320
that everything has one and only one

593
00:21:21,320 --> 00:21:24,480
raison d'être if you will and there

594
00:21:24,480 --> 00:21:25,710
should only be one reason to change the

595
00:21:25,710 --> 00:21:27,270
class that's what we say for the single

596
00:21:27,270 --> 00:21:29,400
responsibility principle but we have

597
00:21:29,400 --> 00:21:31,590
problems with this so character

598
00:21:31,590 --> 00:21:34,830
purchasing the clone every time I write

599
00:21:34,830 --> 00:21:36,659
a method on the character class I'm

600
00:21:36,659 --> 00:21:38,070
pushing more behavior in the character

601
00:21:38,070 --> 00:21:43,320
class so what we had originally was

602
00:21:43,320 --> 00:21:45,299
something like this we were just dating

603
00:21:45,299 --> 00:21:48,360
this on you know our clone class trying

604
00:21:48,360 --> 00:21:49,799
to pull behavior out of the character

605
00:21:49,799 --> 00:21:51,240
class and redistribute it to someplace

606
00:21:51,240 --> 00:21:52,980
else that it would be the problem was

607
00:21:52,980 --> 00:21:55,020
you might remember stuff like this where

608
00:21:55,020 --> 00:21:57,720
we're checking if the character is in

609
00:21:57,720 --> 00:21:59,850
the right area if the character can pay

610
00:21:59,850 --> 00:22:00,840
the right price

611
00:22:00,840 --> 00:22:02,730
a clone factor just know how to just

612
00:22:02,730 --> 00:22:03,960
stage a new clone from the character

613
00:22:03,960 --> 00:22:06,120
that's all it should know how to do so

614
00:22:06,120 --> 00:22:08,399
we really shouldn't put on this behavior

615
00:22:08,399 --> 00:22:11,659
in the contest because who's responsible

616
00:22:11,659 --> 00:22:15,659
this is an MMORPG your character drives

617
00:22:15,659 --> 00:22:18,690
all of the actions your character has a

618
00:22:18,690 --> 00:22:20,789
responsibility for all of this and when

619
00:22:20,789 --> 00:22:23,880
we try to avoid pushing everything in

620
00:22:23,880 --> 00:22:26,070
the parent that's what we had was ugly

621
00:22:26,070 --> 00:22:27,720
stuff like this so this follows a verb

622
00:22:27,720 --> 00:22:29,669
subject object syntax missions has

623
00:22:29,669 --> 00:22:33,149
missions for NPC character no one could

624
00:22:33,149 --> 00:22:35,580
remember what that meant no one I wrote

625
00:22:35,580 --> 00:22:36,870
that I couldn't remember what it meant

626
00:22:36,870 --> 00:22:38,370
every time I hit that I would stumble

627
00:22:38,370 --> 00:22:42,120
across that is very frustrating whereas

628
00:22:42,120 --> 00:22:44,429
if we go to subject verb object and we

629
00:22:44,429 --> 00:22:46,230
try very hard to keep the subject verb

630
00:22:46,230 --> 00:22:49,020
object syntax within our code we have if

631
00:22:49,020 --> 00:22:53,130
NPC has missions for character no one is

632
00:22:53,130 --> 00:22:54,360
unclear about that

633
00:22:54,360 --> 00:22:56,909
assuming they speak English or you know

634
00:22:56,909 --> 00:22:58,110
speak well enough they understand that's

635
00:22:58,110 --> 00:22:59,970
real languages this is perfectly clear

636
00:22:59,970 --> 00:23:02,100
but it means pushing the behavior back

637
00:23:02,100 --> 00:23:05,309
into the character class so this

638
00:23:05,309 --> 00:23:07,020
actually makes our code easier to read

639
00:23:07,020 --> 00:23:09,600
than this convoluted syntax how do we

640
00:23:09,600 --> 00:23:11,810
deal with that

641
00:23:11,810 --> 00:23:15,630
well I said we don't like to experiment

642
00:23:15,630 --> 00:23:20,160
I like Parkville classes I don't know if

643
00:23:20,160 --> 00:23:21,540
you're familiar with them so imagine you

644
00:23:21,540 --> 00:23:23,700
have an IDE and your IDE you're

645
00:23:23,700 --> 00:23:24,960
designing a class in your ID and you

646
00:23:24,960 --> 00:23:26,340
have a particular attribute and you

647
00:23:26,340 --> 00:23:28,320
annotate that attribute and the IDE says

648
00:23:28,320 --> 00:23:29,430
oh I need to make the getter and setter

649
00:23:29,430 --> 00:23:31,170
for that attribute so behind the scenes

650
00:23:31,170 --> 00:23:34,020
it writes out some extra code which is

651
00:23:34,020 --> 00:23:35,700
then composes into your class at compile

652
00:23:35,700 --> 00:23:37,410
time and this extra code is a partial

653
00:23:37,410 --> 00:23:39,270
class it might do this for a variety of

654
00:23:39,270 --> 00:23:41,250
things a lot of code generators or

655
00:23:41,250 --> 00:23:43,410
compilers will use this technique to

656
00:23:43,410 --> 00:23:46,440
generate code that you don't see when

657
00:23:46,440 --> 00:23:49,110
you write the code but gets composed

658
00:23:49,110 --> 00:23:52,590
into your class at compile time and it's

659
00:23:52,590 --> 00:23:54,120
not something that humans generally do

660
00:23:54,120 --> 00:23:58,170
well until now what I decided to do is

661
00:23:58,170 --> 00:24:00,600
this a partial plan sounds an awful lot

662
00:24:00,600 --> 00:24:02,760
like a role which only gets applied to

663
00:24:02,760 --> 00:24:06,480
one class so we have our role class and

664
00:24:06,480 --> 00:24:08,790
now for your partial class character

665
00:24:08,790 --> 00:24:10,920
clone we can purchase a clone we've got

666
00:24:10,920 --> 00:24:12,720
our latest low respawn we have our

667
00:24:12,720 --> 00:24:15,450
decamps time all of these are available

668
00:24:15,450 --> 00:24:17,700
parts of class in our character class we

669
00:24:17,700 --> 00:24:21,570
apply a set of partial classes these are

670
00:24:21,570 --> 00:24:23,340
single-use roles not designed to be used

671
00:24:23,340 --> 00:24:27,330
anywhere else and so you can see you

672
00:24:27,330 --> 00:24:28,590
open up your character class and you can

673
00:24:28,590 --> 00:24:30,210
see it does clone inventory missions

674
00:24:30,210 --> 00:24:31,980
movement there's actually a lot of other

675
00:24:31,980 --> 00:24:33,390
parts of classes that we have because

676
00:24:33,390 --> 00:24:36,960
this game is extremely complex so what

677
00:24:36,960 --> 00:24:38,190
we've done is we've taken the different

678
00:24:38,190 --> 00:24:41,490
responsibilities of the character and we

679
00:24:41,490 --> 00:24:42,660
have broken this down into partial

680
00:24:42,660 --> 00:24:44,430
classes we've logically grouped them and

681
00:24:44,430 --> 00:24:46,440
it turns out maintenance on this was

682
00:24:46,440 --> 00:24:50,070
trivial it was really easy to do because

683
00:24:50,070 --> 00:24:51,870
we were using rolls it was giving us

684
00:24:51,870 --> 00:24:53,550
some of the benefits of static code that

685
00:24:53,550 --> 00:24:56,130
I won't go into right now but really

686
00:24:56,130 --> 00:24:57,300
simplified our code and we were

687
00:24:57,300 --> 00:24:59,040
surprised it was so much easier to

688
00:24:59,040 --> 00:25:01,020
maintain and we're waiting for this to

689
00:25:01,020 --> 00:25:02,700
shoot us in the foot number one but it

690
00:25:02,700 --> 00:25:08,270
hasn't so we're very pleased with that

691
00:25:08,920 --> 00:25:10,750
thank you so let's move on to the next

692
00:25:10,750 --> 00:25:14,080
thing though item design this is the

693
00:25:14,080 --> 00:25:15,610
part where it really gets frustrating

694
00:25:15,610 --> 00:25:16,570
because when you're building a business

695
00:25:16,570 --> 00:25:18,730
system it's much easier to control the

696
00:25:18,730 --> 00:25:20,500
logical design of the things that you're

697
00:25:20,500 --> 00:25:23,170
building so imagine you're trying to

698
00:25:23,170 --> 00:25:24,430
represent something closer to the real

699
00:25:24,430 --> 00:25:27,340
world you know armor a combat suit it

700
00:25:27,340 --> 00:25:29,560
acts as armor but it also might fire

701
00:25:29,560 --> 00:25:30,880
back at the opponent for you so it

702
00:25:30,880 --> 00:25:33,280
connect as a weapon or maybe you get

703
00:25:33,280 --> 00:25:34,990
hurt in combat so it tries to patch you

704
00:25:34,990 --> 00:25:37,060
up so it acts as a med kit where you get

705
00:25:37,060 --> 00:25:39,040
scared in combat and it tries to whisper

706
00:25:39,040 --> 00:25:40,690
nice things to you to build your morale

707
00:25:40,690 --> 00:25:44,080
so it acts as a psychiatrist single

708
00:25:44,080 --> 00:25:48,640
responsibility my ass partner how does

709
00:25:48,640 --> 00:25:49,930
that work how do you model something

710
00:25:49,930 --> 00:25:54,160
like that so oh that's alright this

711
00:25:54,160 --> 00:25:55,810
picture of a med kit item sorry that

712
00:25:55,810 --> 00:25:58,660
shouldn't be there entity component

713
00:25:58,660 --> 00:26:02,140
system it is a pattern very commonly

714
00:26:02,140 --> 00:26:05,770
used in regular games and basically an

715
00:26:05,770 --> 00:26:07,150
entity is what we might think of as an

716
00:26:07,150 --> 00:26:09,580
object combat suit handgun med kit etc

717
00:26:09,580 --> 00:26:11,800
components different things that can do

718
00:26:11,800 --> 00:26:13,240
an AK it's a weapon it connect it's a

719
00:26:13,240 --> 00:26:16,030
armor it does movement entities have

720
00:26:16,030 --> 00:26:18,790
zero or more components so an enemy

721
00:26:18,790 --> 00:26:20,260
might be as simple as you know having a

722
00:26:20,260 --> 00:26:21,370
name and a weight everything has a name

723
00:26:21,370 --> 00:26:24,010
in a way so that doesn't do anything

724
00:26:24,010 --> 00:26:26,110
else but these are flavor items which

725
00:26:26,110 --> 00:26:28,390
are available in the game energies are

726
00:26:28,390 --> 00:26:31,570
data they are not behavior these aren't

727
00:26:31,570 --> 00:26:33,760
the way we typically think of objects so

728
00:26:33,760 --> 00:26:35,230
how they actually work is in a typical

729
00:26:35,230 --> 00:26:36,820
game loop while the game is running we

730
00:26:36,820 --> 00:26:38,020
get our user input we have to take the

731
00:26:38,020 --> 00:26:38,740
state we draw it

732
00:26:38,740 --> 00:26:41,620
what does update state look like so

733
00:26:41,620 --> 00:26:43,600
maybe it's a game about animals running

734
00:26:43,600 --> 00:26:45,250
around in the forest first the animals

735
00:26:45,250 --> 00:26:47,410
tend to hide from danger to be safe once

736
00:26:47,410 --> 00:26:48,850
it makes her the safe they forage for

737
00:26:48,850 --> 00:26:50,410
food then they move about and they

738
00:26:50,410 --> 00:26:52,210
attack enemies what's word for food look

739
00:26:52,210 --> 00:26:55,390
like for entity and entities we iterate

740
00:26:55,390 --> 00:26:57,850
over our list of entities and if is

741
00:26:57,850 --> 00:27:00,310
animal entity search for food entity

742
00:27:00,310 --> 00:27:01,810
notice entity you're not calling a

743
00:27:01,810 --> 00:27:04,660
method on the entity you inspect the

744
00:27:04,660 --> 00:27:06,580
data inside of the entity object to find

745
00:27:06,580 --> 00:27:09,010
out if it can behave like an animal and

746
00:27:09,010 --> 00:27:11,200
then you call this method or you call

747
00:27:11,200 --> 00:27:13,030
this function passing it the entity is

748
00:27:13,030 --> 00:27:15,430
an argument so the entities don't have

749
00:27:15,430 --> 00:27:19,350
behavior they simply have state

750
00:27:19,350 --> 00:27:21,310
but we're the web we don't actually have

751
00:27:21,310 --> 00:27:24,400
a game loop so iterating over all those

752
00:27:24,400 --> 00:27:25,900
entities can be extremely expensive in

753
00:27:25,900 --> 00:27:27,130
games if you have millions of entities

754
00:27:27,130 --> 00:27:28,300
so they have all sorts of tricks for

755
00:27:28,300 --> 00:27:29,740
filtering stuff we actually have

756
00:27:29,740 --> 00:27:31,750
something simpler because we don't have

757
00:27:31,750 --> 00:27:33,940
a game loop so we just check the set of

758
00:27:33,940 --> 00:27:35,350
objects that we're interacting with at

759
00:27:35,350 --> 00:27:37,050
the time that we you click on anything

760
00:27:37,050 --> 00:27:40,120
and it complex behaviors become really

761
00:27:40,120 --> 00:27:41,560
simple so let me give you a concrete

762
00:27:41,560 --> 00:27:45,820
example so we don't do it this way

763
00:27:45,820 --> 00:27:47,170
anymore but this is how we initially did

764
00:27:47,170 --> 00:27:49,030
it and it's simpler to understand so

765
00:27:49,030 --> 00:27:52,150
implementing ECS with a view we select

766
00:27:52,150 --> 00:27:54,220
the first thing is all the items all the

767
00:27:54,220 --> 00:27:55,750
data that we need to select for a thing

768
00:27:55,750 --> 00:27:57,760
which everything has name slug weight

769
00:27:57,760 --> 00:28:00,700
etc we select our armor component our

770
00:28:00,700 --> 00:28:02,800
mod component a mod is like a Bionic or

771
00:28:02,800 --> 00:28:04,660
genetic mod if you go to a sickbay and

772
00:28:04,660 --> 00:28:06,450
get installed inside your body

773
00:28:06,450 --> 00:28:08,770
you know weapon component and then we do

774
00:28:08,770 --> 00:28:11,350
on left outer join on the tables

775
00:28:11,350 --> 00:28:13,870
containing that data why do we do a left

776
00:28:13,870 --> 00:28:15,220
outer join because of the data is not

777
00:28:15,220 --> 00:28:18,070
there we get null results on Def and

778
00:28:18,070 --> 00:28:20,040
pearl and then we have predicate methods

779
00:28:20,040 --> 00:28:23,650
we can see if it's a if it's armor find

780
00:28:23,650 --> 00:28:26,740
out if the armor ID is defined is it a

781
00:28:26,740 --> 00:28:30,670
weapon is the weapon ID defined and you

782
00:28:30,670 --> 00:28:32,740
might remember those economic steps we

783
00:28:32,740 --> 00:28:34,630
talked about earlier well it doesn't

784
00:28:34,630 --> 00:28:36,430
have to just be the character as that

785
00:28:36,430 --> 00:28:38,350
first argument inside of the step here

786
00:28:38,350 --> 00:28:40,270
we're gonna install a mod in a sickbay

787
00:28:40,270 --> 00:28:43,210
so location we check that we run

788
00:28:43,210 --> 00:28:44,890
confined you don't want to be in the

789
00:28:44,890 --> 00:28:47,500
Brig or sick confined to the sick bay

790
00:28:47,500 --> 00:28:50,890
then bless you then we check that we're

791
00:28:50,890 --> 00:28:52,990
in the area sick bay we checked that our

792
00:28:52,990 --> 00:28:54,160
wallet has enough money and then

793
00:28:54,160 --> 00:28:57,280
inventory the inventory object for this

794
00:28:57,280 --> 00:28:59,830
we're going to install the mod weren't

795
00:28:59,830 --> 00:29:02,770
them to do so and the method down here

796
00:29:02,770 --> 00:29:04,720
we get to our predicate method if item

797
00:29:04,720 --> 00:29:07,030
is mod and remember we're just checking

798
00:29:07,030 --> 00:29:10,090
to see if the mod ID is defined out of

799
00:29:10,090 --> 00:29:12,850
the left outer join that's how we can

800
00:29:12,850 --> 00:29:16,060
have rich incredibly incredibly complex

801
00:29:16,060 --> 00:29:20,350
behavior on objects very simply it's not

802
00:29:20,350 --> 00:29:21,580
single responsibility it does something

803
00:29:21,580 --> 00:29:22,840
a lot different from what we see from

804
00:29:22,840 --> 00:29:24,730
different object or programming but it

805
00:29:24,730 --> 00:29:26,910
works out really nicely

806
00:29:26,910 --> 00:29:30,190
so when developers start on this project

807
00:29:30,190 --> 00:29:32,380
most of them gush over it most not all

808
00:29:32,380 --> 00:29:34,750
they're really surprised it's very very

809
00:29:34,750 --> 00:29:36,309
clean and beautiful for production code

810
00:29:36,309 --> 00:29:37,960
it's very easy to work on I'm very happy

811
00:29:37,960 --> 00:29:40,900
about that if you go out to Tao station

812
00:29:40,900 --> 00:29:44,950
got space you can see the web page and

813
00:29:44,950 --> 00:29:46,120
there's a blog link there or you can

814
00:29:46,120 --> 00:29:47,440
sign up for the newsletter if you want

815
00:29:47,440 --> 00:29:49,390
to and that'll give you a little bit

816
00:29:49,390 --> 00:29:50,500
more information about it we actually

817
00:29:50,500 --> 00:29:52,420
haven't said anything sent anything on

818
00:29:52,420 --> 00:29:53,440
the newsletter yet because we're not

819
00:29:53,440 --> 00:29:55,150
going to spam folks that'll make you

820
00:29:55,150 --> 00:29:56,920
eligible for the Alpha if you want to

821
00:29:56,920 --> 00:29:59,020
play you can also follow us at AU

822
00:29:59,020 --> 00:30:01,480
station on Twitter that's interesting

823
00:30:01,480 --> 00:30:02,679
because we're not just talking about the

824
00:30:02,679 --> 00:30:03,820
game we're also sharing the latest

825
00:30:03,820 --> 00:30:06,100
science news the latest science fiction

826
00:30:06,100 --> 00:30:07,750
news if you're a science and science

827
00:30:07,750 --> 00:30:09,820
fiction buff following this feed is just

828
00:30:09,820 --> 00:30:14,530
awesome it's a lot of fun and as usual

829
00:30:14,530 --> 00:30:16,690
we have two choices now I can a take

830
00:30:16,690 --> 00:30:18,880
questions or be I have some bonus slides

831
00:30:18,880 --> 00:30:27,760
about some of the science involved so is

832
00:30:27,760 --> 00:30:29,799
anyone here read the series the

833
00:30:29,799 --> 00:30:31,150
experience or watch the television

834
00:30:31,150 --> 00:30:35,890
series okay cool so a lot of times I see

835
00:30:35,890 --> 00:30:37,960
people complaining about one of the

836
00:30:37,960 --> 00:30:39,040
initial ships in the game called the

837
00:30:39,040 --> 00:30:41,200
Canterbury is an ice hauler going out to

838
00:30:41,200 --> 00:30:43,000
the rings of Saturn mining ice bringing

839
00:30:43,000 --> 00:30:46,570
it back waters ridiculous that's kind of

840
00:30:46,570 --> 00:30:50,919
a joke why would you have ice mining the

841
00:30:50,919 --> 00:30:52,240
average person in the Western world

842
00:30:52,240 --> 00:30:54,760
consumes a cubic meter of water every

843
00:30:54,760 --> 00:30:57,370
two to three days and you think no I

844
00:30:57,370 --> 00:31:00,070
don't I'm nowhere close to a cubic meter

845
00:31:00,070 --> 00:31:04,750
of water yeah you drink you flush you

846
00:31:04,750 --> 00:31:06,190
bathe mop before watch your dishes

847
00:31:06,190 --> 00:31:08,080
watering the lawn you go through a lot

848
00:31:08,080 --> 00:31:10,480
of water huge amount of water people

849
00:31:10,480 --> 00:31:13,630
don't think about it so just keeping the

850
00:31:13,630 --> 00:31:16,240
math simple that's about 100 cubic mob

851
00:31:16,240 --> 00:31:17,770
metres of water per person per year

852
00:31:17,770 --> 00:31:19,179
probably keep a meter of water that's a

853
00:31:19,179 --> 00:31:22,360
thousand kilograms or a ton each of you

854
00:31:22,360 --> 00:31:23,950
goes through a hundred thousand

855
00:31:23,950 --> 00:31:25,960
kilograms of water a year so 10 people

856
00:31:25,960 --> 00:31:27,309
that's a million kilograms we're

857
00:31:27,309 --> 00:31:28,750
supposed to have 80 people in this room

858
00:31:28,750 --> 00:31:31,330
you're going through 8 million kilograms

859
00:31:31,330 --> 00:31:34,840
of water per year just the people in

860
00:31:34,840 --> 00:31:37,660
this room that's a lot of water

861
00:31:37,660 --> 00:31:38,890
how's this hacks looking to work on a

862
00:31:38,890 --> 00:31:41,170
space station so let's assume we have a

863
00:31:41,170 --> 00:31:42,850
hundred thousand people on a space

864
00:31:42,850 --> 00:31:45,340
station hundred that's gonna be a

865
00:31:45,340 --> 00:31:47,200
hundred billion kilograms of water a

866
00:31:47,200 --> 00:31:49,450
year if we were to hit 99 percent

867
00:31:49,450 --> 00:31:51,520
efficiency at recycling and that ain't

868
00:31:51,520 --> 00:31:53,020
gonna happen I don't care how far in the

869
00:31:53,020 --> 00:31:54,190
future you get it's not gonna happen

870
00:31:54,190 --> 00:31:55,690
that's gonna be a hundred million

871
00:31:55,690 --> 00:31:57,340
kilograms of water and in case you're

872
00:31:57,340 --> 00:31:59,920
wondering largest animal on earth right

873
00:31:59,920 --> 00:32:01,660
now is the blue whale that's about 700

874
00:32:01,660 --> 00:32:04,240
blue whales worth of water that's a lot

875
00:32:04,240 --> 00:32:06,640
and that's heavy for comparison by the

876
00:32:06,640 --> 00:32:08,140
way the International Space Station is

877
00:32:08,140 --> 00:32:10,390
70% efficient they're recycling they

878
00:32:10,390 --> 00:32:12,760
were hoping to be 85% efficient but they

879
00:32:12,760 --> 00:32:13,870
found a lot of the one that they had was

880
00:32:13,870 --> 00:32:15,310
too acidic so they couldn't get there in

881
00:32:15,310 --> 00:32:16,990
the future though you're gonna have a

882
00:32:16,990 --> 00:32:18,550
lot more space stations docking and

883
00:32:18,550 --> 00:32:20,440
undocking or ships docking and undocking

884
00:32:20,440 --> 00:32:22,930
at space stations the airlocks are gonna

885
00:32:22,930 --> 00:32:25,000
open and close a lot more often a lot of

886
00:32:25,000 --> 00:32:26,050
the water is going to be used as

887
00:32:26,050 --> 00:32:27,790
reaction mass and maneuvering thrusters

888
00:32:27,790 --> 00:32:30,280
you will not hit 99 percent efficiency

889
00:32:30,280 --> 00:32:32,650
but you're gonna need a lot of water so

890
00:32:32,650 --> 00:32:34,570
just for that small population that's a

891
00:32:34,570 --> 00:32:36,610
small town a hundred million kilograms

892
00:32:36,610 --> 00:32:40,300
of water that's assuming beautiful

893
00:32:40,300 --> 00:32:42,940
beautiful efficiency recycling so ice

894
00:32:42,940 --> 00:32:44,320
mining is going to be a major industry

895
00:32:44,320 --> 00:32:48,640
in outer space and as a result it is

896
00:32:48,640 --> 00:32:49,810
something which we're going to be

897
00:32:49,810 --> 00:32:51,340
bringing to the game later on it's not

898
00:32:51,340 --> 00:32:53,350
going to be in the Alpha but it's it's

899
00:32:53,350 --> 00:32:55,210
an important thing and we do want to pay

900
00:32:55,210 --> 00:32:59,890
attention to the science calculate the

901
00:32:59,890 --> 00:33:02,770
orbital velocity of something

902
00:33:02,770 --> 00:33:04,420
a compass formula memorized at this

903
00:33:04,420 --> 00:33:06,100
point what you do to calculate the

904
00:33:06,100 --> 00:33:07,630
orbital velocity of a satellite this is

905
00:33:07,630 --> 00:33:09,010
the simple version but it's fairly

906
00:33:09,010 --> 00:33:10,810
accurate you take the gravitational

907
00:33:10,810 --> 00:33:13,120
constant multiplied that by the mass of

908
00:33:13,120 --> 00:33:14,320
the thing you're orbiting around and

909
00:33:14,320 --> 00:33:16,120
then the radius is a distance of the

910
00:33:16,120 --> 00:33:17,980
item from the center of that mass

911
00:33:17,980 --> 00:33:19,420
note you don't actually have to consider

912
00:33:19,420 --> 00:33:21,250
the mass of the item that's doing the

913
00:33:21,250 --> 00:33:23,020
orbiting you just need the central mass

914
00:33:23,020 --> 00:33:25,480
and for tau station the primary space

915
00:33:25,480 --> 00:33:27,550
station and the first space station in

916
00:33:27,550 --> 00:33:30,790
the game it's orbiting around Mars so we

917
00:33:30,790 --> 00:33:32,200
take the mass of bars multiply it by the

918
00:33:32,200 --> 00:33:34,210
gravitational constant it's orbiting at

919
00:33:34,210 --> 00:33:36,670
a radius of about 11,000 kilometers we

920
00:33:36,670 --> 00:33:38,730
multiply it by a thousand because

921
00:33:38,730 --> 00:33:40,780
gravitational constant measure meters

922
00:33:40,780 --> 00:33:43,480
that gets us the velocity of the space

923
00:33:43,480 --> 00:33:44,980
station and that turns out to be

924
00:33:44,980 --> 00:33:47,840
extremely important for our games

925
00:33:47,840 --> 00:33:50,940
by comparison so the International Space

926
00:33:50,940 --> 00:33:53,250
Station portable radius almost 7,000

927
00:33:53,250 --> 00:33:55,290
kilometers the altitude is considerably

928
00:33:55,290 --> 00:33:56,700
different International Space Station's

929
00:33:56,700 --> 00:33:59,160
400 kilometers versus almost 8000 top

930
00:33:59,160 --> 00:34:00,360
station moves at one point nine

931
00:34:00,360 --> 00:34:02,370
kilometers per second which is actually

932
00:34:02,370 --> 00:34:03,930
really slow because the International

933
00:34:03,930 --> 00:34:05,370
Space Station seven point six six

934
00:34:05,370 --> 00:34:07,470
kilometers per second and takes about an

935
00:34:07,470 --> 00:34:09,330
hour and a half to orbit Tao station

936
00:34:09,330 --> 00:34:11,699
takes almost 10 hours to orbit Mars what

937
00:34:11,699 --> 00:34:13,650
that allows us to do knowing this

938
00:34:13,650 --> 00:34:17,760
information our get radium's method up

939
00:34:17,760 --> 00:34:20,159
there we have our elapsed time which is

940
00:34:20,159 --> 00:34:23,880
the epoch our current epoch - the epoch

941
00:34:23,880 --> 00:34:25,949
of the game that tells us our lap time

942
00:34:25,949 --> 00:34:28,770
in seconds we get the orbit time of the

943
00:34:28,770 --> 00:34:31,909
particular space station we do a mod

944
00:34:31,909 --> 00:34:33,810
basically you divide it you just take

945
00:34:33,810 --> 00:34:35,190
the remainder that gets rid of all the

946
00:34:35,190 --> 00:34:37,260
preceding orbits do a mod to figure out

947
00:34:37,260 --> 00:34:38,670
how many seconds in the current orbit

948
00:34:38,670 --> 00:34:40,620
you are and a simple math gets you the

949
00:34:40,620 --> 00:34:42,810
radians and then for your X and your Y

950
00:34:42,810 --> 00:34:44,940
you pass in whatever date time you need

951
00:34:44,940 --> 00:34:46,199
you get the radians and you just use

952
00:34:46,199 --> 00:34:47,969
simple trigonometry to determine the

953
00:34:47,969 --> 00:34:49,230
current position of the space station

954
00:34:49,230 --> 00:34:51,540
what that means is the cron job that I

955
00:34:51,540 --> 00:34:53,850
had written to update the position of

956
00:34:53,850 --> 00:34:55,020
the Space Station's has been deleted

957
00:34:55,020 --> 00:34:57,030
because now we can determine the

958
00:34:57,030 --> 00:34:58,890
position in Space Station at any time on

959
00:34:58,890 --> 00:35:00,810
the fly and Space Station data is now

960
00:35:00,810 --> 00:35:03,750
immutable which solves a number of

961
00:35:03,750 --> 00:35:05,250
problems we have in the game we do

962
00:35:05,250 --> 00:35:08,940
assume station orbits are thank you are

963
00:35:08,940 --> 00:35:10,860
circular keeps things simpler but it's

964
00:35:10,860 --> 00:35:12,630
fairly accurate and this is important

965
00:35:12,630 --> 00:35:15,270
because we can now calculate the

966
00:35:15,270 --> 00:35:17,340
distance between two space stations

967
00:35:17,340 --> 00:35:20,490
again simple trigger because you want to

968
00:35:20,490 --> 00:35:21,780
travel a lot and you need to know the

969
00:35:21,780 --> 00:35:22,890
travel time between the different

970
00:35:22,890 --> 00:35:24,510
stations if you go to the port and you

971
00:35:24,510 --> 00:35:26,250
just refresh that page a few times

972
00:35:26,250 --> 00:35:28,410
you'll see the price changing you'll see

973
00:35:28,410 --> 00:35:30,480
the travel time changing because we

974
00:35:30,480 --> 00:35:31,950
actually again stuff that we pay

975
00:35:31,950 --> 00:35:34,770
attention to even the information time

976
00:35:34,770 --> 00:35:37,080
sending an email to someone else we try

977
00:35:37,080 --> 00:35:38,910
to calculate how far away they are so

978
00:35:38,910 --> 00:35:40,500
that the email gets delayed it's not

979
00:35:40,500 --> 00:35:42,270
going to be instant because this is

980
00:35:42,270 --> 00:35:46,260
space so that's the basics of it I hope

981
00:35:46,260 --> 00:35:47,310
you enjoyed it does anyone have any

982
00:35:47,310 --> 00:35:49,340
questions

983
00:35:50,410 --> 00:35:56,950
yes sustained

984
00:35:58,130 --> 00:36:00,860
what kind of database system yes I said

985
00:36:00,860 --> 00:36:06,590
that that kind of joins like that okay

986
00:36:06,590 --> 00:36:09,680
so behind so behind the scenes how do we

987
00:36:09,680 --> 00:36:10,670
actually handle that there's a lot of

988
00:36:10,670 --> 00:36:12,830
joints yes it's very expensive so

989
00:36:12,830 --> 00:36:14,360
there's a couple of things we do first

990
00:36:14,360 --> 00:36:15,860
of all it's PostgreSQL underneath

991
00:36:15,860 --> 00:36:17,540
we strive very hard to have a properly

992
00:36:17,540 --> 00:36:19,070
normalized database as much as possible

993
00:36:19,070 --> 00:36:20,510
so that we don't have to worry about the

994
00:36:20,510 --> 00:36:22,910
problems with that and because the core

995
00:36:22,910 --> 00:36:25,070
item information doesn't have to change

996
00:36:25,070 --> 00:36:28,520
you can catch that so all of that is

997
00:36:28,520 --> 00:36:30,890
trivial to cache now when you get the

998
00:36:30,890 --> 00:36:32,180
item and it gets inserted into your

999
00:36:32,180 --> 00:36:34,490
inventory then it's no longer as easily

1000
00:36:34,490 --> 00:36:36,650
cacheable because you know the item

1001
00:36:36,650 --> 00:36:38,120
might get damaged so might get reduced

1002
00:36:38,120 --> 00:36:39,950
but primarily it's just stuff that we

1003
00:36:39,950 --> 00:36:42,140
can easily cache using chai and we use

1004
00:36:42,140 --> 00:36:44,270
Redis as the back-end for that which

1005
00:36:44,270 --> 00:36:45,710
also means if that goes down we could

1006
00:36:45,710 --> 00:36:46,880
still go back to the database and fetch

1007
00:36:46,880 --> 00:36:49,100
it so you would lose some performance

1008
00:36:49,100 --> 00:36:51,950
but that's why we like immutable data as

1009
00:36:51,950 --> 00:36:53,410
much as possible it makes caching easier

1010
00:36:53,410 --> 00:36:58,390
any other questions yes

1011
00:36:59,030 --> 00:37:02,720
not at the present time it is something

1012
00:37:02,720 --> 00:37:04,700
that I had looked at from time to time

1013
00:37:04,700 --> 00:37:08,480
but no so most of the time for the speed

1014
00:37:08,480 --> 00:37:10,880
at which the chips travel and behind the

1015
00:37:10,880 --> 00:37:13,340
scenes we actually we we were actually

1016
00:37:13,340 --> 00:37:16,010
considering like the GeForce you would

1017
00:37:16,010 --> 00:37:17,840
have when you were traveling relativity

1018
00:37:17,840 --> 00:37:20,060
did not make a difference in most of

1019
00:37:20,060 --> 00:37:22,820
those calculations so we decided to not

1020
00:37:22,820 --> 00:37:25,310
use that that may change in the future

1021
00:37:25,310 --> 00:37:30,549
are there any other questions yes

1022
00:37:30,980 --> 00:37:32,660
that's actually an excellent question so

1023
00:37:32,660 --> 00:37:34,760
I started this project back in 2010 and

1024
00:37:34,760 --> 00:37:36,380
then got it dropped because I had a book

1025
00:37:36,380 --> 00:37:38,420
deal and we had a brand new baby and

1026
00:37:38,420 --> 00:37:39,980
then we moved to another country and

1027
00:37:39,980 --> 00:37:41,930
those kind of interfere with things but

1028
00:37:41,930 --> 00:37:43,430
when I first started I was thinking well

1029
00:37:43,430 --> 00:37:44,660
maybe I should try something different

1030
00:37:44,660 --> 00:37:46,340
like you know rails or something like

1031
00:37:46,340 --> 00:37:48,290
that and then I realized actually I want

1032
00:37:48,290 --> 00:37:49,670
to make a commercial product I don't

1033
00:37:49,670 --> 00:37:51,410
want to take risk on this so it was a

1034
00:37:51,410 --> 00:37:53,360
decision from day one that I want to

1035
00:37:53,360 --> 00:37:55,010
stick with something that I know works

1036
00:37:55,010 --> 00:37:57,350
that I'm not gonna be stuck wondering

1037
00:37:57,350 --> 00:37:59,300
how I do this particular thing for a

1038
00:37:59,300 --> 00:38:00,620
long time because I didn't realize that

1039
00:38:00,620 --> 00:38:03,800
I have a large team behind me so Perl

1040
00:38:03,800 --> 00:38:06,230
works it's rock solid it's battle tested

1041
00:38:06,230 --> 00:38:08,780
it's been around for 25 years and I

1042
00:38:08,780 --> 00:38:10,310
don't have to worry about whether or not

1043
00:38:10,310 --> 00:38:11,930
I can do what I need to do it's going to

1044
00:38:11,930 --> 00:38:22,970
do it expense there's a nook so cooking

1045
00:38:22,970 --> 00:38:26,240
calm is the fourth largest e-commerce

1046
00:38:26,240 --> 00:38:28,430
site in the world the entire back end

1047
00:38:28,430 --> 00:38:29,690
almost the entire back end written in

1048
00:38:29,690 --> 00:38:30,140
Perl

1049
00:38:30,140 --> 00:38:32,900
curl handles large loads it's there's

1050
00:38:32,900 --> 00:38:35,000
nothing unusual about that most of the

1051
00:38:35,000 --> 00:38:36,500
performance issues you have with stuff

1052
00:38:36,500 --> 00:38:39,410
like that are in your network or your

1053
00:38:39,410 --> 00:38:41,450
database I know stuff like that it's

1054
00:38:41,450 --> 00:38:44,000
typically not CPU bound so I'm not

1055
00:38:44,000 --> 00:38:46,940
worried about Perl with that any other

1056
00:38:46,940 --> 00:38:48,770
questions

1057
00:38:48,770 --> 00:38:51,210
yes how do you manage to synchronize

1058
00:38:51,210 --> 00:38:53,310
between user actions so you haven't user

1059
00:38:53,310 --> 00:38:55,200
that makes a change in I need them and

1060
00:38:55,200 --> 00:38:57,450
that effect on the other user how you

1061
00:38:57,450 --> 00:38:59,040
manage that the problems with

1062
00:38:59,040 --> 00:39:02,369
recondition the prompts will place

1063
00:39:02,369 --> 00:39:05,760
conditions there most of that is the how

1064
00:39:05,760 --> 00:39:07,140
do I manage the user actions to avoid

1065
00:39:07,140 --> 00:39:08,550
race conditions and stuff like that is

1066
00:39:08,550 --> 00:39:09,720
what he's asking about making sure

1067
00:39:09,720 --> 00:39:12,030
they're synchronized so some of it is

1068
00:39:12,030 --> 00:39:13,770
simpler because you're in a different

1069
00:39:13,770 --> 00:39:16,530
room and I'm impacting a thing it's not

1070
00:39:16,530 --> 00:39:20,190
going to impact you other items it is we

1071
00:39:20,190 --> 00:39:21,990
check to see everything that can be done

1072
00:39:21,990 --> 00:39:23,520
and then we have a transaction in as

1073
00:39:23,520 --> 00:39:25,440
tight loop as possible so that we don't

1074
00:39:25,440 --> 00:39:27,690
we try to avoid rubbing around in the

1075
00:39:27,690 --> 00:39:31,020
database a whole bunch and you know do

1076
00:39:31,020 --> 00:39:33,510
and do a lock beforehand and then do a

1077
00:39:33,510 --> 00:39:34,859
whole bunch of stuff we try and keep

1078
00:39:34,859 --> 00:39:36,210
those transaction times as small as

1079
00:39:36,210 --> 00:39:38,880
possible we did actually find the case

1080
00:39:38,880 --> 00:39:41,010
where we had some walking in an

1081
00:39:41,010 --> 00:39:42,300
unfortunate position and that's part of

1082
00:39:42,300 --> 00:39:44,220
the reason why I wrote the box and going

1083
00:39:44,220 --> 00:39:47,760
to really smash it is like that so in

1084
00:39:47,760 --> 00:39:49,290
this case it's finding out what actually

1085
00:39:49,290 --> 00:39:52,820
has a real impact from solving

1086
00:39:56,890 --> 00:39:58,950
you

